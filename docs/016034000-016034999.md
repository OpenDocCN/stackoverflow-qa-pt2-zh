# StackOverflow 问答 16034000-16034999

# python - 如何删除字符串中的三个点？（Python）

> ID：16034001
> 
> 赞同：0
> 
> 时间：2013-04-16T09:56:59.523
> 
> 标签：python

例如：

> “是的……我是亚伦”

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-16T09:57:24.643

```
"yes...I am Aaron".replace("...", "") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-05-12T16:27:58.437

jamylak 的答案应该可以解决问题，但是，如果您使用的是 ASCII 省略号，请尝试以下操作：

```
>>> s = 'yes\u2026 I am Aaron'
>>> s
'yes… I am Aaron'
>>> s.replace('\u2026', '')
'yes I am Aaron'
>>> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T10:03:08.590

```
>>> import re
>>> s = "1,2,3,... ,10"
>>> s = re.sub("\.\.\.", "", s)
>>> s
'1,2,3, ,10' 
```

* * *

```
>>> import re
>>> print re.sub("[\.][\.][\.]", " ", "yes...I am Aaron")
yes I am Aaron
>>> print re.sub("[\.]"*3, " ", "yes...I am Aaron")
yes I am Aaron
>>> print re.sub("[\b\.\b]{3}", " ", "yes...I am Aaron")
yes I am Aaron
>>> 
```

# jquery - jqgrid v4.4.5 rtl 水平

> ID：16034005
> 
> 赞同：2
> 
> 时间：2013-04-16T09:57:08.180
> 
> 标签：jquery, asp.net, jquery-ui, jqgrid

![在此处输入图像描述](https://i.stack.imgur.com/15bBy.png)我使用 jqgrid v4.4.5 和 jquery v1.9.1。当我调整 jqgrid 的大小并且水平滚动条出现时，它可以在 IE 和 Firefox 上运行。但在 Chrome 中不起作用，列被截断并且宽度计算错误。

我该如何解决这个问题？

```
<script>

    $(function () {
        $("#UsersGrid").jqGrid({
            direction:"rtl",
            url: 'jqGridHandler.ashx',
            datatype: 'json',
            height: 250,
            colNames: ['UserID', 'UserName', 'FirstName', 'MiddleName', 'LastName', 'EmailID'],
            colModel: [
                    { name: 'UserID', index: 'UserID', width: 100, sortable: true },
                    { name: 'UserName', width: 100, sortable: true },
                    { name: 'FirstName', width: 100, sortable: true },
                    { name: 'MiddleName', width: 100, sortable: true },
                    { name: 'LastName', width: 100, sortable: true },
                    { name: 'EmailID', width: 150, sortable: true }
            ],
            rowNum: 10,
            rowList: [10, 20, 30],
            pager: '#UsersGridPager',
            sortname: 'UserID',
            viewrecords: true,
            sortorder: 'asc',
            caption: 'JSON Example'
        });

        $("#UsersGrid").jqGrid('navGrid', '#UsersGridPager', { edit: false, add: false, del: false });
    });
</script> 
```

![在此处输入图像描述](https://i.stack.imgur.com/15bBy.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:34:57.103

如[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aoptions)中所述，如果设置了`shrinkToFit`属性，则定义了如何重新计算网格列的宽度，同时考虑到网格的宽度。如果此值为真，并且列的宽度也已设置，则每列都按其宽度成比例缩放。

> 当设置为 true 时，网格宽度会自动重新计算为父元素的宽度。这仅在最初创建网格时完成。为了在父元素更改宽度时调整网格大小，您应该应用自定义代码并为此使用 setGridWidth 方法。

因此，您可以将属性添加到 jqGrid 为：

```
shrinkToFit:true, 
```

# jquery - jquery onload 不工作（jquery mobile）

> ID：16034010
> 
> 赞同：0
> 
> 时间：2013-04-16T09:57:16.383
> 
> 标签：jquery, jquery-mobile

jQuery 手机`$(window).load(function () {});`不工作。我不通过 mvc 工作。我在地址中传递页面名称并从索引中加载它，所以链接就像 --> index.php?option=com_pages&page=signup 注册是页面的名称。

Jquery onload 在桌面网站版本上运行良好，尽管我以相同的样式传递页面的名称。

这是代码

```
<script type="text/javascript">
    $(window).load(function () {
      alert("yaaaaa");
        var curr = new Date().getFullYear();
        var opt =
        {

        }

        opt.date = {preset : 'date'};
        opt.datetime = { preset : 'datetime', minDate: new Date(2012,3,10,9,22), maxDate: new Date(2014,7,30,15,44), stepMinute: 5  };
        opt.time = {preset : 'time'};

        $('select.changes').bind('change', function() {
            //var demo = $('#demo').val();
            var demo = "date";
            $(".demos").hide();
            if (!($("#demo_"+demo).length))
                demo = 'default';

            //$0("#demo_" + demo).show();
            $("#demo_default").show();
            //$('#test_'+demo).val('').scroller('destroy').scroller($.extend(opt[$('#demo').val()], { theme: $('#theme').val(), mode: $('#mode').val(), display: $('#display').val(), lang: $('#language').val() }));
            //$('#test_'+demo).val('').scroller('destroy').scroller($.extend(opt["date"], { theme: "jqm", mode: "scroller", display: "modal", lang: "" }));
            $('#test_default').val('').scroller('destroy').scroller($.extend(opt["date"], { theme: "jqm", mode: "scroller", display: "modal", lang: "" }));
        });

        $('#fac').trigger('change');
    });
</script> 
```

该警报仅在刷新页面时才有效，而不是当我通过链接从另一个页面转到该页面时

# android - 如何触发用于隐藏内置键盘的后退按钮事件？

> ID：16034013
> 
> 赞同：0
> 
> 时间：2013-04-16T09:57:21.287
> 
> 标签：android, keyboard, back

我想知道当按下后退按钮隐藏内置键盘时触发的事件。我想在按下后退按钮隐藏键盘时添加一个视图。我也在按下键盘的 ENTER 键时添加一个视图但是当按下后退按钮隐藏键盘时，我也想做同样的事情。我尝试过的都在这里。

```
public boolean onKey(View v, int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub
    if (event.getAction() == KeyEvent.ACTION_DOWN) {
        switch (keyCode) {
        case KeyEvent.KEYCODE_DPAD_CENTER:
        case KeyEvent.KEYCODE_ENTER:

            InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(v.getApplicationWindowToken(), 0);
            String string = text.getText().toString();
            if (string.trim().equals("")) {
                image_view.removeView(text);
            } else {

                text.setCursorVisible(false);
                text.setDrawingCacheEnabled(true);
                text.buildDrawingCache();

                Bitmap bmp_text = Bitmap.createBitmap(text
                        .getDrawingCache());
                view = new ZoomRotateImage(ImageEditing.this, bmp_text);
                text.setDrawingCacheEnabled(false);
                image_view.removeView(text);
                image_view.addView(view);
                getUpdatedImage();
            }
            return true;

        default:
            break;
        }
    }
    return false;
} 
```

它工作正常..现在我只想在按下后退按钮以隐藏键盘时实现相同的功能。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:59:34.457

按下设备上的事件返回按钮并隐藏软键盘，如下所示：

```
 @Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK)) {
        // hide keyboard here
                  InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
                 imm.hideSoftInputFromWindow(myEditText.getWindowToken(), 0);
    } else
        return;

} 
```

# javascript - “onComplete 属性必须是 javascript 函数名称”我输入错了什么？

> ID：16034016
> 
> 赞同：0
> 
> 时间：2013-04-16T09:57:25.617
> 
> 标签：javascript, coldfusion

我正在尝试在标签中完成一首歌曲时运行一段 JavaScript 代码，`<cfmediaplayer>`但是每当我将“playNext()”放入 onComplete 属性时，它都会向我提供一个错误，告诉我它必须是一个正确的名称，但那是正确的名字？有人知道我可能会出错吗？

```
<script type="text/javascript">
    function playNext(){
        <cfoutput>
            var #ToScript(URL.current, "trackNo")#;
        </cfoutput>
        trackNo++;
        $("#" + trackNo).click();
    }
</script>

<div style="margin: 0 auto; width: 500px;">
    <cfoutput query="getmusic" maxrows="1">
        <cfmediaplayer name="musicPlayer" source="/artists/music/#music_location#" autoplay="yes" height="500" width="500" title="#artist_name# - #music_name#" onComplete="playNext"></cfmediaplayer>
    </cfoutput>
</div> 
```

这是我的代码，但是我刚刚注意到（使用 Web Developer 工具栏）它说 playNext 是未定义的，但显然我确实将它定义为显示。我想知道我可能做错了什么，据我所知，我的 JavaScript 看起来不错，但我是 JS 的新手，所以我可能犯了一个简单的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:18:04.730

`onComplete="playNext"`不使用`"playNext()"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:06:57.063

我可能是错的，但我认为这与 CFIDE 映射有关。

ColdFusion 创建的许多客户端控件都需要 CFIDE/Scripts 文件夹。

一些 CFForm 元素，如日期选择器、多文件上传、cfajaxproxy、cfmediaplayer 等，需要将这些脚本映射或复制到站点。

这是一个可能有帮助的问题。

[AJAX 和 Flash 内置插件无法通过 Web 访问 CFIDE 的解决方法](https://stackoverflow.com/questions/4339749/workaround-for-cfide-not-web-accessible-for-ajax-and-flash-built-ins)

这是关于该主题的一般[谷歌搜索](https://www.google.com/search?q=cfide%20mapping)。

尝试一个简单的脚本来使播放器静音，您会收到任何“Coldfusion 未定义”错误。就像是

```
<script language ="javascript">
    ColdFusion.Mediaplayer.setMute('musicPlayer', true);
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:12:30.913

尝试在 onComplete 属性中调用“playNext()”作为 playNext，不带引号或括号。如果这不起作用，请使用 playNext()。让我知道这是否有帮助。

# maven - [错误]未能执行目标 org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy

> ID：16034018
> 
> 赞同：9
> 
> 时间：2013-04-16T09:57:31.373
> 
> 标签：maven, deployment

我在 Intellij Idea 中创建了 Maven 项目，并尝试部署应用程序，但出现错误。请帮我解决这个问题。

```
 [INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy (default-deploy) on project Er-Fly: Deployment failed: repository element was not specified in the POM inside distributionManagement element or in -DaltDeploymentRepository=id::layout::url parameter -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-01T15:46:24.193

确保您在**distributionManegement**中定义了**repository**元素：

 **```
<distributionManagement>
    <repository>
        <id>central</id>
        <name>plugins-releases</name>
        <url>http://serverip:8081/artifactory/plugins-release-local</url>
    </repository>
    <snapshotRepository>
        <id>snapshots</id>
        <name>plugins-snapshot</name>
        <url>http://serverip:8081/artifactory/plugins-snapshot-local</url>
    </snapshotRepository>
</distributionManagement> 
```

还要检查您在 maven .m2/settings.yml 文件中的用户名是否有权将（上传）文件放入工件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T14:56:52.047

错误在这里：`repository element was not specified in the POM`。请参阅 [http://maven.apache.org/pom.html#Repositories](http://maven.apache.org/pom.html#Repositories)添加元素。

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                      https://maven.apache.org/xsd/maven-4.0.0.xsd">
  ...
  <repositories>
    <repository>
      <releases>
        <enabled>false</enabled>
        <updatePolicy>always</updatePolicy>
        <checksumPolicy>warn</checksumPolicy>
      </releases>
      <snapshots>
        <enabled>true</enabled>
        <updatePolicy>never</updatePolicy>
        <checksumPolicy>fail</checksumPolicy>
      </snapshots>
      <id>codehausSnapshots</id>
      <name>Codehaus Snapshots</name>
      <url>http://snapshots.maven.codehaus.org/maven2</url>
      <layout>default</layout>
    </repository>
  </repositories>
  <pluginRepositories>
    ...
  </pluginRepositories>
  ...
</project> 
```**

# node.js - Connect+SessionSocket.io+Passport：无法按键查找会话

> ID：16034024
> 
> 赞同：5
> 
> 时间：2013-04-16T09:57:44.427
> 
> 标签：node.js, sockets, session, socket.io

我在我的应用程序中使用`connect`,`passport`和`session.socket.io`模块。在`connection`session.socket.io 的事件中，我收到一个错误：`could not look up session by key: connect.sid`

情况是这样[的](https://stackoverflow.com/questions/13849517/could-not-look-up-session-by-key-connect-sid-session-socket-io)

我的服务器端代码是：

```
var mod_http            = require('http');
var mod_connect         = require('../../lib/node_modules/connect');
var mod_connectRoute    = require('../../lib/node_modules/connect-route');
var mod_ejs             = require('../../lib/node_modules/ejs');
var mod_SessionSockets  = require('../../lib/node_modules/session.socket.io');
var mod_passport        = require('../../lib/node_modules/passport'), LocalStrategy = require('../../lib/node_modules/passport-local').Strategy;
var mod_fs              = require('fs');

var app = mod_connect();
var cookieParser = mod_connect.cookieParser('your secret sauce'),
sessionStore = new mod_connect.middleware.session.MemoryStore();

app.use(mod_connect.static(folder));
// Configure the app connection
app.use(cookieParser);
app.use(mod_connect.bodyParser());
app.use(mod_connect.session({ secret: 'logged' }));
app.use(mod_passport.initialize());
app.use(mod_passport.session());

app.use(mod_connectRoute(function (router) {
    router.get('/', function (req, res, next) { 
        ...
    }
}

var server  = mod_http.createServer(app), 
    io = require('../../lib/node_modules/socket.io').listen(server);
// Limit the messages shown.
io.set('log level', 2);
// Create a session.
var sessionSockets = new mod_SessionSockets(io, sessionStore, cookieParser);

// Fire when a browser install a connection. A page refresh closes the connection and creates new one.
sessionSockets.on('connection', function (err, socket, session) {
    console.log(err);
    console.log(sessionStore);
    console.log('Hello!');
}); 
server.listen(4000); 
```

客户端代码：

```
<!DOCTYPE html> <!-- HTML 5 -->
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="/style.css">
        <script src="/jquery-1.9.1.js"></script>
        <meta charset="utf-8">
        <title> Test </title>
    </head>
    <body>  
        <script src="/socket.io/socket.io.js"></script>
        <script type="text/javascript">
            socket = io.connect('http://'+location.host);
        </script>
        <script src="/functions.js"></script>
        ...
    </body>
</html> 
```

当我打开`localhost:4000`页面时，我可以在 node.js 控制台上看到以下输出：

```
[Error: could not look up session by key: connect.sid]
{ sessions: {} }
Hello! 
```

**PS：**由于我的声誉较低，我无法为讨论添加新标签，但我认为此讨论将需要标签*session.socket.io*，如果有人可以添加它，将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-05T01:47:20.250

解决这个问题的一个简单方法是使用[passport-socketio](https://github.com/jfromaniello/passport.socketio)

下面的代码应该可以工作：

```
var passportSocketIo = require("passport.socketio");
io.use(passportSocketIo.authorize({
  cookieParser: cookieParser,
  secret:      'your secret sauce',
  store:       sessionStore,
  success:     onAuthorizeSuccess,
  fail:        onAuthorizeFail,
}));

io.sockets.on('connection', function(socket) {
  console.log(socket.request.sid);
}); 
```

# css - 在 CSS 中使用元素类型为 ID 和类添加前缀

> ID：16034026
> 
> 赞同：0
> 
> 时间：2013-04-16T09:57:52.770
> 
> 标签：css, class, coding-style, standards

希望这个问题属于这里的问答规则。

我希望人们能够了解在 css 标记中添加前缀选择器的好处和它的缺点。

例如

```
div.body-content {
    color: #fff;
} 
```

或者

```
.body-content {
    color: #fff;
} 
```

因此，人们是否愿意阐明他们对这两种编码风格的看法，这将帮助我考虑我的编码方式以及其他人看待编码风格/技术的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:00:06.253

如果您在不同的地方使用相同的课程，它会有所帮助。

举个例子 ：

```
tr .class    //for a tab
a .class     //for a link 
```

此外，它可以帮助您记住您在哪里使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:10:40.937

类选择器是使用已定义类（每页多个）的选择器。

**例如** `p.section`在

p.section { 填充：10px; }

并且您`.section`在每个 p 标签中都应用而不是 apply 。仅适用于 p 标签

`.section{padding:10px;}`此类适用于 html 和 div 等的任何标签。

现在更多**[关于这个](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)**

# php - Yii CJuiDatePicker 更新时的日期格式

> ID：16034029
> 
> 赞同：0
> 
> 时间：2013-04-16T09:57:57.923
> 
> 标签：php, datetime, yii, date-format

我的 CjuiDatePicker 有问题。在创建模式时它工作正常，但是当你在模式更新时，可以显示时间，我只需要日期。

![创造](https://i.stack.imgur.com/j7exh.jpg) ![更新](https://i.stack.imgur.com/b5PQh.jpg)

我该怎么做才能让时间消失？我尝试阅读有关此的问题，但是当我尝试添加 dateFormat 时，什么也没有发生。这是我的代码：

```
<?php $form=$this->beginWidget('bootstrap.widgets.TbActiveForm',array(
'id'=>'event-form',
'enableAjaxValidation'=>false,
'htmlOptions' => array(
    'enctype' => 'multipart/form-data',
),
  )); ?>

<p class="help-block">Fields with <span class="required">*</span> are required.</p>

<?php echo $form->errorSummary($model); ?>

<?php echo $form->textFieldRow($model,'event_name',array('class'=>'span5','maxlength'=>255)); ?>

<label for="Event_event_date" class="required">Event Date <span class="required">*</span></label>
<?php
    $this->widget('zii.widgets.jui.CJuiDatePicker', array(
        'model'=>$model,
        'attribute'=>'event_date',
        // additional javascript options for the date picker plugin
        'options'=>array(
            'showAnim'=>'slideDown',
            'minDate'=>'new Date()',
            'changeMonth'=>true,
            'changeYear'=>true,
            'dateFormat' => 'yy-mm-dd'
        ),
    ));
?>

<?php echo $form->textAreaRow($model,'event_description',array('rows'=>6, 'cols'=>50, 'class'=>'span8')); ?>

<label for="Event_event_image" class="required">Event Image <span class="required">*</span></label>
<?php 
    if(!$model->isNewRecord){
        echo CHtml::image(Yii::app()->request->baseUrl.'/uploads/event/'.$model->event_image,'image',array('width'=>300));
        echo '<br />';
    }
?>
<?php echo CHtml::activeFileField($model,'event_image'); ?>
<?php echo $form->error($model,'event_image'); ?>

<br /><br />

<?php echo $form->checkBoxRow($model,'published'); ?>

<div class="form-actions">
    <?php $this->widget('bootstrap.widgets.TbButton', array(
        'buttonType'=>'submit',
        'type'=>'primary',
        'label'=>$model->isNewRecord ? 'Create' : 'Save',
    )); ?>
</div>

    <?php $this->endWidget(); ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:05:04.067

在您的模型类中，有一个 afterFind() 事件处理程序，例如：

```
protected function afterFind(){
    $this->event_date = Yii::app()->dateFormatter->format('yyyy-MM-dd', CDateTimeParser::parse($this->event_date, 'yyyy-MM-dd'));
    return parent::afterFind(); 
} 
```

这也将对您有所帮助：[http ://www.yiiframework.com/wiki/183/using-international-dates/#hh4](http://www.yiiframework.com/wiki/183/using-international-dates/#hh4)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T10:04:26.080

```
 <?php Yii::import('application.extensions.CJuiDateTimePicker.CJuiDateTimePicker');
  $this->widget('CJuiDateTimePicker',array(
    'model'=>$model, //Model object
    'attribute'=>'start_date', //attribute name

    'mode'=>'datetime', //use "time","date" or "datetime" (default) <---- use this option to show date, time or datetime

    'language'=>'en_us',
    'options'=>array(
        'regional'=>'en_us',
        'timeFormat'=>'hh:mm:ss',
        'minDate'=>'new Date()',
        'onSelect'=>'js:function(dateText, inst){

             enableEndDate(dateText);
                    }'
    ) // jquery plugin options
));
?> 
```

# virtuemart - 如何在单击某个按钮时将产品从外部页面添加到美德玛特

> ID：16034033
> 
> 赞同：0
> 
> 时间：2013-04-16T09:58:13.663
> 
> 标签：virtuemart

我正在尝试将产品直接添加到来自外部页面的购物车中。我有一个外部页面，我有一个按钮。

当我们单击该按钮时，产品详细信息应该会进入 drugmart 中的购物车，并且它不应该影响 drugmart 添加到购物车的功能。

我应该怎么做才能使它成为可能。如果你知道答案帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T06:04:29.757

好问题，我已经在我的一个自定义组件页面中实现了这个概念。您可以在任何地方使用它，只需提供产品 ID 和数量。以下是您必须在页面上实现的代码：

**不要忘记更改以下 div 中的变量：**

**数量 = "1"**将 1 替换为您的数量

**"$res->virtuemart_product_id"**将其替换为您的产品 ID

**将以下 div 放在您的页面中：**

```
<div class="addtocart-bar">
  <span class="addtocart-button" style="float:right !important;"> 
    <input type="submit" url='<?php echo JRoute::_("index.php?option=com_virtuemart&nosef=1&view=cart&task=addJS&format=json&lang=en&quantity=1&quantity%5B%5D=1&view=cart&virtuemart_product_id%5B%5D=$res->virtuemart_product_id&option=com_virtuemart"); ?>' title="Add to Cart" value="Add to Cart" id="btn_addtocart" class="bttn right" name="addtocart">
  </span>
<div class="clear"></div>
</div> 
```

**在页面顶部，您必须添加以下代码：**

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script>
jQuery(document).ready(function(){

    jQuery("[name=addtocart]").click(function(e){

        e.preventDefault();

        var url = $(this).attr('url');

            jQuery.ajax({
                type:"POST",
                url: url,
                async:false,
                data:{'p_id' : 1 },
                success: function(html){
                    var msg ="<div id='fancybox-content'><div style='width:auto;height:auto;overflow: auto;position:relative;'><div class='popUp_Box'><p>This item has been added to your shopping cart.</p><a class='continue bttn rmv_brdr btn_fix' href='index.php?option=com_virtuemart&view=categories&virtuemart_category_id=0'>Keep Shopping</a><?php if($user->id){ ?><a href='index.php?option=com_virtuemart&view=cart' class='showcart floatright bttn btn_fix'>Check Out</a><?php }else{ ?><a href='index.php?option=com_users&view=login&checkout=1' class='showcart floatright bttn btn_fix'>Check Out</a><?php } ?></div></div></div><a id='fancybox-close' style='display: block;'></a>";

                    jQuery.fancybox({
                                "titlePosition" :   "inside",
                                "transitionIn"  :   "elastic",
                                "transitionOut" :   "elastic",
                                "type"          :   "html",
                                "autoCenter"    :   true,
                                "closeBtn"      :   true,
                                "closeClick"    :   false,
                                "content"       :   msg
                            }
                        );

                }
            });
    });

    });
</script> 
```

如果您在根文件夹中保存了 fancybox 插件，上述脚本将起作用，为此请从“ [http://fancyapps.com/fancybox/#license](http://fancyapps.com/fancybox/#license) ”下载 fancybox 插件。我使用了fancybox，因为当订单添加到购物车时，您的订单确认将出现在fancybox 中，看起来很棒。我还附上了一张图片，以显示您必须在哪里添加 fancybox 插件文件夹。我希望这会对你有很大帮助。

![将fancybox插件文件夹放在这个位置。](https://i.stack.imgur.com/xsB3h.png)

问候

莫希特:)

# java - Android - 无论设备时间和位置如何，都可以获取欧洲/柏林当前时间？

> ID：16034034
> 
> 赞同：-5
> 
> 时间：2013-04-16T09:58:16.147
> 
> 标签：java, android

这是我的代码。我正在为德国电视频道开发电视指南应用程序，因此无论设备时间和位置如何，我都需要在德国拥有当前时间

```
Calendar buttoncal = Calendar.getInstance(TimeZone.getTimeZone("Europe/Berlin"));
String tdate = new SimpleDateFormat("dd.MM",Locale.GERMANY).format(buttoncal.getTime());
String tday  = new SimpleDateFormat("EEEE",Locale.GERMANY).format(buttoncal.getTime());

one_date.setText(tdate.toString());
one_day.setText(tday); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:46:07.403

每当人们推荐`Calender`在 Android 上使用时，我都会从我小小的藏身之处爬出来，告诉他们请考虑使用[android.text.format.Time](http://developer.android.com/reference/android/text/format/Time.html)，因为它非常适合日常使用。更轻巧，更符合实际需求。

```
Time deTime = new Time("Europe/Berlin");
deTime.setToNow();
deTime.format("..."); 
```

有关格式，请参见[http://linux.die.net/man/3/strftime](http://linux.die.net/man/3/strftime)。如果我是作者，我不会使用固定的德国本地格式，而是善待所有对德国电视感兴趣的外国人并尊重设备的语言环境，如下所示：

```
deTime.format("%c"); 
```

# html - 时事通讯首选项 - 添加到数据库

> ID：16034035
> 
> 赞同：0
> 
> 时间：2013-04-16T09:58:16.757
> 
> 标签：html, database, forms, post, newsletter

我想添加一个提交或保存按钮，将客户答案添加到数据库表“时事通讯”。有人知道该怎么做吗？客户将已经登录以获取其他详细信息以添加到表中，我可能能够自己弄清楚。

```
<div id="newsletter-settings">
                                <h3 style="margin-left:0; padding:0; font-size:14px; background:none; margin:0;">Your Newsletter Settings</h3>
                                <p>You can edit your newsletter preferences by checking the boxes below to suit your requirements.</p>

                                <form method="post">
                                    <label for="recieve-newsletter">Do you wish to receive the Make A Will Now email newsletter?</label>
                                    <input type="radio" name="recieve-newsletter" value="Yes" /><span>Yes</span>
                                    <input type="radio" name="recieve-newsletter" value="No" style="margin-left:20px;" /><span>No, not at the moment</span>

                                    <label for="newsletter-partners" style="margin-top:20px;">Do you wish to receive emails from carefully selected partners?</label>
                                    <input type="radio" name="newsletter-partners" value="Yes" /><span>Yes</span>
                                    <input type="radio" name="newsletter-partners" value="No" style="margin-left:20px;" /><span>No, not at the moment</span>
                                </form>
                            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:21:37.583

那么您可以使用 jquery 获取选中按钮的值：

```
var val = $('input:radio[name=recieve-newsletter]:checked').val(); 
```

然后你可以对你的提交按钮说在你的数据库中插入答案，函数如下：

```
function insert(){ mysql_query("insert into newsletter (answer) values ('$val')");} 
```

现在按钮是这样的

```
<input type="submit" OnClick="insert();" value="submit your answer"> 
```

# javascript - 如何使用javascript获取元素索引

> ID：16034040
> 
> 赞同：5
> 
> 时间：2013-04-16T09:58:27.337
> 
> 标签：javascript, jquery

我体内有一些元素。我想知道他们的索引，比如 div 索引应该是 1 并且跨度它的索引应该是 2。如何开始查找

```
$(function(){
var id= document.getElementsByTagName('*');
for(i=0; i<id.length;i++){
alert(id[i])
}})

<body>
<div></div>
<span></span>
<p></p>
<strong></strong>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:02:32.650

您可以使用以下代码在 jQuery 中非常轻松地执行此操作（我可以看到您正在使用它）：

```
$(function(){
   $.each($('body *'), function(i, v) { // All elements within the <body> tag
      var index = (i + 1); // zero-based index, so plus 1.
      console.log(index);
   });
}) 
```

这里的 jsFiddle 示例：http: [//jsfiddle.net/u7kWF/](http://jsfiddle.net/u7kWF/)

纯JS示例：

```
var id = document.body.getElementsByTagName('*'); // Get all tags within <body>
for(i=0; i<id.length;i++){
     console.log(id[i]); // The tag - <div>, <span>, <p>, <strong>
     console.log(i + 1); // The index - 1,2,3,4
} 
```

jsfiddle：http: [//jsfiddle.net/u7kWF/1/](http://jsfiddle.net/u7kWF/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:16:07.887

试试下面的方法，它会帮助你...

**小提琴：http:** [//jsfiddle.net/RYh7U/136/](http://jsfiddle.net/RYh7U/136/)

**HTML：**

```
<body>
<div></div>
<span></span>
<p></p>
<strong></strong>
</body> 
```

**Javascript：**

```
$(function(){
var id= document.body.getElementsByTagName("*");;
for(i=0; i<id.length;i++){
    alert(" Tagname : " + id[i].tagName + "  Index : " + i)
}}) 
```

# php - 从不同的地方向函数发送参数？

> ID：16034041
> 
> 赞同：0
> 
> 时间：2013-04-16T09:58:27.783
> 
> 标签：php, pdo

我有一个获取 som 用户值的函数。用户名和电子邮件。

现在我希望这些值在两个表单字段中回显。

这是可能的还是我需要两个不同的功能？

我在想这样的事情

```
 function fetch_user_value($username,$email){
        global $db;
        $query = $db->query("SELECT `username`,`email` FROM `user` WHERE id = {$_SESSION['uid']} ");
        $row = $query->fetch(PDO::FETCH_ASSOC);
        echo $row['username'];
        echo $row['email'];
        } 

    <input type='text' name='username' id='username' value="<?php echo fetch_user_value('username'); ?>" />

<input type='text' name='email' id='email'  value="<?php echo fetch_user_value('email'); ?>" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:05:04.360

试试这个：

//删除了您传递的参数，因为您仅基于 sessionid 获取值

```
function fetch_user_value(){
  global $db;
  $query = $db->query("SELECT `username`,`email` FROM `user` WHERE id = {$_SESSION['uid']} ");
  $row = $query->fetch(PDO::FETCH_ASSOC);
  return $row;
} 
```

// 与其调用两次，不如只调用一次

```
$userD = fetch_user_value();

<input type='text' name='username' id='username' value="<?php echo $userD['username']; ?>" />
<input type='text' name='email' id='email'  value="<?php echo $userD['email']; ?>" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:20:55.643

虽然 user868766 的回答是正确的，但考虑让这样的功能更有用。一个通用的，从任意查询中返回所需的结果：

```
$user = $db->getRow("SELECT username,email FROM user WHERE id =?i",$_SESSION['uid']); 
```

有了好的抽象库，你就不需要为这种情况指定函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:04:23.483

只需使用一个功能，这样：

```
 function fetch_user_value($field){
     global $db;
     $query = $db->query("SELECT ".$field." FROM `user` WHERE id = {$_SESSION['uid']} ");
     $row = $query->fetch(PDO::FETCH_ASSOC);
     echo $row[$field];
    } 
```

# sql - 在特定字符上拆分表列

> ID：16034043
> 
> 赞同：0
> 
> 时间：2013-04-16T09:58:35.240
> 
> 标签：sql, tsql, sql-server-2008-r2

我想在特定字符上拆分一个值，下面是我的示例。

```
DECLARE @HCode varchar(20);
SET @HCode = '10-101-200-12'; 
```

我想分裂`@HCode`并想得到`12`任何帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:09:06.767

尝试这个：

```
SELECT REVERSE(SUBSTRING(REVERSE(@HCode), 
               1, 
               CHARINDEX('-', REVERSE(@HCode)) - 1)); 
```

在这里查看它的实际效果：

*   [**SQL 小提琴演示**](http://www.sqlfiddle.com/#!3/7b6e8/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:09:34.283

请试试：

```
select REVERSE(SUBSTRING(REVERSE(@HCode), 0, PATINDEX('%[-]%', REVERSE(@HCode)))) 
```

或者

```
select REVERSE(LEFT(REVERSE(@HCode), CHARINDEX('-', REVERSE(@HCode))-1)) 
```

# tfs - 使用不同工作方法的团队的 TFS 项目布局

> ID：16034050
> 
> 赞同：0
> 
> 时间：2013-04-16T09:59:00.717
> 
> 标签：tfs

我们想设置 TFS2012 来处理每个项目问题的多种工作方法。确实看到了[相关](https://stackoverflow.com/questions/6866843/tfs-2010-team-projects) [主题](https://stackoverflow.com/questions/3134452/tfs-project-collection-layout-suggestions-and-good-practices-for-multiple-team)，但我认为我们的情况不同。

我们有几个产品，有一个或多个团队在开发它们。团队可以看到产品的 backlog，但他们可能使用不同的工作方法——一个项目可以有一个 scrum 和一个看板团队。在某些情况下，看板团队会发布由 Scrum 团队完成的用户故事的工作。

我们应该如何开始设置 TFS 以在项目中拥有不同的工作方法（模板）？我们应该使用一个项目集合吗？是否有可以同时处理 scrum 和看板工作的模板 我们可以修改工作流并将其映射到两个不同的板上吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:45:43.647

每个团队项目都基于一个流程模板。在这种情况下，您可以选择[Scrum](http://msdn.microsoft.com/en-us/library/vstudio/ff731587.aspx)或[看板](http://msdn.microsoft.com/en-us/library/vstudio/jj838789.aspx)模板，并对其[进行自定义](http://msdn.microsoft.com/en-us/library/vstudio/dd286521.aspx)。

似乎[Scrumban](http://en.wikipedia.org/wiki/Scrum_%28development%29#Scrum-ban)流程适合您的项目，但是 TFS 尚有可用的流程模板。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-05-17T21:11:18.423

我同意，Scrum 和看板都可以做到（也可以一起工作！）。它确实定义了您的工作流程的参数，这将有所作为。如果可以的话，变量是什么。至于泳道，我们在 Zenkit 每天都在处理它，我们实际上写了一篇关于它的文章，如果您有兴趣并且我们很乐意收到您的反馈： [https ://blog.zenkit.com/dive-into-better-task -管理与看板-泳道-8a190a65471a](https://blog.zenkit.com/dive-into-better-task-management-with-kanban-swimlanes-8a190a65471a)

# actionscript-3 - 包含/导入单独的 AS3 文件

> ID：16034051
> 
> 赞同：0
> 
> 时间：2013-04-16T09:59:01.987
> 
> 标签：actionscript-3, import, include, string-literals, braces

我试图在我的 Flash 应用程序中包含一个 .as 文件。我确信这并不难，我只是遇到了一些小错误，但我总是在代码的顶部放置：

```
include {"Le Bot src/Skill.as";} 
```

或者

```
import {"Le Bot src/Skill.as";} 
```

尝试包含一个单独的 .as 文件。但是，当我使用`include`它时出现错误：在左大括号之前期望字符串文字，当我使用“导入”时出现错误：

```
expecting identifier before left brace 
expecting semicolon before left brace 
```

我只是AS3的初学者，有什么办法可以解决这个问题吗？顺便说一句，如果我删除两边的两个大括号，那么它会出现另一个错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:34:40.507

```
import locationOfASFile.Skill; 
```

例如，如果您的 Skill.as 文件位于名为“LeBotsrc”的目录中，该目录位于名为“com”的目录中

```
import com.LeBotsrc.Skill; 
```

您的 as 包也需要反映它的位置。所以在 Skill.as 你会

```
package com.LeBotsrc { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T18:31:25.113

include 指令在 AS3 中使用不多，因为使用包和类来组织代码很容易。但是，inlcude 有一个奇怪的地方。**没有结束分号。** 尝试这个：

```
include "Le Bot src/Skill.as" 
```

所以总结一下：include 和 import 是不一样的。include 不使用花括号。include 不能在行尾有分号。inlcude 必须在一行中，格式如下：

```
include "pathto/myfile.as" 
```

使用 include 会将指定文件中的 actionscript 添加到使用 include 的时间线中。您还可以通过设置扩展主时间线的文档类或库中的符号来完成同样的事情。这样做会增加使用类的复杂性，但类包含了足够的功能和灵活性来弥补它们额外的复杂性。

例如，使用包含，您不能将函数或变量指定为公共或私有。他们都是公开的。使用类可以更轻松地使您的代码面向对象，这是使您的项目对程序员更友好的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:37:38.170

这`Le Bot src\Skills.as`应该首先可以通过`package\name\class.as`项目文件夹中的正确相对路径 () 访问，然后您可以`import package.name.class`在此处放置您的值而不是占位符。说，你调查一下，`Skill.as`发现：

```
package foo.bar {
    import baz.*
    ...
    public class Skill { 
```

这意味着 AS 文件应位于文件夹应位于 FLA`foo\bar\Skill.as`所在文件夹中的位置。`foo`在 FlashDevelop 的情况下，它应该在文件的`src`foder 中`*.as3proj`。把它放在那里，然后添加：

```
import foo.bar.Skill; 
```

到您想从中引用此类的任何文件或时间线。

# html - ARIA 验证错误：属性角色的值滑块错误

> ID：16034052
> 
> 赞同：2
> 
> 时间：2013-04-16T09:59:02.290
> 
> 标签：html, accessibility, validation, wai-aria

我正在尝试针对 W3C 验证器验证包含以下内容的页面：

```
<button role="slider"></button> 
```

验证器告诉我：

> 元素按钮上属性角色的错误值滑块

知道为什么吗？我在 ARIA 规范中找不到任何解释。我[在这篇博](http://www.paciellogroup.com/blog/2009/01/how-can-i-validate-xhtml-aria/)文中看到`landmark`验证器不支持角色，但滑块是一个`widget`角色。此外，[同一博客中的另一篇文章](http://blog.paciellogroup.com/2008/05/aria-slider-part-1/)使用上面的代码作为示例......

只需将上面的代码提供给验证器就可以重现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T12:38:56.757

[该`button`元素](http://www.w3.org/TR/html5/dom.html#sec-implicit-aria-semantics)*在 HTML5 中具有[*隐式 ARIA 语义。*](http://www.w3.org/TR/html5/dom.html#sec-implicit-aria-semantics)角色必须是`button`、`link`、`menuitem`、`menuitemcheckbox`或。`menuitemradio``radio`*

# php - 从实体访问服务

> ID：16034053
> 
> 赞同：0
> 
> 时间：2013-04-16T09:59:06.133
> 
> 标签：php, symfony, symfony-2.1

我将以下代码放入实体类中：

```
$filesystem = $this->container->get('knp_gaufrette.filesystem_map')->get('amazon');
$filesystem->write($this->file , $this->name, true); 
```

但是，这总是会产生以下错误：

```
Notice: Undefined property: MySite\UserBundle\Entity\ProfilePicture::$container in /Users/Mike/Sites/MySite/src/MySite/MainBundle/Entity/Document.php line 98 
```

知道为什么会这样吗？如何从实体访问服务容器？

我把它放在一个抽象类中：

```
abstract class Document
{

......
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:03:43.813

Entities are data models and should contain only data.

Instead, create a listener or manager service with dependency injection.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T17:40:09.433

在遗留环境中，我创建了一个原则事件监听器，它自动将容器注入到实现 ContainerAwareInterface 的实体中。有了它，我可以用最少的努力与一些“遗留实体”合作。

这就像[Symfony ControllerResolver](https://github.com/symfony/symfony/blob/master/src/Symfony/Bundle/FrameworkBundle/Controller/ControllerResolver.php)如何将容器注入控制器但用于实体一样。

```
<?php

namespace Acme\DemoBundle\Doctrine;

use Doctrine\ORM\Event\LifecycleEventArgs;
use JMS\DiExtraBundle\Annotation as DI;
use Symfony\Component\DependencyInjection\ContainerAware;
use Symfony\Component\DependencyInjection\ContainerAwareInterface;
use Symfony\Component\DependencyInjection\ContainerInterface;

/**
 * adds some nice features to more easy entity utilization
 *
 * @DI\Service
 * @DI\Tag("doctrine.event_listener", attributes = {"event" = "postLoad"})
 */
class ContainerAwareListener extends ContainerAware
{

    /**
     * @DI\InjectParams({
     *     "container" = @DI\Inject("service_container"),
     * })
     */
    public function __construct(ContainerInterface $container = null){
        $this->setContainer($container);
    }

    /**
     * After object is loaded, listener inject the container
     *
     * @param LifecycleEventArgs $args
     */
    public function postLoad(LifecycleEventArgs $args)
    {
        $entity = $args->getEntity();
        if($entity instanceof ContainerAwareInterface){
            $entity->setContainer($this->container);
        }
    }
} 
```

实体需要实现containeraware接口，需要的服务可以在 setContainer() 方法中获取，服务是用[JMSDIExtrabundle](http://jmsyst.com/bundles/JMSDiExtraBundle)定义的，但可以在 services.yml 下定义。

许多人认为这是一种不好的做法，因为实体必须尽可能少地依赖所有人。但作为一个极值比率（或在极端期限下:-)），这很棒。

# atg - 如何使用dsp标签库在ATG中形成“小于等于”语句？

> ID：16034058
> 
> 赞同：0
> 
> 时间：2013-04-16T09:59:16.857
> 
> 标签：atg

我目前正在为 ATG 中的蜂窝网络开发电子商务网站。我正在尝试应用“过滤器”根据手机的显示尺寸来限制手机，分为三个类别

1.  4 英寸及以下
2.  4 - 5 英寸
3.  5 英寸或更多。

目前我只能传递一个值，比如 4 英寸，并获得 4 英寸类别中的所有手机。

- - - - 代码 - - - - -

```
<LI id=menu-item-458
                                                       class="menu-item menu-item-type-custom menu-item-object-custom menu-item-458">
                                                       <dsp:droplet name="/store/commerce/droplets/FilterDroplet" >
                                                       <dsp:param name="filterBy" value="displayScreenDetails"/>
                                                       <dsp:param name="filterConstant" value="4"/>
                                                       <dsp:oparam name="output">
                                                       <p id="4" class="selected">
<A href="#"onclick="filterItems('displayScreenDetails','4')">* 4-inches(<dsp:valueof param="count"/>)</A></p>`
                                                        </dsp:oparam>
                                                        </dsp:droplet>
                                                    </LI> 
```

* * *

它`<LI>`用于显示菜单并将值传递给名为 filerItems() 的脚本函数

我想在各自的类别下显示所有手机，而不是确定的数字。帮助我用 dsp 标记库或 java 方法形成代码来处理传递的值。我希望我的问题很清楚。谢谢。！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:32:17.880

您将需要向您添加另一个请求参数，`FilterDroplet`该参数将采用一个运算符（如“equals”或“lessThan”），然后在`service`方法内部调用一个采用 3 个参数的新方法。假设您当前有一个小方法，该方法将采用 2 个参数（用于“filterBy”和“filterConstant”）。

您的输出似乎也有点受限，因为它假设您只会得到 1 个结果。输出参数上没有运行循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-01T20:02:59.680

有简单的方法和很长的方法可以做到这一点。但我会推荐从长远来看会有所帮助的漫长道路。由于您正在使用过滤器，因此使用 SKU 属性对它们进行分类很重要。希望屏幕大小来自 BCC（意思是 DB），尝试为您的 SKU 对象创建一个字段以在初始化期间计算类别。

SKU 将已经具有您的屏幕尺寸属性，并且在您的非存储库 SKU 对象中创建过滤器字段应该不够难。在页面加载时，传递页面上显示的所有 SKU 并获取过滤器详细信息，以便以后添加另一个过滤器项时会有所帮助。

我觉得它需要一种更通用的方法，即创建一个自定义过滤器映射，它可用于填充任何属性。

# django - 在 Django 视图中获取 Google App Engine blob 信息

> ID：16034059
> 
> 赞同：1
> 
> 时间：2013-04-16T09:59:20.137
> 
> 标签：django, google-app-engine, file-upload

这是 Google App Engine 上 Django 的后续问题[：无法上传图片](https://stackoverflow.com/questions/16014147/django-on-google-app-engine-cannot-upload-images)

我得到了将图像上传到 GAE Blobstore 的部分工作。这是我所做的：

在`models.py`我创建了一个模型`PhotoFeature`：

```
class PhotoFeature(models.Model):
    property = models.ForeignKey(
        Property,
        related_name = "photo_features"
    )
    caption = models.CharField(
        max_length = 100
    )
    blob_key = models.CharField(
        max_length = 100
    ) 
```

在`admin.py`我创建了一个管理条目，其中覆盖了 change_form 的呈现，以允许向 Blobstore 上传 url 插入正确的操作：

```
class PhotoFeatureAdmin(admin.ModelAdmin):
    list_display = ("property", "caption")
    form = PhotoFeatureForm

    def render_change_form(self, request, context, *args, **kwargs):
        from google.appengine.ext import blobstore
        if kwargs.has_key("add"):
            context['blobstore_url'] = blobstore.create_upload_url('/admin/add-photo-feature')
        else:
            context['blobstore_url'] = blobstore.create_upload_url('/admin/update-photo-feature')
        return super(PhotoFeatureAdmin, self).render_change_form(request, context, args, kwargs) 
```

当我使用标准 Django 时，我想在 GAE 更新 BlobStore 而不是`BlobstoreUploadHandler`. 我创建了以下视图（根据 render_change_form 方法）并更新了`urls.py`：

```
def add_photo_feature(request):

def update_photo_feature(request): 
```

这一切都很好，但是一旦我进入视图方法，我就有点迷失了。如何从请求对象中获取 Blob 键，以便将其与 PhotoFeature 一起存储？我使用标准 Django，而不是 Django non-rel。我发现[了这个](https://stackoverflow.com/questions/9240080/use-django-views-for-handling-blobstore-uploads)相关的问题，但它似乎不包含解决方案。我还检查了`request`传递到视图中的对象，但找不到与 blob 键相关的任何内容。

**编辑：**

Django 请求对象包含一个 FILES 字典，它将给我一个`InMemoryUploadedFile`. 我想我应该能够以某种方式从中检索 blob 密钥......

**编辑2：**

需要说明的是：上传的照片出现在 Blobstore 中；那部分有效。它只是从这里丢失的 Blobstore 取回密钥。

**编辑 3：**

根据 Daniel 的建议，我从[djangoappengine](https://github.com/django-nonrel/djangoappengine/blob/appengine-1.4/djangoappengine/storage.py)项目中添加了 storage.py，该项目包含建议的上传处理程序，并将其添加到我的 SETTINGS.PY 中。这会在尝试上传时导致以下异常：

```
'BlobstoreFileUploadHandler' object has no attribute 'content_type_extra' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:19:55.957

这真的很难解决。我发现的最佳解决方案是使用[djangoappengine](https://github.com/django-nonrel/djangoappengine)项目中的文件上传处理程序（与 django-nonrel 相关联，但不依赖于它）。`request.FILES`正如您在 Django 中所期望的那样，这应该处理将 blob 键放入 所需的逻辑。

**编辑**

我忘记了 django-nonrel 使用了 Django 的补丁版本，其中一个补丁在这里添加了 content-type-extra 字段。您可以通过子类化上传处理程序来复制功能，如下所示：

```
from djangoappengine import storage
class BlobstoreFileUploadHandler(storage.BlobstoreFileUploadHandler):
    """Handler that adds blob key info to the file object."""

    def new_file(self, field_name, *args, **kwargs):
      # We need to re-process the POST data to get the blobkey info.
      meta = self.request.META
      meta['wsgi.input'].seek(0)
      fields = cgi.FieldStorage(meta['wsgi.input'], environ=meta)
      if field_name in fields:
          current_field = fields[field_name]
          self.content_type_extra = current_field.type_options
      super(BlobstoreFileUploadHandler, self).new_file(field_name,
                                                       *args, **kwargs) 
```

并在你的 settings.py 中引用这个子类，而不是原来的。

# python - python3 datetime.datetime.strftime 无法接受 utf-8 字符串格式

> ID：16034060
> 
> 赞同：6
> 
> 时间：2013-04-16T09:59:26.807
> 
> 标签：python, unicode, python-3.x

python3`datetime.datetime.strftime`无法接受 utf-8 字符串格式

我所做的是::

```
# encoding: utf-8
import datetime

f = "%Y年%m月%d日"
now = datetime.datetime.now()
print( now.strftime(f) ) 
```

我得到的是：

```
D:\pytools>python a.py
Traceback (most recent call last):
  File "a.py", line 6, in <module>
    print( now.strftime(f) )
UnicodeEncodeError: 'locale' codec can't encode character '\u5e74' in position 2
: Illegal byte sequence 
```

为什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-16T10:49:17.847

~~问题不在`datetime`，在`print`。请参阅[打印失败](http://wiki.python.org/moin/PrintFails)~~

啊，不完全是——尽管它有相同的原因，而且你可能会遇到将 Unicode 写入标准输出的问题。（使用带有 Python shell 的 IDE，例如最新的 IDLE，可以避免这种情况。）

最终调用的`strftime()`函数是`datetime.strftime()`C 标准库的一部分，在 Windows/MSVCRT 下无法处理 Unicode 字符串。（虽然理论上您可以通过将代码页设置为 65001 并使用 UTF-8 来解决它，但该代码页的 C 运行时中存在严重的长期存在的错误。）

Python 中的解决方法可能是在调用之后替换掉非 ASCII 字符：

```
strftime('%Y{0}%m{1}%d{2}').format(*'年月日') 
```

或者避开`strftime`并自己做。

通过这两种方式中的任何一种，这可能应该被认为是一个错误`time.strftime()`并在那里修复。添加一个 Python 原生实现是有意义的——由于该函数中存在其他平台错误，`strftime`他们已经不得不这样做。`strptime`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-04-12T08:15:21.523

```
>>> now.strftime('%Y年%m月%d日 %H时%M分%S秒'.encode('unicode- 
 escape').decode()).encode().decode("unicode-escape")

'2018年04月12日 15时55分32秒' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T12:17:24.780

我的工作

```
# -*- coding: utf-8 -*-
import datetime

now = datetime.datetime.now()
print( now )

import re

def strftime(datetimeobject, formatstring):
    formatstring = formatstring.replace("%%", "guest_u_never_use_20130416")
    ps = list(set(re.findall("(%.)", formatstring)))
    format2 = "|".join(ps)
    vs = datetimeobject.strftime(format2).split("|")
    for p, v in zip(ps, vs):
        formatstring = formatstring.replace(p, v)
    return formatstring.replace("guest_u_never_use_20130416", "%")

r = strftime(now, "%%%Y年%m月%d日 %%")
print(r) 
```

结果是

```
D:\Projects\pytools>python a.py
2013-04-16 20:14:22.518358
%2013年04月16日 % 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-01T08:07:21.953

我的windows10也有同样的问题，解决方法：

```
import locale
locale.setlocale(locale.LC_CTYPE, 'chinese')
print(datetime.now().strftime('%Y年%m月%d日 %H时%M分%S秒')) 
```

结果：2017年04月01日15时56分34秒</p>

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-08T08:09:15.743

它对我有用，见下文：

```
import datetime
from contextlib import contextmanager
import locale

@contextmanager
def locale_block(local_name: str, lc_var=locale.LC_ALL):
    org_local = locale.getlocale()
    try:
        yield locale.setlocale(lc_var, local_name)
    finally:
        locale.setlocale(lc_var, org_local)

with locale_block('zh'):
    print(datetime.datetime.now().strftime('%Y年%m月%d日')) 
```

`with`离开语句后，它将恢复语言环境的值。

# c - 异步 udp 服务器客户端应用程序

> ID：16034064
> 
> 赞同：0
> 
> 时间：2013-04-16T09:59:42.230
> 
> 标签：c, sockets, udp

我正在尝试制作一个异步 UDP 聊天应用程序，目前只有一个客户端和服务器。

当我运行我的服务器时，会显示很多冗余数据。之后，当输入一些文本时，

> 发送文件时出错！

被展示。

有人可以看看代码，让我知道我哪里出错了吗？

服务器：
u_long iMode=1；ioctlsocket(sd,FIONBIO,&iMode); 诠释n=sd+1；

```
fd_set readfds,writefds;
while(1)
{
    FD_ZERO(&readfds);
    FD_ZERO(&writefds);
    FD_SET(sd,&readfds);
    FD_SET(sd,&writefds);

    int rv = select(n, &readfds, &writefds, NULL, NULL);
    if(rv==-1)
    {
        printf("Error in Select!!!\n");
        exit(0);
    }
    if(rv==0)
    {
        printf("Timeout occurred\n");
    }
    if (FD_ISSET(sd, &readfds))
    {
        FD_CLR(sd,&readfds);
        int client_length = (int)sizeof(struct sockaddr_in);
        memset(&buffer,0,sizeof(buffer));
        int bytes_received = recvfrom(sd, buffer,SIZE, 0, (struct sockaddr *)&client, &client_length);
        if (bytes_received < 0)
        {
            fprintf(stderr, "Could not receive datagram.\n");
            closesocket(sd);
            WSACleanup();
            exit(0);
        }
    }

    printf("\nClient says: %s",buffer);
    printf("\nWrite :");

    fgets(buffer,SIZE,stdin);
    if(FD_ISSET(sd,&writefds))
    {
        FD_CLR(sd,&writefds);
        int client_length = (int)sizeof(struct sockaddr_in);
        if(sendto(sd, buffer,strlen(buffer), 0, (struct sockaddr *) &client,client_length)<0)
        {
            printf("Error sending the file! \n");
            exit(1);
        }
    }
}
closesocket(sd);
WSACleanup();

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:14:21.820

我看到一个问题。这一行：

```
int rv = select(n, &readfds, &writefds, NULL, NULL); 
```

几乎总是会在 readfds 为空的情况下立即返回。但是 writefds 几乎**总是**用“sd”套接字设置，表明它已准备好写入/发送。

因此，您的代码正确地跳过了调用 recvfrom() 的尝试，但没有什么能阻止它落入发送代码路径。所有变量，如 client、client_length 和 buffer，在那时可能都未初始化。或者更糟的是，缓冲区和客户端正是循环中最后一次成功调用时的样子。这可能解释了冗余数据。

我的建议是根本不要在 select 调用中设置“writefds”。然后仅在您实际阅读时“发送”。无论如何， sendto 调用都不会阻塞很长时间。

# android - 每次在 AlertDialog 包中获取更新的值

> ID：16034065
> 
> 赞同：0
> 
> 时间：2013-04-16T09:59:42.900
> 
> 标签：android, bundle, android-alertdialog

我想将数据从一个对话框传递到另一个对话框。我有一个 onCreateContextMenu 对话框来显示列表视图上的选项

**代码：**

```
 @Override
public boolean onContextItemSelected(MenuItem item) {
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item
            .getMenuInfo();

    switch (item.getItemId()) {

    case R.id.update_item:

        Object o1 = lv1.getItemAtPosition(info.position);
        ItemDetails obj_itemDetails1 = (ItemDetails) o1;
        /*Toast.makeText(getApplicationContext(),
                "You have chosen : " + " " + obj_itemDetails1.getId(),
                Toast.LENGTH_LONG).show();  */
        Bundle arg= new Bundle();
        arg.putString("key", obj_itemDetails1.getId());
        showDialog(DIALOG_ID, arg);
        return true;

    }
    return false;
} 
```

我正在使用 Bundle 将此对话框中的数据发送到警报对话框。

**代码：**

```
 protected final Dialog onCreateDialog(final int id, Bundle arg) {
    Dialog dialog = null;
    switch (id) {
    case DIALOG_ID:
        AlertDialog.Builder builder = new AlertDialog.Builder(this);

        LayoutInflater inflater = this.getLayoutInflater();
              arg.getString("key");// getting same value here

        builder.setMessage(arg.getString("key"));
        builder.setPositiveButton("Cancel", new DialogInterface.OnClickListener() {
               @Override
               public void onClick(DialogInterface dialog, int id) {
                   dialog.cancel();
               }
           });
        builder.setNegativeButton("Update", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {

               }
           });    

        AlertDialog alert = builder.create();
        alert.setTitle("Update Info");
        dialog = alert;
        break;

    default:

    }
    return dialog;
}

 } 
```

从

```
Bundle arg= new Bundle();
            arg.putString("key", obj_itemDetails1.getId());
            showDialog(DIALOG_ID, arg); 
```

我每次都根据所选位置发送新数据

但在`arg.getString("key");`警报对话框中，我每次都得到相同的数据。即使我单击了新位置，数据也不会更新。

我用过`arg.remove("key");`，`arg.clear();`但他们没有工作。

我怎样才能做到这一点。或任何其他在 AlertDialog 中传递数据的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:03:44.073

You should not use the `showDialog` method as it's deprecated, also if you check the javadoc you'll see:

> A call to onCreateDialog(int, Bundle) will be made with the same id the **first time this is called for a given id**.

So you can't update that value like that.

--

Using DialogFragment you could just search the Dialog (or create it if it doesn't exists) and pass the new parameter through a method:

```
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
YourDialog d = YourDialog.newInstance(...);
d.show(ft, YourDialog.class.getSimpleName()); 
```

then search for it:

```
YourDialog d = (YourDialog) getSupportFragmentManager().findFragmentByTag(YourDialog.class.getSimpleName())
if (d == null) {
    //create a new dialog like before
}

d.setValue(yourValue) 
```

# php - 使用php限制相同IP的页面访问

> ID：16034072
> 
> 赞同：-2
> 
> 时间：2013-04-16T09:59:52.493
> 
> 标签：php

我有一个页面，我希望 1 个 IP 可以使用该页面，让我们说一天最多 10 次。1 次刷新 = 1 次使用。经过一些研究，我读到这可以使用 javascript 或 php 但使用 cookie 来完成。用户不能删除他的 cookie 并再次使用该页面吗？有没有办法只用php而不用cookies？有什么建议么？

注意：我没有使用任何数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:02:28.867

没有数据库就无法完成。您只需要跟踪所有 IP，而没有数据库就无法做到这一点。

当然，一个简单的文本文件也可以用于数据库。对于访问特定页面的每个访问者，将该 IP 地址记录到文本文件中。要查看他们是否可以访问该页面，只需计算 IP 地址在文件中的次数即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:02:00.427

您可以创建一个数据库表，然后在每个视图上插入 IP（如果它尚未在数据库中）或将视图增加 1。如果视图 = 10，则不允许用户访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:05:02.053

您也可以使用 htaccess 文件。但是您可以将 ipaddress/nrofrefreshes 记录写入位于服务器上的文本文件中。

# jquery - jQuery UI 让 jQuery 缓动变得多余

> ID：16034085
> 
> 赞同：1
> 
> 时间：2013-04-16T10:00:35.470
> 
> 标签：jquery, jquery-ui

这是一个非常基本的问题 - 但我无法找到答案。

我的项目中已经包含了完整的 jquery UI - 现在另一个脚本需要 jquery easing 插件。

我是否还需要包含它，还是因为 jQuery UI 而这是多余的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:01:56.643

jQuery UI 包含缓动效果，因此您不需要添加任何其他依赖项。见：http: [//jqueryui.com/effect/](http://jqueryui.com/effect/)

# jquery - Accordion 使用户单击面板保持打开状态

> ID：16034088
> 
> 赞同：0
> 
> 时间：2013-04-16T10:00:44.787
> 
> 标签：jquery

当我`jQuery`在菜单中使用手风琴时，如何在页面刷新时保持用户单击面板打开？当用户单击面板、发送请求并刷新页面时，手风琴总是关闭。

这是我的代码：

```
$(function(){
     var icons = {
        header: "ui-icon-triangle-1-e",
        activeHeader: "ui-icon-triangle-1-s"
         }

    $("#accordion").accordion({
        heightStyle:"content",
            header:".level21",
    event:"click",
    active:false,
    collapsible:true,
    icons:icons
    });  
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:23:44.160

您应该`Hidden Fields`在回发期间使用来保持手风琴状态。

我不知道您使用的是哪种技术，但对于 ASP.net

```
<asp:HiddenField ID="hidAccordionIndex" runat="server" Value="0" />

<script language="javascript" type="text/javascript">
    $(function(){
        var activeIndex = parseInt($('#<%=hidAccordionIndex.ClientID %>').val());

        $("#accordion").accordion({
            autoHeight:false,
            event:"mousedown",
            active:activeIndex,
            change:function(event, ui)
            {
                var index = $(this).children('h3').index(ui.newHeader);
                $('#<%=hidAccordionIndex.ClientID %>').val(index);
            }
        });
    });
</script> 
```

[您可以在此处](http://archive.plugins.jquery.com/project/Cookie)使用 JQuery cookies 插件，然后将其值设置如下

```
 change: function(event,ui) {
        var hid = ui.newHeader.children('a').attr('id');
    if (hid === undefined) {
        $.cookie('menustate', null);
    } else {
        $.cookie('menustate', hid, { expires: 2 });
    }
} 
```

有用的文章[在这里](http://www.mikecentola.com/blog/2009/05/31/saving-state-with-the-jquery-accordion-menu/)

# c# - 子查询中的 LINQ orderby

> ID：16034092
> 
> 赞同：4
> 
> 时间：2013-04-16T10:01:00.040
> 
> 标签：c#, linq, entity-framework

我想在 LINQ to EF 中做一个简单的子查询

我做了这样的事情：

```
from p in db.SomeTable
let o = db.SomeTableWithDate
            .OrderByDescending(t => t.Date)
            .FirstOrDefault(lt => lt.SomeValue == value)
select new {p, o} 
```

一切都编译并且 LINQ 没有抱怨，但结果是错误的。生成的 SQL 是一个 TOP 1 的 OUTER APPLY，但没有“ORDER BY”。

我也试过这个：

```
from p in db.SomeTable
select new {
    p, 
    o = db.SomeTableWithDate
            .OrderByDescending(t => t.Date)
            .FirstOrDefault(lt => lt.SomeValue == value)
} 
```

但我得到相同的结果。（我更喜欢“让”，因为这样我可以使用上一个“让”查询中的变量）

所以这是我的问题：我**怎样才能让 LINQ 用 orderby 做一个真正的子查询？**

我想从链接表中获取最新日期

**解决方案**

来自boran的答案解决了它。我只需要先做一个单独的地方。

```
from p in db.SomeTable
let o = db.SomeTableWithDate
            .Where(lt => lt.SomeValue == value)
            .OrderByDescending(t => t.Date)
            .FirstOrDefault()
select new {p, o} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:38:54.973

```
 from p in db.SomeTable
 let o = db.SomeTableWithDate.Where(lt => lt.SomeValue == value)
        .OrderByDescending(t => t.Date)
        .FirstOrDefault()
 select new {p, o} 
```

因为你是在过滤之后排序的，所以这个查询可能也会有更好的性能。

# datatable - primefaces DataTable draggableColumns

> ID：16034097
> 
> 赞同：0
> 
> 时间：2013-04-16T10:01:10.017
> 
> 标签：datatable

一旦您添加 draggableColumns="true" 过滤文本框就不能正常工作，并且调整大小也不能正常工作。

```
<p:dataTable id="dataTable" var="tbl"
    value="#{pc_searchJobBean.searchJobVO.jobVOs}"
    emptyMessage="#{commonMsg['noResultFound']}"
    paginatorPosition="bottom" paginator="true" rows="5"
    filteredValue="#{pc_searchJobBean.searchJobVO.filteredVos}"> 
```

我必须使用 draggableColumns 并过滤两者。这个问题有什么解决办法吗？

# scrapy - 使用 scrapy/xpath 提取货币值

> ID：16034102
> 
> 赞同：0
> 
> 时间：2013-04-16T10:01:29.353
> 
> 标签：scrapy

尝试使用scrapy.Code从一些html中获取货币值是

```
links = hxs.select('//a[@class="product-image"]/div[@class="price-box"]//span[@class="price"]/text()').extract()') 
```

和 HTML

```
<div>
  <span>
    <sub>
      <li class="item first">

        <a href="http://www.xtra-vision.ie/dvd-blu-ray/to-rent/new-release/dvd/pitch-perfect-dvd.html" title="Image for Pitch Perfect" class="product-image">

          <span class="exclusive-star">
          </span>

          <img src="http://www.xtra-vision.ie/media/catalog/product/cache/3/small_image/124x173/5b02ab93946615b958c913185aae2414/i/w/iws_5167c10c906b57.33524324.JPG.jpg"  alt="Image for Pitch Perfect" />

          <h2 class="product-name">Pitch Perfect</h2>

          <div class="price-box">

            <span class="regular-price" id="product-price-5174">

              <span class="price">
                €15                     
                <sub class="price-bit">.99</sub>
              </span>
            </span>
          </div>
        </a>
      </li>
    </sub>

  </span>

</div> 
```

我得到的结果价格是 \u20ac15\t\t\t\t\t\t 有什么方法可以使用 xpath 从这个 html 中提取 15.99

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:19:02.970

我使用了 xpath 和 Python 的组合，因此可能不是您所追求的，尽管这主要用于摆脱添加到“价格”末尾的无关选项卡。

```
price = hxs.select('//span[@class="price"]/text()').extract()
pricebit = hxs.select('//span[@class="price"]/sub[@class="price-bit"]/text()').extract()
totalprice = price + price-bit
totalstr = ''.join(totalprice).replace('\t','') 
```

# c# - 电子表格齿轮范围公式

> ID：16034103
> 
> 赞同：2
> 
> 时间：2013-04-16T10:01:30.300
> 
> 标签：c#, spreadsheetgear

我正在使用电子表格齿轮的公式属性，但计算未到来。

下面是我的代码

```
"SpreadsheetGear.IRange range = WorkBookViewForData.ActiveWorksheet.Cells["E19"];
 range.Font.Name = "MS Gothic";
 range.Formula = "=SUM(E3,E18)";
 range.NumberFormat = "$#,##0_);
($#,##0);@";" 
```

我的代码有什么问题吗？请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:04:52.387

**Try following:**

```
SpreadsheetGear.IRange range = worksheet.EvaluateRange(rangeFormula); 
```

**Refer:**

[http://www.spreadsheetgear.com/support/samples/srcview.aspx?file=spreadsheetgearimage.aspx](http://www.spreadsheetgear.com/support/samples/srcview.aspx?file=spreadsheetgearimage.aspx)

Here is another range formula with c# code:

[http://www.spreadsheetgear.com/support/help/spreadsheetgear.net.3.0/SpreadsheetGear~SpreadsheetGear.IRange~Formula.html](http://www.spreadsheetgear.com/support/help/spreadsheetgear.net.3.0/SpreadsheetGear~SpreadsheetGear.IRange~Formula.html)

# c# - CheckedList Box 没有 displayMember 属性？

> ID：16034104
> 
> 赞同：1
> 
> 时间：2013-04-16T10:01:36.877
> 
> 标签：c#, checkedlistbox

我很困惑，我想在 C# 中使用 CheckedListbox 的 displayMember 属性，但似乎没有？

有谁知道我是否必须添加或实施任何东西才能使用它？

提前谢谢了。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:18:57.710

`DisplayMember`属性用[EditorBrowsableAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.editorbrowsableattribute.aspx)装饰：

```
EditorBrowsable(EditorBrowsableState.Never) 
```

这使其对 IntelliSense 不可见。但这并不妨碍您使用它——只需在编辑器中键入此属性，您的代码就可以正常编译。

# c++ - 这种解除分配是否正确？

> ID：16034105
> 
> 赞同：0
> 
> 时间：2013-04-16T10:01:40.947
> 
> 标签：c++, arrays

这种释放是否正确？

vSize -> 动态地，每次运行的值都会改变

// 分配

```
int* xDump = new int(vSize);
int* yDump = new int(vSize); 
```

// 释放

```
delete xDump;
delete yDump; 
```

这种解除分配是否正确？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T10:06:15.617

这是正确的，只要这样：

```
int* xDump = new int(vSize);
int* yDump = new int(vSize); 
```

不***应该***是这样的：

```
int* xDump = new int[vSize];
int* yDump = new int[vSize]; 
```

如果您使用方括号，则您正在动态分配一个数组。在这种情况下，您需要使用 delete[] 关键字。像这样：

```
delete[] xDump;
delete[] yDump; 
```

## 编辑：

如果您真的想要一个动态分配的数组，建议使用[std::vector](http://en.cppreference.com/w/cpp/container/vector)，而不是使用 new/delete 创建一个。

例如，以下是在您的情况下使用向量的方法：

```
std::vector<int> xDump(vSize);
std::vector<int> yDump(vSize);

// no need for delete[] 
```

您应该避免拥有指针（指向在堆上分配的内存的指针），而是在必要时尝试在代码中使用[智能指针](http://en.cppreference.com/w/cpp/memory)或[容器。](http://en.cppreference.com/w/cpp/container)由于[智能指针](http://en.cppreference.com/w/cpp/memory)和[容器](http://en.cppreference.com/w/cpp/container)都利用了非常有用的[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)模式，这将减少程序员错误（即减少内存泄漏的机会）并提高异常安全性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T10:03:02.787

是的，这是正确的。那里没有问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T10:07:23.970

您似乎正在尝试分配一个`int`s 数组，在这种情况下它应该是：

```
int* xDump = new int[vSize];
int* yDump = new int[vSize]; 
```

和

```
delete [] xDump;
delete [] yDump; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T10:18:01.533

这个构造：

```
int* xDump = new int(vSize); 
```

相当于：

```
int* xDump = new int;
*xDump = vSize; 
```

...答案是肯定的，这是正确的，因为您没有分配数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T10:12:05.610

如果您打算删除此处似乎不是这种情况的数组，则需要调用 delete [] 。但是如果参数 vSize 在方括号 [] 中（也许你想要这个？）那么你绝对应该调用 delete []

# elisp - 使用 append 从一行文本创建一个列表

> ID：16034107
> 
> 赞同：1
> 
> 时间：2013-04-16T10:01:52.083
> 
> 标签：elisp

我想从由制表符分隔的一行文本中创建一个单词列表。我想基本上将行拆分为原子，按制表符拆分。

下面的代码是一种伪代码，但这是做这类事情的最佳方法吗？

这是我的第一次尝试：-

```
(defun get-hdr()
    ;obviously point must be positioned on correct line
    (let (mylist)
      (while(not (end-of-line)
         (while(re-search-forward ("[A-Za-z]+[^\t\n]" nil t)
           (append (match-string 1) mylist)      
         ))
      ))
   )
) 
```

如何让我的函数返回列表 mylist？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:12:36.310

您只需在循环结束时对其进行评估。

```
(defun get-hdr ()
  (let (mylist)
     (while (not (end-of-line))  ; missing closing parenthesis added
        (while (re-search-forward ("[A-Za-z]+[^\t\n]" nil t)) ; ditto
           (setq mylist (append (match-string 1) mylist)) ) ) ; note setq
     mylist) ) 
```

不过，习惯上只使用`cons`而不是`append`在这种情况下；然后最后，您可能想要反转列表。

```
(defun get-hdr ()
  (let (mylist)
     (while (not (end-of-line))
        (while (re-search-forward ("[A-Za-z]+[^\t\n]" nil t))
           (setq mylist (cons (match-string 1) mylist) ) ) )
     (reverse mylist)) ) 
```

另请参阅[http://www.gnu.org/software/emacs/manual/html_node/elisp/Building-Lists.html](http://www.gnu.org/software/emacs/manual/html_node/elisp/Building-Lists.html)`append` ，它在更广泛的背景下讨论了 的功能。

在许多情况下，您的函数不应与用户的正则表达式匹配数据或缓冲区位置混淆；考虑在表单周围添加包装器[`save-excursion`](http://www.gnu.org/software/emacs/manual/html_node/elisp/Excursions.html)。[`save-match-data`](http://www.gnu.org/software/emacs/manual/html_node/elisp/Saving-Match-Data.html)`let`

但是，出于您的既定目的，也许您所需要的只是

```
(split-string (buffer-substring-no-properties (point) (line-end-position)) "\t") 
```

（[文档](http://www.gnu.org/software/emacs/manual/html_node/elisp/Creating-Strings.html#index-split_002dstring-244)）

# mfc - MFC : CFileDialog and admin shares

> ID：16034113
> 
> 赞同：0
> 
> 时间：2013-04-16T10:02:04.003
> 
> 标签：mfc, network-shares

I force the open file dialog to start with the initial directory as \\servername, once it opens I want it to show all the admin shares(C$, D$). How do I achieve this? Admin shares will always be available on my servers. Eventually the user will select a file from this network path.

# camera - 将主相机与 transform.LookAt 一起使用，但不旋转相机

> ID：16034117
> 
> 赞同：3
> 
> 时间：2013-04-16T10:02:12.670
> 
> 标签：camera, unity3d, game-physics

我正在 Unity3d 中编写一个应用程序，这是一个跑步游戏。现在当我向上跳跃角色（在 y 方向移动它）然后相机旋转，因为我正在使用

```
transform.LookAt(character) 
```

1.角色正常运行时的第一张图片

2.第二张图是人物跳跃的时候

![正常运动的图像](https://i.stack.imgur.com/iqSqf.png) ![角色跳跃时的图像](https://i.stack.imgur.com/U4fPP.png)

我希望相机在不旋转的情况下看角色

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:06:45.593

有几种解决方案。由于您通过 直接操作观察方向`transform.LookAt()`，因此您可以简单地更改目标。

[LookAt](http://docs.unity3d.com/Documentation/ScriptReference/Transform.LookAt.html)方法有一个重载，可让您指定目标的位置（`Vector3`而不是`Transform`）。

您可以忽略目标的 y 坐标并选择固定的 y 值：

```
Vector3 lookAtPosition = character.transform.position;
lookAtPosition.y = fixedYPosition;
transform.LookAt(lookAtPosition); 
```

请注意，上述解决方案仅在角色始终位于同一平面上时才有效（例如，不再有地板、楼梯等）。

# c - TIFF 图像：16 位 RGBA 图像像素是如何交错的？

> ID：16034121
> 
> 赞同：5
> 
> 时间：2013-04-16T10:02:20.620
> 
> 标签：c, image, libtiff

我正在尝试通过 C 语言处理每通道 16 位 RGBA TIFF 图像，我在规范中找不到很多关于 16 位图像的信息。

在每通道 8 位 RGBA 图像的情况下，我知道一个像素存储为 uint32，并且可以通过将 32 位分组为 8 位的 4 组（R、G、B、A）来去隔行扫描。然后为了处理每通道 8 位 RGBA 图像，我正在执行以下操作（另请参见[此处](https://docs.google.com/file/d/0B7BjiesaKCZ0U0ttT0F6WFVnMFU/edit?usp=sharing)随附的源代码）：

1.  我将图像数据存储为我调用的 uint32 选项卡（使用 TIFFReadRGBAImageOriented）`data_tiff`
2.  我使用以下命令对像素进行去隔行扫描：`(uint8) TIFFGetR(*data_tiff)`, `(uint8) TIFFGetG(*data_tiff)`, `(uint8) TIFFGetB(*data_tiff)`&`(uint8) TIFFGetA(*data_tiff)`

如果是每通道 16 位的 RGBA 图像，你能告诉我如何去隔行像素吗？如果我可以将图像数据检索为 uint64 选项卡，那么我可以执行以下操作：

```
#define    TIFF16GetR(abgr)    ((abgr) & 0xffff)
#define    TIFF16GetG(abgr)    (((abgr) >> 16) & 0xffff)
#define    TIFF16GetB(abgr)    (((abgr) >> 32) & 0xffff)
#define    TIFF16GetA(abgr)    (((abgr) >> 48) & 0xffff)` 
```

1.  我将图像数据读取为 uint64 选项卡
2.  我使用`(uint16) TIFF16GetR(*data_tiff)`, `(uint16) TIFF16GetG(*data_tiff)`, `(uint16) TIFF16GetB(*data_tiff)`&`(uint16) TIFF16GetA(*data_tiff)`

但似乎数据本身并没有存储在 uint64 选项卡中，所以我想知道如何将每通道 16 位的交错图像转换为 uint32 像素选项卡。

我也面临以相同方式处理 16 位灰度图像的困难（`TIFFReadRGBAImageOriented`用于获取图像数据并尝试将每个像素转换为 uint16）

更一般地说，您是否有任何关于 16 位灰度和彩色图像的文档？

谢谢您最好的问候，

雷米 A.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T10:25:23.743

`TIFFReadRGBAImage`高级接口将始终以每个样本 8 位的精度读取图像。

为了在不损失精度的情况下读取每通道 16 位的图像，您可以直接使用并根据和`TIFFReadScanline`读取正确的数据量。但这仅适用于图像存储在条带中（不是 TIFF 6.0 中引入的图块）并且每个压缩条带中必须只有一行（如果图像被压缩）。`SamplesPerPixel``BitsPerSample`

如果您想处理*所有*类型的 TIFF 图像而不使用，`TIFFReadRGBAImage`那么您必须检测图像格式并使用低级接口，例如 `TIFFReadEncodedStrip`和`TIFFReadEncodedTile`.

请注意，TIFF 规范非常广泛和灵活，使用这些低级接口来处理每一种可能的图像并不是一件容易的事，因此如果可以的话，最好使用比 libtiff 更高级别的库。

**编辑**

您在评论中指的是 TIFF 6.0 规范的第一部分，称为**Baseline TIFF**

> « 引入 TIFF 时，它的可扩展性引发了兼容性问题。编码的灵活性引发了一个笑话，即 TIFF 代表数千种不兼容的文件格式。 [9] 为了避免这些问题，每个 TIFF 阅读器都必须阅读基线 TIFF。基线 TIFF 不包括图层，也不包括 JPEG 或 LZW 压缩。基线 TIFF 正式称为 TIFF 6.0，第 1 部分：基线 TIFF » 来自[Wikipedia](http://en.wikipedia.org/wiki/Tagged_Image_File_Format#Part_1%3a_Baseline_TIFF)

Baseline TIFF 不支持高于 8 位的位深度，这就是为什么在 Baseline TIFF 的规范中，`BitsPerSample`灰度图像的值只能是 4 或 8，而 RGB 图像的每个通道只能是 8 位. 支持更高位深度作为基线 TIFF 规范的扩展， TIFF 阅读器*不需要*支持它们。

Tiled Images 也是 Baseline 规范的扩展，其中`StripOffsets`,`StripByteCounts`和`RowsPerStrip`fields 被替换为`TileWidth`, `TileLength`，`TileOffsets`因此`TileByteCounts`您可以通过使用 . 查看现有字段来区分平铺图像和剥离图像`TIFFGetField()`。

# salesforce - System.CalloutException：对于输入字符串：“password@app.fluidsurveys.com”

> ID：16034122
> 
> 赞同：3
> 
> 时间：2013-04-16T10:02:22.867
> 
> 标签：salesforce, apex-code

我正在尝试访问销售人员中的流体调查 API。我使用以下代码，但它响应错误。

控制器类的代码是：

```
public class fluidSurvey{
    public String tst{set;get;}
    public String result{get;set;}

    public PageReference chk() {

        //if (!ApexPages.hasMessages())
            result=getData();

        return null;
    }
 public String getData()
   {
       HttpRequest req= new HttpRequest();
       Http http = new Http();
       req.setMethod('GET');
       String url = 'https://username:password@app.fluidsurveys.com/api/v2/surveys/';
       req.setEndpoint(url);
       HttpResponse res = http.send(req);
       String json =  res.getBody().replace('\n','');
       tst = json;
        try {
            JSONObject j = new JSONObject( json );
            return parseJson(j);
        } catch (JSONObject.JSONException e) {
            return 'Error parsing JSON response from Google: '+e;
        }

   }

   public String parseJson(JSONObject resp){
       String detail =resp.getString('total');

       return detail;
   }
} 
```

顶点页面的代码是：

```
<apex:page controller="fluidSurvey">
  <!-- Begin Default Content REMOVE THIS -->
   <h1>Fluid Survey</h1>
   <apex:form >
       <apex:outputText value="{!tst}"></apex:outputText>
      <apex:commandButton value="Submit" action="{!chk}"/>
  </apex:form>
</apex:page> 
```

但是当我单击提交按钮时，它会产生以下错误：

```
System.CalloutException: For input string: "password@app.fluidsurveys.com"
Error is in expression '{!chk}' in component <apex:page> in page fluid-page 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T13:53:10.983

您需要显式设置 Authorization 标头。

试试下面的代码：

```
public String getData()
{
    HttpRequest req= new HttpRequest();
    Http http = new Http();
    req.setMethod('GET');
    String authString = 'username:password';
    String url = 'https://app.fluidsurveys.com/api/v2/surveys/';
    req.setEndpoint(url);

    req.setHeader('Authorization', 'BASIC ' + EncodingUtil.base64Encode(Blob.valueOf(authString)));

    HttpResponse res = http.send(req);
    String json =  res.getBody().replace('\n','');

    try {
        JSONObject j = new JSONObject( json );
        return parseJson(j);
    } catch (JSONObject.JSONException e) {
        return 'Error parsing JSON response from Google: '+e;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:19:45.570

我不相信您可以使用 username:password@host 格式在标注的 URL 中传递身份验证信息，您必须在请求中明确设置身份验证 HTTP 标头才能传递凭据。（具体如何操作取决于服务器支持的身份验证类型）

# python - 如何在 GAE Text.Property 字段中将文本存储为 UTF-8？

> ID：16034123
> 
> 赞同：1
> 
> 时间：2013-04-16T10:02:23.827
> 
> 标签：python, google-app-engine, encoding, google-cloud-datastore

我知道 GAE`db.TextProperty`默认存储为 ASCII。如何将 utf 编码的文本存储在 textField 中？我试过`db.Text(txt, encoding='utf_8')`但无法让它工作。

使用交互式控制台没有回溯，只是一个普通的`request failed`. 但是例如传递没有“Ü”的文本是有效的。所以我确定这是一个编码问题。有人可以帮忙吗？

```
class Greeting(db.Model):
    lang_category = db.StringProperty(choices=("de_DE", "en_US", "pt_PT"), 
                                     required=True)
    greet_txt = db.TextProperty(required=True)

def put_greet(lang,txt):
    g = Greeting(lang_category = lang,
        greet_txt = db.Text(txt, encoding='utf_8'))
    g.put()

put_greet("de_DE","Voller Überzeugung.") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:15:18.597

Try with

```
def put_greet(lang,txt):
    g = Greeting(lang_category = lang,
        greet_txt = db.Text(txt))
    g.put() 
```

and

```
put_greet("de_DE", u"Voller Überzeugung.") 
```

Also, I prefer to use the ndb (google.appengine.ext.ndb) module instead of the db.

# qt - 在透明窗口上接收鼠标事件

> ID：16034131
> 
> 赞同：3
> 
> 时间：2013-04-16T10:02:36.230
> 
> 标签：qt, qt4

我有设置为对桌面透明的主窗口，使用

```
 setAttribute(Qt::WA_TranslucentBackground); 
```

里面还有一个透明背景的webview：

```
 QPalette palette = webview->palette();
    palette.setBrush(QPalette::Base, Qt::transparent);
    view->page()->setPalette(palette); 
```

一切正常，除了鼠标事件也传递到下面的窗口（由新线程创建和运行的opengl窗口），它是完全透明的。

我们怎样才能阻止这种行为。我想在 webview 本身中处理鼠标？

Windows 7、Qt 4.8.1、VS2010

# c# - 如何生成随机然后不再显示该随机

> ID：16034133
> 
> 赞同：3
> 
> 时间：2013-04-16T10:02:38.483
> 
> 标签：c#, list

我正在用 C# 编写一个纸牌游戏，一种二十一点游戏，用户按下一个按钮并发牌，该牌的价值被添加到一个文本框中。如果文本框的值超过 21，则用户输了。

我在处理卡片时遇到问题，我生成一个随机数，比如生成 5 显示钻石 5，将钻石 5 的值添加到分数文本框并显示图片框（5钻石扑克牌）。但是，一旦生成了 5，我就无法再次生成该卡，我对需要发生的事情有逻辑，我只是​​不确定实际代码本身，因为我是初学者。

到目前为止，iv 尝试了 2 种不同的方法，一个列表和一个布尔值数组，我仍在努力，任何人都可以在代码方面指出我正确的方向。

```
List<int> Diamonds = new List<int>();
        Random random = new Random();
        genRandom = random.Next(0, 5);

        while (Diamonds.Contains(genRandom))
        {
            genRandom = random.Next(0, 5);
            break;
        } 

        while (!Diamonds.Contains(genRandom))

        if (genRandom == 0)
        {
            Diamonds.add(0);
            score = score += 2;
            scoreTextBox.Text = score.ToString();
            diamonds2.Show();

        } 
```

在此先感谢，对语法错误感到抱歉！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T10:06:55.617

我会采取相反的方法，通过创建一个包含所有可能卡片的集合，然后从集合中随机抽取它们。

假设您有一个名为 的类`Deck`，它代表一副牌。`Card`用类填充它。现在，当您开始抽牌时，在集合中随机选择一个数字并将该牌从`Deck`. 下次抽到相同的随机数时，它会从牌堆中抽出不同的牌，因为您移除了使用过的牌。

只要记住生成一个在牌组大小范围内的随机数，每次抽牌后随机数会减少。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T10:09:09.300

你现在的问题是你没有卡池。您应该有一张可以抽牌的卡片列表，一旦选择了一张牌，它就会从可用选项中删除，并且不能再次抽牌。

```
List<Card> deck = new List<Card>();

deck.Add(new Card(1, CardType.Diamonds));
deck.Add(new Card(2, CardType.Diamonds));

...

Card nextCard = deck[Random.Next(0, deck.Count - 1)];
deck.Remove(nextCard); 
```

在哪里：

```
struct Card
{
    public int number;
    public CardType type;

    public Card(int number, CardType type)
    {
        this.number = number;
        this.type = type;
    }
}

enum CardType
{
    Diamonds,
    Spades,
    Hearts,
    Clubs
} 
```

这是一种非常简单的面向对象的方法，其中每张卡片都被明确定义为一个独特的容器。这可能不是最佳方式，但可能更容易理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T10:08:59.500

有很多方法可以做到这一点，我最常用的方法如下：

```
List<int> available = new List<int>(5000);
for(int i=1; i<=5; i++)
available.Add(i); 
```

上面的代码将生成所有随机数。

现在您可以从它们中进行如下选择：

```
List<int> result = new List<int>(5000);
while(available.Count > 0)
{
 int index = random.Next(availableCount);
 result.Add(available[index]);
 available.RemoveAt(index);
}
return result; 
```

由于您在获得后将其删除，因此它们将永远不会重复。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T10:09:42.793

你可以这样做：

```
List<int> Diamonds = new List<int>();
for(int i = 1; i <= 10; i++) //10 is just an example..dk how many cards :P
{
    Diamonds.Add(i);
}

Random random = new Random();
int index = random.Next(0, Diamonds.Count - 1);
int nr = Diamonds[index];
Diamonds.Remove(index); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T10:27:45.317

从概念上讲，最简单的方法是拥有一个表示一副牌的数组，然后从中发牌。

理想情况下，您会为此使用堆栈，但不幸的是，您不能洗牌！

因此，最好的办法是使用 a `List<Card>`，其中 'Card' 是代表卡片的类。该类`Card`将有两个属性：a`Suite`和从 1（Ace）到 13 的等级，其中 11 是 Jack，12 是 Queen，13 是 King。

你会用所有 52 张可能的牌填充你`List<Card>`的牌组，然后你可以使用[Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)的实现来洗牌。

这是一个完整的示例：

```
using System;
using System.Collections.Generic;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            var deck = new List<Card>();

            for (int rank = 1; rank <= 13; ++rank)
                foreach (Suite suite in Enum.GetValues(typeof(Suite)))
                    deck.Add(new Card {Rank = rank, Suite = suite});

            var shuffler = new Shuffler();

            shuffler.Shuffle(deck);

            // Deal the top 10 cards.

            for (int i = 0; i < 10; ++i)
                Console.WriteLine(deck[i]);
        }
    }

    public enum Suite
    {
        Clubs,
        Diamonds,
        Hearts,
        Spades
    }

    public sealed class Card
    {
        public Suite Suite;
        public int Rank;

        public override string ToString()
        {
            string rank;

            switch (Rank)
            {
                case 1:  rank = "Ace";   break;
                case 11: rank = "Jack";  break;
                case 12: rank = "Queen"; break;
                case 13: rank = "King";  break;
                default: rank = Rank.ToString(); break;
            }

            return string.Format("{0} of {1}", rank, Suite);
        }
    }

    public sealed class Shuffler
    {
        public Shuffler()
        {
            _rng = new Random();
        }

        public void Shuffle<T>(IList<T> array)
        {
            for (int n = array.Count; n > 1; )
            {
                int k = _rng.Next(n);
                --n;
                T temp = array[n];
                array[n] = array[k];
                array[k] = temp;
            }
        }

        private readonly Random _rng;
    }
} 
```

当然，真实代码应该验证 Rank 和 Suite。此外，您最好编写一个封装了洗牌和发牌的 Deck 类（它可以在发牌结束`List<Card>`时移除牌）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T10:06:05.387

最简单的做法是对整个列表进行随机排序（按 排序`Rand() - 0.5`），然后每次您想要一张“随机”卡片时，取出第一个并将其从列表中删除。这些牌是随机顺序的，因此在统计上与每次随机选择一张牌的效果相同，并且您不会在给定的游戏中两次选择同一张牌。

# mysql - 从借方和贷方列计算余额并在mysql中选择用户？

> ID：16034135
> 
> 赞同：-1
> 
> 时间：2013-04-16T10:02:50.507
> 
> 标签：mysql

我有表格帐户，其中有以下 3 列

users_id、借方、贷方

我想取出余额，因此我需要检查有多少信用卡用户，然后从中删除借方并计为一个用户的总余额。像这样在一张表中选择所有这样的用户，或者余额大于1的用户总数

我已经这样做了

```
 SELECT * , (
SUM( credit )
) - SUM( debit ) AS TotalBalance
FROM accounts
GROUP BY user_id 
```

我只想要拥有多个余额的用户

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:04:04.137

What about this?

```
SELECT
  *
FROM
  accounts
WHERE
  credit-debit > 1 
```

# mongoose-web-server - 使用猫鼬服务器显示html页面

> ID：16034138
> 
> 赞同：0
> 
> 时间：2013-04-16T10:02:59.670
> 
> 标签：mongoose-web-server

我正在尝试在猫鼬服务器中显示一个 html 页面，我尝试使用以下代码，但它不起作用，谁能告诉我该代码中的问题是什么。

```
#include <stdio.h>
#include <string.h>
#include "mongoose/mongoose.h"

static int begin_request_handler(struct mg_connection *conn) {
    const struct mg_request_info *request_info = mg_get_request_info(conn);
    static const char *login_url = "/index.html";
    mg_printf(conn, "HTTP/1.1 200 OK\r\n"
            "Content-Type: text/html\r\n"
            "Location: %s\r\n\r\n", login_url);
    return 1;
}

int main(void) {
    struct mg_context *ctx;
    struct mg_callbacks callbacks;
    const char *options[] = { "listening_ports", "8080", NULL };
    memset(&callbacks, 0, sizeof(callbacks));
    callbacks.begin_request = begin_request_handler;
    ctx = mg_start(&callbacks, NULL, options);
    getchar();
    mg_stop(ctx);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T01:06:12.683

你想达到什么目的？在 options[] 添加一个“document_root”（你总是需要一个 document_root 在你的猫鼬选项中），将你的 index.html 放在那个目录中，然后从 mg_start 中删除回调。猫鼬会自动为您的 index.html 提供服务。

# javascript - safari ios ( iPad ) - 自定义字体不适用于 javascript 生成的文本

> ID：16034140
> 
> 赞同：-1
> 
> 时间：2013-04-16T10:03:03.230
> 
> 标签：javascript, ios, webfonts

我正在尝试在 javascript 生成的文本上使用 webfont。

它适用于每个桌面浏览器。

对于 iOS，它适用于页面中已经存在的文本，但奇怪的是它不适用于通过 javascript 添加的文本。

在我看来，这是一个特定的 iOS 问题，但我找不到任何关于它的建议，所以我想知道是否有人知道它。

我在 body 标签上声明了字体系列

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:13:30.380

也许您正在向文本容器中添加其他元素，并且您的 CSS 中没有匹配的选择器。

或者您可以尝试将字体属性分配给星形选择器：

```
* {
    font: /* your font-definitions go here */
} 
```

# regex - 正则表达式无效表达式没有重复

> ID：16034143
> 
> 赞同：-1
> 
> 时间：2013-04-16T10:03:05.527
> 
> 标签：regex, python-2.7, regex-negation

我正在尝试从字符串中删除除“+”之外的所有内容

我正在使用这个：

```
phone = re.sub(r'[^+]', '', cleaned_data['phone_number']) 
```

我也试过这个：

```
phone = re.sub(r'[^\+]', '', cleaned_data['phone_number']) 
```

它因“无效的表达”而失败

编辑：如果发现错误位于这些行中，则使用调试器

```
phone_patterns = [r'^0\d{9}$', r'^\+33\d{9}$']
        for phone_pattern in phone_patterns:
            if re.match(phone, phone_pattern):
                ..... 
```

stack_trace：回溯：

```
File "/path/local/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  115\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/path/request_quote/views.py" in new
  12\.         if formset.is_valid():
File "/path/local/lib/python2.7/site-packages/django/forms/formsets.py" in is_valid
  277\.         err = self.errors
File "/path/local/lib/python2.7/site-packages/django/forms/formsets.py" in errors
  259\.             self.full_clean()
File "/path/local/lib/python2.7/site-packages/django/forms/formsets.py" in full_clean
  297\.             self._errors.append(form.errors)
File "/path/local/lib/python2.7/site-packages/django/forms/forms.py" in _get_errors
  117\.             self.full_clean()
File "/path/local/lib/python2.7/site-packages/django/forms/forms.py" in full_clean
  273\.         self._clean_form()
File "/path/local/lib/python2.7/site-packages/django/forms/forms.py" in _clean_form
  299\.             self.cleaned_data = self.clean()
File "/path/request_quote/forms.py" in clean
  56\.         QuoteForm.COUNTRY_VALIDATORS[country](self, cleaned_data)
File "/path/request_quote/forms.py" in validate_fr
  102\.             if re.match(phone, phone_pattern):
File "/path/lib/python2.7/re.py" in match
  137\.     return _compile(pattern, flags).match(string)
File "/path/lib/python2.7/re.py" in _compile
  242\.         raise error, v # invalid expression

Exception Type: error at /en/request_quote/new/
Exception Value: nothing to repeat 
```

编辑：错误来自开头的“+”应该被转义但是如何？

EDIT2：非常愚蠢，但我做到了

```
re.match(string,pattern) 
```

代替

```
re.match(pattern,string) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:12:16.153

试试这个正则表达式的电话号码：

`/^[0-9\+]{0,1}[0-9]{1,}$/`

.

它将接受：

1) 可选 + 开头

2) 数字

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-16T10:07:18.260

怎么样

```
>>> import string
>>> phone = "+1729"
>>> "".join(x for x in phone if x in string.digits)
'1729' 
```

# mysql - SQL - 仅在条件匹配时选择

> ID：16034154
> 
> 赞同：-6
> 
> 时间：2013-04-16T10:03:24.763
> 
> 标签：mysql, sql, oracle, postgresql, select

我有一张如下表。

```
ID   NAME
1    JOHN
2    JANE
3    JACK 
```

在一个简单的 select 语句中，如何从表中查询 JOHN 和 JANE？

条件是：

一世。结果必须返回 JOHN 和 JANE。

ii. 如果从表中删除了 JOHN 或 JANE，它将只返回空结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:05:48.100

您可以使用`GROUP BY/HAVING`来确保有 2 个匹配项：

```
SELECT  Name
FROM    T
WHERE   Name IN ('JOHN', 'JANE')
AND     EXISTS
        (   SELECT  1
            FROM    T
            WHERE   Name IN ('JOHN', 'JANE')
            HAVING  COUNT(DISTINCT Name) = 2
        ); 
```

或者您可以使用自联接：

```
SELECT  a.Name
FROM    T a
        INNER JOIN T b
            ON a.Name != b.Name
WHERE   a.Name IN ('JOHN', 'JANE')
AND     b.Name IN ('JOHN', 'JANE'); 
```

**[SQL Fiddle (MySQL) 上的示例](http://sqlfiddle.com/#!2/055bd/8)**

**[SQL Fiddle (Oracle) 上的示例](http://sqlfiddle.com/#!4/b895c/1)**

**[SQL Fiddle (Postgresql) 上的示例](http://sqlfiddle.com/#!12/021b5/5)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:17:42.347

1.  创建函数`JohnAndJaneBothExist()`

2.

```
SELECT * FROM TABLENAME 
WHERE
  JohnAndJaneBothExist and
  Name In ('John', 'Jane') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:15:00.187

尝试这个：

```
SELECT 
  GROUP_CONCAT( `NAME` ) as names
FROM `TABLE`
WHERE 1
   AND NAME IN ('JOHN','JANE')
HAVING names= 'JOHN,JANE' 
```

# iphone - secure http calls in ios

> ID：16034160
> 
> 赞同：0
> 
> 时间：2013-04-16T10:03:41.100
> 
> 标签：iphone, ios, ios5, ios6

How do I secure http call everytime I fire from my app and also it needs to have timeout so that any other user cannot use the same link from any browser.

I am looking for ios solution in particular and not html form.

Please help me out. Unable to resolve this issue and dont know in which direction to proceed.

Thanks in Advance.

I am attaching Working code for both PHP and ios which posts the Request and gets back the Response but no security is attached and any user can get the same Response by calling the same HTTP Response from Browser anytime...

ios code:

```
 NSURL *url=[NSURL URLWithString:@"http://example.com/getmsgs/strno=123"];

    NSURLRequest *request=[NSURLRequest requestWithURL:url];

    connection=[NSURLConnection connectionWithRequest:request delegate:self];

    if(connection){

        webData=[[NSMutableData alloc]init];

    }

NSError *requestError = NULL;

NSDictionary *allData=[NSJSONSerialization JSONObjectWithData:webdata options:0 error:&requestError];

if (requestError){
    //An error occurred.
    NSLog(@"error is : %@",requestError);
}

if (! allData) {
    NSLog(@"Got an error: %@", requestError);
} else {
    NSLog(@" data is : %@",allData) ;
}

NSArray *arrayOfEntry=[allData objectForKey:@"json"];

for (NSDictionary *diction in arrayOfEntry) {

    NSString *label=[title objectForKey:@"image"];

    NSString *label2=[title objectForKey:@"artist"];

    NSString *label3=[title objectForKey:@"name"];

    [array addObject:label];
        [array addObject:label2];
            [array addObject:label3];

} 
```

php code:

```
<?php

    $strno=$_GET['strno'];

    if (isset($strno))
    {
            $connect=mysql_connect("localhost","test","test") or die ('Connection error!!!');
            mysql_select_db("test") or die ('Database error!!!');

        $query=mysql_query("select sno FROM users  where strno='$strno';");
        while($row = mysql_fetch_assoc($query))

        {
            $jsonoutput='{"json":{
                "image":"'.$row['image'].'",
"artist":"'.$row['artist'].'",
"name":"'.$row['name'].'"
                }}';
        }

    }

    echo trim($jsonoutput);
    mysql_close($connect) or die ('Unable to close connection-error!!!');
    }

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:22:17.987

您可以使用某种会话来实现您想要的。例如，当用户打开（运行）您的 ios 应用程序时，您可以连接到您的网络服务以获取会话密钥（令牌），这对于该应用程序正在运行的设备来说是唯一的。而且，当您的 ios 应用程序进入后台时，您可以使令牌无效（在这里使用 ios 后台执行是合适的）。此外，您可以使用有时间限制的会话密钥，例如，您的会话密钥将在 10 分钟内过期（在服务器端会失效），并且对于新的 Web 请求，您的服务器必须发出另一个会话密钥。祝你好运！

# java - Fail to rename file

> ID：16034161
> 
> 赞同：2
> 
> 时间：2013-04-16T10:03:41.293
> 
> 标签：java, jsp, multipartform-data

Greeting ,Currently I am using the OReilly MultipartRequest class and i want to rename the complete file name before upload.

```
MultipartRequest m = new MultipartRequest(request, Path,5024 * 1024, new FileRenamePolicy() {
                    @Override
                    public File rename(File arg0) {
                        boolean result = arg0.renameTo(new File(arg0
                                .getParentFile() + "title"));
                        if (result) {
                            System.out.println("Renamed");
                        }
                        return arg0;
                    }
                }); 
```

But every time result is false.Please guide me where am wrong.I am new to java Technology

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:45:37.130

尝试这个...

```
boolean result = arg0.renameTo(new File(arg0.getParentFile(), "title")); 
```

或者这个...（注意文件分隔符）

```
boolean result = arg0.renameTo(new File(arg0
        .getParentFile().getAbsolutePath() + File.separator + "title")); 
```

如果它已经存在，您可能必须在尝试重命名**之前立即将其删除...**

```
File newFile = new File(arg0.getParentFile(), "title");
if (newFile.exists()) newFile.delete(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:23:43.023

查看

1.  用于 JVM 的写访问
2.  对于只读文件系统
3.  目标文件不存在
4.  目标文件名没问题
5.  源文件存在
6.  源文件未写锁定
7.  源文件未在其他编辑器中打开
8.  可以删除源文件...等等等等

这有帮助吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:47:37.573

查看文档 `Returns a File object holding a new name for the specified file.`试试这个：

```
public File rename(File arg0) {
    return new File(arg0.getParentFile() + "title"));
} 
```

# uinavigationcontroller - UITabbarController 中 NavigationController 的堆栈跟踪

> ID：16034162
> 
> 赞同：0
> 
> 时间：2013-04-16T10:03:42.517
> 
> 标签：uinavigationcontroller, uitabbarcontroller

我有一个 uitabbarController，它有 4 个选项卡。每个选项卡都有自己的基于导航的堆栈跟踪。每个屏幕上的注销按钮在我的 TabbarController 上显示一个登录屏幕。

但是当我重新登录时，我的 Tabbar 旧堆栈仍然存在。

我希望无论何时何地从哪个屏幕按下注销按钮，它都会将所有选项卡的所有视图控制器弹出到根视图控制器。

任何人都可以指导我如何实现这一目标。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:21:17.967

Atlast 我已经解决了。

我创建了以下标准并得到了我需要的东西。使用以下代码，您可以一次将所有选项卡栏弹出到它们各自的根视图控制器。

```
 NSArray *temp = self.tabBarController.viewControllers;
NSLog(@"count of Temp = %d",[temp count]);
NSLog(@"Temp Array = %@",temp);
if ([temp count]>=1) {
    for (int i=0; i<[temp count]; i++) {
        UINavigationController *controller = [self.tabBarController.viewControllers objectAtIndex:i];
        NSLog(@"controllers @ index %d = %@",i,[controller class]);
        [controller popToRootViewControllerAnimated:YES];
    }
} 
```

谢谢
最好的问候
sHaH ...

# vb.net - Cell formatting doesn't apply to VB entered data

> ID：16034165
> 
> 赞同：0
> 
> 时间：2013-04-16T10:03:48.870
> 
> 标签：vb.net, excel

I'd like to know how to "apply" cell formatting to a cell when we don't write manually.

I have a vb.net application which enter the date and time to a cell in excel. The cells are formatted to display the date only as 16/04/2013.

When the application enter the date, excel displays it as a string so with the time. But if I double click to edit the cell then confirm without changing anything it formats the cell right.

Here are the screens

The last 5 are entered by the application.

I edited the n°66 then confirmed by enter and it is how I want it

![enter image description here](https://i.stack.imgur.com/mSOuv.png)

Thank you

EDIT: Here is the code I use

```
Dim day As Date
oExcel.ScreenUpdating = False
oExcel.cells(6, 3).Select()
While oExcel.ActiveCell.Value <> Nothing
    oExcel.ActiveCell.OffSet(1, 0).Select()
End While
oExcel.ScreenUpdating = True

day = DateValue(Now)
oExcel.ActiveCell.Value = day & " " & TimeOfDay
oExcel.ActiveCell.Offset(0, 1).Value = timeOutput 
```

EDIT2: Found a workaround

I found a way to convert the string to a number in excel here is the code:

```
Dim writeThis As String = day & " " & TimeOfDay
With oExcel.ActiveCell
  .OffSet(0, 10).Value = writeThis
  .Formula = "=" & oExcel.ActiveCell.OffSet(0, 10).Address & "+0"
  .Formula = oExcel.ActiveCell.Value
  .OffSet(0, 10).Value = Nothing
  .Offset(0, 1).Value = timeOutput
End With 
```

I'm not sure it's the best way to do it but it works so i'm happy with it. Thank you Siddharth for all your help :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:26:23.280

就像您正在写入现有文件一样。如果您一直在写入一个新文件，那么上面的代码就会按照您的意愿工作。

在现有文件中，列/单元格被格式化为文本，因此您的日期被存储为文本。

如果整个 Column 都在存储日期，请查看此示例（根据需要更改）

```
Private Sub Button1_Click(ByVal sender As System.Object,
ByVal e As System.EventArgs) Handles Button1.Click
    '~~> Define your Excel Objects
    Dim xlApp As New Excel.Application
    Dim xlWorkBook As Excel.Workbook
    Dim xlWorkSheet As Excel.Worksheet

    '~~> Open Existing Workbook
    xlWorkBook = xlApp.Workbooks.Open("C:\Sample.xlsx")

    '~~> Display Excel
    xlApp.Visible = True

    '~~> Set the relebant sheet that we want to work with
    xlWorkSheet = xlWorkBook.Sheets("Sheet1")

    Dim Day As Date = DateValue(Now)
    Dim TimeOfDay As Date = TimeOfDay

    With xlWorkSheet
        '~~> Directly type the values that we want
        .Columns(1).numberformat = "dd/mm/yyyy"
        .Range("A1").Value = Day & " " & TimeOfDay
    End With

    '
    '~~> Rest of the code
    '
End Sub 
```

否则，如果您只想格式化单元格，请查看此代码

```
Private Sub Button1_Click(ByVal sender As System.Object,
ByVal e As System.EventArgs) Handles Button1.Click
    '~~> Define your Excel Objects
    Dim xlApp As New Excel.Application
    Dim xlWorkBook As Excel.Workbook
    Dim xlWorkSheet As Excel.Worksheet

    '~~> Open Existing Workbook
    xlWorkBook = xlApp.Workbooks.Open("C:\Sample.xlsx")

    '~~> Display Excel
    xlApp.Visible = True

    '~~> Set the relebant sheet that we want to work with
    xlWorkSheet = xlWorkBook.Sheets("Sheet1")

    Dim Day As Date = DateValue(Now)
    Dim TimeOfDay As Date = TimeOfDay

    With xlWorkSheet
        '~~> Directly type the values that we want
        With .Range("A1")
            .NumberFormat = "dd/mm/yyyy"
            .Value = Day & " " & TimeOfDay
        End With
    End With

    '
    '~~> Rest of the code
    '
End Sub 
```

# active-directory - After successful LDAP authentication takes to login

> ID：16034168
> 
> 赞同：0
> 
> 时间：2013-04-16T10:03:53.967
> 
> 标签：active-directory, spring-security

I am new spring-security I did spring authentication with ActiveDirectory, It was working after adding

```
<beans:bean id="myauthenticationrpovider" class="com.holcim.acl.rm.security.MyAuthoritySupplementingProvider">
    <beans:constructor-arg ref="ldapActiveDirectoryAuthProvider" /> 
```

and bean code as follows

```
public class MyAuthoritySupplementingProvider implements AuthenticationProvider {

    private AuthenticationProvider delegate;

    public MyAuthoritySupplementingProvider(AuthenticationProvider delegate) {
        this.delegate = delegate;
    }

    public Authentication authenticate(Authentication authentication) {
        final Authentication a = delegate.authenticate(authentication);
        //get first username and full User Name from a i.e Authentication.

        Object auth = a.getPrincipal();
        String username;
        String userFullName;
        if(auth instanceof LdapUserDetailsImpl){

            LdapUserDetailsImpl userDetails = (LdapUserDetailsImpl) auth;
            String[] dn = userDetails.getDn().split(",");

            String[] temp = dn[0].split("=");
            userFullName = temp[1];

            username = ((LdapUserDetailsImpl) auth).getUsername();

            logger.debug("AD Authentication done ");
            logger.debug(userDetails.getDn());
            logger.debug("User Full Name " + temp[1]);
            logger.debug("UserName is :: "+ username);
        }

        // Load additional authorities and create an Authentication object
        //final List<GrantedAuthority> authorities = loadRolesFromDatabaseHere();
        List<AclAuthority> authorities = new ArrayList<AclAuthority>();
        authorities.add(AclAuthority.ROLE_ADMIN);

        return new AbstractAuthenticationToken(authorities) {
            public Object getCredentials() {
                throw new UnsupportedOperationException();
            }

            public Object getPrincipal() {
                return a.getPrincipal();
            }
        };
    }

    @Override
    public boolean supports(Class<?> authentication) {
        return delegate.supports(authentication);
    }

} 
```

application-security.xml as follows

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security" 
    xmlns:beans="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">
    <!-- HTTP security configurations -->
    <http auto-config="true" use-expressions="true">
        <form-login login-processing-url="/static/j_spring_security_check" login-page="/login" authentication-failure-url="/login?login_error=t" />
    <logout logout-url="/static/j_spring_security_logout" />
       <!-- Configure these elements to secure URIs in your application -->
      <intercept-url pattern="/choices/**" access="hasRole('ROLE_ADMIN')" />
      <intercept-url pattern="/member/**" access="isAuthenticated()" />
      <intercept-url pattern="/resources/**" access="permitAll" />
      <intercept-url pattern="/static/**" access="permitAll" />
      <intercept-url pattern="/login/**" access="permitAll" />
      <intercept-url pattern="/**" access="isAuthenticated()" />
 </http>
    <!-- Active directory authentication added by Kamlesh A. -->
    <!-- LDAP server details -->
    <authentication-manager>
        <authentication-provider ref="myauthenticationrpovider" />
    </authentication-manager>  

    <beans:bean id="ldapActiveDirectoryAuthProvider"  class="org.springframework.security.ldap.authentication.ad.ActiveDirectoryLdapAuthenticationProvider">
  <beans:constructor-arg value="in.mycompany.net" />        
  <beans:constructor-arg value="ldap://XXX.XXX.XXX.XXX:PPP" />
  <!--<beans:property name="authoritiesMapper" ref="grantedAuthoritiesMapper" />-->
  <beans:property name="useAuthenticationRequestCredentials" value="true" />
  <beans:property name="convertSubErrorCodesToExceptions" value="true" />
 </beans:bean>
 <beans:bean id="myauthenticationrpovider" class="com.holcim.acl.rm.security.MyAuthoritySupplementingProvider">
        <beans:constructor-arg ref="ldapActiveDirectoryAuthProvider" />
    </beans:bean> 
</beans:beans> 
```

I have gone through so questions

[Spring Security redirect to previous page after successful login](https://stackoverflow.com/questions/14573654/spring-security-redirect-to-previous-page-after-succesful-login) as well as

[Unexpected redirect to login page after successful login](https://stackoverflow.com/questions/12409308/unexpected-redirect-to-login-page-after-successful-login)

after successfull login it takes to

```
http://localhost:8080/static/j_spring_security_check 
```

But if I try to open anyother url it again take to login

# c# - WPF Populate Combobox in a DataGrid from integer values

> ID：16034169
> 
> 赞同：0
> 
> 时间：2013-04-16T10:03:59.657
> 
> 标签：c#, wpf, mvvm, datagrid

It seems an easy problem but I can't figure out. The scenery:

In C#/WPF/MVVM, I have a DataGrid showing some data. One field (a cell of a row) is an integer value. Now I need to display a ComboBox for that cell showing "local" if the value is 0, "Network" if the value is 1 or greater. How can I bind this?

Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:12:48.900

您应该可以使用它`DataGridTemplateColumn Template`来执行此操作。

下面是一个帮助示例：

```
 <DataGrid Grid.Row="0"  
              AutoGenerateColumns="False" Height="Auto" 
              SelectionMode="Single" ItemsSource="{Binding MyViewItemModels}"  
                  RowDetailsVisibilityMode="Collapsed" HeadersVisibility="Column" CanUserAddRows="False" 
                  GridLinesVisibility="None" AlternationCount="2" AlternatingRowBackground="GhostWhite" Background="White">

        <DataGrid.Columns>

            <DataGridTemplateColumn IsReadOnly="True" MinWidth="50" Width="70" >
                <DataGridTemplateColumn.Header>
                    <Border Height="30">
                        <Label Content="My Name"/>
                    </Border>
                </DataGridTemplateColumn.Header>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <ComboBox Height="16" ItemsSource="{Binding MyItems, Mode=OneWay}" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

# java - activemq 数据源的惰性初始化

> ID：16034174
> 
> 赞同：2
> 
> 时间：2013-04-16T10:04:23.187
> 
> 标签：java, spring, jms, activemq, applicationcontext

我想知道是否有任何方法可以实现 activemq 持久性的惰性初始化。问题是我不想事先指定数据库的用户和密码，而是让用户在应用程序初始化后输入这些值。因此，例如用户启动应用程序，然后需要输入数据库用户名和密码。在他这样做之后，应用程序使用用户提供的数据库连接来初始化 activemq 持久性。

```
 <amq:persistenceFactory>
        <amq:journalPersistenceAdapterFactory journalLogFiles="4" dataDirectory="./journal-data" dataSource="#postgre-ds">
            <amq:statements>
                <amq:statements binaryDataType="VARCHAR(250)"/>
            </amq:statements>
        </amq:journalPersistenceAdapterFactory>
    </amq:persistenceFactory> 
```

在哪里 postgre-ds

```
<bean id="postgre-ds" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="org.postgresql.Driver"/>
    <property name="url" value="jdbc:someURL"/>
    <property name="username" value="username"/>
    <property name="password" value="pa55w0rd"/>
    <property name="maxActive" value="200"/>
    <property name="poolPreparedStatements" value="true"/>
</bean> 
```

所以我想首先获取用户名和密码的值，然后初始化持久性。谢谢 ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T04:29:55.207

Spring 的整个想法是在启动时将这些东西连接起来，这涵盖了 99% 的用例。

它没有什么神奇之处。无论如何，它只是普通的 java 对象。如果您需要对生命周期和输入参数进行更多控制，请继续手动操作。

```
DataSource ds = new BasicDataSource();
ds.setUsername( getInput() );
// ... set all parameters needed
JournalPersistenceAdapterFactory factory = new JournalPersistenceAdapterFactory();
factory.setDataDirectoryFile(data);
//.. set all parameters needed
BrokerService broker = new BrokerService();
broker.setPersistenceFactory(factory);
broker.addConnector(ActiveMQConnectionFactory.DEFAULT_BROKER_BIND_URL);
// More config goes here
broker.start(); 
```

# c# - Xml序列化。为两个类创建公共根

> ID：16034180
> 
> 赞同：0
> 
> 时间：2013-04-16T10:04:48.660
> 
> 标签：c#, xml, xml-serialization, xmlserializer

如何使用 XmlSerializer 创建这样的结构：

```
<Files Upload="True">
    <InputFiles>
        <InputFile File="file.txt" ErrorCode="0" Version="0"/>
        <InputFile File="file.txt" ErrorCode="0" Version="0"/>
    </InputFiles>
    <OutputFiles>
        <OutputFile File="file.txt" ErrorCode="0" Version="0"/>
        <OutputFile File="file.txt" ErrorCode="0" Version="0"/>
    </OutputFiles>
</Files> 
```

问题是创建标签文件

现在我在某个类中有这样的代码，这些代码正在为输入文件和输出文件序列化：

```
 private System.Collections.Generic.List<InputFile> _inputFiles = new System.Collections.Generic.List<InputFile>();
    [XmlIgnore]
    public virtual System.Collections.Generic.List<InputFile> InputFiles
    {
        get 
        {
            if (ModulesInBuild.ModulesList.Count != 0)
            {
                _inputFiles.Clear();
                foreach (var item in ModulesInBuild.ModulesList)
                {
                    _inputFiles.Add(item);
                }
            }
            return _inputFiles; 
        }
    }

    [XmlArray("InputFiles")]
    [XmlArrayItem("InputFile")]
    public virtual InputFile[] XmlInputFiles
    {
        get
        {
            var inputFiles = new InputFile[InputFiles.Count];
            InputFiles.CopyTo(inputFiles, 0);
            return inputFiles;
        }
        set
        {
            InputFiles.Clear();
            InputFiles.AddRange(value);
        }
    } 
```

所以最好不要重写很多代码而只是添加标签文件=）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:38:09.997

您可以执行类似的操作，然后使用 XmlSerializer 对其进行序列化。

对 InputFile 和 OutputFile 类中的属性也使用 XmlAttribute 属性。

```
 [Serializable]   
 public class Files
    {
        public Files(){}

        [XmlAttribute()]
        public bool Upload{get;set;}

        public List<InputFile> InputFiles
           {
           get{retrun inputFiles;}
           set{inputFiles=value;}
           }
        List<InputFile> inputFiles = new List<InputFile>();

        public List<OutputFile > OutputFiles
           {
           get{return outputFiles ;}
           set{outputFiles =value;}
           }
        List<OutputFile > outputFiles = new List<OutputFile >();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:14:17.593

有多种方法可以解决这个问题。就个人而言，我更喜欢添加新的父类，您可以在其中添加`InputFile`和`OutputFile`列表。但是，如果你不喜欢这个想法，你可以做另外两件事之一：

1.  自己实施`IXmlSerializable`和处理事情
2.  对于快速而肮脏的黑客攻击，您可以执行以下操作：

`string serialized = //however you normally serialize your xml`

`string uglyHack = "<Files>" + serialized + "</Files>";`

我不推荐最后一种方法，但无论你的船漂浮什么......

# opencart - 如何使 OpenCart 模块可自行安装？

> ID：16034185
> 
> 赞同：0
> 
> 时间：2013-04-16T10:05:03.770
> 
> 标签：opencart

我在 OpenCart 中创建了支付模块。

其中有 7 个不同的文件，如下所示。

```
catalog/controller/payment/my_pay.php
catalog/model/payment/my_pay.php
catalog/language/english/payment/my_pay.php
catalog/view/theme/default/template/payment/my_pay.tpl
admin/controller/payment/my_pay.php
admin/language/english/payment/my_pay.php
admin/view/template/payment/my_pay.tpl 
```

为了安装这个模块，我们需要将这些文件放在适当的位置。

我希望在安装模块时将这些文件/文件夹自动放置在适当的位置。

提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:51:36.563

OpenCart中没有这样的*自动化*（例如在 WordPress 中）。

但是如果你有这个文件夹/文件结构：

```
catalog/
  |-controller/
    |-payment/
      |-my_pay.php
  |-model/
    |-payment/
      |-my_pay.php
  |-language/
    |-english/
      |-payment/
        |-my_pay.php
  |-view/
    |-theme/
      |-default/
        |-template/
          |-payment/
            |-my_pay.tpl
admin/
  |-controller/
    |-payment/
      |-my_pay.php
  |-language/
    |-english/
      |-payment/
        |-my_pay.php
  |-view/
    |-template/
      |-payment/
        |-my_pay.tpl 
```

只需将这两个主要文件夹 (`catalog`和`admin`) 复制到原始文件夹上就足够了……新文件和/或文件夹将自动创建（感谢文件系统）。

# magento - Magento Index Management issues, products not displaying in category pages

> ID：16034188
> 
> 赞同：2
> 
> 时间：2013-04-16T10:05:05.627
> 
> 标签：magento, indexing, product

This is a Magento issue - using the Enterprise edition. Unfortunately their support technicians are all in San Francisco, and I am based in the UK, so their support to me is restricted to a certain time window.

I have categories which are active, set to display products, and/or products and static blocks, and are sub categories of the default root category.

I also have test products, which are enabled, in stock, with quantities, visible in Catalog, Search, and are assigned to these sub categories.

The problem is, my test products (or any product!) do not show on the category page. I am using the default/default themes, and have not changed the page_layout.

I have cleared/flushed all caches, and reindexed.

However, most of my indexes appear as status 'SCHEDULED' and have never been updated - there are no checkboxes next to these, so I cannot select them to 'reindex data'.

See the screenshot.

![Magento - Index Management](https://i.stack.imgur.com/CgqVZ.jpg)

If anyone has any clues on how to fix this, I will be very happy.

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:17:25.687

在前面显示产品时需要重新索引，特别是如果您启用了平面表（管理面板 > 系统 > 配置 > 目录 > 前端：“使用平面目录类别”和“使用平面目录产品”）。

索引的情况有点奇怪。如果您在本地工作站上执行此操作，或者您可以访问主机上的 shell，您可以通过运行以下命令手动强制索引：

`pwd$ php shell/indexer.php reindexall`

如果您启用了平面表，您可以尝试禁用它们，以检查产品是否在前面可见。

您还需要对 var 和 media 文件夹及其内容赋予正确的权限。755应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:36:10.043

问题解决了。谢谢大家的回答，但以上都不是。

我错误地安装了产品功能模块。我假设在 app/code/local/... 中开发时，任何不起作用的东西都会退回到 app/code/core/...

可悲的是，情况并非如此。我的错，每个人都知道关于做出假设的短语。

Magento 的学习曲线非常陡峭！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T19:57:28.340

这真的很有趣，我最近遇到了一个类似的问题，reindex 没有完全工作。但是我没有安排显示。

请问你用的是什么版本的Enterprise？

正如 Ventus 建议的一种强制重新索引的久经考验的方法是使用 shell 脚本，为此，您需要通过 SSH 连接到您的服务器。然后使用 cd 命令（更改目录）到您的网站在文件系统上的位置。例如 cd /var/www/....

从这里运行 php shell/indexer.php reindexall

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T20:12:19.457

1.  如果您没有更改 crontab 值，则将 cron 设置为运行这将负责重新索引。

从您的屏幕上看，您似乎从未在此设置上运行过 cron。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T10:04:19.043

将此代码放入您的 magento 安装中的 .php 文件中，然后从您的 URL 运行它，这将清理并重新索引所有内容。您可以从 cron 作业中运行它。如果出现任何错误，您的数据库就会出现问题，您应该备份它，然后在新的数据库实例中重新创建它。

```
 <?php

set_time_limit(0);
require_once dirname(__FILE__) . '/app/Mage.php';

//get all stores

$websites = Mage::app()->getWebsites();
$thisstore = $websites[1]->getDefaultStore()->getCode();

echo "Store: ".$thisstore."<br/>";

//clean var dir

$dirs = array(
        'downloader/.cache/*',
        'var/cache/',
        'var/locks/',
        'var/log/',
        'var/report/',
        'var/minifycache/',
        'var/mincache/',
        'var/tmp/'
    );

    foreach($dirs as $v => $k) {
        exec('rm -rf '.$k);
    }
/*
//clean out sessions
$dirs = array('var/session/');

    foreach($dirs as $v => $k) {
        exec('rm -rf '.$k);

    }
*/  
//clean db log files
$xml = simplexml_load_file('./app/etc/local.xml', NULL, LIBXML_NOCDATA);
$db['host'] = $xml->global->resources->default_setup->connection->host;
$db['name'] = $xml->global->resources->default_setup->connection->dbname;
$db['user'] = $xml->global->resources->default_setup->connection->username;
$db['pass'] = $xml->global->resources->default_setup->connection->password;
$db['pref'] = $xml->global->resources->db->table_prefix;
global $db;

    $tables = array(
        'catalogsearch_fulltext',
        'dataflow_batch_export',
        'dataflow_batch_import',
        'log_customer',
        'log_quote',
        'log_summary',
        'log_summary_type',
        'log_url',
        'log_url_info',
        'log_visitor',
        'log_visitor_info',
        'log_visitor_online',
        'importexport_importdata',
        'core_url_rewrite',
        'report_viewed_product_index',
        'report_event',
        'core_cache',
        'core_cache_option',
        'core_cache_tag'
    );

    mysql_connect($db['host'], $db['user'], $db['pass']) or die(mysql_error());
    mysql_select_db($db['name']) or die(mysql_error());

    foreach($tables as $v => $k) {
        mysql_query('SET FOREIGN_KEY_CHECKS=0; '.'TRUNCATE `'.$db['pref'].$k.'`;'.' SET FOREIGN_KEY_CHECKS=1; ') or die(mysql_error());
    }

///---------------------------------//
// now run standard magento cleanup file

## Function to set file permissions to 0644 and folder permissions to 0755

function AllDirChmod( $dir = "./", $dirModes = 0755, $fileModes = 0644 ){
   $d = new RecursiveDirectoryIterator( $dir );
   foreach( new RecursiveIteratorIterator( $d, 1 ) as $path ){
      if( $path->isDir() ) chmod( $path, $dirModes );
      else if( is_file( $path ) ) chmod( $path, $fileModes );
  }
}

## Function to clean out the contents of specified directory

function cleandir($dir) {

    if ($handle = opendir($dir)) {
        while (false !== ($file = readdir($handle))) {
            if ($file != '.' && $file != '..' && is_file($dir.'/'.$file)) {
                if (unlink($dir.'/'.$file)) { }
                else { echo $dir . '/' . $file . ' (file) NOT deleted!<br />'; }
            }
            else if ($file != '.' && $file != '..' && is_dir($dir.'/'.$file)) {
                cleandir($dir.'/'.$file);
                if (rmdir($dir.'/'.$file)) { }
                else { echo $dir . '/' . $file . ' (directory) NOT deleted!<br />'; }
            }
        }
        closedir($handle);
    }

}

function isDirEmpty($dir){
     return (($files = @scandir($dir)) && count($files) <= 2);
}

// rebuild everything!!!
$processes = Mage::getSingleton('index/indexer')->getProcessesCollection();
$processes->walk('setMode', array(Mage_Index_Model_Process::MODE_REAL_TIME));
$processes->walk('save');

$processes->walk('reindexAll');
$processes->walk('reindexEverything');

echo "----------------------- CLEANUP START -------------------------<br/>";
$start = (float) array_sum(explode(' ',microtime()));
echo "<br/>*************** SETTING PERMISSIONS ***************<br/>";
echo "Setting all folder permissions to 755<br/>";
echo "Setting all file permissions to 644<br/>";
AllDirChmod( "." );
echo "Setting pear permissions to 550<br/>";

echo "<br/>****************** CLEARING CACHE ******************<br/>";

if (file_exists("var/cache")) {
    echo "Clearing var/cache<br/>";
    cleandir("var/cache");
}

if (file_exists("var/session")) {
    echo "Clearing var/session<br/>";
    cleandir("var/session");
}

if (file_exists("var/minifycache")) {
    echo "Clearing var/minifycache<br/>";
    cleandir("var/minifycache");
}

if (file_exists("downloader/pearlib/cache")) {
    echo "Clearing downloader/pearlib/cache<br/>";
    cleandir("downloader/pearlib/cache");
}

if (file_exists("downloader/pearlib/download")) {
    echo "Clearing downloader/pearlib/download<br/>";
    cleandir("downloader/pearlib/download");
}

if (file_exists("downloader/pearlib/pear.ini")) {
    echo "Removing downloader/pearlib/pear.ini<br/>";
    unlink ("downloader/pearlib/pear.ini");
}

if (file_exists("media/catalog/product/cache/")) {
    echo "Removing media/catalog/product/cache/<br/>";
    unlink ("media/catalog/product/cache/");
}

if (file_exists("media/tmp/")) {
    echo "Removing media/tmp/<br/>";
    unlink ("media/tmp/");
}
date_default_timezone_set("Europe/London");
echo "Start Cleaning all caches at ... " . date("Y-m-d H:i:s") . "<br/>";
ini_set("display_errors", 1);

Mage::app('admin')->setUseSessionInUrl(false);
Mage::getConfig()->init();

$types = Mage::app()->getCacheInstance()->getTypes();

try {
    echo "Cleaning data cache... <br/>";
    flush();
    foreach ($types as $type => $data) {
        echo "Removing $type ... ";
        echo Mage::app()->getCacheInstance()->clean($data["tags"]) ? "[OK]" : "[ERROR]";
        echo "<br/>";
    }
} catch (exception $e) {
    die("[ERROR:" . $e->getMessage() . "]");
}

echo "<br/>";

try {
    echo "Cleaning stored cache... ";
    flush();
    echo Mage::app()->getCacheInstance()->clean() ? "[OK]" : "[ERROR]";
    echo "<br/>";
} catch (exception $e) {
    die("[ERROR:" . $e->getMessage() . "]");
}

try {
    echo "Cleaning merged JS/CSS...";
    flush();
    Mage::getModel('core/design_package')->cleanMergedJsCss();
    Mage::dispatchEvent('clean_media_cache_after');
    echo "[OK]<br/>";
} catch (Exception $e) {
    die("[ERROR:" . $e->getMessage() . "]");
}

try {
    echo "Cleaning image cache... ";
    flush();
    echo Mage::getModel('catalog/product_image')->clearCache();
    echo "[OK]<br/>";
} catch (exception $e) {
    die("[ERROR:" . $e->getMessage() . "]");
}

echo "<br/>************** CHECKING FOR EXTENSIONS ***********<br/>";
If (!isDirEmpty("app/code/local/")) { 
    echo "-= WARNING =- Overrides or extensions exist in the app/code/local folder<br/>";
}
If (!isDirEmpty("app/code/community/")) { 
    echo "-= WARNING =- Overrides or extensions exist in the app/code/community folder<br/>";
}
$end = (float) array_sum(explode(' ',microtime()));
echo "<br/>------------------- CLEANUP COMPLETED in:". sprintf("%.4f", ($end-$start))." seconds ------------------<br/>";

//sitemap refresh
$collection = Mage::getModel('sitemap/sitemap')->getCollection();
    foreach ($collection as $sitemap) {
        try {
            $sitemap->generateXml();
        }
        catch (Exception $e) {
            $errors[] = $e->getMessage();
        }
    }

?> 
```

# dynamics-crm-2011 - CRM 2011 Homepage Grid Ribbon enable rule doesn't work

> ID：16034190
> 
> 赞同：1
> 
> 时间：2013-04-16T10:05:09.367
> 
> 标签：dynamics-crm-2011, ribbon

I have a custom button in Activity homepage grid ribbon. I have an enable rule that calls a Javascript function. This rule doesn't seem to be working - it's not calling the Javascript function, I've put an alert to verify this. When I test my javascript function by calling from a Form OnLoad, everything looks fine.

So i'm guessing that the Homepage ribbon is not loading the js library somehow ? Has anyone come across this before ? Please help.

```
<EnableRule Id="RRM.activitypointer.HomepageGrid.RunReport">
    <CustomRule Library="RRM_/Script/Common/Main.js" FuncionName="RRM.Common.enableRunReport"></CustomRule>
</EnableRule> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:57:33.217

我找到了解决方案。几件事 1\. webresource 的调用方式。将规则更改为如下所示的内容

```
<CustomRule Library="$webresource:RRM_/Script/Common/Main.js" .. > 
```

2\. 加载依赖的网络资源（因为此按钮不在表单上）。添加虚拟自定义规则来调用依赖的网络资源修复它

```
<CustomRule Library="$webresource:name" Functionname="isNAN"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:08:14.130

你有一个错字，`FunctionName`而不是`FuncionName`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-07-08T02:03:05.790

```
 <EnableRule Id="RRM.activitypointer.HomepageGrid.RunReport">
    <CustomRule Library="$webresource:name" Functionname="isNAN"/>
    <CustomRule Library="RRM_/Script/Common/Main.js" Functionname="RRM.Common.enableRunReport"></CustomRule>
    </EnableRule> 
```

# javascript - nicedit 格式未通过 jquery $.get 传递

> ID：16034195
> 
> 赞同：0
> 
> 时间：2013-04-16T10:05:24.140
> 
> 标签：javascript, jquery, ajax, nicedit

我有一个 nicedit 文本区域。当我单击一个按钮将数据发送到 jquery $.get 函数时，它不会发送格式，只是在数据的前面添加一个制表符空间。

这是表格

```
<form id="myFrm">
 <input type="hidden" id="page_ref" name="page_ref"  value="<? echo $page_ref; ?>"/>
 <input type="hidden" id="template_ref" name="template_ref" value="<? echo $template_ref; ?>"/>
 <input type="hidden" id="box_id" name="box_id"/>
 <textarea name="edit_content" id="edit_content"></textarea>
 <div class="button">Save</div>
</form> 
```

textarea #edit_content 被初始化为 nicedit 并在此处填充来自 db 的数据

```
 function get_edit_content(box_id,page_ref,template_ref)
   {
$(document).ready(function() {

  if(area1) {       
    area1.removeInstance('edit_content');
    area1 = null;
    document.getElementById("edit_content").value="";        
    }
    $.get("get_content.php", { box_id: box_id, page_ref: page_ref, template_ref:template_ref } )
  .done(function(data) {         
      document.getElementById("edit_content").value=data;          
      document.getElementById("page_ref").value=page_ref;
      document.getElementById("template_ref").value=template_ref;           
      document.getElementById("box_id").value = box_id;                  
      area1 = new nicEditor({fullPanel : true}).panelInstance("edit_content",{hasPanel : true});              
      });  
    });
   } 
```

当我点击“保存”按钮时，我调用了这个函数

```
$(document).ready(function() {  
  $('.button').click(function() {
     var edit_content = $('#myFrm').find('.nicEdit-main').text();       
     var box_id = $('#myFrm').find("#box_id").val();
     var page_ref = $('#myFrm').find("#page_ref").val();
     var template_ref = $('#myFrm').find("#template_ref").val();
     $.post("update_textarea.php",
      {
       box_id:box_id, page_ref:page_ref, template_ref:template_ref, edit_content:edit_content
      },
     function(data,status){                 
       alert(data);
       UpdateElementOfParent(box_id, page_ref, template_ref)            
       edit_box('hide')
     });
   });
  }); 
```

'alert(data)' 返回 textarea 的内容，但没有格式和内容开头的制表符空间

任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:39:59.447

如果您尝试使用 $.html() 而不是 $.text() 会怎样？

```
$(document).ready(function() {  
    $('.button').click(function() {
        var edit_content = $('#myFrm').find('.nicEdit-main').html();
        // console.log(edit_content);
        alert(edit_content);
        [...]
    });
}); 
```

# php - 在 Doctrine 2 中设置列 别名时出错

> ID：16034196
> 
> 赞同：1
> 
> 时间：2013-04-16T10:05:24.097
> 
> 标签：php, doctrine-orm

我在我的项目中使用 Doctrine 2.3.3 作为 ORM。一切都运行顺利，很好。现在我想给我的列名我自己的别名。我在学说 2 的文档中读到以下代码是提供别名的方法。

```
<?php
/**
 * @Entity(repositoryClass="Entity\Repositories\EmployeeRepository")
 * @Entity @Table(name="tbl_employee")
 */
class TblEmployee
{
    /** @Id @Column(name="employee_id",type="string",length=45) */
    public $emid;

    //getters

    public function getEmId()
    {
        return $this->emid;
    }

    //setters

    public function setEmployeeId($emid)
    {
        $this->emid = $emid;
    }

?> 
```

但是当我执行这段代码时，我得到了错误

`[Semantical Error] line 0, col 36 near 'employee_id <': Error: Class TblEmployee has no field or association named employee_id`

我该如何解决这个问题？或者为列提供别名的正确方法是什么？

# android - 在适配器类按钮单击方法中多次调用相同的 AsyncTask

> ID：16034200
> 
> 赞同：0
> 
> 时间：2013-04-16T10:05:29.853
> 
> 标签：android, android-asynctask

当我`AsyncTask`第一次打电话时，我的适配器类工作正常。但是当我第二次打电话时它不起作用。

我知道当我们想在活动类中多次调用同一个任务时，我们必须调用`new MyTask.execute()`。但是这里我在非活动类（即适配器类）中创建了我的任务，所以这里无法实例化我的任务。我该如何解决这个问题？请提供任何解决方案。

这是我的代码：

```
public AsyncTask<String,Void,Void> mytaskfavorite = new AsyncTask<String,Void,Void>() {
  protected void onPreExecute() {
    pd = new ProgressDialog(mContext);
    pd.setMessage("Loading...");
    pd.setProgressStyle(ProgressDialog.STYLE_SPINNER);
    //proDialog.setIcon(R.drawable.)
    pd.setCancelable(false);
    pd.show();
    System.out.println("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@");
  }
  @Override
  protected Void doInBackground(String...code) {
    String buscode = code[0];
    // TODO Auto-generated method stub
    addFavoriteBusinessSelection.addFavoriteBusinessBusinessSelection(buscode);
    System.out.println("##################################" + buscode);
    return null;
  }
  @Override
  protected void onPostExecute(Void res) {
    pd.dismiss();
  }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:23:14.210

> 但是这里我在非活动类（即适配器类）中创建了我的任务，所以这里无法实例化我的任务。

那不是真的。您可以从您希望的任何类启动 AsyncTask，并保证 doInBackground 将在单独的线程中执行，而其他方法在被调用线程（通常是 UI Looper 线程）中执行。

要调用它几种类型，您应该使用它创建一个新类，如下所示：

```
public Class TaskFavorite extends new AsyncTask<String,Void,Void>() {

  // You can optionally create a constructor to receiver parameters such as context
  // for example:
  private Context mContext
  public TaskFavorite(Context c){
     mContext = c;
  }

  protected void onPreExecute() {
    pd = new ProgressDialog(mContext);
    pd.setMessage("Loading...");
    pd.setProgressStyle(ProgressDialog.STYLE_SPINNER);
    //proDialog.setIcon(R.drawable.)
    pd.setCancelable(false);
    pd.show();

    // Don't use println in Android, Log. gives you a much better granular control of your logs
    System.out.println("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@");
  }
  @Override
  protected Void doInBackground(String...code) {
    String buscode = code[0];
    // TODO Auto-generated method stub
    addFavoriteBusinessSelection.addFavoriteBusinessBusinessSelection(buscode);
    System.out.println("##################################" + buscode);
    return null;
  }
  @Override
  protected void onPostExecute(Void res) {
    pd.dismiss();
  }
}; 
```

然后从你的代码（任何地方，适配器或活动，或片段，甚至你调用的循环）

```
TaskFavorite task = new TaskFavorite(getContext()); // how you get the context to pass to the constructor may vary from where you're calling it, but most adapters to have one
task.execute(... parameters...); 
```

# connection-string - ADO.NET 实体数据模型中的连接字符串

> ID：16034203
> 
> 赞同：1
> 
> 时间：2013-04-16T10:05:34.210
> 
> 标签：connection-string, app-config, ado.net-entity-data-model

我有一个 C# 控制台应用程序（比如 Project.Console），我在其中使用另一个项目的 dll（比如 Project.Data，这是一个使用 ADO.NET 实体数据模型从数据库中检索数据的类库）。

我在 Project.Data 的 App.Config 文件中添加了连接字符串。当我试图通过 dll 中的类访问 Project.Console 中的 DB 时出现错误（ArgumentException：'在配置中找不到指定的命名连接，不打算与 EntityClient 提供程序一起使用，或者无效。' ) 正在显示。

当我通过在 Project.Console 的 App.Config 文件中添加连接字符串进行测试时，它工作正常。

为什么会这样？**由于没有直接的数据库交互，是否有必要在 Project.Console 的 App.Config 文件中传递连接字符串？**

根据我的学习，它只需要在 Project.Data 的 App.Config 文件中传递连接字符串..我是对的..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:15:53.540

**连接字符串在 DLL 的 app.config 文件中正确设置。**

// 假设 connectionString 是你的 connectionString ModelEntities context=new ModelEntity(connectionString, Assembly.GetExecutingAssembly());

或像这样： 1\. 模型位于名为 Models 的文件夹中 2\. 库的名称是 ClassLibrary1 3\. EF 模型的名称是 ClassLibrary1Model 4\. connectionString 是您的 connectionString

如果您将模型放入名为 Model 的文件夹中，例如： ModelEntities context=new ModelEntity(GetConnection("ClassLibrary1", "Models", "ClassLibrary1Model", connectionString));

# eclipse - 无法从驱动程序 [null]、用户 [null] 和 URL [null] postgres 获取连接

> ID：16034208
> 
> 赞同：6
> 
> 时间：2013-04-16T10:05:39.020
> 
> 标签：eclipse, jpa-2.0, java-ee-6

早上好

我使用 Eclipse 链接和 JPA，我想测试一个小的本地查询，但我有一个错误。你能帮帮我吗，我在这个网站和其他网站上搜索过，但没有找到解决方案。谢谢你。

实体类

```
package entites;

import java.io.Serializable;
import javax.persistence.Basic;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.Table;
import javax.validation.constraints.Size;
import javax.xml.bind.annotation.XmlRootElement;

/**
 *
 * @author Minoucha
 */
@Entity
@Table(name = "protocol")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Protocol.findAll", query = "SELECT p FROM Protocol p"),
    @NamedQuery(name = "Protocol.findByProtocolid", query = "SELECT p FROM Protocol p WHERE p.protocolid = :protocolid"),
    @NamedQuery(name = "Protocol.findByProtocolname", query = "SELECT p FROM Protocol p WHERE p.protocolname = :protocolname")})
public class Protocol implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "protocolid")
    private Integer protocolid;
    @Size(max = 64)
    @Column(name = "protocolname")
    private String protocolname;

    public Protocol() {
    }

    public Protocol(Integer protocolid) {
        this.protocolid = protocolid;
    }

    public Integer getProtocolid() {
        return protocolid;
    }

    public void setProtocolid(Integer protocolid) {
        this.protocolid = protocolid;
    }

    public String getProtocolname() {
        return protocolname;
    }

    public void setProtocolname(String protocolname) {
        this.protocolname = protocolname;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (protocolid != null ? protocolid.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Protocol)) {
            return false;
        }
        Protocol other = (Protocol) object;
        if ((this.protocolid == null && other.protocolid != null) || (this.protocolid != null && !this.protocolid.equals(other.protocolid))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "entites.Protocol[ protocolid=" + protocolid + " ]";
    }

} 
```

主班

```
package main;

import java.util.Iterator;
import java.util.List;
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.EntityTransaction;
import javax.persistence.Persistence;
import javax.persistence.Query;

/**
 *
 * @author Minoucha
 */
public class Main {

        /**
         * @param args
         */
        public static void main(String[] args) {
// TODO Auto-generated method stub

            EntityManagerFactory emf = Persistence.createEntityManagerFactory("TestRestLast3PU");
            EntityManager em = emf.createEntityManager();
            try {
                EntityTransaction entr = em.getTransaction();
                entr.begin();
                Query query = em.createNativeQuery("SELECT protocolname FROM protocol");
                List stList = query.getResultList();
                Iterator stIterator = stList.iterator();
                while (stIterator.hasNext()) {
                    System.out.print("pname:" + stIterator.next());
                    System.out.println();
                }
                entr.commit();
            } finally {
                em.close();
            }
        }
    } 
```

错误 ：

```
run:
avr. 16, 2013 12:34:24 PM org.hibernate.validator.internal.util.Version <clinit>
INFO: HV000001: Hibernate Validator 4.3.0.Final
[EL Warning]: 2013-04-16 12:34:24.756--ServerSession(8630548)--PersistenceUnitInfo TestTP3RestPU has transactionType RESOURCE_LOCAL and therefore jtaDataSource will be ignored
[EL Info]: 2013-04-16 12:34:24.776--ServerSession(8630548)--EclipseLink, version: Eclipse Persistence Services - 2.3.2.v20111125-r10461
[EL Severe]: 2013-04-16 12:34:24.789--ServerSession(8630548)--Exception [EclipseLink-4021] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Exception in thread "main" javax.persistence.PersistenceException: Exception [EclipseLink-4021] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Exception Description: Unable to acquire a connection from driver [null], user [null] and URL [null].  Verify that you have set the expected driver class and URL.  Check your login, persistence.xml or sessions.xml resource.  The jdbc.driver property should be set to a class that is compatible with your database platform
Exception Description: Unable to acquire a connection from driver [null], user [null] and URL [null].  Verify that you have set the expected driver class and URL.  Check your login, persistence.xml or sessions.xml resource.  The jdbc.driver property should be set to a class that is compatible with your database platform
    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:517)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:188)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:277)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:294)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:272)
    at main.Main.main(Main.java:23)
Caused by: Exception [EclipseLink-4021] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Exception Description: Unable to acquire a connection from driver [null], user [null] and URL [null].  Verify that you have set the expected driver class and URL.  Check your login, persistence.xml or sessions.xml resource.  The jdbc.driver property should be set to a class that is compatible with your database platform
    at org.eclipse.persistence.exceptions.DatabaseException.unableToAcquireConnectionFromDriverException(DatabaseException.java:376)
    at org.eclipse.persistence.sessions.DefaultConnector.connect(DefaultConnector.java:91)
    at org.eclipse.persistence.sessions.DatasourceLogin.connectToDatasource(DatasourceLogin.java:162)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:584)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:206)
    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:488)
    ... 5 more
Java Result: 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-03-26T07:39:58.083

我得到了同样的例外。

按照[https://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html#MySQL_DBCP_Example](https://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html#MySQL_DBCP_Example)上的文档，如果您使用 JPA 的持久性单元，则缺少一个步骤。

像这样声明一个 persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.1" xmlns="http://xmlns.jcp.org/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd">
  <persistence-unit name="TestPU" transaction-type="JTA">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <jta-data-source>java:comp/env/jdbc/TestDB</jta-data-source>
    <class>com.foo.Entity</class>
  </persistence-unit>
</persistence> 
```

有两件事使它对我有用：

*   在元素`transaction-type="JTA"`的声明中添加属性。`persistence-unit`
*   预置`java:comp/env/`在数据源定义中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T14:33:04.890

这与您的本机查询不起作用无关，它与未指定 JPA/EclipseLink 如何连接到数据库有关。您的示例似乎很完整，只是您没有显示将在其中配置的 persistence.xml。在此处查看简单示例：http: [//wiki.eclipse.org/EclipseLink/Examples/JPA/OutsideContainer](http://wiki.eclipse.org/EclipseLink/Examples/JPA/OutsideContainer)

# ruby-on-rails - Rails 按字母顺序排序下拉列表

> ID：16034213
> 
> 赞同：1
> 
> 时间：2013-04-16T10:06:01.367
> 
> 标签：ruby-on-rails, ruby, sorting, user-interface, drop-down-menu

尊敬的人......

我正在使用 ransack 在我的应用程序中进行搜索...

```
<%= search_form_for @q do |f| %>

  <%= f.label :hospital_cont , "Hospital Name"%>
  <%= f.select :hospital_id_eq, options_from_collection_for_select(Hospital.all, "id",   "hospital_name", @q.hospital_id_eq) %>

<div class="form-actions">
<%= f.submit "Search", :name => nil, :class => "btn" %>
  </div>

<% end %> 
```

目前，上面的代码产生了一个医院名称的下拉框……但它是按 id 排序的……

请告诉如何使用医院名称按字母顺序对其进行排序....

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:13:37.817

代替：

```
Hospital.all 
```

和：

```
Hospital.order("hospital_name") 
```

# maven - 如何获得哈德逊的最后构建日期

> ID：16034219
> 
> 赞同：1
> 
> 时间：2013-04-16T10:06:09.880
> 
> 标签：maven, jenkins, hudson

如何从 Hudson 获取 Maven 上下文中的**最后构建日期？**我需要将该日期传递回**Maven**以生成 * *changelog* * 报告。有没有更好的方法来实现这一点？

我正在使用 Hudson 2.2.1 和 Maven 3.x

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T08:25:13.237

我不久前解决了这个问题。我想我应该在这里分享这个，因为我最初问了这个问题。您可以在 Hudson 中进行 REST 调用，它会为您提供最后一次成功的构建。rest 调用和 xpath 的混合，您将获得 YYYY-MM-DD_hh-mm-ss 格式的最后构建日期。

**Maven Antrun 任务：**

```
<loadresource property="build_start_date">
     <url url="${JOB_URL}/lastSuccessfulBuild/api/xml?xpath=/*/id/text()"/>
</loadresource> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:11:13.943

使用环境变量**BUILD_ID**获取最新构建的时间戳。您获得的时间戳将采用`YYYY-MM-DD_hh-mm-ss`格式。使用[ZenTimestamp](https://wiki.jenkins-ci.org/display/JENKINS/ZenTimestamp+Plugin)插件将其格式化为所需的格式。

或者

安装[Hudson Groovy builder](http://wiki.jenkins-ci.org/display/JENKINS/Groovy+plugin)插件并执行 groovy 脚本以获取最后的构建信息

```
myjob = hudson.model.Hudson.instance.getItem("job_name") 
lastbuild = myitem.getLastBuild() 
println lastbuild.getTime() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:26:06.543

尽管这有助于了解您到底想要实现什么，但据我所知，

你不能维护一个带有上次构建时间戳的属性文件吗？时间戳将随着每次构建而更新。

您可以从此属性文件中读取上次构建时间，并在您使用的任何 maven 插件中使用它。

您可以选择将属性文件签入回 SCM，以确保最后构建日期在所有单独的机器上反映为相同。如果您只需要在 Hudson 机器上使用此文件，则无需将此文件放入 SCM 即可。

# ruby - 使用 capybara ruby 处理 iframe

> ID：16034224
> 
> 赞同：19
> 
> 时间：2013-04-16T10:06:23.933
> 
> 标签：ruby, capybara

下面是html代码..

```
<iframe id="I0_1366100881331" frameborder="0" width="100%">
<div class="ZRa">
<span id="button" class="hAa Qo Bg" tabindex="0" role="button" title="" aria-      label="Click here to publicly +1 this." aria-pressed="false">
</div>
</iframe> 
```

在上述场景中，我想切换到 IFRAME (iframe id="I0_1366100881331") 以对该 IFRAME 中存在的 SPAN 执行一些操作。我已经尝试过大多数情况，但没有结果:(...请任何人帮忙。

我想要只使用水豚红宝石的黄瓜解决方案..

注意：我尝试使用以下代码但没有结果。

page.driver.browser.switch_to.frame “I0_1366100881331”

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-02-27T20:01:36.437

```
within_frame(find('<css rule>')) do
  <code for dealing with iframe entries>
end 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-16T10:21:48.377

我认为您可以尝试使用方法：

```
within_frame 'id' do
  <code for dealing with iframe entries>
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-23T11:08:04.023

可以有这个代码：

```
withinframe((:xpath,"//div")) do
#code
end 
```

# sql - 如何仅选择满足条件的第一行？

> ID：16034226
> 
> 赞同：7
> 
> 时间：2013-04-16T10:06:34.793
> 
> 标签：sql, oracle, select, join, group-by

我正在两个表之间进行连接并添加一个条件，希望只获得满足连接条件和“外部”条件的第一行。

例如这个查询：

```
select * from PRMPROFILE p, user v
where 
p.id = v.profile
and p.language = 0
and v.userid like '%TEST%'; 
```

首先，我想知道如何*使用配置文件（v.profile 或 p.id）对这个内部连接的结果进行分组*。之后如何只显示每个组的第一次出现。

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-16T10:32:30.333

您可以为此使用分析查询：

```
select *
from (
    select p.*, v.*,
        row_number() over (partition by p.id order by v.userid) as rn
    from prmprofile p
    join user v on v.profile = p.id
    where p.language = 0
    and v.userid like '%TEST%'
)
where rn = 1; 
```

内部查询获取所有数据（但使用`*`并不理想），并添加一个额外的列，为每个`p.id`值分配一个行号序列。它们必须按某些东西排序，而且您还没有说是什么使特定行“首先”，所以我猜是用户 ID - 您当然可以将其更改为更合适的东西，这样会在重新运行查询。（您可以查看`rank`并`dense_rank`寻找替代方法来选择“第一”行）。

外部查询只是将结果集限制为额外列具有值的那些`1`，这将为您提供每一行`p.id`。

另一种方法是使用子查询来识别“第一”行并加入该行，但尚不清楚标准是什么以及它是否具有足够的选择性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T10:12:48.873

请试试：

```
select * from(
  select *, 
    row_number() over (partition by v.userid order by v.userid) RNum
  from PRMPROFILE p, user v
  where 
  p.id = v.profile
  and p.language = 0
  and v.userid like '%TEST%'
  )x 
where RNum=1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T10:38:11.487

您可以使用 LIMIT 关键字。

```
select * from PRMPROFILE p, user v
where 
p.id = v.profile
and p.language = 0
and v.userid like '%TEST%'
limit 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-10T21:32:28.153

```
select * from PRMPROFILE p, user v
where p.id = v.profile and p.language = 0
and v.userid like '%TEST%'
fetch first 1 row only 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T10:10:05.550

它只会显示最上面的结果

```
select top 1 * from PRMPROFILE p, user v
where 
    p.id = v.profile
    and p.language = 0
    and v.userid like '%TEST%'; 
```

# command-line - 使用 devenv 将预处理器变量传递给英特尔 Fortran 编译器

> ID：16034227
> 
> 赞同：1
> 
> 时间：2013-04-16T10:06:38.930
> 
> 标签：command-line, fortran, preprocessor, devenv, intel-fortran

我将 VS 2008 与 Intel(R) Fortran 编译器版本 10.1.025 一起使用。

为了构建我的解决方案，我使用了一个具有以下语法的批处理文件：

devenv /rebuild "Release|Win32" "c:...\solution.sln" /Project "ProjectName_InTheSolution"

使用配置“Release|Win32”，我在 VS ProjectProperties->Fortran->Proprocessor->Preprocessor Definitions 中指定值“test”。

在我的代码中，我正在测试是否定义了“测试”变量，哪个工作正常。

任何人都知道使用命令行更改 fortran 编译器的“预处理器定义”的任何方法吗？我还想在“预处理器定义”中添加值“commandLine”，因此将是“test;commandline”。

一些注意事项：

```
1) I have to use the devenv.exe
2) I don't want to change neither the source code or the project file prior the compilation
3) I can use environment variable to pass option (if there is any way, I try the CL but didn't work) 
```

提前致谢

* * *

感谢您的回答，但也许我不完全理解您的解决方案，但这是我尝试过的：

1）我将“附加选项”（AO）更改为 /Dtest 并且： 1.1）如果我从 Visual Studio 或命令行编译，则检查“！DEC$ IF DEFINED (test)”为真

2）我将 AO 更改为“$（DEFINE）”并且： 2.1）从 Visual Studio 我看到警告：“命令行警告 #10161：无法识别的源类型 '$（DEFINE）'；目标文件假定为 ifort”和检查“ !DEC$ IF DEFINED (test)" 为假 2.2) 我将定义变量添加到“用户环境变量”，与 2.1 相同的错误

3) 我将 AO 更改为 "/D$(DEFINE)" 我收到一个错误 "Bad syntax, '=' expected while processing '@$(define)' fortcom"

4）我将AO更改为“$（DEFINE）”并SET DEFINE = / test，也没有工作，“！DEC $ IF DEFINED（test）”为假

@cup 我想我需要更好地了解您的解决方案，如果您能给我提供有关您的解决方案的其他信息，将不胜感激。

我想要做的是：

```
program main
integer:: ii
!DEC$ IF DEFINED (test) 
ii = 72
!DEC$ ENDIF
!DEC$ IF DEFINED (test2) 
ii = 80
!DEC$ ENDIF
print *, "this is up to column ", ii
end 
```

现在我想从命令行控制将编译哪部分代码，执行如下操作：

```
1) from the command line:  set define=test
2) devenv elephant.sln /build
3) run debug/elephant.exe  -> get "72"

4) from the command line:  set define=test2
5) devenv elephant.sln /build
6) run debug/elephant.exe  -> get "80" 
```

这个有可能 ？预先感谢，瑞

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:53:50.470

试试这个

1）创建如下F77程序

```
 program main
      integer:: ii
!                                                                       ,-- column 73
      ii = 72                                                           +8
      print *, "this is up to column ", ii
      end 
```

2) 为上述程序创建一个解决方案，比如大象.sln

如果您只是构建并运行，它应该显示“this is up to column 72”

3) 弹出项目属性，在 Fortran/Command Line 下，在 Additional Options Box 中添加 $(DEFINES)。

4) 保存并退出

5) 设置 DEFINES=/extend_source:72

6) devenv 大象.sln /build

7) 运行 debug/elephant.exe - 你应该得到 72

8) 设置 DEFINES=/extend_source:80

9) devenv 大象.sln /build

10) 运行 debug/elephant.exe - 你应该得到 80。

11) 如果您想添加更多 /D 选项，请将其粘贴在 DEFINES 环境变量中。

基本上不要使用预处理器定义 - 只需将您的设置转储到 DEFINES 环境变量中，它就会被附加选项拾取。

# android - 图像为空时如何清除空白空间？

> ID：16034229
> 
> 赞同：0
> 
> 时间：2013-04-16T10:06:42.667
> 
> 标签：android, imageview

我是android域的新手。

我的问题是..我在图像视图中有一个空白空间。我从数据库中检索图像作为字符串并存储在数组中并显示。当我在字符串中得到 null 时，我不应该得到一个空白空间。

如何清除这个？任何人帮助我..提前非常感谢...

我试试这样...

> ```
>  String pic = imgarr.get(g);
>         System.out.println("picture:"+pic);
>         if (pic != null && !pic.equals("")) {
>             ImageView ImageView = (ImageView) findViewById(R.id.image);
>             ImageView.setVisibility(View.GONE);
>         }else{
>         try {
>               ImageView im = (ImageView)findViewById(R.id.image);
>               Bitmap bitmap = BitmapFactory.decodeStream((InputStream)new URL("http://11.0.0.2/htss/kumar/image/"+pic).getContent());
>               im.setImageBitmap(bitmap); 
>             } catch (MalformedURLException e) {
>               e.printStackTrace();
>             } 
>         } 
> ```

XML

> ```
>  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
>           xmlns:tools="http://schemas.android.com/tools"
>            android:layout_width="fill_parent"
>            android:layout_height="fill_parent"
>             tools:context=".Quesans" >
>         <ScrollView 
> android:layout_width="fill_parent"
> android:layout_height="3500dip"
> android:scrollbars="vertical"
> 
>  <RelativeLayout
> android:layout_width="fill_parent"
> android:layout_height="fill_parent">
>  <RadioGroup
>  android:id="@+id/rdgroup"
>  android:layout_width="fill_parent"
>  android:layout_height="wrap_content"
>  android:layout_alignParentLeft="true"
>  android:layout_below="@+id/que_txt"
>  android:layout_marginTop="300dp"
>  android:orientation="vertical" >
>  <RadioButton android:id="@+id/RB1" android:text=""/>
>  <RadioButton android:id="@+id/RB2" android:text=""/>
>  <RadioButton android:id="@+id/RB3" android:text=""/>
>  <RadioButton android:id="@+id/RB4" android:text=""/>
> </RadioGroup>
> <ImageView
>  android:id="@+id/nxt_btn"
>  android:layout_width="wrap_content"
>  android:layout_height="wrap_content"
>  android:layout_alignParentRight="true"
>  android:layout_below="@+id/rdtxt"
>  android:layout_marginRight="22dp"
>  android:layout_marginTop="30dp"
>  android:src="@drawable/next_normal" />
> <TextView
>  android:id="@+id/rdtxt"
>  android:layout_width="fill_parent"
>  android:layout_height="wrap_content"
>  android:layout_alignParentLeft="true"
>  android:layout_below="@+id/rdgroup"
>  android:layout_marginTop="17dp"
>  android:text="Nothing is picked" 
>  android:textColor="#0000FF"/>
>  <ImageView
>  android:id="@+id/focusarea"
>  android:layout_width="wrap_content"
>  android:layout_height="wrap_content"
>  android:layout_alignRight="@+id/nxt_btn"
>  android:layout_below="@+id/nxt_btn"
>  android:layout_marginRight="1dp"
>  android:layout_marginTop="10dp"
>  android:src="@drawable/focus_normal" />
>  <TextView
>  android:id="@+id/que_txt"
>  android:layout_width="wrap_content"
>  android:layout_height="wrap_content"
>  android:layout_alignParentLeft="true"
>  android:layout_alignParentTop="true"
>  android:layout_marginLeft="10dp"
>  android:layout_marginTop="25dp"
>  android:text="TextView" />
>  <ImageView
>  android:id="@+id/app"
>  android:layout_width="wrap_content"
>  android:layout_height="wrap_content"
>   android:layout_alignParentLeft="true"
>   android:layout_alignParentBottom="true"
>    android:layout_marginLeft="140dp"
>   android:layout_marginBottom="0dp"
>  android:src="@drawable/newapps" />
> <ImageView
>  android:id="@+id/image"
>  android:layout_width="fill_parent"
>  android:layout_height="wrap_content"
>  android:layout_alignLeft="@+id/que_txt"
>  android:layout_below="@+id/que_txt"
>  android:layout_marginTop="150dp" />
> <TextView
>  android:id="@+id/soltxt"
>  android:layout_width="wrap_content"
>  android:layout_height="wrap_content"
>  android:layout_alignLeft="@+id/prv_btn"
>  android:layout_alignTop="@+id/focusarea"
>  android:layout_marginLeft="23dp"
>  android:text="" />
>  <ImageView
>  android:id="@+id/prv_btn"
>  android:layout_width="wrap_content"
>  android:layout_height="wrap_content"
>  android:layout_alignLeft="@+id/image"
>  android:layout_alignTop="@+id/nxt_btn"
>  android:src="@drawable/previous_normal" />
>  </RelativeLayout>
>  </ScrollView>
>  </RelativeLayout> 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:04:02.503

试试这个，

```
if(imgarr.get(g)!=null)
{
    String pic = imgarr.get(g).toString().trim();
    System.out.println("picture:"+pic);
ImageView imageView = (ImageView) findViewById(R.id.image);
        if (pic.equalsIgnoreCase(""))
        {
                    imageView .setVisibility(View.GONE);
                }else{
                try {
                      Bitmap bitmap = BitmapFactory.decodeStream((InputStream)new URL("http://10.0.2.2/moodle/practice/question/images/"+pic).getContent());
                      imageView.setImageBitmap(bitmap); 
                    } catch (MalformedURLException e) {
                      e.printStackTrace();
                    } 
                } 
    } 
```

**已编辑**

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView 
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
tools:context=".Quesans">
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <TextView
             android:id="@+id/que_txt"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_alignParentLeft="true"
             android:layout_alignParentTop="true"
             android:layout_marginLeft="10dp"
             android:layout_marginTop="25dp"
             android:text="TextView" />
        <ImageView
             android:id="@+id/image"
             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
             android:layout_alignLeft="@+id/que_txt"
             android:layout_marginTop="15dp"
             android:layout_marginBottom="10dp"
             android:layout_below="@+id/que_txt"/>
         <RadioGroup
             android:id="@+id/rdgroup"
             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
             android:layout_alignParentLeft="true"
             android:layout_below="@+id/image"
             android:orientation="vertical" >
         <RadioButton 
             android:id="@+id/RB1" 
             android:text=""/>
         <RadioButton 
             android:id="@+id/RB2" 
             android:text=""/>
         <RadioButton 
             android:id="@+id/RB3" 
             android:text=""/>
         <RadioButton 
             android:id="@+id/RB4" 
             android:text=""/>
        </RadioGroup>
        <TextView
             android:id="@+id/rdtxt"
             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
             android:layout_alignParentLeft="true"
             android:layout_below="@+id/rdgroup"
             android:layout_marginTop="17dp"
             android:text="Nothing is picked" 
             android:textColor="#0000FF"/>
        <ImageView
             android:id="@+id/nxt_btn"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_alignParentRight="true"
             android:layout_below="@+id/rdtxt"
             android:layout_marginRight="22dp"
             android:layout_marginTop="30dp"
             android:src="@drawable/next_normal" />
         <ImageView
             android:id="@+id/focusarea"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_alignRight="@+id/nxt_btn"
             android:layout_below="@+id/nxt_btn"
             android:layout_marginRight="1dp"
             android:layout_marginTop="10dp"
             android:src="@drawable/focus_normal" />
         <ImageView
             android:id="@+id/app"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_alignParentLeft="true"
             android:layout_alignParentBottom="true"
             android:layout_marginLeft="140dp"
             android:layout_marginBottom="0dp"
             android:src="@drawable/newapps" />
        <TextView
             android:id="@+id/soltxt"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_alignLeft="@+id/prv_btn"
             android:layout_alignTop="@+id/focusarea"
             android:layout_marginLeft="23dp"
             android:text="" />
         <ImageView
             android:id="@+id/prv_btn"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_alignLeft="@+id/image"
             android:layout_alignTop="@+id/nxt_btn"
             android:src="@drawable/previous_normal" />
     </RelativeLayout>
 </ScrollView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:15:12.097

只需删除！从您的代码中

```
if (pic == null && pic.equals("")) { 
```

# perl - Perl LWP::UserAgent - 内容类型：应用程序/pdf

> ID：16034231
> 
> 赞同：1
> 
> 时间：2013-04-16T10:06:44.073
> 
> 标签：perl, mechanize

问题是：我需要 WWW::Mechanize 从网页下载一些 PDF。

编辑：一段时间后，我重新编写了代码。我使用 LWP::UserAgent 而不是 WWWW::Mechanize。这是一个MWE：

```
#!/usr/bin/env perl

use strict;
use warnings;

use Carp;

use LWP::UserAgent;
use HTTP::Cookies;
use HTML::Form;
use HTTP::Request::Common;
use HTTP::Request::Form;
use Data::Printer;

my $login      = 'https://www.wissenschaft-online.de/template/d_meinkonto_controller';
my $cookie_jar = HTTP::Cookies->new();
my $ua         = LWP::UserAgent->new;

$ua->cookie_jar($cookie_jar);
push @{ $ua->requests_redirectable }, 'POST';

my $response = $ua->get($login);
my @forms = HTML::Form->parse($response);

$forms[1]->method( q{POST} );

$forms[1]->param(q{user},q{XXX-USER});
$forms[1]->param(q{pass},q{PASSWD});

my $request = $forms[1]->click;
$response   = $ua->request($request);

p $response; # print 1

$cookie_jar->extract_cookies( $response );
print $cookie_jar->as_string; # print 2

$response  = $ua->get('http://www.spektrum.de/alias/pdf/sdw-2013-5-ges-pdf/1190244',   ':content_file' => 'SDW.pdf');

p $response; # print 3 
```

因此，打印 1 - 凭据提交的响应：

```
HTTP::Response  {
    Parents       HTTP::Message
    public methods (22) : as_string, base, clone, code, current_age, dump, error_as_HTML, filename, freshness_lifetime, fresh_until, is_error, is_fresh, is_info, is_redirect, is_success, message, new, parse, previous, redirects, request, status_line
    private methods (0)
    internals: {
        _content    "<!DOCTYPE html>
<!--[if lt IE 7 ]> <html lang="de" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="de" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="de" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="de" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="de" class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta http-equiv="refresh" content="3; URL=http://www.spektrum.de/template/d_meinkonto_controller?wo=1">  <script src="/js_css/s2/prototype.js"></script><script src="http://www.epoc.de/template/d_sys_logincheck?i=e4328159435cbb952edb540e0ccdd40a&p=a007d48c26707db202ec4e6115c04464&k=V086cGFscGF0aW5l&y=97a7db42c674d3288c1ffb27e362832c"></script>
<script src="http://www.spektrum.de/template/d_sys_logincheck?i=e4328159435cbb952edb540e0ccdd40a&p=a007d48c26707db202ec4e6115c04464&k=V086cGFscGF0aW5l&y=97a7db42c674d3288c1ffb27e362832c"></script>
<script src="http://www.spektrum.com/template/d_sys_logincheck?i=e4328159435cbb952edb540e0ccdd40a&p=a007d48c26707db202ec4e6115c04464&k=V086cGFscGF0aW5l&y=97a7db42c674d3288c1ffb27e362832c"></script>
<script src="http://www.spektrumverlag.de/template/d_sys_logincheck?i=e4328159435cbb952edb540e0ccdd40a&p=a007d48c26707db202ec4e6115c04464&k=V086cGFscGF0aW5l&y=97a7db42c674d3288c1ffb27e362832c"></script>
<script src="http://www.spektrum-neo.de/template/d_sys_logincheck?i=e4328159435cbb952edb540e0ccdd40a&p=a007d48c26707db202ec4e6115c04464&k=V086cGFscGF0aW5l&y=97a7db42c674d3288c1ffb27e362832c"></script>
<script src="http://www.gehirn-und-geist.de/template/d_sys_logincheck?i=e4328159435cbb952edb540e0ccdd40a&p=a007d48c26707db202ec4e6115c04464&k=V086cGFscGF0aW5l&y=97a7db42c674d3288c1ffb27e362832c"></script>
<script src="http://www.astronomie-heute.de/template/d_sys_logincheck?i=e4328159435cbb952edb540e0ccdd40a&p=a007d48c26707db202ec4e6115c04464&k=V086cGFscGF0aW5l&y=97a7db42c674d3288c1ffb27e362832c"></script>
<script src="http://www.spektrumdirekt.de/template/d_sys_logincheck?i=e4328159435cbb952edb540e0ccdd40a&p=a007d48c26707db202ec4e6115c04464&k=V086cGFscGF0aW5l&y=97a7db42c674d3288c1ffb27e362832c"></script>
<script src="http://www.sterne-und-weltraum.de/template/d_sys_logincheck?i=e4328159435cbb952edb540e0ccdd40a&p=a007d48c26707db202ec4e6115c04464&k=V086cGFscGF0aW5l&y=97a7db42c674d3288c1ffb27e362832c"></script>
<script src="http://www.wissenschaft-online.de/template/d_sys_logincheck?i=e4328159435cbb952edb540e0ccdd40a&p=a007d48c26707db202ec4e6115c04464&k=V086cGFscGF0aW5l&y=97a7db42c674d3288c1ffb27e362832c"></script>
    <style type="text/css">
        html, body {
            font-family: Verdana,Helvetica,Arial,sans-serif;
        }
</style>
</head>
<body id="index" class="home">
    Einen Moment bitte, Sie werden am System von Spektrum der Wissenschaft angemeldet.      Sollten Sie nicht in einigen Augenblicken weitergeleitet werden, klicken Sie bitte <a href="http://www.spektrum.de/template/d_meinkonto_controller?wo=1">hier</a>.
        <iframe src="http://www.epoc.de/template/d_sys_logincheck?i=e4328159435cbb952edb540e0ccdd40a&p=a007d48c26707db202ec4e6115c04464&k=V086cGFscGF0aW5l&y=97a7db42c674d3288c1ffb27e362832c" width="1" height="1" scrolling="no" marginheight="0" marginwidth="0" frameborder="0"></iframe>
<iframe src="http://www.spektrum.de/template/d_sys_logincheck?i=e4328159435cbb952edb540e0ccdd40a&p=a007d48c26707db202ec4e6115c04464&k=V086cGFscGF0aW5l&y=97a7db42c674d3288c1ffb27e362832c" width="1" height="1" scrolling="no" marginheight="0" marginwidth="0" frameborder="0"></iframe>
<iframe src="http://www.spektrum.com/template/d_sys_logincheck?i=e4328159435cbb952edb540e0ccdd40a&p=a007d48c26707db202ec4e6115c04464&k=V086cGFscGF0aW5l&y=97a7db42c674d3288c1ffb27e362832c" width="1" height="1" scrolling="no" marginheight="0" marginwidth="0" frameborder="0"></iframe>
<iframe src="http://www.spektrumverlag.de/template/d_sys_logincheck?i=e4328159435cbb952edb540e0ccdd40a&p=a007d48c26707db202ec4e6115c04464&k=V086cGFscGF0aW5l&y=97a7db42c674d3288c1ffb27e362832c" width="1" height="1" scrolling="no" marginheight="0" marginwidth="0" frameborder="0"></iframe>
<iframe src="http://www.spektrum-neo.de/template/d_sys_logincheck?i=e4328159435cbb952edb540e0ccdd40a&p=a007d48c26707db202ec4e6115c04464&k=V086cGFscGF0aW5l&y=97a7db42c674d3288c1ffb27e362832c" width="1" height="1" scrolling="no" marginheight="0" marginwidth="0" frameborder="0"></iframe>
<iframe src="http://www.gehirn-und-geist.de/template/d_sys_logincheck?i=e4328159435cbb952edb540e0ccdd40a&p=a007d48c26707db202ec4e6115c04464&k=V086cGFscGF0aW5l&y=97a7db42c674d3288c1ffb27e362832c" width="1" height="1" scrolling="no" marginheight="0" marginwidth="0" frameborder="0"></iframe>
<iframe src="http://www.astronomie-heute.de/template/d_sys_logincheck?i=e4328159435cbb952edb540e0ccdd40a&p=a007d48c26707db202ec4e6115c04464&k=V086cGFscGF0aW5l&y=97a7db42c674d3288c1ffb27e362832c" width="1" height="1" scrolling="no" marginheight="0" marginwidth="0" frameborder="0"></iframe>
<iframe src="http://www.spektrumdirekt.de/template/d_sys_logincheck?i=e4328159435cbb952edb540e0ccdd40a&p=a007d48c26707db202ec4e6115c04464&k=V086cGFscGF0aW5l&y=97a7db42c674d3288c1ffb27e362832c" width="1" height="1" scrolling="no" marginheight="0" marginwidth="0" frameborder="0"></iframe>
<iframe src="http://www.sterne-und-weltraum.de/template/d_sys_logincheck?i=e4328159435cbb952edb540e0ccdd40a&p=a007d48c26707db202ec4e6115c04464&k=V086cGFscGF0aW5l&y=97a7db42c674d3288c1ffb27e362832c" width="1" height="1" scrolling="no" marginheight="0" marginwidth="0" frameborder="0"></iframe>
<iframe src="http://www.wissenschaft-online.de/template/d_sys_logincheck?i=e4328159435cbb952edb540e0ccdd40a&p=a007d48c26707db202ec4e6115c04464&k=V086cGFscGF0aW5l&y=97a7db42c674d3288c1ffb27e362832c" width="1" height="1" scrolling="no" marginheight="0" marginwidth="0" frameborder="0"></iframe>
        <script type="text/javascript"><!--
        function reload(){
            window.location.href="http://www.spektrum.de/template/d_meinkonto_controller?wo=1";
        }
        document.observe('dom:loaded',function(){
            window.setTimeout("reload()", 3000);
        }); -->
        </script>
    </body>
</html>",
        _headers    HTTP::Headers,
        _msg        "OK",
        _previous   HTTP::Response,
        _protocol   "HTTP/1.1",
        _rc         200,
        _request    HTTP::Request
    }
} 
```

打印 2 - cookie 检查：

```
Set-Cookie3: PHPSESSID=a007d48c26707db202ec4e6115c04464; path="/"; domain=www.wissenschaft-online.de; path_spec; discard; version=0
Set-Cookie3: SIX_prefix=0; path="/"; domain=www.wissenschaft-online.de; path_spec; discard; version=0
Set-Cookie3: SIX_pwd=e4328159435cbb952edb540e0ccdd40a; path="/"; domain=www.wissenschaft-online.de; path_spec; discard; version=0
Set-Cookie3: SIX_uid=WO%3Axxx-USER; path="/"; domain=www.wissenschaft-online.de; path_spec; discard; version=0
Set-Cookie3: mobile=aus; path="/"; domain=www.wissenschaft-online.de; path_spec; expires="2013-10-09 06:14:30Z"; version=0 
```

打印 3 - 请求下载 PDF 文件：

```
HTTP::Response  {
    Parents       HTTP::Message
    public methods (22) : as_string, base, clone, code, current_age, dump, error_as_HTML, filename, freshness_lifetime, fresh_until, is_error, is_fresh, is_info, is_redirect, is_success, message, new, parse, previous, redirects, request, status_line
    private methods (0)
    internals: {
        _content    "",
        handlers    {
            response_done   [
                [0] {
                    callback   sub { ... }
                }
            ]
        },
        _headers    HTTP::Headers,
        _msg        "OK",
        _protocol   "HTTP/1.1",
        _rc         200,
        _request    HTTP::Request
    }
} 
```

结果文件 - 'SDW.pdf' - 包含以下内容：

```
<!DOCTYPE html>
<!-- d_sdwv_html_head -->
<!--[if lt IE 7 ]> <html lang="de" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="de" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="de" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="de" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="de" class="no-js"> <!--<![endif]-->
<head prefix="og: http://ogp.me/ns#">
                    <title>PDF-Download - Login - Spektrum der Wissenschaft</title>
    <link rel="shortcut icon" href="/pix/sdwv/favicon_sdw.ico" />
<link rel="apple-touch-icon-precomposed" href="/pix/sdwv/touch-icon-sdw.png" />                         <link rel="canonical" href="http://www.spektrum.de/alias/pdf/sdw-2013-5-ges-pdf/1190244" />                                         <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
<meta name="language" content="de" />
<meta name="description" content="SdW_2013_5_ges (pdf)" />
<meta name="robots" content="noindex" />
<meta name="id" content="cms-864-1190244" />
<meta name="produkt" content="cms-864" />
<meta name="titel" content="PDF-Download - Login - Spektrum der Wissenschaft" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@spektrum" />
<meta property="og:title" content="PDF-Download - Login - Spektrum der Wissenschaft" />
<meta property="og:type" content="article" />
<meta property="og:description" content="SdW_2013_5_ges (pdf)" />
<meta property="og:url" content="http://www.spektrum.de/alias/pdf/sdw-2013-5-ges-pdf/1190244" />
<meta name="apple-itunes-app" content="app-id=545968608" />
<meta name="datum" content="04.04.2013" />

<link rel="alternate" type="application/rss+xml" title="Spektrum.de RSS-Feed" href="/alias/rss/spektrum-de-rss-feed/996406">

<link rel="alternate" type="application/rss+xml" title="Pressemitteilungen" href="/alias/rss/pressemitteilungen/995265">

<link rel="alternate" type="application/rss+xml" title="Gehirn und Geist RSS-Feed" href="/alias/rss/gehirn-und-geist-rss-feed/982626">

<link rel="alternate" type="application/rss+xml" title="Spektrum der Wissenschaft RSS-Feed" href="/alias/rss/spektrum-der-wissenschaft-rss-feed/982623">

<link rel="alternate" type="application/rss+xml" title="Sterne und Weltraum RSS-Feed" href="/alias/rss/sterne-und-weltraum-rss-feed/865248">

<link rel="alternate" type="application/rss+xml" title="Spektrum neo RSS-Feed" href="/alias/rss/spektrum-neo-rss-feed/1193335">
    <link rel="stylesheet" href="/template/d_sdwv_css_wrapper" />
    <link rel="stylesheet" href="/js_css/s2/smoothness/jquery-ui-1.9.1.custom.css" />
    <link rel="stylesheet" href="/js_css/mediaelementjs/mediaelementplayer.min.css" />
    <link rel="stylesheet" href="/js_css/mediaelementjs/mejs-skins.css" />
    <script src="/js_css/modernizr/modernizr.js"></script>
    <script src="/js_css/s2/prototype.js"></script>
    <script src="/js_css/s2/s2.js"></script>
    <script src="/js_css/jquery/jquery-1.6.4.min.js"></script>
    <script src="/js_css/s2/event.simulate.js"></script>
    <script type="text/javascript">jQuery.noConflict();</script>
    <script type="text/javascript" src="/js_css/socialshareprivacy/jquery.socialshareprivacy.min.js"></script>
    <script src="/js_css/jquery/jquery.imagesloaded.min.js"></script>
    <script src="/js_css/mediaelementjs/mediaelement-and-player.min.js"></script>
    <script src='/template/d_js_vgwort_datei.js'></script>
    <script src="/js_css/jquery/fancybox/jquery.fancybox-1.3.4.pack.js"></script>
    <link rel="stylesheet" hr 
```

抱歉耽搁了，感谢您的帮助！

# objective-c - JSON 通过 NSMutableURLRequest 发送到 APS.NET MVC 控制器时被截断

> ID：16034248
> 
> 赞同：1
> 
> 时间：2013-04-16T10:07:45.183
> 
> 标签：objective-c, asp.net-mvc, json, nsurlconnection, nsurlrequest

我正在objective-c 中构建一个JSON 帖子并将其发送到一个ASP.NET MVC 控制器。

我正在构建 NSMutableURLRequest 如下：

```
 request = [[NSMutableURLRequest alloc] initWithURL:url];

    NSString* jsonRequest = [NSString stringWithFormat: @"{\"collection\":\"images\",\"id\":\"%@\",\"objectjson\":%@}",response.id,response.json];

    NSData *requestData = [NSData dataWithBytes:[jsonRequest UTF8String] length:[jsonRequest length]];

    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [request setValue:[NSString stringWithFormat:@"%d", [requestData length]] forHTTPHeaderField:@"Content-Length"];
    [request setHTTPBody: requestData]; 
```

然后我发送请求如下：

```
 NSOperationQueue *backgroundQueue = [[NSOperationQueue alloc] init];

        [NSURLConnection sendAsynchronousRequest:request queue:backgroundQueue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)
        { ... completion code goes here 
```

这在大多数情况下都很有效。但是，对于非常大的 JSON 字符串，我偶尔会收到一个 Web 服务错误，其中 Web 服务报告它在 JSON 中遇到文件结束标记。似乎 JSON 被截断了。

我将 JSON 发送到 ASP.NET MVC 控制器。

有没有人对可能发生的事情有任何智慧之言？是否有任何 ASP.NET Web 配置设置可能我需要调整以防止发生此问题。

我不明白的一件事是为什么它是一个间歇性的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-17T15:48:26.297

这似乎是通过 3G 或 EDGE 连接丢失字节的结果。我能想出的最好办法是在服务器上检测内容长度标头大于请求 POST 正文，并返回一个状态代码，告诉客户端重试。客户端可以在 url 上传递一个重试计数，服务器可以读取它，如果它是某个值，服务器将返回一个错误代码，指示不应尝试重试。丑我知道，但我想不出更好的方法。这就是我要为我的照片上传应用程序做的事情。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T19:44:48.617

问题在于转换为 NSData

尝试这个

```
NSData *requestData = [jsonRequest dataUsingEncoding:NSUTF8StringEncoding]; 
```

# java - 在创建 Web 服务客户端时接收“未处理的 'mustUnderstand' 标头元素”

> ID：16034251
> 
> 赞同：0
> 
> 时间：2013-04-16T10:08:00.360
> 
> 标签：java, web-services, resteasy, webservice-client, webservices-client

我正在开发一个 Web 服务客户端。

```
Unprocessed 'mustUnderstand' header element: {http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd}Security 
```

无论它在哪里与 SoapUI 一起正常工作，都会返回带有以下标头的正确响应：

```
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema">
   <S:Header>
      <wsse:Security S:mustUnderstand="1">
         <wsu:Timestamp wsu:Id="XWSSGID-13660988101781895308327" xmlns:ns15="http://schemas.xmlsoap.org/ws/2006/02/addressingidentity" xmlns:ns14="http://docs.oasis-open.org/ws-sx/ws-secureconversation/200512" xmlns:ns13="http://www.w3.org/2003/05/soap-envelope">
            <wsu:Created>2013-04-16T08:02:05Z</wsu:Created>
            <wsu:Expires>2013-04-16T08:07:05Z</wsu:Expires>
         </wsu:Timestamp>
      </wsse:Security>
   </S:Header> 
```

我不能使用 wsHttpBinding。我的要求是：

```
<env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/">
   <env:Header>
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>wstest</wsse:Username>
            <wsse:Password>wstest</wsse:Password>
         </wsse:UsernameToken>
      </wsse:Security>
   </env:Header>
   <env:Body>
     <-- client method call implementation>
   </env:Body>
</env:Envelope> 
```

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:03:23.760

在 getHeaders() 方法中，您需要返回一个包含根元素的 XML 元素。在这种情况下，我将使用以下实例化构建一个 QName 元素并添加到 Set 并在 getHeaders 元素中返回它：

```
@Override
public Set<QName> getHeaders(){
Set<QName> headers = new HashSet<QName>();
QName ck = new QName("http://coldyak.com", "coldyak", "cyk");
headers.add(ck);
return headers;
} 
```

这就是处理 mustunderstand 属性所需的全部内容。它有点像强制 web 服务处理 header 元素的合同。

# postgresql - 如何使用外连接删除行

> ID：16034253
> 
> 赞同：11
> 
> 时间：2013-04-16T10:08:04.047
> 
> 标签：postgresql, left-join, using

我在从 PostgreSQL 表中删除记录时遇到问题，使用`LEFT JOIN`.

我想删除通过以下查询获得的行：

```
SELECT * FROM url 
LEFT JOIN link_type ON url.link_type = link_type.id 
WHERE link_type.id IS NULL 
```

为此，这就是我所做的：

```
 DELETE FROM url
 USING link_type
 WHERE url.link_type = link_type.id  AND link_type.id IS NULL 
```

查询有效，但不会删除任何内容，尽管这正是文档中解释的内容：[http](http://www.postgresql.org/docs/current/static/sql-delete.html) ://www.postgresql.org/docs/current/static/sql-delete.html 。

我的问题是由于`IS NULL`查询还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-16T15:28:44.073

干得好，太阳。次要建议：使用 EXISTS/NOT EXISTS 时，您不需要`SELECT *`. 一个常见的约定（[docs](http://www.postgresql.org/docs/current/interactive/functions-subquery.html#FUNCTIONS-SUBQUERY-EXISTS)）是这样写`SELECT 1`的：

```
DELETE FROM url WHERE NOT EXISTS (
  SELECT 1 FROM link_type WHERE url.link_type = link_type.id 
); 
```

从功能上讲，这两种方式都有效。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-16T10:34:30.480

仍然不明白为什么我以前的查询不起作用（如果有人可以解释，那就太好了），但这是我的诀窍：

```
DELETE FROM url WHERE NOT EXISTS (SELECT * FROM link_type WHERE url.link_type = link_type.id ); 
```

# jasper-reports - 不显示矩形边框

> ID：16034258
> 
> 赞同：3
> 
> 时间：2013-04-16T10:08:20.747
> 
> 标签：jasper-reports

我有一个要求，我需要显示一段被边框包围的数据，如下所示：

[![在此处输入图像描述](https://i.stack.imgur.com/A0yrF.jpg)](https://i.stack.imgur.com/A0yrF.jpg)

我试图通过在背景带中添加矩形组件来做到这一点。在内部预览窗口和PDF预览中显示如上，但是当我在服务器中运行它或使用HTML预览时，边框消失了。我还尝试在 Detail 带中插入 Rectangle 组件，并使用 Frames 而不是 Rectangle 来包围数据，但遇到了同样的问题。

我正在使用*iReport 5.0.1*并将兼容性设置为*JasperReports 3.5.1*。

这是我的 jrxml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Payslip" pageWidth="1000" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="960" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
    <import value="org.joda.time.DateTime"/>
    <style name="Headings" vAlign="Middle" lineSpacing="1_1_2" fontName="Arial" fontSize="12" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false"/>
    <style name="Data" isDefault="true" vAlign="Middle" lineSpacing="1_1_2" fontName="Arial" fontSize="11"/>
    <parameter name="rptName" class="java.lang.String" isForPrompting="false"/>
    <parameter name="company" class="java.lang.String"/>
    <field name="empName" class="java.lang.String"/>
    <field name="salaryMonthName" class="java.lang.String"/>
    <field name="salaryMonthYear" class="java.lang.Integer"/>
    <field name="employeeCode" class="java.lang.String"/>
    <field name="designation" class="java.lang.String"/>
    <field name="grade" class="java.lang.String"/>
    <field name="location" class="java.lang.String"/>
    <field name="department" class="java.lang.String"/>
    <field name="branch" class="java.lang.String"/>
    <field name="dateOfJoining" class="org.joda.time.DateTime"/>
    <field name="pfNumber" class="java.lang.String"/>
    <field name="panNumber" class="java.lang.String"/>
    <field name="bankName" class="java.lang.String"/>
    <field name="accountNumber" class="java.lang.String"/>
    <field name="workingDays" class="java.lang.Double"/>
    <field name="paidDays" class="java.lang.Double"/>
    <field name="absentDays" class="java.lang.Double"/>
    <background>
        <band height="301">
            <rectangle>
                <reportElement mode="Transparent" x="0" y="120" width="324" height="165"/>
                <graphicElement>
                    <pen lineWidth="2.0"/>
                </graphicElement>
            </rectangle>
            <rectangle>
                <reportElement mode="Transparent" x="324" y="120" width="320" height="165"/>
                <graphicElement>
                    <pen lineWidth="2.0"/>
                </graphicElement>
            </rectangle>
        </band>
    </background>
    <title>
        <band height="102">
            <line>
                <reportElement x="0" y="43" width="265" height="1" forecolor="#3333FF"/>
                <graphicElement>
                    <pen lineWidth="3.0"/>
                </graphicElement>
            </line>
            <textField isStretchWithOverflow="true">
                <reportElement x="0" y="0" width="405" height="32" forecolor="#3333FF"/>
                <textElement lineSpacing="Single">
                    <font size="16" isBold="true"/>
                </textElement>
                <textFieldExpression class="java.lang.String"><![CDATA[$P{company}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="0" y="44" width="200" height="31" forecolor="#3333FF"/>
                <textElement lineSpacing="Single">
                    <font fontName="Arial" size="18"/>
                </textElement>
                <textFieldExpression class="java.lang.String"><![CDATA[$P{rptName}]]></textFieldExpression>
            </textField>
            <textField pattern="EEE, d MMM yyyy HH:mm">
                <reportElement mode="Opaque" x="843" y="71" width="117" height="20" forecolor="#FFFFFF" backcolor="#999999"/>
                <textElement lineSpacing="Single">
                    <font fontName="Arial"/>
                </textElement>
                <textFieldExpression class="java.util.Date"><![CDATA[new java.util.Date()]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="92" y="82" width="129" height="20"/>
                <textElement lineSpacing="Single">
                    <font size="14" isBold="true"/>
                </textElement>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{salaryMonthName} + " " + $F{salaryMonthYear}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement x="0" y="82" width="92" height="20"/>
                <textElement lineSpacing="Single">
                    <font size="14" isBold="true"/>
                </textElement>
                <text><![CDATA[For Month]]></text>
            </staticText>
        </band>
    </title>
    <detail>
        <band height="205">
            <staticText>
                <reportElement style="Headings" x="12" y="23" width="91" height="20"/>
                <textElement lineSpacing="1_1_2"/>
                <text><![CDATA[Code]]></text>
            </staticText>
            <staticText>
                <reportElement style="Headings" x="12" y="43" width="91" height="20"/>
                <textElement lineSpacing="1_1_2"/>
                <text><![CDATA[Name]]></text>
            </staticText>
            <staticText>
                <reportElement style="Headings" x="12" y="63" width="91" height="20"/>
                <textElement lineSpacing="1_1_2"/>
                <text><![CDATA[Designation]]></text>
            </staticText>
            <staticText>
                <reportElement style="Headings" x="12" y="83" width="91" height="20"/>
                <textElement lineSpacing="1_1_2"/>
                <text><![CDATA[Grade]]></text>
            </staticText>
            <staticText>
                <reportElement style="Headings" x="12" y="103" width="91" height="20"/>
                <textElement lineSpacing="1_1_2"/>
                <text><![CDATA[Location]]></text>
            </staticText>
            <staticText>
                <reportElement style="Headings" x="12" y="123" width="91" height="20"/>
                <textElement lineSpacing="1_1_2"/>
                <text><![CDATA[Department]]></text>
            </staticText>
            <staticText>
                <reportElement style="Headings" x="12" y="143" width="91" height="20"/>
                <textElement lineSpacing="1_1_2"/>
                <text><![CDATA[Branch]]></text>
            </staticText>
            <staticText>
                <reportElement style="Headings" x="12" y="163" width="92" height="20"/>
                <textElement lineSpacing="1_1_2"/>
                <text><![CDATA[Date of Joining]]></text>
            </staticText>
            <staticText>
                <reportElement style="Headings" x="341" y="23" width="98" height="20"/>
                <textElement lineSpacing="1_1_2"/>
                <text><![CDATA[P. F. Number]]></text>
            </staticText>
            <staticText>
                <reportElement style="Headings" x="341" y="43" width="98" height="20"/>
                <textElement lineSpacing="1_1_2"/>
                <text><![CDATA[PAN No.]]></text>
            </staticText>
            <staticText>
                <reportElement style="Headings" x="341" y="63" width="98" height="20"/>
                <textElement lineSpacing="1_1_2"/>
                <text><![CDATA[Pay Mode / Bank Name]]></text>
            </staticText>
            <staticText>
                <reportElement style="Headings" x="341" y="83" width="98" height="20"/>
                <textElement lineSpacing="1_1_2"/>
                <text><![CDATA[A/C No.]]></text>
            </staticText>
            <staticText>
                <reportElement style="Headings" x="341" y="103" width="98" height="20"/>
                <textElement lineSpacing="1_1_2"/>
                <text><![CDATA[Working Days]]></text>
            </staticText>
            <staticText>
                <reportElement style="Headings" x="341" y="123" width="98" height="20"/>
                <textElement lineSpacing="1_1_2"/>
                <text><![CDATA[Paid Days]]></text>
            </staticText>
            <staticText>
                <reportElement style="Headings" x="341" y="143" width="98" height="20"/>
                <textElement lineSpacing="1_1_2"/>
                <text><![CDATA[Absent Days]]></text>
            </staticText>
            <textField>
                <reportElement x="154" y="23" width="140" height="20"/>
                <textElement lineSpacing="Single"/>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{employeeCode}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="154" y="43" width="140" height="20"/>
                <textElement lineSpacing="Single"/>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{empName}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="154" y="63" width="140" height="20"/>
                <textElement lineSpacing="Single"/>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{designation}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="154" y="83" width="140" height="20"/>
                <textElement lineSpacing="Single"/>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{grade}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="154" y="103" width="140" height="20"/>
                <textElement lineSpacing="Single"/>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{location}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="154" y="123" width="140" height="20"/>
                <textElement lineSpacing="Single"/>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{department}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="154" y="143" width="140" height="20"/>
                <textElement lineSpacing="Single"/>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{branch}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="492" y="23" width="140" height="20"/>
                <textElement lineSpacing="1_1_2"/>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{pfNumber}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="492" y="43" width="140" height="20"/>
                <textElement lineSpacing="1_1_2"/>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{panNumber}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="492" y="63" width="140" height="20"/>
                <textElement lineSpacing="1_1_2"/>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{bankName}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="492" y="83" width="140" height="20"/>
                <textElement lineSpacing="1_1_2"/>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{accountNumber}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="492" y="103" width="140" height="20"/>
                <textElement lineSpacing="1_1_2"/>
                <textFieldExpression class="java.lang.Double"><![CDATA[$F{workingDays}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="492" y="123" width="140" height="20"/>
                <textElement lineSpacing="1_1_2"/>
                <textFieldExpression class="java.lang.Double"><![CDATA[$F{paidDays}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="492" y="143" width="140" height="20"/>
                <textElement lineSpacing="1_1_2"/>
                <textFieldExpression class="java.lang.Double"><![CDATA[$F{absentDays}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="154" y="163" width="140" height="20"/>
                <textElement lineSpacing="1_1_2"/>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{dateOfJoining}.toString("dd-MMM-yyyy")]]></textFieldExpression>
            </textField>
            <break>
                <reportElement x="0" y="184" width="960" height="1"/>
            </break>
        </band>
    </detail>
</jasperReport> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T12:32:27.793

您遇到的问题可能是由于您不能在 HTML 中重叠对象。我以前和 Jasper 有过这个问题。如果两个（或更多）对象重叠，报告中只会显示其中一个。

您可以尝试使用不与任何其他对象重叠的单独线条。

我很难让它工作，所以我在像你这样的情况下处理这种情况的方式是使用文本字段的边框来组成矩形。对于左上角标签（代码），您可以使用它的顶部和左侧边框。对于中间标签，左边框。对于底部字段（加入日期），底部和左侧边框。文本字段则相反。然后，您可以在文本字段上使用填充以使它们看起来正确。有时我有 20 或更多的填充来获得我正在寻找的效果。

我希望这有帮助。

# c# - 我想从我的代码中将控制台命令读入我当前的控制台应用程序

> ID：16034269
> 
> 赞同：1
> 
> 时间：2013-04-16T10:09:06.817
> 
> 标签：c#

```
con lines=x
con cols=x 
```

这些是我想在我当前的 C# 控制台应用程序中运行的控制台命令，以便我可以将控制台窗口展开到允许的最大值之上

```
Console.SetWindowSize(x,x); 
```

所以基本上我想在我当前的控制台应用程序中运行一个控制台命令。

不在命令行的新进程中。

我想我的控制台应用程序与命令提示符（cmd）混淆了

```
 Console.SetWindowSize(Console.LargestWindowWidth,Console.LargestWindowHeight); 
```

这似乎是为您的应用程序获得更好尺寸的最安全方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:17:02.123

使用[Console.ReadLine](http://msdn.microsoft.com/library/system.console.readline.aspx)提供一种命令提示符，然后解析用户输入的数据。然后，您可以检查用户是否输入`con lines`了例如并基于此设置窗口尺寸。

# sitecore - Sitecore 核心数据库 - 如何添加新模板

> ID：16034271
> 
> 赞同：2
> 
> 时间：2013-04-16T10:09:10.910
> 
> 标签：sitecore

我需要在 Core 数据库中创建一个新模板来创建一些配置项。默认情况下，您不能将“新模板”添加到模板/系统...部分。

如何将新模板添加到核心数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:13:23.753

右键单击要创建模板的位置，单击插入自 -> 选择模板（或标准模板，如果这是您想要的）您可以在`/sitecore/templates/System/Templates/Template`.

顺便说一句，通常不建议将您的模板添加到系统文件夹中。将其添加到新文件夹或用户定义文件夹可能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:43:37.687

通过右键单击模板>>系统文件夹在弹出菜单中选择插入>>从模板插入选项。

`/sitecore/templates/System/Templates/Template`按照[Trayek 的](https://stackoverflow.com/users/2064919/trayek)建议选择。

在 Builder 选项卡和 Inheritance 选项卡中添加的数据也可以正常工作。（下面的屏幕截图）

![在此处输入图像描述](https://i.stack.imgur.com/gHHme.jpg)

# sql - 声明查询的sql问题

> ID：16034273
> 
> 赞同：0
> 
> 时间：2013-04-16T10:09:13.677
> 
> 标签：sql, variables, declare

我有一个 java 应用程序，用于从 sql 表中检索信息。
问题是表会根据使用它们的主应用程序而变化。有一个视图包含来自活动表的所有活动信息，例如`table_all`这很好，我想做的是在表中搜索作为视图一部分的特定数字

```
DECLARE @iss int, @act_tb char(1)
SET @iss = (select cust_nr from table_all where num = '123456789')
SET @act_tb = (select curr_table_active from pc_group where cust_nr = @iss)
select * from pc_grp_@iss_@act_tb 
```

所以我现在想要做的是更新 pc_grp_@iss_@act_tb`enter code here`格式的字段是 pc_grp_<@iss>_<@act_tb>。

有什么办法可以做到这一点，因为`pc_grp_@iss_@act_tb` 它是作为一个表而不是一个变量表名。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:18:02.440

我想你正在寻找这个-：

```
Declare @query as varchar(Max);
Set @query='Select * from select * from pc_grp_'+Cast(@iss as varchar)+'_'+Cast(@act_tb as varchar) ;
Exec(@query) 
```

# php - 我可以在不使用 AJAX 的情况下在 Javascript 中运行 PHP 代码吗？

> ID：16034277
> 
> 赞同：0
> 
> 时间：2013-04-16T10:09:42.553
> 
> 标签：php, javascript

如何在 JavaScript 函数中不使用 AJAX 将 JavaScript 变量转换为 php 变量。

```
 function getProduct(category)
{
    document.galaxy.action = '<?php echo JRoute::_('index.php?option=com_virtuemart&view=category&virtuemart_category_id=11') ?>';
    document.getElementById('galaxy').submit();
} 
```

我需要将 js 变量“类别”转换为 php 变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:15:01.523

这是**不可能**的。

**Javascipt**是一种客户端语言，这意味着它可以在访问者的计算机上运行。

**PHP**是一种服务器端语言，这意味着它将在您的服务器上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:15:48.673

你不能。查看网站时会发生什么：

1.  PHP 执行服务器上的所有 PHP 代码
2.  Web服务器将站点发送给客户端
3.  客户端浏览器执行 JavaScript

当您想在 PHP 中使用 JavaScript 变量时，您必须以某种方式 (AJAX) 将其发送回服务器。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-27T14:25:10.907

```
var DivVal=document.getElementById('ChkStatus');
       //var InnerVal=DivVal.innerHTML;
       var editRedirect='<?php echo $this->createUrl("Employee/Print"); ?>';
       window.location=editRedirect; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-16T10:20:39.687

正如其他人提到的，您对这些概念有些误解。

如果您希望 JS 中的某些内容与表单一起发送到您的 PHP 脚本，您应该将其放在表单字段中。

在您的表单中使用隐藏值：

```
<input type="hidden" id="categoryInput" name="category" /> 
```

在你的 JS 中：

```
//Before you submit do this..
document.getElementById('categoryInput').value = category; 
```

在你的 PHP 中：

```
$category = $_REQUEST['category']; 
```

**编辑：**

好像你在问这个：

```
document.galaxy.action = '<?php echo JRoute::_('index.php?option=com_virtuemart&view=category') ?>&virtuemart_category_id=' + category; 
```

# google-chrome-extension - chrome.commands 中括号时出现“无效值”错误

> ID：16034279
> 
> 赞同：3
> 
> 时间：2013-04-16T10:09:42.760
> 
> 标签：google-chrome-extension

我需要热键`Alt + ]`和`Alt + [`. 我`manifest.json`喜欢：

```
{
    ...
    "commands": {
        "nextTrack": {
            "suggested_key": {
                "default": "Alt+]"
            },
            "description": "Next track"
        },
        "previousTrack": {
            "suggested_key": {
                "default": "Alt+["
            },
            "description": "Previous track"
        },
        "toggle": {
            "suggested_key": {
                "default": "Alt+P"
            },
            "description": "Toggle pause"
        }
    },
    ...
} 
```

当我启用我的扩展时，我得到：

```
Could not load extension from '~/project'. 
Invalid value for 'commands[1].default': Alt+]. 
```

使用该热键的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T12:53:35.137

只有大写字母 (AZ) 和数字 (0-9) 是有效值，您可以通过查看API的[源代码](https://code.google.com/p/chromium/codesearch#chromium/src/chrome/common/extensions/command.cc&l=95&q=kInvalidKeyBinding&sq=package%3achromium)看到。[`chrome.commands`](https://developer.chrome.com/extensions/commands.html)

如果要使用其他字符，请在绑定`keydown`事件的每个页面中注入内容脚本：

```
document.addEventListener('keydown', function(event) {
    if (!event.ctrlKey && event.altKey && event.which === 80/*P*/) {
        // Dispatch a custom message, handled by your extension
        chrome.runtime.sendMessage('Alt+P');
    }
}, true); // <-- True is important 
```

## 这种方法的缺点

*   键盘焦点**必须**在激活内容脚本的页面内。如果您在开发人员工具、多功能栏等中，快捷方式将失败。
*   即使您将`<all_urls>`其用作[匹配模式](https://developer.chrome.com/extensions/match_patterns.html)，它也不适用于非 http(s) / file / ftp(s) 方案，如, ,`chrome:`或`data:`Chrome网上商店。`chrome-extension:``about:`
*   `[`如果键盘布局不支持它，或者使用不同的键代码，您可能会遇到检测字符的问题。
*   没有内置支持自定义此快捷方式（作为用户，访问`chrome://extensions/`，滚动到底部并单击“配置命令”以更改扩展程序的快捷方式）。

我建议选择一个不同的快捷方式，或者更改控制扩展程序的方式（例如，通过[页面](https://developer.chrome.com/extensions/pageAction.html)/[浏览器操作](https://developer.chrome.com/extensions/browserAction.html)弹出窗口）。

# php - HTML选择选项中的foreach php函数

> ID：16034281
> 
> 赞同：2
> 
> 时间：2013-04-16T10:09:50.243
> 
> 标签：php, html

我是这个论坛的新手，刚刚开始用 php 编码。需要一些帮助。我有以下代码

```
<?php error_reporting(-1);

require_once('/mysql/sql_connect.php');

$q = "SELECT pty.pty_profile_name AS profile FROM pty, users WHERE users.username = 'testaccount' ";
    $r = @mysqli_query ($dbc, $q);

    $results_array = array();
    while($row = mysqli_fetch_assoc($r)) {
        array_push($results_array, $row);
    echo "<pre>"; print_r($results_array); echo "</pre>"; }

?>

<p>
<form method="post" action="foreach2.php">
<label for="Property Select" class="title">Select Property</label>  
   <select name="pty_select" > 
   <?php foreach($results_array as $key => $value){ ?>
                    <option value="<?php echo $key; ?>"><?php echo $value['profile']; ?></option> 
    <?php } ?>
        </select>
    <input type="submit" name="Submit" />
</form>

<?php 

if (isset($_POST['Submit'])) {
echo "<pre>"; echo ($_POST['pty_select']); echo "</pre>"; } ?> 
```

我得到的输出是正确的，但它会根据我在表单中选择的内容显示密钥，例如 0 或 1 或 2。我需要价值输出。例如`0 = Emerton`，它输出“0”而不是`Emerton`。

如果我 echo`$value['profile']`而不是`pty_select`，我会一直得到查询的最后一个结果。在这个例子中是 2，`Ambarvale`我相信它只是选择查询的最后一行输出。

我希望我说得通。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T10:13:20.830

它显然会回显键，因为您分配了选项的值，就`$key` 好像您需要`$_POST['pty_select']`使用以下选项一样：

```
 <select name="pty_select" > 
<?php foreach($results_array as $key => $value){ ?>
                <option value="<?php echo $value['profile'];?>"><?php echo $value['profile'];     ?></option> 
<?php } ?>
    </select> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T10:12:51.110

你的意思是你需要你用来显示它的值。然后，更改为：

```
<option value="<?php echo $value['profile']; ?>">
    <?php echo $value['profile']; ?>
</option> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T10:35:00.427

现在让我们进入理想世界:)

`database_id => name`为选项构建数据对：

```
$q = "SELECT pty.id, pty.pty_profile_name AS profile FROM pty, users 
      WHERE users.username = 'testaccount'";
$r = mysqli_query($dbc, $q);

$values = array();
while($r = mysqli_fetch_row($r)) {
    $values[$r[0]] = $r[1];
} 
```

使用数据库时永远不要使用`@`，为什么要抑制错误而不是防止/处理它们？

现在您有了真实的数据库 ID 和相应的值（通常，使用唯一 ID 更好......如果没有别的，它们具有更大的熵 - 更有效的搜索）。并且 sice 显示选择框在网络中非常常见，让我们：

```
function selectbox( $values = array(), $attributes = array(), $selected_value = null)
{
    // Header
    echo '<select';
    foreach( $attributes as $key => $val){
        echo ' ' . htmlspecialchars($key) . '="' . htmlspecialchars( $val) . '"';
    }
    echo '>';

    // Values
    foreach( $values as $key => $val){
        echo '<option value="' . htmlspecialchars( $key) .'"';
        if( $key === $selected_value){
            echo ' selected="selected"';
        }
        echo '>' . htmlspecialchars( $val) . '</option>';
    }
    echo '</select>';
} 
```

现在使用:)

```
<form method="post" action="foreach2.php">
<label for="Property Select" class="title">Select Property</label>  
    <?php selectbox( $values, array( 'name' => 'pty_select')); ?>
    <input type="submit" name="Submit" />
</form> 
```

那该怎么办呢？

```
$id = (int)(isset( $_POST['pty_select']) ? $_POST['pty_select'] : 0);
$name = null;
if( $id && isset( $values[$id])){
    $name = $values[$id];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T10:12:25.990

给

```
<option value="<?php echo $value['profile']; ?>"><?php echo $value['profile']; ?></option> 
```

代替

```
<option value="<?php echo $key; ?>"><?php echo $value['profile']; ?></option> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T10:14:48.643

```
if (isset($_POST['Submit'])) {
echo "<pre>"; echo ($_POST['pty_select']); echo "</pre>"; } ?> 
```

将其更改为类似

```
if(isset($_POST['Submit'])) {
    echo $results_array[$_POST['pty_select']]['profile'];
} 
```

或者使用配置文件选项值。

# java - twitter 搜索 Api 连接超时

> ID：16034282
> 
> 赞同：3
> 
> 时间：2013-04-16T10:09:51.197
> 
> 标签：java, api, search, twitter, timeout

我正在运行这个程序来搜索推文。粘贴以下异常。

任何人都可以帮我解决问题吗？

如果需要任何其他详细信息，请告诉我。

谢谢

```
 public class KrishsSearchTweets {
    public static void main(String[] args) {

        try {
            Twitter twitter = new TwitterFactory().getInstance();
                //  My Applications Consumer and Auth Access Token
                twitter.setOAuthConsumer("key", "secret");
                twitter.setOAuthAccessToken(new AccessToken("token", "secret"));

                System.out.println("Search Program started");
                Query query = new Query("source:twitter4j");
                query.setSince("20120101");
                Object result = twitter.search(query);
                System.out.println("Search Program ended");

        } catch (TwitterException te) {
            te.printStackTrace();
            System.out.println("Failed to get timeline: " + te.getMessage());
            }
        }

    } 
```

**例外：**

```
Search Program started
connect timed out
Relevant discussions can be found on the Internet at:
        http://www.google.co.jp/search?q=d35baff5 or
        http://www.google.co.jp/search?q=12c94143
    TwitterException{exceptionCode=[d35baff5-12c94143 43208640-465ee2e3], statusCode=-1, message=null, code=-1, retryAfter=-1, rateLimitStatus=null, version=3.0.3}
        at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:192)
        at twitter4j.internal.http.HttpClientWrapper.request(HttpClientWrapper.java:61)
        at twitter4j.internal.http.HttpClientWrapper.get(HttpClientWrapper.java:81)
        at twitter4j.TwitterImpl.get(TwitterImpl.java:1835)
        at twitter4j.TwitterImpl.search(TwitterImpl.java:282)
        at KrishsSearchTweets.main(KrishsSearchTweets.java:30)
    Caused by: java.net.SocketTimeoutException: connect timed out
        at java.net.PlainSocketImpl.socketConnect(Native Method)
        at java.net.PlainSocketImpl.doConnect(Unknown Source)
        at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
        at java.net.PlainSocketImpl.connect(Unknown Source)
        at java.net.SocksSocketImpl.connect(Unknown Source)
        at java.net.Socket.connect(Unknown Source)
        at sun.net.NetworkClient.doConnect(Unknown Source)
        at sun.net.www.http.HttpClient.openServer(Unknown Source)
        at sun.net.www.http.HttpClient.openServer(Unknown Source)
        at sun.net.www.http.HttpClient.<init>(Unknown Source)
        at sun.net.www.http.HttpClient.New(Unknown Source)
        at sun.net.www.http.HttpClient.New(Unknown Source)
        at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(Unknown Source)
        at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)
        at sun.net.www.protocol.http.HttpURLConnection.connect(Unknown Source)
        at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
        at java.net.HttpURLConnection.getResponseCode(Unknown Source)
        at twitter4j.internal.http.HttpResponseImpl.<init>(HttpResponseImpl.java:34)
        at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:156)
    Failed to get timeline: connect timed out
        ... 5 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:43:34.147

问题得到解决。这是因为网络中的防火墙不允许连接并超时。

在我删除防火墙后它工作了。

# macos - bash 吃标准错误输出

> ID：16034286
> 
> 赞同：0
> 
> 时间：2013-04-16T10:10:04.153
> 
> 标签：macos, bash, shell, stdout, stderr

我正在调用我们在 OS X 上从 bash 编写的命令行工具，但我遇到的问题是我没有得到 stderr 输出，而只有 printf 被写入 stdout。

那是我的电话：

```
echo "someInputString" |theTool -v someArg 
```

我也试过：

```
echo "someInputString" |theTool -v someArg 2>&1 
```

没有成功...我敢打赌这是微不足道的，但我不知道需要做什么。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:15:11.263

使用 重定向 stderr 流输出`2>`。

```
echo "someInputString" |theTool -v someArg 2> error_file 
```

# android - 自定义包装编解码器集成到 Android

> ID：16034287
> 
> 赞同：5
> 
> 时间：2013-04-16T10:10:04.427
> 
> 标签：android, codec, stagefright

我需要开发一个自定义的“包装器”视频编解码器并将其集成到 android（现在是 JB，稍后是 ICS）中。我们想使用来自 SIM 卡的一些自定义解密密钥（不要问！）。最好的方法（允许它与其他非加密媒体一起工作并使用标准媒体播放器或其他）似乎是定义我们自己的 mime 类型，并将其链接到可以执行自定义的自定义包装编解码器解密，然后将数据传递给真正的编解码器。（假设文件类型是`.mp4`现在。）

（另一种方法可能是编写我们自己的媒体播放器，但我们宁愿不走那条路，因为我们真的希望媒体与其他媒体一起无缝出现）

我一直在尝试遵循本指南： [如何将解码器集成到多媒体框架中](https://stackoverflow.com/questions/15334509/android-how-to-integrate-a-decoder-to-multimedia-framework)

1.  我在注册 OMX Core 时遇到问题 - 我可以`libstagefright.so`通过键入从 android 源代码构建，`make stagefright`但在指南中他说使用`libstagefrighthw.so`似乎适合 JB 的，但我不确定如何构建它，它不似乎是从使用中构建的，`make stagefright`除非我做错了什么？

2.  另一个问题是，即使我注册了自定义包装编解码器，我也不确定如何将数据传递给真正的编解码器。

如果有人有任何建议（或者可以给一些婴儿一步一步的指导！），我真的很感激 - 概念证明的截止日期非常紧迫，我对编解码器或媒体框架知之甚少......

非常感谢。（ps 我不想卷入一场关于 drm 和模拟孔等的泥战，谢谢）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T00:32:55.630

在这篇文章中，我`H.264`以示例为例，但可以扩展解决方案以支持其他编解码器，如,`MPEG-4`等。有两种可能的解决方案可以解决您的问题，我在下面列出了这些解决方案，每个都有自己的优点和缺点，以帮助您做出明智的决定。`VC-1``VP8`

**解决方案 1：扩展编解码器以支持新模式**

在`JellyBean`中，可以将`OMX`具有相同类型的相同组件注册`MIME`为 2 个不同的组件名称，即`OMX.ABC.XYZ`和`OMX.ABC.XYZ.secure`。前者用于正常播放，是比较常用的组件。后者在解析器 ie`MediaExtractor`指示存在**安全内容**时使用。在`OMXCodec::Create`，`findMatchingCodecs`返回编解码器列表后，我们可以观察到选择`.secure`组件的选择，如下[所示](http://androidxref.com/4.2.2_r1/xref/frameworks/av/media/libstagefright/OMXCodec.cpp#319)。

*要遵循的步骤：*

1.  在您的平台中，使用一些新的扩展名或类似的东西注册另一个组件`OMX.H264.DECODER.decrypt`。仅在 中需要更改`media_codecs.xml`。是注册一个新的工厂方法还是拥有一个通用的工厂方法是你的选择。

2.  在您的解析器中，当您遇到特定用例时，设置一个新标志，例如`kKeyDecryptionRequired`. 为此，您必须在 中定义一个新标志[`Metadata.h`](http://androidxref.com/4.2.2_r1/xref/frameworks/av/include/media/stagefright/MetaData.h#132)和一个相应的怪癖[`OMXCodec.h`](http://androidxref.com/4.2.2_r1/xref/frameworks/av/include/media/stagefright/OMXCodec.h#89)。

3.  修改`OMXCodec::create`方法，追加与上图`.decrypt`类似的`.secure`后缀。

4.  随着`OMXCodec`, `Metadata`,`MediaExtractor`模块中的所有更改，您只需重建`libstagefright.so`并在您的平台上替换相同的内容。

瞧！！您的集成应该是完整的。现在是组件内部的主要挑战。作为组件实现的一部分，您应该能够区分普通组件创建和`.decrypt`组件创建。

从运行时的角度来看，假设您的组件知道它是否是一个`.decrypt`组件，您可以将其`decryption`作为`OMX_EmptyThisBuffer`调用的一部分进行处理，您可以在其中解密数据，然后将其传递给底层编解码器。

**优点：**易于集成，Android 框架的变化最小，可扩展到其他编解码器，不需要新的`MIME`类型注册。

**缺点：**您需要跟踪 android 的未来版本，特别是新的怪癖、标志和`.decrypt`扩展选择。如果 Google 决定采用类似的方法，您将不得不相应地调整/修改您的解决方案。

**解决方案 2：注册新的 MIME 类型**

从您的问题来看，尚不清楚您是否能够定义`MIME`类型，因此，为了清楚起见，我正在捕获这些步骤。

**要遵循的步骤：**

1.  在[此处](http://androidxref.com/4.2.2_r1/xref/frameworks/av/media/libstagefright/MediaDefs.cpp#24)注册一个新`MIME`类型。例如，您可以使用一种新类型作为`MediaDefs``MIME``const char *MEDIA_MIMETYPE_VIDEO_AVC_ENCRYPT = "video/avc-encrypt";`

2.  `MIME`在`media_codecs.xml`. _ 请注意，您必须确保相应地处理组件怪癖。

3.  在`OMXCodec::setVideoOutputFormat`方法实现中，您必须引入对处理新类型的支持，如此[处](http://androidxref.com/4.2.2_r1/xref/frameworks/av/media/libstagefright/OMXCodec.cpp#1181)`MIME`所示。请注意，您必须处理类似的更改才能支持新类型。`H.264` `OMXCodec``MIME`

4.  在`MediaExtractor`中，您必须使用新定义的类型来指示轨道的类型`MIME`。`video`通过这些更改，您的组件将被选中并创建。

**然而，**挑战仍然存在：在哪里执行解密？为此，您也可以采用与上一节中描述的相同的解决方案，即处理与`OMX_EmptyThisBuffer`调用的一部分相同的方法。

**优点：**没有我能想到的..

**缺点：**首先，解决方案不可扩展。您将不得不不断添加更新`MIME`的类型并不断修改`Stagefright`框架。接下来， 中的更改`OMXCodec`将需要 中的相应更改`MediaExtractor`。因此，即使您最初的重点是`MP4`提取器，如果您希望将解决方案扩展到其他容器格式，例如`AVI`, ，您将必须在这些提取器`MKV`中包含对新类型的支持。`MIME`

**最后，**一些笔记。

1.  作为首选解决方案，我会推荐解决方案 1，因为它简单易行。

2.  我还没有触及`ACodec`编解码器的基于实现。但是，我确实认为解决方案 1 将是一个更容易实施的解决方案，即使将来需要这样的支持。

3.  如果您不修改`OMX`核心，则不需要修改`libstagefrighthw.so`. 仅供参考，这通常由供应商实施，作为其供应商特定模块的一部分，如`vendor/<xyz>/hardware/...`. 您需要与您的平台提供商核实`libstagefrighthw.so`.

# javascript - 如何隐藏定义为变量的元素？

> ID：16034289
> 
> 赞同：8
> 
> 时间：2013-04-16T10:10:06.543
> 
> 标签：javascript, jquery, html, hide

我有两个变量定义为：

```
var div1 = $("#div1");

var div2 = $("#div2"); 
```

我知道我可以 `$("#div1, #div2").hide()`用来隐藏两个 div

但是有没有办法可以通过定义的变量来隐藏它们`(div1, div2).hide()`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T10:11:39.687

您可以使用***[.add()](http://api.jquery.com/add/)***方法：

```
div1.add(div2).hide(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-16T10:11:53.950

您可以使用[add()](http://api.jquery.com/add/)方法将其他元素添加到现有选择器：

```
div1.add(div2).hide() 
```

# c - 检查ac宏中字符串的第一个字符

> ID：16034290
> 
> 赞同：0
> 
> 时间：2013-04-16T10:10:12.900
> 
> 标签：c, string, parameters, macros

我正在寻找创建一个宏来检查字符串的第一个字符是否是已定义的字符，宏将传递一些文本和一个字符，我想检查文本的第一个字符是否是什么作为字符传递。最干净的方法是什么？

```
#define Check(Text, character) ((CHECK IF THE FIRST SPACE IS THE CHARACTER) ? True : False) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:13:30.980

```
#define Check(Text, character) ((charachetr == Text[0]) ? True : False ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:12:58.563

非常简单的方法：

```
#define check(s,c) (s[0]==c) 
```

例如 ：

```
#include <stdio.h>
#define check(s,c) (s[0]==c)

int main ( )
{
    char * x = "test";
    if check(x,'t')
        printf("ok\n");
} 
```

# git - GitLab 5.0：通过 SSH 的 Git 推送失败，但 HTTPS 或直接 SSH 连接没有错误

> ID：16034293
> 
> 赞同：3
> 
> 时间：2013-04-16T10:10:14.493
> 
> 标签：git, ssh, gitlab

当我尝试 git push 时，我得到了通常的错误

> 致命：无法从远程存储库中读取。
> 
> 请确保您具有正确的访问权限并且存储库存在。

但是，通过 HTTPS 推送和拉取可以正常工作。

我认为这将是 SSH 的问题，但连接似乎不会产生任何错误，它接受我的公钥，给我欢迎消息并以 0 退出。

```
$ ssh -vT git@git.server.com
OpenSSH_5.9p1, OpenSSL 0.9.8r 8 Feb 2011
debug1: Reading configuration data /Users/adam/.ssh/config
debug1: Reading configuration data /etc/ssh_config
debug1: /etc/ssh_config line 20: Applying options for *
debug1: Connecting to git.server.com [420.420.555.555] port 22.
debug1: Connection established.
debug1: identity file /Users/adam/.ssh/id_rsa type 1
debug1: identity file /Users/adam/.ssh/id_rsa-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_6.0p1 Debian-3ubuntu1
debug1: match: OpenSSH_6.0p1 Debian-3ubuntu1 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.9
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-ctr hmac-md5 none
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Server host key: RSA 96:cc:........
debug1: Host 'git.server.com' is known and matches the RSA host key.
debug1: Found key in /Users/adam/.ssh/known_hosts:2
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey,password
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /Users/adam/.ssh/id_rsa
debug1: Server accepts key: pkalg ssh-rsa blen 279
debug1: Authentication succeeded (publickey).
Authenticated to git.server.com ([257.257.257.257]:22).
debug1: channel 0: new [client-session]
debug1: Requesting no-more-sessions@openssh.com
debug1: Entering interactive session.
debug1: Remote: Forced command.
debug1: Remote: Port forwarding disabled.
debug1: Remote: X11 forwarding disabled.
debug1: Remote: Agent forwarding disabled.
debug1: Remote: Pty allocation disabled.
debug1: Remote: Forced command.
debug1: Remote: Port forwarding disabled.
debug1: Remote: X11 forwarding disabled.
debug1: Remote: Agent forwarding disabled.
debug1: Remote: Pty allocation disabled.
debug1: Sending environment.
debug1: Sending env LANG = en_GB.UTF-8
Welcome to GitLab, !
debug1: client_input_channel_req: channel 0 rtype exit-status reply 0
debug1: client_input_channel_req: channel 0 rtype eow@openssh.com reply 0
debug1: channel 0: free: client-session, nchannels 1
Transferred: sent 2512, received 2968 bytes, in 0.5 seconds
Bytes per second: sent 5567.4, received 6578.0
debug1: Exit status 0 
```

运行此命令失败

```
ssh git@git.server.com "ls /home/git/repositories/adam/my-repo.git" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:59:22.833

这看起来像当前的[错误 3424](https://github.com/gitlabhq/gitlabhq/issues/3424)

您需要确保：

*   Gitlab 应用程序（带有 sidekiq 消费者）和 Redis 已启动
*   配置是正确的

配置问题示例：

> 稍微放松一下并查看了我所有的配置文件后，我发现了我的问题，这当然是我的错
> 
> 我在配置服务器时不假思索，在`/etc/hosts`文件中将名称添加`x.m.com`到环回 IP 地址 (127.0.0.1)。
> 因此，在我的本地服务器上对该名称执行的任何网络调用都将转到该 IP，而不是 NginX 实际绑定到 GitLab 服务器的 IP。

其他示例：

> 我能够通过更改 nginx 配置以收听 *:80 而不是特定 IP 来解决我的问题。显然是由于防火墙不同的内部和外部 IP。

```
listen *:80 default_server; 
```

最后一个配置错误在[issues/3384](https://github.com/gitlabhq/gitlabhq/issues/3384#issuecomment-15457287)中有详细讨论。

* * *

[正如OP Adam-E在](https://stackoverflow.com/users/558866/adam-e)[评论](https://stackoverflow.com/questions/16034293/gitlab-5-0-git-push-via-ssh-fails-but-no-errors-with-https-or-with-direct-ssh/16035322?noredirect=1#comment23155006_16035322)中报告的那样，最后一个版本 5.1提供了以下帮助：

> *   将 Apache2 换成 nginx，
> *   对刚刚发布的 GitLab 5.1 stable 进行了全新安装，并且
> *   截断`/home/git/.ssh/authorized_keys`和
> *   读了我的公钥。
> 
> 从最后一步开始，它开始工作。

# svn - 如何在不保留历史记录的情况下将 svn trunk 复制到分支

> ID：16034296
> 
> 赞同：1
> 
> 时间：2013-04-16T10:10:21.790
> 
> 标签：svn

我知道已经有很多主题了，但是在我的情况下，我真的很难使用 svn。我有嵌套的主干目录，像这样：

`product_name/trunk/product_module/trunk`

这很烦人，但这不是我的选择，而且只能在 2 个月内迁移到 git，所以我一直对 dir 路径感到困惑。

问题是：如何在不传输所有先前提交消息的情况下合并`product_name/trunk/product_module/trunk/`到`product_name/trunk/product_module/branches/uat`，以便分支 uat 仅包含合并提交消息。如果可能的话，我实际上不想处理修订 ID。也许`svn copy`可以做这份工作？

**编辑：**这**不是**重复的，问题是关于合并分支，**而不是移动存储库**。如果他们看不到合并 repos 和分支之间的区别，那么投票支持关闭的人显然根本没有使用 svn。不同的工具，不同的模式和行动，甚至场景。我想要完整的命令以及我引用的所有路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:40:18.587

我不确定我是否正确理解了您的问题。然而，这听起来像是一个简单的问题。

您可以使用以下命令合并从主干到分支的所有未合并更改，在分支的工作目录中执行，并且不使用 rev id：

```
svn merge ^/product_name/trunk/product_module/trunk 
```

Subversion 可以区分合并提交和常规提交。以下命令仅显示合并提交：

```
svn log 
```

如果要查看合并历史记录，可以使用选项`-g`（与 相同`--use-merge-history`）：

```
svn log -g 
```

# jsf - 获取动态元素的 p:dataTable 中的行号

> ID：16034301
> 
> 赞同：5
> 
> 时间：2013-04-16T10:10:41.713
> 
> 标签：jsf, primefaces

我很好奇如何获取`<p:dataTable>`.

```
<p:dataTable id="userDataTable" value="#{bean.rows}" rowIndexVar="rowIndex">
    <p:column headerText="RowCounter">
        <p:commandLink id="row#{rowIndex+1}" actionListener="#{bean.getRows}">
            <h:outputText value="Show Row #{rowIndex+1}" />
        </p:commandLink>
    </p:column>
</p:dataTable> 
```

豆：

```
public void getRows(ActionEvent ae) {                   
    System.out.println(ae.getComponent().getId().toString());
} 
```

始终打印`row1`，无论`<p:commandLink>`单击哪个。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:47:11.140

至于您的具体问题，`id`JSF 组件的属性是在视图构建时评估的。但是，`#{rowIndex}`仅在视图渲染期间设置。因此，在`id`评估属性时，`#{rowIndex}`没有设置 并且默认为`0`。这个问题基本上与这里已经回答和解释的理由完全相同：[JSTL in JSF2 Facelets... 有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)因此请注意，**只有一个** `<p:commandLink>`组件，而不是多个。只是它在生成 HTML 期间被多次重用（每次都使用相同的组件 ID！）。

要修复它，只需使用它`id="row"`。在这种特殊情况下，动态 ID 没有任何意义。JSF 已经自动添加了行索引（检查生成的 HTML 输出以查看它）。我不确定您为什么[错误地认为](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)您需要在此处手动指定行索引，因此很难提出正确的解决方案，因为您实际上可能根本不需要它。另请参阅[如何将选定的行传递给 dataTable 中的 commandLink？](https://stackoverflow.com/questions/4994458/how-can-i-pass-a-parameter-to-a-commandlink-inside-a-datatable/4994833#4994833)

对于您*确实*需要行索引的情况，您可以通过以下方式获取它：

```
Integer rowIndex = (Integer) ae.getComponent().getNamingContainer().getAttributes().get("rowIndex"); 
```

`UIComponent#getNamingContainer()`返回最接近的命名[容器](http://docs.oracle.com/javaee/6/api/javax/faces/component/NamingContainer.html)父级，在您的特定情况下，它是数据表本身，在风味上或[`UIData`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIData.html)反过来具有该`rowIndex`属性。您也可以这样做，这有点自我记录：

```
UICommand commandLink = (UICommand) ae.getComponent();
UIData dataTable = (UIData) commandLink.getNamingContainer();
Integer rowIndex = dataTable.getRowIndex(); 
```

# java - 通过 android 应用程序在 Web 服务器上上传多个文件

> ID：16034305
> 
> 赞同：0
> 
> 时间：2013-04-16T10:11:14.360
> 
> 标签：java, android, multithreading, file-upload, for-loop

**请任何人都可以提供与方法调用堆栈相对应的解释**

您好，我正在开发一个 android 应用程序，在该应用程序中我可以在服务器上上传一些 mp3 文件

这是给我的上传文件的功能

**uploadToServer（字符串 arg1，字符串 arg2）**

现在我必须发送多个上传请求。我有两个 arg1 和 arg2 的 ArrayList

所以我使用 for 循环来迭代 ArrayList 并发送上传请求。

所以现在的问题是在第一次上传完成之前第二次自动启动。我还没有实现线程。那么为什么会这样。根据调用堆栈概念，直到第一个请求结束，第二个无法启动。for 循环的第二次迭代如何开始直到第一次完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:45:35.550

只是为了完整性：

异步方法将在它开始的操作完成之前返回。这很好，该方法已经完成了它应该做的事情：启动一个执行操作的后台任务。

所以简而言之，异步方法只是处理操作的单独（匿名）线程的发起者。完成后，它要么触发一个事件，要么调用一个回调方法（取决于使用的编程语言）。

[文章](http://en.wikipedia.org/wiki/Asynchronous_method_invocation)

# mysql - SQL优化——慢查询

> ID：16034307
> 
> 赞同：0
> 
> 时间：2013-04-16T10:11:24.330
> 
> 标签：mysql, sql, optimization

给定 SQL 需要 1.2 秒：

```
SELECT DISTINCT contracts.id, jt0.id, jt1.id, jt2.id, jt3.id FROM contracts
LEFT JOIN accounts jt0 ON jt0.id = contracts.account_id AND jt0.deleted=0
LEFT JOIN manufacturers jt1 ON jt1.id = contracts.manufacturer_id AND jt1.deleted=0
LEFT JOIN products jt2 ON jt2.id = contracts.product_id AND jt2.deleted=0
LEFT JOIN users jt3 ON jt3.id = contracts.assigned_user_id AND jt3.deleted=0
WHERE contracts.deleted=0
ORDER BY contracts.application_number ASC 
LIMIT 0,21 
```

这是解释扩展回报的原因：

```
id  select_type table   type    possible_keys   key key_len ref rows
1   SIMPLE  contracts   ref idx_contracts_deleted   idx_contracts_deleted   2   const   18968   100.00  Using where; Using temporary; Using filesort
1   SIMPLE  jt0 eq_ref  PRIMARY,idx_accnt_id_del,idx_accnt_assigned_del PRIMARY 108 xxx.contracts.account_id    1   100.00  
1   SIMPLE  jt1 eq_ref  PRIMARY,idx_manufacturers_id_deleted,idx_manufacturers_deleted  PRIMARY 108 xxx.contracts.manufacturer_id   1   100.00  
1   SIMPLE  jt2 eq_ref  PRIMARY,idx_products_id_deleted,idx_products_deleted    PRIMARY 108 xxx.contracts.product_id    1   100.00  
1   SIMPLE  jt3 eq_ref  PRIMARY,idx_users_id_del,idx_users_id_deleted,idx_users_deleted PRIMARY 108 xxx.contracts.assigned_user_id  1   100.00 
```

我需要不同的，我需要留下所有的连接，我需要排序，我需要限制。
我可以以某种方式优化它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:22:10.950

尝试一点参照完整性？我敢打赌，使用内部连接查询会快得多。应该是，因为查询优化器有更多的工作要做。您正在`select`为不更关心`create`.

我还将删除已删除的行到他们自己的表中，并删除`deleted`列。您的查询将更简单，并且可能运行得更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:54:01.400

尝试更改子表上的索引以包含该`deleted`列：

*   `accounts(id, deleted)`
*   `manufacturers(id, deleted)`
*   `products(id, deleted)`
*   `users(id, deleted)`

通过在索引中包含所有列，MySQL 有更好的机会利用索引。

另一个建议是找出导致值重复的原因，并使用子查询来消除重复项，而不是`distinct`.

例如，使用上述索引：

```
from contracts c left join
     (select id
      from accounts
      where deleted = 0
      group by id
     ) a
     on c.account_id = a.id
     . . . 
```

子查询应该只使用索引，这可能会加快速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:30:40.683

首先在以下列上创建必要的索引。

contract.application_number，manufacturers.deleted，products.deleted，users.deleted

```
SELECT DISTINCT contracts.id, jt0.id, jt1.id, jt2.id, jt3.id 
FROM contracts
LEFT JOIN accounts jt0 
ON contracts.deleted=0 AND jt0.id = contracts.account_id
LEFT JOIN manufacturers jt1 
ON jt1.deleted=0 AND jt1.id = contracts.manufacturer_id
LEFT JOIN products jt2 
ON jt2.deleted=0 AND jt2.id = contracts.product_id
LEFT JOIN users jt3 
ON jt3.deleted=0 AND jt3.id = contracts.assigned_user_id
ORDER BY contracts.application_number ASC 
LIMIT 0,21 
```

正如您所提到的，您已经在contracts.deleted上建立了索引

```
FROM 
  (SELECT * FROM contracts WHERE contracts.deleted = 0 USE INDEX(<deletedIndexName>))
LEFT JOIN 
  accounts jt0 
ON 
  jt0.id = contracts.account_id
LEFT JOIN  
  ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T10:18:06.737

这些是我得到的唯一建议

1.  我希望将 id 定义为主键和具有表之间关系的外键。

2.  也许 application_number 可以被索引（然后排序会更快）

3.  也许，如果您使用的是 MyISAM，如果您在选择之前锁定表，则 sql 可能会更快（不要忘记之后解锁）

# algorithm - 将赛车手分成平等团队的算法

> ID：16034311
> 
> 赞同：1
> 
> 时间：2013-04-16T10:11:42.193
> 
> 标签：algorithm, constraints, variable-assignment

我有一个赛车游戏中的车手列表，我想将车手分配给每队 3 名车手。每个车手都有一个评分（通常是大约 500 到 5000 之间的数字，越高越好），我想用这个评分来平等地匹配所有车队。同样，我的意思是每支车队的车手的平均评分应该尽可能接近。

不过还有一个重要的附加限制：我希望每支车队由一名高级车手（高评级）、一名中级车手和一名低级车手组成。这很重要，因为它会影响比赛的最终得分。虽然一个车队可以通过将三名中级车手加入一个车队来实现公平（平均评分可能与其他车队相似），但最终得分是基于每次都有一名排名靠前的车手和一名排名低的车手的假设。如果这不是真的，那么评分将不公平。

所以总结一下，要求是：

*   从最多 39 个驱动程序的列表开始，
*   将司机分配给最多 13 队 3 名司机，
*   保持每支球队的平均评分尽可能与其他球队相同
*   确保每次由一名高级车手、一名中级车手和一名低级车手组成。

如果没有额外的限制，我可以很容易地想出一些优化算法（甚至是蛮力？），试图等于每个团队的平均评分。但在那种情况下，我可能最终会得到很多拥有 3 名同等级别车手的车队，这不是我想要的。如何将我的附加约束添加到此优化问题？

即使我可以蛮力（我认为最多 13 支车队中的 39 名车手应该是可能的？），我仍然不知道如何决定哪种解决方案（== 车队和指定车手列表）是最好的。如何确定每个解决方案的“分数”或“适应度”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:23:53.777

我会按等级（最高优先）为您的车手列表排序，并从 1 到 13 为每个团队分配一名车手。

然后将接下来的 13 名车手从 13 - 1 倒数分配到列表中，因此评分最低的 13 号车队将获得下一个评分最高的车手。

最后，如果您将每个车队的当前车手评分加在一起，并首先按最低评分排序，那么您可以将最后 13 名车手添加到车队中，其中总排名最低的车队将获得评分最高的剩余车手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:07:48.567

您有限制 - 每队 3 名车手，最多 39 名车手，评级分类为低/中/高，每个团队的每个级别都有一名车手。

因此，驱动程序的数量为 3xN。是这样吗？

而且你有优化的目标——媒体应该最大限度地接近。作为要优化的数字，（您提到的适应度），使用这些介质的标准平方。

Teams Mediums=M [i] , i - 车队数量
N -车队数量
A - 所有媒介或所有车手的平均值（相同数量）
A=sum(driver's rate)/(3*N)
S(Square of standard)= sum (((M [i] -A) ²

标准本身可以视为 sqrt，但您实际上并不需要它。

每个班级有 N 个司机。现在只需尝试每个三和弦组合并降低 S。

作为一种快速的方法，我看到以下内容：（选择最好的 1 级驱动程序，以及最差的 2 级和 3 级驱动程序。用剩下的驱动程序重复。如果你不听我的下一个建议）

问题是，通常更好的驱动程序之间的差异大于更差的驱动程序之间的差异。而一号车手的车队通常绝对是最好的。如果您想避免这种情况，您应该更改速率增益算法，以便驱动程序将在 500 和 5000 之间相对均匀地分布。

# php - ajax xhr lengthComputable 使用 php 文件返回 false

> ID：16034312
> 
> 赞同：3
> 
> 时间：2013-04-16T10:11:47.810
> 
> 标签：php, xmlhttprequest

我正在使用 XMLHttpRequest 执行 ajax 请求，以显示请求的进度。它适用于 html 文件，但 evt.lengthComputable 使用 php 文件返回 false。

我的 php 文件是用 utf-8 编码的，没有什么特别的。

```
 xhr: function()
            {

              console.log('xhr');
              var xhr = new XMLHttpRequest();

              xhr.addEventListener('loadend', uploadComplete, false);
              function uploadComplete(event) {
                  console.log('uploadComplete');
                  //do stuff
              }

              //Download progress
              xhr.addEventListener("progress", function(evt){
                console.log([evt.lengthComputable, evt.loaded, evt.total]);
                if (evt.lengthComputable) {
                  var percentComplete = (evt.loaded / evt.total) * 100;

                }
              }, false);
              return xhr;
            } 
```

感谢您的帮助:)！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T12:11:22.563

因为 php 文件是动态的，所以需要设置正确的 Content-Length 标头：

```
<?
ob_start();
/* your code here */

$length = ob_get_length();
header('Content-Length: '.$length."\r\n");
header('Accept-Ranges: bytes'."\r\n");
ob_end_flush(); 
```

# c# - OPOS PosPrinter.PrintNormal 不打印

> ID：16034319
> 
> 赞同：2
> 
> 时间：2013-04-16T10:12:06.433
> 
> 标签：c#, opos, pos-for-.net

以下是我的代码：

```
PosExplorer posExplorer = new PosExplorer();
DeviceCollection receiptPrinterDevices = posExplorer.GetDevices(DeviceType.PosPrinter);
DeviceInfo receiptPrinterDevice = posExplorer.GetDevice(DeviceType.PosPrinter,"SRP2");
PosPrinter printer = (PosPrinter)posExplorer.CreateInstance(receiptPrinterDevice);

printer.Open();
printer.Claim(10000);
printer.DeviceEnabled = true;
printer.PrintNormal(PrinterStation.Receipt, "test print 1"); 
```

我调试并且一切都毫无例外地进行了，已经确认目标打印机是正确的，但是打印机没有打印任何东西。有什么步骤我做错了吗？非常感谢任何指导。谢谢

* * *

如果有帮助，我的打印机接口通过以太网连接到特定 IP。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T07:53:05.040

问题似乎是您没有在字符串`\n`末尾发送换行符（）`PrintNormal`，没有它，服务对象只会缓冲行数据，等到它看到`\n`之前将数据发送到设备。

```
printer.PrintNormal(PrinterStation.Receipt, "test print 1\n"); 
```

来自 .net 文档的 POS`PrintNormal`

> 换行/换行（10 进制）
> 
> 打印行缓冲区中的任何数据，并馈送到下一个打印行。（打印该行不需要回车。）

这是因为打印机必须一次打印一个完整的行，所以它会等到你告诉它你已经完成了一行才开始打印，这允许你使用 2 次或更多`PrintNormal`调用来建立单行打印输出如果需要（例如在循环中），则提供行数据。

我在联网的 POS 打印机（Tysso PRP-250）上运行了以下代码，使用 \n 它打印行，没有它则不会。

```
PosExplorer posExplorer = new PosExplorer();
DeviceInfo receiptPrinterDevice = posExplorer.GetDevice(DeviceType.PosPrinter, "SRP2");
PosPrinter printer = posExplorer.CreateInstance(receiptPrinterDevice) as PosPrinter;

printer.Open();
printer.Claim(10000);
if (printer.Claimed) 
{
    printer.DeviceEnabled = true;
    printer.PrintNormal(PrinterStation.Receipt, "test print 1\n");
    printer.DeviceEnabled = false;   
}
printer.Release();
printer.Close(); 
```

# linux - 在同一台机器上配置 netem

> ID：16034323
> 
> 赞同：1
> 
> 时间：2013-04-16T10:12:12.907
> 
> 标签：linux, networking

我想在从我的系统访问一些文件时引入延迟，以便我可以在从网络访问数据时测量延迟对我的应用程序的影响（使用`netem`模块进行模拟）。

我做了以下事情来实现这一点： -

我使用了两台机器`Host1`，`Host2`并将应用程序要访问的文件放在可以访问的`Host1`硬盘上，`/net/<login>/Host1/data`然后启动我的应用程序并使用上述路径`Host2`访问数据。`Host1`

我还介绍了`Host1`使用延迟，`tc qdisc del dev eth0 root netem delay 20ms`这样每当从`Host2`应用程序访问文件时，从 Host1 访问数据的延迟应该是 20 毫秒。

我有几个疑问：

1.  有没有一种方法可以让我在设置延迟的同一台机器上运行应用程序。我不想要我将要运行的应用程序的延迟（有时可以从另一台服务器访问应用程序，所以如果我在有延迟的机器上启动应用程序，那么应用程序也会受到影响）。那么，有没有一种方法可以只在访问文件时引入延迟。

2.  我是否正确使用`tc`命令来测试我的场景。所以我只需要确认我是否正确使用了`tc`命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T20:45:54.113

需要明确的是，netem 旨在测试网络流量整形，而不是硬盘流量......

1.  [您可以通过构建树](http://mytestbed.net/projects/omf/wiki/NetEM_examples_of_rules)将您的 netem 规则限制在本地主机上的特定测试端口。它相当深奥，但可能。

2.  一般情况对我来说是正确的。为资源提供服务的主机应该`tc`在其上运行。第二台主机应该是监视器/测量仪。

# jquery - 在 html 中调用的 JQuery 自定义函数？

> ID：16034330
> 
> 赞同：1
> 
> 时间：2013-04-16T10:12:24.173
> 
> 标签：jquery, function, firefox

我正在使用旧版本的 Firefox（由于各种原因，我无法更新它）。而且我不能使用 jQuery 事件处理程序（它们似乎在旧浏览器上泄漏内存）。

所以我被迫使用以下代码：

```
<div class="somediv" onclick="dostuff()"></div> 
```

问题是，代码不起作用。为什么？

我的Javascript代码：

```
$(document).ready(function() 
{
   function dostuff()
   {
       $('#someotherdiv').html('hello');
   }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T10:15:49.653

您已将函数放置在`ready`事件处理程序中，因此它在该范围内是本地的。将函数放在根级别，以便全局可用：

```
function dostuff() {
  $('#someotherdiv').html('hello');
}

$(document).ready(function() {
  // whatever you need to do when the page has loaded
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:14:22.610

把函数放在外面`$(document).ready(`就行了，下面不需要把函数放在里面`$(document).ready(`

```
function dostuff()
   {
       $('#someotherdiv').html('hello');
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:15:49.933

```
$(document).ready(function() {

}); 
```

你的功能在这里

```
 function dostuff()
   {
       $('#someotherdiv').html('hello');
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T10:20:22.660

另一种方式：使用jQuerys事件系统来分配一个点击处理程序

```
$(document).ready(function() {
    $('.somediv').click(function () {
        $('#someotherdiv').html('hello');
    }
}); 
```

# asp.net-mvc-4 - 选择列表操作将 2 个集合合并到一个列表中

> ID：16034336
> 
> 赞同：2
> 
> 时间：2013-04-16T10:12:40.687
> 
> 标签：asp.net-mvc-4, selectlist, selectlistitem

```
ViewBag.WList = new SelectList(_bdb.BMW.OrderBy(o => o.NAME).AsEnumerable(), "ID", "NAME"); 
```

这就是我在控制器中使用视图代码下方设置我的选择列表的方式。

```
@Html.DropDownList("WOptions", (SelectList)ViewBag.WList, "Select an option", new { style = "width:250px;" }) 
```

我的数据库中有一个表，我也无法添加新记录，我需要将其作为主要选项列表进行引用，此外，我还需要添加 2 条新记录来引用异常。

基本上在我的创建表单上，我有我的选项列表和类型列表，因为其中一个选项不合适，因此已将 2 个新选项添加​​为类型列表形式的不同下拉列表。

记录或显示它基本上不是问题，但我的剑道列表上有一个基于上面代码的过滤器。

我想知道如果我可以使用现有代码或需要使用不同的方法，将 2 个选项添加到病房列表中的最佳方法是什么？

另外我试过，

```
SelectList options = new SelectList(_bdb.BMW.OrderBy(o => o.NAME).AsEnumerable(), "ID", "NAME");
        options.ToList().Insert(11, (new SelectListItem { Text = "Example1", Value = "11" }));
        options.ToList().Insert(22, (new SelectListItem { Text = "Example2", Value = "22" }));
ViewBag.WList = options; 
```

虽然这仍然显示原始选择列表，但它不显示新项目，这是迄今为止唯一没有导致错误的变体。

任何想法或建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:03:03.607

Linq 扩展 .ToList() 返回一个新的 List 实例。所以`options.ToList()`不引用内部列表，这就是为什么后面的两项没有插入到内部列表中。四处走走，

```
var bmws = _bdb.BMW.OrderBy(o => o.NAME).Select(x => new { ID = x.ID, NAME = x.NAME }).ToList();
bmws.Insert(11, (new { ID = "11", NAME = "Example1" }));
bmws.Insert(22, (new { ID = "22", NAME = "Example2" }));
var options = new SelectList(bmws.AsEnumerable(), "ID", "NAME"); 
```

我没有测试过代码，但这应该可以解决问题。希望这可以帮助。

# java - 从字符串生成正则表达式

> ID：16034337
> 
> 赞同：10
> 
> 时间：2013-04-16T10:12:43.173
> 
> 标签：java, regex

我希望从包含数字的字符串生成正则表达式，然后将其用作模式来搜索类似的字符串。例子：

```
String s = "Page 3 of 23" 
```

如果我将所有数字替换为`\d`

```
 StringBuilder sb = new StringBuilder();
    for (int i = 0; i < s.length(); i++) {
    char c = s.charAt(i);
    if (Character.isDigit(c)) {
        sb.append("\\d"); // backslash d
    } else {
        sb.append(c);
        }
    }

    Pattern numberPattern = Pattern.compile(sb.toString());

//    Pattern numberPattern = Pattern.compile("Page \d of \d\d"); 
```

我可以使用它来匹配相似的字符串（例如`"Page 7 of 47"`）。我的问题是，如果我天真地这样做，一些元字符（例如`(){}-`等）将不会被转义。是否有一个库可以做到这一点，或者我必须也不能逃避正则表达式的详尽字符集？（我可以尝试从[Javadocs](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)中提取它们，但我担心会遗漏一些东西）。

或者是否有一个已经这样做的库（我现阶段不想使用完整的自然语言处理解决方案）。

注意：@dasblinkenlight 的编辑答案现在对我有用！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T10:18:53.663

Java 的正则表达式库提供了这个功能：

```
String s = Pattern.quote(orig); 
```

“引用”字符串将转义其所有元字符。首先，转义你的字符串，然后通过它并用替换数字`\d`来制作一个正则表达式。由于正则表达式库使用`\Q`and`\E`进行引用，因此您需要将您的正则表达式部分括在 and 的反引号`\E`中`\Q`。

我将在您的实现中更改的一件事是替换算法：我不会逐个字符地替换，而是替换成组的数字。`Page 3 of 23`这将允许从匹配字符串（如`Page 13 of 23`and ）生成表达式`Page 6 of 8`。

```
String p = Pattern.quote(orig).replaceAll("\\d+", "\\\\E\\\\d+\\\\Q"); 
```

无论最初有什么页码和计数，这都会[产生。](http://ideone.com/fvo6V9) `"\QPage \E\d+\Q of \E\d+\Q\E"`输出只需要一个，而不是两个斜杠`\d`，因为结果直接馈送到正则表达式引擎，绕过 Java 编译器。

# eclipse - Hadoop - 输入路径不存在

> ID：16034339
> 
> 赞同：2
> 
> 时间：2013-04-16T10:12:46.250
> 
> 标签：eclipse, ubuntu, hadoop, mapreduce

我确实设置了 hadoop Ubuntu OS，遵循了所有必要的步骤，1.创建了 hdfs 文件系统 2.将文本文件移动到输入目录 3.有权访问所有目录。但是当运行简单的字数统计示例时，我得到了

```
Exception in thread "main" org.apache.hadoop.mapreduce.lib.input.InvalidInputException: Input path does not exist: file:/user/root/input
at org.apache.hadoop.mapreduce.lib.input.FileInputFormat.listStatus(FileInputFormat.java:224) 
```

但是，输入路径是有效的，甚至可以从 Eclipse 本身查看该路径中的文件，所以请帮助我错了。

附上截图以供参考 ![在此处输入图像描述](https://i.stack.imgur.com/4MU4x.jpg)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T19:51:58.190

在您的代码中添加以下 2 行：

```
config.addResource(new Path("/HADOOP_HOME/conf/core-site.xml"));
config.addResource(new Path("/HADOOP_HOME/conf/hdfs-site.xml")); 
```

您的客户正在调查本地 FS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-19T11:21:59.080

For hadoop-2.2.0 on windows 7, I added the below lines and it solved the issue (NOTE: My Hadoop Home is: C:\MyWork\MyProjects\Hadoop\hadoop-2.2.0)

Configuration conf = new Configuration();

conf.addResource(new Path("C:\MyWork\MyProjects\Hadoop\hadoop-2.2.0\etc\hadoop\core-site.xml"));

conf.addResource(new Path("C:\MyWork\MyProjects\Hadoop\hadoop-2.2.0\etc\hadoop\hdfs-site.xml"));

# c# - 是否有地方可以捕获所有信号器错误？

> ID：16034344
> 
> 赞同：4
> 
> 时间：2013-04-16T10:12:54.407
> 
> 标签：c#, signalr

我正在将 SignalR 与 mvc4 c# Web 应用程序一起使用。我创建了 ChatHub 类：Hub。是否有一个事件我可以在服务器端注册以捕获从信号器抛出的所有错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:10:00.830

所有内部 SignalR 错误都与用户定义的集线器方法错误分开记录。

要记录内部 SignalR 错误，请参阅 SignalR 示例 web.config 诊断部分：[https ://github.com/SignalR/SignalR/blob/master/samples/Microsoft.AspNet.SignalR.Hosting.AspNet.Samples/Web.config](https://github.com/SignalR/SignalR/blob/master/samples/Microsoft.AspNet.SignalR.Hosting.AspNet.Samples/Web.config)

要记录集线器方法调用错误，请创建集线器管道模块：[SignalR 异常日志记录？](https://stackoverflow.com/questions/12608874/signalr-exception-logging/12613311)

# css - 如何使用 LESS 引用前两个元素/标签/类

> ID：16034348
> 
> 赞同：1
> 
> 时间：2013-04-16T10:13:11.153
> 
> 标签：css, class, less

我有这个 html 标记：

```
<figure class="about half">
    <figcaption class="head_section">
        <h3>About</h3>
    </figcaption>
</figure> 
```

这个LESS设置：

```
 figure {
    //some style

    &.half {
      width: 48%;
    }

    figcaption {

      h3 {

        .about & & {
          // what i need to do but isn't working
        }
      }
    }

    &.about {

      h3 {
        // some style i have which is working
      }
    }
  } 
```

所以，我的问题是如何引用两个 previus 类`figure.about`以免过时`h3`。我希望这很清楚......非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T14:59:21.747

我仍然不确定我是否理解您在这里想要实现的目标，因为您没有提供所需的 css 输出。我有点设法从您的问题中提取的想法是一个看起来像这样的 CSS：

```
figure {
  /* some style */
}
figure.half {
  width: 48%;
}
figure.about figcaption h3 {
  /* what i need to do but isn't working */
} 
```

这个对吗？

这是一种使它起作用的方法`&`：

```
figure {
    /* some style */
    &.half {
        width: 48%;
    }
}
figcaption {
    h3 {
        .about & {
            /* what i need to do but isn't working */
        }
    }
} 
```

这里的事情是`&`返回上面所有嵌套级别的“路径”，所以你需要用你想要使用的规则来构建嵌套规则（在我们的例子中，我把规则`figcaption`移出了`figure`规则）。所以这应该给你你想要的选择器外观。但是，嵌套规则的结构通常取决于您想要使用`@variable`继承和范围引用的方式，并且在某些情况下，它只会让您难以完全按照您想要的方式构建结构选择器，但是几乎永远不会有需要在您的选择器中包含整个 html 结构 - 就像您的情况`figure.about h3`一样`figure.about figcaption h3`，您可能不会`h3`在图形容器中添加更多元素。

# java - 在 Java 并发中如何真正访问方法

> ID：16034352
> 
> 赞同：3
> 
> 时间：2013-04-16T10:13:18.533
> 
> 标签：java, concurrency

我想深入了解 Java 是如何工作的。所有教程的水平都太高了，所以我有几个问题：

1.  鉴于此代码：

    ```
    class Example {
      public void foo() {
        int number = getRandomNumber();
        System.out.println(number); 
      }
    } 
    ```

    假设在上面的例子中，`foo()`方法可以被多个线程访问。每个线程是否都有自己的正确`number`变量值，或者第二个线程是否可以修改第一个线程的值（因此它们都打印相同的值）？

2.  如果`int number`是决赛会发生什么？

我想知道的主要事情是，当我进行一些初始化（连接，...）时，我想确保线程不会相互干扰。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T10:17:57.750

> 每个线程都有自己正确的数字变量值，还是第二个线程可以修改第一个线程的值（所以它们都打印相同的值）？

将其视为*每个方法调用*`foo`都有自己的变量会更清楚——它是方法中`number`的局部变量。因此，如果这是某种递归方法，*即使在单个线程中*`number`，您也可能会同时使用多个变量，因为它们是该方法的不同调用。

 *没有其他线程可以更改局部变量的值，您也无法更改任何其他代码中一次调用的值。这是调用状态的一部分。

> 如果 int 数是 final 会发生什么？

基本上，这将阻止您在初始化后更改变量的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T10:16:48.607

**方法中的所有本地成员都将在堆栈上，因此每个方法都有自己的数字变量副本。**

如果数字是最终的，那么每个线程仍然会有自己的数字副本。声明最终只会告诉编译器这个变量不会改变，所以编译器可以在他这边进行优化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T10:16:14.103

***在***方法中声明的所有变量都是堆栈本地的。进入该方法的每个线程都将为那些对其他线程完全不可见的变量获取自己的值。声明变量 final 不会改变这一点……它只会影响您是否可以访问这些变量，例如，在匿名内部类中。

现在，您*可能*会对从该方法检索到的值有一些并发问题`getRandomNumber`——这取决于它的实现以及它是否访问共享（类）状态。但那是理论，因为你没有展示它的实现。

对于咧嘴笑和咯咯笑，这是显示本地方法堆栈的字节码：

```
public class MyClass {
    public void myMethod() {
        int tField = 10;
        System.out.println(tField);
    }
} 
```

字节码：

```
 public void myMethod();
    flags: ACC_PUBLIC
    Code:
      stack=2, locals=2, args_size=1         // <-- Each thread gets its own
         0: bipush        10
         2: istore_1      
         3: getstatic     #2                  // Field java/lang/System.out:Ljava/io/PrintStream;
         6: iload_1       
         7: invokevirtual #3                  // Method java/io/PrintStream.println:(I)V
        10: return 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T10:16:18.197

1.  每个线程都有自己的局部变量副本，因为每个线程都有自己的调用堆栈。
2.  您将无法在方法的其他地方为该最终变量分配任何其他值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T10:16:32.270

`number`是一个局部变量，而不是一个字段，所以它存在于堆栈中，每个线程都有自己的版本。

您只需要考虑共享状态的线程安全性，即在堆上分配的数据，例如对象的字段。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-16T10:16:40.870

在回答您的两个问题时`number`- 每个线程都有自己的变量 - 没有线程能够改变任何其他线程的局部变量，无论它是否`final`存在。

所有局部变量都是唯一的 - 每个调用该方法的线程在堆栈上都有一个副本。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-16T10:17:26.847

每个线程都有自己的调用堆栈。

在该调用堆栈上有堆栈帧。每个方法调用一个。

在该堆栈框架内是局部变量（除其他外）。

所以是的，`foo`方法的每次调用都有自己的`number`变量。

拥有一个`final`局部变量并不会从根本上改变这一点。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-16T10:22:59.103

根据示例代码

1.  在方法上下文中，并发访问的线程`foo()`将有自己的堆栈来执行`foo()`方法。局部变量不共享。

2.  就并发访问而言，没有任何问题。拥有它最终将确保内部`foo()`方法编号值不会更新。

如果对象或静态变量在多个线程之间共享，则会出现并发场景并且线程可能会干扰。

下面如果 XYZ 类的对象在两个线程之间共享，则由一个线程更新的数字可能会由第二个线程打印。

```
 class XYZ {
static int number = 0;
  public void foo() {
    number = getRandomNumber();
    System.out.println(number); 
  }
} 
```*

# ajax - 如何处理 ASP.net MVC Ajax 加载页面上的 jQuery 事件？

> ID：16034354
> 
> 赞同：2
> 
> 时间：2013-04-16T10:13:20.847
> 
> 标签：ajax, asp.net-mvc, jquery-mobile, asp.net-mvc-4

我有一个问题。

我是 jQuery Mobile 世界的新手，对于 ASP.Net MVC 部分，我有点迷茫。

这是我的问题：在我的移动网站中，我想更改导航栏（我使用的更像是应用程序栏）按钮，而我在编辑页面或主页等上......

所以这些页面（编辑，显示）是用ajax加载的，在这些页面上我试图触发一个事件，比如：

```
$(document).ready(function(){
   alert("Hello !");
}); 
```

但是经过一些研究，我发现在带有 Ajax 的 JQM 中，事件不是这样工作的，而是更像这样：

```
$(document).bind('pageinit', function(){
   alert("Hello !");
}); 
```

但这对我不起作用（每个页面更改都会触发事件），可能是因为在 ASP.Net MVC Mobile 中我们只有一个`data-role="page"`，其余内容在 ajax 中加载`data-role="content"`，所以我真的不知道加载“Ajax Loaded Kind of Page”时如何触发事件？

我曾尝试在这些页面之一的列表视图上生活/绑定，但这也不起作用：

```
$("[data-role='listview']").live('pageinit', function () {
    alert("hello");
}); 
```

为了更准确地了解我正在尝试做的事情：在 ASP.Net MVC 中，我的布局（我所有页面的共同点）具有`div`一个`data-role="page"`属性。这个数据角色是我所有应用程序独有的，需要处理它。但事实是，当我在我的代码中加载另一个 ASP.Net MVC 页面时：

`<div data-role="page" >`
`<div data-role="content"> Here my ASP.Net MVC Page</div>`
`</div>`

我不能使用，`$(document).bind('pagenit')`因为我不加载页面（data-role=page），而只是`data-role="content"`.

如果您有任何想法，我会很高兴听到（更多阅读）它，提前感谢，如果我的英语不是真的“可以理解”，我很抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T18:20:49.090

Jquery Mobile gets the view through the AJAX and displays it. Due to this, the general events miss out since it is an AJAX call.

The best option is to disable Ajax for every form, you need to mention on each redirection call as well

data_ajax = "false"

Once it becomes a regular call, all Jquery events work normally!

# php - PHP Crawler 用于从外部站点提交并获取结果

> ID：16034356
> 
> 赞同：1
> 
> 时间：2013-04-16T10:13:26.103
> 
> 标签：php, html, forms, web-crawler

对于我正在开发的系统，我需要以编程方式转到特定页面。在表单中填写一个字段（我知道输入元素的id和名称），提交并存储结果。

我确实有权从我也从中获取信息的网站上执行此操作。

我遇到的问题是，我相信脚本可以工作，但是因为外部表单的“操作”正在重定向到同一页面，并在表格中显示结果，它只是试图将我的个人网页重定向到同一目录，当然，这在我的服务器上不存在。

任何帮助表示赞赏，这是我到目前为止所拥有的：

```
//extract data from the post
extract($_POST);

//set POST variables

//URL IS SET, I HAVE JUST TOOK IT OUT OF THIS CODE SNIPPET
$urltopost = 'blahblah.com';

$datatopost = array ( 
's_3_2_5_0' => 0130016825566667, 'SWEFo' => 'SWEForm3_0',  'SWEField' => 's_3_1_0_0', 'SWENeedContext' => 'true',
'W' => 't', 'SWECmd' => 'InvokeMethod', 'SWEMethod' => 'SearchForLicence', 'SWESP' => 'false', 'SWEDIC' => 'false',
'SWEReqRowId' => '0','SWEView' => 'LDL+Licence+Query+View','SWEC' => '3','SWEBID' => '1363349905','SWEGHOTO' => 'true',
'SWETS' => '1363349913267', 'SWEApplet' => 'LDL+Query+Licences');

$ch = curl_init ($urltopost);
curl_setopt ($ch, CURLOPT_POST, true);
curl_setopt ($ch, CURLOPT_POSTFIELDS, $datatopost);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 0);
$returndata = curl_exec ($ch);

echo $returndata; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:23:01.000

该表单返回带有执行重定向的 JavaScript 的 HTML。

```
window.location.replace("/web/start.swe?SWECmd=GotoView&SWEView=LDL+Asset+Query‌​+Results+View&SWERF=1"); 
```

您需要在输出之前从 $returndata 中删除它。无论如何，HTML 中还有许多其他相对 URL，例如图像的 URL。

您最好只从结果中提取数据并生成您自己的 HTML 页面（搜索“使用 PHP 从 HTML 中提取数据”）。

# emacs - 启动选择以替换 Emacs 的前向词

> ID：16034357
> 
> 赞同：1
> 
> 时间：2013-04-16T10:13:26.330
> 
> 标签：emacs, elisp

我想替换 Emacs 的默认正向词和反向词以更像 Visual Studio 的操作 - 我发现它更适合 Perl 编程。我首先尝试破解语法表，但没有达到我想要的效果。然后我想出了以下内容：

```
(defconst perl-movement-stop-chars "a-zA-Z$@%_0-9'")
(defconst perl-movement-stop-pattern (concat "[" perl-movement-stop-chars "]"))
(defconst non-perl-movement-stop-pattern (concat "[^" perl-movement-stop-chars "]"))

(defun perl-forward-word ()
  (interactive)
  (if (looking-at perl-movement-stop-pattern)
      (progn
        (if (re-search-forward non-perl-movement-stop-pattern nil t)
            (backward-char)))
    (if (re-search-forward perl-movement-stop-pattern nil t)
        (backward-char))))

(defun perl-backward-word ()
  (interactive)
  (backward-char)
  (if (looking-at perl-movement-stop-pattern)
      (progn
        (if (re-search-backward non-perl-movement-stop-pattern nil t)
            (forward-char)))
    (if (re-search-backward perl-movement-stop-pattern nil t)
        (forward-char))))

(add-hook 'cperl-mode-hook
          (lambda()
            (local-set-key [C-right] 'perl-forward-word)
            (local-set-key [C-left] 'perl-backward-word)
            linum-mode)) 
```

这就是我想要的 - 几乎：当从缓冲区的第一个单词内向后移动时，我仍然必须处理这种情况。但这不是我的问题。

这样做的问题是，当我键入 CS-right 时，选择没有开始，因为我的钩子没有安装（或在其他模式下）。如果我启动选择（例如通过点击第一个 S-right），我的功能会扩展它。

我对 elisp 编程知之甚少，我只是在这里猜测我的方式。我将不胜感激。谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:47:03.243

要开始`shift-select-mode`工作，您需要使用`(interactive "^")`. 试试`C-h f interactive RET`。

顺便说一句，你可以大大简化你的代码：向前移动，只是`(re-search-forward ".\\(\\_<\\|\\_>\\)" nil t)`向后移动，使用`(re-search-backward "\\(\\_<\\|\\_>\\)." nil t)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T17:31:37.673

我不确定你到底想要什么，但我想我会提供这个。我有一个包，我称之为[syntax-](https://bitbucket.org/jpkotta/syntax-subword) subword（在 Melpa 中可用）。它使单词移动更加细粒度，以至于我几乎从不按字符移动，并使用 isearch 等其他解决方案来移动更大的距离。

从评论：

```
;; This package provides `syntax-subword' minor mode, which extends
;; `subword-mode' to make word editing and motion more fine-grained.
;; Basically, it makes syntax changes, CamelCaseWords, and the normal
;; word boundaries the boundaries for word operations.  Here's an
;; example of where the cursor stops using `forward-word' in
;; `emacs-lisp-mode':
;;
;; (defun FooBar (arg) "doc string"
;; |     |      |    |     |      |  standard
;; |     |   |  |    |     |      |  subword-mode
;; ||    ||  |  |||  ||||  ||     || syntax-subword-mode
;; ||     |      ||  | ||   |     |  vim 
```

# asp.net - 关闭浏览器时执行

> ID：16034363
> 
> 赞同：0
> 
> 时间：2013-04-16T10:13:40.610
> 
> 标签：asp.net, ajax, asp.net-mvc, asp.net-mvc-3, c#-4.0

我知道这是个愚蠢的问题，但会解决我的疑问。

我正在实现一个 Web 应用程序`ASP.NET` `MVC 4`，其中用户必须上传一些文档。我有一个视图，用户必须上传文件，在文本框中写标题，描述。我将文件上传为 ajax，提交后，用户有写标题等m然后提交。

我想知道这种情况可能会发生，用户将仅使用 ajax 上传文件然后关闭窗口。这样文件已上传，但没有用。

所以，我想问一下，在这种情况下，文件是否也可能从服务器中删除，或者是否有其他类似的解决方案？谢谢 ，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:26:36.337

我认为最好在上传时在数据库中插入一条记录，指示哪些文件有用，哪些必须删除，然后您可以编写一个服务，例如每隔一小时执行一次以删除无用的文件。

# python - 如何读取一个文件夹中的所有文件并在 python 中对它们应用函数？

> ID：16034364
> 
> 赞同：1
> 
> 时间：2013-04-16T10:13:40.910
> 
> 标签：python, file, function, directory

我想对一个文件夹中的所有文件运行一个函数并从中创建新文件。我已将一个文件的代码放在下面。如果你能帮助我，我将不胜感激。

```
def newfield2(infile,outfile):
    output = ["%s\t%s" %(item.strip(),2) for item in infile]
    outfile.write("\n".join(output))
    outfile.close()
    return outfile

infile = open("E:/SAGA/data/2006last/325125401.all","r")
outfile = open("E:/SAGA/data/2006last/325125401_edit.all","r") 
```

我想更改“E:/SAGA/data/2006last/”文件夹中的所有文件并创建带有编辑扩展名的新文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T10:26:57.910

用于`os.listdir()`列出目录中的所有文件。该函数只返回文件名，而不是完整路径。该[`os.path`模块](http://docs.python.org/2/library/os.path.html)为您提供了根据需要构建文件名的工具：

```
import os

folder = 'E:/SAGA/data/2006last'

for filename in os.listdir(folder):
    infilename = os.path.join(folder, filename)
    if not os.path.isfile(infilename): continue

    base, extension = os.path.splitext(filename)
    infile = open(infilename, 'r')
    outfile = open(os.path.join(folder, '{}_edit.{}'.format(base, extension)), 'w')
    newfield2(infile, outfile) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:26:35.817

```
import os

def apply_to_all_files:
    for sub_path in os.listdir(path):
        next_path = os.path.join(path, sub_path)
        if os.path.isfile(next_path):
            infile = open(next_path,"r")
            outfile = open(next_path + '.out', "w")
            newfield2(infile, outfile) 
```

# javascript - 将输入字段的两个值传递给脚本并组合以进行搜索

> ID：16034365
> 
> 赞同：4
> 
> 时间：2013-04-16T10:13:41.287
> 
> 标签：javascript, jquery

在我当前的项目中，我有两个文本字段，用户将分别在其中输入需求和区域。获取这些值后，我必须进行 ajax 调用并从数据库中获取必要的数据并将其返回。必须在任何文本字段中输入超过 4 个字符时进行 ajax 调用。只要只有一个文本字段，我就没有任何问题。

```
<input type="text" value="requirement" onkeyup="function1(this.value)" />
<input type="text" value="area" onkeyup="function2(this.value)" />

<script>
function function1(valuetosearch)
{
 //make the ajax call
}
</script>

<script>
function function2(valuetosearch2)
{
 //make the ajax call
}
</script> 
```

如何组合这两个脚本并将 ajax 中的数据作为数组传递？
PS 编写脚本的主要原因是结合两个输入字段进行搜索。例如，如果有人在需求字段中输入房屋、车辆，在区域字段中输入地点 1、地点 2。结果搜索应显示以下结果
1) 地点 1 房屋
2) 地点 1 车辆
3) 地点 2 房屋
4) 地点 2 车辆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:16:06.030

您可以为每个元素设置 id 并使用

```
document.getElementById("id1").value 
```

然后发出ajax请求

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T10:25:32.853

[http://jsfiddle.net/JMpgU/](http://jsfiddle.net/JMpgU/)

```
$("input").keyup( function () {
    var str = $(this).val() + " " + $(this).siblings().val();
    alert(str);
   //make the ajax call
}); 
```

有任意数量的输入：http: [//jsfiddle.net/JMpgU/2/](http://jsfiddle.net/JMpgU/2/)

```
$("input").keyup( function () {
    var strings = $(this).
                  siblings().
                  addBack().
                  map(function () {
                      return $(this).
                             val();
                  }).
                  toArray();
 //make the ajax call
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T10:17:53.283

尝试这个

```
<input type="text" value="requirement" onkeyup="functionABC()" id="First" />
<input type="text" value="area" onkeyup="functionABC()" id="Second" />

<script>
function functionABC()
{
   var searchString=$("#First").val()+" "+$("#Second").val();
   //make the ajax call
}
</script> 
```

将“searchString”作为参数传递。

# php - MySQL & PHP : 多关键字搜索

> ID：16034367
> 
> 赞同：14
> 
> 时间：2013-04-16T10:13:44.343
> 
> 标签：php, mysql

我有一个包含逗号分隔关键字的字符串。例如：

```
$keywords = 'keyword1, keyword2, keyword3'; 
```

我的表模式，命名`tbl_address`是这样的（简化）：

```
id        INT(11)        PRIMARY KEY, AUTO INCREMENT
address   VARCHAR(250)   NOT NULL 
```

假设我必须`MySQLi`在 PHP 中使用（不是`PDO`）。

这是我目前的方法：

```
$result = array();
$keyword_tokens = explode(',', $keywords);
foreach($keyword_tokens as $keyword) {
  $keyword = mysqli_real_escape_string(trim($keyword));
  $sql = "SELECT * FROM tbl_address WHERE address LIKE'%$keyword%'";
  // query and collect the result to $result
  // before inserting to $result, check if the id exists in $result.
  // if yes, skip.
}
return $result; 
```

这种方法有效，但性能低下。如果有很多关键字，它将进行很多查询。

我的问题是，有没有更好的方法来实现相同的目标？即返回地址包含任何关键字的所有记录的最简单方法是什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-16T10:31:36.813

一个简单的`REGEXP`可能就是你所追求的。您必须检查它对自己的效率。

`SELECT * FROM tbl_address WHERE field REGEXP 'keyword1|keyword2|keyword3';`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T10:18:39.490

```
 SELECT * FROM user;
 +---------+----------+
 | user_id | username |
 +---------+----------+
 |     101 | Adam     |
 |     102 | Ben      |
 |     103 | Charlie  |
 |     104 | Dave     |
 +---------+----------+

 SELECT * 
   FROM user 
  WHERE FIND_IN_SET(username,'adam,ben,dave') > 0;
 +---------+----------+
 | user_id | username |
 +---------+----------+
 |     101 | Adam     |
 |     102 | Ben      |
 |     104 | Dave     |
 +---------+----------+ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T10:22:41.553

你只需要一个'OR'，没有别的......

```
<?php

$result = array();
$keyword_tokens = explode(',', $keywords);
$keyword_tokens = array_map('mysqli_real_escape_string', $keyword_tokens);

$sql = "SELECT * FROM tbl_address WHERE address LIKE'%";
$sql .= implode("%' or address LIKE '%", $keyword_tokens) . "'";

// query and collect the result to $result
// before inserting to $result, check if the id exists in $result.
// if yes, skip.

return $result; 
```

**编辑：只是为了确保您还修剪关键字**

```
<?php

$result = array();
$keyword_tokens = explode(',', $keywords);
$keyword_tokens = array_map(
    function($keyword) {
        return mysqli_real_escape_string(trim($keyword));
    }, 
    $keyword_tokens
);

$sql = "SELECT * FROM tbl_address WHERE address LIKE'%";
$sql .= implode("%' OR address LIKE '%", $keyword_tokens) . "'";

// query and collect the result to $result
// before inserting to $result, check if the id exists in $result.
// if yes, skip.

return $result; 
```

此外，您还应该将 db 资源链接传递给`mysqli_real_escape_string()`函数...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T10:28:18.590

进行单次查询

```
$keywordary = explode(',', $keywords);
foreach($keywordary as $keyword) {
  $keys = trim($keyword);
    $other .=" or address like '%$keys%'";
}
$sql = "SELECT * FROM tbl_address WHERE address LIKE'%$keyword%' $other";

execute query;
return $result; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T10:16:56.777

最好的方法是使用全文搜索。

[http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)

如果您不想使用全文，您可以在 WHERE 条件中使用 OR

```
SELECT * FROM tbl_address WHERE address LIKE '%$keyword%' OR adress LIKE '%$keyword2%' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-01-11T15:28:28.210

试试 WHERE IN 子句：

```
$keyword = (array)explode(',', $keywords);
for($i=0;$i=count($keyword);$i++){
   $keyword[$i]=mysqli_real_escape_string(trim($keyword[$i]),'\'" ');
}
//This is what I suggest.
$query='SELECT * FROM tbl_address WHERE address IN ("'.implode('","',$keyword).'")'; 
```

在 MySQL 5.1 上成功测试。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-16T10:22:08.443

嗨，使用联合创建一个查询并在循环结束时执行

```
$result = array();
$keyword_tokens = explode(',', $keywords);
$sql = '';
foreach($keyword_tokens as $keyword) {
  $keyword = mysqli_real_escape_string(trim($keyword));
  if (!empty($sql)) $sql .= " UNION "; 
  $sql .= "SELECT * FROM tbl_address WHERE address LIKE'%$keyword%'";
  // query and collect the result to $result
  // before inserting to $result, check if the id exists in $result.
  // if yes, skip.
} 
```

在此处执行查询。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-16T10:21:12.767

最好的方法是创建搜索字符串 WHERE 子句并将其附加到查询并运行一次。

```
$result = array();
$keyword_tokens = explode(',', $keywords);
$where = '';$i=0
foreach($keyword_tokens as $keyword) {
  $where.= " address LIKE'%".mysqli_real_escape_string(trim($keyword))."%' OR ";
}
  // trim last OR with substr_replace
  substr_replace($where, "OR", -1, 1);
  $sql = "SELECT * FROM tbl_address WHERE $where";

return $result; 
```

# mongodb - MongoDB 2.4 副本集授权

> ID：16034373
> 
> 赞同：6
> 
> 时间：2013-04-16T10:14:07.500
> 
> 标签：mongodb, mongodb-shell

如何为 mongodb 2.4.1 设置正确的授权。我的设置似乎不起作用。副本成员配置：

```
dbpath = /vol/data/mongodb/

# logfile
logpath   = /var/log/mongodb/mongodb.log
logappend = true

# socket
bind_ip = 0.0.0.0
port = 27018

# replication
replSet = <%= hostname[14,4] %>

# authentication
keyFile = /etc/mongodb.pass

# turn off legacy privilege mode
setParameter = supportCompatibilityFormPrivilegeDocuments=false
setParameter = textSearchEnabled=false

# turn off authorization
auth = true 
```

添加用户授权后：

```
> use admin
> db.addUser( { user: "admin", pwd: "xxx", roles: [ "userAdminAnyDatabase", "readWriteAnyDatabase", "dbAdminAnyDatabase" ] } ) 
```

我无法访问 rs.* 命令。

```
> use admin
> db.auth('admin','xxx')
1
> rs.status()
{ "ok" : 0, "errmsg" : "unauthorized" } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-19T10:27:35.267

我也在处理同样的问题。我有一个解决方案。

**关闭身份验证**

1.创建具有root权限的用户

`Root privilege yields readWrite access to database while userAdminAnyDatabase role doesn't.`

```
use admin
db.createUser( {
    user: "root",
    pwd: "pass",
    roles: [ { role: "root", db: "admin" } ]
  }); 
```

**开启授权**

2.以root用户登录

```
mongo -u root --authenticationDatabase admin -p 
```

然后你就可以执行你的命令了。

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T19:42:08.247

如果您有副本集，我认为您需要使用 keyFile。

取自[http://docs.mongodb.org/manual/tutorial/enable-authentication/](http://docs.mongodb.org/manual/tutorial/enable-authentication/) ：

> 使用 auth 或 keyFile 设置启用身份验证。将 auth 用于独立实例，将 keyFile 用于副本集和分片集群。keyFile 暗示身份验证并允许 MongoDB 部署的成员在内部进行身份验证。

# zend-framework - Zend 框架中的 Facebook 类型好友搜索

> ID：16034378
> 
> 赞同：-2
> 
> 时间：2013-04-16T10:14:27.973
> 
> 标签：zend-framework

我想在我的基于 zend 的应用程序中进行 Facebook 类型的朋友搜索，其中数据来自数据库，当用户点击他搜索的朋友时，他将转到他的个人资料页面。请建议我，因为我找不到很好的例子google.please 有人帮助我，并逐步告诉我这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:17:15.180

[http://www.9lessons.info/2009/06/autosuggestion-with-jquery-ajax-and-php.html](http://www.9lessons.info/2009/06/autosuggestion-with-jquery-ajax-and-php.html)

查看本教程，它可以帮助我在基于 zend 的应用程序中做同样的事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:28:32.960

看了这个：[http](http://www.zendcasts.com/autocomplete-control-with-zendx_jquery/2010/07/) ://www.zendcasts.com/autocomplete-control-with-zendx_jquery/2010/07/真的很棒。它完美地工作。

在某些阶段，您必须进行一些自定义以在列表的单击事件上调用用户配置文件

# android - 我的应用在手机上运行时崩溃

> ID：16034380
> 
> 赞同：0
> 
> 时间：2013-04-16T10:14:31.230
> 
> 标签：android, xml, imageview

我刚开始接触 android 应用程序编程，我正在从互联网上学习一切。但是当这种情况发生时，很难真正理解每一个例子和方法。无论如何，我尝试创建一个应用程序，当单击按钮时，它会显示一个倒数计时器，从 3 倒数到 1，然后它会打开一个 ImageView。

我在我的 XML 布局中定义了 TextView（用于倒计时）、Button 和 Imageview，但是当我在手机上尝试它时应用程序会崩溃。我删除了图像视图，现在它按原样启动，当我按下按钮时，会显示倒计时。

顺便说一句，当我按下“图形布局”按钮时，图像就会显示在那里。

我的 ImageView 的 XML 编码是否有问题导致它崩溃？

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<Button 
    android:id="@+id/btn1"
    android:text="@string/btnMessage"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true" />"

<ImageView 
    android:id="@+id/idrink"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:layout_below="@id/btn1"
    android:src="@drawable/idrink"
    android:contentDescription="Underwater Drinking"/>

<TextView
    android:id="@+id/tview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/iview"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="126dp"
    android:textSize="50sp"
    android:visibility="invisible" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:34:24.377

我认为问题可能是您尝试设置的 ImageView 太大。“饮料”图像的分辨率和尺寸是多少？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:07:47.963

当应用程序保留对对象的引用越来越多并且从不释放它们时，就会发生内存泄漏。

在将图像添加到布局之前尝试调整图像大小。

你可以这样做

```
int hgt = yourvalue; // both the values should be in pixels
int wdt = yourvalue; //   
Bitmap scaled = Bitmap.createScaledBitmap(largeBitmap, hgt, wdt, true); 
```

我认为这将解决您的问题...

# java - 一个客户端 - 嵌入式系统中的多个服务器

> ID：16034383
> 
> 赞同：0
> 
> 时间：2013-04-16T10:14:50.987
> 
> 标签：java, networking, embedded, ip, httpserver

假设我的 Java ME 程序将在数千个不同位置的嵌入式系统（一些安装了我的程序的盒子）中使用。这些盒子是否有可能成为服务器（最好是 REST 服务器），以便客户端可以连接到其中并检索一些提供其 ID 号的信息？这是一种罕见的架构，其中有多个服务器并且只有一个客户端。我想这些盒子的 IP 地址不会保持静态，也不可能依赖它们。那么建立与这些盒子之一的http连接的正确方法是什么？

注意：逆向架构已经建立。因此，每个盒子都是一个客户端，可以连接到 Web 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:12:15.003

最简单的方法是运行一个保留当前 {id->ip 地址} 表的服务器。每个盒子在打开时都会告诉服务器它的 IP 地址。更复杂的解决方案可以在[点对点维基百科文章中找到](http://en.wikipedia.org/wiki/Peer-to-peer)

# android - 在显示 ProgressDialog 时启用应用程序功能

> ID：16034384
> 
> 赞同：0
> 
> 时间：2013-04-16T10:14:55.190
> 
> 标签：android

在网络调用时，我在我的应用程序中显示进度对话框。在当前屏幕上，我有三个按钮。如何在显示进度对话框时启用这些按钮？有没有办法做到这一点？

显示进度对话框时是否可以启用按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T10:20:04.677

您可以将自定义对话框与以下 xml 一起使用：

```
<?xml version="1.0" encoding="utf-8"?>
<Layout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1" >
        <ProgressBar
            android:id="@+id/progressbar"
            android:layout_gravity="center"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
           />
           <Button  android:layout_height="match_parent"  android:layout_width="wrap_content"/>
    </LinearLayout>

</LinearLayout> 
```

这只是一个示例 您可以有一个进度条和一个可见的按钮。

# c++ - 对多个物体施加力

> ID：16034389
> 
> 赞同：0
> 
> 时间：2013-04-16T10:15:03.087
> 
> 标签：c++

我一直在使用 chai-3d 和 opengl 为触觉设备创建模拟。

我已经绘制了一个位于中心的球体和另一个位于中心球体周围的小球体，对于每 15 度，将根据中心球体绘制一个球体。下面的代码将绘制中心球体。

```
cShapeSphere *sphere;
cShapeSphere* sphere2;

void sphere(void)
{
    float r1=0.020;
    float a=0.0;
    float b=0.0;
    float r2=r1/6;
    float th=15;
    double pi=3.14159265;
    sphere =new cShapeSphere(r1);
    world->addChild(sphere);
    sphere->setPos(0,a,b);

    //this will draw small sphere around the main sphere
    for(int j=1;j<=24;j++)
    {
        sphere2 =new cShapeSphere(r2);
        world->addChild(sphere2);
        sphere2->setPos(0,a+(r1+r2)*cos(th*j*pi/180),b+(r1+r2)*sin(th*j*pi/180));

        //this were i apply the force
        double strength = pow((sphere2->getRadius() - length) * 8000,2);
        force = (c_pos - spos) * strength;
        //the calculated force is sent to haptic device
        hapticDevice->setForce(force);
    }
} 
```

当我尝试对所有较小的球体施加力时，仅在位于 15 度的第一个较小的球体上检测到力。无法对位于 30 度到 360 度的球体施加力。计算出的力被发送到触觉设备。问题在于球体，围绕中心球体绘制了 24 个较小的球体。我用来绘制 24 个球体的变量是 sphere2。让我们考虑我通过给出不同的变量名称来绘制球体，比如球体 1 到 24，在那里我可以毫无问题地施加力，因为我使用不同的变量，但是如果我使用相同的名称来绘制所有球体，则施加力仅在第一次迭代时。该力不适用于 24 次中的其他 23 次迭代。我必须将力与球体位置一起迭代。

# excel - excel 2010中的条件格式

> ID：16034394
> 
> 赞同：0
> 
> 时间：2013-04-16T10:15:16.760
> 
> 标签：excel

我有多列的表。在“E”列上，我想应用条件格式（来自规则管理器）。根据 M 列和 N 列中的值，E 列中相应单元格的颜色编码应更改。

问题是当我刷新表时（通过宏调用），我做了一些列插入和删除，这样 E 列中的值首先向右移动，然后向左移动。现在，当值向右移动（F 列）时，格式也会向右移动。但是，当值移回 E 列时，格式将保留在 F 列中（基于 M 和 N 的值）。

规则管理器中的“适用于”字段混乱。它应该是 "=$E$1:$E$6400" 但它更改为 "=$E$71:$E$6400, $F$1:$F$70" （该表中有 70 行的值已刷新）

如何确保格式保留到 E 列而不转移到 F 列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T09:53:36.637

我知道它是前一段时间被问到的，但也许你仍然有这个问题；）

总结一下，您正在使用对列进行一些更改的宏，它会弄乱条件格式。如何向您的宏添加更多代码 - 在任何操作之前删除条件格式，然后重新添加它并重新处理列？

添加某些代码应该不是问题 - 您可以记录它。

# css - CSS Calc 替代方案

> ID：16034397
> 
> 赞同：71
> 
> 时间：2013-04-16T10:15:26.927
> 
> 标签：css, css-calc

我正在尝试使用 CSS 而没有 jquery 动态更改 div 的宽度。**以下代码适用**于以下浏览器：[http ://caniuse.com/calc](http://caniuse.com/calc)

```
/* Firefox */
width: -moz-calc(100% - 500px);
/* WebKit */
width: -webkit-calc(100% - 500px);
/* Opera */
width: -o-calc(100% - 500px);
/* Standard */
width: calc(100% - 500px); 
```

**我还想支持 IE 5.5 及更高版本**，我发现了以下内容：表达式。这是正确的用法吗：

```
/* IE-OLD */
width: expression(100% - 500px); 
```

**我还可以支持 Opera 和 Android 浏览器吗？**

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2013-09-02T10:03:38.990

几乎总是`box-sizing: border-box`可以替换诸如`calc(100% - 500px)`用于布局的计算规则。

例如：

如果我有以下标记：

```
<div class="sideBar">sideBar</div>
<div class="content">content</div> 
```

而不是这样做：（假设侧边栏是 300px 宽）

```
.content {
  width: calc(100% - 300px);
} 
```

做这个：

```
.sideBar {
     position: absolute; 
     top:0;
     left:0;
     width: 300px;
}
.content {
    padding-left: 300px;
    width: 100%;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
} 
```

```
* {
  margin: 0;
  padding: 0;
}
html,
body,
div {
  height: 100%;
}
.sideBar {
  position: absolute;
  top: 0;
  left: 0;
  width: 300px;
  background: orange;
}
.content {
  padding-left: 300px;
  width: 100%;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  background: wheat;
}
```

```
<div class="sideBar">sideBar</div>
<div class="content">content</div>
```

**PS：**我不会在 IE 5.5 中工作（哈哈哈），但它可以在 IE8+、所有移动设备和所有现代浏览器（[caniuse](http://caniuse.com/css3-boxsizing)）中工作

**[宽度演示](http://jsfiddle.net/danield770/T92Fk/233/)**

**[高度演示](http://jsfiddle.net/danield770/T92Fk/315/)**

我刚刚从 Paul Irish 的博客中找到[了这篇文章](http://www.paulirish.com/2012/box-sizing-border-box-ftw/)，他还展示了 box-sizing 作为简单 calc() 表达式的可能替代方案：（粗体是我的）

> 我最喜欢的边界框很好解决的用例之一是列。我可能想用 50% 或 20% 的列来划分我的网格，但想通过 px 或 em 添加填充。**如果没有 CSS 即将推出的 calc() ，这是不可能的……除非你使用 border-box**。

**注意：**上述技术确实看起来与相应的 calc() 语句相同。不过还是有区别的。当使用 calc() 规则时，内容 div 的宽度值实际上是`100% - width of fixed div`，但是使用上述技术，内容 div 的实际宽度是完整的 100% 宽度，但它具有“填充”*的外观*剩余的宽度。（这可能足以满足大多数人的需求）

也就是说，如果内容 div 的宽度实际上*很重要*`100% - fixed div width`， 那么可以使用一种不同的技术 - 它利用块格式化上下文 - 可以使用（有关血腥细节，请参见[此处](https://stackoverflow.com/a/1767270/703717)和[此处）：](https://stackoverflow.com/a/11854515/703717)

1）浮动固定宽度的div

2）设置`overflow:hidden`或`overflow:auto`在内容div上

## [演示](http://jsfiddle.net/danield770/T92Fk/316/)

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-09-02T09:54:26.613

在 calc 起作用之前有一个后备。

```
width: 98%;               /* fallback for browsers without support for calc() */
width: calc(100% - 1em); 
```

在此处查看更多信息[https://developer.mozilla.org/en-US/docs/Web/CSS/calc](https://developer.mozilla.org/en-US/docs/Web/CSS/calc)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-11-12T06:49:01.887

**用这个**

```
 .content
{
    width: 100%;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    padding-right: 500px;
    margin-right: -500px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-10T08:18:19.527

刚刚花了 3 个小时的大部分时间尝试在 Android 设备上针对特定情况解决此问题，但无法让盒子大小正常工作，所以我将其链接到我的 JS 作为一个肮脏的解决方法......虽然不需要 jQuery！:)

采用 andriod 2.3 上的工作代码。

```
<div class="sessionDiv" style="width:auto;">
<img> <!-- image to resize -->
</div>
<div class="sessionDiv" style="width:auto;">
<img> <!-- image to resize -->
</div> 
```

带有事件监听器的 JS

```
var orient =
{
    orientation:window.orientation,
    width: window.innerWidth,
    check: function()
    {
        // if orientation does not match stored value, update
        if(window.orientation !== this.orientation)  
        {
            this.orientation = window.orientation; //set new orientation
            this.width = window.innerWidth; //set new width
            this.adjustIrritatingCSS(this.width); //change ui to current value
        }
        //if width does not match stored value, update
        if(window.innerWidth !== this.width)
        {
            this.width = window.innerWidth; //set new width
            this.adjustIrritatingCSS(this.width); //change ui to current value
        }
    },
    adjustIrritatingCSS: function(screenWidth)
    {   
    //disgusting workaround function
        var titleBoxes = document.getElementsByClassName('sessionDiv'); 
        var i = titleBoxes.length;
        var sessWidth = screenWidth - 300; // calc(100% - 300px); -> equivalent
        while(i--)
        {
            titleBoxes[i].style.width = String( sessWidth + "px"); 
            //resize image in auto sized div
        }
        sessWidth = null; //clear width
        titleBoxes = null; //clear nodelist
        i = null; // clear index int
    }
};

window.onload = function()
{
    window.addEventListener('resize', function(){orient.check();}); 
    //on resize, check our values for updates and if theres changes run functions
    window.addEventListener('orientationchange', function(){orient.check();});
    //on rotate, check our values for updates and if theres changes run functions
    setInterval(function(){orient.check();}, 2000);
    //occasionally check our values for updates and if theres changes run functions(just incase!!)
    orient.adjustIrritatingCSS(orient.width); 
    //sets value on first run
}; 
```

希望这可以帮助那些无法让盒子尺寸工作的人！PS我在使用这个iOS时遇到了问题......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-11T03:04:49.210

我想添加 no-calc、no-border-box（即 CSS2）替代方案。

正常流块元素最初具有`width: auto`，它实际上是包含块的宽度减去边距、边框和填充宽度。

上面的[例子](https://stackoverflow.com/a/18570513/822138)可以在没有边框的情况下完成，就像

```
.content {
    padding-left: 300px;
} 
```

同样，与

```
.content {
  margin-left: 1px;
  border-left: 1em solid;
  padding-left: 1rem;
} 
```

有效宽度为`100% - 1px - 1em - 1rem`。

对于绝对定位的元素，`height: auto`具有相似的属性：

```
.content {
  position: absolute;
  top: 0;
  bottom: 0;
  margin-bottom: 1px;
  border-bottom: 1em solid;
  padding-bottom: 1rem;
} 
```

这里的有效高度是`100% - 1px - 1em - 1rem`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-23T22:37:11.510

使用 % 或 px 更改#menuLog 宽度，您将看到神奇的效果。适用于所有设备，甚至 < 2.3

```
*{
	-moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
}
#menuLog{
  width:30%;
  /*width:300px;*/
	height: 60px;
	padding: 5px;
	background-color: #ddd;
}
#menuLog > div[inline-log="1"]{
	display: inline-block;
	vertical-align: top;
	width: 100%;
	height: 100%;
	margin-right: -60px;
}
#menuLog > div[inline-log="1"] > div[inline-log="1.1"]{
	margin-right: 60px;
	height: 100%;
	background-color: red;
}
#menuLog > div[inline-log="2"]{
	display: inline-block;
	vertical-align: top;
	width: 60px;
	height: 100%;
}
#menuLog > div[inline-log="2"] > div[inline-log="2.1"]{
	display: inline-block;
	vertical-align: top;
	width: 55px;
	height: 100%;
	background-color: yellow;
	margin-left:5px;
}
```

```
<div id="menuLog">
  <div inline-log="1">
    <div inline-log="1.1">
      One
    </div>
  </div><div inline-log="2">
     <div inline-log="2.1">
      Two
     </div>
  </div>
</div>
```

# javascript - 解析选项nodejs中的变量

> ID：16034399
> 
> 赞同：1
> 
> 时间：2013-04-16T10:15:30.913
> 
> 标签：javascript, node.js, http

嗨，我使用 http 模块向 hhtp 获取 Web 服务进行客户端调用

我将选项作为输入传递给函数。下面是代码片段

```
var headerKey="ddd"
options = {
             host: 10.0.0.0,
             port: 80,
             path:/pppp,
             headers: {
                 headerKey : 1
          }
        }; 
```

当我打印下面的选项是输出

```
options:-{"host":"10.0.0.0","port":80,"path":"/pppp","headers":{"headerKey":"1"}} 
```

我的问题是“headerkey”没有更改为 ddd 而是将变量名作为参数传递。（即）我希望输出如下

```
{"host":"10.0.0.0","port":80,"path":"/pppp","headers":{"ddd":"1"}} 
```

我被困在这里。任何有关这方面的帮助都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:18:31.770

如果您`option`的意思是更改`headerKey`为`ddd`

```
var headerKey = 'ddd';
options = {...};
options.headers.headerKey = headerKey; 
```

* * *

据我所知，您不能在 JS 中重命名属性。您可以添加另一个属性，并[让它指向与](http://jsfiddle.net/awjHc/1/)前一个相同的值：

```
options.headers[headerKey] = options.headers.headerKey;
delete options.headers.headerKey; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:22:26.817

[看看这个工作示例](http://jsfiddle.net/fhzXs/)

```
var headerKey="ddds"
 var options = {
         host: "10.0.0.0",
         port: "80",
         path:"/pppp",
headers: {}

};

options.headers[headerKey] = '1';

console.log(options);

console.log(options.headers); 
```

要将变量用作 javascript 中的键，您可以使用对象的[数组表示法](http://www.jibbering.com/faq/faq_notes/square_brackets.html)。

# android - 当您在 android 中调用 getSystemService(WIFI_SERVICE) 时，内部会发生什么？

> ID：16034402
> 
> 赞同：0
> 
> 时间：2013-04-16T10:15:45.240
> 
> 标签：android, android-wifi, android-framework

在这个`getSystemService(WIFI_SERVICE)` 被调用之后，是`WifiManager` `Constructor`从`frameworks/base/wifi/java/android/net/wifi/WifiManager.java`类调用

构造函数是：

```
public WifiManager(IWifiManager service, Handler handler) {
    mService = service;
    mHandler = handler;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:37:11.967

此类提供用于管理 Wi-Fi 连接的所有方面的主要 API。通过调用 Context.getSystemService(Context.WIFI_SERVICE) 获取此类的实例。它处理几类项目：

已配置网络的列表。可以查看和更新​​列表，并且可以修改各个条目的属性。

当前活动的 Wi-Fi 网络（如果有）。可以建立或断开连接，并可以查询有关网络状态的动态信息。

接入点扫描的结果，包含足够的信息来决定要连接的接入点。

它定义了在 Wi-Fi 状态发生任何变化时广播的各种 Intent 操作的名称。

这是执行 Wi-Fi 特定操作时使用的 API。要在抽象级别执行与网络连接相关的操作，请使用 android.net.ConnectivityManager。

这是 WifiManager.java：Android [4.2.2 中的 WifiManager 类](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.2.2_r1/android/net/wifi/WifiManager.java?av=f)

创建一个新的 WifiManager 实例。应用程序几乎总是希望使用 Context.getSystemService() 来检索标准的 Context.WIFI_SERVICE。参数： context 应用程序上下文服务 Binder 接口 Hide： - 隐藏这个，因为它接受了一个 IWifiManager 类型的参数，它是一个系统私有类。

```
public WifiManager(Context context, IWifiManager service) {
    mContext = context;
    mService = service;
    init();
} 
```

# xaml - 当我们的地铁应用程序运行时如何禁用自动锁定？

> ID：16034406
> 
> 赞同：0
> 
> 时间：2013-04-16T10:15:51.993
> 
> 标签：xaml, asynchronous, windows-8, microsoft-metro, winrt-async

我正在开发一个 Metro 应用程序，在该应用程序中，我从服务中获取一些数据，此时设备将自动锁定，因为它长时间没有响应。

那么，当服务发生某些进程/获取/同步时，如何避免 Metro 应用程序中的这种自动锁定。

我无法测试这种情况，因为我正在模拟器上测试它。

1) Metro 应用程序运行时如何避免自动锁定功能？2）我可以通过哪些可能的方式做到这一点？

请帮帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:23:12.290

请查看此文档： http: [//msdn.microsoft.com/en-us/library/windows/apps/xaml/jj152728.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj152728.aspx) DisplayRequest.RequestActive 方法可以提供帮助。

# c# - 如何使用一个 sql 查询创建多个 DataTables？

> ID：16034408
> 
> 赞同：0
> 
> 时间：2013-04-16T10:15:53.107
> 
> 标签：c#, sql-server

我正在创建一个应用程序，它每天从 SQL 数据库加载一次数据并将其保存到文本文件中。主表是一个“事务”表，其中包含有关当天进行的所有事务的数据。其中一列代表中间人呼号。我的程序首先将数据保存在 DataTable 中，然后使用 StringBuilder 我给它适当的形式，最后使用 StreamWriter 将其保存到文本文件中。

我的问题是，我如何或在流程的哪个阶段将一个表条目与另一个表条目区分开来。我想创建两个文件：一个包含中间人 A 和 B 进行的交易。到目前为止，这是我的代码：

```
// Query for Data

row = new SqlDataAdapter("SELECT [MSISDN], [Amount], [Transaction_ID], POS.[Name], MNO.[Call Sign] FROM"
                     + "[Transactions] join [POS] "
                     + "on Transactions.POS_ID = POS.idPOS "
                     + "join [MNO] on Transactions.MNO_ID = MNO.idMNO "
                     + "where [Status] = '1'", con);
row.Fill(Row);

// Save Data in StringBuilder

for (int i = 0; i < Row.Rows.Count; i++)
{
      sb.Append(Row.Rows[i].ItemArray[0].ToString()).Append(",");
      double amount = Convert.ToDouble(Row.Rows[i].ItemArray[1].ToString());
      sb.Append(Math.Round(amount, 2).ToString().Replace(",", ".")).Append(",");
      sb.Append(Row.Rows[i].ItemArray[2].ToString()).Append(",");
      sb.Append(Row.Rows[i].ItemArray[3].ToString()).Append(",");
    sb.Append(Row.Rows[i].ItemArray[4].ToString()).Append(",").Append(Environment.NewLine);
}

// Create a file from StringBuilder
mydocpath = @"C:\Transactions\" + fileDate.ToString(format) + ".txt";
FileStream fsOverwrite = new FileStream(mydocpath, FileMode.Create);
using (StreamWriter outfile = new StreamWriter(fsOverwrite))
{
       outfile.WriteAsync(sb.ToString());
} 
```

希望我足够清楚。英语不是我的强项。以及为它看起来的编码......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:19:28.650

一种选择。

将所有数据放入 DataSet。然后针对 ds.GetXml() 进行 Xsl 转换。这是一个例子：

[http://granadacoder.wordpress.com/2007/05/15/xml-to-xml-conversion/](http://granadacoder.wordpress.com/2007/05/15/xml-to-xml-conversion/)

但我要做的是完全消除 DataTable。使用 IDataReader。循环遍历数据。也许将原始查询作为“Order By Middle-Man-Identifer”，然后当 middleManIdentifer “跳转”时，关闭前一个文件并编写一个新文件。类似的东西。

你或许可以从这个演示中学到一些东西：

[http://granadacoder.wordpress.com/2009/01/27/bulk-insert-example-using-an-idatareader-to-strong-dataset-to-sql-server-xml/](http://granadacoder.wordpress.com/2009/01/27/bulk-insert-example-using-an-idatareader-to-strong-dataset-to-sql-server-xml/)

这是几个 IDataReader 助手：

[http://kalit-codesnippetsofnettechnology.blogspot.com/2009/05/write-textfile-from-sqldatareader.html](http://kalit-codesnippetsofnettechnology.blogspot.com/2009/05/write-textfile-from-sqldatareader.html)

和

[如何在 C# 中有效地从 SQL 数据读取器写入文件？](https://stackoverflow.com/questions/9055521/how-to-efficiently-write-to-file-from-sql-datareader-in-c)

# c# - 序列化“ClassName”类，具有属性 typeof(Encoding) c#

> ID：16034411
> 
> 赞同：0
> 
> 时间：2013-04-16T10:16:01.150
> 
> 标签：c#, xml, serialization, iserializable

如果它看起来很愚蠢，我很抱歉，但我真的不明白如何序列化我自己的具有属性的类：

```
public Encoding EncodingName {get;set;}. 
```

有人可以解释解决我的问题的最佳方法是什么吗？

# ruby-on-rails-3 - 水银导轨宝石的问题

> ID：16034412
> 
> 赞同：0
> 
> 时间：2013-04-16T10:16:02.867
> 
> 标签：ruby-on-rails-3, blogs, mercury-editor

我正在开发一个博客应用程序，所以我想将水银导轨宝石嵌入其中，我尝试了，我得到了工具栏，但我无法从我的显示页面编辑任何内容

即使在我使用基础前端框架的所有内容之后

```
<p><span id="page_content class="mercury-region" data-type="editable">
<%=raw  @article.content %></span></p>

<h5><span   data-type="editable"><%= @article.title %></span></h5> 
```

这是我的宝石文件

```
# Gems used only for assets and not required
# in production environments by default.
group :assets do
gem 'sass-rails',   '~> 3.2.3'
gem 'coffee-rails', '~> 3.2.1'
gem 'zurb-foundation'
# See https://github.com/sstephenson/execjs#readme for more supported runtimes
# gem 'therubyracer', :platforms => :ruby

 gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger'
gem 'simple_form'
gem 'friendly_id'
gem 'devise'
gem "rmagick"
gem "carrierwave"
gem "mercury-rails" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T03:44:23.530

从外观上看，您遵循了旧的 railscast。水银轨道项目更新非常频繁。

问题在于您在 span 标签上的属性。您可以安全地删除`class="mercury-region"`

您还需要更改`data-type="editable"`为`data-mercury="full"`.

`data-mercury`在 github 页面上查看不同的编辑类型（在属性中定义）： [https ://github.com/jejacks0n/mercury#region-types](https://github.com/jejacks0n/mercury#region-types)

我希望这会有所帮助！

# css - 如果选中复选框，则更改表格单元格样式

> ID：16034416
> 
> 赞同：1
> 
> 时间：2013-04-16T10:16:12.923
> 
> 标签：css, checkbox, html-table

我有一个表格，如果单元格被禁用，我希望每个单元格都有红色背景，如果启用则蓝色。所以我在每个单元格中插入了一个不可见的复选框。当我有标签而不是表格时，它可以正常工作（请参见此处的[示例](http://cssdeck.com/labs/css-checkbox-styles)），但它不适用于表格。

HTML：

```
 <table id="hours">
    <tbody>
      <tr>
        <td id="tdh00"><input type="checkbox" id="h00"></td>
        <td id="tdh01"><input type="checkbox" id="h01"></td>
      </tr>
    </tbody>
  </table> 
```

CSS：

```
input[type=checkbox] { visibility: hidden; }
#hours input[type=checkbox]:checked  + #tdh00 { background-color: #265BFA; }
#hours input[type=checkbox]:not(:checked) + #tdh00 { background-color: #FA2421; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:05:16.777

像下面这样尝试这是使用**JQuery**的解决方案：

**小提琴：http:** [//jsfiddle.net/RYh7U/138/](http://jsfiddle.net/RYh7U/138/)

**HTML：**

```
<table id="hours" border="1">
 <tbody>
    <tr><td id="tdh00"><input type="checkbox" id="h00"></td><td id="tdh01"><input type="checkbox" id="h01"></td></tr>
    </tbody>
</table>
</body> 
```

**CSS：**

```
input[type=checkbox] { visibility: hidden; } 
```

**查询：**

```
$("#hours td").each(function(e){ 
    var ele = $(this).children('input[type=checkbox]');
    var flag = ele.prop('checked');
    if(flag)
    {
        ele.prop('checked', false);
        $(this).css("background", "#265BFA");
    }
    else
    {
        ele.prop('checked', true);
        $(this).css("background", "#FA2421");
    }
});

$("#hours td").click(function(e){ 
    var ele = $(this).children('input[type=checkbox]');
    var flag = ele.prop('checked');
    if(flag)
    {
        ele.prop('checked', false);
        $(this).css("background", "#265BFA");
    }
    else
    {
        ele.prop('checked', true);
        $(this).css("background", "#FA2421");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:38:11.453

就目前的标记而言，这是行不通的。您正在使用`+`（兄弟）选择器，但您的表格单元格不是复选框的兄弟。在您给出的示例中，标记为：

```
<div class="slideOne">  
    <input type="checkbox" value="None" id="slideOne" name="check" />
    <label for="slideOne"></label>
</div> 
```

你的是：

```
<td id="tdh00"><input type="checkbox" id="h00"></td> 
```

因此，您正在尝试根据其子元素的状态设置父元素的样式，目前仅靠 CSS 是不可能的。

**编辑**

查看[这个工作示例](http://jsfiddle.net/cherryflavourpez/THuat/)。那个小提琴添加了`label`后面（这将有助于可访问性），并以这样的方式定位它，它可以在视觉上完成你所追求的。标记需要是：

```
<table id="hours">
    <tbody>
      <tr>
        <td id="tdh00">
            <div>
                <input type="checkbox" id="h00">
                <label for="h00">Label</label>
            </div>
        </td>
        <td id="tdh01">
             <div>
                <input type="checkbox" id="h01">
                <label for="h01">Label</label>
              </div>
        </td>
      </tr>
    </tbody>
  </table> 
```

和CSS：

```
table {
    width: 450px;
    margin: 0 auto;    
}
td {
    border: 1px solid #333;
    padding: 0;
}

td > div { position: relative; }

input[type=checkbox] { visibility: hidden; }

label {
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: red;
    text-indent: -999em;
}

input[type=checkbox]:checked  + label { background-color: #265BFA; } 
```

每个表格单元格中的额外`div`内容是必要的，因为 Firefox 无法处理相对于`td`元素的定位。

浏览器支持很好，但只支持 IE9+，因为我们使用的是`:checked`伪类。您将通过基于 JavaScript 的解决方案获得更好的支持，但我认为这是渐进增强的绝佳候选者。

**编辑 2**

如果需要支持旧的 IE，那么您将需要求助于 JavaScript。这是一个使用 jQuery[的示例。](http://jsfiddle.net/cherryflavourpez/jSbKJ/)

JavaScript 只是在表格单元格中添加了一个类`active`：大部分工作仍然使用 CSS 完成。

```
$("#hours input").on('change', function(){
    var checkbox = $(this),
        tableCell = checkbox.parents('td');

    checkbox.is(':checked') ?
        tableCell.removeClass('active') :
        tableCell.addClass('active');
}).change(); 
```

HTML 保持不变，CSS 仅略有不同，这些行替换了`:checked`伪类：

```
td { background-color: #265BFA; }
.active { background-color: red; } 
```

# delphi - 使用 Indy httpserver 在网页中查找关键字

> ID：16034424
> 
> 赞同：0
> 
> 时间：2013-04-16T10:16:36.120
> 
> 标签：delphi, pascal, indy, delphi-xe3, indy10

我正在尝试使用 Indy http 服务器在网页中查找用于代理过滤器的关键字。我已经设置了一个代理和 http 服务器，它适用于网络浏览器，但是在网页中查找关键字时我很挣扎。

我一直在尝试将内存流转换为字符串并在其中搜索关键字，但也许这是错误的做法。我对delphi的经验有限，所以我有点卡住了。

如果有人可以给我任何指示，那就太好了。

谢谢。

编辑：好的，我在这里添加了一个函数，其中'Stream'是来自http服务器的内存流，'what'是我正在搜索的关键字，但它似乎不起作用......

```
function FindInMemStream(Stream: TMemoryStream; What: String):Integer;
var
  bufBuffer, bufBuffer2: array[0..254] of Char;
  i: Integer;
begin
filter.Form2.ListBox1.Items.Add('finding');
  What := 'train';
  Result := 0;
  i := 0;
  FillChar(bufBuffer, 255, #0);          
  FillChar(bufBuffer2, 255, #0);       
  StrPCopy(@bufBuffer2, What);           
  Stream.Position:=0;
  while Stream.Position <> Stream.Size do   
  begin
    Stream.Read(bufBuffer[0],Length(What));   
    if CompareMem(@bufBuffer,@bufBuffer2,Length(What)) then       
    begin
    filter.Form2.ListBox1.Items.Add(IntToStr(Stream.Position-Length(What)));
      Result := Stream.Position-Length(What);  // not 0 : it's found keyphrase
      Exit;
    end;
    i := i + 1;
  //  filter.Form2.ListBox1.Items.Add(IntToStr(i));
    Stream.Seek(i,0)     
  end;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:06:45.160

有些库可用于 HTML 解析，例如（商业）[DIHtmlParser](http://www.yunqa.de/delphi/doku.php/products/htmlparser/index)。

DIHtmlParser 从 HTML、XHTML 和 XML 读取、提取和写入信息。

从其功能列表中：

*   完整的 Unicode 支持（UnicodeString 或 WideString，取决于 Delphi 版本）。
*   本机读取和写入超过 70 个字符集（独立于操作系统）。
*   对 TStream、内存缓冲区或字符串进行操作。
*   一次将一段 HTML 返回给应用程序。

使用这样的库，可以轻松地从 HTML 响应中提取 HTML 内容（可见文本），而查找搜索词的剩余任务将变得微不足道。

我不会尝试编写自己的 HTML 解析器，而是使用现有的库。

# css - 子菜单不适用于 IE7（子菜单未打开）

> ID：16034429
> 
> 赞同：2
> 
> 时间：2013-04-16T10:16:47.170
> 
> 标签：css

我正在处理水平菜单栏，并且使用了以下行代码。它在所有浏览器中都运行良好：

![在此处输入图像描述](https://i.stack.imgur.com/2KPMP.png)

但是当我在 IE7 和 8 上测试它时，子菜单没有打开。 ![在此处输入图像描述](https://i.stack.imgur.com/lBa9O.png)

当我从 navMenu 栏中删除阴影时，子菜单项将可见。 ![在此处输入图像描述](https://i.stack.imgur.com/8VpSW.png)

html代码：

```
<div id="navMenu">
    <div id="menuContainer">
        <ul id="coolMenu">
            <li><a href="#">Menu1</a></li>
            <li><a href="#" id="A1">Menu2</a></li>
            <li><a href="#">Menu3</a> </li>
            <li><a href="#">Menu4</a>
                <ul>
                    <li><a href="#">Menu5</a></li>
                    <li><a href="#">Menu6</a></li>
                    <li><a href="#">Menu7</a></li>
                </ul>
            </li>
        </ul>
    </div>
</div> 
```

CSS 代码：

```
#navMenu
{

height: 40px;
line-height: 40px;
background-color: #dcdcdc;
position: relative;
z-index: 40000 !important;
margin-left: auto;
margin-right: auto;
min-width: 100%;
overflow:visible; 
```

}

```
#menuContainer 
```

{

```
padding: 0px;
text-align: left;
width: 1200px;
margin: 0px auto;
z-index: 40000 !important;
  overflow:visible;
 }

#coolMenu, #coolMenu ul
{

padding: 0px;
text-align: left;
list-style: none;
list-style-type: none; /* ie6*/
}

#coolMenu > li
{

float: left;
z-index: 40000 !important;
display: block; /* ie6*/
 }

 #coolMenu li a
 {

display: block;
height: 40px;
line-height: 40px;
padding-left: 15px;
padding-right: 15px;
text-decoration: none;
z-index: 40000 !important;
 display: block; /* ie6*/
 filter:alpha(opacity=90);
}

 #coolMenu ul
 {

position: absolute;
display: none;
 z-index: 40000 !important; /* arun */
}

  #coolMenu li:hover ul
 {

display: block;

  }

 /* Main menu
  ------------------------------------------*/
  #coolMenu
{

margin: 0px;
float: left;
font-family: TradeGothic;
font-style: oblique;
font-size: 11.25px;
color: #474747;
background: #dcdcdc;
z-index: 40000 !important;
 }

  #coolMenu > li > a
  {

color: #474747;
}
  #coolMenu > li:hover > a
 {

background: #d21c1c;
color: #fff;
z-index: 40000 !important; /* arun */
 }
   /* dropdown */

  #coolMenu li:hover > ul {

    display: block;
   } 

/* Submenu
------------------------------------------*/

  #coolMenu ul
  {

    background: #d21c1c;
    z-index: 40000 !important;
  }
  #coolMenu ul li a
 {

    /*z-index: 20 !important;*/
      color: #fff;
     z-index: 40000 !important; 
  }
 #coolMenu ul li:hover a
 {

    background: red;
    z-index: 40000 !important; 
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:26:46.420

ul 默认采用边距。所以

```
#coolMenu ul{margin:0;} 
```

解决你在ie7中的问题

# ruby - 未找到 ubuntu 上的 Rails - 但在我的 gem 安装列表中

> ID：16034432
> 
> 赞同：1
> 
> 时间：2013-04-16T10:16:49.873
> 
> 标签：ruby, linux, ruby-on-rails-3, gem, rvm

我正在尝试在ubuntu上安装rails，使用rvm而不是过时的apt-get。到目前为止，我没有遇到任何问题 - rvm 工作良好，gem 和 ruby​​ 也是如此。但是当我尝试加载 Rails 时，ubuntu 给了我这个消息：

```
The program 'rails' can be found in the following packages:
 * rails
 * ruby-railties-3.2 
```

如何让我的 ubuntu 识别导轨？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:37:50.620

如果它还没有，请将其添加到您的 bashrc 文件中

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:21:57.410

你安装 Rails 了吗？

如果没有，运行

```
gem install rails 
```

# git - 从 Git 存储库中删除 DLL

> ID：16034433
> 
> 赞同：0
> 
> 时间：2013-04-16T10:16:50.573
> 
> 标签：git

我正在与其他几个人一起开发一个 git repo，他们设法在几个提交中包含了几个大型 DDL 文件。有没有办法让我从所有过去的提交中删除它们？不幸的是，它不像针对特定提交那么容易，因为它们无处不在。

我将满足于只保留 master 上的最新提交并删除它之前的所有内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:21:54.143

[http://git-scm.com/book/en/Git-Tools-Rewriting-History](http://git-scm.com/book/en/Git-Tools-Rewriting-History)

> 核选项：过滤器分支
> 
> 如果您需要以某种可编写脚本的方式重写大量提交，您可以使用另一个历史重写选项——例如，全局更改您的电子邮件地址或从每个提交中删除一个文件。该命令是 filter-branch，它可以重写您的大量历史记录，因此您可能不应该使用它，除非您的项目尚未公开并且其他人还没有基于您将要重写的提交的工作. 但是，它可能非常有用。您将学习一些常见用途，以便了解它的一些功能。
> 
> 从每次提交中删除文件
> 
> 这种情况相当普遍。有人不小心用一个粗心的 git add . 提交了一个巨大的二进制文件，而你想到处删除它。也许你不小心提交了一个包含密码的文件，并且你想让你的项目开源。filter-branch 是您可能想要用来清理整个历史记录的工具。要从整个历史记录中删除名为 passwords.txt 的文件，可以使用 --tree-filter 选项来过滤分支：
> 
> $ git filter-branch --tree-filter 'rm -f passwords.txt' HEAD
> 
> 重写 6b9b3cf04e7c5686a9cb838c3f36a8cb6a0fc2bd (21/21)
> 
> Ref 'refs/heads/master' 被重写
> 
> --tree-filter 选项在每次签出项目后运行指定的命令，然后重新提交结果。在这种情况下，您从每个快照中删除一个名为 passwords.txt 的文件，无论它是否存在。如果要删除所有意外提交的编辑器备份文件，可以运行 git filter-branch --tree-filter "rm -f *~" HEAD 之类的命令。
> 
> 您将能够看到 Git 重写树和提交，然后在最后移动分支指针。通常最好在测试分支中执行此操作，然后在确定结果是您真正想要的结果后硬重置您的主分支。要在所有分支上运行 filter-branch，可以将 --all 传递给命令。

**当心它是一个强大但也很危险的工具，告诉你的同事不要推动任何提交以防止历史混乱。**

# checkbox - 与特定类的简单表单关联

> ID：16034434
> 
> 赞同：0
> 
> 时间：2013-04-16T10:16:53.763
> 
> 标签：checkbox, simple-form

目前我有这样的事情

```
<%= f.association :interest_label_levels, :as => :check_boxes %> 
```

产生这个

```
...
<label class="checkbox"><input class="check_boxes optional" 
id="recommender_search_term_interest_label_level_ids_2" 
name="recommender_search_term[interest_label_level_ids][]" type="checkbox" value="2">Snow 
sports</label>
... 
```

现在我想添加一些类名。我已经让它适用于选择输入，但我想要复选框。

我知道您可以通过像这样输入 label_method 或 value_method 来修改标签或值：

```
<%= f.association :interest_label_levels, :as => :check_boxes, :label_method => lambda { 
|interest_label_level| interest_label_level.interest_two_label.name } %> 
```

但我仍然无法修改课程。这怎么可能？

# vb.net - 使用 SSML 音素元素

> ID：16034435
> 
> 赞同：1
> 
> 时间：2013-04-16T10:16:56.250
> 
> 标签：vb.net, visual-studio-2012, text-to-speech, ssml, phoneme

我正在使用 Visual Basic.net Ultimate，并且正在开发 TTS 应用程序。可以请我对音素元素有一些帮助吗？

这是我想讲的文字：

> 当你释放肩膀和颈部的紧张感时，再深吸一口气……然后呼出。

目前，“呼吸”这两个词似乎一起运行，听起来像“呼吸稀薄”我想（通过 SSML）修改此语句，使这两个词听起来像“呼吸”。

通过 SSML 执行此操作的最佳方法是什么？我认为音素元素是最好的方法。

这是我发现的一个发音番茄的例子：

```
<phoneme alphabet="ipa" ph="təˈmeɪ.ɾoʊ"> tomato </phoneme> 
```

上述代码的 ph 部分之间的文本似乎完全是另一种语言（:)）。我如何使用这种语言拼出一个单词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T14:44:14.337

这种“完全不同的语言”就是国际音标。这就是为什么在同一行上写着：alphabet="ipa"。

不同的 TTS 系统使用不同的语音表示，IPA 是某些系统支持的一种。

我认为对于您正在做的事情，使用中断标签会更合适，因为您不希望更改单词的系统发音，而是希望它在两个单词之间有短暂的停顿。

如果您指定您使用的 TTS 引擎，我可以尝试提供更多帮助。

# java - 如何在 JSP 中从此 XML 中提取值

> ID：16034437
> 
> 赞同：1
> 
> 时间：2013-04-16T10:17:01.967
> 
> 标签：java, xml, jsp, xml-parsing

我有一个如下的 XML（有 100 行）：

```
 <root>

      <data v="1.0">

        <cellimage counter="0" cash_filename="C:\Temp\_TempFolder\39d437f08cc302876a70a0f91b137991_h.jpg" width="94" height="141" />

        <cellimage counter="1" cash_filename="C:\Temp\_TempFolder\39d437f08cc302876a70a0f91b137991_h.jpg" width="94" height="141" />

      </data>

    </root> 
```

谁能告诉我如何循环遍历它并从 JSP 中的上述 XML 文件中提取“counter”和“cash_filename”等属性。

到目前为止，我有以下代码：

```
 <%
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc = db.parse("http://localhost:8080/data.xml");

        NodeList nl = doc.getElementsByTagName("cellimage");
            for (int i = 0; i < nl.getLength(); i++) {
                //Not sure what to do here!
            }
    %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:30:19.520

你可以很简单地得到你的物品：

```
NodeList nl = doc.getElementsByTagName("cellimage");
    Element el;
    Integer counter;
    String fName;

    for (int i = 0; i < nl.getLength(); i++) {
        //Not sure what to do here!
        el = (org.w3c.dom.Element) nl.item(i);
        counter = Integer.valueOf(el.getAttribute("counter"));
        fName = el.getAttribute("cash_filename");
    } 
```

# android - Phonegap 应用程序有时会在从相机恢复时崩溃

> ID：16034440
> 
> 赞同：0
> 
> 时间：2013-04-16T10:17:05.703
> 
> 标签：android, cordova, android-camera

我正在使用 phonegap 相机来捕捉这样的图像

```
navigator.camera.getPicture(onPhotoDataSuccess, onFail, {
        quality : 50,
        sourceType : Camera.PictureSourceType.CAMERA,
        destinationType : destinationType.FILE_URI,
        encodingType : Camera.EncodingType.PNG,
    }); 
```

请注意，应用程序仅在某些时候崩溃

我已经尝试过清单中的更改，例如

```
android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale" 
```

这是我的日志猫

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:58:40.550

将质量参数从 50 减少到 30 阻止了相机 API 使应用程序崩溃

在三星 Galaxy s3 上编辑 1

在三星 Galaxy 3 上，默认情况下，开发人员选项“不保留活动”处于启用状态。

当您启动任何其他活动时，这将垃圾收集您的主要活动，在这种情况下是相机。

关闭该选项可以解决问题。

# java - ClassCastException 错误，不知道为什么会发生

> ID：16034444
> 
> 赞同：0
> 
> 时间：2013-04-16T10:17:16.217
> 
> 标签：java, android, android-listview, classcastexception

我正在使用`BaseAdapter`类，当我尝试投射我的 viewHolder 类时出现方法`ClassCastException`错误。`getView`

这是我的代码：

```
public View getView(int position, View convertView, ViewGroup parent){
            // TODO Auto-generated method stub
            NoteItem noteItem = list.get(position);
            TextView tv;
            LinearLayout ll;
            if(convertView == null){
                convertView = inflater.inflate(R.layout.dialog_listitem_note, null);
                ll = (LinearLayout) convertView.findViewById(R.id.llNote);
                tv = (TextView) convertView.findViewById(R.id.tvNoteItem);
                convertView.setTag(new NoteItemViewHolder(tv, ll));
                ll.setOnClickListener(new OnClickListener(){...});
            }else{
                NoteItemViewHolder viewHolder = (NoteItemViewHolder) convertView.getTag(); //ClassCastException error here
                ll = viewHolder.getLl();
                tv = viewHolder.getName();
            }
            tv.setText(noteItem.getName());
            ll.setTag(noteItem);
            ...
            return convertView;
        }  

private class NoteItemViewHolder{

    TextView name;
    LinearLayout ll;

    public NoteItemViewHolder(TextView name, LinearLayout ll){
        this.name = name;
        this.ll = ll;
    }

    public TextView getName(){
        return name;
    }

    public LinearLayout getLl(){
        return ll;
    }       
} 
```

日志猫：

```
04-16 14:10:04.979: E/AndroidRuntime(23879): FATAL EXCEPTION: main
04-16 14:10:04.979: E/AndroidRuntime(23879): java.lang.ClassCastException: com.calllogimprovementtools.ainius.CallLogView$NoteItem
04-16 14:10:04.979: E/AndroidRuntime(23879):    at com.calllogimprovementtools.ainius.CallLogView$MyNoteAdapter.getView(CallLogView.java:300)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at android.widget.AbsListView.obtainView(AbsListView.java:1409)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at android.widget.ListView.makeAndAddView(ListView.java:1745)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at android.widget.ListView.fillDown(ListView.java:670)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at android.widget.ListView.fillGap(ListView.java:641)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at android.widget.AbsListView.trackMotionScroll(AbsListView.java:3407)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at android.widget.AbsListView.onTouchEvent(AbsListView.java:2237)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at android.widget.ListView.onTouchEvent(ListView.java:3446)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at android.view.View.dispatchTouchEvent(View.java:3885)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:903)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1703)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1133)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at android.app.Dialog.dispatchTouchEvent(Dialog.java:642)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1687)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2196)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1880)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at android.os.Looper.loop(Looper.java:123)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at android.app.ActivityThread.main(ActivityThread.java:3729)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at java.lang.reflect.Method.invokeNative(Native Method)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at java.lang.reflect.Method.invoke(Method.java:507)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:874)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:632)
04-16 14:10:04.979: E/AndroidRuntime(23879):    at dalvik.system.NativeStart.main(Native Method) 
```

不明白为什么会发生此错误，请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:24:27.337

**getView**方法应如下所示，并检查您的控件，如 LinearLayout 与 R.id.yourLinearID 绑定

```
 public View getView(int position, View view, ViewGroup parent) {
        // TODO Auto-generated method stub
        ViewHolder holder;
        if(view == null)
        {
            view = inflater.inflate(R.layout.checkin_item, null);
            holder =  new ViewHolder();

            holder.iconImage = (ImageView)view.findViewById(R.id.chkin_item_iv);
            holder.placeName = (TextView)view.findViewById(R.id.chkin_item_tv_name);

            view.setTag(holder);
        }
        else
        {
            holder = (ViewHolder)view.getTag();
        }

// here need to Bind Require Control      
holder.placeName.setText(googleSetGetArray.getGoogleSetGets().get(position).getName());

        return view;
    }

    class ViewHolder
    {
        ImageView iconImage;
        TextView placeName;         
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:33:23.480

像这样使用：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder2;
    View hView = convertView;

    if (convertView == null) {
        holder2 = new ViewHolder();
        hView.setTag(holder2);
    } else {
        holder2 = (ViewHolder) hView.getTag();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:51:12.637

我解决了错误。问题是我将不同的标签设置为 convertView ant to ll (linearlayout) 这是相同的视图，所以当`convertView!=null`返回的`getTag()`项目`NoteItem`时。

# sql - 如何分析单个数据表的数据？

> ID：16034447
> 
> 赞同：0
> 
> 时间：2013-04-16T10:17:18.873
> 
> 标签：sql, database, oracle10g

我有一张 HO_TRAN 表，其中存储了有关交易的 5 年数据。表由 Season_id、farmer_id、plot_no、Net_weight 等字段组成。季节 id 是交易年份 farmer_id 是消费者 ID Plot_no 是农民拥有的唯一地块编号。net_weight 是农民通过他的各种地块提供给我们的产品。

我需要的是通过farmer_id分析（比较）2年的数据，这意味着我想过滤提供了两年的farmer_id，而谁没有提供。我很困惑如何为此设计SQL查询。我想以这种方式输出

```
 Farmer_id | Plot_no | Net_weight 

     1         | 123     | 5.00
               | 321     | 15.00
     2         | 456     | 6.00
               | 159     | 65.00
               | 187     | 56.00
     3         | 642     | 47.00 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:46:29.130

假设您有两年的想法，比如 YEAR1 和 YEAR2，那么您可以为此目的使用分析函数：

```
select Farmer_id, Plot_no, Net_weight 
from (select ht.*,
             max(case when season = YEAR1 then 1 else 0 end) over (partition by farmer_id) as year1,
             max(case when season = YEAR2 then 1 else 0 end) over (partition by farmer_id) as year2
      from HO_TRAN ht
     ) ht
where year1 = 1 and year2 = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:18:30.270

```
select Farmer_id, Plot_no, Net_weight
from HO_TRAN as ht
where exists (
      select 1 from HO_TRAN
      where Farmer_id = ht.Farmer_id
      and year between X and Y
      group by Farmer_id
      having count(distinct year) = 2
); 
```

或类似的东西，取决于你的实际意思。您说您想跨年分析和比较，但您提出的结果中没有年份。

# c++ - 通过 pthreads 在 C++ 11 中获取线程核心亲和性

> ID：16034448
> 
> 赞同：8
> 
> 时间：2013-04-16T10:17:21.350
> 
> 标签：c++, c++11, pthreads, multicore, affinity

我正在尝试在 C++ 11 中使用 std::thread 时设置核心亲和性（线程 #1 在第一个核心上，线程 #2 在第二个核心上，...）。

我已经在各种主题和互联网上进行了搜索，似乎 C++ 11 API 没有提供如此低级的功能。

另一方面，pthread 带有**pthread_setaffinity_np**，如果我可以获得 std::thread 的“pthread_t”值，这将很有用（我不知道这是否是人类合理的或至少是合法的要求）。

我最终想要的一个示例程序是：

```
#include <thread>
#include <pthread.h>
#include <iostream>
#include <stdio.h>
#include <stdlib.h>

#define CORE_NO 8

using namespace std;

void run(int id) {
    cout << "Hi! I'm thread " << id << endl;
    // thread function goes here
}

int main() {
    cpu_set_t cpu_set;

    CPU_ZERO(&cpu_set);
    for(int i=0; i<CORE_NO; i++)
        CPU_SET(i, &cpu_set);

    thread t1(run, 1);

    // obtaining pthread_t from t1

    /*
    pthread_t this_tid = foo(t1);
    pthread_setaffinity_np(this_tid, sizeof(cpu_set_t), &cpu_set);
    */

    t1.join();

    return 0;
} 
```

我真的不想改变我项目的整个架构（它必须提供这样的特性）。我现在大量使用 std::thread 但我也可以使用 pthread API，正如您在示例中看到的那样。

我有办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T10:23:51.873

[`native_handle`](http://en.cppreference.com/w/cpp/thread/thread/native_handle)您可以使用该函数获取线程的本机句柄。

链接参考中的示例甚至使用它来调用 pthread 函数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-16T13:00:58.563

我不知道这是否适合您的情况，但我通常做的是从线程内调用亲和原语。例如，我在线程函数开头的某处放置了一段与此类似的代码：

```
const int err = pthread_setaffinity_np(pthread_self(),...); 
```

调用`pthread_self()`将返回调用线程的 ID。

# c# - 在 foreach 循环中创建许多 DropDownListFor

> ID：16034454
> 
> 赞同：10
> 
> 时间：2013-04-16T10:17:42.033
> 
> 标签：c#, asp.net-mvc, html.dropdownlistfor, html-select

我想从一个列表中动态创建 DropDownLists，它提供了 SelectList 和一个用于保存选择的字段。

```
public class ViewModel
{
    public List<Material_Select> materialSelect { get; set; }
}

public class Material_Select
{
    public SelectList selectList { get; set; }
    public int MaterialId { get; set; }
} 
```

在视图中，我想遍历 materialSelect List 并动态创建 DropDownLists。

像这样的东西：

```
int count = 0;
foreach (var item in Model.materialSelect)
{
    count++;
    <div class="editor-label">
        @Html.LabelFor(model => model.materialSelect)
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(item.MaterialId, item.selectList)
    </div>       
} 
```

在 HttpPost ActionResult 我需要获取选定的值。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T12:09:39.437

您可能应该使用[EditorTemplates](https://www.google.co.uk/search?q=editortemplates)。这些允许你做你所描述的事情。如果您在 ~/Views/Shared/EditorTemplates/Material_Select.cshtml 中创建一个强类型的局部视图（视图必须与模型命名相同），如下所示：

```
@model Material_Select

<div class="editor-label">
    @Html.LabelFor(m => m.MaterialId)
</div>
<div class="editor-field">
    @Html.DropDownListFor(m => m.MaterialId, Model.selectList)
</div> 
```

然后在您的整体形式中，您可以调用：

```
@Html.EditorFor(m => m.materialSelect) 
```

这将自动枚举您的集合并为集合中的每个项目呈现编辑器模板。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T10:37:44.090

假设计数从 0 开始，并且您的操作发布方法接收到 ViewModel 类型的参数，您可以尝试为每个下拉列表绑定 MaterialId：

```
foreach (var item in Model.materialSelect)
{
    count++;
    <div class="editor-label">
       Name for de dropdown
    </div>
    <div class="editor-field">
        @Html.DropDownList("materialSelect[" + count + "].MaterialId ", item.selectList)
        @Html.ValidationMessageFor(model => model.gradationId)
    </div>       
} 
```

# java - 如何仅使用主键将引用的持久类序列化为 JSON

> ID：16034455
> 
> 赞同：1
> 
> 时间：2013-04-16T10:17:43.690
> 
> 标签：java, json, jpa, flexjson

我想使用 flexjson 将类 Foo （可以持久化）序列化为 JSON（如果您知道其他一些支持所需功能的库，请说出来）。我想包括对类 Bar 和 FooBar 的依赖引用，但我只需要表示主键 (@Id) 的字段。我知道这可以为每个持久类手动完成，但我确信有更好的方法。

这是我的班级表示的一个例子：

```
@Entity
public class Foo {
    @Id @GeneratedValue(...)
    private Long id;
    private String someField;
    @ManyToOne
    private Bar bar;
    @OneToMany
    private Collection<FooBar> fooBars
}
@Entity
public class Bar {
    @Id @GeneratedValue(...)
    private long id;
    private String irrelevantField
    @OneToMany
    private Collection<Foo> foos;
}
@Entity
public class FooBar {
    @Id @GeneratedValue(...)
    private Long id;
    private String irrelevantField
} 
```

这是我在序列化类 Foo 时要查找的输出：

```
{
    "id":1,
    "someField":"someValue",
    "bar":1,                   // or "bar":{"id":1}
    "fooBars":[1,2,3,4,5]      // or "fooBars":[{"id":1}, {"id":2}, ...] 
} 
```

并且在序列化类 Bar 时：

```
{
    "id":1,
    "irrelevantField":"someValue",
    "foos":[1,2,3,4,5]        // or "foos":[{"id":1}, {"id":2}, {"id":3}, ...]
} 
```

我找到了一个临时解决方案，但我仍在寻找“正确/更好”的解决方案

```
new JSONSerializer().include("bar.id", "fooBars.id").exclude("bar.*", "fooBars.*").serialize((Foo)this).toString(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:12:44.997

您可以使用`JAXB`注释（并将您的 json 解析器配置为使用 JAXB 注释检查器 - 这可能是默认值）。使用这些注释，您可以添加`@XmlTransient`不需要的字段。

# asp.net - 尝试打开 SqlConnection 时出现 ArgumentException

> ID：16034465
> 
> 赞同：-1
> 
> 时间：2013-04-16T10:18:04.067
> 
> 标签：asp.net, sql-server, ado.net

此代码用于按钮：
但每次我运行它时都会说`ArgumentException was unhandled by user code`.

这是一个用于查找数据库以查看是否有足够墨水的站点。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Configuration;

public partial class _Default : System.Web.UI.Page
{
    SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);

    protected void Page_Load(object sender, EventArgs e)
    {
        con.Open();
    }
    protected void Button1_Click(object sender, EventArgs e)
    {
        SqlCommand cmd = new SqlCommand("insert into Toner Values('"+txtFname.Text+"','"+txtLname.Text+"','"+TxtCity.Text+"')",con);
        cmd.ExecuteNonQuery();
        con.Close();
        Label1.Visible = true;
            Label1.Text = "Indsætning succesfuld!!!";
        TxtCity.Text = "";
        txtFname.Text = "";
        txtLname.Text = "";
    }
    protected void TextBox3_TextChanged(object sender, EventArgs e)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-17T00:15:14.380

我最好的猜测是`TxtCity`应该是`txtCity`。

试试这个：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Configuration;

public partial class _Default : System.Web.UI.Page
{

    protected void Button1_Click(object sender, EventArgs e)
    {
        string query = "insert into Toner Values (@Fname, @Lname, @City)";
        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings("ConnectionString").ConnectionString);
        SqlCommand cmd = new SqlCommand(query, con);
        //Use parameterized query to prevent SQL injection
        cmd.Parameters.Add("Fname", SqlDbType.VarChar, 50).Value = txtFname.Text;
        cmd.Parameters.Add("Lname", SqlDbType.VarChar, 50).Value = txtLname.Text;
        //C# is case-sensitive... is it txtCity or TxtCity?
        cmd.Parameters.Add("City", SqlDbType.VarChar, 50).Value = TxtCity.Text;
        con.Open();
        cmd.ExecuteNonQuery();
        con.Close();
        Label1.Visible = true;
        Label1.Text = "Indsætning succesfuld!!!";
        TxtCity.Text = "";
        txtFname.Text = "";
        txtLname.Text = "";
    }
} 
```

# shell - Shell Scription：如何在多个文件中加载一些变量

> ID：16034467
> 
> 赞同：0
> 
> 时间：2013-04-16T10:18:05.330
> 
> 标签：shell

**情况：** 我正在 CentOS 5.9 中编写一些 Shell 脚本。假设我的文件夹中有以下文件：

*   脚本.sh
*   文件1.txt
*   文件2.txt
*   文件 3.txt

该脚本正在处理这些文本文件。这些文本文件是某个程序的配置文件。

**问题：** 如何在这些文本文件中包含一些变量？我需要更改 script.sh 中的值。我怎样才能以最简单的方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:20:07.933

这可以是一种方法：

让我们拥有`file1.txt`以下内容：

```
MY_VAR=23 
```

然后在您的脚本中，您可以拥有：

```
. /path/of/file.txt 
```

因此，当您执行脚本时，`MY_VAR`将可以作为 var 直接访问。

* * *

一般来说，如果您有一个包含以下信息的文件：

```
 VAR=value 
```

这些变量可以通过在脚本中加载

```
. file 
```

# php - Mysqli Multiquery 的问题以及在后续 PHP 页面中使用结果

> ID：16034470
> 
> 赞同：0
> 
> 时间：2013-04-16T10:18:14.033
> 
> 标签：php, arrays, mysqli, output

我在使用 mysqli 多查询时遇到了一些问题，特别是在它们退出后使用它们。如果我将'printf'行放入它将打印平均值，但我不能使用似乎使用mysqli部分之外的数组[计划使用它们来组织下面页面上的图像]。

我对 PHP 和 Mysql 还是很陌生，所以如果我错过了以前的线程中的某些内容，这些内容可能会对此进行排序/为我指明正确的方向，我深表歉意 - 但我仍在努力解决它。

如果我对此很愚蠢，请随意放火烧我并将我扔进一桶粪便中，但之前有 'printf("%s\n", $row[0,1,2,3 等]);' 它将打印结果，但如果我稍后在页面中尝试使用 row[0] ，它会使用这些字符而不是调用应该存储在那里的值。

```
$mysqli=new mysqli("localhost", "uname", "passwordbit", "mydb");
/* check connection */
if (mysqli_connect_errno()) {
printf("Connect failed: %s\n", mysqli_connect_error());
exit();
}

$query = "SELECT AVG(cpcriminalswork) from mydb;";
$query .= "SELECT AVG(cpsentancing) from mydb;";
$query .= "SELECT AVG(cpdeathpenalty) from mydb;";
$query .= "SELECT AVG(cphumanrights) from mydb;";
$query .= "SELECT AVG(cpprotection) from mydb;";
$query .= "SELECT AVG(tbtaxationspread) from mydb;";
$query .= "SELECT AVG(tbtaxmax) from mydb;";
$query .= "SELECT AVG(tbdole) from mydb;";
$query .= "SELECT AVG(tbchildben) from mydb;";
$query .= "SELECT AVG(tbunemployment) from mydb;";
$query .= "SELECT AVG(eebanks) from mydb;";
$query .= "SELECT AVG(eeminwage) from mydb;";
$query .= "SELECT AVG(eeforiegnaid) from mydb;";
$query .= "SELECT AVG(eemilitary) from mydb;";
$query .= "SELECT AVG(eemaxwage) from mydb";

/* execute multi query */
if ($mysqli->multi_query($query)) {
do {
    /* store first result set */
    if ($result = $mysqli->store_result()) {
        while ($row = $result->fetch_row()) {
        }
        $result->free();
    }
    if ($mysqli->more_results()) {
    }
} while ($mysqli->next_result());
}

/* close connection */
$mysqli->close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:24:11.693

不需要多查询。您可以使用 SQL 收集 AVG。

（见[http://www.sqlfiddle.com/#!2/529e8/3](http://www.sqlfiddle.com/#!2/529e8/3)）

```
$query = "SELECT AVG(foo1) as foo1, AVG(foo2) as foo2, AVG(foo3) as foo3, AVG(foo4) as foo4 from mydb";
$res = mysqli_fetch_array(mysqli_query($query));

print_r($res); 
```

输出应该类似于

foo1 => 3 foo2 => 1 foo3 => 7 foo4 => 9

# javascript - 在 jquery ready() 中找不到先前插入的元素

> ID：16034473
> 
> 赞同：1
> 
> 时间：2013-04-16T10:18:18.893
> 
> 标签：javascript, jquery

我的代码不起作用，以后的脚本似乎找不到先前插入的元素。

我将基本语法错误更新为前三个答案，但它似乎仍然不起作用。

代码 ：

```
<html>
<head>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.1.1.min.js"></script>
<script type="text/javascript"> 
$(document).ready( function() {
     $('#menu').html('<a href="page4.html" class="dynamicLoad">ddd</a>');
 });  

$(document).ready( function() {
        $( 'a.dynamicLoad' ).click( function( e ) {
            e.preventDefault();   // prevent the browser from following the link
            e.stopPropagation();  // prevent the browser from following the link
            $( '#myDiv' ).load( $( this ).attr( 'href' ) );
        });
});
</script>

</head>
<body>

<div id="menu">mymenu</div>
<div id="myDiv">aaaaaaaaaaaa</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:27:18.100

提这个

```
$('#menu').html("<a href='page4.html' class='dynamicLoad'>ddd</a>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:21:30.190

它应该是`html()`

`innerHTML`==`html()` 在 jquery 中

逃离你的`"`

```
 $('#menu').html("<a href='page4.html' class='dynamicLoad'>ddd</a>");
   //------^^^^---here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:21:38.093

您有引号`"`问题，请[`.html()`](http://api.jquery.com/html/)改用：

```
$('#menu').html('<a href="page4.html" class="dynamicLoad">ddd</a>'); 
```

你应该使用jQuery 的`.html()`方法，而不是`innerHTML`因为 jQuery 简化了一些 javascript 函数。jQuery 仍然是 javascript，但它有不同的和一些简化的语法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T10:19:45.260

将您的`innerHTML`陈述更改为以下内容：

```
$('#menu').html("<a href='page4.html' class='dynamicLoad'>ddd</a>");
}); 
```

目前您的语句有多个语法错误。

此外，**[innerHTML](http://www.w3schools.com/jsref/prop_html_innerhtml.asp)**是 Javascript**而不是**jQuery - [**html()**](http://api.jquery.com/html/)是 jQuery 等价物。

* * *

这是一个有效的[**jsFiddle**](http://jsfiddle.net/ZAK3f/)。

您的整个代码现在应该如下所示：

**HTML：**

```
<div id="menu">mymenu</div>
<div id="myDiv">aaaaaaaaaaaa</div> 
```

**jQuery：**

```
$(document).ready( function() {
     $('#menu').html("<a href='page4.html' class='dynamicLoad'>ddd</a>");
     $( 'a.dynamicLoad' ).click( function( e ) {
           e.preventDefault();   // prevent the browser from following the link
           e.stopPropagation();  // prevent the browser from following the link
           $( '#myDiv' ).load( $( this ).attr( 'href' ) );
     });
}); 
```

# c - 如何清除 C 控制台应用程序中的键盘缓冲区？

> ID：16034476
> 
> 赞同：0
> 
> 时间：2013-04-16T10:18:30.473
> 
> 标签：c, io

代码如下：

```
#include <stdio.h>
#include <signal.h>
#include <stdlib.h>

#define SIZE 1024
char buffer[SIZE] = {0};

void timeout(int sig);

int main(void)
{
    signal(SIGALRM, timeout);
    alarm(3);

    printf("[Input]: ");
    fflush(stdout);

    fgets(buffer, SIZE, stdin); // #1, enter some contents

    return 0;
}

/* if #1 is not over within 3 seconds
   I want to clear the keyboard buffer filled at #1, and reenter some new contents
*/
void timeout(int sig)
{
    printf("\r                       \r[Input]: ");
    fflush(stdout);

    // clear the keyboard buffer pressed at #1
    // ... // how to implement it?

    fgets(buffer, SIZE, stdin); // #2, reenter some new contents
    printf("%s", buffer); // I expect it output the contents filled at #2 only, not include that of #1

    exit(0);
} 
```

微软的 CSDN 说 rewind() 函数可以清除键盘缓冲区，但我在 linux 上不起作用。
我在某处看到 C++ 标准库的 std::cin.igore() 也可以获得相同的效果。
但是如何用C语言实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:32:38.860

由于 stdin 是一个终端，您可以使用 tcflush 函数。

```
tcflush(STDIN_FILENO, TCIFLUSH); 
```

查看[手册页](http://linux.die.net/man/3/tcflush)以包含正确的头文件。您也可以查看[选择手册页](http://linux.die.net/man/2/select)，并停止使用警报。

# openstack - Devstack - 安装后更改 IP 地址

> ID：16034478
> 
> 赞同：1
> 
> 时间：2013-04-16T10:18:32.160
> 
> 标签：openstack, devstack

我在 ubuntu 12.04 上安装了 devstack，我可以登录 Dashboard，现在我更改了我的 ubuntu 机器的 IP。更改IP后，我无法再登录Dashboard了

我收到以下错误消息。我可以在错误消息中看到我的旧 IP。

```
ConnectionError at /auth/login/
HTTPConnectionPool(host='OLD_IP_ADDRESS', port=35357): Max retries exceeded with url: /v2.0/tokens (Caused by <class 'socket.error'>: [Errno 113] No route to host)

Request Method:     POST
Request URL:    http://NEW_IP_ADDRESS/auth/login/
Django Version:     1.4.5
Exception Type:     ConnectionError
Exception Value:    
HTTPConnectionPool(host='OLD_IP_ADDRESS', port=35357): Max retries exceeded with url: /v2.0/tokens (Caused by <class 'socket.error'>: [Errno 113] No route to host)
Exception Location:     /usr/local/lib/python2.7/dist-packages/requests/adapters.py in send, line 246
  Python Executable:    /usr/bin/python
  Python Version:   2.7.3
  Python Path:  
   ['/opt/stack/horizon/openstack_dashboard/wsgi/../..',
   '/opt/stack/python-keystoneclient',
   '/usr/local/lib/python2.7/dist-packages',
   '/opt/stack/python-glanceclient/setuptools_git-1.0b1-py2.7.egg',
   '/opt/stack/python-glanceclient',
   '/opt/stack/python-cinderclient', 
```

是否有书面程序可用于手动更改 IP 地址？我的新 IP 没有连接到互联网，所以我无法重新部署 devstack

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T07:09:26.887

谢谢你们的回答。。

我错过了更新我的答案，我以一种简单的方式解决了这个问题。

解决方案是先运行 unstack.sh，然后再次运行 stack.sh。它将进行必要的修复。由于安装后我在 Devstack 方面没有取得太大进展，这让我更有信心运行 stack.sh

第二次运行 stack.sh 时不需要连接到互联网，所以我的问题已解决。

随时分享您对此的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T13:53:15.297

您需要更改在 devstack 生成的 OpenStack 配置文件中硬编码的 IP 地址。它们存储在 /etc/ 和其他地方。

[http://xmodulo.com/2013/04/how-to-change-ip-address-after-openstack-installation-via-devstack.html](http://xmodulo.com/2013/04/how-to-change-ip-address-after-openstack-installation-via-devstack.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T20:24:56.590

这是我为重新上线所采取的一些步骤。

*   备份答案文件...

    `cp packstack-answers-20130417.txt packstack-answers.txt-SAVE`

*   更换IP地址...

    `sed -i '/s/10\.10\.248\.11/10\.32\.70\.10/g' packstack-answers-20130417.txt`

*   删除 cinder 环回设备，如果存在则安装程序失败

    `losetup -d /dev/loop0`

*   列出通过循环挂载的内容。

    `losetup -a`

    `rm /var/lib/cinder/cinder-volumes`

*   现在重新运行部署脚本

    `packstack --answer-file=packstack-answers-20130417.txt`

在 CLI 中使用 nova-manage 修复其他 IP 寻址问题。

应该从这里开始工作。

# opengl - 多个着色器实例

> ID：16034480
> 
> 赞同：1
> 
> 时间：2013-04-16T10:18:33.967
> 
> 标签：opengl, opengl-es-2.0, glsl

我最近读到你可以

> “有多个 OpenGL 着色器实例”

但没有提供其他细节。

我想澄清一下这到底是什么意思。

一方面，我知道您可以运行多个 glProgram，并且您可以在它们之间切换。这都是指的吗？我假设每帧在几个创建的着色器程序之间切换基本上意味着我正在“同时”使用多个程序。

或者它是否以某种方式指代*同一*着色器程序的多个“实例”？那对我来说毫无意义。

一些基本的澄清会在这里享受！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T10:57:36.873

当您创建一个程序对象时，您将几个着色器链接在一起。通常至少有一个顶点和一个片段着色器。现在说你想渲染，说一些物体周围的发光。该发光将由不同的片段着色器创建，但顶点着色器将与常规外观相同。现在为了节省资源，您可以在多个程序中使用相同的顶点着色器，但链接不同的片段着色器。当然，您也可以使用相同的片段着色器和不同的顶点着色器。

简而言之，您可以将单个着色器链接到任意数量的程序中。只要链接的着色器阶段相互兼容，这有助于模块化。

# flash - AutoIT 点击 Flash 按钮？

> ID：16034483
> 
> 赞同：0
> 
> 时间：2013-04-16T10:18:45.503
> 
> 标签：flash, automation, autoit

是否可以使用 AutoIT 单击 Flash 按钮？如果是这样，任何人都可以给我它的示例代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T16:24:35.883

如果您知道按钮将在哪里并且它就在那里，您可以在某个位置单击屏幕。

如果您不知道 flash 按钮的状态（是否存在，具体在哪里），您可以使用一个脚本来截取屏幕截图，处理图像，然后创建并运行一个 AutoIT 脚本，单击按钮。过去我不得不用 Perl 和 ImageMagick 来做这件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-12T00:48:51.780

这是一个使用 AutoIt 自动化 Flash 游戏的示例。

```
#include <IE.au3>

example()

Func example()
    $oIE = _IECreate("http://andkon.com/arcade/puzzle/greatmatemaster/")

    Local $oEmbedFlash = _IETagNameGetCollection($oIE, "embed", 0)
    Local $hWin = _IEPropertyGet($oIE, "hwnd")
    WinSetState($hWin, "", @SW_MAXIMIZE)

    ;get the x/y position of the flash game
    Local $iX = _IEPropertyGet($oEmbedFlash, "screenx")
    Local $iY = _IEPropertyGet($oEmbedFlash, "screeny")

    ;add click positions
    Local $aPlayChestBtn = [$iX + 240, $iY + 350]
    Local $a2b = [$iX + 120, $iY + 390]
    Local $a4b = [$iX + 120, $iY + 300]

    ;click the play chest button
    Click($aPlayChestBtn, 2000)

    ;move pawn to 4b with clicks
    Click($a2b, 1000)
    Click($a4b, 1000)

EndFunc   ;==>example

Func Click($aPos, $iWaitTime = 0)
    ;waits for a set amount of time for nothing to change where you want to click
    If $iWaitTime <> 0 Then PixelChecksumWait($aPos, $iWaitTime)

    ;clicks the area you want to click
    MouseClick("left", $aPos[0], $aPos[1], 1, 0)
EndFunc   ;==>Click

Func PixelChecksumWait($aPos, $iWaitTime = 5000)
    Local $iCheckSum

    ;wait to make sure there is no change in the region
    While 1
        ;get checksum
        $iCheckSum = PixelChecksum($aPos[1] - 5, $aPos[0] - 5, 10, 10)

        ;sleep to make sure there is no change
        Sleep($iWaitTime)

        ;exit loop if there was no change
        If $iCheckSum = PixelChecksum($aPos[1] - 5, $aPos[0] - 5, 10, 10) Then ExitLoop
    WEnd
EndFunc   ;==>PixelChecksumWait 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-11T18:44:32.770

无需截屏，您可以计算像素的哈希值`PixelChecksum`。然后与您计算的先前版本进行比较。您将需要检查一系列像素区域。

[https://www.autoitscript.com/autoit3/docs/functions/PixelChecksum.htm](https://www.autoitscript.com/autoit3/docs/functions/PixelChecksum.htm)

# php - 棘手的 PHP 数组

> ID：16034494
> 
> 赞同：0
> 
> 时间：2013-04-16T10:19:14.743
> 
> 标签：php, arrays, xml-rpc

print_r($array) 的输出如下；

```
 Array (
            [0] => xmlrpcval Object ( 
                    [me] => Array ( [int] => 50 ) 
                    [mytype] => 1 
                    [_php_class] => 
        ) 
            [1] => xmlrpcval Object ( 
                    [me] => Array ( [string] => Angel Cook (Chamber Works) ) 
                    [mytype] => 1 [_php_class] => ) 
) 
```

我只想打印'Angel Cook（Chamber Works）'，有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:25:36.713

你有一个对象数组，你想要第二个对象（数组从零开始），其中`me`关键指向你想要第一个项目的数组，所以：

```
$array[1]->me[0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:26:13.700

硬编码如下：

```
print $array[1]->me['string'] 
```

从以下内容判断：您有一个数组...其中包含条目...哪些是对象...包含属性...哪些是关联数组...包含您的值

编辑：不确定 [string] 是否真的是一个键。如果不是......请改用我[0]。

# scrapy - 使用scrapyd有什么优势？

> ID：16034495
> 
> 赞同：10
> 
> 时间：2013-04-16T10:19:23.290
> 
> 标签：scrapy, scrapyd

scrapy 文档说：

> Scrapy 带有一个名为“Scrapyd”的内置服务，它允许您部署（也称为上传）您的项目并使用 JSON Web 服务控制它们的蜘蛛。

一致性使用scrapyd有一些优势吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T14:55:46.307

Scrapyd 允许您通过方便的 Web API 在与您正在使用的机器不同的机器上运行 scrapy，这意味着您可以使用`curl`甚至是 Web 浏览器来上传新的项目版本并运行它们。否则，如果您想在云中的某个地方运行 Scrapy，则必须`scp`复制新的蜘蛛代码，然后使用登录`ssh`并生成您的`scrapy crawl myspider`.

如果你想并行运行许多蜘蛛，Scrapyd 也会为你管理进程；但是如果你在本地机器上有 Scrapy 并且可以访问命令行或运行蜘蛛的方式并且只想一次运行一个蜘蛛，那么你最好手动运行蜘蛛。

如果您正在开发蜘蛛，那么您肯定不想使用`scrapyd`快速编译/测试迭代，因为它只会增加一层复杂性。

# php - 是否需要更改我的选择语句的变量名称？

> ID：16034498
> 
> 赞同：2
> 
> 时间：2013-04-16T10:19:35.243
> 
> 标签：php, mysql

我养成了重命名`SELECT`语句变量的习惯，我很想知道是否有必要。

这是我使用的一些典型代码：

```
$sql = ("SELECT * FROM tbl_one");

if(!$result_sql = $mysqli->query($sql))
{
// Error code here
}

while($a = $result_sql->fetch_assoc())
{
echo $a;
}

$sql2 = ("SELECT * FROM tbl_two");

if(!$result_sql2 = $mysqli->query($sql2))
{
// Error code here
}

while($b = $result_sql2->fetch_assoc())
{
echo $b;
} 
```

出于某种原因，我担心如果我再次重用相同的`$sql`变量会出现问题，除非我重命名它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:23:04.667

根据编码标准为每个语句使用不同的变量总是好的，即使 PHP 不介意一次又一次地使用相同的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:24:16.530

从理论上讲，我选择不对此类代码重用变量名，因为可能会意外地*不*覆盖其中一个并得到奇怪的结果。

再说一次，这个问题不会因为你试图强迫自己记住增加一个卡在变量名末尾的数字而消失。

随着时间的推移，随着我的代码的改进，我发现我很少需要或想要在单个 PHP 函数中执行多个 MySQL 查询，因此问题完全消失了。

**tl; dr：**如果我的头上有枪，虽然......是的，*我可能会像你一样做*。不过，这完全是主观的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T10:22:09.490

它只是一个字符串，所以你不应该关心。如果您不再需要以前的值，可以再次使用相同的变量。

# html - 如何从当前 url 中选择 html 页面标题中的数据

> ID：16034501
> 
> 赞同：0
> 
> 时间：2013-04-16T10:19:42.637
> 
> 标签：html

如何从当前 url 中选择 html 页面标题中的数据。

我的网址是

file:///D:/Documents%20and%20Settings/Desktop/HTML/Basic2.html?course_id=CO2

我想把标题写成：

**为“course_id”添加培训偏好**

在上面的 course_id 应该是 CO2。

```
<title>Employee Prefrence for Traning</title>
    <h1>Add Prefrence</h1>
    <hr> 
```

我通过使用 get value 函数获取 URL 中的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:48:59.840

使用 javascript，您可以获得当前路径，例如：

```
var pathname = window.location.pathname; 
```

从中您可以找到 course_id 的索引，其中：

```
var index =pathname.indexOf("course_id"); 
```

或者

```
var index=pathname.indexOf("="); 
```

最后你想要课程 id，你可以通过使用子字符串来获得它：

```
var courseID = pathname.substr(index). 
```

希望这会帮助你。

# java - 从 windows 目录读取文件

> ID：16034503
> 
> 赞同：0
> 
> 时间：2013-04-16T10:19:46.587
> 
> 标签：java, xml, stream

我尝试从 Windows 路径读取 xml`D:/xml/xmlfile.xml`

在我的网页上有一个浏览按钮。我选择文件并单击提交。我来到我的控制器，有代码可以读取这个文件。

`fileToRead`变量有一个值 = 文件名。不是完整的目录路径。

```
InputStream ips = this.getClass().getClassLoader().getResourceAsStream(fileToRead);
InputStreamReader ipsr = new InputStreamReader(ips);
          BufferedReader br=new BufferedReader(ipsr);
          String line;
          while ((line=br.readLine())!=null){
              System.out.println(line);
          } 
```

这没有读取文件。另一种技术也不起作用，我得到了`File not found exception`

```
InputStream ips=new FileInputStream(file); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T10:52:24.740

如果您只想提供文件名或相对路径，文件应该在服务器上。您必须将文件上传到服务器然后读取。否则，您必须提供从 windows 目录读取文件的完整路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:52:37.820

你可以看看这个网站。您的问题有工作代码。

[http://www.codejava.net/java-ee/servlet/eclipse-file-upload-servlet-with-apache-common-file-upload](http://www.codejava.net/java-ee/servlet/eclipse-file-upload-servlet-with-apache-common-file-upload)

# ruby-on-rails - Geocoder + Rails 3.2 // SQLException: no such column: distance:

> ID：16034504
> 
> 赞同：0
> 
> 时间：2013-04-16T10:19:50.200
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sqlite, rails-geocoder

当我尝试将 Geocoder gem 应用于我的搜索表单时，我不断收到相同的错误。您将在事件控制器中看到 2 个不同的查询。如果我自己使用它们，它们会很好用。但是，我将它们一起使用，如此处所示，它确实会引发错误。

```
QLite3::SQLException: no such column: distance: SELECT "events"."id" AS t0_r0, "events"."header_id" AS t0_r1, "events"."start_date" AS t0_r2, "events"."finish_date" AS t0_r3, "events"."address" AS t0_r4, "events"."place" ....... 
```

事件模型

```
scope :non_timetable, joins(:header).where(headers: {weekly: false}) 
```

事件控制器

```
def search

@events_casual = Event.non_timetable.near(params[:search_where], 20)
@events_casual  = @events_casual.where("events.finish_date >= ?", @time).where((["CAST(headers.title_es as varchar(255)) LIKE ?", "%#{params[:query]}%"] || ["CAST(headers.title_en as varchar(255)) LIKE ?", "%#{params[:query]}%"] || ["CAST(headers.title_eu as varchar(255)) LIKE ?", "%#{params[:query]}%"] || ["CAST(headers.title_fr as varchar(255)) LIKE ?", "%#{params[:query]}%"])).includes(:header).order("events.start_date ASC")
...

end 
```

似乎我必须为 Geocoder 查询指定表名。但是，我不知道怎么做。非常感谢任何帮助！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:37:05.747

可能是相同的问题[Geocoder SQLite3::SQLException: no such column: lon:](https://stackoverflow.com/questions/9122025/geocoder-sqlite3sqlexception-no-such-column-lon)。但我建议您阅读[SQLite 中距离查询](https://github.com/alexreisner/geocoder#distance-queries-in-sqlite)的地理编码器文档。和[铁轨铸成](http://railscasts.com/episodes/273-geocoder?view=asciicast)。希望这会对你有所帮助。

# javascript - 如何在不使用 jquery 的情况下在 javascript 中创建动态 div？

> ID：16034506
> 
> 赞同：3
> 
> 时间：2013-04-16T10:19:52.557
> 
> 标签：javascript, dom

我想对我的网页上的按钮单击进行动态划分请告诉我最简单的解决方案，我是 JavaScript 新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:22:45.550

希望这会有所帮助

```
function divcreate() {
    var div = document.createElement("div");
    div.setAttribute("id", "mydiv");
    div.className = "mdiv";
    div.style.display = "none";
    document.body.appendChild(div);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T10:20:53.840

要创建元素，请使用[`createElement`](https://developer.mozilla.org/en-US/docs/DOM/document.createElement)方法

```
var mydiv = document.createElement('div');
//mydiv is a variable containing a newly created div 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:22:44.557

```
<button onclick="createDiv()">Click Me</button>

function createDiv(){
   var newDiv = document.createElement('div');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T10:26:25.610

//创建一个像下面这样的div

```
var div=document.createElement("div");
var node=document.createTextNode("This is new.");
div.appendChild(node); 
```

然后将上面的 div 附加到您希望它成为孩子的位置

```
var element=document.getElementById("some_parent_tag");
element.appendChild(div); 
```

# mysql - 简单的 MySQL 查询耗时太长

> ID：16034507
> 
> 赞同：3
> 
> 时间：2013-04-16T10:19:56.480
> 
> 标签：mysql, performance, debian, innodb

我在 Debian 6.0 上的 MySQL（0.5GB 数据库）中使用 InnoDB。

今天早上（经过 120 天的完美正常运行时间），服务器突然挂起（实际上服务器在过去两天第二次挂起），我不得不通过主机 CP 重新启动它。

在 kern.log 中，我有这个：

```
Apr 16 09:43:35 lhost kernel: [76680.208104] INFO: task mysqld:9755 blocked for more than 120 seconds.
Apr 16 09:43:35 lhost kernel: [76680.233913] "echo 0 > /proc/sys/kernel/hung_task_timeout_secs" disables this message.
Apr 16 09:43:35 lhost kernel: [76680.234249] mysqld        D ffff88007dc67170     0  9755   1241 0x00000000
Apr 16 09:43:35 lhost kernel: [76680.234472]  ffff88007dc67170 0000000000000086 0000000000000000 ffffffffa021c4c2
Apr 16 09:43:35 lhost kernel: [76680.234815]  ffff880009ff1ad8 ffff880009ff1ad8 000000000000f9e0 ffff880009ff1fd8
Apr 16 09:43:35 lhost kernel: [76680.235181]  0000000000015780 0000000000015780 ffff88007d177170 ffff88007d177468
Apr 16 09:43:35 lhost kernel: [76680.235549] Call Trace:
Apr 16 09:43:35 lhost kernel: [76680.235732]  [<ffffffffa021c4c2>] ? ext4_mark_iloc_dirty+0x46e/0x4f7 [ext4]
Apr 16 09:43:35 lhost kernel: [76680.235963]  [<ffffffffa021cd61>] ? ext4_mark_inode_dirty+0x18f/0x1c4 [ext4]
Apr 16 09:43:35 lhost kernel: [76680.236212]  [<ffffffff812fc2ab>] ? __mutex_lock_common+0x122/0x192
Apr 16 09:43:35 lhost kernel: [76680.236422]  [<ffffffff812fc3d3>] ? mutex_lock+0x1a/0x31
Apr 16 09:43:35 lhost kernel: [76680.236626]  [<ffffffff81113c8c>] ? __blockdev_direct_IO+0x1d3/0xa60
Apr 16 09:43:35 lhost kernel: [76680.236852]  [<ffffffff810b51c2>] ? generic_file_buffered_write+0x1f5/0x278
Apr 16 09:43:35 lhost kernel: [76680.237097]  [<ffffffffa021da26>] ? ext4_ind_direct_IO+0x10e/0x1be [ext4]
Apr 16 09:43:35 lhost kernel: [76680.237320]  [<ffffffffa02205c9>] ? ext4_get_block+0x0/0xe2 [ext4]
Apr 16 09:43:35 lhost kernel: [76680.237528]  [<ffffffff810b57bf>] ? generic_file_aio_read+0xf6/0x536
Apr 16 09:43:35 lhost kernel: [76680.237794]  [<ffffffff81071dbf>] ? wake_futex+0x31/0x4e
Apr 16 09:43:35 lhost kernel: [76680.237984]  [<ffffffff810ef061>] ? do_sync_read+0xce/0x113
Apr 16 09:43:35 lhost kernel: [76680.238278]  [<ffffffff8100f79c>] ? __switch_to+0x285/0x297
Apr 16 09:43:35 lhost kernel: [76680.238471]  [<ffffffff81065046>] ? autoremove_wake_function+0x0/0x2e
Apr 16 09:43:35 lhost kernel: [76680.238687]  [<ffffffff81048282>] ? finish_task_switch+0x3a/0xaf
Apr 16 09:43:35 lhost kernel: [76680.238897]  [<ffffffff810efa84>] ? vfs_read+0xa6/0xff
Apr 16 09:43:35 lhost kernel: [76680.239090]  [<ffffffff810efb34>] ? sys_pread64+0x57/0x77
Apr 16 09:43:35 lhost kernel: [76680.239290]  [<ffffffff81010b42>] ? system_call_fastpath+0x16/0x1b 
```

就在完全停电之前：

```
Apr 16 09:45:32 lhost kernel: [76800.253284]  [<ffffffff81010b42>] ? system_call_fastpath+0x16/0x1b
Apr 16 09:56:29 lhost kernel: [77453.643191] Clocksource tsc unstable (delta = -788398275 ns)
Apr 16 10:01:01 lhost kernel: imklog 4.6.4, log source = /proc/kmsg started. 
```

所以我决定打开慢查询日志，这就是记录的内容：

```
# Time: 130416 13:38:41
# User@Host: lhost[lhost] @ localhost []
# Query_time: 2.059521  Lock_time: 0.000026 Rows_sent: 0  Rows_examined: 1
use lhost;
SET timestamp=1366105121;
UPDATE t_fuser SET DATE_UPDATE=now()  WHERE ID = 992277;
# Time: 130416 13:56:42
# User@Host: root[root] @ localhost []
# Query_time: 3.663760  Lock_time: 0.000037 Rows_sent: 230  Rows_examined: 230
SET timestamp=1366106202;
SHOW TABLE STATUS FROM `lhost`;
# User@Host: root[root] @ localhost []
# Query_time: 3.693291  Lock_time: 0.000031 Rows_sent: 230  Rows_examined: 230
SET timestamp=1366106202;
SHOW TABLE STATUS FROM `lhost`;
# Time: 130416 14:00:19
# User@Host: lhost[lhost] @ localhost []
# Query_time: 7.139369  Lock_time: 0.000210 Rows_sent: 122  Rows_examined: 3027170 
```

这对我来说真的很奇怪。我尝试直接通过控制台执行类似的查询（此日志中有更复杂的查询，但这不是重点）并且更快地获得结果，因此它不是索引。

我能做些什么来解决这个问题？是硬件吗？

```
# free -m
             total       used       free     shared    buffers     cached
Mem:          2012       1355        657          0         40        627
-/+ buffers/cache:        687       1325
Swap:         2047        129       1918 
```

提前感谢您的建议。

附加数据：

![CPU 使用率 - munin](https://i.imgur.com/j3RFPFr.png) ![内存使用 - munin](https://i.imgur.com/PpGkhfb.png)

慢查询简介：

```
mysql> show profile;
+--------------------------------+----------+
| Status                         | Duration |
+--------------------------------+----------+
| starting                       | 0.000020 |
| checking query cache for query | 0.000111 |
| checking permissions           | 0.000003 |
| checking permissions           | 0.000001 |
| checking permissions           | 0.000002 |
| checking permissions           | 0.000001 |
| checking permissions           | 0.000003 |
| Opening tables                 | 0.000032 |
| System lock                    | 0.000004 |
| Table lock                     | 0.000006 |
| init                           | 0.000074 |
| optimizing                     | 0.000020 |
| statistics                     | 0.000171 |
| preparing                      | 0.000027 |
| Creating tmp table             | 0.000160 |
| executing                      | 0.000003 |
| Copying to tmp table           | 4.572503 |
| Creating sort index            | 0.009622 |
| Copying to group table         | 0.029744 |
| Removing duplicates            | 0.010745 |
| Sorting result                 | 0.000086 |
| Sending data                   | 0.004350 |
| end                            | 0.000008 |
| removing tmp table             | 0.001207 |
| end                            | 0.000005 |
| removing tmp table             | 0.000040 |
| end                            | 0.000004 |
| query end                      | 0.000003 |
| freeing items                  | 0.000018 |
| removing tmp table             | 0.000005 |
| freeing items                  | 0.002768 |
| logging slow query             | 0.000004 |
| logging slow query             | 0.000029 |
| cleaning up                    | 0.000006 |
+--------------------------------+----------+
34 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:33:17.853

先尝试执行fsck再检查IO性能：dd if=/dev/zero of=/var/lib/mysql/file1 bs=512 count=10000

# batch-file - 用于备份多个文件的旧增量并将最后一个增量更改为“1”的批处理文件脚本

> ID：16034510
> 
> 赞同：-1
> 
> 时间：2013-04-16T10:20:01.340
> 
> 标签：batch-file

首先，我是批处理文件脚本的新手并且愿意学习它。

假设我在一个文件夹中有一堆文件，文件扩展名为/file-ext：***ext1***、***ext2***和***ext3***。

每个文件都有增量，例如：

文件名.file -ext.1 文件名.file
-ext.2
文件名.file-ext.3
...
文件名.file-ext.x

主要目标是备份旧增量（从1到x-1），然后将它们备份到新文件夹中，然后将最后一个增量“x”更改为“1”。

您的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:10:15.727

文件名包含数字时的主要问题是它们以*字母顺序*而不是数字顺序出现。例如：

```
filename.file-ext.1
filename.file-ext.10
filename.file-ext.11
filename.file-ext.12
filename.file-ext.2
filename.file-ext.3
filename.file-ext.4
filename.file-ext.5
filename.file-ext.6
filename.file-ext.7
filename.file-ext.8
filename.file-ext.9 
```

上一个列表中的最后一个文件应该是 12，但`for`or `dir`commands 给出的最后一个名称是 9。下面的批处理文件使用了两遍方法：它首先查看整个列表并获取*真正的*最后一个数字文件，然后处理再次列出并备份除最后一个文件之外的所有文件。

```
@echo off
setlocal EnableDelayedExpansion

rem First pass: Get the last numeric file
set last=0
for %%a in (filename.ext.*) do (
   set num=%%~Xa
   if !num:~1! gtr !last! set last=!num:~1!
)

rem Second pass: Backup all files excepting the last one
for %%a in (filename.ext.*) do (
   if %%a neq filename.ext.%last% move %%a \backupDir
)

rem Rename the last file, if it is not 1
if %last% gtr 1 ren filename.ext.%last% filename.ext.1 
```

上面的程序写得尽可能简单明了。如果文件名可能包含空格，则必须插入一些引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T16:12:03.197

```
@ECHO OFF
SETLOCAL
SET filename=FILENAME
SET fileext=FILE-EXT
SET "deedpoll="
FOR /f "delims=" %%i IN ('dir /b /a-d /o:-d "%filename%.%fileext%*"') DO (
 IF DEFINED deedpoll ECHO MOVE "%%i" "\newdir\" >nul
 IF NOT DEFINED deedpoll SET "deedpoll=%%i"
)
IF DEFINED deedpoll ECHO REN "%deedpoll%" "%filename%.%fileext% 1" 
```

由于我们不知道所涉及的真实文件名或文件扩展名，我们只能假设它们将是简单的字母和空格。我还假设您的目标目录存在并且您的当前目录是包含您的文件集的目录。

而且我假设您的排序将在 DATE 工作 - 这是最新的文件，没有备份（移动到`newdir`）并重命名...1

这很简单。首先清除`deedpoll`然后执行裸文件名`dir`列表，没有目录名按日期倒序排列。`/b``/a-d``/o:-d`

因此，分配给 %%i 的第一个文件名将是最新的。`deedpoll`尚未设置，因此`move`不执行，然后`deedpoll`分配最新文件的名称。

由于`deedpoll`现在已设置（或定义），因此`move`将为与提供的掩码匹配的每个其他文件名完成。

最后，`deedpoll`重命名为版本 1。

请注意，`REN`ame 和`MOVE`commands 仅`ECHO`在屏幕上显示。这是为了让您确保该批次将执行您希望它执行的操作。如果一切正确，请删除这两个`ECHO`关键字以激活重命名和移动。

# python - 从文本中拆分数字

> ID：16034512
> 
> 赞同：2
> 
> 时间：2013-04-16T10:20:02.540
> 
> 标签：python, string, split, ironpython

我想拆分一个包含数字和公制单位的字符串。我试过这个：

```
foo = "10mm"
match = re.match(r"([0-9]+)([a-z]+)", foo, re.I)

num = match.group(1)
unit = match.group(2) 
```

它适用于整数，但如果数字包含逗号则无效。为此我需要改变什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:22:32.187

如果你想允许`10`or`10,0`但不允许`,,,`, `,123`or `123,`，那么你可以使用

```
match = re.match(r"([0-9]+(?:,[0-9]+)?)([a-z]+)", foo, re.I) 
```

如果您实际上是指点/句点 ( `10.0`)，那么您需要记住将其转义：

```
match = re.match(r"([0-9]+(?:\.[0-9]+)?)([a-z]+)", foo, re.I) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:24:09.170

```
>>> re.split('[a-z]+', foo, flags=re.IGNORECASE)
['10', '']

>>> re.split('[0-9]+', foo, flags=re.IGNORECASE)
['', 'mm'] 
```

# java - 从 TD Tag 中解析文本的 HTML

> ID：16034513
> 
> 赞同：0
> 
> 时间：2013-04-16T10:20:02.980
> 
> 标签：java, android, android-intent, html-parsing

我有我的 HTML 数据

```
 <table border='0' cellpadding='3' bgcolor="#CCCCCC" class="hostinfo_title2"  width='100%' align="center">
                <tr align='center' bgcolor="#ffffff">
                  <td width='26%' class="hostinfo_title3">Archive Url</td>
                </tr>

                <tr bgcolor="#ffffff"
                  <td height="25" align="center">http://www.toradio.com/prgramdetails/20130413_vali_mm.mp3</td>

                </tr>
                              </table> 
```

我想从上面的 HTML 文本中获取 mp3 url( [http://www.toradio.com/prgramdetails/20130413_vali_mm.mp3 )。](http://www.toradio.com/prgramdetails/20130413_vali_mm.mp3)

我正在关注此[链接](https://stackoverflow.com/questions/12158416/html-text-extraction-in-j2me-without-any-html-tags-and-special-characters)，它是正确的还是解析此文本的更好方法有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:28:00.430

查看[JSoup](http://jsoup.org/)。这是一个不错的 JAVA HTML 解析器。

您应该可以通过以下方式做到这一点：

```
String html = "<YOUR HTML HERE>";
Document doc = Jsoup.parse(html);
Elements tds = doc.select("table.hostinfo_title2").select("td");

String mp3Link = "";
for(Element td : tds) {
     if(td.text().contains("mp3") {
         mp3Link = td.text();
         // do something with mp3Link
     }
} 
```

# java - 适配器不显示内容

> ID：16034515
> 
> 赞同：0
> 
> 时间：2013-04-16T10:20:06.077
> 
> 标签：java, android, listview

我正在尝试使用下面的适配器从我的主要活动中填充数据。当我运行活动时，屏幕保持空白。我相信这与可能为 null 的 ArrayList 有关。谁能告诉我为什么我的数据没有显示。我在这个错误上已经三天了：/

```
public class CopyOfSecondWheelAdapter extends AbstractWheelTextAdapter {

    ArrayList<convertor_pst> PostList = new ArrayList<convertor_pst>();
    public ImageLoader imageLoader; 

    Convertor main;

    public CopyOfSecondWheelAdapter(Context context) {
        super(context, R.layout.count_layout, NO_RESOURCE);
        setItemTextResource(R.id.country_name);
    }

    @Override
    public View getItem(int index, View cachedView, ViewGroup parent) {

        View view = super.getItem(index, cachedView, parent);
        ImageView img = (ImageView) view.findViewById(R.id.flag);

        imageLoader.DisplayImage(PostList.get(index).getDevise(), img);
        System.out.println("get item count:"+getItemsCount() );

        TextView text = (TextView)view.findViewById(R.id.lib);
        text.setText(PostList.get(index).getQuotite());

        return view;
    }

    @Override
    public int getItemsCount() {
        return  PostList.toArray().length;
    }

    @Override
    protected CharSequence getItemText(int index) {
        return PostList.get(index).getDevise().toString();
    }
} 
```

**更新：**

在我的主要课程中，我已经有一个

```
ArrayList<convertor_pst> PostList = new ArrayList<convertor_pst>(); 
```

这是填充的。

这是我的主要课程，即我的 convertor.class

```
ArrayList<convertor_pst> PostList = new ArrayList<convertor_pst>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.convertor);
        context = this;

        text_devise_two = (TextView)findViewById(R.id.text_spacetwo);       

        final WheelView country = (WheelView) findViewById(R.id.country);
        country.setVisibleItems(10);
        country.setViewAdapter(new FirstWheelAdapter(this));

        edt_validate = (EditText)findViewById(R.id.edt_validate);

        current_type_loc = (TextView)findViewById(R.id.current_type_loc);
        refresh_header= (TextView)findViewById(R.id.refresh_header);

        //set current time
        Calendar c = Calendar.getInstance();
        SimpleDateFormat df = new SimpleDateFormat("dd/MMM/yyyy");
        String formattedDate = df.format(c.getTime());
        refresh_header.setText(getResources().getString(R.string.mise_a_jour)+" "+formattedDate);

        image_one = (ImageView)findViewById(R.id.image_one);
        image_two = (ImageView)findViewById(R.id.image_two);

        final WheelView currency = (WheelView) findViewById(R.id.currency);
        currency.setVisibleItems(10);
        currency.setViewAdapter(new CopyOfSecondWheelAdapter(this));

        country.addChangingListener(new OnWheelChangedListener() {
            @Override
            public void onChanged(WheelView wheel, int oldValue, int newValue) {

                if (!scrolling) {

                }
            }
        });

        country.addScrollingListener( new OnWheelScrollListener() {

            @Override
            public void onScrollingStarted(WheelView wheel) {

                scrolling = true;
            }

            @Override
            public void onScrollingFinished(WheelView wheel) {

                scrolling = false;
                //1.
                wheelSelector(country.getCurrentItem());

            }
        });

        currency.addScrollingListener( new OnWheelScrollListener() {

            @Override
            public void onScrollingStarted(WheelView wheel) {

                scrolling = true;
            }

            @Override
            public void onScrollingFinished(WheelView wheel) {

                scrolling = false;
                //1.
                secondWheel(currency.getCurrentItem());
            }
        });

        country.setCurrentItem(1);
        currency.setCurrentItem(3);
        new loadingTask().execute();
    }

    /*1\. Change currency */
    public void wheelSelector (int id){

        if (id==0){

            current_type_loc.setText("EUR");
            image_one.setBackgroundResource(R.drawable.eur);

        }else {

            current_type_loc.setText("USD");
            image_one.setBackgroundResource(R.drawable.usd);

        }
    }

    class loadingTask extends AsyncTask<Void, Void,Void> {

          @Override
        protected void onPreExecute() {
        // TODO Auto-generated method stub
            pd = ProgressDialog.show(Convertor.this, "", "Chargement en cours..", true);

            super.onPreExecute();
        }

        @Override
        protected void onPostExecute(Void result) {
        // TODO Auto-generated method stub
            super.onPostExecute(result);

            pd.dismiss();
            doc = Jsoup.parse(getxml,"", Parser.xmlParser());

            taux = doc.select("taux");

            for (int i = 0; i < taux.size(); i++) {

                PostList.add(new convertor_pst(taux.get(i).getElementsByTag("devise").text().toString(),
                        taux.get(i).getElementsByTag("dateCours").text().toString(),
                        taux.get(i).getElementsByTag("libelle").text().toString(),
                        taux.get(i).getElementsByTag("quotite").text().toString(),
                        taux.get(i).getElementsByTag("fixing").text().toString()));
            }
        }

        @Override
        protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub

             envelope =
                    "soap content"

            String requestEnvelope=String.format(envelope, "28-03-2013","true");
            getxml = Util.CallWebService(URL,SOAP_ACTION,requestEnvelope);
            System.out.println(getxml);

            return null; 

        }
    }

    public void secondWheel(int index){

        text_devise_two.setText(PostList.get(index).getDevise());
        edt_validate.setText("   "+PostList.get(index).getFixing());

    }

    /*
     * 
     * (non-Javadoc)
     * @see android.app.Activity#onPause()
     * check if activity go to background
     */

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();

        if (Util.isApplicationBroughtToBackground(Convertor.this)==true){
            startActivity(new Intent(Convertor.this,Compte.class));
        }

    }

} 
```

这是原始的车轮适配器类

```
public class CopyOfSecondWheelAdapter extends AbstractWheelTextAdapter {

    ArrayList<convertor_pst> PostList;
    public ImageLoader imageLoader; 

    // Countries names
    private String countries[] =
            new String[] {"EUR", "USD","EUR", "USD","EUR", "USD","EUR", "USD","EUR", "USD","EUR", "USD"};

    // Countries flags
    private int flags[] = new int[] {R.drawable.eur, R.drawable.usd,R.drawable.eur, R.drawable.usd,R.drawable.eur, R.drawable.usd,R.drawable.eur, R.drawable.usd,R.drawable.eur, R.drawable.usd,R.drawable.eur, R.drawable.usd};

    /**
     * Constructor
     */

    Convertor main;

    public CopyOfSecondWheelAdapter(Context context) {
        super(context, R.layout.count_layout, NO_RESOURCE);
        setItemTextResource(R.id.country_name);

    }

    @Override
    public View getItem(int index, View cachedView, ViewGroup parent) {

        View view = super.getItem(index, cachedView, parent);
        ImageView img = (ImageView) view.findViewById(R.id.flag);
        img.setImageResource(flags[index]);

        TextView text = (TextView)view.findViewById(R.id.lib);
        text.setText("code");

        return view;
    }

    @Override
    public int getItemsCount() {
        return  countries.length;
    }

    @Override
    protected CharSequence getItemText(int index) {
        return countries[index];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:09:21.613

如果我没看错的话，你有 2 倍的变量名`PostList`让你感到困惑。一个在您的活动中创建，一个在您的适配器中创建，并且您调用`add()`活动的变量，适配器中的列表永远不会获取项目。

为您的适配器中的列表创建一个设置器，并在您的`onPostExecute()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:11:30.947

据我所理解

```
currency.setViewAdapter(new CopyOfSecondWheelAdapter(this)); 
```

此行创建适配器，但您在此行填充它：

```
new loadingTask().execute(); 
```

这是之后，所以你必须打电话

```
yourAdapter.notifyDataSetChanged(); 
```

在您的适配器上更新数据。

Android 开发者帮助说

> notifyDataSetChanged() 通知附加的观察者底层数据已更改，任何反映数据集的视图都应自行刷新。

所以在你的情况下，你必须

1.  创建一个适配器（yourAdapter = new CopyOfSecondWheelAdapter ....）
2.  用 setViewAdater (WheelView.setViewAdapter(yourAdapter)) 分配它
3.  在异步任务的“postExecute”中，使用 yourAdapter.notifyDataSetChanged() 进行调用；

顺便说一句，我不确定你在做什么，但如果你需要在两个不同的位置显示一组数据，你不需要复制（创建一个副本）。两个列表显示可以共享同一个适配器。

**更新**

您已对您的问题进行了更新，我对此更新进行了回答：

在原始适配器中，国家/地区未加载到异步任务中。因此，当您分配适配器时，显示屏会显示正确的值，因为它们在您分配适配器时就存在于适配器中。

在您的情况下，您在异步任务中加载值。当您创建适配器时，它是空的，并且您将其分配为空，因此显示屏会显示一个空列表。您应该将数据更改通知您的显示器。

因此，在原件中，无需通知，因为数据在分配时是正确的。在您的情况下，您必须实现 notifyDataSetChanged()。或者更改您要扩展的适配器类型。

# php - 突出显示 php 中的活动菜单链接

> ID：16034516
> 
> 赞同：0
> 
> 时间：2013-04-16T10:20:06.437
> 
> 标签：php, menu

我在php中做了一个导航，效果很好，几乎完美。我有 6 个页面的站点，活动页面的按钮以不同的颜色突出显示。它在 4 页中有效，但对于“黄金走向绿色”和“关于厄瓜多尔”的链接仍未突出显示。这是我使用的代码：

```
<?php 
//initialize the page variables here so no errors occur in some server environments
$index="myButtons";
$about="myButtons";
$gold="myButtons";
$ecuador="myButtons";
$contact="myButtons";
$documents="myButtons";
//this line gets the file name without the dot and extension

$menuLinkid=basename($_SERVER['PHP_SELF'], ".php");
if($menuLinkid=="index"){
$index='myActiveButton';
} else if($menuLinkid=="about"){
$about='myActiveButton';
} else if($menuLinkid=="gold"){
$gold='myActiveButton';
} else if($menuLinkid=="ecuador"){
$ecuador='myActiveLink';
} else if($menuLinkid=="contact"){
$contact='myActiveButton';
} else if($menuLinkid=="documents"){
$documents='myActiveButton';
}
?>

<div id="header">
<div id="innerheader">
<h1 id="logo"><a href="../index.php"><img src="img/logo.gif" /></a></h1>
<nav id="navigation">
<ul class="menu">
<li><a class="<?php echo $index; ?>" href="../index.php">Home</a></li>
<li>/</li>
<li><a class="<?php echo $about; ?>" href="../about.php">About</a></li>
<li>/</li>
<li><a class="<?php echo $gold; ?>" href="../gold-going-green.php">Gold going green</a>   </li>
<li>/</li>
<li><a class="<?php echo $ecuador; ?>" href="../about-ecuador.php">About Ecuador</a></li>
<li>/</li>
<li><a class="<?php echo $contact; ?>" href="../contact.php">Contact</a></li>
<li>/</li>
<li><a class="<?php echo $documents; ?>" href="../documents.php">Documents</a></li>
</ul>
</nav>
</div><!-- /innerheader -->
</div><!-- /header --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:22:52.910

您将everthing 设置为“myActiveButton”，并将 myActiveLink 用于厄瓜多尔：

```
$ecuador='myActiveLink'; 
```

尝试这个：

```
$ecuador='myActiveButton'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:23:21.567

改变，

```
else if($menuLinkid=="gold"){
$gold='myActiveButton'; 
```

至

```
else if($menuLinkid=="gold-going-green"){
    $gold='myActiveButton'; 
```

＆ 改变

```
$ecuador='myActiveLink'; 
```

至

```
 $ecuador='myActiveButton'; 
```

并重新检查。

# html - div标签垂直滚动不适用于相对定位

> ID：16034519
> 
> 赞同：0
> 
> 时间：2013-04-16T10:20:20.180
> 
> 标签：html, css, css-float, responsive-design

请检查[此链接](http://jsfiddle.net/9Utwb/2/)。我正在设计一个包含 2 个部分的页面，每个部分都有独立的滚动条。我将 body 的样式设置为

```
height:100%
overflow:hidden; 
```

并设置

```
height:100%;
overflow:scroll 
```

对于两个 div。但滚动条不起作用。我无法将位置设置为绝对或固定，因为我使用的是响应式 UI。如果我使用绝对/固定，当我将窗口调整为更小的分辨率时会出现一些问题。如何在不改变这些元素的位置属性的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:20:21.050

你需要设置你的`body`和`html`在`height:100%`。在此处查看简化示例：http: [//jsfiddle.net/bYXRT/](http://jsfiddle.net/bYXRT/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T10:30:24.137

给你的 div 宽度是固定在 px

```
height:100px;
overflow:hidden; 
```

# ios - 为什么我的定位服务没有在后台运行

> ID：16034520
> 
> 赞同：0
> 
> 时间：2013-04-16T10:20:20.420
> 
> 标签：ios, objective-c, core-location

我的核心位置代码运行良好，所有代表都正常运行，我可以在地图视图中查看确切位置。现在我希望这个应用程序继续在后台运行，我在互联网上搜索，发现只有少数服务可以在后台工作，其他服务会在几分钟内暂停。为了启用这些服务，我设置了一个标志，`uibackgroundmode = location`我在核心位置的代表也在工作，但为什么我的应用程序在运行 20 分钟后挂起？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:22:33.530

这不起作用有几个原因。首先尝试[这个问题](https://stackoverflow.com/questions/6347503/how-do-i-get-a-background-location-update-every-n-minutes-in-my-ios-application)的[答案](https://stackoverflow.com/a/6465280/361247)：

> *   指定位置背景模式
> *   通过使用 UIApplication:beginBackgroundTaskWithExpirationHandler 在后台使用 NSTimer：
> *   如果 n 小于 UIApplication:backgroundTimeRemaining 它确实可以正常工作，如果 n 较大，则应在没有剩余时间之前再次启用（和禁用）位置管理器以避免后台任务被杀死。这确实有效，因为 location 是三种允许的后台执行类型之一。

# excel - 从从数据库中获取的数据创建数据透视时面临的问题

> ID：16034527
> 
> 赞同：2
> 
> 时间：2013-04-16T10:20:35.263
> 
> 标签：excel, excel-2010, vba

我正在制作一个 excel 项目，用户将在其中选择日期并填写服务器/数据库名称，数据将从该名称填充到 Excel 工作簿中已经存在的具有正确列名的工作表中。现在将创建两个工作表（填充 sql 数据）和我要创建的每个工作表的枢轴。这是名为 sheet 的产品的第一个宏

```
Sub Prod()
ActiveWorkbook.Sheets("UserInput").Activate ' a sheet where date picker and db/server names are taken from user
Set con = New ADODB.Connection
Set rs = New ADODB.Recordset
Dim slctqry As String
Dim dealdate As String
Dim today As String
Dim msg As String
msg = "Sorry, for this date data is yet to come"
today = Range("B2").Value  'B2 cell has today() function
today = Format(today, "yyyy-mm-dd")
dealdate = Range("B1").Value 'date picker is linked to this cell
dealdate = Format(dealdate, "yyyy-mm-dd")
con.ConnectionString = "Provider=SQLOLEDB;Data Source=sql123abce\sql01;Initial Catalog=sqldb;User ID=abcd;Password=Windows;Integrated Security=SSPI"
con.Open
If (dealdate > today) Then
MsgBox msg
ElseIf (dealdate = today) Then
slctqry = "select Number,Premium, TransactionID, money from traders(nolock)"
slctqry = slctqry & " where convert(date,tradedate,103)='" & dealdate & "'"
Set rs.ActiveConnection = con
rs.Open slctqry
ActiveWorkbok.Sheets("Prod").Activate ' prod named worksheet where data will be copied from SQL db
Range("A2").CopyFromRecordset (rs)
ElseIf (dealdate < today) Then
slctqry = "select Number,Premium, TransactionID, money from tradersaudit(nolock)"
slctqry = slctqry & " where convert(date,tradedate,103)='" & dealdate & "'"
Set rs.ActiveConnection = con
rs.Open slctqry
'Dim ws4 As Worksheet
ActiveWorkbook.Sheets("Prod").Activate
Range("A2").CopyFromRecordset (rs)
End If
con.Close
End Sub 
```

对于从用户获取的 db/server 和数据将填写在名为 Test 的工作表中，使用的宏是

```
Dim cn As New ADODB.Connection
Dim rs As New ADODB.Recordset

Function GetConnectionString() As String

   Dim strCn As String
    strCn = "Provider=sqloledb;"
    strCn = strCn & "Data Source=" & Range("Server") & ";"
    strCn = strCn & "Initial Catalog=" & Range("Database") & ";"
    If (Range("UserID") <> "") Then
        strCn = strCn & "User ID=" & Range("UserID") & ";"
        strCn = strCn & "password=" & Range("Pass")
    Else
        strCn = strCn & "Integrated Security = SSPI"
    End If

    GetConnectionString = strCn

End Function

Sub Test()

ActiveWorkbook.Sheets("UserInput").Activate
Dim ws As Worksheet
Dim Sql As String
Dim dealdate As String
Dim today As String
Dim msg As String
msg = "Sorry, for this date data is yet to come"
today = Range("B2").Value
today = Format(today, "yyyy-mm-dd")
dealdate = Range("B1").Value
dealdate = Format(dealdate, "yyyy-mm-dd")
' open connection
cn.ConnectionTimeout = 100
cn.Open GetConnectionString()
If (dealdate > today) Then
MsgBox msg
ElseIf (dealdate = today) Then
Sql = "select Number,Premium, TransactionID, money from traders(nolock)"
Sql = Sql & " where convert(date,tradedate,103)='" & dealdate & "'"
Set rs.ActiveConnection = con
rs.Open Sql
ActiveWorkbook.Sheets("Test").Activate ' test sheet is there alerady with proper column  names
Range("A2").CopyFromRecordset rs
ElseIf (dealdate < today) Then
Sql = "select Number,Premium, TransactionID, money from traders(nolock)"
Sql = Sql & " where convert(date,tradedate,103)='" & dealdate & "'"
Set rs.ActiveConnection = cn
rs.Open Sql
ActiveWorkbook.Sheets("Test").Activate
Range("A2").CopyFromRecordset rs
End If
cn.Close
End Sub 
```

现在数据已成功填充到工作表和测试表中。下一个宏用于创建 Pivot。

```
 Dim bReport As Workbook, Report As Worksheet, pivotSheet As Worksheet 'To set up my workbook & worksheet variables.

    Set bReport = Excel.ActiveWorkbook
    Set Report = bReport.Worksheets.Add 'Create the worksheet to place the SQL data
    Set pivotSheet = bReport.Worksheets.Add 'Create the worksheet to place the Pivot Table

    Dim pivotSource As Range 'To set up the variable representing your pivot data.
    Set pivotSource = Report.UsedRange 'You can define a specific range, but this assumes the data is the only thing on the Report sheet.

    Dim tableName As String
    tableName = "Pivot_Prod"  'name of pivot report i wanted to create from data in sheet Prod

    bReport.PivotCaches.Add(SourceType:=xlDatabase, _
            SourceData:=pivotSource).CreatePivotTable TableDestination:=pivotSheet.Cells(1, 1), _
                tableName:=tableName

    Set pt = pivotSheet.PivotTables(tableName)
    pivotSheet.PivotTableWizard TableDestination:=pivotSheet.Cells(1, 1)
    Set pOne= pt.PivotFields("Number")
    Set pTwo = pt.PivotFields("Premium")
    Set pthree = pt.PivotFields("TransactoinID")
    Set pFour = pt.PivotFields("money")

    pOne.Orientation = xlRowField 'This assigns the orientation of a given field to xlRowField.
    pTwo.Orientation = xlRowField
    pTwo.Subtotals(1) = False 'This denotes there will be no subtotal for this field.
    pThree.Orientation = xlRowField
    pThree.Subtotals(1) = False
    pFour.Orientation = xlDataField
    pFour.NumberFormat = "$#,##0.00" 
```

测试表也一样。

@loplateral-在您的代码文件中，您正在创建新工作表以从 sql db 获取数据。但是我应该在哪里以及如何将我的产品和测试表链接到缓存以使它们成为枢轴源？我的意思是在你的方法中，如果我调用宏 prod() 或 Test() 来获取我们在此处添加的名为 report 的工作表中的数据。那么在那种情况下我们怎么能继续呢？在上面的代码中，我在 pivotcache.add 代码行中遇到错误。好像需要小改动，看看能不能改正。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:35:15.593

TBH，VBA 中的数据透视表真的很痛苦。不久前，我决定将它们用于一些项目，并且从那以后一直避免使用它们。为您的代码实现数据透视缓存的正确方法如下：

```
'First, define the range that includes your source data. This would be the data you pulled from SQL, and presumably inserted into a different sheet using CopyFromRecordset. 
'NOTE: If you have not copied the data from the recordset onto a worksheet, visit the links in this post to find out how.
'Also note, I always define the workbooks and worksheets I will be using in a project, and then reference them via their variables. This makes my code less error prone, I find.

Dim bReport As Workbook, Report As Worksheet, pivotSheet As Worksheet 'To set up my workbook & worksheet variables.

Set bReport = Excel.ActiveWorkbook
Set Report = bReport.Worksheets.Add 'Create the worksheet to place the SQL data
Set pivotSheet = bReport.Worksheets.Add 'Create the worksheet to place the Pivot Table

'******************************************************************************************************************
'Here you will insert your SQL data into the Report worksheet to be used as the source of the Pivot Table data.
'   ....Your code here....
'******************************************************************************************************************

Dim pivotSource As Range 'To set up the variable representing your pivot data.
Set pivotSource = Report.UsedRange 'You can define a specific range, but this assumes the data is the only thing on the Report sheet.

'Next you will decide on the name of the Pivot Table
Dim tableName As String
tableName = "Poll Table"

'Now here is what you've been waiting for...the ever-elusive PivotCaches method.
bReport.PivotCaches.Add(SourceType:=xlDatabase, _
        SourceData:=pivotSource).CreatePivotTable TableDestination:=pivotSheet.Cells(1, 1), _
            tableName:=tableName

Set pt = pivotSheet.PivotTables(tableName) 'Set a Pivot Table variable to our new Pivot Table    
pivotSheet.PivotTableWizard TableDestination:=pivotSheet.Cells(1, 1) 'Place the Pivot Table to Start from A1 on the new sheet 
```

您的字段定义看起来正确，因此这应该可以帮助您解决 PivotCaches 问题，这无疑会将您带到下一个 Pivot Tables 问题。

如需其他帮助，请参阅以下链接：

*   [使用 CopyFromRecordset 将数据粘贴到 Excel](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range.copyfromrecordset%28v=office.11%29.aspx)
*   [Excel 数据透视表：使用 VBA 对字段、值和日期进行排序，使用自定义列表](http://www.globaliconnect.com/excel/index.php?option=com_content&view=article&id=148%3aexcel-pivot-tables-sort-fields-values-a-dates-use-custom-lists-with-vba&catid=79&Itemid=475)

* * *

此外，这是一个使用我所做的项目中的数据透视表来格式化和过滤信用卡收据的完整工作示例：

```
Sub amexTable()

Dim i As Integer, k As Integer, j As Integer
Dim Report As Worksheet, reportBook As Workbook, pivotSheet As Worksheet
Dim Row As Range, Col As Range, pivotSrc As Range, pivotDest As Range

Set Report = Excel.ActiveSheet
Set reportBook = Report.Parent
Set pivotSheet = reportBook.Worksheets.Add
pivotSheet.Name = "Amex Pivot Table"

'************************************
'Declare variables for pivot headers
'************************************
Dim pDate As PivotField, pDesc As PivotField, _
pCardmember As PivotField, pAccount As PivotField, pAmount As PivotField
Dim pGL As PivotField
Dim Table_Name As String
Dim pt As PivotTable

'*******************************
'Declare and create pivot table
'*******************************
Table_Name = "Amex Pivot Table"
Set pivotSrc = Report.Range("A7:F" & Report.UsedRange.Rows.Count)

reportBook.PivotCaches.Add(SourceType:=xlDatabase, _
        SourceData:=pivotSrc).CreatePivotTable TableDestination:=pivotSheet.Cells(1, 1), _
            TableName:=Table_Name

    Set pt = pivotSheet.PivotTables(Table_Name) 'Set a Pivot Table variable to our new Pivot Table

    pivotSheet.PivotTableWizard TableDestination:=pivotSheet.Cells(1, 1) 'Place the Pivot Table to Start from A1 on the new sheet

    Set pCardmember = pt.PivotFields("Cardmember")
    Set pAccount = pt.PivotFields("Account #")
    Set pDate = pt.PivotFields("Date")
    Set pDesc = pt.PivotFields("Description")
    Set pAmount = pt.PivotFields("Amount")

    pCardmember.Orientation = xlRowField 'This assigns the orientation of a given field to xlRowField.
    pDate.Orientation = xlRowField
    pDate.Subtotals(1) = False 'This denotes there will be no subtotal for this field.
    pDesc.Orientation = xlRowField
    pDesc.Subtotals(1) = False
    pAccount.Orientation = xlRowField
    pAmount.Orientation = xlDataField
    pAmount.NumberFormat = "$#,##0.00"
    pt.SortUsingCustomLists = True 'Sets the pivot table to use a custom sorting list as described in the link below:

    '   Excel Pivot Tables: Sort Fields, Values & Dates, use Custom Lists, with VBA
    '   http://www.globaliconnect.com/excel/index.php?option=com_content&view=article&id=148:excel-pivot-tables-sort-fields-values-a-dates-use-custom-lists-with-vba&catid=79&Itemid=475

    pivotSheet.Columns.AutoFit
    pivotSheet.Cells(1, 1).EntireRow.Insert
    pivotSheet.Range("A1:E1").Merge
    pivotSheet.Cells(1, 1).HorizontalAlignment = xlCenter
    pivotSheet.Cells(1, 1).Value = "AMEX Pivot Table" 'Header'

    Application.Run myColor(pivotSheet.Cells(1, 1), "blueHeader") 'My custom function to format the header.

    Application.Run Alternate_Row_Colors(3, pivotSheet) 'My custom function to format alternating row colors.

End Sub 
```

最后一点...出于调试目的，此代码应放置在模块中，而不是 ThisWorkbook 中。

* * *

**更新**

@Honey：回应...

> @loplateral-在您的代码文件中，您正在创建新工作表以从 sql db 获取数据。但是我应该在哪里以及如何将我的产品和测试表链接到缓存以使它们成为枢轴源？

我的数据透视表源引用了我的**报告**工作表变量中使用的范围。在我给您的代码中，我的 SQL 数据位于我们分配给此**报告**工作表变量的新工作表中。在您的代码中，您的 SQL 数据位于名为“UserInput”的现有工作表中，您忽略了将其分配给变量（坏习惯）。**要使我的代码与您的代码一起使用，您需要做的就是更改 Report 变量的值。**

换句话说，改变这个：

```
Set Report = bReport.Worksheets.Add 'Create the worksheet to place the SQL data 
```

对此：

```
Set Report = bReport.Worksheets("UserInput") 'Assign your data worksheet to the Report worksheet variable. 
```

# postgresql - 将 CSV 文本数组导入 PostgreSQL 9.2

> ID：16034529
> 
> 赞同：7
> 
> 时间：2013-04-16T10:20:38.720
> 
> 标签：postgresql, csv, postgresql-9.2

我有这样的数据：

> Akhound,1,Akhoond,"{""Akhund"", ""Akhwan""}",0

pgAdmin 的导入拒绝了这一点。CSV 中的 text[] 需要采用什么格式？

我也试过这个：

> Akhoond,1,Akhoond,"{Akhund, Akhwan}",0

这是表创建：

```
CREATE TABLE private."Titles"
(
  "Abbrev" text NOT NULL,
  "LangID" smallint NOT NULL REFERENCES private."Languages" ("LangID"),
  "Full" text NOT NULL,
  "Alt" text[],
  "Affix" bit
)
WITH (
  OIDS=FALSE
);

ALTER TABLE private."Titles" ADD PRIMARY KEY ("Abbrev", "LangID");

CREATE INDEX ix_titles_alt ON private."Titles" USING GIN ("Alt");

ALTER TABLE private."Titles"
  OWNER TO postgres; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T10:54:00.200

找出答案的最佳方法是创建一个包含所需值的表并`COPY ... TO STDOUT`查看：

```
craig=> CREATE TABLE copyarray(a text, b integer, c text[], d integer);
CREATE TABLE
craig=> insert into copyarray(a,b,c,d) values ('Akhoond',1,ARRAY['Akhund','Akhwan'],0);
INSERT 0 1
craig=> insert into copyarray(a,b,c,d) values ('Akhoond',1,ARRAY['blah with spaces','blah,with,commas''and"quotes'],0);
INSERT 0 1
craig=> \copy copyarray TO stdout WITH (FORMAT CSV)
Akhoond,1,"{Akhund,Akhwan}",0
Akhoond,1,"{""blah with spaces"",""blah,with,commas'and\""quotes""}",0 
```

所以看起来`"{Akhund,Akhwan}"`还不错。请注意我添加的第二个示例，该示例显示了如何处理数组文本中的逗号、引号空格。

这适用于 psql`\copy`命令；如果它*不适*用于 PgAdmin-III，那么我建议使用`psql`and `\copy`。

# javascript - History.pushState 和遍历历史 - PhoneGap/Android

> ID：16034539
> 
> 赞同：2
> 
> 时间：2013-04-16T10:20:52.607
> 
> 标签：javascript, android, cordova, cordova-2.0.0, html5-history

我正在为客户编写一个 Android 应用程序。我一直在使用自己的框架来创建应用程序。

这个框架在 iPhone 上运行没有问题，但是当我将它应用到 Android/Phonegap 时，我遇到了后退按钮的问题。我的解决方案是调用 History 对象以在查看不同页面时创建项目。这段代码的要点如下：

```
 'hook_call': function (name, data, callback, skip_history) {

            if (typeof callback != 'function') {
                callback = function () {};
            }

            app.handlers[name].call(this, data, callback);
            window.app.current_hook = name;

            // Manage history
            if(!skip_history ) {
                history.pushState({'page': name, 'data': data}, null, '#'+name);
            }

        } 
```

我的 onpopstate 函数：

```
// Manage history
window.onpopstate = function(event) {
    try {
        if(window.app.current_hook != event.state.page)
            window.app.hook_call(event.state.page, event.state.data);
    }
    catch(e) {}
}; 
```

因此，这会正确添加项目。但是，如果我在历史记录中说三个级别 ( `home`, `listings`-> `view_listing`) 并从中按回，`view_listing`我将被带到该`listings`部分，这是正确的，但是任何进一步的按都会使我处于`listings`，它不会再向后移动。

当我在刚刚解释的导航步骤之后查看日志时，我看到了这些虚假项目：

```
04-16 10:22:39.320: D/CordovaWebView(1148): The current URL is: file:///android_asset/www/index.html#listing
04-16 10:22:39.320: D/CordovaWebView(1148): The URL at item 0 is:file:///android_asset/www/index.html
04-16 10:22:39.400: D/CordovaWebView(1148): The URL at index: 0is file:///android_asset/www/index.html
04-16 10:22:39.400: D/CordovaWebView(1148): The URL at index: 1is file:///android_asset/www/index.html#welcome
04-16 10:22:39.400: D/CordovaWebView(1148): The URL at index: 2is file:///android_asset/www/index.html#listings
04-16 10:22:39.410: D/CordovaWebView(1148): The URL at index: 3is file:///android_asset/www/index.html#listing 
```

我应该添加它以访问不同的页面，`hook_call()`例如在点击列表或按下按钮时调用。

这种情况适用于通过应用程序进行导航的任何其他组合。

有没有人有这方面或类似的经验？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T14:53:14.007

我相信你的函数应该是这样的，设置了 skip_history 标志：

```
// Manage history
window.onpopstate = function(event) {
    try {
        if(window.app.current_hook != event.state.page)
            window.app.hook_call(event.state.page, event.state.data, null, true);
    }
    catch(e) {}
}; 
```

由于您不想推送刚刚弹出的历史记录到堆栈中。

# asp.net - 什么是 Active Directory 和 Active Directory 轻型目录服务以及何时使用？

> ID：16034540
> 
> 赞同：1
> 
> 时间：2013-04-16T10:20:52.763
> 
> 标签：asp.net, c#-4.0, visual-studio-2012, active-directory

你好我对活动目录（AD）和活动目录轻量级目录服务（AD LDS）有点困惑，基本上我想构建一个应用程序，我想将它与目录服务集成以验证用户帐户，但我真的不知道什么和什么时候使用？有什么区别？是否可以在不加入域的情况下在本地计算机中使用 AD LDS？提前致谢。

注意：我正在使用 Visual Studio 2012 构建我的应用程序，并且我的计算机不属于任何域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:22:14.703

好吧，我认为您的问题的答案存在于[Microsoft 文档](http://technet.microsoft.com/en-us/library/cc754361%28v=ws.10%29.aspx)中的某处。

Active-Directory 比 OpenLDAP 或 Oracle Directory Server Enterprise Edition（以前的 SUN Directory Server Enterprise Edition）等常见的 LDAP 目录要多一点。这是一个“**系统**目录”。与简单目录的主要区别在于它内置了 Microsoft 特定的“架构”和带有“Kerberos”的安全基础架构。因此，安装 AD 与在“域控制器”中提升服务器相同。换句话说，您可以将 AD 用于您自己的用途，但他的第一个用途是用于“系统”（域）安全性。

ADLDS 是旧产品 ADAM（Active Directory 应用程序模式）的最新名称。正如您所猜想的那样，可以创建此目录仅用于您自己的应用程序，您可以构建您想要的模式，您可以将其安装在 Workation 或服务器上，它存在您可以使用您自己的应用程序重新分发的版本。

# mysql - 多主 => MySQL 上的单从复制

> ID：16034545
> 
> 赞同：0
> 
> 时间：2013-04-16T10:21:05.157
> 
> 标签：mysql

我想制作一台专用的 SLAVE 机器，用于在三个不同的服务器上复制三个数据库的数据。换句话说，我想做多主 => 单从复制。

有没有办法做到这一点，尽可能简单？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T08:25:25.510

您可以从这里获得帮助，但需要先自行测试：

[http://www.fromdual.com/sites/default/files/mm-single-slave-repl.pdf](http://www.fromdual.com/sites/default/files/mm-single-slave-repl.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:29:24.470

我相信只复制某些数据库是可能的，但是如果您正在执行跨数据库更新，那么这会给您带来问题，在这种情况下会在从属服务器上中断。

见这里：[https ://serverfault.com/questions/405096/mysql-per-database-replication](https://serverfault.com/questions/405096/mysql-per-database-replication)

另外，这是同一个问题：

[单从 - 多主 MySQL 复制](https://stackoverflow.com/questions/7544241/single-slave-multiple-master-mysql-replication)

# mysql - 将值递增到缺失的连续数字

> ID：16034548
> 
> 赞同：-1
> 
> 时间：2013-04-16T10:21:09.243
> 
> 标签：mysql, random, increment

我有一个字段值 1,2,3,5,6,.... 我的问题是，当我尝试插入“2”时，当前的 2,3 增加了 1 并且 5,6 保持不变（因为 4 不存在），则需要在 2 的位置插入新值。我尝试更新查询

```
 Update table set v1=v1+1 where v1>=newvalue 
```

在插入新值之前。但是 5,6 也增加了 1。我不知道该怎么做。有谁知道如何处理这个，请帮助我。我有大量数据，所以无法循环更新每个值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:28:31.677

```
SELECT t1.v1 + 1 AS gap
FROM `table` AS t1
LEFT OUTER JOIN `table` AS t2 ON t2.v1 = t1.v1 + 1
WHERE t2.v1 IS NULL AND t1.v1 >= :newvalue
ORDER BY t1.v1 ASC
LIMIT 1 
```

`v1`这个查询给出了插入时更新的上限`:newvalue`。

# gwt - GWT 上的 Dygraph 与 googlevizualization

> ID：16034550
> 
> 赞同：0
> 
> 时间：2013-04-16T10:21:13.447
> 
> 标签：gwt, dygraphs

我正在尝试在我们的 GWT 项目中使用 Dygraph。但是，我无法从这里找到 dygraph-gwt.jar fe [http://rowsandcolumns.blogspot.com/2012/04/gwt-dygraph-example-using-visualization.html](http://rowsandcolumns.blogspot.com/2012/04/gwt-dygraph-example-using-visualization.html)

我也看了[http://dygraphs.com/](http://dygraphs.com/)

我已经有了一些带有数据的可视化图表。

那么，任何人都可以告诉我如何在 GWT 上使用 Dygraph 和 GViz 吗？

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:03:29.613

## 解决方案 1-

您可以通过 Dan 的 GitHub 帐户浏览[DyGraph](https://github.com/danvk/dygraphs/tree/master/gwt)。您不需要 jar，因为围绕它构建的 GWT 包装器并不多。您可以将 gwt 文件夹下的文件复制到与 Dan 的 Git 存储库相同的包层次结构中的代码库中，然后按原样关注[博客](http://rowsandcolumns.blogspot.com/2012/04/gwt-dygraph-example-using-visualization.html)中的其余部分。

## 解决方案 2-

1.  [另一个开发人员 @ https://code.google.com/p/dygraphs-gwt/](https://code.google.com/p/dygraphs-gwt/)围绕 dygraph 提供了一个更新的 gwt 包装器
2.  Dygraphs GWT 用法 - [https://code.google.com/p/dygraphs-gwt/wiki/ExampleUsage](https://code.google.com/p/dygraphs-gwt/wiki/ExampleUsage)
3.  [通过UnitTest](https://code.google.com/p/dygraphs-gwt/source/browse/trunk/dygraphs-gwt-test/src/org/danvk/client/DygraphsGwtTest.java)的另一个用例。

# android - Android线性布局问题

> ID：16034553
> 
> 赞同：0
> 
> 时间：2013-04-16T10:21:16.237
> 
> 标签：android, android-linearlayout, android-relativelayout

我在将 LinearLayout(Horizo​​ntal) 分成三列（垂直列）时遇到问题。

有人可以查看 XML 并提供建议吗？

## 下面的 XML：

```
 <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:weightSum="100" >

                <LinearLayout
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="40"
                    android:orientation="vertical" >

                    <ImageButton
                        android:id="@+id/ibTakeCheckPhoto"
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_gravity="left"
                        android:layout_weight="1"
                        android:src="@drawable/camera" />
                </LinearLayout>

                <View
                    android:layout_width="2dp"
                    android:layout_height="fill_parent"
                    android:background="@android:color/darker_gray" />

                <LinearLayout
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="30"
                    android:orientation="vertical" >

                    <TextView
                        android:id="@+id/checkLayoutIDTV"
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:text="Check Number"
                        android:textStyle="bold" />

                    <TextView
                        android:id="@+id/checkLayout_amountTV"
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:text="Amount"
                        android:textStyle="bold" />
                </LinearLayout>

                <LinearLayout
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="30"
                    android:orientation="vertical" >

                    <EditText
                        android:id="@+id/checkLayoutIDET"
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:hint="Check No."
                        android:inputType="number" >
                    </EditText>

                    <EditText
                        android:id="@+id/checkLayout_amounET"
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:ems="5"
                        android:hint="Amount"
                        android:inputType="number" />
                </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T18:08:37.167

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:weightSum="100" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="24.33"
        android:orientation="vertical" >

        <TableLayout
            android:layout_width="wrap_content"
            android:layout_height="match_parent" >

            <TableRow
                android:id="@+id/tableRow1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <TextView
                    android:id="@+id/checkLayoutIDTV"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Check Number"
                    android:textAppearance="?android:attr/textAppearanceLarge"
                    android:textStyle="bold" />

            </TableRow>

            <TableRow
                android:id="@+id/tableRow2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <TextView
                    android:id="@+id/checkLayout_amountTV"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="Amount"
                    android:textAppearance="?android:attr/textAppearanceLarge"
                    android:textStyle="bold" />

            </TableRow>

        </TableLayout>

    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TableLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TableRow
                android:id="@+id/tableRow6"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >

                <EditText
                    android:id="@+id/EditText01"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:ems="5"
                    android:hint="Amount"
                    android:inputType="number" />

            </TableRow>

            <TableRow
                android:id="@+id/tableRow3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <EditText
                    android:id="@+id/checkLayoutIDET"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:hint="edit2"
                    android:inputType="number" />

            </TableRow>

            <TableRow
                android:id="@+id/tableRow4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <EditText
                    android:id="@+id/checkLayout_amounET"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:ems="5"
                    android:hint="Amount"
                    android:inputType="number" >

                    <requestFocus />
                </EditText>

            </TableRow>

        </TableLayout>

    </LinearLayout>

                                </LinearLayout> 
```

可能b它满足你的要求..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:36:54.377

我想这就是你想要的

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:orientation="horizontal"
  android:weightSum="10" >

<LinearLayout
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="4"
    android:orientation="vertical" >

    <ImageButton
        android:id="@+id/ibTakeCheckPhoto"
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        android:layout_gravity="left"
        android:layout_weight="1"
        android:src="@drawable/ic_launcher" />
</LinearLayout>

<View
    android:layout_width="2dp"
    android:layout_height="fill_parent"
    android:background="@android:color/darker_gray" />

<LinearLayout
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="3"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/checkLayoutIDTV"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Check Number"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/checkLayout_amountTV"
        android:layout_width="60dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Amount"
        android:textStyle="bold" />
</LinearLayout>

<View
    android:layout_width="2dp"
    android:layout_height="fill_parent"
    android:background="@android:color/darker_gray" />

<LinearLayout
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="3"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/checkLayoutIDET"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:hint="Check No."
        android:inputType="number" >
    </EditText>

    <EditText
        android:id="@+id/checkLayout_amounET"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ems="5"
        android:hint="Amount"
        android:inputType="number" />
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:32:58.790

使用`android:layout_width="fill_parent"`代替`android:layout_width="0dp"`in和。`ImageButton`_`TextView``EditText`

生成的布局将如下所示

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="100" >

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="40"
        android:orientation="vertical" >

        <ImageButton
            android:id="@+id/ibTakeCheckPhoto"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="left"
            android:src="@drawable/camera" />
    </LinearLayout>

    <View
        android:layout_width="2dp"
        android:layout_height="fill_parent"
        android:background="@android:color/darker_gray" />

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="30"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/checkLayoutIDTV"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:text="Check Number"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/checkLayout_amountTV"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:text="Amount"
            android:textStyle="bold" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="30"
        android:orientation="vertical" >

        <EditText
            android:id="@+id/checkLayoutIDET"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:hint="Check No."
            android:inputType="number" >
        </EditText>

        <EditText
            android:id="@+id/checkLayout_amounET"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="5"
            android:hint="Amount"
            android:inputType="number" />
    </LinearLayout>

</LinearLayout> 
```

并将硬编码的字符串提取到`res/values/strings.xml`

# c# - 带面板的分组框

> ID：16034558
> 
> 赞同：1
> 
> 时间：2013-04-16T10:21:26.377
> 
> 标签：c#, winforms

我有一个组框，我在其中添加了一个面板。面板包含 3 个标签。预期的功能是随着标签上的文本增加，面板显示滚动条。但是，它没有发生。我已经尝试了很多，在组框内外都有面板。设置标签的 MaxSize 和设置 AutoSize 但都是徒劳的。Ps AutoScroll 属性设置为 true。

请提出任何出路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:34:02.000

您需要做的就是将面板的`AutoScroll`属性设置为`true`.

```
myPanel.AutoScroll = true; 
```

我希望这有帮助。

* * *

扩展：你似乎持怀疑态度。这是您想要的表格的图像。我所做的就是做上面的事情。

![如上](https://i.stack.imgur.com/fT1LF.png)

# json - 如何在java中创建一个用方括号括起来的json？

> ID：16034568
> 
> 赞同：2
> 
> 时间：2013-04-16T10:21:55.067
> 
> 标签：json, gson

我使用以下代码生成一个 json。

```
 ArrayList<HashMap<String,String>> list = new ArrayList<HashMap<String,String>>();
HashMap<String,String> map = new HashMap<String,String>();
map.put("Message","All");
list.add(map);
Gson gson = new Gson();
String userResponseListValue = gson.toJson(map); 
```

我得到以下格式的json

```
 {"Message":"All"} 
```

我需要 json 采用以下格式

```
 [{"Message":"All"}] 
```

由于我是 gson 的新手，我无法解决这个问题。有人可以指导我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:23:59.410

方括号表示一个列表或数组，因此请尝试输出`list`您已经准备好但未使用的：

```
gson.toJson(list); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:26:18.557

括号`[]`表示`Array`JSON 中的 an，您拥有的是 a `HashMap`，而不是`Array`...

您可以手动添加方括号，例如：

```
String userResponseListValue = "[ " + gson.toJson(map) + " ]"; 
```

或创建一个`ArrayList<HashMap>`.

**编辑**：事实上，你有`Array`，但你没有使用它！尝试：

```
String userResponseListValue = gson.toJson(list); 
```

# android - 如何在android中进行调度？

> ID：16034577
> 
> 赞同：1
> 
> 时间：2013-04-16T10:22:27.337
> 
> 标签：android

我正在尝试在android中创建一个调度程序应用程序，我想在指定的时间每天在后台运行应用程序。下面是代码，但这对我不起作用请建议

```
 private void setAlarm(String targetCal){
    String[] Time=targetCal.split(":");
    Intent intent = new Intent(getBaseContext(), AlarmReceiver.class);
    PendingIntent pendingIntent = PendingIntent.getBroadcast(getBaseContext(), RQS_1, intent, 0);
    AlarmManager alarmManager = (AlarmManager)getSystemService(Context.ALARM_SERVICE);
    Calendar timeOff = Calendar.getInstance();
    //int days = Calendar.SUNDAY + (7 - timeOff.get(Calendar.DAY_OF_WEEK)); // how many days until Sunday
    timeOff.set(Calendar.HOUR,Integer.valueOf(Time[0]));
    timeOff.set(Calendar.MINUTE,Integer.valueOf(Time[1]));
    timeOff.set(Calendar.SECOND, 00);
    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, timeOff.getTimeInMillis(), 24*60*60*1000 , pendingIntent);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:18:48.330

根据您的描述，我无法确定它不起作用的原因，但我的猜测是您没有获得 a `WakeLock`in`AlarmReceiver`的`onReceive()`方法。

前段时间我发布[了一个类似的问题，而我正在尝试实现类似的东西。](https://stackoverflow.com/questions/6864712/android-alarmmanager-not-waking-phone-up)查看接受的答案和来自 CommonsWare 的答案。我希望它们对解决您的问题很有用。

问候！

# java - 应用程序无法在 Android 2.3 上启动

> ID：16034587
> 
> 赞同：0
> 
> 时间：2013-04-16T10:22:54.873
> 
> 标签：java, android, logcat

我的应用程序不想在 Android 2.3 上启动，即使我的最低版本为 2.2，这里是 LogCat。我在模拟器和具有 2.3 Android 的设备上进行了测试，它根本不运行，但在我的其他 4.0 设备上它运行得很好......可能有什么问题？

```
04-16 13:18:40.982: D/dalvikvm(6191): GC_CONCURRENT freed 41K, 49% free 2761K/5379K, external 3443K/4300K, paused 3ms+42ms
04-16 13:18:41.652: D/dalvikvm(6191): GC_CONCURRENT freed 1K, 49% free 2761K/5379K, external 4643K/4643K, paused 2ms+10ms
04-16 13:18:41.942: D/AndroidRuntime(6191): Shutting down VM
04-16 13:18:41.942: W/dalvikvm(6191): threadid=1: thread exiting with uncaught exception (group=0x2aac8578)
04-16 13:18:41.952: E/AndroidRuntime(6191): FATAL EXCEPTION: main
04-16 13:18:41.952: E/AndroidRuntime(6191): java.lang.RuntimeException: Unable to resume activity {spec.sartheris.myapp/spec.sartheris.myapp.MainActivity}: java.lang.NullPointerException
04-16 13:18:41.952: E/AndroidRuntime(6191):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2141)
04-16 13:18:41.952: E/AndroidRuntime(6191):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2156)
04-16 13:18:41.952: E/AndroidRuntime(6191):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1680)
04-16 13:18:41.952: E/AndroidRuntime(6191):     at android.app.ActivityThread.access$1500(ActivityThread.java:121)
04-16 13:18:41.952: E/AndroidRuntime(6191):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
04-16 13:18:41.952: E/AndroidRuntime(6191):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-16 13:18:41.952: E/AndroidRuntime(6191):     at android.os.Looper.loop(Looper.java:130)
04-16 13:18:41.952: E/AndroidRuntime(6191):     at android.app.ActivityThread.main(ActivityThread.java:3701)
04-16 13:18:41.952: E/AndroidRuntime(6191):     at java.lang.reflect.Method.invokeNative(Native Method)
04-16 13:18:41.952: E/AndroidRuntime(6191):     at java.lang.reflect.Method.invoke(Method.java:507)
04-16 13:18:41.952: E/AndroidRuntime(6191):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
04-16 13:18:41.952: E/AndroidRuntime(6191):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
04-16 13:18:41.952: E/AndroidRuntime(6191):     at dalvik.system.NativeStart.main(Native Method)
04-16 13:18:41.952: E/AndroidRuntime(6191): Caused by: java.lang.NullPointerException
04-16 13:18:41.952: E/AndroidRuntime(6191):     at spec.sartheris.myapp.MainActivity.onResume(MainActivity.java:47)
04-16 13:18:41.952: E/AndroidRuntime(6191):     at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1150)
04-16 13:18:41.952: E/AndroidRuntime(6191):     at android.app.Activity.performResume(Activity.java:3832)
04-16 13:18:41.952: E/AndroidRuntime(6191):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2131)
04-16 13:18:41.952: E/AndroidRuntime(6191):     ... 12 more
04-16 13:18:42.002: D/dalvikvm(6191): GC_CONCURRENT freed 54K, 49% free 2775K/5379K, external 2543K/5243K, paused 2ms+13ms 
```

这是 MainActivity 中的代码

```
public class MainActivity extends Activity {
    MediaPlayer music;
    int length;
    ImageView img;
    AnimationDrawable animation;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    }

    @Override
    public void onWindowFocusChanged(boolean hasFocus) {
        super.onWindowFocusChanged(hasFocus);
        music = MediaPlayer.create(getApplicationContext(), R.raw.mymusic);
        music.setLooping(true);
        music.start();
        img = (ImageView) findViewById(R.id.imageView1);
        img.setBackgroundResource(R.drawable.myanim);
        animation = (AnimationDrawable) img.getDrawable();
        animation.start();
    }

    @Override
    protected void onPause() {
        super.onPause();
        music.pause();
        length = music.getCurrentPosition();
    }

    @Override
    protected void onResume() {
        super.onResume();
        music.seekTo(length);
        music.start();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        getMenuInflater().inflate(R.menu.options, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.about:
            Intent ia = new Intent("spec.sartheris.myapp.ABOUTUS");
            startActivity(ia);
            break;
        case R.id.exit:
            finish();
            break;
        }
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:31:10.157

`music`未初始化。在`onCreate()`运行`onResume()`后初始化它`onCreate()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:30:23.037

将此行移到`onCreate()`：

```
music = MediaPlayer.create(getApplicationContext(), R.raw.mymusic); 
```

或者您可以添加它`onCreate()`：

```
MediaPlayer music = new MediaPlayer(); 
```

然后以`onWindowFocusChanged()`这种方式添加您的音乐文件：

```
music.setDataSource("PathToFile"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:50:00.270

由于某种原因，.aac 文件没有在 Gingerbread 上播放，这就是错误发生的原因，将其替换为普通的 .mp3 文件，现在可以正常工作了，很奇怪......

# jquery - Windows Phone 8 / Cordova / jQuery .find()

> ID：16034588
> 
> 赞同：2
> 
> 时间：2013-04-16T10:22:56.337
> 
> 标签：jquery, cordova, windows-phone-8

有人在使用 jQuery.find() 时遇到过 Corodova 2.5.0 和 jQuery 1.8.x / 1.9.1 的问题吗？似乎 find() 返回空对象。

这是我的出发点：

html

```
...

<ul id="here">
</ul> 
```

javascript

```
 ..

$('#here').append('<li data-test="test1">first</li>');
$('#here').append('<li data-test="test2">second</li>');
$('#here').append('<li data-test="test3">third</li>');

var lis = $('#here').find('li');
console.log(lis);
$.each(lis, function (ind, rec) {
    console.log(rec);
}); 
```

控制台显示：

```
log: {}
log: {}
log: {} 
```

相同的代码在桌面浏览器中功能齐全 - 没有cordova :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T17:46:55.573

我认为 WP8 上的 IE10 无法打印“rec”对象的内容，即使实际上添加了“li”元素。我尝试使用带有 jQ​​uery（v1.7.1）的 Cordova（v2.4.0）windows phone 8 应用程序，它似乎可以使用以下代码

```
$.each(lis, function (ind, rec) {
    console.log(rec.innerHTML.toString());
}); 
```

输出如下：

```
ScriptNotify :: first
ScriptNotify :: second
ScriptNotify :: third 
```

做 outerHTML 代替打印：

```
ScriptNotify :: <li data-test="test1">first</li>
ScriptNotify :: <li data-test="test2">second</li>
ScriptNotify :: <li data-test="test3">third</li> 
```

来自 index.html 的完整代码：

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <title>Hello World</title>
    </head>
    <body>
        <div class="app">
            <h1>Apache Cordova</h1>
            <ul id="here">
            </ul>
        </div>
      <script type="text/javascript" src="lib/jquery-1.7.1.js"></script>
      <script type="text/javascript" src="cordova-2.4.0.js"></script>
      <script>
        window.console = {
        log: function (str) { window.external.Notify(str); }
        };

        $('#here').append('<li data-test="test1">first</li>');
        $('#here').append('<li data-test="test2">second</li>');
        $('#here').append('<li data-test="test3">third</li>');

        var lis = $('#here').find('li');
        console.log(lis.length.toString());
        $.each(lis, function (ind, rec) {
        console.log(rec.outerHTML.toString());
        });
      </script>
    </body>
</html> 
```

# sql - MS SQL 将日期转换为短日期

> ID：16034589
> 
> 赞同：1
> 
> 时间：2013-04-16T10:22:57.280
> 
> 标签：sql, datetime

我正在尝试从该`ExpiryDate`字段正好一个月后的表中获取所有记录。

然而，问题是它`ExpiryDate`与小时、分钟和秒一起存储。因此，我该怎么说 - 从我的表中获取所有记录，其中 ExpiryDate (dd/MM/yyyy) 比现在提前一个月 (dd/MM/yyyy)。

这是我目前拥有的：

```
SELECT *    FROM dbo.Custom_MembershipTransaction mt (nolock)
WHERE       mt.ExpiryDate = DATEADD(MONTH, 1, GETDATE())
AND         mt.IsComplete = 1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:27:35.037

尝试这个：

```
SELECT *    FROM dbo.Custom_MembershipTransaction mt (nolock)
WHERE       convert(varchar, mt.ExpiryDate, 102) = convert(varchar, DATEADD(MONTH, 1, GETDATE()),102)
AND         mt.IsComplete = 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:32:05.223

```
SELECT *    FROM dbo.Custom_MembershipTransaction mt (nolock)
WHERE       mt.ExpiryDate >= DATEADD(DAY, DATEDIFF(DAY, 0, DATEADD(MONTH, 1, GETDATE())), 0)
AND         mt.ExpiryDate < DATEADD(DAY, DATEDIFF(DAY, 0, DATEADD(MONTH, 1, GETDATE()) + 1), 0)
AND         mt.IsComplete = 1; 
```

我没有对 ExpiryDate 进行操作，因为它可能被索引使用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T10:29:19.070

你需要一些缓冲时间

```
SELECT *    FROM dbo.Custom_MembershipTransaction mt (nolock)
WHERE       mt.ExpiryDate < DATEADD(MONTH, 1, GETDATE())
AND         mt.ExpiryDate > DATEADD(DAY, -1, DATEADD(MONTH, 1, GETDATE()))
AND         mt.IsComplete = 1; 
```

这将为您提供所有在提前 1 个月到（1 个月 - 1 天）之间过期的记录。

# sql - 一列中所有字段的总和

> ID：16034590
> 
> 赞同：-1
> 
> 时间：2013-04-16T10:22:58.557
> 
> 标签：sql, sum

我试图计算一列中所有数字的总和。

列名是整数类型的“单位”。

这应该有效吗？

```
cmd3 = New OleDbCommand("SELECT SUM(Units) FROM tblJobs WHERE BookedOut = NULL AND HoldDate = NULL ", con)

lblLiveUnits.Text = cmd3.ExecuteNonQuery() 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:24:17.053

你的查询不正确，你不想做`=NULL`你应该使用的东西`IS NULL`：

```
SELECT SUM(Units)  As TotalUnits
FROM tblJobs 
WHERE BookedOut IS NULL 
  AND HoldDate IS NULL 
```

然后在您的代码中，您将使用[`ExecuteScalar`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)：

```
Int32 lblLiveUnits = 0;

cmd3 = New OleDbCommand("SELECT SUM(Units)  As TotalUnits FROM tblJobs WHERE BookedOut IS NULL AND HoldDate IS NULL ", con);

lblLiveUnits = cmd3.ExecuteScalar() 
```

# css - Magento 不加载我的 CSS

> ID：16034595
> 
> 赞同：2
> 
> 时间：2013-04-16T10:23:08.717
> 
> 标签：css, magento

我已经从 Magento 更改了我的 CSS 中的一些代码作为我的标题徽标，但 Magento 没有加载我的新 CSS 更新并且仍然显示旧的。

我已经刷新了 Magento 中的缓存

刷新 Magento 缓存

刷新缓存存储

刷新 Javascript/CSS 缓存

在系统 - 缓存管理

我有一个 var/cache 文件夹，在这里像 mage--0、mage--1 这样的文件夹我试图备份它们，这样当我删除它们时我可以恢复它并且不会出错但我无法备份它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-11T22:31:18.017

可能是浏览器正在缓存您的文件，而不是服务器。要检查，请尝试合并您的文件或取消合并您的文件并刷新页面。如果您看到更改，则确实是您的浏览器正在缓存文件。

在这种情况下，我们开发了一个方便的小扩展，可以自动刷新合并的 JS + CSS 静态文件。[http://extensions.activo.com/css-and-javascript-versioning.html](http://extensions.activo.com/css-and-javascript-versioning.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:46:36.693

您好，首先您可以随时安全地删除不需要备份的 var/cache 的内容。我知道这听起来可能很傻，但你清除浏览器缓存了吗？还要确保您更改了正确的 css 文件，使用 Firebug 查看您的更改是否没有被其他规则覆盖。项目链接和更多信息将很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-12T14:50:22.340

检查设计覆盖所在的**System -> Design也很重要。**最近我们遇到了一个问题，有人（我们不确定是谁，黑客？）添加了没有日期的覆盖，整个商店都坏了（我们有很多修改的非常复杂的包）。我们花了大约 30 分钟才弄清楚发生了什么事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T14:19:25.877

您可能正在使用不同的主题。检查系统配置设计部分您正在使用什么包和主题，然后检查皮肤中的该文件夹并进行更改。删除 var 缓存并显示更改。您不需要备份 var 缓存

# ios - 为什么 performSelector:withObject:afterDelay 在 Unity 中不能正常工作？

> ID：16034597
> 
> 赞同：1
> 
> 时间：2013-04-16T10:23:11.933
> 
> 标签：ios, objective-c, unity3d

在 Unity 4.0.0 默认设置中。我创建一个 UIView 并将其添加到统一窗口。

在我的代码中，我调用以下函数：

```
 [self performSelector:@selector(hideDelayed:) withObject:[NSNumber numberWithBool:animated] afterDelay:delay]; 
```

我想执行选择器 hidelayed: 几秒钟后。但有时 hidelayed: 无法执行。performSelector:withObject:afterDelay 在主线程中执行。并且没有其他地方执行 cancelPreviousPerformRequestsWithTarget。

有没有人可以给我一些提示？

# django - Django：图像上传到服务器

> ID：16034605
> 
> 赞同：0
> 
> 时间：2013-04-16T10:23:43.247
> 
> 标签：django, django-models

我想将图像上传到服务器。为此，我创建了一个表单，并在我的 views.py 文件中尝试将其提交到服务器中。在这里，它不会将文件上传到“图像”文件夹。而不是它只更新使用新图像名称归档的数据库。所以任何人都可以给我一个解决方案。

这是views.py 文件

```
@login_required
def edit_profile(request):

if request.POST:

        employee = Employee.objects.get(user=request.user)          
        employee.avatar=request.POST.get('image')
        employee.save()
        return HttpResponseRedirect('/view_profile/')       

user_profile = request.user.get_profile()
return render_to_response('edit_profile.html',{'profile':user_profile },context_instance=RequestContext(request)) 
```

这是我的html代码

```
 {% block content %}

<form action="." method="post">
{% csrf_token %}    

    <input type="file" name="image"/>
    <input type="submit" value="Save Changes" name="save" />        

</form>

{% endblock %} 
```

我应该更改什么以将图像上传到“图像”文件夹

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T10:25:56.933

您需要添加`enctype="multipart/form-data"`您的`form`元素，以便文件也被上传并`request.FILES`在视图中可用..

所以更新为

```
<form action="." method="post" enctype="multipart/form-data" >

 .... 
```

[将上传的文件绑定到表单中的](https://docs.djangoproject.com/en/dev/ref/forms/api/#binding-uploaded-files-to-a-form)更多信息

为了保存图像，它更易于使用`ModelForm`并适当地设置图像文件。但是您仍然想直接保存对象

```
...
employee.avatar = request.FILES['image']
employee.save() 
```

参考[文件上传](https://docs.djangoproject.com/en/dev/topics/http/file-uploads/)

# android - 获取第三方插件(Android)

> ID：16034609
> 
> 赞同：4
> 
> 时间：2013-04-16T10:23:48.110
> 
> 标签：android, android-emulator

我想在不同的 Android 模拟器上测试特定的 Android 应用程序。为了实现这一点，我参考了以下索尼设备附加组件的链接

[http://developer.sonymobile.com/knowledge-base/sdks/sony-add-on-sdk/install-the-sony-add-on-sdk/](http://developer.sonymobile.com/knowledge-base/sdks/sony-add-on-sdk/install-the-sony-add-on-sdk/)

所以我得到了索尼设备附加组件，如图所示

![在此处输入图像描述](https://i.stack.imgur.com/ey2MZ.png)

但现在我想关注设备附加组件：-

*   谷歌 Nexus P8110

*   LG 连结 4

*   宏达第一

*   HTC 机器人 DNA

*   HTC渴望C

*   LG 3D Max P720

*   LG 擎天柱 G

*   三星盖乐世 Note 2

*   三星Galaxy S3

如果有一些有用的链接可以实现这一点，请提供给我。提前致谢。

# in-app-purchase - 内容更新为应用内购买

> ID：16034617
> 
> 赞同：0
> 
> 时间：2013-04-16T10:24:11.860
> 
> 标签：in-app-purchase, app-store-connect

我应该使用哪种类型的应用内购买来让用户能够更新应用内容，而无需查看以前的内容状态（更新前）并且对苹果的应用内指南感到满意？

我的想法：

*   消耗品 - 不，因为我想要恢复功能（由 Apple 提供）

*   非消耗品 - 也许，但苹果声称“这种购买类型用于不会过期的服务”。更新后旧内容将过期。我不想积压过时的内容

*   某种可更新或不可更新的订阅——也许——但订阅模式不够清晰，我认为用户害怕订阅

编辑：好的，要清楚 - 内容是数据集。数据集是从时间 A 到时间 B 收集的一些数据。在更新中，我将提供从时间 B 到 C、下一个从 C 到 D 等收集的新数据集。

示例：现在我们有时间 E. 用户下载应用程序。应用程序已将数据集与时间 A 到 B 的数据捆绑在一起，因此它已过时。用户购买更新。现在应用程序中的数据集被时间 D 到 E 的数据替换并且它是最新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:30:14.130

您可以将其作为非消耗品或订阅提供。从技术上讲，旧数据不会过期，您只是提供了一个付费选项来升级到一组更好的数据（旧数据变得无关紧要）。

我想说您应该在产品描述中非常清楚地说明它是一个更好版本的替代品，这样用户就知道会发生什么。

如果您可以保证数据会在固定的时间段内定期更新，那么订阅可能是一个不错的选择。

您还应该考虑如何使新购买可用。使用已定义（并由 Apple 审核）的多个 IAP 发布应用程序，但这些 IAP 直到指定日期或您的服务器说它们可用时才会显示......

# jquery - Raphael js 点击、悬停和填充

> ID：16034621
> 
> 赞同：0
> 
> 时间：2013-04-16T10:24:16.350
> 
> 标签：jquery, hover, raphael, fill, mouseleave

我将 Raphael js 用于村庄计划，其中形状是计划中的小屋。当我悬停在小屋时，它们充满了色彩。当我点击一个小屋时，会出现一个小窗口来显示一些信息。当我从那个窗口离开光标时，它就消失了。除了形状的填充外，一切都像我需要的一样工作。当我离开文本窗口时，我也需要形状的填充消失。但它仍然存在。出于某种原因，它仅适用于我添加的最后一个小屋。当窗户已经隐藏时，其他小屋都充满了色彩。

这是我的代码：

```
var canvas = Raphael(canvas_setup.canvas_id, canvas_setup.canvas_width, canvas_setup.canvas_height),
    speed_anim_in = 400,
    speed_anim_out = 150,
    cottage_color_start = '#fff',
    cottage_color_end = '#fff',
    cottages_array = [];

for (var i = village_area.length - 1; i >= 0; i--) {
    canvas.setStart();
    var obj = village_area[i];
    canvas.image(obj.plan_image, 0, 0, canvas_setup.canvas_width, canvas_setup.canvas_height);

    for (var j = 0; j < obj.cottages.length; j++) {
        var obj_cottages = obj.cottages[j],
        my_path = canvas.path(obj_cottages.coords);
            my_path
                .attr({stroke: "none", fill: cottage_color_start, "fill-opacity": 0.8, opacity: 0, cursor: "pointer"})
                .data('type', obj_cottages.type)
                .data('start_color', cottage_color_start)
                .data('end_color', cottage_color_end)
                .data('clicked', false)
                .hover(
                    function(){
                        this.attr({fill: this.data('start_color'), opacity: 1}).animate({fill: this.data('end_color')}, speed_anim_in);
                    },
                    function(){
                        if(!this.data('clicked')) {
                            this.animate({fill: this.data('start_color'), opacity: 0}, speed_anim_out);
                        }
                    }
                )
                .click(function (e) {
                    this.attr({fill: this.data('start_color'), opacity: 1});
                    this.data('clicked', true);
                    $('.cottage_info').html(
                        '<div>Cottage ' + this.data('type') + '</div>'
                    ).show();
                    $('.cottage_info').css({'left': e.pageX-44 + 'px', 'top': e.pageY-150 + 'px'});
                    $('.cottage_info').mouseleave(function() {
                        $(this).hide();
                        my_path
                            .attr({stroke: "none", fill: cottage_color_start, "fill-opacity": 0.8, opacity: 0, cursor: "pointer"})
                            .data('clicked', false)
                        this.animate({fill: this.data('start_color'), opacity: 0}, speed_anim_out);
                    });
                    return false;
                });
    };
    cottages_array.push(canvas.setFinish()); 
```

有人可以帮助我吗？我不知道如何使它正常工作。如果我只有一间小屋，它可以完美地满足我的需要，但如果有不止一间，它会毁掉一切:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:10:02.033

好的，我的同事帮助了我，所以我在这里为某人有同样问题的案例编写解决方案。

我们甚至为 mouseleave 添加了 eve 并执行了必要的操作：

```
eve.on('raphael.event.mouseleave', function(){
    this.animate({opacity: 0}, speed_anim_out);
    this.data('clicked', false);
}); 
```

我们检查对象是否具有需要的属性，并在数组的循环中触发 raphael mouseleave 事件。

```
$('.cottage_info').mouseleave(function() {
    $(this).hide();
    for (var x = 0; x < cottages_array.length; x++) {
        if (cottages_array[x].data('clicked')) {
            eve( 'raphael.event.mouseleave', cottages_array[x] );
            break;
        };
    }
}); 
```

# javascript - 将鼠标事件附加到锚点：Javascript

> ID：16034625
> 
> 赞同：0
> 
> 时间：2013-04-16T10:24:23.460
> 
> 标签：javascript, mouseevent

我正在尝试将 onmouseover/out 事件附加到页面上的所有锚标记（想法是在 onmouseover 下添加它并在 onmouseout 上删除它）。

我做了以下代码。它将事件附加到所有锚点，但鼠标悬停在任何锚点上，它始终只为页面中的最后一个锚点添加下划线。

任何想法，可能是什么问题？

```
window.onload = function () {

    var elArray = document.getElementsByTagName("a");
    if (elArray != null && elArray.length > 0) {
        for (var count = 0; count < elArray.length; count++) {
            var el = elArray[count];
            if (el.addEventListener) {
                el.addEventListener("mouseover", function () {
                    el.style.textDecoration = 'underline'
                }, false);
                el.addEventListener("mouseout", function () {
                    el.style.textDecoration = 'none'
                }, false);
            } else {
                el.attachEvent('onmouseover', function () {
                    el.style.textDecoration = 'underline'
                });
                el.attachEvent('onmouseout', function () {
                    el.style.textDecoration = 'none'
                });
            }

        } //for
    } //if
}; //end of window.onload 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:27:27.793

这是由于范围问题；`el`不局限于循环的每次迭代`for`，它的范围是整个函数，所以一旦`for`循环完成执行，就会`el`引用最后一个元素。由于`el`事件处理函数内部是同一个变量，它们只会影响`<a>`页面上的最后一个元素。

然而，没有必要为此使用 JavaScript，同样的事情使用 CSS 已经有很长一段时间了。以下应该有效：

```
a {
    text-decoration: none;
}

a:hover {
    text-decoration: underline;
} 
```

如果您绝对想使用 JavaScript，那么您需要创建一个闭包来修改`el`使用立即调用的函数表达式的范围：

```
window.onload = function () {

    var elArray = document.getElementsByTagName("a");
    if (elArray != null && elArray.length > 0) {
        for (var count = 0; count < elArray.length; count++) {
            var el = elArray[count];
            (function(el) {
            // el in here is different to el outside since the parameter shadows it
            // you could give them different names - or not declare an el variable outside - to make the difference clearer
            if (el.addEventListener) {
                el.addEventListener("mouseover", function () {
                    el.style.textDecoration = 'underline'
                }, false);
                el.addEventListener("mouseout", function () {
                    el.style.textDecoration = 'none'
                }, false);
            } else {
                el.attachEvent('onmouseover', function () {
                    el.style.textDecoration = 'underline'
                });
                el.attachEvent('onmouseout', function () {
                    el.style.textDecoration = 'none'
                });
            }
            })(el);

        } //for
    } //if
}; //end of window.onload 
```

该匿名函数内部的更改范围，`el`因此它*确实*引用`el`了循环的每次迭代的值`for`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T10:30:12.363

您使用的变量`el`不是循环迭代的本地变量，因此在触发事件处理程序时它将具有最后一个值。

使用立即调用的函数来创建一个范围，其中每次迭代都会获得它自己的变量，其中包含该迭代的元素：

```
window.onload = function (){

  var elArray = document.getElementsByTagName("a");
  if(elArray != null && elArray.length > 0){
    for(var count=0; count < elArray.length; count++){

      (function(el){

        if (el.addEventListener) {
          el.addEventListener("mouseover", function (){el.style.textDecoration = 'underline'}, false);
          el.addEventListener("mouseout", function (){el.style.textDecoration = 'none'}, false);
        } else {
          el.attachEvent('onmouseover',function (){el.style.textDecoration = 'underline'});
          el.attachEvent('onmouseout',function (){el.style.textDecoration = 'none'});
        }

      })(elArray[count]);

    }//for
  }//if
};//end of window.onload 
```

但是，对于这种特定效果，您可以只使用 CSS：

```
a { text-decoration: none; }
a:hover { text-decoration: underline; } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T10:27:04.847

您可以通过使用简单的 CSS 来做到这一点：

```
a {
    text-decoration: none;
}

a:hover {
    text-decoration: underline;
} 
```

如果可以通过 CSS 完成，请不要使用 javascript 来麻烦浏览器。

# c# - 路由参数错误

> ID：16034626
> 
> 赞同：2
> 
> 时间：2013-04-16T10:24:26.360
> 
> 标签：c#, asp.net-mvc

错误发生在这里：

```
defaults: new { id = RouteParameter.Optional } 
```

我得到的错误：

> “z:\Ember.n.SignalR\bin\System.Web.Http.Common.dll”和“z:\Program Files (x86)\Microsoft ASP”中都存在“System.Web.Http.RouteParameter”类型。 NET\ASP.NET MVC 4\Assemblies\System.Web.Http.dll'

我的代码：

```
using System.Web.Http;
using System.Web.Mvc;
using System.Web.Optimization;
using System.Web.Routing;

namespace Ember.n.SignalR
{
    // Note: For instructions on enabling IIS6 or IIS7 classic mode, 
    // visit http://go.microsoft.com/?LinkId=9394801

    public class MvcApplication : System.Web.HttpApplication
    {
        public static void RegisterGlobalFilters(GlobalFilterCollection filters)
        {
            filters.Add(new HandleErrorAttribute());
        }

        public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}",
                defaults: new { id = RouteParameter.Optional }
                //defaults: new { id = System.Web.Http.RouteParameter.Optional }
            );

            routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{id}",
                defaults: new { controller = "Customer", action = "Index", id = UrlParameter.Optional }
            );
        }

        protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();

            RegisterGlobalFilters(GlobalFilters.Filters);
            RegisterRoutes(RouteTable.Routes);

            BundleTable.Bundles.RegisterTemplateBundles();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-03T08:50:13.077

去参考

-> 右键单击​​ System.Web.Http 并获取其属性 -> 分配 Aliases ，例如 Aliases: MyAlias

现在在你的代码中做这样的改变

```
extern alias MyAlias;
using MyAlias.System.Web.Http;
using System.Web.Mvc;
using System.Web.Optimization;
using System.Web.Routing; 
```

我希望这能解决你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:40:03.450

相同的组件出现在两个地方。asp.net-web api 的程序集存在于 GAC（全局程序集缓存）中，因为您已经安装了包含此程序集的 asp.net mvc-4（除了其他程序集）。您的 bin 目录中存在相同的 dll。您可以尝试从 bin 中删除 dll，并在需要时从您的项目中取消引用它。

# vb.net - 如何在 VB.Net 中使用 Adob e Indesign API

> ID：16034635
> 
> 赞同：4
> 
> 时间：2013-04-16T10:24:45.023
> 
> 标签：vb.net, add-in, adobe-indesign

我有一个用于 excel 的示例插件：我创建了一个对象 InDesign.Application

```
 Dim myInDesign As InDesign.Application
        Dim myDoc As InDesign.Document
        Dim myPage As InDesign.Page

        myInDesign = CType(Activator.CreateInstance(Type.GetTypeFromProgID("InDesign.Application"), True), InDesign.Application)
        myDoc = myInDesign.Documents.Add    
        myDoc = myInDesign.ActiveDocument 
```

InDesign 打开，但插件在以下位置显示错误：

```
`myInDesign = CType(Activator.CreateInstance(Type.GetTypeFromProgID("InDesign.Application"), True), InDesign.Application)` 
```

错误内容：

```
Unable to cast COM object of type 'System.__ComObject' to interface type 'InDesign.Application'. This operation failed because the QueryInterface call on the COM component for the interface with IID '{ABD4CBB2-0CFE-11D1-801D-0060B03C02E4}' failed due to the following error: No such interface supported (Exception from HRESULT: 0x80004002 (E_NOINTERFACE)). 
```

为什么？你能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-08T20:10:57.263

您是否使用 vb.net 的 com 接口添加了对 InDesign 类型库的引用？

在 Visual Studio 中打开引用面板并选择“COM”选项卡，然后`InDesign`在您的列表中查找。它将默认为`Copy Local = False`.

现在您可以像编写 vbs 一样使用 COM 函数了。

# performance - 使用 Oracle 聚合函数时的查询性能

> ID：16034636
> 
> 赞同：1
> 
> 时间：2013-04-16T10:24:50.400
> 
> 标签：performance, oracle, function, aggregate

下面是我使用聚合函数的查询。where 子句很简单，在 corpId 和 incoming_date 上有一个索引。如果我只是获取所有行/计数，则查询时间不到一秒。但是，当我使用聚合函数时，查询大约需要 4 分钟。我正在使用 oracle 11i，where 子句检索的总行数约为 64000。最近还收集了表和索引统计信息，表中没有添加新行。

请建议提高速度。

```
SELECT
sum(paid_amt) totalamount
FROM test_table e
WHERE  e.corpId =6
AND e. incoming_date >= to_date('01-12-2012','dd-mm-yyyy')
AND e. incoming _date <= to_date('09-01-2013','dd-mm-yyyy') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:30:07.717

纳入`paid_amt`索引：

```
CREATE INDEX
        ix_testtable_cord_date_paid
ON      test_table (corpId, incoming_date, paid_amt) 
```

如果您有一个索引`(corpId, incoming_date)`并尝试像这样测试速度：

```
SELECT  COUNT(*)
FROM    test_table
WHERE   e.corpId = 6
        AND e.incoming_date >= to_date('01-12-2012','dd-mm-yyyy')
        AND e.incoming_date <= to_date('09-01-2013','dd-mm-yyyy') 
```

您不查询索引之外的任何内容，因此可以单独满足查询`INDEX (RANGE SCAN)`。

一旦您添加任何不在索引中的内容（`paid_amt`在您的情况下），查询就需要使用附加`TABLE ACCESS (BY INDEX ROWID)`功能从表中检索记录。

它是嵌套循环中的随机查找，速度很慢，特别是如果您的表记录很大（有很多字段或长字段）。

优化器甚至可能认为这种访问方法的效率低于`FULL SCAN`并改用后者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:22:50.883

我像这样重新创建了这个场景......

```
CREATE TABLE test_table 
  ( id integer
  , corpId integer
  , paid_amt number(10,2)
  , incoming_date DATE );

ALTER TABLE test_table
add CONSTRAINT test_table_pk PRIMARY KEY (id);

create index test_table_nui_1 on test_table(corpId);

create index test_table_nui_2 on test_table(incoming_date);

create sequence test_table_seq;

insert into test_table
  select test_table_seq.nextval
       ,MOD(test_table_seq.currval,6)
       ,MOD(test_table_seq.currval,10) + 1
       ,sysdate - MOD(test_table_seq.currval,200) 
  from all_objects, user_objects; 
```

all_objects 和 user_objects 之间的笛卡尔连接只是一种快速插入大量记录的技巧。（在这种情况下为 657,000 行）

首先通过选择所有 657,000...

```
select sum(paid_amt)
from test_table; 
```

计划 SELECT STATEMENT ALL_ROWSCost：621 字节：13 基数：1
2 SORT AGGREGATE 字节：13 基数：1
1 TABLE ACCESS FULL TABLE DAVE.TEST_TABLE 成本：621 字节：9,923,914 基数：763,378

然后一个corpId 109,650 ...

```
select sum(paid_amt)
from test_table
where corpId = 5; 
```

计划 SELECT STATEMENT ALL_ROWSCost：265 字节：26 基数：1
3 SORT AGGREGATE 字节：26 基数：1
2 TABLE ACCESS BY INDEX ROWID TABLE DAVE.TEST_TABLE 成本：265 字节：3,310,138 基数：127,313
1 INDEX RANGE SCAN INDEX_NEX DAVE.TABLE 213 基数：3,054

最后是按日期限制的 20,836 行...

```
SELECT sum(paid_amt) totalamount
FROM test_table e
WHERE  e.corpId = 5
AND e. incoming_date >= to_date('01-12-2012','dd-mm-yyyy')
AND e. incoming_date <= to_date('09-01-2013','dd-mm-yyyy') 
```

计划 SELECT STATEMENT ALL_ROWSCost: 265 Bytes: 35 Cardinality: 1
3 SORT AGGREGATE Bytes: 35 Cardinality: 1
2 TABLE ACCESS BY INDEX ROWID TABLE DAVE.TEST_TABLE Cost: 265 Bytes: 871,360 Cardinality: 24,896
1 INDEX RANGE SCAN INDEX DAVE.TEST_TABLE 213 基数：3,054

所有 3 个查询都很快速（即 < 0.5 秒）

另一种方法是删除 nui_1 和 nui_2 并在两列上创建组合索引。然后在我的数据库上运行了 31 毫秒

```
create index test_table_nui_3 on test_table(corpId, incoming_date); 
```

Plan SELECT STATEMENT ALL_ROWSCost: 15 Bytes: 35 Cardinality: 1
3 SORT AGGREGATE Bytes: 35 Cardinality: 1
2 TABLE ACCESS BY INDEX ROWID TABLE DAVE.TEST_TABLE 成本: 15 Bytes: 871,360 Cardinality: 24,896
1 INDEX RANGE SCAN INDEX_3 Cost: DAVE.TEST_TABLE_N 3 基数：14

这表明聚合函数不是问题，但您的索引可能是问题。最好的办法是检查你的解释计划。

# android - 当仅存在单个项目时如何在列表视图中显示分隔符

> ID：16034639
> 
> 赞同：0
> 
> 时间：2013-04-16T10:25:00.913
> 
> 标签：android, android-listview

我有一个列表视图，但它只显示两个项目之间的分隔符，我有一种情况，当只有单个项目存在或只有少数项目没有填满整个页面时，我必须显示分隔符，在这种情况下没有分隔符出现最后一项看起来很奇怪。Footerview 不禁为 deviders 图像从电话到电话是独立的。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:35:03.667

您可以像这样在 ListView 之后添加视图：

```
<Listview....../>
 <View
        android:id="@+id/invisible"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_alignParentBottom="true" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:37:17.437

`ListView`在使用结束时添加透明页脚如何`addFooterView(someTransparentView, null, true);`确保您已`android:footerDividersEnabled`设置为 true。这样android将在页脚之前绘制分隔线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:45:25.083

您可以尝试[setFooterDividersEnabled(true)](http://developer.android.com/reference/android/widget/ListView.html#setFooterDividersEnabled%28boolean%29)在列表中没有页脚视图吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T10:39:03.200

你可以为整个 ListView 设置一个边框，让它看起来不那么奇怪。下面是一个例子来解释这一点：

```
 <ListView
    android:id="@+id/profile_list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentTop="true"
    android:scrollbars="none"
    android:cacheColorHint="#00000000"
    android:divider="#C0C0C0"
    android:dividerHeight="1dp"
    android:background="@drawable/custombox"
  ></ListView> 
```

我们将 ListView 背景设置为放置在 drawable/ 文件夹中的自定义 xml。在上述情况下 custombox.xml

```
 <?xml version="1.0" encoding="utf-8"?>
  <selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item>
    <shape android:shape="rectangle">
      <gradient android:startColor="#FFFFFF"
        android:centerColor="#FFFFFF" android:endColor="#FFFFFF"
        android:angle="270" android:centerX="0.5" android:centerY="0.5" />
      <stroke android:width="1dp" android:color="#C0C0C0" />
      <corners android:radius="0dp" />
      <padding android:left="3dp" android:top="3dp" android:right="3dp"
        android:bottom="3dp" />
    </shape>
  </item>
  </selector> 
```

这里我们设置了整个ListView的形状，描边是边框，宽度设置为1dp，颜色#C0C0C0。

# ckeditor - CKeditor 4x 用户指南

> ID：16034640
> 
> 赞同：-2
> 
> 时间：2013-04-16T10:25:11.627
> 
> 标签：ckeditor

我知道这不是要求这个的正确网站，但我在 StackExchange 网络中找不到合适的网站。

所以我的问题很简单。我在哪里可以找到详细解释 CKEditor 的所有按钮（在工具栏上）的指南？（我正在为一个网站写一个文档，我想找一个指南来参考）

我整天都在努力寻找一些东西，但没有运气。如果有人可以分享链接，请...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:51:37.313

> [...] CKEditor 的所有按钮（在工具栏上）？

CKEditor 有很多插件和自定义版本，所以没有像“所有按钮”这样的东西。您可以浏览[官方插件仓库](http://ckeditor.com/addons/plugins/all)以获取每个插件的简要说明。

官方[文档网站](http://docs.cksource.com/Main_Page)也可以帮助您。

# python - Django模型多态，使用代理继承

> ID：16034642
> 
> 赞同：1
> 
> 时间：2013-04-16T10:25:16.277
> 
> 标签：python, django, django-models, polymorphism, proxy-classes

这听起来像是重复的，但我不这么认为。

我需要做一些类似于提问者在那里所做的事情：[django model polymorphism with proxy inheritance](https://stackoverflow.com/questions/7526088/django-model-polymorphism-with-proxy-inheritance)

我的父母需要实现一组方法，我们称它们为 MethodA()、MethodB()。这些方法永远不会直接使用，它们总是会通过子模型调用（但不，由于各种原因，抽象类不是要走的路）。

但这是变得更棘手的地方：

每个子模型都继承自一个特定的模块（moduleA、moduleB），它们都实现了相同的方法名称，但做的事情不同。调用是通过父模型进行的，并根据字段的值重定向到子模型

由于我猜不是很清楚，这里有一些伪代码可以帮助您理解

```
from ModuleA import CustomClassA
from ModuleB import CustomClassB

class ParentModel(models.Model):

TYPE_CHOICES = (
  ('ChildModelA', 'A'),
  ('ChildModelB', 'B'),
)

    #some fields
    type = models.CharField(max_length=1, choices=TYPE_CHOICES)
    def __init__(self, *args, **kwargs):
        super(ParentModel, self).__init__(*args, **kwargs)
        if self.type:
          self.__class__ = getattr(sys.modules[__name__], self.type)

    def MethodA():
      some_method()

    def MethodB():
      some_other_method()

class ChildModelA(ParentModel, CustomClassA):
    class Meta:
      proxy = True

class ChildModelB(ParentModel, CustomClassB):
    class Meta:
      proxy = True 
```

在模块 A 中：

```
class CustomClassA():
    def some_method():
      #stuff

    def some_other_method():
      #other stuff 
```

在模块 B 中：

```
class CustomClassB():
    def some_method():
      #stuff

    def some_other_method():
      #other stuff 
```

现在，问题是类更改有效，但它没有从 ChildModelA 或 B 继承。

这甚至可能吗？如果是，我怎样才能让它工作，如果不是，我怎么能优雅地做到这一点，没有太多重复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-04-22T10:30:11.977

代理模型必须恰好继承自一个非抽象模型类。似乎两者`CustomClass`都是`ParentModel`非抽象的。我建议`CustomClass`抽象，因为没有定义属性。这在此处详细解释：[https ://docs.djangoproject.com/en/3.2/topics/db/models/#proxy-models](https://docs.djangoproject.com/en/3.2/topics/db/models/#proxy-models)

# linux - Linux - 设置 root 密码导致“奇怪”行为我想恢复正常

> ID：16034643
> 
> 赞同：-1
> 
> 时间：2013-04-16T10:25:20.660
> 
> 标签：linux

我对 Linux 比较陌生。我正在运行 CrounchBang，一个 Debian 发行版作为我的个人工作站。它不是服务器。这是我的问题：

我想通过键入为自己（用户）更改密码： sudo passwd 然后它提示我输入用户名，我想我必须输入 root 才能获得更改用户密码的权利。我错了。无论如何，我更改了root的密码。

我没有放松或忘记它，所以我仍然可以做我想做的一切......或者我认为......但现在我注意到“奇怪”的行为。

例如，我不能像以前那样关闭电源唱 Super-X -> 关闭电源。它只是说它正在关闭，但什么也没做。我必须使用终端：poweroff，然后提示输入root密码，然后才关闭。

另一个例子是在终端中输入“登录”。它的响应是：登录：没有有效的根就无法工作

作为 linux 的新手，在我设置 root 密码之前，我很难准确地记住它的行为方式，但现在有些事情肯定是“奇怪的”。

任何人都可以向我解释这一点或指出解决方案吗？如果可能没有变通办法（比如将自己添加到 sudoers），我想让它恢复正常（默认）行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:36:09.500

我不知道解锁 root 可能会导致您遇到任何问题（事实上，我已经这样做了很多次，没有任何不愉快的后果），但是您始终可以通过发出以下命令来恢复更改：`sudo passwd -dl root`

# c++ - 调用复制构造函数和普通构造函数的成本

> ID：16034645
> 
> 赞同：-2
> 
> 时间：2013-04-16T10:25:24.703
> 
> 标签：c++, design-patterns

在原型设计模式中，抽象基类的克隆方法实现如下

```
/* From Wikipedia */
class Prototype
{
public:
    virtual ~Prototype() { }

    virtual Prototype* clone() const = 0;
};

class ConcretePrototype : public Prototype
{
  ...
  virtual ConcretePrototype* clone() const 
  { 
      return new ConcretePrototype(*this); 
  } 
}; 
```

客户端创建一个对象，然后调用 clone() 方法创建该对象的副本

new ConcretePrototype(*this) 是否比 new ConcretePrototype( ) 便宜？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:33:31.417

你误解了`clone()`.

它是一个“虚拟复制构造函数”。

构造函数实际上不能是虚拟的（甚至不是复制构造函数）。因此，解决方案是有一个方法，您可以调用您已经必须制作精确副本的对象。

克隆副本有自己的生命周期，因此可以安全地销毁原始副本。

通常，您希望实现类具有私有或受保护的复制构造函数，因此您不能直接调用它。

您甚至不必知道要克隆的对象的类型。并注意“协变”返回类型。

我不知道你说的“便宜”到底是什么意思。如果您为您的类实现一个复制构造函数，它通常应该至少与创建类的空实例然后复制到其中一样有效，并且通常更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:27:25.143

你应该`copy c-tor`在这个模式中使用，因为它是模式的意义。但在其他情况下 - 一切都取决于`default`构造函数和`copy-constructor`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:34:34.803

如果我理解正确你的问题是，给定代码：

```
ConcretePrototype original;
{some code}
ConcretePrototype copy1;
copy1 = *orignal.clone();
ConcretePrototype copy2(original); 
```

是创造`copy1`比`copy2`. 这是我可以看到您可以在一个代码示例中比较和使用克隆的唯一`default c-tor`方法`copy c-tor`。

很可能是的。多少钱？很难说。默认构造函数可能以创建浅拷贝的方式实现，因此开销很小。

# c# - 使用 Microsoft.Office.Interop.Word 和 COM 异常访问被拒绝

> ID：16034652
> 
> 赞同：0
> 
> 时间：2013-04-16T10:25:49.170
> 
> 标签：c#, ms-word, office-interop

我正在`Microsoft.Office.Interop.Word`使用 c# 从 MS-word (doc/docx) 文件中读取文本。当我在管理员帐户下运行我的应用程序时，不会发生任何问题，但是当我在没有管理员权限的用户下运行时，会发生以下错误。我在 Windows 2008 64 位上运行我的应用程序。

> System.UnauthorizedAccessException：由于以下错误，检索具有 CLSID {000209FF-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败：80070005 访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）。

因此，请指导我需要向用户授予什么样的权限，因为当我将通过 c# 以编程方式读取 doc/docx 文件时，不应发生 com 异常。请详细讨论我需要遵循哪些步骤。谢谢。

# jsf-2 - Session Expired 和 ViewExpiredException 之间的区别

> ID：16034655
> 
> 赞同：2
> 
> 时间：2013-04-16T10:26:04.443
> 
> 标签：jsf-2, session-timeout, viewexpiredexception

对于这两个“巨大”问题，我遇到了许多解决方案

*   会话已过期
*   查看过期异常

**我的问题：**它们之间有什么区别？

我正在使用 WAS，我观察到

*   在控制台中重启 EAR 不会导致会话过期
*   如果当前有 ajax 请求并且 EAR 重新启动，它会抛出 ViewExpiredException 但不会注销用户
*   如果页面空闲 30 分钟，则会出现登录屏幕（我使用了 sessiontimeoutfilter 来处理这个问题）

那么 ViewExpiredException 和 Session Expiry 不一样吗？另外为什么不重新启动 EAR 会导致会话过期？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:07:15.810

设置`javax.faces.STATE_SAVING_METHOD`为`client`将解决问题。也使用 ExceptionHandler 和 NoCacheFilter 将解决问题

我更喜欢后者，因为它更易于维护。

**看**

*   [javax.faces.application.ViewExpiredException：无法恢复视图](https://stackoverflow.com/questions/3642919/javax-faces-application-viewexpiredexception-view-could-not-be-restored)
*   [检查会话是否存在 JSF](https://stackoverflow.com/questions/8144195/check-if-session-exists-jsf)

# php - 链接到一起选择列表框 PHP HTML 网站工作

> ID：16034668
> 
> 赞同：0
> 
> 时间：2013-04-16T10:26:24.177
> 
> 标签：php, html, web

我需要用临时购物车建立一个网站...我有一个显示产品名称的选择框和一个我想显示产品价格的框（他的所有信息都存储在 myPHP 上）

有没有办法将两个盒子链接/连接在一起，所以当用户选择产品时，另一个盒子会填充价格？目前我所能得到的只是选择框中的所有信息......这是我的树。

![目前的布局（我知道它说的是数量而不是价格......它正在测试中）](https://i.stack.imgur.com/Z8lf8.png)

如您所见，价格在下拉框中，但我希望它填充在下面的框中。

任何帮助，将不胜感激。

我现在使用的代码是......

```
$sql="SELECT * FROM tblproducts";
$result=mysql_query($sql);
$rows=mysql_fetch_array($result);

echo "<select name='product'>";
while ($row = mysql_fetch_array($result)) {
echo "<option value='" . $row['productName'] . "'>" . $row['productName'] . " £" .         $row['productPrice'] ."</option>";
}
echo "</select>"; 
```

我知道我已经用下拉框选择了所有内容......并且没有任何内容指向空文本框..这是因为我不确定如何链接/指向它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:31:18.657

这可以通过`ajax`调用来完成：

`onchange`在第一次下拉事件中调用函数或文件。将第一个下拉列表的选定值传递给该函数或文件

然后在该函数或文件中根据该值选择选项，并在成功后在第二个下拉列表中填充这些选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:29:51.370

您可以通过将价格加载到`javascript`. 将`onchange`事件用于第一个块并填充另一个块的价格。

# python - numpy 的就地操作（例如`+=`）如何工作？

> ID：16034672
> 
> 赞同：19
> 
> 时间：2013-04-16T10:26:28.463
> 
> 标签：python, numpy

基本问题是：在执行以下操作时，幕后会发生什么：`a[i] += b`？

鉴于以下情况：

```
import numpy as np
a = np.arange(4)
i = a > 0
i
= array([False,  True,  True,  True], dtype=bool) 
```

我明白那个：

*   `a[i] = x`与 相同`a.__setitem__(i, x)`，它直接分配给由`i`
*   `a += x`与 相同`a.__iadd__(x)`，它在原地进行加法

*但是当我这样做时会发生什么*：

```
a[i] += x 
```

具体来说：

1.  这和 一样`a[i] = a[i] + x`吗？（这不是就地操作）
2.  如果是，在这种情况下是否会有所不同`i`：
    *   `int`索引，或
    *   一个`ndarray`，或
    *   一个`slice`对象

* * *

*背景*

我开始研究这个的原因是我在使用重复索引时遇到了一种不直观的行为：

```
a = np.zeros(4)
x = np.arange(4)
indices = np.zeros(4,dtype=np.int)  # duplicate indices
a[indices] += x
a
= array([ 3.,  0.,  0.,  0.]) 
```

[这个问题](https://stackoverflow.com/questions/15973827/handling-of-duplicate-indices-in-numpy-assignments/16033516#16033516)中关于重复索引的更有趣的东西。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-16T10:59:41.287

您需要意识到的第一件事是它`a += x`并不完全映射到`a.__iadd__(x)`，而是映射到`a = a.__iadd__(x)`。请注意，[文档](http://docs.python.org/3.3/reference/datamodel.html#object.__iadd__)明确指出就地运算符返回其结果，这不一定是`self`（尽管在实践中，它通常是）。这意味着`a[i] += x`微不足道地映射到：

```
a.__setitem__(i, a.__getitem__(i).__iadd__(x)) 
```

因此，从*技术上讲*，添加发生在原地，但仅在临时对象上。但是，与调用 相比，创建的临时对象仍然可能少一个`__add__`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T10:53:16.983

实际上这与numpy无关。python 中没有“就地设置/获取项目”，这些东西相当于`a[indices] = a[indices] + x`. 知道了这一点，很明显发生了什么。（编辑：正如 lvc 所写，实际上右手边已经到位，所以`a[indices] = (a[indices] += x)`如果这是合法的语法，虽然它具有大致相同的效果）

当然`a += x`实际上是就地的，通过将 a 映射到`np.add` `out`参数。

之前已经讨论过，numpy 对此无能为力。虽然有一个想法`np.add.at(array, index_expression, x)`至少允许这样的操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-04T23:55:31.733

我不知道幕后发生了什么，但是对 NumPy 数组和 Python 列表中的项目的就地操作将返回相同的引用，当传递给函数时，IMO 可能会导致令人困惑的结果。

# 从 Python 开始

```
>>> a = [1, 2, 3]
>>> b = a
>>> a is b
True
>>> id(a[2])
12345
>>> id(b[2])
12345 
```

*... where是值在内存中`12345`的唯一位置，与.`id``a[2]``b[2]`*

所以`a`并`b`参考内存中的相同列表。现在尝试对列表中的项目进行就地添加。

```
>>> a[2] += 4
>>> a
[1, 2, 7]
>>> b
[1, 2, 7]
>>> a is b
True
>>> id(a[2])
67890
>>> id(b[2])
67890 
```

因此，在列表中就地添加项目只会更改 index 处项目的值，`2`但仍然引用相同的列表，尽管列表中的第 3 项被重新分配给新值，。重新分配解释了为什么如果和是整数（或浮点数）而不是列表，那么会导致重新分配，然后和会是不同的引用。但是，如果调用列表添加，*例如*：for和引用同一个列表，它不会**重新**分配；它们都将被附加。`a``b``7``a = 4``b = a``a += 1``a``b``a`*`a += [5]``a``b`**`a`***

 ***# 现在为 NumPy

```
>>> import numpy as np
>>> a = np.array([1, 2, 3], float)
>>> b = a
>>> a is b
True 
```

同样，这些是相同的引用，并且就地运算符似乎与 Python 中的 list 具有相同的效果：

```
>>> a += 4
>>> a
array([ 5.,  6.,  7.])
>>> b
array([ 5.,  6.,  7.]) 
```

在地方添加`ndarray`更新参考。这与`numpy.add`在新引用中创建副本的调用不同。

```
>>> a = a + 4
>>> a
array([  9.,  10.,  11.])
>>> b
array([ 5.,  6.,  7.]) 
```

# 借用引用的就地操作

我认为这里的危险是如果引用被传递到不同的范围。

```
>>> def f(x):
...     x += 4
...     return x 
```

参数引用`x`被传递到`f`不复制的范围内，实际上更改了该引用的值并将其传回。

```
>>> f(a)
array([ 13.,  14.,  15.])
>>> f(a)
array([ 17.,  18.,  19.])
>>> f(a)
array([ 21.,  22.,  23.])
>>> f(a)
array([ 25.,  26.,  27.]) 
```

对于 Python 列表也是如此：

```
>>> def f(x, y):
...     x += [y]

>>> a = [1, 2, 3]
>>> b = a
>>> f(a, 5)
>>> a
[1, 2, 3, 5]
>>> b
[1, 2, 3, 5] 
```

IMO 这可能会令人困惑，有时难以调试，因此我尝试仅对属于当前范围的引用使用就地运算符，并尝试小心借用引用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-16T11:10:51.843

正如 Ivc 解释的那样，没有就地项目添加方法，所以在它的底层使用`__getitem__`, then `__iadd__`, then `__setitem__`。这是一种凭经验观察这种行为的方法：

```
import numpy

class A(numpy.ndarray):
    def __getitem__(self, *args, **kwargs):
        print("getitem")
        return numpy.ndarray.__getitem__(self, *args, **kwargs)
    def __setitem__(self, *args, **kwargs):
        print("setitem")
        return numpy.ndarray.__setitem__(self, *args, **kwargs)
    def __iadd__(self, *args, **kwargs):
        print("iadd")
        return numpy.ndarray.__iadd__(self, *args, **kwargs)

a = A([1,2,3])
print("about to increment a[0]")
a[0] += 1 
```

它打印

```
about to increment a[0]
getitem
iadd
setitem 
```***

# datetime - SAS 中无法在 Excel 2007 中导出的日期时间格式

> ID：16034673
> 
> 赞同：0
> 
> 时间：2013-04-16T10:26:28.360
> 
> 标签：datetime, sas

早上好，

SAS 中的一个程序即将在许多表中以字母数字值（例如：14-Jan-2013 07:00:00.479）选择/合并/排序日期/时间并创建一个表。该程序使用指令“format E8601”和“format type $10.; informat type $10.;”之后的几行，将日期转换为数值（例如：2013-01-14T07:02:03.647）。当此表在 Excel 2007 中导出时，该值变为“ ”，并且不能以传统的日期/时间格式进行修改。

怎么做 ？是否有任何其他格式（而不是 E8601）可用于将日期保存为文本或字母数字值？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:49:36.797

SAS 日期时间值在内部表示为等于自 1960 年 1 月 1 日以来的秒数的浮点值。 `FORMATS`用于控制这些数值如何在外部表示。例如，考虑一下：

```
data have;
  myDateTime1 = '14-Jan-2013 07:00:00.479'dt;
  myDateTime2 = '14-Jan-2013 07:00:00.479'dt;
  myDateTime3 = '14-Jan-2013 07:00:00.479'dt;

  format myDateTime2 datetime23.3
         myDateTime3 E8601DT23.3;

  put myDateTime1= 'as a number'
    / myDateTime2= 'as a normal SAS datetime'
    / myDateTime3= 'as an ISO 8601 datetime'
   ;
run; 
```

运行时，这会显示在 SAS 日志中：

```
myDateTime1=1673766000.5 as a number
myDateTime2=14JAN2013:07:00:00.479 as a normal SAS datetime
myDateTime3=2013-01-14T07:00:00.479 as an ISO 8601 datetime 
```

请注意，这三个`myDateTime`变量具有相同的值，但根据`format`指定的值显示不同。

假设您已获得 SAS Access to PC File Formats 许可，您可以使用它`PROC EXPORT`来创建 Excel 工作簿：

```
proc export data=have
     outfile='c:\temp\test_dates.xlsx'
     replace;
run; 
```

Excel 工作簿中格式化为“日期时间”值的两个变量的数据值将正确显示为 Excel 列。但是，Excel 中的默认格式仅显示“日期”部分；要在 Excel 中显示完整值，您需要更改 Excel 列格式。

# ios - 在 NSMutableArray 的末尾插入元素

> ID：16034674
> 
> 赞同：0
> 
> 时间：2013-04-16T10:26:31.547
> 
> 标签：ios, objective-c, xcode, nsmutablearray, uipickerview

我正在从 Web 服务加载一个数组并在选择器中显示它们，一切正常。我的数组包含每个问题类别的随机问题。现在我想要的是我想在数组末尾再添加一个条目“您自己的问题”，以便选择器的最后一行显示“您自己的问题”。我怎样才能做到这一点

```
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view {
    UILabel *retval = (id)view;
    if (!retval) {
        retval= [[UILabel alloc] initWithFrame:CGRectMake(0.0f, 0.0f, [pickerView rowSizeForComponent:component].width, [pickerView rowSizeForComponent:component].height)];
    }

   // retval.text = [idAndNameArray objectAtIndex:row];
    if([pickerType isEqualToString:@"picker"])
    {
        retval.text = [idAndNameArray objectAtIndex:row];
    }
    else
    {
        retval.text = [quesArray objectAtIndex:row];
    }
    retval.font = [UIFont boldSystemFontOfSize:14];
    retval.numberOfLines = 3;
    return retval;
} 
```

此代码仅显示从 Web 服务获取的行数（问题）。

**编辑1：**

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)thePickerView
{

    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)thePickerView numberOfRowsInComponent:(NSInteger)component
{
    if([pickerType isEqualToString:@"picker"])
    {
        return [idAndNameArray count];
    }
    else
    {
       return [quesArray count];
    }

} 
```

**编辑2：**

通过使用我的自定义对象“您自己的问题”创建另一个 NSMutableArray 并使用从 Web 服务获取的数组附加它来解决

```
NSMutableArray *customObj = [NSMutableArray arrayWithObject: @"test"];
 [quesArray addObjectsFromArray:customObj]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:36:45.520

在`UIPickerViewDataSource`称为`pickerView:numberOfRowsInComponent:`返回数组计数加一个值（`return arr.count+1;`）的方法中，在您实现的方法中，当大于（ ）`UIPickerVIewDelegate`时，返回带有文本的标签。祝你好运！`component``arr.count-1``if(row>(arr-1)){//return the label with 'Your own question'}`

**编辑：**

```
- (NSInteger)pickerView:(UIPickerView *)thePickerView numberOfRowsInComponent:(NSInteger)component
{
    if([pickerType isEqualToString:@"picker"])
    {
        return [idAndNameArray count];
    }
    else
    {
       return [quesArray count]+1;
    }

}
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view {
    UILabel *retval = (id)view;
    if (!retval) {
        retval= [[UILabel alloc] initWithFrame:CGRectMake(0.0f, 0.0f, [pickerView rowSizeForComponent:component].width, [pickerView rowSizeForComponent:component].height)];
    }

   // retval.text = [idAndNameArray objectAtIndex:row];
    if([pickerType isEqualToString:@"picker"])
    {
        retval.text = [idAndNameArray objectAtIndex:row];
    }
    else
    {
       if(row>quesArray.count-1){
         retval.text = @"You own question";
       }
       else{
            retval.text = [quesArray objectAtIndex:row];
         }
        }
        retval.font = [UIFont boldSystemFontOfSize:14];
        retval.numberOfLines = 3;
        return retval;
    } 
```

# c# - 如何通过 C# 在 Visio 2010 中添加容器？

> ID：16034679
> 
> 赞同：1
> 
> 时间：2013-04-16T10:26:46.427
> 
> 标签：c#, .net, visio

我有一个简单的代码来绘制形状。

```
Visio.Shape dropShape = ActivePage.Drop(GetMaster(@"Circle"), x, y);
Visio.Shape dropShape2 = ActivePage.Drop(GetMaster(@"Circle"), x + 3, y); 
```

我想为这些形状添加容器

```
VisApp.ActiveWindow.Select(dropShape, (short)Visio.VisSelectArgs.visSelect);
VisApp.ActiveWindow.Select(dropShape2, (short)Visio.VisSelectArgs.visSelect);

object vsoSelection = VisApp.ActiveWindow.Selection;
Visio.Shape containerMaster = ActivePage.Drop(GetMaster(@"Square"), x -3, y-3);
Visio.Shape container = ActivePage.DropContainer(containerMaster, vsoSelection); 
```

我在 Internet 上找到了这个示例，但它不起作用。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T06:02:45.687

您的代码中的问题是您不能在 DropContainer() 调用中使用任何随机 Master 作为容器。

相反，您必须加载一个包含容器的模板，然后在该模板中选择一个容器母版。

完整的代码如下：

```
var app = new IVisio.ApplicationClass();

var docs = app.Documents;
var doc = docs.Add("");
var page = app.ActivePage;
short flags = (short)
    ( IVisio.VisOpenSaveArgs.visOpenDocked | 
    IVisio.VisOpenSaveArgs.visOpenRO);

var basic_stencil = docs.OpenEx("basic_u.vss", flags);
var basic_masters = basic_stencil.Masters;
var rounded_rect_master = basic_masters["Rounded Rectangle"];

double x = 2.0;
double y = 3.0;

var shape1 = page.Drop(rounded_rect_master, x, y);
var shape2 = page.Drop(rounded_rect_master, x + 3.0, y+1.0);

var stenciltype = IVisio.VisBuiltInStencilTypes.visBuiltInStencilContainers;

var measurementsys = IVisio.VisMeasurementSystem.visMSDefault;
short containeropenflags = (short) IVisio.VisOpenSaveArgs.visOpenHidden;
string containerstencil_filename = app.GetBuiltInStencilFile(stenciltype, measurementsys);
var container_stencil = docs.OpenEx(containerstencil_filename, containeropenflags);
var containermasters = container_stencil.Masters;
var container = containermasters["Container 1"];

var activewindow = app.ActiveWindow;
short selectargs = (short)IVisio.VisSelectArgs.visSelect;
activewindow.Select(shape1, selectargs);
activewindow.Select(shape2, selectargs);

page.DropContainer(container, activewindow.Selection); 
```

# iphone - how to select unique values from sqlite table in iphone

> ID：16034688
> 
> 赞同：0
> 
> 时间：2013-04-16T10:27:16.543
> 
> 标签：iphone, ipad, sqlite, unique

I have data in my sqlite table like the following

here is the my table description and fields

```
 coffeeID;
category;
sub_Category;
content_Type;
content_Title;
content_Description;
content_Id;
publisher;
content_Source;
update_date_time; 
```

and here is the code where i am now getting all values but i want unique values.

```
 const char *sql = "select * from category";

    sqlite3_stmt *selectstmt;
    if(sqlite3_prepare_v2(database, sql, -1, &selectstmt, NULL) == SQLITE_OK) {

        while(sqlite3_step(selectstmt) == SQLITE_ROW) {

            NSInteger primaryKey = sqlite3_column_int(selectstmt, 0);
            Coffee *coffeeObj = [[Coffee alloc] initWithPrimaryKey:primaryKey];
            coffeeObj.category=sqlite3_column_int(selectstmt,1);
            coffeeObj.sub_Category = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 2)];
            coffeeObj.content_Type = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 3)];
            coffeeObj.content_Title = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt,4)];

            coffeeObj.publisher = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 5)];
            coffeeObj.content_Description = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 6)];
            coffeeObj.content_Id = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 7)];
            coffeeObj.content_Source = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 8)];

            int count=[appDelegate.coffeeArray count];

            NSLog(@"count is beofore getting values %d",count);

            [appDelegate.coffeeArray addObject:coffeeObj];

            int countone=[appDelegate.coffeeArray count];

            NSLog(@"count is after getting values %d",countone);

            [coffeeObj release];
        }
    }
} 
```

I want that if it has two same sub categories then it may show only one like mean only unique records not the categories with same name repeated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:31:35.430

You can use Group by in SQL Query

```
"Select * From category GROUP BY category" 
```

You can group by any column

# python - 实现线程最大执行时间的最佳方法是什么（在 python/gtk 中）？

> ID：16034691
> 
> 赞同：1
> 
> 时间：2013-04-16T10:27:24.060
> 
> 标签：python, multithreading, timeout, pygtk

实现线程作业超时的最佳实践是什么（即：最多 X 秒后终止作业）？我编写了以下python代码。我读了很多不同的方法来实现这个，但我有点迷茫......我必须用计时器来做这个吗？还是通过`add_timeout`回调计数？

作为旁注，`thread.join(timeout)`在 gtk/线程应用程序中的使用非常有限，因为它阻塞了主线程？

谢谢 ！！

注意：我对 python/threading 很陌生

```
#!/usr/bin/python

import time
import threading
import gobject
import gtk
import glib
gobject.threads_init()

class myui():
    def __init__(self):
        interface = gtk.Builder()
        interface.add_from_file("myui.glade")
        interface.connect_signals(self)

        self.spinner = interface.get_object('spinner1')         

    def bg_work1(self):
        print "work has started"
        # simulates some work
        time.sleep(5)
        print "work has finished"

    def startup(self):
        thread = threading.Thread(target=self.bg_work1)
        thread.start()

        # work started. Now while the work is being done I want
        # a spinner to rotate
        self.spinner.start()
        print "spinner started"

        #thread.join() # I wanna wait for the job to be finished while the spinner spins.
                                    # but this seems to block the main thread, and so the gui doesn't shows up !

        glib.timeout_add(100, self.check_job, thread, 5)

    def check_job(self, thread, timeout):
        #print 'check job called'

        if not thread.isAlive():
                print 'is not alive anymore'
                self.spinner.stop()
                return False
        return True

if __name__ == "__main__":

    app = myui()
    app.startup()

    print "gtk main loop starting !"

    gtk.main()
    print "gtk main loop has stopped !" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T20:41:33.397

您的代码看起来不错，唯一缺少的是使用和评估超时点：

```
 glib.timeout_add(100, self.check_job, thread, time.time() + 5)

def check_job(self, thread, timeout):
    #print 'check job called'

    if not thread.isAlive():
            print 'is not alive anymore'
            self.spinner.stop()
            return False
    if time.time() > timeout:
            print 'job timed out'
            self.spinner.stop()
            return False
    return True 
```

但是，这不会在超时后杀死您的工作线程，因此它仍然会运行。我不知道强制终止 Python 线程的方法。您必须拆分工作并检查工作线程中的超时，以便它可以正常终止。

# graphics - 在AthensTutorial 中画布从何而来？

> ID：16034694
> 
> 赞同：6
> 
> 时间：2013-04-16T10:27:30.500
> 
> 标签：graphics, smalltalk, cairo, pharo, athens

我在做AthensTutorial，第一步我明白了

```
surface := AthensCairoSurface extent: self extent asIntegerPoint. 
```

然后第2步是

```
surface drawDuring: [:canvas |

"First, we clear the surface"
surface clear. 

"we can use 

surface clear: Color black.  

as well. A #clear is equivalent to: (surface clear: Color transparent).   "

"Let''s draw a simple green rectangle"
canvas setPaint: Color green.
canvas setShape: (40@40 corner: 100@100).
canvas draw.

] 
```

画布从何而来？在哪里定义？我只是不明白那部分。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T12:16:54.660

这是您将在各种 Smalltalk 框架中看到的技巧。'canvas' 是您传递给#drawDuring: 的块的参数。您可以按照自己的方式命名，这完全取决于您。#drawDuring: 方法将创建一个画布实例，并通过调用 BlockClosure>>value: 方法将其传递给您的块。

# python - /proc/net/ip_conntrack 和 /proc/net/nf_conntrack 的详细信息

> ID：16034698
> 
> 赞同：21
> 
> 时间：2013-04-16T10:27:41.267
> 
> 标签：python, linux, kernel, conntrack

我正在寻找有关文件内容`/proc/net/nf_conntrack`和/或`/proc/net/ip_contrack`在 Linux 系统上的详细文档。

是的，我知道，有许多实用程序可以以人类可读的格式向我显示这些文件的内容，但是......我想在 SOHO 路由器上使用 Tomato USB 固件（由 Shibby 提供）。optware AFAIK 已弃用，entware 不包含任何这些实用程序，所以我想编写一个脚本而不是它们，但我没有找到这些文件的详细描述:(

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-24T16:59:28.463

from 行的格式`/proc/net/ip_conntrack`与 for 相同`/proc/net/nf_conntrack`，只是缺少前两列。

我将尝试总结后一个文件的格式，正如我从[`net/netfilter/nf_conntrack_standalone.c`](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/net/netfilter/nf_conntrack_standalone.c "`net/netfilter/nf_conntrack_standalone.c`"),[`net/netfilter/nf_conntrack_acct.c`](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/net/netfilter/nf_conntrack_acct.c "网络/netfilter/nf_conntrack_acct.c")和`net/netfilter/nf_conntrack_proto_*.c`内核源文件中所理解的那样。该术语`layer`指的是[OSI 协议层](http://en.wikipedia.org/w/index.php?title=OSI_protocols&oldid=545448188 "OSI 协议层")模型。

*   第一列：网络层协议名称（例如`ipv4`）。
*   第二列：网络层协议号。
*   第三列：传输层协议名称（例如。`tcp`）。
*   第四列：传输层协议号。
*   第五列：直到条目失效的秒数。
*   第六列（并非所有协议）：连接状态。

所有其他列都命名为 ( `key=value`) 或表示标志 ( `[UNREPLIED]`, `[ASSURED]`, ...)。一行最多可以包含两个具有相同名称的列（例如`src`和`dst`）。然后，第一次出现与请求方向有关，第二次出现与响应方向有关。

标志的含义：

*   `[ASSURED]`：在两个（即请求和响应）方向上都看到了流量。
*   `[UNREPLIED]`: 在响应方向上还没有看到流量。万一连接跟踪缓存溢出，这些连接首先被丢弃。

请注意，某些列名仅针对特定协议出现（例如TCP`sport`和`dport`UDP`type`以及`code`ICMP）。`mark`仅当使用特定选项构建内核时才会出现其他列名称（例如）。

例子：

*   `ipv4 2 tcp 6 300 ESTABLISHED src=1.1.1.2 dst=2.2.2.2 sport=2000 dport=80 src=2.2.2.2 dst=1.1.1.1 sport=80 dport=12000 [ASSURED] mark=0 use=2`属于从主机 1.1.1.2 端口 2000 到主机 2.2.2.2 端口 80 的已建立 TCP 连接，从该连接向主机 1.1.1.1 端口 12000 发送响应，超时五分钟。对于此连接，已在两个方向上看到数据包。
*   `ipv4 2 icmp 1 3 src=1.1.1.2 dst=1.1.1.1 type=8 code=0 id=32354 src=1.1.1.1 dst=1.1.1.2 type=0 code=0 id=32354 mark=0 use=2`属于从主机 1.1.1.2 到主机 1.1.1.1 的 ICMP 回显请求数据包，具有从主机 1.1.1.1 到主机 1.1.1.2 的预期回显响应数据包，在三秒后超时。

响应目标主机不一定与请求源主机相同，因为请求源地址可能已被响应目标主机伪装。

* * *

**请注意，以下信息可能不是最新的！**

可用于所有条目的字段：

*   `bytes`（如果启用记帐，请求和响应）
*   `delta-time`（如果`CONFIG_NF_CONNTRACK_TIMESTAMP`启用）
*   `dst`（请求和响应）
*   `mark`（如果`CONFIG_NF_CONNTRACK_MARK`启用）
*   `packets`（如果启用记帐，请求和响应）
*   `secctx`（如果`CONFIG_NF_CONNTRACK_SECMARK`启用）
*   `src`（请求和响应）
*   `use`
*   `zone`（如果`CONFIG_NF_CONNTRACK_ZONES`启用）

[`dccp`](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/net/netfilter/nf_conntrack_proto_dccp.c "网络/netfilter/nf_conntrack_proto_dccp.c")、[`sctp`](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/net/netfilter/nf_conntrack_proto_sccp.c "网络/netfilter/nf_conntrack_proto_sccp.c")、[`tcp`](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/net/netfilter/nf_conntrack_proto_tcp.c "网络/netfilter/nf_conntrack_proto_tcp.c")和传输层协议可用的字段[`udp`](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/net/netfilter/nf_conntrack_proto_udp.c "网络/netfilter/nf_conntrack_proto_udp.c")：[`udplite`](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/net/netfilter/nf_conntrack_proto_udplite.c "网络/netfilter/nf_conntrack_proto_udplite.c")

*   `dport`（请求和响应）
*   `sport`（请求和响应）

[`icmp`](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/net/netfilter/nf_conntrack_proto_icmp.c "网络/netfilter/nf_conntrack_proto_icmp.c")传输层协议可用的字段：

*   `code`（请求和响应）
*   `id`（请求和响应）
*   `type`（请求和响应）

[`gre`](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/net/netfilter/nf_conntrack_proto_gre.c "网络/netfilter/nf_conntrack_proto_gre.c")传输层协议可用的字段：

*   `dstkey`（请求和响应）
*   `srckey`（请求和响应）
*   `stream_timeout`
*   `timeout`

第六个字段的允许值：

*   `dccp`传输层协议
    *   `CLOSEREQ`
    *   `CLOSING`
    *   `IGNORE`
    *   `INVALID`
    *   `NONE`
    *   `OPEN`
    *   `PARTOPEN`
    *   `REQUEST`
    *   `RESPOND`
    *   `TIME_WAIT`
*   `sctp`传输层协议
    *   `CLOSED`
    *   `COOKIE_ECHOED`
    *   `COOKIE_WAIT`
    *   `ESTABLISHED`
    *   `NONE`
    *   `SHUTDOWN_ACK_SENT`
    *   `SHUTDOWN_RECD`
    *   `SHUTDOWN_SENT`
*   `tcp`传输层协议
    *   `CLOSE`
    *   `CLOSE_WAIT`
    *   `ESTABLISHED`
    *   `FIN_WAIT`
    *   `LAST_ACK`
    *   `NONE`
    *   `SYN_RECV`
    *   `SYN_SENT`
    *   `SYN_SENT2`
    *   `TIME_WAIT`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-05-31T07:45:21.277

该文件`ip_conntrack`仅包含*ipv4*特定的 conntrack 条目，而同时`nf_conntrack`包含*ipv4*和*ipv6*协议 conntrack 条目。

`nf_conntrack`使用
*net/netfilter/nf_conntrack_standalone.c*
中的代码向 proc 文件系统注册文件， 而通过*net/netfilter/nf_conntrack_l3proto_ipv4_compat.c*`ip_conntrack`中的代码向 proc 文件系统注册文件

# grails - Grails 对象引用了一个未保存的瞬态实例

> ID：16034702
> 
> 赞同：4
> 
> 时间：2013-04-16T10:28:06.170
> 
> 标签：grails, grails-orm

当我想保存我的对象时，我遇到了这个问题

我的客户

```
String firstName
String lastName
LocalDate dateOfBirth
CountryCode nationality 
```

我的国家代码

```
 @Audited
class CountryCode implements Serializable {

  String code
  String symbolA2
  String symbolA3
  String countryName

  static constraints = {
    code size:3..3, unique: true, matches: '[0-9]+'
    symbolA2 size:2..2, nullable: false, unique: true, matches: '[A-Z]+'
    symbolA3 size:3..3, nullable: false, unique: true, matches: '[A-Z]+'
    countryName size:1..50
  }

  static mapping = {
    id generator: 'assigned', name: 'code'
  }

  def beforeValidate() {
    symbolA2 = symbolA2?.toUpperCase()
    symbolA3 = symbolA3?.toUpperCase()
  }

  @Override
  String toString() {
    return countryName
  }
} 
```

当我尝试保存我的对象时，我收到了这个错误

> 类 org.hibernate.TransientObjectException 消息对象引用了一个未保存的瞬态实例 - 在刷新之前保存瞬态实例：lookup.iso.CountryCode

你有想法如何解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:42:32.820

使用 Grails 关系约定

```
static hasOne = [nationality:CountryCode] 
```

在客户类和

```
static belongsTo = [customer:Customer] 
```

在 CountryCode 类

检查[grails 文档](http://grails.org/doc/latest/guide/GORM.html#manyToOneAndOneToOne)，特别是关于级联保存的段落。如果这不适合您的情况，那么您需要先在 CountryCode 实例上调用 save() ，然后再将其分配给 Customer 实例。

如果适用于您的情况，您也可以使用*[静态嵌入。](http://grails.org/doc/latest/guide/GORM.html#gormComposition)*

如果您将 CountryCode 视为字典实体，则另一件事是从存储库加载所需的 ContryCode 实例，然后再将其分配给 Customer 实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T13:37:43.013

您的错误的具体原因是因为您在将 CountryCode 分配给客户之前没有保存它，所以 Hibernate（Grails 的底层 ORM）认为它是暂时的。基本上，您没有定义任何 GORM 关系（例如，has*、belongsTo）。通过定义 GORM 关系，您可以获得级联保存/删除的能力，具体取决于关系的定义方式。

在简单地将 hasOne 或 belongsTo 分别添加到 Customer 和 CountryCode 之前，您可能需要考虑如何使用 CountryCode。CountryCode 是否用作：

1.  一对多的查找/参考/字典实体，其中许多客户可以映射到特定的 CountryCode
2.  一对一的唯一实体，每个客户都有一个唯一的 CountryCode

`belongsTo`要实现#1，您应该在 CountryCode中使用**没有**`hasOne`在 Customer中定义一个单向关系，如下所示：

```
class CountryCode {
  static belongsTo = [customer: Customer]
  ...
} 
```

这将在引用特定 CountryCode 的 Customer 表上创建一个外键 - 基本上是一对多。

`belongsTo`要实现 #2，您应该在 CountryCode中**使用与**`hasOne`在 Customer 中的 a 来定义双向关系，如下所示：

```
class Customer {
  static hasOne = [country: CountryCode]
  ..
}
class CountryCode {
  static belongsTo = [customer: Customer]
  ..
} 
```

这将在 CountryCode 表上创建一个外键，返回给特定的客户——基本上是一对一的映射。

# git - 如何使用连接到最新版本标签的 mercurial 或 git 子存储库？

> ID：16034704
> 
> 赞同：1
> 
> 时间：2013-04-16T10:28:11.230
> 
> 标签：git, mercurial, git-submodules, subrepos, mercurial-subrepos

我正在寻找一种解决方案，它允许我使用不是 HEAD 而是特定`RELEASE`标签的子存储库，或者如果可能的话，使用最新的标签。

这可能吗，我应该如何实现？有没有人实现这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:15:56.620

我不知道**git**，但是**Mercurial**子存​​储库不链接到子存储库的头部，而是链接到特定的修订。

要设置子存储库的修订版，请将其更新为所需的修订版（在您的情况下为特定标签），然后提交主存储库。然后将主存储库链接到子存储库的特定修订版。

可以在[此处](http://mercurial.aragost.com/kick-start/en/subrepositories/)找到有关 Mercurial 子存​​储库的良好指南，而 Mercurial 子存​​储库文档在[此处](http://mercurial.selenic.com/wiki/Subrepository)。

# ms-access - ADO 加速打开表访问

> ID：16034708
> 
> 赞同：1
> 
> 时间：2013-04-16T10:28:24.037
> 
> 标签：ms-access, vb6, ado

根据写入数据的速度，对于 rs.AddNew 和 rs.Update，使用 ADO 和 Access 打开表的最佳方法是什么？

我需要使用特定的光标或特定的方法吗？

我使用从 VB6 到 Jet 的 ADO 连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:03:51.690

我的两个建议是：

1.  打开 Recordset`adOpenStatic`以尽量减少尝试跟踪其他用户可能对表进行的更改的开销。

2.  `.AddNew`通过`cn.BeginTrans`在批量插入之前和`cn.CommitTrans`之后在事务中包装多个操作。

## 编辑

在回应@Bob77 的评论时，他说：

> 围绕一系列任意更新操作抛出 Begin/End Trans 不会提供任何内在的性能优势，并且在大多数情况下会使事情变得更糟。

以下 VBScript 测试结果清楚地表明，在事务中包装一批插入可以大大提高使用 Jet/ACE 数据库时的性能。

```
Option Explicit
Dim con, rst, t0, i, n, s
Const adUseClient = 3
Const adOpenStatic = 3
Const adLockOptimistic = 3
Const useTransaction = False

t0 = Timer
n = 1000
Set con = CreateObject("ADODB.Connection")
con.CursorLocation = adUseClient
con.Open "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=Y:\adoTimeTest.accdb;"
Set rst = CreateObject("ADODB.Recordset")
rst.Open "SELECT * FROM tbl", con, adOpenStatic, adLockOptimistic
If useTransaction Then
    con.BeginTrans
End If
For i = 1 to n
    rst.AddNew
    rst("ItemName").Value = "Item_" & i
    rst("SeqNo").Value = i
    rst.Update
Next
If useTransaction Then
    con.CommitTrans
End If
rst.Close
Set rst = Nothing
con.Close
Set con = Nothing
s = "Added " & n & " rows in " & Round(Timer - t0, 1) & " seconds with"
If Not useTransaction Then
    s = s & "out"
End If
s = s & " transaction."
Wscript.Echo s 
```

表 [tbl] 的结构是

```
ID       - AutoNumber, Primary Key
ItemName - Text(255), Indexed (duplicates OK)
SeqNo    - Long Integer, Indexed (no duplicates) 
```

**测试 1：useTransaction = False**

[tbl] 表是空的，并且 .addcb 文件已被新压缩。

```
Y:\>cscript /nologo adoTimeTest.vbs
Added 1000 rows in 103.9 seconds without transaction. 
```

**测试 2：useTransaction = True**

[tbl] 表已被清空，并且 .addcb 文件已重新压缩。

```
Y:\>cscript /nologo adoTimeTest.vbs
Added 1000 rows in 4.9 seconds with transaction. 
```

## 编辑

针对@Bob77 的后续评论：

> 我会再次尝试打开数据库以进行独占访问。

使用 ODBC 和独占访问的附加测试：

```
con.Open "Driver={Microsoft Access Driver (*.mdb, *.accdb)};Dbq=Y:\adoTimeTest.accdb;Exclusive=1;Uid=admin;Pwd=;" 
```

**测试 3：useTransaction = False**

[tbl] 表是空的，并且 .addcb 文件已被新压缩。

```
Y:\>cscript /nologo adoTimeTest.vbs
Added 1000 rows in 26.5 seconds without transaction. 
```

**测试 4：useTransaction = True**

[tbl] 表已被清空，并且 .addcb 文件已重新压缩。

```
Y:\>cscript /nologo adoTimeTest.vbs
Added 1000 rows in 6.1 seconds with transaction. 
```

# android - 带有按钮的 Android 列表视图适配器

> ID：16034709
> 
> 赞同：0
> 
> 时间：2013-04-16T10:28:24.503
> 
> 标签：android, design-patterns, android-arrayadapter, android-button

我用 C# 开发的 Android 应用程序有问题。我有一个**ListActivity**和一个**ArrayAdapter**，在 ListActivity 我有一个带有 TextView 和一个**Button**的自定义视图。这个按钮应该启动新的活动，从活动中获取结果（主要是文本输入），并在后台做一些事情，然后更新 TextView 的文本。

我在 ArrayAdapter 中使用**ViewHolder 模式**，并在后台操作中使用命令模式。

我的问题是我找不到**更新 ArrayAdapter 中的 TextViews**的方法，因为我在 ListActivity 中有活动的结果。我尝试在 ListActivity 中创建一个事件并在 ArrayAdapter 中订阅它，但我认为这不是解决此问题的最佳解决方案。

你能建议一些更好的方法来解决这个问题吗？

提前致谢！

# java - jsp应用中JPA的正确使用

> ID：16034710
> 
> 赞同：1
> 
> 时间：2013-04-16T10:28:24.883
> 
> 标签：java, jsp, jakarta-ee, jpa

我正在尝试使用 JPA 开发一个简单的基于 JSP 的 Web 应用程序，并且想知道开发应用程序的正确用法。

在我的示例应用程序中，我有两个 JSP 页面和一个简单的 Java 类来执行数据库操作。这两个 JSP 文件都使用这个 Java 类来执行 DB 操作。

我已经用以下方式注释了这个类`@Stateless`并注入了一个实体管理器：

```
@PersistenceContext(unitName = "myjpa") 
EntityManager em; 
```

在我的`persistence.xml`我设置了以下属性：

```
<property 
    name="hibernate.transaction.jta.platform"
    value="org.hibernate.service.jta.platform.internal.JBossAppServerJtaPlatform"
/> 
```

我正在使用 JNDI 调用 JSP 中的类（因为该类是为无状态会话 bean 注释的），如下所示：

```
InitialContext ic = new InitialContext();

Sample sample = (Sample) ic.lookup("java:app/" + application.getContextPath() + "/Sample"); 
```

我面临以下情况：

1.  当我尝试使用事务`em.getTransaction().begin()/commit()`进行插入和更新时，它说不能在 JTA 案例中使用事务。

2.  因此，在我的 Java 类的构造函数代码中，我使用以下代码：

```
Properties properties = new Properties();

properties.put("javax.persistence.transactionType", "RESOURCE_LOCAL");

emf = Persistence.createEntityManagerFactory("myjpa",properties);

em = emf.createEntityManager(); 
```

我尝试使用诸如`em.getTransaction().begin()/commit()`. 但在这种情况下，页面在 2-3 次数据库更新和加载操作后变得非常慢。虽然我没有得到任何例外。总的来说，在我的表中，我的记录少于 25 条。

对我来说，它似乎在内部等待某些操作完成。

同时，我也觉得我使用 JPA 的方式是错误的，因此征求建议，以寻求正确的方法来使用 JSP 和 JPA 做简单的 Web 应用程序。

虽然我仍在探索 Java EE，但如果您对此类案例有任何具体的参考资料，我也愿意阅读并查看它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:58:38.583

您应该始终努力使用 JTA 事务，这意味着容器将处理事务分界。在您的情况下，如果您想自己处理事务，则需要将其定义为 bean 托管事务。因此，在您的 EJB 类中，在 @Stateless 注释之后，您应该定义以下注释；

```
@TransactionManagement(TransactionManagementType.BEAN) 
```

通常的最佳实践是让容器处理事务，除非有明确的理由让您使用 Bean 管理的事务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T18:51:28.460

> 同时我也觉得自己使用JPA的方式不对

您的用法确实似乎是错误的。如果您使用的是（无状态）会话 bean，您不必摆弄，`em.getTransaction().begin()/commit()`而且您绝对不必使用诸如`Persistence.createEntityManagerFactory`.

您也不必设置属性`org.hibernate.service.jta.platform.internal.JBossAppServerJtaPlatform`。

会话 bean 自动为您管理事务，并且在 Java EE AS（例如 JBoss AS）中，您不必配置任何事务管理器或类似的东西。

一个例子：

```
@Stateless
public class UserDAO {

    @PersistenceContext
    private EntityManager entityManager;

    public void add(User user) {
        entityManager.persist(user);
    }
} 
```

至于`persistence.xml`文件，以下内容应该足以开始：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">

    <persistence-unit name="somePU">
        <jta-data-source>java:app/someDS</jta-data-source>
    </persistence-unit>
</persistence> 
```

更多示例：

*   [http://jdevelopment.nl/sample-crud-app-with-jsf-and-richfaces](http://jdevelopment.nl/sample-crud-app-with-jsf-and-richfaces)
*   [http://arjan-tijms.omnifaces.org/2011/08/minimal-3-tier-java-ee-app-without-any.html](http://arjan-tijms.omnifaces.org/2011/08/minimal-3-tier-java-ee-app-without-any.html)

# wordpress - functions.php 中的当前路径

> ID：16034711
> 
> 赞同：0
> 
> 时间：2013-04-16T10:28:26.253
> 
> 标签：wordpress, function, path

如何获取页面的当前路径？

我知道如何在我的模板上执行此操作，但我需要在 functions.php 上执行此操作。它必须在 send_headers 钩子之前，因为我将使用此信息来设置 cookie。

我尝试过使用 PHP，但它显示了 functions.php 的路径...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:36:57.880

You should be able to get the request path with something like this in your `functions.php` file:

```
function current_request_path(){
  return $_SERVER['REQUEST_URI'];
} 
```

If that doesn't work, you could always [set the cookie with JavaScript](http://www.quirksmode.org/js/cookies.html) after the page loads. You can get the current URL with via JavaScript using `window.location.href`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:32:48.550

尝试这个。

```
echo "http://" . $_SERVER['HTTP_HOST']  . $_SERVER['REQUEST_URI']; 
```

# matlab - 重采样矩阵并在一个矩阵中恢复

> ID：16034713
> 
> 赞同：1
> 
> 时间：2013-04-16T10:28:30.103
> 
> 标签：matlab

我是这个论坛的新手，所以请多多包涵。我一直在研究这个 Matlab 问题一段时间：

我有一个 tif 格式的数字高程模型 (DEM) new_sub(x,y)。所以它是一个包含高度 (z) 的 x×y 矩阵。我希望以不同的分辨率重新采样这个 DEM 的部分并将其恢复到另一个矩阵中。到目前为止，我一直在使用 for 循环来更改 DEM 不同区域的分辨率，然后将结果写入 xyz 文件：

xyz 1 1 123 1 2 233 1 3 231 2 1 235 2 2 531 2 3 452

等等。这是代码：

```
xmax = size(new_sub,2);
ymax = size(new_sub,1);

for k=1:200 % y
    for l=1:xmax % x
        fprintf(fid, '%d %d %d \n',l,xmax+1-k,new_sub(k,l));
    end
end

% 1:4
for k=200/2+1:size(new_sub,1)/2
    for l=1:size(new_sub,2)/2
        fprintf(fid, '%d %d %d \n',l*2,ymax+2-k*2,new_sub(k*2,l*2));
    end
end 
```

这确实有效，但似乎相当复杂。此外，它不允许我将重采样区域存储在 Matlab 中的单个矩阵中。

有没有更有效的方法来重新采样具有不同分辨率的矩阵的某些区域，将它们写入包含所有重新采样区域的新矩阵，然后将其写入文件？我正在研究repmap，但想不出一个聪明的方法来使用它！

非常感谢您的帮助！

西奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:55:50.130

在 Matlab 中重新采样矩阵：

例如矩阵`M`：

```
M = [1  2  3  4  5; 
     6  7  8  9  10; 
     11 12 13 14 15; 
     16 17 18 19 20; 
     21 22 23 24 25]; 
```

如果我们想对每第 n 个像素进行采样，就这么简单：

```
m = M(1:n:end, 1:n:end) 
```

因此对于`n=2`

```
m = 1  3  5
    11 13 15
    21 23 25 
```

我建议您阅读 matlab 中的[索引](http://www.mathworks.com/company/newsletters/articles/Matrix-Indexing-in-MATLAB/matrix.html)以及使用[冒号运算符在 matlab 中创建向量](http://www.mathworks.com/help/matlab/ref/colon.html)

现在为了获得您提到的“xy z”格式，首先使用[meshgrid](http://www.mathworks.com/help/matlab/ref/meshgrid.html)生成 X 和 Y 坐标矩阵。

```
[X, Y] = meshgrid(1:n:size(M,1), 1:n:size(M,2)) 
```

注意我`n`用来下采样`X`和`Y`. 现在您只需要展平三个矩阵并将它们组合起来：

```
final = [X(:), Y(:), m(:)] 
```

最后保存为文件，我建议您键入`help save`或`help dlmwrite`在 Matlab 命令 promt 中并使用这些函数中的任何一个来保存`final`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:36:17.180

对我来说，最简单的方法是使用[imresize](http://www.mathworks.nl/help/images/ref/imresize.html)。您可以将您的高程图视为图像 I。然后您可以通过索引和重新缩放来剪切部分，如下所示：

```
I = imread('my.tiff'); % read
section = I(1:200, :); % cut the first 200 rows and all columns
sectionResized = imresize(section, [numrows numcols]) % resample
imwrite(sectionResized, 'mynew.tiff'); % save 
```

# c# - 输入字符串的格式不正确 C# ASP.NET

> ID：16034718
> 
> 赞同：2
> 
> 时间：2013-04-16T10:28:42.470
> 
> 标签：c#, asp.net, linq

我是编程新手，目前在 C# asp.net 网站上工作，该网站从数据库 on_load 填充 Telerik RadComboBoxes。

我有一个包含 15 个以上 ComboBox 的表单，当我从这些 ComboBox 中选择值时，必须使用这些 ComboBox 选择来搜索数据库中的一个非常大的表。gridView 将显示返回的数据。

我在整个项目的其余部分都使用了相同格式的代码，它运行良好，但是当我从“位置”下拉框中选择一个项目来搜索我的数据库时，我得到了错误`'Input string was not in a correct format'`，我不知道为什么

这是我的 Location.cs 类

# 区域属性

```
 [Key]
    public int LocationID { get; se; }
    [Column("Location")]
    public string LocationName { get; set; }
    private int? _ParentLocationID;
    [Column]
    public int? ParentLocationID
    {
        get
        {
            return _ParentLocationID;
        }
        set
        {
            if (value == 0)
            {
                _ParentLocationID = null;
            }
            else
            {
                _ParentLocationID = value;
            }
        }
    }

    [Column]
    public int SiteID { get; set; }
    [Column]
    public bool Active { get; set; } 
```

# 区域法

```
 public static IEnumerable<Location> LoadActiveLocations(int siteID)
    {
        iThNkContext db = new iThNkContext();

        var LocationList = (from l in db.Locations
                                where(l.SiteID == siteID && l.Active == true)
                                orderby l.LocationID
                                select l).ToList();

        return LocationList;
    } 
```

这是我在 .aspx 文件中使用的代码

```
RadTreeView trvLocation = (RadTreeView)cboLocation.Controls[2].FindControl("trvLocation");
         if (trvLocation.SelectedValue != "")
         {
            var locationID = Convert.ToInt32(trvLocation.SelectedValue);  //Error
            predicates.Add(p => p.LocationID == locationID);
        } 
```

在 //Error 行是我收到“输入字符串格式不正确”错误的地方，请提供任何建议。我不明白为什么我会遇到这个问题

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:54:59.290

看起来您的 LocationID 是一个可为空的值 - 您无法将空值转换为 Int32。您需要确保绑定到下拉列表的每个值成员不是空值而是有效整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:39:18.200

如果您希望 locationID 是数字，请确保组合框中每个项目的值都可以转换为数字。否则，即使您使用 tryparse，您的页面也不会正确运行。

P/S：TryParse 只会避免错误，不会将 selectedvalue 分配给 locationID，因此会破坏您的逻辑。

# php - 将 DB 记录分解为表格格式

> ID：16034720
> 
> 赞同：0
> 
> 时间：2013-04-16T10:28:43.860
> 
> 标签：php, mysql, explode

我有一个连接到我的站点的数据库，该数据库正在记录用户在我们构建的应用程序上采取的操作。该应用程序包含许多图像，用户可以查看和下载这些图像，并且该应用程序跟踪每个用户他们查看过的图像，以逗号分隔

我想要做的是编写一个 PHP 脚本，它允许我将此分隔的文本字符串转换为计算表格式

如果数据库有以下示例记录：

```
1 | 1-A, 1-B, 2-A, 2-C
2 | 1-A
3 | 1-B, 2-C
4 | 
5 | 1-A, 1-B, 1-C, 2-A 
```

我想为此编写一个能够将其输出为的脚本：

```
1-A = 3
1-B = 3
1-C = 1
2-A = 2
2-C = 2 
```

**（我想指出，我并不是建议我要在每个条目之后命名变量，并将其计算的总数作为值，我愿意但是最好返回这个值）**

我的第一步是将每条记录分解成一个数组，但是我不确定下一步是否可以将它变成我可以写入表格的东西。

我意识到数据库的结构非常糟糕，但不幸的是我还没有编写它，所以我没有能力重新构造存储的数据。

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:40:58.023

这应该工作：

```
<?php
    $values = array  (
                        '1' => '1-A, 1-B, 2-A, 2-C',
                        '2' => '1-A',
                        '3' => '1-B, 2-C',
                        '4' => '',
                        '5' => '1-A, 1-B, 1-C, 2-A'
                    );
    $valueCounts = array();
    foreach($values as $value)
    {
        foreach(explode(', ', $value) as $val)
        {
            if(!key_exists($val, $valueCounts))
            {
                if($val) $valueCounts[$val] = 1;
            }
            else
            {
                $valueCounts[$val]++;
            }
        }
    }
    ksort($valueCounts);
    foreach($valueCounts as $value => $count)
    {
        echo "$value = $count<br />";
    }
?> 
```

结果：

```
1-A = 3
1-B = 3
1-C = 1
2-A = 2
2-C = 2 
```

如果您不确定如何填充`$values`数组，请粘贴数据库代码，我会尝试将其合并到上面。

# c - 如何阅读单行

> ID：16034721
> 
> 赞同：-3
> 
> 时间：2013-04-16T10:28:50.723
> 
> 标签：c, unix, file-io

我有一个程序，每次收到信号 SIGUSR2 时都需要从文件中读取一行。除了如何准确地阅读一行之外，我做了所有的事情。

文件内容：

```
one
two
three
four
five
...
ten 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T10:37:10.403

使用[`fgets()`](http://en.cppreference.com/w/c/io/fgets)函数....它将读取直到换行符出现...否则您可以在获取 /n 时使用 fgetc 读取一个字符一个字符，然后您可以结束您的读取操作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T12:45:19.157

正如 OP 所暗示的，数据应该从信号处理程序中读取，这是使用它的唯一方法`read()`，因为这是最近版本提到的唯一`man 7 signal`可以从信号处理程序中调用的函数。有关这方面的详细信息，请在此处阅读：http: [//pubs.opengroup.org/onlinepubs/009695399/functions/xsh_chap02_04.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/xsh_chap02_04.html)

读取一行 via`read()`可以实现逐字节读取，直到找到 EOL 字符。

在读取之前，不清楚需要读取多少数据才能找到 EOL，或者需要定义最大值，然后可以使用该最大值来声明要读取的缓冲区，或者需要动态增加缓冲区大小同时循环`read()`。

**更新：**

摘录形式`man 7 signal`（我在方括号中评论）：

> 异步信号安全功能
> 
> 信号处理函数必须非常小心，因为其他地方的处理可能会在程序执行的某个任意点被中断。POSIX 有“安全功能”的概念。如果信号中断了不安全函数的执行，并且处理程序调用了不安全函数，则程序的行为是未定义的。
> 
> POSIX.1-2004（也称为 POSIX.1-2001 Technical Corrigendum 2）需要一个实现来保证可以在信号处理程序中安全地调用以下函数：
> 
> [名单删减，名单见上方链接]

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T10:37:35.680

您可以使用`fscanf()`

```
fscanf(fp, " %[^\n]",buffer); 
```

这允许从您的文件中读取一行。

每次您想从文件中读取 1 行时调用它

**笔记：**

1.  使用时必须小心。如果该行大于`buffer`大小，则会导致溢出。您必须确保您使用的缓冲区大小始终大于每行的大小。

2.  如果文件中的行以空格开头（在[isspace()](http://www.cplusplus.com/reference/cctype/isspace/)中定义），那么这些空格将不会被复制

# javascript - 如何创建一个带有水印文本的下拉列表

> ID：16034722
> 
> 赞同：-2
> 
> 时间：2013-04-16T10:28:52.247
> 
> 标签：javascript, jquery, css, html

在 HTML 中，如何在区域内创建带有水印文本的下拉列表。

我的要求是让下拉列表看起来像一个带有水印文本的文本框，在角落有一个向下箭头，用于从列表中选择数据。

```
<select>
  <option value="Class">Class room</option>
  <option value="Ground">Play ground</option>
</select> 
```

这给了我一个正常的下拉列表。下拉列表框应该像 stackover 流中的 serach 字段一样，在末尾/角处带有箭头标记。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:48:18.590

你需要这样的东西：

**HTML：**

```
<select id="choice">
    <option value="0" selected="selected">Select...</option>
    <option value="1">Class room</option>
    <option value="2">Play ground</option>
</select> 
```

**CSS：**

```
#choice option { color: black; }
.empty { color: gray; } 
```

**查询：**

```
$("#choice").change(function () {
    if($(this).val() == "0") $(this).addClass("empty");
    else $(this).removeClass("empty")
});
$("#choice").change(); 
```

**[JSFIDDLE](http://jsfiddle.net/Zmf6t/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:35:11.037

你可以在 ul li like

```
<div>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</div> 
```

给李背景图片像

```
div ul li{background:url(arrow.png) no-repeat;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:43:24.683

如果您使用的是 HTML 5，则可以在文本框中使用占位符属性。

```
<input type="text" placeholder="Watermark" /> 
```

并在输入关键字后使用此 jquery[自动完成](http://jqueryui.com/autocomplete/#maxheight)功能实现下拉选择。

或者

```
<select>
   <option value="" selected="selected">Watermark</option>
   <option value="Class">Class room</option>
   <option value="Ground">Play ground</option>
</select> 
```

# database - 图数据库中的用户管理

> ID：16034723
> 
> 赞同：2
> 
> 时间：2013-04-16T10:28:59.487
> 
> 标签：database, user-interface, graph, playframework-2.0, neo4j

我正在尝试制作一个使用 PlayFramework2 和 Neo4j 图形数据库的 Web 应用程序。我的 Web 应用程序将包含用户系统。用户可以将他们访问过的地方添加为节点并遍历。我的问题；是否可以将密码和其他个人信息保留在节点中进行身份验证或使用基于表的另一个数据库更好地登录到 Web 应用程序。如果所有工作都可以使用 Neo4j 完成，那么图形数据库中用户系统的结构应该是什么安全性。我是这些工作的新手，所以如果这是一个荒谬的问题，我很抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:30:02.213

当然你可以使用neo4j来存储用户信息。

与所有数据库一样，请注意一些数据，不要在没有哈希/加密方法的情况下存储密码！

如果您的数据是合理的，您应该很好地配置您的 neo4j 实例以不允许远程连接，以及为什么不实现一些用户角色进行连接。见这里：[http ://docs.neo4j.org/chunked/stable/security-server.html](http://docs.neo4j.org/chunked/stable/security-server.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:25:26.657

您应该使用像 OAuth2 这样的现代身份验证机制之一，或者至少使用长盐对密码进行强烈散列和加盐。

# php - 使用 PHP SDK 登录 Facebook 页面时出现重定向错误？

> ID：16034724
> 
> 赞同：0
> 
> 时间：2013-04-16T10:29:02.943
> 
> 标签：php, facebook

我正在做一个页面来使用 facebook 应用程序和 php api 保存 facebook 用户配置文件？顺便说一句，facebook 应用程序尚未提交并正在审核中。

当用户第一次登录时。它显示了 facebook 应用程序页面，但在按下 okey 之后。我收到重定向错误。“发生太多重定向”。然后当同一个用户再次访问该页面时。他得到了同样的错误“发生了太多的重定向”。并且每次都发生同样的情况（新用户获得第一个应用程序页面和按下确定后的错误）。

我将类似于网站 url 的 redirect_uri 放在应用程序设置中，即“ [http://donjam11.byethost7.com/FirstApp/FirstApp/login.php](http://donjam11.byethost7.com/FirstApp/FirstApp/login.php) ”。

注意：该应用程序尚未获得 facebook 批准。其状态为 Live 但正在审核中。

# php - 如何使用jquery对齐来自外部php文件的动态生成的表行

> ID：16034726
> 
> 赞同：0
> 
> 时间：2013-04-16T10:29:07.873
> 
> 标签：php, jquery, mysql

嗨，我有一个表单，当用户单击添加按钮时，它会动态生成一个表格行到目前为止，我能够生成表格行，但问题是表格中没有生成该行![看看我的图片](https://i.stack.imgur.com/6mDFS.png)

任何人都可以帮助我这是我的脚本

```
 $(document).ready(function(){ 
                $('#addnew').click(function(){

                    var ctr = $('#items').val();
                    ctr++;

                    $.post('purch_srch.php', {ctr : ctr}, function(data) {
                          $(data).appendTo('#detail');

                          $('#items').val(ctr);                        
                    });
                });
            }); 
```

这是我的 php

```
session_start();
require("includes/dbconnect.php");
include ('includes/function.php');

$zdb = $_SESSION["zdbyear"];
mysql_select_db($zdb);

if ($_REQUEST["ctr"]){
    $ctr = $_REQUEST["ctr"];
echo "<tr>";
echo "<td>";
echo "1";
echo "</td>";
echo "<td>";
echo "2";
echo "</td>";
echo "<td>";
echo "3";
echo "</td>";
echo "<td>";
echo "4";
echo "</td>";
echo "<td>";
echo "5";
echo "</td>";
echo "<td>";
echo "6";
echo "</td>";
echo "<td>";
echo "7";
echo "</td>";
echo "</tr>";

} 
```

这是我的html

```
 <table id="detail" border="1px" width="90%">
          <tr>
              <td><br /></td>
          </tr>

          <tr>
             <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">Order</font><span></span></label></td>
             <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">item</font><span></span></label></td>
             <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">Description</font><span></span></label></td>
             <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">Unit</font><span></span></label></td>
             <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">Total Quantity</font><span></span></label></td>
             <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">Rate</font><span></span></label></td>
             <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">Amount</font><span></span></label></td>
          </tr>

              <tr>
                  <td align="center"><input type="text" size="6" maxlength="6" maxlength="6" name="ord_0" class="form-input-oth"/></td>
                  <td align="center"><select data-placeholder="Party" style="width:120px;" name="order" class="chzn-select-deselect" >
                          <option>rehan</option>
                      </select></td>
                  <td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="descrip_0" class="form-input-name"/></td>
                  <td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="unit_0" class="form-input-rate"/></td>
                  <td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="totqty_0" class="qty form-input-rate"/></td>
                  <td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="rate_0" class="rate form-input-rate"/></td>
                  <td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="amt_0" class="cal  form-input-amt"/></td>
              </tr> 
```

```
&nbsp;<input type="button" id="addnew" class="classname" name="addnew" value="+" /> 
                  <input type="text" id="items" name="items" value="0" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:36:11.823

由于表格行是动态生成的，它也将具有动态 ID，并且会因机器而异。所以您将无法使用 id。

因此，如果您的行动态生成的行使用一些 class.use 类名作为选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:34:24.973

```
document.getElementById("detail").appendChild(data); 
```

会为你工作..

# asp.net - 如何访问 .cshtml 剃须刀文件中的项目属性？

> ID：16034728
> 
> 赞同：8
> 
> 时间：2013-04-16T10:29:23.913
> 
> 标签：asp.net, asp.net-mvc, razor

是否可以在 .cshtml Razor 文件中访问我的项目属性？我需要这样的东西：

```
@if (myProject.Properties.Settings.Default.foo) {...} 
```

而 foo 是`boolean`

我收到错误消息，由于安全原因，这是不可能的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-16T11:55:49.183

您不应该`ConfigurationManager`直接从您的视图中调用。视图在 MVC 中应该是“愚蠢的”，即不了解数据结构或后端，并且通过`ConfigurationManager`直接调用您的视图非常了解您的设置是如何存储的。如果您更改设置以使用不同的存储（即数据库），那么您必须更改您的视图。

因此，您应该在其他地方获取该值并将其传递给您的视图，以便您的视图只负责渲染它，仅此而已。您可能有 2 个选项：

1.  在 ViewBag 中添加一些东西并在视图中抓取它
2.  从将强类型 ViewModel 传递到局部视图的通用控制器中渲染一个动作。

我不鼓励选项 1，因为通常最好避免，`ViewBag`因为它不是强类型（[在 MVC 中使用 ViewBag 不好吗？](https://stackoverflow.com/questions/4766062/is-using-viewbag-in-mvc-bad)）。此外，要做到这一点，您要么必须从`BaseController`每个控制器继承一个可能很痛苦的控制器，要么创建一个全局操作过滤器来覆盖`ActionExecuted`并填充`ViewBag`其中的某些内容。

选项 2 可能更好。我会创建一个通用控制器，例如：

```
public class CommonController : Controller
{
    [ChildActionOnly]
    public ViewResult Settings()
    {
        // Get some config settings etc here and make a view model
        var model = new SettingsModel { Foo = myProject.Properties.Settings.Default.foo };

        return View(model);
    }
} 
```

然后在您的布局文件中，您可以调用：

```
@Html.Action("Settings", new { controller = "Common" }) 
```

它呈现一个强类型的局部视图（~/Views/Common/Settings.cshtml），如下所示：

```
@model YourProject.Models.SettingsModel

@if(Model.Foo)
{
    // So something
} 
```

这样你仍然使用强类型模型和视图，你的布局视图保持干净和简单，你的局部视图保持“哑”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:36:29.327

应用程序设置存储在 web.config 文件中

```
<applicationSettings>
 <YourProject.Properties.Settings>
  <setting name="Setting" serializeAs="String">
    <value>asdqwe</value>
  </setting> 
```

所以你可以尝试使用 ConfigurationManager.AppSettings 字典

```
ConfigurationManager.AppSettings["Setting"] 
```

# python - C 到 Python 代码转换（打印类似地址的值）

> ID：16034731
> 
> 赞同：1
> 
> 时间：2013-04-16T10:29:35.370
> 
> 标签：python, c, code-conversion

我正在尝试将以下代码从 c 转换为 Python。C 代码如下所示：

```
 seed = (time(0) ^ (getpid() << 16));
  fprintf("0x%08x \n", seed); 
```

输出像 0x7d24defb 这样的值。

和python代码：

```
 time1 = int(time.time())
  seed  = (time1 ^ (os.getpid() <<16)) 
```

输出值如：1492460964

我需要在 python 代码中修改什么以便获得类似地址的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T10:33:42.500

这取决于值的显示方式。-functions 中的`%x`标志`printf`以十六进制显示给定值。在 Python 中，您可以使用该[`hex`](http://docs.python.org/2/library/functions.html#hex)函数将值转换为十六进制表示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:36:40.820

等效的 Python 代码：`fprintf("0x%08x \n", seed);`

```
>>> '0x{:08x}"'.format(1492460964)
'0x58f525a4"' 
```

请注意，`hex()`单独不会像 C 代码那样将零填充到大小 8。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T10:54:08.170

我想这就是你的意思：

```
>>> n =hex (int(time.time()) ^ (os.getpid() <<16))
>>> print n
0x431c2fd2
>>> 
```

# php - 如何创建带有可选文件附件字段的 PHP 电子邮件表单

> ID：16034732
> 
> 赞同：0
> 
> 时间：2013-04-16T10:29:36.623
> 
> 标签：php, forms, attachment, email-attachments

我正在为我的客户测试一个 PHP 表单，当我意识到文件附件不是可选的时，我在这里有完整的代码（它很长）。表单工作正常，但如果您不选择任何文件，电子邮件将永远无法到达目的地。无论如何，我想发送邮件并在没有附件的情况下接收它。

我正在使用 PHP 和 jForm 进行验证。

这是用于附加文件的输入标签（form.php 文件中有许多输入标签，在此处列出）

```
<input type="file" name="adjunto" id="adjunto"> 
```

这里是 send.php 文件（真正的形式太长，无法在这里发布，我正在写一个较短的版本）

```
 <?php

    // THE USER CHOOSES FROM A JOB LIST

    $busqueda = $_POST["busqueda-list"];
    $cargo = $_POST["cargo-list"];

    // FILLS PERSONAL INFORMATION

    $nombre = $_POST["nombre"];
    $apellido =  $_POST["apellido"];
    $sexo = $_POST["sexo-list"];       

    // WE STYLE A MESSAGE WITH LOTS OF INPUTS

    $mensaje = 'In the real form here is a table with lots of input styled'; 

    // AND THEN WE ATTACH (in spanish spells adjunto)         

    $adjunto_name=$_FILES["adjunto"]["name"]; 
    $adjunto_type=$_FILES["adjunto"]["type"]; 
    $adjunto_size=$_FILES["adjunto"]["size"]; 
    $adjunto_temp=$_FILES["adjunto"]["tmp_name"]; 

    // IF THERE IS A FILE ATTACHED

if (is_uploaded_file($adjunto_temp)) 

{if($adjunto_type=="application/octet-stream" or $adjunto_type=="text/plain" or $adjunto_type=="application/msword" or $adjunto_type=="application/vnd.openxmlformats-officedocument.wordprocessingml.document" or $adjunto_type=="application/pdf" ) 
        { 

        // MEET THE HEADERS 

        $headers  = "MIME-Version: 1.0\n"; 
        $headers .= "Content-type: text/html; charset=iso-8859-1\n"; 
        $headers .= "From: ".$email."\n";

        // MAIL HEADERS with attachment 

        $fp = fopen($adjunto_temp, "rb"); 
        $file = fread($fp, $adjunto_size); 

        $file = chunk_split(base64_encode($file)); 
        $num = md5(time()); 

        // Normal headers 

        $headers  = "From: ".$email."\r\n"; 
        $headers  .= "MIME-Version: 1.0\r\n"; 
        $headers  .= "Content-Type: multipart/mixed; "; 
        $headers  .= "boundary=".$num."\r\n"; 
        $headers  .= "--$num\r\n"; 

        // This two steps to help avoid spam    

        $headers .= "Message-ID: <".gettimeofday()." TheSystem@".$_SERVER['SERVER_NAME'].">\r\n"; 
        $headers .= "X-Mailer: PHP v".phpversion()."\r\n";          

            // With mensaje 

        $headers .= "Content-Type: text/html; charset=iso-8859-1\r\n"; 
        $headers .= "Content-Transfer-Encoding: 8bit\r\n"; 
        $headers .= "".$mensaje."\n"; 
        $headers .= "--".$num."\n";  

            // Attachment headers 

        $headers  .= "Content-Type:".$adjunto_type." "; 
        $headers  .= "name=\"".$adjunto_name."\"r\n"; 
        $headers  .= "Content-Transfer-Encoding: base64\r\n"; 
        $headers  .= "Content-Disposition: attachment; "; 
        $headers  .= "filename=\"".$adjunto_name."\"\r\n\n"; 
        $headers  .= "".$file."\r\n"; 
        $headers  .= "--".$num."--"; 

        // WE SEND MAIL WITH HEADERS

        @mail("name@example.com", "".$busqueda." ".$cargo."", $mensaje, $headers); 

        fclose($fp); 
    } 

// IF NOT, JUST SEND MAIL

else

@mail("ezemosho@gmail.com", "".$busqueda." ".$cargo."", $mensaje); 

}          
    ?> 
```

请帮我解决这个问题，我正在尽我所能（我已经在这里和其他论坛搜索过），我认为这可能是很多人以前遇到的问题！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:38:05.237

你需要在上面再给出一个条件

```
if (is_uploaded_file($adjunto_temp)) {

if($adjunto_type=="application/octet-stream" or $adjunto_type=="text/plain" or $adjunto_type=="application/msword" or $adjunto_type=="application/vnd.openxmlformats-officedocument.wordprocessingml.document" or $adjunto_type=="application/pdf" ) 
    { 

    ........... // your other stuff with respect to headers
@mail("name@example.com", "".$busqueda." ".$cargo."", $mensaje, $headers); 
     }

}
else

@mail("name@example.com", "".$busqueda." ".$cargo."", $mensaje); 
```

现在邮件将在这两种情况下进行。

使用您的代码更新

```
if (is_uploaded_file($adjunto_temp))
{
    if($adjunto_type=="application/octet-stream" or $adjunto_type=="text/plain" or $adjunto_type=="application/msword" or $adjunto_type=="application/vnd.openxmlformats-officedocument.wordprocessingml.document" or $adjunto_type=="application/pdf" )
    {

        // MEET THE HEADERS

        $headers  = "MIME-Version: 1.0\n";
        $headers .= "Content-type: text/html; charset=iso-8859-1\n";
        $headers .= "From: ".$email."\n";

        // MAIL HEADERS with attachment

        $fp = fopen($adjunto_temp, "rb");
        $file = fread($fp, $adjunto_size);

        $file = chunk_split(base64_encode($file));
        $num = md5(time());

        // Normal headers

        $headers  = "From: ".$email."\r\n";
        $headers  .= "MIME-Version: 1.0\r\n";
        $headers  .= "Content-Type: multipart/mixed; ";
        $headers  .= "boundary=".$num."\r\n";
        $headers  .= "--$num\r\n";

        // This two steps to help avoid spam

        $headers .= "Message-ID: <".gettimeofday()." TheSystem@".$_SERVER['SERVER_NAME'].">\r\n";
        $headers .= "X-Mailer: PHP v".phpversion()."\r\n";

        // With mensaje

        $headers .= "Content-Type: text/html; charset=iso-8859-1\r\n";
        $headers .= "Content-Transfer-Encoding: 8bit\r\n";
        $headers .= "".$mensaje."\n";
        $headers .= "--".$num."\n";

        // Attachment headers

        $headers  .= "Content-Type:".$adjunto_type." ";
        $headers  .= "name=\"".$adjunto_name."\"r\n";
        $headers  .= "Content-Transfer-Encoding: base64\r\n";
        $headers  .= "Content-Disposition: attachment; ";
        $headers  .= "filename=\"".$adjunto_name."\"\r\n\n";
        $headers  .= "".$file."\r\n";
        $headers  .= "--".$num."--";

        // WE SEND MAIL WITH HEADERS

        @mail("name@example.com", "".$busqueda." ".$cargo."", $mensaje, $headers);

        fclose($fp);
    }
}
// IF NOT, JUST SEND MAIL

else

{

    // MAIL HEADERS     

    $headers  = "MIME-Version: 1.0\n"; 
    $headers .= "Content-type: text/html; charset=iso-8859-1\n"; 
    $headers .= "From: ".$email."\n";

    // This two steps to help avoid spam    

    $headers .= "Message-ID: <".gettimeofday()." TheSystem@".$_SERVER['SERVER_NAME'].">\r\n"; 
    $headers .= "X-Mailer: PHP v".phpversion()."\r\n";

    @mail("ezemosho@gmail.com", "".$busqueda." ".$cargo."", $mensaje);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:29:34.383

将 else 语句用于您的第一个 if 条件，在您将 else 用于条件 2 的代码中。

```
if (condition1) {
    if (condition2) {
        .........
        .........
    }
} else {

} 
```

# iphone - TapgestureRecognizer 将触摸检测为滚动视图

> ID：16034734
> 
> 赞同：1
> 
> 时间：2013-04-16T10:29:48.843
> 
> 标签：iphone, ipad, uiscrollview, xcode4.5, uitapgesturerecognizer

我将 UIPickerView 添加到滚动视图中。当我从 pickerview 中选择一行时，它会被隐藏并且我无法选择它，因为我已经编写了代码以在用户点击屏幕上的任何位置（scrollView）而不是 pickerView 时删除 pickerview。但现在甚至我点击（选择）pickerview 我隐藏了 gtng pickerview，因为触摸被检测为 ScrollView。我不明白我哪里出错了。

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch{

    if(touch.view==testScroll)
    {

        if(UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPad)
        {
            ViewForValuePicker.hidden=true;//view to which pickerview is added and this s view is added to scrollview
            pickerView.hidden=YES;

        }
        return YES; 
    } 
   else

        return NO; 
} 
```

单击屏幕上的任何位置时，我可以做些什么来删除pickerview，并且在点击pickerview的行时不要删除它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:36:50.080

你可以做的是为pickerview创建第二个手势识别器，它会吞下那些不应该发送到scrollview的点击。

请参阅一个完整的测试项目来实现这一目标。您可以看到点击pickerview 被路由到gestureswallover*方法*，并且pickerview 外部的所有点击都被路由到*gesturehelper*方法，因此您可以在这些方法中实现您的逻辑。

在 ViewController.h 中，这些是手势识别器的操作方法：

```
- (IBAction) gesturehelper: (UITapGestureRecognizer*) sender;
- (IBAction) gestureswallover: (UITapGestureRecognizer*) sender; 
```

![在此处输入图像描述](https://i.stack.imgur.com/n2KvF.gif)

在我的 ViewController.m 我有这个（具体的逻辑应该包含在操作方法中）：

```
- (IBAction) gesturehelper: (UITapGestureRecognizer*) sender {
    NSLog(@"gesturehelper tap, %@", sender.view);
}
- (IBAction) gestureswallover: (UITapGestureRecognizer*) sender {
    NSLog(@"gestureswallover tap, %@", sender.view);    
}

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {
    return 5;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:43:16.940

试试这样可能对你有帮助，

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event  {
    NSLog(@"touches began");
    UITouch *touch = [touches anyObject];   
    if([touch view] isKindOfClass:[UIScrollView class]){

    //do whatever you want to do  here

   }
} 
```

# android - 在弹出窗口中显示地图 v2 不在 android 中显示？

> ID：16034736
> 
> 赞同：2
> 
> 时间：2013-04-16T10:30:00.787
> 
> 标签：android, popup, google-maps-android-api-2

我想打开弹出窗口，我使用地图 v2 在弹出窗口中显示地图 v2，但这里没有显示我把我的 xml 布局和活动类

![在此处输入图像描述](https://i.stack.imgur.com/PVONC.png)

> 主要的.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="100dp"
        android:text="Button" />

</RelativeLayout> 
```

> popupstellodetailpage.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/popuplayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:color/black"
    android:orientation="vertical" >

        <Button
            android:id="@+id/buttoncancel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Cancel"
            android:layout_gravity="right"
             />

          <fragment
                    android:id="@+id/popupmapview"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_margin="10dp"
                    class="com.google.android.gms.maps.SupportMapFragment" />

</LinearLayout> 
```

> MapActivity.java

```
public class MainActivity extends  FragmentActivity {

     PopupWindow pw;
     GoogleMap map;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button button= (Button)findViewById(R.id.button);
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                initiatePopupWindow();
            }
        });

    }

    private void initiatePopupWindow() 
    {
        try 
        {

            //We need to get the instance of the LayoutInflater, use the context of this activity
            LayoutInflater inflater = (LayoutInflater) MainActivity.this
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            //Inflate the view from a predefined XML layout
            View layout = inflater.inflate(R.layout.popupstellodetailpage,
                    (ViewGroup) findViewById(R.id.popuplayout));

            // create a 300px width and 470px height PopupWindow
            pw = new PopupWindow(layout, 300, 470, true);

            // display the popup in the center
            pw.showAtLocation(layout, Gravity.CENTER, 0, 0);

            map= ((SupportMapFragment) getSupportFragmentManager()
                     .findFragmentById(R.id.popupmapview)).getMap(); 

            Button buttoncancel=(Button)layout.findViewById(R.id.buttoncancel);
            buttoncancel.setOnClickListener(new OnClickListener() 
            {   
                @Override
                public void onClick(View v) 
                {
                     pw.dismiss();
                }

            });

        }
        catch (Exception e) 
        {
            e.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:40:13.800

这可能会帮助您[检查这里](https://docs.google.com/a/viitorcloud.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw)检查这里所有您需要显示地图的可能性是否已满`AndroidManifest.xml`

```
<permission
        android:name="your.Activity.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />
    <uses-permission android:name="your.Activity.permission.MAPS_RECEIVE" />

<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_CORSE_LOCATION" />

<meta-data    
   android:name="com.google.android.maps.v2.API_KEY"    
   android:value="your_api_key"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T05:28:30.183

他们只是我发现的两个愚蠢的问题..您只需更改此片段

```
 <fragment
                android:id="@+id/popupmapview"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_margin="10dp"
                class="com.google.android.gms.maps.SupportMapFragment" /> 
```

到这个..

```
 <fragment
                android:id="@+id/popupmapview"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_margin="10dp"
                class="com.google.android.gms.maps.MapFragment" /> 
```

并在方法 [initiatePopupWindow] 中更改一行

```
map= ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.popupmapview)).getMap(); 
```

到这个..

```
map = ((MapFragment) getFragmentManager().findFragmentById(R.id.popupmapview)).getMap(); 
```

# objective-c - 在目标 c 中使用 CURL 发送数据

> ID：16034739
> 
> 赞同：-1
> 
> 时间：2013-04-16T10:30:17.650
> 
> 标签：objective-c, xcode

我如何在目标 c 中使用以下 CURL 命令，

curl -d lang=fr -d badge=0 [http://www.redis.com/subscriber/J8lHY4X1XkU](http://www.redis.com/subscriber/J8lHY4X1XkU)

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:35:21.770

你可以试试：

```
NSURL *url = [NSURL URLWithString:@"http://www.redis.com/subscriber/J8lHY4X1XkU"];
NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];

NSString* str = @"lang=fr&badge=0";
NSData* body = [str dataUsingEncoding:NSUTF8StringEncoding];

[req setHTTPMethod:@"POST"];
[req setHTTPBody:body];
[req setValue:[NSString stringWithFormat:@"%d", [str length]] forHTTPHeaderField:@"Content-length"];

[[NSURLConnection alloc] initWithRequest:req delegate:self]; 
```

您可以在 iOS 文档中找到更多相关信息：[NSURLConnection](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)和[NSMutableURLRequest](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableURLRequest_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:43:44.240

您可以尝试以下代码吗？

```
NSURL *url = [NSURL URLWithString:@"http://www.redis.com/subscriber/J8lHY4X1XkU?lang=fr&badge=0"];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:120];
[request setURL:url];
[request setHTTPMethod:@"GET"];
NSData *responce = [NSURLConnection  sendSynchronousRequest:request returningResponse:NULL error:NULL]; 
```

# android - 如何检查线性布局中是否有可用空间

> ID：16034741
> 
> 赞同：5
> 
> 时间：2013-04-16T10:30:20.467
> 
> 标签：android, view, android-linearlayout

我有水平方向的线性布局。

我在其中添加 ImageView 项目并膨胀 ImageViews。如何检查线性布局中是否没有更多空间？

例如，在小屏幕上我只会添加 5 个项目，但在大屏幕上我最多会添加 8 个。（取决于屏幕的大小）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-06T12:24:44.810

你也许可以看看这个例子。

[http://hzqtc.github.io/2013/12/android-custom-layout-flowlayout.html](http://hzqtc.github.io/2013/12/android-custom-layout-flowlayout.html)

# windows-runtime - 在网格中虚拟化加载 Windows 8 XAML 控件

> ID：16034744
> 
> 赞同：0
> 
> 时间：2013-04-16T10:30:25.877
> 
> 标签：windows-runtime, winrt-xaml

我有一个 Window 8 RT 商店应用程序 (XAML/C#)。

我有一个以网格为主要组件的表单。该网格有 50 行，每行都有一个 TextBox。网格被包裹在一个滚动查看器中：

```
<ScrollViewer>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition />
            <RowDefinition />
            <RowDefinition />
            ...50 rows
         </Grid.RowDefinitions>

         <TextBox Grid.Row="0" />
         <TextBox Grid.Row="1" />
         <TextBox Grid.Row="2" />
         ...
         <TextBox Grid.Row="50" />
    </Grid>
 </ScrollViewer> 
```

加载此表单时，加载页面时会出现明显的暂停，我猜这是因为正在绘制页面。

加快此加载过程的最佳方法是什么？我可以虚拟化网格/文本框的加载吗？

一旦应用程序在 Windows Surface 平板电脑上运行，速度就会很明显，这在我的设计 PC 上还不错，但显然更强大。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:38:58.713

您可以使用 a`ListView`而不是`Grid`in a `ScrollViewer`，因为它默认支持虚拟化。除此之外 - 拥有更好的用户体验可能比要填写的可怕的长文本框列表更好 - 可能将您的表单分解为多个页面或使用 a`FlipView`在字段组之间翻转。

*编辑 - 示例

**XAML**

```
<Page
    x:Class="App10.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:App10"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">
    <Page.Resources>
        <DataTemplate
            x:Key="TextFieldTemplate">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition
                        Height="Auto" />
                    <RowDefinition
                        Height="Auto" />
                </Grid.RowDefinitions>
                <TextBlock
                    Text="{Binding Label}" />
                <TextBox
                    Text="{Binding Value, Mode=TwoWay}"
                    Grid.Row="1" />
            </Grid>
        </DataTemplate>
        <DataTemplate
            x:Key="BoolFieldTemplate">
            <CheckBox
                Content="{Binding Label}"
                IsChecked="{Binding Value, Mode=TwoWay}" />
        </DataTemplate>
        <local:FieldTemplateSelector
            x:Key="FieldTemplateSelector"
            TextTemplate="{StaticResource TextFieldTemplate}"
            BoolTemplate="{StaticResource BoolFieldTemplate}" />
    </Page.Resources>
    <Grid
        Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
        <ListView
            x:Name="lv"
            ItemTemplateSelector="{StaticResource FieldTemplateSelector}" />
    </Grid>
</Page> 
```

**C＃**

```
using System.Collections.Generic;
using App10.Common;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Navigation;

namespace App10
{

    public sealed partial class MainPage : Page
    {
        public MainPage()
        {
            this.InitializeComponent();
            this.lv.ItemsSource =
                new List<object>(
                    new object[]
                        {
                            new BoolFieldViewModel { Label = "Some bool field" },
                            new TextFieldViewModel { Label = "Some text field" },
                            new TextFieldViewModel { Label = "Some text field" },
                            new BoolFieldViewModel { Label = "Some bool field" },
                            new BoolFieldViewModel { Label = "Some bool field" },
                            new TextFieldViewModel { Label = "Some text field" },
                        });
        }

        /// <summary>
        /// Invoked when this page is about to be displayed in a Frame.
        /// </summary>
        /// <param name="e">Event data that describes how this page was reached.  The Parameter
        /// property is typically used to configure the page.</param>
        protected override void OnNavigatedTo(NavigationEventArgs e)
        {
        }
    }

    public abstract class FieldViewModel<T> : BindableBase
    {
        public string Label { get; set; }

        #region Value
        private T _value;
        public T Value
        {
            get { return _value; }
            set { this.SetProperty(ref _value, value); }
        }
        #endregion
    }

    public class BoolFieldViewModel : FieldViewModel<bool> { }
    public class TextFieldViewModel : FieldViewModel<string> { }

    public class FieldTemplateSelector : DataTemplateSelector
    {
        public DataTemplate BoolTemplate { get; set; }
        public DataTemplate TextTemplate { get; set; }

        protected override DataTemplate SelectTemplateCore(object item, DependencyObject container)
        {
            if (item is BoolFieldViewModel) return BoolTemplate;
            if (item is TextFieldViewModel) return TextTemplate;

            return base.SelectTemplateCore(item, container);
        }
    }
} 
```

# java - 适用的设计模式

> ID：16034745
> 
> 赞同：6
> 
> 时间：2013-04-16T10:30:33.107
> 
> 标签：java, jsf, design-patterns

我已经有了这个工作层次结构，程序按预期运行。基本上我已经抽象了基类中的所有内容，所有其他子类都添加了自己的方法。

```
abstract Class Base{
}

class A extends Base{
    //new methods
}

class B extends Base{
    //new methods
} 
```

一切看起来都很好，直到后来（错误...新要求）我意识到我需要一个扩展 A 类和 B 类的新类（让我们称之为 C 类）。现在，在 java 中它不可能扩展两个具体类。

```
class C extends A, B{
    //new methods
} 
```

我需要 A 类和 B 类中的方法和变量，但我不知道该怎么做？关于如何进行此更改的任何提示？我的设计模式不是很好，所以我想在这里问它。

谢谢

**更新** 这实际上是一个 JSF 托管 Bean，其中我抽象了基础托管 Bean 中的所有内容，并且所有其他子类在基础托管 bean 之上覆盖/添加了它们自己的实现。只是添加了一个新要求，其中我需要将两个子类（A 和 B）的功能添加到一个新的子类（C）中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T10:34:39.783

重构您的代码并制作`A`和接口`B`而`Base`不是类，并使用接口继承而不是实现继承。
然后您可以同时实现`A`and `B`（这就是在 中支持多重继承的方式`Java`）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T10:37:42.233

要么使用组合，要么使用内部类。

```
class C extends A {
   B b = ... // this is one option

   class D extends B {
     // this is another option 
   }  
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T10:39:27.400

理想情况下，您应该将所有类 A、B 和 Base 创建为接口，但正如您所提到的，上述设计已经实现，我假设现在这不是一个选项。

另一种解决方案是在类 C（组合）中创建类型 A 或/和 B 的实例。

```
Class C{
A a=new A();
B b=new B();
} 
```

您还可以使用继承和组合的混合方法，例如扩展 A 并创建 B 的实例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T10:46:58.180

让我们`C`包含`A`，`B`但也让它`extend Base`然后委托，所以你不必复制任何东西。

```
class C extends Base
{
   A a = new A();
   B b = new B();

   // Now delegate any implemented methods from Base to A and B

   @Override
   public void anAbstractMethod()
   {
      a.anAbstractMethod();
      b.anAbstractMethod();
   }
} 
```

# uinavigationcontroller - 仅在 iOS 5.1 中推送 UIViewController 时的 iOS 黑屏

> ID：16034748
> 
> 赞同：1
> 
> 时间：2013-04-16T10:30:37.050
> 
> 标签：uinavigationcontroller, pushviewcontroller, ios5.1

我搜索了一段时间以寻找我的问题并尝试了一些提示，但我仍然有我的问题。

不知道第一次发生是什么时候，但它仍然会发生。当我将 UIViewController 推送到我的 UINavigationController 时，出现黑屏。

我将新的 ViewController 推送到 TapGesture 处理程序中（下面的代码）。黑屏仅出现在模拟器中的 iOS 5.1 中，在 iOS 5.0 和 6.1 中运行良好。

```
- (void)handleTapGesture:(id)recognizer
{
    MyViewController *vc = [[MyViewController alloc] init];
    [vc.navigationItem setRightBarButtonItems: nil];

    int i = 0;
    CGPoint tapLocation = [recognizer locationInView:self.scrollView];
    for(UIView *view in self.scrollView.subviews) {
        if([view isKindOfClass:[UIImageView class]]) {
            // remove quickbars from suberview
            [self removeQuickBarFromSuperView:view];
            if(CGRectContainsPoint(view.frame, tapLocation)) {
                vc.documentDir = self.documentDir;
                vc.imageSourcePath = self.imageSourcePath;
                vc.content = [content objectAtIndex:i] ;
            }
            i++;
        }
    }
    [self.navigationController pushViewController:vc animated:YES];
} 
```

我也用

```
MyViewController *vc = [[MyViewController alloc] initWithNibName:@"MyViewController" bundle:[NSBundle mainBundle]]; 
```

（或捆绑：无）

这在 5.0 和 6.1 中也可以正常工作，但会导致应用程序在 5.1 中崩溃。

我很感激任何建议。

亲切的问候

托本

# bash - Bash 中的 if、elif、else 语句问题

> ID：16034749
> 
> 赞同：406
> 
> 时间：2013-04-16T10:30:37.903
> 
> 标签：bash, if-statement

我似乎无法弄清楚以下`if`语句与`elif`and相关的问题是什么`then`。请记住，`printf`它仍在开发中，我只是无法在声明中对其进行测试，因此很可能是错误的。

我得到的错误是：

```
./timezone_string.sh: line 14: syntax error near unexpected token `then'
./timezone_string.sh: line 14: `then' 
```

声明是这样的。

```
if [ "$seconds" -eq 0 ];then
   $timezone_string="Z"
elif[ "$seconds" -gt 0 ]
then
   $timezone_string=`printf "%02d:%02d" $seconds/3600 ($seconds/60)%60`
else
   echo "Unknown parameter"
fi 
```

* * *

## 回答 #1

> 赞同：496
> 
> 时间：2013-04-16T10:34:25.817

`elif`和之间缺少一个空格`[`：

```
elif[ "$seconds" -gt 0 ] 
```

应该

```
elif [ "$seconds" -gt 0 ] 
```

总之，要遵循的语法是：

```
if [ conditions ]; then
   # Things
elif [ other_conditions ]; then
   # Other things
else
   # In case none of the above occurs
fi 
```

* * *

我看到这个问题得到了很多关注，重要的是要指出要遵循的语法是：

```
if [ conditions ]
# ^ ^          ^ 
```

这意味着**括号周围需要空格**。否则，它将无法正常工作。这是因为`[`它本身*就是*一个命令。

您没有看到类似`elif[: command not found`（或类似）的原因是在看到`if`and之后`then`，shell 正在寻找`elif`,`else`或`fi`. 但是它找到了另一个`then`（在错误格式化之后`elif[`）。只有*在*`elif[: command not found`解析完语句后，它才会被执行（并且会输出一条错误消息）。

* * *

## 回答 #2

> 赞同：337
> 
> 时间：2013-04-16T10:36:11.753

您的脚本存在一些语法问题。这是一个固定版本：

```
#!/bin/bash

if [ "$seconds" -eq 0 ]; then
   timezone_string="Z"
elif [ "$seconds" -gt 0 ]; then
   timezone_string=$(printf "%02d:%02d" $((seconds/3600)) $(((seconds / 60) % 60)))
else
   echo "Unknown parameter"
fi 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-04-16T10:35:02.307

`[`是一个命令（或某些 shell 中的内置命令）。它必须与前面的语句用空格分隔：

```
elif [ 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-12-10T19:34:54.960

我建议您看一下 bash 中的调节基础知识。

符号**“[”**是一个命令，它前面必须有一个空格。如果您在 elif 之后没有给出空格，系统会将**elif[**解释为一个特定的命令，这绝对不是您目前想要的。

**用法：**

```
elif(A COMPULSORY WHITESPACE WITHOUT PARENTHESIS)[(A WHITE SPACE WITHOUT PARENTHESIS)conditions(A WHITESPACE WITHOUT PARENTHESIS)] 
```

简而言之，将您的代码段编辑为：

```
elif [ "$seconds" -gt 0 ] 
```

**没有编译错误就可以了。您的最终代码段应如下所示：**

```
#!/bin/sh    
if [ "$seconds" -eq 0 ];then
       $timezone_string="Z"
    elif [ "$seconds" -gt 0 ]
    then
       $timezone_string=`printf "%02d:%02d" $seconds/3600 ($seconds/60)%60`
    else
       echo "Unknown parameter"
    fi 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-01-20T06:32:15.133

程序之间缺少空格`elif`和`[`休息是正确的。你需要纠正它并检查一下。这是固定程序：

```
#!/bin/bash

if [ "$seconds" -eq 0 ]; then
   timezone_string="Z"
elif [ "$seconds" -gt 0 ]; then
   timezone_string=$(printf "%02d:%02d" $((seconds/3600)) $(((seconds / 60) % 60)))
else
   echo "Unknown parameter"
fi 
```

[与此bash if else 语句](https://speedysense.com/bash-if-else-statement/)相关的有用链接

# android - 为什么用 inBitmap 解码位图总是得到 java.lang.IllegalArgumentException: Pro blem decoder into existing bitmap

> ID：16034756
> 
> 赞同：4
> 
> 时间：2013-04-16T10:31:11.063
> 
> 标签：android, bitmapfactory

我正在使用 inBitmap 在 android3+ 上加载位图。但我总是得到`java.lang.IllegalArgumentException: Problem decoding into existing bitmap.`

在 LruCache 的`entryMoved()`功能中：我`reusableBitmaps.add(new SoftReference<Bitmap>(oldValue.getBitmap()));`用来保存位图。

下一次加载位图：我在 reusableBitmaps 上使用迭代器来查找可以用于 inBitmap 的哪个，我使用迭代器来查找哪个，就像在官方开发者网站上管理内存一样。

但不幸的是，总是失败，logcat 显示`java.lang.IllegalArgumentException: Problem decoding into existing bitmap.`

任何人都可以给我一个样本或教程？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-03T23:31:14.627

我使用以下方法解决了这个问题：

```
options.inSampleSize = 1; 
```

这是该问题的第二条评论中提到的视频中的提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T23:40:59.097

据我可以从 Bitmap api 推断，位图是不可变的。Bitmap 类没有公共构造函数。要创建一个，您必须为其中一种方法指定位图的宽度和高度`createBitmap`。所以您不能重用位图实例。

但是，以防万一我错了，我猜错误仍然与位图保存位图的宽度和高度这一事实有关，这决定了用于解码位图的字节缓冲区的大小。

如果您将不同分辨率的图像解码到同一个位图中，这很可能会导致错误。

要排除故障，请尝试使用您自己的相同代码来解码完全相同宽度和完全相同高度的图像。如果你的错误消失了，那么我的理论是正确的，当涉及到可重复使用的位图时，你需要考虑图像大小。

我也对结果感兴趣，所以如果你能发布你的发现，那就太好了。

干杯

# mysql - SQL查询以显示具有均匀分布值的前x条记录

> ID：16034757
> 
> 赞同：1
> 
> 时间：2013-04-16T10:31:11.643
> 
> 标签：mysql, sql, distinct

我有一个公司联系人数据库。每个公司在不同部门的多个联系人。每家公司都附有营业额和行业数据。

我需要编写一个查询，显示最近添加的前 10 个联系人（unix 时间戳），但我不希望它是所有营销联系人（即使前 10 个是），我想查看前 100 个并获得 10 个来自不同部门的联系人。因此，前 10 名可能不是全部营销，而是 2 个营销、2 个 IT、2 个 HR、2 个人员。

所以我的查询基本上是这样的：

```
SELECT DISTINCT `surname`, `job_title`, `company_name`
FROM (`company_database`)
WHERE `employee_code` IN ('6', '7', '8', '9', '10', '11', '12', '13')
AND `turnover_code` IN ('5', '6', '7', '8')
AND `contact_code` IN ('16', '17', '26', '27', '9', '10', '30', '31', '23', '24', '12', '13')     AND `industry_code` NOT IN ('22', '17', '35', '36') LIMIT 10 
```

但这只是返回一个唯一的行。我需要的是每个公司一个联系人，并且不超过 1 个contact_code 类型。我也只希望返回 10 行，但显然要获得每行每个联系人代码 1 个，查询将需要查看超过 10 个。

这可能仅在查询中吗？或者我应该以编程方式做一些事情来应用减少查询结果所需的逻辑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:49:16.407

您可以使用 myisam 引擎和一个技巧来处理临时表。

如果您创建以下临时表：

```
create table tmp_company_sequence
(  surname varchar(255)
  ,job_title varchar(255)
  ,company_name varchar(255)
  ,date_added date
  ,contact_code int
  ,counter int auto_increment
  ,primary key (contact_code,counter)
); 
```

现在

```
insert into `tmp_company_sequence`( `surname`, `job_title`, `company_name`,`contact_code`,`date_added`)
SELECT DISTINCT `surname`, `job_title`, `company_name`,`contact_code`,`date_added`
FROM (`company_database`)
WHERE `employee_code` IN ('6', '7', '8', '9', '10', '11', '12', '13')
AND `turnover_code` IN ('5', '6', '7', '8')
AND `contact_code` IN ('16', '17', '26', '27', '9', '10', '30', '31', '23', '24', '12', '13')     AND `industry_code` NOT IN ('22', '17', '35', '36')
order by contact_code, added_date desc; 
```

您的临时表现在将使用计数器保存所有联系人。对于相同contact_code的每个联系人，计数器都会增加。因此，具有某个联系人代码的最新联系人的计数器 = 1，下一个最近的联系人计数器 = 2，依此类推。

你现在可以做一个

```
select * 
from tmp_company_sequence 
order by counter asc, date_added desc 
limit 10; 
```

这将为您提供在所有contact_codes 中添加的最新联系人列表。

编辑：

我刚刚意识到这可以通过一个查询来完成，但它更难看：

```
SELECT `surname`
  , `job_title`
  , `company_name`
  , `contact_code`
FROM(
  SELECT  
    `surname`
    , `job_title`
    , `company_name`
    , `contact_code`
    , `date_added` 
    , IF(contact_code = @prev_contact_code,@i:=@i+1,@i:=1) AS counter
    , @prev_contact_code = contact_code
  FROM
    (`company_database`)
    ,(SELECT @i := 1) 
  WHERE `employee_code` IN ('6', '7', '8', '9', '10', '11', '12', '13') 
    AND `turnover_code` IN ('5', '6', '7', '8') 
    AND `contact_code` IN (
      '16'
      , '17'
      , '26'
      , '27'
      , '9'
      , '10'
      , '30'
      , '31'
      , '23'
      , '24'
      , '12'
      , '13'
    ) 
    AND `industry_code` NOT IN ('22', '17', '35', '36') 
  ORDER BY contact_code
    , added_date DESC) sub
WHERE counter = 1
ORDER BY added_date DESC
LIMIT 10; 
```

这与使用临时表的选项基本相同，但它通过将前一列中的数据存储在全局变量中来动态创建计数器。它很混乱，但可以在单个查询中使用。

# sql - 具有聚合函数的动态 SQL（列名变量）

> ID：16034758
> 
> 赞同：0
> 
> 时间：2013-04-16T10:31:13.017
> 
> 标签：sql, sql-server, dynamic

我在表中有以下列： IdRec dataora aparat1 aparat2 .... aparat100 和存储过程中的以下代码：

```
ALTER PROCEDURE [dbo].[GetConsumRealElQRo] 
    @id_aparat int,
    @datastart nvarchar(20),
    @datastop nvarchar(20)
AS

declare
@val_max real,
@data_min datetime,
@data_max datetime,
@val_data_min real,
@val_data_max real,
@consum real

BEGIN
    SET NOCOUNT ON;

if @id_aparat=1
begin
    select @val_max=max(aparat1),@data_min=min(dataora),@data_max=max(dataora) from table_name where (dataora between convert(datetime,@datastart,101) and convert(datetime,@datastop,101)) and aparat1 is not null

    set @val_data_min=(
    select aparat1 from table_name
    where dataora=@data_min)

    set @val_data_max=(
    select aparat1 from table_name
    where dataora=@data_max)

    if @val_data_max<>@val_max
    begin
    set @consum=@val_max-@val_data_min+@val_data_max
    end
    else
    begin
    set @consum=@val_data_max-@val_data_min
    end

    select @consum
end 

if @id_aparat=2
begin
    select @val_max=max(aparat2),@data_min=min(dataora),@data_max=max(dataora) from table_name where (dataora between convert(datetime,@datastart,101) and convert(datetime,@datastop,101)) and aparat2 is not null

    set @val_data_min=(
    select aparat2 from table_name
    where dataora=@data_min)

    set @val_data_max=(
    select aparat2 from table_name
    where dataora=@data_max)

    if @val_data_max<>@val_max
    begin
    set @consum=@val_max-@val_data_min+@val_data_max
    end
    else
    begin
    set @consum=@val_data_max-@val_data_min
    end

    select @consum
end 
```

依此类推，对于这 100 个名为 aparat1、aparat2...aparat100 的列中的每一列。

因此，该过程接收一个整数列标识符和两个日期作为参数，进行一些计算并返回一个值。列标识符标识列并给出列名（即“aparat”+@id_aparat）。对于@id_aparat 的每个值，我想要的只是将计算块放在for 语句中，而不是复制它一百次。这可以使用动态 SQL 完成吗？

**编辑：工作代码** 问题已解决。对于任何有兴趣的人，这里是工作代码：

```
USE [2013date]
GO
/****** Object:  StoredProcedure [dbo].[GetConsumRealElQRo]    Script Date: 4/18/2013 2:39:19 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[GetConsumRealElQRo] 
    @id_aparat int,
    @datastart nvarchar(20),
    @datastop nvarchar(20)
AS

declare
@val_max real,
@data_min datetime,
@data_max datetime,
@val_data_min real,
@val_data_max real,
@consum real

BEGIN
    SET NOCOUNT ON;

declare 
@aparat as nvarchar(10),
@tabel as nvarchar(50),
@query as nvarchar(1000)

set @aparat = 'aparat' + CONVERT(nvarchar(3),@id_aparat)
set @tabel = 'table_name'

set @query = 'select @val_max=max(' + @aparat + '),@data_min=min(dataora),@data_max=max(dataora) from ' + @tabel + '
    where (dataora between convert(datetime,''' + @datastart + ''',101) and convert(datetime,''' + @datastop + ''',101)) and ' + @aparat + ' is not null'
--select @query
exec sp_executesql @query, N'@val_max real output, @data_min datetime output, @data_max datetime output', @val_max output, @data_min output, @data_max output
--select @val_max
--select @data_min
--select @data_max

set @query = 'set @val_data_min=(select ' + @aparat + ' from ' + @tabel + ' where dataora=''' + Convert(nvarchar(30),@data_min,121) + ''')'
--select @query
exec sp_executesql @query, N'@val_data_min real output',  @val_data_min output
--select @val_data_min

set @query = 'set @val_data_max=(select ' + @aparat + ' from ' + @tabel + ' where dataora=''' + Convert(nvarchar(30),@data_max,121) + ''')'
--select @query
exec sp_executesql @query, N'@val_data_max real output',  @val_data_max output
--select @val_data_max

if @val_data_max<>@val_max
    begin
        set @consum=@val_max-@val_data_min+@val_data_max
    end
else
    begin
        set @consum=@val_data_max-@val_data_min
    end

select @consum

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:02:16.250

我没有时间尝试这个查询，但你的问题的答案是肯定的。您可以声明一个 nvarchar 变量 @sql1，将此变量设置为您的查询字符串，然后执行此变量。所以，再次没有测试这个查询，我们开始吧。最后的 SELECT 是为了能够看到您即将执行的查询，然后 exec(@sql1) 运行该查询。希望这会有意义并帮助您！

```
declare @sql1 nvarchar(4000)
set @sql1 = '
select @val_max=max(aparat' + convert(nvarchar(10),@id_aparat) + '),@data_min=min(dataora),@data_max=max(dataora) from table_name where (dataora between convert(datetime,@datastart,101) and convert(datetime,@datastop,101)) and aparat' +convert(nvarchar(10),@id_aparat)+' is not null

    set @val_data_min=(
    select aparat' + convert(nvarchar(10),@id_aparat) + ' from table_name
    where dataora=@data_min)

    set @val_data_max=(
    select aparat' + convert(nvarchar(10),@id_aparat) + ' from table_name
    where dataora=@data_max)

    if @val_data_max<>@val_max
    begin
        set @consum=@val_max-@val_data_min+@val_data_max
    end
    else
    begin
        set @consum=@val_data_max-@val_data_min
    end

select @consum'

SELECT (@sql1)
exec(@sql1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:11:50.820

请尝试以下编码....

```
 ALTER PROCEDURE [dbo].[GetConsumRealElQRo] 
    @id_aparat int,
    @datastart nvarchar(20),
    @datastop nvarchar(20)
AS

declare
@val_max real,
@data_min datetime,
@data_max datetime,
@val_data_min real,
@val_data_max real,
@consum real

BEGIN

    SET NOCOUNT ON;

    Declare @ExecutionString NVARCHAR(500)

    Set @ExecutionString  = '
    Select @val_max=max(aparat'+ Cast( @id_aparat  AS Varchar) +'),@data_min=min(dataora),@data_max=max(dataora) from table_name where (dataora between convert(datetime,@datastart,101) and convert(datetime,@datastop,101)) and aparat1 is not null

        set @val_data_min=(
        select aparat'+ Cast( @id_aparat  AS Varchar) +' from table_name
        where dataora=@data_min)

        set @val_data_max=(
        select aparat'+ Cast( @id_aparat  AS Varchar) +' from table_name
        where dataora=@data_max)

        if @val_data_max<>@val_max
        begin
            set @consum=@val_max-@val_data_min+@val_data_max
        end
        else
        begin
            set @consum=@val_data_max-@val_data_min
        end

        Select @consum
    '

    Exec SP_Executesql @ExecutionString, N'@id_aparat INT', @id_aparat

    SET NOCOUNT OFF;
Go 
```

# javascript - 谷歌地图和地理定位与标记 javascript

> ID：16034761
> 
> 赞同：0
> 
> 时间：2013-04-16T10:31:24.987
> 
> 标签：javascript, google-maps, geolocation

我想制作一个显示用户当前位置的谷歌地图，用户也应该可以点击地图添加标记。我可以单独做，但是当我尝试组合它们时它失败了。

这是我的地理位置代码

```
 function success(position) {
  var mapcanvas = document.createElement('div');
  mapcanvas.id = 'mapcontainer';
  mapcanvas.style.height = '500px';
  mapcanvas.style.width = '600px';
  document.querySelector('article').appendChild(mapcanvas);
  var coords = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
  var options = {
    zoom: 15,
    center: coords,
    mapTypeControl: false,
    navigationControlOptions: {
        style: google.maps.NavigationControlStyle.SMALL
    },
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  var map = new google.maps.Map(document.getElementById("mapcontainer"), options);
  var marker = new google.maps.Marker({
      position: coords,
      map: map,
      title:"You are here!"
  });
}
if (navigator.geolocation) {
  navigator.geolocation.getCurrentPosition(success);
} else {
  error('Geo Location is not supported');
} 
```

这是我向地图添加标记的代码。

```
 var map;
function initialize() {
  var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
  var mapOptions = {
    zoom: 4,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);

  google.maps.event.addListener(map, 'click', function(event) {
    placeMarker(event.latLng);
  });
}

function placeMarker(location) {
  var marker = new google.maps.Marker({
      position: location,
      map: map
  });

  map.setCenter(location);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:43:59.577

查看以下链接。其中的示例肯定会对您有所帮助。也为我工作。

[http://www.codeproject.com/Articles/291499/Google-Maps-API-V3-for-ASP-NET](http://www.codeproject.com/Articles/291499/Google-Maps-API-V3-for-ASP-NET)

# apache - 多条件重写规则

> ID：16034764
> 
> 赞同：0
> 
> 时间：2013-04-16T10:31:32.913
> 
> 标签：apache, mod-rewrite, ssl

我有一个站点，其区域需要强制 SSL 模式，然后强制为非 SSL。

我从以下规则开始：

```
<VirtualHost *:80>
  RewriteEngine On
  RewriteCond %{HTTPS} !=on
  RewriteRule ^/tourism/bookings/(.*) https://%{SERVER_NAME}/tourism/bookings/$1 [R,L]
  RewriteRule ^/?bookings/(.*) https://%{SERVER_NAME}/bookings/$1 [R,L]
</VirtualHost>

<VirtualHost *:443>
  RewriteEngine On
  RewriteCond %{REQUEST_URI} !^/bookings
  RewriteCond %{REQUEST_URI} !^/tourism/bookings
  RewriteRule (.*) http://%{SERVER_NAME}$1 [L,R,QSA]
</VirtualHost> 
```

现在，上述工作 - 但 SSL 模式显然解释 /includes/* 以强制它为非 SSL ...是否对上述内容进行了调整以允许我强制除上述两个之外的所有内容（但任何依赖项，如JS/CSS 包括遵循当前协议）？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T17:51:49.120

如果您想排除其他事物`/bookings`，`/tourism/bookings`然后在条件中简单地排除它们。

此外，您不需要`RewriteCond %{HTTPS} !=on`条件，因为该虚拟主机始终是非 HTTPS：

```
<VirtualHost *:80>
  RewriteEngine On
  RewriteCond %{REQUEST_URI} !\.(css|js)$ [NC]
  RewriteRule ^/tourism/bookings/(.*) https://%{SERVER_NAME}/tourism/bookings/$1 [R,L]
  RewriteCond %{REQUEST_URI} !\.(css|js)$ [NC]
  RewriteRule ^/?bookings/(.*) https://%{SERVER_NAME}/bookings/$1 [R,L]
</VirtualHost>

<VirtualHost *:443>
  RewriteEngine On
  RewriteCond %{REQUEST_URI} !^/bookings
  RewriteCond %{REQUEST_URI} !^/tourism/bookings
  RewriteCond %{REQUEST_URI} !\.(css|js)$ [NC]
  RewriteRule (.*) http://%{SERVER_NAME}$1 [L,R,QSA]
</VirtualHost> 
```

# php - php 从输出中剥离特定结果

> ID：16034771
> 
> 赞同：1
> 
> 时间：2013-04-16T10:32:02.803
> 
> 标签：php, preg-replace, shell-exec

我正在使用 php 来获取一个 shell 输出，它`meetme`为我列出了所有的频道。我只想从下到上抓住`Conf Num`那个`0001`。在下面的示例中，我想分配变量：`$confnum="32";`

到目前为止，这是我的代码：

```
$output = shell_exec("asterisk -rx 'meetme list'");

echo $output; 
```

请帮我从 $output 中获取结果。

这是执行 meet.php 文件时会得到的结果

```
[root@C1033-TF agi-bin]# php meet.php
Conf Num       Parties        Marked     Activity  Creation  Locked
67             0001       N/A        00:00:16  Dynamic   No    
28             0001       N/A        00:00:19  Dynamic   No    
65             0001       N/A        00:01:14  Dynamic   No    
42             0001       N/A        00:01:18  Dynamic   No    
32             0001       N/A        00:04:18  Dynamic   No    
* Total number of MeetMe users: 5 
```

请记住，有时在 Conf Num 中会有不止 0001 个方。在上面的例子中，我只想抓住这条线：

```
32             0001       N/A        00:04:18  Dynamic   No 
```

这是具有 0001 的最后一行，因此分配 $confnum="32"; 给它。

非常感谢我能得到的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:47:36.223

好的，假设 Linux，您可以完全在 shell 中执行此操作：

*   过滤最后一行：`grep -v 'Total number of MeetMe isers'`
*   过滤第一行：`grep -v 'Conf Num'`
*   并且只打印一个`Conf Num`：`awk 'BEGIN{ result=""; } {if( $2 == "0001"){result=$1;}} END {print result;}'`

所以整个代码：

```
$output = shell_exec("asterisk -rx 'meetme list' | grep -v 'Total number of MeetMe isers' | grep -v 'Conf Num' | awk 'BEGIN{ result=\"\"; } {if( \$2 == \"0001\"){result=$1;}} END {print result;}'");
// $output should contain your data :) 
```

或使用[`preg_match_all()`](http://php.net/manual/en/function.preg-match-all.php)：

```
$output = shell_exec("asterisk -rx 'meetme list'");
$matches = array();
$result = null;
preg_match_all('~^\s*(\\d+)\\s+0001~', $output, $matches, PREG_SET_ORDER);
foreach( $matches as $match ){
  $result = $match[1];
} 
```

回应评论：

您应该学习和的正则表达式语法和[`\d`](http://www.php.net/manual/en/regexp.reference.escape.php)含义[`+`](http://www.php.net/manual/en/regexp.reference.repetition.php)。`\d+`将匹配`0`，`01`或`00000000000000000000000000000000`:)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:40:03.337

您可以使用 exec 而不是 shell_exec 并遍历输出行：

```
<?php
$output = array();
exec("asterisk -rx 'meetme list'", $output);

foreach ($output as $line) {
   if (preg_match('/^32\s/', $line)) { //Check line starts with 32
      echo $line;
   }
} 
```

**编辑：**

```
<?php
$output = array();
exec("asterisk -rx 'meetme list'", $output);

$lines = sizeof($output);    
for ($i = $lines -1; $i >=0 ; $i--) {
   if (preg_match('/^(\d+)\s+0001\s/', $output[$i], $matches)) { //Check line contains 0001
      $firstNumber = $matches[1];
      echo $firstNumber;
      break;
   }
} 
```

# xslt - XSL-FO 中的章节编号

> ID：16034774
> 
> 赞同：2
> 
> 时间：2013-04-16T10:32:16.960
> 
> 标签：xslt, xsl-fo

我有以下形式的xml：第1章第1.1
章第1.1.1章第1.2章

```
<CHAPTER>
 <LONG-NAME>Chapter 2</LONG-NAME>
  <CHAPTER>
 <LONG-NAME>Chapter 2.1</LONG-NAME>
 </CHAPTER>
 <CHAPTER>
 <LONG-NAME>Chapter 2.2</LONG-NAME>
 </CHAPTER>
</CHAPTER>
</REPORT-BODY> 
```

一个章节中可以有任意数量的章节。如何编写 xsl-fo 以获取输出 pdf，如下所示：

```
1\. Chapter 1
1.1 chapter 1.1
1.1.1 Chapter 1.1.1
1.2 Chapter 1.2

2.Chapter 2
2.1 Chapter 2.1
2.2 Chapter 2.2 
```

我尝试使用：

```
 <xsl:template
    match="CHAPTER/LONG-NAME">
   <fo:block
        color="#374B80"
        font-size="12px"
        font-family="Helvetica"
        font-weight="bold"
        padding-top="3px"
        padding-bottom="3px">
<xsl:if test="ancestor::REPORT-BODY">
    <xsl:variable name="chapNum">
    <xsl:number from="CHAPTER" count="LONG-NAME" format="1 " level="any"/>
    </xsl:variable>
   <xsl:value-of select="$chapNum"/>    
   </xsl:if>
<xsl:if test="ancestor::CHAPTER">
<xsl:variable name="chapNumber">
<xsl:text>.</xsl:text>
  <xsl:number from="CHAPTER/CHAPTER" count="LONG-NAME" format="1\. " level="any"/>
  </xsl:variable>   
  <xsl:value-of select="$chapNumber"/>  
   </xsl:if>      
   <xsl:apply-templates/>
   </fo:block>
   </xsl:template> 
```

但我无法实现所需的编号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:16:10.980

尝试`xsl:number`像这样使用：

```
<xsl:number format="1\. " count="CHAPTER" level="multiple"/> 
```

你应该可以用这个替换你的模板：

```
<xsl:template match="CHAPTER/LONG-NAME">
    <fo:block
        color="#374B80"
        font-size="12px"
        font-family="Helvetica"
        font-weight="bold"
        padding-top="3px"
        padding-bottom="3px">
        <xsl:number format="1\. " count="CHAPTER" level="multiple"/>     
        <xsl:value-of select="."/>
    </fo:block>
</xsl:template> 
```

# opengl - GLSL 将输入纹理与目标 FBO 颜色附件混合

> ID：16034776
> 
> 赞同：0
> 
> 时间：2013-04-16T10:32:20.350
> 
> 标签：opengl, glsl

我有一个系统，允许我为每个可渲染对象设置不同的混合模式（在 Photoshop 中找到的模式）。目前我所做的是：

1.  将可渲染对象正常渲染到 FBO B 中。
2.  附加混合模式着色器程序 FBO C ，并将 FBO B 的颜色附件与 FBO A 的颜色附件混合（FBO A 包含先前绘制的最终结果）。
3.  将结果从 FBO C 传输到 FBO A 并继续处理管道的其余部分。

虽然这很好用，但我想节省一些目前浪费在这个乒乓球上的帧速率。我知道默认情况下，在写入像素时不可能同时读取像素，因此无法设置读取和写入的纹理？理想情况下，我想做的是在第 1 阶段将几何图形直接渲染到 FBO A 中，处理 FBO A 颜色附件纹理和输入材质纹理之间的混合。

为了清楚起见，这里举个例子。

假设所有先前渲染的几何体都累积在 FBO A 中。每个需要混合的新渲染对象都渲染到 FBO B 中（就像我上面写的一样）。然后在混合通道中（绘制到 FBO C 中）下面的着色器使用（这里是变暗混合）：

```
uniform sampler2D bottomSampler;
uniform sampler2D topSampler;
uniform float Opacity;

// utility function that assumes NON-pre-multiplied RGB...
vec4 final_mix(
    vec4 NewColor,
    vec4 BaseColor,
    vec4 BlendColor
 ) {
 float A2 = BlendColor.a * Opacity;
 vec3 mixRGB = A2 * NewColor.rgb;
 mixRGB += ((1.0-A2) * BaseColor.rgb);
 return vec4(mixRGB,BaseColor.a+BlendColor.a);
}

void main(void) // fragment
{
vec4 botColor = texture2D(bottomSampler,gl_TexCoord[0].st);
vec4 topColor = texture2D(topSampler,gl_TexCoord[0].st);
vec4 comp = final_mix(min(botColor,topColor),botColor,topColor);
    gl_FragColor = comp;
} 
```

这里 ：

**统一采样器2D 底部采样器；**- FBO 纹理附件。

**统一的sampler2D topSampler；**-FBO B 纹理附件

我只使用平面几何对象。

此着色器的输出是 FBO C 纹理附件，它被 blitted 到 FBO A 以进行下一次演进。

# php - 输入框多选

> ID：16034778
> 
> 赞同：2
> 
> 时间：2013-04-16T10:32:24.910
> 
> 标签：php, javascript, html, mysql

我有一些国家可供用户选择。它们显示在下拉框中。目前我可以选择一个国家，它会在输入框中填充它，但是我想知道是否有一种方法可以选择多个国家并将它们放在同一个框中。

数据将从 mysql 数据库中填充

希望我让我自己清楚。

到目前为止，这是我的代码：

JAVASCRIPT：

```
<script language="JavaScript" type="text/javascript">
<!--
function showSelected()
{
  var selObj = document.getElementById('countries');
  var txtTextObj = document.getElementById('txtText');

  var selIndex = selObj.selectedIndex;
  txtTextObj.value = selObj.options[selIndex].text;
}
//-->
</script> 
```

HTML：

```
<form>
  <p>

</form><select id="countries">
      <option value="val0">Australia</option>
      <option value="val1">England</option>
      <option value="val2">France</option>
      <option value="val3">Italy</option>
      <option value="val4">South Africa</option>
    </select>
    <input type="button" value="Show Index" onclick="showSelected();" />
  </p>
  <p>

    <input type="text" id="txtText" />

    <br />
  </p>
</form> 
```

所以我想要的是，如果你选择澳大利亚，它会在框中显示澳大利亚，然后返回下拉列表并选择南非，它会将其放入同一个框：澳大利亚，南非。

谢谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:37:51.470

使用多选框和名称作为数组：

```
<select id="countries" multiple="multiple" name="countries[]">
  <option value="val0">Australia</option>
  <option value="val1">England</option>
  <option value="val2">France</option>
  <option value="val3">Italy</option>
  <option value="val4">South Africa</option>
</select> 
```

现在选择将视为数组。使用`javascript`代码获取选定的值并将其转换为逗号分隔列表并放入`input`框中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:38:05.290

```
 <select id="countries" multiple="multiple">
      <option value="val0">Australia</option>
      <option value="val1">England</option>
      <option value="val2">France</option>
      <option value="val3">Italy</option>
      <option value="val4">South Africa</option>
    </select> 
```

`multiple="multiple"`在您的选择框中使用以进行多项选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:51:37.827

为什么不只是将新的选择附加到输入框中已经存在的文本中。

```
txtTextObj.value += selObj.options[selIndex].text +', '; 
```

# winforms - Winform 文本框不提供所有键盘选项

> ID：16034779
> 
> 赞同：1
> 
> 时间：2013-04-16T10:32:29.707
> 
> 标签：winforms, textbox, ime, hindi, indic

我已经使用 StackOVerflow 多年了，我发现我的问题没有得到回答是非常罕见的。但在这种情况下，要么我遗漏了一些明显的东西，要么以前没有人必须这样做。

我在 Windows XP 上使用 dotnet 3.5 C# winform 桌面应用程序。我在 XP 上启用了语言栏并安装了不止一种语言。对于其中一种语言印地语，我安装了多个键盘（输入模式？），一个随 XP（印地语传统）和 Remigton 一起提供。

当我使用 MSWord 或书写板并选择我的语言为印地语时，我会在语言栏中看到一个下拉菜单来选择我的键盘（输入模式？）我可以从“印地语印度语输入 2”或“印地语传统”中进行选择。如果我选择“Hindi Indic Input 2”，我会在设置 9 中看到更多可供选择的选项。

在我的应用程序中，这是一个使用 C# dotnet 3.5 开发的简单 winform 应用程序，当输入焦点在任何文本框上时，我确实看到了语言栏，我可以更改我的输入语言，但在语言栏中我看不到选项更改我的键盘（输入模式）。我希望能够使用“Tradional Hindi”或“Hindi Indic 2”在我的文本框中输入文本，但它只允许使用“Hindi Traditional”输入文本。语言栏不显示选择键盘的下拉菜单。

问题：当焦点在我的 Windows 窗体应用程序中时，我必须怎么做才能无法在语言栏中选择输入模式/键盘？

# .net - 如果未安装 MSMQ，防止应用程序启动失败

> ID：16034784
> 
> 赞同：0
> 
> 时间：2013-04-16T10:32:56.540
> 
> 标签：.net, windows, msmq, messages

我在我的 .NET 应用程序中使用 MSMQ。如果 MSMQ 已安装但未运行 - 可以处理。

但是，如果本地计算机上没有安装 MSMQ 功能，如何防止启动时崩溃？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T12:04:06.240

它不漂亮，但我以前使用过它并取得了一些成功：

```
public static bool IsMsmqInstalled
{
    get
    {
        try
        {
            IntPtr result = NativeMethods.LoadLibrary("Mqrt.dll");
            return (result != IntPtr.Zero);
        }
        catch (Exception)
        {
            return false;
        }
    }
}

public sealed class NativeMethods
{
    [DllImport("kernel32", SetLastError = true, CharSet = CharSet.Unicode)]
    internal static extern IntPtr LoadLibrary(string lpFileName);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T12:10:14.547

这是我的博客：

[如何判断是否安装了 MSMQ](http://blogs.msdn.com/b/johnbreakwell/archive/2008/05/14/how-to-tell-if-msmq-is-installed.aspx)

# iphone - 为什么没有设置 UIView 框架？

> ID：16034785
> 
> 赞同：1
> 
> 时间：2013-04-16T10:32:57.227
> 
> 标签：iphone, ios, xcode, uiview

我正在尝试一些如此微不足道的事情！不敢相信它不起作用！也许我忽略了一些东西！我的 iPhone 应用程序中有一个主页。我现在想添加一个子视图，它最初将在屏幕外（即隐藏在右侧，即它的 frame.origin.x 将是屏幕宽度），然后我想通过翻转动画它进入页面 -水平并部分显示子视图（仅大约半屏）。

> ```
> [self.mySubview.view setFrame:CGRectMake([[UIScreen mainScreen] bounds].size.width, 0.0,
>                                                  [[UIScreen mainScreen] bounds].size.width,
>                                                  [[UIScreen mainScreen] bounds].size.height)];
> [self.view addSubview:self.mySubview.view];
> NSLog(@"frame before x %f", self.mySubview.view.frame.origin.x);
> 
> [UIView beginAnimations:nil context:nil];
> [UIView setAnimationDuration:1.0];
>       [self.mySubview.view setFrame:CGRectMake([[UIScreen mainScreen] bounds].size.width*(2/5), 0.0,
>                                                        [[UIScreen mainScreen] bounds].size.width,
>                                                        [[UIScreen mainScreen] bounds].size.height)];
> [UIView commitAnimations];
> NSLog(@"frame x %f", self.mySubview.view.frame.origin.x); 
> ```

我试图在 iPad 上运行它。但是子视图的框架最初没有设置为 768.0。此外，动画没有发生。动画前后，子视图的frame.origin.x只有0.0。我哪里错了？请帮忙。我尝试改变情节提要中的自动调整箭头（删除它们，添加它们）......似乎没有任何效果！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:47:08.447

尝试这个

```
 Someviewcontroller *c = initWithNibName
     c.view.frame = CGRectMake(0, 0, 200, 200);
     [self addSubView:c]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:44:04.950

尝试这个：

```
 self.mySubview 
```

促成

```
 self.mySubview.view 
```

# java - 在 Live Copy 上不会自动推出

> ID：16034786
> 
> 赞同：0
> 
> 时间：2013-04-16T10:32:57.607
> 
> 标签：java, jakarta-ee, content-management-system, aem, rollout

在 SiteAdmin 控制台中，我尝试创建一个以 EN 区域设置为蓝图的 Live Copy，方法是选择选项 new-->new Live copy。（但是在文档中指定我们需要选择 new-->new site） .如果我选择新的-->新站点，只有父页面在 Live Copy 中可见。因此没有新的-->新的 Live Copy，那么我是否为我的 Live Copy 选择了推出配置“在 BluePrint Activaton 上激活” .然后我在蓝图页面中添加了一个文本组件并激活了该页面。但是，在为此蓝图创建的实时副本中没有反映特定更改。我知道我们如何可以自动将更改从蓝图推出到它的实时副本.

谢谢， 巴拉吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-16T12:27:25.010

**蓝图激活时激活**卷展配置并不意味着确保蓝图页面中的更改将反映到 Live Copy 页面。它所做的只是在激活相应的蓝图后立即激活 Live Copy。

为了满足您的要求，我相信**推动修改**配置会更合适。

如果您在推出配置上打开**push on modify**，您会发现以下同步操作

```
ContentCopyAction 
ContentUpdateAction 
```

已启用。这些操作允许您确保复制您的蓝图页面。因此，选择**推送修改**配置将满足您的要求。

或者，您可能希望通过添加上述同步操作来修改“**蓝图激活时激活”部署配置以满足您的需要。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-11T16:35:00.117

您是否在 etc/MSM/rolloutConfig/cqEditConfig 中为此编写了部署配置？

在那里您可以添加配置。就像您可以从那里更改 sling:resourceType, 模板一样。

# java - TimeoutTask 使用 ExecutorService

> ID：16034788
> 
> 赞同：0
> 
> 时间：2013-04-16T10:33:02.023
> 
> 标签：java, concurrency

我已经使用 ExecutorService 实现了 TimeoutTask。在下面的方法中，我提交了 TimeoutTask，如果它在给定时间内超时，我取消任务并关闭执行程序。

```
private boolean waitForProcessToBeCompleted(long timeOut) {
            boolean result = false;
            ExecutorService executor = Executors.newSingleThreadExecutor();
            // Create a FutureTask which will be run
            FutureTask<Boolean> futureTask = new FutureTask<Boolean>(new TimeoutTask());
            executor.submit(futureTask); // Run the FutureTask
            try {
                result = futureTask.get(timeOut, TimeUnit.MILLISECONDS); // Check if FutureTask completed in the given time
            } catch (InterruptedException e) {
                e.printStackTrace();
            } catch (ExecutionException e) {
                e.printStackTrace();
            } catch (TimeoutException e) {
                futureTask.cancel(true);
                result = true;  // Return True only when timed out
            } finally {
                executor.shutdownNow(); // Stop the executor
            }
            return result;
        } 
```

它运行得很好，我没有任何问题。

但是，我想知道这是否是最好的代码设计。我只是想知道使用 ExecutorService.submit() 返回的 Future 来获取 Callable 的返回值或超时 TimeoutTask 是否会更好。例如

```
 Future<?> futureTask = executor.submit(new TimeoutTask()); // Run the FutureTask
            try {
                result = futureTask.get(timeOut, TimeUnit.MILLISECONDS); // Check if FutureTask completed in the given time
            } catch (InterruptedException e) {
                e.printStackTrace();
            } catch (ExecutionException e) {
                e.printStackTrace();
            } catch (TimeoutException e) {
                futureTask.cancel(true);
                result = true;  // Return True only when timed out
            } finally {
                executor.shutdownNow(); // Stop the executor
            }
            return result; 
```

我正在使用JDK7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:55:05.770

如果您查看 的代码`futureTask.cancel`，您会发现它只是试图中断正在执行任务的线程。如果任务规则检查中断标志，显式或隐式（通过调用 sleep() 或 wait()），此中断可能会起作用。在 Java 中，没有其他安全的方法可以停止方法的执行。

因此，您可以实现相同的功能，而无需每次都创建单独的单线程执行程序。相反，从`waitForProcessToBeCompleted`方法中执行 TimerTask。为了收到超时通知，请将监视任务提交给 SheduledExecutorService。监视任务应该中断执行 TimerTask 的线程。如果任务在超时之前完成，则取消正在观看的任务。

这样，您需要一个 SheduledExecutorService，但它消耗的处理器周期非常少，并且可以在整个应用程序中重用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:43:12.760

我更喜欢使用`CountDownLatch`：

```
List<List<String>> elements = MyPartition.partition(bigObjectList, size); 
List<Future<?>> tasks = new ArrayList<Future<?>>();
ExecutorService executor = Executors.newSingleThreadExecutor();
CountDownLatch doneSignal =  new CountDownLatch(10);
for(List<String> l: elements) {         
   ReadTask worker = new ReadTask(doneSignal, l);
   tasks.add(executor.submit(worker));
}   

long timeout = 10000;
doneSignal.await(timeout, TimeUnit.SECONDS);
boolean notFinished = false;
if(doneSignal.getCount() > 0) {
  for(Future<?> fut : tasks) {
    if(!fut.isDone()) {
      System.out.println("Sub Thread " + fut + " has not finshed!");
      fut.cancel(true);             
      notFinished = true;
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-05T16:10:36.313

ExecutorService 上的[invokeAll](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#invokeAll(java.util.Collection,%20long,%20java.util.concurrent.TimeUnit))方法可用于自动取消超过超时的任务。这使您可以在不关闭线程池的情况下取消任务（如果您愿意，可以将相同的线程池重新用于其他事情）。

```
private boolean waitForProcessToBeCompleted(long timeOut) {
  ExecutorService executor = Executors.newSingleThreadExecutor();
  List<FutureTask> tasks = new ArrayList<>();
  tasks.add(new SomeFutureTaskThing()));
  List<Future<Boolean>> results;
  try {
    results = executor.invokeAll(tasks, timeOut, TimeUnit.SECONDS);
  } catch (InterruptedException e) {
    Thread.currentThread().interrupt(); // Restore interrupt status.
    return null;
  } catch (ExecutionException e) {
    throw new RuntimeException(e.getCause());
  }
  Future<Boolean> result = results.get(0);
  try {
    return result.get();
  } catch (CancellationException e) {
    System.err.println("Timed out");
    return null;
  }
} 
```

# ruby-on-rails - 如何在 ruby on rails 中从 db 中获取最新记录以及在哪里编写此查询

> ID：16034789
> 
> 赞同：1
> 
> 时间：2013-04-16T10:33:11.180
> 
> 标签：ruby-on-rails, ruby

我想从我的 ruby​​ on rails 数据库中获取 5 个最新的文章标题。我已经获取（获取所有文章的标题）文章的标题，但不受此（5 个最近的）条件的限制。在控制器或模型部分中写入此逻辑的位置。如果它应该写在模型中，那么如何在视图部分中访问它。是否会写在控制器部分。请给我建议。

文章模型

```
class Article < ActiveRecord::Base
   attr_accessible :title, :body
   attr_accessible :tag_list
   has_many :comments
   belongs_to :user
   has_many :taggings
   has_many :tags, through: :taggings
   validates :title, :body, :tag_list,  :presence => true

   def tag_list
    self.tags.collect do |tag|
     tag.name
    end.join(", ")
   end

   def tag_list=(tags_string)
    tag_names = tags_string.split(",").collect{|s| s.strip.downcase}.uniq
    new_or_found_tags = tag_names.collect { |name| Tag.find_or_create_by_name(name) }
    self.tags = new_or_found_tags
   end
end 
```

文章控制器.rb

```
class ArticlesController < ApplicationController
  before_filter :is_user_admin, only: [:new, :create, :edit, :destroy]

    def is_user_admin
      redirect_to(action: :index) unless current_user.try(:is_admin?) 
      return false 
    end
      def index
          @articles = Article.all(:order => "created_at DESC")
      end
    def show
      @article = Article.find(params[:id])
    end
      def new
      @article = Article.new
      end
    def create
      @article = Article.new(params[:article])
      @article.user_id = current_user.id
      if @article.save
        flash[:success] = "article created!"
        redirect_to article_path(@article)
      else
        render 'new' 
      end 
    end
    def destroy
      @article = Article.find(params[:id])
      @article.destroy
      redirect_to action:  'index'  
    end
    def edit
      @article = Article.find(params[:id])
    end
    def update
      @article = Article.find(params[:id])
      if @article.update_attributes(params[:article])
       flash.notice = "Article '#{@article.title}' Updated!"
       redirect_to article_path(@article)
      else 
        render 'edit'
      end
    end
end 
```

文章/index.rb

```
 <div style="background-color:#1fb2e8; color:#FFFFFF; font-size: 1.6em"> recent article </div>
          <div style="font-size: 1.3em">
           <% @articles.each do |article| %>
            <div style="margin-top:15px; margin-left:8px">  <%= link_to article.title.first(5), article_path(article) %></div>
           <% end %> 
```

我尝试使用 first 或 last(5) 获取，但没有成功。如何获得 5 或 10 个最近的标题。请给我建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:43:07.700

范围可能是执行此操作的好方法

```
scope :most_recent, :order => "created_at DESC", :limit => 5 
```

[Rails 3.2 范围文档](http://apidock.com/rails/ActiveRecord/Scoping/Named/ClassMethods/scope)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:41:34.613

你好在模型中写这个逻辑

请参考以下链接

[在 Rails 3 中查找最新记录](https://stackoverflow.com/questions/4870531/find-the-newest-record-in-rails-3)

# iphone - 发布一个 iphone 应用程序

> ID：16034790
> 
> 赞同：0
> 
> 时间：2013-04-16T10:33:15.097
> 
> 标签：iphone, xcode, build

我尝试在 build/Release.the 构建成功后生成一个 nameproject.app 但我没有在 product 下找到文件 nameproject.app ！（它似乎可用，但“在 Finder 中显示”选项已禁用）。我的问题是如何生成nameproject.app？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:41:07.297

您将需要构建和存档您的项目。您可能需要检查项目和可执行文件中的代码签名设置。

使用管理器选择您的存档版本，然后您可以共享该版本的项目。您将需要再次选择正确的代码签名。它将允许您将 .ipa 文件保存在您想要的位置。

将 .ipa 文件拖放到 iTunes 中，然后与您的 iPhone 同步。

以下是一些更详细的说明，包括屏幕截图；

[这里有一些更详细的说明](http://agilewarrior.wordpress.com/2012/04/02/how-to-distribute-ad-hoc-build-with-xcode-4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:54:26.050

单击：产品 - 存档（您必须将 IOS 设备选择到活动方案中，并且不要选择 IOS 模拟器方案）。当运行终止时，它会打开管理器视图。右键单击您的应用程序 - 在查找器中显示。右键单击您的存档进入查找器 - 显示包内容 - 产品 - 应用程序，在这里您可以找到您的 file.app

# c# - 如何在第 n 次出现时拆分字符串？

> ID：16034792
> 
> 赞同：11
> 
> 时间：2013-04-16T10:33:20.737
> 
> 标签：c#

我想要做的是在字符串的第 n 次出现时拆分（在本例中为“\t”）。这是我目前正在使用的代码，它在每次出现“\t”时都会拆分。

```
string[] items = input.Split(new char[] {'\t'}, StringSplitOptions.RemoveEmptyEntries); 
```

如果 input = "one\ttwo\tthree\tfour"，我的代码返回数组：

*   一
*   二
*   三
*   四

但是假设我想在第二个“\t”之后的每个“\t”上拆分它。所以，它应该返回：

*   一二
*   三
*   四

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-16T10:40:31.063

没有内置任何东西。

您可以使用现有的`Split`、使用`Take`和`Skip`与`string.Join`来重建您最初拥有的部分。

```
string[] items = input.Split(new char[] {'\t'}, 
                             StringSplitOptions.RemoveEmptyEntries);
string firstPart = string.Join("\t", items.Take(nthOccurrence));
string secondPart = string.Join("\t", items.Skip(nthOccurrence))

string[] everythingSplitAfterNthOccurence = items.Skip(nthOccurrence).ToArray(); 
```

* * *

另一种方法是遍历字符串中的所有字符，找到第 n 次出现的索引和它之前和之后的子字符串（或者在第 n 次之后找到下一个索引，子字符串等等......等等......等等。 .)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T10:44:58.253

[编辑] 重新阅读编辑后的 ​​OP 后，我意识到这并不能满足现在的要求。这将在每个第 n 个目标上拆分；OP 希望在第 n 个目标之后拆分*每个目标。*

无论如何，我将把它留在这里以供后代使用。

* * *

如果您使用的是[MoreLinq 扩展](http://code.google.com/p/morelinq/)，您可以利用它的`Batch`方法。

您的代码将如下所示：

```
string text = "1\t2\t3\t4\t5\t6\t7\t8\t9\t10\t11\t12\t13\t14\t15\t16\t17";

var splits = text.Split('\t').Batch(5);

foreach (var split in splits)
    Console.WriteLine(string.Join("", split)); 
```

我可能只是使用 Oded 的实现，但我想我会发布这个作为替代方法。

的实现`Batch()`看起来像这样：

```
public static class EnumerableExt
{
    public static IEnumerable<IEnumerable<TSource>> Batch<TSource>(this IEnumerable<TSource> source, int size)
    {
        TSource[] bucket = null;
        var count = 0;

        foreach (var item in source)
        {
            if (bucket == null)
                bucket = new TSource[size];

            bucket[count++] = item;

            if (count != size)
                continue;

            yield return bucket;

            bucket = null;
            count = 0;
        }

        if (bucket != null && count > 0)
            yield return bucket.Take(count);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T10:43:34.180

您很可能必须拆分和重新组合。就像是

```
int tabIndexToRemove = 3;
string str = "My\tstring\twith\tloads\tof\ttabs";
string[] strArr = str.Split('\t');
int numOfTabs = strArr.Length - 1;
if (tabIndexToRemove > numOfTabs)
    throw new IndexOutOfRangeException();
str = String.Empty;
for (int i = 0; i < strArr.Length; i++)
    str += i == tabIndexToRemove - 1 ? 
        strArr[i] : String.Format("{0}\t", strArr[i]); 
```

结果：

> 我的字符串带有许多标签

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T10:44:50.407

```
// Return a substring of str upto but not including
// the nth occurence of substr
function getNth(str, substr, n) {
  var idx;
  var i = 0;
  var newstr = '';
  do {
    idx = s.indexOf(c);
    newstr += str.substring(0, idx);
    str = str.substring(idx+1);
  } while (++i < n && (newstr += substr))
  return newstr;
} 
```

# ios - 在iOS中的滑块值上旋转图像

> ID：16034794
> 
> 赞同：1
> 
> 时间：2013-04-16T10:33:22.970
> 
> 标签：ios, objective-c, image, image-rotation

我在滑块值上旋转图像 -

我正在使用此代码进行轮换-

```
editingView.transform = CGAffineTransformRotate(editingView.transform,sliderVal); 
```

它旋转正确，但如果我在旋转后尝试移动或调整大小，editingView 正在调整大小，出现意外行为，视图从屏幕上消失。

请告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:57:39.643

看看[这个问题](https://stackoverflow.com/questions/1111277/applying-multiple-transforms-to-a-uiview-calayer)。

由于您没有显示任何有关如何进行移动或调整大小的代码，我怀疑您没有正确连接转换。此外，在您进行旋转之后，平移可能会在旋转的坐标系上起作用，因此会导致意外行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:05:04.513

好吧，每当您旋转超级视图内的视图时，您都应该保留视图的位置。如果您没有在原点上旋转任何视图，则应首先将视图的原点转换为父视图的原点，然后旋转，然后再次转换回原点。

*   如果要相对于其父视图旋转视图，请找到坐标，例如 (x,y)。
*   将视图转换为原点；

    view.transform = CGAffineTransformMakeTranslation(x,y)

*   将视图旋转某个角度，例如 PI，

    view.transform = CGAffineTransformMakeRotation(PI)

*   旋转后平移回原点为；

    view.transform = CGAffineTransformMakeTranslation(-x,-y)

就是这样。它应该适用于所有不同的旋转。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:06:25.760

更改`transform`影响`frame`UIView 值的值。正如苹果所说：

> 警告：如果此属性不是恒等变换，则 frame 属性的值未定义，因此应被忽略。

[苹果文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html)

因此，如果您使用 frame 属性移动或调整视图大小，请尝试使用`bounds`,`center`属性执行此操作

# itext - 如何检查数字签名文件是否正确

> ID：16034797
> 
> 赞同：0
> 
> 时间：2013-04-16T10:33:26.513
> 
> 标签：itext, digital-signature, digital-certificate

我正在创建一个经过数字认证/签名的 PDF 文件。我可以使用 itext 库成功签署我的 pdf 文档。

但是，adobe reader上的证书详细信息显示如下：

![截屏](https://i.stack.imgur.com/Zd4fD.png)

证书好吗？或者有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-09-06T09:29:21.820

> 证书好吗？或者有什么问题吗？

# 就您的 PDF 查看器而言...

就您的 Adob​​e Reader 而言，证书显然是可以的。你的屏幕截图

[![截屏](https://i.stack.imgur.com/nQoDt.png "全屏截图")](https://i.stack.imgur.com/nQoDt.png "全屏截图")

在文档消息栏中包含此文档状态：

[![在此处输入图像描述](https://i.stack.imgur.com/9Us6B.png "文档消息栏中的文档状态")](https://i.stack.imgur.com/9Us6B.png "文档消息栏中的文档状态")

根据Adob ​​e 的[签名验证指南](https://www.adobe.com/content/dam/acom/en/devnet/reader/pdfs/acrobat_sig_validation_cheat_sheet9_1.pdf)

![签名验证备忘单](https://i.stack.imgur.com/xld3X.png "签名验证指南")

这意味着两件事：

*   文档未更改或仅包含允许的更改。（文件完整性检查）
*   [身份] 已为所有签名者验证。（身份检查）

特别是后者意味着 Adob​​e Reader 认为您的证书没有问题。

在证书查看器中，这得到了确认

[![证书信任设置](https://i.stack.imgur.com/geRb1.png "证书查看器 - 信任设置")](https://i.stack.imgur.com/geRb1.png "证书查看器 - 信任设置")

您的证书可*用于签署文档或数据。*

# ...但它的法律价值是什么？

这完全是一个不同的问题。

你已经在评论中提到了一个明显的问题，

> 但是我使用我的 SSL 证书进行签名

特别是证书的主题基本上只是您的网站。该网站绝对不是自然人，而且很可能（我不了解印度法律）也不是法人/法人团体。因此，甚至不清楚是*谁*在该签名开始时签名的。

此外，SSL 证书通常可能具有密钥使用属性值“数字签名”，但没有“不可否认性”。因此，它所表达的只是“这是我所看到的文件”（只要签名没有损坏），但绝对不是“我对其内容负责和承担责任”。

一般而言，根据考虑法律价值的背景，有许多国家和国家协会对数字签名具有直接的法律价值有严格定义的要求，例如在欧盟的 eIDAS 法规。由于您似乎对印度感兴趣，UIDAI 的 Aadhaar 证书可能更合适。

另一方面，如果您事先与签名文件的接收者约定您将使用您的 SSL 证书进行具有约束力的签名，那么这些签名最终也很有可能被认为具有法律约束力，您可能会在法庭上承担责任对于您签署的内容。

# java - 从列表中调用特定字符串时出错 在 bukkit 配置文件中映射

> ID：16034798
> 
> 赞同：2
> 
> 时间：2013-04-16T10:33:27.637
> 
> 标签：java, config, minecraft, bukkit

我对编码很陌生。我已经尝试了一切。我可以考虑尝试获取存储在我的配置中的标题列表，以作为消息发送给播放器，而我尝试过的任何方法都不起作用。

引用的当前配置设置

```
players:
    player1name:
        - title1
        - title2
        - title3
    player2name:
        - title1
        - title3 
```

调用发送消息代码行

```
 if (args.length == 2) {
                        try {
                        // insert code here to display titles list available
                        // to
                        // player
                        Player p = Bukkit.getPlayer(args[1]);
                        if (p == null) {
                            sender.sendMessage("Could Not Find Player!!");
                            return true;
                        }
                        Bukkit.broadcastMessage("I got to this point pre- list");
                        List<String> s = this.Ach.getConfig()
                                .getStringList("players." + p + "titles");

                        StringBuilder message = new StringBuilder();
                        Bukkit.broadcastMessage("I got to this point post message");
                        for (String players : s) {

                            message.append(players).append(" - ");
                        Bukkit.broadcastMessage("I got to this point post for");

                        sender.sendMessage(message.toString()); // (message.toString());
                        } 

                        // Set<String> keys =
                        // this.Ach.getConfig().getConfigurationSection("player."
                        // + p + "titles").getKeys(false);
                        // sender.sendMessage(keys + " - ");
                        Bukkit.broadcastMessage("I got to this point pre return");
                        return true;}
                        catch (Exception e) {
                            e.printStackTrace();
                        } 
```

'Ach' 是前面定义的，以引用我在其中定义 get config 的主类。

我期望输出`player1name`的`args[1]`值 `title1 - title2 - title3 -`

使用有效的玩家名称而不是返回玩家拥有的头衔，我被发送到聊天的只是 `[] -`

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:38:45.727

在发送消息之前，您需要遍历所有字符串并将它们添加到变量中 - 类似于（未经测试）

```
StringBuilder message = new StringBuilder();
for (String player : s)
   message.append(player).append(" - ");
sender.sendMessage(message.toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T06:10:06.337

Bukkit API 还为您提供了使用 YamlConfiguration 类的选项，它是 getStringList() 方法，您可以在其中将字符串路径发送到您想要的列表，然后它会向您发送列表。如果您要将它用于该文件，则需要类似的行

```
List<String> titlesList = this.Ach.getStringList("players." + sender.getName()); 
```

对于那个特定的输出类型，我会使用

```
sender.sendMessage(titlesList.toString().replace("[", "").replace("]", "").replace(", ", " - "); 
```

你有那个输出的原因是因为你有`(ASet + " - ")`. ASet 读取为字符串时的样子`[title1, title2]`，而您的集合为空。此外，在它旁边有破折号根本不会纠正格式。因此我的替换方法。去掉方括号、逗号和空格，用你真正想要的东西。

# java - 检测 android Activity 启动

> ID：16034801
> 
> 赞同：11
> 
> 时间：2013-04-16T10:33:52.090
> 
> 标签：java, android, android-activity, launcher

我在stackoverflow上搜索了这个问题，发现： [Android，检测其他应用程序何时启动](https://stackoverflow.com/questions/3290936/android-detect-when-other-apps-are-launched)以及 [检测应用程序从家庭/桌面启动的可靠方式？](https://stackoverflow.com/questions/12072135/reliable-way-to-detect-application-launch-from-home-desktop)，哪种回答了我的问题，但仍然不够。

**我想要做什么** 我想创建一个小部件/应用程序，向设备用户显示最近的应用程序列表和最常用的应用程序列表。

**问题** 如何获得有关应用程序的准确数据，以便构建最常用应用程序的列表。

**基地信息**

*   我正在编译我自己的 Android 操作系统（基于 4.2）代码，所以我可以访问所有内容。
*   我也在开发发射器。
*   它需要通过 CTS 并获得 Google 批准。
*   我可以使用系统权限制作应用程序。
*   我知道这可能是谷歌的一个安全问题。

**一些解决方案**

最近的应用程序可以通过 ActityManager、getRecentApps 方法找到，所以现在问题出现了。

我已经在网上搜索了这个并且已经找到了以下解决方案：

1.  使用服务每隔 X 秒查询一次activityManager、getRunningTasks 方法并构建列表（不准确的信息，也使用了大量的电池）。
2.  使用 logcat 获取此信息（对我来说似乎是 hack，需要系统权限）
3.  更改 activityManager 本身以提供此信息（很可能无法通过 CTS 测试）
4.  使用启动器验证已启动的应用程序（错过在其他应用程序中启动的应用程序）

还有什么我错过的吗？

在此先感谢蒂亚戈·科斯塔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:51:35.923

Android 默认最近的应用程序对话框实现是你最好的参考，**[看这里..检查 reloadButtons()](https://github.com/android/platform_frameworks_base/blob/master/policy/src/com/android/internal/policy/impl/RecentApplicationsDialog.java)**

```
final ActivityManager am = (ActivityManager)
                context.getSystemService(Context.ACTIVITY_SERVICE);
        final List<ActivityManager.RecentTaskInfo> recentTasks =
                am.getRecentTasks(MAX_RECENT_TASKS, ActivityManager.RECENT_IGNORE_UNAVAILABLE); 
```

你可以试试类似的方法。。

# c# - 使用合同名称导入 MEF 无属性属性

> ID：16034803
> 
> 赞同：0
> 
> 时间：2013-04-16T10:33:55.733
> 
> 标签：c#, mef

我发现导入属性所需的 lambda 表达式有些令人困惑，我还试图了解如何使用 MEF 约定进行导入和导出，所以也许我试图一次承担太多。

我正在`ResourceDictionary`使用之前导入的合同名称进行导出，如下所示：

```
[ImportMany("ApplicationResources", typeof(ResourceDictionary))]
public IEnumerable<ResourceDictionary> Views { get; set; } 
```

哪个效果很好并且很好，但是我现在正在尝试通过`RegistrationBuilder`但不完全理解如何执行此操作来导入它。

我相信这会导出它们（但老实说，我并不完全理解语法）：

```
var registration = new RegistrationBuilder();
registration.ForTypesDerivedFrom<ResourceDictionary>()
    .Export<ResourceDictionary>(x => x.AsContractName("ApplicationResources")); 
```

我有一个`App`我想填充的属性

所以尝试了这个（在应用程序本身内执行）

```
registration.ForType<App>()
    .ImportProperty<ResourceDictionary>(x => x.Views); 
```

但这不起作用，我猜我需要以某种方式设置合同名称？谁能告诉我这个的语法是什么？也许如果我能看到正确的语法，我就能更好地理解它是如何工作的......我希望！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:48:28.327

通常，事实证明我在发布问题后找到了解决方案。我不倾向于回答我自己的问题，但因为它让我坚持了一段时间，以防它帮助其他人，这就是有效的：

```
registration.ForType<App>()
    .ImportProperty<ResourceDictionary>(x => x.Views, ib => ib.AsContractName("ApplicationResources")); 
```

但是，这仅在我使用`SafisfyImportsOnce`而不是`ComposeParts`我对此感到有些困惑的情况下才有效

# ios - UISwitch 显示另一个文本

> ID：16034805
> 
> 赞同：0
> 
> 时间：2013-04-16T10:34:02.793
> 
> 标签：ios, objective-c, uiswitch

为什么在 StoryBoard UIswitch 中显示类似的文本`ON/OFF`，而当我在模拟器中使用应用程序时，我看到错误的文本`|`

在 .plist 我有“本地化本地开发区域”等于“en”

![在此处输入图像描述](https://i.stack.imgur.com/CZr2d.png)

# iphone - 核心蓝牙内的可写特性

> ID：16034806
> 
> 赞同：1
> 
> 时间：2013-04-16T10:34:06.173
> 
> 标签：iphone, ios, objective-c, core-bluetooth

我正在使用核心蓝牙。我添加了在特性上写入/读取的功能。在此之前，我想检查特征是否可写。我为此目的使用了characteristic.properties，我的代码是：

```
 if (characteristic.properties==CBCharacteristicPropertyRead)
    {
        [peripheralDevice readValueForCharacteristic:characteristic];
    }
    else if(characteristic.properties==CBCharacteristicPropertyWrite)
    {
        [peripheralDevice setNotifyValue:YES forCharacteristic:characteristic];
    }
  NSLog(@"the property :%d",currentCharacteristic.properties ); 
```

这是文档中 Characteristic.properties 的枚举：

```
typedef NS_ENUM(NSInteger, CBCharacteristicProperties) {
    CBCharacteristicPropertyBroadcast                                               = 0x01,
    CBCharacteristicPropertyRead                                                    = 0x02,
    CBCharacteristicPropertyWriteWithoutResponse                                    = 0x04,
    CBCharacteristicPropertyWrite                                                   = 0x08,
    CBCharacteristicPropertyNotify                                                  = 0x10,
    CBCharacteristicPropertyIndicate                                                = 0x20,
    CBCharacteristicPropertyAuthenticatedSignedWrites                               = 0x40,
    CBCharacteristicPropertyExtendedProperties                                      = 0x80,
    CBCharacteristicPropertyNotifyEncryptionRequired NS_ENUM_AVAILABLE(NA, 6_0)     = 0x100,
    CBCharacteristicPropertyIndicateEncryptionRequired NS_ENUM_AVAILABLE(NA, 6_0)   = 0x200
}; 
```

它可以很好地从特征中读取值。但问题是在写入值时它不会进入第二个循环。我已经用可写属性设置了特性。我得到了我检查过的两个外围设备的 136 in print 语句。请提出一些解决方案来克服这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-03T05:09:22.277

通过使用 ANDing 操作解决了这个问题：

```
 if (characteristic.properties&CBCharacteristicPropertyRead!=0)
 {
      [peripheralDevice readValueForCharacteristic:characteristic];
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-12T13:53:04.820

这是 Swift 3 的解决方案：

```
if characteristic.properties.contains(.write) {
    ...
} 
```

# wolfram-mathematica - 让 Return[] 完成其正确的 (C++) 任务

> ID：16034810
> 
> 赞同：0
> 
> 时间：2013-04-16T10:34:22.520
> 
> 标签：wolfram-mathematica, return

我看到这个网站上有很多关于 Return[] 函数的线程。甚至对它的行为也有很好的描述。但是，如果我真的是 Mathematica 的新手，会发生什么？

事不宜迟，我想使用这个功能：

```
getBinIndex[eta_, pt_, etalimits_, ptlimits_] := 
     List[
       For[i = 1, i < Length[etalimits],     i++,
           If[eta < etalimits[[i + 1]], Return[i]]], 
       For[i = 1, i < Length[ptlimits], i++,
           If[pt < ptlimits[[i + 1]], Return[i]]]
         ]; 
```

如你所见，我真的很新。我想在 Mathematica 中有 100 万种方法可以做到这一点，但我有 C 背景，我觉得有必要告诉计算机一切。该功能有效。它返回一个包含 2 个变量的列表，经过大量测试，这些变量都可以。但它将结果作为两个 Return 的参数：{Return[4],Return[5]}，例如，我不能将其用作...表的索引。你需要做什么才能让这些 Return[x] 变成 x？

为了让您了解我是多少新手，我尝试了 N[Return[i]]。

干杯，

阿德里安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:48:39.503

```
Catch[For[ ....   If[   Throw[i] ] ] 
```

当然在mathematica中你几乎不需要循环......像

```
Position[etalimits,ei_/;ei<eta&][[1,1]] 
```

会做。

编辑..试试这个：

```
 For[i = 1, i < Length[etalimits],     i++,
         If[eta < etalimits[[i + 1]], Return[i,CompoundExpression]]];, 
```

注意使 For[] 循环成为 CompoundExpression 的额外分号。我个人觉得这很奇怪，不会使用它..

# python - 在 windows 上使用 python 获取 QProcess 的 PID

> ID：16034823
> 
> 赞同：3
> 
> 时间：2013-04-16T10:34:48.980
> 
> 标签：python, qt4, pyqt, qprocess

有没有办法读取以 QProcess.start(...) 启动的进程的 PID？`QProcess::pid()`返回`sip.voidptr`并且我无能为力（或者我不知道如何）。

我想让 PID 有可能在以后使窗口处于活动状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T22:16:48.797

尝试[`QProcess.startDetached`](http://pyqt.sourceforge.net/Docs/PyQt4/qprocess.html#startDetached)，因为它产生了一个独立的进程，消除了与其父进程共享 PID 的可能性。

[这](http://ftp.ics.uci.edu/pub/centos0/ics-custom-build/BUILD/sip-4.10/doc/html/python_api.html)可能会为您提供进一步的见解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-10T15:05:32.637

提供 pid() 函数以保持旧源代码正常工作。请改用 processId()。如果可用，则返回正在运行的进程的本机进程标识符。如果当前没有进程在运行，则返回 0。注意：与 processId() 不同，pid() 在 Unix 上返回一个整数，在 Windows 上返回一个指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-13T02:19:08.937

尝试：

```
proc = QtCore.QProcess().start(cmdOrWhaterver)
pid = int(proc.pid()) 
```

不确定这是否对您有帮助，但您也可以尝试`proc.setObjectName()`在运行一段时间后引用进程时对我有用的方法。

无论如何，那是给python的

# ssrs-2008 - 使用 Business Intelligence Development Studio FetchXML 的自定义报告

> ID：16034835
> 
> 赞同：0
> 
> 时间：2013-04-16T10:35:24.587
> 
> 标签：ssrs-2008, dynamics-crm-2011, dynamics-crm, crm, dynamics-crm-online

我想创建一个`custom`报告，它将显示所有关联`Products`的 all/any `Order`。这意味着在订单页面中显示所有订单和相关产品，在任何订单记录页面中，它应该只显示与该订单相关的产品。

以前我是使用报告向导完成的。它按我的意愿工作。

![在此处输入图像描述](https://i.stack.imgur.com/Giqx9.jpg)

但我无法在商业智能开发工作室中做到这一点。

这是 FetchXML

```
<fetch version="1.0" output-format="xml-platform" mapping="logical" distinct="false">
  <entity name="salesorderdetail">
    <attribute name="productid" />
    <attribute name="productdescription" />
    <attribute name="priceperunit" />
    <attribute name="quantity" />
    <attribute name="extendedamount" />
    <attribute name="salesorderdetailid" />
    <order attribute="productid" descending="false" />
    <link-entity name="salesorder" from="salesorderid" to="salesorderid" alias="ad">
      <filter type="and">
        <condition attribute="salesorderid" operator="eq">

        </condition>
      </filter>
    </link-entity>
  </entity>
</fetch> 
```

我如何修改这个 XML 使其像上面一样工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:53:19.243

最后，我能够做到这一点，使用子查询。

这是子查询 fetchXML：

```
<fetch version="1.0" output-format="xml-platform" mapping="logical" distinct="false">
  <entity name="salesorderdetail">
    <attribute name="productid" />
    <attribute name="productdescription" />
    <attribute name="priceperunit" />
    <attribute name="quantity" />
    <attribute name="extendedamount" />
    <attribute name="salesorderdetailid" />
    <order attribute="productid" descending="false" />
    <link-entity name="salesorder" from="salesorderid" to="salesorderid" alias="af">
      <filter type="and">
        <condition attribute="salesorderid" operator="eq" uitype="salesorder" value="@salesorderid"/>
      </filter>
    </link-entity>
  </entity>
</fetch> 
```

这是主查询的 fetchXML：

```
<fetch version="1.0" output-format="xml-platform" mapping="logical" distinct="false">
  <entity name="salesorder" enableprefiltering="1">
    <attribute name="name" />
    <attribute name="salesorderid" />
    <order attribute="name" descending="false" />
    <filter type="and">
      <condition attribute="ownerid" operator="eq-userid" />
      <condition attribute="statecode" operator="in">
        <value>0</value>
        <value>1</value>
      </condition>
    </filter>
  </entity>
</fetch> 
```

希望这会对某人有所帮助。

# visual-studio-2012 - VisualStudio 2012 键盘快捷键（继续/for）

> ID：16034840
> 
> 赞同：0
> 
> 时间：2013-04-16T10:35:38.507
> 
> 标签：visual-studio-2012, editor

当我想查看我的`continue;`跳转位置时，我必须删除`;`并再次输入（所以我们称之为 Intellisense，将突出显示`continue`和`for`/或`while`行）。

当我想重新格式化`{`和之间的内容时也是`}`如此（如果无法格式化，因为我在`double a =`里面写了示例并且只有在编辑完其余部分才能完成），我必须删除`}`（最好是当前打开的文件中的最后一个）并再次键入。

问题是：

*   是否有键绑定来简化这一点？就像按`Ctrl`+`K`然后是什么？
*   你们在做什么，就像我删除并重新输入东西以使事情正常工作一样？

PS：我知道`Ctrl`+ `Space`（和一个带有`Shift`），我读[了这个](https://stackoverflow.com/questions/3640544/visual-studio-keyboard-shortcut-to-display-intellisense)，也做了一些谷歌搜索，没有运气。

# python - 没有这样的文件或目录 New Relic

> ID：16034842
> 
> 赞同：0
> 
> 时间：2013-04-16T10:35:47.750
> 
> 标签：python, django

我正在尝试设置新的遗物，我已经按照他们给出的说明进行操作，但是最后一个命令给了我这个错误。

```
newrelic-admin run-program gunicorn wsgi:application 
```

为什么？

```
2013-04-16 10:39:30 [4175] [INFO] Starting gunicorn 0.14.5
2013-04-16 10:39:30 [4175] [INFO] Listening at: http://127.0.0.1:8000 (4175)
2013-04-16 10:39:30 [4175] [INFO] Using worker: sync
2013-04-16 10:39:30 [4178] [INFO] Booting worker with pid: 4178
2013-04-16 10:39:30 [4178] [INFO] Worker exiting (pid: 4178)
2013-04-16 10:39:31 [4175] [INFO] Shutting down: Master
2013-04-16 10:39:31 [4175] [INFO] Reason: Worker failed to boot. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:54:25.923

请按照此处的说明进行操作：

[https://newrelic.com/docs/python/python-agent-integration](https://newrelic.com/docs/python/python-agent-integration)

我假设这是我在 Django 中发布的，它是一个 Django 应用程序。

添加

```
import newrelic.agent
newrelic.agent.initialize('/some/path/newrelic.ini') 
```

# javascript - Model View Presenter 设计中的 Javascript“this”问题

> ID：16034844
> 
> 赞同：0
> 
> 时间：2013-04-16T10:35:48.547
> 
> 标签：javascript, this, mvp

*问题出在模型*中，当演示者调用它时，它不像我假设的那样工作，实际上它就像**this**关键字引用 [object HTMLTextAreaElement]，而不是 Model 对象一样工作。

```
/** PRESENTER **/

function Presenter() {
  var toolbarView;
  var outputView;
  var sourceCodeModel;
  var public = {
    setToolbarView: function (view) {
      toolbarView = view;
    },
    setOutputView: function (view) {
      outputView = view;
    },
    setModel: function (_model) {
      sourceCodeModel = _model;
    },
    init: function () {
      toolbarView.setNewTableHandler(function () {
        outputView.updateSource(sourceCodeModel.string);
      });
      toolbarView.setNewConstraintHandler(function () {
        /*stub*/
        alert("new constraint");
      });
    }
  }
  return public;
}
/** TOOLBAR VIEW **/
function toolbarView() {
  this.setNewTableHandler = function (handler) {
    $("#newTable").click(handler);
  }
  this.setNewConstraintHandler = function (handler) {
    $("#newConstraint").click(handler);
  }
}
/** OUTPUT VIEW **/
var outputView = {
  updateSource: function (newVal) {
    $("#sourcetext").val(newVal);
  },
  draw: function () {
    //stub
  }
};
/** MODEL **/
var model = new Object(); //o {};
model.source = [];
model.string = function () {
  /* ALERT(this) returns [object HTMLTextAreaElement] wtf? */
  var stringa = "";
  for (var i = 0; i < this.source.length; i++) { //this does not work, since this = HTMLTextAreaElement
    stringa += this.source[i] + "\n";
  }
  return stringa;
}
$(document).ready(function () {
  var presenter = new Presenter();
  var view1 = new toolbarView();
  presenter.setToolbarView(view1);
  presenter.setOutputView(outputView);
  presenter.setModel(model);
  presenter.init();
}); 
```

HTML 非常简单：

```
<!doctype html>
<head>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script type="text/javascript" src="mvp.js"></script>
  <meta charset="UTF-8">
  <title>Titolo documento</title>
  <style type="text/css">
    /*unnecessary here*/
  </style>
</head>
<body>
  <div id="container">
    <div id="toolbar">
      <button id="newTable">New table</button>
      <button id="newConstraint">New Constraint</button>
    </div>
    <div id="source">
      <textarea id="sourcetext"></textarea>
    </div>
    <button id="update">Update</button>
    <div id="output"></div>
  </div>
</body>

</html> 
```

我在模型对象上做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:41:42.030

这一行：`var public = {`尽量不要使用`public`，即[保留字](http://www.javascripter.net/faq/reserved.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:45:52.967

当您将函数作为侦听器传递时，该`this`属性将在函数内部不可用：

```
var obj = {
    a: function() {
        alert(this)
    }
};
$('body').click(obj.a); 
```

单击主体时，函数的`this`属性将为`document.body`.

为了防止这种情况，您必须绑定函数：

```
$('body').click(obj.a.bind(obj)); 
```

或者在旧浏览器中包装它：

```
$('body').click(function() {
    obj.a();
}); 
```

所以你必须在传递之前绑定函数：

```
outputView.updateSource(sourceCodeModel.string.bind(sourceCodeModel)); 
```

有关 javascript 函数上下文的更多信息：[http ://www.quirksmode.org/js/this.html](http://www.quirksmode.org/js/this.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:56:26.023

一般注意，尝试将它绑定到一个变量，因为这会改变它当前所在的上下文。

```
/** TOOLBAR VIEW **/
function toolbarView() {
  var that = this; 
  that.setNewTableHandler = function (handler) {
    $("#newTable").click(handler);
  }
  that.setNewConstraintHandler = function (handler) {
    $("#newConstraint").click(handler);
  }
} 
```

# iphone - NSBlockOperation 调用 NSOperation 内部的方法

> ID：16034846
> 
> 赞同：1
> 
> 时间：2013-04-16T10:36:04.587
> 
> 标签：iphone, ios, objective-c, nsoperation, nsoperationqueue

我有个问题。我有以下代码：

```
NSBlockOperation *op=[NSBlockOperation blockOperationWithBlock:^{

        [[ClassA sharedInstance] someSingletonMethod:params1];
        [ClassB classBMethod:params2];
        [self currentClassMethod:params3];

        [[NSOperationQueue mainQueue] addOperationWithBlock:^{
            [[NSNotificationCenter defaultCenter] postNotificationName:@"kSNotificationName" object:nil];
        }];
    }];

[self.myOperationQueue addOperation:op]; 
```

在块中调用单例方法是否安全？在块中调用类方法是否安全？调用“自我”方法是否安全？

我有以下情况。我正在向服务器发送一批请求：

```
AFHTTPClient *client=[[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:baseURL]];
[client registerHTTPOperationClass:[AFJSONRequestOperation class]];
[client enqueueBatchOfHTTPRequestOperations:reqOps progressBlock:^(NSUInteger numberOfFinishedOperations, NSUInteger totalNumberOfOperations) {
    NSLog(@"finished: %i of %i requests", numberOfFinishedOperations, totalNumberOfOperations);
    [[PTDictionaryUpdate sharedInstance] debugPrint:[NSString stringWithFormat:@"finished: %i of %i requests", numberOfFinishedOperations, totalNumberOfOperations]];
} completionBlock:^(NSArray *operations) {
    NSLog(@"operations finished"); 
```

这里我如何处理响应。我正在创建操作来处理已完成的请求。

```
for (int i=0; i<[operations count]; i++)
    {
        AFJSONRequestOperation *operation=[operations objectAtIndex:i];
        if ((operation.error==nil) && (operation.response.statusCode==200))
        {
            id JSON=operation.responseJSON;
            int handleMethodIndex=-1;
            for (int j=0; j<[urls count]; j++)
            {
                if ([operation.request.URL isEqual:[urls objectAtIndex:j]])
                {
                    handleMethodIndex=j;
                };
            };

            switch (handleMethodIndex) {
                case 0:
                {
                    //[self countryUpdate:JSON];

                    NSInvocationOperation *invOp=[[NSInvocationOperation alloc] initWithTarget:self selector:@selector(countryUpdate:) object:JSON];
                    [invOp setQueuePriority:NSOperationQueuePriorityLow];
                    [handleJSONOperations addObject:invOp];
                    break;
                }
                case 1:
                {
                    //[self regionsUpdate:JSON];

                    NSInvocationOperation *invOp=[[NSInvocationOperation alloc] initWithTarget:self selector:@selector(regionsUpdate:) object:JSON];
                    [invOp setQueuePriority:NSOperationQueuePriorityLow];
                    [handleJSONOperations addObject:invOp];
                    break;
                }
                //.......
          //.......
       } 
```

在我创建了一个数组，该数组将处理（处理和更新数据库）我从服务器中提取的 JSON：

```
NSBlockOperation *op=[NSBlockOperation blockOperationWithBlock:^{

        //first we need to tether countries, regions and cities
        [[PTDataTetherer sharedInstance] tetherCountriesRegionsCitiesInContext:self.updateContext];

        //generating fake agencies
        //[PTFakeAgencyGenerator generateAgenciesInContext:context];

        //generating fake clients
        //[PTFakeClientGenerator generateClientsInContext:context];

        //generating fake reports
        [[PTFakeReportGenerator sharedInstance] generateReportsInContext:self.updateContext];

        //generating fake presentations
        [[PTFakePresentationGenerator sharedInstance] generatePresentationsInContext:self.updateContext];

        //tethering
        [[PTDataTetherer sharedInstance] tetherAgenciesWithOthersInContext:self.updateContext];
        [[PTDataTetherer sharedInstance] tetherClientsWithOthersInContext:self.updateContext];
        [[PTDataTetherer sharedInstance] tetherEventsWithOthersInContext:self.updateContext];
        [[PTDataTetherer sharedInstance] tetherPresentationFoldersWithImagesInContext:self.updateContext];

        [self saveContext];

        [[NSOperationQueue mainQueue] addOperationWithBlock:^{
            [[NSNotificationCenter defaultCenter] postNotificationName:@"kSynchronizationFinishedNotification" object:nil];
        }];
    }];
    [op setQueuePriority:NSOperationQueuePriorityLow];
    if ([handleJSONOperations count]==0)
    {
        [[NSOperationQueue mainQueue] addOperationWithBlock:^{
            [[NSNotificationCenter defaultCenter] postNotificationName:@"kSynchronizationFinishedNotification" object:nil];
        }];
    }
    else
    {
        [self.serverUpdateQueue addOperation:updateContextCreateOperation];
        [handleJSONOperations addObject:op];
        [self.serverUpdateQueue addOperations:handleJSONOperations waitUntilFinished:NO];
    }; 
```

基本上我想以这种方式构造队列：1\. [上下文创建操作] 2\. [多个上下文修改操作，这些操作将解析从服务器接收到的 json 并将新/修改对象保存到上下文中] 3\. [一些最终方法还将修改上下文，最后调用 save 方法将更改传播到存储，然后使用 NSManagedObjectContextDidSaveNotifications 到其他上下文]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:44:13.810

> 在块中调用单例方法是否安全？

这是一个有点板的问题，取决于你在单例方法中的内容。

> 在块中调用类方法是否安全？

取决于您在方法中执行的操作。根据我的经验和我所做的代码，是的。

> 调用“自我”方法是否可以节省？

您正在传递`self`对块的引用，这可能会导致内存泄漏。

# git - 如何将文件重新添加到舞台区域（在预提交挂钩中）？

> ID：16034848
> 
> 赞同：0
> 
> 时间：2013-04-16T10:36:09.310
> 
> 标签：git

我想`index.html`在提交之前替换我的文件中的修订号。这是我的`pre-commit`文件：

```
#!/bin/sh

revision_number=`git shortlog | wc -l`;

exec ./.git/hooks/replace_revision.py $((revision_number - 2))

git reset HEAD app/index.html
git add app/index.html 
```

修订版更改，但 git 提交文件没有更改 - 使用旧编号修订版，因此就在 之后`git commit -a`，`git diff`显示文件中修订版行的更改`index.html`。

而不是`reset...`我也尝试过：`git update-index --again`。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:06:38.637

这绝对应该有效（从 gi​​t 5.4 开始），因为：

`@commit.c line 811`

```
/*
 * Re-read the index as pre-commit hook could have updated it,
 * and write it out as a tree.  We must do this before we invoke
 * the editor and after we invoke run_status above.
 */
discard_cache();
read_cache_from(index_file); 
```

我也试过这个，它对我有用。你确定你有`pre-commit`钩子而不是`pre-commit-msg`钩子吗？这是您设置的唯一挂钩吗？

*注意：*您不需要`git reset`，`git add`无论如何您都在撤消它。

# c# - Dictionary.Add 方法如何被 O(1) 摊销？

> ID：16034856
> 
> 赞同：3
> 
> 时间：2013-04-16T10:36:23.723
> 
> 标签：c#, dictionary, complexity-theory, time-complexity

我试图从复杂性的角度更好地理解哈希表和字典在 C# 中的工作方式（但我猜语言不是一个重要因素，这可能只是一个理论问题）。

我知道`Add`a的方法`Dictionary`应该是 O(1) 如果`Count`小于容量（这很明显）。

但是，让我们看一下该代码：

```
public class Foo {
    public Foo() { }
    public override int  GetHashCode() {
        return 5; //arbitrary value, purposely a constant
    }
}
static void Main(string[] args) {
    Dictionary<Foo, int> test = new Dictionary<Foo,int>();
    Foo a = new Foo();
    Foo b = new Foo();

    test .Add(a, 5);
    test .Add(b, 6); //1\. no exception raised, even though GetHashCode() returns the same hash

    test .Add(a, 10); //2\. exception raised
} 
```

我知道在幕后有哈希冲突，`1.`并且可能有一个单独的链接来处理它。

但是，在`2.`参数处引发异常。这意味着 Dictionary 内部会在确定其哈希值后跟踪插入的每个键。这也意味着每次我们向字典中添加条目时，它都会使用该方法检查键是否尚未插入`equals`。

我的问题是，如果它检查已经插入的键，为什么它看起来应该是 O(n) 复杂度时被认为是 O(1) 复杂度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:46:48.633

但它不必检查所有密钥。它只需要检查散列到相同值的键。而且，正如您所说，一个好的哈希码将最大限度地减少哈希冲突的数量，因此平均而言它根本不需要进行任何关键比较。

请记住，规则`GetHashCode`说 if `a.HashCode <> b.HashCode`， then `a <> b`。但如果`a.HashCode == b.GetHashCode`,`a` *可能等于* `b`。

另外，你说：

> 我知道如果 Count 小于容量（这很明显），字典的 Add 方法应该是 O(1)。

这并不完全正确。这是*理想*的，假设一个完美的散列函数将为每个键提供一个唯一的数字。但是在一般情况下，完美的哈希函数并不存在，所以通常你会看到 O(1)（或非常接近它）的性能，直到 Count 超过相当大的容量百分比：比如 85% 或 90% .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:21:58.083

答案既简单又困难。简单部分：是因为（可以自己查）

```
a.Equals(b) == false 
```

如果您在添加“b”时想要异常，只需实现 Equals 方法。

没有困难的部分：Equals 的默认对象实现调用 RuntimeHelpers.Equals。RuntimeHelpers 的来源在[这里](http://www.dotnetframework.org/default.aspx/4@0/4@0/untmp/DEVDIV_TFS/Dev10/Releases/RTMRel/ndp/clr/src/BCL/System/Runtime/CompilerServices/RuntimeHelpers@cs/1305376/RuntimeHelpers@cs)。不幸的是，该方法是外部的：

```
 [System.Security.SecuritySafeCritical]  // auto-generated
    [ResourceExposure(ResourceScope.None)]
    [MethodImplAttribute(MethodImplOptions.InternalCall)]
    public new static extern bool Equals(Object o1, Object o2); 
```

这个方法的具体实现是什么，我不知道，但我认为它基于指针（所以内存中的地址）。

# java - 如何加快列表比较/字符串替换？

> ID：16034857
> 
> 赞同：0
> 
> 时间：2013-04-16T10:36:24.180
> 
> 标签：java, performance, comparison

我有一个小程序可以读取包含类 C 宏的输入文件。该处理分两遍进行：第一遍搜索宏定义并存储它们，第二遍搜索宏调用并扩展/替换它们。

这一切都很好，但它很耗时。目前，这就是我的做法：

```
foreach token in file:
    foreach macro in macroDefinitions:
        if token equals macro.name:
            expand()
        endif
    end foreach
endforeach 
```

在这个伪示例中，“token”是源文件中的一个单词，“macro”是第一次传递的宏定义。大约有 20 000 个宏定义和 1800 个输入文件，总共需要处理大约 600 000 行（每行被分成 n 个标记）。这意味着总比较计数是（令牌计数）*（宏定义计数）。我怎样才能加快速度？我错过了什么，还是我真的必须做所有这些比较？

有关其他信息，标记是 String[] 数组中的字符串，宏是 ArrayList 类型的列表中的宏对象。我可以用其他类型的数据结构加快这个过程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:38:17.817

我建议创建一个脚本，例如`Perl`实际上执行文件处理并使用[ProcessBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)`Java`从您的代码中调用该脚本。 为每个问题使用最好的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:53:17.457

You need to use a `Map` that maps from a macro name to its definition.

In pseudo-code:

```
for each token in file:
    if this is a macro defininition:
        name, definition <- parse definition
        map.put(name, definition)

for each token in file:
    if map.contains(token):
        definition <- map.get(token):
        expand definition 
```

(**Update** - You can get rid of the `contains` call and just call `get` and then test for `null`. It is worth reading the javadocs to get a better understanding of how the Map, TreeMap and HashMap APIs work.)

Typical implementations of `Map` use either a balanced binary tree or a hash table, and have lookup and insert operations that have complexity `O(logN)` or `O(1)` (under normal circumstances).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:39:36.650

将宏定义放在 a`Map`中将大大减少查找宏所需的时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T10:41:40.267

编辑：如果您可以添加密钥，Klas Lindbäck 解决方案会更好。如果你不能，那么我提出的搜索算法将是提高搜索速度的一种方法。

您可以添加一些搜索算法，例如[二进制搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)，这将大大改善搜索结果

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T10:43:40.653

您可以使用`HashSet`包含宏定义名称的 a，并且对于每个标记，检查它是否包含在集合中：

```
for(String token : token) {
    if(macroNamesSet.contains(token)) {
        expand();
    }
} 
```

The `contains` method thake O(1) time. So overall and once the set of macro names has been created, it takes (count of tokens) time.

# iphone - 异步数据加载 iOS

> ID：16034858
> 
> 赞同：0
> 
> 时间：2013-04-16T10:36:24.803
> 
> 标签：iphone, objective-c, ios6

我在我的应用程序中使用 LazyLoader 有一个加载图像的列表，我想在数据库中添加图像时更新这个列表。我使用 NSURLConnection 加载图像

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:43:42.263

恕我直言，最简单的选择是将您的代码放在一个块中并让它异步执行。这样你就可以保持简单的流程。

**为此，请使用：**

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), 
^{

    // INSERT YOUR CODE HERE
    // Whatever you put in here will be executes asynchronously.
}); 
```

**针对 OP 的评论进行编辑：**

NSURLConnection 的方法：

```
- (id)initWithRequest:(NSURLRequest *)request delegate:(id < NSURLConnectionDelegate >)delegate 
```

不能使用。根据文档：

> 连接的委托对象。随着加载的进行，委托将接收委托消息。发送给委托的消息将在调用此方法的线程上发送。默认情况下，要使连接正常工作，调用线程的运行循环必须在默认运行循环模式下运行。请参阅 scheduleInRunLoop:forMode: 以更改运行循环和模式。

**解决方案是使用：**

```
+ (NSData *)sendSynchronousRequest:(NSURLRequest *)request returningResponse:(NSURLResponse **)response error:(NSError **)error 
```

> 为了执行同步加载，调用线程中不需要特殊的线程或运行循环配置。

**或使用：**

```
+ (void)sendAsynchronousRequest:(NSURLRequest *)request queue:(NSOperationQueue *)queue completionHandler:(void (^)(NSURLResponse*, NSData*, NSError*))handler 
```

带有块完成处理程序。

**注意：**
如果要执行的任务仅在请求完成后完成（例如调用委托），那么`sendAsynchronousRequest:queue:completionHandler:`是最好的选择。

# reporting-services - 同一报表上的仪表和图表在报表查看器中呈现不正确

> ID：16034863
> 
> 赞同：0
> 
> 时间：2013-04-16T10:36:36.167
> 
> 标签：reporting-services, rdlc, report-viewer2010

我正在使用 Visual Studio 2010 中的一个项目，我正在使用报表查看器来显示报表（.rdlc 文件）。我在报告中使用了一些组件，例如图表和仪表。当我在同一页面上的报告中放置图表和仪表时，它无法正确呈现。它只是在 HTML 中呈现为两者的组合图像。我在[technet.microsoft](http://technet.microsoft.com/en-in/library/bb677570%28v=sql.100%29.aspx)上搜索，发现 SSRS 报告中有一些渲染规则，指出报告中的图像将一起渲染。
当图表和仪表在报表的不同页面上时，正确呈现。但是，当它们在同一个页面上时，报表查看器只是将它们组合起来以 HTML 格式呈现，而不能在网页中正确呈现它们。我还尝试将仪表和图表放在不同的面板中，但它仍然呈现为组合图像。有没有其他方法可以使它们在同一页面上正确呈现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T20:18:19.887

如果您使用的是 ControlReportViewer，请尝试在其属性上设置 SizeToReportContent="True"

# python - 如何定义依赖于尚未定义的数据结构？

> ID：16034867
> 
> 赞同：2
> 
> 时间：2013-04-16T10:36:42.110
> 
> 标签：python

我想定义一个字典，以便使用一些助记符调用一个函数，比如 run()，它调用类中的一个成员函数。所以我想出了以下内容：

```
class foo:
    dict = { 'f_func' : f, 'g_func': g }
    def f():
        pass
    def g():
        pass
    def run(self, n):
        # ... do something
        dict[n]() 
```

现在的问题是 dict 中的值是尚未定义的成员函数。我怎样才能做到这一点？

或者任何其他解决方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T10:39:31.500

您稍后定义结构，在这种情况下在`__init__`方法中以确保您具有*绑定*方法：

```
class foo:
    def __init__(self):
        self.dict = { 'f_func' : self.f, 'g_func': self.g }
    def f(self):
        pass
    def g(self):
        pass
    def run(self, n):
        # ... do something
        self.dict[n]() 
```

或者，按名称查找方法：

```
class foo:
    dict = { 'f_func' : 'f', 'g_func': 'g' }
    def f(self):
        pass
    def g(self):
        pass
    def run(self, n):
        # ... do something
        getattr(self, self.dict[n])() 
```

类定义完成后，您始终可以更改类：

```
class foo:
    def f(self):
        pass
    def g(self):
        pass
    def run(self, n):
        # ... do something
        self.dict[n](self)

foo.dict = { 'f_func' : foo.f, 'g_func': foo.g } 
```

但是它存储了未绑定的方法，迫使您`self`显式地传入。

最后，您可以将定义移动到定义和函数的`dict`位置：`f``g`

```
class foo:
    def f(self):
        pass
    def g(self):
        pass

    dict = { 'f_func' : f, 'g_func': g }

    def run(self, n):
        # ... do something
        self.dict[n](self) 
```

类体像函数一样执行，本地命名空间变成类属性。现在`dict`值是函数，与未绑定方法有同样的问题；你需要`self`明确地传入。（在 Python 3 中不再有未绑定的方法，这个解决方案和之前的解决方案是等价的）。

您可能希望避免使用`dict`作为属性名称，因为它可能会导致与内置`dict`类型混淆。

# xslt - 带有和条件的 xsl 计数器

> ID：16034873
> 
> 赞同：0
> 
> 时间：2013-04-16T10:36:58.020
> 
> 标签：xslt

我有一个条件，section 元素应该同时具有 num 属性，并且 level 可以是除 level 2 之外的任何属性。如下所示。

```
<section level="sect2" num="1.">
    <title>Flowchart&#x2014;HKIAC Mediation</title>
</section>  

 <section level="sect3">
    <title>Flowchart&#x2014;HKIAC Mediation</title>
</section>

<section level="sect2">
    <title>Flowchart&#x2014;HKIAC Mediation</title>
</section> 
```

当我使用下面的 xslt 时，它只计算具有数字属性的第一个 xml 并留下第二个和第三个。但我想计算第一和第三，离开第二。

我使用了以下语句

```
<xsl:number count='section[@num]'/> 
```

但我想要类似于下面的东西

```
<xsl:number count='section[@num] and section[@level!='sect2']'/> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:42:50.587

试试这个 -

```
<xsl:number count="section[@num and @level != 'sect2']"/> 
```

对于您在评论中的问题，请尝试这意味着 num 属性不存在 -

```
<xsl:number count="section[not(@num) and @level = 'sect2']"/> 
```

你的意思是你不在乎 level=sect2 然后像这样删除它 -

```
<xsl:number count="section[not(@num)]"/> 
```

这将为您提供不存在 num 属性且 level 值不是 sect2 的计数。

```
<xsl:number count="section[not(@num) and @level != 'sect2']"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:10:25.287

据我了解，它更多：

```
<xsl:number count="section[@num or @level != 'sect2']"/> 
```

因为：但我想计算第一和第三离开第二。编辑：似乎应该是第一个和第二个什么似乎是“@level！='sect2'”的所有部分和“@num”的所有部分。

# python - 错误：视频系统未初始化（kivy，ipython）

> ID：16034874
> 
> 赞同：3
> 
> 时间：2013-04-16T10:36:58.140
> 
> 标签：python, ipython, kivy

我为 IPython 创建了以下 ipython_config.py 脚本：

```
c = get_config()
c.TerminalInteractiveShell.editor = 'C:\PROGRA~2\NOTEPA~1\NOTEPA~1.exe' 
```

现在，当我 %edit 某个文件时，我得到了相当不受欢迎的行为，也就是说，它开始在 Notepad++ 中编辑并立即执行代码。说：

```
%edit 'C:/Python27/share/kivy-examples/widgets/textinput.py' 
```

这将在 Notepad++ 中启动编辑 textinput.py（到目前为止还不错）并立即启动此应用程序（不好）。

更糟糕的是，当我第二次开始编辑时，它确实启动了 N++，但 kivy 应用程序无法再次运行，除了这个例外：

```
C:\Python27\lib\site-packages\kivy\core\window\window_pygame.pyc in flip(self)
    217
    218     def flip(self):
--> 219         pygame.display.flip()
    220         super(WindowPygame, self).flip()
    221

error: video system not initialized 
```

如何解决这个问题？也就是说，我希望 IPython 能够：

1.  等待 N++ 完成编辑（比如 WinSCP 能够识别您已使用外部编辑器完成编辑，然后才上传更改的文件）。

2.  一次运行后不要搞砸kivy发射。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:09:10.847

您需要使用[InteractiveLauncher](http://kivy.org/docs/api-kivy.interactive.html)。Tshirtman 还制作了一个小[视频](https://www.youtube.com/watch?v=S2sFqFGDu1k)，展示了如何使用它。[该功能的文档页面](http://kivy.org/docs/api-kivy.interactive.html)上提到了所有要避免的陷阱和更多详细信息。

# cmake - 在 CMake 中设置默认安装位置

> ID：16034889
> 
> 赞同：0
> 
> 时间：2013-04-16T10:37:38.883
> 
> 标签：cmake

如何使 CMake 自动将使用 add_library 添加的任何库（或使用 add_executable 的二进制文件）安装到我指定的文件夹中？例如，我想告诉它“将每个（共享）存档安装到 lib”和“将每个可执行文件安装到 bin”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:40:56.377

只需设置 EXECUTABLE_OUTPUT_PATH 和 LIBRARY_OUTPUT_PATH。这些和更常见的变量记录在这里：[http ://www.cmake.org/Wiki/CMake_Useful_Variables](http://www.cmake.org/Wiki/CMake_Useful_Variables)

# c# - 画一条波浪线

> ID：16034892
> 
> 赞同：1
> 
> 时间：2013-04-16T10:37:45.327
> 
> 标签：c#, winforms, graphics

我正在尝试在 C# 中制作泡泡麻烦游戏的副本。我需要在 Windows 窗体应用程序中创建游戏。

我使用 Graphics 进行绘图。在泡泡麻烦原始游戏中，箭头像波浪一样移动，而不是直线，我不知道该怎么做。

有一种方法可以在 Windows 窗体应用程序中以某种方式做到这一点？如果有办法，请解释我如何做到这一点。

谢谢你，阿萨夫。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:56:15.657

如下创建画笔

```
Brush zigzagBrush = new System.Drawing.Drawing2D.HatchBrush(System.Drawing.Drawing2D.HatchStyle.ZigZag, Color.Black); 
```

然后，您可以使用上面的画笔绘制线条

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:43:31.557

利用：

```
this.createGraphics.drawLines(new Point[]{}); 
```

其中点数组包含您的线角。

# c# - 将来自多个查询的结果组合成单个可查询的

> ID：16034895
> 
> 赞同：0
> 
> 时间：2013-04-16T10:37:46.803
> 
> 标签：c#, .net, entity-framework, linq-to-entities

我想搜索用户数据库并根据匹配的精确程度对结果进行排序。例如，用户名的精确匹配应出现在单个单词匹配之前的结果中。

这就是我所拥有的（变量“值”包含一个搜索词，“查询”包含一个我想修改的初始可查询）

```
 var values = value.Split(new [] {' ','\t', '\n', '\r'});

        var q1 = query.Where(u => u.Id == valueAsInt || u.ExternalId == valueAsInt);
        var q2 = query.Where(u => u.Name.Contains(value) || u.Username.Contains(value));
        var q3 = query.Where(u => values.All(i => u.Name.Contains(i)) || values.All(i => u.Username.Contains(i)));
        var q4 = query.Where(u => values.Any(i => u.Name.Contains(i)) || values.Any(i => u.Username.Contains(i))); 
```

但是，我现在想将 q1 到 q4 的结果结合起来，并有一个可以传递的新可查询对象。我还想保留查询的顺序，坦率地说，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:48:24.807

你应该使用排名。例如

```
var result = query.Select(u =>
{
    if (u.Id == valueAsInt || u.ExternalId == valueAsInt)
       return new {Rank = 1, Item = u};
    if (u.Name.Contains(value) || u.UserName.Contains(value) )
       return new {Rank = 2, Item = u};
    //Add the other conditions in here
    return new {Rank = 3, Item = u};
}).OrderBy(u => u.Rank).Select(u => u.Item); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:27:39.650

由 Silas Hansen 在评论中回答

# android - 如何更改默认文件路径

> ID：16034899
> 
> 赞同：0
> 
> 时间：2013-04-16T10:37:51.880
> 
> 标签：android

我的代码是将图库中的图像保存在默认位置 /data/data/applicationname/files

如果我将 AppPhotos 类中的路径更改为“/data/data/com.isummation.customgallery/files/”；这不是在列表中显示任何图像 ido 做什么？请帮帮我

```
 public class AndroidCustomGalleryActivity extends Activity {

 private int count;
private Bitmap[] thumbnails;
private boolean[] thumbnailsselection;
private String[] arrPath;
private ImageAdapter imageAdapter;

 Cursor imagecursor;

 int image_column_index;

  Button selectBtn;

   ProgressDialog myProgressDialog = null;

  DataBase db;

  Handler handle = new Handler(){         
  public void handleMessage(Android.os.Message message) {

    if (message.what == 1)
    {
        hideProgress();

        GridView imagegrid = (GridView) 
                      findViewById(R.id.PhoneImageGrid);
        imageAdapter = new ImageAdapter();
        imagegrid.setAdapter(imageAdapter);
    }
    else if (message.what == 3)
    {
        hideProgress();

        AndroidCustomGalleryActivity.this.finish();

    }
    else if (message.what == 2)
    {
        hideProgress();
    }
    super.handleMessage(msg);   
 };
 };

    /** Called when the activity is first created. */
    @Override
   public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
 setContentView(R.layout.gallery);

  showProgress();
  new Thread() {
       public void run() { 
         try
        {
            loadFeed();
            android.os.Message alertMessage = new android.os.Message();
            alertMessage.what = 1;
            handle.sendMessage(alertMessage);
        }
        catch(Exception e)
        {   
            android.os.Message alertMessage = new android.os.Message();
            alertMessage.what = 2;
            handle.sendMessage(alertMessage);       
        }
    }
   }.start();

     selectBtn = (Button) findViewById(R.id.selectBtn);
     selectBtn.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        // TODO Auto-generated method stub

        showProgress();
        new Thread() {
            public void run() { 
                 try
                {
                    SelecedtPhotos();
                    android.os.Message alertMessage = new  
     android.os.Message();
                    alertMessage.what = 3;
                    handle.sendMessage(alertMessage);
                }
                catch(Exception e)
                {   
                    android.os.Message alertMessage = new  
  android.os.Message();
                    alertMessage.what = 2;
                    handle.sendMessage(alertMessage);       
                }
            }
        }.start();

    }
   });

  }

    public static byte[] getBitmapAsByteArray(Bitmap bitmap) {
 ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
 bitmap.compress(CompressFormat.PNG, 0, outputStream);       
 return outputStream.toByteArray();
   }

     public class ImageAdapter extends BaseAdapter {

 private LayoutInflater mInflater;

 public ImageAdapter() {
    mInflater = (LayoutInflater)  
         getSystemService(Context.LAYOUT_INFLATER_SERVICE);
 }

 public int getCount() {
    return count;
 }

 public Object getItem(int position) {
    return position;
 }

public long getItemId(int position) {
     return position;
 }

 public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;

    if (convertView == null) {

        holder = new ViewHolder();
        convertView = mInflater.inflate(R.layout.galleryitem,  
 null);
        holder.imageview = (ImageView)  
  convertView.findViewById(R.id.thumbImage);
        holder.checkbox = (CheckBox)   
 convertView.findViewById(R.id.itemCheckBox);

        convertView.setTag(holder);
    }
    else 
    {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.checkbox.setId(position);
    holder.imageview.setId(position);

    holder.checkbox.setOnClickListener(new OnClickListener()  
    {           
        public void onClick(View v) {
            // TODO Auto-generated method stub
            CheckBox cb = (CheckBox) v;
            int id = cb.getId();

            if (thumbnailsselection[id])
            {
                cb.setChecked(false);
                thumbnailsselection[id] = false;
            } 
            else 
            {
                cb.setChecked(true);
                thumbnailsselection[id] = true;
            }
        }
    });

    /*holder.imageview.setOnClickListener(new OnClickListener()  
         {          
        public void onClick(View v) {
            // TODO Auto-generated method stub
            int id = v.getId();
            Intent intent = new Intent();
            intent.setAction(Intent.ACTION_VIEW);
            intent.setDataAndType(Uri.parse("file://" +  
              arrPath[id]), "image/*");
            startActivity(intent);
        }
    });*/

    holder.imageview.setImageBitmap(thumbnails[position]);
    holder.checkbox.setChecked(thumbnailsselection[position]);
    holder.id = position;

    return convertView;
}
}
  class ViewHolder {
ImageView imageview;
CheckBox checkbox;
int id;
}

 public void loadFeed()
  {
final String[] columns = { MediaStore.Images.Media.DATA,  
          MediaStore.Images.Media._ID };
final String orderBy = MediaStore.Images.Media._ID;

imagecursor = managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,  
           columns, null,null, orderBy);

 image_column_index =  
       imagecursor.getColumnIndex(MediaStore.Images.Media._ID);

 this.count = imagecursor.getCount();

 this.thumbnails = new Bitmap[this.count];

 this.arrPath = new String[this.count];

 this.thumbnailsselection = new boolean[this.count];

 for (int i = 0; i < this.count; i++) 
  {
    imagecursor.moveToPosition(i);
    int id = imagecursor.getInt(image_column_index);
    int dataColumnIndex =  
        imagecursor.getColumnIndex(MediaStore.Images.Media.DATA);
    thumbnails[i] =  

    MediaStore.Images.Thumbnails.getThumbnail(getApplicationContext()
   .getContentResolver(), id,MediaStore.Images.Thumbnails.MICRO_KI    ND, null);
    arrPath[i]= imagecursor.getString(dataColumnIndex);
  }

   imagecursor.close();
    }

   private void showProgress()
   {
    myProgressDialog =  
  ProgressDialog.show(AndroidCustomGalleryActivity.this,null, "Loading  
    Data...",        true); 
   }

    private void hideProgress()
  {
    if (myProgressDialog != null)
        myProgressDialog.dismiss();
  }

   ///////////////////// Get File Name from path ////////////////////////////
  public String FileName(String path)
  {
  String f = " /";
  boolean c = false;

  for(int i=path.length()-1;i>0;i--)
   {
    if(c == false)
        if(path.charAt(i) == f.charAt(1))
        {
            c = true;
            return  
        path.substring(i+1,path.length());      
        }
   }

   return "";
}

    ///////////////////// Get Extension from path ////////////////////////////
 public String fileExt(String audio)
  {
String fileName = "";
String f = " .";
boolean c = false;

  for(int I=audio.length()-1;I>0;I--)
  {
    if(c == false)

        if(audio.charAt(I) == f.charAt(1))
        {
            fileName = audio.substring(I+1, audio.length());
            c = true;
        }
   }

     return fileName;
 }

   public void SelecedtPhotos()
   {

 final int len = thumbnailsselection.length;
//  int cnt = 0;

for (int i =0; i<len; i++)
{
    if (thumbnailsselection[i])
    {
        //cnt++;

        BitmapFactory.Options options = new 
      BitmapFactory.Options();
        options.inPreferredConfig = Bitmap.Config.ARGB_8888;
        Bitmap bitmap = BitmapFactory.decodeFile(arrPath[i],  
   options);

        try {
            FileOutputStream outputStream =  
      openFileOutput(FileName(arrPath[i]), Context.MODE_PRIVATE);
            outputStream.write(getBitmapAsByteArray(bitmap));
            outputStream.close();
        } catch (Exception e) {
            e.printStackTrace();
        }

        db = new DataBase(getBaseContext()); 
        try {
            db.createDataBase();
        } catch (IOException e1) {
            e1.printStackTrace();
        }

        db.insert_update("INSERT INTO Photos(name,ext,path)  
 VALUES  ('"+FileName(arrPath[i])+"','"+fileExt(arrPath[i])+"','"+arrPath[i]+"')");

        db.close();

        File file = new File(arrPath[i]);
        boolean t = file.delete();

    }
  }
  }
  }

       import android.view.View;
      import android.widget.AdapterView;
      import android.widget.AdapterView.OnItemClickListener;
        import android.widget.ListView;

          import com.database.DataBase;
          import com.isummation.customgallery.R;

                   public class AppPhotos extends Activity{

        ProgressDialog myProgressDialog = null;

  ListView list;

  Activity activity = AppPhotos.this;

 List<AppPhotosData> picList;

  DataBase db;

  int position;

   Handler handle = new Handler(){ 
   public void handleMessage(Android.os.Message message) {

    if (message.what == 1)
    {
        hideProgress();

        list.setAdapter(new 
           AppPhotosAdapter(getApplicationContext(),activity,0,picList));
    }
    else if (message.what == 2)
    {
        hideProgress();
    }
    super.handleMessage(msg);   
};
  };

   @Override
   protected void onCreate(Bundle savedInstanceState) {
   // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
   setContentView(R.layout.photolist);

   list = (ListView) findViewById(R.id.listView1);
  list.setOnItemClickListener(new OnItemClickListener() {
      public void onItemClick(AdapterView<?> arg0, View arg1,
             int arg2, long arg3) {

        position = arg2;

        AlertDialog.Builder builder = new  
               AlertDialog.Builder(AppPhotos.this);
        builder.setTitle("Hidden Photos");
        builder.setMessage("Are you sure you want to revert the  
         photo?");
        builder.setPositiveButton("Yes", new  
         DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();

                    DialogBtn();
               }
        });
        builder.setNegativeButton("No", new  
            DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();          
               }
        });
         AlertDialog dialog = builder.create();
         dialog.show();

    }
  }); 

   showProgress();
   new Thread() {
        public void run() { 
            try
            {
                loadFeed();
                android.os.Message alertMessage = new android.os.Message();
                alertMessage.what = 1;
                handle.sendMessage(alertMessage);
            }
            catch(Exception e)
            {   
                android.os.Message alertMessage = new android.os.Message();
                alertMessage.what = 2;
                handle.sendMessage(alertMessage);       
            }
        }
    }.start();
 }

 private void showProgress()
  {
  myProgressDialog = ProgressDialog.show(AppPhotos.this,null, "Loading...",  
 true); 
}

    private void hideProgress()
 {
 if (myProgressDialog != null)
    myProgressDialog.dismiss();
}

 public void loadFeed()
{
 String filePaths = "/data/data/com.isummation.customgallery/files/";
 File outputFile1 = new File(filePaths);
 File[] files1 = outputFile1.listFiles();

 picList = new ArrayList<AppPhotosData>();

 for(File f:files1)
 {  
     AppPhotosData picObj = new AppPhotosData();

     Bitmap bmDulicated4 = BitmapFactory.decodeFile(f.getAbsolutePath());;

     picObj.setImage(bmDulicated4);
     picObj.setName(f.getName());

     picList.add(picObj);
 }
 }

  public void DialogBtn()
 {
db = new DataBase(getBaseContext()); 
try {
    db.createDataBase();
} catch (IOException e1) {

    e1.printStackTrace();
 }

 Cursor DataC = db.selectQuery("SELECT path FROM Photos where name  
     ='"+picList.get(position).getName()+"'");

if(DataC.getCount() > 0)
{
    Bitmap bitmap = picList.get(position).getImage();

    if(picList.get(position).getImage() != null)
    {
        try {
            FileOutputStream outputStream = new  
      FileOutputStream(DataC.getString(DataC.getColumnIndex("path")));
            outputStream.write(getBitmapAsByteArray(bitmap));
            outputStream.close();
        } catch (Exception e) {
            e.printStackTrace();
        }

         File file = new File("/data/data/com.isummation.customgallery 
     /files/"+picList.get(position).getName());
         file.delete();

         showProgress();
         new Thread() {
                public void run() { 
                    try
                    {
                        loadFeed();
                        android.os.Message alertMessage = new  
  android.os.Message();
                        alertMessage.what = 1;
                        handle.sendMessage(alertMessage);
                    }
                    catch(Exception e)
                    {   
                        android.os.Message alertMessage = new  
   android.os.Message();
                        alertMessage.what = 2;
                        handle.sendMessage(alertMessage);       
                    }
                }
            }.start();
    }
  }

   db.close();
 }

   public static byte[] getBitmapAsByteArray(Bitmap bitmap) {
    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
   bitmap.compress(CompressFormat.PNG, 0, outputStream);       
    return outputStream.toByteArray();
  }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:53:31.510

在 sd 卡中手动创建您的应用程序目录，然后将图像保存在该目录中。您可以尝试以下代码段。

```
 String root=Environment.getExternalStorageDirectory().toString();
                 File myDir = new File(root+"/demo_image");
                 if(!myDir.exists())
                 {
                     myDir.mkdir();
                 }

                 String fname = "Image"+String.valueOf(System.currentTimeMillis())+".jpg";
                 File file = new File (myDir, fname);
                 if (file.exists ()) file.delete (); 
                 try {
                        FileOutputStream out = new FileOutputStream(file);
                        photo.compress(Bitmap.CompressFormat.JPEG,100, out);
                        out.flush();
                        out.close();

                 } catch (Exception e) {
                        e.printStackTrace();
                 } 
```

# python - pygame中的mp3声音以慢动作出现

> ID：16034901
> 
> 赞同：2
> 
> 时间：2013-04-16T10:37:58.493
> 
> 标签：python, pygame

python正在以文件的slowmotion.bitrate播放声音。下面是代码：

```
import pygame,time
pygame.mixer.init()
pygame.mixer.music.load('backgroundmusic.mp3')
pygame.mixer.music.play(-1)
time.sleep(20)
pygame.mixer.music.stop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-25T00:07:39.887

将声音文件导出为 mp3 时，存在一定的比特率。这基本上就是声音播放的速度。如果比特率错误，声音播放太快或太慢。Pygame.mixer 设置为以您保存文件的程序的默认比特率播放内容，但如果您在线下载文件，这可能会很困难。最好使用mixer.init() 的“size”参数将比特率设置为文件之一。但是可能还有另一个问题：虽然 pygame.music 可能支持 mp3 文件，但我相信 pygame.mixer 是为 wav 文件设计的。综上所述，您的脚本没有任何问题，但最好将其保存为 .wav 文件。

# html - 使用 JW 播放器加载文件时出错媒体无法播放

> ID：16034902
> 
> 赞同：2
> 
> 时间：2013-04-16T10:37:59.983
> 
> 标签：html, iis-7, jwplayer

我是jw播放器的新用户..请帮助大家:(

 ```i use these files in head of html`

 ````
 <script type="text/javascript" src="jwplayer.js"></script>
    <script type="text/javascript">jwplayer.key="ABCDEFGHIJKLMOPQ";</script> 
```

this is my setup

```
<div id="myElement5a">Loading the player...</div>
                    <script type="text/javascript">
                jwplayer("myElement5a").setup({

                    height: 480,
                file: "vdo/9.mp4",
                file: "vdo/9.ogv",
                    abouttext:" MUHAMMAD FARID ALAM, FCA",
                aboutlink:"http://www.mfaridalam.com/",
                    image: "images/p1-fix.jpg",
                    startparam: "starttime",
                    width: 740
                    });
                    </script> 

        </div> 
```` 

`当我在笔记本电脑上玩这个而不使用互联网服务器时，它在所有浏览器本地工作正常但是当我将它上传到我的具有 ms window 2008 服务器的网络托管服务器上时......我收到了这个错误`

 `错误加载文件媒体无法播放

请帮助我需要让我的网站在几个小时内上线..

我是 jwplayer 的新用户我不只是检查一个脚本文件 jwpleyr.js 它说 jwplayer.version="6.3.3242" 所以我猜它的 jwplayer.version="6.3.3242"

谢谢如果有解决办法告诉我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T21:52:32.800

我不确定 stop() 问题？

但是您需要确保 OGV 和 MP4 MIME TYPE 都已设置，并且播放器的设置如下：

```
<script>
    jwplayer("myElement").setup({
      playlist: [{
        image: "/uploads/myPoster.jpg",
        sources: [{
          file: "/uploads/myVideo.mp4"
        },{
          file: "/uploads/myVideo.ogv"
        }]
      }]
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:49:36.813

您的网络服务器没有正确设置 OGV MIME TYPE。

这个文件 - [http://www.mfaridalam.com/beta/vdo/8.ogv](http://www.mfaridalam.com/beta/vdo/8.ogv)

具有 MIME 类型 - 文本/纯文本

但它应该有这个 MIME TYPE - video/ogv

那确实是你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-01T05:38:41.190

请确保标题内容类型应符合您的视频文件扩展名。您需要在服务器上设置 video/mp4、video/ogv。```

# apache-flex - 表达载体。 在 MXML 中

> ID：16034911
> 
> 赞同：0
> 
> 时间：2013-04-16T10:38:19.853
> 
> 标签：apache-flex, mxml

有一个更好的方法吗：

```
<Area elements="{Vector.&lt;MyClass&gt;([N01, N02, N03])}"> 
```

`Area.elements`是 MyClass 类型的 Vector，我传递的元素是在同一 MXML 文档中定义的其他 UIElement。

我的问题是我必须使用`&lt;`& `&gt;`，它很乱。

有没有更好的方法可以做到这一点，我更喜欢这样表达：

```
<Area>
    <elements>
        N01, N02, N03
    </elements>
</Area> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:56:16.443

我从来没有用 Vector 做过；但遵循标准的 MXML 约定；我希望它是这样的：

```
<Area>
    <elements>
     <Vector type="String">
        <String>N01</String>,
        <String>N02</String>,
        <String>N03</String>,
     <Vector>
    </elements>
</Area> 
```

[文档](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf5f65f-7ff1.html#WS03d33b8076db57b9626da506121e50da8d4-8000)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:09:38.557

为什么不这样：

```
<fx:Script>
    <![CDATA[
        [Bindable]
        private var myVector:Vector.<MyClass> = new <MyClass>[N01,N02,N03];
    ]]>
</fx:Script>

<Area elements="{myVector}"> 
```

我知道您指定了 MXML，但这很简单。

# c++ - 如何创建二叉树（不是二叉搜索树）

> ID：16034914
> 
> 赞同：0
> 
> 时间：2013-04-16T10:38:20.783
> 
> 标签：c++, c

请告诉我如何创建二叉树。我在谷歌上搜索，但我发现二进制搜索树的每一个地方。这是我的代码。

```
bool createTree(node* Tree,int d)
{
    bool ret_val=FALSE;
    if(Tree->d==-1)
    {
        Tree->d=d;
        return TRUE;
    }
    else
    {
        node* temp=(node*)malloc(sizeof(node*));
        if (temp==NULL)
            return FALSE;
        temp->l=NULL;
        temp->r=NULL;
        temp->d=d;
        if(Tree->l==NULL)
        {
            Tree->l=temp;
            return TRUE;
        }
        else if(Tree->r==NULL)
        {
            Tree->r=temp;
            return TRUE;
        }
        else
        {
            ret_val=createTree(Tree->l,d);
            if(ret_val)
                return TRUE;
            else
                return createTree(Tree->r,d);
        }
        return FALSE;
    }
} 
```

执行后，您可以看到该值已分配给左侧树，并且它一直在树的左侧。请帮我填写我的二叉树。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:54:41.657

这个错

```
node* temp=(node*)malloc(sizeof(node*)); 
```

它应该是

```
node* temp=(node*)malloc(sizeof(node)); 
```

但是在 C++ 代码中最好写

```
node* temp = new node; 
```

这更简单，所以你不太可能犯错误

# capybara - 如何在 Capybara 步骤中包含 Rails 视图助手

> ID：16034916
> 
> 赞同：4
> 
> 时间：2013-04-16T10:38:26.613
> 
> 标签：capybara, view-helpers

我有一个*步骤定义*：

```
Then(/^I should see the total price of the products$/) do
  # assumes all existing products are in the cart
  total = Product.find(:all).inject { |sum, p| sum + p.price }
  page.find(".total").should have_content number_to_currency(total)
end 
```

这爆炸了`undefined method 'number_to_currency' for #<Cucumber::Rails::World:0xbef8d18> (NoMethodError)`

我可以通过模拟`number_to_currency`助手的行为来模拟“总数”，但我宁愿重新使用 Rails 中的助手，因为在这一步中我对格式不感兴趣，只是计算和呈现总数。

如何在 capybara 中包含 NumberHelper 或任何视图助手以从步骤定义中访问？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-09T02:03:43.557

我在这里将助手包含在我的黄瓜测试中的方式：

*   您在 support 文件夹下创建一个文件 world.rb（或您想要的任何名称）。在我的 world.rb 中，我这样定义：

    ```
    module Helper

       include ProjectHelper
       include ProductBacklogHelper
       include ApplicationHelper
       include Capybara::DSL
       include Prickle::Capybara 

    end #end Module  
    World(Helper) 
    ```

您应该在 world.rb 中包含具有“number_to_currency”功能的帮助文件

我希望这能帮到您

# php - 即使页面刷新，如何保持 .current 类

> ID：16034917
> 
> 赞同：0
> 
> 时间：2013-04-16T10:38:32.563
> 
> 标签：php, javascript, jquery, joomla

我有以下脚本将当前类添加到`<li>`基于 Joomla 的网站中：

```
$(function(){
  $("#slide-menu > li ").click(function(e){
    e.preventDefault();
    $("#slide-menu > li ").addClass("current").not(this).removeClass("current");
  });
}); 
```

但是当我点击链接页面刷新和当前类消失这是我的html：

```
<ul id="slide-menu" class="menu menu-sidebar">
  <li class="level1 item187">
    <a class="level1" href="/plastikovye-okna-i-dveri/other/plastikovye-okna-i-dveri">
     <span>Пластиковые окна</span>
    </a>
  </li>
  <li class="level1 item188">
    <a class="level1" href="/plastikovye-okna-i-dveri-2/uncategorised/okna-rehau">
     <span>Входные двери</span>
    </a>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:46:44.977

你可以用两个东西来存储这种东西。LocalStorage 或在 Session 中，如果你想保持它完全客户端我应该使用 LocalStorage。

**本地存储**

使用 localstorage，您可以保存 currentClass。这会阻止您使用服务器端代码。

一个小例子：

```
/* Set localStorage item */
localStorage.setItem('name', 'value');

/* Get localStorage item */
localStorage.alpha;

/* Or */
localStorage['alpha']; 
```

当您将类保存在 localStorge 中时，您可以将其添加到准备好的文档中。

**会话存储**

另一种存储它的方法是在会话中。这需要向您的服务器发出请求。最好的办法是使用 Ajax（我为此使用了 jquery 库）。

一个小例子：

*设置会话*

```
/*  Client side */
function setSession($key, $value) {
   $.ajax({
     type: "POST",
     url: "setSession.php",
     data: { key: "Foo", value: "Bar" }
    });
}

/* Server side (PHP example) */
<?php
  /* secure it your self. */
  $_SESSION[$_POST['key']] = $_POST['value'];
?> 
```

*获取会话*

```
/*  Client side */
function getSession($key) {
   $.ajax({
     type: "POST",
     url: "getSession.php",
     data: { key: "Foo" }
    }).done(function( callback ) {
      return callback ;
    });
}

/* Server side (PHP example) */
<?php
  /* secure it your self. */
  echo $_SESSION[$_POST['key']];
?> 
```

*使用功能*

```
var foo = getSession("foo"); 
```

检查 currentClass 并做你的伎俩;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:42:29.647

页面刷新后，它将再次加载所有内容，因此**您无法保留它**，但您可以按照这三种方法之一来实现：

1.  向服务器发送 ajax 调用并将其保存在那里
2.  将值保存到 cookie 中，并在脚本加载时检查该 cookie 是否存在并从中加载值
3.  匹配来自请求的 URL 的当前选定元素。

祝你好运

# java - 如何像在 Java 中一样打印 unicode 字符串？

> ID：16034918
> 
> 赞同：0
> 
> 时间：2013-04-16T10:38:34.847
> 
> 标签：java, android, unicode

我想为 Android 开发调试表情符号图标问题。我的应用程序从远程服务器读取文本消息。

```
String test = String.format("%s",unicodeStr);
Log.i("xxx",test); 
```

我希望它会打印出类似“\u23434”的内容，但它会打印出“”。

所以我的问题是，我怎么能按原样打印出 unicode 字符串？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:42:35.583

```
String s = "\\u23434";
System.out.println(s); 
```

它按原样打印 unicode String。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T07:12:16.893

我现在找到另一个解决方案来解决问题

```
for (char curr : str.toCharArray()){
   //print out the character or do whatever you wanna have
   int code = curr;
   Log.i("tag",String.format("%x",code));
} 
```

# c# - MVC 模型绑定将值保持为 NULL

> ID：16034919
> 
> 赞同：5
> 
> 时间：2013-04-16T10:38:40.700
> 
> 标签：c#, asp.net-mvc-4

我试图让自定义模型绑定工作，但由于某种原因，这些值没有设置。将代码与工作代码进行比较时，该代码似乎是合法的，但它仍然没有绑定。我想这是我错过的一些微不足道的事情。

定制型号：

```
//Cluster is from Entity Framework

//BaseViewModelAdmin defines:
public List<KeyValuePair<string, string>> MenuItems;
public IPrincipal CurrentUser = null;
public Foundation Foundation; //also from Entity Framework

public class AdminClusterCreateModel : BaseViewModelAdmin
{
    public Cluster Item;
    public AdminClusterCreateModel()
    {
        Item = new Cluster();
    }
} 
```

视图形式如下：

```
@using (Html.BeginForm()) {
  @Html.ValidationSummary(true)

  <fieldset>
      <legend>Cluster</legend>

      <div class="editor-label">
          @Html.LabelFor(model => model.Item.Active)
      </div>
      <div class="editor-field">
          @Html.EditorFor(model => model.Item.Active)
          @Html.ValidationMessageFor(model => model.Item.Active)
      </div>

      <div class="editor-label">
          @Html.LabelFor(model => model.Item.Name)
      </div>
      <div class="editor-field">
          @Html.EditorFor(model => model.Item.Name)
          @Html.ValidationMessageFor(model => model.Item.Name)
      </div>

      <p>
          <input type="submit" value="Create" />
      </p>
  </fieldset>
} 
```

和控制器：

```
[HttpPost]
public ActionResult Create(AdminClusterCreateModel model, FormCollection form)
{
    if(ModelState.IsValid) //true
    {
        var test = form["Item.Name"]; //Value is correct from form (EG: Test)
        UpdateModel(model);  //no error
    }

    //At this point model.Item.Name = null <--- WHY?

    return View(model);
} 
```

应要求提供集群

```
public partial class Cluster
{
    public Cluster()
    {
        this.Team = new HashSet<Team>();
    }

    public long Id { get; set; }
    public System.DateTime Created { get; set; }
    public System.DateTime Modified { get; set; }
    public bool Active { get; set; }
    public long FoundationId { get; set; }
    public string Name { get; set; }

    public virtual Foundation Foundation { get; set; }
    public virtual ICollection<Team> Team { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T09:53:33.783

DefaultModelBinder 明确适用于“属性”，而不是“字段”

更改`public Cluster Item`为`public Cluster Item {get; set;}`in`AdminClusterCreateModel`应该可以解决问题。

```
public class AdminClusterCreateModel : BaseViewModelAdmin
{
    public Cluster Item {get; set;}

    public AdminClusterCreateModel()
    {
        Item = new Cluster();
    }
 } 
```

问候

# google-chrome-extension - 是否可以在扩展程序中构建 facebook 登录功能

> ID：16034920
> 
> 赞同：0
> 
> 时间：2013-04-16T10:38:44.427
> 
> 标签：google-chrome-extension

我想在我的 chrome 扩展中包含 facebook 登录功能。我已经包括

> popup.html 中的 connect.facebook.net/en_US/all.js 文件。但不工作。

我正在使用代码

```
window.fbAsyncInit = function() {
        // init the FB JS SDK
        FB.init({
            appId: 'APP_ID', // App ID from the App Dashboard
            //channelUrl : '//www.example.com/', // Channel File for x-domain communication
            status: true, // check the login status upon init?
            cookie: true, // set sessions cookies to allow your server to access the session?
            xfbml: true  // parse XFBML tags on this page?
        });

        // Additional initialization code such as adding Event Listeners goes here
        console.log(FB);

    };

    // Load the SDK's source Asynchronously
    (function(d, debug) {
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) {
            return;
        }
        js = d.createElement('script');
        js.id = id;
        js.async = true;
        js.src = "http://connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
        ref.parentNode.insertBefore(js, ref);
    }(document, /*debug*/false)); 
```

但出现错误

拒绝加载脚本“ [http://connect.facebook.net/en_US/all.js](http://connect.facebook.net/en_US/all.js) ”，因为它违反了以下内容安全策略指令：“script-src 'self' chrome-extension-resource:”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:13:59.973

我使用以下代码并且它可以工作，而不会损坏 CSP

```
 function loginfacebook()
    {       
        chrome.windows.create(
        {
            'url': "https://www.facebook.com/dialog/oauth?client_id=yourclientid&redirect_uri=https://www.facebook.com/connect/login_success.html&scope=email&response_type=token"
        }, null);

        chrome.tabs.query({active:true}, function(tabs){
            tabid = tabs[0].id;
            chrome.tabs.onUpdated.addListener(function(tabid, tab)
            {
                var cadena = tab.url;
                if (cadena != null)
                {
                    var resultado = cadena.match(/[\\?&#]access_token=([^&#])*/i);
                }
                if (resultado != null)
                {                                           

                    token = resultado[0];
                    token = token.substring(14);
                    storagetoken(token);
                };
            }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T02:43:44.400

如错误消息所述，Facebook 脚本不[符合 CSP 标准](https://developer.chrome.com/extensions/contentSecurityPolicy.html)。我没有看过那个脚本，但是如果你不能修改它并修复 CSP 问题，你通常有几个选项来处理这样的脚本：

1.  将其放入[沙盒 iframe](http://www.html5rocks.com/en/tutorials/security/sandboxed-iframes/)中。
2.  将脚本放在[<webview>](http://developer.chrome.com/dev/apps/webview_tag.html)中。

不幸的是，该 Facebook 脚本的重点可能是在 FB 身份验证后设置一个 cookie，并且该 cookie 将保留在 iframe 或 webview 中，因此这些方法都不会最终在您的主应用程序中获得所需的 cookie。您必须想办法将 FB 登录操作的产品（cookie）传输到您的应用程序，可能通过 postMessage。如果您完成了这项工作并取得了成功，请将您的结果发布到某个地方，例如在 GitHub 上的示例应用程序中。

# wcf - wcf 服务初始化

> ID：16034928
> 
> 赞同：0
> 
> 时间：2013-04-16T10:39:12.317
> 
> 标签：wcf, parameters, constructor

我有一个简单地包装组件方法的服务。我以编程方式创建服务，并且需要使用组件对其进行初始化（在构造函数中作为参数传入，具有 setter 方法或任何方式）。我的服务在 Windows 服务中自托管。我阅读了有关 IInstanceProvider 和 ServiceHost 方法的信息，但是我认为这可能更多地用于 DI 容器，我需要做的事情应该更简单。任何建议将不胜感激。这是我的示例代码：

1.  以编程方式创建服务：

    ```
    _plcServiceHost = new ServiceHost(typeof(PLCService));

        foreach (var plc in PLCRepository.GetAllLocal())
        {
            var baseAddress = plc.LocalEndpointName;

            var binding = new NetTcpBinding();

            _plcServiceHost.AddServiceEndpoint(typeof(IPLCService), binding, baseAddress);

            AddMetadataExchange(_plcServiceHost, baseAddress);
        }

    _plcServiceHost.Open(); 
    ```

这就是我想要的服务方式（2a 或 2b）。2a. 带设置器的 PLC 服务：

```
 [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession)]
    public class PLCService : IPLCService
    {
        #region fields
        public static volatile object HardwareLock = new object();
        private IPLCImpl _plc;
        private Semaphore _unsubscribeSem;
        private bool _isSubscribed;

        #endregion

        public void SetPLC(IPLCImpl plc)
        {
            if (plc == null) throw new ArgumentNullException("plc");

            _plc = plc;

            _plc.Connect();
        } 
```

2b。在构造函数上初始化的 PLC 服务：

```
 [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession)]
    public class PLCService : IPLCService
    {
        #region fields
        public static volatile object HardwareLock = new object();
        private readonly IPLCImpl _plc;
        private Semaphore _unsubscribeSem;
        private bool _isSubscribed;

        #endregion

        public PLCService(IPLCImpl plc)
        {
            if (plc == null) throw new ArgumentNullException("plc");

            _plc = plc;

            _plc.Connect();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:40:04.960

您可以使用上面提到的 DI（如 Unity、Castle 等）从服务外部初始化实现。

这样，您可以在`PLCService`构造函数中使用它。

# java - 通过java类调用REST Web Service

> ID：16034929
> 
> 赞同：0
> 
> 时间：2013-04-16T10:39:17.693
> 
> 标签：java, web-services, rest

我创建了一个流，它接受来自客户端的文件并执行一些操作。代码如下所示：

```
@Path("/upload")
public class UploadFile {

@POST
@Path("/file")
@Consumes(MediaType.MULTIPART_FORM_DATA)
@Produces(MediaType.MULTIPART_FORM_DATA)
public InputStream uploadFile(
        @FormDataParam("file") InputStream uploadedfile,
        @FormDataParam("file") FormDataContentDisposition fileDetails) {
        .
        .
} 
```

这个宁静的 Web 服务由一个 html 文件调用，如下所示：

```
<form action="http://localhost:8080/upload/file" method="post" enctype="multipart/form-data">

   <p>
    Select a file : <input type="file" name="file" size="45" />
   </p>

   <input type="submit" value="Upload It" />
</form> 
```

这工作得很好。我可以从 java 类中调用这个宁静的 Web 服务吗？如果是的话怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-19T14:04:21.840

您可以使用普通 java 应用程序中的 Spring RestTemplate 对象来使用您的 RESTful Web 服务，[请参阅此 - Spring REST Template](http://docs.spring.io/spring/docs/3.0.x/api/org/springframework/web/client/RestTemplate.html)

# c# - 如何访问 TreeStore 中的所有值

> ID：16034935
> 
> 赞同：0
> 
> 时间：2013-04-16T10:39:25.157
> 
> 标签：c#, gtk

我有一个`TreeStore`，我想在一个循环中遍历它的值并将一些值与某些值进行比较。

我怎样才能做到这一点？

我尝试了一个简单的循环，例如

```
TreeIter iter = new TreeIter();

if (Values.GetIterFirst(out iter))
{
    while (Values.IterNext(ref iter))
    {
        // do something
    }
} 
```

但这不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:08:43.720

我发现该`Foreach`功能可以做到这一点：

```
 private bool feIter(TreeModel model, TreePath path, TreeIter iter)
    {
        if (Values.GetValue(iter, 1) == ObjectStore)
        {
            return true; // exit loop
        }
        return false; // continue in loop
    }

    public void Blah()
    {
        Values.Foreach(feIter);
    } 
```

# performance - 流 writeheaders 花费太多时间 WCF

> ID：16034937
> 
> 赞同：3
> 
> 时间：2013-04-16T10:39:31.007
> 
> 标签：performance, wcf, stream, httpwebrequest, newrelic

[在NewRelic stream & writeHeaders](https://stackoverflow.com/questions/15654171/newrelic-stream-writeheaders)上提出了类似的问题

我`WCF`在 New Relic 上分析我的服务。有一个`WCF`服务调用另一个`WCF`服务。现在我想在调用另一个 WCF 服务时，当它创建请求时，内部进程在某处将标​​头写入请求流，这有时很慢。我在 New Relic 中找到的跟踪告诉我，对于我的一个 WCF 服务的特定方法调用我的另一个`WCF`服务的方法，大约需要`50-60`几秒钟，其中`95-100 %`的时间由 System.Net.ConnectStream.WriteHeaders 消耗。

```
Stream[url of WCF service/soap]: WriteHeaders -> 99.78 % time (approx 49 seconds). 
```

我没有得到它是什么以及如何减少这个时间？

我已经搜索过，但没有找到 ConnectStream 实际做了什么或有关它的一些细节，因此我可以找到任何方法来减少它所花费的时间。

请让我知道你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T17:06:27.337

当您调用的服务停止或被太多并发连接淹没时，我之前也看到过同样的情况。如果问题是前者，分析您的 WCF 服务可能有助于确定根本原因 - 可能由于数据库访问或其他一些 I/O 绑定进程而导致响应缓慢。如果问题是后者，您可以通过调整服务的性能来解决问题 ( [http://msdn.microsoft.com/en-us/library/ee377061(v=bts.10).aspx](http://msdn.microsoft.com/en-us/library/ee377061(v=bts.10).aspx) )

这也可以表现为 New Relic 中 ASP.NET 应用程序的“BeginRequest”。BeginRequest 或 WriteHeaders 很少表示问题确实出在发送数据本身，尽管如果您的有效负载很大，但在传输数据很小的常规调用中，会出现连接时间慢或响应慢的问题在这两个领域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:49:52.747

听起来您正在从客户端流式传输一个大文件，在一个 WCF Web 服务中捕获它，然后将数据重新写入新的 HttpWebRequest，然后将其发送到另一台主机。我想我很想尝试将数据从客户端缓冲到您的 Web 服务而不是流式传输。

去年我一直在从事一个听起来与您正在做的事情相似的项目。流式传输和缓冲之间的区别是：

流式读取（从源）然后在交互过程中写入（到目标）数据，您没有太多控制权。如果源文件很大（例如 gig 或更多），WCF 请求/响应将在请求完成之前在客户端和主机之间来回迭代十几次或更多次。

另一方面，缓冲在填充请求并将其发送到主机之前累积目标文件的全部内容，从而加快处理速度。并且由于缓冲（在内存中累积字节所需的时间）导致的性能损失被放置在客户端上，因此通常不是问题。

因此，当从客户端缓冲数据时，您的主机将收到一个带有完整字节数组（比方说）的 Http 请求，该请求已准备好重新打包到您传递到第二个目标 WCF 主机的请求中。在这一点上，您可以再次在缓冲和流式传输之间进行选择。在主机上，性能很重要，将请求流式传输到第二台主机将提高您的可伸缩性，但（再次）可能会损害您的性能速度。

在客户端：

```
 With binding
      .TransferMode =TransferMode.Buffered 'instead of Transfermode.Streamed                                                              
      .MessageEncoding = WSMessageEncoding.Text
      .TextEncoding = System.Text.Encoding.UTF8
      .MaxReceivedMessageSize = Integer.MaxValue
      .ReaderQuotas.MaxArrayLength = Integer.MaxValue
      .ReaderQuotas.MaxBytesPerRead = Integer.MaxValue
      .ReaderQuotas.MaxDepth = Integer.MaxValue
      .ReaderQuotas.MaxNameTableCharCount = Integer.MaxValue
      .ReaderQuotas.MaxStringContentLength = Integer.MaxValue
      .MaxBufferSize = Integer.MaxValue
      .MaxBufferPoolSize = Integer.MaxValue 
```

在主机方面：

```
With binding
      .TransferMode = TransferMode.Buffered
      .MaxReceivedMessageSize = Integer.MaxValue 
```

# python - 没有重复的依赖装饰器

> ID：16034940
> 
> 赞同：2
> 
> 时间：2013-04-16T10:39:36.007
> 
> 标签：python, decorator, python-decorators

在下面的代码中，我编写了依赖装饰器，它只是将一些函数作为参数并在调用装饰函数之前调用它们。所以当我使用这个脚本时，我会得到输出：

```
using f
using g
using f
using h 
```

但现在我的问题来了。如何做到不重复依赖？所以当我使用 h() 时，f() 只会被调用一次？我试图从函数中删除重复项，但例如对于 h()，它包含 wapper 和 f()。我应该以其他方式收集它们吗？

```
class depends(object):
    functs = []
    def __init__(self, *f):
        self.functs = []
        for i in f:
            self.functs.append(i)

    def __call__(self, fun):
        def wrapper():
            for i in self.functs:
                i()

            return fun()
        return wrapper

def f():
    print 'using f'

@depends(f)
def g():
    print 'using g'

@depends(g, f)
def h():
    print 'using h'

h() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:48:14.263

Python 已经在其`super`调用机制中内置了类似的东西。但是，要利用`super`，您必须将依赖项转换为基类：

```
def depends(*deps):
    def deco(func):
        def __new__(self):
            super(Dependency, self).__new__(self)
            return func()
        Dependency = type('Dependency', deps, {'__new__': __new__})
        return Dependency
    return deco

@depends(object)
def f():
    print 'using f'

@depends(f)
def g():
    print 'using g'

@depends(g, f)
def h():
    print 'using h'

h()
# using f
# using g
# using h 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:25:13.133

您需要全局记住已处理的依赖项，例如在类变量中，请参见`depends.done`此处：

```
class depends(object):
    done = []
    def __init__(self, *f):
        self.functs = f

    def __call__(self, fun):
        def wrapper():
            for i in self.functs:
                if i not in depends.done:
                    i() 
                    depends.done.append(i)

            return fun()
        return wrapper

def f():
    print 'using f'

@depends(f)
def g():
    print 'using g'

@depends(g, f)
def h():
    print 'using h'

h() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:05:44.133

您需要检查是否有任何依赖函数已以这种方式装饰，并从当前装饰函数的依赖项中排除它们的依赖关系。

此检查需要递归完成。

如果您还使用其他装饰器，这将变得更加困难。

我真的很想知道为什么以及如何使用这种结构。

# regex - 正则表达式后向匹配括号中的单词前面的表达式

> ID：16034943
> 
> 赞同：1
> 
> 时间：2013-04-16T10:39:42.077
> 
> 标签：regex, lookbehind

是否可以使用 Regex lookbehind 表达式来匹配方括号中前面的**所有**单词，在此示例中匹配单词**consectetur**和**libero ？**

Lorem ipsum dolor sit amet, consectetur [adipiscing] 精英。Nunc eu Tellus vel nunc pretium lacinia。Proin sed lorem。疯狂的 ipsum。Nunc a libero [quis] risus sollicitudin imperdiet。

我想将 MS Word 中的字典条目与条目内容分隔开。条目后面是方括号中的音标，一旦以这种方式选择它们，我会增加它们的字体，从而使它们与文本的其余部分区分开来，并与内容分隔开。

**编辑**：肯特给出的表达与单字条目完美搭配，例如：

**沸腾 ['boilin] adj 1\. vreo, uzavreo, kipući 2\. razjaren, uzrujan**

带有连字符的两个单词条目，例如：

**沸点 ['沸点] s vrelište**

但是短语动词和其他两个词条目的第一个单词被省略了，这意味着在诸如以下的条目中：

**栓出 ['bault'aut] vt isključiti; 伊兹拉努蒂**

比赛**结束****了**，而不是因为我需要它。

 **由于这是一本字典，我可以分别为每个字母范围应用正则表达式，如果我有一个正则表达式来搜索以括号前面的特定字母开头的第一个单词，我将能够解决这个问题，匹配那个词和后面的词。对于我的示例中的“B”条目，这意味着该表达式将匹配以字母 B 开头的单个单词，将两个单词条目连字符作为**沸点**，并将匹配短语动词中的“ **bolt** ”，例如“ **bolt out** ” " 以及它后面的介词，即在这种情况下为“out”。

我的字典中可能只有少数（如果有的话）两个词的词条，这些词条中的词以相同的字母开头，我真的可以忍受这么小的误差。

**EDIT2**：我在方括号之前放置了分段符，现在我在上一行的末尾有我的条目，如下所示：

**[aidwulf] s zool vrsta hijene (Proteles cristata) Aron 的胡须**

**[earanzrod] s bot divizma (Verbascum Thapsus) Abacca**

**[a'baid'on] vi biti na pomoći, stajati uz bok abide with**

**Aaron's beard**是第二行以方括号开头的条目，**Abacca**是第三行以方括号开头的条目，依此类推。

为了解决我的问题，我需要两个正则表达式。首先，我需要一个正则表达式来匹配以 Aa 开头的单词中的每个字母 Aa，并且只匹配每行最后一个单词之前的单词。在我的示例中，在第一个示例中将匹配**Aaron's**中的**A**，在第三个示例中匹配**a** in **abide**。然后我会用星号替换这封信以获得***ron 的胡须**和***bide**

 ******第二个正则表达式将匹配每行中的每个最后一个单词（包括连字符**的双单词**复合）和我之前创建的以星号开头的单词。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:46:50.337

你需要向前看，而不是向后看：

```
\w+(?=\s*\[[^]]) 
```

用 grep 测试：

```
kent$  echo "Lorem ipsum dolor sit amet, consectetur [adipiscing] elit. Nunc eu tellus vel nunc pretium lacinia. Proin sed lorem. Cras sed ipsum. Nunc a libero [quis] risus sollicitudin imperdiet."|grep -Po '\w+(?=\s*\[[^\]])'
consectetur
libero 
```

**编辑**

试试这个正则表达式：

```
[bB].+?(?=\s*\[[^]]) 
```

仍然用 grep 测试：

```
kent$  cat file
boiling ['boilin] adj 1\. vreo, uzavreo, kipući 2\. razjaren, uzrujan
with hyphenated two-word entries such as:
boiling-point ['boilin point] s vrelište
but the first word of phrasal verbs and other two-word entries is left out, which means that in the entries such as:
bolt out ['bault'aut] vt isključiti; izlanuti

kent$  grep -oP '[bB].+?(?=\s*\[[^]])' file
boiling
boiling-point
bolt out 
```********

# c# - 使用 Process.Start() 导出 svn 文件的进程挂起

> ID：16034944
> 
> 赞同：0
> 
> 时间：2013-04-16T10:39:43.227
> 
> 标签：c#, .net, svn, iis, process

我尝试执行 .cmd 以从 SVN 导出文件，它在我的本地机器（WS2003 SP2 IIS 身份：本地系统）中手动工作，但在执行服务器中失败（相同配置）。

我执行的脚本是：

```
echo.%Date%-%Time%- Username %username%>>c:\vpcheckcode\logsvn.txt

svn export %svnUrl% %srcFolder% --force --username %usr% --password %psw% 
```

如果我尝试简单地复制一个文件，没有 svn，它可以工作。

当我手动执行它时，它会记录我的用户并导出文件。在开发PC上它不记录用户但它工作，在执行服务器它不记录用户并且它不工作。

我尝试以这种方式执行 .cmd：

```
ProcessStartInfo startInfo = new ProcessStartInfo();
startInfo.CreateNoWindow = true;
startInfo.UseShellExecute = false;
startInfo.FileName = strFileName;
startInfo.WindowStyle = ProcessWindowStyle.Hidden;

startInfo.Arguments = svnUrl + " " + srcFolder+ " " + usr+" "+psw;

using (Process exeProcess = Process.Start(startInfo))
{
    pid = exeProcess.Id;
    EventLog.WriteEntry("VPCheckCodeSrvDll.ExecuteScriptSVN", "avviato pid svn: " + pid.ToString(), EventLogEntryType.Warning);

    if (!exeProcess.WaitForExit((int)_svnExportTimeout))
    {
        exeProcess.Kill(); 
```

该进程挂起，直到它被杀死。

```
C:\Documents and Settings\myuser>tlist 4980
4980 cmd.exe
   CWD:     c:\windows\system32\inetsrv\
   CmdLine: cmd /c ""C:\ANALISI\000000-xx-v90\SVN\svnExport.cmd"    https://svn.mysite.local/repos/HA/branches/H
   VirtualSize:    11332 KB   PeakVirtualSize:    15492 KB
   WorkingSetSize:  1832 KB   PeakWorkingSetSize:  1848 KB
   NumberOfThreads: 1
   2704 Win32StartAddr:0x4ad07670 LastErr:0x000000cb State:Waiting
  5.2.3790.3959 shp  0x4AD00000  cmd.exe
  5.2.3790.4937 shp  0x7C800000  ntdll.dll
  5.2.3790.5069 shp  0x77E40000  kernel32.dll
  7.0.3790.3959 shp  0x77BA0000  msvcrt.dll
  5.2.3790.4455 shp  0x7D1E0000  ADVAPI32.dll
  5.2.3790.4759 shp  0x77C50000  RPCRT4.dll
  5.2.3790.4455 shp  0x76F50000  Secur32.dll
  5.2.3790.4033 shp  0x77380000  USER32.dll
  5.2.3790.4396 shp  0x77C00000  GDI32.dll
  5.2.3790.3959 shp  0x71BD0000  MPR.dll
  5.2.3790.3959 shp  0x76290000  IMM32.DLL 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T20:39:02.820

我做了类似的事情。尝试以下操作：

更改： startInfo.Arguments = svnUrl + " " + srcFolder+ " " + usr+" "+psw;

to : startInfo.Arguments = String.Format("{0} \"{1}\" --username {2} --password {3}", svnUrl, srcFolder, usr, psw);

我假设您的 usr 和 psw 变量不包含颠覆的参数信息。此外，我的目的地包括文件名（我看不到你的完整命令行，因为它被截断了）并且还包含空格，所以我不得不将它括在引号中。如果你有空格，你的 svnUrl 应该用“%20”代替空格（同样，完整的 URL 不可见）。

# java - 如何在 div 类下找到文本

> ID：16034947
> 
> 赞同：2
> 
> 时间：2013-04-16T10:39:54.767
> 
> 标签：java, selenium, webdriver

我使用 Internet Explorer 作为浏览器来自动化测试，使用 webdriver。我的问题是，如何在 div 类下找到文本？

我的 HTML 如下所示：

```
<div class="welcome_text">
Text-Welcome Vijayanand 
```

我曾尝试使用这样的 XPath

```
WebElement webelement=driver.findElement(By.xpath("//div[@Class='welcome_text']/div"));
webelement.getText(); 
```

但我收到如下所示的错误：

```
Exception in thread "main" org.openqa.selenium.NoSuchElementException: Unable to find element with xpath == //DIV[@Class='welcome_text']/DIV (WARNING: The server did not provide any stacktrace information)

Command duration or timeout: 656 milliseconds

For documentation on this error, please visit: http://seleniumhq.org/exceptions/no_such_element.html

Build info: version: '2.32.0', revision: '6c40c18', time: '2013-04-09 17:23:22'

System info: os.name: 'Windows XP', os.arch: 'x86', os.version: '5.1', java.version: '1.6.0_05'

Session ID: 87815f2f-f6ff-4689-ac34-befb114acfe4

Driver info: org.openqa.selenium.ie.InternetExplorerDriver

Capabilities [{platform=WINDOWS, elementScrollBehavior=0, javascriptEnabled=true, enablePersistentHover=true, ignoreZoomSetting=false, browserName=internet explorer, enableElementCacheCleanup=true, unexpectedAlertBehaviour=dismiss, version=8, cssSelectorsEnabled=true, ignoreProtectedModeSettings=true, requireWindowFocus=false, allowAsynchronousJavaScript=true, handlesAlerts=true, initialBrowserUrl=, nativeEvents=true, takesScreenshot=true}]

      at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)

      at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)

      at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)

      at java.lang.reflect.Constructor.newInstance(Unknown Source)

      at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:187)

      at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:145)

      at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:554)

      at org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:307)

      at org.openqa.selenium.remote.RemoteWebDriver.findElementByXPath(RemoteWebDriver.java:404)

      at org.openqa.selenium.By$ByXPath.findElement(By.java:344)

      at org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:299)

      at internetexplorerlaunch.IElaunch.main(IElaunch.java:44) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:29:44.373

您的 XPATH 错误：

```
WebElement webelement=driver.findElement(By.xpath("//div[@Class='welcome_text']/div"));
webelement.getText(); 
```

它应该是：

```
driver.findElement(By.xpath("//div[@class='welcome_text']")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:43:30.510

尝试 By.className() 方法，如下所示。

```
WebElement webelement=driver.findElement(By.className("welcome_text"));

webelement.getText(); 
```

# c++ - 将 UTF-16 图像加载到内存中

> ID：16034950
> 
> 赞同：0
> 
> 时间：2013-04-16T10:40:02.300
> 
> 标签：c++, utf-16, id3, juce

我正在尝试加载以 UTF-16 JFIF 格式保存的 ID3 图像标签。我使用的库 (Juce) 无法解析图像，因为它假定数据是原始二进制格式。

我解析的大多数图像标签都成功地将编码报告为 ISO-8859 (latin-1)，但由于 latin-1 是 UTF-16 的子集，因此无法进行转换。

如何以我想要的原始格式获得这个 UTF16 编码的二进制块？谁能告诉我以 UTF16 格式存储图像的好处？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T12:33:48.503

latin1 不是 UTF-16 的子集！

我认为您误解了文本编码和二进制编码。UTF-16 用于字符编码，基本单位是 16 位整数（UTF-8 使用 8 位整数）。

JPEG 图片 (JFIF) 是二进制编码的，其数据永远不应通过字符编码算法进行转换。

如果你真的这样做了，那么你就不走运了，因为在二进制流上使用字符转换算法取决于当时使用的任何“源”文本字符集。

您可以尝试使用 iconv *猜测初始源字符集，将 (UTF-16) 二进制数据转换回二进制。*

# python - 在嵌套字典中为特定键获取值的优雅方法？

> ID：16034954
> 
> 赞同：2
> 
> 时间：2013-04-16T10:40:10.653
> 
> 标签：python, dictionary

我在 Python 中有一个嵌套字典。我可以`A`像这样访问元素：

```
D[0]['detLog'][n]['A'] 
```

其中 n 是从 0 到`detLog`... 在 Matlab 中我可以使用这样的东西：

```
D[0]['detLog'][:]['A'] 
```

`:`意思是“所有元素”。

Python中有类似的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T10:42:15.353

是的，使用[列表理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)：

```
[d['A'] for d in D[0]['detLog']] 
```

对于使用 Python 进行科学计算，您可能还需要查看[NumPy](http://www.numpy.org/)和[SciPy](http://www.scipy.org/)，特别是[NumPy for Matlab 用户](http://www.scipy.org/NumPy_for_Matlab_Users)文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:49:29.427

我想你想要这个，虽然它不是那么漂亮：

```
[x['A'] for x in D[0]['detLog'].itervalues() if 'A' in x] 
```

我们正在做的是从每个 dict 中提取 'A' 值（如果存在），否则不会对结果添加任何内容。

# php - 某些用户编辑数据库

> ID：16034956
> 
> 赞同：1
> 
> 时间：2013-04-16T10:40:14.723
> 
> 标签：php, sql, administrator

我想知道是否有一种方法可以让只有某些用户能够使用 PHP 从 sql 数据库中删除表，例如只允许管理人员添加和删除，而其他用户只能查看它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:53:27.923

有可能的。

首先，在最流行的数据库中，有些用户被授予了一些特权。您可以让一些用户“更好”，允许他们编辑和删除，同时让其他用户“更差”，例如。只允许他们搜索。

您可以通过以特定用户身份连接到数据库来执行此操作。

其次，您可以通过这种方式制作您的 PHP 程序，该注册用户具有某些特定权限，但您在 PHP 端验证它们，始终以“全能用户”的身份连接到数据库，但您阻止发送特定查询。

很难说哪种方法更好。出于安全原因，我看不出有什么区别，因为这里最薄弱的地方可能是 sql 连接（所以最好以不同的用户登录？）或者 PHP 登录系统（所以如果你失去了全能的用户名和密码其他用户帐户无关紧要）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:14:03.747

仅使用数据库用户的权限可以防止您的 db-credentials 被其他人查看。以防万一有人能够读取您的 php 文件。可能是在服务器上，或者是否存在安全问题，使其他人能够以明文形式查看浏览器中的 php 文件。

# android - 带有提琴手的Android HttpURLConnection：IOException：套接字已关闭

> ID：16034958
> 
> 赞同：1
> 
> 时间：2013-04-16T10:40:36.563
> 
> 标签：android, https, proxy, httpurlconnection, fiddler

我为 Android 模拟器设置了 Fiddler2，它可以工作，我可以通过 Android 浏览器查看 HTTPS 流量，但我无法使用 HttpsURLConnection 使用我的代码连接到 HTTPS 服务器：

```
 // use Fiddler's proxy:
    Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress("172.16.4.20", 8888));
    HttpsURLConnection connection = (HttpsURLConnection) new URL(url)
            .openConnection(proxy);

    connection.setRequestMethod(method);
    connection.setRequestProperty("Content-Type", contentType);
    connection.setDoInput(true);
    connection.setDoOutput(true);
    OutputStream out = connection.getOutputStream(); 
```

我有：

```
java.net.SocketException: Socket is closed 
```

在 Fiddler 中我可以看到第一个请求（我删除了主机地址）

```
CONNECT [address]:443 HTTP/1.1
Host: [address] 
User-Agent: Dalvik/1.6.0 (Linux; U; Android 4.0.4; Android SDK built for x86 Build/IMM76D)
Connection: Keep-Alive

After the client received notice of the established CONNECT, it failed to send any data. 
```

回复：

```
HTTP/1.1 200 Connection Established
FiddlerGateway: Direct
StartTime: 12:32:18.567
Connection: close 
```

上述请求响应对就像任何其他 Android 浏览器 HTTPS 连接建立一样。

之后我无法发送我的 POST 请求（因为我得到了 SocketException）。没有代理它可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:24:17.657

最可能的解释是客户端正在关闭连接，因为它对 Fiddler 的 HTTPS 解密证书不满意。您是否已将设备配置为信任 FiddlerRoot.cer 证书文件？您是否已将事件处理程序附加到您的 HttpsURLConnection 以接受 Fiddler 的自签名证书？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T14:17:04.133

原因可能是应用程序使用了证书固定。它不信任设备“信任库”中的任何证书，而是配置为仅信任特定证书（由服务器签名）。

因此，当 Fiddler 提供自己的证书时，客户端会引发错误。

更多详情：[https ://security.stackexchange.com/questions/29988/what-is-certificate-pinning](https://security.stackexchange.com/questions/29988/what-is-certificate-pinning)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T05:39:01.517

我在我的 iPhone 上遇到了同样的问题。
我所做的是从您的移动设备（在您的情况下为您模拟的 Android 设备）访问此 url
ht_tp(remove the under score)://(replace_with_the_ip_of_the_host_where_fiddler_is_running):8888
然后您将看到此链接上描述的网页 [单击此](http://fiddler2.com/documentation/Configure-Fiddler/Tasks/ConfigureForiOS)
您需要安装证书。之后，您将在 fiddler 中显示响应。

享受！

# ruby - 存根（...）收到意外消息（...）（无参数）

> ID：16034960
> 
> 赞同：3
> 
> 时间：2013-04-16T10:40:49.667
> 
> 标签：ruby, unit-testing, testing, stub, rr

我尝试使用 RR 编写测试。我需要的是模型对象的存根。

```
describe ApplicationController do

  subject(:application_controller)     { ApplicationController.new }
  let(:messages)                       { ['a1', 'a2', 'a3' ] }
  let(:model)                          { Object.new }

  it 'should copy errors to flash' do
    stub(model).error_messages { messages }
    flash[:error] == nil
    subject.copy_errors_to_flash(model)
    flash[:error].should == messages
  end

end 
```

我得到的是

```
ApplicationController should copy errors to flash
     Failure/Error: stub(model).error_messages { messages }
       Stub #<Object:0x007ffaa803f930> received unexpected message :error_messages with (no args)
     # ./spec/controllers/application_controller_spec.rb:10:in `block (2 levels) in <top (required)>' 
```

我不知道我做错了什么。我想我遵循文档...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T10:44:11.797

您在此行的模型存根上调用方法 'error_messages：

```
stub(model).error_messages { messages } 
```

我认为您实际上想在这里做其他事情，很可能是：

```
model.should_receive(:error_messages).and_return(messages) 
```

它为 error_messages 创建了一个存根方法，并在您的规范测试调用 model.error_messages 时使用您的消息数组进行响应

# google-maps - 带有用户照片的谷歌地图 v3 街景

> ID：16034962
> 
> 赞同：0
> 
> 时间：2013-04-16T10:40:55.033
> 
> 标签：google-maps, google-maps-api-3

在谷歌地图街景 v2 中，我可以在这里显示用户照片： [panoramio](http://blog.panoramio.com/2009/02/explore-more-with-user-photos-in-street.html)，如何在谷歌地图 v3 中启用或添加此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:56:42.777

使用 google map api v3，您可以在街景中制作用户照片。检查以下链接

[https://developers.google.com/maps/documentation/javascript/streetview#StreetViewPanoramas](https://developers.google.com/maps/documentation/javascript/streetview#StreetViewPanoramas)

# c# - Masterpage controllist 只返回一些控件

> ID：16034965
> 
> 赞同：0
> 
> 时间：2013-04-16T10:40:56.423
> 
> 标签：c#, asp.net

我的 ASP.Net 页面有一点问题。

我正在尝试从母版页代码中的母版页获取所有控件。

我使用此代码对子页面进行了此操作

```
foreach (Control ctrl in ContentPlaceHolder1.Controls)
{
    if (ctrl.GetType() == typeof(Label))
    {
        //Do Stuff...
    }
} 
```

但是当我尝试使用其他控件时

```
foreach (Control ctrl in this.form1.Controls) 
```

它不能完全工作。

我得到了 3 个标签，但无法访问其余标签。

这是我的 ASP 代码的一部分

```
<div style="float: right;">
    <ul class="main-language language-level main-language-level-0" >
        <li><a href="">
                <asp:Label runat="server" Text="Deutschland" ID="lbl_Language"/>
            </a>
            <ul class="language-level main-language-level-1">
                <li>
                    <a href="?Lng=EN">
                        <asp:Label ID="lbl_English" runat="server" Text="United Kingdom" ForeColor="#0D679C" Font-Names="Century Gothic" />
                    </a> 
                    <span>English</span>
                </li>
                <li>
                    <a href="?Lng=DE">
                        <asp:Label ID="lbl_German" runat="server" Text="Deutschland" ForeColor="#0D679C" Font-Names="Century Gothic" />
                    </a>
                    <span>Deutsch</span>
                </li>
            </ul>
            <img class="menu-image" src="Images/arrow_languageselection.png" />
        </li>
    </ul>
    <br />
    <a href="CustomerServiceLogin.aspx?Lgn=22TR" runat="server" id="LogLink">
        <asp:Label CssClass="ButtonOrange" runat="server" ID="lbl_Login" />
        <asp:Label CssClass="ButtonOrange" runat="server" ID="lbl_Logoff" Visible="false" />
    </a>
</div> 
```

我能找到的唯一标签是`lbl_Language`,`lbl_English`和`lbl_German`

有人对此有解决方案吗？

真挚地

卡恩范贝克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:02:13.363

如果您无法访问的标签嵌套在另一个控件中，那么当您遍历 form1.controls 时，它们将不会被返回。您将需要一个递归解决方案来返回所有控件。

```
foreach (Control ctrl in this.form1.Controls)
{
    if (ctrl.Controls.Count > 0)
    {
        // do recursive call
    }
} 
```

# ios - 使用新的苹果面板生成推送通知 ssl 证书和配置以进行开发？

> ID：16034968
> 
> 赞同：2
> 
> 时间：2013-04-16T10:41:11.580
> 
> 标签：ios, push-notification, apple-push-notifications

使用[此](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)链接我尝试制作推送通知应用程序。

但是，这使用了旧的苹果面板来生成 ssl 和提供证书。

有人使用新的苹果面板生成 ssl 和配置吗？

下面的步骤生成ck.pem

> 1) $ openssl x509 -in aps_developer_identity.cer -inform der -out PushChatCert.pem
> 
> 2) $ openssl pkcs12 -nocerts -out PushChatKey.pem -in PushChatKey.p12
> 
> 输入导入密码：
> 
> MAC 验证正常
> 
> 输入 PEM 密码：
> 
> 验证 - 输入 PEM 密码：
> 
> 3) $ cat PushChatCert.pem PushChatKey.pem > ck.pem
> 
> 4) $ telnet gateway.sandbox.push.apple.com 2195
> 
> 正在尝试 17.172.232.226...
> 
> 连接到 gateway.sandbox.push-apple.com.akadns.net。
> 
> 转义字符是 '^]'。

这是正确的步骤吗？

请帮我......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:03:41.320

您仍然可以使用[供应和开发](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ProvisioningDevelopment/ProvisioningDevelopment.html#//apple_ref/doc/uid/TP40008194-CH104-SW1)指南。他们还没有为新`Certificates, Identifiers & Profiles`页面修改它（它取代了`iOS Provisioning Portal`），但这并没有太大的区别。

在以下屏幕中单击`Identifiers`：

![在此处输入图像描述](https://i.stack.imgur.com/RCNpe.png)

然后点击相关的 App ID（如果不存在，则创建一个新的）。

然后单击`Edit`。

然后确保启用旁边的复选框`Push Notifications`（如果未启用，请选中）。

然后单击`Create Certificate...`或`Development`。`Production`

该过程的其余部分应与门户更改之前的方式相同，因此您可以使用我提供的链接中的说明，或其他教程中的说明（例如您提供的链接中的说明）。

# c# - 字符串到 C# 中的枚举

> ID：16034970
> 
> 赞同：-2
> 
> 时间：2013-04-16T10:41:16.223
> 
> 标签：c#, enums

我需要将一个字符串分配给一个`Enum`值。我的场景和代码如下

我正在访问一个网络服务方法说`addWhere(int i ,int j,Comparison)`

其中比较是枚举类型。

我正在从 UI 中获取值并将其保存在字符串中

```
string strComparison= "AND"; or

string strComparison= "OR" 
```

我需要将这些值设置为`ENUM`. 我尝试了下面的代码

```
addWhere(2 ,3,Enum.Parse(typeof(Comparison),strComparison)) 
```

但没有奏效。解决此问题或任何替代方法的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:43:05.833

看起来你错过了回归演员，即

```
(Comparison)Enum.Parse(typeof(Comparison), strComparison); 
```

[Enum.Parse](http://msdn.microsoft.com/en-GB/library/essfb559.aspx)返回一个`object`，因为您的`addWhere`方法需要一个`Comparison`类型值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:45:05.793

您必须将结果`Enum.Parse`转换为正确的类型：

```
addWhere(2, 3, (Comparison)Enum.Parse(typeof(Comparison), strComparison)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:45:48.740

您可以执行以下操作：

```
Comparison comparison;
if(Comparison.TryParse(strComparison, out comparison))
{
   // Work with the converted Comparison
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T10:55:57.680

正如之前的帖子中所说，您可能缺少类型转换。

```
enum Comparision
{
        AND,
        OR
}

class Program
{
    static void Main(string[] args)
    {
        Comparision cmp = (Comparision)Enum.Parse(typeof (Comparision), "And", true);
        Console.WriteLine(cmp == Comparision.OR  );
        Console.WriteLine(cmp == Comparision.AND);
    }
} 
```

# php - Mysql结果限制输出

> ID：16034972
> 
> 赞同：0
> 
> 时间：2013-04-16T10:41:22.093
> 
> 标签：php, html, mysql, arrays

我在实现一些输出以回显来自数组的结果列表时遇到问题。我想创建一个实时搜索引擎，通过使用 AJAX 的 keyup-function 运行查询。

当输出将针对表中列出的每个匹配项进行回显时，一切正常。现在我想合并所有重复的条目。

代码如下：

```
$search_term = $_POST['search_term'];

$where = "";

$search_term = preg_split('/[\s]+/', $search_term, -1, PREG_SPLIT_NO_EMPTY);
$total_search_terms = count($search_term);

$total_search_term = 0;

foreach ($search_term as $key=>$value) {

    $total_search_term = $total_search_term + 1;

    if ($total_search_term === 1){
        if (is_numeric($value) ){
            $where .= "(`a` LIKE '%$value%')";
        } else {
            $where .= "(`b` LIKE '%$value%')";
        }
    }else if ($total_search_term > 1){
        $where .= " AND ";

        if (is_numeric($value) ){
            $where .= "(`a` LIKE '%$value%')";
        } else {
            $where .= "(`b` LIKE '%$value%')";
        }
    }   
}
$duplicate = $db->query("SELECT a, b, COUNT(*) counter
                        FROM `table`
                        GROUP BY a, b
                        HAVING COUNT(*) > 1
                        ");

$check = $duplicate->fetch_assoc();
$query = $db->query("SELECT a, b FROM table WHERE $where");
$result = $query->num_rows;

if ($result !== 0 ){
    echo '<li id="hit">There are $result results!</li>';

    while ($row = $query->fetch_assoc() ) {

    echo '<li>', 
    $row["a"], 
    ' ', 
    $row["b"],  
    '</li>';
    }
} else {
        echo '<li id="hit">no result!</li>';
    } 
```

举一个输出的例子：

```
There are 3 results!
12345 New 
12345 New
56789 Chicago 
```

那应该是这样的：

```
There are 3 results!
12345 New (2x)
56789 Chicago 
```

所以表格是：

```
a     |    b
12345   New 
12345   New
56789   Chicago 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:36:53.620

我想到了这样的事情：

```
$query = $db->query("SELECT a, b, COUNT(*) counter FROM `table` WHERE ".$where." GROUP BY a, b");
$result = $query->num_rows;
if ($result !== 0 ){
  $resultSizeQuery = $db->query("SELECT COUNT(*) counter FROM `table` WHERE ".$where);
  $resultSize = $resultSizeQuery->fetch_assoc();
  echo '<li id="hit">There are '.$resultSize["counter"].' results!</li>';
  while ($row = $query->fetch_assoc() ) {
    echo '<li>'.$row["a"].' '.$row["b"];
    echo ($row["counter"] > 1 ? " (".$row["counter"]."x)" : "");
    echo '</li>';
  }
} else {
    echo '<li id="hit">no result!</li>';
} 
```

将“$duplicates = ...”中的所有行替换到最后它应该可以工作。试一试，因为有时应该考虑问题之前的步骤。

问候

副歌

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:58:15.733

首先，您的语句将只返回 1 行与纽约，列计数器将有 2。芝加哥丢失，因为计数器只有 1。所以我认为您的结果看起来像：有 1 个结果！12345 纽约

如果您想获得“3 个结果”，只需执行 2 个查询，一个查询行数（只需省略 group 和 having 子句，也不要要求 a 和 b）。所以你得到输出：有 3 个结果！

接下来，您必须省略获取所有行（也包括没有重复行的行）的 having 子句。你可以这样写： echo ($row["a"].' '.$row["b"].($row["counter"] > 1 ? " (".$row["counter"]. “X）” ： ””）

我希望这有帮助。

问候

帕拉斯库斯

# ios - 当用户点击视图外的任意位置时关闭视图

> ID：16034975
> 
> 赞同：8
> 
> 时间：2013-04-16T10:41:31.393
> 
> 标签：ios, cocoa-touch, uiview

我有一个非常复杂的应用程序，其中包含许多按钮、绘图区域和其他自定义触摸处理的堆叠视图。我正在显示一个可拖动的辅助视图，它可以位于所有其他视图之上。如果用户点击辅助视图之外的任何位置，我需要关闭此视图。我尝试使用多个 UIWindows 并将 Gesture 识别器添加到 UIWindow 。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-16T11:35:21.937

一个简单的方法是添加一个透明按钮，其边界等于超级视图的边界。超级视图在您的辅助视图下方插入透明按钮。

透明按钮添加了一个单击事件，该事件可以关闭辅助视图和它自己的透明按钮。

例如 ：

```
UIButton *transparencyButton = [[UIButton alloc] initWithFrame:superview.bounds];
transparencyButton.backgroundColor = [UIColor clearColor];
[superview insertSubview:transparencyButton belowSubview:helperView];
[transparencyButton addTarget:self action:@selector(dismissHelper:) forControlEvents:UIControlEventTouchUpInside]; 
```

该`dismissHelper:`方法可以做到这一点：

```
- (void)dismissHelper:(UIButton *)sender
{
    [helperView dismiss];
    sender.hidden = YES;
    // or [sender removeFromSuperview]
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-16T10:51:41.140

您可以通过触摸并查看触摸的 .view 属性来检查被触摸的视图。它反映了视图实际起源的视图。

假设您保留对您的视图的引用（通过 IBOutlet 或其他方式）对您称为“myView”的视图的引用，则以下工作。

在您的 .m 文件中。touchesBegan: 函数在用户每次触碰手指时触发。我们遍历触摸以查看触摸的原始视图是否不等于“myView”。这种比较也可以通过检查您用来识别视图的类、标签或任何其他属性来完成。下面给出的例子。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event  {
    NSLog(@"touches began");
    UITouch *touch = [touches anyObject];   
    if(touch.view!=myView){
       myView.hidden = YES;
    }
} 
```

或者在使用标签的情况下：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event  {
    NSLog(@"touches began");
    UITouch *touch = [touches anyObject];   
    if(touch.view.tag!=23){
       myView.hidden = YES;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-20T07:02:18.777

创建一个 hittestintercept 视图。这可以使下面的视图像以前一样处理事件。

```
@protocol HitTestInterceptViewDelegate <NSObject>

- (BOOL)interceptHitTest:(CGPoint)point withEvent:(UIEvent *)event;

@end

@interface HitTestInterceptView : UIView

@property(nonatomic, weak) id<HitTestInterceptViewDelegate> hitTestInterceptDelegate;

@end 
```

HtiTestInterceptView.m

```
#import "HitTestInterceptView.h"

@implementation HitTestInterceptView

- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {
    if ([_hitTestInterceptDelegate interceptHitTest:point withEvent:event] == NO) {
        return [super hitTest:point withEvent:event];
    }
    return nil;
}

@end 
```

然后在 toast 视图中使用它

```
- (void)dismissIfTouchOutsideInView:(UIView *)view {
    if (_interceptView != nil) return;
    _interceptView = [[HitTestInterceptView alloc] initWithFrame:view.bounds];
    _interceptView.backgroundColor = [UIColor clearColor];
    _interceptView.hitTestInterceptDelegate = self;
    [view insertSubview:_interceptView belowSubview:self];
}

- (BOOL)interceptHitTest:(CGPoint)point withEvent:(UIEvent *)event {
    dispatch_async(dispatch_get_main_queue(), ^{
        // [self dismiss];
    });
    return YES;
} 
```

# language-agnostic - 什么是长嵌套 if else 构造的替换？

> ID：16034976
> 
> 赞同：1
> 
> 时间：2013-04-16T10:41:33.483
> 
> 标签：language-agnostic

我有一个嵌套的 if else 结构，如下所示，我想用正确类型的编程语句替换它。

```
if($provider[0][0]=='A' && $provider[1][0]=='B'){
   return 'O';
}elseif($provider[0][0]=='B' && $provider[1][0]=='A'){
   return 'O';
}elseif($provider[0][0] == 'A' && $provider[1][0] == '' ){
   return 'A';
}elseif($provider[0][0] == 'B' && $provider[1][0] == '' ){
   return 'B';
} else{
   return 'Return nothing';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:49:01.517

并不是真正避免嵌套，而是简化阅读：

```
<?php

function isOprovider($provider) {
    return $provider[0][0]=='A' && $provider[1][0]=='B' 
           || $provider[0][0]=='B' && $provider[1][0]=='A';
}

function isAprovider($provider) {
    return $provider[0][0] == 'A' && $provider[1][0] == '';
}

function isBprovider($provider) {
    return $provider[0][0] == 'B' && $provider[1][0] == '';
}

if (isOprovider($provider)) {
     return '0';
} else if (isAprovider($provider)) {
     return 'A';
} else if (isBprovider($provider)) {
     return 'B';
} else {
     return 'Return nothing';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:46:55.933

使其更具可读性的选项之一-

```
if($provider[0][0]=='A') {
   // other condition(s)
} else if($provider[0][0]=='B') {
   // other condition(s) 
} else {
  // return nothing
} 
```

你也可以试试switch。无论如何，您都需要嵌套条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T21:52:52.640

我会用数据替换大部分代码，然后使用循环从数据中选择正确答案。这里的想法是将政策和实施分开。政策是：给定不同的提供者组合，我应该返回什么？实施是....好吧，实施。

这个例子是用 Ruby 编写的，但这个想法适用于任何语言。

表示策略的数据可能如下所示：

```
PROVIDER_COMBOS = [
  ['A', 'B', 'O'],
  ['B', 'A', 'O'],
  ['A', '', 'A'],
  ['B', '', 'B'],
] 
```

并且使用它的代码可能如下所示：

```
def lookup_provider_combo(provider1, provider2)
  PROVIDER_COMBOS.each do |key1, key2, result|
    if provider1[0] == key1 && provider2[0] == key2
      return result
    end
  end
  return 'Return nothing'
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T17:55:49.137

从技术上讲， if..else 语句不是嵌套的。它是平的。此外，它在技术上已经处于最低复杂度的状态。这是相当简单的代码。它确实“看起来”很乱。让它看起来凌乱的事情是它的冗长（不要将冗长/凌乱与复杂性混淆）。

但是你抱怨冗长是对的。冗长的代码，尤其是有很多重复位的代码，会损害可读性。对于示例中的代码，要使其更具可读性，您可以做的第一件显而易见的事情就是分解数组语法：

```
p1 = $provider[0][0];
p2 = $provider[1][0];

if (p1 == 'A' && p2 == 'B') {
   return 'O';
} elseif (p1 == 'B' && p2 == 'A') {
   return 'O';
} elseif (p1 == 'A' && p2 == '' ) {
   return 'A';
} elseif (p1 == 'B' && p2 == '' ) {
   return 'B';
} else {
   return 'Return nothing';
} 
```

仅此一项就消除了代码中的杂乱无章，使逻辑更加清晰。您可以做其他事情来从上面的代码中删除更多重复的位以使其更加清晰，但它们都归结为上面的代码所做的事情：基本上是一个条件和结果表。

在`switch`语句接受字符串作为输入的语言中，您可以简单地将两个条件连接成一个字符串作为切换条件：

```
switch (join([p1,p2],',')) {
    'A,B'   : return 'O'; break;
    'B,A'   : return 'O'; break;
    'A,'    : return 'A'; break;
    'B,'    : return 'B'; break;
    default : return 'Return nothing'; break;
} 
```

这使得您正在做的是咨询表格变得更加明显。或者，您可以使用三元运算符实现类似的布局：

```
cond = join([p1,p2],',');

return cond == 'A,B' ? 'O' :
       cond == 'B,A' ? 'O' :
       cond == 'A,'  ? 'A' :
       cond == 'B,'  ? 'B' :
       'Return nothing'; 
```

诚然，这仍然有`cond ==`重复。但与原始 if..else 语句相比，查看该表稍微容易一些。

在具有字典/关联数组/哈希的语言中，您可以简单地将逻辑编码到数据结构中并简单地读取该数据结构：

```
conditions = {
    'A' : {
        'B' : 'O',
        ''  : 'A'
    },
    'B' : {
        'A' : 'O',
        ''  : 'B'
    }
}

result = conditions[p1][p2];

return result ? result : 'Return nothing'; 
```

或者，您也可以使用以下数据结构：

```
conditions = {
    'A,B' : 'O',
    'B,A' : 'O',
    'A,'  : 'A',
    'B,'  : 'B'
}

result = conditions[join([p1,p2],',')];

return result ? result : 'Return nothing'; 
```

将条件逻辑保留为纯数据而不是代码，这使得我们正在做的是查找表变得更加明显。将条件保留为纯数据的另一个优点是，您可以在运行时通过从文件（或从 Internet 上的套接字）读取数据结构来潜在地创建数据结构。例如，逻辑可能被编码为 JSON 或 YAML 格式的文件，您可以使逻辑可编程。

如您所见，有很多方法可以做到这一点，但这取决于您的编程语言中可用的功能。它们都具有相同的复杂性（并且大多数编译成相同的东西）。唯一的区别在于可读性和可维护性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T11:11:39.353

我会做这样的事情：

```
function IsCombinationOf($first, $second, $provider) {
    return ($provider[0][0]==$first && $provider[1][0]==$second) || 
           ($provider[0][0]==$second && $provider[1][0]==$first);
}

if(IsCombinationOf('A', 'B', $provider)){
    return 'O';
}
elseif(IsCombinationOf('', '', $provider)){
    return 'Return Nothing';
}
elseif(IsCombinationOf('A', '', $provider)){
    return 'A';
}
elseif(IsCombinationOf('B', '', $provider)){
    return 'B';
} 
```

# html - 两个全宽并排的容器（每个容器都可以隐藏）

> ID：16034979
> 
> 赞同：0
> 
> 时间：2013-04-16T10:41:37.770
> 
> 标签：html, css, html-table

我搜索了很多，但现在想问，因为我没有找到答案：

如果有两个 div 元素应该彼此相邻且全宽（每个元素正好是全宽的 50%）。可能是第一个或第二个 div 被隐藏（style="display=none"）。在这种情况下，另一个 div 应该全宽显示。

我的解决方案是这样的：

```
<table style="width: 100%;">
    <tr>
        <td style="padding: 0px;">
            <div id="div1">
                ...
            </div>
        </td>
        <td style="padding: 0px;">
            <div id="div2">
               ...
            </div>
        </td>
    </tr>
</table> 
```

这几乎是完美的，但是当两个 div 都显示时，第一个似乎是 55%，第二个是宽度的 45%。

如果当然我可以在隐藏另一个时将 div 的宽度设置为 100%，但我想避免这样做。

当两者都显示时，有没有人有解决方案使它们都达到 50%。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:00:32.133

**没有表的 JQuery 方法**

您可以使用 JQuery（或纯 javascript）来实现这一点，我假设您无论如何都在使用它来显示/隐藏元素。

```
$("#ButtonOne").click(function () {
    $(".one").toggle();
    if($(".one").is(":visible")){
        $(".two").css("width", "50%");
    }
    else{
        $(".two").css("width", "100%");
    }
});
$("#ButtonTwo").click(function () {
    $(".two").toggle();
    if($(".two").is(":visible")){
        $(".one").css("width", "50%");
    }
    else{
        $(".one").css("width", "100%");
    }
}); 
```

上面的 JQuery 假设有两个按钮用于切换元素的可见性。

[这是一个例子](http://jsfiddle.net/RKR88/1/)

在这个例子中，应该注意的是，使用 50% 的宽度`inline-block`需要元素之间的零空白。因此`</div><div...`要求。

您还需要一些`vertical-align:top;`以确保 DIV 元素保持一致。

* * *

万一链接中断，这里是随附的 HTML ...

```
<div class="main">
    <div class="one">this is one</div><div class="two">this is two</div>
</div>
<input type="button" id="ButtonOne" value="Toggle one" />
<input type="button" id="ButtonTwo" value="Toggle two" /> 
```

...和CSS ...

```
body{
    margin:0;
    padding:0;
}
div{
    margin:0;
    padding:0;
}
.one {
    background-color:red;
    height:100px;
    width:50%;
    display:inline-block;
}
.two {
    background-color:blue;
    height:100px;
    width:50%;
    display:inline-block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:01:33.997

使用`table-layout:fixed`：

编辑：

您必须在 td 上设置 display:none，而不是在 div 上。

```
<table style="width: 100%; table-layout:fixed">
<tbody>
    <tr>
        <td style="padding: 0px; width:50%">
            <div id="div1" style="border: 1px solid black">
                This is a long text This is a long text This is a long text This is a long text This is a long text This is a long text This is a long text This is a long text This is a long text This is a long text 
            </div>
        </td>
        <td style="padding: 0px; width:50%; display: none;">
            <div id="div2" style="border: 1px solid black">
               This isn't as long as the other text.
            </div>
        </td>
    </tr>
</tbody>
</table> 
```

我已经在 Chrome、Firefox 和 IE10 上测试过了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T11:23:04.213

您可以将两个 div 放在同一个表格单元格中吗？

```
<table style="width: 100%;">
    <tr>
        <td>
            <div id="div1">
                ...
            </div>
            <div id="div2">
               ...
            </div>
        </td>
    </tr>
</table> 
```

你可以简单地切换一个类....

```
table { width: 100%; padding:0; }
td { padding:0; margin:0; }
td > div { width: 50%; display: block; float: left; height: 50px; cursor: pointer; }
#div1 {background: #a00;}
#div2 {background: #00a;}
.wide {width: 100%;}
.hide { display: none;} 
```

和jQuery ...

```
$('div').click(function () {
    $(this).toggleClass('wide');
    $('div').not(this).toggleClass('hide');
}); 
```

[**在这里演示**](http://jsfiddle.net/NotInUse/9VeP3/1/)

可以轻松地为多个 div 工作：[演示 2](http://jsfiddle.net/NotInUse/9VeP3/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T13:39:48.057

您可以通过在 td 本身中设置宽度来实现这一点，当您想要隐藏任何一个 div 时，只需添加“display:none;” 在指定的 td 而不是 div 中，则剩余的 div 将具有 100% 的宽度。

```
 <table style="width: 100%;">
        <tr>
            <td style="padding: 0px; width:50%;">
                <div id="div1" >
                    hii
                </div>
            </td>
            <td style="padding: 0px;width:50%;">
                <div id="div2" style="">
                   byyee
                </div>
            </td>
        </tr>
    </table> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T12:24:51.723

好了朋友们，

谢谢你的帮助。现在我找到了我正在寻找的东西：

```
<table style="width: 100%;">
    <tr>
        <td id="td1" style="padding: 0px; min-width:50%;">
            <div>
                ...                       
            </div>
        </td>
        <td id="td2" style="padding: 0px; min-width:50%;">
            <div>
                ...                       
            </div>
        </td>
    </tr>
</table> 
```

两个 td 标签彼此相邻，并且都占 50%。隐藏 td1 或 td2 时，另一个 td 自动进入全宽。

此致...

# c - 如何将结果从一个函数传递到另一个函数？

> ID：16034983
> 
> 赞同：0
> 
> 时间：2013-04-16T10:41:43.897
> 
> 标签：c, function

请考虑以下代码示例：

```
int func1(int,int); // function 1 prototype
int func2(int); // function 2 prototype 
```

我正在尝试将函数 1 的输出作为函数 2 的输入发送，但到目前为止还没有成功。

如果有人可以用一个例子解释一下，那就太好了。此外，传递值和传递引用是否相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:42:59.987

简单点怎么样

```
int x = func2(func1(1,2)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T10:43:08.570

```
int a = func2(func1(7, 9)); 
```

只需将包含调用的表达式`func1`作为参数传递给`func2`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T10:46:29.740

您可以通过嵌套函数来做到这一点：

```
func2( func1(42, 24) ); 
```

嵌套大量函数很容易变得难以阅读，因此为了提高可读性，您可以将 func1 的返回值存储在一个临时变量中：

```
int tmp = func1(42, 24);
func2(tmp); 
```

关于您关于按引用传递与按值传递的问题：在所有这些函数调用中，参数都是按值传递的。这是因为函数签名将参数定义为`int`，而不是`int *`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T11:56:54.293

正如其他答案所说：`func2( func1(1, 2) );`

在 C 中，您只能按值传递参数。话虽如此，传递指向您要更改的内存的指针的值与通过引用传递相同的效果。

```
int foo(int *x){
   printf("The address that you passed to the function is: %x", x);
   printf("The value is: %d", *x);
   *x = 10;
}
int mem;
foo(&mem); //print the address of mem 
```

在 C++ 中，您可以通过引用传递。

```
int foo(int &x){
   printf("The address that you passed to the function is: %x", &x);
   printf("The value is: %d", x);
   x = 10;
}
int mem;
foo(mem); //print the address of mem 
```

# javascript - JavaScript 创建派生类而不调用超类构造函数

> ID：16034984
> 
> 赞同：2
> 
> 时间：2013-04-16T10:41:46.187
> 
> 标签：javascript

所以我通过使用它们的构造函数来定义类，并在这些函数中定义它们的所有属性，并执行构造函数，例如设置侦听器等。在定义了构造函数之后，我将它的所有函数直接添加到它的原型中。

要进行继承，我基本上是这样做的：

```
namespace.Class = function(param) {
    namespace.BaseClass.call(this, param);

    //Other constructor stuff
}

namespace.Class.prototype = new namespace.BaseClass();
namespace.Class.constructor = namespace.Class; 
```

问题是在创建原型时会调用 BaseClass 的构造函数，这会导致原型成为该类型的实例。这可能不是问题，但它只是感觉“混乱”和性能滞后，并且可能存在错误，因为我必须检查参数是否已定义。

所以我的问题是：**是否可以在不调用其构造函数的情况下扩展基类？**还是我必须使用诸如检查是否`param`未定义之类的技巧，或者使用循环来做事？

抱歉，如果我错过了原型继承的全部要点，我在 uni 中学习 Java，而 Java 不赞成这种类型的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T10:42:57.243

对的，这是可能的。首选方法是使用[`Object.create` *^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)：

```
namespace.Class.prototype = Object.create(namespace.BaseClass.prototype); 
```

这将创建一个新的空对象，它继承自`BaseClass.prototype`，这就是您现在所需要的。

这是一个比创建父类的实例更简洁的解决方案，因为正如您已经提到的，如果超类需要参数，您不知道要传递哪些参数。

# c# - 如何从字符串中删除空格？

> ID：16034985
> 
> 赞同：0
> 
> 时间：2013-04-16T10:41:46.317
> 
> 标签：c#, string

我有一个字符串值

```
string text = "-----------------\r\n      Some text here      Some text here\r\n" 
```

有没有办法在每个有很多空格的地方删除 2 个空格？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T10:45:52.330

您可以使用正则表达式。

```
var result = new Regex("\s{2,}").Replace(text,constForWhiteSpace) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T10:44:14.000

这是你想要的？

```
text = text.Replace("   "," "); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T10:45:49.393

```
Regex regex = new Regex(@"[ ]{2,}");    // Regex to match more than two occurences of space 
text = regex.Replace(text, @""); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T10:44:08.620

编辑：这是为了速度，否则其他答案建议的正则表达式很好。这个功能非常快。

编辑2：如果你想保留新行，只需删除 \r \n 。

```
 public static String SingleSpacedTrim(String inString)
        {
            StringBuilder sb = new StringBuilder();
            Boolean inBlanks = false;
            foreach (Char c in inString)
            {
                switch (c)
                {
                    case '\r':
                    case '\n':
                    case '\t':
                    case ' ':
                        if (!inBlanks)
                        {
                            inBlanks = true;
                            sb.Append(' ');
                        }   
                        continue;
                    default:
                        inBlanks = false;
                        sb.Append(c);
                        break;
                }
            }
            return sb.ToString().Trim();
        } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T10:52:00.223

试试看....

```
 string _str = "-----------------\r\n      Some text here      Some text here\r\n";
    _str = _str.Trim();
    Console.WriteLine(_str.Replace(" ","")); 
```

输出：
SometexthereSometexthere

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T11:15:30.247

不是最好的代码，但如果你想使用正则表达式，这应该从文本中删除两个空格。

```
//one.two..three...four....five..... (dots = spaces)
string input = "one two  three   four    five     ";

string result = new Regex(@"\s{2,}").Replace(input, delegate(Match m)
{    
    if (m.Value.Length > 2)
    {    
        int substring = m.Value.Length - 2;
        //if there are two spaces, just remove the one
        if (m.Value.Length == 2) substring = 1;

        string str = m.Value.Substring(m.Value.Length - substring);
        return str;
    }
    return m.Value;
}); 
```

输出将是

```
//dots represent spaces. Two spaces are removed from each one but one 
//unless there are two spaces, in which case only one is removed.
one.two.three.four..five... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-16T10:44:41.407

如果你知道有多少个空格，你可以使用

```
text.Replace("       ", "     "); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-16T10:52:04.667

```
var dirty = "asdjk    asldkjas dasdl l aksdjal;sd            asd;lkjdaslj";

var clean = string.Join(" ", dirty.Split(' ').Where(x => !string.IsNullOrEmpty(x))); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-16T10:49:29.207

尝试这个：

```
var result = new Regex("\s{2,}").Replace(text,string.Empty) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-16T11:09:15.823

如果你不喜欢 Regex 或者文本很大，你可以使用这个扩展：

```
public static String TrimBetween(this string text, int maxWhiteSpaces = 1)
{
    StringBuilder sb = new StringBuilder();
    int count = 0;
    foreach (Char c in text)
    {
        if (!Char.IsWhiteSpace(c))
        {
            count = 0;
            sb.Append(c);
        }
        else
        {
            if (++count <= maxWhiteSpaces)
                sb.Append(c);
        }
    }
    return sb.ToString();
} 
```

然后很简单：

```
string text = "-----------------\r\n      Some text here      Some text here\r\n";
text = text.TrimBetween(2); 
```

结果：

```
-----------------
Some text here  Some text here 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-04-16T10:46:10.023

您可以使用 String.Replace 功能：

```
text=text.Replace("      ","  "); 
```

但请记住，您应该在发布之前研究一下您的请求：这是非常基本的东西。

# javascript - 淘汰赛：结合 2 个自定义数字绑定 - 财务数据

> ID：16034986
> 
> 赞同：0
> 
> 时间：2013-04-16T10:41:47.753
> 
> 标签：javascript, knockout.js

再会

我发现以下两个小提琴完全符合我的要求：

第[一个小提琴](http://jsfiddle.net/rRaHm/14/)给了我十进制表示法。

第二[个小提琴](http://jsfiddle.net/R6MPU/140/)给了我数字的数字分组。

**我的问题：**如何将它们组合成一个，以便我可以像这样使用它：

```
<b data-bind="commaDecimalFormatter: myNumber">This will output both demical notation and digital grouping</b> 
```

==================================================== ==================================================== ==================================================== ===============

小提琴1代码：

```
// Formatting Functions
function formatWithComma(x, precision, seperator) {
    var options = {
        precision: precision || 2,
        seperator: seperator || '.'
    }
    var formatted = parseFloat(x,10).toFixed( options.precision );
    var regex = new RegExp(
            '^(\\d+)[^\\d](\\d{' + options.precision + '})$');
    formatted = formatted.replace(
        regex, '$1' + options.seperator + '$2');
    return formatted;
}

function reverseFormat(x, precision, seperator) {
    var options = {
        precision: precision || 2,
        seperator: seperator || ','
    }
    var regex = new RegExp(
        '^(\\d+)[^\\d](\\d+)$');
    var formatted = x.replace(regex, '$1.$2');
    return parseFloat( formatted );
}
// END: Formatting Functions

// Custom Binding - place this in a seperate .js file and reference it in your html
ko.bindingHandlers.commaDecimalFormatter = {
    init: function(element, valueAccessor) {

        var observable = valueAccessor();

        var interceptor = ko.computed({
            read: function() {
                return formatWithComma( observable() );
            },
            write: function(newValue) {
                observable( reverseFormat(newValue) );
            }
        });

        if( element.tagName == 'INPUT' )
            ko.applyBindingsToNode( element , {
                value: interceptor
            } );
        else
            ko.applyBindingsToNode( element , {
                text: interceptor
            } );
    }
}

// this is your viewmodel
var vm = {
    myNumber: ko.observable(100000)
}

// when the DOM is ready, call ko.applyBindings with your viewmodel
$(function() {
    ko.applyBindings(vm);
}); 
```

小提琴 2 代码：

```
(function(){
    var format = function(value) {
        toks = value.toFixed(2).replace('-', '').split('.');
        var display = '$' + $.map(toks[0].split('').reverse(), function(elm, i) {
            return [(i % 3 === 0 && i > 0 ? ',' : ''), elm];
        }).reverse().join('') + '.' + toks[1];

        return value < 0 ? '-' + display : display;
    };

ko.subscribable.fn.money = function() {
    var target = this;

    var writeTarget = function(value) {
        var stripped=value
            .replace(/[^0-9.-]/g, '');

        target(parseFloat(stripped));
    };

    var result = ko.computed({
        read: function() {
            return target();
        },
        write: writeTarget
    });

    result.formatted = ko.computed({
        read: function() {
            return format(target());
        },
        write: writeTarget
    });

    result.isNegative = ko.computed(function(){
        return target()<0;
    });

    return result;
};
})();

//Wire it up
$(function() {
    var viewModel = {
        Cash: ko.observable(1000000).money(),
    };

    viewModel.Total = ko.computed(function() {
        return this.Cash();
    }, viewModel).money();
    ko.applyBindings(viewModel);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:41:13.253

我无法将这两个功能结合起来。尝试以下操作，因为它可以满足您的要求：十进制表示法和数字分组：

JS：

```
function formatPrice(price) {
        return price.reverse().replace(/((?:\d{2})\d)/g, '$1 ').reverse();
    }

    // Need to extend String prototype for convinience
    String.prototype.reverse = function() {
        return this.split('').reverse().join('');
    }

    $('.myNumber').each(function(){
        $(this).html(formatPrice($(this).html()));
    }); 
```

见[小提琴](http://jsfiddle.net/rRaHm/16/)

注意：您需要每次刷新浏览器以使 jquery 将输出值（只读）格式化为数字分组......当然，当您在编辑器屏幕（第一个字段）中输入新值并且您没有看到数字分组更新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T00:54:58.250

我想提供一个替代解决方案。您还可以创建一个自定义绑定处理程序来执行您想要的操作（它将使用您最初建议的语法）。

```
ko.bindingHandlers. commaDecimalFormatter = {
  update: function(element, valueAccessor, allValuesAccessor) {

    // This gets the current value of the observable from your model
    var value = ko.utils.unwrapObservable(valueAccessor());

    // Manipulate `value` as desired using the bodies of the functions you mentioned
    // Note: You don't want to use a global function, so actually take the bodies 
    // and put it here. Plain old JS :)
    ...

   // Set the value on the element
   jQuery(element).text(value);
  }
}; 
```

# ruby-on-rails - 在 RoR 上自动分配的外键

> ID：16034988
> 
> 赞同：-1
> 
> 时间：2013-04-16T10:42:05.410
> 
> 标签：ruby-on-rails

我有 4 个模型（`Users`、`Post`、`Comments`、`Value`），如下所示：
一个用户可以发布一些内容，并且有人可以评论这个帖子。之后，其他用户可以将 0 到 10 的数值添加到评论中。

我已经完成了rails教程之间的关系`Users`并`Post`帮助我，但现在我不知道下一步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:00:49.513

我相信您可以在要分配的值（我们称之为评级）和其他 2 个模型之间建立关系。

根据您所说的，我猜您的关系（关联）将如下所示：

```
class User < ActiveRecord::Base
  has_many :post
  has_many :comment
  has_many :rating, :through => :comment
end

class Post < ActiveRecord::Base
  belongs_to :user
  has_many :comment
  has_many :rating, :through => :comment
end

class Comment < ActiveRecord::Base
  belongs_to :user
  belongs_to :post
  has_many :rating
end

class Rating < ActiveRecord::Base
  belongs_to :comment
  belongs_to :post
  belongs_to :user, :through => :comment
end 
```

[在此处](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)阅读有关它的更多信息

# javascript - HTML 内容的 Jquery 工具提示

> ID：16034993
> 
> 赞同：1
> 
> 时间：2013-04-16T10:42:18.553
> 
> 标签：javascript, jquery, css, internet-explorer, tooltip

1，我在本地系统中下载了所有这三个文件（JS和CSS）并尝试它不工作，因为它直接从URLS引用。

2，即使我使用 URL src 和 href 它不能与 IE.IE 一起使用，也没有说任何错误。

请帮助我知道做错了什么。

**第1部分 ：**

```
<link rel="stylesheet" type="text/css" href="jquery/css/jquery-ui-1.10.2.custom.css" />
<script src="jquery/js/jquery-1.9.0.js"/></script>
<script src="jquery/js/jquery-ui-1.10.0.custom.min.js"></script> 
```

**第2部分 ：**

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script> 
```

**HTML 代码：**

```
![<script>
$(function () {
    $(document).tooltip({
        content: function () {
            return $(this).prop('title');
        }
    });
});
</script>
<style>

.tooltip
{
  background-color:#F8D2DA;
}
.tooltipqty
{
  text-align:right;
}
</style>
</head>
<body>
<p><label for="age">Your age:</label><input id="age" 
title="<table class='tooltip'><tr><td class='tooltipqty'>20.00</td><td>31-01-2013</td></tr>
<tr><td class='tooltipqty'>0.02</td><td>01-01-2013</td></tr></table>" />
</p>
</body>][1] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:02:02.483

替换`$(this).prop('title')`为`$(this).attr('title')`。

[jsfiddle](http://jsfiddle.net/SZexS/)

* * *

没看出跟IE有关。也不知道 jsfiddle 在 IE 8 中有问题...

# java - 我应该如何正确计算 JTable 列值中的值？

> ID：16034998
> 
> 赞同：1
> 
> 时间：2013-04-16T10:42:32.253
> 
> 标签：java, swing, parsing, jtable

我有一个`JTable`并且我想添加列值。我正在尝试这段代码：

```
try{
    double t = 0.00;
    DecimalFormat df = new DecimalFormat("0.00");
    int rows = empTbl.getRowCount();
    for(int row =0; row<=rows; row++) 
    {
        String am = (String) empTbl.getValueAt(row, 7);
        double d = (double) df.parse(am);
        double ans = d+t;
        jLabel7.setText("Total Sale : "+ans);
    }
}
catch(ParseException ex){ } 
```

为什么这段代码不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:01:28.947

*   为了避免在 Java 中进行任何解析，有适当的数据类型

*   直接向 XxxTableModel 或 JTable 添加 Double / Long / Integer 值（取决于未知代码，您的问题）

*   将 XxxTableModel 中的 getColumnClass 更改为 Double / Long / Integer

*   添加 TableModelListener 并覆盖 setValueAt(proper formula) 如果 JTables 单元格中的值发生更改，则允许使用公式

*   [Double / Float 没有小数位（我*d* i *o* t *i* c 线程，有趣！！！downvoters）](https://stackoverflow.com/a/7553827/714968)

*   使用 XxxTableCellRenderer 格式化输出到 Swing GUI