# StackOverflow 问答 12814000-12814999

# xml - 使用 XSL 或 XPATH 获取已排序的不同元素

> ID：12814000
> 
> 赞同：0
> 
> 时间：2012-10-10T07:19:19.110
> 
> 标签：xml, xslt, xpath, distinct

鉴于此源 XML：

```
<Objects>
    <Object>
        <Relations>
            <Relation>
                <Placements>
                    <Placement>
                        <Page>6</Page>
                        <Element>body</Element>
                        <FrameOrder>3</FrameOrder>
                        <PageSequence>2</PageSequence>
                        <PageNumber>6</PageNumber>
                    </Placement>
                    <Placement>
                        <Page>1</Page>
                        <Element>body</Element>
                        <FrameOrder>0</FrameOrder>
                        <PageSequence>1</PageSequence>
                        <PageNumber>1</PageNumber>
                    </Placement>
                    <Placement>
                        <Page>6</Page>
                        <Element>body</Element>
                        <FrameOrder>4</FrameOrder>
                        <PageSequence>2</PageSequence>
                        <PageNumber>6</PageNumber>
                    </Placement>
                    <Placement>
                        <Page>1</Page>
                        <Element>head</Element>
                        <FrameOrder>0</FrameOrder>
                        <PageSequence>1</PageSequence>
                        <PageNumber>1</PageNumber>
                    </Placement>
                    <Placement>
                        <Page>1</Page>
                        <Element>body</Element>
                        <FrameOrder>2</FrameOrder>
                        <PageSequence>1</PageSequence>
                        <PageNumber>1</PageNumber>
                    </Placement>
                    <Placement>
                        <Page>1</Page>
                        <Element>body</Element>
                        <FrameOrder>1</FrameOrder>
                        <PageSequence>1</PageSequence>
                        <PageNumber>1</PageNumber>
                    </Placement>
                </Placements>
            </Relation>
        </Relations>
    </Object>
</Objects> 
```

我正在尝试按`Page`顺序获取元素所在的不同`Element`元素`body`：

```
<Pages>
    <Page>1</Page>
    <Page>6</Page>
</Pages> 
```

我似乎得到的最远距离是使用以下 XSL：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/> 
<xsl:template match="/">
<xsl:for-each select="Objects/Object/Relations/Relation/Placements/Placement[Element='body']">
<xsl:sort select="FrameOrder"/>
    <Page><xsl:value-of select="Page"/></Page>
</xsl:for-each>
</xsl:template>
</xsl:stylesheet> 
```

这给了我：

```
<Pages>
    <Page>1</Page>
    <Page>1</Page>
    <Page>1</Page>
    <Page>6</Page>
    <Page>6</Page>
</Pages> 
```

我如何获得此时的不同值`Page`？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:32:00.593

```
<xsl:key name="kPage" match="Placement/Page" use="number(.)" />

<xsl:template match="/">
  <Pages>
    <xsl:for-each select="
      //Page[
        generate-id() = generate-id(key('kPage', number(.))[1])
      ]
    ">
      <xsl:sort select="." data-type="number" />
      <xsl:copy-of select="." />
    </xsl:for-each>
  </Pages>
</xsl:template> 
```

# iphone - 如何在 ios6 中为 iphone 4 和 iphone 5 设置框架

> ID：12814004
> 
> 赞同：5
> 
> 时间：2012-10-10T07:19:45.540
> 
> 标签：iphone, uiview, ios6, frame

我想将我的应用程序更新到 ios 6。那么如何设置 iphone 4 和 iphone 5 的框架尺寸？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T04:52:44.507

我可以使用计算屏幕大小，然后像使用以下方法一样调整视图的高度

```
+(CGFloat)heightOf:(CGFloat)heightValue{
CGRect applicationFrame = [[UIScreen mainScreen] applicationFrame];

//NSLog(@"applciation Frame height = %f",applicationFrame.size.height);
CGFloat heightRatio = (heightValue/480)*100;

CGFloat height = (applicationFrame.size.height * heightRatio)/100;
return height; 
```

}

然后我使用 like as

```
UIView *view = [[UIView alloc]initWithFrame:CGRectMake(0,[Height heightOf:385], 320, 220)]; 
```

所以。感谢您的回复

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T08:48:59.933

处理这种情况的方法不止一种。

1> 其中之一是正确使用自动调整大小。

2>另一种方法是使用新的 Auto Layout 功能，但同样只有 iOS 6 支持。

3>您可以为 iphone 4 和 iphone 5 的每个视图创建单独的 nib，并且根据它运行的设备，您可以切换使用的 .xib 文件。

现在最好的方法是使用，自动调整大小。

更多你可以通过这些

1>[支持 iOS 4.3 到 iOS 6.0](https://stackoverflow.com/questions/12776932/supporting-ios-4-3-to-ios-6-0)

2>[同时支持 iPhone4 和 iPhone5 屏幕分辨率的最佳方式是什么？- 仅 iOS6 中的自动布局](https://stackoverflow.com/questions/12527517/what-is-the-best-way-for-supporting-both-screen-resolution-of-iphone4-and-iphone)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T07:29:25.567

以下代码检查 iPhone 5 和其他设备

```
#define IS_IPHONE ( [[[UIDevice currentDevice] model] isEqualToString:@"iPhone"] )
#define IS_IPOD   ( [[[UIDevice currentDevice ] model] isEqualToString:@"iPod touch"] )
#define IS_HEIGHT_GTE_568 [[UIScreen mainScreen ] bounds].size.height >= 568.0f
#define IS_IPHONE_5 ( IS_IPHONE && IS_HEIGHT_GTE_568 ) 
```

[并检查更多详细信息，请参阅问题。](https://stackoverflow.com/questions/12446990/how-to-detect-iphone-5-widescreen-devices/12447113#12447113)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T07:25:12.490

您可以检查设备类型[链接](http://snipplr.com/view/38644/)，或者您可以检查视图框架是否大于 iPhone 4/4s 中的正常视图，然后调整框架大小

注意：我使用第二种方式，它是工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T20:19:07.227

AutoLayout 对我来说效果不佳。我的应用程序有几个元素需要均匀分布。

快速修复解决方案（不是好的做法）是在检查屏幕高度时单独分配坐标。（顺便说一句，这是一个很好的教程。遗憾的是，Apple 仍然没有为 IOS 提供任何实质性的东西）。

如果您的屏幕上有多个元素，那么我相信您将不得不单独重新放置它们

```
CGFloat height = [UIscreen mainScreen].bounds.size.height;
if(height==568.00){
self.imageName.frame = CGRectMake(x,y,width,height);
...
} 
```

对于出现在窗口中心的模态或浮动屏幕，您可以尝试以下操作：

```
self.imgBadgeArea.frame = CGRectMake(self.view.bounds.size.width/2- self.imgBadgeArea.bounds.size.width/2, self.view.bounds.size.height/2 - self.imgBadgeArea.bounds.size.height/2, self.imgBadgeArea.bounds.size.width, self.imgBadgeArea.bounds.size.height); 
```

适用于 3.5 和 4 英寸。

# java - Servlet.service() 抛出 ClassCastException

> ID：12814008
> 
> 赞同：9
> 
> 时间：2012-10-10T07:19:58.567
> 
> 标签：java, servlets, tomcat6, classcastexception, jdk1.6

我有一个 Java Web 应用程序。我已经设置了这个新项目并在运行 jsp 时出现以下异常，

```
Oct 10, 2012 3:01:49 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet jsp threw exception
java.lang.ClassCastException: org.apache.catalina.util.DefaultAnnotationProcessor cannot be cast to org.apache.AnnotationProcessor
    at org.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:151)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:340)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:619)
Oct 10, 2012 3:01:57 AM org.apache.catalina.loader.WebappClassLoader modified
INFO:     Additional JARs have been added : 'activation-1.1.jar'
Oct 10, 2012 3:01:57 AM org.apache.catalina.core.StandardContext reload
INFO: Reloading this Context has started
Oct 10, 2012 3:01:57 AM org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc
SEVERE: The web application [/AutoUpgrade] registered the JBDC driver [com.mysql.jdbc.Driver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
Oct 10, 2012 3:01:57 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/AutoUpgrade] appears to have started a thread named [Timer-0] but has failed to stop it. This is very likely to create a memory leak. 
```

我已经多次尝试清理和构建项目，获得最新的 service-api.jar，我的库非常广泛，我无法弄清楚导致此错误的任何 jar 之间是否存在任何不一致。我在 jdk 1.6 上的 Apache Tomcat 6 上运行该项目（我的项目需要在 1.6 上运行）。我试过用谷歌搜索这个异常，但没有得到任何与我的问题相关的帖子。stackoverflow 上的相关问题是关于 NullPointerException 的。

我认为问题一定出在我的库上，但我无法指出根本原因。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T21:52:09.667

当您的 web 应用程序的`/WEB-INF/lib`. 这个不对。您应该 从那里**删除**所有特定于 servletcontainer 的 JAR 文件。他们根本不属于那里。它们应该*已经*由 servletcontainer 本身提供。应该只包含特定于 webapp 本身的库，这些`/WEB-INF/lib`库不是由 servletcontainer 提供的。

如果您因为尝试修复编译错误而将它们放在那里，那么请仔细阅读这个答案如何以正确的方式解决它：[如何在我的 Eclipse 项目中导入 javax.servlet API？](https://stackoverflow.com/questions/4076601/how-do-i-import-the-javax-servlet-api-in-my-eclipse-project/4076706#4076706)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:53:05.097

如果清理你的项目没有帮助，也许你需要**清除你的缓存**。

Netbeans 缓存位于某处...
C:\Documents and Settings\myself.netbeans\7.0\var\cache

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-04T11:15:04.633

从 lib 中删除以下内容。

1.  检查具有不同版本的相同 jar
2.  所有与 catalina 相关的罐子
3.  el-api.jar
4.  jsp-api.jar

这肯定会奏效。

# git - 内核来源：提交补丁

> ID：12814011
> 
> 赞同：1
> 
> 时间：2012-10-10T07:20:02.670
> 
> 标签：git, linux-kernel, patch

我正在尝试使用 Linux 股票内核（linus 树）。但是由于我的 Linux 机器的一些限制，我无法通过 git 拉树。所以我正在从 kernel.org 下载最新的 rc 候选源存档，然后创建我自己的 git 存储库，将基本源视为主源。现在我从中创建了一个分支并尝试修复一些来源。我已经能够创建一个补丁`git format-patch`并想提交它。再次由于没有可用的互联网连接，我必须将补丁文件传输到其他机器并发出 git send-email 命令。我的问题：
1\. 我做对了吗？我的意思是补丁不是直接生成 git clone 源而是在我的本地存储库中生成的（但是是的，基本源与 linus 树相同）
2\. 我看到在生成的补丁中最后一行有一些数字。

例如

--
1.7.7.3
如果我的更改得到维护者的批准，不确定它是怎么回事，它是否会影响在基础源中应用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:13:03.840

可以发送针对主 git 树以外的其他内容生成的补丁，只要补丁干净地应用于您希望维护者将其应用到的树。我可以看到您的工作流程有问题的一种情况是，如果您下载了最终版本（例如 3.6），然后在合并窗口期间（Linux 发布 3.6 和他发布 3.7-rc1 之间的时间）发送补丁。在合并窗口中，Linus 的树中添加了许多更改，如果其中一些更改触及您正在修补的同一个地方，那么您可能需要调整您的补丁。

无论如何，`git format-patch`它是创建您发送的补丁的绝佳选择，因为您将避免许多初学者遇到的补丁格式问题。此外，出于同样的原因，使用`git send-email`发送它是一个好主意——您避免让您的邮件客户端弄乱空格，将其转换为 HTML，或者它可能做的任何其他烦人的事情。

最后两行像

```
--
1.7.7.3 
```

只显示生成补丁文件的 git 版本。当使用 、 或其他方式应用补丁时`git apply`，`git am`这两`patch -p1`行将被忽略并丢弃，因此它们无效。

综上所述，我建议您更新您的开发环境，以便您可以下载完整的 git 树。拥有多年的历史对于理解代码非常有用，更新到树的最新状态要快得多，而且您只需要下载增量更改。下载和修补源的`ketchup`工具也很有用，虽然在我看来不如直接使用 git 好。

祝你提交补丁好运！

# php - 使用ajax时jquerylazyload不运行？

> ID：12814018
> 
> 赞同：0
> 
> 时间：2012-10-10T07:20:25.740
> 
> 标签：php, jquery, lazy-loading

我有一个示例代码：

```
<script src="js/jquery-1.4.2.min_2.js" type="text/javascript"></script>
<script src="js/jquery.lazyload.min.js" type="text/javascript"></script>
<script type="text/javascript" language="javascript">
   $(function () {
       $("img").lazyload({ placeholder: "images/grey.gif", effect: "fadeIn" });
   });
</script>
<a href="#" class="click">click here</a>
<div id="result"></div>
$(document).ready(function() {
   $(".click").click(function(e){
        e.preventDefault(); 
        $.ajax({
           type: 'POST',
           url:'',
           data: '',
           async: true,
           success: function(response) {
                $('#result').html('<img src="test.png" />');
           } 
        });
    }); 
} 
```

但是当结果请求ajax是结果时

```
<img src="images/grey.gif" data-original="test.png" /> 
```

如何用结果修复它是

```
<img src="test.png" data-original="test.png" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:25:32.950

您似乎在图像元素实际上在您的 HTMl 中之前分配了 Lazyload。您需要在 ajax 函数的成功回调中分配它。

```
<script src="js/jquery-1.4.2.min_2.js" type="text/javascript"></script>
<script src="js/jquery.lazyload.min.js" type="text/javascript"></script>

<a href="#" class="click">click here</a>
<div id="result"></div>
<script type="text/javascript">
$(document).ready(function() {
   $(".click").click(function(e){
        e.preventDefault(); 
        $.ajax({
           type: 'POST',
           url:'yoururl',
           data: '{}',
           async: true,
           success: function(response) {
               // If response contains the image src 
               // then replace the src of the image with the response
                $('#result').html('<img src="test.png" data-original="test.png" />');
                $("#result img").attr('src', 'images/grey.gif')
                   .lazyload({ placeholder: "images/grey.gif", effect: "fadeIn" });
           } 
        });
    }); 
}); 
```

# php - 检查提交值是否在数组中？

> ID：12814021
> 
> 赞同：3
> 
> 时间：2012-10-10T07:20:42.463
> 
> 标签：php, forms

我最近读了一篇文章，说你永远不应该相信用户发送数据。

因此，假设我有以下表单输入：

```
<label for="input1">Answer 1</label>
<input type="radio" name="question1" value="answer1" id="input1" />
<label for="input2">Answer 2</label>
<input type="radio" name="question1" value="answer2" id="input2" />
<label for="input3">Answer 3</label>
<input type="radio" name="question1" value="answer3" id="input3" /> 
```

是否可以检查发布的答案是否在带有答案的数组中：

```
$question1_answers = array("answer1", "answer2", "answer3");
$answer1 = $_POST['question1'];
if ( in_array($answer1, $question1_answers) ) {
    echo "OK!";
} else {
    echo "Please select proper answer!";
} 
```

或者上面的代码可能是不必要的，我应该简单地阅读`$_POST['question1']`它就足够了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T07:24:01.800

> 是否可以检查发布的答案是否在带有答案的数组中：

是的！这是验证这样的单选按钮值的非常好的做法。您阅读的文章是正确的，您不应盲目相信用户提供的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T07:27:00.143

对于您的情况，它是安全且足够的。我怎么猜，那篇文章是关于 sql 注入、跨站点脚本或类似的东西。您可以在此处阅读有关 sql 注入的信息：

[http://en.wikipedia.org/wiki/Sql_injection](http://en.wikipedia.org/wiki/Sql_injection)

以及这里的跨站点脚本：

[http://en.wikipedia.org/wiki/Cross-site_scripting](http://en.wikipedia.org/wiki/Cross-site_scripting)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T07:24:21.987

两种方式都是正确的。但我推荐您发布的第一种方式。

# android - 更新在 Sqlite 中不起作用

> ID：12814026
> 
> 赞同：-1
> 
> 时间：2012-10-10T07:20:56.677
> 
> 标签：android, sqlite, sql-update

大家好，我必须更新`SQLite`数据库表中的行，我正在使用更新查询来更新行，但它不工作也不会抛出任何错误。

**我的代码：**

```
database.rawQuery(" UPDATE content SET  url2g = replace(url2g, '"
                + current_ip + "', '" + ip + "');", null); 
```

请建议我哪里错了。`Thanks`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:32:11.303

试试这个：

```
 public void updatemember(String id,String password,String status) {
        // TODO Auto-generated method stub

        ContentValues dataToInsert = new ContentValues();
        dataToInsert.put("status", status);
        dataToInsert.put("password", password);

        String where= " id = " + "\"" + id + "\"";

        try {

            db.update(TABLE_NAME, dataToInsert, where, null);

        } catch (Exception e) {

            String error = e.getMessage().toString();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:40:36.060

[文档](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)说：

```
public void execSQL (String sql) 
```

执行不是 SELECT 的单个 SQL 语句或任何其他返回数据的 SQL 语句。

因此，您需要`execSQL()`用于数据修改，例如：

•插入
•更新
•删除

```
rawQuery(String sql, String[] selectionArgs) 
```

运行提供的 SQL 并返回结果集上的 Cursor。

`rawQuery()` 应该用于目的`SELECT`，它为 SELECT 查询返回 Cursor。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-10T09:09:57.963

最后我使用以下方法完成了这个`execSQL`

```
database.execSQL("UPDATE content SET  url2g = replace(url2g, '"
                + current_ip + "', '" + ip + "');"); 
```

# objective-c - 获取在 NSCollectionView 中单击按钮的视图索引

> ID：12814028
> 
> 赞同：0
> 
> 时间：2012-10-10T07:21:01.453
> 
> 标签：objective-c, cocoa, nscollectionview, nscollectionviewitem

我有一个`NSCollectionView`并且我正在添加我的自定义视图，该视图充当`NSCollectionViewItem`该集合视图。在我的 collectionViewItem 中，我有一个`NSButton`以及其他各种元素。我有一个`onButtonClick`连接到该按钮的方法。现在，假设我将 5 个我的 collectonViewItem 项添加到 collectionView 中。如何从单击按钮的位置获取视图的索引？

在里面`onButtonClick`，我尝试了以下代码，但无论我点击哪个按钮，它总是返回 0：

```
id collectionViewItem = [sender superView];
NSInteger index = [[colloectionView subviews]  indexOfObject:collectionViewItem]; 
```

实现这一目标的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T12:20:52.860

您无法通过单击控件（具有自己的功能）返回索引。我认为您必须查看[http://andrehoffmann.wordpress.com/2009/08/29/nscollectionview-tutorial-for-dummies-xcode-3- 1-3/](http://andrehoffmann.wordpress.com/2009/08/29/nscollectionview-tutorial-for-dummies-xcode-3-1-3/) . 在此之前检查collectionview选择是否可以在属性检查器中选择。（也可以尝试禁用按钮）

# php - 如何从具有相同年份、月份和日期且时间较长的数组中删除日期？

> ID：12814032
> 
> 赞同：2
> 
> 时间：2012-10-10T07:21:19.843
> 
> 标签：php, date

在 PHP 中，如何从具有相同年份、月份和日期且时间更长的数组中删除日期？

```
array(7) { 
    [0]=> string(19) "2012-06-11 08:30:49" 
    [1]=> string(19) "2012-06-11 08:03:54" 
    [2]=> string(19) "2012-05-26 23:04:04" 
    [3]=> string(19) "2012-05-27 08:30:00" 
    [4]=> string(19) "2012-06-08 08:30:55" 
    [5]=> string(19) "2012-06-08 08:31:12" 
    [6]=> string(19) "2012-06-08 08:55:24"
} 
```

将删除`array[0],array[5],array[6]`

输出：

```
('2012-06-11 08:03:54',''2012-05-26 23:04:04','2012-05-27 08:30:00','2012-06-08 08:30:55') 
```

或者

```
'2012-06-11 08:03:54'
'2012-05-26 23:04:04'
'2012-05-27 08:30:00'
'2012-06-08 08:30:55' 
```

换句话说，我只想要不同日期的最早日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:31:14.603

```
$filtered = array();
foreach ($array as $time) {
    $day = date('Y-m-d', strtotime($time));
    if (!isset($filtered[$day]) || strtotime($filtered[$day]) > strtotime($time)) {
        $filtered[$day] = $time;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:34:35.223

```
$array = array( 
    "2012-06-11 08:30:49" ,
    "2012-06-11 08:03:54" ,
    "2012-05-26 23:04:04" ,
    "2012-05-27 08:30:00" ,
    "2012-06-08 08:30:55" ,
    "2012-06-08 08:31:12" ,
    "2012-06-08 08:55:24"
);

$new_array = array();
foreach($array as $item){
    $item_array = explode(" ", $item);
    $date = $item_array[0];
    $time = $item_array[1];
    if(!isset($new_array[$date]) || $time < $new_array[$date])
        $new_array[$date] = $time;
}

$final = array();

foreach($new_array as $key => $value){
    $final[] = $key . ' ' . $value;
}

print_r($final); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T08:07:57.397

您可以尝试使用`usort`

```
$array = array( 
    "2012-06-11 08:30:49" ,
    "2012-06-11 08:03:54" ,
    "2012-05-26 23:04:04" ,
    "2012-05-27 08:30:00" ,
    "2012-06-08 08:30:55" ,
    "2012-06-08 08:31:12" ,
    "2012-06-08 08:55:24"
);

usort($array, function ($a, $b) {
    $a = strtotime($a);
    $b = strtotime($b);
    return ($a == $b) ? 0 : (($a > $b) ? - 1 : 1);
});

$list = array();
foreach ( $array as $time ) {
    $day = date('Y-m-d', strtotime($time));
    if (! array_key_exists($day, $list))
        $list[$day] = $time;
}

var_dump($list); 
```

输出

```
array
  '2012-06-11' => string '2012-06-11 08:30:49' (length=19)
  '2012-06-08' => string '2012-06-08 08:55:24' (length=19)
  '2012-05-27' => string '2012-05-27 08:30:00' (length=19)
  '2012-05-26' => string '2012-05-26 23:04:04' (length=19) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T08:23:06.283

一种方法是循环排序数组，当日期保持不变时消除较高的时间值。以下是工作代码：

```
echo '<pre>';
$in = array(
    '2012-06-11 08:30:49',
    '2012-06-11 08:03:54',
    '2012-05-26 23:04:04',
    '2012-05-27 08:30:00',
    '2012-06-08 08:31:12',
    '2012-06-08 08:30:55',
    '2012-06-08 08:55:24',
);
var_dump($in);

$out = $in;
sort($out, SORT_STRING);
for($i=count($out)-2; $i>=0; --$i)
{
    list($d1, $t1) = explode(' ', $out[$i+1]);
    list($d2, $t2) = explode(' ', $out[$i]);
    if($d1 == $d2 && $t2 <= $t1) //same date and lower time
    {
        unset($out[$i+1]);
    }
}

var_dump($out);
echo '</pre>'; 
```

如果元素的顺序不重要，这种方法会足够快，因为它使用了 php 的`sort()`函数，并且在代码中完成的唯一耗时的事情是遍历数组，这需要 O(n) 时间。

此外，如果您不需要保留原始数组，则可以替换`$out`为`$in`随处可见并删除该`$out=$in`行。这将提高内存使用率，因为不会创建额外的数组。

# php - 模板库代码点火器

> ID：12814033
> 
> 赞同：0
> 
> 时间：2012-10-10T07:21:23.927
> 
> 标签：php, codeigniter, templates

我使用codeigniter的模板库设计了一个模板，模板有以下区域：

```
$template['template_ar']['template'] = 'template_ar';
$template['template_ar']['regions'] = array(
  'header',
  'title',
  'content',
  'topcontent',
  'sidebar',
  'footer',
  'options',
  'script',
); 
```

我使用以下代码来呈现我的模板

```
class faq extends MY_Controller {
  /** 
  * Index
  * This function views the Home Page
  * 
  * @access  public
  * @return  
  */

  public function index() {
    $this->template->write_view('content','comment/questions');   
    $this->template->write('options','You one',TRUE);      
    $this->template->render();
  }
} 
```

我想消除的问题是我想阻止热门内容出现在我的模板中。我只需要内容、页眉和页脚。谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:07:57.493

**[CodeIgniter 的模板库](http://williamsconcepts.com/ci/codeigniter/libraries/template/)**

**设置写入区域**

```
$this->template->set_regions($regions); 
```

**将区域动态添加到当前设置的模板中**

```
$this->template->add_regions($name, $props); 
```

**清空区域的内容**

```
$this->template->empty_region($name); 
```

# linux - 如何在 linux 的 awk shell 脚本中搜索 dd/mm

> ID：12814036
> 
> 赞同：-2
> 
> 时间：2012-10-10T07:21:30.417
> 
> 标签：linux, shell, awk

我想在文件中作为字符串搜索，字符串是 dd//mm。我需要计算这些字符串的出现次数。我怎么能在awk中使用字符串。目前我使用这样的东西，但结果是空的：

```
awk ' /$1/$2/  {i++}END{print i}' filename.text 
```

文件中的示例内容

```
09/Oct/2012 filecontentesfilecontetn
 09/OCt/2012 filecontentesfilecontetn
08/OCt/2012 filecontentesfilecontetn 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:40:56.513

假设您的 awk 是 GNU：

```
$ awk '/'$1'\/'$2'/{i++}END{print i}' IGNORECASE=1 file
2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:24:54.213

你试过了吗

```
awk '/dd\/\/mm/ { i++; } END { print i; }' filename.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T11:54:58.930

如果您所做的只是计数，您可以使用`grep`它。

```
$ grep -c '09/Oct' file.txt 
```

该`-c`选项告诉它计算模式匹配的次数。

但是，如果您希望 tp 使用 awk，您可以从 shell 脚本中传递字符串，您可以使用 awk 变量`-v`：

```
#!/bin/sh

string="09/Oct"

awk -v string="$string" '$0 ~ string {i++} END {print i}' file 
```

如果您还需要匹配小写的内容（根据问题中显示的输入），您可以在比较之前将所有内容转换为一种情况：

```
awk -v string="$string" 'BEGIN{string=tolower(string)} tolower($0) ~ string {i++} END {print i}' file 
```

这应该适用于所有版本的 awk，而不仅仅是 GNU 版本 (gawk)。

# neo4j - neo4j 密码查询过滤器特定关系

> ID：12814038
> 
> 赞同：1
> 
> 时间：2012-10-10T07:21:33.433
> 
> 标签：neo4j, cypher

我是 Neo4j 的新手，我将不胜感激......
我有以下简单的图表[http://console.neo4j.org/?id=colc1f](http://console.neo4j.org/?id=colc1f)

基本上我想检索特定节点的关系，例如节点 ID： 1
想象一下，除了 FOLLOW,FRIEND 之外，还有更多的关系类型，但唯一的例外是 FRIEND 关系，因为我只关心传入的 FRIEND 关系上下文节点 (1)，我想在一个查询中检索所有关系。

所以基本的**密码**查询是：

```
start profile=node(1) 
match profile-[r:FRIEND|FOLLOW|..]-other 
return type(r),other 
```

但是如何过滤从同一查询中的上下文配置文件传出的 FRIEND 关系？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:34:47.580

您可以将额外的验证放入 where，并执行以下操作：

```
 start profile=node(1) 
 match profile-[r:FRIEND|FOLLOW]-other 
 where profile-[:FRIEND]->other 
    or type(r) <> "FRIEND" 
return type(r),other 
```

[http://console.neo4j.org/r/dgas8o](http://console.neo4j.org/r/dgas8o)

# ef-code-first - 首先从 EF 5.0 代码迁移到数据库：要清理哪些文件？

> ID：12814040
> 
> 赞同：1
> 
> 时间：2012-10-10T07:21:35.613
> 
> 标签：ef-code-first, entity-framework-5, ef-database-first

将基于 Entity Framework 5.0 的项目从代码优先迁移到数据库优先时。我们将使用标准的 VS2012 向导从数据库中生成 edmx 模型，但除此之外我们还有其他步骤吗？我想我必须删除我定义了代码优先模型甚至迁移文件夹的所有类 - 除了这两个之外还有其他清理操作吗？

**[编辑]：** 报告回来。

所以实际体验在我最初的期望和 Ladislav 提到的之间（就像他说的，确切的条件取决于代码）。对我来说，整个手术大约需要 15-20 分钟，主要涉及

*   分支创建（安全，以防万一发生爆炸！）
*   删除代码优先类和源代码（我将它们移到 VS2012 之外以获得差异参考）
*   从数据库创建 EDMX 模型（将相同的命名空间等传递给向导以减少差异程度）
*   快速检查代码优先类和自动生成的数据库优先类。这主要是 1:1，因为我们一开始就在代码优先模型中使用了合理的名称。
*   一个一个地编译和修复每个错误
*   注意到许多错误是由于 EF 5 的自动复数与我自己对不同字段的复数造成的。通过快速区分大小写的搜索修复了 40 多个错误 -> 全部替换
*   编译后重新运行所有测试
*   重新合并功能分支！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:33:29.853

如果您的实体或上下文类包含任何其他逻辑，这可能会非常复杂。你必须：

*   将 EDMX 模型添加到您的项目中并让它生成实体类和上下文类
*   移除迁移
*   如果您的原始上下文类包含任何附加代码，则必须将其转换为与新生成的上下文类具有相同名称、命名空间和程序集的部分类，并且仅使用该附加代码。
*   如果您的任何实体类包含任何附加代码，您必须遵循与上下文相同的过程。
*   如果附加代码实际上是从现在自动生成的代码内部调用的，则您必须进行一些其他更改，其中可能包括更改代码生成模板和使用部分方法。
*   您必须从引导程序中删除任何数据库初始化或迁移执行
*   您必须使用引用元数据文件的新连接字符串

另一个更复杂的选项是不使用自动生成功能并使用旧的上下文和实体类，但在这种情况下，您必须手动使它们与您的 EDMX 保持同步。

# google-places-api - Google Places API - 地点搜索 - 电话号码

> ID：12814044
> 
> 赞同：0
> 
> 时间：2012-10-10T07:22:06.597
> 
> 标签：google-places-api

根据文档，似乎无法将谷歌地点的电话号码与地点搜索数据一起返回？

这意味着，如果我提出地点搜索请求，我需要再提出 20 个“地点详细信息”请求，以获取每个搜索结果的电话号码。

这意味着这似乎是我希望从“地点搜索”请求中获得的基本信息？

我是否遗漏了某些东西，或者没有办法或无法根据搜索请求返回电话号码？

任何帮助将非常感激。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:22:35.847

这是正确的，如果不发出 Place Details 请求，就无法获取商家的电话号码。

这是为了鼓励遵守[Google Maps API 服务条款](https://developers.google.com/maps/terms)-[第 10.2 节对您被允许使用 Maps API 构建的应用程序类型的限制](https://developers.google.com/maps/terms#section_10_2)：(b) 没有商业、住宅或电话列表服务。

如果用户操作表明他们想要有关某个地点的更多信息，您应该只需要发出地点详细信息请求。

# iis - 如何检查是否使用 cookie 执行了用户验证（FormsAuthentication）？

> ID：12814045
> 
> 赞同：0
> 
> 时间：2012-10-10T07:22:06.893
> 
> 标签：iis, cookies, formsauthentication

我的 ASP.NET 应用程序中存在验证（身份验证）问题 - 我使用启用了 cookie 的 FormsAuthentication，但是由于安全原因，我被迫还使用另一个外部授权源（基于用户名/密码组合为用户提供“会话ID")

当用户使用他的用户名/密码凭据登录（因此，获得 sessionID）时，应用程序工作正常。但是，由于启用了 cookie，登录页面可能会被“跳过”（用户被重定向到 default.aspx）并且他不会获得正确的 sessionID。

我的问题是是否有可能检查用户是否

a) 来自登录页面（因此，已重定向到 default.aspx）

或者

b) formsAuthentication 是基于 cookie 数据执行的，而不是基于用户名/密码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:43:23.057

假设您在用户登录后重定向到 default.aspx 页面（这样页面加载现在包括来自重定向客户端的身份验证 cookie），您将知道他们是否使用 global.asax.cs 的 Application_AuthenticateRequest 事件进行了身份验证“ ：

```
protected void Application_AuthenticateRequest(Object oSender, EventArgs eA)
{
    // Wire up authenticated principal with user information.

    if (this.Request.IsAuthenticated == true)
    {
         // do something with this.User.Identity.Name to map to a "sessionid"
    }
} 
```

您询问确定他们是作为重定向用户登录并登陆家中，还是使用浏览器保存的 cookie 直接回到家中（或任何其他视图），但我认为这并不重要。如果您将用户的额外身份验证密钥存储为处理登录的一部分，那么您可能应该在 AuthenticateRequest 事件中对受保护页面的所有访问执行此操作。注意：该事件会被触发很多（css 文件、图像等）。您可能希望忽略除 .aspx 之外的所有类型的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:47:30.310

是的，您可以使用“request.UrlReferrer.ToString”检查用户来自哪个页面，并将其与您的登录页面 URL 进行比较。

# java - 按降序对字符串的 ArrayList 进行排序

> ID：12814049
> 
> 赞同：0
> 
> 时间：2012-10-10T07:22:17.627
> 
> 标签：java, sorting

> **可能重复：**
> [按属性对自定义对象的 ArrayList 进行排序](https://stackoverflow.com/questions/2784514/sort-arraylist-of-custom-objects-by-property)

我有一个字符串数组列表，其中包含以下字符串

```
Common Ruby Errors 45min
Rails for Python Developers lightning
Communicating Over Distance 60min
Accounting-Driven Development 45min
Woah 30min
Sit Down and Write 30min 
```

现在我想根据每个字符串中提到的数字对数组列表进行降序排序

即排序列表应该看起来像

```
Communicating Over Distance 60min
Common Ruby Errors 45min
Accounting-Driven Development 45min
Woah 30min
Sit Down and Write 30min
Rails for Python Developers lightning 
```

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T07:26:12.287

正如@Rohit 建议的那样，您的任务是双重的

*   弄清楚如何提取要排序的属性（数字）
*   编写一个`Comparator`使用上述方法并执行一个`sortedList = Collections.sort( list , new YourComparator() )`

这样的事情可能是可行的：

```
 Comparator c = new Comparator<String>()
    {
        @Override
        public int compare( String o1, String o2 )
        {
            return getNumber( o1 ).compareTo( getNumber( o2 ) );
        }

        private Integer getNumber( String str ) 
        {
            Pattern pattern = Pattern.compile("([0-9]+)");
            Matcher matcher = pattern.matcher(str);
            while ( matcher.find() ) { return Integer.parseInt( matcher.group( 1 ) ); }

            return 0;
        }
    } 
```

干杯，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:30:38.480

1.  您必须能够从字符串中提取数字。正则表达式会有所帮助
2.  您必须能够比较这些数字。[比较器](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)将提供帮助

如果你有那些你只需要打电话

`Collections.sort(yourLIstWithString, new YourNumberInStringComparator());`

# java - odbc excel java

> ID：12814053
> 
> 赞同：3
> 
> 时间：2012-10-10T07:22:29.873
> 
> 标签：java, excel, jdbc-odbc

我正在使用 JDBC-ODBC DSN-less 连接来连接到 ms-excel 文件。我能够使用表单查询来查询excel文件

```
SELECT * FROM [Sheet1$] 
```

但是，这需要我知道 Excel 文件中工作表的名称（可能并不总是 Sheet1）。有什么方法可以查询 excel 以始终点击它的第一张纸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:31:48.920

采用：

```
DatabaseMetaData meta = con.getMetaData(); 
```

con 是你的连接。在元对象上，您可以调用：

```
getSchema();
getTables(null, null, "%", null); // thanks to AVD 
```

这两种方法都返回 ResultSet，您可以在其上进行迭代以查看里面的内容。无法保证 getTables() 方法[将返回完整数据](http://docs.oracle.com/javase/6/docs/api/java/sql/DatabaseMetaData.html#getTables%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%5B%5D%29)。

也许我引用了错误的方法，但我相信您可以在[DatabaseMetaData](http://docs.oracle.com/javase/6/docs/api/java/sql/DatabaseMetaData.html#getSchemas%28%29)类中找到一些方法，这些方法会在 excel 的情况下返回您需要的内容。

# facebook - 防止用户在 facebook 上多次共享页面

> ID：12814054
> 
> 赞同：0
> 
> 时间：2012-10-10T07:22:33.840
> 
> 标签：facebook, share, facebook-sharer

我在 php 页面上放了一个共享按钮，并且共享按钮运行良好。如果有人分享该页面，则故事将发布到时间线。现在我希望每个用户只能分享一次。换句话说，用户不应该能够多次共享页面。我们如何防止用户多次共享页面？

共享页面的网址：http: [//www.shantacreations.com/facebook_share_old/example_1/share.php/](http://www.shantacreations.com/facebook_share_old/example_1/share.php/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:28:09.043

> 我们如何防止用户多次共享页面？

你不能——不是真的。

您*可以*让用户首先连接到您的应用程序，然后通过 API 进行“共享”——确保他们将页面连同他们的用户 ID 一起共享到您的数据库，并在下次他们在您的内部尝试时拒绝共享应用程序。

但这不会阻止他们自己在 facebook.com 网站上再次分享它。

# iphone - 选中 uitableview 单元格中的取消选中按钮

> ID：12814060
> 
> 赞同：3
> 
> 时间：2012-10-10T07:23:04.457
> 
> 标签：iphone, uitableview

我以前看过一些帖子，但还没有得到答案，这就是为什么我试图以更有效的方式再次发布。我如何使用`UITableView`下图中的检查取消检查功能。

这是我想要的表格，当我点击任何单元格的按钮时，按钮图像会改变，而不是在所有单元格上。

![桌子](../Images/d967078fd9e191592074c21dc6648ffb.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T08:19:27.920

对于 Check-Uncheck 功能，仅`buttonClicked:`方法是不够的。您还将在`cellForRowAtIndexPath:`方法中设置**选择**哪个按钮或未**选择**哪个按钮的条件，因为`cellForRowAtIndexPath:`每次滚动时都会调用方法`UITableView`并且单元格将被刷新。我看到你之前的问题，你正在添加两个按钮，两个动作不是一个好方法，只是改变按钮的图像`check-uncheck`。

所以这就是我为此做的 -

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController<UITableViewDelegate, UITableViewDataSource>
{
    IBOutlet UITableView *tblView;
    NSMutableArray *arrayCheckUnchek; // Will handle which button is selected or which is unselected
    NSMutableArray *cellDataArray; // this is your data array
}

@end 
```

现在`ViewController.m`上课——

```
- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

    arrayCheckUnchek = [[NSMutableArray alloc]init];
    //Assign your cell data array 
    cellDataArray = [[NSMutableArray alloc]initWithObjects:@"cell-1",@"cell-2",@"cell-3",@"cell-4",@"cell-5", nil];

    // setting all unchecks initially
    for(int i=0; i<[cellDataArray count]; i++)
    {
        [arrayCheckUnchek addObject:@"Uncheck"];
    }

}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return [cellDataArray count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell == nil)
    {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [cellDataArray objectAtIndex:indexPath.row];

    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button setFrame:CGRectMake(270.0, 7.0, 30.0, 30.0)];

    if([[arrayCheckUnchek objectAtIndex:indexPath.row] isEqualToString:@"Uncheck"])
    [button setImage:[UIImage imageNamed:@"uncheck_icon"] forState:UIControlStateNormal];
    else
    [button setImage:[UIImage imageNamed:@"check_icon"] forState:UIControlStateNormal];

    [button addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
    [cell.contentView addSubview:button];

    return cell;
}

-(void)buttonClicked:(id)sender
{
    //Getting the indexPath of cell of clicked button

    CGPoint touchPoint = [sender convertPoint:CGPointZero toView:tblView];
    NSIndexPath *indexPath = [tblView indexPathForRowAtPoint:touchPoint];

    // No need to use tag sender will keep the reference of clicked button
    UIButton *button = (UIButton *)sender;

    //Checking the condition button is checked or unchecked.
    //accordingly replace the array object and change the button image
    if([[arrayCheckUnchek objectAtIndex:indexPath.row] isEqualToString:@"Uncheck"])
    {
        [button setImage:[UIImage imageNamed:@"check_icon"] forState:UIControlStateNormal];
        [arrayCheckUnchek replaceObjectAtIndex:indexPath.row withObject:@"Check"];
    }
    else
    {
        [button setImage:[UIImage imageNamed:@"uncheck_icon"] forState:UIControlStateNormal];
        [arrayCheckUnchek replaceObjectAtIndex:indexPath.row withObject:@"Uncheck"];
    }
} 
```

最后它看起来像 -

![在此处输入图像描述](../Images/71633cce098b4cfa31afd82454ef6928.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:32:36.153

我同意@VakulSaini，因为你可以这样做来处理哪个单元格触摸或滑动或任何事情，这是一个前任：

```
-(void)handleSwipLeft:(UISwipeGestureRecognizer *)gestureRecognizer
{
    CGPoint Location = [gestureRecognizer locationInView:self.tableView];
    NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint:Location];
    cell = [tableView cellForRowAtIndexPath:indexPath];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T07:30:32.947

标签对于在 IB 中设计的自定义 uitableviewcell 很有用。如果您以编程方式创建单元格，则不需要标签。您只使用它们来找到正确的 uiview 来设置属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T07:32:07.140

是的，在 UITableViewCell 中声明类并使用标签识别它们时，设置标签很简单。我已经发布了一些示例代码供您参考。我不确定它会解决你的问题。您询问了如何设置标签并使用标签识别类。所以它会给你一些关于你的问题的基本想法。

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) 
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        label1 = [[UIView alloc] initWithFrame:CGRectMake(2, 20, 15, 15)];
        label1.tag = 100;
        label1.backgroundColor = [UIColor whiteColor];
        label1.layer.cornerRadius = 5;
        [cell.contentView addSubview: label1];

        label2 = [[UILabel alloc] initWithFrame:CGRectMake(25, 2, 165, 23)];
        label2.tag = 101;
        label2.font = [UIFont boldSystemFontOfSize:15];
        label2.backgroundColor = [UIColor clearColor];
        [cell.contentView addSubview: label2];

        label3 = [[UILabel alloc] initWithFrame:CGRectMake(190, 2, 90, 23)];
        label3.tag = 102;
        label3.font = [UIFont systemFontOfSize:14];
        label3.textColor = [UIColor colorWithRed:0.14117670588235 green:0.435294117647059 blue:0.847058823529412 alpha:1];
        label3.backgroundColor = [UIColor clearColor];
        label3.textAlignment = UITextAlignmentRight;
        [cell.contentView addSubview: label3]; 
    }

   label1 = (UILabel *) [cell.contentView viewWithTag:100];
    NSString *string1 = [array1 objectAtIndex:indexPath.row];

  label2 = (UILabel *) [cell.contentView viewWithTag:101];
    NSString * string2 = [array2 objectAtIndex:indexPath.row];

  label3 = (UILabel *) [cell.contentView viewWithTag:102];
    NSString * string3 = [array3 objectAtIndex:indexPath.row];

   return cell;   
} 
```

请让我知道这是否有用。否则，我们将采用其他方式。

快乐编码。谢谢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T07:43:07.833

使用`cellForRowAtIndexPath`方法和 in 这个方法在你的 by using `UITableView`中添加任何组件，如 ( `UITextField`, `UILabel`..... etc) ，并将每个组件赋予它的**标签**by 。`UITableViewCell``[cell.contentView addSubview:YourComponentName];`**`indexPath.row`**

 **比如，，，

```
YourComponentName.tag = indexPath.row; 
```**

# asp.net - 调用 Alert JavaScript 函数时出现 ASP.NET ModalPopupExtender

> ID：12814062
> 
> 赞同：4
> 
> 时间：2012-10-10T07:23:17.303
> 
> 标签：asp.net, asp.net-ajax, ajaxcontroltoolkit, modalpopupextender

我正面临来自 ASP.NET Ajax Controls Toolkit ModalPopupExtender 的错误行为，当我`Alert()`从服务器端调用 JavaScript 函数时，模式出现在后台。我不知道为什么会这样。

这是代码：

VB：

```
Sub ShowAlert(ByVal message As String)
    ScriptManager.RegisterStartupScript(Me.UpdatePanel, UpdatePanel.GetType(), "notificationScript", "<script language='JavaScript'> alert('" & message & "'); </script>", False)
End Sub 
```

aspx：

```
<asp:UpdatePanel ID="UpdatePanel" runat="server">
  <ContentTemplate>
      <asp:Panel ID="pnlPartialInstructions" CssClass="modal" runat="server">
         ......
      <asp:Panel ID="pnlPrintConfirmation" CssClass="modal" runat="server">
          <table class="ui-accordion">
              <tr>
                  <td colspan="2">
                      <asp:Label Text="Do you want to print the receipt?" ID="lblPrintConfirmation" runat="server"
                          meta:resourcekey="lblPrintConfirmationResource1" Font-Bold="True" Font-Names="tahoma"
                          Font-Size="Large" />
                  </td>
              </tr>
              <tr>
                  <td>
                      <asp:Button ID="btnConfirmPrint" Text="Yes" CssClass="google-button google-button-blue"
                          runat="server" meta:resourcekey="btnConfirmSaveResource1" Font-Size="Large" />
                  </td>
                  <td>
                      <asp:Button ID="btnCancelPrint" Text="No" CssClass="google-button google-button-red"
                          runat="server" meta:resourcekey="btnCancelSaveResource1" Font-Size="Large" />
                  </td>
              </tr>
          </table>
      </asp:Panel>
      <asp:Button ID="HiddenForModel1" Text="" runat="server" CssClass="hide" CausesValidation="False" />
      <ajaxToolkit:ModalPopupExtender ID="pnlPrintConfirmation_ModalPopupExtender" runat="server" DynamicServicePath=""
          Enabled="True" TargetControlID="HiddenForModel1" PopupControlID="pnlPrintConfirmation"
          BackgroundCssClass="ModalBackground" DropShadow="True" CancelControlID="btnCancelPrint"
          RepositionMode="RepositionOnWindowResizeAndScroll">
      </ajaxToolkit:ModalPopupExtender>

      .....
      </asp:UpdatePanel>
  </ContentTemplate> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T09:40:26.020

这个问题是由`ModalPopupExtender`工作方式引起的。它正在发出一个 JavaScript，它将隐藏`Panel`.

现在您将调用注册为启动脚本，只要用户不退出警报窗口`alert()`，这将保持脚本的运行。`ModalPopupExtender`最简单的修复是设置`display:none`，`Panel`因此不需要脚本来隐藏它：

```
<asp:Panel ID="pnlPrintConfirmation" CssClass="modal" Style="display:none;" runat="server">
    ...
</asp:Panel> 
```

# mysql - MySQL外键查询返回空

> ID：12814063
> 
> 赞同：4
> 
> 时间：2012-10-10T07:23:18.710
> 
> 标签：mysql, sql, foreign-keys

我有三张桌子

让我们一个`demo_organization ;`

```
+--------------------+--------------+------+-----+---------+----------------+
| Field              | Type         | Null | Key | Default | Extra          |
+--------------------+--------------+------+-----+---------+----------------+
| id                 | int(11)      | NO   | PRI | NULL    | auto_increment |
| org_name           | varchar(100) | NO   |     | NULL    |                |
| org_type           | varchar(100) | NO   |     | NULL    |                |
| abn_acn_no         | varchar(100) | NO   |     | NULL    |                |
| org_url            | varchar(120) | NO   |     | NULL    |                |
| notes              | longtext     | NO   |     | NULL    |                |
| city               | varchar(100) | YES  |     | NULL    |                | 
```

第二个是`demo_user`

```
mysql> desc demo_user ;
+--------------------+----------------+------+-----+---------+----------------+
| Field              | Type           | Null | Key | Default | Extra          |
+--------------------+----------------+------+-----+---------+----------------+
| id                 | int(11)        | NO   | PRI | NULL    | auto_increment |
| user_name          | varchar(100)   | NO   |     | NULL    |                |
| first_name         | varchar(100)   | NO   |     | NULL    |                |
| middle_name        | varchar(100)   | NO   |     | NULL    |                |
| last_name          | varchar(100)   | NO   |     | NULL    |                |
| image              | varchar(10000) | YES  |     | NULL    |                |
| password           | varchar(80)    | NO   |     | NULL    |                |
| role               | varchar(20)    | NO   |     | NULL    |                |
| org_name_id        | int(11)        | NO   | MUL | NULL    |                |
| timezone_id        | int(11)        | NO   | MUL | NULL    |                | 
```

第三个是`demo_meeting;`外观

```
mysql> desc demo_meeting ;
+--------------------+--------------+------+-----+---------+----------------+
| Field              | Type         | Null | Key | Default | Extra          |
+--------------------+--------------+------+-----+---------+----------------+
| id                 | int(11)      | NO   | PRI | NULL    | auto_increment |
| name               | varchar(200) | NO   |     | NULL    |                |
| meetingID          | varchar(50)  | NO   |     | NULL    |                |
| venue_id           | int(11)      | YES  | MUL | NULL    |                |
| status             | int(11)      | YES  |     | NULL    |                |
| recurring_time     | varchar(50)  | NO   |     | NULL    |                |
| attendee_passwd    | varchar(100) | NO   |     | NULL    |                |
| moderator_passwd   | varchar(100) | NO   |     | NULL    |                |
| date_created       | datetime     | NO   |     | NULL    |                |
| start_time         | varchar(100) | NO   |     | NULL    |                |
| end_time           | varchar(100) | NO   |     | NULL    |                |
| meeting_duration   | varchar(100) | NO   |     | NULL    |                |
| meeting_datetime   | datetime     | YES  |     | NULL    |                |
| timezone           | varchar(50)  | NO   |     | NULL    |                |
| reminder           | tinyint(1)   | NO   |     | NULL    |                |
| duration           | varchar(20)  | NO   |     | NULL    |                |
| created_by_id      | int(11)      | NO   | MUL | NULL    |                | 
```

第三张表中created_by_id指的是demo_user表的A用户（外键）

而 org_name_id(demo_user table ) 指的是 demo_organization (demo_organization table 的外键)

**更新**

```
mysql> desc demo_meetingroom;
+------------+--------------+------+-----+---------+----------------+
| Field      | Type         | Null | Key | Default | Extra          |
+------------+--------------+------+-----+---------+----------------+
| id         | int(11)      | NO   | PRI | NULL    | auto_increment |
| name       | varchar(100) | NO   |     | NULL    |                |
| type       | varchar(200) | NO   |     | NULL    |                |
| expired_on | varchar(100) | NO   |     | NULL    |                |
| user_id    | int(11)      | YES  | MUL | NULL    |                |
+------------+--------------+------+-----+---------+----------------+ 
```

现在我正在尝试为特定组织安排所有会议。

我正在写一个查询

```
select meetingID ,type from demo_meeting as dm ,demo_meetingroom as dmr 
Where venue_id IS NOT NULL 
and dm.name = dmr.name 
AND created_by_id IN
  ( 
  SELECT id from demo_user WHERE org_name_id IN 
         (
         SELECT id from demo_organization where id =  
            (SELECT org_name_id from demo_user WHERE user_name = 'God') 
         )
   ); 
```

不幸的是它返回给我空集（但有价值）

请帮我看看我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:30:32.870

`JOIN`三个表而不是这些表`IN`。就像是：

```
SELECT
  dm.meetingID, 
  dm.type
FROM  demo_meeting dm
INNER JOIN demo_user         u   ON dm.created_by_id = u.id
INNER JOIN demo_organization org ON u.org_name_id = org.id
WHERE u.user_name = 'God'
 AND  dm.venue_id IS NOT NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:31:18.317

如果可以使用会更好`JOIN`。

```
SELECT  a.meetingID, d.type
FROM    demo_meeting a
        LEFT JOIN demo_user b
            ON a.created_by_id = b.id
        LEFT JOIN demo_organization c
            ON b.org_name_id = c.id
        LEFT JOIN demo_meetingroom d
            ON a.name = d.name
WHERE   a.venue_id IS NOT NULL AND
        b.username = 'GOD' 
```

# jquery - Firefox 在运行代码时抛出“未定义事件”

> ID：12814065
> 
> 赞同：0
> 
> 时间：2012-10-10T07:23:47.227
> 
> 标签：jquery, html, firefox

**代码：**

```
$(document).ready(function() {
    $("#main_div").bind('click', function(e){

    var x = event.pageX-document.getElementById("main_div").scrollLeft;
    var y = event.pageY-document.getElementById("main_div").scrollTop;
    document.pointform.form_x.value = x;
    document.pointform.form_y.value = y; 
    var a= x-404;
    var b= y-88;

    if(document.getElementById('optionselect').value=='a')
    {

    $("#container-5").css({"top":b,"left":a});
    $("#container-5").show();
    e.stopPropagation();

    }

    else if(...)
    {

    ...

    }

    });
 }); 
```

嘿伙计们，代码在 IE 和 Chrome 中运行良好，但是当我尝试在 Firefox 中运行相同的代码时，它会抛出错误“未定义事件”并将光标指向定义 var x 的位置。我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:25:23.933

改变

```
$("#main_div").bind('click', function(e){ 
```

至

```
$("#main_div").bind('click', function(event){ 
```

一切都应该没问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:28:07.723

尝试

```
$("#main_div").bind('click', function(event){ // Cause you seem to use 
                                              // event argument and not e 
```

代替

```
$("#main_div").bind('click', function(e){ 
```

`Also Change e.stopPropagation()`;

至

```
event.stopPropagation(); 
```

# python - 查询较少的父对象及其子对象列表

> ID：12814066
> 
> 赞同：5
> 
> 时间：2012-10-10T07:23:49.840
> 
> 标签：python, django, query-optimization, django-queryset

我有一个我正在尝试优化的 Django 视图。它在页面上显示父对象及其子对象的列表。子模型将外键返回给父模型，因此`select_related`似乎不适用。

```
class Parent(models.Model):
    name = models.CharField(max_length=31)

class Child(models.Model):
    name = models.CharField(max_length=31)
    parent = models.ForeignKey(Parent) 
```

一个简单的实现使用*n+1 个*查询，其中*n*是父对象的数量，即。一个查询来获取父列表，然后一个查询来获取每个父级的子级。

我编写了一个视图，它在两个查询中完成这项工作 - 一个用于获取父对象，另一个用于获取相关的子对象，然后是一些 Python（我很尴尬无法在此处发布）将它们重新组合在一起.

一旦我发现自己导入了标准库的`collections`模块，我意识到我可能做错了。可能有一个更简单的方法，但我缺乏 Django 经验来找到它。任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T10:44:29.400

如果您需要一次处理超过 2 个级别，您可以考虑使用[MPTT在数据库中存储树的不同方法](https://github.com/django-mptt/django-mptt "MPTT github页面")

简而言之，它将数据添加到您的模型中，这些数据在更新期间会更新，并允许更有效的检索。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T07:36:39.380

添加 a[`related_name`](https://docs.djangoproject.com/en/1.4/ref/models/fields/#django.db.models.ForeignKey.related_name)到外键，然后使用[`prefetch_related`](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#prefetch-related)添加到 Django 1.4 的方法：

> 返回`QuerySet`将在单个批次中自动检索每个指定查找的相关对象的 a。
> 
> 这与 的目的相似`select_related`，因为两者都旨在阻止由访问相关对象引起的数据库查询泛滥，但策略完全不同：
> 
> *   `select_related`通过创建 SQL 连接并在`SELECT`语句中包含相关对象的字段来工作。为此， `select_related`在同一个数据库查询中获取相关对象。但是，为了避免通过“多”关系连接而产生的更大的结果集，`select_related`仅限于单值关系 - 外键和一对一。
>     
>     
> *   `prefetch_related`另一方面，对每个关系进行单独的查找，并在 Python 中进行“加入”。除了由. **_**`select_related` _ `select_related`它还支持`GenericRelation`和的预取`GenericForeignKey`。

```
class Parent(models.Model):
    name = models.CharField(max_length=31)

class Child(models.Model):
    name = models.CharField(max_length=31)
    parent = models.ForeignKey(Parent, related_name='children') 

>>> Parent.objects.all().prefetch_related('children') 
```

所有相关子项将在单个查询中获取，并用于制作具有相关结果的预填充缓存的 QuerySet。然后在`self.children.all()` 调用中使用这些 QuerySet。

> **注意 1**，与 QuerySets 一样，任何暗示不同数据库查询的后续链接方法都将忽略以前缓存的结果，并使用新的数据库查询检索数据。
> 
> **注意 2**，如果您用于`iterator()`运行查询，`prefetch_related()`调用将被忽略，因为这两个优化一起没有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T07:49:21.963

实际上， select_related 是您正在寻找的。select_related 创建一个 JOIN，以便在一个语句中获取您需要的所有数据。prefetch_related 一次运行所有查询，然后缓存它们。

**这里的诀窍是只“加入”你绝对需要的东西，以减少连接的性能损失。**“你绝对需要的”是说你应该只预先选择稍后将在视图或模板中阅读的字段。这里有很好的文档：[https ://docs.djangoproject.com/en/1.4/ref/models/querysets/#select-related](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#select-related)

这是我遇到类似问题的一个模型的片段：

```
return QuantitativeResult.objects.select_related(
                'enrollment__subscription__configuration__analyte', 
                'enrollment__subscription__unit', 
                'enrollment__subscription__configuration__analyte__unit',
                'enrollment__subscription__lab',
                'enrollment__subscription__instrument_model'
                'enrollment__subscription__instrument',
                'enrollment__subscription__configuration__method',
                'enrollment__subscription__configuration__reagent',
                'enrollment__subscription__configuration__reagent__manufacturer',
                'enrollment__subscription__instrument_model__instrument__manufacturer'
                ).filter(<snip, snip - stuff edited out>) 
```

在这个病态的案例中，我从 700 多个查询减少到只有一个。当涉及到此类问题时，django 调试工具栏是您的朋友。

# css - 为什么我的背景过渡不起作用？

> ID：12814068
> 
> 赞同：0
> 
> 时间：2012-10-10T07:23:54.760
> 
> 标签：css, css-transitions

我正在尝试创建我的第一个 css 过渡，但它不起作用。我尝试使用简码，将转换放在 .btn-zen-inverse:hover 中。为什么它不起作用？（在最新版本的chrome中测试）

```
 .btn {
     color: white;
     font-family: 'ZLight';
     border: 2px solid white !important;
     box-shadow: 0 0 6px rgba( 12, 41, 63, 0.3);
     text-shadow: none;
     background: -moz-linear-gradient(top, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.21) 100%);
     /* FF3.6+ */

     background: -webkit-linear-gradient(top, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.21) 100%);
     /* Chrome10+,Safari5.1+ */

     background: -o-linear-gradient(top, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.21) 100%);
     /* Opera 11.10+ */

     background: -ms-linear-gradient(top, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.21) 100%);
     /* IE10+ */

     background: linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.21) 100%);
     /* W3C */

     filter: progid: DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='#6bffffff', GradientType=0);
     /* IE6-9 */

     padding: 3px;
 }
 .btn:hover {
     transition: background-image 0.5s;
     transition: background-color 0.5s;
     -moz-transition: background-image 0.5s;
     /* Firefox 4 */

     -webkit-transition: background-image 0.5s;
     /* Safari and Chrome */

     -webkit-transition: background-color 0.5s;
     /* Safari and Chrome */

     -o-transition: background-image 0.5s;
     /* Opera */

     color: white;
 }
 .btn-zen-inverse {
     background-color: #273032;
 }
 .btn-zen-inverse:hover {
     background-image: none;
     background-color: #273032;
 }
```

```
<a class="btn btn-zen-inverse btn-large">
    <span>Prova Zenconomy Gratis</span>
</a>
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T07:38:14.200

首先，您的转换定义需要是基类定义的一部分

IE：

```
div {
   transition: background-color 0.5s;
} 
```

代替：

```
/* this is wrong */
div:hover {
   transition: background-color: 0.5s;
} 
```

如果你愿意的话，实际的变化“效果”被放置在悬停伪类中

像这样：

```
div:hover {
    background-color: red;
} 
```

和你的基类定义：

```
div {
    background-color: white;
} 
```

话虽这么说，我 99.7% 的把握你不能打破背景“速记”风格。尝试在基类和伪类定义中分离您尝试转换的各个样式（即：背景颜色和背景图像）。

编辑：显然你可以过渡渐变，而不是“无”。

# python - Mysql自定义列

> ID：12814069
> 
> 赞同：2
> 
> 时间：2012-10-10T07:23:59.877
> 
> 标签：python, mysql, werkzeug

我正在尝试创建我希望成为五位整数的 MySql 列。我想从我的软件中使用的前两位数字和后三位从数据库生成。

示例：商店编号`10`将比`10000`，对于其他商店例如：商店编号将是`10001`, , ...`10002``20``20000``20001``20002`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:04:17.477

使 order_id 成为自动增量字段，然后在 store_id 和 order_id 上创建主键（按该顺序）。

这样，order_id 将为每个 store_id 单独计算。

请参阅此示例： [http ://sqlfiddle.com/#!2/33b3e/1](http://sqlfiddle.com/#!2/33b3e/1)

完整代码：

```
CREATE TABLE order_ticket_number ( id_store_ticket int(10) NOT NULL,
                                  id_order_ticket int(10) AUTO_INCREMENT NOT NULL,
                                  id_order int(10) unsigned NOT NULL default 0, 
                                  PRIMARY KEY (id_store_ticket,id_order_ticket)

                                   )
ENGINE=myisam DEFAULT CHARSET=utf8;

INSERT INTO order_ticket_number (id_store_ticket) VALUES (10),(10),(20),(20); 
```

编辑：这只能用 MyIsam 完成，（显然）不能用 InnoDB 完成。

所以我认为有两种选择。在您的应用程序逻辑中处理此问题，或者创建一个 MyIsam 表来处理编号。一旦你插入了那里，你就会知道 order_id 并且你可以将它插入到 InnoDB 表中。尽管这似乎不是最优雅的解决方案。我认为它比尝试自己生成它（比赛条件）更能证明错误。

您应该问自己的最后一件事是为什么要拥有这些数字。为什么不为每个订单使用简单的自动增量而不考虑 store_id....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:11:34.583

正如评论中所建议的，请考虑这种方法。只需有 2 列，并通过 UNIQUE 绑定它们，因此没有冲突。如果您在 Store ID 10 中查找第一个 id，只需`WHERE store_id = 10 AND other_id = 1`. 它更合乎逻辑，您可以创建一个简单的函数将其输出为`100001`：

```
function store_string($int_store_id, $int_other_id) {
    $str = str_repeat('0', (2 - strlen($int_store_id))).$int_store_id;
    $str .= str_repeat('0', (3 - strlen($int_other_id))).$int_other_id;
    return $str;
} 
```

（PHP 示例，但只需查找[**strlen**](http://php.net/manual/en/function.strlen.php)和[**str_repeat**](http://php.net/manual/en/function.str-repeat.php)即可了解。

这为您提供了很多优势，例如更容易搜索任一值，以及`store_id`无需更改所有现有行和仅更改输出函数即可超过 99 的可能性。

关于实际`INSERT`，您可以像这样运行插入：

```
INSERT INTO table_name (store_id, other_id, third_value)
SELECT {$store_id}, (other_id + 1), {$third_value}
FROM (( SELECT other_id
        FROM table_name
        WHERE store_id = {$store_id}
        ORDER BY other_id DESC)
        UNION ALL
    (   SELECT '0')
        LIMIT 1) AS h 
```

并且使用相同的方式简单地扩展更多值`$third_value`。

# php - 在 Zend 中获取 require_once 以查找文件

> ID：12814071
> 
> 赞同：0
> 
> 时间：2012-10-10T07:24:09.410
> 
> 标签：php, zend-framework, zend-db, require-once

我是 ZEnd 的新手，非常感谢任何帮助

我有各种承包商在我的网站上工作，事情变得一团糟，同一文件夹的多个副本位于不同的位置。现在我要进去尝试收拾东西。乐趣！！！我遇到的问题之一是 Zend 中的 require_once 语句没有找到他们正在寻找的文件。我必须进去改变路径，如下所示。假设这是在 Zend/Gdata/App/FeedEntryParent.php 中找到的代码

不工作（找不到文件）：

```
require_once 'Zend/Gdata/App/Extension/Updated.php'; 
```

似乎工作正常：

```
require_once '/home/paul13/paul13.com/includes/library/Zend/Gdata/App/Extension/Updated.php'; 
```

问题是大多数 require_once 语句的写法都像第一个。没有进入并手动编辑所有这些，有没有办法告诉要求语句在指示的目录中查找？'/home/paul13/paul13.com/includes/library/' 使用 php.ini？我试着输入

```
include_path=".:/home/paulthetutor/paulthetutors.com/includes/library" 
```

在 php.ini 中，但这似乎并不能解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:57:04.543

您问题的标题似乎与您发布的内容无关。

> 我有各种承包商在我的网站上工作......没有找到文件

你付钱给承包商来交付不起作用的代码？

> 问题显然是第一个路径

否 - 问题是您的包含路径设置不正确。如果您使用包含路径作为避免输入大量内容的机制，那么您做错了。您的包含路径不应包含指向由其他人维护的目录树内的条目。如果没有一个非常具体和有效的目标，你也不应该改变这个结构。

作为一种临时解决方法，直到您首先将 include/require 语句修复为它们应该是的，然后更改您的包含路径 - 在 php.ini、httpd.conf、.htaccess 中，通过自动前置或在每个脚本的顶部。

（顺便说一句，您将文件夹与目录混淆了）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:33:41.177

您在问题中提到的文件夹是 Zend 库的一部分。您可以检查 Zend Framework 项目中是否有库文件夹以及它是否包含该文件

> 'Zend/Gdata/App/Extension/Updated.php'

要包含整个 ZF 库，请在 public/index.php 或 Bootstrap.php 文件中使用以下代码。

```
 // Define path to application directory
 defined('APPLICATION_PATH')
      || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application'));

 // Define application environment
   defined('APPLICATION_ENV')
      || define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'production'));

  // Ensure library/ is on include_path
 set_include_path(implode(PATH_SEPARATOR, array(
     realpath(APPLICATION_PATH . '/../library'),
    get_include_path(),
   ))); 
```

是的，选择性地逐一删除 require 语句和本地复制的库文件版本（当然，在确保它们没有更新的代码之后）。

您可能希望在[此处](http://framework.zend.com/manual/1.12/en/learning.quickstart.create-project.html)检查默认 Zend Framework 应用程序结构以比较文件夹结构。

# validation - 使用 javax.xml.validation.Validator 验证 XML，生成错误

> ID：12814072
> 
> 赞同：1
> 
> 时间：2012-10-10T07:24:08.577
> 
> 标签：validation, xml-parsing

使用 javax.xml.validation.Validator.validate(source, result) 函数验证 xml 时遇到问题。

```
BufferedReader sourceXmlReader = new BufferedReader(new FileReader(m_sourceXmlFile));
ErrorHandler eh = new ValidationErrorHandler();
validator.setErrorHandler(eh);
validator.validate(new StreamSource(sourceXmlReader)); 
```

它在标签中有日文文本的标签中生成错误“元素类型“名称”必须由匹配的结束标签“”终止。

不知道是什么问题，但我检查了我的系统 User.locale 和 system.locale 是日语。此外，当我的 user.locale 和 system.locale 为 en_US 时，它工作正常。指针表示赞赏。

# c# - 当应用程序在 C# winform 应用程序中处于暂停/睡眠模式时，允许用户单击表单的按钮

> ID：12814074
> 
> 赞同：1
> 
> 时间：2012-10-10T07:24:10.713
> 
> 标签：c#, .net, winforms

我正在开发一个 C# winform 应用程序，该应用程序不断导航 webbrowser 控件中的一些链接并处理该网页的数据。我需要在表单上为暂停和恢复提供两个按钮。

单击按钮时，整个应用程序应该暂停处理，然后单击恢复按钮，它应该重新启动。

因此，要暂停应用程序，单击暂停按钮后，我通过以下代码使线程无限休眠。

```
private void Pause_Click(object sender, EventArgs e)
{
  System.Threading.Thread.Sleep(System.Threading.Timeout.Infinite);
} 
```

但是这段代码无法让用户点击表单上的 Resume Button 来恢复应用程序。此外，我没有得到一段完美的代码来通过单击“恢复”按钮恢复应用程序。

谁能给我这个问题的正确解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:43:33.870

[Thread.Sleep](http://msdn.microsoft.com/en-us/library/d00bd51t.aspx)方法将代码执行到进程调度程序，并且在指定时间过去之前不会将其取回。因此，您不能让睡眠线程自行唤醒。你甚至不能让一个工作线程唤醒另一个睡眠线程（据我所知）。

你需要以不同的方式实现你的目标。

*   分离数据处理代码到分离，worker，method
*   在单独的线程中运行工作方法
*   在 UI 和工作线程之间共享一个状态变量。这个变量应该传递是否应该暂停执行的信号。
*   从 UI 线程，根据需要在共享变量中设置暂停信号
*   在处理循环中，编写处理程序代码以停止处理

我将在下面发布一些伪代码，说明您应该如何执行此操作：

```
private bool _Paused = false;
private void OnPauseClick()
{
    _Paused = true;
}
private void OnResumeClick()
{
    _Paused = false;
}
private void OnRunClick()
{
    ThreadPool.QueueUserWorkItem(new WaitCallback(WorkerMethod));
}

private void WorkerMethod(object state)
{
    ...
    while (needToDoMoreWork)
    {
        // do some work here
        ...
        // if pause requested, wait to unpause
        while (_Paused)
        {
            // Sleep for a short time and check again if paused
            Thread.Sleep(100);
        }
    }
} 
```

您需要根据您的业务需求填写空白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:30:15.633

如果你让你的 UI 线程无限期地休眠，你将无限期地杀死你的 UI。不要那样做。

您的应用程序有一些机制可以知道是时候进行导航和处理了，可能是某种计时器。如果它是一个计时器，只需在暂停应用程序时停止它，并在恢复时重新启动它。如果是其他机制，您也需要停止它，但是如果不知道该机制是什么，很难告诉您如何停止。

# jscrollpane - 将动态数据附加到空 div 时，Jscroll 窗格不起作用

> ID：12814082
> 
> 赞同：1
> 
> 时间：2012-10-10T07:24:44.603
> 
> 标签：jscrollpane, jquery-jscrollpane, jscrollbar

我有一个空的 div，可以通过单击按钮时的 ajax 调用动态地将数据附加到其中。我已将 Jscroll 窗格标记到该 div 并且它不工作。div 没有滚动。但是当我只将静态数据放入该 div 时，滚动会起作用。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:07:18.150

每当内容更新时，您都需要重新初始化滚动条。在此处查看示例[http://jscrollpane.kelvinluck.com/dynamic_content.html](http://jscrollpane.kelvinluck.com/dynamic_content.html)

# android - 对 `vtable for... 的未定义引用，支持 RTTI

> ID：12814083
> 
> 赞同：3
> 
> 时间：2012-10-10T07:24:45.407
> 
> 标签：android, android-ndk, botan

我创建了一个使用 RTTI 支持 dynamic_cast 的应用程序。我在 Application.mk 文件中添加了“APP_CPPFLAGS += -frtti”，但出现错误：“未定义对 `vtable for ... 的引用”。如果我不使用 RTTI，我会收到错误消息：“错误：'dynamic_cast' not allowed with - fno-rtti”

我得到了输出：

```
 ./obj/local/armeabi-v7a/objs/vnptsofthsm/VNPTCASoftHSM/botan_impl/global_rng.o: In function `~RandomNumberGenerator':
    D:\Duongpd\Token\TMS\vnpt.example.TestSoftHSM/jni/VNPTCASoftHSM/botan_impl/../botan/../botan/rng.h:90: undefined reference to `vtable for Botan::RandomNumberGenerator'
    D:\Duongpd\Token\TMS\vnpt.example.TestSoftHSM/jni/VNPTCASoftHSM/botan_impl/../botan/../botan/rng.h:90: undefined reference to `vtable for Botan::RandomNumberGenerator'
    D:\Duongpd\Token\TMS\vnpt.example.TestSoftHSM/jni/VNPTCASoftHSM/botan_impl/../botan/../botan/rng.h:90: undefined reference to `vtable for Botan::RandomNumberGenerator'
    D:\Duongpd\Token\TMS\vnpt.example.TestSoftHSM/jni/VNPTCASoftHSM/botan_impl/../botan/../botan/rng.h:90: undefined reference to `vtable for Botan::RandomNumberGenerator'
   ./obj/local/armeabi-v7a/objs/vnptsofthsm/VNPTCASoftHSM/botan_impl/global_rng.o:(.data.rel.ro+0x8): undefined reference to `typeinfo for Botan::RandomNumberGenerator' 
```

这是 Botan::RandomNumberGenerator ：

```
class RandomNumberGenerator
   {
   public:

      static RandomNumberGenerator* make_rng();

      virtual void randomize(byte output[], size_t length) = 0;

      SecureVector<byte> random_vec(size_t bytes)
         {
         SecureVector<byte> output(bytes);
         randomize(&output[0], output.size());
         return output;
         }

      byte next_byte();

      virtual bool is_seeded() const { return true; }

      virtual void clear() = 0;

      virtual std::string name() const = 0;

      virtual void reseed(size_t bits_to_collect) = 0;

      virtual void add_entropy_source(EntropySource* source) = 0;

      virtual void add_entropy(const byte in[], size_t length) = 0;

      RandomNumberGenerator() {}
      virtual ~RandomNumberGenerator() {}
   private:
      RandomNumberGenerator(const RandomNumberGenerator&) {}
      RandomNumberGenerator& operator=(const RandomNumberGenerator&)
         { return (*this); }
   }; 
```

我的应用程序.mk：

```
APP_STL := gnustl_static
APP_CPPFLAGS += -fexceptions
APP_CPPFLAGS += -frtti
APP_CPPFLAGS += -DANDROID
APP_ABI := armeabi-v7a 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:40:39.853

[在这里](https://stackoverflow.com/questions/5205886/undefined-reference-when-accessing-my-shared-library-using-jni)，人们成功地为 Android 构建了**植物**库。请注意，他们使用的是较旧的 NDK，根本没有`rtti`选项。很可能，您也不需要它。

# c# - 如何将子节点存储到子节点并删除直接父节点？

> ID：12814090
> 
> 赞同：0
> 
> 时间：2012-10-10T07:25:10.183
> 
> 标签：c#, .net, xml

我们正在解析一个 xml 并在序列化它们之后，它将存储在数据库中。

我们的 XML 如下所示。

```
<SampleTypeService>
    <Name>sample1</Name>
    <URL>sample1</URL>
    <SampleTypeService_PK_ID>225d0266-e83a-44b8-88fc-700f6570d530</SampleTypeService_PK_ID>
    <SampleTypes>
        <SampleType_PK_ID>ef1d8c40-72ce-48d8-b252-9b521e96fa74</SampleType_PK_ID>
    </SampleTypes>
</SampleTypeService>

<SampleTypeService>
    <Name>sample2</Name>
    <URL>sample2</URL>
    <SampleTypeService_PK_ID>225reg66-e83a-44b8-88fc-700f6570d530</SampleTypeService_PK_ID>
    <SampleTypes>
        <SampleType_PK_ID>gh4d8c40-72ce-48d8-b252-9b521e96fa74</SampleType_PK_ID>
    </SampleTypes>
</SampleTypeService> 
```

我们需要将值存储`SampleType_PK_ID`在一个字符串中，然后删除两者

`SampleTypes`和`SampleType_PK_ID`节点。

我正在尝试删除它，如下所示。

```
foreach (XmlNode SampleNode in SampleList)
{

    XmlNodeList ChildList = SampleNode.ChildNodes;
    for (int j = 0; j < ChildList.Count; j++)
    {

        if (ChildList[j].LocalName == "SampleType_PK_ID>")
        {
            strSampleTypePKID = ChildList[j].InnerText;
            if (strSampleTypePKID != null)
            {
                SampleNode.ParentNode.RemoveChild(ChildList[j]); 
                j--;
            }
        }
    }
    testString = SampleNode.OuterXml;
    Console.WriteLine("1):" + strSampleTypePKID);

   //Code to serialize and store in database is here.
} 
```

但是`strSampleTypePKID`作为空字符串返回。我在这里想念什么。如何将子节点值带到子节点值，然后将其与其直接父节点一起删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:19:39.250

您正在寻找错误级别的内部子节点“SampleType_PK_ID”。如果您在 line 处放置一个断点`strSampleTypePKID = ChildList[j].InnerText;`，您可以看到它从未被执行过。

请尝试以下操作：

```
foreach (XmlNode SampleNode in doc.FirstChild.ChildNodes)
{
    strSampleTypePKID = string.Empty;
    var sampleTypesNode = SampleNode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "SampleTypes").FirstOrDefault();
    if (sampleTypesNode != null)
    {
        var pkNode = sampleTypesNode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "SampleType_PK_ID").FirstOrDefault();
        if (pkNode != null)
        {
            strSampleTypePKID = pkNode.InnerText;
            SampleNode.RemoveChild(sampleTypesNode);
        }
    }
    testString = SampleNode.OuterXml;
    Console.WriteLine("1):" + strSampleTypePKID);

   //Code to serialize and store in database is here.
} 
```

# jquery - jQuery datepicker 警报验证

> ID：12814092
> 
> 赞同：0
> 
> 时间：2012-10-10T07:25:15.847
> 
> 标签：jquery, jquery-ui, datepicker, jquery-ui-datepicker

我在`jQuery datepicker`. 我要做的就是对我的 datepicker 的 dateFormat 进行警报验证。

我想做的就是：

```
if(mydatepicker!= dateFormat) { alert('Invalid Date Format!'); } 
```

就是这样。。

这是我的代码：

```
 $('#BirthDate').datepicker({dateFormat: 'yy-mm-dd'});

    }); 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:42:37.597

请记住，在您的代码中，末尾有一个额外的 "... 如果 dateFormat 不正确，将显示的日期为：空白或今天的日期。用户不会插入写入的日期，而是从日历中选择它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:48:37.037

为什么您不将事件处理程序绑定到更改事件？

```
$('#BirthDate').datepicker({
  dateFormat: 'yy-mm-dd',
  onSelect: function() {
    doSomeValidation($(this).getDate());
  }
}); 
```

如果您不想即时验证它，您也可以在之后访问该值。

```
var date = $('#BirthDate').datepicker("getDate") 
```

还是您的问题是“如何在 javascript 中验证日期”？

# sql-server - 修改 MS SQL 2008 R2 中所有表的主键填充因子

> ID：12814100
> 
> 赞同：4
> 
> 时间：2012-10-10T07:25:27.313
> 
> 标签：sql-server, indexing, sql-server-2008-r2, primary-key, fillfactor

是否有任何工作方法可以修改数据库中所有表的主键的填充因子参数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T20:39:45.847

该脚本查找所有主键，并为每个主键构建一个 ALTER INDEX 语句并执行它。

```
---- change this to your desired value ----
DECLARE @NewFillFactor smallint = 92
-------------------------------------------
DECLARE @TableName varchar(300), @IndexName varchar(300), @sql varchar(max)

DECLARE inds CURSOR FAST_FORWARD FOR
SELECT TABLE_NAME, CONSTRAINT_NAME
FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS
WHERE CONSTRAINT_TYPE='PRIMARY KEY'

OPEN inds
FETCH NEXT FROM inds INTO @TableName, @IndexName

WHILE @@FETCH_STATUS = 0
BEGIN
    SET @sql = 'ALTER INDEX [' + @IndexName + '] ON [dbo].[' + @TableName + '] REBUILD WITH ( FILLFACTOR = ' + cast(@NewFillFactor as varchar(3)) + ')'
    PRINT @sql
    EXEC(@sql)
    FETCH NEXT FROM inds INTO @TableName, @IndexName
END

CLOSE inds
DEALLOCATE inds

PRINT 'Done' 
```

# java - 在 adb 命令中添加空格

> ID：12814103
> 
> 赞同：0
> 
> 时间：2012-10-10T07:25:34.133
> 
> 标签：java, android, runtime.exec

我想使用 Java 执行“adb”命令。我尝试如下：

```
Process p = Runtime.getRuntime().exec(new String[]{"cmd","/c","adb devices"}); 
```

但是，我收到以下错误`p.getErrorStream()`：

```
'adb' is not recognized as an internal or external command,operable program or batch file. 
```

“adb devices”之间有空间问题吗？

如何在命令中添加空格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T07:28:53.723

问题不在于空间，而是找不到的事实`adb`（因为它不在路径上）。

做以下两件事之一：

*   确保命令在`adb.exe`驻留的地方执行*或*
*   以. `PATH`_ `adb.exe`_`PATH`

虽然这两者都可以使用[`Runtime.exec()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exec%28java.lang.String,%20java.lang.String%5B%5D,%20java.io.File%29)，但我建议使用[`ProcessBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)，因为它具有更好/更简单的 API。

例如，要修改执行命令的路径，请执行以下操作：

```
ProcessBuilder pb = new ProcessBuilder("cmd","/c","adb devices");
pb.directory(new File("c:\\path\\to\\android\\platform-tools\\");
pb.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:29:03.023

最有可能的问题在于您的 %PATH% （或缺少） - 似乎它正确地分隔了参数。YO 可能会尝试使用 adb 可执行文件的绝对路径

# javascript - 处理 RequireJS 必需的类

> ID：12814105
> 
> 赞同：1
> 
> 时间：2012-10-10T07:25:58.047
> 
> 标签：javascript, asp.net-mvc, requirejs, singlepage, js-amd

我使用 requireJS 在我的 html5 单页 Web 应用程序中动态加载 JS 模块。我只是想知道我是否应该在完成它们后处理 requireJS 加载的模块（以便垃圾收集器可以清理它们）？如果是这样，那么您如何从 requireJS 中处理所需的模块？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T08:50:49.860

It is possible to undefine a module:

> There is a global function, requirejs.undef(), that allows undefining a module. It will reset the loader's internal state to forget about the previous definition of the module. However, it will not remove the module from other modules that are already defined and got a handle on that module as a dependency when they executed. So it is really only useful to use in error situations when no other modules have gotten a handle on a module value, or as part of any future module loading that may use that module. See the errback section for an example. If you want to do more sophisticated dependency graph analysis for undefining work, the semi-private onResourceLoad API may be helpful.

[http://requirejs.org/docs/api.html#undef](http://requirejs.org/docs/api.html#undef)

I'm not too sure on the internals but in my usage of the lib I've not found it necessary to do any manual clean up of modules.

# c# - 回发后可见性自动变为无

> ID：12814108
> 
> 赞同：-1
> 
> 时间：2012-10-10T07:26:07.520
> 
> 标签：c#, asp.net, html, css

我试图通过 javascript 使 div 的可见性。

```
 <asp:LinkButton class="ProfilePageDetailLinks" ID="lbtnPersonal" runat="server" OnClientClick="VisibleTab('PersonalDetails')">Show Details</asp:LinkButton>
    <div id="PersonalDetails">
                        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
                            <ContentTemplate>
                            </ContentTemplate>
                        </asp:UpdatePanel>
    </div>

function VisibleTab(str) {
    if (document.getElementById(str).style.display == 'none') {
        document.getElementById(str).style.display = 'block';
    } else {
        document.getElementById(str).style.display = 'none';
    } 
```

但是在回发之后，div 会自动隐藏。

请检查下面的代码......它没有按预期工作......如何让它工作......那是我真正的疑问......

```
<form id="form1" runat="server">
    <div>
        <div runat="server" id='G2'>
            content</div>
        <asp:Button ID="Button1" OnClientClick="javascript:document.getElementById('G2').style.visibility = 'visible';"
            runat="server" Text="show" />
        <asp:Button ID="Button2" OnClientClick="javascript:document.getElementById('G2').style.visibility = 'hidden';"
            runat="server" Text="hide" />
    </div>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:30:06.610

您可以添加`return false;`到`avoid`您的`postback`

```
OnClientClick="VisibleTab('PersonalDetails'); return false;" 
```

# java - 将 StringBuilder 内容“转移”到 java 中的新 ArrayList

> ID：12814112
> 
> 赞同：1
> 
> 时间：2012-10-10T07:26:16.600
> 
> 标签：java, string, for-loop, arraylist, constants

如果我有两个类常量：

```
List<String> workingList= new ArrayList<String>();
StringBuilder holder = new StringBuilder(50); 
```

都驻留在里面，称之为类`StringParser`和主要方法`readStuff()`......

```
public class StringParser{

public void readStuff(){ 

//parsing logic and adding <String> elements to 
//said workingList...

}//end of method readStuff 
```

其次是我检查`workingList`...的内容的方法

```
public String someReaderMethod()
{ 
  int ind = 0;
  for(int i = 0; i < workingList.size();i++)
  {
    if(workingList.get(i).contains(someExp))
    {
      workingList.remove(ind);
      holder.append(workingList.get(i).toString());
}
else
{
   ++ind;
}
  }
   return holder.toString(); 
```

}

...鉴于该`StringBuilder`持有人现在包含`workingList`已删除的内容，有没有办法我可以将内容“传递”`StringBuilder`给新的`ArrayList`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:28:57.780

您将需要一个`deliminator`解析字符串，然后您可以使用`Split`方法并将 String[] 转换为 ArrayList。

```
holder.append(tempList.get(i));
holder.append(";");//Deliminator 
```

现在当你必须使用它时，你需要做

```
String[] strings =holderString.split(";");
List<String> list = Arrays.asList(strings); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:15:10.433

您是否有理由要使用 StringBuilder？您可以直接将值插入到新的 ArrayList 中。我认为你可以用更简单的方式来做到这一点。

```
List<String> discardedList = new ArrayList<String>();

public void readStuff() {}

public static List<String> someReaderMethod()
{
  for(int i = 0; i < workingList.size(); i++)
  {
    if(workingList.get(i).contains(someExp))
    {
      discardedList.add(workingList.get(i));
      workingList.remove(i);
    }
  }
  return discardedList;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T07:32:19.680

将 List 元素附加到`StringBuilder`对象时，您需要在每次附加后附加一个额外的分隔符。

稍后，您可以拆分该`String`分隔`StringBuilder`符，然后将由此获得的 String 数组转换为`ArrayList`..

# objective-c - 从其他应用程序中删除 BadgeNumber（越狱 iphone）

> ID：12814115
> 
> 赞同：2
> 
> 时间：2012-10-10T07:26:23.363
> 
> 标签：objective-c, badge, uiapplication

我有 2 个要连接在一起的应用程序，我想控制“BagdeNumer”将运行另一个应用程序有时显示 1 或有时显示 100 ...

我现在使用这个命令来控制应用程序中的徽章。

```
[[UIApplication sharedApplication] setApplicationIconBadgeNumber: 1]; 
```

同时我想删除其他应用程序徽章编号

我该怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T16:21:22.630

您可以为这两个应用程序实现一个 URL 方案，并让第一个打开第二个，然后第二个删除自己的徽章编号并再次打开第一个。
显然，这甚至不需要越狱。

# ruby-on-rails - 有没有一种宝石或一种快速的方法可以将一些对虾代码呈现为图像？

> ID：12814116
> 
> 赞同：1
> 
> 时间：2012-10-10T07:26:29.060
> 
> 标签：ruby-on-rails, image, pdf, prawn

我正在寻找一种在其他视图（HAML）中重用我的虾代码的方法。它也可以是图像，但我不需要整个 PDF（带有布局和其他页面），只需要我使用一种方法在 Prawn 中呈现的小图形（图表）。

编辑：因为我正在使用 Heroku 并且我没有保存文件（它是对网络请求的响应），所以我真的不想用 ImageMagick 打开一个 pdf 文件并将其处理成图像，除非这是我最后的选择（除了用 HTML+CSS 再次编码图形）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:44:53.963

我不知道有什么宝石可以解决问题，但您始终可以使用 RMagick 或 MiniMagick 将生成的 pdf 转换为图像并将其缩小：

```
require 'RMagick'
pdf = Magick::ImageList.new("doc.pdf")
image = pdf.scale(300, 300)
image.write "doc.png" 
```

希望你会发现这很有用。

# ssrs-2008 - 如何在 SSRS 的任何列中过滤具有空值的行

> ID：12814117
> 
> 赞同：21
> 
> 时间：2012-10-10T07:26:37.340
> 
> 标签：ssrs-2008, reporting-services, reportingservices-2005

我想过滤掉没有包含空值或空白列的行的输出。我使用的是 SQL Server 2012，在 SS2005 中没有名为**“Blank”**的选项，我可以在其中过滤行。我也尝试了以下表达式，但它给了我错误或没有显示正确的输出

```
=IsNothing(Fields!ABC.Value)!= True 
=Fields!ABC.Value = '' 
```

请提出解决方案。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2015-05-19T12:24:34.017

*   拉起 tablix 或组属性
*   切换到“过滤器”
*   添加新过滤器
*   将表达式设置为：

    `=IsNothing(Fields!YourFieldHere.Value)`

*   **将类型设置为“布尔”**（参见下面的屏幕截图），否则您将收到“无法比较布尔和字符串类型的数据”错误。

*   将值设置为`false`

![分组对话框截图，高亮表达式类型设置](../Images/712f4ee7e5545d3c4a55517b9d18a786.png)

这适用于过滤行和组。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-12-13T07:23:10.620

我们应该在 Expression 中使用 isNothing 方法，将 Text 更改为 Boolean 然后 Value 将是“True”

例如：

```
Expression 
=IsNothing(Fields!TestA.Value)<>True
(Expression type should be Boolean)
Operator
=
Value
=True 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-22T19:43:48.440

编辑 SQL 查询，使其不会在要分组的列中返回 NULL 值，而是让它返回一个虚拟值；例如：ISNULL(columnA, 'dummy')

在列组定义中添加一个过滤器：ColumnA <> 'dummy'。

# ios - iOS dataWithContentsOfURL - 幕后发生了什么

> ID：12814119
> 
> 赞同：1
> 
> 时间：2012-10-10T07:26:39.083
> 
> 标签：ios

我有一些简单的代码（从[SO](https://stackoverflow.com/questions/5606915/ios-download-and-save-html-file)复制和粘贴）将 KLM（基于 XML）文件加载到 iOS 的文档目录中。然后我在地图上显示加载的数据。

我意识到这不是下载和保存文件的好方法 - 似乎建议使用 NSUrlConnection 以便管理加载。但我对这一切都很陌生，我想先了解一下这种情况下发生了什么。

这是代码：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *filePath = [NSString stringWithFormat:@"%@/%@", [paths objectAtIndex:0],@"index.kml"];

// Download and write to file
NSURL *url = [NSURL URLWithString:@"http://www.domain.co.uk/kml-resource..."];
NSData *urlData = [NSData dataWithContentsOfURL:url];
[urlData writeToFile:filePath atomically:YES];

NSURL *fileurl = [NSURL fileURLWithPath:filePath];
kmlParser = [[KMLParser alloc] initWithURL:fileurl];
..... 
```

我的问题是：

1.  dataWithContentsOfURL 连接/下载时会发生什么 - 应用程序是否只是冻结并变得无响应？
2.  如果我第二次在飞行模式下运行我的程序，它似乎仍然可以工作。它什么时候决定跳过下载和 writeToFile 是可以的？
3.  有谁知道它是否在 dataWithContentsOfURL 和服务器之间使用任何缓存？IE。我能否确定如果我收到响应，它是新数据，并且不只是位于 safari/iOS 的缓存中。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:02:38.707

1.  dataWithContentsOfURL 是阻塞方法，所以是的，你不应该在主线程上运行它。

2.  可能有内部超时，但这是私人的......也许是 60 秒。

3.  文档没有说明缓存，所以我认为它根本不缓存。

# python - 如何获取在 Django 的通用视图中传递的关键字参数

> ID：12814120
> 
> 赞同：0
> 
> 时间：2012-10-10T07:26:40.360
> 
> 标签：python, django

这是我的网址

```
url(r'^users/(?P<pk>\d+)/testy/$', views.MyModelUpdate.as_view(model=models.User,
    form_class=forms.UserForm, myVariable='testing'), name='my_update'), 
```

这是我的课堂视图

```
class MyModelUpdate(UpdateView):

 def get(self, request, *args, **kwargs):
       How can i get myVariable here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:25:51.947

这应该可以解决问题：

```
def get(self, request, *args, **kwargs):
     pk=kwargs['pk']
     myVariable=self.kwargs['myVariable'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:52:41.757

编辑

怎么样： def get(self, request, myVariable, *args, **kwargs):

# windows - 在 Windows 上 cron 作业的最佳方式

> ID：12814126
> 
> 赞同：0
> 
> 时间：2012-10-10T07:27:14.387
> 
> 标签：windows, cron, scheduler, jobs

我需要**Windows 7**上的**Job Scheduler** / **Cron Jobs**。

 **我需要通过命令行设置**开始日期**（带日、月和年）、**开始时间**（带小时、分钟和秒）、**作业名称**和**命令**。

我尝试使用**schtasks**，但秒数不起作用（从 10:20:00 开始）：

```
schtasks /Create /SC ONCE /ST 10:20:30 /TN MyApp /TR calc.exe 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:29:50.577

根据我的经验，schtasks 不支持秒。**

# javascript - Meaning of == "" in javascript

> ID：12814130
> 
> 赞同：0
> 
> 时间：2012-10-10T07:27:37.100
> 
> 标签：javascript

Short questioion, I'm trying to understand this tutorial: [http://superdit.com/2011/02/09/jquery-memory-game/](http://superdit.com/2011/02/09/jquery-memory-game/)

Being new to Javascript I can't seem to find what the statement '== ""' means... I understand "==", but not the empty double quotes.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T07:34:54.400

`val == ""` is a non-strict comparison to *emtpy string*. It will evaluate to true if **val** is empty, `0`, `false` or `[]` (empty array):

```
var val = "";
console.log( val == "" ); // true

val = 0;
console.log( val == "" ); // true

val = false;
console.log( val == "" ); // true

val = [];
console.log( val == "" ); // true 
```

You can use `===` to use strict comparison, fex:

```
val = 0;
console.log( val === "" ); // false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:31:33.043

The ' == "" ' is a check for an empty string. It will be true when the string is empty, and false whenever there are some characters inside it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T07:38:34.830

A quick scan of the code (ctrl-F is your friend) quickly teaches you that the only time such a statement occurs in the code is here: `if (imgopened == "")`, another search taught me that `imgopened` is an evil (global) variable that is initialized to `""` at the very top of the script, and every time some action/function is done with whatever value it was assigned.

I suspect it's a sort of card game, where two identical imgs need to be clicked, in which case this var will reference the image currently turned. If it's empty, then all imgs are facing down, and this var is empty: `""`.
In other words:

```
if (imgopened == "")//=== if no card is turned
{
    //do X, most likely: turn card
}
else
{
    //do Y
} 
```

This could've been written as

```
if (!imgopened)
//or
if (imgopened == false)//falsy, but somewhat confusing
//or
if (imgopened == 0)//!confusing, don't use
//or, my personal favorite
if (imgopened === '') 
```

# asp.net - 为什么 Web 开发者内置的 Web 服务器会突然提供零字节文件？

> ID：12814132
> 
> 赞同：1
> 
> 时间：2012-10-10T07:27:44.853
> 
> 标签：asp.net, visual-web-developer, visual-web-developer-2010

视觉 Web 开发人员 2010 速成版。C#，MVC3。

点击 F5 进行调试。

它启动内置的 ASP Web 服务器`http://localhost:50188/`

输出窗口告诉我 WebDev.WebServer40.EXE 正在加载 DLL 负载。

直到昨天它才起作用。今天所有的网址都给我一个空白页！

所有控制器（昨天更改的只是*一个*控制器，以及它的一些视图；但在所有这些更改之后它昨天*还在工作）。*在两个不同的浏览器中结果相同。使用不同的端口会出错（告诉我在端口 50188 上有*东西在监听！！）任何地方都没有错误。*仅收到 0 字节文件。

我的问题是发生了什么，我该如何解决？

**更多信息：**

重新启动机器没有任何区别。

我还找到了 obj/Debug 目录并将其删除。下次我按 F5 进行调试时，它会重新创建。还是完全一样的问题！

我回到 24 小时，在 git 中，仍然是同样的问题。所以我确定问题不是由我的任何源文件引起的。（.csproj 文件也在 git 中。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T02:32:47.910

查找名为 app_offline.htm 的文件（在您的 Web 根目录中）。它是一个零字节文件。如果存在，则提供此内容，而不是您的任何内容！（如果您想关闭站点进行维护，这是一个很棒的功能 - 在该文件中放置一条自定义消息。）

修复：只需删除它，您的网站就会重新开始工作！

当您和您的网站都想同时访问数据库时，似乎（我不确定）该文件会自动放在那里。应该会再次自动删除。但我猜一些东西的崩溃可能会把它抛在脑后。（老实说，我认为将一些内容放在 app_offline.htm 中会更明智，解释它是什么以及为什么会自动创建它。悄悄地创建一个零字节文件有点虐待狂......）

更多信息在这里：[为什么 app_offline.htm 一直出现在我的 Web 项目中？](https://stackoverflow.com/questions/2148125/why-does-app-offline-htm-keep-appearing-in-my-web-project)

在这里：[http ://www.daniweb.com/web-development/aspnet/threads/215912/why-app_offline.htm-is-created-automatically-whats-the-mystery#](http://www.daniweb.com/web-development/aspnet/threads/215912/why-app_offline.htm-is-created-automatically-whats-the-mystery#)

# android - Google Calendar API 错误：找不到日历类的类定义

> ID：12814136
> 
> 赞同：1
> 
> 时间：2012-10-10T07:27:54.947
> 
> 标签：android

大家好，我正在开发一个应用程序，它将所有事件从谷歌日历下载到安卓设备。我找到了这个例子： [http ://code.google.com/p/google-api-java-client/source/browse/calendar-android-sample/?repo=samples](http://code.google.com/p/google-api-java-client/source/browse/calendar-android-sample/?repo=samples)

[我还从http://code.google.com/p/google-api-java-client/wiki/APIs](http://code.google.com/p/google-api-java-client/wiki/APIs)下载了所需的库 也从这里：“http://code.google.com/p/google-api -java-客户端/下载/列表"

但是我收到错误，因为找不到类定义。请帮我。我的Logcat如下：

```
***10-10 12:52:10.129: E/dalvikvm(551): Could not find class 'com.google.api.services.calendar.Calendar$Builder', referenced from method com.examples.gcalsync.CalendarSample.onCreate***
10-10 12:52:10.129: W/dalvikvm(551): VFY: unable to resolve new-instance 702 (Lcom/google/api/services/calendar/Calendar$Builder;) in Lcom/examples/gcalsync/CalendarSample;
10-10 12:52:10.129: D/dalvikvm(551): VFY: replacing opcode 0x22 at 0x0009
10-10 12:52:10.129: D/dalvikvm(551): VFY: dead code 0x000b-0060 in Lcom/examples/gcalsync/CalendarSample;.onCreate (Landroid/os/Bundle;)V
10-10 12:52:10.139: E/dalvikvm(551): Could not find class 'com.google.api.services.calendar.model.Calendar', referenced from method com.examples.gcalsync.CalendarSample.onOptionsItemSelected
10-10 12:52:10.139: W/dalvikvm(551): VFY: unable to resolve new-instance 710 (Lcom/google/api/services/calendar/model/Calendar;) in Lcom/examples/gcalsync/CalendarSample;
10-10 12:52:10.139: D/dalvikvm(551): VFY: replacing opcode 0x22 at 0x000b
10-10 12:52:10.139: D/dalvikvm(551): VFY: dead code 0x000d-0036 in Lcom/examples/gcalsync/CalendarSample;.onOptionsItemSelected (Landroid/view/MenuItem;)Z
10-10 12:52:10.179: D/AndroidRuntime(551): Shutting down VM
10-10 12:52:10.179: W/dalvikvm(551): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
10-10 12:52:10.199: E/AndroidRuntime(551): FATAL EXCEPTION: main
***10-10 12:52:10.199: E/AndroidRuntime(551): java.lang.NoClassDefFoundError: com.google.api.services.calendar.Calendar$Builder***
10-10 12:52:10.199: E/AndroidRuntime(551):  at com.examples.gcalsync.CalendarSample.onCreate(CalendarSample.java:127)
10-10 12:52:10.199: E/AndroidRuntime(551):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-10 12:52:10.199: E/AndroidRuntime(551):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
10-10 12:52:10.199: E/AndroidRuntime(551):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
10-10 12:52:10.199: E/AndroidRuntime(551):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
10-10 12:52:10.199: E/AndroidRuntime(551):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
10-10 12:52:10.199: E/AndroidRuntime(551):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-10 12:52:10.199: E/AndroidRuntime(551):  at android.os.Looper.loop(Looper.java:123)
10-10 12:52:10.199: E/AndroidRuntime(551):  at android.app.ActivityThread.main(ActivityThread.java:4627)
10-10 12:52:10.199: E/AndroidRuntime(551):  at java.lang.reflect.Method.invokeNative(Native Method)
10-10 12:52:10.199: E/AndroidRuntime(551):  at java.lang.reflect.Method.invoke(Method.java:521)
10-10 12:52:10.199: E/AndroidRuntime(551):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-10 12:52:10.199: E/AndroidRuntime(551):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-10 12:52:10.199: E/AndroidRuntime(551):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-15T07:58:32.970

问题得到解决。只需要将所有外部库放在 libs 文件夹中......

# github-api - 需要避免重定向 GitHub 访问并生成访问令牌

> ID：12814137
> 
> 赞同：0
> 
> 时间：2012-10-10T07:27:57.490
> 
> 标签：github-api

是否可以避免 Github 访问的重定向。即我可以在内部传递用户名和密码并生成令牌而不显示用户 github 页面进行登录。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:35:56.100

当您使用基本身份验证时，您可以只以纯文本形式发送用户名和密码，但是当您使用 OAuth 时，您必须显示页面。

# scala - 为什么我可以使用传递给类定义的参数？

> ID：12814138
> 
> 赞同：2
> 
> 时间：2012-10-10T07:28:03.857
> 
> 标签：scala

我只是在学习类和对象以及 Scala，昨天我看到了这样的东西：

```
class Foo(bar: Int) {
  def increaseByOne = bar + 1
} 
```

为什么我可以`bar`在方法中使用`increaseByOne`？我希望方法定义抱怨不知道`bar`。

我虽然定义这样一个类的正确方法是

```
class Foo(x: Int) {
  val bar = x

  def increaseByOne = bar + 1
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T07:38:37.430

这是 Scala 的一大优点：如果您从任何非构造函数的方法中引用构造函数参数，Scala 会自动将该构造函数变量分配给一个字段。Scala 非常有效地将您的第一个代码片段转换为第二个代码片段（带有`private[this]`修饰符）。

此外，前面带有`val`/的构造函数参数`var`也将创建 getter/setter：

```
class Foo(val bar: Int)
val foo = new Foo(42);
println(foo.bar) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T07:38:26.553

在这种情况下`bar`，被定义为`private[this]`并且可以在类定义中访问。您可以使用`-Xprint:typer`以下选项进行检查：

```
class Foo extends java.lang.Object with ScalaObject {
  <paramaccessor> private[this] val bar: Int = _;
  def this(bar: Int): $line1.$read.$iw.$iw.Foo = {
    Foo.super.this();
    ()
  }
} 
```

# c# - 如何重定向到授权失败的不同视图？

> ID：12814139
> 
> 赞同：1
> 
> 时间：2012-10-10T07:28:04.823
> 
> 标签：c#, asp.net-mvc-3

在使用具有域授权的 mvc 内网模板时，如何根据控制器重定向到授权失败时的某些错误页面？

所以，我有一个控制器类：

```
 [AuthorizeWithRedirect(Users = @"user")]
    public class MyController : Controller
    {
    ...
    } 
```

默认情况下，我不会被重定向到任何地方。如果我在另一个用户下打开页面，我只会看到一个空白页面。问题是，如果授权失败，我希望将请求重定向到不同控制器的不同页面。也就是说，一页用于`MyController`，另一页用于其他控制器，等等。

我知道我可以派生`AuthorizeAttribute`并覆盖`HandleUnauthorizedRequest`方法。但我不能让它工作：

```
public class AuthorizeWithRedirect : AuthorizeAttribute
{
   protected override void HandleUnauthorizedRequest(AuthorizationContext context)
   {
       UrlHelper urlHelper = new UrlHelper(context.RequestContext);
       context.Result = new RedirectResult(urlHelper.Action("MyErrorPage"));
   }
} 
```

我收到一个错误，说找不到指定的 url，而文件夹`MyErrorPage.cshtml`中确实存在。`Views\Shared`

**编辑**

```
 [Authorize(Users = @"user")]//should be redirected to ErrorPage1
    public class MyController1 : Controller
    {
    ...
    } 
```

尽管

```
 [Authorize(Users = @"user")]//should be redirected to ErrorPage2
    public class MyController2 : Controller
    {
    ...
    } 
```

即同一个授权失败，不同控制器的不同错误页面

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T07:38:04.980

AuthorizeWithRedirect 看起来不错。但是 MVC 抱怨你没有正确的操作方法。

观点在这里不是问题。控制器和动作方法是。

尝试这样的事情：

```
context.Result = new RedirectResult(urlHelper.Action("Test", "Redirect")); 
```

使用带有公共操作方法 Redirect 的当前 TestController。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-10T07:37:39.253

在登录方法之上使用处理错误数据注释

```
[HandleError]
public ActionResult Login()
{
    //your action method
} 
```

# c# - 如何在 Web 应用程序中实现 EasyQuery？

> ID：12814144
> 
> 赞同：0
> 
> 时间：2012-10-10T07:28:52.077
> 
> 标签：c#, asp.net, .net, c#-4.0, web-applications

临时报告的最短方法是 EasyQuery

大多数数据库应用程序都包含一些搜索和过滤功能。但是不可能预见应用程序的用户需要构建的所有可能类型的查询。

谁能解释我如何在我的 .Net Web 应用程序中实现简单查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:57:49.803

There are examples of implementations for both asp.net webforms and mvc when you download and install the product. I'm currently going through their MVC project and seeing what's what myself.

# android - 为什么我不能同时在同一设备上获得与谷歌纬度一样准确的结果

> ID：12814149
> 
> 赞同：0
> 
> 时间：2012-10-10T07:29:08.580
> 
> 标签：android, gps, criteria, locationmanager

**序言：**
我看过很多关于提高 android 设备的 GPS 性能和准确性的帖子。但我只是好奇，对我的 GPS 跟踪应用程序给出的结果有点尴尬。特别是当我将它与我从谷歌纬度获得的结果进行比较时。

**这是我的问题：**

> 为什么我无法同时在同一设备上获得与谷歌纬度一样准确的结果。

我使用“标准”工具来自定义我的结果和提供者，如下所示

```
Criteria criteria = new Criteria();
criteria.setAccuracy(Criteria.ACCURACY_HIGH); 
provider = locmgr.getBestProvider(criteria, true); 
```

我能够在测试设备中以 800-900 米的精度获得 GPS 定位结果：LG Optimus pro。谷歌纬度应用程序显示了更精细的结果作为设备的位置。该应用程序是否正在执行任何类型的缓存..或更精细的标准调整。

我真的很喜欢看到我的应用程序提供 20 到 30 米或更高的精度；-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:15:19.367

Use Android's native location framework, it all depends on your GPS chipset and weather conditions at the time, but through [LocationManager](http://developer.android.com/reference/android/location/LocationManager.html) I'm usually able to get at least a 20m accuracy. Check [this tutorial](http://developer.android.com/guide/topics/location/strategies.html) out.

You can specify whether or not to work with network provided location for example, which when provided by Cell-ID might be highly inaccurate but by WiFi highly misleading, both of them can help you get approximate locations when GPS satellites are not an option.

# php - 调用“require_once”后未定义的索引

> ID：12814156
> 
> 赞同：0
> 
> 时间：2012-10-10T07:29:53.870
> 
> 标签：php

我把这个写在一个页面上：

```
require_once("pdf/tab_activite.php");
...
foreach ($tab["activite"] as $key => $value) 
{
   ...
} 
```

在 tab_activite.php 里面有这个：

```
...
$list = new activite($this->db);
$list->lireParNiveau($critere);
$tab["activite"] = $list->tableau ;
... 
```

然后在日志中有：

```
[10-Oct-2012 10:30:48] PHP Notice:  Undefined index:  activite in C:\wamp\www\mp\models\objet.class.php on line 543
[10-Oct-2012 10:30:48] PHP Warning:  Invalid argument supplied for foreach() in C:\wamp\www\mp\models\objet.class.php on line 543 
```

那么如何正确操作 $tab["activite"] 变量呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:40:29.843

由于在`require_once()`函数内部调用，`$tab["activite"]`因此仅存在于该函数的范围内。在使用变量之前将语句添加`global $tab;`到文件中以扩展其范围，以便主程序也可以看到它。`tab_activite.php``$tab`

```
global $tab;
$list = new activite($this->db);
$list->lireParNiveau($critere);
$tab["activite"] = $list->tableau ; 
```

**编辑：**如果您多次调用该函数，可能会出现另一个问题，因为在使用`require_once()`. 如果是这种情况，请替换`require_once()`为`require()`并查看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:36:09.407

在 $tab["activite"] 上做一个 var_dump

```
var_dump($tab["activite"]); 
```

如果它什么也没说，那么变量（或索引）不存在，并且您的文件以错误的方式包含（搜索路径？）。

您的错误日志还暗示您的索引“activite”不存在，您确定它是这样称呼的吗？也许是“激活”？希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T07:38:14.080

您可以使用`global`全局`$tab`变量。但是很多程序员不建议在`global`没有必要的情况下使用。

但在你的情况下，我认为你必须`global`使用`$tab`

[http://php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

# opencv - 如何使用 OpenCV 进行基于内容的视频摘要？

> ID：12814157
> 
> 赞同：-1
> 
> 时间：2012-10-10T07:30:01.623
> 
> 标签：opencv, video-processing

我对这个话题有点困惑。我为视频做了一些物体检测。我应该根据视频中检测到的对象进行总结，还是应该从视频中提取关键帧以对内容有很好的了解？

我确实在互联网上搜索过这个......[我找到了这个](http://mikelrodriguez.com/video-summarization/)

但我仍然想知道我应该如何进行？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T07:41:42.450

这个问题没有答案，这是一个开放的研究课题！公关。来自法国的 Bernard Merialdo 多年来一直在研究这个话题。你可以看看[他的研究组页面和出版物](http://bmgroup.eurecom.fr/)。

# html - 是否可以使用 Lightroom 将图像上传到服务器？

> ID：12814158
> 
> 赞同：0
> 
> 时间：2012-10-10T07:30:02.797
> 
> 标签：html, lightroom

所以我想知道的是是否可以通过 FTP 从 lightroom 上传图像到服务器？每个客户都将获得自己的文件夹以及用于查看图像的登录名和密码。我希望 lightroom 有一个不错的程序，可以很好地布置图像，并允许密码保护，还允许选择给图像一个标题。

这可能吗？如果是这样，任何人都可以向我指出一些资源的方向，以展示如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:33:20.513

Adobe 曾经通过其可下载的 Lightroom SDK 提供 FTP 插件，但我不确定是否仍然如此。但是，有第三方插件可以同样出色地完成这项工作。

例如： http: [//www.presetsheaven.com/2009/10/27/export-to-ftp-with-lightroom/](http://www.presetsheaven.com/2009/10/27/export-to-ftp-with-lightroom/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T14:22:42.120

您可以在以下网址找到最新的 Lightroom 4 SDK： http: [//www.adobe.com/devnet/photoshoplightroom.html](http://www.adobe.com/devnet/photoshoplightroom.html)，其中仍然包含 @mattcawley 提到的 FTP 插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-28T16:16:15.857

查看内置的网络画廊——它们很容易使用，如果它们还不够，你可以安装更多更好的——你可能会感兴趣，例如[http://fonto.pl/fontogallery.html——](http://fonto.pl/fontogallery.html)它有您可能需要的基本功能

# maven - 通过 jboss 部署 Maven ear

> ID：12814162
> 
> 赞同：1
> 
> 时间：2012-10-10T07:30:20.717
> 
> 标签：maven

我们正在开发我们的项目，该项目包含 web 模块、jar 模块、ejb 模块。我能够构建一个 ear 模块，它与那些 ejb 模块、web 模块和 lib 文件夹中的一些外部 jar 捆绑在一起。我的问题是我有一些内部 jar 模块捆绑在 ear lib 文件夹中。当我从终端构建时，我可以使用所有模块构建 ear。但是当我单独导入 ear（不导入我的内部 jar 模块）并开始部署时，部署失败是由于耳朵 lib 文件夹中缺少的内部 jar。但是当我也导入所有内部 jar 模块时它工作正常。

是否需要在我的项目中导入所有 Mavenised 模块？不能只导入ear 模块。

# java - 带有 setMinimumFractionDigits Java 的分数

> ID：12814174
> 
> 赞同：0
> 
> 时间：2012-10-10T07:30:51.890
> 
> 标签：java, fractions

我想在下面设置最小的小数位数

```
double a = 1d / 3;
NumberFormat nf = NumberFormat.getInstance();
nf.setMinimumFractionDigits(30);
System.out.println(nf.format(a)); 
```

但它给出的结果为

```
 0.333333333333333300000000000000 
```

我该如何克服呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:01:13.533

尝试这样的事情：

```
 BigDecimal b1 = new BigDecimal(1);
    BigDecimal b2 = new BigDecimal(3);
    System.out.println(b1.divide(b2, 30, BigDecimal.ROUND_UP)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:16:52.393

该类型的精度`double`限制为大约 16 个十进制数字（请参阅：[双精度浮点格式](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)）。因此，从`double`.

`BigDecimal`如果您需要无限精度的浮点数，请使用。

# fortran - 如何检查输出是否已在 Fortran 中重定向？

> ID：12814177
> 
> 赞同：1
> 
> 时间：2012-10-10T07:31:08.877
> 
> 标签：fortran

我想知道在编写 Fortran 代码时如何检查标准输出是否已被重定向。因为我在输出中添加了编码以使它们变得丰富多彩，这在重定向发生时不起作用。所以如果是这样，编码应该被禁用。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:49:18.420

如果@Janneb 建议的非标准解决方案没有吸引力，我建议将参数传递给 Fortran 程序，告诉它将输出发送到哪里。然后程序可以确定是否允许编写您的编码。如果您选择这条路线，您可以使用 (Fortran 2003) 内在子例程`get_command_argument`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T09:10:46.873

最简单的可行方法（但可能是特定于编译器的）是使用编译器扩展来访问 isatty() 函数（在 gfortran 中，是 ISATTY 内在函数）。考虑以下代码

```
 program test_isatty
  use iso_fortran_env
  write(*, *) isatty(output_unit)
end program test_isatty 
```

运行它

```
 $ ./isatty 
 T
$ ./isatty > foo
$ cat foo
 F 
```

如果您的 Fortran 编译器没有 isatty 扩展名，但带有一个扩展名来获取与 Fortran 单元（在 gfortran 中，FNUM 内部）相对应的系统文件描述符 (fd)，您可以使用它来获取 fd 的标准输出单元，然后您可以使用 ISO_C_BINDING 在 fd 上调用 isatty()。

# android - 如果用户在当前屏幕上没有做任何工作，则关闭当前活动并启动另一个活动

> ID：12814182
> 
> 赞同：1
> 
> 时间：2012-10-10T07:31:17.310
> 
> 标签：android

如果用户在当前屏幕上没有做任何工作，则关闭当前活动并启动另一个活动。假设我在 Activity1 并且我在 30 秒内没有做任何工作。我希望另一个活动说 Activity2 自动启动并且 Activity1 完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:38:39.347

您可以在 Activity1 启动时创建一个变量并将系统时间存储在其中。

有关当前系统时间，请参阅此链接： [在 Android 上获取当前时间和日期](https://stackoverflow.com/questions/5369682/android-get-current-time-and-date)

然后您可以创建一个循环并检查变量的值是否小于系统当前时间的 30 秒。如果是，您可以调用一个方法。

在该方法中，您可以启动新活动（Activity2）。

```
//To start new activity

Intent intent=new Intent(your_current_class.this,activity_you_want_to_call.class);

                                startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:42:29.190

您可以`Timer`为此使用 a 。当用户转到 Activity1 时，启动该计时器。如果用户在两者之间进行一些操作，取消旧定时器并在指定时间重新启动新定时器。当计时器时间过去时，启动 Activity2。作为参考，看看[这个](https://stackoverflow.com/questions/12364327/can-longpress-trigger-after-move-events/12366702#12366702)答案。

# android - 此应用程序可供 0 多个设备使用

> ID：12814188
> 
> 赞同：0
> 
> 时间：2012-10-10T07:31:47.323
> 
> 标签：android, manifest

**我的 apk 处于活动状态**

我刚刚发布了我的应用程序，当我转到 Play 商店网页时，它指出我的应用程序与我的任何设备都不兼容：[Sharelist](https://play.google.com/store/apps/details?id=com.plumillonforge.android.sharelist)

![在此处输入图像描述](../Images/520d50623d859f7641956dd60e93fc70.png)

所以我检查了 Play 发布页面，我得到“此应用程序可用于 0 多个设备” ![在此处输入图像描述](../Images/54732b2efe50bfaaa723267bba749399.png)

我没有对我的 Manifest 做任何花哨的事情：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.plumillonforge.android.sharelist"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<supports-screens 
    android:smallScreens="true" 
    android:normalScreens="true" 
    android:largeScreens="true"
    android:anyDensity="true"/>

<application
    android:icon="@drawable/launcher"
    android:label="@string/app_name"
    android:theme="@style/SharelistTheme">

    <activity
        android:name=".PagerActivity">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="file" />
            <data android:mimeType="*/*" />
            <data android:pathPattern=".*\\.shl" />
            <data android:pathPattern=".*\\..*\\.shl" />
            <data android:pathPattern=".*\\..*\\..*\\.shl" />
            <data android:pathPattern=".*\\..*\\..*\\..*\\.shl" />
            <data android:host="*" />
        </intent-filter>

        <intent-filter>
            <action android:name="android.intent.action.SEND" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="text/plain" />
        </intent-filter>
    </activity>

    <activity
        android:name=".ListActivity"
        android:label="@string/title_activity_apps_list" />

    <activity
        android:name=".fragment.FilePickerActivity"
        android:label="@string/choose_shl_file" />

    <activity android:name="com.google.ads.AdActivity"
        android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>
</application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:32:43.797

嘿，将以下代码添加到 Manifest 文件并尝试一下。它应该工作。

```
<uses-feature android:name="android.hardware.touchscreen"  android:required="false" /> 
```

并尝试删除 Play 商店发布页面中的复制保护。

试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:33:15.770

我发现了问题

是 Google Admob jar 文件包含导致了这种奇怪的行为：我在 src/ 中创建了一个文件夹，添加了 jar 并将其包含在我的构建路径中

看起来构建还可以，但 Play 商店很困惑

所以我删除了 jar 和构建路径，然后在我的项目根目录中创建了一个 libs/ 文件夹，然后将它添加到构建路径中，它现在可以工作了:)

**您不得将 jar 文件添加到 src/ 文件夹（或任何子文件夹）中并将其添加到构建路径中**

# java - 在 Linux 环境中如何对值进行四舍五入？

> ID：12814192
> 
> 赞同：1
> 
> 时间：2012-10-10T07:31:56.567
> 
> 标签：java

我有一个小程序从 Oracle 数据库收集数据并在 Linux 的 GUI 上显示。在数据库中：值 = 4.25 但是在我获得值并在 GUI 上显示数据类型为 double 之后。我的价值 = 4.2

在 Linux 机器中，如何对值进行四舍五入？（大于 0.005 的值将四舍五入为 0.01，或大于等于 0.005 的值将四舍五入为 0.01）

前任：

```
#1/ 4.25 will be rounded to 4.2
#2/ 4.25 will be rounded to 4.3 
```

哪一个是真的：#1 还是#2？

请帮我验证这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:34:34.763

四舍五入将根据 #2 - 4.25 将四舍五入为 4.3。仍然请注意，您看到的 4.25 很可能是 4.249999999999，在这种情况下，四舍五入到 1 个十进制数字将得到 4.2。

# c# - 如何在转发器中找到带有 runat=server 的 HTML 标记？

> ID：12814202
> 
> 赞同：0
> 
> 时间：2012-10-10T07:32:24.803
> 
> 标签：c#, asp.net, .net, repeater

我正在使用 a 生成一个表格`Repeater`，我需要设置 a `<td>`as`runat=server`来为其设置可见性。

我正在尝试`ItemDataBound`使用方法将其查找到事件中`FindControl`，但它不起作用。热我能做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T07:36:43.860

如果你想这样做，你应该这样写：

```
Visible=<%= SetVisiblity() %> 
```

其中 SetVisiblity 是一个公共函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:45:02.913

这应该可以解决问题。首先，创建一个调用来捕获转发器的 OnDataItemBound 事件的方法。

```
protected void MyRepeater_ItemDataBound(object sender, RepeaterItemEventArgs e) 
{
   // Use FindControl, but start from the context of the RepeaterItem.
   //
   HtmlTableCell cell = e.item.FindControl("CellID") as HtmlTableCell;

   if ( cell != null )
   {
      // Do what you gotta do.
   }
} 
```

您可以在转发器标记上显式连接事件。

```
<asp:Repeater ID="MyRepeater" runat="server" OnItemDataBound="MyRepeater_ItemDataBound">
</asp:Repeater> 
```

# javascript - 如何按 UL 下所有 LI 的图像 src 名称排序？

> ID：12814212
> 
> 赞同：1
> 
> 时间：2012-10-10T07:33:10.077
> 
> 标签：javascript, jquery, sorting, html-lists

我得到了这样的 UL：

```
<ul id='mylist'>
<li id='1'><img src='kids.jpg'>kids.jpg</li>
<li id='2'><img src='apple.jpg'>apple.jpg</li>
<li id='3'><img src='toys.jpg'>toys.jpg</li>
<li id='4'><img src='love.jpg'>love.jpg</li>
</ul> 
```

我想像这样使用 jquery/javascript 对其进行排序：

```
<ul id='mylist'>
<li id='2'><img src='apple.jpg'>apple.jpg</li>
<li id='1'><img src='kids.jpg'>kids.jpg</li>
<li id='4'><img src='love.jpg'>love.jpg</li>
<li id='3'><img src='toys.jpg'>toys.jpg</li>
</ul> 
```

我可以知道如何编写代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:48:54.553

```
$(document).ready(function() {

    var ul = $('ul#mylist'),
    li = ul.children('li');

    li.detach().sort(function(a,b) {
        return alphabetical($(a).children('img').attr('src'), $(b).children('img').attr('src'));
    });

    ul.append(li);
});

function alphabetical(a, b)
{
     var A = a.toLowerCase();
     var B = b.toLowerCase();
     if (A < B){
        return -1;
     }else if (A > B){
       return  1;
     }else{
       return 0;
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:18:32.597

```
<ul id='mylist'>
<li id='1'><img src='kids.jpg'>kids.jpg</li>
<li id='2'><img src='apple.jpg'>apple.jpg</li>
<li id='3'><img src='toys.jpg'>toys.jpg</li>
<li id='4'><img src='love.jpg'>love.jpg</li>
</ul>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">
var starting_array = new Array();
var temp_array = new Array();
for(var i = 1 ; i <= 4 ;i++){
starting_array[i] =  $('#'+i).find('img').attr('src');
temp_array[i] = $('#'+i).find('img').attr('src');
}

temp_array.sort();

$('#mylist').html('');
var li_data = '';
for(var j=0; j< temp_array.length-1 ; j++ ){
     var id = $.inArray(temp_array[j] ,starting_array);
     li_data += '<li id="'+ id +'"><img src="'+ temp_array[j] +'" > '+ temp_array[j]+' </li>'; 
}
$('#mylist').html(li_data);

</script> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-10T09:43:32.603

你可以试试这个：

```
var items = $("#mylist > li").detach().get( ); 

items.sort( srcSort );
$("#mylist").append( items );

function srcSort( a, b ) {

    var _a = $(a).children("img").prop("src").toUpperCase();
    var _b = $(b).children("img").prop("src").toUpperCase();

    if( _a > _b ) return 1;
    if( _a < _b ) return -1;
    return 0;
} 
```

[在这里](http://jsfiddle.net/PDuyu/2/)摆弄

# bundle - Unity - 不要两次加载相同的assetbundle

> ID：12814214
> 
> 赞同：2
> 
> 时间：2012-10-10T07:33:12.190
> 
> 标签：bundle, unity3d, assets

我在下载资产包时遇到问题。

我得到错误：

```
The asset bundle 'url/levelpackIphone-Copy.unity3d' can't be loaded because
another asset bundle with the same files are already loaded 
```

我需要检查资产包是否已经下载。我的问题是我不能只存储 URL，因为您下载的文件可以有不同的名称，但仍然包含相同的内容。

因此，我需要以某种方式检查资产包是否已经下载。我真的不喜欢使用类似的东西

```
bundle.Unload(false); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-22T06:58:04.967

我遇到了同样的问题，统一抛出以下错误：

> 无法加载缓存的 AssetBundle。已从另一个 AssetBundle 加载了同名文件

我在关卡的不同阶段加载资产包，但是当我尝试重新启动关卡并尝试再次加载资产包时，我遇到了上述相同的错误。然后我尝试将资产包保存在列表中并尝试在级别重新启动时清除列表，但这并没有解决问题。我什至试图`Caching.CleanCache()`从内存中删除任何数据但没有用。在下载并在关卡加载后再次从磁盘加载它们之后，我将资产包保存在磁盘上。

**解决方案：**

```
private IEnumerator LoadAssetFromFile(string _name) 
{ 
    print("Came inside LoadAssetFromFile :" + _name); 
    WWW www= new WWW(string.Concat("file:///", Application.dataPath, "/", _name +".unity3d"));//(m_savePath + _name); 
    //WWW www= new WWW(string.Concat(Application.dataPath, "/", _name));//(m_savePath + _name);

    yield return www;

    if(www.error == null)
    {
        //m_bundle =  www.assetBundle;
        AssetBundle bundle =  www.assetBundle;
        www.Dispose();
        www = null;
        string path = m_savePath + _name;
        //object [] obj = m_bundle.LoadAll();
        //for(int i=0; i< obj.Length; i++)
        //{
            //print ("Obj :"+ i +" " + obj[i].ToString());
        //}
        bundle.LoadAll();
        print ("AssetBundle is :" + bundle.mainAsset);
        print("============> " + path);
        GameObject _go =  (GameObject)Instantiate(bundle.mainAsset);
        bundle.Unload(false);
    }
    else
    {
        return false;
    }   
} 
```

`bundle.Unload(false)`在实例化之后使用`gameObject`已经成功了。

# sql - 用不同的行在sql中连接两个表

> ID：12814216
> 
> 赞同：4
> 
> 时间：2012-10-10T07:33:16.537
> 
> 标签：sql, oracle

我有两个 sql 查询，这给了我两个具有不同行数的表，我需要加入它们 - 只是相互显示两个表

表格1

```
 row1      row2
  ==============
  12        gfd
  13        jf
  14        gfd
  15        jhhh 
```

表 2

```
 row3      row4
  ==============
  18    gjkd
  11    jfyty 
```

结果

```
row1    row2     row3         row4
======================================
  12    gfd      18           gjkd
  13    jf       11           jfyty
  14    gfd     
  15    jhhh 
```

每个表中的数据完全不同，并且具有不同的字段名称。我使用*Oracle DB*，查询需要在*iReport*中使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T07:34:39.340

使用[左外连接](http://www.w3schools.com/sql/sql_join_left.asp)

```
select * 
from table1 t1
LEFT OUTER  join table2 t2
on t1.row1=t2.row3 
```

# [SQL小提琴演示](http://www.sqlfiddle.com/#!2/b15ec/2)

**编辑1：**

这适用于 MySQL

这是为您更新的问题

# [SQL Fiddle 新演示](http://sqlfiddle.com/#!2/9dbd9/1)

```
select row1,row2,row3,row4
from
     (select row1,row2,@i:=@i+1 AS rn
      from Table1,(SELECT @i:=0) r)t1 
left join
     (select row3,row4,@j:=@j+1 AS rn
      from Table2,(SELECT @j:=0) r )t2
on t1.rn=t2.rn 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T08:34:40.087

在我看来，您想按每个表中行的顺序连接这两个表。抱歉，SQL 没有表内行的隐式顺序的概念，并且 SQL 无法在没有任何列的情况下连接两个（或多个）表的列以允许 JOIN。

您可以在 SQL 中完成的最接近的事情是：

*   `CROSS JOIN`两张桌子之间。这会将 table1 的每一行重复到 table2 的每一行：

```
SELECT t1.row1, t1.row2, t2.row3, t2.row4
FROM table1 t1
CROSS JOIN table1 t2
-- row1  row2    row3  row4
-- ----  ------  ----  ------
--   12  gfd     18    gjkd
--   13  jf      18    gjkd
--   14  gfd     18    gjkd
--   15  jhhh    18    gjkd
--   12  gfd     11    jfyty
--   13  jf      11    jfyty
--   14  gfd     11    jfyty
--   15  jhhh    11    jfyty 
```

*   创建另一个（辅助）列并将行的“顺序”存储在每个表中（有很多方法可以使用游标、序列……）。然后使用这些列来构建`OUTER JOIN`：

```
SELECT t1.auxOrder1, t1.row1, t1.row2, t2.auxOrder2, t2.row3, t2.row4
FROM table1 t1
LEFT OUTER JOIN table1 t2 ON (t1.auxOrder1 = t2.auxOrder2)
-- auxOrder1 row1  row2    auxOrder2 row3  row4
-- --------- ----  ------  --------- ----  ------
--         1   12  gfd             1   18    gjkd
--         2   13  jf              2   11    jfyty
--         3   14  gfd
--         4   15  jhhh 
```

顺便问一下，为什么要创建名称为“row1”、“row2”的列？如果不是故意的，我想这可能会变得混乱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T07:34:39.357

用于此，因此即使在另一个表上没有匹配项`LEFT JOIN`，它也会返回表上的所有记录。`LEFT`

```
SELECT  a.*, b.*
FROM    table1 a
        LEFT JOIN table2 b
            ON a.row1 = b.row3 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/4cbfb/1)

[更多信息：**连接的可视化表示**](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

**更新 1**

如果您正在使用`SQL Server`

```
SELECT a.row1, a.row2,
       b.row3, b.row4
FROM
  (
    SELECT ROW_NUMBER() OVER (ORDER BY row1 ASC) rn,
           row1, row2
    FROM table1
  ) a LEFT JOIN
  (
    SELECT ROW_NUMBER() OVER (ORDER BY row3 ASC) rn,
           row3, row4
    FROM table2
  ) b ON a.rn = b.rn 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!3/aef6f/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-15T11:44:29.363

为了显示两个表中的唯一名称和地址值，而不是在执行连接时重复值，此查询将从两个表中获取唯一值并按顺序显示它们。

这是我使用 oracle 11 能够做到的：

```
select name, address,  table1_id, table2_id 
from 
(
    select table1_id, name,  table_id||(row_number () over (partition by table_id order by name desc nulls last)) as  table1_id_row
    from 
    (
        select distinct table_id table1_id, name
        from table1
        where table_id is not null 
    ) 
) 
FULL OUTER JOIN 
(
    select table2_id, address,   table_id||(row_number () over (partition by table_id order by address desc nulls last)) as  table2_id_row
    from 
    (
        select distinct table_id table2_id, address, city, state, zip
        from table2
        where table_id is not null
    )
) 
ON table1_id_row = table2_id_row
where table1_id = '123456789' or table2_id = '123456789' 
```

# blackberry - 像在android中一样的评级明星

> ID：12814220
> 
> 赞同：0
> 
> 时间：2012-10-10T07:33:28.533
> 
> 标签：blackberry, rating, bitmapfield

我的目标是创建一个像在 android 中一样的星域，它们有一个评级星域。我已经完成以下工作：

*   创造星域 (5)
*   单击时，位图会发生变化。
*   当“未单击”位图更改回默认值时。

我的下一步是执行以下操作：如果未单击星号 1，则后面的所有 4 星都不能单击，如果单击星号 2，则星号 3 必须可单击，星号 4-5 不得单击，（然后向后) 如果所有 5 颗星都被选中，则只有 5 颗星必须是可点击的，如果未点击 5 和 4 颗星，则 3 颗星必须是可点击的，2-1 颗星不能是可点击的，以此类推。

我可以为您提供到目前为止我所做的代码片段（检查链接）：http: [//supportforums.blackberry.com/t5/Java-Development/Rating-Stars-like-in-android/mp/1942559](http://supportforums.blackberry.com/t5/Java-Development/Rating-Stars-like-in-android/m-p/1942559)

如果您对如何做我想做的事情有任何想法，请告诉我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:08:31.843

这篇文章对您根据您的要求在黑莓上评级明星很有用。

[http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/800505/800608/How_to_-_Implement_advanced_buttons,_fields,_and_managers.html?nodeid=2406256&vernum=0](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/800505/800608/How_to_-_Implement_advanced_buttons,_fields,_and_managers.html?nodeid=2406256&vernum=0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:44:19.790

```
LabelField RateDeal = new LabelField("Rating: ");
    HorizontalFieldManager StarManager=new HorizontalFieldManager(USE_ALL_WIDTH);
    final Bitmap StarNotClicked = Bitmap.getBitmapResource("rating_star.png");
    final Bitmap StarClicked = Bitmap.getBitmapResource("rating_star_focus.png");

    Star1 = new BitmapField(StarNotClicked,BitmapField.FOCUSABLE){
        protected boolean navigationClick(int status, int time){
            fieldChangeNotify(1);
            Star1.setBitmap(StarClicked);
            Star2.setBitmap(StarNotClicked);
            Star3.setBitmap(StarNotClicked);
            Star4.setBitmap(StarNotClicked);
            Star5.setBitmap(StarNotClicked);
            AmountOfStarsSelected(1);
            return true;
        }
    };
    Star2 = new BitmapField(StarNotClicked,BitmapField.FOCUSABLE){
        protected boolean navigationClick(int status, int time){
            fieldChangeNotify(1);
            Star1.setBitmap(StarClicked);
            Star2.setBitmap(StarClicked);
            Star3.setBitmap(StarNotClicked);
            Star4.setBitmap(StarNotClicked);
            Star5.setBitmap(StarNotClicked);
            AmountOfStarsSelected(2);
            return true;
        }
    };
    Star3 = new BitmapField(StarNotClicked,BitmapField.FOCUSABLE){
        protected boolean navigationClick(int status, int time){
            fieldChangeNotify(1);
            Star1.setBitmap(StarClicked);
            Star2.setBitmap(StarClicked);
            Star3.setBitmap(StarClicked);
            Star4.setBitmap(StarNotClicked);
            Star5.setBitmap(StarNotClicked);
            AmountOfStarsSelected(3);
            return true;
        }
    };
    Star4 = new BitmapField(StarNotClicked,BitmapField.FOCUSABLE){
        protected boolean navigationClick(int status, int time){
            fieldChangeNotify(1);
            Star1.setBitmap(StarClicked);
            Star2.setBitmap(StarClicked);
            Star3.setBitmap(StarClicked);
            Star4.setBitmap(StarClicked);
            Star5.setBitmap(StarNotClicked);
            AmountOfStarsSelected(4);
            return true;
        }
    };
    Star5 = new BitmapField(StarNotClicked,BitmapField.FOCUSABLE){
        protected boolean navigationClick(int status, int time){
            fieldChangeNotify(1);
            Star1.setBitmap(StarClicked);
            Star2.setBitmap(StarClicked);
            Star3.setBitmap(StarClicked);
            Star4.setBitmap(StarClicked);
            Star5.setBitmap(StarClicked);
            AmountOfStarsSelected(5);
            return true;
        }
    };
    StarManager.add(Star1);
    StarManager.add(Star2);
    StarManager.add(Star3);
    StarManager.add(Star4);
    StarManager.add(Star5);
        add(StarManager); 
```

# javascript - 在同一 HTML 页面的文本框字段中显示随机数

> ID：12814230
> 
> 赞同：1
> 
> 时间：2012-10-10T07:33:48.637
> 
> 标签：javascript, html

我有代码，当我单击提交按钮时，我需要在其中获取一个随机数。随机数应显示在同一页面的另一个文本框中。

这是我的代码：

```
<html>
<head>
<script type="text/javascript">
function randomnumber(num1, num2)
{
    num1 = parseInt(num1);
    num2 = parseInt(num2);
    if(num1 >= num2)
    {
        alert("Number 2 should be greater than Number 1");
    }
    else
    {
        var generator = Math.random()*(num2-num1);
        generator = Math.round(num1+generator);

        document.test.result.value = generator;
        document.getElementById("p1").innerHTML=generator;
    }
}
</script>
</head>
<body>
    <form name="test" onsubmit = "return randomnumber(num1,num2)" >
        <table>
            <tr>
                <td>
                    <input type="text" name="num1" size ="35" maxlength= "25">
                </td>
                <td>
                    <input type="text" name="num2" size ="35" maxlength= "25">
                </td>
                <td>
                    <input type="text" name="p1" value = "" size ="35" maxlength= "25">
                </td>
                <td>
                    <input type="submit" name="submit" value"generate">
                </td>
            </tr>
        </table>
    </form>
</body>
</html> 
```

随机数在脚本中的变量“生成器”中生成。我需要获取此文本字段中的值。

```
<td>
    <input type="text" name="p1" value = "" size ="35" maxlength= "25">
</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:36:31.633

你想要的是：

```
var generator = Math.random()*(num2-num1);
generator = Math.round(num1+generator);

// document.test.result.value = generator; // Not sure what this line is for (don't see a test.result element.
document.getElementById("p1").value=generator; 
```

注意`.value`而不是`.innerHTML`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:37:14.393

最好在您的 html 中以这种模式更改您的输入文本：

```
<input type="text" name="p1" id="p1" value = "" size ="35" maxlength= "25"> 
```

并使用此 javascript 代码更改值：

```
document.getElementById("p1").value=generator; 
```

因为 id 是唯一的，您可以选择更好的元素

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T07:37:34.687

这应该这样做

```
document.getElementsByName('p1')[0].value = generator 
```

问题是“p1”不是文本框的 id 而是名称。上面的代码仅适用于名称为“p1”的一个元素的情况。

仅当您使用“p1”作为文本框的 ID 时，以下内容才有效。

```
document.getElementById('p1').value = generator 
```

此外，对于文本框，使用`.value`代替`.innerHTML`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T08:01:52.013

代码存在多个问题（以及预期的功能，看起来像家庭作业）。要将文本放在输入字段中，最好`id`在元素中使用属性，`id="p1"`在这种情况下，并分配给`document.getElementById('p1').value`. 不要使用表单提交，因为您没有向服务器端表单处理程序提交数据。相反，在其中使用`<input type="button">`和`onclick`事件处理程序。`parseInt()`在对它们进行任何比较之前，至少通过测试 的结果来检查输入值是否为数字。删除对 的赋值`document.test.result.value`，因为它是一个错误的引用，并中止其余代码的执行。并使用标记验证器检查您的 HTML 标记。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T08:16:00.773

结果是什么

document.test.result.value=生成器；

尝试字段 p1 的名称。

document.test.p1.value=生成器；

# fullcalendar - 如何停止在全日历中的 eventDragDrop 中发生的单击事件

> ID：12814238
> 
> 赞同：3
> 
> 时间：2012-10-10T07:34:13.980
> 
> 标签：fullcalendar

基本上该事件有一个 url：不幸的是，这个 url 在每次拖放或调整大小事件后触发。如何在这些函数中捕获它并停止检索 url？我只希望 url 用于实际的“点击”而不是拖放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:32:29.030

`eventClick`当您不希望点击继续时，使用回调并返回 false 并停止传播。

# javascript - 使用 id 对 JSON 对象进行排序

> ID：12814251
> 
> 赞同：0
> 
> 时间：2012-10-10T07:34:47.323
> 
> 标签：javascript, json

早上好，我在弄清楚如何对以下 JSON 进行排序时遇到问题

```
{
    "135": {"name": "marco", "title": "foo"},
    "223": {"name": "wilco", "title": "bar"},
    "322": {"name": "enola", "title": "baz"}
} 
```

我希望按名称排序（有时，可能的标题。但是应该对整行进行排序。我应该先将其转换为正确的数组吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T07:36:44.923

> 我应该先将其转换为正确的数组吗？

是的，因为对象不保证顺序。此外，您必须稍微修改结构：

```
[
    {"id":"135", "name": "marco", "title": "foo"},
    {"id":"223", "name": "wilco", "title": "bar"},
    {"id":"322", "name": "enola", "title": "baz"}
] 
```

至于排序算法，网上有很多，尤其是[这个](https://stackoverflow.com/q/979256/575527)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:43:33.373

您可能想查看[下划线](http://underscorejs.org/)，这会使您更轻松地处理对象/数组。是的，你需要把它做成一个数组，这样你甚至可以有一个可靠的顺序/排序它。

```
var array=[];
for (var i in obj){
    if (obj.hasOwnProperty(i)){
        obj[i].id=i;
        array.push(obj[i]);
    }
}
var fieldToSort="id"; //or "title" or "name"
array.sort(function(a,b){
    return a[fieldToSort] - b[fieldToSort];
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T08:01:01.887

您永远无法对对象进行排序。您需要将其转换为数组。

如果您无法将对象更改为数组，则对于此特定问题。

你可以按照这个，

```
var obj = { 
    "223": {"name": "wilco", "title": "bar"},
    "322": {"name": "enola", "title": "baz"},
    "135": {"name": "marco", "title": "foo"}
};

var arr = [];
for(var i in obj) {
    var o = {};
    if(obj.hasOwnProperty(i)) {
       o.id = i;
       o.name = obj[i].name;
       o.title = obj[i].title;
       arr.push(o); 
    }        
} 
arr.sort(function (a,b) {
   a.id - b.id;
});
console.log(arr); 
```

​<a href="http://jsfiddle.net/jashwant/54GjU/" rel="nofollow">演示

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T08:01:50.633

您可以尝试在不创建数组的情况下对对象道具进行排序，但这会花费您编写更多代码行，并且您必须注意您的属性，因此它们不会从其他对象继承。所以你必须在循环中使用：

```
for (var prop in obj) {
  if(obj.hasOwnProperty(prop)) {
    //perform sorting...
  }
} 
```

或者您可以将对象转换为数组并通过标准 js 数组排序功能对数据进行排序：

```
function sortObj(obj) {
  var objToArr = [],
  prop,
  sortedObj = {};
  for (prop in obj) {
    if (obj.hasOwnProperty(prop)) {
        objToArr.push([prop, obj[prop]]);
    }
   }

 objToArr.sort(function(a, b) { return a[0] - b[0]; });
 objToArr.forEach(function (val, key) {
   sortedObj[val[0]] = sortedObj[val[1]];
 });
 return sortedObj;
} 
```

您可以将此功能用于更复杂的对象，例如当对象的一个​​属性包含另一个对象时等。

# asp.net - 如何从实体框架中的上下文中分离实体？

> ID：12814254
> 
> 赞同：2
> 
> 时间：2012-10-10T07:34:53.757
> 
> 标签：asp.net, entity-framework, entity-framework-4, repository-pattern

我将 EF 4.1 与 Repository 和 DbContext.. POCO 与 T4 模板一起使用。对于每个存储库，我使用单独的 DbContext。

我需要更新具有相关属性的对象，此时我收到此错误

```
An entity object cannot be referenced by multiple instances of IEntityChangeTracker. 
```

我想我的问题是因为`eventObj`并且`candidate`是从不同的存储库创建的。

所以我试图用这段代码解决问题，但没有成功。

我的问题？

*   我该如何摆脱这个错误？
*   是否可以将候选人从其上下文中删除？

    ```
    public void UpdateAddingCandidate(Event eventObj, Candidate candidate){
        Event updatedEvent = new Event();
        Candidate updatedCandidate = new Candidate();
        updatedEvent = eventObj;
        updatedCandidate = candidate;
        updatedEvent.Candidate = updatedCandidate;
        db.Entry(updatedEvent).State = EntityState.Modified;     
    } 
    ```

编辑

```
 public void UpdateAddingCandidate(Event eventObj, Candidate candidate)
    {
        /*
        db.Events.AsNoTracking();
        db.Candidates.AsNoTracking();
        */
        db.Entry(eventObj).State = EntityState.Detached;
        db.Entry(candidate).State = EntityState.Detached;

        Event updatedEvent = new Event();
        Candidate updatedCandidate = new Candidate();
        updatedEvent = eventObj;
        updatedCandidate = candidate;
        updatedEvent.Candidate = updatedCandidate;
        db.Entry(updatedEvent).State = EntityState.Detached;
        db.Entry(updatedEvent).State = EntityState.Modified;

    } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-10T13:24:43.680

不仅使用存储库模式，还使用工作单元模式。这样，您使用的每个实体都有 1 分。

**数据/合同/IRepository.cs**

```
namespace Data.Contracts
{
    public interface IRepository<T> where T : class
    {
        IQueryable<T> GetAll();
        T GetById(int id);
        void Add(T entity);
        void Update(T entity);
        void Delete(T entity);
        void Delete(int id);
} 
```

**数据/合同/IUnitOfWork.cs**

```
namespace Data.Contracts
{
    /// <summary>
    /// Interface for the "Unit of Work"
    /// </summary>
    public interface IUnitOfWork
    {
        // Save pending changes to the data store.
        void Commit();

        // Repositories
        IRepository<Event> Events { get; }
        IRepository<Candidate> Candidates { get; }
    }
} 
```

**数据/EFRepository.cs**

```
using System;
using System.Data;
using System.Data.Entity;
using System.Data.Entity.Infrastructure;
using System.Linq;
using Data.Contracts;

namespace Data
{
    /// <summary>
    /// The EF-dependent, generic repository for data access
    /// </summary>
    /// <typeparam name="T">Type of entity for this Repository.</typeparam>
    public class EFRepository<T> : IRepository<T> where T : class
    {
        public EFRepository(DbContext dbContext)
        {
            if (dbContext == null)
                throw new ArgumentNullException("dbContext");
            DbContext = dbContext;
            DbSet = DbContext.Set<T>();
        }

        protected DbContext DbContext { get; set; }

        protected DbSet<T> DbSet { get; set; }

        public virtual IQueryable<T> GetAll()
        {
            return DbSet;
        }

        public virtual T GetById(int id)
        {
            //return DbSet.FirstOrDefault(PredicateBuilder.GetByIdPredicate<T>(id));
            return DbSet.Find(id);
        }

        public virtual void Add(T entity)
        {
            DbEntityEntry dbEntityEntry = DbContext.Entry(entity);
            if (dbEntityEntry.State != EntityState.Detached)
            {
                dbEntityEntry.State = EntityState.Added;
            }
            else
            {
                DbSet.Add(entity);
            }
        }

        public virtual void Update(T entity)
        {
            DbEntityEntry dbEntityEntry = DbContext.Entry(entity);
            if (dbEntityEntry.State == EntityState.Detached)
            {
                DbSet.Attach(entity);
            }
            dbEntityEntry.State = EntityState.Modified;
        }

        public virtual void Delete(T entity)
        {
            DbEntityEntry dbEntityEntry = DbContext.Entry(entity);
            if (dbEntityEntry.State != EntityState.Deleted)
            {
                dbEntityEntry.State = EntityState.Deleted;
            }
            else
            {
                DbSet.Attach(entity);
                DbSet.Remove(entity);
            }
        }

        public virtual void Delete(int id)
        {
            var entity = GetById(id);
            if (entity == null) return; // not found; assume already deleted.
            Delete(entity);
        }
    }
} 
```

**数据/UnitOfWork.cs**

```
using System;
using Data.Contracts;
using Data.Helpers;
using Models;

namespace Data
{
    /// <summary>
    /// The "Unit of Work"
    ///     1) decouples the repos from the controllers
    ///     2) decouples the DbContext and EF from the controllers
    ///     3) manages the UoW
    /// </summary>
    /// <remarks>
    /// This class implements the "Unit of Work" pattern in which
    /// the "UoW" serves as a facade for querying and saving to the database.
    /// Querying is delegated to "repositories".
    /// Each repository serves as a container dedicated to a particular
    /// root entity type such as a <see cref="Url"/>.
    /// A repository typically exposes "Get" methods for querying and
    /// will offer add, update, and delete methods if those features are supported.
    /// The repositories rely on their parent UoW to provide the interface to the
    /// data layer (which is the EF DbContext in this example).
    /// </remarks>
    public class UnitOfWork : IUnitOfWork, IDisposable
    {
        public UnitOfWork(IRepositoryProvider repositoryProvider)
        {
            CreateDbContext();

            repositoryProvider.DbContext = DbContext;
            RepositoryProvider = repositoryProvider;       
        }

        // Repositories
        public IRepository<Event> Events { get { return GetStandardRepo<Event>(); } }
        public IRepository<Candidate> Candidates { get { return GetStandardRepo<Candidate>(); } }

        /// <summary>
        /// Save pending changes to the database
        /// </summary>
        public void Commit()
        {
            //System.Diagnostics.Debug.WriteLine("Committed");
            DbContext.SaveChanges();
        }

        protected void CreateDbContext()
        {
            DbContext = new UnicornsContext();
        }

        protected IRepositoryProvider RepositoryProvider { get; set; }

        private IRepository<T> GetStandardRepo<T>() where T : class
        {
            return RepositoryProvider.GetRepositoryForEntityType<T>();
        }
        private T GetRepo<T>() where T : class
        {
            return RepositoryProvider.GetRepository<T>();
        }

        private UnicornsContext DbContext { get; set; }

        #region IDisposable

        public void Dispose()
        {
            Dispose(true);
            GC.SuppressFinalize(this);
        }

        protected virtual void Dispose(bool disposing)
        {
            if (disposing)
            {
                if (DbContext != null)
                {
                    DbContext.Dispose();
                }
            }
        }

        #endregion
    }
} 
```

**数据/Helpers/IRepositoryProvider.cs**

```
using System;
using System.Data.Entity;
using Data.Contracts;

namespace Data.Helpers
{
    /// <summary>
    /// Interface for a class that can provide repositories by type.
    /// The class may create the repositories dynamically if it is unable
    /// to find one in its cache of repositories.
    /// </summary>
    /// <remarks>
    /// Repositories created by this provider tend to require a <see cref="DbContext"/>
    /// to retrieve data.
    /// </remarks>
    public interface IRepositoryProvider
    {
        /// <summary>
        /// Get and set the <see cref="DbContext"/> with which to initialize a repository
        /// if one must be created.
        /// </summary>
        DbContext DbContext { get; set; }

        /// <summary>
        /// Get an <see cref="IRepository{T}"/> for entity type, T.
        /// </summary>
        /// <typeparam name="T">
        /// Root entity type of the <see cref="IRepository{T}"/>.
        /// </typeparam>
        IRepository<T> GetRepositoryForEntityType<T>() where T : class;

        /// <summary>
        /// Get a repository of type T.
        /// </summary>
        /// <typeparam name="T">
        /// Type of the repository, typically a custom repository interface.
        /// </typeparam>
        /// <param name="factory">
        /// An optional repository creation function that takes a <see cref="DbContext"/>
        /// and returns a repository of T. Used if the repository must be created.
        /// </param>
        /// <remarks>
        /// Looks for the requested repository in its cache, returning if found.
        /// If not found, tries to make one with the factory, fallingback to 
        /// a default factory if the factory parameter is null.
        /// </remarks>
        T GetRepository<T>(Func<DbContext, object> factory = null) where T : class;

        /// <summary>
        /// Set the repository to return from this provider.
        /// </summary>
        /// <remarks>
        /// Set a repository if you don't want this provider to create one.
        /// Useful in testing and when developing without a backend
        /// implementation of the object returned by a repository of type T.
        /// </remarks>
        void SetRepository<T>(T repository);
    }
} 
```

**数据/Helpers/RepositoryProvider.cs**

```
using System;
using System.Collections.Generic;
using System.Data.Entity;
using Data.Contracts;

namespace Data.Helpers
{
    /// <summary>
    /// Provides an <see cref="IRepository{T}"/> for a client request.
    /// </summary>
    /// <remarks>
    /// Caches repositories of a given type so that repositories are only created once per provider.
    /// There should be a a new provider per client request.
    /// </remarks>
    public class RepositoryProvider : IRepositoryProvider
    {
        public RepositoryProvider(RepositoryFactories repositoryFactories)
        {
            _repositoryFactories = repositoryFactories;
            Repositories = new Dictionary<Type, object>();
        }

        /// <summary>
        /// Get and set the <see cref="DbContext"/> with which to initialize a repository
        /// if one must be created.
        /// </summary>
        public DbContext DbContext { get; set; }

        /// <summary>
        /// Get or create-and-cache the default <see cref="IRepository{T}"/> for an entity of type T.
        /// </summary>
        /// <typeparam name="T">
        /// Root entity type of the <see cref="IRepository{T}"/>.
        /// </typeparam>
        /// <remarks>
        /// If can't find repository in cache, use a factory to create one.
        /// </remarks>
        public IRepository<T> GetRepositoryForEntityType<T>() where T : class
        {
            return GetRepository<IRepository<T>>(
                _repositoryFactories.GetRepositoryFactoryForEntityType<T>());
        }

        /// <summary>
        /// Get or create-and-cache a repository of type T.
        /// </summary>
        /// <typeparam name="T">
        /// Type of the repository, typically a custom repository interface.
        /// </typeparam>
        /// <param name="factory">
        /// An optional repository creation function that takes a DbContext argument
        /// and returns a repository of T. Used if the repository must be created and
        /// caller wants to specify the specific factory to use rather than one
        /// of the injected <see cref="RepositoryFactories"/>.
        /// </param>
        /// <remarks>
        /// Looks for the requested repository in its cache, returning if found.
        /// If not found, tries to make one using <see cref="MakeRepository{T}"/>.
        /// </remarks>
        public virtual T GetRepository<T>(Func<DbContext, object> factory = null) where T : class
        {
            // Look for T dictionary cache under typeof(T).
            object repoObj;
            Repositories.TryGetValue(typeof(T), out repoObj);
            if (repoObj != null)
            {
                return (T)repoObj;
            }

            // Not found or null; make one, add to dictionary cache, and return it.
            return MakeRepository<T>(factory, DbContext);
        }

        /// <summary>
        /// Get the dictionary of repository objects, keyed by repository type.
        /// </summary>
        /// <remarks>
        /// Caller must know how to cast the repository object to a useful type.
        /// <p>This is an extension point. You can register fully made repositories here
        /// and they will be used instead of the ones this provider would otherwise create.</p>
        /// </remarks>
        protected Dictionary<Type, object> Repositories { get; private set; }

        /// <summary>Make a repository of type T.</summary>
        /// <typeparam name="T">Type of repository to make.</typeparam>
        /// <param name="dbContext">
        /// The <see cref="DbContext"/> with which to initialize the repository.
        /// </param>        
        /// <param name="factory">
        /// Factory with <see cref="DbContext"/> argument. Used to make the repository.
        /// If null, gets factory from <see cref="_repositoryFactories"/>.
        /// </param>
        /// <returns></returns>
        protected virtual T MakeRepository<T>(Func<DbContext, object> factory, DbContext dbContext)
        {
            var f = factory ?? _repositoryFactories.GetRepositoryFactory<T>();
            if (f == null)
            {
                throw new NotImplementedException("No factory for repository type, " + typeof(T).FullName);
            }
            var repo = (T)f(dbContext);
            Repositories[typeof(T)] = repo;
            return repo;
        }

        /// <summary>
        /// Set the repository for type T that this provider should return.
        /// </summary>
        /// <remarks>
        /// Plug in a custom repository if you don't want this provider to create one.
        /// Useful in testing and when developing without a backend
        /// implementation of the object returned by a repository of type T.
        /// </remarks>
        public void SetRepository<T>(T repository)
        {
            Repositories[typeof(T)] = repository;
        }

        /// <summary>
        /// The <see cref="RepositoryFactories"/> with which to create a new repository.
        /// </summary>
        /// <remarks>
        /// Should be initialized by constructor injection
        /// </remarks>
        private RepositoryFactories _repositoryFactories;
    }
} 
```

**数据/Helpers/RepositoryFactories.cs**

```
using System;
using System.Collections.Generic;
using System.Data.Entity;
using Data.Contracts;

namespace Data.Helpers
{
    /// <summary>
    /// A maker of Repositories.
    /// </summary>
    /// <remarks>
    /// An instance of this class contains repository factory functions for different types.
    /// Each factory function takes an EF <see cref="DbContext"/> and returns
    /// a repository bound to that DbContext.
    /// <para>
    /// Designed to be a "Singleton", configured at web application start with
    /// all of the factory functions needed to create any type of repository.
    /// Should be thread-safe to use because it is configured at app start,
    /// before any request for a factory, and should be immutable thereafter.
    /// </para>
    /// </remarks>
    public class RepositoryFactories
    {
        /// <summary>
        /// Return the runtime repository factory functions,
        /// each one is a factory for a repository of a particular type.
        /// </summary>
        /// <remarks>
        /// MODIFY THIS METHOD TO ADD CUSTOM FACTORY FUNCTIONS
        /// </remarks>
        private IDictionary<Type, Func<DbContext, object>> GetFactories()
        {
            return new Dictionary<Type, Func<DbContext, object>>
                {
                   //If you have an custom implementation of an IRepository<T>
                   //{typeof(IArticleRepository), dbContext => new ArticleRepository(dbContext)}
                };
        }

        /// <summary>
        /// Constructor that initializes with runtime repository factories
        /// </summary>
        public RepositoryFactories()
        {
            _repositoryFactories = GetFactories();
        }

        /// <summary>
        /// Constructor that initializes with an arbitrary collection of factories
        /// </summary>
        /// <param name="factories">
        /// The repository factory functions for this instance. 
        /// </param>
        /// <remarks>
        /// This ctor is primarily useful for testing this class
        /// </remarks>
        public RepositoryFactories(IDictionary<Type, Func<DbContext, object>> factories)
        {
            _repositoryFactories = factories;
        }

        /// <summary>
        /// Get the repository factory function for the type.
        /// </summary>
        /// <typeparam name="T">Type serving as the repository factory lookup key.</typeparam>
        /// <returns>The repository function if found, else null.</returns>
        /// <remarks>
        /// The type parameter, T, is typically the repository type 
        /// but could be any type (e.g., an entity type)
        /// </remarks>
        public Func<DbContext, object> GetRepositoryFactory<T>()
        {

            Func<DbContext, object> factory;
            _repositoryFactories.TryGetValue(typeof(T), out factory);
            return factory;
        }

        /// <summary>
        /// Get the factory for <see cref="IRepository{T}"/> where T is an entity type.
        /// </summary>
        /// <typeparam name="T">The root type of the repository, typically an entity type.</typeparam>
        /// <returns>
        /// A factory that creates the <see cref="IRepository{T}"/>, given an EF <see cref="DbContext"/>.
        /// </returns>
        /// <remarks>
        /// Looks first for a custom factory in <see cref="_repositoryFactories"/>.
        /// If not, falls back to the <see cref="DefaultEntityRepositoryFactory{T}"/>.
        /// You can substitute an alternative factory for the default one by adding
        /// a repository factory for type "T" to <see cref="_repositoryFactories"/>.
        /// </remarks>
        public Func<DbContext, object> GetRepositoryFactoryForEntityType<T>() where T : class
        {
            return GetRepositoryFactory<T>() ?? DefaultEntityRepositoryFactory<T>();
        }

        /// <summary>
        /// Default factory for a <see cref="IRepository{T}"/> where T is an entity.
        /// </summary>
        /// <typeparam name="T">Type of the repository's root entity</typeparam>
        protected virtual Func<DbContext, object> DefaultEntityRepositoryFactory<T>() where T : class
        {
            return dbContext => new EFRepository<T>(dbContext);
        }

        /// <summary>
        /// Get the dictionary of repository factory functions.
        /// </summary>
        /// <remarks>
        /// A dictionary key is a System.Type, typically a repository type.
        /// A value is a repository factory function
        /// that takes a <see cref="DbContext"/> argument and returns
        /// a repository object. Caller must know how to cast it.
        /// </remarks>
        private readonly IDictionary<Type, Func<DbContext, object>> _repositoryFactories;
    }
} 
```

* * *

现在，如果你有这个来使用你的 UnitOfWork，你不能因为所有的依赖关系而简单地调用它，如果你在知道可以简单地解决这些依赖关系之前使用了 IoC 容器。在我的例子中，我使用了 Ninject，所以设置它的代码是：

```
var kernel = new StandardKernel(); // Ninject IoC

kernel.Bind<RepositoryFactories>().To<RepositoryFactories>().InSingletonScope();
kernel.Bind<IRepositoryProvider>().To<RepositoryProvider>();
kernel.Bind<IUnitOfWork>().To<UnitOfWork>(); 
```

然后对于您的页面，您可以添加一个基本页面类：

**Web.BasePage.cs**

```
namespace Web
{
    public abstract class BasePage : System.Web.UI.Page
    {
        // NOT NECESSARY TO DISPOSE THE UOW IN OUR CONTROLLERS
        // Recall that we let IoC inject the Uow into our controllers
        // We can depend upon on IoC to dispose the UoW for us
        protected IUnitOfWork Uow { get; set; }
    }
} 
```

或者在 MVC 的情况下，您可以添加一个基本控制器：

**Web/控制器/BaseController.cs**

```
using System.Web.Mvc;

namespace Site.Controllers
{
    public abstract class BaseController : Controller
    {
        // NOT NECESSARY TO DISPOSE THE UOW IN OUR CONTROLLERS
        // Recall that we let IoC inject the Uow into our controllers
        // We can depend upon on IoC to dispose the UoW for us
        protected IUnitOfWork Uow { get; set; }
    }
} 
```

然后在您的代码中，当您想要访问您的实体时，这非常容易。您可以简单地调用每个页面中可用的 UnitOfWork 并访问其中的不同存储库。因为它们都共享相同的 DbContext，所以您的问题不复存在。

* * *

我制作了一个非常简单的工作单元模式示例，支持 Ninject 以实现控制反转。

在我的示例中有一个*ASP.NET Webforms* **AND** *和 ASP.NET MVC4*示例

该示例是一个单页站点，每次加载站点时，它都会将一个事件添加到示例数据库，并将类别添加到数据库，两者都具有随机名称。（我需要一些数据库的东西，所以我只做了 2 个简单的 pocos）。之后，页面将显示两个列表中的所有内容。只需查看`Mvc4/Controllers/HomeController.cs`or `WebForms/Default.aspx.cs`。

[Skydrive 上的示例](https://skydrive.live.com/redir?resid=DEB5DDFF6A505390!325)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:39:33.870

当您尝试更新的实体附加到与您用于更新它的上下文不同的对象上下文时，确实会引发此错误。只有一个对象上下文可以跟踪一个实体

您可以通过调用将对象从其上下文中分离出来：

其中 context 是实体当前附加到的上下文。

```
using (var context = new UnicornsContext())
{
    var unicorn = new Unicorn { Name = "Franky", PrincessId = 1};
    context.Entry(unicorn).State = EntityState.Detached;
    context.SaveChanges();
} 
```

[http://blogs.msdn.com/b/adonet/archive/2011/01/29/using-dbcontext-in-ef-feature-ctp5-part-4-add-attach-and-entity-states.aspx](http://blogs.msdn.com/b/adonet/archive/2011/01/29/using-dbcontext-in-ef-feature-ctp5-part-4-add-attach-and-entity-states.aspx)

在您的实施中：

```
public void UpdateAddingCandidate(Event eventObj, Candidate candidate)
{
    db.Entry(candidate).State = EntityState.Detached;
    db.SaveChanges();

    eventObj.Candidate = candidate;
    db.Entry(eventObj).State = EntityState.Modified;
    db.SaveChanges();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T07:59:02.713

为什么要创建`Event`and的新实例`Candidate`？你可以改变这些你已经拥有它们的状态。如果您`ObjectContext`在您的存储库中共享相同的实例，您可以尝试使用`ObjectStateManager.GetObjectStateEntry(string key)` [ObjectStateManager](http://msdn.microsoft.com/en-us/library/bb155228.aspx)从上下文中解析这些实体。

# jms - JBoss 的 JMS 配置中的 InVmConnectionFactory 是什么？

> ID：12814256
> 
> 赞同：1
> 
> 时间：2012-10-10T07:35:00.890
> 
> 标签：jms, jboss7.x

我是 JBoss 和 JMS 的新手。`InVmConnectionFactory`以下代码块中的含义是什么？我的理解是 JMS 队列是在 Java 虚拟内存本身中创建的；它不需要 activeMQ 或其他一些软件来创建 JMS 队列。

```
 <jms-connection-factories>
        <connection-factory name="InVmConnectionFactory">
            <connectors>
                <connector-ref connector-name="in-vm"/>
            </connectors>
            <entries>
                <entry name="ConnectionFactory"/>
            </entries>
        </connection-factory>
    </jms-connection-factories> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T23:22:26.480

InVm 连接器仅用于 JVM 内部。这意味着此连接工厂在外部不可用（如果您要通过 JNDI 连接到远程 JVM，它就不会存在）。

# asp.net-mvc-3 - MVC3 WebGrid分页隐藏一定数量页面的下一个和上一个链接

> ID：12814260
> 
> 赞同：0
> 
> 时间：2012-10-10T07:35:11.250
> 
> 标签：asp.net-mvc-3, model-view-controller, webgrid

我正在开发 MVC3 网站并在其中使用 mvc3 webgrid 控件。

我遇到的问题是当页面大小为 5 或更少时隐藏分页的上一页和下一页的**>**和**<链接，否则它会正常显示。**

```
@{
var grid = new WebGrid(source: Model, defaultSort: "FirstName", rowsPerPage: 5,
canPage:true, canSort: true);
 }

@grid.GetHtml(tableStyle: "grid", headerStyle: "table-heading",
              footerStyle: "pager",
              alternatingRowStyle: "gird-second-row",
              selectedRowStyle: "gird-first-row",
              rowStyle: "gird-first-row", columns: new[] {
      grid.Column("Title", header: "FirstName")
}) 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:19:25.487

由于 WebGrid 帮助程序不允许您向这些链接添加特殊类，因此您可以使用 jQuery 来显示/隐藏它们。例如，您可以在视图中的网格声明之后放置以下脚本：

```
<script type="text/javascript">
    var pager = @Html.Raw(Json.Encode(new { index = grid.PageIndex, count = grid.PageCount }))
    if (pager.count < 6 && (pager.index >= 1 || pager.index <= pager.count)) {
        $('.pager td :first-child').filter(function() { return $(this).text() === '<'; }).hide();
        $('.pager td :last-child').filter(function() { return $(this).text() === '>'; }).hide();
    }
</script> 
```

# html - HTML - 如何在后台打开链接？

> ID：12814261
> 
> 赞同：0
> 
> 时间：2012-10-10T07:35:16.777
> 
> 标签：html, browser, tabs

我正在浏览一些网站，我可以用右键单击链接（例如在 Chrome 中），然后选择在新选项卡中打开 -> 选项卡已打开，但在后台（当前选项卡保持为主选项卡） .

我正在尝试处理链接 - 我将属性添加到链接中`target="_blank"`，但始终显示主选项卡时显示新选项卡 - 而不是我打开新选项卡的选项卡。

有没有办法，怎么做？

**编辑：**我正在尝试：

```
javascript.js
    $(document).ready(function(){
      $('a[target="_blank"]').removeAttr('target');
      ...
    })

<a href="http://www.google.com" id="id_attribute">link</a> 
```

但是页面总是在同一个窗口中打开......

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-10T07:49:34.163

您必须删除链接的目标属性：

```
 $('a[target="_blank"]').removeAttr('target'); 
```

然后它将停留在同一个窗口中，而不会更改为通过单击链接打开的新窗口。

# php - PHPUnit 通过 Composer 和 PhpStorm

> ID：12814263
> 
> 赞同：25
> 
> 时间：2012-10-10T07:35:31.010
> 
> 标签：php, phpunit, phpstorm, composer-php

我现在尝试了几个小时来设置 PhpStorm 进行单元测试。无论我做什么，我都会得到这个

```
Process finished with exit code 1
Cannot find PHPUnit in include path ... 
```

PHPUnit 可以（通过命令行）从任何地方访问；我已经设置了正确的包含路径并将 PHPUnit 添加到外部库中。没有机会。

有可能还是只能通过 PEAR 进行安装？我在这里解决了所有相关问题，我在 Mac 上，PHPUnit 通过 CLI 顺利运行。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-02-21T09:39:42.727

@aderuwe 的答案有效，但该配置不是每个项目的范围，它适用于所有项目。由于 PHPStorm 6（实际上甚至是 EAP 版本`PS-126.260`），您可以执行以下操作：

1.  转到`File`-> `Settings`-> `PHP`-> `PHPUNIT`。
2.  从您的项目供应商目录中选择`Use custom loader`并输入该`autoload.php`文件。这个自动加载器将自动加载 Composer 管理的所有依赖项（包括 PHPUnit）。
3.  指定默认配置文件（通常`phpunit.xml.dist`来自项目`app`目录）。

![<code>PHP</code> -> <code>PHPUNIT</code>](../Images/a9f517e6f17627d9cdc8cea2bf684613.png)

这需要在**每个项目中重复**，但以下需要完成*一次*。

您需要在 PHPStorm 中正确配置默认值。

1.  转到`Run`->`Edit Configurations...`或单击工具栏上的下拉菜单并选择`Edit Configurations...`.
2.  转到`Defaults`->`PHPUnit`
3.  在 下`Test Scope`，选择`Defined in configuration file`
4.  确保`Interpreter options`文本字段为空
5.  转到`PHPUnit`（上面`Defaults`）并删除它下面的任何条目（这样下次您对特定文件等进行测试时，它将设置一个新文件，但使用新的默认值）。

![<code>编辑配置...</code>](../Images/dfe4047d14f8c4d23bf6d682e4f81bc3.png)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-08T09:55:12.823

Patrick Visma 在[http://youtrack.jetbrains.com/issue/WI-13429](http://youtrack.jetbrains.com/issue/WI-13429)上发布了解决方案：

在 PHPStorm 中编辑 phpunit.xml 的配置，并设置 Interpreter 选项，如下所示：

```
-d auto_prepend_file=/path/to/vendor/autoload.php 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-10T08:55:43.133

我猜 PhpStorm 依赖于在 php.ini 本身的 include_path 中找到 PHPUnit，而不是在您的项目中。

您可以尝试将本地项目的 vendor/bin 目录添加到 php.ini 的 include_path，但最终这似乎 PhpStorm 可能会受益于支持 composer 安装并运行项目本身的 phpunit（如果可用）。他们的跟踪器实际上存在一个问题，因此我建议您登录并投票：http: [//youtrack.jetbrains.com/issue/WI-13429](http://youtrack.jetbrains.com/issue/WI-13429)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-09T19:45:57.857

我想添加当前版本的 PHPStorm (7.1) 仅适用于**以前版本的 PHPUnit** (3.7)。它无法与 4.0 及更高版本一起使用。如果您从[http://phpunit.de](http://phpunit.de)下载了 phpunit.phar ，您可以通过 Settings => PHP => PHPUnit => Path to phpunit.phar 将 PHPStorm 指向它

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T15:41:53.430

PHPStorm 有一个自定义的 PHPUnit 运行脚本 ( **`ide-phpunit.php`**)，它在内部使用它来处理不同版本的 PHPUnit 并进行 IDE 集成，并且仅依赖于包含路径和`PEAR`文件夹布局。

为此，它执行：

```
public static function checkIncludePath()
{
    //check include path
    $PHPUnitParentDirectory = self::getPHPUnitParentDirectory();
    if (is_null($PHPUnitParentDirectory)) {
        echo "Cannot find PHPUnit in include path (" . ini_get('include_path') . ")";
        exit(IDE_PHPUnit_Loader::FAILURE_EXIT);
    }
}

/**
 * @return null | string
 */
private static function getPHPUnitParentDirectory()
{
    $pathArray = explode(PATH_SEPARATOR, ini_get('include_path'));
    foreach ($pathArray as $path)
    {
        if (file_exists($path . DIRECTORY_SEPARATOR . 'PHPUnit/')) {
            return $path;
        }
    }
    return null;
} 
```

您可以通过 composer 安装它并将其添加为普通的可执行文件（ant/phing/native 任​​务），但您将失去 PHPStorm 提供的所有闪亮功能，如进度条、跳转到失败的测试和代码覆盖支持。

因此，从代码中您可以看出您需要将名为 named 的文件夹添加**`PHPUnit`**到包含路径中的某个位置。添加供应商可能会有所帮助，但请记住，这样做时**需要匹配大小写。**

在 PHPStorm 支持使用 composer 或 phar 中的 PHPUnit 之前，我认为使用 pear 中的 PHPUnit 不会获得更好的集成 ( [**`http://youtrack.jetbrains.com/issue/WI-13429`**](http://youtrack.jetbrains.com/issue/WI-13429))，但破解包含路径可能会奏效。

PHPStorm 人员对 3.7 的 runner 进行了一些更新，并且通常对 PHPUnit 的变化非常敏感:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-05T13:07:39.020

我发现如果我把所有的都放在“Test”目录下，并且在配置文件“Test/phpunit.xml”中定义了一个测试套件；我可以像这样简单地设置“运行配置”：

1.  **单击运行 |**打开运行/调试配置对话框。**编辑配置**。
2.  单击工具栏上的**+**并选择**PHPUnit**（用于本地执行的单元测试）。
3.  在顶部填写您喜欢的**名称。**
4.  将**测试范围**设置为测试所在的目录。
5.  点击**确定**
6.  然后运行新配置。

![phpstorm-运行-配置-对话框](../Images/7255aa22a6abe71f42a5acd435ce5b84.png)

Phpstorm 运行|配置对话框

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-05T21:33:22.847

可能对其他人有帮助.. PHPStorm 通过 Composer 成功找到了我的本地 PHPUnit，但提示“在 'vendor/autoload.php' 处找不到自动加载器脚本”并且无法运行我的测试。

通过使用绝对路径解决了这个问题，例如`/Users/Me/my-project/vendor/autoload.php`

[![找不到自动加载器](../Images/fe6fdb5dad606bbd2aa271bd12861bec.png)](https://i.stack.imgur.com/majvZ.png)

# sonarqube - 声纳分析抛出鱿鱼错误

> ID：12814264
> 
> 赞同：3
> 
> 时间：2012-10-10T07:35:31.447
> 
> 标签：sonarqube

嗨，我正在尝试使用声纳工具分析我在 java 中的代码库，我们使用 ANT 作为构建工具，但是当我从源目录运行 sonar-runner 时，我得到了

```
12:36:09.815 ERROR heckstyleSquidBridge - Squid Error occurs when analysing :/root/.jenkins/jobs/Example_4.9/workspace/dev/statsvc/src/java/com/sample/sim/statisticsvc/StatisticsServiceImpl.java
org.sonar.squid.api.AnalysisException: The source directory does not correspond to the package declaration com.sample.sim.statisticsvc 
```

在这种情况下我该怎么办？如果需要，我是否需要在灯光模式下运行声纳，我该如何实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T08:07:38.433

问题在于您没有为源目录指定正确的位置。

这个源目录应该以某种方式指向“/root/.jenkins/jobs/Example_4.9/workspace/dev/statsvc/”。使用 Sonar Jenkins 插件，这意味着您应该将“sonar.sources”指定为“dev/statsvc”之类的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T17:53:50.277

我在过去可以工作的 Maven 构建中遇到了同样的错误。我猜原因是我们重命名了工件，这在某种程度上让声纳发疯，但我真的不知道。源码目录是maven插件自动设置的，编译没问题。这个错误没有意义......由于这些错误，我们正在停止使用 Sonar，我找不到解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-12T18:20:45.617

碰巧我使用的是不同版本的 maven 声纳插件，而我的声纳 qube 版本不同。尝试使用相同的版本，它对我有用。(3.2)

# mysql - 在源代码管理中存储 MySQL 数据库

> ID：12814265
> 
> 赞同：4
> 
> 时间：2012-10-10T07:35:36.723
> 
> 标签：mysql, tfs, controls, integration

我们公司主要使用 MSSQL 在 .NET 中开发，虽然也有一些产品是基于 PHP 和 MySQL 构建的。我们在 Visual Studio 中开发并将我们所有的数据存储在 TFS 源代码控制下。现在默认情况下，有一个用于 MSSQL 的数据库项目，但没有用于 MySQL 的数据库项目。现在我认为我们不是第一个尝试在 TFS SC 下存储 MySQL 数据库的人。因此，我搜索了一些解决方案或最佳实践，但没有找到太多有用的信息。

现在我们可以说我们为 MySQL 项目制作了一个自定义模板。具有目录预定义结构和每个元素 TABLE、KEYS、PROC 等的松散文件。在部署时，让它创建一个大脚本并通过命令行将其部署在 MySQL 数据库上。

上述解决方案对我来说并不理想，这就是我寻找其他解决方案的原因。也许有一些程序或已知的解决方案比我想象的要好。如果你们中的一些人可以通知我或与我分享您的知识或想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:47:08.933

安装[mysql .net 连接器](http://dev.mysql.com/downloads/connector/net/)并添加数据库。

添加数据库：**添加新项目**->**添加本地数据库**->**选择数据库**->**新建连接**-> 选择 datasource=Mysql 数据库并输入用户名和密码..

其他一切都像 SQL Server。

# c++ - 在 C 中，当管道输入到另一个程序时，它无法打开

> ID：12814268
> 
> 赞同：1
> 
> 时间：2012-10-10T07:35:48.077
> 
> 标签：c++, c, fork, pipe, fopen

我基本上想在 C 中实现这一点：`echo 'some string' | foo`其中 foo 写入文件 file1.txt。运行 foo 使其阻塞并等待来自标准输入的输入，然后写入 file1.txt。我通过标准输入成功地向 foo 发送数据，但是 foo 在使用 C 管道时无法打开本地文件。

这是我所做的：

```
#include <stdlib.h>
#include <stdio.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/wait.h>

int main() {

    FILE *stream;
    int fds[2];
    int status;
    pid_t pid;
    char *cmd[] = { "foo", NULL };

    pipe(fds);
    pid = fork();

    if (pid < 0) {
        fprintf(stderr, "Fork failed\n");
        return 1;
    }
    if (pid > 0) {
        // Parent process
        close(fds[0]);
        stream = fdopen(fds[1], "w");
        fprintf(stream, "some string\n");
        fflush(stream);
        close(fds[1]);
        waitpid(pid, &status, 0);
        if (WIFEXITED(status) == 0 || WEXITSTATUS(status) < 0)
            return 1;
    }
    else {
        // Child process
        close(fds[1]);
        dup2(fds[0], STDIN_FILENO);

        execv("foo", cmd);
        return 1;
    }

    return 0;
} 
```

内部 foo`fopen`调用本地文件并失败，错误号为 14：EFAULT。我也尝试过仅使用 popen/pclose 而不是 fork/pipe/dup2/execv 来执行此操作。

我能做些什么来完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:57:12.650

Yuu 可能需要使用`execvp`假设`foo`是在`PATH`目录中。除此之外，您可能需要在`execv("/full/path/to/foo", cmd);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:21:36.820

代码中有竞争条件。父进程将内容写入管道并关闭它，而子进程从管道中读取。这可能不是您遇到问题的原因，但这绝不是一件好事。

尝试消除比赛：

```
 stream = fdopen(fds[1], "w");
    fprintf(stream, "some string\n");
    fflush(stream);
    waitpid(pid, &status, 0);
    close(fds[1]); // close it when the child process doesn't use it anymore 
```

注意：你应该使用`fclose`而不是`close`，不管任何事情。

编辑：正如其他人指出的那样，这个答案是错误的；没有竞争条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T21:13:50.087

我浏览了 foo 的代码并提取了负责从标准输入读取和写入文件的部分。您可以在此处查看文件：[https ://gist.github.com/3868421](https://gist.github.com/3868421)

我已经确认可以`echo 'some string' | foo`工作并且运行 pipedata 程序将数据管道传输到 foo 并写入文件。

由于这个例子一切正常，问题一定出在 foo 的源代码中的其他地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T22:07:28.513

stdlib 函数 popen/pclose 是一种更简单的方法来做这种事情。他们为您完成所有管道和子管理。你的程序就变成了：

```
#include <stdlib.h>
#include <stdio.h>

int main() {
    FILE *stream;
    if (!(stream = popen("./foo", "w"))) {
        fprintf(stderr, "popen failed\n");
        return 1;
    }
    fprintf(stream, "some string\n");
    fflush(stream);
    if (pclose(stream) < 0) {
        fprintf(stderr, "pclose failed\n");
        return 1;
    }
    return 0;
} 
```

# c# - 如何从 sharepoint 2010 客户端对象模型中获取更改？

> ID：12814271
> 
> 赞同：1
> 
> 时间：2012-10-10T07:35:56.200
> 
> 标签：c#, sharepoint-2010, sharepoint-clientobject, sharepoint-object-model

下面是代码：

```
 ClientContext context = new ClientContext("http://SPSite");
        context.Credentials = new NetworkCredential("user", "pwd", "domain");
        ChangeQuery cq = new ChangeQuery(true, true);                  
        ChangeCollection col = list.GetChanges(cq);            
        context.Load(col);
        context.ExecuteQuery();
        MessageBox.Show(col.Count.ToString()); 
```

无论所做的更改如何，它始终显示为 0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T09:02:33.230

```
ClientContext context = new ClientContext("http://SPSite");
context.Credentials = new NetworkCredential("user", "pwd", "domain");
ChangeQuery cq = new ChangeQuery(true, true); 
cq.ChangeTokenStart = new ChangeToken();
cq.ChangeTokenStart.StringValue = "1;3;" + list.Id.ToString() + ";" + DateTime.UtcNow.AddHours(-1).Ticks.ToString() + ";-1";                 
ChangeCollection col = list.GetChanges(cq);            
context.Load(col);
context.ExecuteQuery();
MessageBox.Show(col.Count.ToString()); 
```

尽管我不喜欢自己创建令牌，但这似乎是迄今为止我在谷歌上搜索的唯一方法。

# css - 如何为 div 和 table 设置 css

> ID：12814275
> 
> 赞同：0
> 
> 时间：2012-10-10T07:36:06.167
> 
> 标签：css

我创建了一个包含多列的表。

我希望第一列（带有行内容的描述）保持静态，并让其他列像 excel 中的“冻结”功能一样滚动，以便可以不断看到标题，但实际数据可以滚动。在这种情况下是水平的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:44:16.263

这需要使用 Javascript 来实现。

您可以使用以下演示中的代码冻结表格的第一列：

[http://ajaxian.com/archives/freeze-pane-functionality](http://ajaxian.com/archives/freeze-pane-functionality)

并在以下位置找到它在使用中：

[http://www.disconova.com/open_source/files/freezepanes.htm](http://www.disconova.com/open_source/files/freezepanes.htm)

# android - NDEF_DISCOVERED 不适用于三星 Galaxy S3

> ID：12814276
> 
> 赞同：3
> 
> 时间：2012-10-10T07:36:07.847
> 
> 标签：android, android-intent, nfc, galaxy, ndef

我有一个我觉得很奇怪的问题。我有一个应用程序，它应该在扫描包含 NdefMessage 的标签时启动。这一切在 Galaxy Nexus、Nexus S 和 HTC one X 上运行良好，但当我尝试在 Galaxy S3 上执行此操作时，应用程序没有出现。

我的意图过滤器如下所示：

```
<intent-filter>
    <action android:name="android.nfc.action.NDEF_DISCOVERED" />
    <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

每次扫描包含 NdefMessage 的标签时，这应该会在应用程序选择器中显示应用程序。现在要在 Galaxy S3 上解决这个问题，我需要添加 TAG_DISCOVERED。但这不是我想要的，因为现在它会弹出我扫描的每个标签。

有没有其他人看到过这种行为？

编辑：

它还包含 TECH_DISCOVERED 意图过滤器，它还检查 ndef 技术，因此这不能解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:50:14.547

我这里有一个 Galaxy S3，它接收到 NDEF_DISCOVERED ok。

尝试查看是否有另一个应用程序注册了相同的意图，并且该意图默认重定向到它。

# asp.net-mvc - 使用 httpclient 和 json 时 MVC WebAPI 状态 500 身份验证错误

> ID：12814282
> 
> 赞同：1
> 
> 时间：2012-10-10T07:36:18.683
> 
> 标签：asp.net-mvc, asp.net-web-api, cross-domain

我整天都在敲这个，是时候寻求帮助了。我正在尝试从一些 .net 代码调用 .net MVC WebAPI 应用程序。我从 WebAPI 收到状态代码 500，但没有任何真实信息，即使将错误详细信息策略设置为“始终”也是如此。所以我打开了 Fiddler，现在我至少可以看到更多。这是我从 .net 调用后通过 Fiddler 从 IIS 收到的内容：

> {"Message":"发生错误。","ExceptionMessage":"用户凭据无效。","ExceptionType":"System.Exception","StackTrace":" at RemoteManagementService.Controllers.ProvisioningController.PostLogOn(RequestModel `1 个请求）等...
> 
> （堆栈跟踪引用我的操作方法的右括号作为错误行）

.net HttpClient 调用代码：

```
this.DefaultRequestHeaders.Add("Origin", "http://localhost:1181");  
this.DefaultRequestHeaders.Referrer = new Uri("http://localhost:1181/Provisioner/Edit/1");

//this.PostAsync<RequestModel<string>>(address + "PostLogOn", request, new media JsonMediaTypeFormatter())
this.PostAsync<RequestModel<string>>(address + "PostLogOn", request, new XmlMediaTypeFormatter())
    .ContinueWith(
        (postTask) =>
        {
            postTask.Result.Content.ReadAsAsync<string>().ContinueWith(
                (readTask) =>
                {
                    myvalue = readTask.Result;
                }).Wait();
        }).Wait(); 
```

jquery调用代码：

```
jQuery.support.cors = true;

$.ajax({
    type: 'POST',
    url: 'http://me.mywebsite.com/provisioning/api/provisioning/PostLogOn',
    datatype: 'json',
    data: { datum: 'this is my data' },
    success: function (data) {
        alert(data);
    },
    error: function (data) {
        alert(data);
    }
}); 
```

真正让我感到沮丧的是，当我使用 jquery 进行相同的调用时，我似乎能够启动控制器操作（我仍然收到错误，但那是因为我无法从我的 html 以有效的方式格式化 RequestModel<> page 并在成功进入方法后收到解析异常）

来自 chrome 的 jquery 请求：

```
POST /provisioning/api/provisioning/PostLogOn HTTP/1.1
Host: me.mywebsite.com
Connection: keep-alive
Content-Length: 21
Origin: http://localhost:1181
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.92 Safari/537.4
Content-Type: application/x-www-form-urlencoded
Accept: */*
Referer: http://localhost:1181/Provisioner/Edit/1
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

.net HttpClient 请求：

```
POST /provisioning/api/provisioning/PostLogOn HTTP/1.1
Accept: application/json
Origin: http://localhost:1181
Referer: http://localhost:1181/Provisioner/Edit/1
Content-Type: application/xml; charset=utf-8
Host: me.mywebsite.com
Content-Length: 420
Expect: 100-continue
Connection: Keep-Alive 
```

为了更好地衡量，我收到的响应（jquery 和 .net 之间的唯一区别是大小）

```
HTTP/1.1 500 Internal Server Error
Cache-Control: no-cache
Pragma: no-cache
Content-Type: application/json; charset=utf-8
Expires: -1
Server: Microsoft-IIS/7.5
Access-Control-Allow-Origin: http://localhost:1181
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Wed, 10 Oct 2012 06:34:46 GMT
Content-Length: 823 
```

我的控制器或操作没有任何授权属性。我有一个会话密钥，但它没有集成到我的框架中，只是作为我的 RequestModel<> 一部分的数据。当我从 VS 以调试模式运行应用程序时，一切正常。这仅在我将 WebAPI 部署到我的网站后才会发生。在我将 cors Origin 处理程序添加到我的 API 配置启动中后，jQuery 调用开始工作，这让我认为这是一个跨域问题，但是 .net 代码具有相同的源头......我看到的最大区别是即使我指定了 json 数据类型，ajax 调用最终也会将事物格式化为 form-urlencoded。我已经尝试了.net 中的 json 和 xml 都无济于事。我也尝试过 UrlEncodedMediaTypeFormatter，但它显然不够聪明，无法序列化我的数据。有趣的是，如果我在测试操作上尝试从浏览器 URL 栏中进行简单的 GET，我也可以得到响应。我是否需要告诉 HttpClient 我要跨域类似于 jQuery.support.cors = true 以某种方式？

任何建议或见解将不胜感激，因为我已经达到了我的 Google 技能和个人知识的极限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:04:12.690

我设法解决了我的问题。tugberk 是正确的，因为它是我的代码中的一个问题。我最初的跨域假设是正确的，当我将 cors 消息处理程序添加到我的 api 配置时，问题得到了解决，这也是我最终能够得到错误消息的原因。

我获得无效凭据的原因是，当我在开发机器上运行时连接字符串查找（注册表）可用，但在部署到 IIS 服务器后不可用。成功部署到完全配置的 beta 环境。我的困惑源于最初的跨域问题和 14 小时的问题诊断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-18T07:39:51.863

或从您的方法或 api 控制器中删除授​​权属性，或将 allowAnonymous 属性添加到您的 api 方法

```
[AllowAnonymous]
[HttpPost]
public HttpResponseMessage PostLogOn(string datum)
{
   return Request.CreateResponse(HttpStatusCode.OK);
} 
```

# c# - 删除为其 ListBox 定义的 GroupStyle 的 WPF ListBoxItem 的左填充

> ID：12814283
> 
> 赞同：5
> 
> 时间：2012-10-10T07:36:21.447
> 
> 标签：c#, .net, wpf, listbox

我有一个带有多个标题的 WPF 列表框。我通过使用 GroupStyle 来定义每个标题的外观来实现这一点：

```
<ListBox DataContext="{StaticResource MyGroups}" ItemsSource="{Binding}">
    <ListBox.GroupStyle>
        <GroupStyle>
            <GroupStyle.HeaderTemplate>
                <DataTemplate>
                    <!-- my header stuff -->
                </DataTemplate>
            </GroupStyle.HeaderTemplate>
        </GroupStyle>
    </ListBox.GroupStyle>

    <!-- ListBox.ItemTemplate.. not shown -->
</ListBox> 
```

不知何故，这会导致各个 ListBoxItem 在其各自的标题下略微“缩进”（删除 GroupStyle 会删除缩进以及所有标题）。

我有点明白为什么他们希望它们默认缩进，但是无论如何要删除那个小的左填充？我试图为 ListBoxItem 定义一个样式来设置 Padding = 0，但结果是一样的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T03:18:52.450

我可以删除缩进的唯一方法是在*GroupStyle.ContainerStyle中为**GroupItem*引入我自己的控件模板。

 *该模板由两个网格行组成，一个用于标题，一个用于组项目。

```
<ListBox.GroupStyle>
    <GroupStyle>
        <GroupStyle.ContainerStyle>
            <Style TargetType="GroupItem">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="GroupItem">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" Text="{Binding MyHeaderText}"/>
                                <ItemsPresenter Grid.Row="1"/>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </GroupStyle.ContainerStyle>
    </GroupStyle>
</ListBox.GroupStyle> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-28T08:56:12.947

`ItemsPresenter`我在否定利润方面取得了一些成功：

```
<ListBox>
...
  <ListBox.Resources>
    <Style TargetType="{x:Type ListBoxItem}">
      <Setter Property="Margin" Value="-5,0,0,0"></Setter>
    </Style>
  </ListBox.Resources>
</ListBox> 
```

但它并不完全优雅。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T18:00:04.723

为列表框项目输入 -20 的左边距，然后在 (+)20 处。其中任何一个都会影响结果吗？

如果是这样，请根据需要调整到适当的大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-17T16:02:15.923

谢谢你的回答，kentoh！只想补充一点，如果您需要在组标题中显示自定义模板，那么您可能需要使用以下内容：

```
<ControlTemplate TargetType="GroupItem">
    <StackPanel>
        <ContentPresenter 
            Content="{TemplateBinding Content}" 
            ContentTemplate="{TemplateBinding ContentTemplate}"
        />
        <ItemsPresenter />
    </StackPanel>
</ControlTemplate> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-11-13T18:10:20.563

劳伦斯·帕克（Lawrence Parker）在 2008 年给出了一个有效的解决方案*

# javascript - 如何设置可变高度页面的背景颜色？

> ID：12814287
> 
> 赞同：0
> 
> 时间：2012-10-10T07:36:34.877
> 
> 标签：javascript, jquery, html, css

我有一个最小高度为 700 像素的网页，但可能更多。如何使用 CSS 确保正文始终具有背景色？

```
body {
  min-height: 700px;
  background: red;
} 
```

将不起作用，因为主体高度最多只能填充 700 像素，并且不“知道”浏览器窗口何时变大。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T07:37:50.853

添加`height:auto`

```
body {
  height:auto;
  min-height: 700px;
  background: red;
} 
```

但最好将此设置用于您的包装 div 而不是 body

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:54:19.797

将身体的高度和宽度设置为 100%。然后使用 div（或者，如果是 html5，则使用页眉、部分、页脚等）来构建您的页面结构。这是一个基本示例[http://jsfiddle.net/AaDg5/](http://jsfiddle.net/AaDg5/)

# asp.net - 内容窗格延伸到页脚下方

> ID：12814292
> 
> 赞同：0
> 
> 时间：2012-10-10T07:36:46.167
> 
> 标签：asp.net, css

看起来我的内容窗格大于我的页面高度。结果，它在页脚下方延伸。请帮忙。我将内容窗格放在一个 div 中。

实际上，是 div 内的表格从 div 外延伸到页脚下方

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:20:16.590

您可以尝试将页脚的 z-index 设为 0 并将其放置在底部`bottom:0`

# android - BT LE 的 Android API

> ID：12814293
> 
> 赞同：0
> 
> 时间：2012-10-10T07:36:47.550
> 
> 标签：android, bluetooth

有人知道BT LE 支持的官方API 何时发布？我搜索了很多但没有效果。如果有人知道支持BT LE API的android版本何时发布，请分享。会有很大帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T21:23:47.920

SDK 18 代码现在具有 Google API。

但是，我正在对其进行测试，它在我的 Nexus 4 上崩溃了。

文档在这里：http: [//developer.android.com/guide/topics/connectivity/bluetooth-le.html](http://developer.android.com/guide/topics/connectivity/bluetooth-le.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T06:44:37.817

您可以从 Broadcom 和 Samsung 下载 BT-LE SDK。 [http://code.google.com/p/broadcom-ble/](http://code.google.com/p/broadcom-ble/)

# android - 预 Holo 设备上的 Holo 颜色？

> ID：12814294
> 
> 赞同：1
> 
> 时间：2012-10-10T07:36:53.853
> 
> 标签：android

我正在为 Android 使用 Keyboardsurfer 的 Crouton 类。它使用 Holo 颜色作为背景颜色 (android.R.color.holo_red_light)。

现在这些颜色只显示在 Holo 主题设备上。在旧版本上，它显示为灰色。

我现在想知道是否有任何方法可以让旧设备也使用这些颜色以使用它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:44:37.093

将颜色值从复制`<android-sdk-path>/platforms/android-16/data/res/values/colors.xml`到您自己的`colors.xml`文件 - `<project-dir>/res/values/colors.xml`.

现在使用这些值作为背景颜色`(R.color.holo_red_light)`。

`<android-sdk-path>`你是android-sdk 目录路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T07:44:38.470

你可以在这里找到颜色：http: [//developer.android.com/design/style/color.html](http://developer.android.com/design/style/color.html)（鼠标悬停查看十六进制代码）。在 values.xml 文件中保存您需要的颜色。您可以使用您保存的颜色 (R.color.xxx) 的颜色 ID 定义自己的面包块样式。

# bdd - BDD 场景多依赖

> ID：12814295
> 
> 赞同：4
> 
> 时间：2012-10-10T07:36:55.263
> 
> 标签：bdd, specflow

我正在使用 SpecFlow 使用 .Net 来自动化 UI。我已经定义了相同的功能和场景。我的问题是场景在执行主要场景之前依赖于其他场景我必须确保首先创建在同一功能文件中定义为场景的所有依赖数据，因此我将所有这些数据放在后台。那么，当我要运行下一个功能时，它也依赖于我们已经使用功能 1st 创建的相同场景，是否已经创建？所以我们不需要再次执行相同的操作。

那么，有什么方法可以确保在运行任何场景之前，后台场景已经在 UI 级别上执行/创建/存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T19:53:39.307

听起来好像您希望在几个不同的功能文件中有一个共同的背景。至少有两种不同的方法可以做到这一点：

## 复合台阶

一种方法是 AlSki 提出的，创建一个调用许多其他步骤的复合步骤。我不会在这里重新定义这一点，因为他在回复中做得很好。您可以从您喜欢的任何功能的任何场景（或背景）中调用此复合步骤（调用多个步骤的步骤）。

## Hooks 上的标签过滤

另一种方法是使用SpecFlow 中定义的[Hooks](https://github.com/techtalk/SpecFlow/wiki/Hooks)`[BeforeScenario]` ，比如在每个场景之前运行一些代码。您可以使用标签过滤（请参阅挂钩链接）通过将相应标签添加到场景或功能来指定要运行的挂钩。让我用一个例子来演示：

假设我有使用 Selenium 执行的场景来驱动 Web 浏览器，但并非所有场景都使用 Selenium。如果我只想为需要它的场景设置 Selenium，我可以创建一个`BeforeScenario`只有在场景有标签时才执行的钩子`@web`。

这是我的功能文件`LoggingIn.feature`：

```
Feature: Logging In

@web
Scenario: Log In
    Given I am on the login page
    When I supply valid credentials
    Then I should be taken to the homepage 
```

这是我的步骤定义文件`StepDefinitions.cs`：

```
[Binding]
public class StepDefinitions
{
    [BeforeScenario("web")]
    public static void BeforeWebScenario()
    {
        // Code to startup selenium
    }

    [BeforeScenario]
    public static void BeforeAllScenarios()
    {
        // Code that executes before every scenario...regardless of tag.
    }
} 
```

对于任何具有`@web`标签的场景，两者都`BeforeAllScenarios()`将`BeforeWebScenario()`在场景执行之前执行。对于没有`@web`标签的场景，只有`BeforeAllScenarios()`方法会执行。

通过这种方式，您可以通过将特定属性应用于场景来运行一组代码。

*仅供参考：从 SpecFlow 1.9 开始，如果指定了多个钩子，则无法指定这些钩子的执行顺序。*

## 何时使用其中一种？

这取决于您是设置技术问题还是业务问题。

### 使用标签设置技术问题

如果您想设置业务用户不需要了解的测试的某些技术方面，我会使用标记方法。一个很好的例子是我提出的……设置 Selenium。业务用户可能不太关心 Selenium 是什么，因此在设置它的场景中创建一个步骤是没有意义的。

### 使用复合步骤设置业务关注点

如果您需要指定业务用户关心的系统状态（如登录用户或现有产品数据），那么这应该是场景（或后台）中的另一个步骤。这是因为这些步骤应包括从业务角度阅读和理解行为所需的一切。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T11:15:50.203

我认为您在这里询问的是域，因为您有一个称为背景的域，现在您想引入另一个更高级别的域，称为 UI。因此，由于我没有关于您的应用程序的足够信息，我将尝试用另一个示例进行说明。

假设我们有一家商店，我们可以编写跨多个领域的场景，例如库存控制、早上开门、找零和晚上关门。这可能意味着我们有很多绑定，例如`WhenWeFillTheShelves()`, `WhenWeUnlockTheDoor()`, `WhenWeHaveAChangeInTheTill()`。

现在我们来处理客户交互，所以我们可能想写

```
Given the shop is ready for business 
```

在这一点上，我会写

```
[Binding]
public void GivenTheShopIsReadyForBusiness()
{
    WhenWeFillTheShelves();
    WhenWeHaveChangeInTheTill();
    WhenWeUnlockTheDoor();
} 
```

通过这种方式，我们重用了较低级别、更细粒度的域来构建更高级别的域测试，并且您可以保证每次都处于正确的状态。

我还建议您阅读[丹·诺斯（Dan North）的无论如何它是谁的域名](http://dannorth.net/2011/01/31/whose-domain-is-it-anyway/)

# sed - 用 cat 加载 HTML 并通过 Makefile 用 sed 导入

> ID：12814299
> 
> 赞同：2
> 
> 时间：2012-10-10T07:37:06.720
> 
> 标签：sed, makefile, grep, cat

长期潜伏者，但第一次海报。我有一个 Makefile 问题，不确定在哪里发布问题，但我希望我选择了正确的类别。

我正在使用主干模板并将我的 html 拆分为多个文件。索引文件包括此文`{template}`本。我打算使用 tha Makefile 从多个 HTML 文件中加载文本，并用`{template}`这些文件中的内容替换变量。

**Makefile** 包括：

```
$(eval data := $(shell cat "file.html"))
sed -i '' 's/$({template})/$(data)/' index.html 
```

sed 代码很有效，如果我强制它包含文本，它会用数据值替换它，但是猫会中断并给我一个`Error 1`.

我都试过了：

```
$(eval data := $(shell grep -nr file.html))
$(eval data := $(shell cat "file.html")) 
```

当他们到达一个非普通角色时，他们都失败了。我还没有弄清楚如何将 html 数据加载到变量中。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-03T11:44:01.070

由于`/`角色可能出现在 your`template`和 your`data`中，这会破坏你的 sed 命令。

有两种处理方法：

1.  使用不同的正则表达式分隔符，您确定字符串中不存在该分隔符。
2.  逃离你的`/`性格。

使用以下命令可以轻松完成转义：

```
sed -e 's:/:\\/:g' 
```

# xslt - 将元素列表转换为 2 级嵌套结构

> ID：12814302
> 
> 赞同：1
> 
> 时间：2012-10-10T07:37:29.150
> 
> 标签：xslt, xslt-1.0

我的输入 XML 文档是一个简单的项目列表。项目的数量是任意的：

```
<items>
  <item name="item1"/>
  <item name="item2"/>
  <item name="item3"/>
  ...
  <item name="itemX"/>
</items> 
```

现在，我想将此列表拆分为 HTML 表格。行数和列数作为参数值给出：

```
<xsl:param name="rows"/>
<xsl:param name="cols"/> 
```

如果我们让 rows 为 3，cols 为 2，则生成的 HTML 应该如下所示：

```
<table>
  <tr>
    <td>item1</td>
    <td>item2</td>
  </tr>
  <tr>
    <td>item3</td>
    <td>item4</td>
  </tr>
  <tr>
    <td>item5</td>
    <td>item6</td>
  </tr>
</table>

<table>
  <tr>
    <td>item7</td>
    <td>item8</td>
  </tr>
  <tr>
    <td>item9</td>
    <td>item10</td>
  </tr>
  <tr>
    <td>item11</td>
    <td>item12</td>
  </tr>
</table>
... 
```

`<table>`因此创建的 s的数量是`ceil(number_of_items / rows / cols)`

我有一个基本的想法如何解决这个问题，但我似乎无法正确进行最后的调整。下面的样式表产生的东西接近我想要的，但第 4、7、10 和 13 项是重复的。有没有人对如何做到这一点有更好的想法？

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:param name="cols" select="2"/>
<xsl:param name="rows" select="3"/>

<xsl:template match="/*">
  <html>
    <head/>
    <body>
      <xsl:apply-templates select="*[position() mod ($cols * $rows) = 1]" mode="table"/>
     </body>
   </html>
</xsl:template>

<xsl:template match="*" mode="table">
    <table border="1" id="{@name}">
        <xsl:apply-templates select="." mode="row"/>
        <xsl:apply-templates select="following-sibling::*[position() &gt; 1 and position() mod $rows = 0]" mode="row"/>
     </table>
</xsl:template>

<xsl:template match="*" mode="row">
    <tr id="{@name}">
       <xsl:apply-templates select="." mode="cell"/>
       <xsl:apply-templates select="following-sibling::*[position() &lt; $cols]" mode="cell"/>
    </tr>
</xsl:template>

<xsl:template match="*" mode="cell">
    <td>
        <xsl:apply-templates select="."/>
    </td>
</xsl:template>

<xsl:template match="item">
    <xsl:value-of select="@name"/>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:17:07.703

您可以尝试像这样向 $cols 添加 +1：

```
<xsl:template match="*" mode="row">
<tr id="{@name}">
   <xsl:apply-templates select="." mode="cell"/>
   <xsl:apply-templates select="following-sibling::*[position() &lt; ($cols +1)]" mode="cell"/>
</tr>
</xsl:template> 
```

试试这个表格模板（你必须限制每个表格的项目数量）：

```
<xsl:template match="*" mode="table">
<xsl:variable name="mypos" select="position()"/>
<table border="1" id="{@name}" test="{$mypos}">
    <xsl:apply-templates select="." mode="row"/>
    <xsl:apply-templates select="following-sibling::*[position() &gt; 1 and position() mod  $rows = 0 and position() &lt; $mypos * ($cols * $rows)]" mode="row"/>
 </table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:47:57.470

**这是一个完整的转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pRows" select="3"/>
 <xsl:param name="pCols" select="2"/>

 <xsl:variable name="vItemsInTable" select="$pRows*$pCols"/>

 <xsl:template match="/*">
       <xsl:apply-templates mode="table"
            select="*[position() mod $vItemsInTable =1]"/>
 </xsl:template>

 <xsl:template match="item" mode="table">
  <table>
   <xsl:apply-templates  mode="row" select=
    "(.|following-sibling::*)
       [not(position() > $vItemsInTable) and position() mod $pCols = 1]">
   </xsl:apply-templates>
  </table>
 </xsl:template>

 <xsl:template match="item" mode="row">
  <tr>
   <xsl:apply-templates select=
     ".|following-sibling::*[not(position() > $pCols -1)]"/>
  </tr>
 </xsl:template>

 <xsl:template match="item">
  <td><xsl:apply-templates select="@name"/></td>
 </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于以下 XML 文档时**（提供的文档，扩展为更具挑战性）：

```
<items>
    <item name="item1"/>
    <item name="item2"/>
    <item name="item3"/>   ...
    <item name="item4"/>
    <item name="item5"/>
    <item name="item6"/>   ...
    <item name="item7"/>
    <item name="item8"/>
    <item name="item9"/>   ...
    <item name="item10"/>   ...
    <item name="item11"/>   ...
    <item name="item12"/>   ...
    <item name="itemX"/>
</items> 
```

**产生了想要的正确结果**：

```
<table>
   <tr>
      <td>item1</td>
      <td>item2</td>
   </tr>
   <tr>
      <td>item3</td>
      <td>item4</td>
   </tr>
   <tr>
      <td>item5</td>
      <td>item6</td>
   </tr>
</table>
<table>
   <tr>
      <td>item7</td>
      <td>item8</td>
   </tr>
   <tr>
      <td>item9</td>
      <td>item10</td>
   </tr>
   <tr>
      <td>item11</td>
      <td>item12</td>
   </tr>
</table>
<table>
   <tr>
      <td>itemX</td>
   </tr>
</table> 
```

# matlab - matlab - 反序列化一个数组

> ID：12814303
> 
> 赞同：4
> 
> 时间：2012-10-10T07:37:32.463
> 
> 标签：matlab, deserialization

我有一个从传感器收集数据并将其保存到文本文件的程序。文本文件中的数据如下所示：

```
[1,2,3,4]
[5,6,7,8]
[9L,10L,11L,12L]

```

如何在matlab中将数组反序列化为向量？

**注意**我有一些带有`float`值的数组，所以请参考阅读浮点数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T09:02:23.303

不幸的是，我没有找到任何更干净的解决方案 - 问题当然是每行开头和结尾的括号。这是一个解决方案，它逐行读取文件并`textscan`在去掉括号的字符串上运行。各个向量存储在 a 中`cell`：

```
fid = fopen('data.txt', 'r');
data = {};
while 1
    tline = fgetl(fid);
    if ~ischar(tline); break; end
    A = textscan(tline, '%f', 'Delimiter', ',', 'Whitespace', '[ ]L\b\t');
    data{end+1} = A{1};
end
fclose(fid); 
```

`L`在这里被视为分隔符。如果这些信息对你来说真的很重要，并且你想要执行类型转换为`uint64`，则必须修改上面的代码。

**编辑**按照 H.Muster 的评论，您可以一口气阅读整个文件，如下所示：

```
fid = fopen('data.txt', 'r');
A = textscan(fid, '%f', 'Delimiter', ',', 'Whitespace', '[ ]L\b\t');
fclose(fid); 
```

现在`A`包含一个包含所有数据的单列向量。因此，如果您知道每行中向量的大小，则可以将其拆分`A`为正确大小的块。如果不是，并且每个向量可以有不同的大小，您将不得不使用第一个解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T11:04:25.810

只是一个小补充——一旦你删除了“L”，你的数据就是有效的 matlab 代码。你可以把它读出来：

```
text_data = '[1,2,3,4]';
parsed_data = eval(text_data); 
```

# graph - Gremlin 移除所有顶点

> ID：12814305
> 
> 赞同：32
> 
> 时间：2012-10-10T07:37:36.927
> 
> 标签：graph, neo4j, gremlin

我知道如何通过 id 删除一个顶点，但我需要删除多个顶点（清理数据库）。

删除 1 v 是这样的：

```
ver = g.v(1)
g.removeVertex(ver) 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-06-22T12:30:23.280

从 Gremlin 2.3.0 开始，删除所有顶点最好通过以下方式完成：

```
g.V.remove() 
```

**更新：**对于 Gremlin 3.x 版本，您将使用[drop()](http://tinkerpop.apache.org/docs/current/reference/#drop-step)：

```
gremlin> graph = TinkerFactory.createModern()
==>tinkergraph[vertices:6 edges:6]
gremlin> g = graph.traversal()
==>graphtraversalsource[tinkergraph[vertices:6 edges:6], standard]
gremlin> g.V().drop().iterate()
gremlin> graph
==>tinkergraph[vertices:0 edges:0] 
```

请注意，`drop()`它不会`Traversal`像`remove()`那样自动迭代，因此您必须显式调用`iterate()`才能进行删除。[本教程](http://tinkerpop.apache.org/docs/current/tutorials/the-gremlin-console/#result-iteration)详细讨论了 Gremlin 控制台中的迭代。

此外，考虑到不同的图形系统可能会有自己的方法来更快、更有效地删除该系统中的所有数据。例如，JanusGraph 有这种方法：

```
 JanusGraphFactory.drop(graph) 
```

其中“graph”是`JanusGraph`您要清除的实例。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2016-02-15T16:36:30.460

如果您使用的是 Tinkerpop3 (Titan 1.0.0)，如前所述，命令是：

```
g.V().drop() 
```

## 为什么这对我不起作用

这仅在您使用 Gremlin 交互式 REPL 界面时才有效。为什么？`drop`返回一个必须遍历才能应用的迭代器，**并且**Gremlin REPL 接口会自动迭代返回的迭代器。

## 我是如何解决的

如果（像我一样）您正在使用 Gremlin 的 HTTP 或 WebSocket 接口，则必须显式迭代返回的迭代器：

```
g.V().drop().iterate() 
```

## 不要忘记...

...提交交易。在 Titan 中，事务是隐式打开的，但**必须显式关闭**：

```
g.tx().commit() 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-10-10T08:12:25.120

你可以试试

```
g.V.each{g.removeVertex(it)}
g.commit() 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-07-02T12:21:24.157

您可以按以下方式进行；

```
graph.shutdown();
TitanCleanup.clear(graph); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-10-14T04:22:20.283

蓝图曾经为此有一个 clear() 方法...

`g.clear()`

但它最近被删除：

[https://github.com/tinkerpop/blueprints/issues/248](https://github.com/tinkerpop/blueprints/issues/248)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-12-24T07:46:31.873

在 TinkerPop3 中：

> drop() 步骤（filter/sideEffect）用于从图中删除元素和属性（即删除）。

```
g.V().drop() 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-01-08T05:33:19.710

在 TinkerPop3 中，使用 Titan-1.0.0，

```
g.V().drop()
g.tx().commit()   (commit the changes) 
```

为我工作。你可以试一试

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-22T09:50:29.677

```
public class JanusGraphCleanup {
    @Deprecated
    public static void clear(JanusGraph graph) throws BackendException {
        JanusGraphFactory.drop(graph);
    }
} 
```

参考：[https ://github.com/JanusGraph/janusgraph/blob/master/janusgraph-core/src/main/java/org/janusgraph/core/util/JanusGraphCleanup.java](https://github.com/JanusGraph/janusgraph/blob/master/janusgraph-core/src/main/java/org/janusgraph/core/util/JanusGraphCleanup.java)

# ads - DFP 上的单个广告位 - 需要运行多个有针对性的广告系列

> ID：12814306
> 
> 赞同：1
> 
> 时间：2012-10-10T07:37:37.227
> 
> 标签：ads, google-dfp

```
 <script type='text/javascript'>
    googletag.cmd.push(function() {
    googletag.defineSlot('/11589435/serptest300x250', [300, 250], 'div-gpt-ad-1345189271658-0').addService(googletag.pubads()).setTargeting("TargetedKey","Targetedvalue");
    googletag.pubads().enableSingleRequest();
    googletag.enableServices();
    });
    </script> 
```

我的网站上有一个广告位，目前正在使用 Google 的 DFP 投放广告系列。
当前客户有一组关键字，因此我们可以向他展示他自己的广告素材。
最近，我们与另一位客户签约，该客户希望在同一个广告位中出现，但是，他们使用了一组完全不同的关键字

问题：如何调整上面的代码，以便查找输入的关键字并显示来自特定广告活动的广告？

'TargetedKey' = 我们已注册的客户名称
'Targetedvalue' = 他已注册的关键字。（基本上，他有大约 10 个关键字，当用户在我的网站上执行搜索时，我设法在“目标值”位中输入）

ps 我在过去 2 个月中开始使用 DFP，并自愿为我的组织管理广告活动。我也不是很擅长编程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T15:00:48.907

这更多地与 javascript 相关，而不是 DFP，但以下内容应该允许您测试不同的关键字组合......

加载此页面，在 URL 中使用逗号分隔的键和值，如下所示：http: [//yoursite.com/](http://yoursite.com/?key=test&values=test) ?key=test&values= test 1,test 2,test 3

```
<html>
<head>
    <title>DFP test</title>

    <script type='text/javascript'>
        var googletag = googletag || {};
        googletag.cmd = googletag.cmd || [];
        (function() {
            var gads = document.createElement('script');
            gads.async = true;
            gads.type = 'text/javascript';
            var useSSL = 'https:' == document.location.protocol;
            gads.src = (useSSL ? 'https:' : 'http:') +
            '//www.googletagservices.com/tag/js/gpt.js';
            var node = document.getElementsByTagName('script')[0];
            node.parentNode.insertBefore(gads, node);
        })();
    </script>

    <script type="text/javascript">

        function getParameterByName(name)
        {
            name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
            var regexS = "[\\?&]" + name + "=([^&#]*)";
            var regex = new RegExp(regexS);
            var results = regex.exec(window.location.search);
            if(results == null) {
                return "";
            } else {
                return decodeURIComponent(results[1].replace(/\+/g, " "));
            }
        }

        var key = getParameterByName('key');
        var values = getParameterByName('values').split(',');

        googletag.cmd.push(function() {
            slot = googletag.defineSlot('/11589435/serptest300x250', [300, 250], 'adunit').addService(googletag.pubads()).setTargeting(key,values);
            googletag.pubads().enableSingleRequest();
            googletag.enableServices();
        });
    </script>

</head>
<body>

    <div id="adunit">
        <script type='text/javascript'>
            googletag.cmd.push(function() {
                googletag.display('adunit');
            });
        </script>
    </div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-10T10:33:24.773

我希望你正在寻找基于一些目标关键字的广告。

您可以尝试以下方式，即在 settargeting() 方法中传递关键字

```
 googletag.pubads().setTargeting('tags', 'Male'); // where Male is the target keyword
googletag.pubads().enableSingleRequest();
googletag.pubads().collapseEmptyDivs();
googletag.enableServices(); 
```

# java - 选择和取消选择所有复选框

> ID：12814312
> 
> 赞同：1
> 
> 时间：2012-10-10T07:38:02.693
> 
> 标签：java, javascript, jquery

我无法实现这些东西，在这个页面中我想做 3 件事：

1>*默认情况下，Apple 和 Cat 将在此页面中选中。* 2>*对于 Startall，所有功能都将被选中并禁用。* 3>*对于 Stopall，所有功能将被禁用，默认*(AC) 值将被禁用。*

```
 <script type="text/javascript"> //This jquery is using for on selecting the checkbox,it will assign the text field of policyName and features
    $(document).ready(function() { 
        $('.check').click(function(){
            $("#policyName").val('Start'); 
            $("#features").val('');
                    $(".check").each(function(){
                if($(this).prop('checked')){
                    $("#policyName").val($("#policyName").val() + $(this).val());   
                    $("#features").val($("#features").val() + $(this).data('name'));
                    }           
            });
         });
    });
    </script> 
```

这是我的jsp页面：

```
<div align="center" id="checkboxes">
<input type="checkbox" name="startall" data-name="Startall" class="check" id="check" value="all"> All &nbsp;&nbsp;&nbsp;
<input type="checkbox" name="stopall" data-name="Stopall" class="check" id="check" value="stopall"> STOPall &nbsp;&nbsp;
<input type="checkbox" name="apple" data-name="Apple" class="check" id="check" value="a"> Apple &nbsp;&nbsp;&nbsp;
<input type="checkbox" name="ball" data-name="Ball" disabled="disabled" checked="checked"  id="check" value="b"> Ball 
    &nbsp;&nbsp;&nbsp;
<input type="checkbox" name="cat" data-name="Cat" class="check" id="check" value="a"> Cat &nbsp;&nbsp;&nbsp;
<input type="checkbox" name="dog" data-name="Dog" checked="checked" disabled="disabled"  id="check" value="d"> Dog 
    &nbsp;&nbsp;&nbsp;
<input type="checkbox" name="elephant" data-name="Elephant" disabled="disabled" checked="checked"  id="check" value="e"> 
    Elephant &nbsp;&nbsp;&nbsp;
</div> 
```

任何协助....将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:48:24.680

试试这个

**您的 HTML 中的ID**应该是**唯一的**.. 尝试使用不同的 id 或类 .. 我使用 name 属性编写代码，这是一个慢速选择器..

```
$(document).ready(function() {
$('[name="apple"], [name="cat"]').prop('checked', true);

$('[name="startall"]').on('click', function() {
    var $checkboxes = $('input[type="checkbox"]').not('[name="startall"], [name="stopall"]');
    if (this.checked) {
        $checkboxes.prop({
            checked: true,
            disabled: false
        });
        $('#textbox').val( $(this).attr('data-name'));
    }
    else{
         $checkboxes.prop({
            checked: false
        });
         $('#textbox').val('');
    }
});

$('[name="stopall"]').on('click', function() {
    var $checkboxes = $('input[type="checkbox"]').not('[name="startall"], [name="stopall"]');
    if (this.checked) {
        $checkboxes.prop({
            checked: false,
            disabled: true
        });
        $('#textbox').val( $(this).attr('data-name'));
    }
    else{
         $checkboxes.prop({
            disabled: false
        });
        $('#textbox').val('');
    }
}); 
```

});​</p>

**[更新的演示](http://jsfiddle.net/sushanth009/2mnem/3/)**

# c# - 当我按下关闭按钮时，表单正在关闭而不是执行功能

> ID：12814313
> 
> 赞同：0
> 
> 时间：2012-10-10T07:38:04.207
> 
> 标签：c#, winforms, c#-4.0

在我的项目中，我使用两种形式`dialogForm`和`mainForm`.

在`mainForm`我调用这样的实例`dialogForm`：

**mainForm_Closing 事件**

```
private void mainForm_FormClosing(object sender, FormClosingEventArgs e)
{
    dialogForm dg = new dialogForm();
    dg.Show();
} 
```

但是在上面的代码中，`mainForm`当我按下关闭按钮并显示`dialogForm`而不是显示`mainForm`.

我知道我在这里做错了什么。

PS：我非常编辑了我的问题。如果有人正在使用我的代码，那么[它就是](http://dl.dropbox.com/u/87374848/SuperMarketApp%201026.rar).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T07:51:20.167

您正在使用`dg.Show()`而不是`dg.ShowDialog()`. `ShowDialog()`将等待子对话框关闭，然后再继续执行父对话框中的指令。

从 dialogForm 返回一个值并检查它是是还是否，并根据该值关闭父框。

# javascript - 为什么正则表达式不匹配？

> ID：12814315
> 
> 赞同：0
> 
> 时间：2012-10-10T07:38:08.227
> 
> 标签：javascript, regex, node.js

我正在使用节点 v.0.8.8。

在以下示例中，为什么**url**没有与`/([\w-]+)`正则表达式匹配？这是一个错误还是我做错了什么？

```
var patterns = [
    '/([\w-]+)',
    '/.*'
],
    url = '/asdf';

for (var pattern in patterns) {
    var re, match;

    re = new RegExp('^' + patterns[pattern] + '$');

    if ((match = re.exec(url))) {
        console.log(url + ' matched: ' + patterns[pattern])

        // break the loop since we've already found the first match
        return false;
    }
    else{
        console.log(url + ' NOT matched: ' + patterns[pattern])
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T07:40:40.650

由于您从字符串文字创建正则表达式，因此您需要转义反斜杠：

```
'/([\\w-]+)' 
```

# java - 如何更新已经在 J ava 中输出的值？

> ID：12814321
> 
> 赞同：0
> 
> 时间：2012-10-10T07:38:15.137
> 
> 标签：java, refresh, line

> **可能重复：**
> [使用 Java，我如何创建一个控制台应用程序来操作 system.out 中的文本？](https://stackoverflow.com/questions/4729129/using-java-how-do-i-create-a-console-application-which-manipulates-text-in-syst)

我完全不知道如何问这个问题。我保证如果有人用谷歌搜索它就在某个地方（讽刺的是我不知道如何搜索它）。

我知道你可以用 Java 输出数据。一个例子是使用 System.out.println。如果您想打印更新值，请再次使用该语句，它会打印一个带有更改值的新行。我不想每次更改时都继续使用 print/println。那会产生大量的陈述。我正在寻找要刷新的那一行。所以说它每秒刷新一次以显示一个新值（如果有的话）。

x 的值为：5

现在，它会不断刷新，如果它被改变，数字也会改变（所以数字 6 将在屏幕 5 曾经坐着的完全相同的位置替换 5）。

希望我已经说得够清楚了。我在大学上过一门 Java 编程课程，但没有看到这一点（并不是说课程涵盖了所有可能的角度）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:44:50.080

开箱即用的 Java 无法真正做到这一点。Java 与控制台交互的方式几乎完全是通过流。您只能将内容附加到（不可回退的）流中，永远不要覆盖或从中删除。

在控制台的情况下有一些例外，主要在[`Console`](http://docs.oracle.com/javase/7/docs/api/java/io/Console.html)类中发现，它允许少量直接操作，但也不允许重写现有文本。

你可以做任何这些事情：

*   只需再次打印该行，将旧行留在上面
*   使用像[JCurses](http://sourceforge.net/projects/javacurses/)这样的库来直接控制输出窗口
*   尝试使用外部命令（`cls`或`clear`，取决于您的操作系统）清除控制台

*除了第一个选项之外，所有选项都需要中等程度的努力，并且会为您的代码增加相当大的复杂性，因此您应该只在绝对*需要该功能时才考虑它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:42:42.437

如果您输出到命令提示符，您将无法更新该值。

在图形环境中，您可以尝试设置一个计时器来检查旧值与更新值，如果它们不匹配，则更新标签。

或者运行一个线程来检查这些值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T07:44:48.817

如果我理解正确，您希望避免多次调用 println。

编写一个更新方法并在更新方法中放置一个 println 语句。因此，每次调用更新时，都会打印变量的新值。

# c# - DataList 内的 RadioButtonList

> ID：12814323
> 
> 赞同：1
> 
> 时间：2012-10-10T07:38:22.147
> 
> 标签：c#, asp.net

我在数据列表中有一个单选按钮列表控件

```
<asp:DataList ID="dlfilteritem" runat="server" RepeatDirection="Horizontal"
    RepeatColumns="3">
    <ItemTemplate>
        <asp:RadioButtonList ID="rblfilteritem" runat="server">
        </asp:RadioButtonList>
    </ItemTemplate>
</asp:DataList> 
```

如何在使用 findcontrol 的事件中捕获单选按钮的控制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:49:51.497

您始终可以使用该[`NamingContainer`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.namingcontainer.aspx)属性来获取您的`DataListItem`. 然后您可以使用`FindControl`来获取对您的`RadioButtonList`.

例如，假设在`DataList`回传的控件中有另一个控件，如`DropDownList`. 如果要在事件处理程序中查找`RadioButtonList`from ：`SelectedIndexChanged`

```
protected void DropDownList1_SelectedIndexChanged(Object sender, EventArgs e)
{
    DropDownList ddl = (DropDownList) sender;
    DataListItem dli = (DataListItem) ddl.NamingContainer;
    RadioButtonList rblfilteritem = (RadioButtonList)dli.FindControl("rblfilteritem");
} 
```

如果`DropDownList`相反，您可以通过[property](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.items.aspx)`DataList`枚举所有内容：`DataListItems`[`Items`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.items.aspx)

```
foreach(DataListItem dli in DataList1.Items)
{
     RadioButtonList rblfilteritem = (RadioButtonList)dli.FindControl("rblfilteritem");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:58:23.197

如果您在数据列表之外有下拉列表，那么您将拥有单选按钮列表的所有值的数组，因此请尝试以下代码

```
foreach(DataListItem data in dtdatalist1.Items)
{
RadioButtonList rbl = (RadioButtonList)data.FindControl("rbl");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T11:18:04.847

```
protected void dlfilteritem_ItemDataBound(object sender, DataListItemEventArgs e) {
        if ((e.Item.ItemType == ListItemType.Item) || (e.Item.ItemType == ListItemType.AlternatingItem))
        {            
            RadioButtonList RBL = ((RadioButtonList)e.Item.FindControl("PopularCity"));
            RBL.DataSource = dataTable; 
            RBL.DataBind();
        }
    } 
```

# java - 在 tomcat6 中查找特定应用程序的类加载器中的 jar

> ID：12814326
> 
> 赞同：2
> 
> 时间：2012-10-10T07:38:25.837
> 
> 标签：java, tomcat6, classloader

**设想**

我有一种情况，春天正在寻找一个类的两个版本。

`org.springframework.beans.factory.NoSuchBeanDefinitionException: No unique bean of type [org.springframework.scheduling.quartz.SchedulerFactoryBean] is defined: expected single matching bean but found 2:`

我的问题是找到重复类的来源。

通常，我只是使用[jdgui](http://java.decompiler.free.fr/?q=jdgui)打开/反编译 web-inf/lib 和 tomcat/lib 文件夹中的所有 jar，然后对重复的类进行类型搜索。

诀窍是我使用 sysdeo 插件和 eclipse、maven 和几个战争项目，所以事情比这要复杂一些。

**我的问题** 是否有任何 GUI 或开源库可用于查找适用于*Tomcat6*的特定类的 jar 的位置。

过去，我在 IBM Websphere 的管理控制台中使用了一个非常好的工具，它允许我浏览类加载器树。

没有同龄人的建议，我想我需要自己写点东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:12:17.773

感谢评论中的帮助，我能够提出以下解决方案。

带有我的 spring 配置的模块被编译到 war 的 lib 文件夹中（即 /target/xxxx-war/WEB-INF/lib/myspringmodule.jar）

Sysdeo tomcat 文件夹被配置为将 /myspringmodule/target/classes 添加到类路径中，从而允许我在 eclipse 中简单地重新编译。这实际上是在类路径上添加了两个重复的弹簧配置，从而触发了两次注释扫描，从而触发了两个对象。

我的解决方案是为 Eclipse 中的本地构建创建一个 Maven 配置文件，我用它来排除两个 jar。

# java - Java：使用套接字时无法通过 ad-hoc 连接到其他计算机

> ID：12814329
> 
> 赞同：0
> 
> 时间：2012-10-10T07:38:27.187
> 
> 标签：java, sockets, adhoc

我创建了一个简单的游戏，两台电脑连接在一起。我在同一台电脑上测试过，没问题。当我创建 ad-hoc 网络时（在 Windows 7 中）。一台计算机是一台服务器，它创建成功：

```
ssock = new ServerSocket(PORT);
sock = ssock.accept(); 
```

一台计算机是客户端：

```
sock = new Socket("localhost", PORT); 
```

当跑到这条线。我收到了这个错误：

> java.net.ConnectException：连接被拒绝：在java.net.PlainSocketImpl.connectToAddress（PlainSocketImpl.java： 213) 在 java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200) 在 java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366) 在 java.net.Socket.connect(Socket.java:529) 在 java. net.Socket.connect(Socket.java:478) at java.net.Socket.(Socket.java:375) at java.net.Socket.(Socket.java:189) at java.controller.MainController$GameObject.( MainController.java:78) 在 com.controller.MainController$3.run(MainController.java:180) 在 java.lang.Thread.run(Thread.java:662)

请帮我指出，这里有什么问题。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:56:27.503

在行

```
sock = new Socket("localhost", PORT); 
```

第一个参数“localhost”是您要连接的机器的主机名。“localhost”始终表示当前机器。当服务器在另一台机器上运行时，您必须告诉套接字在哪里找到它。

您需要将“localhost”替换为另一台机器的 IP 地址或主机名。如果您不知道这些，请在服务器计算机上执行以下步骤：

*   开始 -> 运行
*   回车`cmd`并按回车打开命令外壳
*   进入`ipconfig`命令外壳并按回车

您现在将看到有关机器上所有网络适配器的配置信息，包括它们的 IP 地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:59:12.180

除了用所需的 IP 地址替换“localhost”之外，您还可能需要检查是否在防火墙上打开了指向的端口。

# wpf - 在 Windows 窗体上设置 TransparencyKey 并使用 setparent 使其成为 Office 应用程序的子级隐藏窗体

> ID：12814330
> 
> 赞同：0
> 
> 时间：2012-10-10T07:38:27.777
> 
> 标签：wpf, winforms, excel, excel-2010

我想在 excel 应用程序中显示一个 WinForm。但是这个窗口应该是透明的。为此，我执行以下操作。

```
 private void InitializeComponent()
    {
        // other form/ control init code
        this.BackColor = System.Drawing.Color.White;
        this.TransparencyKey = System.Drawing.Color.White;
        // other form/ control init code
    } 
```

现在，我想将此表单作为 excel 应用程序的子项，为此我使用以下代码。

```
 protected override void OnLoad(EventArgs e)     
 {
   // PINVOKE CALL
   User32.SetParent(FORMHANDLE, EXCELAPPHANDLE);   
 } 
```

设置后表单消失，因为如果我取消注释上面的代码，我可以看到具有透明背景的表单。

# javascript - IF 语句始终为真

> ID：12814334
> 
> 赞同：-4
> 
> 时间：2012-10-10T07:38:38.197
> 
> 标签：javascript, parameter-passing, client-side, radwindow, hiddenfield

我有一个 radwindow，用于向应用程序中的用户显示错误消息。
我的目标如下；
如果消息不是警告/错误，我希望用户在弹出的 radwindow 上单击“确定”时被重定向。为此，我在操作成功时将 HiddenField 值设置为“1”，在操作失败时将值设置为“0”。我的问题是，当我在客户端检查 HiddenField 值时，IF 语句总是返回 true，并且页面被重定向。

以下是我设置 hiddenfield 值并设置 radwindow 消息的情况；

```
if(x)
{
   hfPasswordWarning.Value = "0";
   ShowMessage(MessageResource.ChangePasswordAuthenticateError,false);
}

else
{
   hfPasswordWarning.Value = "1";
   ShowMessage(MessageResource.ChangePasswordSuccess,true);
} 
```

而我遇到问题的客户端代码，IF 语句总是正确的；

```
var hv = $('#hfPasswordWarning').val();

    if (hv.val = "1") {
        window.location = "../Main/Login.aspx";
    } else {
        return false;
    } 
```

我添加了一个 Alert("xx") 来检查它是否进入 else 语句，但它没有。我试图尽可能简化对我的问题的解释。感谢您的理解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T07:39:54.200

您需要使用`==`or`===`来进行比较，而不是`=`.

*   `x = y`分配`y`给`x`
*   `x == y`检查`y`和`x`是否松散相等
*   `x === y`检查`y`和`x`是否相等且类型相同

所以你需要做的是替换`if (hv.val = "1")`为`if (hv.val == "1")`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T07:39:42.937

你写了

```
if (hv.val = "1") 
```

但这是一个赋值（在您的代码中评估为真）：检查相等性是`==`（值相等）或`===`（值和类型相等）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T07:45:17.000

你使用了 = 运算符，它用于分配比较 == 运算符用于尝试这个在你的 if 语句中试试这个

```
if(hv.val=="1") 
```

# svn - 为什么要使用 svn 开关？

> ID：12814338
> 
> 赞同：2
> 
> 时间：2012-10-10T07:38:59.353
> 
> 标签：svn

我有带有分支、标签和主干的 svn repo 现在当我创建新分支时，是否必须使用 svn 切换到该分支？我不应该直接在那个分支目录上工作吗？

对不起，如果这听起来很愚蠢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T07:45:14.617

好吧，SVN Switch 功能并不是那么无用。

有时您可能会在一个版本的多个分支中拥有庞大的代码库。

考虑一个场景：

您有一个名为**Release X**的分支，出于某种目的，您从中创建了另一个分支**Release X.1**。

如果开发人员现在想使用 X.1 Branch，他有两种选择：

1.  检查整个分支和完整的代码库（耗时？）
2.  SVN 打开**Release X**工作副本以指向**Release X.1**（考虑到没有巨大的变化） - 像魅力一样工作！
3.  完成工作后，无缝切换回上一个分支......

这是其中一种情况......当您重新定位存储库时会发生什么？整个 URL 发生变化。切换是智能的而不是结帐。

我相信我已经表达了我的观点：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T13:48:08.103

> 是否必须使用 svn switch 到该分支？

就 RFC 而言，不是“必须”，甚至不是“拥有”。您*可以*切换 WC，但“切换或不切换”是**繁重的工作流程和风格以及情况依赖**

一些干燥的著名理论

*   每个 WC 都有一个（目前）~~Repository Root~~ **URL**属性
*   我们不能在 WC（没有技巧）中使用~~RepoRoot~~ URL以下的对象进行操作
*   虽然标签和分支是存储库中的廉价副本，但它们在工作副本中并不便宜（通常情况下）并且浪费与“原件”相同的空间
*   您可以根据自己的喜好选择存储库中的任何节点作为工作副本的根
*   您可以为存储库的不同部分使用任意数量的工作副本 (1+)

以上所有导致的事实是：

*   您可以*一直使用一个 WC*（更少的空间、更多的流量和更新时间在切换时），植根于存储库树深处的*某个节点*，并根据需要将此 WC**切换到其他节点**
*   您可以*为每个不相关的节点使用一个 WC*（更多空间，更少流量 - 无需切换，切换后无需同步 WC）并**更改 WC**
*   您可以（在某些情况下）从根目录获取整个存储库的 WC（在标签/分支端频繁更改的情况下，最大的空间和流量使用，WC 中无用的未使用部分）并**在单个 WC-tree 上导航**

如您所见，switch 仅在 1/3 的情况下是必须的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T14:01:06.380

假设你的回购看起来有点像这样：

```
.
├── branches/
│   ├── branch1/
│   │   └── src/
│   └── branch2/
│       └── src/
└── trunk/
    └── src/ 
```

如果您已经检查了整个 repo，那么该分支将像您所说的那样显示为另一个子目录。

然而，通常的工作方式是检查主干，然后 svn 切换到分支并 svn 切换回来。这样您就不必检查太多数据，您的 ide 总是查看同一个目录，您不会感到困惑并意外编辑错误的分支。

就我个人而言，在我*必须*使用分支的地方，我检查每个分支以在我的工作区目录中并排分隔目录。但大多数情况下我避免分支。

# node.js - 如何测量使用 socket.io 内部传输的数据大小

> ID：12814340
> 
> 赞同：1
> 
> 时间：2012-10-10T07:39:22.210
> 
> 标签：node.js, file-upload, websocket, socket.io

我们知道 socket.io 不传输二进制文件。当我们通过 socket.io 发送二进制（二进制字符串）数据时，它会转义并将其发送到服务器。我需要这种方式增加了二进制字符串的实际大小，并将其与 base64 编码的字符串大小进行比较。

我正在做的是使用 socket.io 上传文件，我看到许多 base64 示例增加了大约 33% 的文件大小。我正在寻找一种安全的方法来上传 socket.io 本身支持的所有浏览器都支持的文件，而不会增加这么大的文件大小。我知道 Websockets 传输二进制文件，但问题出在 IE8 IE9 上。因此，我正在研究二进制字符串传输。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:03:02.097

如果您在基于 Microsoft.NET 的平台上运行该解决方案，您可以查看[XSockets.NET](http://xsockets.net/api)，它支持二进制 (RFC6455) WebSockets 消息。如果客户端不支持二进制，您可以使用 base64 编码的消息。

# mysql - MySQL 内网慢查询

> ID：12814346
> 
> 赞同：0
> 
> 时间：2012-10-10T07:39:37.620
> 
> 标签：mysql

这是我一个朋友遇到的问题。

他有一张`keyword`只有`9000`记录的桌子。`MySQL`服务器有一个公共 ip，当我从我的机器上执行时（`SELECT id, word FROM keyword`我`MySQL`通过 Internet 访问服务器），查询非常快（200 毫秒）。无论我运行多少次，它都应该是非常快的。到现在为止还挺好。

现在他在他的 Intranet 中的机器上运行相同的查询，并使用`MySQL`公共 ip 再次访问服务器。查询有时需要几秒钟，并且在服务器日志`40`中记录为慢查询。`MySQL`他还在他的 Intranet 中的另一台机器上进行了尝试，但有时也需要`40`几秒钟的时间。

这怎么可能？如果只是他的 Intranet 中的网络问题，那么为什么`MySQL`将其记录为慢查询？AFAIK，`MySQL`慢查询日志中的查询时间不包括网络传输？

如何解决此问题？我真的很沮丧。

问候，

佩塔尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:44:05.573

使用它来查看差异：

```
SET profiling = 1;
SELECT id, word FROM keyword; 
```

并可能添加：

```
SHOW PROFILES; 
```

手册中的更多信息：http: [//dev.mysql.com/doc/refman/5.0/en/show-profile.html](http://dev.mysql.com/doc/refman/5.0/en/show-profile.html)

# facebook - 关于使用广告平台的移动应用程序的 Facebook 政策

> ID：12814348
> 
> 赞同：1
> 
> 时间：2012-10-10T07:39:50.573
> 
> 标签：facebook, policy, ads

我想在 iOS 上使用 Facebook API。例如，FB 用户的游戏排名，或发布他们的记录（如高分）。我计划通过广告平台（如 iAd、AdMob、Tapjoy ......）免费制作 iOS 游戏（原生）

但是，我发现 facebook 平台有以下限制。

> Facebook 平台政策
> 
> 三、内容 A. 一般
> 
> 一个。您不得在通过 Facebook 社交渠道分发的内容中包含广告、交叉推广其他应用程序或提供网络搜索功能。

这是否意味着我不能使用 facebook API 为 iOS 原生应用程序（游戏）使用广告平台？而且我不能在 iOS 原生应用程序（游戏）上为其他应用程序（如交叉推广）做广告？（而且我找不到如何要求这个。）

# jquery - 如何通过 Jquery Mobile 中的值更改选择菜单中的选定选项？

> ID：12814350
> 
> 赞同：4
> 
> 时间：2012-10-10T07:40:05.343
> 
> 标签：jquery, select, cordova, jquery-mobile, option

我需要使用来自数据库的值更改所选选项。

这是代码：

```
// this code is in ondeviceready function.
 function onDeviceReady() {
     $("#txtgender2").val(data.data.gender).selectmenu("refresh");
 } 
```

这段代码在 div 的某个地方

```
<div>
    <select name="txtgender2" id="txtgender2" data-role="slider">
        <option value="Male" >Male</option>
        <option value="Female">Female</option>
    </select> 
</div> 
```

如何更改已选择的选项`selectmenu`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:06:44.977

如果要使用数据角色滑块刷新选择菜单，则必须使用：

```
$("#txtgender2").val(data.data.gender).slider("refresh"); 
instead of:

$("#txtgender2").val(data.data.gender).selectmenu("refresh"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-21T16:53:22.870

```
$("#txtgender2 option[value="'+data.data.gender+'"]").attr('selected', 'selected');  
$('#txtgender2').selectmenu('refresh'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T19:41:16.743

如果要使用`data-role`滑块刷新选择菜单，则必须使用：

```
$("#txtgender2").val(data.data.gender).slider("refresh"); 
```

代替：

```
$("#txtgender2").val(data.data.gender).selectmenu("refresh"); 
```

# php - PHP设置和循环关联数组

> ID：12814351
> 
> 赞同：0
> 
> 时间：2012-10-10T07:40:09.797
> 
> 标签：php, arrays

我从文件中填充 $_SESSION['products'] 数组：

```
$myFile = '.\products.txt';
$handle = fopen($myFile, 'r');

while (!feof($handle))
{
    $prod = explode('|', fgets($handle));

    $_SESSION['products'] = array($prod[4] => array(
            'name' => $prod[0],
            'price' => $prod[1],
            'description' => $prod[2],
            'image' => $prod[3]));
} 
```

然后我想遍历它，打印所有的名称和价格：

```
foreach ($_SESSION['products'] as $prodID=>$value) {
  echo $_SESSION['products'][$value]['name'];
  echo $_SESSION['products'][$value]['price'];
} 
```

但这似乎不起作用！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T07:49:58.923

您需要再次检查[foreach](http://www.php.net/manual/en/control-structures.foreach.php)的工作原理。在您的情况下，您可以简单地执行以下操作：

```
foreach($_SESSION['products'] as $value) {
    echo $value['name'];
    echo $value['price'];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T07:56:40.747

您的问题是，在这里您将使用每个产品覆盖 products 数组，这意味着只会出现最后一个产品：

```
 $_SESSION['products'] = array($prod[4] => array( 
```

尝试附加到数组，如：

```
$_SESSION['products'][$prod[4]] = array(
//                    ^^^^^^^^ set the key as the product ID here
        'name' => $prod[0],
        'price' => $prod[1],
        'description' => $prod[2],
        'image' => $prod[3]); 
```

你的foreach也错了，试试

```
foreach ($_SESSION['products'] as $prodID=>$value) {
  echo $value['name'];
  echo $value['price'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T07:48:45.330

```
foreach ($_SESSION['products'] as $prodID=>$value) {
    echo $_SESSION['products'][$prodID]['name'];
    echo $_SESSION['products'][$prodID]['price'];
} 
```

# collections - 对象的集合

> ID：12814352
> 
> 赞同：4
> 
> 时间：2012-10-10T07:40:16.387
> 
> 标签：collections, x++, axapta, dynamics-ax-2012

我想在 X++ 中存储对象列表。我在 msdn 中读到数组和容器不能存储对象，所以唯一的选择是创建一个 Collection 列表。我已经编写了以下代码并尝试使用`Collection = new List(Types::AnyType);`，`Collection = new List(Types::Classes);`但两者都不起作用。请看看我在下面的工作中是否犯了一些错误。

```
static void TestList(Args _args)
{
    List Collection;
    ListIterator iter;
    anytype iVar, sVar, oVar;

    PlmSizeRange PlmSizeRange;
    ;
    Collection = new List(Types::AnyType);

    iVar = 1;
    sVar = "abc";
    oVar = PlmSizeRange;
    Collection.addEnd(iVar);
    Collection.addEnd(sVar);
    Collection.addEnd(oVar);    

    iter = new ListIterator(Collection);
    while (iter.more())
    {
        info(any2str(iter.value()));
        iter.next();
    }
} 
```

此外，我们不能将一些变量或对象转换为 Anytype 变量吗，我读到这种类型转换是自动完成的；

```
anytype iVar;
iVar = 1; 
```

但是在运行时它会抛出一个错误，预期类型是 Anytype，但遇到的类型是 int。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T11:01:00.957

最后一件事，`anytype`变量采用首先分配给它的类型，以后不能更改它：

```
static void Job2(Args _args) 
{
    anytype iVar;
    iVar = 1;             //Works, iVar is now an int!
    iVar = "abc";         //Does not work, as iVar is now bound to int, assigns 0
    info(iVar); 
} 
```

回到你的第一个问题，`new List(Types::AnyType)`永远不会工作，因为该`addEnd`方法在运行时测试其参数的类型，并且`anytype`变量将具有分配给它的值的类型。

也`new List(Types::Object)`只会存储对象，而不是简单的数据类型`int`和`str`. 这可能与您（和 C#）所相信的相反，但简单类型不是对象。

剩下什么？容器：

```
static void TestList(Args _args)
{
    List collection = new List(Types::Container);
    ListIterator iter;
    int iVar;
    str sVar;
    Object oVar;
    container c;
    ;
    iVar = 1;
    sVar = "abc";
    oVar = new Object();
    collection.addEnd([iVar]);
    collection.addEnd([sVar]);
    collection.addEnd([oVar.toString()]);
    iter = new ListIterator(collection);
    while (iter.more())
    {
        c = iter.value();
        info(conPeek(c,1));
        iter.next();
    }
} 
```

对象不会自动转换为容器，通常由您提供`pack`和`unpack`方法（实现接口`SysPackable`）。在上面的代码`toString`中使用的是作弊。

另一方面，我没有看到您的请求的用例，即 Lists 应该包含任何类型。与它的设计目的背道而驰的是，一个 List 包含一种且仅一种在创建[List](http://msdn.microsoft.com/en-us/library/list.aspx)对象时定义的类型。

除了列表之外，还有[其他集合类型](http://msdn.microsoft.com/en-us/library/aa608508.aspx)，也许[Struct](http://msdn.microsoft.com/en-us/library/struct.aspx)会满足您的需求。

# android - 无法在android上停止渲染

> ID：12814355
> 
> 赞同：-1
> 
> 时间：2012-10-10T07:40:23.453
> 
> 标签：android, android-intent, opengl-es

我想在我的角色死亡时停止游戏，然后从游戏切换到游戏结束屏幕。但我发现我发现启动活动无法识别的问题

```
 if(!player1.isDestroyed){
        scrollBackground1(gl);
        scrollBackground2(gl);
        movePlayer1(gl); 
        moveEnemy(gl);
        detectCollisions(gl);
    }
    else{//to the gameover screen
        Intent end = new Intent(SFEngine.context, GameOver.class);
        startActivity(end);
    } 
```

此代码来自渲染器，该类是实现渲染器，而不是 Activity

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:49:51.560

```
Intent end = new Intent(getApplicationContext(), GameOver.class);
        startActivity(end); 
```

# javascript - 多选组合框到 Javascript 中的字符串转换

> ID：12814360
> 
> 赞同：1
> 
> 时间：2012-10-10T07:40:40.277
> 
> 标签：javascript, arrays

我有一个如下所示的多重选择组合框。

我需要存储所有选择的项目，比如这个字符串`Very Cold :+: Very Hot`

```
<select name="MilkShake" id="MilkShake" onchange="changeselectItems(this,'MilkShake');">
    <option value="Very Cold">Very Cold </option>
    <option value="Very Hot">Very Hot </option>
    <option value="Med Size">Med Size </option>
    <option value="Large Size">Large Size </option>
    <option value="1 by 2">1 by 2 </option>
    <option value="1 by 4">1 by 4 </option>
    <option value="2 by 3">2 by 3 </option>
    <option value="Glass">Glass </option>
</select> 
```

我试过使用这个功能

```
function changeselectItems(ref,miniproname)
{
var ref = ref.value;
    var newf = Array();
    alert(ref);
for(var i=0;i<newexampleitem.length;i++)
    {
        newf['sel'] = ref[i];
    }   

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:02:10.133

你可以使用这样的东西

HTML

```
<select name="MilkShake" multiple id="MilkShake" 
onblur = "changeselectItems()">
    <option value="Very Cold">Very Cold </option>
    <option value="Very Hot">Very Hot </option>
    <option value="Med Size">Med Size </option>
    <option value="Large Size">Large Size </option>
    <option value="1 by 2">1 by 2 </option>
    <option value="1 by 4">1 by 4 </option>
    <option value="2 by 3">2 by 3 </option>
    <option value="Glass">Glass </option>
</select>​ 
```

JS

```
function changeselectItems() {
    var selVal = "";
    var selObj = document.getElementById("MilkShake");

    for (i = 0; i < selObj.options.length; i++) {
        if (selObj.options[i].selected) {
            if (selVal != "") {
                selVal = selVal + " :+: " + selObj.options[i].value;
            } else {
                selVal = selObj.options[i].value;
            }

        }
    }

    alert(selVal);
}​ 
```

**[工作演示](http://jsfiddle.net/L5LGq/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:56:43.713

也许您想像这样将“multiple”属性添加到您的标签中：这使您可以通过按住 CTRL 键来选择多个项目。

这是我为您提供的解决方案：

```
 <html>
    <head></head>
    <body>
        <form name="SelectForm">
            <select multiple name="MilkShake" id="MilkShake" onchange="changeselectItems(this);">
                <option value="Very Cold">Very Cold </option>
                <option value="Very Hot">Very Hot </option>
                <option value="Med Size">Med Size </option>
                <option value="Large Size">Large Size </option>
                <option value="1 by 2">1 by 2 </option>
                <option value="1 by 4">1 by 4 </option>
                <option value="2 by 3">2 by 3 </option>
                <option value="Glass">Glass </option>
            </select>
        </form>

        <script>
        function changeselectItems(el)
        {
            var myForm = document.forms.SelectForm;
            var data = "";
            for(i = 0; i < myForm.MilkShake.length; i++)
            {
                if(myForm.MilkShake[i])
                {
                    if(myForm.MilkShake[i].selected)
                    {
                        //here are all the selected items
                        if(data != "") data+= " : ";
                        data+= myForm.MilkShake[i].value;
                    }
                }
            }

            alert(data);
        }
        </script>
    </body>
    </html> 
```

# c++ - c ++如何确保通过共享指针回收内存

> ID：12814363
> 
> 赞同：1
> 
> 时间：2012-10-10T07:41:06.357
> 
> 标签：c++, shared-ptr

我正在使用 boost 共享指针，这些指针实际上在整个应用程序中共享。在某些情况下，这样的共享指针变得无效。例如，指向网络资源的共享指针可能会因为网络变得不可用而变得无效。在这种情况下，共享指针变得无效，我希望所有对象都停止使用它。如何向指针无效的所有对象发送消息。如果它是一个普通指针，我可以将它设置为 null 并且所有客户端代码都应该在使用它之前检查空指针。但是，如果是保持引用计数的共享指针，我怎样才能实现类似的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T07:59:12.473

您可以使用弱指针。也就是说，处理网络事件的代码有一个，`shared_ptr<Res>`而其他人都有一个`weak_ptr<Res>`. 现在，

*   当资源变得不可用时，只需将 重置`shared_ptr`为`NULL`;
*   当客户端要使用该资源时，调用该资源`lock()`并在使用前`weak_ptr`测试返回`shared_ptr`是否有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T07:44:45.443

> 如果它是一个普通指针，我可以将它设置为 null 并且所有客户端代码都应该在使用它之前检查空指针。

我不信。然后，您将拥有指向无效对象的原始指针的副本。你会认为这会解决问题，但**事实并非如此**。它放大了它。

事实是共享指针本身并不会变得无效，它包含的对象会。因此，从逻辑上讲，使用它是否仍然安全应该包含在对象中，而不是共享指针中。

> 指向网络资源的共享指针，由于网络变得不可用，它可能变得无效。

当您尝试调用尝试使用网络的方法时，只需抛出异常......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T07:52:21.103

您需要存储更多信息。您可以将资源与元组中的 bool 放在一起，或者您可以使用`boost::optional`, 并将其设置为`none`当您想要使其无效时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T08:07:12.620

您几乎可以肯定不应该为此使用共享指针，因为它的语义不符合您的需要。共享指针实现了一种穷人的垃圾收集，当没有更多指向它的指针时，对象不再存在；你需要相反，当没有更多对象时，指向对象的指针不复存在。（可以说是反向垃圾收集。）

我过去用过`ManagedPtr`；指针向对象注册自身，该对象必须派生`ManagingObj`自在其析构函数中将指针设置为 null 的类。这有时有效，但它仍然不会从其他对象可能保留它的列表等中删除条目。在实践中，知道您的网络资源对象的其他对象可能希望在它消失时采取特定操作。最后，您几乎总是需要使用观察者模式：任何获得指向您的对象的指针的对象都会向它注册，以便在其消亡时得到通知。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T08:55:49.617

我倾向于遵循标准流使用的模式：拥有一个表示资源的对象，当它检测到（或被告知）网络不再可用时，它可以进入错误状态和/或抛出异常。如果你不能改变现有的资源类，那么这个新对象可以保存现有的资源对象（目前你所有的用户都有共享的指针），用户可以共享新的对象。

除非您需要此资源的所有用户在它变得不可用时迅速做出响应，否则尝试向所有人传播消息似乎没有任何意义。如果你只是想让他们停止使用它，他们可以在下次尝试使用它时这样做，然后发现它不再起作用了。如果他们确实需要消息，那么写一些东西来保存所有的列表，并在他们感兴趣的事件发生时调用他们的一些函数。这称为观察者模式或“侦听器”，借助这些搜索词，您可以找到实现和替代方案。

理想情况下，用户应该能够在使用资源的过程中或之后立即检查错误状态。使用前的测试通常容易出错，因为它会创建一个窗口，在该窗口中网络可能在测试之后但在使用之前*变得不可用。*一旦您的代码必须正确处理该案例，您不妨将其设为*唯一*案例，无需事先检查。

# vim - vim中的转换错误

> ID：12814371
> 
> 赞同：21
> 
> 时间：2012-10-10T07:41:52.230
> 
> 标签：vim

保存 vimrc 文件时添加`set listchars=tab:▸\ ,trail:·,extends:#,nbsp:·`行导致“转换错误”。我在 Window 7 下使用 gvim 7.3。

我使用 ctrl-vu 25B8 使用 ("▸") 添加了这个字符。

我的 vimrc 文件也有`set encoding=utf-8`

是否可以解决此错误。

谢谢

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-10T08:28:04.017

尝试保存`:w ++enc=utf-8`。另外，建议`scriptencoding utf-8`放在`.vimrc`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-03-10T20:12:25.677

我通过更改缓冲区的编码然后保存解决了这个错误（虽然不是来自 listchars）：

```
:set fileencoding=utf-8
:write 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T11:57:23.360

从下面的链接中得到了答案，因为我需要在 ▸\charter 之后放置一个空格 [Vim 不支持 unicode？](https://stackoverflow.com/questions/3766204/vim-doesnt-support-unicode)

# php - 如何使用 php include 添加绝对路径

> ID：12814372
> 
> 赞同：0
> 
> 时间：2012-10-10T07:41:52.017
> 
> 标签：php, include-path

我正在使用 php 包含添加绝对路径。

$路径="/";

```
instead of include('../connect.php');

i want to include like include($path.'connect.php'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T07:45:10.573

如果您正在使用任何框架，请遵循该框架，否则您可以执行以下操作：

```
$path = __DIR__;
include($path . '/connect.php'); // change this to match path 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T07:49:10.030

我正在使用类似的东西。我正在使用链接中的 ap 值来获取我的页面。我在这里也提取了您引用的片段

```
$pages_dir = 'inc/content';
include($pages_dir.'/'.$p.'.inc.php'); 
```

# javascript - `read` 上没有执行回调并且收到错误（抛出异常但未捕获）

> ID：12814374
> 
> 赞同：0
> 
> 时间：2012-10-10T07:41:56.827
> 
> 标签：javascript, dynamics-crm, datajs

在 CRM Dynamics 中，我正在执行以下代码。我试图将它放在一个`try-catch`语句中以捕获据称未捕获的异常，但这没有任何区别。我猜它发生**在**CRM 服务器、C# 代码或类似的东西中。

```
var temp = OData.read({
  urlOrRequest: "https://myurl/2011/OrganizationData.svc/crmk_CustomEntitySet",
  success: function(dataSet) { alert("Yippi!"); },
  error: function(errorMessage) { alert("Buuuu..."); },
  handler: null,
  httpClient: null,
  metaData: null
}); 
```

当然，我已经测试过执行`https://myurl/2011/OrganizationData.svc/crmk_CustomEntitySet`调用，它会按预期返回数据，所以显然我已经按顺序获得了连接和访问权限。

但是，我没有执行任何回调。一切都只是幽灵般的安静。但是，当我尝试关闭或重新加载页面时，我从 CRM Dynamics 收到一条错误消息，其部分内容如下所列。

```
<ScriptErrorDetails>
  <Message>Exception thrown and not caught</Message>
  <Line>13</Line>
  <URL>/%7B634854498230000000%7D/WebResources/crmk_MyResourceWithDataJS</URL>
  <PageURL>/userdefined/edit.aspx
    ?etc=10008&pagemode=iframe&preloadcache=1349853066209</PageURL>
 <Function></Function>
 <CallStack></CallStack>
</ScriptErrorDetails> 
```

鉴于我在 CRM Dynamics（低）和 DataJS 包（loooow）方面的能力水平，我不知道为什么它不起作用，也不知道如何解决它。

我已经检查了我可以在[他们的页面上找到的每个示例](http://datajs.codeplex.com/wikipage?title=OData%20Code%20Snippets&referringTitle=Using%20OData)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:15:49.480

你没有得到回调执行，因为你没有发送一个。你认为你有，但你没有。您正在使用 JSON 语法将属性（或任何名称）放入对象中。您打算使用以下输入列表。

1.  组织数据的 URL。
2.  一个函数，告诉如果成功该做什么。
3.  一个告诉如果失败该怎么办的函数。
4.  一堆`null`s。

但是由于您将其打包成一个结构，CRM 会看到以下内容（关于`odata.read(...)`源文件中看到的函数的完整签名..

1.  一个包含一些东西的对象，不构成可解析的 URL。
2.  什么都没有，意思是`null`，而 CRM 想要看到一个功能（成功）。
3.  什么都没有，意思是`null`，而 CRM 想要看到一个功能（失败）。
4.  什么都没有，意思是`null`，而 CRM 想要看到一个功能（序列化）。
5.  什么都没有，意思是`null`，虽然 CRM 希望看到 HTTP 客户端层（无论那可能是什么）。
6.  什么都没有，意思是`null`CRM 想要查看一些元数据。

**然后 CRM 服务器内部**发生崩溃（因为您未能为您尝试读取的组织数据提供可解析的 URL）并引发异常。**但是**您还没有提供一个回调函数来接收此类错误的通知，也就是您提到的消息。

你`try-catch`没有捕获任何东西，因为没有例外可以捕获。它已经被**CRM** Dynamics 服务器捕获。您看到的是它抱怨没有调用函数来通知您。

尝试执行与此代码等效的代码，看看您是否成功（或至少收到另一条错误消息）。

```
var temp = OData.read(
  "https://myurl/2011/OrganizationData.svc/crmk_CustomEntitySet",
  function(dataSet) { alert("Data retrieval successful."); },
  function(errorMessage) { alert("Operation failure!"); }
}); 
```

我假设您使用的 URL 不是您在代码示例中向我们展示的 URL。这只是一个例子，对吧？您可以测试将 URL 粘贴到 IE 中，看看您是否会收到回复以及其中包含的内容。

# javascript - Backbone + RequireJS + jQuery: $(window).load() 根本不工作

> ID：12814387
> 
> 赞同：0
> 
> 时间：2012-10-10T07:42:53.357
> 
> 标签：javascript, jquery, backbone.js, requirejs, onload

我将以下内容放在我的主干主视图的初始化部分中：

```
$(window).load(function() {
    console.log('Page Loaded');
});

$(window).unload(function() {
    console.log('Page Unloaded');
}); 
```

`Page Unloaded`将正确显示在 Unload 事件上，但从 `Page Loaded`不显示。将代码更改为以下作品：

```
$(function() {
    console.log('Page Loaded');
}); 
```

但我需要`$(window).load()`。关于为什么以及如何做的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:46:16.967

`$(fn)`是 的简写`$(document).ready(fn)`，与 不同`$(window).load(fn)`。

当您绑定此事件时，也许窗口的 onload 已经触发？这不是文档就绪的问题，因为 jQuery 有一些特殊处理可以在它已经发生时立即运行它。

# android - Toast 警报对话框未在 ListView 中显示

> ID：12814388
> 
> 赞同：3
> 
> 时间：2012-10-10T07:43:07.273
> 
> 标签：android

我写了一个应用程序，我们可以在其中将项目添加到列表视图中。我正在对此进行验证，如果任何人进行相同的条目，它应该显示一个警报

```
Toast.makeText(getApplicationContext(), "Serial No Already Exist..",Toast.LENGTH_LONG); 
```

但是当我在模拟器上运行时它没有显示。我确定我的验证码是正确的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T07:44:54.847

尝试：

```
Toast.makeText(getApplicationContext(), "Serial No Already Exist..",Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T07:46:41.873

像这样将 show() 添加到吐司中

```
Toast.makeText(getApplicationContext(), "Serial No Already Exist..",Toast.LENGTH_LONG).show(); 
```

您需要指定 show() 以使吐司可见

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T07:52:27.683

一切都很完美，除了你忘记`.Show()`在最后附加的那个，还要检查[这个](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)。

```
Toast.makeText(getApplicationContext(), "Serial No Already Exist..",Toast.LENGTH_LONG).Show(); 
```

反而＃

```
Toast.makeText(getApplicationContext(), "Serial No Already Exist..",Toast.LENGTH_LONG); 
```

# magento - magento 内存缓存

> ID：12814390
> 
> 赞同：-1
> 
> 时间：2012-10-10T07:43:09.453
> 
> 标签：magento, memcached

我已经在我的电脑上安装了 memcached 1.4，以下 php 代码运行良好：

```
<?php
     $memcache = new Memcache;
     $memcache->connect("localhost",11211); # You might need to set  "localhost" to "127.0.0.1"

    echo "Server's version: " .  $memcache->getVersion() . "<br />\n";

    $tmp_object =  new stdClass;
    $tmp_object->str_attr = "test";
     $tmp_object->int_attr = 123;

     $memcache->set("key",$tmp_object,false,10);
    echo "Store data  in the cache (data will expire in 10 seconds)<br />\n";

     echo "Data from the cache:<br />\n";
     var_dump($memcache->get("key"));
?> 
```

现在我想将 memcache 添加到 magento。我改变了 ma local xml 从

```
<?xml version="1.0"?>
<!-- /** * Magento * * NOTICE OF LICENSE * * This source file is subject 
    to the Academic Free License (AFL 3.0) * that is bundled with this package 
    in the file LICENSE_AFL.txt. * It is also available through the world-wide-web 
    at this URL: * http://opensource.org/licenses/afl-3.0.php * If you did not 
    receive a copy of the license and are unable to * obtain it through the world-wide-web, 
    please send an email * to license@magentocommerce.com so we can send you 
    a copy immediately. * * DISCLAIMER * * Do not edit or add to this file if 
    you wish to upgrade Magento to newer * versions in the future. If you wish 
    to customize Magento for your * needs please refer to http://www.magentocommerce.com 
    for more information. * * @category Mage * @package Mage_Core * @copyright 
    Copyright (c) 2008 Irubin Consulting Inc. DBA Varien (http://www.varien.com) 
    * @license http://opensource.org/licenses/afl-3.0.php Academic Free License 
    (AFL 3.0) */ -->
<config>
    <global>

        <install>
            <date><![CDATA[Tue, 09 Oct 2012 15:36:30 +0000]]></date>
        </install>
        <crypt>
            <key><![CDATA[]]>XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</key>
        </crypt>
        <disable_local_modules>false</disable_local_modules>
        <resources>
            <db>
                <table_prefix><![CDATA[]]>
                </table_prefix>
            </db>
            <default_setup>
                <connection>
                    <host><![CDATA[localhost]]></host>
                    <username><![CDATA[root]]></username>
                    <password><![CDATA[]]>
                    </password>
                    <dbname><![CDATA[magento]]></dbname>
                    <initStatements><![CDATA[SET NAMES utf8]]></initStatements>
                    <model><![CDATA[mysql4]]></model>
                    <type><![CDATA[pdo_mysql]]></type>
                    <pdoType><![CDATA[]]>
                    </pdoType>
                    <active>1</active>
                </connection>
            </default_setup>
        </resources>
        <session_save><![CDATA[db]]></session_save>
    </global>
    <admin>
        <routers>
            <adminhtml>
                <args>
                    <frontName><![CDATA[admin]]></frontName>
                </args>
            </adminhtml>
        </routers>
    </admin>
</config> 
```

到

```
<?xml version="1.0"?>
<!-- /** * Magento * * NOTICE OF LICENSE * * This source file is subject 
    to the Academic Free License (AFL 3.0) * that is bundled with this package 
    in the file LICENSE_AFL.txt. * It is also available through the world-wide-web 
    at this URL: * http://opensource.org/licenses/afl-3.0.php * If you did not 
    receive a copy of the license and are unable to * obtain it through the world-wide-web, 
    please send an email * to license@magentocommerce.com so we can send you 
    a copy immediately. * * DISCLAIMER * * Do not edit or add to this file if 
    you wish to upgrade Magento to newer * versions in the future. If you wish 
    to customize Magento for your * needs please refer to http://www.magentocommerce.com 
    for more information. * * @category Mage * @package Mage_Core * @copyright 
    Copyright (c) 2008 Irubin Consulting Inc. DBA Varien (http://www.varien.com) 
    * @license http://opensource.org/licenses/afl-3.0.php Academic Free License 
    (AFL 3.0) */ -->
<config>
    <global>

        <install>
            <date><![CDATA[Tue, 09 Oct 2012 15:36:30 +0000]]></date>
        </install>
        <crypt>
            <key><![CDATA[XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX]]></key>
        </crypt>
        <disable_local_modules>false</disable_local_modules>
        <resources>
            <db>
                <table_prefix><![CDATA[]]>
                </table_prefix>
            </db>
            <default_setup>
                <connection>
                    <host><![CDATA[localhost]]></host>
                    <username><![CDATA[root]]></username>
                    <password><![CDATA[]]>
                    </password>
                    <dbname><![CDATA[magento]]></dbname>
                    <initStatements><![CDATA[SET NAMES utf8]]></initStatements>
                    <model><![CDATA[mysql4]]></model>
                    <type><![CDATA[pdo_mysql]]></type>
                    <pdoType><![CDATA[]]>
                    </pdoType>
                    <active>1</active>
                </connection>
            </default_setup>
        </resources>
        <session_save><![CDATA[db]]></session_save>
        <cache>
            <backend>memcached</backend><!-- apc / memcached / empty=file -->
            <memcached><!-- memcached cache backend related config -->
                <servers><!-- any number of server nodes can be included -->
                    <server>
                        <host><![CDATA[127.0.0.1]]></host>
                        <port><![CDATA[11211]]></port>
                        <persistent><![CDATA[1]]></persistent>
                    </server>
                </servers>
                <compression><![CDATA[0]]></compression>
                <cache_dir><![CDATA[]]>
                </cache_dir>
                <hashed_directory_level><![CDATA[]]>
                </hashed_directory_level>
                <hashed_directory_umask><![CDATA[]]>
                </hashed_directory_umask>
                <file_name_prefix><![CDATA[]]>
                </file_name_prefix>
            </memcached>
        </cache>
    </global>
    <admin>
        <routers>
            <adminhtml>
                <args>
                    <frontName><![CDATA[admin]]></frontName>
                </args>
            </adminhtml>
        </routers>
    </admin>
</config> 
```

但现在我得到了错误

```
a:5:{i:0;s:86:"SQLSTATE[HY000] [1045] Access denied for user 'root'@'localhost' (using password: YES)";i:1;s:1653:"#0 \lib\Zend\Db\Adapter\Pdo\Mysql.php(96): Zend_Db_Adapter_Pdo_Abstract->_connect() 
```

当我删除标签时，商店再次运行良好。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:28:23.150

您有数据库连接问题。你有奇怪的local.xml格式你确定你有

```
<password><![CDATA[]]>
                    </password> 
```

因为默认情况下它应该是

```
<password><![CDATA[]]></password> 
```

Xml 解析器将带换行符和不带换行符的节点读取为 2 个不同的字符串。您可以通过添加来检查它

```
var_dump($this->_config['password']); 
```

到 Zend_Db_Adapter_Pdo_Abstract::_connect()

# c++ - ubuntu C++中FTP上传的Libcurl错误

> ID：12814391
> 
> 赞同：0
> 
> 时间：2012-10-10T07:43:11.327
> 
> 标签：c++, ftp, libcurl

在 Windows 中，此代码工作文件，但现在，我想将其转换为 ubuntu：

```
 // callback read function to upload file from local to ftp server
size_t read_callback (void* ptr, size_t size, size_t nmemb, FILE *stream){
    //return fread(ptr,size,nmemb, (FILE*) stream);
    return fread(ptr,size,nmemb,stream);
}

// get file name from a path
string FTPClientConnector::getFileName(string path){
    int length = path.size();
    for(int i = length - 1; i >= 0; i--){
        if(path[i] == '/' || path[i] == '\\'){
            return path.substr(i+1, length-i-1);
        }
    }
}

//function to upload a file to FTP server
int FTPClientConnector::uploadFile(string filePath, string serverPath ){
    CURL *curl;
    CURLcode res;
    FILE *hd_src;
    struct stat file_info;
    curl_off_t fsize;

    char* local_file = new char[filePath.size()+1];
    std::copy(filePath.begin(), filePath.end(), local_file);
    local_file[filePath.size()] = '\0';

    // stat the local file
    if(stat(local_file, &file_info)){
        printf("couldn't open file\n");
        delete local_file;
        return -1;
    }

    // convert URL and username and password to connect to remote server
    string urlPath = this->hostName + serverPath;
    urlPath += getFileName(filePath);
    char *url = new char[urlPath.size() + 1];
    std::copy(urlPath.begin(), urlPath.end(), url);
    url[urlPath.size()] = '\0';

    string userAndPassString = this->userName + ":" + this->password;
    char* usernameAndPassword = new char[userAndPassString.size() +1];
    std::copy(userAndPassString.begin(), userAndPassString.end(), usernameAndPassword);
    usernameAndPassword[userAndPassString.size()] = '\0';

    // get the file to open
    hd_src = fopen(local_file, "rb");

    curl_global_init(CURL_GLOBAL_ALL);
    curl = curl_easy_init();
    if(curl){

        /* specify target */
        curl_easy_setopt(curl,CURLOPT_URL, url);
        curl_easy_setopt(curl, CURLOPT_PORT, this->port);
        curl_easy_setopt(curl, CURLOPT_USERPWD, usernameAndPassword);

          /* we want to use our own read function */
        curl_easy_setopt(curl, CURLOPT_READFUNCTION, read_callback);

        /* enable uploading */
        curl_easy_setopt(curl, CURLOPT_UPLOAD, 1L);

        /* now specify which file to upload */
        curl_easy_setopt(curl, CURLOPT_READDATA, hd_src);

        /* Now run off and do what you've been told! */
        res = curl_easy_perform(curl);

        if(res != CURLE_OK){
            printf("Upload file failed!\n");
            delete local_file;
            delete url;
            delete usernameAndPassword;
            return -1;
        }
        curl_easy_cleanup(curl);
    }
    fclose(hd_src);

    delete local_file;
    delete url;
    delete usernameAndPassword;
    return 0;
} 
```

这就是我所说的`main.cpp`：

```
FTPClientConnector connector(host,user,password,port);
connector.uploadFile("xml/kingfisher.xml", "/xml_test_upload"); 
```

上面的代码在 Ubuntu 中不起作用并出现错误：

```
220 ProFTPD 1.3.4a Server (Debian) [::ffff:10.244.31.244]
500 PUT not understood
500 AUTHORIZATION: not understood
500 HOST: not understood
550 */*: Forbidden command argument
500 TRANSFER-ENCODING: not understood
500 EXPECT: not understood
500 Invalid command: try being more creative
500 2A2 not understood 
```

**编辑**：这是我的`Makefile`：

```
uploader:
    g++ -o uploader FTPClientConnector.cpp main.cpp -lcurl 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:09:49.947

从您的评论中可以看出您需要使用 IPv4。将此添加到您的 setopt 调用列表中：

```
curl_easy_setopt(curl, CURLOPT_IPRESOLVE, CURL_IPRESOLVE_V4); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:05:01.393

输出似乎表明您对 FTP 服务器使用 HTTP。确保您的 URL 正确使用 FTP:// 前缀作为 FTP，因为没有协议前缀 libcurl 会猜测您想要的协议，并且默认为 HTTP ...

# c - XML的形式语法

> ID：12814394
> 
> 赞同：0
> 
> 时间：2012-10-10T07:43:27.653
> 
> 标签：c, xml, grammar, formal-languages

我试图在 C 中为 XML 文件构建小型解析器。我知道，我可以找到一些完成的解决方案，但是，我只需要一些用于嵌入式项目的基本东西。我正在尝试创建用于描述没有属性的 XML 的语法，只有标签，但它似乎不起作用，我无法弄清楚原因。

这是语法：

```
 XML : FIRST_TAG NIZ
   NIZ : VAL NIZ | eps
   VAL : START VAL END
     | STR
     | eps 
```

这是实现此语法的 C 代码的一部分：

```
void check() {

getSymbol();
if( sym == FIRST_LINE )
{
    niz();
}
else {
    printf("FIRST_LINE EXPECTED");
    exit(1);
 }
}

 void niz() {
getSymbol();
if( sym == ERROR )
    return;
if( sym == START ) {
    back = 1;
    val();
    niz();
}
printf(" EPS OR START EXPECTED\n");

}

void val() {
getSymbol();
if( sym == ERROR )
    return;
if( sym == START ) {
    back = 0;

    val();
    getSymbol();
    if( sym != END ) {
        printf("END EXPECTED");
        exit(1);
    }
    return;
}
if( sym == EMPTY_TAG || sym == STR)
    return;
printf("START, STR, EMPTY_TAG OR EPS EXPECTED\n");
exit(1); 
```

}

```
 void getSymbol() {
int pom;

if(back == 1) {
    back = 0;
    return;
}
sym = getNextToken(cmd + offset, &pom);
offset += pom + 1;

   } 
```

编辑：这是不满足此语法的 XML 文件示例：

```
<?xml version="1.0"?> 
<VATCHANGES> 
<DATE>15/08/2012</DATE>
<TIME>1452</TIME>
<EFDSERIAL>01KE000001</EFDSERIAL> 
<CHANGENUM>1</CHANGENUM> 
<VATRATE>A</VATRATE> 
<FROMVALUE>16.00</FROMVALUE> 
<TOVALUE>18.00</TOVALUE> 
<VATRATE>B</VATRATE> 
<FROMVALUE>2.00</FROMVALUE> 
<TOVALUE>0.00</TOVALUE> 
<VATRATE>C</VATRATE> 
<FROMVALUE>5.00</FROMVALUE> 
<TOVALUE>0.00</TOVALUE> 
<DATE>25/05/2010</DATE> 
<CHANGENUM>2</CHANGENUM> 
<VATRATE>C</VATRATE> 
<FROMVALUE>0.00</FROMVALUE> 
<TOVALUE>4.00</TOVALUE> 
</VATCHANGES> 
```

它在输出端给出 END EXPECTED。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:39:48.557

首先，您的语法需要一些工作。假设序言被正确处理，您在 NIZ 的定义中有一个基本错误。

```
NIZ : VAL NIZ | eps
VAL : START VAL END
    | STR
    | eps 
```

所以我们进入NIZ，我们首先寻找VAL。问题是 VAL 可能的产品*和*NIZ 结尾的 eps。因此，如果 VAL 什么都不产生（即 eps）并且在此过程中不消耗任何代币（它*不可能*是正确的，因为 eps 是生产），NIZ 减少为：

```
NIZ: eps NIZ | eps 
```

这不好。

沿着这些思路考虑更多的东西：我只是在没有真正远见的情况下吐出这个，以获得超越纯粹基本结构的东西。

```
XML:         START_LINE ELEMENT
ELEMENT:     OPENTAG BODY CLOSETAG
OPENTAG:     lt id(n) gt
CLOSETAG:    lt fs id(n) gt
BODY:        ELEMENT | VALUE
VALUE:       str | eps 
```

这是*超级*基本的。终端包括：

```
lt:    '<'
gt:    '>'
fs:    '/'
str:   any alphanumeric string excluding chars lt or gt.
id(n): any alphanumeric string excluding chars lt, gt, or fs. 
```

我几乎可以感觉到 XML 纯粹主义者的愤怒现在向我倾泻而下，但我想要表达的一点是，当语法定义明确时，RDP 将真正地自己编写。显然，词法分析器（即令牌引擎）需要相应地处理终端。注意： id(n) 是一个 id-stack 以确保您正确关闭最里面的标签，并且是您的解析器的一个属性，根据它管理标签 id 的方式。它不是传统的，但它使事情变得容易得多。

这可以/应该清楚地扩展为包括独立元素声明和快捷元素闭包。例如，这个语法允许这种形式的元素：

```
<ElementName>...</ElementName> 
```

但不是这种形式：

```
<ElementName/> 
```

它也不考虑捷径终止，例如：

```
<ElementName>...</> 
```

考虑到这些添加显然会使语法变得相当复杂，但也会使解析器更加健壮。就像我说的，上面的示例是*基本*的，带有大写字母 B。如果你真的要开始这个，这些是你在设计语法时要考虑的事情，因此也是你的 RDP。

无论如何，只要考虑一下你的语法中的一些修改如何/将大大地让你更容易做到这一点。

# c# - 从列表中的自定义列中选择一个元素

> ID：12814399
> 
> 赞同：5
> 
> 时间：2012-10-10T07:43:53.807
> 
> 标签：c#, asp.net, class, lambda, entities

我正在尝试使用 JQgrid 的 Web 服务实现在具有自定义列名的列表中搜索自定义元素，但我没有想法，我将不胜感激。

我不能在这里复制我的代码，但是，例如，我有一个实体，例如：

```
public class Test
{
    public int ID {get; set;}
    public string Name {get; set;}
    public string Nationality {get; set;}
} 
```

我创建了一个函数来返回这个类的列表：

```
public static List <Test> getList()
{
    List<Test> testList = new List<Test>();
    Test testList1 = new Test();

    testList1.ID = 123;
    testList1.Name = "asd";
    testList1.Nationality = "qwe";

    testList.Add(testList1);
    return testList;
} 
```

从查询字符串中我得到了 searchField 和 searchString，我将这些值存储在字符串 searchField 和 searchString 中。

我想要一些类似于这个功能的东西（我知道它错了，但我想要那个功能）：

```
list=testList.Where(x=>x.searchField.Contains(searchString)); 
```

我对获取列表或任何东西没有任何问题，但我只想要类似的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T07:50:28.120

您可以使用`Reflection`：

```
list = testList.Where(x => (x.GetType()
              .GetProperty(searchField)
              .GetValue(x) as string).Contains(searchString)    
     ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T07:56:52.633

您可以像下面这样实现它。

```
if(searchField == "ID")
{
   testList = testList.Where(x => x.ID == searchString);
}
else if (searchField == "Name")
{
   testList = testList.Where(x => x.Name.Contains(searchString);
}
else if (searchField == "Nationality")
{
   testList = testList.Where(x => x.Nationality.Contains(searchString);
} 
```

# maven-2 - 快照版本与 nexus 中的发布版本不同

> ID：12814403
> 
> 赞同：0
> 
> 时间：2012-10-10T07:44:15.417
> 
> 标签：maven-2, jenkins

我正在使用 maven 和 Jenkins，由于某种原因，我的 Snapshot 版本与我在 nexus 中的 Release 版本不同。我希望他们都一样。有任何想法吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:03:20.453

版本有何不同？

例如，发布版本的格式通常为“..”；1.0.4，而 SNAPSHOT 工件将被版本化为 1.0.4-SNAPSHOT。

如果 xyz 值显着不同，请检查项目的本地 pom 并确保版本正确。

尝试清除 Jenkins 作业的工作区，因为另一个构建可能留下不正确的 POM，您是否使用 maven 发布插件？这可能会在构建失败后留下更改的“遗物”，这可能会导致事情失败。

# magento - Magento 重新索引产品平面错误

> ID：12814422
> 
> 赞同：0
> 
> 时间：2012-10-10T07:45:25.017
> 
> 标签：magento, reindex

自上周以来，产品价格指数被打破。所有其他重新索引器都在工作。

例外：

```
Product Flat Data index process unknown error:
exception 'PDOException' with message 'SQLSTATE[HY000]: General error: 1005 Can't create table 'magento.#sql-37aa_425' (errno: 121)' in /var/www/vhosts/httpdocs/lib/Zend/Db/Statement/Pdo.php:228
Stack trace:
#0 /var/www/vhosts/httpdocs/lib/Zend/Db/Statement/Pdo.php(228): PDOStatement->execute(Array)
#1 /var/www/vhosts/httpdocs/lib/Varien/Db/Statement/Pdo/Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array)
#2 /var/www/vhosts/httpdocs/lib/Zend/Db/Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
#3 /var/www/vhosts/httpdocs/lib/Zend/Db/Adapter/Abstract.php(479): Zend_Db_Statement->execute(Array)
#4 /var/www/vhosts/httpdocs/lib/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query('ALTER TABLE `ca...', Array)
#5 /var/www/vhosts/httpdocs/lib/Varien/Db/Adapter/Pdo/Mysql.php(389): Zend_Db_Adapter_Pdo_Abstract->query('ALTER TABLE `ca...', Array)
#6 /var/www/vhosts/httpdocs/lib/Varien/Db/Adapter/Pdo/Mysql.php(327): Varien_Db_Adapter_Pdo_Mysql->query('ALTER TABLE `ca...')
#7 /var/www/vhosts/httpdocs/lib/Varien/Db/Adapter/Pdo/Mysql.php(2548): Varien_Db_Adapter_Pdo_Mysql->raw_query('ALTER TABLE `ca...')
#8 /var/www/vhosts/httpdocs/app/code/core/Mage/Catalog/Model/Resource/Product/Flat/Indexer.php(806): Varien_Db_Adapter_Pdo_Mysql->addForeignKey('FK_CAT_PRD_FLAT...', 'catalog_product...', 'entity_id', 'catalog_product...', 'entity_id', 'CASCADE', 'CASCADE')
#9 /var/www/vhosts/httpdocs/app/code/core/Mage/Catalog/Model/Resource/Product/Flat/Indexer.php(125): Mage_Catalog_Model_Resource_Product_Flat_Indexer->prepareFlatTable(2)
#10 /var/www/vhosts/httpdocs/app/code/core/Mage/Catalog/Model/Resource/Product/Flat/Indexer.php(115): Mage_Catalog_Model_Resource_Product_Flat_Indexer->rebuild('2')
#11 /var/www/vhosts/httpdocs/app/code/core/Mage/Catalog/Model/Product/Flat/Indexer.php(73): Mage_Catalog_Model_Resource_Product_Flat_Indexer->rebuild(NULL)
#12 /var/www/vhosts/httpdocs/app/code/core/Mage/Catalog/Model/Product/Indexer/Flat.php(303): Mage_Catalog_Model_Product_Flat_Indexer->rebuild()
#13 /var/www/vhosts/httpdocs/app/code/core/Mage/Index/Model/Process.php(166): Mage_Catalog_Model_Product_Indexer_Flat->reindexAll()
#14 /var/www/vhosts/httpdocs/app/code/core/Mage/Index/Model/Process.php(194): Mage_Index_Model_Process->reindexAll()
#15 /var/www/vhosts/httpdocs/shell/indexer.php(158): Mage_Index_Model_Process->reindexEverything()
#16 /var/www/vhosts/httpdocs/shell/indexer.php(198): Mage_Shell_Compiler->run()
#17 {main} 
```

如果在谷歌上搜索了很多关于这个主题的信息。我做了很多尝试，比如更改表格或删除产品平面表格。似乎没有任何效果。

我还尝试了 magento 数据库修复工具。同样的例外。

谁能帮我解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:51:38.737

上次我遇到重新索引问题时，我将此添加到我的 mysql 配置文件 (/etc/my.cnf)

```
key_buffer = 512M
max_allowed_packet = 64M
table_cache = 512
sort_buffer_size = 4m
read_buffer_size = 4m
read_rnd_buffer_size = 2m
myisam_sort_buffer_size = 64m
tmp_table_size = 128m
query_cache_size = 96m
query_cache_type = 1
thread_cache_size = 8
max_connections = 400
wait_timeout = 300 
```

您可能还需要删除 magento/var/locks/ 中的锁定文件

阅读更多@ [http://www.magentocommerce.com/boards/viewthread/36225/](http://www.magentocommerce.com/boards/viewthread/36225/)

# javascript - 使用 jQuery 从任何地方将元素动画到固定位置

> ID：12814423
> 
> 赞同：0
> 
> 时间：2012-10-10T07:45:26.397
> 
> 标签：javascript, jquery, animation

经过长时间的搜索和尝试，我似乎还没有找到解决方案。我想要做的是动画一个箭头去点击按钮上方的特定位置。有 3 个按钮（我们称它们为 A、B 和 C），如果单击 A，箭头将转到那里，当单击 C 时，箭头将从 A 转到 C，或者当单击 B 时，它将从 A 转到 B .

一个简单的“左”动画功能将不起作用，因为位置和距离每次都在变化。我已经尝试使用 .step 函数，我想它可以使用该方法，但我似乎无法让它按应有的方式工作。关于 .step 函数的信息并不多。

我最接近实现这一点的是，它从箭头所在的任何地方移动到正确的位置，但它不是动画的，它只是跳跃。这是代码行：

```
Symbol.bindElementAction(compId, symbolName, "${_Button1}", "click", function(sym, e) {
   sym.$("arrow").css({"-webkit-transform":"translate(11px, 201px)"})
}); 
```

（奇怪的标记是因为我在 Adob​​e Edge 中工作。我正在测试制作 HTML(5)/javascript 广告的所有可能方法，这就是其中之一）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:02:38.343

我如何使箭头动画到单击的按钮：

```
$('.btn').click(function(){
  $('#arrow').animate({
    'left': ($(this).offset().left + ($(this).outerWidth()/2)) - $('#arrow').outerWidth(),
    'top': $(this).offset().top - 20
  });
}); 
```

`position:absolute;`另外，如果按钮本身没有，请制作箭头`position:fixed`。

也许我不完全理解这个问题。但我不明白为什么这不起作用。

如果您的意思是 btns 不断更改位置，则需要将动画放在`setInterval()`.

在 Adob​​e Edge 中，代码必须是这样*的（基于[此](http://forums.adobe.com/message/4301651)链接）*：

```
 sym.$('#arrow').animate({
    'left': ($(this).offset().left + ($(this).outerWidth()/2)) - $('#arrow').outerWidth(),
    'top': $(this).offset().top - 20
  }); 
```

我从未使用过 Adob​​e Edge，但我可能是您的错误*（事件处理程序中的 Javascript 错误！事件类型 = 元素）*在这里有问题，`this`并且还有另一个名称来引用触发事件的对象。

# oracle11g - sql查询Where优化

> ID：12814424
> 
> 赞同：0
> 
> 时间：2012-10-10T07:45:26.967
> 
> 标签：oracle11g

我写了2个采石场，它们是

1)`Select c,c2,c3,c4,c5,c6... from table1 where Id is NULL;`

在 table1 中有 10000 条记录，并且列 Id 没有空值。此查询需要 5 分钟。执行。和

2)`Select c,c2,c3,c4,c5,c6... from table1 where Id = 'abvccdhu9887687698';`

这个查询不到一秒钟。

这个时差是如何产生的

请帮助我..我正在等待您的宝贵建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:29:32.820

请参阅[此](http://tkyte.blogspot.co.il/2006/01/something-about-nothing.html)Tom Kyte 帖子。

基本上，如果您在 ID 列上创建的索引是 B 树索引，那么它不会索引`null`ID 列中具有值的记录。
所以在查询 (1) 中它不使用索引，而在查询 (2) 中它使用。

`(ID,0)`有一种解决方法-您可以在（不仅仅是在`(ID)`）上创建索引。

# java - 将枚举转换为类，反之亦然

> ID：12814426
> 
> 赞同：4
> 
> 时间：2012-10-10T07:45:32.297
> 
> 标签：java, enums

目前，我们有一个业务实体可以表示为枚举或类。

类实现更简单，业务逻辑更清晰。但是有 50% 的可能性是需求会发生变化，而枚举表示将使我们的生活更轻松。

具体例子

实体具有标题和颜色。颜色是可编辑的，所以有两种方法

1.  实体是一个枚举 - 有另一个类具有从实体到其颜色的映射。
2.  entity 是一个类 - 只是一个颜色字段，没有问题。

未来的变化要求——应该有与每个实体相关的规则

1.  entity 是一个枚举——规则是硬编码在代码中的
2.  实体是一个类 - 需要更多的映射类以及允许用户指定它们的 UI。

如果规则集是静态的，则第二个选项是矫枉过正。

那么，如果我们需要将类转换为枚举，对这个过程有什么建议吗？

编辑

实体集是有限的，用户不太可能更改。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:00:17.887

假设这`Entity`意味着`JPA entities.`

您可以使用`enum`返回外部世界和内部实体，您可以拥有代表它的属性。

```
@Entity
class Entity {
    @Column
    Integer ruleIndex = 0;//Illustration purpose only

    public Color getColor() {
        // ruturn color based on rule that will be applied by ruleindex
    }

}
enum Color {
    BLUE(0), BLACK(1), WHITE(2);

    private int ruleIndex = 0;
    private Color(int ruleIndex) {
        this.ruleIndex = ruleIndex;
    }
} 
```

**更新**

不建议将枚举用作实体。相反，您可以使用单继承策略

```
@Entity
@Inheritance(strategy=InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name="DISC", discriminatorType=STRING,length=20)
public class Color
{......}

@Entity
@DiscriminatorValue("Blue")
public class Blue extends Color
{......}

@Entity
@DiscriminatorValue("Green")
public class Green extends Color
{......} 
```

这将允许您将所有数据存储在同一个表中，并且还允许您基于对象识别数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:03:31.010

如果您想要一些来自枚举的功能和一些来自类的功能，那么您可以混合使用这些功能：

```
 public class ColoredTitle
    {

        private String color;
        private Title title;

        public ColoredTitle(String color, Title title)
        {
            this.color = color;
            this.title = title;
        }

        public String getColor()
        {
            return color;
        }

        public void setColor(String color)
        {
            this.color = color;
        }

        public String getHeading()
        {
            return title.heading;
        }

        enum Title
        {
            FRONT_PAGE("Front Page"),
            FOOTER_TITLE("Footer Title");

            private String heading;

            Title(String title)
            {
                this.heading = title;
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T08:06:55.247

如果它有任何可编辑的东西，那么无论如何你都需要一个实体类，所以首先选择实体类。

如果您以后需要实现一组固定的规则，请将它们实现为具有硬编码规则的枚举，并在您的实体类上添加一个映射到该枚举的字段。

您可以像这样在实体字段上映射枚举：

```
enum MyRule {
    RULE1, RULE2;
    // implement hard-coded rule
}

@Entity
class Myentity {
    @Enumerated(/* optionally specify EnumType, default is ordinal */)
    @Column
    MyRule rule;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T08:16:53.127

枚举可以像普通类一样拥有方法。

```
public enum Tree {

   FIR("Fir Tree"),
   BIRCH("Birch Tree");

   private String desc;

   public Tree(String desc) { this.desc = desc; }

   public String getDesc() { return desc; }
   public String getRandom() { return "abc"; }

} 
```

# extjs - 如何将xml中的字符转换为字符串以在extjs中显示

> ID：12814428
> 
> 赞同：1
> 
> 时间：2012-10-10T07:45:47.847
> 
> 标签：extjs, extjs4

这是 XML 文件：

```
<ROOT>
    <R FN="Ganapati" LN="Jena" Com="PC"  />
    <R FN="Chandra" LN="Reddy" Com="PC"/>
    <R FN="Charn" LN="Raj" Com="PC"/>
    <R FN="Sunil" LN="Kumar" Com="PC"/>
    <R FN="Muni" LN="Kiran" Com="PC"/>
    <R FN="Raghu" LN="Kiran" Com="PC"/>
    <R FN="Suresh" LN="Kiran" Com="PC"/>
    <R FN="Naresh" LN="Kiran" Com="PC"/>
    <R FN="Ranjith" LN="Kiran" Com="PC"/>
</ROOT> 
```

请注意它`Com="PC"`在代码中的说法。我想显示“点云”，那么我应该如何在 ExtJS 中映射它？

这是我的 ExtJS 代码：

```
 {name: 'FN',mapping:'@FN'},
        { name: 'LN',mapping:'@LN'},
        { name: 'Com',mapping:'@Com'}              
    ])
});

var grid = new Ext.grid.GridPanel({
    store: store,
    columns: [
        {header: "FN", width: 120, dataIndex: 'FN'},
        {header: "LN", width: 100, dataIndex: 'LN'},
        {header: "Com", width: 115, dataIndex: 'Com'}
    ],

    // ...
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:20:02.460

尝试使用这样的渲染器：

```
function renderCom(val, metadata, record) {
    if (val == "PC") {
        return "Point Cloud";
    } else if ( val == "SE") {
        return "Something Else";
    } else {
        return val; // if nothing matches return the original value
    }
}

var grid = new Ext.grid.GridPanel({
store: store,
columns: [
    {header: "FN", width: 120, dataIndex: 'FN'},
   {header: "LN", width: 100, dataIndex: 'LN'},
    {header: "Com", width: 115, dataIndex: 'Com', renderer: renderCom}

], 
```

# javascript - javascript获取没有前缀的最后一个url

> ID：12814429
> 
> 赞同：0
> 
> 时间：2012-10-10T07:45:56.577
> 
> 标签：javascript, regex, mootools

我希望使用**javascript**或**mootools**从文本中检测最后一个 url 。网址可以不带**前缀/方案**

我正在研究像 Facebook 这样的 URL 自动感知。用户可能会给出一个 URL www.example.com 或[http://www.example.com](http://www.example.com)，其中任何一个都应该被 JavaScript 检测到。查看 stackoverflow 检测到的 URL 包含在没有 URL 方案的方案中，它无法检测到 URL。就我而言，我需要两者。

**这是一些文字**

```
'http://www.example.com www.example2.com' 
```

现在我想要**www.example2.com如果我得到包含****[http://www.example.com](http://www.example.com)**和**www.example2.com**的完整数组会更好

 **我搜索了很多但找不到解决方案。最接近我的要求的是[关于使用正则表达式进行 URL 验证](https://stackoverflow.com/questions/226505/question-about-url-validation-with-regex/226709#226709)的问题以及[如何使用 jQuery 从纯文本中提取 URL？](https://stackoverflow.com/questions/4504853/how-do-i-extract-a-url-from-plain-text-using-jquery)

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:49:09.033

**正则表达式**

```
/([^:\/?# ]+:)?(\/\/[^\/?# ]*)?[^?# ]+(\?[^# ]*)?(#\S*)?/gi 
```

**示例代码**

```
var str = 'http://www.example.com www.example2.com scheme://username:password@domain:port/path?query_string#fragment_id';
var t = str.match(/([^:\/?# ]+:)?(\/\/[^\/?# ]*)?[^?# ]+(\?[^# ]*)?(#\S*)?/gi);

/* 
   t contains : 
   [ 
     "http://www.example.com",
     "www.example2.com",
     "scheme://username:password@domain:port/path?query_string#fragment_id"
   ]
*/ 
```

**演示** >http://jsfiddle.net/wvYTd/
**讨论**

*   此正则表达式将在输入字符串中查找任何**看起来像URL 的子字符串。**
*   没有对找到的任何 URL 执行验证。例如，如果输入字符串是`3aBadScheme://hostname`，正则表达式会将其检测为 URL。在这个例子中，`3aBadScheme`是无效的，因为方案必须以字母开头。

    摘自[RFC3986](https://www.rfc-editor.org/rfc/rfc3986#section-3.1)

> (...)
> 方案名称由一系列字符组成，以字母开头，后跟字母、数字、加号 ("+")、句点 (".") 或连字符 ("-") 的任意组合。
> (...)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:52:10.213

给定您的输入字符串，我想您只想使用空格作为分隔符来拆分它？ `.split(' ')`?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T12:53:53.813

通过在这 2 个链接中组合信息： [如何使用 jQuery 从纯文本中提取 URL？](https://stackoverflow.com/questions/4504853/how-do-i-extract-a-url-from-plain-text-using-jquery) [使用 JavaScript 检测文本中的 URL](https://stackoverflow.com/questions/1500260/detect-urls-in-text-with-javascript)

我们可以得到这个：http: [//jsfiddle.net/qQwGA/1/](http://jsfiddle.net/qQwGA/1/)

如果我理解你想要做什么，这应该涵盖它。**

# c# - 转换 System.List 到 Java.Lang.String[]

> ID：12814430
> 
> 赞同：1
> 
> 时间：2012-10-10T07:46:01.217
> 
> 标签：c#, android, visual-studio-2010, xamarin.android, xamarin

我正忙着用 Visual Studio 编写一个单声道的 android 应用程序。我正忙于`ISectionIndexer`在我的自定义适配器上实现。

我正在努力将 a 转换`System.List<string>`为`Java.Lang.String[]`. 也不知道有没有可能？！

一些示例代码：

```
 private List<string> _sections;

    public Java.Lang.Object[] GetSections()
    {
        return this._sections.ToArray(); // Cannot implicitly convert type 'string[]' to 'Java.Lang.Object[]'

    } 
```

如果可能的话，有人可以协助转换吗？提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-12T18:13:44.880

这个怎么样？

```
public Java.Lang.Object[] GetSections()
{            
    return new Java.Util.ArrayList(this._sections).ToArray();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:47:42.490

我用下面的方法解决了这个问题，不是很漂亮，但是很管用！

```
 public Java.Lang.Object[] GetSections()
    {            
        Java.Lang.String[] tmpObjCollection = new Java.Lang.String[this._sections.Count];
        for (int i = 0; i < this._sections.Count; i++)
        {
            tmpObjCollection[i] = new Java.Lang.String(this._sections[i]);
        }

        return tmpObjCollection;
    } 
```

# codeigniter - CI 多张图片大小调整

> ID：12814431
> 
> 赞同：0
> 
> 时间：2012-10-10T07:46:00.860
> 
> 标签：codeigniter, image-processing

我正在使用 CI 上传多张图片，他们确实上传了。我也在尝试
使用以下代码调整它们的大小，只有第一个图像调整大小，其余的没有。他们以当前大小上传。怎么了？

任何帮助都会非常非常感激。

```
function doupload() {

    $path = array();
    $count = count($_FILES['userfile']['size']);

    foreach($_FILES as $key=>$value){
        for($n=0; $n<=$count-1; $n++) {
            $_FILES['userfile']['name']=$value['name'][$n];
            $_FILES['userfile']['type']    = $value['type'][$n];
            $_FILES['userfile']['tmp_name'] = $value['tmp_name'][$n];
            $_FILES['userfile']['error']       = $value['error'][$n];
            $_FILES['userfile']['size']    = $value['size'][$n];   

                $config['upload_path'] = './images';
                $config['allowed_types'] = 'gif|jpg|png|jpeg';

            $this->load->library('upload', $config);
            $this->upload->do_upload();
            $data = $this->upload->data();
            $path[] = $data['full_path']; //contains full path of every image
        }
    }   

    foreach($path as $p=>$ath){
        $config1 = array(
        'source_image'      => $ath,
        'new_image'         => './images',
        'maintain_ration'   => true,
        'overwrite'         => true, 
        'width'             => 600,
        'height'            => 400
        );

        $this->load->library('image_lib', $config1);            
        $this->image_lib->resize();
        $this->image_lib->clear();

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:17:25.157

首先在循环外加载 image_lib，您可以在循环中使用初始化并为每个图像传递新配置

```
$this->load->library('image_lib');   

    foreach($path as $p=>$ath){
            $config1 = array(
            'source_image'      => $ath,
            'new_image'         => './images',
            'maintain_ration'   => true,
            'overwrite'         => true, 
            'width'             => 600,
            'height'            => 400
            );

            $this->image_lib->initialize($config);
            $this->image_lib->resize();
            $this->image_lib->clear();

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:16:46.560

CodeIgniter 的`Loader`类只加载一次库，因此在您的情况下，您`foreach`可以多次调整同一个图像的大小。将库加载移出循环并使用`initialize`图像处理库的方法为每次调整大小设置配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-14T19:59:31.607

在我的情况下**，在构造函数中加载 lib**并使用代码

```
$config['image_library'] = 'gd2';
$config['maintain_ratio'] = FALSE;
$config['source_image'] = $config['upload_path'].$image_info['file_name'];

$config['new_image'] = $config['upload_path']."thumb_".$image_info['file_name'];
$config['width'] = 313;
$config['height'] = 303;
$this->image_lib->initialize($config); 
$this->image_lib->resize();
$this->image_lib->clear();

$config['new_image'] = $config['upload_path']."icon_".$image_info['file_name'];
$config['width'] = 70;
$config['height'] = 70;
$this->image_lib->initialize($config); 
$this->image_lib->resize();
$this->image_lib->clear(); 
```

保持索引名称始终 new_image 在`$config['new_image']`

# javascript - 滚动到我的 div 下方？

> ID：12814435
> 
> 赞同：0
> 
> 时间：2012-10-10T07:46:14.757
> 
> 标签：javascript, jquery

我有一个在点击时展开的 div，有时它位于页面底部并且靠近底部。我想要的是，当它接近底部时，它应该向下滚动到它的正下方。

到目前为止，我的解决方案如下。我知道如何计算值并为所有内容设置动画，但我只是不明白为什么我的脚本要滚动到页面底部，它只是将其猛烈撞击到底部。有任何想法吗？

**编辑**
Doh 因为它的滚动到底部。问题是我如何滚动使其在我的 div 下方 10px 处？我不想说`scrollTop: total`

jQuery

```
 var $ediv = $this.parent('div').find('.order-expand-row');
       var hDiv = $ediv.outerHeight();
       var oDiv = $ediv.offset().top;
       var wHeight = $(window).height();
       var total = hDiv + oDiv + 10;

       if (total >= wHeight) {                                   
          $('html, body').animate({ scrollTop: total }, 600);
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:28:44.440

一杯茶可以变魔术；）

通过减去`wHeight`from来解决它`total`，这让我得到了我需要滚动到的值。为了清除它，我需要的是我想要滚动停止的位置而不是它应该滚动到的位置。

```
 var $ediv = $this.parent('div').find('.order-expand-row');
   var hDiv = $ediv.outerHeight();
   var oDiv = $ediv.offset().top;
   var wHeight = $(window).height();
   var total = hDiv + oDiv + 10;
   var scrollTo = total - wHeight; //the scroll position

   if (total >= wHeight) {                                   
      $('html, body').animate({ scrollTop: scrollTo }, 600);
   } 
```

# c++ - 如何从指针列表中获取随机指针？

> ID：12814443
> 
> 赞同：0
> 
> 时间：2012-10-10T07:47:01.230
> 
> 标签：c++, stl

如何从指针列表中获取随机指针？我有简单的自定义`class Buildings`和列表

```
std::list<Buidldings*> temp; 
```

temp 的大小大于零。如何从列表（0-temp.size）中获取随机指针？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T07:50:27.780

用于[`std::rand`](http://en.cppreference.com/w/cpp/numeric/random/rand)选择适当的索引，然后[推进](http://en.cppreference.com/w/cpp/iterator/advance)迭代器：

```
assert( !temp.empty() );
std::list<Buidldings*>::const_iterator it = temp.begin();
std::advance( it, std::rand() % temp.size() );
Buidldings *p = *it; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T07:50:17.437

试试这个：

```
template<typename ContainerType >
typename ContainerType::iterator get_random(ContainerType & container)
{
    ContainerType::iterator iter = container.begin(); 
    std::advance(iter,rand() %container.size());
    return iter ;
}

template<typename ContainerType >
typename ContainerType::const_iterator get_random(const ContainerType & container)
{
... (same as above)
} 
```

从[这里](http://www.gamedev.net/topic/438564-access-random-item-in-stdlist/)

# java - 是否有用于设置系统时间的 Java 库？

> ID：12814445
> 
> 赞同：0
> 
> 时间：2012-10-10T07:47:08.517
> 
> 标签：java, time, system

> **可能重复：**
> [如何在 Java 中设置系统时间？](https://stackoverflow.com/questions/6203857/how-can-i-set-the-system-time-in-java)

我想从 Java 程序设置系统时间。我一直在谷歌搜索，我发现的唯一解决方案涉及`Runtime.exec`. 这有一个非常严重的缺点，即 Windows 也没有合理的系统命令来设置系统时间（例如，我如何获得日期区域设置？）。

我现在通过`jna`. 这很有趣（没有讽刺意味）。

现在我想知道是否没有人费心制作一个独立于操作系统的 Java 库来设置系统时间。这个问题似乎经常出现。

# grails - Grails导出插件设置列高

> ID：12814457
> 
> 赞同：0
> 
> 时间：2012-10-10T07:47:58.033
> 
> 标签：grails, export

我正在使用 grails 的导出插件。我的控制器中有这段代码：

```
 if(params?.format && params.format != "html"){ 
        response.contentType = grailsApplication.config.grails.mime.types[params.format]
        response.setHeader("Content-disposition", "attachment; filename=Pour-Schedule.${params.extension}")
        List fields = ["id", "customer"] 
        Map labels = ["id": "Id", "customer": "Customer"]

        Map parameters = [title: "Customer List", "column.widths": [0.2, 0.3]] 

        exportService.export(params.format, response.outputStream, Customer.list(params), fields, labels, [:], parameters) } 
```

代码 column.widths 将在 excel、pdf 等上设置列的宽度。现在如何设置此列的高度？我尝试了 column.height 但它不工作，如 row.height。

任何人都可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:18:59.423

据我了解，不幸的是，不支持行的宽度。请参阅[API 文档](http://grails.org/plugin/export)。

PDF 导出支持一些附加参数，这些参数可以像上面代码示例中的标题属性一样使用。支持以下参数：

*   pdf.encoding（指定字体编码，默认为“Cp1252”（=latin 1），允许值：“Cp1250”、“Cp1252”（=latin 2）、“Cp1257”、“Identity-H”、“Identity-V” , "MacRoman")有关编码的更多信息，请参见[http://itextdocs.lowagie.com/tutorial/fonts/index.php](http://itextdocs.lowagie.com/tutorial/fonts/index.php)
*   title.encoding（与 pdf.encoding 相同，但用于标题字体）
*   header.encoding（与 pdf.encoding 相同，但用于标题字体）
*   text.encoding（与 pdf.encoding 相同，但用于文本字体）
*   title.font.size（确定标题字体大小，默认为“10”，允许值：字符串形式的数字）
*   header.font.size（确定标题字体大小，默认为“10”，允许值：字符串形式的数字）
*   text.font.size（确定文本字体大小，默认为“10”，允许值：字符串形式的数字）
*   font.family（确定全局字体系列，允许的值：在[http://www.1t3xt.info/api/com/lowagie/text/FontFactory.html](http://www.1t3xt.info/api/com/lowagie/text/FontFactory.html)中定义的常量）
*   title.font.family（确定标题字体系列，默认为 com.lowagie.text.FontFactory.HELVETICA，允许值：[http](http://www.1t3xt.info/api/com/lowagie/text/FontFactory.html) ://www.1t3xt.info/api/com/lowagie/text/FontFactory.html 中定义的常量)
*   header.font.family（确定标题字体系列，默认为 com.lowagie.text.FontFactory.HELVETICA，允许值：[http](http://www.1t3xt.info/api/com/lowagie/text/FontFactory.html) ://www.1t3xt.info/api/com/lowagie/text/FontFactory.html 中定义的常量)
*   text.font.family（确定文本字体系列，默认为 com.lowagie.text.FontFactory.HELVETICA，允许值：[http](http://www.1t3xt.info/api/com/lowagie/text/FontFactory.html) ://www.1t3xt.info/api/com/lowagie/text/FontFactory.html 中定义的常量)
*   title.font.style（确定标题字体样式，默认为“bold”，允许值：“bold”、“italic”、“normal”、“bolditalic”）
*   header.font.style（确定标题字体样式，默认为“bold”，允许值：“bold”、“italic”、“normal”、“bolditalic”）
*   text.font.style（确定文本字体样式，默认为“normal”，允许值：“bold”、“italic”、“normal”、“bolditalic”）
*   border.color（确定表格边框颜色，默认为：new Color(163, 163, 163)，允许值：java.awt.Color 对象，例如 Color.RED）
*   separator.color（确定表格行分隔符颜色，默认为：new Color(238, 238, 238)，允许值：java.awt.Color 对象，例如 new Color(100, 100, 100)）
*   column.widths（以百分比指定列宽，默认为所有列的大小相同，允许值：浮动列表，例如

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T20:29:12.360

虽然您无法设置单元格高度，但您至少可以使用换行符，以使单元格高度更大。

# ios - 无法访问 iOS SQLite 数据库：sqlite3_prepare_v2 和“没有这样的表”sqlite3_errmsg

> ID：12814458
> 
> 赞同：0
> 
> 时间：2012-10-10T07:48:01.730
> 
> 标签：ios, ios5, sqlite, ios-simulator

这是我第一次尝试在 iOS 中创建和访问 SQLite 数据库，我按照教程进行操作，但我无法完成这项工作。这些是我遵循的步骤：

1.  通过 Firefox 插件（“testDatabase”）和一个包含几列的表（“testTable”）创建了一个数据库
2.  将“testDatabase.sqlite”文件保存在目录中
3.  将此类文件拖放到我的 Xcode 项目中的“支持文件”组中
4.  在 Build Phases > Link Binary With Libraries 中添加了“libsqlite3.dylib”
5.  在 Build Settings > Linking > Other Linker Flags > Debug and Release 中添加了“-lsqlite3”
6.  在一个 ViewController 中，调用了这个方法：

    ```
    -(NSString *)copyDatabaseToDocuments {
        NSFileManager *fileManager = [NSFileManager defaultManager];
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsPath = [paths objectAtIndex:0];
        NSString *filePath = [documentsPath stringByAppendingPathComponent:@"testDatabase.sqlite"];
        if ( ![fileManager fileExistsAtPath:filePath] ) {
        NSString *bundlePath = [[[NSBundle mainBundle] resourcePath]
                                stringByAppendingPathComponent:@"testDatabase.sqlite"];
            [fileManager copyItemAtPath:bundlePath toPath:filePath error:nil];
        }
        return filePath;
    } 
    ```

7.  然后，尝试在数据库中写入：

    ```
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsPath = [paths objectAtIndex:0];
    NSString *filePath = [documentsPath stringByAppendingPathComponent:@"testDatabase.sqlite"];
    sqlite3 *database;

    if(sqlite3_open([filePath UTF8String], &database) == SQLITE_OK) {
        const char *sqlStatement = "insert into testTable (id) VALUES (?)";
        sqlite3_stmt *compiledStatement;

        if (sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK) {

            sqlite3_bind_int(compiledStatement, 1, newObject.ID);
        }

        if(sqlite3_step(compiledStatement) == SQLITE_DONE) {
                sqlite3_finalize(compiledStatement);
        }
    }
    sqlite3_close(database); 
    ```

我已经阅读了几篇关于类似错误的帖子，但我尝试过的所有内容都没有对我有用......我也尝试过，`NSString *filePath = [[NSBundle mainBundle] pathForResource:@"testDatabase" ofType:@"sqlite"];`但它是空的，并且在模拟器中多次低估和重新部署我的应用程序......

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T06:59:12.410

我终于通过简单地删除 */Users/[user]/Library/Application Support/iPhone Simulator/5.1/Applications/*中生成的应用程序文件夹来完成这项工作，以便在运行模拟器时再次创建

# xcode - 强制关闭应用程序后 NKAssetDownload 不下载

> ID：12814459
> 
> 赞同：2
> 
> 时间：2012-10-10T07:48:05.843
> 
> 标签：xcode, ios5, newsstand-kit

我正在开发一个报亭应用程序并使用 NKAssetDownload 下载 pdf。

问题是，每当我按下 Xcode 上的停止按钮或在下载时通过杀死它来强制关闭时，NKAssetDownload 都会停止响应。只有在下载过程中，NKAssetDownload 才会停止响应。我必须删除应用程序或重置模拟器才能让它再次工作。

根据我的阅读，清除下载的唯一方法是删除问题的 NKIssue。所以我在 viewDidLoad 中删除了应用程序开始时的问题。

```
 //delete a pending download issue            
NKIssue *issue = [[NKLibrary sharedLibrary] issueWithName:[defaults objectForKey:  [NSString stringWithFormat:@"%d.Name",[defaults integerForKey:@"currentDownloadingIssue"]]]];

    // NSLog(@"%@",[defaults objectForKey:[NSString stringWithFormat:@"%d.Name",[defaults integerForKey:@"currentDownloadingIssue"]]]);

   if (issue) {
        [[NKLibrary sharedLibrary] removeIssue:issue];
         NSLog(@"Issue %i removed",[defaults integerForKey:@"currentDownloadingIssue"]);
   } 
```

之后，当用户按下下载按钮时，我添加/刷新已删除的问题。

下载不响应/显示/移动...

如果我完成了下载，则下一次下载开始正常。前提是我在下载过程中没有强制关闭。

# cakephp - CakePHP Croogo CMS 如何从 URL 中删除“页面”和“博客”？

> ID：12814460
> 
> 赞同：2
> 
> 时间：2012-10-10T07:48:06.630
> 
> 标签：cakephp, content-management-system

我正在使用`CakePHP CMS`名为[Croogo](http://croogo.org/)。我已经定制了我的主题并创建了大部分页面。

但是我有一个新的要求，即从 URL中删除`page`and 。`blog`任何一个都会好的。我已经创建了我网站的所有静态内容，`page`因为每个 url 都带有`page/slug`.

如何从 URL 中删除它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T07:05:12.570

我已经在我的`'croogo_routes.php'`文件中尝试过这个，它就像魅力一样。

完成此操作后，我的页面正在使用两种方式，例如`'page/slug'`和`'slug'`

```
CroogoRouter::connect('/:slug', array('controller' => 'nodes', 'action' => 'view', 'type' => 'page', 'slug' => ':slug')); 
```

在页面部分中包含此行。像这样

```
// Page
    CroogoRouter::connect('/:slug', array('controller' => 'nodes', 'action' => 'view', 'type' => 'page', 'slug' => ':slug'));
    CroogoRouter::connect('/about', array('controller' => 'nodes', 'action' => 'view', 'type' => 'page', 'slug' => 'about'));
    CroogoRouter::connect('/page/:slug', array('controller' => 'nodes', 'action' => 'view', 'type' => 'page')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:24:49.740

用于`routes`定义从 url 到控制器/操作的映射。

有关路线的更多信息，请参阅本书文章：http: [//book.cakephp.org/1.3/view/945/Routes-Configuration](http://book.cakephp.org/1.3/view/945/Routes-Configuration)

如果您发现这对您不起作用，请考虑使用[自定义路由类](http://mark-story.com/posts/view/using-custom-route-classes-in-cakephp "自定义路由类")

# php - 通过ajax调用php函数

> ID：12814462
> 
> 赞同：-4
> 
> 时间：2012-10-10T07:48:14.003
> 
> 标签：php, javascript, ajax, function

> **可能重复：**
> [创建对 PHP 函数的 jQuery AJAX 请求](https://stackoverflow.com/questions/7016701/creating-jquery-ajax-requests-to-a-php-function)

我正在尝试运行一个非常简单的公式，

调用一个网页，每隔几秒左右，Ajax 就会调用一个 php 函数来回显“Hello World”

```
<?php
function test(){
     echo "Hello World";
}
?>
<script type="text/javascript">

function testingTimer()
{
    //CALL PHP FUNCTION CALLED TEST
}

setInterval('testingTimer()',5000);
</script> 
```

我所需要的只是调用已经声明的 php 函数的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:51:07.543

你不能直接调用它。编写**AJAX**代码并**调用**URL ，如果操作**GET**变量等于测试，则`myfile.php?action=test`在文件中写入，然后调用该函数，不要忘记退出代码以防止任何其他输出。`myfile.php`

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:54:32.573

根据您的示例代码，我假设您正在尝试在一个文件中完成所有这些操作。您遇到的问题是 PHP 在页面加载之前/加载时在服务器端运行。一旦加载，它就不能在不刷新的情况下重新执行。

您需要将 PHP 放在一个单独的文件中，以便 AJAX 通过 HTTP 调用它并返回响应。

所以像这样（如果使用 jQuery）：

```
$.ajax('helloworld.php', function(data){
    alert(data);
}, 'html'); 
```

如果正确实施，应该弹出 hello world。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T07:50:23.770

AJAX 无法自行调用任意 php 函数。AJAX 允许您连接到给定页面并请求数据。话虽如此，您可以使用 AJAX 加载给定页面，该页面所做的只是调用您的测试函数：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T07:50:42.653

谷歌如何进行 ajax 调用。这是在太多教程中解释的基本知识，并且取决于您是否使用框架以及使用哪个框架。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T07:51:56.610

例如，您可以发布一些内容：

```
function testingTimer()
{
     $.post(URL,
            {
            foo : 'foo'
            }
     );
} 
```

并在 php 检查帖子中：

```
if (isset($_POST['foo']))
    test(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T07:52:24.987

您应该使用[jQuery](http://jquery.com)来使用[ajax 函数](http://api.jquery.com/jQuery.ajax/)。

**您不应使用 setInterval**，而应在服务器响应后使用 setTimeout ，因为如果服务器响应时间超过 5000 秒，那么您将同时收到两个请求。如果你想设置一个超时，你总是可以在 jqXHR 对象上看到 abort 函数。

例如，您可以这样做：

```
function refresh() {
    $.ajax({
        type: 'GET',    // can be POST or GET
        url: 'page.php' // php script to call
    // when the server responds
    }).done(function(response) {
        console.log(response);
        // call your function automatically
        setTimeout(refresh, 5000);
    });
} 
```**

# c# - C#中相同的文件不同的MD5校验和

> ID：12814468
> 
> 赞同：1
> 
> 时间：2012-10-10T07:48:36.470
> 
> 标签：c#, file, md5, checksum

这是场景。我有一个具有自动更新功能的 winforms 应用程序。此应用程序包含一种计算当前（本地）exe 文件的 md5 校验和并将其与（服务器）exe 文件的 md5 校验和进行比较的方法，通过比较 2 的哈希来确定服务器上是否有任何新更新本地机器和服务器上的文件。

现在，此方法在我拥有的某些 PC 上完美运行，并且当我运行应用程序时，它会提供相同的校验和哈希值。问题出在其他一些 PC 上，我总是收到自动更新消息，因为我得到了不同的 MD5 哈希值，现在应用程序开始自动更新并在我的服务器上重新下载文件，我得到一个新的 exe 文件具有完全不同的哈希值。我真的很困惑是什么可能导致这种情况？是C#下载方法的问题吗？它本身的md5功能有问题吗？任何输入将不胜感激...

编辑：一种计算 md5 校验和的方法

```
public static string GetMD5HashFromFile(string filename)
{
    using (var md5 = new MD5CryptoServiceProvider())
    {
        var buffer = md5.ComputeHash(File.ReadAllBytes(filename));
        var sb = new StringBuilder();
        for (int i = 0; i < buffer.Length; i++)
        {
            sb.Append(buffer[i].ToString("x2"));
        }
        return sb.ToString();
    }
} 
```

# javascript - 如何使用js改变当前网站的颜色？

> ID：12814474
> 
> 赞同：1
> 
> 时间：2012-10-10T07:48:56.297
> 
> 标签：javascript, web

我是 JS 的新手。我正在尝试编写一个 JS 代码来更改当前链接的颜色。例如，如果它在首页，颜色为红色，其他为蓝色。但是如果我点击 SHOP 标签，shop 会变成红色，其他都是蓝色的。

这是我的想法：

```
if(currentpage.href==one of a.href)
then a.style.color=red 
```

我已经搜索了很多页面，但是当我尝试使用它们时，其中一些在本地计算机上工作，但没有一个在服务器上工作。

拜托，请帮帮我！感谢您的时间：）　

```
<div  id="changeColor" class="horizontalcssmenu" style="padding-left:7px;">
<a href="linkeadress" >HOME</a>
<a href="linkaddress" >SHOP</a>
</div>

<script type="text/javascript">
var links = document.getElementById("changeColor");
for(var i=0;i<2;i++)
{
  if(links.getElementsByTagName("a")[i].href == window.location.href)=function(){
    var tempLink=links.getElementsByTagName("a")[i];
    for(i=0;i<tempLink.length;i++){
      tempLink.style.color="#ff8100";
    }
  }
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:53:31.180

它的

```
tempLink.style.backgroundColor="#ff8100"; 
```

如果你想改变背景颜色

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:15:32.813

如果链接完全合格，这将起作用（意味着它们将与地址栏中出现的完全匹配）[http://jsfiddle.net/G7LGA/1/](http://jsfiddle.net/G7LGA/1/)

如果您有部分字符串，请告诉我格式，我将能够更新函数以更好地匹配。

# c# - 保持活动 WCF 进程

> ID：12814481
> 
> 赞同：2
> 
> 时间：2012-10-10T07:49:22.677
> 
> 标签：c#, wcf

我在 WCF 中有一个长时间运行的进程，需要 2-3 小时。在启动进程的客户端离开/超时之后，WCF 会运行很长时间。WCF w3wp 进程需要多长时间才能消失，因为没有与它的连接。我在想，即使 WCF 正在处理，它也可能会停止 WCF 服务，因为没有新的连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:10:19.970

IIS 将等待服务操作完成加上[空闲超时](http://technet.microsoft.com/en-us/library/cc771956%28v=ws.10%29.aspx)分钟，然后关闭应用程序池。默认空闲超时为 20 分钟。

# php - Codeigniter 模型参数传递

> ID：12814483
> 
> 赞同：0
> 
> 时间：2012-10-10T07:49:30.623
> 
> 标签：php, model-view-controller, codeigniter

> **可能重复：**
> [CodeIgniter 和模型-视图-控制器——你的经验/你的意思？](https://stackoverflow.com/questions/12629365/codeigniter-and-the-model-view-controller-your-experience-your-meaning)

我猜一个很简单的问题。使用 PHP 和诸如 Codeigniter 之类的 MVC 框架，总是将变量传递给模型是更好的做法吗？例如，您应该通过方法调用传递post变量还是直接`$this->input->post()`在方法本身中引用？我猜最好传递它们，因为你不能假设参数总是来自同一个来源？

谢谢，

汤姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:04:07.433

我会说你应该传递参数。仅当在 Web 服务器中运行时才存在发布输入。从命令行 (CLI) 运行时，没有来自 post 的输入。

模型不应该意识到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T08:06:35.943

遵循共同的设计原则，您自己给出的答案是正确的：例如，出于可重用性原因，不同的关注点不应在模块或类中混合。模型负责处理模型属性和行为——不管你的数据来自哪里。

# c# - System.Data.OleDb.OleDbException：UPDATE 语句中的语法错误

> ID：12814484
> 
> 赞同：0
> 
> 时间：2012-10-10T07:49:31.497
> 
> 标签：c#, sql, oledb

我有一个包含 2 张工作表的 excel 文件，并希望更新“数据”工作表中的一些值。我使用下一个简单的命令：

```
var myCommand = new OleDbCommand();
var sql = "Update [Sheet2$] set Status = 'New_value' WHERE Building = 12";
var myConnection = new OleDbConnection(connectionString);
myCommand.CommandText = sql;
myCommand.ExecuteNonQuery(); 
```

我得到错误：

```
System.Data.OleDb.OleDbException : Syntax error in UPDATE statement 
```

我也试过这个：

```
var sql = "Update [Sheet2$] set Status = 'New_value' WHERE Building = '12'"; 
```

但没有成功。这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T07:52:37.387

逃离列`status`

```
var sql = "Update [Sheet2$] set [Status] = 'New_value' WHERE Building = 12"; 
```

# sockets - Select() 没有在客户端出现

> ID：12814489
> 
> 赞同：0
> 
> 时间：2012-10-10T07:49:45.970
> 
> 标签：sockets

我只使用 linux 套接字编写了一个客户端套接字程序。这是我在程序中所做的图片的信息

1.  创建套接字
2.  与服务器套接字建立连接
3.  将该套接字分配给选择的读取集和异常集。
4.  使用 select 方法在单独的线程中给出超时值 NULL

服务器在一台外部设备中运行。

该程序在阅读和所有方面都可以正常工作。现在，当我拔下该设备的电源线时，我遇到了问题。

我假设当我们移除设备的电源线时，所有的插座都会突然关闭，并且连接的客户端插座会收到读取事件。当我们尝试读取时，我们收到读取为零的字节数，这意味着服务器关闭了连接。

但是在我的程序中，当我拔下设备的电源线时，在我的客户端程序中选择没有出现意味着客户端套接字没有收到任何事件。我不明白为什么..

任何关于我们如何知道服务器关闭连接或关闭电源时套接字行为的任何信息的建议都将不胜感激。

我需要你的帮助，这非常关键。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:51:46.713

当远程机器突然断网（网线拔掉或断电）时，它无法通知连接的另一端。更重要的是，仅从半开套接字（如您的情况）执行读取的客户端也无法检​​测到这一点。

了解连接丢失的唯一方法是发送数据包。由于发送的所有数据都应得到对方的确认，因此客户端计算机上的 TCP 将不断重试发送未确认的数据部分，直到尝试次数用尽。然后`ETIMEDOUT`应该返回一个错误（通过预期读取事件的套接字）。您可以再创建一个套接字来定期发送这些消息，以检测客户端上的对等点消失（心跳连接）。但是所有这些重试可能仍需要一些时间。

另一种选择可能是使用`SO_KEEPALIVE`套接字选项。连接空闲一段时间后，TCP 开始向服务器发送探测消息，并且可以检测到它的消失。空闲项的默认值通常非常大，因此需要对其进行修改。其他一些可能相关的参数（TCP_KEEPCNT、TCP_KEEPINTVL、TCP_KEEPIDLE）。看来，此选项可能在不同系统上以不同方式实现，或者可能根本不存在。

我从来没有亲自尝试过解决这个问题，所以这一切只是一堆可能会给出一些想法的想法。这是另一种[想法的来源](http://www.codeproject.com/Articles/37490/Detection-of-Half-Open-Dropped-TCP-IP-Socket-Conne)。

# java - 在 Glassfish 中将 JAX-WS 升级到更新版本

> ID：12814491
> 
> 赞同：1
> 
> 时间：2012-10-10T07:49:48.143
> 
> 标签：java, glassfish, jax-ws

在 Glassfish 3.1.2.2 中使用 Web 服务时，我们遇到了[类加载器泄漏](http://java.net/jira/browse/GLASSFISH-18787)，我们希望将 JAX-WS 升级到 2.2.7 以修复此问题。你能推荐一种方法吗？我们已经尝试放入`jaxws-rt.jar`文件`${AS_HOME}/lib/endorsed`夹，但随后我们在部署时遇到以下异常：

```
org.apache.catalina.LifecycleException: java.util.ServiceConfigurationError: javax.servlet.ServletContainerInitializer: Provider com.sun.xml.ws.transport.http.servlet.WSServletContainerInitializer could not be instantiated: java.lang.NoClassDefFoundError: javax/servlet/ServletContainerInitializer
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:5389)
    at com.sun.enterprise.web.WebModule.start(WebModule.java:498) 
```

我强调问题是这个类是由不同的类加载器加载的。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:10:37.597

安装包含 JAX-WS 2.2.7 的[新版 Metro](http://metro.java.net/2.2.1-1/#installing)后，问题得到解决。

# layout - 黑莓 1 张图片最左边和 1 个按钮最右边

> ID：12814496
> 
> 赞同：0
> 
> 时间：2012-10-10T07:49:59.327
> 
> 标签：layout, blackberry, blackberry-jde

我正在制作一个黑莓应用程序，我只想知道如何将按钮对齐，使 1 位于最右侧，图片位于最左侧。我尝试过水平管理器，但它不支持`Field.Field_RIGHT`and `Field.Field_Left`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:56:38.097

尝试这个-

```
HorizontalFieldManager hfm=new HorizontalFieldManager(FIELD_HCENTER);
ButtonField left=new ButtonField("Left");
ButtonField right=new ButtonField("Right");
JustifiedHorizontalFieldManager j=new JustifiedHorizontalFieldManager(left,right, true);
hfm.add(j);
add(hfm); 
```

JustifiedHorizo​​ntalFieldManager 类如下所示 -

```
public class JustifiedHorizontalFieldManager extends Manager
{
    private static final int SYSTEM_STYLE_SHIFT = 32;

public Field _leftField;
public Field _rightField;

private boolean _giveLeftFieldPriority;

public JustifiedHorizontalFieldManager( Field leftField, Field rightField, boolean giveLeftFieldPriority )
{
    this( leftField, rightField, giveLeftFieldPriority, Field.USE_ALL_WIDTH );
}

public JustifiedHorizontalFieldManager( Field leftField, Field rightField, boolean giveLeftFieldPriority, long style )
{
    super( style );

    _leftField = leftField;
    _rightField = rightField;

    add( _leftField );
    add( _rightField );

    _giveLeftFieldPriority = giveLeftFieldPriority;
}

public JustifiedHorizontalFieldManager( boolean giveLeftFieldPriority, long style )
{
    super( style ); 
    _giveLeftFieldPriority = giveLeftFieldPriority;
}

public void addLeftField( Field field )
{
    if( _leftField != null ) {
        throw new IllegalStateException();
    }
    _leftField = field;
    add( _leftField );
}

public void addRightField( Field field )
{
    if( _rightField != null ) {
        throw new IllegalStateException();
    }
    _rightField = field;
    add( _rightField );
}

public int getPreferredWidth()
{
    return _leftField.getPreferredWidth() + _rightField.getPreferredWidth();
}

public int getPreferredHeight()
{
    return Math.max( _leftField.getPreferredHeight(), _rightField.getPreferredHeight() );
}

protected void sublayout( int width, int height )
{
    Field firstField;
    Field secondField;
    if( _giveLeftFieldPriority ) {
        firstField = _leftField;
        secondField = _rightField;
    } else {
        firstField = _rightField;
        secondField = _leftField;
    }

    int maxHeight = 0;

    int availableWidth = width;
    availableWidth -= _leftField.getMarginLeft();
    availableWidth -= Math.max( _leftField.getMarginRight(), _rightField.getMarginLeft() );
    availableWidth -= _rightField.getMarginRight();

    layoutChild( firstField, availableWidth, height - firstField.getMarginTop() - firstField.getMarginBottom() );
    maxHeight = Math.max( maxHeight, firstField.getMarginTop() + firstField.getHeight() + firstField.getMarginBottom() );
    availableWidth -= firstField.getWidth();

    layoutChild( secondField, availableWidth, height - secondField.getMarginTop() - secondField.getMarginBottom() );
    maxHeight = Math.max( maxHeight, secondField.getMarginTop() + secondField.getHeight() + secondField.getMarginBottom() );
    availableWidth -= secondField.getWidth();

    if( !isStyle( Field.USE_ALL_HEIGHT ) ) {
        height = maxHeight;
    }
    if( !isStyle( Field.USE_ALL_WIDTH ) ) {
        width -= availableWidth;
    }

    setPositionChild( _leftField, _leftField.getMarginLeft(), getFieldY( _leftField, height ) );
    setPositionChild( _rightField, width - _rightField.getWidth() - _rightField.getMarginRight(), getFieldY( _rightField, height ) );

    setExtent( width, height );
}

private int getFieldY( Field field, int height )
{
    switch( (int)( ( field.getStyle() & FIELD_VALIGN_MASK ) >> SYSTEM_STYLE_SHIFT ) ) {
        case (int)( FIELD_BOTTOM >> SYSTEM_STYLE_SHIFT ):
            return height - field.getHeight() - field.getMarginBottom();
        case (int)( FIELD_VCENTER >> SYSTEM_STYLE_SHIFT ):
            return field.getMarginTop() + ( height - field.getMarginTop() - field.getHeight() - field.getMarginBottom() ) / 2;
        default:
            return field.getMarginTop();
    }
}

public Field getLeftField()
{
    return _leftField;
}

public Field getRightField()
{
    return _rightField;
}

public void replace( Field oldField, Field newField )
{
    if( oldField == newField ) {
        // Nothing to do
        return;
    }

    if( oldField == _leftField ) {
        _leftField = newField;
    } else if( oldField == _rightField ) {
        _rightField = newField;
    }
    add( newField );
    delete( oldField );
}

   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T18:55:39.657

如果您愿意，甚至更简单：

```
yourHorizontalFieldManager.add(leftButton);
  rightButton.setPosition(Display.getWidth()-leftButton.getPrefferedWidth()-rightButton.getPreferredWidth());
yourHorizontalFieldManager.add(rightButton); 
```

另请**[参阅](https://stackoverflow.com/questions/4183026/blackberry-horizontalfieldmanager-alignment/12910943#12910943)**

# facebook - 如何通过用户在 Facebook 页面上发布消息

> ID：12814497
> 
> 赞同：1
> 
> 时间：2012-10-10T07:49:59.080
> 
> 标签：facebook, api

我的网站上有一个 facebook 应用程序。我想自动将用户的个人资料链接和其他一些内容发布到我的 Facebook 页面。但目前这是通过页面管理员而不是用户发布的。我该如何解决？

# node.js - 在 MongoDB 中按日期分组

> ID：12814503
> 
> 赞同：0
> 
> 时间：2012-10-10T07:50:25.330
> 
> 标签：node.js, mongodb, group-by, mapreduce, mongoose

我在 AppFog（前 Nodester）上运行一个博客风格的 Web 应用程序。它是用 NodeJS + Express 编写的，并使用 Mongoose 框架来持久化到 MongoDB。

MongoDB是1.8版本，不知道AppFog会不会升级到2.2。

为什么会有这个介绍？好吧，现在我的“帖子”显示在基本的“分页”可视化中，我的意思是它们只是从 mongo 中提取的，按日期降序排序，一次一页。这是一个片段：

```
Post
                .find({pubblicato:true})
                .populate("commenti")
                .sort("-dataInserimento")
                .skip(offset)
                .limit(archivePageSize)
                .exec(function(err,docs) {
                    var result = {};
                    result.postsArray = (!err) ? docs : [];
                    result.currentPage = currentPage;
                    result.pages = howManyPages;
                    cb(null, result);
            }); 
```

现在，我的目标是 GROUP BY 'dataInserimento' 并显示类似“日记”的帖子，我的意思是：

第 1 页 => 2012/10/08：我显示 3 个帖子

第 2 页 => 2012/10/10：我显示 2 个帖子（2012/10/09 没有帖子，所以我不允许出现白页）

第 3 页 => 2012/10/11：35 个帖子等等……

我的想法是首先获取所有日期的列表并进行分组（并且可能计算每天的帖子），然后构建页面链接，当访问页面（日期）时，像上面一样查询，添加日期作为参数。

*解决方案*：

*   聚合框架非常适合，但我现在无法使用那个版本的 Mongo

*   以某种方式使用 .group() ，但它在分片环境中不起作用的想法并不让我兴奋！:-(

*   写一个 MAP-REDUCE！我认为这是正确的方法，但我无法想象应该如何编写 map() 和 reduce()。

你能帮我举个小例子吗？

谢谢

***编辑***：

peshkira 的答案是正确的，但是，我不知道我是否需要这个。

我的意思是，我会有 /archive/2012/10/01、/archive/2012/09/20 等 URL。

在每个页面中，有查询帖子的日期就足够了。但是我必须显示“NEXT”或“PREV”链接，所以我需要知道包含帖子的第二天或前一天是什么，如果有的话。也许我可以只查询日期大于或小于当前日期的帖子，并获取第一个日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:25:56.660

假设你有类似的东西：

```
{
"author" : "john doe",
"title" : "Post 1",
"article" : "test",
"created" : ISODate("2012-02-17T00:00:00Z")
}
{
"author" : "john doe",
"title" : "Post 2",
"article" : "foo",
"created" : ISODate("2012-02-17T00:00:00Z")
}
{
"author" : "john doe",
"title" : "Post 3",
"article" : "bar",
"created" : ISODate("2012-02-18T00:00:00Z")
}
{
"author" : "john doe",
"title" : "Post 4",
"article" : "foo bar",
"created" : ISODate("2012-02-20T00:00:00Z")
}
{
"author" : "john doe",
"title" : "Post 5",
"article" : "lol cat",
"created" : ISODate("2012-02-20T00:00:00Z")
} 
```

那么你可以使用 map reduce 如下：

**地图**

它只是将日期作为键和帖子标题发出。您可以将标题更改为_id，这可能对您更有用。如果您存储日期的时间，您将只想使用日期（没有时间）作为键，否则 mongo 将按日期时间分组，而不仅仅是日期。在我的测试用例中，所有帖子都有相同的时间 00:00:00 所以没关系。

```
function map() {
  emit(this.created, this.title);
} 
```

**减少**

它什么也不做，然后只是将键的所有值推送到数组，然后数组被包装在结果对象中，因为 mongo 不允许数组成为 reduce 函数的结果。

```
function reduce(key, values) {
  var array = [];
  var res = {posts:array};
  values.forEach(function (v) {res.posts.push(v);});
  return res;
} 
```

**执行**

使用`db.runCommand({mapreduce: "posts", map: map, reduce: reduce, out: {inline: 1}})`将输出以下结果：

```
{
"results" : [
    {
        "_id" : ISODate("2012-02-17T00:00:00Z"),
        "value" : {
            "posts" : [
                "Post 2",
                "Post 1"
            ]
        }
    },
    {
        "_id" : ISODate("2012-02-18T00:00:00Z"),
        "value" : "Post 3"
    },
    {
        "_id" : ISODate("2012-02-20T00:00:00Z"),
        "value" : {
            "posts" : [
                "Post 5",
                "Post 4"
            ]
        }
    }
],
...
} 
```

我希望这有帮助

# java - 如何在java中获得上个月/一年？

> ID：12814504
> 
> 赞同：44
> 
> 时间：2012-10-10T07:50:24.677
> 
> 标签：java, calendar, java-time

如何在 Java 中找出上个月及其年份？

例如，如果今天是 2012 年 10 月 10 日，则结果应该是`Month = 9`and `Year = 2012`。如果今天是 2013 年 1 月 10 日，结果应该是`Month = 12`and `Year = 2012`。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-10-10T07:55:26.237

您的解决方案在[这里，](https://stackoverflow.com/questions/1005523/how-to-add-one-day-to-a-date)但您需要使用减法而不是加法

```
c.add(Calendar.MONTH, -1); 
```

然后你可以调用[getter](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#get%28int%29)来`Calendar`获取正确的字段

```
int month = c.get(Calendar.MONTH) + 1; // beware of month indexing from zero
int year  = c.get(Calendar.YEAR); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-11-24T13:07:53.160

# java.time

使用`java.time`Java 8 内置的框架：

```
import java.time.LocalDate;

LocalDate now = LocalDate.now(); // 2015-11-24
LocalDate earlier = now.minusMonths(1); // 2015-10-24

earlier.getMonth(); // java.time.Month = OCTOBER
earlier.getMonth.getValue(); // 10
earlier.getYear(); // 2015 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-10T08:02:12.210

使用[Joda 时间库](http://joda-time.sourceforge.net)。用它处理日期、时间、日历和语言环境非常容易，它将在版本 8 中集成到 java 中。

`DateTime#minusMonths`方法将帮助您获得上个月。

```
DateTime month = new DateTime().minusMonths (1); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-10-10T08:03:23.923

您可以使用 Calendar 类来执行此操作：

```
SimpleDateFormat format = new SimpleDateFormat("yyyy.MM.dd HH:mm");
Calendar cal = Calendar.getInstance();
cal.add(Calendar.MONTH, -1);
System.out.println(format.format(cal.getTime())); 
```

这打印：`2012.09.10 11:01`实际日期`2012.10.10 11:01`

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-10-10T08:00:00.290

最简单且最不容易出错的方法是……使用 Calendar 的 roll() 方法。像这样：

```
 c.roll(Calendar.MONTH, false); 
```

roll 方法需要一个布尔值，这基本上意味着将月份向上滚动（true）或向下滚动（false）？

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-12-22T05:40:32.767

```
private static String getPreviousMonthDate(Date date){
    final SimpleDateFormat format = new SimpleDateFormat("dd-MM-yyyy");

    Calendar cal = Calendar.getInstance();  
    cal.setTime(date);  
    cal.set(Calendar.DAY_OF_MONTH, 1);  
    cal.add(Calendar.DATE, -1);

    Date preMonthDate = cal.getTime();  
    return format.format(preMonthDate);
}

private static String getPreToPreMonthDate(Date date){
    final SimpleDateFormat format = new SimpleDateFormat("dd-MM-yyyy");

    Calendar cal = Calendar.getInstance();  
    cal.setTime(date);  
    cal.add(Calendar.MONTH, -1);  
    cal.set(Calendar.DAY_OF_MONTH,1);  
    cal.add(Calendar.DATE, -1);  

    Date preToPreMonthDate = cal.getTime();  
    return format.format(preToPreMonthDate);
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2021-05-12T19:18:18.053

# `YearMonth`班级

您可以使用[`java.time.YearMonth`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/YearMonth.html)该类及其[`minusMonths`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/YearMonth.html#minusMonths(long))方法。

```
YearMonth lastMonth = YearMonth.now().minusMonths(1); 
```

调用[`toString`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/YearMonth.html#toString())为您提供标准[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)格式的输出：`yyyy-mm`

您可以访问零件、年份和月份。您可以选择使用[`Month`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Month.html)枚举对象，或者仅使用`int`1-12 的值作为月份。

```
int year = lastMonth.getYear() ;
int month = lastMonth.getMonthValue() ;
Month monthEnum = lastMonth.getMonth() ; 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-10-10T08:05:48.057

您需要注意月份是从零开始的，因此当您执行 getMonth 时，您需要添加 1。在下面的示例中，我们必须将 Januaray 的 1 添加为 1 而不是 0

```
 Calendar c = Calendar.getInstance();
    c.set(2011, 2, 1);
    c.add(Calendar.MONTH, -1);
    int month = c.get(Calendar.MONTH) + 1;
    assertEquals(1, month); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-04T10:12:05.083

您可以使用 LocalDate 类。

例如：

1.  要获取上个月的日期：

    LocalDate.now().minusMonths(1);

2.  获取上个月的开始日期

    LocalDate.now().minusMonths(1).with(TemporalAdjusters.firstDayOfMonth());

同样的年份：

1.  要获取去年的日期：

    LocalDate.now().minusYears(1);

2.  要获得去年的开始日期：

    LocalDate.now().minusYears(1).with(TemporalAdjusters.lastDayOfYear());

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2018-07-03T08:05:42.307

这是代码片段。我认为它有效。

```
 Calendar cal = Calendar.getInstance();
      SimpleDateFormat simpleMonth=new SimpleDateFormat("MMMM YYYY");
      cal.add(Calendar.MONTH, -1);
      System.out.println(simpleMonth.format(prevcal.getTime())); 
```

# android - 如何在android中创建滑动开关？

> ID：12814510
> 
> 赞同：1
> 
> 时间：2012-10-10T07:50:46.270
> 
> 标签：android

我想创建滑动开关，例如（开/关）当前显示，如果我滑动到关闭将启用并且还知道当前显示的状态请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:00:47.327

使用[Switch](http://developer.android.com/reference/android/widget/Switch.html "转变")及其 setOnCheckedChangeListener 和 OnCheckedChangeListener(CompoundButton buttonView, boolean isChecked)，每当触摸开关时都会调用它，并检查 isChecked 的值以了解开关的状态。这也适用于 ToggleButton；查看它们的[教程](http://developer.android.com/guide/topics/ui/controls/togglebutton.html)以获取更多信息。（我认为 Switch 只能从 Android 4.0 开始使用）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-10T07:54:08.980

您可以使用[ToggleButton](http://developer.android.com/reference/android/widget/ToggleButton.html)有更多关于 ToggleButton 的信息

# asp.net - 在 appharbor 上部署基础设施

> ID：12814511
> 
> 赞同：3
> 
> 时间：2012-10-10T07:50:52.450
> 
> 标签：asp.net, infragistics, appharbor

有没有人使用“lib”文件夹选项成功地在 appharbor 上部署了一个具有基础设施控制的网站？如果是的话，你能发布一步一步的信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:12:00.000

我没有特定于 appharbor 的详细信息，但是当我们部署 ig 时，我们确保引用是“复制本地”为真。

我们也像这样通过 web.config 引用我们的脚本

```
<configSections>
  <section name="infragistics.web" type="System.Configuration.SingleTagSectionHandler,System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
</configSections>

<infragistics.web imageDirectory="/ig_common/Images/" javaScriptDirectory="/ig_common/20102/scripts/" enableAppStyling="false" /> 
```

如果您试图让 appharbor 在服务器上构建您的解决方案，这是行不通的：http: [//www.infragistics.com/community/blogs/ed_blankenship/archive/2007/07/16/building-apps -使用-netadvantage-with-team-build.aspx](http://www.infragistics.com/community/blogs/ed_blankenship/archive/2007/07/16/building-apps-using-netadvantage-with-team-build.aspx)

# bash - grep -f 并且只返回第一个匹配

> ID：12814512
> 
> 赞同：1
> 
> 时间：2012-10-10T07:50:52.713
> 
> 标签：bash, csv, grep

我正在使用遵循基本流程的大型 CSV。

1.  备份工作原件
2.  生成骨架 CSV
3.  从另一个 CSV 读取，格式化内容，然后将其附加到骨架
4.  将备份中的数据附加到新的。

我遇到的问题是，当我从备份中读取内容时，我正在使用`grep -Ev -f`一个包含正则表达式的文件来从备份中排除不需要的数据，以包含在下一个版本中。这目前存在一个问题，因为 grep 似乎针对来自 STDIN 的每一行评估文件中的每个正则表达式，这将导致重复。简单的解决方案是简单地将其通过管道`sort | uniq`并称之为一天，但这将与当前使用的 csv 的格式产生冲突。如果需要，我可以详细说明，但不足之处是我运行一个脚本来批量处理 IP 地址，但也有其他人手动编辑文件，并且使用当前形式的脚本，最终输出将是所有自动化内容手动条目位于文件的底部。

那么，无论如何，是否没有一些丑陋的 grep 循环来告诉它在模式匹配后停止评估一行？使用`-m 1`将在整个流中的第一个匹配之后停止 grep，我需要它在每个新行之后停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T22:33:35.497

对于你想要完成的任务。我认为最好使用 AWK。您可以在以下网址找到关于 AWK 的优秀教程：http: [//www.grymoire.com/Unix/Awk.html](http://www.grymoire.com/Unix/Awk.html)。您基本上需要更改 awk 的输入字段分隔符

```
awk -f',' foo.awk bar.dat 
```

就排序问题而言，请遵循以下内容：[http ://www.linuxquestions.org/questions/linux-general-1/how-to-use-awk-to-sort-243177/](http://www.linuxquestions.org/questions/linux-general-1/how-to-use-awk-to-sort-243177/)

# java - Spring中具有多个数据源的JTA事务

> ID：12814519
> 
> 赞同：3
> 
> 时间：2012-10-10T07:51:43.003
> 
> 标签：java, spring, jta

我必须开发一个在 Spring 中使用两个数据源的应用程序。这两个数据源应该由一个事务管理，这样如果一个数据源发生异常，另一个数据源也应该回滚。我现在的问题是我目前的 jta 植入不起作用。当我测试我的代码时，如果一个数据源有错误，另一个数据源没有回滚。它只是承诺。这是我的配置文件：

```
<bean id="parentDataSource"
         class="org.springframework.jdbc.datasource.DriverManagerDataSource"
         abstract="true">
   <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
   <property name="username" value="root"/>
</bean>

<bean id="firstDataSource" parent="parentDataSource">
   <property name="url" value="jdbc:mysql://localhost:3306/test"/>
</bean>

<bean id="secondDataSource" parent="parentDataSource">
   <property name="url" value="jdbc:mysql://localhost:3306/test2"/>
</bean>

<bean id="jtaTransactionManager"  
        class="org.springframework.transaction.jta.JtaTransactionManager">
</bean>  

<bean id="customerDAO" class="springapp.datasource.CustomerDAO">
    <property name="dataSource">
        <ref local="firstDataSource"/>
    </property>
    <property name="dataSource2">
        <ref local="secondDataSource"/>
    </property>
    <property name="jtaTransactionManager">
        <ref local="jtaTransactionManager"/>
    </property>
</bean> 
```

customerDAO 中的交易代码为：

```
public class CustomerDAO {
    private DataSource dataSource;
    private DataSource dataSource2;
    private JtaTransactionManager jtaTransactionManager;

    public DataSource getDataSource2() {
        return dataSource2;
    }

    public void setDataSource2(DataSource dataSource2) {
        this.dataSource2 = dataSource2;
    }

    public JtaTransactionManager getJtaTransactionManager() {
        return jtaTransactionManager;
    }

    public void setJtaTransactionManager(JtaTransactionManager jtaTransactionManager) {
        this.jtaTransactionManager = jtaTransactionManager;
    }

    public DataSource getDataSource() {
        return dataSource;
    }

    public void setDataSource(DataSource dataSource) {
        this.dataSource = dataSource;
    }

    public void insertItem(Item item){

        TransactionTemplate tt = new TransactionTemplate(jtaTransactionManager);
        tt.execute(new TransactionCallback<Object>(){
            @Override
            public Object doInTransaction(TransactionStatus arg0) {
                JdbcTemplate jt = new JdbcTemplate(dataSource);
                String sql = "insert into item(name,price) values ('aaaa',11);";
                jt.setDataSource(dataSource);
                jt.update(sql);
                sql = "insert into item(name,price) values ('aaaa',12);";
                jt.setDataSource(dataSource2);
                jt.update(sql);
                return null;
            }
        });
    }
} 
```

谁能告诉我问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:33:52.523

您必须使用 XA 数据源。JDBC 事务仅跨越单个数据源。要将事务范围扩展到多个数据源，必须使用 XA 数据源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-22T12:26:08.493

您可以实现 AbstractRoutingDataSource 来处理多个数据源，并且数据源连接将基于您的内部设置。

# android - Android Eclipse DDMS ThreadView Threadstatus 含义

> ID：12814522
> 
> 赞同：1
> 
> 时间：2012-10-10T07:52:01.513
> 
> 标签：android, eclipse, java-native-interface, adt, ddms

*我加载了 Android 示例 NotePad 并添加了一个名为TEST1*的标准 JavaThread 。

当我查看 NotePadApp 的线程（不执行本机 c/c++ 代码）时，我可以观察到以下内容：

![在此处输入图像描述](../Images/8330f0e13d50e3b0e66997aecfcd5f08.png)

**我的问题是：**

> 状态“ **native** ”真的意味着在这些线程中执行了本机 c/c++，还是 native 与 c/c++ 代码和 Android NDK/JNI 的东西没有联系？
> 
> 如果我加载并执行 c/c++ 代码，我的 Thread *TEST1*也会获得本地状态吗？

# r - 在 R 中对样本进行分类，并以不同的颜色绘制它们

> ID：12814523
> 
> 赞同：2
> 
> 时间：2012-10-10T07:52:01.917
> 
> 标签：r, colors, ggplot2, categorization

我是学习 R 的新手。我想知道如何将分类值分配给我作为数据框读入的观察结果。例如，我有来自 n 个样本的 m 个变量的数据，我想将一些样本分配为第 1 组，将一些样本分配为第 2 组，依此类推。另外，当我绘制它们时，如何以不同的颜色可视化不同的组？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T08:01:53.037

假设您有以下数据：

```
spam = data.frame(value = runif(100)) 
```

您可以像这样分配随机组成员身份：

```
spam[["group"]] = sample(c("group1", "group2"), nrow(spam), replace = TRUE)

> head(spam)
      value  group
1 0.1385715 group1
2 0.1785452 group1
3 0.7407510 group2
4 0.5867080 group1
5 0.1514461 group1
6 0.3009905 group1 
```

可以使用以下方法轻松绘制具有不同颜色的组`ggplot2`：

```
require(ggplot2)
ggplot(aes(x = 1:nrow(spam), y = value, color = group), data = spam) + 
  geom_point() 
```

![在此处输入图像描述](../Images/a2cb6d8827f98fdbcb3fe57bcfec29e0.png)

# html - 如何删除链接图像的灰色突出显示？

> ID：12814525
> 
> 赞同：0
> 
> 时间：2012-10-10T07:52:16.283
> 
> 标签：html

我在我的 MVC4 网站上添加了一个图像作为链接，当我将鼠标悬停在图像上时，会出现一个令人讨厌的灰色突出显示，有没有办法删除它？

下面是我的代码：

```
<div class="float-left">
  <p>  
    <a href="@Url.Action('Index')">
      <img alt="HomePage" style="verticalalign:middle;" height="30px" src="~/Images/formvalue_logo.png"> 
    </a> 
  </p>
</div> 
```

![在此处输入图像描述](../Images/9c0ab07c1b53cd141cba4fe05a911191.png)

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T07:55:42.210

尝试 -

```
.float-left img:hover, .float-left a:hover{
  background: none;
  background-color: transparent;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:53:43.427

```
a img, a img:hover { background-image: none; background-color: transparent; } 
```

可能会解决您的问题...如果没有，请尝试：

```
a:hover img, a img:hover { background-image: none; background-color: transparent; } 
```

如果这不起作用，那么背景在“a”标签上而不是图像上，你需要这样做：

```
a { background-image: none; background-color: transparent; } 
```

虽然这会影响页面上的每个链接，所以最好在链接上放置一个类（例如 myClass），并使用它来设置样式：

```
a.myClass, a.myClass img, a.myClass img:hover { background-image: none; background-colour: transparent; } 
```

# javascript - javascript中的生命游戏代码错误

> ID：12814538
> 
> 赞同：0
> 
> 时间：2012-10-10T07:52:53.907
> 
> 标签：javascript, html, html5-canvas, pixel-manipulation

我只是编程的初学者。在生命游戏的执行中，只有最初的模式正在显现。我在这里没有使用网格。但为此调整了矩形的大小。代码不整洁。请提出建议以使我的代码正常工作。

```
<!DOCTYPE html>
<html>
  <body>
    <canvas id="myCanvas" width="500" height="500" >
    </canvas>
    <script type="text/javascript">
    <!--
                    var canvas = document.getElementById("myCanvas");  
                    var ctx = canvas.getContext("2d");
        var width= canvas.width;
        var height = canvas.height;

      function initial(){
                    var ctx = canvas.getContext("2d");
        for(var i=0;i<width;i+=10){
          for(var j=0;j<height;j+=10){
            ctx.fillStyle="white";
            if(Math.random()<0.05){
              ctx.fillStyle="black";
            }
            ctx.fillRect(i,j,9,9);
          }
        }
      }

      function fut(){
        var imageData = ctx.getImageData(0,0,width, height);
        var data = imageData.data;
        var future = [];
        for(var y=0;y<height;y+=10){
          for(var x=0;x<width;x+=10){
            var dead = data[((width/10*y)+x)*4];
            var numb=0;
            numb = life_around(x,y);
            check_life(numb, dead,future);
          }
        }

            ctx.clearRect(0, 0, width, height);  
            //ctx.putImageData(imageData, 0, 0);  
        for(var i=0;i<width;i+=10){
          for(var j=0;j<height;j+=10){
            var black =future[(width/10*y)+x)*4];
            ctx.fillStyle="white";
            if(black == 0){
              ctx.fillStyle="black";
            }
            ctx.fillRect(i,j,9,9);
          }
        }

        setTimeout(fut,1000);
        function check_life(numb, dead,future){
          if (dead == 0){
            if((numb ==2) || (numb == 3)){
              future.push(0);
              future.push(0);
              future.push(0);
              future.push(255);
            }
          }
          if ((dead!=0)&&(numb == 3)){
            future.push(0);
                        future.push(0);
                        future.push(0);
                        future.push(255);
          } 
          if((dead!=0)&&(numb!=3)){
                        future.push(255);
                        future.push(255);
                        future.push(255);
                        future.push(255);
          } 
        }

        function life_around(x,y){
          for(var i=-10;i<20;i+=10){
            for(var j=-10;j<20;j+=10){
              if((i!=0) || (j!=0)){
                var data_index=((width/10*(y+i))+(x+j))*4;  
                if((data_index >= 0) && (data[data_index]==0)){
                    numb++;
                }
              }
            }
          }
          return numb;
        }
      }

    function run(){
        initial();
        fut();
    }
    //-->
    </script>
    <p>Game of life</p>

    <form action="">
    <input type="button" value="initial" onClick="initial()" >
    <input type="button" value="run" onClick="run()" >
    </form>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:04:25.583

第 43 行，添加了“（”：

```
 var black =future[((width/10*y)+x)*4]; 
```

# android - Android 在运行时更改选择器的颜色？

> ID：12814540
> 
> 赞同：0
> 
> 时间：2012-10-10T07:53:17.077
> 
> 标签：android, android-layout, layout

我想在运行时更改选择器的渐变颜色。我该如何编程？？

以下是选择器的 XML。

```
 <item android:state_pressed="true" >
        <shape>
            <gradient
                android:startColor="#ffff0000"
                android:endColor="#ffff00ff"
                android:angle="270" />
            <corners
                android:topLeftRadius="3dp"
                android:topRightRadius="3dp"/>
        </shape>
    </item>

    <item>        
        <shape>
            <gradient
                android:endColor="#ffff0d00"
                android:startColor="#ffff00d0"
                android:angle="270" />
            <corners
                android:radius="3dp" />
        </shape>
    </item>
</selector> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:05:51.013

试试这段代码

```
Drawable d = getResources().getDrawable(R.drawable.your_selector_file);
yourview.setImageDrawable(d); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:19:45.207

使用 GradientDrawable。例如`new GradientDrawable(Orientation.TOP_BOTTOM, new int[] { 0xffff0000, 0xffff00ff});`

# java - 如何模拟 TCP 层？

> ID：12814541
> 
> 赞同：0
> 
> 时间：2012-10-10T07:53:19.740
> 
> 标签：java, sockets, tcp

我正在开发一个客户端服务器套接字应用程序，我想为其模拟数据包数据传输。我想要一个模拟器来模拟丢弃的数据包数据、消息状态、计算数据包校验和等。是否可以模拟 TCP 层？如果可能的话，请给我一些链接。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T07:59:12.020

如果您想在一台机器上单独测试它，请使用 127.0.0.1 或 localhost 作为您连接的地址。然后，您的套接字将连接到本地计算机（可能是您的测试服务器）上正在侦听该端口的任何内容。

如果您出于某种原因想完全避免 TCP 并且只使用 TCP 的流方面，您可以用 PipedInputStream 和 PipedOutputStream 替换输入和输出流：

```
PipedInputStream pis = new PipedInputStream();
PipedOutputStream pos = new PipedOutputStream(pis);

// Use pis and pos in place of sock.getInputStream() and sock.getOutputStream(). 
```

# mongodb - MongoDB 集合作为 FIFO 堆栈

> ID：12814546
> 
> 赞同：2
> 
> 时间：2012-10-10T07:53:31.543
> 
> 标签：mongodb, stack, mongodb-.net-driver

我需要用 MongoDB 集合实现 FIFO 逻辑：

1.  从 MongoDB 集合中弹出第一个文档。
2.  将文档推送到 MongoDB 集合并将其作为最后一个文档放置。

集合中的文档除了自动生成的 _id (ObjectId) 之外没有任何索引。

我想知道，是否可以从集合中找到并删除第一个文档并保证推送和弹出操作将作为 FIFO 堆栈原子地执行？

我知道可以通过原子推送和弹出操作来处理文档内的数组，但主要问题是如果我将所有数据存储在 1 个文档的数组中，它的大小将超过 16MB（MongoDB 的最大允许大小文档）

提前致谢， 瓦伦丁

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T08:09:05.173

如果您正在从单台机器访问堆栈，则可以使用 findAndRemove 进行访问：

```
db.col.findAndModify({query:{}, sort:{i: -1}, remove:true}) 
```

这将返回删除的值并根据您的请求自动删除文档本身。其中“i”是按时间排序的字段（如果是 ObjectId，_id 有效）。如果您使用来自多个实例的 FIFO 堆栈/集合，您将必须确保以某种方式在所有实例中自动增加“i”值，否则您将不得不忍受集合是 FIFO-ish 而不是严格如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:59:53.347

因为文档_id 是文档创建日期的值，您可以对文档进行排序以检索第一个/最后一个创建的文档。要获取最后创建的文档，您可以执行以下操作：

```
db.collection.find().sort({ _id : -1 }).limit(1) 
```

然后，将文档添加到集合中会将其添加到集合末尾。

# spring - 多个目的地和消费者的 Spring 配置

> ID：12814547
> 
> 赞同：3
> 
> 时间：2012-10-10T07:53:32.587
> 
> 标签：spring, jms, containers, messaging

我正在使用一个带有一个目的地和一个消费者（消息侦听器）的消息侦听器容器：

```
<bean id="msgListenerContainer"

  class="org.springframework.jms.listener.DefaultMessageListenerContainer" 

  p:connectionFactory-ref="connectionFactory"

  p:destination-ref="destination"

  p:messageListener-ref="messageHandler"

  p:concurrentConsumers="10"

  p:maxConcurrentConsumers="50"

  p:receiveTimeout="5000"

  p:idleTaskExecutionLimit="10"

  p:idleConsumerLimit="5" /> 
```

如果我想要多个目的地，并且每个目的地都有一个消息侦听器，我应该怎么做？如果我想要一个目的地有多个听众，我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:42:35.520

1）您需要将spring应用程序上下文中的每个消息侦听器和生产者定义为bean。像这样的东西：

```
 <!-- MESSAGE LISTENER CONTAINER -->
<bean id="ListListenerContainer"
    class="org.springframework.jms.listener.DefaultMessageListenerContainer">
    <property name="messageListener" ref="messageListener" />
    <property name="connectionFactory" ref="qcf" />
    <property name="destinationResolver" ref="JmsDestinationResolver" />
    <property name="receiveTimeout" value="${jms-timeout}" />
    <property name="destinationName" value="${jms-list-topic}" />
    <property name="concurrency" value="1" />
    <property name="pubSubDomain" value="true" />
    <property name="subscriptionDurable" value="${jms-durable-flag}"/>
    <property name="durableSubscriptionName" value="${jms-list-durable-name}" />
    <property name="clientId" value="${jms-list-client-id}"/>
    <property name="sessionTransacted" value="true"/>
</bean> 

<bean id="publisher-1" class="com.stack.overflow.JmsPublisherImpl">
    <constructor-arg ref="jmsTemplate" />
</bean> 
```

2）然后您可以使用自动装配或在将处理消息的类上的应用上下文（见下文）中定义的相关生产者。即上面的Message Listener bean ref指向的类：

```
<bean id="messageListener" class="com.stack.overflow.MessageHandler">
        <property name="publisher" ref="publisher-1" />
</bean> 
```

这只是 1-2-1 映射。对于任何其他路由，您可以添加多个发布者（如上），然后由您决定如何实现所需的路由逻辑来决定哪个主题/队列应该发布从消费者 1 等收到的消息等

# css - text-align:justify 没有被应用

> ID：12814550
> 
> 赞同：1
> 
> 时间：2012-10-10T07:53:42.243
> 
> 标签：css, text-align, justify

我在 .html 文件中添加了以下代码示例：

```
<div Class="Frame" Style="left:85.8pt; top:198.5pt; width:415.5pt; height:43pt; position:absolute; background-color:rgb(201,201,201); overflow:hidden; border:0px Solid rgb(0,0,0);">
<p Style="text-align:justify; text-align-last:justify; padding-top:0pt; padding-bottom:0pt;">
<span Style="height:14.4pt; width:415.5pt;" class="ln">
<span Style="font-size:12pt; font-family:F0; word-spacing:5.09135818481445em; letter-spacing:0em; color: rgb(0,0,0);">Sample Text Here</span>
</span>
</p>
</div> 
```

但是 text-align:justify 没有得到应用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:36:17.653

`span`您应该在元素上应用 text-align 。

```
<span Style="font-size:12pt; font-family:F0; word-spacing:0.29135818481445em; letter-spacing:0em; color: rgb(0,0,0);text-align: justify;">text</span> 
```

您可以在以下位置看到它：http: [//jsfiddle.net/dkG3Z/2/](http://jsfiddle.net/dkG3Z/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T00:27:28.623

你有几个问题。第一段和跨度标签不会拉伸/跨越它们环绕内容的对象（页面或其他元素）。考虑这一点的最佳方法是用收缩包装或塑料包裹某物。您需要将文本对齐应用到 div 元素并在那里添加您的内容。如果您使用的是 css3，则可以使用以下内容：

```
div
    {
        text-align:justify;
        text-justify:inter-word;
    }
```

```
<!--and then your html would be something like-->
<div>here is some text</div>
```

当您重新缩放浏览器窗口时，您将看到 justify 是如何工作的。第二个属性`text-justify:inter-word`控制浏览器调整大小时文本在单词之间的缩放程度

# android - android:resources @xml 不可用

> ID：12814551
> 
> 赞同：1
> 
> 时间：2012-10-10T07:53:42.053
> 
> 标签：android, xml, android-widget

当我在元数据标记中使用 android:resource 并尝试获取未出现的 @xml 时。我已经包含了代码。请帮忙。我正在使用 API 级别 15 的目标和 API 14 作为最低要求

```
<receiver android:name=".widget" > 
   <intent-filter> 
    <action android:name="anddroid.appwidget.action.APPWIDGET_UPDATE" /> 
  </intent-filter> 
  <meta-data android:name="android.appwidget.provider" android:resource="here the @xml does not appear"> </meta-data> 
</receiver> 
```

* * *

# php - (Zend) Soap 服务器不返回结果

> ID：12814555
> 
> 赞同：0
> 
> 时间：2012-10-10T07:53:59.260
> 
> 标签：php, zend-framework, soap

我一直在尝试使用 Zend_Soap_Server 设置一个 Soap 服务器，但我似乎无法让它工作。
我尝试了几种不同的环境：linux vm 上的 nginx 和 apache、windows 上的 apache、php 5.3 和 php 5.4，都产生相同的结果。

使用 Zend_Soap_Autodiscover 它正确地生成了一个 wsdl。当我将该 wsdl 提供给 SoapClient 并在其上调用方法时，它不会返回响应。调用 SoapServer::handle() 后似乎 php 停止了。

这是服务器部分：

```
ini_set('soap.enable_wsdl_cache', 0);

require_once 'Zend/Soap/AutoDiscover.php';
require_once 'Zend/Soap/Server.php';

if (isset($_GET['wsdl'])) {
    handleWsdl();
} else {
    handleSoap();
}

function handleWsdl() {
    $autodiscover = new Zend_Soap_AutoDiscover();
    $autodiscover->addFunction('pi');
    $autodiscover->handle();
}

function handleSoap() {
    $soap = new Zend_Soap_Server('http://localhost/experiments/soap/server.php?wsdl');
    $soap->setWsdlCache(false);
    $soap->addFunction('pi');
    $soap->handle();
} 
```

这是客户端：

```
ini_set('soap.enable_wsdl_cache', 0);

$wsdl = 'http://localhost/experiments/soap/server.php?wsdl';
$client = new SoapClient($wsdl, array('trace' => 1));

$result = $client->pi();
var_dump($result); 
```

`$result`是`NULL`。_

我的想法不多了，希望有人能帮我解开这个谜。

顺便说一句：我也尝试过 SoapUI 来消费 web 服务，但结果是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T13:47:33.103

也许我发现了问题。请检查并报告您的投票是否正确。我已经改变了使用选项而不是主 uri 参数调用 Soap 的方式，如下所示：

```
try{
        // initialize SOAP client
        $options = array(
                'location'  => 'http://localhost/experiments/soap/server.php',
                'uri'       => 'http://localhost/experiments/soap/server.php'
        );

        $client = new Zend_Soap_Client(null, $options);
        $result = $client->pi();
        Zend_Debug::dump($result);

    }catch(SoapFault $e){
        Zend_Debug::dump($e);
        echo $e->getMessage();
    }
} 
```

如果您调用 WSDL，则客户端无法调用“pi()”方法。试试看，让我知道。

问候

# c# - 将属性从母版页传递到 aspx 页

> ID：12814556
> 
> 赞同：3
> 
> 时间：2012-10-10T07:54:04.050
> 
> 标签：c#, asp.net, properties, master-pages

我在 masterpage 中有一个属性，我在页面渲染事件中填充如下：

```
public string myproperty{get; set;}
protected override void OnInit(EventArgs e)
{
    base.OnInit(e);
    myproperty = "TEST";          
} 
```

在我的 aspx 页面上，我有一个`<%@ Reference VirtualPath="~/Site.Master" %>`页面 init 事件，我这样访问它：

```
protected override void OnInit(EventArgs e)
{
    base.OnInit(e);
    Site msPage = (Site)Page.Master;
    string t = msPage.myproperty ;
} 
```

我可以看到母版页上的属性有一个值，但在 aspx 页面上它始终为空。我做错了什么可以有人帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:18:34.733

我可以建议您阅读以下内容：

[http://dotnetbyexample.blogspot.be/2007/10/right-way-of-accessing-master-page.html](http://dotnetbyexample.blogspot.be/2007/10/right-way-of-accessing-master-page.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:55:53.020

该属性尚未初始化。

母版页实际上是作为页面中的一个控件来实现的，所以页面在母版页之前被初始化。

# delphi - 通过调用库 LIBRTMP Delphi 录制流

> ID：12814559
> 
> 赞同：-4
> 
> 时间：2012-10-10T07:54:12.240
> 
> 标签：delphi, delphi-xe2, rtmp

```
var
  MY_RTMP: RTMP;
  URL_str: AnsiString;
begin
  URL_str: = 'rtmp :/ / localhost: 1935/Video/test.stream';
  MY_RTMP: = RTMP_Alloc;
  RTMP_Init (MY_RTMP);
  RTMP_SetupURL (MY_RTMP, pcchar (URL_str));
  RTMP_Connect (MY_RTMP, 0);
  RTMP_ConnectStream (MY_RTMP, 0);
end; 
```

错误 RTMP_Connect (MY_RTMP, 0); - [DCC 错误] fMain.pas (36): E2033 实际和形式 var 参数的类型必须相同，提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:07:34.797

正如您在[上一个问题中链接](https://stackoverflow.com/q/12798181/960757)[的代码](http://pastebin.com/29XeZMvk)`RTMP_Connect`中定义的那样，它期望将声明的变量作为第二个参数传递。所以使用你的命名约定，你可以试试这个：`RTMPPacket`

```
var
  URL_str: AnsiString;
  MY_RTMP: RTMP;
  MY_RTMPPacket: RTMPPacket;
begin
  URL_str := 'rtmp://localhost:1935/Video/test.stream';
  MY_RTMP := RTMP_Alloc;
  RTMP_Init (MY_RTMP);
  RTMP_SetupURL (MY_RTMP, pcchar (URL_str));
  RTMP_Connect (MY_RTMP, MY_RTMPPacket);
  RTMP_ConnectStream (MY_RTMP, 0);
end; 
```

可能需要在调用`MY_RTMPPacket`之前进行初始化。`RTMP_Connect`但毫无疑问，您可以从图书馆的文档中进行操作。

# javascript - 从硬盘上传图像并将其插入到短信中

> ID：12814560
> 
> 赞同：1
> 
> 时间：2012-10-10T07:54:13.553
> 
> 标签：javascript, jquery, jsp, mongodb

我想知道如何在stackoverflow的“提问”页面上通过类比来制作这样的功能。我的目的：我有一个文本区域来输入消息，并在其上方有一个“添加图像”按钮。单击按钮时，我会看到带有“从硬盘驱动器中选择文件”按钮的对话框。然后我选择具有适当扩展名的图像并将图像插入到消息中。然后我发布消息，图像被视为文本中的图像。
那么图像如何存储在数据库中？
制作这种东西的最佳方法是什么？
提前致谢。
PS 我所有的消息都应该存储在 MongoDB 中。我的视图是 JSP 页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:15:16.177

Basicly there are 3 steps:

1.  Select image and upload it via HTML5 binary upload or iFrame uploader to your server.
2.  Once your server has received and handled the image, throw back the image path your browser.
3.  Display the image in your formular or wherever else - by now you should have the image url.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:59:29.620

创建一个文件夹，将其命名为例如；`user_uplaods`并将图像文件名存储在数据库中。您已经知道我们上传文件的路径，因此无需在数据库中存储路径。当您需要显示时，从数据库中获取文件名并附加路径以显示该文件名。

# c# - 使未安装字体的用户可以查看具有自定义字体的 SVG 文件

> ID：12814562
> 
> 赞同：1
> 
> 时间：2012-10-10T07:54:19.177
> 
> 标签：c#, javascript, xml, svg

我已经实现了[svg-edit](https://code.google.com/p/svg-edit/)的自定义版本，并在其上添加了[svg-font-loader](https://github.com/clintberry/svg-font-loader)。当用户编辑 SVG 文件时，自定义字体可以很好地工作，这要归功于 svg-font-loader（我只是在加载 SVG 字符串之前在编辑器上预先加载了必要的自定义字体）。

用户完成编辑后，我将新的 SVG 字符串保存到文件系统（使用`XDocument's` `Parse()`和`Save()`.

然后我需要在标签内向用户显示这个 SVG 文件`<img>`，但是除非用户将它们安装在他们的机器上，否则这些字体不起作用。

如何在保存到文件系统之前对 SVG 字符串（Base64 或？）进行编码，以便正确显示？我需要解析 SVG 字符串并且只对某些部分进行编码吗？有我可以使用的工具吗？

**编辑：**或者，如果我在服务器上安装字体，有没有办法在服务器端将 SVG 序列化为 PNG，然后显示这个？这行得通吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:07:53.063

您可以通过在 svg 中使用 webfonts 来做到这一点。当您保存 svg 时，只需使用自定义字体 base64 编码写出 @font-face 样式规则。

这是一个[例子](http://xn--dahlstrm-t4a.net/svg/fonts/webfont-datauri.svg)。

# java - 使用 Epson JavaPOS ADK 1.11.18.0 出现问题

> ID：12814563
> 
> 赞同：4
> 
> 时间：2012-10-10T07:54:23.830
> 
> 标签：java, epson, thermal-printer, javapos

我最近购买了一台 Epson TM-T20 打印机，我目前正在尝试构建一个使用它的 java 应用程序。我安装了打印机随附的 JavaPOS，并将其相关的 .jar 文件添加到我的构建路径中。尽管如此，当我尝试运行一些与它一起打包的示例示例时，我不断收到此错误。

> 线程“AWT-EventQueue-0”java.lang.UnsatisfiedLinkError 中的异常：java.library.path 中没有 jp_co_epson_upos_firm_FirmNativeAccess_1_11_0001

如果跟踪堆栈的其余部分有帮助

> 在 java.lang.ClassLoader.loadLibrary(Unknown Source) at java.lang.Runtime.loadLibrary0(Unknown Source) at java.lang.System.loadLibrary(Unknown Source) at jp.co.epson.upos.core.v1_11_0001.pntr .CommonPrinterService.(Unknown Source) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Unknown Source) at jp.co.epson.uposcommon.creator.EpsonJposServiceInstanceFactory.createInstance(Unknown Source) at jpos.loader.simple.SimpleServiceConnection.connect(Unknown Source) at jpos.BaseJposControl.open(Unknown Source) at Step1Frame.processWindowEvent(Step1Frame.java:79) at java.awt.Window.processEvent(Unknown Source) at java.awt .Component.dispatchEventImpl(Unknown Source) at java.awt.Container.dispatchEventImpl(Unknown Source) at java.awt.Window。dispatchEventImpl(Unknown Source) at java.awt.Component.dispatchEvent(Unknown Source) at java.awt.EventQueue.dispatchEventImpl(Unknown Source) at java.awt.EventQueue.access$200(Unknown Source) at java.awt.EventQueue$3。在 java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source) 在 java.security.AccessController.doPrivileged(Native Method) 在 java.security.AccessController.doPrivileged(Native Method) 在 java.security.ProtectionDomain$1 运行(Unknown Source) .doIntersectionPrivilege(Unknown Source) at java.awt.EventQueue$4.run(Unknown Source) at java.awt.EventQueue$4.run(Unknown Source) at java.security.AccessController.doPrivileged(Native Method) at java.security.ProtectionDomain $1.doIntersectionPrivilege(Unknown Source) at java.awt.EventQueue。dispatchEvent(Unknown Source) at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source) at java.awt.EventDispatchThread.pumpEvents(未知源）在 java.awt.EventDispatchThread.pumpEvents（未知源）在 java.awt.EventDispatchThread.run（未知源）

其他信息

*   操作系统：W7 x64
*   IDE：Eclipse Juno 服务版本 1 x64
*   安装最新的 JDK
*   JavaPOS 有一个名为 setupPOS 的应用程序。我还在此设置中添加了我的打印机

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:55:57.487

根据[java文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/UnsatisfiedLinkError.html)UnsatisfiedLinkError 异常是：

> 如果 Java 虚拟机找不到声明为本地的方法的适当本地语言定义，则抛出此异常。

根据您可以[在此处](https://stackoverflow.com/a/538900/856202)阅读的 SO 中的另一个问题，问题可能出在您的库路径中。尝试包括该选项

```
-Djava.library.path=./XXX 
```

其中 ./XXX 将是存储打印机驱动程序的相对或完整路径（jp_co_epson_upos_firm_FirmNativeAccess_1_11_0001.dll 或 .so 所在的目录）。

祝你好运！

# video - iOS6如何在后台支持airplay

> ID：12814574
> 
> 赞同：5
> 
> 时间：2012-10-10T07:55:39.433
> 
> 标签：video, background, ios6, airplay

我的应用程序应该通过 Airplay 将视频流式传输到 AppleTV，即使应用程序在后台也是如此。

在 iOS5 下它运行良好。在 iOS6 中它没有。

Xcode 在这行代码上给了我一个弃用的警告：

```
moviePlayerViewController.moviePlayer.useApplicationAudioSession = NO; 
```

这是我的应用程序不再正常运行的原因吗？iOS6中这段代码相当于什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-11T08:06:26.893

找到了解决办法：这个问题可以通过设置正确的AVAudioSessionCategory来解决

```
NSError *setCategoryError = nil;
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error: &setCategoryError]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T09:53:54.850

除了@murze 的解决方案，您还应该在 infoPlist 文件中设置键的值`App plays audio`，`Required background modes`如@ACBurk 建议的：[https ://stackoverflow.com/a/8807958/384864](https://stackoverflow.com/a/8807958/384864)

# postgresql - 将年、月、日、小时、分钟和秒字段组合到 SQL 中“TIMESTAMP”处的一列

> ID：12814575
> 
> 赞同：4
> 
> 时间：2012-10-10T07:55:41.187
> 
> 标签：postgresql, timestamp

我有一个表格，其中分别包含以下列：年、月、日、小时、分钟、秒

如何将它们组合为“TI​​MESTAMP”格式的单个列？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:02:28.277

```
 SELECT year || '-' || month  || '-' || day  || ' ' || hour  || ':' || minute  || ':' || second FROM table_name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T08:20:39.450

只需使用连接并转换为时间戳。这是一个例子：

```
CREATE TABLE test (year integer, month integer, day integer,
                   hour integer, min integer,   sec integer);

INSERT INTO  test (year, month, day, hour, min, sec)
           VALUES (2012,    10,  11,   01,  10,  35);

SELECT (year::text || '-' || month::text || '-' || day::text || ' '
     || hour::text || ':' || min::text   || ':' || sec::text)::timestamp
FROM test

"timestamp"
"10/11/2012 1:10:35 AM" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-03T07:08:47.817

从 Postgres 9.4 开始，这变得[容易多了](https://www.postgresql.org/docs/current/static/functions-datetime.html#FUNCTIONS-DATETIME-TABLE)：

```
select make_timestamp(year, month, day, hour, minute, second) as ts_value
from the_table; 
```

这假设所有列都是整数（除了`second`它也可以是双精度）

并创造一个`date`，使用`make_date()`，为一个`time`价值使用`make_time()`

# c# - 主菜单项旁边的复选标记和图像

> ID：12814584
> 
> 赞同：0
> 
> 时间：2012-10-10T07:56:17.190
> 
> 标签：c#, winforms, menu, usability

我希望能够在[mainMenu](http://msdn.microsoft.com/en-us/library/system.windows.forms.mainmenu.aspx)中的菜单项旁边显示图像和复选标记。目前，它要么是图像，要么是复选标记，但恐怕两者不可能同时进行。

![图片](../Images/c6c5dc7b2c2f3eaf8e4d56337ed373e0.png)

如果我添加`menuItemOption1.Checked = true;`，则检查该项目但不再显示图像：

![复选标记](../Images/781230a555969da4559c5e2ebb5a6e75.png)

我没有找到任何其他方式向用户显示某些菜单项已被选中（无法更改文本颜色），有人能想到任何方式吗？

（我想保持图像显示，因为我的菜单项名称不那么明显，并且图像是用户理解菜单的好方法。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:25:52.877

我通过简单地更改菜单文本解决了这个问题：

```
menuItemOption1.Text = "[✓] Option 1"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:24:06.463

您无法从设计器中执行此操作，但请尝试将其添加到您的代码中：

```
public Form1() {
  InitializeComponent();

  ((ToolStripDropDownMenu)optionsMenu.DropDown).ShowCheckMargin = true;
  ((ToolStripDropDownMenu)optionsMenu.DropDown).ShowImageMargin = true;
} 
```

# ruby-on-rails - 蜻蜓缓存位置

> ID：12814586
> 
> 赞同：0
> 
> 时间：2012-10-10T07:56:28.637
> 
> 标签：ruby-on-rails, caching, dragonfly-gem

有谁知道rails image gem蜻蜓缓存的位置。我不想在每次部署时都重新生成所有不同大小的图像版本。

我已经将原始文件保存在共享中并将它们符号链接到每个部署，但无法确定调整大小的版本在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:59:10.867

Dragonfly 不会将调整大小的图像存储在磁盘上，这是其吸引力的一部分；它会根据需要生成调整大小的图像版本。这是非常灵活的，但这意味着如果您总是从 Rails 进程中提供图像，您可能会受到严重的性能影响。您应该使用 Varnish 或 CDN 之类的东西来缓存它们以获得最佳性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T20:35:00.870

实际上 Dragonfly 确实提供了一个 to_file() 方法，所以你绝对可以缓存你的图像。如果您像我一样懒惰并想以简单的方式做到这一点，请查看方便的**[dragonfly_helper](https://github.com/gbarillot/dragonfly_helper)**

# python - 从 GPS 纪元到 python 日期时间对象的隐蔽二进制 64 位时间戳偏移

> ID：12814588
> 
> 赞同：4
> 
> 时间：2012-10-10T07:56:31.467
> 
> 标签：python, datetime, binary

我试图弄清楚我认为应该是一个 8 字节/64 位时间戳。

```
import datetime
GPS_EPOCH = datetime.datetime(1980, 1, 6)
t1 = "\x00\x00\xBF\x13\xDB\x79\xC0\x00" # expected: 2012-10-04 01:00:51.759
t2 = "\x00\x00\xC0\x13\xDB\x79\xC0\x00" # expected: 2012-10-04 01:00:51.760
t3 = "\x00\x00\xC2\x13\xDB\x79\xC0\x00" # expected: 2012-10-04 01:00:51.763
t4 = "\x00\x00\x80\xE7\xFB\x79\xC0\x00" # expected: 2012-10-04 01:45:40.960 
```

我相信由 GPS_EPOCH 产生的值`t1`并且`t2`应该从 GPS_EPOCH 偏移。但是，我似乎无法获得与预期结果日期时间相匹配的结果。

我一直在阅读，这似乎是合乎逻辑的，这将被分成两部分，一个可能是小数，另一个是秒（每个 4 个字节？）。但是，我还没有找到任何基于 GPS 纪元的时间戳格式的参考。

任何想法如何将其转化为预期结果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T02:52:23.197

我有它。你提供了足够的例子。

```
>>> t1 = "\x00\x00\xBF\x13\xDB\x79\xC0\x00" # expected: 2012-10-04 01:00:51.759
>>> import struct
>>> import datetime
>>> GPS_EPOCH = datetime.datetime(1980, 1, 6)
>>> t1_unpacked = struct.unpack('<q', t1)[0]
>>> t1_seconds = t1_unpacked / 52428800
>>> t1_us = int(round((t1_unpacked % 52428800) / 52.428800, 0))
>>> GPS_EPOCH + datetime.timedelta(seconds=t1_seconds, microseconds=t1_us)
datetime.datetime(2012, 10, 4, 1, 0, 51, 758750) 
```

把它们放在一起：

```
def gps_time(timestamp):
    unpacked = struct.unpack('<q', timestamp)[0]
    seconds = unpacked / 52428800
    microseconds = int(round((unpacked % 52428800) / 52.428800, 0))
    return GPS_EPOCH + datetime.timedelta(seconds=seconds, microseconds=microseconds)

>>> gps_time(t2)
datetime.datetime(2012, 10, 4, 1, 0, 51, 760000)
>>> gps_time(t3)
datetime.datetime(2012, 10, 4, 1, 0, 51, 762500)
>>> gps_time(t4)
datetime.datetime(2012, 10, 4, 1, 45, 40, 960000) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T09:04:44.567

[`struct`](http://docs.python.org/py3k/library/struct.html)您可以使用标准库的模块查看您的 8 个字节是否编码了 64 位整数：

```
>>> import struct
>>> number = struct.unpack('q', "\x00\x00\xBF\x13\xDB\x79\xC0\x00")
>>> "{:,}".format(number)
'54,177,177,364,529,152' 
```

这是一个相当大的整数！但这与您列出的时代有关吗？可能不是...

也许它不是一个整数。我有一个我一直在玩的原始 GPS 模块，它的数据以 NMEA 语句中的序列形式出现。您可以在网上找到[这些格式的信息。](http://aprs.gids.nl/nmea/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T09:00:06.247

**已编辑**

抱歉，**这不是解决方案**，如果其他人有更多时间深入接触，这只是一个**起点。**

第一次存储的“隐藏”号码应该是：

```
import datetime
from datetime import datetime, timedelta
GPS_EPOCH = datetime(1980, 1, 6)
date_1 = datetime(2012,10,04, 01,00,51,759)
d=(date_1 - GPS_EPOCH)
( d.days * 24 * 60 * 60 + d.seconds ) * 1000 + d.microseconds

---->   1.033.347.651.759   <---- 
```

但是您打开第一个数据十六进制代码得到的数字是：

```
struct.unpack('q', "\xBF\x13\xDB\x79\xC0\x00\x00\x00" )[0]

---->     826.678.121.407   <---- 
```

请注意，我将 \xBF 移动到最低有效数字位置。我这样做是因为在您的示例中 1 毫秒是 \xC0 - \xBF。第一个样本中的最低有效数字似乎是 \xBF。

然后，对于您的数据样本，公式可以是：

```
 milliseconds =  ( 1033347651759 - 826678121407 ) +  unpack_your_string_with_offset
 GPS_EPOCH + milliseconds 
```

用更少的数据进行测试...

```
>>> milliseconds =  ( 1033347651759 - 826678121407 ) + \ 
                    struct.unpack('q', "\xBF\x13\xDB\x79\xC0\x00\x00\x00" )[0]
>>> 
>>> GPS_EPOCH + timedelta( milliseconds = milliseconds)
datetime.datetime(2012, 10, 4, 1, 0, 51, 759000) 
```

请**发布更多数据样本**和预期结果以检查或推断新公式。

**我从@leon_matthews 采取了 unpack 方法：+1 ;)**

我希望一些[雷曼](http://www.imdb.com/title/tt0095953/)人能找到解决方案。我会按照你的回答。

# jquery - ajaxForm 没有回调

> ID：12814590
> 
> 赞同：0
> 
> 时间：2012-10-10T07:56:39.667
> 
> 标签：jquery, ajax, ajaxform

我知道你们中的很多人已经在数百篇文章中提到了这一点，但我没有看到任何人遇到像我这样的问题。

我正在尝试实现 AjaxForm 来上传文件。我阅读了所有的教程、文档、示例……一切。

HTML：

```
<form action="scripts/upload_script.php" method='post' id="upload_picture_form" enctype="multipart/form-data">
    File: <input type="file" name="upload" id="upload" /></p>
    <p><input type="submit" name='submit' value="Submit" /></p>
</form> 
```

查询：

```
$('#upload_picture_form').ajaxForm({
  success: function(){
    alert('success');
  },
  error: function(){
    alert('error');
  },
  resetForm:true
}); 
```

当我提交表单时，调用了 ajaxForm，在 fireBug 上我可以看到调用了 php 文件，我还可以看到在几个“毫秒”后响应是“200 OK”，我可以看到由发送的 HTML 响应的PHP。

问题是在响应没有触发“成功”或“错误”之后，表单没有重置......看起来没有回调。

谁能告诉我我做错了什么？来自 php 的“回声”是否必须采用某种特定格式？我正在向 jQuery 发送一个简单的“文件：image.jpg（7487 字节）”。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:40:16.110

`ajaxFrom`这是返回回调事件的小例子：

```
<form id="imageform" enctype="multipart/form-data" action="get_img.php" method="post">
 <tr>
   <td valign="top"><label>Select File</label> :</td>
   <td><input type="file" name="myfile" id="myfile" /> <br />
   <em>.jpeg, .jpg, .gif, .png, .bmp</em>
   </td>
 </tr>
</form>

<div id="result"></div> 
```

现在使用 jquery ：

```
$(function(){
$('#myfile').live({
    change: function(){
            $('#result').ajaxStart(function(){
                $(this).html('<div class="loader" />');
            });

            $('#imageform').ajaxForm({
                                 target: '#result', 
                                 success: function(){ // Call Back Function } 
                            }).submit();
        }
});
}); 
```

实现`ajaxFrom`此处的目的是在没有点击事件的情况下提交图像，并且在上面的 jquery 代码中，我已经附加了事件`Change`，表单会自动提交并调用`get_img.php`正在执行的操作。

在`target`您获得通过文件返回的内容`get_img.php`，
并在`success`您设置任何您想要的回调方法时。

# ios - 自定义 DatePicker-iOS

> ID：12814591
> 
> 赞同：1
> 
> 时间：2012-10-10T07:56:40.103
> 
> 标签：ios, datepicker

我从服务器获取我的 JSON 数据，服务器从放置在不同位置的传感器获取数据，收集早上 6 点到晚上 10 点之间的信息。我实现了 datepicker 来选择用户希望看到的任何特定时间。但是我想排除晚上 10 点到早上 6 点？我想以用户无法选择晚上 10 点到早上 6 点之间的任何时间的方式设计我的日期选择器。有没有办法实现这个目标？ ![在此处输入图像描述](../Images/af3a9ec228d3a29de162bb7534ab2c26.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:16:24.407

您需要使用`UIPickerView`, 通过将 4 个段作为日期选择器并通过数组填充它们

因为`UIDatePicker`不继承自`UIPickerView`（[它在我为您链接的Apple文档中“概述”的最后一句中说](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDatePicker_Class/Reference/UIDatePicker.html)）。

`UIPickerView`是什么使用数据源。

`UIDatePicker`**具有开发人员无法触及**的内置数据源。

因此，只需将自定义数据转储到 4 分段正常选择器视图。

# php - jQuery EasyUI 拖放树数据输出

> ID：12814593
> 
> 赞同：0
> 
> 时间：2012-10-10T07:56:40.577
> 
> 标签：php, javascript, jquery

我正在使用 jquery easyui 拖放树： http: [//www.jeasyui.com/demo/index.php](http://www.jeasyui.com/demo/index.php)。我可以成功地从数据库数据中生成树结构，并做一些进一步的拖放操作。

我希望在拖放时执行一些数据库更新操作，但是，我找不到有关节点结构的输出格式，而且我想知道我将应用一些 .post 代码来更新数据库的要点。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T01:26:47.997

```
onDrop: function(targetNode, source, point){  
       var targetId = $(target).tree('getNode', targetNode).id;  
       $.ajax({  
           url: '...',  
           type: 'post',  
           dataType: 'json',  
           data: {  
               id: source.id,  
               targetId: targetId,  
               point: point  
           }  
       });  
   } 
```

见[http://www.jeasyui.com/tutorial/tree/tree5.php](http://www.jeasyui.com/tutorial/tree/tree5.php)

# web-services - 在服务调用 apache 轴后获取 SOAP 响应

> ID：12814596
> 
> 赞同：2
> 
> 时间：2012-10-10T07:56:43.200
> 
> 标签：web-services, soap, axis

我有以下用于服务调用的代码，我想打印响应 SOAP 消息。我正在使用使用 apache 轴生成的存根。我怎样才能做到这一点？

```
service = new RateServiceLocator();
updateEndPoint(service);
port = service.getRateServicePort();
// This is the call to the web service passing in a RateRequest and
// returning a RateReply
RateReply reply = port.getRates(request); // Service call 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:00:56.423

我创建自己的日志处理程序，并配置 AXIS（通过 wsdd 文件）在每个传入请求/传出响应上调用它。

请看下一个链接：

[如何在 AXIS 1.x 中使用 Log4J SOAP 请求和响应进行日志记录？](https://stackoverflow.com/questions/12638631/how-can-i-log-with-log4j-soap-request-and-response-in-axis-1-x)

# ios - 两个依赖异步请求 iOS

> ID：12814597
> 
> 赞同：-2
> 
> 时间：2012-10-10T07:56:46.930
> 
> 标签：ios

我在 JSONParser 类中有两个请求（A&B）。B 依赖于 A 的响应。两个请求都返回 JSON 响应。使用这两个响应将创建一个对象 C，然后我想将 C 返回给视图控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:22:54.473

这是我的例子。这是非常初步的，但你可以弄清楚如何......你还需要添加错误检查。

```
typedef void(^ResultBlock)(id data);

- (NSDictionary *)dataFromURL:(NSString *)url {
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:url]];
    NSURLResponse *response;
    NSError *error;
    NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
    NSDictionary* document = [NSJSONSerialization
                              JSONObjectWithData:responseData //1
                              options:kNilOptions
                              error:&error];
    return document;
}

- (void)getSomeDataWithCompletion:(ResultBlock)completion {

    NSOperationQueue *q = [[NSOperationQueue alloc] init];
    [q addOperation:[NSBlockOperation blockOperationWithBlock: ^ {
        NSDictionary *response1 = [self dataFromURL:@"server/api1"];

        id result = nil;
        if (response1) {
            NSDictionary *response2 = [self dataFromURL:[NSString stringWithFormat:@"%@/%@", @"server/api2", [response1 objectForKey:@"someParameter"]]];
            result = [response2 objectForKey:@"iFindThisObject"];
        }
        completion(result);
    }]];
}

- (void)performRequest {
    [self getSomeDataWithCompletion:^(id data) {
        NSLog(@"Result %@", data);
    }];
} 
```

# android - 如何将整数数组分配给android中的Arrayadapter

> ID：12814602
> 
> 赞同：2
> 
> 时间：2012-10-10T07:57:07.280
> 
> 标签：android

**目的**

我有 3 个用于输入出生日期的微调器；所以我需要为此加载值，我需要添加 200 年，因此最好使用整数数组并将其分配给数组适配器并将其设置为微调器；我制定了以下代码，但无法将整数数组分配给数组适配器；这是实现这一点的最佳方法；如果有人可以提供帮助，我将不胜感激。

```
int yeararray[]=new int[300];

year=(Spinner)findViewById(gami.Numerology.R.id.yearinput);

for(int i=1800;i<=2020;i++)
{
    yeararray[i]=i;
}

ArrayAdapter <Integer> dataAdapter = new ArrayAdapter<Integer>( this,android.R.layout.simple_spinner_item,yeararray );

year.setAdapter(dataAdapter); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T08:00:44.500

试试这个代码：

```
ArrayAdapter <Integer> dataAdapter = new ArrayAdapter<Integer>( this,android.R.layout.simple_spinner_item,yeararray );
    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    year.setAdapter(dataAdapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-25T12:38:23.940

```
Integer[] int_numbers = new Integer[]{1,2,3,4,5,6,7,8,9,10};

Double[] double_numbers= new Double[]{1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0,9.0,10.0};

ArrayAdapter <Integer> dataAdapter = new ArrayAdapter<Integer>( this,android.R.layout.simple_spinner_item,int_numbers );

ArrayAdapter <Double> dataAdapter = new ArrayAdapter<Double>( this,android.R.layout.simple_spinner_item,double_numbers); 
```

# sql - 获取当前运行 SQL Server JOB 的持续时间

> ID：12814607
> 
> 赞同：0
> 
> 时间：2012-10-10T07:57:25.443
> 
> 标签：sql, sql-server-2008-r2, jobs

获取 SQL Server 中当前正在运行的作业的持续时间。

```
exec msdb..sp_help_job @execution_status = 1
exec xp_sqlagent_enum_jobs 1, garbage 
```

这些存储过程仅返回作业最后一次运行的“last_run_time”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:53:38.880

msdb.dbo.sysjobs master.dbo.sysprocesses

我通过加入上述表格并从流程中获取登录时间来实现这一结果。

# android - 为什么在这段代码中得到 windowManager$BadTokenException ？

> ID：12814610
> 
> 赞同：0
> 
> 时间：2012-10-10T07:57:33.427
> 
> 标签：android

```
public class ReviewActivity extends Activity {
     public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.reviewfrag_layout);
         mInflater = (LayoutInflater) ReviewActivity.this.getSystemService( 
                    LAYOUT_INFLATER_SERVICE); 
            ContextThemeWrapper mTheme = new ContextThemeWrapper(this, 
                    R.style.customDialog); 

            mView = mInflater.inflate(R.layout.custom_dialog, null); 
            // mDialog = new Dialog(this,0); // context, theme 

            mDialog = new Dialog(mTheme); 
            mDialog.requestWindowFeature(Window.FEATURE_NO_TITLE); 
            mDialog.setContentView(this.mView); 

               //if i comment below line  code runs otherwise give exception
           mDialog.show();
        }
} 
```

风格：

```
<style name="customDialog">
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowFrame">@null</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowIsFloating">false</item>
    <item name="android:windowIsTranslucent">false</item>
    <item name="android:windowContentOverlay">@android:color/transparent</item>
    <item name="android:backgroundDimEnabled">false</item> 
```

日志消息：10-10 13:20:01.184: E/AndroidRuntime(1417): FATAL EXCEPTION: main 10-10 13:20:01.184: E/AndroidRuntime(1417): android.view.WindowManager$BadTokenException: 无法添加窗口 -- 令牌 android.app.LocalActivityManager$LocalActivityRecord@411eeaa0 无效；您的活动正在运行吗？10-10 13:20:01.184: E/AndroidRuntime(1417): 在 android.view.ViewRootImpl.setView(ViewRootImpl.java:585) 10-10 13:20:01.184: E/AndroidRuntime(1417): 在 android. view.WindowManagerImpl.addView(WindowManagerImpl.java:326) 10-10 13:20:01.184: E/AndroidRuntime(1417): 在 android.view.WindowManagerImpl.addView(WindowManagerImpl.java:224) 10-10 13:20: 01.184: E/AndroidRuntime(1417): 在 android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:149) 10-10 13:20:01.184: E/AndroidRuntime(1417): 在 android.view。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T07:08:19.927

这是上下文问题。如果您从 Activity 组打开此活动，则不要使用 setContentView(R.layout.xxxx) 使用以下内容：

查看 viewToLoad = LayoutInflater.from(getParent()).inflate(R.layout.XXXX, null); this.setContentView(viewToLoad);

希望它会起作用

# jquery - CSS3 过渡以突出显示在 JQuery 中创建的新元素

> ID：12814612
> 
> 赞同：31
> 
> 时间：2012-10-10T07:57:55.017
> 
> 标签：jquery, css, css-transitions, transition

我想使用 CSS3 颜色过渡将高亮褪色效果（黄色到透明）应用于使用 JQuery 附加到标记的新元素。

CSS

```
#content div {
    background-color:transparent;
    -moz-transition:background-color 2s;
    -webkit-transition:background-color 2s;
    -o-transition:background-color 2s;
    transition:background-color 2s;
}

#content div.new {
    background-color:yellow;
} 
```

HTML

```
<div id="content"></div>
<a id="add-element" href="#">add new element</a> 
```

JS

```
$('#add-element').click(function() {
    var newElement = $('<div class="new">new element</div>');
    $('#content').append(newElement);
    newElement.removeClass('new');
}); 
```

当我单击链接时，将创建新元素。它的类是“新的”（背景颜色黄色），它被附加到 HTML 标记中。我应该能够立即删除“新”类以触发背景颜色转换为透明（或任何其他颜色）。我显然做错了，因为新元素的背景颜色立即显示为透明，没有过渡效果。我知道我可以在 JQuery UI 中做到这一点，但我想使用 CSS3 过渡。

jsfiddle在这里：

[http://jsfiddle.net/paulaner/fvv5q/](http://jsfiddle.net/paulaner/fvv5q/)

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-06-01T21:23:27.403

我能够让它与 css3 动画一起使用。只需将`highlight`类应用于新元素：

```
$('#add-element').click(function() {
  $('<div class="highlight">new element</div>').appendTo('#content');
});
```

```
@keyframes yellow-fade {
  0% {
    background: yellow;
  }
  100% {
    background: none;
  }
}

.highlight {
  animation: yellow-fade 2s ease-in 1;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<button id="add-element">Add element</button>
<div id="content"></div>
```

我在 IE 10、Chrome、Safari 和最新的 FF 中进行了测试，它在那里工作。可能无法在 IE 9 及以下版本中运行...

[https://jsfiddle.net/nprather/WKSrV/3/](https://jsfiddle.net/nprather/WKSrV/3/)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-10-10T08:21:17.223

您的代码几乎是完美的。你只需要触发一些东西才能使过渡工作。这可以通过在脚本中添加 1 行代码来完成。

```
$('#add-element').click(function() {
    var newElement = $('<div class="new">new element</div>');
    $('#content').append(newElement);
    // trigger on focus on newly created div
    newElement.focus();

    newElement.removeClass('new');
}); 
```

[http://jsfiddle.net/UXfqd/](http://jsfiddle.net/UXfqd/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-10T08:11:44.507

这是一个丑陋的黑客，但它似乎工作。我确信有更好的方法。

```
$('#add-element').click(function() {
    var newElement = $('<div class="new">new element</div>');
    $('#content').append(newElement);
    setTimeout(function(){
        newElement.removeClass('new');
    },0);
}); 
```

[http://jsfiddle.net/fvv5q/22/](http://jsfiddle.net/fvv5q/22/)

# android - 使用索引在网格布局中导航，无需上/下按键

> ID：12814614
> 
> 赞同：1
> 
> 时间：2012-10-10T07:58:01.750
> 
> 标签：android, android-layout, android-view, android-gridlayout

如果我们有 5 个页面，我如何使用 index.like 视图寻呼机在 gridlayout 中导航，setcurrentpage(3) 将直接从一个页面跳转到另一个页面。像这样在 gridlayout 中我有一个 4*9 项。当前突出显示的项目是 5，如果我想从第 5 项直接移动到第 20 项，我该如何在不使用向上/向下键的情况下执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:12:53.700

*   如果您知道子索引，请执行 getChildAt(index).requestFocus();

*   如果您有视图标签，请执行 findViewWithTag(tag).requestFocus();

# c# - 使用流利的api在实体框架中拆分表继承

> ID：12814617
> 
> 赞同：2
> 
> 时间：2012-10-10T07:58:22.087
> 
> 标签：c#, entity-framework, inheritance

我有 2 个 sql 表，如下所示：

Message
.MessageID
.MessageType
.Recipient
.Source
.ProcessedOn
.Result
.SMS_Text
.Email_Subject
.Email_Body

EmailAttachment
.EmailAttachmentID
.MessageID
.Filename

我希望将消息表（使用EF fluent api映射）拆分为两个都继承自基类 Message 的单独类（EmailMessage 和 SMSMessage）。MessageType 值将定义要使用的类。这些类如下所示：

Message（原则上是接口，不被实例化）
.MessageID
.Recipient
.Source
.ProcessedOn
.Result

EmailMessage
.Subject .Body
.Attachments EmailAttachment .EmailAttachmentID .EmailMessage .Filename SMSMessage .SMSText 关于如何使用 EF fluent api 映射实现这一点的任何想法？

# android - JSON解析来自服务器的无效响应

> ID：12814619
> 
> 赞同：1
> 
> 时间：2012-10-10T07:58:23.380
> 
> 标签：android, json

我向服务器发出请求他应该返回 JSON，但结果我得到“404”并且......

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Service</title>
  </head>
  <body>
    <div id="content">
      <p class="heading1">Service</p>
      <p>Endpoint not found.</p>
    </div>
  </body>
</html> 
```

我的请求Json：

```
public JSONObject getJSONFromUrl() {

    // Making HTTP request
    try {

        // defaultHttpClient
        DefaultHttpClient httpClient = getNewHttpClient();

        String auth = android.util.Base64.encodeToString(
                ("estafeta@62e12548-0a68-4999-960b-a3bb3c44675c:11111")
                        .getBytes("UTF-8"), android.util.Base64.NO_WRAP);

        HttpGet get = new HttpGet(
                "https://test2.estafeta.org/mobileestafeta/MobileSurveyReportsService.svc/LoadSurveyTasks?startRowVersion=AAAAAAAAAAA=&count=500");

        get.addHeader("Authorization", "Basic " + auth);

        HttpResponse httpResponse = httpClient.execute(get);
        //httpResponse.getStatusLine().getStatusCode()
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {

        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

} 
```

我需要得到我做错的JSON？帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:01:16.110

可能您忘记设置要接收的内容类型 `get.setHeader("Content-type", "application/json; charset=utf-8");`

# java - 从 html 字符串中删除一些段落

> ID：12814620
> 
> 赞同：0
> 
> 时间：2012-10-10T07:58:24.473
> 
> 标签：java, android, regex

我有一个字符串，它是一系列 html 段落，我想删除（使用 String 的方法 replaceAll）包含单词“UPDATE”的段落，通常它们是这种形式：

```
<p><a href="blabla">(UPDATE)<a></p> 
```

但可能还有其他，例如一些强大的部分。由于普通段落几乎不可能包含确切的单词“UPDATE”，我只想找到一个正则表达式，它可以找到包含该单词的段落并将其删除

```
replaceAll("regex",""); 
```

你能帮我找到“正则表达式”部分吗？我对正则表达式一点也不擅长......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T08:14:48.513

我想这就是你要找的。您需要使用 .*? 而不是 .* 因为这会迫使搜索变得懒惰而不是贪婪。

```
public class Test {

    public static void main(String[] args) {
        String haystack = "<p><a href='bla'>(UPDATE)</a></p><p><a href='bla'><strong>(UPDATE)</strong></a></p><p><a href='bla'><strong>(Non uppercase 'update' to show this match is exact)</strong></a></p><p><a href='bla'><strong>This does not contain the word you're looking for</strong></a></p>";
        String regex = "<p>.*?(UPDATE).*?</p>";

        String result = haystack.replaceAll(regex, "");
        System.out.println("Result: " + result);
    }
} 
```

# php - 在线游戏，或者比 ajax 更快的东西来发送/接收数据

> ID：12814624
> 
> 赞同：11
> 
> 时间：2012-10-10T07:58:56.470
> 
> 标签：php, javascript, ajax, online-game

我尽量缩短这个。

到目前为止我所做的：我拥有的游戏将使用 JavaScript 运行，使用`setTimeout`or `setInterval`. 这不是闪光或任何特别的东西。到目前为止，我所做的就像一个测试运行（这样你可以更好地理解），几乎是循环 Ajax 以尽可能快地向 PHP 页面发送请求，然后 PHP`$_GET`从请求中读取 url，然后 PHP 用 编辑一个名为 p1.html 的文件`$_GET`，它只是玩家 1 的 x 和 y 轴坐标。所以在玩家 2 的浏览器中，它和我上面所说的差不多，现在当它收到 Ajax 请求时，它会收到玩家 1 的坐标。所以 JavaScript 做它所做的，并在玩家 2 的浏览器上移动玩家 1。那是我自己做的，

这么说，这就是我目前所做的，但如果我想要一个在线格斗游戏或实时横向滚动游戏，这还不够快。所以这就是我需要帮助的地方。我知道 w3schools.com 上的很多东西，但我就是不知道如何完成这项工作。大概就是这样。我只需要浏览器 1，将数据发送到浏览器 2，类似于“1,100,200”或实际上更长一点，并让浏览器 2 将该数据作为 JavaScript 中的变量读取（任何类似`x="received data";`的），仅此而已。JavaScript 将完成其余的工作。

我确信我可以自己编程我需要的一切，但是对于从 A 点到 B 点每秒发送 50 次数据，我对此一无所知。连名字都没有。最后，网址和示例会非常好（更清楚）。特别是如果它已经在 w3schools.com 上（带有示例）而我只是错过了它。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-10T08:01:24.337

你可以使用[websocket](http://en.wikipedia.org/wiki/WebSocket)

> WebSockets（优于 AJAX）的优势基本上是 HTTP 开销更少。建立连接后，所有未来的消息传递都通过套接字而不是新的 HTTP 请求/响应调用。因此，您会假设 WebSockets 每单位时间可以发送和接收更多的消息。事实证明这是真的。但是，一旦您将延迟添加到混合中，就会有一个非常痛苦的现实。
> 
> WebSockets 比 AJAX 快大约 10-20%

[来源](http://www.peterbe.com/plog/are-websockets-faster-than-ajax)

当我们将 ajax 与 php 一起使用时会发生什么

1.  它打开到 apache 服务器的新连接
2.  比 apache 寻找 php 脚本并启动它
3.  现在 php 脚本将连接到服务器进行查询并返回结果。

但是 websocket 所做的是消除了 2 个连接过程，并且只会向服务器发送一条消息。服务器已经连接到 sql server

另一个好处是客户端和服务器之间的连接保持打开状态，服务器可以向客户端发送消息。在ajax中你每次都需要调用

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-10T08:00:59.250

答案很简单：使用[websockets](http://en.wikipedia.org/wiki/WebSocket)。它们允许在两个方向上立即推送数据，以实现看似即时的交互。它们消除了从缓慢而繁重的客户端（包括服务器）提取数据的需要。请注意，这是[我最喜欢的游戏中](http://stackoverflow.com)用于通知推送的解决方案。

您可能会对[PHP 上的 websockets 的介绍](http://net.tutsplus.com/tutorials/javascript-ajax/start-using-html5-websockets-today/)感兴趣。但请注意，对于长连接处理和实时游戏（您可能更喜欢 Go、node.js、java 等），PHP 确实不是最有效的解决方案。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-10T08:09:27.673

我同意其他海报：websockets 是您应该使用的技术。唯一的缺点是 Internet Explorer 版本 10 之前不支持 Websockets，目前仅适用于 Windows 8，并且不适用于 Windows 7 之前的任何 Windows 版本。当你想在 Vista 和 XP 上支持 IE 用户时，您需要使用 AJAX 或 Flash 进行后备。

但是您可能会遇到另一个问题：

> 用于将数据从 A 点发送到 B 点，例如每秒 50 次

当您需要频繁发送数据时，您的协议似乎有问题。您是否计划以 20 毫秒的固定间隔更新玩家位置，即使它们没有变化（玩家站立）或以恒定速率变化（玩家朝一个方向行走）？我建议您不要转移位置，而只改变移动方向（开始向左移动，在 X:Y 处停止向左移动等），您可以通过这种方式保护大量带宽。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-10T08:24:57.603

当架构正确时，[长轮询](https://stackoverflow.com/q/333664/1081234)ajax 请求可以很好地用于非实时通信。话虽如此，长轮询更像是一种“黑客”；如果您正在寻找具有所需连接性的东西，那么[您](https://developer.mozilla.org/en-US/docs/WebSockets)绝对应该选择*websockets ：*

> WebSockets 是一种先进的技术，可以在用户的​​浏览器和服务器之间打开交互式通信会话。使用此 API，您可以向服务器发送消息并接收事件驱动的响应，而无需轮询服务器以获取回复。

查看[browserquest以获取灵感 - Mozilla 的优秀人员](http://browserquest.mozilla.org/)[在 github 上](https://github.com/mozilla/BrowserQuest)提供了它的全部源代码！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-10T13:31:18.027

试试这个：[http ://socket.io/](http://socket.io/)

它可以做 websockets、长轮询、flash sockets 等等！他们声称它支持 IE 5.5。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-18T00:09:17.113

Websockets 很棒，并且经常被提及，但是 Android 设备和 16% 的浏览器不支持 websockets ( [CanIUse.com](http://caniuse.com/#search=websockets) )。许多服务器安装也不支持 websocket，包括共享 LAMP 设置。如果你有一个共享主机或者如果你想获得广泛的支持，websockets 可能不是一个有效的选择。

长轮询是 websocket 的唯一有效替代方案。它有更广泛的支持（它应该适用于几乎所有的服务器和客户端），但它在不能很好地处理许多同时连接的服务器上（比如 Apache）有一个明显的缺点。另一个缺点是，无论连接了多少用户，您都必须执行许多常规数据库查询（可能每秒几次）。使用共享内存，就像`shm_attach()`在 PHP 中一样，可以减轻这个负担。当服务器脚本监视新消息时，一旦发现它们就会立即通过打开的连接发送。客户端将收到消息，然后使用新请求重新启动长连接。

如果您不能使用 websockets，很可能就是这种情况，您可以使用长短轮询混合（见下文）。使用非常长的轮询是不必要的，并且会占用太多资源。在持续连接大约 10 或 15 秒后，您应该将其关闭并切换到老式的短轮询，这只是重复的常规 GET 请求。

此 jQuery 代码未经测试，但您明白了：

```
function longpoll(lastid) {
    /* Start recursive long polling. The server script must stay
    connected for the 15 seconds that the client waits for a response.
    This can be done with a `while()` loop in PHP. */

    console.log("Long polling started...");

    if (typeof lastid == 'undefined') {
        lastid = 0;
    }

    //long polling...
    setTimeout(function () {
        $.ajax({
            url: "stream.php?long=1&lastid=" + lastid, success: function (payload) {
                if (payload.status == "result") {
                    //result isn't an error. lastid is used as bookmark.
                    console.log("Long poll Msg: " + payload.lastid + ": " + payload.msg);
                    longpoll(lastid); //Call the next poll recursively
                } else if (payload.status == "error") {
                    console.log("Long poll error.");
                } else {
                    console.log("Long poll no results.");
                }

                /* Now, we haven't had a message in 15 seconds. Rather than 
                reconnect by calling poll() again, just start short polling 
                by repeatedly doing an normal AJAX GET request */

                shortpoll(lastid); //start short polling after 15 seconds

            }, dataType: "json"
        });            
    }, 15000); //keep connection open for 15 seconds
};

function shortpoll(lastid) {

    console.log("Short polling started.");

    //short polling...
    var delay = 500; //start with half-second intervals
    setInterval(function () {
        console.log("setinterval started.");
        $.ajax({
            url: "stream.php?long=0&lastid=" + lastid, success: function (payload) {
                if (payload.status == "result") {
                    console.log(payload.lastid + ": " + payload.msg);
                    longpoll(lastid); //Call the next poll recursively
                } else if (payload.status == "error") {
                    console.log("Short poll error.");
                } else {
                    console.log("Short poll. No result.");
                }
            }, dataType: "json"
        });
        delay = Math.min(delay + 10, 20000) //increment but don't go over 20 seconds    
    }, delay);
} 
```

短轮询减少了并发连接的数量，而是使用重复轮询（请求）。与往常一样，短轮询的缺点是延迟获取新消息。但是，这类似于现实生活，所以应该没什么大不了的。（如果有人在过去一周内没有给你打电话，他们不太可能在接下来的五分钟内给你打电话，所以每五分钟检查一次你的手机是很愚蠢的。）

# wordpress - Wordpress 数字永久链接而不是标题词

> ID：12814627
> 
> 赞同：0
> 
> 时间：2012-10-10T07:59:05.910
> 
> 标签：wordpress

我将我的 wordpress 永久链接配置为`year/month/postname`格式化，并`.htaccess`使用 WP 提供给我的代码更新了我的文件。

现在，当我写帖子标题并单击标题框以获取永久链接时，我猜不是`blog.com/2012/10/my-blog-title`我得到`blog.com/2012/10/12345`的 12345 始终是一个随机显示的 5 位数字？

如何获得带有帖子标题的永久链接？

我的 .htaccess 文件：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /my_blog/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /my_blog/index.php [L]
</IfModule> 
```

# android - 如何停止异步线程？

> ID：12814638
> 
> 赞同：1
> 
> 时间：2012-10-10T07:59:26.020
> 
> 标签：android, android-asynctask

我正在使用异步任务。我使用这个变量初始化我的任务

```
 fhr_alg = new AddStringTask(); 
```

我想使用开始和停止按钮，这样当我停止它时，线程会取消，并在单击开始按钮时启动一个新线程。我用

```
 fhr_alg.cancel(true); 
```

用于取消任务。在我的开始按钮的 onclick 事件中，当我写

```
 fhr_alg.execute; 
```

它给出了一个错误，表明任务仍在运行。我在 doInBackground 中使用了 isCancelled() 但没有任何反应。我需要帮助来解决这个问题。

这是我的代码或开始和停止按钮

```
 k.setOnClickListener(new OnClickListener() {

         public void onClick(View arg0) {

            if(task!=null)
            {
                task.cancel(true);
            }
                                                              try {
                w.clearView();

            } catch (Exception e) {
                // TODO: handle exception
            }

         }
         });

     j.setOnClickListener(new OnClickListener() {

         public void onClick(View arg0) {   

             flag = true;

                Thread tt = new Thread()
                {
                    public void run()
                    {
                        try{
                            sleep(100);
                        }catch(Exception e){

                        }finally{

                            AddStringTask task = new AddStringTask();
                            task.execute();                 
                        }
                    }
                };

                tt.start(); 

                 int m=112;
                 String s=""+m;         
                 if(flag)
                 w.loadUrl("javascript:callJS(\""+s+"\")"); 
                 } 
```

它给了我一个错误说

```
 Can't create handler inside thread that has not called Looper.prepare() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:52:21.650

我认为问题在于您调用 task.canle(true); 在侦听器内部。

尝试在您的 Activity 类中创建一个子类，例如

```
public void cancleTask(){
    task.canle(true);
} 
```

并在你的监听器中调用这个子。

# vim - 在vim中显示单个空格不可见字符

> ID：12814647
> 
> 赞同：5
> 
> 时间：2012-10-10T08:00:38.640
> 
> 标签：vim

我添加`set listchars=tab:»\,trail:·,extends:#,nbsp:.`了显示不可见字符。

它适用于制表符扩展但不适用于 nbsp，我已经阅读了帮助`:set listchars`并尝试了那里给出的示例，但我仍然没有得到单个空格字符的点字符。

我还需要为此做些什么。任何建议。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T08:17:56.873

请注意反斜杠。

```
set listchars=tab:>\\,trail:·,extends:#,nbsp:. 
```

这按预期工作。但是，应该注意它`nbsp`代表不可破坏的空间（字符 0xA0）。它与普通的空格（字符 0x20）不同，在大多数情况下，我们必须`Ctrl-v x a 0`在插入模式下才能键入它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-06-07T22:58:37.020

较新版本的 vim 也可以显示常规空格。（在 vim 7.4.1689 上确认）。

```
:set list
:set listchars=tab:→\ ,space:·,nbsp:␣,trail:•,eol:¶,precedes:«,extends:» 
```

# c - 使用 c 控制键盘 LED 灯

> ID：12814649
> 
> 赞同：7
> 
> 时间：2012-10-10T08:00:44.337
> 
> 标签：c

我想创建一个程序来使用键盘 LED 闪光灯来表示二进制数。我不知道如何开始使用 C 语言控制那些 LED 灯？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:15:51.230

对于 Linux，这会很有帮助

[定居点](http://linux.die.net/man/1/setleds)

更全面的内部结构和几个命令行实用程序描述

[键盘和控制台 - HowTo.pdf](http://www.tldp.org/HOWTO/pdf/Keyboard-and-Console-HOWTO.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:11:06.497

对于窗户：

> 因为 SetKeyboardState 函数改变的是调用线程的输入状态，而不是系统的全局输入状态，所以应用程序不能使用 SetKeyboardState 来设置键盘上的 NUM LOCK、CAPS LOCK 或 SCROLL LOCK（或日文 KANA）指示灯. 可以使用 SendInput 设置或清除这些以模拟击键。

请参阅[Windows API 参考](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646314%28v=vs.85%29.aspx)

# objective-c - 如何创建 UINavigationController 的实例？

> ID：12814652
> 
> 赞同：0
> 
> 时间：2012-10-10T08:00:55.130
> 
> 标签：objective-c, uinavigationcontroller, single-instance, appdelegate

在我的第一个 iphone 应用程序中，我有一个 NavigationController。如何在 AppDelegate 中定义 UINavigationController 的实例并将其设置为我的默认导航控制器？

在.h中：

```
@interface DefaultTableAppDelegate : NSObject <UIApplicationDelegate, UITabBarControllerDelegate>
{
    //...
    UINavigationController *myNavigationController;
}

@property (strong, nonatomic) UIWindow *window;
@property (nonatomic, strong) UINavigationController *myNavigationController;
//...
@end 
```

以 .m 为单位：

```
#import "DefaultTableAppDelegate.h"
#import "SHKConfiguration.h"
#import "SKCustomConfigurator.h"
#import "DefaultTableViewController.h"

@implementation DefaultTableAppDelegate 

@synthesize window = _window;
@synthesize myNavigationController = _myNavigationController;
//...

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    //...

    DefaultTableViewController *main = [[DefaultTableViewController alloc]init];

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    myNavigationController = [[UINavigationController alloc]initWithRootViewController:main];

    myNavigationController.navigationBar.hidden = YES;
    [self.window addSubview:myNavigationController.view];

    self.window.rootViewController=myNavigationController;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

UINavigationItem 的 CustomNavigationItem 子类：

在.h中：

```
#import <UIKit/UIKit.h>
#import "DefaultTableAppDelegate.h"

@interface CustomNavigationItem : UINavigationItem
{
    //...
    DefaultTableAppDelegate *myDelegate;
} 
@end 
```

以 .m 为单位：

```
#import "CustomNavigationItem.h"
#import "DefaultTableViewController.h"

@implementation CustomNavigationItem
//...

-(IBAction)actionApply:(id)sender
{
    myDelegate = [[UIApplication sharedApplication] delegate];
    //...
    [myDelegate.myNavigationController popViewControllerAnimated:YES];  
}

@end 
```

这是我的故事板的截图：http: [//postimage.org/image/sv6elwmcz/](http://postimage.org/image/sv6elwmcz/)

TabBarController 的 NavigationItem 的类设置为 CustomNavigationItem，并且 NavigationItem 的右键具有 -(IBAction)actionApply:(id)sender 动作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:06:52.010

尝试这个：

```
#import "AppDelegate.h"
#import "MainViewController.h" //Or whatever you named your viewController

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
   MainViewController *main = [[MainViewController alloc]init];

   self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];// Override point for customization after application launch.
UINavigationController *nav = [[UINavigationController alloc]initWithRootViewController:main];

nav.navigationBar.hidden = YES;
 [self.window addSubview:nav.view];

self.window.rootViewController=nav; 
[self.window makeKeyAndVisible];

return YES; 
```

}

**编辑** 不使用 appDelegate 这样做：

```
-(IBAction)actionApply:(id)sender
{
  [self.navigationController popViewControllerAnimated:YES];
} 
```

并`UINavigationController *myNavigationController;` 从您的`appDelegate.h`

# hadoop - 测试运行后增加 HBASE DB 大小

> ID：12814654
> 
> 赞同：1
> 
> 时间：2012-10-10T08:00:55.967
> 
> 标签：hadoop, hbase, cluster-computing, hdfs

我使用的是 HDFS+HBASE。我创建了一个数据库并运行了 2 个小时的测试。我想在测试运行后检查数据库大小的增加。我尝试使用以下方法进行读数：

```
hadoop dfsadmin -report and
hadoop fs -dus /hbase. 
```

还尝试使用检查磁盘大小

```
du -sk /HADOOP. 
```

观察是在测试运行后，大小显示减少而不是增加。

正在使用的版本：Hadoop 1.0.0、HBase 0.90.5、ZooKeeper 3.3.4。
列族的压缩是 NONE。

请帮助获得正确的过程来计算由于测试而增加的数据库大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T18:31:32.290

Lakshmi，650K 对于 HBase / Hadoop 来说不算什么。默认起始块大小为 128M（如果我没有错过一些重大更改），因此在创建表后您应该看不到任何重要的内容。实际上，您的表（HStore 文件）应位于下方`/hbase/<table-name>`，区域内容位于下方`/hbase/<table-name>/<region>`（您可以通过 HBase Web UI 查看区域信息）。

如果你真的需要检查一些东西，加载至少超过 128M 的数据。我通常至少做 4G DB 来测试区域分配。当前默认（从 HBase 0.94 开始）区域分割策略从填充的第一个 128M 开始分割区域，然后这种情况越来越少。

# python - 机器人不停

> ID：12814656
> 
> 赞同：0
> 
> 时间：2012-10-10T08:00:59.183
> 
> 标签：python, nxt, lego, nxt-python

附件是一个将机器人移动到特定距离的代码，但是我希望它在接近和障碍物时停止移动。我该怎么做呢？我尝试添加超声波来检测障碍物。我正在使用 nxt-python

```
def move_to(brick, bx, by ,rx, ry):
    wheel_circumference = (pi * wheel_diameter)
    distance_per_turn = (wheel_circumference / 360)
    distance = math.sqrt((math.pow((bx - rx),2)) + (math.pow((by - ry),2)))
    rotations = ((distance / distance_per_turn) / 360)
    tacho_units = (round((rotations) * 360))
    both.turn(power=power, tacho_units=tacho_units, brake=False)
    if(ultrasonic.get_sample() < 20):
        both.brake()

def activate2():

    update_coordinates()
    bx,by = get_ballxy()
    rx,ry,a = get_robotxya()

    if(ultrasonic.get_sample() < 15):
        both.turn(power=-65, tacho_units=380, brake= False)

    time.sleep(1)
    turn_to(brick,bx,by,rx,ry,a)
    time.sleep(0.5)
    move_to(brick,bx,by,rx,ry)
    kickBall(brick,by,ry)

Thread(target=update_coordinates).start()
connect()
update_coordinates()
while True:
    #activate()
    activate2()
    time.sleep(3) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:16:12.223

您的问题是您在机器人移动后*仅检查一次障碍物。*

```
both.turn(power=power, tacho_units=tacho_units, brake=False)
# the turn function blocks, so this check comes to late
if(ultrasonic.get_sample() < 20): 
    both.brake() 
```

您应该在另一个线程中不断检查障碍物。

* * *

让事情变得更容易，你可以稍微调整一下 nxc-python。

将in的`turn`方法更改为`BaseMotor``motor.py`

```
def turn(self, power, tacho_units, brake=True, timeout=1, emulate=True, cancel_when=None): 
```

并将以下代码添加到`while`该方法的循环中：

```
 while True:

            # these lines are new
            if cancel_when and cancel_when():
                break 
```

然后您可以轻松地将代码编写为：

```
both.turn(power=power, tacho_units=tacho_units, brake=False, cancel_when=lambda: ultrasonic.get_sample() < 20) 
```

# android - 如何取消我的应用程序创建的闹钟？

> ID：12814658
> 
> 赞同：2
> 
> 时间：2012-10-10T08:01:01.943
> 
> 标签：android, alarmmanager

我正在创建一个应用程序，它打算创建一个闹钟来唤醒用户。我没有**使用**AlarmManager *，*因为一旦闹钟响起，我就不需要应用程序运行任何代码或功能。所以，我的应用程序的最终目标是设置手机的原生闹钟。为此，我像这样使用了*AlarmClock*类：

```
Intent intent = new Intent(AlarmClock.ACTION_SET_ALARM);
intent.putExtra(AlarmClock.EXTRA_HOUR, hour);
intent.putExtra(AlarmClock.EXTRA_MINUTES, minute);
intent.putExtra(AlarmClock.EXTRA_SKIP_UI, false);
startActivity(intent); 
```

我想要取消警报的功能。如何通过应用程序代码访问设置的警报？

**注意：**闹钟不会出现在原生主屏幕的闹钟小部件中，而是出现在原生*时钟*应用程序中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T08:36:26.923

由于`AlarmClock`该类没有为此公开公共操作，因此不支持以编程方式执行此操作。期望可能是用户将通过 UI 进行操作。如果您想要更多控制，请使用`AlaramManager`和设置/清除您自己的警报。

# python - 如何根据另一个列表对元组列表进行排序

> ID：12814667
> 
> 赞同：46
> 
> 时间：2012-10-10T08:01:24.597
> 
> 标签：python, list, sorting

有一个清单：

```
a = [("ax", 1), ("ec", 3), ("bk", 5)] 
```

另一个清单：

```
b = ["ec", "ax", "bk"] 
```

我想`a`根据`b`：

```
sort_it(a, b)

a = [("ec", 3), ("ax", 1), ("bk", 5)] 
```

这该怎么做？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-10-10T08:04:08.150

```
a.sort(key=lambda x: b.index(x[0])) 
```

这使用每个元组的第一个元素`a`的索引 in 作为它排序的值，就地排序。`b``a`

另一种可能更简洁的书写方式是：

```
a.sort(key=lambda (x,y): b.index(x)) 
```

* * *

如果您有大量项目，则以不同的方式做事可能会更有效，因为`.index()`在长列表上可能是一项昂贵的操作，并且您实际上不需要进行完整排序，因为您已经知道顺序：

```
mapping = dict(a)
a[:] = [(x,mapping[x]) for x in b] 
```

请注意，这仅适用于 2 元组列表。如果您希望它适用于任意长度的元组，则需要稍微修改它：

```
mapping = dict((x[0], x[1:]) for x in a)
a[:] = [(x,) + mapping[x] for x in b] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-24T19:54:33.480

另一种可能性是排序`a`，`b`根据索引排序，然后根据索引`b`排序。`a`

```
a.sort(key=lambda x: x[0])
ind = [i[0] for i in sorted(enumerate(b),key=lambda x: x[1])]
a = [i[0] for i in sorted(zip(a,ind),key=lambda x: x[1])] 
```

因为每次排序都需要 n*log(n) 这对于更大的列表仍然是可扩展的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-08T19:51:53.603

实际上有一种方法可以在线性 O(n) 时间内做到这一点，因为这并不是真正的排序操作。列表的存在`b`意味着排序已经完成；我们真正需要做的就是将 的元素重新排列成`a`相同的顺序。多亏了字典，这可以有效地完成。

```
from collections import defaultdict

def sorted_by(seq_to_sort, desired_order, key=None):
    if key is None:
        key = lambda x: x

    # group the elements by their key
    grouped_items = defaultdict(list)
    for item in seq_to_sort:
        k = key(item)
        grouped_items[k].append(item)

    # flatten the dict of groups to a list
    return [item for key in desired_order for item in grouped_items[key]] 
```

用法：

```
a = [("ax", 1), ("ec", 3), ("bk", 5)]
b = ["ec", "ax", "bk"]
result = sorted_by(a, b, lambda tup: tup[0])
print(result)  # output: [("ec", 3), ("ax", 1), ("bk", 5)] 
```

笔记：

*   这是一个稳定的排序；如果两个列表项具有相同的键，则它们的顺序将被保留。例子：

    ```
    >>> sorted_by([1, 2, 3], [5], key=lambda x: 5)
    [1, 2, 3] 
    ```

*   如果任何列表元素映射到 中不存在的键，则`desired_order`这些元素将被静默丢弃。例如：

    ```
    >>> sorted_by([1, 2, 3], [1, 2, 3], key=lambda x: 5)
    [] 
    ```

也可以看看：

*   [`defaultdict`](https://docs.python.org/3/library/collections.html#collections.defaultdict)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-29T06:51:25.200

可能不需要传统的排序。

```
[tup for lbl in b for tup in a if tup[0] == lbl]
# [('ec', 3), ('ax', 1), ('bk', 5)] 
```

# c# - 空 XML 节点

> ID：12814669
> 
> 赞同：0
> 
> 时间：2012-10-10T08:01:33.427
> 
> 标签：c#, xml, microsoft-metro

我正在为我的大学制作一个从 XML 中收集数据的应用程序。除了课堂上的其他人之外，我还在 Windows 8 的现代 UI 中制作这个，这对我来说非常有用，除了一件小事。

当我收集特定节点的子节点时，我会得到不存在/空的值。我应该得到的值是这些。

*   你好
*   再见
*   你好世界

但是我进入列表视图的内容如下..（. 表示为空）

*   .
*   你好
*   .
*   再见
*   .
*   你好世界
*   .

我用来获取列表视图中的项目的代码如下。

```
 foreach (IXmlNode Node in XmlFile.SelectSingleNode("XML").SelectSingleNode("List").ChildNodes)
        {
            lvList.Items.Add(Node.InnerText.ToString());
        } 
```

如何摆脱空值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:08:49.830

```
lvList = XmlFile.SelectSingleNode("XML")
              .SelectSingleNode("List")
              .ChildNodes
              .Cast<XmlNode>()
              .Select(n => n.InnerText)
              .Where(s => !string.IsNullOrWhiteSpace(s))
              .ToList(); 
```

或者：

```
 foreach (IXmlNode Node in XmlFile.SelectSingleNode("XML").SelectSingleNode("List").ChildNodes)
    {
        string nodeText = Node.InnerText;
        if (!string.IsNullOrWhiteSpace(nodeText))
            lvList.Items.Add(nodeText);
    } 
```

# javascript - 如何在javascript中对多维数组进行排序

> ID：12814671
> 
> 赞同：0
> 
> 时间：2012-10-10T08:01:44.163
> 
> 标签：javascript, multidimensional-array, sorting

如何在javascript中对多维数组进行排序

```
 how to sort this multi dimensional array in javascript

            var arr = [];
            arr[0]  = [{id:1}, {id:5}, {id:7}];
            arr[1] =  [{id:3}, {id:8}, {id:6}];
            arr[2] = [{id:2}, {id:4}, {id:9}];

            The output should be like this
            arr[0]  = [{id:1}, {id:2}, {id:3}];
            arr[1] =  [{id:4}, {id:5}, {id:6}];
            arr[2] = [{id:7}, {id:8}, {id:9}]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:27:34.640

您将需要一些辅助功能：

```
Array.prototype.flattened = function() {
    return Array.prototype.concat.apply([], this);
};
Array.prototype.splitBy = function(n) {
    var r = [];
    for (var i=0; i<this.length; i+=n)
        r.push(this.slice(i, i+n));
    return r;
};
Array.prototype.sortBy = function sortBy(key) {  
if (this[0] && this[0][key] == "number")
        return this.sort(function(a,b) {return a[key] - b[key];});
    return this.sort(function(a, b) {
        return a[key]<b[key] ? -1 : a[key]>b[key] ? 1 : 0;
    });
}; 
```

然后，很容易：

```
arr.flattened().sortBy("id").splitBy(3); 
```

（[在 jsfiddle.net 上的演示](http://jsfiddle.net/6kXvt/)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T09:14:49.917

我能想到的最简单的解决方案是*：*

```
var sortChunks = function(ar, property,chunkSize)
{
    //set default params:
    chunkSize = chunkSize || ar[0].length;// || 3?;
    property = property || 'id';
    var i=0,j=0,all = [],ret = [];
    for(i=0;i<ar.length;i++)
    {//"map" objects, use property as array index
        for(j=0;j<ar[i].length;j++)
        {
            all[ar[i][j][property]] = ar[i][j];
        }
    }
    all.sort(function(a,b)
    {//move all undefined keys to the end of the array
        if (a === undefined)
            return 1;
        if (b === undefined || b.id > a.id)
            return -1;
        else
            return 1;
    });
    while(all && all[0] !== undefined)
    {//make chunks
       ret.push(all.splice(0,chunkSize));
    }
    return ret;
};
//usage:
arr = sortChunks(arr);//returns desired array
//or
arr = sortChunks(arr,'id',3); 
```

话虽如此，您可能最好重新考虑构建此数组的方式并更改该代码，而不是依赖于这个相当丰富（并且在其当前形式中相当容易出错）的排序函数。

同时，[检查这个小提琴](http://jsfiddle.net/xFtVV/)以查看它的运行情况......有点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T08:09:53.977

您可以创建具有 n * m 个元素的“一维”数组。其中 n 和 m 是行数和列数。然后使用其中一种排序算法。

[http://en.wikipedia.org/wiki/Sorting_algorithm](http://en.wikipedia.org/wiki/Sorting_algorithm)

# bash - nawk 将列添加到每一行

> ID：12814676
> 
> 赞同：2
> 
> 时间：2012-10-10T08:01:55.380
> 
> 标签：bash, awk, solaris, nawk

我正在尝试将带有文件名的列添加到每行的末尾。每一行都有一个

```
Name Surname   some_number 
```

`Name`和`surname`用空格`number`隔开，`Surname`用制表符隔开。

我正在使用此脚本执行此操作，但它不起作用，它仅将文件名添加到行首。

```
$1=temp
nawk -v F'\t' -v OFS='\t' '{$2=$2" "$temp} 1' $temp 
```

PS操作系统是SunOS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:17:37.093

尝试：

```
awk '{ printf( "%s %s\n", $0, FILENAME ); }' infile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T03:30:44.940

awk '{print $0, FILENAME}' 文件

# python - python如何解析++x？

> ID：12814677
> 
> 赞同：3
> 
> 时间：2012-10-10T08:01:59.907
> 
> 标签：python, syntax

> **可能重复：**
> [Python 中递增和递减运算符的行为](https://stackoverflow.com/questions/1485841/behaviour-of-increment-and-decrement-operators-in-python)

对 python 完全陌生，我写了 ++x 认为它会增加 x。所以我错了，没问题。但也没有语法错误。因此我的问题是： ++x 在 python 中的实际含义是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T08:04:05.770

`+`运算符是[一元加运算](http://docs.python.org/reference/expressions.html#unary-arithmetic-and-bitwise-operations)符；它返回其数字参数不变。So`++x`被解析为`+(+(x))`，并且给出`x`不变（只要`x`包含一个数字）：

```
>>> ++5
5
>>> ++"hello"
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: bad operand type for unary +: 'str' 
```

如果`+`在用户定义类的对象上调用，则如果存在该[`__pos__`特殊方法](http://docs.python.org/reference/datamodel.html#object.__pos__)，则将调用该方法；否则，`TypeError`将按上述方式提出。

为了确认这一点，我们可以使用[ast 模块](http://docs.python.org/library/ast.html)来展示 Python 如何解析表达式：

```
import ast
print(ast.dump(ast.parse('++x', mode='eval')))
Expression(body=UnaryOp(op=UAdd(), operand=UnaryOp(op=UAdd(), operand=Name(id='x', ctx=Load())))) 
```

# mysql - 将邮件存储在数据库中的最佳方式（后缀）

> ID：12814678
> 
> 赞同：8
> 
> 时间：2012-10-10T08:02:04.783
> 
> 标签：mysql, email, postfix-mta

请给我一个最好的解决方案，用后缀将所有邮件（发送、接收、转发）存储在 mysql 中？这是正确的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T07:18:58.797

Postfix 服务器本身不存储电子邮件（至少不会很长时间） - 它只能暂时排队，直到它被转发给预期的收件人。通常只有 IMAP（或过时的 POP3）服务器实际存储您的电子邮件。

大多数开源 IMAP 服务器（Courier、Cyrus、Dovecot...）都支持使用 MySQL 作为数据库来保存元信息，如用户和密码列表、接受域列表、用户别名等。但甚至没有人尝试制作使用像 MySQL 这样的数据库作为实际的存储后端。

当然，如果你真的喜欢冒险，你可以尝试实现自己的 SQL IMAP 后端。对您而言，最重要的考虑因素之一是数据库引擎对无限长度的 VARCHAR 或 BLOB（用于电子邮件附件）的良好支持。不幸的是，就 BLOB 支持而言，MySQL 并不是很好的服务器（您必须为此调整客户端和服务器配置）。此外，如果您关心电子邮件数据的安全，您可能希望获得良好的交易支持。对于 MySQL，这意味着您必须使用 InnoDB 引擎。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-07T15:07:51.853

您可以尝试[https://wiki.ubuntu.com/PostfixCompleteVirtualMailSystemHowto](https://wiki.ubuntu.com/PostfixCompleteVirtualMailSystemHowto) 使用 mysql 和 postfix 的虚拟邮件、域和用户。

# android - 带有phonegap的android

> ID：12814680
> 
> 赞同：2
> 
> 时间：2012-10-10T08:02:10.227
> 
> 标签：android, cordova

[我按照本教程](http://docs.phonegap.com/en/2.1.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)为 android 创建了一个 hello world 应用程序

但是一旦我在真正的 android 手机上测试了这个，我在 eclipse 的 logcat 中收到了这个错误消息：

```
 sqlitelog (14) cannot open file at line 30174 of [00bb9c9ce4]
 sqlitelog (14) os_unix.c:30174: (2) open(/CachedGeoposition.db) - 
```

有没有人有同样的经历？

我用 jellybean 在设备上创建并测试了它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T11:15:17.267

注意要添加到构建路径的cordova 版本以及要添加到HTML 的js。版本必须相同，也许下载最后一个科尔多瓦版本你会摆脱这个问题

# c# - 如何在服务器上未安装 MS Office 的情况下在 asp.net 中将 docx 转换为 pdf

> ID：12814685
> 
> 赞同：5
> 
> 时间：2012-10-10T08:02:27.643
> 
> 标签：c#, asp.net

我只想问有没有什么方法可以在我的服务器上没有安装 MS Office 的情况下将 .docx 文件转换为 PDF？

是否有任何 adobe SDK 可以帮助我在 ASP.NET 中执行此操作？

如果有任何免费（开源）API，请告诉我，或者任何有助于实现此解决方案的付费？

但首先是从 Adob​​e 获得解决方案的任何东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:14:44.840

You can install `PDF/XPS exporter`

Link : [http://www.microsoft.com/en-us/download/details.aspx?id=7](http://www.microsoft.com/en-us/download/details.aspx?id=7)

Sample code (Javascript)

```
var filename = "...\\Test.docx";
var msword = WScript.CreateObject("Word.Application");
msword.Visible = false;
msword.WindowState = 2; // minimized
msword.Documents.Open(filename);
msword.ActiveDocument.SaveAs(filename + ".pdf", 17); // 17 is the magic number for wdFormatPDF
msword.quit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:40:16.330

我不知道有任何开源库能够做到这一点。我目前正在[为 .Net 使用 Aspose.Words](http://www.aspose.com/categories/.net-components/aspose.words-for-.net/default.aspx)。它不是免费的，但它也可以用于构建 word 文档。我最初购买它只是为了进行这种转换（它是我能找到的最快的库，也是生成最好看的 pdf 的库）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T22:48:39.500

我相信您可以尝试这两种解决方案之一来实现您想要的。

1.  Image Magic：[http](http://www.imagemagick.org) ://www.imagemagick.org 这是免费的，但要找到正确的语法可能是一个挑战。

* * *

2.  OfficeToPdf：[http](http://www.a-pdf.com/office-to-pdf/index.htm) ://www.a-pdf.com/office-to-pdf/index.htm这个（49 美元）库易于使用，但需要安装 MS Office：

    `OfficeToPDF "c:\help.doc" "c:\output\help.pdf"`

# background - 在后台运行一个 celery worker

> ID：12814691
> 
> 赞同：15
> 
> 时间：2012-10-10T08:02:50.273
> 
> 标签：background, celery

我正在运行这样的芹菜工人：

```
celery worker --app=portalmq --logfile=/tmp/portalmq.log --loglevel=INFO -E --pidfile=/tmp/portalmq.pid 
```

现在我想在后台运行这个工人。我尝试了几件事，包括：

```
nohup celery worker --app=portalmq --logfile=/tmp/portal_mq.log --loglevel=INFO -E --pidfile=/tmp/portal_mq.pid >> /tmp/portal_mq.log 2>&1 </dev/null & 
```

但它不起作用。我检查了 celery 文档，我发现了这个：

*   [将worker作为守护进程运行](http://docs.celeryproject.org/en/latest/tutorials/daemonizing.html)
*   [运行 celery worker 服务器](http://docs.celeryproject.org/en/latest/getting-started/first-steps-with-celery.html#running-the-celery-worker-server)

特别是这个评论是相关的：

```
In production you will want to run the worker in the background as a daemon.
To do this you need to use the tools provided by your platform, or something
like supervisord (see Running the worker as a daemon for more information). 
```

这对于在后台运行进程来说开销太大。我需要在我的服务器中安装 supervisord，并熟悉它。暂时不去。有没有一种在后台运行芹菜工人的*简单方法？*

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-10T10:48:06.957

supervisor 非常简单，只需要很少的工作即可完成设置，同样适用于与 supervisor 结合使用的 celery。

设置它不应该超过 10 分钟 :)

1.  使用 apt-get 安装主管

2.  创建 /etc/supervisor/conf.d/celery.conf 配置文件

3.  在 celery.conf 文件中粘贴一些内容

    ```
    [program:celery]
    directory = /my_project/
    command = /usr/bin/python manage.py celery worker 
    ```

4.  加上（如果你需要）一些可选和有用的东西（带有虚拟值）

    ```
    user = celery_user
    group = celery_group
    stdout_logfile = /var/log/celeryd.log
    stderr_logfile = /var/log/celeryd.err
    autostart = true
    environment=PATH="/some/path/",FOO="bar" 
    ```

5.  重新启动主管（或做 supervisorctl reread; supervisorctl add celery）

之后你会得到很好的 ctl 命令来管理 celery 进程：

```
supervisorctl start/restart/stop celery

supervisorctl tail [-f] celery [stderr] 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2020-07-16T16:31:15.837

```
celery worker -A app.celery --loglevel=info --detach 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-06-18T15:39:33.080

我遇到了同样的问题，因为懒惰的解决方案是`&`在命令末尾使用。例如

```
celery worker -A <app>.celery --loglevel=info & 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-23T05:24:35.363

对我来说，这个有用，我用 celery 和 django

```
celery -A proj_name worker -l INFO --detach 
```

# objective-c - 使用 ARC、NSOperationQueue 和 dispatch_source_t（定时器）保持循环

> ID：12814693
> 
> 赞同：1
> 
> 时间：2012-10-10T08:02:57.627
> 
> 标签：objective-c, automatic-ref-counting, nsoperationqueue, retain-cycle

我有一个向串行 NSOperationQueue 添加操作的方法。由于我想定期调用该方法，因此我使用调度源计时器。

但是，也可以响应用户操作调用此方法。当这种情况发生时（例如，由于计时器调用方法之前的片刻），我会延长计时器的触发日期。

问题是我写的代码有一个保留周期，我不明白在哪里。

这是演示问题的简化示例（不要忘记将部署 SDK 设置为 10.7）：

```
#import <Foundation/Foundation.h>

@interface MyObject : NSObject

@end

@implementation MyObject
{
    NSOperationQueue *_queue;
    dispatch_source_t _timer;
}

- (id)init
{
    self = [super init];

    if (self)
    {
        _queue = [[NSOperationQueue alloc] init];
        [_queue setMaxConcurrentOperationCount:1];
    }

    return self;
}

- (void)dealloc
{
    NSLog(@"dealloc");
    [_queue cancelAllOperations];
    dispatch_source_cancel(_timer);
    dispatch_release(_timer);
}

- (void)scheduleTimer
{
    if (_timer)
    {
        dispatch_source_cancel(_timer);
        dispatch_release(_timer);
    }

    _timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER,
                                    0,
                                    0,
                                    dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0));

    if (_timer)
    {
        __weak MyObject *selfBlock = self;
        dispatch_source_set_event_handler(_timer, ^{
            dispatch_source_cancel(_timer);
            [selfBlock doMethod];
        });
        dispatch_source_set_timer(_timer, dispatch_time(DISPATCH_TIME_NOW, 1 * NSEC_PER_SEC), DISPATCH_TIME_FOREVER, 0);
        dispatch_resume(_timer);
    }
}

- (void)doMethod
{
    NSLog(@"doMethod");

    __weak MyObject *selfBlock = self;

    [_queue cancelAllOperations];
    [_queue addOperationWithBlock:^{
        [selfBlock scheduleTimer];
    }];
}

@end

int main(int argc, const char * argv[])
{
    @autoreleasepool {

        MyObject *obj = [MyObject new];
        [obj doMethod];

        sleep(10);

        obj = nil;
        NSLog(@"something still points to obj");

        sleep(10);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T01:21:16.663

这里实际上没有保留周期。问题是您正在做的事情或`dispatch_release()`（我没有花时间弄清楚）的内部是发送`autorelease`消息而不是`release`消息，因此直到您的块关闭`release`后才会发生最终结果。`autorelease`如果您将`main`例程更改为以下内容，它将向您显示按预期工作的事情：

```
int main(int argc, const char * argv[])
{
    @autoreleasepool {

        MyObject *obj = nil;

        @autoreleasepool {
            obj = [MyObject new];
            [obj doMethod];

            sleep(10);

            NSLog(@"set to nil");
            obj = nil;
        }

        sleep(1);  // need this to give the background thread a chance to log

        NSLog(@"something still points to obj?");

        sleep(10);

        NSLog(@"done sleeping");
    }

    return 0;
} 
```

我更改了您的其他代码以添加一些日志记录并清理了一些内容，但注释掉了仅用于挑剔清洁编码的更改:)，它仍然可以正常工作。

```
#import <Foundation/Foundation.h>

@interface MyObject : NSObject

@end

@implementation MyObject
{
    NSOperationQueue *_queue;
    dispatch_source_t _timer;
}

- (id)init
{
    self = [super init];

    if (self)
    {
        _queue = [[NSOperationQueue alloc] init];
        [_queue setMaxConcurrentOperationCount:1];
    }

    return self;
}

- (void)dealloc
{
    NSLog(@"dealloc");
    [_queue cancelAllOperations];

    if ( _timer )
    {
        dispatch_source_cancel(_timer);
        dispatch_release(_timer);
        // _timer = nil;
    }
}

- (void)scheduleTimer
{
    NSLog(@"Schedule timer");

    if (_timer)
    {
        dispatch_source_cancel(_timer);
        dispatch_release(_timer);
        //        _timer = nil;
    }

    _timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER,
                                0,
                                0,
                                 dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0));

    if (_timer)
    {
        __weak MyObject *selfBlock = self;
        dispatch_source_set_event_handler(_timer, ^{
            dispatch_source_cancel(_timer);
            [selfBlock doMethod];
        });
        dispatch_source_set_timer(_timer, dispatch_time(DISPATCH_TIME_NOW, 1 * NSEC_PER_SEC), DISPATCH_TIME_FOREVER, 0);
        dispatch_resume(_timer);
    }
}

- (void)doMethod
{
    NSLog(@"doMethod");

    __weak MyObject *selfBlock = self;

    [_queue cancelAllOperations];
    [_queue addOperationWithBlock:^{
        [selfBlock scheduleTimer];
    }];
}

@end 
```

这是我得到的输出：

```
2013-03-10 18:15:33.829 testtimer[35328:403] doMethod
2013-03-10 18:15:33.832 testtimer[35328:1e03] Schedule timer
2013-03-10 18:15:34.833 testtimer[35328:1e03] doMethod
2013-03-10 18:15:34.835 testtimer[35328:2203] Schedule timer
2013-03-10 18:15:35.837 testtimer[35328:1e03] doMethod
2013-03-10 18:15:35.839 testtimer[35328:1d03] Schedule timer
2013-03-10 18:15:36.839 testtimer[35328:1d03] doMethod
2013-03-10 18:15:36.841 testtimer[35328:1e03] Schedule timer
2013-03-10 18:15:37.842 testtimer[35328:1e03] doMethod
2013-03-10 18:15:37.844 testtimer[35328:1e03] Schedule timer
2013-03-10 18:15:38.846 testtimer[35328:1e03] doMethod
2013-03-10 18:15:38.848 testtimer[35328:1e03] Schedule timer
2013-03-10 18:15:39.849 testtimer[35328:1e03] doMethod
2013-03-10 18:15:39.851 testtimer[35328:1d03] Schedule timer
2013-03-10 18:15:40.851 testtimer[35328:1d03] doMethod
2013-03-10 18:15:40.853 testtimer[35328:2203] Schedule timer
2013-03-10 18:15:41.854 testtimer[35328:2203] doMethod
2013-03-10 18:15:41.856 testtimer[35328:1e03] Schedule timer
2013-03-10 18:15:42.857 testtimer[35328:1d03] doMethod
2013-03-10 18:15:42.859 testtimer[35328:1d03] Schedule timer
2013-03-10 18:15:43.831 testtimer[35328:403] set to nil
2013-03-10 18:15:43.861 testtimer[35328:1d03] doMethod
2013-03-10 18:15:43.861 testtimer[35328:1d03] dealloc
2013-03-10 18:15:44.833 testtimer[35328:403] something still points to obj? 
```

如果您`sleep(1);`拨打电话，您会看到“某物仍然指向 obj？” log 发生在最后一个`doMethod`& `dealloc`log 语句之前。我怀疑这只是线程和 NSLog 缓冲，这就是我放入的原因，`sleep(1);`而且果然行为改变了，正如我预期的那样。

同样来自`dispatch_queue_create`Xcode 文档查看器中的文档，它说：

> 任何提交到队列的未决块都持有对该队列的引用，因此在所有未决块完成之前不会释放队列。

这是有道理的，也可能会影响各种释放操作的时间安排。

# mainframe - Tivoli 调度程序：查找不依赖于给定应用程序的应用程序

> ID：12814701
> 
> 赞同：1
> 
> 时间：2012-10-10T08:03:21.400
> 
> 标签：mainframe, tivoli

我有一个包含 426 个元素的每日计划。现在我需要以确保它们都不运行的方式删除它们。

它们“应该”全部定义为对“BATCHSTART”元素的前驱依赖。但是，当我搜索 BATCHSTART 的后继者时，该列表仅包含 410 个元素。结论：在 426 个元素中，一个是 BATCHSTART，剩下 15 个元素未定义为依赖于 BATCHSTART。

所以......没有手动比较列表，有没有办法找到它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:12:01.377

无法通过菜单完成，但如果您很好地询问操作员，她或他可能会告诉您存储各种应用程序和依赖项的表的名称。然后你“只”必须编写一些聪明的代码来生成依赖图并梳理出你的答案。

不，我还没说完……

# c# - Windows Phone 7.5 上的 DateTimeConverter

> ID：12814705
> 
> 赞同：0
> 
> 时间：2012-10-10T08:03:29.197
> 
> 标签：c#, windows-phone-7, datetime, converter

如何获取从 (2012-10-10T 11:07:58:75 05:30) 到 (10/10/2012) 的日期。帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T06:07:19.393

在我看来，您应该解析为 a `DateTimeOffset`，以表示您实际获得的所有数据：

```
string text = "2012-10-10T11:07:58+05:30";
DateTimeOffset dto = DateTimeOffset.ParseExact
    (text, "yyyy'-'MM'-'dd'T'HH':'mm':'sszzz",
     CultureInfo.InvariantCulture); 
```

这假设您输入字符串中的最后一个 ":75" 实际上是一个错误。这是一种*非常*奇怪的格式。如果这不是一个错误，您可能想要：

```
string text = "2012-10-10T11:07:58:75+05:30";
DateTimeOffset dto = DateTimeOffset.ParseExact
    (text, "yyyy'-'MM'-'dd'T'HH':'mm':'ss':'FFFzzz",
     CultureInfo.InvariantCulture); 
```

这将处理亚毫秒范围内的小数点后 3 位。如果您有更多，您可以将模式扩展到最多 7 个 F 字符。

当您想要获取日期时，您需要确定您真正想要的是本地日期，还是转换为 UTC 后的日期。这将取决于您的业务需求，但请注意效果。（具有相同本地日期的两个值可能不代表相同的 24 小时时间段。）

如果您希望该值再次以不同格式作为字符串，则需要第二步来格式化它，调用`ToString`. 鉴于您的样本具有相同的日期和月份值，不幸的是，我们无法判断您是否想要`MM/dd/yyyy`或`dd/MM/yyyy`- 但您应该真正考虑这是否应该对文化敏感。如果您可以向我们提供有关您如何使用此值的更多背景信息，我们可以提供更多建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T09:44:57.173

首先： DateTime.ParseExact ，将字符串如“（2012-10-10T 11:07:58:75 05:30”转换为DateTime结构---var d。

和 d.tostring("你的格式")

# spring - Spring组件扫描自定义过滤器

> ID：12814709
> 
> 赞同：3
> 
> 时间：2012-10-10T08:03:48.683
> 
> 标签：spring

我的包结构如下：

```
(...)
com.domain.group.dao
com.domain.group.service
(...)
com.domain.users.dao
com.domain.users.service 
```

有没有办法告诉 spring 应该只扫描包以“dao”或“service”结尾的所有类？

[这是类似问题的示例](http://www.mkyong.com/spring/spring-filtering-components-in-auto-scanning/)，但它不能解决我的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T08:21:10.323

```
 <context:component-scan base-package="com.domain">
     <context:include-filter type="regex" expression=".*dao\.[^.]*"/>
     <context:include-filter type="regex" expression=".*service\.[^.]*"/>
 </context:component-scan> 
```

@参见[Spring 参考章节 4.10.3 使用过滤器自定义扫描](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#beans-scanning-filters)

* * *

*附录：（*因为*评论*）

*可以有多个`include-filter`s 和`exclude-filter`s 但顺序很重要：首先`include-filter`然后`exclude-filter`- 请参阅[`spring-context-3.0.xsd`](http://www.springframework.org/schema/context/spring-context-3.0.xsd)：*

```
<xsd:element name="component-scan">
    ...
    <xsd:complexType>
        <xsd:sequence>
            <xsd:element name="include-filter" type="filterType" minOccurs="0" maxOccurs="unbounded">
                ...
            </xsd:element>
            <xsd:element name="exclude-filter" type="filterType" minOccurs="0" maxOccurs="unbounded">
                ...
            </xsd:element>
        </xsd:sequence>
        ...
    </xsd:complexType>
</xsd:element> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:16:08.603

```
 <context:component-scan base-package="org.example">
     <context:include-filter type="regex" expression="YOUR REGEX"/>
  </context:component-scan> 
```

PS：您可以有多个包含过滤器，一个用于服务正则表达式，一个用于 dao

这取自[Spring 参考指南的使用过滤器自定义扫描部分](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch04s12.html)。

# session - 如何使用 Struts2 SessionAware 使用现有会话

> ID：12814710
> 
> 赞同：0
> 
> 时间：2012-10-10T08:03:47.997
> 
> 标签：session, struts2, session-state, sessionid

我们的`Action class`实现`SessionAware`，在第一次加载页面时，我们将一些数据设置到`session`（我们通过实现获得的会话映射`SessionAware`）中。我们有一个功能可以重新加载页面，在这种情况下会话数据变为空，当我进一步观察时，jsession id 正在更改，我相信这是导致问题的原因，请您分享您对为什么会发生这种情况的想法，我如何强制我的 struts2 应用程序使用现有会话。

在我的本地环境中不会出现此问题，仅在部署在 QA 服务器上时才会出现此问题（在 unix 环境中部署的 tomcat 服务器）

我们的应用程序使用 tomcat 服务器。

Tomcat中的任何设置都会导致这种情况吗？还是这与应用程序代码有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:27:04.390

I had the same problem when trying to move my local application to our server. Try if this can help you:

[Struts2: Session Problem (after reverse proxy)](https://stackoverflow.com/questions/3389235/struts2-session-problem-after-reverse-proxy)

# php - PHP 等待循环完成

> ID：12814711
> 
> 赞同：1
> 
> 时间：2012-10-10T08:03:49.060
> 
> 标签：php, sockets, udp

我正在尝试在 PHP 中运行 10 次的 while 循环中打印 UDP 消息。问题是它一直等到循环完成，然后将消息打印 10 次，但我想在循环的每次迭代中打印它，而不是在循环完成时打印。这是我的代码。

```
<?php
  $socket = socket_create(AF_INET,SOCK_DGRAM,SOL_UDP);
  socket_bind($socket,$ip_address,$port);

  $i = 0;
  while($i < 10)
  {
    $i++;
    $FROM = '';
    $PORT = 0;

    socket_recvfrom($socket,$buffer,1024,0,$from,$PORT);
    echo "Receiving $buffer from IP $FROM and Port $PORT", PHP_EOL);
    flush();
    sleep(1);
   }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:09:12.803

**在调用flush()**之后调用**[ob_flush()](http://php.net/manual/en/function.ob-flush.php)**以刷新输出缓冲区。

 **> 此函数将发送输出缓冲区的内容（如果有）

如果从浏览器访问， `header( 'Content-type: text/html; charset=utf-8' );`可能需要在网页顶部添加

脚本开头的ob_start **() 也会打开输出缓冲。****

# ios - 如何在原生 iOS 6 日历应用程序中创建日历？

> ID：12814720
> 
> 赞同：0
> 
> 时间：2012-10-10T08:04:07.823
> 
> 标签：ios, iphone, ios6, icalendar

我有一个要求，我需要在哪里设置提醒/事件，但它们不应该在默认日历中。因此，我一直在寻找一种将自定义日历添加到 iPhone 中的本机日历应用程序的方法。但是在查找 EventKit 框架时，我了解到方法**“calendarWithEventStore:”自 iOS 6 以来已被弃用**。有没有其他方法或解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:21:32.497

改为使用`calendarForEntityType:eventStore:`，它也允许指定实体类型（事件或提醒）。请注意，要支持 iOS 5 及更早版本，您必须在调用此方法之前检查它是否为 NULL（或回退到旧的`calendarWithEventStore:`）。

# system - 当路径有空间时，C++ system() 无法打开 .txt 文件

> ID：12814722
> 
> 赞同：0
> 
> 时间：2012-10-10T08:04:09.743
> 
> 标签：system

我在 e:/ab 中有 txt 文件在 system() 函数中无法接受空间所以该怎么办我的 c++ 代码是

```
#include <iostream>
#include <conio.h>

using namespace std;
int main() 
{
    system("start e:/a b/test.txt");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:05:34.347

您需要的是模拟您将在命令行上执行的操作。例如：

```
system("start \"e:/a b/test.txt\""); 
```

顺便说一句，通常人们对批处理文件使用 .bat 扩展名。不确定扩展的开始有多挑剔，但它有助于理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T17:20:14.577

我通常将开头设为大写，如 START 并且我使用它，`system("START www.gmail.com");`或者您可以使用 `system("START *URL or EXE-FILE*");`另一种方式打开它：

```
CString str = "http://www.wikipedia.org/";
            CString action = "open";
            ShellExecute(NULL, action, str, NULL, NULL, SW_SHOW);
            getchar(); 
```

# c# - .NETCore（Windows 8 Framework）的“GetCustomAttributes”的等效方法是什么？

> ID：12814723
> 
> 赞同：37
> 
> 时间：2012-10-10T08:04:12.973
> 
> 标签：c#, .net, windows-8, windows-runtime, .net-core

我正在整理一个与 Stack API 接口的应用程序，并且一直在关注[本教程](http://cgeers.com/2011/10/02/stack-exchange-api/)（尽管旧 API 版本仍然有效）。我的问题是，在 Windows 8 Store App 中使用它时，我受到不支持以下方法的 .NETCore Framework 的限制`GetCustomAttributes`：

```
 private static IEnumerable<T> ParseJson<T>(string json) where T : class, new()
    {
        var type = typeof (T);
        var attribute = type.GetCustomAttributes(typeof (WrapperObjectAttribute), false).SingleOrDefault() as WrapperObjectAttribute;
        if (attribute == null)
        {
            throw new InvalidOperationException(
                String.Format("{0} type must be decorated with a WrapperObjectAttribute.", type.Name));
        }

        var jobject = JObject.Parse(json);
        var collection = JsonConvert.DeserializeObject<List<T>>(jobject[attribute.WrapperObject].ToString());
        return collection;
    } 
```

我的问题有两个。`GetCustomAttributes`在 Windows 8 应用商店应用领域的约束下，究竟该做什么以及是否有与此方法等效的方法？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-10-10T08:16:37.387

您需要使用`type.GetTypeInfo()`，然后它有各种`GetCustomAttribute`方法（通过扩展方法），或者有`.CustomAttributes`它为您提供原始信息（而不是物化`Attribute`实例）。

例如：

```
var attribute = type.GetTypeInfo().GetCustomAttribute<WrapperObjectAttribute>();
if(attribute == null)
{
    ...
}
... 
```

`GetTypeInfo()`对图书馆作者来说是 .NETCore 的痛苦；p

如果`.GetTypeInfo()`没有出现，则添加`using System.Reflection;`指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-18T12:57:53.750

将**System.Reflection.TypeExtensions**块包添加到您的项目中；它有 GetCustomAttributes 扩展。

（对于 VS 2017）是这样的。

```
<ItemGroup Condition="'$(TargetFramework)' == 'netstandard1.6'">
    <PackageReference Include="System.Reflection.TypeExtensions">
        <Version>4.3.0</Version>
    </PackageReference>
</ItemGroup> 
```

# c# - CLI/C++ 和 C#：如何在发布模式下捕获 C++ 异常

> ID：12814724
> 
> 赞同：1
> 
> 时间：2012-10-10T08:04:13.727
> 
> 标签：c#, c++, exception

我有这个问题：

从 开始`Managed C++`，我使用`C#` `DLL`我在其中注册`delegate`定义的地方`Managed C++`。库`C#`执行此操作`delegate`，并在其中引发一个`native exception`. 在**调试**模式下`try/catch`执行，但在**发布**模式下不执行。但在同样的场景中，如果异常是由 100% 托管代码抛出的，我可以捕捉到它。

这是我正在使用的代码：

`Managed C++`：

```
class CNativeClass
{
    public:
      int one;
}

// This C method is registred like Delegate in C#
void OnMsgReceived(ManagedObjectInCSharp^ obj)
{
    CNativeClass* pelota;
    pelota->one = 0; // <-- This procude a NullPointerException
    Console::WriteLine(L"OnMsgReceived");
} 
```

我`C#`用. `delegate`_ `try/catch`在**Debug**中它可以，但在**Release**中，它不是。

```
//But if I defined the method like this:
void OnMsgReceived(ManagedObjectInCSharp^ obj)
{
    try  
    {
        CNativeClass* pelota;
        pelota->one = 0; // <-- This procude a NullPointerException
        Console::WriteLine(L"OnMsgReceived");
    }
    catch(const char* str)
    {
    }
} 
```

我`C#`在发布模式下捕获异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:11:14.447

好的，也许这是一个很长的镜头，但请尝试将此属性添加到您的 C# 方法中：

```
[System.Runtime.ExceptionServices.HandleProcessCorruptedStateExceptions] 
```

[http://msdn.microsoft.com/en-us/magazine/dd419661.aspx](http://msdn.microsoft.com/en-us/magazine/dd419661.aspx)

# design-patterns - 组织模式实现

> ID：12814729
> 
> 赞同：0
> 
> 时间：2012-10-10T08:04:46.520
> 
> 标签：design-patterns, project-organization

我们已经开始在工作中使用一些模式，最值得注意的是事件聚合和规范。由于这些实现通常被大量项目使用，我们正试图找到放置它们的地方。我们现在的位置是：

```
 ProductName.Core.Patterns.Specification
 ProductName.Core.Patterns.EventAggregator 
```

但这并不能很好地导致给定模式的替代基本实现。在我们提交上面的结构之前，我想知道人们是否可以分享他们如何将模式实现折叠到他们的项目中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:27:16.353

恕我直言，根据项目中的组件/模块制作包或文件夹总是好的。如果你已经有了这些功能的包，那么你可以把你的结构放在那里。它是您的设计文档，它将告诉您在哪个组件中使用了哪种模式。

# sublimetext2 - 如何获得当前的插入符号位置？

> ID：12814731
> 
> 赞同：12
> 
> 时间：2012-10-10T08:04:52.993
> 
> 标签：sublimetext2

我编写了一个简单的 ST2 插件，它应该只在当前插入符号位置插入一个时间戳。但是，我无法找出如何获得当前位置。

我有

```
def run(self, edit):
    timestamp = "%s" % (datetime.datetime.now().strftime("%Y-%m-%d %H:%M"))
    pos = ???
    self.view.insert(edit, pos, timestamp) 
```

应该`pos`是什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-10T08:31:02.750

尝试

```
pos = self.view.sel()[0].begin() 
```

这将获取当前选择的起点（如果未选择任何内容，则选择的起点和终点是当前光标位置）。

如果您希望它与多项选择一起使用，您必须迭代返回的所有选择`self.view.sel()`：

```
for pos in self.view.sel():
    self.view.insert(edit, pos.begin(), timestamp) 
```

# android - SQL 有多少特定级别的项目是正确的（查询问题）？

> ID：12814732
> 
> 赞同：1
> 
> 时间：2012-10-10T08:04:57.887
> 
> 标签：android, sql

为了使大的 sql 结构简单：我有下一个结构：

```
id    level    answercorrect    points
1     1        0                0
2     1        1                60
3     1        1                80
4     1        1                77
5     1        1                92
6     1        0                0
7     2        0                0
8     2        0                0
9     2        0                0
10    2        1                80
11    2        0                0
12    2        0                0 
```

我现在想显示两件事：

**1）**完成了多少级（这是至少一半的问题正确）

**2)**你得分最高的级别。

现在我可以去手动查询每个级别，然后比较它们，然后输出它们。

```
SELECT (*) FROM QUESTIONS WHERE LEVEL = level AND ANSWERCORRECT = 1 
```

但是有没有办法更快地做到这一点？在我的路上完成这似乎是一大堆代码..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:06:45.967

这将向您显示每个级别，包括答案计数和正确答案计数。

```
select level, 
    count(*) as totalquestions, 
    sum (answercorrect) as correctanswers,
    sum (points) as totalpoints
from yourtable
group by level
having sum (answercorrect) >= (count(*)/2)
order by sum (points) desc 
```

或者

```
select level,  
    count(*) as totalquestions,  
    sum (answercorrect) as correctanswers, 
    sum (points) as totalpoints,
    case when sum (answercorrect) >= (count(*)/2) then 1 else 0 end as completed
from yourtable 
group by level 
order by sum (points) desc 
```

存储分数和正确性似乎是多余的，如果 points = 0 表示不正确，而 points>0 表示正确？

# php - 在用户确认时执行特定代码，但必须在 php 代码期间激活确认框，而不是在提交表单上

> ID：12814736
> 
> 赞同：0
> 
> 时间：2012-10-10T08:05:32.970
> 
> 标签：php, javascript

从数据库验证用户数据后，我想使用 php 代码更新数据库中的一些值。

我试过了

```
var answer = confirm("Do you want to Checkout?");
if(answer==true)
{
<?php MY UPDATE COMMAND ?>
} 
```

但是即使 answer==false 也会执行更新命令

请帮助我解决我的问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:24:45.910

以下是为您提供的解决方案：

第一次**使用 AJAX**。例如在 jQuery 的帮助下：

```
if (confirm('Do you want to Checkout?')) {
  $.ajax({
    url: 'logout.php'
  }).done(function(){
    // do something after php checkout, for example: go to home page
    window.location.href = '/';
  });
} 
```

第二 - 是使用这样的链接：

```
<a href="checkout.php"
   onclick="return confirm('Do you want to Checkout?')">
Checkout</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:12:10.457

这是行不通的，因为 PHP 在服务器端执行，甚至在任何 javascript 发送到浏览器之前。所以会发生的是你`MY UPDATE COMMAND`将首先执行，在 Javascript 之前 - 在浏览器中执行客户端。

如果您想在确认为真的情况下执行一些 PHP，那么您将需要提交一个表单，或者在此时执行 AJAX 调用。我建议阅读 PHP 和 Javascript 的执行方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T08:12:30.247

javascript 是在客户端浏览器中运行的客户端程序（在这种情况下）。Php 是一种服务器端脚本语言。基本上 php 生成一个 html 文件并将其发送给客户端。所有 php 命令都在 javascript 发生任何事情之前执行，因为 php 只是生成一个 html 文件。javascript 在客户端浏览器中加载。

因此 php 命令将始终运行，因为它正在被调用。PHP 不知道它被 javascript 代码所包围，并且什么也不做。它只是在它发送的 html 文件中包含 javascript 代码。

# javascript - 保持正确的样式类

> ID：12814738
> 
> 赞同：1
> 
> 时间：2012-10-10T08:05:34.613
> 
> 标签：javascript, jquery

在我的拖放游戏中，有一个网格填充了对用户隐藏的单词。游戏的目的是借助声音和图片拼写这些单词。用户通过将相关字母拖放到网格上来拼写单词。如果字母正确，它将在“wordglow3”类中发出绿色光。如果它是错误的，它会发出“wordglow”的红光。目前我遇到了一个问题，因为如果我将正确的字母放在一个单词上，它会在它应该发绿光时发红光。这很奇怪，因为发生这种情况后，其他一切都会正常工作，但我找不到问题的根源。任何人都可以帮忙吗？

这是相应地应用类的脚本...

```
 drop: function(event, ui) {
        that = $('.spellword')[guesses[word].length];
        word = $(that).data('word');
        guesses[word].push($(ui.draggable).attr('data-letter'));

        if ($(that).text() == $(ui.draggable).text().trim()) {
            $(that).addClass('wordglow3').css('color', 'white');
            $(".minibutton").hide();
            $('.next').hide();
        } else {
            $(that).addClass('wordglow');
            $('.drag').css("color", "white");
            $(".minibutton").hide();
            $('.next').hide();
        } 
```

小提琴帮助 - [http://jsfiddle.net/smilburn/Dxxmh/57/](http://jsfiddle.net/smilburn/Dxxmh/57/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:16:54.510

你的情况好像不对。`$(that).text`始终是空字符串。

在 JSFiddle 中，如果将其替换为`$(that).data("letter")`，则一切（与发光颜色相关）似乎都有效。

# jquery - Fancybox 2 主题标签链接未显示标题属性

> ID：12814744
> 
> 赞同：0
> 
> 时间：2012-10-10T08:05:56.003
> 
> 标签：jquery, title, hashtag, fancybox-2

我正在使用fancybox 2，并且我已经成功创建了指向我的内容的哈希标签链接，但是当我单击以从例如搜索页面转到该内容时，它会显示所有fancybox 内容但不显示标题。我猜测这是因为我没有单击具有 title="" 属性的锚标记。

有什么方法可以在不点击锚点的情况下从锚点获取这个标题？

我的代码看起来像这样：

```
<a class="library-content-link lightbox" href="#main-document" title="Main Document"></a> 
```

js：

```
var thisHash = window.location.hash;

if(window.location.hash) {
    $(thisHash).fancybox({
        width       : 640,
        height      : 380,
        fitToView   : false,
        autoSize    : false,
        closeClick  : false,
        openEffect  : 'fade',
        closeEffect : 'fade',
        openSpeed   : 300,
        closeSpeed  : 300,
    }).trigger('click');
}

$(".lightbox").fancybox({
    width       : 640,
    height      : 380,
    fitToView   : false,
    autoSize    : false,
    closeClick  : false,
    openEffect  : 'fade',
    closeEffect : 'fade',
    openSpeed   : 300,
    closeSpeed  : 300,
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:15:23.640

您很可能（或没有）关注我的帖子[https://stackoverflow.com/a/12254290/1055987](https://stackoverflow.com/a/12254290/1055987)

我猜你的 html 缺少`ID`应该等于`href`.... 的东西

```
<a id="main-document" class="library-content-link lightbox" href="#main-document" title="Main Document"></a> 
```

...因此您将把两个选择器绑定到fancybox，即`ID`(the `hash`) 和 the `class`; 现在两者都具有相同的`title`属性。

# android - android ListView后台处理

> ID：12814745
> 
> 赞同：3
> 
> 时间：2012-10-10T08:06:01.460
> 
> 标签：android, android-listview

在我的 Android 2.2 + 应用程序中，我将使用`ListView`现有`XmlRpc`服务器并与之通信。用户将手动将项目添加到`ListView`应用程序将从 xmlrpc 服务器接收有关项目的附加信息。

该应用程序将执行以下活动：

1.  测试与 xmlrpc 服务器的连接
2.  从服务器检索信息以手动添加项目到`ListView`
3.  从服务器中检索所有项目的信息`ListView`
4.  将项目列表发送到服务器

我计划实施的这些活动如下：

1.  在`onCreate()`我将`AsyncTask`用来调用 xmlrpc 函数，然后我将在应用程序的状态栏中显示 OK/ERROR

2.  按下添加按钮后，我将使用`AsyncTask`调用 xmlrpc 函数来获取有关项目的信息（名称、价格、图像），然后我将更新刚刚添加的项目。

3.  按下 GET ALL 按钮后，我将使用`AsyncTask`调用 xmlrpc 函数来获取有关列表中所有项目的信息（名称、价格、图像），然后我将更新所有项目。

4.  按下 SEND 按钮后，我将使用`IntentService`调用 xmlrpc 函数并在对话框中显示结果。

是否适合使用`AsyncTask`并`IntentService`满足我的需求？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:13:34.937

所有互联网通信都应在单独的后台线程中发生，U NOT HOG UI THREAD，否则您的应用程序将被 android OS 杀死。列表视图不会直接更新，而是通过为其提供数据和视图的适配器进行更新。假设您已经创建并配置了适当的适配器，工作流程如下： - rpc 调用在某个后台线程中处理 - 它们更新适配器中的数据存储 - 它们通过 notifyDatasetChanged() 发出信号（来自 UI 线程） - 列表视图要求适配器提供所有可见列表项的视图 - 您的界面已更新。

当你呆在同一个 java 进程中时，你不需要弄乱意图 - 标准多线程就可以了。

# capture - 如何在java中使用jpcap捕获IP地址

> ID：12814748
> 
> 赞同：2
> 
> 时间：2012-10-10T08:06:08.963
> 
> 标签：capture, packet, icmp, jpcap

这是捕获ICMP数据包并存储在txt文件中的代码，但存储信息是二进制格式的。谁能告诉我，如何在明文文件或db文件中捕获ICMP数据包的源地址和大小[如果可能是MAC地址]进行处理。

```
import java.net.InetAddress;
import jpcap.packet.*;
import jpcap.*;
import jpcap.packet.EthernetPacket;
import jpcap.packet.IPPacket;
import jpcap.packet.TCPPacket;
import java.util.Scanner;

class capture
{
        public static void main(String[] args) throws java.io.IOException{
        //Get the Device information - Start

            //Obtain the list of network interfaces
            NetworkInterface[] devices = JpcapCaptor.getDeviceList();

            //for each network interface
            for (int i = 0; i < devices.length; i++) {
              //print out its name and description
              System.out.println(i+": "+devices[i].name + "(" + devices[i].description+")");

              //print out its datalink name and description
              System.out.println(" datalink: "+devices[i].datalink_name + "(" + devices[i].datalink_description+")");

              //print out its MAC address
              System.out.print(" MAC address:");
              for (byte b : devices[i].mac_address)
                System.out.print(Integer.toHexString(b&0xff) + ":");
              System.out.println();

              //print out its IP address, subnet mask and broadcast address
              for (NetworkInterfaceAddress a : devices[i].addresses)
                System.out.println(" address:"+a.address + " " + a.subnet + " "+ a.broadcast);
            }
        //Get the Device information - End

//Capture the packets

                System.out.println("\n \n ");
                System.out.println("Please Enter the Device Name to Capture the Packet");
                Scanner in = new Scanner(System.in);
                int a = in.nextInt();
                if(a <= devices.length)
                {
                int index=a;  // set index of the interface that you want to open.

                //Open an interface with openDevice(NetworkInterface intrface, int snaplen, boolean promics, int to_ms)
                JpcapCaptor captor=JpcapCaptor.openDevice(devices[index], 65535, false, 20);
                captor.setFilter("icmp",true);
                for(int i=0;i<50;i++){
                  //capture a single packet and print it out
                  System.out.println(captor.getPacket());
                  JpcapWriter writer=JpcapWriter.openDumpFile(captor,"s.txt");

                }

                }
                else
                System.out.println("Please Enter the correct value");
            }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T18:51:54.567

打开设备并设置icmp过滤器后调用looppacket函数：jpcap.loopPacket(-1, new capture());

在您的捕获类中声明此函数：

```
public void receivePacket(Packet pkt) {
        IPPacket pac = (IPPacket) pkt;
            System.out.println("Src: " + pac.src_ip + " Dest: " + pac.dst_ip);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:56:25.843

我还没有测试过，但是根据[文档](http://netresearch.ics.uci.edu/kfujii/Jpcap/doc/javadoc/jpcap/packet/IPPacket.html)，这应该可以获取`Source IP address`

```
System.out.println((ICMPPacket)captor.getPacket().src_ip); 
```

获得正确的 IP 地址后，使用此代码很容易获得 MAC 地址

```
 InetAddress ip;       
        ip = InetAddress.getLocalHost();
        NetworkInterface network = NetworkInterface.getByInetAddress(ip);
        byte[] mac = network.getHardwareAddress();
        System.out.print("Current MAC address : ");

        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < mac.length; i++) {
          sb.append(String.format("%02X%s", mac[i], (i < mac.length - 1) ? "-" : ""));    
        }
        System.out.println(sb.toString()); 
```

感谢[mkyong](http://www.mkyong.com/java/how-to-get-mac-address-in-java/)

# objective-c - 比较objective-c中的有符号和无符号值

> ID：12814749
> 
> 赞同：5
> 
> 时间：2012-10-10T08:06:19.117
> 
> 标签：objective-c, ios, cocoa-touch, unsigned, signed

最近我在objective-c中比较有符号和无符号值时遇到了问题。下面是这个问题的一个例子：

```
NSArray *array = [NSArray array];
NSLog(@"Count = %d", array.count);
NSLog(@"Count - 2 = %d", array.count - 2);
if (array.count - 2 > 0) {
    NSLog(@"A");
} else {
    NSLog(@"B");
} 
```

乍一看似乎应该打印以下代码`B`。但是，当您运行它时，您会看到：

```
Count = 0
Count - 2 = -2
A 
```

现在我知道问题在于比较有符号和无符号值（`array.count`is `unsigned long`）。

然而，这种错误很难发现（代码编译，没有警告，你可能没有注意到它`array.count`是无符号的，它很重要）。**问题是我怎样才能避免这种情况？有比较有符号和无符号值的安全方法吗？**

这也很有趣，为什么要`NSLog(@"%d", array.count - 2)`打印`-2`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T08:11:37.413

首先，比较有符号和无符号数字是不安全的，在您的情况下`array.count - 2`是无符号数字。

其次，它打印`-2` 是因为您使用`%d`了它是有符号整数的格式化程序。要打印无符号整数，请使用`%u`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T08:14:02.507

有一个编译器选项 ，`-Wsign-conversion`它会警告您潜在的签名问题。在 Xcode 中，您可以在 Build Settings 的 Implicit Signedness Conversion 下找到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T08:13:21.540

当你在这里

```
NSLog(@"%d", array.count - 2); 
```

由于它是指定的格式，因此您的 %d 变为有符号/无符号整数。所以它打印-2。

同样，您可以进行比较。

```
int count = array.count - 2;
if (count > 0) 
{
    NSLog(@"A");
} 
else 
{
    NSLog(@"B");
} 
```

这应该打印 B。

# xml - 如何在xml中编写无根列表

> ID：12814752
> 
> 赞同：0
> 
> 时间：2012-10-10T08:06:25.687
> 
> 标签：xml, xsd

我想使用以下格式编写一个 xml 文件：

```
<root>
    <date> 9:51 AM 10/10/2012 </date>
    <responseTime> 1.20</responseTime>
    <employee>
        <name> Mohammad</name>
    </employee>
    <employee>
        <name> Ali</name>
    </employee>
    <employee>
        <name> Mostafa</name>
    </employee>
    <employee>
        <name> Mahmoud</name>
    </employee>
</root> 
```

我可以使用 DOM 编写它吗？还是我应该手写？

（问题在于员工节点是一个没有直接父节点的序列来扭曲所有没有`date`和元素的员工`responseTime`元素）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:21:50.073

我看不出用 DOM 做这件事有什么问题。

**代码：**

```
public static void main(String[] args) throws ParserConfigurationException, IOException, TransformerException
{
    DocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder documentBuilder = builderFactory.newDocumentBuilder();
    Document document = documentBuilder.newDocument();
    Element root = document.createElement("root");
    document.appendChild(root);

    Element emp1 = document.createElement("employee");
    Element emp1name = document.createElement("name");
    emp1name.setTextContent("Mohammad");
    emp1.appendChild(emp1name);
    Element emp2 = document.createElement("employee");
    Element emp2name = document.createElement("name");
    emp2name.setTextContent("Ali");
    emp2.appendChild(emp2name);

    root.appendChild(emp1);
    root.appendChild(emp2);

    printDocument(document, System.out);
} 
```

**输出：**

```
<root>
    <employee>
        <name>Mohammad</name>
    </employee>
    <employee>
        <name>Ali</name>
    </employee>
</root> 
```

`printDocument`您可以在此[SO Answer](https://stackoverflow.com/a/2325407/357360)中查看源代码。

完整的源代码可以在[这里](http://ideone.com/bfTbl)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:22:21.400

我认为您可以使用 DOM 编写它（“employee”的父节点是“root”），但是例如用“employees”包装“employee”节点会更好......

# c++ - 将 fstat 与 Qt QDialog 一起使用

> ID：12814754
> 
> 赞同：0
> 
> 时间：2012-10-10T08:06:40.543
> 
> 标签：c++, c, qt

好吧，我想我在解决两个同名函数时遇到了问题，我不知道如何解决。

我有一个 Qt 类，它是 QDialog (Qt) 的子类。我想使用 'fstat' 使用如下代码获取有关文件的信息

```
struct stat file_info;
int hd = open("/home/test/file.xml", O_RDONLY);
fstat(hd, &file_info);
close(hd); 
```

但是当我这样做时，我会从编译器那里得到这个抱怨。

```
error: no matching function for call to 'Test::open(const char [19], int)'
/usr/local/Trolltech/Qt-4.7.3/include/QtGui/qdialog.h::99:10: note: candidate is: void QDialog::open() 
```

有没有办法解决这个问题？

谢谢。

**回答：**

正如[Caladan 所](https://stackoverflow.com/users/1022729/caladan)提到的， ::open() 成功了。第二个答案（使用 stat 代替 fstat）同样有效。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:11:35.520

您可以尝试调用 ::open() ，这将提示编译器不应在当前范围内查找。

您还可以使用 stat() 来获取文件名而不是描述符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:25:47.250

你有这些头文件吗？

```
#include <sys/types.h> 
#include <sys/stat.h> 
#include <fcntl.h> 
```

# html - 一页上传和下载

> ID：12814757
> 
> 赞同：0
> 
> 时间：2012-10-10T08:06:48.837
> 
> 标签：html, asp-classic, upload, download

我创建了支持下载和上传功能的 asp 表单。见下文

```
<html>
    <head>
        <title>Testing</title>
        <script type="text/javascript">

            function clickUpload() {
                document.getElementById("UploadFile").click();
            }

            function clickDownload() {
                document.getElementById("DownloadForm").submit();
            }

            function MakeUpload() {
                document.getElementById("UploadForm").submit();
            }

        </script>
    </head>
    <body>
        <form action="Test1.asp">
            <input type="button" value="Upload" onclick="clickUpload();" />
            <input type="button" value="Download" onclick="clickDownload();" />
            <form id="UploadForm" action="test3.asp" enctype="multipart/form-data">
                <input type="file" id="UploadFile" onchange="MakeUpload();" style="display:none" />
            </form>
            <form id="DownloadForm" action="Test4.asp">
            </form>
        </form>
    </body>
</html> 
```

目前，上传不起作用。我该如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:42:00.543

不能嵌套 FORM 标记。如果您删除外部 FORM 标签，它应该可以工作。但是你需要提交给“Test1.asp”的FORM吗？

```
<html>
    <head>
        <title>Testing</title>
        <script type="text/javascript">

            function clickUpload() {
                document.getElementById("UploadFile").click();
            }

            function clickDownload() {
                document.getElementById("DownloadForm").submit();
            }

            function MakeUpload() {
                document.getElementById("UploadForm").submit();
            }

        </script>
    </head>
    <body>
            <input type="button" value="Upload" onclick="clickUpload();" />
            <input type="button" value="Download" onclick="clickDownload();" />
            <form id="UploadForm" action="test3.asp" enctype="multipart/form-data">
                <input type="file" id="UploadFile" onchange="MakeUpload();" style="display:none" />
            </form>
            <form id="DownloadForm" action="Test4.asp">
            </form>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:29:22.893

主要问题在于包含其他两个表单的主表单。您必须关闭它，因为 java 脚本无法找到上传表单

# iphone - MPMoviePlayerViewController 虽然通过了身份验证，但无法播放视频

> ID：12814759
> 
> 赞同：1
> 
> 时间：2012-10-10T08:06:54.203
> 
> 标签：iphone, ios, mpmovieplayercontroller, mpmovieplayer

尝试使用 MPMoviePlayerViewController 观看视频时出现此错误。视频网址在 Safari 浏览器上运行良好，但在 iPhone/iPad 上却不行。

```
NSConcreteNotification 0x122b9ab0 {name = MPMoviePlayerPlaybackDidFinishNotification; object = <MPMoviePlayerController: 0x12243330>; userInfo = {
    MPMoviePlayerPlaybackDidFinishReasonUserInfoKey = 1;
    error = "Error Domain=MediaPlayerErrorDomain Code=-11829 \"Cannot Open\" UserInfo=0x122bc190 {NSLocalizedDescription=Cannot Open}"; 
```

使用 Charles 代理，我可以看到那里的请求：

```
Status  Complete
Response Code   401 Unauthorized
Protocol    HTTP/1.1
Method  GET
Content-Type    text/html 
```

然后

```
Status  Complete
Response Code   206 Partial Content
Protocol    HTTP/1.1
Method  GET
Content-Type    video/mp4 
```

然后

```
Status  Complete
Failure Client closed connection before receiving entire response
Response Code   206 Partial Content
Protocol    HTTP/1.1
Method  GET
Content-Type    video/mp4 
```

同样的问题在这里[iOS：播放需要身份验证的视频在 QuickLook 中有效，但在 MPMoviePlayerViewController 中无效](https://stackoverflow.com/questions/9790697/ios-playing-video-that-needs-authentication-works-in-quicklook-but-not-in-mpmov)

# function - 如何从 CLI 调用 PHP 函数？

> ID：12814762
> 
> 赞同：1
> 
> 时间：2012-10-10T08:07:10.153
> 
> 标签：function, call, command-line-interface, php

假设我有一个私有函数`addUser()`，`function.php`它`$username`作为输入变量并做了一些事情：

```
function addUser($username) {

//do some stuff

} 
```

现在我想调用这个函数并传递值 $username，如果可能的话，使用 PHP CLI。我想这在外面是行不通的，`function.php`因为它是私人的，但我怎么能这样做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T08:12:45.817

```
php -r 'include("/absolute/path/to/function.php"); addUser("some user");' 
```

这应该有效。因为您基本上是在`'`s 之间执行所有代码。并且您可以包括`function.php`并且应该**适当地**调用`addUser()`.

请参阅[phpdoc](http://www.php.net/manual/en/features.commandline.usage.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T08:10:03.883

您将命令行参数传入[argv](http://php.net/manual/en/reserved.variables.argv.php)数组：

```
function addUser($username) {

//do some stuff

}

addUser( $argv[1] ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T08:10:18.977

您可以使用 $argv。$argv[0] = 文件名，$argv[1] = 文件名之后的第一件事。

即 php function.php "some arg" 将是 addUser("some arg");

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-29T11:26:01.093

```
function funcb()
{
    echo 'yes';
}

if (php_sapi_name() === 'cli') {
    if (count($argv) === 1) {
        echo 'See help command'.PHP_EOL;
        exit();
    }

    if (function_exists($argv[1])) {
        $func = $argv[1];
        array_shift($argv);
        array_shift($argv);
        $func(...$argv);
    }
} 
```

这对我有用！

# javascript - 使用用户脚本时如何检测鼠标点击？

> ID：12814773
> 
> 赞同：1
> 
> 时间：2012-10-10T08:07:48.430
> 
> 标签：javascript, jquery, greasemonkey, userscripts, tampermonkey

我尝试为我每天使用的一些网站添加一些功能。我想添加一个功能，当我点击某些链接时会删除一些元素。所以我使用*Tampermonkey*并尝试测试以下代码：

```
function removeSth(){

    $('a').click(function(){
        alert ("warning");
        return false;
    });
}
removeSth(); 
```

可悲的是，它不起作用。这就是它所说的：

> ReferenceError: $ 未定义
> 
> 在 removeUsers (eval at (eval at eventHandler (eval at `<anonymous>` (chrome-extension://dhdgffkkebhmkfjojejmpbldmpobfkfo/content.js:56:21))), `<anonymous>`:65:5)

老实说，我不知道这些是什么意思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:47:50.110

用户脚本和大多数 Greasemonkey 脚本在沙箱中运行。因此，脚本需要自行加载 jQuery（`$`您的代码正在使用的对象），或者需要注入代码以使用目标页面的 jQuery 版本。

在跨浏览器脚本中使用 jQuery 的最佳方式是通过[这种令人惊叹的绝妙方法](https://stackoverflow.com/a/12751531/331508)。(^_^)

因此，您的脚本将变为：

```
// ==UserScript==
// @name     _Mouse-click detect
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant    GM_info
// ==/UserScript==

function GM_main ($) {
    function removeSth () {
        $('a').click (function () {
            alert ("warning");
            return false;
        } );
    }
    removeSth ();
}

if (typeof GM_info !== "undefined") {
    GM_main ($);
}
else {
    add_jQuery (GM_main);
}

function add_jQuery (callbackFn, jqVersion) {
    var jqVersion   = jqVersion || "1.7.2";
    var D           = document;
    var targ        = D.getElementsByTagName ('head')[0] || D.body || D.documentElement;
    var scriptNode  = D.createElement ('script');
    scriptNode.src  = 'http://ajax.googleapis.com/ajax/libs/jquery/'
                    + jqVersion
                    + '/jquery.min.js'
                    ;
    scriptNode.addEventListener ("load", function () {
        var scriptNode          = D.createElement ("script");
        scriptNode.textContent  =
            'var gm_jQuery  = jQuery.noConflict (true);\n'
            + '(' + callbackFn.toString () + ')(gm_jQuery);'
        ;
        targ.appendChild (scriptNode);
    }, false);
    targ.appendChild (scriptNode);
} 
```

* * *

* * *

**但是，**对于 Firefox-Greasemonkey 和 Tampermonkey，您可以将脚本简化为：

```
// ==UserScript==
// @name     _Mouse-click detect
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant    GM_info
// ==/UserScript==

function removeSth () {
    $('a').click (function () {
        alert ("warning");
        return false;
    } );
}
removeSth (); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:17:13.153

你必须在你的用户脚本中包含 jQuery。userscripts.com 上有许多用户脚本版本的 jQuery，您可以`@require`使用它们。

虽然只是为了检测点击，但使用`addEventListener`起来要轻得多。

顺便说一句：您确实需要学习阅读错误消息。

```
ReferenceError: $ is not defined 
```

告诉你你需要知道的一切。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T09:14:09.503

如果站点已经有 jQuery.why 加载另一个 jquery 库，请使用它，如下所示。我也使用 jq 而不是 $ 因为我已经在许多站点中看到了问题，它更安全，但又是可选的。

```
 // ==UserScript==
    // @name           jquery usage
    // @namespace      zevy_boy
    // @include        http://www.wwe.com/*
    // ==/UserScript==

    function jqx(){
    jq=jQuery;
    //todo
    }

    var head= document.body;
    var script= document.createElement('script');
    script.type= 'text/javascript';
    script.text= jqx.toString()+"jhqx();";
    head.appendChild(script); 
```

# android - 当设备电池 电量不足时，android 策略是什么？

> ID：12814774
> 
> 赞同：4
> 
> 时间：2012-10-10T08:07:52.170
> 
> 标签：android, mdm, application-lifecycle

我想知道当设备电池​​电量不足时哪些模块 android “关闭”，以及按什么顺序。

我对这样的情况特别感兴趣：假设我的应用程序正在运行，并且在前台。现在我正在启动启动另一个应用程序的意图。电池电量不足会阻止其他应用程序启动吗？

我也想知道我是否可以以某种方式控制首先要喊叫什么，以及什么应该保持活动状态，直到设备几乎达到 0%。

我的应用程序是非市场应用程序，针对从 MDM 系统管理的特定设备，所以如果可能的话 - 控制类型的设置是合法的

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:34:25.377

AFAIK，股票 Android 没有实现“低电量杀手”。一些供应商修改（HTC 和可能的其他），但没有明确的标准。他们通常会关闭蓝牙、GPS、WiFi，最后关闭数据，并且可能会调暗屏幕。如果您针对特定设备，您应该与生产固件的人合作，让他们了解它的确切作用（如果有的话）。

# wordpress - 如何手动添加到 wordpress 的链接？

> ID：12814776
> 
> 赞同：1
> 
> 时间：2012-10-10T08:07:59.523
> 
> 标签：wordpress, hyperlink

我想问一下，是否有可能不是手动按下“添加链接按钮”来添加链接，而是为此添加 HTML 代码？让我们假设您不是按下按钮并指定名称和链接地址，而是添加一个 HTML，在发布后将其更改为链接名称和链接地址？

我在我的一篇文章中粘贴了一个 HTML 链接代码代码，但最后结果不是正确的链接。

那么有人可以帮我解决这个问题吗？

非常感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:03:11.837

如果您在所使用的 WYSIWYG 编辑器上方切换 Visual/HTML 选项卡，则可以添加 HTML。另外，请阅读WordPress Codex的[Writing Post页面](http://codex.wordpress.org/Writing_Posts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:15:25.397

put this code in `text` tab near `visual` tab. where code is present .

# postgresql - PostGIS：从其他点查找一定半径内的点

> ID：12814784
> 
> 赞同：6
> 
> 时间：2012-10-10T08:08:32.627
> 
> 标签：postgresql, geospatial, postgis

我在 PostgreSQL/PostGIS 中有一个`trip`以两个几何列命名的表：（`source_geom`）`POINT`和`destination_geom`（`POINT`）表示旅程的开始和结束位置。

我还有一个单独的表格，以`business`几何列`office_geom`( `POINT`) 命名，指示办公室的位置。

我的目标是从表中选择`trip`目的地在距离*任何办公地点*1000 米以内的记录。

我需要触发什么查询才能获得所需的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:30:20.980

可以使用子查询或连接来完成。使用子查询的示例：

```
SELECT * FROM business 
WHERE EXISTS(
    SELECT 1 FROM trip
    WHERE ST_Distance_Sphere(trip.destination_geom, business.office_geom) < 1000
) 
```

但是这个查询不会使用索引，并且在大数据集上可能需要很长时间。如果需要，可以`geography`从 创建列`geometry`，在地理列上创建空间索引，并使用[ST_DWithin](http://postgis.refractions.net/docs/ST_DWithin.html)：

```
select * 
  from business b
  join trip t on ST_DWithin(trip.destination_geogr, business.office_geogr, 1000) 
```

# c4 - C4 是否支持捏合手势？

> ID：12814787
> 
> 赞同：2
> 
> 时间：2012-10-10T08:08:47.910
> 
> 标签：c4

我刚刚下载了 C4，并试图在一些示例代码中实现捏合手势，而我已经有了滑动手势。代码如下：

```
[ball addGesture:SWIPERIGHT name:@"swipeR" action:@"swipeBall"];
[ball addGesture:PINCH name:@"pinch" action:@"zoomBall"]; 
```

一旦我添加带有 PINCH 的第二行，我就会在编译时收到以下错误消息，这似乎很奇怪，因为 PINCH 列在下面错误消息中提到的列表中。有什么想法吗？

错误信息：

`2012-10-10 00:58:06.166 Test[24121:10703] *** Assertion failure in -[MyBall addGesture:name:action:], /Users/moi/Development/C4Installer/libC4/libC4/C4Control.m:319`

`2012-10-10 00:58:06.184 Test[24121:10703] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'The gesture you tried to use is not one of: TAP, PINCH, SWIPERIGHT, SWIPELEFT, SWIPEUP, SWIPEDOWN, ROTATION, PAN, or LONGPRESS'`

`*** First throw call stack: (0x320022 0x1730cd6 0x2c8a48 0x99c2cb 0xcdd3 0x380b 0x3190 0xe2b386 0xe2c274 0xe3b183 0xe3bc38 0xe2f634 0x3c2eef5 0x2f4195 0x258ff2 0x2578da 0x256d84 0x256c9b 0xe2bc65 0xe2d626 0x2d3d 0x2ca5) terminate called throwing an exception(lldb)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:46:30.087

不幸的是，我还没有实现 PINCH 手势。该变量是可用的，就像一个占位符一样。我希望尽快将它纳入 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T00:13:05.910

我想我设法实现了这一点。

我进入 c4CanvasController 并将其添加到 addGesture 方法中：

```
case PINCH:
            recognizer = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:NSSelectorFromString(methodName)];
            break; 
```

然后我像往常一样将手势添加到项目中：

```
[self addGesture:PINCH name:@"pinchme" action:@"customPinchMethod:"]; 
```

我为捏合手势回调方法定义了类似捏合和缩放的行为。

```
 -(void)customPinchMethod:(UIPinchGestureRecognizer*)sender {
    NSLog(@"Pinching");

    NSLog(@"latscale = %f",mLastScale);

    mScale = sender.scale*mLastScale;
    if (sender.state == UIGestureRecognizerStateEnded) mLastScale = mScale;

    CGAffineTransform currentTransform = CGAffineTransformIdentity;
    CGAffineTransform newTransform = CGAffineTransformScale(currentTransform, mScale ,mScale);
    self.view.transform = newTransform; 
```

}

# c++ - 使用 TinyXML 查找特定文本值

> ID：12814788
> 
> 赞同：2
> 
> 时间：2012-10-10T08:08:49.120
> 
> 标签：c++, tinyxml

我有如下的 xml 文件。我想在不同时间查找特定的文本值。如何使用 TinyXML 访问文本值

```
 -<language>
      <text value="Advanced Sensor Controls" parameter="title"/>
      <text value="Refresh" parameter="refresh_button"/>
      <text value="Show" parameter="button_show"/>
      <text value="Hide" parameter="button_hide"/>
      <text value="Raw Command" parameter="label_raw_command_title"/>
      <text value="Expected RX" parameter="label_raw_command_expected_rx"/>
    </language> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T09:13:34.467

在这样的代码的帮助下：

```
TiXmlDocument file( xmlfilename );
TiXmlElement *language = file.FirstChildElement("language");
for(TiXmlElement *text =
        language->FirstChildElement(
                "text");
    text;
    text =
        language->NextSiblingElement() )
{
    text->Attribute("value"); // this returns text in value=""
    text->Attribute("parameter"); // this returns text in parameter=""
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T08:30:41.707

1.  打开`TiXmlDocument`;
2.  获取根`TiXmlElement`；
3.  获取`FirstChild()`命名的“文本”；
4.  获取`Attribute()`命名'value'的值，用它做点什么；
5.  获取`NextSibling()`名为“文本”的元素；
6.  重复直到没有兄弟姐妹。

# java - 在控制台中使用 Scanner.nextLine() 或 Scanner.hasNext() 时是否可以不等待输入？

> ID：12814792
> 
> 赞同：1
> 
> 时间：2012-10-10T08:09:02.127
> 
> 标签：java, console, user-input

我正在使用 Java 来解决 SPOJ ( [http://www.spoj.pl](http://www.spoj.pl) ) 问题，其中很多显然是使用控制台输入。问题是，他们中的一些人没有说会有多少行输入，所以当没有更多内容时关闭程序由我决定。我正在使用扫描仪：

```
Scanner s = new Scanner(System.in);
String str = s.nextLine(); 
```

不幸的是，它不会读取下一行，但是...等待用户输入，然后获取下一行。这也适用于

```
s.hasNext(); 
```

所以我不知道什么时候完成这个程序。有没有办法在不等待的情况下读取输入行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:36:10.170

为他们提供输入规范几乎是竞赛编程问题的标准（我相信你知道）。我浏览了网站上的一些问题，它们都被指定了。您是否有指向没有完整规范的问题的链接？

在这种情况下，向管理员发送电子邮件以更新规范会很有用。除此之外，`Scanner.hasNextLine()`如果您已到达输入的末尾，则应返回 false。

*更新*输入正在从文件中传输，因此`hasNextLine()`应按需要运行。到目前为止它对你没有用吗？您确定您的代码不会以其他方式花费太长时间吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:38:32.303

你做错了。您必须继续阅读，直到没有更多输入，其中输入的结尾被定义为空。等待超时所花费的时间将导致您的代码无法通过 spoj 测试 - spoj 对速度非常严格。

说我给你以下问题：

给定一个整数列表，每个整数占一行，打印出所有整数的总和。

```
1
2
3
4
5 
```

我们不知道是否或何时会有更多意见。关键是没有人坐在那里输入数字。输入直接从文件通过管道传输到程序，并且将以 null 结尾（就像文件一样）。

对 spoj 有用的内容如下：

```
 BufferedReader br = new BufferedReader(new InputStreamReader(System.in));

    String line = "";
    int sum = 0;
    while ((line = br.readLine()) != null) {
        sum += Integer.parseInt(line);
    }
    System.out.println(sum); 
```

如果我遗漏了一些奇怪的 spoj 案例，我请求你用 spoj 问题对此发表评论，我会告诉你如何阅读输入。绝对不是计时器或线程或任何愚蠢的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T09:04:30.477

如果您不使用智能算法来找到解决方案，有些问题会花费太多时间。我建议：

*   首先，要***确切***知道输入是如何给出的
*   然后，***准确***理解`NZEC`（和其他错误代码）的含义。他们有一个[论坛](http://www.spoj.pl/forum/)
*   此时，如果您的程序在执行时仍然被杀死，这仅意味着您需要找到一个更好的算法，它会花费更少的时间。

我建议将输入流作为执行工作的函数的参数传递，并将文件作为程序的可选参数。创建多个文件输入，在文件输入流上测试您的代码，并尝试检测影响程序运行时间的因素。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-10T08:13:44.560

做一个定时器变量

```
Scanner s = new Scanner(System.in);
// Start timer here
String str = s.nextLine();
//If a next line is read, reset timer. 
```

向计时器添加一个事件，以便如果它到期，您的程序将关闭。

# java - Spring @Transactional(readOnly=true) 恢复属性？

> ID：12814801
> 
> 赞同：2
> 
> 时间：2012-10-10T08:09:39.777
> 
> 标签：java, spring, hibernate, transactional

只是一个简单的问题，其 Car-entity 持久字段颜色为红色：

```
00  @Transactional public class MyBean{...
01    public void test(){
02        Car c = s.find(Car.class,1);
03        c.setColor("blue");
04        test1(c);
05        System.out.println(c.getColor());   
06    }
07    @Transactional(readOnly=true)
08    public void test1(Car c){
09        c.setName("black");
10    }
11  } 
```

假设，我们在 Spring ORM TX-Transactional-Annotation 环境中，具有事务语义和事务范围的持久化上下文。

什么将打印到控制台？

*   红色的
*   蓝色的
*   黑色的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T08:20:55.363

假设在调用同一实例的方法和 NESTED 事务传播时启用事务语义：这取决于持久性上下文的范围。

假设事务范围的持久性上下文： `black`打印到控制台。car 实例是分离的，因为它是在只读事务之外获取的，并且没有合并到只读事务中。在分离的实例上调用 setter 是安全的（就像调用`setColor("blue")`.

假设持久性上下文的扩展范围： `black`也被打印。来自 javadoc`@Transactional`

如果

> 无法解释只读提示的事务管理器在请求只读事务时不会抛出异常。

并且来自 JPA 2.0 Spec Section 2.4.1.2 Mapping of Derived Identities：

> 对应于关系的嵌入 id 属性被提供者视为“只读”——也就是说，应用程序对它们的任何更新都不会传播到数据库。

但我不是 100% 确定，如果没有抛出异常。由于 color 属性不是嵌入的 id，因此行为可能会有所不同。

如果事务语义可通过代理获得，请参阅[Adrian Shum 的答案](https://stackoverflow.com/a/12816801/1466267)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T10:06:34.887

相信你在 Spring 中掉入了 AOP 的陷阱。

Spring 中的事务是通过 AOP 实现的，而 Spring 中的 AOP 是通过围绕实际目标的代理来实现的。

您已经为 MyBean 注释了 @Transactional。假设其他人正在调用 的实例`MyBean.test()`，它实际上并没有直接与该对象“交谈”。有一个代理，看起来完全一样`MyBean`，但它创建事务，然后调用实际的`MyBean.test()`，然后是提交/回滚。

它是这样的：

```
 test()                     test()
[Caller] ------->  [MyBean Proxy]  ------> [MyBean] 
```

但是，当您调用`test1()`in时`test()`，这实际上意味着`this.test1()`，这意味着您正在直接调用 MyBean 实例：

```
 [MyBean Proxy]     [MyBean] <--
                                |       |  test1(c)
                                --------- 
```

如果不通过`MyBean Proxy`（负责执行事务技巧），您的调用`test1()`实际上与事务无关。这只是一个简单的方法。

所以你知道答案了。

Moreover, even you manage to invoke through the proxy, it is not going to change the story:

```
 -> [MyBean Proxy]     [MyBean]
test1(c) |                         |
          ------------------------- 
```

That's because the instance of `Car` you passed to `test1()` is retrieved in the transaction (that means, Hibernate session) around `test()`, and whatever you change in `test1()`, you are not doing anything with the Hibernate session you created separately in `test1()` (if you use REQUIRED_NEW propagation). You are simply changing the state of the object passed in. Therefore, calling `test1(c)` is still nothing but a plain method call.

# spring - SAML 角色/权限

> ID：12814802
> 
> 赞同：0
> 
> 时间：2012-10-10T08:09:49.023
> 
> 标签：spring, spring-security, saml, saml-2.0

我在我的春季项目中使用 saml。我进行了身份验证，但我无法使用角色或权限部分。我想做这个。我找不到任何关于这个的例子。

你能帮我解决这个问题吗？

最好的问候，埃兹吉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T21:56:54.430

您的 IdP 需要配置为公开有关此用户的角色信息，然后 SP 可以尝试从断言中检索它们。那是你要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-21T23:41:28.937

我不完全确定这里的要求，但是对于 WSO2，将角色信息从 IdP 发送到 SP 需要[这里](http://sureshatt.blogspot.in/2012/11/getting-user-claims-over-saml-sso-token.html)提到的配置。

# opencv - SIFT描述符匹配的有效方法

> ID：12814808
> 
> 赞同：6
> 
> 时间：2012-10-10T08:10:06.713
> 
> 标签：opencv, match, kdtree, feature-descriptor

有 2 个图像 A 和 B。我从中提取关键点（a[i] 和 b[i]）。
我想知道如何有效地确定 a[i] 和 b[j] 之间的匹配？

对我来说，显而易见的方法是将 A 中的每个点与 B 中的每个点进行比较。但是对于大型图像数据库来说，它非常耗时。我怎样才能将点 a[i] 与 k 范围较小的 b[k] 进行比较？

我听说**kd-tree**可能是一个不错的选择，不是吗？有没有关于*kd-tree 的**好例子*？

 *还有其他建议吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T11:42:19.057

KD 树以一种在执行匹配时找到最相似的描述符的速度非常快的方式存储训练好的描述符。

使用 OpenCV，使用 kd-tree 真的很容易，我会给你一个 flann 匹配器的例子：

```
flann::GenericIndex< cvflann::L2<int> >  *tree; // the flann searching tree
tree = new flann::GenericIndex< cvflann::L2<int> >(descriptors, cvflann::KDTreeIndexParams(4)); // a 4 k-d tree 
```

然后，当您进行匹配时：

```
const cvflann::SearchParams params(32);
tree.knnSearch(queryDescriptors, indices, dists, 2, cvflann::SearchParams(8)); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-10T08:24:36.293

问题是您实际上想要确定两个图像之间的**关键点匹配或计算****相似性度量**的天气。

如果你想确定一个匹配，那么恐怕你将不得不通过两个图像之间所有可能的描述符对进行暴力搜索（有一些更高级的方法，例如 FLANN - Fast Approximate Nearest Neighbor Search，但加速是如果每张图像的关键点少于或大约 2000 个，则并不重要——至少根据我的经验）。为了获得更准确的匹配（不是更快，只是更好的匹配），我建议你看看：

*   [DG 洛维。来自尺度不变关键点的独特图像特征](http://www.google.fr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCUQFjAA&url=http%3A%2F%2Fwww.cs.ubc.ca%2F~lowe%2Fpapers%2Fijcv04.pdf&ei=yC91ULyZIK-q0AXr5IHQBw&usg=AFQjCNExaFk5YsadEaL01y1K6FRDDh5u3g)——与第二接近匹配的比较
*   [J. Sivic 和 A. Zisserman。Video Google：视频中对象匹配的文本检索方法](http://www.google.fr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCQQFjAA&url=http%3A%2F%2Fwww.robots.ox.ac.uk%2F~vgg%2Fpublications%2Fpapers%2Fsivic03.pdf&ei=9C91UMX7HOT80QWSj4FY&usg=AFQjCNFwUxOCF7jpQVtOg5x-HLoH7WW7bg)——空间一致性部分

另一方面，如果您只想对*大型*数据库进行相似性度量，那么合适的起点是：

*   [D. Nistér 和 H. Stewénius。使用词汇树进行可扩展识别](http://www.google.fr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCUQFjAA&url=http%3A%2F%2Fwww.vis.uky.edu%2F~stewe%2Fpublications%2Fnister_stewenius_cvpr2006.pdf&ei=ZjB1UNSdKqTX0QXvxIG4DA&usg=AFQjCNGM50w5493n0IDBtFdQ5C4q3SVPFQ)——他们使用基于称为*词汇树*的结构的分层方法来计算查询图像和大型数据库中的图像之间的相似性度量
*   [J. Sivic 和 A. Zisserman。视频 Google：视频中对象匹配的文本检索方法](http://www.google.fr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCQQFjAA&url=http%3A%2F%2Fwww.robots.ox.ac.uk%2F~vgg%2Fpublications%2Fpapers%2Fsivic03.pdf&ei=9C91UMX7HOT80QWSj4FY&usg=AFQjCNFwUxOCF7jpQVtOg5x-HLoH7WW7bg)——与上述相同的论文，但它对理解*Nistér、Stewénius中的方法非常有帮助*

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-10T09:05:24.377

在 OpenCV 中，实施了几种策略来匹配关键点集。查看有关[描述符匹配器的通用接口的](http://docs.opencv.org/modules/features2d/doc/common_interfaces_of_descriptor_matchers.html)文档。*

# vba - 从主窗体以子窗体窗体驱动 MS Access 查询

> ID：12814810
> 
> 赞同：2
> 
> 时间：2012-10-10T08:10:12.087
> 
> 标签：vba, combobox, ms-access-2010, subforms

我有一个数据表形式的子表单。

我希望根据主窗体上的组合框过滤此子窗体。子表单的数据来自查询。我已将此查询的其中一个字段的条件设置为等于：

```
 [Forms]![Form_Data_Update]![cbo_ReportSelection] 
```

主窗体是 Form_Data_Update，组合框是 cbo_ReportSelection。

当我更改我放入的组合框时使子表单刷新

```
 Private Sub cbo_ReportSelection_AfterUpdate()
    DoCmd.OpenQuery ("Aggregate_Leanboard_Discipline_Grouping")
    End Sub 
```

是否有另一种方法不会导致在新选项卡中打开查询？我希望它只在子表单中刷新。我试过：

```
 Me!Form_Leanboard_Discipline_Grouping_Subform.Requery 
```

但这不起作用我收到错误“2465”Microsoft 找不到字段“Form_Leanboard_Discipline_Grouping_Subform”。

我正在使用 Access 2010。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:27:29.250

子窗体包含在子窗体控件中。使用子窗体控件的名称，而不是窗体的名称。它们可能有不同的名称。

```
Private Sub cbo_ReportSelection_AfterUpdate()
    Me!SubformControlName.Form.Requery
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:15:21.660

我跟着你们，我遇到了错误，对我有用的编码是

```
Private Sub cbo_ReportSelection_AfterUpdate()

    Me.What ever Your SubForm Name.Requery

 End Sub 
```

这可能与上面的内容相同，如果它被删除，但是当我阅读上面的评论时，它看起来好像你必须在某个地方放置“SubFormControl”。

对于那些不知道如何找到子表单名称的人，您可以转到设计视图并左键单击子表单，然后在功能区中的属性中，表单的名称将出现在右侧的属性选项卡中你的屏幕。

另请注意，如果您的子表单名称有空格，则必须将“_”放在空格所在的位置。

Good Luck guys I consider myself as a rookie.. so i try to explain as much as i can for the other guy that would read this ten years after us... i need this code to complete a search bar in my access DB. I'm making a genealogy database for class and the first implementation is due today and this code just saved my ass from receiving and B to probably and A.. Thank You

# actionscript-3 - 创建硬翻页效果

> ID：12814813
> 
> 赞同：0
> 
> 时间：2012-10-10T08:10:29.890
> 
> 标签：actionscript-3, flash, page-flipping

那里有几个翻页源代码。这里只是我已经看过的几个：

*   [http://pageflip.hu/pageflip2/pageflip_v225_source.php](http://pageflip.hu/pageflip2/pageflip_v225_source.php)
*   [https://github.com/nidin/as3-flip-book](https://github.com/nidin/as3-flip-book)
*   [http://www.rubenswieringa.com/code/as3/flex/Book/source/](http://www.rubenswieringa.com/code/as3/flex/Book/source/)
*   [http://www.megazine3.de/home.en.html](http://www.megazine3.de/home.en.html)

但是，它们都不能真正满足我的需求。我不需要任何卷页效果，我想要的只是硬封面效果，但适用于所有页面。是否还有其他示例对所有页面都具有硬翻页效果？或者是否有任何关于封面的矩阵转换如何工作的文档 - 因为我不太明白？专辑的内容将包括视频、音频和图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T12:20:50.553

您不需要任何这些库来获得精装效果，因为它们通常专注于卷曲。只需使用内置功能：rotationY [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#rotationY](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#rotationY)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:18:39.237

在这个库中：
[http](http://www.rubenswieringa.com/code/as3/flex/Book/source/)
`Page` ://www.rubenswieringa.com/code/as3/flex/Book/source/类有属性`hard`。如果设置`true`它比页面将变得困难。您可以为每个页面设置此属性。比如看他的方法：

```
 private function toggleHard (page:Page):void {
            hard_btn.toolTip = (page.hard) ? "make next page hard" : "make next page fluid";
            hardBtnIcon = (page.hard) ? hardBtnIcon1 : hardBtnIcon2;
            page.hard = !page.hard;
            hard_btn.invalidateDisplayList();
        } 
```

# wpf - 带有样式的 WPF 超链接中的文本换行

> ID：12814814
> 
> 赞同：0
> 
> 时间：2012-10-10T08:10:44.650
> 
> 标签：wpf, hyperlink, underline

```
<Hyperlink Command="{Binding Path=Source1}">
    <TextBlock x:Name="DescriptionText" TextWrapping="Wrap">
        <TextBlock.Style>
            <Style>
                <Setter Property="TextBlock.Text" Value="Click here to set Source1"/>               
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Path=IsActive}" Value="False">
                        <Setter Property="TextBlock.Text" Value="{Binding Path=Source1Des, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </TextBlock.Style>
    </TextBlock>
</Hyperlink> 
```

我只想下划线修剪文本。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:51:54.070

使用 Run 代替 Textblock

```
 <TextBlock TextWrapping="Wrap">
        <Hyperlink Command="{Binding Path=Source1}">
            <Run>
                <Run.Style>
                    <Style TargetType="Run">
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Text"  Value="My mouse is over" />
                            </Trigger> 
                        </Style.Triggers>
                        <Setter Property="Text"  Value="Click here to set Source1" />
                    </Style>
                </Run.Style>
            </Run>
        </Hyperlink>
    </TextBlock> 
```

另请参阅[此 stackoverflow 线程](https://stackoverflow.com/questions/1266668/text-wrapping-in-wpf-hyperlink)

# ruby - 有条件地对字符串数组进行排序

> ID：12814815
> 
> 赞同：-2
> 
> 时间：2012-10-10T08:10:51.393
> 
> 标签：ruby, arrays, sorting

我有一个数组

```
[['Part', 'create'], ['Part', 'update'], ['Part', 'delete'], ['Part', 'release'], ['Plan', 'create'], ['Plan', 'update'], ['Plan', 'delete'], ['Plan', 'release'], ['Inspection', 'create'], ['Inspection', 'update'], ['Inspection', 'delete'], ['Inspection', 'release'], ['User', 'create'],['User', 'update']] 
```

我希望它按**零件、计划、检查**和**创建、更新、删除、发布的顺序排序**

我希望它按上述顺序排序的方式是原因

```
Part 
  has_many plans
Plan 
  belongs_to :part
  has_many inspections
Inspection
  belongs_to :plan 
```

我已经使用 cancan 实现了动态角色和权限。需要为用户分配操作（创建、更新、删除、发布）的权限，并且主题类（零件、计划、检查、用户）的显示顺序必须与其关系相同。

当我使用**排序**时，我得到

```
a.sort
 => [["Inspection", "create"], ["Inspection", "delete"], ["Inspection", "release"], ["Inspection", "update"], ["Part", "create"], ["Part", "delete"], ["Part", "release"], ["Part", "update"], ["Plan", "create"], ["Plan", "delete"], ["Plan", "release"], ["Plan", "update"], ["User", "create"], ["User", "update"]] 

a.sort_by{|x, y| x[0] <=> y[0]}
=> [["Part", "create"], ["Part", "update"], ["Part", "delete"], ["Part", "release"], ["Plan", "create"], ["Plan", "update"], ["Plan", "delete"], ["Plan", "release"], ["Inspection", "create"], ["Inspection", "update"], ["Inspection", "delete"], ["Inspection", "release"], ["User", "create"], ["User", "update"]] 
```

可以以某种方式使用**索引**方法吗？**以后可能还会添加新的主题类和操作。所以排序顺序可能会改变。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:24:40.663

```
a = [['Part', 'create'], ['Part', 'update'], ['Part', 'delete'], ['Part', 'release'], ['Plan', 'create'], ['Plan', 'update'], ['Plan', 'delete'], ['Plan', 'release'], ['Inspection', 'create'], ['Inspection', 'update'], ['Inspection', 'delete'], ['Inspection', 'release'], ['User', 'create'],['User', 'update']]
order = [%w{Part Plan Inspection}, %w{create update delete release}] 
```

如果我们假设所有未指定的元素的权重为 999（例如`User`在您的示例中），这将按给定顺序对输入数组进行排序：

```
a.sort_by{|e| e.zip(order).map{|i,j| j.index(i) || 999}}
=> [["Part", "create"],
 ["Part", "update"],
 ["Part", "delete"],
 ["Part", "release"],
 ["Plan", "create"],
 ["Plan", "update"],
 ["Plan", "delete"],
 ["Plan", "release"],
 ["Inspection", "create"],
 ["Inspection", "update"],
 ["Inspection", "delete"],
 ["Inspection", "release"],
 ["User", "create"],
 ["User", "update"]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:37:14.827

从Miaden的上述答案中得到线索，我得到了一个使用**索引**方法的粗略实现

```
a.sort_by{|x, y| ['Part', 'Plan', 'Inspection'].index(x[0]) <=> ['Part', 'Plan', 'Inspection'].index(y[0]) and ['create', 'update', 'delete', 'release'].index(x[1]) <=> ['create', 'update', 'delete', 'release'].index(y[1])}

=> [["Part", "create"], ["Part", "update"], ["Part", "delete"], ["Part", "release"], ["Plan", "create"], ["Plan", "update"], ["Plan", "delete"], ["Plan", "release"], ["Inspection", "create"], ["Inspection", "update"], ["Inspection", "delete"], ["Inspection", "release"], ["User", "create"], ["User", "update"]] 
```

它可以进一步干燥。

# c# - 进行后台操作时禁用 GUI

> ID：12814820
> 
> 赞同：1
> 
> 时间：2012-10-10T08:11:00.487
> 
> 标签：c#, winforms

我有一个表单，其中有一个按钮复制和其他控件。当用户按下复制按钮时，BackgroundWorker 会执行复制操作。

在复制操作期间，我禁用控件并在完成后重新启用它们。无论如何我可以用更简单的方式做到这一点。就像禁用和启用所有键盘/鼠标输入一样。

PS：如果用户在显示 Hour-Glass 图标时点击，它不应该收集所有这些点击并在 GUI 空闲时触发它们。当 GUI 得到释放时，它应该删除所有累积的点击。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:15:22.370

Set the form `Enable` to be false in the start, handle the finish event of the background worker and re-enable the form.

```
//Lock the form
this.Enabled = false; 
```

Should do it? Excuse me if this isn't what your looking for.

EDIT:

If your looking for a fancier way of doing this you could get an animated .GIF loader from somewhere like here - [http://ajaxload.info/](http://ajaxload.info/) and then create a `form` with a picture box, no borders with a transparent background. Then use the GIF in there and call `ShowDialog` at the start and close the dialog at the end of processing, this will display a loader similar to what you see being commonly used and lock the `parent` form.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:13:31.520

如果您想禁用所有控件，您可以创建新表单，该表单将在后台进程运行时处于活动状态。例如，您可以使用此表单来显示进度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T08:15:54.750

该类`Form`也具有该`Enabled`属性。

通过禁用`Form`窗体上的每个控件也将被禁用。这可能是禁用整个窗口的最简单方法。

**编辑：**

如果您*真的*只想禁用任何输入而不做任何其他事情，尽管这对用户来说是违反直觉且令人困惑的，那么您可以添加一个新控件，例如在表单顶部没有内容和透明背景的标签.

像这样的东西：

```
// When starting the operation:
var transparentLabel = new Label();
transparentLabel.Bounds = form.Bounds;
// You may have to set the bacground and border and stuff, I am unsure
form.Children.Add(transparentLabel);
// Change cursor to a hourglass as well?

// When the operation is done
form.Children.Remove(transparentLabel);
// Change cursor back 
```

这应该确保透明标签获得焦点并禁用对其他控件的输入。

# java - 如何验证正在调用超类的构造函数

> ID：12814821
> 
> 赞同：1
> 
> 时间：2012-10-10T08:11:00.867
> 
> 标签：java, unit-testing

假设有一个超类

```
class SuperClass {
    SuperClass(Foo foo) {
        this.foo = foo;
    }

    SuperClass() {
        this.foo = new DefaultFoo();
    }
} 
```

还有一个子类

```
class SubClass extends SuperClass {
     SubClass(Foo foo) {
        super(foo);
    }
} 
```

被测试的类是`SubClass`. 我想验证`SubClass'`构造函数确实在调用它的超类的非空构造函数。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:14:01.493

I would test this via the super constructors side effects. e.g. does it set particular fields or change behaviour ?

Note that the implementation of your class should really be shielded from the tests. So you're only interested in how it affects the constructed entity. Otherwise if/when you refactor your class hierarchy you'd have to change your tests, whereas you need them to remain the same in order to perform a *regression*.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:16:28.310

为了从单元测试中检查，您可以简单地创建一个`Foo`实例，将其传递给`SubClass`构造函数，然后检查是否`instance.getFoo()`返回完全相同的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T08:18:00.100

[通过模拟超类，使用 jmockit ( http://jmockit.googlecode.com](http://jmockit.googlecode.com) )应该可以做到这一点。这是示例

（来自：[https](https://groups.google.com/forum/?fromgroups=#!topic/jmockit-users/O-w9VJm4xOc) ://groups.google.com/forum/?fromgroups=#!topic/jmockit-users/O-w9VJm4xOc ）

```
public class TestClassUnderTest { 

     public class ClassUnderTest extends BaseClassForClassUnderTest 
     { 
        public ClassUnderTest(ISomeInterface si) 
        { 
           super(si); 
         } 
         //... 
      } 
@Test 
public void testSuperConstructorCall() 
{ 
    final ISomeInterface si = new ISomeInterface() 
    { 
    }; 

    Mockit.setUpMock(BaseClassForClassUnderTest.class, new Object() { 
        @Mock 
        public void $init(ISomeInterface si_param) 
        { 
            assertNotNull(si_param); 
            assertTrue(si_param == si); 
        } 
    }); 

    ClassUnderTest cut = new ClassUnderTest(si); 
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T08:27:29.850

您可以在超类中放置一个布尔字段，并在非空构造函数中将其设置为“真”，从而在调用非空构造函数时将其设置为“真”。检查相应对象的布尔实例字段的状态，以了解调用了哪个构造函数。

# transactions - SSIS TransactionOption 必需导致错误（全部在本地计算机上）

> ID：12814831
> 
> 赞同：2
> 
> 时间：2012-10-10T08:11:45.113
> 
> 标签：transactions, ssis, distributed-transactions

我看过一些与我的问题相关的帖子，但是有太多的可能性促使我寻求更直接的解决方案。

我所做的一切都在我的本地机器上，尽管我在一个域上。

当我将包的事务选项设置为必需（以及内部的所有其他内容以支持）时，我的包不再执行（在 BIDS 2008 中）。我有以下错误消息：

**无法获取外部列的属性。您输入的表名可能不存在，或者您对表对象没有 SELECT 权限，并且通过连接获取列属性的替代尝试失败。**

详细的错误消息是：超时已过期。在操作完成之前超时时间已过或服务器没有响应。通过查询 System.Data.SqlClient.SqlConnection 未找到表 [tablename] 的列信息。

错误：导入模数检查时出现 0xC004706B，SSIS.Pipeline：“组件“ADO NET Destination”(381)”验证失败并返回验证状态“VS_ISBROKEN”。

错误：导入模数检查时出现 0xC004700C，SSIS.Pipeline：一个或多个组件验证失败。

**导入模数检查时出现错误：0xC0024107：任务验证期间出现错误。**

我已确保分布式事务协调器服务已启动，但我对配置选项并不十分了解，所以我怀疑这就是我的问题所在。

有谁确切地知道需要如何配置才能让它在我的本地机器上工作？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T16:16:44.643

事实证明，复杂性是由于事务中的 TRUNCATE 命令造成的。如果您遇到同样的问题，那么您需要做的就是在所有数据连接（事务内部）上将 ValidateExternalMetadata 设置为 false，或者改用 DELETE 命令。

# java - Eclipse 用正则表达式查找/替换整行

> ID：12814833
> 
> 赞同：5
> 
> 时间：2012-10-10T08:11:55.680
> 
> 标签：java, regex, eclipse

我正在使用 Eclipse 的 Find/Replace 将一些 sql 代码格式化为 Java 字符串。我想将 sql 查询的每一行放在引号之间，并在末尾添加一个换行符。

这是我在查找字段中输入的内容：

```
(.*) 
```

这就是我放在替换字段中的内容

```
\t\t+ "\1\\n" 
```

这是一个简单的例子（我实际的sql查询大约200行）

```
SELECT *

FROM User
WHERE User.Id = 1232164 
```

这就是我希望看到的

```
 + "SELECT *\n"
    + "\n"
    + "FROM User\n"
    + "WHERE User.Id = 1232164\n" 
```

但是，当遇到空行时，Find 会失败，它表示没有更多匹配结果并终止（如果标记了“Wrapped Search”选项，则跳转到文件顶部）

我还尝试在查找正则表达式中使用以下内容

```
^(.*)
^(.*)$ 
```

结果相同

任何人都知道我做错了什么，或者这可能是 Eclipse 中的一个错误。

就其价值而言，它在我最初编写的 Emacs 中运行良好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T08:58:17.757

我觉得它是 Eclipse 中的一个错误。尽管如此，我已经通过使用搜索模式实现了您想要的结果（在 Eclipse Juno 中）：

```
(.*)\R 
```

和一个替换字符串：

```
\t\t+ "\1\\n"\R 
```

请注意，这`\R`是一种特殊的 Eclipse 模式，在搜索时匹配任何形式的行分隔符。替换时，它会插入文档的默认行分隔符。

# sitecore - Sitecore 文件上传事件

> ID：12814834
> 
> 赞同：2
> 
> 时间：2012-10-10T08:11:57.147
> 
> 标签：sitecore

当用户将文件上传到文件放置区域时，我需要接收事件。

在这种情况下，我应该可以访问具有文件放置区域和已上传文件的项目。

我尝试了 item:saved 和 uiUpload 处理器，但它们没有提供足够的信息。

我需要的是：

*   文件放置区字段 ID
*   更新项目
*   上传的文件名

sitecore 是否有针对此类用户操作的事件以及所有必需的信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T13:52:56.947

我设法解决了我的问题。

我使用 uiUpload 管道来拦截文件上传。

然后我使用 UploadArgs 的 UploadedItems 属性来获取媒体库中的文档项。

之后，我使用媒体文件夹属性“Refererrs”（它是带有 FDAFolder 模板的项目祖先）来获取上传到的相关项目和字段。

# c++ - 在 C++ 中刷新套接字

> ID：12814835
> 
> 赞同：2
> 
> 时间：2012-10-10T08:12:06.243
> 
> 标签：c++, sockets, network-programming, winsock2

`send`在调用C++中的函数后，我尝试刷新套接字。
我用`winsock2.h`图书馆。

我需要在发送消息后立即发送数据，但我找不到任何类似函数的`flash`功能。

我正在尝试向设备发送消息，并且它希望一一接收消息。
我的意思是，如果我在发送者中发送两条消息，如“MessageOne”和“MessageTwo”，接收者会收到不独立的“MessageOneMessageTwo”，并且设备无法识别命令。

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T08:36:40.853

您无法在*发送*端做任何事情来让*接收*端“一个接一个”地接收消息。完全由接收方负责正确重建发送的帧（“消息”）。*接收代码必须以某种方式*知道消息长度（完全特定于协议）并接收尽可能多的数据以构建整个帧（通常通过发布具有指定长度并指定仅对整个缓冲区感兴趣的recv来实现，例如`MSG_WAITALL`标志） . 我很难相信您的设备不知道如何处理这个问题，如果确实如此，那么实际上*什么都没有*你可以做。我发现您更有可能不了解设备/协议要求并且您提出了错误的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:15:07.273

There is no "flush" functionality for sockets. If you need to send two messages in rapid succession then just send them. If it's a TCP socket then they will arrive in the correct order (the order you send them in).

This pattern is actually not uncommon; First send a message header followed by a separate send of the message data.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T08:15:15.623

To my knowledge there really isn't a "flush" ability. the send function returns how many bytes are sent, so you could iterate a loop until all the bytes are sent.

Edit: To add to what I've read you want from other users. The only way I know of to increase the "internal buffer" (flushing it is something winsock does on its own) is setsockopt, using the so_sendbuf option.

Article relating to it:

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms740476%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740476%28v=vs.85%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T08:26:05.380

[以Winsock 常见问题解答](http://www.tangentsoft.net/wskfaq/intermediate.html#packetscheme)中的示例为您的数据包方案问题提供准确答案

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-18T14:56:19.627

在发送端将套接字选项设置为 NDELAY

# finite-automata - 从转换表生成正则表达式的程序

> ID：12814839
> 
> 赞同：1
> 
> 时间：2012-10-10T08:12:25.770
> 
> 标签：finite-automata, automata

我很好奇是否有人知道如何编写程序以在给定有限自动化的情况下生成正则表达式，或者是否已经存在任何程序（最好在 c 中）。

为了让事情变得不那么复杂，我想将状态数限制在 4 个左右，假设 FA 是最小形式，并且 FA 只有一个 FinalState 和一个 StartState。

我已经考虑了一段时间，我认为要做的第一件事就是为 FA 创建一个转换表。

所以FA可能看起来像这样：

```
NumberOfStates 4 
StartState   1 
FinalState   4 
StateNumber  NextStateA   NextStateB
1            2            4
2            3            2
3            4            4 
```

这将生成正则表达式： b + (ab*a(a + b))

我已经绞尽脑汁好几个小时了，但我不知道如何去做。非常感谢任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T09:41:39.930

以下是实现 (a+b+c)*abc 的 FA 的代码。但我无法理解其中的逻辑。

```
int main()
{
     char str[50],input[15],inpstate[15],outstate[15],state='A';
     int i=0,j;
     strcpy(input,"abcabcabcabc");
     strcpy(inpstate,"AAABBBCCCDDD");
     strcpy(outstate,"BAABCABADBAA");
     printf("\nEnter the string:-  ");
     gets(str);
     while(str[i]!='\0')
     {
          for(j=0;j<12;j++){
         if(inpstate[j]==state && input[j]==str[i]){
              state=outstate[j];
              break;
          }
           }
          if(j==12){
          state='E';
          break;
        }
        i++;
     }
     if(state=='D')
          printf("\nValid String \n");
     else
          printf("\nInvalid String \n"); 
     return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T20:00:11.157

您可以使用 Kleene 算法（这是 Floyd–Warshall 算法的一个特例）来做到这一点。

您会发现这已实现，例如，在 libAMoRE 库中：[http ://libalf.informatik.rwth-aachen.de/index.php?page=download](http://libalf.informatik.rwth-aachen.de/index.php?page=download)

# rendering - 渲染 Grid 面板 Ext.Net 的最后一列

> ID：12814841
> 
> 赞同：-2
> 
> 时间：2012-10-10T08:12:36.183
> 
> 标签：rendering, ext.net, gridpanel

1) 在某些情况下，网格面板的最后一列无法正确呈现。请看下面的图片。

![在此处输入图像描述](../Images/61c7c49d12f939eb6c87388e43e3281b.png)

问题是什么？

以下是标记代码：

```
 <ext:Panel ID="pnl_DataView_EconomicArrange" runat="server" Width="850" Height="600" Title="Economic"
                                Padding="6" Layout="FitLayout">
                                <Content>
                                    <ext:GridPanel ID="GV_EconomicArrange" runat="server" Height="560" Width="840" Title="Economic"
                                        AutoScroll="True" Border="True" Header="false" TrackMouseOver="true" Cls="gridFont"
                                        Layout="FitLayout" AutoExpandColumn="MDate"  StripeRows="true"  >

                                <Store>
                                            <ext:Store ID="Store_DataView" runat="server">
                                                <Reader>
                                                    <ext:JsonReader IDProperty="EconomivArrange">
                                                        <Fields>
                                                            <ext:RecordField Name="LowPrice" />
                                                            <ext:RecordField Name="HighPrice" />
                                                            <ext:RecordField Name="H1_Integrated" />
                                                            <ext:RecordField Name="H2_Integrated" />
                                                            <ext:RecordField Name="H3_Integrated" />
                                                            <ext:RecordField Name="H4_Integrated" />
                                                            <ext:RecordField Name="H5_Integrated" />
                                                            <ext:RecordField Name="H6_Integrated" />
                                                            <ext:RecordField Name="H7_Integrated" />
                                                            <ext:RecordField Name="H8_Integrated" />
                                                            <ext:RecordField Name="H9_Integrated" />
                                                            <ext:RecordField Name="H10_Integrated" />
                                                            <ext:RecordField Name="H11_Integrated" />
                                                            <ext:RecordField Name="H12_Integrated" />
                                                            <ext:RecordField Name="H13_Integrated" />
                                                            <ext:RecordField Name="H14_Integrated" />
                                                            <ext:RecordField Name="H15_Integrated" />
                                                            <ext:RecordField Name="H16_Integrated" />
                                                            <ext:RecordField Name="H17_Integrated" />
                                                            <ext:RecordField Name="H18_Integrated" />
                                                            <ext:RecordField Name="H19_Integrated" />
                                                            <ext:RecordField Name="H20_Integrated" />
                                                            <ext:RecordField Name="H21_Integrated" />
                                                            <ext:RecordField Name="H22_Integrated" />
                                                            <ext:RecordField Name="H23_Integrated" />
                                                            <ext:RecordField Name="H24_Integrated" />
                                                            <ext:RecordField Name="MDate" />
                                                         </Fields>
                                                    </ext:JsonReader>
                                                </Reader>
                                            </ext:Store>
                                        </Store>

                                        <TopBar>
                                            <ext:Toolbar ID="Toolbar1" runat="server">
                                                <Items>
                                                    <ext:ToolbarFill ID="ToolbarFill1" runat="server" />
                                                </Items>
                                            </ext:Toolbar>
                                        </TopBar>
                                        <SelectionModel>
                                            <ext:RowSelectionModel ID="RowSelectionModel1" runat="server" />
                                        </SelectionModel>
                                        <ColumnModel>
                                            <Columns>
                                                <ext:Column Header="Low Price" Width="60" Sortable="false" DataIndex="LowPrice" />
                                                <ext:Column Header="High Price" Width="60" Sortable="false" DataIndex="HighPrice" />
                                                <ext:Column Header="H 1" Width="50" Sortable="false" DataIndex="H1_Integrated" />
                                                <ext:Column Header="H 2" Width="50" Sortable="false" DataIndex="H2_Integrated" />
                                                <ext:Column Header="H 3" Width="50" Sortable="false" DataIndex="H3_Integrated" />
                                                <ext:Column Header="H 4" Width="50" Sortable="false" DataIndex="H4_Integrated" />
                                                <ext:Column Header="H 5" Width="50" Sortable="false" DataIndex="H5_Integrated" />
                                                <ext:Column Header="H 6" Width="50" Sortable="false" DataIndex="H6_Integrated" />
                                                <ext:Column Header="H 7" Width="50" Sortable="false" DataIndex="H7_Integrated" />
                                                <ext:Column Header="H 8" Width="50" Sortable="false" DataIndex="H8_Integrated" />
                                                <ext:Column Header="H 9" Width="50" Sortable="false" DataIndex="H9_Integrated" />
                                                <ext:Column Header="H 10" Width="50" Sortable="false" DataIndex="H10_Integrated" />
                                                <ext:Column Header="H 11" Width="50" Sortable="false" DataIndex="H11_Integrated" />
                                                <ext:Column Header="H 12" Width="50" Sortable="false" DataIndex="H12_Integrated" />
                                                <ext:Column Header="H 13" Width="50" Sortable="false" DataIndex="H13_Integrated" />
                                                <ext:Column Header="H 14" Width="50" Sortable="false" DataIndex="H14_Integrated" />
                                                <ext:Column Header="H 15" Width="50" Sortable="false" DataIndex="H15_Integrated" />
                                                <ext:Column Header="H 16" Width="50" Sortable="false" DataIndex="H16_Integrated" />
                                                <ext:Column Header="H 17" Width="50" Sortable="false" DataIndex="H17_Integrated" />
                                                <ext:Column Header="H 18" Width="50" Sortable="false" DataIndex="H18_Integrated" />
                                                <ext:Column Header="H 19" Width="50" Sortable="false" DataIndex="H19_Integrated" />
                                                <ext:Column Header="H 20" Width="50" Sortable="false" DataIndex="H20_Integrated" />
                                                <ext:Column Header="H 21" Width="50" Sortable="false" DataIndex="H21_Integrated" />
                                                <ext:Column Header="H 22" Width="50" Sortable="false" DataIndex="H22_Integrated" />
                                                <ext:Column Header="H 23" Width="50" Sortable="false" DataIndex="H23_Integrated" />
                                                <ext:Column Header="H 24" Width="50" Sortable="false" DataIndex="H24_Integrated" />

                                                <ext:Column  Header="Date" Width="50" Sortable="false" DataIndex="MDate" Hidden="true" Hideable="false"   />
                                            </Columns>
                                        </ColumnModel>
                                        <LoadMask ShowMask="true" />

                                    </ext:GridPanel>
                                </Content>
                            </ext:Panel> 
```

在后面的代码中，我填写了一个数据表并绑定到存储数据源。

2）您对此案有何看法： ![在此处输入图像描述](../Images/ecf894e7a2b415402eab80c9d00bbc0e.png)

当我使用水平滚动查看最后一列时：1）标题仍然固定但行已移动。2）最后两列样式消失了。（请参阅粉红色行了解更多详情）

这是标记代码：

```
 <ext:Panel ID="pnl_DataView" runat="server" Title="Generation Information"
                                Padding="6" Layout="FitLayout">
                                <Items>
                                    <ext:GridPanel ID="GV_DataView" runat="server" Title="Generation Information"
                                        AutoScroll="True" Border="True" Header="false" TrackMouseOver="true" Layout="FitLayout" 
                                        Cls="gridFont">
                                        <Store>
                                            <ext:Store ID="Store_DataView" runat="server">
                                                <Reader>
                                                    <ext:JsonReader>
                                                        <Fields>
                                                            <ext:RecordField Name="MDate">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="DayName">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="DayOfYear">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="UnitCode">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="H1">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="H2">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="H3">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="H4">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="H5">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="H6">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="H7">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="H8">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="H9">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="H10">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="H11">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="H12">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="H13">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="H14">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="H15">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="H16">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="H17">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="H18">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="H19">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="H20">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="H21">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="H22">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="H23">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="H24">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="SumValue">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="Counter">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="InternalUse">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="PeakValue">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="Vacation">
                                                            </ext:RecordField>
                                                            <ext:RecordField Name="SumFlag">
                                                            </ext:RecordField>
                                                        </Fields>
                                                    </ext:JsonReader>
                                                </Reader>
                                            </ext:Store>
                                        </Store>
                                        <View>
                                            <ext:GridView ID="GridView1" runat="server">
                                                <GetRowClass Fn="getRowClass" />
                                            </ext:GridView>
                                        </View>
                                        <TopBar>
                                            <ext:Toolbar ID="Toolbar1" runat="server">
                                                <Items>
                                                    <ext:ToolbarFill ID="ToolbarFill1" runat="server" />
                                                </Items>
                                            </ext:Toolbar>
                                        </TopBar>
                                        <SelectionModel>
                                            <ext:RowSelectionModel ID="RowSelectionModel1" runat="server" />
                                        </SelectionModel>
                                        <ColumnModel>
                                            <Columns>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="MDate" Header="Date" Width="80"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="DayName" Header="Weeks Day"
                                                    Width="70" Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="DayOfYear" Header="Years Day"
                                                    Width="70" Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="UnitCode" Header="Unit" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="H1" Header="H1" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="H2" Header="H2" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="H3" Header="H3" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="H4" Header="H4" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="H5" Header="H5" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="H6" Header="H6" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="H7" Header="H7" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="H8" Header="H8" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="H9" Header="H9" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="H10" Header="H10" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="H11" Header="H11" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="H12" Header="H12" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="H13" Header="H13" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="H14" Header="H14" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="H15" Header="H15" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="H16" Header="H16" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="H17" Header="H17" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="H18" Header="H18" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="H19" Header="H19" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="H20" Header="H20" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="H21" Header="H21" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="H22" Header="H22" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="H23" Header="H23" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="H24" Header="H24" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="SumValue" Header="Sum" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="Counter" Header="Counter" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="InternalUse" Header="Internal Use"
                                                    Width="50" Locked="true">
                                                </ext:Column>
                                                <ext:Column Align="Center" Sortable="true" DataIndex="PeakValue" Header="Peek" Width="50"
                                                    Locked="true">
                                                </ext:Column>
                                            </Columns>
                                        </ColumnModel>

                                        <LoadMask ShowMask="true" />
                                    </ext:GridPanel>
                                </Items>
                            </ext:Panel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:48:52.207

我认为最后一列 MDate 有问题，因为您设置了它的下一个属性：Hidden="true" Hideable="false" 并使该列自动展开。

![网格](../Images/5805fec58df8df65029b85d339c4dd98.png)

# c# - Windows 8 中的天气应用程序布局

> ID：12814843
> 
> 赞同：3
> 
> 时间：2012-10-10T08:12:41.117
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我是 Windows 8 Metro 应用程序的新手。我想设计我的应用程序布局，类似于 Windows 8 默认应用程序，例如天气和新闻应用程序，看起来与 Windows 手机中的全景控件相同。如何在 Windows 8 中实现该行为，Windows 8 是否有任何内置全景控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:19:48.713

这种方法怎么样：

[http://dotnetbyexample.blogspot.co.uk/2012/08/a-winrt-behavior-to-turn-flipview-into.html](http://dotnetbyexample.blogspot.co.uk/2012/08/a-winrt-behavior-to-turn-flipview-into.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:55:56.380

使用默认模板并对其进行修改。它或多或少是相同的，但是如果你要在 xaml/C# 上执行它，当然你需要阅读有关 gridview 和 xaml 样式的信息，尽管如果我没记错的话，它们是在 html5 上执行的。

# android - android 首选项 - 从 sdcard 中选择文件

> ID：12814844
> 
> 赞同：0
> 
> 时间：2012-10-10T08:12:42.717
> 
> 标签：android, android-preferences, android-ui

在我正在开发的应用程序中，我想让用户可以在首选项设置中从 sdcard 中选择一个（音频）文件。现在完全被封锁了，如何去实现这一点，当然最好用标准方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:32:23.817

您需要实现自己的文件资源管理器并从拣货中检索结果

有一个非常简单的项目[在这里提供了这样的功能](https://github.com/Kaloer/Android-File-Picker-Activity)

您可以设置要过滤的文件类型等

# c# - 正则表达式连接字符串和端口

> ID：12814846
> 
> 赞同：-4
> 
> 时间：2012-10-10T08:12:53.413
> 
> 标签：c#, regex

我想正则表达式：`"localhost:65536"`。

这些是可能的值/规则：`":"`如果我是正确的，字符串后跟一个从 1 到 65536 的整数。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:27:30.167

为什么你需要一个正则表达式呢？使用常规字符串操作选项很容易实现：

### 常规字符串选项

```
public struct ConnectionData
{
    public string Host;
    public ushort Port;

    public static bool TryParse(string connectionString, out ConnectionData data)
    {
        data = default(ConnectionData);
        try { data = Parse(connectionString); return true; }
        catch (FormatException) { return false; }
    }

    public static ConnectionData Parse(string connectionString)
    {
        var data = new ConnectionData();
        var parts = connectionString.Split(new char[] { ':' }, 2);
        if (parts.Length != 2 || !ushort.TryParse(parts[1], out data.Port))
            throw new FormatException("Provided connectionString was not in the correct format of 'host:port'");
        data.Host = parts[0];
        return data;
    }
}; 
```

如果你真的必须使用 RegEx：

### 常用表达

```
public struct ConnectionData
{
    public string Host;
    public ushort Port;

    private static Regex FORMAT = new Regex(@"^(?<host>[\w.-]+):(?<port>\d{1,5})$", RegexOptions.Compiled);

    public static bool TryParse(string connectionString, out ConnectionData data)
    {
        data = default(ConnectionData);
        try { data = Parse(connectionString); return true; }
        catch (FormatException) { return false; }
    }

    public static ConnectionData Parse(string connectionString)
    {
        var data = new ConnectionData();
        var match = FORMAT.Match(connectionString);
        if (!match.Success || !ushort.TryParse(match.Groups["port"].Value, out data.Port))
            throw new FormatException("Provided connectionString was not in the correct format of 'host:port'");
        data.Host = match.Groups["host"].Value;
        return data;
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:26:33.007

你可以试试这个简单的正则表达式

```
^[a-zA-Z0-9\.\-]+:[0-9]{1,5} 
```

此外，为了尝试正则表达式，您可以使用例如[这个](http://regexpal.com/)免费的正则表达式测试器。

# jquery - 如何使父链接处于活动状态？

> ID：12814848
> 
> 赞同：1
> 
> 时间：2012-10-10T08:13:01.580
> 
> 标签：jquery, accordion, jquery-ui-accordion

我想使用 jQuery UI 菜单或手风琴，并让父节点在选择时打开一个 href 以执行显示其子/嵌套链接的其他功能。

我正在使用以下代码，但意识到我可能需要在 jquery-ui.js 文件中配置一些东西。

```
<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>jQuery UI Accordion - Default functionality</title>
    <link rel="stylesheet"
    href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />

    <script>
        $(function () {
            $("#accordion").accordion();
        });
    </script>
</head>

<body>
    <div id="accordion">
         <li><a href="http://www.yahoo.com" target="_blank">yahoo1</a> 
          <ul>
             <li><a href="http://www.bing.com" target="_blank">bing2</a></li>
            </ul>             
         </li>
      (...) 
```

**示例：** 当我单击 yahoo1 时，我想查看 yahoo1 喜欢在页面上显示的内容（将使用 ajax 调用页面内容）并且仍然显示其嵌套的 bing2 子项。

本质上，我想知道是否有办法让像 yahoo1 这样的父 li 成为打开某些东西的活动链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:18:36.813

你可以使用ajax`load()` 函数

```
$("#accordian.li.a").on("click",function(){
   $("#accordian").load($(this).attr("href"));
 // you need to create a div to append the data returned by ajax call
}) 
```

# php - mysql_fetch_array() 需要参数 1 - wordpress 插件错误

> ID：12814849
> 
> 赞同：-3
> 
> 时间：2012-10-10T08:13:02.837
> 
> 标签：php, mysql

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源问题](https://stackoverflow.com/questions/2697438/mysql-fetch-array-expects-parameter-1-to-be-resource-problem)

> 警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在 /home/skidrowg/public_html/wp-content/plugins/astickypostorderer/croer-transact.php 第 19 行给出。检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '' 附近使用正确的语法

这是 croer-transact.php 代码：

```
<?php
$croer_list = $_POST;
$croer_action = $croer_list[submit];
require_once('croer-functions.php');
if ($croer_action == 'Save and Refresh') {
    // lets clean up the incomming
    $croer_ins_buffer = array(); // to hold what needs to be inserted
    foreach ($croer_list as $croer_pid => $croer_element) {
        if ((!strncmp($croer_pid, 'pid', 3))&&($croer_element!='')) {
            $croer_ins_buffer[substr($croer_pid,3)]=$croer_element;
        }
    }
}
$croer_cat = $croer_list[croer_cat];
if ($croer_ins_buffer) {
    asort($croer_ins_buffer);
}
$croer_old_sorts = croer_get_just_sorted($croer_cat);
while ($row= mysql_fetch_array($croer_old_sorts)) {
    $croer_old_sorts_r[$row[post_id]]=$row[post_rank];
}
if ($croer_old_sorts_r) {
    asort($croer_old_sorts_r);
}
// loop through ellements to insert in new array
// keep offset
$c_new_inserts=array();
$c_removals=array();
$c_ofset=0;
if ($croer_ins_buffer) {
    echo "<!-- >We have insertions< -->"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:17:09.747

$croer_old_sorts 设置为 croer_get_just_sorted($croer_cat) 的值，这显然是一个布尔值。然后将该值传递给 mysql_fetch_array 函数。

mysql_fetch_array 接收通过执行 mysql_query 命令生成的结果集，如下所示：

```
$result = mysql_query("SELECT * FROM table_name");
while($row=mysql_fetch_array($result){
... 
```

仅供参考 mysql 库已弃用，取而代之的是 mysqli 库。

# magento-1.7 - 在 top.links magento 中更改存储

> ID：12814851
> 
> 赞同：0
> 
> 时间：2012-10-10T08:13:08.610
> 
> 标签：magento-1.7

我有一个有五家商店的电子商务，我想将 top.links（我的帐户、结帐、登录、注销等）设置为存储默认值。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T07:04:55.393

我自己用这个，希望对你有帮助

[http://www.magentocommerce.com/boards/26245/viewthread/196486/#t245022](http://www.magentocommerce.com/boards/26245/viewthread/196486/#t245022)

# php - phpmailer DKIM dkim=hardfail

> ID：12814861
> 
> 赞同：1
> 
> 时间：2012-10-10T08:13:58.723
> 
> 标签：php, phpmailer, dkim

I us the latest version of phpmailer class, and want to send mails by dkim signature, this class is provide it. but in received mail's dkim is hardfail. I created keys and put dns record. i have done online dns record test, its ok.

how to solved this problem?

the example of code is:

```
<?php
$mail->DKIM_domain = "my-domain.us";
$mail->DKIM_private = "url/.htkeyprivate";
$mail->DKIM_passphrase = "password";
$mail->DKIM_selector = 'phpmailer';
$mail->Sender = "no-reply@my-domain.us";
$mail->From = "my-domain.us";
$mail->FromName = "my-domain";
$mail->AddAddress("toexample@gmail.com", "receiver");
$mail->Subject = "Hello";
$mail->Body = "Hello World";
$mail->Send();
?> 
```

Result: Authentication-Results: mx.google.com; spf=neutral (google.com: 92.43.143.174 is neither permitted nor denied by best guess record for domain of apache@devserv) smtp.mail=apache@devserv; **dkim=hardfail** header.i=@find-love.us

DKIM-Signature: v=1; a=rsa-sha1; q=dns/txt; l=5; s=phpmailer; t=1349788282 c=relaxed/simple; h=From:To:Subject; d=my-domain.us; z=From:=my-domain=20 | |Subject:=20Hello; bh=CcbQDrWvT4E847f1X4iutz2u/CY=; b=3m/CXrO6xNxoVSx0P1zXjhNy4QwGrixv0//C8RgoNBUdS2kX8Evqlj3qZbWmZUQnJfc/u83Oi5r58UXueyx4sA==

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:38:21.937

您没有为**From:**标头提供语法正确的电子邮件。DKIM 的整个想法是减少垃圾邮件，并且在电子邮件的标题中没有正确的**发件人**地址可以很好地表明该电子邮件可能确实是垃圾邮件。尝试：

```
<?php
$mail->DKIM_domain = "find-love.us";
$mail->DKIM_private = "url/.htkeyprivate";
$mail->DKIM_passphrase = "password";
$mail->DKIM_selector = 'phpmailer';
$mail->Sender = "no-reply@find-love.us";
$mail->From = "no-reply@find-love.us";
$mail->FromName = "find-love.us";
$mail->AddAddress("toexample@gmail.com", "receiver");
$mail->Subject = "Hello";
$mail->Body = "Hello World";
$mail->Send();
?> 
```

# ruby-on-rails - 在 Heroku 上运行一个持续运行的工作进程

> ID：12814867
> 
> 赞同：3
> 
> 时间：2012-10-10T08:14:13.623
> 
> 标签：ruby-on-rails, heroku

在 Heroku 上运行连续工作进程的最佳方法是什么？我的应用程序需要这个进程 24/7 运行，所以delayed_job 或其他队列似乎有点矫枉过正。我可以通过 Heroku 控制台手动触发该过程，并且可以分离它自己运行。

最好，我只想将这个单一的方法调用分配给一个 dyno，这样当我的应用程序启动时，它会启动额外的 worker-dyno，然后调用我的单一方法并开始嗡嗡作响。但不确定如何分配该方法调用？

我可以使用延迟的工作，它可以解决所有问题，但似乎我需要一个立即（调用时）而不是计划的独特活动。但也许这是唯一的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T17:15:24.467

在您的 Procfile 中，您可以为额外的工人工作添加一个单独的进程

```
# Procfile
web: ...
worker: ...
collector: bundle exec ruby stats_collector.rb -p $PORT # or any other command 
```

然后，您可以使用`$ heroku ps:scale collector=1`. 它将单独运行，并在每次部署时停止并重新启动。我想说的是，您的应用程序所做的事情必须是安全的，可以随时被中断才能使用如此长时间运行的进程。

如果中断可能会导致问题（例如，您只想完成一次的事情在重新启动后会执行两次），那么使用例如[Sidekiq](http://sidekiq.org)将消息排队的“传统”后台工作人员可能是一个更安全的解决方案。

**更新**

如果您想在 Rails 应用程序的上下文中以非交互方式执行长时间运行的代码，可以使用[**rails runner**](http://guides.rubyonrails.org/command_line.html#rails-runner)命令。

```
# Procfile
web: ...
worker: ...
collector: bundle exec rails runner 'MyModel.my_long_running_job' 
```

# javascript - Not able to implement history with History.js

> ID：12814868
> 
> 赞同：3
> 
> 时间：2012-10-10T08:14:14.330
> 
> 标签：javascript, jquery, ajax, history.js

I have downloaded the zip from [https://github.com/browserstate/history.js](https://github.com/browserstate/history.js) and then uploaded the browserstate-history.js-e84ad00\scripts\uncompressed\history.js in my web application. I am using an html to test this. Following is the script kept in the html.

```
<script type="text/javascript">
var count=0;
$(document).ready(function(){
$("#change").click(function(){
count=count+1;
$.ajax({
    url: "fetch.html",
    cache: false,
    dataType: "html",
    success: function(responseHTML){
    wrappedResponseHTML = "<div id='responseTextWrapperDiv'>" + responseHTML + "</div>";
    $("#data").html(($(wrappedResponseHTML).find("#toggle")).html());
    history.pushState(document.getElementById("data").innerHTML, "", "?page="+count,"");
    }
});
});
$("#change2").click(function(){
count=count+1;
$.ajax({
    url: "fetch2.html",
    cache: false,
    dataType: "html",
    success: function(responseHTML){

    wrappedResponseHTML = "<div id='responseTextWrapperDiv'>" + responseHTML + "</div>";
        $("#data").html(($(wrappedResponseHTML).find("#toggle")).html());
        history.pushState(document.getElementById("data").innerHTML, "", "?page="+count,"");
        }
});
});
});
window.onpopstate = function(event) {
    document.getElementById('data').innerHTML=event.state;
    if(event.state==null)
    {
        window.location.href=window.location.href;
    }
};</script> 
```

Here goes the body part:

```
<body>
<div id="data">
Landing Page
</div>
<div>
    <input type="button" id="change" value="change text" />
    <input type="button" id="change2" value="change text 2" />
</div>
<div>
    <input type="button" id="back" value="go back" onclick="history.go(-1);"/>
</div></body> 
```

The text inside div with id "data" is changed using ajax. This works fine in Mozilla 15.0.1 but when I tested it in IE 8, the history functionality is not working and I am not going back to the previous state. Instead, I am going back to the previous page which called my html. In one of the forums, the suggested solution was to include History.js, which I have included. Is there anything else that I am missing out?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:24:16.623

您需要包含`history.html4.js`脚本以使历史记录在 html4 浏览器中工作。

使用后退和前进按钮时，`statechange`会触发事件。如果你想让后退和前进按钮工作，你必须在`statechange`处理程序中进行 ajax 调用和 DOM 操作。

还要记住在被调用`statechange`时触发。`pushstate`您在点击事件中所要做的就是调用`pushstate`然后处理`statechange`事件中的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T06:33:22.327

@Shikyo：谢谢你的回答。我已经相应地修改了脚本，这就是它现在的样子。仅供参考，它在 Firefox 中工作，现在甚至在 chrome 中工作（它在早期的 chrome 中没有工作）

```
<script type="text/javascript">
var count=0;
$(document).ready(function(){
$("#change").click(function(){
count=count+1;
$.ajax({
    url: "fetch.html",
    cache: false,
    dataType: "html",
    success: function(responseHTML){
    wrappedResponseHTML = "<div id='responseTextWrapperDiv'>" + responseHTML + "</div>";
    $("#data").html(($(wrappedResponseHTML).find("#toggle")).html());
    //History.pushState(document.getElementById("data").innerHTML, "", "?page="+count);
    $data = { text:$("#data").html()};

    History.pushState($data, count, "?page="+count);
    }
});
});
$("#change2").click(function(){
count=count+1;
$.ajax({
    url: "fetch2.html",
    cache: false,
    dataType: "html",
    success: function(responseHTML){

    wrappedResponseHTML = "<div id='responseTextWrapperDiv'>" + responseHTML + "</div>";
        $("#data").html(($(wrappedResponseHTML).find("#toggle")).html());
        $data = { text:$("#data").html()};
        History.pushState($data, count, "?page="+count);
        }
});
});
});
History.Adapter.bind(window,'statechange',function(){
if(History.getState().data.text==null)
{
window.location.href=window.location.href;
}
    var data = History.getState().data.text;
    document.getElementById('data').innerHTML=data;
});</script> 
```

我已经包含了 history.html4.js、json2.js、history.adapter.jquery.js 和 history.js

# javascript - 如何添加到 zf2 导航中，例如 OnClick="a();" 在没有控制器的情况下执行操作？

> ID：12814870
> 
> 赞同：0
> 
> 时间：2012-10-10T08:14:29.213
> 
> 标签：javascript, navigation, zend-framework2

我有从数组配置中构建的导航，我可以添加一些参数来做 JS 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:59:45.090

我只是做重定向

```
`return $this->redirect()->toUrl($this->request->getServer('HTTP_REFERER'));` 
```

在我改变我的语言环境的行动中。

# performance - The typing goes slow inside contenteditable with Firefox on Mac OS

> ID：12814872
> 
> 赞同：0
> 
> 时间：2012-10-10T08:14:36.330
> 
> 标签：performance, macos, firefox, contenteditable, aloha-editor

The typing goes slow inside contenteditable only with Firefox on Mac OS. In this case doesn't happen with another browsers. I try reproduce this case with Firefox on Windows OS. It works!!

I found this problem on : [https://bugzilla.mozilla.org/show_bug.cgi?id=458051](https://bugzilla.mozilla.org/show_bug.cgi?id=458051)

And you can test on this linl : [https://bug458051.bugzilla.mozilla.org/attachment.cgi?id=341294](https://bug458051.bugzilla.mozilla.org/attachment.cgi?id=341294)

But it haven't had any solution to solve it yet.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T04:46:30.660

Firefox 的 pre-beta 版本可以解决这个问题。 [http://www.mozilla.org/en-US/firefox/aurora/](http://www.mozilla.org/en-US/firefox/aurora/)

# android - 尝试使用 WebSql 将数据存储在本地存储中

> ID：12814891
> 
> 赞同：1
> 
> 时间：2012-10-10T08:15:17.380
> 
> 标签：android, jquery, html

我在我的 html 表单中插入了这些值。即使在成功插入数据后，它在 chrome 的开发者工具中也不可见。我应该检查一些设置还是我的浏览器有任何缓存问题。我的数据库和表已创建，但我的值没有被插入。我在下面提供我的代码。

```
$(document).ready(function() {

     var db = openDatabase("todolist", 1.0, "To Do List Database", 100 * 1024);
     db.transaction(function(transaction) {
         transaction.executeSql("CREATE TABLE IF NOT EXISTS list(" + "ID INTEGER PRIMARY KEY ASC," + " name TEXT NOT NULL," + " description TEXT," + " due DATETIME," + " start DATETIME);", []);
     });

     $("#submit").click(function() {
         var name = $("#taskname").val();
         //alert(name);
         var desc = $("#taskdesc").val();
         //alert(desc);
         var due = $("#taskdue").val();
         //alert(due);
         var start = $("#taskstart").val();
         //alert(start);
         db.transaction(function(transaction) {
             var sql = "INSERT INTO list(name,description,due,start )VALUES(?,?,?,?)";
             transaction.executeSql(sql, [name, desc, due, start], function() {

                 alert("Values Inserted")
             }, error);
         });
     });

     function error(transaction, err)

     {
         alert("DB error : " + err.message);
         return false;
     }
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:56:48.077

好的，所以我能够让这些命令在测试数据库上工作，所以我猜你要么有两个问题之一。您的任何一个值（名称、描述、到期、开始）都未定义，或者您需要添加一个“;” 到您的插入命令

```
var sql = "INSERT INTO list(name,description,due,start )VALUES(?,?,?,?);"; 
```

代替

```
var sql = "INSERT INTO list(name,description,due,start )VALUES(?,?,?,?)"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T06:19:48.950

```
var x = {};
x.web = {};
db= null;
x.web.open=function()
{
    //alert("hiiii")
    db= openDatabase("amith",1.0,"To Do List Database",100*1024);
}
x.web.create=function()
{
    var data=db;
    //alert(data)
    data.transaction(function(transaction){
    transaction.executeSql(
    "CREATE TABLE IF NOT EXISTS type("+
    "ID INTEGER PRIMARY KEY ASC,"+
    " name TEXT NOT NULL,"+
    " description TEXT,"+
    " due DATETIME,"+
    " start DATETIME)");
    });

}
x.web.addTodo = function(name,desc,due,start) 
    {
        var data1 = db;
        data1.transaction(function(tx){
        var sql="INSERT INTO     
   type(name,description,due,start)VALUES(?,?,?,?)";
        tx.executeSql(sql,[name,desc,due,start],function(){
        //alert("Values Inserted")
        },error);
        });
    }
 function error (transaction, err) 

    {
        alert ("DB error : " + err.message);
        return false;
    }

function init()
{
    x.web.open();
    x.web.create();
}
 function addTodo() 
{
    //alert("toodod")
    var name = document.getElementById("taskname").value;
    var desc= document.getElementById("taskdesc").value;
    var due= document.getElementById("taskdue").value;
    var start=document.getElementById("taskstart").value
    //alert(name);
    x.web.addTodo(name,desc,due,start);
} 
```

# android - 如何在google map api的Json中设置语言？

> ID：12814893
> 
> 赞同：1
> 
> 时间：2012-10-10T08:15:18.450
> 
> 标签：android, google-maps

我得到谷歌地图的 json 为：

```
http://maps.googleapis.com/maps/api/directions/json?origin=34.431741,135.392299&destination=34.631741,135.992299&sensor=false 
```

谷歌返回结果：

```
 "legs" : [
            {
               "distance" : {
                  "text" : "79,8 km",
                  "value" : 79756
               },
               "duration" : {
                  "text" : "1 giờ 20 phút",
                  "value" : 4818
               },
               "end_address" : "Meihan National Hwy, Nara 632-0102, Nhật Bản",
               "end_location" : {
                  "lat" : 34.630910,
                  "lng" : 135.992630
               },
               "start_address" : "Nhật Bản ŌsakaKishiwadaNagaregicho, ３９６−３",
               "start_location" : {
                  "lat" : 34.431530,
                  "lng" : 135.392670
               },
....
... 
```

如何获取日语的 JSON 数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T08:19:18.103

只需添加语言参数..

```
..&language=ja 
```

您的示例电话[在这里](http://maps.googleapis.com/maps/api/directions/json?origin=34.431741,135.392299&destination=34.631741,135.992299&sensor=false&language=ja)，文档[在这里](https://developers.google.com/maps/documentation/javascript/basics#Localization)。

# text-editor - Sublime Text Syntax Highlighter Not working on Windows?

> ID：12814894
> 
> 赞同：1
> 
> 时间：2012-10-10T08:15:19.840
> 
> 标签：text-editor, sublimetext2, sublimetext, code-editor, sublime-jslint

I have created a Sublime Text File for Syntax Highlighting which is mentioned below.Its for a new Language called Visage and the Syntax definition is taken from Groovy since most of the syntax looks like Groovy.The file name is Visage.tmLanguage and can also be found on github

*   [Check out the Plugin on Github](https://github.com/shivkumarganesh/VisSub/blob/master/Snippets/Visage.tmLanguage) .On Github pls navigate into the snippet folder to find the plugin.

Now when I am using it in Ubuntu 12.04 while using Sublime Text 2 it works great but when I use it in Sublime Text 2 for Windows it really does not show any syntax highlighting and rather it leaves entire thing plain black and white.I have also written snippets for this language which work real great in both the versions of sublime. Please help me to figure out what went wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T22:54:37.870

我的观察是 - 与大多数其他插件不同 - 语法突出显示需要在编辑 .tmLanguage 文件后重新启动 ST2。

# android - Android：如何检查当前活动最近（比如最后 1 分钟）没有执行任何功能

> ID：12814901
> 
> 赞同：0
> 
> 时间：2012-10-10T08:15:49.177
> 
> 标签：android, android-activity

如何检查当前活动（Activity1）最近（比如最后 1 分钟）没有执行任何功能。如果 Activity1 在最后一分钟内没有执行任何任务，那么 Activity1 应该会自动完成。

# vmware - VMWare Fusion Mac 4.1.3 无法打开 .vmdk

> ID：12814906
> 
> 赞同：0
> 
> 时间：2012-10-10T08:15:57.377
> 
> 标签：vmware, virtual-machine, vmware-fusion

我仍在使用 VMWARE Fusion 4.1.3，它可以正常工作很长时间。

从一天到另一天，我收到了类似于[http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=1004232的奇怪错误](http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=1004232)

无法打开文件“/.../LION.vmdk”。该系统找不到指定的文件。

如果只有一个虚拟机会出现这个问题，我会猜到它是一个数据错误。但是直到昨天我拥有的所有虚拟机现在都有这个启动错误。

我什至尝试将 chmod 777 设置为所有文件并在终端中执行“cat”命令以查看是否存在路径错误。

目前我真的不知道如何解决这个问题。几天前我尝试了旧的 Time machine Backup，但仍然是同样的问题！

我想当我重新安装机器时，一切都会正常工作。但我真的需要找出问题所在，以防止将来出现问题。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:24:15.373

好的，我找到了原因！

所有从 LION Master VM 创建/复制的 VM。

我移动了这个主虚拟机，因此不再找到相应的“原始”文件。可悲的是，错误消息并没有真正帮助找到这个原因。

希望我的回答能帮助其他人更快地解决这个问题；）

# facebook - Facebook 身份验证对话框中的问题

> ID：12814918
> 
> 赞同：0
> 
> 时间：2012-10-10T08:16:31.187
> 
> 标签：facebook

我正在尝试使用 facebook 选项向我的网站用户提供登录信息。因此，我创建了一个 Facebook 应用程序。但身份验证对话框仅对用户显示一次。即第一次登录时，身份验证对话框将显示。对于下一次登录，身份验证对话框不显示。我想在每个用户的每个登录中显示身份验证对话框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-05T20:37:58.197

也许这解释了它？

> 注销您的应用程序并使用其他帐户登录
> 
> 如果您使用 Facebook 登录您的应用程序，然后退出并尝试使用不同的 Facebook 帐户（使用相同的浏览器）再次登录，您将立即登录到您之前使用的 Facebook 帐户。为了使用另一个帐户，您需要导航到 Facebook 并在 Facebook 上注销。相同的规则适用于任何其他 3rd 方身份验证提供程序。或者，您可以使用其他浏览器使用其他帐户登录。

取自[http://www.asp.net/mvc/tutorials/mvc-5/create-an-aspnet-mvc-5-app-with-facebook-and-google-oauth2-and-openid-sign-on](http://www.asp.net/mvc/tutorials/mvc-5/create-an-aspnet-mvc-5-app-with-facebook-and-google-oauth2-and-openid-sign-on)

# android - httpclient类在android中不起作用

> ID：12814931
> 
> 赞同：1
> 
> 时间：2012-10-10T08:17:16.673
> 
> 标签：android, database, httpclient

我正在开发一个Android项目，因为我需要将登录详细信息发送到在线数据库。我完成了我的代码如下......
但是当我运行我的项目时，只有else条件正在工作。
没有任何东西传递到数据库

```
import java.util.ArrayList;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class LoginActivity extends Activity {
    EditText un,pw,vn;
    Button ok,reg;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);
        un=(EditText)findViewById(R.id.u_name);
        pw=(EditText)findViewById(R.id.passwd);
        vn=(EditText)findViewById(R.id.vh_number);
        ok=(Button)findViewById(R.id.btnlogin);
       reg=(Button)findViewById(R.id.btnregister);

        ok.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
                postParameters.add(new BasicNameValuePair("username", un.getText().toString()));
                postParameters.add(new BasicNameValuePair("password", pw.getText().toString()));
                postParameters.add(new BasicNameValuePair("vehiclenumber", vn.getText().toString()));
                //String valid = "1";
                String response = null;
                try {

                        response = CustomHttpClient.executeHttpPost("http://192.168.1.23/test_login/check.php", postParameters);
                    Log.d("sarath","");
                    String res=response.toString();
                   // res = res.trim();
                    res= res.replaceAll("\\s+","");                              
                    //error.setText(res);

                   if(res.equals("1"))
                   {                                      
                        Intent i = new Intent(getApplicationContext(),
                                MainActivity.class);
                        startActivity(i);

                   }            
                    else
                    {

                        Context context = getApplicationContext();
                        CharSequence message = "The Username or Password you entered is incorrect.!";
                        int duration = Toast.LENGTH_SHORT;
                        Toast toast = Toast.makeText(context, message, duration);       
                        toast.show();
                    }

                } catch (Exception e) {
                    un.setText(e.toString());
                }

            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:35:06.903

添加参数后尝试此代码：

尝试 {

```
 DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(" your url");

            ArrayList<NameValuePair> postParameters= new ArrayList<NameValuePair>();                    
             postParameters.add(new BasicNameValuePair("username", un.getText().toString()));
            postParameters.add(new BasicNameValuePair("password", pw.getText().toString()));
            postParameters.add(new BasicNameValuePair("vehiclenumber", vn.getText().toString()));

             httpPost.setEntity ( new  UrlEncodedFormEntity(postParameters));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            line = EntityUtils.toString(httpEntity);

        } catch (UnsupportedEncodingException e) {
            line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
        } catch (MalformedURLException e) {
            line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
        } catch (IOException e) {
            line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
        }

        return line;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:47:16.183

试试这个代码。

```
DefaultHttpClient hc = new DefaultHttpClient();
                ResponseHandler<String> res = new BasicResponseHandler(); 
                HttpPost postMethod = new HttpPost(
                           "http://192.168.1.23/test_login/check.php");
                 ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
                 postParameters.add(new BasicNameValuePair("username", un.getText().toString()));
                 postParameters.add(new BasicNameValuePair("password", pw.getText().toString()));
                 postParameters.add(new BasicNameValuePair("vehiclenumber", vn.getText().toString()));
               try {

                 postMethod
                     .setEntity(new UrlEncodedFormEntity(
                               postParameters ));

               String response = hc.execute( postMethod,res);
               if(response.equals("1"))
               {                                      
                   Intent i = new Intent(getApplicationContext(),
                    MainActivity.class);
                    startActivity(i);
               }            
               else
                  {             
                   Context context = getApplicationContext();
                   CharSequence message = "The Username or Password you entered is incorrect.!";
                   int duration = Toast.LENGTH_SHORT;
                   Toast toast = Toast.makeText(context, message, duration);       
                     toast.show();
                }

            }
                 catch (Exception e) {
                e.printStackTrace();
                                    } 
```

# php - 如何使用 PHP 函数从 1 个表（Mysql）中计算 2 个条件（2 列）中的值

> ID：12814933
> 
> 赞同：-2
> 
> 时间：2012-10-10T08:17:20.620
> 
> 标签：php, mysql

从数据库

```
ID   Name Department position
================================
1    A    MK          IT
2    B    MK          RD
3    C    MK          EN
4    D    BD          IT
5    E    BD          RD
6    F    BD          EN
7    G    BD          IT
8    H    OB          IT  
9    I    MK          EN 
```

如何编写代码以显示在表格中，如下所示

在表格中显示类似的内容

```
position/departmet    MK  BD   OB
===================================
IT                    1    2   1    
RD                    1    1   0   
EN                    2    1   0 
```

我只是混淆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:20:41.127

尝试使用`CASE`,

```
SELECT position,
        SUM(CASE WHEN Department = 'MK' THEN 1 ELSE 0 END) MK,
        SUM(CASE WHEN Department = 'BD' THEN 1 ELSE 0 END) BD,
        SUM(CASE WHEN Department = 'OB' THEN 1 ELSE 0 END) OB            
FROM tableName
GROUP BY position 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/9529d/1)

或者`Prepared Statement`如果您有未知数量的列，请使用

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'SUM(case when Department = ''',
      Department,
      ''' then 1 ELSE 0 end) AS ',
      Department
    )
  ) INTO @sql
FROM tableName;

SET @sql = CONCAT('SELECT position, ', @sql, ' 
                   FROM tableName 
                   GROUP BY position');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

# [SQLfiddle 演示](http://sqlfiddle.com/#!2/b74c20/1)

# c# - 如何在 Jenkins 中获得 C# 代码的代码指标？

> ID：12814936
> 
> 赞同：1
> 
> 时间：2012-10-10T08:17:27.697
> 
> 标签：c#, continuous-integration, jenkins, code-metrics, cyclomatic-complexity

如何在 Jenkins 中实现 C# 代码的代码指标，例如[循环复杂度](http://en.wikipedia.org/wiki/Cyclomatic_complexity)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:30:20.753

.NET 中有用于循环复杂度的[插件。](https://wiki.jenkins-ci.org/display/JENKINS/CCM+Plugin)
你试过了吗？

# mysql - 打印两个表的数据

> ID：12814937
> 
> 赞同：0
> 
> 时间：2012-10-10T08:17:29.757
> 
> 标签：mysql, join

下面是我的桌子。

```
create table tab1 ( id int, myname varchar(20));

insert into tab1 values 
(1, 'name 1'),
(2, 'name 2');

create table tab2 ( id int, tab2id int, type varchar(20), value varchar(20));
insert into tab2 values
(1,1,'phone','12345671'),
(1,2,'location','location 1'),
(2,3,'phone','12345672'),
(2,4,'location','location 2'); 
```

我想要的是如下。

```
myname   |   phone    | location  
 name 1  |  12345671  | location 1
 name 2  |  12345672  | location 2 
```

知道如何完成这项工作吗？

## [用于检查查询的虚拟数据](http://sqlfiddle.com/#!2/16112/1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:40:58.447

```
select x.myname as name, a.value as Phone, b.value as Location
from tab1 x,
(select value, id
from tab2 
where type='phone' 
group by id)a,
(select value, id
from tab2 
where type='location' 
group by id)b
where x.id = a.id
and x.id = b.id; 
```

SQL FIDDLE[在这里](http://sqlfiddle.com/#!2/16112/32)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:23:22.820

```
select t1.myname,t2.value as phone,t3.value as location from tab1 t1 
inner join tab2 t2 on t1.id=t2.id and t2.type='phone' 
inner join tab2 t3 on t1.id=t3.id and t3.type='location' 
```

SQL FIDDLE[在这里](http://sqlfiddle.com/#!2/16112/6) [http://sqlfiddle.com/#!2/16112/6](http://sqlfiddle.com/#!2/16112/6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T08:23:50.647

没关系，我已经离开这里了......

试试这个：

```
select tab1.id, tab1.myname, tab2.type, tab2.value from tab1 join tab2 on tab1.id=tab2.id 
JOIN tab2 as t2 ON tab1.id=tab2.id WHERE t2.tab2id=2; 
```

[http://sqlfiddle.com/#!2/80d02/7](http://sqlfiddle.com/#!2/80d02/7)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T08:35:19.573

最好按照 diEcho 的建议更改表结构，但对于您的情况，您可以使用下一个查询（数据透视表）。运行此查询，并尝试将其与第一个表连接 -

```
SELECT
  id,
  MAX(IF(type = 'phone', value, NULL)) phone,
  MAX(IF(type = 'location', value, NULL)) location
FROM
  tab2
GROUP BY
  id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T08:46:11.500

试试这个：

```
select * from 
(select (select myname from tab1 where id=t1.id) myname,CASE WHEN t1.type='phone' then t1.value end as 'Phone', (select value from tab2 where id=t1.id and type='location') 'Location'
from tab2 t1) a where phone is not null 
```

[**SQL 小提琴演示**](http://sqlfiddle.com/#!2/83cca/3)

# tsql - 从表中删除所有唯一键 - T-SQL

> ID：12814943
> 
> 赞同：2
> 
> 时间：2012-10-10T08:17:59.467
> 
> 标签：tsql

有没有一种方法可以从表中删除除主键之外的所有唯一键？

我的键名是由 ORM 生成的，我不能保证它们的名字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:43:32.227

这将删除所有唯一约束，不会删除主键。主键仍将强制唯一性。

```
declare @table_name nvarchar(50) = 'yourtable'    -- table
declare @SchemaName nvarchar(50) = 'yourschema'   -- dbo
declare @Catalog    nvarchar(50) = 'yourdatabase' -- database

select * into #t from 
(
  select 'ALTER TABLE ' + TC.CONSTRAINT_CATALOG + '.' + TC.CONSTRAINT_SCHEMA + '.' +  TC.TABLE_NAME + ' DROP CONSTRAINT ' + CCU.CONSTRAINT_NAME query
  from INFORMATION_SCHEMA.TABLE_CONSTRAINTS as TC
  inner join INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE as CCU
    on TC.CONSTRAINT_CATALOG = CCU.CONSTRAINT_CATALOG
    and TC.CONSTRAINT_SCHEMA = CCU.CONSTRAINT_SCHEMA
    and TC.CONSTRAINT_NAME = CCU.CONSTRAINT_NAME
  where TC.CONSTRAINT_CATALOG = coalesce(@Catalog, db_name())
  and TC.CONSTRAINT_SCHEMA = @SchemaName
  and TC.TABLE_NAME = @table_name
  and TC.CONSTRAINT_TYPE = 'UNIQUE' 
) a

DECLARE @sqlstring as nvarchar(500)
DECLARE SqlCursor CURSOR FAST_FORWARD FOR
SELECT query FROM #t
OPEN SqlCursor
FETCH NEXT FROM SqlCursor
INTO @sqlstring
WHILE @@FETCH_STATUS = 0
BEGIN
exec(@sqlstring)
     FETCH NEXT FROM SqlCursor
     INTO @sqlstring
END
CLOSE SqlCursor
DEALLOCATE SqlCursor
DROP TABLE #t 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:59:59.153

试试这个

```
select 
    distinct 'Alter table MyTable drop constraint '+o.name 
from sys.objects o
     join sys.columns c on o.parent_object_id = c.object_id AND o.type='UQ'
     join sys.tables t on c.object_id = t.object_id
where t.name = 'MyTable' 
```

# spring - Spring security LDAP - JSF 登录不起作用

> ID：12814944
> 
> 赞同：2
> 
> 时间：2012-10-10T08:18:13.673
> 
> 标签：spring, jsf, jsf-2, spring-security, ldap

我正在尝试使用 Spring 3.1.1 和带有 LDAP 身份验证的 spring 安全性开发一个应用程序。此外，对于前端，我将使用带有 PrimeFaces 的 JSF 2.0。

我已经像这样配置了我的 LDAP 服务器和导航规则：

```
<security:http auto-config="true" use-expressions="true">
<security:intercept-url pattern="/**" access="permitAll"/>
<security:intercept-url pattern="/pages/**" access="hasRole('ROLE_ADMIN')"/>
<security:form-login login-page="/login.xhtml" default-target-url="/index.xhtml"/>
</security:http>

<security:authentication-manager>
    <security:authentication-provider ref = "authProvider"/>
</security:authentication-manager>

<bean id="authProvider" 
    class="org.springframework.security.ldap.authentication.ad.ActiveDirectoryLdapAuthenticationProvider">
    <constructor-arg value="xxx" />
    <constructor-arg value="ldap://xxx:389"/> 
    <property name="userDetailsContextMapper" ref = "customUserContextMapper"></property>
</bean>

<bean id="customUserContextMapper" class="CustomUserDetailsMapper"></bean> 
```

我编写了一个自定义 UserDetailsMapper，它扩展了 LdapUserDetailsMapper，因为我不确定登录完成后在哪里放置“处理程序”：

```
public class CustomUserDetailsMapper extends LdapUserDetailsMapper{

private static final String ROLE_NORMAL_USER = "Normal User";
private static final String ROLE_ADMIN = "Administrator";
@Override
public UserDetails mapUserFromContext(DirContextOperations ctx,
        String username, Collection<? extends GrantedAuthority> authority) {
    UserDetails originalUser = super.mapUserFromContext( ctx, username, authority );

    originalUser.getAuthorities();

    Set<AndaAuthority> roles = EnumSet.noneOf(AndaAuthority.class);

    roles.add(AndaAuthority.ROLE_ADMIN);

    for (GrantedAuthority auth : authority) {
        if (ROLE_NORMAL_USER.equalsIgnoreCase(auth.getAuthority())) {
            roles.add(AndaAuthority.ROLE_USER);
        } else if (ROLE_ADMIN.equalsIgnoreCase(auth.getAuthority())) {
            roles.add(AndaAuthority.ROLE_ADMIN);
        }
    }

    SecurityContextHolder.getContext().getAuthentication().getCredentials();

    User newUser = 
            new User( 
            originalUser.getUsername(), 
            originalUser.getPassword() != null? originalUser.getPassword():"", 
            originalUser.isEnabled(), 
            originalUser.isAccountNonExpired(), 
            originalUser.isCredentialsNonExpired(), 
            originalUser.isAccountNonLocked(), 
            roles );

            return newUser;
}
} 
```

我有一个位于 WEB-INF 根目录中的 login.xhtml 页面，我将其设置为欢迎页面。这是我的 web.xml：

```
[..]
<!-- Welcome page -->
<welcome-file-list>
    <welcome-file>login.xhtml</welcome-file>
</welcome-file-list>

<!-- JSF mapping -->
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping>

<!-- Spring Context Configuration' s Path definition -->
  <context-param>
     <param-name>contextConfigLocation</param-name>
     <param-value>
        /WEB-INF/applicationContext.xml
        /WEB-INF/spring-security.xml
     </param-value>
  </context-param>

[..]

  <!--  Spring security related configs -->
  <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
</filter-mapping>
[..] 
```

以下是登录表格：

```
<h:form action="j_spring_security_check" method="post">
        <h:panelGrid columns="2">
            <h:outputText value="Username" />
            <h:inputText id="j_username" />
            <h:outputText value="Password" />
            <h:inputSecret id="j_password" />
        </h:panelGrid>

        <div class="submit">
            <button type="submit" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only">
                <span class="ui-button-text">Login</span>
            </button>
        </div> 
```

我从这个[问题](https://stackoverflow.com/questions/5715308/how-to-define-form-action-in-jsf)中得到了登录页面的想法。我不确定如何设置动作，无论是它`j_spring_security_check`还是`../j_spring_security_check`. 我尝试了两者并且结果相同......

**发生了什么：** 当我在 Tomcat 中打开应用程序时，会显示登录页面。输入凭据后，我再次被重定向到 login.xhtml，只填写了用户名。等等......

当我在示例 Spring 安全 LDAP 集成应用程序中使用我的配置进行尝试时，登录部分正在工作。在那里，该`mapUserFromContext`方法每次都被调用。现在，断点永远不会进入。

此外，在示例应用程序中 - **user.password**始终为**空**，权限列表始终为空。这正常吗？任何人都可以建议一种更好的方法来覆盖正常登录以了解哪里有问题吗？

示例应用程序正在运行，因为它可能是用 JSP 制作的，而我用 JSF 搞砸了一些东西......

**我相信这是我的 JSF 问题，但不知道为什么。另外，您知道如何为这种情况实施更好的“登录成功处理程序”吗？**

非常感谢

# php - 从 sql 中获取结果并忽略一些数字

> ID：12814949
> 
> 赞同：0
> 
> 时间：2012-10-10T08:18:34.163
> 
> 标签：php, mysql

在 MySQL 表中，我有一排用户组。在这一行中，我有用户组号码。我正在尝试从除 0 和 5 之外的所有用户组中获取结果。

我试过这段代码：

```
$sql = $db->query("
SELECT 
author FROM dle_photo_post where ug<'5' and moder ='0'
"); 
```

问题是我不知道如何忽略 0 和 5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:21:23.707

```
SELECT 
author FROM dle_photo_post where ug not in('5','0') and moder ='0' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:21:31.430

您是否尝试过使用：NOT？

有关详细信息，请参阅[http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T08:21:34.270

```
SELECT author FROM dle_photo_post where ug!=5 and ug!=0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T08:22:04.157

如果`ug`是一个数字，那么你应该能够做到

```
SELECT
    author
FROM
    dle_photo_post
WHERE
    ug <> 5 AND ug <> 0 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T08:22:09.533

尝试，

```
SELECT author 
FROM dle_photo_post 
where usergroups NOT IN (0, 5) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-10T08:25:46.330

```
$sql = $db->query("
SELECT 
author FROM dle_photo_post where ug not in('0','5')
"); 
```

# java - ClassToInstanceMap 的正确泛型类型

> ID：12814952
> 
> 赞同：1
> 
> 时间：2012-10-10T08:18:41.297
> 
> 标签：java, generics, guava

我需要实现 jsr303 的一部分 ContraintValidatorFactory 接口

```
public interface ConstraintValidatorFactory {

    /**
     * @param key The class of the constraint validator to instantiate.
     *
     * @return A constraint validator instance of the specified class.
     */
    <T extends ConstraintValidator<?,?>> T getInstance(Class<T> key);
} 
```

我的实现是

```
private static class InstanceAwareConstraintValidatorFactory implements ConstraintValidatorFactory {

      private ClassToInstanceMap<ConstraintValidator> instances = MutableClassToInstanceMap.create();

      @SuppressWarnings("unchecked")
      @Override
      public <T extends ConstraintValidator<?, ?>> T getInstance(Class<T> key) {
         if(instances.containsKey(key)) {
            return (T) instances.get(key);
         }
         return ReflectionHelper.newInstance(key, "ConstraintValidator");
      }

      public void addContraintValidation(ConstraintValidator constraintValidator) {
         instances.put(constraintValidator.getClass(), constraintValidator);
      }

      public void addContraintValidations(Set<ConstraintValidator<?, ?>> constraintValidators) {
         for(ConstraintValidator<?,?> constraintValidator : constraintValidators) {
            instances.put(constraintValidator.getClass(), constraintValidator);
         }
      }
   } 
```

如何`@SuppressWarnings("unchecked")`在我的实施中删除。您可以自由修改`InstanceAwareConstraintValidatorFactory`。

换句话说，我需要使用正确的泛型参数来提供与我的 ClassToInstanceMap 和接口的 getIntance 方法的合同。

是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:48:38.627

您可以替换以下行，

```
return (T) instances.get(key); 
```

和

```
return instances.getInstance(key); 
```

我验证了[番石榴11](http://docs.guava-libraries.googlecode.com/git-history/v11.0/javadoc/com/google/common/collect/ClassToInstanceMap.html)有这个功能。

# php - AS3、AlivePDF 和在浏览器中打开生成的 PDF

> ID：12814954
> 
> 赞同：1
> 
> 时间：2012-10-10T08:18:47.890
> 
> 标签：php, actionscript-3, browser, filereference, alivepdf

是否可以使用alivePDF生成PDF并在浏览器中打开而不使用PHP？

现在我正在使用文件引用类弹出一个保存对话框，然后保存为 PDF，但我需要在浏览器中打开生成的 PDF。这可能吗？抛出 navigateToUrl 或其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:25:52.460

pdf 是在浏览器中显示还是下载由客户端（浏览器）决定，因此您没有任何机会影响此行为。您唯一能做的就是强制客户端下载它——但反过来不行。

# xslt - XPath 根据属性获取最大子元素

> ID：12814960
> 
> 赞同：1
> 
> 时间：2012-10-10T08:19:19.883
> 
> 标签：xslt, xpath

我需要编写一个 XPath 来获取具有最大年份的子元素的名称。

这是我的 XSLT 来获取它，但问题是我需要先调用一个模板将年份格式化为数字。

```
<xsl:value-of select="reports/report[not(preceding-sibling::report/@year &gt;= @year) 
and not(following-sibling::report/@year &gt; @year)]/name" /> 
```

示例 XML：

```
<reports>
   <report year="2012 Q4">
     <name>X</name>
   </report>
   <report year="2011 Q4">
     <name>Y</name>
   </company>
</reports> 
```

预期输出：X。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:31:05.010

只需将每个比较表达式包装到`substring-before( ... , ' ')`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:01:35.733

这是另一种方法，它仍然包含提取年份编号的代码，但避免了冗长的复杂兄弟检查

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="/">
      <xsl:for-each select="reports/report">
         <xsl:sort select="substring-before(@year, ' ')" data-type="number" order="descending" />
         <xsl:if test="position() = 1">
            <xsl:value-of select="name" />
         </xsl:if>
      </xsl:for-each>
   </xsl:template>
</xsl:stylesheet> 
```

方法是简单地将元素按顺序排序，但只输出第一个的值。

在示例 XML 上使用时，输出应为**X**

# jquery - jQuery 查找和过滤日期

> ID：12814963
> 
> 赞同：0
> 
> 时间：2012-10-10T08:19:32.503
> 
> 标签：jquery, date, filter

我有一个常规日历，其中 td 有一个点击事件处理程序。我返回表格单元格（1-31）的值。我也有一个事件列表 - 每天只有 1 个

```
<div class="event">
<h2>the title</h2>
<div class="date"> October <span class="day">23</span> 2012 </div>
</div> 
```

我需要做的是当我点击日历上的日期时过滤掉事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:26:15.830

您可以使用`ajax`

```
$(document).ready(function(){
 $(".day").on("click",function(){
  $.get("getevents.php?day="+$(this).text(),function(data){
    $("#showing div").html(data);
             //or
    $(".event").find("h2").text(data);   
  })
 })
}) 
```

# c# - 无法根据 Windows 商店应用程序的分辨率更改 UI 控件的尺寸和文本块的字体大小

> ID：12814965
> 
> 赞同：2
> 
> 时间：2012-10-10T08:19:35.313
> 
> 标签：c#, xaml, windows-8

我是 Windows 商店应用程序开发的新手。我开发了一个在标准分辨率下工作并且看起来很好的应用程序。

现在我想根据屏幕分辨率更改控件的字体大小、宽度、高度。

有什么通用的方法来实现我的要求。

提前致谢，

哈沙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:05:07.897

当在更高像素密度的显示器上查看应用程序时，Windows 8 将自动使用更多像素来呈现应用程序中的 UI 元素。元素在屏幕上将具有相同的大小，它们只会显得更平滑。

但是，Windows 不会插入 UI 中存在的位图。要解决此问题，您可以为应用程序中使用的每个位图提供 3 个不同的图像文件，Windows 将选择具有最佳设备像素密度分辨率的图像文件。

有关更多详细信息，请参见此处：

[http://msdn.microsoft.com/en-us/library/windows/apps/hh465362.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465362.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T02:47:18.963

有两种方法可以在 Windows 8 上管理不同的分辨率，因此您的应用从 10 英寸屏幕到 27 英寸显示器看起来都很棒。有固定布局和自适应布局。

听起来您想使用固定布局，这将使您的应用程序在标准分辨率下看起来不错，并使其在 27" 显示器上填满整个屏幕，而不是仅显示在左上角，这是标准行为。这个方法的关键是 Viewbox 控件。几乎你将整个页面包装在一个 Viewbox 控件中，它会适当地缩放你的内容。你仍然需要在对齐和填充的场景中管理你的布局，并分配宽度/高度您的视图框和其他控件以适应它们。

使用自适应布局方法，您可以在更大的分辨率上包含更多内容。

关于这些概念，我可以为您指出的最佳页面是缩放到屏幕的指南-> [http://msdn.microsoft.com/en-us/library/windows/apps/hh780612.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh780612.aspx)

我听说它建议您应该确保您的设计使用 5 个像素单位，以确保缩放工作正常符合应用程序布局指南 - > [http://msdn.microsoft.com/en-us/library/windows /apps/hh872191.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh872191.aspx)

# wpf - 在 wpf 中的数据网格中的 DataGridComboBoxColumn 中排序

> ID：12814970
> 
> 赞同：3
> 
> 时间：2012-10-10T08:19:52.947
> 
> 标签：wpf, wpf-controls, wpfdatagrid, datagridcomboboxcolumn

我有datagrid，其中1 列作为DataGridComboBoxColumn。显示现有数据、绑定 itemsource、在选择更改时更新源工作正常。

问题是当我单击 DataGridComboBoxColumn 的标题时，它没有按字母顺序排序。当我检查它实际上是按值排序时，我希望它按显示排序。当我在网上搜索时，它说我应该使用“SortMemberPath”属性并将这个属性分配给应该进行排序的属性。

这样做时，排序仅在第一次单击标题时起作用，但在随后的单击中，不会进行排序。我在网上搜索但无法找到解决方案。

以下是我的 DataGridComboBoxColumn 的 xaml

```
<DataGridComboBoxColumn Header="Database Name" 
                        SelectedValueBinding="{Binding Path=Databases.DatabaseID, Mode=TwoWay, ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged}"
                        ItemsSource="{Binding Source={StaticResource ManageTablesVMInstance}, Path=Database}"  
                        SelectedValuePath="DatabaseID" DisplayMemberPath="DatabaseName" SortMemberPath="DatabaseName" /> 
```

上面使用的一些术语的类型

> 数据库 - ObservableCollection
> 
> ManageTablesVMInstance - ViewModel 的实例
> 
> 数据库 - ObservableCollection

如果我需要任何其他信息，请告诉我。我正在使用.net 4.0。

请帮忙。

提前致谢。

问候，

萨马尔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T14:13:16.823

我自己找到了解决方案。在 SortMemberPath 而不仅仅是“DatabaseName”中，我应该放置“Databases.DatabaseName”。执行此操作后，排序按预期工作。所以 xaml 看起来像这样。

```
 <DataGridComboBoxColumn Header="Database Name" 
                        SelectedValueBinding="{Binding Path=Databases.DatabaseID, Mode=TwoWay, ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged}"
                        ItemsSource="{Binding Source={StaticResource ManageTablesVMInstance}, Path=Database}"  
                        SelectedValuePath="DatabaseID" DisplayMemberPath="DatabaseName" SortMemberPath="Databases.DatabaseName" /> 
```

令人惊讶的是，没有人回答这个问题。我想知道为什么。

问候，

萨马尔

# php - Codeigniter 缺少参数 1

> ID：12814972
> 
> 赞同：1
> 
> 时间：2012-10-10T08:20:03.587
> 
> 标签：php, codeigniter

我正在学习通过codeigniter进行简单的登录，然后出现错误，例如 `Missing argument 1 for C_login::login()`当我按下视图上的“登录”按钮而不输入用户名和密码字段时。

这些是我的控制器，我的 IDE（netbeanPHP+CI 框架）没有显示错误

```
<?php
class C_login extends CI_Controller{

public function __construct() {
    parent::__construct();
    $this->load->model('m_login'); 
}

function index()
{
    $this->form_validation->set_rules('username','trim|Username','required|exact_length[4]|xss_clean');
    $this->form_validation->set_rules('password','trim|Password','required|min_length[4]|max_length[40]|xss_clean|callback_login');

    if($this->form_validation->run() == false)
    {
        $this->load->view('login');
    }
    else
    {
        echo 'sukses validasi';
    }

}

function login($password)
{
    $username = $this->input->post('username');
    $password = $this->input->post('password');
    $jabatan = $this->input->post('jabatan');

    $value = $this->m_login->cekpass($username,$password,$jabatan);

    if($value)
    {
        return true;
    }
    else
    {
        return false;
    }

}

}
 ?> 
```

这是模型，我认为我的模型没有显示任何错误

```
<?php
class M_login extends CI_Model{

public function __construct() {
    parent::__construct();
}

function login ($username, $password, $jabatan)
{
   $this->db->where('username',$username);
   $this->db->where('password',$password);
   $this->db->where('jabatan',$jabatan);

   $value = $this->db->get('ms_user');

   if($value->num_rows()>0)
   {
       return true;
   }
   else
   {
       return false;
   }

}
}?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:34:06.640

您需要`$password`从控制器的`login`方法中删除形参。`C_login`显然，您不会通过 URL 传递密码，对吧？

至于关于模型中未定义方法的第二个错误，这是因为您使用错误的名称调用您想要的方法。您在模型中命名它`login`，但您`cekpass`在控制器中调用它。重命名方法定义，或者更改您要调用的内容`login`。

# python - Bitnami - /opt/bitnami/python/bin/.python2.7.bin：加载共享库时出错：libreadline.so.5

> ID：12814973
> 
> 赞同：4
> 
> 时间：2012-10-10T08:20:23.927
> 
> 标签：python, django, centos, bitnami

启动 django 或 ipython 笔记本时出现以下问题

**/opt/bitnami/python/bin/.python2.7.bin：加载共享库时出错：libreadline.so.5**

但是 libreadline.so.5 在我的系统中存在如下所示

**root@linux:/opt/bitnami/scripts# 定位 libreadline.so.5 /opt/bitnami/common/lib/libreadline.so.5 /opt/bitnami/common/lib/libreadline.so.5.2**

我还导出了环境变量中的路径（libreadlive.so.5 所在的位置），但似乎仍然没有解决我的问题（见下文）

**导出 LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:$HOME/opt/bitnami/common/lib**

还有一个由 bitnami 提供的脚本，它位于 /opt/bitnami/scripts/setenv.sh。但即使在执行之后我仍然被卡住了。

任何人都可以帮助我

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T15:07:00.403

您可以执行以下操作，看看它是否解决了您的问题？

. /opt/bitnami/scripts/setenv.sh

（注意点和脚本路径之间的空格）

还有你在执行什么给你这个错误？

# jquery - 更改文本节点的内容

> ID：12814981
> 
> 赞同：2
> 
> 时间：2012-10-10T08:20:58.160
> 
> 标签：jquery, contenteditable

我有一个 div ( `contenteditable="true"`)，其中包含一些文本和一些 html。我正在尝试替换整个 div 中的文本，但与某个类的链接*除外。*

我试过：

```
$('div#text').contents().not('a.selected').each(function() {
    $(this).html(replace($(this).text()));
}); 
```

但似乎`$(this).html()`是这样`null`？

div的测试内容是`'test <a class="selected">test2</a> test3'`

作为输出，我想要`"test "`替换`" test3"`为 replace() 函数的结果，而 a.selected 中的文本保持不变。

**编辑**

div中可能还有其他html，可以忽略。如果替换功能将事物切换为大写，这里是所需的输入 ant ouptut ：

输入 ：`'test <a class="selected">test2</a> <a>test3</a>'`

输出：`'TEST <a class="selected">test2</a> TEST3'`

**编辑 2**

这似乎有效，但当 replace() 返回一些 HTML 时无效

```
$("div#text").contents().not("a.selected").each(function() {
    this.nodeValue = replace(this.nodeValue);
}); 
```

演示：http: [//jsfiddle.net/ApgEc/2/](http://jsfiddle.net/ApgEc/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:29:26.657

你的意思是这样的吗？

```
$("div").contents().not("a.selected").each(function() {
    this.nodeValue = replace(this.nodeValue);
});​ 
```

**演示：http:** [//jsfiddle.net/ApgEc/](http://jsfiddle.net/ApgEc/)

* * *

为了能够在`replace`函数中插入 HTML，我们需要重写代码：

```
$("div").contents().map(function() {
    if (!$(this).is("a.selected")) {
        return replace(this.nodeValue);
    }
    return this.outerHTML;
}).appendTo($("div").empty());​ 
```

**演示：http:** [//jsfiddle.net/ApgEc/3/](http://jsfiddle.net/ApgEc/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:35:39.077

[***工作演示***](http://jsfiddle.net/87HeH/3/)

```
$(function() {
    $('#test').contents().each(function() {
        var $this = $(this);
        if ($this.is('a.selected')) return true;
        if(this.wholeText)
            this.wholeText = replace(this.wholeText);
        else $this.html(replace($this.html()));
    });
}); 
```

# python - 无法使用 subprocess.Popen 在 Web 服务中打开 pdf 文件

> ID：12814983
> 
> 赞同：3
> 
> 时间：2012-10-10T08:21:01.763
> 
> 标签：python, apache2, mod-wsgi, reportlab, ladon

我在打开 PDF 文件时遇到问题。

（我在 mod_wsgi 下使用 Ladon 和 Python 与 Apache2 一起工作。所以在 ubuntu apache 服务器系统上 - 切换到 Windows 系统）

我正在尝试运行以下 Python 脚本：

（其中，`str_pdf_file_name = '/var/www/Accounting_Engine/pdfDocuments/File_name.pdf'`）

```
def preview_pdf(self,str_pdf_file_name):
    try:
                if sys.version_info[:2] > (2,3):
                    import subprocess
                    from subprocess import Popen, PIPE
                    k = subprocess.Popen(['evince', str_pdf_file_name],stdout=PIPE)
                    print k.communicate()
                else:
                    os.spawnlp(os.P_NOWAIT, 'evince', 'evince', str_pdf_file_name)
    except Exception,msg:
        return str(msg)
    return str_pdf_file_name 
```

我已将 apache2.conf 文件中的标准输入和标准输出限制禁用为

```
WSGIRestrictStdin Off    
WSGIRestrictStdout Off 
```

现在 error.log 文件显示 ( `/var/log/apache2/error.log`)：

```
Cannot parse arguments: Cannot open display: [Wed Oct 10 11:50:24 2012] [error] ('', None) 
```

我也检查了 os.environ 。它显示如下：

```
{'LANG': 'C', 'APACHE_RUN_USER': 'www-data', 'APACHE_PID_FILE': '/var/run/apache2.pid', 'PWD': '/home/user', 'APACHE_RUN_GROUP': 'www-data', 'PATH': '/usr/local/bin:/usr/bin:/bin'} 
```

我还尝试使用以下代码更改 PWD：

```
import pwd
os.environ["PWD"] = pwd.getpwuid(os.getuid()).pw_dir    # Because PWD of 'www-data' was '/var/www'
k = subprocess.Popen(['evince', str_pdf_file_name],env=os.environ,stdout=PIPE) 
```

但是他们的输出没有变化。它仍然显示

```
'Cannot parse arguments: Cannot open display:' 
```

任何建议可能是什么原因以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:29:12.857

`evince`显然是一个具有 GUI 的工具。您尝试从通常无法与桌面/用户交互的服务器进程内部打开它。在 Linux 上，它可能需要运行 X 服务器，而在您的服务器上可能并非如此。这正是错误消息告诉您的内容。我认为你必须重新考虑你的解决方案。

**更新：**

由于这并不明显，如果您只是寻找接受的答案而不阅读评论：原始发布者通过使用[此处](http://ladonize.org/index.php/Ladon_Attachments)`download`描述的方法解决了他的问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T11:48:07.613

以下链接可能对有同样问题的人有用。

[http://ladonize.org/index.php/Ladon_Attachments](http://ladonize.org/index.php/Ladon_Attachments)

上面链接中的下载函数（）会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T07:00:59.203

```
#   Fetch the pdf file from the server,  and keep it in the local matchine
    str_loc_file_path = self.fetch_generated_pdf_file_from_server(str_file_path)

#   Display the fetched file in local matchine
    self.print_pdf(str_loc_file_path)

def fetch_generated_pdf_file_from_server(self, str_file_path,*args):
    import httplib
    import urllib
    conn = httplib.HTTPConnection("192.168.2.10")
    str_loc_file_path = '/home/sreejith/pdfDocuments/__filenew__.pdf'
    locfile = open(str_loc_file_path,'w')
    conn.request("POST",str_file_path)
    response = conn.getresponse()
    locfile.write(response.read())
    locfile.close()
    print "Server Response status is"+str(response.status)+", Because of response "+str(response.reason)
    print response.getheaders()    
    return str_loc_file_path

def print_pdf(self,str_file_name,*args):     # PRINT THE PDF FILE, str_file_name.
    try:
        if sys.platform == "win32":      # IS OS == WINDOWS
            import win32api          # PRINT WITH ADOBE VIEWER. SO IT MUST BE INSTALLED
            win32api.ShellExecute(0, "print", str_file_name, None, ".", 0)
        else:                # CAN'T PRINT IF OS IS LINUX, SO OPEN BY A VIEWER FROM WHICH HE CAN PRINT
            if sys.version_info[:2] > (2,3):
                import subprocess
                from subprocess import PIPE
                k = subprocess.Popen(['evince', str_file_name],stdout=PIPE)
                k.communicate()

            else:
                k = os.spawnlp(os.P_NOWAIT, 'evince', 'evince', str_file_name)
    except Exception,msg:
        print str(msg)
        msgDlg = gtk.MessageDialog(None, gtk.DIALOG_MODAL, gtk.MESSAGE_ERROR, gtk.BUTTONS_OK)
        msgDlg.set_markup("<span foreground='blue'>Printer Is Not Connected. And "+str(msg)+".</span>")
        msgDlg.run()
        msgDlg.destroy()      
    pass 
```

这对我有用。:-) 希望对某人有所帮助。

# python-3.x - PyMySQL UnicodeEncodeError; python shell成功但cmd失败

> ID：12814989
> 
> 赞同：1
> 
> 时间：2012-10-10T08:21:30.573
> 
> 标签：python-3.x, cmd, python, ptvs

我是 pymysql 模块的新手并试图发现它，我有一个简单的代码：

```
import pymysql

conn=pymysql.connect(host="127.0.0.1",
                         port=8080,user="root",
                         passwd="mysql",
                         db="world",
                         charset="utf8",
                         use_unicode=True)
cur=conn.cursor()
cur.execute("SELECT * FROM world.city")

for line in cur:
    print(line)

cur.close()
conn.close() 
```

我正在为 Visual Studio 使用 Python 工具。当我执行代码时，它失败并出现以下错误：

```
Traceback (most recent call last):
  File "C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\Extensio
ns\Microsoft\Python Tools for Visual Studio\1.5\visualstudio_py_debugger.py", li
ne 1788, in write
    self.old_out.write(value)
  File "C:\Python32\lib\encodings\cp437.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_map)[0]
UnicodeEncodeError: 'charmap' codec can't encode characters in position 6-7: cha
racter maps to <undefined> 
```

失败行包含城市名称：`Â´s-Hertogenbosch`

我认为这可能是与 cmd 输出相关的问题，所以我切换到 python shell，并且我的脚本运行没有任何错误。

那么我面临的问题是什么？我该如何解决？

我真的很想为 Visual Studio 使用 Python 工具，因此我非常欢迎能够使用 PTVS 的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T10:52:46.403

我的猜测是你收到的数据不是 unicode，尽管你的 python 脚本正试图用 Unicode 对其进行编码。

我会检查数据库和表的特殊字符集和排序规则设置。utf8 & utf8_general_ci 是你的朋友。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:53:31.217

问题可能是环境的输出编码设置为 cp437 并且 unicode 字符无法转换为该编码，而这样做`print(line)`可能会转换为`self.old_out.write(value)`.

尝试`print()`通过写入文件来替换循环内部，例如：

```
with open('myoutput.txt', 'w', encoding='utf-8') as f:
    for line in cur:
        f.write(line) 
```

好吧，但是光标不返回字符串行。它返回一行（我猜是元组）元素。因此，您可能必须执行以下操作：

```
with open('myoutput.txt', 'w', encoding='utf-8') as f:
    for row in cur:
        f.write(repr(row)) 
```

这可能足以用于诊断目的。如果您需要一些更好的字符串，则必须以某种特定方式对其进行格式化。

另外，你写道：

```
 charset="utf8",
                     use_unicode=True) 
```

如果使用，`charset`则`use_unicode=True`可以省略（使用暗示_ **_**工作，因为它是别名之一。`charset``charset='utf8'``charset='utf-8'``utf``8`**`utf8`**

 ****更新**基于评论...

由于文件的输出似乎没问题，因此问题与用于`print`命令输出的窗口的功能有关。由于`cmd`只知道 cp437，您必须使用另一个窗口（如某些 GUI 的支持 Unicode 的窗口），或者您必须告诉它`cmd`使用另一种编码。看看[别人的经验](https://stackoverflow.com/q/388490/1346705)。基本上，你必须告诉控制台：

```
chcp 65001 
```

将接受的输出编码更改为 UTF-8，或者您可以使用支持所需字符的另一种（非 Unicode）编码。此外，控制台字体应该能够显示字符（即包含字形、字符的图像）。**

# php - 删除php中确切位置的空格

> ID：12814995
> 
> 赞同：2
> 
> 时间：2012-10-10T08:21:36.537
> 
> 标签：php, position, whitespace

我只是想知道我如何才能准确地删除空格，甚至逐行和行内的位置。我找不到有关此的信息，但我认为 PHP`trim()`可以提供帮助。我也在考虑动态文本的解决方案。我想要删除所有空行的地方。或者只是其中一些。

## 一个例子：

```
> here is text blabla
> 
> here is text balabla  balabala
> 
1
2 
3 
> oops too much space
> 
> also here is text 
```

现在我怎样才能去掉 3 个空格呢？

它必须变成这样：

```
> here is text blabla
> 
> here is text balabla  balabala
> 
> oops too much space
> 
> also here is text 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T08:26:27.173

似乎您想要正则表达式：

```
preg_replace("#(\r?\n){3,}#", "\n\n", $str); 
```

它用两个换行符（一个空行）替换 3 个或更多换行符（即两个连续的空行或更多）。

为确保它适用于只显示为空的行（即只有空格的行），您需要稍微改变表达式：

```
preg_replace("#(\r?\n\s*){3,}#", "\\1\\1", $str); 
```

*免责声明：这个`\\1\\1`想法来自 NullPointerException :)*

您也可以采取不同的路线并迭代解决：

```
// $final is the result of the operation
// $n keeps track of how many empty lines were seen
$final = ''; $n = 0;
// $str is the original content, we split it into separate lines
foreach (preg_split("/\r?\n/", $str) as $line) {
        if (strlen(trim($line))) {
                $n = 0;
        } elseif (++$n >= 2) {
                continue;
        }
        // append to the final result
        $final .= "$line\n";
}
// rtrim($final, "\n"); 
```

事实证明，`explode()`在上述迭代解决方案中使用可以提高性能；它仍然适用于只有空格的行，因为`trim()`. 但是，您需要使用 修剪右侧的换行符`rtrim($final, "\n");`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:30:23.927

不是正则表达式解决方案：

```
 function stripEmptyNewlines($string,$limit = 1){
     $array = explode("\n",$string);
     $emptyLine = 0;
     $newString = "";
     foreach($array as $child){
         if(trim($child) == "") {
             $emptyLine++;
         } else {
             $emptyLine = 0;
         }
         if($emptyLine < $limit + 1){
             $newString .= "\n" . $child;
         }
     }
     return $newString;
 } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-10T08:25:25.317

在您的文本上使用 ReadLine() 方法。

如果 ReadLine().Trim() != ""，则将其添加到输出字符串。（否则它将是一个空行）

# javascript - 自动完成仅在页面加载或键入一个字母时运行一次，但仅运行一次

> ID：12814996
> 
> 赞同：0
> 
> 时间：2012-10-10T08:21:43.667
> 
> 标签：javascript, jquery-ui, jquery

[http://jqueryui.com/autocomplete/#remote](http://jqueryui.com/autocomplete/#remote)

```
 $(document).ready(function() {
        var Employees = function(request, response) {
            var value1 = document.getElementById('<%= txtEmployeeID.ClientID %>').value.split(" ");
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                url: "WebService.asmx/GetEmployees",
                data: "{'keywords':'" + value1 + "'}",
                dataType: "json",
                async: true,
                success: function(data) {
                    response(data.d);
                },
                error: function(result) {
                    //alert("Error");
                }
            });
        }
        $('#<%= txtEmployeeID.ClientID %>').autocomplete({
            autoFocus: true, source: Employees
        });
    }); 
```

这是自动完成从数据库中获取价值的代码。

这在键入每个字母然后过滤值时运行。

我正在寻找自动完成功能，它将在开始时将所有员工姓名加载到 var Employee 中，然后无需重试过滤自动完成功能将通过自动过滤功能来完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:00:37.727

您可以获取员工，将结果存储在一个数组中，并提供这个数组作为[选项 source](http://api.jqueryui.com/autocomplete/#option-source)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:56:15.323

添加选项选择

```
select( event, ui ):function(){
$(this).disable();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T09:05:49.230

Jquery AutoComplete 函数始终从您作为参数传递给它的源中过滤。如果您将数组作为源传递，它总是在该数组中查找以进行过滤。

在您的情况下，源是一个函数，它会在您键入后立即获取一个新数组（过滤数组）。

您所要做的就是获取数组并存储在一个变量中，然后将该数组传递给自动完成插件。

你可以试试这个

```
$(document).ready(function() {
    var Employees = [];
    var value1 = document.getElementById('<%= txtEmployeeID.ClientID %>').value.split(" ");
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "WebService.asmx/GetEmployees",
            dataType: "json",
            async: true,
            success: function(data) {
                Employees = data.d; 
                $('#<%= txtEmployeeID.ClientID %>').autocomplete({
                    autoFocus: true, source: Employees
                });
            },
            error: function(result) {
                //alert("Error");
            }
        });

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T10:36:11.230

有一个非常简单的演示，其中包含用于缓存响应并检查数据是否已被检索到的源代码。使用此设置，您无需编写 estra 代码来提前检索值

[http://jqueryui.com/autocomplete/#remote-with-cache](http://jqueryui.com/autocomplete/#remote-with-cache)

点击“查看源”