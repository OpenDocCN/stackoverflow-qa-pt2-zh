# StackOverflow 问答 14129000-14129999

# ios - 如何在 xcode 中添加到媒体库？

> ID：14129001
> 
> 赞同：6
> 
> 时间：2013-01-02T20:54:36.117
> 
> 标签：ios, xcode, image, media

我是一个初级程序员，如果这听起来很愚蠢，很抱歉。我知道我必须通过媒体库将图像放入 Xcode...但是媒体库在哪里？我将图像文件放入创建项目时创建的文件夹中，但它没有显示出来。我在那里有两种格式的相同图像：PNG 和 JPEG。“媒体库”的位置在哪里？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T20:58:57.697

What do you mean with Media Library? The pane in Interface Builder on the bottom right? That just lists all the media items that are part of your current project or workspace.

You have to add the images to your project, if you want to use them in your app. The easiest way is to drag them in one of the Groups in Xcode's Project Navigator tab on the left side. Make sure you check your target (this will make Xcode copy the images into your app's resources on compile time).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-04T00:29:06.100

如果您有 png 或 jpg，首先，您需要创建一个图像集，然后重新启动 xcode，它将在媒体库中可用。要创建图像集，您需要在左侧导航窗格中选择 Assets.xcassets，然后在工具栏中选择编辑器 -> 添加资产 -> 新图像集。为您的图像命名并选择渲染作为模板图像。

# php - 无法将 javascript 变量传递到 Google Maps API

> ID：14129002
> 
> 赞同：2
> 
> 时间：2013-01-02T20:54:38.567
> 
> 标签：php, javascript, maps

我在 php 文件中使用以下代码

```
 <script>      
var geocoder = new google.maps.Geocoder();
        geocoder.geocode( {'address': '<?php echo $element['singleCoords']; ?>' },
              function(results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                  firstLoc = results[0].geometry.location;
                  var gmap<?php echo $element['id']; ?>_marker = new google.maps.Marker({
                  position: new google.maps.LatLng(firstLoc) 
```

当我提醒`firstLoc`long 和 lat 时显示如下：5.34.., 5,6...

但是当我`firstLoc`在函数中使用变量时，`google.maps.LatLng()`我可以在 Chrome 的代码资源管理器中看到只有变量名被传递，而不是 long 和 lat 数字。

在代码资源管理器中，我看到了这个：

```
new google.maps.LatLng(firstLoc) 
```

但我想看看这个：

```
new google.maps.LatLng(5.34.., 5,6...). 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:30:17.210

是否需要将位置设置为 LatLng 坐标

根据[谷歌地图 doco](https://developers.google.com/maps/articles/geocodestrat)你可以传到`results[0].geometry.location`位置

# ios - iOS GData YouTube 对视频的评论

> ID：14129003
> 
> 赞同：2
> 
> 时间：2013-01-02T20:54:41.040
> 
> 标签：ios, youtube, comments, youtube-api, gdata

有很多关于如何在 iOS 应用程序中上传视频的 GData YouTube 教程，但我没有找到显示如何评论视频的教程。所以我在参考页面上阅读，只是尝试过等等，但没有找到任何东西！

有谁知道如何使用 GData API 在 iOS 应用程序中评论视频？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-28T06:19:44.637

在评论按钮中使用此方法

```
GDataEntryYouTubeVideo *video = (GDataEntryYouTubeVideo *)arrayData;
[self addCommentTitle:@"comment" text:commentField.text toVideo:video];

- (void)addCommentTitle:(NSString *)commentTitle
                   text:(NSString *)commentContent
                toVideo:(GDataEntryYouTubeVideo *)entry {
    GDataComment *commentObj = [entry comment];
    GDataFeedLink *feedLink = [commentObj feedLink];
    NSURL *feedURL = [feedLink URL];
    if (feedURL) {
        // fetch the comment feed for the video

        GDataServiceGoogleYouTube *service = [self youTubeService];
        [service setYouTubeDeveloperKey:devKey];
        [service setAuthToken:[self getRequestToken]];
        [service fetchFeedWithURL:feedURL completionHandler:^(GDataServiceTicket *ticket, GDataFeedBase *commentFeed,NSError *error) {
        if (error == nil) {
                        GDataEntryYouTubeComment *newCommentEntry = [GDataEntryYouTubeComment commentEntry];
                [newCommentEntry addContentValueDeclaration];
                [newCommentEntry setTitleWithString:commentTitle];
                [newCommentEntry setContentWithString:commentContent];
                NSString *subString = [videoString substringWithRange: NSMakeRange(0, [videoString rangeOfString: @"?"].location)];
                NSString *last=[subString lastPathComponent];
                NSString *ss=@"http://gdata.youtube.com/feeds/api/videos/";
                NSString *idd=@"/comments";
                NSString *com=[NSString stringWithFormat:@"%@%@%@",ss,last,idd];
                NSURL *postURL = [NSURL URLWithString:com ];
                [service fetchEntryByInsertingEntry:newCommentEntry
                                                 forFeedURL:postURL
                                          completionHandler:^(GDataServiceTicket *ticket, GDataEntryBase *entry, NSError *error) {
                                              // callback
                                              if (error == nil) {
                                                  NSLog(@"url.: succeeded ");
                                              }
                                          }];
                    }
          }];
    }
} 
```

使用登录详细信息获取身份验证令牌

```
- (NSString*) getRequestToken {
// return your auth token as string
} 
```

# php - 如何更快地循环 CSV mysql 更新？

> ID：14129004
> 
> 赞同：0
> 
> 时间：2013-01-02T20:54:43.420
> 
> 标签：php, mysql, database, csv, import

我有一个包含 26,000 行的 csv 文件，我正在遍历行并更新包含 250,000 多条记录的表中的记录（有时是多个）。目前，它的年龄！我想知道是否有另一种方法可以更快地做到这一点（在代码或 mysql/etc 中）

```
$row = 1;
if (($handle = fopen("zip-codes-database-DELUXE-BUSINESS2.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
            if($row> 1){

                # GET THE AREACODE FROM data 20

                # name is: 21

                $insert = "UPDATE ".TBLPREFIX."cities SET data = '".escape(serialize($data))."' WHERE area_code = ".$data[20]." AND title = '".trim(strtoupper($data[21]))."'";
                mysql_query($insert) or die(mysql_error());
            }
            $row++;
    }
    fclose($handle);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:00:31.987

Based on nothing I might try:

1.  get the csv into a table via cmd line or 'load data infile'
2.  update the records into a temp table using a 'insert ... select' where you join the old and new
3.  move the temp table back onto the original (delete/rename)

Seems like it would be faster.. if a bit kludgy.

# android - 如何使用 gmail 中的滑动手势从列表中删除项目

> ID：14129005
> 
> 赞同：7
> 
> 时间：2013-01-02T20:54:46.277
> 
> 标签：android, list, swipe

> **可能重复：**
> [android 滑动删除列表行](https://stackoverflow.com/questions/11040895/android-swipe-to-delete-list-row)

我想实现一个项目列表，并在向左->向右滑动时，项目应该被删除，就像 Gmail 一样。Android有一些原生元素来开发这样的列表吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-02T21:03:24.243

几个月前，Roman Nurik 发布了一些实现此功能的 beta 代码。需要注意的是，它仅与 ICS+ 设备兼容。幸运的是，Jake Wharton 在发布后不久使用 NineOldAndroids 库向后移植了代码。

*   [**BETA** Android 4.0 风格的“滑动关闭”示例代码](https://gist.github.com/2980593)
*   [使用 NineOldAndroids 在所有 API 级别上工作的 Roman Nurik 的“Swipe-to-dismiss”示例代码的反向移植](https://github.com/JakeWharton/SwipeToDismissNOA)

后者也提供了一个示例 APK，以防您想先玩一下结果。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-02T21:32:37.337

没有直接来自android的本机api，但这里是扩展默认列表视图的第三级api“drag-sort-listview”

[https://github.com/bauerca/drag-sort-listview](https://github.com/bauerca/drag-sort-listview)

并且 api 在滑动手势上有一个删除选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T21:03:06.590

没有本机代码可以做到这一点。[但是，您可以在此处](https://gist.github.com/2980593)查看 Roman Nurik 的示例代码。谷歌加在[这里发布](https://plus.google.com/113735310430199015092/posts/Fgo1p5uWZLu)

# facebook - $_SESSION['fb_id'] 在 facebook 连接后重定向到子域 uri 时丢失

> ID：14129011
> 
> 赞同：0
> 
> 时间：2013-01-02T20:55:17.187
> 
> 标签：facebook, session, subdomain, facebook-php-sdk

我有几个子域网站，我希望每个都连接到 Facebook。

我已经为主域创建了我的 fb 应用程序，它适用于它。

在每个子域中，我使用此链接进行连接（由 ajax 调用编写）：

```
<?php
echo "<a href=\"https://graph.facebook.com/oauth/authorize?type=user_agent&client_id=myID
    &scope=email,publish_stream,status_update&redirect_uri=http://www.mydomain.com/fbConnect.php?ref=".$_SERVER['HTTP_REFERER']."\">
    Connect with Facebook
    </a>";
?> 
```

我的 fbConnect.php

```
<?php
    header('P3P:CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"'); // Hack IE for POST params...
    header("Cache-Control: no-cache");
    header("Pragma: no-cache");

    session_set_cookie_params(0, '/', '.mydomain.com', false); // If session is lost with subdomains...
    session_start();
    require('/home/....../facebook.php');

    $facebook = new Facebook(array(
    'appId' => 'myid',// changed for the example
    'secret' => 'mysecret', // same
    'cookie' => true,
    ));

    $user = null;

    $loginUrl=$facebook->getLoginUrl(
            array(
                  'canvas'    => 0,
                'scope'         => 'email,publish_stream,user_location'
            )
    );
    $logoutUrl  = $facebook->getLogoutUrl();

    $user=$facebook->getUser();

    if(!$user) echo "<script>top.location.href='".$login_url."'</script>";

    if ($user) {
        echo "Ok";
        $user_profile = $facebook->api('/me');  
        $userInfo = $facebook->api("/$user");
        $_SESSION['fb_id']=$userInfo['id'];
       // Some stuff...
       echo "<script type='text/javascript'>top.location.href = '".$_GET['ref']."';</script>";
    }
?> 
```

范围、连接和重定向都在工作，但我无法`$_SESSION['fb_id']`在`$_GET['ref']`页面中返回……但是 session_id() 是一样的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:07:31.637

最后，有一些错误：

**1\. 会议**

他们没有跟随子域，所以诀窍是更改 php.ini 或添加`ini_set("session.cookie_domain", ".myDomain.com");`（感谢@Tommy Crush）

**2.redirect_uri**

就我而言，似乎不可能在`redirect_uri=http://www.myDomain.com?var1=123&var2=456...`

**3.API使用**

我不得不阅读 GRAPH API 的新初学者面板，我对更改的数量感到惊讶......

我最终使用了以下内容：

在每个子域中

```
// Simple link to the connection page
echo "<a href=\"http://wwww.myDomain.com/fbConnect.php\">Connect with FB</a>";
// Record the current page whitch called this ajax
$_SESSION['connexion_ref']=$_SERVER['HTTP_REFERER']; 
```

我的新 fbConnect.php

```
ini_set("session.cookie_domain", ".myDomain.com");
session_start();

$app_id = "myappid";
$app_secret = "myappsecret";
$my_url = "http://www.mydomain.com/fbConnect.php";

$code = $_REQUEST["code"];

if(empty($code)) {
 $_SESSION['state'] = md5(uniqid(rand(), TRUE)); // CSRF protection
 $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" 
   . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state="
   . $_SESSION['state']. "&scope=email,publish_stream,status_update,offline_access";

 echo("<script> top.location.href='" . $dialog_url . "'</script>");
}

if($_SESSION['state'] && ($_SESSION['state'] === $_REQUEST['state'])) 
{
    $token_url = "https://graph.facebook.com/oauth/access_token?"
     . "client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url)
     . "&client_secret=" . $app_secret . "&code=" . $code;

    $response = file_get_contents($token_url);
    $params = null;
    parse_str($response, $params);

    $_SESSION['access_token'] = $params['access_token'];

    $graph_url = "https://graph.facebook.com/me?access_token=" 
     . $params['access_token'];

    $user = json_decode(file_get_contents($graph_url));
    //var_dump($user);

    $_SESSION['id_fb']=$user->id;
   // Some stuff
    // Then redirect to the subdomain page of connection
   echo "<script type=\"text/javascript\">top.location.href =\"".$_SESSION['connexion_ref']."\";</script>";
} 
```

现在它就像一个魅力。

# java - Java 和无符号值

> ID：14129017
> 
> 赞同：8
> 
> 时间：2013-01-02T20:55:36.120
> 
> 标签：java, bit-manipulation

我正在从 DatagramSocket 解析无符号位。我总共有 24 位（或 3 个字节）进入 - 它们是：1 个无符号 8 位整数，后跟一个 16 位有符号整数。但是java从不将任何超过有符号字节的内容存储到字节/字节数组中？当 java 接受这些值时，你会丢失最后的第 8 位吗？

```
DatagramSocket serverSocket = new DatagramSocket(666);
        byte[] receiveData = new byte[3]; <--Now at this moment I lost my 8th bit

        System.out.println("Binary Server Listing on Port: "+port);

        while (true)
        {
            DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);
            serverSocket.receive(receivePacket);
            byte[] bArray = receivePacket.getData();
            byte b = bArray[0];

        } 
```

![在此处输入图像描述](../Images/1f3945c7af0ac0ac5f7c6aee270e3fcb.png)

自从我把它变成一个字节后，我现在是否丢失了第 8 位？我初始化了一个 3 字节的字节数组是不是错了？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-02T20:58:12.630

> 当 java 接受这些值时，你会丢失最后的第 8 位吗？

不，当它被设置时，你最终会得到一个负值。

因此，要获得 0 到 255 之间的值，最简单的方法是使用如下内容：

```
int b = bArray[0] & 0xff; 
```

首先将 the`byte`提升为 an `int`，这将对其进行符号扩展，如果原始值中的高位为 1，则导致 25 个前导 1 位。然后`& 0xff`再次摆脱前 24 位 :)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-02T21:03:19.190

不，您不会丢失第 8 位。但不幸的是，Java 有两个“特性”，这使得处理这些值变得非常困难：

*   它的所有原始类型都已签名；
*   当将一个原始类型“解包”为另一个更大尺寸的原始类型时（例如，将 a 读取`byte`到 an`int`就是这种情况），“较低类型”的符号位被扩展。

这意味着，例如，如果您阅读 byte `0x80`，其二进制转换为：

```
1000 0000 
```

当您将其读取为整数时，您会得到：

```
1111 1111 1111 1111 1111 1111 1000 0000
                              ^
                              This freaking bit gets expanded! 
```

而你真的想要：

```
0000 0000 0000 0000 0000 0000 1000 0000 
```

即，整数值 128。因此，您必须屏蔽它：

```
int b = array[0] & 0xff;

1111 1111 1111 1111 1111 1111 1000 0000 <-- byte read as an int, your original value of b
0000 0000 0000 0000 0000 0000 1111 1111 <-- mask (0xff)
--------------------------------------- <-- anded, give
0000 0000 0000 0000 0000 0000 1000 0000 <-- expected result 
```

悲伤，但真实。

更一般地说：如果您希望操作大量面向字节的数据，我建议您查看[ByteBuffer](http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html)，它可以提供很多帮助。但不幸的是，这不会让您免于位掩码操作，只是它可以更容易地读取给定数量的字节作为时间（作为原始类型）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T20:59:13.923

在 Java 中，byte（以及 short、int 和 long）只是有*符号*的数字数据类型。但是，这并不意味着在将它们视为*无符号*二进制数据时会丢失任何数据。如您的插图所示，`10000000`是`-128`带符号的十进制数。如果您正在处理二进制数据，只需将其视为二进制形式就可以了。

# android - 实现自己的安卓蓝牙文件传输进度

> ID：14129020
> 
> 赞同：0
> 
> 时间：2013-01-02T20:55:58.577
> 
> 标签：android, bluetooth

在android中通过蓝牙发送文件很容易。我完全了解有关使用内置 android 系统程序处理传输的所有解决方案。

但是我看到一些应用程序在没有系统应用程序的情况下一点一点地显示传输进度，我想知道如何实现？我认为，使用受限制的普通 Android 蓝牙 API。

我在谷歌上搜索、阅读、浏览了无数个小时，但我能找到的只是使用意图和诸如此类的东西来发送文件，它本质上是使用系统应用程序来发送文件......

我尝试使用 RFCOMM 套接字进行编码，并且能够将文件字节写入流，但这不起作用，因为另一端没有显示它获得了有效的数据流，并且经过一些研究，协议还有很多内容启动正确的传输，而不仅仅是写入流。

# php - Kohana 3.2 - 管理员修改的 ORM 更新字段

> ID：14129021
> 
> 赞同：0
> 
> 时间：2013-01-02T20:56:00.547
> 
> 标签：php, orm, kohana

5 年后我回到专业编程，所以我从头开始学习；）所以我选择 Kohana 框架作为我的第一个框架我现在尝试构建第一个应用程序，我有一个小问题，让我们开始吧。

我使用 Kohana ORM 和 Auth 模块，因为您知道默认 Auth 模块用户表具有默认字段（用户名、密码、lastlogin）我尝试通过以下方式扩展 User：

*   创建新表 (user_additionals)
*   创建新模型（User_Additional）

模型看起来像这样： http: [//pastie.org/private/412jflfoifyqs46uaxmga](http://pastie.org/private/412jflfoifyqs46uaxmga) - 没什么特别的。一切都会好起来的，我喜欢这样的简单参考：$user->additional->firstname 等。

目前我有 bulid 管理面板（管理员可以编辑每个用户）和...每个字段。我有 10 个字段，例如名字、姓氏、出生日期，以表单形式呈现（填写的表单 - 由模板分配加载的占位符），这是我的小问题：如果管理员需要编辑用户签名，我想让管理员可以从多个字段中编辑一个或其他 - 他从许多可用字段中编辑一个字段，然后单击“提交”很容易 - 一个表格已更新。

但是，如果我尝试使用这样的东西： $edit = ORM::Factory('User_Additional')->values($_POST); 我得到验证异常（被捕获但这里是验证错误 - 模型要求所有字段都为 !empty...（通过验证规则）

我使用临时解决方案，但我是一个完美主义者，我想从一开始就创建好的代码，所以在这里你可以找到我的代码： http: [//pastie.org/private/axtwxbt66gtvcwiv97hvlq](http://pastie.org/private/axtwxbt66gtvcwiv97hvlq) 我的解决方案从第 29 行开始（上面的链接）。

所以我的问题是：**在这种情况下如何从验证中排除例外情况？** **如何使验证例外，例如操作 /admin/edituser/ 是否可能？** **我怎样才能更好地制作我的模型代码？感谢任何可以帮助我的建议**

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T07:15:01.720

验证只会在“非空”字段上运行，除非您指定“not_empty”规则。所以基本上，您可以执行以下操作：（当您需要强制执行字段的“非空”时）

```
class Model_User_Additional extends ORM
{
  protected $foreign_key_suffix = 'user_id';
  protected $_primary_key = 'user_id';

  public function enforce_rules(array $fields)
  {
    $validation = Validation::factory($this->_object);
    foreach ($fields as $field)
    {
      $validation->rule($field, 'not_empty');
    }
    return $validation;
  }

  public function rules()
  {
    /* Removed all not_empty */
    return array(
      /*  'user_id' => array(
            array('not_empty'),
        ), */
        'firstname' => array(
            array('text'),
        ),
        'lastname' => array(
            array('text'),
        ),
        'birthdate' => array(
            array('date'),
        ),
        'postprice' => array(
            array('decimal'),
        ),
        'articleprice' => array(
            array('decimal'),
        ),
        'phonenumber' => array(
            array('phone'),
        ),
  /*      'active' => array(
            array('not_empty'),
        ), */
  /*      'lastupdate' => array(
            array('not_empty'),
        ), */
        'info' => array(
            array('text'),
        ),

    );
  }

  public function edit_user($values, $expected, $extra_validation = NULL)
  {
    return $this->values($values, $expected)->update($extra_validation);
  }
} 
```

用法是：

```
$user = ORM::factory('User_Additional');
$user->values(array('field' => 'value'))->create($user->enforce_rules(array('user_id')));
/* and the same for updating */
$user->set('info', $_POST['info'])->update($user->enforce_rules(array('info'))); 
```

# php - 在 PHP 中实现切割库存算法

> ID：14129023
> 
> 赞同：4
> 
> 时间：2013-01-02T20:56:10.713
> 
> 标签：php, algorithm

我需要使用 php 脚本来实现[切割库存问题。](http://en.wikipedia.org/wiki/Cutting_stock_problem)由于我的数学技能不是那么好，我只是想强行使用它。

从这些参数开始

*   $inventory 是一个可切割的长度数组。
*   $requestedPieces 是客户要求的长度数组。
*   $solution 是一个空数组

我目前已经制定了这个递归函数来提出所有可能的解决方案：

```
function branch($inventory, $requestedPieces, $solution){
    // Loop through the requested pieces and find all inventory that can fulfill them
    foreach($requestedPieces as $requestKey => $requestedPiece){
        foreach($inventory as $inventoryKey => $piece){
            if($requestedPiece <= $piece){
                $solution2 = $solution;
                array_push($solution2, array($requestKey, $inventoryKey));
                $requestedPieces2 = $requestedPieces;
                unset($requestedPieces2[$requestKey]);
                $inventory2 = $inventory;
                $inventory2[$inventoryKey] = $piece - $requestedPiece;
                if(count($requestedPieces2) > 0){
                    branch($inventory2, $requestedPieces2, $solution2);
                }else{
                    global $solutions;
                    array_push($solutions, $solution2);
                }
            }
        }
    }
} 
```

我发现最大的低效率是它会多次找到相同的解决方案，但步骤的顺序不同。

例如：

*   $库存=数组（1.83，20.66）；
*   $requestedPieces = array(0.5, 0.25);

该函数将提出 8 个解决方案，而它应该提出 4 个解决方案。有什么好办法解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T02:27:40.093

这并不能回答您的问题，但我认为值得一提：

您还有其他几种方法可以解决您的问题，而不是蛮力解决问题。关于该主题的[维基百科页面](http://en.m.wikipedia.org/wiki/Cutting_stock_problem)非常详尽，但我将仅描述另外两个更简单的想法。我将对某些词使用维基百科术语，即*master*用于库存件，而*cut*用于请求件。我将使用*set*来表示与给定母版有关的一组剪辑。

第一个基于[贪心算法](http://en.m.wikipedia.org/wiki/Greedy_algorithm)，包括用最大的可用切割填充一个集合，直到没有更多的切割可以适合，然后对每个主控重复相同的过程，为每个主控生成一个集合。

第二个更[动态](http://en.m.wikipedia.org/wiki/Dynamic_programming)：它使用递归（就像你的一样），并在递归的每个步骤中寻找最适合剩余长度的 master 和切割，目标是在没有更多切割可以适应时最小化浪费的长度.

```
function branch($master, $cuts, $set){
     $goods = array_filter($cuts, function($v) use ($master) { return $v <= $master;});
     $res = array($master,$set,$cuts);
     if (empty($goods))
         return $res;
     $remaining = array_diff($cuts, $goods);
     foreach($goods as $k => $g){
         $t = $set;
         array_push($t, $g);
         $r = $remaining;
         $c = $goods;
         for ($i = 0; $i < $k; $i++)
             array_push($r,array_shift($c));
         array_shift($c);
         $t = branch($master - $g, $c, $t);
         array_walk($r, function($k,$v) use ($t) {array_push($t[2], $v);});
         if ($t[0] == 0) return $t;
         if ($t[0] < $res[0])
             $res = $t;
     }
     return $res;
} 
```

上面的函数应该为您提供给定主机的最佳集合。它返回一个包含 3 个值的数组：

*   master 上浪费的长度
*   集合
*   剩余的削减

参数是

*   主长度，
*   要执行的切割（必须按降序排序），
*   已安排的切割集（预先存在的集，对于每个主控的第一次调用将是空的）

警告：这取决于主人的顺序，你当然可以编写一个函数来尝试所有相关的可能性来找到主人的最佳顺序。

# php - 如何在php中格式化我的数据

> ID：14129026
> 
> 赞同：0
> 
> 时间：2013-01-02T20:56:15.733
> 
> 标签：php, javascript, arrays, format

我在 php 中有一个数组，`print_r`它看起来像这样

```
Array ( 
    [0] => Array ( [0] => 2 [1] => 3 [2] => 3 [3] => 1 [4] => 1 [5] => 4 [6] => 1 ) 
    [1] => Array ( [0] => 1 [1] => 2 [2] => 2 [3] => 1 [4] => 1 [5] => 1 [6] => 1 ) 
) 
```

当我这样做时，`json_encode($mydata)`它看起来像这样

`[["2","3","3","1","1","4","1"],["1","2","2","1","1","1","1"]]`

但我需要这个不带引号，因为下一个处理只需要这样的数据集：

`var dataset = [ 5, 10, 15, 20, 25 ];`

该数据集从未打算使用 json 标准，我只需要正确格式化我的数组。

所以问题是“我如何从 json 中删除引号”，这只是非标准的无效 json，不会得到我需要的响应

或者

“我如何将这个 php 数组格式化为像数据集一样”。

它要么涉及 php 中的另一种打印函数，要么涉及 javascript 中的一些 forloop 正则表达式

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T21:04:03.443

您需要使用该`JSON_NUMERIC_CHECK`标志，这将强制将所有数字字符串转换为数字。

像这样：

```
json_encode($array,JSON_NUMERIC_CHECK); 
```

请注意，此标志仅适用于 PHP 5.3.3 版本

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T20:59:52.200

Ehhh you could try this:

```
$d = array();
foreach($myData as $data) {
    $d[] = "[" . implode(",", $data) . "]";
}
echo "[" . implode(",", $d) . "]"; 
```

Demo: [http://codepad.org/nTveAGWm](http://codepad.org/nTveAGWm)

Although echoing out `json_encode($myData);` worked as well: [http://codepad.org/KTfQHz6s](http://codepad.org/KTfQHz6s)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T21:04:02.187

json_encode 加引号的原因是因为数据是一个字符串。试试这个例子来查看差异：

```
$arr = array(array(4,5,6), array(8,10, "11"));
print_r($arr);
echo "<br>";
echo json_encode($arr); 
```

您可以尝试在 json_encoding 之前使用[intval](http://php.net/manual/en/function.intval.php "间隔")将其解析为 int

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T21:09:17.067

你可以试试这个

```
$c = array(1,2,3);
echo "Non-associative array output: ", json_encode($c), "\n"; 
```

返回：
非关联数组输出：[1,2,3]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T21:11:47.987

使用您的示例字符串，您可以这样做

```
$arr = json_decode('[["2","3","3","1","1","4","1"],["1","2","2","1","1","1","1"]]');
foreach ($arr as &$val)
    foreach ($val as &$item)
        $item = (int)$item;
var_dump(json_encode($arr)); 
```

终于我明白了

```
string(33) "[[2,3,3,1,1,4,1],[1,2,2,1,1,1,1]]" 
```

# java - 从另一个 Web 服务调用 Web 服务？

> ID：14129030
> 
> 赞同：0
> 
> 时间：2013-01-02T20:56:26.700
> 
> 标签：java, jakarta-ee, glassfish, jax-ws, ejb-3.0

我使用 Netbeans 7.2.1 在 Glassfish 服务器上部署了两个 Java Web 服务，这两个服务都在同一个 Web 应用程序中。我正在尝试从 webservice1 调用 webservice2，这是代码：

```
ebank.Customer_Service service = new ebank.Customer_Service();
ebank.Customer port = service.getCustomerPort();
port.getData(); 
```

但是我收到错误消息：

```
cannot find symbol
  symbol:   class Customer
  location: package ebank 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:17:54.497

解决方案是将 Web 服务称为普通的 Java 类。

```
Customer service = new Customer();
service.getData(); 
```

# git - 如何编写 zsh 别名以从当前本地分支推送新分支？

> ID：14129032
> 
> 赞同：1
> 
> 时间：2013-01-02T20:56:33.683
> 
> 标签：git, bash, unix, zsh, zshrc

现在，当我提交并想要推送和创建远程分支时，我做了：

```
app_folder (some_branch)> git push -u origin some_branch:some_branch 
```

有没有办法编写 zsh alias ex: `gpu`which get the name of current branch and do that without my help？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:13:21.057

这是一个非常基本的脚本。可能需要一些附加功能（和错误检查！），但它有效：

```
#!/bin/zsh
function branch() {
    ref=$(git symbolic-ref HEAD)
    echo "${ref#refs/heads/}"
}
# TODO: Let the user set the remote to push to? 
git push -u origin ${branch}:${branch} 
```

该`branch()`函数取自 Oh-My-ZSH [`git_prompt_info()`](https://github.com/robbyrussell/oh-my-zsh/blob/master/lib/git.zsh)- 它用于将电流`git branch`放入`PROMPT`.

这可能会作为一个`zsh`函数而不是别名很好地工作。

# iphone - 在以编程方式移动的滚动视图中检测“结束减速”

> ID：14129034
> 
> 赞同：3
> 
> 时间：2013-01-02T20:56:42.053
> 
> 标签：iphone, ios, xcode, uiscrollview, scroll

我有一个手动拖动的滚动视图，现在我希望通过以下代码以编程方式移动滚动视图：

```
offset = CGPointMake(scrollView.contentOffset.x+320, 0);

[UIScrollView beginAnimations:@"scrollAnimation" context:nil];
[UIScrollView setAnimationDuration:0.5];
[scrollView1 setContentOffset:offset];
[UIScrollView commitAnimations]; 
```

它运行良好，但现在不调用函数 scrollViewBeginDragging 和 scrollViewEndDecelerating。Begindragging 对我来说没问题，但我不知道在以编程方式触发时如何检测 de scrollview 移动的结束。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T21:03:37.427

实现`scrollViewDidEndScrollingAnimation:`委托方法。这正是它的用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:00:47.520

嗯......你有点知道什么时候应该打电话，对吧？这些回调是为触摸而设计的，所以它们不起作用，但你告诉它完成 0.5，那么为什么不自己安排对委托方法的调用呢？

```
[self performSelector:@selector(scrollViewDidEndDecelerating:) withObject:scrollView afterDelay:0.5]; 
```

# gif - GIF 理解图像解码 - Lempel-Ziv-Welch

> ID：14129039
> 
> 赞同：0
> 
> 时间：2013-01-02T20:56:59.387
> 
> 标签：gif, decoding, graphic, lzw

我正在尝试构建一些代码，可用于将 GIF 文件转换为另一种文件格式（我已经知道如何创建。[我正在尝试简化从 GIF 到 GRF 的转换——一种打印机图形文件格式。]）

我正在处理来自维基百科（[http://en.wikipedia.org/wiki/Graphics_Interchange_Format#Image_coding](http://en.wikipedia.org/wiki/Graphics_Interchange_Format#Image_coding)）的信息。

有一节描述了从字节到 9 位代码的转换。他们展示的例子是：

```
9-bit   binary   Bytes
(hex)            (hex)

        00000000  00
100
        0101000|1  51
028
        111111|00  FC
0FF
        00011|011  1B
103
        0010|1000  28
102
        011|10000  70
103
        10|100000  A0
106
        1|1000001  C1
107
         10000011  83
         00000001  01
101
        0000000|1  01 
```

我能够从文件生成右侧给出的字节。（我完全按照他们在文章中描述的方式创建了一个文件（3x5，MSPaint 中黑色像素为 0,0 和 1,1。）

我不明白的是他们如何将这些字节转换为 9 位十六进制代码。

00如何变成100？二进制中的竖线 (|) 是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:23:43.970

才意识到发生了什么...

```
 00000000  00        Add the next digit to the beginning - 100000000 = 100
100
         0101000|1  51        Next Digit - 000101000 = 028
028
         111111|00  FC        -011111111 = 0FF
0FF
         00011|011  1B        -100000011 = 103
103
         0010|1000  28        -100000010 = 102
102
         011|10000  70        -100000011 = 103
103
         10|100000  A0        -100000110 = 106
106
         1|1000001  C1        -100000111 = 107
107
         10000011  83
         00000001  01         -100000001 = 101
101
         0000000|1  01 
```

# asp.net - MVC Intellisense 和 Recipe 不适用于转换后的 webforms 项目

> ID：14129042
> 
> 赞同：0
> 
> 时间：2013-01-02T20:57:02.660
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-2, asp.net-mvc-4, webforms

我按照以下链接上的说明将我们的 webforms 项目转换为 MVC

[http://www.hanselman.com/blog/IntegratingASPNETMVC3IntoExistingUpgradedASPNET4WebFormsApplications.aspx](http://www.hanselman.com/blog/IntegratingASPNETMVC3IntoExistingUpgradedASPNET4WebFormsApplications.aspx)

但是，智能感知和语法突出显示不适用于 cshtml 视图。此外，“创建新区域”等配方也不适用于转换后的项目。所有这些东西都在“纯”mvc-4 项目中工作。

有人知道我可能会错过什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:59:05.893

Open the `.csproj` file in a text editor and make sure that `{39613BA0-1206-4A4B-A16A-C1F2A22D1267}` appears in the `<ProjectTypeGuids>` element.

This GUID tells VIsual Studio to add MVC menu items.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T23:26:07.353

我的同事对我们下载的 MVC4 项目模板和正在升级的现有项目进行了比较。

我们合并了Guids，这让食谱起作用了。

[他还在这里](http://forums.asp.net/t/1774792.aspx/1)找到了智能感知解决方案：

除了我们的版本是 2.0.0.0 而不是 1.0.0.0 （以匹配 .csproj 包含中的引用）

# bundler - 如何显示捆绑程序命令和实用程序的帮助？

> ID：14129046
> 
> 赞同：0
> 
> 时间：2013-01-02T20:57:34.740
> 
> 标签：bundler

`bundle --help`显示列出命令（即安装）和实用程序（即显示）的帮助文件。如何查看有关如何使用特定命令或实用程序的详细信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:57:34.740

我在命令行中通过反复试验发现了这一点：

```
bundle --help show
  Usage:
    bundle show [GEM]

  Options:
        [--paths=List the paths of all gems that are required by your Gemfile.]
        [--no-color=Disable colorization in output]
    -V, [--verbose=Enable verbose output mode]

  Description:
    Show lists the names and versions of all gems that are required by your Gemfile. Calling show with [GEM] will list the exact location of that gem on your machine. 
```

所以一般来说，输入`bundle --help <command or utility name>`

# php - 实体中已定义的 PHP Xpath 错误未显示结果

> ID：14129051
> 
> 赞同：-2
> 
> 时间：2013-01-02T20:58:03.813
> 
> 标签：php, xpath

我在这个 php xpath 应用程序中遇到错误，我无法修复，如果可能的话，我希望能得到一些帮助

```
 <?php
   //Get Username
    $username = $_GET["u"];

    $html = file_get_contents('http://us.playstation.com/publictrophy/index.htm?onlinename='     .$username);
    $html = tidy_repair_string($html);
    $doc = new DomDocument();
    $doc->loadHtml($html);
    $xpath = new DomXPath($doc);
    // Now query the document:
        foreach ($xpath->query('//*[@id="id-handle"]') as $node) {
        echo $node, "\n";
        }
        foreach ($xpath->query('//*[@id="leveltext"]') as $node1) {
        echo $node1, "\n";
        }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:02:47.543

放在`@`前面，`$dom->loadHTML($html)`因为 loadHTML 通常会引起很多警告和通知

```
$dom = new DOMDocument();
@$dom->loadHTML($html);

$xpath = new DOMXPath($dom); 
```

# drupal-7 - 修复计算字段中的用户 ID 值（Drupal 7）

> ID：14129054
> 
> 赞同：0
> 
> 时间：2013-01-02T20:58:11.643
> 
> 标签：drupal-7

我在 Drupal 7 中有一个用于创建文章的内容类型。我想要一个名为“作者”的计算字段，它存储创建文章的人的用户 ID，但不会更改为随后编辑文章的任何人的用户 ID。因此，不会这样做，因为“作者”将根据最后保存文章的用户重新设置：

```
 $entity_field[0]['value'] = $user -> uid; 
```

发起者的用户 ID，如果你喜欢的话。我认为放置在内容类型设置的计算代码部分中的以下内容会起作用：如果“作者”不包含任何内容，则使用用户 ID 填充它，如果不包含则什么也不做。

```
if (!isset($entity -> field_author['und'][0]['value']) {
  global $user;
  $entity_field[0]['value'] = $user -> uid;
} 
```

它不起作用。我的问题：这是否行不通，因为我正在测试尚未创建的记录字段中是否存在值？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T20:28:00.713

解决方案：更新节点时，用户 id 不会改变。所以不需要像我想的那样需要一个计算域。

# c - Visual Studio 错误 C2226 '意外类型'

> ID：14129060
> 
> 赞同：0
> 
> 时间：2013-01-02T20:58:38.263
> 
> 标签：c, visual-c++

我创建了一个结构数据类型并尝试为这些项目的列表动态分配内存，`realloc`但它导致：

```
error C2226: syntax error : unexpected type 'Employee' 
```

[文档](http://msdn.microsoft.com/en-us/library/9k92azf0%28v=vs.71%29.aspx)只是说：在类型说明符之前或之中发生语法错误。

我无法弄清楚这里出了什么问题。

```
int current_employees=0; 
struct Employee *list = 0; 
```

...

```
current_employees++;
list =  struct Employee * realloc((void*) list, current_employees * sizeof(struct Employee)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T20:59:25.783

你可能是说

```
list = (struct Employee *) realloc((void*) list, current_employees * sizeof(struct Employee)); 
```

否则，您将尝试将类型乘以指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T21:00:16.563

那个演员表中缺少一些括号？

```
list =  (struct Employee *)realloc((void*) list, current_employees * sizeof(struct Employee)); 
```

# c# - wants to mark the currently use file in my ListView

> ID：14129062
> 
> 赞同：0
> 
> 时间：2013-01-02T20:58:51.617
> 
> 标签：c#, winforms

i build application who take all the files in my ListView (pcap files )and start to play all the packets. what i want is that the currently file that play will mark and after this file finish the next file after will be marked and the focus will be all the time on the selected file (i dont want to manually acroll to see the file) what i have now is that the first file marked and after it finish my application markes also the second and after the third together.

tis is my start button:

```
private void btnStart_Click(object sender, EventArgs e)
{
    string filePath = string.Empty;
    ThreadPool.QueueUserWorkItem(delegate
    {
        for (int i = 0; i < lvFiles.Items.Count; i++)
        {
            this.Invoke((MethodInvoker)delegate
            {                        
                lvFiles.EnsureVisible(i);
                lvFiles.Items[i].Selected = true;
                filePath = lvFiles.Items[i].Tag.ToString();
            });

            PcapFile pcapFile = new PcapFile();
            pcapFile.sendQueue(filePath, adapter);
        }
    });
} 
```

`lvFiles` is my ListView, `PcapFile` is my class and `pcapFile.sendQueue` is the method who start the play.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:06:50.450

您应该为此调用`Select()`列表视图。也不要忘记在选择下一个项目之前取消选择当前项目。

```
 for (int i = 0; i < lvFiles.Items.Count; i++)
    {
        this.Invoke((MethodInvoker)delegate
        {                        
            lvFiles.EnsureVisible(i);
            lvFiles.Items[i].Selected = true;
            lvFiles.Select();
            filePath = lvFiles.Items[i].Tag.ToString();
        });

        PcapFile pcapFile = new PcapFile();
        pcapFile.sendQueue(filePath, adapter);
        lvFiles.Items[i].Selected = false;
    } 
```

# http - Http communication over WAN

> ID：14129063
> 
> 赞同：0
> 
> 时间：2013-01-02T20:58:54.763
> 
> 标签：http, sockets, webserver, port, serversocket

I have the following basic server/client java code, that works when server and client are in the same network:-

1.  Connected via the same router.

2.  Client directly connected to Server over Wifi.

The use case desired: Client knows Server IP/Port (which may be local or anywhere over the internet). Client sends byte array to Server (which is listening to the port). Server processes the received byte array.

Here's the code (only relevant snippet, omitted try-catch blocks here):

**Server.java**

```
public static final int SERVERPORT = 4444;
byte[] inBuffer = new byte[1024];
int bytes

ServerSocket serverSocket = new ServerSocket(SERVERPORT);
Socket client = serverSocket.accept();
InputStream inputStream = client.getInputStream();

bytes = inputStream.read(inBuffer);

/* now process input */ 
```

**Client.java**

```
OutputStream tmpOut;

/* Server IP and PORT are known to the client, manually entered by user */
InetAddress serverAddress = InetAddress.getByName(ServerIP);
serverSocket = new Socket(serverAddress,SERVERPORT);
tmpOut = serverSocket.getOutputStream();
tmpOut.write(buffer); 
```

This works when server is in same network as client, as expected. If I however, connect server to a different network, and client to another network, and then run the above client code, using the Public IP of the server, it does not connect to the server.

These previous questions suggest that the client-side router can't find the server, and the server needs to forward it's port:

[Socket Listener to non-local IP](https://stackoverflow.com/questions/11306549/socket-listener-to-no-local-ip-is-not-working)

[Non-local connection with sockets](https://stackoverflow.com/questions/12450736/remotely-connecting-two-non-local-computers-with-sockets)

[Socket server on WAN](https://stackoverflow.com/questions/7018796/tcp-udp-socket-server-on-wan)

Questions (may be naive and basic):

1.  Is there a way to do this without port forwarding and using Java?

2.  If port forwarding is necessary, how do I forward application port from inside the server code. My user will be installing the server code on his/her machine, and I wouldn't trouble the user to manually forward the port.

3.  How does a known server like Google or Stackoverflow listen to incoming streams from random clients. How are these servers different (by concept) from the above server code I have posted?

4.  Do I need to implement my server as a public web server, just to receive a byte array?

If not code, conceptual insights appreciated. Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T20:17:46.117

当我通过 Java 搜索 NAT 时，在 SO 上找到了以下答案：

[通过 NAT 的套接字](https://stackoverflow.com/questions/4458631/help-communicating-with-sockets-through-nat)

以上导致我打孔。我在这个问题的答案中找到了更多关于打孔和防火墙、NAT 的概念信息：

[打孔和 NAT](https://stackoverflow.com/questions/9656198/java-udp-hole-punching-example-connecting-through-firewall)

基于上述讨论的更多资源：

[跨 NAT 的 P2P](http://www.brynosaurus.com/pub/net/p2pnat/)

这些资源帮助我完全理解了这个概念。完成后，我将在 java 中发布我的代码。

感谢 paulsm4

# jquery - Form being sent with empty fields while validation and captcha are present

> ID：14129066
> 
> 赞同：1
> 
> 时间：2013-01-02T20:59:08.973
> 
> 标签：jquery, forms, validation, spam

I have a form that opens in colorbox, validates on submit, and utilizes reCatpcha to reduce spam. Even with all of these measures in place the form seems be getting sent with completely empty fields.

I have no idea how this is happening as I have no clue how someone (bot or human) is able to bypass everything and then submit the form with empty fields.

I realize this is a fairly specific issue, so I've tried to ask the question in a way that could benefit others as well. The validation is all done through Javascript, so perhaps a bot without javascript is able to bypass the validation. That being said, I find it odd the form is sent with completely empty fields every time this happens.

Hopefully someone can provide some generally thoughtful ideas as to how the form is getting submitted. If others have ever experienced this before, I'm sure some suggestions as to where to look could really help everyone out.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:35:02.730

如果您的所有验证都是 JavaScript，那么表单很可能由机器人提交，并且机器人没有理由在任何字段中放置任何内容。

再想想，你们有没有跨站防范措施？表单提交是否可以来自异地？

# php - 将当前类作为参数传递

> ID：14129069
> 
> 赞同：1
> 
> 时间：2013-01-02T20:59:21.070
> 
> 标签：php, class, parameter-passing, self-reference

我有这样的课：

```
// file /models/person.php
class Person 
{
    public function create_path()
    {
         self::log();
         path_helper($this);  //a global function in other php file
    }

    public function log()
    {
         echo "trying to create a path";
    }

} 
```

这`Person`是实例化的方式：

```
//file /tools/Builder.php
include('/models/Person.php');
class Builder
{
    public function build()
    {
        $type = 'Person';
        $temp = new $type();
        $temp->create_path();
    } 
} 
```

正如您在 Person 类中所指出的那样，我正在引用有问题的对象`$this`。但这不正确，因为显示了错误：

> 消息：未定义的变量：this

我想该`$this`引用指向其他对象，或者它无法工作，因为该对象是从另一个脚本创建的。另外，我尝试使用`self`，因为调用方法没有问题，但作为参数我得到：

> 消息：使用未定义的常量 self - 假定的 'self'

那么，你能引导我走向正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:07:10.263

我自己测试了你的代码，做了一些小的改动。它似乎工作正常。

*   改为`self::log()`_`$this->log()`
*   添加了全局函数`path_helper`（我不知道这是做什么的）

**PHP**

```
function path_helper(Person $object)
{
    var_dump($object);
}
class Person 
{
    public function create_path()
    {
         $this->log();
         path_helper($this);  //a global function in other php file
    }

    public function log()
    {
         echo "trying to create a path";
    }

}
class Builder
{
    public function build()
    {
        $type = 'Person';
        $temp = new $type();
        $temp->create_path();
    } 
}

$Build = new Builder();
$Build->build(); 
```

**结果**

```
trying to create a path

object(Person)[2] 
```

您的代码是正确的，并且您朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T21:06:31.007

您应该像这样调用 log 方法：

```
$this->log(); 
```

因为使用 self:: 是为静态方法保留的。

另外，尝试像这样调用 path_helper 函数：

```
path_helper(self); 
```

希望我能帮助你。无法测试它，但它应该可以工作。

# c# - EF 5 Code First model with [NotMapped] is not set via SqlQuery()?

> ID：14129073
> 
> 赞同：1
> 
> 时间：2013-01-02T20:59:34.643
> 
> 标签：c#, .net, entity-framework, entity-framework-5

> **Possible Duplicate:**
> [Get values in NotMapped property in model class Entity Framwork Code First using linq](https://stackoverflow.com/questions/13857999/get-values-in-notmapped-property-in-model-class-entity-framwork-code-first-using)

I am using `Entity Framework 5`'s `Code First` in my project and my model looks more or less like this:

```
public class Category
{
    public int CategoryId { get; set; }
    public string Name { get; set; }

    public virtual Category Parent { get; set; }

    [NotMapped]
    public int Level { get; set; }
} 
```

The generated `table` contains all columns except the Level `column` (as expected)

Now, I have a `stored procedure` which calculates the Level of the Category node in relation to it's parent.

If I execute the `stored procedure` in SQL Server Mgmt Studio it returns the columns as specified in my model **including** the [NotMapped] Level `column`.

The thing is: the Level `column` is not filled if I call the `stored procedure` like this: `Context.Database.SqlQuery<TModel>(storedProcedure, parameterArray);` where `TModel` is `Category`.

Is there any way to 're-use' this Category `model`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:06:53.200

您清楚地说属性“Level”不是您模型的一部分，因此它当然不会被您的存储过程填充。为什么你会期待别的？

唯一的方法是手动解析 sp 的结果并自己创建模型类的实例。

# logging - 远程 Glassfish 3.2.1 服务器突然停止在 Netbeans 7 中显示日志

> ID：14129079
> 
> 赞同：0
> 
> 时间：2013-01-02T21:00:04.380
> 
> 标签：logging, glassfish-3, netbeans-7

哦拜托！！

我一直在使用带有 Netbeans 7 的远程 Glassfish 3 一周。
突然，我的 Glassfish 服务器停止了日志记录……日志没有出现在任何地方……不在 Netbeans 中，也不在其他任何地方！

我friggin卸载了服务器并重新安装了它，但还是一样的旧的！

有人可以在这里帮助我吗...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:43:14.477

似乎您的记录器被重定向到标准`server.log`文件以外的其他地方。您可以尝试部署一个不同的应用程序，看看它是否能够登录`server.log`。

如果是这样，那么您应该检查您的原始应用程序是否有[Apache Log4J](http://logging.apache.org/log4j/2.x/)、[Commons Logging](http://commons.apache.org/logging/)或[类似的库](http://java-source.net/open-source/logging)配置文件，它们可能会将您的输出重定向到其他地方（例如 aa 文件或数据库）。

如果没有，那么问题可能出在您的[Application Server Logging 配置](http://docs.oracle.com/cd/E18930_01/html/821-2416/gklmn.html#scrolltoc)上。检查日志是否被重定向到`server.log`，日志级别是否设置得当，以及是否有一些自定义`logging.properties`文件或`Log Handler`没有杀死日志输出或将其重定向到其他地方。

# php - Aptana 3 + Xdebug issues

> ID：14129081
> 
> 赞同：1
> 
> 时间：2013-01-02T21:00:07.287
> 
> 标签：php, xdebug, aptana3

I'm trying to get Aptana 3 to work with Xdebug and Firefox on Ubuntu 10.04\. I have no problems setting this up with PhpStorm, so I'm blaming Aptana at the moment.

I'm at a loss as to what is wrong... if I run the page as a script, it works fine and I can step through the code, though that option has since mysteriously disappeared.

If I select Run as PHP Server, the page appears in FF but the debugger doesn't run. The following error message appears in the Aptana log:

```
ENTRY org.eclipse.debug.core 4 125 2013-01-02 13:54:40.040
!MESSAGE Error logged from Debug Core: 
!STACK 0
java.io.IOException: Stream closed
    at java.io.BufferedInputStream.getBufIfOpen(Unknown Source)
    at java.io.BufferedInputStream.read(Unknown Source)
    at java.io.BufferedInputStream.read1(Unknown Source)
    at java.io.BufferedInputStream.read(Unknown Source)
    at java.io.FilterInputStream.read(Unknown Source)
    at org.eclipse.debug.internal.core.OutputStreamMonitor.read(OutputStreamMonitor.java:144)
    at org.eclipse.debug.internal.core.OutputStreamMonitor.access$1(OutputStreamMonitor.java:134)
    at org.eclipse.debug.internal.core.OutputStreamMonitor$1.run(OutputStreamMonitor.java:207)
    at java.lang.Thread.run(Unknown Source) 
```

If I try to launch via the Run configuration it pops up a FF window that goes to Aptana's homepage and a progress bar dialog box that eventually just times out.

The Aptana plugin icon on the lower right is lit up, so I don't think that that's the issue. There's no message in the console or browser output. The Aptana log file is blank.

You can find pics of the [Aptana Run config here](http://www.flickr.com/photos/91785831@N02/8338580477/in/photostream), and [FF+progress bar here](http://www.flickr.com/photos/91785831@N02/8339638582/in/photostream/).

This is massively annoying... debugging is pretty basic, you'd think this would either be well documented (I can't find anything about it) or simple to set up (hah! obviously not). Grrrrr...

# javascript - Primitives and Object Wrapper Equivalence in JavaScript

> ID：14129082
> 
> 赞同：4
> 
> 时间：2013-01-02T21:00:13.217
> 
> 标签：javascript, object, primitive, equivalence, type-equivalence

**EDIT: Based on everyone's feedback, the original version of this question is more design-related, not standards-related. Making more SO-friendly.**

* * *

Original:

Should a JS primitive be considered "equivalent" to an object-wrapped version of that primitive according to the ECMA standards?

* * *

**Revised Question**

Is there a universal agreement on how to compare primitive-wrapped objects in current JavaScript?

```
var n = new Number(1),
    p = 1;
n === p;     // false
typeof n;    // "object"
typeof p;    // "number"
+n === p;    // true, but you need coercion. 
```

* * *

**EDIT:**

As @Pointy commented, ECMA spec (262, S15.1.2.4) describes a `Number.isNaN()` method that behaves as follows:

```
Number.isNaN(NaN);                // true
Number.isNaN(new Number(NaN));    // false
Number.isNaN(+(new Number(NaN))); // true, but you need coercion. 
```

Apparently, the justification for this behavior is that `isNaN` will return `true` IF the argument coerces to `NaN`. `new Number(NaN)` does not directly coerce based on how the native `isNaN` operates.

It seems that the performance hit and trickiness in type conversion, etc, of directly using native Object Wrappers as opposed to primitives outweighs the semantic benefits for now.

[See this JSPerf.](http://jsperf.com/object-wrapper-vs-primitive)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:15:32.443

您的问题的简短回答是否定的，对于如何在 JS 中比较值没有达成共识，因为这个问题太情景化了；这在很大程度上取决于您的具体情况。

但是，提供一些建议/提供更长的答案....原语的对象版本是邪恶的（在“它们会导致你有很多错误的感觉”中，而不是在道德意义上），如果可能的话应该避免。因此，除非您有令人信服的理由来处理这两种情况，否则我建议您不要考虑对象包装的原语，而只需在代码中坚持使用未包装的原语。

另外，如果您不考虑包装的原语，它应该首先消除您甚至拥有 equals 方法的任何需要。

***** 编辑*******

 **刚刚看到您的最新评论，如果您需要比较数组，那么内置`==`并`===`不会削减它。即便如此，我还是建议您创建一个`arrayEquals`方法而不仅仅是一个`equals`方法，因为您可以通过使您的函数尽可能集中并尽可能使用内置的 JS 比较器来避免很多戏剧性的事情。

如果您确实将其包装在某种通用函数中，为方便起见：

```
function equals(left, right) {
    if (left.slice && right.slice) { // lame array check
        return arrayEquals(left, right);
    }
    return left == right;
} 
```

我仍然建议不要处理原始包装的对象，除非通过“句柄”使函数在传递原始包装的对象时抛出错误。同样，因为这些对象只会给你带来麻烦，所以你应该尽量避免它们，不要给自己留下机会来引入糟糕的代码。**

# javascript-events - 创建函数以一直向下和向上滑动 div

> ID：14129086
> 
> 赞同：1
> 
> 时间：2013-01-02T21:00:21.507
> 
> 标签：javascript-events

我正在尝试构建一个函数，该函数将在脚本后面提到的特定 div 向下和向上滑动，这是代码：

```
<!DOCTYPE html>
<html>
<head>
  <style>
  div { background:yellow; border:1px solid #AAA; width:80px; height:80px; margin:0 5px; float:left; }
  div.colored { background:green; }
  </style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <button id="run">Run</button>

  <div></div>
  <div id="mover"></div>
  <div></div>
<script>

   $("button#run").click(function(){
    $("div:animated").toggleClass("colored");
   });

   function animateIt() {
    return $(this).slideToggle(5000, animateIt);
   }

    $("div#mover").animateIt();

</script>

</body>
</html> 
```

但它给了我这个错误“Uncaught TypeError: Object [object Object] has no method 'animateIt'”

[这是一个小提琴](http://jsfiddle.net/ZcQM7/)

提前致谢。什叶派...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:08:25.000

`animateIt`不是 jQuery 方法。将其作为常规函数调用，并传入元素：

```
function animateIt ( $element ) {
   $element.slideToggle(5000, function (){
      animateIt($element);
   });
}

animateIt( $("div#mover") );​ 
```

这是你的小提琴，更新：http: [//jsfiddle.net/ZcQM7/2/](http://jsfiddle.net/ZcQM7/2/)

* * *

如果你想让它成为一个 jQuery 方法，你必须把它变成一个插件：

```
$.fn.animateIt = function () {
    var $this = this;
    this.slideToggle(5000, function () {
       $this.animateIt();
    });
};

$("div#mover").animateIt();​ 
```

这是你的小提琴，还有另一个更新：http: [//jsfiddle.net/ZcQM7/1/](http://jsfiddle.net/ZcQM7/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T21:08:47.097

`animateIt()`是您在代码中声明的函数，不属于 jQuery。

你应该直接调用它：

```
function animateIt() {
   return $("#mover").slideToggle(5000, animateIt);
}

animateIt(); 
```

# php - Adding reCaptcha to this jQuery AJAX form

> ID：14129087
> 
> 赞同：0
> 
> 时间：2013-01-02T21:00:29.857
> 
> 标签：php, jquery, ajax, forms, recaptcha

I am having some problems adding a **reCaptcha** to my jQuery AJAX form.

I have tried following the documentation, in particular [this page](https://developers.google.com/recaptcha/docs/display), but had no luck.

*   If I use the "Challenge and Non-JavaScript API", adding the code before the send button, I get no output.
*   If I try with the method called "AJAX API" adding a custom div inside the form, I don't get anything anyway. Basically I am not able to show and then validate it.

This is the code that I have so far.

My form:

```
 <div id="contactForm"><img src="img/contact-form.png" width="250" height="365" alt="contact" /></div>
  Name: <span class="contactErrorFloat" id="err-name">Need the name</span>
  <input name="name" id="name" type="text" placeholder="Name.." />

  Email: <span class="contactErrorFloat" id="err-email">Need email</span><span class="contactErrorFloat" id="err-emailvld">Email not valid.</span>
  <input name="email" id="email" type="text" placeholder="Email.." />

  Message:
  <textarea name="message" id="message" rows="10" placeholder="Message.."></textarea>

  <button id="send">Send</button>

  <div class="contactError" id="err-form">Error during validation</div>
  <div class="contactError" id="err-timedout">Timeout</div>
  <div class="contactError" id="err-state"></div>

  <div id="ajaxsuccess">Email sent!</div>
</form> 
```

My Script:

```
jQuery(document).ready(function ($) {
    $('#send').click(function(){
        $('.error').fadeOut('slow'); // Resetta i messaggi di errore, nascondendoli

        var error = false;

        var name = $('input#name').val();
        if (name == "" || name == " ") {
            $('#err-name').fadeIn('slow');
            error = true;
        }

        var email_compare = /^([a-z0-9_.-]+)@([da-z.-]+).([a-z.]{2,6})$/;
        var email = $('input#email').val();
        if (email == "" || email == " ") {
            $('#err-email').fadeIn('slow');
            error = true;
        } else if (!email_compare.test(email)) {
            $('#err-emailvld').fadeIn('slow');
            error = true;
        }

        if (error == true) {
            $('#err-form').slideDown('slow');
            return false;
        }

        var data_string = $('#ajax-form').serialize();

        $.ajax({
            type: "POST",
            url: $('#ajax-form').attr('action'),
            data: data_string,
            timeout: 6000,
            error: function(request, error) {
                if (error == "timeout") {
                    $('#err-timedout').slideDown('slow');
                } else {
                    $('#err-state').slideDown('slow');
                    $('#err-state').html('C\'è stato un errore: ' + error + '');
                }
            },
            success: function () {
                $('ajax-form').slideUp('slow');
                $('#ajaxsuccess').slideDown('slow');
            }
        });

        return false;
    });
}); 
```

There is also a PHP file with the php function to send the email but I don't think it's much important actually. I would really LOVE if someone could give me any help to implement this. Thanks a lot!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:33:44.193

首先你必须登录recaptcha。您可以在这里执行此操作： [recaptcha.net](http://www.google.com/recaptcha/whyrecaptcha)

然后你就可以拿到你的钥匙了。然后将密钥嵌入到示例代码中。这里

```
<script type="text/javascript"
 src="http://www.google.com/recaptcha/api/challenge?k=**your_public_key**"> 
```

和这里

```
 <iframe src="http://www.google.com/recaptcha/api/noscript?k=**your_public_key**"
     height="300" width="500" frameborder="0"></iframe> 
```

# php - 将会话用户名与文本进行比较

> ID：14129096
> 
> 赞同：-1
> 
> 时间：2013-01-02T21:01:24.730
> 
> 标签：php, html, mysql

我正在尝试检查会话上的用户名是否等于 mysql 数据库中的用户名。假设用户名 admin 是唯一允许查看某个页面的人。

请有人能告诉我我的代码有什么问题吗？

```
<?php if($_SESSION["myusername"]=="admin"){?>
<a href="Stuff4Staff.php">Employee</a>
<?php }else{
?>
<a href="managerInterface.php">Manager</a>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:07:24.240

试试这个你需要`session_start()`，你还需要检查会话`isset`：

```
<?php 
session_start();
if(isset($_SESSION['myusername']) && $_SESSION["myusername"]=="admin"){
?>
    <a href="managerInterface.php">Manager</a>

<?php 
    }else{
?>
    <a href="Stuff4Staff.php">Employee</a>       
<?php 
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T21:03:42.717

确保通过将以下内容放在当前代码上方来开始会话：

```
session_start(); 
```

不言而喻，仔细检查您是否正确设置了变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T21:04:03.270

也许尝试 strcmp (http://php.net/manual/en/function.strcmp.php) ...

并确保设置了会话变量

# java - setObject() 方法和别名

> ID：14129099
> 
> 赞同：0
> 
> 时间：2013-01-02T21:01:34.027
> 
> 标签：java, pointer-aliasing

我有一个 LINE 类，它有两个 POINT 类型的属性（它是一个对象）。

```
public class LINE {
private Point p1,p2;
} 
```

如果我这样说，会不会造成混叠？

```
public void setP1(Point p1)
{
    this.p1=p1;
} 
```

或者我是否必须创建一个新对象，如下所示：

```
public void setP1(Point p1)
{
this.p1=new Object(p1);
} 
```

提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:06:59.063

是的，它会导致混叠。

我的猜测是您正在尝试创建对象的副本，而不是您想要实例化一个新的`Point`.

话虽这么说，如果您实际上不需要复制对象，那么第一个就可以了

所以如果你这样称呼它

```
Line line = new Line()
line.setP1(new Point(/*params*/)) 
```

没关系。

# c# - 我应该在哪里存储登录数据？

> ID：14129100
> 
> 赞同：2
> 
> 时间：2013-01-02T21:01:48.030
> 
> 标签：c#, winforms, file, login

我正在创建一个小应用程序，让用户输入他的 Google 帐户名称和密码，并向他显示他的 Google Drive 帐户上可用的电子表格。

我想让用户能够保存以下数据：

1.  真或假，如果要自动连接到他的帐户。

2.  Google 帐户名称（电子邮件）

3.  密码

我想这样做，这样程序启动时他就不必再写了。

在用户计算机上保存此数据的推荐方法是什么？

（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T21:06:42.420

应用程序开发人员不应该存储用户凭据。当用户第一次通过您的应用登录 google 帐户时，请从 google 为您的应用获取 OAuth 2 密钥。将该密钥安全地存储在您的应用程序中。

[有关谷歌 API 的更多详细信息，请参见此处](https://developers.google.com/analytics/resources/articles/gdata-migration-guide#create_project)

# r - 将“规范”S3 类转换为新的 S4 类

> ID：14129101
> 
> 赞同：1
> 
> 时间：2013-01-02T21:01:48.003
> 
> 标签：r, class, s4, spectrum

在`R`我想将（强制？）从`stats::spectrum`（类“规范”）返回的对象转换为新的 S4 类。S3 类“规范”本质上是一个混合格式的各种信息列表（我已经评论了屏幕输出）：

```
psd3 <- spectrum(rnorm(1e3), plot=FALSE)
summary(psd3)
#           Length Class  Mode     
# freq      500    -none- numeric  
# spec      500    -none- numeric  
# coh         0    -none- NULL     
# phase       0    -none- NULL     
# kernel      0    -none- NULL     
# df          1    -none- numeric  
# bandwidth   1    -none- numeric  
# n.used      1    -none- numeric  
# orig.n      1    -none- numeric  
# series      1    -none- character
# snames      0    -none- NULL     
# method      1    -none- character
# taper       1    -none- numeric  
# pad         1    -none- numeric  
# detrend     1    -none- logical  
# demean      1    -none- logical 

class(unclass(psd3))
# [1] "list"

is.object(psd3) & !isS4(psd3)
# [1] TRUE 
```

现在假设我们为名为“specS4”的类定义了一个新的 S4 生成器，其中插槽名称是“spec”对象中的名称

```
specS4 <- setClass("specS4",
  representation = representation(freq="numeric", spec="numeric", coh="numeric", phase="numeric", kernel="numeric", df="numeric", bandwidth="numeric", n.used="numeric", orig.n="numeric", series="character", snames="character", method="character", taper="numeric", pad="numeric", detrend="logical", demean="logical"), 
  prototype = prototype(coh=numeric(0), phase=numeric(0), kernel=numeric(0), df=Inf, snames="", detrend=FALSE, demean=FALSE)
) 
```

并从中生成一个新对象：

```
psd4 <- specS4()

validObject(psd4)
# [1] TRUE 
```

将每个组件分配`psd3`到其相应插槽的最佳方法是`psd4`什么？ *一个复杂的问题是`spectrum`可能会返回`NULL`一些（已知的）字段；分配这些值会引发错误`checkSlotAssignment`（对于给定的表示）。*

我有一个痛苦的解决方案是：

```
nonull.spec <- function(psd){
  stopifnot(inherits(psd, 'spec', FALSE))
  # as.numeric(NULL) --> numeric(0)
  # spec.pgram/.ar both may return NULL for these:
  psd$coh <- as.numeric(psd$coh)
  psd$phase <- as.numeric(psd$phase)
  psd$kernel <- as.numeric(psd$kernel)
  psd$snames <- as.character(psd$snames)
  return(psd)
}

as.specS4 <- function(psd) UseMethod("as.specS4")
as.specS4.spec <- function(psd){
  stopifnot(inherits(psd, 'spec', FALSE))
  ## deal with possible NULLs
  psd <- nonull.spec(psd)
  ## generate specS4 class
  S4spec <- specS4()
  ## (re)assign from 'spec' list
  S4spec@freq <- psd$freq
  S4spec@spec <- psd$spec
  S4spec@coh <- psd$coh
  S4spec@phase <- psd$phase
  S4spec@kernel <- psd$kernel
  S4spec@snames <- psd$snames
  # [more to assign, obviously]
  # 
  # [run a validity check...]
  #
  return(S4spec)
} 
```

哪个有效，即使`as.specS4.spec`是故意不完整的。

```
psd4c <- as.specS4(psd3)

validObject(psd4c)
# [1] TRUE 
```

有没有更好的方法来实现什么`as.specS4.spec`？这个解决方案似乎不稳定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:14:57.177

我才意识到这实际上是多么简单。*嗬！*

将 ' specS4 `slotNames`' 对象与`names`'spec' 对象匹配，然后赋值`slot`（假设问题中的代码已运行）：

```
as.specS4.spec <- function(psd){
  stopifnot(inherits(psd, 'spec', FALSE))
  psd <- nonull.spec(psd)
  S4spec <- specS4() 
  spec_slots <- slotNames(S4spec)
  spec_slots <- spec_slots[match(names(psd), spec_slots)]
  for (what in spec_slots){
    slot(S4spec, what) <- as.vector(unlist(psd[what]))
  }
  return(S4spec)
}

psd4c2 <- as.specS4(psd3)

validObject(psd4c2)
# [1] TRUE
> all.equal(psd4c@freq, psd4c2@freq, psd3$freq)
# [1] TRUE 
```

# c++ - 在 C++ 中处理内存大小不好？

> ID：14129103
> 
> 赞同：1
> 
> 时间：2013-01-02T21:02:04.973
> 
> 标签：c++, performance, memory, cpu

我想知道在 C++ 中处理内存大小是好事还是坏事。这个问题让我很困惑（[为什么 mode_t 使用 4 字节？](https://stackoverflow.com/questions/9602685/why-does-mode-t-use-4-byte)）。

因此，如果我不需要存储大量数据，只使用 char 并不高效，因为现代 CPU 必须填满其余数据？因此，考虑性能和节省计算时间的最佳方法是始终对我需要的每个整数类型变量使用 size_t 吗？如果我有一个大数组，CPU 是否仍然需要更多指令来处理短值而不是处理 size_t？char 数组呢？他们不应该也更慢吗？

总而言之：最佳实践是什么？我想尽可能多地节省内存，因为我的服务器没有很多内存。另一方面，我不想失去性能，因为我认为记忆更重要。

有没有什么地方可以很好地解释这一切是如何工作的，以及在什么情况下什么会更快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:28:31.453

这个问题没有一个答案。

1.  减小您使用的整数类型的大小可以增加局部性并减少所需的内存带宽。所以，这是一个加号。（注意：实际的内存获取成本并不低。）

2.  增加您使用的整数类型的大小可以减少所需的转换次数。所以，这是一个加号。

所以问题是，选择#1 可以节省多少内存？选择 #2 可以节省多少转化？

## 客观的回答

一般来说，只有整个系统的分析会告诉你哪个是更好的选择。这是因为回答有关降低内存压力的问题*非常*困难，而且是特定于系统的。减少部分程序的内存使用量通常会*增加*程序在该部分中花费的时间百分比——甚至可能会增加程序在整个系统上使用的时间百分比——这可能是因为需要进行大量转换，或者因为减少的内存压力使系统的其他部分更快。因此需要对整个系统进行分析。

不出所料，这是一种真正的痛苦。

## 主观回答

但是，我的直觉告诉我，尝试以这种方式最小化单个字段的内存使用几乎是不值得的。`mode_t`你认为你的程序一次在内存中会有多少个副本？最多一把。所以我有一个经验法则：

1.  如果它进入一个数组，则使用具有足够范围的最小类型。例如，字符串`char[]`代替`int[]`.

2.  如果它去其他任何地方，使用`int`或更大。

所以我的主观回答是，把你宝贵的时间花在别处。`int`您的时间很宝贵，您有比选择一个字段应该是还是更好的事情要做`short`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T21:26:00.667

这听起来像是过早的优化。当看起来还没有实际发生时，您会担心内存不足。

通常，访问 CPU 原生字长的一小部分会生成更多的 CODE。因此，仅将数据放入 8 位中所节省的空间可能会因仅操作您关心的特定 8 位所需的添加代码而丢失 50 倍以上。您也可能会遇到“优化”也会减慢速度的地方：

```
struct foo {
    char a1, a2, a3;
    short b1;
}; 
```

如果上面的结构紧凑，b1 跨越 32 位边界，在某些架构上会抛出异常，而在其他架构上需要两次提取来检索数据。

或不。这取决于 CPU 架构、计算机的数据架构、编译器以及程序的典型使用模式。我怀疑这里有一个 99% 的时间都是正确的“最佳实践”。

如果空间真的很重要，告诉编译器优化大小而不是速度，看看是否有帮助。但是，除非您通过慢速二进制管道共享数据，否则您通常不应该关心它有多大，只要它大到足以容纳您的应用程序的所有有效值即可。

tl;博士？只需使用 size_t 直到您可以证明减小该特定变量的大小将显着提高服务器性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T21:26:52.453

您的答案取决于处理器：取决于目标平台的处理器。阅读其数据表以了解它如何处理单个 8 位取指。

ARM7TDMI 处理器喜欢获取 32 位的数量。这样做非常有效。它被标记为 8/32 处理器，也可以处理 8 位数量。

处理器可能能够直接获取 8 位数量，具体取决于它的连接方式。否则，它会计算最接近的 32 位对齐地址，读取 32 位并丢弃未使用的位。这需要处理时间。

所以权衡是内存与处理时间：

*   将应用程序压缩为使用 8 位会显着增加处理时间吗？
*   您的开发计划是否因这项任务而获得时间？（又名投资回报率，ROI）
*   您的客户是否抱怨应用程序的大小？
*   在担心内存使用之前，您的应用程序是否正确无误？

# sql - SQL - 从 2 个表中选择不重复的行？

> ID：14129109
> 
> 赞同：1
> 
> 时间：2013-01-02T21:02:26.723
> 
> 标签：sql

我有 2 张桌子（也许它们建造得很糟糕）。

表格1

```
id  |  word  |  user
1   |  a     |  me
2   |  b     |  dad
3   |  c     |  mom
4   |  d     |  sister 
```

表2

```
id  |  word  |  user
1   |  a     |  me
2   |  b     |  dad 
```

我想显示 table1 中的所有行，不包括 table2 中等于 table1 的行。在这种情况下，选择必须显示表中的第 3 行和第 4 行。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T21:06:29.267

试试这个

```
Select * from Table1
   Except
     Select * from Table2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T21:06:48.313

您没有指定什么 RDBMS，但您可以`NOT EXISTS`在所有数据库中使用：

```
select *
from table1 t1
where not exists (select *
                  from table2 t2
                  where t1.word = t2.word
                    and t1.user = t2.user 
                    -- add other columns here for comparison including id) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/dfe7e/4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T21:05:40.657

像这样：

```
SELECT *
FROM Table1
WHERE id NOT IN(SELECT id FROM Table2); 
```

[谓词不在小提琴演示中](http://sqlfiddle.com/#!2/09d68/5)

**或者：**使用`LEFT JOIN`这样的：

```
SELECT t1.*
FROM table1 t1
LEFT JOIN table2 t2 ON t1.id = t2.id
WHERE t2.id IS NULL; 
```

[左加入小提琴演示](http://sqlfiddle.com/#!2/09d68/4)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T21:07:44.883

由于您没有指定所使用的 SQL 类型，因此避免使用 EXCEPTS 并使用标准 ANSI SQL 可能是明智之举。所以这是使用左外连接的情况。

```
SELECT t1.*  
FROM table1 AS t1  
    LEFT OUTER JOIN table2 AS t2  
        ON t1.word = t2.word
        AND t1.user = t2.user
WHERE t2.id IS NULL 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-02T21:08:09.947

您可以使用[`EXCEPT`](http://msdn.microsoft.com/en-us/library/ms188055.aspx)（SQL-Server >= 2005）

```
SELECT id, word, user
FROM Table1
EXCEPT
SELECT id, word, user
FROM Table2; 
```

[**演示**](http://sqlfiddle.com/#!3/dfe7e/5/0)

# windows-store-apps - Windows 8 商店运行时错误

> ID：14129110
> 
> 赞同：1
> 
> 时间：2013-01-02T21:02:28.627
> 
> 标签：windows-store-apps, installation

我刚刚从 microsoft action pack 安装了 windows 8（我们有订阅）。安装后，一切正常，但是当我想打开商店时，我收到一条错误消息。

（我还没有安装任何软件，所以我不明白为什么会出现这个错误，我的笔记本电脑正在域中运行）

```
运行时错误
wwahost.exe
r6034

应用程序试图错误地加载 C 库
请联系应用程序的支持团队以获取更多信息。

```

# java - LayerUI、g.drawImage 下划线

> ID：14129111
> 
> 赞同：1
> 
> 时间：2013-01-02T21:02:35.057
> 
> 标签：java, image, swing, java-7, jlayer

```
public class GraphicsBoard extends LayerUI {
    String picPath = "pictures/";
    String[] fileName = { "cards.png", "BlackJackBoard.png" };
    ClassLoader cl = GraphicsBoard.class.getClassLoader();
    URL imgURL[] = new URL[2];
    Toolkit tk = Toolkit.getDefaultToolkit();
    Image imgCards, imgBG;

    public GraphicsBoard() throws Exception {
        for (int x = 0; x < 2; x++)
            imgURL[x] = cl.getResource(picPath + fileName[x]);
        imgCards = tk.createImage(imgURL[0]);
        imgBG = tk.createImage(imgURL[1]);
    }

    public void paintComponent(Graphics g) {
        g.drawImage(imgBG, 0, 0, 550, 450, 0, 0, 551, 412, this);
    }
} 
```

这就是我正在制作的二十一点游戏的底层代码。但是，在 Eclipse 中，paintComponent 中的 drawImage 带有下划线，我不确定如何修复它。当我将鼠标悬停在它上面时，它说

```
The method drawImage(Image, int, int, int, int, int, int, int, int, ImageObserver) in the type Graphics is not applicable for the arguments (Image, int, int, int, int, int, int, int, int, GraphicsBoard) 
```

给我的选择是

```
Cast argument 'this' to 'ImageObserver' 
```

和

```
Let 'GraphicsBoard' implement 'ImageObserver' 
```

如果我运行它，顶部的层（基本上是一个带有按钮的 JPanel）是不透明的。

这就是我用来将 JLayer 添加到我的框架的方法

```
OverBoard overLay = new OverBoard();
GraphicsBoard graphicsBG = new GraphicsBoard();
add(new JLayer(overLay, graphicsBG)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T00:42:36.143

`drawImage()`必须实现`ImageObserver`接口的最后一个参数。如果`LayerUI`这样做，您可以指定`this`. 或者，考虑使用`ImageIO.read()`同步读取图像，并指定`null`为最终参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T18:09:24.723

就像垃圾神说的那样，使用ImageIO.read()来读取你的图片，然后你可以设置ImageObserver参数为null，你不需要实现ImageObserver。

> 如果我运行它，顶部的层（基本上是一个带有按钮的 JPanel）是不透明的。

这是预期的行为。请注意在[JLayer 教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html#drawing)中他们如何使用该行

```
g2.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, .5f)); 
```

以实现透明度。

# java - 连接由 AVR 的 V-USB 库驱动的 libUSB 设备

> ID：14129112
> 
> 赞同：2
> 
> 时间：2013-01-02T21:02:44.507
> 
> 标签：java, c, usb, libusb

我编写了一个简单的程序（基于[以下](http://codeandlife.com/2012/01/22/avr-attiny-usb-tutorial-part-1/)教程），通过 USB 端口将数据从 AVR 芯片（Attiny 2313）发送到计算机，因为该设备没有内置的 USB 端口，我已经使用[V-USB](http://www.obdev.at/products/vusb/index.html)库通过软件模拟这样的端口。

[该设备按预期工作，我使用libusb](http://www.libusb.org/)库将它与 C 接口没有问题，但是我想用 Java 访问它，所以我查找了 libusb 的 java 实现。我管理的唯一库进行设置，并成功发现总线上的USB是[“libusb-win32 wrapper”](http://libusbjava.sourceforge.net/wp/)。

**唯一的问题是当我尝试打开它时设备会抛出异常**

```
ch.ntb.usb.USBException: No USB endpoints found. Check the device configuration
at ch.ntb.usb.Device.updateMaxPacketSize(Device.java:82)
at ch.ntb.usb.Device.initDevice(Device.java:114) 
```

**如何修复？还有另一种方法吗？有什么建议吗？**

这是引发异常的代码

```
Device dev = USB.getDevice((short) 0x16c0, (short) 0x05dc);
dev.open(1, 0, -1); 
```

这是我得到的关于设备视图 USBview 的数据

```
Device Descriptor:
bcdUSB:             0x0110
bDeviceClass:         0xFF
bDeviceSubClass:      0x00
bDeviceProtocol:      0x00
bMaxPacketSize0:      0x08 (8)
idVendor:           0x16C0
idProduct:          0x05DC
bcdDevice:          0x0100
iManufacturer:        0x01
0x0409: "mymail@gmail.com"
iProduct:             0x02
iSerialNumber:        0x00
bNumConfigurations:   0x01

ConnectionStatus: DeviceConnected
Current Config Value: 0x01
Device Bus Speed:     Low
Device Address:       0x03
Open Pipes:              0

Configuration Descriptor:
wTotalLength:       0x0012
bNumInterfaces:       0x01
bConfigurationValue:  0x01
iConfiguration:       0x00
bmAttributes:         0x80 (Bus Powered )
MaxPower:             0x32 (100 Ma)

Interface Descriptor:
bInterfaceNumber:     0x00
bAlternateSetting:    0x00
bNumEndpoints:        0x00
bInterfaceClass:      0x00
bInterfaceSubClass:   0x00
bInterfaceProtocol:   0x00
iInterface:           0x00 
```

[相关问题](https://stackoverflow.com/questions/8782721/java-no-endpoint-found-but-python-works)的答案，但我不明白要改变什么，如果它与设备有关，如何用 VUSB 完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:51:42.033

以下库不支持没有端点的设备，并且不将控制端点算作端点。我通过启用另一个我无论如何都不会使用的端点来解决这个问题。

要启用另一个端点，请打开 V-usb 文件夹中的以下文件**usbconfig.h**并查找以下行并将其更改为 1。

```
#define USB_CFG_HAVE_INTRIN_ENDPOINT    1 //default 0 
```

**现在，您可以使用控制端点与controlMsg()**函数进行低速通信。

在这里您可以看到（通过 USBview）该设备现在有一个中断端点

```
Endpoint Descriptor:
bEndpointAddress:     0x81  IN
Transfer Type:   Interrupt
wMaxPacketSize:     0x0008 (8)
bInterval:            0x0A 
```

# android - 循环中添加了多个 TextViews onClick 意外行为

> ID：14129113
> 
> 赞同：1
> 
> 时间：2013-01-02T21:02:45.117
> 
> 标签：android, onclick, textview

我有两个RelativeLayouts，我以编程方式将TextViews 添加到ArrayList 中，目的是根据单击的TextView，我可以索引回原始ArrayList。对于我的琐碎代码示例，我将项目任意拆分为两个相对布局。

单击第一个 TextView 时，代码按预期工作。对话框显示显示正确的单词和索引。但是，关闭对话框后，如果单击不同的 TextView，则单词和索引（我的代码示例中的 testWord 和 testID）不会更新，只显示第一个 TextView 的信息。似乎 onClick 只在第一次点击时被调用。

这是一个示例 Java 类（对于任何格式错误，我深表歉意，这是我第一次在这里发帖）：

```
package com.test.test;
import java.util.ArrayList;
import java.util.Scanner;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.graphics.Color;
import android.os.Bundle;
import android.text.method.ScrollingMovementMethod;
import android.util.TypedValue;
import android.view.Gravity;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.widget.RelativeLayout;
import android.widget.TextView;

public class AndTestActivity extends Activity {
    private final int DIALOG_CASE_ITEM_SELECT=0,CURR_ID=128,P_ID=256,P_HR=512,C_HR=1024;
    private final String TEST="This is a test. Only a test.";
    private int numPast,testID;
    private String testWord;
    private ArrayList<String> test; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Scanner s=new Scanner(TEST);
        test=new ArrayList<String>();
        while(s.hasNext()){
            test.add(s.next());
        }
        int currID=CURR_ID,pID=P_ID,pHrID=P_HR,cHrID=C_HR,tempLen=3;        
        numPast=0;
        RelativeLayout rlP=(RelativeLayout)findViewById(R.id.caseItemListPastLayout);
        RelativeLayout rlC=(RelativeLayout)findViewById(R.id.caseItemListCurrLayout);
        for(int x=0;x<test.size();x++){                                 
            if(x>tempLen){                      
                addToRL(test.get(x),true,rlC,currID,cHrID);
                currID++;
                cHrID++;
            }else{              
                numPast++;
                    addToRL(test.get(x),false,rlP,pID,pHrID);
                pID++;
                pHrID++;
            }       
        }       
    }

    private void addToRL(String sb, boolean current,RelativeLayout rl,int id,int hrID){
        TextView citv=new TextView(this);
        citv.setText((CharSequence)sb);
        citv.setMovementMethod(new ScrollingMovementMethod());
        citv.setTextSize(15);
        citv.setTextColor(Color.BLACK);
        citv.setGravity(Gravity.CENTER_HORIZONTAL);
        if(current){
            citv.setBackgroundColor(Color.RED);                 
        }else{
            citv.setBackgroundColor(Color.WHITE);
        }
        citv.setPadding(20, 10, 20, 10);
        citv.setWidth((int)TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 360, getResources().getDisplayMetrics()));
        citv.setId(id);
        RelativeLayout.LayoutParams cilp=new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        if(current&&id!=CURR_ID)cilp.addRule( RelativeLayout.BELOW, hrID-1);
        else{
            if(id!=P_ID)cilp.addRule( RelativeLayout.BELOW, hrID-1);
        }
        citv.setLayoutParams(cilp);
        citv.setOnClickListener(new View.OnClickListener(){
            public void onClick(View v){
                TextView tv0=(TextView)v;
                int tvID=tv0.getId()-P_ID;
                if(tvID<0){
                    tvID=(tv0.getId()-CURR_ID)+numPast;
                }

                testID=tvID;
                testWord=test.get(testID);

                showDialog(DIALOG_CASE_ITEM_SELECT); 
            }
        });
        rl.addView(citv);                        
        View hr=new View(this);
        hr.setBackgroundColor(getResources().getColor(R.color.background));
        RelativeLayout.LayoutParams hrlp=new        RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, 5);
        hrlp.addRule(RelativeLayout.BELOW,id);        
        hr.setLayoutParams(hrlp);
        hr.setId(hrID);
        rl.addView(hr);
    }

    protected Dialog onCreateDialog(int id) {
        Dialog dialog;
        AlertDialog.Builder builder;
        switch(id){
        case DIALOG_CASE_ITEM_SELECT:
            builder = new AlertDialog.Builder(this);
            builder.setMessage("word: "+testWord+" index: "+testID)
                   .setCancelable(true)
                   .setNegativeButton("Cancel", new DialogInterface.OnClickListener(){
                       public void onClick(DialogInterface dialog, int id) {
                           dialog.cancel();
                       }
                   });
            dialog = builder.create();
            break;
        default:
            dialog = null;
        }
        return dialog;
    }
} 
```

这是布局的关联 XML（没什么特别的，但我想我会包含它，所以有一个完整的工作示例）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_height="wrap_content" android:layout_width="wrap_content"     android:orientation="vertical"
    android:background="@color/background"
    android:screenOrientation="portrait">       
    <ScrollView 
        android:id="@+id/caseItemCurrScroll"
        android:fillViewport="true"
        android:padding="10dp"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent">
        <RelativeLayout android:id="@+id/caseItemListCurrLayout"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content">
        </RelativeLayout>
    </ScrollView>
    <View
        android:id="@+id/caseItemScrollSpacer"
        android:layout_width="fill_parent"
        android:layout_below="@id/caseItemCurrScroll"
        android:layout_height="5dp"
        android:background="@color/background"/>
    <ScrollView 
        android:id="@+id/caseItemPastScroll"
        android:fillViewport="true"
        android:padding="10dp"
        android:layout_below="@id/caseItemScrollSpacer"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent">
        <RelativeLayout android:id="@+id/caseItemListPastLayout"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content">
        </RelativeLayout>
    </ScrollView>
</RelativeLayout> 
```

这应该是一个完全“工作”的例子，加上

```
<color name="background">#3E3E3E</color> 
```

在 strings.xml 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:23:46.327

`onCreateDialog()`只调用一次，而`onPrepareDialog()`每次对话框打开时调用。

覆盖`onPrepareDialog()`并调用`((AlertDialog) dialog).setMessage()`这里。

# vba - 以 VB 形式加载 TIF 图像的任何可能性

> ID：14129115
> 
> 赞同：-1
> 
> 时间：2013-01-02T21:02:47.753
> 
> 标签：vba, excel, excel-formula

任何可能以 VB 表单加载 TIF 图像，如果是这样，请分享代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:19:47.913

一种方法可能是使用网络控件。
在用户窗体设计器中，右键单击工具箱，然后选择其他控件...然后`Microsoft Web Browser`。
代码可能类似于：

```
Private Sub CommandButton1_Click()
    WebBrowser1.Navigate2 _
    "about:<body style=""background:url('F:\Test.tif')"">&nbsp;</body>"
End Sub 
```

它有效，但相当复杂，可能会很慢。

# c++ - Visual Studio 2010 c++ 睡眠（）

> ID：14129117
> 
> 赞同：2
> 
> 时间：2013-01-02T21:02:50.960
> 
> 标签：c++, winforms, visual-studio-2010, sleep

我喜欢在 Windows 窗体项目中使用 Sleep() 函数，但 Sleep() 是在执行其他任何操作之前执行的。我读到我应该使用 fflush() 刷新，但我不知道要刷新什么。有人能帮我吗？

编码：

```
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {                    

             this->label1->Visible= false;
             this->button1->Visible= false;

             r = (float)rand()/(float)RAND_MAX;                              
             r = r*100000;
             i = r;
             r = r - i;              

             String^ strR = "" + r;
             this->label2->Text = strR;

             if(r >= 0.5)
             {
                 this->pictureBox1->Visible= true;
                 this->pictureBox1->BackColor = System::Drawing::Color::Blue;                    
             }
             else
             {
                 this->pictureBox1->Visible= true;
                 this->pictureBox1->BackColor = System::Drawing::Color::Red;                                         
             }   

             Sleep(500);

         } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T21:07:01.333

调用`Sleep()`阻塞了您的主 (UI) 线程，这会阻止消息泵更新您的控件。

在这种情况下，除了阻止您的用户界面之外，调用似乎没有`Sleep`真正的目的 - 如果您想阻止再次按下按钮，更好的选择是禁用它，然后使用计时器（`System::Windows::Forms::Timer`) 以 500 毫秒的间隔重新启用按钮。

通过使用计时器，您不会阻塞 UI 线程，这允许您的控件保持活动状态，但您仍会阻止用户按下按钮。

# php - PHP 数组 - 排序和优先级

> ID：14129123
> 
> 赞同：1
> 
> 时间：2013-01-02T21:03:18.797
> 
> 标签：php, arrays

在我的网站上，用户可以用不同的语言发布他们的个人资料，比如 LinkedIn，现在我们在用户的名字之间进行搜索，例如我们搜索：' `ar`'，然后我们查看所有个人资料语言，我们将得到一个数组作为回报喜欢：

```
array
  0 => string '20=>en' (length=5)
  1 => string '42=>en' (length=5)
  2 => string '20=>fa' (length=5)
  3 => string '42=>sp' (length=5)
  4 => string '12=>fr' (length=5)
  5 => string '83=>ar' (length=5)
  6 => string '160=>sp' (length=5) 
```

上面的数组显示我们有 6 个配置文件与`ar`不同语言的搜索“”相匹配，上面的数组表示：

```
0 => Match found for User with ID = 20 in English Lang(en) profile
1 => Match found for User with ID = 42 in English Lang(en) profile
2 => Match found for User with ID = 20 in Farsi Lang(fa) profile
3 => Match found for User with ID = 42 in Spanish Lang(sp) profile
4 => Match found for User with ID = 12 in French Lang(fr) profile
5 => Match found for User with ID = 83 in Arabic Lang(ar) profile
6 => Match found for User with ID = 160 in Spanish Lang(sp) profile 
```

现在，我们想要显示结果，但事实上，正如您在结果中看到的那样，我们已经为`ar`ID = 20 的用户在两种语言中匹配了“ ” `English`，`Farsi`但我们不能显示 2结果是同一个人！所以我们需要放弃腋窝结果，所以上面的数组应该根据用户 ID 和语言的优先级进行过滤和唯一化，我对语言的优先级是：

1.  $_SESSION['my_lang'];
2.  英语（en）；
3.  兰德（）；

输入 ' `ar`' 作为他的搜索查询的人有一个`$_SESSION['my_lang']`，因此在结果数组中，`$_SESSION['my_lang']`我们应该保留该结果并放弃同一个人的其他匹配项。

之后`$_SESSION['my_lang']`，我们的优先级应该是**EN lang**，如果一个人有 N 种语言的结果，但我们在 中找不到匹配项`$_SESSION['my_lang']`，那么我们应该保留**en lang**中的结果并*清除该人的其余结果*。

在上述优先级之后，实际上没有什么关系，我们只需要为那个人保留一个结果并为那个人*去掉其他结果*，所以应该随机选择语言......

我不知道如何做到这一点，我将不胜感激任何帮助。

* * *

在我的示例中，我有一个如下数组：

```
array
  0 => string '20=>en' (length=5)
  1 => string '42=>en' (length=5)
  2 => string '20=>fa' (length=5)
  3 => string '42=>sp' (length=5)
  4 => string '12=>fr' (length=5)
  5 => string '83=>ar' (length=5)
  6 => string '160=>sp' (length=5) 
```

但在你的例子中，你有一个像这样的数组：

```
$users = array(
  array('id'=> 20, 'lang'=>'en'),
  array('id'=> 42, 'lang'=>'en'),
  array('id'=> 20, 'lang'=>'fa'),
  array('id'=> 42, 'lang'=>'sp'),
  array('id'=> 12, 'lang'=>'fr'),
  array('id'=> 83, 'lang'=>'ar'),
  array('id'=> 160, 'lang'=>'sp')); 
```

我应该如何让我的数组看起来像你的数组，这样你的代码才能工作..？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:36:49.350

可能有更好（更有效）的方法来做到这一点，但这是一种方法。分 3 步完成。（1）创建一个语言数组，（2）排序用户数组，基于语言数组，（3）使用户数组具有唯一用户。

**注意**第 2 步使用匿名函数，因此如果 PHP v < 5.3，请使用第 2 步示例

**用户数组**

```
$users = array(
               array('id'=> 20, 'lang'=>'en'),
               array('id'=> 42, 'lang'=>'en'),
               array('id'=> 20, 'lang'=>'fa'),
               array('id'=> 42, 'lang'=>'sp'),
               array('id'=> 12, 'lang'=>'fr'),
               array('id'=> 83, 'lang'=>'ar'),
               array('id'=> 160, 'lang'=>'sp')); 
```

**步骤1**

```
//Create an Array of Languages
$langs[0] = $_SESSION['my_lang']; // Set $_SESSION['my_lang'] as 1st
if($langs[0] != 'en'){
    $langs[1] = 'en';} // Set en as 2nd, if not already as 1st

//Add remainder of User languages to Languages
shuffle($users);  // This randomizes the $user array so the rest of the languages are random. Can be removed if randomizing the rest of the languages is not necessary.
foreach ($array as $lang) {
    if(!in_array($lang['lang'],$langs))
        $langs[] =$lang['lang'];
} 
```

**第 2 步**与 php v >= 5.3 一起使用 - 使用匿名函数

```
//Reorder the User array, bases off Language array
$keys = array_flip($langs);
usort($users, function($a, $b) use($keys)
{
    return $keys[$a['lang']] - $keys[$b['lang']];
}); 
```

**第 2 步**与 php v < 5.3 一起使用

```
//Reorder the User array, bases off Language array
$keys = array_flip($langs);
function custom($a,$b){
   global $keys;
   return $keys[$a['lang']] - $keys[$b['lang']];
}
usort($users, "custom"); 
```

**第 3 步**

```
//Make the User array unique
$temp_array = array();
foreach ($users as &$v) {
    if (!isset($temp_array[$v['id']]))
        $temp_array[$v['id']] =&$v;
}
$users = array_values($temp_array); 
```

phpFiddle w/ 第 2 步 for php v >= 5.3 - [http://phpfiddle.org/main/code/xva-dzn](http://phpfiddle.org/main/code/xva-dzn)

phpFiddle w / php v < 5.3的第2步 - [http://phpfiddle.org/main/code/p02-r6b](http://phpfiddle.org/main/code/p02-r6b)

* * *

**编辑**
假设您的数组 -

```
array
  0 => string '20=>en' (length=5)
  1 => string '42=>en' (length=5)
  2 => string '20=>fa' (length=5)
  3 => string '42=>sp' (length=5)
  4 => string '12=>fr' (length=5)
  5 => string '83=>ar' (length=5)
  6 => string '160=>sp' (length=5) 
```

是`var_dump()`这样的——

```
$returned = array(
  0 => '20=>en',
  1 => '42=>en',
  2 => '20=>fa',
  3 => '42=>sp',
  4 => '12=>fr',
  5 => '83=>ar',
  6 => '160=>sp'); 
```

使用`explode()`和`for()`循环将数组更改为要在上述步骤中使用的多定义数组。

```
$users = array();
for($i=0;$i<count($returned);$i++){
     $split_returned = explode("=>",$returned[$i]); // split up each line at the '=>'
     $users[$i]['id'] = $split_returned[0];   // set the 'id'
     $users[$i]['lang'] = $split_returned[1];}  // set the 'lang' 
```

# c# - 在 Windows 7 上部署智能手机应用程序

> ID：14129125
> 
> 赞同：-3
> 
> 时间：2013-01-02T21:03:21.950
> 
> 标签：c#, .net, windows-ce, smartphone

我正在开发智能手机应用程序，我在模拟器上测试我的应用程序，但我无法将真实设备连接到我正在编写应用程序的电脑。我想要的是在PC上部署或发布应用程序，然后将安装包传输到设备并安装在那里，这可能吗？如果是怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:07:11.010

我不确定您在哪个平台上为您的平台工作，但如果您正在使用：

Windows 手机，您需要 Visual Studio 或 Wp7 SDK 在设备上运行您的应用程序或发布到市场

Android，你需要eclipse和Android SDK

安装了 xCode 的 iOS mac

假设您有 .apk 文件，因此您可以通过多种方式安装它，但最简单的方法是复制并粘贴到设备的 sd 卡中，然后使用文件管理器安装它。

但如果您使用的是 Windows Phone 7 或更高版本，则需要开发人员解锁设备，这意味着您需要开发人员帐户和每年 100 美元~。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:12:59.280

一段时间后我找到了答案。
我只需要在我的应用程序中添加一个安装项目，然后构建安装项目，它会给我一个`.cab`可以安装在智能设备上的文件。

# objective-c - Objective-C 比较块如何知道 sortUsingComparator 方法的参数？

> ID：14129128
> 
> 赞同：0
> 
> 时间：2013-01-02T21:03:36.983
> 
> 标签：objective-c, objective-c-blocks

我正在学习Objective-C，并试图让我的头脑围绕使用块的想法。

在我看到的一个示例中，有一种方法旨在按名称按字母顺序对名为 book 的 NSArray 进行排序：

```
-(void) sort
{
    [book sortUsingComparator:
        ^(id obj1, id obj2) {
            return [[obj1 name] compare: [obj2 name]];
    } ];
} 
```

该方法如何将对象传递给 obj1 和 obj2 参数？sortUsingComparator 是否以某种方式自动将 2 个对象传递给它的比较器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:06:35.240

`sortUsingComparator:`遍历数组并使用各种对象对调用块以确定如何对它们进行排序。这里没有魔法——它是一个普通的排序函数，但它使用你的块而不是`>`比较值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T21:06:54.563

好吧，取决于排序的实现，每次排序算法需要比较两个元素时，都会调用它。您实际上不需要知道将传递给它的内容，只需为传递的类型定义顺序关系即可。它会问他需要知道什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T00:41:08.090

关于回答您问题的块的一些额外信息，可以将块分配给变量并像函数一样调用。sortUsingComparator: 方法签名是：

```
- (void)sortUsingComparator:(NSComparator)cmptr 
```

cmptr 是保存你的块的变量。sortUsingComparator: 方法将通过其排序算法运行数组中的每个元素，正如费尔南多指出的那样，每次排序算法需要比较两个元素时，它的调用方式如下：

```
NSComparisonResult result = cmptr(obj1, obj2); 
```

并且您的块代码被执行。所以你的问题的答案：

> sortUsingComparator 是否以某种方式自动将 2 个对象传递给它的比较器？

是是的 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T22:51:45.310

sort 方法会做这样的事情（我并没有声称该`sort:`方法完全可以做到这一点，但这个想法仍然存在）：

```
for (i = 0; i < [book count]; i++) {
    id currentObject = [book objectAtIndex:i];      // obj1
    for (j = 0; j < i; j++) {
        id sortedObject = [book objectAtIndex:j];   // obj2
        NSComparisonResult result = sortBlock(currentObject, sortedObject);
        // Insert currentObject where appropriate; perform the rest of the sort
    }
} 
```

在这种情况下，我假设块的参数名称是`^sortBlock`（插入符号表示块）。您可以像普通函数一样调用块，使用括号和参数。

因此，要回答您的问题……从某种意义上说，这是自动的，*您*不必考虑它，但是没有魔术发生。希望这可以帮助！

# xamarin.ios - MonTouch.Dialog 部分标题中的多个项目

> ID：14129132
> 
> 赞同：1
> 
> 时间：2013-01-02T21:03:59.433
> 
> 标签：xamarin.ios, monotouch.dialog

根据 Miguel 对另一个问题的回答（见下文），我能够在我的部分标题中获得一个标签。但我希望用 3 行文本更进一步。我的第一个想法是不是用单个标签创建标题，有没有办法用 uiview 创建它，在该视图中你可以放置你想要的任何项目？

*部分页眉和页脚可以指定为字符串或 UIViews，可悲的是，两者之间没有任何内容。*

*如果您想要自定义标题/视图，则需要创建一个 UILabel 并在您的构造函数中将其用于 Section 类型（仅适用于 Elements API）。*

*就像是：*

```
 var header = new UILabel (new RectangleF (0, 0, 320, 48)){
        Font = UIFont.BoldSystemFontOfSize (22),
        BackgroundColor = UIColor.Red
    }

    new Section(header, footer) {
        ...
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:05:59.443

是的你可以。

Section 构造函数的参数要么是两个文本字符串，要么是两个 UIView。在上面的示例中，您只是创建了一个类型为 UILabel 的 UIView，但它可以是您想要的任何东西，具有您想要或需要的尽可能多的子视图。

# javascript - 针对远程 CSV 执行查询的 YQL 文档在哪里？

> ID：14129133
> 
> 赞同：0
> 
> 时间：2013-01-02T21:03:59.737
> 
> 标签：javascript, csv, jsonp, google-sheets, yql

我需要从客户端 Web 应用程序中的 Google 电子表格中获取一些数据，我认为 YQL 会很合适，因为它可以从 Google 获取 CSV 数据并将其转换为 JSONP。我拼凑了一些 YQL，这些 YQL 主要来自各种博客文章和要点和事物：

```
select * from csv 
where url="https://docs.google.com/spreadsheet/pub?key=XXXX&output=csv" 
and columns="foo,bar,blah" 
```

这很好用，但我想知道我还能用它做什么。例如，我想知道是否可以为 CSV 设置别名以在更复杂的查询中使用，或者是否可以自动让它将第一行视为列名。我一直在浏览 YQL 指南，但找不到任何提及`csv`“表格”、 “字段”`url`或`columns`任何相关内容的内容。

有人可以提供一些关于使用 YQL 查询远程 CSV 的权威资源的链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:44:58.793

YQL 中 CSV 表的“文档”非常轻量级。它在 YQL 控制台中显示为：

[`desc csv`](http://developer.yahoo.com/yql/console/?q=desc%20csv)

在那里你会看到必填`url`字段和可选的`charset`和`columns`。这是一个非常简单的表格，最大的灵活性来自能够选择要输出的列（假设第一行数据包括列标题）。

如果您想做的比基表提供的更多，您可以创建一个开放表。这篇 YQL 团队博客文章展示了一个从“select * from csv”调用开始，然后使用 JavaScript 处理结果的示例：

[YQL 博客：使用 YQL 和开放数据表获取股票信息](http://www.yqlblog.net/blog/2009/06/02/getting-stock-information-with-yql-and-open-data-tables/)

# matlab - Matlab - 计算大稀疏（A'*A）矩阵的最大特征值

> ID：14129137
> 
> 赞同：5
> 
> 时间：2013-01-02T21:04:07.657
> 
> 标签：matlab, sparse-matrix

我有一个大的（**400K*400K**）稀疏矩阵，我需要计算**A'*A**的最大特征值。

问题是由于内存问题，Matlab 甚至无法计算 A'。
我也尝试过`[a,b,c] = find(A)`，然后通过创建转置稀疏矩阵进行转置，但是虽然`find()`有效，但 sprase 的创建却没有。

有一个很好的解决方案吗？它可以在 matlab 函数中或在另一种技术中计算这种乘法的最大特征值。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:59:14.510

如果 A 是稀疏的，请参阅此[线程和](https://groups.google.com/forum/?fromgroups=#!topic/comp.soft-sys.matlab/ibTJcwPrqtk)[本文档](http://www.mathworks.com/help/matlab/math/sparse-matrix-operations.html#f6-33214)中的一些讨论（基本上是逐部分进行）以获取转置它的方法等。

但现在你需要计算`B=A'*A`. 问题是，它仍然稀疏吗？假设是，使用链接中提到的先前技术继续进行应该没有问题。

然后在你得到之后`B=A'*A`，使用`eigs`

```
eigs(B,1) 
```

以获得最大量级特征值。

# android - AsyncTask 检查用户输入是否在数据库中？

> ID：14129138
> 
> 赞同：0
> 
> 时间：2013-01-02T21:04:16.173
> 
> 标签：android, android-asynctask

当需要检查输入是否有效时，我在从 AsyncTask 同步结果时遇到问题。

我的应用程序要求用户在 EditText 中输入一些促销代码。如果促销代码在数据库中，我想将促销代码标记为有效。如果输入的促销代码不在数据库中，则将其标记为无效。

这是按钮监听器的代码

```
 // Listens for Add button presses
    addButton.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            String promo_code = (String) PromotCodeEditText.getText().toString();

            // Start AsyncTask that will store true or false in checkCodeInDatabase variable
            // depending if PromoCode is in database. We use checkCodeInDatabase in else if check below.
            new CheckCodeDatabase().execute(promo_code);

            // Check if Promo Code that user typed is in database
            // checkCodeInDatabase is false if course is not in database
            if (!checkCodeInDatabase) {
                // Display No code in database alert dialog
                showMsgDialog(getString(R.string.noCodeDBTitle),
                        getString(R.string.noCodeDBMessage));

                courseCodeEditText.setText("");

            } else {
                // Add promo code user typed in EditText
                addCode(promo_code);
            }
        }
    }); 
```

我的想法是，当用户按下添加按钮时，要添加促销代码，我会启动 AsyncTask，它对数据库执行查询。AsyncTask 将 true 或 false 存储在静态变量 checkCodeInDatabase 中。

这是 AsyncTask 的代码：

```
private class CheckCodeDatabase extends AsyncTask<String, Object, Boolean> {

    DataBaseHelper myDbHelper = new DataBaseHelper(MainActivity.this);

    @Override
    protected Boolean doInBackground(String... params)
    {
        try {
            myDbHelper.createDataBase();
        } catch (IOException ioe) {
            throw new Error("Unable to create database");
        }

        try {
            myDbHelper.openDataBase();
        } catch (SQLException sqle) {
            throw sqle;
        }

        // This returns true or false if params[0], which is a promo code,
        // is in in PromoCodes table in database.
        return myDbHelper.checkCourseInDatabase(params[0]);
    }

    @Override
    protected void onPostExecute(Boolean result) {
        // Store true or false in checkCodeInDatabase which is a static variable.
        // This variable will be used to check if code is valid in add button listener.
        checkCodeInDatabase = result;
        myDbHelper.close();
    } 
```

**问题：**

问题是 AsyncTask 没有按时将值存储到 checkCodeInDatabase 变量中。这意味着，在添加按钮侦听器中执行的 if 语句，checkCodeInDatabase 的值是旧值，因为 AsyncTask 在添加按钮侦听器中执行 if 语句之前没有足够的时间执行数据库查询和更新 checkCodeInDatabase 变量。

那么，如何让添加按钮监听器等待 AsyncTask 更新 checkCodeInDatabase 然后执行 if 检查。

提前致谢！

ps我是android开发的新手。我在一些关于 Android 开发的书中读到，对数据库的任何查询都应该在 AsyncTasks 中执行，以避免应用程序无响应。也许用 AsyncTasks 实现我想要的是不可能的。欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:11:30.127

你应该委托整个

```
 if (!checkCodeInDatabase) {
            // Display No code in database alert dialog
            showMsgDialog(getString(R.string.noCodeDBTitle),
                    getString(R.string.noCodeDBMessage));

            courseCodeEditText.setText("");

        } else {
            // Add promo code user typed in EditText
            addCode(promo_code);
        } 
```

阻止你 AsyncTask 的 onPostExecute。

这样做你可以确定你已经获取了结果并且你正在 ui 线程上运行。

# android - 如何获取 EditText ID

> ID：14129139
> 
> 赞同：-1
> 
> 时间：2013-01-02T21:04:17.543
> 
> 标签：android, android-edittext

我使用循环添加了一些 EditTexts，

textFieldsLayout = (LinearLayout) findViewById(R.id.LinearLayout2);

```
 for(int i=1; i <= 8; i++){

        final EditText ed = new EditText(this);

        ed.setText("" + i);

        ed.setInputType(2);

        ed.setLayoutParams(lparams);

        textFieldsLayout.addView(ed);
    }   
} 
```

在此之后，我想获取用户添加到 EditText 字段中的文本，但我被困在如何做到这一点上。我将如何获得每个 EditText 字段的 ID？

谢谢，奥利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:32:37.403

只需在创建它们时将它们添加到集合中，您可以通过索引或键或循环或其他方式轻松引用它们。

```
EditText[] etCollection = new EditText[8];

..........

    textFieldsLayout = (LinearLayout) findViewById(R.id.LinearLayout2);
    for(int i=1; i <= 8; i++){
        final EditText ed = new EditText(this);
        ed.setText("" + i);
        ed.setInputType(2);
        ed.setLayoutParams(lparams);
        textFieldsLayout.addView(ed);
        etCollection[i] = ed; <------ adding them to the collection
    }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:06:52.930

您必须对`ed.setId( id );`您创建的每一个进行处理，并且`id`对于您想要找到的每一个都应该是独一无二的。当你去找一个做

```
EditText ed = (EditText)findViewById( id ); 
```

您必须在某处跟踪您的身份。

或者，您可以只保留您创建的 EditTexts 列表并在列表中运行以获取每个 EditTexts 的文本。

# android - 检查两个数字之间的数字Android

> ID：14129140
> 
> 赞同：-3
> 
> 时间：2013-01-02T21:04:22.233
> 
> 标签：android

我如何检查一个数字是否在Android中的其他两个数字之间

```
 if(number1.matches("[1024-65535]+"));
                 else{ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:07:38.017

解决问题的一种方法是将所有需要比较的值转换为`int`s. 然后比较是微不足道的。

# powershell - Exchange 2010 - 如何重置或删除公用文件夹的权限？

> ID：14129143
> 
> 赞同：0
> 
> 时间：2013-01-02T21:04:54.137
> 
> 标签：powershell, outlook, exchange-server

我的 Exchange 2010 环境中有一个公用文件夹，但我似乎无法删除该公用文件夹，因为我没有权限..

查看文件夹的设置权限...

```
[PS] C:\Windows\system32>Get-PublicFolderClientPermission -identity "\Marketing Contacts1" | fl

RunspaceId   : 13900165-2443-40c8-89a4-e74748eefe15
Identity     : \Marketing Contacts1
User         : Default
AccessRights : {Author}

RunspaceId   : 13900165-2443-40c8-89a4-e74748eefe15
Identity     : \Marketing Contacts1
User         : Anonymous
AccessRights : {None}

RunspaceId   : 13900165-2443-40c8-89a4-e74748eefe15
Identity     : \Marketing Contacts1
User         : vand1.oppy.com/Oppy/Wil/Janie Hewitt
AccessRights : {Owner} 
```

即使我尝试以所有者身份使用 Outlook 登录，我仍然无法打开公用文件夹属性上的“安全”选项卡。

此时我想删除它并重新创建它，或者是否有办法重置权限以便管理员可以使用该项目。

我可以访问交换服务器和管理帐户。既然我根本无法操作公用文件夹项目，此时我能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:12:37.343

你有没有尝试过：

`Remove-PublicFolderClientPermission -Identity "\Marketing Contacts1" -User "Name Of The User You wish to Remove Permissions from"`

然后，您将通过执行以下操作设置您想要拥有所有者权限的管理员：

`Add-PublicFolderClientPermissions -Identity "\Marketing Contacts1" -User "Name of the user you wish to add permissions for"`

# c# - 无法隐式转换类型'System.Linq.IQueryable '

> ID：14129147
> 
> 赞同：2
> 
> 时间：2013-01-02T21:05:19.363
> 
> 标签：c#, asp.net-mvc, linq

我在我的 C# 项目中遇到一个错误，这让我很头疼。错误是：

```
Cannot implicitly convert type 'System.Linq.IQueryable<AnonymousType#1>'
to System.Collections.Generic.IEnumerable<KST.ViewModels.Gallery>'. 
```

这是我的 LINQ 查询：

```
//Get Single Picture
var PictureResults = (from m in DB.Media where m.MediaID == 450 select m).SingleOrDefault();

//Get Gallery Pictures and Gallery Title
var GalleryResults = from g in DB.Galleries
                     join m in DB.Media on g.GalleryID equals m.GalleryID into gm
                     where g.GalleryID == 100
                     select new { g.GalleryTitle, Media = gm }; 
```

这是我的视图模型。

```
public class GalleryViewModel
{
    public Media Media { get; set; }
    public IEnumerable<Gallery> Gallery { get; set; }
}

public class Gallery
{
    public string GalleryTitle { get; set; }
    public int MediaID { get; set; }
    public int GalleryID { get; set; }
    public string MediaGenre { get; set; }
    public string MediaTitle { get; set; }
    public string MediaDesc { get; set; }
} 
```

在 GalleryResults 下出现波浪线错误：

```
//Create my viewmodel
var Model = new GalleryViewModel
{
    Media = PictureResults,
    Gallery = GalleryResults
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T21:21:45.383

Ufuk Hacıoğulları 已发布答案并在几分钟后将其删除。我认为他的回答是正确的，他的解决方案摆脱了错误信息。所以我再次发布它：

**Ufuk Hacıoğulları 的回答；**

您正在投影一系列匿名类型而不是`Gallery`. 只需在您的 select 语句中实例化 Gallery 对象，它应该可以工作。

```
var GalleryResults = from g in DB.Galleries
                     join m in DB.Media on g.GalleryID equals m.GalleryID into gm
                     where g.GalleryID == 100
                     select new Gallery { GalleryTitle = g.GalleryTitle, Media = gm }; 
```

# handlebars.js - 手动使用预编译的车把模板

> ID：14129149
> 
> 赞同：5
> 
> 时间：2013-01-02T21:05:27.670
> 
> 标签：handlebars.js

如何手动使用预编译的 handlebars.js 模板？

比方说，我们有

```
source = "<p>Hello, my name is {{name}}</p>"
data = { name: "Joe" } 
```

目前，我有

```
template = Handlebars.compile(source)
render: -> template(data) 
```

源来自数据库，为了减少编译时间，我想使用一个编译步骤，预编译模板服务器端，`Handlebars.precompile(source)`然后使用类似的东西：

```
template = precompiled_template
render: -> precompiled_template(data) 
```

precompiled_template 是一个带有函数定义的字符串，所以这不起作用。

另外，我发现了`Hanlebars.compile(source)() == Handlebars.precompile(source)`，但是在浏览了把手的源代码之后，它是编译器和运行时，我仍然不确定如何实现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T18:00:48.987

如果您直到现在还没有找到正确的问题，答案很简单。Handlebars 在命令行上带有一个 C 预编译器，如果您可以访问您的 shell，您可以简单地编译您的模板，每个模板分开或合并到一个文件中。

您可以通过 npm / 安装 Handlebars 或在您的系统上构建它。在 shell 上，您可以访问帮助文件

> $> 车把 [ENTER]

您将看到一个帮助文件，例如 > - f --output 输出文件等 .. - m --min 最小化输出

> $> Handlebars mysupertemplate.handlebars -f compiled.js -m （如果你想缩小js文件，“-m”）

在浏览器中运行 Handlebars.compile 会大大降低性能，因此在将文件发送到浏览器之前，值得尝试在服务器上进行预编译。

要在浏览器中注册 Handlebars 模板，您必须像这样加载它们：

```
var obj = {"foo":"bar"}

var template = require("./mytemplate-file.js") // require.js example
    template = template(Handlebars) // Pass Handlebars Only if the template goes mad asking for his Father

var html = Handlebars.templates[template-name](obj) 
```

例如，如果您在“模板文件”中注册了多个模板，您将能够在 require 调用所有模板后使用

```
var html = Handlebars.templates["templateName"]({"foo":"bar"}); 
```

您可以通过在文件中注册所有已知的助手和/或为像这样的部分制作自定义助手来走得更远。

```
*// This will be the helper in you app.js file*

Handlebars.registerHelper("mypartials", function(partialName, data) {
     var partial = Handlebars.registerPartial(partialName) || data.fn
     Handlebars.partials[partialName] = partial
}) 
```

在你的模板文件中，你可以把这个...

```
{{#mypartial "divPartial"}}
  <div id="block"><h2>{{foo}}</h2><p>{{bar}}</p></div>  
{{/mypartial}}

{{#mypartial "formPartial"}}
  <form id="foo"><input type="text" value="{{foo}}" name="{{bar}}"></form>
{{/mypartial}} 
```

现在您可以通过调用来访问这些文件

```
var html = Handlebars.partials["divPartial"]({"foo":"bar","bar":"foo"})
var formHtml = Handlebars.partials["formPartial"]({"bar":"bar","foo":"foo"}) 
```

希望这有点帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:29:48.170

这个速度测试[http://jsperf.com/handlebars-compile-vs-precompile/3](http://jsperf.com/handlebars-compile-vs-precompile/3)给出了答案。

显然，一种解决方案是针对`eval()`结果字符串，它会起作用。

代码是

```
var data = { name: "Greg" };
var source = "<p>Howdy, {{ name }}</p>";

eval("var templateFunction = " + Handlebars.precompile(source));
var template = Handlebars.template(templateFunction);

template(data);
=> "<p>Howdy, Greg</p>" 
```

当然，需要小心 eval 并且可能存在更好的解决方案。

# sorting - 测试数组是否随机排序

> ID：14129150
> 
> 赞同：1
> 
> 时间：2013-01-02T21:05:38.997
> 
> 标签：sorting, phpunit, shuffle

我正在用[PHPunit](http://www.phpunit.de/manual/3.7/en)测试我的代码。我的代码有几种排序方法：按名称、年龄、计数和**随机**。下面是按计数排序的实现和测试。这些都是非常微不足道的。

```
class Cloud {
  //...
  public function sort($by_property) {
    usort($this->tags, array($this, "cb_sort_by_{$by_property}"));
    return $this;
  }

  private function cb_sort_by_name($a, $b) {
    $al = strtolower($a->get_name());
    $bl = strtolower($b->get_name());
    if ($al == $bl) {
      return 0;
    }
    return ($al > $bl) ? +1 : -1;
  }

  /**
   * Sort Callback. High to low
   */
  private function cb_sort_by_count($a, $b) {
    $ac = $a->get_count();
    $bc = $b->get_count();
    if ($ac == $bc) {
      return 0;
    }
    return ($ac < $bc) ? +1 : -1;
  }
} 
```

经测试：

```
 /**
   * Sort by count. Highest count first.
   */
  public function testSortByCount() {
    //Jane->count: 200, Blackbeard->count: 100
    //jane and blackbeard are mocked "Tags".
    $this->tags = array($this->jane, $this->blackbeard);

    $expected_order = array("jane", "blackbeard");
    $given_order = array();

    $this->object->sort("count");

    foreach($this->object->get_tags() as $tag) {
      $given_order[] = $tag->get_name();
    }

    $this->assertSame($given_order, $expected_order);
  } 
```

但是现在，我想添加“随机排序”

```
 /**
   * Sort random.
   */
  public function testSortRandom() {
    //what to test? That "shuffle" got called? That the resulting array
    // has "any" ordering?
  } 
```

实现可以是任何东西，从调用`shuffle($this->tags)`到`usort`随机返回 0、-1 或 +1 的回调。性能是一个问题，但可测试性更重要。

如何测试数组是随机排序的？AFAIK 很难存根全局方法，例如`shuffle`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-28T16:06:57.543

假设你正在使用[shuffle](http://php.net/manual/en/function.shuffle.php)你的方法应该是这样的

```
sortRandom() {
 return shuffle($this->tags);
} 
```

好吧，您不需要测试键是否被洗牌，但是否仍然返回数组。

```
function testSortRandom(){
    $this->assertTrue(is_array($this->object->sortRandom()));
} 
```

您应该测试您的代码，而不是 php 核心代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:12:21.937

在任何有意义的意义上，这实际上是不可能的。如果您的列表中只有几个项目，那么完全有可能按随机排序确实看起来像按任何给定字段排序（并且碰巧它与按排序顺序相同的可能性如果您没有太多元素，任何其他领域都相当高）

如果您问我该操作是否实际上并未以任何方式操纵数据，则对排序操作进行单元测试似乎有点愚蠢。感觉就像是为了它而进行单元测试，而不是因为它实际上是在衡量某些东西是否按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T09:42:21.773

我决定用一个全局包装器来实现它：

```
class GlobalWrapper {
  public function shuffle(&$array);
    shuffle($array);
  }
} 
```

在排序中，我`shuffle`通过该包装器调用：

```
public function sort($by_property) {
  if ($by_property == "random") {
    $this->global_wrapper()->shuffle($this->tags);
  }
  //...
} 
```

然后，在测试中，我可以模拟它`GlobalWrapper`并为感兴趣的全局函数提供存根。在这种情况下，我感兴趣的只是方法被调用，而不是它的输出[1]。

```
 public function testSortRandomUsesShuffle() {
   $global = $this->getMock("GlobalWrapper", array("shuffle"));
   $drupal->expects($this->once())
     ->method("shuffle");
   $this->object->set_global_wrapper($drupal);

   $this->object->sort("random");
 } 
```

[1] 实际上，我对此包装器也有单元测试，测试参数以及它执行引用调用的事实。此外，这个包装器已经实现（并被调用`DrupalWrapper`）以允许我对第三方（Drupal）提供的某些全局函数进行存根。这个实现允许我使用 a 传入包装器`set_drupal()`并使用`drupal()`. 在上面的例子中，我把这些`set_global_wrapper()`和 `global_wrapper()`.

# c++ - 如何将断言与唯一 ID 关联？

> ID：14129154
> 
> 赞同：5
> 
> 时间：2013-01-02T21:06:01.277
> 
> 标签：c++, debugging, testing

**背景**：我正在处理的代码库非常大，并且大量使用了断言。测试中发现的大量问题最终与单个断言（文件和行号）相关联。但是，如果有人修改了源代码，则与断言关联的行号可能会发生变化，并且在再次发生时将变得难以跟踪。

示例：在测试期间，假设测试人员在 main.cpp:1808 遇到了几个断言。针对此断言，我们的缺陷跟踪系统中记录了一个错误。第二天有人修改了 main.cpp。当测试人员重新执行他们的测试时，相同的断言仍然发生，但现在报告发生在 main.cpp:1790。因此，如果不查看源代码，很难确定这是一个新的断言还是先前看到的断言的再次出现。

**问题：** 是否可以将每个单独的 assert() 与一个唯一的 ID 相关联，这将在代码更改中持续存在，而不是依赖于行号？我自己想不出解决办法。我希望比我聪明的人会有一些想法。以下是我认为解决方案的行为方式：

```
#include <iostream>
#include <string>
#include <assert.h>

using namespace std;

//Can ASSERT to redefined to generate a UID?
#define ASSERT assert

void main(void)
{
    std::string name;
    int age;

    std::cin >> name;
    ASSERT(name.length() < 10);     //Generate a UID if assert fails(ie 0001)
    std::cin >> age;
    ASSERT(age < 100);              //Generate a UID if assert fails(ie 0002)
} 
```

一些代码更改后

```
#include <iostream>
#include <string>
#include <assert.h>

using namespace std;

#define ASSERT assert

void main(void)
{
    std::string name;
    int age;
    int height;

    std::cin >> height;
    ASSERT(height < 10);          //Generate a UID if assert fails(ie 0003)
    std::cin >> name;
    ASSERT(name.length() < 10);   //Generate a UID if assert fails(ie 0001)
    std::cin >> age;
    ASSERT(age < 100);            //Generate a UID if assert fails(ie 0002)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:26:43.510

您可以使用比行号更广泛的标准，例如函数和断言文本。例如，

```
#define ASSERT(cond) \
if(!(cond))          \
{                    \
    std::cerr << "Assertion failure: " 
              << __FILE__ << ":" << __FUNCTION__ << "-" << #cond << std::endl; \
    abort();         \
}                    \ 
```

有人可能会争辩说，如果函数或条件发生变化，即使您生成的 UID 没有变化，它仍然是一个不同的错误，应该单独研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:14:38.410

我认为没有办法证明代码更改。通常代码跟踪软件无法正确识别代码的哪一部分已更改。所以任何自动跟踪都可能会失败。我建议编写一个简单的程序来枚举每个`assert`没有 uid 的现有程序。该程序应该更改`aasert`为例如，例如`ASSERT(height < 10, "aagcodkv73");`。并将该脚本连接到提交阶段。

这样，每次有人添加新断言时，它都会获得自己的 uid。并且该uid将由开发人员保留

# java - Jenkins / Java 使用 rvm 插件间歇性地找不到 rake

> ID：14129159
> 
> 赞同：1
> 
> 时间：2013-01-02T21:06:27.877
> 
> 标签：java, jenkins, classpath, rvm, jenkins-plugins

这是最烦人的问题，因为它是间歇性的。

我的 Jenkins 任务更新了 Ruby/Rails 存储库，并在其上运行测试。我正在使用 RVM 插件，并且 rvm-managed 环境已指定并存在。

然而周期性地，任务将失败并出现：

```
java.io.IOException: Cannot run program "/var/lib/jenkins/.rvm/rubies/ruby-1.9.3-p125/bin/rake" (in directory "<http://jenkins.example.net/job/test_cms/ws/")>: java.io.IOException: error=2, No such file or directory 
```

我可以重复作业运行，它会成功。该程序实际上存在于错误消息中指定的路径中。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:23:44.570

我没有使用 RVM 插件。我在系统范围内安装了 RVM 的情况下运行我的 Jenkins 服务器，然后 Jenkins 在其路径中拾取它。如果您无法修复当前设置，您可以尝试一下。

# javascript - PDF.js 页面不会被绘制。只显示白页

> ID：14129169
> 
> 赞同：0
> 
> 时间：2013-01-02T21:06:52.493
> 
> 标签：javascript, pdf, pdf.js

我正在尝试使用 PDFJS 在 chrome 中呈现 pdf

**这是我正在调用的函数：**

```
open: function pdfViewOpen(url, scale, password) {     
var parameters = {password: password};
if (typeof url === 'string') { // URL
  this.setTitleUsingUrl(url);
  parameters.url = url;
} else if (url && 'byteLength' in url) { // ArrayBuffer
  parameters.data = url;
}

if (!PDFView.loadingBar) {
  PDFView.loadingBar = new ProgressBar('#loadingBar', {});
}

this.pdfDocument = null;
var self = this;
self.loading = true;

getDocument(parameters).then(
  function getDocumentCallback(pdfDocument) {          
    self.load(pdfDocument, scale);
    self.loading = false;
  },
  function getDocumentError(message, exception) {
    if (exception && exception.name === 'PasswordException') {
      if (exception.code === 'needpassword') {
        var promptString = mozL10n.get('request_password', null,
                                  'PDF is protected by a password:');
        password = prompt(promptString);
        if (password && password.length > 0) {
          return PDFView.open(url, scale, password);
        }
      }
    }

    var loadingErrorMessage = mozL10n.get('loading_error', null,
      'An error occurred while loading the PDF.');

    if (exception && exception.name === 'InvalidPDFException') {
      // change error message also for other builds
      var loadingErrorMessage = mozL10n.get('invalid_file_error', null,
                                    'Invalid or corrupted PDF file.');
//#if B2G
//        window.alert(loadingErrorMessage);
//        return window.close();
//#endif
    }

    var loadingIndicator = document.getElementById('loading');
    loadingIndicator.textContent = mozL10n.get('loading_error_indicator',
      null, 'Error');
    var moreInfo = {
      message: message
    };
    self.error(loadingErrorMessage, moreInfo);
    self.loading = false;
  },
  function getDocumentProgress(progressData) {
    self.progress(progressData.loaded / progressData.total);
  }
);
 } 
```

**这是电话：**

```
PDFView.open('/MyPDFs/Pdf2.pdf', 'auto', null); 
```

**我得到的是：**

![](../Images/a0c913dfc9a269be11d7efa619c80b63.png)

如果您注意到，即使是页码也会被检索到，但内容并未绘制在页面中。找不到原因..我应该在 PDFView.open 旁边调用任何其他函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:36:33.610

找到了解决方案...！这是完成工作的代码。

```
$(document).ready(function () {
        PDFView.initialize();

        var params = PDFView.parseQueryString(document.location.search.substring(1));

        //#if !(FIREFOX || MOZCENTRAL)
        var file = params.file || DEFAULT_URL;
        //#else
        //var file = window.location.toString()
        //#endif

        //#if !(FIREFOX || MOZCENTRAL)
        if (!window.File || !window.FileReader || !window.FileList || !window.Blob) {
            document.getElementById('openFile').setAttribute('hidden', 'true');
        } else {
            document.getElementById('fileInput').value = null;
        }
        //#else
        //document.getElementById('openFile').setAttribute('hidden', 'true');
        //#endif

        // Special debugging flags in the hash section of the URL.
        var hash = document.location.hash.substring(1);
        var hashParams = PDFView.parseQueryString(hash);

        if ('disableWorker' in hashParams)
            PDFJS.disableWorker = (hashParams['disableWorker'] === 'true');

        //#if !(FIREFOX || MOZCENTRAL)
        var locale = navigator.language;
        if ('locale' in hashParams)
            locale = hashParams['locale'];
        mozL10n.setLanguage(locale);
        //#endif
        if ('textLayer' in hashParams) {
            switch (hashParams['textLayer']) {
                case 'off':
                    PDFJS.disableTextLayer = true;
                    break;
                case 'visible':
                case 'shadow':
                case 'hover':
                    var viewer = document.getElementById('viewer');
                    viewer.classList.add('textLayer-' + hashParams['textLayer']);
                    break;
            }
        }

        //#if !(FIREFOX || MOZCENTRAL)
        if ('pdfBug' in hashParams) {
            //#else
            //if ('pdfBug' in hashParams && FirefoxCom.requestSync('pdfBugEnabled')) {
            //#endif
            PDFJS.pdfBug = true;
            var pdfBug = hashParams['pdfBug'];
            var enabled = pdfBug.split(',');
            PDFBug.enable(enabled);
            PDFBug.init();
        }

        if (!PDFView.supportsPrinting) {
            document.getElementById('print').classList.add('hidden');
        }

        if (!PDFView.supportsFullscreen) {
            document.getElementById('fullscreen').classList.add('hidden');
        }

        if (PDFView.supportsIntegratedFind) {
            document.querySelector('#viewFind').classList.add('hidden');
        }

        // Listen for warnings to trigger the fallback UI.  Errors should be caught
        // and call PDFView.error() so we don't need to listen for those.
        PDFJS.LogManager.addLogger({
            warn: function () {
                PDFView.fallback();
            }
        });

        var mainContainer = document.getElementById('mainContainer');
        var outerContainer = document.getElementById('outerContainer');
        mainContainer.addEventListener('transitionend', function (e) {
            if (e.target == mainContainer) {
                var event = document.createEvent('UIEvents');
                event.initUIEvent('resize', false, false, window, 0);
                window.dispatchEvent(event);
                outerContainer.classList.remove('sidebarMoving');
            }
        }, true);

        document.getElementById('sidebarToggle').addEventListener('click',
          function () {
              this.classList.toggle('toggled');
              outerContainer.classList.add('sidebarMoving');
              outerContainer.classList.toggle('sidebarOpen');
              PDFView.sidebarOpen = outerContainer.classList.contains('sidebarOpen');
              PDFView.renderHighestPriority();
          });

        document.getElementById('viewThumbnail').addEventListener('click',
          function () {
              PDFView.switchSidebarView('thumbs');
          });

        document.getElementById('viewOutline').addEventListener('click',
          function () {
              PDFView.switchSidebarView('outline');
          });

        document.getElementById('previous').addEventListener('click',
          function () {
              PDFView.page--;
          });

        document.getElementById('next').addEventListener('click',
          function () {
              PDFView.page++;
          });

        document.querySelector('.zoomIn').addEventListener('click',
          function () {
              PDFView.zoomIn();
          });

        document.querySelector('.zoomOut').addEventListener('click',
          function () {
              PDFView.zoomOut();
          });

        document.getElementById('fullscreen').addEventListener('click',
          function () {
              PDFView.fullscreen();
          });

        document.getElementById('openFile').addEventListener('click',
          function () {
              document.getElementById('fileInput').click();
          });

        document.getElementById('print').addEventListener('click',
          function () {
              window.print();
          });

        document.getElementById('download').addEventListener('click',
          function () {
              PDFView.download();
          });

        document.getElementById('pageNumber').addEventListener('change',
          function () {
              PDFView.page = this.value;
          });

        document.getElementById('scaleSelect').addEventListener('change',
          function () {
              PDFView.parseScale(this.value);
          });

        document.getElementById('first_page').addEventListener('click',
          function () {
              PDFView.page = 1;
          });

        document.getElementById('last_page').addEventListener('click',
          function () {
              PDFView.page = PDFView.pdfDocument.numPages;
          });

        document.getElementById('page_rotate_ccw').addEventListener('click',
          function () {
              PDFView.rotatePages(-90);
          });

        document.getElementById('page_rotate_cw').addEventListener('click',
          function () {
              PDFView.rotatePages(90);
          });

        //#if (FIREFOX || MOZCENTRAL)
        //if (FirefoxCom.requestSync('getLoadingType') == 'passive') {
        //  PDFView.setTitleUsingUrl(file);
        //  PDFView.initPassiveLoading();
        //  return;
        //}
        //#endif

        //#if !B2G

        PDFView.open(file, 0);
        //#endif
    }); 
```

在调用 PDFView.open 之前必须先初始化系统！谢谢

# javascript - Grails 呈现内容动态访问 id 元素

> ID：14129184
> 
> 赞同：1
> 
> 时间：2013-01-02T21:07:57.760
> 
> 标签：javascript, jquery, ajax, grails, grails-2.0

AJAX 内容正在使用`remoteLink`表单内的函数呈现以填充手风琴（*只是一点背景信息*）。

`function attatchEmail(test)`双击 JQuery Accordion 小部件的每个段落内容时调用的。这就是运行该功能所发生的事情... [Screenshot of 1st alert](http://d.pr/i/ZI9R) & [Screenshot of 2nd alert](http://d.pr/i/G7hu)。

是否无法选择段落并从段落中获取内容，如下所示？

（我试过改成`.val`and `.html`。`.text`我也试过`$('#'+testingID)`）

**_form.GSP**

```
function attatchEmail(test) {
    $(document).ready(function()
    {
    var testingID = test.id;
    alert(testingID);
    var testingValue = $(testingID).val();
    alert(testingValue);
    });
}; 
```

**_contactListAjax.GSP**

```
<g:each in="${contactList}" status = "i" var="contact">
    <h3><a href="#">${contact.contactSurname +',  '+ contact.contactForename}</a></h3>
    <div><p id="contact${contact.id}" ondblclick="attatchEmail(this)">${'Email:  '+contact.email}</p></div>
</g:each> 
```

用尽了探索的途径，我敢肯定我以前做过这样简单的事情，完全没问题：/

**请看两张截图以获得更好的见解，谢谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:32:01.890

好吧，看起来您正在使用 jQuery，但看起来您并没有真正购买 jQuery 方法。如今，将行为与标记混合并不是真正的好习惯，尤其是在使用像 jQuery 这样的库时。我不确定您的确切问题，但我建议将其更改为以下内容：

```
<g:each in="${contactList}" status = "i" var="contact">
    <h3><a href="#">${contact.contactSurname +',  '+ contact.contactForename}</a></h3>
    <div><p class="contact-email" data-id="${contact.id}">${'Email: '+contact.email}</p></div>
</g:each>

$(function() {
   $("body").on("dblclick", ".contact-email", attachEmail);
});

function attatchEmail(event) {
   var $element = $(event.target);
   var id = $element.data("id");
}; 
```

[由于jQuery on](http://api.jquery.com/on/)函数的工作方式，这应该有助于解决动态渲染的任何问题。

# php - 使用会话变量加载更多

> ID：14129185
> 
> 赞同：0
> 
> 时间：2013-01-02T21:07:57.540
> 
> 标签：php, mysql, session

我的问题是使用 jQuery 自动刷新 div，但使用以下脚本来保持记录跟踪，所以如果用户单击 Load More 我会加载帖子，但 jQuery 刷新 div 的那一刻，它会重置为默认值，知道如何保留加载记录的数量

这是我尝试过的

```
if(isset($_POST['load_more'])) {
    $_SESSION['total_counter'] = $_SESSION['total_counter'] + 10;
    $fetch_messages = mysqli_query($connection, "SELECT tbl_chat.record_date, msg_from, message, user_pic, tbl_chat.id, tbl_chat.record_date, real_name FROM tbl_chat JOIN tbl_users ON msg_from = tbl_users.id ORDER BY id DESC LIMIT ".$_SESSION['total_counter']);
} else {
    $counter = 10;
    $_SESSION['total_counter'] = $counter;
    $fetch_messages = mysqli_query($connection, "SELECT tbl_chat.record_date, msg_from, message, user_pic, tbl_chat.id, tbl_chat.record_date, real_name FROM tbl_chat JOIN tbl_users ON msg_from = tbl_users.id ORDER BY id DESC LIMIT ".$_SESSION['total_counter']);
} 
```

刷新时会发生什么，它使用该`$counter`值并忘记加载更多会话值

详细代码

```
<?php
    require_once 'connection.php';
    require_once 'functions.php';
    if(!isset($_SESSION['logged_in']) || $_SESSION['logged_in'] == false) {
        header('Location: login.php');
        exit;
    }
    date_default_timezone_set("Asia/Calcutta");
?>
<!DOCTYPE html>
<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script type="text/javascript">
            jQuery(document).ready(function(){
                jQuery(".toggle_container").show();
                jQuery("div.question_trigger").click(function(){
                jQuery(this).toggleClass("active").next().toggle("slow");
                });
            });
        </script>
        <script type="text/javascript">
            var auto_refresh = setInterval(function() {
                  $('.messages').load('chat.php .messages', function(){
                       $(this).fadeIn("fast")
                  });
            }, 2000);
        </script>
    </head>
    <body>
        <?php
            require_once 'header.php';
            if($_SESSION['user_id'] == 1) {
                $clear_notifications = mysqli_query($connection, "UPDATE tbl_chat_notifications SET checked_first = 'yes' WHERE checked_first = ''");
            } elseif ($_SESSION['user_id'] == 2) {
                $clear_notifications = mysqli_query($connection, "UPDATE tbl_chat_notifications SET checked_second = 'yes' WHERE checked_second = ''");
            } elseif ($_SESSION['user_id'] == 3) {
                $clear_notifications = mysqli_query($connection, "UPDATE tbl_chat_notifications SET  checked_third = 'yes' WHERE checked_third = ''");
            }   
        ?>
        <div class="container">
            <form method="POST">
                <textarea name="messaging"></textarea>
                <input type="submit" value="Post" name="message_input" class="gen_button" />
            </form>
            <img src="smileys/smile.gif" /><a target="_blank" href="smileys_info.php"> Smileys Info</a>
            <br /><br />
            <?php
            if(isset($_POST['message_input'])) {
                $throw_error = array();
                if(isset($_POST['messaging']) && $_POST['messaging'] == '') {
                    $throw_error['msg_blank'] = "Message Cannot Be Blank";
                }

                if(empty($throw_error)) {
                    $message = nl2br(htmlspecialchars(mysqli_real_escape_string($connection, $_POST['messaging'])));
                    $date_time = date("Y-m-d H:i:s");
                    if(!mysqli_query($connection, "INSERT INTO tbl_chat (msg_from, message, record_date) VALUES('".$_SESSION['user_id']."', '$message', '$date_time')")) {
                        echo mysqli_error($connection);
                    }

                    if($_SESSION['user_id'] == 1) {
                        if (!mysqli_query($connection, "INSERT INTO tbl_chat_notifications (notification_of, checked_first) VALUES('".$_SESSION['user_id']."', 'yes')")) {
                            echo mysqli_error($connection);
                        } 
                    } elseif ($_SESSION['user_id'] == 2) {
                        if (!mysqli_query($connection, "INSERT INTO tbl_chat_notifications (notification_of, checked_second) VALUES('".$_SESSION['user_id']."', 'yes')")) {
                            echo mysqli_error($connection);
                        }
                    } elseif ($_SESSION['user_id'] == 3) {
                        if (!mysqli_query($connection, "INSERT INTO tbl_chat_notifications (notification_of, checked_third) VALUES('".$_SESSION['user_id']."', 'yes')")) {
                            echo mysqli_error($connection);
                        }
                    }
                    else {
                        header('Location: chat.php');
                        exit;
                    }
                }

                if(!empty($throw_error)) {
                    if(isset($throw_error['msg_blank'])) {
                        echo "<span class=\"red\">".$throw_error['msg_blank']."</span>";
                    }
                }
            }

            if(isset($_POST['load_more'])) {
                $_SESSION['total_counter'] = $_SESSION['total_counter'] + 10;
                $fetch_messages = mysqli_query($connection, "SELECT tbl_chat.record_date, msg_from, message, user_pic, tbl_chat.id, tbl_chat.record_date, real_name FROM tbl_chat JOIN tbl_users ON msg_from = tbl_users.id ORDER BY id DESC LIMIT ".$_SESSION['total_counter']);

            } else {
                $counter = 10;
                $_SESSION['total_counter'] = $counter;
                $fetch_messages = mysqli_query($connection, "SELECT tbl_chat.record_date, msg_from, message, user_pic, tbl_chat.id, tbl_chat.record_date, real_name FROM tbl_chat JOIN tbl_users ON msg_from = tbl_users.id ORDER BY id DESC LIMIT ".$_SESSION['total_counter']);
            }
            ?>
            <div class="messages">
            <?php
                while($throw_messages = mysqli_fetch_array($fetch_messages)) {
            ?>
            <div class="message_container">
                <div class="display_pic">
                    <img src="<?php echo $throw_messages['user_pic']; ?>" />
                </div>
                <div class="user_name">
                    <?php
                        echo $throw_messages['real_name'];
                    ?>
                </div>
                <div class="message"><?php smilies($throw_messages['message']); ?></div>
                <div class="msg_date_time"><?php echo explode_date_time($throw_messages['record_date']); ?></div>
            </div>
            <?php } ?>
            </div>
            <?php
                if(mysqli_num_rows($fetch_messages) > 9) {
            ?>
            <form method="POST">
                <input type="submit" value="Load More" name="load_more" />
            </form>
            <?php
                }
            ?>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:10:38.013

确保你有`session_start()`在你的脚本的顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:18:49.770

好的，我明白了，它正在重置页面加载时的计数器，因为我使用 tt 只是在提交表单时才添加值，`load_more`但由于它是由 jQuery 刷新的，它正在重置计数器值，这是正确的条件

```
if(!isset($_SESSION['total_counter'])) {
    $_SESSION['total_counter'] = 10;
}

if(isset($_POST['load_more'])) {
    $_SESSION['total_counter'] = $_SESSION['total_counter'] + 10;
    $fetch_messages = mysqli_query($connection, "SELECT tbl_chat.record_date, msg_from, message, user_pic, tbl_chat.id, tbl_chat.record_date, real_name FROM tbl_chat JOIN tbl_users ON msg_from = tbl_users.id ORDER BY id DESC LIMIT ".$_SESSION['total_counter']);
} else {
    $fetch_messages = mysqli_query($connection, "SELECT tbl_chat.record_date, msg_from, message, user_pic, tbl_chat.id, tbl_chat.record_date, real_name FROM tbl_chat JOIN tbl_users ON msg_from = tbl_users.id ORDER BY id DESC LIMIT ".$_SESSION['total_counter']);
} 
```

# powershell - powershell - 本地和远程执行之间的区别

> ID：14129186
> 
> 赞同：1
> 
> 时间：2013-01-02T21:08:03.530
> 
> 标签：powershell, invoke-command

我有一个非常简单的 powershell 脚本，它具有不同的行为，具体取决于我是通过 Invoke-Command / Enter-PSSession 在本地还是远程执行脚本。其他脚本工作正常。我想知道远程会话与本地会话的环境有什么不同会导致这种差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:00:30.783

假设远程端点设置为使用您的凭据，远程会话可能有一组不同的可用模块（或不同版本），可能有配置为远程会话运行的配置文件脚本，并且环境可能不同. 另请注意，远程端点可以配置为限制对命令（包括应用程序）的访问以及限制语言模式。脚本还可以遍历各种变量和函数以限制它们的可见性。如果您查看会话状态，您可以看到在配置远程端点时可以调整的一些属性，例如：

```
PS> $ExecutionContext.SessionState

Drive                         : System.Management.Automation.DriveManagementIntrinsics
Provider                      : System.Management.Automation.CmdletProviderManagementIntrinsics
Path                          : System.Management.Automation.PathIntrinsics
PSVariable                    : System.Management.Automation.PSVariableIntrinsics
LanguageMode                  : FullLanguage
UseFullLanguageModeInDebugger : False
Scripts                       : {*}
Applications                  : {*}
Module                        :
InvokeProvider                : System.Management.Automation.ProviderIntrinsics
InvokeCommand                 : System.Management.Automation.CommandInvocationIntrinsics 
```

[有关受约束端点](http://blogs.technet.com/b/heyscriptingguy/archive/2012/07/27/an-introduction-to-powershell-remoting-part-five-constrained-powershell-endpoints.aspx)的更多信息，请参阅本文。话虽如此，您很可能正在使用通常不受约束的默认端点。另一个区别可能是位数。例如，您可以在 x86 shell 中运行，但连接到 64 位端点，反之亦然。如果您需要连接到 32 位端点，请尝试以下操作：

```
PS> $s = New-PSSession -cn localhost -ConfigurationName microsoft.powershell32
PS> icm -Session $s { [IntPtr]::Size }
4
PS> Remove-PSSession $s 
```

# c# - 异步发信号通知主线程

> ID：14129187
> 
> 赞同：2
> 
> 时间：2013-01-02T21:08:08.267
> 
> 标签：c#, multithreading

我可能会做这一切都错了，但我被困住了。我有一个 GUI 应用程序，它产生一个单独的线程，从服务器下载一堆数据。当这个下载线程完成时，我希望它向主线程发送一个信号，以便它知道它现在可以显示下载的数据。

我尝试调用 Invoke（从我的主窗体）调用委托来完成显示工作，但这会阻塞我的下载器线程，直到它完成。我有点想只做一个没有 EndInvoke 的 BeginInvoke，但我知道这样做不合适。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T21:13:23.803

有几个选项。

我个人最喜欢的是使用 TPL。在您的 UI 线程上，您可以制作一个`TaskFactory`，如下所示：

```
// Given:
// TaskFactory uiFactory;

uiFactory = new TaskFactory(TaskScheduler.FromCurrentSynchronizationContext()); 
```

然后，在您的后台任务中，您可以创建一个`Task`来更新您的 UI：

```
var task = uiFactory.StartNew( () => UpdateUserInterface(data)); 
```

这将正确地编组到 UI 线程，类似于`BeginInvoke`调用。如果需要阻塞，可以调用`task.Wait()`（或者`task.Result`如果 Update 方法返回值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:17:56.177

有几种选择：

*   对于 WinForms，使用[Control.BeginInvoke 方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.begininvoke.aspx)。
*   对于 WPF，使用[Dispatcher.BeginInvoke 方法](http://msdn.microsoft.com/en-us/library/ms604730%28v=vs.110%29.aspx)。
*   “TPL 除了默认的调度器之外还有其他调度器，还允许您创建自定义调度器。TPL 提供的调度器之一是基于当前同步上下文的，它可用于确保我的任务在 UI 上执行线。” （[来源文章](http://blogs.msdn.com/b/csharpfaq/archive/2010/06/18/parallel-programming-task-schedulers-and-synchronization-context.aspx)）：

    ```
    var ui = TaskScheduler.FromCurrentSynchronizationContext();
    Task.Factory.ContinueWhenAll(tasks.ToArray(),
        result =>
        {
            var time = watch.ElapsedMilliseconds;
            label1.Content += time.ToString();
        }, CancellationToken.None, TaskContinuationOptions.None, ui); 
    ```

    在下载场景的情况下，`.ContinueWith()`继续是合适的。

# c++ - 此代码是否可以安全地将内存中的缓冲区作为文件打开？（代码似乎可以工作）

> ID：14129189
> 
> 赞同：0
> 
> 时间：2013-01-02T21:08:08.697
> 
> 标签：c++

> **可能重复：**
> [如何获取内存中缓冲区的文件描述符？](https://stackoverflow.com/questions/1558772/how-to-get-file-descriptor-of-buffer-in-memory)

我试图强制使用`FILE`类的库使用内存中的缓冲区而不是文件。`fmemopen`但是，我尝试了该库使用`fileno`它返回 -1 并导致库崩溃。所以我读到我需要一个文件描述符，我可以使用管道命令来制作一个。我不完全明白我做了什么，但我让它工作了。但是，我不知道我所做的是否真的安全。所以这里是代码：

```
int fstr[2];
pipe(fstr);
write(fstr[1], src, strlen(src));
close(fstr[1]);
FILE* file = fdopen( fstr[0], "r" ); 
```

那么这安全吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:11:15.447

改为使用[`fmemopen(3)`](http://www.kernel.org/doc/man-pages/online/pages/man3/fmemopen.3.html)。此功能已经为您方便地写入/读取内存缓冲区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T21:38:31.427

如果你真的需要一个文件句柄，这和我能想到的一样好。

您可能遇到的一个可能问题是管道的缓冲区大小是有限的。如果您的字符串大于缓冲区大小，`write(...)`则管道将阻塞，直到某些数据`read(...)`来自另一端。

理想情况下，您将有一个工作线程写入管道，但如果这不可能/太难，您可以通过[`fcntl(fd, F_SETPIPE_SZ, ...)`](http://www.kernel.org/doc/man-pages/online/pages/man2/fcntl.2.html).

# android - 在android开发中杀死并重新创建服务中的活动

> ID：14129190
> 
> 赞同：-2
> 
> 时间：2013-01-02T21:08:15.500
> 
> 标签：android, android-activity

我是android开发的新手。所以我需要帮助。

我想在电话状态响铃时显示一个活动，并在状态空闲或摘机时终止此活动。

所以我建立了一个类扩展广播接收器。我称 myphonestatelistener 类扩展了 PhoneStateListener 。我还创建了一个名为 ringingactivity 的活动。

这是我的代码（MyPhoneStateListener）：

```
public void onCallStateChanged(int state,String incomingNumber){

    switch(state)
    {
       case TelephonyManager.CALL_STATE_IDLE:
            Log.d("DEBUG", "IDLE");
            Intent killIntentidle = new Intent();
            killIntentidle.setAction("RingingOver") ;
            ctx.sendBroadcast(killIntentidle);                

            break;
       case TelephonyManager.CALL_STATE_OFFHOOK:
            Log.d("DEBUG", "OFFHOOK");    
            Intent killIntent = new Intent();
            killIntent.setAction("RingingOver") ;
            ctx.sendBroadcast(killIntent);      

            break;
       case TelephonyManager.CALL_STATE_RINGING:
           Log.d("DEBUG", "RINGING");    
           Intent dialogIntent = new Intent(ctx , RingingActivity.class) ;
           dialogIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
           ctx.startActivity(dialogIntent);            

           break;
    }
} 
```

在我的测试中，我从 telnet 调用模拟器，它在响铃时成功显示活动。当我接受或拒绝来电时，活动结束。但是当我再次调用模拟器时，无法再次重新创建活动。我在屏幕上看不到它。我究竟做错了什么？

这是我的活动代码：

公共类 RingingActivity 扩展 Activity {

```
BroadcastReceiver receiver = new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {
        finish();

    }   
};

@Override
protected void onCreate(Bundle savedInstanceState) 
{
       super.onCreate(savedInstanceState);
       setContentView(R.layout.ringing_activity);

       IntentFilter filter = new IntentFilter();

       filter.addAction("RingingOver");
       registerReceiver(receiver, filter);
       //registerReceiver(receiver,filter) ;

}

public void finish() {

    super.finish();        
}; 
```

}

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:38:12.397

我怀疑问题出在您的 MyPhoneStateListener 代码中。其他代码对我来说看起来不错。

一些你的 PhoneStateListener 下一次不活着的方式。您是否能够第二次看到“RINGING”日志？

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-03T20:09:49.310

非常感谢您的回复 Munish Katoch。我有一个解决方案，但不确定我是否找到了正确的解决方案。当我使用 Garbage Collecter 时，可以在每次调用的屏幕中看到活动。这是我的代码：

公共类 MyPhoneStateListener 扩展 PhoneStateListener {

```
Context ctx ;
private boolean iscalling ; 

MyPhoneStateListener(Context ctx)
{
    this.ctx = ctx ;
}

public void onCallStateChanged(int state,String incomingNumber){

    switch(state)
    {
       case TelephonyManager.CALL_STATE_IDLE:
            Log.d("DEBUG", "IDLE");
            if(iscalling == true)
            {
            Intent killIntentidle = new Intent();
            killIntentidle.setAction("RingingOver") ;
            ctx.sendBroadcast(killIntentidle);                
            System.gc() ;
            iscalling = false ;
            }
            break;
       case TelephonyManager.CALL_STATE_OFFHOOK:
            Log.d("DEBUG", "OFFHOOK");    
            if(iscalling == true)
            {                
            Intent killIntent = new Intent();
            killIntent.setAction("RingingOver") ;
            ctx.sendBroadcast(killIntent);      
            System.gc() ;
            iscalling = false ;
            }
            break;
       case TelephonyManager.CALL_STATE_RINGING:
           Log.d("DEBUG", "RINGING");
           iscalling = true ;
           Intent dialogIntent = new Intent(ctx , RingingActivity.class) ;
           dialogIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
           ctx.startActivity(dialogIntent);            
           System.gc() ;
           break;
    }
} 
```

}

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-03T22:21:59.237

我不确定您为什么需要调用垃圾收集器。请尝试解决根本原因，因为没有创建活动；有时。首先通过将日志放入 MyPhoneStateListener 和 RingingActivity 来分析问题。在 MyPhoneStateListener 中，在执行任何操作（启动/终止活动）之前打印 RingingActivity 活动的状态。

# node.js - 会话变量未存储在 node.js 中

> ID：14129191
> 
> 赞同：1
> 
> 时间：2013-01-02T21:08:16.010
> 
> 标签：node.js, session, express

我搜索并发现了很多将会话变量设置为未定义的类似问题，但我找到的答案似乎都不适用。

我的路由器文件中有这个功能：

```
exports.loginHandler = function(req, res){
    username = req.body.username;
    password = req.body.password;
    readAccount(username, function(acct){
        if (acct.password = password){
            req.session.username = username;
            console.log(username+' logged in'+' pass: '+acct.password);
        };
    });
    res.redirect('/');
}; 
```

console.log 执行得很好，并且 username 和 acct.password 都有适当的值。但是， req.session.username 最终被设置为未定义。

这是 readAccount 函数：

```
readAccount = function(user, callback){
    AM.login(user, function(acct){
        callback(acct);
    });
}; 
```

这是 AM.login：

```
exports.login = function(user, callback){
    accounts.findOne({username: user}, function(err, result){
    if (err) throw err;
    callback(result);
    })
} 
```

我猜会话变量不能在条件下设置，因为这种类型的错误似乎并不罕见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T21:37:31.190

问题是您正在重定向，这会在您设置`session.username`属性之前结束响应并保存会话。这是因为`readAccount`, 通过, 是异步的并且在被调用`accounts.findOne`之前不会完成。`res.redirect()`

`res.redirect()`您可以通过将 移动到`readAccount`回调中来确保它们的执行顺序：

```
exports.loginHandler = function(req, res){
    username = req.body.username;
    password = req.body.password;

    readAccount(username, function(acct){
        if (acct.password = password){
            req.session.username = username;
            console.log(username+' logged in'+' pass: '+acct.password);
        };

        res.redirect('/');
    });
}; 
```

此外，请注意`throw`异步操作中的 'ing 错误。回调将具有与起始函数不同的调用堆栈（例如`readAccount`），这使得`catch`错误变得困难。这就是为什么许多 Node API 将错误作为参数传递的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-23T06:35:04.120

其简短而简单的方法是在发送响应之前编写以下行。

res.locals.session = req.session;

并且您的会话将保存变量的值。

# c# - 文件信息创建时间。如何读取正确的值？

> ID：14129192
> 
> 赞同：1
> 
> 时间：2013-01-02T21:08:19.053
> 
> 标签：c#, asp.net, asyncfileupload, fileinfo

我在 .aspx 页面上有文件上传控件，我想一次上传一个位置并不总是相同的图像，可能与 .sln 在同一目录中，在桌面上，在任何地方。

我正在使用此代码来读取文件创建时间

```
string savePath = MapPath("~/" + Path.GetFileName(e.FileName));
FileInfo MyFileInfo = new FileInfo(savePath);

string dt = MyFileInfo.CreationTime.Day.ToString();
string mn = MyFileInfo.CreationTime.Month.ToString();
string yr = MyFileInfo.CreationTime.Year.ToString(); 
```

我注意到一件事

如果图像与网站位于同一文件夹中，它会为我提供所有正确的值

`dt`,`mn`和 `yr`

但如果它在那个位置之外，它总是每次都给我相同的价值

> {01/01/1601 00:00:00}

不知道如何解决这个问题？任何建议，有用的代码？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:12:56.203

看来您还不了解客户端/服务器障碍。来自客户端的路径在服务器上没有意义。

碰巧您的网站与客户端在同一台机器上运行，因为您正在本地调试。这只是一个巧合，它允许您的代码有时可以工作（巧合）。

通过忽略路径并从文件上传控件提供的流中读取来正确上传文件。文件上传只是到服务器的字节流。

# jquery - 试图延迟 JQuery 悬停功能

> ID：14129196
> 
> 赞同：1
> 
> 时间：2013-01-02T21:08:33.817
> 
> 标签：jquery

我有一个包含不同列表元素的导航栏，每当用户将鼠标悬停在元素上时，我都会尝试为每个元素调用不同的背景图像。我已经让它工作了，但是当我尝试更改代码以使图像淡入淡出时，我遇到了障碍。

这是我正在使用的 Javascript：

```
$(document).ready(function() {
    $("li").hover(
        function () {
            var navid = $(this).attr('id'); 
            $(this).addClass(navid);  
        },
        function () {
            var navid = $(this).attr('id'); 
            $(this).removeClass(navid);  }
    );
}); 
```

我已经尝试过 setTimeout 和转换，但没有任何运气。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:43:16.630

假设您想在悬停时将图像淡化为透明，并在鼠标离开时将其淡化为不透明。你会使用：

```
$(document).ready(function() {
    $("li").hover(
        function () {
            var navid = $(this).attr('id');
            $(this).addClass(navid);
            $(this).fadeTo('fast', 0);
        },
        function () {
            var navid = $(this).attr('id'); 
            $(this).removeClass(navid);
            $(this).fadeTo('fast', 1);
        }
    );
}); 
```

# fortran - 如何转到文件末尾？

> ID：14129197
> 
> 赞同：6
> 
> 时间：2013-01-02T21:08:33.037
> 
> 标签：fortran

我打开了一个文件来写一个数字。我必须在文件末尾写数字所以

怎么写到最后一行呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T21:22:29.113

你应该打开文件

```
open(..., position="append",...) 
```

或者，您可以查询文件的大小

```
inquire(...,size=some_integer_variable,...) 
```

那么如果文件是直接访问文件，就可以用这个大小来计算最终记录的记录数。或者，如果访问模式是“流”，您可以使用

```
write(..., pos=some_integer_variable) 
```

从文件末尾开始写入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:09:00.240

多年来我一直在使用相同的技巧，并且会对更优雅的方式感兴趣，但我可以向您推荐以下方法。请注意，随着文件行数的增加，它的效率越来越低。另请注意，这部分代码可能会出现在一个专门用于处理输入/输出的优雅模块中。

打开你的文件

```
open(11, file='monfichier') 
```

计算文件中有多少行

```
nbline = 0 ! should have been declared as an integer
do while(.true.)
  read(11,*,iostat=ios) ! ios should have been declared as an integer
  if( ios > 0 ) then
    stop 'problem somewhere'
  else if( ios < 0 ) then ! end of file is reached
    exit
  else
    nbline = nbline + 1
  end if
end do
close(11) 
```

在这一步，您将总行数存储在变量 nbline 中。如果你想在最后一行之前的第 N 行打印一些东西，那么

```
open(11, file='monfichier')
do i = 1, nbline - N ! see my nota bene at the end of my answer; i and N are integers
  read(11,*)
end do
write(11,*)'hello world' 
```

等等瞧！

注意：请注意计算 nbline-N 或 nbline-(N-1) 的方式，具体取决于您想要什么。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-08-19T19:58:15.833

程序示例 IMPLICIT NONE INTEGER :: ierr

OPEN(UNIT=13,FILE="ex.dat") 调用 FSEEK(13, 0, 2, ierr) ！做任何你想做的事

CLOSE(13) 结束程序示例

对 fseek 的调用转到文件的末尾（这样使用，检查用法[http://docs.oracle.com/cd/E19957-01/805-4942/6j4m3r8ti/index.html](http://docs.oracle.com/cd/E19957-01/805-4942/6j4m3r8ti/index.html)）

# php - 按钮单击时的随机图像

> ID：14129201
> 
> 赞同：1
> 
> 时间：2013-01-02T21:09:00.200
> 
> 标签：php, javascript, ajax, image, random

我的代码有一点问题，它应该从我的 mysql 数据库中获取所有图片名称。然后当我点击按钮时，它应该给我下一张图片，依此类推，但它只适用于第一张图片和第二张图片。

```
include_once 'connect.php';

$place="upload/";
$first = mysql_query("SELECT * FROM images ORDER BY RAND()");

while($wor = mysql_fetch_array($first))
{
    $id=$wor['id'];
    $name = $wor['name'];
    $image = $place . $wor['name'];
}

$number="1";
$wrongnumber="2";
$r = mysql_query("SELECT * FROM images ORDER BY RAND()");
echo '<script> ';

while($wor = mysql_fetch_array($r))
{
    $id=$wor['id'];
    $name = $wor['name'];
    $images = $place . $wor['name'];
    $number=$number + 1;
    $wrongnumber=$wrongnumber + 1;

    echo 'function ' . 'changeSrc' . $number . '() '; ?>

{
    document.getElementById("rand").src="<? echo $images;?>";
    document.getElementById("button").onclick="changeSrc<? echo $wrongnumber;?>()";
}

<?
}
?> 

</script>
<img id="rand" src="<? echo $image;?>"><br>
<input id="button" type="button" onclick="changeSrc2()" value="Change image"> 
```

这是输出代码：

```
<script> function changeSrc2() {
document.getElementById("rand").src="upload/1329614460tumblr_lqd5m3svzy1qg7sdjo1_500- 450x299.jpg";
document.getElementById("button").onclick="changeSrc3";
}
function changeSrc3() {
document.getElementById("rand").src="upload/1349616418121.jpg";
document.getElementById("button").onclick="changeSrc4";
}
function changeSrc4() {
document.getElementById("rand").src="upload/1329614513beuty_ass_by_boobsaplenty-500x375.jpg";
document.getElementById("button").onclick="changeSrc5";
}
function changeSrc5() {
document.getElementById("rand").src="upload/1329614538tumblr_lqunpmqwkw1qd33kzo1_500-450x690.jpg";
document.getElementById("button").onclick="changeSrc6";
}
function changeSrc6() {
document.getElementById("rand").src="upload/1349619307women_panties.jpg";
document.getElementById("button").onclick="changeSrc7";
}
function changeSrc7() {
document.getElementById("rand").src="upload/1339140972sandy-marina-soccer-01.jpg";
document.getElementById("button").onclick="changeSrc8";
}
function changeSrc8() {
document.getElementById("rand").src="upload/1329614576tumblr_lsz0k0MLhT1qd33kzo1_500-450x495.jpg";
document.getElementById("button").onclick="changeSrc9";
}
function changeSrc9() {
document.getElementById("rand").src="upload/1329614539tumblr_lsaixi0igS1qd33kzo1_500-450x674.jpg";
document.getElementById("button").onclick="changeSrc10";
}
function changeSrc10() {
document.getElementById("rand").src="upload/1349619990tumblr_lrqx1vESE51qhatv8o1_500.jpg";
document.getElementById("button").onclick="changeSrc11";
}

</script>
<img id="rand" src="upload/1329614520daily_erotic_picdump_70-500x677.jpg"><br>
<input id="button" type="button" onclick="changeSrc2()" value="Change image"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:20:14.070

对于初学者来说很好

```
<input id="button" type="button" onclick="changeSrc2()" value="Change image"> 
```

onclick 属性被硬编码为始终 changeSrc2() 函数，因此始终仅从第一张图像更改为第二张图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T21:19:53.327

在设置 onclick 处理程序时尝试删除括号，如下所示：

```
 document.getElementById("button").onclick=changeSrc<? echo $wrongnumber;?>; 
```

根据规范，onclick 不应包含括号 - [https://developer.mozilla.org/en-US/docs/DOM/element.onclick](https://developer.mozilla.org/en-US/docs/DOM/element.onclick)

# asp.net - 我的 Web 应用程序需要 ssl 吗？

> ID：14129203
> 
> 赞同：0
> 
> 时间：2013-01-02T21:09:03.203
> 
> 标签：asp.net, iis, ssl

我有一个应用程序，其结构如下：Web 应用程序 - WCF 服务 - 数据库

所有与数据库的通信都通过 WCF 服务进行，Web 应用程序无法直接与数据库通信。我需要在数据传输时对其进行保护，因此我在本地计算机上设置 SSL 以在 IIS 中对其进行测试和配置，因此现在必须使用 HTTPS 访问 WCF 服务。但是，我没有将我的 Web 应用程序设置为使用 HTTPS，可以吗？我认为由于 WCF 服务正在完成所有数据传输，因此它是唯一需要 HTTPS 的服务。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:20:10.873

如果您对加密数据感兴趣，则需要确保它在应用程序的所有层上都经过加密传递。根据您的描述，从用户传递到 WebApplication 本身的数据似乎是未加密的，因此以明文形式传递。这意味着任何“监听”您的用户和 Web 应用程序之间流量的人都可以拦截数据。

我建议在 Web 应用程序上也添加 SSL，以确保您的数据通过应用程序的所有 3 层加密传递。

# css - Moodle a.logo css位置

> ID：14129204
> 
> 赞同：-2
> 
> 时间：2013-01-02T21:09:05.953
> 
> 标签：css, location, moodle, graphical-logo

我刚刚在我的服务器上安装了 Moodle。我找不到带有徽标调整的 css 文件的位置！Firebug 显示“[server_name]/theme/styles.php/afterburner/[some_number]/all”，因为 afterburner 是默认模板。它在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:12:07.007

所有主题，包括 afterburner 主题都可以在 Moodle 根目录下的 /theme 目录中找到。

可以在此处找到加力主题和控制徽标的样式表：

主题/加力/样式/afterburner_styles.css

# c# - 指定的表不存在

> ID：14129205
> 
> 赞同：0
> 
> 时间：2013-01-02T21:09:09.847
> 
> 标签：c#, sql, xml, windows-phone-7, hyperlink

我正在寻找这个问题的答案。我不知道问题出在哪里。Visual Studio 没有发现任何问题或错误，但是当我运行程序并尝试向数据库添加内容时，应用程序崩溃并且 VS 告诉我我的表不存在。该事件是为了添加一些东西。

这是我的代码：

```
private void addBtn_Click(object sender, RoutedEventArgs e)
{
        using (WpisyDataContext BazaDanych = new WpisyDataContext(strConnectionString))
        {
            if (!BazaDanych.DatabaseExists())
            {
                BazaDanych.CreateDatabase();
                MessageBox.Show("BazaDanych Database Created Successfully!!!");
            }

            Wpis newWpis = new Wpis
            {

                RecordID = index_box.Text,
                NameRec = name_box.Text.ToString(),
                BeneficiaryRec = beneficiary_box.Text.ToString(),
                PriceRec = price_box.Text.ToString(),
                DeadlineRec = deadline_box.Text.ToString(),
                DescriptionRec = description_box.Text.ToString()
            };

            BazaDanych.Wpisy.InsertOnSubmit(newWpis);
            BazaDanych.SubmitChanges();
            MessageBox.Show("Recoed Added Successfully!!!");
            if (NavigationService.CanGoBack)
            {
                NavigationService.GoBack();
            } 
        }  
    }
} 
```

这是表格代码（`Wpis.cs`）：

```
using System.Data.Linq.Mapping;
namespace ********
{
    [Table]
    public class Wpis
    {
        [Column(IsPrimaryKey = true, IsDbGenerated = true)]
        public string RecordID
        {
            get;
            set;
        }
        [Column(CanBeNull = true)]
        public string NameRec
        {
            get;
            set;
        }
        [Column(CanBeNull = true)]
        public string BeneficiaryRec
        {
            get;
            set;
        }
        [Column(CanBeNull = true)]
        public string PriceRec
        {
            get;
            set;
        }
        [Column(CanBeNull = true)]
        public string DeadlineRec
        {
            get;
            set;
        }
        [Column(CanBeNull = true)]
        public string DescriptionRec
        {
            get;
            set;
        }
    }
} 
```

这是数据上下文 ( `WpisyDataContext.cs`)：

```
using System.Data.Linq;

namespace *************
{
    public class WpisyDataContext : DataContext
    {
        public WpisyDataContext(string connectionString)
            : base(connectionString)
        {
        }
        public Table<Wpis> Wpisy
        {
            get
            {
                return this.GetTable<Wpis>();
            }
        }
    }
} 
```

这是连接字符串：

```
public static string strConnectionString = @"Data Source=isostore:/DevDB.sdf"; 
```

拜托各位，我已经没有耐心了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:15:52.560

使用时`CreateDatabase()`，请检查.Net是否已将数据库表创建为您的Entity。因为 EntityFramework 使用复数名称创建表，而实体是使用单数名称创建的。

检查创建的表名是否符合预期。

# box-api - 有没有办法使用 /tokens 资源为用户获取现有令牌？

> ID：14129211
> 
> 赞同：1
> 
> 时间：2013-01-02T21:09:28.067
> 
> 标签：box-api

是否可以使用“/tokens”资源为用户获取现有令牌？

目前，如果存在令牌，则 POST 返回 409：

请求：POST [https://api.box.com/2.0/tokens](https://api.box.com/2.0/tokens) 正文：{"email":"some-email-a-token-exist-for@email.com"}

响应： {"type":"error","status":409,"code":"conflict","help_url":"http://developers.box.com/docs/#errors","message": "令牌已经存在","re​​quest_id":"1568559050e4a10f78f66"}

我想做的是发出一个 GET 请求来检索现有的令牌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:53:06.703

如您所知，/tokens 端点仍处于测试阶段。尽管 Box 在 12 月以 GA 形式发布了 V2 API 的其余部分，但该端点仍在开发中。我们正在与一些开发人员合作，以确保我们获得易于使用且安全的“即时访问”机制。

如果您想加入我们的 /tokens 咨询小组，请通过 api (at) box.com 告诉我们。

# html - 数据源上具有 500 多个值的 KendoUI 折线图是延迟加载的

> ID：14129212
> 
> 赞同：0
> 
> 时间：2013-01-02T21:09:29.783
> 
> 标签：html, telerik, kendo-ui

我正在使用 Web Dataviz 包中的 Kendo UI 折线图来生成 500+ 的图表。但是图的负载太懒了。生成图表大约需要 25 秒。

我使用类别轴的日期和带有 odata 数据源的系列的十进制值。

我可以优化图表的加载时间吗？

```
$("#chart").kendoChart({
                theme: $(document).data("kendoSkin") || "default",
                dataSource: {
                    type: "odata",
                    transport: {
                        read: crudServiceBaseUrl + "/Odata/TestODataService.svc/EGauges"
                    },                      
                    serverFiltering: true,
                    serverSorting: true,
                    sort: { field: "DateData", dir: "asc"},
                    filter: [                       
                        {field: "From", operator: "eq", value: 422 },//400+
                        { field: "Id", operator: "eq", value: parseInt(id) },
                        { field: "Intervalo", operator: "eq", value: 23 },
                        { field: "Tipo", operator: "eq", value: 'm' }
                    ],
                title: {
                    text: ""
                },
                legend: {                       
                    position: "bottom"
                },
                seriesDefaults: {
                    type: "area"
                },
                series: [{
                    field: "Value",
                    name: "Value"
                }],
                categoryAxis: {
                    field: "DateData",
                    labels: {
                        visible: false,
                        rotation: -90
                    }
                },
                axisDefaults: {
                    visible: true,
                    majorGridLines: { visible: false }
                },
                tooltip: {
                    visible: true                       
                }
            }); 
```

以下是 odata 服务返回数据的方式：

```
jQuery1704278529312834345_1357310335401({"d" : {
 "results": [
 {
     "__metadata": {
     "uri": "http://localhost/Prosol.Web/Odata/TestODataService.svc/EGauges(18)", 
     "type": "TestOpenErpInterfaz.Web.TestEntityDataSource_EGauge"
  },
 "EGaugeID": 18, 
 "From": 422, 
 "Id": 18, 
 "Tipo": "m", 
 "Intervalo": 23, 
 "DateData": "\/Date(1357310820000)\/", 
 "Value": "3.72", 
 "TotalKw": "0", 
 "TotalCosto": "0.00", 
 "TotalKwGen": "203.23999999999999999999999999", 
 "TotalCostoGen": "16.259199999999999999999999999", 
 "FechaDisplay": "Ene 4, 2013 14:47"
},........
], "__count": "421"
}
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:30:04.627

最后我使用 FlotCharts，由于某种原因，KendoUI Chart 加载数据非常懒惰......我使用 Kendo Ui Datasource 从 Web 服务读取数据并加载到 FloatChart...

[http://www.flotcharts.org/](http://www.flotcharts.org/)

这是简单、快速且免费的软件

# php - jQuery.msgBox() 插件。如何将数据发送到 /users/login 以登录用户

> ID：14129214
> 
> 赞同：0
> 
> 时间：2013-01-02T21:09:45.073
> 
> 标签：php, jquery, cakephp

我正在尝试使用以下 jQuery 插件（[jQuery.msgBox()](http://jquerymsgbox.ibrahimkalyoncu.com/)）来执行登录到 CakePHP 站点，但我很困惑如何将数据提交到我的 php 函数以进行登录并在登录成功或显示时重定向如果不成功，则发送消息。我将不胜感激任何帮助。

这是我用来显示隐藏登录框的 jQuery 函数，当用户按下键盘上的 INSERT 键时。

```
jQuery(document).bind('keydown', 'insert', function(e) {
    //alert(e.keyCode);
        $.msgBox({
            type: "prompt",
            title: "Administrator Log In",
            opacity: 0.7,
            inputs: [
                { header: "User Name", type: "text", name: "username" },
                { header: "Password", type: "password", name: "password" },
                //{ header: "Remember me", type: "checkbox", name: "rememberMe", value: "theValue" }
    ],
            buttons: [
                { value: "Login" }, {value:"Cancel"}],
            success: function (result, values) {
                var v = result + " has been clicked\n";
                $(values).each(function (index, input) {
                    v += input.name + " : " + input.value + 
                    (input.checked != null ? (" - checked: " + input.checked) : "") + "\n";         
                });
                alert(v); // for testing purposes. Insert login code below
                // =======================================================

                // =======================================================
            }
        });     
}); 
```

我最终改变了 vortextangent 的答案，但这是基于他的答案。见下文.....

==================================================== ========================================

```
 jQuery(document).bind('keydown', 'insert', function(e) {
    //alert(e.keyCode);
        $.msgBox({
            type: "prompt",
            title: "Administrator Log In",
            opacity: 0.7,
            inputs: [
                { header: "User Name", type: "text", name: "data[User][username]" },
                { header: "Password", type: "password", name: "data[User][password]" },
                //{ header: "Remember me", type: "checkbox", name: "rememberMe", value: "theValue" }
    ],
            buttons: [
                { value: "Login" }, {value:"Cancel"}],
            success: function (result, values) {
                var v = result + " has been clicked\n";
                $(values).each(function (index, input) {
                    v += input.name + " : " + input.value + 
                    (input.checked != null ? (" - checked: " + input.checked) : "") + "\n";         
                });
                //alert(v);
        $.ajax({
        url: "/users/login",
        type: "post",
        data: values,
        success: function(responseText, statusText, xhr, $form){ // Trigger when request was successful
            //responseLogin
            if(responseText == "Success")   {
            window.location.href = '/users/account';
            }else{
            //alert("Wrong credentials. Please try again...");
            $.msgBox({
                title: "Login Error",
                content: "Wrong credentials. Please try again...",
                type: "error",
                buttons: [{ value: "Ok" }]
            });
            }
        }
        });
            }
        });     
}); 
```

==================================================== ========================================

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:56:35.967

使用[jQuery ajax 方法。](http://api.jquery.com/jQuery.ajax/)

```
jQuery(document).bind('keydown', 'insert', function(e) {
//alert(e.keyCode);
    $.msgBox({
        type: "prompt",
        title: "Administrator Log In",
        opacity: 0.7,
        inputs: [
            { header: "User Name", type: "text", name: "username" },
            { header: "Password", type: "password", name: "password" },
            //{ header: "Remember me", type: "checkbox", name: "rememberMe", value: "theValue" }
],
        buttons: [
            { value: "Login" }, {value:"Cancel"}],
        success: function (result, values) {
            var v = result + " has been clicked\n";
            $(values).each(function (index, input) {
                v += input.name + " : " + input.value + 
                (input.checked != null ? (" - checked: " + input.checked) : "") + "\n";         
            });
            alert(v); // for testing purposes. Insert login code below
            // =======================================================
            $.ajax({
                url: "yourloginscript.php",
                type: "post",
                data: values,
                success: function(){ // Trigger when request was successful
                    window.location.href = 'somewhere'
                },
                error: function(request, error, errormessage) { // Show error
                    $("#error").html(error + '\n' + errormessage);
                },
                complete: otherFunction // When request is completed -no matter if the error or not
            });
            // =======================================================
        }
    });     
}); 
```

# ajax - JQueryUI Slider 初始值达到最大值

> ID：14129216
> 
> 赞同：0
> 
> 时间：2013-01-02T21:10:14.397
> 
> 标签：ajax, jquery-ui, slider

我的页面中有几个滑块，我创建它们的方式如下：

```
$(".slider").each(function () {
            var actualVal=$(this).attr("data-val");
            var maxVal=$(this).attr("data-max");

            $(this).slider({
                range: "min",
                min: 1,
                animate: true,
                max: maxVal,
                slide: function (event, ui) {
                    //Action 1...
                },
                change: function (event, ui) {
                    //Action 2...
                },
                value: actualVal,
            });
        }); 
```

问题是滑块经常达到最大值，而不是我最初定义的值。

这是否适用于任何人？

我已经尝试过最初打电话：

```
$(this).slider("destroy"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:42:05.777

好的...我终于找到了问题...我通过属性获取值，并且该值未被视为整数...

使用 ParseInt 将其作为整数工作得很好......

# maven - 来自 Eclipse 的 Maven 错误

> ID：14129218
> 
> 赞同：1
> 
> 时间：2013-01-02T21:10:19.860
> 
> 标签：maven

在更新该项目之前，我有一个在 Eclipse 3.4.2 中运行良好的 maven 项目。

```
OS:  Windows XP, SP2
Maven:  maven-2.2.1
Java:   jdk1.6.0_17

Eclipse: 3.4.2
m2e:     0.9.8 
```

当我从 Eclipse 执行以下操作时：（1）maven clean，然后（2）maven install；

安装失败。这是日志的一部分。

```
 [INFO] Installing C:\DLiao\Archive_Reconciler\R18\app\target\tsi-apex-reconciler-app-1.0.18.jar to C:\Documents and Settings\DLiao\.m2\repository\net\transolutions\apex\tsi-apex-reconciler-app\1.0.18\tsi-apex-reconciler-app-1.0.18.jar
    [INFO] ------------------------------------------------------------------------
    [INFO] Building Transolutions Apex Reconciler Web Application
    [INFO] 
    [INFO] Id: net.transolutions.apex:tsi-apex-reconciler-web:war:1.0.18
    [INFO] task-segment: [install]
    [INFO] ------------------------------------------------------------------------
    [INFO] [resources:resources]
    [INFO] Using default encoding to copy filtered resources.
    [INFO] [compiler:compile]
    [INFO] No sources to compile
    [INFO] [resources:testResources]
    [INFO] Using default encoding to copy filtered resources.
    [INFO] [compiler:testCompile]
    [INFO] No sources to compile
    [INFO] [surefire:test]
    [INFO] No tests to run.
    [INFO] [war:war]
    [INFO] Packaging webapp
    [INFO] Assembling webapp[tsi-apex-reconciler-web] in [C:\DLiao\Archive_Reconciler\R18\web\target\tsi-apex-reconciler-web-1.0.18]
    [INFO] Processing war project
    [INFO] 
    [INFO] 
    [INFO] ------------------------------------------------------------------------
    [INFO] Reactor Summary:
    [INFO] ------------------------------------------------------------------------
    [INFO] Transolutions Apex Reconciler ......................... SUCCESS [0.672s]
    [INFO] Transolutions Apex Reconciler Data Layer .............. SUCCESS [1.672s]
    [INFO] Transolutions Apex Reconciler Render Service Client ... SUCCESS [0.188s]
    [INFO] Transolutions Apex Reconciler Application Layer ....... SUCCESS [1.250s]
    [INFO] Transolutions Apex Reconciler Web Application ......... FAILED [1.718s]
    [INFO] ------------------------------------------------------------------------
    [ERROR] 

    *The following mojo encountered an error while executing:
    Group-Id: org.apache.maven.plugins
    Artifact-Id: maven-war-plugin
    Version: 2.1-alpha-1
    Mojo: war
    brought in via: packaging: war

    While building project:
    Group-Id: net.transolutions.apex
    Artifact-Id: tsi-apex-reconciler-web
    Version: 1.0.18
    From file: C:\DLiao\Archive_Reconciler\R18\web\pom.xml
    Reason: Failed to copy file for artifact[active project artifact:
        artifact = net.transolutions.apex:tsi-apex-reconciler-app:jar:1.0.18:compile;
        project: MavenProject: net.transolutions.apex:tsi-apex-reconciler-app:1.0.18 @ C:\DLiao\Archive_Reconciler\
R18\app\pom.xml]*

[INFO] ------------------------------------------------------------------------
[INFO] For more information, run with the -e flag
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILED
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 5 seconds
[INFO] Finished at: Wed Jan 02 14:14:19 CST 2013
[INFO] Final Memory: 3M/20M
[INFO] ------------------------------------------------------------------------ 
```

但是，如果我从 DOS 命令行（Java JDK 1.6.0_17）运行 **mvn clean install** ，一切都很好，并且 .war 罚款部署在我的 ~/m2/...

这是来自命令行的日志文件。

```
[INFO] Installing C:\DLiao\Archive_Reconciler\R18\app\target\tsi-apex-reconciler
-app-1.0.18.jar to C:\Documents and Settings\DLiao\.m2\repository\net\transoluti
ons\apex\tsi-apex-reconciler-app\1.0.18\tsi-apex-reconciler-app-1.0.18.jar
[INFO] ------------------------------------------------------------------------
[INFO] Building Transolutions Apex Reconciler Web Application
[INFO]    task-segment: [clean, install]
[INFO] ------------------------------------------------------------------------
[INFO] [clean:clean {execution: default-clean}]
[INFO] Deleting directory C:\DLiao\Archive_Reconciler\R18\web\target
[INFO] [resources:resources {execution: default-resources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 5 resources
[INFO] [compiler:compile {execution: default-compile}]
[INFO] No sources to compile
[INFO] [resources:testResources {execution: default-testResources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory C:\DLiao\Archive_Reconciler\R18\web\s
rc\test\resources
[INFO] [compiler:testCompile {execution: default-testCompile}]
[INFO] No sources to compile
[INFO] [surefire:test {execution: default-test}]
[INFO] No tests to run.
[INFO] [war:war {execution: default-war}]
[INFO] Packaging webapp
[INFO] Assembling webapp[tsi-apex-reconciler-web] in [C:\DLiao\Archive_Reconcile
r\R18\web\target\tsi-apex-reconciler-web-1.0.18]
[INFO] Processing war project
[INFO] Copying webapp resources[C:\DLiao\Archive_Reconciler\R18\web\src\main\web
app]
[INFO] Webapp assembled in[1110 msecs]
[INFO] Building war: C:\DLiao\Archive_Reconciler\R18\web\target\tsi-apex-reconci
ler-web-1.0.18.war
[INFO] [install:install {execution: default-install}]
[INFO] Installing C:\DLiao\Archive_Reconciler\R18\web\target\tsi-apex-reconciler
-web-1.0.18.war to C:\Documents and Settings\DLiao\.m2\repository\net\transoluti
ons\apex\tsi-apex-reconciler-web\1.0.18\tsi-apex-reconciler-web-1.0.18.war
[INFO]
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] ------------------------------------------------------------------------
[INFO] Transolutions Apex Reconciler ......................... SUCCESS [1.172s]
[INFO] Transolutions Apex Reconciler Data Layer .............. SUCCESS [2.406s]
[INFO] Transolutions Apex Reconciler Render Service Client ... SUCCESS [0.328s]
[INFO] Transolutions Apex Reconciler Application Layer ....... SUCCESS [3.547s]
[INFO] Transolutions Apex Reconciler Web Application ......... SUCCESS [10.282s]

[INFO] ------------------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESSFUL
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 17 seconds
[INFO] Finished at: Wed Jan 02 11:23:10 CST 2013
[INFO] Final Memory: 49M/254M
[INFO] ------------------------------------------------------------------------ 
```

有什么建议，请指教。

谢谢戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:22:33.143

父 POM 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

        <modelVersion>4.0.0</modelVersion>
        <properties>
            <reconciler.version>1.0.19</reconciler.version>
            <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        </properties>

        <groupId>net.transolutions.apex</groupId>
        <artifactId>tsi-apex-reconciler</artifactId>
        <version>1.0.19</version>
        <packaging>pom</packaging>

        <name>Transolutions Apex Reconciler</name>
        <description>Update and reimplementation of the classic reconciler web application.</description>

    <modules>
      <module>data</module>
      <module>app</module>
      <module>web</module>
      <module>render-service</module>
    </modules>

    <build>
        <defaultGoal>install</defaultGoal>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <verbose>true</verbose>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
            </plugin>

        </plugins>
    </build>

    <repositories>
        <repository>
            <id>spring-snapshots</id>
            <name>Spring Portfolio Snapshot Repository</name>
            <url>http://s3.amazonaws.com/maven.springframework.org/snapshot</url>
        </repository>        
        <repository>
            <id>maven.org</id>
            <name>Maven 2 Repository</name>
            <url>http://repo2.maven.org/maven2/</url>
        </repository>
        <repository>
            <id>jboss-maven2</id>
            <name>JBoss Maven 2 Repository</name>
            <url>http://repository.jboss.org/nexus/content/groups/public/</url>
        </repository>
        <repository>
            <id>java.net</id>
            <name>Java.net Maven Repository</name>
            <url>https://maven-repository.dev.java.net/nonav/repository/</url>
        </repository>        
    </repositories>
</project> 
```

我的 Web 项目的 POM 文件，它会生成错误消息。

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <parent>
        <groupId>net.transolutions.apex</groupId>
        <artifactId>tsi-apex-reconciler</artifactId>
        <version>1.0.19</version>
    </parent>

    <modelVersion>4.0.0</modelVersion>

    <groupId>net.transolutions.apex</groupId>
    <artifactId>tsi-apex-reconciler-web</artifactId>
    <packaging>war</packaging>

    <name>Transolutions Apex Reconciler Web Application</name>
    <description>Web application that assembles the data layer and application layer.</description>

    <properties>
        <icefaces.version>1.8.1</icefaces.version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>net.transolutions.apex</groupId>
            <artifactId>tsi-apex-reconciler-app</artifactId>
            <version>${project.version}</version>
        </dependency>
        <dependency>
            <groupId>org.icefaces</groupId>
            <artifactId>icefaces</artifactId>
            <version>${icefaces.version}</version>
            <exclusions>
                <exclusion>
                    <groupId>javax.servlet</groupId>
                    <artifactId>servlet-api</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>javax.el</groupId>
                    <artifactId>el-api</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.icefaces</groupId>
            <artifactId>icefaces-facelets</artifactId>
            <version>${icefaces.version}</version>
            <exclusions>
                <exclusion>
                    <groupId>javax.el</groupId>
                    <artifactId>el-api</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.icefaces</groupId>
            <artifactId>icefaces-comps</artifactId>
            <version>${icefaces.version}</version>
        </dependency>
        <dependency>
            <groupId>com.oracle</groupId>
            <artifactId>ojdbc14</artifactId>
            <version>10.2.0.3.0</version>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>maven-jetty-plugin</artifactId>
                <version>6.1.9</version>
                <configuration>
                    <contextPath>/reconciler</contextPath>
                    <connector implementation="org.mortbay.jetty.nio.SelectChannelConnector">
                        <port>8080</port>
                        <maxIdleTime>3600000</maxIdleTime>
                    </connector>
                    <systemProperties>
                        <property>
                            <name>slf4j</name>
                            <value>false</value>
                        </property>
                        <property>
                            <name>log4j.configuration</name>
                            <value>file:${basedir}/src/main/webapp/WEB-INF/classes/log4j.properties</value>
                        </property>
                        <property>
                            <name>catalina.home</name>
                            <value>${basedir}/target/</value>
                        </property>
                        <property>
                            <name>catalina.base</name>
                            <value>${basedir}/target/</value>
                        </property>
                    </systemProperties>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>tomcat-maven-plugin</artifactId>
                <configuration>
                    <url>http://192.168.56.1:8080/manager/text</url>
                    <server>TomcatServer</server>
                    <path>/tsi-apex-reconciler-web-1.0.18</path>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <profiles>
        <profile>
            <id>TEST</id>
            <build>
                <plugins>
                    <plugin>
                        <artifactId>maven-antrun-plugin</artifactId>
                        <executions>
                            <execution>
                                <phase>prepare-package</phase>
                                <goals>
                                    <goal>run</goal>
                                </goals>
                                <configuration>
                                    <tasks>
                                        <delete
                                            file="${project.build.outputDirectory}/environment.properties" />
                                        <copy file="src/main/resources/environment.test.properties"
                                            tofile="${project.build.outputDirectory}/environment.properties" />
                                    </tasks>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <plugin>
                        <artifactId>maven-jar-plugin</artifactId>
                        <executions>
                            <execution>
                                <phase>package</phase>
                                <goals>
                                    <goal>jar</goal>
                                </goals>
                                <configuration>
                                    <classifier>test</classifier>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>PROD</id>
            <build>
                <plugins>
                    <plugin>
                        <artifactId>maven-antrun-plugin</artifactId>
                        <executions>
                            <execution>
                                <phase>process-resources</phase>
                                <goals>
                                    <goal>run</goal>
                                </goals>
                                <configuration>
                                    <tasks>
                                        <delete file="${project.build.outputDirectory}/PROD.jdbc.properties" />
                                        <delete file="${project.build.outputDirectory}/PROD.jdbc.properties" />
                                        <delete file="${project.build.outputDirectory}//TEST.renderer.properties" />
                                        <delete file="${project.build.outputDirectory}//TEST.renderer.properties" />
                                        <delete file="${project.build.outputDirectory}/jdbc.properties" />
                                        <copy file="src/main/resources/PROD.jdbc.properties"
                                            tofile="${project.build.outputDirectory}/jdbc.properties" />
                                        <delete file="${project.build.outputDirectory}/renderer.properties" />
                                        <copy file="src/main/resources/PROD.renderer.properties"
                                            tofile="${project.build.outputDirectory}/renderer.properties" />
                                    </tasks>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>

</project> 
```

希望这些会有所帮助。

最好的，戴夫

# ruby - 使用 ruby 解析新对象中的数组哈希

> ID：14129220
> 
> 赞同：0
> 
> 时间：2013-01-02T21:10:32.547
> 
> 标签：ruby, arrays, json, object, hash

我正在努力处理一些内部带有哈希的数组。我想将它们解析成一个新对象，但不知道该怎么做。

这是数据：

```
[
  {
    "name"  => "itemHref",
    "value" => "https://192.168.75.145:8281/api/workflows/16da1fa1-7c8b-4602-8d53-17fc5e1fa3ff/"
  },
  {
    "name"  => "id",
    "value" => "16da1fa1-7c8b-4602-8d53-17fc5e1fa3ff"
  },
  {
    "name"  => "categoryName",
    "value" => "FinanzInformatik"
  },
  {
    "name"  => "canExecute",
    "value" => "true"
  },
  {
    "name"  => "categoryHref",
    "value" => "https://192.168.75.145:8281/api/catalog/System/WorkflowCategory/ff8080813b90a145013b90cac51b0006/"
  },
  {
    "name"  => "description",
    "value" => "bekommt alle VMs"
  },
  {
    "name"  => "name",
    "value" => "getAllVms"
  },
  {
    "name"  => "type",
    "value" => "Workflow"
  },
  {
    "name"  => "canEdit",
    "value" => "true"
  }
] 
```

而且，这是我的代码：

```
require 'rest-client'
require 'json'

class Workflow
  def initialize(itemHref, id, categoryName, canExecute, categoryHref, description, name, type, canEdit)
    @itemHref = itemHref
    @id = id
    @categoryName = categoryName
    @canExecute = canExecute
    @categoryHref = categoryHref
    @description = description
    @name = name
    @type = type
    @canEdit = canEdit
  end
end

json_string = RestClient.get( "http://vcoadmin:vcoadmin@192.168.75.145:8280/api/workflows", :content_type => 'application/json', :accept => 'application/json')
parsed = JSON.parse(json_string)

parsed.each do |a, b|
 if(b.class == Array)
  b.flatten.each do |c|
   p c['attributes']
   #c['attributes'].each
  {
    |f| p f['name'], f['value'] }
  end
 end
end 
```

如何将哈希值放入对象中？我根据值的标识符“名称”来考虑一些事情。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:18:59.893

假设不应更改属性的顺序：

```
Workflow.new(*parsed.map {|attr| attr['value']}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:56:53.263

我将实现一个可以用哈希初始化的 PORO。因此，您可以将哈希直接传递给创建工作流。

可以看到一个例子：http: [//pullmonkey.com/2008/01/06/convert-a-ruby-hash-into-a-class-object/](http://pullmonkey.com/2008/01/06/convert-a-ruby-hash-into-a-class-object/)

# java - 在 Java 中查找剪贴板图像的格式

> ID：14129221
> 
> 赞同：4
> 
> 时间：2013-01-02T21:10:35.047
> 
> 标签：java, image, clipboard, image-formats

我正在使用此从剪贴板获取图像：

```
if(Toolkit.getDefaultToolkit().getSystemClipboard().isDataFlavorAvailable(DataFlavor.imageFlavor)){
       ImageIcon IMG = new ImageIcon((BufferedImage) Toolkit.getDefaultToolkit().getSystemClipboard().getData(DataFlavor.imageFlavor));
} 
```

现在我想使用`ImageIO.write`;将此图像保存在磁盘中
如何找到要在`ImageIO.write`as中使用的图像格式（JPG、PNG、GIF、...） `formatName`？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:55:48.520

通过检查时剪贴板内容的 MIME 类型

```
.isDataFlavorAvailable(DataFlavor.imageFlavor) 
```

是[image/x-java-image](http://docs.oracle.com/javase/6/docs/api/java/awt/datatransfer/DataFlavor.html#imageFlavor)（但[操作系统供应商不需要遵循剪贴板的 MIME 类型](http://books.google.de/books?id=Ojk25QoiTrYC&pg=PA403&lpg=PA403&dq=clipboard+mimetype+java&source=bl&ots=RJ4lX3VEON&sig=75UmRnqnR_sLuqwnoC58YWZ6KyM&hl=en&sa=X&ei=V6fkULT3C8XhtQaCgIGoCg&redir_esc=y#v=onepage&q=clipboard%20mimetype%20java&f=false)）。

我发现了两种从剪贴板获取图像并将其写入文件的方法：

1.  使用这篇博文中的帮助方法：[使用 Java 从 Mac OS X 剪贴板获取图像的噩梦](http://blog.pengoworks.com/index.cfm/2008/2/8/The-nightmares-of-getting-images-from-the-Mac-OS-X-clipboard-using-Java)。

    ```
    Clipboard clip = Toolkit.getDefaultToolkit().getSystemClipboard()

    ImageIcon IMG = new ImageIcon((BufferedImage)    
    clip.getData(DataFlavor.imageFlavor));
    BufferedImage bImage = getBufferedImage(IMG.getImage());
    ImageIO.write(bImage, "png", new File("/tmp/test.png")); 
    ```

    该`getBufferedImage`方法如下所示：

    ```
    public static BufferedImage getBufferedImage(Image img) {
        if (img == null) {
            return null;
        }
        int w = img.getWidth(null);
        int h = img.getHeight(null);
        // draw original image to thumbnail image object and 
        // scale it to the new size on-the-fly 
        BufferedImage bufimg = new BufferedImage(w, h, 
            BufferedImage.TYPE_INT_RGB);
        Graphics2D g2 = bufimg.createGraphics();
        g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION,
            RenderingHints.VALUE_INTERPOLATION_BILINEAR);
        g2.drawImage(img, 0, 0, w, h, null);
        g2.dispose();
        return bufimg;
    } 
    ```

2.  通过可转让。请注意，这在 OS X 上运行，但会生成正确大小的空图像：

    ```
    Clipboard clip = Toolkit.getDefaultToolkit().getSystemClipboard()
    Transferable content =
        clip.getContents(null);
    BufferedImage img = (BufferedImage) content.getTransferData(
        DataFlavor.imageFlavor);
    ImageIO.write(img, "png", new File("/tmp/test.png")); 
    ```

# ruby-on-rails-3 - Rails 3：使用提交按钮更新模型属性

> ID：14129225
> 
> 赞同：0
> 
> 时间：2013-01-02T21:10:49.860
> 
> 标签：ruby-on-rails-3, button, radio-button

我有一个用户模型，其中包含一个带有布尔值的“电子邮件切换”列。我想在我的视图中创建一个按钮，允许用户“打开”和“关闭”他们的电子邮件。我无法获得提交按钮来更新用户模型中的值。

```
 <%= form_for :user do |f| %>
        <label>On</label>
        <%= f.radio_button :email_switch, true %>
        <label>Off</label>
        <%= f.radio_button :email_switch, false %>
        <%= f.submit "Save", :controller => "dashboard_emails", :action => "update", :method => "put" %>
    <% end %>

class DashboardEmailsController < ApplicationController
  before_filter :require_user

  def index
  end

  def update

  end

  private

  def require_user
    @user = @logged_in_user
  end

class User
  field :email_switch, type: Boolean, default: false
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:26:22.690

您需要将参数传递给`form_for`不`f.submit`调用。如果您分配了一个持久用户，`@user`您应该能够执行以下操作：

```
<%= form_for @user do |f| %>
    <label>On</label>
    <%= f.radio_button :email_switch, true %>
    <label>Off</label>
    <%= f.radio_button :email_switch, false %>
    <%= f.submit "Save" %>
<% end %> 
```

当然，你需要`resources :users`在你`config/routes.rb`的让这个工作。然后这应该向 发送一个 PUT 请求`/users/47`，这反过来会触发`#update`您的操作`UsersController`

# php - 使用php设置的正确语法 属性

> ID：14129234
> 
> 赞同：0
> 
> 时间：2013-01-02T21:11:46.397
> 
> 标签：php, html, css, echo

我需要使用 PHP 设置一个 div 的背景颜色。这是我目前正在做的事情：

```
<div class="box" style="background-color:"<?php echo $permacolour; ?>""> 
```

但是，这是行不通的。我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T21:12:36.500

```
<div class="box" style="background-color:<?=$permacolour?>"> 
```

引号不属于 PHP 语法。PHP 标签是`<?`,`<?php`并且`?>`仅

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T21:14:08.283

```
style="background-color:"<?php echo $permacolour; ?>"" 
```

你在这里有两组报价。试试这个：

```
style="background-color:<?php echo $permacolour; ?>" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-02T21:15:37.407

要靠近您的原始帖子，正确的方法是：

```
<div class="box" style="background-color: <?php echo $permacolour; ?>"> 
```

问题是您正在编写用双引号括起来的背景颜色。结果就像

```
<div class="box" style="background-color:"red""> 
```

代替

```
<div class="box" style="background-color: red"> 
```

因此，只需删除您可以使用的值之间的双引号即可。

当然，这假设您已定义`$permacolour`或确保在`$permacolour`用户输入的情况下对 的值进行清理和过滤。

@your-common-sense 的答案基于在托管服务器上并不总是激活的速记语法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T21:46:32.093

```
<div class="box" style="background-color:<?php echo $permacolour; ?>;"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T12:36:22.743

删除双引号

```
style="<?php echo $permacolour ; ?>" 
```

对于 html 中的某些版本，或者根本没有引号会更容易

```
style=<?php echo $permacolor ;?> 
```

# scala - 什么是 => 在 Scala 中调用？

> ID：14129237
> 
> 赞同：10
> 
> 时间：2013-01-02T21:11:48.910
> 
> 标签：scala

我知道`=>`在 Scala 中用于函数文字，意思是“将左边的东西转换为右边的东西”。但是这个符号实际上叫什么？等于，暗示，lambda？什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-02T21:35:21.090

我记得在某处读过“火箭”这个词，可能是在Dean Wampler 和 Alex Payne所著的[*Programming Scala中。*](http://ofps.oreilly.com/titles/9780596155957/)我[在论坛上找到了 Bill Venners 的相关答案](http://www.artima.com/forums/flat.jsp?forum=282&thread=239168&start=0&msRange=100)：

> 不久前我问马丁奥德斯基他怎么称呼它，他说“右箭头”。几个月前，Ron Hitchens 向我建议了“子弹”这个名字。我在这里和那里使用过，但它似乎并没有坚持下去。大约 2 周前，我问了一些 Ruby 人他们怎么称呼它，他们说“哈希火箭”。“hash”的原因是 Ruby 使用它来将键映射到值，即 Ruby 中的“key => value”就像 Scala 中的“key -> value”（但在 Ruby 中没有类型），当然 -> 在 Scala 中是一个库抽象，而不是语言的一部分。
> 
> 所以我建议我们称之为“火箭”。它比子弹更刺激，更不暴力，我们可以在其中放置一个形容词来区分 Scala 中的各种用途：匿名函数中有“函数火箭”，匹配表达式或偏函数中的 case 子句中可能有“案例火箭” ， ETC。

所以奥德斯基使用的“官方”术语是*“右箭头”*。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-02T22:16:06.107

也通常称为“胖箭”

更新：哦，我刚刚注意到 Paolo Falabella 在上面的评论中提到了它。无论如何，在这里有一个正确的答案也一样好，因为“胖箭头”确实是一个非常常见的名称。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-02T21:38:48.883

在 Scala 文档（[Java 程序员的 Scala 教程](http://docs.scala-lang.org/tutorials/scala-for-java-programmers.html)）中，它被称为`right arrow`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-25T09:03:39.203

在`Programming in Scala`Martin Odersky、Lex Spoon、Bill Venners 的书中，它被称为**右箭头**或**Rcket**

=>（右箭头，或“火箭”）

*   在函数字面量中，68

*   在导入语句中，270–271

*   在自我类型中，563

*   在比赛替代品中，164

*   在这个混叠中，659

# php - 删除所有已回显的内容

> ID：14129238
> 
> 赞同：-3
> 
> 时间：2013-01-02T21:11:52.893
> 
> 标签：php

> **可能重复：**
> [如何在 PHP 中清除以前回显的项目](https://stackoverflow.com/questions/1057986/how-to-clear-previously-echoed-items-in-php)

我有这个代码：

```
<?php

$var = true;
echo 'testing';

if ($var)
{
    echo 'Hey'; //The only thing that should appear.
}
?> 
```

我该怎么做才能让“嘿”出现在网站上？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T21:14:45.367

不用太复杂......您可以将输出分配给变量并覆盖它。

```
$var = true;
$output = 'testing';

if($var)
{
    $output = 'Hey';
}

echo $output; 
```

或者，（更复杂的路线），您可以使用缓冲区。研究[`ob_start`](http://php.net/ob_start)以开始了解这一点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-02T21:14:39.070

您可以使用输出缓冲：

```
<?php
ob_start();
$var = true;
echo "testing";
if($var) {
    ob_clean();
    echo "Hey";
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-02T21:15:17.593

你不能，因为它已经打印出来了。

这是一个替代解决方案

```
<?php
   $var = true;
   if($var)
       echo "Hey";
   else
       echo "testing"
?> 
```

# android - 在开发使用 Wi-Fi Direct 的 Android 应用程序时，我应该使用哪个目标 SDK？

> ID：14129240
> 
> 赞同：0
> 
> 时间：2013-01-02T21:12:06.040
> 
> 标签：android, eclipse, sdk, build, wifi-direct

我目前在项目构建目标的 Android 4.1 上。我的问题是我有两个要开发的 HTC One V。这些目前运行 4.0。

我想我有 2 个选项中的 1 个。任何一个：

*将构建目标设置为 Android 2.2（唯一可用的其他 Android 版本 - 为什么要这样跳跃？）。但是，这会在我当前的代码中导致很多带有红色下划线的错误。Wi-Fi 直连最低要求 4.0。

*将 HTC One V 升级到 4.1。这是可能的吗？这样做有什么缺点吗？

哪个是更好的选择，为什么？

更新：

好的，所以快速搜索显示 One V 无法升级到 4.0 以上：

[http://www.theinquirer.net/inquirer/news/2224379/htc-one-v-wont-get-android-41-jelly-bean](http://www.theinquirer.net/inquirer/news/2224379/htc-one-v-wont-get-android-41-jelly-bean)

真可惜。现在我不知道该怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:32:24.237

啊。我现在明白问题所在了。尽管在 manifest 中设置了 min SDK 和 target SDK，但仍然需要在项目属性中设置构建目标。我很困惑为什么我只有 2.2 和 4.1 可用。现在我意识到可以从 Android SDK Manager 下载更多内容。这意味着我能够下载 4.0 并将其设置为构建目标。我的应用程序现在可以放在 HTC One V 上。

我想我最初只安装了 2.2 和 4.1，因为 android 文档推荐我只做最早和最新推荐的。总之，吸取教训！

# python - 在 python 中使用 windows shell '>' 将输出重定向到文本文件

> ID：14129251
> 
> 赞同：2
> 
> 时间：2013-01-02T21:13:06.417
> 
> 标签：python, windows, shell

在我的 python 脚本中，我试图运行一个打印输出的 Windows 程序。但我想将该输出重定向到文本文件。我试过

```
 command = 'program' + arg1 + ' > temp.txt'
     subprocess.call(command) 
```

其中 program 是我的程序名称，而 arg1 是它需要的参数。但它不会将输出重定向到文本文件它只是将其打印在屏幕上。

谁能帮助我如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T21:18:04.147

将文件对象传递给 的`stdout`参数`subprocess.call()`：

```
with open('myoutfilename', 'w') as myoutfile:
    subprocess.call(cmd, stdout=myoutfile) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-02T21:16:42.707

你可以`shell=True`在`subprocess.call`

但是，一个（很多）更好的方法是：

```
command = ['program',arg1]
with open('temp.txt','w') as fout:
    subprocess.call(command,stdout=fout) 
```

这从整个事物中删除了外壳，使其更加独立于系统，并且还使您的程序免受“外壳注入”攻击（考虑`arg1='argument; rm -rf ~'`或任何 Windows 等效项）。

上下文管理器（`with`语句）是一个好主意，因为它保证您的文件对象在您离开“上下文”时被正确刷新和关闭。

请注意，如果您不使用`shell=True`（`subprocess.Popen`或类似）类，则应将参数作为列表而不是字符串传递，这一点很重要。这样，您的代码将更加健壮。如果你想使用字符串，python 提供了一个方便的函数`shlex.split`来将字符串拆分为参数，就像你的 shell 一样。例如：

```
 import subprocess
 import shlex
 with open('temp.txt','w') as fout:
     cmd = shlex.split('command argument1 argument2 "quoted argument3"'
     #cmd = ['command', 'argument1', 'argument2', 'quoted argument3']
     subprocess.call(cmd,stdout=fout) 
```

# sql - 仅获取 vb6 记录集的列定义（元数据）

> ID：14129253
> 
> 赞同：1
> 
> 时间：2013-01-02T21:13:29.423
> 
> 标签：sql, vb6, recordset

在构建用于将记录插入我们的 SQL Server 数据库的记录集时，有一个先例来执行 SELECT，因为 WHERE 子句将不返回任何行。然后将在提交回数据库之前填充此空白记录集。这样做的目的是获取客户端的列定义。

例子：

```
SELECT * From TableA where key_column = 0 
```

在对数据库进行跟踪时，我注意到此方法执行两个语句：

一个获取列元数据的...

```
SET FMTONLY ON SELECT * From TableA where key_column = 0 SET FMTONLY OFF 
```

...然后是我们想要的原始选择。

考虑到我们只想要元数据，有没有办法在 VB6 中构建 Recordset 时只运行第一条语句？

（我知道使用 INSERT 语句而不是记录集将是最有效的。）

# javascript - 显示长复选框单击事件的进度

> ID：14129257
> 
> 赞同：0
> 
> 时间：2013-01-02T21:14:06.973
> 
> 标签：javascript, jquery

在检查它将触发对服务器的长时间调用时，我有一个复选框。我想在用户等待呼叫时显示旋转的 .gif 图像，但图像未显示。下面是我的代码片段：

```
$('#chk').click(function () {
        $('span.progress-indicator').show(); //the gif image

        $.ajaxSetup({ asynch: false});

        LongServerCallMethod(); 

        $('span.progress-indicator').hide(); //the gif image
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:38:46.683

将 long 方法调用放在 setTimeout 中，让浏览器有时间首先呈现 gif。但是，您会注意到，由于浏览器被您的异步调用锁定，微调器不会旋转。解决这个问题的唯一方法是不使用`async: false`.

```
setTimeout(function(){
    LongServerCallMethod();

    $('span.progress-indicator').hide(); //the gif image
},0); 
```

如果你有时间，你真的应该重写不使用的代码，`async: false`因为时间是唯一可能阻止你将`async: false`代码转换为`async: true`

# android - 将布局分为两部分，模拟时钟和列表视图。安卓

> ID：14129259
> 
> 赞同：0
> 
> 时间：2013-01-02T21:14:09.120
> 
> 标签：android, xml, android-layout, listview

我想首先将布局划分为两个部分，我只有一个模拟时钟，第二个我想要一个列表视图。

xml文件；

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <AnalogClock
        android:id="@+id/analogClock1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <include
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        layout="@layout/day_plan" />

</LinearLayout> 
```

包括布局的xml；

```
 <?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/countryTextView" 
   android:layout_width="fill_parent"
   android:layout_height="wrap_content" 
   android:padding="8dp"
   android:textSize="20sp" 
   android:textColor="@android:color/white"
   android:minHeight="?android:attr/listPreferredItemHeight"
   android:gravity="center_vertical"/> 
```

我想在这个时钟下显示一个列表，其中包含我来自数据库的事件：

```
public class Clock extends ListActivity {

    public static final String ROW_ID = "row_id";
     private ListView conListView;
     private CursorAdapter conAdapter;
     public String opis;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.morning_clock);
        conListView=getListView();
        conListView.setOnItemClickListener(viewConListener);

        AnalogClock ac = (AnalogClock) findViewById(R.id.analogClock1);

        // map each name to a TextView
        String[] from = new String[] { "event" };
        int[] to = new int[] { R.id.countryTextView };
        conAdapter = new SimpleCursorAdapter(Clock.this, R.layout.morning_clock, null, from, to);
        setListAdapter(conAdapter); // set adapter

    }

        @Override
        protected void onResume() 
        {
           super.onResume();  
           new GetEvents().execute((Object[]) null);
         } 

        @Override
        protected void onStop() 
        {
           Cursor cursor = conAdapter.getCursor();

           if (cursor != null) 
              cursor.deactivate();

           conAdapter.changeCursor(null);
           super.onStop();
        }    

        private class GetEvents extends AsyncTask<Object, Object, Cursor> 
        {
           DatabaseConnector dbConnector = new DatabaseConnector(Clock.this);

           @Override
           protected Cursor doInBackground(Object... params)
           {
               Intent a = getIntent();
               String d_m_y = a.getStringExtra("d_m_y");
              dbConnector.open();
              return dbConnector.getdate(d_m_y); 
           } 

           @Override
           protected void onPostExecute(Cursor result)
           {
              conAdapter.changeCursor(result); // set the adapter's Cursor
              dbConnector.close();
           } 
        } 

        @Override
        public boolean onCreateOptionsMenu(Menu menu) 
        {
           super.onCreateOptionsMenu(menu);
           MenuInflater inflater = getMenuInflater();
           inflater.inflate(R.menu.dayplan_menu, menu);
           return true;
        }   

        @Override
        public boolean onOptionsItemSelected(MenuItem item) 
        {
           Intent addEvent = new Intent(Clock.this, AddEvent.class);
           startActivity(addEvent);
           return super.onOptionsItemSelected(item);
        }

        OnItemClickListener viewConListener = new OnItemClickListener() 
        {
           public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) 
           {         
              Intent viewEvent = new Intent(Clock.this, ViewEvent.class);
              viewEvent.putExtra(ROW_ID, arg3);

              startActivity(viewEvent);
           }
        };    

    } 
```

我得到错误：

```
 01-02 21:57:50.645: E/AndroidRuntime(1047): FATAL EXCEPTION: main

01-02 21:57:50.645: E/AndroidRuntime(1047): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.examples.android.calendar/com.examples.android.calendar.Clock}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'

01-02 21:57:50.645: E/AndroidRuntime(1047):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)

01-02 21:57:50.645: E/AndroidRuntime(1047):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)

01-02 21:57:50.645: E/AndroidRuntime(1047):     at android.app.ActivityThread.access$600(ActivityThread.java:130)

01-02 21:57:50.645: E/AndroidRuntime(1047):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)

01-02 21:57:50.645: E/AndroidRuntime(1047):     at android.os.Handler.dispatchMessage(Handler.java:99)

01-02 21:57:50.645: E/AndroidRuntime(1047):     at android.os.Looper.loop(Looper.java:137)

01-02 21:57:50.645: E/AndroidRuntime(1047):     at android.app.ActivityThread.main(ActivityThread.java:4745)

01-02 21:57:50.645: E/AndroidRuntime(1047):     at java.lang.reflect.Method.invokeNative(Native Method)

01-02 21:57:50.645: E/AndroidRuntime(1047):     at java.lang.reflect.Method.invoke(Method.java:511)

01-02 21:57:50.645: E/AndroidRuntime(1047):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)

01-02 21:57:50.645: E/AndroidRuntime(1047):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)

01-02 21:57:50.645: E/AndroidRuntime(1047):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:15:47.287

如果你想使用listactivity，你使用的布局必须有一个id为@android/list的listview

[在此处](http://developer.android.com/reference/android/app/ListActivity.html)查看文档

在您的示例中

```
<ListView android:id="@android:id/list"
           android:layout_width="match_parent"
           android:layout_height="match_parent"
           android:background="#00FF00"
           android:layout_weight="1"
           android:drawSelectorOnTop="false"/> 
```

所以你真的需要一个*ListView*而 不是你的*textview**`android:id="@android:id/list"`*

# ios - 我可以在 iOS 5+ 的可滚动元素上强制滚动条吗？

> ID：14129260
> 
> 赞同：1
> 
> 时间：2013-01-02T21:14:13.447
> 
> 标签：ios, css, safari

我正在使用溢出：滚动；在移动和桌面访问者可以看到的页面上，并且运行良好。然而，可滚动元素上没有滚动条，因此用户甚至可能没有意识到他们应该滚动。

以这个 html 为例：

```
<p style="height: 200px; width: 50%; margin-left: 25%; border: 1px solid #ccc; overflow: scroll;"> asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf asdfasdf  </p> 
```

这是一个 jsFiddle：http: [//jsfiddle.net/tfQDB/](http://jsfiddle.net/tfQDB/)

该元素是完全可滚动的，但没有视觉指示器，即使在滚动时也是如此。我是否必须放置一些图像来向用户表明可以滚动，或者有没有办法强制 iOS 显示它自己的滚动条？

# android - 为什么不同的活动在android中显示为单独的应用程序

> ID：14129261
> 
> 赞同：2
> 
> 时间：2013-01-02T21:14:17.763
> 
> 标签：android, eclipse

我正在 android 中创建一个 Jigsaw Puzzle 应用程序。我创建了两个活动，activity_jigsaw.xml 和 activity_level.xml。默认情况下会创建一个活动（显示 Hello World！），我按照以下步骤修改并创建了一个新活动：

```
File -> New -> Other -> Android Activity 
```

但是当我安装应用程序时，这两个文件（以及应用程序的所有其他活动）被安装为一个单独的项目。但同时它们也是相互关联的。文件的Java代码如下：

Jisaw.java 文件包含：

```
public class Jigsaw extends Activity {

    Intent intent;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_jigsaw);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_jigsaw, menu);
        return true;
    }

    public void play(View v)
    {
        try
        {
            intent = new Intent(this, Level.class);
            startActivity(intent);
        }

        catch(Exception e)
        {
            e.printStackTrace();
        }
    }
} 
```

这里的 Play 是一个在单击图像时调用的函数。

Level.java 文件包含：

```
public class Level extends Activity {

    Intent intent;
    String level = "";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_level);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_level, menu);
        return true;
    }

    public void easy(View v)
    {
        level = "easy";
        intent = new Intent(this, Play.class);
        intent.putExtra("level", level);
        startActivity(intent);
    }

    public void medium(View v)
    {
        level = "medium";
        intent = new Intent(this, Play.class);
        intent.putExtra("level", level);
        startActivity(intent);

    }

    public void hard(View v)
    {
        level = "hard";
        intent = new Intent(this, Play.class);
        intent.putExtra("level", level);
        startActivity(intent);

    }
} 
```

当单击相应的图像时，将调用函数 easy、medium 和 hard。

有人可以告诉我我做错了什么吗？

提前致谢..

这是清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.maju.jigsawpuzzle"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.SET_WALLPAPER" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".Jigsaw"
            android:label="@string/title_activity_jigsaw" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Level"
            android:label="@string/title_activity_level" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Play"
            android:label="@string/title_activity_play" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".PlayBoard"
            android:label="@string/title_activity_play_board" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T21:26:39.833

您可能正在为 AndroidManifest.xml 中的所有活动定义 android.intent.category.LAUNCHER 意图类别，它会在应用启动器中创建一个图标。除 main 之外的活动不应具有此意图过滤器。

做这样的事情：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity android:name=".JigSaw" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".Level" />
    <activity android:name=".Play" />
    <activity android:name=".Playboard" />
</application> 
```

**编辑：** 正如您刚刚发布的那样，您确实在这样做，只需从其他活动中删除意图过滤器。

# version-control - Mercurial 停止跟踪并忽略

> ID：14129263
> 
> 赞同：8
> 
> 时间：2013-01-02T21:14:27.810
> 
> 标签：version-control, mercurial, atlassian-sourcetree

说到 Mercurial；

以下之间究竟有什么区别：

*   停止跟踪
*   忽视

谷歌搜索，SE 搜索没有提供关于此事的明确示例/结果。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-02T21:34:10.860

一般来说，由于不清楚您在什么情况下遇到这些术语：

*   [**Ignore**](http://hgbook.red-bean.com/read/file-names-and-pattern-matching.html#id382104)将文件名模式添加到`.hgignore`文件中。这意味着任何匹配该模式的文件都不会受到版本控制***，除非**它们已经被添加*（通过`hg add`或`hg addrem`）。因此，任何已经是存储库一部分的文件都不会受到`.hgignore`.

*   [**停止跟踪**](http://hgbook.red-bean.com/read/mercurial-in-daily-use.html#id361518)([`hg remove`或`hg forget`](https://stackoverflow.com/a/1101902/1106367)) 表示 Mercurial 不会记录对文件所做的任何更改，并且该文件将不再是存储库的一部分。如果文件仍然存在于文件系统中，它将显示为`?`（未跟踪）。此操作在下一次提交时生效，*而不是立即生效*。

# xml - 如何找到一个值并替换 XSL/XML 中的值？

> ID：14129264
> 
> 赞同：1
> 
> 时间：2013-01-02T21:14:29.510
> 
> 标签：xml, xslt-1.0

我有文档 .XML：

```
...
...
< memberValuePairs >
    < member path="Blabla">bla bla< /member >
    < member path="Zzzz">zz z z zzz< /member >
    < member path="word">my text< /member >
< /memberValuePairs >
...
... 
```

我需要将标签“word”的值替换为“我的另一个文本”。我有来自命令的文件 XML：`< xsl:copy >`但我不知道如何查找和替换标记的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:00:39.713

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="member[@path='word']/text()[1]">
  <xsl:text>my another text</xsl:text>
 </xsl:template>
</xsl:stylesheet> 
```

**应用时（我*假设*是源 XML 文档）**：

```
<memberValuePairs>
    <member path="Blabla">bla bla</member>
    <member path="Zzzz">zz z z zzz</member>
    <member path="word">my text</member>
</memberValuePairs> 
```

**产生想要的正确结果**：

```
<memberValuePairs>
   <member path="Blabla">bla bla</member>
   <member path="Zzzz">zz z z zzz</member>
   <member path="word">my another text</member>
</memberValuePairs> 
```

# php - 会话变量不定期增加

> ID：14129267
> 
> 赞同：-1
> 
> 时间：2013-01-02T21:14:40.260
> 
> 标签：php, jquery, session, session-variables, session-cookies

我正在开发一个智能手机网络应用程序，它是一个使用 jquerymobile API 的问答游戏。当用户单击作为锚标记的下一个按钮时，我切换到其他页面并增加 $_SESSION['questionNo'] 值。问题是 $_SESSION['questionNo'] 值从 1 增加到 4，然后再次变为 $_SESSION['questionNo'] 为 1。为什么会这样，我不知道。这是我的代码

```
<?php session_start();
include("connect.php");
include("header1.php");

$attemp=$_SESSION['questionNo'];
echo $attemp;
$sql = sprintf("select * from question order by pk_id ASC limit %s,%s",$attemp,1);
$result = mysql_query($sql) or die(mysql_error());
$result2=mysql_fetch_array($result);
?>

<div data-role="page" id="group">
<div class="main">
<div id="header2" class="clearfix">
<table  border="0" width="100%" id="table">

<tr><td colspan="5"><hr></td></tr>
<tr>
<td colspan="2" id="menu_button1">
    <a href="reset.php" rel="external">Reset</a>
</td>

<td align="center">
    Score : 50%
</td>
<td>&nbsp;</td>
<td id="menu_button2">
    <a href="test.php" rel="external">Next</a>
</td>
</tr> 
```

 **```
-------------
test.php page
-------------
<!DOCTYPE html> 
<html> 
<head> 
    <title>My Page</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link href="css/style.css" media="handheld, screen" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="../css/jquery.mobile-1.0a1.min.css"/>
    <script src="jquery-1.4.3.min.js"></script>
    <script src="jquery.mobile-1.0a2.min.js"></script>
    <script src="jquery-1.8.2.min.js"></script>
</head> 
<body> 

<div data-role="page">

    <div data-role="header">
        <h1>My Title</h1>
    </div>

    <div data-role="content">   
        <?php 
            ++$_SESSION['questionNo'];
            header('Location:startGame.php');
            exit;
        ?>      
    </div><!-- /content -->

</div><!-- /page -->

</body> 
```

谁能告诉我为什么 $_SESSION['questionNo'] 没有定期增加？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:20:53.597

使用 session_start()：

```
<?php 
session_start();
++$_SESSION['questionNo'];
header('Location:startGame.php');
exit;
?> 
```**

# android - R.styleable、R.style 和 R.attr 有什么区别？

> ID：14129269
> 
> 赞同：20
> 
> 时间：2013-01-02T21:14:48.933
> 
> 标签：android

R.styleable、R.style 和 R.attr 有什么区别？我在所有这三个类中都找到了 TextAppearance。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-04-05T19:24:28.290

`R.style`具有 android 提供的所有样式（包括提供的所有 Theme android）。例如，`Theme.Translucent`，`Widget.AbsListView`。

`R.attr`提供了所有的attrs android（可以设置为视图或窗口）。例如，`layout_width`可以设置为视图，`windowIsFloating`可以设置为窗口。

`R.styleable`具有android提供的特定视图或窗口的所有属性，并且可以在样式中定义。例如，`FrameLayout_Layout_layout_gravity`: layout_gravity 可以为 FrameLayout 设置样式，`Window_windowIsFloating`: 指示这是否是浮动窗口的标志。

为了回答您的问题，TextAppearance 是一个属性（R.attr）并且它被声明为可样式化的 attrs.xml：

```
<attr name="textAppearance" format="reference" />
<declare-styleable name="TextViewAppearance">
     <!-- Base text color, typeface, size, and style. -->
     <attr name="textAppearance" />
</declare-styleable> 
```

TextAppearance也是一个Theme/Style（Theme只是一种风格），styles.xml：

```
<style name="TextAppearance">
    <item name="android:textColor">?textColorPrimary</item>
    <item name="android:textColorHighlight">?textColorHighlight</item>
    <item name="android:textColorHint">?textColorHint</item>
    <item name="android:textColorLink">?textColorLink</item>
    <item name="android:textSize">16sp</item>
    <item name="android:textStyle">normal</item>
</style> 
```

以防万一你不明白什么是“？” 意思是，检查：[Android XML 属性中的问号 (?)](https://stackoverflow.com/questions/2733907/question-mark-in-xml-attributes-for-android) 如果您对什么是可声明样式感到困惑，请检查：[声明样式和样式之间的区别](https://stackoverflow.com/questions/4585808/difference-between-declare-styleable-and-style)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:52:28.520

R.style 用于主题定义（为要在布局中重用的元素配置默认或特定样式集）。

R.styleable 包含单独的属性。R.attr 用于定义自定义视图的属性。假设您创建了自己的名为 CardView 的自定义视图，它接收 2 个字符串，然后根据这些字符串的大小构建其布局。您可以将这些设置为通过 R.attr 在您的 XML 布局中分配的属性（[更多信息/更好的解释在这里](http://developer.android.com/training/custom-views/create-view.html)）。

# php - cURL 表单无法显示信息（非常基本）

> ID：14129270
> 
> 赞同：1
> 
> 时间：2013-01-02T21:14:51.257
> 
> 标签：php, forms, curl, cross-server

大家好 StackOverflow，

我正在尝试更多地了解 cURL 并提出以下表格：

```
<?php 
            //controleer of het formulier gesubmit is. Als dat zo is stuur de data door naar de link 

            if(isSet($_POST['submit'])) 
                { 
                    $ch = curl_init("http://jecom.nl/jecom/curl/receive.php");  
                    //definieer de link 

                    curl_setopt($ch, CURLOPT_POST, true); 
                     //zet het type op post 

                    curl_setopt($ch, CURLOPT_POSTFIELDS, "sender=" .$sender."&receiver=".$receiver."");  
                    //stuur de gegevens uit het formulier door naar de link 

                    curl_exec($ch);  
                    //Zet de output op het scherm 

                    if (curl_errno($ch))  
                        { 
                               print curl_error($ch); 
                               //Als er een fout is geef deze dan 
                        } 
                    else 
                        { 
                            curl_close($ch);  
                            //Sluit de link met de website 
                        } 

                } 
            else 
                { 
            ?> 
    <form method="POST" action="<? echo $_SERVER['PHP_SELF'];  ?>" name="login"> 
        <table width="100%"> 
            <tr align="center"> 
                <td width="50%" align="right"><font color="navy">Sender</font></td> 
                <td width="50%" align="left"><input type="text" name="sender" size="50"></td> 
            </tr> 

            <tr align="center"> 
                <td width="50%" align="right" width="100"><font color="navy">Receiver</font></td> 
                <td width="50%" align="left"><input type="text" size="50" name="receiver"></td> 
            </tr> 
                            <tr align="center"> 
                <td width="50%" align="right" width="100"><font color="navy">Amount</font></td> 
                <td width="50%" align="left"><input type="text" size="50" name="amount"></td> 
            </tr> 
            <tr> 
                <td>&nbsp;</td> 
            </tr> 
            <tr align="center"> 
                <td colspan="2" align="center"><input name="submit" type="submit" value="Inloggen"></td> 
            </tr> 

        </table> 
        </form> 
        <? } ?> 
```

这是我的接收端脚本：

```
 <?php
// recipient.php
$sender = ($_POST["sender"]);
$receiver = ($_POST["receiver"]);
$amount = ($_POST["amount"]);

print "Greetings, visitor from  {$_SERVER['REMOTE_ADDR']}";

echo ($_POST['sender']);

?> 
```

它没有显示我的回声。即使我认为在两台服务器上都启用了 cURL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:54:06.493

我已经稍微编辑了您的代码以添加 CURLOPT_RETURNTRANSFER，这样您就可以接收远程服务器的输出作为 curl_exec() 函数的响应。我做的另一件事是使用适当的 $_POST 数组索引更改 $sender 和 $receiver 变量。最后一个变化是我改变了 CURLOPT_POSTFIELDS 指令来接收一个数组。

代码运行良好，响应如预期：只需将其粘贴到一些新文件中并加载到浏览器中并自己尝试。

```
 <?php

            if($_POST) {
                $ch = curl_init("http://jecom.nl/jecom/curl/receive.php");
                curl_setopt($ch, CURLOPT_POST, true);
                curl_setopt($ch, CURLOPT_POSTFIELDS, array('sender' => $_POST['sender'], 'receiver'=> $_POST['receiver']));
                curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

                $result = curl_exec($ch); // HERE YOU GET THE RESULT OF THE REQUEST AS A STRING

                if (curl_errno($ch))
                {
                    print curl_error($ch);
                } else {
                    curl_close($ch);
                }
                var_dump($result);
            }
    ?>

<form method="POST" action="<?php echo $_SERVER['PHP_SELF'];  ?>" name="login">
    <table width="100%">
        <tr align="center">
            <td width="50%" align="right"><font color="navy">Sender</font></td>
            <td width="50%" align="left"><input type="text" name="sender" size="50"></td>
        </tr>

        <tr align="center">
            <td width="50%" align="right" width="100"><font color="navy">Receiver</font></td>
            <td width="50%" align="left"><input type="text" size="50" name="receiver"></td>
        </tr>
        <tr align="center">
            <td width="50%" align="right" width="100"><font color="navy">Amount</font></td>
            <td width="50%" align="left"><input type="text" size="50" name="amount"></td>
        </tr>
        <tr>
            <td>&nbsp;</td>
        </tr>
        <tr align="center">
            <td colspan="2" align="center"><input name="submit" type="submit" value="Inloggen"></td>
        </tr>

    </table>
</form> 
```

我在提交时也得到了回复：

string(41) "您好，来自 84.229.122.167me 的访客"

# javascript - 是否有任何内置函数可以在 JavaScript/jQuery 中生成字符串的 MD5？

> ID：14129271
> 
> 赞同：9
> 
> 时间：2013-01-02T21:14:51.603
> 
> 标签：javascript, jquery

我正在设计一个登录页面

```
<div id="body">
    <form class="form-horizontal">
        <div class="control-group">
            <label class="control-label" for="inputUser">Email</label>

            <div class="controls">
                <input type="text" id="inputUser" placeholder="Username">
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="inputPassword">Password</label>

            <div class="controls">
                <input type="text" id="inputPassword" placeholder="Password">
            </div>
        </div>
        <div class="control-group">
            <div class="controls">
                <button id="login_button" type="submit" class="btn btn-success">Sign In</button>
            </div>
        </div>
        <div class="control-group">
            <div class="controls">
                <div id="login_status"></div>
            </div>
        </div>

    </form>
</div> 
```

我正在使用`Backbone.js`with`jQuery`与服务器交互。

我想在将密码发送到服务器之前对密码进行 MD5 哈希处理，是否有 Javascript 或 jQuery 提供的内置函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T21:25:17.843

没有本机功能，但您可以在客户端使用此功能进行 md5 转换 - 原作者：Webtoolkit.info (http://www.webtoolkit.info/)

```
function md5 ( str ) {

    var RotateLeft = function(lValue, iShiftBits) {
            return (lValue<<iShiftBits) | (lValue>>>(32-iShiftBits));
        };

    var AddUnsigned = function(lX,lY) {
            var lX4,lY4,lX8,lY8,lResult;
            lX8 = (lX & 0x80000000);
            lY8 = (lY & 0x80000000);
            lX4 = (lX & 0x40000000);
            lY4 = (lY & 0x40000000);
            lResult = (lX & 0x3FFFFFFF)+(lY & 0x3FFFFFFF);
            if (lX4 & lY4) {
                return (lResult ^ 0x80000000 ^ lX8 ^ lY8);
            }
            if (lX4 | lY4) {
                if (lResult & 0x40000000) {
                    return (lResult ^ 0xC0000000 ^ lX8 ^ lY8);
                } else {
                    return (lResult ^ 0x40000000 ^ lX8 ^ lY8);
                }
            } else {
                return (lResult ^ lX8 ^ lY8);
            }
        };

    var F = function(x,y,z) { return (x & y) | ((~x) & z); };
    var G = function(x,y,z) { return (x & z) | (y & (~z)); };
    var H = function(x,y,z) { return (x ^ y ^ z); };
    var I = function(x,y,z) { return (y ^ (x | (~z))); };

    var FF = function(a,b,c,d,x,s,ac) {
            a = AddUnsigned(a, AddUnsigned(AddUnsigned(F(b, c, d), x), ac));
            return AddUnsigned(RotateLeft(a, s), b);
        };

    var GG = function(a,b,c,d,x,s,ac) {
            a = AddUnsigned(a, AddUnsigned(AddUnsigned(G(b, c, d), x), ac));
            return AddUnsigned(RotateLeft(a, s), b);
        };

    var HH = function(a,b,c,d,x,s,ac) {
            a = AddUnsigned(a, AddUnsigned(AddUnsigned(H(b, c, d), x), ac));
            return AddUnsigned(RotateLeft(a, s), b);
        };

    var II = function(a,b,c,d,x,s,ac) {
            a = AddUnsigned(a, AddUnsigned(AddUnsigned(I(b, c, d), x), ac));
            return AddUnsigned(RotateLeft(a, s), b);
        };

    var ConvertToWordArray = function(str) {
            var lWordCount;
            var lMessageLength = str.length;
            var lNumberOfWords_temp1=lMessageLength + 8;
            var lNumberOfWords_temp2=(lNumberOfWords_temp1-(lNumberOfWords_temp1 % 64))/64;
            var lNumberOfWords = (lNumberOfWords_temp2+1)*16;
            var lWordArray=Array(lNumberOfWords-1);
            var lBytePosition = 0;
            var lByteCount = 0;
            while ( lByteCount < lMessageLength ) {
                lWordCount = (lByteCount-(lByteCount % 4))/4;
                lBytePosition = (lByteCount % 4)*8;
                lWordArray[lWordCount] = (lWordArray[lWordCount] | (str.charCodeAt(lByteCount)<<lBytePosition));
                lByteCount++;
            }
            lWordCount = (lByteCount-(lByteCount % 4))/4;
            lBytePosition = (lByteCount % 4)*8;
            lWordArray[lWordCount] = lWordArray[lWordCount] | (0x80<<lBytePosition);
            lWordArray[lNumberOfWords-2] = lMessageLength<<3;
            lWordArray[lNumberOfWords-1] = lMessageLength>>>29;
            return lWordArray;
        };

    var WordToHex = function(lValue) {
            var WordToHexValue="",WordToHexValue_temp="",lByte,lCount;
            for (lCount = 0;lCount<=3;lCount++) {
                lByte = (lValue>>>(lCount*8)) & 255;
                WordToHexValue_temp = "0" + lByte.toString(16);
                WordToHexValue = WordToHexValue + WordToHexValue_temp.substr(WordToHexValue_temp.length-2,2);
            }
            return WordToHexValue;
        };

    var x=Array();
    var k,AA,BB,CC,DD,a,b,c,d;
    var S11=7, S12=12, S13=17, S14=22;
    var S21=5, S22=9 , S23=14, S24=20;
    var S31=4, S32=11, S33=16, S34=23;
    var S41=6, S42=10, S43=15, S44=21;

    str = this.utf8_encode(str);
    x = ConvertToWordArray(str);
    a = 0x67452301; b = 0xEFCDAB89; c = 0x98BADCFE; d = 0x10325476;

    for (k=0;k<x.length;k+=16) {
        AA=a; BB=b; CC=c; DD=d;
        a=FF(a,b,c,d,x[k+0], S11,0xD76AA478);
        d=FF(d,a,b,c,x[k+1], S12,0xE8C7B756);
        c=FF(c,d,a,b,x[k+2], S13,0x242070DB);
        b=FF(b,c,d,a,x[k+3], S14,0xC1BDCEEE);
        a=FF(a,b,c,d,x[k+4], S11,0xF57C0FAF);
        d=FF(d,a,b,c,x[k+5], S12,0x4787C62A);
        c=FF(c,d,a,b,x[k+6], S13,0xA8304613);
        b=FF(b,c,d,a,x[k+7], S14,0xFD469501);
        a=FF(a,b,c,d,x[k+8], S11,0x698098D8);
        d=FF(d,a,b,c,x[k+9], S12,0x8B44F7AF);
        c=FF(c,d,a,b,x[k+10],S13,0xFFFF5BB1);
        b=FF(b,c,d,a,x[k+11],S14,0x895CD7BE);
        a=FF(a,b,c,d,x[k+12],S11,0x6B901122);
        d=FF(d,a,b,c,x[k+13],S12,0xFD987193);
        c=FF(c,d,a,b,x[k+14],S13,0xA679438E);
        b=FF(b,c,d,a,x[k+15],S14,0x49B40821);
        a=GG(a,b,c,d,x[k+1], S21,0xF61E2562);
        d=GG(d,a,b,c,x[k+6], S22,0xC040B340);
        c=GG(c,d,a,b,x[k+11],S23,0x265E5A51);
        b=GG(b,c,d,a,x[k+0], S24,0xE9B6C7AA);
        a=GG(a,b,c,d,x[k+5], S21,0xD62F105D);
        d=GG(d,a,b,c,x[k+10],S22,0x2441453);
        c=GG(c,d,a,b,x[k+15],S23,0xD8A1E681);
        b=GG(b,c,d,a,x[k+4], S24,0xE7D3FBC8);
        a=GG(a,b,c,d,x[k+9], S21,0x21E1CDE6);
        d=GG(d,a,b,c,x[k+14],S22,0xC33707D6);
        c=GG(c,d,a,b,x[k+3], S23,0xF4D50D87);
        b=GG(b,c,d,a,x[k+8], S24,0x455A14ED);
        a=GG(a,b,c,d,x[k+13],S21,0xA9E3E905);
        d=GG(d,a,b,c,x[k+2], S22,0xFCEFA3F8);
        c=GG(c,d,a,b,x[k+7], S23,0x676F02D9);
        b=GG(b,c,d,a,x[k+12],S24,0x8D2A4C8A);
        a=HH(a,b,c,d,x[k+5], S31,0xFFFA3942);
        d=HH(d,a,b,c,x[k+8], S32,0x8771F681);
        c=HH(c,d,a,b,x[k+11],S33,0x6D9D6122);
        b=HH(b,c,d,a,x[k+14],S34,0xFDE5380C);
        a=HH(a,b,c,d,x[k+1], S31,0xA4BEEA44);
        d=HH(d,a,b,c,x[k+4], S32,0x4BDECFA9);
        c=HH(c,d,a,b,x[k+7], S33,0xF6BB4B60);
        b=HH(b,c,d,a,x[k+10],S34,0xBEBFBC70);
        a=HH(a,b,c,d,x[k+13],S31,0x289B7EC6);
        d=HH(d,a,b,c,x[k+0], S32,0xEAA127FA);
        c=HH(c,d,a,b,x[k+3], S33,0xD4EF3085);
        b=HH(b,c,d,a,x[k+6], S34,0x4881D05);
        a=HH(a,b,c,d,x[k+9], S31,0xD9D4D039);
        d=HH(d,a,b,c,x[k+12],S32,0xE6DB99E5);
        c=HH(c,d,a,b,x[k+15],S33,0x1FA27CF8);
        b=HH(b,c,d,a,x[k+2], S34,0xC4AC5665);
        a=II(a,b,c,d,x[k+0], S41,0xF4292244);
        d=II(d,a,b,c,x[k+7], S42,0x432AFF97);
        c=II(c,d,a,b,x[k+14],S43,0xAB9423A7);
        b=II(b,c,d,a,x[k+5], S44,0xFC93A039);
        a=II(a,b,c,d,x[k+12],S41,0x655B59C3);
        d=II(d,a,b,c,x[k+3], S42,0x8F0CCC92);
        c=II(c,d,a,b,x[k+10],S43,0xFFEFF47D);
        b=II(b,c,d,a,x[k+1], S44,0x85845DD1);
        a=II(a,b,c,d,x[k+8], S41,0x6FA87E4F);
        d=II(d,a,b,c,x[k+15],S42,0xFE2CE6E0);
        c=II(c,d,a,b,x[k+6], S43,0xA3014314);
        b=II(b,c,d,a,x[k+13],S44,0x4E0811A1);
        a=II(a,b,c,d,x[k+4], S41,0xF7537E82);
        d=II(d,a,b,c,x[k+11],S42,0xBD3AF235);
        c=II(c,d,a,b,x[k+2], S43,0x2AD7D2BB);
        b=II(b,c,d,a,x[k+9], S44,0xEB86D391);
        a=AddUnsigned(a,AA);
        b=AddUnsigned(b,BB);
        c=AddUnsigned(c,CC);
        d=AddUnsigned(d,DD);
    }

    var temp = WordToHex(a)+WordToHex(b)+WordToHex(c)+WordToHex(d);

    return temp.toLowerCase();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T21:22:36.197

你可以使用这个函数：点击链接：
[**javascript中的MD5函数**](http://www.webtoolkit.info/javascript-md5.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-02T21:23:08.267

简短的回答：不。

长答案：密码永远不应该通过未加密的通道发送，无论是否经过哈希处理。只是不够安全。您应该考虑通过 SSL/TLS 实现登录。

另一种解决方案是使用第三方实现登录，例如 Facebook、Github、Google 或其他 OAuth 提供商。

但是，如果您别无选择，散列密码比以明文形式发送要好。如果是这样，我建议使用[crypto-js md5 implementation](http://code.google.com/p/crypto-js/source/browse/tags/3.0.2/src/md5.js)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-06-10T15:19:51.457

在验证之前对密码进行哈希处理的目的是：您只将密码的哈希值存储在您的服务器上；当有人给你一个密码时，你会对它进行哈希处理，并将该哈希值与你之前保存的哈希值进行比较。如果密码有效，则哈希值将匹配。使用这种方法，您可以获得两个好处：

1.  您不存储用户的密码，因此对用户来说更安全。密码是纯文本的，直到它在服务器端被散列，但如果你有传输中的加密并且你的服务器没有受到损害，它是安全的。
2.  如果有人窃取了您的哈希列表，他们仍然无法登录，因为他们不知道生成这些哈希的实际密码（除非可以在彩虹表中轻松查找）。

如果您的用户界面仅将哈希发送到服务器，则您完全否定了第二个好处，因为知道哈希的任何人都可以通过将哈希提供给您来假装是其他人。如果您担心从客户端向服务器发送纯文本密码，因为您没有传输中的加密，那么您的情况会更糟，因为每个人都可以看到您发送的哈希密码，并发送相同的哈希密码您的服务器的密码以假装是该登录名。

至于 Javascript 中的 MD5 函数，有 CryptoJS 库，它运行良好，在 StackOverflow: [fastest MD5 Implementation in JavaScript中已经提到](https://stackoverflow.com/questions/1655769/fastest-md5-implementation-in-javascript)

# markdown - 翡翠过滤器：带有a的对象的降价

> ID：14129272
> 
> 赞同：2
> 
> 时间：2013-01-02T21:14:55.423
> 
> 标签：markdown, pug

我有一个来自数据库的对象，带有一些我想用玉渲染的降价标记。但是怎么做？当我应用 :markdown 过滤器时，我不能再将对象用作对象，但它会被视为文本。

我从这里开始：

```
p
   :markdown
      entry.content 
```

呈现为平原：

```
entry.content 
```

所以我尝试将 = 和 - 放在前面或将 #{} 包裹起来。有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-02T11:52:52.937

[如this answer](https://stackoverflow.com/a/21050011/5418136)中所述，我找到了一种简单的方法。它使用[标记](https://github.com/chjj/marked)库，所以首先安装它。

```
$ npm install marked --save 
```

在路由器页面

```
var markdown = require('marked');
var text = '**new text**';
res.render('template', {text:text, markdown:markdown}); 
```

在 template.jade 中，尝试以下任何行

```
!= markdown(text);
p!= markdown(text); 
```

在我看来，这是为降价实现动态过滤器的最干净的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T00:33:32.043

过滤器是编译时的，所以如果你想在运行时变量上运行降价过滤器，你必须自己渲染降价并将它传递给你的玉视图：

*   [https://groups.google.com/forum/?fromgroups=#!topic/express-js/8H4HNcoeekk](https://groups.google.com/forum/?fromgroups=#!topic/express-js/8H4HNcoeekk)

# core-data - 从核心数据中获取

> ID：14129273
> 
> 赞同：0
> 
> 时间：2013-01-02T21:14:56.127
> 
> 标签：core-data

我正在尝试为 Core Data 中的数据编写一个获取例程。我已经设法获取数据库中的所有数据并将其显示在表格视图中，但是，您如何根据查询仅获取一些数据？

例如，在 SQL 中：

```
Select * from DB where name = 'bob'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:05:13.163

你会想为此使用 NSPredicate 。类似的东西

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(name == %@)", name];
[fetchRequest setPredicate:predicate]; 
```

# android - 获取当前 android.intent.category.LAUNCHER 活动的实例

> ID：14129274
> 
> 赞同：7
> 
> 时间：2013-01-02T21:15:02.680
> 
> 标签：android, android-intent, android-manifest

我创建了一个在多个应用程序中共享的库项目。我实现了一个简单的会话过期功能，它将在一段时间后将用户踢回登录屏幕。

登录屏幕活动是我的主要活动，因此在清单中它看起来像这样：

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/Theme.Sherlock.Light.DarkActionBar"
    android:name="com.blah.application.MyApplication" >
    <activity
        android:name="com.blah.activity.LoginScreenActivity"
        android:label="@string/title_activity_main"
        android:screenOrientation="portrait"
        android:configChanges="orientation|keyboardHidden"
        android:windowSoftInputMode="adjustPan">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

当会话过期时，我想将用户踢回登录屏幕，但我不想硬编码活动的名称，因为它可能会因使用库的特定应用程序而异。这是我之前在做的事情：

```
Intent intent = new Intent(context, LoginScreenActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
context.startActivity(intent); 
```

如果应用程序的主要活动与 LoginScreenActivity 不同，这将不起作用。我不想硬编码“LoginScreenActivity.class”，我想以编程方式确定主类的名称，然后将用户引导到该活动......有人可以帮我吗？

提前致谢！

**编辑**

我找到了一种方法来完成相同的最终结果，但这绝对不是很好。由于使用相同的库（字符串、布尔值等）部署新应用程序需要一定数量的配置，因此我在 strings.xml 文件中为定义“主要”活动名称的特定应用程序添加了一个字符串对于该应用程序：

```
<string name="mainClassName">com.blah.specificapp.activity.SpecificAppLoginScreenActivity</string> 
```

然后我可以按名称获取该类的句柄并将用户重定向到那里：

```
Class<?> clazz = null;

try 
{
    clazz = Class.forName(context.getString(R.string.mainClassName));
} 
catch (ClassNotFoundException e) 
{
    // TODO Auto-generated catch block
    e.printStackTrace();
}

if(clazz != null)
{
    Intent intent = new Intent(context, clazz);
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    context.startActivity(intent);
} 
```

我知道这是一个糟糕透顶的解决方案，但它确实有效。就像我说的，无论如何，我必须为每个新应用程序做一定数量的配置，所以再添加一个字符串并不是什么大不了的事，只是不是很优雅。我很感激任何可以在不使用我的技巧的情况下实现相同目标的建议。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-03T10:30:05.120

您可以使用以下方法从 PackageManager 请求**启动 Intent**：

```
Intent launchIntent = PackageManager.getLaunchIntentForPackage(context.getPackageName()); 
```

这将返回一个 Intent，您可以使用它来启动“主要”活动（我假设这是您的“登录”活动）。只需添加`Intent.FLAG_ACTIVITY_CLEAR_TOP`此内容，您就可以开始了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:30:46.977

在您的意图过滤器上使用 mime 类型怎么样。

```
 <activity android:name=".LoginActivity"
              android:exported="true" android:launchMode="singleTop" android:label="@string/MT">
        <intent-filter>
            <category android:name="android.intent.category.DEFAULT"/>
            <action android:name="com.foo.ACTION_LOGIN" />
            <data android:mimeType="application/x.foo.com.mobile.login" /> 
     </intent-filter>
    </activity> 
```

并启动活动如下：

```
Intent intent = new Intent();
intent.setAction("com.foo.ACTION_LOGIN");
intent.setType("application/x.foo.com.mobile.login");
startActivity(myIntent); 
```

因此，该意图将由使用此操作/mime 类型对注册的任何活动提供服务。我不确定，但我认为如果该活动托管在同一个应用程序中，则可能会首先选择它。

# android - 模拟器没有运行应用程序。甚至 DDMS 也没有显示模拟器

> ID：14129275
> 
> 赞同：0
> 
> 时间：2013-01-02T21:15:03.410
> 
> 标签：android, android-emulator

我已经尝试了几次，但我的 AVD 没有运行该应用程序。

甚至 DDMS 也没有显示 AVD。

我试过停止并重新启动 AVd，但没有帮助。（附图，请放大..对不起分辨率）

我正在运行 64 位 win7，在任务管理器中我可以看到 adb.exe*32。这会产生问题吗？

谢谢你![图片](../Images/818b37f5ae80475fae34ac92664783e5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:01:19.943

你有没有配置你的 Eclipse 来指出 android sdk 的位置？如果没有，请通过选择“Window->Preferences”并选择“Android”进行配置，然后选择您的 SDK 位置。此外，您应该已经安装了 ADT 插件。

您可以参考以下链接

developer.android.com/sdk/installing/installing-adt.htm

# javascript - return 语句后的 javascript 变量声明

> ID：14129277
> 
> 赞同：2
> 
> 时间：2013-01-02T21:15:23.283
> 
> 标签：javascript

我正在查看一些缩小的 javascript 代码（来自 github），并且代码有一个看起来像的块

```
h = function(a, b, c, d) {
        var e, h, i, j, k, l, m = this;
        return i = $("#js-frame-loading-template").clone().show(), l = c === "back" ? 350 : 500, j = i.find(".js-frame-loading-spinner").hide() // more stuff here 
```

我很好奇这段代码为什么/如何工作，因为在 return 语句之后有变量声明

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T21:20:17.657

**[让我向您介绍逗号运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comma_Operator)。**

语句右侧的所有`return`内容都是一个表达式，由多个“子表达式”组成，以逗号分隔：

```
return a, b, c, d; 
```

每个子表达式从左到右求值，最后一个的值是整个表达式的结果。即在这种情况下返回最后一个表达式的结果（评估结果`d`以及您的示例中隐藏的任何内容`// more stuff here`）。

将多个表达式压缩为一个是一种“技巧”。

* * *

挑剔：

> [...] 因为在 return 语句之后有变量声明

该行中没有变量*声明*，只有赋值表达式。您不能在那里有`var`语句（变量声明），因为逗号运算符（和`return`语句）仅适用于表达式，而不适用于语句。

# python - 如何在 IPython 中自定义文本颜色？

> ID：14129278
> 
> 赞同：30
> 
> 时间：2013-01-02T21:15:23.207
> 
> 标签：python, ipython, customization

我想在 IPython 中自定义文本的颜色，但不知道该怎么做。

我知道在 Python 中，我可以通过结束`sys.ps1`并`sys.ps2`使用 ANSI 颜色代码来做到这一点，例如

```
sys.ps1=">>> \001\033[0m\033[34m\002" 
```

但是相应的方法 using`PromptManager.in_template`不适用于 IPython。例如

```
c = get_config()
c.PromptManager.in_template = 'In [{count}] : {color.Blue}' 
```

对提示后文本的颜色没有影响。

有没有办法改变 IPython 中文本的颜色？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2018-04-10T17:49:30.423

# IPython 中的着色和语法样式

`~/.iphyton/ipython_config.py`首先，您必须在您的主目录中创建一个 ipython 配置文件。**ipython_config.py**。最简单的方法是运行以下命令：

```
ipython profile create 
```

如果您使用`ipython3`开始

```
ipython3 profile create 
```

这将在您的;中安装一个`profile_default`目录和一些脚本。`~/.ipython`否则找到一个文件并将其复制到您的**~/.ipython/profile_default/**目录中。

使用以下命令备份此文件：

```
cp ~/.ipython/profile_default/ipython_config.py \
   ~/.ipython/profile_default/ipython_config.py_backup 
```

使用您选择的文本编辑器打开`~/.ipython/profile_default/ipython_config.py`并搜索以下 settig 并在您喜欢时将其注释掉（删除“#”）：

*   `c.InteractiveShell.color_info = True`

*   `c.InteractiveShell.colors = 'Linux'`

*   `c.TerminalInteractiveShell.highlighting_style = 'monokai'`

*   `c.TerminalInteractiveShell.highlight_matching_brackets = True`

等等。默认情况下禁用了许多有用的设置；您只需将它们注释掉（删除 `#' ）。

**样式文件**

在 Ubuntu/Debian 上，你必须安装[pygments](https://pygments.org/)包

```
sudo apt install python3-pygments 
```

或者

```
sudo pip3 install pygments 
```

样式文件可以在以下目录中找到：

/path/to/your/python/ **site-packages/pygments/styles/**，例如 `/usr/lib/python3/dist-packages/pygments/styles/monokai.py`

或者，您也可以列出已安装的样式`pygmentize`：

```
pygmentize -L styles 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-04T22:03:08.950

提示将输入的颜色[显式设置](https://github.com/ipython/ipython/blob/master/IPython/core/prompts.py#L390)`colors.in_normal`为。如果要更改输入颜色，则必须更改此颜色。

不幸的是，定制的配色方案仍在待办事项列表中（应该很容易，只是不是高优先级）。

您似乎想要的一个有点骇人听闻的示例，更改配置文件中输入和/或输出文本的颜色：

```
from IPython.utils import coloransi
from IPython.core import prompts

termcolors = coloransi.TermColors() # the color table
# IPython's two color schemes:
dark = prompts.PColLinux.colors
light = prompts.PColLightBG.colors

# colors.in_normal affects input code
dark.in_normal = termcolors.Green
light.in_normal = termcolors.Blue
# colors.normal affects output
dark.normal = light.normal = termcolors.Red 
```

这将设置它以使文本的颜色与提示匹配，但您当然可以选择任何您想要的。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-01-26T03:26:57.160

**警告：**此答案仅与 兼容，`IPython` `5.5.0`并且似乎不能很好地与`IPython` `6+`. （感谢@meowsqueak 进行快速测试！）

从 开始`IPython 5.5.0`，您可以覆盖任何样式颜色，这要归功于`ipython_config.py`目标配置文件文件夹中的 。（即：`~/.ipython/profile_default`用于`default`linux 典型安装的配置文件）。

IPython 代码与着色相关的代码相当混乱，解析器、调试器和交互式 shell 使用了几种方法。一些部分使用`Pygments`，另一些提供仅限于 16 色调色板的 ANSI 转义码。

该解决方案并不漂亮，但有效。如果还有其他更漂亮的方式，请在评论中告诉我！

请注意，由于扩展了默认调色板，我的解决方案还包括为 IPython 着色的每个部分使用 256 种或更多颜色的能力。下面的代码中有一个如何扩展到 256 色的示例。

所以这里是如何做的，列出所有可能使用的令牌：

```
##
## Basic color scheme that will be modified
##

colorLabel = 'Linux'
c.InteractiveShell.colors = colorLabel

from pygments.token import Token, Keyword, Name, Comment, String, Error, \
     Number, Operator, Generic, Whitespace

c.TerminalInteractiveShell.highlighting_style_overrides = {

    ## Standard Pygments tokens (are all used by IPython ?)

    Whitespace:                "#bbbbbb",
    Comment:                   "italic #008800",
    Comment.Preproc:           "noitalic",
    Comment.Special:           "noitalic bold",

    Keyword:                   "bold #AA22FF",
    Keyword.Pseudo:            "nobold",
    Keyword.Type:              "bold #00BB00",

    Operator:                  "#666666",
    Operator.Word:             "bold #AA22FF",

    Name.Builtin:              "#fff", #""#AA22FF",
    Name.Function:             "#00A000",
    Name.Class:                "#0000FF",
    Name.Namespace:            "bold #0000FF",
    Name.Exception:            "bold #D2413A",
    Name.Variable:             "#B8860B",
    Name.Constant:             "#880000",
    Name.Label:                "#A0A000",
    Name.Entity:               "bold #999999",
    Name.Attribute:            "#BB4444",
    Name.Tag:                  "bold #008000",
    Name.Decorator:            "#AA22FF",

    String:                    "#BB4444",
    String.Doc:                "italic",
    String.Interpol:           "bold #BB6688",
    String.Escape:             "bold #BB6622",
    String.Regex:              "#BB6688",
    String.Symbol:             "#B8860B",
    String.Other:              "#008000",
    Number:                    "#666666",

    Generic.Heading:           "bold #000080",
    Generic.Subheading:        "bold #800080",
    Generic.Deleted:           "#A00000",
    Generic.Inserted:          "#00A000",
    Generic.Error:             "#FF0000",
    Generic.Emph:              "italic",
    Generic.Strong:            "bold",
    Generic.Prompt:            "bold #000080",
    Generic.Output:            "#888",
    Generic.Traceback:         "#04D",

    Error:                     "border:#ff0000",

    ## IPython

    Token.Number: '#ffffff',
    Token.Operator: 'noinherit',
    Token.String: '#8b8',
    Token.Name.Function: '#2080D0',
    Token.Name.Class: 'bold #2080D0',
    Token.Name.Namespace: 'bold #2080D0',
    Token.Prompt: '#ffffff bold',
    Token.PromptNum: '#888888 bold',
    Token.OutPrompt: '#008b8b bold',
    Token.OutPromptNum: '#006b6b bold',
}

from IPython.core import excolors, ultratb, debugger
from IPython.core.excolors import exception_colors as exception_colors_orig

##
## Add new color labels here before attributing them
##

from IPython.utils import coloransi

coloransi.color_templates = (
    # Dark colors

    ("Black"       , "0;30"),
    ("Red"         , "0;31"),
    ("Green"       , "0;32"),
    ("Brown"       , "0;33"),
    ("Blue"        , "0;34"),
    ("Purple"      , "0;35"),
    ("Cyan"        , "0;36"),
    ("LightGray"   , "0;37"),

    # Light colors
    ("DarkGray"    , "1;30"),
    ("LightRed"    , "1;31"),
    ("LightGreen"  , "1;32"),
    ("Yellow"      , "1;33"),
    ("LightBlue"   , "1;34"),
    ("LightPurple" , "1;35"),
    ("LightCyan"   , "1;36"),
    ("White"       , "1;37"),

    ## 256-colors

    ("Green108", "38;5;108"),
)

coloransi.make_color_table(coloransi.TermColors)
coloransi.make_color_table(coloransi.InputTermColors)

for name, value in coloransi.color_templates:
    setattr(coloransi.NoColors, name, '')

C = coloransi.TermColors
IC = coloransi.InputTermColors

def exception_colors():

    ex_colors = exception_colors_orig()

    ex_colors.add_scheme(coloransi.ColorScheme(
        colorLabel,

        # The color to be used for the top line
        topline=C.LightRed,

        # The colors to be used in the traceback
        filename=C.Green,
        lineno=C.DarkGray,
        name=C.Purple,
        vName=C.Cyan,
        val=C.White,
        em=C.LightCyan,

        # Emphasized colors for the last frame of the traceback
        normalEm=C.LightCyan,
        filenameEm=C.Green,
        linenoEm=C.Normal,
        nameEm=C.LightPurple,
        valEm=C.LightGreen,

        # Colors for printing the exception
        excName=C.Red,
        line=C.Yellow,
        caret=C.White,
        Normal=C.Normal
    ))
    return ex_colors

excolors.exception_colors = exception_colors
ultratb.exception_colors = exception_colors
debugger.exception_colors = exception_colors

##
## Parser color (source code colors)
##

from IPython.utils import PyColorize
import token
import tokenize

PyColorize.ANSICodeColors[colorLabel] = coloransi.ColorScheme(
    colorLabel, {
        'header'         : C.LightRed,
        token.NUMBER     : C.LightCyan,
        token.OP         : C.Normal,
        token.STRING     : C.Green108,
        tokenize.COMMENT : C.LightGray,
        token.NAME       : C.Normal,
        token.ERRORTOKEN : C.Red,

        PyColorize._KEYWORD         : C.White,
        PyColorize._TEXT            : C.Yellow,

        ## Keep IC here, you can use other colors

        'in_prompt'      : IC.Green,
        'in_number'      : IC.LightGreen,
        'in_prompt2'     : IC.Green,
        'in_normal'      : IC.Normal,  # color off (usu. Colors.Normal)

        'out_prompt'     : C.Red,
        'out_number'     : C.LightRed,

        'normal'         : C.Normal  # color off (usu. Colors.Normal)
}) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-19T15:29:57.113

在 Ipython 中更改颜色的简单方法：

1.  打开您的 IPython 配置文件 ( `ipython_config.py`) ，通常位于`~/.ipython/profile_default/`或`~/.ipython/profile_<your_usrname>/`其中（如果您使用的是 IPython 配置文件）。

2.  查找并取消注释（或更改）设置`c.InteractiveShell.colors`

3.  将其更改为可用的颜色模式之一，您可以在评论中看到它们全部列出 - `NoColor`、`Neutral`、`Linux`或`LightBG`

4.  保存配置文件并启动 IPython

**如果您没有看到配置文件**- 您可以使用以下命令快速生成它：

`ipython profile create [profilename]`

它将使用默认设置生成配置文件，然后您可以根据需要对其进行编辑。

# xslt - 对一个类型的连续兄弟进行分组

> ID：14129279
> 
> 赞同：2
> 
> 时间：2013-01-02T21:15:27.967
> 
> 标签：xslt

给定兄弟姐妹，其中一些是`<row>`元素，一些不是，像这样，

```
<h />
<row id='v' />
<a />
<b />
<row id='w' />
<d />
<row id='x' />
<row id='y' />
<f />
<r />
<row id='z' /> 
```

使用 xslt 1.0，我需要按顺序处理它们，但是在我去的时候将非行的组合在一起，像这样，

```
<notRow>
    <h />
</notRow>
<row id='v' />
<notRow>
    <a />
    <b />
</notRow>
<row id='w' />
<notRow>
    <d />
<row id='x' />
<row id='y' />
<notRow>
    <f />
    <r />
</notRow>
<row id='z' /> 
```

第一个和最后一个可能是也可能不是`<row>`元素。

如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:24:55.513

**它可以像这样简短而简单（无需多次调用模板，，，`xsl:for-each`）`xsl:if`。这是完整的转换：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>
 <xsl:key name="kFollowing" match="*/*[not(self::row)]"
          use="concat(generate-id(..), '+',
                      generate-id(preceding-sibling::row[1])
                     )"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template priority="2" match=
  "*/*[not(self::row)
   and
     (preceding-sibling::*[1][self::row]
    or not(preceding-sibling::*)
     )]">
  <notRow>
    <xsl:copy-of select=
    "key('kFollowing', concat(generate-id(..), '+',
                               generate-id(preceding-sibling::row[1])
                              ))"/>
  </notRow>
 </xsl:template>

 <xsl:template match="*/*[not(self::row)]"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 时**（包装到单个顶部元素中以使其格式正确）：

```
<t>
    <h />
    <row id='v' />
    <a />
    <b />
    <row id='w' />
    <d />
    <row id='x' />
    <row id='y' />
    <f />
    <r />
    <row id='z' />
</t> 
```

**产生了想要的正确结果：**

```
<t>
   <notRow>
      <h/>
   </notRow>
   <row id="v"/>
   <notRow>
      <a/>
      <b/>
   </notRow>
   <row id="w"/>
   <notRow>
      <d/>
   </notRow>
   <row id="x"/>
   <row id="y"/>
   <notRow>
      <f/>
      <r/>
   </notRow>
   <row id="z"/>
</t> 
```

**更新**：

OP 已经表达了一个额外的要求，即节点需要通过匹配的模板来处理——而不仅仅是复制。

**这只需要最小的改变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>
 <xsl:key name="kFollowing" match="*/*[not(self::row)]"
          use="concat(generate-id(..), '+',
                      generate-id(preceding-sibling::row[1])
                     )"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template priority="2" match=
  "*/*[not(self::row)
   and
     (preceding-sibling::*[1][self::row]
    or not(preceding-sibling::*)
     )]">
  <notRow>
    <xsl:apply-templates mode="group" select=
    "key('kFollowing', concat(generate-id(..), '+',
                               generate-id(preceding-sibling::row[1])
                              ))"/>
  </notRow>
 </xsl:template>
 <!-- This template can be replaced with whatever processing needed -->
 <xsl:template match="*" mode="group">
  <xsl:copy-of select="."/>
 </xsl:template>
 <xsl:template match="*/*[not(self::row)]"/>
</xsl:stylesheet> 
```

在“组”模式下操作的模板应替换为实现所需处理的模板。在这种情况下，它会复制匹配的元素——但在实际应用程序中，任何想要的处理都会在这里进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T01:05:44.683

您可能可以使用键对每个非行元素按其前一行（如果有）进行分组，如果没有，则按其父元素进行分组：

```
<xsl:key name="elementsFollowingRow"
  match="*[not(self::row)]"
  use="generate-id( (.. | preceding-sibling::row )[last()])" /> 
```

如果当前元素根据键有任何关联元素，则定义一个命名模板以放入 notRow

```
<xsl:template name="addNotRow">
  <xsl:if test="key('elementsFollowingRow', generate-id())">
    <notRow>
      <xsl:copy-of select="key('elementsFollowingRow', generate-id())" />
    </notRow>
  </xsl:if>
</xsl:template> 
```

然后在您匹配父元素的模板中（包含所有这些`row`和非`row`元素的模板，您可以执行

```
<xsl:call-template name="addNotRow" />
<xsl:for-each select="row">
  <xsl:copy-of select="." />
  <xsl:call-template name="addNotRow" />
</xsl:for-each> 
```

for-each 之外的first`call-template`将处理`notRow`first 之前需要的任何内容`row`，而 for-each 内部的调用将在相关行之后放入任何`notRow`需要的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T23:44:01.577

This isn't pretty, but it works.

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:template match="t">

        <xsl:if test="row[1]/preceding-sibling::*">
            <notRow>
                <xsl:for-each select="row[1]/preceding-sibling::*" >
                    <xsl:copy />
                </xsl:for-each>
            </notRow>
        </xsl:if>

        <xsl:for-each select="row">
            <xsl:copy-of select="."/>
            <xsl:if test="following-sibling::row[1]/preceding-sibling::*[generate-id(preceding-sibling::row[1])=generate-id(current())]">
                <notRow>
                    <xsl:for-each select="following-sibling::row[1]/preceding-sibling::*[generate-id(preceding-sibling::row[1])=generate-id(current())]">
                        <xsl:copy />
                    </xsl:for-each>
                </notRow>
            </xsl:if>
        </xsl:for-each>

        <xsl:if test="row[last()]/following-sibling::*">
            <notRow>
                <xsl:for-each select="row[last()]/following-sibling::*" >
                    <xsl:copy />
                </xsl:for-each>
            </notRow>
        </xsl:if>

    </xsl:template>

</xsl:stylesheet> 
```

On this XML source

```
<t>
    <h />
    <i />
    <row id='v' />
    <a />
    <b />
    <row id='w' />
    <d />
    <row id='x' />
    <row id='y' />
    <f />
    <r />
    <row id='z' />
    <i />
</t> 
```

it returns the correct result:

```
<notRow>
   <h/>
   <i/>
</notRow>
<row id="v"/>
<notRow>
   <a/>
   <b/>
</notRow>
<row id="w"/>
<notRow>
   <d/>
</notRow>
<row id="x"/>
<row id="y"/>
<notRow>
   <f/>
   <r/>
</notRow>
<row id="z"/>
<notRow>
   <i/>
</notRow> 
```

but it does seem there should be something simpler.

# javascript - 检索图像，chrome 扩展

> ID：14129290
> 
> 赞同：0
> 
> 时间：2013-01-02T21:16:00.750
> 
> 标签：javascript, jquery, google-chrome-extension

我对基本的 chrome 扩展有疑问。我的目标是从网页中检索 img 元素。

清单.json：

```
{
    "name": "My first chrome extension",
    "version": "1.0",
    "background": { "scripts": ["script.js", "jquery-1.8.3.js"] },
    "permissions": [
        "http://*/*"
    ],
    "browser_action": {
        "name": "Do something with images",
        "icons": ["icon.png"]
    },
    "manifest_version": 2
} 
```

脚本.js：

```
var imgs = [];

chrome.browserAction.onClicked.addListener(function(tab) {

//  imgs = document.getElementsByTagName("img");
    imgs = $('img');
    if(imgs.length > 0){
        alert("abc");
    }    
}); 
```

在带有图像的页面上不显示警报。imgs.length 为 0。而在我键入时在同一页面上的 javascript 控制台中：

```
imgs = $('img');
imgs.length; 
```

我得到 29 张图片。这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:28:18.547

您的`onClicked`处理程序不在页面上运行；相反，它在单独的扩展环境中运行。相反，您需要将脚本注入到 etab 中：

```
chrome.browserAction.onClicked.addListener(function(tab) {
    chrome.tabs.executeScript(tab.id, {
        file: "img_script.js"
    });
}); 
```

`img_script.js`扩展程序中的脚本文件在哪里。

或者，如果必须，请执行以下操作：

```
chrome.browserAction.onClicked.addListener(function(tab) {
    chrome.tabs.executeScript(tab.id, {
        code: "imgs = $('img'); if(imgs.length > 0){alert('abc');}"
    });
}); 
```

然而，这对于可读性和未来的代码维护来说是*可怕的。**请*永远不要这样做。

如果脚本只作用于页面（例如，您只是将`src`页面上所有图像的属性替换为新值），那么您就完成了。如果您需要扩展程序对结果进行进一步处理（例如，您想计算页面上有多少图像，然后`chrome.browserAction.setBadgeText`使用该数字调用），让注入的脚本[将消息传递](http://developer.chrome.com/extensions/messaging.html)回扩展程序。

# stata - 如何为 Spearman 相关表制作表格？

> ID：14129291
> 
> 赞同：2
> 
> 时间：2013-01-02T21:16:09.983
> 
> 标签：stata

我需要使用 Stata 获取 Spearman 和 Pearson 相关表。这是我以表格格式获取结果的方法。

```
estpost correlate sp_rating srating mrating split split_neg split_ord split_neg_ord tier1_risk tier1_leverage st1 sl mt1 ml adt1 adl dt1 dl offering_amt maturity2 security 
enhance timeliness validity disc loan_at cash_dep trading_at real_est intangible other_at sec_sum assets_sold all_residual secinc_ta, matrix quietly

esttab . using "root4.rtf", replace notype unstack compress noobs nogaps nostar 
```

然后，我收到此错误消息：

```
varlist not allowed 
```

当我只使用几个变量时，我没有得到错误，但是当我放了很多变量时。我不知道如何解决这个问题。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:08:10.757

我能够重现您的错误并对其进行了运行`trace`。我相信这是第 946 行的错误`estout.ado`，可能是由于带有 RTF 标记的非常长的变量列表超过了在该行创建的本地宏的大小。

您应该向 Ben Jann 发送错误报告（电子邮件在末尾`help estout`）。同时，您可以尝试保存到 DOC 和 TXT，它们都可能有效（您有 30 多个变量，我对这两个变量都进行了测试，`.txt`并且`.doc`成功地使用了 20 个变量）。

或者，尝试`mkcorr`命令 ( `ssc install mkcorr`) 以查看它是否适用于您的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T17:07:33.173

`esttab`在尝试了很多不同的输出并存储了很多估计值之后，我遇到了同样的问题。

因此，`estimates clear`如果您在运行命令之前键入它可能会有所帮助。至少对我来说它有效。

# java - 部署我的应用程序后无法连接到 MySQL

> ID：14129292
> 
> 赞同：1
> 
> 时间：2013-01-02T21:16:11.743
> 
> 标签：java, mysql

我已将 MySQL 安装到我的本地计算机上。我可以从我的计算机上运行的 Java 应用程序访问 MySQL。

我的连接字符串`private String url = "jdbc:mysql://localhost:3306/mydatabase"`允许我成功连接。但是当我将我的应用程序部署到局域网上的其他计算机并尝试从其他计算机连接到我的 MySQL 数据库时，我无法访问我的数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:47:58.963

正如其他人在评论中提到的那样，您发出的是您的连接字符串：`private String url = "jdbc:mysql://localhost:3306/mydatabase"`

为了让您能够从 LAN 上的其他计算机连接到您的数据库，您需要更改`localhost`您的 IP 地址。例如：

`private String url = "jdbc:mysql://192.168.0.10:3306/mydatabase"`

假设其他机器可以看到 192.168.0.10 他们将能够连接（当然使用正确的凭据！）

# c - 使用带有 2D 连续数组的 MPI_Sendrecv 的分段错误

> ID：14129297
> 
> 赞同：1
> 
> 时间：2013-01-02T21:16:26.647
> 
> 标签：c, multidimensional-array, segmentation-fault, mpi

我的问题很简单。当使用 MPI_Sendrecv 时，它会系统地生成一个段错误。我之前在使用 2D 数组和基本的 MPI_Send 时遇到了同样的问题，但最终解决了。当我尝试在最后一种情况下工作的相同解决方案时，这并没有改变任何东西。因此，我正在寻求帮助！

所以基本上，我通过这段代码分配我的所有矩阵：

```
 double**
    allocateMatrix(int rows, int cols)
    {
        double **M; // Row pointer
        double *Mdata; // Where data will be actually storde

        M = calloc(rows, sizeof *M);
        Mdata = calloc(rows*cols, sizeof(double));

        int i;
        for (i = 0; i < rows; ++i) 
            M[i] = Mdata+ i*rows;

        return M;
    } 
```

我这样做是因为我读到 MPI_Sendrecv 不应该与非连续数据一起工作......

这是我得到错误的地方：

```
 double **submtx;
    submtx = allocateMatrix(submtx_dim, submtx_dim);

    /* 
    ...
    */

    MPI_Sendrecv(&(submtx[0][0]), 1, left_col, neighbours[0], LEFT_COL,
                 &tmp_rcol, SUB_MTX_SIZE, MPI_DOUBLE, neighbours[0], RIGHT_COL,
                 my_grid, MPI_STATUS_IGNORE); 
```

我知道它测试错误来自给 MPI_Sendrecv 的第一个参数的语法。我使用 MPI 子数组和一个网格加上一个 shift 来让我的邻居在网格上，但是这段代码已经在一个基本版本中使用了单独的 Send/Recv。唯一的变化是用 MPI_Sendrecv 调用替换 Send/recv 调用以简化代码......所以我认为整个代码都不是必需的。

有任何想法吗 ？

我试过了 ：

```
 MPI_Sendrecv(&submtx, ...
    MPI_Sendrecv(submtx, ... 
```

它都不起作用，我仍然在这条线上遇到分段错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:58:17.373

MPI_Sendrecv 需要一个指向数据缓冲区的指针作为第一个参数 (void *)

[http://www.mcs.anl.gov/research/projects/mpi/www/www3/MPI_Sendrecv.html](http://www.mcs.anl.gov/research/projects/mpi/www/www3/MPI_Sendrecv.html)

所以，试试这个

```
double* // pointer to double (not pointer to pointer)
    allocateMatrix(int rows, int cols)
    {
        return calloc(rows * cols, sizeof(double));
    } 
```

然后稍后

```
double *submtx;
submtx = allocateMatrix(submtx_dim, submtx_dim);

/* 
...
*/

MPI_Sendrecv(submtx,.... 
```

我想评论区在矩阵中写入了一些东西......

要访问**r**行和**c**列中的值，请执行此操作

```
smbmtx[c + r * submtx_dim] = 1.234; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:36:19.850

事实证明，我摆脱了分段错误。我的问题中写的语法实际上很好， &(submtx[0][0]) 不是问题......也正如这篇文章中指出的那样， submtx[0] 也在工作（[MPI_Type_create_subarray 和 MPI_Send](https://stackoverflow.com/questions/5583540/mpi-type-create-subarray-and-mpi-send)）。

这实际上有点棘手，因为根本没有真正的问题，只是我必须在真正的问题之前做一些愚蠢的事情：

不工作的代码：

```
 MPI_Barrier(my_grid);

    do {

        MPI_Sendrecv(&(submtx[0][0], ...)

        /*
        ...
        */

    } while (cond); 
```

和工作代码：

```
 MPI_Barrier(my_grid);

    double *stupid_allocation;
    stupid_allocation = calloc(submtx_dim*submtx_dim, sizeof(double));

    do {

        MPI_Sendrecv(&(submtx[0][0]), ...)

        /*
        ...
        */

    } while (cond); 
```

虽然我很高兴我的问题终于得到解决，但我真的很想得到这个问题的答案，这意味着“为什么在删除不会有任何用途的分配（或我认为的其他任何东西）时它不起作用??

# php - 在 MYSQL Connect 中使用多个定义的变量

> ID：14129300
> 
> 赞同：0
> 
> 时间：2013-01-02T21:16:38.410
> 
> 标签：php

我希望允许用户登录到他们的 MySQL 数据库。他们的用户名和 SQL 数据库的结尾是相同的，但是每个数据库名称都是以开头的；linkycra_[用户名]

我正在尝试使用定义的变量连接到 SQL。

它可以在回显中使用逗号 - 但是很明显，逗号不能以这种格式使用。

[http://puu.sh/1IBJP.png](http://puu.sh/1IBJP.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:19:25.553

使用[连接运算符](http://php.net/manual/en/language.operators.string.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:22:31.047

好吧，你的代码中有很多东西需要修复。

首先，不要使用图像来粘贴代码，而是直接在 stackoverflow 中，或者如果太长，在类似 pastebin 的网站中。

然后，您不应该使用 mysql_* 方法，因为它们已被弃用（阅读[文档](http://php.net/mysql_connect)），而是使用[PDO](http://php.net/pdo)。

接下来，永远不要像这样直接使用 cookie 中的值。您必须对其进行验证、清理和过滤，以确保返回的值是正确的：我可以修改此值并通过一些工作，也许可以破解您的网站。不是好办法。

然后，如果是`lynkycra_[username]`，您可以使用字符串的连接（基于您的代码）：

```
$link = mysql_connect('server', 'linkycra_'.$_COOKIE['monlotronloggedin'], 'password'); 
```

看 ？

# objective-c - 从 GCD dispatch_async 块中调用 super：安全吗？

> ID：14129302
> 
> 赞同：3
> 
> 时间：2013-01-02T21:16:41.680
> 
> 标签：objective-c, objective-c-blocks, superclass, method-hiding, retain-cycle

我有点苦恼。我知道从块中调用 [self methodName] 将导致保留周期。

然而，在这个类中，由于多线程，我不能允许从块以外的任何其他地方访问块正在访问的方法，因为它可能会导致严重的问题。

当前代码：

```
 if (_getRunning==NO){
        __weak SyncArrayMT *_weak_self = self;
        _get_t = ^void (void){
            _weak_self->_getRunning = YES;
            NSArray *objects = [_weak_self get:getQuery 
                                usingClassCtor:ctor 
                                 withAuthBlock:authBlock];
            if (_weak_self.getBlockCb)
                _weak_self.getBlockCb(objects);
            _weak_self->_getRunning = NO;
        };
    } 
```

正是这样做的，它调用[self getmethod]。虽然调度的块可以运行此方法，但我不希望此类之外的任何东西调用此方法。那么，是否可以像这样覆盖这个继承的方法：

```
- (NSArray *) get:(NSString *)getQuery usingClassCtor:(initBlock)initCb withAuthBlock:(authenticate)authBlock
{
    NSLog(@"Direct call to get is not allowed - use the threaded method");
    return nil;
} 
```

然后将块更改为：

```
 _get_t = ^void (void){
            _weak_self->_getRunning = YES;
            NSArray *objects = [super get:getQuery 
                                usingClassCtor:ctor 
                                 withAuthBlock:authBlock];
            if (_weak_self.getBlockCb)
                _weak_self.getBlockCb(objects);
            _weak_self->_getRunning = NO;
        }; 
```

我已经尝试过了，它可以在不调用 [self getMethod] 的情况下工作，但是超级会被保留、正确释放等吗？是的，我正在使用 ARC。在一个块内调用 super 会导致任何问题吗？有没有办法让 __weak 改为 super ？

或者，我怎样才能禁止直接调用 [self getMethod] （它是继承的）并且只在内部使用它？我知道 Objective-C 并没有完全实现这一点，但我知道有一些技巧，比如只在实现文件中声明和实现一个方法。

编辑＃1：

我尝试过使用 SEL & IMP 和函数指针。问题是 IMP 和函数指针需要一个实例作为参数，这使得孔点静音：

```
NSString * (*getFuncPtr)(id,SEL,id,id) = (NSString * (*)(id,SEL,id,id))[super methodForSelector:@selector(sendObjectsPassingTest:withAuthBlock:)];
NSString *reply = getFuncPtr(_weak_self,@selector(sendObjectsPassingTest:withAuthBlock:),predicate,authBlock); 
```

这只是调用继承的方法。尝试将它与 super 一起使用只会产生错误。在这一点上，我将继续并简单地在块内使用 super，并尝试分析它是否会导致任何保留周期。

编辑#2：

根据 newacct 的回答，这就是我最终要做的事情：

```
typedef NSArray * (* getFuncPtr)(id,SEL,id,id,id);
...
...
__weak SyncArrayMT *_weak_self = self;
_getMethod = (NSArray * (*)(id,SEL,id,id,id))[[[self class] superclass] instanceMethodForSelector:@selector(get:usingClassCtor:withAuthBlock:)];
_get_t = ^void (void){
   NSArray *objects = _weak_self->_getMethod(_weak_self,@selector(get:usingClassCtor:withAuthBlock:),getQuery,ctor,authBlock);
} 
```

我希望这应该避免任何保留周期，尽管我还没有真正分析它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T03:30:56.897

> 我知道从块中调用 [self methodName] 将导致保留周期。

一般来说，这是不正确的。该块将保留`self`，是的。`self`但是，如果以某种方式保留该块，则只会有一个“保留周期” 。在这种情况下，确实如此。

> 但会超级保留

是的，`self`将被保留（使用不同的方法查找路径`super`调用）。`self`

> 我尝试过使用 SEL & IMP 和函数指针。问题是 IMP 和函数指针需要一个实例作为参数，这使得孔点静音：
> 
> ```
> NSString * (*getFuncPtr)(id,SEL,id,id) = (NSString * (*)(id,SEL,id,id))[super methodForSelector:@selector(sendObjectsPassingTest:withAuthBlock:)]; 
> NSString *reply = getFuncPtr(_weak_self,@selector(sendObjectsPassingTest:withAuthBlock:),predicate,authBlock); 
> ```
> 
> 这只是调用继承的方法。尝试将它与 super 一起使用只会产生错误。在这一点上，我将继续并简单地在块内使用 super，并尝试分析它是否会导致任何保留周期。

这里有很多错误的地方。首先，如上所述，`super`是一个调用`self`（没有`super`对象之类的东西），因此获取超类中方法的 IMP 并调用它就足够了`self`。

但是，`[super methodForSelector:...`没有*得到*超类中的方法。它实际上得到了*这个*类中的方法。`super`in`[super methodForSelector:...`影响`methodForSelector:`调用哪个方法。但是，没有任何类会覆盖，因此和`methodForSelector:`之间实际上没有区别。如上所述，调用方法 on ，所以还是根据*当前对象*的类来查找方法。`[super methodForSelector:...``[self methodForSelector:...``super``self`

 *您可以使用类方法获得正确的 IMP `+instanceMethodForSelector:`：

```
NSString *(*getFuncPtr)(id,SEL,id,id) = (NSString * (*)(id,SEL,id,id))[[[self class] superclass] instanceMethodForSelector:@selector(sendObjectsPassingTest:withAuthBlock:)]; 
```

但是，如果当前对象是子类的实例，则使用上述方法将无法正常工作，因为 then`[self class]`将是子类。因此，为了确保它符合我们的要求，我们需要硬编码当前类或超类的名称：

```
NSString *(*getFuncPtr)(id,SEL,id,id) = (NSString * (*)(id,SEL,id,id))[[SyncArrayMT superclass] instanceMethodForSelector:@selector(sendObjectsPassingTest:withAuthBlock:)];
NSString *reply = getFuncPtr(_weak_self,@selector(sendObjectsPassingTest:withAuthBlock:),predicate,authBlock); 
```

也可以`objc_msgSendSuper`直接使用，但该功能也不是那么容易使用。所以我认为你应该坚持上面的 IMP 方法。*

# dynamics-crm-2011 - 价目表矩阵的 CRM 2011 子网格

> ID：14129305
> 
> 赞同：0
> 
> 时间：2013-01-02T21:16:52.773
> 
> 标签：dynamics-crm-2011, dynamics-crm

我正在尝试向价目表实体添加功能以支持基于矩阵的价目表。我创建了价目表列和价目表行实体，并向价目表实体添加了 1-N 关系。

现在我必须在价目表表单中添加一个子网格（可能是一个新的），让用户填写矩阵。所以我需要一个网格，它从价格表列关系中获取和插入列，并从价格表行关系中获取和插入行。

这可能吗？如果是，我该如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:23:10.000

我相信你在问，“我怎样才能建立一个可编辑的子网格？”

开箱即用的 CRM 不支持这些功能。你将不得不建造（或购买）一些定制的东西。

我建议阅读[为 CRM 2011 构建可编辑网格，](http://blogs.msdn.com/b/devkeydet/archive/2011/11/30/building-an-editable-grid-for-crm-2011.aspx)它提供了许多现有的插件并建议了开发方法。

# c++ - Windows：直接读取另一个进程的内存

> ID：14129309
> 
> 赞同：5
> 
> 时间：2013-01-02T21:17:20.923
> 
> 标签：c++, windows, performance, memory

我需要在 Windows 中扫描另一个进程的内存。ReadProcessMemory 函数做得很好，但它每次都将内存从目标进程复制到我的一个缓冲区。有没有办法访问另一个进程的内存，而无需每次都将其复制到我的进程的内存中？如果有我可以使用指针来访问其他进程的内存

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:51:34.413

调试器使用`ReadProcessMemory`，因此，如果您要实现的功能类似于调试器，那是正确的方法。

如果您正在实施其他东西，您可能会陷入困境，您应该为我们提供您正在尝试解决的问题的更高级别的视图。

# objective-c - UIView 中的 UITextView 未调整大小

> ID：14129310
> 
> 赞同：2
> 
> 时间：2013-01-02T21:17:21.947
> 
> 标签：objective-c, xcode, uiview, resize, uitextview

我有一个名为 _containerView 的 UIView，在这个 UIView 中我有一个名为 _codeTextView 的自定义 UITextView。加载应用程序时，这些视图占据整个屏幕，但是，当键盘出现时，我希望屏幕调整大小。

当键盘出现时，我必须遵循以下方法：

```
- (void)keyboardAppears:(NSNotification *)notification
{
    _containerView.frame = CGRectMake(0, 0, 320, 216.0f);
    _codeTextView.frame = CGRectMake(0, 30, 290, 216.0f);
} 
```

containerView 可以正确调整大小，但是其中的 _codeTextView 没有调整大小，我真的不知道为什么它没有调整大小。我已经尝试过更改各种选项，这让我发疯:(

有人可以帮我吗？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T22:11:28.750

我刚刚使用您描述的场景创建了一个项目。setFrame 适用于禁用自动布局的所有视图，但不适用于启用自动布局的视图。

您是否**为该**视图控制器启用了自动布局？setFrame 不适用于自动布局。您必须使用约束以编程方式调整您的视图。（答案来自：[我可以在同一个视图上使用 setFrame 和 autolayout 吗？](https://stackoverflow.com/questions/13186908/can-i-use-setframe-and-autolayout-on-the-same-view)）

你可以在这里找到一些帮助：http: [//nszombie.com/2010/12/08/ConstraintBasedLayout.html](http://nszombie.com/2010/12/08/ConstraintBasedLayout.html)

# ruby-on-rails - ActiveResource 错误，带有“错误的常量名 ENV.xxx”

> ID：14129311
> 
> 赞同：0
> 
> 时间：2013-01-02T21:17:30.823
> 
> 标签：ruby-on-rails, ruby, activeresource

我正在使用 ActiveResource 使用一个 REST 端点，该端点具有称为 ENV.OM_PRODUCER、ENV.UMS_PRODUCER 等键的键。

这些似乎导致我的观点出现问题，我收到以下错误：

```
NameError in AppsController#index

wrong constant name ENV.UMSProducer 
```

日志中没有其他可以帮助我的任何建议。

更新：我之前还不清楚。

我还没有对数据做任何事情，在我的控制器中我有：

```
@apps = App.all 
```

在我看来，我有：

```
<%= @apps.inspect %> 
```

似乎 ActiveResource 正在解释那些 ENV。键及其引起问题。感觉就像我需要他们逃脱，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T19:14:08.950

感谢这篇[文章](http://help.airbrake.io/discussions/problems/853-xml-contains-invalid-tags-rackrequestform_hash)，我确定这是由于键中的句号而不是键名。将帖子中建议的代码放入初始化程序中的 .rb 文件中解决了该问题。

# wordpress - 没有深度的 WordPress 评论

> ID：14129313
> 
> 赞同：0
> 
> 时间：2013-01-02T21:17:39.297
> 
> 标签：wordpress, function, comments

我将 HTML 模板转换为 wordpress 主题，但遇到了麻烦。我只想添加一些正确的填充来回复评论。wp_list_comments() 函数将子评论添加到带有父评论的 div 中。

Wordpress 函数输出：

```
<div>
  <div class="comment-1"> // comment 1
    <div class="comment-2"></div> // reply 1
    <div class="comment-3"></div> // reply 2
  </div>
  <div class="comment-4"> // comment 2
</div> 
```

我的模板需要的是：

```
<div>
  <div class="comment-1"></div> // comment 1
    <div class="comment-2" class="reply"></div> // reply 1
    <div class="comment-3" class="reply"></div> // reply 2
  <div class="comment-4"> // comment 2
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:22:09.360

您需要`comments.php`在主题中使用自定义评论循环。该代码有点广泛，需要使用您的`functions.php`文件。

查看这篇关于使用文件覆盖默认输出的[WP Tuts 文章。](http://wp.tutsplus.com/tutorials/creative-coding/customizing-comments-in-wordpress-functionality-and-appearance/)

# java - 父/子序列化本地类不兼容异常

> ID：14129315
> 
> 赞同：1
> 
> 时间：2013-01-02T21:17:47.723
> 
> 标签：java

我从以下两个类中收到序列化兼容性错误。只有父类CommericalCustomer 实现了序列化。如下所示，当具有父/子关系时，使用可序列化接口的正确方法是什么？

```
public class CachedCommercialCustomers extends CommercialCustomer {

}

public class CommercialCustomer implements Serializable {

    private static final long serialVersionUID = 1L;

} 
```

**例外：**

```
[#|2013-01-02T05:01:02.553-0800|SEVERE|glassfish3.1.2|com.hazelcast.nio.AbstractSerializer|_ThreadID=10;_ThreadName=Thread-2;|spot.api.model.vo.backoffice.CachedCommercialCustomers; local class incompatible: stream classdesc serialVersionUID = -2672531984245897526, local class serialVersionUID = -743225273062282831
java.io.InvalidClassException: com.sample.CachedCommercialCustomers; local class incompatible: stream classdesc serialVersionUID = -2672531984245897526, local class serialVersionUID = -743225273062282831
        at java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:579)
        at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1600)
        at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1513)
        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1749)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1346)
        at java.io.ObjectInputStream.readUnshared(ObjectInputStream.java:458)
        at com.hazelcast.nio.DefaultSerializer$ObjectSerializer.readNormal(DefaultSerializer.java:383)
        at com.hazelcast.nio.DefaultSerializer$ObjectSerializer.read(DefaultSerializer.java:353)
        at com.hazelcast.nio.DefaultSerializer.read(DefaultSerializer.java:134)
        at com.hazelcast.nio.CustomSerializerAdapter.read(CustomSerializerAdapter.java:33)
        at com.hazelcast.nio.AbstractSerializer.toObject(AbstractSerializer.java:116)
        at com.hazelcast.nio.AbstractSerializer.toObject(AbstractSerializer.java:146)
        at com.hazelcast.nio.Serializer.readObject(Serializer.java:72)
        at com.hazelcast.impl.ThreadContext.toObject(ThreadContext.java:103)
        at com.hazelcast.nio.IOUtil.toObject(IOUtil.java:149)
        at com.hazelcast.impl.BaseManager$RequestBasedCall.getResultAsObject(BaseManager.java:384)
        at com.hazelcast.impl.BaseManager$ResponseQueueCall.getResultAsObject(BaseManager.java:455)
        at com.hazelcast.impl.BaseManager$RequestBasedCall.getResultAsObject(BaseManager.java:368)
        at com.hazelcast.impl.BaseManager$ResponseQueueCall.getResultAsObject(BaseManager.java:455) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:51:58.547

这里的问题是你没有`serialVersionId`为你的子类指定一个 - 所以java会为你生成一个。如果您更改 java 源文件，简单的重新编译可能会更改此值。请参阅[规范](http://docs.oracle.com/javase/6/docs/platform/serialization/spec/class.html)。

当代码更改时 I 会更改的事实是一件好事，但在某些情况下它会导致您有些悲伤 :)

有关更多信息以及如何在必要时“修复”问题，请参见[此处。](https://stackoverflow.com/questions/8335813/java-serialization-java-io-invalidclassexception-local-class-incompatible)

# bash - Gnuplot 抽动频率

> ID：14129322
> 
> 赞同：3
> 
> 时间：2013-01-02T21:18:12.483
> 
> 标签：bash, gnuplot

对于非常大的数据集，如何使用 gnuplot 仅将第一个和最后一个数据点的 tic 标记/标签放在 x 轴上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T21:47:49.160

使用 gnuplot 4.6 及更高版本，您可以使用命令

```
stats 'data.dat'
set xtics \
 (sprintf("%.2g",STATS_min_x) STATS_min_x, \
  sprintf("%.2g",STATS_max_x) STATS_max_x)
plot 'data.dat' 
```

对于其他版本的 gnuplot，您可以使用类似的命令序列：

```
# this setting makes sure we don't make an output right away
set terminal unknown
plot 'data.dat'
set xtics \
 (sprintf("%.2g",GPVAL_DATA_X_MIN) GPVAL_DATA_X_MIN, \
  sprintf("%.2g",GPVAL_DATA_X_MAX) GPVAL_DATA_X_MAX)
set terminal <actual terminal>
replot 
```

该`set xtics`命令采用逗号分隔的字符串对和数据值，全部在括号内。

（这里我假设您想要最小和最大数据点，而不是第一个和最后一个数据点。）

有关更多信息，您可以在 gnuplot 命令行中运行它们：

`help set format`

`help set stats`

`show variables all`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:47:10.690

我正在添加另一个答案，因为我的另一个答案确实回答了一个不同的问题，但可能有用。要回答这个问题，

**如何标记第一个和最后一个数据点的 x tic**？

这是我的方法：

```
#!/usr/bin/env gnuplot

set terminal png
set output 'test.png'

# define a function to get the first and last values.
# this assumes the file has not changed since first running 'stats',
# (and contains at least one data point)
# `plot/stats 'data.dat' using (firstlast($x))`
# should be interchangable with
# `plot/stats 'data.dat' using x
# that is, the resulting variables should be the same
firstlast(x) = ($0==0) ? (first=$1, last=$1, $1) : (last=$1, $1)

# run stats  to find the first and last values
# just on x data column
stats 'data.dat' u (firstlast($1)) nooutput

# set the x tics to the first and last x points
set xtics \
 (sprintf("%.2g (first)", first) first, \
  sprintf("%.2g (last)", last) last)

print first
print last

plot 'data.dat' 
```

我使用了这个示例数据文件：

## 数据.dat

```
1 1
2 2
3 3
4 2
0 3 
```

并得到这个输出：

![在此处输入图像描述](../Images/41eaee4762af4fe7f72345dccfa0cbdf.png)

# jquery - 使用类名为每个语句创建数组

> ID：14129323
> 
> 赞同：0
> 
> 时间：2013-01-02T21:18:12.400
> 
> 标签：jquery, arrays, join, each

我有一组以`span`元素为标题的复选框。`span`选中复选框后，我希望 url 中的文本换行。但是，我确实有用于选择`span`类名的代码。为了让我的代码正常工作，我的复选框 id 与我的`span`. 如果我`array`自己设置，这确实有效，但由于某种原因，当使用脚本创建数组时，我无法让数组工作。这是代码

HTML：

```
<div id="product_list" style="float:left; clear:right;">
<input type="checkbox" id="p01" name="system[]" value="p01" form="compare">
<span style="margin-left:20px;" class="p01">product one</span>
<br/>

<input type="checkbox" id="p02" name="system[]" value="p02" form="compare">
<span style="margin-left:20px;" class="p02">product two</span>
<br/>

<input type="checkbox" id="p04" name="system[]" value="p04" form="compare">
<span style="margin-left:20px;" class="p04">product three</span>
<br/>

<input type="checkbox" id="p05" name="system[]" value="p05" form="compare">
<span style="margin-left:20px;" class="p02">product four</span>
<br/>

</div> 
```

查询：

```
var arr = [];
arr = $('#product_list span').not('.hidden').map(function(i,e) {
return $(e).attr('class');
}).get().join(', ');

alert(arr);

    //arr = ["p01", "p02", "p03", "p04"]; works but not the above.

jQuery.each(arr , function(index, value){

$("#"+ value).click(function(){
// alert("clicked");
if ($(this).attr("checked") == "checked"){
$('.'+value).wrap('<a href="#" id="comparelink" target="_blank"></a>'); $('a').link('href', '#');    
}

else {
$('.'+value).unwrap('a');

}

});

}); 
```

[​例子](http://jsfiddle.net/STGef/57/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:27:15.113

现在，您的代码设置`arr`为字符串，如下所示

```
"p01, p02, p04, p05" 
```

只需删除`String#join`即可生成所需的数组。

```
var arr = $('#product_list span').not('.hidden').map(function(i, e) {
    return $(e).attr('class');
}).get(); 
```

此外，jQuery 没有方法`.link()`。我想你的意思是使用`.attr()`.

采用

```
$('a').attr('href', '#'); 
```

代替

```
$('a').link('href', '#'); 
```

* * *

我对您的代码进行了一些修改。

1.  `change`事件处理程序的使用。
2.  选择器的缓存，例如`$span`and `$input`。
3.  使用[`.prop()`](http://api.jquery.com/prop/)代替`.attr()`。
4.  用于[`.prev()`](http://api.jquery.com/prev/)获取`input`元素，因为它们都恰好在您的`span`元素之前。
5.  `id`从一个属性到`class`另一个属性的更改`ID`意味着在所有 DOM 中都是唯一的。

```
$('#product_list span').not('.hidden').each(function() {
    var $span = $(this), $input = $span.prev();
    $input.change(function() {
        if ($input.prop("checked")) {
            $span.wrap($('<a/>', {
                "href": "#",
                "class": "comparelink",
                "target": "_blank"
            }));
        } else {
            $span.unwrap('a');
        }
    });
});​ 
```

[**看这里。**](http://jsfiddle.net/Z9p6U/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T21:28:18.140

只需删除`join()`.

```
arr = $('#product_list span').not('.hidden').map(function(i,e) {
return $(e).attr('class');
}).get(); 
```

`get()`从 jQuery 对象中解开数组

您可以在不使用数组的情况下执行此操作，而是使用简单的遍历。

```
var $checkboxes = $('#product_list span').not('.hidden').prev();
    $checkboxes.click(function(){
         if( this.checked){
              /* "A" tag has problems...can't duplicate ID's using class and no idea what href you want*/              
              $(this).next('span').wrap('<a href="#" class="comparelink" target="_blank"></a>'); 
         }else{
              $(this).next().find('span').unwrap()
         }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T21:21:52.027

您实际上并不是在构建一个数组，而是一个字符串 ( `"p01, p02, p03, p04"`)。

代替

```
var arr = [];
arr = $('#product_list span').not('.hidden').map(function(i,e) {
return $(e).attr('class');
}).get().join(', '); 
```

和

```
var arr = $('#product_list span').not('.hidden').map(function(i,e) {
    return $(e).attr('class');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T21:35:40.673

这更像是一个替代答案，因为它并没有真正解决数组问题，但是为什么需要使用数组？这是否适用于您的代码，它会获取名称为 system[] 的所有输入元素并分配点击事件：

```
$('input[name="system[]"]').on('click', function() {
    var spanClass = $(this).attr('id');
    if ($(this).attr("checked") == "checked") {
        $('.' + spanClass).wrap('<a href="#" id="comparelink" target="_blank"></a>');
    }
    else {
        $('.' + spanClass).unwrap('a');
    }
}); 
```

​您还可以为这些输入提供一个共享类，如“chkLink”并使用它。似乎您正在为可以简化的事情做一些非常困难的事情……或者我没有掌握您的应用程序的全部意图。

# ios - Cocos2d/iOS：无法理解如何解释指针地址

> ID：14129327
> 
> 赞同：0
> 
> 时间：2013-01-02T21:18:40.110
> 
> 标签：ios, pointers, memory, cocos2d-iphone

我有一个`NSMutableArray`包含 200 个子弹（的子类`CCSprite`），创建如下：

```
capacity=200;
bullets = [[NSMutableArray alloc] initWithCapacity:capacity];

// Create a number of bullets up front and re-use them whenever necessary.
for (int i = 0; i < capacity; i++)
{
    Bullet* bullet = [Bullet bulletWithScreenRect:screenRect];
    bullet.visible = NO;
    bullet.bulletId=i;
    [bullets addObject:bullet];
    [self addChild:bullet]; 
} 
```

我创建了一个 for 循环来迭代它们并添加了一个断点来查看地址是否相同。

```
for (int i = 0; i < capacity; i++)
{
    Bullet* bullet = [bullets objectAtIndex:i];
    CCLOG(@"%i %i", i, bullet.bulletId);
} 
```

**结果是指针“bullet”对于所有 200 个项目符号 (0x1336c8a0) 始终指向内存中的相同地址**。我在项目符号 (int:bulletId) 中添加了一个属性来尝试识别它们是否是不同的对象，但看起来确实如此。**我不明白为什么指针总是指向同一个地址（它是指同一个地址吗？还是只是指针内存地址？）。**

这是我从`Bullet*`指针获取 0x1336c8a0 地址的地方：

![这是我从 <code>Bullet*</code> 指针获取 0x1336c8a0 地址的地方](../Images/f0a74c7b4460a729a60e6ee83842bbac.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:26:25.680

我会查看 Bullet 类的 bulletWithScreenRect 方法。我假设这是一个工厂方法，但也许它只是返回相同的静态对象。您可以自己分配和初始化 Bullet 对象，然后我假设有一种方法可以单独设置屏幕矩形。

换句话说，改变：

```
 Bullet* bullet = [Bullet bulletWithScreenRect:screenRect]; 
```

对于这样的事情：

```
 Bullet* bullet = [[Bullet alloc] init];
  bullet.screenRect = screenRect;  // Not sure if this setter is present. 
```

至少，为了进行健全性检查，您可以更改 Bullet 类的构造函数，以确保创建单独的实例。就像我说的，检查 bulletWithScreenRect 方法的内容，看看它到底在做什么。这对我来说似乎是罪魁祸首。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:36:44.940

那么这意味着`Bullet`您的数组中只有一个实例。在这种情况下，您的问题肯定出在您的`bulletWithScreenRect`方法中，该方法返回一个缓存实例而不是一个新实例。

您在调试器中看到的地址是指针指向的地址，而不是指针的地址，这或多或少是无用的。由于指针指向的地址总是相同的，很明显我们谈论的是同一个对象。

要测试我刚才所说的内容，您可以打印地址并将其与您在调试器中获得的值进行比较：

```
NSLog(@"Pointer own address: %p", &bullet);
NSLog(@"Address to where the pointer is pointing: %p", bullet); //this is what you should get in the debugger 
```

# javascript - 从一个MVC视图通过Javascript，调用一个控制器，并返回一个Json结果

> ID：14129335
> 
> 赞同：-3
> 
> 时间：2013-01-02T21:19:13.577
> 
> 标签：javascript, asp.net-mvc, json

我正在 MVC4 中开发单页应用程序。我有一个下拉框。当我选择该下拉框时，onchange 事件将触发调用一些 JavaScript。

我需要 JavaScript 来调用控制器并让控制器返回一些数据的 JSON 结果（我知道如何获取数据）。谁能帮我制定一个为此制定的基本框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:22:18.720

将 onchange javascript 事件连接到您的选择元素

在 onchange 的事件函数中，让 ajax 将值从选择元素发送到控制器。

在控制器/动作方法中，根据值做你的工作，然后准备 json 数据（可能是序列化？），然后返回它。

在 ajax 调用的成功部分，解析或以其他方式使用返回的 json 数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:28:34.980

在您的控制器构造函数中：

```
define('_IS_AJAX', isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) === 'xmlhttprequest'); 
```

在加载视图之前检查`_IS_AJAX`变量：

```
if(_IS_AJAX) {
    //echo json_encode(data you want to return);
} else {
    // load view normally
} 
```

在你看来（使用 jQuery）

```
$('#dropdownid').change(function() {
    $.ajax({
        url: requesturl,  //your controller URL
        dataType: 'json',
        success: function(response) {
            //Do stuff with data
            }
        },
        error: function(request, error, errormessage) {
            $("#error").html(error + '\n' + errormessage);
        }
    });
}); 
```

# xaml - 实施具有多项选择的项目列表

> ID：14129337
> 
> 赞同：4
> 
> 时间：2013-01-02T21:19:22.123
> 
> 标签：xaml, user-interface, windows-phone-8, multipleselection

在我的 WP8 应用程序中，我想实现一个与标准邮件应用程序中的功能非常相似的功能——用户可以从列表中选择多个项目。我提供了一些屏幕截图来说明这种行为：

正常状态：
![正常状态](../Images/3008baaf5489a05324c4ab47be35a655.png)

用户点击项目的左角，它变成蓝色： ![用户点击项目的左角，它变成蓝色](../Images/e8f26e923462e2b359af54f722470fb9.png)

项目被选中
![项目被选中](../Images/a5561419b8a98b54c6e97c6cf1e6a285.png)

我的问题是，这种多选功能是否是某些容器控件的标准选项，或者我是否应该进行一些自定义编程来实现这一点？在后一种情况下，您将采取什么最佳方法来实现这一点，请分享您的想法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T22:35:02.857

对于 WP8 多选，您需要使用[Windows Phone Toolkit](http://phone.codeplex.com)的 LongListMultiSelector。

[您可以在此处](http://phone.codeplex.com/SourceControl/changeset/view/80797#1336298)找到有关如何使用 LongListMultiSelector 的代码示例[（](http://phone.codeplex.com/SourceControl/changeset/view/80797#1336297)以及后面的代码）。以下是相关的 XAML 代码片段：

```
 <phone:PivotItem x:Name="BuddiesPivotItem" Header="Std longlistmultiselector">
        <toolkit:LongListMultiSelector x:Name="buddies" Background="Transparent"
                Margin="0,-8,0,0"
                ItemsSource="{StaticResource buddies}"
                LayoutMode="List"
                IsGroupingEnabled="True"
                HideEmptyGroups="True"
                JumpListStyle="{StaticResource BuddiesJumpListStyle}"
                GroupHeaderTemplate="{StaticResource BuddiesGroupHeaderTemplate}"
                ItemTemplate="{StaticResource BuddiesItemTemplate}"
    />
    </phone:PivotItem>

    <phone:PivotItem x:Name="GridModeItem" Header="Grid mode">
        <toolkit:LongListMultiSelector x:Name="GridSelector"
               ItemsSource="{StaticResource PicturesAlbum}"
               IsGroupingEnabled="False"
               GridCellSize="210,180"
               LayoutMode="Grid"
               HideEmptyGroups="True"
               ItemTemplate="{StaticResource PictureItemTemplate}"
               IsSelectionEnabledChanged="OnGridSelectorIsSelectionEnabledChanged"
               SelectionChanged="OnGridSelectorSelectionChanged"
        />
    </phone:PivotItem> 
```

当您运行这些代码片段时，您可以看到以下内容：

![LongListMutliSelector 打印屏幕](../Images/88726a2fbc1d5c68ed248d2b69b530ad.png)

[您可以在此处](http://blogs.windows.com/windows_phone/b/wpdev/archive/2012/11/20/windows-phone-toolkit-overview.aspx)阅读有关 Windows Phone 8 工具包的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-29T06:47:51.243

我的工具包中缺少 LonglistmultiSelector ..

如果我运行以下代码：

```
<toolkit:LongListMultiSelector x:Name="EmailList" 
                                                Margin="0,14,-12,0"
                                                ItemsSource="{StaticResource EmailCollection}"
                                                LayoutMode="List"
                                                SelectionChanged="OnEmailListSelectionChanged"
                                                          IsSelectionEnabledChanged="OnEmailListIsSelectionEnabledChanged"
                                                ItemTemplate="{StaticResource EmailItemTemplate}"
                                                ItemInfoTemplate="{StaticResource EmailItemInfoTemplate}"
            /> 
```

如果得到错误：错误 1 ​​名称“LongListMultiSelector”在命名空间“clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit”中不存在。

# visual-studio-2008 - 如何将 SQL Server Compact 3.5 SP1 或 SP2 添加到 Visual Studio 2008 的先决条件窗口？

> ID：14129340
> 
> 赞同：2
> 
> 时间：2013-01-02T21:19:32.200
> 
> 标签：visual-studio-2008, sql-server-ce

我的应用程序依赖于 Compact 服务器“SP1”，但是当我尝试从应用程序部署项目的先决条件窗口中添加它时，它只显示“SQL Server Compact 3.5”，这会导致安装旧版本，而不是部署时安装 SP1。

如何让 Visual Studio 2008 更新其先决条件列表以包括 SP1？甚至是 SP2 或 SQL Compact 4.0？

请注意，我已确保 SP1 已安装在开发机器中。由于某些依赖关系，我无法升级到 VS 2010。

# git - git“读取对象失败”和“无法找到”错误

> ID：14129341
> 
> 赞同：3
> 
> 时间：2013-01-02T21:19:37.443
> 
> 标签：git, gitolite

出于某种原因，几个月前发生的合并突然出现提交错误？使用 Gitolite 推送到中央服务器，并在本地进行 git flow 扩展。错误是：

git推送：

```
fatal: failed to read object 02a261fad3eae408b04d1941334875d73ddd3f57: Permission denied
error: unpack failed: unpack-objects abnormal exit 
```

而且我在本地或服务器上找不到该对象

git拉：

```
error: unable to find 379d1971a1037a97919ce37342ee7a60fc611946
error: unable to find 6e41daf37591c88c8dc18f2ecc8761e7d44a0cd9
error: unable to find 0995f5098e0a96f642c6730231d997dd6e074697 
```

好的，试试新的 git clone 怎么样：

```
error: unable to find 379d1971a1037a97919ce37342ee7a60fc611946
error: unable to find 6e41daf37591c88c8dc18f2ecc8761e7d44a0cd9
error: unable to find 0995f5098e0a96f642c6730231d997dd6e074697
error: git upload-pack: git-pack-objects died with error.
fatal: git upload-pack: aborting due to possible repository corruption on the remote side.
remote: fatal: failed to read object 6e41daf37591c88c8dc18f2ecc8761e7d44a0cd9: Permission denied
remote: aborting due to possible repository corruption on the remote side.
fatal: early EOF
fatal: index-pack failed 
```

知道可能会发生什么导致这些错误出现吗？或者更重要的是如何撤消它们？

编辑：同样在提交 6e41daf37 之后，我做了一个 'git flow feature start blah' 并提交了现有的更改而不是破坏开发。也许该功能在本地而不是 Gitolite 服务器上存在问题？在任何情况下，我都无法“发布功能”，因为它给出了上面发布的“解压无法读取对象 02a261fad3”错误

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-15T17:51:30.633

这也发生在我身上。似乎某些文件在服务器上的存储库中获得了错误的权限。以下两个命令起到了作用：

```
cd /path/to/gitolite
chown -R git * 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T21:52:14.463

由于孩子们说这看起来“粗糙”，我很确定孩子们仍然这么说，我刚刚从备份中恢复了 Gitolite 存储库，现在一切正常。不知道发生了什么，但这里是我们为什么要备份的一个很好的例子！

# jquery - 相对于元素和窗口的定位

> ID：14129342
> 
> 赞同：2
> 
> 时间：2013-01-02T21:19:39.763
> 
> 标签：jquery, jquery-ui, dialog, modal-dialog

我目前有一个定义了一堆选项的对话框。它在用户单击按钮时显示。我的对话框定义为：

```
 $('#newIssueDialog').dialog({
        autoOpen: false,
        modal: true,
        closeOnEscape: true,
        draggable: false,
        resizable: false,
        width: 415,
        height: 175,
        position: {my: "top", at: "bottom", of: "#btnNewIssue"}
    }); 
```

这会弹出我的对话框，位于我的按钮下方。
我真正想做的是弹出按钮下方的对话框，但以我的*window*为中心。

关于如何做到这一点的任何想法？

编辑：另外，是否可以考虑窗口相对于文档的位置？比如，如果页面上有滚动条，并且用户已经垂直或水平滚动了页面，我们是否可以计算出按钮的位置以及我们在页面上的位置，使其仍然位于按钮下方并居中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:57:36.497

而不是使用`my, at, of`你可以自己计算位置`left`和`top`像这样：

```
$("#btnNewIssue").on("click", function() {
    var $button = $(this);
    var $dialog = $('#newIssueDialog');

    //var top = $button.position().top + $button.height() + ($button.outerHeight() / 2);
    var top = $button.position().top + $button.height() + (($button.outerHeight(true) - $button.height()));
    var left = ($(document).width() - ($dialog.outerWidth / 2)) / 2

    $dialog.dialog({
        autoOpen: true,
        modal: true,
        closeOnEscape: true,
        draggable: false,
        resizable: false,
        width: 415,
        height: 175,
        position: [left, top]
    });
});​ 
```

以基本 HTML 为例：

```
<div id="newIssueDialog"> My modal dialog</div>
<button id="btnNewIssue">Click Me</button> 
```

​</p>

[**演示**](http://jsfiddle.net/x6nRV/)- 按钮下方的定位对话框，但位于窗口/文档的中心

我`document`在上面的示例中使用，但如果需要，您可以使用 window 代替，应该几乎没有区别。

**编辑**

修复了一个疏忽，即没有正确包含按钮的边框高度、填充和边距。

`height`我保存了小提琴，但没有添加对from的扣除`outerHeight(true)`以包含`borders`,`padding`和`margins`按钮，以防按钮有任何指定。

这个：

```
var top = $button.position().top + $button.height() + ($button.outerHeight() / 2); 
```

应该是这样的：

```
var top = $button.position().top + $button.height() + (($button.outerHeight(true) - $button.height())); 
```

演示也已更新。

**编辑**

> 但是，如果页面上存在滚动条，我现在会遇到问题。

对于垂直滚动位置，只需`scrollTop()`在末尾减去当前值，如下所示：

```
var top = $button.position().top + $button.height() + ($button.outerHeight(true) - $button.height()) - $(window).scrollTop(); 
```

要将模式水平放置在中间，您无需更改任何内容。上面的计算代码`left`似乎总是有效的。**但是**，如果在您的特定标记中对您来说是个问题，请查看[**scrollLeft()**](http://api.jquery.com/scrollLeft/)我认为它的工作方式与您需要扣除它的方式相同，类似于：

```
var left = (($(document).width() - ($dialog.outerWidth / 2)) / 2) - $(window).scrollLeft(); 
```

或者可能

```
var left = ($(window).scrollLeft() - $(document).width() - ($dialog.outerWidth / 2)) / 2; 
```

如前所述，下面的 DEMO 不需要它，但如果需要，请移动它并查看它是否适合。

> 请注意，如果您的按钮靠近屏幕底部，则模式**不会**位于按钮下方，因为它不能在屏幕外，而是会将对话框底部与屏幕底部对齐。这是预期的行为。您会看到，如果按钮下方有足够的空间，对话框将始终如预期的那样，就在按钮下方。

[**DEMO**](http://jsfiddle.net/G8tnz/) - 包括窗口滚动位置
***（您需要向下滚动才能到达按钮，您也可以向右滚动以正确测试它）***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:57:19.240

我能想到的最好的办法是在打开对话框时您必须自己指定 X/Y 坐标。

```
$("#btnNewIssue").button().click(function(){
    var x = ($(window).width() - 415) / 2;
    var y = $(this).offset().top + $(this).height();
    $("#newIssueDialog").dialog("option", "position", [x,y]).dialog("open");
});​ 
```

[演示 JSFiddle](http://jsfiddle.net/Dx3Wj/1/)

# twitter-bootstrap - 引导布局

> ID：14129343
> 
> 赞同：0
> 
> 时间：2013-01-02T21:19:47.507
> 
> 标签：twitter-bootstrap

我想在下面给我的网站一个 twitter 引导布局。但是，当我运行此代码时，我的页面中看不到任何布局，而如果您查看 [此处](http://twitter.github.com/bootstrap/scaffolding.html#layouts)链接上的示例，它会显示网页上的布局。关于为什么我的布局没有出现在网页上的任何想法？

```
 <html> 
<head><link rel="stylesheet" type="text/css" href="css/bootstrap.css"/>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="js/bootstrap.js"></script></head>
    <div class="container-fluid">
                     <div class="row-fluid" >
                             <div class="span2">

                            </div>
                    <div class="span10">

                     </div>
                     </div>
      </div>

</body> 

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:25:15.140

您里面没有任何内容-您提到的链接仅显示了具有显示该矩形的样式的示例：`<div class="mini-layout-body"></div>`

你可以明白我所说的这个[小提琴的意思](http://jsfiddle.net/YYRfq/)

# .net - WCF 远程服务器返回错误 400 错误请求

> ID：14129348
> 
> 赞同：1
> 
> 时间：2013-01-02T21:20:16.230
> 
> 标签：.net, wcf, web-services, c#-4.0, rest

我正在制作一个将在移动应用程序中使用的 WCF RESTful 应用程序。当我在 localhost 中部署这些服务时，它们都可以工作，但是当我在我的服务器中部署一个服务时，其余所有服务都给我这个错误：“远程服务器返回错误 400 错误请求”。

我正在搜索这个问题，我发现它起源于 web.config，因为它没有以正确的方式配置。这是web.config，请帮助我。我正在为这个修复而崩溃。

```
<?xml version="1.0"?>
<configuration>

<system.web>
    <compilation debug="true" targetFramework="4.0" />
</system.web>

<system.serviceModel>

    <services>
        <service name="Servicios.Mobile" behaviorConfiguration="ServiceBehaviour">
            <endpoint address="" binding="webHttpBinding" bindingConfiguration="wsHttp" contract="Servicios.IMobile" behaviorConfiguration="web">
            </endpoint>         
        </service>
    </services>

    <behaviors>
        <serviceBehaviors>
            <behavior name="ServiceBehaviour">
                <serviceMetadata httpGetEnabled="true"/>
                <serviceDebug includeExceptionDetailInFaults="false"/>
            </behavior>
        </serviceBehaviors>
        <endpointBehaviors>
            <behavior name="web">
                <webHttp/>
            </behavior>
        </endpointBehaviors>
    </behaviors>

    <bindings>
        <webHttpBinding>
            <binding name="wsHttp" maxReceivedMessageSize="50000000" maxBufferPoolSize="50000000">
                <readerQuotas maxDepth="500000000" maxArrayLength="500000000" maxBytesPerRead="500000000" maxNameTableCharCount="500000000" maxStringContentLength="500000000"/>
            </binding>
        </webHttpBinding>
    </bindings>

    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />

</system.serviceModel>

<system.webServer>

    <modules runAllManagedModulesForAllRequests="true"/>

</system.webServer> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:40:23.710

不确定问题是什么，但在 WCF 中启用日志记录非常容易。您收到的错误是通用错误，启用日志记录将向您显示正确的错误。

检查这篇文章：http: [//intrepiddeveloper.wordpress.com/2008/08/07/security-event-logging-auditing/](http://intrepiddeveloper.wordpress.com/2008/08/07/security-event-logging-auditing/)

# javascript - 我的 JavaScript 方程有问题（二进制到十进制转换器的一部分）

> ID：14129351
> 
> 赞同：3
> 
> 时间：2013-01-02T21:20:28.320
> 
> 标签：javascript, binary, decimal, converter, equation

所以这很令人愤慨，一个简单的方程会产生一个我无法理解的随机数。

好的，所以我正在尝试制作一个从二进制转换为十进制的应用程序。我知道这样做的一种方法是这样做。

比如说，11001 以十为底。

取最左边的数字：1

```
0 * 2 + 1(This 1 is the leftmost binary digit) = 1...
1 * 2 + 1(This 1 is the second leftmost binary digit) = 3...
3 * 2 + 0(etc...) = 6...
6 * 2 + 0 = 12...
12 * 2 + 1 = 25... 
```

所以，它正确地转换为 25。虽然，当我用 JavaScript 中的变量插入这个方程时，结果是随机的废话。

手表：

Inputarray 是用户输入的数字中所有字符的数组。所以，如果是 11010，那么 inputarray 就是 1,1,0,1,0。

然后它遍历数组的每个字符，并将每个数字插入方程中，如图所示。

```
for (var j=0;j<=uinputlen;j++) {
var nextletter = uinput.charAt(j);
inputarray.push(nextletter);
}

for (var h=0;h<=uinputlen;h++) {
decvalue = decvalue * 2 + inputarray[h];
} 
```

顺便说一句，“decvalue”在我的代码开头预设为 0。

请对描述或其他任何问题发表评论，这有点令人困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:26:11.433

JavaScript 可以原生地做到这一点：

```
var binary = "11001";
var decimal = parseInt(binary,2);

// other way:

var decimal = 1234;
var binary = decimal.toString(2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:26:53.693

您正在添加一个字符代码，而不是数字代表的值。 `.charAt()`将返回`'0'`or `'1'`which 是一个字符串，因此，它将作为字符串添加。

我建议您更改将值推送到以下内容的方式：

```
inputarray.push(nextletter == '1' ? 1 : 0) 
```

或者

```
inputarray.push(nextletter * 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T21:27:35.270

由于您在输入数组中获取字符，因此 JavaScript 将结果转换为字符串：

`var a = 0; a = a * 2 + '1'; alert(a); //alerts "01"`

为了获得您想要的行为，您需要转换字符串：

`var a = 0; a = a * 2 + Number('1'); alert(a); //alerts 1`

一般来说，有更好的方法来做到这一点，（比如@Kolink的回答）

有关详细信息，请参阅[http://www.quirksmode.org/js/strings.html#stringnum](http://www.quirksmode.org/js/strings.html#stringnum)。

# android - CursorLoader 连接到错误的 ContentProvider

> ID：14129352
> 
> 赞同：3
> 
> 时间：2013-01-02T21:20:31.037
> 
> 标签：android, android-contentprovider, android-loader

# 问题

CursorLoader 实例化似乎使用了先前 CursorLoader 的 URI，而不是作为参数传入的 URI。

```
CursorLoader cursor = new CursorLoader(this, FLASHCARD_CONTENT_URI, 
FLASHCARD_FROM, null, null, null); 
```

给出以下错误：

```
no such column: front (code 1): , while compiling: 
SELECT _ID, front, back, FROM deck 
```

# 课程

1.  DeckIndex.java - 负责查询数据库“甲板”表并返回甲板的游标数组。
2.  DeckShow.java - 负责查询数据库“flashcard”表并返回一个Cursor数组的flashcards。
3.  AducardOpenHelper.java - 负责数据库的 DDL 和创建。
4.  DecksProvider - 负责“甲板”表的 CRUD
5.  FlashcardsProvider - 负责“flashcard”表的 CRUD

# 解释

**正在传递的 URI：**

```
public static final Uri FLASHCARD_CONTENT_URI = 
Uri.parse("content://" + AUTHORITY + "/" + FLASHCARD_TABLE_NAME); 
```

我知道这是由 DecksProvider 而不是 FlashcardsProvider 处理的。

**以及 FlashcardsProvider 中的 UriMatcher：**

```
@Override
public boolean onCreate(){
    uriMatcher = new UriMatcher(UriMatcher.NO_MATCH);
    uriMatcher.addURI(AUTHORITY, "flashcard", FLASHCARDS);

    auducards = new AuducardOpenHelper(getContext());
    return true;
} 
```

我认为重要的是要提到首先调用 DecksIndex 类，因此对 DeckProvider 的调用成功完成。直到我在调用 DeckShow onCreate 方法时单击其中一个牌组（它启动了 DeckShow 活动）：

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getLoaderManager().initLoader(1, null, this);
        setContentView(R.layout.activity_deck_show);
        mAdapter = new SimpleCursorAdapter(this, R.layout.flashcard_item, null, 
              FLASHCARD_FROM, FLASHCARD_TO, 0 );

        Intent intent = getIntent();
        String message = intent.getStringExtra(DeckIndex.EXTRA_MESSAGE);

    } 
```

并发生错误。

**LoaderManager 初始化行：**

甲板索引.java

```
getLoaderManager().initLoader(0, null, this); 
```

甲板秀.java

```
getLoaderManager().initLoader(1, null, this); 
```

感谢您查看我的问题，如果有任何其他详细信息或代码有帮助，请告诉我！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-27T04:53:50.230

我遇到了这个问题并了解到为了添加第二个内容提供者，我必须：

*   在 Androidmanifest.xml 文件中定义第二个提供程序。将 android:authority 设置为包和类的全名。
*   使用权限作为 URL

每个提供者的权限必须是唯一的，并且每个提供者的 URL 必须与权限匹配。URL 也必须全部小写。

这是一个假设的配置：

### AndroidManifest.xml

```
<application>
  <provider android:name="com.acme.ProviderOne"
    android:authorities="com.acme.providerone" />
  <provider android:name="com.acme.ProviderTwo"
    android:authorities="com.acme.providertwo" />
</application 
```

### src/com/acme/providerone.java

```
package com.acme

import android.content.ContentProvider;

public class ProviderOne extends ContentProvider {
  public static final Uri CONTENT_URI = Uri.parse("content://com.acme.providerone/objects");
  private static final int ALLROWS = 1;
  private static final int SINGLE_ROW = 2;

  static {
    uriMatcher = new UriMatcher(UriMatcher.NO_MATCH);
    uriMatcher.addURI("com.acme.providerone", "objects", ALLROWS);
    uriMatcher.addURI("com.acme.providerone", "objects/#", SINGLE_ROW);
  }
} 
```

### src/com/acme/providertwo.java

```
package com.acme

import android.content.ContentProvider;

public class ProviderTwo extends ContentProvider {
  public static final Uri CONTENT_URI = Uri.parse("content://com.acme.providertwo/objects");
  private static final int ALLROWS = 1;
  private static final int SINGLE_ROW = 2;

  static {
    uriMatcher = new UriMatcher(UriMatcher.NO_MATCH);
    uriMatcher.addURI("com.acme.providertwo", "objects", ALLROWS);
    uriMatcher.addURI("com.acme.providertwo", "objects/#", SINGLE_ROW);
  }
} 
```

# shell - 按条件shellscript删除redis文档

> ID：14129354
> 
> 赞同：0
> 
> 时间：2013-01-02T21:20:54.153
> 
> 标签：shell, redis

我正在为我的使用 Redis 的 node.js 项目使用非常棒的插件，因为我熟悉其他数据库并且只需要一次我正在寻找可以删除/清空/删除我不理解的文档的 shellscript：

`q:job:state = "complete"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:58:02.637

假设您有一个任务队列并且您想要删除已完成的任务，您可以以不同的方式处理它。例如，您可以为队列创建一个[Redis 列表](http://redis.io/commands#list)

然后您可以使用 lpop 从队列中获取第一个任务并执行它。lpop 获取列表的第一个值并将其删除。如果作业不成功，您可以使用 lpush ot rpush 将任务分别作为第一个或最后一个值放回队列，以便重新执行。

# javascript - 为什么这个全局 Javascript 变量在函数内部和外部的行为不同？

> ID：14129355
> 
> 赞同：0
> 
> 时间：2013-01-02T21:21:17.457
> 
> 标签：javascript

我试图理解为什么我的全局变量 'imageUrl' 在函数 'genericOnClick()' 内部和外部的行为不同

```
var imageUrl

var id = chrome.contextMenus.create({
    "title": "Add to JC Queue",
    "contexts": ["image"],
    "onclick": genericOnClick
});

function genericOnClick(info) {
    imageUrl = info.srcUrl;
    console.log(imageUrl);
    chrome.tabs.create({
        url: chrome.extension.getURL('dialog.html'),
        active: false
    }, function (tab) {
        // After the tab has been created, open a window to inject the tab
        chrome.windows.create({
            tabId: tab.id,
            type: 'popup',
            focused: true
        });
    });
}

console.log(imageUrl); 
```

请让我知道我哪里出错了：

1.  将 imageUrl 声明为全局变量
2.  将 id 声明为全局变量并运行函数 OnClick()
3.  将 imageUrl 记录到函数内的控制台（显示正常）
4.  函数运行后将 imageUrl 记录到控制台（未定义）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:23:04.260

当第二个`console.log`运行时，该函数还没有被调用，因此变量还没有被分配任何东西。但是，在函数内部，它收到了一个值，这就是您所看到的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T21:22:53.053

好吧，当您在调用函数**之前记录它**`imageURL` **时** `undefined`，代码末尾的日志会在调用函数**之前**运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T21:23:40.510

最后一行 ( `console.log(imageUrl);`) 几乎在您声明`imageUrl`没有值之后立即运行，因此此时它是未定义的。

尝试设置`imageUrl`为初始值，您会看到该值将被记录。

# openxava - 访问openxava中某个部分内的集合的详细信息元素

> ID：14129356
> 
> 赞同：0
> 
> 时间：2013-01-02T21:21:20.197
> 
> 标签：openxava

如何使用 openxava 访问位于另一个实体的一个部分内的集合实体的详细信息元素？例如，在实体 A 的视图中，我们有 {S1,S2,S3} 部分，而在 S3 部分视图中，我们有 {实体 B 的集合}。现在我想访问实体 B 的详细信息元素，以便我可以在动作控制器中填充该元素。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:23:40.790

直接从视图中获取集合，方式如下：

```
Collection myCollection = getView().getSubview("myCollection").getCollectionObjects(); 
```

即使使用最旧的 OpenXava 版本，它也必须工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T20:39:00.307

You can do it in several ways. Here you have one, I have used it with some references that I want to modify from inside of an action called by the base module (which should work with your collection):

```
Query q = XPersistence.getManager().createQuery("JPQL QUERY TO RETRIVE THE COLLECTION WITH :parameterIfNeeded");
q.setParameter("parameterIfNeeded", "value");
List entityBList = q.getResultList();
if (getView().getModelName().equalsIgnoreCase("yourBaseModelViewName")) {
    getView().getSubview("yourSubViewName").setModel(entityBList);
    getView().getSubview("yourSubViewName").refresh();
} 
```

You must to be using OX 4.6 to be able to use setModel(). And remember that the "yourSubViewName" is the name of the property for your collection into the base model.

I have not tested that code with a collection, so make the adjustments according to your needs, maybe you will need to CAST the query result list or something.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T12:30:25.367

获取与视图关联的实体并从中获取集合。从 OpenXava 4.3 开始，您可以这样做：

```
MyEntity myEntity = (MyEntity) getView().getEntity();   
Collection myCollection = myEntity.getMyCollection(); 
```

如果您使用的是 4.3 之前的 OX，请按以下方式进行：

```
Map keyValues = getView().getKeyValuesWithValue();
if (!keyValues.isEmpty()) {
    MyEntity myEntity = (MyEntity) 
        MapFacade.findEntity(getView().getModelName(), keyValues);
    Collection myCollection = myEntity.getMyCollection();
} 
```

# exception - jpa实体复杂键错误

> ID：14129360
> 
> 赞同：0
> 
> 时间：2013-01-02T21:21:46.780
> 
> 标签：exception, jpa, entity

我需要你的帮助来解决我的 JPA 问题。请查看以下实体和主复合键。

@Embeddable 公共类 BookingPK 实现 Serializable { private static final long serialVersionUID = 1L;

```
private String carrid;
private String connid;
private String bookid;

public String getcarrid()
{
    return this.carrid;
}

public void setcarrid(String carrid)
{
    this.carrid = carrid;
}

public String getconnid()
{
    return this.connid;
}

public void setconnid(String connid)
{
    this.connid = connid;
}

public String getbookid()
{
    return this.bookid;
}

public void setbookid(String bookid)
{
    this.bookid = bookid;
}

 public int hashCode() 
 {
    return (int) ( this.carrid.hashCode())
            +(int) ( this.connid.hashCode())
            +(int) ( this.bookid.hashCode());

 }

 public boolean equals(Object obj) 
 {
    if (obj == this) return true;
    if (!(obj instanceof Booking)) return false;
    BookingPK pk = (BookingPK) obj;
    return  pk.carrid.equals(this.carrid)
            && pk.connid.equals(this.connid)
            && pk.bookid.equals(this.bookid);
 }

@Entity
public class Booking 
{
@EmbeddedId
private BookingPK bookingPrimaryKey;
private String CANCELLED;

public BookingPK getbookingPrimaryKey()
{
    return this.bookingPrimaryKey;
}

public void setbookingPrimaryKey(BookingPK key)
{
    this.bookingPrimaryKey = key;
}

public String getCANCELLED()
{
    return this.CANCELLED;
}

public void setCANCELLED(String CANCELLED)
{
    this.CANCELLED = CANCELLED;
}
}

@Embeddable
public class FlightPK implements Serializable 
{
private static final long serialVersionUID = 1L;

private String carrid;
private String connid;

public String getcarrid()
{
    return this.carrid;
}

public void setcarrid(String carrid)
{
    this.carrid = carrid;
}

public String getconnid()
{
    return this.connid;
}

public void setconnid(String connid)
{
    this.connid = connid;
}

  public int hashCode() 
  {
    return (int) ( this.carrid.hashCode())
            +(int) ( this.connid.hashCode());
  }

  public boolean equals(Object obj) 
  {
    if (obj == this) return true;
    if (!(obj instanceof Flight)) return false;
    FlightPK pk = (FlightPK) obj;
    return  pk.carrid.equals(this.carrid)
            && pk.connid.equals(this.connid);
 }
}

@Entity
public class Flight 
{
@EmbeddedId
private FlightPK flightPrimaryKey; 

private Booking bookedFlight;

public Booking getbookedFlight()
{
    return this.bookedFlight;
}

public void setbookedFlight(Booking flight)
{
    this.bookedFlight = flight;
}

public FlightPK getflightPrimaryKey()
{
    return this.flightPrimaryKey;
}

public void setPRICE(FlightPK key)
{
    this.flightPrimaryKey = key;
}
} 
```

当我运行我的应用程序来创建数据库表时，我得到以下异常：

线程“主”javax.persistence.PersistenceException 中的异常：异常 [EclipseLink-0]（Eclipse 持久性服务 - 2.3.2.v20111125-r10461）：org.eclipse.persistence.exceptions.IntegrityException

## 描述符例外：

异常 [EclipseLink-48] (Eclipse Persistence Services - 2.3.2.v20111125-r10461)：org.eclipse.persistence.exceptions.DescriptorException 异常描述：字段 [FLIGHT.CONNID] 存在多个可写映射。只有一个可以定义为可写，所有其他必须指定为只读。映射：org.eclipse.persistence.mappings.OneToOneMapping[bookedFlight] 描述符：RelationalDescriptor(testik.Flight --> [DatabaseTable(FLIGHT)])

异常 [EclipseLink-48] (Eclipse Persistence Services - 2.3.2.v20111125-r10461)：org.eclipse.persistence.exceptions.DescriptorException 异常描述：字段 [FLIGHT.CARRID] 存在多个可写映射。只有一个可以定义为可写，所有其他必须指定为只读。映射：org.eclipse.persistence.mappings.OneToOneMapping[bookedFlight] 描述符：RelationalDescriptor(testik.Flight --> [DatabaseTable(FLIGHT)])

## 运行时异常：

```
at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:517)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:188)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getMetamodel(EntityManagerFactoryDelegate.java:591)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.getMetamodel(EntityManagerFactoryImpl.java:506)
at org.odata4j.producer.jpa.JPAEdmGenerator.generateEdm(JPAEdmGenerator.java:95)
at org.odata4j.producer.jpa.JPAProducer.<init>(JPAProducer.java:91)
at com.mockservice.MockService.<init>(MockService.java:34)
at com.mockservice.MockService.main(MockService.java:51) 
```

原因：异常 [EclipseLink-0] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.IntegrityException

## 描述符例外：

请告知有什么问题。我已经尝试了一切，但没有成功。

问候，斯拉维克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:27:04.537

发生错误是因为您有多个属性映射相同的列。你的模型似乎很困惑。如果连接和运营商是唯一的，那么为什么预订需要另一个 ID？或者一个航班怎么能有一个唯一的预订？

就我个人而言，我不建议使用 EmbeddedId，而是使用 IdClass，并在您的关系中使用 @Id。您也可以在连接列上使用 insertable/updateable=false，但您的模型似乎很奇怪。

看，

[http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#JPA_2.0](http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#JPA_2.0)

# javascript - 在 Dojo 中创建八进制 NumberSpinner

> ID：14129363
> 
> 赞同：0
> 
> 时间：2013-01-02T21:21:57.460
> 
> 标签：javascript, dojo, octal

我试图限制 dijit.form.NumberSpinner 以便它只接受 0 到 0777 之间的八进制数。

我试图通过在构造函数中设置约束然后覆盖 NumberSpinner 的调整（...）函数来做到这一点。在我的 HTML 页面中，我有：

```
<input name="umask" id="umask" data-dojo-type="dijit.form.NumberSpinner"
value="022" data-dojo-props="smallDelta:1, largeDelta:4,
constraints:{min:0, max:777, places:0},
adjust: function(val, delta) { octalAdjust(val, delta, this.constraints); }"/> 
```

在我包含的 JavaScript 中，我有：

```
function octalAdjust(val, delta, constraints) {
     ...
 return newval;
}; 
```

我遇到的问题是，当我单击数字微调器上的“向上”或“向下”按钮时，我的 octalAdjust 函数会被一遍又一遍地调用。我不知道为什么它会被重复调用？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:18:15.290

在你的`adjust`函数中，你没有返回`octalAdjust`- 你只是在调用它。像这样更改您的`adjust`覆盖：

```
adjust: function(val, delta) { return octalAdjust(val, delta, this.constraints); } 
```

# objective-c - 从objective-c中的一组方法中创建类

> ID：14129365
> 
> 赞同：0
> 
> 时间：2013-01-02T21:22:09.860
> 
> 标签：objective-c, ios, class, methods, nsarray

我在视图控制器中有一系列方法，它们用数据填充数组，还允许在其中选择各种项目 - 工作正常。代码如下（为了清楚起见，我在每种方法中取出了代码）。

我的问题是：我多次重复使用此代码，并且总是将其复制并粘贴到新项目中。我认为访问执行以下所有操作的类（？）会更容易，而不是将所有这些方法复制并粘贴到每个 vc 中。然后我可以引用类文件 - 清理我的代码并减少 vc 中的行。

如何将这些方法转换为我可以分配（？）或从视图控制器中调用的东西？

```
- (NSArray *)imageData {

        return __imageData;
}

       - (UIImage *)maskAtIndex:(NSUInteger)index maskType:(NSString*)maskName {

            return [UIImage imageWithContentsOfFile:path];    
        }

        - (UIImage *)imageAtIndex:(NSUInteger)index phaseType:(NSString*)phaseName {

            return [UIImage imageWithContentsOfFile:path];    
        }

        - (UIImage *)phaseaAtIndex:(NSUInteger)index {

            return [UIImage imageWithContentsOfFile:path];
        }

        - (NSString *)imageNameAtIndex:(NSUInteger)index phaseType:(NSString*)phaseName {

            return name;
        }

        - (NSString *)maskNameAtIndex:(NSUInteger)index maskType:(NSString*)maskName{

            return mask;
        }

        - (NSString *)phaseaNameAtIndex:(NSUInteger)index {

            return phasea;
        }

        - (CGSize)imageSizeAtIndex:(NSUInteger)index {

            return size;
        }

        - (NSUInteger)imageCount {

            return __count;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:23:28.623

这类代码可能应该在 UIImage 上的一个类别中。

见这里： http: [//macdevelopertips.com/objective-c/objective-c-categories.html](http://macdevelopertips.com/objective-c/objective-c-categories.html)

# javascript - 在现有游戏上使用 AngularJS 作为 UI 层

> ID：14129367
> 
> 赞同：4
> 
> 时间：2013-01-02T21:22:11.717
> 
> 标签：javascript, angularjs

我有一个使用[three.js](https://github.com/mrdoob/three.js/)创建的游戏，它完全呈现在一个画布元素中。

作为一个帮助我熟悉[Angular JS](http://angularjs.org/)的练习，我开始在我的画布上添加一个 UI 层，该层将由 Angular 框架管理。

我的标记的粗略示例如下所示：

```
 <div class="container" ng-app="hud-layer">          
        <div class="level" ng-controller="HUDCtrl">
            <h1>Level: {{level}}</h1>
            <button ng-click="decreaseLevel()">-</button>
            <button ng-click="increaseLevel()">+</button>
        </div>
        <div id="game"></div>
    </div> 
```

我显然打算向我的 HUD 添加更多 UI 元素，但我需要知道如何从 Angular 调用我的 game.js 中的函数。

我的 game.js 被封装在它自己的命名空间中，例如：

```
(function(){
      var VECTORS = {

          init: function(){

          },

          reset: function(){

          }

          // ... blah blah blah

      }
 }); 
```

我希望 Angular 监视关卡、分数变量等，但我希望这些变量反映在我的 game.js 中，我应该以某种方式在 game.js 中镜像 $scope 吗？

任何帮助或方向表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T22:02:49.847

您将不得不做一些事情，例如将游戏模块模式中的接口返回到全局命名空间（窗口）中，然后将 $window 注入到您的 Angular 控制器或服务中（取决于您想要获得的高级程度）。

所以像（伪代码）：

```
var game = (function(){
      var VECTORS = {

          init: function(){
          },

          reset: function(){
          },

          // ... blah blah blah

      }

     //return an interface to your game.
     return {
          doSomething: function () {
               //do anything you want here.
              VECTORS.foo++;
              VECTORS.bar += VECTORS.foo;
              return VECTORS.bar;
          }
     }
 })(); 
```

然后在您的控制器中（或在这种情况下为服务）：

```
app.factory('gameService', ['$window', function($window) {  
   return {
      doSomething: function (){ 
         return $window.game.doSomething();
      }
   };
}]);
app.controller('FooCtrl', ['$scope', 'gameService', function($scope, gameService) {
   $scope.clickyThing = function () {
      gameService.doSomething();
   };
}]); 
```

显然，然后在你的游戏的 doSomething() 函数中，你可以对闭包中的项目做任何你需要做的事情，而无需将它们完全暴露给你的 Angular 应用程序。

它将保持模块化。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T21:39:02.437

没问题，您的 game.js 处于关闭状态。AngularJs 有一个很棒的特性：[依赖注入](http://docs.angularjs.org/guide/di)。所以让我们使用它。

你可以在你的 中定义一个模块和一个服务`game.js`，它们将在**angular.js**中注册。该服务负责将游戏数据返回到您关闭之外的控制器。

所以你创建一个**模块**：

```
var app = angular.module('game-bridge', []); 
```

以及 game.js 中的接口服务（例如 GameBridge）：

```
app.factory('GameBridge', ['$log', function($log) {
   return {
      ...
    };
}]); 
```

你的 hud-layer 模块加载了 game-bridge 模块，它的控制器注入了 GameBridge 服务：

```
var app = angular.module('hud-layer', ['game-bridge']);
app.controller('HUDCtrl', ['$log', 'GameBridge', function($log, GameBridge) {
   ...
}]); 
```

# asp.net-mvc - MVC 使用 Json.NET 序列化 json

> ID：14129369
> 
> 赞同：0
> 
> 时间：2013-01-02T21:22:16.637
> 
> 标签：asp.net-mvc, json, json.net

我在控制器中有这段代码

```
[HttpPost]
public ActionResult Index([DataSourceRequest]DataSourceRequest request)
{
    var tickets = db.Tickets.Include(t => t.AreaOfBusiness).Include(t => t.Assignee).Include(t => t.Severity).Include(t => t.TicketStatu);
    return this.Json(tickets.ToDataSourceResult(request));
} 
```

但我明白了

> 序列化“System.Data.Entity.DynamicProxies.Ticket_2B104FE45830306408DA130C08090F61ADA6B8A0106592FECE85087B94B”类型的对象时检测到循环引用

启动 KendoGrid 时。

我读到 NewtonSoft Json.Net 可以处理循环引用。我无法理解如何使用它。

你能帮我修改代码以使用 Json.Net 吗？

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:11:11.170

`ToDataSourceResult`返回对象`DataSourceResult`。

剑道文档

**序列化类型对象时检测到循环引用**

这个错误的原因是Json方法使用的JavaScriptSerializer类无法序列化包含循环引用（互相引用）的对象图。最好的解决方案是使用 View Model 对象并避免序列化创建循环引用的属性。查看[“如何避免循环引用异常”](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/faq#how-do-i-avoid-circular-reference-exceptions?)常见问题解答部分以获取更多信息。

[见文档](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/troubleshooting#a-circular-reference-was-detected-while-serializing-an-object-of-type)

**“如何避免循环引用异常？”** ：

如果序列化对象包含循环引用，JavaScriptSerializer 类将抛出异常。为避免这种情况，请使用视图模型并排除创建循环引用的属性

[看例子](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/faq#how-do-i-avoid-circular-reference-exceptions?)

[更多数据](http://www.kendoui.com/forums/mvc/grid/todatasourceresult.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-13T15:47:46.990

或者...您可以启用 json.net 功能来序列化处理对象的循环引用

在你的*global.asax.cs*

```
System.Net.Http.Formatting.JsonMediaTypeFormatter jsonMediaTypeFormatter = GlobalConfiguration.Configuration.Formatters.OfType<System.Net.Http.Formatting.JsonMediaTypeFormatter>().FirstOrDefault();
jsonMediaTypeFormatter.SerializerSettings.ReferenceLoopHandling = Newtonsoft.Json.ReferenceLoopHandling.Serialize;
jsonMediaTypeFormatter.SerializerSettings.PreserveReferencesHandling = Newtonsoft.Json.PreserveReferencesHandling.Objects; 
```

请记住禁用延迟加载，否则它将下载整个数据库，在 dbsets 上使用 include 来保持您想要的关系并解析现在表现得像字典一样的 json，例如：[https ://gist.github.com/keesey /7995398](https://gist.github.com/keesey/7995398)

# ios - 如何在 Xcode 中添加动画？

> ID：14129375
> 
> 赞同：-2
> 
> 时间：2013-01-02T21:22:28.033
> 
> 标签：ios, xcode, animation

我不知道如何制作动画，也不知道如何将其放入 Xcode。有人可以给我一些背景信息吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T22:05:50.247

```
NSArray *animationArray = [NSArray arrayWithObjects:[UIImage imageNamed@"firstImage",[UIImage imageNamed@"secondImage",nil];  //add as many as you want 
```

现在您需要一个 imageview 来将动画设置为：

```
self.myImageView.animationImages =animationArray;
self.myImageView.animationDuration = 3;
self.myImageView.animationRepeatCount = -1; //keeps going infinitely

[self.myImageView startAnimating]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:04:20.520

我猜你想要做的是创建一个动画图像，而不是动画视图转换......这里是关于为 iOS 创建动画的两种方法的一些背景知识。

第一个选项：创建一个图像数组（UIImage），然后使用 startAnimating 方法。像这样的东西：

```
imageView.image = yourLastImage;  
// Do this first so that after the animation is complete the image view till show your last image.

NSArray * imageArray  = [[NSArray alloc] initWithObjects:
[UIImage imageNamed:@"image1.png"],  
[UIImage imageNamed:@"image2.png"],
[UIImage imageNamed:@"image3.png"],                         
[UIImage imageNamed:@"image4.png"],
nil]; 

// Note: here you may instead want to use something like [UIImage imageWithContentsOfFile:[self localImagePath:NO]] instead depending upon your targeted iOS version.

UIImageView * animatedImageView = [[UIImageView alloc] initWithFrame:
        CGRectMake(100, 125, 150, 130)];
    animatedImageView.animationImages = imageArray;
    animatedImageView.animationDuration = 1.1;
        myAnimation.animationRepeatCount = 1;
    animatedImageView.contentMode = UIViewContentModeBottomLeft;

    [self.view addSubview:animatedImageView];
    [animatedImageView startAnimating]; 
```

第二个选项：（适用于 iOS 4 及更高版本）您可以使用基于块的方法。这是 StackOverflow 上的参考文章的链接。

[iPhone OS 4.0 中有哪些基于块的动画方法？](https://stackoverflow.com/questions/3126833/what-are-block-based-animation-methods-in-iphone-os-4-0)

此外，您可能想查看 Apple 提供的与 Core Animation 相关的文档：

[http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/AnimatingLayers.html#//apple_ref/doc/uid/TP40006085-SW1](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/AnimatingLayers.html#//apple_ref/doc/uid/TP40006085-SW1)

# html - 调整窗口大小时图像移动

> ID：14129379
> 
> 赞同：0
> 
> 时间：2013-01-02T21:22:34.560
> 
> 标签：html, css, resize, positioning

我曾多次尝试让我的网站上的图像在调整窗口大小时不移动 - 没有运气。

我“只是”希望这个图像完全保持在同一个地方，不管窗口大小。

这是我想要在顶部的图像“kranz”，在文本“本周的英雄”之上。如您所见，文本保持在同一位置。

如果您有任何建议或解决方案，我将很高兴听到他们的声音！

jsfiddle.net/VDfN4

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:28:04.087

很难用当前的代码以及你想要完成的确切内容来判断，但据我所知，问题可能是因为#kranz img 上的绝对定位。尝试使用 position:relative 或将 kranz div 包装在另一个 position:relative 的 div 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:28:06.813

不要使用百分比来放置。

```
#kranz img {
 position:absolute;
left:42%;
margin-left:-50px;
margin-top:-13%;
width:275px;
} 
```

左边：42% 是容器宽度（或窗口宽度）的 42%，margin-top 是容器高度（或窗口高度）的 13%....所以如果窗口调整大小并且容器调整测量值的大小改变。使用像素或其他一些绝对度量而不是相对度量，例如百分比。

# python - PyRRD-0.1.0：如何使用数据元组调用 RRD.bufferValue()？

> ID：14129381
> 
> 赞同：0
> 
> 时间：2013-01-02T21:22:41.420
> 
> 标签：python, rrdtool

PyRRD文档说调用而不是**列出**`rrd.update(timestamp, value1, value2, ...)` 参数列表中的每个单个值，我想`update()`用一个已经包含值的元组来调用：

```
myValueTuple=[10,11,12,13]
rrd.update(timestamp, myValueTuple) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:58:06.547

该解决方案由 python 的本机功能提供，可将元组扩展为参数列表，方法是在元组前面添加星号“*”：

> rrd.update（时间戳，*myValueTuple）

# iphone - 获取当前UIView的ID Objective-c iphone

> ID：14129384
> 
> 赞同：0
> 
> 时间：2013-01-02T21:22:53.107
> 
> 标签：iphone, objective-c, ios, uiview, uiwindow

如何获取当前`UIView`的 ID，以便以后可以在不使用 的情况下使用它`IBOutlet`？

我想在我的应用程序顶部添加一个图像，但我经常切换视图并且希望能够将图像添加到当前视图，因为它会显示在我的第二个视图中

提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:28:01.793

您无法像在 Android 设备上那样通过 ID 访问 UIView。IBOutlets 相当于将图形布局连接到代码。

根据您的评论，您要做的适当的事情是在视图层次结构中的更高级别添加覆盖视图。如果您有两个可以在任何给定时间显示的视图，并且您想确保可以覆盖其中任何一个，无论哪个到位，请将您的叠加视图添加到这两个视图的超级视图中。这一直有效到使用您的 App Delegate 拥有的 UIWindow 对象，这将使您可以覆盖所有内容（例如，这本质上是 UIAlertViews 的工作方式。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T21:36:25.357

你可以设置 UIView 的标签属性。然后你可以从superview中引用它

```
- (UIView *)viewWithTag:(NSInteger)tag 
```

# batch-file - 您如何将输入和设计保持在同一行，而不会切到下一行？

> ID：14129385
> 
> 赞同：1
> 
> 时间：2013-01-02T21:22:53.807
> 
> 标签：batch-file

所以我正在创建一个批处理文件，它显示您的目录，这只是一个功能，但无论如何，您将在批处理文件中更改目录，因此目录文本将更改...

所以这里有一个例子说明它的作用......

```
|----------------------------------|
|>>C:\Users\Joel\..................|
|----------------------------------| 
```

当您更改目录时，它看起来像：

```
|----------------------------------|
|>> C:\Users\Joel\Desktop\.................|
|----------------------------------| 
```

我该如何制作它，所以它需要多少个字母而不是从空格中取出它？

请帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T00:05:10.180

您想将字符串填充到固定长度。简单的策略是创建一个变量，其中包含您的字符串加上足够多的填充字符以达到您的限制。然后使用子字符串操作将字符串修剪为所需的长度。如果它已经大于或等于所需长度，我稍微修改了算法以保留整个字符串。

```
@echo off

:: Initialize
setlocal enableDelayedExpansion
set maxLen=50
set "pad="
set "div="
for /l %%N in (1 1 %maxLen%) do (
  set "pad=!pad!."
  set "div=!div!-"
)
set "div=|!div!|"

:: Test the display
pushd "c:\Users\Joel"
call :displayCurrentDirectory
pushd "c:\Users\Joel\Desktop"
call :displayCurrentDirectory
exit /b

:displayCurrentDirectory
setlocal
set "txt=>>!cd!\"
if "!txt:~%maxLen%,1!" equ "" (
  set "txt=!txt!!pad!"
  set "txt=!txt:~0,%maxLen%!"
)
echo !div!
echo ^|!txt!^|
echo !div!
echo(
exit /b 
```

这是一个版本，它使用多行固定宽度来强制字符串适应分配的水平空间。

```
@echo off

:: Initialize
setlocal enableDelayedExpansion
set maxLen=15
set "pad="
set "div="
for /l %%N in (1 1 %maxLen%) do (
  set "pad=!pad!."
  set "div=!div!-"
)
set "div=|!div!|"

:: Test the display
pushd "c:\Users\Joel"
call :displayCurrentDirectory
pushd "c:\Users\Joel\Desktop"
call :displayCurrentDirectory
exit /b

:displayCurrentDirectory
setlocal
echo !div!
set "txt=>>!cd!\"
:loop
if "!txt:~0,%maxLen%!" neq "!txt!" (
  echo ^|!txt:~0,%maxLen%!^|
  set "txt=!txt:~%maxLen%!"
  goto :loop
)
set "txt=!txt!!pad!"
set "txt=!txt:~0,%maxLen%!"
echo ^|!txt!^|
echo !div!
echo(
exit /b 
```

查看[改进的 :Format、新的 :FormatVar 和 :FormatColor 函数](http://www.dostips.com/forum/viewtopic.php?f=3&t=4027) ，以获得更通用的文本格式例程。它允许文本的左右对齐。

# c# - 搜索日期列表

> ID：14129398
> 
> 赞同：0
> 
> 时间：2013-01-02T21:24:03.903
> 
> 标签：c#, linq

我有一个包含以下字段的集合列表

1.  日期1
2.  极值
3.  Y值

我想*在这个列表中搜索另一个日期列表*。对于第二个列表中的每个日期，我想获取从这个最小日期到下一个日期之间的记录（距最小日期 30 分钟）。

```
foreach (var item in selectedDates.Where(x => x.Checked))
{
     // item.minDate is my starting date
     // I want all records between item.minDate and 30 minutes added to it)               
     var t = lf.ReplicateBlocks.FindAll(o=> o.minimumCompletionDate >= item.
}

**UPDATE**

  public class ReplicateBlock
    {
        public int ReplicateId { get; set; }
        public string AssayNumber { get; set; }
        public DateTime InitiationDate { get; set; }
        public DateTime InitiationTime { get; set; }
        public DateTime minimumCompletionDate { get; set; }
        public DateTime minimumCompletionTime { get; set; }
        public string correctedCount { get; set; }
        public string moduleName { get; set; }
        public string exception { get; set; }
    }

public class RunLogEntryDatesDisplay
{
    public DateTime runDate { get; set; }
    public String DateRange { get; set; }
    public bool Checked { get; set; }
    public string MinimumReplicateId { get; set; }
} 
```

我正在寻找的最终输出是修改后的复制块列表。RunLogEntryDatesDisplay 是从视图发布的复选框列表。在此列表中，我查看已检查的日期，即*runDate*，从第一个选择开始，我向其添加 30 分钟，并在*ReplicateBlock List*之间和边缘之间找到所有记录。我将对复选框列表中的每个选定日期执行相同的操作，最后将根据用户选择（选中项）获得最终/过滤的 ReplicateBlockLisr。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:29:27.740

您可以遍历日期并填充结果列表：

```
List<ReplicateBlock> blocks = new List<ReplicateBlock>();    
foreach (var item in selectedDates.Where(x => x.Checked))
{
     var t = lf.ReplicateBlocks.Where(o=> 
                 o.minimumCompletionDate >= item.minDate  &&
                 o.minimumCompletionDate <= item.minDate.AddMinutes(30));

     blocks.AddRange(t);
} 
```

您也可以在一个查询中执行此操作：

```
var query = from d in selectedDates
            from o in lf.ReplicateBlocks
            where d.Checked &&
                  o.minimumCompletionDate >= d.minDate  &&
                  o.minimumCompletionDate <= d.minDate.AddMinutes(30))
            select o; 
```

# c - '\0' 字符在给定程序中的位置

> ID：14129399
> 
> 赞同：0
> 
> 时间：2013-01-02T21:24:04.133
> 
> 标签：c

以下程序读取一组行并打印最长的行。它是从 K&R 借来的。

```
#include<stdio.h>
#include<conio.h>
#define MAX 1000
int getline(char line[],int max);
void copy(char to[],char from[]);
void main()
{
int len,max=0;
char ch,char line[MAX],longest[MAX];
while((len=getline(line,MAX))>0)  /* Checking to see if the string has a positive length */
{
   if(len>max)
   {
      max=len;
      copy(longest,line);      /* Copying the current longer into the previous longer line */
   }
}
if(max>0)         /* Checking to see if the length of the string is positive */
{
printf("%s",longest);
}
}
/* Function to input the lines for comparison */
int getline(char line[],int limit)
{
int i;
char ch;
/* This for loop is used to input lines for comparison */
for(i=0;i<limit&&(ch=getchar())!=EOF&&ch!='\n';i++)   /* Q#1 */
{
  line[i]=ch;
}
if(ch=='\n')
{
  line[i]=ch;
  i++;
}
line[i]='\0';  /* Q#2 */
}
void copy(char to[],char from[])
{
  int i=0;
  while((to[i]=from[i])!='\0')
  {
    i++;
  }
} 
```

Q#1:- 为什么我们不能使用 '\n' 代替 EOF 和 '\0' 代替 '\n' ？毕竟，我们所做的只是表示行的结尾和字符串的结尾，对吧？

Q#2:- 当我们知道只有最后一个词将包含空字符时。为什么我们使用“i”作为索引？为什么不能直接用“limit”作为索引呢？这也应该做的工作，对不对？请解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:30:42.110

Q1：字符串和线条是不同的东西。一个字符串可以由多行组成。例如，对于以下情况是完全合法的：

```
abc
xyz 
```

成为一个单一的字符串。

Q2：在这种情况下，limit 表示循环的上限；您的复制可能会在它之前结束 - 只需查看控制循环的其他条件。此外，即使您可以使用 limit 作为索引，您仍然需要保留当前位置的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:29:14.943

> Q#1:- 为什么我们不能使用 '\n' 代替 EOF 和 '\0' 代替 '\n' ？毕竟，我们所做的只是表示行的结尾和字符串的结尾，对吧？

如果你的输入有多于一行怎么办？

> Q#2:- 当我们知道只有最后一个词将包含空字符时。为什么我们使用“i”作为索引？为什么不能直接用“limit”作为索引呢？这也应该做的工作，对不对？请解释。

您需要知道您在循环中的距离以及总共循环的次数 - 您可以单独使用`limit`，但这会使代码变得更加复杂。

# eclipse - 在 Eclipse 中放置任务标签的键盘快捷键

> ID：14129400
> 
> 赞同：11
> 
> 时间：2013-01-02T21:24:04.253
> 
> 标签：eclipse, tags, keyboard, task

是否有任何键盘快捷键可以在 Eclipse 中放置任务标签，例如 TODO / FIXME / XXX （用户定义）

已在 Google 上搜索，但找不到快捷方式。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-01-21T12:35:03.317

我没有找到任何 TODO 快捷方式，但一个可能的解决方案是创建一个模板，这样当您编写一些字符串并按 Ctrl + 空格键并输入您的 TODO 代码时，将被输入。

窗口 -> 首选项 -> Java -> 编辑器 -> 模板 -> 新建

*   设置模板的名称（例如 todo）
*   设置模式（例如 //TODO）

当您键入 todo 并按 Ctrl + 空格键时，`// TODO`将插入Enter

这样一个微不足道的待办事项是没有用的，但您可以通过使用变量来调整它，如图所示。使用“插入变量”按钮插入变量。

![在此处输入图像描述](../Images/4fcf62732380cc38671745fd667fa718.png)

当您使用图片中显示的图案时，将插入以下内容：

`// TODO inserted by UserName [21\. 1\. 2015, 13:07:07]`

* * *

可以在[此处找到有关 Java 编辑器模板变量的更多信息](http://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Fconcepts%2Fconcept-template-variables.htm)

# jquery-ui - jQuery Tabs 1.9 deprecated "url" - 如何为标签设置 URL？

> ID：14129404
> 
> 赞同：4
> 
> 时间：2013-01-02T21:24:30.573
> 
> 标签：jquery-ui, jquery-ui-tabs

使用 jQuery UI 1.9.2（从 1.8.23 升级），我在升级指南中看到了这一点；

> 不推荐使用 url 方法和使用 title 属性；使用 aria-controls 属性
> 
> (#7132) 不推荐使用 url 方法，以支持保持 href 属性不变，即使对于远程选项卡也是如此。href 属性将指向实际资源，而 aria-controls 属性将指向关联的面板。这意味着 title 属性将不再用于指定自定义面板 ID。

我有这个代码：

```
var $t = $("#tabs");
$t.tabs("url", 0, url);           
$t.bind("tabsload", function (event, ui) {
    console.log('tabsload fired');
});
$t.tabs("load", 0); 
```

我现在无法弄清楚如何设置`url`选项卡的值（当用户单击网格行并根据网格值重建 url 值时触发此代码），因为我不了解使用`aria-controls`评论的升级指南。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T10:09:42.067

我采取的方法是设置`href`AJAX链接的，然后调用`load`方法重新加载内容。

我很欣赏这不使用该`aria-controls`属性，但升级指南中的片段指出该属性指向面板 - 远程选项卡根据元素中包含的锚接收其内容`li`，所以我认为我应该能够使用这种方法.

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <link href="Scripts/jquery-ui-1.9.2.custom/css/ui-lightness/jquery-ui-1.9.2.custom.min.css"
        rel="stylesheet" type="text/css" />
    <script src="Scripts/jquery-1.8.2.min.js" type="text/javascript"></script>
    <script src="Scripts/jquery-ui-1.9.2.custom/js/jquery-ui-1.9.2.custom.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#tabs').tabs();
            $('#change-button').click(function (event) {
                $('#ajax-link').attr('href', 'Handler1.ashx?echo=changed at ' + new Date().toTimeString());
                $('#tabs').tabs('load', 0);
                event.preventDefault();
            });
        });
    </script>
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div id="tabs">
        <ul>
            <li>
                <a id="ajax-link" href="Handler1.ashx?echo=some text to repeat">Tab 1</a>
            </li>
        </ul>
    </div>

    <button id="change-button">Change</button>
    </form>
</body>
</html> 
```

我正在使用一个通用的 HTTP 处理程序（这是 AJAX 请求），它只是回显它传递的文本，例如`Handler1.ashx?echo=some text to repeat`. 请注意，我的选项卡仅包含一个对该处理程序进行 AJAX 调用的选项卡。

要更改 Url，我处理`click`按钮的事件并像这样修改`href`of`ajax-link`然后重新加载它：

```
$('#ajax-link').attr('href', 'Handler1.ashx?echo=changed at '
    + new Date().toTimeString());
$('#tabs').tabs('load', 0); 
```

So for this to work you will need to provide the link you wish to change with an ID and you will need to know at which position the tab page occurs.

# python - Python PyInstaller 并包含图标文件

> ID：14129405
> 
> 赞同：5
> 
> 时间：2013-01-02T21:24:31.463
> 
> 标签：python, icons, wxpython, pyinstaller

我正在使用 PyInstaller (v1.5) 构建一个可执行文件——另外，我正在使用 GUI2EXE 来帮助我。我的脚本需要位于工作目录中的图标文件：

```
icon_file = '\pics\myicon.ico' 
```

当我构建可执行文件时，我希望不必包含“工作目录”，而是将图标文件包含在我的可执行文件中。有没有办法做到这一点？

如果这没有从那时起，我想要一个包含我的图标文件的文件（我的可执行文件）。

1.  如何创建一个文件以包含图标文件？
2.  如何更新我的脚本代码以正确访问该图标文件？

我也希望为任何图像文件甚至数据文件执行此操作...

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T23:04:08.373

因此，您正在查看的不是分布式可执行文件的实际图标，而是包含您的 python 脚本将在运行时从磁盘打开/读取的图标或其他图像？

附加数据可以捆绑在您的 exe 中，pyinstaller 提供了一种在运行时访问它的方法。这个问题展示了如何将它包含在您的 .spec 中，答案展示了如何通过您的脚本访问它：

[使用 PyInstaller (--onefile) 捆绑数据文件](https://stackoverflow.com/questions/7674790/bundling-data-files-with-pyinstaller-onefile)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T21:38:33.043

我对 GUI2EXE 不是很熟悉，但是您可以在构建规范文件时在命令行上[指定一个图标文件](http://www.pyinstaller.org/export/v2.0/project/doc/Manual.html?format=raw#allowed-options)（向下滚动一点以获取 Windows/OS X 特定选项）。这会将其设置为应用程序的图标，您不必单独分发图标。查看它生成的规范文件，它在 exe 中添加了一个图标参数，如下所示：

```
exe = EXE(pyz,
          a.scripts,
          [bunch of other arguments],
          icon='\pics\myicon.ico') 
```

# python - Twisted：将 ReconnectingClientFactory 与 SSL 混合并使 write() 变得“可靠”

> ID：14129408
> 
> 赞同：2
> 
> 时间：2013-01-02T21:24:50.447
> 
> 标签：python, ssl, buffer, twisted

我对 Python 和 Twisted 都很陌生，所以我可能只是没有正确理解事情，但我似乎陷入了需要帮助的地步。

我想要做的是在 SSL 连接上使用[ReconnectingClientFactory 。](http://twistedmatrix.com/documents/current/api/twisted.internet.protocol.ReconnectingClientFactory.html)我已经全部运行了，但是如果连接被断开，所有发送到传输的 write() 方法的数据都会被简单地丢弃而没有任何错误。实际调用的方法是[twisted.protocols.tls.TLSMemoryBIOProtocol.write()](http://twistedmatrix.com/documents/current/api/twisted.protocols.tls.TLSMemoryBIOProtocol.html#write)。

这是我认为正在发生的事情（从工作连接开始）：

*   连接丢失
*   使用一些数据调用 write() 方法（[此处为源代码）](http://twistedmatrix.com/trac/browser/tags/releases/twisted-12.3.0/twisted/protocols/tls.py#L480)
*   self.disconnecting 是`False`数据传递给[_write() 方法](http://twistedmatrix.com/trac/browser/tags/releases/twisted-12.3.0/twisted/protocols/tls.py#L498)
*   _write 方法到达 _lostTLSConnection ，`True`然后运行`return`
*   连接被重新获得，但没有数据发送，因为它没有在任何地方缓冲

这是客户端的简化版本：

```
from OpenSSL import SSL
from twisted.internet.protocol import (Protocol, ReconnectingClientFactory)
from twisted.internet import (reactor, ssl)
import struct

class MetricsServer(Protocol):
    streambuffer = bytearray()

    def connectionMade(self):
        self.transport.setTcpKeepAlive(True) # maintain the TCP connection
        self.transport.setTcpNoDelay(False) # allow Nagle algorithm
        print("connected to server")            

    def dataReceived(self, data):
        print("from server:", data)

    def connectionLost(self, reason):
        self.connected = 0
        print("server connection lost:", reason)

class MetricsServerFactory(ReconnectingClientFactory):
    protocol = MetricsServer
    maxDelay = 300 # maximum seconds between retries
    factor = 1.6180339887498948
    packet_sequence_number = 0
    active_connection = None

    def buildProtocol(self, addr):
        self.resetDelay()
        if self.active_connection == None:
            self.active_connection = self.protocol()
        return self.active_connection

    def get_packet_sequence_number(self):
        self.packet_sequence_number += 1
        return self.packet_sequence_number

    def send_data(self):
        print ("sending ssl packet")
        packet = struct.pack("!I", self.get_packet_sequence_number())
        self.active_connection.transport.write(packet)
        reactor.callLater(1.0, metrics_server.send_data)

class CtxFactory(ssl.ClientContextFactory):
    def getContext(self):
        self.method = SSL.TLSv1_METHOD
        ctx = ssl.ClientContextFactory.getContext(self)
        ctx.use_certificate_file('keys/client.crt')
        ctx.use_privatekey_file('keys/client.key')

        def verifyCallback(connection, x509, errnum, errdepth, ok):
            return bool(ok)
        ctx.set_verify(SSL.VERIFY_PEER, verifyCallback)
        ctx.load_verify_locations("keys/ca.pem")
        return ctx

if __name__ == "__main__":
    metrics_server = MetricsServerFactory()
    reactor.connectSSL('localhost', 8000, metrics_server, CtxFactory())
    reactor.callLater(3.0, metrics_server.send_data)
    reactor.run() 
```

这是一个简单的服务器，它输出它接收到的数据：

```
from OpenSSL import SSL
from twisted.internet import ssl, reactor
from twisted.internet.protocol import Factory, Protocol

class Echo(Protocol):
    sent_back_data = False

    def dataReceived(self, data):
        print(' '.join("{0:02x}".format(x) for x in data))

def verifyCallback(connection, x509, errnum, errdepth, ok):
    return bool(ok)

if __name__ == '__main__':
    factory = Factory()
    factory.protocol = Echo

    myContextFactory = ssl.DefaultOpenSSLContextFactory(
        'keys/server.key', 'keys/server.crt'
        )
    ctx = myContextFactory.getContext()
    ctx.set_verify(
        SSL.VERIFY_PEER | SSL.VERIFY_FAIL_IF_NO_PEER_CERT,
        verifyCallback
        )

    ctx.load_verify_locations("keys/ca.pem")
    reactor.listenSSL(8000, factory, myContextFactory)
    reactor.run() 
```

重新创建问题的过程：

*   首先，您需要生成自己的证书和 CA 才能正常工作
*   先运行服务器
*   运行客户端代码
*   在服务器端等待一些输出然后结束程序
*   注意客户端继续尝试发送数据
*   重启服务器端
*   注意服务器端会继续接收数据包，但是连接丢失时发送的数据包会被丢弃

作为一种解决方法，我尝试实现自己的缓冲区以在重新连接时发送数据，但遇到了另一个问题。我希望它在重新建立连接时发送数据，我能看到的唯一钩子是 Protocol.connectionMade()。但是，该方法在 TLS 握手实际完成*之前*被调用，因此它最终被[_write() 中的异常处理程序](http://twistedmatrix.com/trac/browser/tags/releases/twisted-12.3.0/twisted/protocols/tls.py#L514)捕获并放入另一个缓冲区以稍后发送。 **但是**，该缓冲区[似乎只有在从另一端接收到数据时才被发送](http://twistedmatrix.com/trac/browser/tags/releases/twisted-12.3.0/twisted/protocols/tls.py#L411)（这在我的情况下并不经常发生，也意味着数据可能以错误的顺序到达另一端，因为在接收数据之前可能会调用 write()）。我还认为在接收到数据之前再次断开连接也会导致数据缓冲区被擦除。

编辑：为第一个问题添加了示例代码。我在工厂里有这个可能很奇怪`active_connection`，但我正试图让它作为一个单例工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:02:19.620

好的，我发现了我的解决方法的问题......我正在传递`bytearray`要写入传输的 a ，然后立即清除它，但没有意识到写入被推迟到我清除缓冲区之后。所以，我传递了一个副本，`bytearray`它现在似乎可以工作了。

每次对 write 的调用都必须通过检查它是否已连接来进行，这似乎仍然不太正确，因为它的整个想法`ReconnectingClientFactory`是它为您处理维护连接。`if`另外，我认为该语句与实际运行时可能会丢失连接`write()`，因此仍然可能丢失数据。

```
from OpenSSL import SSL
from twisted.internet.protocol import (Protocol, ReconnectingClientFactory)
from twisted.internet import (reactor, ssl)
import struct

class MetricsServer(Protocol):
    streambuffer = bytearray()

    def connectionMade(self):
        self.transport.setTcpKeepAlive(True) # maintain the TCP connection
        self.transport.setTcpNoDelay(False) # allow Nagle algorithm
        print("connected to server")
        if len(self.transport.factory.wrappedFactory.send_buffer) > 0:
            self.transport.write(bytes(self.transport.factory.wrappedFactory.send_buffer))
            self.transport.factory.wrappedFactory.send_buffer.clear()

    def dataReceived(self, data):
        print("from server:", data)

    def connectionLost(self, reason):
        self.connected = 0
        print("server connection lost:", reason)

class MetricsServerFactory(ReconnectingClientFactory):
    protocol = MetricsServer
    maxDelay = 300 # maximum seconds between retries
    factor = 1.6180339887498948
    packet_sequence_number = 0
    active_connection = None

    send_buffer = bytearray()

    def buildProtocol(self, addr):
        self.resetDelay()
        if self.active_connection == None:
            self.active_connection = self.protocol()
        return self.active_connection

    def get_packet_sequence_number(self):
        self.packet_sequence_number += 1
        return self.packet_sequence_number

    def send_data(self):
        print ("sending ssl packet")
        packet = struct.pack("!I", self.get_packet_sequence_number())
        if self.active_connection and self.active_connection.connected:
            self.active_connection.transport.write(packet)
        else:
            self.send_buffer.extend(packet)
        reactor.callLater(1.0, metrics_server.send_data)

class CtxFactory(ssl.ClientContextFactory):
    def getContext(self):
        self.method = SSL.TLSv1_METHOD
        ctx = ssl.ClientContextFactory.getContext(self)
        ctx.use_certificate_file('keys/client.crt')
        ctx.use_privatekey_file('keys/client.key')

        def verifyCallback(connection, x509, errnum, errdepth, ok):
            return bool(ok)
        ctx.set_verify(SSL.VERIFY_PEER, verifyCallback)
        ctx.load_verify_locations("keys/ca.pem")
        return ctx

if __name__ == "__main__":
    metrics_server = MetricsServerFactory()
    reactor.connectSSL('localhost', 8000, metrics_server, CtxFactory())
    reactor.callLater(3.0, metrics_server.send_data)
    reactor.run() 
```

# html - 是否可以将微数据设置为包含两条信息的元素

> ID：14129413
> 
> 赞同：0
> 
> 时间：2013-01-02T21:25:01.163
> 
> 标签：html, search-engine, microdata

是否可以
在同一个元素中包含 itemprop="name" 和 itemprop="contentURL"？

如下例所示：

```
 echo '<li itemscope itemtype="http://schema.org/AudioObject" >';
    echo '  <a itemprop="name" itemprop="contentURL" href="http://wave.cat/music/'.$song['file'].'">'.$song['name'].', '.$song['artist'].'</a>';
    echo '</li>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:52:23.590

您可以有多个 itemprops，如下所示：

```
<a itemprop="name contentURL" href="url">name</a> 
```

但在这种情况下，您将使用 URI 值设置 name 属性，因为您在一个`a`元素中。我不确定这会产生什么影响。

最好的方法是使用额外的 span 元素围绕内容限定 name 属性：

```
echo '<li itemscope itemtype="http://schema.org/AudioObject" >';
echo '  <a itemprop="contentURL" href="http://wave.cat/music/'.$song['file'].'"><span itemprop="name">'.$song['name'].', '.$song['artist'].'</span></a>';
echo '</li>'; 
```

# ios - 当 SilentMode 开启时，AVAudioPlayer 不会静音

> ID：14129415
> 
> 赞同：0
> 
> 时间：2013-01-02T21:25:04.823
> 
> 标签：ios, mpmovieplayercontroller, avaudioplayer, mpmovieplayer, avaudiosession

我开始相信 iOS 就是纯粹的魔法。我浏览了 AVAudioPlayer 上的许多帖子以寻求解决方案，但没有一个有效。

当应用程序启动时，我有一个从 MPMoviePlayerController 开始的电影，并且我有 AVAudioPlayer 以如下声音开始：

```
 -(void)createAndPlayMovieFromURL:(NSURL *)movieURL sourceType:(MPMovieSourceType)sourceType{

        /* Create a new movie player object. */
       player = [[MPMoviePlayerController alloc] initWithContentURL:movieURL];
       player.controlStyle = MPMovieControlModeDefault;

        if (player) 
        {
            /* Save the movie object. */
            [self setMoviePlayerController:player];

            /* Specify the URL that points to the movie file. */
            [player setContentURL:movieURL];        

            /* If you specify the movie type before playing the movie it can result 
             in faster load times. */
            [player setMovieSourceType:sourceType];

            CGRect frame = CGRectMake(0, 0, 480, 320);

            /* Inset the movie frame in the parent view frame. */
            [[player view] setFrame:frame];

            [player view].backgroundColor = [UIColor blackColor];

            /* To present a movie in your application, incorporate the view contained 
             in a movie player’s view property into your application’s view hierarchy. 
             Be sure to size the frame correctly. */
            [self.view addSubview: [player view]];        
        }
    [[self moviePlayerController] play];
} 
```

和声音：

```
- (void)setupAudioPlayBack:(NSString *) path : (NSString *) extension{

    NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                         pathForResource:path
                                         ofType:extension]];
    NSError *error;
    audioPlayer = [[AVAudioPlayer alloc]
                   initWithContentsOfURL:url
                   error:&error];
    if (error)
    {
        NSLog(@"Error in audioPlayer: %@",
              [error localizedDescription]);
    } else {
        audioPlayer.delegate = self;
        [audioPlayer prepareToPlay];
    }
} 
```

现在让我们谈谈魔术。当第一部电影播放和声音时，声音没有响应手机上的音量控制，也没有响应静音模式开关。

但随后第二部电影以自己的声音播放，一切正常 - 静音模式打开时没有声音，如果静音模式关闭，它会响应音量控制。第三部电影 - 也完美播放。

我尝试使用`player.useApplicationAudioSession = NO`for MPMoviePlayerController - 修复了第一次声音对静音模式或音量控制没有响应的问题，但是现在当第二部电影开始播放时它立即冻结并且播放的声音从原始大小减少到大约 2秒。

`[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategorySoloAmbient error:nil];`无论我在哪里设置它都没有帮助。

所以我的问题是 - 如何让 MPMoviePlayerController 与 AVAudioPlayer 交互没有任何问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:45:34.440

好的，我实际上找到了一个解决方案（再一次，魔术）。

当您启动 ViewController 时，您将其设置如下：

```
 - (void)viewDidLoad
{
    [self setupAudioPlayBack:@"sound1" :@"caf"];
    [self playMovieFile:[self localMovieURL:@"mov1" :@"mov"]];
    audioTimer = [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(playAudio) userInfo:nil repeats:NO];

    [super viewDidLoad];
} 
```

playAudio 方法很简单：

```
 - (void)playAudio{

    [audioPlayer play];
} 
```

Just 0.1 millisecond timer is enough to make everything work (0.0 doesn't work) and make sure a new video doesn't start before the audio finishes or it will destroy the settings so you will have to invalidate the timer and redo the timer again.

# c# - 获取泛型类的属性

> ID：14129421
> 
> 赞同：51
> 
> 时间：2013-01-02T21:25:36.160
> 
> 标签：c#

我有一个泛型类和一个对象值 where `obj.GetType().GetGenericTypeDefinition() == typeof(Foo<>)`.

```
class Foo<T>
{
    public List<T> Items { get; set; }
} 
```

我如何获得`Items`from的值`obj`？请记住，`obj`是一个`Object`，我不能转换`obj`为，`Foo`因为我不知道是什么`T`。

我希望为此使用反射，但每次我这样做`GetProperty("Items")`时都会返回 null。但是，如果有人知道一种无需反思就可以做到这一点的好方法，无论如何。

假设我的代码如下所示：

```
//just to demonstrate where this comes from
Foo<int> fooObject = new Foo<int>();
fooObject.Items = someList;
object obj = (object)fooObject;

//now trying to get the Item value back from obj
//assume I have no idea what <T> is
PropertyInfo propInfo = obj.GetType().GetProperty("Items"); //this returns null
object itemValue = propInfo.GetValue(obj, null); //and this breaks because it's null 
```

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-01-02T21:28:15.977

您应该能够使用：

```
Type t = obj.GetType();

PropertyInfo prop = t.GetProperty("Items");

object list = prop.GetValue(obj); 
```

当然，您将无法`List<T>`直接转换为 a，因为您不知道 type `T`，但您仍然应该能够获取 的值`Items`。

* * *

编辑：

以下是一个完整的示例，以演示此工作：

```
// Define other methods and classes here
class Foo<T>
{
    public List<T> Items { get; set; }
}

class Program
{
    void Main()
    {   
        //just to demonstrate where this comes from
        Foo<int> fooObject = new Foo<int>();
        fooObject.Items = new List<int> { 1, 2, 3};
        object obj = (object)fooObject;

        //now trying to get the Item value back from obj
        //assume I have no idea what <T> is
        PropertyInfo propInfo = obj.GetType().GetProperty("Items"); //this returns null
        object itemValue = propInfo.GetValue(obj, null);

        Console.WriteLine(itemValue);
                    // Does not print out NULL - prints out System.Collections.Generic.List`1[System.Int32]

        IList values = (IList)itemValue;
        foreach(var val in values)
            Console.WriteLine(val); // Writes out values appropriately
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-02T21:37:19.073

@ReedCopsey 是绝对正确的，但如果你真的问这个问题“我如何找出一个类型的通用细节？”，这里有一些“反射的乐趣”：

```
public void WhatsaFoo(object obj)
{
    var genericType = obj.GetType().GetGenericTypeDefinition();
    if(genericType == typeof(Foo<>))
    {
        // Figure out what generic args were used to make this thing
        var genArgs = obj.GetType().GetGenericArguments();

        // fetch the actual typed variant of Foo
        var typedVariant = genericType.MakeGenericType(genArgs);

        // alternatively, we can say what the type of T is...
        var typeofT = obj.GetType().GetGenericArguments().First();

        // or fetch the list...
        var itemsOf = typedVariant.GetProperty("Items").GetValue(obj, null);
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-02T21:35:53.903

这样的事情应该可以解决问题：

```
var foo = new Foo<int>();
foo.Items = new List<int>(new int[]{1,2,3});

// this check is probably not needed, but safety first :)
if (foo.GetType().GetProperties().Any(p => p.Name == "Items"))
{
    var items = foo.GetType().GetProperty("Items").GetValue(foo, null);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-19T07:50:05.807

您必须使用**System.Reflection**命名空间才能成功执行程序。

该程序为您***提供任何通用类的属性名称和值***

[您可以在C# Online Rexter Tool Compiler](http://rextester.com/JAUO99715)上查看此代码小提琴

```
using System;
using System.Reflection;

namespace GenericPropertyExample
{
    //Declaring a Sample Class 
    public class class1
    {
        public string prop1 { get; set; }
        public string prop2 { get; set; }

    }
    public class Program
    {
        public static void Main(string[] args)
        {
            //Creating Class Object
            class1 objClass1 = new class1 { prop1 = "value1", prop2 = "value2" };

            //Passing Class Object to GenericPropertyFinder Class
            GenericPropertyFinder<class1> objGenericPropertyFinder = new GenericPropertyFinder<class1>();
            objGenericPropertyFinder.PrintTModelPropertyAndValue(objClass1);
            Console.ReadLine();
        }

        //Declaring a Generic Handler Class which will actually give Property Name,Value for any given class.
        public class GenericPropertyFinder<TModel> where TModel : class
        {
            public void PrintTModelPropertyAndValue(TModel tmodelObj)
            {
                //Getting Type of Generic Class Model
                Type tModelType = tmodelObj.GetType();

                //We will be defining a PropertyInfo Object which contains details about the class property 
                PropertyInfo[] arrayPropertyInfos = tModelType.GetProperties();

                //Now we will loop in all properties one by one to get value
                foreach (PropertyInfo property in arrayPropertyInfos)
                {
                    Console.WriteLine("Name of Property is\t:\t" + property.Name);
                    Console.WriteLine("Value of Property is\t:\t" + property.GetValue(tmodelObj).ToString());
                    Console.WriteLine(Environment.NewLine);
                }
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-20T13:56:24.370

嘿，伙计们，我一直在为通用类型的相同问题而苦苦挣扎，终于找到了获得价值的解决方案--------实现技巧的方法的小代码片段------------ --------

```
 public void printFields()
    {
        // Is the list empty
        if (this.list_.Count == 0)
        {
            //Y => Forced exit no object info
            return;
        }

        try
        {
            // Get first item from list
            T item = this.list_[0];

            // Get the type of object
            //**Type thisType = item.GetType();

            // Get array of all fields
            FieldInfo[] thisFieldInfo = item.GetType().GetFields(BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance);

            // Loop through all fields and show its info
            for (int ix = 0; ix < thisFieldInfo.Length; ix++)
            {
                // Get Field value
                String strVal = thisFieldInfo[ix].GetValue(item).ToString();

                // Display item
                Console.WriteLine("'{0}' is a {1} and has value {2}", thisFieldInfo[ix].Name, thisFieldInfo[ix].FieldType, strVal);
            }

        }
        catch (SecurityException e)
        {
            Console.WriteLine("Exception: " + e.Message);
        }
    } 
```

# javascript - 谷歌图表工具摆脱水平间距

> ID：14129426
> 
> 赞同：1
> 
> 时间：2013-01-02T21:26:00.980
> 
> 标签：javascript, coffeescript, google-visualization

我有一个要渲染的直方图`ColumnCharts`，我按照教程进行操作，结果如下：

![在此处输入图像描述](../Images/5e41287a2356cffeabe373f82068b6e9.png)

注意图表两端的间距（特别是左侧，因为右侧有一些非常小的列）

我尝试使用`viewWindow`，但似乎没有特别的效果。这是用于绘制它的代码（coffeescript）。数据已被截断以节省空间，因为它们相当大

```
 data = google.visualization.arrayToDataTable([
      labels, bardata
    ])

    # The labels are ["x", "label for each column" ....]
    # bardata is [number, number, number] (these numbers are the height of the column)

    chart = new google.visualization.ColumnChart(document.getElementById("enrollment-total-chart"))
    chart.draw(data,
      width: 400
      height: 300
      hAxis:
        title: "Number of students"
      vAxis:
        title: "Number of schools"
      viewWindow:
        max: "auto"
        min: 0
      viewWindowMode: "explicit"
      legend: position: "none"
    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:11:20.040

问题可能与您的数据有关。例如，如果我制作这张图表：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['x', 'A', 'B', 'C', 'D', 'E', 'F'],
    ['A',  0,   0,   3,   4,   5,   0],
  ]);

  // Create and draw the visualization.
  new google.visualization.ColumnChart(document.getElementById('visualization')).
      draw(data,
           {width:600, height:400,
            hAxis: {title: "Year"}}
      );
} 
```

由于零，图表的左/右有很多空白（我的猜测是你在极端情况下有很多零）。

我对你的数据也有点困惑——你说你有很多不同的行，但直方图只是一对 XY 数据，所以颜色的使用（区分系列）与标准直方图有点不同。

如果以上内容不能回答您的问题，请您提供您的数据，以便我们更好地了解您正在尝试做什么（必要时匿名）。

# svn - 使用 Team City 复制到 SVN 标签

> ID：14129429
> 
> 赞同：2
> 
> 时间：2013-01-02T21:26:15.427
> 
> 标签：svn, teamcity

我想在 Team City 中创建一个从已知 svn 位置复制并将其复制到标签位置并删除/覆盖它（如果存在）的构建。

我知道如何通过 SVN.exe 做到这一点，但想看看这是否可以使用 Team City。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:29:07.547

尝试使用命令行运行器添加构建步骤。

# php - PHPUnit 在 Travis-CI 上失败，但在本地通过

> ID：14129439
> 
> 赞同：4
> 
> 时间：2013-01-02T21:26:44.613
> 
> 标签：php, phpunit, travis-ci

当 PHPUnit 在我的本地机器上正常工作时，我在让 PHPUnit 在 Travis-CI 上工作时遇到了一些麻烦。我使用的是相同的 PHP 版本和 PHPUnit 版本。

我的代码库位于[https://github.com/lncd/OAuth2](https://github.com/lncd/OAuth2)
Travis-CI 输出位于[https://travis-ci.org/lncd/OAuth2](https://travis-ci.org/lncd/OAuth2)

`phpunit -c build/phpunit.xml`从存储库的根目录执行在本​​地可以正常工作，并且测试按预期执行。

Travis 的日志是：

```
$ cd ~/builds
$ git clone --branch=develop --depth=100 --quiet git://github.com/lncd/OAuth2.git lncd/OAuth2
$ cd lncd/OAuth2
$ git checkout -qf 1c3b319aa6c8f5521d5123f0e6affca94ee35010
$ phpenv global 5.3
$ php --version
PHP 5.3.19 (cli) (built: Dec 20 2012 09:57:38) 
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2012 Zend Technologies
    with Xdebug v2.2.1, Copyright (c) 2002-2012, by Derick Rethans
$ phpunit -c build/phpunit.xml
PHP Warning:  require_once(src/OAuth2/Authentication/Server.php): failed to open stream: No such file or directory in /home/travis/builds/lncd/OAuth2/tests/authentication/server_test.php on line 3
PHP Stack trace:
PHP   1\. {main}() /home/travis/.phpenv/versions/5.3.19/bin/phpunit:0
PHP   2\. PHPUnit_TextUI_Command::main() /home/travis/.phpenv/versions/5.3.19/bin/phpunit:46
PHP   3\. PHPUnit_TextUI_Command->run() /home/travis/.phpenv/versions/5.3.19/share/pyrus/.pear/php/PHPUnit/TextUI/Command.php:129
PHP   4\. PHPUnit_TextUI_Command->handleArguments() /home/travis/.phpenv/versions/5.3.19/share/pyrus/.pear/php/PHPUnit/TextUI/Command.php:138
PHP   5\. PHPUnit_Util_Configuration->getTestSuiteConfiguration() /home/travis/.phpenv/versions/5.3.19/share/pyrus/.pear/php/PHPUnit/TextUI/Command.php:657
PHP   6\. PHPUnit_Util_Configuration->getTestSuite() /home/travis/.phpenv/versions/5.3.19/share/pyrus/.pear/php/PHPUnit/Util/Configuration.php:784
PHP   7\. PHPUnit_Framework_TestSuite->addTestFiles() /home/travis/.phpenv/versions/5.3.19/share/pyrus/.pear/php/PHPUnit/Util/Configuration.php:860
PHP   8\. PHPUnit_Framework_TestSuite->addTestFile() /home/travis/.phpenv/versions/5.3.19/share/pyrus/.pear/php/PHPUnit/Framework/TestSuite.php:416
PHP   9\. PHPUnit_Util_Fileloader::checkAndLoad() /home/travis/.phpenv/versions/5.3.19/share/pyrus/.pear/php/PHPUnit/Framework/TestSuite.php:355
PHP  10\. PHPUnit_Util_Fileloader::load() /home/travis/.phpenv/versions/5.3.19/share/pyrus/.pear/php/PHPUnit/Util/Fileloader.php:76
PHP  11\. include_once() /home/travis/.phpenv/versions/5.3.19/share/pyrus/.pear/php/PHPUnit/Util/Fileloader.php:92 
```

我已经尝试过更改`require_once`要加载`require_once '../../src/OAuth2/Authentication/Server.php';`的文件（即执行文件中的两个目录），但这在 Travis 或我的本地设置上不起作用。

我究竟做错了什么？或者它是特拉维斯的一个错误？

谢谢

* * *

**编辑：**

为了澄清这是目录结构：

```
build
    /phpunit.xml
src
    /OAuth2
        /Authentication
            /Database.php
            /Server.php
        /Resource
            /Database.php
            /Server.php
tests
    /authentication
        /database_mock.php
        /server_test.php
    /resource
        /database_mock.php
        /server_test.php 
```

在 /tests 目录下调用的两个文件`server_test.php`都试图从 /src 下的目录加载相应`Server.php`的文件`Database.php`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T21:54:55.933

正如我从您的存储库中看到的那样，您需要通过当前目录中的相关链接使用文件。因此，PHPUnit 尝试在您放置测试的同一目录中查找所需文件，但未找到任何文件。您需要更改使用`require_once`to`../../src/OAuth2/Resource/Server.php`或为 PHPUnit 添加 bootstrap.php 文件。

下面我复制粘贴了我在 PHPUnit 和 Composer 中使用的 bootstrap.php 文件：

```
<?php
if (!@include __DIR__ . '/../vendor/autoload.php') {
    die('You must set up the project dependencies, run the following commands:
        wget http://getcomposer.org/composer.phar
        php composer.phar install');
} 
```

有关 bootstrap.php 文件的更多信息，您可以在此处找到：[http](http://www.phpunit.de/manual/current/en/textui.html) ://www.phpunit.de/manual/current/en/textui.h​​tml 。

# ember.js - 带有点击事件的 {{action}} 不会触发 v2 Ember 路由器中的函数

> ID：14129444
> 
> 赞同：1
> 
> 时间：2013-01-02T21:26:53.367
> 
> 标签：ember.js

我刚刚更新了 Ember，我正在尝试将旧应用程序转换为新的路由器 API。

在我的模板中，我有这个：

```
<button {{ action "createNewApp" }} class="btn btn-primary">Create application</button> 
```

我在我的路线中放了一个 createNewApp：

```
App.CreateAppRoute = Ember.Route.extend({
    renderTemplates: function() {
        this.render({ outlet: 'content'});
    },
    createNewApp: function(){
        console.log("It's clicked");
    }
}); 
```

但是，当我单击按钮时，该函数永远不会被调用。我试图将事件的目标更改为控制器，但它仍然无法正常工作。这是一个错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:53:09.033

我能够使用路由器事件属性中的函数（感谢 sly7_7）或使用控制器中的函数来处理点击：

模板：

```
<script type="text/x-handlebars" data-template-name="application">
    <h1>Content Here:</h1>
    {{outlet content}}
  </script>

  <script type="text/x-handlebars" data-template-name="content-view">
    <h2>content</h2>
    <button {{ action "createNewApp" }} class="btn btn-primary">Create application</button>
  </script> 
```

JS：

```
var App = Ember.Application.create();

App.CreateAppView = Ember.View.extend({
    templateName: "content-view"    
});
App.CreateAppController = Ember.Controller.extend({
    createNewApp: function(){
        console.log("It's clicked, controller");
    }
});

App.Router.map(function(match) {
  match('/').to('createApp');
});
App.CreateAppRoute = Ember.Route.extend({
    renderTemplates: function() {
        this.render({ outlet: 'content'});
    },
    events: {
        createNewApp: function(){
            console.log("It's clicked, router");
        }
    }
}); 
```

单击按钮时，控制台日志消息为`"It's clicked, controller"`，当控制器中的功能被删除时，该操作由路由器处理，控制台日志消息为`"It's clicked, router"`。如果在`{{action}}`Ember 中没有指定目标，则尝试在视图中查找事件，然后是控制器，然后是路由。

这是使用今天从源代码构建的 emberjs 构建。

*原答案如下：*

新`{{action}}`路由器中的 替换为`{{linkTo}}`。

emberjs.com 指南会不断更新有关新路由器的新信息。[链接](http://emberjs.com/guides/templates/links/)指南涵盖了`{{linkTo}}`帮助程序，操作[指南](http://emberjs.com/guides/templates/actions/)讨论了使用`{{action}}`帮助程序处理模板中的事件。

# reporting-services - SSRS 2008 中的多值参数

> ID：14129449
> 
> 赞同：-3
> 
> 时间：2013-01-02T21:27:06.063
> 
> 标签：reporting-services

您如何知道在 SSRS 2008 的多值参数中首先选择了哪个值？

示例 a,b,c 是值

我想知道是否首先选择了 b，如果是，将字符串更改为 b,a,c

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:37:20.103

如果您的意思是跟踪用户在 Web 界面中首先单击的值，那么您无法通过 SSRS 获得此功能。多值参数不保留此顺序。

想到了一些解决方法：

**创建多个参数**
创建多个参数，例如“Primary BU”和“Secondary BUs”。您甚至可以从辅助列表中删除选择为主要的项目。

**创建自己的界面**
您可以随时创建自己的“报表管理器”界面，然后调用报表并自己提供服务。您可以在 UI 上获得完全的灵活性，但仍然可以使用 SSRS 来处理数据、报告创建和导出格式。

**Javascript hacking**
SSRS 网页毕竟是一个网页。理论上，您可以插入自己的代码。我不建议这样做，因为更新可能会破坏您的代码。

# ruby-on-rails - 向 Rails 数据库发布请求

> ID：14129452
> 
> 赞同：0
> 
> 时间：2013-01-02T21:27:17.767
> 
> 标签：ruby-on-rails, database, http, activerecord

我还是 Rails 的新手，很难将发布请求发送到我的 Rails 数据库。最终，我希望有一个 iOS 应用程序前端，后端带有 Rails。目前，我有一个 python 脚本正在向我的 Rails 服务器发送一个发布请求。[这是python脚本](http://pastebin.com/qWPgSTus)。我使用脚手架生成了其他所有内容。这是服务器[告诉我的。](http://pastebin.com/jWx8rVqj) 非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:49:47.953

目前还不清楚你的问题是什么。您是在谈论 CSRF 警告吗？查看[有关该主题的 rails 文档](http://guides.rubyonrails.org/security.html#cross-site-request-forgery-csrf)。

* * *

CSRF 是一种安全机制，可防止其他方的代码滥用您的用户会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T21:53:45.713

看起来 Rails 已经内置了[CSRF](http://en.wikipedia.org/wiki/Cross-site_request_forgery)保护。要从 Python（或 iOS）脚本成功发布到 Rails 脚本，您可能需要在 Rails 应用程序中禁用 CSRF 保护，如此[处所述](https://stackoverflow.com/questions/5669322/turn-off-csrf-token-in-rails-3)

还很好奇您为什么使用 Python 而不是 Ruby 来编写测试。（或者，如果您已经了解 Python，为什么不使用 Python 框架而不是 Rails？）

# ruby - 使用 ！关于 Ruby 中的一个方法

> ID：14129453
> 
> 赞同：0
> 
> 时间：2013-01-02T21:27:24.040
> 
> 标签：ruby, methods

我目前正在使用`capitalize!`：

```
user_input.capitalize! 
```

但是，如果输入大写，则返回 nil。

我知道我可以在没有 的情况下使用该方法`!`，但它会复制对象并传递它而不是更改对象。

```
user_input.capitalize 
```

我如何使用`!`，但它适用于所有情况？

我尝试了`downcase`一切，`capitalize`但在某些情况下存在同样的问题。

将所有条目大写的最佳方法是什么？

这是上下文：

```
The user inputs "works", "Works", "WORKS", or "WoRkS"
case 1) user_input = "works"
case 2) user_input = "Works"
case 3) user_input = "WORKS"
case 4) user_input = "WoRkS"

user_input.capitalize! (case 1,3,4 = "Works"; case 2 = nil) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T21:31:34.687

`!`按照惯例，方法会修改接收器，如果它们不做任何更改，则返回 nil。最安全的方法是使用两行：

```
user_name.capitalize!
user_name 
```

或`#tap`：

```
user_name.tap do |s|
  s.capitalize!
end 
```

虽然，`#tap`在这里有点矫枉过正。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T21:46:10.843

如果您只关心输入是否大写，请使用`capitalize!`并且不用担心`nil`.

如果您的代码中的某个点（由于某种原因）不能有 a `nil`，请不要使用`capitalize!`. 而是这样做：

```
user_input = user_input.capitalize 
```

归根结底，无论哪种方式都很好，惯用的，并且会使输入进入您想要的状态。就其本身而言，`nil`返回值并不是一件坏事——尽管您可能并不总是希望它作为最终的返回值。

# visual-studio - Visual Studio 中的“范围突出显示”功能？（与 BlueJ for java 中看到的相同）

> ID：14129454
> 
> 赞同：8
> 
> 时间：2013-01-02T21:27:28.230
> 
> 标签：visual-studio, plugins, ide, options-menu

我想知道（因为到目前为止我未能在 VS 的选项中找到这样的功能），如果有一个功能允许范围突出显示与 Java 的 BlueJ IDE 中看到的相同，这是一个示例：

![在此处输入图像描述](../Images/5e3ddeaa1c6941524a37bd1bad38fc6e.png)

请注意代码块是如何用颜色突出显示的，在使用 blueJ 学习 java 时，我发现它在查看代码时非常容易，而且一切都感觉更有条理，转向 C# 并在 MS Visual Studio 上工作，它的所有文本都带有一些突出显示、类名、关键字等，但总的来说，它仍然感觉像是白色背景上的黑色文本，并且缺乏我非常想念 blueJ 的那种有条理的感觉，

我注意到这里有一个类似的问题是指 eclipse, [Eclipse IDE Scope Highlighting?](https://stackoverflow.com/questions/11820952/eclipse-ide-scope-highlighting)

只是为了安全起见，再次提到Visual Studio，VS中有这样的功能吗？是否有允许它的 VS 附加组件 \ 插件？

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-03-01T09:41:46.063

Microsoft 为 Visual Studio 2013 和 2015 提供免费的 Productivity Power Tools 扩展。它具有类似于 CodeRush 插件的“结构可视化器”功能。两者都比 BlueJ 风格更微妙，但应该使范围更清晰一些。

[![截屏](../Images/275dd4f9851384ebf1a4e55bf487b9aa.png)](https://i.stack.imgur.com/CVdVh.png)

[生产力电动工具 2013](https://visualstudiogallery.msdn.microsoft.com/dbcb8670-889e-4a54-a226-a48a15e4cace)

[生产力电动工具 2015](https://visualstudiogallery.msdn.microsoft.com/34ebc6a2-2777-421d-8914-e29c1dfa7f5d)

**更新**

Visual Studio 2017 将此版本集成到 C#、Visual Basic、F# 和 XAML 的核心应用程序中（作为[结构指南](https://www.visualstudio.com/en-us/news/releasenotes/vs2017-relnotes-v15.0#a-idbetternav-aimproved-code-navigation)）。但是，C++ 仍然需要[扩展](https://marketplace.visualstudio.com/items?itemName=VisualStudioProductTeam.StructureVisualizer).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:36:01.993

看 DevExpress CodeRush 插件，有 30 天试用版。它提供的功能称为“结构突出显示”，我认为它甚至比您想要的更好（并且可以自定义）。

[CodeRush 快递](https://visualstudiogallery.msdn.microsoft.com/F9CDA5D8-10AF-4CC6-9D17-207222A3FD13)

[CodeRush 文档](http://documentation.devexpress.com/#CodeRush/CustomDocument3535)

# java - 为什么类文件不包含足够的信息来提供在 NPE 中为空的指针的名称？

> ID：14129455
> 
> 赞同：5
> 
> 时间：2013-01-02T21:27:28.710
> 
> 标签：java, nullpointerexception, .class-file

为了响应[Java 的 NullPointerException 可以更改为报告哪个变量为空？](https://stackoverflow.com/questions/12591806) [索比约恩-拉文-安德森](https://stackoverflow.com/users/53897)说：

> 不，类文件中的调试信息不​​包含足够的信息来允许这样做。

我的问题是，为什么不呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:42:59.300

它可能根本不是一个变量：它可能是一个临时结果，例如方法调用的结果。到 NPE 发生时，它只是一个匿名堆栈槽。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T21:36:17.977

实际的异常指向特定的字节码指令，但语言语句可能会扩展为数十条指令，并引用了六个不同的指针。此外，指针可能在几条指令的持续时间内一直保存在临时存储器（字节码堆栈）中，因此与特定变量名称的关联可能会丢失。

一个花哨的调试器可以对“出错”的变量做出公平的猜测，但一般来说，指向失败的语句就足够了（尽管请记住，失败可能是由于先前的语句，其动作是延期）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T21:46:36.903

因为代码中的行号足以跟踪它。

# android - Android更改不同的布局

> ID：14129459
> 
> 赞同：0
> 
> 时间：2013-01-02T21:27:49.077
> 
> 标签：android, xml, layout, imageview

我有一个带有标签内容的 TabHost。但是，此选项卡内容不会占据整个屏幕，并且会在顶部加载不同的布局。如何在创建选项卡活动时更改上面布局中的图像？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:31:58.983

我看到三种方式：

1.在两个Activity之间共享ImageView。为此，您可以将此元素设为私有并创建一个 getter。然后，您只需访问该元素并更改该元素。我不确定这会奏效。

2.preferred way 从远程源将图像加载到 onResume 中。然后，您只需从您的第二个活动中更改此远程路径。

3.以前的反应

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:30:16.347

您将无法从活动 B 访问活动 A 的视图；这是因为当您启动 Activity B 时，视图很可能会被破坏。

但是，您可以做的是以某种方式让 Activity A 知道在您回来时更改 ImageView。例如，您可以有一个静态字段，也可以使用`setResult()`.

# excel - 将 Excel 工作表合并为一个

> ID：14129472
> 
> 赞同：0
> 
> 时间：2013-01-02T21:28:36.470
> 
> 标签：excel, ms-access, vbscript, worksheet-function

我在一个工作簿中有数百个不同的工作表，我需要将每个工作表中的所有数据附加（而不是总和）到其他工作表中，并将它们全部放在一个巨大的主工作表中。每个工作表的所有列名都完全相同。

我的最终目标是从主工作表中获取所有数据并将其放入 Access 数据库中，因此，如果有人还知道一种简单的方法，可以一次从数百个 Excel 工作表中获取数据并将其放入数据库中会很好。

似乎最好的方法是某种 VBScript，但我对此非常不熟悉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:34:20.393

您可以比 VBScript 更简单地使用 VBA：

```
 'Requires reference to the Microsoft Excel x.x Object Library

   Dim strFileName As String
   Dim objXL As New Excel.Application
   Dim wkb As Excel.Workbook
   Dim wks As Object

   'objXL.Visible = True

   strFileName = "C:\Docs\LTD.xls"
   Set wkb = objXL.Workbooks.Open(strFileName)

   For Each wks In wkb.Worksheets
      DoCmd.TransferSpreadsheet acImport, acSpreadsheetTypeExcel9, _
           "TableName", strFileName, True, wks.Name & "$"
   Next

   'Tidy up
   wkb.Close
   Set wkb = Nothing
   objXL.Quit
   Set objXL = Nothing 
```

传输电子表格：http: [//msdn.microsoft.com/en-us/library/office/bb214134 (v=office.12).aspx](http://msdn.microsoft.com/en-us/library/office/bb214134(v=office.12).aspx)

请注意，您可能会遇到长列名、保留字符或列名中的名称、日期数据类型、列中的混合数据和列中的长数据的问题。

# python - bash脚本在调用表单python脚本时不读取行

> ID：14129476
> 
> 赞同：2
> 
> 时间：2013-01-02T21:28:52.700
> 
> 标签：python, bash

我有两个简单的脚本 - 我试图将一些信息（日期作为 python 脚本的输入）传递给 bash 脚本。这是python之一：

```
#!/usr/local/bin/python

import os
import sys
import subprocess

year = "2012"
month = "5"
month_name = "may"

file = open('date.tmp','w')
file.write(year + "\n")
file.write(month + "\n")
file.write(month_name + "\n")
file.close

subprocess.call("/home/lukasz/bashdate.sh") 
```

这是 bash 之一：

```
#!/bin/bash

cat /home/lukasz/date.tmp | \
while read CMD; do
    echo -e $CMD
done
rm /home/lukasz/date.tmp 
```

Python 脚本工作正常，没有问题。它调用了 bash 脚本，但看起来 while 循环没有运行。我知道 bash 脚本确实整体运行，因为 rm 命令被执行并且 date.tmp 文件被删除。但是，如果我在 python 中注释掉子进程调用，然后手动运行 bash 脚本，它可以很好地显示每一行。

简要说明我要完成的工作。我有一个 python 脚本，它将一个非常大的数据库导出到 CSV（几乎 300 个表和一些数据），然后调用 bash 脚本将 CSV 压缩到一个文件中并将其移动到另一个位置。我需要将提供给 python 脚本的月份和年份传递给 bash 脚本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T21:34:14.573

我相信你需要`file.close()`代替`file.close`. 对于后者，您实际上并没有关闭文件，因为您没有调用该方法。由于您还没有真正关闭文件，它可能不会被刷新，因此文件的全部内容可能会被缓冲而不是写入磁盘。

作为旁注，如果您使用上下文管理器，这些事情会自动处理：

```
with open('foofile','w') as fout:
    fout.write("this data")
    fout.write("that data")

#Sleep well tonight knowing that python guarantees your file is closed properly
do_more_stuff(blah,foo,bar,baz,qux) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T21:58:05.073

无需编写临时文件，而是将年、月和月名的值作为[参数](http://docs.python.org/2/library/subprocess.html#using-the-subprocess-module)发送到 bash 脚本。即，在 Python 代码中删除其中的所有行`file`，并替换
`subprocess.call("/home/lukasz/bashdate.sh")`
为
`subprocess.call(['/home/lukasz/bashdate.sh', year, month, month_name])`

并且在 bash 脚本中，将这些`cat ... rm`行替换为 (eg)
`y=$1; m=$2; mn=$3`
，它将年、月和月份名称放入 shell 变量 y、m 和 mn。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-02T21:38:17.403

也许尝试添加`shell=True`到通话中：

```
subprocess.call("/home/lukasz/bashdate.sh", shell=True) 
```

# java - 使用 web 和 link 元素的 JRebel rebel.xml 配置问题

> ID：14129480
> 
> 赞同：0
> 
> 时间：2013-01-02T21:29:03.327
> 
> 标签：java, configuration, jrebel

我有以下 rebel.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<application xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns="http://www.zeroturnaround.com"
             xsi:schemaLocation="http://www.zeroturnaround.com http://www.zeroturnaround.com/alderaan/rebel-2_0.xsd">

    <classpath>
        <dir name="${project.dir}/src/main/resources"/>
        <!-- Useful for classes when IDE auto compile on save is enabled, classes will be redeployed -->
        <dir name="${project.dir}/target/classes"/>
        <dir name="${project.dir}/target/digital-entitlement/WEB-INF/classes"/>
    </classpath>

<!--     <web> -->
<!--         <link target="/"> -->
<!--             <dir name="${project.dir}/src/main/webapp"/> -->
<!--         </link> -->
<!--     </web> -->

</application> 
```

有了它，类重新加载工作正常。但是，当我取消注释`<web>`上面的片段以启用网络资产重新加载时，网络应用程序会挂在登录表单测试用例上：

*   如果没有`<web>`配置，则网页正确加载，然后提交 un/pwd 即可，在修改时触发 jrebel 重新加载服务器端类。

*   添加`<web>`配置会挂起浏览器，并且永远不会加载初始登录页面（硒测试在 30 秒后超时）。

**注意**`<web>`：启用配置时，并非所有网页都会挂起。

谢谢

# c++ - 从与分配时不同类型的指针释放内存是否安全？

> ID：14129486
> 
> 赞同：7
> 
> 时间：2013-01-02T21:29:23.100
> 
> 标签：c++, memory, dynamic

我有一个关于在 C++ 中释放内存的问题：

```
typedef struct type1
{
   int a;
   int b;
   float c;
} Type1;

typedef struct type2
{
   int a;
   int b;
} Type2;

void *p = new Type1;

delete (Type2 *)p; 
```

`p`在这种情况下，即使`p`被转换为不同大小的类型，所指向的内存区域也会被完全删除吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-02T21:33:03.053

行为未定义。在这种情况下，动态分配的对象只能通过类型指针删除`Type1`。

首先，通过`(Type2 *)p`在`delete`表达式中使用通过获得的指针，您违反了别名规则。`p`存在一组有限的类型，通过这些类型可以使用指向的对象。C++03 的规则可以[在另一个问题的答案中](https://stackoverflow.com/questions/4807643/container-covariance-in-c/4807726#4807726)找到。C++11 规则类似（差异与您问题的答案无关）。

即使程序没有违反严格的别名规则，它也会违反`delete`表达式的要求。规范声明（C++11 §5.3.5[expr.delete]/3）：

> 如果待删除对象的静态类型与其动态类型不同，则静态类型应为待删除对象动态类型的基类，且静态类型应具有虚析构函数或行为未定义。

在您的`delete`表达式中，对象的静态类型是`Type2`，而动态类型是`Type1`。类型不同，但静态类型不是动态类型的基类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T21:34:19.803

这将是一个非常糟糕的主意，因为您会要求编译器安排在 Type1 指针上运行 Type2::~Type2 ，并且该析构函数可能会引用对象的末尾。

在传统环境中，最终释放内存是可以的，因为`operator delete`调用`free`不关心您在编译时调用的类型。然而，在不那么传统的环境中，这可能是一场灾难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T22:24:03.320

尽管[詹姆斯](https://stackoverflow.com/users/151292/james-mcnellis)已经完美地回答了这个问题，但我想指出一件事：

在正确的 C++ 代码中，您几乎永远不会使用`void`指针，这意味着您的代码可能看起来像这样：

```
SubType *p = new SubType;
BaseType* pB = (BaseType*)p;
delete pB; 
```

在这种情况下，即使`BaseType`有适当的虚拟构造函数，如果`SubType`不是从`BaseType`. 常见的 C 风格转换在这里不是很幸运的选择。

但是如果您使用`dynamic_cast`，编译器很可能不会让您这样做，以防它`p`不指向多态类型的对象。即使它`p`指向多态类型的对象，但`BaseType`不是 的基类型`SubType`，`dynamic_cast`也会返回`NULL`并且您可以适当地处理此状态：

```
SubType *p = new SubType;
BaseType* safePtr = dynamic_cast<BaseType *>(p);
if (!safePtr) // p doesn't point to object of type derived from BaseType
    ...       // handle this situation
else          // p points to object of polymorphic type derived from BaseType
    delete safePtr; 
```

# ruby-on-rails-3 - rails model doubts has_one, has_many, belongs_to

> ID：14129489
> 
> 赞同：0
> 
> 时间：2013-01-02T21:29:29.593
> 
> 标签：ruby-on-rails-3, associations

I have created 3 models for a small system. The intent here is to handle users, companies and their relationships. I anticipate to do a lot of lookups over the intersections and also want to have strict controls over the joins available, in that a user can only belong to one company, but company can have many users. I feel the best way to represent this is with the below. I would like some feedback on this preposition. So far my tests have worked fine validating my thesis and some small implementation efforts have gone fine, but when I look through a list of users to find their company I somehow run into issues and I have a feeling it is related to the has_one relationship, but not sure. Again thanks for constructive feedback.

```
class User < ActiveRecord::Base
has_one  :companyrelationship, foreign_key: "user_id"
has_one  :company, :through => :companyrelationship, dependent: :destroy

class Company < ActiveRecord::Base
has_many :companyrelationships
has_many :users, :through => :companyrelationships

class CompanyRelationship < ActiveRecord::Base
belongs_to :company
belongs_to :user

validates :user_id, presence: true, uniqueness: true
validates :company_id, presence: true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T23:34:05.713

I do see one thing that I'm pretty sure is an error and won't work. I can also try to add a couple points of constructive criticism.

The error is that the CamelCase model name is converted to underscorey (sorry, I can't remember the term for that right now) case. All your references to companyrelationship should add an underscore. You can override the convention by setting the :class_name attribute, but I don't think that's what you wanted.

Another issue I see which isn't technically wrong, but is almost certainly not what you want is that the `dependent: :destroy` would delete the `Company` when you deleted a `User`. (Actually, I'm not sure `dependent: :destroy` works in a `through:` relationship.) I assume what you wanted was just to delete the `CompanyRelationship`. You can read the section on *Dependent associations* at this link:

[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

Next point is that the default `foreign_key` is the model + `_id` so you don't need to specify it in this case.

My last point is purely a style preference. I like doing my validations by validation type. You're doing them by variable. They are functionally equivalent, so feel to take it with a grain of salt. (I'm pretty sure `user` and `user_id` are equivalent, but feel free to stick to `user_id` if you're more comfortable with it.)

If it were completely up to me, I would code it this way:

```
class User < ActiveRecord::Base
  has_one  :company_relationship, dependent: :destroy
  has_one  :company, through: :company_relationship

class Company < ActiveRecord::Base
  has_many :company_relationships
  has_many :users, through: :company_relationships

class CompanyRelationship < ActiveRecord::Base
  belongs_to :company
  belongs_to :user

  validates_presence_of :user, :company
  validates_uniqueness_of :user 
```

I hope that helps you get further.

# cocoa-touch - NSMutableArray：索引处的对象到底做了什么？

> ID：14129491
> 
> 赞同：1
> 
> 时间：2013-01-02T21:29:35.293
> 
> 标签：cocoa-touch, nsmutablearray

我正在运行以下代码，CCLOG 总是被触发..这两个指针具有相同的地址，我不明白为什么..我需要帮助 :)

bullets 是一个 NSMutable 数组，其中包含 20000 个 Bullet:CCSprite 实例，已在本问题末尾初始化*。

```
for (int i=0; i<capacity; i++)
{
    Bullet* bullet = [bullets objectAtIndex:i];

    if (bullet.visible )
    {
        for(int j=i+1;j<capacity;j++)
        {

            Bullet * otherBullet = bullet = [bullets objectAtIndex:j];

            if(bullet.bulletId == otherBullet.bulletId)
            {
                CCLOG(@"noooo.. i:%i j_%j", i, j);
            } 
```

*数组初始化：

```
capacity=200;
    bullets = [[NSMutableArray alloc] initWithCapacity:capacity];
    // Create a number of bullets up front and re-use them whenever necessary.
    for (int i = 0; i < capacity; i++)
    {
        Bullet* bullet = [Bullet bulletWithScreenRect:screenRect];
        bullet.visible = NO;
        bullet.bulletId=i;
        [bullets addObject:bullet];
        [self addChild:bullet]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:06:22.030

kevingessner 在我的代码中发现了一个错误：

" 子弹 * 其他子弹 = 子弹 = [子弹 objectAtIndex:j];"

正在将最新的项目符号分配给项目符号以及其他项目符号，以这种方式具有两个指向同一个项目符号的指针。

..so“索引处的对象”只是做它的工作（返回一个指向特定索引处的对象的指针）

# hibernate - spring 3.1 with hibernate 4 with spring security 3.1：如何确保包含所有依赖项以及要包含哪些标签？

> ID：14129500
> 
> 赞同：0
> 
> 时间：2013-01-02T21:30:35.743
> 
> 标签：hibernate, maven, spring-mvc, spring-security

我正在使用带有 hibernate 4 和 spring security 3.1 的 spring mvc 应用程序。我使用 maven 作为依赖管理工具。

如何确保包含所有依赖项？有没有一个网站可以让我输入这些框架名称，它会为我生成 pom？

试图：

所以我找到了 Spring MVC 和 Hibernate 4.1 所需的所有依赖项。我将它粘贴在这里以防万一其他人正在寻找类似的东西。我现在将处理 Spring Security 部分，并在成功配置后更新这篇文章：

```
<properties>
    <spring.version>3.1.1.RELEASE</spring.version>
    <hibernate-version>4.1.1.Final</hibernate-version>
    <mysql-version>5.1.20</mysql-version>
</properties>

<dependencies>
    <!-- Spring framework -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency> <!-- Used for Hibernate4 LocalSessionFactoryBean -->
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <!-- AOP dependency -->
    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.2.2</version>
    </dependency>

    <!-- Persistence Management -->
    <dependency> <!-- Apache BasicDataSource -->
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>1.2.2</version>
    </dependency>

    <dependency> <!-- MySQL database driver -->
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>${mysql-version}</version>
    </dependency>

    <dependency> <!-- Hibernate -->
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>${hibernate-version}</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>${hibernate-version}</version>
        <!-- will come with Hibernate core -->
    </dependency>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>3.8.1</version>
        <scope>test</scope>
    </dependency>
</dependencies> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T00:54:46.333

据我所知，您必须：

*   艰难地去做，阅读每个库的文档并找出它需要哪些 maven 依赖项（问题不会仅仅通过包含所有必需的依赖项而结束，但您还必须确保没有依赖项冲突。例如：如果您部署应用程序到 JBoss 容器，您需要考虑 JBoss 已经提供的内容以及您应该/不应该包含的内容）
*   如果上面太复杂，您可以使用 spring roo - 至少对于初始设置。Spring roo 将自动调整您的 pom，以便所有必需的依赖项都在那里。但是您可能没有您想要的休眠/弹簧安全版本

在部署 Spring 应用程序时，我个人的偏好是 tomcat 容器，因为它几乎是空白的，你处理冲突的机会更少。

# ruby-on-rails - 存根字符串哈希值而不是在rails测试中使用点运算符

> ID：14129506
> 
> 赞同：0
> 
> 时间：2013-01-02T21:31:05.823
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec

我有一个单元测试，我正在`place.ext_fb_place_id`使用

```
let(:place) { stub(:place, ext_fb_place_id: SecureRandom.random_number(20_000_000), facebook_metadata: {category: nil}, lat: 33.129147303422, lng: -96.653188420995, name: "In & Out Burger") } 
```

我不得不更改我的代码以使用字符串键而不是点运算符。也就是说，我必须使用`place["ext_fb_place_id']`才能获得正确的值。但是，这会引发以下错误：

```
Stub :place received unexpected message :[] with ("ext_fb_place_id") 
```

如何存根 [] 方法，以便可以使用类似`place["ext_fb_place_id"]`or的调用`place["lat"]`？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:25:16.587

我能够使用以下内容存根：

```
ext_fb_place_id = SecureRandom.random_number(20_000_000)

let(:place) { stub(:place, ext_fb_place_id: ext_fb_place_id, facebook_metadata: {category: nil}, lat: 33.129147303422, lng: -96.653188420995, name: "In & Out Burger", :[] => ext_fb_place_id)} 
```

感谢@LeeJarvis 和@JimDeville。

# api - 谷歌地图：防止协作者影响彼此的多边形

> ID：14129512
> 
> 赞同：0
> 
> 时间：2013-01-02T21:31:44.240
> 
> 标签：api, google-maps, collaboration

**背景：**

我正在为童子军组织一次大规模的食品活动。童子军单位由具有单位组织者的家庭组成。我创建了一个自定义地图，以允许每个单位定义自己的食物驱动外展区域，并且我已邀请单位组织者在地图上进行协作。每个单位组织者可以依次邀请各自单位内的个人来定义他们将覆盖的区域。地图的想法是帮助合作者防止重叠的外展区域。

**问题：** 如何防止协作者在自定义地图上影响彼此的多边形？

我想为每个单元创建一个自定义地图，然后创建一个脚本，该脚本将定期将 kml 文件导入到一个总体地图中，每个单元都可以查看但不能更改。但是似乎只有大约 10 个 kml 层的 maps api 有限制，而且我有大约 30 个单位在合作。我希望有一个更好的解决方案，而不仅仅是在我的自定义地图上免费使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:00:58.330

一种可能性是使用[FusionTablesLayer](https://developers.google.com/maps/documentation/javascript/reference#FusionTablesLayer)。将单个 KML 文件导入到[FusionTable](https://developers.google.com/fusiontables/)中，使用 FusionTablesLayer 显示生成的地图。（[教程](https://developers.google.com/maps/documentation/javascript/layers#FusionTables)）。

它将解决 10 KML 图层限制，并防止它们更改其他多边形，但不会解决重叠多边形的可能性。您可能需要编写代码来检测重叠的多边形，它们以某种方式手动解决它们。

# android - 语音识别中的特殊字符

> ID：14129514
> 
> 赞同：0
> 
> 时间：2013-01-02T21:31:48.933
> 
> 标签：android, speech-recognition

我想知道是否有办法使用 Android SpeechRecognizer识别特殊字符（`@`、、、、`-`） ？`.``_`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T00:06:17.123

Android 的语音识别器（即[android.speech](http://developer.android.com/reference/android/speech/package-summary.html)中的接口和类）返回字符串。其中一些字符串（或其子字符串）可能等同于例如`@`，但您无法要求（例如通过设置附加项）。您最好的选择是观察您最喜欢的语音识别器是如何工作的，并假设它（总是）将声音 /at sign/ 映射到短语“at sign”，将其重新映射到`@`您的应用程序中。

# actionscript-3 - StageWebView AS3 - 检查是否加载网站失败？

> ID：14129517
> 
> 赞同：2
> 
> 时间：2013-01-02T21:32:13.217
> 
> 标签：actionscript-3, stagewebview

我可以以某种方式检查 stageWebView 是否没有加载网页吗？例如，如果用户没有互联网连接，它将无法加载 google.com... 我可以检查它是否无法加载 Google.com？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:37:54.663

是的！ `StageWebView`抛出一个`ErrorEvent.ERROR`，所以你可以为它设置一个监听器：

```
webView.addEventListener(ErrorEvent.ERROR, onError);  //webView is a StageWebView
function onError(e:ErrorEvent):void 
{
    trace("Page is not available. Try reloading.");
} 
```

# php - Symfony，未清除整个表单

> ID：14129522
> 
> 赞同：0
> 
> 时间：2013-01-02T21:32:39.987
> 
> 标签：php, symfony

我的注册表有问题，当我单击提交按钮时，注册完成，但并非所有表单的值都被清除，密码字段中总是有 3 个点。可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:16:36.930

```
<input type="password" autocomplete="off" name="field" /> 
```

# java - BufferedReader java没有到达文件末尾

> ID：14129523
> 
> 赞同：0
> 
> 时间：2013-01-02T21:32:51.063
> 
> 标签：java, file, buffer, bufferedreader

目前我正在尝试从内容长度为 37743 的响应中读取一个不那么短的流。我正在使用 read(char[] buffer, int offset, int length)，但在将其与我正在阅读的原始 json 文件。我试图检查这是否是一个常见问题，但我找不到任何可能导致问题的原因：

*   字符串生成器的最大长度？
*   char[] 的最大长度？
*   缓冲区长度？（目前为 8192）
*   while 条件不正确？（以下片段）

```
while ((reader.read(buffer, 0, buffer.length)) != -1)
     sb.append(String.valueOf(buffer)); //sb is the String builder 
```

注意当缓冲区长度改变时，结果又改变了，例如当改变为1024时，得到了与8192缓冲区相同的结果加上另一段与原始json字符串不一致的文本。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T21:35:30.907

你永远不应该忽略`Reader.read()`. 如果到达流的末尾，则返回 -1。如果不是，则返回已读取的字符数。假设它准确读取您要求它读取的字符数是错误的。

将其更改为

```
while ((read = reader.read(buffer, 0, buffer.length)) != -1) {
    sb.append(buffer, 0, read);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-02T21:40:00.647

您应该使用以下方法编写 sb 对象：

```
public StringBuilder append(char[] str,
                        int offset,
                        int len) 
```

偏移量为 0，len 作为 reader.read 的返回值

```
int len = 0;

while ((len = reader.read(buffer,0,buffer.length))!=-1) {
    sb.append(buffer,0,len);
} 
```

# mysql - SQL 限制开始于

> ID：14129524
> 
> 赞同：0
> 
> 时间：2013-01-02T21:32:54.247
> 
> 标签：mysql, limit

我有这个查询

```
SELECT * FROM Posts WHERE Topics = '2hnsk6i2iqgoh0c6kdbyd' ORDER BY Number DESC limit 0,25 
```

这将导致以下结果

```
2hnsk6i2iqgoh0c6kdbyd   admin   coecxrj0vqkow46h6243v   17:28   2013/01/02  1357147682
2hnsk6i2iqgoh0c6kdbyd   admin   uvde2od4fffjyri2se3v6   17:28   2013/01/02  1357147682
2hnsk6i2iqgoh0c6kdbyd   admin   7nvk4tamdcmmqxc8xxzns   17:28   2013/01/02  1357147682
2hnsk6i2iqgoh0c6kdbyd   admin   46ibv785bpbcqin5csgqt   17:28   2013/01/02  1357147681
2hnsk6i2iqgoh0c6kdbyd   admin   nprsukm2v7adx62psizcn   17:28   2013/01/02  1357147681
2hnsk6i2iqgoh0c6kdbyd   admin   5jffjmcrywv28ypxf88m8   17:28   2013/01/02  1357147681
2hnsk6i2iqgoh0c6kdbyd   admin   i5ejx2hqf7m6m4ybc0b43   17:28   2013/01/02  1357147680
2hnsk6i2iqgoh0c6kdbyd   admin   m72qzizi0ru4z6e2vz6vq   17:28   2013/01/02  1357147680
2hnsk6i2iqgoh0c6kdbyd   admin   3mf83zzvow6wt2gfhb6ub   17:28   2013/01/02  1357147680
2hnsk6i2iqgoh0c6kdbyd   admin   ct2j2u8xx8ny8x3u27sjc   17:27   2013/01/02  1357147679
2hnsk6i2iqgoh0c6kdbyd   admin   sdbx6iyburbeg0ie0magt   17:27   2013/01/02  1357147679
2hnsk6i2iqgoh0c6kdbyd   admin   5hir63ok3kq06g3upqbhk   17:27   2013/01/02  1357147679
2hnsk6i2iqgoh0c6kdbyd   admin   4pvuwgqazd84yck7adoxa   17:27   2013/01/02  1357147678
2hnsk6i2iqgoh0c6kdbyd   admin   oiv6quuyrpwe8bgirjr4i   17:27   2013/01/02  1357147678
2hnsk6i2iqgoh0c6kdbyd   admin   xcutah6426zesq323gfwx   17:27   2013/01/02  1357147678
2hnsk6i2iqgoh0c6kdbyd   admin   hgfqab040h4k55bjedpkt   17:27   2013/01/02  1357147678
2hnsk6i2iqgoh0c6kdbyd   admin   oonp5r3np5knm5d4ohm55   17:27   2013/01/02  1357147677
2hnsk6i2iqgoh0c6kdbyd   admin   cbckqm8qi2oaimir2epzi   17:27   2013/01/02  1357147677
2hnsk6i2iqgoh0c6kdbyd   admin   vtsaqex6wfdmh8ioceuvn   17:27   2013/01/02  1357147677
2hnsk6i2iqgoh0c6kdbyd   admin   0ubs8ur2wo55ohfuipdo0   17:27   2013/01/02  1357147677
2hnsk6i2iqgoh0c6kdbyd   admin   8tvorn65epoaict0fp26z   17:27   2013/01/02  1357147676
2hnsk6i2iqgoh0c6kdbyd   admin   soctqr26i7aycza2u73pi   17:27   2013/01/02  1357147676
2hnsk6i2iqgoh0c6kdbyd   admin   8ukjwmao2qtt374g6p7ej   17:27   2013/01/02  1357147676
2hnsk6i2iqgoh0c6kdbyd   admin   4wyinun2ki45h6ww73qg6   17:27   2013/01/02  1357147675
2hnsk6i2iqgoh0c6kdbyd   admin   3dpsbg2t7s7fj2hbiyenk   17:27   2013/01/02  1357147675 
```

这会在某个主题中显示论坛帖子，但是说用户正在查看帖子历史记录，并希望使用它来访问该主题，我想要一些代码，例如

```
SELECT * 
FROM Posts 
WHERE Topics = '2hnsk6i2iqgoh0c6kdbyd' 
ORDER BY Number DESC limit (SELECT * FROM POSTS WHERE POST = 'soctqr26i7aycza2u73pi'),25. 
```

那当然行不通，但是我不知道您是否可以，如果可以，我将如何使那段代码正常工作

由于存在一些混乱，我会尝试简化它。

我想运行查询 Topics = '$topic' 然后在那个 pull Post = '$post' 中，这将返回一个值，我希望在 Limit 中使用它的行号作为起点返回数据或本质上相似的代码来做同样的工作

MySQL 版本 5.5.29-日志

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:04:56.793

是`least`你在找什么？即 25 和对该帖子的回复数量中的较小者？

```
SELECT * 
FROM Posts 
WHERE User = 'admin' 
ORDER BY Number DESC limit least((SELECT count(*) FROM POSTS WHERE POST = 'soctqr26i7aycza2u73pi'),25); 
```

* * *

编辑：对 OP 所要求的内容的误解。听起来想要的是通过帖子列获取帖子编号，然后获取接下来的 25 个帖子。

所以我认为OP实际上想要的是

```
select *
from posts
where user = 'admin'
order by number desc offset (select count(*) from posts where number > (select number from posts where post = 'soctqr26i7aycza2u73pi') )
limit 25; 
```

请注意，我有`number >`而不是`<`因为 OP 的`desc`订购。

* * *

重新编辑：原来你不能在限制或偏移语句中进行子选择（http://stackoverflow.com/questions/8181727/how-to-use-subquery-to-define-mysql-select-limit-offset）没有一些hacky魔法。

在讨论中，OP 提到他正在为此使用 PHP。我的建议是将结果存储`select count(*) from posts where number > (select number from posts where post = 'soctqr26i7aycza2u73pi'`为一个单独的变量并稍后将其插入偏移量，或者只是将最外层查询的结果从那里循环到 25。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:15:49.433

```
SELECT * FROM Posts 
WHERE User = 'admin' 
AND Number >= ( SELECT Number FROM POSTS WHERE POST = 'soctqr26i7aycza2u73pi')
ORDER BY Number
LIMIT 25 
```

这是解决问题的方法，感谢那些试图帮助的人

# matplotlib - 将图形拟合到 matplotlib 中的颜色条

> ID：14129532
> 
> 赞同：4
> 
> 时间：2013-01-02T21:33:46.923
> 
> 标签：matplotlib

我有一个 imshow 图表，它显示数值的 colobar。颜色条比图表大得多。有没有办法缩放它们以使它们最终具有相同的大小，最好不影响图形的纵横比？

```
grid = np.ma.array(grid, mask=np.isnan(grid))
plot.imshow(grid, interpolation='nearest', aspect='equal', vmax = private.vmax, vmin = private.vmin)
plot.minorticks_off()
plot.set_xticks(range(len(placex)))        
plot.set_yticks(range(len(placey)))
plot.set_xticklabels(placex)        
plot.set_yticklabels(placey, rotation = 0)
plot.colorbar()
plot.show() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T09:22:44.593

您可以通过 matplotlib 的任何内置方法指定一个轴对象，然后将其用于您的颜色条，例如：

```
import matplotlib.pyplot as plt
import numpy as np

ax2 = plt.subplot2grid((1,6), (0, 5), colspan=1)
ax1 = plt.subplot2grid((1,6), (0, 0), colspan=5)

plt.imshow(np.random.random((10,10)))
plt.colorbar(cax=ax2)

plt.show() 
```

这将导致类似：

![示例代码图](../Images/d6d2990317b9e16cd9be44f3afc9cd9b.png)

但是，如果您的 imshow-axes 变得非常平坦，这将无济于事（由于`aspect="equal"`，这可能会发生）。

如果您想处理此类情况，您可以

1.  将图形大小调整为网格的方面，例如

    ```
     fig = figure(figsize=grid.shape[1]*1.5/dpi, grid.shape[0]/dpi) 
    ```

2.  在绘图后读取 ax1 的坐标，然后使用适当转换的坐标创建 ax2，然后将 ax2 用于颜色条。当您调整窗口大小时，这表现不佳，但如果您只是自动将绘图创建为图像文件，则可能会奏效。

如果 2\. 是您需要的，我可以为此添加一个示例，但如果您确定这是您想要的，我只会做这项工作。

问候，托尔斯滕

# javascript - 显示内容的替代方法

> ID：14129534
> 
> 赞同：0
> 
> 时间：2013-01-02T21:34:07.553
> 
> 标签：javascript, jquery

选中的单选按钮将显示其相应的下拉框。

例如，在选中单选按钮“安大略”时，将显示一个带有匹配城市的下拉框。

对于上面的示例，我有以下工作代码：

```
<script type="text/javascript">
$(document).ready(function(){
  $("#searchForm input:radio").change(function() {

      var buttonPressed = $('[name="Region"]:radio:checked').val();
      var cityElmntBox = document.getElementById("dispalyCityBox");

      if(buttonPressed == 'Ontario'){
          cityElmntBox.style.display='block';
      } else {
          cityElmntBox.style.display='none';
      }

  });   
});
</script> 
```

而不是突然的效果（`display='block'`），我想为选定的元素使用该`slideDown()`方法。

所以我更换了：

```
cityElmntBox.style.display='block'; 
```

和：

```
cityElmntBox.slideDown(500); 
```

但这不起作用......请有人帮我让它工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:38:38.910

将其包装在 jQuery 中：

```
$(cityElmntBox).slideDown(500); 
```

您也可以像这样简化 var 语句，而不必将其放入包装器中：

```
var cityElmntBox = $("#dispalyCityBox"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T21:43:06.460

使用`$('#dispalyCityBox')`而不是`document.getElementById("dispalyCityBox")`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T21:36:26.797

试试`$('#dispalyCityBox').slideDown(500)`吧。

通过使用`cityElmntBox.slideDown(500);`，您尝试在非 jQuery 对象上使用 jQuery 方法。

# ruby-on-rails - 删除特定主机的 htaccess 中的 ldap auth

> ID：14129544
> 
> 赞同：1
> 
> 时间：2013-01-02T21:34:51.797
> 
> 标签：ruby-on-rails, apache, .htaccess, passenger

我有一个 Rails 服务器（Passenger/Apache），它为所有意图和目的运行，LDAP 身份验证。

```
<Directory "/railsapp/public">
    AllowOverride All
    Allow from all
    Require valid-user
    Options -MultiViews
</Directory> 
```

我将 REMOTE_USER 变量与本地数据库结合使用以进行用户身份验证。但是，我有一组特殊的主机需要能够从这个 rails 应用程序中获取路由。应用程序已经有逻辑不检查这些路由的 REMOTE_USER。

可能的解决方案是为特殊用户和密码配置 .htaccess 以用于身份验证，但这将授予对应用程序的访问权限。相反，我正在考虑将大部分静态的主机列表列入白名单，这样`Require valid-user`不适用于这些主机。

我将如何为此设置 /railsapp/public/.htaccess 和/或 vhost.conf ？

我试过（在.htaccess中）

```
allow from myhost.mydomain.com 
```

并重新启动 apache，但从 myhost 尝试时仍然需要 401 授权。

我将如何避免我在我的 webapp 上进行的身份验证？解决方案不必局限于我试图解决这个问题的方式，但我的主要应用程序绝对需要 LDAP REMOTE_USER。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:14:24.340

添加[满足](http://httpd.apache.org/docs/2.2/mod/core.html#satisfy)指令

```
Satisfy Any 
```

也

```
allow from myhost.mydomain.com 
```

到您的 .htaccess。

# c# - 从数组中创建选择列表

> ID：14129545
> 
> 赞同：2
> 
> 时间：2013-01-02T21:34:53.443
> 
> 标签：c#, arrays, linq, list, ienumerable

> **可能重复：**
> [如何使用 linq 在列表中查找索引特定项目？](https://stackoverflow.com/questions/4374237/how-to-find-the-index-particular-items-in-the-list-using-linq)

我正在尝试`IEnumerable<SelectListItem>`从字符串数组创建一个。

```
string[] months = { "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" };

model.month = months
        .Select(r => new SelectListItem{Text = r, Value = ???}); 
```

有没有办法在这个查询中访问他们的索引？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-02T21:36:10.120

使用重载[的 Enumerable.Select](http://msdn.microsoft.com/en-us/library/bb534869.aspx)方法：

```
model.month = months
    .Select((r,index) => new SelectListItem{Text = r, Value = index.ToString()}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-02T21:38:22.833

尝试使用[`Enumerable.Select`](http://msdn.microsoft.com/en-us/library/bb534869.aspx).

> 通过合并元素的索引将序列的每个元素投影到新形式中。

```
model.month = months
        .Select((r, i) => new SelectListItem{Text = r, Value = i.ToString()}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T21:43:29.090

杰夫，根据 lila G 发布的链接上的示例，这应该对您有用

```
string[] months = { "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" };
var query = months.Select((r, index) => new  { Text = r, Value = index }); 
```

调试器中的屏幕截图

![在此处输入图像描述](../Images/208e0696aa675e3aadabe94853a7a0a1.png)

# android - Android 将图片发布到 Facebook 公共页面墙

> ID：14129546
> 
> 赞同：0
> 
> 时间：2013-01-02T21:34:58.243
> 
> 标签：android, facebook, image-uploading, facebook-comments, facebook-android-sdk

我目前可以使用以下方式发布到公共页面墙上：

```
JSONObject json = new JSONObject();
json.put("message", "I'm on your wall");

Request req = Request.newPostRequest(getSession(), "PowerCardSoftware/feed", GraphObject.Factory.create(json), new Callback() {
        @Override
        public void onCompleted(Response response) {
            if(response.getError() != null)
                Log.e("FRAGACTIVITY", response.getError().toString());
            Toast.makeText(getBaseContext(), "I hacked your facebook!", Toast.LENGTH_SHORT).show();
        }
    });
    Request.executeBatchAsync(req); 
```

我也想将用户拍摄的照片张贴到公共墙上。我尝试使用 Bundle 而不是 JSONObject 并使用以下每一行：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
postPhoto.compress(CompressFormat.JPEG, 100, baos);
params.putByteArray("picture", baos.toByteArray());
params.putByteArray("source", baos.toByteArray()); 
```

他们都给我这样的错误 - errorMessage: (#100) 图片 URL 格式不正确

任何人都知道如何在不使用 facebook sdk 中已弃用的功能/对象的情况下将照片发布到其他人的 facebook 墙上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:05:30.183

这是我上传本地存储在手机上的照片的代码：

```
 Request request6 = Request.newUploadPhotoRequest(
                session,
                ((BitmapDrawable) getResources().getDrawable(
                        R.drawable.picture)).getBitmap(), callback6);
        RequestAsyncTask task6 = new RequestAsyncTask(request6);
        task6.execute(); 
```

这是上传到您自己的墙上。无法选择其他收件人的原因是由于 2 月份的重大更改将禁止发布到其他人的墙上。

[请参阅我之前的回答](https://stackoverflow.com/questions/13829086/oauthexception-when-trying-to-post-to-friends-wall/13830728#13830728)。

编辑：

> 上传照片的最佳方式是什么？

你可以试试这个，看看这是否有效？

```
 Bundle parameters = new Bundle();
    parameters.putParcelable("picture", YOUR_BITMAP_HERE);
    parameters.putString("message", "my message for the page");

    return new Request(session, "PowerCardSoftware/feed", parameters, HttpMethod.POST, callback); 
```

> 我可以使用 newUploadPhotoRequest() 添加消息吗？

不，要在照片中添加消息，您不会使用`newUploadPhotoRequest`. 如果您深入研究源代码，它只是 a 的包装器`Request`，因此与方法相同，但添加一个附加参数 ,`message`带有您想要的消息，然后执行它。我没有亲自验证它，但它*应该可以*工作。如果没有，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T14:57:24.563

这是我的解决方案。我参考了[Jesse Chen](https://stackoverflow.com/users/931354/jesse-chen)的回答并做了一些修改。

```
Bitmap image = BitmapFactory.decodeFile(Environment.getExternalStorageDirectory().getAbsolutePath() + File.separator + "demo.jpg");
Bundle parameters = new Bundle();
parameters.putParcelable("source", image);
parameters.putString("message", "my message for the page");
Request request = new Request(Session.getActiveSession(), "me/photos", parameters, HttpMethod.POST, new Request.Callback() {
    @Override
    public void onCompleted(Response response) {
        showPublishResult(mainActivity.getString(R.string.photo_post), response.getGraphObject(), response.getError());
    }
});
request.executeAsync(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-16T04:48:35.277

您可以查看 facebookSDK 项目 /tests 文件夹并搜索关键字 newPostRequest。示例代码如下

```
GraphObject statusUpdate = GraphObject.Factory.create();
                String message = "message";
                statusUpdate.setProperty("message", message);
                statusUpdate.setProperty("link", "http://stackoverflow.com/questions/14129546/android-post-picture-to-facebook-public-page-wall#");
            Request request = Request.newPostRequest(Session.getActiveSession(), "me/feed", statusUpdate, new Callback() {

                @Override
                public void onCompleted(Response response) {

                }
            });
            request.executeAsync(); 
```

# python - Python：如何从转换后的 csv 文件创建数据文件？

> ID：14129547
> 
> 赞同：1
> 
> 时间：2013-01-02T21:34:59.770
> 
> 标签：python, csv

我正在尝试将 csv 文件转换为另一个文件（文件类型无关紧要，因为使用转换后的数据的程序只是像文本文件一样打开它）。

到目前为止，我已经设法将原始 csv 数据转换并打印成我想要的数据结构，但我现在需要将其另存为另一个文件。

```
import csv
file = open('newData', 'w')

with open('initialData.csv', 'rb') as f:
reader = csv.reader(f, delimiter=',', quotechar='|')
for row in reader:
    print row[13] + ' 1:' + row[0] + ' 2:' + row[1]
    file.write(f)

file.close() 
```

每当我运行它时，我都会收到错误消息：

```
TypeError: expected a character buffer object 
```

我知道转换 csv 文件没有任何问题，因为当我注释掉 file.write(f) 时打印效果很好。

提前谢谢了！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T21:37:19.983

为什么要尝试将原始文件（`f`对象）写入新文件？你不想写重新格式化的数据吗？

```
import csv

with open('initialData.csv', 'rb') as f_in, open('newData', 'w') as f_out:
    reader = csv.reader(f_in, delimiter=',', quotechar='|')
    for row in reader:
        print row[13] + ' 1:' + row[0] + ' 2:' + row[1]
        f_out.write(row[13] + ' 1:' + row[0] + ' 2:' + row[1]) 
```

**编辑：**正如 Jon Clements 所建议的，使用上下文管理器进行输出以及缩进修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:37:54.107

您正在尝试打印整个 csv 文件的文件句柄。我猜您希望将要打印的文本写到文件中，在这种情况下，只需执行以下操作：

```
with open('initialData.csv', 'rb') as infile, open('newData.txt') as outfile:
    reader = csv.reader(infile, ...)
    for row in reader:
        outfile.write(row[13] + ' 1:' + row[0] + ' 2:' + row[1]) 
```

# linux - 通过在linux中删除url参数重命名文件

> ID：14129548
> 
> 赞同：9
> 
> 时间：2013-01-02T21:35:02.297
> 
> 标签：我使用wget, linux, file, shell, file-rename, batch-rename

[我使用wget](/questions/tagged/wget "显示标记为“wget”的问题")下载了一些文件，文件格式如下：

```
test.zip?AWSAccesskeyId=XXXXXXX&Expires=00000000&Signature=ZZZZZZZZZZ 
```

有什么方法可以通过删除 URL 参数来正确重命名这些文件。还有什么方法可以从`wget`.

我尝试使用`mmv`以下命令：

```
mmv "*.zip*" "#1.zip" 
```

但是我找不到任何安装方法`mmv`。我正在使用 CentOS 6。所以，请提出除此之外的任何方法。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-02T21:49:20.993

```
for file in *.zip\?*; do mv "$file" "${file%%\?*}"; done 
```

据我所知，没有选项可以`wget`告诉它不要在本地文件名中包含查询字符串。您可以使用该`-O`选项指定显式文件名，并修复驱动程序脚本以删除查询字符串本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T21:45:38.450

```
for i in `ls *.zip?*`; do echo $i | cut -f 1 -d \? | xargs -n1 mv $i ; done 
```

很抱歉现在懒得检查名称中的空格。并且无法测试。我目前无法访问基于 bash 的系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-07T09:22:10.687

如果有，`g++ >=4.9.2`那么您可以安装[rnm](https://github.com/neurobin/rnm)并执行以下操作：

```
rnm -ns '/n/.zip' *.zip\?*
# /n/ expands to file name without extension. 
```

或者

```
rnm -rs '/\.zip\?.*/.zip/' *.zip\?* 
```

# button - 按钮元素内的 IE8 绝对定位元素错误

> ID：14129550
> 
> 赞同：3
> 
> 时间：2013-01-02T21:35:06.660
> 
> 标签：button, internet-explorer-8, css-position

标题说明了一切：按钮元素的绝对定位子元素在 IE8 中是错误的
这是一个[小提琴](http://jsfiddle.net/Sjeiti/paFKM/)
这里是强制性的一段代码：

```
<button><div></div></button>
<style>
button{
    position: relative;
    width: 200px;
    height: 200px;
    border: 0;
    background: gray;
}
button div{
    position: absolute;
    top: 5px;
    left: 0px;
    width: 100px;
    height: 100px;
    background: red;
}​
</style> 
```

我已经搜索并尝试了我能想到的一切。也许我应该放弃使用按钮元素：-/

这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-04T01:17:04.617

您需要在按钮 css 中添加一个溢出：可见。

这是一个小提琴[https://jsfiddle.net/innerurge1/os2e9c2j/7/](https://jsfiddle.net/innerurge1/os2e9c2j/7/)。此外，您应该用 span 替换 div，因为这更具语义性。Div 在按钮中不是“允许的”，因为它们是块元素并且按钮是内联的。

```
.parent{
    position: relative;
    width: 200px;
    height: 200px;
    border: 0;
    background: gray;
    text-align : left;
    overflow:visible;
} 
```

# javascript - Phonegap - 通过文件传输发送时来自相机的图像 URL 错误？

> ID：14129557
> 
> 赞同：0
> 
> 时间：2013-01-02T21:35:27.440
> 
> 标签：javascript, android, cordova

所以看来我偶然发现了一个关于phonegap 2.2.0的非常奇怪的问题。

我正在尝试拍照，并通过文件传输插件发送，如下所示：

```
if(navigator.camera) {
        navigator.camera.getPicture(function(imageURI){
            console.log('captured image = '+imageURI);
            $('#photoConfirmation .image-preview').attr('src', imageURI);
            self.photoURI = imageURI;
            $('#photoConfirmation').show().simpledialog2({
                'mode' : 'bool',
                'prompt' : '',
                'useModal': true,
                'zindex':1001,                    
                'callbackClose': function(e){
                    $('#photoConfirmation').hide();
                }
            });
        }, 
        function(message){
            alert('Failed to get picture: ' + message);
        }, {
            sourceType:1, 
            quality: 50, 
            destinationType:1
        });
    } else {
        alert('Camera is not supported on this device.');
    }    

 var options = new FileUploadOptions();
    options.fileKey="files[]";
    options.fileName = 'image_something'.jpg';
    options.mimeType="image/jpeg";
    options.chunkedMode = false;

    var params = new Object();
    params.extraData= 'object-' + anObject.id;

    options.params = params;
    var ft = new FileTransfer();
    ft.upload(imageURI, "http://someupload.com/destination/url", function(r){alert('Finished upload!');}, function(error){console.log(error);alert('Error uploading image with code: ' +error.code)}, options); 
```

问题是，这显示在预览中，但没有上传！这张照片肯定会被捕获，因为我在图像预览中看到了它……我可以发誓我以前做过这样的事情。有没有人看到我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:45:55.897

[Cordova API Documentation](http://docs.phonegap.com/en/2.2.0/cordova_file_file.md.html#FileTransfer)上有一个 FileTransfer 插件的参考实现（它使用从相机捕获的照片），它的实现与您的有很多不同。阅读您的代码，您似乎在捕获照片（并创建 imageURI）之前启动了文件传输。此外，您正在使用数字常量`sourceType`和`destinationType`。虽然这些很可能不会导致您遇到的问题，但这些的正确形式是：

```
destinationType: navigator.camera.DestinationType.FILE_URI,
sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY 
```

这是一个包含一些小错字修复的示例（我假设`'`fileName 中的额外内容不是您代码的一部分）应该是一个工作版本：

```
if (navigator.camera) {
  navigator.camera.getPicture(

  function (imageURI) {
    console.log('captured image = ' + imageURI);
    $('#photoConfirmation .image-preview').attr('src', imageURI);
    self.photoURI = imageURI;
    $('#photoConfirmation').show().simpledialog2({
      'mode': 'bool',
      'prompt': '',
      'useModal': true,
      'zindex': 1001,
      'callbackClose': function (e) {
        $('#photoConfirmation').hide();
        var options = new FileUploadOptions();
        options.fileKey = "files[]";
        options.fileName = 'image_something.jpg';
        options.mimeType = "image/jpeg";
        options.chunkedMode = false;
        var params = new Object();
        params.extraData = 'object - ' + anObject.id;
        options.params = params;
        var ft = new FileTransfer();
        ft.upload(imageURI, "http://someupload.com/destination/url", function (r) {
          alert('Finished upload!');
        }, function (error) {
          console.log(error);
          alert('Error uploading image with code: ' + error.code)
        }, options);
      }
    });
  },

  function (message) {
    alert('Failed to get picture: ' + message);
  }, {
    sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY,
    quality: 50,
    destinationType: navigator.camera.DestinationType.FILE_URI
  });
} else {
  alert('Camera is not supported on this device.');
} 
```

# django - django-celery：动态创建和注册任务

> ID：14129568
> 
> 赞同：10
> 
> 时间：2013-01-02T21:36:18.237
> 
> 标签：django, celery

我想添加延迟使用`django-celery`. 目前，我已经创建了一个类似于下面的类（只是一个例子，实际的类不止这个）：

```
from celery.task import task

class Delayer(object):
    def delay(self, func, minutes):
        return task(func, name="%s.delayed"%self.__class__.__name__)\
            .apply_async(countdown=minutes*60) 
```

我正在按如下方式运行 celeryd：

```
python manage.py celeryd -E -B -lDEBUG 
```

当我尝试从 django shell [例如`Delayer().delay(lambda: 1, 1)`] 中运行我的延迟方法时，我在 celeryd 输出中收到这样的错误：

```
[2013-01-02 15:26:39,324: ERROR/MainProcess] Received unregistered task of type "Delayer.delayed".
The message has been ignored and discarded.

Did you remember to import the module containing this task?
Or maybe you are using relative imports?
Please see http://bit.ly/gLye1c for more information.

The full contents of the message body was:
{'retries': 0, 'task': "Delayer.delayed", 'eta': '2013-01-02T21:27:39.320913', 'args': [], 'expires': None, 'callbacks': None, 'errbacks': None, 'kwargs': {}, 'id': '99d49fa7-bd4b-40b0-80dc-57309a6f19b1', 'utc': True} (229b)

Traceback (most recent call last):
  File "/home/simon/websites/envs/delayer/local/lib/python2.7/site-packages/celery/worker/consumer.py", line 432, in on_task_received
    strategies[name](message, body, message.ack_log_error)
KeyError: "Delayer.delayed" 
```

我的问题是，是否可以注册此类动态创建的任务？如果没有，我可以使用其他什么方法来使用芹菜达到相同的效果？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-04T22:49:31.780

简单的答案是你不能；因为 celery 在不同的进程中运行，它需要能够导入任何作为 celery 任务运行的代码；您生成的可调用对象不是，因此 celery 移动对可调用对象的引用的方式不起作用。

然而，这确实提出了一种可能的攻击方式：如果您可以想出一种不同的方式来序列化您的可调用对象，那么您可以将其作为参数提供给一个简单的 celery 任务。[这个先前的问题](https://stackoverflow.com/questions/6234586/we-need-to-pickle-any-sort-of-callable)可能会有所帮助。请注意安全性的警示性提及:-)

# c# - 测试空值或空值的 SQL 参数

> ID：14129572
> 
> 赞同：0
> 
> 时间：2013-01-02T21:36:34.780
> 
> 标签：c#, sql

我正在对 SQL 数据库执行简单的插入操作。查询是参数化的，但是当我调用执行此插入的方法时，我可能并不总是希望填充每个参数。

如下：

```
using (var sqlconnection = new SqlConnection(Globals.AFWideSettings.SqlConnectionString))
            {
                sqlconnection.Open();
                using (
                    var sqlcommand =
                        new SqlCommand(
                            "insert into DataActions (afuser, aftable, changetype, originaldata, newdata) values (@afuser, @aftable, @changetype, @originaldata, @newdata);",
                            sqlconnection))
                {

                    sqlcommand.Parameters.Add(new SqlParameter("afuser", userActions.AfUser));
                    sqlcommand.Parameters.Add(new SqlParameter("aftable", userActions.AfTable));
                    sqlcommand.Parameters.Add(new SqlParameter("changetype", userActions.ChangeType));
                    sqlcommand.Parameters.Add(new SqlParameter("originaldata", userActions.OriginalData));
                    sqlcommand.Parameters.Add(new SqlParameter("newdata", userActions.NewData));

                    sqlcommand.ExecuteNonQuery();
                }
                sqlconnection.Close();
            }
        } 
```

如果我正在测试来自数据库的 Null 信息，我会执行以下操作：

```
Id = getRecords.IsDBNull(0) ? -1 : getRecords.GetInt32(0) 
```

是否有在 sqlparameters 上执行此操作的等效方法？我难住了。

（我知道我可以单独测试每个项目，我只是想提高效率）

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:51:44.557

好吧，您必须填充每个参数，因为它在您的 SQL 中（除非您想动态删除会很混乱的字段/值）。

在设置参数值时，我只会使用[NULL 合并运算符 (??) ：](http://msdn.microsoft.com/en-us/library/ms173224.aspx)

```
sqlcommand.Parameters.Add(
    new SqlParameter("afuser", userActions.AfUser ?? {insert default value here} )); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:47:18.817

好的，所以基本语法如下：

```
CREATE PROCEDURE NameOfProcedure
/*
I like to put modification history, purpose for the procedure and stuff like that in here.
It's not required though
*/
(
@afuser NVARCHAR(255) DEFAULT NULL
,@aftable INT DEFAULT NULL 
```

对所有变量执行此操作，我展示了整数字段和 nvarchar 字段的示例，但使用任何数据类型。DEFAULT NULL 位表示如果未指定值，则使用 NULL。

```
)
AS
BEGIN

INSERT INTO DataActions (afuser, aftable, changetype, originaldata, newdata)
VALUES (@afuser, @aftable, @changetype, @originaldata, @newdata)

END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T21:57:10.083

你可以使用 DBNull 值来做到这一点

`I would recommend using Parameters.AddWithValue() Method for example see the code below`

```
sqlcommand.Parameters.AddWithValue("@afuser", userActions.AfUser ?? (object)DBNull.Value); 
```

[MSDN SqlParameterCollection.AddWithValue 方法](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)

# objective-c - Xcode iOS 相机曝光区域

> ID：14129574
> 
> 赞同：1
> 
> 时间：2013-01-02T21:36:45.203
> 
> 标签：objective-c, xcode

有没有办法将 iPhone 相机上的曝光区域限制在指定的正方形，而不仅仅是一个中心点？我感兴趣的区域之外的明亮或黑暗区域正在影响整体曝光。现在我正在使用exposurePointOfInterest，但这只允许指定一个中心点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:50:36.840

看起来您可以将 CGPoint 传递给该方法。

例子：

```
- (void) focusAtPoint:(CGPoint)point
{
    AVCaptureDevice *device = [[self videoInput] device];
    if ([device isFocusPointOfInterestSupported] && [device isFocusModeSupported:AVCaptureFocusModeAutoFocus]) {
        NSError *error;
        if ([device lockForConfiguration:&error]) {
            [device setFocusPointOfInterest:point];
              [device exposurePointOfInterest:location];
            [device setFocusMode:AVCaptureFocusModeAutoFocus];
            [device unlockForConfiguration];
        } else {
            id delegate = [self delegate];
            if ([delegate respondsToSelector:@selector(acquiringDeviceLockFailedWithError:)]) {
                [delegate acquiringDeviceLockFailedWithError:error];
            }

        }        

    }

} 
```

[http://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVCaptureDevice_Class/Reference/Reference.html#//apple_ref/occ/instp/AVCaptureDevice/exposurePointOfInterestSupported](http://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVCaptureDevice_Class/Reference/Reference.html#//apple_ref/occ/instp/AVCaptureDevice/exposurePointOfInterestSupported)

# c# - 编码不影响阅读word文档C#

> ID：14129575
> 
> 赞同：1
> 
> 时间：2013-01-02T21:36:48.630
> 
> 标签：c#, office-interop

尝试从 word 文档中读取 unicode 字符但获取符号 (????)。

这是我的代码：

```
 Microsoft.Office.Interop.Word.Application word = new Microsoft.Office.Interop.Word.Application();
            object miss = System.Reflection.Missing.Value;
             object enc = Microsoft.Office.Core.MsoEncoding.msoEncodingEUCJapanese; 
            object path = @"C:\Users\file.doc"
            object readOnly = true;
            Microsoft.Office.Interop.Word.Document docs = word.Documents.Open(ref path, ref miss, ref readOnly, ref miss, ref miss,
                ref miss, ref miss, ref miss, ref miss, ref miss, ref enc, ref miss, ref miss, ref miss, ref miss, ref miss);
            string totaltext = "";
            for (int i = 0; i < docs.Paragraphs.Count; i++)
            {
                totaltext += " \r\n " + docs.Paragraphs[i + 1].Range.Text.ToString();

                Console.WriteLine(totaltext);
            }
           // Console.WriteLine(totaltext);
            docs.Close();
            word.Quit(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:05:15.500

鉴于评论，听起来问题很可能只是`Console.WriteLine`.

尝试写入文件：

```
// This will use Encoding.UTF8 by default.
using (var writer = File.CreateText("test.txt"))
{
    for (int i = 0; i < docs.Paragraphs.Count; i++)
    {
        writer.WriteLine(docs.Paragraphs[i + 1].Range.Text.ToString());
    }
} 
```

然后在记事本中打开文件，指定 UTF-8 作为编码，我怀疑你会正确看到所有内容。

# scala - Akka：为持久邮箱添加延迟

> ID：14129579
> 
> 赞同：5
> 
> 时间：2013-01-02T21:37:14.347
> 
> 标签：scala, queue, message-queue, akka

我想知道是否有某种方法可以延迟 akka 消息的处理？

**我的用例：** 对于我的每个请求，我都有少量工作需要完成，然后我需要在两个小时后完成额外的工作。

有没有什么简单的方法可以延迟 AKKA 中的消息处理？我知道我可能可以设置一个外部分布式队列，例如 ActiveMQ、RabbitMQ，它可能具有此功能，但我宁愿没有。

我知道我需要使邮箱持久耐用，这样它才能在重新启动或崩溃时存活下来。我们已经有了 mongo 设置，所以我可能会使用[MongoBasedMailbox](http://doc.akka.io/docs/akka/2.0/modules/durable-mailbox.html)来实现持久性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-06-16T01:27:23.783

[时间工作流](https://temporal.io/)能够以最小的努力支持您的用例。您可以将其视为一个 Durable Actor 平台。当进程重新启动时保留包括线程和局部变量的参与者状态时。

Temporal 为任务处理提供了许多其他功能。

*   建立了指数重试，具有无限的过期间隔
*   故障处理。例如，如果在配置的时间间隔内两次更新都无法成功，它允许执行通知另一个服务的任务。
*   支持长时间运行的心跳操作
*   能够实现复杂的任务依赖。例如，在不可恢复的故障（[SAGA](https://microservices.io/patterns/data/saga.html)）的情况下实现调用链或补偿逻辑
*   提供对当前更新状态的完整可见性。例如，当使用队列时，您知道队列中是否有一些消息，并且您需要额外的数据库来跟踪整体进度。使用 Temporal 记录每个事件。
*   能够取消飞行中的更新。
*   请求限制

请参阅有关Temporal 编程模型[的演示文稿。](https://www.youtube.com/watch?v=llmsBGKOuWI)它谈到了 Temporal 的前身 Cadence。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:51:06.423

这并不理想，但[Akka Camel Quartz 调度程序](http://doc.akka.io/docs/akka/2.1.0/scala/camel.html)可以解决问题。比内置的 ActorSystem 调度器更重量级，但知道 Quartz 有它自己的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-16T07:24:53.780

你仍然可以使用普通的 Akka 调度程序，你只需要在 actor 持久性上保持一个状态，以避免在服务器重新启动时丢失作业。

我最近使用了 PersistentFsmActor - 这将使演员的状态保持不变

我不确定在您的情况下您是否必须使用 FSM (Finite State Machine) ，因此您基本上可以使用 persistentActor 来节省插入作业的时间，并在该时间启动调度程序。这样 - 即使您重新启动服务器，actor 也会启动并创建一个新的计划作业，使用持久数据计算剩余的运行时间

# xcode - 将表单数据传递给另一个表单 Xcode Storyboard

> ID：14129583
> 
> 赞同：0
> 
> 时间：2013-01-02T21:37:22.173
> 
> 标签：xcode, forms, ipad, storyboard

好的，首先我在 Obj C 编程方面是超级新手，在使用 Xcode 方面更是新手。现在我正在创建一个客户信息控制器的应用程序。在客户信息控制器中，有一个转到帐单信息的按钮。这两个控制器都有一个需要填写的表格，但是在账单上我有一个按钮，如果它是相同的信息，可以单击该按钮以从客户信息页面获取数据。现在，对于我的一生，我找不到任何可以帮助我实现这一目标的东西。它的设置方式是一个文本字段到下一个...IE..在客户信息页面上，填写名字，然后在计费页面上，如果它是相同的，它也将对应它等等。任何帮助或指导让我做到这一点都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:02:42.863

[prepareForSegue:sender:](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/prepareForSegue%3asender%3a)方法非常适合。

# javascript - XMLHttpRequest responseText在不同浏览器中的不同结果

> ID：14129585
> 
> 赞同：0
> 
> 时间：2013-01-02T21:37:27.197
> 
> 标签：javascript, html, ajax, internet-explorer, get

我正在使用 XMLHttpRequest responseText 来获取服务器 txt 文件并将该文件的内容加载到可编辑的文本框中。txt 文件包含由新行分隔的短字母行。用户可以在提交表单之前选择要加载和编辑这些行的 txt 文件。我需要这些新行来处理用户输入的下一步。

这在 Chrome 中按预期工作。在 IE8 中，当加载 txt 文件的内容时，可编辑文本框看起来像是由新行分隔，但如果我复制新加载的文本并将其粘贴到 vim 中，则没有 \n 或 \r 字符，只有空格。如果我手动将 .txt 文件的内容复制并粘贴到 IE8 文本框中，则文本会正确显示并且我可以提交表单。

Chrome 在加载文件时不会删除返回字符。加载到 IE 时，是什么搞砸了我的文本？我只能通过 vim 看到 Chrome 和 IE 中加载的文本之间的区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:40:05.483

换行符/LF 翻译总是让你头疼。不要根据这些字符判断您的响应文本的等效性。

如果其余数据相同，那么重要的结果就是相同的。如果您的任何代码依赖于这些字符，请更改代码。

# excel - 如何根据工作表中的行数选择一系列单元格？

> ID：14129587
> 
> 赞同：1
> 
> 时间：2013-01-02T21:37:33.953
> 
> 标签：excel, row, selection, vba

我目前有多个数据表，所有数据表的 AI 列中都有信息，我想在每个数据表中选择一系列单元格。A 列的数据在 150 行到 450 行之间变化，具体取决于工作表。我想选择 AI 列，但只能选择 A 列中的最后一行。我使用了最后一行函数：

```
LastRow = Range("A65536").End(xlUp).Row 
```

如何让宏从最后一行向上选择列 AI？我希望它的功能就像它是这样写的：

```
Range("A1:ILastRow").Select 
```

其中“LastRow”是最后一列的编号。

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:39:11.410

......你非常接近 - 只需使用这个：

```
LastRow = Range("A65536").End(xlUp).Row
Range("A1:I" & LastRow).Select 
```

# batch-file - 将 IP 地址捕获到脚本中的变量中

> ID：14129589
> 
> 赞同：2
> 
> 时间：2013-01-02T21:37:39.023
> 
> 标签：batch-file, ip

我找到了一些关于如何在脚本中捕获我的计算机 IP 地址的惊人答案，但所有答案都让用户立即输出 IP 地址。

```
for /f "tokens=2 delims=[]" %%f in ('ping -4 -n 1 www.google.com ^|find /i "pinging"') do echo IP=%%f 
```

我特别需要能够在脚本后面使用 IP 地址。如何将其存储在变量中以备后用？我认为这将是以下内容：

```
for /f "tokens=2 delims=[]" %%f in ('ping -4 -n 1 %COMPUTERNAME% ^| find /i "pinging"') do set /A IPADDR=%%f
echo IP: %IPADDR% 
```

当我这样做时，变量只包含第一个八位字节。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:36:23.350

不要`/a`对`set`命令使用算术选项。`set "IPADDR=%%~f"`

*评论移入答案。*

# android - Android 照片流布局，如 instagram

> ID：14129591
> 
> 赞同：1
> 
> 时间：2013-01-02T21:37:41.617
> 
> 标签：android, android-layout, instagram

我需要为 android 创建一个类似于 instagram 的照片供稿布局。用作父级的最佳布局是什么？表视图还是列表视图？还有什么？此外，Instagram 如何不会一次加载这么多照片而内存不足？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:42:12.353

[GridView](http://developer.android.com/guide/topics/ui/layout/gridview.html)可以满足您的需求，并由[ListAdapter 提供](http://developer.android.com/reference/android/widget/ListAdapter.html)。这还将处理回收视图以管理内存。

# jquery - 当它们依赖于彼此的更改时，如何正确地在一个控件上执行两个事件？

> ID：14129594
> 
> 赞同：0
> 
> 时间：2013-01-02T21:38:02.850
> 
> 标签：jquery

有没有合适的方法/设计来做到这一点？或者我必须将它们组合成一个函数/事件并基于从 Ajax 返回的值？

我有一个下拉列表，其中包含两个更改事件/函数，如下所示，

```
$(document).ready(function () {
    $("#ddlFacilityDatabases").change(UpdateCategoriesList).change(UpdateReportsList);
} 
```

这两个函数都会修改“#ddlCategories”和“#ddlReports”上的选项。UpdateCategoriesList() 修改我的“#ddlCategories”选项，UpdateReportsList() 修改我的“#ddlReports”选项。

这是我的功能之一（仅发布一个，因为它们几乎相同，只是更改了几个位置和名称）

```
function UpdateCategoriesList() {

    // Disable the Dropdown.
    $("#ddlCategories").attr("disabled", true);

    // Get Selection Value.
    var Selection = {
        "FacilityDatabaseName": $("#ddlFacilityDatabases").val()
    };

    // Send JSON to /Select/getCategories/.
    $.ajax({
        url: "/Select/getCategories/",
        type: "GET",
        dataType: "html",
        data: Selection,
        success: function (response, textStatus, jqXHR) {
            // Parse Array.
            var Categories = JSON.parse(response).categories;

            // Clear Categories DropDownList.
            $("#ddlCategories").children("option").each(function () {
                if ($(this).val() != "") {
                    $(this).remove();
                }
            });

            // Add New Categories.
            var length = Categories.length;
            for (var i = 0; i < length; i++) {
                if (Categories[i] != null || Categories[i] != "") {
                    $("#ddlCategories").append("<option value=\"" + Categories[i] + "\">" + Categories[i] + "</option>");
                }
            }
        },
        complete: function () {
            // re-enable dropdownlist
            $("#ddlCategories").attr("disabled", false);
        }
    });
} 
```

问题是当我将它们都添加到上面的事件处理程序中时，它会运行它们，但页面会在两个函数运行后更新下拉列表。我需要第一个来更新页面，然后第二个来更新页面，因为第二个取决于第一个的更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:41:16.013

只需将第二个函数添加到第一个函数的 AJAX 回调中，它就会以正确的顺序运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T22:23:42.183

这是一个完美的用例[`$.Deferreds`](http://api.jquery.com/category/deferred-object/)。

```
function UpdateCategoriesList() {
    var deferred = $.Deferreds();
    // ...
    $.ajax({
        // ...
        success: function() {
            // ...
            // Resolve the deferred once all operations are done
            deferred.resolve();
        }   
    });

    // Make sure you return the deferred
    return deferred;
} 
```

这允许您执行以下操作：

```
$("#ddlFacilityDatabases").change(function (){
    // When the deferred is resolved, it will call UpdateReportsList
    UpdateCategoriesList().done(UpdateReportsList);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T21:48:34.457

我认为您的问题是您想对异步调用进行排序。如果`UpdateReportsList`必须在 之后`UpdateCategoriesList`，那么您有两个选择。

选项 1：正如 Neal 指出的，从第一个函数的 ajax 调用中调用第二个函数。

选项 2：使两个调用都阻塞，而不是异步，如下所示：

```
$.ajax(
    url: ...,
    async: false,
    ...
); 
```

然后打电话

```
$("#ddlFacilityDatabases").change(function (){
    UpdateCategoriesList();
    UpdateReportsList();
}); 
```

总的来说，我认为第一个选项更好，如果您可以更改这两个功能。

# android - “DRAW OVER OTHER APP”是android中的哪个权限

> ID：14129595
> 
> 赞同：26
> 
> 时间：2013-01-02T21:38:05.933
> 
> 标签：android, permissions

**在其他应用程序上绘图**

允许应用在其他应用或部分用户界面之上绘图。它们可能会干扰您在任何应用程序中使用界面，或改变您认为您在其他应用程序中看到的内容。

哪个许可或接收者与上述文本相关联。

**这是图像**

![在此处输入图像描述](../Images/5366c35d058d4c54911b1d0cd4d051d4.png)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-02T21:48:07.230

大概是

```
android.permission.SYSTEM_ALERT_WINDOW 
```

这将是有道理的，因为系统警报窗口确实绘制在所有内容之上。

# visual-studio - 同一台计算机上的 2 个本地主机

> ID：14129604
> 
> 赞同：2
> 
> 时间：2013-01-02T21:39:00.790
> 
> 标签：visual-studio, apache, localhost, wamp, webmatrix

好的，所以，我遇到了一些问题，因为我使用 WAMP 服务器作为 localhost，然后我的一个朋友告诉我微软的 VS for Web Developers。

然后，我开始使用 Microsoft Webmatrix 作为我的本地主机并卸载了 WAMP。但是我开始遇到一些我无法修复的 Webmatrix MySQL 问题，我想到在同一台计算机上拥有 2 个本地主机：Microsoft WebMatrix 用于使用 ASP.NET 和 C# 以及 WAMP 用于 PHP 和 MySQL，但我可以不要同时使用两者。

是否可以更改本地主机的地址之一，例如，更改`localhost`为`localhost2`WAMP 或 WebMatrix？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T21:40:20.643

您应该能够将 WAMP 或 WebMatrix 配置为使用单独的端口，这将允许您同时使用`localhost`两者，但一个在端口 80 上，另一个在其他端口上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T21:41:40.160

是的，如果您编辑系统“主机”文件（据我所知，它位于`\Windows\System32\drivers\etc`Windows 下方的某个位置）。但是，您的问题是您对“localhost”的含义有一个错误的认识：据我所知，您认为“localhost”是一项服务，但实际上它是您的 tcp/ip-stack 中的一项功能，并定义了一个环回-地址到您自己的机器。您应该简单地更改两种服务之一的端口，然后将其称为`localhost:81`.

# c# - 在 Foreach 循环中的其他线程正在运行时阻塞主线程

> ID：14129609
> 
> 赞同：0
> 
> 时间：2013-01-02T21:39:30.690
> 
> 标签：c#, multithreading

我正在创建一个新线程以在 foreach 循环的每次迭代期间执行一些代码。这些线程完成后，我希望主线程继续执行，但是我不知道该怎么做。我不能调用`Thread.Join()`每次迭代，因为这将阻止主线程继续 foreach 循环，直到创建的线程完成。这是代码块，其中`testEnvironments`是字符串类型的列表：

```
 foreach (string s in testEnvironments)
        {
            myThread = new Thread(() => program.KickoffPricing(s));
            myThread.Start();
            Thread.Sleep(1000);
        }

        email.ComposeEmail(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T21:40:58.777

您需要将所有`Thread`s 存储在 a 中`List<Thread>`，并在启动所有这些后创建一个单独的`foreach`循环来存储`Join()`它们。

请注意，您可以通过使用`Task`而不是`Thread`，或者更好的是，使您的代码更简单、更高效`Parallel.ForEach()`。

# java - 从 Java 中的子窗口更改父窗口中的某些内容

> ID：14129612
> 
> 赞同：1
> 
> 时间：2013-01-02T21:39:45.900
> 
> 标签：java, swing, user-interface, window, parent-child

我想知道如何使用子窗口更改父窗口中的某些内容。所以，假设我有一个窗口，按下按钮会打开一个弹出窗口。该新窗口包含一个 JTextArea 和另一个名为 Ok 的按钮。当按下 Ok 按钮时，如何根据 JTextArea 内的内容更改父窗口的标题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T21:43:14.417

在我看来，有两种常见的方法可以做到这一点：

*   当按下 OK 时，子窗口可以将信息*推*送到父窗口。为此，子窗口需要对父窗口的引用，然后调用父窗口的公共方法。
*   父窗口可以从子窗口中*提取*信息。这可以以两种方式之一发生。
    *   如果子窗口是*模态*对话框，那么一旦对话框被处理并且程序流程返回到父代码，父窗口就可以简单地查询子窗口。
    *   如果对话框*是非模态*对话框，则父窗口需要为子窗口添加一个侦听器，例如 a `PropertyChangeListener`，并且当此侦听器触发适当的事件时，父窗口将查询对话框窗口以获取信息。这将是使用*观察者*设计模式的一个例子。

我更喜欢 pull 技术，因为它是具有代码来显示子窗口并且需要来自子窗口的信息的对象的父对象，它应该具有提取所需信息的代码，并且子窗口会不需要知道或引用父窗口对象。这对我来说似乎更干净。

例如，请[在此处](https://stackoverflow.com/a/7017147/522444)、[此处](https://stackoverflow.com/a/4691447/522444)和[此处](https://stackoverflow.com/a/12406454/522444)查看我的代码。

**编辑：** 请注意，对于您描述的示例，您可以使用 JOptionPane 轻松解决此问题。许多人不知道 JOptionPanes 可以显示非常复杂的 GUI。基本上任何可以放在 JPanel 上的东西都可以显示在 JOptionPane 中（然后是一些）。您只需显示显示您的 JTextField 的 JOptionPane，当程序流返回到调用程序时，只需获取 JTextField 保存的显示在 JOptionPane 中的文本。没有什么比这更简单了。

# erlang - 如何转换函数结果？

> ID：14129613
> 
> 赞同：0
> 
> 时间：2013-01-02T21:39:47.787
> 
> 标签：erlang

> **可能重复：**
> [如何在 Erlang 中使用填充格式化数字](https://stackoverflow.com/questions/1251869/how-to-format-a-number-with-padding-in-erlang)

我开发了这个功能：

```
check() ->
  case get_val(Text, H) of
    {ok, {Montant}}       -> io:format("~s", [Montant]);
    {error, pas_echeance} -> io:format("erreur")
  end. 
```

此函数显示 Montant，这是 Montant 的示例：45

我的目标是将这个值“45”（表示[突尼斯第纳尔](http://en.wikipedia.org/wiki/Tunisian_dinar)）转换为“45000”形式（所以我会有突尼斯毫厘——每个第纳尔由 1000 毫厘组成）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T00:27:00.783

为什么不将值转换为整数（使用 list_to_integer("45") 或 list_to_integer(get_val(Text,H))）并将其乘以 1000。

# soundcloud - Soundcloud HTML5 小部件连续播放

> ID：14129618
> 
> 赞同：1
> 
> 时间：2013-01-02T21:40:00.990
> 
> 标签：soundcloud

我正在尝试让 SoundCloud HTML5 播放器小部件自动启动并寻找特定的曲目和位置，但无论我尝试什么它都不起作用。

我正在使用下面的 API 代码：

```
<iframe width="100%" height="450" scrolling="no" id="soundcloud-player" frameborder="no" src="https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Fplaylists%2F3058825&amp;color=00be53&amp;auto_play=false&amp;show_artwork=true"></iframe>
<script type="text/javascript" src="http://w.soundcloud.com/player/api.js"></script>

 <script type="text/javascript">

 (function(){
    var widgetIframe = document.getElementById('soundcloud-player'),
    widget       = SC.Widget(widgetIframe);

    widget.bind(SC.Widget.Events.READY, function() {

       widget.play();
       widget.seekTo('5000');

    });

  widget.bind(SC.Widget.Events.PLAY, function() {        

    // get information about currently playing sound
    widget.getCurrentSound(function(currentSound) {
      console.log('sound ' + currentSound.title + 'began to play');
    });
});  }()); 
```

我基本上想要完成的是让玩家在用户在网站上的页面之间切换时自动寻找相同的位置。我计划从 cookie 中读取位置和轨迹，然后使用上述方法。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:30:22.697

问题很可能与您尝试呼叫时声音未完全加载有关`seekTo`。您可以通过在代码中添加以下位来轻松验证这一点：

```
// …
widget.bind(SC.Widget.Events.READY, function() {
  widget.play();
  // Note setTimeout here!
  // This will now work since the needed part of the sound 
  // will have loaded after the timeout
  setTimeout(function () { 
    widget.seekTo('5000'); 
  }, 1000);
});
// … 
```

但是由于您真的不想在代码中出现任意超时，因此最好将事件处理程序附加到进度事件：

```
widget.bind(SC.Widget.Events.LOAD_PROGRESS, function onLoadProgress (e) {
  if (e.loadedProgress && e.loadedProgress === 1) {
    widget.seekTo(15000); // seek to previous location
    widget.unbind(SC.Widget.Events.LOAD_PROGRESS);
  }
}); 
```

这是此代码的工作版本[http://jsbin.com/ebeboj/2/edit](http://jsbin.com/ebeboj/2/edit)

此外，如果您有很长的曲目，您还可以`duration`从声音中检索（通过`getCurrentSound`），检查曲目在 0 到 1 范围内的哪个点停止播放并只等待该值（因为 loadedProgress === 1 可能花点时间），比如：

```
widget.getCurrentSound(function(currentSound) {
  // currrentSound.duration is 269896 for the first track of your playlist
  relativePreviousPlay = previousPlay / currentSound.duration; // ~0.204
});

widget.bind(SC.Widget.Events.LOAD_PROGRESS, function onLoadProgress (e) {
  if (e.loadedProgress && e.loadedProgress > relativePreviousPlay) {
    widget.seekTo(previousPlay); // seek to previous location
    widget.unbind(SC.Widget.Events.LOAD_PROGRESS);
  }
}); 
```

在此处查看最后一点代码的工作示例[http://jsbin.com/ebeboj/4/edit](http://jsbin.com/ebeboj/4/edit)

**旁注**：我建议使用`localStorage`over cookie 来存储以前的播放位置，因为 cookie 会从客户端到服务器来回传输，从而减慢您的网站速度，并且您可能不需要服务器端的信息。

# asp.net - 实体框架和 N 层

> ID：14129621
> 
> 赞同：1
> 
> 时间：2013-01-02T21:40:17.800
> 
> 标签：asp.net, entity-framework, webforms, n-tier-architecture

有架构问题。我正在尝试将逻辑层拆分为物理层并且遇到了一些麻烦。这是我希望设置的方式：

*   实体 - 一个 DLL。我的 POCO 课程。没有依赖。
*   DAL - 一个 DLL。包含模型和 DbContext。依赖实体。
*   BLL - 一个 DLL。包含 CRUD 函数。依赖 DAL 和实体
*   UI - 一个网站项目。对 BLL 说话。

我的问题是在 BLL 中，我执行以下操作：

```
 ''' <summary>
''' The repository
''' </summary>
''' <remarks></remarks>
Private context As MyContext

''' <summary>
''' Instantiate the business layer
''' </summary>
''' <remarks></remarks>
Public Sub New()
    context = New MyContext()
End Sub

''' <summary>
''' Insert a general retrieve into the database
''' </summary>
''' <param name="myEntity">The entity to insert</param>
''' <returns>The id of the entity added</returns>
''' <remarks></remarks>
Public Function Create(ByVal myEntity As myEntity) As String
    Try
        context.myEntity.Add(myEntity )
        context.SaveChanges()
    Catch ex As Exception
        Throw ex
    End Try
    Return myEntity.id
End Function 
```

但是为了在我的实体上调用 Add，我需要对 EntityFramework.dll 的引用，因为我的上下文继承自 DbContext。我不知道如何在不创建存储库的情况下避免这种情况，这似乎是不必要的额外抽象层，而且我认为我不需要 ti 与 DbContext。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:56:05.830

您的 DAL 可以为您的上下文定义派生上下文和工厂实现的接口。BLL 将只使用接口和工厂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T19:45:19.510

如果你被这个话题困住了，你应该看看 CodePlex 上提供的 N-Tier Entity Framework：http: [//ntieref.codeplex.com/](http://ntieref.codeplex.com/)

# php - 有什么方法可以为所有包括 css 文件的版本添加版本号

> ID：14129623
> 
> 赞同：3
> 
> 时间：2013-01-02T21:40:24.357
> 
> 标签：php, css, yii

我有很多地方包含这样的 CSS 文件

```
$cs->registerScriptFile($cs->getCoreScriptUrl() . '/js/jquery/jquery.cookie.js'); 
```

而且我有一个恒定的版本构建，每次提交后都会增加。有什么方法可以添加

```
?v=VERSION-BUILD 
```

所有脚本注册的参数，不要硬编码，或者重写 yii lib？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T07:18:07.793

就我个人而言，出于我自己的目的，我扩展了 CClientScript 类，使其为每个脚本和 css 添加唯一的参数。它可以很容易地改进以满足您的需求。

我准备了这个组件的未经测试的简单版本。这个想法是覆盖 CClientScript 的 render() 方法，该方法在任何脚本文件被回显之前调用：

```
class ClientScript extends CCLientScript
{

public $version=1;

public function render(&$output)
{
    if(!$this->hasScripts)
        return;
    if ($this->version!==false)
    {
        foreach ($this->scriptFiles as $position=>&$scripts)
        {
            foreach ($scripts as &$script)
            {
                $script.="?".$this->version;
            }
        }

        foreach ($this->cssFiles as $position=>&$styles)
        {
            foreach ($styles as &$style)
            {
                $style.="?".$this->version;
            }
        }
    }
    parent::render($output);
}
} 
```

把这个类，比如说，放在“组件”文件夹中。现在您可以通过配置应用程序的参数来使用它而不是 CClientScript，通常在 config/main.php 中：

```
'clientScript' => array(
    'class' => 'ClientScript',
    'version'=>2,
    //the rest parameters are same as usual. you can set up packages here and so on.
) 
```

可以改进代码以跳过 jquery 和其他第三方库等文件的版本控制 - 这取决于您。

# asp.net - 具有字符串返回类型的存储过程中的错误

> ID：14129626
> 
> 赞同：0
> 
> 时间：2013-01-02T21:40:26.800
> 
> 标签：asp.net, sql-server, stored-procedures

```
ALTER PROCEDURE [dbo].[Signin_Check] 
    @uid varchar(50), @pwd varchar(50), @uname varchar(50) output
AS
   IF EXISTS (SELECT * FROM threeLayer_user WHERE uid = @uid and pass = @pwd)
   BEGIN
      -- SET NOCOUNT ON added to prevent extra result sets from
      -- interfering with SELECT statements.
      SET NOCOUNT ON;

      SELECT @uname = name 
      FROM threeLayer_user 
      WHERE uid = @uid and pass = @pwd

      RETURN @uname
   END 
```

此存储过程引发错误：

> *将 varchar 值“Saurav”转换为数据类型 int 时转换失败。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T21:54:59.853

您的代码包含该行

```
return @uname 
```

return 语句只能接受整数值。但是，您的 @uname 参数是一个输出参数，因此您不需要也返回它。只需确保`OUTPUT`在调用 sproc 时指定：

```
EXEC dbo.Signin_Check @uid, @password, @uname OUTPUT; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:45:19.503

SP 似乎没有与错误相关的错误代码，您能否检查好传递给存储过程的参数（即它们的顺序和类型）？问题可能是您传递的值，而不是实际过程。

您能否将调用存储过程时使用的代码附加到您的帖子中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T21:48:20.287

你确定它是`varchar`专栏吗？

```
@uid varchar(50) / int
uid = @uid 
```

# jquery-ui - jQuery 对话框总是在左上角打开

> ID：14129627
> 
> 赞同：6
> 
> 时间：2013-01-02T21:40:31.673
> 
> 标签：jquery-ui

我的 jQuery 对话框总是在浏览器窗口的左上角打开。

下面显示了我简化后的代码。

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1/themes/redmond/jquery-ui.css" />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script>
</head>
<body>
<input id='submit' type="submit" value="Submit">
<div id='dialog'></div>
<script>
$('#submit').click(function(event){
    $(function() {
        $('#dialog').dialog({
            autoOpen: false,
            width:500,
            height:500,
            position:'center'
        });
    });
    $('#dialog').dialog('open');
});
</script>
</body>
</html> 
```

关于我需要做什么以使其在中心位置打开的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T15:45:39.730

这~~极不可能是您的问题的原因，但我遇到了同样的问题，并在 jquery-~~ [ui.js]中找到了这段代码：

```
// /1.10.0/jquery-ui.js:
target = $( options.of )
...
// line 12053 
if ( target[0].preventDefault ) {
    // force left top to allow flipping
    options.at = "left top";
} 
```

那段代码检查目标元素是否定义了 preventDefault 函数。默认情况下，target[0] 将等于没有 preventDefault 的窗口对象。但是，就我而言，我在窗口对象的全局范围内定义了一个名为 preventDefault 的函数。我的 window.preventDefault 导致 if-block 评估为 true，从而覆盖了“center”的默认 options.at 值。

正如我所说，您定义函数~~window.preventDefault的~~[可能性] 很小，但这就是我的原因。

¹ ***编辑：****根据评论，实际上并不是那么不可能。很高兴我能帮助到每个人。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T12:28:26.157

使用下一个对话框选项

```
$('#dialog').dialog({
            autoOpen: false,
            width:500,
            height:500,
            position:
            {
               my: "center",
               at: "center",
               of: window
             }
        }); 
```

[**JSFiddle 演示**](http://jsfiddle.net/zjfet/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T21:55:25.200

用这个

```
<input id='submit' type="submit" value="Submit">
<div id='dialog'></div>
<script>
$('#submit').on('click', function(event){
    $(function() {
        $('#dialog').dialog({
            autoOpen: false,
            position:'center'
        });
    });
    $('#dialog').dialog('open');
});
</script>​ 
```

问候。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-22T16:31:12.457

答案很简单，我们只需要添加 jquery 文件 jquery-1.11.1.js 就可以了

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-21T02:00:42.517

我遇到了一个问题，它会在 IE11 中居中，但在 IE7 上，即使有 position 属性，它也会位于左上角。

我正在使用 jqueryUI 1.11.2，它似乎对 IE7 和更早版本的支持在 1.8.2 或附近的某个地方被删除了。无论如何，解决方案是在我的值周围加上双引号，如下所示：

```
$('#dialog').dialog({
        autoOpen: false,
        modal: true,
        width: '200',
        title: 'Confirm Delete',
        position: {
            my: "center",
            at: "center",
            of: $("body"),
            within: $("body")
        },
        buttons: {
            'Delete': function () {
                $('#btnDeleteAll').click();
                $(this).dialog('close');
            },
            Cancel: function () {
                $(this).dialog('close');
            }
        }
    }); 
```

我只是尝试了单引号，这些也有效。

# jquery - 使用 JQUERY 检查树中的所有子复选框

> ID：14129628
> 
> 赞同：2
> 
> 时间：2013-01-02T21:40:38.257
> 
> 标签：jquery, html, treeview

我希望能够检查父复选框并同时检查子复选框。我可以得到底部父复选框来实现这一点，但底部父复选框上方的父复选框都不起作用。奇怪的是，检查孩子会迫使父母正确检查。此代码旨在用于从数据库中提取数据的树视图。

```
<script language="Javascript">
$.fn.linkNestedCheckboxes = function () {
    var childCheckboxes = $(this).find('input[type=checkbox] ~ ul li input[type=checkbox]');

    childCheckboxes.change(function(){
        var parent = $(this).closest("ul").prevAll("input[type=checkbox]").first();
        var anyChildrenChecked = $(this).closest("ul").find("li input[type=checkbox]").is(":checked");
        $(parent).prop("checked", anyChildrenChecked);
    });

    // Parents
    childCheckboxes.closest("ul").prevAll("input[type=checkbox]").first().change(function(){
       $(this).nextAll("ul").first().find("li input[type=checkbox]")
                .prop("checked", $(this).prop("checked"));        
    });

    return $(this);
};

$(window).load(function () {
    $("form").linkNestedCheckboxes();
});
</script>

<html>
<form>

<ul id="N0_1" class="tree" style="display: block;">
            <li id="F0_10" class="folderOpen">
            <input type="checkbox" value="31" name="folderID">
            <a class="treeview" href="javascript:toggle('N0_1_0','F0_10')">Test AI File</a>
                <ul id="N0_1_0" class="tree" style="display: block;">
                    <li id="D0_1_00" class="file" style="list-style-image: url(../manage/images/document.gif);">
                    <input type="checkbox" value="31|859" name="documentID">
                    AAA5083
                    </li>
                    <li id="D0_1_01" class="file" style="list-style-image: url(../manage/images/document.gif);">
                    <input type="checkbox" value="31|1024" name="documentID">
                    Test Indd File
                    </li>
                </ul>
            </li>
            <li id="F0_10" class="folderOpen">
            <input type="checkbox" value="31" name="folderID">
            <a class="treeview" href="javascript:toggle('N0_1_0','F0_10')">Test AI File</a>
                <ul id="N0_1_0" class="tree" style="display: block;">
                    <li id="D0_1_00" class="file" style="list-style-image: url(../manage/images/document.gif);">
                    <input type="checkbox" value="31|859" name="documentID">
                    AAA5083
                    </li>
                    <li id="D0_1_01" class="file" style="list-style-image: url(../manage/images/document.gif);">
                    <input type="checkbox" value="31|1024" name="documentID">
                    Test Indd File
                    </li>
                </ul>
            </li>
        </ul>
</form>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-24T03:52:31.420

```
$('#tree input:checkbox').on('change', function () {
    $(this).next('ul').find('input:checkbox').prop('checked', $(this).prop('checked'));
    for (var i = $('#tree').find('ul').length - 1; i >= 0; i--) {
        $('#tree').find('ul:eq(' + i + ')').prev('input:checkbox').prop('checked', function () {
            return $(this).next('ul').find('input:not(:checked)').length === 0 ? true : false;
        });
    }
}) 
```

使用 "on" 而不是过时的 "live" 使用 'input:not(:checked)' 代替添加扩展器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:13:52.110

```
I had answered another one question like this same. 
```

[CheckAll 复选框 Jquery](https://stackoverflow.com/questions/10736172/checkall-checkbox-jquery/10737798#10737798)。

//================================================= =====================//

```
 $(document).ready(function () {
                $.extend($.expr[':'], {
                    unchecked: function (obj) {
                        return ((obj.type == 'checkbox' || obj.type == 'radio') && !$(obj).is(':checked'));
                    }
                });

                $("#tree input:checkbox").live('change', function () {
                    $(this).next('ul').find('input:checkbox').prop('checked', $(this).prop("checked"));

                    for (var i = $('#tree').find('ul').length - 1; i >= 0; i--) {
                        $('#tree').find('ul:eq(' + i + ')').prev('input:checkbox').prop('checked', function () {
                            return $(this).next('ul').find('input:unchecked').length === 0 ? true : false;
                        });
                    }
                });
            });

 <div id="tree">
            <ul>
                <li>
                    <input type="checkbox" />
                    Root
                    <ul>
                        <li>
                            <input type="checkbox" />
                            Child 1
                            <ul>
                                <li>
                                    <input type="checkbox" />
                                    Subchild 1</li>
                                <li>
                                    <input type="checkbox" />
                                    Subchild 2</li>
                                <li>
                                    <input type="checkbox" />
                                    Subchild 3</li>
                            </ul>
                        </li>
                        <li>
                            <input type="checkbox" />
                            Child 2
                            <ul>
                                <li>
                                    <input type="checkbox" />
                                    Subchild 1</li>
                                <li>
                                    <input type="checkbox" />
                                    Subchild 2</li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </div> 
```

//================================================= =====================//

[演示](http://jsfiddle.net/nanoquantumtech/JfMCP/)。

# javascript - 加载内容到div，加载时滑动内容

> ID：14129629
> 
> 赞同：0
> 
> 时间：2013-01-02T21:40:40.093
> 
> 标签：javascript, jquery

我有一个脚本，可以根据选择框中的选项将另一个页面的内容加载到 div 中。当内容加载到 div 中时，我是否可以添加幻灯片效果。

脚本如下所示：

```
$(document).ready(function(){ 
    $("#selectbox").change(function(){ 
    var selectedOption = $('#selectbox :selected').val(); 
    $containerDiv = $('#div_that_recieves_content'); 
    $containerDiv.html("");
            switch (selectedOption)
            {
            case "Option1":$containerDiv.load( "page.html #div" , function(){$(document).trigger("reload");});break;
            case "Option2":$containerDiv.load( "page.html #div" , function(){$(document).trigger("reload");});break;
            case "Option3":$containerDiv.load( "page.html #div" , function(){$(document).trigger("reload");});break;
            }
    return true;
    }); 
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:55:11.610

`load()`新内容可用时触发的回调。您可以在 AJAX 之前隐藏容器，并在 AJAX 完成后将其向下滑动

```
$containerDiv.html("").hide(); 
```

然后在 switch 中你最好只用用例来定义 URL，并且只调用`load()`一次：

```
var url;
switch (selectedOption) {
        case "Option1": url= "page.html #div";break;
        case "Option2": url= "page.html #div";break;
        case "Option3": url="page.html #div" ;break;
}

$containerDiv.load( url , function(){
    /* new content exists, can display it now*/
     $(this).slideDown();
     /* no idea what "reload" does.. if it affects "$containerDiv" may need to do slideDown in that handler*/
     $(document).trigger("reload");

}); 
```

# android - Android - adb 工具找不到设备

> ID：14129630
> 
> 赞同：2
> 
> 时间：2013-01-02T21:40:41.073
> 
> 标签：android, adb

我刚刚恢复了出厂数据，以便可以使用手机进行测试。

但是现在我正在尝试使用 adb 工具使用我的 USB 在设备上放置一个新的 .apk，它说设备未连接。

电话显示此消息：MTP：服务器状态：连接到计算机...

但它永远无法完全连接。

我试图去无线和网络，并启用 Internet 直通，但该选项在最后 5 分钟内也是“正在打开...”。

知道为什么我无法连接吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T21:52:08.630

它是什么类型的设备？确保您在设置、开发下设置了开发 USB 设置。还要确保它不是 USB 驱动器，而是处于 USB 调试模式。

此外，如果是设备驱动问题，这里有一篇针对 HTC Thunderbolt 和 Windows/Eclipse 的文章： [http ://www.nodans.com/index.cfm/2012/2/1/Getting-USB-Device-Drivers-为 HTC-Android 开发工作](http://www.nodans.com/index.cfm/2012/2/1/Getting-USB-Device-Drivers-Working-for-HTC-Android-Development)

对于 OSX，摩托罗拉有一个 USB Link DMG，不过我不确定 HTC。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T10:15:40.270

也许你展示给我们更多的信息，比如

*   您使用的是什么操作系统（Windows、Mac、Ubuntu）
*   USB调试是否打开？
*   你重启了adb服务器吗

    ```
    $ adb kill-server
    $ sudo adb start-server
    * daemon not running. starting it now *
    * daemon started successfully *
    $ adb devices 
    ```

# google-app-engine - 用于管理 Google App Engine 应用中的静态资产的 REST 资源？

> ID：14129633
> 
> 赞同：0
> 
> 时间：2013-01-02T21:40:59.063
> 
> 标签：google-app-engine, rest, google-api

是否有用于管理 Google App Engine 应用程序/项目中的静态资产的 REST API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T00:55:46.467

静态资产在应用程序更新（上传）时进行管理。目前没有其他API。你想要完成什么？

# matlab - 使用 Matlab 编码器构建时出现奇怪的 Matlab 错误

> ID：14129634
> 
> 赞同：2
> 
> 时间：2013-01-02T21:41:01.737
> 
> 标签：matlab, build-error

我的 Matlab 编码器在我上次使用时（2 个月前）构建的东西很好，但现在当我尝试用它构建项目时，我收到以下错误：

```
\>> coder -build get_scores.prj     
Warning: 'perl: warning: Setting locale failed.    
perl: warning: Please check that your locale settings:    
LC_ALL = "en_GB",    
LANG = (unset)    
are supported and installed on your system.    
perl: warning: Falling back to the standard locale ("C").    
VSINSTALLDIR'    
exceeds MATLAB's maximum name length of 63 characters and has been truncated to    
'perl: warning: Setting locale failed.    
perl: warning: Please che'.     
\> In CompilerConfigurationFactory>CompilerConfigurationFactory.determineLocation at 275    
In CompilerConfigurationFactory>CompilerConfigurationFactory.process at 130    
In getCompilerConfigurations at 56    
In C:\Program Files\MATLAB\R2011b\toolbox\coder\coder\private\compilerman.p>parse_opts_file at 57    
In C:\Program Files\MATLAB\R2011b\toolbox\coder\coder\private\compilerman.p>compilerman at 15    
In C:\Program Files\MATLAB\R2011b\toolbox\coder\coder\private\emlckernel.p>emlckernel/getCompilerName at 148    
In C:\Program Files\MATLAB\R2011b\toolbox\coder\coder\private\emlckernel.p>emlckernel/finalizeProject at 711    
In C:\Program Files\MATLAB\R2011b\toolbox\coder\coder\private\emlckernel.p>emlckernel at 36    
In C:\Program Files\MATLAB\R2011b\toolbox\coder\coder\private\codeProject.p>codeProject/doit at 8    
In C:\Program Files\MATLAB\R2011b\toolbox\coder\coder\private\codeProject.p>codeProject at 13    
In C:\Program Files\MATLAB\R2011b\toolbox\coder\coder\emlcprivate.p>emlcprivate at 18     
The current MEX compiler '`<unknown>`' is not supported.    
Use mex -setup to select a supported compiler.    
Use help codegen for more information on using this command. 
```

我已经运行了 mex -setup 几次，选择了 Visual Studio（这是我以前使用的并且工作正常），然后重新运行 Build 命令，但同样的错误反复出现。此外，“超过 MATLAB 的 63 个字符的最大名称长度并已被截断”部分似乎是说 Matlab 以某种方式将 Perl 警告解释为某个变量名称 - 我不知道那里发生了什么。

我也不确定为什么会出现 Perl 警告 - LC_ALL 以前未设置，现在是 en_GB，但无论如何都会出现相同的错误。

任何纠正此问题的步骤将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:00:06.470

好的，仔细查看消息后，我猜想Matlab正在尝试在内部使用Perl获取变量名VSINSTALLDIR，并且警告消息正在抛出它。我尝试在命令行上运行 Perl 以确认警告也出现在那里。然后在寻找修复语言环境错误的方法时（谷歌搜索仅针对 linux 和 Mac 系统提供了解决方案），我找到了一种方法来简单地抑制[此页面](http://www-01.ibm.com/support/docview.wss?uid=swg21241025)上的 Perl 警告。这样做之后，上面的错误就消失了。

# c - C编程将一定数量的字节打印到文件中

> ID：14129648
> 
> 赞同：-1
> 
> 时间：2013-01-02T21:42:13.463
> 
> 标签：c, file

> **可能重复：**
> [C 编程将一定数量的字节打印到屏幕上](https://stackoverflow.com/questions/14119354/c-programming-print-a-certain-amount-of-bytes-to-screen)

我想从一个文件中读取 partSize 数量的字节，该文件可以是任何类型，并将读取的相同数量打印到已经存在的新文件中。我写的程序似乎写得比想象的要少，并给出了分段错误。

```
#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>
#include <unistd.h>
#include <sys/stat.h> 
#include <sys/types.h> 
#define PERMS 0777
#include <errno.h>

int main()
{

int createDescriptor;
int openDescriptorOriginal;

int closeCreateDescriptor;

char fileNameOriginal[15]="picture.jpg";
//char fileNameOriginal[15]="myFile.txt";
//char fileNameNew[15]="NEWFILE.txt";
char fileName[15]="NEWFILE.jpg";

int parts;
int partSize;

parts=2;

int bytesRemaining;
int partNumber;

char BUFFER[512];

int readDescriptor;

int openDescriptor;

if ((openDescriptorOriginal = open(fileNameOriginal, O_RDONLY )) == -1)
 {
 printf("Error opening %s", fileNameOriginal);
 exit(EXIT_FAILURE);
 }

struct stat buf;
int r = fstat(openDescriptorOriginal, &buf);
if(r)
{
fprintf(stderr, "error: fstat: %s\n",(char *)strerror(errno));

exit(1);
}

int originalFileSize=buf.st_size;

printf("The file is %d Bytes large.\n",originalFileSize);

partSize=((originalFileSize+parts)-1)/parts;
printf("Each part is %.9f Kilobytes large.\n",(double)partSize/1024 );

partNumber=1;
printf("Part number: %d\n", partNumber);

if ((openDescriptor = open(fileName, O_WRONLY )) == -1)
{
printf("Error creating %s\n", fileName);
exit(EXIT_FAILURE);
}
ssize_t count, total;
total = 0;
char *bufff = BUFFER;
while (partSize) {
   count = read(openDescriptorOriginal, bufff, partSize);
    if (count < 0) {
       // handle error
        break;
    }
    if (count == 0)
        break;
    bufff += count;
    total += count;
    partSize -= count;
}
write (openDescriptor, BUFFER, total);
printf("\n");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:55:17.230

一些初始问题：

*   将 CREAT 标志添加到您的 open() 以防文件不存在。
*   不应调整 partSize

取出调整 partSize 的线，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:56:33.047

```
int bytesReceived;
.... open files ....
while ((bytesReceived = read(openDescriptorOriginal, BUFFER, sizeof(BUFFER)) > 0) {
    if (bytesReceived != write(openDescriptor, BUFFER, bytesReceived) {
        printError(...);
    }
} 
```

# iphone - ios如何检查除法余数是否为整数

> ID：14129649
> 
> 赞同：3
> 
> 时间：2013-01-02T21:42:20.523
> 
> 标签：iphone, ios, xcode, ipad

你们中的任何人都知道如何检查除法余数是整数还是零？

```
if ( integer ( 3/2)) 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-02T22:19:30.407

您应该像这样使用模运算符

```
// a,b are ints
if ( a % b == 0) {
  // remainder 0
} else
{
  // b does not divide a evenly
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T21:45:01.577

听起来您正在寻找的是模运算符`%`，它将为您提供操作的其余部分。

```
3 % 2 // yields 1
3 % 1 // yields 0
3 % 4 // yields 1 
```

但是，如果您想先实际执行除法，您可能需要一些更复杂的东西，例如：

```
//Perform the division, then take the remainder modulo 1, which will
//yield any decimal values, which then you can compare to 0 to determine if it is
//an integer
if((a / b) % 1 > 0))
{
    //All non-integer values go here
}
else
{
    //All integer values go here
} 
```

演练

```
(3 / 2) // yields 1.5
1.5 % 1 // yields 0.5
0.5 > 0 // true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-03T01:13:46.923

**斯威夫特 5**

```
if numberOne.isMultiple(of: numberTwo) { ... } 
```

**Swift 4 或更少**

```
if numberOne % numberTwo == 0 { ... } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-16T21:55:03.393

迅捷3：

```
if a.truncatingRemainder(dividingBy: b) == 0 {
    //All integer values go here
}else{
    //All non-integer values go here
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-12T06:39:41.777

您可以使用下面的代码来了解它是哪种类型的实例。

```
var val = 3/2
var integerType = Mirror(reflecting: val)

if integerType.subjectType == Int.self {
  print("Yes, the value is an integer")
}else{
  print("No, the value is not an integer")
} 
```

让我知道以上是否有用。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-02-19T02:14:03.610

斯威夫特 2.0

```
print(Int(Float(9) % Float(4)))   // result 1 
```

# vb.net - 在 Visual Basic 2010 中动态循环图片框控件似乎不遵循任何顺序

> ID：14129652
> 
> 赞同：3
> 
> 时间：2013-01-02T21:42:32.900
> 
> 标签：vb.net, vb6, vb.net-2010

在 Visual Basic 2010 表单应用程序中，我有以下代码片段：

```
For Each ctlControl In Me.Panel1.Controls
    If TypeName(ctlControl) = "PictureBox" Then
        ctlControl.image = Nothing
    End If
Next ctlControl 
```

我的问题是当它遍历控件时，它不是从左上角控件开始的，而且它似乎以随机顺序遍历每个图片框。

如何控制接下来更新哪个图片框的顺序。是否有类似于选项卡索引（在 VB 6 中）的属性，我可以操纵它来控制我的循环更新图片框的顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:18:32.550

作为一种更正确和确定的方式，我会获取每个图片框，保留它们的句柄和位置，然后根据它们的位置对它们进行排序。现在它们可以使用了。这是一个例子：

```
Public Class Form1
    Structure Pbox
        Dim handle As IntPtr
        Dim top As Integer
        Dim left As Integer
    End Structure
    Dim pboxlist As New List(Of Pbox)
    Sub ClearImages()
        pboxlist.Clear()
        For Each c As Control In Me.Controls
            If TypeName(c) = "PictureBox" Then
                Dim x As New Pbox
                x.top = c.Top
                x.left = c.Left
                x.handle = c.Handle
            End If
        Next
        pboxlist.OrderByDescending(Function(a) a.top).ThenByDescending(Function(a) a.left)
        For Each item In pboxlist
            Dim x As PictureBox = PictureBox.FromHandle(item.handle)
            x.Image = Nothing
        Next
    End Sub
End Class 
```

另一种方法是使用良好的命名，以便您可以使用它们的名称对它们进行排序。例如，如果您进行排序，PictureBox1 将排在 PictureBox2 之前。因此，您应该将 PictureBox1 用于最顶部和左侧，将 PictureBox2 用于下一个，依此类推...

**编辑：**使用 Tag 属性，正如 John Bustos 所建议的那样，而不是名称是一个更容易和更好的主意。因此，在不迷失名称的情况下，您可以根据您定义的标签对图片​​框进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:14:30.887

控件的顺序由它们添加到面板的顺序决定，而不是制表位索引。您可以通过仔细重新组织表单设计器文件中添加到面板的顺序来更改它，但我不推荐这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T07:32:04.240

正如其他一些人所说，您可以使用可能是最佳镜头的 TAG 属性，当您动态创建图片框时，使用计数器并将计数器值添加到 TAG 属性。如果您手动添加图片框，则只需从左上​​角开始向右工作，然后在每个图片的 TAG 属性字段中添加一个值，从 1 开始，每次递增 1，一直持续到该行完成，然后继续与下一行。

最后，当您准备好循环浏览图片框时，只需按照以下模式操作即可。

```
'Calc number of picture boxes
For Each ctlControl In Me.Panel1.Controls
  If TypeName(ctlControl) = "PictureBox" Then
    Counter = Counter + 1
  End If
Next ctlControl
ThisBox = 1
Do
  For Each ctlControl In Me.Panel1.Controls
    If TypeName(ctlControl) = "PictureBox" Then
      If CInt(ctlControl.Tag) = ThisBox Then 
        CLEAR-YOUR-IMAGE-HERE
        ThisBox = ThisBox + 1
      End If
    End If
  Next ctlControl
Loop Until ThisBox = Counter 
```

注意：重要的是您放置在 TAG 属性中的数字是连续的，否则您将永远卡在 DO-LOOP 中！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-28T02:11:19.293

PictureBox 控件有一个 Text 属性，您可以使用它来代替 Tag。

它不会出现在 Intellisense 中，因为它是基础设施属性，但它就在那里。

[http://msdn.microsoft.com/en-us/library/hc9k45f4(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/hc9k45f4(v=vs.110).aspx)

（我想评论 Zaf Khan 的回答，但我还没有代表。）

# azure - 在 Azure 中同步并行操作

> ID：14129653
> 
> 赞同：1
> 
> 时间：2013-01-02T21:42:33.760
> 
> 标签：azure, parallel-processing, synchronization, azure-worker-roles

我需要一些关于 Azure 应用程序的架构建议。所以，有一个包含项目的队列，假设它是 [A, B, A, B, D]。

队列中的每个不同项目都将获得一个随机分配的类别，并且队列中可能多次出现相同的项目。类别分配由一些工作人员角色完成，这些角色执行以下操作：如果项目已经分配了类别，它将将该项目添加到类别中，否则它将创建一个新类别并添加该项目。所以它是这样的：

```
D: has category? no. Create category 123\. Assign [D, 123]
B: has category? no. Create category 435\. Assign [B, 435]
A: has category? no. Create category 154\. Assign [A, 154]
B: has category? yes. Assign [B, 435] (category already created)
... etc ... 
```

我的困境是：我如何同步工作人员，以便同一个项目没有两个类别？如果两个工人选择 B 项，则“B”可能有两个类别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T20:09:24.880

确保您不会重复的唯一方法是锁定可以从两个实例访问的类别的分配。在 Azure 中执行此操作的最流行方法是租用存储中的 blob。如果您的项目是 Foo 类型，并且您正在通过队列传递 Foo 的 Id，则伪代码将如下所示：

```
int fooId = GetIdFromQueue();

Foo myFoo = LoadFooFromStorage(fooId);

if (myFoo.Category == null)
{
    CreateLockBlobIfNoExistForFoo(fooId);

    while (not GetLockOnBlobForFoo(fooId))
    {
        WaitForSomeTime();
    }

    // Need to reload the underlying item as another thread may have
    // been assigning the category while we were waiting on the lock
    Foo myFoo = LoadFooFromStorage(fooId);

    if (myFoo.Category == null)
    {
        myFoo.Category = GetRandomCategory();

        SaveFoo(myFoo);
    }

    ReleaseLease(fooId);
} 
```

您需要查找有关 blob 租约的一些细节，但希望这足以让您入门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T03:33:48.493

将您的项目/类别列表维护在您的工作角色可以访问的天蓝色表中，但这仍然可能会在没有某种限制的情况下以重复的形式结束。例如，对于节流，将您的 GetMessage() 设置为具有合理等待时间（1-3 秒）的计时器循环 - 在每次调用 GetMessage() 之前，调用 PeekMessages(5) 以查看但不使接下来的 5 条消息出队。在调用 GetMessage() 之前，循环遍历它们并为任何未分配的项目分配类别并将它们存储在 Azure 表中。

# android - 如何在android中获取视图的布局参数？

> ID：14129654
> 
> 赞同：0
> 
> 时间：2013-01-02T21:42:41.203
> 
> 标签：android, android-layout, layout

我有一个继承自 android 的 ImageView 的类。

问题是在 XML 中定义的构造函数中获取布局参数，例如“layout_marginLeft”。或者，在覆盖的 onFinishInflate() 中。第二种方法是失败，因为 this.getLayoutParams 在 onFinishInflate() 中返回 null，所以看起来完全不可能。

但是如何从构造函数中的 AttributeSet 中获取它呢？attrSet.getAttributeIntValue("android", "layout_marginLeft", -100500); 始终返回 -100500，但此参数存在于属性名称列表中。如果我将“android”替换为空字符串“”，则没有区别。无论如何，android 文档并没有解释到底什么是“命名空间”。它告诉它只是一个神秘的命名空间，没有评论:(

# c++ - 如何在运行时检查 void* 是否为 IUnknown*？

> ID：14129655
> 
> 赞同：0
> 
> 时间：2013-01-02T21:42:45.430
> 
> 标签：c++, windows

如何在运行时检查 void* 是否为 IUnknown*？

```
IUnknown *unk = dynamic_cast<IUnknown*>(item); 
```

不起作用（编译错误）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T21:51:47.487

您无法在运行时明确确定。你不能随便取一个地址来确定`IUnknown`它背后是否有真实的东西。

# google-apps-script - 在 Google Docs 中更改文档所有者的脚本

> ID：14129662
> 
> 赞同：1
> 
> 时间：2013-01-02T21:43:14.637
> 
> 标签：google-apps-script, google-docs-api

StackOverflow 和 Google Apps 脚本的新功能。我感谢任何帮助/指导。

**任务：**

我正在尝试编写一个 Google Apps 脚本，它将指定文件夹中所有文件的所有权转移给一个所有者。我是 Google Apps 专业版帐户的超级管理员。但是，我既不是原所有者也不是新所有者，出于安全原因，新所有者不能是超级管理员（因此不能运行脚本）。原始所有者和新所有者都在同一个域中。

我找到了[以下代码](https://stackoverflow.com/questions/10796464/transfer-ownership-of-a-file-to-another-user-in-google-apps-script)，我已经使用并对其进行了调整，但我收到来自 URLFetchApp 调用的“请求失败，返回代码 400。服务器响应：”错误。

**我做了什么：**

根据 [Google Apps 文档列表开发人员指南](https://developers.google.com/google-apps/documents-list/#using_google_apps_administrative_access_to_impersonate_other_domain_users)，我更改了“base”变量以模拟新的文档所有者：

```
 var base = 'https://docs.google.com/feeds/'; 
```

至

```
 var base = encodeURIComponent('https://docs.google.com/feeds/'+newOwnerEmail+'/private/full'); 
```

我还在 googleOAuth_() 方法中将使用者密钥和秘密更新为正确的值。有了这个，这里是整个代码部分，包括有问题的行：

```
 file.removeEditor(newOwnerEmail);
  var base = encodeURIComponent('https://docs.google.com/feeds/'+newOwnerEmail+'/private/full');
  var fetchArgs = googleOAuth_('docs', base);
  fetchArgs.method = 'POST';
  var rawXml = "<entry xmlns='http://www.w3.org/2005/Atom' xmlns:gAcl='http://schemas.google.com/acl/2007'>"
  +"<category scheme='http://schemas.google.com/g/2005#kind' "
  +"term='http://schemas.google.com/acl/2007#accessRule'/>"
  +"<gAcl:role value='owner'/>"
  +"<gAcl:scope type='user' value='"+newOwnerEmail+"'/>"
  +"</entry>";
  fetchArgs.payload = rawXml;
  fetchArgs.contentType = 'application/atom+xml';
  var url = base + encodeURIComponent(oldOwnerEmail + '/private/full/'+fileId+'/acl&alt=json');

  try { var content = UrlFetchApp.fetch(url, fetchArgs).getContentText(); }
  catch (err) { Logger.log(err.message) } 
```

每次应用程序“尝试”执行 UrlFetchApp.fetch() 方法时，应用程序都会“捕获”400 错误。

**问题：**

我可能在这里缺少什么？“fetchArgs”是否以某种方式格式错误（可能是“fetchArgs”正在输入的“rawXML”）？使用新的 Google Drive SDK，使用这个 API 是更好的选择吗？我很感激我可能错过的任何指导或资源，以及任何改进如何提出这些问题的提示。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:27:53.203

解决了这个问题。

我删除了 encodeURIComponent() 方法，这对于 URL 显然不是必需的。我还使用 OAuthApp 库（[在此处找到](https://sites.google.com/site/scriptsexamples/custom-methods/google-oauth)）开始为 URLFetchApp.fetch() 方法构造获取选项。我不确定这些修复程序中是否只有一个或两个解决了问题，但脚本现在一直有效，所以我是一个快乐的人。

下面完成更新的代码：

```
function changeOwner(newOwnerEmail, file)
{
  var fileId = file.getId();
  var oldOwnerEmail = file.getOwner().getEmail();

  if (oldOwnerEmail == newOwnerEmail) { return; }

  file.removeEditor(newOwnerEmail);  //should this be oldOwnerEmail?
  var base = 'https://docs.google.com/feeds/';

  var options = OAuthApp.getAuth('docs');

  options.method = 'POST';
  var rawXml = "<entry xmlns='http://www.w3.org/2005/Atom' xmlns:gAcl='http://schemas.google.com/acl/2007'>"
      +"<category scheme='http://schemas.google.com/g/2005#kind' "
      +"term='http://schemas.google.com/acl/2007#accessRule'/>"
      +"<gAcl:role value='owner'/>"
      +"<gAcl:scope type='user' value='"+newOwnerEmail+"'/>"
      +"</entry>";
  options.payload = rawXml;
  options.contentType = 'application/atom+xml';

  var API_KEY = getAPIKey();  
  var url = base + oldOwnerEmail+'/private/full/'+fileId+'/acl?v=3&alt=json&key='+API_KEY

  try 
  { 
    var result = UrlFetchApp.fetch(url, options);
    docsObject  = Utilities.jsonParse(result.getContentText());
  }
  catch (err) { Logger.log(err.message) }

}//end changeOwner() 
```

# excel - Excel 2010 VBA根据定义的变量在指定单元格中重复公式

> ID：14129667
> 
> 赞同：0
> 
> 时间：2013-01-02T21:43:29.237
> 
> 标签：excel, vba, variables, repeat

[这边](http://www.ozgrid.com/forum/showthread.php?t=173201)也问了。

我有一个带有“报告段”的导出，每行总是 22 行，当带入 Excel 时，第一个总是从第 5 行开始。最后一行（包含“报告结束”特殊字符）为 247 的文档将具有 11 个报告段。

在每个报告部分中，需要两个不同的公式。

对于第一个报告段，始终位于 A5 到 J27 行：

在 Excel 2010 中使用 VBA，我需要将 FORMULA1 放在该范围的所有单元格中（D5:D15 拖出到 H5:H10（不是 15）和 D18），并将 FORMULA2 放在单元格中（F20:F22，J20:J22）。

然后我需要**重复**vTaskCount次数（段数）并以 22 次间隔（段中继器偏移）**。**有些报告可能有 2 个段，有些可能有 50 个段，但结构始终相同。我希望因为我可以告诉它重复该过程的次数，它会使其更简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T00:23:36.900

尝试这样的事情：

```
sub whatever()
dim lNumSegs as long, lLoop as long

lNumSegs=(cells(rows.count,1).end(xlup).row-5)/22

for lLoop =1 to lnumsegs
   range(D5:D15).offset((lloop-1)*22).formular1c1="=FOrmula1"
   range(H5:H10).offset((lloop-1)*22).formular1c1="=FOrmula1"
   range(D18).offset((lloop-1)*22).formular1c1="=FOrmula1"

   range("F20:F22,J20:J22").offset((lloop-1)*22).formular1c1="=FOrmula2"
next lloop

end sub 
```

# oracle - 创建视图时出错

> ID：14129671
> 
> 赞同：-3
> 
> 时间：2013-01-02T21:44:09.330
> 
> 标签：oracle, oracle-sqldeveloper

我正在尝试在 Oracle SQL 开发人员中创建多个表的视图，我正在使用以下查询，但它给了我错误 ORA - 00936 MISSING EXPRESSION

请检查我的查询并提供正确的查询；

```
SELECT A.UNIQUE_ID, A.L1_AU_KEY, A.L1_AU_CD, A.L1_AU_PARENT, A.L1_AU_DESC, A.L1_AU_DESC_ALT, A.L1_AU_SRC_CD, A.L1_AU_CLASS, A.L1_AU_STATUS, A.L1_AU_PERM_FLAG, A.L1_AU_TM_FLAG, A.L1_AU_CV_FLAG, A.L1_AU_SHADOW_FLAG, A.L1_AU_ELIM_FLAG, A.L1_AU_MARKETING_FLAG,
B.L2_DST_KEY, B.L2_DST_CD, B.L2_DST_PARENT, B.L2_DST_DESC, B.L2_DST_DESC_ALT, B.L2_DST_SRC_CD,
C.L3_OFC_KEY, C.L3_OFC_CD, C.L3_OFC_PARENT, C.L3_OFC_DESC, C.L3_OFC_DESC_ALT, C.L3_SLOB_LG, C.L3_SRC_CD,
D.L4_FLEX1_KEY, D.L4_FLEX1_CD, D.L4_FLEX_PARENT, D.L4_FLEX1_DESC, D.L4_FLEX1_DESC_ALT, D.L4_SRC_CD,
E.L5_DIV_KEY, E.L5_DIV_CD, E.L5_DIV_PARENT, E.L5_DIV_DESC, E.L5_DIV_DESC_ALT, E.L5_SRC_CD,
F.L6_FLEX2_KEY, F.L6_FLEX2_CD, F.L6_FLEX2_PARENT, F.L6_FLEX2_DESC, F.L6_FLEX2_DESC_ALT, F.L6_SRC_CD,
G.L7_SUBLOB_KEY, G.L7_SUBLOB_CD, G.L7_SUBLOB_PARENT, G.L7_SUBLOB_DESC, G.L7_SUBLOB_DESC_ALT, G.L7_SLOB_HG, G.L7_SRC_CD,
H.L8_LOB_KEY, L8_LOB_CD, H.L8_LOB_PARENT, H.L8_LOB_DESC, H.L8_LOB_DESC_ALT, H.L8_SRC_CD,
I.L9_OPSEG_KEY, I.L9_OPSEG_CD, I.L9_OPSEG_DESC, I.L9_OPSEG_DESC_ALT, I.L9_SRC_CD,
FROM T_AU_ORBT A 
JOIN T_DST_ORBT B
ON
A.L1_AU_PARENT = B.L2_DST_KEY
JOIN T_OFC_ORBT C
ON
B.L2_DST_PARENT = C.L3_OFC_KEY
JOIN T_FLEX1_ORBT D
ON
C.L3_OFC_PARENT = D.L4_FLEX1_KEY
JOIN T_DIV_ORBT E
ON
D.L4_FLEX1_PARENT = E.L5_DIV_KEY
JOIN T_FLEX2_ORBT F
ON
E.L5_DIV_PARENT = F.L6_FLEX2_KEY
JOIN T_SUBLOB_ORBT G
ON
F.L6_FLEX2_PARENT = G.L7_SUBLOB_KEY
JOIN T_LOB_ORBT H
ON
G.L7_SUBLOB_PARENT = H.L8_LOB_KEY
JOIN T_OPSEG_ORBT I
ON
H.L8_LOB_PARENT = I.L9_OPSEG_KEY; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:49:05.593

您的选择列表末尾有一个额外的逗号。

```
EG_KEY, I.L9_OPSEG_CD, I.L9_OPSEG_DESC, I.L9_OPSEG_DESC_ALT, I.L9_SRC_CD, <-- remove this
FROM T_AU_ORBT A 
```

即用逗号，你会期望这个错误：

```
SQL> select dummy, from dual;
select dummy, from dual
              *
ERROR at line 1:
ORA-00936: missing expression 
```

# php - 在 div 上显示高度更改 iframe 100%

> ID：14129672
> 
> 赞同：0
> 
> 时间：2013-01-02T21:44:11.210
> 
> 标签：php, css, html, iframe, height

我有什么：我有一个用于我们的 Minecraft 服务器的玩家状态脚本，它显示服务器的名称、ip 和当前玩家的头像。状态框的 2 个 div 框：外部 1 用于固定位置，第 2 个用于 div 框本身。

我想要什么：我想要 iframe 所在的当前 divbox：

```
<div class="statusbox">

<div class="statusboxinner">
<iframe src="players_main.php" height="auto" width="140px" frameborder="0"           scrolling="no" padding="fixed" marginheight="auto"></iframe> <iframe src="players_hg.php" height="auto" width="140px" frameborder="0" scrolling="no" marginheight="auto"></iframe>
</div>
</div> 
```

100% 固定到 iframe 加载的 php 文件。

CSS 代码：

```
 .statusbox {
position: fixed;
background: none;
margin-top: 472px;
margin-left: 1000px;
#pointer-events:none;
z-index:0;
}

.statusboxinner {
float: right;
margin-right: -243px;
#pointer-events:auto;
position: relative;
padding: auto;
height:auto;
padding-top:auto;
margin-bottom:auto;
background-color: white;
border-radius: 3px;
text-shadow: 0px 1px 0px black;
box-shadow: inset -4px 0px 5px rgba(0,0,0,0.2);
} 
```

您可以在此页面 www.ravand.org 上查看它（右侧浮动框）

我的问题是：我可以简单地添加一个固定数量的像素作为 divbox 的高度，但问题是，根据服务器上播放的人数，php 文件/iframe 会放大到底部。当我尝试设置“高度：100%”时，状态框只是被放大到底部，这不是我需要的。

如果您有任何建议，我很乐意在没有 iframe 的情况下解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:14:33.663

找到了一个很酷的脚本，我认为应该在[这里](http://w3schools.invisionzone.com/index.php?showtopic=26417)解决问题。

```
<script type="text/javascript">
    <!--//
    function sizeFrame() {
        var F = document.getElementById("myFrame");
        if(F.contentDocument) {
            F.height = F.contentDocument.documentElement.scrollHeight+30; //FF 3.0.11, Opera 9.63, and Chrome
        } else {
            F.height = F.contentWindow.document.body.scrollHeight+30; //IE6, IE7 and Chrome
        }
    }

    window.onload=sizeFrame;
    //-->
</script> 
```

# html - 处理按钮组的语义方式

> ID：14129673
> 
> 赞同：1
> 
> 时间：2013-01-02T21:44:15.057
> 
> 标签：html, markup, semantic-markup, wai-aria

我有一个隐藏或显示的音频流列表，具体取决于用户是否单击具有类“btn-group”的 div 元素。我的标记类似于 twitter bootstrap 的按钮组，如下所示：

```
<div class="btn-group">
    <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
        Expand
        <span class="caret"></span>
    </a>
    <ul class="dropdown-menu">
    <!-- dropdown menu links -->
    </ul>
</div> 
```

这很好，但不幸的是，这个重要的功能隐藏在一个`div`元素中，而不是更有意义的东西中。是否有一个 aria-role 有意义？有没有其他人会推荐的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:11:01.763

一个不错的解决方案可能是将按钮的 aria 标志性角色赋予 btn-group div，如下所示：

```
<div class="btn-group" role="button"> 
```

这样，屏幕阅读器将了解该组的性质。

# c - 多线程 C 程序中的线程 ID 错误？

> ID：14129675
> 
> 赞同：2
> 
> 时间：2013-01-02T21:44:32.187
> 
> 标签：c, multithreading

我是 C 中多线程的新手，我有这个问题。我写了以下代码：

```
#include <stdio.h>
#include <pthread.h>
#include <unistd.h>

pthread_mutex_t m=PTHREAD_MUTEX_INITIALIZER;
pthread_attr_t attr;

void* test(void *a)
{
    int i=*((int *)a);
    printf("The thread %d has started.\n",i);
    pthread_mutex_lock(&m);
    sleep(1);
    printf("The thread %d has finished.\n",i);
    pthread_mutex_unlock(&m);
    pthread_exit(NULL);

}

int main()
{
    int i=0;
    pthread_attr_setdetachstate(&attr,PTHREAD_CREATE_JOINABLE);
    pthread_t thread[5];

    for (i=0;i<5;i++)
        pthread_create(&thread[i],&attr,test,&i);

    for (i=0;i<5;i++)
        pthread_join(thread[i],NULL);
    return 0;
} 
```

为什么我会得到如下值：

```
The thread 0 has started.
The thread 0 has started.
The thread 5 has started.
The thread 5 has started.
The thread 0 has started.
The thread 0 has finished.
The thread 0 has finished.
The thread 5 has finished.
The thread 5 has finished.
The thread 0 has finished. 
```

或者

```
The thread 1 has started.
The thread 2 has started.
The thread 5 has started.
The thread 4 has started.
The thread 0 has started.
The thread 1 has finished.
The thread 2 has finished.
The thread 5 has finished.
The thread 4 has finished.
The thread 0 has finished. 
```

甚至：

```
The thread 0 has started.
The thread 0 has started.
The thread 0 has started.
The thread 0 has started.
The thread 0 has started.
The thread 0 has finished.
The thread 0 has finished.
The thread 0 has finished.
The thread 0 has finished.
The thread 0 has finished. 
```

等，当我期望得到：

```
The thread 0 has started.
The thread 1 has started.
The thread 2 has started.
The thread 3 has started.
The thread 4 has started.
The thread 0 has finished.
The thread 1 has finished.
The thread 2 has finished.
The thread 3 has finished.
The thread 4 has finished. 
```

只有当我放在`usleep(10)`后面时`thread_create`，我才能得到一些“正常”的值。

我在 Unix 上的 Code::Blocks 中编译并运行了这段代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T21:46:25.883

您正在传递`for`正在更改的变量的地址 ( `i`)，因此您受调度程序的支配。你应该只是传递一个副本。作为一种便宜的，不完全洁净的方式：

```
pthread_create(&thread[i],&attr,test, (void*)i);

/* ... */

int i = (int)a; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T21:48:10.997

请注意，您将地址`i`作为参数传递给线程：

```
pthread_create(&thread[i],&attr,test,&i); 
```

这意味着您的所有线程都将读取相同的变量`i`以确定它们是哪个线程。也就是说，所有五个线程都将查看同一个变量来确定它们的线程号。因此，随着循环中的值`i`递增`for`，所有线程都会感知到它们的线程号发生变化以使用`i`. 这就是为什么您有时会看到 5 作为线程编号出现的原因，也解释了您经常跳过数字或看到太多重复项的事实。

要解决此问题，您需要为每个线程提供自己的`i`. 例如，您可以执行以下操作：

```
int* myI = malloc(sizeof(int));
*myI = i;
pthread_create(&thread[i], &attr, test, myI); 
```

然后让线程在终止之前释放指针：

```
void* test(void *a)
{
    int i=*((int *)a);
    printf("The thread %d has started.\n",i);
    pthread_mutex_lock(&m);
    sleep(1);
    printf("The thread %d has finished.\n",i);
    pthread_mutex_unlock(&m);
    pthread_exit(NULL);
    free(a);
} 
```

或者，您可以`i`转换为 a`void*`并将其传入：

```
pthread_create(&thread[i],&attr,test, (void*)i); 
```

如果您这样做，那么您将让线程将它们的参数直接转换回`int`，而不是`int*`：

```
void* test(void *a)
{
    int i = (int)a;
    printf("The thread %d has started.\n",i);
    pthread_mutex_lock(&m);
    sleep(1);
    printf("The thread %d has finished.\n",i);
    pthread_mutex_unlock(&m);
    pthread_exit(NULL);
} 
```

希望这可以帮助！

# qt - QApplication 程序意外结束

> ID：14129677
> 
> 赞同：1
> 
> 时间：2013-01-02T21:44:54.777
> 
> 标签：qt

我使用 OpenCV 和 QT 库创建了我的项目。在我的项目中，我向我的网络摄像头展示了一个标记（使用 aruco）；当 cam 识别它时，会创建一个浏览器（使用 Qt 库）并显示一个站点。（你可以在这张图片中看到它） ![在此处输入图像描述](../Images/19bc8e44d8999e010833368f58dc11d7.png)

但是，当我关闭浏览器并再次将标记显示为 cam（我没有关闭我的项目）时，我的程序意外停止 ![在此处输入图像描述](../Images/6963d7c5594dc7952503356d01a73eb8.png)

我使用 QtCreator 2.6.0 e qt 4.8.3 库在 Win7 x64 上工作。我认为问题是QApplication。似乎并没有完全关闭。

这是浏览器创建的代码（QApplication的创建）：

```
 int browser(int argc, char **argv)
{
    Q_INIT_RESOURCE(data);
    BrowserApplication application(argc, argv);
    if (!application.isTheOnlyBrowser())
        return 0;
    application.newMainWindow();
   return application.exec();

} 
```

任何人有任何想法或知道如何解决它？？？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:14:38.247

据我了解，您有一个应用程序至少有两个窗口（一个用于相机，一个用于浏览器），我怀疑 BrowserApplication 是 QApplication 的子类。它是否正确？如果我是正确的，请阅读 QApplication 类描述的前几行：

> 对于任何使用 Qt 的 GUI 应用程序，只有一个 QApplication 对象，无论应用程序在任何给定时间是否有 0、1、2 或更多窗口。

您没有提供 BrowserApplication 的实现，但我怀疑您正在创建两个实例。

# html - 用父 div 紧紧包裹多个子 div

> ID：14129683
> 
> 赞同：1
> 
> 时间：2013-01-02T21:45:19.887
> 
> 标签：html, css

我想用外部 div 紧紧包裹一些 div，这样外部 div 会通过添加更多内部 div 来调整大小。现在，父 div 仅填充 100% 宽度，这不太正确。

[**这是一些代码和一个 Fiddle**](http://jsfiddle.net/LX3jJ/)：

```
<div id="toolbar">
    <ul>
        <li><i class="icon-facebook-sign"></i></li>
        <li><i class="icon-twitter-sign"></i></li>
        <li><i class="icon-envelope-alt"></i></li>
        <li><i class="icon-cloud-upload"></i></li>
        <li><i class="icon-cog"></i></li>
    </ul>
</div> 
```

* * *

```
#toolbar {
    overflow:hidden;
    padding:5px;
    background:#FFF;
    border-radius:5px;
    border:1px solid #AAA;
    margin-bottom:15px;
}
    #toolbar ul {
        overflow:auto;
        list-style:none;
        margin:0;
        padding:0;
    }
    #toolbar li {
        display:inline;
        padding:5px;
        background:#606c88;
        color:#FFF;
        font-size:24px;
        border-radius:5px;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:49:00.783

将外部 div和列表的`display`-attribute设置为：`#toolbar``#toolbar ul``inline-block`

```
#toolbar {
    overflow:hidden;
    padding:5px;
    background:#FFF;
    border-radius:5px;
    border:1px solid #AAA;
    margin-bottom:15px;
    display:inline-block;
}
#toolbar ul {
    overflow:auto;
    list-style:none;
    margin:0;
    padding:0;
    display:inline-block;
} 
```

我希望它有帮助...

**编辑**：你说“紧紧包裹”。您在工具栏-div 中有一个填充。因此，如果您真的想在外部 div 中没有空间，请删除该行`padding:5px`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-02T21:53:30.750

```
#toolbar {
  float: left;
} 
```

这将“收缩包装”`.toolbar`其内容。你需要在它之后再添加一个元素，这样如果你不想要`clear: both;`的话，你就不会让元素与右边对齐。`.toolbar`

# php - 如何在php中扫描多个字符串的文本

> ID：14129684
> 
> 赞同：-1
> 
> 时间：2013-01-02T21:45:20.337
> 
> 标签：php, string

在 php 中，如何扫描文本（以用户提交的消息的形式）查找多个字符串（以其他用户名的形式）？

例如，在用户提交消息下方，我想要一种“查找”字符串“user-one”和“user-two”并将这些字符串发送到数组中的方法。

> 你好，这是一条测试消息，你能看到它@user-one，@user-two 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:51:09.487

你可以试试

```
$message = "Hello this is a test message, can you see it @user-one, @user-two?" ;
preg_match_all("/\@[a-z\-]+/", $message,$match);
var_dump($match[0]); 
```

输出

```
array (size=2)
  0 => string '@user-one' (length=9)
  1 => string '@user-two' (length=9) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:50:12.293

```
preg_match_all('|\@(.*) |' , $userText , $match);

print_r($match[1]) 
```

`$match[1]`将包含所有用户名。`$userText`是用户输入的文本。如果`$match[0]`您希望用户名带有`@`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T22:00:46.010

您可以使用 strrpos 检索位置并使用 substr + strlen 获取文本。例子：

```
...
$mystring = "Hello this is a test message, can you see it @user-one, @user-two?";
$pos = strrpos($mystring, "@user-one");
if ($pos > 0) {
    $str = substr($mystring, $pos, strlen("@user-one"));
}
... 
```

对不起，如果我没有正确理解这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T22:11:50.563

没有凌乱的模式匹配这个！

```
function stringToUserArray($str) { 
$remove = array(".",",","!","?");
$str = str_replace($remove, " ", $str);
$array = explode(" ", $str);
foreach($array as $string) { 
    if($string[0] == "@") { 
        $users[] = $string;
    }
}

return $users;
} 
```

# sql - sql查询（在列中显示唯一的行）

> ID：14129687
> 
> 赞同：1
> 
> 时间：2013-01-02T21:45:36.797
> 
> 标签：sql, sql-server-2008, pivot

我的 Sql 服务器中有以下类型的数据：-

```
Field         Value   Month

Administrative  5   November
Counteracting   7   November
District1       9   November
District2       6   November
Administrative  1   December
Counteracting   2   December
District1       3   December
District2       4   December
Administrative  9   January
Counteracting   8   January
District1       5   January
District2       6   January 
```

现在的问题是我无法弄清楚如何以以下格式显示这些数据：-

```
Field         November   December   January

Administrative  5          1          9
Counteracting   7          2          8  
District1       9          3          5
District2       6          4          6 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T21:48:26.217

您要做的是[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)数据。有几种方法可以执行此操作。如果您提前知道这些值，那么您可以对这些值进行硬编码。

您可以将聚合函数与`CASE`语句一起使用：

```
select field,
  sum(case when month ='November' then value end) November,
  sum(case when month ='December' then value end) December,
  sum(case when month ='January' then value end) January,
  etc
from yourtable
group by field 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/bfa25/1)

在 SQL Server 2005+ 中，您可以使用以下`PIVOT`功能：

```
select field, November, December, January
from
(
  select field,
    value, month
  from yourtable
) src
pivot
(
  sum(value)
  for month in (November, December, January, etc)
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/bfa25/3)

如果您有未知数量的值要转换为列，那么您可以使用动态 sql 来透视数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:49:54.333

这是一个典型的旋转问题。查看 SQL Server PIVOT 语句： http: [//msdn.microsoft.com/en-us/library/ms177410 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx)

它会解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T21:50:12.653

您需要使用 Pivot，查看示例：

[http://blogs.msdn.com/b/spike/archive/2009/03/03/pivot-tables-in-sql-server-a-simple-sample.aspx](http://blogs.msdn.com/b/spike/archive/2009/03/03/pivot-tables-in-sql-server-a-simple-sample.aspx)

# r - 在 R 中操作多个对象

> ID：14129691
> 
> 赞同：1
> 
> 时间：2013-01-02T21:45:48.667
> 
> 标签：r, quantmod

> **可能重复：**
> [r quantmod 变量的名称](https://stackoverflow.com/questions/11179154/r-names-of-quantmod-variables)
> [R：合并大量 data.frames](https://stackoverflow.com/questions/14096814/r-merging-a-lot-of-data-frames)

我想对几个对象执行一个功能。我知道我可以使用`merge()`2：

`library(quantmod)`
`symb <- c('AAPL', 'GE')`
`getSymbols(symb, from='2005-01-01')`
`foo <- merge(AAPL$AAPL.Adjusted, GE$GE.Adjusted)`

但假设`symb`是道指的所有成分股；`getSymbols`返回 30 个对象。我仍然希望得到所有 30 只股票的调整价格表或 xts 表。

我可以想象一个`merge`循环将每个符号的调整列添加到新对象，但是：

*   这是不雅的。有没有更好的办法？有人建议`Reduce()`，但在这种情况下我无法理解。
*   我不知道如何调用`objects()`无论如何都会出现的每个符号。

# ios - 如何使用加速度计检查设备是否稳定？

> ID：14129698
> 
> 赞同：2
> 
> 时间：2013-01-02T21:46:09.660
> 
> 标签：ios, hardware-acceleration, core-motion

我知道如何获取加速度数据，但想知道是否有人知道任何可以确定 ios 设备是否稳定（摇摆或摇晃）的代码示例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:49:15.173

存储加速度计的最后 30 个样本，获取每个组件的平均值 (x, y, z) 和标准偏差。定义多少偏差是“稳定的”。

[Obj-C：计算 NSNumber 对象的 NSArray 的标准差？](https://stackoverflow.com/questions/4889486/obj-c-calculate-the-standard-deviation-of-an-nsarray-of-nsnumber-objects)

那会做的。制作 3 个数组，每个数组都有 30 个（或多或少取决于您要比较的时间范围）nsnumber。您将获得 3 个标准差。这些数字越小，设备移动的越少。检查它们中的 3 个是否小于您想要的任意数量，例如 0.1.s

# imap - courier authdaemon 奇怪的密码处理

> ID：14129699
> 
> 赞同：1
> 
> 时间：2013-01-02T21:46:11.577
> 
> 标签：imap

好的，所以我的快递安装有一个非常奇怪的问题。当我尝试登录时，我需要用户名和密码，对吗？除了我可以使用任何字符串作为密码，它的前缀与我的密码相同。例子：

假设这是我的密码：

```
#password# 
```

我可以使用以下任何密码成功登录：

```
#password#
#password#FOO
#password#BAR 
```

ETC..

我正在使用 mysql 存储用户数据，这是我的 /etc/courier/authmysqlrc

```
MYSQL_SERVER localhost
MYSQL_USERNAME #USER
MYSQL_PASSWORD #PASSWORD
MYSQL_PORT 0
MYSQL_DATABASE mail
MYSQL_USER_TABLE users
MYSQL_CRYPT_PWFIELD password
#MYSQL_CLEAR_PWFIELD password
MYSQL_UID_FIELD 5000
MYSQL_GID_FIELD 5000
MYSQL_LOGIN_FIELD email
MYSQL_HOME_FIELD "/home/vmail"
MYSQL_MAILDIR_FIELD CONCAT(SUBSTRING_INDEX(email,'@',-1),'/',SUBSTRING_INDEX(email,'@',1),'/')
#MYSQL_NAME_FIELD
MYSQL_QUOTA_FIELD quota 
```

哪里可能有问题？在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T21:37:58.183

问题是密码是使用操作系统的`crypt()`函数加密的，它只查看密码的前 8 个字符来生成加密的哈希值。[如此处](http://paul-m-jones.com/archives/134)
所述：

> 如果您的密码长度超过 8 个字符，只要前 8 个字符匹配，crypt() 就会称其为有效匹配。例如，如果您的密码是“password”，并且作为加密哈希存储在 htpasswd 文件中，则检查“passwordX”将与检查“password”、“password123”等完全相同；也就是说，它将作为有效检查返回，因为前 8 个字符匹配正确。同样，如果您的密码是“longpassword”并且您只检查“longpass”，那么它也将被返回为有效密码。

# sql - 更新临时表

> ID：14129706
> 
> 赞同：0
> 
> 时间：2013-01-02T21:46:56.930
> 
> 标签：sql, sql-server-2008, ssms

我正在为新年创建一些报告。我解除了此代码并尝试使其适用于临时表，因为我没有在我的数据库上创建表的权限。我注释掉了 PKey 部分，因为我认为我在临时表中不需要它。

我可以在 2099 年之前插入日期，在 BankHoliday 中插入“N”，`HolidayName`在临时表的列中插入“Null”。但是，当我单独或作为一个长查询运行“元旦”假期的更新部分时，我得到了相同的语法错误。“''附近的语法不正确。” 就在我觉得我也知道自己在做什么的时候...

```
Declare @FirstDate as Date
Declare @LastDate as Date
Declare @WorkingDate as Date

set @FirstDate = '01-01-2010'
SET @LastDate = '12-31-2099'

-- create holiday table replace # with dbo for permanent table
begin
create table #CACFederalReserverHolidays
(
[Date] Date Not Null,
BankHoliday nvarchar(1) Null,
HolidayName nvarchar(50) Null,
) ON [Primary]
end

----add primary key replace # with dbo for permanent table

--begin
--alter table #CACFederalReserverHolidays add constraint
--PK_CACFederalReserverHolidays Primary Key Clustered
--(
--Date
--)
--With (Statistics_NoRecompute = off,
--  Ignore_Dup_Key = Off,
--  Allow_Row_Locks = On,
--  Allow_Page_Locks = On) On [Primary]
--end

-- insert the first date

Insert into #CACFederalReserverHolidays 
([Date],[BankHoliday])
Values
(@FirstDate,'N')

-- insert the remaining dates by adding 1 to the last date
While (select MAX(DATE)
from #CACFederalReserverHolidays
) < @LastDate

begin
Set @WorkingDate =  DATEADD (day,1,(select MAX(DATE) from #CACFederalReserverHolidays))
if @WorkingDate <= @LastDate
    begin
        insert into #CACFederalReserverHolidays
        ([Date], [BankHoliday])
        Values
        (@WorkingDate, 'N')
            end
    else
        break
end

--ID Fed Holidays
begin
update #CACFederalReserverHolidays
 set BankHoliday = 'Y', 
    HolidayName = 'New Year''s Day'
    where DATEPART(day,Date) = 1
    and DATEPART(month,Date) = 1
    and DATEPART(Dw,Date) between 2 and 6

update #CACFederalReserverHolidays
     set BankHoliday = 'Y', 
    HolidayName = 'New Year''s Day'
    where DATEPART(day,Date) = 1
    and DATEPART(month,Date) = 1
    and DATEPART(Dw,Date) = 2
end

begin 
-- MLK Day, 3rd Mon in January
update #CACFederalReserverHolidays
 set BankHoliday = 'Y', 
    HolidayName = 'Martin Luther King Day'
    where DATEPART(day,Date) between 15 and 21
    and DATEPART(month,Date) = 1
    and DATEPART(Dw,Date) = 2
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:09:05.580

我认为您可能在 SQL Server（或 Management Studio）中发现了一个实际错误。

这两个 UPDATE 语句：

```
update #CACFederalReserverHolidays
 set BankHoliday = 'Y', 
    HolidayName = 'New Year''s Day'
    where DATEPART(day,Date) = 1
    and DATEPART(month,Date) = 1
    and DATEPART(Dw,Date) between 2 and 6

update #CACFederalReserverHolidays
     set BankHoliday = 'Y', 
    HolidayName = 'New Year''s Day'
    where DATEPART(day,Date) = 1
    and DATEPART(month,Date) = 1
    and DATEPART(Dw,Date) = 2 
```

前两行中似乎有某种无效的空格字符和/或换行符。但是，当我一次扫描一个字符时，我找不到任何应该导致这种情况的 Unicode 值。尽管如此，当我编辑掉所有空格和换行符然后手动重新输入它们时，查询不再出现“无效语法”错误。

我建议你做同样的事情。但首先，我会要求您复制这些行并将它们带到 Microsoft Connect 并将它们作为可能的错误输入。

（实际上，如果您愿意，我很乐意将其输入 MS Connect。）

* * *

我已在此处将其作为 SQL Server 错误输入 Microsoft Connect：[https](https://connect.microsoft.com/SQLServer/feedback/details/775641/ssms-throws-spurious-incorrect-syntax-error) ://connect.microsoft.com/SQLServer/feedback/details/775641/ssms-throws-spurious-incorrect-syntax-error 。随意去那里投票或评论它和/或表明你是否可以自己复制它。

* * *

我刚刚想通了。这是我为 Connect 修改后的帖子，它很好地解释了它：

> 当我在 SSMS 中逐字执行以下文本时：
> 
> ```
> update #CACFederalReserverHolidays
>  set BankHoliday = 0 
> ```
> 
> 它抛出错误“''附近的语法不正确”。据我所知，它应该只是说#temp 表是未定义的。注意：即使定义了#temp 表，它也会引发相同的错误。
> 
> 我从支持论坛上的用户问题中得到了这个（这里： [更新临时表](https://stackoverflow.com/questions/14129706/update-a-temp-table/14130003#14130003)）。将用户的文本剪切并粘贴到我的 SSMS 中，我能够将其缩小到这两行。经过大量的编辑和测试，我发现只有删除第一行和第二行之间的换行符和空格，然后自己重​​新输入，问题才会消失。怀疑一些不可见/无效的字符，然后我引用了文本并逐个字符地检查它：
> 
> ```
> select unicode(substring('update #CACFederalReserverHolidays
>  set BankHolidayX = 0', 35,1)) 
> ```
> 
> 但是查看字符 35、36 和 37，只显示了 Unicode 值 13、10 和 63（CR、LF 和空格）。
> 
> 据我所知，这一定是一个错误，无论是在 Management Studio 中，还是在 SQL Server Parser 本身中。
> 
> 请注意，到目前为止，我只在 SQL Server 2012 上复制了这个，但原始用户从 SQL Server 2008 报告了它。
> 
> * * *
> 
> 好的，我刚刚意识到我上面的检查程序有缺陷，因为我在查看 Unicode 值之前将其转换为 ASCII。当我使用正确的表达式时：
> 
> ```
> select unicode(substring(N'update #CACFederalReserverHolidays
>  set BankHolidayX = 0', 37,1)) 
> ```
> 
> 它显示字符 37 实际上是 Unicode 值 8200。我对此不熟悉，但我认为它是无效的。

* * *

长话短说，似乎SQL代码中的一些空格（特别是后面的`set ..`行前的空格`update..`不是真正的空格（Unicode 63），但实际上是Unicode字符8200（“PUNCTUATION SPACE”，U+ 2008). 显然你需要用空格替换这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:51:22.483

`begin`之后是什么`--ID Fed Holidays`？

那些在那里没有意义。`while`它们只对开始和结束循环有意义。

IDK，如果这是您的问题的原因，但这是我注意到的第一件事

# jquery - 如何使用jQuery按B列过滤A列

> ID：14129710
> 
> 赞同：0
> 
> 时间：2013-01-02T21:47:36.923
> 
> 标签：jquery, jquery-selectors, show-hide

我正在使用显示/隐藏来显示基于它们的类属性的项目组。如何进一步过滤这些项目组，以便在 B 列中单击的第二个结果集是第一个结果集的子集。根据我的阅读，我认为过滤器或兄弟可能是关键，但到目前为止我的实验失败了。

在这里，我将更新所需功能的更多解释：单击第一个列表中的项目以显示该列表的子集。单击第二个列表中的项目以细化前一个子集。例如，在第 1 列中，单击红色以仅查看红色项目。然后在第 2 列中，单击大以仅查看大的红色项目。仍在第 2 列时，单击小以仅查看小的红色项目。应该可以通过这种方式进行过滤，直到单击返回到应该显示该列表的新子集的第一列。

[http://jsfiddle.net/TorontoDave/Ph98L/](http://jsfiddle.net/TorontoDave/Ph98L/)

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
    <html>

    <head>

    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1" />

    <style>
        * {font-family:arial}
        .item div {height:50px; width:50px; color:white; font-weight:bold; float:left; margin:1px; text-align:center}
        .nav {float:left}
         li {float:left; list-style:none; padding-right:30px}
        .item .small {font-size:1em}
        .item .medium {font-size:2em}
        .item .large {font-size:3em}
        .item .red {background:red}
        .item .green {background:green}
        .item .blue {background:blue}
        .item .orange {background:orange}
        .item .purple {background:purple}
    </style>

    <script src="../js/jquery-1.5.2.min.js"></script>

    </head>

    <body>
    <h1>Problem: adjust my jQuery code to get column B to filter on column A?</h1>
    <div class="nav">
    <p>Column A<br>Filter by:</p>
    <ul>
    <li id="A">A</li>
    <li id="red">red</li>
    <li id="green">green</li>
    <li id="large">large</li>
    <li id="small">small</li>
    <li id="B">B</li>
    <li id="orange">orange</li>
    </ul>
    </div>

    <div class="nav">
    <p>Column B<br>Then by:</p>
    <ul>
    <li id="A">A</li>
    <li id="red">red</li>
    <li id="green">green</li>
    <li id="large">large</li>
    <li id="small">small</li>
    <li id="B">B</li>
    <li id="orange">orange</li>
    </ul>
    </div>

    <div class="item">
    <div class="small red A">A</div>
    <div class="small green A">A</div>
    <div class="small orange A">A</div>
    <div class="small purple A">A</div>
    <div class="small blue A">A</div>
    <div class="medium red A">A</div>
    <div class="medium green A">A</div>
    <div class="medium orange A">A</div>
    <div class="medium purple A">A</div>
    <div class="medium blue A">A</div>
    <div class="large red A">A</div>
    <div class="large green A">A</div>
    <div class="large orange A">A</div>
    <div class="large purple A">A</div>
    <div class="large blue A">A</div>
    <div class="small red B">B</div>
    <div class="small green B">B</div>
    <div class="small orange B">B</div>
    <div class="small purple B">B</div>
    <div class="small blue B">B</div>
    <div class="medium red B">B</div>
    <div class="medium green B">B</div>
    <div class="medium orange B">B</div>
    <div class="medium purple B">B</div>
    <div class="medium blue B">B</div>
    <div class="large red B">B</div>
    <div class="large green B">B</div>
    <div class="large orange B">B</div>
    <div class="large purple B">B</div>
    <div class="large blue B">B</div>
    <div class="small red C">C</div>
    <div class="small green C">C</div>
    <div class="small orange C">C</div>
    <div class="small purple C">C</div>
    <div class="small blue C">C</div>
    <div class="medium red C">C</div>
    <div class="medium green C">C</div>
    <div class="medium orange C">C</div>
    <div class="medium purple C">C</div>
    <div class="medium blue C">C</div>
    <div class="large red C">C</div>
    <div class="large green C">C</div>
    <div class="large orange C">C</div>
    <div class="large purple C">C</div>
    <div class="large blue C">C</div>
    </div><!-- //end items -->  

        <script><!-- to show and hide overlays -->
        $(document).ready(function(){
            $('li').click(function(){
                $('.item div').hide();
                $('.'+this.id).show('slow');
            });
        });
    </script>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:04:27.420

~~这个[小提琴](http://jsfiddle.net/Ph98L/1/)会起作用~~

 ~~```
$('li').click(function() {
  var divs = $('item div:visible').add('.' + this.id + ':visible');
  $('.item div').hide();
  divs.show('slow');
}); 
```~~ 

我建议在 this [fiddle](http://jsfiddle.net/Ph98L/3/)中使用闭包，因此您无需`div`在每次点击时重新选择 's。除非它们是动态的。

```
$(document).ready(function() {
  var squares = $('.item div');
  $('li').click(function() {
    var divs = $(':visible', squares).add('.' + this.id + ':visible');
    squares.hide();
    divs.show('slow');
  });
});​ 
```

 ~~根据 OP 的编辑：

这个[小提琴](http://jsfiddle.net/Ph98L/6/)会奏效。

```
$(document).ready(function() {
  var squares = $('.item div');
  var filters = $('.nav').data('filter', null);
  $('li').click(function(){
    $(this).closest('.nav').data('filter', '.' + this.id);
    var f = filters.map(function(){ return $(this).data('filter'); }).toArray();
    squares.hide().filter(f.join('')).show('slow');
  });
});​ 
```

**注意：**按照代码的编写方式，您应该能够添加`n`额外的过滤器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T22:19:10.427

[http://jsfiddle.net/vaX5V/](http://jsfiddle.net/vaX5V/)

我已将 A 列设置为第一个过滤器，然后是 B 列。因此，如果您单击 A 然后 B，您将获得一个过滤器，然后是该子集上的另一个过滤器。

JAVASCRIPT

```
$(document).ready(function() {
    $('li').click(function(e) {
        console.log($(e.target).parents('div').attr('id'));
        if($(e.target).parents('div').attr('id') == 'filter1'){
            $('.item div').hide();
            $('.' + this.id).show('slow');
        }else if($(e.target).parents('div').attr('id') == 'filter2'){
            console.log('.item div.' + this.id);
            var keepShown = $('.item div.' + this.id);
            $('.item div').not(keepShown).hide('slow');    
        }

    });
}); 
```

我使用`keepShown`变量来查找第二组（B 列），然后隐藏第二组中未显示的任何*内容*。

HTML

```
<body>
<h1>Problem: adjust my jQuery code to get column B to filter on column A?</h1>
<div class="nav" id="filter1">
<p>Column A<br>Filter by:</p>
<ul>
    <li id="A">A</li>
    <li id="red">red</li>
    <li id="green">green</li>
    <li id="large">large</li>
    <li id="small">small</li>
    <li id="B">B</li>
    <li id="orange">orange</li>
</ul>
</div>

<div class="nav" id="filter2">
<p>Column B<br>Then by:</p>
<ul>
    <li id="A">A</li>
    <li id="red">red</li>
    <li id="green">green</li>
    <li id="large">large</li>
    <li id="small">small</li>
    <li id="B">B</li>
    <li id="orange">orange</li>
</ul>
</div>

<div class="item">
    <div class="small red A">A</div>
    <div class="small green A">A</div>
    <div class="small orange A">A</div>
    <div class="small purple A">A</div>
    <div class="small blue A">A</div>
    <div class="medium red A">A</div>
    <div class="medium green A">A</div>
    <div class="medium orange A">A</div>
    <div class="medium purple A">A</div>
    <div class="medium blue A">A</div>
    <div class="large red A">A</div>
    <div class="large green A">A</div>
    <div class="large orange A">A</div>
    <div class="large purple A">A</div>
    <div class="large blue A">A</div>
    <div class="small red B">B</div>
    <div class="small green B">B</div>
    <div class="small orange B">B</div>
    <div class="small purple B">B</div>
    <div class="small blue B">B</div>
    <div class="medium red B">B</div>
    <div class="medium green B">B</div>
    <div class="medium orange B">B</div>
    <div class="medium purple B">B</div>
    <div class="medium blue B">B</div>
    <div class="large red B">B</div>
    <div class="large green B">B</div>
    <div class="large orange B">B</div>
    <div class="large purple B">B</div>
    <div class="large blue B">B</div>
    <div class="small red C">C</div>
    <div class="small green C">C</div>
    <div class="small orange C">C</div>
    <div class="small purple C">C</div>
    <div class="small blue C">C</div>
    <div class="medium red C">C</div>
    <div class="medium green C">C</div>
    <div class="medium orange C">C</div>
    <div class="medium purple C">C</div>
    <div class="medium blue C">C</div>
    <div class="large red C">C</div>
    <div class="large green C">C</div>
    <div class="large orange C">C</div>
    <div class="large purple C">C</div>
    <div class="large blue C">C</div>
</div><!-- //end items -->    

</body> 
```~~

# jquery - 在 Plugin 外调用一个 jQuery 插件函数

> ID：14129712
> 
> 赞同：3
> 
> 时间：2013-01-02T21:47:41.633
> 
> 标签：jquery, jquery-plugins

我已经构建了一个 jQuery 插件，但现在我需要在插件之外使用插件中的一个功能。

插件

```
(function ($) {
    jQuery.fn.vierGewinnt = function () {
 var VierGewinnt = function (config) {
            this.view = config.view;    
            this.dx;
            this.turn = 1;
        }
VierGewinnt.prototype.setToken = function (column) {
            for (var i = this.rows; i > 0; i--) {
                if (this.gamearray[column][i] == 0) {
                    this.gamearray[column][i] = "red";    
                    this.turn++;
                    this.findWinner(column, i);
                    break;
                }
            }

        }})(jQuery); 
```

main.js 我试过了：

```
$.setToken()
$.fn.vierGewinnt.setToken()
$.fn.vierGewinnt.VierGewinnt.setToken() 
```

也许有人有线索！提前谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-14T18:48:50.227

您需要做的就是返回函数/插件闭包并创建任何您想要在插件外部控制的方法作为闭包 ($this) 的属性。

```
    $.fn.vierGewinnt = 功能（选项）{

        变量 $this = 这个；

        $this.setToken = function() {
            // 设置令牌
        };

        返回$这个；
    };

```

然后保存对插件的引用，以便稍后调用该方法。

```
    var vierPlugin = $('.some-element').vierGewinnt();
    vierPlugin.setToken(); // 在插件外部设置令牌

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T22:02:49.440

你这样做的方式，你不能从外面调用它。

有一些模式可以让您制作 js/jquery 小部件。

您正在尝试将“正常”原型与 jQuery 结合起来。

如我所见，您有两个选择。

1.  包装您的 jQuery 方法以返回构造函数的实例。您可以在其上调用原型方法。就像是：

    ```
    $.fn.vierGewinnt = function(config){ 
        return new VierGewinnt (config); 
    }; 
    ```

    然后你可以实例化插件并调用方法

    ```
    var plugin = $('#someSelector').vierGewinnt();
    plugin.setToken(column); 
    ```

    在这种情况下，几乎所有代码都可以超出`(function ($)`块。您只是使用 jQuery 作为包装器，其他一切都只是普通的 javascript。据我所知，您的插件没有在任何 DOM 元素上调用。在那种情况下，我在 jQuery 插件中看不到太多意义......它是纯 javascript。如果是这种情况，只需从您的示例中删除所有 jQuery 内容，它就会起作用。

2.  使用不同的插件模式。就我个人而言，我喜欢 jQueryUI 小部件工厂方法，但您必须为其包含 jQueryUI。[文档](http://wiki.jqueryui.com/w/page/12138135/Widget%20factory)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-12T12:26:17.550

注意：使公共 setter 函数返回 '$this'：

```
this.setToken1 = function() {
  // setting token
  return $this;
};

this.setToken2 = function() {
  // setting token
  return $this;
}; 
```

允许使用 jQuery 风格的链接：

```
vierPlugin.setToken1().setToken2(); 
```

# java - 从文本文件Java读取行？

> ID：14129713
> 
> 赞同：2
> 
> 时间：2013-01-02T21:47:40.793
> 
> 标签：java, file

所以我是 Java 新手，我正在尝试的一切都不起作用。从文件中读取有很多不同的方法，所以我想知道最简单的方法。基本上，它是一个 Mad Libs 应用程序。一种方法。我一直在尝试成功运行它，但`file.close()`函数出现错误。如果我把它拿走，我会得到`FileNotFoundException errors`。所以我有点迷路了。我应该改变什么？

```
public static void main(String[] args) throws Exception {
    String[] nouns = new String[4];
    String[] verbs = new String[6];
    String[] adjectives = new String[7];
    Scanner s = new Scanner(System.in);
    System.out.println("Please input 4 nouns, press \"Enter\" after each input.");
    for(int i=0; i<4; i++){
        nouns[i] = s.next();
    }
    System.out.println("Please input 6 verbs, press \"Enter\" after each input.");
    for(int i=0; i<6; i++){
        verbs[i] = s.next();
    }
    System.out.println("Please input 7 adjectives, press \"Enter\" after each input.");
    for(int i=0; i<7; i++){
        adjectives[i] = s.next();
    }
    File file = null;
    FileReader fr = null;
    LineNumberReader lnr = null;

    try {
        file = new File("H:\\10GraceK\\AP Computer Science\\Classwork\\src\\madlib.txt");
        fr = new FileReader(file);           
        lnr = new LineNumberReader(fr);
        String line = "";           
        while ((line = lnr.readLine()) != null) {
            System.out.println(line);               
        }
    } finally {
        if (fr != null) {
            fr.close();
        }
        if (lnr != null) {
            lnr.close();
        }
    }
} 
```

好的，我修复了异常。现在文件中的文本读取动词 [0] 和类似的东西，但它实际上输出动词 [0]，而不是数组中的单词。如何将数组中的字符串附加到读取的字符串？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T21:54:02.560

该方法`close`未定义`File`。改为使用`FileReader.close`。代替

```
file.close(); 
```

和

```
fr.close(); 
```

事实上，平仓`LineNumberReader`就足够了，因为这将平仓底层证券`FileReader`。您可以将其`close`放在一个`finally`块中。看这个[例子](http://www.javadb.com/using-the-linenumberreader-class)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T21:58:32.437

与往常一样，在读取文件和流时，我必须推荐[commons-io 。](http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html)

尝试使用例如：

```
IOUtils.readLines 
```

您的代码中的错误是@Reimeus 提到了缺少的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T22:11:54.253

Scanner API 得到了改进，变得更加简单：

```
try {
    Scanner sc = new Scanner(new File("text.txt"));
    sc.useDelimiter(System.getProperty("line.separator"));
    String ln = sc.next();

} catch (FileNotFoundException ex) {
    Logger.getLogger(this.class.getName()).log(Level.SEVERE, null, ex);
} 
```

# twitter-bootstrap - 为什么 Twitter Bootstrap 让我有超过 12 列？

> ID：14129715
> 
> 赞同：4
> 
> 时间：2013-01-02T21:47:47.023
> 
> 标签：twitter-bootstrap

我有一个容器，里面有 2 个 div：`span9`和`span3`. 在我的`span9`div 中，我希望仅限于 9 列。但是，除非我将 div 中的设置`span9`为 a `span12`，否则它会留下 3 个额外的空白列！

为什么会发生这种情况？对我来说，“span9”应该意味着我有 9 列可用。我根本看不到任何我正在使用的东西会导致该内容被允许重置为网格中的 12 列。零意义。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-25T11:05:31.780

请注意，这不适用于 Bootstrap 3，因为您可以混合和匹配列类，因此类名中的数字不必加起来为 12。例如，这里是“混合：移动和桌面”的代码“[示例网格页面](http://getbootstrap.com/examples/grid/)上的示例：

```
<div class="row">
  <div class="col-xs-12 col-sm-6 col-lg-8">...</div>
  <div class="col-xs-6 col-lg-4">...</div>
</div> 
```

如您所见，尝试将列加起来等于 12 的概念甚至在 Bootstrap 3 中都没有意义。如果您查看 bootstrap.css 内部，您会发现列类只是相对于容器 div 的百分比，例如：

```
.col-sm-6 {
  width: 50%;
} 
```

在这种情况下，如果容器的宽度为 1170px，那么每个`col-sm-6`div 的宽度将等于 1170px 的 50%（为简单起见，我们忽略行的 -15px 侧边距），无论该行中有多少列。如果有更多的列不能容纳在容器中，那么这些列将自动换行。如果您的某些列非常高，那么您可能希望`<div class="clearfix"></div>`结合使用`visible-*`or`hidden-*`类来确保一致的行高。

参考：[Boostrap 3 Grid 系统](http://getbootstrap.com/css/#grid)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-02T23:24:55.083

除了@firtive 的评论，嵌套列的代码对于默认响应（非流体）网格或流体网格是不同的。

使用默认网格，使用**class="row"**并且在您的情况下嵌套列的数量确实应该总计 9（其父级的列数）。这是因为列具有固定的宽度。

对于流体网格，使用**class="row-fluid"**并且嵌套列的数量应加起来为 12。这是因为列宽会根据其父级宽度的百分比而变化。

源[引导文档](http://bit.ly/ZcZ2lw)

请参阅下面的示例。

希望这可以帮助

**默认的非流体示例，** [请现场观看](http://jsfiddle.net/panchroma/gBhjh/)

```
<div class="row">

 <div class="span9">

  <div class="row"> <!-- start nested row -->  

    <div class="span6">nested col</div>
    <div class="span3">nested col</div>  

  </div>           <!-- end nested row -->

</div> <!-- end span 9 parent  -->

<div class="span3">
span 3
</div>

</div> <!-- end row --> 
```

**流体网格示例** [现场观看](http://jsfiddle.net/panchroma/Y33XL/)

```
<div class="row-fluid">

  <div class="span9">

    <div class="row-fluid"> <!-- start nested fluid row -->  

      <div class="span6">nested col</div>
      <div class="span6">nested col</div>  

    </div>                 <!-- end nested fluid row -->

  </div> <!-- end span 9 parent -->

  <div class="span3">span 3</div>
</div> <!-- end row --> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T21:52:38.897

您需要考虑分数：`span1`并不意味着一列，它意味着 1/12 列，而`span12`意味着 12/12 列。`Span12`表示包含元素中的单个列，如果需要可以细分 12 次。

因此，如果您想要两列，则将两个 div 与`<div class="span6">`.

# java - 从 Java 启动一个新的操作系统进程

> ID：14129717
> 
> 赞同：0
> 
> 时间：2013-01-02T21:47:55.290
> 
> 标签：java, class, process, main

> **可能重复：**
> [Java - C-Like Fork？](https://stackoverflow.com/questions/287633/java-c-like-fork)

我有一个静态的 void main ：

```
ScreenStarter.main(clients.get(i).getSocket(), clientips.get(i)); 
```

在 ScreenStarter 中，我有另一个静态 void main 我调用以下内容：

```
public static void main(Socket sock, String ip) throws IOException{
    new ClientConn(sock, ip).start();
} 
```

是否可以将 ScreenStarter 作为单独的进程启动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:55:14.623

首先，您需要添加一个名为

```
public static void main(String[] args) 
```

它可以调用您当前的 ScreenStarter.main()。然后使用[java.lang.Runtime](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html)`exec()`中的一种方法。或者，您可以使用[java.lang.ProcessBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)生成第二个进程。有关描述两者之间差异的教程，请参阅[本文。](http://www.java-tips.org/java-se-tips/java.util/from-runtime.exec-to-processbuilder.html)

# actionscript-3 - AS3文件类麻烦

> ID：14129721
> 
> 赞同：0
> 
> 时间：2013-01-02T21:48:07.507
> 
> 标签：actionscript-3, flash-cs6

我今天才开始在 flash cs6 中使用文档类...

所以我学会了如何将东西放在舞台上并移除它......但如果我制作它的链条它并没有真正起作用并且在这里给我一个错误，这就是我的意思......

```
 public var playbtn:SimpleButton;
    public var loadbtn:SimpleButton;
    public var backbtn:SimpleButton;

        public function SkoolBook() {

            playbtn = new play_button;
            addChild(playbtn);
            playbtn.x=200;
            playbtn.y=200;

            playbtn.addEventListener(MouseEvent.CLICK, playbutton);

            function playbutton (MouseEvent) {
                removeChild (playbtn);
                loadbtn = new load1;
                addChild(loadbtn);
                loadbtn.x=500;
                loadbtn.y=500;

            loadbtn.addEventListener(MouseEvent.CLICK, loadbutton);
                  function loadbutton (MouseEvent) {
                removeChild (loadbtn);
                backbtn = new back_button;
                addChild(backbtn);
                backbtn.x=500;
                backbtn.y=500;
        }

            } 
```

* * *

所以嗯，是的，我只想要一个简单的事件，如果我点击播放按钮，该按钮消失并且加载按钮出现..如果我点击加载按钮，那么我的第一阶段就会出现......

这里有什么我误解了......为什么这会给我一个错误？

有人可以解释一下如何在文档类中准确执行序列....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:56:50.880

这应该这样做。
如果不发布错误。

```
package{
  import flash.events.MouseEvent;

  public class SkoolBook{
    public var playbtn:SimpleButton = new play_button();
    public var loadbtn:SimpleButton = new load1();
    public var backbtn:SimpleButton = new back_button();

      public function SkoolBook() {
          addChild(playbtn);
          playbtn.x=200;
          playbtn.y=200;

          playbtn.addEventListener(MouseEvent.CLICK, playbutton);
      }
      public function playbutton (evt:MouseEvent) {
            removeChild (playbtn);
            addChild(loadbtn);
            loadbtn.x=500;
            loadbtn.y=500;
            loadbtn.addEventListener(MouseEvent.CLICK, loadbutton);
      }
      public function loadbutton (evt:MouseEvent) {
            removeChild (loadbtn);
            addChild(backbtn);
            backbtn.x=500;
            backbtn.y=500;
            // don't forget to add the backbtn function
            //backbtn.addEventListener(MouseEvent.CLICK, XXXXXXXX);
    } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:53:50.123

`MouseEvent`你会因为在你的函数定义中独自一人而得到错误：

```
function playbutton (MouseEvent) 
```

应该：

```
function playbutton (mEvent:MouseEvent) 
```

这样，您的函数`playbutton`就有了一个名称 ( `mEvent`) 来表示`MouseEvent`传递给它的实例。您必须为`function loadbutton (MouseEvent)`.

如果您继续遇到错误，请提供更多描述性并包含错误文本，以便更容易提供帮助：]

# asp.net-mvc - 将 Linq 改进为具有未映射属性的实体查询

> ID：14129733
> 
> 赞同：2
> 
> 时间：2013-01-02T21:48:46.493
> 
> 标签：asp.net-mvc, entity-framework, linq-to-entities, iqueryable

在将查询发送到服务器以检索过滤结果之前，我有很多问题要正确构建查询，首先我正在查询订单的空洞结果集，然后在尝试时应用具有计算属性的订单项目过滤器重构以仅获取与项目条件匹配的订单集，当然我得到了错误：LINQ to Entities 不支持指定的类型成员“ReceivableQuantity”。仅支持初始化程序、实体成员和实体导航属性。在工作代码下方：

```
pendingOrders = from o in this.GetAll()
                where o.OrderItems.Where(i => i.ReceivableQuantity > 0).Count() > 0
                select new Order()
                {
                       OrderNumber = o.OrderNumber,
                       Comments = o.Comments,
                       FinalApprover = o.FinalApprover,
                       OrderDate = o.OrderDate,
                       Requisitioner = o.Requisitioner,
                       SupplierName = o.SupplierName,
                       ID = o.ID,
                       ShoppingCartName = o.ShoppingCartName,
                       OrderItems = (from i in o.OrderItems 
                                     where i.ReceivableQuantity > 0
                                     select i).OrderBy(i => i.LineNumber).ToList()
                }; 
```

这是 OrderItem 类中的 NotMapped 属性：

```
 [NotMapped]
    public decimal ReceivableQuantity
    {
        get
        {
            if (Order == null)
                return 0;

            decimal response;
            response = this.MatchedQuantity - this.ReceivedQuantity;

            if (response >= 0)
                return response;
            else
                throw new ArgumentOutOfRangeException("Receivable Quantity must be greater than 0.");
        }
    } 
```

MatchedQuantity 和 ReceivedQuantity 也是 NotMapped 属性，所以我认为这确实在扩展。

我应该使用什么最好的方法，现在使用它的网站已经在运行，并且随着数据库每天都在增长，使用代码的功能变得非常缓慢。

在此先感谢您的帮助。廖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:49:30.003

我猜你正在使用代码优先映射。这种方法在高级查询方面非常有限，因为它仍然不支持 SQL 函数映射。因此，您有以下选择：

*   将所有未映射属性的整个计算直接放入 Linq-to-entities 查询中。这会使您的查询非常讨厌。
*   摆脱该查询并使用两个存储过程 - 第一个获取与您的条件匹配的所有订单，第二个获取与您的条件匹配的所有订单的所有订单项。您可以使用`Database.SqlQuery`.
*   不要使用 EF 并直接使用 SQL 执行查询。在这种情况下，您甚至可以使用一个 SQL 命令和两个查询，或者一个存储过程和两个查询。

# c++ - 在 C++ 中迭代地图时发出 SIGSEGV 信号

> ID：14129737
> 
> 赞同：0
> 
> 时间：2013-01-02T21:49:06.740
> 
> 标签：c++, map, iterator, segmentation-fault

我试图解决这个问题大约 5 天，但没有运气，我尝试的每个解决方案都失败了。

我在下面找到了 SIGSEGV 的一些原因，但没有任何帮助 [什么是 C++ 中的 SIGSEGV 运行时错误？](https://stackoverflow.com/questions/1564372/what-is-sigsegv-run-time-error-in-c/)

好的，这里是代码。我有 2 个实例，其中包含一些关键字特征及其分数

我想得到他们的欧几里德距离，这意味着我必须保存每个实例的所有关键字，然后找到第一个关键字与第二个关键字的差异，然后找到第二个关键字的差异实例。我想要的是在迭代第一个地图时，能够从第二个地图中删除元素。由于我们有两个消息集合，因此多次调用以下方法，并且将来自第一个的每条消息与来自第二个的每条消息进行比较。

我有这段代码，但是它突然停止了，尽管我检查了它在某些地方放置了多个 cout 的情况下工作了几秒钟

请注意，这是针对大学任务的，因此我不能使用 boost 和所有这些技巧。但我想知道绕过我遇到的问题的方法。

```
float KNNClassifier::distance(const Instance& inst1, const Instance& inst2) {   
map<string,unsigned> feat1;
map<string,unsigned> feat2;
for (unsigned i=0; i<inst1.getNumberOfFeatures(); i++) {
  feat1[inst1.getFeature(i)]=i;
}
for (unsigned i=0; i<inst2.getNumberOfFeatures(); i++) {
  feat2[inst2.getFeature(i)]=i;
}
float dist=0;

map<string,unsigned>::iterator it;
for (it=feat1.begin(); it!=feat1.end(); it++) {
  if (feat2.find(it->first)!=feat2.end()) {//if and only if it exists in inst2
    dist+=pow( (double) inst1.getScore(it->second) - inst2.getScore(feat2[it->first]) , 2.0);
    feat2.erase(it->first);
  }
  else {
    dist+=pow( (double) inst1.getScore(it->second) , 2.0);
  }
}

for (it=feat2.begin(); it!=feat2.end(); it++) {//for the remaining words
  dist+=pow( (double) inst2.getScore(it->second) , 2.0);
}
feat1.clear(); feat2.clear(); //ka8arizoume ta map gia thn epomenh xrhsh
return sqrt(dist);    
} 
```

我也尝试了这个想法，以便不必删除某些东西，但它也突然停止了。

```
float KNNClassifier::distance(const Instance& inst1, const Instance& inst2) {
map<string,unsigned> feat1;
map<string,unsigned> feat2;
map<string,bool> exists;
for (unsigned i=0; i<inst1.getNumberOfFeatures(); i++) {
  feat1[inst1.getFeature(i)]=i;
}
for (unsigned i=0; i<inst2.getNumberOfFeatures(); i++) {
  feat2[inst2.getFeature(i)]=i;
  exists[inst2.getFeature(i)]=false;
  if (feat1.find(inst2.getFeature(i))!=feat1.end()) {
    exists[inst2.getFeature(i)]=true;
  }
}
float dist=0;
map<string,unsigned>::iterator it;
for (it=feat1.begin(); it!=feat1.end(); it++) {
  if (feat2.find(it->first)!=feat2.end()) {
    dist+=pow( (double) inst1.getScore(it->second) - inst2.getScore(feat2[it->first]) ,      2.0);
  }
  else {
    dist+=pow( (double) inst1.getScore(it->second) , 2.0);
  }
}

for (it=feat2.begin(); it!=feat2.end(); it++) {
  if(it->second==false){//if it is true, it means the diff was done in the previous iteration
    dist+=pow( (double) inst2.getScore(it->second) , 2.0);
  }
}

feat1.clear(); feat2.clear(); exists.clear();
return sqrt(dist);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:53:48.190

代码本身似乎没问题（我认为我之前发现的错误不是一个）。但是，可能有更简单的方法：

1.  与其在第二组中从第一组中查找字符串，不如同时在两个列表中移动并将迭代器推进到较小的元素或两个迭代器（如果它们使用相同的字符串）。在每种情况下都直接进行相应的计算。
2.  我个人会`std::vector<std::pair<std::string, unsigned int> >`为此使用两个排序的，但`std::map<std::string, unsigned int>`也可以。

我无权访问您的`Instance`课程，因此没有对其进行测试，但类似下面的内容应该可以工作。

```
struct compare1st {
    bool operator()(std::pair<std::string, unsigned int> const& p1,
                    std::pair<std::string, unsigned int> const& p2) const {
        return p1.first < p2.first;
    }
};

std::vector<std::pair<std::string, unsigned int> > fill(Instance const& inst) {
    std::vector<std::pair<std::string, unsigned int> > rc;
    for (unsigned int i(0), end(inst.getNumberOfFeatures()); i != end; ++i) {
        rc.push_back(std::make_pair(inst.getFeature(i), i));
    }
    std::sort(rc.begin(), rc.end(), compare1st());
    return rc;
}
double square(double d) { // pow(d, 2.0) is fairly expensive
    return d * d;
}

float KNNClassifier::distance(const Instance& inst1, const Instance& inst2) {   
    typedef std::pair<std::string, unsigned int> Pair;
    std::vector<Pair> feat1 = fill(inst1);
    std::vector<Pair> feat2 = fill(inst2);

    std::vector<Pair>::const_iterator it1(feat1.begin()), end1(feat1.end());
    std::vector<Pair>::const_iterator it2(feat2.begin()), end2(feat2.end());
    double result(0.0);
    while (it1 != end1 && it2 != end2) {
        if (it1 != end1 && (it2 == end2 || it1->first < it2->first)) {
            result += square(inst1.getScore((it1++)->second);
        }
        else if (it2 != end2 && (it1 == end1 || it2->first < it1->first))
            result += square(inst2.getScore((it2++)->second);
        }
        else {
            result += square(inst1.getScore((it1++)->second)
                             -  inst2.getScore((it2++)->second);
        }
    }
    return sqrt(result);
} 
```

# ruby - 使用 ruby 脚本直接连接到数据库

> ID：14129740
> 
> 赞同：0
> 
> 时间：2013-01-02T21:49:18.687
> 
> 标签：ruby, dbi, sequel

我正在使用 Heroku 和 Ruby on Rails。但是，我的应用程序的数据必须从不同的数据库中复制。最初我在 perl 中创建了脚本，但我发现我无法在 Heroku 实例上轻松安装 DBI perl 模块。

所以现在我正在尝试创建一个 ruby​​ 脚本，然后在 Heroku Scheduler 上设置它以将一部分信息复制到 heroku 数据库，以便我运行我的应用程序。

我不确定我可以将哪个 gem 用于我的脚本。我发现[Sequel](http://sequel.rubyforge.org/)已经有一段时间没有做任何工作了。以及[ruby​​-DBI](http://rubyforge.org/projects/ruby-dbi/)，这似乎已在 2009 年更新。还有其他我可以使用的宝石，还是使用上述其中一种更好。我将使用的两个数据库都是 Postgres。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T22:05:04.713

续集gem 最近提交了 15 天[。](https://github.com/jeremyevans/sequel)这可能是你最好的选择。

# java - 字符串之间的比较出错

> ID：14129742
> 
> 赞同：1
> 
> 时间：2013-01-02T21:49:30.030
> 
> 标签：java, android

我有一个生成电话位置的类，它会在每次检索到新位置时更新一个 TextView。我们将这个类命名为 Track。

Track 类包含一个 sendLocation 对象，它是一个 Thread。sendLocation 包含一个 Track 对象，它每 x 一次检查 TextView 是否已更改（Track 类有一个返回 TextView 字符串的方法），如何？

它将最后一个地址保存在一个字符串中，并每 x 次比较最后一个地址和文本视图地址，如果它们不同，它会将这个字符串发送到我的数据库。我这样做是为了避免重复。

我的问题是，它为什么一直向我的数据库发送相同的地址？我的意思是比较字符串非常简单。这是一些代码：

```
if(!t1.getAddress().equals(lastAddress))
{
    lastAddress = t1.getAddress();
    //send last address to the db
    //sleep for a while
} 
```

t1 是一个 Track 实例。

这是 Track 中的 getAddress 方法：

```
public String getAddress()
{
    return this.mAddress.getText().toString();
} 
```

怎么了？这是一个简单的字符串比较！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:54:17.343

两种可能的解决方案

*   使用`UNIQUE`数据库中的列（因此它不会包含重复的数据）
*   调试代码行`...equals(...`，看看字符串是否真的不同

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T21:57:56.620

我不确定这在多大程度上适用于 Andriod 开发，但在常规 Java 世界中，当您遇到此类问题时，这意味着您的线程具有变量的本地副本，并且您开始将成员定义为 volatile。在您的情况下，我不相信对跟踪对象的引用会更新，但您可以尝试看看将该引用定义为 volatile 是否会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T22:02:46.383

你可能有一个[种族规则](http://en.wikipedia.org/wiki/Race_condition)。比较时，保存的变量`lastAddress`仍未更新为最新值。

在多线程程序中，不同的线程保存相同共享变量的副本以提高效率。此副本将不时更新，但不保证您的所有线程每次访问时都会看到相同的值。为此，您必须`synchronized`在更新/读取变量的块中使用，或将其设置为`volatile`，使所有线程指向相同的变量值，而不是拥有自己的副本。

* * *

**编辑：**

一个很好的链接来了解更多关于你可能发生的事情：[线程故事：易失性和同步](http://java.dzone.com/articles/threading-stories-volatile-and?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3a%20javalobby/frontpage%20%28Javalobby%20/%20Java%20Zone%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T21:59:43.793

lastAddress **= t1.getAddress();之后** 如果 lastAddress 是相同的值，

你这条线有问题，

**!t1.getAddress().equals(lastAddress))** 所以你应该调试这一行

手表

最后地址

t1.getAddress()

# visual-c++ - 带有 PCL 库的 VS2012 中的链接错误 LNK2020 和 2001 Visual C++

> ID：14129743
> 
> 赞同：0
> 
> 时间：2013-01-02T21:49:40.193
> 
> 标签：visual-c++, visual-studio-2012, linker-errors, lnk, point-cloud-library

我正在尝试使用 Open Point Cloud 库来对齐点云。我使用 Visual Studio 2012 并创建了一个新的 Visual c++ 项目。存储PCL的所有.libs的目录添加到项目的属性中（属性-> c/c++->通用->附加包含目录）我要使用的库列在属性->链接器->输入 -> 附加依赖项

我写到现在的代码很简单：

```
#include <iostream>
#include <pcl/io/pcd_io.h>
#include <pcl/point_types.h>
#include <pcl/point_cloud.h>

int main(int argc, char** argv)
{
    //creates a PointCloud<PointXYZ> boost shared pointer and initializes it
    pcl::PointCloud<pcl::PointXYZ>::Ptr cloud_src (new pcl::PointCloud<pcl::PointXYZ>); 
    //load Pointsclouds from PCD-Files       
    pcl::io::loadPCDFile<pcl::PointXYZ> ("pcd_ascii.pcd", *cloud_src); // <- at this point the error occurs
} 
```

我只是按照本教程： http: [//pointclouds.org/documentation/tutorials/reading_pcd.php](http://pointclouds.org/documentation/tutorials/reading_pcd.php)

我包含了正确的库和文件……尤其是“pcd_io.h”，为什么会出现链接器错误？我要加载的 pcd 文件与 cpp 文件位于同一文件夹中。我是否以错误的方式处理库？

Link-Errors Fehler 28 错误 LNK2020: Nicht aufgel÷stes Token (0A000C90) "void __cdecl pcl::console::print(enum pcl::console::VERBOSITY_LEVEL,char const *,...)" (?print@控制台@pcl@@$$FYAXW4VERBOSITY_LEVEL@12@PBDZZ）。D:\Documents\\Code\PCL_cpp\pcl_cpp\pcl_cpp\pcl_registration.obj pcl_cpp

Fehler 29 错误 LNK2020：Nicht aufgel÷stes 令牌 (0A000CBD) “void __cdecl pcl::console::print(enum pcl::console::VERBOSITY_LEVEL,char const *,...)” (?print@console@pcl@ @$$FYAXW4VERBOSITY_LEVEL@12@PBDZZ）。D:\Documents\代码\PCL_cpp\pcl_cpp\pcl_cpp\pcl_registration.obj pcl_cpp

Fehler 30 错误 LNK2001: Nicht aufgel÷stes externes Symbol ""public: virtual int __thiscall pcl::PCDReader::readHeader(class std::basic_string,class std::allocator > const &,struct sensor_msgs::PointCloud2 &,class Eigen ::Matrix &,class Eigen::Quaternion &,int &,int &,unsigned int &,int)" (?readHeader@PCDReader@pcl@@UAEHABV?$basic_string@DU?$char_traits@D@std@@V ?$allocator@D@2@@std@@AAUPointCloud2@sensor_msgs@@AAV?$Matrix@M$03$00$0A@$03$00@Eigen@@AAV?$Quaternion@M$0A@@8@AAH4AAIH@Z) ”。D:\Documents\代码\PCL_cpp\pcl_cpp\pcl_cpp\pcl_registration.obj pcl_cpp

Fehler 31 错误 LNK2001: Nicht aufgel÷stes externes Symbol ""public: virtual int __thiscall pcl::PCDReader::read(class std::basic_string,class std::allocator > const &,struct sensor_msgs::PointCloud2 &,class Eigen ::Matrix &,class Eigen::Quaternion &,int &,int)" (?read@PCDReader@pcl@@UAEHABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2 @@std@@AAUPointCloud2@sensor_msgs@@AAV?$Matrix@M$03$00$0A@$03$00@Eigen@@AAV?$Quaternion@M$0A@@8@AAHH@Z)"。D:\Documents\代码\PCL_cpp\pcl_cpp\pcl_cpp\pcl_registration.obj pcl_cpp

Fehler 32 错误 LNK2001: Nicht aufgel÷stes externes Symbol ""void __cdecl pcl::console::print(enum pcl::console::VERBOSITY_LEVEL,char const *,...)" (?print@console@pcl@@ $$FYAXW4VERBOSITY_LEVEL@12@PBDZZ)"。D:\Documents\Code\PCL_cpp\pcl_cpp\pcl_cpp\pcl_registration.obj pcl_cpp

错误是德语“Nicht aufgelöstes”的意思是未解决根据您关于正确安装的评论...我不舒尔，所以我再次下载并安装了它。它是 64 位“Windows MSVC 2010（64 位）”的完整安装程序，安装后我得到相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:51:36.403

首先检查所有编译器和库是否具有相同的 32 位或 64 位版本。

您需要从外部链接这些库：

```
/LIBPATH:"C:\Program Files (x86)\PCL 1.6.0\lib" "pcl_common_debug.lib" "pcl_io_debug.lib"     pcl_common_release.lib" "pcl_features_release.lib" 
```

您可以将此行添加到您的：

```
project>properties>commandline 
```

# javascript - 我怎样才能得到一些链接

> ID：14129744
> 
> 赞同：-2
> 
> 时间：2013-01-02T21:49:44.210
> 
> 标签：javascript, jquery

我在jquery中有一些问题

我有一个问题是如何获取一些链接

我只想从桌子上

```
id=1293399
id=609876
id=6789234
id=3421 
```

以下链接中

```
href="/inedx.php?form=11732&id=1293399&min=info_custom
href="/inedx.php?form=11732&id=609876&min=info_custom
href="/inedx.php?form=11732&id=6789234&min=info_custom
href="/inedx.php?form=11732&id=3421&min=info_custom 
```

对此进行了实验，但我无法正确获取它们

```
<script>
    $(function(){
        $("#ABC tr").each(function(){
        var A = $(this).find('td:nth-child(1)').find('a').attr("href");
        var B = $(A).match(/[\d]+/d);
        alert(B);
        });
    });
</script>

<body> 
<table id='ABC' border='2'>
<tr>
<td><a href='href="/inedx.php?form=11732&id=1293399&min=info_custom'>AAAy</a></td>
<td>BBB</td>
<td>CCC</td>
</tr>
<tr>
<td><a href='href="/inedx.php?form=11732&id=609876&min=info_custom'>AAAy</a></td>
<td>BBB</td>
<td>CCC</td>
</tr>
<tr>
<td><a href='href="/inedx.php?form=11732&id=6789234&min=info_custom'>AAAy</a></td>
<td>BBB</td>
<td>CCC</td>
</tr>
<tr>
<td><a href='href="/inedx.php?form=11732&id=3421&min=info_custom'>AAAy</a></td>
<td>BBB</td>
<td>CCC</td>
</tr>
</table>
</body> 
```

我怎么才能得到这个

```
id=1293399
id=609876
id=6789234
id=3421 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:58:54.557

```
var A = "...",
    link = A,
    num = link.match(/id=(\d+)/);
num[0];  //"id="+number
num[1];  //only number

var B = num[0];
//Hey I just met you,
//and this is crazy,
//But here's your B,
//so use it maybe. :D 
```

医疗器械网络：[`String.match`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)

现场演示：*[`http://jsfiddle.net/zBspF/`](http://jsfiddle.net/zBspF/)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:17:12.530

这是另一个不依赖于位置 id 参数的答案：

```
$(function() {
    $("#ABC tr").each(function() {
        var url = $(this).find('td:nth-child(1)').find('a').attr("href");
        alert("id="+getURLParam("id", url));
    });
});

function getURLParam(name, url) {
    name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
    var regexS = "[\\?&]" + name + "=([^&#]*)";
    var regex = new RegExp(regexS);
    var results = regex.exec(url);
    if (results == null) return "";
    else return results[1];
}​ 
```

**小提琴：http:** [//jsfiddle.net/44rFm/1/](http://jsfiddle.net/44rFm/1/)

**注意：从**[http://www.netlobo.com/url_query_string_javascript.html](http://www.netlobo.com/url_query_string_javascript.html) 中给出的 gup() 函数的实现中借用的逻辑

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T22:54:16.707

`attr()`返回属性值，`A`href 字符串也是如此。`$(A)`然后会使用 href 字符串作为 jquery 选择器来查找节点——这肯定不是你想要做的。

我会将正则表达式匹配行更改为：

```
var B = A.match(/id=\d+/); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T22:00:29.303

这是一个有点hacky的方法

```
var B= "id="+A.split("&id=")[1].split("&")[0]; 
```

js小提琴：http: [//jsfiddle.net/uGrPT/](http://jsfiddle.net/uGrPT/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T22:07:17.927

```
$(function() {
    $('a').each(function() {
    var href = $(this).attr('href');
  /*var id = href.substring(href.indexOf('&') + 1, href.lastIndexOf('&'));*/
    var id = href.match(/id=\d+/g);
    $('body').append(id).append('<br>') //append to body
   //alert(id)
   })
}); 
```

[jsfiddle](http://jsfiddle.net/BYEV9/7/)

# vba - 使用 A 列中的空白单元格命名多个范围以定义范围大小

> ID：14129751
> 
> 赞同：0
> 
> 时间：2013-01-02T21:50:18.473
> 
> 标签：vba, loops, excel, range

首先，我是新手，所以如果我看起来很无知或者我的请求格式不正确，请原谅我。

我有一个从 ERP 系统导出的电子表格。A 列包含一个零件编号，后跟不同数量的空白行（行数取决于 B 到 H 列中的数据量）。

我需要做的是命名一个范围，该范围从 A 列中包含零件号的第一个单元格开始，并延伸到 A 列中包含下一个零件号的单元格之前的最后一个空白单元格。例如 A1:H10 如果 A11 包含第二个部件号。

然后我想循环代码，以便它命名从部件号 2 到部件号 3 上方的空白单元格的数据范围，依此类推（包含大约 2000 个填充行和 150-200 个 PN）。

我很确定我可以编写其余的代码，我只是不知道如何选择适当的行数。

我将不胜感激任何建议。

谢谢

皮特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:09:44.467

根据我对您所写内容的了解，我想出了这个简短的子句，至少应该使您朝着正确的方向前进：

```
Sub test()

Dim FirstCell As Range
Dim TargetRange As Range
Dim NameCounter As Integer

Set FirstCell = Range("A1")
NameCounter = 1

  Do
     Set TargetRange = Range(FirstCell, FirstCell.End(xlDown).Offset(-1, 7))
     TargetRange.Name = "Name_" & NameCounter
     Set FirstCell = FirstCell.End(xlDown)
     NameCounter = NameCounter + 1
  Loop Until FirstCell.Row > 1000000

End Sub 
```

你要求的主要部分`Set TargetRange = Range(FirstCell, FirstCell.End(xlDown).Offset(-1, 7))`

希望有帮助

# java - 将 TextView 设置为 TableRow，IllegalStateException - Android

> ID：14129752
> 
> 赞同：0
> 
> 时间：2013-01-02T21:50:25.367
> 
> 标签：java, android, textview, tablerow, illegalstateexception

我正在尝试使用 SQLite 为我的琐事游戏实现一个高分表。我评论了我正在进入我的代码的错误。

我没有在其他任何地方使用错误中提到的那些视图，所以我不知道为什么会收到该错误。

高分.java

```
public class Highscores extends Activity {

    DatabaseHelper dh;
    SQLiteDatabase db;
    Cursor percentages, scores;
    TableLayout table;
    TableRow rowHeader, row1, row2, row3, row4, row5, row6, row7, row8, row9, row10;
    TextView rank, percentage, score;
    Button btn1;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.highscoresmain);

        dh = new DatabaseHelper(this);
        db = dh.openDB();
        percentages = dh.getPercentage(db);
        scores = dh.getScore(db);

        Button btn1 = (Button)findViewById(R.id.homeBtn);

        TableRow rowHeader = (TableRow)findViewById(R.id.rowHeader);
        TableRow row1 = (TableRow)findViewById(R.id.row1);

        TextView rank = (TextView)findViewById(R.id.rank);
        TextView percentage = (TextView)findViewById(R.id.percentage);
        TextView score = (TextView)findViewById(R.id.score);

        TextView r1r = (TextView)findViewById(R.id.r1r);
        TextView r1p = (TextView)findViewById(R.id.r1p);
        TextView r1s = (TextView)findViewById(R.id.r1s);

        rank.setText("TEST - COLUMN RANK");
        percentage.setText("TEST - COLUMN PERCENTAGE");
        score.setText("TEST - COLUMN SCORE");
        r1r.setText("test..rank");
        r1p.setText("teset...percentage");
        r1s.setText("test...scoree");

        rowHeader.addView(rank);  //IllegalStateException:  The specified child already has a parent. You must call removeView() on the child's parent first.
        rowHeader.addView(percentage);
        rowHeader.addView(score);

        row1.addView(r1r);
        row1.addView(r1p);
        row1.addView(r1s);

        table.addView(rowHeader);
        table.addView(row1); 

        table = (TableLayout)findViewById(R.id.tableLayout);

        dh.closeDB(db);
    }
} 
```

highscoresmain.xml

```
<TableLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id = "@+id/tableLayout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="0"
    android:padding="5dp">

    <TableRow
        android:id="@+id/rowHeader"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

        <TextView
            android:id="@+id/rank"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

        <TextView
            android:id="@+id/percentage"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

        <TextView
            android:id="@+id/score"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

    <TableRow
        android:id="@+id/row1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

        <TextView
            android:id="@+id/r1r"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

        <TextView
            android:id="@+id/r1p"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

        <TextView
            android:id="@+id/r1s"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

</TableLayout> 
```

日志猫

```
01-02 15:21:10.870: W/dalvikvm(901): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
01-02 15:21:10.938: E/AndroidRuntime(901): FATAL EXCEPTION: main
01-02 15:21:10.938: E/AndroidRuntime(901): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.test/com.example.test.Highscores}: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
01-02 15:21:10.938: E/AndroidRuntime(901):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
01-02 15:21:10.938: E/AndroidRuntime(901):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
01-02 15:21:10.938: E/AndroidRuntime(901):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
01-02 15:21:10.938: E/AndroidRuntime(901):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
01-02 15:21:10.938: E/AndroidRuntime(901):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-02 15:21:10.938: E/AndroidRuntime(901):  at android.os.Looper.loop(Looper.java:137)
01-02 15:21:10.938: E/AndroidRuntime(901):  at android.app.ActivityThread.main(ActivityThread.java:4745)
01-02 15:21:10.938: E/AndroidRuntime(901):  at java.lang.reflect.Method.invokeNative(Native Method)
01-02 15:21:10.938: E/AndroidRuntime(901):  at java.lang.reflect.Method.invoke(Method.java:511)
01-02 15:21:10.938: E/AndroidRuntime(901):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-02 15:21:10.938: E/AndroidRuntime(901):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-02 15:21:10.938: E/AndroidRuntime(901):  at dalvik.system.NativeStart.main(Native Method)
01-02 15:21:10.938: E/AndroidRuntime(901): Caused by: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
01-02 15:21:10.938: E/AndroidRuntime(901):  at android.view.ViewGroup.addViewInner(ViewGroup.java:3378)
01-02 15:21:10.938: E/AndroidRuntime(901):  at android.view.ViewGroup.addView(ViewGroup.java:3249)
01-02 15:21:10.938: E/AndroidRuntime(901):  at android.view.ViewGroup.addView(ViewGroup.java:3194)
01-02 15:21:10.938: E/AndroidRuntime(901):  at android.view.ViewGroup.addView(ViewGroup.java:3170)
01-02 15:21:10.938: E/AndroidRuntime(901):  at com.example.test.Highscores.onCreate(Highscores.java:73)
01-02 15:21:10.938: E/AndroidRuntime(901):  at android.app.Activity.performCreate(Activity.java:5008)
01-02 15:21:10.938: E/AndroidRuntime(901):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
01-02 15:21:10.938: E/AndroidRuntime(901):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
01-02 15:21:10.938: E/AndroidRuntime(901):  ... 11 more 
```

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:51:49.720

例外很明显：

> `java.lang.IllegalStateException`：指定的孩子已经有一个父母。您必须首先在孩子的父母上调用 removeView()。

也就是说`rank`，它已经有一个父母，`rowHeader`它是父母。`TableRow`正如您在布局中指定的那样，这些视图已经在元素中。你不需要重新添加它们，事实上你不能。

# sql - SQL - 为某些用户从 2 个表中选择不重复的行？

> ID：14129756
> 
> 赞同：0
> 
> 时间：2013-01-02T21:50:39.577
> 
> 标签：sql

我有一个主页，用户可以在其中发布照片。DB 有 4 个用户的 2 个表（也许它们构建得很糟糕）。我使用 MySQL。

表格1

```
id  |  photo |  user
1   |  a     |  me
2   |  b     |  dad
3   |  c     |  mom
4   |  d     |  sister 
```

表2

```
id  |  photo |  user
1   |  a     |  me
2   |  b     |  me
3   |  c     |  me 
```

我看过我爸爸、妈妈和姐姐的每张照片，然后，table2 有行表示我看过这些照片。

使用此代码，我无法做我想做的事。

```
select * from table1 where photo not in (select photo from table2) 
```

但是，我的妈妈，爸爸和姐姐没有看到其他照片，所以这是一个错误，他们应该可以看到彼此的照片，他们不能。

我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:11:18.073

如果我理解正确，您希望在 table1 中显示用户未在 table2 中看到的照片。

为此，您需要获取唯一的图片列表和唯一的用户列表：

```
SELECT DISTINCT [user] FROM table1
SELECT DISTINCT [photo] FROM table1 
```

然后，我们希望将这些结果结合在一起：

```
SELECT  *
FROM (SELECT DISTINCT [user] FROM #table1) users
JOIN (SELECT DISTINCT [photo] FROM #table1) photos ON 1=1 
```

这`1=1`意味着我们将每张照片与每个用户连接起来。

这将为您提供每张照片和每个用户的列表：

```
USER | PHOTO
dad    a
dad    c
dad    b
dad    d
me     a
me     b
me     c
me     d
mom    a
mom    b
mom    c
mom    d
Sister a
Sister b
Sister c
Sister d 
```

最后一步是过滤掉您已经看过的照片（如表 2 中记录的）。为此，我们将 join 留给 table2 并找到所有空值：

```
SELECT  *
FROM (SELECT DISTINCT [user] FROM table1) users
JOIN (SELECT DISTINCT [photo] FROM table1) photos ON 1=1
LEFT JOIN table2 ON photos.photo = table2.photo AND table2.[user] = users.[user]
WHERE table2.id IS NULL 
```

相反，如果您想查看每个用户看过哪些图片，请将 where 子句更改为`WHERE table2.id IS NOT NULL`

# facebook - 测试以确定 Facebook 链接是粉丝页面还是个人页面

> ID：14129757
> 
> 赞同：2
> 
> 时间：2013-01-02T21:50:42.110
> 
> 标签：facebook, url, testing

我试图允许用户在注册时向我提供他们的 Facebook 链接，并且在创建他们的个人资料时，我会自动在他们的个人资料中填充一个类似 facebook 的框。我遇到的问题是点赞框不适用于个人 Facebook 页面。

在显示之前，我需要一种方法来测试 url 是粉丝页面还是个人页面，这样我的页面上就不会出现错误。到目前为止，我能够测试的唯一方法是使用 php strpos 搜索许多粉丝页面 url 中的字符串“pages/”。如果有人可以通过具体方法帮助我确定 url 指向哪个页面，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T22:08:04.380

[Facebook Graph API](https://developers.facebook.com/docs/reference/api/)可能是解决这个问题的一种方法。

如果您比较[`User`](https://developers.facebook.com/docs/reference/api/user/)和[`Page`](https://developers.facebook.com/docs/reference/api/page/)对象，您会注意到有一些独特的字段。例如一个页面有`likes`.

现在您只需要向 Graph API 发出 HTTP 请求并检查响应是否包含特定字段，例如`likes`.

用户：[https ://graph.facebook.com/btaylor](https://graph.facebook.com/btaylor)

页面：[https ://graph.facebook.com/cocacola](https://graph.facebook.com/cocacola)

# android - 是 DB-Activity 架构和/或上下文泄漏的 ContentProvider 解决方案吗

> ID：14129759
> 
> 赞同：1
> 
> 时间：2013-01-02T21:50:47.300
> 
> 标签：android, multithreading, design-patterns, android-contentprovider, android-sqlite

当使用大型数据库时，在我的情况下，大约有 20 个 DataSource 定义（每个 DS 2-5 个表，存储在同一个 SQLiteDatabase 中），很少出现问题

例如：

*   线程同步（[ReentrantLock](http://developer.android.com/reference/java/util/concurrent/locks/ReentrantLock.html)、[同步锁](http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html)）
*   [SQLiteOpenHelper](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)子类的Singleton ( [1](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/2i82mjoM46M) , [2](http://portabledroid.wordpress.com/2012/05/04/singletons-in-android/) ) 模式
*   [SQLiteOpenHelper](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)和/或 DataSources 的单例上可能的[上下文泄漏](http://android-developers.blogspot.cz/2009/01/avoiding-memory-leaks.html)
    *   或者如果使用应用程序的 Context ( `Context.getApplicationContext()`)则使用大内存堆

[尽管我知道，在不将应用程序的数据暴露给其他服务/应用程序（ 1](http://mobile.tutsplus.com/tutorials/android/android-sdk_content-providers/)、[2](http://vladnevzorov.com/2011/05/18/android-application-architecture-part-iii-main-parts-of-the-applications/) ）时，没有必要使用 ContentProviders ，但我认为它解决了上述大多数问题，并允许/推动实现有趣的功能，例如[广播](http://mylifewithandroid.blogspot.cz/2008/03/observing-content.html)或使用访问数据的[游标。](http://developer.android.com/reference/android/database/Cursor.html)

这只是对 ContentProvider 模式的误解，还是真的很复杂地解决了可能的问题，而不仅仅是提到的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T23:31:47.290

ContentProvider 实现可能需要编写大量样板代码，这就是我开发 Mechanoid DB 的原因。如果您计划实现一个支持 sqlite 的内容提供程序，它可能会让您的生活更轻松。

[http://robotoworks.com/mechanoid-plugin/mechanoid-db/](http://robotoworks.com/mechanoid-plugin/mechanoid-db/)

[http://robotoworks.com/2013/01/using-sqlite-in-android-with-mechanoid-db-part-1-tables/](http://robotoworks.com/2013/01/using-sqlite-in-android-with-mechanoid-db-part-1-tables/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T22:00:19.093

鉴于最近弃用了*startmanagingcursor*，以及您可以从文档以及几本书（包括 reto meyer 的书）中阅读的内容，contentprovider 似乎是克服一系列问题的建议方法，包括您列出的问题。

即使[官方文档](http://developer.android.com/guide/topics/providers/content-providers.html)声明*如果您不打算与其他应用程序共享数据，您不需要开发自己的提供程序*，但很明显基于加载器的方法得到了强烈的宣传，并且让您不必担心您遇到的问题只是提到了，更不用说每当您的数据更改时可以自动通知加载程序。

另请注意，您可以向外界隐藏您的内容提供者

```
android:exported="false" 
```

在任何情况下，线程同步*都不应该*担心，因为 sqllite 调用是线程安全的（据我所知）。

我也同意编写内容提供程序包含很多样板代码，这就是为什么我编写了一个脚本来为我编写它:-)。如果你有兴趣，你可以[在这里查看](https://github.com/fedepaol/Android-sql-lite-helper)，但也要考虑在谷歌上寻找“内容提供者生成器”会返回一些不错的选择，如果不是更好的选择的话。

# android - 在 Mac OS for Android 上构建 Boost 库

> ID：14129763
> 
> 赞同：0
> 
> 时间：2013-01-02T21:51:16.773
> 
> 标签：android, macos, boost, build

我正在关注[https://github.com/MysticTreeGames/Boost-for-Android中的文档](https://github.com/MysticTreeGames/Boost-for-Android)

我在 Mac OS 上构建它时遇到了问题。是否有关于如何使用 ndk 在 Mac OS for Android 上构建提升的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:42:18.203

(1) 哪些问题？您在编译时遇到问题了吗？你在使用 NDK 8rc 吗？如果是，请检查用户配置中提到的包含和库路径详细信息与 NDK PATH 不匹配

检查以下包含路径并根据 NDK 路径对其进行更新

-I$(ANDROID_NDK)/sources/cxx-stl/gnu-libstdc++/4.4.3/include

-I$(ANDROID_NDK)/sources/cxx-stl/gnu-libstdc++/4.4.3/libs/armeabi/include

更新此路径后，您将不会收到错误消息。

(2) 在Following site [https://github.com/mevansam/cmoss](https://github.com/mevansam/cmoss)，他在mac os x 上编译过。

(3) 否则你可以参考这篇文章[官方“Boost library”支持Android和iOS？](https://stackoverflow.com/questions/14036311/official-boost-library-support-for-android-and-ios)为替代品。

# exception - 当我尝试调试我的 MVC4 网站时，这个异常是什么

> ID：14129771
> 
> 赞同：0
> 
> 时间：2013-01-02T21:51:48.187
> 
> 标签：exception, asp.net-mvc-4

时不时地，当我尝试调试我的网站时，我得到一个异常，告诉我我知道存在并且自我开始我的项目以来就存在的资源丢失了？在我的开发环境网络服务器中缓存或不缓存的东西还是我不知道的东西？有没有人遇到过这样的问题？？？这是它所说的内容以及项目中实际存在的文件的图片。![在此处输入图像描述](../Images/43330b7be4787a138b09949bc60807a5.png)

正如您可以清楚地看到的，我的文件在我成功构建的项目中，但是当我尝试在那里导航时，它给了我这个错误异常。让我也清楚一点，这个网站是工作的，它时不时地工作。我解决这个问题的方法是重建整个解决方案。它工作了一段时间，然后我再次得到这个异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:16:40.847

您收到此错误是因为您开始调试时将活动窗口作为视图并且没有项目的默认启动页面。有关如何设置默认启动页面的信息，请参阅此 SO 帖子 - [Visual Studio ASP.Net MVC 撤消设置为起始页面操作](https://stackoverflow.com/questions/2821796/visual-studio-asp-net-mvc-undo-set-as-start-page-action)

# asp.net - 日期的 MaskedEditExtender - 指定最小值

> ID：14129773
> 
> 赞同：0
> 
> 时间：2013-01-02T21:51:56.397
> 
> 标签：asp.net, ajaxcontroltoolkit

我是在 ASP.NET 中使用 AJAX 工具包的新手

我有一个用于开始日期的蒙面编辑扩展器。如何在此指定最小日期值？目前这是接受 11/11/1111。

```
<asp:MaskedEditExtender runat="server" 
                        ID="meeStartDate" 
                        Mask="99/99/9999" 
                        MaskType="Date" 
                        TargetControlID="txtStartDate" /> 
```

我感谢您的支持！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:05:11.497

试试这个 ：

```
MaximumValue="01/01/2099" MinimumValue="01/01/2000" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:21:41.273

你可以试试这个

```
 this._minDate = DateTime.Now.Date;
            this._maxDate = DateTime.Now.Date.AddDays(120); 
```

# javascript - 这是什么javascript语法？！功能（）{}

> ID：14129774
> 
> 赞同：1
> 
> 时间：2013-01-02T21:51:56.800
> 
> 标签：javascript, jquery

> **可能重复：**
> [函数前的感叹号有什么作用？](https://stackoverflow.com/questions/3755606/what-does-the-exclamation-mark-do-before-the-function)

我今天遇到了这个，以前从未见过：

```
!function($) {
//contents removed

}( window.jQuery ); 
```

我特别想知道感叹号的作用。有没有关于它的文件？互联网搜索没有产生好的结果。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:54:47.383

语句前的感叹号`function`创建*函数表达式*。如果你想创建一个调用自身的函数，它*必须是*一个表达式而不是一个声明。

例如，可以通过使用一个`+`字符或将整个表达式放在括号中来获得相同的结果。

```
+function( $ ) {}( window.jQUery ); 
```

或者

```
(function( $ ) {}( window.jQuery )); 
```

# android - 如何找出给定设备将使用哪个 dpi 文件夹？

> ID：14129778
> 
> 赞同：1
> 
> 时间：2013-01-02T21:52:11.607
> 
> 标签：android, resolution

我不清楚分辨率、ppi 以及设备将本机从哪个可绘制文件夹中提取艺术作品之间的关系。

具体来说，我正在尝试弄清楚 RAZR M 的规格，但总的来说，是否有一些公式可以用来解决这个问题？我没有在 android 开发文档上看到它，但也许我忽略了它？

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:57:23.937

如果您想了解其背后的“魔力”，您可以查看一些 Google 搜索结果，例如： [生成器](http://members.ping.de/~sven/dpi.html "发电机")
或[解释。](http://www.brandbuildercompany.com/blog/2012/03/29/device-independent-pixel-formula-for-mobile-devices/)

在 Android 开发网站上，您可以找到密度桶的概述： [密度桶](http://developer.android.com/guide/practices/screens_support.html)

如果这仍然不能回答您的问题，您还可以在每个密度文件夹（hdpi、ldpi、mdpi ...）中举例几个不同的图像，然后查看您的设备或模拟器上显示的内容。

# iphone - 如何为启用了后台的 iOS 应用程序获取 applicationWillTerminate 通知？

> ID：14129783
> 
> 赞同：1
> 
> 时间：2013-01-02T21:52:30.853
> 
> 标签：iphone, ios, ipad, ios6, appdelegate

所以我知道`applicationWillTerminate:`如果您的应用程序支持后台执行（除非存在一些内存问题），`applicationDidEnterBackground:`则不会调用它，而是调用它。

在 appDelegate的`applicationDidEnterBackground:`方法内部，它说

```
// If your application supports background execution, 
//this method is called instead of applicationWillTerminate: when the user quits. 
```

但是，当用户实际退出应用程序时，我需要将一些条目保存到字典中。我不想每次应用程序进入后台时都这样做。即使我的应用程序支持后台，有没有办法获得终止通知？

特别是如果应用程序被用户强制退出，有什么解决方法可以得到通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:57:11.887

每次应用进入bg时保存。操作系统可能会在没有任何进一步警告的情况下杀死你。

# objective-c - 在设备上运行时出现 EXC_ARM_DA_ALIGN 错误

> ID：14129785
> 
> 赞同：1
> 
> 时间：2013-01-02T21:52:38.177
> 
> 标签：objective-c, ios, ios6, automatic-ref-counting

为什么这段代码在模拟器上运行而在真实设备上崩溃？

我有一个非常简单的代码来绘制一个圆圈。代码子类`UIView`化并在模拟器上运行良好（适用于 iOS 5.1 和 iOS 6.0）。

**圈子.h**

```
#import <UIKit/UIKit.h>

@interface Circle : UIView

@end 
```

**圆.m**

```
#import "Circle.h"

@implementation Circle

-(CGPathRef) circlePath{
    UIBezierPath *path = [UIBezierPath bezierPath];
    [path addArcWithCenter:self.center radius:10.0 startAngle:0.0 endAngle:360.0 clockwise:YES];
    return path.CGPath;
}

- (void)drawRect:(CGRect)rect
{
    CGPathRef circle = [self circlePath];

    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGContextAddPath( ctx, circle );
    CGContextStrokePath(ctx);
}

@end 
```

当我尝试在运行 iOS 5.1.1 的 iPad2 上执行代码时，出现错误 ( `EXC_BAD_ACCESS(code=EXC_ARM_DA_ALIGN,address=0x31459241)`) `CGContextAddPath( ctx, circle );`。

我不知道问题是什么。谁能指出我解决这个问题的正确方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:20:59.737

这是因为`CGPath`您要返回的对象归方法`UIBezierPath`中创建的自动释放对象所有`circlePath`。当您添加`UIBezierPath`已释放的路径对象时，返回的指针指向无效内存。`UIBezierPath`您可以通过返回自身来修复崩溃：

```
-(UIBezierPath *)circlePath {
    UIBezierPath *path = [UIBezierPath bezierPath];
    [path addArcWithCenter:self.center radius:10.0 startAngle:0.0 endAngle:360.0 clockwise:YES];
    return path;
} 
```

然后使用：

```
CGContextAddPath( ctx, circle.CGPath ); 
```

# android - 长按操作不调用 onLongClick()

> ID：14129787
> 
> 赞同：1
> 
> 时间：2013-01-02T21:52:41.297
> 
> 标签：android, floating, onlongclicklistener, android-contextmenu

我正在尝试在我的应用程序中实现浮动上下文菜单。我正在关注谷歌提供的一个例子：http: [//developer.android.com/guide/topics/ui/menus.html](http://developer.android.com/guide/topics/ui/menus.html)，但在开头卡住了那段代码：

```
@Override
 protected void onCreate(Bundle savedInstanceState){
     super.onCreate(savedInstanceState);

new AsyncTaskOne(this).execute();

     getListView().setOnLongClickListener(new View.OnLongClickListener() {
            // Called when the user long-clicks on someView

            public boolean onLongClick(View view) {
                Log.v("OnLongClick", "clicked");    // It doesn't log anything on a long click event.
                if (mActionMode != null) {
                    return false;
                }

                // Start the CAB using the ActionMode.Callback defined above
                mActionMode = actiV().startActionMode(mActionModeCallback);
                view.setSelected(true);
                return true;
            }
        });

 } 
```

我已将日志检查放入`onLongClick(View view)`方法中以查明它是否实际被调用。当我长按 ListView 中的某个项目时，什么也没有发生（我`Log.v`没有记录任何内容）。我想知道本教程是否缺少某些内容（layout.xml 中的某些声明）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:56:19.520

您将长单击侦听器设置为整个列表视图，您真的想设置一个 OnItemLongClick 来获得列表中某个项目的长按吗？

[http://developer.android.com/reference/android/widget/AdapterView.OnItemLongClickListener.html](http://developer.android.com/reference/android/widget/AdapterView.OnItemLongClickListener.html)

# php - _SERVER 值不等于其报告的值 - 奇怪

> ID：14129788
> 
> 赞同：1
> 
> 时间：2013-01-02T21:52:41.843
> 
> 标签：php, proxy

因此，有一个专用代理服务器 (rtrk.com)，它为我负责的其中一个站点设置了一个子域代理。

```
The following example is how it works
Original site: example.com
Proxy site: example-px.rtrk.com 
```

当访问代理站点 url 时，会实时加载原始站点。对实际站点上的站点文件所做的更改会立即通过代理 URL 显示。

我已经修改了站点标题以检查该`$_SERVER["SERVER_NAME"]`值以确保它以 example.com 结尾，但我得到的行为远远超出了我认为奇怪的范围，例如以下代码：

```
$test = $_SERVER["SERVER_NAME"];
echo $test . "<br />";
echo stristr($test, "exam") . "<br />";
echo $test;
exit; 
```

以下输出是我希望看到的：（通过代理访问）

```
example-px.rtrk.com
example-px.rtrk.com
example-px.rtrk.com 
```

我实际看到的：

```
example-px.rtrk.com
example.com
example-px.rtrk.com 
```

这到底是怎么回事？我验证 $test 是否设置为代理主机的正确值。stristr 返回一个完整的值，实际上甚至在原始值中都没有找到，然后我重新验证测试没有以某种方式改变，也没有改变。

这让我彻底疯了！这怎么可能？

编辑：

我可以通过手动将测试变量设置为 SERVER_NAME 报告的字符串来获得正确的输出。例子：

```
$test = "example-px.rtrk.com";
echo $test . "<br />";
echo stristr($test, "exam") . "<br />";
echo $test;
exit; 
```

这就是我得到的（并且期望得到）：

```
example-px.rtrk.com
example-px.rtrk.com
example-px.rtrk.com 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:22:28.407

大声笑 - 当我无法弄清楚时，它总是很愚蠢。

问题是当我通过代理访问该站点时，所有匹配“www.example.com”的数据都会在返回到我的浏览器之前自动转换为代理地址。

长话短说，一切都按预期的方式工作，只是输出在代理服务器到达我的浏览器之前被修改了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-02T22:05:01.037

您正在以一种有趣的方式使用 stristr。[这](http://php.net/manual/en/function.stristr.php)是 stristr 的文档。根据文档，您正在搜索字符串“exam”，因此您永远不会从该函数收到“example-px.rtrk.com”。

# objective-c - 如何加载驻留在我的应用程序文件夹中的文件的内容？

> ID：14129789
> 
> 赞同：1
> 
> 时间：2013-01-02T21:52:44.497
> 
> 标签：objective-c, ios, macos, dropbox, dropbox-api

使用`loadFile`选择器和`loadedFile`委托选择器，我如何读取 Dropbox 上应用程序的 app 文件夹中的文件内容？

您是否应该在磁盘上指定一个绝对路径（如 tmp 文件夹？），在调用委托方法`loadFile: intoPath:`后您实际从中读取内容？`loadedFile`

Dropbox IOS/OSX SDK 是否会在获取和下载文件之前自动确定文件是否本地存储在用户的保管箱文件夹中，并且是当前版本？

我在这里错过了什么吗？或者这是预期的实现？

抱歉这个新手问题，似乎没有大量关于如何实际使用此方法的具体文档。

### 编辑（澄清）

当我说我想加载文件的内容时，我想将文件内容转储到一个`NSString`对象中。抱歉，如果不清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T06:36:32.823

```
 NSMutableArray *tempArray =[NSMutableArray arrayWithArray:[[NSFileManager defaultManager] contentsOfDirectoryAtPath:directoryPath error:Nil]];
 NSFileManager *fileManager =[NSFileManager defaultManager];
 NSString path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
 path=[path stringByAppendingPathComponent:@"filename with extension"]; 
```

现在您可以使用路径变量来加载文件。

有一个快乐的编码。！

# java - 散列 Java JSONObject

> ID：14129791
> 
> 赞同：2
> 
> 时间：2013-01-02T21:52:52.997
> 
> 标签：java

我目前正在用java编写一个jsonrpc-client。请求由[JSONObject](http://www.json.org/javadoc/org/json/JSONObject.html)表示，如下所示：

```
{'method': 'do.stuff', 'params': ['asdf', 3, {'foo': 'bar'}]} 
```

现在我想实现一个低级请求缓存，为此我需要一种从 JSONObject 创建散列的方法，该散列将始终返回相同的值。使用 toString() 不是一个选项，因为 JSONObjects 是无序的：以下示例将与我的第一个示例完全相同，即使字符串表示不同：

```
{'params': ['asdf', 3, {'foo': 'bar'}], 'method': 'do.stuff'} 
```

这个问题的最佳解决方案是什么？当然，jsonobject 可以嵌套到任意深度。我对 Java 很陌生，感谢任何建议。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T22:00:18.450

您想看看[Jackson](http://jackson.codehaus.org/)：将您的输入读取为 a `JsonNode`，它正确地实现`.equals()`（`.hashCode()`即遵守由 建立的合同`java.lang.Object`），适用于*所有*JSON 值（数字、布尔值、字符串、递归对象、递归数组、空值） .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-26T06:49:28.840

```
I agree with @fge's solution. This is working for me across multiple variations of a JSON structure - 

    int hash = 0;
    ObjectMapper mapper = new ObjectMapper();
    JsonFactory factory = mapper.getFactory();
    try {
        JsonNode jsonNode = mapper.readTree(factory.createParser(jsonString));
        hash = jsonNode.hashCode();
    } catch (IOException e) {
        LOG.error("Error generating hash for jsonString: {}", jsonString);
        e.printStackTrace();
    }

Example permutations - 
 "{ k1: v1, k2:v2, k3: v3}"
 "{ k3: v3, k2:v2, k1: v1}"
 "{ k3: v3, k1:v1, k2: v2}"

All 3 produced same hashcode everytime. In practice however my json also had ArrayList and Map within itself and that worked perfectly well too. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T22:00:27.113

我建议在 JSONObject 上调用 hashCode 方法，因为它不依赖于元素的顺序或字符串表示。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-01-02T22:10:42.337

你可以做`.toString().hashCode()`

即使 JSON 是无序的，我认为字符串每次都会以相同的方式生成。即使它们的生成方式不同，您的缓存中也只会有两个对象，这可能不会是世界末日。

# javascript - 模拟物理点击以触发混淆 JavaScript 的行为

> ID：14129792
> 
> 赞同：4
> 
> 时间：2013-01-02T21:53:06.197
> 
> 标签：javascript, jquery, html

## 语境

我正在开发一个 JavaScript 应用程序，它允许用户远程控制 HTML+CSS+JS 幻灯片。

幻灯片是由一个将它从 powerpoint 转换而来的程序生成的。

## 问题

JavaScript 幻灯片是一个混淆的 JS 代码。但是，我已经能够使用 jQuery/JS 事件触发一些行为（例如，如果我调用`.click()`下*一个*按钮，幻灯片将前进到下一张幻灯片）。

无论如何，**当我单击某些元素时会触发一些行为，但是当我** `.click()`在与该元素对应的 jQuery 对象上调用 jQuery 时不会触发一些行为。

## 我的想法

我想模拟对某个元素的实际点击，因为我不确切知道点击它后触发的事件是使所需行为成为可能的事件。

那可能吗？或者，我是否错过了解决此问题的另一种方法？

[我在这篇文章](https://stackoverflow.com/a/4176116/370798)中尝试了一些东西，但它不起作用（什么也没发生）。

## 更多关于我的具体问题

[您可以在此处](https://dl.dropbox.com/u/16586190/exsld.html)查看示例幻灯片。（幻灯片是[这个 JS](https://dl.dropbox.com/u/16586190/data/player.js)）。

我想要触发的行为是当您单击缩略图（单击*menu*后看到的缩略图）时发生的情况。也就是说，我希望能够从一张幻灯片跳到另一张幻灯片。

我做出的一个有趣的观察是，在您抬起鼠标单击后会触发幻灯片更改，并且无论您使用左键还是右键单击都有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:15:18.977

正如有人在评论中让我注意到的那样，推荐的[答案](https://stackoverflow.com/a/4176116/370798)是正确的。我的错误是假设使用 jQuery 而不是纯 JavaScript 会以相同的方式工作（它没有，因为 jQuery 对象与 DOM 元素不同）。

当然，您可以使用 jQuery 获取 DOM 元素，但我没有这样做。（我通过 jQuery 的对象触发了事件，但它不起作用）。

顺便说一句，如果有人在寻找如何调试混淆的 JavaScript 时偶然发现了这个问题，我发现的另一个有用信息是[关于使用 Google Chrome 的调试器](https://stackoverflow.com/a/7338319/370798)检测正在运行的脚本中的事件处理程序的提示。这对于查看与点击不同的其他事件可能很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:25:23.397

没有办法模拟用户点击。所有框架的方法总是通过 javascript/jquery 触发事件，例如`$(element).click();`

对于您的特定情况，也许可以尝试一些鼠标事件，以涵盖所有可能的情况[http://api.jquery.com/category/events/mouse-events/](http://api.jquery.com/category/events/mouse-events/)

其他方法可能是，如果可能的话，尝试用硒模拟行为。

# ios - 如何更改当前显示的 UINavigationController 的标题

> ID：14129793
> 
> 赞同：5
> 
> 时间：2013-01-02T21:53:07.773
> 
> 标签：ios, uinavigationcontroller, title, navbar

我有一个 UINavigationController 当前显示的视图。当用户在其他地方更改选择时，我需要 UINavigationController 显示的当前显示的标题进行更改。即使我更改了当前视图控制器中的标题，我也无法让 UINavigationController 刷新标题。

我已经尝试了各种方法，但都没有成功更改标题。

我正在为视图的其余部分执行 [tableview reloadData]，但这并没有改变标题。

在显示的视图控制器中，我尝试了以下

```
self.title = @"New title"; 
```

我在 self.view 和 self.navigationController.view 上尝试了 setNeedsDisplay、setNeedsLayout 的各种组合。

没有成功更改导航栏上的标题。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-02T21:55:33.657

尝试设置`self.navigationItem.title`为所需的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T22:48:55.583

我忘记了我正在覆盖titleView。所以我不需要设置标题，而是更改titleView。一旦我这样做了，它就可以正常工作了。

# vba - 如何防止旧版访问代码中的“OpenForm 操作被取消”

> ID：14129796
> 
> 赞同：2
> 
> 时间：2013-01-02T21:53:12.560
> 
> 标签：vba, ms-access

我最近接管了一个非常旧的 Access 数据库。该数据库有大量编写的宏，用户可以利用这些宏来帮助他们导航和输入数据。因此，尽管这些宏是用 Access 97 编写的，但放弃代码并不是第一步。

我已经设法通过用新的函数调用删除不推荐使用的函数调用来使大部分代码工作，但是有几种形式仍然不能正常工作。如果我能弄清楚如何解决一个问题，我相信我可以解决其他问题。

主宏有一个带有几个按钮的菜单。每当我单击一个按钮时，我都会收到“OpenForm 操作已取消”错误。该按钮的代码如下：

```
Option Compare Database   'Use database order for string comparisons

Private Sub Form_Open(Cancel As Integer)
    If IsLoaded("ServiceCircuit") Then
        Me![PropBtn].Visible = True
    Else
        Me![PropBtn].Visible = False
    End If

End Sub

Private Sub Form_Unload(Cancel As Integer)
    If IsLoaded("ServiceCircuit") Then
        Forms![ServiceCircuit].Visible = True
        Forms![ServiceCircuit]![CircuitPrefix].Requery
        Forms![ServiceCircuit]![CircuitPrefix] = Forms![Circuit]![CircuitPrefix]
        Forms![ServiceCircuit]![CircuitBase].Requery
        Forms![ServiceCircuit]![CircuitBase] = Forms![Circuit]![CircuitBase]
        'Forms!ServiceCircuit.Refresh
        Exit Sub
    Else
        If IsLoaded("DedicatedService") Then
            Forms![DedicatedService].Visible = True
            Forms!DedicatedService.Refresh
            Exit Sub
        End If

        If IsLoaded("Property") Then
            Forms![Property].Visible = True
            Forms!Property.Refresh
            Exit Sub
        End If
    End If
End Sub

Private Sub GRC_GotFocus()
    Me![GRC].Requery

End Sub

Private Sub PropBtn_Click()
    DoCmd.Close

    If IsLoaded("ServiceCircuit") Then
        Forms![ServiceCircuit].Visible = True
        DoCmd.Close
        'Forms![ServiceCircuit]![CircuitPrefix].Requery
        'Forms![ServiceCircuit]![CircuitPrefix] = Forms![Circuit]![CircuitPrefix]
        'Forms![ServiceCircuit]![CircuitBase].Requery
        'Forms![ServiceCircuit]![CircuitBase] = Forms![Circuit]![CircuitBase]
        'Forms!ServiceCircuit.Refresh
        Exit Sub
    Else
        If IsLoaded("DedicatedService") Then
            Forms![DedicatedService].Visible = True
            DoCmd.Close
            'Forms!DedicatedService.Refresh
            Exit Sub
        End If

        If IsLoaded("Property") Then
            Forms![Property].Visible = True
            Forms!Property.Refresh
            Exit Sub
        End If
    End If

End Sub

Private Sub Tariff_NotInList(NewData As String, Response As Integer)
    dumbvar = AddRecFromCombo(NewData, "Tariff")

    '  Continue without displaying default error message.
    Response = DATA_ERRCONTINUE

End Sub 
```

我对 VB 非常陌生，并且一直在摸索成功，但我对如何解决这个问题或问题可能是什么感到困惑。

更新：

我在主菜单窗体中设置了一个断点。实际按钮的代码是：

```
Private Sub CircuitBtn_Click()
On Error GoTo Err_CircuitBtn_Click

    Dim DocName As String
    Dim LinkCriteria As String

    DocName = "Circuit"
    DoCmd.OpenForm DocName, , , LinkCriteria

Exit_CircuitBtn_Click:
    Exit Sub

Err_CircuitBtn_Click:
    MsgBox Err.description
    Resume Exit_CircuitBtn_Click 
```

单步执行`DoCmd.OpenForm DocName, , , LinkCriteria`代码运行，然后跳转到`Err_CircuitBtn_Click`. 我不相信我可以在其他地方设置断点。不确定为什么会跳到错误，主窗体上的其他按钮以相同的方式编码（在主窗体上）。我尝试在第一块代码中设置一些断点（一旦假设弹出表单的代码），但断点从未被捕获。我猜断点永远不应该到达，因为如果我在那个表单上点击一个按钮，那是执行的脚本，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:23:37.317

“OpenForm 操作已取消”是当表单（“电路”）未正确打开时出现的错误。

该代码是由向导生成的，“Docname”和“LinkCriteria”都是多余的。通过输入在即时窗口中尝试

```
`DoCmd.OpenForm "Circuit"` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-31T16:09:46.333

刚刚遇到同样的问题并设法解决它。

问题是我最初是`[B]`通过复制另一个表单来创建表单的`[A]`。出于这个原因，`[B]`与.`recordsource``recordsource``[A]`

我已经重命名了表单查询`[A and B]` `recordsource`。我对`[A]`（需要记录源的）进行了更新，但没有意识到`[B]`也需要更新。

修复（对我而言）是删除`recordsource`from，`[B]`因为不需要绑定表单。也就是说，对其他人的修复可能是更正`recordsource`他们在开发过程中可能已更改的属性值或其他属性值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-15T16:55:17.917

我刚刚在访问 365 时遇到了这个问题。我将数据库设置为安装在我的客户位置。这包括删除链接表，以便它们可以在其网络上的客户端位置重新链接。

在测试 accde 文件时，它说 OpenForm 操作已取消。挠了挠头后，我回到了制作acde的文件。我遇到了同样的问题。我以为这可能是我的定制丝带，但不是。

然后我反编译了该文件的 VBA，希望我能得到答案，不。然后我一起消除了功能区并尝试直接打开表单。它说记录源不存在。我当时想，“哦，是的，我正看着它。”

然后我尝试打开记录源（在这种情况下为查询），它说找不到表。

哦，当然。我删除了所有指向数据表的链接。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-12-01T15:10:15.303

I guess you don't need the answer anymore (It's been a while since you asked it), but I write a solution for others:

On Error GoTo ErrorHandler

' Insert code that might generate an error here

DoCmd.OpenQuery "query_name"

Exit Sub

ErrorHandler:

' Insert code to handle the error here

MsgBox "The query did not run"

Resume Next

# html - 用户选择的 mousedown+mousemove 性能糟糕：无

> ID：14129797
> 
> 赞同：0
> 
> 时间：2013-01-02T21:53:18.240
> 
> 标签：html, css, performance, mousemove, textselection

标题几乎概括了它。在处理页面上的许多不可选择的元素时，我的表现很糟糕，我尝试实现一个拖放系统。

我有一个计时器设置来显示它的间隔，当您在示例页面上的任意位置单击并移动鼠标时，您将看到间隔穿过屋顶..

有问题的CSS：

```
body
{
    -moz-user-select: none;
    -khtml-user-select: none;
    -webkit-user-select: none;
    user-select: none;
} 
```

删除它，一切都如你所料。这些规则是否与主体、div 或实际跨度本身相关联似乎并不重要。

关于这里发生了什么的任何想法？

提前致谢！（这里是小提琴：http: [//jsfiddle.net/e62pE/2/](http://jsfiddle.net/e62pE/2/)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T10:22:47.323

# 解决方法

为了避免这个问题，我发现有两件事有助于解决这个问题。

1.  仅将 CSS 规则应用于应受此设置影响的元素，并且仅应用于包装所有这些元素的最高元素。（例如，如果你想影响表格中的几行，只影响特定的表格行，而不是整个表格或更糟的是整个文档。）

2.  仅在应避免选择时应用 CSS 规则，然后删除规则。这使 DOM 保持清洁和响应。

（*WebKit Bugzilla 实际上包含描述此问题的[错误报告](https://bugs.webkit.org/show_bug.cgi?id=90158)*。 ）

## 我的情况

我在调试与您描述的完全相同的效果时得出了这个结论，在那里我设法创建了一个适用于所有主要浏览器的解决方法。我不确定这是否也适用于您的具体情况，但尽管如此，这里有。

我有`<table>`成百上千甚至更多`<tr>`的。当用户`SHIFT`单击一行时，我想将样式应用于一系列行，范围从上一个单击的行到单击的行`SHIFT`，而不在此过程中选择文本。

起初我将`user-select: none;`CSS 添加到`table.user-select-none td`，这基本上意味着所有单元格都受到影响（这可以相当加起来）。

解决方法现在仅适用于`SHIFT`+ Mouse Down 处的类，并且仅适用`<tr>`于范围内的 's，使用 CSS 选择器`tr.user-select-none`。在一个小的超时（40 毫秒）之后，该类被删除，以保持 DOM 的整洁和响应。

此解决方法已将选择过程从平均 500 毫秒加快到 50 毫秒，使其成为目前可行的解决方案。

# xpath - 在 BPEL 返回复杂类型的响应

> ID：14129798
> 
> 赞同：2
> 
> 时间：2013-01-02T21:53:20.220
> 
> 标签：xpath, bpel, apache-ode

基本上，我希望能够从具有无限数量元素的复杂类型的 BPEL ODE 引擎生成响应。这个想法非常基本，我得到一个对象列表作为输入，然后我根据某个类别进行一些过滤。然后我需要根据过滤生成响应，可能不止一个元素。但是 BPEL 复制分配只允许一对一的分配。我已经尝试使用数组，但似乎也不能分配给多个元素。下面的片段用于输入和输出。

```
 <complexType name="hospitalType">
        <sequence minOccurs="1" maxOccurs="unbounded">
          <element name="patients">
          <complexType>
            <sequence>
              <element name="patient" minOccurs="1" maxOccurs="unbounded">
                <complexType>
                  <sequence>
                    <element type="string" name="name"/>
                    <element type="date" name="dob"/>
                    <element type="byte" name="age"/>
                    <element type="string" name="status"/>
                  </sequence>
                  <attribute name="pid" type="ID"/>
                </complexType>
              </element>
            </sequence>
          </complexType>
        </element> 
```

到目前为止，以下是我尝试过的

```
 <bpel:copy>
                <bpel:from part="payload" variable="input">

                            <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                                <![CDATA[tns:patients/tns:patient[1]]]>
                            </bpel:query>
                        </bpel:from>
                <bpel:to part="inload" variable="output">

                            <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                                <![CDATA[tns:patients/tns:patient]]>
                            </bpel:query>
                        </bpel:to>

        </bpel:copy> 
```

如果输入有多个元素，我什至不能做一个简单的分配..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:27:19.133

这是 WS-BPEL 的限制。实现这一点的符合标准的方法是运行 XSL 转换。请参阅[WS-BPEL 规范](http://docs.oasis-open.org/wsbpel/2.0/wsbpel-v2.0.pdf)的第 65 页。为了使这更容易一点，ODE 提供了几个 XPath 扩展，允许将元素附加或插入到列表中。请参阅[此处](http://ode.apache.org/xpath-extensions.html)获取列表。这种分配的示例如下所示：

```
<assign>
  <copy>
    <from>ode:insert-after($parent, $parent/child::node(), $siblings)</from>
    <to variable="parent"/>
  </copy>
</assign> 
```

# session - joomla 2.5.8 在注销时销毁选项卡（来宾和用户）中的所有已启动会话，并仅启动新的来宾会话

> ID：14129801
> 
> 赞同：1
> 
> 时间：2013-01-02T21:53:26.957
> 
> 标签：session, joomla, logout, destroy

欢迎。我在 joomla 2.5.8 和美德玛特 2.0.16 上。所有模板都存在问题，当我浏览浏览器时，我发现 safari 和 chrome 在注销后保留表单中的数据，即我登录以查看和更改我的购物者数据我正在保存它们并注销（我已经数据未保存在 firefox 和 opera 中的一些更改 - 但稍后会介绍）。注销后，我单击返回按钮一次，两次，瞧，数据又回来了（只是为了查看而不是保存，而是查看，地址，电话......应该没有地方）。

我不太擅长 php 和 javascript。我发现用户和来宾的会话是两个不同的会话（在我的情况下，用于查看的来宾和用于编辑和保存的用户）。因此，当用户注销时，guest stil 可以读取登录用户的 previons。我检查如果我在 chrome 和 safari 中按 ctrl+r（在恢复数据的表单上），数据消失（表单再次显示但没有任何数据 - 以及所有其他试验、保存、取消等）在注册时结束或登录页面）。为了获得这种效果，我创建了 autentyfikacja.php ：

```
 <?php /*Funkcja sprawdzająca autentycznosc użytkownika, gość - user*/ ?>

<?php
if(!function_exists('CheckState'))
{
    function CheckState()
    {
        $uzytkownik=&JFactory::getUser();
        if(!$uzytkownik->guest) return true;

    else return false;

    }
}
?> 
```

并将其包含到具有此值的某些文件中

```
include 'autentyfikacja.php';
$zarejestruj=JRoute::_('index.php?option=com_users&view=login', $this->useXHTML, $this->useSSL);
if (!CheckState())
{
  //wywal niezarejestrowanego na strone rejestracji
  JRequest::checkToken('post') or die( header("location: $zarejestruj") );
  exit;  //this one I even don't know if it's needed and why in some casses but it works:)
} else 
```

在那之后，我得到了 firefox、opera 和 internet explorer 的工作——chrome 和 safari 仍然没有。为什么？

在会话中删除 chrome 中的 cookie（所有 mydomain cookie）后，我发现它的工作原理类似于 Internet Explorer，但这应该在公共函数 destroy() 上执行 session.php 文件（我认为）

我放了一部电影 9 分钟解释问题它不是广告这只是我的第一部电影，但它带有波兰语评论（如果需要英语，我将在下一个录制:) - 那是为了我的朋友，他放弃了）

[有问题的电影](http://esteart.home.pl/Untitled.mp4)

我的假设是仅在注销和注销时杀死并新建两个会话！（来宾和用户 - 使用户注销和来宾按 ctrl+r 一样生效，但仅在注销情况下）。如何和在哪里？？？在 session.php 中？还是一些与模板不同的文件？

在 autentyfikacja.php 中更好，由我自己制作:)。

任何想法都会很好，我也开始放弃了。一周后。

要自己查看，登录：演示并通过：演示站点[esteart.eu](http://www.esteart.eu) 正如我所说的不是广告，目标和名称会有所不同，完成后。

登录后可以将访客令牌设置为与用户相同吗？如何？

# cloud-foundry - 如何在 Cloudfoundry 中配置 Dev、stage 和 production Env？

> ID：14129807
> 
> 赞同：0
> 
> 时间：2013-01-02T21:53:55.487
> 
> 标签：cloud-foundry

最近我将我的 Spring MVC 应用程序从本地服务器移动到 CloudFoundry 环境。

在我的应用程序中，我有一个在服务器启动时设置的环境变量。IE

```
PROJ_ENV=-Dcom.abc.app.env=local 
```

它用于 spring config:`<util:properties id="appProps" location="classpath:${com.abc.app.env}.application.properties" />`并且在 DEV、Stage 和 Production Servers 中也可用，并且具有`application.properties`包含环境特定值的相应文件。

如何在 CloudFoundry 中保持相同的设置？有没有办法定义环境/系统变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:59:18.753

`vmc`您可以使用命令行工具设置 ENV 变量`vmc set-env appname varname value`。

查看`vmc help --all`更多信息。另外，请注意，带有点的环境变量名称有时会出现问题，这就是为什么 Spring 有时使用带有下划线的大写字母作为替代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-05T01:00:59.090

只是一个更新，**vmc自****Cloud Foundry v2**以来已被弃用。现在建议使用而不是 VMC

```
cf --help 
```

这是来自 vmc 源的详细链接..

# jquery - jquery 可以从一堆图像中获取 src

> ID：14129809
> 
> 赞同：0
> 
> 时间：2013-01-02T21:54:02.340
> 
> 标签：jquery, src, attr

我有一些我无法控制的 HTML。基本布局如下...

```
<div class="container">
    <div class="img-field">
        <img src="/path/to/img.jpg" />
    </div>
    <div class="img-field">
        <img src="/path/to/img.jpg" />
    </div>
</div> 
```

大约有 8 个“.img-field” div 都包含图像。我正在寻找循环并获取所有图像的 src，将它们添加到数组中，然后将它们移动到列表标签中，以便它可以与我正在使用的插件一起使用。我可以获取 1 个 img 的来源没问题，但我正在努力获取所有 8 个 src。关于实现这一目标的最佳方法的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T22:07:27.177

```
var arr = $('.img-field img').map(function(){
               return this.src;
          }).get(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T21:55:53.873

`<img>`您可以使用 jQuery`.each()`函数简单地创建一个数组并遍历所有特定标签：

```
//Your array to store your values
var yourImageSources = new Array();

//Iterates through each of the image fields
$('.img-field').each(function()
{
    //Selects the img element within the current image field and pushes it onto
    //the array.
    yourImagesSources.push($('img',this).attr('src'));
}); 
```

**[例子](http://jsfiddle.net/dnedv/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T21:55:09.537

您可以通过以下方式选择 img src 属性`$(".img-field").find("img").attr("src")`

然后你可以使用 jquery`.each()`函数遍历它们

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T21:57:37.147

做这个 -

```
$('.img-field').each(function() {
    var thisSRC = $(this).find('img').attr('src'); // thisSRC is the current image source
    // do something with thisSRC
}); 
```

编辑：我刚刚看到了 Rion 的回答，它可以完成你需要做的所有事情。

# powershell - 如何判断比较对象结果有什么不同？

> ID：14129813
> 
> 赞同：0
> 
> 时间：2013-01-02T21:54:17.347
> 
> 标签：powershell, compare

给定以下基于[此解决方案](https://stackoverflow.com/a/13505244/897326)的示例代码（Powershell） ：

```
$newFiles = @(Get-ChildItem -recurse -path "c:\path1");
$oldFiles = @(Get-ChildItem -recurse -path "c:\path2");
Compare-Object -ReferenceObject $newFiles -DifferenceObject $oldFiles -Property FullName,Length,LastWriteTime 
```

我必须`SideIndicator`判断两侧是否存在具有相同属性集的对象。但这对于生产目的通常用处不大。我真正需要的是键所有对象，`FullName`然后比较（对于上面的例子）。如果不同，能够分辨出究竟是什么不同（或两者兼而有之），以及究竟有多不同（>、<、=）。Powershell是否可以使用内置方式？`Length``LastWriteTime``Length``LastWriteTime`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T22:42:20.840

`Compare-Object`是一个功能非常简单的 cmdlet。它可以承受一些严重的改进。我可以让它工作的最好方法是将删除/添加的文件拼凑到一个单独的存储桶中，然后使用`Name`not`FullName`与`SyncWindow`1 比较相同的文件，例如：

```
$removed = Compare-Object -ReferenceObject $oldFiles -DifferenceObject $newFiles -Property Name -PassThru | Where {$_.SideIndicator -eq '<='}
$added = Compare-Object -ReferenceObject $oldFiles -DifferenceObject $newFiles -Property Name -PassThru | Where {$_.SideIndicator -eq '=>'}
$removedNames = $removed | Foreach {$_.Fullname}
$same = $oldFiles | Where {$_.Fullname -notin $removedNames}
Compare-Object -ReferenceObject $same -DifferenceObject $newFiles -Property Name,Length,LastWriteTime -SyncWindow 1 
```

这给了我这样的结果：

```
Name                                                 Length LastWriteTime                 SideIndicator
----                                                 ------ -------------                 -------------
AssemblyInfo.Shared.cs                                  340 8/28/2012 1:21:53 AM          =>
AssemblyInfo.Shared.cs                                  340 8/28/2012 1:21:28 AM          <=
EchoArgs.cs                                             825 8/28/2012 1:21:54 AM          =>
EchoArgs.cs                                             825 8/28/2012 1:21:30 AM          <=
AssemblyInfo.cs                                         151 8/28/2012 1:21:54 AM          =>
AssemblyInfo.cs                                         151 8/28/2012 1:21:31 AM          <= 
```

即便如此，在列出文件的过程中，文件仍然不同步。去搞清楚。如果您消除 SyncWindow 参数，您仍然会得到“正确”的结果，只是文件分散在其他地方，而不是一个接一个地排列。:-(

# wix - Installshield Packagefortheweb3 到 Wix 转换器？

> ID：14129815
> 
> 赞同：0
> 
> 时间：2013-01-02T21:54:35.143
> 
> 标签：wix, installshield

现在有没有人使用自动方式或转换器将旧的 Installshield PackageForTheWeb 3 PFW 文件转换为 Wix Bundle XML 格式？

PFW 文件只是平面 INI 文件，所以我希望有人已经将它们带到了 WiX 工具集或有一些指导。

我使用 Wix 3.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T03:35:56.313

我不知道任何这样的库，但是如果您可以构建 .msi，您可以使用 WiX 工具[Dark](http://wix.sourceforge.net/manual-wix3/dark.htm)将其反编译为 WiX 源代码。

# c# - 有效的c#第二版勘误表

> ID：14129825
> 
> 赞同：3
> 
> 时间：2013-01-02T21:55:02.610
> 
> 标签：c#, errata

我正在从 java 迁移到 c#。我正在阅读 Bill Wagner 的书，Effective C# second edition。我目前在第 1 章的第 6 项“了解许多不同的相等概念之间的关系”，其中第 40-41-42 页中有一个示例代码，它应该显示不正确地实现 Equals 会导致错误，我的错误我无法重现，它看起来像示例中的错误。这是下面的代码

```
public class B : IEquatable<D>
{
    public override bool Equals(object right)
    {
        //
        if (object.ReferenceEquals(right, null))
            return false;
        // Check reference equality:
        if (object.ReferenceEquals(this, right))
            return true;
        // Problems here, discussed below.
        B rightAsB = right as B;
        if (rightAsB == null)
            return false;
        return this.Equals(rightAsB);
    }

    #region IEquatable<B> Members
    public bool Equals(B other)
    {
        // elided
        return true;
    }
    #endregion
} 
```

和类 D 继承自 B

```
public class D : B,IEquatable<D>
{
    // etc.
    public override bool Equals(object right)
    {
        // check null:
        if (object.ReferenceEquals(right, null))
            return false;
        if (object.ReferenceEquals(this, right))
            return true;
        // Problems here.
        D rightAsD = right as D;

        if (rightAsD == null)
            return false;
        if (base.Equals(rightAsD) == false)
            return false;
        return this.Equals(rightAsD);
    }

    #region IEquatable<D> Members
    public bool Equals(D other)
    {
        // elided.
        return true; // or false, based on test
    }
    #endregion
} 
```

根据本书，以下代码

```
 B baseObject = new B();
        D derivedObject = new D();
        // Comparison 1.
        if (baseObject.Equals(derivedObject))
            Console.WriteLine("Equals");
        else
            Console.WriteLine("Not Equal");
        // Comparison 2.
        if (derivedObject.Equals(baseObject))
            Console.WriteLine("Equals");
        else
            Console.WriteLine("Not Equal"); 
```

“第二次比较永远不会返回真”，它确实如此。我的意思是因为 D 是 B 的子类，第二个比较最终会从 B 调用 Equals 方法，该方法返回 true，这对我来说完全有意义。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:00:01.023

我怀疑比尔的意思是，如果用调用*重写* `Equals(object)`的方法，由于这一部分，它将返回 false：`D``baseObject`

```
D rightAsD = right as D;

if (rightAsD == null)
    return false; 
```

鉴于 的值`baseObject`不是*对*的实例的引用`D`，`rightAsD`应该是`null`，所以它会返回`false`。

为了证明这一点，只需将`baseObject`和`derivedObject` *变量*的类型更改为`object`。（不要更改它们初始化的值，只更改声明的类型。）或者，只需转换为`object`：

```
if (derivedObject.Equals((object) baseObject)) 
```

所以这本书说实施有问题是正确的——只是示例并没有完全证明它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:00:11.710

这是由于`as`运算符和继承。

假设您有 2 个类，`A`并且`B`和`B`派生自`A`。

```
A a = new A();
B b = new B();

A x = b as A; // x is b
B y = a as B; // y is null 
```

# eclipse - Eclipse CDT - 访问内存地址 0x25a 时出错：输入/输出错误

> ID：14129826
> 
> 赞同：1
> 
> 时间：2013-01-02T21:55:04.603
> 
> 标签：eclipse, gdb, eclipse-cdt

我正在尝试在 Eclipse CDT 下调试 Linux C++ 程序。当我启动调试会话时，我在源代码中设置了两个断点，但是我在控制台输出中看到了这一点：

无法插入断点 6\. 访问内存地址 0x25a 时出错：输入/输出错误。无法插入断点 7\. 访问内存地址 0x8 时出错：输入/输出错误。

我的断点永远不会被击中。但是，该应用程序确实运行。关于 I/O 错误意味着什么的任何想法？

泰，弗雷德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T23:44:34.293

> 关于 I/O 错误意味着什么的任何想法？

它们意味着 GDB（由 Eclipse CDT 使用）试图在 address`0x25a`和上设置断点`0x8`，但失败了（上述任何一个位置都没有代码）。

为什么 GDB 决定设置断点是不可能的：你没有提供任何关于你如何设置断点的细节。

# c - 矩阵乘法 - 指针和数组

> ID：14129827
> 
> 赞同：0
> 
> 时间：2013-01-02T21:55:06.950
> 
> 标签：c, pointers, multidimensional-array, matrix-multiplication

我对 C 编程相当陌生，所以请耐心等待 :) 我有一个 main()，它生成一个二维数组（又名矩阵）。我试图定义一个“外部”函数 matrix_multipl()，它从 main() 中获取两个矩阵，将它们相乘并返回它们，这当然会导致问题（你不能从函数中返回一个数组）。

所以我的方法如下，我想知道我是否正确理解了这个过程：

我在 main 和从那里生成数组（first[m][n]、second[o][p] 和结果 [m][p] 矩阵），我只使用指向该数组的指针，所以如果我调用指针到matrix_multipl()中的那个数组，它基本上跑回main，从数组中获取相应的值，用它做一些事情（矩阵乘法），最后取计算值，再次运行到main()并写入结果进入结果[m][p] 矩阵，它一直停留在 main() 中，因此不需要“返回”？

我希望我做对了，因为这听起来绝对合乎逻辑并且非常有用，因为它可以防止来回推挤大数组:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:56:38.317

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:59:41.250

它不会“本质上运行回主”，matrix_multiply() 将访问矩阵指针指向的内存。

而且，关于其他答案之一和“按引用传递”，C 始终使用“按值传递” - 这就是您必须传递指针而不是矩阵本身的原因（实际上传递给 matrix_multiply 的内容将是您在 main 中定义的指针的副本）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T22:10:41.070

引用数组的起始**内存地址**（通过引用）。

```
void matrix_multiply(int *array1, int *array2, int *answer) {
// matrix multiply operation.
} 
```

惯例：

`&array[0]`传递给函数以满足参数`*array`

# eclipse - 为什么eclipse不显示工作区中的所有引用？

> ID：14129831
> 
> 赞同：1
> 
> 时间：2013-01-02T21:55:11.333
> 
> 标签：eclipse, grep, cross-reference

在 Eclipse Helios 中，我在同一个工作区中的同一个项目中有 3 个类。

这些类是（在每个类的属性对话框中找到的“路径”和“位置”）

```
A
path: /myproject/src/a/A.java
location: /home/me/dev/myrepo/somefolder/myproject/src/a/A.java

R1
path: /myproject/src/b/R1.java
location: /home/me/dev/myrepo/somefolder/myproject/src/b/R1.java

R2
path: /myproject/src/b/R2.java
location: /home/me/dev/myrepo/somefolder/myproject/src/b/R2.java 
```

`A`有一个方法`f`，由`R1`和中的方法使用`R2`。

如果，使用鼠标悬停方法`f()`，`A`我执行`right click -> References -> Workspace (Shift+Ctrl+G)`或`right click -> References -> Project`，它只显示`R1`在结果窗格中。

这可能是什么原因？有什么我应该改变的配置吗？我使用 grep，我可以找到两个参考。也许 Eclipse 做了一些类似在下面使用 grep 的事情，但实际上并没有分析源代码？

我已经尝试过刷新项目（如果您认为我`R2`在 Eclipse 之外进行了编辑），但没有帮助。

* * *

我不能发布真正的来源，因为它是超级机密。这是一些等效的来源（尽管这些问题没有发生）：

爪哇

```
package a;

public class A {
    public void f() {}
} 
```

R1.java

```
package b;
import a.A;

public class R1 {
    void f() {
        new A().f();
    }
} 
```

R2.java

```
package b;
import a.A;

public class R2 {
    void f() {
        new A().f();
    }
} 
```

# android - EditText '文本' 到 SD 卡

> ID：14129832
> 
> 赞同：3
> 
> 时间：2013-01-02T21:55:13.687
> 
> 标签：android

我有一个简单的应用程序，我希望能够保存 EditText 控件的内容，以便用户能够添加自由格式文本并将其存储在文本文件中

我在 main.xml 中有控制权

```
<EditText
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text="text in here"
        android:id="@+id/editText" android:layout_gravity="center"/> 
```

还有一个菜单项

```
<item android:id="@+id/menu_add"
      android:icon="@drawable/ic_menu_add"
      android:title="@string/menu_add"
      android:showAsAction="ifRoom|withText"
      android:onClick="addItem"
        /> 
```

随着 onClick 调用我的 addItem void

```
public void addItem(MenuItem menuItem) {

        String sdcard = Environment.getExternalStorageDirectory().getAbsolutePath();

        try {
            FileWriter filenew = new FileWriter(sdcard + "/test.txt");
            BufferedWriter bw = new BufferedWriter(filenew);
            bw.write(menuItem.toString());
            bw.close();
        } catch (IOException e) {
            //You'll need to add proper error handling here
        }

    } 
```

目前 menuItem.toString() 可以理解地只返回字符串 'Add'

如何访问 EditText 控件中包含的文本，以便将其添加到 test.txt 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:05:04.450

不确定您是如何设置此应用程序的，但将数据写入 SD 卡也可能不是最好的主意。

无论如何，您需要首先找到您的 EditText（假设您在一个使用 setContentView 设置根布局的 Activity 中）：

```
EditText mText = (EditText) this.findViewById(R.id.editText); 
```

如果你把它保存到一个私有变量中，你可以在你的 Activity 中使用它。您可以使用以下命令取出文本：

```
mText.getText().toString(); 
```

附言。如果你真的想坚持下去，你可能还想仔细看看你获得 SD 卡路径的方式。如果某人没有安装 SD 卡或无法访问它（例如，在某些情况下某人的手机与 USB 连接），这将给您带来一些严重的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T22:01:03.447

首先，您需要使用`findViewById()`EditText 视图来获取引用。然后您可以调用`getText().toString()`以将其内容作为字符串获取。

# css - Mashable.com 如何通过 Css 显示/隐藏元素？

> ID：14129841
> 
> 赞同：1
> 
> 时间：2013-01-02T21:56:01.097
> 
> 标签：css

我想知道 mashable.com 如何在页面高于某个宽度时隐藏其菜单按钮（出现在右上角）并在页面低于某个宽度时消失。特定的 CSS 规则：

```
html.no-touch .main-menu li.menu
{
  display: none;
} 
```

优先于显示图标的规则：

```
.navbar .nav > li 
{ 
   display:block;
   float: left;
} 
```

但我看不到它是如何做到的，因为禁用 JavaScript 似乎不会造成任何不良影响，并且应用于父元素的 Css 类似乎都没有改变。看起来：

```
html.no-touch .main-menu li.menu
{
  display: none;
} 
```

应该总是优先，但显然不是，而且不知何故，这似乎是完全用 CSS 完成的，我很想知道如何。

说明这一点的图形[在这里](http://oi46.tinypic.com/b96nv7.jpg "例子")。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:57:52.613

他们使用 css [@media 查询](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)以不同的分辨率显示和隐藏不同的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:09:04.087

Mashable.com 使用 Skeleton，这是一个非常好的响应式网站设计框架。它具有明确定义的@media 查询，可以根据视口大小隐藏或显示 div。

# elisp - 收集缓冲区的行

> ID：14129842
> 
> 赞同：1
> 
> 时间：2013-01-02T21:56:11.597
> 
> 标签：elisp

每行需要将流程输出解析为结构。

```
sug skProc  strutils.capitalize proc (string): string{.noSideEffect.}
sug skProc  strutils.quoteIfContainsWhite   proc (string): string
sug skProc  system.gorge    proc (string, string): string
sug skProc  system.of   proc (T, S): bool{.noSideEffect.}
sug skProc  system.definedInScope   proc (expr): bool{.noSideEffect.}
sug skIterator  system.items    iterator (cstring): char{.inline.}
sug skProc  system.ord  proc (T): int{.noSideEffect.} 
```

此数据位于缓冲区内。那么如何读取每一行并将其传递给返回解析表示并最终收集所有行的函数呢？

编辑：解析行的代码（未调试）：

```
(defstruct nimrod-sug type namespace name signature)

(defun nimrod-parse-suggestion-line (line)
  (let ((split (split-string line "[\t\n]")))
    (make-nimrod-sug
     :type (nth 1 split)
     :namespace (first (split-string (nth 2 split) "\\."))
     :name (second (split-string (nth 2 split) "\\."))
     :signature (nth 3 split)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:20:28.507

对解析器进行一些小的更改：

```
(defun nimrod-parse-suggestion-line (line)
  (destructuring-bind (_ type fn &rest sig) (split-string line "[[:space:]]+" t)
    (make-nimrod-sug :type      type 
                     :namespace (first  (split-string fn "\\."))
                     :name      (second (split-string fn "\\."))
                     :signature (apply 'concat sig)))) 
```

假设缓冲区的名称是`*output*`，您可以像这样解析它：

```
(with-current-buffer "*output*" 
  (mapcar 'nimrod-parse-suggestion-line
          (split-string (buffer-string) "[\r\n]" t)))

; => ([cl-struct-nimrod-sug "skProc" "strutils" "capitalize" "proc(string):string{.noSideEffect.}"] ...) 
```

如果您当前正在访问输出缓冲区，则不需要`with-current-buffer`包装器。

# mysql - 检查mysql中是否存在表

> ID：14129843
> 
> 赞同：4
> 
> 时间：2013-01-02T21:56:13.500
> 
> 标签：mysql

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T22:00:32.983

或者你可以使用这个（更长的查询）。

```
SELECT count(*)
FROM information_schema.tables
WHERE table_schema = 'databasename'
AND table_name = 'tablename' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T21:58:28.893

您可以执行以下操作：

```
SHOW TABLES LIKE tablename; 
```

根据 OP 的评论 - 编辑：

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/8b528/2)

检查演示。它显示了这样的代码：

```
SHOW TABLES LIKE 'user%'; 
```

结果：

```
TABLES_IN_DB_2_8B528 (USER%)
user_images
users 
```

# php - PHP preg_replace 与 SQL

> ID：14129847
> 
> 赞同：0
> 
> 时间：2013-01-02T21:56:33.687
> 
> 标签：php, mysql, preg-replace

我正在尝试用数据库调用替换来自基本 CMS 的简单命令。

用户输入

```
[gallery id=x] 
```

进入 CMS，我希望它消失，找到该画廊中包含的图像，并显示它们（为 jQuery Cycle 插件做好准备）

我可以得到：

```
$pattern = '/\[gallery id=(\w+)\]/i';
$rpl     = 'Display Gallery ID ${1}';
$bubble  = preg_replace($pattern, $rpl, $bubble); 
```

...返回“Display Gallery 12”（例如）。但是我需要它来做到这一点：

```
$sql = "SELECT * FROM galleries INNER JOIN photos ON photos.PhotoGallery=galleries.GalleryID WHERE GalleryID='x'";
$set = mysql_query($sql);
echo '<div id="gallery">';
while($row = mysql_fetch_array($set))
{
 echo '<img src="'.$row['PhotoPath'].'" />';
}
echo '</div>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:03:01.537

您可以使用该`preg_replace_callback`函数，该函数获取正则表达式找到的每个匹配项，并将其替换为从提供的回调返回的字符串。因此，您可以执行以下操作：

```
function generateGallery($matches) {
    // generate the string here, $matches[1] will be your gallery id
    return "Gallery Content for Gallery " . $matches[1];
}

$pattern = '/\[gallery id=(\w+)\]/i';
$bubble = preg_replace_callback($pattern, generateGallery, $bubble); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:11:43.293

利用：

```
preg_match($pattern, $string, $matches); 
```

在此之后，ID 位于`$matches[1]`.

# javascript - jQuery mobile / Flot / resize.js

> ID：14129850
> 
> 赞同：3
> 
> 时间：2013-01-02T21:56:49.287
> 
> 标签：javascript, jquery, jquery-mobile, flot

我想知道 JQM 和 Flot 之间是否存在兼容性问题。我一直在寻找有关此的文档，但没有很多...

这是问题所在：根据我加载库的顺序，事情可以正常工作，而其他人则不能：

```
<script type="text/javascript" src="js/jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="js/jquery.mobile-1.2.0.min.js"></script>
<script src="js/jquery.flot.js"></script>
<script src="js/jquery.flot.resize.js"></script>
<div id="placeholder" style="width: 60%;height:40%"></div> 
```

--> 此处未显示图表：“未捕获的绘图尺寸无效，宽度 = 671，高度 = 0”

现在，如果我删除 JQM：

```
<script type="text/javascript" src="js/jquery-1.8.0.min.js"></script>
<script src="js/jquery.flot.js"></script>
<script src="js/jquery.flot.resize.js"></script>
<div id="placeholder" style="width: 60%;height:40%"></div> 
```

--> 这里显示了图表并且调整大小有效，所以我猜这个问题来自 JQM 但我不知道是什么......

我试图以不同的顺序加载东西，但没有任何帮助。

有人知道解决方法吗？

这是完整的代码：

```
<!DOCTYPE html>
<html>
    <head>
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <script type="text/javascript" src="js/jquery-1.8.0.min.js"></script>
    <script type="text/javascript" src="js/jquery.mobile-1.2.0.min.js"></script>
    <script src="js/jquery.flot.js"></script>
    <script src="js/jquery.flot.resize.js"></script>
    <style type="text/css">
    html, body {
        height: 100%; /* make the percentage height on placeholder work */
    }
    .message {
        padding-left: 50px;
        font-size: smaller;
    }
    </style>
</head>
<body> 

<h1>Flot test</h1>
<div id="placeholder" style="width: 60%;height:40%; text-align: center; margin:0 auto;"/>

<script type="text/javascript">

$(function () {

    var c1_values = [[0, 0],[1, 1],[2, 4],[3, 9],[4, 16],[5, 25],[6, 36],[7, 49],[8, 64],[9, 81],[10, 100],[11, 121],[12, 144],[13, 169],[14, 196],[15, 225],[16, 256],[17, 289],[18, 324],[19, 361]];

    var c1_data = [{ data: c1_values, label: "curve1"}];

    $.plot($("#placeholder"), [
        {
            data: c1_values,
            lines: { show: true, fill: false }
        }
    ]);
});

</script>

</body>
</html> 
```

我目前正在尝试这种“无冲突”功能，但目前没有结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T16:56:02.237

`page`如果您自己不包含，jQuery Mobile 会自动将您的所有内容包装在 a中。一般来说，这意味着你应该在你的代码中自己做！因此，第一步是将占位符移动到 jQM 模板中：

```
<div data-role="page">
  <div data-role="header">
        <h1>Flot test</h1>
  </div>
  <!-- /header -->
  <div data-role="content">
    <div id="placeholder" style="width: 60%;height:40%; text-align: center; margin:0 auto;"
    /></div>
  <!-- /content -->
</div>
<!-- /page --> 
```

`content`现在， div 没有拉伸以填充整个可用垂直空间似乎是一个常见问题。我找到了两种解决方案，似乎都不是很理想。

1.  使用 CSS 尝试使`content`div 全高（注意，它`data-role"content"`变成了 的 CSS 类`ui-content`）：

    .ui-content { 高度：100%; 宽度：100%；位置：绝对；}

2.  使用 Javascript 在您进行时动态地修复内容高度（在您的 flot 调用之前执行此操作）。取自[这里](http://www.semicomplete.com/blog/geekery/jquery-mobile-full-height-content.html)：

    var fixgeometry = function () { /* 一些方向变化使滚动位置在某处

    *   这不是 0,0。这对于用户体验来说很烦人。*/ 滚动(0, 0);

        /* 计算我们的内容区域应该采用的几何图形 */ var header = $(".ui-header:visible"); var footer = $(".ui-footer:visible"); var 内容 = $(".ui-content:visible"); var viewport_height = $(window).height();

        var content_height = viewport_height - header.outerHeight() - footer.outerHeight();

        /* 修剪边距/边框/填充高度 */ content_height -= (content.outerHeight() - content.height()); 内容高度（内容高度）；}; /* 固定几何 */

    $(window).bind("orientationchange resize pageshow", fixgeometry);

这些解决方案对我来说似乎都不是特别好，尽管它们在显示图表方面都“有效”。

我在这里发布了第二个版本的示例：http: [//alpha.jsfiddle.net/ryleyb/mz24P/](http://alpha.jsfiddle.net/ryleyb/mz24P/)

CSS 也在那里，如果您想尝试，请注释掉。

# r - 确定R中所有行下的顶列

> ID：14129860
> 
> 赞同：1
> 
> 时间：2013-01-02T21:57:34.343
> 
> 标签：r, matrix, reshape, multidimensional-array

这是真实数据的一个更简单的例子，它是一个 N>100 的 NxN 矩阵。现在我要查找的是每一行的前 3 名，然后找出哪些列最常出现在前 3 名中，以及它出现在哪些行下。

```
 A   B   C   D   E   F   G
    A   0   70  5   73  96  46  58
    B   47  0   20  89  75  50  19
    C   42  98  0   30  30  22  76
    D   66  20  18  0   63  18  60
    E   73  0   63  51  0   23  7
    F   79  34  61  56  12  0   99
    G   25  26  41  86  51  30  0 
```

现在，我试图通过创建一个二进制矩阵来找到相同的结果，如果一个单元格位于一行的前 3 个，那么它是 1，否则为 0；但是，我在创建一个不是矩形的表格时遇到了最大的困难。

```
 A   B   C   D   E   F   G
    A   0   1   0   1   1   0   0
    B   0   0   0   1   1   1   0
    C   1   1   0   0   0   0   1
    D   1   0   0   0   1   0   1
    E   1   0   1   1   0   0   0
    F   1   0   1   0   0   0   1
    G   0   0   1   1   1   0   0 
```

最终产品应如下所示，其中 A 在条件 C、D、E 和 F 下位于前三名。

```
 A       D       E       C       G       B       F
    C (42)  A (73)  A (96)  E (63)  C (76)  A (70)  B (50)
    D (66)  B (89)  B (75)  F (61)  D (60)  C (98)  
    E (73)  E (51)  D (63)  G (41)  F (99)      
    F (79)  G (86)  G (51) 
```

任何正确方向的建议或观点将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:24:11.553

这是我的做法：

```
X <- read.table(stdin())
A   B   C   D   E   F   G
A   0   70  5   73  96  46  58
B   47  0   20  89  75  50  19
C   42  98  0   30  30  22  76
D   66  20  18  0   63  18  60
E   73  0   63  51  0   23  7
F   79  34  61  56  12  0   99
G   25  26  41  86  51  30  0

indices <- which(t(apply(X,1,function(x) x >= sort(x,decr=TRUE)[3])), arr.ind=TRUE)
values  <- X[indices]

letters <- matrix(rownames(X)[indices],ncol=2)

data.frame(letters, values) 
```

首先，我们以表格的形式读入数据。然后我们针对每行中的第三大元素测试每个元素。其余的只是使输出更好一点：

```
 X1 X2 values
1   C  A     42
2   D  A     66
3   E  A     73
4   F  A     79
5   A  B     70
6   C  B     98
7   E  C     63
8   F  C     61
9   G  C     41
10  A  D     73
11  B  D     89
12  E  D     51
13  G  D     86
14  A  E     96
15  B  E     75
16  D  E     63
17  G  E     51
18  B  F     50
19  C  G     76
20  D  G     60
21  F  G     99 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T22:26:08.873

你展示的结构我觉得很混乱。相反，如果您用它们在第二个矩阵中的位置替换值怎么办：

```
foo = structure(c(0L, 47L, 42L, 66L, 73L, 79L, 25L, 70L, 0L, 98L, 20L, 
0L, 34L, 26L, 5L, 20L, 0L, 18L, 63L, 61L, 41L, 73L, 89L, 30L, 
0L, 51L, 56L, 86L, 96L, 75L, 30L, 63L, 0L, 12L, 51L, 46L, 50L, 
22L, 18L, 23L, 0L, 30L, 58L, 19L, 76L, 60L, 7L, 99L, 0L), .Dim = c(7L, 
7L), .Dimnames = list(c("A", "B", "C", "D", "E", "F", "G"), c("A", 
"B", "C", "D", "E", "F", "G")))

bar = structure(c(0L, 0L, 1L, 1L, 1L, 1L, 0L, 1L, 0L, 1L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 1L, 1L, 1L, 1L, 1L, 0L, 0L, 1L, 0L, 1L, 1L, 
1L, 0L, 1L, 0L, 0L, 1L, 0L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, 
1L, 0L, 1L, 0L), .Dim = c(7L, 7L), .Dimnames = list(c("A", "B", 
"C", "D", "E", "F", "G"), c("A", "B", "C", "D", "E", "F", "G"
)))

bar[as.logical(bar)] = foo[as.logical(bar)]

> bar
   A  B  C  D  E  F  G
A  0 70  0 73 96  0  0
B  0  0  0 89 75 50  0
C 42 98  0  0  0  0 76
D 66  0  0  0 63  0 60
E 73  0 63 51  0  0  0
F 79  0 61  0  0  0 99
G  0  0 41 86 51  0  0 
```

您显示的结构可以创建为`list`，但我认为它不能清晰地显示数据。但是，请随意扩展或澄清您的输出需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T23:24:07.497

```
dat <- structure(c(0L, 47L, 42L, 66L, 73L, 79L, 25L, 70L, 0L, 98L, 20L, 
0L, 34L, 26L, 5L, 20L, 0L, 18L, 63L, 61L, 41L, 73L, 89L, 30L, 
0L, 51L, 56L, 86L, 96L, 75L, 30L, 63L, 0L, 12L, 51L, 46L, 50L, 
22L, 18L, 23L, 0L, 30L, 58L, 19L, 76L, 60L, 7L, 99L, 0L), .Dim = c(7L, 
7L), .Dimnames = list(c("A", "B", "C", "D", "E", "F", "G"), c("A", 
"B", "C", "D", "E", "F", "G"))) 
```

您的中间矩阵可以通过执行以下操作来计算：

```
in.top3 <- t(apply(-foo, 1, rank)) <= 3 
```

然后，您可以通过执行以下操作为每列创建前 3 行列表；

```
apply(in.top3, 2, function(x)names(which(x)))
# $A
# [1] "C" "D" "E" "F"
# 
# $B
# [1] "A" "C"
# 
# $C
# [1] "E" "F" "G"
# 
# $D
# [1] "A" "B" "E" "G"
# 
# $E
# [1] "A" "B" "D" "G"
# 
# $F
# [1] "B"
# 
# $G
# [1] "C" "D" "F" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T23:58:26.317

```
inter <- 0 + t( apply(foo, 1, rank) >= 5)  # don't actually need it but shows how.

vals <- foo * ( 0+t(apply(foo, 1, rank)>=5))
#----------
   A  B  C  D  E  F  G
A  0 70  0 73 96  0  0
B  0  0  0 89 75 50  0
C 42 98  0  0  0  0 76
D 66  0  0  0 63  0 60
E 73  0 63 51  0  0  0
F 79  0 61  0  0  0 99
G  0  0 41 86 51  0  0

vals [ , rev( order( colSums(vals >0) )) ]  
 # Arrange in order of increasing numbers of top three
#-------
   E  D  A  G  C  B  F
A 96 73  0  0  0 70  0
B 75 89  0  0  0  0 50
C  0  0 42 76  0 98  0
D 63  0 66 60  0  0  0
E  0 51 73  0 63  0  0
F  0  0 79 99 61  0  0
G 51 86  0  0 41  0  0 
```

如果您希望 A col 排在第一位，您可以使用： `vals [ , order( -colSums(vals >0) ) ]`。如果您可以满足于水平显示：

```
> apply( vals2 , 2, function(col) paste0(rownames(foo)[col>0], " (", col[col>0], ")" ) )
$A
[1] "C (42)" "D (66)" "E (73)" "F (79)"

$D
[1] "A (73)" "B (89)" "E (51)" "G (86)"

$E
[1] "A (96)" "B (75)" "D (63)" "G (51)"

$C
[1] "E (63)" "F (61)" "G (41)"

$G
[1] "C (76)" "D (60)" "F (99)"

$B
[1] "A (70)" "C (98)"

$F
[1] "B (50)" 
```

# android - newUploadPhotoRequest 失败，错误代码 324

> ID：14129861
> 
> 赞同：0
> 
> 时间：2013-01-02T21:57:36.077
> 
> 标签：android, facebook, facebook-graph-api

我正在尝试使用 Facebook for Android SDK 3.0 将文件（从字节数组）上传到 Facebook。`publish_actions`如 SDK 示例所示，我已添加权限。不过，我在上传时收到以下错误：

*{HttpStatus: 400, errorCode: 324, errorType: OAuthException, errorMessage: (#324) 需要上传文件}*

谷歌对此一无所知。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:08:48.350

你有相关的代码吗？这是我使用 Android SDK 上传照片的代码，我已经验证它可以工作：

```
 Request request6 = Request.newUploadPhotoRequest(
            session,
            ((BitmapDrawable) getResources().getDrawable(
                    R.drawable.picture)).getBitmap(), callback6);
    RequestAsyncTask task6 = new RequestAsyncTask(request6);
    task6.execute(); 
```

这是为方法提供 a `BitMap`，看起来你正在调用接受 a 的方法`File`。您必须选择提供一个`BitMap`或一个有效的`File`对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-13T17:54:33.913

就我而言，我发现使用 config Bitmap.Config.ALPHA_8 创建的位图对 newUploadPhotoRequest 无效。我尝试使用 Bitmap.Config.RGB_565 并且它有效。

# javascript - 理解 Javascript 构造函数：自定义创建方法

> ID：14129867
> 
> 赞同：1
> 
> 时间：2013-01-02T21:57:58.930
> 
> 标签：javascript

我试图更好地理解 Javascript 中的 OOP。有人可以解释在下面的示例中如何使用 create 方法和替代方法吗？我在网上查过它并查看了关于 SO 的几篇文章，但仍然没有牢牢掌握下面代码中发生的事情。我提供了评论来说明我的理解。请纠正我哪里错了。

此示例用于覆盖基类中的方法：

```
// Defines an Employee Class
function Employee() {}

// Adds a PayEmployee method to Employee
Employee.prototype.PayEmployee = function() {
    alert('Hi there!');
}

// Defines a Consultant Class and
// Invokes the Employee Class and assigns Consultant to 'this' -- not sure and not sure why
// I believe this is a way to inherit from Employee?
function Consultant() {
    Employee.call(this);
}

// Assigns the Consultant Class its own Constructor for future use -- not sure
Consultant.prototype.constructor = Consultant.create;

// Overrides the PayEmployee method for future use of Consultant Class
Consultant.prototype.PayEmployee = function() {
    alert('Pay Consultant');
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T22:18:35.997

这段代码：

```
function Consultant() {
    Employee.call(this);
} 
```

在调用 Consultant 构造函数时（即，在创建 Consultant 的实例时）调用 Employee 构造函数。如果 Employee 构造函数正在进行任何类型的初始化，那么在创建顾问“子类型”时调用它就很重要。

这段代码：

```
Consultant.prototype.constructor = Consultant.create; 
```

有点神秘。这意味着有一个名为 create 的函数，它是 Consultant 函数对象的一个​​属性。但是，在您发布的代码示例中，没有这样的属性。实际上，这一行正在分配`undefined`给 Consultant 构造函数。

您的问题没有问，但仅供参考，我认为您可能想要的*不是*create 函数的那一行，是这样的：

```
Consultant.prototype = new Employee();
Consultant.prototype.constructor = Consultant; 
```

这就是原型继承模式。这当然不是唯一或必然是最好的方法，但我喜欢它。

**更新**

如果 Employee 接受一个论点，你可以这样处理：

```
// Employee constructor
function Employee(name) {
    // Note, name might be undefined. Don't assume otherwise.
    this.name = name;
}

// Consultant constructor
function Consultant(name) {
    Employee.call(this, name);
}

// Consultant inherits all of the Employee object's methods.
Consultant.prototype = new Employee();
Consultant.prototype.constructor = Consultant; 
```

# c# - 当文本框在 MVC4 中失去焦点时会触发异步吗？

> ID：14129870
> 
> 赞同：0
> 
> 时间：2013-01-02T21:58:05.760
> 
> 标签：c#, ajax, asp.net-mvc, jquery

在我的 ASP.NET MVC4 应用程序中，我有一个剃刀视图，其中有一个强类型。这很简单..这里的主要是这个类中有`IsCorrect()`方法。

```
public class AbsoluteArithmetic
{
    public decimal? Result { get;set; }
    ....

    public override bool IsCorrect
    {
        get { return ... }
    }
} 
```

在下面看，我有一个文本框，其中包含一个名为 Result 的属性。另请参阅开始行的第一个代码，`@if (@Model.IsCorrect()) {`一开始我通过此方法更新图像。

所以，当文本框失去焦点时，我想再次更新或触发触发器来更新图像。我只是假设我需要使用 AJAX 和 JQuery，但我不知道我应该做什么。

```
@model Contoso.MvcApplication.Models.Exercises.AbsoluteArithmetic

<div>
@using(Html.BeginForm())
{
    @***** when the textbox loses the focus, update the following code*****@
    @if (@Model.IsCorrect()) {
    <img src="correct.png" />
    }
    else {
    <img src="error.png" />
    }
    @**********************************************************************@

    <span style="padding:3px; font-size:18px;">@Model.Number1</span>
    <span style="padding:5px; font-size:18px;">+</span>
    <span style="padding:5px; font-size:18px;">@Model.Number2</span>
    <span style="padding:5px; font-size:18px;">=</span>

    <span style="font-size:18px">@Html.TextBoxFor(model => model.Result, new { style = "width:60px; font-size:18px;" })</span>
}
</div> 
```

# python - shutil 复制错误

> ID：14129872
> 
> 赞同：-3
> 
> 时间：2013-01-02T21:58:18.150
> 
> 标签：python

我正在尝试将名为 test_target.sh（目标是此处的变量）的文件复制到作为目标位置的 ROOT，在尝试命名 test_target.sh 时遇到编译错误 ..有关如何修复它的任何输入？

import os import subprocess from subprocess import check_call,Popen, PIPE from shutil import copyfile

```
def main ():
    ROOT = '/local/mnt/workspace'
    target = 'msm8960'
    copyfile("./test_" + target + ".sh", ROOT + "./test_" + target + ".sh")

if __name__ == '__main__':
    main() 
```

错误：-

```
IOError: [Errno 2] No such file or directory: '/local/mnt/workspace./test_msm8960.sh 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T22:00:19.953

您想在字符串中包含`./`、 the`_`和 the ：`.sh`

```
copyfile("./test_" + target + ".sh", ROOT) 
```

就像那样，您也必须将其他值设为字符串，否则它们也应该失败：

```
ROOT = '/local/mnt/workspace'
target = 'wsc1234' 
```

此外，正如 ernie 在评论中正确注意到的那样`copyfile`，您的代码中不存在。如果你想这样使用它，你需要直接使用导入函数

```
from shutil import copyfile 
```

否则你需要`shutil.copyfile(...)`改用。

### 编辑

> 没有这样的文件或目录：'/local/mnt/workspace./test_msm8960.sh

该文件夹`workspace.`不存在。您应该使用`ROOT + "/test_" + target + ".sh"`目标文件名（注意缺少的点）。

# tfs - URL 作为 MTM/TFS 自动编码 UI 测试中的参数

> ID：14129878
> 
> 赞同：0
> 
> 时间：2013-01-02T21:58:50.383
> 
> 标签：tfs, automated-tests, microsoft-test-manager

使用 MTM，我在客户端站点上记录了一个测试，然后创建了一个自动编码的 UI 测试。我想在几个具有相同用户界面的客户端站点上运行相同的测试。是否可以传入不同的 URL 并以其他方式重用 codedUI 测试，或者是否有必要在每个不同的 URL 上记录每个测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T00:19:55.870

我会研究[数据驱动测试](http://msdn.microsoft.com/en-us/library/ee624082.aspx)。这样，在您的测试用例中，您可以提供任意数量的 URL *（每行，因此每个都是单独的迭代）*，并且测试将为每个 URL 运行一次。您需要将 DataSource 添加到`[TestMethod]`. 该链接应该可以帮助您进行设置。

编辑：您还可以使用其他数据源，但我认为 MTM 是您的偏好。

# android - 如何在 Android 中捕捉 HOME 动作

> ID：14129882
> 
> 赞同：0
> 
> 时间：2013-01-02T21:59:02.067
> 
> 标签：android

> **可能重复：**
> [Android - 如何捕捉到主页按钮被按下？](https://stackoverflow.com/questions/4101346/android-how-to-catch-that-the-home-button-was-pressed)

有没有办法在按下 HOME 键时停止进入主屏幕？

基本上，我想限制用户在使用我的应用程序时走出主屏幕，所以我应该限制 HOME 和 BACK 键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T22:00:03.753

实现您自己的主屏幕。如果用户选择让您的应用程序成为他们的主屏幕，您可以在用户按下 HOME 时获得控制权。您可以在 SDK 示例中查看示例主屏幕应用程序，可从 SDK 管理器下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:02:59.370

这是一个解决方案：

[在 Android 中拦截 HOME 键](http://nisha113a5.blogspot.in/2012/01/intercept-home-key-android.html)

# php - 使用 PHP mysqli 行时的奇怪行为

> ID：14129883
> 
> 赞同：1
> 
> 时间：2013-01-02T21:59:05.243
> 
> 标签：php, arrays, mysqli

我目前正在将 PHP 脚本从 5.4 版本的 PHP 服务器转换为 5.3 版本的 PHP 服务器

我立即注意到我们的登录脚本中有一个奇怪的行为。

在对脚本进行了一番分析之后，我找到了问题的根源。

> 对 $result->fetch_row 中第一行成员的调用无效。

$result 的声明如下所示：

```
$username = $mysqli->real_escape_string(strtolower($_POST["USERNAME"]));
$password = $mysqli->real_escape_string(md5(strtolower($_POST["PASSWORD"])));

$result = $mysqli->query("SELECT * FROM $table WHERE username='$username' AND password='$password'"); 
```

但是，出于本能，我检查了是否正确调用了 data_seek；我有。

打印出 fetch_row() 函数给了我以下结果

> 数组（[0] => 3 [1] => admin [2] => d76362b0f640fbcf869033b5e4d1c4bf [3] => Mr [4] => Rasmus [5] => 4 [6] => [7] => 0）

因此，该阵列正在工作。

但是下面的声明不起作用。

> $Title = $result->fetch_row()[3];

因此，我尝试将整行存储在单个数组对象中，然后单独调用所有子成员。

像这样：

```
$row = $result->fetch_row();
$Title = $row[3]; 
```

它工作得很好。

**怎么会？这个声明有什么问题：**

> $Title = $result->fetch_row()[3];

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T22:10:29.140

PHP 5.4 中引入了直接从调用方法中引用返回数组元素的能力——这就是它在 5.3 中不起作用的原因。

[来自http://php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)上的示例 #7

> 从 PHP 5.4 开始，可以直接对函数或方法调用的结果进行数组取消引用。以前只能使用临时变量。

因此，您的临时解决方案看起来将成为长期解决方案:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T22:04:21.853

您说您正在将脚本从 PHP 5.4 转换为 PHP 5.3。显然你忘记了那条线，因为

```
$Title = $result->fetch_row()[3]; 
```

不是有效的 PHP 5.3。你应该得到一个错误读数：

> 解析错误：语法错误，意外 '['，期待 ',' 或 ';' 在 ...

[笔记](http://php.net/manual/en/migration54.new-features.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T22:05:29.953

如您在PHP.net的[发行说明中所见](http://php.net/manual/en/migration54.new-features.php)

`functionname()[1]`是 PHP 5.4 中添加的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T22:09:00.580

在 PHP 5.3 及更高版本中无法直接取消引用函数调用的结果，但从 PHP 5.4 开始可以

# c# - 哪个控件可以构建十六进制编辑器？

> ID：14129885
> 
> 赞同：3
> 
> 时间：2013-01-02T21:59:17.537
> 
> 标签：c#, wpf, xaml, hex-editors

我想使用 XAML/WPF 和 C# 创建一个十六进制编辑器，但我需要某种表格控件来显示文件内容。它应该在每列中有一个文本框来查看地址、查看和编辑十六进制值和 ASCII 值。

后来我想添加额外的列，比如 Unicode 什么的。用户应该能够查看/隐藏列。

我需要什么控件来做到这一点？

我想到了 a `ListView`，用 a`GridView`来定义每个 Column 中的 Columns 和一个 TextBox。但`ListView`更多的是`Multi-Row`控制。你能给我一个关于我应该使用哪个控件的提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:04:10.807

编辑：不过，我同意该评论，如果现有的 Be.HexEditor 控件满足您的需求，那将是最佳选择。

否则，我可能会推荐[DataGrid](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.aspx)用于这种表格查看和输入。如果你搜索谷歌有很多例子和教程（比如[这个](http://wpftutorial.net/DataGrid.html)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-13T20:42:17.207

你可以查看我的项目。Wpf 十六进制编辑器。我认为它可以帮助你:)

您可以在 Wpf 或 WinForm 应用程序中非常轻松地使用它。下载代码并测试 Wpf（C#、VB.NET）和 WinForm (C#) 示例。

[https://github.com/abbaye/WPFHexEditorControl](https://github.com/abbaye/WPFHexEditorControl)

```
<!-- XAML -->
<Control:HexaEditor/>
<Control:HexaEditor Width="NaN" Height="NaN"/>
<Control:HexaEditor Width="Auto" Height="Auto"/>
<Control:HexaEditor FileName={Binding FileNamePath} Width="Auto" Height="Auto"/> 
```

![图片1](../Images/fb6c695073f4d3585c7d0274f2b2718a.png)

# c# - 将 xsd 文件值添加到 XmlAttribute

> ID：14129886
> 
> 赞同：0
> 
> 时间：2013-01-02T21:59:19.027
> 
> 标签：c#, xml

我如何使用下面的代码创建正确 xml 的 xml 字符串..

```
string myInputXmlString = @"<ApplicationData>
                                        <something>else</something>
                                    </ApplicationData>";
        var doc = new XmlDocument();
        doc.LoadXml(myInputXmlString);

        XmlAttribute newAttr = doc.CreateAttribute(
            "xsi", 
            "noNamespaceSchemaLocation", 
            "http://www.w3.org/2001/XMLSchema-instance");
        doc.DocumentElement.Attributes.Append(newAttr);

        var ms = new MemoryStream();
        XmlWriterSettings ws = new XmlWriterSettings
        {
            OmitXmlDeclaration = false,
            ConformanceLevel = ConformanceLevel.Document,
            Encoding = UTF8Encoding.UTF8
        };
        var tx = XmlWriter.Create(ms, ws);
        doc.Save(tx);
        tx.Flush();

        var xmlString = UTF8Encoding.UTF8.GetString(ms.ToArray());
        Console.WriteLine(xmlString); 
```

如何向其中添加 xsd 信息，使 xml 看起来像这样（包括“FullModeDataset.xsd”？

```
 <ApplicationData
  xsi:noNamespaceSchemaLocation="FullModeDataset.xsd"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" /> 
```

而不是当前代码输出的这个

```
 <ApplicationData
  xsi:noNamespaceSchemaLocation=""
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:19:46.210

这是偶然的吗？

```
doc.DocumentElement.SetAttribute("noNamespaceSchemaLocation", 
        "http://www.w3.org/2001/XMLSchema-instance",
        "FullModeDataset.xsd"); 
```

# javascript - 使用下拉菜单显示表格中的隐藏行

> ID：14129887
> 
> 赞同：2
> 
> 时间：2013-01-02T21:59:20.080
> 
> 标签：javascript, select, drop-down-menu, html-table, hidden

我有一些看起来相当简单的东西，但我很难过。我想要一个影响显示多少表行的表中的下拉列表。默认情况下，仅显示 2 行。通过在下拉列表中选择 4，应显示 4 行。我只看到其中一个隐藏的行出现了，我也尝试将 2 行包装在一个隐藏的 div 中，但没有运气。想法？

```
 <table border="1">
          <tr>
            <td class="noBG" colspan="3">
              <select id="displayText" onchange="javascript:toggle();">
                <option>2</option>
                <option>4</option>
              </select>Items
            </td>
          </tr>
          <thead>
            <tr>
              <th>Dates</th>
              <th>Time</th>
              <th>Person</th>
            </tr>
          </thead>
            <tr>
              <td>12/3</td>
              <td>12:45</td>
              <td>John Doe</td>
            </tr>
            <tr>
              <td>12/4</td>
              <td>12:45</td>
              <td>James Doe</td>
            </tr>
            <tr id="toggleText" style="display: none">
              <td>12/4</td>
              <td>12:45</td>
              <td>Janey Doe</td>
            </tr>
            <tr id="toggleText" style="display: none">
              <td>12/4</td>
              <td>12:45</td>
              <td>Janey Doe</td>
            </tr>
        </table>

        <script language="javascript"> 
        function toggle() {
            var ele = document.getElementById("toggleText");
            if(ele.style.display == "block") {
                    ele.style.display = "none"; 
            }
            else {
                ele.style.display = "block";
            }
        } 
        </script>
        ​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:46:41.813

使用`display: block;`不起作用，因为表格行将不会以正确的方式显示。但是您可以通过添加和删除一个类来切换可见性，该类使用`display: none;`. 所以你一定不能切换`display: none/block;`，而是类。

这有效（包括 jQuery）：http: [//jsfiddle.net/Yuvvc/1/](http://jsfiddle.net/Yuvvc/1/)

您可以将以下代码用于 JS 函数：

```
function toggle() {
    $.each($('tr[name=toggleText]'), function() {
        $(this).toggleClass("hiddenRow", $(this).attr('class') != "hiddenRow");
    });
} 
```

使用第二个参数 (bool)`.toggleClass`可以添加和删除类。

*编辑*

这是一个非 jQuery 版本：

```
function toggle() {
    var rows = document.getElementsByName("toggleText");
    for(var i=0; i<rows.length; i++)
    {
        rows[i].className = (rows[i].className == "hiddenRow") ? "" : "hiddenRow";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:21:12.130

将所有更改`<tr id="toggleText"`为`<tr name="toggleText"`，然后将切换功能更改为以下内容：

```
function toggle() {
    var ele = document.getElementsByName("toggleText");
    for (var i = 0; i < ele.length; i++) {
        if (ele[i].style.display == "block") { 
            ele[i].style.display = "none";
        }
        else {
            ele[i].style.display = "block";
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-30T10:07:49.120

您可以通过给每一行一个像这样的 id 来切换隐藏的行：

```
<table class="table">
@foreach (var item in Model)
{
    <tr>
        <td onclick="toggle1(@item.ID)" colspan="3">

            @Html.DisplayFor(modelItem => item.Name)

        </td>
    </tr>

    <tr class="hidden" id="bluh_@item.ID">

        <td>

            @Html.DisplayFor(modelItem => item.Code)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Position)
        </td>
    </tr>

} 
```

然后使用 JavaScript 隐藏和显示子行

```
<script>
    function toggle1(something) {
        $("#bluh_"+something).toggleClass('hidden');
    }
</script> 
```

# spring-mvc - 春天和冬眠

> ID：14129889
> 
> 赞同：-3
> 
> 时间：2013-01-02T21:59:30.077
> 
> 标签：spring-mvc

我是spring的初学者，我有一个搜索表单，我想出错或表单为空白，它将我发送到错误页面，否则将我发送到页面结果。

如果有人可以帮助我，谢谢

这是我的代码。

```
 @SuppressWarnings( { "unchecked" })
@RequestMapping("/search.html")
public String findAllData(Map model, SearchForm seachForm) {
    model.put("allData", searchService.searchData(seachForm));

    if("seachForm"!=null)
    {
            return "displayForm";
    }
    else
    {

            return "redirect:/searchForm.htm";

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:03:24.053

```
if("seachForm"!=null){
        return "displayForm";
}else{
        return "redirect:/searchForm.htm";
} 
```

seachForm 不是字符串，尝试使用

```
if(seachForm != null){
        return "displayForm";
}else{
        return "redirect:/searchForm.htm";
} 
```

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T05:21:46.070

正如 MG_Bautista 显示`searchForm`的那样，绝对不是 String （你应该得到一个编译错误），但`searchForm`也永远不会是`null`. 它只是一堆零长度的字符串。您必须遍历所有`searchForm`类似的字段

```
if ("".equals(searchForm.getUserName()) && 
    "".equals(searchForm.getAddress())) {
        return "displayForm";
} else {
        return "redirect:/searchForm.htm";
} 
```

# reporting-services - SSRS 2005 - 获取公司所有男性/女性的平均年龄

> ID：14129891
> 
> 赞同：0
> 
> 时间：2013-01-02T21:59:39.400
> 
> 标签：reporting-services

我必须非常接近得到这个，但我的表达式仍然返回#Error。

我需要返回我的数据集中所有性别为“F”/“M”的员工的平均年龄

我已经尝试了以下所有方式的修订，但无济于事。

```
=IIF(Fields!CustGender.Value = "F", Avg(Fields!Age.Value,"ReportDataset"),Nothing) 
```

然后，当然我会用“M”做同样的事情

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:10:08.407

我相信我得到了这个...

```
=Avg(IIF(Fields!CustGender.Value = "M", CDec(Fields!Age.Value),Nothing),"ReportDataset") 
```

现在，只需转换为 int 即可去掉 8-9 位小数点。

# objective-c - Cocos2d中如何处理CCMenuItem

> ID：14129892
> 
> 赞同：1
> 
> 时间：2013-01-02T21:59:39.290
> 
> 标签：objective-c, cocos2d-iphone, ccmenuitem

我是 Cocos2d 的新手，尝试从普通的 Cocoa Touch 移植到 Cocos2d 游戏。

我通过自定义方法创建了一些按钮：

```
+ (CCMenuItem *)createMenuItemImageWithNormalImage:(NSString *)normalImage selectedImage:(NSString *)selectedImage tag:(int)tag target:(id)target selector:(SEL)selector position:(CGPoint)position {

    CCMenuItem *item = [CCMenuItemImage itemWithNormalImage:normalImage selectedImage:selectedImage];
    item.tag = tag;
    [item setTarget:target selector:selector];
    item.position = [TSCCTransform transformPositionFromCocoaTouchToCocos2d:CGPointMake(position.x, position.y)];

    return item;
} 
```

按钮：

```
 [self addChild:[TSCCLayer createMenuItemImageWithNormalImage:@"btn-mouse-dec.png" selectedImage:@"btn-mouse-dec.png" tag:0 target:self selector:@selector(changeNumberOfPlayers:) position:ccp([TSCCTransform winSizeWidth] - 140, 146)]]; 
```

但是当我点击它时什么也没发生。问题出在哪里？如何正确执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:26:08.530

您不必向其中添加菜单项，而是添加菜单。

将该 CCMenuItem 添加到 CCMenu，然后将菜单添加为图层的子图层：

```
CCMenuItem* item=[TSCCLayer createMenuItemImageWithNormalImage:@"btn-mouse-dec.png" selectedImage:@"btn-mouse-dec.png" tag:0 target:self selector:@selector(changeNumberOfPlayers:) position:ccp([TSCCTransform winSizeWidth] - 140, 146)]
CCMenu* menu= [CCMenu menuWithItems: item, nil];  // item becomes child of menu
[self addChild: menu]; 
```

# ruby-on-rails - Rspec嵌套控制器创建方法不会将计数增加1

> ID：14129894
> 
> 赞同：2
> 
> 时间：2013-01-02T21:59:41.677
> 
> 标签：ruby-on-rails, rspec, nested, associations, nested-attributes

我正在测试一个发票模型（一个客户有很多发票，一个发票属于一个客户）并试图检查 create 方法是否有效。

这就是我想出的：

```
before do
  @valid_invoice = FactoryGirl.create(:invoice)
  @valid_client = @valid_invoice.client
end

it "creates a new Invoice" do
    expect {
      post :create, { invoice: @valid_client.invoices.build(valid_attributes), client_id: @valid_client.to_param }
    }.to change(Invoice, :count).by(1)
  end 
```

这是我的发票工厂：

```
FactoryGirl.define do
    factory :invoice do
        association :client
        gross_amount 3.14
        net_amount 3.14
        number "MyString"
        payment_on "2013-01-01"
        vat_rate 0.19
    end
end 
```

这是 invoices_controller 中的 create 方法：

```
def create
@client = Client.find(params[:client_id])
@invoice = @client.invoices.build(params[:invoice])

respond_to do |format|
  if @invoice.save
    format.html { redirect_to([@invoice.client, @invoice], :notice => 'Invoice was successfully created.') }
    format.json { render :json => @invoice, :status => :created, :location => [@invoice.client, @invoice] }
  else
    format.html { render :action => "new" }
    format.json { render :json => @invoice.errors, :status => :unprocessable_entity }
  end
end
end 
```

这些是有效属性，即成功创建发票所需的属性：

```
def valid_attributes
{
  gross_amount: 3.14,
  net_amount: 3.14,
  number: "MyString",
  payment_on: "2013-01-01",
  vat_rate: 0.19
}
end 
```

这些都是有效的。也许缺少client_id？

它只是告诉我计数没有改变一 - 所以我不确定问题是什么。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:38:44.457

@gregates - 你的回答是对的，你为什么要删除它？:-) 再次发布，我会检查它作为最佳答案。

这是解决方案：

```
post :create, { invoice: valid_attributes, client_id: @valid_client.to_param }, valid_session 
```

代替

```
post :create, { invoice: @valid_client.invoices.build(valid_attributes), client_id: @valid_client.to_param } 
```

在测试中。

Also, I had to change the number in the valid_attributes. Debugging every single validation showed me that it was the same as in the factory - but must instead be unique. This solved it for me! Thanks for everyone's help!

# mysql - 使用休眠将枚举存储在数据库中

> ID：14129896
> 
> 赞同：1
> 
> 时间：2013-01-02T21:59:58.410
> 
> 标签：mysql, hibernate, enums, java-7

我需要使用 Hibernate 存储一个对象，但是这个对象使用一个枚举。我可以存储，但是当我尝试再次检索它时，失败并出现以下错误：“Studies is not mapped [FROM Studies]”。我在互联网上尝试了很多解决方案，但没有任何效果。我使用 MySQL 数据库

这是枚举：

```
public enum StudyStatus {

    Created("Created"), Started("Started"), Closed("Closed");

    private final String value;

    StudyStatus(String value){
        this.value = value;
    }

    public static StudyStatus fromValue(int value){
        for (StudyStatus status : values()) {  
            if (status.value.equals(value)) {  
                return status;  
            }  
        }  
        throw new IllegalArgumentException("Invalid status: " + value);  
    }

    public String toValue(){
        return value;
    }

} 
```

这是 EnumUserType 类

```
import java.io.Serializable;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Types;
import java.util.Properties;

import org.hibernate.HibernateException;
import org.hibernate.engine.spi.SessionImplementor;
import org.hibernate.type.AbstractStandardBasicType;
import org.hibernate.type.IntegerType;
import org.hibernate.type.StringType;
import org.hibernate.usertype.EnhancedUserType;
import org.hibernate.usertype.ParameterizedType;

public abstract class AbstractEnumUserType<E extends Enum<E>, V> implements
    EnhancedUserType, ParameterizedType {

public static int DEAFAULT_SQL_TYPE = Types.INTEGER;

private PreparedStatementSetter psSetter;

private AbstractStandardBasicType<?> basicType;

protected abstract Class<E> getEnumClass();

protected abstract Class<V> getValueClass();

protected abstract E convertEnum(V rawValue);

protected abstract V convertSqlValue(E enumValue);

protected int getSqlType() {
    int sqlType = Types.OTHER;
    switch (getValueClass().getName()) {
    case "java.lang.String":
        sqlType = Types.VARCHAR;
        break;
    case "java.lang.Integer":
        sqlType = Types.INTEGER;
        break;
    default:
        break;
    }

    return sqlType;
}

// ////////////////////////////

@Override
public int[] sqlTypes() {
    return new int[] { getSqlType() };
}

@Override
public Class<?> returnedClass() {
    return getEnumClass();
}

@Override
public boolean equals(Object x, Object y) throws HibernateException {
    return (x == y);
}

@Override
public int hashCode(Object x) throws HibernateException {
    return (x == null) ? 0 : x.hashCode();
}

@Override
public Object nullSafeGet(ResultSet rs, String[] names,
        SessionImplementor session, Object owner)
        throws HibernateException, SQLException {
    Object rawValue = basicType.nullSafeGet(rs, names[0], session, owner);
    Object enumValue = (rawValue == null) ? null
            : convertEnum((V) rawValue);
    return enumValue;
}

@Override
public void nullSafeSet(PreparedStatement st, Object value, int index,
        SessionImplementor session) throws HibernateException, SQLException {
    if (value == null) {
        st.setNull(index, Types.VARCHAR);
    } else {
        psSetter.set(st, convertSqlValue((E) value), index);
    }
}

@Override
public Object deepCopy(Object value) throws HibernateException {
    return value;
}

@Override
public boolean isMutable() {
    return false;
}

@Override
public Serializable disassemble(Object value) throws HibernateException {
    return (Serializable) value;
}

@Override
public Object assemble(Serializable cached, Object owner)
        throws HibernateException {
    return cached;
}

@Override
public Object replace(Object original, Object target, Object owner)
        throws HibernateException {
    return original;
}

@Override
public void setParameterValues(Properties parameters) {
    // Initialize Method
    initBasicType();
    initPreparedStatementSetter();
}

@Override
public String objectToSQLString(Object value) {
    return '\'' + ((Enum<?>) value).name() + '\'';
}

@Override
public String toXMLString(Object value) {
    return ((Enum<?>) value).name();
}

@Override
public Object fromXMLString(String xmlValue) {
    // TODO
    throw new IllegalAccessError();
    // return Enum.valueOf(, xmlValue);
}

protected void initBasicType() {

    switch (getSqlType()) {
    case Types.VARCHAR:
        basicType = StringType.INSTANCE;
        break;
    case Types.INTEGER:
        basicType = IntegerType.INSTANCE;
        break;
    default:
        break;
    }
}

protected void initPreparedStatementSetter() {
    // TODO
    switch (getSqlType()) {
    case Types.VARCHAR:
        psSetter = new StringPreparedStatementSetter();
        break;
    case Types.INTEGER:
        psSetter = new IntPreparedStatementSetter();
    default:
        break;
    }
}

private static interface PreparedStatementSetter {
    void set(PreparedStatement st, Object value, int index)
            throws SQLException;
}

private static class StringPreparedStatementSetter implements
        PreparedStatementSetter {
    @Override
    public void set(PreparedStatement st, Object value, int index) {
        try {
            st.setString(index, (String) value);
        } catch (SQLException e) {
        }
    }
}

private static class IntPreparedStatementSetter implements
        PreparedStatementSetter {
    @Override
    public void set(PreparedStatement st, Object value, int index) {
        try {
            st.setInt(index, (Integer) value);
        } catch (SQLException e) {
        }
    }
}

} 
```

有枚举的类

```
import java.util.ArrayList;

import ateam.capi.common.enums.StudyStatus;

public class Study {

private String id;
private String name;
private StudyStatus status;
private ArrayList<User> pollsters;
private Questionnaire actualQuestionnaire;

public Questionnaire getActualQuestionnaire() {
    return actualQuestionnaire;
}

public void setActualQuestionnaire(Questionnaire actualQuestionnaire) {
    this.actualQuestionnaire = actualQuestionnaire;
}

public String getId() {
    return id;
}

public void setId(String id) {
    this.id = id;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public StudyStatus getStatus() {
    return status;
}

public void setStatus(StudyStatus status) {
    this.status = status;
}

public ArrayList<User> getPollsters() {
    return pollsters;
}

public void setPollsters(ArrayList<User> pollsters) {
    this.pollsters = pollsters;
}

} 
```

这是映射 Study 类的 XML

```
<hibernate-mapping package="ateam.capi.common.beans">
    <class name="Study" table="Studies">
        <id name="id" column="id"></id>
        <property name="name"/>
        <property name="status">
             <type name="ateam.capi.capipersistence.utils.EnumUserType">
                <param name="enumClassName">
                    ateam.capi.common.enums.StudyStatus
                </param>
             </type>
        </property>
    </class>
</hibernate-mapping> 
```

学习DAO类

```
import java.util.List;

import org.hibernate.HibernateException;
import org.hibernate.Query;
import org.hibernate.Session;
import org.hibernate.Transaction;

import ateam.capi.capipersistence.utils.HibernateUtil;
import ateam.capi.common.beans.Questionnaire;
import ateam.capi.common.beans.Study;

public class DAO_Study {

private Session session;
private Transaction tx;

public void saveStudy(Study study) throws HibernateException{
    try{
        initOperations();
        session.save(study);
        tx.commit();
    } catch (HibernateException ex){
        handleException(ex);
        throw ex;
    } finally{
        if (session!=null){
            session.close();
        }
    }
}

public void deleteStudy(Study study) throws HibernateException{ 
    try{ 
        initOperations(); 
        this.session.delete(study); 
        this.tx.commit(); 
    } catch (HibernateException ex){ 
        handleException(ex); 
        throw ex; 
    } finally{ 
        if (session!=null){
            session.close();
        } 
    }
}

public List<Study> getStudiesList() throws HibernateException{ 
    List<Study> studiesList = null;  
    try{ 
        initOperations(); 
        String hql = "FROM Studies";
        Query query = session.createQuery(hql);
        studiesList = query.list();
    } catch (HibernateException ex){ 
        handleException(ex); 
        throw ex; 
    } finally{ 
        if (session!=null){
            session.close();
        } 
    } 
    return studiesList; 
}

private void initOperations() throws HibernateException{
    HibernateUtil.createSession();
    this.session = HibernateUtil.getSessionFactory().openSession();
    this.tx = this.session.beginTransaction();
}

private void handleException(HibernateException ex) throws HibernateException{
    this.tx.rollback();
    System.out.println(ex.getStackTrace());
    throw ex;
}

} 
```

我将 Java7 与 hibernate 4.1.8 一起使用，我找到了其他解决方案，但在 java7 中不起作用

任何想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:06:15.267

`from study`您的查询不应该看起来像`from studies`吗？研究是表而不是定义的实体。

# python - 从 HTML 中挑选图片 URL

> ID：14129900
> 
> 赞同：1
> 
> 时间：2013-01-02T22:00:08.527
> 
> 标签：python, sed, awk, html-parsing

我试图从一个非常长的 html 文件中挑选出图像的 url。该文件看起来像这样：

```
...Lots_of_html><a href=somelink.com>Human Readable Text</a><img src="http://image.com">.... 
```

我想从上面的 html 中挑选出[http://image.com](http://image.com)，我试过以下没有运气：

```
sed -n ‘s%.*src=%%;s%\".*%%p’ image_urls.txt

sed -n ‘s%.*src=%%;s%\".*%%p’ image_urls.txt

import re
rex = re.compile(r'src=.(.*?)>',re.S|re.M)
data="<long html string>"
match = rex.match(data) 
```

我在正则表达式方面没有太多经验，所以我想上面有一些基本错误。如果有任何帮助，我将不胜感激，但特别是我想让其中一个 sed 命令正常工作，以便轻松集成到 bash 脚本中。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T23:16:28.437

由于您将其标记为 Python，因此我将使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)：

> Beautiful Soup 解析你给它的任何东西，并为你做树遍历的东西。您可以告诉它“查找所有链接”，或“查找类 externalLink 的所有链接”，或“查找所有 url 匹配“foo.com”的链接，或“查找带有粗体文本的表格标题，然后给出我那条短信。”

```
>>> from bs4 import BeautifulSoup
>>> html = """<a href=somelink.com>Human Readable Text</a><img src="http://image.com">"""
>>> soup = BeautifulSoup(html)
>>> img_tags = soup.find_all("img")
>>> for img in img_tags:
>>> ...     print img.get("src")
http://image.com 
```

或者你可以做得更简单：

```
>>> soup.find_all("img", src="http://image.com")
[<img src="http://image.com"/>] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T22:10:41.110

更好地使用模块`urllib2`+`lxml`使用[xpath](/questions/tagged/xpath "显示标记为“xpath”的问题")查询。一个例子 ：

```
#!/usr/bin/env python
# -*- coding: utf8 -*-
# vim:ts=4:sw=4

import cookielib, urllib2
from lxml import etree

cj = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
page = opener.open("http://stackoverflow.com/q/14129900/465183")
page.addheaders = [('User-agent', 'Mozilla/5.0')]
reddit = etree.HTML(page.read())

for img in reddit.xpath('//img/@src'):
    print img 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T22:10:34.257

**perl**

由于您已经有两个 python 解决方案，这里有一种方法可以使用 perl WWW::Mechanize：

```
perl -MWWW::Mechanize -e '
  $m = WWW::Mechanize->new;
  $m->get($ARGV[0]);
  $m->dump_images(undef, 1)' file://`pwd`/image_urls.txt 
```

**sed**

如果您可以对输入做出一些假设，则可以使用简单的 sed 正则表达式。

以下是如何将 sed 与您提供的测试数据一起使用：

```
sed -n 's%.*src="\([^"]*\)".*%\1%p' 
```

这将捕获引号之间的内容`\1`并删除其他所有内容。

您也可以按照自己的方式进行操作，注意匹配的内容。您的第二个替代命令删除了太多。这是避免它的一种方法：

```
sed -n 's%.*src="%%; s%".*%%p' 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-08-25T01:39:06.123

您可以使用此功能。

```
#
#
# get_url_images_in_text()
#
# @param html - the html to extract urls of images from him.
# @param protocol - the protocol of the website, for append to urls that not start with protocol.
#
# @return list of images url.
#
#
def get_url_images_in_text(html, protocol):
    urls = []
    # Do regex for get all images urls, here i get only urls of png and jpg but you can add any prefix that you want.
    all_urls = re.findall(r'((http\:|https\:)?\/\/[^"\' ]*?\.(png|jpg))', html, flags=re.IGNORECASE | re.MULTILINE | re.UNICODE)
    for url in all_urls:
        if not url[0].startswith("http"):
            urls.append(protocol + url[0])
        else:
            urls.append(url[0])

    return urls

#
#
# get_images_from_url()
#
# @param url - the url for extract images url from him. 
#
# @return list of images url.
#
#
def get_images_from_url(url):
    protocol = url.split('/')[0]
    resp = requests.get(url)
    return get_url_images_in_text(resp.text, protocol) 
```

# asp.net - 在网格视图中选择特定记录

> ID：14129904
> 
> 赞同：0
> 
> 时间：2013-01-02T22:00:14.900
> 
> 标签：asp.net, vb.net, gridview

我无法让 text.contains("9999999") 语句返回 true。索引为 1 的列具有 ID#。这些 id 带有锚标记，如果 id 编号为 9999999，我需要删除这些标记。主 if 语句中的所有其他内容都可以正常工作。

```
If e.Row.RowType = DataControlRowType.DataRow Then
        lDate = e.Row.Cells(8).Text
        e.Row.Cells(7).Text = ConvertDate(e.Row.Cells(7).Text, True)
        e.Row.Cells(8).Text = ConvertDate(e.Row.Cells(8).Text, True)

        If e.Row.Cells(1).Text.Contains("9999999") = True Then
            Regex.Replace(e.Row.Cells(1).Text, "</?(a|A).*?>", "")
            Dim yoasd As String = e.Row.Cells(1).Text
        End If

        If e.Row.Cells(8).Text.Trim = "" Or lDate < lToday Then
            e.Row.BackColor = Drawing.Color.BurlyWood
        End If
    End If 
```

我也试过：

```
If e.Row.Cells(1).Text = "9999999"
If e.Row.Cells(1).Text.Trim = "9999999"
If e.Row.Cells(1).Text.Contains("9999999") Then 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:06:13.277

你可以在你的 RowDataBound 上试试这个

```
If e.Row.RowType = DataControlRowType.DataRow Then
dim toberemoved as string = DataBinder.Eval(e.Row.DataItem, "ColumName")
if toberemoved = "9999999" then
Regex.Replace(e.Row.Cells(1).Text, "</?(a|A).*?>", "")
//Morestuff here
End If
End If 
```

请记住将 ColumName 替换为列的实际名称

*未测试从内存构建。

# jquery - jquery ajax 在 IE 上工作，而不是在 Firefox/Chrome 上

> ID：14129913
> 
> 赞同：0
> 
> 时间：2013-01-02T22:00:47.607
> 
> 标签：jquery

我有一个使用 jquery 的简单 Ajax 调用：

```
jQuery(".deletebutton").on("click", function() {
    if (confirm("Are you sure you want to delete?"))
    {
        jQuery.ajax({
            url: 'index.php?option=com_recordings&task=deletevideos&format=raw',
            type: "POST",
            success: function(data){
                console.log("anything?"); //never get here with FF and Chrome
                if (data == 'blah')
                {
                    alert("success"); //only with IE
                }
            }
        });
    }
}); 
```

网址很奇怪，因为我正在使用 Joomla 组件开发。它本质上指向一个具有`echo "blah";`. html 只是一个带有 class 的按钮`deletebutton`。

在 IE 上，此代码工作正常并触发警报。在 FF 和 Chrome 上它不起作用。检查`jqXHR.status`显示它返回 0。我在 Firebug 中看不到任何指向我这里问题的东西。知道发生了什么吗？

**编辑：**我注意到它与我的 html 按钮有关。当前按钮在表单内：

```
 <form name="myform" action="">
        <table id="webcam-table" class="pretty">
            <thead>
            <tr>
                <th>Camera Name</th>
                <th>Date Created</th>
                <th>Video Size</th>
                <th>Video Length</th>
                <th>
                    <input type="checkbox" name="checkboxselectall" title="Select All" />
                    <button class="deletebutton" title="Delete the selected videos" >Delete</button>
... //a table with checkboxes (for the form) and other stuff
</form> 
```

但是如果我在这个表单之外创建一个简单的按钮，我的 ajax 调用会按预期工作。这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:19:25.043

更新我的 jQuery 版本后，我成功运行了您的代码。on() 函数是在 1.7 版中引入的。以下代码有效。我将变量传递给 blah.php，将它们传回并在警报中回显它们。

```
$(document).ready(function(){
    jQuery(".deletebutton").on("click", function(event) {
        if (confirm("Are you sure you want to delete?")){
            jQuery.ajax({
                url: 'blah.php?option=com_recordings&task=deletevideos&format=raw',
                type: "POST",
                success: function(data){
                    alert(data);
                }
            });
        }
    });
}); 
```

这是blah.php：

```
<?php
echo $_GET['option'].' '.$_GET['task'].' '.$_GET['format']; 
```

这是body标签的内容：

```
<body>
    <form name="myform" action="">
        <table id="webcam-table" class="pretty">
            <thead>
            <tr>
                <th>Camera Name</th>
                <th>Date Created</th>
                <th>Video Size</th>
                <th>Video Length</th>
                <th>
                    <input type="checkbox" name="checkboxselectall" title="Select All" />
                    <button class="deletebutton" title="Delete the selected videos" >Delete</button>
                </th>
             </tr>
             </thead>
         </table>
    </form>
</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:14:22.837

在过去的几个小时里，我一直在为此苦苦挣扎。我遇到了这个帖子。似乎还没有完全解决...您实际上在答案中提示了我...

默认情况下，一个 <button> 与 <input type="submit> 相同。这意味着该按钮正在尝试提交您的表单。当您将按钮移出表单时，您自己提示了该按钮。

所以发生的事情是，只要您单击按钮，按钮处理程序就会启动并运行 ajax 调用。然后，按钮处理程序在 ajax 调用返回数据之前完成。然后提交处理程序运行。在从 ajax 调用取回数据之前，您最终会提交页面。ajax 调用检测到这一点并中止。中止导致错误函数正在运行，但没有好的数据，因此错误代码为零 (0)。

为什么这适用于 IE 而不是 FF 和 Chrome，很可能是 IE 如何处理按钮处理程序的问题。

解决方案是使用 preventDefault 阻止提交处理程序运行。所以你的代码看起来像......

```
$(document).ready(function(){
    jQuery(".deletebutton").on("click", function(event) {
        event.preventDefault();
        event.stopPropagation();

        if (confirm("Are you sure you want to delete?")){
            jQuery.ajax({
                url: 'blah.php?option=com_recordings&task=deletevideos&format=raw',
                type: "POST",
                success: function(data){
                    alert(data);
                }
            });
        }

        return false;
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T07:15:37.463

嘿，实际上这是跨域问题，所以由于安全问题，一些 ajax 无法在 chrome 上运行......

**在 chrome 中，您可以**通过使用以下过程手动禁用网络安全来运行它

1.  打开**命令提示符**（运行> cmd）
2.  键入以下命令

    ```
    "C:\Program Files\Google\Chrome\Application\chrome.exe" --disable-web-security 
    ```

笔记

1.  运行此命令时，Chrome 将关闭。
2.  `C:\Program Files\Google\Chrome\Application\chrome.exe`您可以将其替换为已安装的 chrome.exe 的路径

运行此命令后，如果存在跨域问题，它将打开运行 ajax 的 chrome。

# java - 音乐播放器 - 尝试使用对象时功能不起作用

> ID：14129918
> 
> 赞同：0
> 
> 时间：2013-01-02T22:01:07.273
> 
> 标签：java, android, object

我正在为我的计算项目制作音乐播放器应用程序。我得到了它的工作，但发现使用对象会得到更多的分数。结果，我更改了一些代码以合并对象的使用，但是当我执行我的应用程序时它不起作用。顺便说一句，我对 Java 很陌生，所以我可能犯了一个愚蠢的错误。

当我使用此代码时，我尝试实现的功能起作用：

```
private void SongTitleEndTime(){
    try {
        TextViewSongTitle = (TextView)findViewById(R.id.songTitle); 
        if (id != 0 ){ 
            String where = MediaStore.Audio.Media._ID + " = " + "'" + id + "'"; 
              final Cursor mCursor = managedQuery( 
              MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, 
              new String[] {MediaStore.Audio.Media.TITLE, MediaStore.Audio.Media.ARTIST, MediaStore.Audio.Media._ID.toString(), MediaStore.Audio.Media.ALBUM_ID.toString()}, where , null,
              null); 
              mCursor.moveToFirst(); 
              String title = mCursor.getString(0); 
              String artist = mCursor.getString(1); 
              String name = title + " - " + artist; 
              TextViewSongTitle.setText(name); 
              String fulltime; 
              albumfullid = Long.parseLong(mCursor.getString(3));
              TextView EndTime = (TextView) findViewById(R.id.endtime); 
              long Minutes = TimeUnit.MILLISECONDS.toMinutes(mMediaPlayer.getDuration()); 
              long Seconds = TimeUnit.MILLISECONDS.toSeconds(mMediaPlayer.getDuration()) - TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(mMediaPlayer.getDuration()));
                if (Seconds < 10) { 
                    String second = "0" + String.valueOf(Seconds);
                    fulltime = Minutes + ":" + second;
                } else {
                        //else display as normal
                    fulltime = Minutes + ":" + Seconds;
                }

             EndTime.setText(fulltime); 
             //display the duration of song
        }
      } catch (IllegalArgumentException e) { 
        e.printStackTrace();
      } catch (IllegalStateException e) {
        e.printStackTrace();
      } //catch for errors
} 
```

但是当我尝试这个时，我得到了一个错误：

主类：

```
private void SongTitleEndTime() {
    try {
        final TextView TextViewSongTitle = (TextView) findViewById(R.id.songTitle);
        if (CurrentSongID != 0) {
            final Song CurrentSong = new Song(CurrentSongID);
            SongName = CurrentSong.SongName;
            TextViewSongTitle.setText(SongName);
            AlbumID = CurrentSong.AlbumID;
            final TextView EndTime = (TextView) findViewById(R.id.endtime);
            final String TotalSongDuration = CurrentSong.TotalDuration;
            EndTime.setText(TotalSongDuration);
        }
    } catch (final IllegalArgumentException e) {
        e.printStackTrace();
    } catch (final IllegalStateException e) {
        e.printStackTrace();
    }
} 
```

对象等级：

```
package com.example.music.test;

import java.util.concurrent.TimeUnit;
import android.app.Activity;
import android.database.Cursor;
import android.provider.BaseColumns;
import android.provider.MediaStore;
import android.provider.MediaStore.Audio.AudioColumns;
import android.provider.MediaStore.MediaColumns;

public class Song extends Activity {

private final String where;
public String SongName;
public long AlbumID;
public String TotalDuration;

public Song(final long SongID) {
    where = MediaStore.Audio.Media._ID + " = " + "'" + SongID + "'";
    final Cursor mCursor = managedQuery(
            MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
            new String[] { MediaStore.Audio.Media.TITLE, MediaStore.Audio.Media.ARTIST,
                    MediaStore.Audio.Media._ID.toString(),
                    MediaStore.Audio.Media.ALBUM_ID.toString() }, where, null, null);
            mCursor.moveToFirst();
    final String SongTitle = getSongTitle(mCursor);
    final String SongArtist = getSongArtist(mCursor);
    SongName = SongTitle + " - " + SongArtist;
    AlbumID = getAlbumID(mCursor);
    TotalDuration = getTotalDuration();
}

public String getSongTitle(final Cursor mCursor) {
    final String songtitle = mCursor.getString(0);
    return songtitle;
}

public String getSongArtist(final Cursor mCursor) {
    final String songartist = mCursor.getString(1);
    return songartist;
}

public long getAlbumID(final Cursor mCursor) {
    final long AlbumID = Long.parseLong(mCursor.getString(3));
    return AlbumID;
}

public String getTotalDuration() {
    String TotalTime;
    final long Minutes = TimeUnit.MILLISECONDS
            .toMinutes(Player.mMediaPlayer.getDuration());
    final long Seconds = TimeUnit.MILLISECONDS
            .toSeconds(Player.mMediaPlayer.getDuration())
            - TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS
                    .toMinutes(Player.mMediaPlayer.getDuration()));
    if (Seconds < 10) {
        final String second = "0" + String.valueOf(Seconds);
        TotalTime = Minutes + ":" + second;
    } else {
        TotalTime = Minutes + ":" + Seconds;
    }
    return TotalTime;
}

} 
```

我得到的错误是：

```
01-02 21:55:41.941: E/AndroidRuntime(717): FATAL EXCEPTION: main
01-02 21:55:41.941: E/AndroidRuntime(717): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.music.test/com.example.music.test.Player}: java.lang.NullPointerException
01-02 21:55:41.941: E/AndroidRuntime(717):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
01-02 21:55:41.941: E/AndroidRuntime(717):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
01-02 21:55:41.941: E/AndroidRuntime(717):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
01-02 21:55:41.941: E/AndroidRuntime(717):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
01-02 21:55:41.941: E/AndroidRuntime(717):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-02 21:55:41.941: E/AndroidRuntime(717):  at android.os.Looper.loop(Looper.java:137)
01-02 21:55:41.941: E/AndroidRuntime(717):  at android.app.ActivityThread.main(ActivityThread.java:4745)
01-02 21:55:41.941: E/AndroidRuntime(717):  at java.lang.reflect.Method.invokeNative(Native Method)
01-02 21:55:41.941: E/AndroidRuntime(717):  at java.lang.reflect.Method.invoke(Method.java:511)
01-02 21:55:41.941: E/AndroidRuntime(717):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-02 21:55:41.941: E/AndroidRuntime(717):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-02 21:55:41.941: E/AndroidRuntime(717):  at dalvik.system.NativeStart.main(Native Method)
01-02 21:55:41.941: E/AndroidRuntime(717): Caused by: java.lang.NullPointerException
01-02 21:55:41.941: E/AndroidRuntime(717):  at android.content.ContextWrapper.getContentResolver(ContextWrapper.java:91)
01-02 21:55:41.941: E/AndroidRuntime(717):  at android.app.Activity.managedQuery(Activity.java:1737)
01-02 21:55:41.941: E/AndroidRuntime(717):  at com.example.music.test.Song.<init>(Song.java:21)
01-02 21:55:41.941: E/AndroidRuntime(717):  at com.example.music.test.Player.SongTitleEndTime(Player.java:90)
01-02 21:55:41.941: E/AndroidRuntime(717):  at com.example.music.test.Player.AllActivities(Player.java:80)
01-02 21:55:41.941: E/AndroidRuntime(717):  at com.example.music.test.Player.onCreate(Player.java:66)
01-02 21:55:41.941: E/AndroidRuntime(717):  at android.app.Activity.performCreate(Activity.java:5008)
01-02 21:55:41.941: E/AndroidRuntime(717):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
01-02 21:55:41.941: E/AndroidRuntime(717):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
01-02 21:55:41.941: E/AndroidRuntime(717):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:10:00.780

歌曲是一种活动。因此，您不能在调用 onCreate 之前调用 manageQuery。那是你的错误。

# facebook - Facebook 视频什么时候过期，可以过期吗？

> ID：14129920
> 
> 赞同：4
> 
> 时间：2013-01-02T22:01:34.690
> 
> 标签：facebook, facebook-graph-api, video

我正在处理从用户帖子访问的 Facebook 视频（他们已通过应用程序授予许可），我试图在外部页面中播放这些视频。

视频现在播放不了。过去可能已经这样做了。

[这个 Stack Overflow 问题](https://stackoverflow.com/questions/7332200/fbcdn-an-error-occurred-while-processing-your-request)（我收到相同的错误消息）似乎表明通过 Facebook 对视频的外部访问在一定时间后过期，但我找不到任何关于此的 Facebook 开发人员文档。这和`offline_access`权限有关吗？

谁能确认这些视频如何/何时到期，以及如何/是否可以再次播放？

如果有帮助，URL 会像这样分解：

```
http://video.ak.fbcdn.net/cfs-ak-snc6/v/[6 digits]/[3 digits]/[13 digits]_[5 digits].mp4
?oh=[32 alphanumeric chars]
&oe=[8 alphanumeric chars]
&__gda__=[10 digits]_[32 alphanumeric chars] 
```

# c# - Razor：自定义 BeginForm()-like Razor 一次性块在某些情况下不起作用

> ID：14129921
> 
> 赞同：9
> 
> 时间：2013-01-02T22:01:35.777
> 
> 标签：c#, asp.net-mvc-3, razor, idisposable, html.beginform

我有一个块的自定义实现，它的工作原理很像`Html.BeginForm()`. 实现基本如下：

```
public class MyBlock : IDisposable {
    private readonly HtmlHelper _html;

    public MyBlock(HtmlHelper hml) {
        this._html.ViewContext.Writer.WriteLine("BEGIN");
    }

    public void Dispose() {
        this._html.ViewContext.Writer.WriteLine("END");
    }
} 
```

然后在我看来，我可以这样做：

```
@using (new MyBlock(Html)) {
    @: some content
} 
```

要得到：

```
BEGIN
some content
END 
```

这一切都很好。但是，当在“剃刀片段”中使用我的块时，我遇到了麻烦，例如，当将一些剃刀内容传递给以 a`Func<object, HelperResult>`作为参数的函数时。例如，我有另一个 HtmlHelper 函数定义如下：

```
public static IHtmlString Content(this HtmlHelper @this, Func<object, HelperResult> razor) {
    return razor(null);
}

@* use in a view as: *@
@{
    var razorContent = Html.Content(@<div>Some razor content</div>);
}
@razorContent 
```

但是，当我执行以下操作时，内部内容会在没有外部内容的情况下呈现：

```
@{ 
    var content =Html.Content(
        @<text>
            @using (new MyBlock(Html)) {
                @: some content 2
            }
        <text>
    );
}
@content 
```

我认为问题在于“Html”仍然是指外部上下文的 HtmlHelper，因此 BEGIN 和 END 被发送到与“some content 2”不同的作者，但是，我不确定是否是这种情况。

有谁知道（1）出了什么问题以及（2）我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:34:31.990

您的问题的部分解决方案是调用 HelperResult 的 WriteTo 方法。您可以将 Content 方法更改为以下内容：

```
public static void Content(this HtmlHelper @this, Func<object, HelperResult> razor)
{
    razor(null).WriteTo(@this.ViewContext.Writer);
} 
```

然后以这种方式使用它：

```
@{ Html.Content(
        @<text>
            @using (new MyBlock(Html)) {
                @: some content 2
            }
        </text>
    );
} 
```

编辑

如果您想以 IHtmlString 或任何其他字符串的形式返回值，您可以这样做：

```
public static IHtmlString Content(this HtmlHelper @this, Func<object, HelperResult> razor)
{
    using (MemoryStream ms = new MemoryStream())
    using (TextWriter tw = new StreamWriter(ms))
    {
        Delegate @delegate = (Delegate)razor;
        WebViewPage target = (WebViewPage)@delegate.Target;
        TextWriter tmp = target.Html.ViewContext.Writer;
        try
        {
            target.Html.ViewContext.Writer = tw;
            razor(null).WriteTo(tw);
            tw.Flush();
            ms.Seek(0, SeekOrigin.Begin);
            TextReader tr = new StreamReader(ms);

            return MvcHtmlString.Create(tr.ReadToEnd());
        }
        finally
        {
            target.Html.ViewContext.Writer = tmp;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-01T19:43:25.297

这也困扰了我一段时间。由于 MyBlock 和 HtmlHelper 使用不同的 Writer，这是一个剃刀错误。一个合理的解决方法是将 HtlmHelper 的 __razor_template_writer 传递给 MyBlock。（希望这将在 vnext 中修复）

```
public class MyBlock : IDisposable {
    private readonly TextWriter _writer;

    public MyBlock(TextWriter writer) {
        _writer = writer;
        _writer.WriteLine("BEGIN");
    }

    public void Dispose() {
        _writer.WriteLine("END");
    }
}

@{ 
    var content =Html.Content(
        @<text>
            @using (new MyBlock(__razor_template_writer)) {
                @: some content 2
            }
        <text>
    );
}
@content 
```

# silverlight - 如何加快 Silverlight 滚动查看器的速度？

> ID：14129927
> 
> 赞同：2
> 
> 时间：2013-01-02T22:02:32.093
> 
> 标签：silverlight, scrollviewer

我的`ScrollViewer`Silverlight 客户端中有一个显示所选类别中项目的列表。项目在选择时会改变大小。正常情况下`ScrollViewer`作品还不错，但一个类有近300项。选择此类别时，`ScrollViewer`几乎无法使用。它是否呈现列表中的所有内容？有什么办法可以加快速度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:16:07.010

我找到了一个可能有帮助的解决方案：

```
<!-- This needs to be contained in a parent panel like a grid -->
<ListBox x:Name="Items" >
    <ListBox.Template>
        <ControlTemplate> <!-- Broke it out to allow resizing -->
            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                <ItemsPresenter/> <!-- This little fella does magical things -->            
            </ScrollViewer>         
        </ControlTemplate>      
    </ListBox.Template>
    <ListBox.ItemsPanel>
        <ItemsPanelTemplate>
            <VirtualizingStackPanel VirtualizingStackPanel.VirtualizationMode="Recycling"/>  <!-- Recycle was a must -->        
        </ItemsPanelTemplate>       
    </ListBox.ItemsPanel>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <HyperlinkButton  VerticalAlignment="Top" Margin="5" />
                <!-- This guy I did need to set a minwidth on to retain nice and predictable scrolling  when datacontext was potentially changing -->
                <ContentControl cal:View.Model="{Binding}" MinWidth="1160" VerticalContentAlignment="Stretch" HorizontalContentAlignment="Stretch" />
            </StackPanel>
        </DataTemplate>         
    </ListBox.ItemTemplate>           
</ListBox> 
```

# .htaccess - .htaccess RewriteCond for https

> ID：14129932
> 
> 赞同：1
> 
> 时间：2013-01-02T22:02:49.683
> 
> 标签：.htaccess

我们有我们的网站设置，并希望有一个安全的会员区。（例如： *https* ://www.abc.com/members/ ）。

我们的主机为我们提供了一个免费的 SSL URL，虽然它不是很漂亮（*www1234.sslurl.com/abc/members/*）。

是否可以使用*https://www1234.sslurl.com/abc/members/*并将 URL 重写为*https://www.abc.com/members*？如果是这样，我将不胜感激有关执行此规则的一些帮助。

**注意：** 这不适用于购物车，我们不存储信用卡、社会保险号或任何类似的敏感信息。我们只是想在登录时为用户提供安全的浏览器连接。*重写*URL 是否不道德？

***自从有人投票结束我的问题以来添加了详细信息，尽管我不确定为什么。这是一个有效的问题，并被适当地标记。***

================== 我开始使用的一些代码==================

```
RewriteCond %{HTTP_HOST} abc.com  
RewriteCond %{REQUEST_URI} !abc/  
RewriteRule ^(.*)$ abc/$1 [L] 
```

这看起来对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:38:50.357

即使有办法做到这一点（而且我不相信你的 Apache 支持这样的重定向），浏览器仍然可能会抱怨。通常 SSL 证书仅适用于 domain.com 和 www.domain.com。如果您尝试使用不同的 URL 访问该证书，您的浏览器将给出有关证书不受信任的错误。

# xamarin.ios - 使用 MonoTouch.Dialog 轻按导航栏时 Monotouch 隐藏键盘

> ID：14129933
> 
> 赞同：2
> 
> 时间：2013-01-02T22:02:53.310
> 
> 标签：xamarin.ios, monotouch.dialog

当点击输入元素之外的东西时，我目前正在使用此代码在单点触控 iOS 应用程序中隐藏键盘。

```
 var tap = new UITapGestureRecognizer ();

 tap.AddTarget (() =>{

    dvc.View.EndEditing (true);

 });

 dvc.View.AddGestureRecognizer (tap); 
```

但是，当用户点击顶部导航栏时，我也想隐藏键盘。我在其他应用程序中看到了这一点。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:02:20.377

最简单的方法是`TouchesEnded`在你的`UIViewController`.

这将为您提供整个控制器内的任何触摸事件。

如果您需要在某个视图中忽略触摸，请执行以下操作：

```
public override void TouchesEnded(NSSet touches, UIEvent evt)
{
    base.TouchesEnded(touches, evt);

    if (evt.TouchesForView(viewYouWantToIgnore) == null) {
        //Dismiss your keyboard here
    }
} 
```

# c# - Encoding.ASCII.GetString 返回空白值（仅在 windows 应用程序中）

> ID：14129940
> 
> 赞同：2
> 
> 时间：2013-01-02T22:04:02.810
> 
> 标签：c#, windows, ascii, encode, udpclient

我正在尝试使用 Visual Studio 2012 创建一个 Windows 应用程序，但似乎正在发生奇怪的事情......当我在控制台应用程序中运行完全相同的代码时，它工作正常，但似乎我无法输出以下内容一次我在 Windows 应用程序项目的线程中运行它：

```
private void VisualUDPListener_Load(object sender, EventArgs e)
    {
        //System.Windows.Forms.Form.CheckForIllegalCrossThreadCalls = false;
        new Thread(delegate()
        {
            StartListener();
        }).Start();
    }

    private void StartListener()
    {

        UdpClient listener = new UdpClient(listenPort);
        IPEndPoint groupEP = new IPEndPoint(IPAddress.Any, listenPort);

        try
        {
            while (true)
            {
                //log text box
                Log.AppendText("Listening \n");

                byte[] bytes = listener.Receive(ref groupEP);

                string hex_string = BitConverter.ToString(bytes);//this works and returns the correct hex data
                string ascii_string = Encoding.ASCII.GetString(bytes, 0, bytes.Length);//blank???????????

                MessageBox.Show(ascii_string.Length.toString());//outputs 131 which is correct

                MessageBox.Show(ascii_string);// shows a blank message box
                Log.AppendText("--" + ascii_string + hex_string +" \n");//only outputs --
            }

        }
        catch (Exception e)
        {
            Console.WriteLine(e.ToString());
        }
        finally
        {
            listener.Close();
        }
    } 
```

我的目标是 .NET Framework 4.5 ...多于。（那么设备必须发送损坏的数据？不，因为如果上面的代码在控制台应用程序中运行，它会完美运行并输出正确的字符串）

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T23:03:03.023

如注释中所述，字符串以 0 字节 (00-04-02-00-20) 开头。这正确地转换为 C# 字符串。`MessageBox.Show`调用 windows api 函数`MessageBox`。Windows API 使用以零结尾的字符串，因此这个特定的字符串对 WinAPI 来说是空的，因为第一个字节为零。您不能使用使用以零结尾的字符串的 API 逐字记录/显示此字符串。

您需要将 0 替换为其他内容，例如`ascii_string.Replace((char)0, (char)1)`或使用不将零视为特殊字符的 api。

# scala - 为什么这里需要括号？

> ID：14129944
> 
> 赞同：3
> 
> 时间：2013-01-02T22:04:24.193
> 
> 标签：scala

在这种情况下，为什么我需要 x:Int 周围的括号：

```
List(1,2,3,4,5).filter((x:Int) => x > 3) 
```

但在这种情况下不是 x ：

```
List(1,2,3,4,5).filter(x => x > 3) 
```

如果我尝试：

```
List(1,2,3,4,5).filter(x:Int => x > 3) 
```

我得到：

```
identifier expected but integer literal found 
```

这到底是什么意思呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T22:09:46.660

括号显示参数类型的结束位置。由于该`=>`符号在 scala 类型中有效（表示函数类型），因此只有`=>`存在并不意味着该类型已结束。考虑一下：

```
List(Map(1->2)).filter((x: Int => Int) => x(1) == 2) 
```

括号清楚地表明第一个`=>`是类型的一部分，`x`第二个是定义函数。

在您的第二个示例中，没有类型 on `x`，因此关于`=>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T22:26:41.447

`x: Int => Int`- x 是类型的函数`Int => Int`

`(x:Int) => ...`- x 是函数参数

# javascript - 如何在 JavaScript 中编码字符串以在 HTML 中显示？

> ID：14129953
> 
> 赞同：48
> 
> 时间：2013-01-02T22:05:06.417
> 
> 标签：javascript, html

> **可能重复：**
> [如何转义 HTML](https://stackoverflow.com/questions/3043775/how-to-escape-html)

如何在 JavaScript 中将字符串转换为 HTML？

例如

```
var unsafestring = "<oohlook&atme>";
var safestring = magic(unsafestring); 
```

现在`safestring`等于`"&lt;ohhlook&amp;atme&gt;"`

我正在寻找`magic(...)`。我没有将 JQuery 用于`magic`.

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-01-02T22:09:20.043

```
function htmlEntities(str) {
    return String(str).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
} 
```

那么和`var unsafestring = "<oohlook&atme>";`你一起使用`htmlEntities(unsafestring);`

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-01-02T22:17:52.547

不要打扰编码。请改用文本节点。文本节点中的数据保证被视为文本。

```
document.body.appendChild(document.createTextNode("Your&funky<text>here")) 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2013-01-02T22:08:10.103

### 如果您想使用库而不是自己动手：

最常用的方法是为此目的使用 jQuery：

```
var safestring = $('<div>').text(unsafestring).html(); 
```

如果要对所有 HTML 实体进行编码，则必须使用库或自己编写。

您可以使用比 jQuery 更紧凑的库，例如[*HTML Encoder 和 Decode*](http://www.strictly-software.com/htmlencode)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-01-02T22:10:50.267

你需要逃脱`<`和`&`。逃跑`>`也无伤大雅：

```
function magic(input) {
    input = input.replace(/&/g, '&amp;');
    input = input.replace(/</g, '&lt;');
    input = input.replace(/>/g, '&gt;');
    return input;
} 
```

或者你让 DOM 引擎为你做脏活（使用 jQuery，因为我很懒）：

```
function magic(input) {
    return $('<span>').text(input).html();
} 
```

这样做是创建一个虚拟元素，将您的字符串分配为其*textContent*（即，没有特定于 HTML 的字符有副作用，因为它只是文本）然后您检索该元素的 HTML 内容 - 这是文本但转换了特殊字符在必要的情况下添加到 HTML 实体。

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2013-01-02T22:06:46.600

唯一需要转义的字符是`<`. （`>`在标签之外是没有意义的）。

因此，您的“魔术”代码是：

```
safestring = unsafestring.replace(/</g,'&lt;'); 
```

# r - 使用 ifelse 有条件地拆分数据帧

> ID：14129966
> 
> 赞同：0
> 
> 时间：2013-01-02T22:06:25.900
> 
> 标签：r

我有一个名为“输入”的大型数据集。数据集中的一列是一个名为“受约束”的标志，带有“Y”或“N”。我想创建两个数据集，其中一个是标志为“Y”的行，一个是标志为“N”的行。

我试过：

```
ifelse(inputs$constrained == "N",unconstrained <- inputs,constrained <- inputs) 
```

但不受约束和受约束的数据集都与输入相同。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T22:10:53.417

```
first <- split(inputs, inputs$constrained)[1]
second <- split(inputs, inputs$constrained)[2] 
```

如果你想使用“[”，你可以这样做：

```
 unconstrd <- inputs[ inputs$constrained == "N" , ]
 constrd <-  inputs[ ! inputs$constrained == "N" , ] 
```

由于 R 处理 NA 条件的方式很诡异，尽管它不会忠实地反映这些行，但第二个选项可能都有“受约束”为 NA 的条目。（我承认我不确定 split 方法对 NA 有什么作用。）我刚刚测试了 split 方法，它可能更好，因为（如`subset`）它不返回`is.na(input$constrained)`行。

# google-drive-api - google drive sdk 企业域配置

> ID：14129969
> 
> 赞同：1
> 
> 时间：2013-01-02T22:06:37.903
> 
> 标签：google-drive-api

我想通过内部 App Engine 应用程序执行 Google Apps 域范围的授权（参考：[https](https://developers.google.com/drive/delegation) ://developers.google.com/drive/delegation ）。如果未选中 CPanel 设置“允许用户安装 Google Drive 应用程序”，有谁知道这是否可行？谢谢！

# php - 调试 SWFUpload 和 PHP 的问题

> ID：14129970
> 
> 赞同：2
> 
> 时间：2013-01-02T22:06:39.033
> 
> 标签：php, debugging, netbeans, swfupload

我正在尝试将 SWFUpload 实例添加到我的网站，多个文件将在队列中上传。目前，我正在本地 LAMP 环境中运行 Netbeans 和 XDebug 以进行服务器端工作。

我已经按照网站上的说明进行操作，并使用[这篇博](http://www.dconstructing.com/2010/07/08/making-swfupload-work)文来填补空白。

我的问题是测试上传根据 SWFUpload 的调试输出执行，但上传路径中没有显示任何内容。在调试模式下，我的服务器端脚本中的任何断点都不会被触及。

*   我已经三重检查了文件路径。
*   文件权限全部设置为755

当我将两个演示复制到我的服务器实例时也会发生这种情况。在这两种情况下，`upload_url`php 文件断点都不会被触及。

我该如何调试呢？

**编辑**

我改用 HTML5 方法。但是，最好为可能遇到相同问题的其他人确定一些可能的解决方案。

# rhomobile - Rhomobile 中的 PIM 联系人

> ID：14129974
> 
> 赞同：0
> 
> 时间：2013-01-02T22:07:07.537
> 
> 标签：rhomobile, rhodes

我有 RhoMobile 应用程序，用户可以在其中将联系人添加到他们的移动设备。它适用于所有设备，包括 Android、iOS 5 及更低版本，但不适用于 iOS 6。还有其他人有这个问题吗？我相信 Apple 更改了 iOS 6 上的 PIM 实现，这可能是导致问题的原因。

我的代码：

```
def add_contact
    Rho::RhoContact.create! ({"first_name" => "John", "last_name" => "Doe"}) 
end 
```

我在 build.yml 中启用了 pim 功能

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T08:21:28.377

从 iOS 6 开始，应用程序无法在未经用户许可的情况下访问用户的联系人。当我们执行 -> Rho::RhoContact.create！，RhoMobile 应用程序会尝试访问用户尚未授予的权限的通讯簿。此外，该应用程序不会自行请求许可。您需要从应用程序内强行触发许可请求。

你可以这样做： -

转到 Rhodes-3.4.3（我的 rhodes 版本是 3.4.2） -> 平台 -> iPhone -> 课程 -> 电话簿 -> Phonebook.m

在文本编辑器或 xCode 中打开它。

在页面顶部，定义以下内容：-

```
#define SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(v)  ([[[UIDevice currentDevice] systemVersion] compare:v options:NSNumericSearch] != NSOrderedAscending) 
```

完成后，找到函数->

```
void* openPhonebook() 
```

找到线->

```
memset(phonebook, 0, sizeof(LocalPhonebook)); 
```

在此行下方，将存在的任何代码替换为 ->

```
if (SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"6.0")) {
    CFErrorRef myError = NULL;
    phonebook->_ab = ABAddressBookCreateWithOptions(NULL, &myError);
    ABAddressBookRequestAccessWithCompletion(phonebook->_ab, ^(bool granted, CFErrorRef error) {
        if (granted) {
            phonebook->_people = NULL;
            phonebook->_len = 0;
        } else {
            // Handle the error
        }
    });
}
else{
    // for iOS < 6
    phonebook->_ab = ABAddressBookCreate();
    if (phonebook->_ab) {
        phonebook->_people = NULL;
        phonebook->_len = 0;
    }
}

return phonebook; 
```

在上面的代码中， phonebook->_ab 是我的 ABAddressBook 参考

现在你应该很高兴......希望这很有用......

# python - 相关矩阵的平均值 - 熊猫数据帧

> ID：14129979
> 
> 赞同：6
> 
> 时间：2013-01-02T22:07:28.270
> 
> 标签：python, pandas

我在 pandas python DataFrame 中有一个很大的相关矩阵：df (342, 342)。

如何取上三角形中所有数字的平均值、标准差等，不包括对角线上的 1？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T01:23:02.880

另一个潜在的单行答案：

```
In [1]: corr
Out[1]:
          a         b         c         d         e
a  1.000000  0.022246  0.018614  0.022592  0.008520
b  0.022246  1.000000  0.033029  0.049714 -0.008243
c  0.018614  0.033029  1.000000 -0.016244  0.049010
d  0.022592  0.049714 -0.016244  1.000000 -0.015428
e  0.008520 -0.008243  0.049010 -0.015428  1.000000

In [2]: corr.values[np.triu_indices_from(corr.values,1)].mean()
Out[2]: 0.016381 
```

编辑：添加了性能指标

我的解决方案的性能：

```
In [3]: %timeit corr.values[np.triu_indices_from(corr.values,1)].mean()
10000 loops, best of 3: 48.1 us per loop 
```

Theodros Zelleke 的单线解决方案的性能：

```
In [4]: %timeit corr.unstack().ix[zip(*np.triu_indices_from(corr, 1))].mean()
1000 loops, best of 3: 823 us per loop 
```

帝斯曼解决方案的性能：

```
In [5]: def method1(df):
   ...:     df2 = df.copy()
   ...:     df2.values[np.tril_indices_from(df2)] = np.nan
   ...:     return df2.unstack().mean()
   ...:

In [5]: %timeit method1(corr)
1000 loops, best of 3: 242 us per loop 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T22:39:16.973

这很有趣。我不保证这是真正的 pandas-fu；我仍处于学习`pandas`自己的“numpy + 更好的索引”阶段。也就是说，这样的事情应该可以完成工作。

首先，我们制作一个玩具相关矩阵来玩：

```
>>> import pandas as pd
>>> import numpy as np
>>> frame = pd.DataFrame(np.random.randn(1000, 5), columns=['a', 'b', 'c', 'd', 'e'])
>>> corr = frame.corr()
>>> corr
          a         b         c         d         e
a  1.000000  0.022246  0.018614  0.022592  0.008520
b  0.022246  1.000000  0.033029  0.049714 -0.008243
c  0.018614  0.033029  1.000000 -0.016244  0.049010
d  0.022592  0.049714 -0.016244  1.000000 -0.015428
e  0.008520 -0.008243  0.049010 -0.015428  1.000000 
```

然后我们制作一个副本，并使用[tril_indices_from](http://docs.scipy.org/doc/numpy/reference/generated/numpy.tril_indices_from.html)获取较低的索引来屏蔽它们：

```
>>> c2 = corr.copy()
>>> c2.values[np.tril_indices_from(c2)] = np.nan
>>> c2
    a        b         c         d         e
a NaN  0.06952 -0.021632 -0.028412 -0.029729
b NaN      NaN -0.022343 -0.063658  0.055247
c NaN      NaN       NaN -0.013272  0.029102
d NaN      NaN       NaN       NaN -0.046877
e NaN      NaN       NaN       NaN       NaN 
```

现在我们可以对扁平数组进行统计：

```
>>> c2.unstack().mean()
-0.0072054178481488901
>>> c2.unstack().std()
0.043839624201635466 
```

# python - 使用密码输入自动化`svn up`

> ID：14129983
> 
> 赞同：0
> 
> 时间：2013-01-02T22:07:49.077
> 
> 标签：python, svn, pexpect

我需要一个脚本来更新我的存储库副本。当我键入“svn up”时，我通常会被迫输入密码，如何自动输入密码？

我试过的：

```
import pexpect, sys, re

pexpect.run("svn cleanup")

child = pexpect.spawn('svn up')
child.logfile = sys.stdout

child.expect("Enter passphrase for key \'/home/rcompton/.ssh/id_rsa\':")

child.sendline("majorSecurityBreach")

matchanything = re.compile('.*', re.DOTALL)

child.expect(matchanything)

child.close() 
```

但它似乎没有更新。

**编辑：**如果重要，我可以使用 child.interact() 更新我的存储库

```
import pexpect, sys, re

pexpect.run("svn cleanup")

child = pexpect.spawn('svn up')
child.logfile = sys.stdout

i = child.expect("Enter passphrase for key \'/home/rcompton/.ssh/id_rsa\':")

child.interact() 
```

允许我输入密码并开始更新。但是，无论如何我最终都会出错。

```
-bash-3.2$ python2.7 exRepUpdate.py 
Enter passphrase for key '/home/rcompton/.ssh/id_rsa':  

At revision 4386.
At revision 4386.
Traceback (most recent call last):
  File "exRepUpdate.py", line 13, in <module>
    child.interact()
  File "build/bdist.linux-x86_64/egg/pexpect.py", line 1497, in interact
  File "build/bdist.linux-x86_64/egg/pexpect.py", line 1525, in __interact_copy
  File "build/bdist.linux-x86_64/egg/pexpect.py", line 1515, in __interact_read
OSError: [Errno 5] Input/output error 
```

**编辑：**好吧，我找到了一种解决明文密码输入的方​​法。我遗漏的一个重要细节（老实说，我认为我不需要，因为这似乎是一个简单的问题）是我必须向我们的 IT 部门发送一个公钥。当我第一次访问 repo 时。避免在我正在处理的 ssh+svn 中输入密码可以使用 ssh-agent 来完成。此链接： http: [//mah.everybody.org/docs/ssh](http://mah.everybody.org/docs/ssh)提供了一个简单的概述。Daniel Starin 提出的解决方案 Joseph M. Reagle 只要求我在登录时输入一次密码，尽管输入了密码，但我每晚都可以执行我的脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:19:02.670

如果您不想多次输入密码，但仍然有一个安全的解决方案，您可以使用**ssh-agent**将您的密钥密码短语保留一段时间。如果您使用默认私钥，只需`ssh-add`在询问时键入并提供您的密码。

`ssh-add`有关命令用法的更多详细信息，请参见： [linux.die.net/man/1/ssh-add](http://linux.die.net/man/1/ssh-add)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:44:48.220

你真的应该只使用带有公钥的 ssh。

如果没有，您可以简单地创建一个`~/.subversion/auth/svn.simple/`包含内容的新文件：

```
K 8
passtype
V 6
simple
K 999
password
V 7
password_goes_here
K 15
svn:realmstring
V 999
<url> real_identifier
K 8
username
V 999
username_goes_here
END 
```

999 个数字是下一行的长度（减号`\n`）。文件名应该是领域字符串的 MD5 和。

# cocoa - 对 CGContextRef 中的 CALayer 的误解

> ID：14129985
> 
> 赞同：0
> 
> 时间：2013-01-02T22:07:59.597
> 
> 标签：cocoa, calayer, quartz-2d, cgcontextref

我有一个自定义视图，我想在其中显示带有 PDF 内容的 CALayer。为此，我实现了一个委托 NSObject 子类，如[Using CALayer Delegate](https://stackoverflow.com/questions/2015353/using-calayer-delegate)的第一个答案所示。

* * *

因为我有一个基于文档的应用程序，所以我有一个可以打开文档的起始窗口。从自定义文档中我 initWithWindowNibName: 来自 makeWindowControllers 方法的自定义 windowController。在 windowController 中，在 windowDidLoad 中，我设置了一个自定义 NSView 的变量值并初始化了 CALayer。在同一个地方，我运行这行代码来绘制内容：

```
[[[PDFViewLayerDelegate alloc] initWithUrl:url andPageIndex:currentPageIndex] drawLayer:layer1 inContext:[[NSGraphicsContext currentContext] graphicsPort]]; 
```

发生的情况是：在运行该行之前，CALayer 的背景设置为绿色并且只会出现在正确的窗口中，现在 PDF 内容仅在两个图层都填充为白色时才被绘制到初始窗口（这也完成了在委托方法中）。

我的问题是：

*   为什么我的 CALayer 被绘制到不属于创建它的自定义 NSView 子类的视图？而且在不同的窗口？
*   每个窗口中的两个视图是否共享相同的 graphicsContext？可能是这个原因。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:49:34.547

我理解了这个问题......因为我认为问题是两个窗口共享相同的 graphicsContext，因为 currentContext 是：

> “当前线程的当前图形上下文。”

* * *

我只是解决了这个问题，将 CALayer 绘图函数调用放置在它的容器 NSView 的 drawRect: 方法中，因为 drawRect: 专门负责在它的视图内绘图，并且可能已经以某种方式处理了 graphicsContext 的东西。

# java - JTable：如何将布尔值呈现为颜色，并使用 JTextField 编辑为文本？

> ID：14129986
> 
> 赞同：2
> 
> 时间：2013-01-02T22:08:03.293
> 
> 标签：java, swing, jtable, render

我试图制作布尔渲染器和布尔编辑器。

布尔渲染器应该将布尔值渲染为颜色（两种颜色）。布尔编辑器应返回一个 JTextField 并启用作为字符串“T”和“F”的编辑

因此，如果单击单元格并键入“T”或“F”，则单元格的颜色必须转换为相应的颜色。

基于[这个 oracle 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer)，我尝试制作我的渲染器和编辑器，并将其包含在[这个 oracle 提供的示例](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/index.html#TableDialogEditDemo)中。

在布尔渲染器和布尔编辑器下方。我把他们注册到[这个班级](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TableDialogEditDemoProject/src/components/TableDialogEditDemo.java)。

```
 ....
        ....

        table.setDefaultRenderer(Color.class,
                new ColorRenderer(true));
        table.setDefaultEditor(Color.class,
                new ColorEditor());

        table.setDefaultRenderer(Boolean.class, new BooleanRenderer()); // My
        table.setDefaultEditor(Boolean.class, new BooleanEditor());     // My

        //Add the scroll pane to this panel.
        add(scrollPane);
        ....
        .... 
```

单元格根本没有渲染，并且事情没有按预期工作！。

**我的代码有什么问题？**

我的渲染器：

```
import java.awt.Color;
import java.awt.Component;
import javax.swing.JLabel;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.table.TableCellEditor;
import javax.swing.table.TableCellRenderer;

public class BooleanRenderer extends JLabel implements TableCellRenderer
{
    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column)
    {
        if (hasFocus)
        {
            Boolean bol = (Boolean) value;
            if (bol == Boolean.FALSE)
            {
                this.setBackground(Color.red);
                this.setText("");
            } else if (bol == Boolean.TRUE)
            {
                this.setBackground(Color.BLACK);
            }
        }
        else
        {
            Boolean bol = (Boolean) value;
            if (bol == Boolean.FALSE)
            {
                this.setBackground(Color.red);
                this.setText("");
            } else if (bol == Boolean.TRUE)
            {
                this.setBackground(Color.BLACK);
            }
        }

        if (isSelected)
        {
            Boolean bol = (Boolean) value;
            if (bol == Boolean.FALSE)
            {
                this.setBackground(Color.red);
                this.setText("");
            } else if (bol == Boolean.TRUE)
            {
                this.setBackground(Color.BLACK);
            }
        } else
        {
            Boolean bol = (Boolean) value;
            if (bol == Boolean.FALSE)
            {
                this.setBackground(Color.red);
                this.setText("");
            } else if (bol == Boolean.TRUE)
            {
                this.setBackground(Color.BLACK);
            }
        }

        return this;
    }
} 
```

我的编辑器：

```
import java.awt.Component;
import javax.swing.AbstractCellEditor;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.table.TableCellEditor;

public class BooleanEditor extends AbstractCellEditor
        implements TableCellEditor
{

    Boolean bool;
    JTextField tf = new JTextField();

    @Override
    public Object getCellEditorValue()
    {
        return bool;
    }

    @Override
    public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column)
    {

        if (isSelected)
        {
            bool = (Boolean) value;
            if (tf.getText().equals("T"))
            {
                bool = new Boolean(true);
            } else
            {
                if (tf.getText().equals("F"))
                {
                    bool = new Boolean(false);
                }
            }

        }
        return tf;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T22:21:03.387

**对于您的渲染器**：
您必须给它一个构造函数，并在构造函数内部将其设置为不透明：

```
public BooleanRenderer() {
  setOpaque(true);
} 
```

否则 JLabel 根本不会显示任何背景颜色。

**对于您的 JTable 单元格编辑器：**

*   首先，我必须反对你的设计，因为让用户输入正确的文本，“T”或“F”太容易出现用户输入错误。最好给他一个选择，例如使用 JComboBox。
*   接下来，摆脱`if (isSelected)`编辑器中的块。编辑器将在需要时被调用，并且选择可能是错误的，使您的代码无法运行。
*   最重要的是：摆脱编辑器的 bool 字段。在该`getCellEditorValue()`方法中，查询组件的值并根据该值返回适当的布尔值。

例如：

```
public class BooleanEditor extends AbstractCellEditor implements TableCellEditor {

   JComboBox<Boolean> combo = new JComboBox<Boolean>(new Boolean[] {
         Boolean.TRUE, Boolean.FALSE });

   public BooleanEditor() {
      combo.setRenderer(new DefaultListCellRenderer() {
         @Override
         public Component getListCellRendererComponent(JList<?> list,
               Object value, int index, boolean isSelected, boolean cellHasFocus) {
            Boolean boolValue = (Boolean) value;
            String displayString = "";
            if (boolValue == null) {
               displayString = "";
            } else if (boolValue) {
               displayString = "T";
            } else {
               displayString = "F";
            }
            return super.getListCellRendererComponent(list, displayString,
                  index, isSelected, cellHasFocus);
         }
      });
   }

   @Override
   public Object getCellEditorValue() {
      return combo.getSelectedItem();
   }

   @Override
   public Component getTableCellEditorComponent(JTable table, Object value,
         boolean isSelected, int row, int column) {
      if (value == null) {
         combo.setSelectedIndex(-1);
      } else {
         combo.setSelectedItem((Boolean) value);
      }
      return combo;
   }
} 
```

我的整个[SSCCE](http://sscce.org)：

```
import java.awt.*;
import javax.swing.*;
import javax.swing.table.*;

public class BoolColorTable {
   @SuppressWarnings("serial")
   private static void createAndShowGui() {
      // null just to test how code will react to this situation
      // that hopefully won't occur
      Boolean[][] data = { null, { true }, { false }, { true }, { false },
            { false }, { true } };
      String[] colNames = { "Data" };
      DefaultTableModel model = new DefaultTableModel(data, colNames);
      JTable table = new JTable(model) {
         @Override
         public Class<?> getColumnClass(int column) {
            if (column == 0) {
               return Boolean.class;
            }
            return super.getColumnClass(column);
         }
      };

      table.setDefaultRenderer(Boolean.class, new BooleanRenderer());
      table.setDefaultEditor(Boolean.class, new BooleanEditor());

      JScrollPane mainPanel = new JScrollPane(table);

      JFrame frame = new JFrame("BoolColorTable");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

@SuppressWarnings("serial")
class BooleanRenderer extends JLabel implements TableCellRenderer {
   public BooleanRenderer() {
      setOpaque(true);
   }

   @Override
   public Component getTableCellRendererComponent(JTable table, Object value,
         boolean isSelected, boolean hasFocus, int row, int column) {
      Boolean boolValue = (Boolean) value;
      if (boolValue == null) {
         setBackground(null);
      } else {
         if (!boolValue) {
            this.setBackground(Color.red);
         } else {
            this.setBackground(Color.BLACK);
         }
      }
      return this;
   }
}

@SuppressWarnings("serial")
class BooleanEditor extends AbstractCellEditor implements TableCellEditor {

   JComboBox<Boolean> combo = new JComboBox<Boolean>(new Boolean[] {
         Boolean.TRUE, Boolean.FALSE });

   public BooleanEditor() {
      combo.setRenderer(new DefaultListCellRenderer() {
         @Override
         public Component getListCellRendererComponent(JList<?> list,
               Object value, int index, boolean isSelected, boolean cellHasFocus) {
            Boolean boolValue = (Boolean) value;
            String displayString = "";
            if (boolValue == null) {
               displayString = "";
            } else if (boolValue) {
               displayString = "T";
            } else {
               displayString = "F";
            }
            return super.getListCellRendererComponent(list, displayString,
                  index, isSelected, cellHasFocus);
         }
      });
   }

   @Override
   public Object getCellEditorValue() {
      return combo.getSelectedItem();
   }

   @Override
   public Component getTableCellEditorComponent(JTable table, Object value,
         boolean isSelected, int row, int column) {
      if (value == null) {
         combo.setSelectedIndex(-1);
      } else {
         combo.setSelectedItem((Boolean) value);
      }
      return combo;
   }
} 
```

**编辑**
如果您*绝对*需要允许用户能够输入“T”或“F”，那么您可以这样做并通过向编辑器的 JTextField 添加一个 DocumentFilter 来使其主要是白痴证明，这将只允许三个不区分大小写的可能文本字段条目：“t”、“f”或空。

例如：

```
@SuppressWarnings("serial")
class BooleanStringEditor extends AbstractCellEditor implements TableCellEditor {
   private JTextField textField = new JTextField();

   public BooleanStringEditor() {
      PlainDocument doc = (PlainDocument) textField.getDocument();
      doc.setDocumentFilter(new MyDocFilter());
   }

   @Override
   public Object getCellEditorValue() {
      if (textField.getText().equalsIgnoreCase("t")) {
         return Boolean.TRUE;
      } else if (textField.getText().equalsIgnoreCase("f")) {
         return Boolean.FALSE;
      }
      // default if user messes up
      return null;
   }

   @Override
   public Component getTableCellEditorComponent(JTable table, Object value,
         boolean isSelected, int row, int column) {
      Boolean boolValue = (Boolean) value;
      if (boolValue == null) {
         textField.setText("");
      } else if (boolValue) {
         textField.setText("T");
      } else {
         textField.setText("F");
      }
      return textField;
   }

}

class MyDocFilter extends DocumentFilter {

   private boolean test(String text) {
      if (text.isEmpty()) {
         return true;
      }
      if (text.equalsIgnoreCase("t") || text.equalsIgnoreCase("f")) {
         return true;
      }
      return false;
   }

   @Override
   public void insertString(FilterBypass fb, int offset, String string,
         AttributeSet attr) throws BadLocationException {

      Document doc = fb.getDocument();
      StringBuilder sb = new StringBuilder();
      sb.append(doc.getText(0, doc.getLength()));
      sb.insert(offset, string);

      if (test(sb.toString())) {
         super.insertString(fb, offset, string, attr);
      } else {
         // warn the user and don't allow the insert
      }
   }

   @Override
   public void replace(FilterBypass fb, int offset, int length, String text,
         AttributeSet attrs) throws BadLocationException {

      Document doc = fb.getDocument();
      StringBuilder sb = new StringBuilder();
      sb.append(doc.getText(0, doc.getLength()));
      sb.replace(offset, offset + length, text);

      if (test(sb.toString())) {
         super.replace(fb, offset, length, text, attrs);
      } else {
         // warn the user and don't allow the insert
      }

   }

   @Override
   public void remove(FilterBypass fb, int offset, int length)
         throws BadLocationException {
      Document doc = fb.getDocument();
      StringBuilder sb = new StringBuilder();
      sb.append(doc.getText(0, doc.getLength()));
      sb.delete(offset, offset + length);

      if (test(sb.toString())) {
         super.remove(fb, offset, length);
      } else {
         // warn the user and don't allow the insert
      }

   }
} 
```

# magento - Magento 将字段添加到 Google Analytics 代码中

> ID：14129995
> 
> 赞同：1
> 
> 时间：2013-01-02T22:08:48.643
> 
> 标签：magento

我在 Google Analytics 模块中添加了一个字段。（所以这个问题是一个普遍的问题，在这种情况下与分析模块有关）

看起来像这样（system.xml）

```
<another_code translate="label">
    <label>Another code</label>
    <frontend_type>text</frontend_type>
    <sort_order>10</sort_order>
    <show_in_default>1</show_in_default>
    <show_in_website>1</show_in_website>
    <show_in_store>1</show_in_store>
    <fields>
        <active translate="label">
            <label>Enable</label>
            <frontend_type>select</frontend_type>
            <source_model>adminhtml/system_config_source_yesno</source_model>
            <sort_order>10</sort_order>
            <show_in_default>1</show_in_default>
            <show_in_website>1</show_in_website>
            <show_in_store>1</show_in_store>
        </active>
        <account translate="label">
            <label>Account Id</label>
            <frontend_type>text</frontend_type>
            <sort_order>20</sort_order>
            <show_in_default>1</show_in_default>
            <show_in_website>1</show_in_website>
            <show_in_store>1</show_in_store>
        </account>
    </fields>
</another_code> 
```

这工作正常，得到添加到数据库中。但...

我如何在前端获取它？如果我想获得`<label>Account Id</label>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T00:21:56.833

> 从上面的示例中获取“帐户 ID”值
> 
> Mage::getStoreConfig('google/another_code/account')

对核心进行更改绝不是一个好主意，因此您可以创建一个自定义模块来扩展谷歌分析

在 app/code/local/MageIgniter/GoogleAnalytics/etc/system.xml （从上面复制 system.xml）

```
<config>
    <sections>
        <google translate="label" module="googleanalytics">
            <label>Google API</label>
            <tab>sales</tab>
            ....
           <another_code translate="label"> 
```

在 app/code/local/MageIgniter/GoogleAnalytics/etc/config.xml

```
 <config>
    <modules>
        <MageIgniter_GoogleAnalytics>
            <version>0.1.0</version>
        </MageIgniter_GoogleAnalytics>
    </modules>
    <global>
        <blocks>
            <googleanalytics>
                <rewrite>
                    <ga>MageIgniter_GoogleAnalytics_Block_Ga</ga>
                </rewrite>
            </googleanalytics>
        </blocks>
    </global>
  </config> 
```

在 /app/code/local/MageIgniter/GoogleAnalytics/Block/Ga.php 中创建

```
class MageIgniter_GoogleAnalytics_Block_Ga extends Mage_GoogleAnalytics_Block_Ga
{

     function _getPageTrackingCode($accountId){
         // to get 'Account Id' value from above example
         Mage::getStoreConfig('google/another_code/account')
     } 

     ........
} 
```

有关更多帮助，请参阅 /app/code/core/Mage/GoogleAnalytics/Block/Ga.php 或[Magento 产品详细信息页面上的自定义变量](https://stackoverflow.com/a/13121578/1191288)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:48:42.067

我假设你的意思是你在`System > Configuration`屏幕上看不到你的新选项。您需要`another_code`在配置的 ACL 节点中添加一个节点（通常在 adminhtml.xml 中找到）。不要忘记清除缓存并注销/重新加载 acl 权限。正如@RS 所说，如果您当前正在编辑核心，则绝对应该考虑创建自定义模块。

# linux - lftp 镜像不符合我条件的目录

> ID：14129997
> 
> 赞同：2
> 
> 时间：2013-01-02T22:08:52.187
> 
> 标签：linux, bash, shell, mirror, lftp

我一直在编写一个 lftp 脚本，该脚本应该有效地将远程目录镜像到本地目录，可能一次传输多个 GB 文件。

要求之一是本地用户可以在不再需要本地文件时删除它，并且由于我将有多个“本地”计算机运行此脚本，所以我不想删除远程文件，直到我知道每个人需要，有。因此，该脚本使用 --newer-than 标志仅镜像自上次 lftp 脚本在本地运行以来在远程服务器上新建/修改的文件。

这是脚本的重要部分：

```
lftp -u $login,$pass $host << EOF
set ftp:ssl-allow yes
set ftp:ssl-protect-data yes
set ftp:ssl-protect-list yes
set ftp:ssl-force yes
set mirror:use-pget-n 5

mirror -X * -I share*/* --newer-than=/local/file/last.run --continue --parallel=5 $remote_dir $local_dir

quit
EOF 
```

请注意，EOF 并不是 bash 脚本的实际结尾。

所以我排除了 $remote_dir 中的所有内容，除了 share/ 目录中的任何内容，包括 share/ 目录本身，它们比 last.run 文件的时间戳更新。

这可以按预期工作，除非在一种情况下说我在 share/ 中有另一个特别命名的目录，称为 shareWHATEVER/

所以 share/shareWHATEVER/stuff.txt 存在。

第一次运行，shareWHATEVER/stuff.txt被远程复制到本地，一切正常。

如果我在本地完全删除 shareWHATEVER 目录，包括 stuff.txt，那么下次脚本运行时，stuff.txt 它不会被镜像，但 shareWHATEVER 是，即使远程服务器上的时间戳没有更改。

所以在本地它看起来像 share/shareWHATEVER/ 目录是空的。

知道为什么 shareWHATEVER 被复制，即使它自己的时间戳或其任何文件的时间戳都不比我的本地检查更新？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T12:48:13.127

显然，即使没有文件被复制，创建目录也是可行的方式`lftp`（并且该`mirror`选项`--no-empty-dirs`不会改变这种行为）。

[您可以在lftp 邮件列表](http://lftp.yar.ru/list.html)中讨论这个问题。

# c# - 无法注册程序集。找不到特定模块

> ID：14129998
> 
> 赞同：0
> 
> 时间：2013-01-02T22:08:53.757
> 
> 标签：c#, excel, com, interop, add-in

我正在尝试编译一个用 C# 开发的 excel 插件解决方案。编译时一切顺利，但最后，我收到以下消息：

错误 1 ​​无法注册程序集“C:\Users\bandrade\HTBase\Programs\Palo\HTOSE\HTOSE\2.5\XlAddin\bin\Debug\Jedox.Palo.XlAddin.dll”。无法加载文件或程序集“Jedox.Palo.Comm.dll”或其依赖项之一。指定的模块无法找到。C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets 3341

有没有人有任何想法？

我做的一个测试是，如果我取消选中“Register for COM interop”，它编译得很好，这个错误消失了，但是 Excel 无法识别 .dll，我收到以下错误消息：

“.dll 不是有效的 Excel 插件”

如何在不取消选中“注册 COM 互操作”的情况下成功编译它？

这是提示错误的例程：

```
Registers the main assembly for COM interop.
============================================================
-->
<PropertyGroup>
    <UnmanagedRegistrationDependsOn></UnmanagedRegistrationDependsOn>
</PropertyGroup>
<Target
    Name="UnmanagedRegistration"
    Condition="'$(RegisterForComInterop)'=='true' and '$(OutputType)'=='library'"
    DependsOnTargets="$(UnmanagedRegistrationDependsOn)"
    >

    <RegisterAssembly
        Assemblies="@(_OutputPathItem->'%(FullPath)$(TargetFileName)')"
        TypeLibFiles="@(_OutputPathItem->'%(FullPath)$(TargetName).tlb')"
        AssemblyListFile="@(_UnmanagedRegistrationCache)"
        CreateCodeBase="true"
        Condition="!Exists('@(_UnmanagedRegistrationCache)')"/>

    <ItemGroup>
        <FileWrites Include="@(_OutputPathItem->'%(FullPath)$(TargetName).tlb')"/>
    </ItemGroup>
</Target> 
```

提前致谢

# c# - 当分隔符可以在标记中时使用 RegEx 进行标记

> ID：14129999
> 
> 赞同：3
> 
> 时间：2013-01-02T22:08:59.060
> 
> 标签：c#, regex

我正在解析 C# 中的一些输入，并且我正在使用 RegEx 处理遇到问题。

免责声明：我不是正则表达式专家，但我正在学习更多。

我有一个如下所示的输入字符串：

ObjectType [property1=value1, property2=value2, property3=AnotherObjectType [property4=some value4]]

（一个人为的值，但重要的是这些可以嵌套）。

我正在执行以下操作来标记字符串：

```
Regex Tokenizer = new Regex(@"([=\[\]])|(,\s)");
string[] tokens = Tokenizer.Split(s); 
```

这让我完成了大约 98% 的工作。这会将字符串拆分为已知的分隔符，逗号后跟一个空格。

上例中的标记是：

```
ObjectType
[
property1
=
value1
,   
property2
=
value2
,
property3
=
AnotherObjectType
[
property4
=
some value4
]
] 
```

但我有两个问题：

1) 属性值可以包含逗号。这是一个有效的输入：

```
ObjectType [property1=This is a valid value, and should be combined,, property2=value2, property3=AnotherObjectType [property4=value4]] 
```

我希望 property1= 之后的令牌是：

```
This is a valid value, and should be combined, 
```

我希望保留令牌内的空格。目前，它在找到逗号时被拆分。

2) 拆分时，逗号标记包含空格。如果可能的话，我想摆脱这个，但这是一个不太重要的优先事项。

我尝试了各种选择，但它们都让我部分实现了目标。我所拥有的最接近的是：

```
 Regex Tokenizer = new Regex(@"([=\[\]])|(,\s)|([\w]*\s*(?=[=\[\]]))|(.[^=]*(?=,\s))"); 
```

为了匹配分隔符，逗号后跟空格，单词字符后跟文字前的空格，以及逗号和空格之前的文本（不包括 = 符号）。

当我得到匹配而不是调用 split 时，我得到了这个：

```
ObjectType
[
property1
=
value1
,   
property2
=
value2
,
property3
=
AnotherObjectType
[
property4
=
value4
]
] 
```

请注意属性 4 中缺少的信息。更复杂的输入有时会在令牌中包含右括号，如下所示： value4] 我不确定为什么会发生这种情况。关于如何改进这一点的任何想法？

谢谢，菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:08:40.620

使用词法分析器和解析器工具最容易回答这个问题。许多人认为它们对于这些“简单”的用例来说太复杂了，尽管我一直发现它们更清晰、更容易推理。你不会陷入愚蠢的逻辑。

对于 C#，[GPLEX](http://gplex.codeplex.com/)和[GPPG](http://gppg.codeplex.com/)似乎是一些不错的选择。请参阅[此处了解您可能想要使用它们的原因](https://stackoverflow.com/questions/5282384/how-to-create-a-parserlex-yacc)。

在您的情况下，您有一个语法，这就是您如何根据上下文定义不同标记之间的交互。此外，您还拥有在您选择的语言和工具链中实现此语法的详细信息。语法相对容易定义，您已经非正式地这样做了。细节是棘手的部分。如果您有一个框架可以读取一些已定义的写出语法位的方式并生成代码来实际执行它，那不是很好吗？

简而言之，这就是这些工具的工作方式。文档很短，因此请通读*所有*文档，提前花点时间会很有帮助。

本质上，您将声明一个扫描器和解析器。扫描器接收文本流/文件并将其与各种正则表达式进行比较，直到匹配。该匹配作为令牌传递给解析器。然后下一个标记被匹配并向上传递，一轮又一轮，直到文本流清空。

每个匹配的标记都可以附加任意 C# 代码，并且与解析器中的每个规则相同。

我通常不使用 C#，但我已经编写了很多词法分析器和解析器。不同语言的原则是相同的。这是解决您的问题*的*最佳解决方案，并将在您的整个职业生涯中一次又一次地帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:18:30.727

您可以使用两个正则表达式和一个递归函数来做到这一点，但有**一个警告**：必须转义特殊字符。从我所见，`"="`和`"["`具有特殊含义，因此如果您希望它们作为属性值的一部分出现，则`"]"`必须在这些字符之前插入 a 。`"\"`请注意，逗号不被视为“特殊”。字符串前的逗号`"property="`会被忽略，否则不会以特殊方式处理（事实上，在属性之间是可选的）。

## 输入

```
ObjectType
[
    property1=value1,val\=value2   
    property2=value2 \[property2\=this is not an object\], property3=
        AnotherObjectType [property4=some 
value4]] 
```

## 常用表达

用于发现“复杂”类型的正则表达式（以类型名称开头，后跟方括号）。正则表达式包括一种平衡方括号的机制，以确保每个左括号都与一个右括号配对（这样匹配不会过早或过晚结束）：

```
^\s*(?<TypeName>\w+)\s*\[(?<Properties>([^\[\]]|\\\[|\\\]|(?<!\\)\[(?<Depth>)|(?<!\\)\](?<-Depth>))*(?(Depth)(?!)))\]\s*$ 
```

用于发现复杂类型中的属性的正则表达式。请注意，这还包括平衡的方括号，以确保子复杂类型的属性不会被父级意外使用。

```
(?<PropertyName>\w+)\s*=\s*(?<PropertyValue>([^\[\]]|\\\[|\\\]|(?<!\\)\[(?<Depth>)|(?<!\\)\](?<-Depth>))*?(?(Depth)(?!))(?=$|(?<!\\)\]|,?\s*\w+\s*=)) 
```

## 代码

```
private static Regex ComplexTypeRegex = new Regex( @"^\s*(?<TypeName>\w+)\s*\[(?<Properties>([^\[\]]|\\\[|\\\]|(?<!\\)\[(?<Depth>)|(?<!\\)\](?<-Depth>))*(?(Depth)(?!)))\]\s*$" );
private static Regex PropertyRegex = new Regex( @"(?<PropertyName>\w+)\s*=\s*(?<PropertyValue>([^\[\]]|\\\[|\\\]|(?<!\\)\[(?<Depth>)|(?<!\\)\](?<-Depth>))*?(?(Depth)(?!))(?=$|(?<!\\)\]|,?\s*\w+\s*=))" );

private static string Input = 
    @"ObjectType" + "\n" +
    @"[" + "\n" +
    @"    property1=value1,val\=value2   " + "\n" +
    @"    property2=value2 \[property2\=this is not an object\], property3=" + "\n" +
    @"        AnotherObjectType [property4=some " + "\n" + 
    @"value4]]";

static void Main( string[] args )
{
    Console.Write( Process( 0, Input ) );
    Console.WriteLine( "\n\nPress any key..." );
    Console.ReadKey( true );
}

private static string Process( int level, string input )
{
    var l_complexMatch = ComplexTypeRegex.Match( input );

    var l_indent = string.Join( "", Enumerable.Range( 0, level * 3 ).Select( i => " " ).ToArray() );

    var l_output = new StringBuilder();

    l_output.AppendLine( l_indent + l_complexMatch.Groups["TypeName"].Value );

    foreach ( var l_match in PropertyRegex.Matches( l_complexMatch.Groups["Properties"].Value ).Cast<Match>() )
    {
        l_output.Append( l_indent + "@" + l_match.Groups["PropertyName"].Value + " = " );

        var l_value = l_match.Groups["PropertyValue"].Value;

        if ( Regex.IsMatch( l_value, @"(?<!\\)\[" ) )
        {
            l_output.AppendLine();
            l_output.Append( Process( level + 1, l_value ) );
        }
        else
        {
            l_output.AppendLine( "\"" + l_value + "\"" );
        }

    }

    return l_output.ToString();
} 
```

## 输出

```
ObjectType
@property1 = "value1,val\=value2  "
@property2 = "value2 \[property2\=this is not an object\]"
@property3 = 
   AnotherObjectType
   @property4 = "some value4" 
```

* * *

如果您无法逃脱分隔符，那么我怀疑即使是人类也可以解析这样的字符串。例如，人类如何可靠地知道属性 3 的值应该被视为文字字符串还是复杂类型？