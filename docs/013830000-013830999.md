# StackOverflow 问答 13830000-13830999

# jms - 让消息队列订阅主题

> ID：13830000
> 
> 赞同：1
> 
> 时间：2012-12-11T23:04:00.513
> 
> 标签：jms, websphere, ibm-mq

我有一个有两个订阅者的主题。但是，其中一个订阅者将部署在集群中。因此，实际上（我认为？）集群将被视为多个订阅者。我需要确保集群只使用一条消息。

我不知道执行此操作的选项。是否可以在集群和主题之间插入一个队列，然后让集群应用程序只使用插入的队列？

如果这是可能的，一般来说，如何让队列“订阅”主题？

我听到的另一个想法是在集群中创建克隆订阅者，有人听说过这个来解决这个问题吗？

另一个想法是取消主题，只使用两个队列，这似乎是一个安全的解决方案？

使用 WebSphere MQ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T04:00:36.187

您可以使用持久订阅来实现此目的。

管理性地创建一个持久订阅并指定一个目标，基本上是一个队列，它将接收在指定主题上发布的发布。然后，您的集群应用程序可以从该目的地获取消息。由于发布是从队列中接收的，因此只有一个应用程序实例会收到消息。

下面的命令为主题“/SPORTS/HOCKEY”创建持久订阅，目标队列为 Q1。

```
DEFINE SUB(SPORTSUB) TOPICSTR(/SPORTS/HOCKEY) TOPICOBJ(SPORT) DESTQ(Q1) 
```

# cassandra - 一个 Cassandra 节点无法加入 Cassandra 集群

> ID：13830002
> 
> 赞同：1
> 
> 时间：2012-12-11T23:04:07.107
> 
> 标签：cassandra, cluster-computing

我正在配置一个位于三台不同机器上的三节点 Cassandra 集群。我可以互相ping通，也可以ssh。我已经在这三台机器上设置了 cassandra 集群。假设它们是 A、B、C，其中 A 是种子。在这里，C 成功加入种子 (A)，并打印了加入日志。当我通过 A 分析集群时，我可以看到 C 已加入，并且拥有 66.7% 的所有权。“A”拥有 33.3% 的所有权。（我已经平分了令牌。）但是节点 B 没有加入集群。没有打印错误。B 和 C 的配置类似，除了 listen_address 和 rpc_address。我验证了这两者之间的配置，它们是相似的。

这可能是网络的问题，但我不确定是否是这种情况。没有问题被打印出来。关于我可以在这里尝试的事情有什么建议吗？这似乎很奇怪。这可能是由于某些端口问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:41:42.273

你在哪个 Cassandra 版本上？

尝试关闭每个节点并一个一个地启动它们。1.1.6 之前的 Cassandra（我认为是那个版本）存在节点有时无法重新加入环的问题。

其次，确保每个节点都配置有相同的集群名称和相同的种子节点集。

# javascript - 如何在javascript中路径文件？

> ID：13830003
> 
> 赞同：1
> 
> 时间：2012-12-11T23:04:07.317
> 
> 标签：javascript, wordpress

我将这段代码放在一个名为：general.js 的文件中

```
if($('#showcase').length) {
$.include('js/jquery.aw-showcase.js'); 
```

}

但众所周知，Wordpress 用于`bloginfo('template_url')`路径文件。

在前端不起作用，因为显示不正确的路径`<script type="text-javascript" src="js/jquery.aw-showcase.js"></script>`

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:36:37.477

也许不是最好的解决方案，但您总是可以在主索引文件的早期声明一个 JS 变量，如下所示：

```
<script type="text/javascript">
    var template_url = "<?php bloginfo('template_url') ?>";
</script> 
```

现在，在您的 general.js 文件中，您可以这样引用它：

```
if ($('#showcase').length) {
    $.include(template_url + '/js/jquery.aw-showcase.js');
} 
```

您通常应该避免使用全局变量，但在这种情况下它可能是唯一的解决方案。

编辑：您实际上可能想要使用[wp_localize_script](http://codex.wordpress.org/Function_Reference/wp_localize_script)而不是声明全局变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T23:20:54.247

至少，你能不试试这个吗？

```
if($('#showcase').length) {
  $.include('/wp-content/themes/yourthemename/js/jquery.aw-showcase.js');
} 
```

# qooxdoo - 如何在 qooxdoo 移动文本字段小部件上获取数字键盘

> ID：13830007
> 
> 赞同：2
> 
> 时间：2012-12-11T23:04:34.413
> 
> 标签：qooxdoo

我在 qooxdoo 移动应用程序中有一个文本字段小部件，仅用于数字输入。

在 qooxdoo 移动文本字段小部件上输入/编辑值时，有什么方法可以获得数字键盘？

我找到了这个[http://blog.pamelafox.org/2012/05/triggering-numeric-keyboards-with-html5.html](http://blog.pamelafox.org/2012/05/triggering-numeric-keyboards-with-html5.html)。

如果我知道如何访问我可以在其上设置类型和步骤属性的文本字段小部件的 html 输入元素，该链接将是一个解决方案。但也许 qooxdoo 提供了更直接的解决方案。

所以问题是 - 在输入/编辑到 qooxdoo 移动文本字段小部件时如何获得数字键盘。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T23:34:01.113

存在 qooxdoo.ui.mobile.form.NumberField 具有非常吸引人的数字键盘。

工作做得很好。

希望这对其他人有帮助。

# android - Android getIntent() 每次在 onResume() 中返回相同的意图。如何清除捆绑中的 int 字段？

> ID：13830012
> 
> 赞同：16
> 
> 时间：2012-12-11T23:05:02.823
> 
> 标签：android

我正在开发使用 getIntent() 读取捆绑信息的应用程序。我想将其中一个捆绑字段设置为空，以便在随后的简历中收到修改后的意图，但我不断从 getIntent() 获得相同的意图。我注意到在按下后退键之后会产生一个新的意图，但不是其他的。

```
 intent.getExtras().getInt("FLAG_FIELD") returns 1
 intent.getExtras().setString("FLAG_FIELD", null); 
```

但是当 Activity 再次恢复时，getInt() 仍然返回一个值而不是 null。不确定如何清除包中的 Int 字段。

刚刚尝试更新：

```
intent.getExtras().putInt("FLAG_FIELD, -1); 
```

这也行不通。看起来来自 getIntent() 的意图无法更改。

更新：在活动变得可见之前，onResume() 会在调试器中连续调用 3 次？因此，即使我在这里设置了一个标志，它似乎也很难改变状态，因为我无法判断哪个 resume() 调用是实际显示之前的最后一个调用。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-11T23:18:48.687

您可以在那里覆盖`onNewIntent()`和更改附加功能。 [这](http://developer.android.com/reference/android/app/Activity.html#onNewIntent(android.content.Intent))是相关的文档。在此方法之后，您`onResume()`将被调用，我认为这就是您所追求的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-07T14:32:14.390

就我而言，我的问题是所选意图标志的错误。我不工作的代码是：

```
notificationIntent.setFlags((Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK)); 
```

现在我解决了

```
 notificationIntent.setFlags((PendingIntent.FLAG_UPDATE_CURRENT)); 
```

是的，不是最好的解决方案，但它有效

# php - PDO 选择语句回显

> ID：13830015
> 
> 赞同：0
> 
> 时间：2012-12-11T23:05:15.960
> 
> 标签：php, mysql, pdo

我正试图让这个从数据库中回显，我知道有问题，但我不知道它是否没有获取信息，或者我是否以错误的方式让它回显我是新手使用 PDO。

```
<?php
include 'add/dbconnect.php';
function getfevent ($conn) {
$sql = "SELECT `name` FROM `event` WHERE `featured` = 0 LIMIT 0, 30 ";
foreach ($conn->query($sql) as $row) {
    echo $row['name'];
}
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T23:11:41.993

调用`PDO::query`返回一个`PDOStatement`对象。你不只是像你试图做的那样迭代那个对象。您需要利用对象上的`fetch`、`fetchAll`、`fetchObject`等方法`PDOStatement`来访问或遍历结果集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T23:13:15.090

如果您没有从 PDO 收到任何错误，请尝试以下操作：

```
INSERT INTO `event` (name, featured) VALUES ("name", 0) 
```

然后看看你的回声是否有效:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T23:15:10.273

尝试这样的事情（未经测试）。

```
<?php
include 'add/dbconnect.php';
function getfevent ($conn) {
$sql = "SELECT `name` FROM `event` WHERE `featured` = 0 LIMIT 0, 30 ";
$statement=$conn->prepare($sql);
$statement->execute();
while($row=$statement->fetch()) {
echo $row['name'];
}
}
getfevent ($conn);
?> 
```

# python - Mac osx LION：python cxfreeze 安装错误：stdarg.h：没有这样的文件或目录

> ID：13830016
> 
> 赞同：0
> 
> 时间：2012-12-11T23:05:21.237
> 
> 标签：python, macos, gcc, osx-lion, cx-freeze

尝试在我的 Mac osx lion 10.7.4 和 XCODE 4.5.1 中使用 python 3.2.2 构建 cx_Freeze 版本 4.2.3

构建 cxfreeze 的命令：env ARCHFLAGS="-arch i386" python3 setup.py build

发生以下错误，希望有人经历过或知道如何解决此问题。

> 添加名为 token的
> 基础模块 添加名为 tokenize的
> 基础模块 添加名为 traceback的
> 基础模块 添加名为 types的
> 基础模块 添加名为 warnings的
> 基础模块 添加名为 weakref的基础模块
> running build
> running build_py
> running build_ext
> building 'cx_Freeze.util' extension
> gcc-4.2 -fno-strict -aliasing -fno-common -dynamic -DNDEBUG -g -O3 -isysroot /Developer/SDKs/MacOSX10.6.sdk -isysroot /Developer/SDKs/MacOSX10.6.sdk -arch i386 -I/Library/Frameworks/Python。 framework/Versions/3.2/include/python3.2m -c source/util.c -o build/temp.macosx-10.6-i386-3.2/source/util.o
> 在 /Library/Frameworks/Python.framework/Versions/3.2/include/python3.2m/Python.h:73 包含的文件中，来自 source/util.c:6:
> /Library/Frameworks/Python.framework/Versions/3.2 /include/python3.2m/bytearrayobject.h:9:20：错误：stdarg.h：没有这样的文件或目录
> 错误：命令“gcc-4.2”失败，退出状态为 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T00:53:55.080

gcc 4.2 没有 stdarg.h。切换到 4.0。[这个链接](https://stackoverflow.com/questions/3562310/how-do-i-change-what-version-of-gcc-xcode-uses)解释了如何切换 XCode 使用的 gcc 版本。

# java - 如何使用 Java 将 Inputstream（图像）存储到 Google App Engine Blobstore

> ID：13830021
> 
> 赞同：1
> 
> 时间：2012-12-11T23:05:53.437
> 
> 标签：java, google-app-engine, blobstore

使用 Blobstore 的教程似乎都演示了使用 HTML POST 表单存储数据。

**POST 到上传 URL：**

```
<form action="<%= blobstoreService.createUploadUrl("/upload") %>" method="post" enctype="multipart/form-data">
    <input type="file" name="myFile">
    <input type="submit" value="Submit">
</form> 
```

我想使用服务器上传文件。（Java）是否有用于此的 API？还是我必须手动获取上传 url，并使用 HttpURLConnection POST 服务器端？

```
 URL url = new URL(blobstoreService.createUploadUrl("/upload"));
 HttpURLConnection connection = (HttpURLConnection) url.openConnection(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:20:38.620

[在服务器端，您可以通过 File API](https://developers.google.com/appengine/docs/java/blobstore/overview#Writing_Files_to_the_Blobstore)将数据简单地存储在 blobstore中。

**更新：自 2013 年 11 月起，** [文件 API 已被弃用](https://developers.google.com/appengine/docs/java/blobstore/#Java_Writing_files_to_the_Blobstore)。如果您需要以编程方式创建大型 Blob，则应改用[Google Cloud Storage Client Library](https://developers.google.com/appengine/docs/java/googlecloudstorageclient/)。

# intellij-idea - PHPStorm 和 Intellij 中的工具栏图标大小

> ID：13830024
> 
> 赞同：7
> 
> 时间：2012-12-11T23:06:08.237
> 
> 标签：intellij-idea, phpstorm

我同时使用这两个 IDE，我唯一的烦恼是工具栏图标的大小——它们对我来说太小了。有什么办法可以增加尺寸吗？我四处寻找，但我还没有找到一种方法来分配大于约 20x20 的图标。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-03-02T03:57:01.487

解决此问题的最简单方法是进入设置 --> 外观和行为外观。

然后选中“覆盖默认字体（不推荐）”框：名称：<“设置您的字体”>大小：<“设置您的大小”>

这将增加字体大小和图标工具栏大小。这适用于 HiDPI 显示器。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-11T23:31:49.670

恐怕没有办法做到这一点。

请注意，许多开发人员更喜欢完全禁用工具栏以节省垂直屏幕空间。它没有提供很多有用的功能，它提供的所有功能都可以通过键盘快捷键访问。

不知道捷径？完全没有问题，使用`Help`| `Find Action`( `Ctrl`+ `Shift`+ `A`)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-12T13:21:14.127

您可以使用 23x23 像素的图标。这是最大尺寸。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-12T17:20:28.453

在 Linux 下，图标尺寸过小。我通过在此处安装[JB JRE](https://intellij-support.jetbrains.com/hc/en-us/articles/206544879)解决了这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-26T00:01:08.830

尝试使用这个插件。它有一个选项“更大的图标” [https://plugins.jetbrains.com/plugin/10044-atom-material-icons](https://plugins.jetbrains.com/plugin/10044-atom-material-icons)

[![在此处输入图像描述](../Images/6f1d0c11fc332f918bd8f29a0e3b1791.png)](https://i.stack.imgur.com/iCSbb.png)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-10-18T08:33:14.253

设置 --> 外观和行为外观。并再次出现。 [这里](https://i.stack.imgur.com/cG8y3.png)显示了在哪里看。

# url-rewriting - 使用 Jetty 在 ServletFilter 中进行 URL 重写

> ID：13830026
> 
> 赞同：0
> 
> 时间：2012-12-11T23:06:16.123
> 
> 标签：url-rewriting, jetty, servlet-filters

我需要在 ServletFilter 中重写 URL，以便将“foo.domain.com”重写为“foo.domain.com/foo”。我正在使用 Jetty，它有一种方便的修改请求的方法：只需将请求转换为 Jetty Request 对象，你就会得到一堆允许你修改它的设置器。这是我的代码（不起作用）：

```
String subdom = Util.getSubDomain(req);
org.eclipse.jetty.server.Request jettyReq = (Request) req;
String oldUri = jettyReq.getRequestURI();
String newUri = "/" + subdom + oldUri;
jettyReq.setRequestURI(newUri); 
```

我的目的是从位于 /webapps/root/foo 的 /foo 目录中提供文件。

我猜我还需要调用 setContextPath()、setPathInfo()、setURI()、setServletPath() 之类的东西，谁知道还有什么。

什么神奇的组合使它看起来像原来的请求是针对 /foo 的？

**编辑**：澄清一下，我说代码不起作用的原因是文件仍然从 /webapps/root 提供，而不是 /webapps/root/foo。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:07:14.770

只需使用重写处理程序，我们就支持您尝试执行的操作：

[http://wiki.eclipse.org/Jetty/Feature/Rewrite_Handler](http://wiki.eclipse.org/Jetty/Feature/Rewrite_Handler)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T21:39:01.183

回答我自己的问题：我失踪了

```
jettyReq.setServletPath(newUri); 
```

添加它，一切正常。

# perl - 如何在perl中删除单引号而不是撇号

> ID：13830028
> 
> 赞同：6
> 
> 时间：2012-12-11T23:06:18.647
> 
> 标签：perl

我想知道如何在 perl 中删除单引号而不是撇号。

例如：

> '又下雨了！'

打印

> 又下雨了！

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T23:08:51.307

如果您假设单引号之前或之后总是有空格，则以下一对正则表达式应该可以工作：

```
$line =~ s/\s'/ /g;  #preceded by whitespace
$line =~ s/'\s/ /g;  #followed by whitespace 
```

您还需要考虑字符串是否以单引号开头或结尾：

```
$str =~ s/^'//;  #at the start of a string
$str =~ s/'$//;  #at the end of a string 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T23:11:01.103

棘手的一个。一些单引号出现在字母之后或之前，但您只想删除字母之间的单引号。也许是这样的，使用负面的环视：

```
s/(?<![\pL\s])'|'(?![\pL\s])//g; 
```

这将删除它之后*或*之前没有字母的单引号或空格。有很多否定要跟踪那里。扩展版：

```
s/
    (?<![\pL\s])'   # no letters or whitespace before single quote
    |               # or
    '(?![\pL\s])    # no letters or whitespace after single quote
//gx; 
```

这将涵盖诸如 - 正如 Eli Algranti 在评论中指出的那样 -`boys' toys`和`that's`，但语言总是难以预测。例如，几乎不可能解决以下问题：

```
'She looked at him and said, 'That's impossible!'' 
```

当然，如果你希望你的单引号只出现在字符串的末尾或开头，你不需要这么花哨，你可以用任何必要的手段删除最后一个和第一个字符。例如，正如 sputnik 刚刚建议的那样：

```
s/^'|'$//g; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T23:12:45.773

```
foreach (<DATA>) {
    s/(:?(^\s*'|'$))//g;
    print;
}
__DATA__
 'It's raining again!' 
```

**输出**

```
It's raining again! 
```

**解释**

*   *有不止一种方法可以做到这一点*
*   `(:?)`防止不必要的捕获

# ios - 在现有应用程序中实现 coredata，创建或自动编写 sqllite

> ID：13830029
> 
> 赞同：0
> 
> 时间：2012-12-11T23:06:23.613
> 
> 标签：ios, core-data, core-data-migration

我正在将核心数据集成到我的应用程序中，我已经有一个 sqllite DB 文件。我应该创建一个新的以使其更容易，还是应该使用现有的。很抱歉有很多问题，谢谢你！

另外，如何创建一个新的？

我在 appdelegate 中实现了以下方法（没有错误），但是我不知道在文本字段中输入什么

这是什么？“myCoreData”是以 .xc​​datamodeld 结尾创建的核心数据数据库的名称吗？如果是这样，妈妈是什么？

```
NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"myCoreData" withExtension:@"momd"]; 
```

这是什么？这会创建数据库，还是我应该创建它并将信息放在这里？这个存储在哪里？

```
NSURL *storeURL = [[self applicationDocumentsDirectoryModified] URLByAppendingPathComponent:@"coreDataDB.sqlite"]; 
```

这是实现

```
- (void)saveContext
{
    NSError *error = nil;
    NSManagedObjectContext *managedObjectContext = self.managedObjectContext;
    if (managedObjectContext != nil) {
        if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error]) {
            // Replace this implementation with code to handle the error appropriately.
            // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        }
    }
}

#pragma Core Data stack

// Returns the managed object context for the application.
// If the context doesn't already exist, it is created and bound to the persistent store coordinator for the application.
- (NSManagedObjectContext *)managedObjectContext
{
    if (_managedObjectContext != nil) {
        return _managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) {
        _managedObjectContext = [[NSManagedObjectContext alloc] init];
        [_managedObjectContext setPersistentStoreCoordinator:coordinator];
    }
    return _managedObjectContext;
}

// Returns the managed object model for the application.
// If the model doesn't already exist, it is created from the application's model.
- (NSManagedObjectModel *)managedObjectModel
{
    if (_managedObjectModel != nil) {
        return _managedObjectModel;
    }
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"myCoreData" withExtension:@"momd"];
    _managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
    return _managedObjectModel;
}

// Returns the persistent store coordinator for the application.
// If the coordinator doesn't already exist, it is created and the application's store added to it.
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (_persistentStoreCoordinator != nil) {
        return _persistentStoreCoordinator;
    }

    NSURL *storeURL = [[self applicationDocumentsDirectoryModified] URLByAppendingPathComponent:@"coreDataDB.sqlite"];

    NSError *error = nil;
    _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {

        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return _persistentStoreCoordinator;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T23:44:10.943

没有使用 Magical 记录，最终在 xcode 中添加了来自新项目的样板代码。启动一个simgle view应用程序，点击coredata，去adddelegate，在底部是你最需要的方法。

为了使它更容易，我创建了一个包含 coredata 所需的所有方法的通信器。

# android - Android SQLite LIKE 转义通配符

> ID：13830034
> 
> 赞同：7
> 
> 时间：2012-12-11T23:06:55.030
> 
> 标签：android, sqlite, android-sqlite

在 Android Jellybean 4.1 上，是否可以转义 LIKE 通配符并仍然让 like 使用索引？

*采用：*

```
where field like 'xyz\_abc' 
```

*相对于：*

```
where field like 'xyz_abc' 
```

转义通配符是否适用于 Android？如果通配符被转义，它还会使用索引吗？

我目前正在做的是：

```
where field like 'xyz_abc' and lower(field) = lower('xyz_abc') 
```

由于通配符，这是非常低效的。

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-11T23:30:41.223

您需要使用该`ESCAPE`子句：

```
where field like 'xyz\_abc' escape '\' 
```

请参阅SQLite 文档中[的 LIKE 和 GLOB 运算符部分。](http://www.sqlite.org/lang_expr.html#like)

# bash - 使用 ls 和 find 在 bash 脚本中循环文件之间的区别

> ID：13830036
> 
> 赞同：4
> 
> 时间：2012-12-11T23:07:12.923
> 
> 标签：bash, unix, find, ls

我不确定我完全理解为什么：

```
for f in `find . -name "strain_flame_00*.dat"`; do
   echo $f
   mybase=`basename $f .dat`
   echo $mybase
done 
```

工作和：

```
for f in `ls strain_flame_00*.dat`; do
   echo $f
   mybase=`basename $f .dat`
   echo $mybase
done 
```

没有，即文件名没有被去掉后缀。我认为这是因为输出的`ls`格式不同，但我不确定。我什至试图放在`eval`ls 前面...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T01:26:35.400

在这里迭代文件名的正确方法是

```
for f in strain_flame_00*.dat; do
   echo "$f"
   mybase=$(basename "$f" .dat)
   echo "$mybase"
done 
```

使用`for`glob 模式，然后引用文件名的所有引用是使用可能包含空格的文件名的最安全方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T01:14:38.230

首先，永远不要解析`ls`命令的输出。

如果您必须使用`ls`并且您不知道`ls`那里有什么别名，请执行以下操作：

```
(
COLUMNS=
LANG=
NLSPATH=
GLOBIGNORE=
LS_COLORS=
TZ=
unset ls
for f in `ls -1 strain_flame_00*.dat`; do
  echo $f
  mybase=`basename $f .dat`
  echo $mybase
done
) 
```

它用括号括起来以保护现有环境、别名和 shell 变量。

各种环境名称被 NUKED（就像`ls`查找这些名称一样）。

一个 unalias 命令（不言自明）。

一个未设置的命令（再次，防止一丝不苟的霸主“ls”功能）。

现在，您可以看到为什么不使用“ls”了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T01:18:05.397

尚未提及的另一个区别是`find`默认情况下是递归搜索，而`ls`不是。（即使两者都可以通过选项被告知进行递归/非递归；并且`find`可以被告知递归到指定的深度）

而且，正如其他人所提到的，如果可以通过[globbing](http://tldp.org/LDP/abs/html/globbingref.html)来实现，则应避免使用其中任何一个。

# c++ - 打开通过蓝牙发送的接收文件 - 如何等到完全接收？

> ID：13830044
> 
> 赞同：0
> 
> 时间：2012-12-11T23:07:54.180
> 
> 标签：c++, linux, ubuntu

我正在用 C++ 编写一些代码来监视 ubuntu 放置通过蓝牙接收的文件的目录（~/Downloads）。我使用图像作为示例文件，因为应用程序正在打开图像并显示它们。

该代码每 2 秒轮询一次目录并检查那里是否有任何文件。如果有，它会立即将文件放入子目录并加载它。但是，它会在传输完成之前加载文件。它查看文件、移动文件、加载文件并显示损坏的图像，同时仍在传输中。

子目录最终包含完整的图像。

我尝试使用 fcntl 锁定文件，但即使它仍在写入，它也会成功锁定：

```
#ifndef WIN32
        //We have to do a file lock on ubuntu...
                          /* l_type   l_whence  l_start  l_len  l_pid   */
        struct flock fl = {F_WRLCK, SEEK_SET,   0,      0,     0 };
        int fd;
        fl.l_pid = getpid();
        if((fd = open(newFile.c_str(),O_RDWR)) == -1){
            DODEBUG(ALWAYS,("LOCKING FAILED!"));
            continue;
        }
        if (fcntl(fd, F_SETLKW, &fl) == -1) {
            DODEBUG(ALWAYS,("LOCKING FAILED!"));
            close(fd);
            continue;
        }
        DODEBUG(ALWAYS,("GOT LOCK"));
        fl.l_type = F_UNLCK;  /* set to unlock same region */
        if (fcntl(fd, F_SETLK, &fl) == -1) {
            DODEBUG(ALWAYS,("UNLOCKING FAILED!"));
        }
        close(fd);

#endif
        newFile = moveFile(newFile);
        const std::string s(newFile);
        loadImage(newFIle); 
```

请注意，我正在编写的代码也需要在 windows 和 mac 上运行。Windows 版本已经完美运行，因为在完全接收文件之前无法访问该文件。我没有尝试过mac，但我认为它与ubuntu有相同的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:23:52.117

解决此问题的一种解决方法是维护具有文件名和文件大小的结构列表。每次您检查目录时都会获取文件列表，请根据您的列表检查它们，如果文件不在您的列表中，请添加它。如果文件在您的列表中，请比较文件大小。如果文件大小相同，则（假设传输未中断）您知道传输已完成。

# javascript - 在 IE9 中使用 JavaScript 错误调试网站 - 打开调试控制台可修复错误

> ID：13830047
> 
> 赞同：2
> 
> 时间：2012-12-11T23:08:25.890
> 
> 标签：javascript, windows, internet-explorer, debugging, internet-explorer-9

我有一个网站会在 IE9 中触发一些 JavaScript 错误。使用 F12 打开调试控制台并重新加载页面时，问题消失了，一切运行正常。这显然很烦人，因此很难检测到错误消息以解决问题。

这是一个带有谷歌地图的页面。通常，地图上应该有标记。在 IE9 中，没有。打开控制台时，一切正常。

有谁知道如何调试这种烦恼？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T23:12:40.040

在 IE 中，`console`除非控制台打开，否则该对象不可用。这就是它关闭时导致错误的原因。从您的代码中删除所有对的引用`console`，您应该没问题。

# windows-phone-7 - Windows phone 8 gps/海拔问题

> ID：13830053
> 
> 赞同：1
> 
> 时间：2012-12-11T23:08:47.497
> 
> 标签：windows-phone-7, gps, windows-phone-8, altitude

更新：使用此处的示例 - [http://code.msdn.microsoft.com/wpapps/Location-sample-f11aa4e7](http://code.msdn.microsoft.com/wpapps/Location-sample-f11aa4e7)并添加高度读数我得到与我的代码相同的内容。精度差是偏离了 50 英尺。在 720（正确）和 300 英尺之间来回走动意味着有问题。就是看不出来哪里...

我开始为 windows phone 8 制作一个 GPS 跟踪应用程序，但有些东西出了问题。在我的应用程序（和示例位置应用程序）中，我得到了一些正确的读数，而另一些则不是。一般来说，高度在 ~95 和 ~215 之间来回跳跃（215 是正确的）。我得到的距离也非常不准确，坐在我的办公桌前或在外面走动时会迅速跳到几英里。

我不确定要发布什么代码，因为它与示例代码相同。如果您认为还有另一个相关部分，我应该发布让我知道，我会添加它。

```
 double maxSpeed = 0.0;
    double maxAlt = -9999999.0;
    double minAlt = 9999999.0;
    double curDistance = 0.0;
    GeoCoordinate lastCoord = null;
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        if ((bool)IsolatedStorageSettings.ApplicationSettings["LocationConsent"] != true)
        {
            // The user has opted out of Location.
            return;
        }

        if (App.Geolocator == null)
        {
            // Use the app's global Geolocator variable
            App.Geolocator = new Geolocator();
        }

        App.Geolocator.DesiredAccuracy = PositionAccuracy.High;
        //App.Geolocator.MovementThreshold = 1; // The units are meters.
        App.Geolocator.ReportInterval = 1000;
        //App.Geolocator.DesiredAccuracyInMeters = 50;
        App.Geolocator.StatusChanged += geolocator_StatusChanged;
        App.Geolocator.PositionChanged += geolocator_PositionChanged;

        /*
        geolocator = new Geolocator();
        geolocator.DesiredAccuracy = PositionAccuracy.High;
        //geolocator.MovementThreshold = 1; // The units are meters.
        geolocator.ReportInterval = 1000;
        geolocator.StatusChanged += geolocator_StatusChanged;
        geolocator.PositionChanged += geolocator_PositionChanged;
         * 
         * */
        logging = true;

        startTime = DateTime.Now;

    }
public static GeoCoordinate ConvertGeocoordinate(Geocoordinate geocoordinate)
    {
        return new GeoCoordinate
            (
            geocoordinate.Latitude,
            geocoordinate.Longitude,
            geocoordinate.Altitude ?? Double.NaN,
            geocoordinate.Accuracy,
            geocoordinate.AltitudeAccuracy ?? Double.NaN,
            geocoordinate.Speed ?? Double.NaN,
            geocoordinate.Heading ?? Double.NaN
            );
    }
void geolocator_PositionChanged(Geolocator sender, PositionChangedEventArgs args)
    {
        Dispatcher.BeginInvoke(() =>
        {
            if (lastCoord == null)
            {
                lastCoord = ConvertGeocoordinate(args.Position.Coordinate);
            }
            DateTime currentTime = DateTime.Now;

            TimeSpan totalTime = currentTime - startTime;

            timeValue.Text = totalTime.ToString(@"hh\:mm\:ss");

            System.Diagnostics.Debug.WriteLine(args.Position.Coordinate.Altitude.ToString());

            GeoCoordinate thisLocation = ConvertGeocoordinate(args.Position.Coordinate);

            if (true)  //units check true = standard
            {
                double speed = (double)thisLocation.Speed;
                speed *= 2.23694; //m/s -> mph
                speedValue.Text = speed.ToString("0");

                double alt = (double)thisLocation.Altitude;
                if (alt > maxAlt)
                {
                    maxAlt = alt;
                }
                if (alt < minAlt)
                {
                    minAlt = alt;
                }
                /*
                double currentAlt = (maxAlt - minAlt);
                currentAlt *= 3.28084; //m -> ft
                 * */
                alt *= 3.28084;
                altValue.Text = alt.ToString("0");

                double distance = thisLocation.GetDistanceTo(lastCoord);

                curDistance += distance;

                distance = curDistance * 0.000621371; // m -> miles

                distanceValue.Text = distance.ToString("0.00");

                distanceUnits.Text = "(mi)";
                speedUnits.Text = "(mph)";
                altUnits.Text = "(ft)";

            }

        });
    } 
```

编辑：我没有提到，但速度非常好，仅供参考。纬度/经度通常也非常接近我的位置，所以我认为这不是硬件问题。

更新：当在调试器中停止检查值而不是仅仅打印它时，它会给出：

Altitude = 评估方法 Windows.Devices.Geolocation.Geocoordinate.get_Altitude() 时发生内部错误

我试图搜索这个，但在互联网上找不到错误...

文档指出高度和其他一些不能保证，但它还说如果不存在该值将为空。我检查了一下，它永远不会为空。它总是打印一个值，无论是正确的还是大约 400 英尺。

更新：示例代码：

```
void geolocator_PositionChanged(Geolocator sender, PositionChangedEventArgs args)
    {
        System.Diagnostics.Debug.WriteLine(args.Position.Coordinate.Altitude.ToString());

        if (!App.RunningInBackground)
        {
            Dispatcher.BeginInvoke(() =>
            {
                LatitudeTextBlock.Text = args.Position.Coordinate.Latitude.ToString("0.00");
                LongitudeTextBlock.Text = args.Position.Coordinate.Longitude.ToString("0.00");

            });
        }
        else
        {
            Microsoft.Phone.Shell.ShellToast toast = new Microsoft.Phone.Shell.ShellToast();
            toast.Content = args.Position.Coordinate.Latitude.ToString("0.00");
            toast.Title = "Location: ";
            toast.NavigationUri = new Uri("/MainPage.xaml", UriKind.Relative);
            toast.Show();

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T00:10:04.930

您可能会（也）看到不同的问题，但 GPS 高度不是很可靠。我有一些 Garmin 设备，它们到处乱跳。你真的需要一个气压计来获得不错的高度精度。这是关于 GPS 姿态不准确[GPS Elevation的链接](http://weather.gladstonefamily.net/gps_elevation.html)

# grails - 在 gsp 中解析嵌套映射（hashMap）

> ID：13830062
> 
> 赞同：1
> 
> 时间：2012-12-11T23:09:35.357
> 
> 标签：grails, groovy, gsp

这一切都在标题中。我一直在尝试解析在我的示例控制器中构建的嵌套地图，如下所示：

```
 def index() {

    Map<String, Object> motherMap = new HashMap<String, Object>()
    Map<String, String> childMap1 = new HashMap<String, String>()
    Map<String, String> childMap2 = new HashMap<String, String>()
    Map<String, String> childMap3 = new HashMap<String, String>()

    childMap1.put("cm1_key1", "cm1_value1")
    childMap1.put("cm1_key2", "cm1_value2")
    childMap1.put("cm1_key3", "cm1_value3")

    childMap2.put("cm2_key1", "cm2_value1")
    childMap2.put("cm2_key2", "cm2_value2")
    childMap2.put("cm2_key3", "cm2_value3")

    childMap3.put("cm3_key1", "cm3_value1")
    childMap3.put("cm3_key2", "cm3_value2")
    childMap3.put("cm3_key3", "cm3_value3")

    motherMap.put("mm_key1", childMap1)
    motherMap.put("mm_key2", childMap2)
    motherMap.put("mm_key3", childMap3)

    render (view: "thePage", model:[motherMap: motherMap])
} 
```

在 GSP 中，我尝试获取这样的 childMaps 元素：

```
 ... html / gsp code ...
    <table>
        <g:each in="${motherMap.entrySet()}" var="entry">
            <g:if test="${entry.key != 'mm_key2'}">
                <g:each in="${entry.value.entrySet()}" var="childMap">
                    <tr>
                        <td>${childMap.key}</td>
                        <td>${childMap.value}</td>
                    </tr>
                </g:each>
            </g:if>
        </g:each>
    </table>
    ... html / gsp code ... 
```

但我在处理页面时遇到了异常。被`entry.value`解释为字符串，因此调用会`.entrySet()`导致异常。

有没有办法用 GSP 标签获取子地图的内容？

编辑：

@Sérgio Michels：我将 Grails 1.3.7 与 Groovy 1.7（强加）一起使用。

这是堆栈跟踪：

```
 [ServiceBox] ERROR 2012-12-11 22-12-40 - Error processing GroovyPageView: No signature of method: java.lang.String.entrySet() is applicable for argument types: () values: []
    Possible solutions: getBytes(), every()
    groovy.lang.MissingMethodException: No signature of method: java.lang.String.entrySet() is applicable for argument types: () values: []
    Possible solutions: getBytes(), every()
        at F__SES_thePage_gsp$_run_closure2_closure3.doCall(thePage.gsp:54)
        at F__SES_thePage_gsp$_run_closure2.doCall(thePage.gsp:51)
        at F__SES_thePage_gsp$_run_closure2.doCall(thePage.gsp)
        at F__SES_thePage_gsp.run(thePage.gsp:65)
        at com.ircem.filter.CharsetFilter.doFilter(CharsetFilter.java:24)
        at java.lang.Thread.run(Thread.java:595)
    [ServiceBox] ERROR 2012-12-11 22-12-40 - Exception occurred when processing request: [GET] /ServiceBox/getthePage
    Stacktrace follows:
    org.codehaus.groovy.grails.web.pages.exceptions.GroovyPagesException: Error processing GroovyPageView: No signature of method: java.lang.String.entrySet() is applicable for argument types: () values: []
    Possible solutions: getBytes(), every()
        at com.ircem.filter.CharsetFilter.doFilter(CharsetFilter.java:24)
        at java.lang.Thread.run(Thread.java:595)
    Caused by: groovy.lang.MissingMethodException: No signature of method: java.lang.String.entrySet() is applicable for argument types: () values: []
    Possible solutions: getBytes(), every()
        at F__SES_thePage_gsp$_run_closure2_closure3.doCall(thePage.gsp:54)
        at F__SES_thePage_gsp$_run_closure2.doCall(thePage.gsp:51)
        at F__SES_thePage_gsp$_run_closure2.doCall(thePage.gsp)
        at F__SES_thePage_gsp.run(thePage.gsp:65)
        ... 2 more 
```

@tim_yates：删除`.entrySet()`呼叫原因`groovy.lang.MissingPropertyException: No such property: key for class: java.lang.String`。控制器的 HashMap 在视图中被解释为 String。

重新编辑：

错误是我的，在进行明确的清理操作时，我将子地图转换为字符串。循环`Xmap.entrySet()`工作正常。抱歉，添麻烦了。无论版本如何，Grails 都令人震撼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:56:09.770

尝试这个：

```
<g:each in="${motherMap}" var="motherMapEntry">
    <p>
    <g:if test="${motherMapEntry.key != 'mm_key2'}">
        <g:each in="${motherMapEntry.value}" var="entry">
            <p>${entry.key} -> ${entry.value}
        </g:each>
    </g:if>
</g:each> 
```

# python - 将特定时区中的日期时间对象转换为该时区中的纪元秒

> ID：13830064
> 
> 赞同：5
> 
> 时间：2012-12-11T23:09:50.743
> 
> 标签：python, datetime, timezone-offset, timestamp-with-timezone

例如：

`>>> print dt`
`2012-12-04 19:00:00-05:00`

如您所见，我有这个 datetime 对象如何在 GMT -5 中将此 datetime 对象转换为纪元秒。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T23:24:26.890

您的日期时间不是一个天真的日期时间，它知道它所在的时区（您的打印状态是-5）。因此，您只需在将其转换为 epoch 之前将其设置为 utc

```
>>> import time, pytz
>>> utc = pytz.timezone('UTC')
>>> utc_dt = utc.normalize(dt.astimezone(utc))
>>> time.mktime(utc_dt.timetuple())
1355270789.0 # This is just to show the format it outputs 
```

如果 dt 对象是一个简单的 datetime 对象，您需要使用时区来遵守夏令时，同时在 GMT 0 之间找到正确的时间。例如，罗马尼亚在冬天，它有 +2，在夏天+3。

对于您的 -5 示例，New-York 将执行以下操作：

```
>>> import time,pytz
>>> timezone = pytz.timezone('America/New_York')
>>> local_dt = timezone.localize(dt) 
```

现在你有一个非天真的日期时间，你可以像我第一次解释的那样获得纪元时间。玩得开心

# eclipse - eGit/ZendStudio 9 生成的 Refspec HEAD:refs/for/refs/heads/master 是什么意思？

> ID：13830065
> 
> 赞同：3
> 
> 时间：2012-12-11T23:10:01.347
> 
> 标签：eclipse, git

在 ZendStudio 9 中从 Git 建立一个项目。（基于 eclipse 和 eGit）

它生成一个安静的正常 fetch refspec：

```
Remote Fetch Specification  +refs/heads/*:refs/remotes/original/* 
```

但是一个非常神秘的 push refspec：

```
Remote Push Specification   HEAD:refs/for/refs/heads/master 
```

在遥控器中，我可以通过“git ls-remote”看到以下内容：

```
8db575549dea67a45cea04358f902993c940c4d8        HEAD
16f0939153e6ef12b4596f0d4fb43fa5b8b0246b        refs/for/refs/heads/master
8db575549dea67a45cea04358f902993c940c4d8        refs/heads/master 
```

我在本地机器上有“git status”的消息：

```
On branch master
Your branch is ahead of 'original/master' by 5 commits. 
```

所以，请注意，因为我的问题不是“这是什么意思”......

我的问题是：

*   这个工作流程是什么意思？什么是感觉？
*   这个在服务器“refs/for..”上生成的 Ref 是为了什么？
*   在本地分支上工作而不是在服务器上使用 ref 推送不是更好吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T07:04:48.597

一，通常的 Gerrit 相关 refspec 应该是（正如[jszakmeister](https://stackoverflow.com/users/683080/jszakmeister)在“ [Gerrit 代码审查 - 上传更改”中所](http://gerrit-documentation.googlecode.com/svn/Documentation/2.5/user-upload.html#push_create)[评论](https://stackoverflow.com/questions/13830065/what-does-the-refspec-headrefs-for-refs-heads-master-generated-by-egit-zendstud#comment19035000_13830065)的那样）

```
HEAD:refs/for/branchname 
```

所以，如果有的话，它应该是

```
HEAD:refs/for/master 
```

但在你的情况下，你不需要那种 refspec （因为你没有 Gerrit）

> 这是一种通常的提交方式，

不它不是。

> 这是一个糟糕的默认值，一文不值？

在你的情况下，是的，它没有用。

[这可能是该线程](http://forums.zend.com/viewtopic.php?f=59&t=73758)提到的副作用：

> 事实上，Gerrit 与 EGit 功能集成并一起提供。目前无法从 Zend Studio 中禁用 Gerrit。

[错误 347077“使 Gerrit 功能可选”](https://bugs.eclipse.org/bugs/show_bug.cgi?id=347077)仍然存在。

* * *

[OP](https://stackoverflow.com/users/1388397/tweini) tweini[评论](https://stackoverflow.com/questions/13830065/what-does-the-refspec-headrefs-for-refs-heads-master-generated-by-egit-zendstud/13834537#comment19105063_13834537)：

> To go out of this trap, iI had to realize, that this ref is creating a branch on remote *without a remote tracking branch* associated with it.
> 
> But to get rid of it is pretty easy:
> 
> *   Change push refspec in `.git/config` to `push = refs/heads/master:refs/heads/master`,
> *   Push your local repo to remote `git push`
> *   Delete the branch on remote `git push --delete origin refs/for/refs/heads/master`

# ruby - Ruby 线程和互斥锁

> ID：13830072
> 
> 赞同：3
> 
> 时间：2012-12-11T23:11:12.897
> 
> 标签：ruby, multithreading

为什么以下 ruby​​ 代码不起作用？

```
 2 | require 'thread'
 3 | 
 4 | $mutex = Mutex.new
 5 | $mutex.lock
 6 |
 7 | t = Thread.new {
 8 |   sleep 10
 9 |   $mutex.unlock
10 | }
11 | 
12 | $mutex.lock
13 | puts "Delayed hello" 
```

当我运行它时，我收到一个错误：

```
./test.rb:13:in `lock': thread 0x7f4557856378 tried to join itself (ThreadError)
    from ./test.rb:13 
```

同步两个线程而不加入它们的正确方法是什么（同步后两个线程必须继续运行）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-12-15T04:16:18.590

这是旧的，但我正在贡献，因为其他答案（在撰写本文时）似乎都不正确有点可怕。原始代码显然试图：

*   在主线程中创建一个互斥锁并锁定它。
*   启动一个新线程，该线程可以在任何时间开始运行，并且在任何延迟之后都会受到 Ruby 运行时的突发奇想。
*   仅在完成工作后才让该线程解锁互斥锁。
*   然后让主线程故意重新锁定互斥锁，目的是它产生一个将解锁它的线程。主线程等待。
*   然后主线程继续运行。

@user2413915：您的解决方案省略了在主线程中再次锁定的步骤，因此它不会按预期等待生成的线程。

@Paul Rubel：您的代码假定生成的线程在主线程之前获得了互斥锁的锁定。这是一个竞争条件。如果主线程继续执行并首先锁定，则生成的线程将被阻塞，直到*主*线程打印“Delayed hello”，这与期望的结果完全相反。您可能通过粘贴到 IRB 提示符来运行它；如果您尝试修改示例以使`end`和互斥锁在同一行，它将失败，过早打印消息（即“ `end; $mutex.lock`”）。无论哪种方式，它都依赖于偶然工作的 Ruby 运行时的行为。

原始代码在原则上实际上应该可以正常工作，尽管可以说缺乏优雅 - 实际上 Ruby 1.9+ 运行时不会允许它，因为它在没有解锁的情况下“看到”主线程中的两个连续锁并且没有“实现”有一个衍生线程将进行解锁。Ruby（在这种情况下在技术上是错误的）引发 ThreadError 死锁异常。

相反，巧妙地使用 ruby​​ 队列。当您尝试从队列中提取某些内容时，调用将阻塞，直到有可用的项目。所以：

```
require 'thread'
require 'queue'

queue = Queue.new

t = Thread.new {
  sleep 10
  queue.push( nil ) # Push any object you like - here, it's a NilClass instance
}

queue.pop() # Blocks until thread 't' pushes onto the queue
puts "Delayed hello" 
```

如果生成的线程首先运行并推送到队列中，那么主线程只会弹出该项目并继续运行。如果主线程在派生线程推送之前尝试弹出，它将等待派生线程。

[编辑：请注意，推入队列的对象可能是派生线程处理任务的结果，因此主线程等待处理完成并一次性获得处理结果]。

我已经在 Ruby 1.8.7-p375 ​​和 Ruby 2.1.2 via`rbenv`上成功地测试了这一点，因此可以合理地假设标准库 Queue 类在所有常见的主要 Ruby 版本中都可以正常工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-22T11:04:14.133

您无需再次调用第 12 行的互斥锁。

```
require 'thread'

$mutex = Mutex.new
$mutex.lock
t = Thread.new {
  sleep 10
  $mutex.unlock
}

puts "Delayed hello" 
```

这将起作用。

# powershell - 通过 Powershell 执行远程 SSIS 包

> ID：13830075
> 
> 赞同：0
> 
> 时间：2012-12-11T23:11:28.343
> 
> 标签：powershell, ssis

我是 Powershell 新手，我正在尝试使用[这篇](http://blogs.msdn.com/b/dbrowne/archive/2010/10/11/remote-ssis-package-execution-with-powershell-2-0.aspx)文章为其他用户创建一种在远程服务器上启动 SSIS 包的方法。

我正在使用的 Powershell 代码是：

```
$pass = convertto-securestring "myPassword" -asplaintext -force
$mycred = new-object -typename System.Management.Automation.PSCredential -argumentlist "myUsername",$pass

invoke-command -computername myServer -scriptblock { dtexec.exe /File "d:\myPath.dtsx" } -credential $mycred 
```

即使我尝试在 Powershell 中传递我的凭据，SSIS 包似乎也没有与它们一起执行，而是作为匿名用户执行。由于多种原因，该软件包未能通过验证 -

*   该软件包无法连接到需要访问权限的远程文件（我有权限，但匿名用户没有）。我希望运行此脚本的用户确实拥有该文件夹的权限。
*   SQL Server 登录失败。我尝试在包的连接详细信息中强制使用 SQL 用户，但这似乎没有奏效。

我可以使用更改 Powershell 代码来使用 Windows 身份验证吗？如何使用这些权限执行 SSIS 包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T03:32:54.757

您需要先启用 CredSSP（请参阅[this](https://stackoverflow.com/questions/8362057/what-security-setting-is-preventing-remote-powershell-2-0-from-accessing-unc-pat)），然后使用`invoke-command -Authentication Credssp`

# c# - 何时使用 Process.EnterDebugMode

> ID：13830079
> 
> 赞同：4
> 
> 时间：2012-12-11T23:11:39.340
> 
> 标签：c#, debugging, process

在有关[Process.EnterDebugMode](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.enterdebugmode%28v=vs.110%29.aspx)的 MSDN 页面上，它说：

> 一些操作系统进程以特殊模式运行。除非您在组件上调用了 EnterDebugMode，否则无法尝试读取这些进程的属性或附加到这些进程。

这里所说的**特殊模式是什么？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T00:48:19.690

“特殊模式”只是添加[SeDebugPrivilege](http://msdn.microsoft.com/en-us/library/windows/desktop/bb530716(v=vs.85).aspx#SE_DEBUG_NAME)。正如[Raymond Chen](http://blogs.msdn.com/b/oldnewthing/)指出的那样，[如果你授予某人 SeDebugPrivilege，你就放弃了这个农场](http://blogs.msdn.com/b/oldnewthing/archive/2008/03/14/8080140.aspx)。

具有 SeDebugPrivilege 的用户可以连接到任何进程并对其进行调试。当您调试一个进程时，您可以将代码注入其中。所以从安全的角度来看，用户基本上是管理员。

# cmake - CMake - 用户库

> ID：13830082
> 
> 赞同：0
> 
> 时间：2012-12-11T23:11:47.457
> 
> 标签：cmake

假设我有一个项目组织如下：

```
Proj/src
Proj/src/library_a
Proj/src/library_b
Proj/src/executable 
```

我想做的是收集包含在变量**Proj_LIBS**`src/library_a`中的库的名称，以传播到 CMake 树的根。`src/library_b`

 **在该文件`src/library_a/CMakeLists.txt`中，我将目标的所有名称添加到变量**Proj_LIBS**，然后在文件夹中的 CMakeLists.txt 文件中使用此变量`src/executable`。

`Proj/src/library_a/CMakeLists.txt`是_

```
add_library(A1 A1.cpp)
add_library(A2 A2.cpp)
SET(Curr_LIBS "${Proj_LIBS} A1 A2")
SET(Proj_LIBS ${Curr_LIBS} PARENT_SCOPE) 
```

当我尝试使用以下命令生成可执行文件时`Proj/src/executable/CMakeLists.txt`：

```
add_executable(exe1 exe1.cpp)
target_link_libraries(exe1 ${Proj_LIBS}) 
```

**Proj_LIBS**中的名称被解释为库名，即 CMake 准备的编译命令为：

```
gcc exe1.cpp -l A1 -l A2 -o exe1 
```

如果我在以下行中写入以下行，则不会被视为依赖项`Proj/src/executable/CMakeLists.txt`：

```
add_executable(exe1 exe1.cpp)
target_link_libraries(exe1 A1 A2) 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:50:58.873

我敢打赌问题是使用字符串而不是列表。试试这个：

```
SET(Curr_LIBS "${Proj_LIBS};A1;A2")
SET(Proj_LIBS ${Curr_LIBS} PARENT_SCOPE) 
```**

# asp.net - ScriptManager.RegisterStartupScript 失败并出现错误“控件必须位于页面的控件树中。参数名称：控件”

> ID：13830084
> 
> 赞同：1
> 
> 时间：2012-12-11T23:11:55.300
> 
> 标签：asp.net

我正在创建一个自定义 Web 控件，基本上扩展了 RadTextBox，因为它没有 onBlur() 事件。我在 .ascx 文件中添加了一个脚本。我正在尝试注册脚本，但它失败了。我不确定我在这里缺少什么。

```
<script language="javascript">
    function handleLostFocus(o) {
        aler(o.toString());
    }
</script>

public partial class MyTextBox : RadTextBox, IScriptControl
{
    private void RegisterScripts()
    {
        try
        {
            String csname1 = "handleLostFocus";
            Type cstype = this.GetType();

            String cstext1 = "alert('Hello World');";
            ScriptManager.RegisterStartupScript(this, cstype, csname1, cstext1, true);
        }
        catch (Exception ex)
        {

        }
    }

    public MyTextBox()
    {
        Attributes.Add("padding", "5px");
        Skin = "Office2007";
        Attributes.Add("onBlur", "handleLostFocus(this);");

        RegisterScripts();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T23:55:51.730

您在类的构造函数中调用 RegisterScripts。您的控件尚未在构造函数的 Page 中，因此您无法为尚未在 Page 上的控件注册启动脚本。

我怀疑最好的地方是 Init 方法。您可以通过将构造函数中的调用替换为：

`Init += (s,e) => { RegisterScripts(); };`

（您也可以在您的控件上创建一个完整的 Init 方法，但这是简写版本）

# dart - Dart 中的类是什么类型的？

> ID：13830086
> 
> 赞同：2
> 
> 时间：2012-12-11T23:12:17.857
> 
> 标签：dart

既然 Dart 有一阶类型，那么这些类型的类型是什么？

例子：

```
createSomething(Type factory) {
  return new factory();
} 
```

其中 Type 应该替换为我正在寻找的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T00:04:46.320

我不确定您是否可以在它们上使用类型提示，但它们属于`Type`.

补充阅读：

1.  [头等舱提案](http://news.dartlang.org/2012/06/proposal-for-first-class-types-in-dart.html)

# python - 我可以将字典存储为对象的属性吗？

> ID：13830087
> 
> 赞同：1
> 
> 时间：2012-12-11T23:12:28.353
> 
> 标签：python, web-applications, heroku, sqlalchemy, flask

使用 Python/Flask/SQLAlchemy/Heroku。

想要将对象的字典存储为对象的属性：

澄清

```
class SoccerPlayer(db.Model):
    name = db.Column(db.String(80))
    goals_scored = db.Column(db.Integer()) 
```

^如何将姓名和进球数设置为一本字典？

* * *

更新：如果有任何区别，用户将输入名称和目标评分。

另外，我正在网上搜索合适的答案，但作为菜鸟，我无法理解/实现我在 Google 上为我的 Flask 网络应用程序找到的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:00:46.743

我会支持 Sean 提供的方法，遵循它，您可以获得正确规范化的 DB 模式，并且可以更轻松地利用 RDBMS 为您完成艰苦的工作。但是，如果您坚持在数据库中使用类似字典的结构，我建议您尝试[使用 hstore](http://www.postgresql.org/docs/9.2/static/hstore.html) 数据类型，它允许您将键/值对作为单个值存储在 Postgres 中。我不确定`hstore`Heroku 提供的 Postgres DB 中是否默认创建扩展名，您可以通过`\dx`在 `psql`. 如果其中没有带有`hstore`的行，您可以通过键入来创建它`CREATE EXTENSION hstore;`。

由于 SQLAlchemy 中的 hstore 支持在尚未发布的 0.8 版中可用（但希望会在未来几周内发布），您需要从其 Mercurial 存储库安装它：

```
pip install -e hg+https://bitbucket.org/sqlalchemy/sqlalchemy#egg=SQLAlchemy 
```

然后像这样定义你的模型：

```
from sqlalchemy.dialects.postgresql import HSTORE
from sqlalchemy.ext.mutable import MutableDict

class SoccerPlayer(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(80), nullable=False, unique=True)
    stats = db.Column(MutableDict.as_mutable(HSTORE))

# Note that hstore only allows text for both keys and values (and None for
# values only).
p1 = SoccerPlayer(name='foo', stats={'goals_scored': '42'})
db.session.add(p1)
db.session.commit() 
```

之后，您可以在查询中执行常规操作：

```
from sqlalchemy import func, cast

q = db.session.query(
    SoccerPlayer.name,
    func.max(cast(SoccerPlayer.stats['goals_scored'], db.Integer))
).group_by(SoccerPlayer.name).first() 
```

查看[HSTORE 文档](http://docs.sqlalchemy.org/en/rel_0_8/dialects/postgresql.html#sqlalchemy.dialects.postgresql.HSTORE) 以获取更多示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T23:39:15.747

默认情况下，甚至 django（比flask 更大的 python web 框架）也不支持这个。但是在 django 中你可以安装它，它被称为 jsonfield（[https://github.com/bradjasper/django-jsonfield](https://github.com/bradjasper/django-jsonfield)）。

我想告诉您的是，并非所有数据库都知道如何存储二进制文件，但它们确实知道如何存储字符串，而 django 的 jsonfield 实际上是一个包含字典的 json 转储的字符串。

所以，简而言之，你可以在烧瓶中做

```
import simplejson

class SoccerPlayer(db.Model):
  _data = db.Column(db.String(1024))

  @property
  def data(self):
      return simplejson.loads(self._data)

  @data.setter
  def data(self, value):
      self._data = simplejson.dumps(value) 
```

但请注意，这样您只能一次分配整个字典：

```
player = SoccerPlayer()
player.data = {'name': 'Popey'}
print player.data # Will work as expected
{'name': 'Popey'}
player.data['score'] = '3'
print player.data
# Will not show the score becuase the setter doesn't know how to input by key
{'name': 'Popey'} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T05:11:33.103

如果您将此类信息存储在数据库中，我会推荐另一种方法：

```
class SoccerPlayer(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(80))
    team_id = db.Column(db.Integer, db.ForeignKey('Team.id'))
    stats = db.relationship("Stats", uselist=False, backref="player")

class Team(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(80))
    players = db.relationship("SoccerPlayer")

class Stats(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    player_id = db.Column(db.Integer, db.ForeignKey('SoccerPlayer.id'))
    goals_scored = db.Column(db.Integer)
    assists = db.Column(db.Integer)
    # Add more stats as you see fit 
```

使用此模型设置，您可以做如下疯狂的事情：

```
from sqlalchemy.sql import func

max_goals_by_team = db.session.query(Team.id,
                    func.max(Stats.goals_scored).label("goals_scored")
                ). \
            join(SoccerPlayer, Stats). \
            group_by(Team.id).subquery()

players = SoccerPlayer.query(Team.name.label("Team Name"),
                                SoccerPlayer.name.label("Player Name"),
                                max_goals_by_team.c.goals_scored). \
                join(max_goals_by_team,
                        SoccerPlayer.team_id == max_goals_by_team.c.id,
                        SoccerPlayer.stats.goals_scored == max_goals_by_team.c.goals_scored). 
                join(Team) 
```

从而使数据库做艰苦的工作，从每支球队中选出目标最高的球员，而不是全部用 Python 完成。

# xml - 如何替换xml属性值？

> ID：13830091
> 
> 赞同：2
> 
> 时间：2012-12-11T23:12:47.790
> 
> 标签：xml, ant

我正在寻找一种更新 xml 文件属性值的方法。例如下面的 xml 我想用另一个值替换属性值`android:versionCode`。`30003`我很难理解 ant 如何使用替换或正则表达式来做到这一点。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.app.see"
    android:installLocation="auto"
    android:versionCode="30003"
    android:versionName="@string/app_version" >
</manifest> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T01:59:37.453

如果真的那么简单，您可以使用**[replaceregexp](http://ant.apache.org/manual/Tasks/replaceregexp.html)**：

```
<property name="newVersionCode" value="30004"/>
<replaceregexp file="${src}/AndroidManifest.xml"
               match='(android:versionCode=").*(")'
               replace="\1${newVersionCode}\2"
               byline="true"
/> 
```

否则，您应该考虑使用**[XSLT 任务](http://ant.apache.org/manual/Tasks/style.html)**。您可能希望将原始文件复制到临时目录中，然后应用样式表，其中将新值指定为参数，并在原始清单上生成输出。

# c++ - 带有一个选项卡的 QTabBar 太宽

> ID：13830095
> 
> 赞同：1
> 
> 时间：2012-12-11T23:13:02.420
> 
> 标签：c++, qt, qt4.7

我的小部件结构如下： QToolBar 添加了一个 QTabBar 并在 TabBar 之后添加了一个 QToolButton。

默认情况下，只会打开一个选项卡，而 ToolButton 用于打开更多选项卡。（就像谷歌浏览器的标签界面）

我遇到的问题是，当只有一个选项卡时，TabBar 分配的空间比必要的多（看起来像：size_of_tab(0) * 2）当我添加额外的选项卡时，按钮与 TabBar 很好地对齐，但只要我将它们关闭到只有 1 个选项卡，再次有额外的空间。

我曾尝试弄乱 Horizo​​ntalSizePolicy 并以编程方式设置宽度，但都没有奏效。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T02:45:34.603

尝试如下设置样式表`QTabBar::tab`，然后再删除代码中影响选项卡大小的所有更改。您可以调整`100px`值以满足您的要求。

```
QTabBar::tab 
{
 min-width: 100px;
 max-width: 100px;
} 
```

# javascript - 当我尝试扩展文件时，Widgets.js 文件出错

> ID：13830097
> 
> 赞同：0
> 
> 时间：2012-12-11T23:13:05.783
> 
> 标签：javascript, aem

我正在尝试开发一个自定义 xtype 来扩展定义的标签 xtype

```
/libs/cq/tagging/widgets/source/widgets/TagInputField.js 
```

我在另一个文件中定义了函数

```
CQ.tagging.customTagInputField = CQ.Ext.extend(CQ.TagInputField, { /*A whole bunch of code here */ });

CQ.Ext.reg("customtags", CQ.tagging.customTagInputField); 
```

然而，每次我尝试启动一个包含我的自定义小部件的页面时，我的控制台都会出现错误提示

```
TypeError: sp is undefined

spp = sp.prototype; 
```

根据所有明智和了解的谷歌。这种错误通常意味着我试图扩展一些不存在的东西。然而变化

```
CQ.Ext.extend(CQ.TagInputField, 
```

更具体的东西，比如

```
CQ.Ext.extend(CQ.tagging.TagInputField, 
```

产生并错误提示 CQ.tagging 未定义。有没有办法让我在 CQ5 中扩展这个文件？如果是这样，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:36:52.803

在`/libs/cq/tagging/widgets/source/widgets/TagInputField.js`中，您会看到标签小部件被声明为`CQ.tagging.TagInputField`，因此我相信您扩展该字段的第二种方法是正确的。

您提到您的自定义 xtype 在一个单独的文件中 - 当您的页面加载并调用您的扩展代码时，是否加载了标记小部件库？您可能需要将标记类别作为依赖项添加到您的自定义客户端库中。

关于自定义 JS 客户端库和依赖项：http: [//helpx.adobe.com/cq/kb/HowToCreateCustomClientLib.html](http://helpx.adobe.com/cq/kb/HowToCreateCustomClientLib.html)

# html - 全角输入附加搜索按钮

> ID：13830105
> 
> 赞同：1
> 
> 时间：2012-12-11T23:13:44.250
> 
> 标签：html, css, twitter-bootstrap

如何使这个搜索表单像下面的按钮一样全宽？

![例子](../Images/753040a8dfea6c4c242359c1d124ae55.png)

```
<form class="form-search">
  <div class="input-append">
    <input type="text" class="input-small search-query">
    <button type="submit" class="btn">Search</button>
  </div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T00:23:48.743

完毕

[http://jsfiddle.net/MgcDU/6033/](http://jsfiddle.net/MgcDU/6033/)

从这里使用方法：

[http://boulderinformationservices.wordpress.com/2011/02/02/input-field-and-submit-button-on-the-same-line-full-width/](http://boulderinformationservices.wordpress.com/2011/02/02/input-field-and-submit-button-on-the-same-line-full-width/)

```
<div class="container">
    <div class="row">
        <div style="width:100%;background-color:#d0d0d0;text-align:center;">Example of a Full row</div>
    </div>
    <div class="row">
        <div class="span12 pull-right">
            <form class="form-inline">
                <button type="submit" class="btn" style="float:right;">Button</button>
                <div style="overflow: hidden; padding-right: .3em;">
                    <input style="height:1.6em;width:100%" type="text" placeholder="full width minus button width" />
                </div>
            </form>
        </div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T23:16:35.317

使 .input-append 有一个特定的宽度，然后给你的 .search-query 一个 100% 的宽度和你的 .btn 一个 100% 的宽度

这是最好的，我们可以在没有更多细节的情况下做到这一点——比如控制这个的 CSS 或者你在页面上所做的一个例子。

# javascript - 多参数方法上的 Dojo /JSON 发布请求？

> ID：13830111
> 
> 赞同：3
> 
> 时间：2012-12-11T23:14:10.723
> 
> 标签：javascript, json, rest, dojo, resteasy

这应该是基础知识，但我无法在休息端点上发布来自 dojo 的多个参数。我的后端通过resteasy暴露了以下方法。

```
@POST()
@Path("/updateProduct")
@Consumes(MediaType.APPLICATION_JSON)
public void updateGeneralSettings(String session,Product product) {
    System.out.println("session"+session);
    System.out.println("product"+product.toString);
} 
```

仅使用 Product 作为参数，这可以很好地工作。我还没有弄清楚如何用另一个参数构建一个 jason 字符串。产品数据只是从表单绑定，这是我想附加的一些附加参数（即会话）。

```
jsonData = dojo.toJson(product)

var handler = request.post(url, {
    data: jsonData,
    headers: {
        "Content-Type": 'application/json; charset=utf-8',
        "Accept": "application/json"
    }
}); 
```

不胜感激，如果你们能给我一些解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T00:30:01.977

尝试将参数名称添加到您的方法签名中：

```
public void updateGeneralSettings(@FormParam("session") String session, @FormParam("product") Product product) 
```

然后是这样的：

```
var handler = request.post(url, {
    data: {
      session: session,
      product: jsonData
    },
    headers: {
      "Content-Type": 'application/json; charset=utf-8',
      "Accept": "application/json"
    }
}); 
```

# c++ - 为什么 GCC 允许从私有嵌套类继承？

> ID：13830112
> 
> 赞同：10
> 
> 时间：2012-12-11T23:14:18.490
> 
> 标签：c++, gcc, g++, nested-class, private-members

考虑以下代码：

```
class A {
  class B {};
};

template <typename C>
class D : A::B {};

void f() {
  D<int> d;
} 
```

`D<int>`继承自`A::B`which 是一个私有嵌套类。我原以为这是一个错误，但 GCC 接受此代码。这是 GCC 中的错误还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T23:35:58.053

我找到了答案。因为它可能对其他人有用，所以我在这里发布 - 这是 GCC bug [47346](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=47346)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T23:18:03.463

您是否尝试创建非模板派生类？

如果没有该类的对象，则不会编译模板类。尝试创建此类的实例或创建非模板派生类 - gcc 可能会失败;-)

**编辑** 我的错误 - 对象已创建并且它不会导致 gcc 错误。对此感到抱歉。

# php - 会话变量被破坏连接到android应用程序

> ID：13830113
> 
> 赞同：1
> 
> 时间：2012-12-11T23:14:21.893
> 
> 标签：php, android, session

我正在构建一个 android 应用程序，其中用户有个人资料。我使用 php（通过 wamp）连接到服务器。所以我想保留每个用户的用户名，以便用户执行进一步的操作。我在 php SESSION 变量中使用，但是在用户登录并想要例如上传文件后，会话被破坏。我的PHP代码：

登录.php

```
//Retrieve the login details via POST
session_start();
$username = $_POST['username'];
$password = $_POST['pass']; 

$con = mysql_connect("localhost","root","");
mysql_select_db("mobiledb1", $con);

$query = mysql_query("SELECT * FROM user1 WHERE username='$username' 
AND pass='$password'");
$num = mysql_num_rows($query);

if($num == 1){

while ($list=mysql_fetch_array($query)){

    $output=$list;
    $_SESSION['name'] = $output['username'];

    echo json_encode($output);

}

mysql_close();

}

?> 
```

基础.php

```
<?php
session_start();
$uname=$_SESSION['name'];
$base=$_POST['file'];

$con = mysql_connect("localhost","root","");
mysql_select_db("mobiledb1", $con);

$query=mysql_query("insert into pic (file,username) VALUES ('".$base."' 
, '".$uname."')");
$query1=mysql_query($query);

if ($query1="")
     {echo "unsuccessfull";
          }
          else
        {
     echo"successfull";
       }
?> 
```

当调用 base.php 文件时，会话被破坏（我猜是因为 index.php 中没有标头）。但我无法在 index.php 中设置标头，因为它是从 java 代码中调用的。你能为我提供一个维护用户名变量的解决方案吗？我是android编码的新手，所以任何帮助都将不胜感激！

# html - 修复 HTML 中的左右浮动图像

> ID：13830123
> 
> 赞同：3
> 
> 时间：2012-12-11T23:15:45.643
> 
> 标签：html, css

这就是我想做的：在网站顶部放置一个横幅，该横幅横跨整个网站。左侧是菜单，右侧是徽标图像；菜单向左浮动，图像向右浮动。

问题是调整浏览器窗口的大小。因为图像向右浮动，所以它会随着窗口变小而正确移动。但是，在某些时候，它开始浮动到菜单中。 [这](http://jsfiddle.net/9wNEx/)是一个 Fiddle，它用两个浮动图像说明了这种效果。调整浏览器窗口的大小以查看两个图像如何重叠。

环境

```
body {
  min-width: 800px;
} 
```

我现在可以确保在浏览器窗口达到某个最小宽度时出现滚动条。然而，这并不妨碍右浮动图像随着浏览器窗口不断变小而继续移动。我试图改变`position: relative`，但没有奏效。一旦浏览器窗口到达它，我尝试使用 Javascript 来固定图像，`min-width`但这似乎也没有影响。在 DIV 上使用`min-width`并制作 DIV 的子图像也不起作用。

我的问题是：如何确保从某个窗口大小开始，右浮动图像保持不变而不是浮动到左浮动菜单中？

编辑：哦，亲爱的，我忘了提到一个相当重要的细节：顶部的菜单栏需要粘性。这就是我将`position: fixed`属性用于 DIV 的原因。其他页面内容应该在该菜单下滚动并移出窗口，请参见[此处](http://jsfiddle.net/9wNEx/33/)根据 ntgCleaner 的回答修改的小提琴。这种改变了整个事情，不是吗！对于那个很抱歉...

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:25:00.883

这就是你所追求的吗？[http://jsfiddle.net/9wNEx/10/](http://jsfiddle.net/9wNEx/10/)

你没有`position: fixed`正确使用。固定意味着“相对于视口或浏览器窗口定位”，这正是您所经历的。

我`position: fixed`从图像中删除了，并将它们放在 div 中。这应该使它们始终位于页面顶部，因为它们位于仍定位固定的 div 内。

我还调整了其他一些样式以复制您的示例。请注意，我删除了头部的固定高度并用填充底部替换它。这样，只要屏幕尺寸变小并且图像被强制在彼此下方，高度就会跟随内容。

现在的 css 看起来像这样：

```
#banner {
    left: 0px;
    top: 0px;
    width: 100%;
    padding-bottom: 15px;
    background-color: lightblue;
    z-index: 1;
    position: fixed;
    opacity: 0.8;
}

#left {
    float: left;
    margin-left: 10px;
    margin-top: 5px;
    height: 40px;
}

#right {
    float: right;
    margin-right: 10px;
    margin-top: 5px;
    height: 40px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T23:31:54.840

我改变了几件事：

1.  我使您的横幅 DIV 成为一个容器，而不仅仅是一个自由浮动的 div。可能没有必要。
2.  我给了那个横幅 div 一个 min-width:280px 并让它溢出：隐藏；
3.  我使图像只是左右浮动，而不是相对或绝对定位（因为它现在在 div 容器中）。

    ```
    #banner {
    left: 0px;
    top: 0px;
    width: 100%;
    height: 60px;
    background-color: lightblue;
    z-index: 1;
    opacity: 0.8;
    overflow:hidden;
    min-width:280px;
    }

    #left {
    float:left;
    margin:5px;
    height:40px;
    }

    #right {
    float:right;
    margin:5px;
    height:40px;
    } 
    ```

    ​ ​</p>

[这是小提琴](http://jsfiddle.net/9wNEx/25/)

为已编辑的问题编辑：

您只需将标题下的所有内容放入 div 中，然后为该 div 提供固定 div 高度的上边距。在这种情况下，它是 60px。

将此添加到您的 HTML

```
<div id="content">
this <br>
is <br>
some <br>
test <br>
text <br>
</div> 
```

然后将其添加到您的 CSS

```
#content {
    margin:60px 0px 0px 0px;
}​ 
```

[这是新的小提琴](http://jsfiddle.net/9wNEx/34/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T23:27:36.843

当我看着你的小提琴时，我认为你的问题根本不是花车。 `position:fixed`取代浮动。这两个元素根本不浮动，它们处于固定位置（类似于绝对位置），这就是为什么当它们没有足够空间时它们会重叠。

取出`float:left`和`float:right`，结果是一样的。此外，`top`, `left`,`bottom`和`right`不适用于非定位元素。所以它们在你的横幅上是多余的。

但是，如果您使用浮动，当没有足够的空间时，右侧图像将包裹在左侧下方。请参阅[http://codepen.io/morewry/pen/rjCGd](http://codepen.io/morewry/pen/rjCGd)。假设图像的高度仅用于 jsfiddle 测试，您只需要：

```
.banner {
    padding: 5px; /* don't repeat padding unnecessarily */
    min-width: ??; /* to keep floats from wrapping, set one */
    overflow: hidden; /* clearfix */
}

.right { float: right; } /* only need one float, don't over-complicate it with two */ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T08:06:02.073

我更改了您的 HTML 以将`<img>`标签放在横幅内，并将 min-width 添加到了，`#banner`因为它有`position: fixed`. 如果您想要整个页面的最小宽度，您仍然需要添加`min-width`到或包装所有其他元素的容器中。`body`

[http://jsfiddle.net/Wexcode/s8bQL/](http://jsfiddle.net/Wexcode/s8bQL/)

```
<div id="banner">
    <img id="left" src="http://www.google.com/images/srpr/logo3w.png" />
    <img id="right" src="http://www.google.com/images/srpr/logo3w.png" />
</div> 
```

```
#banner {
    width: 100%;
    min-width: 800px;
    height: 60px;
    background-color: lightblue;
    z-index: 1;
    position: fixed;
    opacity: 0.8; }

#left {
    float: left;
    margin: 5px 0 0 10px;
    height: 40px; }
#right {
    float: right;
    margin: 5px 10px 0 0;
    height: 40px; } 
```

​</p>

# jquery - jquery listview 如何获取过滤结果计数器？

> ID：13830128
> 
> 赞同：0
> 
> 时间：2012-12-11T23:16:16.347
> 
> 标签：jquery, jquery-mobile

我有一个 jquery 过滤的 listView：

```
<ul data-role="listview" data-filter="true">
   <li data-filtertext="Hola"><a href="" >Hola</a></li>
   <li data-filtertext="mundo"><a href="" >mundo</a></li>
   <li data-filtertext="hello"><a href="" >hello</a></li>
   <li data-filtertext="world"><a href="" >world</a></li>
</ul> 
```

**当在过滤器栏中输入hi**时，我怎样才能知道有多少结果返回列表视图？

我想在搜索没有返回结果时显示一个按钮。

[http://jsfiddle.net/jupagose/KwFXN/](http://jsfiddle.net/jupagose/KwFXN/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:11:15.503

我所要做的就是将文本框的**keyup**事件委托给另一个函数。

这段代码对我有用。

```
var $listview = $('#myListId');
$('#PageId').delegate('input[data-type="search"]', 'keyup', function () {
    if ($listview.children(':visible').length === 0) {
        alert('There is no results for your search');
    }
}); 
```

# c# - 除了会话状态，asp.net 应用程序中还有什么会耗尽服务器 RAM？

> ID：13830131
> 
> 赞同：0
> 
> 时间：2012-12-11T23:16:36.457
> 
> 标签：c#, asp.net, performance, ram

如果我有 200 万用户，我已经缓存了在所有这些用户之间共享的 1 mb 的数据，还有什么会用完每个用户创建的 RAM？

编辑：200 万用户同时登录并进行会话，他们都在发出请求——可能每秒 10 个请求。例如，他们正在使用随机数生成器检索随机数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T23:43:48.363

最好的办法是自己查看您的流程。进行内存转储（使用 procdump 或 taskmgr），然后使用 windbg 对其进行分析。这将准确地向您显示每个堆上的内存以及其中有多少：

一个好的起点是使用 sos 命令[!dumpheap -stat](http://blogs.msdn.com/b/tess/archive/2005/11/25/496973.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T23:37:28.290

Web 应用程序中的每个请求都有开销。它从套接字开始，然后通过 IIS 到 ASP.NET 到您的应用程序。您应该研究性能监控。你可以学习各种整洁的东西。这是一个很好的链接：

[如何测量实时 ASP.NET MVC Web 应用程序的内存使用情况](https://stackoverflow.com/questions/7681790/how-to-measure-memory-usage-for-a-live-asp-net-mvc-web-application)

# php - PHP GET 和 id 书签

> ID：13830136
> 
> 赞同：0
> 
> 时间：2012-12-11T23:17:01.730
> 
> 标签：php, html, xhtml

我有这个代码：

```
<?php if(!isset($_GET['page']) || $_GET['page'] !== "2"){
    die();
} ?>

<html>

<head></head>

<body>

<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />

<div id='come_to_me'>
   I should be on the top of your page
</div> 
```

这实际上不是我的代码，但可以理解。我需要一个 URL，当被访问时，它具有正确的 GET 变量，并且会向下移动到`come_to_me` `div`.

www.domain.com/example/?page=2#come_to_me
www.domain.com/example/#come_to_me?page=2

这些似乎都不适合我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:21:30.073

我做了一个快速测试，发现：

```
www.domain.com/example/index.html?page=3#come_to_me  Works 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T23:20:28.770

这个网址可以工作：`www.domain.com/example/?page=2#come_to_me`

但是您必须创建锚点：

```
<div id='come_to_me'>
   <a name="come_to_me"></a>
   I should be on the top of your page
</div> 
```

# c# - Parallel.ForEach 和 ActiveX

> ID：13830138
> 
> 赞同：0
> 
> 时间：2012-12-11T23:17:26.787
> 
> 标签：c#, multithreading, user-interface, activexobject

我对 Parallel.Foreach 有一点问题：我有一个抽象类和一些派生类。其中之一称为 ActiveX 元素（网络浏览器）。我想让这个对象线程安全，但它不起作用：

```
Parallel.ForEach(stringarray, currentfile =>
{
    // When we have something, set the thread to STA
    // So we can call a WebBrowser
    if (currentfile.Contains("something"))
        Thread.CurrentThread.SetApartmentState(ApartmentState.STA);

    // Here is the part where the WebBrowser is called
    // But it fails and the debugger says that
    // Thread.CurrentThread.ApartmentState is MTA, but the condition above
    // is true  
    obj track = IService.Create(currentfile);

    if (track != null)
    {
        lock(my_list)
            my_list.Add(track);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:21:59.223

[SetApartmentState](http://msdn.microsoft.com/en-us/library/system.threading.thread.setapartmentstate.aspx)仅*在*线程启动之前起作用。

您不能在已经运行的线程上将 MTA 更改为 STA（这对于 显然是正确的`CurrentThread`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T23:41:01.890

I think you'll probably have to do something where you spin up new threads to do the work. You will probably have to create individual web browsers for each thread also. This might get kind of hairy for just a web browser. You might consider WebClient or some other way to make web requests.

# r - 在 gWidgetsRGtk2 中使用 ggplot2

> ID：13830139
> 
> 赞同：7
> 
> 时间：2012-12-11T23:17:30.153
> 
> 标签：r, ggplot2, gtk2, gwidgets

我正在使用 gWidgetsRGtk2 构建 GUI，并且在单击 gbutton 时无法显示 ggplot。绘图功能自己工作（即当您键入“plotData()”时），但我无法让它与 gWidgets 一起工作。gWidgets 和 ggplot2 是否存在兼容性问题，或者我没有正确调用该函数？我已经从 GUI 中剥离了所有其他内容，以使代码更短更简单。情节应该是这样的：

![假同位素数据](../Images/31f3cff527265d588d92acd22c2e944e.png)

```
library(ggplot2)
library(gWidgets)
library(gWidgetsRGtk2)

require(gWidgets)
options("guiToolkit"="RGtk2")

X<-cbind(runif(120,min=-22,max=-17),runif(120,min=6,max=12))
MU<-matrix(c(-18.96,-15.86,-24.67,4.04,13.57,9.69),nrow=3,ncol=2)
SIG<-matrix(c(0.6,0.77,0.85,0.85,0.55,0.90),nrow=3,ncol=2)

plotData = function(h,...)
{
C_err <- 0.3
N_err <- 1.0
df <- data.frame(x = X[,1],
    y = X[,2],
    ymin = X[,2] - N_err,
    ymax = X[,2] + N_err,
    xmin = X[,1] - C_err,
    xmax = X[,1] + C_err)

df_MU <- data.frame(x=MU[,1], y=MU[,2], 
    ymin = MU[,2] - SIG[,2],
    ymax = MU[,2] + SIG[,2],
    xmin = MU[,1] - SIG[,1],
    xmax = MU[,1] + SIG[,1])

ggplot(data = df,aes(x = x,y = y)) + 
  geom_point() + 
  geom_errorbar(aes(ymin = ymin,ymax = ymax)) + 
  geom_errorbarh(aes(xmin = xmin,xmax = xmax)) +
  geom_pointrange(data=df_MU,aes(ymin=ymin,ymax=ymax),colour=c('red','blue','green'),size=1) +
  geom_errorbarh(data=df_MU,aes(xmin=xmin,xmax=xmax),colour=c('red','blue','green'),size=1,height=0) +
  ggtitle("Isotope Data") +
  ylab("d15N (%)") +
  xlab("d13C (%)") +
  theme_bw()
}

win<-gwindow()
grp_all <- ggroup(container=win, horizontal=F)
plot_button <- gbutton(
  text = "Plot data",
  container = grp_all,
  expand = TRUE,
  handler = plotData
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T19:34:29.937

使用 RGui 时，您应该在函数中更改`ggplot(...)`为。但是，在使用 R Studio 时这还不够，您还应该键入一个空行，即单击“绘制数据”按钮后在控制台中按“输入”。`print(ggplot(...))``plotData`

# tridion - GetItemByWebDavUrl 在安圭拉

> ID：13830142
> 
> 赞同：3
> 
> 时间：2012-12-11T23:17:50.297
> 
> 标签：tridion, tridion-2011

我正在编写一个 SDL Tridion Anguilla 扩展，需要使用 webdav url 拉出一个配置组件。该配置还有一组 webdav url，我需要为这些获取项目对象。

弗兰克 - 可能是我在我的问题中吃了几句话。我正在编写一个 CMS GUI 扩展并编写 javascript。那么有没有像 $models.getItem(); 这样的东西？哪个给了我组件或组件的xml？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T00:13:25.767

在大多数 Tridion Content Manager API 中，您可以通过 TCM URI**或**WebDAV URL 来读取项目。

因此，如果您使用的是核心服务，您可以简单地执行以下操作：

```
var item = client.Read(webdavURL, null); 
```

然后您可以遍历字段（如果您使用核心服务，这个[字段帮助类](http://code.google.com/p/tridion-practice/wiki/ChangeContentOrMetadata)将派上用场）并对其中的每个值执行相同的操作。

如果您需要为客户端提供映射，则需要创建自定义 Web 服务以使其可用。虽然一开始并不简单，但创建 WCF 服务并不像某些人想象的那样令人生畏。尤其是当您从[Tridion 的最小 WCF 服务示例](http://code.google.com/p/tridion-practice/wiki/AddingMinimalWcfService)开始时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T08:16:40.803

客户端上没有通过 WebDAVUrl 解析项目的功能。我们拥有的唯一功能是：

```
var item = $models.getItem(tcmUri);
item.getWebDavUrl();   // will return you WebDAVUrl, if it was loaded before
item.loadWebDavUrl();  // will make async call to load WebDAVUrl. "loadwebdavurl" or "loadwebdavurlfailed" will be fired on the item afterwards 
```

# android - ICS ActionBar 溢出菜单项同时显示在顶部 ActionBar 和溢出菜单上

> ID：13830146
> 
> 赞同：2
> 
> 时间：2012-12-11T23:18:33.667
> 
> 标签：android, android-actionbar, android-4.0-ice-cream-sandwich

在 Galaxy S3 上，我遇到了一个问题，即 ActionBar 中的按钮配置为 showAsAction="always" 并同时显示在硬件溢出菜单和操作按钮上。我希望它不显示在硬件溢出菜单上，而只显示在操作按钮上。我可以在 onCreateOptionsMenu 中禁用菜单项，但它会隐藏两个地方的按钮。

需要注意的是：如果我强制显示“3 点”动作溢出菜单，刷新按钮会从硬件溢出菜单中正确隐藏，但仍然不会从硬件溢出菜单中隐藏。

还有一点需要注意：如果我在 onCreateOptionsMenu 或 onPrepareOptionsMenu 中调用 menu.size()，它不会反映额外的按钮。例如，我有四个按钮，第一个按钮同时显示在操作按钮和溢出菜单中。menu.size() 仍然返回 4 并且似乎没有意识到它正在显示一个额外的按钮。

我无法发布屏幕截图，因为这是一个客户端应用程序，但这是我的 actionbar.xml 文件。刷新按钮显示在顶部的溢出和操作栏中。

动作栏.xml

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:id="@+id/refreshmenuitem"
          android:icon="@drawable/refreshicon"
          android:title="Refresh"
          android:showAsAction="ifRoom" 
          android:visible="true"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          />
    <item android:id="@+id/helpbutton"
        android:title="Help"
        android:showAsAction="collapseActionView"
        android:icon="@drawable/ic_action_helpbutton" />
    <item android:id="@+id/settingbutton"
        android:title="Settings"
        android:icon="@drawable/ic_action_settingbutton"
        android:showAsAction="collapseActionView" />
    <item android:id="@+id/importbutton"
        android:title="Import file"
        android:icon="@drawable/ic_action_importbutton"
        android:showAsAction="collapseActionView" />
</menu> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:25:31.720

所以我想通了，但这是一种黑客行为。因此，如果您的手机（如三星 Galaxy S3）有一个硬件菜单按钮，onCreateOptionsMenu 函数实际上会被调用两次。一次用于加载 Activity 以加载应显示在右上角的任何菜单项，另一次用于用户按下硬件菜单按钮。我所做的只是创建一个名为 _firstTimeOnCreateOptionsMenu 的变量，在第一次使用 onCreateOptionsMenu 方法后将其设置为 false：

```
 public boolean onCreateOptionsMenu(Menu menu)
    {
        // Populates the actionbar/Menu
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.actionbarmenu, menu);
        boolean hardware = false;

        if(android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.ICE_CREAM_SANDWICH)
        {
            hardware = ViewConfiguration.get(context).hasPermanentMenuKey();
        }

        MenuItem b1 = menu.findItem(R.id.refreshmenuitem);

        if(!hardware || _firstTimeOnCreateOptionsMenu)
        {
            b1.setVisible(true);
            _firstTimeOnCreateOptionsMenu = false;
        }
        else
        {
            b1.setVisible(false);
            _firstTimeOnCreateOptionsMenu = true;
        }
    } 
```

希望这可以帮助遇到此问题的其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:30:44.580

您的 targetSdkVersion 是否设置为 14？

[http://android-developers.blogspot.com/2012/01/say-goodbye-to-menu-button.html](http://android-developers.blogspot.com/2012/01/say-goodbye-to-menu-button.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T23:31:39.070

如果这是问题所在，我会有点惊讶，因为您希望未知的 XML 会被忽略，但根据[文档](http://developer.android.com/guide/topics/resources/menu-resource.html) `<item>`不支持`android:layout_width`和`android:layout_height`.

# c++ - 检查变量类型是否可迭代？

> ID：13830158
> 
> 赞同：35
> 
> 时间：2012-12-11T23:19:40.013
> 
> 标签：c++, templates, typetraits, iterable

有什么方法可以检查任意变量类型是否可迭代？

所以要检查它是否有索引元素，或者我实际上可以遍历它的子元素？（例如使用 foreach ？）

是否可以为此创建一个通用模板？

我在搜索时找到了其他编程语言的技术。然而仍然必须找出如何在 C++ 中做到这一点。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2015-04-14T18:35:18.240

您可以为此创建一个特征：

```
namespace detail
{
    // To allow ADL with custom begin/end
    using std::begin;
    using std::end;

    template <typename T>
    auto is_iterable_impl(int)
    -> decltype (
        begin(std::declval<T&>()) != end(std::declval<T&>()), // begin/end and operator !=
        void(), // Handle evil operator ,
        ++std::declval<decltype(begin(std::declval<T&>()))&>(), // operator ++
        void(*begin(std::declval<T&>())), // operator*
        std::true_type{});

    template <typename T>
    std::false_type is_iterable_impl(...);

}

template <typename T>
using is_iterable = decltype(detail::is_iterable_impl<T>(0)); 
```

[活生生的例子](http://ideone.com/ExTsEO)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-12-29T05:49:46.100

[cpprefence 有一个例子回答你的问题](https://en.cppreference.com/w/cpp/types/void_t)。它正在使用[SFINAE](https://en.cppreference.com/w/cpp/language/sfinae)，这是该示例的略微修改版本（以防该链接的内容随着时间的推移而更改）：

```
template <typename T, typename = void>
struct is_iterable : std::false_type {};

// this gets used only when we can call std::begin() and std::end() on that type
template <typename T>
struct is_iterable<T, std::void_t<decltype(std::begin(std::declval<T>())),
                                  decltype(std::end(std::declval<T>()))
                                 >
                  > : std::true_type {};

// Here is a helper:
template <typename T>
constexpr bool is_iterable_v = is_iterable<T>::value; 
```

现在，这就是它的使用方式

```
std::cout << std::boolalpha;
std::cout << is_iterable_v<std::vector<double>> << '\n';
std::cout << is_iterable_v<std::map<int, double>> << '\n';
std::cout << is_iterable_v<double> << '\n';
struct A;
std::cout << is_iterable_v<A> << '\n'; 
```

输出：

```
true
true
false
false 
```

话虽如此，它所检查的只是 and 的声明`begin() const`，`end() const`因此，即使以下也被验证为可迭代：

```
struct Container
{
  void begin() const;
  void end() const;
};

std::cout << is_iterable_v<Container> << '\n'; // prints true 
```

[你可以在这里](https://coliru.stacked-crooked.com/a/5268729ced115e8e)看到这些片段

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-09-05T19:27:02.303

如果您在 C++11 及更高版本的保护伞下，当您必须专门针对一个属性时，一种常用的 SFINAE 检查方法是以下一种：

```
template<class T, class = decltype(<expression that must compile>)>
inline constexpr bool expression_works(int) { return true; }

template<class>
inline constexpr bool expression_works(unsigned) { return false; }

template<class T, bool = expression_works<T>(42)>
class my_class;

template<class T>
struct my_class<T, true>
{ /* Implementation when true */ };

template<class T>
struct my_class<T, false>
{ /* Implementation when false */ }; 
```

诀窍如下：

*   当表达式不起作用时，只会实例化第二个特化，因为第一个将无法编译并且 sfinae 发挥作用。所以你得到`false`.
*   当表达式起作用时，两个重载都是候选的，所以我必须强制进行更好的专业化。在这种情况下，`42`has type `int`，因此`int`是比 get 更好的`unsigned`匹配`true`。
*   我接受`42`，因为它是[一切的答案](https://en.wikipedia.org/wiki/Phrases_from_The_Hitchhiker%27s_Guide_to_the_Galaxy#Answer_to_the_Ultimate_Question_of_Life,_the_Universe,_and_Everything_(42))，受到 Eric Niebler 的范围实施的启发。

在您的情况下，`C++11`具有免费功能`std::begin`并且`std::end`适用于数组和容器，因此必须工作的表达式是：

```
template<class T, class = decltype(std::begin(std::declval<T>()))
inline constexpr bool is_iterable(int) { return true; }

template<class>
inline constexpr bool is_iterable(unsigned) { return false; } 
```

`begin`如果您需要更多通用性，表达某事物可迭代的方式还可以包括用户定义的类型，这些类型为and带来自己的重载`end`，因此您需要在`adl`此处应用一些：

```
namespace _adl_begin {
    using std::begin;

    template<class T>
    inline auto check() -> decltype(begin(std::declval<T>())) {}
}

template<class T, class = decltype(_adl_begin::check<T>())>
inline constexpr bool is_iterable(int) { return true; }

template<class>
inline constexpr bool is_iterable(unsigned) { return false; } 
```

您可以使用这种技术来获得更适合您的实际环境的解决方案。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-04-14T17:47:31.937

**是**的，使用此[特征类](https://en.wikipedia.org/wiki/Trait_%28computer_programming%29#Implementation)兼容的[c++03](/questions/tagged/c%2b%2b03 "显示标记为“c++03”的问题")

```
template<typename C>
struct is_iterable
{
  typedef long false_type; 
  typedef char true_type; 

  template<class T> static false_type check(...); 
  template<class T> static true_type  check(int, 
                    typename T::const_iterator = C().end()); 

  enum { value = sizeof(check<C>(0)) == sizeof(true_type) }; 
}; 
```

### 解释

*   `check<C>(0)``check(int,const_iterator)`如果存在则调用`C::end()`并返回`const_iterator`兼容类型
*   else`check<C>(0)`调用`check(...)`（见[省略号转换](http://en.cppreference.com/w/cpp/language/overload_resolution#Ranking_of_implicit_conversion_sequences)）
*   `sizeof(check<C>(0))`取决于这些函数的返回类型
*   最后，编译器将常量设置`value`为`true`或`false`

### [查看在coliru](http://coliru.stacked-crooked.com/a/367f7781ac01f0da)上的编译和测试运行

```
#include <iostream>
#include <set>

int main()
{
    std::cout <<"set="<< is_iterable< std::set<int> >::value <<'\n';
    std::cout <<"int="<< is_iterable< int           >::value <<'\n';
} 
```

### 输出

```
set=1
int=0 
```

**注意：** C++11（和 C++14）提供了许多[特征类](http://en.cppreference.com/w/cpp/header/type_traits)，但没有关于可迭代性...

另请参阅[jrok](https://stackoverflow.com/a/29230899/938111)和[Jarod42](https://stackoverflow.com/a/29230850/938111)的类似答案。

[这个答案在公共领域 - [CC0 1.0 Universal](http://creativecommons.org/publicdomain/zero/1.0/)]

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-12-11T23:35:03.800

这取决于您所说的“可迭代”是什么意思。它在 C++ 中是一个松散的概念，因为您可以通过许多不同的方式实现迭代器。

如果`foreach`您指的是 C++11 的基于范围的 for 循环，则需要定义类型`begin()`和`end()`方法，并返回响应`operator!=`, `operator++`和`operator*`.

如果您指的是 Boost 的 BOOST_FOREACH 助手，请参阅[BOOST_FOREACH 可扩展性](http://www.boost.org/doc/libs/1_52_0/doc/html/foreach/extensibility.html)。

如果在您的设计中您有一个所有可迭代容器都继承自的通用接口，那么您可以使用 C++11 的[std::is_base_of](http://en.cppreference.com/w/cpp/types/is_base_of)：

```
struct A : IterableInterface {}
struct B {}
template <typename T>
constexpr bool is_iterable() {
    return std::is_base_of<IterableInterface, T>::value;
}
is_iterable<A>(); // true
is_iterable<B>(); // false 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-08-28T23:57:58.827

或者，如果（像我一样）你讨厌每个 SFINAE 解决方案都是一大块虚拟结构定义，`::type`而且`::value`毫无意义地涉水而过，这里有一个使用快速和（非常）肮脏的单线的例子：

```
template <
    class Container,
    typename ValueType = decltype(*std::begin(std::declval<Container>()))>
static void foo(Container& container)
{
    for (ValueType& item : container)
    {
        ...
    }
} 
```

最后一个模板参数在一个步骤中执行多项操作：

1.  检查该类型是否具有`begin()`成员函数或等效函数。
2.  检查`begin()`函数是否返回已`operator*()`定义的内容（典型用于迭代器）。
3.  确定因取消引用迭代器而产生的类型，并保存它以防它在您的模板实现中有用。

限制：不仔细检查是否有匹配的`end()`成员函数。

如果您想要更健壮/彻底/可重用的东西，那么请改用其他出色的建议解决方案之一。

# sql-server - 在 RHEL 6 上安装 MS SQL ODBC 驱动程序后 psqlODBC 不会加载

> ID：13830160
> 
> 赞同：1
> 
> 时间：2012-12-11T23:19:57.893
> 
> 标签：sql-server, linux, postgresql, isql

我在我的 RHEL 6 上运行了 PostgreSQL 驱动程序。但是在我安装 Microsoft® SQL Server® ODBC Driver 1.0 for Linux 后，我无法再连接到 PosgreSQL 数据源。我可以很好地连接到 SQL Server 数据源。

当我一周前遇到同样的问题时，我从 Linux 上卸载了 MS SQL Server ODBC 驱动程序，它解决了这个问题。我通过执行以下命令删除了 MS SQL Server ODBC 驱动程序：

```
rm /usr/bin/bcp
rm /usr/bin/sqlcmd
odbcinst -u -d -n "SQL Server Native Client 11.0"
rm -r /opt/microsoft/sqlncli 
```

我仍然必须`psqlodbcw.so`从另一台运行 PostgreSQL 驱动程序的 Linux 机器上复制文件（MS 驱动程序安装使它们无法访问，尽管它们存在）。

同样，我需要使用 MS SQL 驱动程序，因此再次安装。再次安装 MS SQL 驱动程序 - 我再次无法连接到 PostgreSQL 驱动程序。不过，我没有卸载 MS SQL 驱动程序并检查了发生了什么。这次我发现安装文件已被删除：`/usr/lib64/libodbcpsqlS.so`. 但是，补充文件并没有解决问题，因为我没有像前一种情况那样卸载 MS SQL。

尽管文件存在`rwx`权限，但我仍然收到以下错误消息：

```
[root@localhost lib64]# isql -v STUDENT dsname pwd12345
[01000][unixODBC][Driver Manager]Can't open lib '/usr/lib64/psqlodbc.so' : file not found
[ISQL]ERROR: Could not SQLConnect
[root@localhost lib64]# 
```

这是文件权限的打印输出：

```
[root@localhost lib64]# ls -al p*.so
lrwxrwxrwx. 1 root root     12 Dec  7 09:15 psqlodbc.so -> psqlodbcw.so
-rwxr-xr-x. 1 root root 519496 Dec  7 09:35 psqlodbcw.so 
```

我的`odbcinst.ini`文件如下所示：

```
[PostgreSQL]
Description=ODBC for PostgreSQL
Driver=/usr/lib/psqlodbc.so
Driver64=/usr/lib64/psqlodbc.so
Setup=/usr/lib/libodbcpsqlS.so
Setup64=/usr/lib64/libodbcpsqlS.so
FileUsage=1
UsageCount=4 
```

我还提到了这个链接： http: [//mailman.unixodbc.org/pipermail/unixodbc-support/2010-September.txt](http://mailman.unixodbc.org/pipermail/unixodbc-support/2010-September.txt)

运行输出：

```
[root@localhost bin]# ldd /usr/lib64/psqlodbc.so 
    linux-vdso.so.1 =>  (0x00007fff371ea000)
    libssl.so.10 => /usr/lib64/libssl.so.10 (0x00007f55f288f000)
    libpq.so.5 => /usr/lib64/libpq.so.5 (0x00007f55f2667000)
    libpthread.so.0 => /lib64/libpthread.so.0 (0x00007f55f2449000)
    libodbcinst.so.2 => not found
    libodbc.so.2 => not found
    libc.so.6 => /lib64/libc.so.6 (0x00007f55f20b5000)
    libgssapi_krb5.so.2 => /lib64/libgssapi_krb5.so.2 (0x00007f55f1e73000)
    libkrb5.so.3 => /lib64/libkrb5.so.3 (0x00007f55f1b94000)
    libcom_err.so.2 => /lib64/libcom_err.so.2 (0x00007f55f198f000)
    libk5crypto.so.3 => /lib64/libk5crypto.so.3 (0x00007f55f1763000)
    libcrypto.so.10 => /usr/lib64/libcrypto.so.10 (0x00007f55f13c9000)
    libdl.so.2 => /lib64/libdl.so.2 (0x00007f55f11c4000)
    libz.so.1 => /lib64/libz.so.1 (0x00007f55f0fae000)
    libcrypt.so.1 => /lib64/libcrypt.so.1 (0x00007f55f0d77000)
    libldap_r-2.4.so.2 => /lib64/libldap_r-2.4.so.2 (0x00007f55f0b23000)
    /lib64/ld-linux-x86-64.so.2 (0x0000003d6f600000)
    libkrb5support.so.0 => /lib64/libkrb5support.so.0 (0x00007f55f0918000)
    libkeyutils.so.1 => /lib64/libkeyutils.so.1 (0x00007f55f0715000)
    libresolv.so.2 => /lib64/libresolv.so.2 (0x00007f55f04fa000)
    libfreebl3.so => /lib64/libfreebl3.so (0x00007f55f0298000)
    liblber-2.4.so.2 => /lib64/liblber-2.4.so.2 (0x00007f55f0088000)
    libssl3.so => /usr/lib64/libssl3.so (0x00007f55efe4c000)
    libsmime3.so => /usr/lib64/libsmime3.so (0x00007f55efc20000)
    libnss3.so => /usr/lib64/libnss3.so (0x00007f55ef8e3000)
    libnssutil3.so => /usr/lib64/libnssutil3.so (0x00007f55ef6bd000)
    libplds4.so => /lib64/libplds4.so (0x00007f55ef4b9000)
    libplc4.so => /lib64/libplc4.so (0x00007f55ef2b3000)
    libnspr4.so => /lib64/libnspr4.so (0x00007f55ef076000)
    libsasl2.so.2 => /usr/lib64/libsasl2.so.2 (0x00007f55eee5c000)
    libselinux.so.1 => /lib64/libselinux.so.1 (0x00007f55eec3c000) 
```

我不想从我的 Linux 机器上卸载 MS SQL 驱动程序来让 PostgreSQL 驱动程序工作。我希望这两个驱动程序都可以在 Linux 上运行。

Craig Ringer 建议运行：

```
[root@localhost bin]# LD_DEBUG=libs isql -v STUDENT dsname pwd12345
     22029: find library=libodbc.so.1 [0]; searching
     22029:  search path=/usr/lib64/tls/x86_64:/usr/lib64/tls:/usr/lib64/x86_64:/usr/lib64      (system search path)
     22029:   trying file=/usr/lib64/tls/x86_64/libodbc.so.1
     22029:   trying file=/usr/lib64/tls/libodbc.so.1
     22029:   trying file=/usr/lib64/x86_64/libodbc.so.1
     22029:   trying file=/usr/lib64/libodbc.so.1
     22029: 
     22029: find library=libdl.so.2 [0]; searching
     22029:  search path=/usr/lib64/tls:/usr/lib64      (system search path)
     22029:   trying file=/usr/lib64/tls/libdl.so.2
     22029:   trying file=/usr/lib64/libdl.so.2
     22029:  search cache=/etc/ld.so.cache
     22029:   trying file=/lib64/libdl.so.2
     22029: 
     22029: find library=libpthread.so.0 [0]; searching
     22029:  search path=/usr/lib64/tls:/usr/lib64      (system search path)
     22029:   trying file=/usr/lib64/tls/libpthread.so.0
     22029:   trying file=/usr/lib64/libpthread.so.0
     22029:  search cache=/etc/ld.so.cache
     22029:   trying file=/lib64/libpthread.so.0
     22029: 
     22029: find library=libc.so.6 [0]; searching
     22029:  search path=/usr/lib64/tls:/usr/lib64      (system search path)
     22029:   trying file=/usr/lib64/tls/libc.so.6
     22029:   trying file=/usr/lib64/libc.so.6
     22029:  search cache=/etc/ld.so.cache
     22029:   trying file=/lib64/libc.so.6
     22029: 
     22029: 
     22029: prelink checking: ok
     22029: 
     22029: calling init: /lib64/libpthread.so.0
     22029: 
     22029: 
     22029: calling init: /lib64/libc.so.6
     22029: 
     22029: 
     22029: calling init: /lib64/libdl.so.2
     22029: 
     22029: 
     22029: calling init: /usr/lib64/libodbc.so.1
     22029: 
     22029: 
     22029: initialize program: isql
     22029: 
     22029: 
     22029: transferring control: isql
     22029: 
     22029: find library=libnss_files.so.2 [0]; searching
     22029:  search path=/usr/lib64/tls:/usr/lib64      (system search path)
     22029:   trying file=/usr/lib64/tls/libnss_files.so.2
     22029:   trying file=/usr/lib64/libnss_files.so.2
     22029:  search cache=/etc/ld.so.cache
     22029:   trying file=/lib64/libnss_files.so.2
     22029: 
     22029: 
     22029: calling init: /lib64/libnss_files.so.2
     22029: 
     22029: 
     22029: calling init: /usr/lib64/gconv/UTF-16.so
     22029: 
     22029: find library=libssl.so.10 [0]; searching
     22029:  search path=/usr/lib64/tls:/usr/lib64      (system search path)
     22029:   trying file=/usr/lib64/tls/libssl.so.10
     22029:   trying file=/usr/lib64/libssl.so.10
     22029: 
     22029: find library=libpq.so.5 [0]; searching
     22029:  search path=/usr/lib64/tls:/usr/lib64      (system search path)
     22029:   trying file=/usr/lib64/tls/libpq.so.5
     22029:   trying file=/usr/lib64/libpq.so.5
     22029: 
     22029: find library=libodbcinst.so.2 [0]; searching
     22029:  search path=/usr/lib64/tls:/usr/lib64      (system search path)
     22029:   trying file=/usr/lib64/tls/libodbcinst.so.2
     22029:   trying file=/usr/lib64/libodbcinst.so.2
     22029:  search cache=/etc/ld.so.cache
     22029:  search path=/lib64/tls/x86_64:/lib64/tls:/lib64/x86_64:/lib64:/usr/lib64/tls:/usr/lib64        (system search path)
     22029:   trying file=/lib64/tls/x86_64/libodbcinst.so.2
     22029:   trying file=/lib64/tls/libodbcinst.so.2
     22029:   trying file=/lib64/x86_64/libodbcinst.so.2
     22029:   trying file=/lib64/libodbcinst.so.2
     22029:   trying file=/usr/lib64/tls/libodbcinst.so.2
     22029:   trying file=/usr/lib64/libodbcinst.so.2
     22029: 
[01000][unixODBC][Driver Manager]Can't open lib '/usr/lib64/psqlodbc.so' : file not found
[ISQL]ERROR: Could not SQLConnect
     22029: 
     22029: calling fini: isql [0]
     22029: 
     22029: 
     22029: calling fini: /usr/lib64/libodbc.so.1 [0]
     22029: 
     22029: 
     22029: calling fini: /lib64/libdl.so.2 [0]
     22029: 
     22029: 
     22029: calling fini: /lib64/libpthread.so.0 [0]
     22029: 
     22029: 
     22029: calling fini: /lib64/libnss_files.so.2 [0]
     22029: 
     22029: 
     22029: calling fini: /usr/lib64/gconv/UTF-16.so [0]
     22029: 
     22029: 
     22029: calling fini: /lib64/libc.so.6 [0]
     22029: 
[root@localhost bin]# 
```

约翰格林建议：

```
[root@localhost bin]# ldd /usr/bin/isql 
    linux-vdso.so.1 =>  (0x00007fff12cf9000)
    libodbc.so.1 => /usr/lib64/libodbc.so.1 (0x0000003ef0800000)
    libdl.so.2 => /lib64/libdl.so.2 (0x0000003d6fe00000)
    libpthread.so.0 => /lib64/libpthread.so.0 (0x0000003d70200000)
    libc.so.6 => /lib64/libc.so.6 (0x0000003d6fa00000)
    /lib64/ld-linux-x86-64.so.2 (0x0000003d6f600000) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T00:25:03.063

找出为什么找不到库文件的一些非常酷的技巧。

1.  您的 isql 在哪里寻找库？：
    `ldd <insert-path>/isql`

2.  如果没有“未找到”... 可以找到，请尝试按照代码查看未打开的位置：
    `strace -f isql -v STUDENT dsname pwd12345`

    并寻找像这样的开放失败（最常见的符号链接失败）：

    `open("/usr/lib64/psqlodbc.so", O_RDONLY) = -1 ENOENT (No such file or directory)`

3.  否则，检查 /etc/ld.so.conf 或 /etc/ld.so.conf.d/ 是否缺少诸如

    `/usr/lib64`

* * *

我想在 /etc/ld.so.conf.d/local.conf 中保留以下内容
`/usr/local/lib64`
`/usr/local/lib`
`/usr/lib64`
`/usr/lib`

如果对 /etc/ld.so.conf* 进行了任何更改，请确保重新加载库系统缓存（再次）：
`ldconfig -v`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T17:46:55.507

我跑了：`rpm -q unixODBC`检查是否仍然安装了 unixODBC，不幸的是发现它不是。在没有明确干预的情况下安装 SQL Server 驱动程序后，unixODBC 驱动程序不知何故被卸载。我安装了`yum install unixODBC.x86_64`. 第一次，我让 SQL Server 驱动程序、PostgreSQL 驱动程序和其他驱动程序从同一台机器（RHEL 6）连接到它们各自的数据源。

# objective-c - 使用 NSXMLParser 跳过无效的 XML 字符

> ID：13830162
> 
> 赞同：2
> 
> 时间：2012-12-11T23:19:59.860
> 
> 标签：objective-c, ios, xcode, nsxmlparser

当 NSXMLParser 遇到无效字符时，它会调用委托方法

```
parser:parseErrorOccurred: 
```

从文档中：

> 调用此方法时，将停止解析。有关错误的更多信息，您可以查询 parseError 或者您可以向解析器发送 parserError 消息。您还可以发送解析器 lineNumber 和 columnNumber 消息以进一步隔离错误发生的位置。通常，您实现此方法以向用户显示有关错误的信息。

我的问题：

有没有办法使用行号和列号来删除无效字符？（也许通过某种方式剥离从当前位置直到下一个封闭括号的所有内容）？我正在寻找接收无效 XML 的设备端解决方案。

有什么想法吗？

# ruby-on-rails - 在回形针中添加删除选项时，rails中未定义的方法字段

> ID：13830163
> 
> 赞同：0
> 
> 时间：2012-12-11T23:20:14.540
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试在回形针中添加删除选项。并按照链接删除

[Rails Paperclip 如何删除附件？](https://stackoverflow.com/questions/4435826/rails-paperclip-how-to-delete-attachment)

我的模型课是

```
class Asset < ActiveRecord::Base
   belongs_to :post
   attr_accessible :image 
   attr_accessor :image_delete
   before_save :destroy_image?
   has_attached_file :image, :styles => { :medium => "640x480>", 
                                     :thumb => "100x100#"},

   :storage => :s3,
   :s3_credentials => {
     :access_key_id => ENV['K1'],
     :secret_access_key => ENV['K2']
   },
   :path => ":attachment/:id/:style.:extension",
   :bucket => 'test_local'

 private
    def destroy_image?
    self.image.clear if @image_delete == "1"
 end
end 
```

我的表单片段是

```
 <h4>Show Old Images</h4> 
```

```
 <% unless asset_fields.object.new_record? %>
              <%= link_to image_tag(asset_fields.object.image.url(:thumb)) %>
               <%#= asset_fields.object.delete_asset %>
              <%= f.check_box asset_fields.file_field :image_delete, :label => 'Delete Image'%>                                             
      <% end %> 
```

错误是得到

```
undefined method 
<input id="post_assets_attributes_1_image_delete" label="Delete Image" name="post[assets_attributes][1][image_delete]" type="file" />' for #<Post:0x00000104e770c0> 
```

什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:37:00.933

我解决的方法是改变

```
<%= f.check_box asset_fields.file_field :image_delete, :label => 'Delete Image'%> 
```

至

```
<%= asset_fields.check_box asset_fields.file_field :image_delete, :label => 'Delete Image'%> 
```

# php - 过滤掉整数的数组键

> ID：13830168
> 
> 赞同：-1
> 
> 时间：2012-12-11T23:20:26.157
> 
> 标签：php, arrays

我有多个数组（它们都是使用 PDO 语句从 MySQL 数据库中得到的结果），这里以一个为例：

```
Array ( [id] => 1 [0] => 1 [name] => HELLO [1] => HELLO ) 
```

我只想要不是数字的键（在本例中为“id”和“name”）作为数组。

如何过滤掉整数的键，以便最终得到一个数组：

```
Array ( [id] => 1 [name] => HELLO ) 
```

（键并不总是“id”和“name”，或名称编号，或相同数量的数组键）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T23:29:07.523

[我认为你应该用适当的标志PDO::FETCH_ASSOC](http://php.net/manual/en/pdostatement.fetch.php)来解决这个问题

```
$sth = $dbh->prepare("SELECT id,name FROM tableName");
$sth->execute();

$row = $sth->fetch(PDO::FETCH_ASSOC); // use this flag for return only column names 
```

如果不可能：

```
foreach($array as $k=>$v) {
    if(filter_var(FILTER_VALIDATE_INT, $k) !== FALSE) {
        unset($array[$k]);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T23:25:41.117

```
$newRow = array();
foreach($row as $key => $value)
    if(is_string($key))
        $newRow[$key] = $value; 
```

# javascript - 学习 JavaScript 如何优化执行（如果有的话）

> ID：13830170
> 
> 赞同：2
> 
> 时间：2012-12-11T23:20:29.030
> 
> 标签：javascript

有没有办法学习 JavaScript 是如何解释和执行的？例如，在 .NET 或 JAVA 中，您可以查看生成的字节码，在 C 中，您可以查看生成的汇编指令，但据我所知，JavaScript 是逐行解释的，然后在不同浏览器中的 JS 引擎上会有所不同.

仍然有办法学习 JavaScript 是如何做到这一点的吗？现代浏览器中的解释器是否倾向于像编译器一样向前看和优化？

例如，如果我这样做：

```
$('#div1').css('background-color','red');
$('#div1').css('color','white'); 
```

我可以通过以下方式获得性能增益：

```
var x = $('#div1');
x.css('background-color','red');
x.css('color','white'); 
```

这个问题的重点是获取一些信息，了解如何了解 JavaScript 在浏览器中的运行方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T23:29:59.790

一如既往，所采取的优化步骤取决于编译器。我知道[SpiderMonkey](https://developer.mozilla.org/en-US/docs/SpiderMonkey/Internals)有很好的文档记录，开源，我相信 JIT 编译。您可以在浏览器之外使用它进行修补，这样在试验时就少了一个需要处理的黑匣子。我不确定是否有任何方法可以在编译代码运行时转储它以查看它如何在*您的*代码中进行优化，但是由于没有 Javascript 中间表示的标准概念（就像 .NET/Java 字节码一样）它无论如何都会特定于引擎。

编辑：通过更多研究，您似乎可以让 SpiderMonkey[转储其字节码](https://developer.mozilla.org/en-US/docs/SpiderMonkey/Bytecodes)。但是请注意，优化可以在生成字节码的解释器和使用/编译/执行字节码的 JIT 编译器中进行，因此您仅了解可能发生的任何优化（Java 和 . NET 字节码）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T23:53:34.270

V8 does some amazing things internally. It compiles to machine code and creates hidden classes for your objects. Mind-blowing details here: [https://developers.google.com/v8/design](https://developers.google.com/v8/design)

Ofcourse when it comes to the DOM, performing lookups can only go *that* fast. Which is why chaining or temp variables can make a difference, especially in loops and during animations.

Besides that, using the right selectors can be helpful. #id lookups are undoubtedly the fastest. Simple tagname or class lookups are reasonably fast as well. jQuery selectors like :not can't fall back on builtins and are considerably slower.

Besides reducing lookups, another good rule of thumb with the DOM is: If you need to do a lot of DOM manipulation, take out some parent node, do the manipulations, and reinsert it. This could save a whole lot of reflows/repaints.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T23:49:55.673

是的，您将获得性能提升。DOM 没有被查询两次，只实例化了一个 jQuery 对象。

但是，您不应该为了性能（增益可以忽略不计）而这样做，而是为了代码质量。此外，您不需要变量，jQuery 支持链接：

```
$('#div1').css('background-color','red').css('color','white'); 
```

并且该[`.css`方法](http://api.jquery.com/css/)也可以接受一个对象：

```
$('#div1').css({'background-color': 'red', 'color': 'white'}); 
```

# android - 多个活动消耗的后台服务应用程序的 Android 架构

> ID：13830173
> 
> 赞同：2
> 
> 时间：2012-12-11T23:20:47.000
> 
> 标签：android, android-intent

我正在开发一个 Android 应用程序。一旦启动，我将创建一个扩展 IntentService 并实现 SensorEventListener 的后台服务。该类负责监听位置更新和传感器更新，例如来自加速度计的更新。

然后我创建主窗口并检查例如是否启用了 GPS 以及其他一些东西。如果一切正确，我从主 Activity 开始另一个。我这样创建它：

```
Intent startDrIntent = new Intent(MainActivity.this, DrActivity.class);
MainActivity.this.startActivity(startDrIntent); 
```

现在我想在 DrActivity 中显示坐标和加速度计值。

获得活动中显示的这些值的最佳方法是什么？我可以想到这两个：

1) 不知何故，在应用程序中有一个活动处理程序，并从每个传感器上的传感服务类或位置更新使用应用程序处理程序（可能是静态的？）并更改 TextView(s) 的值

2）在应用程序中拥有坐标和传感器的公共静态值，然后从 Activity 中使用它们（这里的问题是如何让 Activity 知道有更新。

3）有什么更好的吗？

我不能使用 AsyncTask，因为后台服务将被多个活动使用，而不仅仅是一个。提前致谢！吉列尔莫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T00:11:39.273

为什么不让 DrActivity 也实现 SensorEventListener 呢？

```
public class DrActivity implements SensorEventListener
{
    private SensorManager mSensorManager;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        mSensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
        mSensorManager.registerListener(this,mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),SensorManager.SENSOR_DELAY_NORMAL);
    }

    @Override
    public void onAccuracyChanged(Sensor arg0, int arg1) {
    // TODO Auto-generated method stub

   }

   @Override
   public void onSensorChanged(SensorEvent arg0) 
    {
        // TODO Auto-generated method stub
        if(arg0.sensor.getType()==Sensor.TYPE_LIGHT)
        {
             textLightSensorData.setText("Light Sensor Date:"
           + String.valueOf(arg0.values[0]));
        }
    }
} 
```

# python - 列出没有绝对路径的主目录

> ID：13830175
> 
> 赞同：8
> 
> 时间：2012-12-11T23:20:57.367
> 
> 标签：python

我在不知道它的绝对路径的情况下列出当前用户的主目录时遇到问题。我尝试了以下方法，但它不起作用：

```
[root@blackbox source]# python
Python 2.6.6 (r266:84292, Dec  7 2011, 20:38:36)
[GCC 4.4.6 20110731 (Red Hat 4.4.6-3)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import os
>>> os.listdir('/root')
['python', '.bashrc', '.viminfo']
>>> os.listdir('~')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
OSError: [Errno 2] No such file or directory: '~'
>>> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-11T23:22:02.157

您需要使用以下[`os.path.expanduser()`功能](http://docs.python.org/2/library/os.path.html#os.path.expanduser)：

```
>>> import os.path
>>> os.path.expanduser('~')
'/home/username' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T23:24:40.697

你可以这样问操作系统：

```
>>> import os
>>> os.environ['HOME']
'/home/noctua'
>>> os.listdir(os.environ['HOME']) 
```

# excel - 使用 METADATA 列的 Drools Excel 决策表示例？

> ID：13830181
> 
> 赞同：1
> 
> 时间：2012-12-11T23:21:23.687
> 
> 标签：excel, metadata, drools

谁能指出我其中之一？我已经下载了 5.5 发行版并浏览了示例，但找不到我想要的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:56:28.757

添加一个额外的列（或您想要的许多列），将这些列的值与值行`METADATA`放在同一行。这是一个例子：`CONDITION``ACTION`

假设它在#10 行，你定义`CONDITION`and `ACTION`。现在您要添加2`@myTag01`个`@myTag02`自定义属性。

1.  columns：让我们使用 D 列和 E 列（不要破坏 RuleSet，RuleTable 整体布局）
2.  第 10 行：设置`D10=METADATA`和`E10=METADATA`
3.  `METADATA`row11：为下一行的这些列保留这些值为空，即单元格 D11、E11 为空。
4.  row12：设置 D12=`myTag01("@param")`和 E12= `myTag02("@param")`，请注意`@`这里忽略。
5.  row13: D13 是 myTag01 的描述，E13 是描述是`myTag02`，例如 D13= `My First Tag`, E13=`My Second Tag`
6.  row14...：从 D14 和 E14 开始，它是你需要放在那里的标签值。例如 D14= `tag01ValX`, E14= `tag02ValY`, 它将生成`@myTag01("tag01ValX")`和`@myTag02("tag02ValY")`

# entity-framework - WebMatrix 2 无法识别 EntityFramework 助手

> ID：13830183
> 
> 赞同：1
> 
> 时间：2012-12-11T23:21:33.663
> 
> 标签：entity-framework, dll, webpage, webmatrix

我刚开始在 WebMatrix 上工作，我完成了[本](http://www.asp.net/web-pages/tutorials/introducing-aspnet-web-pages-2/getting-started)教程来学习基础知识，然后我从[这个](http://www.mikesdotnetting.com/Article/182/Entity-Framework-Code-First-Development-With-WebMatrix)教程开始在 WebMatrix 上使用实体框架（注意：该教程适用于 WebMatrix 1，但我看到的唯一改变是将助手安装到项目中的方式）。问题是，我安装了 Entity Framework 帮助程序，但我的项目无法识别 EntityFramework.dll。

我得到这个错误`The type or namespace name 'MaxLength' could not be found (are you missing a using directive or an assembly reference?)`。但是 EntityFramework.dll 确实出现在我的 bin 文件夹中，这是怎么回事？我不明白为什么参考不起作用。

这是根据第二个教程和安装 EntityFramework 帮助程序后的我的 Web.config 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
  </configSections>
  <system.web>
    <compilation debug="true" targetFramework="4.0"><assemblies><add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" /><add assembly="System.ComponentModel.DataAnnotations, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" /></assemblies></compilation>
  </system.web>
  <connectionStrings>
    <add name="BookContext" connectionString="Data Source=|DataDirectory|Books.sdf" providerName="System.Data.SqlServerCe.4.0" />
  </connectionStrings>
</configuration> 
```

这是编译器输出[链接](http://pastebin.com/R6U6gYv5)

我错过了什么吗？为什么我的项目无法正确识别 EntityFramework.dll？

**更新**

我认为当我从 Visual Studio 2012 中创建的网页项目中复制 EntityFramework.dll 时问题已解决，但即使不再显示错误，WebMatrix 仍然无法识别 Table、Column、ForeignKey、InverseProperty 等注释，等等

我真的不明白，创建了一个简单的数据库，但我不能使用 EntityFramework 注释来指定数据库所需的所有内容。WebMatrix 应该识别 EntityFramewor.dll 但它不是。我需要帮助，因为我真的迷路了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:59:23.483

您看到的错误是您站点上安装的 EntityFramework 版本的最终结果。

EntityFramework 5.0 包安装 EntityFramework.dll 的 4.4 或 5.0 版本，具体取决于项目所针对的 .NET 版本（4.0 或 4.5）。

根据我的经验，从 WebMatrix 中的 NuGet 库安装 EntityFramework 总是将 EntityFramework.dll 的 4.4 版复制到 bin 文件夹中：您可以查看属性 --> EntityFramework.dll 文件的详细信息来检查它。

我知道的唯一解决方案是使用 VisualStudio Express 或其他独立实用程序下载 EntityFramework v.5.0（查看这篇文章：[在 Webmatrix 2 RC 中安装 Entity Framewok v5](https://stackoverflow.com/questions/11970076/install-entity-framewok-v5-in-webmatrix-2-rc)），然后简单地用这个替换 WebMatrix 中 NuGet Gallery 安装的 dll。

**更新**

使用 EntityFramework v.5.0 和 WebMatrix 试验的其他问题是*类型“System.Data.EntityState”是在未引用的程序集中定义的，*并且*需要 DataAnnotations.Schema 的 using 指令*。

第一个问题已解决，添加以下对 web.config 的引用（查看[无法加载文件或程序集 'System.Data.Entity](https://stackoverflow.com/questions/5021248/could-not-load-file-or-assembly-system-data-entity)）：

```
<add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" /> 
```

第二个问题需要添加指令

```
using System.ComponentModel.DataAnnotations.Schema; 
```

到代码。

无论如何，在我看来，WebMatrix 不是基于 EntityFramework 开发网站的正确工具。

# eclipse-juno - Eclipse Juno - 挂起类型空间加载

> ID：13830184
> 
> 赞同：0
> 
> 时间：2012-12-11T23:21:36.170
> 
> 标签：eclipse-juno

不知道发生了什么，但它只是挂在“类型空间加载（4％）”上，就是这样。我尝试使用 -clean 选项和删除插件下的 .history 和 eclipse 资源文件夹来解决问题。我也尝试了新的工作区，它仍然是一样的。

在此之前，我安装了 JVET。不知道跟这个有没有关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T05:42:50.237

是的，这是因为 VJET，请参阅[https://www.ebayopensource.org/jira/browse/VJET-57](https://www.ebayopensource.org/jira/browse/VJET-57)

对我来说，它发生在为 JavaScript Web 开发人员全新安装的 Eclipse IDE 上。只需将其放置半小时左右，它应该会成功完成。

请问你为什么要安装VJET？如果像我一样能够调试 node.js，您可能想尝试[https://github.com/joyent/node/wiki/Using-Eclipse-as-Node-Applications-Debugger](https://github.com/joyent/node/wiki/Using-Eclipse-as-Node-Applications-Debugger)

# cocos2d-iphone - 为什么 cocos2d 中只有 60 fps 真的很流畅？

> ID：13830185
> 
> 赞同：9
> 
> 时间：2012-12-11T23:21:35.873
> 
> 标签：cocos2d-iphone, frame-rate, smooth

以前可能有人问过，但我在任何地方都找不到...

在 videoland 中，24 fps 及以上的任何内容都很流畅。Cocos2d 似乎只有在 60 fps 或更低的情况下才流畅。30 到 50 之间的任何东西肯定不平滑，fps 计数器似乎不准确......

为什么是这样？还是只有我有这种情况？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-12T09:23:19.570

这种行为实际上有几个原因，它不仅仅是 cocos2d，而是在启用[垂直同步](http://en.wikipedia.org/wiki/Vertical_synchronization#Vertical_synchronization)(VSYNC) 的环境中的任何游戏引擎中都可以看到的效果。在 iOS 上，VSYNC 始终处于开启状态，在 PC 上，如果帧率始终低于显示器的帧率，您通常可以选择将其关闭以提高帧率，但代价是[屏幕撕裂](http://en.wikipedia.org/wiki/Screen_tearing)。通常，像 iOS 设备这样的 LCD 以 60 Hz 的频率更新其显示，最高允许 60 fps。

Cocos2D 1.x 默认使用[CADisplayLink](http://developer.apple.com/library/ios/#documentation/QuartzCore/Reference/CADisplayLink_ClassRef/Reference/Reference.html)类进行更新，Cocos2D 2.x 只使用 CADisplayLink。CADisplayLink 使更新与屏幕刷新率同步。这意味着当屏幕完成绘制其内容时会发送通知。

当您获得 60 fps 时，一切都很好。但如果游戏无法及时渲染帧以渲染 60 fps，则只有在下一次屏幕刷新完成后才会收到下一次更新。一旦帧速率下降到略低于 60 fps，或者换句话说，只要您的更新和渲染周期需要超过 16.666 毫秒才能完成，这就会有效地将帧速率减半。这意味着在带有 CADisplayLink 更新的 iOS 上，您只能拥有 60、30、20 和 15 fps（60 除以 1、2、3 和 4）的离散帧速率。

效果非常明显，因为在 60、30、20 和 15 fps 之间波动的帧速率 - 即使只是几分之一秒 - 感觉并不平滑，主要是因为它非常不稳定 - 不稳定是我们注意到的“不平滑” ”。如果您的游戏受此影响，您可能会发现将帧速率限制为 30 fps 实际上会使游戏看起来更流畅。您还有更多时间在帧之间更新和渲染内容。

24 fps 电影帧速率的稳定性被认为是“流畅的”，但电影导演也学会了避免有限帧速率变得太明显的场景。例如，他们避免了游戏经常做的事情：横向滚动，即摄像机的横向移动或经过摄像机的物体的横向移动。

当您观看《霍比特人》时，您会惊讶于电影的流畅程度——这是第一部以 48 fps 运行的大片。您会立即注意到电影中的角色更加“真实”和“栩栩如生”。要获得印象，请查看这个[非官方的 48 fps 霍比特人预告片](http://www.lukeletellier.com/?portfolio=post-converting-the-hobbit-trailer-to-48fps)。

cocos2d 显示的 fps 并不是从 60 到 30 到 20 和 15 fps 切换的准确表示，而是几帧的平均帧率。因此，当 cocos2d 打印“45 fps”时，这意味着游戏在过去几帧中显示 30 fps 的一半时间，另一半以 60 fps 显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T23:30:00.387

两个主要问题。

首先是匹配显示器的刷新率——其他任何事情，你都会得到眼睛/大脑擅长发现的不规则运动。至少是它的倍数。

其次是运动模糊。电影/视频往往具有运动模糊，这会欺骗观众看到连续运动。

# javascript - 哪些因素可以改变 HTML 输入字节流？

> ID：13830189
> 
> 赞同：1
> 
> 时间：2012-12-11T23:21:50.713
> 
> 标签：javascript, html, dhtml, document.write

据我所知，HTML 输入是字节流，`document.write()`可以通过插入新字节来更改流。例如

```
document.write("<p> an example </p>"); 
```

另外 HTML5 规范的[解析模型](http://www.whatwg.org/specs/web-apps/current-work/multipage/parsing.html)只表示`document.write()`可以改变 HTML 输入，但并没有说这是唯一的因素。

是否有任何其他因素会改变 HTML 输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:57:38.560

还有[document.writeln](http://www.w3.org/html/wg/drafts/html/master/dom.html#document.writeln%28%29)，但仅此而已。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T23:52:01.853

如果您在他们指出的位置旁边查看他们的树模型，`document.write()`则表明脚本执行是在实际树创建之外处理的。我相信，这意味着任何操纵 dom 的脚本都将与`document.write()`.

这些将包括但不限于：

```
el.innerHTML = '';
el.innerText = '';
el.style = '';
el.insertBefore = '';
el.insertAfter = '';
el.createDocumentFragment;
el.appendChild();
el.removeChild(); //note this is the only supported way of removing from the html bit stream
document.write();
//and anything else that changes either the html, css or even other scripts in the 
//document. 
```

# clojure - Clojure-New Cond 宏？

> ID：13830194
> 
> 赞同：16
> 
> 时间：2012-12-11T23:22:18.303
> 
> 标签：clojure

我不理解[clojure 1.5 发行说明](https://github.com/clojure/clojure/blob/master/changes.md#24-new-threading-macros)中的​​这段代码。它使用`cond->`宏。例如，它将如何转换为 1.5 之前的代码？

```
user=> (cond-> 1
               true inc
               false (* 42)
               (= 2 2) (* 3))
6 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-12T00:01:51.090

如果测试为真，每一步都会改变结果，如果测试为假，则不处理。

您可以通过线程化匿名函数在 1.4 中编写：

```
user> (-> 1 (#(if true (inc %) %)) 
            (#(if false (* % 42) %)) 
            (#(if (= 2 2) (* % 3) %)))
6 
```

虽然`cond->`没有引入新功能，但它会生成一个更有效的绑定表单：

```
user> (let [g 1 
            g (if true (inc g) g) 
            g (if false (* g 42) g) 
            g (if (= 2 2) (* g 3) g)] 
      g)
6 
```

并使用`gensym`for`g`以防某些表格使用该符号`g`

* * *

`cond->>`非常相似，只是将螺纹符号放在不同的位置。

```
user> (let [g 1 
            g (if true (inc g) g) 
            g (if false (* 42 g) g) 
            g (if (= 2 2) (* 3 g) g)] 
       g)
6 
```

在这个例子中，它给出了相同的结果，因为`*`和`+`是可交换的。

# oop - CLR 如何知道在从抽象基类继承的派生类上调用哪个方法？

> ID：13830202
> 
> 赞同：0
> 
> 时间：2012-12-11T23:23:15.480
> 
> 标签：oop, polymorphism, typing

我有以下情况，我想知道 CLR 如何知道要调用哪个方法：

```
public abstract class Shape
{
    public abstract String PrintName();
}

public sealed class Square : Shape
{
    public override String PrintName() { return "Square"; }
}

public sealed class Circle : Shape
{
    public override String PrintName() { return "Circle"; }
} 
```

然后我实例化每个形状：

```
Shape square = new Square();   
Shape circle = new Circle();
List<Shape> shapes = new List<Shape> { square, circle };

foreach (Shape s in shapes)
{
    Console.WriteLine(s.PrintName());   
}

// Output:
// Square
// Circle 
```

那么，即使我们在基类型上调用方法，我们如何才能在派生类上调用方法呢？我很困惑这是如何处理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T23:52:54.287

由于 CLR 的类型安全特性，可确保在创建 Foo 的实例时不能将其视为 Bar，因此在运行时它始终知道对象的类型。因此，当您在形状上调用 PrintName() 时，它知道它处理的是方形还是圆形。

请注意，由于 GetType() 是非虚拟的，它不能被覆盖，因此您不能欺骗对象的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T23:51:14.363

当你实例化时，真的是一个真的`Shape square = new Square();`事实是完整的。请记住，变量确实是对真实对象的引用。引用类型（在本例中为）必须与实例化类型 ( ) 相同或在继承层次结构中更高，正如您在此处所做的那样。`square``Square``square``Shape``Square`

实例化之后，当编译器看到 时`square`，它首先知道它是抽象类型`Shape`，因为那是引用的类型。因此，它必须是 Shape 的子类型，因为您无法实例化抽象对象。既然你说`new Square();`编译器会知道确切的类型。同样，对象的确切类型不会因为您将其分配给基本（更基本）类型而丢失。

当你调用`square.PrintName();`时，编译器首先看到`square`是用抽象类型声明的`Shape`，它有一个方法`PrintName()`，也标记为抽象。这告诉编译器在子类中寻找相同的方法。如果它`PrintName()`在子类中找到，一切都很好 - 将执行正确的函数。如果没有，你会得到一个错误，因为基类定义中的抽象词要求你实现它。

# c# - 如何并行运行调用方法

> ID：13830209
> 
> 赞同：2
> 
> 时间：2012-12-11T23:24:03.037
> 
> 标签：c#, asp.net, .net-4.0, methods, parallels

给定以下代码：

```
if (!string.IsNullOrEmpty(link1))
{
    string[] link1_ar = link1.Split(sep, StringSplitOptions.None);
    string page1 = link1_ar[1];
    string filter1 = link1_ar[2];
    string code2 = link2_ar[3];
    MyMethod(summary, page1, filter1, code1);
}
if (!string.IsNullOrEmpty(link2))
{
    string[] link2_ar = link2.Split(sep, StringSplitOptions.None);
    string page2 = link2_ar[1];
    string filter2 = link2_ar[2];
    string code2 = link2_ar[3];
    MyMethod(summary, page2, filter2, code2);
}
if (!string.IsNullOrEmpty(link3))
{
    string[] link3_ar = link3.Split(sep, StringSplitOptions.None);
    string page3 = link3_ar[1];
    string filter3 = link3_ar[2];
    string code3 = link3_ar[3];
    MyMethod(summary, page3, filter3, code3);
}

    private void MyMethod(ref string summary, string bid_page, string bid_filter, string bid_code, string bid_silver)
    {
        bla bla bla
    } 
```

我想同时运行三个 MyMethod！
为了达到这个目的，我应该在这些代码中进行哪些更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T02:55:05.270

假设您的 MyMethod 实际上是线程安全的，那么以下内容应该使用 .Net 4.0 中的 Parallel.ForEach() 方法工作。我正在跟踪 ConcurrentDictionary 中的各个摘要，以便您以后可以在需要时通过链接引用它们。

我还假设您更改了 MyMethod() 以返回摘要。

```
List<string> links = new List<string>() { link1, link2, link3};

ConcurrentDictionary<string, string> summariesByLink = new ConcurrentDictionary<string, string>();

Parallel.ForEach(links, link => {

  if (!string.IsNullOrEmpty(link))
  {
    string[] link_ar = link.Split(sep, StringSplitOptions.None);
    string page = link_ar[1];
    string filter = link_ar[2];
    string code = link_ar[3];
    string summary = MyMethod( page, filter, code);

    summariesByLink.Add(link, summary);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T01:41:26.287

尝试将每个对 MyMethod 的调用包装在一个任务中，然后等待它们全部完成。

```
var tasks = new List<Task>();

if (!string.IsNullOrEmpty(link1))
{
    string[] link1_ar = link1.Split(sep, StringSplitOptions.None);
    string page1 = link1_ar[1];
    string filter1 = link1_ar[2];
    string code2 = link2_ar[3];
    var link1task = Task.Run(MyMethod(summary, page1, filter1, code1));
    tasks.Add(link1task);
}
if (!string.IsNullOrEmpty(link2))
{
    string[] link2_ar = link2.Split(sep, StringSplitOptions.None);
    string page2 = link2_ar[1];
    string filter2 = link2_ar[2];
    string code2 = link2_ar[3];
    var link2task = Task.Run(MyMethod(summary, page2, filter2, code2));
    tasks.Add(link2task);
}
if (!string.IsNullOrEmpty(link3))
{
    string[] link3_ar = link3.Split(sep, StringSplitOptions.None);
    string page3 = link3_ar[1];
    string filter3 = link3_ar[2];
    string code3 = link3_ar[3];
    var link3task = Task.Run(MyMethod(summary, page3, filter3, code3));
    tasks.Add(link3task);
}

Task.WaitAll(tasks.ToArray()); 
```

# php - 从 PHP 块中调用 Javascript 函数

> ID：13830211
> 
> 赞同：0
> 
> 时间：2012-12-11T23:24:06.563
> 
> 标签：php, javascript

> **可能重复：**
> [如何从 PHP 调用 JavaScript 函数？](https://stackoverflow.com/questions/1045845/how-to-call-a-javascript-function-from-php)

我正在为学校做一个项目，我在登录页面上苦苦挣扎。在我的 PHP 代码中，如果用户输入了错误的用户名或密码，我想调用一个 Javascript 函数来显示一条消息并短暂更改显示消息的背景颜色。这是我的 JS 和 PHP 代码块：

```
<script>
var flashContent = function () {
document.getElementById("outputlogin").style.backgroundColor = "#ffff00";
document.getElementById("outputlogin").innerHTML = "Incorrect login.";
function proxy() {
    updateColor(0);
}
setTimeout(proxy, 50);
}

var updateColor = function (newColor) {
var hexColor = newColor.toString(16);
if (hexColor.length < 2)
    hexColor = "0" + hexColor;
var colorString = "#ffff" + hexColor;

document.getElementById("outputlogin").style.backgroundColor = colorString;

function proxy() {
    updateColor(newColor);
}

if (newColor < 255) {
    newColor = newColor + 5;
    setTimeout(proxy, 50);
}
}
</script>

<?php
$username = $_POST['username'];
$password = $_POST['password'];

if(($username == "Ben") && ($password == "thepassword")){
//echo "SUCCESS";
session_start();
$_SESSION['bensedmgallerysesh'] = session_id();

header("Location:../index.php");

}else{
if($username != "" && $password != ""){
    javascript:flashContent();
}
}
?> 
```

现在，点击登录按钮后，我收到错误消息：

致命错误：调用未定义函数 flashContent()

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T23:29:49.983

您正在尝试在服务器端脚本中调用客户端函数。你可以这样做：

```
if($username != "" && $password != ""){
?>
    <script type="text/javascript">
        flashContent();
    </script>
<?php 
} 
```

但是以一种阻止您尝试编写这样的服务器端处理的方式实际分离逻辑可能更聪明。组织能力在这项业务中大有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T23:29:36.603

您是否尝试过这样做：

```
echo '<script type="text/javascript"> flashContent(); </script>'; 
```

代替：

```
javascript:flashContent(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T23:30:00.413

我不认为有像javascript这样的东西：functionName()..

Javascript 在用户空间中运行，由浏览器解释。

PHP 在服务器空间中运行，并由预处理器处理。

您应该在 PHP 中测试用户名和密码，如果错误，则向客户端发送 JSON 回复。在客户端中，解析 JSON 数据并显示相应的消息。您可能希望使用 AJAX 来执行此操作。

希望有效

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T23:49:10.540

您不能使用 php 调用这样的 Javascript 函数，您需要在 javascript 中回显调用该函数的脚本。像这样的东西可能会起作用：

```
<?php
echo '<script> window.onload = function(){ flashContent(); } </script>';
?> 
```

但这可能不是一个好方法。在 javascript 在浏览器上运行之前，php 在服务器上运行。让两种语言进行通信的一种更好的方法是将 AJAX 调用发送到 php 脚本。

**编辑** 澄清：您可以在脚本中回显对 Javascript 函数的调用，它将在您回显它的地方运行。但是在这里，php 仍然会将 Javascript 视为要打印在文档上的字符串。

# backbone.js - 骨干.js 集合和石墨碳的集合

> ID：13830213
> 
> 赞同：2
> 
> 时间：2012-12-11T23:24:27.137
> 
> 标签：backbone.js, collections, models, graphite, graphite-carbon

我正在编写一个backbone.js 'app'，并且想将石墨/碳的json输出直接映射到一些主干模型/集合。

一般来说，json输出是这样的：

```
[
  {
    'target': 'some.string.1',
    'datapoints': [ [ val1, timestamp1 ], [ val2, timestamp2 ]... ]
  },
  {
    'target': 'some.string.2',
    'datapoints': [ [ val1, timestamp1 ], [ val2, timestamp2 ]... ]
  },
  ...
] 
```

我已经定义了一个简单的模型和集合，这样：

```
class Measurement extends Backbone.Model
  defaults:
    id: undefined
    val: undefined

class Measurements extends Backbone.Collection
  model: Measurement
    initialize: (model, options) ->
      if options.metric
        @metric = options.metric
    url: -> 
      '/?target=' + @metric
    parse: (data,xhr) ->
      if _.size(data) == 1
        return _(data[0]['datapoints']).map( (d) ->
          m = {}
          m['id'] = new Date(0)
          m['id'].setUTCSeconds( d[1] )
          m['val'] = d[0]
          m
        )
      undefined 
```

如您所见，我将 id 重载为每个测量的时间戳，并且特定“度量”的所有测量都存储在名为 Measurements 的集合下。

我还对其进行了硬编码，因此它实际上只适用于一个测量集合（即 json 中的“目标”）。

我的问题涉及如何最好/优雅/灵活地在一次调用中实现多个测量（集合）的收集。即，石墨支持对其“目标”使用通配符，以便 ajax 请求`/?target=some.string.*`将带回所有匹配的目标和数据点（如在 json 示例中）。然后我会将其呈现给一个视图，在那里我将呈现累积数据或绘制所有测量值与时间的关系。

我正在考虑使用另一个包含许多测量值的集合（我们称之为集合）。我希望能够做一些事情，比如`Set.fetch()`从服务器获取所有匹配的测量值，并让 Set 从单个 ajax 请求中创建许多测量值集合。

有人对如何实施有任何建议吗？甚至是表示此模型/集合层的更好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:43:06.530

虽然没有直接回答你的问题——你看过[石墨烯](https://github.com/jondot/graphene)吗？- 这是一个用于石墨的 javascript 仪表板，它正在使用`backbone.js`. 您可能会看到它是如何在那里实现的，并借用/窃取了一些想法。

作为旁注 - 根据我构建不同野兽的经验（[长颈鹿](https://github.com/kenhub/giraffe)，对不起插件，但提供上下文很重要），将通配符目标与石墨匹配存在一些困难。主要原因是您不知道返回了多少个目标。例如，当您希望其中一个目标在图表上显示为红色，或者想要添加像注释器这样的目标（绘制为无限以标记基于时间的事件）时，这可能会很棘手。在使用通配符和使用石墨的多目标请求时要牢记一些事情。

# c# - 在 wpf RichTextBox 上画一条垂直线

> ID：13830219
> 
> 赞同：1
> 
> 时间：2012-12-11T23:24:44.827
> 
> 标签：c#, .net, wpf, richtextbox

我有一个自定义 RichTextBox 类，我想在上面画一条垂直线。（想法是它将显示“字符限制”。）

我尝试过覆盖 OnRender，但这并没有画出任何东西。

我读过使用 Adorners，但它们会更新文本的外观。（我只是想画一条线，与文字无关。）

**有没有办法从上到下画一条垂直线？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:52:32.340

一种快速方法：

```
<Grid x:Name="Container" Height="100">
    <RichTextBox/>
    <Line Stroke="Aqua" X1="160" X2="160" Y1="0" Y2="{Binding Path=Height,ElementName=Container}" IsHitTestVisible="False"/>
</Grid> 
```

`IsHitTestVisible="False"`只是以防他们点击就行了，不希望那吃掉鼠标点击。

# jpeg - JPEG：有尺寸限制吗？

> ID：13830223
> 
> 赞同：-4
> 
> 时间：2012-12-11T23:25:31.710
> 
> 标签：jpeg

具体来说，220400w x 5400h。生成这个尺寸的图像有任何问题（当然除了机器限制）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T01:31:05.463

JPEG 文件的最大尺寸为 64K x 64K。

# c++ - 将 char* 转换为数字的最快方法是什么？

> ID：13830224
> 
> 赞同：0
> 
> 时间：2012-12-11T23:25:36.093
> 
> 标签：c++

将 char* 转换为 number 的最快方法是什么？我需要将 4 个字符转换为 int，或将两个字符转换为 short int。我试过了

```
char* ar;
//fill ar with values  
int x= ar[1]+1[2]<<8+ar[3]<<16+ar[4]<<24; // ar[0] number of chars for number (short 2, int 4) 
```

但结果始终为零。（为了解释我将数字转换为 char* 而不是通过网络发送，另一方面我试图反转过程）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T23:28:50.050

使用`atoi`功能：

```
#include <iostream>
#include <cstdlib>

int main ()
{
  int i;
  char * num = "325";
  i = atoi (num);
  std::cout << i << std::endl;
  return 0;
} 
```

**编辑**

正如评论中所指出的，您不应该使用`atoi`函数，因为您看不到转换是否有错误（`atoi`如果失败将返回 0，但是这种情况呢`int i = atoi("0");`）。当您使用 C++ 时，可以选择使用`stringstream`

```
#include <iostream>
#include <sstream>

using namespace std;

int main()
{
        char * num = "3443";
        int result;
        stringstream ss;
        ss << num;
        ss >> result;

        if (!ss.fail()) {
            cout << result << endl;
        }

        return 0;
} 
```

不幸的是，我这里没有 C++11 编译器，所以我不能尝试使用`std::stoi`.

**编辑 2**

我做了一些快速研究，这里是建议使用`strtol`函数的主题：[如何在 C++ 中将字符串解析为 int？](https://stackoverflow.com/questions/194465/how-to-parse-a-string-to-an-int-in-c)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T23:43:44.637

```
ar[1]+1[2]<<8+ar[3]<<16+ar[4]<<24; 
```

使用 c++ 运算符的优先级是：

```
(ar[1]+1[2]) << (8+ar[3]) << (16+ar[4]) << 24 
```

难怪它总是 0。使用括号。您也可以使用`|`，但无论如何我都会建议使用括号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T23:44:28.037

根据您的示例代码猜测我认为这就是您正在寻找的（您真的有一个`void*`不是`char*`？？？）

```
unsigned int getValue(char* c) {
    if (c[0] == 0x2) {
        return *(reinterpret_cast<unsigned short*>(c + 1));
    } else if (c[0] == 0x4) {
        return *(reinterpret_cast<unsigned int*>(c + 1));
    } else {
        assert(false);
    }
}

int main() {

    char c[5];
    char d[5];

    c[0] = 0x2;
    d[0] = 0x4;

    char* cStart = &c[1];
    *(reinterpret_cast<unsigned short*>(cStart)) = 1000;

    char* dStart = &d[1];
    *(reinterpret_cast<unsigned int*>(dStart)) = 1123124;

    std::cout << getValue(c) << std::endl;
    std::cout << getValue(d) << std::endl;

    return 0;
} 
```

# ruby-on-rails - 需要合二为一的两种用户帐户

> ID：13830229
> 
> 赞同：0
> 
> 时间：2012-12-11T23:25:47.513
> 
> 标签：ruby-on-rails, ruby, devise

目前我们正在使用设计让我们的用户登录到我们的网站，但我们有两个设计模型。一份给用户，一份给房东。现在，当用户第一次打开我们的 iOS 应用程序时，我们的用户是自动创建的。当用户创建列表时，他们会创建另一个名为“房东”的用户帐户。我需要一种方法将它们合二为一，但保留我们 iOS 应用程序的当前功能并添加通过 facebook 登录的功能。关于如何解决这个问题的任何想法或意见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:54:47.923

也许当一个用户创建一个地主帐户时，传入user_id，然后将所有字段转移到地主用户类型，然后删除用户，或类似的东西。或者，您可以设置一个布尔值来确定用户是否是房东。

对于 facebook，将 omniauthable 与 Devise 一起使用。该示例适用于 facebook [https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview](https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview)

# cucumber - Cucumber：如何避免模棱两可的步骤？

> ID：13830238
> 
> 赞同：1
> 
> 时间：2012-12-11T23:27:06.553
> 
> 标签：cucumber

我正在创建两个简单的场景，如下所示：

```
Scenario: 1
Given I am on the homepage
When I click the expand arrow
Then the drawer is expanded

Scenario: 2
Given the drawer is expanded 
```

问题是第一个场景的 THEN 和第二个场景的 GIVEN 是黄瓜这样写的：

```
Then /^the drawer is expanded$/ do
Given /^the drawer is expanded$/ do 
```

然后我收到一条错误消息：

```
Ambiguous match of "the drawer is expanded" 
```

当我尝试运行它时。

有没有办法避免这种模棱两可的步骤？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T04:16:29.443

最好重写步骤，使两个步骤不同。

一种方法是遵循 Pat Maddox 在他的[Rewriting Ambiguous Cucumber Steps](http://patmaddox.com/2010/10/26/rewriting-ambiguous-cucumber-steps/)博客文章中的建议，并将第二种情况重写如下：

```
Scenario 2
Given that the drawer is expanded 
```

# ios - IOS 6 ARC无法识别的选择器发送到实例

> ID：13830240
> 
> 赞同：0
> 
> 时间：2012-12-11T23:27:21.977
> 
> 标签：ios, automatic-ref-counting, xcode4.5

我希望有人可以帮助解决这个问题。

我有一个 UITableViewController 并希望在选择表格单元时将一个值传递给一个名为 NewsArticleViewController 的 UIViewController。我已经创建了从 tablecell 到视图控制器的 segue。

当我在下面调用我的 prepareForSegue 方法时：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([[segue identifier] isEqualToString:@"ShowNewsArticle"])
    {
        NSIndexPath *indexPath = [self._tableView indexPathForSelectedRow];
        NSDictionary *article = [_articles objectAtIndex:indexPath.row];
        NSString *articleID = [article valueForKey:@"id"];
        NSLog(@"Trying %@", articleID);

        NewsArticleViewController *detailViewController = [segue destinationViewController];
        detailViewController.articleID = articleID;
    }
} 
```

NSLog 在最后一行发生错误之前正确显示了 NSString 值。

我得到错误：

```
2012-12-11 23:08:41.915 My School[4689:c07] -[UIViewController setArticleID:]: unrecognized selector sent to instance 0x8088140
2012-12-11 23:08:41.916 My School[4689:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIViewController setArticleID:]: unrecognized selector sent to instance 0x8088140'
*** First throw call stack:
(0x1800012 0x11c5e7e 0x188b4bd 0x17efbbc 0x17ef94e 0x3ca1 0x554ac7 0x554b54 0x1bc899 0x1bcb3d 0xbc3e83 0x17bf376 0x17bee06 0x17a6a82 0x17a5f44 0x17a5e1b 0x1cc87e3 0x1cc8668 0x10d65c 0x1f4d 0x1e75 0x1)
libc++abi.dylib: terminate called throwing an exception 
```

在目标视图控制器 NewsArticleViewController 上，我在标题中声明了这一点：

```
@property(strong,nonatomic) id articleID; 
```

我已经在方法中合成了属性。我正在使用 ARC，我不知道这是否是具体原因，但在我解决这个问题之前我无法继续。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T23:34:39.900

在您的错误消息中，`UIViewController`报告“无法识别的选择器”错误。我怀疑你的故事板没有`NewsArticleViewController`为这个场景指定你的自定义。因此，它使用默认值`UIViewController`，显然不理解`setArticleID`.

检查 Interface Builder 中视图控制器的“自定义类”设置：

![在此处输入图像描述](../Images/f50b66774bcefda3d051dda8c492a21d.png)

如果自定义类没有指定，它看起来像上面的屏幕快照。只需填写班级名称。

# php - mysqli_fetch_array的第二个参数

> ID：13830244
> 
> 赞同：1
> 
> 时间：2012-12-11T23:27:44.177
> 
> 标签：php, mysqli, mysqli-fetch-array

我有这样的代码：

`mysqli_fetch_array($result)`

我似乎对此没有任何错误，但是我在网上看到的所有示例都有第二个参数，如下所示：

`mysqli_fetch_array($result, MYSQLI_ASSOC)`

**编辑：**

我找到了答案：这个可选参数是一个常量，指示应该从当前行数据生成什么类型​​的数组。此参数的可能值是常量 MYSQLI_ASSOC、MYSQLI_NUM 或 MYSQLI_BOTH。

我仍然想知道不包括在内是否有任何缺点？即使它被认为是可选的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T23:38:16.623

将第二个参数留空与使用默认值 MYSQLI_BOTH 相同

如果您编写任何循环遍历返回数组的索引的代码，您可能会遇到默认值的问题 - 在这种情况下，您需要指定您需要的类型。

此外，如果您正在为 ajax 请求提供响应，您可能希望减少您返回的响应的大小 - MYSQLI_BOTH 将创建一个比其他两个选项中的任何一个大两倍的数组。

# c# - 使用正则表达式从收据中获取数据

> ID：13830247
> 
> 赞同：0
> 
> 时间：2012-12-11T23:28:27.047
> 
> 标签：c#, .net, regex, string, split

我正在使用正则表达式从收据中获取每个行项目的数据。收据将如下所示：

```
Qty Desc
1   JD *#
    MARTINI *#   
2   XXXXXX 
3   YYYYYY
4   JD
    PEPSI *# 
```

所有物品都有数量和描述，其中一些有额外的`*#`。另外，请注意，描述中可以有空格，**甚至不止一行，每一行都可以有自己的** `*#`. 我想抓住数量和描述（如果多于一行，则获取所有行），我根本不在乎多余的`*#`. 所以在这个例子中，对于第一个行项目，我会捕获 Quantity=1 和 Description="JD MARTINI"。对于第四个，Quantity=4 和 Description="JD PEPSI"。

我当前的正则表达式如下所示：

```
((\d+)\s+(.*)(\s+\*#)?) 
```

它不起作用，我认为这是因为将最后一个括号设为可选允许贪婪`(.*)`者绝对捕捉到所有东西。如果最后一个括号不是可选的，则正则表达式将对带有 extra 的行项目执行其工作`*#`，但它不会匹配第一个和第三个括号（因为它们没有 extra `*#`）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:38:44.887

在阅读了您修改后的问题后，我确定您希望完成的事情不能用一个正则表达式来完成。你将不得不做正则表达式匹配+替换的组合。（见这个问题：[Regular expression to skip character in capture group](https://stackoverflow.com/questions/277547/regular-expression-to-skip-character-in-capture-group)）

匹配正则表达式： (\d+)\s+([AZ\s*#]*[AZ]+)

替换正则表达式： (*#(\s*))|(\r\n\s+)(?=\s)

匹配正则表达式将匹配数量和项目描述，包括任何中间换行符或 *# 出现，省略最后的 *#。我假设描述中的最后一个字符是一个字母。

运行匹配正则表达式后，您将得到一个匹配数组，您需要对其进行迭代以转换为对象。我写了一些方便的代码来为你做这件事。对于每个对象，您将对对象的描述运行替换正则表达式，这将删除无关的空格和 *#。

```
 class ReceiptItem
    {
        public int Quantity { get; set; }
        public string Description { get; set; }

        public override string ToString()
        {
            return string.Format("{0}\t{1}", Quantity, Description);
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        var matches = Regex.Matches(textBox1.Text, @"(\d+)\s+([A-Z\s\*\#]*[A-Z]+)", RegexOptions.Multiline);
        var items = (from Match m in matches
                     select new ReceiptItem()
                                {
                                    Quantity = int.Parse(m.Groups[1].Value),
                                    Description = Regex.Replace(m.Groups[2].Value, @"(\*\#(\s*))|(\r\n\s+)(?=\s)", "")
                                });

        listBox1.Items.AddRange(items.ToArray());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T23:37:22.407

试试这个正则表达式（带`Multiline`选项）：

```
(\d+)\s+(?:(.*)(?:\s+\*#)|([^#]*))$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T23:50:10.420

试试这个。我认为它可以满足您的需求。

```
((\d+)\s+(.+?)(\s+\*#)*) 
```

# android - 单元测试对话框片段

> ID：13830253
> 
> 赞同：4
> 
> 时间：2012-12-11T23:28:48.960
> 
> 标签：android, junit, instrumentation, android-dialogfragment

我为我的 DialogFragment 使用自定义布局，我这样启动：

```
someDialog.show(getFragmentManager(), "dialog_tag"); 
```

该对话框有两个文本字段，一个“保存”和“取消”按钮，当用户按下“保存”时，它会进行一些验证并在失败时显示红色文本。考虑登录失败时的登录弹出窗口。

如何在 Android 中使用 Junit 进行测试？我想测试是否：

1.  当用户按下某些东西时，会显示对话框。
2.  验证失败时显示红色文本。

具体来说，当从 Activity 启动时，如何使用 Android Instrumentation 框架获取 DialogFragment 中的视图句柄？我如何知道 DialogFragment 是否正确显示？

# node.js - 使用 Nginx 作为 node.js 的代理将 Expires 标头添加到 favicon.ico

> ID：13830255
> 
> 赞同：1
> 
> 时间：2012-12-11T23:28:56.530
> 
> 标签：node.js, nginx, favicon, cache-control, expires-header

我的网站在 node.js 上运行，我正在使用 Nginx 从无 cookie 域中提供静态文件。对于这些文件，我设置了 Nginx 来设置过期标头。但是，它似乎不适用于我的网站图标。

我的 Nginx*默认*配置文件：

```
# static content
server {
        server_name static.domain.com;
        root /my/website/lives/here/public;

        location ~*  \.(jpg|jpeg|png|gif|ico|css|js)$ {
            expires 365d;
        }
} 
```

Ico 在*mime.types*中有一个 minetype ：

```
image/x-icon    ico; 
```

显示没有缓存控制或过期的服务响应标头：

```
Accept-Ranges:bytes
Connection:keep-alive
Content-Length:32988
Content-Type:image/x-icon
Date:Tue, 11 Dec 2012 23:20:19 GMT
Last-Modified:Sat, 08 Dec 2012 11:51:28 GMT
Server:nginx/1.1.19 
```

这些是具有缓存控制的随机图像的响应，并且正如您所期望的那样过期：

```
Cache-Control:max-age=31536000
Connection:keep-alive
Date:Tue, 11 Dec 2012 23:24:00 GMT
Expires:Wed, 11 Dec 2013 23:24:00 GMT
Last-Modified:Tue, 11 Dec 2012 23:04:24 GMT
Server:nginx/1.1.19 
```

我检查了是否从静态域 (static.domain.com/favicon.ico) 而非网站文档根 (domain.com/favicon.ico) 提供了 favicon。有谁知道出了什么问题或我该如何调试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T00:54:55.953

显然有另一行匹配 favicon，隐藏在包含文件中，为了简单起见，我在问题中省略了。

```
location = /favicon.ico {
    log_not_found   off;
    access_log  off;
} 
```

删除这个（因为这个网站上有网站图标）解决了我的问题:-)

# eclipse-plugin - 无法通过 Eclipse 插件启动 Glassfish (ConnectException)

> ID：13830256
> 
> 赞同：0
> 
> 时间：2012-12-11T23:29:02.753
> 
> 标签：eclipse-plugin, glassfish-3

[在 Windows7 64 位系统上，我有 Eclipse Juno Service Release 1 并直接从http://dlc.sun.com.edgesuite.net/glassfish/eclipse/juno/](http://dlc.sun.com.edgesuite.net/glassfish/eclipse/juno/)安装了 Glassfish 插件。

我还在我的机器上安装了 Glassfish 3.1.2.2 的开源版本（通过 zip 文件）。

我已经为我安装的 Glassfish 版本以及 Glassfish 3.1.2.2 的嵌入式版本创建了服务器运行时环境。我在 Eclipse 中为每个运行时环境创建了一个服务器。

当我尝试从 Eclispe 启动它们中的任何一个时，我得到了这个错误（这不是很有帮助）：

```
!ENTRY oracle.eclipse.tools.glassfish 4 1 2012-12-11 16:20:16.182
!MESSAGE GlassFish: error 
!STACK 0
    java.net.ConnectException: Connection refused: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
        at java.net.PlainSocketImpl.doConnect(Unknown Source)
        at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
        at java.net.PlainSocketImpl.connect(Unknown Source)
        at java.net.SocksSocketImpl.connect(Unknown Source)
        at java.net.Socket.connect(Unknown Source)
        at java.net.Socket.connect(Unknown Source)
        at sun.net.NetworkClient.doConnect(Unknown Source)
        at sun.net.www.http.HttpClient.openServer(Unknown Source)
        at sun.net.www.http.HttpClient.openServer(Unknown Source)
        at sun.net.www.http.HttpClient.<init>(Unknown Source)
        at sun.net.www.http.HttpClient.New(Unknown Source)
        at sun.net.www.http.HttpClient.New(Unknown Source)
        at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(Unknown Source)
        at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)
        at sun.net.www.protocol.http.HttpURLConnection.connect(Unknown Source)
        at com.sun.enterprise.jst.server.sunappsrv.commands.CommandRunner.call(CommandRunner.java:607)
        at com.sun.enterprise.jst.server.sunappsrv.commands.CommandRunner.call(CommandRunner.java:1)
        at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
        at java.util.concurrent.FutureTask.run(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)

!ENTRY oracle.eclipse.tools.glassfish 4 150 2012-12-11 16:20:16.189
!MESSAGE The Eclipse plugin cannot communicate with the GlassFish server....
!STACK 0
    java.lang.RuntimeException: The Eclipse plugin cannot communicate with the GlassFish server.Please, check for other software blocking or using this port, or firewall configuration, or VPN setup which might block some ports...
        at com.sun.enterprise.jst.server.sunappsrv.SunAppServerLaunch.launch(SunAppServerLaunch.java:155)
        at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:855)
        at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:704)
        at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:697)
        at org.eclipse.wst.server.core.internal.Server.startImpl2(Server.java:3484)
        at org.eclipse.wst.server.core.internal.Server.startImpl(Server.java:3420)
        at org.eclipse.wst.server.core.internal.Server$StartJob.run(Server.java:367)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53) 
```

我可以通过命令行脚本启动本地安装的 Glassfish（即不是嵌入式的）。我已经三次检查没有与 4848、8080 和 8181 的端口冲突。我的防火墙当前已关闭（当我在公司域中时）。

谁能建议我为什么不能通过 Eclipse 插件启动 Glassfish？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:25:39.307

我做了两件事，所以我不知道这两件事中哪一个为我解决了这个问题。

1.  更改 domain.xml 中的端口
2.  删除域文件夹中的 osgi-cache 文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-22T10:14:30.627

转到“asadmin”后，您应该能够使用以下命令启动 Glassfish 服务器上的任何域，并且只要您启动或停止 Glassfish 服务器的任何域（默认域为 domain1） ，**相同的将反映在 ECLIPSE中**

### 应在 Internet 选项>连接>局域网设置选项卡中检查“绕过本地地址的代理服务器”。

这将起作用

# python - Google Groups Provisioning：我在这里缺少什么？

> ID：13830258
> 
> 赞同：1
> 
> 时间：2012-12-11T23:29:17.313
> 
> 标签：python, google-app-engine, google-api, google-apps, google-provisioning-api

我正在尝试使用配置 API 将成员添加到 Google 组。我已经在 python 中运行了这个，但没有成功。我觉得我在这里遗漏了一些明显的东西......有人吗？

```
import gdata.apps.groups.client
groupClient = gdata.apps.groups.client.GroupsProvisioningClient(domain='https://apps-apis.google.com/a/feeds/group/2.0/testtgroup123456')
groupClient.ClientLogin(email='myEmail@email.com', password='myPassword', source='apps')
groupClient.AddMemberToGroup('testtgroup123456', 'emailtoadd@email.com') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T00:38:18.310

Google 最近为标准/免费帐户添加了对 Provisioning API 的支持。GroupsProvisioningClient() 的域参数应该是您的实际域：

```
import gdata.apps.groups.client
groupClient = gdata.apps.groups.client.GroupsProvisioningClient(domain='email.com')
groupClient.ClientLogin(email='myEmail@email.com', password='myPassword', source='apps')
groupClient.AddMemberToGroup('testtgroup123456', 'emailtoadd@email.com') 
```

我已确认[GAM](http://ditoweb.com/dito-gam)允许我使用相同的 API 为我的 Google Apps 标准域配置组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T23:35:19.433

Google 配置仅适用于 Google 企业和教育帐户。

# rpm - rpmbuild %clean 阶段不删除文件

> ID：13830262
> 
> 赞同：11
> 
> 时间：2012-12-11T23:29:36.127
> 
> 标签：rpm, rpmbuild

我在构建日志中得到以下信息：

```
Executing(%clean): /bin/sh -e /var/tmp/rpm-tmp.CgE2Qn
+ umask 022
+ cd /export/home/svn_checkouts/*snip*/Output/release/bin/packaging/BUILD
+ /bin/rm -rf /export/home/svn_checkouts/*snip*/Output/release/bin
+ exit 0 
```

我想避免`rpmbuild`删除构建目录中的所有文件，因为在构建 RPM 后我需要它们来做其他事情。我可以覆盖这种行为吗？

我读到某些版本的 RPM 支持一个`--noclean`论点，但不幸的是我们的版本不支持。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T23:39:06.733

原来我只需要`%clean`在规范文件中提供我自己的指令并将其留空以覆盖默认值。出于某种原因，我没想到它会起作用。;)

定义可以对*%Clean%*`--noclean`阶段进行条件化，从而可以实现相同的效果。

```
%Clean
%if "%{noclean}" == ""
   rm -rf $RPM_BUILD_ROOT
%endif 
```

调用`rpmbuild --define 'noclean 1'`以禁用清洁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-11T14:24:08.793

对于**从`spec`-file**构建，`rpmbuild`可以`-bi`选择。它保持`$RPM_BUILD_ROOT`原样；它没有`%clean`。

> ```
>  -bi     build through %install (%prep, %build, then install) from <specfile> 
> ```

( `rpmbuild --help`)

* * *

对于**从`SRPM`**（源 RPM 包；`yumdownloader`将为您提供这些）构建，还有一个 `--recompile`选项：

> ```
>  --rebuild    build binary package from <source package>
>  --recompile  build through %install (%prep, %build, then install) from <source package> 
> ```

* * *

最后，有一个`--noclean`选项`rpmbuild`- 但在我的情况下 ( `RPM version 4.11.3`) 它不起作用。

# c++ - C++ Visual Studio .exe 消失

> ID：13830264
> 
> 赞同：0
> 
> 时间：2012-12-11T23:29:38.313
> 
> 标签：c++, visual-studio-2010

我还在学习 c++，我可能做了一些愚蠢的事情；）

我的 Visual Studio 项目构建时没有错误或警告（在调试模式下），但我无法运行它。当我按下 F5 时，会弹出一条无用的错误消息：“无法启动程序：'Path\foo.exe'”。原来build文件夹里根本就没有exe文件。

我指出，当我构建项目时，exe 会出现一小段时间，然后再次消失。

我的这部分代码导致了所描述的问题：

```
void foo::start(){
    std::vector<variation> variations;
    ...
} 
```

继承人的变化结构：

```
struct variation {
     int rest;
}; 
```

我究竟做错了什么？

编辑：进程监视器显示最有可能的 explorer.exe 删除了文件（找不到 exakt 条目，但它是构建后唯一运行的进程）

在干净的解决方案和新版本之后，有时exe永久位于目录中，当我双击它时会出现以下错误：“'path\name.exe'不是有效的win32应用程序”这是否意味着我的代码可以执行某些操作按 c++ 标准但不是按 Windows？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T00:51:01.280

我很确定这是我要写的答案。但要感谢评论中在我之前的 Jerry Coffin 和 Hans Passant！

防病毒软件。将其关闭或将您的 Visual Studio 项目添加到其排除的目录中。

我不知道您系统的详细信息，但许多 AV 程序非常怀疑与已知校验和不匹配的可执行文件。添加一些与病毒签名模式匹配的代码，它会吓坏、删除或隔离您的程序。

虽然如果是这种情况，我很惊讶您没有收到警告消息、闪烁的托盘图标或其他形式的警报。如果您的系统是由公司 IT 团队预装的，他们的管理员可能会从您的系统收到警报，而本地警报会关闭。

# django - Django：如何使 URL 的一部分成为可选的

> ID：13830268
> 
> 赞同：2
> 
> 时间：2012-12-11T23:29:58.953
> 
> 标签：django, django-urls

我有一个 url，我想在其中将状态令牌设为可选。如果 url 中没有提供状态标记，我会在 view 方法参数中给出一个默认值。我尝试用这个替换令牌，`(?:/(?P<status>\d+))?$`但似乎效果不佳。谢谢

```
url(r'^(?P<status>\d+)/$', frequest_list, name="frequest_list"),

def request_list(request, status=1):
 ...
 ... 
```

更新：这是我尝试的模式：

```
url(r'^(?:/(?P<status>\d+))?$', frequest_list, name="frequest_list"), 
```

所以，如果我尝试`localhost/features/`效果很好

但如果我这样做`localhost/features/1/`会失败

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T00:08:54.587

只需创建第二个调用相同视图的 url 条目：

```
url(r'^features/$', frequest_list, name="frequest_list_default"),
url(r'^features/(?P<status>\d+)/$', frequest_list, name="frequest_list"), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T00:45:47.073

我在我的一些项目中使用单个 url 可选捕获，它们工作正常。您可能需要调整模式以使尾随`/`可选。我认为这就是导致您的网址不匹配的原因。Django 确实有一个“APPEND_SLASH”设置布尔值，如果它们缺少它并且不匹配，它将添加到您的 url 中：

```
url(r'^features(?:/(?P<status>\d+))?/?$', frequest_list, name="frequest_list") 
```

可选的`/`也可以这样写：

```
url(r'^features/?(?:(?P<status>\d+)/?)?$', frequest_list, name="frequest_list") 
```

# javascript - JQuery AJAX 同步请求行为

> ID：13830275
> 
> 赞同：0
> 
> 时间：2012-12-11T23:30:42.670
> 
> 标签：javascript, jquery, ajax

我有一个试图同步调用的 ajax 地址验证函数，如下所示：

```
function validate_address(address, city, state, zip) {
    return $.ajax({
        type: 'POST',
        url: '/ajax/address',
        data: {
            address: address,
            city: city,
            state: state,
            zip: zip
        },
        dataType: "json",
        cache: false,
        async: false
    }).responseText;
} 
```

在调用函数之前，我会显示一个旋转的 gif 并将其隐藏在函数之后：

```
$('#spinner').show();
var res = validate_address(address, city, state, zip);
$('#spinner').hide(); 
```

问题是`show()`和`hide()`函数都在 ajax 调用完成后被调用。

我通过在服务器端的 ajax 调用中添加 5 秒延迟来验证这一点。`show()`并且`hide()`在我触发此序列后 5 秒后立即被调用。

在你打电话给我之前，我知道不鼓励同步请求。在这种情况下，我必须使用同步调用。我只是在尝试这里发生了什么以及如何解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T23:36:17.600

您已经从 ajax 函数返回了 deferred，所以只需使用`done()`：

```
$('#spinner').show();
validate_address(address, city, state, zip).done(function(data) {
    res = data;
    $('#spinner').hide();
}); 
```

这甚至可以与异步请求一起使用？

如果微调器的显示仍然很慢，并且您想进一步降低用户体验，您可以随时使用回调：

```
$('#spinner').show(1000, function() {
    validate_address(address, city, state, zip).done(function(data) {
        res = data;
        $('#spinner').hide();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T23:44:21.027

关于`ajaxStart`和`ajaxEnd`

看看这篇文章：[如何使用 jQuery 创建“请稍候，正在加载...”动画？](https://stackoverflow.com/questions/1964839/jquery-please-wait-loading-animation)

```
$("body").on({
    // When ajaxStart is fired, add 'loading' to body class
    ajaxStart: function() { 
        $(this).addClass("loading");  // or do what you need here 
    },
    // When ajaxStop is fired, rmeove 'loading' from body class
    ajaxStop: function() { 
        $(this).removeClass("loading"); // or do what you need here 
    }    
}); 
```

# php - 如何将多个值附加到 html 表单中的单个参数？

> ID：13830276
> 
> 赞同：9
> 
> 时间：2012-12-11T23:30:43.377
> 
> 标签：php, jquery, html

假设我有以下表格：

```
<form action="process.php">
<input type="checkbox" name="option1" value="oats"> Oats
<input type="checkbox" name="option2" value="beans"> Beans
<input type="hidden" name="parameter" value="a"/>
<input type="submit" value="Submit"/>
</form> 
```

通常情况下，点击 URL 后，浏览器会重定向到：

```
process.php?option1=oats&option2=beans&parameter=a 
```

如何使单击提交时所有复选框最终成为“参数”的一部分，但用逗号分隔？换句话说，它将是：

```
process.php?parameter=a,oats,beans 
```

如果没有 html 解决方案，最好使用最少的 javascript/jquery/html 解决方案。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-11T23:33:38.457

如果您想在一个参数中包含多个值，则必须将其命名为`parameter[]`

费：

```
<form action="process.php">
<input type="checkbox" name="parameter[]" value="oats"> Oats
<input type="checkbox" name="parameter[]" value="beans"> Beans
<input type="hidden" name="parameter[]" value="a"/>
<input type="submit" value="Submit"/>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-09T13:31:02.193

有一种非常有用的方法可用于动态数据分组。

```
<form action="file.php" method="post">

<?php for ( $i = 0; $i < count( $something ); $++ ) { ?>
    <input type="checkbox" name="<?php $something[$i]; ?>[]" value="user_id"> Oats
    <input type="checkbox" name="<?php $something[$i]; ?>[]" value="user_name"> Beans
<?php } ?>
<input type="submit" value="Submit"/>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T00:02:58.233

或多或少的想法是：第一种形式，1个隐藏的输入将捕获第二种和无效形式的所有值

```
<script type="text/javascript">
function myfunc(){
    $('#void input').each(function(id,elem){
         b = $("#res").val();
         if(b.length > 0){
            $("#res").val( b + ',' + $(this).val() );
        } else {
            $("#res").val( $(this).val() );
        }

    });
        alert("VAL "+$("#res").val());
    $("#real").submit();

return false;
}

</script>

<form id="real" action="process.php">
<input id="res" type="hidden" name="parameter" value=""/>
</form>

<form id="void">
<input type="checkbox" name="option1" value="oats"> Oats
<input type="checkbox" name="option2" value="beans"> Beans
<input type="hidden" name="parameter" value="a"/>
<input type="submit" value="Submit" onClick="javascript:myfunc()"/>
</form> 
```

添加一些修复，提交正确的表格。在 jsfiddle 上测试：

[JsFiddel“工作”示例](http://jsfiddle.net/ivan/eYmCp/20/)

**添加单一表格版本**

您必须知道该字段的名称，并忽略答案中的其他参数

```
<script type="text/javascript">
function myfunc(){
    // can use more selector
    $('#real input').each(function(id,elem){
        // append the data to this field so no need to process it
        if(this.id == 'res'){
            return;                
        }
        // here I concat the values 
        b = $("#res").val();
        if(b.length > 0){
            $("#res").val( b + ',' + $(this).val() );
        } else {
            $("#res").val( $(this).val() );
        }

    });
    alert("VAL "+$("#res").val());  // remove me
    $("#real").submit();

    return false;
}

</script>

<form id='real' method='POST' action="#">
<input type="checkbox" name="option1" value="oats"> Oats
<input type="checkbox" name="option2" value="beans"> Beans
<input id="res" type="hidden" name="parameter" value="a"/>
<input type="submit" value="Submit" onClick="javascript:myfunc()"/>
</form>​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-21T02:01:51.630

我真的只对实际检查的复选框感兴趣 - 所以我`myfunc()`从其他示例构建，如下所示：

```
function myfunc(){
    $('#void input[type="checkbox"]').each(function(id,elem){
        if ( ! $(this).is(':checked') ) return;
        b = $("#res").val();
        if(b.length > 0){
            $("#res").val( b + ',' + $(this).val() );
        } else {
            $("#res").val( $(this).val() );
        }
    });
    var stuff = $("#res").val();
    if ( stuff.length < 1 ) {
        alert('Please select at least one');
    } else {
        $("#real").submit();
    }
} 
```

# scala - Scala 中的泛型类型推断

> ID：13830279
> 
> 赞同：9
> 
> 时间：2012-12-11T23:31:16.053
> 
> 标签：scala, generics, type-inference

我编写了以下代码，这实际上是 scala 中的一个愚蠢的合并排序实现：

```
import scala.collection.immutable.List

object MergeSort {
    def sort[T,E]( comparator: (E,E) => Int ) (l: List[T]): List[T] = {
        def merge[T](first: List[T], second: List[T]): List[T] = (first, second) match {
                case (_, List()) => first
                case (List(), _) => second
                case (f::restFirst, s::restSecond) if comparator(f.asInstanceOf[E],s.asInstanceOf[E]) < 0 => f :: merge(restFirst, second)
                case (f::restFirst, s::restSecond) => s :: merge(first, restSecond)
            }

        l match {
            case List() => return l
            case List(x) => return l
            case _ => {
                val (first, second) = l.splitAt( l.length / 2 )
                merge( sort(comparator)(first), sort(comparator)(second) )
            }
        }
    }
} 
```

这不是以下更优雅的解决方案：

```
import scala.collection.immutable.List

object MergeSort {
    def sort[T]( comparator: (T,T) => Int ) (l: List[T]): List[T] = {
        def merge[T](first: List[T], second: List[T]): List[T] = (first, second) match {
                case (_, List()) => first
                case (List(), _) => second
                case (f::restFirst, s::restSecond) if comparator(f,s) < 0 => f :: merge(restFirst, second)
                case (f::restFirst, s::restSecond) => s :: merge(first, restSecond)
            }

        l match {
            case List() => return l
            case List(x) => return l
            case _ => {
                val (first, second) = l.splitAt( l.length / 2 )
                merge( sort(comparator)(first), sort(comparator)(second) )
            }
        }
    }
} 
```

哪个不编译，给我以下错误消息：

```
MergeSort.scala:10: type mismatch;
[error]  found   : f.type (with underlying type T)
[error]  required: T
[error]  case (f::restFirst, s::restSecond) if comparator(f,s) < 0 => f :: merge(restFirst, second) 
```

为什么需要显式强制转换，因为基础类型是 T ？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-11T23:42:31.387

这是我能想到的最烦人的 Scala 陷阱之一（可能是在与运算符的分号推断相关的问题之后）。你距离正确答案只有三个字符。

问题是类型参数 on `merge`。它引入了一个新`T`的阴影`T`类型参数`sort`。因此，编译器不知道`comparator`可以将其应用于该 new 的实例`T`。您可以通过演员来控制它，这就是您的第一个版本有效的原因，但否则它会将其`T`视为一张白纸。

只要写`def merge(first: List[T], ...`，你会没事的。

# excel - Excel宏：检查列时如何忽略标题行

> ID：13830280
> 
> 赞同：0
> 
> 时间：2012-12-11T23:31:18.940
> 
> 标签：excel, vba

此`HideEmptyColumns()`宏隐藏所有没有任何数据的列。如何修改它以使其忽略标题行（第 1 行）？

```
Sub HideEmptyColumns()
  Dim Col As Range
  For Each Col In ActiveSheet.UsedRange.Columns
     Col.EntireColumn.Hidden = RangeIsEmpty(Col)
  Next Col
End Sub

Function RangeIsEmpty(R As Range) As Boolean
  Dim Cell As Range
  RangeIsEmpty = True
  For Each Cell In R.Cells
     If Cell.Value <> "" Then
        RangeIsEmpty = False
        Exit For
     End If
  Next Cell
End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T23:40:12.053

只需检查一下它在哪一行

```
Sub HideEmptyColumns()
  Dim Col As Range
  For Each Col In ActiveSheet.UsedRange.Columns
     Col.EntireColumn.Hidden = RangeIsEmpty(Col)
  Next Col
End Sub

Function RangeIsEmpty(R As Range) As Boolean
  Dim Cell As Range
  RangeIsEmpty = True
  For Each Cell In R.Cells
     'are we not on the first row (header row)
     If Cell.Row <> 1 Then
        If Cell.Value <> "" Then
           RangeIsEmpty = False
           Exit For
        End If
     End If
  Next Cell
End Function 
```

# php - 写入 php://stderr

> ID：13830285
> 
> 赞同：8
> 
> 时间：2012-12-11T23:31:46.243
> 
> 标签：php, windows, xampp, stderr

我正在尝试使用 php://stderr 来编写日志以使其正常工作。我正在使用 Slim 框架，该框架`@fopen('php://stderr', 'w')`用于日志记录，并且真的希望它能够正常工作。

以下测试用例应该有效，但只有第一个有效：

```
// 1\. error_log - works fine
error_log("Written through the error_log function", 0);

// 2\. PHP wrapper, ie php://stderr - does not work
$stderr = fopen( 'php://stderr', 'w' );
fwrite($stderr, "Written through the PHP error stream" );
fclose($stderr);

// 3\. PHP wrapper also, different syntax, just to be safe - no effect either
file_put_contents( "php://stderr","Hello World" );

// 4\. PHP wrapper, this time using this elusive constant referred to in the manual - result: "Notice: Use of undefined constant STDERR - assumed 'STDERR' ", ie: failed also!
file_put_contents( STDERR, "Hello World" ); 
```

我一直在浏览 PHP 手册和谷歌搜索，但没有太多帮助。

特别是，[包装器的 PHP 手册中](http://php.net/manual/en/wrappers.php.php)的以下引用令人困惑：

> 建议您简单地使用常量 STDIN、STDOUT 和 STDERR，而不是使用这些 [引用 php://stdin、php://stdout 和 php://stderr] 包装器手动打开流。”

...鉴于上面未定义的常量通知。（我怀疑这些常量可能仅与 PHP CLI 一起使用？-但我引用的页面没有说明。）

我一直想知道这是否可能是 Windows 的事情，因为我正在使用 PHP 5.3.8 运行 XAMPP 进行开发，但鉴于 Google 上缺乏主题和 PHP.net 上的评论，我不再那么确定了。我现在无法访问我的生产服务器日志以供我测试。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T00:51:04.883

没关系，明白了。我不太明白和之间的`php://stderr`区别`error_log`：

`error_log`写入 PHP 错误日志（例如：D:\xampp\php\logs\php_error_log）

`php://stderr`写入服务器/Apache 错误日志（例如：D:\xampp\apache\logs\error.log）

希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-05T21:16:53.703

如果您只是运行 PHP 内置 Web 服务器（自 PHP 5.4.0 起），`php://stderr`则将输出到启动 PHP 内置 Web 服务器的控制台屏幕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-16T16:23:48.200

你不能`file_put_contents`进入 STDERR；STDERR 是一个流资源（已经打开）。所以你只能`fwrite`到STDERR。请参阅[https://www.php.net/manual/en/features.commandline.io-streams.php](https://www.php.net/manual/en/features.commandline.io-streams.php)

# tfs - 带有 FTP 发布（部署）的 TFS 服务 2012 构建过程模板（XAML 工作流）

> ID：13830288
> 
> 赞同：3
> 
> 时间：2012-12-11T23:31:50.780
> 
> 标签：tfs, ftp, tfsbuild, web-deployment, azure-devops

[我有托管在TFS Cloud](http://tfs.visualstudio.com/)的网站项目。我在 Godaddy 有托管帐户，它允许我仅通过 FTP 部署站点。我在 Visual Studio 2012 中创建发布配置文件，并且可以在 Visual Studio 中成功执行发布到 FTP。

**问题**：这个任务不能使用任何标准的 TFS 构建模板和它的标准工作流活动来完成，即使它应该是人们使用 TFS 构建服务器做的一件微不足道的事情。MSBuild 上没有现成的“复制粘贴”解决方案 (wpp.targets)：“C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web\Deploy\Microsoft.Web.Publishing. Deploy.FTP.targets”明确表示不支持通过命令行，应该使用VS。

**问题**：是否有该任务的任何已实施解决方案，我只需单击几下即可将其复制粘贴到我的团队项目中？

我希望在网络上看到很多关于它的文章，但是我没有找到任何简单的现有解决方案。像[这样](http://www.diaryofaninja.com/blog/2010/09/21/continuous-integration-tip-1-ndash-ftp-deployment)的文章需要我安装一些第 3 方软件（这在 Godaddy 等最流行的主机中不是一个选项），并且不清楚如何将它与 TFS 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T15:54:13.747

在默认的构建模板中，转到流程部分并选择 Msbuild Arguments 并提供发布配置文件。

MSBuild 参数：/p:DebugSymbols=false;DebugType=None;DeployOnBuild=true; **PublishProfile=YourProfileName**

构建成功后，将部署到 ftp 位置。

这个链接可以帮助你更多：[http ://www.hanselman.com/blog/TinyHappyFeatures3PublishingImprovementsChainedConfigTransformsAndDeployingASPNETAppsFromTheCommandLine.aspx](http://www.hanselman.com/blog/TinyHappyFeatures3PublishingImprovementsChainedConfigTransformsAndDeployingASPNETAppsFromTheCommandLine.aspx)

# ember.js - 如何将变量传递给车把助手？

> ID：13830290
> 
> 赞同：1
> 
> 时间：2012-12-11T23:31:55.750
> 
> 标签：ember.js, handlebars.js

我正在尝试在车把中实现一个简单的“if-equal”助手，如下所示：

```
Ember.Handlebars.registerHelper('ifeq', function(val1, val2, options) {
    return (val1 == val2) ? options.fn(this) : '';
}); 
```

并像这样使用它（假设 foo 变量设置为“bar”）：

```
{{#ifequal foo "bar"}} show something {{/ifequal}} 
```

问题是，当 val1 被传入时，它是作为字符串“foo”传入的，而不是 foo 变量的实际值。在我的调试器中，我可以验证 this[val1] 实际上设置为 foo 变量的预期值。

Ember 是否会以某种方式改变行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T06:55:29.207

`Ember.Handlebars.registerHelper`只是传递字符串。有一个`registerBoundHelper`正在处理，但在你的情况下这应该工作。

```
Ember.Handlebars.registerHelper('ifeq', function(val1, val2, options) {
   return (this.get(val1) == val2) ? options.fn(this) : '';
}); 
```

# haskell - 如何获得离线 Haskell 调试跟踪？

> ID：13830294
> 
> 赞同：3
> 
> 时间：2012-12-11T23:32:28.703
> 
> 标签：haskell, ghc, ghci

[在http://www.haskell.org/haskellwiki/Debugging](http://www.haskell.org/haskellwiki/Debugging)的 Haskell 文档中， 它提到了 Hat 进行离线调试跟踪，但该页面是在线的。我通过谷歌找到了它，但它似乎已经过时了；进行离线 Haskell 跟踪的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:43:30.910

帽子并没有过时——olaf chitil 恢复了它并正在积极维护它：[http ://olafchitil.github.com/hat/](http://olafchitil.github.com/hat/)

hackage 的最新版本经过测试可以使用 ghc 7.6 构建。

然而，它仍然只适用于 Haskell 98，并带有一些扩展。因此，使用更高级 GHC 扩展的程序（尤其是关于花哨的类型技巧）将无法使用它。据我所知，没有任何类似的东西`hat`被扩展来处理更广泛的 Haskell 扩展。

# apache - Apache .htaccess - DATA_PATH 导致错误

> ID：13830298
> 
> 赞同：0
> 
> 时间：2012-12-11T23:32:57.443
> 
> 标签：apache, .htaccess

我有`.htaccess`以下代码：

```
SetEnv BASE_URL http://localhost:86/extranet/
SetEnv LOG_PATH C:\wamp\www\extranet\logs\
SetEnv SERVER_ROOT C:\wamp\www\
SetEnv SITE_ROOT C:\wamp\www\extranet\
SetEnv DATA_PATH C:\wamp\www\extranet\data\ 
```

DATA_PATH 在 Apache 中导致此错误

```
SetEnv takes 1-2 arguments, an environment variable name and optional value to pass to CGI., referer: http://localhost:86/ 
```

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:12:47.467

事实证明，这个问题比以前想象的要复杂。首先是因为它在我使用的 Windows 上，`backslashes`但这是错误的。我也在`<IfModule mod_#Rewrite.c>`文件中。这导致了一些冲突，所以我删除了这些标签。没有这些`Rewrite`标签仍然可以工作。

# javascript - ASP.Net 文本框 css 类在页面加载时更改为“文本框”

> ID：13830299
> 
> 赞同：1
> 
> 时间：2012-12-11T23:33:09.103
> 
> 标签：javascript, asp.net, css

将我的 ASP.Net 代码从我的开发 VM 移动到服务器时，我遇到了一个奇怪的问题。

当页面在 VM 上加载时，我在 Master 中有一些 javascript，它将日期时间选择器附加到文本框

```
function loadAnyTimeDT() {
        $('.AnyTimeDT').each(function () {
            $(this).AnyTime_picker(
            {
                askEra: false,
                askSecond: false,
                format: "%d-%b-%y %H:%i"
            });
        });
        $('.AnyTimeD').each(function () {
            $(this).AnyTime_picker(
            {
                askEra: false,
                askSecond: false,
                format: "%d-%b-%y"
            });
        });
        $('.AnyTimeT').each(function () {
            $(this).AnyTime_picker(
            {
                askEra: false,
                askSecond: false,
                format: "%H:%i"
            });
        });          
    }

    $(document).ready(function () {
        loadAnyTimeDT();
    }); 
```

这工作得很好，我对结果很满意。将代码移到服务器上进行部署，突然之间没有日期时间选择器在工作。

在检查了网页的页面源代码后，我注意到 css 类被交换到服务器上的“文本框”，但不在 vm 中。这是在页面加载不在代码中之后发生的。

这是gridview中的一个文本框的示例
`<EditItemTemplate> <asp:TextBox ID="txtbTimeStartTime" CssClass="AnyTimeT" runat="Server" Text="<%# Eval("StartTime") %>"></asp:TextBox> </EditItemTemplate>`

页面加载后，这是我在源代码中看到的
`<input name="ctl00$ContentPlaceHolder1$gvTime$ctl03$txtbTimeStartTime" type="text" id="ContentPlaceHolder1_gvTime_txtbTimeStartTime" class="textbox">`

这使得我很难附加我的日期时间选择器，因为我不能再按班级选择正确的选择器了。

关于强制 css 类保持在 VM 上的任何想法？

# c# - C# 中的范围保护语句

> ID：13830300
> 
> 赞同：4
> 
> 时间：2012-12-11T23:33:13.413
> 
> 标签：c#, .net, exception-handling, exception-safe, scopeguard

Resource Acquisition Is Initialization (RAII) 习语和 try-finally 语句构成了编写[异常安全](http://dlang.org/exception-safe.html)编程的传统方法的支柱。

我的问题是：C# 上是否有类似[Scope Guard Statement的东西？](http://dlang.org/statement.html#ScopeGuardStatement)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T23:43:05.663

没有直接翻译内置于 C# 或 BCL 中的范围保护习语，但[Alex Rønne Petersen 写了一篇博客文章](http://xtzgzorex.wordpress.com/2010/06/25/c-scope-guard-updates/)，其中提供了一个解决方案，该解决方案利用[`IDispoable`接口](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)和[C# 的`using`语句](http://msdn.microsoft.com/en-us/library/yh598w02.aspx) 来执行与您正在寻找的类似的事情。

# python - 将 lxml 输出传递给 BeautifulSoup

> ID：13830303
> 
> 赞同：1
> 
> 时间：2012-12-11T23:33:18.830
> 
> 标签：python, beautifulsoup, lxml

我的离线代码工作正常，但我无法通过 lxml 将网页从 urllib 传递到 BeautifulSoup。我使用 urllib 进行基本身份验证，然后使用 lxml 进行解析（它对我们需要抓取的特定页面给出了很好的结果），然后是 BeautifulSoup。

```
#! /usr/bin/python
import urllib.request 
import urllib.error 
from io import StringIO
from bs4 import BeautifulSoup 
from lxml import etree 
from lxml import html 

file = open("sample.html")
doc = file.read()
parser = etree.HTMLParser()
html = etree.parse(StringIO(doc), parser)
result = etree.tostring(html.getroot(), pretty_print=True, method="html")
soup = BeautifulSoup(result)
# working perfectly 
```

通过该工作，我尝试通过 urllib 为其提供一个页面：

```
# attempt 1
page = urllib.request.urlopen(req)
doc = page.read()
# print (doc)
parser = etree.HTMLParser()
html = etree.parse(StringIO(doc), parser)
# TypeError: initial_value must be str or None, not bytes 
```

试图处理错误消息，我试过：

```
# attempt 2
html = etree.parse(bytes.decode(doc), parser)
#OSError: Error reading file 
```

我不知道如何处理 OSError，所以我寻求另一种方法。我找到了使用 lxml.html 而不是 lxml.etree 的建议，所以下一次尝试是：

```
attempt 3
page = urllib.request.urlopen(req)
doc = page.read()
# print (doc)
html = html.document_fromstring(doc)
print (html)
# <Element html at 0x140c7e0>
soup = BeautifulSoup(html) # also tried (html, "lxml")
# TypeError: expected string or buffer 
```

这显然给出了某种结构，但是如何将它传递给 BeautifulSoup？我的问题是双重的：如何将页面从 urllib 传递到 lxml.etree（如 attampt 1 中，最接近我的工作代码）？或者，如何将 lxml.html 结构传递给 BeautifulSoup（如上）？我知道两者都围绕数据类型，但不知道如何处理它们。

python 3.3，lxml 3.0.1，BeautifulSoup 4。我是 python 新手。感谢互联网提供代码片段和示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T23:34:32.007

BeautifulSoup 可以[`lxml`直接使用解析器](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#specifying-the-parser-to-use)，无需赘述。

```
BeautifulSoup(doc, 'lxml') 
```

# forms - Yii，使用 2 个模型形成 -> 跳过一个验证

> ID：13830304
> 
> 赞同：1
> 
> 时间：2012-12-11T23:33:37.500
> 
> 标签：forms, yii, validation

我有一种用于不同型号的表格。我希望能够创建一个新人员并最终创建一个新用户，以便为这个人提供一个帐户。一个人不需要与用户相关（可能只是一个用于统计的人或类似的东西）。我的表单中有一个复选框“如果要创建用户，请单击”，如果选中，我会显示表单的用户部分。

然后在控制器中，使用复选框值，我可以知道是否需要为 Person 和 User 或仅 Person 调用 performAjax()。

但我的问题是关于客户端验证。例如，如果我尝试在没有用户必填字段的情况下提交表单，则提交将中止，并且我会收到一些错误，例如“需要此字段”。

所以，我的问题是，如果我的用户模型的字段为空（复选框未选中，我们不想创建用户），我怎么能跳过它的验证。

欢迎任何帮助:)

对不起，我的英语不好。

祝你有美好的一天 ：）

迈克尔·S。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:43:42.540

When saving the model, set the first parameter on false to skip validation:

[$model->save(false)](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#save-detail)

# c# - 将项目升级到 .net 4.0.3 时添加服务参考菜单消失

> ID：13830308
> 
> 赞同：2
> 
> 时间：2012-12-11T23:34:14.627
> 
> 标签：c#, visual-studio-2010, service

使用 Visual Studio 2010。我有一个带有 WCF 服务引用的类库。该项目是净3.5。如果我右键单击 | 属性 | 并将目标框架更改为 .net 4.0，它会重新加载项目，服务引用文件夹仍然是灰色的，并且支持添加服务引用。但是当我选择 .net 4.0.3 并重新加载时，Service References 文件夹是 vanilla 并且不支持添加服务引用。我对项目文件进行了比较，唯一的区别是标签，它从 4.0 升级到了 4.0.3。

我通过将 ProjectTypeGuid 添加到项目文件中尝试了一些人推荐的方法，但它不起作用。我还删除了缓存和 suo 文件。仍然没有运气。

任何人都知道为什么将框架切换到 4.0.3 可能会削弱我查看服务引用文件夹的能力？

更新：有趣的是，如果我将项目定位到 4.0.3 客户端配置文件，服务引用仍然有效。只有 4.0.3 Full 正在提升我添加服务引用的能力。

# java - Java Collections.sort() 缺少 ConcurrentModificationException

> ID：13830309
> 
> 赞同：7
> 
> 时间：2012-12-11T23:34:20.380
> 
> 标签：java, sorting, collections

我偶然发现了这个奇怪的错误。似乎`Collections.sort()`不会以在迭代同一列表时能够检测并发修改的方式修改排序列表。示例代码：

```
 List<Integer> my_list = new ArrayList<Integer>();

    my_list.add(2);
    my_list.add(1);

    for (Integer num : my_list) {

        /*
         * print list
         */
        StringBuilder sb = new StringBuilder();
        for (Integer i : my_list)
            sb.append(i).append(",");
        System.out.println("List: " + sb.toString());

        /*
         * sort list
         */
        System.out.println("CurrentElement: " + num);
        Collections.sort(my_list);
    } 
```

输出

```
List: 2,1,
CurrentElement: 2
List: 1,2,
CurrentElement: 2 
```

人们会期望 a `ConcurrentModificationException`，但它没有被提出，并且代码可以正常工作，尽管它不应该。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T23:37:07.310

当您在迭代时不从集合中添加/删除元素时，为什么会抛出**ConcurrentModificationException ？**

请注意，只有在将新元素添加到您的集合中或在迭代时从您的集合中删除时，才会发生**ConcurrentModificationException 。**即，当您的集合在结构上被修改时。

> （结构修改是改变这个列表的大小，或者以其他方式扰乱它，使得正在进行的迭代可能会产生不正确的结果。）

sort 不会在结构上修改您的集合，它所做的只是修改顺序。下面的代码将抛出**ConcurrentModificationException**，因为它在迭代时将一个额外的元素添加到集合中。

```
for(Integer num : my_list) {
    my_list.add(12);
    } 
```

如果您查看[Collections](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Collections.java)类中排序方法的来源，它不会抛出**ConcurrentModificationException**。

> 这个实现将指定的列表转储到一个数组中，对数组进行排序，并遍历列表，从数组中的相应位置重置每个元素。这避免了由于尝试对链表进行排序而导致的 n2 log(n) 性能。

```
public static <T extends Comparable<? super T>> void sort(List<T> list) {
        Object[] a = list.toArray();
        Arrays.sort(a);
        ListIterator<T> i = list.listIterator();
        for (int j=0; j<a.length; j++) {
            i.next();
            i.set((T)a[j]);
        }
    } 
```

## 摘自[java Generics and Collections](http://shop.oreilly.com/product/9780596527754.do)一书：

> Java 2 集合的迭代器策略是快速失败，如第 11.1 节所述：每次访问支持集合时，它们都会检查它的结构修改（通常，这意味着元素已被添加或删除）集合）。如果他们检测到结构修改，他们会立即失败，抛出 ConcurrentModificationException 而不是继续尝试迭代修改后的集合，结果不可预测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T00:10:16.863

说到功能，我不明白为什么它不应该 throw `ConcurrentModificationException`。但是根据文档，迭代器在注意到结构修改时会抛出异常，并且结构修改[定义](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/AbstractList.html#modCount)为：

> 结构修改是那些改变列表大小的修改，或者以其他方式扰乱它，使得正在进行的迭代可能产生不正确的结果。

我认为有一个论点声称`sort`重新排列元素会导致迭代器产生错误的结果，但我没有检查定义的迭代器的正确结果是什么。

说到实现，很容易看出它为什么不这样做：请参阅[ArrayList](http://www.docjar.com/html/api/java/util/ArrayList.java.html)和[Collections](http://www.docjar.com/html/api/java/util/Collections.java.html)的源代码：

*   `ArrayList.modCount`随着所谓的结构修改而改变
*   `ListItr`方法复制其值`init`并检查其方法是否未更改
*   `Collections.sort`呼叫`ListItr.set`哪个呼叫`ArratList.set`。最后一种方法不会增加`modCount`

所以`ListItr.next()`看到相同`modCount`并且没有抛出异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-20T09:19:32.577

对于 Android，它取决于 API 版本。从 API 26 开始，`Collections#sort(List<T>, Comparator<? super T>)`实际上调用`List#sort(Comparator<? super E>)`. 因此，如果您 sort `ArrayList`，您可以获得**ConcurrentModificationException** ，具体取决于您是否在另一个线程中修改了列表。这是引发异常的源代码`java/util/ArrayList.java`：

```
public void sort(Comparator<? super E> c) {
    final int expectedModCount = modCount;
    Arrays.sort((E[]) elementData, 0, size, c);
    if (modCount != expectedModCount) {
        throw new ConcurrentModificationException();
    }
    modCount++;
} 
```

# sql - 使用子查询插入多行

> ID：13830312
> 
> 赞同：11
> 
> 时间：2012-12-11T23:34:35.047
> 
> 标签：sql, sql-server, database

这是查询：

```
INSERT INTO qualification_lookup (variation, correct_qualification)
SELECT (SELECT Qualification FROM student WHERE Qualification like 'A%') ,'A-Level' 
```

如果我尝试执行查询，这是我得到的错误。

> 消息 512，级别 16，状态 1，第 1 行子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。该语句已终止。

如果有人告诉我任何替代方法，我对 SQL 很陌生。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-11T23:37:48.137

```
INSERT INTO qualification_lookup (variation, correct_qualification) 
select Qualification,'A-Level' from student   where Qualification like 'A%' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T23:42:44.603

您需要考虑如何构建查询 - 考虑如果您只运行以下命令会得到什么：

```
 SELECT (select Qualification from student where Qualification like 'A%') ,'A-Level' 
```

您得到的确切错误将是我的猜测-您有许多资格列表试图与单个字符串匹配-“A-level”。

另一方面，这将正常工作

```
 select Qualification, 'A-Level' from student where Qualification like 'A%' 
```

`INSERT`在我看来， and语句的诀窍`UPDATE`是写一个`SELECT`语句，让你得到你需要的东西，然后把它包装起来

```
INSERT INTO qualification_lookup (variation, correct_qualification) select Qualification, 'A-Level' from student where Qualification like 'A%' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-11T23:37:37.077

```
 INSERT INTO qualification_lookup (variation, correct_qualification) 
select Qualification, 'A-Level' from student where Qualification like 'A%' 
```

是正确的语法

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-11T23:41:59.167

问题是这个子查询：

```
select Qualification from student where Qualification like 'A%' 
```

返回几行。这就是您收到错误消息 512 的原因

没必要用那个。

这已经足够了：

```
INSERT INTO qualification_lookup (variation, correct_qualification) 
select Qualification, 'A-Level' as correct_qualification
from student where Qualification like 'A%' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-06T14:36:27.073

```
declare @count int
declare @index int = 1
declare @currentQualificationId int = null

set @count = (select distinct count(QualificationId) from Qualification  from  where 
Qualification like 'A%')

set @currentQualificationId = (SELECT QualificationId from (select QualificationId , 
ROW_NUMBER() OVER (ORDER BY QualificationId) AS RowNumber from Qualification where 
Qualification like 'A%') as Qualification
where Qualification.RowNumber = @index) 

while (@index <= @count)
 begin

    INSERT INTO qualification_lookup (variation, correct_qualification) 
     values((select Qualification where QualificationId = 
     @currentQualificationId),'A-Level')

    set @index = @index + 1

     set @currentQualificationId = (SELECT QualificationId from (select 
     QualificationId , ROW_NUMBER() OVER (ORDER BY QualificationId) AS RowNumber from 
     Qualification where Qualification like 'A%') as Qualification
     where Qualification.RowNumber = @index) 
END 
```

# iphone - iOS 上的延迟执行技术

> ID：13830317
> 
> 赞同：2
> 
> 时间：2012-12-11T23:35:11.380
> 
> 标签：iphone, objective-c, ios, mkmapview, afnetworking

我是 iOS 新手，正在开发与地图交互的应用程序。

情况如下：

当 regionDidChangeAnimated: 委托调用时，我必须发送一些点数据的请求。我正在为此使用 AFNetworking。但是如果过度滚动地图会导致对服务器的大量请求。

在过度的地图滚动期间，每个“Touch Up”都会以“regionDidChangeAnimated”结束，所以如果可能的话，我想以懒惰的方式提出这个请求。

我对此的看法是：在 regionDidChangeAnimated 中，保持在特定时间（0.2 秒或半秒）内发送请求，如果没有更多 regionDidChangeAnimated 发生，则将请求发送到服务器。

请有任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T23:37:49.533

您可以使用[`NSTimer`](https://developer.apple.com/library/ios/#documentation/cocoa/reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html). 接到`regionDidChangeAnimated`电话时，将计时器设置为 0.2 秒。如果计时器到期，操作系统将调用您告诉计时器调用的任何内容，然后如果没有`regionDidChangeAnimated`发生其他调用，您可以向服务器发出请求。

# asp.net - 尝试通过 Linq to Entities 更新/插入多对多关系

> ID：13830319
> 
> 赞同：0
> 
> 时间：2012-12-11T23:35:26.810
> 
> 标签：asp.net, sql, linq-to-entities

我正在尝试对多对多关系执行组合添加/更新功能。数据库优先。拥有三个sql表：Personnel、Orders、PersonnelOrders。这是我的代码：

```
context.ContextOptions.LazyLoadingEnabled = true;

if (saveData.Rows.Count() > 1)
                {
                    foreach (var row in saveData.Rows)
                    {
                        if (row != null)
                        {
                            var Order_Array = row.Order_Array; //Array of order id's to     be used below.

                            var pData = new Personnel;
                            {
                                Personnel_Id = row.Key,
                                Personnel_Name = row.Name                                
                            };

                            if (pData.Personnel_Id == 0) //ADD
                            {
                                foreach (int Id in Order_Array)
                                {
                                    pData.Orders.Add(new Order() { Order_Id = Id });
                                }

                                context.Personnel.AddObject(cvData);

                                foreach (var j in pData.Orders)
                                {
                                    context.ObjectStateManager.ChangeObjectState(j, EntityState.Unchanged);
                                }  
                            }
                            else  //Doesn't error out, but does not work either:
                            {
                                pData.Orders.Clear();
                                foreach (int Id in Order_Array)
                                {
                                       pData.Orders.Add(new Order() { Order_Id = Id });
                                }
                                context.Personnel.Attach(cvData);
                                context.ObjectStateManager.ChangeObjectState(pData, EntityState.Modified);
                            }

                            context.SaveChanges();

                        }
                    }
                }

                return "ok"; 
```

编辑：我让 ADD 工作，现在我被困在**UPDATE**上。请参阅上面的修改后的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:58:06.007

这是我必须做的才能让它工作。它对我来说看起来很丑，我相信它可以改进，但它现在有效。

```
context.ContextOptions.LazyLoadingEnabled = true;  //not sure that this is necessary

if (saveData.Rows.Count() > 1)
{
    foreach (var row in saveData.Rows)
    {
        if (row != null)
        {
            var Order_Array = row.Order_Array;

        if (row.Key == 0) //ADD
        {
            var pData = new Personnel;
            {
                Personnel_Id = row.Key,  //probably not needed but it doesn't break it
                Personnel_Name = row.Name                                
            };

            foreach (int Id in Order_Array)
            {
                var j = context.Orders.Where(c => c.Order_Id == Id).SingleOrDefault();
                pData.Orders.Add(j);
            }

            context.Personnel.AddObject(pData);

            foreach (var j in pData.Orders)
            {
                context.ObjectStateManager.ChangeObjectState(j, EntityState.Unchanged); //so that you don't actually add more orders
            }
        }
        else //UPDATE
        {
            var ap = context.Personnel.FirstOrDefault(x => x.Personnel_Id == row.Key);

            ap.Personnel_Name = row.Name;

            ap.Orders.Clear(); //clear out existing associations

            foreach (int Id in Order_Array)
            {
                var j = context.Orders.Where(c => c.Order_Id == Id).SingleOrDefault();
                ap.Orders.Add(j);  //rebuild new associations
            }
         }

         context.SaveChanges();
     }
   }
} 
```

# netty - netty 是 http 解析器可重用的，如何？

> ID：13830322
> 
> 赞同：0
> 
> 时间：2012-12-11T23:35:45.923
> 
> 标签：netty

我需要可重用的异步 http 解析代码。netty 是否可能仅包含一些用于解析部分的 api？（我一直相信解析器应该是独立的和可重用的，而不是与框架绑定的，所以我希望 netty 的也是可重用的）。

IE。像这样输入字节会很棒，如果还没有足够的字节，它会返回 null

```
private byte[] previousData;

byte[] data = incomingMergedWithPrevious(previousData);
HttpResponse resp = httpResponseParser.parse(data);
if(resp == null) {
    return; //we do not have full data to parse yet
}

//otherwise fire the response to someone else. 
```

或者也许我可以以不同的方式重用代码。我所知道的是我得到的字节并不总是有所有的 http 标头，因为它是异步的东西。有什么办法解析东西吗？

注意：另外，我想做分块，所以我不确定它是否应该每次都返回 HttpResponse，但可能是一个列表，其中一个子类是 HttpHeaders，另一个是 HttpChunk。

谢谢，院长

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:17:49.940

您可以将[DecoderEmbedder](http://static.netty.io/3.5/api/org/jboss/netty/handler/codec/embedder/DecoderEmbedder.html)可能与[HttpMessageDecoder](http://static.netty.io/3.5/api/org/jboss/netty/handler/codec/http/HttpMessageDecoder.html)结合使用。DecoderEmbedder 页面上有一个示例。听起来您想使用 pollAll 方法。如果要以不同方式处理 HttpResponse 和 HttpChunk 消息，则需要检查每个返回对象的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-16T22:42:57.720

在 4.1.x 系列中，方法是通过`EmbeddedChannel`类。向其中添加一堆处理程序，然后使用包含原始 http 字节的 s调用`writeInboundXXX`方法。`ByteBuf`例如，解析请求`new EmbeddedChannel(new HttpRequestDecoder, new MyHandler)`将导致您的处理程序接收 decoded `HttpObjects`。

# bash - Shell 脚本错误意外 else 令牌

> ID：13830323
> 
> 赞同：0
> 
> 时间：2012-12-11T23:35:46.930
> 
> 标签：bash, shell, unix, awk

我正在使用下面的代码从一个文件中读取记录，并将其 6 字段与其他文件进行比较，并相应地将输出写入文件。

```
for FILE_NAME in `GET_FILE_LIST $1 $2 $3`
do
y=`echo $FILE_NAME|awk '{print $6}'`"X"
echo "Start --- `date`" >> $LOGF
echo $y >> $LOGF
cat $x |nawk ' BEGIN { FS=",";
while ((getline < "SUBNO.txt") > 0)
     myarray[$1] = $2
if(myarray[$6]==0)   
    ' > {${FILE_NAME}_P}
else
    ' > {${FILE_NAME}_S}
fi

UPD_FILE_STATUS $FILE_NAME 35
done 
```

问题是我收到以下错误：

```
./TEST.sh: line 95: syntax error near unexpected token `else'
./TEST.sh: line 95: `else' 
```

我有以下情况：在一个文本文件中，我有这样的数据：

```
GGO     099E7C5S    34  533196588       45696   22
PPC     93403DSA    35  784397429       44696   56 
```

在第二个文件中数据是这样的：

```
22,0
24,1
26,0 
```

我想要做的是从第一个文件写入行，将最后一个字段值与第二个文件进行比较。如果值为 0，则将其放入新的 file_1，如果为 1，则将其放入 file_2。我希望这能澄清这个案子。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:44:47.060

这个脚本中有*很多*不好的做法，我不会在这里讨论。您遇到的问题是您似乎对引用规则感到困惑。考虑代码：

```
cat $x |nawk ' BEGIN { FS=",";
while ((getline < "SUBNO.txt") > 0)
     myarray[$1] = $2
if(myarray[$6]==0)   
    ' > {${FILE_NAME}_P}
else 
```

单引号分隔了传递给的脚本`nawk`，因此上面的代码片段基本上等于：

```
cat $x | nawk cmds > {${FILE_NAME}_P}
else 
```

您的编辑器的着色（甚至在 SO 上的问题显示中）应该清楚地说明这一点。您会注意到`else`没有匹配的 if，因此 shell 将其视为语法错误。

请注意，您正在重定向到一个名为`{xxx_P}`. 在文件名中放置`{`和`}`字符是不常见的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:15:19.670

下面将从 file2 中提取所有在 file1 中存在第六个字段且带有“,0”后缀的行。它通过将 file1 中的相关行转换为简单的 awk 脚本来实现这一点。重复使用“,1”后缀以获取另一组，或者学习足够的 awk 以一次完成所有操作；这并不难。

```
sed /,0$/!d;s///;s/.*/$6 == "&"/p' file1 |
awk -f - file2 
```

sed 脚本有些晦涩；它删除任何不匹配的行，然后用任何内容替换匹配的后缀，然后用合适的 awk 条件包装剩余部分。

根据口味和要求，您可以将第二个脚本改为 sed 脚本（提示：查找 w 命令）或将第一个脚本也改为 awk 脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T20:10:29.923

这将完成您更新问题以说出您想要的内容（根据来自 file2 的信息拆分 file1）

```
awk 'NR==FNR{sfx[$1]=$2; next} {print > ("file_" sfx[$NF]+0)}' FS="," file2 FS=" " file1 
```

当行的最后一个字段在 file2 中没有条目时，您没有说明如何处理来自 file1 的行，因此我的脚本将其视为与 file2 中有一个以 0 结尾的条目相同。如果这不是您想要的，这很容易解决。

# ios - 我想将 AlAsset 对象转换为 nsstring 以将其存储在数据库中

> ID：13830324
> 
> 赞同：2
> 
> 时间：2012-12-11T23:35:54.917
> 
> 标签：ios, alassetslibrary, alasset

我正在尝试将数据的副本存储`AlAsset`到我的数据库中，作为从我的照片库中检索到的图像的 URL。为此，我想将其转换为`NSString`，但我不确定如何。

我的意图是稍后从数据库中提取 URL，并加载`AlAsset`or`NSString`路径，然后使用它来加载`UIImage`. 任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T00:35:11.160

```
NSLog(@"path : %@", [asset valueForProperty:ALAssetPropertyAssetURL]); 
```

并参考我的这个答案，了解如何使用此 URL 取回该图像：[所选图像的名称 xcode](https://stackoverflow.com/q/13512260/1548523)

# hibernate - GORM中一对多属性的条件查询

> ID：13830330
> 
> 赞同：0
> 
> 时间：2012-12-11T23:36:13.787
> 
> 标签：hibernate, grails, grails-orm

我在以下示例类之间有一对多的关系：

```
Class Home {
    static hasMany = [loans: Loan]

    int numStories
}

Class Loan {
    static belongsTo = [Bank]

    Home  home
    int   yearIssued 
}

Class Bank {
    SortedSet loans
    static  hasMany   = [loans: Loan]

    boolean active
} 
```

我正在尝试编写一个命名查询，以获取所有在 2007 年对 2 层楼的房屋发放贷款的活动银行对象。在名为Queries 的银行中，我尝试过：

```
static namedQueries = { 
    myNamedQuery { yearIssued, numStories ->

        eq 'active', true
        loans {
            gt 'yearIssued', yearIssued

            home {
                eq 'numStories', numStories
            }
        }
    }
} 
```

如果我删除上面的“home { eq ... }”部分，查询工作正常，只是不限于 2 个故事。如上所述执行时，我收到一个 groovy.lang.MissingMethodException 错误，例如：

```
 No signature of method: package.stuff.Home.call() is applicable for argument types
(package.stuff.Bank$__clinit__closure3_closure10_closure20_closure21) 
values: [package.stuff.Bank$__clinit__closure3_closure10_closure20_closure21@746231ed];

    Possible solutions: wait(), last(), save(), any(), getAll(), wait(long)" 
```

我如何将银行返还给那些在两层楼上拥有贷款的银行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T02:07:03.870

好吧，经过多次尝试，我永远无法使用具有多个关联级别的直接关联 dsl 使其工作。我能够使用别名让它工作：

```
 static namedQueries = { 
   myNamedQuery { yearIssued, numStories ->
     eq 'active', true
     createAlias 'loans','l'
     createAlias 'l.home','h'
     gt('l.yearIssued', yearIssued)
     eq('h.numStories',numStories)
  }
} 
```

然后使用

```
def bankInstanceList = Bank.myNamedQuery(2007,2).list() 
```

我目前不确定这是为什么 - 可能是一个错误或只是我不理解的设计行为。

希望这至少能让你继续......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-14T18:30:29.523

嗨，[凯利](https://stackoverflow.com/users/924669/kelly)，

这么长时间后，为了让您最终得到澄清，我假设我们在非主键列上使用了“gt，eq”之类的限制，例如贷款 - > yearIssued，home - > numStories。

只有在这种情况下，才能导航到贷款、房屋等关联路径；我们需要创建别名。

我们在哪里不需要别名：

1.  不适用任何限制
2.  仅适用于关联实体主键列的限制。

希望这可以澄清事情并可能对某人有所帮助。

# google-apps-script - 检查来自 UrlFetchApp.fetch 的原始 HTTP 请求

> ID：13830332
> 
> 赞同：0
> 
> 时间：2012-12-11T23:36:17.617
> 
> 标签：google-apps-script

我正在研究与亚马逊的 REST API 交互的东西，但我的响应中不断出现错误，指出请求格式错误。我在代码中看不到任何错误（它说缺少的参数显然在那里），所以我想查看正在发送的原始请求。

我没有看到任何可用的方法可以让我这样做。也许一个服务器只会包含我的请求作为它的响应？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T05:47:05.133

创建您自己的端点，该端点将在屏幕上回显您的请求。例如，要回显 GET 请求，请将其发送到这样的脚本（已发布 > 部署为 Web 应用程序）：

```
function doGet(e) {
  var test = 'Echo at ' + new Date() + '\n' + e.queryString;
  return ContentService.createTextOutput(test);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-24T14:27:39.873

游戏有点晚了（10 年），但你现在可以这样做：

```
const requestResult = UrlFetchApp.getRequest(url, options); 
```

在调试模式下运行它并在执行后中断以检查`requestResult`.

请参阅：[https](https://developers.google.com/apps-script/reference/url-fetch/url-fetch-app#getrequesturl,-params) ://developers.google.com/apps-script/reference/url-fetch/url-fetch-app#getrequesturl,-params以获取官方描述和`options`参数属性的完整说明。

# python - 永久更改变量

> ID：13830334
> 
> 赞同：6
> 
> 时间：2012-12-11T23:36:19.927
> 
> 标签：python, variables

我正在编写一个小程序，可以帮助您跟踪您在书中的哪一页。我不喜欢书签，所以我想“如果我可以创建一个程序来接受用户输入，然后显示他们写的文本的数量或字符串，在这种情况下就是他们的页码”重新启动，并允许他们在需要时进行更改？” 只需要几行代码，但问题是，我怎样才能让它在下次打开程序时显示相同的数字？变量会重置，不是吗？有没有办法以这种方式永久更改变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T00:00:12.983

您可以将值存储在文件中，然后在启动时加载它们。

代码看起来有点像这样

```
variable1 = "fi" #start the variable, they can come from the main program instead
variable2 = 2

datatowrite = str(variable1) + "\n" + str(variable2) #converts all the variables to string and packs them together broken apart by a new line

f = file("/file.txt",'w')
f.write(datatowrite) #Writes the packed variable to the file
f.close() #Closes the file !IMPORTANT TO DO! 
```

读取数据的代码是：

```
import string

f = file("/file.txt",'r') #Opens the file
data = f.read() #reads the file into data
if not len(data) > 4: #Checks if anything is in the file, if not creates the variables (doesn't have to be four)

    variable1 = "fi"
    variable2 = 2
else:
    data = string.split(data,"\n") #Splits up the data in the file with the new line and removes the new line
    variable1 = data[0] #the first part of the split
    variable2 = int(data[1]) #Converts second part of strip to the type needed 
```

请记住，使用此方法，变量文件与应用程序一起以明文形式存储。任何用户都可以编辑变量并更改程序行为

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T23:55:17.160

You need to store it on disk. Unless you want to be really fancy, you can just use something like CSV, JSON, or YAML to make structured data easier.

Also check out the python pickle module.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T00:08:53.823

变量有几个生命周期：

*   如果它们位于代码块内，则它们的值仅存在于该代码块中。这包括函数、循环和条件。
*   如果它们位于对象内部，则它们的价值仅在该对象的生命周期内存在。
*   如果对象被取消引用，或者您提前离开代码块，则变量的值将丢失。

如果你想特别保持某样东西的价值，你就必须*坚持*它。 [持久性](http://en.wikipedia.org/wiki/Persistence_%28computer_science%29)允许您将变量写入磁盘（是的，数据库在技术上是磁盘外的），并在稍后的时间检索它 - 在变量的生命周期到期之后，或者当程序重新启动时。

你有几个选项来决定如何保持他们页面的位置——一个强硬的方法是使用[SQLite](http://sqlite.org)；一个稍微不那么笨拙的方法是[解开](http://docs.python.org/2/library/pickle.html)对象，或者简单地写入文本文件。

# python - django_settings_module 在 GAE 服务器上未定义

> ID：13830335
> 
> 赞同：3
> 
> 时间：2012-12-11T23:36:21.830
> 
> 标签：python, django, google-app-engine, google-cloud-sql

所以，我知道你们已经被问过这个问题一百万次了，相信我，我想我已经阅读了所有这些问题。尝试将 Django polls 应用程序（在 django 教程中制作的应用程序）转换为使用谷歌云 SQL 在谷歌应用程序引擎上运行时，我收到 DJANGO_SETTINGS_MODULE is undefined 错误。

这是谷歌应用引擎日志给我的实际堆栈跟踪：

```
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/runtime/wsgi.py", line 223, in Handle 
    result = handler(dict(self._environ), self._StartResponse)
  File "/base/python27_runtime/python27_lib/versions/third_party/django-1.4/django/core/handlers/wsgi.py", line 219, in __call__
    self.load_middleware()
  File "/base/python27_runtime/python27_lib/versions/third_party/django-1.4/django/core/handlers/base.py", line 39, in load_middleware
    for middleware_path in settings.MIDDLEWARE_CLASSES:
  File "/base/python27_runtime/python27_lib/versions/third_party/django-1.4/django/utils/functional.py", line 184, in inner
    self._setup()
  File "/base/python27_runtime/python27_lib/versions/third_party/django-1.4/django/conf/__init__.py", line 40, in _setup
    raise ImportError("Settings cannot be imported, because environment variable %s is undefined." % ENVIRONMENT_VARIABLE)
  ImportError: Settings cannot be imported, because environment variable DJANGO_SETTINGS_MODULE is undefined. 
```

我在尝试在谷歌应用引擎提供的 dev_appserver.py 上运行它时遇到了同样的错误，但设法通过添加来解决这个问题

```
 env_variables:
    DJANGO_SETTINGS_MODULE: 'DjangoTut.settings' 
```

到 app.yaml 文件。

我的项目目录如下所示：

*   DjangoTut
    *   DjangoTut
        *   **初始化**.py
        *   设置.py
        *   网址.py
        *   wsgi.py
    *   民意调查
        *   **初始化**.py
        *   管理员.py
        *   模型.py
        *   测试.py
        *   网址.py
        *   视图.py
    *   应用程序.yaml
    *   管理.py

我的 app.yaml 文件看起来像这样

```
 application: hochotime
   version: 10
   runtime: python27
   api_version: 1
   threadsafe: true

   libraries:
   - name: django
     version: "1.4"

   builtins:
   - django_wsgi: on

   env_variables:
     DJANGO_SETTINGS_MODULE: 'settings' 
```

其他所有文件都与此处建议的文件相同[https://docs.djangoproject.com/en/1.4/intro/tutorial01/](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)

我试过添加

```
 import os
    os.environ['DJANGO_SETTINGS_MODULE'] = 'DjangoTut.settings' 
```

几乎每个 python 文件的开头，但无济于事。我尝试将设置文件移动到项目目录而不是应用程序目录中，并将所有的`os.environ['DJANGO_SETTINGS_MODULE']`指向都更改为“设置”。我也尝试过直接配置设置，如此处所示[https://docs.djangoproject.com/en/dev/topics/settings/#using-settings-without-setting-django-settings-module](https://docs.djangoproject.com/en/dev/topics/settings/#using-settings-without-setting-django-settings-module)但我还是一样每当我尝试在谷歌服务器上运行它时都会出错。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:46:25.140

你在使用[Django-nonrel](http://www.allbuttonspressed.com/projects/django-nonrel)吗？如果没有，请查看此[appengine 文章](https://developers.google.com/appengine/articles/django)。

我会尝试将 settings.py 移出与 app.yaml 相同的目录。从 app.yaml 中删除 env_variables，你不应该需要它们来工作。但是，如果您还没有定义处理程序，您将需要定义处理程序（不确定您是否列出了整个 app.yaml）：

```
 handlers:
- url: /static
  static_dir: static

- url: /.*
  script: main.py 
```

环境设置应该在您设置的 wsgi 处理程序中（本示例中为 main.py）*，如上面的谷歌文章所示。*

```
os.environ['DJANGO_SETTINGS_MODULE'] = 'settings' 
```

希望这能让你走上正确的道路。

# vb.net - 如何使我的 TCP 套接字服务器异步？

> ID：13830337
> 
> 赞同：0
> 
> 时间：2012-12-11T23:36:24.230
> 
> 标签：vb.net, sockets, asynchronous, tcpclient, tcplistener

我目前已经制作了一个多合一的点对点“聊天”程序。它目前使用计时器来接收消息，并使用客户端将它们发送给运行该程序的其他人。我真的很想让整个系统异步，所以我不再抱怨主要可执行文件冻结等。

我在这里粘贴了我所有的代码（VB.net）：http: [//pastebin.com/EcrtCgVc](http://pastebin.com/EcrtCgVc)

有人可以帮助我使这个系统更快、异步或做得更好。

如果您想要完整来源的保管箱的链接，我也可以提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-12T20:25:57.737

我建议你看看这个示例项目：

> 异步服务器套接字示例
> 
> [http://msdn.microsoft.com/en-us/library/fx6588te%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/fx6588te%28v=vs.110%29.aspx)

您可以将它与此示例一起使用：

> 异步客户端套接字示例
> 
> [http://msdn.microsoft.com/en-us/library/bew39x2a%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/bew39x2a%28v=vs.110%29.aspx)

您可能需要在服务器代码中使用异步方法，并且您可以使用 Delegate Sub 使您的服务器在另一个线程中运行，因此主线程（UI）仍将响应。 [http://msdn.microsoft.com/en-us/library/ms172879.aspx](http://msdn.microsoft.com/en-us/library/ms172879.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T19:56:40.313

在不查看您的代码的情况下，我也在使用套接字编程。“不要将 GUI 代码与业务代码混用。” 就像 jgauffin 所说，您不应该将在后台运行的代码与 GUI 结合起来。

例如，如果您使用套接字来接受数据或连接，则必须在新线程上运行该方法。例子...

```
Public Sub YourMainSub()
    Dim threadOne As New System.Threading.Thread(AddressOf ListenCode)
    threadOne.Start()
    'Put other code here.....
End Sub
Public Sub ListenCode()
    Dim newPerson = yourServer.Accept()
    'Or
    Dim newData = yourServer.Receive()
End Sub 
```

*抱歉，如果代码不完全正确。我是凭记忆打出来的。*

# c - \377 字符在 c

> ID：13830338
> 
> 赞同：5
> 
> 时间：2012-12-11T23:36:32.733
> 
> 标签：c, file-read

我正在尝试用 c 读取文件。我有一个 .txt 文件，其中包含以下内容：

file_one.txt file_two.txt file_three.txt file_four.txt

当我尝试用 fopen 读取这个文件时，我得到这个输出：

file_one.txt file_two.txt file_three.txt file_four.txt\377

\377 是什么意思？这是我的代码。

```
 #include <stdio.h>

    #include <stdlib.h>

    int main(int argc, const char * argv[]){

        FILE *filelist;

        char ch;

        filelist=fopen("file-path", "rt");

        while (!feof(filelist)) {
            ch = getc(filelist);
            printf("%c",ch);
        }

        fclose(filelist);

        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-11T23:40:36.747

这`\377`是一个八进制转义序列，十进制 255，所有位设置。它来自转换`EOF`- 通常具有价值`-1`- 到 a `char`，由于

```
while (!feof(filelist)) { 
```

`feof(filelist)`只有在您尝试阅读该文件*后才*变为真。

所以在文件的最后，你再次进入循环，然后`getc()`返回`EOF`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-11T23:41:17.973

The `getc()` function returns a result of type `int`, not of type `char`. Your `char ch;` should be `int ch;`.

Why does it return an `int`? Because the value it returns is *either* the character it just read (as an `unsigned char` converted to `int`) *or* the special value `EOF` (typically -1) to indicate either an input error or an end-of-file condition.

Don't use the `feof()` function to detect the end of input. It returns true only *after* you've run out of input. Your last call to `getc()` is returning `EOF`, which when stored into a `char` object is converted to `(char)-1`, which is typically `'\377'`.

Another problem is that `feof()` will *never* return a true value if there was an input error; in that case, `ferror()` will return true. Use `feof()` and/or `ferror()` *after* `getc()` returns `EOF`, to tell *why* it returned `EOF`.

To read from a file until you reach the end of it:

```
int ch;
while ((ch = getc(filelist)) != EOF) {
    /* ch contains the last character read; do what you like with it */
} 
```

Suggested reading: Section 12 of the [comp.lang.c FAQ](http://www.c-faq.com/).

# perl - Perl while 循环并死掉

> ID：13830340
> 
> 赞同：0
> 
> 时间：2012-12-11T23:36:46.177
> 
> 标签：perl, while-loop, die

我是学习perl的新手。我的问题是我如何确保如果没有设置我的，在一段时间之后，我需要发送错误或异常？

```
while (my ($a, $b) = each %$him) {
    if (($c->{$d}) eq $a) {
        $mine = $b;
    }
} 
```

如果没有设置 $mine ，我必须在这里返回错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:41:27.447

你的整个循环有点奇怪，因为你的循环变量`$a`和`$b`变量`$c`或`$d`. 另请注意，您不应使用`$a`and `$b`，因为它们是为`sort`函数保留的。因此，正如[ikegami](https://stackoverflow.com/users/589924/ikegami)所说，您的循环完全是多余的，除非您打错字并`$b`表示`$d`.

假设`$c->{$b}`是“矿井”，“未设置”表示“未定义”：

```
while (my ($a, $b) = each %$him) {
    unless (defined $c->{$b}) {       # the value for this key is undefined
        warn "Undefined mine!";       # produce warning message
        next;                         # skip to next loop iteration
    }
    ....
} 
```

您也可以使用`die`which 会产生致命错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T23:50:45.693

整个`while`循环是不必要的。您只需

```
die if !exists($him->{ $c->{$d} });
my $mine = $him->{ $c->{$d} }; 
```

你可能更喜欢

```
# If doesn't exist or isn't defined
die if !defined($him->{ $c->{$d} });
my $mine = $him->{ $c->{$d} }; 
```

或者

```
# If doesn't exist, isn't defined, or is false.
die if !defined($him->{ $c->{$d} });
my $mine = $him->{ $c->{$d} }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T23:41:29.270

可以使用 Perl 的[定义](http://perldoc.perl.org/functions/defined.html)函数，如下：

```
if (!defined($mine)) {
    # produce error here
} 
```

# file - 是否可以在文件上打印函数的输出？

> ID：13830341
> 
> 赞同：0
> 
> 时间：2012-12-11T23:36:52.703
> 
> 标签：file, stdout, output, printf

我正在编写一个工具，它使用各种 void 函数来分析程序在输入中接收的一些元素，并在标准输出中打印（使用 printf()）分析结果。显然这意味着我非常使用 printf()，因为有很多东西需要打印。我希望所有内容都打印在标准输出上，也打印在日志文件上。但是对每个 printf() 函数使用 fprintf() 会使程序变得更长、混乱并且没有良好的顺序。有没有办法将函数的输出直接保存在文件中？因此，如果我有一个 void 函数，例如包含大量 printf() 函数的 analyze() 函数，则 analyze() 的输出将打印在标准输出（到 shell）以及文件中。我试图寻找它，但没有任何结果。谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:41:38.247

您可以编写一个函数来发出 printf 和 fprintf 并调用该函数。

例如，这是一个骨架，显然你必须填写...：

```
void myPrintf(...) 
{
     printf(...);
     fprintf(...);
} 
```

然后在您的代码中，而不是 printf，您可以调用：

```
myPrintf(...); 
```

您也可以使用宏来执行此操作。

如果您需要关闭日志记录，您只需在该函数中拉出 fprintf 并保持其余代码不变即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T23:39:52.037

通常最好有一个专门的日志功能，而不是用直接的 printf/fprintf 调用来填充你的代码。该日志记录功能可以写入标准输出、日志文件，无论您想要什么，并且可以在调试/发布等方面有所不同。

# android - 网站包装在应用程序中 - 正在加载

> ID：13830342
> 
> 赞同：0
> 
> 时间：2012-12-11T23:36:54.687
> 
> 标签：android, eclipse

我正在开发一个 Android 应用程序，它只是将网站的移动版本包装在原生应用程序容器内。

目前我打电话（示例）：

```
 wv.loadUrl("http://www.websitehere.com/"); 
```

我已经导出了整个项目并在我的手机上进行了测试，在应用程序中加载新页面时需要一些时间，但是不在浏览器上时没有加载指示器，所以它是当前页面上的静止屏幕在新页面加载时片刻（取决于互联网速度）。

实现加载指示器以使用户知道新页面实际上正在加载的最佳方法是什么？

编辑：加载添加，但仅适用于应用程序的初始页面加载。

```
 public class Main extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    final ProgressDialog pd = ProgressDialog.show(this, "Page is", "Loading...",true);
    WebView wv = (WebView)findViewById(R.id.my_webview);
    wv.setWebViewClient(new WebViewClient() {

@Override
public void onPageFinished(WebView view, String url) {
    if(pd.isShowing()&&pd!=null);
    {
        pd.dismiss();
    }
}

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
pd = ProgressDialog.show(this, "Page is", "Loading...", true);
    view.loadUrl(url);
    return true;
    }
    });
    wv.loadUrl("http://www.websitehere.com");
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T23:42:42.310

您可以在加载网站之前启动 ProgressDialog 并在加载完成后将其关闭。

代码应如下所示：

```
ProgressDialog progressDialog = ProgressDialog.show(this, "", "Loading...");
wv.loadUrl("http://www.yourwebsite.com");
progressDialog.dismiss(); 
```

编辑：每个点击的新网址的新代码

您应该将此添加到您的 WebViewClient 并让您 (ProgressDialog) pd 成为成员变量。

```
@Override
public boolean shouldOverrideUrlLoading(WebView view, String url) {
    pd = ProgressDialog.show(this, "Page is:", "Loading...",true);
    view.loadUrl(url);
    return true;
} 
```

编辑：

您应该将 ProgressDialog pd 设为成员变量。

```
public class Main extends Activity {

private ProgressDialog pd;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    pd = ProgressDialog.show(this, "Page is", "Loading...",true);
    WebView wv = (WebView)findViewById(R.id.my_webview);
    wv.setWebViewClient(new WebViewClient() {
        @Override
        public void onPageFinished(WebView view, String url) {
            if(pd.isShowing()&&pd!=null);
            {
                pd.dismiss();
            }
        }

        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            pd = ProgressDialog.show(Main.this, "Page is", "Loading...", true);
        }
    });
    wv.loadUrl("http://www.websitehere.com");
}
} 
```

编辑：使用 onPageStarted。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T23:45:36.657

如果您的网站是基于 html 而不是服务器端（asp/php 等），您可以将网站打包在应用程序中，这样就不需要互联网。这样做的缺点是更新了 2 个网站。

或者，您可以将加载脚本 (javascript) 添加到网站本身。

# java - Jackson JSON 解析器无效的 utf-8 起始字节

> ID：13830346
> 
> 赞同：27
> 
> 时间：2012-12-11T23:37:10.253
> 
> 标签：java, json, exception, jackson

我正在尝试解析以下 JSON，但我不断收到`JsonParseException`：

```
{
   "episodes":{
      "description":"Episode 3 – Oprah's Surprise Patrol from 1\/20\/04\nTake a trip down memory lane and hear all your favorite episodes of The Oprah Winfrey Show from the last 25 seasons -- everyday on your radio!"
   }
} 
```

在这个 JSON 上也失败了

```
{
   "episodes":{
      "description":"After 20 years in sports talk…he’s still the top dog!  Catch Christopher “Mad Dog” Russo weekday afternoons on Mad Dog Radio as he tells it like it is…Give the Doggie a call at 888-623-3646."
   }
} 
```

例外：

```
org.codehaus.jackson.JsonParseException: Invalid UTF-8 start byte 0x96
 at [Source: C:\Json Test Files\episodes.txt; line: 3, column: 33]
    at org.codehaus.jackson.JsonParser._constructError(JsonParser.java:1291)
    at org.codehaus.jackson.impl.JsonParserMinimalBase._reportError(JsonParserMinimalBase.java:385)
    at org.codehaus.jackson.impl.Utf8StreamParser._reportInvalidInitial(Utf8StreamParser.java:2236)
    at org.codehaus.jackson.impl.Utf8StreamParser._reportInvalidChar(Utf8StreamParser.java:2230)
    at org.codehaus.jackson.impl.Utf8StreamParser._finishString2(Utf8StreamParser.java:1467)
    at org.codehaus.jackson.impl.Utf8StreamParser._finishString(Utf8StreamParser.java:1394)
    at org.codehaus.jackson.impl.Utf8StreamParser.getText(Utf8StreamParser.java:113)
    at com.niveus.jackson.Main.parseEpisodes(Main.java:37)
    at com.niveus.jackson.Main.main(Main.java:13) 
```

代码：

```
 public static void main(String [] args) {
        parseEpisodes("C:\\Json Test Files\\episodes.txt");
    }
    public static void parseEpisodes(String filename) {
        JsonFactory factory = new JsonFactory();
        JsonParser parser = null;
        String nameField = null;

        try {
            parser = factory.createJsonParser(new File(filename));

            parser.configure(JsonParser.Feature.ALLOW_UNQUOTED_CONTROL_CHARS, true);
            parser.configure(JsonParser.Feature.ALLOW_BACKSLASH_ESCAPING_ANY_CHARACTER, true);

            JsonToken token = parser.nextToken();
            nameField = parser.getText();
            String desc = null;

            while (token != JsonToken.END_OBJECT) {
                if (nameField.equals("episodes")) {
                    while (token != JsonToken.END_OBJECT) {
                        if (nameField.equals("description")) {
                            parser.nextToken();
                            desc = parser.getText();
                        }

                        token = parser.nextToken();
                        nameField = parser.getText();
                    }
                }

                token = parser.nextToken();
                nameField = parser.getText();
            }

            System.out.println(desc);
        } catch (JsonParseException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-11T23:40:56.300

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-30T07:29:41.907

我也遇到过类似的问题。在记事本++中打开你的json，然后在编码下拉菜单中选择UTF-8。并将文本保存到其他文件。这样做解决了这个问题。

# c - 没有人在等待时发出条件变量信号的意义？

> ID：13830349
> 
> 赞同：0
> 
> 时间：2012-12-11T23:37:32.207
> 
> 标签：c, concurrency, semaphore, condition-variable

在阅读一本关于并发的书时，作者说信号量与 signal() 工作方式中的条件变量不同。信号量会跟踪对 signal() 的调用次数，而条件变量则不会。“在没有人等待的情况下调用 pthread_cond_signal 无效”，它说。为什么这个细节很重要（我已经看到它在不同的地方重复了很多次）？对使用有什么影响？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T23:47:50.890

从概念上讲，信号量相当于互斥体、条件变量和受互斥体保护的整数计数器。在这个类比下，发布一个信号量相当于锁定互斥锁、递增计数器、发送条件变量信号和解锁互斥锁。即使没有服务员，状态仍然会被修改。

在这个类比下，信号量的服务员正在做相当于：

1.  锁定互斥锁。
2.  当计数为非正数时，等待条件变量。
3.  递减计数。
4.  解锁互斥锁。

当然，如果您谈论的是 POSIX 的特定情况，那么类比并不完全符合实际情况，因为信号量具有额外的异步信号安全属性，这些属性妨碍使用 mutex/condvar/count 三元组来实现它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T23:46:58.183

这意味着您必须具有与条件变量相关联的“条件”。您必须使用条件变量的方式是：

```
acquire the condition's mutex

while (!condition) {
     wait on the condition variable
}

do whatever you need to do while holding the mutex

release the mutex 
```

相应地，每当与条件变量关联的条件更新时，都必须在持有互斥锁的同时进行。这样，在条件变量上阻塞时，在系统准备好实际解除阻塞等待线程之前，条件不会改变。

# actionscript-3 - AS3 带闹钟的简单定时器？

> ID：13830352
> 
> 赞同：1
> 
> 时间：2012-12-11T23:37:44.013
> 
> 标签：actionscript-3, air

我一直在寻找一个示例代码来创建一个简单的倒数计时器。

它将以“小时：分钟：秒”显示时间，我可以将时间设置为 10 分钟、30 分钟、1 小时、2 小时等。

当计时器达到零时，它会执行一个功能。非常感谢您的帮助。我能在网上找到的唯一东西是倒计时到一个特定的日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:06:21.657

制作计时器非常简单。您可以阅读更多有关 AS3 计时器类的信息。将时间显示为 HH:MM:SS 有点麻烦。当我需要这样做时，我会使用这个类：

```
package com.dop.utils
{
    public class Timecodes
    {
        public function Timecodes()
        {
        }

        public static function timecodeToSeconds(tcStr:String):Number
        {
            var t:Array = tcStr.split(":");
            return (t[0] * 3600 + t[1] * 60 + t[2] * 1);
        }

        public static function secondsToTimecode(seconds:Number):String
        {
            var minutes:Number          = Math.floor(seconds/60);
            var remainingSec:Number     = seconds % 60;
            var remainingMinutes:Number = minutes % 60;
            var hours:Number            = Math.floor(minutes/60);
            var floatSeconds:Number     = Math.floor((remainingSec - Math.floor(remainingSec))*100);
            remainingSec                = Math.floor(remainingSec);

            return getTwoDigits(hours) + ":" + getTwoDigits(remainingMinutes) + ":" + getTwoDigits(remainingSec);
        }

        private static function getTwoDigits(number:Number):String
        {
            if (number < 10)
            {
                return "0" + number;
            }
            else
            {
                return number + "";
            }
        }
    }
} 
```

我做了一个小例子，你可以在这里看到使用这个类：[http ://ronnieswietek.com/cc/alarm/alarm.swf](http://ronnieswietek.com/cc/alarm/alarm.swf)

（来源：[http](http://ronnieswietek.com/cc/alarm/alarm.fla) ://ronnieswietek.com/cc/alarm/alarm.fla ）

我使用的利用`Timer`该类的代码在这里：

```
import com.dop.utils.Timecodes;
import flash.events.*;
import fl.controls.*;
import fl.data.*;
import flash.utils.Timer;

var timer:Timer = new Timer(1000); //-- run once a second
timer.addEventListener(TimerEvent.TIMER, onTimer);

var countdown:Number = 0;
var durations:Array = [
    {label:'1 minute',time:1},
    {label:'5 minutes',time:5},
    {label:'10 minutes',time:10},
    {label:'30 minutes',time:30},
    {label:'1 hour',time:60},
    {label:'2 hours',time:120},
    {label:'3 hours',time:180}
];

durationBox.dataProvider = new DataProvider(durations);
timerButton.addEventListener(MouseEvent.CLICK, timerHandler);

function timerHandler(e:MouseEvent):void
{
    if (!timer.running)
    {
        var selectedTime:Number = durationBox.selectedItem.time * 60;
        countdown = selectedTime;
        timeText.text = Timecodes.secondsToTimecode(countdown);
        timer.start();
        timerButton.label = "Stop";
    }
    else
    {
        countdown = 0;
        timeText.text = Timecodes.secondsToTimecode(countdown);
        timer.stop();
        timer.reset();
        timerButton.label = "Start";
    }
}

function onTimer(e:TimerEvent):void
{
    timeText.text = Timecodes.secondsToTimecode(countdown);
    countdown--;
    if (countdown == 0)
    {
        timer.stop();
        timer.reset();
        timeText.text = "ALARM!!!";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T00:39:04.093

在需要准确性的地方，您不能仅依靠 Timer 类来为您提供精确的时间流逝。特别是如果 Flash Player 正在做很多其他工作。这是因为 Timer 类间隔实际上是一个请求，而不是保证。让我们看一下，从一个简单的计时器实现开始，它每秒滴答一次（`1000`毫秒）：

```
private var startTime:uint;
private var ticks:int;

protected function start():void
{
    var t:Timer = new Timer( 1000 );
    t.addEventListener( TimerEvent.TIMER, timerTick );
    t.start();
    startTime = getTimer();
}

protected function timerTick( event:TimerEvent ):void
{
    trace( 'Ideal: ' + (++ticks) + ' Actual: ' + (getTimer()-startTime)/1000 );
} 
```

使用`getTimer`（[熟悉 getTimer](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/package.html?filter_flash=cs5&filter_flashplayer=10.2&filter_air=2.6)）来测量我们可以在 20 秒内看到 Timer 类落后半秒的实际时间。每次运行时，这种漂移都会有所不同：

```
Expected: 1 Actual: 1.043
Expected: 2 Actual: 2.083
Expected: 3 Actual: 3.082
…
Expected: 18 Actual: 18.417
Expected: 19 Actual: 19.457
Expected: 20 Actual: 20.5 
```

这就是实现秒表可以更精确地测量时间的地方：

```
import flash.utils.getTimer;

public class Stopwatch
{
    private var startStamp:Number;
    private var stopStamp:Number;
    private var runTime:Number;

    private var _countdownDuration:Number;

    private var started:Boolean;
    private var stopped:Boolean;
    private var paused:Boolean;

    function Stopwatch( startNow:Boolean = true ):void
    {
        if ( startNow ) 
            start();
    }

    public function start():void
    {
        runTime = 0;
        startStamp = getTimer();
        _countdownDuration = 0;
        started = true;
        stopped = false;
        paused = false;
    }

    public function startCountdown( milliseconds:Number ):void
    {
        start();
        _countdownDuration = milliseconds;
    }

    public function pause():void
    {
        if ( started && ! stopped )
        {
            runTime += getTimer() - startStamp;
            paused = true;
        }
    }

    public function resume():void
    {
        if ( started && paused )
        {
            startStamp = getTimer();
            paused = false;
        }
    }

    public function stop():void
    {
        if ( started && ! stopped )
        {
            if ( ! paused )
                runTime += getTimer() - startStamp;

            stopped = true;
            paused = false;
        }
    }

    public function set elapsed( value:uint ):void
    {
        runTime = value;

        if ( running )
            startStamp = getTimer();
    }

    public function get elapsed():uint
    {
        if ( running )
            return ( getTimer() - startStamp ) + runTime;

        return runTime;
    }

    public function get running():Boolean
    {
        return ( started && ! paused && ! stopped );
    }

    public function get countdownDuration():Number
    {
        return _countdownDuration;
    }

    public function set countdownDuration( value:Number ):void
    {
        _countdownDuration = value;
    }

    public function get remaining():int
    {
        if ( ! _countdownDuration )
            return 0;
        else if ( _countdownDuration - elapsed < 0 )
            return 0;

        return _countdownDuration - elapsed;
    }
} 
```

使用 Stopwatch 扩展第一个示例，您可以非常简单地有效地测量时间的流逝（请记住`stopwatch.elapsed`以毫秒为单位，因此我们将除以 1000 秒）：

```
private var stopwatch:Stopwatch;

protected function start():void
{
    var t:Timer = new Timer( 1000 );
    t.addEventListener( TimerEvent.TIMER, timerTick );
    t.start();
    stopwatch = new Stopwatch;
    stopwatch.start();
}

protected function timerTick( event:TimerEvent ):void
{
    trace( stopwatch.elapsed/1000 + ' seconds have elapsed',
           (60 * 10) - stopwatch.elapsed/1000 + ' seconds remain' );
} 
```

由于`stopwatch.elapsed`以毫秒为单位，因此您需要将该数量转换为不同的时间增量。遵循单一职责原则，我们将创建一个名为 StopwatchFormatter 的可重用通用类来帮助我们整合这些计算并公开一个可读的 API：

```
public class StopwatchFormatter
{
    private var elapsed:Number;
    public var paddedSize:int;
    public var cappedDecimalLength:int;

    function StopwatchFormatter( paddedSize:Number = 2, cappedDecimalLength:Number = 1,  elapsed:Number = 0 )
    {
        this.elapsed = elapsed;
        this.paddedSize = paddedSize;
        this.cappedDecimalLength = cappedDecimalLength;
    }

    //  INPUTS

    public function setTimeAsGroup( hours:Number, minutes:Number = 0, seconds:Number = 0, milliseconds:Number = 0 ):StopwatchFormatter
    {
        elapsed = ( hours * 60 * 60 * 1000 ) + ( minutes * 60 * 1000 ) + ( seconds * 1000 ) + milliseconds;

        return this;
    }

    public function set totalMilliseconds( value:Number ):void
    {
        elapsed = value;
    }

    public function set totalSeconds( value:Number ):void
    {
        elapsed = value * 1000;
    }

    public function set totalMinutes( value:Number ):void
    {
        elapsed = value * 1000 * 60;
    }

    public function set totalHours( value:Number ):void
    {
        elapsed = value * 1000 * 60 * 60;
    }

    //  CLOCK LIKE 
    //  (converting to int will drop the decimal place) 

    public function get milliseconds():int
    {
        return elapsed % 1000;
    }

    public function get seconds():int
    {
        return ( elapsed / 1000 ) % 60;
    }

    public function get minutes():int
    {
        return ( elapsed / 1000 / 60 ) % 60;
    }

    public function get hours():int
    {
        return ( elapsed / 1000 / 60 / 60 ) % 24;
    }

    // CLOCK PADDED (zeroes in the front) 
    // 5 becomes "05" , 10 becomes "10" where _paddedSize is 2

    public function get millisecondsPadded():String
    {
        return frontPad( milliseconds );
    }

    public function get secondsPadded():String
    {
        return frontPad( seconds );
    }

    public function get minutesPadded():String
    {
        return frontPad( minutes );
    }

    public function get hoursPadded():String
    {
        return frontPad( hours );
    }

    // TOTAL

    public function get totalMilliseconds():Number
    { 
        return elapsed;
    }

    public function get totalSeconds():Number
    {
        return elapsed  / 1000;
    }

    public function get totalMinutes():Number
    {
        return elapsed / 1000 / 60;
    }

    public function get totalHours():Number
    {
        return elapsed / 1000 / 60 / 60;
    }

    //  TOTAL CAPPED
    //  3.134 becomes 3.1 where _cappedDecimalLength is 1

    public function get totalMillisecondsCapped():Number
    {
        return capped( totalMilliseconds );
    }

    public function get totalSecondsCapped():Number
    {
        return capped( totalSeconds );
    }

    public function get totalMinutesCapped():Number
    {
        return capped( totalMinutes );
    }

    public function get totalHoursCapped():Number
    {
        return capped( totalHours );
    }

    // TOTAL CAPPED + PADDED (zeroes in the back and one zero in the front for values less than 0)
    //  3.101 becomes "3.10" where _cappedDecimalLength is 2

    public function get totalSecondsCappedPadded():String
    {
        return capped( totalSeconds ).toFixed( cappedDecimalLength );
    }

    public function get totalMinutesCappedPadded():String
    {
        return capped( totalMinutes ).toFixed( cappedDecimalLength );
    }

    public function get totalHoursCappedPadded():String
    {
        return capped( totalHours ).toFixed( cappedDecimalLength );
    }

    // UTILITY FUNCTIONS

    private function frontPad( n:int ):String
    {
        var s:String = n.toString();
        if ( s.length < paddedSize )
        {
            var i:int = 0;
            var len:int = paddedSize - s.length;
            for ( ; i < len; i++ )
            {
                s = "0" + s;
            }
        }
        return s;
    }

    private function capped( input:Number ):Number
    {
        if ( cappedDecimalLength == 0 ) 
            return Math.floor( input );

        var decimalFactor:Number = Math.pow( 10, cappedDecimalLength );

        return Math.floor( input * decimalFactor ) / decimalFactor;
    }
} 
```

将这两个类和一个 Timer 放在一起，我们有一个简单的倒计时方法：

```
private var stopwatch:Stopwatch;
private var time:StopwatchFormatter;

protected function start():void
{
    var t:Timer = new Timer( 1000 );
    t.addEventListener( TimerEvent.TIMER, timerTick );
    t.start();
    stopwatch = new Stopwatch;
    stopwatch.startCountdown( new StopwatchFormatter().setTimeAsGroup( 1, 10, 30 ).totalMilliseconds );
    time = new StopwatchFormatter;
}

protected function timerTick( event:TimerEvent ):void
{
    time.totalMilliseconds = stopwatch.elapsed;
    var elapsed:String = time.hoursPadded + ':' + time.minutesPadded + ':' + time.secondsPadded + ':' + time.millisecondsPadded;

    time.totalMilliseconds = stopwatch.remaining;
    var remainig:String = time.hoursPadded + ':' + time.minutesPadded + ':' + time.secondsPadded + ':' + time.millisecondsPadded;

    trace( 'Elapsed:', elapsed, "Remaining:", remainig ); 
} 
```

# java - Eclipse 可执行 Jar 资源文件

> ID：13830356
> 
> 赞同：0
> 
> 时间：2012-12-11T23:37:49.607
> 
> 标签：java, eclipse, jar, export, executable-jar

我想导出我的 Java 程序，但遇到了问题。它可以正常导出，但我的 res 文件夹和 sound 文件夹等资源文件不存在。它们位于项目目录中，所以我不知道这是否应该是一个问题。我目前只是`ImageIcon().getImage()`用来获取我的图片并且工作正常，但是当我导出并运行它时，程序运行但它没有任何图片。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:27:09.113

问题是一旦图像/声音在 jar 中，您必须将它们作为资源访问。

```
Image image = new ImageIcon(this.getClass().getResource("/image.gif")).getImage(); 
```

如果没有将文件夹添加为构建路径中的源文件夹，请确保图像确实在使用 winrar 或类似方法打开 jar 的 jar 中。

# windows-phone-7 - MediaHistory NowPlaying vs WriteRecentPlay

> ID：13830358
> 
> 赞同：0
> 
> 时间：2012-12-11T23:38:16.877
> 
> 标签：windows-phone-7, media-player

[`WriteRecentPlay`](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.devices.mediahistory.writerecentplay%28v=vs.105%29.aspx)除了分配一个值之外是否还需要调用，[`NowPlaying`](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.devices.mediahistory.nowplaying%28v=vs.105%29.aspx)或者后者是否暗示前者就操作系统处理它？

如果需要，可以`WriteRecentPlay`与`NowPlaying`作业同时调用还是应该在音频完成时调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T04:40:06.927

考虑到认证[要求现在播放和最近播放的图像尺寸不同](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769558%28v=vs.105%29.aspx)，因此需要进行两个单独的调用。

# ios - 安装时将图像存储在 iOS 应用程序目录中

> ID：13830362
> 
> 赞同：0
> 
> 时间：2012-12-11T23:38:54.620
> 
> 标签：ios

我正在编写一个 iOS 应用程序，它从后端服务器下载图像，并将它们存储在文档目录中。我知道它是怎么做的。

但我需要先编写一个原型，它使用一些预先给定的图像（不是从后端服务器检索）。我的问题是，是否可以在应用程序初始安装期间将图像存储在文档目录中？我不想在捆绑目录中硬编码它们。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T23:48:27.250

安装应用程序时什么都不能做，只有在应用程序运行时。应用程序第一次运行时，您可以将预先捆绑的图像复制到其他目录（文档），也可以根据需要下载它们。听起来您想要原型的第一个选项。

基本上你需要做你不想做的事情——在捆绑包中硬编码它们。

请记住，应用程序的沙箱是在安装应用程序时设置的。这包括创建 Documents 目录。但是没有任何东西放在那里。只有您正在运行的应用程序才能在应用程序的沙箱中的某个位置存储某些内容。

# c++ - 置换函数和交换字符串值的问题

> ID：13830368
> 
> 赞同：0
> 
> 时间：2012-12-11T23:39:19.540
> 
> 标签：c++, permutation, eclipse-juno, arrays

好的，所以我需要一些帮助来交换我的字符串。

这是我正在尝试做的整体代码，但我不能只是移动字符串。我开始尝试将其转换为字符，但大多数回复说只使用 std::swap 函数，但是我真的迷失在使用这个......

我的总体目标是置换一个字符串，可以将其指定到字符串的某个部分。我是 C++ 新手，我只是不确定如何使用 C++ 方法/函数来实现这一点。

（还有一个 main.cc 和 Permutation h。但它只用于定义变量，基本上是骨架代码）

感谢所有帮助，我将在大约 2 小时后回来查看。

更新代码）

```
 #include <iostream>   // for cout
#include <cstdio>     // for printf()
#include <sstream>    // for stringstream
#include <stdio.h>
#include <string.h>
#include "Permutation.h"
using namespace std;

Permutation::Permutation() {
    /* nothing needed in the constructor */
}

void Permutation::permute(const string& str) {

    string stringnew = str;
    int j;
    int low = 0;
    int high = str.length();

    cout << stringnew << endl;

    for (j = 0; j <= high; j++) {
        string strtemp = stringnew[j];
        std::swap((strtemp + low), (strtemp + j));
        permute(str, low + 1, high);
        std::swap(str[j + low], str[j + j]);

    }
}

void Permutation::permute(const string& str, int low, int high) {
//  int j;
//  if (low == high) {
//      cout << str << endl;
//  } else {
//      for (j = low; j <= high; j++) {
//          std::swap(str[j + low], str[j + j]);
//          permute(str, low + 1, high);
//          std::swap(str[j + low], str[j + j]);
//      }
//  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:33:32.497

您必须通过类接口工作。您无法从`std::string`.

您*可以*做的是使用数组下标运算符并将其作为`str[i]`. 您也可以使用迭代器。

原因是在 C++03 之前，`std::string`不需要是字符数组。它可能是不连续的。至少有一个实现使用了一种`std::deque`样式“指向数组的指针数组”后备存储，这赋予了它快速插入、前置和从中间删除的能力。

此外，从面向对象编程设计的角度来看，深入到对象的内部并重新排列它们并不好。

只是为了好玩，因为我想从工作中休息一下，一些使用数组下标与字符串混淆的代码：

```
#include <cctype>
#include <string>
#include <iostream>

void uc(std::string &s) 
{
    size_t i;
    const size_t len = s.length();
    for(i=0; i<len; ++i) {
        s[i] = toupper(s[i]);
    }   
}

void mix(std::string &s) 
{
    size_t i;
    const size_t len = s.length();
    for(i=1; i<len/2+1; ++i) {
        std::swap(s[i-1], s[len-i]);
    }   
}

int main()
{
    std::string s("Test String");
    uc(s);
    std::cout << s << std::endl;
    mix(s);
    std::cout << s << std::endl;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T23:44:20.843

只需使用 c_str() 函数

```
std::string str("I'm a text");
char *pStr = str.c_str(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T23:46:07.100

这是 C++ 而不是你指出的线程中的 java。首先

```
char[] x 
```

仅适用于编译时已知大小的表的有效声明。

另一件事是 std::string 没有 .toCharArray 方法，但它有**.c_str()**方法，您可以使用它从 std::string获取**const char* 。**

高温高压

# json - 我可以在返回到浏览器的对象中返回压缩后的 JSON 字符串吗？

> ID：13830369
> 
> 赞同：1
> 
> 时间：2012-12-11T23:39:20.027
> 
> 标签：json, coldfusion

我正在努力寻找一种方法来在我返回的对象中发回 JSON（' running Coldfusion8' ）目前我正在`Ajax`应要求发回这个：

```
{
 "SUCCESS":true,
 "DATA": "JSON someData",
 "COUNT":10
 } 
```

我也有仅内容的 Ajax 请求，我只是`DATA`像这样发回部分：

```
return "HTML someData" 
```

通过这种方式，我可以发送压缩和二进制 gzip 压缩的 HTML，它运行良好并将“有效负载”从 60k 数据减少到 2-3k。

由于我的页面必须离线可用，我已经开始在客户端上进行所有标记增强，并且只从我的数据库发送 JSON 数据（我猜应该是这样）。但是，我的 JSON 字符串比我发送的初始 HTML 大得多（比如 10k JSON，需要将其放入我需要创建的元素中，而 2-3k 准备使用的片段）。所以我用额外的带宽和客户端处理来惩罚自己。

为了解决这个问题，我开始尝试压缩我的 JSON 字符串（有效），以及我是否可以像在我的第二个示例中那样将其发回（无效......）：

```
return "JSON someData" 
```

如果我`text/JSON`在返回标头和 JSON 中指定`ajax-returnformat`，我只会得到`Coldfusion`错误，告诉我`Unable to serialize binary data to JSON`

**问题是否有可能发回 JSON- gzipped**
？如果是这样，我需要在我的 AJAX 调用（`returnformat`？）和服务器端指定什么以使其工作并且不会每次都失败。

谢谢！

（注意：我不会问，是否可以在服务器上设置 JSON GZIP 编码！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T23:57:25.130

Ok. You can "beat the returntype" by using:

```
<cfif variables.alredayBinary EQ "false">
    <cfcontent reset="no" variable="#CharsetDecode(passBackObject, "UTF-8")#" />
<cfelse>
    <cfcontent reset="no" variable="#passBackObject#" />    
</cfif>
<cfreturn  /> 
```

Returning nothing, because as I understand `<cfcontent>` goes straight back to the client. Maybe useful for someone else, too.

# objective-c - 链接完成块

> ID：13830373
> 
> 赞同：2
> 
> 时间：2012-12-11T23:40:05.330
> 
> 标签：objective-c, ios

我有两个不同类的实例，它们都需要向特定操作添加完成块。我将尝试一般性地解释问题，而不是解释我的应用程序试图做的所有事情。

视图控制器正在调用资源管理器类的实例以保存资源。资源管理器然后调用要保存的资源的类以获取用于保存的网络操作。

资源的实例创建操作并给它一个完成块，该块将在它触发时影响资源的状态。

这就是我的问题所在 - 资源类还需要向此操作添加一个完成块，以便通知视图控制器保存成功或失败。

这是管理器上保存方法的片段：

```
-(void)save:resource withCompletion:completion
{
.
.
.

NSOperation *operation = [resource operationForSave];

NSOperation __weak *weakOperation = operation;
void(^__weak resourceCompletion)(void)= operation.completionBlock;

[operation setCompletionBlock:^{
    if (resourceCompletion) {
        resourceCompletion();
        }

    if (completion) {
       if (weakOperation.error) {
            completion(NO, operation.error);
            }
        else {
            completion(YES, nil);
            }
        }
    }];

.
.
.
// add the operation to a network operation queue
} 
```

虽然我认为这在技术上会起作用，但我并不对此感到疯狂。感觉很时髦。我希望一个块封装第二个块，但这是不可能的，因为视图控制器和资源正在创建自己的完成块，而管理器类必须将它们粉碎在一起。

在这种情况下，是否有更优雅的方法将这两个完成块链接在一起，或者我目前创建一个包含原始两个块的块的方法是我能得到的最好的？

任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T23:59:36.310

您发布的代码可能*无法*正常工作。当您用自己的块替换操作的完成块时，您可能正在删除对原始完成块（由资源设置）的唯一强引用。因此，您的`resourceCompletion`变量很弱，到时间`setCompletionBlock:`返回时将变为 nil。

只是`resourceCompletion`做强应该可以解决问题。但是，如果您想以更简洁的方式执行此操作，请修改`operationForSave`消息（在资源上）以获取完成块本身：

```
__block NSNetworkOperation *operation = [resource operationForSaveWithCompletion:^{
    NSError *error = operation.error;
    completion(error == nil, error);

    // Break the retain cycle between this block and the operation object.
    operation = nil;
}]; 
```

并使其成为资源自己的内部完成块的工作，以调用您提供的完成块。

如果您不想或不能修改资源的 API，您仍然可以通过消除弱引用来简化代码：

```
__block NSNetworkOperation *operation = [resource operationForSave];
__block void (^priorCompletion)(void) = operation.completionBlock;
operation.completionBlock = ^{
    if (priorCompletion) {
        priorCompletion);
        // Break possible retain cycle.
        priorCompletion = nil;
    }

    NSError *error = operation.error;
    completion(error == nil, error);
    // Break the retain cycle between this block and the operation object.
    operation = nil;
}; 
```

另外，我真诚地希望您没有真正的类名为`NSNetworkOperation`，因为[Apple 保留`NS`前缀（以及所有其他两个字母前缀）供自己使用。](http://developer.apple.com/library/ios/documentation/cocoa/conceptual/ProgrammingWithObjectiveC/Conventions/Conventions.html#//apple_ref/doc/uid/TP40011210-CH10-SW4)

# iphone - 从 UIViewController 切换到 UITabBarController

> ID：13830375
> 
> 赞同：1
> 
> 时间：2012-12-11T23:40:11.383
> 
> 标签：iphone, ios, uiviewcontroller, uitabbarcontroller, switching

我试图在 UITabBarController 之前显示一个 UIViewController 2 秒，我知道我必须从我的 appdelegate 中制作它。我试过首先将我的 self.window.rootviewcontroller 分配给我的 UIViewController，并在 2 秒后使用预定的计时器将我的 self.window.rootviewcontroller 重新分配给我的 UITabViewController。

问题是当我测试它时，我的视图控制器出现了，但在 2 秒后应用程序崩溃了。

这是我的 LaMetro_88AppDelegate.h

```
@interface LaMetro_88AppDelegate : NSObject <UIApplicationDelegate, UITabBarControllerDelegate>
{
    UIView *startupView;
    NSTimer *timer;

    UIViewController *LoadingViewController;
    UITabBarController *tabBarController;
}

-(void)changeView;
@property (nonatomic, retain) IBOutlet UIWindow *window;

@property (nonatomic, retain) IBOutlet UITabBarController *tabBarController;
@property (nonatomic, retain) IBOutlet UIViewController *LoadingViewController;

@end 
```

这是我的 LaMetro_88AppDelegate.m

```
@implementation LaMetro_88AppDelegate

@synthesize window = _window;
@synthesize tabBarController = _tabBarController;
@synthesize LoadingViewController = _LoadingViewController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
     self.window.rootViewController = self.LoadingViewController;

    timer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(changeView:) userInfo:nil repeats:NO];

    [self.window makeKeyAndVisible];
    return YES;
}

-(void)changeView
{

    self.window.rootViewController = self.tabBarController;  

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T00:08:13.047

您的应用程序正在崩溃，因为您的选择器后面有一个冒号 (changeView:)，而该方法没有。只需删除该冒号。此外，不需要为计时器设置 ivar，甚至不需要将计时器创建分配给任何东西——该行可以是：

```
[NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(changeView) userInfo:nil repeats:NO]; 
```

# android - android setonclicklistener intent 空指针异常

> ID：13830376
> 
> 赞同：0
> 
> 时间：2012-12-11T23:40:24.220
> 
> 标签：android, button, android-intent, nullpointerexception

我正在尝试创建一个问答游戏，但是当我单击响应按钮时，我得到一个`NullPointerException`.

似乎所有变量都已初始化，有人可以帮助我吗？

这是课程：

```
public class QActivity extends Activity {

    protected int qst = 0;
    protected int err = 0;
    protected String mode = "";
    protected Intent intent;
    protected ArrayList<Integer> tb;
    protected Integer x = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_q);
        Button r1 = (Button) findViewById(R.id.rep1);
        Button r2 = (Button) findViewById(R.id.rep2);
        Button r3 = (Button) findViewById(R.id.rep3);
        TextView txt = (TextView) findViewById(R.id.questiontxt);
        Question q = new Question();
        DatabaseHelper myDbHelper = new DatabaseHelper(this);

        tb = getIntent().getExtras().getIntegerArrayList("tb");

        mode = getIntent().getExtras().getString("Mode");
        qst = getIntent().getExtras().getInt("qst");
        err = getIntent().getExtras().getInt("err");

        if (mode.equals("25")) {
            x = 0;

            do {
                x = (int) (Math.random() * 57);

            } while (Verif(x, tb) == true);

            tb.add(x);
            qst += 1;

            try {
                q = myDbHelper.getQuestion(x);
            } catch (SQLException sqle) {
                throw sqle;
            }

            txt.setText(q.getQuestion());
            r1.setText(q.getAnswer1());
            r2.setText(q.getAnswer2());
            r3.setText(q.getAnswer3());

            TextView t1 = (TextView) findViewById(R.id.questid);
            TextView t3 = (TextView) findViewById(R.id.questnumber);

            intent = new Intent(this, QActivity.class);
            intent.putExtra("Mode", mode);
            intent.putExtra("qst", qst);
            intent.putExtra("err", err);
            intent.putExtra("tab", tb);
        }

        r1.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(intent);
            }
        });

    }

    public boolean Verif(int n, ArrayList<Integer> tbl) {
        for (Integer s : tbl) {
            if (s == n)
                return true;
        }
        return false;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_q, menu);
        return true;
    }

} 
```

这是 LogCat 输出：

```
12-12 00:27:47.233: W/dalvikvm(7142): threadid=1: thread exiting with uncaught exception (group=0x40c471f8)
12-12 00:27:47.233: E/AndroidRuntime(7142): FATAL EXCEPTION: main
12-12 00:27:47.233: E/AndroidRuntime(7142): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.dreamappz.alamalmaarefa/com.dreamappz.alamalmaarefa.QActivity}: java.lang.NullPointerException
12-12 00:27:47.233: E/AndroidRuntime(7142):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
12-12 00:27:47.233: E/AndroidRuntime(7142):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
12-12 00:27:47.233: E/AndroidRuntime(7142):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
12-12 00:27:47.233: E/AndroidRuntime(7142):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
12-12 00:27:47.233: E/AndroidRuntime(7142):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-12 00:27:47.233: E/AndroidRuntime(7142):     at android.os.Looper.loop(Looper.java:137)
12-12 00:27:47.233: E/AndroidRuntime(7142):     at android.app.ActivityThread.main(ActivityThread.java:4511)
12-12 00:27:47.233: E/AndroidRuntime(7142):     at java.lang.reflect.Method.invokeNative(Native Method)
12-12 00:27:47.233: E/AndroidRuntime(7142):     at java.lang.reflect.Method.invoke(Method.java:511)
12-12 00:27:47.233: E/AndroidRuntime(7142):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
12-12 00:27:47.233: E/AndroidRuntime(7142):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
12-12 00:27:47.233: E/AndroidRuntime(7142):     at dalvik.system.NativeStart.main(Native Method)
12-12 00:27:47.233: E/AndroidRuntime(7142): Caused by: java.lang.NullPointerException
12-12 00:27:47.233: E/AndroidRuntime(7142):     at com.dreamappz.alamalmaarefa.QActivity.Verif(QActivity.java:87)
12-12 00:27:47.233: E/AndroidRuntime(7142):     at com.dreamappz.alamalmaarefa.QActivity.onCreate(QActivity.java:47)
12-12 00:27:47.233: E/AndroidRuntime(7142):     at android.app.Activity.performCreate(Activity.java:4470)
12-12 00:27:47.233: E/AndroidRuntime(7142):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
12-12 00:27:47.233: E/AndroidRuntime(7142):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
12-12 00:27:47.233: E/AndroidRuntime(7142):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T23:49:13.917

你应该改变这一行：

```
intent.putExtra("tab", tb); 
```

对此：

```
intent.putExtra("tb", tb); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T23:52:40.090

我建议使用这个 clickListener

```
r1.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub
        if (intent!=null)
            startActivity(intent);
    }
}); 
```

因为，如果你的 mode.equals("25") 是假的，那么你的意图是空的。

# go - Golang - 在 SublimeText2 中找不到包

> ID：13830377
> 
> 赞同：3
> 
> 时间：2012-12-11T23:40:26.737
> 
> 标签：go, sublimetext2

当我尝试使用我的包执行我的 .go 脚本时，我`newmath`在 SublimeText2 中收到以下错误。

```
"test.go:5:2: import "newmath": cannot find package" 
```

**这就是我在 SublimeText2 中的构建系统**

```
{
"cmd": ["go","run", "${file}"],
"working_dir": "${file_path}",
"selector": "source.go, source.g"
} 
```

但是当我在终端中执行我的脚本时，go-compiler 可以找到该包并***成功***执行。而且我注意到 GOPATH 在重新启动后或一段时间后自行重置：/

**我的 Go 环境：**

```
GOARCH="amd64"
GOBIN=""
GOCHAR="6"
GOEXE=""
GOGCCFLAGS="-g -O2 -fPIC -m64 -pthread"
GOHOSTARCH="amd64"
GOHOSTOS="linux"
GOOS="linux"
GOPATH="/home/daggi/gocode/"
GOROOT="/usr/lib/go"
GOTOOLDIR="/usr/lib/go/pkg/tool/linux_amd64"
CGO_ENABLED="1" 
```

我认为这是 SublimeText2 的路径/环境问题，但我不知道。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T02:50:47.073

似乎构建系统不共享`GoSublime`设置环境，也不共享您自己的外壳环境。所以你必须专门设置它：

[构建系统](http://sublimetext.info/docs/en/reference/build_systems.html)

```
{
    "cmd": ["go","run", "${file}"],
    "working_dir": "${file_path}",
    "selector": "source.go, source.g",
    "path": "/usr/lib/go/bin:$PATH",
    "env": {
        "GOPATH": "$HOME/gocode/",
        "GOROOT": "/usr/lib/go",
        "PATH": "/usr/lib/go/bin:$PATH"
    }
} 
```

如果你的工作方式是你的 Sublime 项目是你的 GOPATH，你也可以切换你的`GOPATH`设置来使用而不是那个显式的 GOPATH。`${project}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T02:02:30.297

可能与此 GoSublime 问题有关，即使您似乎没有使用 GoSublime ：

> 这已在 OS X 和 Ubuntu 上报告。问题似乎是shell变量没有传递给超出GoSublime的GUI（在这种情况下为ST2）。

[https://github.com/DisposaBoy/GoSublime/issues/71](https://github.com/DisposaBoy/GoSublime/issues/71)

在您的 Sublime Text 2 用户设置中，您可以尝试设置您的环境变量（我说这不确定 GoSublime 或 ST2 是否专门读取“env”条目，所以这可能会或可能不会起作用，如果它不你可能想要安装和使用 GoSublime，这是非常棒的 IMO）：

```
 "env": {
    "GOROOT": "/usr/lib/go",
    "GOPATH": "/home/daggi/gocode"
  } 
```

高温高压

# c++ - 为 fstream 添加 NULL 终止符

> ID：13830380
> 
> 赞同：0
> 
> 时间：2012-12-11T23:40:36.870
> 
> 标签：c++

我正在尝试编写一个程序来保存链接列表的内容（每个单独的列表都称为局部性并包含多种数据类型）。代码编译但意外终止；它让我参考 ifstream 库中的行（即使我只想使用写作）

```
*_Str = _Elem();    // add terminating null character 
```

有谁知道出了什么问题？

```
 //saves a single locality onto a file
    void fSave_locality(Clinked *current, fstream *fout)
    {
        fout->write(current->site_name,100);
        fout->write((char*) &current->cood_x,sizeof(double));
        fout->write((char*) &current->cood_y,sizeof(double)); 
        fout->write((char *) &current->dip,sizeof(double)); 
        fout->write((char *) &current->strike,sizeof(double)); 

        if (current->next!=NULL) fSave_locality(current->next,fout);
    }

    void fSave_list(char* fname)
    {
        fstream *fout;
        do
        {
            cout<<"Would you like to save as a (b)inary or (t)ext file? ";
            test = getch();
            cout<<"Enter file name (make sure its unique!): ";
            cin.getline(fname,100);

            if(toupper(test)=='T') fout->open(fname, fstream::out);
            if(toupper(test)=='B') fout->open(fname, fstream::out| fstream::binary);
        }
        while(toupper(test)!='T' || toupper(test)!='B');

        if(fout->fail())
        {
            cout<<"unable to open file.\n";
            exit(0);
        } //it gets to here without any problems. 

        current = start;
        while(current->next!=NULL)
            {
                fSave_locality(current, fout);
                current=current->next; //repeat for the next object in the list
            }
        fout->close();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T23:59:15.127

我不明白你为什么要同时递归和顺序迭代？只需选择其中一个，我更改了代码，您还需要为您的 while 循环设置正确的限制，并确保您不使用空对象并尝试访问空对象上的元素。

```
 void fSave_locality(Clinked *current, fstream *fout)
    {
        fout->write(current->site_name,100);
        fout->write((char*) &current->cood_x,sizeof(double));
        fout->write((char*) &current->cood_y,sizeof(double)); 
        fout->write((char *) &current->dip,sizeof(double)); 
        fout->write((char *) &current->strike,sizeof(double)); 

        //if (current->next!=NULL) fSave_locality(current->next,fout); // comment this out
    } 
```

并更改以下部分：

```
while(current!=NULL)
    {
        fSave_locality(current, fout);  // you should either comment this one or the recursive one
        current=current->next; //repeat for the next object in the list
    } 
```

# wireshark - 捕获 Wireshark 过滤器的问题

> ID：13830381
> 
> 赞同：6
> 
> 时间：2012-12-11T23:40:37.667
> 
> 标签：wireshark

我正在尝试使用以下选项从 cli 启动 wireshark...

```
wireshark -k -i eth2 -a filesize:1000000 -f <capture filter> 
```

我遇到的问题是我想使用预定义的wireshark过滤器......当我在cli cmd中使用实际过滤器运行上述过滤器时，它可以工作，当我使用预定义的过滤器时它会失败..

工作示例：

```
wireshark -k -i eth2 -a filesize:1000000 -f "host 40.40.41.42" 
```

失败示例（我正在尝试使用的那个）：

```
wireshark -k -i eth2 -a filesize:1000000 -f pre-defined-capture1 
```

其中 pre-defined-capture1 过滤器确实显示在“Capture -> Options -> Capture Filter”列表下......

我得到的错误是过滤器无效，如果可能的话，我想指定我保存在捕获过滤器列表中的过滤器......

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:01:45.530

当您选择“捕获 -> 捕获过滤器”时，您将看到一个窗口，您可以在其中定义、更改和删除捕获过滤器以供将来使用。您实际上无法从那里激活捕获过滤器。

原因之一是某些捕获过滤器可能适用于某些物理接口，而它们可能不适用于其他物理接口。这就是为什么您需要在开始捕获会话时使用捕获选项激活捕获过滤器的原因。

转到“捕获 -> 选项”并使用“捕获过滤器”按钮选择您预定义的捕获过滤器。或者只需在对话框中键入您需要的过滤器。

如果您使用的是 1.7.0 版（或更高版本），则需要先双击要捕获的接口，因为您可以从 1.7.0 版本开始同时捕获多个接口，您可以设置每个接口的捕获过滤器不同。

[**如果您对需要更多说明有任何疑问，请随时询问 Wireshark 社区。**](http://ask.wireshark.org/questions/ask/)

# grails - Updating a field from a migration

> ID：13830386
> 
> 赞同：0
> 
> 时间：2012-12-11T23:41:03.460
> 
> 标签：grails, grails-orm, database-migration

I am adding a field using the migrations plugin:

```
databaseChangeLog = {
    changeSet(author: "me", id: "add publish_date") {
        addColumn(tableName: "book") {
            column(name: "publish_date", type: "timestamp") {
                constraints(nullable: "true")
            }
        }
    }
} 
```

I would also like to update `publish_date` for some `Book`s. One way of doing it is by using `sql.execute("UPDATE book SET publish_date = ____ WHERE year = 2012")` but this doesn't seem very database agnostic... and I'd like it to be.

I'm thinking that using `Book` domain in the migration would ensure that the migration works for different databases. Can anyone comment if this is sane/possible?

```
changeSet(author: "me", id: "add publish_date") {
    grailsChange {
        change {
            Book.findAllByYear(2012).each { book ->
                book.publishDate = _____
                book.save()
            }
        }
    }
} 
```

What are the options if you wanted to keep the migrations database agnostic?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:39:44.927

使用 Liquibase + 插件的方法是

```
update(tableName: 'book') {
   column name: 'publish_date', value: '____'
   where 'year = 2012'
} 
```

这与原始 SQL 方法有类似的问题，因为它可能因不同的数据库而异，但 Liquibase 没有 Hibernate 的 HQL 之类的东西。您可以将变更集限制为仅适用于特定数据库，因此您可以为您使用的每个数据库创建一个（例如，在 prod 中的类型与 dev 不同），并且只有正确的数据库才会运行。

GORM 的问题在于脚本是 Groovy 类并且不会使用不同版本的代码进行编译，因此如果有人落后或新开发人员通过运行所有迁移来构建数据库，他们将因编译错误而失败.

所以你需要选择哪种方法最不坏。

# ruby-on-rails - Heroku 预编译资产失败

> ID：13830392
> 
> 赞同：1
> 
> 时间：2012-12-11T23:41:29.447
> 
> 标签：ruby-on-rails, ruby-on-rails-3, deployment, heroku, asset-pipeline

更新后我的应用程序突然无法运行。不知道出了什么问题。基本上，当我推送到 heroku 时，我会收到以下错误：

```
Precompiling assets failed, enabling runtime asset compilation
Injecting rails31_enable_runtime_asset_compilation 
```

再高一点：

```
 rake aborted!
   Unexpected token: operator (>) (line: 19073, col: 9, pos: 605247)
   Error
   at new JS_Parse_Error (/tmp/execjs20121211-811-1z5vum.js:1720:22)
   at js_error (/tmp/execjs20121211-811-1z5vum.js:1728:15)
   at croak (/tmp/execjs20121211-811-1z5vum.js:2189:17)
   at token_error (/tmp/execjs20121211-811-1z5vum.js:2196:17)
   at unexpected (/tmp/execjs20121211-811-1z5vum.js:2202:17)
   at /tmp/execjs20121211-811-1z5vum.js:2580:17
   at maybe_unary (/tmp/execjs20121211-811-1z5vum.js:2665:27)
   at expr_op (/tmp/execjs20121211-811-1z5vum.js:2685:45)
   at expr_ops (/tmp/execjs20121211-811-1z5vum.js:2692:24)
   at maybe_conditional (/tmp/execjs20121211-811-1z5vum.js:2696:28) 
```

当我实际加载网站时（“我们很抱歉，但出了点问题”），并查看 heroku 日志，我得到了这个：

```
Load path: /app
2012-12-11T23:18:13+00:00 app[web.1]:     8:     <%= stylesheet_link_tag "application", :media => "all" %>
2012-12-11T23:18:13+00:00 app[web.1]:   (in /app/app/assets/stylesheets/custom.css.scss)):
2012-12-11T23:18:13+00:00 app[web.1]:     6:     <link href='http://fonts.googleapis.com/css?family=Kreon' rel='stylesheet' type='text/css'>
2012-12-11T23:18:13+00:00 app[web.1]: ActionView::Template::Error (File to import not found or unreadable: bootstrap.
2012-12-11T23:18:13+00:00 app[web.1]:     5:     <title><%= full_title(yield(:title)) %></title>
2012-12-11T23:18:13+00:00 app[web.1]:     7:     <%= favicon_link_tag 'favicon.ico' %>
2012-12-11T23:18:13+00:00 app[web.1]:     10:     <%= csrf_meta_tags %>
2012-12-11T23:18:13+00:00 app[web.1]:   app/assets/stylesheets/custom.css.scss:1
2012-12-11T23:18:13+00:00 app[web.1]:     11:     <meta name="google-site-verification" content="idIPkgRBikSL9PCS4rVkkZfRjxYbPxNbyF6tVymBWbc" />
2012-12-11T23:18:13+00:00 app[web.1]: 
2012-12-11T23:18:13+00:00 app[web.1]: 
```

（Kreon 是我不久前添加的一种附加字体，它一直运行良好。custom.css.scss 是我的主要 css 文件，第一行是我导入 bootstrap 的地方，这种方式没有改变并且一直有效）。

我搜索了如何处理“找不到或不可读的文件导入：引导程序”错误，并进入了[这个讨论](https://github.com/sferik/rails_admin/issues/759)并查看了[相关的 heroku 故障排除页面](http://devcenter.heroku.com/articles/rails31_heroku_cedar#troubleshooting)，但是在我的 production.rb 文件中将 assets.compile 更改为 true 导致上面的heroku推送错误，故障排除页面似乎与我的具体问题没有太大关系。不太确定这里发生了什么，所以我将在下面放一堆可能相关的代码。

宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'
gem 'googlecharts', :require => "gchart"
gem 'unicorn'
gem 'newrelic_rpm'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'
group :production do
    gem 'pg'
end

group :development do
    gem 'sqlite3'
    gem 'rspec-rails', '2.11.0'
  gem 'guard-rspec', '1.2.1'
end

group :test do 
    gem 'capybara', '1.1.2'
  gem 'rb-fsevent', '0.9.1'
  gem 'growl', '1.0.3'
  gem 'guard-spork', '1.2.0'
  gem 'spork', '0.9.2'
  gem 'factory_girl_rails', '4.1.0'
end

gem 'annotate', '2.5.0'
gem 'faker', '1.0.1'
gem 'will_paginate', '3.0.3'
gem 'bootstrap-will_paginate', '0.0.6'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'bootstrap-sass', '2.0.4'
  gem 'bcrypt-ruby', '3.0.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'
gem 'roadie'
gem 'stripe', :git => 'https://github.com/stripe/stripe-ruby'
gem 'delayed_job_active_record'
gem 'daemons'
gem 'foreman'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

生产.rb

```
MyApp::Application.configure do
  # Settings specified here will take precedence over those in config/application.rb

  # Code is not reloaded between requests
  config.cache_classes = true

  # Force all access to the app over SSL, use Strict-Transport-Security, 
  # and use secure cookies.
  config.force_ssl = true

  # Full error reports are disabled and caching is turned on
  config.consider_all_requests_local       = false
  config.action_controller.perform_caching = true

  # Disable Rails's static asset server (Apache or nginx will already do this)
  config.serve_static_assets = false

  # Compress JavaScripts and CSS
  config.assets.compress = true

  # Don't fallback to assets pipeline if a precompiled asset is missed
  config.assets.compile = true

  # Generate digests for assets URLs
  config.assets.digest = true

  # Defaults to nil and saved in location specified by config.assets.prefix
  # config.assets.manifest = YOUR_PATH

  # Specifies the header that your server uses for sending files
  # config.action_dispatch.x_sendfile_header = "X-Sendfile" # for apache
  # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for nginx

  # Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.
  # config.force_ssl = true

  # See everything in the log (default is :info)
  # config.log_level = :debug

  # Prepend all log lines with the following tags
  # config.log_tags = [ :subdomain, :uuid ]

  # Use a different logger for distributed setups
  # config.logger = ActiveSupport::TaggedLogging.new(SyslogLogger.new)

  # Use a different cache store in production
  # config.cache_store = :mem_cache_store

  # Enable serving of images, stylesheets, and JavaScripts from an asset server
  # config.action_controller.asset_host = "http://assets.example.com"

  # Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)
  # config.assets.precompile += %w( search.js )

  # Disable delivery errors, bad email addresses will be ignored
  # config.action_mailer.raise_delivery_errors = false

  # Enable threaded mode
  # config.threadsafe!

  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to
  # the I18n.default_locale when a translation can not be found)
  config.i18n.fallbacks = true

  # Send deprecation notices to registered listeners
  config.active_support.deprecation = :notify

  # Log the query plan for queries taking more than this (works
  # with SQLite, MySQL, and PostgreSQL)
  # config.active_record.auto_explain_threshold_in_seconds = 0.5
end 
```

真正让我感到震惊的是我的 heroku 推送日志中的这一行：

```
Unexpected token: operator (>) (line: 19073, col: 9, pos: 605247) 
```

问题是，我不知道该在哪个文件中查找这个麻烦的“>”。任何想法如何阅读该行/col/pos 命名法以找到实际的违规代码片段？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T01:04:59.817

从第 1 行开始`app/assets/stylesheets/custom.css.scss`，寻找错误的`>`. 还要确保 application.scss 符合您的期望。

也只需重命名`custom.css.scss`为`custom.scss`Heck，就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-19T17:06:40.293

在终端试试这个：

```
rake assets:precompile RAILS_ENV=production --trace 
```

比试图推动heroku更好。

我只是有同样的错误。问题是：

*   devise 的 config.secret_key 被评论
*   javascript 文件中的 syntax_error（for 循环中的“of”而不是“in”）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-28T01:00:43.210

同样的事情也发生在我身上，
“预编译资产失败”。在推送到 heroku 时，
在我的开发环境中，我的 css 出现错误：
“.........
光标：指针
颜色：#808080;”

缺少“；” 在“指针”之后，开发环境不介意错误，但 Heroku 的 PreCompile 任务却介意。

其他一些问题可能是由带有“css”和“css.scss”后缀的重复命名文件引起的。

# windows-phone-7 - 使用 BackgroundAudioPlayer.Track/Play 与 MediaHistoryItem.NowPlaying 时的音乐 + 视频集成

> ID：13830398
> 
> 赞同：0
> 
> 时间：2012-12-11T23:41:55.350
> 
> 标签：windows-phone-7, media-player

根据[`MediaHistory.NowPlaying`](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.devices.mediahistory.nowplaying%28v=vs.105%29.aspx)文档：

> 对于使用 BackgroundAudioPlayer 的应用程序，无需设置 NowPlaying 信息，因为它由系统自动处理

由于[`AudioTrack`](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.backgroundaudio.audiotrack%28v=vs.105%29.aspx)不包含 的等价物[`MediaHistoryItem.PlayerContext`](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.devices.mediahistoryitem.playercontext%28v=vs.105%29.aspx)，应用程序如何提供额外的数据，以便正确处理来自音乐 + 视频中心或通用音量控制的导航？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:36:50.120

我最终设置了一个`NowPlaying`，并将其链接到我的应用程序的“正在播放”部分。

*BackgroundAudioPlayer API*可能不需要您设置，但音乐 + 视频集成需要，`NowPlaying`它是提供其他信息（如`PlayerContext`数据）的唯一方法。

# java - Java-Android中的多线程

> ID：13830401
> 
> 赞同：4
> 
> 时间：2012-12-11T23:41:59.073
> 
> 标签：java, multithreading

我的问题是我有一个活动，我想在那里获取 read_list 方法的结果。但是 read_list 方法需要很长时间才能完成，因此我想创建一个新线程，并运行此方法，然后将其返回到主活动。我知道我可以用 AsyncTask 做类似的 smt，但是现在我想用这种方式来做。

```
 public class Read<T> implements Runnable(){

    Thread t;
    read(){
         t = new Thread(this);
         t.start();
    }

    public void run(){

       read_list();
    }

    public ArrayList<T> read_list(){

       ..........
       return ArrayList<T>
    }

 } 
```

主要活动：

```
 public Name extends Activity{

    .
    .
    .

    Read<Data> read = new Read<Data>();
    read.read_list();

 } 
```

问题：使用上述代码，我会激活一个新线程来执行 read_list 方法吗？或者该方法将在主线程上执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:52:36.143

> 问题：使用上述代码，我会激活一个新线程来执行 read_list 方法吗？或者该方法将在主线程上执行？

仅`Thread.start`启动一个新线程并在该新线程中调用对象的`run`方法。所以不，`read.read_list()`不会在不同的线程中执行。

**但：**

```
read(){
     t = new Thread(this);
     t.start();
} 
```

我认为应该是`Read`，它是构造函数。它也调用`start`和`run`调用`read_list`并丢弃结果。

因此，`read_list`将被调用两次，可能*同时*调用。

最后，我认为您将很难实现`read_list`、创建和填充任意类型的对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T23:58:50.007

新线程不会被执行，但是调用`read.read()`应该启动一个新线程

顺便提一句。我更喜欢使用匿名类，恕我直言，它更容易阅读：

```
public Name<T> extends Activity{
  .
  .
  .
  private List<T> stuff;

  Runnable read = new Runnable(){
    public void run(){
      ...
      stuff = new ArrayList<T>(..);
    }
  };
  read.start();
} 
```

# ruby-on-rails - Rails 通过引入浮点逻辑来搞乱 BigDecimals

> ID：13830402
> 
> 赞同：4
> 
> 时间：2012-12-11T23:42:08.277
> 
> 标签：ruby-on-rails, ruby, sqlite, floating-point, bigdecimal

我正在玩一些rails，我发现了一些奇怪的东西。为了存储货币值，我使用活动记录转换为 BigDecimal 的典型十进制数据类型。我认为这是精确的，并且我想避免浮点数学的奇怪行为。但是当我将 99.99 存储到数据库时，一切正常，但是当记录被活动记录加载时，它会失去精度并转换为 99.9899999999 之类的东西。这看起来像一个浮点问题。

我做了一些测试，发现像这样创建一个 BigDecimal b = BigDecimal.new("99.99") 会导致一个“干净”的变量，但是以这种方式构建它 b = BigDecimal.new(99.99) 会导致一个“不干净”的版本我想避免的。

我猜，ActiveRecord 在从数据库加载记录时使用中间浮点数重构 BigDecimal。这不是我想要的，我想知道是否可以避免。

Ruby 版本 1.9.3p0 Rails 3.2.9 Sqlite 3.7.9

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T00:11:07.590

您的问题是您使用的是 SQLite，而 SQLite 没有对`numeric(m,n)`数据类型的本机支持。来自[精美手册](http://www.sqlite.org/datatype3.html#storageclasses)：

> **1.0 存储类和数据类型**
> 
> 存储在 SQLite 数据库中（或由数据库引擎操作）的每个值都具有以下存储类之一：
> 
> *   **无效的。**该值为 NULL 值。
> *   **整数。**该值是一个有符号整数，根据值的大小存储在 1、2、3、4、6 或 8 个字节中。
> *   **真实的。**该值是一个浮点值，存储为一个 8 字节的 IEEE 浮点数。
> *   **文本。**该值是一个文本字符串，使用数据库编码（UTF-8、UTF-16BE 或 UTF-16LE）存储。
> *   **斑点。**该值是一团数据，完全按照输入的方式存储。

进一步阅读该页面以了解 SQLite 的类型系统是如何工作的。

您的 99.99 可能`BigDecimal.new('99.99')`在您的 Ruby 代码中，但几乎可以肯定它是 SQLite 中的**REAL**值`99.99`（即 8 字节 IEEE 浮点值），并且附近有。

所以在你的开发环境中切换到更好的数据库；特别是，在您将要部署的任何数据库之上进行开发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T01:29:43.263

### 不要将浮点数用于货币值

*是的，确切地说，SQLite 正在弄乱您的 BigDecimal 值。*

根本问题是 FP 格式无法正确存储大多数小数。

我相信你有四个选择：

1.  将所有内容四舍五入到小数点后两位，这样您就不会注意到稍微偏离的值。
2.  使用 TEXT 或 BLOB 存储类将 BigDecimal 值存储在 SQLite 中。
3.  使用具有某种十进制字符串支持的不同数据库。
4.  将所有内容缩放为整数值并使用 INTEGER 存储类。

^(问题是 FP 分数是 x/2 n)形式的有理数。但十进制货币金额的分数为 x/(2 ^n * 5 ^m )。表示只是不兼容。例如，在 0.01 ... 0.99 中，只有 0.25、0.50 和 0.75 具有精确的二进制表示。

# r - 为 ggplot2 定义一个新的 geom_xxx

> ID：13830414
> 
> 赞同：1
> 
> 时间：2012-12-11T23:44:05.667
> 
> 标签：r, ggplot2

我经常需要一个`geom_path`里面有黑点的。因此，我想有一个新`geom_dotpath`的可以用来代替调用 `geom_path`and `geom_point`。

```
LineColours <- brewer.pal(n=8,name="Paired")

ggplot() +
geom_path(data=mtcars, aes(x=mpg, y=qsec), size=1.5, colour=LineColours[3]) +
geom_point(data=mtcars, aes(x=mpg, y=qsec), size=1.5, colour=LineColours[4]) 
```

最好的情况是，如果新功能可以使用[为 ggplot2 生成亮色和暗色对](https://stackoverflow.com/questions/13665551/generate-pairs-of-bright-and-dark-colours-for-ggplot2)来自动找到较暗的颜色。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T03:05:35.707

我不知道颜色选择，但定义一个全新的几何图形应该不是真的必要。您应该能够只编写一个返回相关层的函数：

```
geom_dotpath <- function(data,x,y,pathCol,ptCol,...){
  p1 <- geom_path(data = data,aes_string(x = x,y = y),color = pathCol,...)
  p2 <- geom_point(data = data,aes_string(x = x,y = y),color = ptCol,...)
  list(p1,p2)
}

ggplot() + geom_dotpath(data = mtcars,
                        x = "mpg",
                        y = "qsec",
                        pathCol = LineColours[3],
                        ptCol = LineColours[4],
                        size = 1.5) 
```

# php - 只允许真正的访问者，并通过 PHP 阻止自定义“解析”机器人？

> ID：13830416
> 
> 赞同：0
> 
> 时间：2012-12-11T23:44:12.280
> 
> 标签：php, file-get-contents

我的网站上有一个大型在线游戏中所有项目的非常大的数据库，我的竞争对手也是如此。然而，我是唯一拥有所有这些项目图片的网站。所有这些图片都在我的服务器上，例如。从 1.png 到 99999.png（都在同一个目录中）。

我的竞争对手很容易创建一个简单的 file_get_contents/file_put_contents 脚本来将所有这些图像解析到他们自己的服务器并以自己的方式重新分发它们。对此我能做些什么吗？

有没有办法限制（例如）每个人每分钟只能看到/加载 100 张图像（我确信这些脚本会快速解析所有图像）？或者更好的是，只允许真实用户访问 URL 的？我确定这些脚本不会听 robots.txt 文件，那么更好的解决方案是什么？有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:06:20.513

在您的图像中放置水印，说明图像的版权归您或您的公司所有。您的竞争对手将不得不去除水印并使图像看起来从未有过，因此这绝对是一个很好的措施。

如果您使用的是 Apache Web 服务器，请创建一个图像文件夹并上传一个 htaccess 文件，告诉服务器只有您和服务器可以查看这些文件。这将有助于隐藏解析机器人的图像，因为 Apache 会看到它们无权查看文件夹中的内容。您需要让 PHP 加载图像（不仅仅是传递 img 标签），以便就权限系统而言，服务器正在访问原始文件。

在您的 PHP 页面本身上，使用 CAPTCHA 设备或其他一些机器人检测方法。

# visual-c++ - 在 Visual Studio 2012 中对低分辨率图像进行 OpenCV blob 跟踪

> ID：13830421
> 
> 赞同：1
> 
> 时间：2012-12-11T23:44:30.800
> 
> 标签：visual-c++, opencv, kinect-sdk

我在 C++ 中使用 Kinect SDK 来生成空间平面附近的点图像，目的是将它们用作触摸。我附上了该过程结果的 3 倍比例图像，所以这就是所有的肉汁。

> ![触摸示例图片](../Images/83c96544bdac7cbc61d668dd2604cd2b.png)

我的问题是如何最好地使用 OpenCV 从这个图像（和类似的图像）生成 blob 帧以用于触摸。这是我在我的 ProcessDepth 回调中尝试过的，其中 img 是触摸图像的单色 cv::Mat，而 out 是空的 cv::Mat。

```
 cv::Canny(img,out,100,200,3);
    cv::findContours(out,contours,cv::RETR_TREE,cv::CHAIN_APPROX_SIMPLE,cv::Point(0,0));

    mu.resize(contours.size());
    mc.resize(contours.size());

    for(int i = 0; i<contours.size();i++){
        mu[i] = cv::moments(contours[i],true);
    }
    for(int i = 0; i<contours.size();i++){
        mc[i] = cv::Point2f(mu[i].m10/mu[i].m00, mu[i].m01/mu[i].m00);
    } 
```

（我会发布更多代码，但 VMWare 不同意让我从中复制粘贴，如果您想要更多，请询问。）

在这一点上，我认为我应该为一个框架获得 blob 的质心，但实际上，它并不存在。当 contour.size() 返回大于 0 时，我会得到错误，或者通过一些修补，我会得到看起来非常奇怪的时刻，比如包含大的负数。所以我的问题如下：

*   就 findContours 中的标志而言，是否有人建议如何将下面的图像转换为具有良好结果的 blob 数据？
*   因为我已经有一个单色图像，我什至需要打扰 Cranny 或阈值，如果 Cranny，对于我正在处理的像素数量来说，3 的内核是否太大？
*   查找轮廓是否适用于这种尺寸的图像？（160 ish 乘 90 ish，虽然那是相当随意的。更普遍的是更小。）
*   OpenCV 函数是异步的吗？如果我的图像和轮廓矢量不作为应用程序类的属性存在，我会收到很多无效的地址错误。（我是第一个承认我不是特别有才华的 C++ 程序员的人。）
*   有没有一种更简单的方法可以从图像到对应于图像触摸的一系列点？

作为参考，我在我的 OpenCV 下载和[这个示例](http://docs.opencv.org/doc/tutorials/imgproc/shapedescriptors/moments/moments.html)中引用了一些示例。

如果您需要其他信息来更好地回答，请告诉我，我会尽力提供，谢谢！

# javascript - Google Chrome Inspector：如何在断点处编辑对象？

> ID：13830422
> 
> 赞同：2
> 
> 时间：2012-12-11T23:44:31.507
> 
> 标签：javascript, google-chrome-devtools, web-inspector

没有看到这个问题的重复。

我在事件对象上有一个断点（来自 fullCalendar）。我想手动更改参数，因为此数据来自后端。

例如

```
event: Object
 start: Fri Dec 14 2012 13:30:00 GMT-0600 
```

到

```
event: Object
 start: Fri Dec 14 2012 17:30:00 GMT-0600 
```

不确定这是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T00:03:58.347

我注意到，当脚本执行暂停时，范围变量（AKA 局部变量和闭包变量）在控制台中变得可用！您应该可以从那里修改它们

免责声明：我正在使用 Chromium 22，但我不知道这是 Chrome 中的错误还是所需的行为

# javascript - 哪些浏览器支持 getElementById？

> ID：13830423
> 
> 赞同：14
> 
> 时间：2012-12-11T23:44:32.263
> 
> 标签：javascript, cross-browser, getelementbyid

假设它`getElementById`适用于每个浏览器是否安全？如果不支持，哪些支持/不支持？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-11T23:54:00.043

所有浏览器都支持这一点，但是我在 IE6 和 7 中遇到了一个问题（添加到 @Esailija 的答案中）

做这个：

```
<input type="text" name="address" id="address" value="5th Avenue" /> 
```

不要这样做：

```
<input type="text" name="full_address" id="address" value="5th Avenue" /> 
```

您应该这样做的原因是因为在 Internet Explorer 中，如果您尝试使用 定位元素`getElementById`，由于某种原因，浏览器将搜索页面上某些元素的名称属性，除了 id。假设我们使用了错误的方法来编码 name 和 id 值，下面的代码块将在 IE7 中得到完全相同的结果：

```
var fullAddress = document.getElementById("full_address");  
alert(fullAddress.value);  

var fullAddress = document.getElementById("address");  
alert(fullAddress.value); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T23:45:57.653

当前所有浏览器都支持它。它从 DOM Level 1 开始就是 DOM 的一部分。所以基本上每个支持文档对象模块的浏览器（从 IE 5.5 开始）都应该支持这种方法。

资料来源：[MDN ( `document.getElementById`)](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-11T23:49:08.733

好吧，它得到了非常广泛的支持，但我知道至少有两个错误（[都来自 jQuery 源](http://code.jquery.com/jquery-1.8.3.js)）：

*   黑莓返回不在 dom 中的元素
*   `name`如果元素与 id 匹配，则返回元素（Opera、IE .. 版本未知）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T23:51:53.817

由于您要求它工作的最低要求，我认为这意味着您可以期望它工作的最早的浏览器，请查看此页面：

[http://www.quirksmode.org/dom/w3c_core.html](http://www.quirksmode.org/dom/w3c_core.html)

据它说，你在 IE-8 之前处于危险的境地（他们说“几乎”），并且在 FireFox、Safari、Chrome 和 Opera 方面表现出色。

# html - 如何使用带有自定义属性的 Haml haml_tag 方法？

> ID：13830425
> 
> 赞同：1
> 
> 时间：2012-12-11T23:44:48.677
> 
> 标签：html, ruby, haml

我想通过使用该`haml_tag`方法重现下面的haml代码。

```
= %img { alt:'Hi' , src: 'hi.jpg' } 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:58:26.893

不..我刚刚意识到这一点。它是这样的：

```
- haml_tag :img, { alt:'Hi' , src: 'hi.jpg' } 
```

注意细节的`-`代替`=`。`haml_tag`方法直接报告给haml模型。

比我想象的要容易。:)

# android - Android 上的应用内屏幕录制以每秒捕获 15 帧

> ID：13830427
> 
> 赞同：9
> 
> 时间：2012-12-11T23:44:59.420
> 
> 标签：android, screen-capture

经过大量搜索和几天的实验，我还没有找到一个直接的解决方案。

我正在开发一个应用程序，用户将在屏幕上与宠物互动，我想让他将其保存为视频。

是否有任何“简单”的方法来捕获应用程序本身的屏幕？

我找到了一种解决方法（每秒保存一些位图，然后将它们传递给编码器），但它似乎太重了。即使帧率为 15fps 我也会很高兴

这似乎是可能的，即有一个类似的应用程序可以做到这一点，它被称为“会说话的汤姆”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:28:30.060

这实际上取决于您实现“宠物视图”的方式。你在画布上画画吗？OpenGL ES？普通的Android视图层次结构？

无论如何，没有像其中一条评论所说的那样神奇的“recordScreenToVideo()”。

你需要：

*   获取代表您的“框架”的位图。这取决于您如何实现您的视图。如果您自己绘制（Canvas 或 OpenGL），则将原始像素缓冲区保存为帧。如果您使用普通视图层次结构，则将 Android 的 onDraw 子类化并保存您在画布上获得的“帧”。系统调用 onDraw 的频率不会低于屏幕的实际“帧率”。如果需要，之后复制帧以提供 15fps 的视频。

*   编码你的帧。好像你已经有一个机制来做到这一点，你只需要它更有效率。

优化编码的方法：

*   缓存您的位图（帧）并在之后进行编码。这仅在您预期的视频相对较短时才有效，否则您将无法存储。
*   仅以您的应用实际生成的帧速率录制（取决于您绘制的方式）并使用编码器参数生成 15fps 视频（实际上不提供每秒 15 帧）。
*   调整当前设备的质量设置。可以通过在应用启动时执行隐藏的 CPU 周期测试并定义一些阈值来完成。
*   仅对屏幕最相关的部分进行编码。
*   同样，实际上取决于您实施的方式 - 如果您可以保存一些“历史数据”，然后将其转换为帧而无需实时执行，那将是最好的。例如，“移动”、“微笑”、“改变颜色”——或者任何你的业务逻辑，因为你没有详细说明。您的“生成电影”功能会将这些历史数据动画化为帧序列（不绘制到屏幕上），然后进行编码。

希望有帮助

# dynamics-crm-2011 - 过滤查找多个相关记录

> ID：13830429
> 
> 赞同：0
> 
> 时间：2012-12-11T23:45:30.343
> 
> 标签：dynamics-crm-2011

我对自定义实体进行了以下设置。

与产品相关的事件（服务案例）

与产品相关的第 1 级投诉和第 2 级投诉

与产品相关的第 2 级投诉

我通过添加第 1 层和第 2 层字段自定义了事件表单。我想要的是用户选择第 1 层，但可用的值只是那些与表单上选择的产品相关的值。这部分很容易做到。

症结在于第 2 层领域。我想要的是将用户限制为根据所选的第 1 层值和当前选择的产品过滤的第 2 层值。开箱即用，我可以使用相关记录过滤来实现其中一个，但不能同时实现两者。

任何有关如何实现这一目标的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:30:53.383

通过使用 javascript 即时创建视图并将其设置为默认视图进行排序。

# xml - 如何引用 XSD 的元素/如何建立指向 XSD 文件元素的链接以引用其文档？

> ID：13830430
> 
> 赞同：1
> 
> 时间：2012-12-11T23:45:34.603
> 
> 标签：xml, xsd, lzx

我有几个 XML 样式的文档，我有一个 XSD 文件，其中包含一些标签的文档。

我想将 XSD 中的一些文档链接到 XML 中的一些元素。

XSD 文档例如： http: [//svn.apache.org/viewvc/incubator/openmeetings/trunk/singlewebapp/WebContent/openmeetings/config.xsd](http://svn.apache.org/viewvc/incubator/openmeetings/trunk/singlewebapp/WebContent/openmeetings/config.xsd?view=markup) ?view=markup => element rtmphostlocal

现在我有一个 XML 文档，例如：http: [//svn.apache.org/viewvc/incubator/openmeetings/trunk/singlewebapp/WebContent/src/base/mainAttributes.lzx ?view=markup](http://svn.apache.org/viewvc/incubator/openmeetings/trunk/singlewebapp/WebContent/src/base/mainAttributes.lzx?view=markup)

有一个属性：

```
<attribute name="rtmphostlocal" value="" type="string" /> 
```

我想从另一个 XML 文档的注释区域中的元素 rtmphostlocal 链接 XSD 文档。这样就只有一个文档源可供编辑，我不必在使用该属性的任何地方复制评论。一种 JavaDoc 风格。

我怎样才能做到这一点？
是否有一些像 HTML 中带有#anchors 的符号来链接 XSD 中的某些元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T04:43:31.083

您希望能够从另一个文档指向`rtmphostlocal`您显示的架构文档中的元素声明吗？它是一个 XML 文档；给元素声明一个 ID，并指向它。元素声明可能如下所示：

```
<xs:element name="rtmphostlocal" id="elem_rtmphostlocal">
  ...
</xs:element> 
```

有些人可能更喜欢使用`xml:id="..."`而不是`id="..."`.

读取指向文档的链接的系统是否能够对它做任何有用的事情，主要取决于它们是否支持 XPointer 规范中指定的 XML 片段标识符。但是你没有要求支持 XPointer 的软件，你要求的是一个符号。答：是的，有一个符号。使用 ID。

# jquery - Flexslider 仅在 IE8-9 上显示最终幻灯片

> ID：13830436
> 
> 赞同：0
> 
> 时间：2012-12-11T23:46:04.513
> 
> 标签：jquery, wordpress, flexslider

在 IE8 和 9 中 - 仅显示最后一张幻灯片，虽然控制导航按钮可以正常工作，但它在其他所有浏览器中都可以正常工作。不确定这是 CSS 还是 jQuery 问题。

这是有问题的网站：http: [//bit.ly/SV8E0d](http://bit.ly/SV8E0d)

这是一个 WordPress 网站，我正在像这样初始化 flexslider：

`jQuery( document ).ready( function( $ ) { $('.flexslider').flexslider({ animation: "slide", controlNav: true, directionNav: true }); });`

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:54:21.670

好吧，我不知道为什么，但似乎 IE 不喜欢`animation: "slide"` 一旦我删除它开始工作，尽管使用了淡入淡出过渡，但它正在工作！

# php - codeigniter：将变量传递给加载表单的控制器

> ID：13830438
> 
> 赞同：1
> 
> 时间：2012-12-11T23:46:09.307
> 
> 标签：php, codeigniter

我有一个链接，单击该链接时会将参数传递给我的控制器到如下函数：

/home/查询/54

*   然后我想加载一个包含表单的视图并收集一些输入数据。
*   然后我想通过电子邮件将参数和表单数据发送给自己

这是我的控制器：

```
public function inquire($id) {

    $this->form_validation->set_rules('inputName', 'Name', 'required');

    if ($this->form_validation->run() == FALSE) {
        $this->load->view('client/M_inquire.php');
    } else {

        $this->email->from('noreply@test.com', 'System');
        $this->email->to('contactus@test.com');
        $this->email->subject('New Client Registration');

        $this->email->message(
                "Name: " . $this->input->post('inputName') . "<br />" .
                "Phone: " . $this->input->post('inputPhone') . "<br />" .
                "Email: " . $this->input->post('inputEmail') . "<br />" .
                "Nurse profession: " . $this->input->post('inputProfession') . "<br />" .
                "Nurse ID: " . $nurseid
        );
        $this->email->send();
        $this->load->view('client/M_inquire_success.php');
    }
} 
```

这是我的观点：

```
 <?php echo form_open('home/inquire'); ?>
    <label>Full Name</label>
    <input type="text" name= "inputName" id="inputName"> 
```

问题是控制器需要一个参数，因此当表单打开时它会崩溃。知道如何维护我传递的第一个参数并收集一些表单数据和电子邮件吗？

多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:49:53.950

在您对视图的调用中`form_open`，您可以附加`id`.

所以，在你的控制器中，你可以有类似的东西：

```
...
if ($this->form_validation->run() == FALSE) {
    $data['the_id'] = $id;
    $this->load->view('client/M_inquire.php', $data);
} else {
... 
```

然后在您的视图中：

```
<?php echo form_open('home/inquire/' . $the_id); ?> 
```

# javascript - Twitter bootstrap scrollspy 不适用于导航药丸和平滑滚动

> ID：13830445
> 
> 赞同：1
> 
> 时间：2012-12-11T23:47:26.983
> 
> 标签：javascript, jquery, twitter-bootstrap

我使用 Bootstrap 的导航药丸作为我的顶部导航栏，并且当单击药丸时，我使用了一段代码滚动到页面上的某个点。我现在正试图让 scrollspy 工作，所以药丸的类将从“活动”变为“禁用”（我为“禁用”类设置了特殊的 CSS，但我没有运气。有什么想法吗？

这是代码：

```
 <!-- Bootstrap -->
    <link href="bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="pantastic.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Questrial|Lobster|Open+Sans:300,400|Josefin+Sans:300,400' rel='stylesheet' type='text/css'>
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="js/jquery.slideto.min.js" type="text/javascript"></script>
    <script type="text/javascript">
    $(document).ready(function(){ 

        $(window).scroll(function(){
            if ($(this).scrollTop() > 100) {
                $('.scrollup').fadeIn();
            } else {
                $('.scrollup').fadeOut();
            }
        }); 

        $('.scrollup').click(function(){
            $("html, body").animate({ scrollTop: 0 }, 600);
            return false;
        });

        $('.toplogo').click(function(){
            $("html, body").animate({ scrollTop: 0 }, 600);
            return false;
        });

        $('.firstscroll').click(function(){
            $("html, body").animate({ scrollTop: 0 }, 600);
            return false;
        });

        $('.secondscroll').click(function(){
            $("html, body").animate({ scrollTop: 500 }, 600);
            return false;
        });

        $('.thirdscroll').click(function(){
            $("html, body").animate({ scrollTop: 1450 }, 600);
            return false;
        });

        $('.fourthscroll').click(function(){
            $("html, body").animate({ scrollTop: 2740 }, 600);
            return false;
        });

    });

    </script>  
  </head>

  <body data-spy="scroll" data-target=".nav nav-pills">

     <div class="navbox">
      <div class="container">
        <div class="row">
          <div class="span5">
        <a href="#"><img class="toplogo" src="navlogo.png" alt="logo"/></a>
        </div>
        <div class="span10 offset5">
        <div class="navbuttons">
        <ul class="nav nav-pills custom">
        <li class="active firstscroll">
            <a href="#1">Home</a>
        </li>
         <li class="disabled secondscroll"><a href="#secondunit">What is Pantastic?</a></li>
         <li class="disabled thirdscroll"><a href="#3">About Us</a></li>
         <li class="disabled fourthscroll"><a href="#4">FAQ</a></li>
         <li class="disabled"><a href="#modal" data-toggle="modal"><img src="Price_Button.png" alt="Order Now" onmouseover="this.src='Price_Buttonhover.png'" onmouseout="this.src='Price_Button.png'"/></a></li>
       </ul>
       </div>
      </div>
      </div>
    </div>
  </div>

   <div class="herounit">
    <div class="container">

          <h1> Introducing Pantastic! </h1>

      <div class="row">
        <h4> Pantastic is the easiest way to bring your iPhone panoramas to life! Simply send us your panorama, and we will print, matte, and ship it right to your doorstep. </h4>
      </div>
        <div id="secondunit">
      <div class="row">
          <img src="pricetag2.png" alt="pricetag">
    </div>
   </div>
   </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-05T23:31:34.343

我知道这个问题已经过时了，但是我今天遇到了这个问题，并想帮助那些将来需要的人找到这个问题。

确保 data-target 属性设置为导航的父元素（id/class）。我在使用 jQuery 插件 animatescroll 时遇到了类似的问题。BootStrap 文档还指出....

需要可解析的 ID 目标

导航栏链接必须具有可解析的 id 目标。例如，一个 home 必须对应 DOM 中的某些内容，例如 .

[每个 BS 文档所需的可解析 ID 目标](http://getbootstrap.com/javascript/#scrollspy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-02T23:06:04.177

而不是这个：

```
<body data-spy="scroll" data-target=".nav nav-pills"> 
```

用这个：

```
<body data-spy="scroll" data-target=".navbuttons"> 
```

一方面，我不确定你是否可以定位两个类，我相信它只采用一个目标元素，并且在上面你以两种方式引用目标。加上它的正确目标，它应该是父级，但是如果您曾经通过两个类名引用一个元素，则需要像这样引用它：

```
<body data-spy="scroll" data-target=".nav.nav-pills"> 
```

# c++ - 如何在循环 C++ 中创建唯一指针？

> ID：13830450
> 
> 赞同：1
> 
> 时间：2012-12-11T23:47:47.480
> 
> 标签：c++, pointers

我正在`double`从标准输入中读取 a 并将其保存到变量`d`中。我希望能够执行此操作的次数不详。我使用以下代码创建指向`d`.

```
double *pd = new double;
pd = &d; 
```

然后，我将此指针推送到构造的堆栈（列表）类中。但是，每当我推动超过一个双倍时，它都会改变所有这些（指针是相同的）。

前任。push 2 得到一个数组[2]。push 3 并得到数组 [3, 3] 而不是 [3, 2]。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T23:56:00.127

你为什么要使用指针？

```
std::vector<double> v;

double d;
while (std::cin >> d)
    v.push_back(d); 
```

或者正如克里斯指出的那样：

```
std::copy(std::istream_iterator<double>(std::cin),
          std::istream_iterator<double>(),
          std::back_inserter(v)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T23:50:13.867

```
*pd = d 
```

代替

```
pd = &d; 
```

你要做的是：

*   你`double d`在堆栈上有变量
*   您创建 double 并将其指针保存在`pd`变量中
*   **然后将地址保存到 pd 中的 d 变量**
*   然后你从`pd`列表中保存地址

这意味着您有变量地址列表`d`（列表中的每个对象都是指向`d`变量的指针）。

# javascript - 如何彻底销毁 swipe.js

> ID：13830452
> 
> 赞同：2
> 
> 时间：2012-12-11T23:47:51.677
> 
> 标签：javascript, javascript-events

我在一个项目中使用[swipe.js 。](https://github.com/bradbirdsall/Swipe)

我正在动态更改滑块中的数据。

当数据发生变化时，我一直在创建一个新的滑动对象，但是它并没有破坏回调等，这会导致问题。如何销毁滑动对象，或者至少刷新它？

```
 <div id='flyers'>
      <ul>
       <li style='display:block'></li>
       <li style='display:none'></li>
       <li style='display:none'></li>
      </ul>
    </div>

  window.slider = new Swipe(document.getElementById('flyers'), {
    startSlide: 0,
    speed: 200,
    callback: function(event, index, elem) {
        $('#home .flyerNav .selected').removeClass('selected');
        $('#home .flyerNav').children().eq(index).addClass('selected');
        $('#home .flyerLoves').attr('imgId',slides[index].imgId);
        daterizer(index);
    }
  }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T00:00:39.587

试试[swipe2 分支](https://github.com/bradbirdsall/Swipe/tree/swipe2)。它有一个`kill`方法可以删除它设置的事件监听器。我假设它还没有正式“完成”，但如果它没有任何明显的错误，它可能对你有用。您会`window.slider.kill()`在实例化新的之前调用。

# xamarin.ios - 如何强制 Monotouch AOT 编译器查看嵌套的泛型方法？

> ID：13830468
> 
> 赞同：25
> 
> 时间：2012-12-11T23:49:17.217
> 
> 标签：xamarin.ios, servicestack, aot

我不得不跳过篮球，但我几乎设法在我的项目中`ServiceStack`开始使用 iOS 。`Monotouch`一个运行时`JIT`异常是坚持：

```
System.ExecutionEngineException: Attempting to JIT compile method 'ServiceStack.Text.Json.JsonTypeSerializer:GetWriteFn<int> ()' while running with --aot-only. 
```

有问题的代码非常简单：

```
 internal WriteObjectDelegate GetWriteFn<T>()
    {
        return JsonWriter<T>.WriteFn();
    } 
```

作为测试，我修改了 SS 代码以公开内部方法和类型，并在我的项目的启动代码中包含以下内容（实际被调用）。

```
var ick = ServiceStack.Text.Json.JsonWriter<int>.WriteFn();
var erk = ServiceStack.Text.Json.JsonTypeSerializer.Instance.GetWriteFn<int>(); 
```

由于某种原因，这仍然没有提醒 AOT，当上面的代码执行时我得到了异常！这是因为泛型参数是值类型吗？还是因为这些是静态类和方法？如何强制 Monotouch 使用上述方法进行 AOT？

有问题的 SS 代码位于 JsonTypeSerializer.cs 和 JsonWriter.Generic.cs 中： [https ://github.com/ServiceStack/ServiceStack.Text/tree/master/src/ServiceStack.Text/Json](https://github.com/ServiceStack/ServiceStack.Text/tree/master/src/ServiceStack.Text/Json)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-21T11:00:31.290

现在 monotouch有一些通用的[限制](http://docs.xamarin.com/guides/ios/advanced_topics/limitations)。我认为您应该检查其中之一的代码。

# database-design - 使用 NoSQL 建模排名

> ID：13830469
> 
> 赞同：0
> 
> 时间：2012-12-11T22:55:10.820
> 
> 标签：database-design, nosql, google-app-engine

我正在使用 Google App Engine，一种非关系型数据库 (NoSQL)。我的问题是，使用他们的分数来模拟排名（玩家排名）的最佳方法是什么？

例如，我的球员是：

```
Player { String name, int score} 
```

我想知道一个玩家的排名（位置）并获得前 10 名玩家，但我不确定哪个是最好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:29:37.663

有一个名为 google app engine ranklist 的库。 [http://code.google.com/p/google-app-engine-ranklist/](http://code.google.com/p/google-app-engine-ranklist/)

> Ranklist 是一个用于 Google App Engine 的 Python 库，它实现了一种数据结构，用于存储整数分数并快速检索它们的相对排名。
> 
> [源代码中包含一个非常简单的示例应用程序，可以在http://ranklist-example.appspot.com](http://ranklist-example.appspot.com)上试用。

# php - PHP PDO DB 函数返回 1 而不是请求的值

> ID：13830470
> 
> 赞同：0
> 
> 时间：2012-12-11T23:49:39.730
> 
> 标签：php, mysql, pdo

我有点困惑，因为当尝试下面的代码时，我收到了想要的结果。

```
 include_once('config.class.php');
   $db = Core::getInstance();     
   $whr = 'test@nannex.com';

  $inv = $db->dbh->prepare("SELECT * FROM ruj_users WHERE email=:whr");
  $inv->execute(array(":whr"=>$whr));
  $row = $inv->fetch(PDO::FETCH_ASSOC);
    echo $row['email'];
    echo $row['full_name']; 
```

但是，当我运行以下代码时，它返回 1 而不是所需的结果。

```
 include_once('config.class.php');
     $db = Core::getInstance();     
     $whr = 'test@nannex.com';    

     function fetchUser($whr){  
    $db = Core::getInstance();              
    $inv = $db->dbh->prepare("SELECT * FROM ruj_users WHERE :whr");
            $inv->execute(array(':whr'=>$whr)); 
    $res = $inv->fetch(PDO::FETCH_ASSOC);
    return $res;
}
    $row = fetchUser("email = '".$whr."' "); 
    echo $row['email'];
    echo $row['full_name']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:53:49.747

您在函数中的查询中有错误：

```
$inv = $db->dbh->prepare("SELECT * FROM ruj_users WHERE :whr"); 
```

应该：

```
$inv = $db->dbh->prepare("SELECT * FROM ruj_users WHERE email=:whr"); 
```

**编辑：**如果您还想传递列名，则必须向函数添加另一个变量：

```
function fetchUser($column, $value) { 
```

请注意，只有值可以绑定在准备好的语句中，您必须对照白名单检查列变量以避免查询中的 sql 注入和硬代码，例如`... WHERE $column = :whr ...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T23:56:13.307

这个查询：

```
SELECT * FROM ruj_users WHERE :whr 
```

展开时：

```
SELECT * FROM ruj_users WHERE 'email = \'test@nannex.com\'' 
```

该表达式`email = \'test@nannex.com\'`将由 MySQL 评估为布尔值，并且始终为真，因此它将返回`ruj_users`.

如果你想要自定义条件，你可以这样做：

```
function fetchUser(array $conditions)
{
    // ...
    $sql = 'SELECT * FORM ruj_users WHERE';
    $params = array();
    foreach ($conditions as $column => $value) {
        if (preg_match('/^[a-z]+$/', $column)) {
            $sql .= "`$column` = ?";
            $params[] = $value;
        }
    }
    $inv = $db->dbh->prepare($sql);
    $inv->execute(array_values($params));
    // ...
}

fetchUser(array(
    'email' => 'test@nannex.com',
    'status' => 23,
)); 
```

# java - java中的序列化

> ID：13830471
> 
> 赞同：4
> 
> 时间：2012-12-11T23:49:50.373
> 
> 标签：java, serialization

我们的代码中有一个实现 Serializable 的 java 类。它已经在类中定义了一个 serialVersionUUId。除此之外，我们还有另一个

static final String sVersion 是一个整数。这个类实现了 readObject 和 writeObject api。在 readObject API 中，它使用 InputStream 填充所有成员变量，在 writeObject API 中，它获取一个 OutputStream 并调用 writeObject 方法。

现在我需要添加一个布尔数组作为这个类的属性。我应该更改 serialVersionUUID 吗？如果我更改/不更改版本 ID，会发生什么影响？最佳实践是什么？我试图通过 joshua bloch 进入 Effective java，但需要一个快速易于消化的答案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T00:54:07.747

> 该类实现了 readObject 和 writeObject api。在 readObject API 中，它使用 InputStream 填充所有成员变量，在 writeObject API 中，它获取一个 OutputStream 并调用 writeObject 方法。

为什么？如果您根本不提供这些方法，那将是默认操作。[虽然我不知道你所说的“获取一个输出流”到底是什么意思，除非你指的是作为参数提供的那个。]

但是，既然您在这里，您所要做的`readObject()`就是尝试读取新字段并捕获如果它们不存在则抛出的异常（`OptionalDataException`？），并`writeObject()`写出额外的字段。

***不要更改`serialVersionUID`.*** 相反，您应该探索序列化的广泛对象版本控制支持，(a) 确保该类现在确实是序列化不兼容的，根据规范很难实现；(b) 尝试自定义 read/writeObject() 方法、readResolve/writeReplace() 方法、serializableFields 声明等方案，以确保流保持兼容。更改实际的 serialVersionUID 是最后的手段，是绝望的建议。

在继续之前，您需要仔细[阅读 Object Serialization Specification 的 Object Versioning 部分](http://docs.oracle.com/javase/6/docs/platform/serialization/spec/version.html)。序列化对类进化的支持比大多数人似乎意识到的要多得多，包括这个问题的其他受访者以及他们所链接的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T00:00:51.703

如果您最终可能会尝试反序列化该类的不兼容实例，那么是的，您绝对应该更新 serialVersionUID。另一方面，如果您的程序总是序列化和反序列化数据而不将其保存到持久存储中，或者您的类与其调用者之间的合同仍然可以得到保证，那么您不需要更改 serialVersionUID。

有关详细信息，请参阅[https://stackoverflow.com/a/286254/44737](https://stackoverflow.com/a/286254/44737)和[https://stackoverflow.com/a/285827/44737](https://stackoverflow.com/a/285827/44737)。

# r - 在 survdiff 调用中使用 survfit 对象的公式

> ID：13830474
> 
> 赞同：7
> 
> 时间：2012-12-11T23:49:57.910
> 
> 标签：r, survival-analysis

我正在 R 中进行一些生存分析，并希望整理/简化我的代码。

目前我在数据分析中做了几个步骤：

1.  制作一个 Surv 对象（时间变量，指示每个观察是否被审查）；
2.  根据分类预测器拟合此 Surv 对象，用于绘制/估计中位生存时间过程；和
3.  计算对数秩检验，以询问是否存在组间生存“显着”差异的证据。

作为一个例子，这里是一个使用 R 的生存包中的肺数据集的模型。所以下面的代码与我想要做的足够相似，但在预测器集方面简化了很多（这就是我想要的原因为了简化代码，所以我不会跨模型进行不一致的调用）。

```
library(survival)

# Step 1: Make a survival object with time-to-event and censoring indicator.
# Following works with defaults as status = 2 = dead in this dataset.
# Create survival object
lung.Surv <- with(lung, Surv(time=time, event=status))

# Step 2: Fit survival curves to object based on patient sex, plot this.
lung.survfit <- survfit(lung.Surv ~ lung$sex)
print(lung.survfit)
plot(lung.survfit)

# Step 3: Calculate log-rank test for difference in survival objects
lung.survdiff <- survdiff(lung.Surv ~ lung$sex)
print(lung.survdiff) 
```

现在这一切都很好，花花公子，我可以忍受这个，但想做得更好。

所以我的问题是关于第 3 步。我想在这里做的是能够使用来自lung.survfit 对象的公式中的信息来计算生存曲线的差异：即在对survdiff 的调用中。这就是我驯服的 [原文如此] 编程技能碰壁的地方。以下是我目前的尝试：如果您能提供任何帮助，我将不胜感激！一旦我可以解决这个问题，我应该能够将解决方案包装在一个函数中。

```
lung.survdiff <- survdiff(parse(text=(lung.survfit$call$formula)))
## Which returns following:
# Error in survdiff(parse(text = (lung.survfit$call$formula))) : 
# The 'formula' argument is not a formula 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T20:15:57.680

正如我上面评论的那样，我实际上在写完这个问题后不久就整理出了这个问题的答案。

所以上面的步骤 3 可以替换为：

```
lung.survdiff <- survdiff(formula(lung.survfit$call$formula)) 
```

但正如 Ben Barnes 在对问题的评论中指出的那样，可以更直接地从 survfit 对象中提取公式

```
lung.survdiff <- survdiff(formula(lung.survfit)) 
```

这正是我想要并希望能够提供的——谢谢本！

# vim - 使选项卡在 vim 中显得更小

> ID：13830477
> 
> 赞同：0
> 
> 时间：2012-12-11T23:50:11.230
> 
> 标签：vim, tabs, whitespace, spaces

> **可能重复：**
> [Tab 键 == 4 个空格并在 VIM 中的花括号后自动缩进](https://stackoverflow.com/questions/234564/tab-key-4-spaces-and-auto-indent-after-curly-braces-in-vim)
> [Vim：如何将制表符重新定义为 4 个空格](https://stackoverflow.com/questions/1878974/vim-how-to-redefine-tab-as-4-spaces)

我正在用 vim 写作，而且我处于制表符与空格大战的制表符一侧。

但是，选项卡占用了相当多的屏幕空间。我怎样才能使它们在功能上与制表符相同，但显示的长度与四个空格相同？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T23:53:08.063

添加

```
set tabstop=4 
```

到你的 $HOME/.vimrc

# html - Google 已禁止此应用程序使用 Maps API

> ID：13830478
> 
> 赞同：0
> 
> 时间：2012-12-11T23:50:11.867
> 
> 标签：html, google-maps

我正在为一家公司开发一个基本站点，并且在联系页面上有一张地图。我输入了谷歌 API，它工作了几个小时。然后突然开始出现一个错误，上面写着：

Google 已禁用此应用程序的 Maps API。提供的密钥不是有效的 Google API 密钥，或者未授权用于本网站上的 Google Maps Javascript API v3。如果您是此应用程序的所有者，您可以在此处了解如何获取有效密钥：[https ://developers.google.com/maps/documentation/javascript/tutorial#Obtaining_Key](https://developers.google.com/maps/documentation/javascript/tutorial#Obtaining_Key)

我会重置我的 API 密钥，但我还有两个使用该密钥的活动站点。可以使用 API 密钥的站点数量是否有限制？这些网站的流量根本不高，所以我怀疑我是否达到了每天 25,000 的限制。

有谁知道问题可能是什么？我不认为它在代码中，因为它之前工作正常。谷歌为什么要禁用它？

我不是一个非常有经验的程序员，所以任何人都可以简单地帮助我吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T23:56:32.083

Hey check this out [https://developers.google.com/maps/signup](https://developers.google.com/maps/signup) cant post it as link writing from cell phone. You dont need a API key if you use V3 of the API. Hope this helps you!

Edit: Im using the console key to monitor my sites requests :)

# html - IE8/9 window.postMessage 不工作，但为什么？

> ID：13830480
> 
> 赞同：13
> 
> 时间：2012-12-11T23:50:16.317
> 
> 标签：html, internet-explorer

"postMessage" 是一个 HTML5 API，它在包括 IE8/9 在内的所有主流浏览器中都可用。我想做的是从页面创建一个弹出窗口，并能够使用“postMessage”与弹出窗口对话。这适用于除 IE8/9 之外的所有浏览器。失望的！

看起来 IE8/9 只允许 iframe 之间的通信，而不是两个窗口之间的通信，即使窗口在同一层次结构内。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-08-08T07:33:04.877

我发现`.postMessage()`在 IE9 中是不可靠的，除非我使用`String`s.

我的解决方法是在另一端的函数中简单地调用`.postMessage(JSON.stringify({object: 'data'}))`和使用。`JSON.parse()``onMessage()`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-12T00:39:29.700

该`.postMessage`方法*有效*，您只需要从 IE8 及更高版本了解它是如何工作的*。*不幸的是，对于 IE8 和 IE9，它不会做你想要的（尽管它在 IE10 中会做）。虽然您可以在 IE8/9 中的帧之间发送消息，但您不能将消息发送到单独的窗口。

有一种解决方法在*某些*情况下有效。Martin Beeby 在他关于这个问题的博客文章的最后一段中讨论了它：[PostMessage Popups 和 IE](http://blogs.msdn.com/b/thebeebs/archive/2011/12/21/postmessage-popups-and-ie.aspx)。

有关这方面的更多信息以及其他一些注意事项，请参阅 Eric Lawrence[在 MSDN 上的帖子](http://blogs.msdn.com/b/ieinternals/archive/2009/09/16/bugs-in-ie8-support-for-html5-postmessage-sessionstorage-and-localstorage.aspx)。

# c - 做一个 JACK 编程测试我得到了响应：用法：jack_simple_client

> ID：13830492
> 
> 赞同：0
> 
> 时间：2012-12-11T23:51:48.037
> 
> 标签：c, audio, recording, jack

我得到这个代码来成功编译 [http://dis-dot-dat.net/index.cgi?item=jacktuts/starting/wholesimple](http://dis-dot-dat.net/index.cgi?item=jacktuts/starting/wholesimple)

当我运行它时，它会告诉我以下内容

> 用法：jack_simple_client

所以我认为它需要某种输入，所以我尝试像下面这样运行它

> ./jack_simple_client 0

它告诉我以下内容

`jack_client_new: deprecated`

`Cannot connect to server socket err = No such file or directory`

`Cannot connect to server socket`

`jack server is not running or cannot be started`

那么我如何获得“杰克”列表呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:56:58.187

你必须先启动一个 jackd 服务器，通常使用 alsa 后端。

```
jackd -d alsa 
```

现在另一个终端上的 jack_simple_client 应该可以工作

```
jack_simple_client 
```

# jquery - Jquery POST 和建议列表

> ID：13830502
> 
> 赞同：-2
> 
> 时间：2012-12-11T23:52:48.170
> 
> 标签：jquery

> **可能重复：**
> [建议列表的 Jquery POST](https://stackoverflow.com/questions/13824510/jquery-post-for-suggestion-list)

我有下一个代码，它运行良好，问题是当用户写完单词时，脚本会不断创建帖子调用并不断更改建议列表。

我想做一些事情，如果用户继续写一个单词，脚本会停止所有的 post 调用，只做最后一个。

```
$("#inputString").keydown(function() {
lookup($(this).val());
//alert('a');
});

function lookup(inputString) {
if(inputString.length == 0) {
    $('#suggestions').fadeOut(); // Hide the suggestions box
} else {
    $.post("../jsonshow.php", {q: ""+inputString+""}, function(data) { // Do an AJAX call
        $('#suggestions').fadeIn(); // Show the suggestions box
        $('#suggestions').html(data); // Fill the suggestions box
    });
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:00:33.377

您可以使用`$.ajax`代替`$.post`和中止`previous requests`并仅发送`current Request`..

这种东西。。

```
 $("#inputString").keydown(function() {
        lookup($(this).val());
        //alert('a');
    });

    var ajaxRequests;
    function lookup(inputString) {
        if (inputString.length == 0) {
            $('#suggestions').fadeOut(); // Hide the suggestions box
        } 
        else {
            var ajaxReq =
                $.ajax({
                    type: "POST",
                    url: "../jsonshow.php",
                    data: "" + inputString + "",
                    dataType: 'html',
                    beforeSend: function() {
                        var req = ajaxRequests;
                        if (req != null && req != undefined) {
                            req.abort();
                            // Abort the previous requests
                        }
                    },
                    success: function(data) {
                        $('#suggestions').html(data).fadeIn();
                        // Fill the suggestions box
                    },
                    complete : function(){
                         ajaxrequests = null;
                    }
                });
            ajaxRequests = ajaxReq;
        }
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-11T23:58:57.930

仅当用户点击空间时才调用 ajax 怎么样？

```
$("#inputString").keydown(function(e) {
if(e.keyCode == 32) lookup($(this).val()); 
```

});

# javascript - javascript 正则表达式匹配正确的 url，最后带有 .com 或任何其他域

> ID：13830503
> 
> 赞同：0
> 
> 时间：2012-12-11T23:52:51.213
> 
> 标签：javascript, regex

> **可能重复：**
> [检查 Javascript 字符串是否为 url](https://stackoverflow.com/questions/5717093/check-if-a-javascript-string-is-an-url)

我对 RegEx 不是很熟悉，所以如果你能帮我解决这个问题，那就太好了。

我需要一个 JS 函数，它将：

1.  检查字符串（textarea 输入）是否有任何 url。
2.  如果是 - 搜索找到的第一个 url 并返回 array(true,url)
3.  如果没有 - 返回数组（假，“”）

我遇到的问题是这种验证输入的模式。

```
function _is_url(url) {
    var pattern = /(((ht|f)tps?\:\/\/)?([a-zA-Z]{1}([\w\-]+\.)+([\w]{2,5})(:[\d]{1,5})?))\S+/i;
    var result = new Array();
    var testing = pattern.test(url);
    if(testing) {
        var newurl = url.match(pattern);
        result[0] = true;
        result[1] = newurl[0];
        console.log(result[1]);
    }
    else {
        result[0] = false;
        result[1] = "";
    }

    return result;
} 
```

使用这种模式，即使 url 是**[http://www.youtube](http://www.youtube)**这不是一个有效的 url，testing == true 也是如此。

我需要检查完整的网址：**[http](http://www.youtube.com)** ://www.youtube.com和任何其他网址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T00:08:33.573

删除`\S+`要排除的表达式之后`www.youtube`，并添加一个单词边界`\b`。后面的第一个字母也`{1}`可以省略。

# excel - Excel宏将行从一个文件复制到另一个文件

> ID：13830505
> 
> 赞同：0
> 
> 时间：2012-12-11T23:53:03.733
> 
> 标签：excel, vba

我想将某些列（A、B 和 E）从一个工作簿复制到另一个工作簿。我在 stackoverflow 的酷人的帮助下编写了以下宏，但此代码并未复制表格标题，例如“Study Room 2100E - Friday, Nov 30 2012”

```
Sub CopyColumnToWorkbook()
Dim sourceColumn As Range, targetColumn As Range

Set sourceColumn = Workbooks("Source.xlsm").Worksheets(1).Columns("A:B" & lr)
Set targetColumn = Workbooks("Target.xlsm").Worksheets(1).Columns("A:B")

Set sourceColumn2 = Workbooks("Source.xlsm").Worksheets(1).Columns("E" & lr)
Set targetColumn2 = Workbooks("Target.xlsm").Worksheets(1).Columns("C")

sourceColumn.Copy Destination:=targetColumn
sourceColumn2.Copy Destination:=targetColumn2

End Sub 
```

这是[源文件](https://docs.google.com/open?id=0B4tcwo2ZvQCRWkxxOU5xOGNSY2s)：

这是我[当前的目标](https://docs.google.com/open?id=0B4tcwo2ZvQCRckdzZ25IZmlaZU0)文件：（已编辑以**包括正确的链接，美国东部标准时间 12 月 11 日下午 6:58）**

这是我[想要的目标](https://docs.google.com/open?id=0B4tcwo2ZvQCRV0l2SmxHZkh6NFU)文件：

源文件由许多具有单独表标题的表组成。如您所知，正在复制表格的 A、B 和 E 行，但没有复制表格标题。如何修改我的代码，使我当前的目标文件看起来像我想要的目标文件？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T05:33:55.420

得到结果的原因是标题是合并的单元格，4 个单元格宽，2 列的复制/粘贴没有捕获这些单元格中的值（不知道为什么）。

一种解决方法是首先复制*值*（通过变量数组），然后复制/粘贴特殊格式。

这将创建包含 2 个单元格宽的合并单元格的标题。您需要在复制操作后调整标题。

请注意，您应该声明*所有*变量

```
Option Explicit ' First line in Module

Sub CopyColumnToWorkbook()
    Dim sourceColumn As Range, targetColumn As Range
    Dim sourceColumn2 As Range, targetColumn2 As Range
    Dim lr As String  ' <-- don't know what this is for, left it in as it's in your OP
    Dim rw As Range

    Set sourceColumn = Workbooks("Source.xlsm").Worksheets(1).UsedRange.Columns("A:B" & lr)
    Set targetColumn = Workbooks("Target.xlsm").Worksheets(1).Columns("A:B").Resize(sourceColumn.Rows.Count)

    ' Copy values
    targetColumn = sourceColumn.Value
    ' Copy Format
    sourceColumn.Copy
    targetColumn.PasteSpecial xlPasteFormats

    Set sourceColumn2 = Workbooks("Source.xlsm").Worksheets(1).Columns("E" & lr)
    Set targetColumn2 = Workbooks("Target.xlsm").Worksheets(1).Columns("C")
    sourceColumn2.Copy Destination:=targetColumn2

    ' Adjust Headers
    For Each rw In targetColumn.Rows
        If rw.MergeCells Then
            rw.Resize(1, 4).Merge
            ' Appy cell format to headers here if required
            rw.Font.Size = 18
            ' etc ...
        End If
    Next

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T05:37:47.393

试试这个

```
Sub CopyColumnToWorkbook()
Dim sourceColumn As Range, targetColumn As Range

Set sourceColumn = Workbooks("Source.xlsm").Worksheets(1).Columns("A:G" & lr)
Set targetColumn = Workbooks("Target.xlsm").Worksheets(1).Columns("A:G")

sourceColumn.Copy Destination:=targetColumn

Workbooks("Target.xlsm").Worksheets(1).Columns("C:D").EntireColumn.Delete
Workbooks("Target.xlsm").Worksheets(1).Columns("D:E").EntireColumn.Delete

End Sub 
```

# jquery-ui - Jquery UI autocomplete with value label pairs

> ID：13830508
> 
> 赞同：0
> 
> 时间：2012-12-11T23:53:10.767
> 
> 标签：jquery-ui, jquery-autocomplete

I would like to set the source of autocomplete to the one that can have value/label pairs as described in their documentation here

[http://api.jqueryui.com/autocomplete/](http://api.jqueryui.com/autocomplete/)

They say that

> ```
> An array of objects with label and value properties: [ { label: "Choice1", value: "value1" }, ... ] 
> ```
> 
> The label property is displayed in the suggestion menu. The value will be inserted into the input element when a user selects an item. If just one property is specified, it will be used for both, e.g., if you provide only value properties, the value will also be used as the label.

In my code I have

html

```
 <input type="text" id="testBox" name="testBox" maxlength="70"/> 
```

in my js

```
var catsArr = [];
                for (var i = 0; i < 10; i++) {
                    var cat = {
                        label: "grey " + i,
                        value: i
                    };
                    catsArr.push(cat);
                }

                //tie the autocomplete to the box
                $("#testBox").autocomplete({ source: catsArr }); 
```

But somehow, when the user starts typing the word `grey`, nothing shows up....What am I missing?

# hosting - 在 Amazon S3 上安装播客生成器

> ID：13830509
> 
> 赞同：2
> 
> 时间：2012-12-11T23:53:22.133
> 
> 标签：hosting, cloud, amazon, generator, podcast

我有一个在线公司绞盘的常规网络托管帐户，我使用播客生成器发布我的播客，因为我知道我们能够在 Amazon S3 上托管一个静态网站，我在想：播客生成器不使用一个数据库，因此它也可以像静态网站一样托管（我可能错了！）现在是否可以将播客生成器 zip 文件夹中的所有文件上传到 Amazon S3 并像往常一样启动它？总而言之，我希望我的网站从播客生成器构建在亚马逊云托管服务上，而不是传统的网络托管，可以做到吗？如何做？

现在这就是我所做的：在 Amazon S3 /website/Index 文档上：我已经放置了 index.php，所发生的事情是 index.php 文件刚刚显示在页面上。

谁能帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-21T09:27:38.983

您不能在 Amazon S3 上使用 Podcast Generator，因为 Amazon S3[只允许托管静态网站并且不支持服务器端脚本](http://docs.aws.amazon.com/AmazonS3/latest/dev/WebsiteHosting.html)（例如 PHP）。Podcast Generator 是用 PHP 编写的，支持 PHP 的网络服务器是运行它的最低要求。

# java - 为什么我的方法没有清除 ArrayList？

> ID：13830517
> 
> 赞同：4
> 
> 时间：2012-12-11T23:54:00.913
> 
> 标签：java, user-interface, arraylist, actionlistener

*注意：我的代码的问题只是我创建了清除矩形和所有内容的方法，但我做错的唯一一件事是在 go() 方法中实例化 DrawPanel 类的 myDraw 对象。所以我不得不用 Stop 再次实例化 DrawPanel 并创建了一个全新的对象。所以我最终在一个不同的 DrawPanel 对象上调用了 clearRects 方法，而不是添加了一个矩形。无论如何，我决定采用 MadProgrammer 的代码建议，因为他的代码正是 Java: A Beginner's Guide 的教学方式，而且更简洁。*

好吧，从今天早上开始，我一直在 StackOverflow 上跑来跑去，并且已经能够解决我的代码的很多问题，但我仍然被 ArrayLists 的这个问题所困扰。

我有下面的一段代码似乎没有做我打算做的事情。现在我知道我是在某个地方犯错的人，但不确定如何纠正它。

它的设置方式是，当我点击停止按钮时，ArrayList 应该清除，所以可以说我有一个空白的 JPanel，这是代码片段。如果你愿意，我可以发布整个程序，但我只是在这里粘贴代码段，因为我假设我犯了一个非常简单和愚蠢的错误：

```
class DrawPanel extends JPanel {
    ArrayList<MyRectangle> rects = new ArrayList<>();
    Random rand = new Random();

    @Override
    public void paintComponent(Graphics g) {

        super.paintComponent(g);

        addRect();

        for(MyRectangle r : rects) {
        g.setColor(r.getColor());
        g.fillRect(r.x, r.y, r.width, r.height);
        }
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(500,500);
    }

    public ArrayList<MyRectangle> addRect() {
        int ht = rand.nextInt(getHeight());
    int wd = rand.nextInt(getWidth());

    int x = rand.nextInt(getWidth() - wd);
    int y = rand.nextInt(getHeight() - ht);

    int r = rand.nextInt(256);
    int g = rand.nextInt(256);
    int b = rand.nextInt(256);

    rects.add(new MyRectangle(x, y, wd, ht, new Color(r, b, g)));
    System.out.println(rects.size());
    return rects;
}

    public void clearEvent(ActionEvent e) {
        System.out.println(rects.size());
        rects.clear();
        frame.repaint();
        System.out.println("I was called");
    }
} 
```

这是按钮在其 actionPerformed 方法中调用它的部分：

```
class StopListener implements ActionListener {
    DrawPanel draw = new DrawPanel();
    public void actionPerformed(ActionEvent e) {
        timer.stop();
        draw.clearEvent(e);
    }
    } 
```

编辑：我知道我的 clearEvent 方法引用的 arraylist 对象与 addRect() 添加内容的对象不同。我想我要问的是如何让它“连接”，这样我就可以使用 JButton 把东西擦干净。

编辑：这是完整的程序：

```
import javax.swing.*;
import java.awt.event.*;
import java.util.ArrayList;
import java.util.Random;
import java.awt.*;

public class TwoButtonsRandomRec {

    JFrame frame;
    Timer timer;

    public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            TwoButtonsRandomRec test = new TwoButtonsRandomRec();
            test.go();
        }
        });
    }

    public void go() {
    frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JButton startButton = new JButton("Start");
    startButton.addActionListener(new StartListener());
    JButton stopButton = new JButton("Stop");
    stopButton.addActionListener(new StopListener());

    final DrawPanel myDraw = new DrawPanel();

    timer = new Timer(50, new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent ae) {
            myDraw.repaint();
        }
        });

    frame.add(startButton, BorderLayout.NORTH);
    frame.add(stopButton, BorderLayout.SOUTH);
    frame.add(myDraw, BorderLayout.CENTER);
    frame.pack();
    frame.setVisible(true);
    }

    class StartListener implements ActionListener {
    public void actionPerformed(ActionEvent e) {
        timer.start();
    }
    }

    class StopListener implements ActionListener {
    DrawPanel draw = new DrawPanel();
    public void actionPerformed(ActionEvent e) {
        timer.stop();
        draw.clearEvent(e);
    }
    }

    class DrawPanel extends JPanel {
    ArrayList<MyRectangle> rects = new ArrayList<>();
    Random rand = new Random();

    @Override
    public void paintComponent(Graphics g) {

        super.paintComponent(g);

        addRect();

        for(MyRectangle r : rects) {
        g.setColor(r.getColor());
        g.fillRect(r.x, r.y, r.width, r.height);
        }
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(500,500);
    }

    public ArrayList<MyRectangle> addRect() {
        int ht = rand.nextInt(getHeight());
        int wd = rand.nextInt(getWidth());

        int x = rand.nextInt(getWidth() - wd);
        int y = rand.nextInt(getHeight() - ht);

        int r = rand.nextInt(256);
        int g = rand.nextInt(256);
        int b = rand.nextInt(256);

        rects.add(new MyRectangle(x, y, wd, ht, new Color(r, b, g)));
        System.out.println(rects.size());
        return rects;
    }

    public void clearEvent(ActionEvent e) {
        System.out.println(rects.size());
        rects.clear();
        repaint();
        System.out.println("I was called");
    }
    }
}

class MyRectangle extends Rectangle {
    Color color;
    public MyRectangle(int x, int y, int w, int h, Color c) {
    super(x, y, w, h);
    this.color = c;
    }

    public Color getColor() {
    return color;
    }
} 
```

这是我在这里问的上一个相关问题，以防有人感兴趣。

[奇怪的 JFrame 行为](https://stackoverflow.com/questions/13822019/strange-jframe-behavior)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T00:10:16.590

我看到两个直接的问题。

第一个是，您在方法`addRect`内调用`paintComponent`，这意味着，即使您清除`List`, 在下一次重绘时，也会向其中添加一个新矩形。

其次，我会调用`repaint`而`DrawPanel`不是 using `frame.repaint()`，因为您真的只想更新绘图面板，而不是整个框架

```
public class BadPaint05 {

    public static void main(String[] args) {
        new BadPaint05();
    }

    public BadPaint05() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new MasterPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class MasterPane extends JPanel {

        private DrawPanel drawPane;
        private Timer timer;

        public MasterPane() {
            setLayout(new BorderLayout());
            drawPane = new DrawPanel();

            add(drawPane);

            JButton stop = new JButton("Stop");
            stop.addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    drawPane.clearEvent(e);
                    timer.stop();
                }
            });

            timer = new Timer(500, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    drawPane.addRect();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();

            add(stop, BorderLayout.SOUTH);

        }

    }

    class DrawPanel extends JPanel {

        ArrayList<MyRectangle> rects = new ArrayList<>();
        Random rand = new Random();

        @Override
        public void paintComponent(Graphics g) {

            super.paintComponent(g);

//            addRect();

            for (MyRectangle r : rects) {
                g.setColor(r.getColor());
                g.fillRect(r.x, r.y, r.width, r.height);
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(500, 500);
        }

        public ArrayList<MyRectangle> addRect() {
            int ht = rand.nextInt(getHeight());
            int wd = rand.nextInt(getWidth());

            int x = rand.nextInt(getWidth() - wd);
            int y = rand.nextInt(getHeight() - ht);

            int r = rand.nextInt(256);
            int g = rand.nextInt(256);
            int b = rand.nextInt(256);

            rects.add(new MyRectangle(x, y, wd, ht, new Color(r, b, g)));
            System.out.println(rects.size());
            repaint();
            return rects;
        }

        public void clearEvent(ActionEvent e) {
            System.out.println(rects.size());
            rects.clear();
//            frame.repaint();
            repaint();
            System.out.println("I was called");
        }
    }

    public class MyRectangle {

        private int x, y, width, height;
        private Color color;

        private MyRectangle(int x, int y, int wd, int ht, Color color) {
            this.x = x;
            this.y = y;
            this.width = wd;
            this.height = ht;
            this.color = color;
        }

        public Color getColor() {
            return color;
        }

    }
} 
```

# javascript - How to call javascript from different window?

> ID：13830518
> 
> 赞同：1
> 
> 时间：2012-12-11T23:54:04.440
> 
> 标签：javascript

I am working with IE9\. Want to open a popup window from a page, and from the popup, how to call the javascript code in the page (not the popup window)?

There will not be a cross domain issue as I am going to load a page from the same domain of the page into the popup window.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T00:00:39.523

就像 Cory 说的，`window.opener`用来获取父窗口的`window`. 看这个：

[http://jsfiddle.net/Dmnqk/](http://jsfiddle.net/Dmnqk/)

```
function openPopup() {
    var w = window.open("", "");
    w.document.open();
    w.document.write("<script type='text/javascript'>window.opener.parentWindowFunction();<\/script>");
    w.document.close();
}

function parentWindowFunction() {
    alert("called");
} 
```

当然，我的使用`document.open/write/close`只是创建我自己的页面来调用父窗口的函数（从技术上讲，它应该真的有`<html><head></head><body>SCRIPT HERE</body></html>`。你的弹出页面需要的只是调用`window.opener.parentWindowFunction`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T00:03:09.163

您可以使用`window.opener`来访问`window`打开弹出窗口的页面的全局 ( ) 命名空间中的函数：

### 开瓶器

```
function functionFromOpener() {
    return "wharrgarbl";
} 
```

### 弹出

```
alert(window.opener.functionFromOpener()); 
```

强制性 jsFiddle 示例：http: [//jsfiddle.net/9yLu2/1/](http://jsfiddle.net/9yLu2/1/)

也就是说，我认为使用页内 DHTML 对话框是一个更好的主意。（或者可能是浏览器窗口无法调整大小/没有地址栏让我很烦。）

# c++ - 使用类时未解析的外部符号（OpenGL、C++）

> ID：13830523
> 
> 赞同：0
> 
> 时间：2012-12-11T23:54:13.227
> 
> 标签：c++, class, opengl, case

我制作了一个简单的纹理类，在尝试使用 loadFromFile() 时出现此错误：

```
Error   33  error LNK2019: unresolved external symbol "public: unsigned int __thiscall TEXTURE::loadFromFile(char const *,enum imagetype)" (?loadFromFile@TEXTURE@@QAEIPBDW4imagetype@@@Z) referenced in function _main 
```

纹理.h：

```
 #ifndef _TEXTURELOADER
    #define TEXTURELOADER

    #include <GL/glew.h>
    #include <GL/glfw.h>
    #include "debug.h"
    #include <fstream>

    enum imagetype {BMP, TGA, DDS};

    #define FOURCC_DXT1 0x31545844 // Equivalent to "DXT1" in ASCII
    #define FOURCC_DXT3 0x33545844 // Equivalent to "DXT3" in ASCII
    #define FOURCC_DXT5 0x35545844 // Equivalent to "DXT5" in ASCII

    class TEXTURE
    {

    public:

        float posX;
        float posY;

        GLuint loadFromFile(const char* filename, imagetype extension); // Returns a texture ID; Accepted extensions: BMP, JPG, TGA, PNG, DDS

        GLuint rotate(float degrees); // Positive for clockwise, negative for counterclockwise
        GLuint scale(float multiplier); // Positve for growth, negative for shrinkage
        GLuint move(float x, float y); // Moves the texure x, y

        GLuint setCenter(float x, float y); // Sets centerpoint of texture, used for rotating

        float getPosX();
        float getPosY();

        imagetype getExtension();
        float* getCenter();
    };

    #endif 
```

纹理.cpp：

```
 #include "texture.h"

GLuint loadFromFile(const char* filename, imagetype extension)
{
    switch(extension)
    {
        case BMP:
            {
                // Data read from the header of the BMP file
                unsigned char header[54];
                unsigned int dataPos;     
                unsigned int width, height;
                unsigned int imageSize;  
                // Actual RGB data
                unsigned char* data;

                FILE * file = fopen(filename,"rb");
                if (!file) {
                    printf("Image could not be opened\n");
                    return 0;
                }

                if ( fread(header, 1, 54, file) != 54 ) { 
                    printf("Not a correct BMP file\n");
                    return false;
                }

                if ( header[0]!='B' || header[1]!='M' ){
                    printf("Not a correct BMP file\n");
                    return 0;
                }

                dataPos    = *(int*)&(header[0x0A]);
                imageSize  = *(int*)&(header[0x22]);
                width      = *(int*)&(header[0x12]);
                height     = *(int*)&(header[0x16]);

                if (imageSize==0)    imageSize=width*height*3; 
                if (dataPos==0)      dataPos=54; 

                // Create a buffer
                data = new unsigned char [imageSize];

                // Read the actual data from the file into the buffer
                fread(data,1,imageSize,file);

                //Everything is in memory now, the file can be closed
                fclose(file);

                GLuint textureID;
                glGenTextures(1, &textureID);

                // "Bind" the newly created texture : all future texture functions will modify this texture
                glBindTexture(GL_TEXTURE_2D, textureID);

                // Give the image to OpenGL
                glTexImage2D(GL_TEXTURE_2D, 0,GL_RGB, width, height, 0, GL_BGR, GL_UNSIGNED_BYTE, data);

                delete[] data;

                // Trilinear filtering
                glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
                glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
                glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
                glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);

                glGenerateMipmap(GL_TEXTURE_2D);

                return textureID;
                break;
            }

        case TGA:
            {
                GLuint textureID;
                glGenTextures(1, &textureID);

                // "Bind" the newly created texture : all future texture functions will modify this texture
                glBindTexture(GL_TEXTURE_2D, textureID);

                // Read the file, call glTexImage2D with the right parameters
                glfwLoadTexture2D(filename, 0);

                // Trilinear filtering.
                glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
                glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
                glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
                glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);
                glGenerateMipmap(GL_TEXTURE_2D);

                return textureID;
                break;
            }

        case DDS:
            {
                unsigned char header[124];

                FILE* fp;

                fp = fopen(filename, "rb");
                if (fp == NULL)
                    return 0;

                char filecode[4];
                fread(filecode, 1, 4, fp);
                if (strncmp(filecode, "DDS ", 4) != 0) {
                    fclose(fp);
                    return 0;
                }

                fread(&header, 124, 1, fp); 

                unsigned int height      = *(unsigned int*)&(header[8 ]);
                unsigned int width       = *(unsigned int*)&(header[12]);
                unsigned int linearSize  = *(unsigned int*)&(header[16]);
                unsigned int mipMapCount = *(unsigned int*)&(header[24]);
                unsigned int fourCC      = *(unsigned int*)&(header[80]);

                unsigned char* buffer;
                unsigned int bufsize;
                /* how big is it going to be including all mipmaps? */
                bufsize = mipMapCount > 1 ? linearSize * 2 : linearSize;
                buffer = (unsigned char*)malloc(bufsize * sizeof(unsigned char));
                fread(buffer, 1, bufsize, fp);
                /* close the file pointer */
                fclose(fp);

                unsigned int components  = (fourCC == FOURCC_DXT1) ? 3 : 4;
                unsigned int format;
                switch(fourCC)
                {
                    case FOURCC_DXT1:
                        format = GL_COMPRESSED_RGBA_S3TC_DXT1_EXT;
                        break;
                    case FOURCC_DXT3:
                        format = GL_COMPRESSED_RGBA_S3TC_DXT3_EXT;
                        break;
                    case FOURCC_DXT5:
                        format = GL_COMPRESSED_RGBA_S3TC_DXT5_EXT;
                        break;
                    default:
                        free(buffer);
                        return 0;
                }

                GLuint textureID;
                glGenTextures(1, &textureID);

                glBindTexture(GL_TEXTURE_2D, textureID);
                glPixelStorei(GL_UNPACK_ALIGNMENT,1);   

                unsigned int blockSize = (format == GL_COMPRESSED_RGBA_S3TC_DXT1_EXT) ? 8 : 16;
                unsigned int offset = 0;

                /* load the mipmaps */
                for (unsigned int level = 0; level < mipMapCount && (width || height); ++level)
                {
                    unsigned int size = ((width+3)/4)*((height+3)/4)*blockSize;
                    glCompressedTexImage2D(GL_TEXTURE_2D, level, format, width, height, 
                        0, size, buffer + offset);

                    offset += size;
                    width  /= 2;
                    height /= 2;
                }
                free(buffer); 

                return textureID;
                break;
            }

        default:
            {
                debug.Print("Texture filename extension incorrect or not supported.");
                return 0;
                break;
            }
    }
}; 
```

我认为错误不在函数的实际代码中，因为我已经对其中的错误进行了排序。

主要.cpp：

```
#include "texture.h"

TEXTURE texture1;

int main( void )
{
    ...
    GLuint Texture = texture1.loadFromFile("uvtemplate.DDS", DDS);

    ...

    do{
            ...
    }
    while( glfwGetKey( GLFW_KEY_ESC ) != GLFW_PRESS && 
        glfwGetWindowParam( GLFW_OPENED ) );

    glfwTerminate();

    glDeleteBuffers(1, &vertexbuffer);
    glDeleteBuffers(1, &uvbuffer);
    glDeleteProgram(programID);
    glDeleteTextures(1, &TextureID);
    glDeleteVertexArrays(1, &VertexArrayID);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T00:04:32.463

当你定义函数时，你需要说`TEXTURE::`，像这样：

```
GLuint TEXTURE::loadFromFile(const char* filename, imagetype extension)
{
    // ... 
```

没有`TEXTURE::`前缀，该函数`loadFromFile()`是一个非成员函数（类似于`main()`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T00:04:55.713

在 textrure.cpp 中，您需要更改：

```
GLuint loadFromFile(const char* filename, imagetype extension) 
```

到

```
GLuint TEXTURE::loadFromFile(const char* filename, imagetype extension) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T00:07:18.100

此错误意味着链接器找不到 TEXTURE::loadFromFile() 函数。我猜 TEXTURE::loadFromFile() 的实现在库中，而不是您项目的一部分。您需要告诉链接器该库所在的位置。

看：

[http://msdn.microsoft.com/en-us/library/hcce369f.aspx](http://msdn.microsoft.com/en-us/library/hcce369f.aspx)

这些东西也在 MS Visual Studio 的项目属性 Linker 部分中定义。

# cakephp - CakePHP 分页：如何按多列排序以实现“粘性”功能？

> ID：13830525
> 
> 赞同：6
> 
> 时间：2012-12-11T23:54:31.650
> 
> 标签：cakephp, pagination

我看到此[分页无法同时对两列进行排序](https://github.com/cakephp/cakephp/issues/1957)票证仍处于打开状态，这使我相信如果没有解决方法，我正在尝试做的事情是不可能的。所以我想我正在寻找的是一种解决方法。

我正在尝试做许多留言板所做的事情：具有“ `sticky`”功能。我想让它无论用户单击哪个表头链接进行排序，我的模型的“ `sticky`”字段始终是排序的第一件事，然后是用户单击的任何列。我知道你可以设置`$this->paginate['Model']['order']`任何你想要的，所以你可以破解它，把“ `sticky`”字段放在第一位，用户选择的列放在第二位。这种方法的问题是分页在您执行后无法正常运行。表头链接不能正常工作，切换页面也不能正常工作。还有其他解决方法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-12T16:14:27.797

CakePHP IRC 频道上的用户 ten1 帮助我找到了解决方案。我告诉他，如果他在这里发布答案，那么我会将其标记为正确答案，但他说我应该自己做，因为他还没有 Stack Overflow 帐户。

诀窍是使用模型的“beforeFind”回调方法将“粘性”字段注入查询的“订单”设置，如下所示：

```
public function beforeFind($queryData) {
    $sticky = array('Model.sticky' => 'DESC');

    if (is_array($queryData['order'][0])) {
        $queryData['order'][0] = $sticky + $queryData['order'][0];
    }
    else {
        $queryData['order'][0] = $sticky;
    }

    return $queryData;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:40:16.507

您可以做的是在操作中对其进行编码。当 URL 上存在某些参数时，只需创建所需的查询。（参数必须通过 GET 发送）

例如：

```
public function posts(){
    $optional= array();

    if(!empty($this->params->query['status'])){
                if(strlower($this->params->query['status']=='des')){
        $optional= array('Post.status DESC');
                }

                else if(strlower($this->params->query['status']=='asc')){
                    $optional= array('Post.status ASC');
                }
    }

    if(!empty($this->params->query['department'])){         
        //same...
    }

    //order first by the sticky field and then by the optional parameters.
    $order = array('Post.stickyField DESC') + $optional;

    $this->paginate = array(
            'conditions' => $conditions,
            'order' => $order,
            'paramType' => 'querystring',

    );

    $this->set('posts', $this->paginate('Post'));
} 
```

我使用了类似的东西来过滤一些数据，`$conditions`而不是使用`$order`它，它运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:50:35.663

您可以使用自定义字段进行排序和更新分页组件。

**控制器代码**

$order['Document.DATE'] = 'asc';

```
 $this->paginate = array(

                "conditions"=> $conditions ,
                "order" => $order ,
                "limit" => 10,
            **"sortcustom" => array('field' =>'Document.DATE' , 'direction' =>'desc'),**

            ); 
```

分页组件的变化。

公共函数 validateSort($object, $options, $whitelist = array()) {

```
 if (isset($options['sort'])) {
        $direction = null;
        if (isset($options['direction'])) {
            $direction = strtolower($options['direction']);
        }
        if ($direction != 'asc' && $direction != 'desc') {
            $direction = 'asc';
        }
        $options['order'] = array($options['sort'] => $direction);
    }

    if (!empty($whitelist) && isset($options['order']) && is_array($options['order'])) {
        $field = key($options['order']);
        if (!in_array($field, $whitelist)) {
            $options['order'] = null;
        }
    }

    if (!empty($options['order']) && is_array($options['order'])) {
        $order = array();
        foreach ($options['order'] as $key => $value) {
            $field = $key;
            $alias = $object->alias;
            if (strpos($key, '.') !== false) {
                list($alias, $field) = explode('.', $key);
            }

            if ($object->hasField($field)) {
                $order[$alias . '.' . $field] = $value;
            } elseif ($object->hasField($key, true)) {
                $order[$field] = $value;
            } elseif (isset($object->{$alias}) && $object->{$alias}->hasField($field, true)) {
                $order[$alias . '.' . $field] = $value;
            }
        }

        **if(count($options['sortcustom']) > 0 )
          {
            $order[$options['sortcustom']['field']] = $options['sortcustom']['direction']; 
          }**

        $options['order'] = $order;
    }

    return $options;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-11T04:20:20.567

轻松插入**'paramType' => 'querystring'，** 显示代码示例：

```
$this->paginate = array(
    'conditions' => $conditions,
    'order' => array(
        'Post.name' => 'ASC',
        'Post.created' => 'DESC',

    ),
    'paramType' => 'querystring',

);

$this->set('posts', $this->paginate('Post')); 
```

# python - Passing variable to form

> ID：13830526
> 
> 赞同：0
> 
> 时间：2012-12-11T23:54:35.270
> 
> 标签：python, django, django-forms, django-views

I am passing the agent id through to my forms. Question is, how do I take that agent id, grab the id, then make the dropdown field default selection the agent id that I passed through?

Passing the variable

```
<input type="button" name="chargeback" value="Submit Chargeback" href="{% url commissions-chargebacks_insert agent.id %}" /> 
```

My views.py

```
def insert(request, agent=None, investment=None, chargeback=None, *args, **kwargs):
from commissions.forms import ChargebackForm
context = {}
selected_agent_id = kwargs['agent_id']
if request.POST:
    form = ChargebackForm(selected_agent_id, request.POST)
    if form.is_valid():
        chargeback = form.save(commit=False)
        chargeback.total_branch_commission = str(float("-0%s" % chargeback.amount))
        chargeback.save()
        return HttpResponseRedirect(reverse('commissions-chargebacks_browse'))
    else:
        request.user.message_set.create(message='Please correct errors and try submitting again.')
else:
    form = ChargebackForm(selected_agent_id)

context['form'] = form
return render_to_response('commissions/admin/chargebacks/insert.html', RequestContext(request, context)) 
```

forms.py

```
class ChargebackForm(forms.ModelForm):
def __init__(self, selected_agent_id, *args, **kwargs):
    super(ChargebackForm, self).__init__(*args, **kwargs)
    self.fields['agent'].queryset = Agent.objects.all().filter(agent_id = selected_agent_id)

class Meta:
    model = Chargeback

    fields = ('agent', 'amount','description','policy_num') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:11:04.287

如果您使用的是 1.4，则可以在视图中使用[`initial`](https://docs.djangoproject.com/en/dev/topics/forms/formsets/#formsets-initial-data)参数 on ：`ChargebackForm`

```
if request.method == 'POST':
    form = ChargebackForm(
        selected_agent_id, request.POST, initial={'agent':selected_agent_id})
else:
    form = ChargebackForm(selected_agent_id, initial={'agent':selected_agent_id}) 
```

# css - How can I retrieve all style properties applied to a flex UIComponent?

> ID：13830532
> 
> 赞同：0
> 
> 时间：2012-12-11T23:55:24.430
> 
> 标签：css, actionscript-3, apache-flex, mxml

I want the list of all style properties/values applied to a UIComponent's selector via css but I can't seem to find a list of them anywhere.

For example, I have a BorderContainer and the CSS gives it backgroundColor: #869ca7; backgroundAlpha: .5;

and from an ActionScript function I would like to retrieve the list {backgroundColor:#869ca7, backgroundAlpha:.5}. But in an abstract way that works for all UIComponents (i.e. I can't just call getStyle("backgroundColor");

I've tried two ways and I feel very close but can't actually retrieve the list.

1.  It feels like I should be able to get the list of properties from the UIComponents by using the styleDeclaration property on the UIComponent, but it doesn't seem to show the list of style properties it has.

2.  It also seems like I should be able to get the values by calling "uiComponent.getStyle(*_*)" but that requires that I already know the property names.

Thank you for any insight you can help me with.

For reference, the CSSStyleDeclaration class: [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/styles/CSSStyleDeclaration.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/styles/CSSStyleDeclaration.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:51:19.717

所以我最初的研究表明，没有直接的函数调用或列表来检索一组样式属性。

我认为唯一的方法是检查级联数组的属性名称。

getStyle 代码供参考：

```
public function getStyle(styleProp:String):*
{
    var o:*;
    var v:*;

    // First look in the overrides, in case setStyle()
    // has been called on this CSSStyleDeclaration.
    if (overrides)
    {
        // If the property exists in our overrides, but 
        // has 'undefined' as its value, it has been 
        // cleared from this stylesheet so return
        // undefined.
        if (styleProp in overrides &&
            overrides[styleProp] === undefined)
            return undefined;

        v = overrides[styleProp];
        if (v !== undefined) // must use !==
            return v;
    }

    // Next look in the style object that this CSSStyleDeclaration's
    // factory function produces; it contains styles that
    // were specified in an instance tag of an MXML component
    // (if this CSSStyleDeclaration is attached to a UIComponent).
    if (factory != null)
    {
        factory.prototype = {};
        o = new factory();
        v = o[styleProp];
        if (v !== undefined) // must use !==
            return v;
    }

    // Next look in the style object that this CSSStyleDeclaration's
    // defaultFactory function produces; it contains styles that
    // were specified on the root tag of an MXML component.
    if (defaultFactory != null)
    {
        defaultFactory.prototype = {};
        o = new defaultFactory();
        v = o[styleProp];
        if (v !== undefined) // must use !==
            return v;
    }

    // Return undefined if the style isn't specified
    // in any of these three places.
    return undefined;
} 
```

# opencv - Freak 描述符模式是如何定义的

> ID：13830534
> 
> 赞同：-1
> 
> 时间：2012-12-11T23:55:35.893
> 
> 标签：opencv, computer-vision, feature-descriptor, freak

我必须为家庭作业编写自己的 FREAK 描述符实现。我实际上阅读了原始[论文](http://infoscience.epfl.ch/record/175537/files/2069.pdf)，但没有任何解释如何构建该模式。

在 OpenCV[代码](https://github.com/Itseez/opencv/blob/master/modules/features2d/src/freak.cpp)中定义了 buildPattern() 函数，但它也缺乏关于如何构建模式本身的文档。

所以我的问题是，有人知道模式是如何定义的以及如何选择参数（半径、西格玛和坐标）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:32:32.787

看起来确切的值并不重要，但图 4 显示了 43 个感受野的粗略布局。

它们的确切几何形状由此处的代码定义：[https ://github.com/kikohs/freak/blob/master/src/freak.cpp#L212](https://github.com/kikohs/freak/blob/master/src/freak.cpp#L212)

# extjs - Extjs4 add an empty option in a combobox

> ID：13830537
> 
> 赞同：8
> 
> 时间：2012-12-11T23:55:52.043
> 
> 标签：extjs, combobox

I have a combobox in ExtJS4 with this initial config

```
 xtype: 'combobox',
        name: 'myCombo',
        store: 'MyStore',
        editable: false,
        displayField: 'name',
        valueField: 'id',
        emptyText: 'Select an Option' 
```

I don't know if there is an easy way to tell the combo to add an option so the user can deselect the combo (first he select an option and then he want to not select anything... so he wants to return to "Select an Option")

I solved this before by adding an extra option to the fetched data so I can simulate to have the "Select an Option" as a valid option in the combo but I think there should be a better way.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T07:54:35.277

您不需要任何新的设计或图形或任何复杂的扩展。ExtJS 是开箱即用的。

你应该可以使用这个：

```
Ext.define('Ext.ux.form.field.ClearCombo', {
    extend: 'Ext.form.field.ComboBox',
    alias: 'widget.clearcombo',

    trigger2Cls: 'x-form-clear-trigger',

    initComponent: function () {
        var me = this;

        me.addEvents(
            /**
            * @event beforeclear
            *
            * @param {FilterCombo} FilterCombo The filtercombo that triggered the event
            */
            'beforeclear',
            /**
            * @event beforeclear
            *
            * @param {FilterCombo} FilterCombo The filtercombo that triggered the event
            */
            'clear'
        );

        me.callParent(arguments);

        me.on('specialkey', this.onSpecialKeyDown, me);
        me.on('select', function (me, rec) {
            me.onShowClearTrigger(true); 
        }, me);
        me.on('afterrender', function () { me.onShowClearTrigger(false); }, me);
    },

    /**
    * @private onSpecialKeyDown
    * eventhandler for special keys
    */
    onSpecialKeyDown: function (obj, e, opt) {
        if ( e.getKey() == e.ESC )
        {
            this.clear();
        }
    },

    onShowClearTrigger: function (show) {
        var me = this;

        if (show) {
            me.triggerEl.each(function (el, c, i) {
                if (i === 1) {
                    el.setWidth(el.originWidth, false);
                    el.setVisible(true);
                    me.active = true;
                }
            });
        } else {
            me.triggerEl.each(function (el, c, i) {
                if (i === 1) {
                    el.originWidth = el.getWidth();
                    el.setWidth(0, false);
                    el.setVisible(false);
                    me.active = false;
                }
            });
        }
        // ToDo -> Version specific methods
        if (Ext.lastRegisteredVersion.shortVersion > 407) {
            me.updateLayout();
        } else {
            me.updateEditState();
        }
    },

    /**
    * @override onTrigger2Click
    * eventhandler
    */
    onTrigger2Click: function (args) {
        this.clear();
    },

    /**
    * @private clear
    * clears the current search
    */
    clear: function () {
        var me = this;
        me.fireEvent('beforeclear', me);
        me.clearValue();
        me.onShowClearTrigger(false);
        me.fireEvent('clear', me);
    }
}); 
```

这是一个**[JSFiddle](http://jsfiddle.net/sran/czrt6/)**

还有一个没有默认组合的**[JSFiddle 。](http://jsfiddle.net/sran/czrt6/1/)**

**请注意，这两个示例都不需要任何新的图形或样式**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T00:16:40.470

据我所知，没有更好的方法可以做到这一点。尽管其他人可能会通过插件来完成您所做的事情。

老实说，组合框中没有选择选项有点像用户界面悖论——用户必须选择“无选择”。空白选项不是很清楚 - 看起来有点像一个错误。

从用户界面的角度来看，我认为这种情况的首选解决方案是在组合框旁边有一个按钮，上面写着“清除选择”（或者只有一个带有 X 图标的按钮）。一旦你设法在那里放置一个按钮，你就可以调用`clearValue()`.

# mysql - 在远程服务器上运行 cakephp 应用程序时遇到问题

> ID：13830546
> 
> 赞同：3
> 
> 时间：2012-12-11T23:56:27.380
> 
> 标签：mysql, cakephp-2.0

如果你得到：

```
Error: SQLSTATE[42000]: Syntax error or access violation: 1104 The SELECT would examine more than MAX_JOIN_SIZE rows; check your WHERE and use SET SQL_BIG_SELECTS=1 or SET MAX_JOIN_SIZE=# if the SELECT is okay 
```

将 cake php 应用程序和数据库从 xampp localhost 上传到远程服务器后。

尝试将蛋糕数据库导入本地计算机上的新数据库并且工作正常。所以我看不到它是导入的信息。

不知道如何解决这个问题。这是一个简单而常见的问题，可以通过以下简单修复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T06:24:09.420

在拉了很多头发之后，在我的好朋友 ten1 在 cakephp IRC 聊天的帮助下，我设法找到了问题/修复。

当这是一个 cakephp 特定问题时，在我的情况下，您需要做不可想象的事情并编辑核心。

您需要编辑的文件是 AclNode.php 位于此处：/lib/Cake/Model/AclNode.php

您需要在第 113 行之前添加一行

```
112    }
                $db->query('SET SQL_BIG_SELECTS=1'); //Add this line
113             $result = $db->read($this, $queryData, -1);
114             $path = array_values($path); 
```

这通常仅在具有共享主机的服务器上存在问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-03T07:41:50.550

如果希望它影响整个模型文件或特定模型文件，则可以将 beforeFind 方法添加到 app/models/app_model.php 文件中，而不是编辑核心文件，如下所示：

```
function beforeFind()   {
    $this->query('SET SQL_BIG_SELECTS=1');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-14T05:55:24.023

对于 Cakephp 3 以下作品：

```
 'Datasources' => [
        'default' => [
            'init'   => array(
                PDO::MYSQL_ATTR_INIT_COMMAND => 'SET SESSION SQL_BIG_SELECTS=1',
                ), // Add this to the existing array 
```

# html - z-index not working with overflow to overlap and scrollbar

> ID：13830549
> 
> 赞同：0
> 
> 时间：2012-12-11T23:56:35.910
> 
> 标签：html, css, styles, overflow, z-index

I got the following issue:

I'm trying to display a few `<div.content>` with content in it. Limited in size to a `<div.holder>` as parent with `overflow` set, so that you can scroll down to see all `<div.content>`. The `<div.content>` are overlapping the `<div.holder>` for styling purpose. And everything is wrapped in a `<div.container>`.

But the `<div.content>` won't display over the `<div.holder>` element with `z-index` or anything. It's rendered inside the `<div.holder>` element, without scrollbar it's rendered outside, like i want.

How can i get the Scrollbar and that the `<div.content>` will overlap its parent `<div.holder>`?

Here's the [Fiddle](http://jsfiddle.net/QTMPf/5/) for the issue. Thank you.

EDIT:

Trying to accomplish this: ![Photoshoped result example for the fiddle](../Images/202beb5658fc4825059649ec8477af73.png)

For this styling purpose: ![Use case](../Images/1b8689a20ba121f0ebf81652d996ca65.png)

Is this even possible? I'm not bound to just use HTML&CSS, just need that thing start working.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:05:33.030

Z-index 仅适用于具有位置的元素。所以它对.foo没有做任何事情 [http://www.w3schools.com/cssref/pr_pos_z-index.asp](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

# python - python - class mutability

> ID：13830550
> 
> 赞同：3
> 
> 时间：2012-12-11T23:56:59.943
> 
> 标签：python, class, mutability

I got the code below from an exam and I don't understand why the first time when you make `f2 = f1`, doing `f1.set()` changes `f2` but after that when you set `f1 = Foo("Nine", "Ten")` doesn't change `f2` at all. If anyone knows why please explain it to me. Thank you so much!

Code:

```
class Foo():
    def __init__(self, x=1, y=2, z=3):
        self.nums = [x, y, z]

    def __str__(self):
        return str(self.nums)

    def set(self, x):
        self.nums = x

f1 = Foo()
f2 = Foo("One", "Two")

f2 = f1
f1.set(["Four", "Five", "Six"])
print f1
print f2

f1 = Foo("Nine", "Ten")
print f1
print f2

f1.set(["Eleven", "Twelve"])
print f1
print f2 
```

Outcome:

```
['Four', 'Five', 'Six']
['Four', 'Five', 'Six']
['Nine', 'Ten', 3]
['Four', 'Five', 'Six']
['Eleven', 'Twelve']
['Four', 'Five', 'Six'] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T00:00:20.303

```
f2 = f1 
```

在此语句之后，`f1`和`f2`都是对*同一*实例的引用`Foo`。因此，一个变化会影响另一个。

```
f1 = Foo("Nine", "Ten") 
```

在此之后，`f1`被分配给一个*新* `Foo`实例，因此`f1`不再`f2`以任何方式连接 - 因此一个更改*不会*影响另一个。

# python - Python：wx 中的可中断线程

> ID：13830557
> 
> 赞同：0
> 
> 时间：2012-12-11T23:57:56.590
> 
> 标签：python, multithreading, user-interface, wxpython

我的 wx GUI 显示缩略图，但生成速度很慢，所以：

*   在生成缩略图时，该程序应保持可用。
*   切换到新文件夹应该会停止为旧文件夹生成缩略图。
*   如果可能，缩略图生成应使用多个处理器。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T00:33:54.330

将缩略图生成放在后台线程`threading.Thread`中将解决您的第一个问题，使程序可用。

如果您想要一种中断它的方法，通常的方法是添加一个“停止”变量，后台线程会经常检查该变量（例如，每个缩略图一次），并且 GUI 线程设置它何时想要停止它。理想情况下，您应该使用`threading.Condition`. （在大多数情况下，这个条件实际上并不是必需的——阻止你的代码很好地并行化的同一个 GIL 也可以保护你免受某些类型的竞争条件的影响。但你不应该依赖它。）

对于第三个问题，第一个问题是：缩略图生成实际上是否受 CPU 限制？如果您花费更多时间从磁盘读取和写入图像，则可能不是，因此尝试并行化它是没有意义的。但是，让我们假设它是。

首先，如果你有 N 个内核，你需要一个 N 个线程池，或者如果主线程也有很多工作要做，则需要 N-1 个，或者可能是 2N 或 2N-1 之类的东西来权衡一些最好的 -情况下的性能，以获得一些最坏情况下的性能。

但是，如果该 CPU 工作是在 Python 中完成的，或者是在仍然拥有 Python GIL 的 C 扩展中完成的，那么这将无济于事，因为大多数时候，实际上只有一个线程会运行。

一种解决方案是从线程切换到进程，最好使用标准`multiprocessing`模块。它有内置的 API 来创建进程池，并通过简单的负载平衡将作业提交到池中。

使用进程的问题是您不再获得数据的自动共享，因此“停止标志”将不起作用。您需要在共享内存中显式创建一个标志，或者使用管道或其他某种机制进行通信。文档解释了执行此操作的`multiprocessing`各种方法。

您实际上*可以*杀死子进程。但是，您可能不想这样做。首先，除非您仔细编写代码，否则它可能会使您的缩略图缓存处于不一致的状态，从而混淆您的其余代码。此外，如果您希望这在 Windows 上高效，则创建子进程需要一些时间（不像“30 分钟”或任何时间，但如果您每次用户单击时重新创建池，则足以影响代码的感知响应能力新文件夹），因此您可能希望在需要之前创建池，并在程序的整个生命周期中保留它。

除此之外，您所要做的只是工作规模。希望创建一个缩略图不是太大的工作——但如果它太小了，你可以将多个缩略图批处理成一个工作——或者更简单地说，查看`multiprocessing`API 并更改它在以下情况下批处理工作的方式负载均衡。

同时，如果您使用池解决方案（无论是线程还是进程），如果您的作业足够小，您可能真的不需要取消。只需排空工作队列——每个工作人员将完成它现在正在处理的任何工作，然后睡觉直到你提供更多工作。记住在退出时也要排空队列（然后可能会加入池）。

要记住的最后一件事是，如果您成功生成缩略图的速度与您的计算机能够生成它们的速度一样快，那么您实际上可能会导致整个计算机（因此您的 GUI）变得迟缓且无响应。这通常出现在您的代码实际上受 I/O 限制并且您正在使用大部分磁盘带宽时，或者当您使用大量内存并触发交换抖动时，但如果您的代码确实受 CPU 限制，并且您正在由于您正在使用所有 CPU 而遇到问题，您可能希望少使用 1 个内核，或者考虑设置线程/进程优先级。

# heroku - Heroku 应用程序的身份和访问管理

> ID：13830558
> 
> 赞同：2
> 
> 时间：2012-12-11T23:57:56.667
> 
> 标签：heroku, cedar, identity-management

我选择的身份和访问管理工具是 OpenAM，它利用他们基于容器的策略代理，但是使用 Heroku Celadon Cedar 堆栈时这种方法是不可能的——至少在我看来是不可能的（www.heroku.com）

对 cedar 部署的应用程序强制执行身份验证和授权的推荐方法是什么？

谢谢/W

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:07:05.393

我不确定 OpenAM 访问管理工具。但是，如果您的应用程序需要身份验证或授权，那么我建议您联系第三方服务链接 TeleSign 以获得他们的[身份和访问管理](http://www.telesign.com)服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T18:08:07.750

您可以将您的用户存储在您自己的数据库中，或者使用像[Stormpath](https://stormpath.com/)这样的托管身份服务（免责声明：这太棒了）。

如果您最终使用 Stormpath 之类的东西，您基本上将使用 REST API 来创建、管理和验证用户。

# sql - sql例程导出单独的txt文件

> ID：13830563
> 
> 赞同：1
> 
> 时间：2012-12-11T23:58:23.237
> 
> 标签：sql, flat-file, routines

我有一个 sql 查询，它是一个价目表，我通常为 18 个不同的客户运行 18 个不同的时间。我有一个@varchar 作为声明，我更改了 customerID。然后导出一个 txt 平面文件文件，这样我就可以转换为 Excel 并通过 feebootimail 发送。

是否有可以在 sql 2005 中运行的例程，以便将客户列表输入并获取 18 个不同的 txt 文件？例如 Pricelist_8343.txt、Pricelist_8363.txt 等

* * *

```
DECLARE @CustNum varchar(20)
SELECT @CustNum = '7509'

SELECT
it.ITEMID 'item id'
,it.ItemGroupID
,it.ITEMNAME
,Convert(Decimal(9,0),itm.QUANTITY) 'Sales Multiple'
,Convert(Decimal(9,0),it.TAXPACKAGINGQTY) 'Price Break Qty'
,Convert(Decimal(9,0),it.OUTERQUANTITY) 'Carton Qty'
,Convert(Decimal(9,2),itm.PRICE) 'Part Pack'
,Convert(Decimal(9,2),itm.PRICE2) 'Full Pack'
,Convert(Decimal(9,2),round( CASE 
WHEN pdt.AMOUNT >0 then pdt.amount
else CASE
 when pdt.discpct is null then CASE
    WHEN pdt.PRICELEVELTOUSE = 0 then Price
    WHEN pdt.PRICELEVELTOUSE = 1 then Price2
    WHEN pdt.PRICELEVELTOUSE = 2 then Price3
    WHEN pdt.PRICELEVELTOUSE = 3 then Price4
    WHEN pdt.PRICELEVELTOUSE = 4 then Price5 
    WHEN pdt.PRICELEVELTOUSE = 5 then Price6 END
 when pdt.discpct = 0 then CASE
    WHEN pdt.PRICELEVELTOUSE = 0 then Price
    WHEN pdt.PRICELEVELTOUSE = 1 then Price2
    WHEN pdt.PRICELEVELTOUSE = 2 then Price3
    WHEN pdt.PRICELEVELTOUSE = 3 then Price4
    WHEN pdt.PRICELEVELTOUSE = 4 then Price5 
    WHEN pdt.PRICELEVELTOUSE = 5 then Price6 END
 when pdt.discpct > 0 then CASE
    WHEN pdt.PRICELEVELTOUSE = 0 then round(itm.price - (itm.price*pdt.discpct/100),2)
    WHEN pdt.PRICELEVELTOUSE = 1 then round(itm.price2 - (itm.price2*pdt.discpct/100),2)
    WHEN pdt.PRICELEVELTOUSE = 2 then round(itm.price3 - (itm.price3*pdt.discpct/100),2)
    WHEN pdt.PRICELEVELTOUSE = 3 then round(itm.price4 - (itm.price4*pdt.discpct/100),2)
    WHEN pdt.PRICELEVELTOUSE = 4 then round(itm.price5 - (itm.price5*pdt.discpct/100),2)
    WHEN pdt.PRICELEVELTOUSE = 5 then round(itm.price6 - (itm.price6*pdt.discpct/100),2) END END END ,2)) as 'TAPrice'
,upper(itm.unitid) 'UOM'
,     Case
            When itm.PRICECHANGESTATUS=3 then 'Increase'
            When itm.PRICECHANGESTATUS=2 then 'Decrease'
            When itm.PRICECHANGESTATUS=1 then 'New Item'
            When itm.PRICECHANGESTATUS=0 then '-'
      END 'Price Indicator'
from  INVENTTABLE it
join  INVENTTABLEMODULE itm   on it.ItemId = itm.ItemID and itm.ModuleType = 2
join  CUSTTABLE cust on LTRIM(cust.AccountNum) = @CustNum
left outer join   PRICEDISCTABLE pdt on (ltrim(pdt.accountrelation) = 
    case
    when pdt.accountcode = 0 then ltrim(cust.accountnum) 
    when pdt.accountcode = 1 then ltrim(cust.pricegroup) end)and
      (ltrim(pdt.ItemRelation)+ltrim(pdt.UnitID) = case
        when pdt.itemrelation = it.itemid then ltrim(it.ItemID)+ltrim(itm.Unitid)
        when pdt.itemrelation = it.itempricegroup then  ltrim(it.ItemPriceGroup)+ltrim(itm.Unitid)end
        ) and pdt.fromdate <= getdate() and (getdate()<= pdt.todate or pdt.todate = ' ')
join  PriceLevelListReportLine sorter on it.ItemGroupID  = sorter.ItemGroupID
and (it.ItemType = (case when sorter.linetype = 0 then '0'
      when sorter.linetype = 1 then '0'
      when sorter.linetype = 2 then '1'end)

or it.ItemType = (case when sorter.linetype = 1 then '1' end))
WHERE it.PRICELISTFlag=1
ORDER BY sorter.SortOrder, it.ItemID 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-12T01:14:49.390

您可以使用[SQLCMD](http://msdn.microsoft.com/en-us/library/ms162773.aspx)和批处理文件来执行此操作。

制作一个`script.sql`内容如下的文件：

```
declare @CustNum varchar(20) = '$(custnum)'
select
   -- your giant query here 
```

然后制作一个如下所示的批处理文件：

```
@echo off

set custnum=1234
call :export

set custnum=5678
call :export

set custnum=9012
call :export

goto :eof
:export
sqlcmd -E  -i script.sql -o %custnum%.txt -v CustNum=%custnum%
goto :eof 
```

为您的 18 个客户中的每一个复制并粘贴`set`/`call`行一次。

`for`如果您在某处有客户列表 - 另一个 SQLCMD 查询的输出，或者只是一个文本文件，那么您可以使用循环来代替复制+粘贴。我把它留给你弄清楚。

# excel - Excel 2010 - 同一张表上的多种类型的锁

> ID：13830571
> 
> 赞同：1
> 
> 时间：2012-12-11T23:59:26.407
> 
> 标签：excel

所以我正在尝试创建一个处理用户输入/输出任务的 excel 表（我知道这充其量是一个杂物，最坏的情况是令人反感）。所以我希望用户能够编辑输入单元格（并且只有输入单元格），并选择（但不能编辑）输出。

示例：网格 A1:C3。A1:A3 完全锁定 - 无法选择。B1:B3 是可选择和可编辑的。C1:C3 是可选择和不可编辑的。

这可能吗？我的直觉告诉我不，但我想我还是会问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:31:56.043

可以使用工作表保护：

在单元格 B1:B3 的“单元格格式”对话框中，取消选中最后一个选项卡（保护）中的“受保护”复选框。然后保护工作表（右键单击底部的工作表选项卡->保护工作表）。一旦工作表受到保护，用户就只能编辑那些不受保护的单元格。

关于选择 C1:C3 和不选择 A1:A3 - 您可以允许/阻止用户在同一工作表保护对话框中选择保护单元格。但是，这是一个工作表范围的设置，因此默认情况下，您只能完全阻止选择所有保护单元格或允许选择所有单元格。

如果您只想阻止选择 A1:A3 因为您不希望用户看到公式，只需在“单元格格式”对话框中选中“隐藏” - 这样用户就不会看到公式。

如果您确实需要在可选择和不可选择之间进行区分，请拆分为两个工作表 - 或使用一点 VBA 宏。为此，请打开 VBA 编辑器 (Alt+F11) 并双击左上角列表中的工作表。在代码窗口中，输入以下代码：

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
    If Me.ProtectContents And Intersect(Target, Range("B1:C3")) Is Nothing Then Range("B1").Select
End Sub 
```

这样，每次选择所需范围之外的单元格时，都会选择 B1

# c# - 如何知道操作系统的当前颜色？

> ID：13830572
> 
> 赞同：0
> 
> 时间：2012-12-11T23:59:27.200
> 
> 标签：c#, wpf, xaml, styles, controltemplate

我想从工具栏编辑一个按钮，但我意识到当我尝试编辑按钮样式时，我注意到当前`SolidColorBrushes`来自`PresentationFramework.Aero`. 我想得到`SystemColor`.`ToolBarButtonPressed`

我说清楚了吗？如果没有，请告诉我。

![在此处输入图像描述](../Images/865771e3df548cc6f8aceb744ccfdfab.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:43:14.000

我认为您无权访问这些画笔，因为您不知道它们的资源密钥。这些画笔在 aero 主题的资源文件中定义，它们在`SystemColors`.

可能您并不想更改工具栏按钮的模板，而是稍微重新设置它的样式。在这种情况下，您可以将样式基于默认工具栏按钮样式，而无需关心当前主题：

```
<Style x:Key="ButtonStyle1" TargetType="{x:Type Button}"
    BasedOn="{StaticResource {x:Static ToolBar.ButtonStyleKey}}">
    <!--custom setters and triggers-->
</Style> 
```

# php - 来自 sql 数组的图像未显示

> ID：13830573
> 
> 赞同：1
> 
> 时间：2012-12-11T23:59:28.977
> 
> 标签：php, html, sql

我试图让我的 sql 表 NEWS 中的前 5 个图像连续出现。当我尝试这个时，会出现一排空图像框。列`image`表示图像的目录。我仔细检查以确保它是确切的目录。

```
<?php 
   $leaders=mysql_fetch_array(mysql_query("SELECT `image` FROM news ORDER BY ID DESC LIMIT 5"));
   for ($i=1; $i<=5; $i++)
      {
?>
<img src="<?php echo($leaders[$i])?>" style="width: 200px; height: 200px;"></img>
<?php
   }
?> 
```

有人知道为什么图片不显示吗？另外，我在 sql 命令行客户端上对其进行了测试。这

```
SELECT `image` FROM news ORDER BY ID DESC LIMIT 5 
```

确实显示图像网址。它应该工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T00:04:01.420

`mysql_fetch_array`（已弃用）返回 1 个单行，而不是整个结果集。您需要它来获取另一行。像这样的东西会起作用：

```
 <?php 
  $leaders=mysql_query("SELECT `image` FROM news ORDER BY ID DESC LIMIT 5");
  while($row = mysql_fetch_array($leaders)){
   ?>
     <img src="<?php echo($leaders['image'])?>" style="width: 200px; height: 200px;"></img>
  <?php
  } 
```

但说真的，看看`PDO`并开始转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T00:01:59.350

您误解了如何`mysql_fetch_array`工作。它从结果集中（您的第一张图像）中获取一行，因此您必须遍历所有结果才能获取所有图像。

但是你应该在 PDO / mysqli 中这样做，因为这些`mysql_*`函数已被弃用。

# python - Django中的LDAP：需要将unicode密码作为字符串传递

> ID：13830574
> 
> 赞同：4
> 
> 时间：2012-12-11T23:59:31.583
> 
> 标签：python, django, active-directory, ldap

我编写了一个 python 脚本来更改 AD 中的密码，该脚本在命令行中运行良好。现在我将该脚本传输到 Django 以创建更改密码页面。除了一件事之外，一切似乎都有效：出于某种原因，我在 Django 中不断收到一个 TypeError ，它建议应该将字符串而不是 unicode 对象传递给 AD。当然，当我这样做时，AD 会抗议，因为密码不再是 unicode。我猜我忽略了一些简单的东西，但我不知道是什么。

下面是我认为应该可以工作的 views.py 代码（并且在命令行版本中可以工作）。我在密码中添加了 unicode() 只是为了表明它们实际上是 unicode，尽管它们在这些行之前肯定是 unicode。

```
import ldap
def changePassword(request):
    t = ldap.initialize(server) 
    . . .
    t.simple_bind_s('**********', '****')
    . . .
    mod_attrs = [(ldap.MOD_DELETE, 'unicodePwd', [unicode(oldPassword)]), 
                (ldap.MOD_ADD, 'unicodePwd', [unicode(newPassword)])]
    t.modify_s(dn, mod_attrs) 
```

错误：

```
('expected a string in the list', u'pass!word')

     Request Method:   POST
      Request URL:     http://127.0.0.1:8000/index/
     Django Version:   1.4.2
     Exception Type:   TypeError
    Exception Value:
                       ('expected a string in the list', u'pass!word')

   Exception Location: /usr/lib/python2.7/dist-packages/ldap/ldapobject.py
                       in _ldap_call, line 96
   Python Executable:  /usr/bin/python
     Python Version:   2.7.3 
```

修改后的版本没有抛出异常，也没有修改密码（因为密码不是unicode传入的）：

```
mod_attrs = [(ldap.MOD_DELETE, 'unicodePwd', [str(oldPassword)]), 
            (ldap.MOD_ADD, 'unicodePwd', [str(newPassword)])]
t.modify_s(dn, mod_attrs) 
```

有谁知道什么可能导致这个 unicode 问题？如果我可以防止 Django 中的异常并保留 unicode，我认为这段代码会起作用。

提前感谢您提供的任何见解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T18:54:21.300

这似乎是 Python LDAP 模块的一个问题。一个快速的解决方法是将所有 Unicode 字符串转换为`str()`. 我可以通过这种方式在 OpenLDAP 目录中存储包括密码在内的属性。我直接使用 python.ldap，而不是通过 Django。

# javascript - jqGrid 跨域请求提供自定义回调名称

> ID：13830576
> 
> 赞同：0
> 
> 时间：2012-12-11T23:59:48.900
> 
> 标签：javascript, jquery, jqgrid

我有一个跨域请求，需要按如下方式指定回调

```
http://<server>:<port>/../../abc?_callback=<callbackName> 
```

使用 jqGrid，我不确定如何启用它。jqGrid 是 $.ajax 调用的包装器，它接受 url 并允许您指定跨域属性。我当前的配置提供了正确的响应：

```
$("#list").jqGrid({
url:'<sample cross domain URL>',
callback: 'callme',
mtype: 'GET',
crossDomain: true,
datatype: 'jsonp',
jsonp: true,
cache: true,
....... // other grid properties to load the layout for this dynamic data. 

)}; 
```

“回调：'callme'”行似乎不起作用，因为萤火虫显示为请求分配的默认回调值。但是，此回调被指定为

```
<sample URL>?callback=jqueryXXX...X 

instead of

<sampleURL>?_callback=callme 
```

jqGrid 是否允许您指定自定义回调名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T00:07:09.167

您的主要错误是您使用了 jqGrid 中不存在的一些选项。您使用`callback`, `crossDomain`,`jsonp`和[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)`cache`支持的选项，但 jqGrid 中没有这样的选项。

我希望您在从[答案](https://stackoverflow.com/a/9588051/315935)和[另一个](https://stackoverflow.com/a/4326986/315935)中检查演示后找到您问题的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T13:36:05.220

jqgrid 和远程 URL（跨域）也有一些问题。为了解决它们，我在我的域上使用了一个 php 页面：cross-domain.php，它带有一个 GET 参数：

这是php页面的内容：

```
<?php
    print(file_get_contents($_GET['url']));
?> 
```

因此，要用这样的 URL 填充 jqgrid：

```
jQuery("#jqgrid_table_id").jqGrid({
    url : <?php print("'cross-domaine.php?url=" . urlencode('http://www.example.com/my_json_webservice.php') . "'"); ?>,
    ...
}); 
```

它工作得很好，当然它可以用任何服务器语言来完成。

而且您不必担心[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)问题。

# markdown - 如何在 Slidify 中使用 MathJax？

> ID：13830580
> 
> 赞同：6
> 
> 时间：2012-12-12T00:00:00.913
> 
> 标签：markdown, slidify

似乎所有需要做的就是`widget: mathjax`在标题页中声明。但我无法正确呈现公式。有什么遗漏吗？谢谢你。

![在此处输入图像描述](../Images/9d3dc469fa39b327f543b41e7f05bd45.png)

**更新**：我检查了final `index.html`，发现很多“*”变成了`<em>`or `</em>`。似乎 slidify 正在混合`*`in LaTeX 和`*`in markdown。

这是我的 LaTeX 片段：

```
\begin{align*}
&\begin{bmatrix}
\mathbf{y}\\
y_*
\end{bmatrix}
=\mathcal{N}\left(0,\begin{bmatrix}
K & K_*\\
K_*^T & K_{**}
\end{bmatrix}\right)\\
\Longrightarrow & y_*|\mathbf{y}\sim\mathcal{N}\left(K_*K^{-1}\mathbf{y},K_{**}-K_*K^{-1}K_*^T\right)\\
\Longrightarrow & \overline{y_*}=K_*K^{-1}\mathbf{y}
\end{align*} 
```

这被转换为

```
<li>Inference
$$\begin{align<em>}
&amp;\begin{bmatrix}
\mathbf{y}\
y_</em>
\end{bmatrix}
=\mathcal{N}\left(0,\begin{bmatrix}
K &amp; K<em>*\
K</em><em>^T &amp; K_{</em><em>}
\end{bmatrix}\right)\
\Longrightarrow &amp; y_</em>|\mathbf{y}\sim\mathcal{N}\left(K<em>*K^{-1}\mathbf{y},K</em>{*<em>}-K<em>*K^{-1}K</em></em>^T\right)\
\Longrightarrow &amp; \overline{y<em>*}=K</em><em>K^{-1}\mathbf{y}
\end{align</em>}$$</li>
</ul> 
```

**更新 2**：我替换了`&#95;`for`_`和`&#42;`for `*`，以及`\\`for some `\`。现在看起来相当不错：

```
$$\\begin{align&#42;}
&\\begin{bmatrix}
\mathbf{y}\\\\
y&#95;&#42;
\\end{bmatrix}
=\mathcal{N}\left(0,\begin{bmatrix}
K & K&#95;&#42;\\\\
K&#95;&#42;^T & K&#95;{&#42;&#42;}
\\end{bmatrix}\right)\\\\
\Longrightarrow & y&#95;&#42;\big|\mathbf{y}\sim\mathcal{N}\left(K&#95;&#42;K^{-1}\mathbf{y},K&#95;{&#42;&#42;}-K&#95;&#42;K^{-1}K&#95;&#42;^T\right)\\\\
\Longrightarrow & \bar{y}&#95;&#42;=K&#95;&#42;K^{-1}\mathbf{y}
\\end{align&#42;}$$ 
```

# c# - 如何从后面的代码中填充动态添加的 html 选择控件？

> ID：13830581
> 
> 赞同：1
> 
> 时间：2012-12-12T00:00:01.007
> 
> 标签：c#, javascript, asp.net, visual-studio-2008

我已经在asp.net和c#中编程了一周左右，请多多包涵。

我正在尝试在asp c#中做一个收据生成器，看起来有点像这样：

![收据](../Images/e7387aa43c35f652f46f6ce01e644d8b.png)

蓝色按钮使用此 javascript 函数向表中添加新行：

```
function nuevo(){
$("#tablaUsuarios").append("<tr>" +
    "<td><select name='listaConceptos' id='listaConceptos' runat='server'></select></td>" +
    "<td><input name='precio' id='precio' type='text' size='15' runat='server' readonly/></td>" +
    "<td><input type='button' value='Eliminar' onclick='eliminar(this)' class='btn btn-danger eliminar'></td>"+
    "</tr>")
} 
```

但是，由于我在运行时通过 javascript 添加控件，因此我无法从后面的代码中访问它们，就像它们是 DropDownList 控件一样，添加***runat="server"***也是无用的，因为在运行时我无法打开它们进入服务器控件，有什么方法可以访问控件，以便我可以填充、设置数据源等，就好像它是一个 DropDownList？或者任何其他动态生成和填充 DDL 的方式？

我考虑过用我需要的数据库中的所有数据填充一个隐藏的 DropDownList，并在创建时将其所有属性复制到其他选择控件，但我不知道它是否会像具有 DataValueFields 和 TextFields 的 DDL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:12:19.340

查看下面的链接。 [在 ASP.NET 代码隐藏中访问客户端动态控件](https://stackoverflow.com/questions/4351361/accessing-client-side-dynamic-controls-within-asp-net-codebehind)

您应该能够在服务器端按名称访问表单元素，如下所示：

```
var val = Request.Form["YOUR_CONTROLS_NAME"]; 
```

但是，您必须负责为添加的控件命名为唯一名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T00:07:11.677

客户端和服务器端代码是两个不同的东西。据我所知，没有办法做你所要求的。

例如，如果您想从数据库中填充下拉列表，您可以将数据加载到隐藏字段或控件中，然后使用 javascript 填充数据。

对我来说听起来相当复杂，如果你不想要丑陋的回发，也许在服务器端做所有事情并使用更新面板会更容易。

如果不完全了解您的项目，很难说出什么最适合您。

# javascript - jwPlayer 视频无法在 iPad/iPhone 上加载

> ID：13830582
> 
> 赞同：3
> 
> 时间：2012-12-12T00:00:12.743
> 
> 标签：javascript, iphone, html, ipad, jwplayer

## 上下文

我们为非营利组织提供了一个功能齐全的捐赠小部件。我们遇到一个警告：使用*iPod*或*iPhone*时，视频不会在最后一部分加载。

## 问题

我必须警告你，朋友们。这是一个很难的。

*出于某种原因，当我在iPhone*和*iPad*上嵌入 jwPlayer 视频时，我会收到以下消息：

> 无法加载视频，可能是因为服务器或网络故障或格式不受支持： [http ://content.bitsontherun.com/jwp/2gQXJaVU.xml](http://content.bitsontherun.com/jwp/2gQXJaVU.xml)

以下是一些需要注意的关键事项：

*   参见演示：[http](http://www.socialgoodnetwork.com/betterbutton/demo/?id=tvymca_3) ://www.socialgoodnetwork.com/betterbutton/demo/?id=tvymca_3要查看最后一张幻灯片，请单击“立即提供”并单击“提交”以完成整个过程。我在第一张幻灯片中放了与最后一张相同的视频。
*   最后一张幻灯片（捐赠后）不会显示视频。如果我在第一张幻灯片上播放视频，效果很好。
*   仅在*iPhone*和*iPad*上发生

jwPlayer.js 播放器选项：

```
{
    "plugins":              {
                            "gapro": {
                                 'accountid':        "UA-XXXXXXXX-1"
                                ,'trackstarts':      true
                                ,'trackpercentage':  true
                                ,'tracktime':        true
                                } 
                            },
    "gapro.accountid":      "UA-XXXXXXXX-1",
    "logo.hide":            "true",
    "logo":                 {hide: true},
    "file":                 params.url,
    "repeat":               "none",
    "autostart":            "true",
    "playlist.size":        "200",
    "image":                "http://content.bitsontherun.com/thumbs/aQ5bdlXV-640.jpg",
    "stretching":           "uniform",
    "height":               "375",
    "playlist.position":    "none",
    "width":                "560",
    "controlbar.position":  "bottom",
    "skin":                 "http://d1rhaz9gq9lm5b.cloudfront.net/2Bbp4Z6O.zip",
    "ping.pixel":           "http://content.bitsontherun.com/ping.gif",

    "playerready":          "jwplayer.api.playerReady",

    'autostart':            true,

    "flashplayer":          "http://www.socialgoodnetwork.com/jwplayer.swf?logo.hide=true&plugins=gapro-1&gapro.accountid=UA-XXXXXXXX-1",
    'modes':                [
                                {type: 'html5'},
                                {type: 'flash', src: '/jwplayer.swf?logo.hide=true'}
                            ]
} 
```

我必须说，您可以做的任何事情都可以提供帮助-提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:27:19.343

您只提供 Flash 视频。没有 iDevices 支持 Flash，这是 Apple 做出的决定。

您还需要提供 MP4 格式的视频源才能在 iDevices 上播放。

这几乎就是贾斯汀麦克劳在上面/下面所说的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T03:49:41.560

为了使 HTML5 版本适用于 iOS 和其他不支持 Flash 的设备，您必须将实际文件托管在您自己或第三方服务器的某个位置。也就是说，您需要向使用 iOS 设备的用户显示 .MP4 视频。YouTube 视频也可以。您的 params.url 文件是 Flash .swf 文件吗？您可以从[LongTail 的文档](http://www.longtailvideo.com/support/jw-player/28836/media-format-support)中了解有关此要求的更多信息。希望我正确理解了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-30T10:55:02.620

我想有一个统计请求。在我的情况下，从萤火虫播放之前和之后请求的 URL 如下所示：

http://injwpltx.com/v1/jwplayer6/ping.gif?tv=3867&ph=0&n=3242919060939303&aid=_&e=e&i=0&pv=6.6.3867&pu=http%3A%2F%2F[PAGE_URL]%2F&m=1&a=0&v =0&w=100%25&h=270&ed=0&pn=&pt=标题

如果显示解决错误的代理块。配置代理接受此类请求后，jwplayer 工作正常。

希望这会对某人有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T02:06:56.477

出于某种原因，设置`autostart`为`false`让我的视频在 iOS 上运行：

```
 'autostart': false, 
```

稍后我会尝试发布更多信息。可能是我的视频没有正确编码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-19T12:29:06.603

我有一个类似的问题。jwplayer 在 Chrome 中运行良好，但在 iPad 上的 Safari 中运行良好。

当我观察浏览器设置时，它处于隐私浏览模式。由于视频存储在安全服务器中，私人浏览器将无法将视频获取到 jwplayer。我将 Safari 浏览器的私有模式更改为非私有，问题就解决了。视频播放流畅。

看看这个链接 - [https://discussions.apple.com/thread/6240773](https://discussions.apple.com/thread/6240773)

希望这可以帮助 ...

谢谢， 安贾利

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-06T09:57:03.787

Ipad 和 Iphone 在任何版本的 JWPlayer 中自动检测模式。Apple 设备中也会自动禁用“自动启动”。

需要注意的关键是视频编解码器和 Apple 的规范。如果音频比特率或采样率高于规格，则必须先转换视频。

# php - 向 php 页面发送请求，然后使用 ajax 返回结果

> ID：13830583
> 
> 赞同：1
> 
> 时间：2012-12-12T00:00:12.337
> 
> 标签：php, javascript, ajax

我有一个脚本，我试图将一些位置信息发送到 php 页面，执行 mysql 搜索查询并在不转到另一个页面的情况下返回结果。

我的 php 工作正常，我的页面工作正常，它重定向到 php 页面，但是当我尝试使用下面的代码时，我没有得到任何传回的结果。

Javascript代码

```
 function phpRedirect(loc) { 

  // var radius = get('r');     // Retrieve GET values for search radius      and                           
  // var numResults = get('n'); // number of results

  var radius = 10;     // Retrieve GET values for search radius and                           
   var numResults = 5; // number of results

  var latitude = loc.coords.latitude;   // Get long, lat and accuracy from
  var longitude = loc.coords.longitude; // location object
  var accuracy = loc.coords.accuracy;

var xmlHttp = new XMLHttpRequest();  //not the cross browser way of doing it
   xmlHttp.open("GET", "find.php?lat=" + latitude + "&long=" + 
                   longitude + "&acc=" + accuracy + "&r=" + radius 
                   + "&n=" + numResults, true); 
    xmlHttp.send(null);                    

    } 

      $(function () 
     {
   $.ajax({                                      
    url: 'find.php',                  //the script to call to get data          
    type: "post",
    data: { getData: true },
    dataType: 'json',                //data format      
    success: function(data)          //on recieve of reply
    {
        var name = data[0];              

        $('#output').html("<b>username: </b>"+username);

       } 
    });
  }); 

 function error(loc) { 
 // This is called if the location can't be found.
  document.write("Error finding GPS location");
  } 

 // Use navigator to get current user location. If found, calls 'phpRedirect()',
// If not available calls 'error()'. Includes timeout and ensures highest acc.
navigator.geolocation.getCurrentPosition(phpRedirect, error, {maximumAge:60000,    timeout:5000, enableHighAccuracy:true}); 

<div id="output">this element will be accessed by jquery and this text replaced </div> 
```

下面是我的 php 查询的输出，

```
 $result=mysql_query($query) or die (mysql_error());

  while($row=mysql_fetch_assoc($result)) $data[]=$row; // Turn result to array

  $acc_package = array('location_accuracy'=>"$accuracy"); // Include result array
  $output[] = $acc_package;                          // and accuracy value inside
  $output[] = $data;                                 // an output array.
  print(json_encode($output)); // Convert output array to json format and print 
```

这给出了以下结果

```
 [{"location_accuracy":"122000"},[{"username":"bobbyj","distance":"0.484367160806139"}]] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T00:53:43.253

山姆，我有几个建议给你。

首先，jQuery 库很棒，AJAX 模块的效果也很棒 :) 您正在使用它真是太好了！无需将旧的 XMLHTTP 垃圾与它混合（它们基本上做同样的事情）。所以摆脱它并用jQuery ajax替换它。

让我们从一些非常基本的东西开始：

```
$.ajax({                                      
    url: 'find.php',       
    type: "POST",
    data: { lat: lattitude } 
}).done(function( msg ) {
    alert(msg);
}); 
```

将您的其他变量放入数据中：以及。

在您的 PHP 页面上，尝试一个简单的 var_dump($_POST); 所以你可以看到正在发生的事情。AJAX 应该对 PHP 页面的内容发出警报。

用你的 Mysql 从这里开始工作:)

# mysql - 大上传后触发

> ID：13830589
> 
> 赞同：1
> 
> 时间：2012-12-12T00:00:39.023
> 
> 标签：mysql, sql, triggers, automation

我有一个将 txt 文件上传到表格中的 php 页面，

```
$sql = "LOAD DATA LOCAL INFILE 'data.txt'
                    REPLACE
                    INTO TABLE tempdirtySI
                    FIELDS TERMINATED BY '\t' 
                    LINES TERMINATED BY '\n'
                    IGNORE 1 LINES
                    "; 
```

在导入包含此代码的所有数据后，我想运行一个触发器来运行。

```
UPDATE tempdirtysi
SET TIMESTAM = DATE_FORMAT(STR_TO_DATE(TIMESTAM, '%m/%d/%Y %H:%i:%s'), '%Y-%m-%d %H:%i:%s');
INSERT INTO temploadsi
SELECT * FROM tempdirtysi;
TRUNCATE  tempdirtysi; 
```

我该怎么做？我试图将更新和插入吐出到两个触发器中，并且只允许导入一行。我还尝试在 php 页面中进行更新，并在更新后运行插入，但这也只运行 1 行。

也许还有另一种方法可以自动化这个过程

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T00:19:18.150

恕我直言，您不需要为此触发。只需从您的 PHP 代码中按顺序执行您的 sql 命令。

```
$db = new mysqli('host', 'username', 'password', 'database');

$sql = 'LOAD DATA LOCAL...';
$db->query($sql);

$sql = 'UPDATE tempdirtysi SET ...';
$db->query($sql);

$sql = 'INSERT INTO temploadsi SELECT * FROM tempdirtysi';
$db->query($sql);

$sql = 'TRUNCATE  tempdirtysi';
$db->query($sql); 
```

# linux - 当我执行 bash 时，$PATH 不断重复

> ID：13830594
> 
> 赞同：2
> 
> 时间：2012-12-12T00:01:05.777
> 
> 标签：linux, bash

我在 /etc/bashrc（在 Fedora 上）中添加了如下条目。

```
#=========== Maven Related variables
export JAVA_HOME='/usr/java/default'
export PATH=${JAVA_HOME}:$PATH

#=========== Maven Related variables
export M2_HOME=/usr/local/apache-maven/apache-maven-3.0.4
export PATH=${M2_HOME}/bin:$PATH

#=========== Ant Related variables
export ANT_HOME=/usr/local/apache-ant
export Path=${ANT_HOME}/bin:$PATH 
```

现在，每次我执行 bash 命令刷新环境变量时，所有这些添加都会重复，而 PATH 只是不断地递归添加自己；如果我继续 bash 几十次，那么 $PATH 就会变成一百行重复的内容。我究竟做错了什么？

请注意，我已将这些条目添加到 /etc/bashrc，因为无论我以什么用户身份登录，我都希望在 PATH 中拥有这些值。

谢谢，香农

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T00:10:13.580

不要在`.bashrc`;中增量设置你的 PATH 。将其放入一次，`.profile`然后将其单独放置。或者，既然你提到`/etc/bashrc`了，不要在`/etc/bashrc`;中增量设置 PATH 。将其放入一次，`/etc/profile`然后不理会它。

一个附带的好处；事情会更快一点。

另请参阅[如何在 shell 脚本中操作 PATH 元素中](https://stackoverflow.com/questions/273909/how-do-i-manipulate-path-elements-in-shell-scripts/274448#274448)的代码，以获取用于清理重复 PATH 的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T00:10:39.390

如果通过这种说法：

> ...执行bash命令刷新环境变量...

你的意思是你正在输入命令

```
bash 
```

在命令提示符下，您不是“刷新环境变量”。您正在启动当前 shell 的新子 shell。新 shell 继承了原始 shell 的路径，您将再次对其进行添加。每次执行此操作时，PATH 都会变长。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T00:13:07.187

你可以使用类似的东西：

```
PATH=$(echo "$PATH" | awk -v RS=: -v ORS=: '!(a[$0]++)' | sed 's/:$//') 
```

更改路径后清理路径。此外，由于在扫描路径时使用了第一个匹配项，因此重复并不重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-11T15:01:09.737

我也遇到过同样的问题（CentOS）。这就是我修复它的方法。

1.  将以下行添加到我的用户的 .profile

    导出 PATH=/usr/local/apache-maven-3.3.3/bin:$PATH

    导出 JAVA_HOME=/usr

    导出 SHELL=/bin/bash

    ```
    # 运行 bash（因为 ksh 是我的默认 shell）
    ```

    /bin/bash

2.  我的用户的 .bashrc 文件没有更改

3.  /etc/profile 没有变化
4.  /etc/bashrc 没有变化

# c# - 使用 HTTP 流而不一次读取一个字节

> ID：13830600
> 
> 赞同：7
> 
> 时间：2012-12-12T00:01:57.883
> 
> 标签：c#, asp.net, .net, stream

我一直在尝试使用 C# 从 Twitter 流 API 读取数据，由于有时 API 不会返回任何数据，而我正在寻找近乎实时的响应，所以我一直犹豫是否使用超过 1 字节的缓冲区长度在阅读器上，以防流在接下来的一两天内不再返回任何数据。

我一直在使用以下行：

```
input.BeginRead(buffer, 0, buffer.Length, InputReadComplete, null); 
//buffer = new byte[1] 
```

现在我打算扩大应用程序的规模，我认为大小为 1 会导致大量 CPU 使用，并希望增加该数量，但我仍然不希望流只是阻塞。如果在接下来的 5 秒内没有读取更多字节或类似的东西，是否可以让流返回？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T00:09:53.307

**异步选项**

如果在 5 秒内没有收到任何字节，您可以在异步回调方法中使用计时器来完成操作。每次接收到字节时重置定时器。在 BeginRead 之前启动它。

**同步选项**

或者，您可以使用底层套接字的 ReceiveTimeout 属性来确定在完成读取之前等待的最长时间。您可以使用更大的缓冲区并将超时设置为例如 5 秒。

从[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.receivetimeout.aspx)中，该属性仅适用于同步读取。您可以在单独的线程上执行同步读取。

**更新**

这是从类似问题拼凑而成的粗略、未经测试的代码。它可能不会按原样运行（或没有错误），但应该给你一个想法：

```
private EventWaitHandle asyncWait = new ManualResetEvent(false);
private Timer abortTimer = null;
private bool success = false;

public void ReadFromTwitter()
{
    abortTimer = new Timer(AbortTwitter, null, 50000, System.Threading.Timeout.Infinite);

    asyncWait.Reset();
    input.BeginRead(buffer, 0, buffer.Length, InputReadComplete, null);
    asyncWait.WaitOne();            
}

void AbortTwitter(object state)
{
    success = false; // Redundant but explicit for clarity
    asyncWait.Set();
}

void InputReadComplete()
{
    // Disable the timer:
    abortTimer.Change(System.Threading.Timeout.Infinite, System.Threading.Timeout.Infinite);
    success = true;
    asyncWait.Set();
} 
```

# javascript - GreaseMonkey 脚本，不解析添加到 DOM 的链接

> ID：13830604
> 
> 赞同：1
> 
> 时间：2012-12-12T00:02:42.703
> 
> 标签：javascript, google-chrome, greasemonkey

我正在使用一个油脂猴脚本，即 Youtube 已经：[http ://userscripts.org/scripts/review/47198](http://userscripts.org/scripts/review/47198)

该脚本旨在突出显示已访问的链接。关键因素是去除使 a:visited 无效的 url 参数。

```
i.e.: http://www.youtube.com/watch?v=aKWPht3fU-o               != 
      http://www.youtube.com/watch?v=aKWPht3fU-o&featured=fvw 
```

重要的部分是：

```
var cleanlink, dirtylink, i, x, aXpath;
aXpath = new Array(7);
aXpath[0] = '//a[contains(@href, "feature=related")]';
aXpath[1] = '//a[contains(@href, "feature=relmfu")]';
aXpath[2] = '//a[contains(@href, "feature=g-")]';
aXpath[3] = '//a[contains(@href, "feature=b-")]'; // &feature=b- all browse 
aXpath[4] = '//a[contains(@href, "/user/")]';
aXpath[5] = '//a[contains(@href, "/videos")]';    // search 
aXpath[6] = '//a[contains(@href, "&list")]';      // playlists

for(x in aXpath) {
    dirtylink = document.evaluate(aXpath[x], document, null, XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE, null);
    for (i = 0; i < dirtylink.snapshotLength; i++) {
        cleanlink = dirtylink.snapshotItem(i);
        switch (x){
        case 6:
                    cleanlink.href = cleanlink.href.replace(/\&feature(.*)/,"").replace(/\&index(.*)/,"");
            break;
        case 4:
        case 5:
            cleanlink.href = cleanlink.href.replace(/\?(.*)/,"");

            break;
        default :
            cleanlink.href = cleanlink.href.replace(/\&(.*)/,"");
                }
    }
} 
```

问题是这段代码只会检查标准 HTML youtube 页面中的链接。使用 AJAX 添加的链接（主要在 youtube 频道上）不会被规范化。

即使使用 AJAX 注入的链接，是否有任何方法可以运行此用户脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:04:57.617

除非你想为你的“规范化器”运行超时，否则没有直接的方法

```
setInterval(function() {
    //> code here
},1000); 
```

# sql - SQL比较两列，其中第三列是常数并返回差异

> ID：13830605
> 
> 赞同：2
> 
> 时间：2012-12-12T00:02:48.997
> 
> 标签：sql

我需要比较表中的两个描述字段，其中另一个字段（组）是常量，如果存在不匹配的描述数据，则返回所有行。

例如，如果我有这张桌子：

```
Chart   Group   Desc1   Desc2
 1      11111     a       b
 2      11111     a       x
 1      22222     z       h
 2      22222     z       h
 5      22222     u       h
 1      55555     j       p
 3      55555     j       p
 4      55555     j       p 
```

我需要返回 Group 值相同且 Desc1 或 Desc2 与同一组的其余 Description 值不同的所有行。我的回报是：

```
Chart   Group   Desc1   Desc2
 1      11111     a       b
 2      11111     a       x
 1      22222     z       h
 2      22222     z       h
 5      22222     u       h 
```

我试图做一些不同的选择，但我失败了......感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:06:23.490

```
SELECT c1.*, c2.*
FROM   Chart c1
       INNER JOIN
       Chart c2 ON c1.Group=c2.Group
WHERE  c1.Desc1<>c2.Desc1 
       OR
       c1.Desc2<>c2.Desc2 
```

这将为您提供每对不匹配的 2 行，不幸的是，从您提供的数据中，我看不到任何可以让我唯一标识每一行的内容 - 如果您有 id 列，您可以添加 c1.id

# php - PHP 数组键可以有别名吗？

> ID：13830610
> 
> 赞同：6
> 
> 时间：2012-12-12T00:03:00.590
> 
> 标签：php, arrays, alias

这只是一个奇怪的问题，其背后的原因纯粹是我稍微懒一点。这就是我的意思..

假设我有一个网站，htaccess 在其中生成了很好的 url，并将该数据作为当前“页面”发送到 $_GET['p'] 数组键。在索引文件中，我设置了页面，我做的第一件事是在配置文件 $_PAGE 数组中设置一些页面设置。现在，假设我有多个页面，我希望有相同的设置，（在页面下方，其他内容可能会略有变化，与设置不对应。所以目前，我有一些类似于以下 2 个 php 文件的内容。

```
// index.php
include('page.array.php');

echo '<title>'.$_PAGE[$_GET['p']]['title'].'</title>';

// page.array.php
$_PAGE = array(
    'some/page/' => array(
        'title' => 'This is an example'
    )
)
$_PAGE['some/aliased/page/'] = $_PAGE['some/page/']; 
```

请注意，在页面数组的末尾，为了给页面“别名”，我必须在创建数组后将其添加到末尾。

php中是否有任何我可能不知道的方法，这可能会让我变得有点懒惰（同时添加到更简洁的代码中），并让它让我可以简单地为密钥起别名？我注意到以下不起作用，我想我的问题是，有没有办法在创建数组期间在同一个数组中创建别名？

这个例子不起作用：

```
// page.array.php
$_PAGE = array(
    'some/page/' => array(
        'title' => 'This is an example'
    ),
    'some/aliased/page/' => $_PAGE['some/page/']
) 
```

也许是一种从自身内部引用“这个”数组的方法？

如果这是不可能的，我对“不可能”的答案没有问题。虽然如果你有更好的方法来解决这个问题，除了我上面描述的方法之外，为了更懒惰，我会有兴趣阅读它:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T00:08:38.970

我不相信您可以拥有像这样反映数组中其他值的数组值。不过，首先想到的是让您`$_PAGE`从`switch`语句中构造数组，使用贯穿值作为别名：

```
// Define path for testing, and empty page array
$path = "some/aliased/page";
$page = Array();

// Time to evaluate our path
switch ($path) {
    // If it's either of these two cases
    case "some/page":
    case "some/aliased/page":
        // Assign this array to $page
        $page = Array("Title" => "Two Paths, One Page.");
        break;
    // If it's this case
    case "some/other/path":
        // Assign this array to $page
        $page = Array("Title" => "Something else.");
        break;
    // If the path isn't found, default data
    default:
        $page = Array("Title" => "Page not found");
}

// Output the result
var_dump($page); 
```

执行它：[http://sandbox.onlinephpfunctions...ebd3dee1f37c5612c25](http://sandbox.onlinephpfunctions.com/code/c86b962dd84a4148e0b4cebd3dee1f37c5612c25)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T00:26:42.143

这是可能的：

```
$_PAGE = array('some/page/' => array('title' => 'This is an example'));
$_PAGE['some/aliased/page/'] = &$_PAGE['some/page/'];
$_PAGE['some/page/'] = 7;
var_dump($_PAGE); 
```

使用 & 获取对（非对象）变量的引用而不是其值。

# java - 如何在 Java 线程上使用共享内存？

> ID：13830613
> 
> 赞同：6
> 
> 时间：2012-12-12T00:03:11.687
> 
> 标签：java, multithreading, class, multiprocessing, shared-memory

我正在用 Java 实现一个多线程程序，其中每个程序`thread`都是一个类型`class Node extends Thread`。

所有这些类都会生成某些值，这些值将被其他类使用。

因为`main`从 generated 中获取值很容易`threads`，但是从其`threads`自身内部，我怎样才能获取 other 上的值`threads`？

```
//Start the threads from a list of objects
for (int i = 0; i < lnode.size(); i++) { 
    lnode.get(i).start();
} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T00:35:58.010

如果您执行以下操作：

```
class MyThreadRunnable implements Runnable {
    List<String> strings;

    MyThreadRunnable(List<String> strings) {
        this.strings = strings;
    }

    public void run() {
        strings.add(getName());
    }
}

// ...

List<String> sharedStrings = new ArrayList<String>();
Thread t1 = new Thread(new MyThreadRunnable(sharedStrings));
Thread t2 = new Thread(new MyThreadRunnable(sharedStrings));

t1.start();
t2.start(); 
```

那么`t1`and `t2`（两个相同类型的不同线程）都将使用相同的列表，并查看另一个线程对其所做的更改。

实际上，由于为了简洁起见，我没有使用任何同步，因此这也可能会以某种不可预测的方式破坏列表并导致奇怪的错误。我强烈建议您研究进程同步以及`java.util.concurrent`处理并发时的包。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T00:12:14.720

如果是同一进程/jvc 实例的线程，您将不需要“共享内存”，您只需要在您的线程中引用您的数据，例如通过构造函数或静态引用。但是，如果多个线程写入该数据，您将需要一种同步/控制访问机制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T00:09:42.793

听起来您正在寻找[ConcurrentHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html)，但如果没有更多细节，就很难说清楚。

您希望在这些线程之间共享什么样的数据，它们需要如何共享？

顺便说一句 - 通常认为实施`Runnable`比扩展更好`Thread`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-12T09:22:31.127

您可以使用[ThreadLocal](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ThreadLocal.html)来共享变量。ThreadLocal 的定义如下所示：

> Thread Local 可以被认为是一个访问范围，就像一个请求范围或会话范围。这是一个线程范围。您可以在 Thread Local 中设置任何对象，并且该对象对于访问该对象的特定线程将是全局的和本地的。

[您可以在此处](http://java.dzone.com/articles/java-thread-local-%E2%80%93-how-use)找到更多信息。

# java - Java：打开新窗口而不是新标签

> ID：13830617
> 
> 赞同：3
> 
> 时间：2012-12-12T00:03:48.550
> 
> 标签：java, url, window, uri

> **可能重复：**
> [Java 的桌面库能否在新的浏览器选项卡或窗口中启动 URL？](https://stackoverflow.com/questions/706668/can-javas-desktop-library-launch-a-url-in-a-new-browser-tab-or-window)

当我在 Java 中运行此代码时，它会打开一个新选项卡。

```
String url = "www.google.ca";
java.awt.Desktop.getDesktop().browse(URI.create(url)); 
```

我正在使用谷歌浏览器。有没有办法在新窗口而不是新标签中打开它？

# objective-c - Ooyala 视频播放器：全屏/内联切换通知？

> ID：13830620
> 
> 赞同：2
> 
> 时间：2012-12-12T00:04:07.460
> 
> 标签：objective-c, ios, ooyala

我在我的项目中使用 Ooyala 视频播放器，我需要一种方法来检测用户何时在全屏/内联模式之间切换，是否有任何通知？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T01:07:11.140

根据您的标签，我猜这是针对 Ooyala iOS SDK 的。您想在您的 OOOoyalaPlayerViewController 上为 OOOoyalaPlayerViewControllerFullscreenEnter 和 OOOoyalaPlayerViewControllerFullscreenExit 通知添加观察者。

# javascript - 变量未定义，有时

> ID：13830621
> 
> 赞同：5
> 
> 时间：2012-12-12T00:04:09.453
> 
> 标签：javascript, jquery

以下代码在[Head First jQuery](http://shop.oreilly.com/product/0636920012740.do)一书中提供。

```
function lightning_one(t) {
$("#lightning1").fadeIn(250).fadeOut(250);
setTimeout("lightning_one()", t);
}; // end lightning_one 
```

它被这条线调用。

```
lightning_one(3000); 
```

观察到的行为是闪电淡入淡出一次，等待3秒，再次淡入淡出，然后继续淡入淡出。Firebug 没有显示任何 javascript 错误。

我明白为什么我看到我所看到的。我想我会尝试保留 3 秒的间隔，所以我改变了这个：

```
setTimeout("lightning_one()", t);  // nothing in the brackets 
```

对此：

```
setTimeout("lightning_one(t)", t);  // t is in the brackets 
```

当我刷新页面时，闪电会淡入淡出一次。Firebug 告诉我变量 t 是未定义的。

我的问题是，如果变量 t 在我更改后没有定义，那么在我更改之前命令如何运行而没有错误？它仍然有一个名为 t 的变量。

**更多信息**

感谢所有写评论和答案的人。作为记录，在“end”文件夹中，代码变为：

```
 lightning_one();

   function lightning_one(){
$("#container #lightning1").fadeIn(250).fadeOut(250);
setTimeout("lightning_one()",4000);
    }; 
```

我还没有完成适用的章节，所以我不知道以后是否会建议代码更改。如前所述，这可能不是最好的书。然而，它是我买的，我正在从中学习 jQuery 的基础知识。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T00:07:37.483

因为`setTimeout`as a string 的第一个参数是[`eval`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval)-ed，这意味着它将查看`t`未定义的函数的外部范围。第一个很好，因为您没有在调用中使用任何变量，但第二个不是因为`t`没有在函数范围之外定义。它实际上是本地的。

建议：根本不要使用`eval`。实际上，您不需要字符串参数。使用函数表达式：

```
setTimeout(function() {

    lightning_one(t);

}, t); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T00:09:30.147

这**将**起作用：

```
setTimeout(function () { lightning_one(t); }, t); 
```

我很确定从 String 调用函数（并让它被评估）是一种应该避免的不好的做法。

# asp.net-mvc-4 - MVC 4 - 无法使用 NuGet 包管理器控制台创建数据库

> ID：13830622
> 
> 赞同：3
> 
> 时间：2012-12-12T00:04:10.893
> 
> 标签：asp.net-mvc-4, visual-studio-2012, nuget, database-migration, localdb

我正在尝试使用 Visual Studio 2012 NuGet 包管理器控制台创建一个新数据库。我已经完成了启用迁移的所有步骤，成功创建了 Migrations 文件夹，并将其配置类定义为下一个：

```
internal sealed class Configuration : DbMigrationsConfiguration<MyMVC4Project.Infrastructure.CategoryDb>
{
    public Configuration()
    {
        AutomaticMigrationsEnabled = true;
    }

    protected override void Seed(MyMVC4Project.Infrastructure.CategoryDb context)
    {
        context.Categories.AddOrUpdate(d => d.Name,
            new Department() {Name = "dishes"},
            new Department() {Name = "Appliances"},
            new Department() {Name = "furniture"}
            );
    }
} 
```

PM>更新数据库-详细

此时我看到错误消息：

```
Using StartUp project 'MyMVC4Project'.
Using NuGet project ' MyMVC4Project '.
Specify the '-Verbose' flag to view the SQL statements being applied to the target database.
Target database is: 'MyMVC4Project.Infrastructure.CategoryDb' (DataSource: .\SQLEXPRESS, Provider: System.Data.SqlClient, Origin: Convention).
No pending code-based migrations.
Running Seed method. 
```

然后在 App_data 文件夹中没有创建数据库，我希望找到一个 localDb 数据库而不是 SQL Express 数据库，然后安装的 SQL Express 实例的名称不同于“SQLExpress”，并且在我的 web.config 中默认连接字符串指向到 localDB 实例。

请问，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T13:49:22.657

由于某些我不知道的原因，您无法从 sqlServer 看到数据库，但是，由于您没有隐式地访问数据库，因此尚未创建数据库。你需要做 DB.SaveChanger(); 或以任何其他方式在您的代码中访问数据库。

# html - 为什么边框宽度和我在html中设置的不一样？

> ID：13830624
> 
> 赞同：7
> 
> 时间：2012-12-12T00:04:37.523
> 
> 标签：html, css, google-chrome

我将 html 中 div 元素的边框样式设置为`border: 1px solid black;`. 它在大多数情况下正确显示。但是我刚刚发现一个奇怪的，它是 Win 7 Home Premium 上的 Chrome，计算出来的样式显示边框宽度是 1.11111111px 而不是 1px。有人能告诉我导致这种情况发生的任何可能原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T01:27:03.620

我不确定，只是有几个猜测：

1.  您的样式是否可能被同一个 css 文件中的其他样式覆盖？

2.  你的浏览器是 100% 缩放的吗？我认为这不会打扰，但我建议您检查一下

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T06:40:41.273

@chaonextdoor 您在项目中使用了“reset.css”吗？因为大多数情况下，如果我们不为任何元素指定任何样式，它们的浏览器会在这些地方使用其默认设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T02:35:56.953

快速提问：您的边框必须恰好为 1px 是否有特定原因。

此外，正如其他人所说，尝试将您的浏览器和计算机缩放设置为默认的 100% 缩放。

和代码：`border: 1px solid black;`是正确的

# jasper-reports - iReport - 在列中的整个组周围放置边框

> ID：13830635
> 
> 赞同：3
> 
> 时间：2012-12-12T00:05:31.093
> 
> 标签：jasper-reports, border, grouping, ireport

我正在使用*iReport v3.7.6*和*JasperReports*，我请求创建一个表格，其中第一列用于对表格其余部分中显示的问题和答案进行分区/分类。请求的输出示例：

![在此处输入图像描述](../Images/df57aaaee1e1c9a94175677efe0eb07e.png)

**编辑：**对于那些无法查看图像的人，它是一个包含字段“上下文”、“问题”和“答案”的 3 列表。每组 Question 和 Answer 属于一个单独的 Context，它充当该集合的一个类别，而 Context 可以充当多个 Question 和 Answer 集合的一个类别。请求是它看起来像这样：

```
_________________________________
| Context1 | Question1 | Answer1 |
|          |___________|_________|
|          | Question2 | Answer2 |
|          |___________|_________|
|          | Question3 | Answer3 |
|          |___________|_________|
|          | Question4 | Answer4 |
|__________|___________|_________|
| Context2 | Question5 | Answer5 |
|          |___________|_________|
|          | Question6 | Answer6 |
|__________|___________|_________| 
```

我知道我可以将*iReport*设置为不打印重复值，这解决了我不在每一行上打印 Context 的部分问题，但我的问题的第二部分是在整个 Context 字段周围放置一个单元格边框，使其看起来像上面的例子，也就是说，它看起来像一个动态扩展的字段，涵盖了 N 行。如果我在报表的详细信息带中围绕上下文放置一个边框，那么我会在表格中获得永远行的边框，从而导致上下文列中有许多空单元格。*使用iReport 3.7.6*可以进行这种格式设置吗？是否可以在“上下文”字段上进行分组并以某种方式在整个组周围放置边框？

由于每个上下文类别的问题数量是已知的，因此可以在我的数据集中使用标志并有条件地围绕上下文字段设置样式（例如，将标志设置为“top”用于组中的第一个记录，将“last”设置为组中的最后一个记录和根据标志设置框架的边框以显示顶部或底部边框），但这似乎是处理问题的一种非常混乱的方式。另外，一旦删除/添加问题，绷带就会破裂。

另一个想法是创建一个单独生成每个上下文的子报表，在整个子报表周围放置边框，并将结果组合到主报表的详细信息带中，但这似乎是一个简单问题的复杂解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T02:55:36.450

由于我公司的过滤器，我看不到您提供的图像。

您是否与分组数据的边界有关？如果是，您可以放置​​一个静态文本，限定整个组标题带，然后仅指定顶部、左侧和右侧的边框并将其发送到所有标题的后面。它应该被发送到后面（右键单击>发送到后面）

```
<staticText>
    <reportElement positionType="Float" mode="Transparent" x="0" y="1" width="814" height="11" forecolor="#000000" backcolor="#F0F0F0"/>
    <box>
        <topPen lineWidth="0.75" lineColor="#CCCCCC"/>
        <leftPen lineWidth="0.75" lineColor="#CCCCCC"/>
        <rightPen lineWidth="0.75" lineColor="#CCCCCC"/>
    </box>
    <text><![CDATA[]]></text>
</staticText> 
```

然后在该组的细节带中，放置另一个空的透明静态文本，它作用于整个细节带的范围，这次只指定左右边框。

在组页脚中，放置另一个空的透明静态文本，其范围是整个组页脚带，并且只指定顶部边框

# jquery - Jquery获取左视口到我页面上特定div之间的宽度

> ID：13830638
> 
> 赞同：1
> 
> 时间：2012-12-12T00:05:34.823
> 
> 标签：jquery, width, viewport, stretch

我试图让一个面板在我的视口左侧有一个绝对位置，其宽度一直到以我的页面为中心的特定 div，我需要这个 div 有一个动态宽度根据考虑到我的网站的视口大小是响应式的。

这是我的问题的快速解决方法，没有 javascript，因为我不知道该怎么做，以为你们可以帮助我或指出我正确的方向。

[http://jsfiddle.net/jA3JU/3/](http://jsfiddle.net/jA3JU/3/)

开始时使用 width:40% 可以正常工作，但是一旦您使用视口的宽度，40% 就会变小。

```
#square {
background-color:#000;
height:200px;
width:200px;
margin:auto;
}
#mask {
background-color:#000;
height:100%;
width:40%;
position:absolute;
left:0;
top:0;
} 
```

我需要#mask的宽度是从视口左侧到#square左侧的确切大小。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:29:23.767

不确定小提琴是否不喜欢我的`window.outerWidth`台词，但类似。

```
var sizingMaskDiv = function () {
    var squareWidth = $('#square').width(),
        maskWidth = (window.outerWidth - squareWidth) / 2,
        finalWidth = maskWidth - squareWidth;

        $('#mask').css('width', finalWidth + "px");
}
// Sets initial width
sizingMaskDiv();

$(window).resize(function() {
 //on window resize, run function (can get slow)
 sizingMaskDiv();
}); 
```

[http://jsfiddle.net/jA3JU/17/](http://jsfiddle.net/jA3JU/17/)

​</p>

# iphone - 从 UIViewController 切换到 TabBarController

> ID：13830640
> 
> 赞同：-1
> 
> 时间：2012-12-12T00:05:46.900
> 
> 标签：iphone, ios, uiviewcontroller, uitabbarcontroller, switch-statement

> **可能重复：**
> [从 UIViewController 切换到 UITabBarController](https://stackoverflow.com/questions/13830375/switching-from-uiviewcontroller-to-uitabbarcontroller)

我试图在 UITabBarController 之前显示一个 UIViewController 2 秒，我知道我必须从我的 appdelegate 中制作它。我试过首先将我的 self.window.rootviewcontroller 分配给我的 UIViewController，并在 2 秒后使用预定的计时器将我的 self.window.rootviewcontroller 重新分配给我的 UITabViewController。

问题是当我测试它时，我的视图控制器出现了，但在 2 秒后应用程序崩溃了。

这是我的 LaMetro_88AppDelegate.h

```
@interface LaMetro_88AppDelegate : NSObject <UIApplicationDelegate, UITabBarControllerDelegate>
{
    UIView *startupView;
    NSTimer *timer;

    UIViewController *LoadingViewController;
    UITabBarController *tabBarController;
}

-(void)changeView;
@property (nonatomic, retain) IBOutlet UIWindow *window;

@property (nonatomic, retain) IBOutlet UITabBarController *tabBarController;
@property (nonatomic, retain) IBOutlet UIViewController *LoadingViewController;

@end 
```

这是我的 LaMetro_88AppDelegate.m

```
@implementation LaMetro_88AppDelegate

@synthesize window = _window;
@synthesize tabBarController = _tabBarController;
@synthesize LoadingViewController = _LoadingViewController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
     self.window.rootViewController = self.LoadingViewController;

    timer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(changeView:) userInfo:nil repeats:NO];

    [self.window makeKeyAndVisible];
    return YES;
}

-(void)changeView
{

    self.window.rootViewController = self.tabBarController;  

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T00:08:40.927

因为该`changeView`方法不带参数，所以它的方法签名不包含冒号。将选择器更改为`changeView`不带冒号：

```
@selector(changeView) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T00:09:43.077

改变这个：

```
timer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(changeView:) userInfo:nil repeats:NO]; 
```

对此：

```
timer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(changeView) userInfo:nil repeats:NO]; 
```

# memory - 如何以编程方式判断 Linux 处于 PAE 模式还是非 PAE 模式？

> ID：13830641
> 
> 赞同：5
> 
> 时间：2012-12-12T00:06:16.013
> 
> 标签：memory, memory-management, linux-kernel, kernel, cpu-architecture

需要创建一个脚本来检查内核是否处于 PAE 模式。当然，仅仅检查 /proc/cpuinfo 标志是否有这个 'pae' 设置是不够的。

我们必须知道，PAE 机制是否实际上不仅已经实施，而且还被激活。

因为 PAE 内核现在是新的默认内核，如果你需要一个非 PAE 内核，现在必须制作另一个内核。

1.  换句话说，我们如何判断内核是否在具有 PAE 的 CPU 上是非 PAE（这是要测试的两个可能条件之一）。

2.  其他是，如何判断内核是否在没有 PAE 支持的 CPU 上是 PAE。

并且无法判断在典型的安全内核中是否使用了 CONFIG_HIGHMEM 或 CONFIG_PAE 内核配置选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T03:52:05.137

通常，可以在 /boot/config-* 中找到 CONFIG_PAE，如下所示：

```
$ cat /boot/config-$(uname -r) | grep PAE
  CONFIG_X86_PAE=y 
```

您无权访问该文件吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:47:33.210

One way is to read the CR4 register and look at bit 5\. It will be 1 for PAE and 0 for no PAE. You can read that register in some code running in the kernel (e.g. a kernel driver). You may be able to write a tiny driver for this purpose. It shouldn't be very complicated.

# sql - 关键字“LEFT”附近的语法不正确

> ID：13830642
> 
> 赞同：6
> 
> 时间：2012-12-12T00:06:15.277
> 
> 标签：sql, database, sql-server-2008

追逐我的尾巴试图弄清楚这一点，谷歌搜索它只会导致更复杂的例子。

我已经加入了两个表，可以正常加入。教授要求我们列出订单表中发货日期为 NULL 的行，或者用练习的话来说，“尚未发货的订单”。

加入工作正常，直到我添加 IS NULL 行，然后我得到错误： **Msg 156, Level 15, State 1, Line 13 关键字'LEFT'附近的语法不正确。**

我已经用 20 种不同的方式编写了这本书，并花了一个下午在谷歌上搜索它，但无法摆脱错误。我知道这会很简单，但是...

```
SELECT
    customers.customer_id,
    customers.name,
    customers.phone,
    orders.order_id,
    orders.order_date,
    orders.shipped_date
FROM
    orders
WHERE
    orders.shipped_date IS NULL
LEFT OUTER JOIN customers ON customers.customer_id=orders.customer_id 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-12T00:08:49.083

有一个如何编写查询的定义顺序

```
select
from
join
where
group by
having
order by 
```

您不能混合该顺序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T00:06:55.717

`LEFT JOIN`应该在`WHERE`从句之前。

```
SELECT  customers.customer_id,
        customers.name,
        customers.phone,
        orders.order_id,
        orders.order_date,
        orders.shipped_date
FROM    orders 
        LEFT OUTER JOIN customers 
            ON customers.customer_id=orders.customer_id
WHERE   orders.shipped_date IS NULL 
```

有关联接的更多信息，请参阅

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T00:13:03.253

为了澄清 LEFT JOIN，“LEFT”侧的每条记录（来自源），无论右侧的匹配项（连接到）

所以，如果你要交换，例如，给我所有的客户，不管有没有订单，你会做类似的事情

```
Select
      C.Customer_ID,
      C.Name,
      C.Phone,
      O.Order_Date
   from
      Customers C
         LEFT JOIN Orders O
            on C.Customer_ID = O.Customer_ID 
```

将显示所有客户，如果存在订单，也会显示该日期。

您要查找的只是所有尚未发货的订单以及订单的对象的列表。这将是一个standers INNER JOIN，因为您期望双方都存在匹配。

```
Select
      C.Customer_ID,
      C.Name,
      C.Phone,
      O.Order_Date
   from 
      Orders O
         INNER JOIN Customers C
            on O.Customer_ID = C.Customer_ID
   where
      O.Shipped_Date IS NULL 
```

因此，本例中的 WHERE 子句显式位于主“FROM”表源“Orders”（别名为“O”）上。而且你只想要那些没有发货的，因此只关心 O.Shipped_Date 是 NULL

# javascript - 如何使用 javascript 从提交表单中获取信息？

> ID：13830647
> 
> 赞同：1
> 
> 时间：2012-12-12T00:06:21.657
> 
> 标签：javascript, html, xhtml, form-submit

我有一个表格

```
<form name="loginForm" method="POST">
    Username: <input type="text" name="username" value="" />
    <br />
    Password: <input type="password" name="password" value="" />
    <input type="submit" name="submitButton" />
</form> 
```

点击提交按钮后如何获取上述信息，并对所述数据进行处理？如，

```
<script>
    function checkLogin(){
    //some code here
    }
</scipt> 
```

我真的很想知道如何使用 SUBMIT 按钮，而不仅仅是 onClick。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T00:15:02.267

使用 onSubmit 事件：

HTML：

```
<form name="loginForm" method="POST" onsubmit="checkLogin()">
    Username: <input type="text" name="username" value="" />
    <br />
    Password: <input type="password" name="password" value="" />
    <input type="submit" name="submitButton" />
</form> 
```

脚本：

```
function checkLogin(){
    //  If you return "false" it will stop the form from being submitted
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T00:08:41.747

您可以为您的表单指定一个 onsubmit 函数。

```
<form name="loginForm" method="POST" onsubmit="checkLogin()"> 
```

然后在你的函数中，类似：

```
function checkLogin() {
    var username = document.forms["loginForm"]["username"];
    // validate the form. Return false and the form will not be posted to server.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T00:11:21.160

您将通过以下方式使用 $.post {

```
 $.post(URL_TO_YOUR_SCRIPT, { username: $("#username").val(), 
    password: $("#password).val() },
    function(data) {
             alert(data);
    }); 
```

要实现这一点，您必须为您的输入框提供 ID，例如

```
<input type="text" name="username" id="username" />
<input type="password" name="password" id="password" /> 
```

干杯!

# javascript - Plupload 同时上传

> ID：13830649
> 
> 赞同：3
> 
> 时间：2012-12-12T00:06:38.083
> 
> 标签：javascript, plupload

我通过通用处理程序将 plupload 与 Asp.Net 一起使用。我有一个完全自定义的界面，所以我只是绑定 javascript。我已将其编码为自动启动，但文件一次上传一个。有没有办法让文件并行上传？我为所有内容分配了唯一的文件名，所以这不是问题。

```
 var uploader = new plupload.Uploader({
        runtimes: 'gears,html5,flash,silverlight,browserplus',
        browse_button: 'select-from-folder',
        container: 'uploader',
        drop_element: 'uploader-drop-element',
        max_file_size: '2000mb',
        chunk_size: '1mb',
        unique_names: true,
        url: '/myuploader.ashx?globalId=' + globalId,
        flash_swf_url: '/scripts/plupload/plupload.flash.swf',
        silverlight_xap_url: '/scripts/plupload/plupload.silverlight.xap',
        filters: [
            {
                title: "Application Supported",
                extensions: "jpg,gif,png,pdf,mp4,flv,avi,wmv"
            }
        ]
    });

    uploader.init();

    uploader.bind('Init', function (up, params) { 
        // removed for brevity
    });

    uploader.bind('FilesAdded', function (up, files) {
        for (var i in files) {
            // removed for brevity
        }

        uploader.start(); // auto-start the uploader
    });

    uploader.bind('UploadProgress', function (up, file) {
        // removed for brevity
    });

    uploader.bind('FileUploaded', function (up, file, resp) {
        if (uploader.total.uploaded >= uploader.files.length) {
            // removed for brevity
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T01:54:22.150

阅读完文档后，在我看来，目前不支持并行上传，尽管您可能可以修改[源代码](https://github.com/moxiecode/plupload/blob/master/src/plupload.js)以使用一些[网络工作者](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers)来执行此操作。

实际的上传发生在`uploadNext()`函数中（[第 897 行](https://github.com/moxiecode/plupload/blob/master/js/plupload.dev.js#L897)）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-09-19T13:30:14.883

您应该为需要进行的每个并行传输创建一个新的 plupload 实例。将这些实例包装在类似于 pluploads 的类中并以适当的方式绑定设置和事件是必不可少的。您还需要实现`handleFilesAdded`将新文件分发到集群的自定义方法。

有一个创建 plupload 实例集群并制作并行帖子的项目。您可以查看：[https ://github.com/bennadel/Plupload-Cluster](https://github.com/bennadel/Plupload-Cluster)

# c++ - boost::any number cast

> ID：13830651
> 
> 赞同：0
> 
> 时间：2012-12-12T00:07:07.137
> 
> 标签：c++, boost, boost-any

我把正的'int'放在我的任何变量上。然后我试图将它转换为'unsigned long'。我有一个关于糟糕的演员阵容的例外。我如何可以更灵活地使用 'boost::any_cast' 来考虑整数数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T00:13:08.437

将其提取到一个临时变量中，然后将其转换为您想要的整数类型。

# objective-c - 无法将自定义链接添加到 OHAttributeLabel

> ID：13830663
> 
> 赞同：1
> 
> 时间：2012-12-12T00:08:04.270
> 
> 标签：objective-c, xcode, hyperlink, uilabel

我正在使用 OHAttributeLabel 将自定义链接添加到我的标签文本。我正在使用的代码粘贴在下面。它曾经与旧版本的 OHAttributed 标签 (2010) 一起使用，但是对于新版本（最近更新），我标签中的文本不再作为链接可点击。

谁能告诉我这里缺少什么？

```
// Set Question Label
Question *question = self._answerForCell.question;
NSString *questionText = [NSString stringWithFormat:@"Q: %@", question.text];
CustomOHAttributLabel *thisQuestionLabel = (CustomOHAttributLabel *)[self.contentView viewWithTag:QUESTIONLABEL_TAG];

//Set up dictionary for question
NSString *questionStr = [question.text stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];

NSString *urlForQn = [NSString stringWithFormat:@"dailythingsfm://redirect_to/questions/%@/answers?text=%@&nickname=%@&question_id=%@&question_curious=%i&showEveryOneTab=%i", question.slug, questionStr, [[UserInfo sharedUserInfo] getNickname], question.qid, question.curious, 1];
NSString *qnStartIndex = @"0";
NSString *qnLength = [NSString stringWithFormat:@"%i", [questionText length]];

NSDictionary *qnDict = [NSDictionary dictionaryWithObjectsAndKeys:qnStartIndex, @"start", qnLength, @"length", urlForQn, @"url", nil];
NSArray *array = [NSArray arrayWithObject:qnDict];
[thisQuestionLabel setLabelwithText:questionText fontSize:QUESTION_FONT_SIZE andSubStringToURLArrayViaRange:array withHexColor:@"#555555"];

//Method to set the text in UILabel to a custom link
- (void)setLabelwithText:(NSString *)text fontSize:(CGFloat)fontSize andSubStringToURLArrayViaRange:(NSArray *)array withHexColor:(NSString *)textColor
{
    NSMutableAttributedString *attrStr = [NSMutableAttributedString attributedStringWithString:text];
    [attrStr setFont:[UIFont systemFontOfSize:fontSize]];
    [attrStr setTextColor:[UIColor grayColor]];
    [self removeAllCustomLinks];

    for (NSDictionary *dict in array) {
        NSString *start = [dict objectForKey:@"start"];
        NSString *length = [dict objectForKey:@"length"];
        NSString *url = [dict objectForKey:@"url"];

        NSUInteger startIndex = [start intValue];
        NSUInteger len = [length intValue];

        NSRange range = NSMakeRange(startIndex, len);

        [attrStr setFont:[UIFont boldSystemFontOfSize:fontSize] range:range];
        [attrStr setTextColor:[UIColor colorWithHexString:textColor] range:range];
        [self addCustomLink:[NSURL URLWithString:url] inRange:range];
    }

    self.attributedText = attrStr;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T06:42:14.487

对于最新的 OHAttribute 库（3.2.1），我必须使用“setLink”方法而不是 addCustomLink

# ember.js - 使用 EmberJS 保存选择菜单的状态

> ID：13830664
> 
> 赞同：0
> 
> 时间：2012-12-12T00:08:10.623
> 
> 标签：ember.js

给定路线，EmberJS 是否可以检索选择框（AKA 下拉菜单）的状态？

这将是我的用户故事，它相当简单：

用户想要通过位于顶部的选择菜单过滤项目列表。选择一个项目后，列表会自动过滤。过滤器的状态保存在 URL 中，使用户能够检索选择。

```
URL: http://example.com/#/2   -> where 2 corresponds to an item in the filter

------------------------------
| Select an item         \/  |
------------------------------

* Item 1
* Item 2
* Item 3 
```

这将是我的选择视图：

```
App.CitySelectView = Ember.Select.extend({
    contentBinding: "App.cityController.cities",
    optionLabelPath: "content.name",
    optionValuePath: "content.uid",
    selectionBinding: "App.cityController.selected"
}); 
```

模板看起来像这样。

```
{{view App.StateSelectView id="form-select-state" prompt="Select an item"}} 
```

我需要一个路由器，但我不知道如何编写它。例如，我缺少的是在选择视图上编写 {action} 的能力，这应该在“更改”时触发。

你能帮我吗？

附言。我的管道中有这个链接与路由相关[https://gist.github.com/2728699](https://gist.github.com/2728699)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:56:14.213

处理此问题的一种简单方法是观察控制器中的选定值，然后使用发送事件将更改的值传递给路由器。在路由器中，您可以调用 transitionTo 来更改 url 并执行过滤。

在 App.CityController 中：

```
selectedChanged: function() {
    App.router.send('filterDropDown', this.get('selected'));
}.observes('selected') 
```

在 App.Router 中，定义的发送给路由器的事件被调用：

```
filterDropDown: function(router, context) {
    router.transitionTo('filter', context.uid);  //pass the uid as url param
} 
```

在 enter 事件中定义路由并处理过滤：

```
filter: Em.Route.extend({
    router: '/:selected',
    enter: function(router, context) {
        // Handle filtering here, with selected uid as context.selected
    }
}) 
```

您可能需要弄乱序列化和反序列化以使其适用于您的情况。

# c# - 子控件可以使用父控件的数据源吗？

> ID：13830676
> 
> 赞同：4
> 
> 时间：2012-12-12T00:08:48.693
> 
> 标签：c#, asp.net, drop-down-menu

我有以下标记：

```
<div class="section">
    <p runat="server" id="sectionName"></p>
</div>
<div class="label">
    <div class="activity-header">Activity</div>
    <div class="status-header">Status</div>
    <div class="comment-header">Comment</div>
</div>
<asp:Repeater ID="rptActivity" runat="server">
    <ItemTemplate>
        <div class="under-label">
            <div class="activity">
                <%#Eval("ActivityName")%>
                <input type="hidden" name="activityId" value='<%#Eval("ActivityId")%>' />
            </div>

            <div class="status">
                <asp:DropDownList ID="ddlStatuses" DataValueField="Id" DataTextField="Name" DataSourceID="SqlDataSource1" runat="server"></asp:DropDownList>
            </div>
            <div class="comment">
                <textarea name="comments" cols="35" rows="3" name="comment" style="float: left; margin: 0px 0px 0px 25px; font-family: Geneva, Arial, Helvetica, sans-serif;"><%#Eval("Comment")%></textarea>
            </div>
        </div>
    </ItemTemplate>
</asp:Repeater>
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:PhumafConnectionString %>" SelectCommand="SELECT * FROM [Status]">
</asp:SqlDataSource> 
```

rptActivityRepeater的数据源是List，Helper定义如下：

```
public class Helper
{
    public string ActivityName { get; set; }
    public long ActivityId { get; set; }
    public long StatusId { get; set; }
    public string Comment { get; set; }
} 
```

如您所见，我将相关字段绑定到实体的属性，并将所有 ddlStatuse 绑定到返回所有状态的数据源。但是，由于这是一个更新屏幕，我希望选择先前选择的状态，并且我通过 Helper 实体的道具 StatusId 获得了该 ID。

尝试将 ddlStatuses 的 SelectedValue 设置为，`<%# Eval("StatusId") %>`但它引发了一个异常，我只能从控件绑定到的数据源调用道具。

基本上我有我需要在 ddlStatuses 中选择它们的 StatusIds。

我怎样才能做到这一点？

编辑：

我忘了提到我想到的解决方案之一是`List<Status>`在帮助程序类中包含一个属性，这样我将拥有 statusId 以及所有其他状态，但是如果我不能使用它就行不通父母的数据源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T00:15:20.873

我会使用 ItemCreated 事件[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemcreated.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemcreated.aspx)

# ruby - Cucumber/Capybara：是否可以在同一命令上混合 xpath 和 css？

> ID：13830677
> 
> 赞同：1
> 
> 时间：2012-12-12T00:08:49.380
> 
> 标签：ruby, cucumber, capybara

我有一个看起来像这样的 xpath 表达式：

```
find(:xpath, "//div[@id='drawer-1' and @class='drawer']/h2/a[@class='drawer-toggle']") 
```

我想知道，是否有可能以某种方式将其与 css 混合以读取这样的内容？

```
find("div#drawer-1.drawer/h2/a.drawer-toggle") 
```

或者，如果这不可能，是否有另一种方法可以使用 css 导航 DOM？

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T03:23:05.463

您不能将 xpath 与 css 混合使用。但是，在您的示例中，可以将 xpath 转换为 css。

你应该能够做到：

```
find("div#drawer-1.drawer > h2 > a.drawer-toggle") 
```

请注意，“/”更改为“>”。Xpath 使用“/”作为子选择器，而 css 使用“>”。

几个有用的链接：

*   [子选择器](http://www.w3.org/TR/CSS2/selector.html#child-selectors)
*   [将 xpath 与 css 定位器进行比较](http://www.natontesting.com/2011/09/24/css-locator-referencecheat-sheet-for-xpath-people/)的备忘单

# html - PHPStorm html代码中的未知背景样式？

> ID：13830680
> 
> 赞同：6
> 
> 时间：2012-12-12T00:08:55.223
> 
> 标签：html, phpstorm

我是新手`PHPStorm`。对于 PHP 开发人员来说，这是一款很棒的软件。我在 PHPStorm HTML 智能编码上有一个小问题。当我键入 html 代码时，html 代码显示为`background gray color`. 我不喜欢背景灰色。

所以，我想删除这个背景颜色。有可能吗？

请帮我。

![在此处输入图像描述](../Images/575c7d2d822cbbdef17e8d7394a6efd1.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T00:20:15.953

禁用|中的`Tag name` **背景**选项 | | , :`File``Settings``Editor``Colors & Fonts``HTML`

![标签背景](../Images/fca6f8948f64edb3a4f9b3f3916cf4fc.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-06T16:02:47.663

`File`我在|中禁用了背景 `Settings`| `Editor`| `Colors & Fonts`| `Language Defaults`|`Markup Tag`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T00:13:39.217

我能够按照这个网站帮助链接[http://phpstorm-themes.com/为我的 PhPStorm 副本设置主题](http://phpstorm-themes.com/)

（在 Mac 上）首选项 -> 编辑器 -> 颜色和字体 -> PHP

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T00:14:11.003

该文档显示了如何编辑：

[编辑外观](http://www.jetbrains.com/phpstorm/webhelp/editor-appearance.html)

您还可以有主题：

[Phpstorm 主题](http://phpstorm-themes.com/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-31T11:10:04.047

同样的问题，但我在给定的解决方案中找不到它。

但我确实在这里找到了它：

首选项/编辑器/颜色和字体/常规/注入的语言片段

禁用那里的背景

# directory - 在 Google 云端硬盘的文件夹中搜索

> ID：13830681
> 
> 赞同：2
> 
> 时间：2012-12-12T00:09:09.267
> 
> 标签：directory, google-drive-api

是否可以使用 gdrive developer sdk 在 google drive 文件夹中进行搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:40:12.880

是的，完全有可能！

使用[drive.files.list](https://developers.google.com/drive/v2/reference/files/list)列出文件时，您可以提供[搜索查询参数](https://developers.google.com/drive/search-parameters)。像这样的查询：

```
'MYFOLDERID' in parents 
```

将在 ID 的文件夹中搜索文件`MYFOLDERID`。在链接的文档中有更多关于其他查询参数和一般搜索的详细信息。

# c# - 如何在树视图中设置不同的样式控制级别 1 和 2？

> ID：13830682
> 
> 赞同：2
> 
> 时间：2012-12-12T00:09:14.123
> 
> 标签：c#, wpf, treeview, styles, hierarchicaldatatemplate

我现在正在使用 TreeView。如您所见`CurrentMediumObjectives`， 和 `ChildrenObjective`是相同的对象类型，称为`Objective`.

此类有一个名为 的属性`Level`，其中 in`ChildrenObjective`设置为 1 并`ChildrenObjective`设置为 2。

我想`DataTemplate`根据`Level`.

```
 <TreeView ItemsSource="{Binding CurrentMediumObjectives}"
        Margin="0,40,0,0">     
        <TreeView.ItemTemplate>
            <HierarchicalDataTemplate ItemsSource="{Binding ChildrenObjective}">
                <TextBlock FontWeight="Bold">
                    <Run Text="Objective " />
                    <Run Text="{Binding Level}" />
                </TextBlock>
            </HierarchicalDataTemplate>
        </TreeView.ItemTemplate>
    </TreeView> 
```

我对是否应该使用 DataTemplateSelector 或 DataTrigger 感到困惑。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T00:19:38.293

也许您可以只使用 a`Trigger`来显示每个模板。

像这样的东西，也许：

```
<TreeView ItemsSource="{Binding CurrentMediumObjectives}" Margin="0,40,0,0">
            <TreeView.ItemTemplate>
                <HierarchicalDataTemplate ItemsSource="{Binding ChildrenObjective}">
                    <Grid>
                        <!--Data template for level 1-->
                        <TextBlock x:Name="level1" FontWeight="Bold">
                            <Run Text="Objective " />
                            <Run Text="{Binding Level}" />
                        </TextBlock>

                        <!--Data template for level 2-->
                        <TextBlock x:Name="level2" FontWeight="Bold" Foreground="Red">
                            <Run Text="Objective " />
                            <Run Text="{Binding Level}" />
                        </TextBlock>
                   </Grid>

                    <HierarchicalDataTemplate.Triggers>
                        <DataTrigger Binding="{Binding Level}" Value="1">
                            <Setter TargetName="level1" Property="Visibility" Value="Visible" />
                            <Setter TargetName="level2" Property="Visibility" Value="Collapsed" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Level}" Value="2">
                            <Setter TargetName="level2" Property="Visibility" Value="Visible" />
                            <Setter TargetName="level1" Property="Visibility" Value="Collapsed" />
                        </DataTrigger>
                    </HierarchicalDataTemplate.Triggers>
                </HierarchicalDataTemplate>
            </TreeView.ItemTemplate>
        </TreeView> 
```

型号（猜）

```
public class Objective 
{
    public int Level { get; set; }
}

public class CurrentMediumObjectives : Objective
{
    public ObservableCollection<ChildrenObjective> ChildrenObjective { get; set; }
}

public class ChildrenObjective : Objective
{
} 
```

结果： ![在此处输入图像描述](../Images/082defb4b48bab6cefce8509a56f2fa3.png)

# java - 在关闭 JFrame 之前我将如何执行一个函数

> ID：13830683
> 
> 赞同：2
> 
> 时间：2012-12-12T00:09:28.330
> 
> 标签：java, swing, jframe, awt, windowlistener

> **可能重复：**
> [在应用程序关闭时调用方法](https://stackoverflow.com/questions/13800621/call-a-method-when-application-closes)

我想在使用 setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 关闭我的 java 应用程序之前调用一个方法；我已经用 windowClosed/windowsClosing 尝试了 WindowListener，但它不起作用。它看起来像这样

```
public class exampleFrame JFrame implements{

public exampleFrame (){
    this.addWindowListener(new windowAction());
setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
}

class windowAction implements WindowListener{

        @Override
        public void windowActivated(WindowEvent e) {
            // TODO Auto-generated method stub

        }

        @Override
        public void windowClosed(WindowEvent e) {
        System.out.prinln("window closed")

        }

        @Override
        public void windowClosing(WindowEvent e) {
            // TODO Auto-generated method stub
            System.out.prinln("window closing")
        }

        @Override
        public void windowDeactivated(WindowEvent e) {
            // TODO Auto-generated method stub

        }

        @Override
        public void windowDeiconified(WindowEvent e) {
            // TODO Auto-generated method stub

        }

        @Override
        public void windowIconified(WindowEvent e) {
            // TODO Auto-generated method stub

        }

        @Override
        public void windowOpened(WindowEvent e) {
            // TODO Auto-generated method stub

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-12T00:46:19.883

我认为你想要的是这样的：

```
public class ExampleFrame extends JFrame{
   public ExampleFrame(){

      // you can use WindowAdapter and implement only the methods you need
      addWindowListner(new WindowAdapter(){

           @Override
           public void windowClosing(WindowEvent et) {
               System.out.println("Window closing");
           }
      }
      setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
} 
```

# android-layout - 单击按钮时创建一个弹出窗口android

> ID：13830691
> 
> 赞同：1
> 
> 时间：2012-12-12T00:09:55.077
> 
> 标签：android-layout

我已经创建了一个按钮并在其上设置了 onClicklistener，但我无法让它打开一个弹出窗口。我已经编写了它的 xml 和 java 代码，如下所示。当我单击它时，它会单击但不执行任何操作。

弹出窗口的 xml 代码

```
 <?xml version="1.0" encoding="UTF-8"?>
    <LinearLayout xmlns:android = "http://schemas.android.com/apk/res/android"
android:layout_width = "wrap_content"
android:layout_height = "wrap_content"
android:id = "@+id/popup"
android:orientation = "vertical">

<TextView 
    android:id = "@+id/popUpTitle"
    android:layout_width = "wrap_content"
    android:layout_height = "wrap_content"
    android:text = "@string/popup" />

<TextView 
    android:id = "@+id/popUpContent"
    android:layout_width = "wrap_content"
    android:layout_height = "wrap_content"
    android:text = "@string/popcontent"
    android:layout_marginBottom="47dp" />

<Button
    android:id="@+id/popUpButtonClose"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/close" /> 
```

单击时创建弹出窗口的按钮的java代码

```
 public void onClick(View arg0) {
    // TODO Auto-generated method stub
    switch(arg0.getId())
    {
        case R.id.buttonCreate:
            Intent i = new Intent(CreateQuestions.this, UploadQuestions.class);
            startActivity(i);
            break;

        case R.id.buttonStartQuiz:
            if (p2 != null)
            {
                showPopup(CreateQuestions.this, p2);
            }

} 
```

创建弹窗的方法

```
 //method that displays the pop up
}
private void showPopup(final CreateQuestions createQuestions1, Point p2) {
    // TODO Auto-generated method stub
    int popupWidth = 200;
    int popupHeight = 150;

    LinearLayout viewGroup = (LinearLayout) createQuestions1.findViewById (R.id.popup);
    LayoutInflater layoutInflater  = (LayoutInflater) createQuestions1.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View layout = layoutInflater.inflate(R.layout.popup, viewGroup);

    //method to create the popup
    final PopupWindow popupWindow = new PopupWindow(createQuestions1);
    popupWindow.setContentView(layout);
    popupWindow.setWidth(popupWidth);
    popupWindow.setHeight(popupHeight);
    popupWindow.setFocusable(true);

    //some offseta to align the pop up  relative to the button's positions
    int OFFSET_X = 30;
    int OFFSET_Y = 30;

    //clear the default background
    popupWindow.setBackgroundDrawable(new BitmapDrawable());

    //displaying the pop up at the specified location and offsets
    popupWindow.showAtLocation(layout, Gravity.NO_GRAVITY, p2.x + OFFSET_X, p2.y + OFFSET_Y);

    //getting the reference to Close button and close the popup when clicked.
    close = (Button) layout.findViewById(R.id.popUpButtonClose);
    close.setOnClickListener(new OnClickListener(){

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            popupWindow.dismiss();
        }

    });

    } 
```

任何指导帮助和提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T04:00:40.820

嗯。. . . 看起来您没有为按钮放置 clickListener。

您是否将此代码放在 onCreate 上？

```
buttonStartQuiz.setOnClickListener(this); 
```

**或者**

在下面的代码之前还要检查**p2的值**

```
if (p2 != null) 
```

似乎您没有初始化变量。所以请检查一下。

如果没有那就放上来看看。如果仍然无法解决您的问题，请告诉我。

# html - 使侧边栏随内容扩展

> ID：13830696
> 
> 赞同：1
> 
> 时间：2012-12-12T00:10:29.397
> 
> 标签：html, extend, sidebar, two-columns

我知道有一种称为 Faux Columns 的方法可以解决此类问题，但是您如何获得作为侧栏（我的导航栏）的 div 以使用不同包装 div 中的内容进行扩展？人造列的工作方式是在主 div 中有两个 div，然后将背景放在主 div 中。但是，我的问题是其中一个 div 实际上在主 div 之外，它必须像我的页面结构那样工作。有没有其他方法或方法可以用我的其他 div 的内容量来扩展这个 div（分隔）？

# ember.js - 何时使用哪种控制器类型？

> ID：13830699
> 
> 赞同：8
> 
> 时间：2012-12-12T00:10:52.300
> 
> 标签：ember.js

我似乎对出现的东西越来越感到困惑，至少从表面上看，这是关于构建 ember 应用程序的非常基本的架构问题。

## 哪种控制器类型？

在过去一个月左右的时间里，我看到人们通过 Ember.Controller、Ember.ArrayController、Ember.ObjectController 和 Ember.ArrayProxy 实现控制器。移除 ArrayController 和 ArrayProxy（因为它们是相同的），每种类型之间的常见用例是什么？

到目前为止，我已经能够收集到：

*   当您打算控制的视图中有*n 个*元素时，应使用 ArrayControllers/Proxies
*   当视图足够简单以在单个对象中维护其状态或者是模型对象的单个实例时，应该使用 ObjectControllers。
*   控制器——？不知道。

控制器类型之间有哪些基本区别？似乎没有关于何时使用哪个以及用于哪个用例的具体信息。API 文档擅长告诉我它们每个的细节，但不告诉我何时使用它们。

## View 和 Controller 之间的关系可能令人费解

当视图通过路由 ConnectOutlets 函数调用连接时，控制器和视图之间究竟发生了什么？

事件是否与视图本身相关联（似乎是这种情况），如果是这样，您到底在哪里与控制器单例交互以对其属性执行 CRUD-esq 操作？this.get('controllerName') 似乎没有奏效，几乎每篇文章、教程或代码示例都以不同的方式做到这一点。

## 没有的型号

我意识到 Ember Data 看起来有助于解决处理数据并保持同步的一些更烦人的部分，但从更大的角度来看，在“MVC”的概念中，ember 似乎并没有真正的模型任何一种。它只是一些对象，它从特定事物中获得子类，然后被跟踪....某处？不知何故？神奇？

@trek 足以让 Ember.Object 管理 ajax'ing 数据和处理客户端上的状态就好了，但如果你看一下 todomvc.com ember 应用程序之类的东西，它使用的 localStorage 范式在实现上完全不同，那么一切我看过了。

MVC 方程的“模型”部分应该如何在此处完成？

## 观点让我想谋杀孩子

在向用户显示标记方面，似乎有很多方法可以构建“视图”。

*   ContainerViews，使用子视图/子视图
*   嵌套插座
*   车把模板 + 插座
*   在控制器中使用#each foo
*   通过文字（`template: Ember.Handlebars.compile('<h1>foo</h1>')`等）注入

考虑到这一点，使用 ember 构建模块化 UI 组件的“正确”方法是什么？这对我来说是采用这个框架的主要痛点。

我喜欢 Ember 在 Web 上进行应用程序开发的方向。这些概念看起来很简单，但冗长的是Objective-C（考虑到它的血统，这是有道理的），但我向上帝发誓，我觉得我正在与该死的框架作斗争，而不是我实际在我的应用程序上工作。语法的冗长和 API 文档之外的结构化文档的缺乏（让我们面对现实吧，300k 的 javascript 是大量的代码来抛出一些断点并尝试调试您的问题）。

我意识到你们面临的挑战，但希望这至少能让你停下来思考一下如何让那些使用其他框架（或者地狱，甚至在 MVC 框架中工作）的新开发人员的生活更轻松，如 rails 或 django 或骨干或 angular）并说“这就是我们认为应该使用 ember 的方式”。

做出一些固执己见的软件设计决策并将其应用于社区。如果你这样做，我们只会为你做拉拉队队长，保证。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T05:28:13.573

请不要伤害任何孩子。AFAIK ember-core 团队都超过 18 岁，因此任何与 ember-view 相关的挫败感显然更适合成年人。考虑到这一点...

**哪种控制器类型？**

你有正确的“什么”，但可能错过了“为什么”。控制器可能有点误导，尤其是来自导轨。将这些控制器单例视为代表应用程序的状态（内存中）。

使用哪种控制器取决于应用程序的该部分需要什么。例如，任何应用程序的餐巾纸草图都可能包含 topnav、postList、postDetails 部分。在 ember 中，每个都由一个或多个视图/控制器对表示。在这个应用程序中，我希望看到 ApplicationController 和 NavigationController 扩展 Ember.Controler，而 postList 将扩展 ArrayController 而 PostDetails 将是一个 ObjectController。

你可以只使用 Ember.Controller 来完成这一切，但 ObjectController 和 ArrayController 对于包装模型数据非常有用。任何重要的 ember 应用程序都可能会使用所有这三个。

**View 和 Controller 的关系**

控制器的工作是提供将呈现视图的*上下文。*理想情况下，您希望将逻辑排除在视图之外，因此典型的控制器将具有许多计算属性来执行以下操作：

*   从底层模型对象转换数据
*   排序/过滤/选择对象列表
*   反映应用程序状态

*与 connectOutlets 有什么关系？*这是您应该使用请求的路由/上下文来决定应将哪些视图/数据插入应用程序的出口的地方。控制器的 connectOutlet 方法有很多魔法让它变得简单，但也许魔法太多了。当你打电话时会发生什么（afaik）： parentcontroller.connectOutlet 'child' 是

*   Ember 创建 ChildView 的实例
*   parentController 视图中的 {{outlet}} 把手助手绑定到此 childView 实例
*   childView 使用 router.childController 单例作为其上下文呈现

*在哪里做粗鲁的东西？*: 通常在路由器上的一个动作中。起初这似乎很疯狂。想想 ember 路由器，它不像 rails，而是一个恰好也处理路由的 stateManager。在不久的将来，路由器 API 将更改以使这一点更加清晰。无论如何，使用路由器操作来执行诸如创建模型实例、提交/回滚事务和触发状态更改之类的事情。如果您使用把手 {{action}} 帮助器作为链接/按钮，这很容易做到，因为它默认以路由器为目标。

另一方面，视图应该具有“对浏览器事件做出反应”的逻辑——这意味着真正低级的东西，比如在鼠标悬停时显示/隐藏某些东西或与 3rd 方库集成以执行效果和动画。

您可能会发现此截屏视频有助于了解如何进行 CRUD-esq 操作： [http ://blog.bigbinary.com/2012/09/06/crud-application-in-emberjs.html](http://blog.bigbinary.com/2012/09/06/crud-application-in-emberjs.html)

**型号WTF？**

在 Ember 中同意任何对象都可以用作“模型”。我认为@trek 很好地展示了如何通过 Ember.Object 实现这一目标。这适用于一个简单的应用程序，六个月前可能是你最好的选择，因为 ember-data 真的不成熟。我不清楚 ember 的 todomvc 应用程序的历史，但可以肯定它是几个月前写的。当然应该更新它，但同时我不建议使用它来了解当前的 ember 最佳实践。

相反，您应该使用 ember-data。在过去的几个月里，它确实得到了发展，应该成为任何新的、非平凡的 ember 应用程序的默认选择。@tomdale 刚刚就这个话题做了一个很棒的介绍，我建议你看看：[https ://speakerdeck.com/tomdale/ember-data-internals](https://speakerdeck.com/tomdale/ember-data-internals)

**用 ember 构建模块化 UI 组件的“正确”方法是什么？**

用于构建模块化 UI 组件：

*   ContainerViews，使用子视图/子视图
*   通过文字注入（模板：Ember.Handlebars.compile ...）

对于构建单个应用程序：

*   嵌套插座
*   车把模板 + 插座
*   在控制器中使用#each foo

构建模块化 UI 组件与构建应用程序是完全不同的问题。Ember.View 及其子类就是为此目的而设计的。您可以轻松地扩展/组合它们以组成具有自定义行为的小部件，并在应用程序之间共享这些小部件。

至少我是这么看的。如果它们是供内部使用的，也可以引用把手模板而不是对象文字，但如果计划分发对象文字方法似乎是最好的。

ember-bootstrap 项目就是一个很好的真实例子。通过阅读该项目的源代码，我学到了很多关于使用 ember-views 的知识。[http://emberjs-addons.github.com/ember-bootstrap/](http://emberjs-addons.github.com/ember-bootstrap/)

**TLDR**

*   选择映射到所表示的数据类型的控制器
*   控制器为视图提供上下文并记住应用程序状态
*   为您的模型使用 ember 数据
*   使用 Ember.View 的子类制作组件
*   对孩子好

# asp.net - 如何以编程方式（通过数据绑定）切换 ASP.NET AJAX Telerik 组件的列可见性？

> ID：13830701
> 
> 赞同：4
> 
> 时间：2012-12-12T00:11:00.943
> 
> 标签：asp.net, asp.net-mvc, telerik, telerik-grid

我在表单和 RadGrid 组件上有几个复选框。我看到该组件有 Visible 属性，但我需要将其绑定到将切换列的可见性的复选框。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:55:29.293

Telerik 社区论坛的以下帖子包含指向如何从客户端和服务器端执行此操作的示例的链接。

[http://www.telerik.com/community/forums/aspnet-ajax/chart/how-can-i-hide-unhide-columns-in-rad-grid.aspx](http://www.telerik.com/community/forums/aspnet-ajax/chart/how-can-i-hide-unhide-columns-in-rad-grid.aspx)

来自同一站点的以下帖子包含非常简单直接的服务器端源代码示例。

[http://www.telerik.com/community/forums/aspnet-ajax/grid/how-to-hide-columns-in-radgrid.aspx](http://www.telerik.com/community/forums/aspnet-ajax/grid/how-to-hide-columns-in-radgrid.aspx)

# bash - 使用 awk 从文本文件中提取值

> ID：13830706
> 
> 赞同：1
> 
> 时间：2012-12-12T00:11:50.383
> 
> 标签：bash, unix, awk

我有 100 个文本文件，如下所示：

```
File title
4
Realization number
variable 2 name
variable 3 name
variable 4 name
1   3452  4538   325.5 
```

第 7 行 (1) 的第一个数字是实现编号，它应该与文件名相关。即第一个文件称为file1.txt，实现编号为1（如上所示）。第二个文件名为 file2.txt，第 7 行的实现编号为 2。file3.txt 应该在第 7 行具有实现编号 3，依此类推...

不幸的是，每个文件的实现=1，它们应该根据文件名递增。

我想从每个文件的第 7 行（3452、4538 和 325.5）中提取变量 2、3 和 4，并将它们附加到一个名为 summary.txt 的摘要文件中。

我知道如何从 1 个文件中提取信息：

```
awk 'NR==7,NR==7{print $2, $3, $4}' file1.txt 
```

其中，正确地给了我：

```
3452 4538 325.5 
```

我的第一个问题是，当从多个文件的 bash 脚本运行时，此命令似乎没有给出相同的结果。

```
#!/bin/bash    
for ((i=1;i<=100;i++));do
    awk 'NR=7,NR==7{print $2, $3, $4}' File$((i)).txt
done 
```

当我使用上述脚本时，我会在屏幕上打印多行。

其次，我想将这些值与正确的先前实现编号一起输出到摘要文件中。即我想要一个看起来像这样的文件：

```
1  3452  4538  325.5
2  4582  6853  158.2
...
100  4865 3589  15.15 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T00:28:02.577

您可以简化一些事情并获得您想要的结果：

```
#!/bin/bash    

for ((i=1;i<=100;i++))
do
    echo $i $(awk 'NR==7{print $2, $3, $4}' File$i.txt)
done 
```

您真的不想分配给 NR=7 （就像您所做的那样），您也不需要重复`NR==7,NR==7`。当足够时你也真的不需要`$((i))`符号。`$i`

如果所有文件的长度正好为 7 行，则可以在一个`awk`命令中完成所有操作（而不是 100 个）：

```
awk 'NR%7==0 { print ++i, $2, $3, $4}' Files*.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T00:27:55.840

请注意，您的 bash 脚本中只有一个`=`。所有文件都正好有 7 行吗？如果您只对第 7 行感兴趣，那么：

```
#!/bin/bash    
for ((i=1;i<=100;i++));do
    awk 'NR==7{print $2, $3, $4}' File$((i)).txt
done 
```

由于您的实现编号从 1 开始，您可以使用`nl`命令简单地添加它。

例如，如果您的 bash 脚本被调用，`s.sh`那么：

```
./s.sh | nl > summary.txt 
```

将为您提供包含预期行的结果`summary.txt`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T00:51:49.507

这是一种使用方法`awk`：

```
awk 'FNR==7 { print ++i, $2, $3, $4 > "summary.txt" }' $(ls -v file*) 
```

该`-v`标志只是按版本号对 glob 进行排序。如果您的版本`ls`不支持此标志，请尝试：`ls file* | sort -V`代替。

# orm - SQLAlchemy ORM 插入前钩子

> ID：13830708
> 
> 赞同：8
> 
> 时间：2012-12-12T00:12:08.013
> 
> 标签：orm, sqlalchemy

我试图弄清楚如何在从 ORM 插入一行之前编写一个钩子来查询数据库。我希望能达到类似的效果：

```
class Table(Base):
    id = Column(Integer, primary_key=True)
    value = Column(Integer, nullable=False)

    def before_insert_hook(self, session):
        """Some arbitrary queries and code.  For example:"""
        if self.value is None:
            self.value = session.query(func.avg(Table.value))\
                    .filter(Table.value > 100).scalar() 
```

我一直在阅读有关 ORM 事件等的 SQLAlchemy 文档，但我不知道如何使用它们来实现这一点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-06-12T23:06:23.047

看起来你想要[ORM 事件](http://docs.sqlalchemy.org/en/latest/orm/events.html)：

```
from sqlalchemy import event

class Table(Base):
    ...

@event.listens_for(Table, 'before_insert')
def do_stuff(mapper, connect, target):
    # target is an instance of Table
    target.value = ... 
```

# regex - 用或使用 ColdFusion 替换最后一个逗号

> ID：13830713
> 
> 赞同：6
> 
> 时间：2012-12-12T00:12:46.770
> 
> 标签：regex, coldfusion

在 ColdFusion 中转换值数组的最佳方法是什么

```
[ Fed Jones, John Smith, George King, Wilma Abby] 
```

以及最后一个逗号是 or 的列表

```
Fed Jones, John Smith, George King or Wilma Abby 
```

我认为 REReplace 可能有效，但还没有找到正确的表达方式。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-12T01:31:06.887

如果您有一个数组，则将最后一个元素与 ArrayToList 组合是最简单的方法（根据[亨利的回答](https://stackoverflow.com/questions/13830713/replace-last-comma-with-or-using-coldfusion/9360)）。

如果你把它作为一个字符串，使用 rereplace 是一个有效的方法，并且会像这样工作：

```
<cfset Names = rereplace( Names , ',(?=[^,]+$)' , ' or ' ) /> 
```

表示匹配一个逗号，然后检查（不匹配）直到字符串末尾没有更多的逗号（这当然只适用于最后一个逗号，因此它将被替换）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T00:22:57.823

在转换为列表之前，首先在数组级别进行操作会更容易。

```
names = ["Fed Jones", "John Smith", "George King", "Wilma Abby"];
lastIndex = arrayLen(names);
last = names[lastIndex];
arrayDeleteAt(names, lastIndex);
result = arrayToList(names, ", ") & " or " & last;  
// result == "Fed Jones, John Smith, George King or Wilma Abby" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T00:54:49.007

另一种选择是使用 listLast 和结果字符串的 JAVA [lastIndexOf()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#lastIndexOf%28java.lang.String%29)方法来处理列表/字符串。

```
<cfscript>
  names = ["Fed Jones", "John Smith", "George King", "Wilma Abby"];
  result = arraytoList(names,', ');
  last = listLast(result);
  result = listLen(result) gt 1 ? mid(result, 1, result.lastIndexOf(',')) & ' or' & last : result;
</cfscript>
<cfoutput>#result#</cfoutput> 
```

结果：

> 美联储琼斯、约翰史密斯、乔治金或威尔玛艾比

# c# - 如何通过单击按钮删除gridview和ms访问上的特定行

> ID：13830717
> 
> 赞同：1
> 
> 时间：2012-12-12T00:13:06.047
> 
> 标签：c#, ms-access

我是 C# 和数据库的新手，所以为了练习，我编写了一个程序来添加到数据库、搜索和更新

删除按钮的工作原理如下；我搜索数据库元素，如果成功，我删除该行..

现在我想点击一行，然后从 gridview 和数据库中删除它

```
try
            {

                int row = dataGridView1.CurrentCell.RowIndex;

                dataGridView1.Rows.RemoveAt(row);

            }
            catch (Exception )
            {

                MessageBox.Show("The Datatable is empty");
            } 
```

这是我从gridview中删除它的方式，但我不知道如何从数据库中删除它，如果有人能提供帮助，我将不胜感激，谢谢

# html - html 弹出窗口后的 MacOS Safari 渲染错误。为什么？

> ID：13830720
> 
> 赞同：3
> 
> 时间：2012-12-12T00:13:13.817
> 
> 标签：html, css, macos, safari

我采用 HTML5 Boilerplate 模板并创建了一个示例页面，显示 Mac OS 上 Safari 中的渲染错误[http://random.net.ua/bug/](http://random.net.ua/bug/)

要重现错误：

1.  点击“打开窗口”
2.  滚动到窗口底部
3.  单击页面上的任意位置
4.  滚动到顶部

你会看到这样的东西： ![漏洞](../Images/53a294d58946b0a24860c765d2b060c8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:16:35.063

对我来说，该网站运行良好，不像您的网站的样子。也许尝试清除您的 cookie/历史记录以使更改在您的计算机上生效？

希望有帮助。发布代码也可以带来更好的答案：D

# c - 用 C 枚举 SysListView32 项

> ID：13830726
> 
> 赞同：0
> 
> 时间：2012-12-12T00:14:35.263
> 
> 标签：c, sendmessage, syslistview32

我发现的所有示例都与 C# 相关，但我不熟悉它。我的任务是为测试提供某种自动化。我有安装程序，其中第一个按钮位于 SysListView32 内部，据我所知，我的目标是选择它们，按名称选择按钮并单击它最后一部分很明显：

```
GetWindowText(control, window_name, 256);
if(strcmp.....
{
do smth
} 
```

但是当谈到 SysListView32 我无法理解如何在 C 中提取它的对象和名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:29:00.373

看看 LVM_GETITEM。MSDN 文档页面在这里：http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb774953](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774953(v=vs.85).aspx) (v=vs.85).aspx 。文档实际上非常详尽。

一个简短的示例，它将检索“lParam”、图标的图像列表索引和项目的文本：

```
LVITEM lvItem;
TCHAR szBuffer[MAX_PATH + 1] = { 0 };

lvItem.mask       = LVIF_PARAM | LVIF_IMAGE | LVIF_TEXT;
lvItem.iItem      = iItem;
lvItem.iSubItem   = 0;
lvItem.pszText    = szBuffer;
lvItem.cchTextMax = MAX_PATH;

if(ListView_GetItem(m_hListView,&lvItem))
{
    /* success! the item details are in lvItem */ 
} 
```

# assembly - 装配中的对齐，每个如何获得它的偏移量？

> ID：13830734
> 
> 赞同：2
> 
> 时间：2012-12-12T00:15:20.463
> 
> 标签：assembly, x86, alignment

这是我正在研究的一个问题，但我只想知道为什么偏移量是这样的（红色的小数字）

![图片](../Images/eda84dc196785726f2b0de34a467a045.png)

有人可以向我解释为什么在`struct s1`，偏移量来自`0->4->8`？据我了解，因为`char`是 1 个字节，所以有 3 个字符。所以它是 3 个字节加 1，以满足对齐。但为什么它会从 4 变为 8，在`union u1 b`?? `union`有4个字节吗？为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T00:19:16.513

union 是 4 个字节，因为这是它包含的最大元素的大小，即指针（这必须是 32 位平台）

# node.js - 按值搜索redis hash

> ID：13830736
> 
> 赞同：1
> 
> 时间：2012-12-12T00:16:07.763
> 
> 标签：node.js, redis

我正在使用 node.js (with `coffee`)，这是我保存到 redis 的方式：

```
 hash = "tweet:#{twitterResult.id}"
  hashset =
    tweet_id: twitterResult.id
    screenname: twitterResult.user.screen_name
    gender: gender

  client.hmset hash, hashset, ->
    console.log "SAVED IN REDIS" 
```

如何通过查询检索所有保存的女性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T00:32:18.823

您需要手动创建索引（redis 不是关系数据库，根据经验，不要关心您输入的值）。
例如，创建属于女性的所有哈希 id 的列表。（性别：女性名单）

# c# - 如何在有或没有 PLINQ 的情况下并行化？

> ID：13830738
> 
> 赞同：1
> 
> 时间：2012-12-12T00:16:10.667
> 
> 标签：c#, linq, parallel-processing, plinq

我有以下代码片段：

```
// Initialise rectangular matrix with [][] instead of [,]
double data[][] = new double[m];
for (int i = 0; i < m; i++)
  data[i] = new double[n];

// Populate data[][] here...

// Code to run in parallel:
for (int i = 0; i < m; i++)
  data[i] = Process(data[i]); 
```

如果这是有道理的，我有一个双打矩阵。我需要对矩阵的每一行进行转换。它是“令人尴尬的并行”，因为从一行到另一行的数据没有连接。

如果我这样做：

```
data.AsParallel().ForAll(row => { row = Process[row]; }); 
```

首先，我不知道是否`data.AsParallel()`知道只看第一个下标，或者它是否会枚举所有 m * n 双打。其次，既然`row`是我要列举的元素，我不知道我是否可以像这样改变它——我怀疑不会。

那么，不管有没有 PLINQ，在 C# 中并行化这个循环的好方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T00:45:29.647

这里有两种方法：

```
 data.AsParallel().ForAll(row =>
        {
            Process(row);
        });

        Parallel.For(0, data.Length, rowIndex =>
        {
            Process(data[rowIndex]);
        }); 
```

在这两种情况下，一维双精度数组都是通过引用传递的，修改 Process 方法中的值将修改数据数组。

# javascript - 带有 Cookie 的 JQuery 持久倒计时

> ID：13830741
> 
> 赞同：-1
> 
> 时间：2012-12-12T00:16:28.720
> 
> 标签：javascript, jquery

我有 jquery 倒计时，我从[这里](http://code.google.com/p/jquery-utils/source/browse/trunk/src/jquery.countdown.js)获取并尝试使用 cookie 进行修改以获得持久结果，如下所示：已 **编辑**

```
 <script type="text/javascript">
    (function($) {
   function countdown(el, options) {
    var calc = function (target, current) {
        var o = {};

        var datetarget = getCookie('Target');
        if(!datetarget) {
            clearInterval(cd.id);
            var datetarget = target.getTime()/1000;
        }
        if(datetarget <= 0) { return true; }
        deleteCookie('Target');
        o.seconds = datetarget;
        o.seconds %= 86400;
        o.hours = Math.floor(o.seconds/3600);
        o.seconds -= o.hours * (3600);
        o.minutes = Math.floor(o.seconds/60);
        o.seconds -= o.minutes * (60);
        o.seconds %= 60;
        datetarget -= 1;
        setCookie('Target',datetarget,1);
        return o;
    }; 
```

它以某种方式起作用，但我仍然在“秒”部分得到浮点而不是整数，在“小时”得到错误结果。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:06:47.710

> 我仍然在“秒”部分得到浮点而不是整数

你从来没有把它弄圆。虽然您得到的毫秒[`getTime`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getTime)数是一个整数，但在除以 1000 以转换为秒后，您得到一个带有 3 位小数的浮点数。

此外，[EcmaScript Modulus 运算符](http://es5.github.com/#x11.5.3)确实适用于浮点数，而不是将操作数和结果截断为整数。引用规范：

> 在 C 和 C++ 中，余数运算符只接受整数操作数；在 ECMAScript 中，它也接受浮点操作数。
> 
> 由 % 运算符计算的浮点余数运算的结果与 IEEE 754 定义的“余数”运算不同。IEEE 754“余数”运算从舍入除法计算余数，而不是截断除法，因此它的行为与通常的整数余数运算符不同。相反，ECMAScript 语言在浮点运算上定义 % 以类似于 Java 整数余数运算符的行为方式；这可以与 C 库函数 fmod 进行比较。
> 
> 在不涉及无穷大、零或 NaN 的情况下 [...]，被除数 n 和除数 d 的浮点余数 r 由数学关系 r = n - (d * q) 定义，其中 q 是仅当 n/d 为负时为负的整数，仅当 n/d 为正时为正，并且其大小尽可能大而不超过 n 和 d 的真实数学商的大小。r 使用 IEEE 754 舍入到最近模式计算并舍入到最接近的可表示值。

[最后一部分还解释了为什么我们可能会从浮点运算](http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems)中的小舍入误差中得到一些其他小数。

您可以省略等效的行之一

```
 o.seconds -= o.minutes * (60);
    o.seconds %= 60; 
```

并添加其中之一

```
 o.seconds = Math.round(o.seconds);
    o.seconds = Math.floor(o.seconds); 
```

> “小时”的错误结果

我看不到那个。您是否可能确实期望该值根据您的时区表现？`getTime`返回自纪元以来的毫秒数，以*UTC*为单位。

# php - preg_match 仅允许字母、空格和破折号和空格

> ID：13830745
> 
> 赞同：6
> 
> 时间：2012-12-12T00:17:20.217
> 
> 标签：php

我知道如果 $stringabc 包含除数字以外的任何内容，我当前使用的一个条件是：

```
if(preg_match("/[^0-9]/",$stringabc)) 
```

我想要一个 if 条件，如果 $stringdef 包含除字母、空格和破折号 (-) 之外的任何内容，它会给出错误。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-12T00:24:36.987

那将是：

```
if(preg_match('/[^a-z\s-]/i',$stringabc)) 
```

对于“除字母 (az)、空格 (\s，表示任何类型的空格) 和破折号 (-) 之外的任何内容”。

还允许数字：

```
if(preg_match('/[^0-9a-z\s-]/i',$stringabc)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T00:21:09.730

你可以使用类似的东西：

```
preg_match("/[^a-z0-9 -]/i", $stringabc) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T00:29:35.257

如果您想停止所有空格，另一种方法是

```
preg_match("/^[a-z[[:space:]]-]/i",$stringabc); 
```

# python - Django 模板被替换

> ID：13830746
> 
> 赞同：1
> 
> 时间：2012-12-12T00:17:38.903
> 
> 标签：python, django, mako

我正处于学习 Django 并试图让我的网络应用程序运行的阶段。看完教程后，我真的不喜欢模板系统（不允许使用 python 代码）。我可以用另一个替换它吗，比如 Mako 或其他东西？或者也许有比 Django 更好的 web 框架，更好的意思是更少的内置功能，更多的东西需要定制，比如我自己的表单验证？也许不弄乱小部件是可能的，这会将太多的显示逻辑放入控制器并导致代码重复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T00:24:53.433

Django 模板有一个很好的理念。不要将代码放入其中。如果你可以在那里自由编码，它最终会像无政府状态（如果你曾经编码过 PHP，你知道我在说什么）。

说，如果你想切换，我推荐你使用[Jinja](http://jinja.pocoo.org/)。这是@dcramer 的一篇很棒的帖子：http: [//justcramer.com/2008/03/29/using-jinja-with-django/](http://justcramer.com/2008/03/29/using-jinja-with-django/)

有一些项目可以支持它，比如这个：[https ://github.com/niwibe/django-jinja](https://github.com/niwibe/django-jinja)

# erlang - 右手边值不匹配

> ID：13830747
> 
> 赞同：2
> 
> 时间：2012-12-12T00:17:40.870
> 
> 标签：erlang

我在看《七周七种语言》一书，一天erlang的自学一点问题都过不去。

我的代码是这样的：

```
-module(slsw).
-export([count_words/1]).
list_length([]) -> 0;
list_length(String) ->
    [_ | Tail] = String,
    1 + list_length(Tail).

count_words(Text) ->
    {_, R} = re:split(Text, " "),
    list_length(R). 
```

但是，当我打开时`erl`，编译它（`c(slsw).`），然后尝试将它与这样的东西一起使用：

```
slsw:count_words("yoo dude, this is a test"). 
```

我得到了这个烦人的运行时异常：

```
** exception error: no match of right hand side value [<<"yoo">>,<<"dude,">>,<<"this">>,<<"is">>,<<"a">>,
                                                       <<"test">>]
     in function  slsw:count_words/1 (slsw.erl, line 19) 
```

看起来它结束了数组，然后抛出这个异常..我做错了什么？

我也找到了这个`string:words`功能，但我想做我自己的乐趣/学习。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T01:05:22.853

[`re:split/2`](http://erldocs.com/R15B/stdlib/re.html?i=0&search=re%3asplit#split/2)只返回一个列表，而不是一个元组。这可能是本书正文中的错字。

诚然，Erlang 错误消息对于刚接触该语言的人来说可能有点神秘，但可以帮助您阅读错误消息的提示是，它表示等号右侧的计算结果为`[<<"yoo">>,<<"dude,">>,<<"this">>,<<"is">>,<<"a">>,<<"test">>]`（简单地来自 re: split - 即二进制文件列表），并且无法将其与左侧的 2 元组匹配。

因此，如果您只是将`count_words`功能更改为以下内容，那就足够了：

```
count_words(Text) ->
    R = re:split(Text, " "),
    list_length(R). 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T01:06:01.330

我不相信 re:split/2 返回一个元组 - 它返回一个列表。因此，您的 {_, R} = re:split/2 出现两行错误，因为函数的返回无法匹配 = 左侧的元组

# java - 子类化集合并使用泛型

> ID：13830751
> 
> 赞同：4
> 
> 时间：2012-12-12T00:18:13.383
> 
> 标签：java, generics, collections, map, linked-list

我必须承认，我对 java 泛型不是很熟练。但这就是问题所在。我需要继承 LinkedList 以添加一些（不是全部）典型的 Map 方法。假设我这样做：

```
public class TalendList<T extends Serializable> extends ArrayList<T>{

    private Map<T, T> map;

    public TalendList(){
        super();
        map = new ConcurrentHashMap<T, T>();
    } 
```

这是正确的方法吗？为什么我不能在调用者代码中这样做：

```
List<String> ggg = new TalendList<String>(); 
```

但只有：

```
TalendList<String> ggg = new TalendList<String>(); 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T00:57:15.483

发生这种情况是因为您正在导入：

```
import java.awt.List: 
```

代替：

```
import java.util.List; 
```

List 的 awt 类型不支持参数化，也不是泛型集合。

# jquery - 鼠标移出时反向精灵动画

> ID：13830752
> 
> 赞同：1
> 
> 时间：2012-12-12T00:18:16.057
> 
> 标签：jquery, reverse, mouseenter, mouseout, spritely

我有一个精灵动画，我想在鼠标悬停在对象上时播放它，然后在鼠标离开对象时反向播放并在第一帧停止。

这就是我为鼠标输入动画所拥有的：

```
$("#banner").mouseenter(function(){ $('#bannerstache').sprite({fps: 200, no_of_frames: 34,   play_frames:34}); }); 
```

基本上，当您将鼠标悬停在横幅上时，小胡子会“生长”，直到在第 34 帧完成。（而在第 1 帧，没有小胡子。）

我希望这个小胡子在鼠标离开悬停状态时反向播放并返回到第 1 帧。

问题是，我尝试了几种反转播放的方法，但它并不总是反转回第一帧。

我怎样才能做到这一点？

如果您能提供一些意见，非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:21:17.077

这是我从你的问题描述中总结出来的

HTML：

```
<div id="div1" class="testContainer"></div> 
```

CSS：

```
.testContainer {height:100px;width:150px;background-color:#CCC;text-align:center;font-size:90px}​ 
```

JavaScript：

```
// arrSprite would be an array of images
// each index represents a frame in your sprite
// for the purposes of this test i'll create an array of integers
var arrSprite1 = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];

// $div1 is a container within which we'll place our animation
var $div1 = $('#div1');

// create a new SpritePlayer() to handle our animation
var player = new SpritePlayer($div1, arrSprite1, 100);

// set the hover in/out event handler of our container.
$div1.hover(player.forward, player.reverse);

function SpritePlayer($container, arrSprite, speed) {
    var int, cur = 0, min = 0, max = arrSprite.length;

    // give $container the first frame in our sprite (arrSprite)
    $container.html(getFrame(min));

    return {
        forward: function () { playSprite(true); },
        reverse: function () { playSprite(false); }
    };

    function getFrame(i) { return arrSprite[i]; }

    function playSprite(forward) {
        var limit = forward ? max : min;

        clearInterval(int); int = setInterval(function() {
            $container.html(getFrame(forward ? ++cur : --cur));
            cur === limit && clearInterval(int); 
        }, speed);
    }
};
​ 
```

[**现场演示**](http://jsfiddle.net/4cgrb/79/)

# javascript - 在 J3.0.2 上使用 Gantry 框架解决 mootools 错误/冲突

> ID：13830753
> 
> 赞同：0
> 
> 时间：2012-12-12T00:18:20.260
> 
> 标签：javascript, joomla, mootools, joomla-extensions, joomla3.0

我在 Joomla 3.0.2 平台上构建并使用 Gantry 框架的网站上找到两个错误的解决方案时遇到问题。

第一个错误是：

**类型问题**

**“null”不是对象（评估“b.appendChild”）**

第二个错误是：

**类型问题**

**“未定义”不是对象（评估“rikgallery_slideshow.jump”）**

我从来不明白如何调试 javascript 错误，所以我非常感谢一些帮助。

该网站可以访问： http: [//lads.ergonomiq.net](http://lads.ergonomiq.net)

如果有人可以提供帮助并需要超级用户访问后端，请发送电子邮件至 ali.samii@ergonomiq.net

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:33:35.270

这只是为您指明正确的方向，需要进一步测试才能完全解决您的问题。

好的，第一个错误发生在**responsive.js**第 66 行

```
menu.inject(document.getElement('.menu-block')); 
```

我会`console.log(menu, document.getElement('.menu-block'))`确保两者都包含预期的元素。我猜其中之一将是空的。

第二个错误

```
AjaxURL: 'http://lads.ergonomiq.net//index.php?option=com_roksprocket&amp;task=ajax&amp;format=raw&amp;ItemId=101' 
```

正在返回意外的 JSON

```
{"status":"error","message":"Unable to find class for item ","payload":null} 
```

我会测试错误，只有在返回的 JSON 中有图像时才会继续

您主页的第 136 行。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:44:01.507

> 我从来不明白如何调试 javascript 错误，所以我非常感谢一些帮助。

如果你想调试 JavaScript 错误，你应该在 FireFox 浏览器中使用[FireBug 。](http://getfirebug.com/)您可以[在此处获取 FireBug 插件](https://addons.mozilla.org/en-US/firefox/addon/firebug/)。然后，您将能够自己找到这些错误。

# javascript - onMouse over 函数不起作用，否则它会起作用

> ID：13830754
> 
> 赞同：1
> 
> 时间：2012-12-12T00:18:23.430
> 
> 标签：javascript, html

我有一个javascript函数，但如果我使用它，它就不起作用。如果我在我的 html 上使用没有该功能的相同代码，它确实有效。

```
<script type="text/javascript">
function jon(str) {
    id = 'j'+str;
    getElementById(id).setAttribute('class', '');
}
function jover(str) {
    id = 'j'+str;
    getElementById(id).setAttribute('class', 'hide');
}
</script>

<form id="lijst" action="" method="POST" onSubmit="return formOK();">
    <table>
        <tr onMouseOver="getElementById('jtitle').setAttribute('class', '');" onMouseOut="getElementById('jtitle').setAttribute('class', 'hide');">
            <th>* Title</th>
            <td><input type="text" name="title" /></td>
            <td id="jtitle" class="hide">Vul een film of serie titel in.</td>
        </tr>
        <tr onMouseOver="jon('type');" onMouseOut="jover('type');">
            <th>* Type</th>
            <td><select name="type"><option value="film">Film</option><option value="serie">Serie</option></select></td>
            <td id="jtype" class="hide"></td>
        </tr> 
```

标题有效，但类型无效。控制台说 getElementById() 没有定义。我试图`var id = ''`为这些功能添加功能，但这不起作用。

那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T00:19:19.617

您需要前缀`document.`：

```
document.getElementById(id).setAttribute(...); 
```

该`getElementById`方法是在`document`对象上定义的。为了在任何对象上调用方法，您需要使用定义它的对象，后跟一个点`.`和方法名称。例如：

```
document.getElementById()
   |    ^       |
   |            |
   |            |
[object]    [method] 
```

唯一的例外是`window`对象，当您在其上定义函数或变量时不需要这样做；您可以像独立使用它一样使用它。但实际上所有*全局*变量都在 window 对象上。这可能是由于`var`在创建变量时意外省略了关键字造成的。例如：

```
x = 5; 
```

假设`x`以前没有定义变量。由于`x`不是*用*关键字创建的`var`，所以它放在`window`对象上。我们可以在控制台中查看：

```
>> window.x;

 : 5 
```

这可能会导致棘手的情况，因为它可能与`x`在外部范围中声明的另一个变量发生冲突。这就是为什么用 定义总是很重要的原因`var`。不应该有理由不这样做。

# android - 空格字符串问题android

> ID：13830757
> 
> 赞同：0
> 
> 时间：2012-12-12T00:19:06.267
> 
> 标签：android, string

在尝试进行简单的练习时，我遇到了越来越多的麻烦。我正在尝试删除字符串中所有最终的起始字符“”。

示例：space-space-space50（我无法理解，因为这个论坛删除了多余的空间）结果：50

这是代码...

```
 char c=textToShow.getText().toString().charAt(1);
    int i=1;
    while (c == ' '){
        textToShow.setText(textToShow.getText().toString().substring(i));
    //New char
        i++;
    c=textToShow.getText().toString().charAt(i);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T00:34:15.260

你有正确的想法，但你的实施是关闭的。第一的

```
char c=textToShow.getText().toString().charAt(1); 
```

应该从 开始`0`，这就是索引的制作方式。

int 已正确初始化，但甚至不是真正需要的。这是因为您只使用字符串的开头。但是，您的循环是出错的地方。您的子字符串代码是正确的，但是现在，您不需要增加 i，因为您正在通过缩短字符串来修改它。还，

```
c=textToShow.getText().toString().charAt(i); 
```

应该是 c=textToShow.getText().toString().charAt(0); 您仍在检查字符串的**开头**。

使用循环的更有效的实现可能是：

```
char c=textToShow.getText().toString().charAt(0);
String temp = textToShow.setText(textToShow.getText().toString();
while (c == ' ' && temp.length > 0)//also check to see if you're accessing an empty string.
{
  temp = temp.substring (1);
  c = temp.charAt (0);
}
textToShow.setText (temp); 
```

当然，这是一个练习，如果你想以正确的方式做，你会使用 temp.trim();

# actionscript-3 - actionscript3 (flash) 不会在 chrome 中从用户文件中加载图像

> ID：13830763
> 
> 赞同：0
> 
> 时间：2012-12-12T00:19:34.130
> 
> 标签：actionscript-3, flash, google-chrome, sandbox, loader

我正在尝试编写闪存小程序，用户可以在其中从硬盘上传图像。
所以actionscript将编辑图像并将其发送到服务器。
加载图像在 flash player、firefox 和 opera 中工作，但在 chrome 中选择图像后它会停止。
我正在使用flashdevelop。
这是我的代码：

```
public class Main extends Sprite 
{

    [Embed(source = "../lib/lena.png")]
    private var layer0Class : Class;
    private var layer0:Bitmap = new layer0Class();

    private var fileReferenceSelect:FileReference = new FileReference();

    public function Main():void 
    {
        if (stage) init();
        else addEventListener(Event.ADDED_TO_STAGE, init);
    }

    private function init(e:Event = null):void 
    {
        removeEventListener(Event.ADDED_TO_STAGE, init);
        /// add image to flash scene
        addChild(layer0);

        /// add button
        var my_button:SimpleButton;
        my_button = new SimpleButton();
        my_button.x = 150;
        my_button.y = 50;
        var cerchio:Shape=new Shape();
        cerchio.graphics.beginFill(0x000000,1);
        cerchio.graphics.drawCircle(my_button.x,my_button.y,20);
        cerchio.graphics.endFill();
        my_button.upState = cerchio;
        my_button.overState = cerchio;;
        my_button.downState=cerchio;
        my_button.hitTestState = my_button.upState;
        addChild(my_button);
        /// button clicked
        my_button.addEventListener(MouseEvent.CLICK,function(m:MouseEvent):void
        {
            fileReferenceSelect.browse([new FileFilter("PNG Files (*.png)","*.png; *.jpg; *.jpeg")]);
        });
        /// file selected
        fileReferenceSelect.addEventListener(Event.SELECT, function(event:Event):void
        {
            fileReferenceSelect.load();
        });
        /// file ready to load
        fileReferenceSelect.addEventListener(Event.COMPLETE, function(event:Event):void
        {
            var ldr:Loader = new Loader();             
            /// file loaded
            ldr.contentLoaderInfo.addEventListener(Event.COMPLETE, function(e:Event):void {
                var bm:Bitmap = Bitmap(e.target.content as Bitmap); /// here chrome is messing up
                layer0.bitmapData = bm.bitmapData;
            });
            ldr.loadBytes(fileReferenceSelect.data);
        });
    }

} 
```

是不是因为 chrome 的某些限制（我读到 chrome 中的 flash 在沙箱中）？
有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T05:42:12.370

我在 chrome 中本地加载 Flash 内容时遇到问题。它的 Flash 全局播放器设置。问题是，chrome 内置了自己的 flash 版本..我忘记了它叫什么..我认为是胡椒粉？无论如何，它不会一直遵守该站点的设置：http: [//www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html](http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html)

只要您在 Web 服务器上进行测试，它应该没问题.. 哎呀，即使是本地 Web 服务器也可以工作

# java - Java转义转义序列

> ID：13830765
> 
> 赞同：5
> 
> 时间：2012-12-12T00:19:51.990
> 
> 标签：java, regex, escaping

我想转义字符串中的转义序列。

示例：如果我有一个内容为“\n\u0073”的字符串，我需要以这样的方式对它们进行转义，如果我将它打印到命令行，我会看到

```
this:
\n\u0073
instead of:

s 
```

我还将转义双引号 (") 和反斜杠 (\)，并且我想出了一个表达式来转义它们：

```
Pattern p = Pattern.compile("([\"\\\\])");
String str = p.matcher("\"\n\u0073\\"").replaceAll("\\\\$1"); 
```

这产生了我：

```
\"
s\\ 
```

但是，它不处理转义序列。我想要的是：

```
\"\n\u0073\\ 
```

我需要进行哪些修改才能转义转义序列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T00:48:29.403

您可以使用[StringEscapeUtils](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringEscapeUtils.html)。上面有方法`escapeJava()`。不幸的是，imo，没有办法转义像*\u0073*这样的 unicode 文字，因此对于您的示例输入*"\"\n\u0073\""*，`StringEscapeUtils.escapeJava("\"\n\u0073\"")`将返回`\"\ns\"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T00:55:04.737

像这样的东西？

```
public class Example {

    public static void main(String[] argv) {
        System.out.println("= First try =");
        System.out.println("\n\u0073");
        System.out.println("= Second try =");
        System.out.println("\n\\u0073");
    }

} 
```

这将输出：

```
= First try =

s
= Second try =

\u0073 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T01:09:20.453

这样的事情怎么样？它可以 100% 工作......唯一的弱点是我对每个需要的字符都有一个明确的案例。我不确定是否有办法解决这个问题，尽管也许你可以通过为整个字符*范围做一个案例来解决这个问题。*我不认为 RegEx 可以匹配像这样的字符定义`\u0073`，但我不确定。

```
public static void main(String[] args) {
    String unescaped = "\n\u0073";
    System.out.println("Version 1:\n" + unescaped);
    System.out.println("\nVersion 2:");
    printEscaped(unescaped);
}

public static void printEscaped(String unescaped) {
    for (char c : unescaped.toCharArray()) {
        switch (c) {
            case ('\n'):
                System.out.print("\\n");
                break;
            case ('\u0073'):
                System.out.print("\\u0073");
                break;
            default:
                System.out.print(c);
        }
    }
} 
```

输出：

```
Version 1:

s

Version 2:
\n\u0073 
```

另一个更广泛使用的潜在问题是它适用于字符，即使它们**不是**由转义序列定义的。例如，`printEscaped("s")`将打印相同的内容`printEscaped("\u0073")`：它们都将打印`\u0073`。因此，您必须小心**仅**在您确定要以“转义符号”打印每个字符的字符串上调用该方法。

# static - Box2d 无力边界框

> ID：13830767
> 
> 赞同：1
> 
> 时间：2012-12-12T00:20:06.500
> 
> 标签：static, cocos2d-iphone, box2d, bounding-box, kinematics

目前，Cocos2d-Box2d 项目正在使用 b2Vec2 为游戏的边缘创建一个 Bounding Box。因此，bounding Box 不会影响运动学体，运动学体是不受力影响的体（这意味着体通常会飞出屏幕）。我想看看是否有办法让运动体与屏幕连接。如果没有，如果有人向我解释我应该如何在屏幕角落周围制作一个带有静态物体的边界框，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:08:29.663

这里有两种方法...尝试任何一种

// 方法 - 1

```
b2BodyDef groundBodyDef;
groundBodyDef.position.Set(0, 0);  
b2Body              *mGroundBody ;

mGroundBody = self.world->CreateBody(&groundBodyDef);
NSString *strId = @"Ground Body";
mGroundBody->SetUserData(strId);

b2EdgeShape groundBox;      

    //bottom
    groundBox.Set(b2Vec2(0.0f,0.0f), b2Vec2(mS.width/PTM_RATIO,0.0f));
    mGroundBody->CreateFixture(&groundBox,0);

    // top
    groundBox.Set(b2Vec2(0,mS.height/PTM_RATIO), b2Vec2(mS.width/PTM_RATIO, mS.height/PTM_RATIO));
    mGroundBody->CreateFixture(&groundBox,0);

    // left
    groundBox.Set(b2Vec2(0,mS.height/PTM_RATIO), b2Vec2(0,0));
    mGroundBody->CreateFixture(&groundBox,0);

    // right
    groundBox.Set(b2Vec2(mS.width/PTM_RATIO,mS.height/PTM_RATIO), b2Vec2(mS.width/PTM_RATIO,0));
    mGroundBody->CreateFixture(&groundBox,0); 
```

// 方法 - 2

```
//create 4 box2d walls...

    float bW = (IS_IPAD) ? (8) : 2 ;
    //top
    {
        b2BodyDef bodyDef;
        bodyDef.type = b2_staticBody;
        bodyDef.position.Set((mS.width*0.5f)/PTM_RATIO, (mS.height)/PTM_RATIO);
        bodyDef.linearDamping  = 0.0f;
        bodyDef.angularDamping = 0.0f;

        bodyDef.userData =  strId ;

        b2PolygonShape box;
        box.SetAsBox( ((mS.width*0.5f)/PTM_RATIO), (bW)/PTM_RATIO);

        b2FixtureDef fixDef;
        fixDef.shape = &box;
        fixDef.density = 1.0f;
        fixDef.friction = 0.1f;
        fixDef.restitution = 1.0f;
        fixDef.isSensor = false;

        b2Body *topBody = self.world->CreateBody(&bodyDef);
        topBody->CreateFixture(&fixDef);

    }

    //bottom
    {
        b2BodyDef bodyDef;
        bodyDef.type = b2_staticBody;
        bodyDef.position.Set((mS.width*0.5f)/PTM_RATIO, 0);
        bodyDef.linearDamping  = 0.0f;
        bodyDef.angularDamping = 0.0f;

        bodyDef.userData =  strId ;

        b2PolygonShape box;
        box.SetAsBox( ((mS.width*0.5f)/PTM_RATIO), (bW)/PTM_RATIO);

        b2FixtureDef fixDef;
        fixDef.shape = &box;
        fixDef.density = 1.0f;
        fixDef.friction = 0.1f;
        fixDef.restitution = 1.0f;
        fixDef.isSensor = false;

        b2Body *topBody = self.world->CreateBody(&bodyDef);
        topBody->CreateFixture(&fixDef);

    }

    //left
    {
        b2BodyDef bodyDef;
        bodyDef.type = b2_staticBody;
        bodyDef.position.Set(0, (mS.height*0.5f)/PTM_RATIO);
        bodyDef.linearDamping  = 0.0f;
        bodyDef.angularDamping = 0.0f;

        bodyDef.userData =  strId ;

        b2PolygonShape box;
        box.SetAsBox( ((bW)/PTM_RATIO), (mS.height*0.5f)/PTM_RATIO);

        b2FixtureDef fixDef;
        fixDef.shape = &box;
        fixDef.density = 1.0f;
        fixDef.friction = 0.1f;
        fixDef.restitution = 1.0f;
        fixDef.isSensor = false;

        b2Body *topBody = self.world->CreateBody(&bodyDef);
        topBody->CreateFixture(&fixDef);

    }

    //right
    {
        b2BodyDef bodyDef;
        bodyDef.type = b2_staticBody;
        bodyDef.position.Set((mS.width)/PTM_RATIO, (mS.height*0.5f)/PTM_RATIO);
        bodyDef.linearDamping  = 0.0f;
        bodyDef.angularDamping = 0.0f;

        bodyDef.userData =  strId ;

        b2PolygonShape box;
        box.SetAsBox( ((bW)/PTM_RATIO), (mS.height*0.5f)/PTM_RATIO);

        b2FixtureDef fixDef;
        fixDef.shape = &box;
        fixDef.density = 1.0f;
        fixDef.friction = 0.1f;
        fixDef.restitution = 1.0f;
        fixDef.isSensor = false;

        b2Body *topBody = self.world->CreateBody(&bodyDef);
        topBody->CreateFixture(&fixDef);
    } 
```

# antlr - 在 ANTLR 语法中只能识别 char 'a'

> ID：13830773
> 
> 赞同：1
> 
> 时间：2012-12-12T00:20:50.523
> 
> 标签：antlr, antlr3, antlrworks, antlrv3ide

身份证识别：

```
ID  :   ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*
    ; 
```

当我解析我的规则时，只有字符'a'无法识别，但'A'或'aa'或'a0'或'b'或'c'或'AAAZzzzxx'或....宇宙中的所有其他东西，除了'a' 可以被词法分析器识别，为什么不是 'a'？

错误 ：

```
mismatched input 'a' expecting 'u0005' 
```

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-12T03:44:24.613

您的规则可以匹配零个字符，因此词法分析器会变得混乱。你需要：

```
ID  :   ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')+
; 
```

看到“+”而不是“*”？

吉姆

# c# - 如何在 Windows Phone 项目中创建“数据库 txt”文件

> ID：13830776
> 
> 赞同：0
> 
> 时间：2012-12-12T00:21:00.727
> 
> 标签：c#, windows-phone-7, isolatedstorage

我知道 MS Windows Phone 没有禁止在手机上简单保存文件的好政策。我想要一个包含如下数据的文件：

```
//string double
    A 444,0
    B 332,240
    ... 
```

这是对应于Hz频率的音调数据库。如何将其构建到应用程序中，以便我稍后阅读。我不想在应用程序运行期间创建，但希望它已经创建为应用程序的数据源，以便我可以阅读它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T00:48:13.007

将文件添加到您的项目中，然后在文件的属性窗口中，将**构建操作**设置为**Resource**。

[在您的代码中，您可以通过调用Application.GetResourceStream](http://msdn.microsoft.com/en-us/library/ms596994%28v=VS.95%29.aspx)方法检索[StreamResourceInfo](http://msdn.microsoft.com/en-us/library/system.windows.resources.streamresourceinfo%28v=vs.95%29.aspx)实例，然后使用[StreamReader](http://msdn.microsoft.com/en-us/library/system.io.streamreader%28v=vs.95%29.aspx)从它的流中读取。

该文件的路径将是“/AssemblyName;component/Folder/File.ext”。其中“AssemblyName”是程序集的名称，“/Folder/File.ext”是相对于项目根目录的文件路径。例如。以下代码读取“/Data/tones.txt”文件：

```
private void ReadTones()
{
  string tonesPath = "/PhoneReadFileResource;component/Data/tones.txt";
  Uri tonesUri = new Uri(tonesPath, UriKind.Relative);
  StreamResourceInfo sri = Application.GetResourceStream(tonesUri);
  StreamReader rdr = new StreamReader(sri.Stream);
  TextDisplay.Text = rdr.ReadToEnd();
} 
```

您可以在此处根据您的问题下载示例项目：http: [//sdrv.ms/RnVbQ3](http://sdrv.ms/RnVbQ3)

# php - 如何在添加到购物车之前以编程方式创建新的自定义选项

> ID：13830777
> 
> 赞同：0
> 
> 时间：2012-12-12T00:21:05.580
> 
> 标签：php, magento

我为[checkout_cart_product_add_before](http://markshust.com/2012/08/27/create-checkout_cart_product_add_before-observer-magento)事件创建了一个观察者。我能够检索两个名为 locationTo 和 locationFrom 的选项。然后，我通过对两个地址进行地理编码并使用文森蒂大圆距离算法来计算与每个位置的距离。

我想在购物车页面上显示这个值，我将如何在购物车页面上显示这个值？

有没有办法我可以创建一个自定义选项并在观察者中设置距离值并将其添加到报价项目中，然后它将显示在购物车页面上，还是我想错了？我该怎么做呢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:41:05.980

您可以使用“additional_options”字段来存储您的自定义选项

请参阅[Magento - 基于用户输入的报价/订购产品项目属性](https://stackoverflow.com/questions/9412074/magento-quote-order-product-item-attribute-based-on-user-input/9496266#9496266)

# mongodb - mongodump，BSONElement：错误类型 107

> ID：13830779
> 
> 赞同：1
> 
> 时间：2012-12-12T00:21:24.207
> 
> 标签：mongodb, debian, database

转储数据库，有很多错误：

```
Wed Dec 12 02:03:35 Assertion: 10320:BSONElement: bad type 107
0xad0f71 0x67f28b 0x55beab 0x7036ef 0x5635d3 0x566ed0 0x568fd1 0xb42d62 0x5545f2 0x7f0288b39c8d 0x554459
 mongodump(_ZN5mongo15printStackTraceERSo+0x21) [0xad0f71]
 mongodump(_ZN5mongo11msgassertedEiPKc+0x9b) [0x67f28b]
 mongodump(_ZNK5mongo11BSONElement4sizeEv+0x1cb) [0x55beab]
 mongodump(_ZNK5mongo7BSONObj10jsonStringENS_16JsonStringFormatEi+0xff) [0x7036ef]
 mongodump(_ZN4Dump17writeMetadataFileESsN5boost11filesystem210basic_pathISsNS1_11path_traitsEEESt3mapISsN5mongo7BSONObjESt4lessISsESaISt4pairIKSsS7_EEESt8multimapISsS7_S9_SD_E+0x363) [0x5635d3]
 mongodump(_ZN4Dump2goESsN5boost11filesystem210basic_pathISsNS1_11path_traitsEEE+0x1e50) [0x566ed0]
 mongodump(_ZN4Dump3runEv+0x1b61) [0x568fd1]
 mongodump(_ZN5mongo4Tool4mainEiPPc+0x1712) [0xb42d62]
 mongodump(main+0x32) [0x5545f2]
 /lib/libc.so.6(__libc_start_main+0xfd) [0x7f0288b39c8d]
 mongodump(__gxx_personality_v0+0x421) [0x554459]
assertion: 10320 BSONElement: bad type 107 
```

然后他单独对每个集合进行了转储。没有错误。

那么，怎样才能知道这个错误是向哪个集合呢？有一个想法为什么它在dump整个数据库时出现，但是在dump collections时没有出现？

# bitmap - Notepad++ 的图标使用什么位图格式（所以我可以更改它们）？

> ID：13830780
> 
> 赞同：3
> 
> 时间：2012-12-12T00:21:28.090
> 
> 标签：bitmap, customization, notepad++, file-format

我目前正在使用 Notepad++ 来完成我的大部分编码工作。但是，我想更改它的图标，只是为了定制。

所以我所做的就是用[Resource Hacker](http://www.angusj.com/resourcehacker/)打开 .exe ，然后查看图标在哪里。它们似乎是位图格式，这很奇怪，因为它们具有透明度，并且用`BM`我知道的任何“位图”（标题，“Windows 位图”）格式替换它们都不起作用（未显示图标）。

所以我想问一下，**这些文件是什么格式的，我怎样才能产生它们？**

位图示例可以在[Notepad++ 存储库](http://sourceforge.net/p/notepad-plus/code/735/tree/trunk/PowerEditor/src/icons/)中找到：
[newFile http://sourceforge.net/p/notepad-plus/code/735/tree/trunk/PowerEditor/src/icons/newFile.bmp?format=raw](http://sourceforge.net/p/notepad-plus/code/735/tree/trunk/PowerEditor/src/icons/newFile.bmp?format=raw) [openFile http ://sourceforge.net/p/notepad-plus/code/735/tree/trunk/PowerEditor/src/icons/openFile.bmp?format=raw](http://sourceforge.net/p/notepad-plus/code/735/tree/trunk/PowerEditor/src/icons/openFile.bmp?format=raw) [saveFile http://sourceforge.net/p/notepad-plus/code /735/tree/trunk/PowerEditor/src/icons/saveFile.bmp?format=raw](http://sourceforge.net/p/notepad-plus/code/735/tree/trunk/PowerEditor/src/icons/saveFile.bmp?format=raw) [saveAll http://sourceforge.net/p/notepad-plus/code/735/tree/trunk/PowerEditor/src/icons/saveAll .bmp?format=raw](http://sourceforge.net/p/notepad-plus/code/735/tree/trunk/PowerEditor/src/icons/saveAll.bmp?format=raw) [closeFile http://sourceforge.net/p/notepad-plus/code/735/tree/trunk/PowerEditor/src/icons/closeFile.bmp?format=raw](http://sourceforge.net/p/notepad-plus/code/735/tree/trunk/PowerEditor/src/icons/closeFile.bmp?format=raw) [closeAll http://sourceforge.net /p/notepad-plus/code/735/tree/trunk/PowerEditor/src/icons/closeAll.bmp?format=raw](http://sourceforge.net/p/notepad-plus/code/735/tree/trunk/PowerEditor/src/icons/closeAll.bmp?format=raw)

如您所见，它们具有灰色遮罩，这让我认为 alpha 通道以某种非标准方式存储在格式中。（或者，它具有二进制透明度，并且`#C0C0C0`意味着透明）。

它也相当大，每个表示的像素有超过 5 个字节（！）。

这是上面第一个位图的标题的样子：

![十六进制车间](../Images/57f1f044d73e4c41f3d1d610dd1130b5.png)

任何的想法？只要知道这是什么格式就足够了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T01:36:04.053

这是一个 8BPP（每像素 8 位）索引位图。在“BM”之后有一个 52 字节的标题、一个 256 种颜色的调色板和索引的像素数据。每种颜色为 4 个字节，采用 BGR_ 格式（不使用第四个字节；如果是 alpha 通道，您将看到 FF 而不是 00）。

索引的像素数据从 0x436 开始。很简单：一个字节代表调色板中的一个索引。例如，前几个字节是 07 07 18 18。0x07 将使该像素使用调色板中的第 8 种颜色，即 #C0C0C0；0x18 将使该像素使用调色板中的第 25 种颜色，即#CECECE。

我猜透明度是按照您的猜测处理的。无论透明像素在哪里，我都会看到 07，调色板中对应的颜色是#C0C0C0。

请注意，像素数据是倒置存储的。也就是说，偏移量 0x436 处的前 16 个字节表示像素的*底部*行。

这里有更详细的解释：[http ://en.wikipedia.org/wiki/BMP_file_format#File_structure](http://en.wikipedia.org/wiki/BMP_file_format#File_structure)

编辑：至于如何制作它们，只需询问您最喜欢的图像编辑软件将图像导出为 256 色位图（或 8BPP 位图，以可用者为准）。请注意，如果您在绘制后保存它，Microsoft Paint 会破坏颜色，因此请在实际绘制任何内容之前保存它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T00:51:43.980

杰夫指出的一切都是正确的，并将继续成为公认的答案。但是，如果其他人可能想要调整 NP++，我制作了一个小型转换器，您可以使用它来将任何 8 位索引位图转换为可以与 NP++ 一起使用的位图（通过资源黑客或类似工具）。

它是用 Javascript 编码的，只用 Chrome 测试过，而且代码非常草率：[JsFiddle](http://jsfiddle.net/Camilo/9WpZA/)

要使用它，请在您喜欢的程序中创建一个 8 位 16x16 索引位图，然后将其拖放到该程序中。它会输出一些调试细节并给你一个链接，这样你就可以“下载”一个兼容的位图（但所有这些都发生在 HTML5 的客户端）。

编辑：SO抱怨我没有在此处发布相关代码就放置了一个指向JsFiddle的链接，那么好吧，我会发布它。这是完全独立的 HTML：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Endoblast</title>
        <style>
            html { background: #F8F8F8; }
            #drop-zone {
                position: fixed;
                left: 0;
                right: 0;
                bottom: 0;
                top: 0;
                border: 4px dashed #DDD;
                z-index: -1;
            }
            #result { font: 12px Consolas; padding-bottom: 240px; }
            .color { margin-right: -7px; position: relative; cursor: default; }
            .color > .top, .color > .bottom { position: absolute; left: 0; right: 0; height: 2px; }
            .color > .top    { position: absolute; top:    0; background: rgba(255, 255, 255, 0.2); }
            .color > .bottom { position: absolute; bottom: 0; background: rgba(  0,   0,   0, 0.05); }
        </style>
    </head>
    <body>
        <div id="drop-zone"></div>
        <p id="result"></p>
        <script>

            if (window.File && window.FileReader && window.FileList && window.Blob) {

                function Readr(bytes) {

                    var data = bytes;

                    var offset = 0;

                    this.nextStr = function(amount) {

                        var result = []

                        while (amount--) result.push(data[offset++]);

                        return toStr(result);

                    }

                    this.nextInt = function(amount) {

                        if (amount == 1 || !amount) return data[offset++];

                        if (amount == 2) return toInt16(data[offset++], data[offset++]);

                        if (amount == 4) return toInt32(data[offset++], data[offset++], data[offset++], data[offset++]);

                        return next(amount);

                    }

                    var next = this.next = function(amount) {

                        var result = []

                        while (amount--) result.push(data[offset++]);

                        return result;

                    }

                }

                function Color(r, g, b) {

                    this.r = r;
                    this.g = g;
                    this.b = b;

                }

                function toStr(bytes) {
                    var result = '';
                    for (var i = 0; i < bytes.length; i++) result += String.fromCharCode(bytes[i]);
                    return result;
                }

                function toInt16(b1, b2) { return (b1 << 0) + (b2 << 8); }

                function toInt32(b1, b2, b3, b4) { return (b1 << 0) + (b2 << 8) + (b3 << 16) + (b4 << 24); }

                function fromInt16(int16) {

                    return [
                         int16 & parseInt('00FF', 16),
                        (int16 & parseInt('FF00', 16)) >> 8
                    ];

                }

                function fromInt32(int32) {

                    return [
                         int32 & parseInt('000000FF', 16),
                        (int32 & parseInt('0000FF00', 16)) >> 8,
                        (int32 & parseInt('00FF0000', 16)) >> 16,
                        (int32 & parseInt('FF000000', 16)) >> 24
                    ];

                }

                function log(text) { document.getElementById('result').innerHTML += text + '\n<br/>'; }

                function logHtml(html) { document.getElementById('result').innerHTML += html + '<br/>'; }

                var bitCounts = {
                    '1': '1-bit',
                    '2': '2-bit',
                    '4': '4-bit',
                    '8': '8-bit',
                    '16': '16-bit',
                    '24': '24-bit',
                    '32': '32-bit'
                };

                var compressions = {
                    '0': 'RGB (uncompressed)'
                };

                function handleFileSelect(evt) {

                    evt.stopPropagation();
                    evt.preventDefault();

                    var files = evt.dataTransfer.files; // FileList object.

                    var reader = new FileReader();

                    reader.onload = function (event) {

                        var b = [].slice.call(new Uint8Array(event.target.result));

                        var r = new Readr(b);

                        if (r.nextStr(2) == 'BM')
                            log('BM header found.');
                        else
                            return log('File is not a BMP.');

                        var fileSize = r.nextInt(4);

                        log('File size: ' + fileSize + ' Bytes.');

                        var reserved = r.next(4)

                        var offset = r.nextInt(4);

                        log('Image data offset: ' + offset + ' Bytes.');
                        log('Image data size: ' + (fileSize - offset) + ' Bytes.');

                        var headerSize = r.nextInt(4);

                        log('DIB header size: ' + headerSize + ' Bytes.');

                        var header = r.next(headerSize - 4);

                        var hr = new Readr(header);

                        var width = hr.nextInt(4);
                        var height = hr.nextInt(4);

                        log('Image width: ' + width + 'px.');
                        log('Image height: ' + height + 'px.');

                        var planes = hr.nextInt(2);

                        log('Color planes: ' + planes + '.');

                        var bitCount = bitCounts[hr.nextInt(2)] || 'unknown';
                        var compression = compressions[hr.nextInt(4)] || 'unknown';

                        log('Bit depth: ' + bitCount + '.');
                        log('Compression: ' + compression + '.');

                        var pixelCount = hr.nextInt(4);

                        log('Pixel count: ' + pixelCount + '.');

                        var yPPM = hr.nextInt(4);
                        var xPPM = hr.nextInt(4);

                        var colorTableSize = hr.nextInt(4);

                        log('Color table size: ' + colorTableSize + '.');

                        var importantColors = hr.nextInt(4);

                        log('Important colors in color table: ' + importantColors + '.');

                        var colorTable = r.next(colorTableSize * 4);

                        var cr = new Readr(colorTable);

                        var colors = [];

                        for (var i = 0; i < colorTableSize; i++) {

                            var B = cr.nextInt(),
                                G = cr.nextInt(),
                                R = cr.nextInt(),
                                _ = cr.nextInt();

                            colors.push(new Color(R, G, B));

                        }

                        function createColorCell(r, g, b, desc) {

                            var title = 'title="' + desc + ': rgb(' + r + ', ' + g + ', '  + b + ')"'

                            return '<span class="color" ' + title + ' style="background:rgb(' + r + ',' + g + ',' + b + ')">'
                                 + '<span class="top"></span><span class="bottom"></span>&nbsp;&nbsp;</span> ';

                        }

                        var cells = '';

                        for (var i = 0; i < colors.length; i++) {

                            var c = colors[i];

                            cells += createColorCell(c.r, c.g, c.b, 'Color at index ' + i + ' in the color table');

                        }

                        if (colorTableSize) logHtml('Colors in the color table: ' + cells); else return log('No color table.');

                        log('Bitmap data, mapped to the color table is shown below.');

                        var bitmapCells = '';

                        var bitmapRows = [];

                        var indexes = [];

                        for (var y = height; y > 0; y--) {

                            for (var x = 0; x < width; x++) {

                                var index = r.nextInt();

                                indexes.push(index);

                                var color = colors[index];

                                var desc = 'Pixel x' + x + ', y' + y + ', mapped to index ' + index + ' in the color table, '
                                         + 'which has colors rgb(' + color.r + ', ' + color.g + ', ' + color.g + ')';

                                bitmapCells += createColorCell(color.r, color.g, color.b, desc);

                            }

                            bitmapRows.push(bitmapCells);
                            bitmapCells = '';

                        }

                        for (var row = height - 1; row > -1; row--) {

                            logHtml(bitmapRows[row]);

                        }

                        var fixedData = new ArrayBuffer(1334);

                        var fixed = new Uint8Array(fixedData);

                        var fixedOffset = 0;

                        function s8(b) { fixed[fixedOffset++] = b; }

                        function s16(i16) {
                            var bytes = fromInt16(i16);
                            s8(bytes[0]);
                            s8(bytes[1]);
                        }

                        function s32(i32) {
                            var bytes = fromInt32(i32);
                            s8(bytes[0]);
                            s8(bytes[1]);
                            s8(bytes[2]);
                            s8(bytes[3]);
                        }

                        // Now we build a fixed up bitmap.

                        s16(19778); // header.
                        s32(1334); // file size.
                        s32(0); // reserved.
                        s32(1078); // DIB data offset.
                        s32(40); // DIB header size.
                        s32(16); // width.
                        s32(16); // height.
                        s16(1); // planes.
                        s16(8); // bit depth.
                        s32(0); // compression.
                        s32(256); // image size.
                        s32(0); // Xpels.
                        s32(0); // Ypels.
                        s32(256); // Colors used.
                        s32(256); // Important colors.

                        for (var i = 0; i < 1024; i++) {

                            var c = colorTable[i];

                            if (typeof c !== 'undefined')
                                s8(colorTable[i])
                            else
                                s8(((i % 4) == 3) ? 0 : 255);

                        }

                        for (var i = 0; i < 256; i++) s8(indexes[i]);

                        window.URL = window.webkitURL || window.URL;
                        window.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder;
                        var file = new window.BlobBuilder();

                        file.append(fixed);

                        var a = document.createElement('a');
                        a.href = window.URL.createObjectURL(file.getBlob('image/bmp'));
                        a.download = 'fixed.bmp';
                        a.textContent = 'Download Notepad++ compatible bitmap';
                        document.getElementById('result').appendChild(a);

                    };

                    reader.readAsArrayBuffer(files[0]);

                }

                function handleDragOver(evt) {
                    evt.stopPropagation();
                    evt.preventDefault();
                    evt.dataTransfer.dropEffect = 'copy';
                }

                var dropZone = document.getElementById('drop-zone');
                dropZone.addEventListener('dragover', handleDragOver, false);
                dropZone.addEventListener('drop', handleFileSelect, false);

            } else {

                alert('The File APIs are not fully supported in this browser.');

            }

        </script>
    </body>
</html> 
```

# c# - 为什么日期结构是不可变的？

> ID：13830781
> 
> 赞同：5
> 
> 时间：2012-12-12T00:21:31.070
> 
> 标签：c#, objective-c

我想知道为什么 Date 结构和对象，如 C# 的 DateTime 和 Obj-C 的 NSDate 已经成为不可变的。

我正在寻找这种设计背后的原因以及使这些信息不可变的好处，而不仅仅是“因为他们可以”

***更新：*** 似乎有一个类似的问题，我的答案很好，但专门针对 Java，可以在这里找到：[为什么我们需要不可变类？](https://stackoverflow.com/a/3770485/933887)

结合我的问题的答案非常有用

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T00:25:16.190

不变性使很多事情变得更容易。如果您不必担心某些东西会在您身下发生变化，那么您不必编写很多保护代码。有很多假设是你不必做的。事情有很多可能性不会出错。

字符串、日期和其他类型的常见对象在现代语言中是不可变的，这是很常见的，因为它简化了编译器和框架，并且意味着编译器在进行优化时可以自由地做出假设。

要点是，以很小的价格（如果您想更改值，必须创建一个新对象），您可以获得很多真正的性能、稳定性和可靠性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T00:24:10.733

我不确定 Objective C，但在 C# 中，日期由简单的数字类型支持。由于数字是不可变的，因此基于它的 Date 也是不可变的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T00:25:07.500

我不确定 Objective-C，但`DateTime`'s 是不可变的，因为使它们可变实际上很难正确地做到。

这是因为如果你从一个方法（包括属性）返回它们，你会得到一个副本，而不是原始的。这可能意味着以下代码不会像您预期的那样运行：

```
someObject.Timestamp.SetSeconds(10.0); 
```

Where `SetSeconds`is void 并改变了底层结构。

它什么也不做，因为您将获得 Timestamp 对象的副本，将其添加 10 秒，然后对该副本不执行任何操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T18:07:34.497

绝大多数 (99.99%) 为在 .net 中使用而编写的结构（无论是在框架中还是在用户代码中定义）要么代表一个固定的独立值集合，它们可以接受对其类型合法的值的任何组合（例如a `Point`，其中包含 an`X`和 a `Y`)，或者表示单个抽象实体。Microsoft 在 .net 中的结构使用指南未能区分这些不同的使用场景，假设所有结构都符合第二种模式，不幸的是，第一种类型的结构通常以仅真正适合第二种模式的方式编写. 然而，碰巧的是，`DateTime`.net 中的结构当然不能作为独立值的集合，因此指南完全适合它。

首先，没有任何好的方法`DateTime`可以直接公开任何字段。结构封装没有明确的独立值集`DateTime`，因此不清楚任何字段的类型应该是什么。此外，许多属性不能被合理地改变，因为它们不是独立的。例如，如果有一个`DateTime`代表 2012 年 2 月 29 日的 a，并且一个将年份设置为 2011 年，然后将月份设置为 3，那么结果日期应该是什么？只对使用方法进行变异才有意义`DateTime`，不幸的是，vb.net 和 C# 都将假装允许在只读结构实例上调用变异方法，方法是*默默地*将代码替换`MyList[3].MutatingMethod();`为 horribly-broken`var temp=MyList[3]; temp.MutatingMethod();`. 微软通过定义一个属性来解决这个问题应该是相当简单的，这样在一个只读实例上调用一个用该属性标记的方法应该会导致编译器错误而不是代码损坏，但不幸的是微软的语言人们宁愿声明可变结构是邪恶的，而不是修复语言，所以它们不会，

# javascript - 如何启用单击分层 svg 图像

> ID：13830786
> 
> 赞同：1
> 
> 时间：2012-12-12T00:22:28.690
> 
> 标签：javascript, html, svg, onclick

我的应用程序使用最多 6 个分层的 svg 图像来创建交互式图像。我发现我无法在第一个下方的任何图像上单击鼠标。

** 编辑。删除了多余的代码和文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T00:29:43.717

`pointer-events`您可以通过将属性设置为`none`（[请参阅 Tinkerbin](http://tinkerbin.com/xbP67m1r) ）来使元素对鼠标事件不敏感：

SVG > *{不透明度：.5}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:34:54.953

从本质上讲，我不能以这种方式做我想做的事。堆叠嵌入的图像会导致只有顶层可以被鼠标点击。

图像地图有效，但有些混乱。

我创建了一个清晰的图像，将其命名为 clearOverlay，并给出了一个将它与我的图像映射相关联的 usemap 值。

我使用免费的在线应用程序[http://www.image-maps.com](http://www.image-maps.com)创建的图像地图让我可以创建可点击区域并为我生成 html。在清理它并交换 onclick 函数的 href 值后，我将地图添加到我的代码中。

下一个问题是让它覆盖我现有的图像。我最终使用 style="position:relative; top:-300px" 强制它直接坐在我的图像上。我确信一定有更好的方法，但在这一点上对我有用。

对于其他这样做的人，不要忘记将 clearOverlay 放在图像列表的最后，或者将 css z-index 设置为高于其他所有内容以确保它位于顶部。

所以我现在有一个堆叠的 svg 图像，我可以根据用户点击的位置来操作每个 svg。我只用了5天！我对自己的这种编码有点百灵鸟。

** 我上面的图像地图不会缩放到不同尺寸的屏幕。下次我尝试这个时，我将尝试使用带有填充区域的透明 svg 我希望单击的位置。

# java - 以 2 个相等的数字停止的随机数序列

> ID：13830790
> 
> 赞同：4
> 
> 时间：2012-12-12T00:23:13.107
> 
> 标签：java, random, sequence

> 创建一个由 0-9 的数字组成的数字序列，如果两个数字背靠背出现，则结束序列并显示序列的长度。

我一直在尝试找到一种方法来编写具有上述要求的程序。我只是想不出办法来做到这一点。我得到的最多的是：

```
import java.util.Random;
public class RandomSequence{
  public static void main(String[]args){
    int num1, num2, num3, i=2;
    Random r=new Random();
    num1=r.nextInt(10);
    num2=r.nextInt(10);
    System.out.print(num1+", "+num2+", ");
    while (num1!=num2){
      num3=r.nextInt(10);
      i++;
      System.out.print(num3+", ");
      if (num3==num2){
        System.out.println("There are "+i+" numbers in the sequence"); 
```

..

当两个相等的数字背靠背出现时，我只是不知道如何结束序列。

下面是一个例子：

```
1,6,2,9,8,1,4,2,8,2,2 
```

这个序列长 11 个数字。"

谢谢您，非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T00:27:38.350

我看不到任何地方 num2 正在改变。您希望 num2 保存您在上一次循环迭代中生成的数字。因此，就在循环结束之前，您需要设置`num2 = num3;`

真的，根本不需要 num3 。您在循环之前设置为分别使用`num1`和`num2`作为前一个和当前的数字，然后添加`num3`到组合中。重命名“num1”和“num2”（比如“previous”和“current”）可能有助于澄清发生了什么。

刚注意到，还有一个小问题。如果第一项和第二项相等，则根本不会通过循环，因此会错过输出。您应该在循环退出后输出（毕竟 while 条件已经在检查是否相等）。

========

像这样的东西：

```
 get first number, store as 'previous'.
 get second number, store as 'current'.
 print first couple numbers
 while (previous!=current){
   count up.
   move 'current' to 'previous'
   get next number, store as 'current'
   print current value
}
print final count 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T00:40:52.677

```
 import java.util.Random;
public class RandomSequence{
  public static void main(String[]args){
    int num1, num2, num3, i=2;
    Random r=new Random();
    num1=r.nextInt(10);
    num2=r.nextInt(10);
    System.out.print(num1+", "+num2);
    while (num1!=num2){
      num1=num2;
      num2=r.nextInt(10);
      i++;
      System.out.print(", "+num2);
    }
    System.out.println("\n\nThis sequence consists of "+i+" numbers");
  }
} 
```

非常感谢 femtoRgon。我接受了您的提示并重新编辑了程序，它运行良好。这比我想象的要容易（我想多了）。

再次感谢你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T00:56:36.843

使用 ArrayList 会很容易

```
import java.util.ArrayList;
import java.util.Random;
public class RandomSequenceB {
 public static void main(String[]args){
   int i=0;
   ArrayList sequence = new ArrayList();

   while (true) {
     sequence.add(new Random().nextInt(10));
     System.out.println(sequence);
     if (i > 1 && sequence.get(i) == sequence.get(i - 1)){
       System.out.println("There are "+i+" numbers in the sequence");
       break;
     }
     i++;
   } 
 } 
```

}

# c++ - 在 C++ 中模拟编译时反射

> ID：13830792
> 
> 赞同：9
> 
> 时间：2012-12-12T00:23:19.430
> 
> 标签：c++, constexpr

我有以下结构：

```
struct Data
{
    std::string firstMember;
    std::string secondMember;
    std::string thirdMember;
}; 
```

我想以字符串名称的`constexpr`方式选择其中一个成员，例如

```
Data instance;
auto& member = getMember(instance, "firstMember"); 
```

getMember 是`constexpr`function/struct/macros/whatever 有问题和表达式应该（我希望它是）优化为 simple `auto& member = instance.firstMember;`。我的愿望是能够`getMember`从另一个`constexpr`函数调用，这反过来又是计算特定成员的名称——>某种编译时反射。

我知道，C++ 中没有反射，因此可以以某种方式注册（部分专门化？使用一些宏魔术？）有问题的结构成员的名称，例如：

```
REGISTER_MEMBER(Data, "firstMember", firstMember); 
```

我想要的只是编译时优化并且在运行时什么都不做。这在 C++11 中可行吗？如何实现？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-15T18:41:25.537

如评论中所述，首先看一下`BOOST_FUSION_ADAPT_STRUCT`（和朋友）：

```
#include <boost/fusion/include/adapt_struct.hpp>
#include <string>

struct Data
{
    std::string firstMember;
    std::string secondMember;
    std::string thirdMember;
};

BOOST_FUSION_ADAPT_STRUCT(
    Data,
    (std::string, firstMember)
    (std::string, secondMember)
    (std::string, thirdMember)
    ) 
```

这会将您的`Data`结构转换为 Fusion 可用的序列：

```
#include <boost/fusion/include/at_c.hpp>

int main()
{
    Data d = { "firstData", "secondData", "thirdData" };

    std::cout << boost::fusion::at_c<0>(d) << std::endl;
} 
```

这打印`"firstData"`。更改索引以按顺序引用成员。

在那里，现在我们可以在编译时使用数字来引用成员。但你想要一个名字。评论中还指出，处理字符串是一种运行时功能......几乎。C++11 给了我们`constexpr`.

这有点棘手，但最终它看起来像这样：

```
#include <boost/fusion/include/adapt_struct.hpp>
#include <boost/preprocessor/cat.hpp>
#include <boost/preprocessor/repetition/repeat.hpp>
#include <boost/preprocessor/seq.hpp>
#include <boost/preprocessor/tuple/elem.hpp>
#include <stdexcept>

// and repeat for BOOST_FUSION_ADAPT_TPL_STRUCT, etc...
#define REFLECT_STRUCT(NAME, ATTRIBUTES)                                                \
        REFLECT_STRUCT_DETAIL(NAME,                                                     \
                              ATTRIBUTES,                                               \
                              BOOST_PP_SEQ_POP_FRONT(                                   \
                                BOOST_PP_CAT(                                           \
                                    /* warning: uses fusion implementation details: */  \
                                    BOOST_FUSION_ADAPT_STRUCT_FILLER_0(0,0)ATTRIBUTES,  \
                                    _END)))                                             \

#define REFLECT_STRUCT_DETAIL(NAME, ATTRIBUTES, WRAPPEDATTRIBUTES)                  \
        BOOST_FUSION_ADAPT_STRUCT(NAME, ATTRIBUTES)                                 \
                                                                                    \
        namespace detail                                                            \
        {                                                                           \
            namespace BOOST_PP_CAT(reflect_, NAME)                                  \
            {                                                                       \
                template <int N>                                                    \
                struct member_name;                                                 \
                                                                                    \
                BOOST_PP_SEQ_FOR_EACH_I(REFLECT_STRUCT_DETAIL_MEMBER_NAME,          \
                                        BOOST_PP_EMPTY,                             \
                                        WRAPPEDATTRIBUTES)                          \
                                                                                    \
                template <int N>                                                    \
                constexpr bool member_match_index(const std::size_t index,          \
                                                  const char* const str,            \
                                                  const std::size_t len)            \
                {                                                                   \
                    return index == len ||                                          \
                           (member_name<N>::value()[index] == str[index]            \
                            && member_match_index<N>(index + 1, str, len));         \
                }                                                                   \
                                                                                    \
                template <int N>                                                    \
                constexpr bool member_match(const char* const str,                  \
                                            const std::size_t len)                  \
                {                                                                   \
                    return len == member_name<N>::value_length                      \
                           && member_match_index<N>(0, str, len);                   \
                }                                                                   \
                                                                                    \
                constexpr int find_member(const char* const str,                    \
                                          const std::size_t len)                    \
                {                                                                   \
                    return BOOST_PP_REPEAT(BOOST_PP_SEQ_SIZE(WRAPPEDATTRIBUTES),    \
                                           REFLECT_STRUCT_DETAIL_MEMBER_NAME_TEST,  \
                                           BOOST_PP_EMPTY)                          \
                           throw std::runtime_error("could not find "               \
                                                    BOOST_PP_STRINGIZE(NAME)        \
                                                    " member");                     \
                }                                                                   \
            }                                                                       \
        }                                                                           \
                                                                                    \
        constexpr int BOOST_PP_CAT(indexof_, NAME)(const char* const str,           \
                                                   const std::size_t len)           \
        {                                                                           \
            return detail::BOOST_PP_CAT(reflect_, NAME)::find_member(str, len);     \
        }                                                                           \
                                                                                    \
        template <std::size_t N>                                                    \
        constexpr int BOOST_PP_CAT(indexof_, NAME)(const char (&str)[N])            \
        {                                                                           \
            return detail::BOOST_PP_CAT(reflect_, NAME)::find_member(&str[0], N);   \
        }

#define REFLECT_STRUCT_DETAIL_EXTRACT_NAME(pair) \
        BOOST_PP_STRINGIZE(BOOST_PP_TUPLE_ELEM(1, pair))

#define REFLECT_STRUCT_DETAIL_MEMBER_NAME(r, data, n, elem) \
        REFLECT_STRUCT_DETAIL_MEMBER_NAME_DETAIL(n, REFLECT_STRUCT_DETAIL_EXTRACT_NAME(elem))

#define REFLECT_STRUCT_DETAIL_MEMBER_NAME_DETAIL(n, name)               \
        template <>                                                     \
        struct member_name<n>                                           \
        {                                                               \
            static constexpr std::size_t value_length = sizeof(name);   \
            typedef const char value_type[value_length];                \
                                                                        \
            static constexpr const value_type& value()                  \
            {                                                           \
                return name;                                            \
            }                                                           \
        };

#define REFLECT_STRUCT_DETAIL_MEMBER_NAME_TEST(z, n, text) \
        member_match<n>(str, len) ? n : 
```

它看起来很吓人，但如果你花时间把它拆开，它是可读的。

我们必须引入我们自己的宏来提供对成员名称的常量表达式访问；大多数丑陋来自处理 Boost.Preprocessor 列表。尽管 Fusion 在改编过程中也会记录名称（请参阅 参考资料`boost::fusion::extension::struct_member_name`），但遗憾的是，它们没有被标记为`constexpr`对我们不可用。

这给出了：

```
#include <boost/fusion/include/at_c.hpp>
#include <iostream>
#include <string>

struct Data
{
    std::string firstMember;
    std::string secondMember;
    std::string thirdMember;
};

REFLECT_STRUCT(
    Data,
    (std::string, firstMember)
    (std::string, secondMember)
    (std::string, thirdMember)
    )

// your desired code:
// (note the use of at_c ensures this is evaluated at comple-time)
#define GETMEMBER(data, member) boost::fusion::at_c<indexof_Data(member)>(data)

int main()
{
    Data d = { "firstData", "secondData", "thirdData" };

    std::cout << boost::fusion::at_c<indexof_Data("firstMember")>(d) << std::endl;
    std::cout << GETMEMBER(d, "secondMember") << std::endl;
    std::cout << GETMEMBER(d, "thirdMember") << std::endl;
    /* causes error: std::cout << GETMEMBER(d, "nonexistent_member") << std::endl; */
} 
```

我认为这与您所追求的很接近。

但请记住，这可能并非都是必需的：Boost.Fusion 可能已经拥有您需要的东西。它位于纯编译时的东西（Boost.MPL）和常规的运行时的东西之间；调整你的结构，你已经可以做一些事情，比如迭代它（`boost::fusion::for_each`）。

# gwt - 重定向会话超时tomcat 7

> ID：13830794
> 
> 赞同：0
> 
> 时间：2012-12-12T00:23:24.423
> 
> 标签：gwt, tomcat, jaas

我想在会话超时时立即将用户重定向回登录页面，而无需用户向服务器发送请求。1\. 是否有可以放在 web.xml 或 context.xml 中的配置标签来处理这个？/loginPage 2 之类的东西。如果没有，tomcat 有这个原因吗？它打破了什么契约？3.有没有办法使用tomcat、jaas和gwt来完成这个？

我曾尝试使用 HttpSessionListener，但这不起作用，因为您不能（也许我不知道如何）从 Session 对象向用户发送重定向。我尝试过使用过滤器，但只有在发出请求时才会调用过滤器。

我对用户身份验证和网络内容还很陌生，所以希望我已经正确地提出了问题并且没有滥用术语。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:39:49.790

好吧，基本上，服务器在使用标准 HTTP 协议时无法启动通信。您可以使用一些长轮询或服务器推送技术来破解这个问题。如果您使用的是 GWT，我建议您研究[Errai](http://www.jboss.org/errai)框架。学习新事物的开销很大，但是您将能够使用 Errai 总线从服务器端通知用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T03:32:02.040

您可以尝试这种 hacky 方法。这依赖于在会话关闭的用户上触发的第一个应用程序异步回调的失败

服务器上的会话超时总是为用户的所有异步调用返回异常。您可以在 GWT 异步回调（应用程序中的所有异步回调）的故障块中捕获它，然后使用 Window 和 Navigator 类（ com.google.gwt.user.client 包）从 GWT 代码重定向应用程序

# html - TD 上的 CSS 不起作用。HTM:Struts2 主题 = 简单

> ID：13830796
> 
> 赞同：0
> 
> 时间：2012-12-12T00:23:36.900
> 
> 标签：html, struts2

为什么我的 CSS 不起作用？

```
<!--Struts2 log-in-->
<form id="login" name="login" action="/springtest/login.action" method="POST">  

    <tr>

        <td>
            UserName:<input type="text" name="userName" maxlength="20" value="" id="login_userName"/>
        </td>

        <td class="errorMessage">
            Username must not be blanks. 
        </td>
    <br>
    </tr>

    <tr>

        <td>
            PassWord:<input type="password" name="password" maxlength="20" id="login_password"/>
        </td>

        <td class="errorMessage">
            Password must not be blanks. 
        <td>
            <br>
    </tr>
    <tr> 
        <td>
            <input type="submit" id="login_0" value="Login"/>

        </td>
    </tr>
</form> 
```

我的 CSS 用于类 errorMessage 是这样的。任何线索如何调试这个？我尝试了firedebug，但我只是对它很陌生......我还检查了这个网站的答案，也许有重叠？但是你怎么知道呢？

```
.errorMessage {
color: red;
font-size: 0.8em;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T00:37:42.613

如果你使你的 HTML 有效（你没有`<table>`标签，一个`<td>`没有关闭，`<br />`出现在它不应该出现的地方等）它将起作用 -[**演示**](http://jsfiddle.net/BALAk/)

```
<!--Struts2 log-in-->
<form id="login" name="login" action="/springtest/login.action" method="POST">  
    <table>
    <tr>
        <td>
            UserName: <input type="text" name="userName" maxlength="20" value="" id="login_userName "/>
        </td>
        <td class="errorMessage">
            Username must not be blanks. 
        </td>
    </tr>

    <tr>
        <td>
            PassWord: <input type="password" name="password" maxlength="20" id="login_password"/>
        </td>
        <td class="errorMessage">
            Password must not be blanks.
        </td>
    </tr>
    <tr> 
        <td colspan="2">
            <input type="submit" id="login_0" value="Login"/>
        </td>
    </tr>
    </table>
</form> 
```

# c# - 如何应用 SharePoint Web 服务来返回文档的 ModifiedBy、TimeLastModified、UniqueID 和 FileType？

> ID：13830801
> 
> 赞同：0
> 
> 时间：2012-12-12T00:24:11.873
> 
> 标签：c#, web-services, sharepoint, ssis

我目前正在通过 SSIS 任务 (SQL Server 2008 RS) 中的 SharePoint Web 服务 (http://company.name.com/_vti_bin/lists.asmx) 成功应用 C# 代码，以签入和签出各种文件夹中的文件使用如下所示的 URL 值输入的 SharePoint 网站 (2010)。但是，我现在有一个新任务，即在 SharePoint 中应用相同环境的一组单独文档。我还必须收集上次修改每个文档的用户名、上次修改时间、SharePoint 唯一 ID 和文件类型。我正在使用 SharePoint Web 服务，因为数据库服务位于与 SharePoint 服务器不同的服务器上。

对于每个文档，我都有一个唯一的 URL 路径，例如：

> [http://company.name.com/a/abc/projects/Project_1.xls](http://company.name.com/a/abc/projects/Project_1.xls)
> [http://company.name.com/b/def/projects/Project_4.xls](http://company.name.com/b/def/projects/Project_4.xls)

有人可以提供一个简单的 C# 示例，使用 SharePoint Web 服务检索（不更新）四个感兴趣的属性，用于在给定 URL 值（如上面列出的 URL 值之一）的情况下发布在 SharePoint 网站上的文档？控制台应用程序示例会很好，因为它类似于 SSIS 任务脚本。

如果有帮助，我在下面提供了用于在 SSIS 脚本任务中签入和签出文件的代码。在设置代码之前，我添加了一个名为 SharePointListsService 的 Web 引用，应用了 Web 引用 URL“http://community.teamcomcast.com/_vti_bin/lists.asmx”。

```
SharePointListsService.Lists listService = new SharePointListsService.Lists();
listService.Credentials = System.Net.CredentialCache.DefaultCredentials;

//Check out a file in SharePoint using the URL
string fileCheckout = "http://company.name.com/a/abc/projects/Project_1.xls";
bool myResults = listService.CheckOutFile(fileCheckout, "true", DateTime.Now.ToString("f"));

//Check in a file in SharePoint using the URL
string fileCheckin = "http://company.name.com/a/abc/projects/Project_1.xls"
myResults = listService.CheckInFile(fileCheckin, "Completed revision.", "0"); 
```

以上面的代码为例，有人可以为我提供一个使用 C# 和 SharePoint Web 服务的类似代码示例，它为文件的给定 URL 返回以下属性？

```
ModifiedBy
TimeLastModified
UniqueID
FileType 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:28:07.557

我找到了一个很好的解决方法来解决原本需要的繁琐代码。以下链接提供了一种下载适配器和应用它的文档的方法。该适配器集成了 SSIS 和 SharePoint。也就是说，它将允许您在工具下添加 SharePoint 源和 SharePoint 目标任务项，这些任务项可用于从 SharePoint 中提取信息，与从数据库或 Excel 文件中提取信息的方式几乎相同。我已经设置好了，效果很好。

[http://sqlsrvintegrationsrv.codeplex.com/releases/view/17652](http://sqlsrvintegrationsrv.codeplex.com/releases/view/17652)

使用适配器，我可以捕获与发布在 SharePoint 源上的一个或多个文档相关联的属性（作者、修改者、上次修改者等），并轻松地将值发送到新的 SharePoint 目标或 Excel 或数据库目标。

# javascript - 通过 JS 更改 Button 值

> ID：13830802
> 
> 赞同：0
> 
> 时间：2012-12-12T00:24:16.093
> 
> 标签：javascript, button

```
<button class="btn btn-big btn-primary" id="geolocateMe" type="submit">Goooo!</button> 
```

请如何在 JS 中更改 Goooo！值变成一个按钮？

我试过了：

```
document.getElementById('geolocateMe').value = "Test"; 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:26:39.503

你的目标是改变按钮的文本？

```
document.getElementById('geolocateMe').innerText = "Test"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T00:34:29.723

尝试：

```
document.getElementById('geolocateMe').innerHTML = "Test"; 
```

# mysql - Mysql - 用 sql 重新排列列值

> ID：13830805
> 
> 赞同：1
> 
> 时间：2012-12-12T00:24:33.740
> 
> 标签：mysql, sql

我有一个包含几列的表，其中四个只是通用整数值（num1、num2、num3、num4），数据源具有随机顺序的这些值。在 php 中，我将获取行，将四个整数分配给一个数组，对数组进行排序，将排序后的值分配回去并保存该行。我想用 sql 来做这个。所以，像这样的桌子

```
id, num1, num2, num3, num4
1    6      2    9     1
2    12     3    8     4 
```

...

我希望结果是

```
id, num1, num2, num3, num4
1     1     2     6     9
2     3     4     8    12 
```

...

我已经用谷歌搜索了我能想到的所有内容并搜索了 Mysql 参考手册，但似乎找不到这样做的方法。有什么想法还是我应该只写一个 php 脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:00:28.877

好吧，这是一个非枢轴，一个排序和一个枢轴，但最后我听说不是在 mysql 中，所以也许

```
Set @position = 0
CREATE TEMPORARY TABLE OrderedUnpivot AS (
  Select Id,@position = @position + 1, @position % 4 as Position, Value From
  (
    Select Id,Position,Value From
    (
       select Id, 1 as Position, num1 as Value
       Union
       select Id, 2, num2
       union
       select Id, 3, num3
       union
       select Id, 4, num4
    ) depivot 
    Order by Id, Value
  )
Select ID,V1.Value as Num1, V2.Value as Num2, V3.Value as Num3, V4.Value as Num4 
From OrderedUnpivot v1
Inner join OrderedUnpivot v2 ON v1.Id = v2.ID
Inner join OrderedUnpivot v3 ON v1.Id = v3.ID
Inner join OrderedUnpivot v4 ON v1.Id = v4.ID 
```

凌乱但值得深思，哦，没有经过测试，甚至没有检查语法。

# sql - 使用 tableAdapter 更新 sql 和 vb.net 中的最后一条记录

> ID：13830808
> 
> 赞同：0
> 
> 时间：2012-12-12T00:24:49.097
> 
> 标签：sql, vb.net

我有那个表：exitAndEnter 和列 id，exitHour

我想做这样的事情：

```
 update exitAndEnter
    set  exitHour=?
    where id=? AND (exitHour=LAST(exitHour) from enterAndExit) 
```

我希望仅当它是请求的 id 中的最后一条记录时才更新 exitHour

我希望我正确地解释了我自己

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T00:38:41.680

我假设“id”字段是自动递增的，如果 id 是 max() 或最后一条记录，“exitHour”将被更新

```
update exitAndEnter
    set  exitHour=?
    where exitHour in(select max(exitHour) from exitAndEnter where id=?) 
```

# javascript - 如何使用 jQuery 正确克隆按钮（和其他东西）？

> ID：13830810
> 
> 赞同：2
> 
> 时间：2012-12-12T00:24:59.560
> 
> 标签：javascript, jquery, html, jquery-ui

看看这个例子：http: [//jsfiddle.net/9NXHq/15/](http://jsfiddle.net/9NXHq/15/)

它从一个通过 HTML 定义的按钮开始。然后我使用 jQuery 克隆该按钮，更改文本，并将其添加到原始按钮之后。注意到新按钮的显示是如何混乱的吗？但是，当您单击导致图标更改的按钮时，它会自行清理！克隆已经被 jQueried 的元素的正确方法是什么？

例如，想象一个数据列表和一个“添加”按钮。单击添加克隆一整行数据（例如，来自隐藏的模板行），其中包括 jQueried 元素，例如按钮、自动完成等。如何“重组”这个新行中的元素以确保它们正常工作?

**HTML**

```
<a id="btn">This is a button.</a>​ 
```

**CSS**

```
/* Standard jQuery UI (1.8.16 in this case). */ 
```

**JavaScript**

```
/* Standard jQuery (1.7.1 in this case). */

var btn = $("a#btn");
var btn2 = null;

btn.button({ icons: { primary: "ui-icon-plus" } });
btn.click(function ()
{    
    $(this).button({ label: "Clicked!", icons: { primary: "ui-icon-check" } });
});

btn2 = btn.clone();
btn2.click(function ()
{    
    $(this).button({ label: "Clicked! (2)", icons: { primary: "ui-icon-check" } });
});                   
btn2.text(btn2.text() + " (2)");
btn2.insertAfter(btn);

//Need to re-constitue btn2 as a button.
btn2.button(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T22:14:11.587

我记得自己尝试过这样做。这是我解决的解决方案。

```
// Get source buttons options.. for icons and stuff. 
var btn_options = btn.button('option');

// Clone the button, change the ID, and re-init the button. 
var btn2 = btn
  .clone()
  .attr("id", "btn2")
  .button(btn_options); 
```

我尝试了 .clone(true) 但它以前一个的所有绑定事件结束。.button() 只是做了太多的事情才能 .clone 它，我发现复制设置并重新初始化它更容易。

这是小提琴：http: [//jsfiddle.net/9NXHq/23/](http://jsfiddle.net/9NXHq/23/)

# php - 广泛的接口实现（和通用设计模式帮助）

> ID：13830816
> 
> 赞同：0
> 
> 时间：2012-12-12T00:25:20.473
> 
> 标签：php, design-patterns, interface

[我的问题与接口实现（接口隔离原则）](https://stackoverflow.com/questions/7852418/interface-implementation-interface-segregation-principle)密切相关，但我非常感谢您提供更多建议。

我有两个提供邮资报价的邮资 API——唯一的共同点是肥皂。我已经编写了我的应用程序代码来与这些 API 进行交互，方法是编写一个“邮资驱动程序”接口，这两个封装的 API 都实现了。然后我使用一个“邮资计算器”类，该类通过它们的通用接口使用这些“驱动程序”，以便在不知道具体如何完成的情况下计算邮资成本。

我的问题是，这些 API 是如此不同（一个需要作为方法参数传入的凭据，而另一个使用 xml 文件作为凭据，一个计算总重量的邮费，而另一个计算包裹详细信息），我不确定是否使用抽象我的代码的接口是最好的方法吗？开始感觉将条件代码编码到“邮资计算器”类中，直接使用 API 会更干净、更优雅（尽管不太灵活和面向未来）。

任何的建议都受欢迎。顺便说一句，我正在用 PHP 编写，但我正在寻求更多“一般原则”的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:00:57.890

我同意 Wrikken 的观点，您始终可以将身份验证接口传递给邮资接口。然后，您只是将差异传递给真正不同的班级。

同样，您可以创建用于计算邮资的接口，例如 IPostageSpecificationByWeight 和 IPostageBy?。然后您可以将它们注入到您的服务使用的基类或接口中。

您可以使用在派生类中实现身份验证方法和计算方法的抽象类来处理相同的概念，其中使用它们的常用方法在抽象类中，然后您只有一个接口。有很多方法可以将其抽象出来，而这些只是其中的几个选项。

# objective-c - 使用核心图形的背景颜色

> ID：13830817
> 
> 赞同：4
> 
> 时间：2012-12-12T00:25:30.257
> 
> 标签：objective-c, ios, cocoa-touch, core-graphics

我的drawRect中有以下代码：

```
CGContextSetFillColorWithColor(context, [UIColor redColor].CGColor);
CGContextFillPath(context); 
```

我基本上想将此视图的背景设置为红色。但是上面的代码没有这样做。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T00:29:12.507

更改视图背景颜色的更简单方法是：

```
view.backgroundColor = [UIColor redColor]; 
```

或者，如果您在视图控制器中：

```
self.view.backgroundColor = [UIColor redColor]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T00:47:02.990

你可能想要：

```
CGContextSetFillColorWithColor(context, [UIColor redColor].CGColor);
CGContextFillRect(context, self.bounds); 
```

`CGContextFillPath`填充一条“路径”，您必须首先使用一系列其他调用来构建它，例如`CGContextAddRect`and `CGContextAddArc`。填充矩形更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T00:51:41.517

```
[[UIColor redColor] setFill];
CGContextRef ref= UIGraphicsGetCurrentContext();
CGContextFillRect(ref, self.bounds); 
```

# ios - 使用 Dropbox 选择器在 ipad 应用程序中导入 pdf

> ID：13830819
> 
> 赞同：1
> 
> 时间：2012-12-12T00:25:55.950
> 
> 标签：ios, pdf, ios6, dropbox, dropbox-api

您好，我正在构建一个 iPad 应用程序，我想在其中使用 Dropbox 在我的应用程序中获取我的 pdf 文件。现在我已经尝试了 dropbox sdk，但没有让它工作。我看到他们有一个特殊的保管箱选择器，但仅限于网络。基本想法是获得一个选择器，我可以在其中选择我想在我的自定义 ipad 阅读器中阅读的 pdf。我的问题是之前是否有人已经这样做过，或者是否有人有一些建议我可以从哪里开始？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T06:29:32.850

那么你不需要任何特殊的选择器模块。Dropbox API 在选择文件及其类型方面非常丰富。使用此代码

```
- (void)restClient:(DBRestClient*)client loadedMetadata:(DBMetadata*)metadata 
{
    NSMutableArray *pathArray = [[NSMutableArray alloc] init];
    for (DBMetadata *child in metadata.contents) {
        if (!child.isDirectory) {
            NSString *fileExtension = [[child.filename componentsSeparatedByString:@"."] lastObject];
            if ([fileExtension compare:@"pdf" options:NSCaseInsensitiveSearch] == NSOrderedSame) {
             [pathArray addObject:child];
             }
        }
        else {
            [pathArray addObject:child];
        }
    }
} 
```

此 pathArray 仅包含 PDF 文件的列表。检查一下，如果你没有得到任何东西，请告诉我。祝你编码愉快。！！干杯。！！

# scala - scalaquery 中为 SQLite 生成的不受支持的 length() 函数

> ID：13830826
> 
> 赞同：2
> 
> 时间：2012-12-12T00:27:06.307
> 
> 标签：scala, scalaquery, slick

当尝试使用 scalaquery 检索 SQLite 数据库中文本列的长度时，它会生成错误的 SQL。我明白了：

```
SELECT "t1"."title" FROM "GoodPages" "t1" WHERE ({fn length("t1"."title")} > 65) 
```

当查询真的应该是

```
SELECT "t1"."title" FROM "GoodPages" "t1" WHERE length("t1"."title") > 65 
```

`for`我用于获取此查询的comp 是

```
for (f <- Foo if f.title.length > 65) yield f.title 
```

我拥有的表定义是

```
object Foo extends Table[(Int,String)]("Foo") {
  def id = column[Int]("id")
  def title = column[String]("title")
  def * = id ~ title
} 
```

似乎 scalaquery 只是生成了错误的`length()`函数，但我找不到代码中发生这种情况的位置，也没有在 Internet 上找到任何关于此的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:25:14.263

The generated SQL you see uses [JDBC escape syntax](http://docs.oracle.com/javadb/10.5.3.0/ref/rrefjdbc1020262.html), more precisely [JDBC escape syntax for fn keyword](http://docs.oracle.com/javadb/10.3.3.0/ref/rrefjdbc88908.html). This syntax can be used by JDBC drivers but unfortunately is not supported by the SQLite driver.

Slick 1.0.0 knows this as the following snippet from `SQLiteDriver` suggests

```
case Apply(j: Library.JdbcFunction, ch) if j != Library.Concat =>
  /* The SQLite JDBC driver does not support ODBC {fn ...} escapes, so we try
   * unescaped function calls by default */
  b"${j.name}("
  b.sep(ch, ",")(expr(_, true))
  b")"
case s: SimpleFunction if s.scalar =>
  /* The SQLite JDBC driver does not support ODBC {fn ...} escapes, so we try
   * unescaped function calls by default */
  b"${s.name}("
  b.sep(s.nodeChildren, ",")(expr(_, true))
  b")" 
```

If Slick 1.0.0 doesn't work for you we can probably find another solution. Let me know.

# c++ - c++ 打开具有非拉丁名称的文件

> ID：13830829
> 
> 赞同：2
> 
> 时间：2012-12-12T00:27:25.450
> 
> 标签：c++, linux, qt, stl, fstream

我有这样的文件。我只想正确打开非拉丁名称的文件。
对于仅具有非拉丁名称的拉丁名称的文件，我没有任何问题。

![在此处输入图像描述](../Images/bf44087f083d92c46f3adaeaebc35bc8.png)

我使用 QDir 扫描目录，并在 QString 中保存名称，所以它在里面保存得很好。

但是打开文件存在瓶颈。
它让我不想使用 QFile，我只能使用 C++ 流（更优选）或 C 文件。

当我想打开文件时，我这样做：

```
fstream stream(source.toStdString().c_str(),ios_base::in | ios_base::binary); 
```

之后我检查尝试是否成功：

```
 if(!stream.is_open())
   { cout<<"file wasn't opened " <<source.toStdString().c_str())<<"\n";
     return false; // cout was redirected to file // just a notice
   } 
```

我进入我的日志文件：
文件未打开 /home/sh/.mozilla/firefox/004_??????? - ???? - ?????.mp3

它不适用于任何具有非拉丁名称的文件，并且它适用于每个具有拉丁名称的文件。

我知道可以使用 QFile 跳过这个问题。

但我想知道，是否有可能在没有第三方库的情况下完成它，或者是否有其他方法可以解决它？

提前感谢您的任何提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T00:45:54.843

`toStdString()`当你调用你的 QString时，事情就出错了。`QTextCodec::codecForCStrings()`如果已设置，它将基于 , 转换内容，否则将使用 latin-1。Latin-1 会将您的非拉丁字符折叠为“？”。

使用`source.toLocal8Bit().data()`or`source.toUtf8().data()`代替可能会做你想做的事，但如果做不到，你需要处理 QTextCodecs 以获得正确的 8 位编码。

# php - 无法在 Cygwin 上加载动态 PHP 扩展

> ID：13830838
> 
> 赞同：0
> 
> 时间：2012-12-12T00:28:19.643
> 
> 标签：php, cygwin

我已经在 Cygwin 上成功编译了 PHP 5.4.9，但现在我无法动态加载 MongoDB 扩展。这是 PHP CLI 输出：

```
$ php -v
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/local/lib/php/extensions/no-debug-non-zts-20100525/mongo.dll' - No such file or directory in Unknown on line 0 
```

但是，它肯定存在：

```
$ ls -l /usr/local/lib/php/extensions/no-debug-non-zts-20100525/mongo.dll
-rwxr-xr-x 1 Linker None 204288 Dec 12 02:12 /usr/local/lib/php/extensions/no-debug-non-zts-20100525/mongo.dll 
```

DLL 文件已从官方 MongoDB GitHub 存储库下载。它实际上重命名为 php_mongo-1.3.1-5.4-vc9-nts.dll。奇怪的时刻：当我尝试用 x86_64 版本（我的操作系统版本）替换它时 - 它说 DLL 的 exec 格式错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T01:26:06.567

如果您下载了扩展程序，则它被构建为使用 Visual Studio 编译的 PHP 作为本机 windows dll 运行。使用 cyhwin-gcc 编译的 PHP 无法使用。

要么自己将扩展编译成 cygwin .so，要么使用使用 Visual Studio 编译的 PHP（首选后者）

# ruby - 如何在 Ruby 中创建/提取变量/散列到当前绑定中？

> ID：13830839
> 
> 赞同：2
> 
> 时间：2012-12-12T00:28:42.823
> 
> 标签：ruby, variables, binding, hash, extract

如何在 Ruby 中创建/提取变量/散列到当前绑定中？例如，以下结果为`NameError`：

```
class Hash
  def extract(b)
    self.each do |key, value|
      bind = b.eval <<-END
        #{key} = nil
        proc { |value| #{key} = value }
      END
      bind.call(value)
    end
  end
end

hash = {:a => 1}
hash.extract(binding)
puts a 
```

值得注意的是，每次调用都`Kernel#binding`返回一个不同的 `Binding`对象实例，这让我觉得我并没有真正改变调用者的绑定`Hash#extract`。例如，以下工作：

```
class Hash
  def extract(b)
    self.each do |key, value|
      bind = b.eval <<-END
        #{key} = nil
        proc { |value| #{key} = value }
      END
      bind.call(value)
    end
  end
end

hash = {:a => 1}
b = binding
hash.extract(b)
eval('puts a', b) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:58:48.980

我不确定在将当前绑定传递给方法（例如，下面）之后，如何使*局部变量出现在调用者的执行上下文中。*`#export_to`但是可以做类似的事情，表面上会达到相同的效果：

```
class Hash
  def export_to(o)
    each do |key, value|
      o.define_singleton_method(key) { value }
    end
  end
end

hash = {:a => 1}
hash.export_to self
puts a 
```

请注意，`self`正在传递而不是`binding`.

另请注意，这里的常见模式是设置实例变量而不是方法，在这种情况下`puts`，以后的代码现在可以引用`@a`.

# iis-7.5 - IIS摘要认证、哈希算法

> ID：13830840
> 
> 赞同：0
> 
> 时间：2012-12-12T00:28:52.933
> 
> 标签：iis-7.5, digest-authentication

我正在尝试为 WebApi 实现我自己的服务端身份验证组件，该组件可以对 webclient 发送的散列用户名/密码执行匹配，如[如何使用 HttpWebRequest 进行摘要身份验证？](https://stackoverflow.com/questions/3172510/how-can-i-do-digest-authentication-with-httpwebrequest)

这篇文章 ( [http://lbadri.wordpress.com/2012/08/10/digest-authentication-with-asp-net-web-api-part-1/](http://lbadri.wordpress.com/2012/08/10/digest-authentication-with-asp-net-web-api-part-1/) ) 建议 IIS Digest Authentication 使用 MD5 进行散列。

是否有任何官方 IIS 文档可以证实这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T00:32:14.633

是的，它们是官方文档，将其描述为使用 MD5

“摘要式身份验证通过网络传输凭据作为 MD5 哈希” - [Microsoft Docs](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/809552a3-3473-48a7-9683-c6df0cdfda21.mspx?mfr=true)

# unix - Unix 文件权限

> ID：13830847
> 
> 赞同：-3
> 
> 时间：2012-12-12T00:29:34.640
> 
> 标签：unix, file-permissions

我有一个`xyz`权限为 440 的文件，所有者为“a”，组为“b”。

b 组包含来宾用户

现在我是用户 C，我想读取文件 xyz 的内容。有什么可能的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T00:33:32.347

您应该只将用户 C 添加到组 B。

这是我找到的最好的资源：[http ://www.cyberciti.biz/faq/howto-linux-add-user-to-group/](http://www.cyberciti.biz/faq/howto-linux-add-user-to-group/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T01:13:38.937

是的，这是可能的，您可以使用[访问控制列表](http://beginlinux.com/server_training/server-managment-topics/1038-ubuntu-804-access-control-lists)来允许用户或组访问某些文件或目录。

• 允许用户**c****读取**文件**xyz**的示例：

```
setfacl -m u:c:r /home/a/xyz 
```

> **-m**是修改 acl，“ u **”**是专门命名的用户，“ **c** ”，后面是权限和文件。

• 或允许组**b****读取、写入、执行**文件**xyz**的示例：#

```
setfacl -m g:b:rwx /home/a/xyz 
```

> 如果您想配置一个目录，以便创建的所有文件都将继承该目录的 acls，您可以在组之前使用“ **d** ”选项。

• 要删除权限，请使用“ **x** ”选项。

```
setfacl -x g:b /home/a/xyz 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T00:31:56.137

您可以将用户 C 放入组 B。

# jquery - 在 mvc 视图中以弹出模式显示验证错误

> ID：13830854
> 
> 赞同：0
> 
> 时间：2012-12-12T00:31:00.013
> 
> 标签：jquery, twitter-bootstrap, asp.net-mvc-4, modal-dialog

我有一个主视图，我在其中将部分视图称为“添加”。这个添加视图是一个带有提交按钮的表单，我将它显示为一个模式弹出框。要提交表单，我正在对操作方法进行 ajax 调用。现在，我需要两件事 - 1\. 如果发布的数据有效，则显示成功消息并关闭模式 2\. 如果有任何验证错误，请在突出显示字段的同时在模式弹出窗口中显示它们。我正在使用 twitter 引导程序来显示模式。阿贾克斯调用：

```
 $.ajax({
        url: urlForSavingAdd,
        data: JSON.stringify(dataToSend),
        cache: false,
        type: 'POST',
        dataType: 'application/JSON',
        contentType: "application/json;charset=utf-8",
        success: function (data, status) {
                $('#divAddNew').html(data.Message);
                $('#divAddNew').fadeOut();
                },
        error: function (xhr, ajaxOptions, thrownError) {
               var errorMessage = xhr.responseText;
               $('#divAddNew').html(errorMessage);
              $('#divAddNew').show();
        }
    }); 
```

控制器 -

```
[HttpPost]
    public JsonResult Add(SomeModel add)
    {
        if (ModelState.IsValid)
        {
            //Save item to DB
                return Json(new
                {
                   Message = "Record saved successfully to the Database."
                });
         }
        else
        {
                return Json(new
                    {
                   Message = GetModelStateErrors(this.ModelState);
                     });
         }
    } 
```

# pdf-generation - Acrobat Pro：“优化扫描文档”批量无提示

> ID：13830855
> 
> 赞同：1
> 
> 时间：2012-12-12T00:31:30.237
> 
> 标签：pdf-generation, acrobat

我如何使用 Acrobat XI Pro（或任何其他软件）批量优化数千个 PDF 文件而不提示每个文件，因为 Acrobat XI Pro 的批处理模式现在似乎可以执行（其“添加文档描述”，然后是“优化扫描的 PDF”）通过“另存为”）。这些文档被错误地以 600DPI 全彩色扫描，但本应以 300DPI 进行黑白扫描。

# c# - 在 WCF 中写入实时流以响应

> ID：13830857
> 
> 赞同：1
> 
> 时间：2012-12-12T00:31:47.800
> 
> 标签：c#, wcf, http-streaming

我找不到我正在寻找的确切示例。
我有一个 REST/WCF 端点，它接受 a`Stream`并返回一个`Stream`. 我能够对请求进行“实时”流式传输，这意味着传入流在客户端写入时被服务读取（使用服务中的共享缓冲流）。

我想在传出流上实现同样的效果，但是我发现的所有示例都将所有数据写入本地流**，然后**将其返回给客户端。

如何访问响应的底层流并开始写入它，允许客户端开始读取它而不退出我的服务方法？
甚至可以通过 WCF 和 HTTP 流实现我所需要的吗？

# capybara - Capybara：找不到 xpath

> ID：13830859
> 
> 赞同：0
> 
> 时间：2012-12-12T00:31:49.000
> 
> 标签：capybara

即使对于简单的场景，我也无法使 xpath 与 capybara 一起使用，例如我有：

```
<div id="drawer-container" role="application" class="drawers-2">
<div class="drawer" id="drawer-1">
    <h2 role="tab" aria-controls="tabpanel-highlights">
    <a href="#" class="drawer-toggle" role="button">
        <span>Featured</span>
        <span class="context blq-hide">section collapsed</span>
    </a>
    </h2> 
```

但是当我用 Capybara 尝试以下操作时：

```
find(:xpath, "div[@id='drawer-1' and @class='drawer']").click 
```

然后它失败说：

```
Unable to find xpath "div[@id='drawer-1' and @class='drawer']" (Capybara::ElementNotFound) 
```

我读到这可能是由于 webrat，但我没有那个宝石。我的水豚版本是 2.0.1

知道什么可能导致这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T04:04:52.377

xpath 必须说明从哪里开始。无论 div 标签在文档中的什么位置，您都可能希望找到它，因此您应该以“//”开头的 xpath：

```
find(:xpath, "//div[@id='drawer-1' and @class='drawer']").click 
```

请注意，虽然上述 xpath 将修复您的异常，但您可能无法获得所需的结果。您可能想改为单击链接：

```
find(:xpath, "//div[@id='drawer-1' and @class='drawer']/h2/a").click 
```

# java - 使用 JInput

> ID：13830862
> 
> 赞同：0
> 
> 时间：2012-12-12T00:32:10.967
> 
> 标签：java, jinput

我做了很多研究，但我似乎找不到 JInput 的基本代码来获取控制器的 X 和 Y 轴。另外，要“选择”/设置您的控制器，您如何过滤掉鼠标和键盘？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:17:29.930

Java 游戏论坛上的入门指南应该包含您需要的信息。

[JInput 论坛主页](http://www.java-gaming.org/boards/jinput/27/view.html)

# jquery - CSS3 rotate3d 不准确

> ID：13830872
> 
> 赞同：4
> 
> 时间：2012-12-12T00:33:09.797
> 
> 标签：jquery, html, math, css

有谁知道由 css3 转换属性产生的不准确性的解决方案：（`rotate3d`或`rotateX`, `rotateY`, `rotateZ`）？

该函数通过将旋转角度应用于矩阵来计算元素位置`[cos(angle) sin(angle) -sin(angle) cos(angle) someOtherTrigForZ(angle) someOtherTrigForZ(angle)]`..

我正在使用这些 css3 属性创建一个立方体，如果您检查[这个 jsfiddle](http://jsfiddle.net/gE3FL/)`id=cube`中的元素（在使用箭头键旋转立方体几次之后）（查看计算样式），您可以看到 rotate3d 矩阵不适用任何类型对计算样式进行数字固定（某种舍入方法）。

```
-webkit-transform: matrix3d(0.7, 0, 0, 0, 0, 0.04943792709533707, -0.6982520256787774, 0, 0, 0.6982520256787774, 0.04943792709533707, 0, 0, 0, 0, 1); 
```

我得到的结果是绘制不佳的元素没有对齐；如果您查看立方体表面的边界，这是肉眼可见的。

有谁知道平滑/圆三角计算的方法，这样我的边界就不会起伏不定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T01:55:57.353

在您链接到的 jsfiddle 中，立方体面的 css 类将边框设置为`border:1px solid black;`这实际上是在面的每个边缘上添加和额外的像素。这是一个额外的 2px 添加到宽度和高度。我认为这是造成错位的原因。如果将 css 属性添加`-webkit-box-sizing: border-box;`到人脸类，则应更正错位。

# syntax - 为什么有些 Vim 映射包括 冒号后？

> ID：13830874
> 
> 赞同：45
> 
> 时间：2012-12-12T00:33:18.603
> 
> 标签：syntax, vim

我正在尝试找出映射命令的语法，例如`onoremap`vim 中的 。

特别是，我对手册中的这一行感到困惑，关于使用`<C-U>`：

> CTRL-U ( `<C-U>`) 用于删除 Vim 可能插入的范围。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-12-12T02:10:14.420

这不是`onoremap`命令语法的一部分，它解释了特定映射的作用。该映射是：

```
onoremap <silent> F :<C-U>normal! 0f(hviw<CR> 
```

因此，当在`F`操作符挂起时使用密钥时，vim 将用`onoremap`命令的下一个参数中的位替换它。以`:`开始`ex`模式命令开始。如果在使用映射时有视觉选择，vim 将自动插入范围`'<,'>`，以便将以下`ex`命令应用于视觉选择，使命令行看起来像：

```
:'<,'> 
```

映射中的`<C-U>`告诉 vim 在`:`输入之后应该使用`Control`+组合来清除命令行，消除自动插入的范围，使命令行看起来像：`U`

```
: 
```

然后使用映射的其余部分。

您可以通过使用`V`开始逐行视觉选择，然后`:`开始输入命令来亲眼看到这一点。范围将显示出来，然后您可以使用`Control`+`U`清除它，就像示例映射一样。

包含该映射的 vim 帮助部分解释了它的其余部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-01T23:02:44.850

Ctrl-U Vim-map 的操作与终端命令行的相同快捷方式相同。检查：[https ://www.howtogeek.com/howto/ubuntu/keyboard-shortcuts-for-bash-command-shell-for-ubuntu-debian-suse-redhat-linux-etc/](https://www.howtogeek.com/howto/ubuntu/keyboard-shortcuts-for-bash-command-shell-for-ubuntu-debian-suse-redhat-linux-etc/)

避免重新映射其中的少数（例如在终端上中断进程），但可以重新映射大多数（例如 Ctr-A 或 Ctrl-X）。如果您的 VIM 不是终端设备（如 gVim），您可以不加考虑地重新映射它们。

顺便说一句：Ctrl-Shift-Letter 就像 VIM 终端的 Ctrl-Letter 映射。

一些终端捷径：

```
 " copy-paste 
    " <C-S-c> copy
    " <C-S-v> paste (or replace visual selected)
  " manage running processes
    " <C-c>   break out of a command or process on a terminal. This will stop a running program immediately.
    " <C-z>   send a running program in the background
    " <C-d>   If you are using an SSH connection, it will be closed. If you are using a terminal directly, it will be closed
  " control what appears on the screen
    " <C-l>   clear terminal screen 
    " <C-s>   Stop all output to the screen. This is particularly useful when running commands with a lot of long, verbose output, but you don’t want to stop the command itself with Ctrl+C.  
    " <C-q>   Resume output to the screen after stopping it with Ctrl+S.
  " Moving the Cursor
    " <C-a>   or Home: move cursor to beginning of line 
    " <C-e>   or End:  ""             end       ""         
    " <C-xx>   Move between the beginning of the line and the current position of the cursor. This allows you to press Ctrl+XX to return to the start of the line, change something, and then press Ctrl+XX to go back to your original cursor position. To use this shortcut, hold the Ctrl key and tap the X key twice.
    " <A-b>   go left 1 word 
    " <C-b>   ""        char (like left-arrow) 
    " <A-f>   go right 1 word 
    " <C-f>   ""         char (like right-arrow) 
  " Cutting and Pasting
    " <C-u>   erases everything from the current cursor position to the beginning of the line
    " <C-k>   erases everything from the current cursor position to the end of the line
    " <C-w>   erase the word preceding to the cursor position. If the cursor is on a word itself, it will erase all letters from the cursor position to the beginning of the word.
    " <C-y>    paste the erased text that you saw with Ctrl + W, Ctrl + U and Ctrl + K shortcuts  
  " Deleting Text
    " <C-d>    or Delete: Delete the character under the cursor
    " <A-d>    Delete all characters after the cursor on the current line.
    " <C-h>    Backspace: Delete the character before the cursor.
  " Fixing Typos
    " <A-t>   Swap the current word with the previous word.
    " <C-t>   Swap the last two characters before the cursor with each other. You can use this to quickly fix typos when you type two characters in the wrong order.
    " <C-_>   Undo your last key press. You can repeat this to undo multiple times.
  " Capitalizing Char
    " <A-u>   Capitalize every character from the cursor to the end of the current word
    " <A-l>   Uncapitalize every character from the cursor to the end of the current word
    " <A-c>   Capitalize the character under the cursor. Your cursor will move to the end of the current word.
  " Command History
    " <C-p>    like up-arrow: press it repeatedly to keep on going back in the command history 
    " <C-n>    like down-arrow: use this shortcut in conjugation with Ctrl+P. Ctrl+N displays the next command 
    " <A-r>    revert any changes to a command you’ve pulled from your history if you’ve edited it.
    " <C-r>    search in your command history. Just press Ctrl+R and start typing. If you want to see more commands for the same string, just keep pressing Ctrl + R.
    " <C-o>    Run a command you found with Ctrl+R  
    " <C-g>    Leave history searching mode without running a command 
```

# git - git挂在推送上

> ID：13830875
> 
> 赞同：7
> 
> 时间：2012-12-12T00:33:19.640
> 
> 标签：git, github, git-push

我无法推送到 github。我能够推送一些小的更改，但是这一次，它在写下这个之后挂起：

```
git push origin master
Counting objects: 22, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (12/12), done.
Writing objects: 100% (12/12), 1.51 KiB, done.
Total 12 (delta 8), reused 0 (delta 0) 
```

在我的 Ubuntu 进程管理器上，当我尝试推送某些东西时，我看到 ssh 挂起，它是：ssh git@github.com git-receive-pack 'xxx/yyy.git'

当我尝试在终端上直接运行此命令时，现在它在写入以下内容后挂起：

```
0078...7d4 refs/heads/master report-status delete-refs side-band-64k quiet ofs-delta
0000 
```

所有其他的东西都很好，但我不能推动。可能是什么原因？

附加信息：我重新创建了 git 文件并将远程从 SSH 更改为 HTTP。现在，当我尝试推送时出现此错误：

```
Counting objects: 17, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (9/9), done.
Writing objects: 100% (9/9), 1.19 KiB, done.
Total 9 (delta 6), reused 0 (delta 0)
error: RPC failed; result=52, HTTP code = 0
fatal: The remote end hung up unexpectedly
fatal: The remote end hung up unexpectedly
Everything up-to-date 
```

额外信息 2：我已经对其进行了数小时的测试，看起来我的网络连接是问题所在。我尝试从另一个连接推送，效果很好。这背后的原因可能是什么？顺便说一句，调制解调器的防火墙被禁用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-04-21T15:25:29.043

在过去的 5 个小时里，我一直在尝试解决类似的问题。首先，您是通过隧道还是 VPN 连接运行它？

事实证明，隧道的 MTU（最大传输单元）可能配置错误，因为网络路径中间的某些路由器只能支持较低的 MTU，但 VPN/隧道软件不知道这一点，导致丢包.

因此，快速的答案是尝试降低连接的 MTU：

```
sudo ifconfig eth0 mtu 1300 
```

这里我设置了`eth0`接口的 MTU，替换成你实际用来访问 git 服务器的接口。默认 MTU 通常为 1500。

对于 OpenVPN，我必须更新`tun0`界面。在 OpenVPN 配置中有一个更好/更健壮的方法来做到这一点：使用`link-mtu <n>`and`mssfix`选项。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-01T10:55:13.783

在我的情况下，问题与存储库的访问权限有关。我有只读访问权限，添加写入权限后，问题解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-09T09:35:47.423

我也发生了同样的事情，原因是接收端的磁盘 100% 满。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-01-20T16:46:41.560

首先运行以下命令：

```
env | grep SSH_ASKPASS 
```

如果您一无所获，则必须设置该值。如果您使用的是 GNOME，请`gnome-ssh-askpass.sh`通过以下操作找到通常可以找到的位置：

```
find / | grep gnome-ssh-askpass 
```

它通常在`/etc/profile.d`目录中找到。通常，这会自动加载，但由于某种原因它没有。所以运行以下命令：

```
source /etc/profile.d/gnome-ssh-askpass.sh 
```

（或者，您可以只`chmod +x`使用文件并直接运行它，这取决于您）

完成后，验证是否有值`env | grep SSH_ASKPASS`，然后 git push 将再次工作。

如果您没有找到该`gnome-ssh-askpass.sh`文件，请执行 a`yum search ssh-askpass`并安装该软件包（通常`yum install openssh-askpass`）

对于`apt-get`，假设您使用的是 gnome，请执行类似的操作，但如果是 kde，那么可能会有一个`kde-ssh-askpass`??

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-12T00:39:26.143

检查您的网络连接是否在上传时太慢。也许你只是需要时间。您能否监控您的网络连接以查看您是否正在向上游发送数据？

# html - postMessage 到对象标签中

> ID：13830884
> 
> 赞同：0
> 
> 时间：2012-12-12T00:34:24.397
> 
> 标签：html, postmessage, object-tag

我试图让对象内的 html 响应我的 postMessage，但我无法正确引用。

我试过了

```
var object = $("#test_object").get(0).contentWindow;
object.postMessage("run","*"); 
```

这适用于 iframe。

但是因为我决心使用对象标签。有没有办法通过 postMessage ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T15:14:19.680

不，postMessage 仅适用于 iframe 和窗口/选项卡。

# java - 在特定条件下停止当前正在运行的线程，并调用 finally 块

> ID：13830887
> 
> 赞同：0
> 
> 时间：2012-12-12T00:34:54.503
> 
> 标签：java, multithreading

我有一个很长的方法并且有很多内部循环，如果满足某个条件，在内部循环的某个时刻，我希望线程被终止，但我也希望调用 finally 块，所以清理也会发生。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:37:39.937

`return;`当你想停下来的时候打电话。这将离开循环并运行 finally（只要带有*return*语句的循环*在*`try`块内）。

例如

**伪代码：**

```
public void run () {
  try {
    loop {
        loop {
           if (condition) return;
        }
    }
  } finally {
    // always run
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T00:37:52.337

请记住，“终止线程”实际上只是意味着 - 或者应该意味着！ - run() 方法退出。将 finally 放在循环之外，作为线程/Runnable 的 run() 方法中的最后一件事。

# php - 将背景代码与 HTML 显示代码分开的好方法是什么？

> ID：13830891
> 
> 赞同：2
> 
> 时间：2012-12-12T00:35:18.567
> 
> 标签：php, html, templates, logic, file-structure

这是我如何拥有文件以及它们做什么的粗略图片。

*开头的index.php*显示开始的 HTML 标记并包含 header.php（链接的 div），最后包含显示结束 HTML 标记的 footer.php。在这之间，index.php 从 GET 参数、POST 表单等获取所有用户输入，并从数据库（*functions.php 和 mysql_functions.php*）获取数据。为了显示正文内容，它包含一个基于用户请求的任何页面的 PHP 模板文件，例如：*index.php?p=page1*包括*template_page1.php*。

要在模板文件中显示的信息存储在一个数组中，而不仅仅是普通变量，所以在模板中我有如下所示的内容：

```
<title><?php echo $content['page_title']; ?></title> 
```

和

```
<div>
    <?php
        foreach($name as $content['names']){
            echo '<p>'.$name.'</p>';
        }
    ?>
</div> 
```

模板文件中没有真正繁重的代码，只有循环和基本的 if 语句。繁重的工作在 index.php 和函数文件中完成。

有时我觉得它可能很笨拙和凌乱，不是一种好的做事方式。前几天我查看了一个模板系统（Code Igniter），它似乎很复杂，有这么多不同的文件需要更改以显示一些内容。

我可以对我的做法提出一些批评和一些优点/缺点，以及我可以如何更好地做到这一点的一些想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T00:48:34.487

你是对的。将大量代码堆叠到一个文件中并不是一个好习惯。但是，如果您是 PHP 的初学者，则不必太担心它。我无法在脑海中完全描绘出您的文件结构，但我想我有一个想法。

尝试将每个 PHP 函数和诸如此类的东西放在其他文件中，并在 index.php 中使用尽可能少的 PHP。不过，请确保您没有太多不必要的文件（每个事件/功能一个）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T04:36:05.343

至少有一个用 php 完成的模板工具包的 beta 版本。但是perl中的原版本质上是一种不同的语言。它相当强大。

原件在 CPAN 上。我认为当前版本是 2.25。

我的网络构建系统的内容和标记几乎完全分离。

这是添加内容之前的基本页面：

```
[% PROCESS header.inc 
    Title = "Sherwood's Forests -- Seedling Sales" 
    Desc = "Sherwood's Forests Pre-season orders for little Trees."
%]

<DIV id="content">
[% FILTER multimarkdown %]

# Seedling Sales 2014

<div markdown="1" class=picr>

![Picture alternate text][/base-absolute/path/to/image.jpg]

</div>

Please be patient

#### This file is still germinating 

[% PROCESS Copyright.inc %][% END %]

</div>
[% INCLUDE footer.inc %] 
```

所有内容都在 FILTER 行和底部内容之间用 markdown 编写。允许我在列的右侧浮动图像。CSS 完全是流动的，因此屏幕在 iPhone 上仍然可用（几乎不可用）。

大部分魔法都在 header.inc 中。它读取文件fileindex.txt，它本质上是整个网站的菜单树。没有爪哇。所有静态网站。

Fileindex.text 看起来像这样：

```
ABBAB:f:/Home/Business_Stuff/Inventory.html:3:Inventory.html:Inventory
ABCAB:f:/Home/Business_Stuff/Ordering.html:3:Ordering.html:Ordering
ABDAB:f:/Home/Business_Stuff/Prices.html:3:Prices.html:Prices
ABJAB:f:/Home/Business_Stuff/Business_Stuff.html:3:Business_Stuff.html:Business Stuff
ADAAA:d:/Home/Services:2:Services:Services
ADJAB:f:/Home/Services/Christmas_Trees.html:3:Christmas_Trees.html:Christmas Trees
ADKAB:f:/Home/Services/Custom_Growing.html:3:Custom_Growing.html:Custom Growing
ADLAB:f:/Home/Services/Nature_Walks.html:3:Nature_Walks.html:Nature Walks 
```

开头的字母汤决定了索引的排序顺序。d 或 f 是目录或文件。该数字是菜单层次结构中向下的级别数。然后是完整路径的文件组件。最后是用于链接名称的文本。其中一些是早期重写的冗余，但不值得修复。“不要优化它”。最后一个字段允许使用与文件名不同的链接名称。这个用的不多。

fileindex.txt 本身是由 perl 程序 MakeFileIndex 生成的。它使用两个信息源： find 的结果。在源代码树上运行，以及一个文件 tt2seq，该文件在菜单项的顺序上有可选的覆盖。

我想在我的网站上添加一个新页面。

将第一个文件复制到相应的目录。用我的新内容更改该文件的内容。如果它需要以非字母顺序出现，那么我必须向 tt2seq 添加行来控制它。运行 MakeFileIndex。运行 ttree -a（模板工具包中的实用程序）这将更新每个文件中的所有菜单项。

验证页面看起来像我想要的。如果不是，则重新编辑。为我刚刚编辑的文件重新运行 ttree。当我高兴时，同步到我的服务器。

最终的结果是，与写作所需的时间相比，我花在机械上的时间很少。

如果我决定重新安排站点，我只需在目录树中移动文件，然后重新构建。这不会修复内容块中的任何内部链接。

以这种方式制作的网站是[http://sherwoods-forests.com](http://sherwoods-forests.com)。这是一个老式的网站。重点是内容，而不是嘶嘶声。但它是生成静态页面的好系统。

# c# - 为什么单击button2时程序会重新启动？

> ID：13830892
> 
> 赞同：-4
> 
> 时间：2012-12-12T00:35:19.010
> 
> 标签：c#, winforms

每次我单击“否”按钮（此处为 button2_click）时，程序都会再次自行打开，我不知道为什么。

```
private void button2_Click(object sender, EventArgs e)
{
    Process game = new Process();

    game.StartInfo.FileName = "ShovelShovel.exe";
    game.Start();
} 
```

我认为它会启动游戏并关闭，但如果我单击按钮，它只会再次启动我的程序。如果我在该表单上单击“否”，那么我会得到一个巨大的未处理异常列表。

我是否这样做。关闭（）；或 Application.Exit(); 该程序仍会自行打开。

谁能告诉我为什么它会再次打开？反正我没有改变 Program.cs。

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T01:12:40.733

试试这个：（假设您正在使用的程序是“ShovelShovel Settings.exe”并且是“ShovelShovel.exe”的启动器）

```
//launch game
ProcessStartInfo startInfo = new ProcessStartInfo();
startInfo.FileName = "ShovelShovel.exe";
Process p = Process.Start(startInfo);

//close
this.Close(); 
```

甚至只是

```
Process.Start("ShovelShovel.exe"); 
```

如果这仍然在启动同一个应用程序，你要么路径错误，要么 exe 是相同的。

要仔细检查，为什么不进入目录并从 WindowsExplorer 手动执行“ShovelShovel.exe”。

# android - 在活动之间传递 ArrayList

> ID：13830894
> 
> 赞同：1
> 
> 时间：2012-12-12T00:35:27.180
> 
> 标签：android, android-intent, parcelable

我有一个活动，我将对象添加到实现 Parcelable 接口的 ArrayList 中。然后，我通过捆绑将此列表传递给另一个活动，但是当我尝试在新活动中打印列表的大小时出现以下错误：

> java.lang.RuntimeException：无法恢复活动 {com.example.test/com.example.test.SectionsActivity}：java.lang.NullPointerException

这是我添加到列表中的第一个活动：

```
 @Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    Toast.makeText(getApplicationContext(), l.getItemAtPosition(position).toString() + " added to order", Toast.LENGTH_SHORT).show();
    // add clicked item to orderData....
    MenuItem m = (MenuItem) l.getItemAtPosition(position);
    // create new item
    orderData.add(m);
    subTotal += m.getPrice();
    calc();
} 
```

这是我通过意图发送数据的第一个活动：

```
confirmBtn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            b.putParcelable("order", orderData);
            Intent i = new Intent(v.getContext(), SectionsActivity.class);
            i.putExtra("data",b);
            startActivity(i);

        }
    }); 
```

这是我尝试检索包和显示大小的第二个活动：

```
@Override
protected void onResume() {
    super.onResume();
    getIntentData();
}

public void getIntentData(){
    Intent i = getIntent();
    if(i != null & i.hasExtra("data")){
        Toast.makeText(this.getApplicationContext(), "recieved", Toast.LENGTH_LONG).show();
        b = i.getExtras();
        orderData = b.getParcelable("order");
        int size = orderData.size();
        Toast.makeText(this.getApplicationContext(), String.valueOf(size), Toast.LENGTH_LONG).show();

    }
} 
```

任何想法为什么我得到空指针？快把我逼疯了！

orderData 是一个 MenuItemList 对象：

```
public class MenuItemList extends ArrayList <MenuItem> implements Parcelable{

/**
 * 
 */
private static final long serialVersionUID = 2998684930374219271L;

public MenuItemList(){

}

public static final Parcelable.Creator<MenuItemList> CREATOR = new Parcelable.Creator<MenuItemList>() {

    @Override
    public MenuItemList createFromParcel(Parcel source) {
        return new MenuItemList(source);
    }

    @Override
    public MenuItemList[] newArray(int size) {
        return new MenuItemList[size];
    }

};

public MenuItemList(Parcel source) {
        readFromParcel(source);
}

private void readFromParcel(Parcel source) {

    this.clear();

    //read the size of the list
    int size = source.readInt();

    //Remember order of items written into the Parcel. Important here.
    for(int i = 0; i < size; i ++){
        MenuItem item = new MenuItem();
        item.setName(source.readString());
        item.setPrice(source.readDouble());
        this.add(item);
    }
}

@Override
public void writeToParcel(Parcel dest, int flags) {
    int size = this.size();

    dest.writeInt(size);

    for(int i = 0; i < size; i ++){
        MenuItem item = this.get(i);
        dest.writeString(item.getName());
        dest.writeDouble(item.getPrice());

    }

}

@Override
public int describeContents() {
    return 0;
} 
```

}

解决问题的代码更改：

更改了点击（查看 v）：

```
@Override
        public void onClick(View v) {
            Intent i = new Intent(v.getContext(), SectionsActivity.class);
            i.putExtra("data", (ArrayList<MenuItem>)orderData);
            startActivity(i);

        } 
```

改变 getIntent():

```
public void getIntentData(){
    Intent i = getIntent();
    if(i != null && i.hasExtra("data")){
        Toast.makeText(this.getApplicationContext(), "recieved", Toast.LENGTH_LONG).show();
        orderData = i.getParcelableExtra("data");
        int size = orderData.size();
        Toast.makeText(this.getApplicationContext(), String.valueOf(size), Toast.LENGTH_LONG).show();

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T00:56:42.160

**重写**
问题是你有一个额外的Bundle。目前，`getIntentData()`您必须致电：

```
getIntent()                     // Fetch the Intent, 
    .getExtras()                // Fetch the Bundle of extras, 
    .getBundle("data")          // Fetch the Bundle "data", 
    .getParcelable("order");    // Then get your parcelable... 
```

让我们删掉不必要的Bundle。

```
public void onClick(View v) {
    Intent i = new Intent(v.getContext(), SectionsActivity.class);
    i.putExtra("data", orderData);
    startActivity(i);
} 
```

现在更新`getIntentData()`：

```
Intent i = getIntent();
if(i != null && i.hasExtra("data")){
    orderData = i.getParcelableExtra("data");
    ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T00:45:59.897

除非我错过了什么，否则您在函数中使用的是按位`&`而不是逻辑`&&``getIntentData()`

# android - 我在哪里可以找到 Android (DDMS) 上的文件

> ID：13830895
> 
> 赞同：0
> 
> 时间：2012-12-12T00:35:43.767
> 
> 标签：android

我尝试在我的类中将字符串写入文件，扩展 AsyncTask：

```
protected void onPostExecute(String result) {
            super.onPostExecute(result);
            DataOutputStream out = null;
            try {
                out = new DataOutputStream(openFileOutput("1xdf.xml", Context.MODE_PRIVATE));
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            }
            for (int i=0; i<20; i++) {
                try {
                    out.writeUTF(Integer.toString(i));
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            try {
                out.close();
                Log.e(DEBUG_TAG, "6x");
            } catch (IOException e) {
                e.printStackTrace();
            }

        } 
```

在 DDM 中哪里可以找到此文件？当我尝试搜索-> 文件 1xdf.xml 时，我得到

> 文本搜索过程中遇到的问题。文件 'MainActivity/bin/jarlist.cache' 已被跳过，读取时出现问题：（'资源与文件系统不同步：'/MainActivity/bin/jarlist.cache'。'）。资源与文件系统不同步：“/MainActivity/bin/jarlist.cache”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T00:57:16.623

当您使用`context.openFileOutput()`时，文件将写入应用程序的数据中。要检查这条路径是什么，您可以调用`getFilesDir()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T01:36:57.807

在 Eclipse 的 DDMS 透视图中，选择“文件资源管理器”选项卡，然后打开以下路径：

```
data/data/com.your.package.name.here/files/1xdf.xml 
```

其中 'com.your.package.name.here' 是您项目的包/应用程序名称的名称。如果要将文件移动到文件系统，请选择右上角的“从设备中提取文件”按钮（看起来像一个带有指向左侧的粉红色箭头的软盘），然后选择计算机上的目录你想保存文件。

如果您想手动将文件加载到虚拟设备上，请使用上方按钮右侧的按钮（看起来像指向手机的向右箭头）。

# php - PHP会话变量在其他变量上使用时丢失

> ID：13830897
> 
> 赞同：2
> 
> 时间：2012-12-12T00:35:43.920
> 
> 标签：php, variables, session

我有这个 PHP 脚本，它启动一个会话并创建它的变量。这是代码片段：

```
<?php
session_start();
if (!is_array($_SESSION['cart'])) $_SESSION['cart'] = array();
$id = 10;
$_SESSION['cart'][$id] = array( 'cod' => 'ABC', 'price' => '80', 'status' => 'active' );
header('Location: http://www.example.com/checkout.php');
?> 
```

当我使用**print_r**输出 $_SESSION 数组时，我得到了这个：

```
Array (
    [cart] => Array (
        [136] => Array (
            [cod] => ABC
            [price] => 80
            [status] => active
        )
    )
) 
```

这很好用：创建了用户会话，并且很好地设置了它的所有变量，然后用户被重定向到 que 结帐页面。

但是有一个问题：当用户到达结帐页面时，一切看起来都很好。查看代码片段：

```
<?php
session_start();
print_r($_SESSION);
?> 
```

**上面print_r**的输出正是我们之前看到的：并且 Array 填充了其他 Array。伟大的！但这里开始了奇怪的部分：当我使用任何会话变量设置为另一个变量的值时，会话数据会丢失。一探究竟：

```
<?php
session_start();
print_r($_SESSION);
$cart = $_SESSION['cart'];
foreach ($cart as $key => $data) : // if I use foreach($_SESSION['cart'] as $key => $data) will be the same thing
    /*** Do stuff here ***/
endforeach;
?> 
```

**上面print_r**的输出是：

```
Array (
    [cart] => Array (
        [cod] => ABC
        [price] => 80
        [status] => active
    )
) 
```

事实上，如果我只是输出变量值而不在脚本中使用它们，一切都很好。但是，当我在脚本的某处使用变量时（即使在放置了**print_r**片段之后），会话变量也会丢失一些数据。

我试图序列化`$_SESSION['cart']`变量，但是每次我想获取它的值时反序列化它是非常烦人的。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:06:59.967

我认为在 foreach 中处理 Do Stuff Here 部分时存在问题，您可以在处理时检查：

```
foreach ($cart as $key => $data)
{
if(is_array($data)){}
} 
```

# c# - 在选择和更改值行后向表中插入多行

> ID：13830898
> 
> 赞同：0
> 
> 时间：2012-12-12T00:35:54.530
> 
> 标签：c#, asp.net, sql-server

:) 我有一张表，包括任何行。

命名行我的表是：

ID_ImgPhoto(PK)，IDPhoto(FK)，标题，小，大，添加日期，添加Ip，状态。

我想在 asp.net 中的 DataReader 上读取并更改字符串 String.replace() 在我的表中的许多 Values Small 和 Large 行。我希望在选择和更改相同值行后将多行插入表中。我想选择有条件的多行。

我选择的代码是：

```
ALTER Procedure [dbo].[sp_Tbl_ImagePhotoGraphy_SelectRow]
    @IDPhoto int
As
Begin
    Select 
        [ID_ImgPhoto],
        [IDPhoto],
        [Title],
        [Small],
        [Larg],
        [AddedDate],
        [AddedIp],
        [Status]
    From Tbl_ImagePhotoGraphy
    Where
        [IDPhoto] = @IDPhoto
End 
```

我想在给值 @IDPhoto 后更改值很多行并选择 Many Row my table 和 FOR Examples：

```
 /*OLD DATA*/
ID_ImgPhoto     IDPhoto     Small                   Larg
1               1           OLD/1S.jpg              OLD/1L.jpg
2               1           OLD/2S.jpg              OLD/2L.jpg
3               1           OLD/3S.jpg              OLD/3L.jpg
4               2           Oldsmall/1S.jpg         OldLarg/1L.jpg
5               2           Oldsmall/1S.jpg         OldLarg/1L.jpg
5               2           Oldsmall/1S.jpg         OldLarg/1L.jpg
5               2           Oldsmall/1S.jpg         OldLarg/1L.jpg
____________________________________________________________________
/*NEW DATA Afetr Select And Chnage Rows Value*/
ID_ImgPhoto     IDPhoto     Small                   Larg
1               1           NEW/1S.jpg              NEW/1L.jpg
2               1           NEW/2S.jpg              NEW/2L.jpg
3               1           NEW/3S.jpg              NEW/3L.jpg
4               2           Oldsmall-2/1S.jpg       OldLarg-2/1L.jpg
5               2           Oldsmall-2/1S.jpg       OldLarg-2/1L.jpg
5               2           Oldsmall-2/1S.jpg       OldLarg-2/1L.jpg
5               2           Oldsmall-2/1S.jpg       OldLarg-2/1L.jpg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:37:29.477

我找到了这个 Sulotion。:)

UPDATE yourtable set small=replace(small,'OLD/','NEW/'),large=replace(larg,'OLD/','NEW/')

# css - 在 JSF 中使用 CSS

> ID：13830906
> 
> 赞同：1
> 
> 时间：2012-12-12T00:37:09.863
> 
> 标签：css, jsf

我有一个 JSF facelet，它有一个我想使用 CSS 设置样式的文本字符串。它位于 h1 标签中：

```
<h1 align="center">Welcome Back</h1> 
```

我的问题是，首先，CSS 文件将放在 JSF 应用程序的目录结构中的什么位置，第二，如何将 CSS 样式添加到文本中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T01:23:37.593

> *我有一个 JSF facelet，它有一个我想使用 CSS 设置样式的文本字符串。它位于 h1 标签中：*
> `<h1 align="center">Welcome Back</h1>`

这是个好主意。该`align`属性是[无效](http://validator.w3.org)的HTML5。CSS 放在`style`属性中，或者更好的是，放在它自己的`.css`文件中。您应该努力使您的 JSF/HTML 代码没有`style`属性（因此*所有*样式都在`.css`文件中）。

* * *

> *我的问题是，首先，CSS 文件在 JSF 应用程序的目录结构中的位置*

所有 JSF 资源都应放在该`/resources`文件夹中（如有必要，进一步划分为子文件夹）。这是一个相当基本的例子：

```
WebContent
 |-- META-INF
 |-- WEB-INF
 |    |-- template.xhtml
 |    |-- faces-config.xml
 |    `-- web.xml
 |-- resources
 |    |-- image.png
 |    |-- script.js
 |    `-- style.css
 `-- index.xhtml 
```

`<h:head>`您需要在主模板中按如下方式引用它。

```
<h:outputStylesheet name="style.css" /> 
```

*（等价于 JS 和图片的 and `<h:outputScript>`）`<h:graphicImage>`*

* * *

> *第二，如何将 CSS 样式添加到文本中？*

只需通过 中的以下条目`style.css`，前提是您的网站的设计方式是在主布局模板中*只有一个* `<h1>`在整个网站中都是相同的。

```
h1 {
    text-align: center;
} 
```

否则，您需要给它一个`id`or `class`。在为 JSF 编写 CSS 时，请记住 CSS 仅适用于客户端的 JSF 生成的 HTML 输出，而不适用于服务器端的 JSF 源代码。因此，如果对 HTML 输出有疑问，请在 webbrowser 中打开 JSF 页面并*查看源代码*（或使用 webbrowser 的开发人员工具集进行树检查）。

### 也可以看看：

*   [HTML Dog - CSS 初学者教程](http://www.htmldog.com/guides/cssbeginner/)
*   [JSF 资源库有什么用途，应该如何使用？](https://stackoverflow.com/questions/11988415/what-is-the-jsf-resource-library-for-and-how-should-it-be-used)

# javascript - 添加参数或添加数组？

> ID：13830912
> 
> 赞同：0
> 
> 时间：2012-12-12T00:38:10.557
> 
> 标签：javascript

我有这段代码 [来自该站点上的不同用户-谢谢！] 我需要修改这些代码，以便我可以检查多个字段而不仅仅是一个字段。我不确定是否应该向第二个函数添加参数或将变量 checkString 转换为数组。

```
function getField(fieldType, fieldTitle) {
    var docTags = document.getElementsByTagName(fieldType);
    for (var i = 0; i < docTags.length; i++) {
        if (docTags[i].title == fieldTitle) {
            return docTags[i]
        }
    }
}

function checkField() {
    var checkString = getField('input', 'fieldtocheck').value;
    if (checkString != "") {
        if (/[^A-Za-z\d]/.test(checkString)) {
            alert("Please enter only alphanumeric characters for the field fieldtocheck");
            return (false);
        }
    }
} 
```

我认为最好的选择是将“getfield”作为参数输入“checkfield”，但我该怎么做呢？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T00:44:56.370

我会让你的函数更通用，并使用一个类来识别字段：

```
function checkFields(className, regex) {
    var inputs = document.getElementsByClassName(className);

    for (var i = 0; i < inputs.length; i++) {
        if (!regex.match(inputs[i].value)) {
            return false;
        }
    }

    return true;
}

function validate() {
    if (!checkFields('alphanum', /^[A-Za-z\d]+$/)) {
        alert('Please enter only alphanumeric characters');
    }
} 
```

您的 HTML 可能如下所示：

```
<input type="text" class="alphanum" /> 
```

一个更简单（更好，IMO）的方法是使用[jQuery 验证插件](https://github.com/jzaefferer/jquery-validation)。

# ios - XIB 的设计与正在运行的应用程序不匹配

> ID：13830914
> 
> 赞同：0
> 
> 时间：2012-12-12T00:38:22.970
> 
> 标签：ios, xcode, xib, nib

我正在尝试设计一个自定义`UITableViewCell`我已经完成了我的自定义，但是当实际应用程序正在运行时，单元格背景似乎并不想应用。

文本和所有内容的自定义都适用，但文本不想工作。正如您在下面的照片中看到的那样，我`UITableViewCell`的背景是黑色的，但在左侧正在运行的应用程序中却没有。

任何解释这一点的帮助都会很棒。

![在此处输入图像描述](../Images/338e4c7afe0b8ccc873901e48beb4760.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-12T00:40:15.320

我的猜测是您正在定义一个自定义表格单元格，但没有在表格视图数据源函数中设置高度。高度ForCellAtIndex。您需要返回正确的尺寸。

# php - 连接本地主机到在线sql数据库

> ID：13830916
> 
> 赞同：0
> 
> 时间：2012-12-12T00:39:14.620
> 
> 标签：php, sql

我有一个使用 mySQL 数据库的在线预订系统（php 脚本）。脚本的一部分是用于离线预订的后端管理面板。

是否可以使用本地主机运行 XAMPP 之类的服务来访问远程数据库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T02:22:01.760

您可以通过远程主机、数据库用户名、数据库密码连接到远程数据库。

主机名=（使用db服务器IP地址）

数据库名称 = (cpanelUsername_databaseName)

数据库用户名 = (cpanelUsername_databaseUsername)

数据库密码 = ( *** )

MySQL 连接端口 = 3306（检查您的）

如果您使用的是 cPanel，那么您需要首先允许您的本地 IP 进行 DB 访问。登录 cpanel，在 CPanel 的主菜单上，跳到“数据库”并选择“远程 MySQL” 现在添加您的 IP 地址，或使用通配符的 IP 范围，例如 12.34.%

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T00:41:15.763

是的。正如您所期望的，您需要远程数据库的登录凭据以及它的端口和服务器地址（主机名或 IP）。远程主机还需要为该特定用户授予远程访问数据库的权限，默认情况下用户没有这些权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T02:11:32.643

是的。就像连接本地数据库一样，您可以使用有效凭据连接到远程数据库。然后唯一改变的是主机名参数。

例如，如果您的数据库托管在 Dreamhost 上，它们的主机名类似于 .. **mysql.yourdomain.com**。在远程服务器上创建一个数据库并连接到它

```
<?php
mysql_connect('mysql.yourdomain.com','username','password'); 
```

# c# - 基本 C# 语法问题

> ID：13830917
> 
> 赞同：2
> 
> 时间：2012-12-12T00:39:15.150
> 
> 标签：c#, syntax

```
class f2011fq1d
{
    unsafe public static void Main()
    {
       int a = 2;
       int b = 4;
       int* p;
       int* q;
       int[] ia = { 11, 12, 13 };
       p = &a; q = &b;
       Console.WriteLine(*p + a);
       Console.WriteLine(*q / *p);
       Console.WriteLine(*&a + *&b * 2);

       *p = a + *q;
       Console.WriteLine(a + *q);
       fixed (int* r = ia)
       {
           Console.WriteLine(*r + 3);
       }
    } 
} 
```

在这段代码中，我对某些语法感到困惑。例如`int* p`， 和`p = &a`做什么？最后一部分是`fixed (int* r = ia)`，那是做什么的？

在源代码中，它还打印了一些值，有人可以解释打印的是什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T00:48:23.300

您正在使用指针和“运算符地址”，这些是通常与 C/C++ 相关联的功能，但在`unsafe`代码块内的 C# 代码中可用。我建议对这个概念进行一些一般性的研究，因为仅仅理解语法不足以有效地使用它们。我将解释几行；

```
 int * p; //a pointer (the address of) 4 bytes of memory for an int
 int a = 5; // normal allocation/initialization of int
 p = &a; //sets p  to the address of a. Since p is a pointer, it holds an address
 // ampersand is the 'address of operator', it returns and address. so this assignment works

 p = a // will not compile. int* != int

 p == 5 // will not compile, int* != int

 *p == 5 // true. *pointer dereferences the pointer returning the value
 // found at the address p points to which is 5 so this is true.

 int * q = &a; // another pointer to the memory containing a

 p == q // true, both pointers contain the same value, some address which is usually displayed in hex like 0xFF110AB2 
```

指针的更常见用法是：

```
int *p;
// do something to get a length for an integer array at runtime
p = new int[size]; 
// now I've allocated an array based on information found at run time! 
```

上述操作在 C/C++ 中很常见，完全必要。在 C# 中，这样做没有意义。它已经在幕后为你完成了，它永远不会出错（比如未能释放我刚刚分配的内存）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T00:46:39.770

`int* p`声明一个名为的变量`p`，它是一个指向 int 的指针。

`p = &a`导致`p`指向内存中与 . 相同的位置`a`。

如果您需要了解此类内容，[指针类型（C# 编程指南）可能是一个不错的起点。](http://msdn.microsoft.com/en-us/library/y31yhkeb%28v=vs.110%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T00:48:15.080

通过`unsafe`代码，C# 允许您使用诸如 C 之类的指针和地址。 `int *p`声明一个指向`int`. `p = &a`, 获取 的地址`a`并将其存储在`p`.

`fixed`防止垃圾收集器移动数据。

请参阅[http://msdn.microsoft.com/en-us/library/chfa2zb8(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/chfa2zb8(v=vs.100).aspx)和[http://msdn.microsoft.com/en-us/library/f58wzh21(v=vs. 100).aspx](http://msdn.microsoft.com/en-us/library/f58wzh21(v=vs.100).aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T01:02:18.463

> 在这段代码中，我对某些语法感到困惑。例如...

我将尝试一次解决这些问题（没有双关语）

> int* p 是什么意思

这声明了一个名为“p”的局部变量，其类型是指向 int 的指针。因此，当将此变量分配给内存地址时，它将读取 4 字节，就好像它们是 int32 一样。

> ... 和 p = &a

右边的'&a'读作“a的地址”，意思是取我们分配给局部变量'a'的内存位置。将其分配给已经声明的 int 指针“p”，然后我们可以读取“p”以获取实际存储在变量“a”中的值。

> 最后一部分是固定的 (int* r = ia)，它有什么作用？

这与将 p 分配给 a 的地址非常相似，只是没有“地址的”前缀。这是因为变量 'ia' 的类型是一个数组，它被隐式处理，就好像它是一个指针一样。因此，该语句声明了一个 int 指针“r”并将其分配给数组“ia”中第一项的地址。

这里还有一些注意事项：

```
if (*p == 2) ... 
```

以“*”为前缀的指针将取消对该指针的引用，并将其视为指针类型的变量。因此，在我们的示例中，取消引用指向变量“a”的“p”将导致存储在“a”中的值，2。

```
*p = 100; 
```

就像在 'p' 指向的地址读取一个值一样，我们也可以写入一个新值。只需取消引用指针并为其分配一个新值。

```
*&a 
```

这只是为了混淆某人。正如所解释的，它通过前缀“&”获取“a”的地址，但随后取消引用带有“*”前缀的地址。这只是计算为 'a' 并且可以省略两个前缀而不改变行为。

# php - 通过数字索引数组进行小胡子迭代

> ID：13830918
> 
> 赞同：1
> 
> 时间：2012-12-12T00:39:18.630
> 
> 标签：php, mustache

我是[Mustache](http://mustache.github.com/)的新手，似乎找不到执行以下操作的方法：

数据：

```
$errors = array('Error one', 'error two', 'error three'); 
```

期望的输出：

```
Error one<br />error two<br />error three 
```

我将使用 PHP 实现这一点：

```
<?=implode('<br />', $errors)?> 
```

到目前为止尝试过：

```
{{#errors}}{{.}}<br />{{/errors}} 
```

这意味着*最后**一个额外的**br***，因为 Mustache 是没有逻辑的，我认为它不能删掉最后一个，也许有一些重要的东西？

可以使用 Mustache 吗？如果是这样，怎么办？？

提前致谢！

**编辑**

对于简单的事情似乎很复杂，我想使用 Mustache 也意味着设计您的数据以符合模板系统......

# nginx - nginx重写/重定向

> ID：13830922
> 
> 赞同：-1
> 
> 时间：2012-12-12T00:39:39.050
> 
> 标签：nginx

假设我有 1000 个看起来像这样的 URL

*   [http://www.mydomain.com/pet/cat/info](http://www.mydomain.com/pet/cat/info)
*   [http://www.mydomain.com/pet/dog/info](http://www.mydomain.com/pet/dog/info)
*   ...
*   [http://www.mydomain.com/pet/fish/info](http://www.mydomain.com/pet/fish/info)

每个 URL 都应该在 /usr/local/nginx/data 目录中返回一个对应的 html 文件。

*   /usr/local/nginx/data/cat.html
*   /usr/local/nginx/data/dog.html
*   ...
*   /usr/local/nginx/data/fish.html

我应该使用什么构造来一次映射所有这些？你能提供一个代码片段吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T00:57:24.507

我发现了如何做到这一点。

```
...
location ^~ /pet {
    root     /usr/local/nginx;
    rewrite  "/pet/([^/]+)/info$"  /data/$1.html  break;
}
... 
```

# c# - 你如何检查记录是否存在

> ID：13830928
> 
> 赞同：10
> 
> 时间：2012-12-12T00:40:09.230
> 
> 标签：c#, asp.net, linq, entity-framework

我有一个插入的表格。我想看看数据库中是否已经存在记录以防止重复。我有点不确定这什么时候必须下降。在作为表单的控件的代码隐藏中或在我调用以执行插入的类中。下面是我认为的课程。

```
public class AddContacts
{
    public int AddContact(string ContactName)
    {
        var myContact = new Solutions.Models.Contact();

        myContact.ContactName = ContactName;

        ItemContext _db = new ItemContext();

        _db.Contacts.Add(myContact);
        _db.SaveChanges();
        return myContact.ContactID;
    }
} 
```

我已经看到它使用 If 语句完成，`.Any()`但我无法让它正常工作。我也不明白它需要返回什么才能让我发布错误消息`Contact Name already exists`。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-12T00:58:44.473

您可以像这样使用 Any 方法：

```
bool contactExists = _db.Contacts.Any(contact => contact.ContactName.Equals(ContactName));

if (contactExists)
{
    return -1;
}
else
{
    _db.Contacts.Add(myContact);
    _db.SaveChanges();
    return myContact.ContactID;
} 
```

调用 AddContact 的方法将检查返回值并决定是否向用户显示错误或确认消息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T00:59:58.130

做这样的检查：

```
bool doesExistAlready = _db.Contacts.Any(o => o.ContactName == ContactName); 
```

如果这不起作用，请尝试以下操作：

```
bool doesExistAlready = _db.Contacts.Count(o => o.ContactName == ContactName) > 0; 
```

打开 SQL 跟踪/调试，以便查看正在生成的实际 sql。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-03T11:29:03.487

这也有帮助。

```
bool doesExistAlready = _db.Contacts.Count(o => o.ContactName == ContactName) > 0; 
```

# c# - 如何在我的 ASP.NET MVC 应用程序中设置此区域

> ID：13830933
> 
> 赞同：1
> 
> 时间：2012-12-12T00:40:47.473
> 
> 标签：c#, .net, asp.net-mvc, routing, attributerouting

我正在尝试在我的 ASP.NET MVC 应用程序中设置区域路由。

我也在使用 nuget 包[AttributeRouting](https://github.com/mccalltd/AttributeRouting/)，而不是普通的 MVC 注册区域路由。

据我了解，区域路线如下所示：`/area/controller/method`

我想做的是：-`/api/search/index`

意思是：

*   面积 => Api
*   控制器 => 搜索控制器
*   ActionMethod => 索引

.

```
[RouteArea("Api")]
public class SearchController : Controller
{
    [POST("Index")]
    public JsonResult Index(IndexInputModel indexInputModel) { .. }
} 
```

但这并没有创建那条路线。这就是它所创建`/api/index` 的：`search`缺少控制器。

我[查看了文档](http://attributerouting.net/#defining-routes)并注意到了，`RoutePrefix`所以我尝试了这个..

```
[RouteArea("Api")]
[RoutePrefix("Search")]
public class SearchController : Controller
{
    [POST("Index")]
    public JsonResult Index(IndexInputModel indexInputModel) { .. }
} 
```

这实际上创建了路线`/api/search/index`。

但为什么我需要把它`RoutePrefix`放在那里？它不应该足够聪明，已经弄清楚这是一个`SearchController`并创建 3 段路线吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:35:32.040

您无需在任何地方放置 RoutePrefix。它只是作为重构/干燥的辅助工具。考虑：

```
[RouteArea("Api")]
public class SearchController : Controller 
{
    [POST("Search/Index")]
    public ActionResult Index() { }
} 
```

如果您有许多操作，也许您希望它们都带有“搜索”前缀，所以您可以这样做：

```
[RouteArea("Api")]
[RoutePrefix("Search")]
public class SearchController : Controller 
{
    [POST("Index")]
    public ActionResult Index() { }

    // Other actions to prefix....
} 
```

### 它不应该足够聪明吗？

不要厚脸皮，但不要。AR 从未打算为您读取所有代码并神奇地生成路线。它旨在让您的 URL 成为首要考虑因素，为此您应该*看到*您的 URL。并不是说这是最好的或唯一的做事方式，只是那是我一开始的意图。

它不够聪明的真正原因是“区域”的概念与 URL 无关。区域是一个逻辑单元。您可以在没有任何路由前缀的情况下公开该逻辑单元（因此它将挂起〜/），或者您可以将其公开在“This/Is/A/Prefix”之外。

但是，如果您希望它足够聪明....我刚刚发布了 v3.4，它可以让您这样做（如果您愿意；不必这样做）：

```
namespace Krome.Web.Areas.Api
{
    [RouteArea]
    [RoutePrefix]
    public class SearchController : Controller 
    {
        [POST]
        public ActionResult Index() { }
    }
} 
```

这将产生以下路线：~/Api/Search/Index。该区域来自控制器命名空间的最后一部分；路由前缀来自控制器名称；其余的 url 来自动作名称。

### 还有一件事

如果您想为控制器中的各个操作获取路由区域 url 和路由前缀 rat's nest，请执行以下操作：

```
[RouteArea("Api")]
[RoutePrefix("Search")]
public class SearchController : Controller 
{
    [POST("Index")]
    public ActionResult Index() { }

    [GET("Something")] // yields ~/Api/Search/Something
    [GET("NoPrefix", IgnoreRoutePrefix = true)] // yields ~/Api/NoPrefix
    [GET("NoAreaUrl", IgnoreAreaUrl = true)] // yields ~/Search/NoAreaUrl
    [GET("Absolutely-Pure", IsAbsoluteUrl = true)] // yields ~/Absolutely-Pure 
    public ActionResult Something() {}
} 
```

# sql - SQL Server 2008 R2 递归更新循环

> ID：13830936
> 
> 赞同：2
> 
> 时间：2012-12-12T00:41:03.583
> 
> 标签：sql, sql-server, sql-server-2008-r2

我有一个文件系统应用程序，它使用 SQL Server 2008 R2 来跟踪文件。当我删除一个文件时，我想更新路径层次结构中的父级以反映它们的新大小。我使用@fid 作为当前FILE_ID，@size 作为FILE_SIZE，@pid 作为层次结构中父级的FILE_ID。

这是我正在使用的循环：

```
SELECT @pid=PARENT_ID FROM FILES WHERE FILE_ID=@fid;

WHILE @pid<>0
BEGIN

    UPDATE FILES
    SET 
        FILE_SIZE = 
        -- Avoid potential situation where new file size might incorrectly drop below 0
        CASE 
            WHEN FILE_SIZE-@size>=0 THEN FILE_SIZE-@size
            ELSE 0
        END
    WHERE FILE_ID=@pid;

    SET @fid=@pid;
    SELECT @pid=PARENT_ID FROM FILES WHERE FILE_ID=@fid;
END 
```

当我运行它时，尺寸不会更新。如果我用 SELECT 替换 UPDATE，它看起来应该可以正常工作。到底是怎么回事？ **为什么尺寸没有更新？有一个更好的方法吗？**

为了添加一些上下文，这个 snip-it 实际上在另一个循环中运行，因此可以批量删除多个文件。这是此上下文中的代码：

```
-- Declarations
DECLARE @fid int, @size int, @pid int;
DECLARE c CURSOR FOR 
SELECT 
    FILE_ID, FILE_SIZE 
FROM
    FILES

OPEN c;

-- Initialize variables
FETCH NEXT FROM c 
INTO @fid, @size;

-- Main loop
WHILE @@FETCH_STATUS = 0
BEGIN

    -- Statements to delete the file --

    -- Loop to update sizes --
    SELECT @pid=PARENT_ID FROM FILES WHERE FILE_ID=@fid;
    WHILE @pid<>0
    BEGIN

        UPDATE FILES
        SET 
            FILE_SIZE = 
            CASE 
                WHEN FILE_SIZE-@size>=0 THEN FILE_SIZE-@size
                ELSE 0
            END
        WHERE FILE_ID=@pid;

        SET @fid=@pid;
        SELECT @pid=PARENT_ID FROM FILES WHERE FILE_ID=@fid;
    END

   FETCH NEXT FROM c 
   INTO @fid, @size;
END
CLOSE c;
DEALLOCATE c; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:54:07.233

我想发布结果，以防万一。我希望这是正确的方法。

我需要将更新限制在受影响的路径，所以我最终使用了这样的东西，基于 Dale M 的建议：

```
-- Since I already have @size and @pid, I use them here
WITH    FileList
AS
(
    -- Select the parent of the delete target
    SELECT   f.FILE_ID 
            ,f.PARENT_ID
            ,f.FILE_SIZE-@size AS FILE_SIZE
    FROM    FILES f 
    WHERE   f.FILE_ID=@pid
    UNION ALL
    -- Then recursively select its parents
    SELECT   f.FILE_ID
            ,f.PARENT_ID
            ,f.FILE_SIZE-@size AS FILE_SIZE
    FROM    FileList fl
            INNER JOIN 
            FILES f ON f.FILE_ID=fl.PARENT_ID
)
-- Update FILES with the size, already adjusted in the CTE above
UPDATE FILES
SET FILE_SIZE=fl.FILE_SIZE
FROM    FILES
        INNER JOIN
        FileList fl ON fl.FILE_ID=FILES.FILE_ID; 
```

这很好，因为我可以开始将此脚本分解为存储过程。再次感谢戴尔 M！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T01:29:07.803

肯定有更好的方法来做到这一点。您概述的方法是程序化和迭代的，非常适合 C# 和 Visual Basic 等语言，但是，SQL 游标中最有效的解决方案是您应该达到的最后一个技巧。

这应该工作

```
WITH    FileList
AS
(
    -- Select all the files that have no children
    SELECT   f.FILE_ID 
            ,f.FILE_SIZE
            ,f.PARENT_ID
            ,0 AS CHILD_ID
            ,0 AS Depth
    FROM    FILES f
            LEFT JOIN
            FILES f1 ON f.FILE_ID=f1.PARENT_ID
    WHERE   f1.PARENT_ID IS NULL
    UNION ALL
    -- Then recursively select thrir parents
    SELECT   f.FILE_ID
            ,fl.FILE_SIZE
            ,f.PARENT_ID
            ,fl.FILE_ID
            ,fl.Depth + 1
    FROM    FileList fl
            INNER JOIN
            FILES f ON f.FILE_ID=fl.PARENT_ID
)
-- With this data update the file size with the sum of all leaf nodes
UPDATE  FILES
SET     FILE_SIZE = (SELECT SUM(FILE_SIZE)
                    FROM    FileList fl
                    WHERE   fl.FILE_ID=FILES.FILE_ID
                    GROUP BY    FILE_ID) 
```

一个命令，没有迭代 - 应该更快几个数量级，并且您每次都可以获得从叶子一直向上传播的准确文件大小。

# java - 如何在 Spring MVC 中处理 HTTP 请求在 HTTP 响应主体内生成 XML 文档？

> ID：13830939
> 
> 赞同：0
> 
> 时间：2012-12-12T00:41:14.767
> 
> 标签：java, spring, spring-mvc

这次我正在研究可从 STS 仪表板下载的 Spring MVC 展示示例

但是，情况如下：

在名为 home.jsp 的视图中，我有这两个链接：

```
 <li>
            <a id="byProducesAcceptXml" class="writeXmlLink" href="<c:url value="/mapping/produces" />">By produces via Accept=appilcation/xml</a>
        </li>

        <li>
            <a id="byProducesXmlExt" class="writeXmlLink" href="<c:url value="/mapping/produces.xml" />">By produces via ".xml"</a>
        </li> 
```

第一个链接生成对 URL 的 HTTP 请求：**/mapping/produces** 第二个链接生成对 URL 的 HTTP 请求：**/mapping/produces.xml**

这两个链接都有**class="writeXmlLink"**并且与所有具有此类的链接的单击事件相关，有以下 Jquery 函数：

```
$("a.writeXmlLink").click(function() {

    var link = $(this);     // Variabile che contiene il riferimento all'elemento nel DOM che ha scatenato l'evento click (il link clickato) 

    // Viene eseguita la chiamata ajax 
    $.ajax({ 
        url: link.attr("href"),                         // Indirizzo verso cui è indirizzata la richiesta 
        beforeSend: function(req) {                     // Prima di inviare l'HTTP Request esegui la funzione passandogli il parametro req 
            if (!this.url.match(/\.xml$/)) {                            // Se l'url termina con .xml 
                req.setRequestHeader("Accept", "application/xml");      // Aggiunge alla HTTP Request l'header Accept: application/xml 
            }
        },
        success: function(xml) {
            MvcUtil.showSuccessResponse(MvcUtil.xmlencode(xml), link);
        },
        error: function(xhr) { 
            MvcUtil.showErrorResponse(xhr.responseText, link);
        }
    });
    return false;
}); 
```

这个脚本对我来说很清楚......实际上它发生了：

单击第一个链接时，jQuery 脚本启动并执行 AJAX 调用，在发送请求之前检查 URL 是否以 .xml 结尾，并且因为此链接不以 .xml 结尾，所以发送在我的控制器类中处理的 HTTP 请求通过以下方法：

```
@RequestMapping(value="/mapping/produces", method=RequestMethod.GET, produces=MediaType.APPLICATION_XML_VALUE)
public @ResponseBody JavaBean byProducesXml() {
    System.out.println("Dentro byProducesXml()");
    return new JavaBean();
} 
```

这个方法只是简单地创建一个新的 JavaBean 对象并在一个 XML 文档中返回它，该文档放在 HTTP Response 的 body 字段中。因此 HTTP 响应到达客户端（我的浏览器），而 JQuery 脚本调用另一个显示输出的函数。

JavaBean 类是一个简单类，仅包含两个 valorised 变量和 getter/setter 方法：

```
@XmlRootElement 
```

公共类 JavaBean {

```
private String foo = "bar";

private String fruit = "apple";
    // GETTER & Setter 
```

因此 HTTP 响应到达客户端（我的浏览器），JQuery 脚本调用另一个显示输出的函数（即 HTTP 响应正文中的 XML 文档）

事实上，在这种情况下，我的输出是：**barapple**

好的......现在当第二个链接被点击时，再次启动执行 AJAX 调用的 jQuery 函数，在发送请求之前检查 URL 是否以 .xml 结尾，因为这次链接以**.xml**结尾是 if 正文中的代码被执行，所以执行如下操作：

```
req.setRequestHeader("Accept", "application/xml"); 
```

在 HTTP 请求标头中添加一个标头名称并接受并具有值“application/xml”。

现在 AJAX 调用发送 HTTP 请求，该请求由相同的 previus 控制器方法处理，该方法将相同的东西返回到我的浏览器，这里出现了相同的输出消息： **barapple**

现在我的疑问与通过单击两个链接生成的两个请求之间的区别有关。

第一个没有设置 Accept 标头，第二个设置了此标头...结果是一样的...有什么变化？这两个请求有什么区别？

# jquery - 改变列表内容的 AJAX 搜索框

> ID：13830940
> 
> 赞同：-1
> 
> 时间：2012-12-12T00:41:21.383
> 
> 标签：jquery, ajax, autocomplete

我只是不知道如何利用 AJAX 驱动的搜索框来更改列表的内容。

所以基本上，梦想是让用户在框中输入查询，下面的列表将被更改，以便它包含标题与查询匹配的条目。

下面的屏幕截图可能会有所帮助；

![在此处输入图像描述](../Images/7d21ca34e00612930bb730bda0dc8a24.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:04:05.320

由于您只是在寻找一个起点，请按照这些简单的步骤来理解它。

1.  您需要在 php 中编写一个代码块（最好是一个函数），它将用户类型作为输入，并根据该输入查询要从数据库中列出的项目。

2.  接下来，您需要遍历从查询中检索到的输出并修改它的结构，如果您需要或在 php 中为它准备 HTML 并将其作为响应发送到您的浏览器。

3.  现在对该 php 代码块进行 ajax 调用（见 - [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)），可能在事件**按键**上使用 jQuery （见 - [http://api.jquery .com/keypress/](http://api.jquery.com/keypress/)）。

4.  现在用新收到的数据替换旧列表。

这只是一个想法应该是你的工作流程。为所有这些粘贴代码将使答案变得很长。所以只是一个工作流程。

PHP(ajaxcall.php):

```
<?php 

 //The following code block will be executed on the ajax call.

//get the user input from post
$user_input = $_POST['user_input'];

//do the query based on that.
//YOUR SQL HERE

//parse the retrieved result and loop through it.

//echo out the output.

die(); 
```

JS：

```
$('.somefield').keypress(function(){
    //get the current value of some field and set this as the data to be sent.
    //do your ajax call.
    //on success( after successfully getting the data ), replace the content of
    //the list with the new data.
}); 
```

# php - 谷歌任务api身份验证不起作用php

> ID：13830944
> 
> 赞同：0
> 
> 时间：2012-12-12T00:41:50.007
> 
> 标签：php, google-tasks-api

我有一个名为 TasksLogin.php 的文件，可以让我登录

```
session_start();
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_TasksService.php';
$client = new Google_Client();
$client->setClientId('xxxxx.apps.googleusercontent.com');
$client->setClientSecret('xxxxxxxxx');
$client->setRedirectUri('http://xxxxxxxxx/Tasks/TaskVis.html');
$client->setApplicationName("TasksForMike");
$tasksService = new Google_TasksService($client);

if (isset($_REQUEST['logout'])) {
  unset($_SESSION['token']);
}

if (isset($_SESSION['token'])) {
  $client->setAccessToken($_SESSION['token']);

} else {
  $client->setAccessToken($client->authenticate($_GET['code']));
  $_SESSION['token'] = $client->getAccessToken();

}

if (isset($_GET['code'])) {
  $redirect = 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF'];
  header('Location: ' . filter_var($redirect, FILTER_SANITIZE_URL));
}
?>
<?php $_SESSION['token'] = $client->getAccessToken(); ?> 
```

这似乎有效，因为它重定向到 TaskVis.php 但在 TasksVis.php 我调用：

```
$(document).ready(function() {
  $.get("tasks.php", function(data){
var json = data;
});
 }); 
```

这是获取任务并将它们打包在 json 对象中的 php 文件。但是在tasks.php中，我有这个崩溃的代码：

```
session_start();
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_TasksService.php';
$client = new Google_Client();
$client->setClientId('xxxxxx.apps.googleusercontent.com');
$client->setClientSecret('xxxxxxxxxxxxxxx');
$client->setRedirectUri('http://xxxxxxxxx/Tasks/TaskVis.html');
$client->setApplicationName("TasksForMike");
$tasksService = new Google_TasksService($client);

if (isset($_REQUEST['logout'])) 
{
  unset($_SESSION['token']);
}
 if (isset($_GET['code'])) {
  $client->authenticate($_GET['code']);
  echo "hh";
  die();
  $_SESSION['token'] = $client->getAccessToken();
  header('Location: http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF']);

}
?> 
```

“死”永远不会运行，我得到一个 500 服务器错误。由于代码在查询字符串中，为什么`$client->authenticate($_GET['code']);`失败？我正在尝试将数据代码与渲染分开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:48:42.797

我认为查询字符串中没有任何“代码”。当您重定向到 TaskVis.php 并且不将其包含在重定向中时，您的“代码”值会丢失。然后，在那个文件中，你在这里调用 tasks.php ......

```
$.get("tasks.php", function(data){ 
```

...因此，如果有任何 _GET 值，它们将包含在调用中：

```
$.get("tasks.php?code=xxxx", function(data){ 
```

我也有兴趣了解 500 错误的性质。您是否尝试在 Firebug 中查看控制台时调用它？

# javascript - Javascript：解析 html 表

> ID：13830945
> 
> 赞同：0
> 
> 时间：2012-12-12T00:41:57.613
> 
> 标签：javascript, jquery, html

我正在处理一个 html 页面。该页面有一个包含 3 列和一个按钮的表格。表的一列是一个复选框（行数是动态变化的）：

```
<table cellpadding="0" cellspacing="0" border="1" class="display" id="tag" width="100%">
    <tbody>
        <tr>
            <td align="center">
                <input type="checkbox" class="case" name="case" value="0"/>
            <td>fruit</td>
            <td>apple</td>
        </tr>
        <tr>
            <td align="center">
                <input type="checkbox" class="case" name="case" value="1"/>
            <td>fruit</td>
            <td>pear</td>
        </tr>
    </tbody>
</table>
<p><input type="button" value="Generate" onclick="generate()"></p> 
```

当用户单击“生成”按钮时，generate() 函数将根据每一行的列生成一个特殊的字符串。

我的问题是如何检查“复选框”行是否被选中？我想在生成字符串时过滤那些未检查的行。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T01:19:09.690

根据选中的复选框过滤行：

```
var rows = $(".case:checked").closest("tr"); 
```

这将返回一个 jQuery 对象，其中包含所有包含选中复选框的表格行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T01:32:57.733

调用 getElementsByName 将为您提供复选框的引用数组。循环数组以获取值。

```
var arr = document.getElementsByName("case");
for(i = 0; i < arr.length; i++){
   if(arr[i].checked){
      doSomething;
   }
} 
```

# javascript - Settimeout 运行很快

> ID：13830950
> 
> 赞同：0
> 
> 时间：2012-12-12T00:42:52.170
> 
> 标签：javascript

我有一个while循环每秒调用一个函数：

```
function draw (){
        console.log(then-now)
    };
var i = 0
while(i < 100){
    setTimeout(draw,1000)
    i++;
}; 
```

但这不是在每次调用绘图之间等待一秒钟，而是一次调用它 100 次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T00:44:13.140

尝试[`setInterval`](http://jsfiddle.net/L7wED/)：

```
function draw (){
    console.log(then-now)
    i++;
    if (i >= 100) clearInterval(interval);
};
var i = 0
var interval = setInterval(draw, 100); 
```

如果您想使用[`setTimeout`](http://jsfiddle.net/L7wED/1/)，则必须从`draw`函数本身内部设置下一次迭代。

```
function draw (){
    console.log(then-now)
    i++;
    if (i < 100) setTimeout(draw, 100);
};
var i = 0;
setTimeout(draw, 100); 
```

这是因为`setTimeout`它是异步的，所以您的 while 循环不会暂停——它会继续运行，`draw`几乎立即启动每个实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T00:47:13.850

你似乎想要

```
while(i < 100){
    i++;
    setTimeout(draw, i*1000);
}; 
```

请注意，它[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)会为将来安排任务，但不会等待 - 它会立即返回，从而使您的代码异步。

但是，一次将 100 个任务排队并不是一个好习惯。更好的：

```
var i = 0;
function draw (){
    console.log(then-now)
    if (i<100) {
        i++;
        setTimeout(draw, 1000); // maybe adjusted to actual time
    }
};
draw(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T00:45:54.803

```
setTimeout(draw, 1000); 
```

应该：

```
setTimeout(draw, 1000 * (i + 1)); 
```

这样每次创建的超时时间都会`1s`更长。

`i + 1`是这样的，第一个超时是，`1000`而不是`0`，`i`从 开始`0`。

# c++ - 设计矢量字体引擎

> ID：13830951
> 
> 赞同：0
> 
> 时间：2012-12-12T00:42:51.580
> 
> 标签：c++, oop, opengl

我正在尝试设计一个矢量字体引擎，就像 Atari 1979 中的那样。我有保存预定义字符集及其坐标的问题，我不知道保存这些多边形的最佳数据结构是什么或什么是为此设计课程的最佳方式。这是我的试验，我对此感到不舒服。

```
class Character
{
public:
      Character();

public:
    int ascii;
    int strokes;
    std::vector<ci::Vec2i> points;

};
void VectorFont::Init_Chars()
{

    for (int i=0; i<1;i++)
    {
        Character char_A;
        char_A.ascii = 65;
        char_A.strokes = 6;
        ci::Vec2i point_1 = ci::Vec2i(-6,-4);
        ci::Vec2i point_2 = ci::Vec2i(0,8);
        ci::Vec2i point_3 = ci::Vec2i(0,8);
        ci::Vec2i point_4 = ci::Vec2i(6,-4);
        ci::Vec2i point_5 = ci::Vec2i(4,0);
        ci::Vec2i point_6 = ci::Vec2i(-4,0);
        char_A.points.push_back(point_1);
        char_A.points.push_back(point_2);
        char_A.points.push_back(point_3);
        char_A.points.push_back(point_4);
        char_A.points.push_back(point_5);
        char_A.points.push_back(point_6);
        chars.push_back(char_A);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:29:35.430

由于这些字符有孔，您需要定义一个`Path`类：

```
class Path
{
     public: 
         std::vector<ci::Vec2i> points;
         int orientation; // 1 for fill, 0 for hole.
} 
```

A`Path`是点和方向的集合。你的路径应该是封闭的，也就是说，第一点和最后一点是相同的。如果方向为 1，则表示用黑色填充。如果是0，切一个洞。

然后，您的`Character`班级将拥有一组路径，这些路径将是填充或孔。

上面只是描述了填充和孔上的点的数据结构。必须编写一个引擎来将该数据结构转换为像素。那是另一个话题。

# ios - 如何使用 flex 访问 ipad 相机？

> ID：13830953
> 
> 赞同：0
> 
> 时间：2012-12-12T00:43:15.603
> 
> 标签：ios, ipad, apache-flex, flash-builder

我的应用程序需要提供一个单击按钮以打开 ipad 相机，一旦拍摄照片，它应该能够检索并显示照片。我知道我可以使用 CameraRoll - AS3 类，但它只允许我访问相机胶卷而不是相机本身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:19:54.483

您应该会发现 Jason Sturges 在这里回答了您的问题 [[使用适用于 iOS 的 Adob​​e Builder (flex) 拍照](https://stackoverflow.com/questions/11812807/take-photo-using-adobe-builder-flex-for-ios)]

他向您指出 XpenseIt 教程（[Flex 移动项目 FXP 下载](http://devgirl.org/files/RIAUnleashed/)）。下载最终的 .fxp 文件并将其添加到您的工作区，您将找到适合您需求的良好资源。

Adobe 博客贡献者 Christian Cantrell 提供的另一个资源 [http://blogs.adobe.com/cantrell/archives/2011/02/how-to-use-cameraui-in-a-cross-platform-way.html](http://blogs.adobe.com/cantrell/archives/2011/02/how-to-use-cameraui-in-a-cross-platform-way.html)

# python - Python 类 - 初学者

> ID：13830956
> 
> 赞同：-1
> 
> 时间：2012-12-12T00:43:49.813
> 
> 标签：python, class

我是一名新的 Python 学生，我真的很难上课。所以我必须创建一个名为 Positions 的类，其中包含构造函数、选择器等。构造函数应该接收 2 个整数并返回 2 个整数的位置，所以如果我收到数字 2,3，它将返回位置 (2,3)。这是我第一次在网上阅读后上课。

这有什么问题？

```
class Position:    
    def __init__(self,column,line):
        self.c = column
        self.l = line

    def position(self):
        return (self.c,self.l) 
```

另一个他们给了我一个职位，我只需要归还这条线。所以如果他们给我 (2,3) 它应该返回 3。

```
 def position_line(self):
    return self.l 
```

请给我一些提示:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:53:37.417

一切似乎都很好。您可能想要做的唯一一件事就是在您的实例变量之前添加一个下划线。这是 python 中的一个约定，表明这些变量是私有的，稍后我将对此进行更详细的介绍。

```
class Position:    
    def __init__(self,column,line):
        self._c = column
        self._l = line

    def position(self):
        return (self._c,self._l) 
```

这向阅读您的代码的其他人表明，这些变量是私有的，不应从类外部访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T01:49:04.730

你的代码没有问题。你可以这样做：

```
 p = Position(2, 3)
    p.position_line() 
```

这将打印 3。希望这会有所帮助。

# iphone - 在 UIViewController 和 UITabBarViewController 之间添加过渡效果

> ID：13830958
> 
> 赞同：0
> 
> 时间：2012-12-12T00:44:03.697
> 
> 标签：iphone, ios, transition

我试图在我的两个 UIControllers 之间添加一个过渡效果。它们之间的切换效果很好，但我想添加一个很好的过渡效果。

这是我的 AppDelegate.m

```
@implementation LaMetro_88AppDelegate

@synthesize window = _window;
@synthesize tabBarController = _tabBarController;
@synthesize LoadingViewController = _LoadingViewController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

     self.window.rootViewController = self.LoadingViewController;
    [self.window addSubview:tabBarController.view];
    [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(changeView) userInfo:nil repeats:NO];

    [self.window makeKeyAndVisible];
    return YES;
}

-(void)changeView
{

    self.window.rootViewController = self.tabBarController;   

} 
```

此代码在控制器之间进行切换并正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:04:52.510

为了有过渡动画，必须呈现标签栏控制器。试试这种方式（我没有测试过）：

```
self.tabBarController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;  // your choice here
self.window.rootViewController presentViewController:self.tabBarController animated:YES completion:^{}]; 
```

查看您的代码，您可能想展示一个splash vc。如果它只需要在那里展示一个标志，那么计时器方法是可以的。（不过，您可能需要考虑 performSelector:withObject:afterDelay: 这是隐藏该计时器的一种更漂亮的方法）。

如果 splash vc 需要在应用程序准备好运行之前做一些工作（比如登录，或者其他需要足够长的时间才能异步执行的操作），我鼓励您查看[我建议的这种方法](https://stackoverflow.com/questions/11697747/how-to-present-a-splash-login-view-controller-using-storyboards)）。

# c++ - 带有do while函数的无限循环

> ID：13830959
> 
> 赞同：0
> 
> 时间：2012-12-12T00:44:06.383
> 
> 标签：c++, loops, do-while

我正在尝试在 do while 函数中运行一些代码：

```
do {
    printf("\nThis game has two different modes: I Guess, You Guess\n");
    Sleep(2000);
    printf("Which mode do you want to play?\n");
    cin >> mStr;
    cout << "Are you sure you want to play " << mStr << " mode?";
    cin >> choice;
} while (choice != "No"); 
```

但是，每次我输入 mStr （一个字符数组）时，它都会重新启动。它甚至不执行 cout。

以下是调用的 char 数组：

```
char mStr[10];
char choice[4]; 
```

在旁注中，我怎么能使用 printf() 而不是 cout 呢？我正在努力练习。

编辑：

这是新代码：

```
do {
    printf("\nThis game has two different modes: I Guess, You Guess\n");
    Sleep(2000);
    printf("Which mode do you want to play?\n");
    cin >> mStr;
    printf("Are you sure you want to play %s mode?", mStr); //Cuts off here and doesnt display the 'Guess' part of I Guess
    cin >> choice;
} while (strcmp(cKey, choice) != 1); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T00:52:49.213

您不能使用 来比较 char 数组`!=`，您需要使用[`strcmp`](http://en.cppreference.com/w/cpp/string/byte/strcmp), 示例：

```
while (strcmp(choice, "No")!=0) 
```

或者干脆改变：

```
std::string mStr;
std::string choice; 
```

然后你可以打电话

```
while (choice != "No") 
```

**编辑**：

正如 Jarryd 在我的评论中提到的，如果您输入的字符超过了 mStr 的长度，请选择它是未定义的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T00:52:40.837

您永远不应该将字符串与普通的等式和不等式运算符`==`和`!=`. 相反，您应该使用适当的函数，例如[`strcmp`](http://www.cplusplus.com/reference/cstring/strcmp/).

# entity-framework-4 - 实体框架为实体创建历史表

> ID：13830961
> 
> 赞同：9
> 
> 时间：2012-12-12T00:44:14.350
> 
> 标签：entity-framework-4

我们想为每个实体创建一个历史表。给定现有实体，有没有办法让实体框架自动创建历史实体/表？

例如，`Customer`实体将有一个名为 的影子历史表`CustomerHistory`。每当有编辑或删除时，旧记录将被插入到历史表中。主实体表将始终包含当前记录。

由于我们有几个实体，我宁愿不必为每个实体创建单独的历史实体和存储库，从而使实体加倍。

我们希望对所有实体执行此操作，以跟踪实体的事务和状态时间变化。

我们使用工作单元和存储库模式。

假设实体和`EntityHistory`对象的属性相同，尽管我们可能希望使用一些日期时间属性来扩展历史对象。

我了解如何[重写`DbContext.SaveChanges`以写入历史/审计表](http://jmdority.wordpress.com/2011/07/20/using-entity-framework-4-1-dbcontext-change-tracking-for-audit-logging/)。

我想避免做的是必须为我们拥有的每个实体创建重复的历史实体/存储库。

我目前正在探索`OnModelCreating`为每个实体创建一个历史实体，但还没有找到一个很好的例子。

有任何想法吗？

# java - how to package the .class under the web-inf/classes as a jar and put it to the web-inf/lib dir

> ID：13830963
> 
> 赞同：0
> 
> 时间：2012-12-12T00:44:17.160
> 
> 标签：java, jakarta-ee

I have a java web application name `webapp`,when I export it to a war,the source codes will be compiled to the WEB-INF/classes.

Now I want these classed be compressed to a jar,and put into the WEB-INF/lib.

I have tried this:

create a new java project named `webapp_jar`.

Copy all the source codes under the `webapp/src` to the `webapp_jar/src`,configurate the build path to make the project work.

Add the `webapp_jar` reference to `webapp` project.

However ,when I run the `webapp`,it seems that the classes defined at `webapp_jar` can not be found.

Is this possible?

BTW,I use the eclipse ee ide.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:06:23.433

have you try ant [https://ant.apache.org/](https://ant.apache.org/) ? you could make a jar and copy it to folder you want and build the war after. But , if I anderstand, you would package all the app to a jar ? I think your webapp can't work without a servlet or two ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T04:50:54.817

This is really easy to do with maven by creating two subject projects, one to build the war, and the other as a jar project and then use the jar project as a dependency on your war project which would put the jar inside the lib directory when packaging the war.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T00:30:09.417

No I use the `Web Deployment Assembly settings` in eclipse. I worked.

You can find details [here](http://steveperkins.net/blog/using-web-deployment-assembly-options-to-make-eclipse-play-nice-with-maven/).

# css - 使用字体时的随机字母间距

> ID：13830970
> 
> 赞同：0
> 
> 时间：2012-12-12T00:45:28.350
> 
> 标签：css, cross-browser, font-face, webfonts

我正在使用这样的 CSS：

```
@font-face {
    font-family: Chocolat;
    src: url('../fonts/chocolat.eot');
    src: url('../fonts/chocolat.eot?#iefix') format('embedded-opentype'),
         url('../fonts/chocolat.woff') format('woff'),
         url('../fonts/chocolat.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
}

html, 
body
{
    line-height: 1;
    margin: 0;
    padding: 0;
    font: 15px Chocolat, Arial, Helvetica, sans-serif;
    color: #000000;
} 
```

该页面在 IE7、IE8、IE9 以及最新版本的 FireFox 和 Chrome 中大部分时间看起来都是正确的。每隔几次页面加载，部分或全部页面将具有每个字母之间的间距关闭的区域。有时 2 个字母挤在一起，然后接下来的 2 个字母有很多额外的空间（几个像素，但明显且丑陋）。我不是很肯定，但我认为它只发生在 IE8 中，并且可能在兼容模式下也不会发生。它非常随机，现在很难快速检查。

我无法打开其他格式，但是当我在 Windows 中打开 TTF 格式时，它会在标题区域显示“OpenType”，然后在详细信息中显示“OpenType Layout，TrueType Outlines”。我对创建字体知之甚少，我只是从艺术家那里得到这个，然后使用 fontsquirrel.com 来创建其他字体。

另一位开发人员推荐`letter-spacing`，但这似乎只在事情看起来不错时才有帮助，而不是在这种随机字母间距模式下。

编辑：添加照片

有时只需单击站点，页面加载看起来像这样（这是 IE8 不处于兼容模式）。看“Start”这个词，S和t很紧。然后单词“What”在W和h之间有太多的空间。在右侧，“Awarded”这个词看起来也与下一张图片大不相同。右边的日期看起来太糟糕了，我什至不认为会有一个 CSS 设置可以让你这样做——它会被称为什么？使我的页面糟糕：真；

![错误的字母间距](../Images/e6111c0c3f9b724d0f27a490c411b731.png)

我所做的只是按 F5 重新加载页面，它看起来不错：

![良好的字母间距](../Images/c07469eb9ece62d6f5d356e9fcae014b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:11:58.223

改变这个：

```
html, 
body
{
    line-height: 1;
    margin: 0;
    padding: 0;
    font: 15px Chocolat, Arial, Helvetica, sans-serif;
    color: #000000;
} 
```

对此：

```
html, 
body
{
    line-height: 1;
    margin: 0;
    padding: 0;
    font: 15px Chocolat;
    color: #000000;
} 
```

所以只是字体：行，似乎已经解决了这个问题。

我猜 IE8 必须使用一种后备字体（可能是 Arial）进行一些初始布局计算，然后尝试调整（以一种糟糕的方式）。我会假设如果它是第一个页面加载，但那不是它发生的时候。在那之后的某个几乎随机的时间发生。在应用修复之前，我每次都可以通过这些步骤重新创建：

1.  打开主页——此时字体看起来不错，可能比应有的略小。

2.  单击仅重新加载同一页面的主页上的链接（如果我使用 F5 刷新则不会发生）。

--在这一点上，字体看起来很糟糕，就像我上面的例子

1.  再次点击相同的链接

--此时字体看起来很完美

我可以关闭并重新打开浏览器，或者只是按 F5，然后一遍又一遍地重复上述步骤，每次都得到相同的结果。

更改了 CSS 中的一行，现在无法重新创建。

# javascript - 第一次创建 JavaScript API

> ID：13830977
> 
> 赞同：5
> 
> 时间：2012-12-12T00:46:04.693
> 
> 标签：javascript, jquery, api

我第一次为响应式网页/Web 应用程序（移动设备）创建商业 API。

我是新手，可悲的是，我独自工作以及 Javascript 的新手（漫长而复杂的故事）。

我只是想知道业内人士是否可以就以下“获取”电话格式提供他们的专业意见：

```
var getSample = function(params) {
    //Returns Object
    return $.ajax({ 
        url: URL + 'downloadQuadrat.php',
        type: 'GET',
        data: { 'projectID': params.pid, 'quadratID': params.qid },
        dataType: dataType
    });
} 
```

函数调用：

```
var printList = function(lid,options,get) {
    var list = $("ul#"+lid);
    var promise = get(options);

    promise.promise().then(
        function(response) {
            var items = response;
            list.empty();

            $.each(items, function(item,details) {
                var ul = $('<ul/>');
                ul.attr('id', lid+'_'+details.ID);
                var li = $('<li/>')
                .text(details.ID)
                .appendTo(list);
                ul.appendTo(list);

                $.each(details,function(key,value) {
                    var li = $('<li/>')
                    .text(key+': '+value)
                    .appendTo(ul);
                });
            });
        }
    );
} 
```

任何输入或指导将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T02:38:00.703

我*本身*不是该行业的专业人士，但我认为有几件事可以改进您的代码：

*   根据通用约定对其进行格式化。如果没有适当的缩进，很难看到你的代码在做什么。
*   只需使用`$("#"+lid)`而不是`$("ul#"+lid)`. `ul`开头并没有添加任何歧义，因为属性`id`必须是唯一的，它只会使解析时间更长。
*   在这种情况下放弃本地存储。并非所有浏览器都支持它，据我所知，您在这里不需要它。直接使用响应返回的数据即可。

以下是我将如何更改您的代码：

```
var printList = function(lid, options, get) {
    var promise = get(options);
    var list = $("#" + lid);

    promise.success(function(response) {
        var data = response;
        list.empty();
        $.each(data, function(item, details) {
            var ul = $('<ul/>').attr('id', lid + '_' + details.ID);
            var li = $('<li/>').text(details.ID).appendTo(list);
            ul.appendTo(list);
            $.each(details, function(key, value) {
                var li = $('<li/>').text(key + ': ' + value).appendTo(ul);
            });
        });
    });
} 
```

**编辑：**您的代码的编辑版本对我来说看起来不错，除了次要`ul#`的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T02:54:55.513

还有一些建议可以让你的 API 看起来更专业一点：

1 - 命名空间

使用命名空间将代码整齐地打包在自己的空间中，不会与页面上的其他函数定义发生冲突。像这样开始：

```
window.MyNamespace =  {};
MyNamespace.get = function(qid, pid) {
   //things
};
MyNamespace.anotherFunction = function() {
   //other stuff
} 
```

如果您的代码开始变大，您可以将整个代码封装在一个闭包中。您也可以将其全部定义为类，然后将其实例化一次，以使您的代码更整洁，并允许您存储实例变量并调用 this.anotherFunction()。如果您愿意，我也可以提供这些示例。

2 - API 方法签名

我更喜欢看到的另一件事是函数的显式参数，而不是函数 get(params) 样式代码。使参数显式使您的代码更易于阅读和理解，并阻止临时黑客攻击，这在编写 API 时尤其重要。这是一个例子，因为你可以并不意味着你应该。

3 - 配置

尝试将诸如 ID 和 URL 之类的内容移动到变量中，以使您的代码更易于重用和使用。

Generally, Javascript developers are famous for looking at your code before they look at your API docs so anything you can do to make the API function names and argument names more expressive and self-documenting will help them.

# r - 将每个数据帧行除以 R 中的向量

> ID：13830979
> 
> 赞同：23
> 
> 时间：2012-12-12T00:46:13.120
> 
> 标签：r, vector, dataframe, divide

我正在尝试将具有 16 列的数据框中的每个数字除以每列的特定数字。这些数字存储为数据帧，其中 1-16 对应于较大数据帧第 1-16 列中的样本。每列有一个数字，我需要除以较大电子表格中的每个数字并将输出打印到最终电子表格中。

这是我开始的例子。要分割的电子表格。

```
 X131.478.1 X131.478.2 X131.NSC.1 X131.NSC.2 X166.478.1 X166.478.2
1/2-SBSRNA4          4          2          2          6          7          6
A1BG                93         73         88         86         58         65
A1BG-AS1           123        103         96        128         46         57 
```

将电子表格除以的数字

```
X131.478.1 1.0660880
X131.478.2 0.9104053
X131.NSC.1 0.8642545
X131.NSC.2 0.9611866
X166.478.1 0.9711406
X166.478.2 1.0560121 
```

而预期的结果，不一定像我在这里所做的那样四舍五入。

```
 X131.478.1 X131.478.2 X131.NSC.1 X131.NSC.2 X166.478.1 X166.478.2
1/2-SBSRNA4          3.75          2.19          2.31          6.24          7.20         5.68
A1BG                87.23         80.17         101.82         89.47         59.72         61.55
A1BG-AS1           115.37        113.13         111.07        133.16         47.36         53.97 
```

我尝试简单地划分数据帧 mx2 = mx/sf，其中 mx 是大数据集，sf 是要除以的数字数据帧。这似乎将所有内容除以 sf 数据集中的第一个数字。

除法的数字由estimateSizeFactors 生成，它是DESeq 包的一部分，如果有帮助的话。

任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-12T01:05:38.537

`sweep`对于这类操作很有用，但它需要一个矩阵作为输入。因此，将您的数据框转换为矩阵，执行操作然后转换回来。例如，一些虚拟数据，我们将矩阵各列中的每个元素除以`mat`向量中的相应值`vec`：

```
mat <- matrix(1:25, ncol = 5)
vec <- seq(2, by = 2, length = 5)

sweep(mat, 2, vec, `/`) 
```

在使用中，我们有：

```
> mat
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    6   11   16   21
[2,]    2    7   12   17   22
[3,]    3    8   13   18   23
[4,]    4    9   14   19   24
[5,]    5   10   15   20   25
> vec
[1]  2  4  6  8 10
> sweep(mat, 2, vec, `/`)
     [,1] [,2]     [,3]  [,4] [,5]
[1,]  0.5 1.50 1.833333 2.000  2.1
[2,]  1.0 1.75 2.000000 2.125  2.2
[3,]  1.5 2.00 2.166667 2.250  2.3
[4,]  2.0 2.25 2.333333 2.375  2.4
[5,]  2.5 2.50 2.500000 2.500  2.5
> mat[,1] / vec[1]
[1] 0.5 1.0 1.5 2.0 2.5 
```

要从数据框转换，请使用`as.matrix(df)`or `data.matrix(df)`，`as.data.frame(mat)`反之亦然。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-09-17T20:14:48.823

假设我们有一个数据框`df`：

```
> df
  a b   c
1 1 3 100
2 2 4 110 
```

我们想通过相同的向量来划分每一行，`vec`：

```
> vec <- df[1,]
> vec
  a b   c
1 1 3 100 
```

然后我们可以使用`mapply`如下：

```
> mapply('/', df, vec)
     a        b   c
[1,] 1 1.000000 1.0
[2,] 2 1.333333 1.1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T01:03:41.597

只是为了多样化，你也可以使用`mapply`

```
mx <- structure(list(X131.478.1 = c(4L, 93L, 123L), X131.478.2 = c(2L, 
73L, 103L), X131.NSC.1 = c(2L, 88L, 96L), X131.NSC.2 = c(6L, 
86L, 128L), X166.478.1 = c(7L, 58L, 46L), X166.478.2 = c(6L, 
65L, 57L)), .Names = c("X131.478.1", "X131.478.2", "X131.NSC.1", 
"X131.NSC.2", "X166.478.1", "X166.478.2"), class = "data.frame", row.names = c("1/2-SBSRNA4", 
"A1BG", "A1BG-AS1"))

sf <- structure(list(V1 = c(1.066088, 0.9104053, 0.8642545, 0.9611866, 
0.9711406, 1.0560121)), .Names = "V1", row.names = c("X131.478.1", 
"X131.478.2", "X131.NSC.1", "X131.NSC.2", "X166.478.1", "X166.478.2"
), class = "data.frame")

mapply(function(x, y) x * y, mx, t(sf))

    X131.478.1 X131.478.2 X131.NSC.1 X131.NSC.2 X166.478.1 X166.478.2
[1,]   4.264352   1.820811   1.728509    5.76712   6.797984   6.336073
[2,]  99.146184  66.459587  76.054396   82.66205  56.326155  68.640787
[3,] 131.128824  93.771746  82.968432  123.03188  44.672468  60.192690 
```

但为此，我认为乔希的答案更好……加文的更好！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-19T08:43:57.490

这不过是**逐元素矩阵乘法**：

```
mat <- matrix(c(4,2,2,6,7,6, 93,73,88,86,58,65, 123,103,96,128,46,57), nrow=3, byrow=T)

vec = c(1.0660880,0.9104053,0.8642545,0.9611866,0.9711406,1.0560121)

mat %o% 1/vec

           [,1]      [,2]       [,3]       [,4]      [,5]      [,6]
[1,]   3.752035  2.080761   1.876018   6.242284  6.566062  6.242284
[2,] 102.152305 75.169342  96.660246  88.555663 63.707889 66.931606
[3,] 142.319190 97.536761 111.078392 121.210732 53.225063 53.976654 
```

为此，我们使用了[外积方法](https://stackoverflow.com/a/22212499/202229)，因为直接尝试`mat %*% 1/vec`会出错，`non-conformable arguments`因为它们具有不同的形状。或者查看[https://stackoverflow.com/search?q=%5Br%5D+multiply+matrix+by+vector上的许多帖子](https://stackoverflow.com/search?q=%5Br%5D+multiply+matrix+by+vector)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T00:53:08.757

你可以使用`transform`

```
mx2 <- transform(mx, 
    X131.478.1=X131.478.1/sf["X131.478.1",1],
    X131.478.2=X131.478.2/sf["X131.478.2",1],
    etc
) 
```

用 16 列输入相当多，但它应该可以工作。

# perl - 比较具有不同列号和行号的两个文件

> ID：13830981
> 
> 赞同：1
> 
> 时间：2012-12-12T00:46:17.433
> 
> 标签：perl, awk

我想比较两个具有不同列号和行号的大文件，并打印那些有共同词（如`KJ`）的行：

文件1：

```
XT1 123 aa NR
XT2 444 bb GF 
XT3 666 aa KJ 
```

文件2

```
fc KK pcn
wd CC KJ 
```

输出

```
XT3 666 aa wd CC KJ 
```

我试过了，但我什么也没得到：

```
awk 'FNR==NR{a[$4]=$3;next}{if (a[$3])print a[$3],$0}' file1 file2 
```

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T01:01:02.367

根据您提供的有限信息，

```
my $file1 = '...';
my $file2 = '...';

my %file2;
{
   open(my $fh2, '<', $file2)
      or die("Can't open \"$file2\": $!\n');
   while (<$fh2>) {
      my @F = split;
      $file2{$F[2]} = join(' ', @F[0,1]);
   }
}

{
   open(my $fh1, '<', $file1)
      or die("Can't open \"$file1\": $!\n');
   while (<$fh1>) {
      my @F = split;
      print(join(' ', @F[0..2], $file2{$F[3]}, $F[3]), "\n")
         if $file2{$F[3]};
   }
} 
```

我假设如下：

*   `file2`适合内存作为行的散列。
*   关键字不会在 中出现两次`file2`。
*   您只对将 的第 4 列`file1`与 的第 3 列进行匹配感兴趣`file2`。

它保持行的顺序，因为它们出现在`file1`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T01:01:57.677

你很接近，试试这个：

```
awk 'FNR==NR { a[$4]=$1 FS $2 FS $3; next } $3 in a { print a[$3], $0 }' file1 file2 
```

结果：

```
XT3 666 aa wd CC KJ 
```

快速解释：

> 在“file1”中，将第 4 列添加到以第 1、2 和 3 列为值的数组中。
> 
> 在“file2”中，检查第 3 列是否在数组中，如果是，则打印出它的值和当前行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T01:00:51.247

我会为每个文件创建一个单独的单词散列到行号，并为每个文件创建一个存储每一行​​的数组。

然后我会迭代文件 1 中的单词列表，并在文件 2 中查找匹配项。如果找到匹配项，那么我会在两个文件中查找该单词的行号。使用行号，我将从数组中检索“行”，并返回唯一单词列表。

# magento - 与 Zend Studio 的远程连接

> ID：13830983
> 
> 赞同：1
> 
> 时间：2012-12-12T00:46:19.760
> 
> 标签：magento, zend-studio

我一直在寻找一个 IDE，它允许我导入所有必要的文件来开发和调试 Magento 模块，并发现 Zend Studio 被推荐。我无法连接到我的 ftp 以下载文件。我使用 Filezilla 上的所有凭据创建了一个远程连接，当我测试连接时它会成功。现在，当我进入下一步时，它会告诉我：

> 您输入的项目目录在服务器上不存在。请输入有效的项目目录

主机名与我的 ftp 服务器匹配，用户名和密码有效，我要连接的目录存在于服务器上，并且我在端口 21 上，该端口没有被我的防火墙中断。我不知道我是否应该坚持使用 Zend，而且我无法正确测试它。任何有关解决此问题的建议或任何其他 IDE 建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T23:20:09.203

> 我要连接的目录存在于服务器上

仔细检查。请注意，您输入的路径是相对的：“远程连接配置文件”中有“初始目录”，项目属性->“远程服务器支持”中有“项目目录”

# php - PHP 不区分大小写的用户名匹配

> ID：13830985
> 
> 赞同：0
> 
> 时间：2012-12-12T00:46:26.180
> 
> 标签：php, authentication, case-insensitive

**答案编辑：**

`if (get_user_data( $input_user, $logindata ) === $input_pwd ) {`
解决方法是改变：
`if (get_user_data(strtolower($input_user), $logindata) === $input_pwd ) {`

以便用户名被强制小写。我只需要注意将我的用户名也全部存储为小写。

我知道`strcasecmp`。不过，我不确定这将如何应用于我的工作代码，因为您只能比较 2 个变量。

我能否`preg_match`在下面的工作代码上下文中不区分大小写？我可以将`/i`正则表达式添加到我的`preg_match`命令到返回的变量吗？

我只希望用户输入的用户名（包括域名）不区分大小写。（即 uSeRnAMe@dOmAIN1.CoM）而无需将有效用户名的每个组合添加到我的伪数据库中！

**这是我的工作代码：**

```
// Get users
$input_pwd = ( isset( $_POST["password"] ) ? $_POST["password"] : '' );
$input_user = ( isset( $_POST["username"] ) ? $_POST["username"] : '' );

// Your pseudo database here
$usernames = array(
"username@domain1.com",
"username2@domain1.com",
"username3@domain1.com",
"username1@domain2.com", 
"/[a-z][A-Z][0-9]@domain2\.com/",   // use an emtpy password string for each of these
"/[^@]+@domain3\.com/"              // entries if they don't need to authenticate
);

$passwords = array( "password1", "password2", "password3", "password4", "", "" );

// Create an array of username literals or patterns and corresponding redirection targets
$targets = array(
"username@domain1.com"           => "http://www.google.com",
"username2@domain1.com"          => "http://www.yahoo.com",
"username3@domain1.com"          => "http://www.stackoverflow.com",
"username1@domain2.com"          => "http://www.serverfault.com",
"/[a-z][A-Z][0-9]@domain2\.com/" => "http://target-for-aA1-usertypes.com",
"/[^@]+@domain3\.com/"           => "http://target-for-all-domain3-users.com",
"/.+/"                           => "http://default-target-if-all-else-fails.com",
);

$logindata = array_combine( $usernames, $passwords );

if ( get_user_data( $input_user, $logindata ) === $input_pwd ) {

   session_start();
   $_SESSION["username"] = $input_user;
   header('Location: ' . get_user_data( $input_user, $targets ) );
   exit;

} else {
// Supplied username is invalid, or the corresponding password doesn't match
   header('Location: login.php?login_error=1'); 
   exit; 
}

function get_user_data ( $user, array $data ) {

    $retrieved = null;

    foreach ( $data as $user_pattern => $value ) {

        if (
               ( $user_pattern[0] == '/' and preg_match( $user_pattern, $user ) )
            or ( $user_pattern[0] != '/' and $user_pattern === $user)
        ) {
            $retrieved = $value;
            break;
        }
    }
    return $retrieved;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T01:00:25.067

您可以在 PHP 中使用 i 进行不区分大小写的匹配。例如，以下将打印“This matches!”：

```
<?php
if ( preg_match('/def/i', 'ABCDEF') ) {
    echo 'This matches!';
}
?> 
```

所以只需将 i 添加到模式中，大小写将被忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T00:57:58.340

如果您想要不区分大小写的用户名，一种方法是在存储新用户名时始终将其小写，然后在检查时始终将比较值小写。（这比使用快得多`preg_match`。）

# widget - 自定义 Wordpress 小部件 - 3 个文本字段

> ID：13830987
> 
> 赞同：0
> 
> 时间：2012-12-12T00:46:49.510
> 
> 标签：widget, wordpress, custom-widgets

我找到了一个教程[http://www.makeuseof.com/tag/how-to-create-wordpress-widgets/](http://www.makeuseof.com/tag/how-to-create-wordpress-widgets/)，它展示了如何创建一个带有标题字段的基本 WP 小部件。

谁能帮我向小部件添加两个字段，以便我收集：

*   标题
*   内容
*   一条链接

我想我知道如何使用它并设置它的样式。

非常感谢帮助！

事件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T12:11:43.117

**添加到文件的代码**

如果要为内容添加文本区域，可以将以下行放入`function form($instance)`：

```
printf(
    '<textarea class="widefat" rows="16" cols="20" id="%1$s" name="%2$s">%3$s</textarea>',
    $this->get_field_id( 'content' ),
    $this->get_field_name( 'content' ),
    $content
); 
```

`$content`你之前插入的内容在哪里。

对于文本字段，您可以将以下行放入 samen 函数中：

```
printf( '<p>
        <label for="%1$s">%2$s</label>
        <input class="widefat" id="%1$s" name="%3$s" type="text" value="%4$s" />
    </p>',
    $this->get_field_id( 'link' ),
    __( 'Title:', $this->language ),
    $this->get_field_name( 'link' ),
    esc_attr( $link )
); 
```

`$link`你之前插入的内容在哪里。

将以下行添加到`function update($new_instance, $old_instance)`：

```
$instance['content'] = $new_instance['content'];
$instance['link']    = $new_instance['link']; 
```

将以下行添加到`function widget($args, $instance)`：

```
$content = empty( $instance['content'] ) ? '' : wpautop( $instance['content'] );
$link    = empty( $instance['link'] ) ? '' : esc_attr( $instance['link'] );

if ( ! empty( $content ) )
    echo $content;

if ( ! empty ( $link ) )
    echo "<a href='$link'>$link</a>"; 
```

如果您不想自动将`<p>`' 添加到您的内容中，只需删除`wpautop`.

**函数的作用**

`function form($instance)`显示后端小
`function update($new_instance, $old_instance)`部件表单在保存小部件表单值时对其进行清理。
`function widget($args, $instance)`显示widget的前端显示

因此，如果要更改小部件设置窗口的显示，请编辑`function form($instance)`.

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-03T09:39:49.563

非常感谢您的帮助，有一个小问题：当您保存内容时，所有内容都会从表单中消失。所以我像这样修复了解析： $instance 数组开头的新字段

```
function form($instance)
    {
    $instance = wp_parse_args( (array) $instance, array( 
        'title' => '',
        'bannertext' => '',
        'link' => '' 
    ) );
    $title = $instance['title'];
    $bannertext = $instance['bannertext'];
    $link  = $instance['link']; 
```

然后制作 printf() 内容

# ios - 它不允许我创建一个出口

> ID：13830988
> 
> 赞同：0
> 
> 时间：2012-12-12T00:46:59.747
> 
> 标签：ios, xcode, ios6

我的 Storyboard 中有一个 Table View Controller 对象，但我已经将它创建为一个名为 StaticDetailViewController 的自定义类，我将它创建为 UITableViewController 的子类。

但是，当我从视图拖动到助手视图中的 .h 文件时，没有出现连接选项。为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T02:37:47.230

您必须在 .h 文件中为 @interface 打开和关闭花括号。出于某种原因，除非您这样做，否则它不会让您使用助理编辑器控制拖动...（屏幕截图）

![在此处输入图像描述](../Images/2445bdd7e7ccdf463880e43a4ae3d6f1.png)

# wpf - 强制传播价值

> ID：13830989
> 
> 赞同：10
> 
> 时间：2012-12-12T00:47:01.290
> 
> 标签：wpf, xaml, data-binding, dependency-properties, coerce

**tl; dr：强制值不会跨数据绑定传播。当代码隐藏不知道绑定的另一端时，如何强制更新数据绑定？**

* * *

我在`CoerceValueCallback`WPF 依赖属性上使用 a ，但我遇到了强制值不会传播到绑定的问题。

**Window1.xaml.cs**

```
using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Media;

namespace CoerceValueTest
{
    public class SomeControl : UserControl
    {
        public SomeControl()
        {
            StackPanel sp = new StackPanel();

            Button bUp = new Button();
            bUp.Content = "+";
            bUp.Click += delegate(object sender, RoutedEventArgs e) {
                Value += 2;
            };

            Button bDown = new Button();
            bDown.Content = "-";
            bDown.Click += delegate(object sender, RoutedEventArgs e) {
                Value -= 2;
            };

            TextBlock tbValue = new TextBlock();
            tbValue.SetBinding(TextBlock.TextProperty,
                               new Binding("Value") {
                                Source = this
                               });

            sp.Children.Add(bUp);
            sp.Children.Add(tbValue);
            sp.Children.Add(bDown);

            this.Content = sp;
        }

        public static readonly DependencyProperty ValueProperty = DependencyProperty.Register("Value",
                                                                                              typeof(int),
                                                                                              typeof(SomeControl),
                                                                                              new PropertyMetadata(0, ProcessValueChanged, CoerceValue));

        private static object CoerceValue(DependencyObject d, object baseValue)
        {
            if ((int)baseValue % 2 == 0) {
                return baseValue;
            } else {
                return DependencyProperty.UnsetValue;
            }
        }

        private static void ProcessValueChanged(object source, DependencyPropertyChangedEventArgs e)
        {
            ((SomeControl)source).ProcessValueChanged(e);
        }

        private void ProcessValueChanged(DependencyPropertyChangedEventArgs e)
        {
            OnValueChanged(EventArgs.Empty);
        }

        protected virtual void OnValueChanged(EventArgs e)
        {
            if (e == null) {
                throw new ArgumentNullException("e");
            }

            if (ValueChanged != null) {
                ValueChanged(this, e);
            }
        }

        public event EventHandler ValueChanged;

        public int Value {
            get {
                return (int)GetValue(ValueProperty);
            }
            set {
                SetValue(ValueProperty, value);
            }
        }
    }

    public class SomeBiggerControl : UserControl
    {
        public SomeBiggerControl()
        {
            Border parent = new Border();
            parent.BorderThickness = new Thickness(2);
            parent.Margin = new Thickness(2);
            parent.Padding = new Thickness(3);
            parent.BorderBrush = Brushes.DarkRed;

            SomeControl ctl = new SomeControl();
            ctl.SetBinding(SomeControl.ValueProperty,
                           new Binding("Value") {
                            Source = this,
                            Mode = BindingMode.TwoWay
                           });
            parent.Child = ctl;

            this.Content = parent;
        }

        public static readonly DependencyProperty ValueProperty = DependencyProperty.Register("Value",
                                                                                              typeof(int),
                                                                                              typeof(SomeBiggerControl),
                                                                                              new PropertyMetadata(0));

        public int Value {
            get {
                return (int)GetValue(ValueProperty);
            }
            set {
                SetValue(ValueProperty, value);
            }
        }
    }

    public partial class Window1 : Window
    {
        public Window1()
        {
            InitializeComponent();
        }
    }
} 
```

**Window1.xaml**

```
<Window x:Class="CoerceValueTest.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="CoerceValueTest" Height="300" Width="300"
    xmlns:local="clr-namespace:CoerceValueTest"
    >
    <StackPanel>
        <local:SomeBiggerControl x:Name="sc"/>
        <TextBox Text="{Binding Value, ElementName=sc, Mode=TwoWay}" Name="tb"/>
        <Button Content=" "/>
    </StackPanel>
</Window> 
```

即两个用户控件，一个嵌套在另一个内部，一个嵌套在一个窗口中。内部用户控件具有`Value`绑定到`Value`外部控件的依赖属性的依赖属性。在窗口中，一个`TextBox.Text`属性被绑定到`Value`外部控件的属性上。

内部控件`CoerceValueCallback`注册了一个`Value`属性，其效果是该`Value`属性只能分配偶数。

*请注意，出于演示目的，此代码已简化。真实版本不会在构造函数中初始化任何东西；这两个控件实际上具有控件模板，这些模板可以完成此处相应构造函数中所做的所有事情。也就是说，在实际代码中，外部控件不知道内部控件。*

当将偶数写入文本框并更改焦点时（例如，通过将虚拟按钮聚焦在文本框下方），两个`Value`属性都会得到适当更新。但是，当在文本框中写入奇数时，`Value`内部控件的属性不会改变，而`Value`外部控件的属性以及`TextBox.Text`属性都会显示奇数。

我的问题是：**如何在文本框中强制更新（理想情况下也可以在外部控件的`Value`属性中，当我们在它的时候）？**

我[在同一个问题上找到了一个 SO question](https://stackoverflow.com/questions/3323461/why-does-my-data-binding-see-the-real-value-instead-of-the-coerced-value)，但并没有真正提供解决方案。它暗示使用属性更改事件处理程序来重置值，但据我所知，这意味着将评估代码复制到外部控件......这并不可行，因为我的实际评估代码依赖于一些信息基本上只有内部控制才知道（不费力气）。

此外，[这篇](http://dotnetlearning.wordpress.com/2010/10/05/textbox-binding-coercevalue/)博文建议调用`UpdateTarget`.内在控制。我不知道在哪里执行此操作，但在方法中，尚未设置强制值（因此更新绑定还为时过早），而在值由 重置的情况下，属性值将保持原样，因此不会调用属性更改的回调（如[本讨论](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/cc2f0fe3-a7b3-4f17-8915-a72a41fe4729/)中所暗示的那样）。`TextBox.Text``CoerceValueCallback``UpdateSource``Value``CoerceValue``CoerceValue`

我想到的一种可能的解决方法是用`SomeControl`常规属性和实现替换依赖属性（因此即使值已被强制`INotifyPropertyChanged`，我也可以手动触发事件）。`PropertyChanged`但是，这意味着我不能再声明对该属性的绑定，因此这不是一个真正有用的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-28T14:18:10.403

一段时间以来，我一直在寻找这个相当讨厌的错误的答案。一种不需要在绑定上强制 UpdateTarget 的方法是：

*   删除您的*CoerceValue*回调。
*   *将CoerceValue*回调的逻辑转移到*ProcessValueChanged*回调中。
*   在适用时（当数字为奇数时）将您的强制值分配给您的*Value属性*
*   您最终会遇到两次*ProcessValueChanged*回调，但您的强制值最终会被有效地推送到您的绑定中。

根据您的代码，您的依赖属性声明将变为：

```
public static readonly DependencyProperty ValueProperty = 
                       DependencyProperty.Register("Value",
                                                   typeof(int),
                                                   typeof(SomeControl),
                                                   new PropertyMetadata(0, ProcessValueChanged, null)); 
```

然后，您的 *ProcessValueChanged*将变为：

```
private static void ProcessValueChanged(object source, DependencyPropertyChangedEventArgs e)
    {
        int baseValue = (int) e.NewValue;
        SomeControl someControl = source as SomeControl;
        if (baseValue % 2 != 0) 
        {
            someControl.Value = DependencyProperty.UnsetValue;
        }
        else
        {
            someControl.ProcessValueChanged(e);
        }
    } 
```

我稍微修改了您的逻辑，以防止在需要强制值时引发事件。如前所述，将强制值分配给*someControl.Value*将导致您的*ProcessValueChanged*被连续调用两次。放置 else 语句只会引发一次具有有效值的事件。

我希望这有帮助！

# iphone - UIImageView 在动画期间显示相机以错误的方向拍摄的图像

> ID：13830995
> 
> 赞同：2
> 
> 时间：2012-12-12T00:47:44.817
> 
> 标签：iphone, ios, animation, camera, avfoundation

我正在使用 AVFoundation 在 UIViewController 的纵向摄像头视图中使用前置摄像头以编程方式捕获静止图像。这一切都很好。

我遇到的问题是，当我通过动画在 UIImageView 内显示我在当前会话中拍摄的图片时，所有图片都显示为横向左侧，我需要以它们拍摄的方向显示图片，即纵向。

我曾尝试强制设备/图像方向为纵向，但没有任何运气。

如果有人能告诉我哪里出错了，那就太好了。谢谢

我在下面包含了我的代码片段。

//拍照并将拍摄的图像存储到可变数组

-（无效）拍照{

```
AVCaptureConnection *videoConnection = nil;
for (AVCaptureConnection *connection in stillImageOutput.connections)
{
    for (AVCaptureInputPort *port in [connection inputPorts])
    {
        if ([[port mediaType] isEqual:AVMediaTypeVideo] )
        {
            videoConnection = connection;
            break;
        }
    }
    if (videoConnection) { break; }
}

NSLog(@"about to request a capture from: %@", stillImageOutput);  
[stillImageOutput captureStillImageAsynchronouslyFromConnection:videoConnection completionHandler: ^(CMSampleBufferRef imageSampleBuffer, NSError *error)
 {
     if ([videoConnection isVideoOrientationSupported])
         [videoConnection setVideoOrientation:[UIDevice currentDevice].orientation];

     CFDictionaryRef exifAttachments = CMGetAttachment( imageSampleBuffer, kCGImagePropertyExifDictionary, NULL);
     if (exifAttachments)
     {
         // Do something with the attachments.
         NSLog(@"attachements: %@", exifAttachments);
     }
     else
         NSLog(@"no attachments");

     NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];
     UIImage *image = [[UIImage alloc] initWithData:imageData];

     UIImage *orientedImage= [[UIImage alloc] initWithCGImage: image.CGImage scale:1.0 orientation:UIImageOrientationUp];
     NSLog(@"the image oreintation is %i", orientedImage.imageOrientation);

     [photosTakenArray addObject:orientedImage]; 
```

...

这就是我使用 UIImageView startAnimating 函数显示相机在另一个 UIViewController 中拍摄的图像的方式。这就是相机拍摄的照片都以横向显示的问题所在。在这种情况下，photoViewer 是我的 UIImageView，photosToShow 是对上面 photosTakenArray 的 NSArray 引用。

```
if ([photosToShow count]>0) {

    NSLog(@"we have %i photos to display", [photosToShow count]);
    photoViewer.animationImages = photosToShow;

    // all frames will execute in 1.75 seconds
    photoViewer.animationDuration = 1.75;
    // repeat the annimation forever
    photoViewer.animationRepeatCount = 0;
    // start animating
    [photoViewer startAnimating]; 
```

...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:33:59.893

我也遇到了同样的问题然后我改变了我的代码`delegate` `imagePickerController`

```
-(void)imagePickerController:(UIImagePickerController*)picker didFinishPickingMediaWithInfo:(NSDictionary*)info
{
    //NSLog(@"%@",info);

    dataImage = UIImageJPEGRepresentation([info objectForKey:@"UIImagePickerControllerOriginalImage"],1);
 } 
```

希望对你有帮助

# javascript - 页面添加/加载新图像时捕获事件或其他内容？

> ID：13830996
> 
> 赞同：0
> 
> 时间：2012-12-12T00:47:45.580
> 
> 标签：javascript, image, events, dom, load

当网站第一次加载时，我很容易用 $('img') 遍历所有图像但是如果网站加载新图像，特别是像 google/bing 图像搜索，是否有某种方法可以捕获事件或其他东西以便处理那些图片也是？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:40:17.933

您可以使用 DOM 突变观察器来检测何时`<img>`添加了新元素。有关更多详细信息，请参阅[此 MDN 帖子](https://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/)。您将要查找对象的`addedNodes`属性`MutationRecord`。

# ruby-on-rails - 为什么我的参数不会传递给我的模型？

> ID：13830997
> 
> 赞同：0
> 
> 时间：2012-12-12T00:47:52.897
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我试图将我的参数中的一个简单变量传递给一个类方法，但它似乎不起作用。这似乎很初级，但我仍在学习。有人可以解释为什么这不起作用并提供替代方案吗？我的代码如下。

控制器

```
@profile = current_user.profile
@dogs = Dog.by_profile(params[@profile]) 
```

模型

```
def self.by_profile(profile)
   Dog.where(kids_under_10: profile.kids_under_10 )
end 
```

*注意：`profile.kids_under_10`是一个布尔值。当我手动将其替换为 true 或 false 时，一切正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T00:52:01.330

`params`是一个包含 url 参数的特殊 rails 哈希。因此，您的代码正在寻找与包含您的用户配置文件的字符串版本的请求一起传递的 url 参数。这绝对不是你想要做的。

当您调用 rails 模型方法时，您可以像任何其他方法一样使用参数调用它：`Dog.by_profile(@profile)`

您不想要参数部分，或者您正在尝试做一些应该重构的疯狂事情:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T00:52:01.837

您的键值`params`应如下所示`params[:profile]`。

所以试试`@dogs = Dog.by_profile(params[:profile])`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T00:52:29.283

因为 params 是来自请求的哈希值。您正在做的是尝试使用错误的实例变量搜索散列。

我认为你的意思是做`params[:profile]`或只是@profile

# php - phpmailer file_get_contents 和动态 php 代码

> ID：13830999
> 
> 赞同：0
> 
> 时间：2012-12-12T00:47:55.307
> 
> 标签：php, encoding, file-get-contents, phpmailer

好的，我有点绕圈子，我想做的很简单。我有一个网页，它将信息从 API 提取到一个对象中，遍历各种对象并在简单的 html 表中显示信息。

现在，当我加载页面时，此信息会按预期显示。里面有很多内容。

我想要做的是设置一个 cron 作业以基于此 php 页面通过电子邮件发送每日报告。使用标准 HTML，它似乎可以正常工作，当我使用动态 php 代码时，它似乎把事情搞砸了。

最初我尝试使用标准 php 邮件，这只是显示源代码，有人建议将 file_get_contents 与 phpmailer 一起使用，这就是我现在的位置，但我有点超出我的深度。我应该做某种转义或编码/解码吗，整个想法是我不必逐行转义代码，所以我希望不是:(

这是我正在运行的代码片段：

```
<body>

<?php

$username = 'xxx@gmail.com';
$password = 'xxx';

$url ='xxx.atlassian.net/rest/api/2/search?jql=project+%3D+bug+AND+updated+%3C%3D+2d+AND+status+%3D+%22In+Beta%22+AND+assignee+!%3D+beta_merge+ORDER+BY+priority+DESC';

$curl = curl_init();
curl_setopt($curl, CURLOPT_USERPWD, "$username:$password");
curl_setopt($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 0);

$issue_list = curl_exec($curl);
$issue_json = json_decode($issue_list);
//var_dump($issue_json);
$bugs = $issue_json->issues;

?>
<h2>Table 1</h2>
<table cellspacing="0" cellpadding="3" width="80%">
    <?php foreach ($bugs as $bug)
            {?>
                <tr>
<td><?php echo $bug->fields->issuetype->iconUrl; ?></td>
</tr>

            <?php } ?>
    </table> 
```

现在，如果我加载页面，我会看到：

表格1

```
http://www.xxx.com/images/bug_16.png

http://www.xxx.com/images/bug_16.png

http://www.xxx.com/images/feature_16.png

http://www.xxx.com/images/bug_16.png 
```

但如果我运行这个：

```
<?php

//error_reporting(E_ALL);
error_reporting(E_STRICT);

date_default_timezone_set('America/Toronto');

require_once('../class.phpmailer.php');
//include("class.smtp.php"); // optional, gets called from within class.phpmailer.php if not already loaded

$mail             = new PHPMailer();

$body             = file_get_contents('jira_filters.php');
//$body             = preg_replace('/[\]/','',$body);

$mail->IsSMTP(); // telling the class to use SMTP
$mail->Host       = "smtp.gmail.com"; // SMTP server
$mail->SMTPDebug  = 1;                     // enables SMTP debug information (for testing)
                                           // 1 = errors and messages
                                           // 2 = messages only
$mail->SMTPAuth   = true;                  // enable SMTP authentication
$mail->SMTPSecure = "ssl";                 // sets the prefix to the servier
$mail->Host       = "smtp.gmail.com";      // sets GMAIL as the SMTP server
$mail->Port       = 465;                   // set the SMTP port for the GMAIL server
$mail->Username   = "xxx@gmail.com";  // GMAIL username
$mail->Password   = "xxx";            // GMAIL password

$mail->SetFrom('xxx@gmail.com', 'First Last');

$mail->AddReplyTo("xxx@gmail.com","First Last");

$mail->Subject    = "PHPMailer Test Subject via smtp (Gmail), basic";

$mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test

$mail->MsgHTML($body);

$address = "xxx@him.net";
$mail->AddAddress($address, "John Doe");

$mail->AddAttachment("images/phpmailer.gif");      // attachment
$mail->AddAttachment("images/phpmailer_mini.gif"); // attachment

if(!$mail->Send()) {
  echo "Mailer Error: " . $mail->ErrorInfo;
} else {
  echo "Message sent!";
}

?> 
```

然后这是我在电子邮件到达时看到的输出：

```
issues; ?> 

Table 1

fields->issuetype->iconUrl; ?> 
```

我只想让电子邮件准确显示我在加载页面时在浏览器中看到的内容。有没有一种简单的方法可以做到这一点，尝试搜索但发现很难描述我想要做什么，因为我不知道它是否可以使用 phpmailer 或者我是否需要编码等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T01:35:58.390

您没有运行该文件，只是从字面上获取文件的内容并将它们作为电子邮件正文放置。

试试这个：

```
ob_start();
include 'jira_filters.php'; //execute the file as php
$body = ob_get_clean(); 
```

这`ob_start()`使得每个正常的回显和直接 html、文本等（`<?php`标签外的东西）都被缓冲而不是被输出到某个地方。然后，您可以使用 获取缓冲区中的内容`ob_get_clean()`，并将*其*作为电子邮件发送。