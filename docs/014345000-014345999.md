# StackOverflow 问答 14345000-14345999

# python - IDL 的 INT_TABULATE - SciPy 等价物？

> ID：14345001
> 
> 赞同：3
> 
> 时间：2013-01-15T19:04:43.773
> 
> 标签：python, numpy, scipy, idl, idl-programming-language

我正在将一些代码从 IDL 移到 python 中。一个 IDL 调用是对 INT_TABULATE 的调用，它在固定范围上执行积分。

> INT_TABULATED 函数使用五点 Newton-Cotes 积分公式对闭区间 [MIN(x) , MAX(x)] 上的一组表格数据 { xi , fi } 进行积分。

`Result = INT_TABULATED( X, F [, /DOUBLE] [, /SORT] )`

其中结果是曲线下的面积。

[IDL 文档](http://www.physics.nyu.edu/grierlab/idl_html_help/I16.html#wp750296)

我的问题是，Numpy/SciPy 是否提供类似的集成形式？我看到它`[scipy.integrate.newton_cotes]`存在，但它似乎返回“ [Newton-Cotes 积分](http://docs.continuum.io/scipy/integrate.html)而不是面积的权重和误差系数”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T21:35:04.223

默认情况下，Scipy 不为表格数据提供如此高阶的积分器。最接近您无需自己编码的情况是[`scipy.integrate.simps`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.integrate.simps.htm)，它使用 3 点 Newton-Cotes 方法。

如果您只是想获得可比较的集成精度，您可以将您的`x`和`f`数组拆分为 5 个点块，并一次将它们集成一个，使用通过`scipy.integrate.newton_cotes`执行以下操作返回的权重：

```
def idl_tabulate(x, f, p=5) :
    def newton_cotes(x, f) :
        if x.shape[0] < 2 :
            return 0
        rn = (x.shape[0] - 1) * (x - x[0]) / (x[-1] - x[0])
        weights = scipy.integrate.newton_cotes(rn)[0]
        return (x[-1] - x[0]) / (x.shape[0] - 1) * np.dot(weights, f)
    ret = 0
    for idx in xrange(0, x.shape[0], p - 1) :
        ret += newton_cotes(x[idx:idx + p], f[idx:idx + p])
    return ret 
```

这会在所有间隔上进行 5 点 Newton-Cotes，除了最后一个，它将对剩余的点数进行 Newton-Cotes。不幸的是，这不会给您相同的结果，`IDL_TABULATE`因为内部方法不同：

*   Scipy 使用似乎最小平方拟合的方法计算不等间距点的权重，我不完全理解发生了什么，但代码是纯 python，你可以在你的 Scipy 安装文件中找到它`scipy\integrate\quadrature.py`。

*   `INT_TABULATED`总是对等间距数据执行 5 点 Newton-Cotes。如果数据不是等间距的，它会构建一个等间距的网格，使用三次样条插值这些点的值。你可以在[这里](http://idlastro.gsfc.nasa.gov/ftp/ittvislib/int_tabulated.pro)查看代码。

对于文档字符串中的示例`INT_TABULATED`，它应该`1.6271`使用原始代码返回，并且具有 的精确解`1.6405`，上述函数返回：

```
>>> x = np.array([0.0, 0.12, 0.22, 0.32, 0.36, 0.40, 0.44, 0.54, 0.64,
...               0.70, 0.80])
>>> f = np.array([0.200000, 1.30973, 1.30524, 1.74339, 2.07490, 2.45600,
...               2.84299, 3.50730, 3.18194, 2.36302, 0.231964])
>>> idl_tabulate(x, f)
1.641998154242472 
```

# javascript - 在android中模拟html文本选择

> ID：14345005
> 
> 赞同：3
> 
> 时间：2013-01-15T19:05:03.747
> 
> 标签：javascript, android, html, range, textselection

我需要模拟从 android 浏览器中选择 HTML 页面中的文本。Android 在网页中有一个特殊的选择器。我的 HTML 页面没有检测到文本选择，因为浏览器将具有 PC。我如何使用 javascript、jquery 等来模拟这种文本选择？

当我尝试在 android 浏览器中选择文本时。这会将其检测为文本选择系统本身，而不是作为 PC 和普通浏览器的普通选择。如何检测 android 浏览器以及如何修复文本选择？

# ruby-on-rails - 可枚举属性的选项如何在表单中显示？

> ID：14345008
> 
> 赞同：2
> 
> 时间：2013-01-15T19:05:11.630
> 
> 标签：ruby-on-rails, enums, erb

如果我有一个模型，其中一个属性只能设置为几个预定义的值，如下所示：

```
class Painting < ActiveRecord::Base
  SALE_STATUS = ["for sale", "sold"]
  validates_inclusion_of :status, :in => SALE_STATUS
end 
```

有没有办法编写 ERb/HTML 表单，以便输入字段`status`仅显示每个可用选项的单选按钮或复选框？

```
<%= form_for @painting do |painting| %>
  <%= painting.check_box :status # ... don't know how to implement!
<% end %> 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T19:12:24.773

我认为你可以这样做：

```
<%= form_for @painting do |painting| %>
  <% Painting::SALE_STATUS.each do |sale_status| %>
    <%= painting.check_box :status, sale_status %>
  <% end %>
<% end %> 
```

但是此代码允许用户不选择任何销售状态。如果您想允许状态为空值，请将其添加到您的模型中：

```
validates_inclusion_of :status, :in => SALE_STATUS, :allow_nil => true 
```

如果没有，请改用单选按钮：

```
<%= form_for @painting do |painting| %>
  <% Painting::SALE_STATUS.each do |sale_status| %>
    <%= painting.radio_button :status, sale_status %>
  <% end %>
<% end %> 
```

# spring - 意外的码头超时

> ID：14345009
> 
> 赞同：1
> 
> 时间：2013-01-15T19:05:11.620
> 
> 标签：spring, jetty, apache-camel

在设置的连接超时之前，我得到了一个超时异常。有人对发生的事情有任何想法吗？

任何输入都会很棒！

```
15 Jan 2013 10:44:40,944 [                   Thread-4622] WorkerThread                   INFO  [1538387622377815-4640]- - About to call server with connectionTimeoutMS=30000

15 Jan 2013 10:45:02,003 [                   Thread-4622] WorkerThread                   ERROR [1538387622377815-4640]-run():Connection timed out:java.net.ConnectException 
```

我在测试运行时记录了 netstat、gc 和打开文件的数量，但没有注意到任何戏剧性的事情。

**环境**

*   Java 1.6
*   Jetty 运行 Spring/Camel 路线（camel 2.10）
*   客户端是多线程的（向码头组件发送并发批处理请求）

**文件描述符：**

*   ulimit -Hn 100000
*   ulimit -Sn 100000

**打开文件**

*   以 1 秒为间隔运行 cat /proc/sys/fs/file-nr 的 Bash 脚本：

*   测试开始前：5664 0 200000

*   最坏情况：6720 0 200000

*   客户端和服务器都在本地主机上运行。

*   客户端连接超时设置为 30 秒。

**客户如何工作**

客户端创建一批并发线程（rnd 在 1-1000 之间）并调用 jetty 组件，然后在再次调用之前等待（rnd 在 1-30 秒之间）。最多重复 5 分钟。

服务器：尝试使用默认超时并将 connectTimeout 设置为较大的数字，例如 60000 毫秒，结果相同。

**在运行的服务器上**

*   码头-7.6.1.v20120215
*   骆驼 2.10.1
*   春天 3.0.7

春天/骆驼路线：

```
<route id="startQueue_route" trace="false">
  <from uri="jetty:http://0.0.0.0:9311" />
  <to uri="bean:LDAPBean" />
</route>

<bean id="jetty" class="org.apache.camel.component.jetty.JettyHttpComponent"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:44:41.670

我能够解决这个问题，但调整了一些 tcp 设置，希望这对其他人有帮助。

我现在退后一步，将更新的骆驼罐子替换回 2.10.0，以确保修复只是一个 tcp env 问题（在设定的限制之前超时）。

1）我将骆驼和码头更新到最新/最适合 java 1.6，但仍然有相同的随机超时问题。

```
-rw-r--r-- 1 dana dana  670388 Jan 16 18:23 spring-context-3.0.7.RELEASE.jar
-rw-r--r-- 1 dana dana  556747 Jan 16 18:24 spring-beans-3.0.7.RELEASE.jar
-rw-r--r-- 1 dana dana  383621 Jan 16 18:25 spring-core-3.0.7.RELEASE.jar
-rw-r--r-- 1 dana dana   53082 Jan 16 18:26 spring-asm-3.0.7.RELEASE.jar
-rw-r--r-- 1 dana dana  169749 Jan 16 18:27 spring-expression-3.0.7.RELEASE.jar
-rw-r--r-- 1 dana dana   88733 Jan 17 11:30 jetty-servlets-8.1.8.v20121106.jar
-rw-r--r-- 1 dana dana   97228 Jan 17 11:30 jetty-servlet-8.1.8.v20121106.jar
-rw-r--r-- 1 dana dana  338985 Jan 17 11:30 jetty-server-8.1.8.v20121106.jar
-rw-r--r-- 1 dana dana   89854 Jan 17 11:30 jetty-security-8.1.8.v20121106.jar
-rw-r--r-- 1 dana dana   24596 Jan 17 11:30 jetty-jmx-8.1.8.v20121106.jar
-rw-r--r-- 1 dana dana   87621 Jan 17 11:30 jetty-client-8.1.8.v20121106.jar
-rw-r--r-- 1 dana dana  311747 Jan 17 11:30 commons-httpclient-3.1_1.jar
-rw-r--r-- 1 dana dana  228640 Jan 17 11:30 camel-spring-2.10.3.jar
-rw-r--r-- 1 dana dana   52852 Jan 17 11:30 camel-jetty-2.10.3.jar
-rw-r--r-- 1 dana dana   66945 Jan 17 11:30 camel-http-2.10.3.jar
-rw-r--r-- 1 dana dana 2218113 Jan 17 11:30 camel-core-2.10.3.jar
-rw-r--r-- 1 dana dana  280529 Jan 17 11:33 jetty-util-8.1.8.v20121106.jar
-rw-r--r-- 1 dana dana   94481 Jan 17 11:34 jetty-http-8.1.8.v20121106.jar
-rw-r--r-- 1 dana dana  231922 Jan 17 11:36 org.springframework.transaction-    3.0.5.RELEASE.jar
-rw-r--r-- 1 dana dana  321190 Jan 17 11:37 org.springframework.aop-3.0.5.RELEASE.jar
-rw-r--r-- 1 dana dana  103293 Jan 17 11:39 jetty-io-8.1.8.v20121106.jar
-rw-r--r-- 1 dana dana  200387 Jan 17 11:45 servlet-api-3.0.jar
-rw-r--r-- 1 dana dana   21138 Jan 17 11:52 jetty-continuation-8.1.8.v20121106.jar 
```

2）调整 tcp 设置：（这似乎解决了超时问题）

```
ulimit -n 124000

sudo sysctl -w net.ipv4.tcp_syn_retries="1000000"
sudo sysctl -w net.ipv4.tcp_synack_retries="1000000"
sudo sysctl -w fs.file-max=200000
sudo sysctl -w net.ipv4.tcp_fin_timeout=5

sysctl -w net.ipv4.ip_local_port_range="1024 65000"
sysctl -w net.ipv4.tcp_keepalive_time="30"

##-- disable ipv6.
sysctl -w net.ipv6.conf.all.disable_ipv6="1"
sysctl -w net.ipv6.conf.default.disable_ipv6="1"
sysctl -w net.ipv6.conf.lo.disable_ipv6="1" 
```

# mysql - 新 sql 表中不需要的主键

> ID：14345015
> 
> 赞同：1
> 
> 时间：2013-01-15T19:05:31.057
> 
> 标签：mysql, sql, primary-key

我使用以下命令在我的 SQL 数据库中构建了一个新表：

```
Create Table if not exists Images (ImageID int (10) primary key NOT NULL AUTO_INCREMENT , 
         UserID int (10) NOT NULL,
                 Translated tinyint Default 0,
                 DeleteImage tinyint Default 0,
                 DataPosted date,
                 TheImage blob,
                 Translation text,
                 FOREIGN KEY (UserID) REFERENCES Users(UserID) ON DELETE CASCADE) 
```

该表创建得很好，但是我正在检查构建的内容，我发现在表中，ImageID、TheImage 和 Translation 列被定义为主键。正如查询所示，我只希望 ImageId 作为主键。

这里发生了什么事？tnx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:12:48.203

似乎不太可能。您用来找出哪些列是主键的任何工具似乎更有可能出现问题。

实际上，从文档 - 这里：[http](http://dev.mysql.com/doc/refman/5.1/en/create-table.html) ://dev.mysql.com/doc/refman/5.1/en/create-table.html - 它会遵循 MySQL 表只能有一个主键。但即使没有，你又何必担心呢？

# http - 删除并放置。应该使用它们吗？

> ID：14345016
> 
> 赞同：0
> 
> 时间：2013-01-15T19:05:58.047
> 
> 标签：http, asp.net-web-api, put

我正在观看一些关于 ASP.NET Web API 的视频，并且在视频中他们使用了“删除”和“放置”命令。我以前从来没有真正使用过它，当我只是使用常规的 ASP.NET MVC 和带有 ajax 的 jquery 时，我总是只使用“Post”和“Get”。

看到这是一个 MS 视频，我想检查一下这是现在使用它们的标准做法，还是 MS 刚刚决定做的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T19:07:59.590

这是 RESTful API 的标准做法。

REST 利用 HTTP 动词和 HTTP 协议的其他现有特性来提供一种标准化的、可发现的方式来使用您的 API。

您可以在此处了解有关 REST 的更多信息 - [http://www.restapitutorial.com/](http://www.restapitutorial.com/)。

以及有关 HTTP 动词的更多信息 - [http://www.restapitutorial.com/lessons/httpmethods.html](http://www.restapitutorial.com/lessons/httpmethods.html)

# git - 为什么我的 Magento 在 MAMP 上打开时会链接到我的域？

> ID：14345018
> 
> 赞同：0
> 
> 时间：2013-01-15T19:06:05.533
> 
> 标签：git, magento, e-commerce, mamp

我正在尝试在本地 MAMP 服务器中设置我的 Magento 商店（当前安装在我的云托管服务器上）。我想从现在开始在我的本地机器上开发它，并使用 git 将更改推送到我的服务器上。我已经在我的 htdocs 文件夹中*克隆*了我的 git 存储库。之后我打开了 MAMP，但我无法使用以下方式在本地打开我的商店： `localhost:8888/my_shop`。每次我运行它时，Chrome 都会链接到我的 Shop 当前在线运行的域。我该如何解决这个问题？我需要更改数据库中的:

`web/unsecure/base_url`

和

`web/secure/base_url`

on`core_config_data`吗？如果是，我应该将这些更改到哪个 URL，到`localhost:8888/my_shop`？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:16:05.613

没错，将这些值更改为`localhost:8888/my_shop`. Magento 将尝试解析这些 URL `core_config_data`- 只需确保在部署后将其更改回来！这是假设您*没有*与生产服务器共享数据库并且在您的机器上运行它的本地副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:21:22.663

您可以在所有相关位置运行这样的查询来为您执行此操作，尤其是当您在同一域下运行多个网站或商店时。用实际数据替换 field_name 和 URL（如果我没记错 field_name 是`value`）

```
UPDATE core_config_data set field_name = replace(field_name, 'http://live.url', 'http://local.url') WHERE field_name LIKE 'http://live.url%'; 
```

# sql - 如何使用 SQL 将表拼接在一起？

> ID：14345020
> 
> 赞同：1
> 
> 时间：2013-01-15T19:06:09.277
> 
> 标签：sql, sql-server, sql-server-2012

好的，我正在学习 SQL，刚刚安装了 SQL Server。我已经阅读了有关外部联接和内部联接的信息，但不确定两者是否是我想要的。基本上，我想重建一个已“切碎”成 5 个较小文本文件的文本文件。所有 5 个文本文件中的列都是相同的，例如姓名、年龄、电话号码等。唯一的区别是它们具有不同数量的数据行。

我想做的是将每个文件中的数据“附加”到一个“巨型文件”中。我应该创建一个包含所有数据的表，还是只创建一个视图？那么，我该如何实现这个......我使用联合吗？任何指导将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:06:57.983

您需要考虑使用`UNION`.

```
SELECT * 
FROM TABLE1 
UNION
SELECT * 
FROM TABLE2 
```

我只会创建一个视图——不需要存储表，尤其是在数据发生变化时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T19:21:51.883

除了合并五个文件的直接目标之外，您还希望文本文件中包含的数据通常可用于更灵活的分析。

如果您需要将其他数据与文本文件中的数据合并，您可能需要这样做的一个示例。（如果不是这种情况，那么 Oded 是对的，你应该简单地使用[logparser](http://www.microsoft.com/downloads/details.aspx?FamilyID=890cd06b-abf8-4c25-91b2-f8d975cf8c07&displaylang=en)或[Visual Log Parser](http://visuallogparser.codeplex.com/)。）

由于您的文本文件都包含相同的列，您可以将它们插入到一个表中*。

1.  发出定义表的 CREATE 语句
2.  将数据插入新创建的表中**
3.  在查询谓词中可能经常使用的字段上创建索引
4.  编写查询或创建视图以提供您需要的数据

*一旦您将数据放入表中，您可以考虑在表上创建视图，但首先您可能只运行一些即席查询。

**请注意，可以通过[其他方式](https://stackoverflow.com/questions/11016223/sql-server-2012-import-csv-to-mapped-columns)完成第 2 步。或者，您可以以编程方式构造和发出您的 INSERT 语句。

上述每个步骤的示例都包含在下面，可以在以下位置找到经过测试的示例：[http ://sqlfiddle.com/#!6/432f7/1](http://sqlfiddle.com/#!6/432f7/1)

```
-- 1.
CREATE TABLE mytable 
    (
     id int identity primary key, 
     person_name varchar(200), 
     age integer,
     tel_num varchar(20)
    );

-- 2\. or look into BULK INSERT option https://stackoverflow.com/q/11016223/42346
INSERT INTO mytable
    (person_name, age, tel_num)
VALUES
    ('Jane Doe', 31, '888-888-8888'),
    ('John Smith', 24, '888-555-1234');

-- 3.
CREATE UNIQUE INDEX mytable_age_idx ON mytable (age);

-- 4.
SELECT id, person_name, age, tel_num
FROM mytable
WHERE age < 30; 
```

# jquery - Jquery中：input和input之间的区别

> ID：14345021
> 
> 赞同：4
> 
> 时间：2013-01-15T19:06:10.350
> 
> 标签：jquery

在一些教程中，我看到了这些选择器：

```
$(':input'); 
```

或者

```
$('input'); 
```

注意'：'。

有什么不同吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T19:08:31.217

`$('input')`= 只有元素名称，只选择 HTML 元素。

`$(':input')`= 带有冒号，选择/过滤所有表单输入类型元素，包括**input**、**select**、**textarea**和**button**元素。

参考jQuery选择器信息：

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

[http://api.jquery.com/input-selector/](http://api.jquery.com/input-selector/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T19:13:36.807

`$('input')`选择所有`input`元素，例如 < **input** type="radio"、< **input** type="text"、< **input** type="checkbox" 等。它不会选择任何其他表单元素（例如`<select...`或`<button...`元素）。

从[jQuery 输入选择器文档](http://api.jquery.com/input-selector/)* 我们看到

> 选择`:input`器基本上选择所有表单控件。

所以`$(':input')`会得到 < **input** ... 以及 < **textarea** ...、< **select** ...、< **button** ... 等。

*-同一页还注释

> 因为 :input 是一个 jQuery 扩展而不是 CSS 规范的一部分，所以使用 :input 的查询不能利用原生 DOM querySelectorAll() 方法提供的性能提升。为了在使用 :input 选择元素时获得最佳性能，首先使用纯 CSS 选择器选择元素，然后使用 .filter(":input")。

# php - 使用 php 和 jquery 根据用户输入动态显示内容

> ID：14345022
> 
> 赞同：0
> 
> 时间：2013-01-15T19:06:11.080
> 
> 标签：php, ajax, jquery

我有一个表格，它将根据名称和日期显示交易列表。

```
<form id="form1" name="form1" method="post" action="<?php echo base_url() ?>options/history">
  Name
  <input name="name" type="text" id="name" />
  date
  <input name="date" type="text" id="date" />
  <input name="find" type="submit" id="find" value="find" />
</form> 
```

提交表单后，将显示所有相关详细信息。

有人可以向我解释如何使用 jquery 在同一页面上加载数据吗？

我是 jquery 和学习东西的新手。我做了一些研究，以下是我发现的：

```
 <script type="text/javascript">
        $(document).ready(function() {
            $('#find').click(function() {
                $.ajax({
                    type: "GET",
                    cache: false,
                    url: "<?php echo base_url() ?>options/history",
                    success: function(data) {
                       alert('Data Loaded');
                    }
                });
            });

        });
    </script> 
```

还有如何将表单变量传递给我的控制器？是否可以直接将值传递给控制器​​，还是必须将其与 URL 一起传递？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:12:28.523

```
<script type="text/javascript">
    $(document).ready(function() {
        $('#form1').submit(function() {
            // get the data of the form
            var data_form = $('#form1').serialize(); 
            $.ajax({
                type: "GET",
                cache: false,
                data: data_form,
                url: "<?php echo base_url() ?>options/history",
                success: function(data) {
                   alert('Data Loaded');
                   // Your data is in the var data returned, you can use it with, for example: $("#content").html(data);

                }
            });
            // Prevent default behaviour
            return false;
        });

    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:12:36.737

我在这里有点困惑。但我想你实际上想要这个：

```
$('form#form1').submit(function(evt){
  $.ajax({
    type: "GET",
    data: $(this).serialize(),
    cache: false,
    url: "<?php echo base_url() ?>options/history",
    success: function (data) {
      alert('Data Loaded');
    }
  });
  evt.preventDefault();
  return false;
}); 
```

您可以[`.submit()`](http://api.jquery.com/submit/)改为使用绑定到 JavaScript 的`submit`事件。通过`false`在此处理程序结束时返回，您可以停止表单提交，如上所示；或者，通过使用`evt.preventDefault()`.

`data`in 属性[`$.ajax`](http://api.jquery.com/jQuery.ajax/)指定要发送到服务器的数据。至于获取您可以使用的数据[`.serialize()`](http://api.jquery.com/serialize/)，它将对准备提交的表单元素进行编码。

# html - CSS 动态内容的水平分布

> ID：14345028
> 
> 赞同：0
> 
> 时间：2013-01-15T19:06:29.857
> 
> 标签：html, css, alignment

我在固定宽度的父 div 中有一些动态创建的 div，我想让它们水平分布。因为它们是动态创建的，所以我不知道容器中有多少，除非我用 JS 来计算它们，这是我试图避免的。

我最初是在[此](http://css-tricks.com/equidistant-objects-with-css/)页面上尝试“**使用内联块和对齐文本**”技术；然而，当有更多的孩子超过不适合的时候（即当有两行时），它的行为似乎有点不稳定，（见[这里](http://codepen.io/anon/pen/ysvIg)的第二行）所以我认为这不会奏效。

****编辑：****实际上我现在才意识到它实际上并不是不稳定的，它正确地间隔了第二行，但我想要的是（在这个特定的情况下无论如何......）是第二行上的三个红色框占据在第一行的前三个位置下放置两个位置，最后留出两个位置，而不是将它们隔开）....所以我认为总的来说这种技术不太可能对我有用。*

是否有其他方法可以实现上述目标。我宁愿不必使用 JS，但如果没有其他方法，那么我愿意接受建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:12:53.600

**它没有失败，这是floats**的本机行为。

如果您希望每行更适合，请将容器更大或框更窄。

如果您根本不希望它们包装，请添加`overflow:auto`到容器的 CSS 中，您将获得一个滚动条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:27:30.087

您需要删除容器的宽度并添加`display: inline-block;`以允许 dic 容器的宽度与内部内容的宽度相同。还要添加`overflow: auto;`以使 div 调整到其中生成的 div 的数量

```
#container {
  display: inline-block;
  background:olive;
  overflow: auto;
  height: 180px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T20:40:48.677

也许使用相对宽度而不是内部 div 的固定宽度....

```
#testcontainer div {
 width: 19%;
 height: 30px;
 display: inline-block;
 background: red;
float: left;
margin: 2px; 
```

}

[演示](http://codepen.io/anon/pen/tlvbz)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T22:07:34.413

我最终承认我需要使用 JS。我将 id 添加到第四个孩子，然后在 CSS 中我能够从第四个孩子中删除边距（`nth child`如果我不需要 IE8 支持，我认为所有这些都可以在 CSS 中完成）。

**编辑：**终于得到了我想要的[-http://jsfiddle.net/byronyasgur/kUgBA/14/](http://jsfiddle.net/byronyasgur/kUgBA/14/)

# python - 通过 API 计算 Paypal 定期付款中的活动配置文件

> ID：14345029
> 
> 赞同：1
> 
> 时间：2013-01-15T19:06:35.627
> 
> 标签：python, paypal

我想要的是让我的 python 脚本登录到我的 Paypal 帐户并检查我的定期付款部分中有多少活动配置文件。

我找不到任何可以帮助我的 API，TransactionSearch API 不是我想要的 - 我不想要交易，只有活动的个人资料

我唯一的想法是以某种方式“即时”检测每个订阅和取消并更新数据库中的计数器。虽然看起来……不纯洁:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:14:36.643

因此，您可以做（或需要做的）是记录每个配置文件的配置文件 ID。因此，当用户注册时，您会跟踪个人资料 ID。然后您可以使用[GetRecurringPaymentsProfileDetails](https://www.x.com/developers/paypal/documentation-tools/api/getrecurringpaymentsprofiledetails-api-operation-nvp) API 来确定它是否处于活动状态。

# c++ - 对 C++ 中的对象数组感到困惑

> ID：14345031
> 
> 赞同：18
> 
> 时间：2013-01-15T19:06:37.657
> 
> 标签：c++, arrays

所以我首先学习了 Java，现在我正在尝试切换到 C++。我很难让数组正常工作。

现在我只是想创建一个对象“Player”的数组并用一个填充它。但我得到一个错误。

```
Player* players = new Player[1];
players[0] = new Player(playerWidth, playerHeight, 20, 1); 
```

错误说：操作数“=”匹配这些操作数。操作数类型为： Player = Player *

我不明白为什么这不起作用？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-15T20:50:28.723

错误的意思是您试图将错误类型的值分配给变量。当错误说`Player = Player *`这意味着左侧的变量是 a`Player`而右侧的值是 a `Player *`。

```
players[0] = new Player(playerWidth, playerHeight, 20, 1); 
```

问题类似于您要这样做：

```
int x;
x = "Hello, World!"; 
```

左右手类型不匹配，没有自然转换，所以会报错。

* * *

第一个问题是您来自 Java 背景，Java 经常使用指针，但对您隐藏了它们。C++ 根本不隐藏它们。结果是 C++ 有不同的语法来显式处理指针。Java 摆脱了所有这些，主要使用 C++ 中的常规非指针语法来处理指针。

```
Java:                                  C++:

Player player = new Player();          Player *player = new Player();

Player player2;                        Player *player2 = nullptr;

** no equivalent in java **            Player player3;

player.foo();                          player->foo();

** no equivalent in java **            player3.foo();

** no equivalent in java **            *player;

** no equivalent in java **            &player2; 
```

理解使用指针和直接使用对象之间的区别非常重要：

```
Java:                                  C++:

Player a = new Player();               Player *a = new Player();
Player b = a;                          Player *b = a;
b.foo();                               b->foo(); 
```

在这段代码中只有一个对象，您可以通过`a`or访问它`b`，它没有任何区别，`a`并且`b`都是指向同一个对象的指针。

```
C++:

Player c = Player();
Player d = c;
d.foo(); 
```

在这段代码中有两个对象。它们是不同的，做某事`d`不影响`c`。

如果在 Java 中您了解了“原始”类型`int`和对象类型之间的区别，`String`那么考虑它的一种方法是在 C++ 中所有对象都是原始的。如果我们回顾您的代码并使用此“C++ 对象就像 Java 原语”规则，您可能会更好地看到问题所在：

```
Java:
int[] players = new int[1];
players[0] = new int(playerWidth); // huh??? 
```

这应该清楚地表明，分配的右侧应该只是一个 Player 值，而不是一个新的 player 对象的动态分配。对于 java 中的 int，这看起来像`players[0] = 100;`. 由于 Java 中的 Object 类型不同，Java 无法像编写值那样编写*Object*值`int`。但是 C++ 可以；`players[0] = Player(playerWidth, playerHeight, 20, 1);`

* * *

第二个问题是 C 中的数组很奇怪，而 C++ 继承了它。

C 和 C++ 中的指针允许“指针算术”。如果你有一个指向对象的指针，你可以添加或减去它并获得指向不同对象的指针。Java 没有类似的东西。

```
int x[2]; // create an array of two ints, the ints are 'adjacent' to one another
// if you take the address for the first one and 'increment' it
// then you'll have a pointer to the second one.

int *i = &x[0]; // i is a pointer to the first element
int *j = &x[1]; // j is a pointer to the second element

// i + 1 equals j
// i equals j - 1 
```

此外，数组索引运算符`[]`适用于指针。`x[5]`相当于`*(x+5)`。这意味着指针可以用作数组，这在 C 和 C++ 中是惯用的和预期的。事实上，它甚至已经融入了 C++。

在 C++ 中，当您使用`new`动态分配对象时，例如`new Player`，您通常会得到一个指向您指定的类型的指针。在这个例子中，你得到`Player *`. 但是当你动态分配一个数组时，例如`new Player[5]`，它就不同了。您实际上不是取回一个指向五数组的指针，而是`Players`取回一个指向第一个元素的指针。这就像任何其他`Player *`：

```
Player *p   = new Player;    // not an array
Player *arr = new Player[5]; // an array 
```

唯一使这个指针不同的是，当你对它进行指针运算时，你会得到指向有效`Player`对象的指针：

```
Player *x = p + 1;   // not pointing at a valid Player
Player *y = arr + 3; // pointing at the fourth array element 
```

* * *

`new`如果您在没有保护的情况下使用它们，`delete`则很难正确使用。为了证明这一点：

```
int *x = new int;
foo();
delete x; 
```

此代码容易出错并且可能是错误的。具体来说，如果`foo()`抛出异常`x`则被泄露。

在 C++ 中，每当您获得责任时，例如当您调用时，`new`您获得了稍后调用的责任`delete`，您应该记住

> **RAII**
> 责任* 采集是初始化

[* 更多的人说“资源获取是初始化”，但资源只是一种责任。[Jon Kalb 在他的一次异常安全 C++](http://exceptionsafecode.com/)演讲中说服我使用后一个术语。]

RAII 意味着每当你承担责任时，它应该看起来像你正在初始化一个对象；具体来说，您正在初始化一个特殊对象，其目的是为您管理该责任。这种类型的一个示例是`std::unique_ptr<int>`将管理指向`int`s 的指针分配有`new`：

```
C++:

std::unique_ptr<int> x(new int);
foo();
// no 'delete x;' 
```

要管理您的`Player`阵列，您可以这样使用`std::unqiue_ptr`：

```
std::unique_ptr<Player[]> players(new Player[1]);
players[0] = Player(playerWidth, playerHeight, 20, 1); 
```

现在，`unique_ptr`将为您处理该分配，您无需`delete`自己打电话。（注意，当你分配一个数组时，你应该给出`unique_ptr`一个数组类型；`std::unique_ptr<Player[]>`，当你分配其他任何东西时，你使用非数组类型，`std::unique_ptr<Player>`。）

当然，C++ 有一个更专业的 RAII 类型来管理数组，`std::vector`你应该更喜欢使用它`std::unique_ptr`：

```
std::vector<Player> players(1);
players[0] = Player(playerWidth, playerHeight, 20, 1); 
```

或者在 C++11 中：

```
std::vector<Player> players { Player(playerWidth, playerHeight, 20, 1) }; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-15T19:11:23.867

你的类型不匹配。难怪，您正试图将 a 存储`Player*`到已经分配的`Player`！

```
Player* players = new Player[1]; 
```

这将创建一个长度为 1 的数组，其中包含一个实例化的`Player`，并将整个事物存储到一个`Player*`. 的类型`players[0]`将是`Player`。

```
players[0] = new Player(...) 
```

这会尝试创建一个新的`Player*`并将其存储在数组中。但是数组包含`Player`对象。你应该说

```
players[0] = Player(...) 
```

* * *

或者，我猜这更适合你，你应该`new`完全停止使用，并使用`std::vector`.

```
std::vector<Player> players;
players.push_back(Player(playerWidth, playerHeight, 20, 1));
// or players.emplace_back(playerWidth, playerHeight, 20, 1); 
```

这不仅更容易使用，而且您以后也不必记住`delete`它。当`std::vector`超出范围时，它将自动销毁。此外，与您的阵列不同，`std::vector`它可以包含任意数量的对象，因此您可以随意添加新玩家或删除现有玩家。

还有其他数据结构可能更适合您，具体取决于您的确切用途，但这`std::vector`是一个很好的起点。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-15T19:10:25.017

原因是，变量的类型

```
players[0] 
```

是玩家（对象）。但是，运算符“new”（新玩家）返回一个指针（玩家*）

如果您只想拥有一个对象，正确的方法是：

```
Player* player = new Player(playerWidth, playerHeight, 20, 1); 
```

并且不要忘记在 C++ 中你需要自己清理混乱 - 在最后调用的某个地方

```
delete player; 
```

对于您创建的每个对象。C++ 没有垃圾收集器——这意味着所有手动创建的（通过“新”）对象都会保留，直到您手动删除它们。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-15T19:16:59.877

在 Java 中，当您使用关键字“new”时，您实际上会得到一个指向对象的指针。这是在 Java 中实例化对象类型的唯一方法。所以当你说你在Java中有一个“对象数组”时，说你有一个指向对象的指针数组更正确。

C++ 并没有隐藏对象是指针的事实。您可以让变量引用对象，也可以让变量引用指向对象的指针。

在您的示例中，您需要将其显式声明为指向对象的指针数组。

```
Players **players = new (Player*)[1];                         // Create an array of player pointers
players[0] = new Player(playerWidth, playerHeight, 20, 1);    // Create a single player 
```

虽然 C++ 允许您使用关键字***new***显式创建对象，但您必须确保在完成后清理您的对象，否则它们将永远不会被释放（称为内存泄漏）。

这是 C++ 和 Java 之间的主要区别之一。Java 的对象是垃圾回收的，程序员不必担心管理对象的生命周期。

完成后，您将需要清理分配的单个播放器以及数组。好的经验法则是每次调用***new***都应该对应一次调用***delete***。

```
delete players[0];  // delete the player pointed to by players[0]
delete[] players;   // syntax for deleting arrays 
```

然而，有趣的是，与 Java 不同，对象是在堆上分配的，您可以在 C++ 中在堆栈上创建对象，就好像它们是原始类型（如 int、float、char）一样。这允许您拥有本地范围内的对象，以及在内存中连续对齐的对象。在 Java 中没有办法做到这一点。

如果您以这种方式分配对象数组，则会为数组中的每个对象调用默认构造函数。

```
Player p;                           // This calls the default constructor and returns a Player object

Players *players = new Player[5];   // Create an array of player objects
players[0].playerWidth = 8;         // valid because the object has already been constructed

delete[] players; // don't forget to cleanup the array.
                  // no need to cleanup individual player objects, as they are locally scoped. 
```

**编辑：**正如其他人所提到的，在您的情况下使用 std::vector 而不是数组可能更容易（无需担心内存分配）并且与数组的性能顺序相同；但是我认为熟悉 C++ 中指针的概念非常重要，因为它们可以帮助您了解内存的组织方式。

这是创建 Player 指针向量的语法。

```
std::vector<Player*> players(1); // Creates a vector of pointer to player with length 1
players[0] = new Player(playerWidth, playerHeight, 20, 1); // Create a new player object
delete players[0];                                         // delete the player 
```

以及创建实际 Player 对象实例向量的语法（这是最首选的解决方案）：

```
std::vector<Player> players(5); // Creates a vector of five player objects
players[0].playerWidth = 8; //already constructed, so we can edit immediately
//no cleanup required for the vector _or_ the players. 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-15T19:16:30.173

在 Java 中，您可以这样做`Foo f = new Foo();`，为您提供一个动态分配的对象，该对象的生命周期由垃圾收集器管理。

现在，在 C++ 中，`Foo* f = new Foo;`看起来很相似，并且还为您提供了一个动态分配的对象（您可以通过指针访问它`f`），但是 C++ 没有内置的垃圾收集器。在大多数情况下，功能 C++ 等价物是`Foo f;`，它为您提供了一个本地对象，当您离开当前函数（通过 return 或 throw）时该对象被销毁。

如果您需要动态分配，请使用“智能指针”，它们实际上是行为类似于指针的类。在 C++ 98 中，只有`std::auto_ptr`并且人们经常使用`boost::shared_ptr`它来补充它。`std::unique_ptr`在较新的 C++ 11 中，有一些`std::shared_ptr`实现相同的功能。

我希望这能给你一些需要阅读的方向的指导，但总体而言，Juanchopanza 给出了一个很好的建议：`new`除非你真的需要，否则不要使用。祝你好运！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T19:11:26.860

在这里，您分配了一些内存来存储一个播放器的数组（不是很有用，但这是第一步）。

您的变量“players”现在存储该数组中第一个（也是唯一一个）插槽的地址。然后通过使用 player[0] 访问第一个 Player，您可以直接在其内存中写入/读取，而无需进行更多分配。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-26T19:58:34.540

我想建议将此作为设置索引 0 值问题的解决方案：

```
Player* players = new Player[1];
players[0] = *(new Player(playerWidth, playerHeight, 20, 1)); 
```

# python - Web2py 自动重复动作

> ID：14345033
> 
> 赞同：0
> 
> 时间：2013-01-15T19:06:48.023
> 
> 标签：python, python-2.7, web2py

如何在我的 web2py 服务器中运行某些功能，例如每 5 分钟重复一次，而无需用户提出任何请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:43:13.643

查看有关[后台任务](http://web2py.com/books/default/chapter/29/04#Running-tasks-in-the-background)的书籍部分。

# database - toad for oracle - 在调试/执行期间执行查询

> ID：14345042
> 
> 赞同：1
> 
> 时间：2013-01-15T19:07:18.180
> 
> 标签：database, oracle, toad

我是新的“Toad for Oracle Pro”用户。我在oracle上有一个包，大约需要10分钟。在此过程中，我将一些日志/跟踪消息插入到表中。

因此，当我执行我的包时，我无法对表执行单独的查询。只是我想在执行期间检查日志表。

在执行数据库进程期间，toad 会锁定自身。它不允许我做任何其他事情。执行终止后，我可以执行我的查询。

我想在使用 toad 执行期间执行查询。这在 SQL*Developer 中可用——它是免费的。

我可以配置 toad 来做到这一点吗？

蟾蜍版；11.6.1

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:01:54.580

我通常只打开两个 TOAD 实例。我不知道是否有更好的方法，但我肯定没有找到。

# c - 二维网格图实现

> ID：14345045
> 
> 赞同：1
> 
> 时间：2013-01-15T19:07:35.163
> 
> 标签：c, algorithm, grid, 2d, graph-algorithm

我想在C中实现二维网格图。从单个节点开始并在需要时继续添加节点还是一次形成一个节点更好？代码片段会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:43:58.450

首先，StackOverflow 社区不喜欢为给定的问题提供完整的解决方案。最好是自己提出一些建议，并表明你已经考虑过这个问题。您的问题陈述并不具体。你知道编译时的顶点数吗？如果是这样，简单的二维数组就足够了：

```
int connections[100][100]; 
```

如果不是，但顶点的数量是恒定的，也许你应该考虑使用动态分配：

```
int** connections = malloc(sizeof(int*)*numberOfVertices);
for (int i = 0; i < numberOfVertices; i++) {
    connections[i] = malloc(sizeof(int)*numberOfVertices);
} 
```

这两种解决方案当然会引起一些问题。例如，它们的内存非常昂贵（尤其是当图形稀疏时）。这就是为什么你总是可以使用一些专用的结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T23:20:05.453

如果您正在考虑随时添加节点，那么您应该使用邻接表（链表的链表）来表示您的图；特别是因为随手添加意味着您不知道您的图表是否会被解析。但是，如果您已经知道图形的大小，则使用方形数组（n x n，其中 n 是节点数）。

# sql - 插入到具有自动增量 PK 的表中

> ID：14345057
> 
> 赞同：-3
> 
> 时间：2013-01-15T19:08:35.967
> 
> 标签：sql

我有一张名为`Books`. 它的列是`indexNum`, `Bookname`, `Bookedition`, 其中`indexNum`是主键并且是自动递增的。

我试图向表中插入数据，但是插入命令被拒绝。我尝试了以下语句：

```
INSERT INTO Books VALUES ('', Birds, a12)
INSERT INTO Books VALUES (NULL, Birds, a12)
INSERT INTO Books VALUES (Bookname, Bookedition)( Birds, a12) 
```

前两个语句不起作用。最后一条语句第一次起作用，但是，下一次它说 PK 是重复的。

如何正确插入多行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:10:48.540

你的语法有点不对劲。我建议使用列列表。查看有关正确语法的[文档。](http://dev.mysql.com/doc/refman/5.5/en/insert.html)确保字符串用单引号括起来。

```
INSERT INTO Books (Bookname, Bookedition) VALUES ('Birds', 'a12') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:10:49.987

```
INSERT INTO Books (BookName, BookEdition) 
VALUES ('Birds' , 'a12') 
```

- 编辑

听起来你错过了你的身份栏。如果你可以改变你的桌子，考虑这样做。

如果没有，请尝试使用`MAX`和`IFNULL`（对于 MySQL）或`ISNULL`（对于 SQL Server）这样的方法：

```
INSERT INTO Books (IndexNum, BookName, BookEdition) 
SELECT IFNULL(Max(indexNum),0) + 1 as NewIndexNum, 'Birds', 'a12' 
FROM Books 
```

这是[SQL 小提琴](http://sqlfiddle.com/#!2/51289/1)。

# php - 我们可以在 PHP5.4 中使用 Zend 调试器吗

> ID：14345059
> 
> 赞同：1
> 
> 时间：2013-01-15T19:08:37.523
> 
> 标签：php, zend-debugger

至少在官方存储库[http://www.zend.com/en/products/studio/downloads](http://www.zend.com/en/products/studio/downloads)中没有一个 5.4 版本。（我不是在谈论 xdebug）

任何想法？

# c# - SIlverlight/XNA 在 WP7 和 WP8 中以不同方式分割应用程序绘图

> ID：14345061
> 
> 赞同：1
> 
> 时间：2013-01-15T19:08:44.600
> 
> 标签：c#, silverlight, windows-phone-7, xna

我为 WP7 构建了一个游戏，它在同一页面中使用了 Silverlight 和 XNA 的组合。该页面包含 3 个单独的 Silverlight 控件，它们出现在 GamePage.xaml 页面中

```
 <!--ContentPanel - place additional content here-->
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <TextBox Name="box2" Height="74" Margin="0,0,132,8" TextWrapping="Wrap" Text="" VerticalAlignment="Bottom"/>
        <TextBox Name="box1" Margin="0,480,8,82" TextWrapping="Wrap" Text="" IsReadOnly="True"/>
    </Grid>
    <Button Content="  send  " Margin="0,0,20,8" Click ="sendMessage_Click" Grid.Row="1" Height="74" VerticalAlignment="Bottom" HorizontalAlignment="Right"/>
</Grid> 
```

在 WP7 上，使用 GamePage.xaml.cs 中的此 C# 代码正确绘制了 3 个 Silverlight 控件

```
UIElementRenderer elementRenderer;

void GamePage_LayoutUpdated(object sender, EventArgs e)
    {
        if (ActualHeight > 0 && ActualWidth > 0 && elementRenderer == null)
        {
            elementRenderer = new UIElementRenderer(this, (int)ActualWidth, (int)ActualHeight);
        }
    }

private void OnDraw(object sender, GameTimerEventArgs e)
    {
        SharedGraphicsDeviceManager.Current.GraphicsDevice.Clear(Color.CornflowerBlue);
        elementRenderer.Render();

        spriteBatch.Begin();
        spriteBatch.Draw(elementRenderer.Texture, Vector2.Zero, Color.White);
        spriteBatch.End();
    } 
```

在 WP8 中，所有 3 个 Silverlight 控件都可以通过按下它们应该出现的位置来使用，但是只有 box1 被绘制，并且在其他控件应该出现的地方有空白的透明空间。

非常感谢任何帮助，我知道这可能是一个难以解决的问题。

# iphone - 如果 UITableview 为空，则显示图像

> ID：14345062
> 
> 赞同：3
> 
> 时间：2013-01-15T19:08:49.110
> 
> 标签：iphone, objective-c, xcode, uitableview

我现在在谷歌上寻找 3 个小时如何删除 tableview 并在 tableview 为空时显示图像（没有更多行）。有人知道吗？我知道这是可能的，因为我在很多应用程序上都看到了它。

我能找到的是：

```
// Check if table view has any cells
int sections = [self.tableView numberOfSections];
BOOL hasRows = NO;
for (int i = 0; i < sections; i++)
    hasRows = ([self.tableView numberOfRowsInSection:i] > 0) ? YES : NO;

if (sections == 0 || hasRows == NO)
{
    UIImage *image = [UIImage imageNamed:@"test.png"];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];

    // Add image view on top of table view
    [self.tableView addSubview:imageView];

    // Set the background view of the table view
     self.tableView.backgroundView = imageView;
} 
```

在哪里放这个？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T19:30:24.593

如果你使用 Storyboard 只是把你的观点放在你的后面`UITableView`

如果您的数据数组在创建时为空，只需隐藏您`UITableView`以在其后面显示“空表”视图。

```
[tableView setHidden:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-14T10:57:45.510

请参考： [http ://www.unknownerror.org/Problem/index/905493327/how-do-i-display-a-placeholder-image-when-my-uitableview-has-no-data-yet/](http://www.unknownerror.org/Problem/index/905493327/how-do-i-display-a-placeholder-image-when-my-uitableview-has-no-data-yet/)

感谢 Cocoanut 和 Thomas：

```
@interface MyTableViewController : UITableViewController
{
      BOOL hasAppeared;
      BOOL scrollWasEnabled;
      UIView *emptyOverlay;
}

- (void) reloadData;
- (void) checkEmpty;

@end

@implementation MyTableViewController

- (void)viewWillAppear:(BOOL)animated
{
   [self reloadData];
   [super viewWillAppear: animated];
}

- (void)viewDidAppear:(BOOL)animated
{
   hasAppeared = YES;

   [super viewDidAppear: animated];

   [self checkEmpty];
}

- (void)viewDidUnload
{
   if (emptyOverlay)
   {
      self.tableView.scrollEnabled = scrollWasEnabled;
      [emptyOverlay removeFromSuperview];
      emptyOverlay = nil;
   }
}

- (UIView *)makeEmptyOverlayView
{
    UIView *emptyView = [[[NSBundle mainBundle] loadNibNamed:@"myEmptyView" owner:self options:nil] objectAtIndex:0];
    return emptyView;
}

- (void) reloadData
{
   [self.tableView reloadData];

   if (hasAppeared &&
       [self respondsToSelector: @selector(makeEmptyOverlayView)])
      [self checkEmpty];
}

- (void) checkEmpty
{
   BOOL isEmpty = YES;

   id<UITableViewDataSource> src = self.tableView.dataSource;
   NSInteger sections(1);
   if ([src respondsToSelector: @selector(numberOfSectionsInTableView:)])
      sections = [src numberOfSectionsInTableView: self.tableView];
   for (int i = 0; i < sections; ++i)
   {
      NSInteger rows = [src tableView: self.tableView numberOfRowsInSection: i];
      if (rows)
         isEmpty = NO;
   }

   if (!isEmpty != !emptyOverlay)
   {
      if (isEmpty)
      {
         scrollWasEnabled = self.tableView.scrollEnabled;
         self.tableView.scrollEnabled = NO;
         emptyOverlay = [self makeEmptyOverlayView];
         [self.tableView addSubview: emptyOverlay];
      }
      else
      {
         self.tableView.scrollEnabled = scrollWasEnabled;
         [emptyOverlay removeFromSuperview];
         emptyOverlay = nil;
      }
   }
   else if (isEmpty)
   {
      // Make sure it is still above all siblings.
      [emptyOverlay removeFromSuperview];
      [self.tableView addSubview: emptyOverlay];
   }
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T19:26:20.240

`UITableView`是 的（非直接）子类`UIView`，所以你想做的很简单。

假设您将此表视图作为视图控制器视图的子视图。在这种情况下，您只需创建与表视图具有相同框架的另一个视图，然后从超级视图中删除表视图，并将新创建的视图添加为视图控制器视图的子视图。很简单：

```
UIImageView* view= [[UIImageView alloc] initWithImage: yourImage];
view.frame= tableView.frame;
[tableView removeFromSuperview];
[self.view addSubview: view]; 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2015-05-16T00:49:06.183

把它放在 - (void)viewDidAppear 上。祝你好运 ;）

# jquery - if语句的jquery设置范围

> ID：14345064
> 
> 赞同：0
> 
> 时间：2013-01-15T19:09:11.077
> 
> 标签：jquery, if-statement

我正在尝试制作一个带有值范围的 if 语句，例如，如果大于然后空白但小于然后空白然后执行此操作。到目前为止，我所拥有的似乎只适用于前两个 if 语句，我认为这是因为第一个小于然后第二个更大。似乎是因为第三个也大于它们共享一个值范围，而第三个 if 语句不起作用。那正确吗？

```
$(window).scroll(function() {
var about = $("#about_container").outerHeight(true) - 50;
var scroll = $(window).scrollTop();
if (scroll <= ($("#top_section").outerHeight(true) + $("#grid").outerHeight(true))  ) { 
      $(".nav_middle_text").removeClass("selected");
      $(".nav_middle_text").addClass("notselected");
      $("#work").removeClass("notselected");
      $("#work").addClass("selected");    

   } else if (scroll > ($("#top_section").outerHeight(true) + $("#grid").outerHeight(true) - about) ) { 
      $(".nav_middle_text").removeClass("selected");
      $(".nav_middle_text").addClass("notselected");
      $("#about_link").removeClass("notselected");
      $("#about_link").addClass("selected"); 

   } else if (scroll > ($("#top_section").outerHeight(true) + $("#grid").outerHeight(true) + about) ) { 
      $(".nav_middle_text").removeClass("selected");
      $(".nav_middle_text").addClass("notselected");
      $("#services").removeClass("notselected");
      $("#services").addClass("selected"); 

  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:01:40.987

好的，这是设置 if 语句的范围，现在它可以工作了：

如果（左位置 >= 下限，左位置 <= 上限）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:17:09.513

你的第二个条件，如果你的滚动值大于部分的外部高度和视图（减去）关于变量的值，那么它肯定会大于三个值的总和。

# iphone - 如何在作为 UIWebView 子层的层上调用 touchesBegan

> ID：14345065
> 
> 赞同：0
> 
> 时间：2013-01-15T19:09:16.623
> 
> 标签：iphone, ios, objective-c, xcode, calayer

我有一个添加为`UIWebView`. 我希望能够触摸并拖动图层。在添加 之前`UIWebView`，我可以毫无问题地触摸和拖动图层。

这是我创建图层并将其添加为子图层的地方

```
- (void)viewDidLoad
{
    [super viewDidLoad];    
    starLayer = [CALayer layer];
    starLayer.backgroundColor = [[UIColor alloc] initWithPatternImage:[UIImage
                                                                      imageNamed:@"star"]].CGColor;
    starLayer.shadowOffset = CGSizeMake(0, 3);
    starLayer.shadowRadius = 5.0;
    starLayer.shadowColor = [UIColor blackColor].CGColor;
    starLayer.shadowOpacity = 0.8;
    starLayer.frame = CGRectMake(235.0, 200.0, 35.0, 35.0);
    [self.aboutWebView.layer addSublayer:starLayer];

    [self moveStar];
} 
```

这是我的`moveStar`方法

```
- (void)moveStar
{
    CAKeyframeAnimation *move = [CAKeyframeAnimation animationWithKeyPath:@"position"];
    NSMutableArray *values = [NSMutableArray array];
    [values addObject:[NSValue valueWithCGPoint:CGPointMake(250.0, 50.0)]];
    [values addObject:[NSValue valueWithCGPoint:CGPointMake(250.0, 250.0)]];
    [move setValues:values];
    [move setDuration:1.0];
    [move setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn]];

    // Add the animation to the layer to be animated
    [starLayer addAnimation:move forKey:@"moveAnimation"]; 
```

}

到现在为止还挺好。星星落在屏幕上，落在中间上方一点。但是当我尝试触摸星星时，什么也没有发生。`touchesBegan`永远不会因为某种原因被调用。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint point = [touch locationInView:self.aboutWebView];
    [starLayer setPosition:point];
} 
```

当它是子层时我不能触摸星星的原因是`aboutWebView`因为触摸报告给视图而不是图层？

有没有人对如何使星星成为`aboutWebView`可触摸的子层有任何建议？是否可以？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:44:31.787

在您的图层中...尝试将`UIGestureRecognizer`属性设置`cancelsTouchesInView`为 NO。

“将此值设置为 NO 指示识别器将所有触摸传递到底层视图，即使它已识别序列”

类似的东西：

```
UIGestureRecognizer *touches = [UIGestureRecognizer alloc];
    //or
    //UIGestureRecognizer *touches = [[UIGestureRecognizer alloc] initWithTarget:self action:@selector(touchesAction:)];

    touches.enabled=YES;
    [yourLayer addGestureRecognizer:touches];
    touches.cancelsTouchesInView=NO; 
```

# python - 在python中从返回的JSON转换unicode字符

> ID：14345066
> 
> 赞同：2
> 
> 时间：2013-01-15T19:09:18.960
> 
> 标签：python, windows, json, cmd, musicbrainz

我正在尝试从 musicbrainz 的 API 服务返回 JSON，某些歌曲的返回数据包含 unicode 字符，我无法将它们转换为常规符号等。请让我知道我应该在这里做什么。

JSON：

```
{
    "status": "ok",
    "results": [{
        "recordings": [{
            "duration": 402,
            "tracks": [{
                "duration": 402,
                "position": 6,
                "medium": {
                    "release": {
                        "id": "dde6ecee-8e9b-4b46-8c28-0f8d659f83ac",
                        "title": "Tecno Fes, Volume 2"
                    },
                    "position": 1,
                    "track_count": 11
                },
                "artists": [{
                    "id": "57c1e5ea-e08f-413a-bcb1-f4e4b675bead",
                    "name": "Gigi D\u2019Agostino"
                }],
                "title": "You Spin Me Round"
            }],
            "id": "2e0a7bce-9e44-4a63-a789-e8c4d2a12af9"
        }, .... 
```

失败的代码（示例）：

```
string = '\u0420\u043e\u0441\u0441\u0438\u044f'
print string.encode('utf-8') 
```

我在 Windows 7 机器上使用它并拥有 python 2.7 并在命令行终端上运行此代码。我得到以下输出：

```
C:\Python27>python junk.py Gigi DGÇÖAgostino Gigi D?Agostino Gigi D\u2019Agostino 
```

我期望输出是`Gigi D' Agostino`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:54:33.523

*Unicode 转义仅适用于 unicode 字符串，将您的常规字符串转换为 unicode 使用`str.decode('unicode-escape')`：*

```
In [1]: s='\u0420\u043e\u0441\u0441\u0438\u044f'

In [2]: s
Out[2]: '\\u0420\\u043e\\u0441\\u0441\\u0438\\u044f'

In [3]: s.decode('unicode-escape')
Out[3]: u'\u0420\u043e\u0441\u0441\u0438\u044f'

In [4]: print s.decode('unicode-escape')
Россия

In [5]: s2="Gigi D\u2019Agostino"

In [6]: s2
Out[6]: 'Gigi D\\u2019Agostino'

In [7]: print s2.decode('unicode-escape')
Gigi D’Agostino 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T03:13:42.837

您应该像任何有效的 json 解析器一样使用返回 Unicode 字符串的 json 解析器。您失败的示例显示了一个字节串，即您没有使用 json 解析器。

例如解析 json 数据：

```
obj = json.load(urllib2.urlopen(request)) 
```

`obj`在不使用 Unicode 转义的情况下进行漂亮的打印：

```
print json.dumps(obj, indent=4, ensure_ascii=False) 
```

了解以下之间的区别也很有用：

```
print unicode_string 
```

和：

```
print repr(unicode_string) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T03:46:45.373

你`cmd`在Windows中使用？在这种情况下，让 Unicode 正常工作以正确显示可能有点麻烦。您可能想考虑使用另一个“终端”来测试您的脚本。 [MSYS](http://www.mingw.org/)提供了一个不错的终端/shell，IDLE 包含在 Windows Python 发行版中，并且有一个 Python Shell（右键单击，在 IDLE 中打开，F5）。

如果你真的想让它在`cmd`：

您必须`Lucida Console`在`cmd`. 然后：

```
> chcp
Active code page: 850
> chcp 65001 
```

然后你应该在`cmd`. 您的“活动代码页”可能不同。请注意某处，因为您可能想在之后将其更改回来：

```
> chcp 850 
```

否则你会遇到其他问题（启动`.bat`文件不起作用）。（另见[批处理文件编码](https://stackoverflow.com/questions/1427796/batch-file-encoding)）

在您的脚本中，您还需要这个：

```
import codecs

def cp65001(name):
    """This might be buggy, but better than just a LookupError
    """
    if name.lower() == "cp65001":
        return codecs.lookup("utf-8")

codecs.register(cp65001) 
```

否则python会崩溃。（见[windows-cmd-encoding-change-causes-python-crash](https://stackoverflow.com/questions/878972/windows-cmd-encoding-change-causes-python-crash)）

我的脚本有类似的[错误报告](https://github.com/JonnyJD/musicbrainz-isrcsubmit/issues/40)。

* * *

您也可以考虑使用库来访问 MusicBrainz Web 服务。 [Python-musicbrainzngs](http://python-musicbrainzngs.readthedocs.org/)适用于当前的 ws/2。

# objective-c - 如何制作具有两个圆角和两个矩形边缘的圆形矩形按钮

> ID：14345072
> 
> 赞同：0
> 
> 时间：2013-01-15T19:09:53.887
> 
> 标签：objective-c, uibutton, uitextfield

我想要的是按钮看起来像这样：

![在此处输入图像描述](../Images/8bf5ca295ed8d8ea2a511128a4fa9187.png)

我刚刚从界面生成器中添加了我的按钮并将它们连接到代码。有谁知道如何做到这一点？是否可以使用 UITextField 对象来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:37:43.970

您将希望使用 a`UITableViewController`并将部分设置为`UITableViewStyleGrouped`。除非你能找到每个按钮的背景，否则这就是设置应用程序使用的。

**制作 UITableView：**

*   每一个`groups`都是一个`section`，所以你会想要返回你有多少个部分`-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView`。

*   对于每个*部分*，您想说明有多少行`- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section`。

*   您需要自定义每个单元格`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`（顺便说一下，它会告诉您要在 indexPath 变量中修改哪个部分的特定行）。

*   您需要处理行点击`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`。下面的代码可帮助您取消选择表格视图。：`[self.navigationController pushViewController:detailViewController animated:YES];`

*   也用于`- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender`处理点击特定行后发生的情况。

真正详细解释这些东西的教程：http: [//www.appcoda.com/ios-programming-tutorial-create-a-simple-table-view-app/](http://www.appcoda.com/ios-programming-tutorial-create-a-simple-table-view-app/)

苹果文档：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)

对于`UITextField`，您可以在 Interface Builder 中将其设置为*Grouped或将其设置为：*`UITextBorderStyleRoundedRect`

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T19:17:30.627

如果标准`UIButton`不够，那就创建自己的View：

您创建一个`UIView`类，并在`drawRect`方法中
绘制一条由 4 条 90°（角）弧组成的路径，并将其与`CGPathLineTo`. 使用圆角半径、宽度和高度作为参数。

进一步的提示：使用`CGTransformMakeScale`这样你的矩形被转换为边长为 1 的正方形。
这简化了弧参数的计算。

不要忘记转换角半径（例如使用 scale.x）

# javascript - 在按键上交互式调整不透明度？

> ID：14345083
> 
> 赞同：0
> 
> 时间：2013-01-15T19:10:31.557
> 
> 标签：javascript, opacity, keydown, qualtrics

我对编程很陌生，我需要一些帮助才能让这段代码为我正在运行的实验工作（在研究生院）。我希望用户能够通过按左右箭头键来调整图像的不透明度。如果这很重要，我也在 Qualtrics 中这样做。以下 javascript 代码对我不起作用...非常感谢您的帮助！

```
var op =0.1;
var op1 = 10;
var step = 10;
var min = 0.1, max = 1;
var min1 = 10, max1 = 100;

var image = document.getElementById("image");
image.style.opacity = op;
image.style.filter = alpha(opacity=op1);

Event.observe(document, 'keydown', function(e) {
  if(e.keyCode == 37) {
    op-=step;
    op1-=step;
    op = Math.max(min, op);
    op1 = Math.max(min, op1);
  } else if(e.keyCode == 39) {
    op+=step;
    op1+=step;
    image.style.opacity = Math.min(max, op);
    op1 = Math.min(max, op1);
  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:22:32.890

我稍微修改了代码，让它在没有其余部分的情况下工作。希望您能够从此使一切正常工作：

```
var op =0.1;
var op1 = 10;
var step = .1; //changed to .1 from 10
var min = 0.1, max = 1;
var min1 = 10, max1 = 100;

var image = document.getElementById("image");
image.style.opacity = op;
//image.style.filter = alpha(opacity=op1); //removed (implement browser check if IE) 

$(document).on('keydown', function(e) {
  if(e.keyCode === 37) { //made === (preference)
    op-=step;
    op1-=step;
    op = Math.max(min, op);
    op1 = Math.max(min, op1);
    image.style.opacity = Math.min(max, op); //added 
  } else if(e.keyCode === 39) {//made === (preference)
    op+=step;
    op1+=step;
    image.style.opacity = Math.min(max, op);
    op1 = Math.min(max, op1);
  }
}); 
```

**[例子](http://jsfiddle.net/NLwtN/)**

*注意：在点击左/右箭头键之前，您需要单击上`results`例中的框（右下角）。*

# r - R 控制台未启动//通过“Put R Var”导入数据

> ID：14345090
> 
> 赞同：0
> 
> 时间：2013-01-15T19:10:58.473
> 
> 标签：r, console

当我转到 Excel、Addins、RExcel，然后单击“启动 R”时，R 控制台不会自动启动。问题不大，但是当我手动启动它（Windows 开始菜单，R）并尝试使用“Put R Var”将数据从 Excel 导入 R 时，它不起作用 - R 根本无法识别我给了数据框的名称。

我在 Windows XP 上使用 R 版本 2.15.1、Excel 2010。

有什么建议我可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:17:40.017

可能安装了 R，但 Excel 找不到它。我会尝试将 R 可执行文件的路径添加到您的`PATH`环境变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T03:41:23.727

设置路径命令并在 RExcel 菜单中将 R 服务器设置为前台并选中复选框 Rguivisible。关闭 excel 并重新启动 excel，然后启动 R。这应该可以。

# jquery - marginLeft 的 jquery 动画在 Safari 中导致奇怪的跳跃

> ID：14345097
> 
> 赞同：0
> 
> 时间：2013-01-15T19:11:17.663
> 
> 标签：jquery, safari, jquery-animate, margin

我构建了一个使用 jquery 创建图像“循环”的图像滑块。如果您向右走，则第一个图像将被添加到末尾。如果你向左走，最后一张图片会在开头出现。margin-left-value 用于创建滑动外观。到目前为止它似乎有效，但在 Safari 中，边距的动画不起作用。它应该使用缓动函数在 -100px 和 -200px 之间缓和。但是有大约 4000px 的值。

还有其他人在 Safari 中遇到了这些跳跃问题，但我没有找到解决方案。

这是js：

```
window.onload = function ()
{
$inner = $('#wdgt_slider #inner');
$active = $('#wdgt_slider').children().first();
$slides = $('#wdgt_slider').children().length;

$inner.prepend($inner.children().last()).css({'-webkit-transition':' ', '-moz-transition':' ', '-o-transition':' ', 'transition':' ', 'marginLeft':'-100%'});

$('#wdgt_slider').delegate('input[type=radio]', 'change', function()
{
    if($(this).attr("checked") == "checked")
    {
        if( $(this).index() == ($inner.children().length-1) && $active.index() == 0 )
        {
            prev();
        }
        else if( $(this).index() == 0 && $active.index() == ($inner.children().length-1) )
        {
            next();
        }
        else if( $(this).index() < $active.index() )
        {
            prev();
        }
        else if( $(this).index() > $active.index() )
        {
            next();
        }
        $active = $(this);
    }
});
}

function next()
{
$inner.animate({
    marginLeft:"-200%"
},8000, $.easie(0.77, 0, 0.175, 1),function()
{
    //$inner.append($inner.children().first()).css({'-webkit-transition':' ', '-moz-transition':' ', '-o-transition':' ', 'transition':' ', 'marginLeft': "-100%"});
});
}

function prev()
{
$inner.animate({
    marginLeft:"0"
},8000, $.easie(0.77, 0, 0.175, 1), function()
{
    $inner.prepend($inner.children().last()).css('marginLeft', '-100%');
});
} 
```

我没有作弊，因为问题在960网格系统内部更加明显。这是链接：[http ://www.goldentree.de/wordpress/](http://www.goldentree.de/wordpress/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:11:26.927

为了避免这个问题，对现代浏览器使用 CSS 过渡，其余的使用 jQuery 动画。我建议使用modernizr 来识别谁支持CSStransitions。

```
if( !Modernizr.csstransitions ){
  $('#gallery .slides').animate({"margin-left":'-200%'}, 750);
} else {
  $('#gallery .slides').css({"margin-left":'-200%'});
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T22:22:36.070

只是我对@Jason 的回答。

```
cssOrAnimate = Modernizr.csstransitions ? 'css' : 'animate';
$('#gallery .slides')[cssOrAnimate]({marginLeft:'-200%'}); 
```

# php - php 在循环中保留单选按钮

> ID：14345102
> 
> 赞同：0
> 
> 时间：2013-01-15T19:11:26.953
> 
> 标签：php, radio-button

我试图保留用户返回编辑帖子时选中的单选按钮。我很难使用正确的语法来使其正常工作。

在添加 if 语句之前一切正常。

```
for($index=0; $index < $indexCount; $index++)
{
if (substr("$dirArray[$index]", 0, 1) != ".")
{
echo"<div class=\"imageselect\"><br><div class=\"imageselectholder\"><img src =\"server/php/files/".$me."/medium/" . $dirArray[$index] ." \" /><br></div><div class=\"imageselecttxt\">Check to use this image</div><div class=\"imageselectcheck\"><input type=\"radio\" name=\"fpi\" value=\"" . $dirArray[$index] ."\" .if($_SESSION['fpi'] == $dirArray[$index]) \"checked=\"checked\" \"/></div> </div>";
}}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:23:40.110

AFAIK，你不能在回声中有“if”语句。

改为这样做：

```
if($_SESSION['fpi'] == $dirArray[$index])
{
   $checked ="checked";
}
else
{
   $checked = "";
}
echo "...<input type=\"radio\" name=\"fpi\" value=\"" . $dirArray[$index] ."\" $checked /></div> </div>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:24:33.323

我会这样做，还清理了您的报价：

```
for($index = 0 ; $index<$indexCount ; $index++){
    if(substr("$dirArray[$index]",0,1)!="."){
        if($_SESSION['fpi']==$dirArray[$index]){
            $checked = ' checked="checked" ';
        }else{
            $checked = '';
        }

        echo '<div class="imageselect"><br><div class="imageselectholder">
        <img src ="server/php/files/'.$me.'/medium/'.$dirArray[$index].' " />
        <br></div>
        <div class="imageselecttxt">Check to use this image</div><div class="imageselectcheck">
        <input type="radio" name="fpi" value="'.$dirArray[$index].'" '.$checked.' "/></div> </div>';
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T19:45:57.517

我喜欢将这种类型的东西提取到模板中。这消除了“回声”或“打印”的混淆。另外，它是一个很好的逻辑分离（参见 Code Igniter）。除此之外，我几乎遵循之前海报所建议的相同思路。

```
<?   
    for($index=0; $index < $indexCount; $index++) 
    {
        if (substr("$dirArray[$index]", 0, 1) != ".")  
        {  
            $checked = ($_SESSION['fpi'] == $dirArray[$index] ? 'checked' : '');
?>
<div class="imageselect"><br>
    <div class="imageselectholder">
        <img src ="server/php/files/<?=$me?>/medium/<?=$dirArray[$index]?>"/><br>
    </div>
    <div class="imageselecttxt">Check to use this image</div>
    <div class="imageselectcheck">
        <input type="radio" name="fpi" value="<?= $dirArray[$index] ?>" <?= $checked ?> />
    </div> 
</div>

<?  } }   ?> 
```

# trello - 邀请成员加入 Trello.NET

> ID：14345104
> 
> 赞同：0
> 
> 时间：2013-01-15T19:11:33.007
> 
> 标签：trello, trello.net

有没有办法邀请成员加入董事会，甚至只是通过 API 将他们分配为管理员/用户？我正在尝试自动化我们的项目请求系统，以便在批准新项目时创建一个新的 Trello 板，并将我的团队分配为该板的管理员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:03:00.883

它没有在 Trello.NET 中实现。[为此，我在 GitHub 上](https://github.com/dillenmeister/Trello.NET/issues/18)添加了一个问题。

**编辑**：由@theyshookhands 和 NuGet（版本 0.5.8）实现

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-01T01:27:51.627

你可以很简单地使用[Manatee.Trello](https://nuget.org/packages/Manatee.Trello/) ...

# sql - 查询以检查表的并行度

> ID：14345105
> 
> 赞同：3
> 
> 时间：2013-01-15T19:11:33.690
> 
> 标签：sql, oracle, oracle10g

如何查询 Oracle 10g 数据库以确定表的并行度？我的搜索被证明是徒劳的。我预计它是这样的：

```
select degree   
from table_metadata 
```

`table_metadata`关于我的表的元数据在哪里。

由于并行性似乎是未知的，请考虑以下语句：

```
create table  foo  
...  
parallel (8); 
```

这里`parallel (8)`设置并行度为8

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-15T19:15:05.420

```
SELECT degree
  FROM user_tables
 WHERE table_name = <<some table name>> 
```

假设您拥有这张桌子，它将起作用。否则，根据您的权限，使用`ALL_TABLES`或`DBA_TABLES`而不是在列`USER_TABLES`上添加谓词。`OWNER`

# css - 具有第一列动态宽度的 3 列 div

> ID：14345106
> 
> 赞同：0
> 
> 时间：2013-01-15T19:11:39.163
> 
> 标签：css, layout

我在stackoverflow中看到了很多例子，其中大多数都带有浮点数-我有一个3列div（没有父div）-第一列具有动态宽度-其他2个具有固定宽度-我可以在不使用浮点数的情况下获得解决方案- 尝试给出百分比，没有用 - 也尝试使用表格单元 - 但可能是我没有以正确的方式使用它 - 任何示例/想法：

```
div .first{
    margin: 12px 0 5px 225px;
    width:580px;
}

div a.second{

    margin: -19px 0 5px 470px;
    display: block;
}

div a.third{

    margin: -15px 0 5px 640px;
    display: block; 
} 
```

HTML

```
<div id="container">
    <div id="first_dynamic_width" >
        <span>abcdsef</span>
    </div> 
    <span> <a> </span> 
    <span> <a> </span> 
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:18:17.203

通过使用`display:block`，您不能将它们并排放置，因为该块意味着它正在下一行。让它们`display:inline`或`display:inline-block`它们可以移动到彼此旁边，然后尝试再次设置它们的样式。

# c# - 自定义视图层次结构的语义缩放，而不是普通的网格或列表视图

> ID：14345110
> 
> 赞同：4
> 
> 时间：2013-01-15T19:11:50.373
> 
> 标签：c#, windows-8, winrt-xaml, semantic-zoom

我在 xaml 中有一个页面布局，其中包含一个带有多个网格视图的网格，这些网格视图代表不同的内容和单独的样式。

这是我的应用程序的中心，它呈现这些不同的内容，例如：艺术家、表演、唱片，它们以某种方式相关但内容不同，因此表示方式不同。（完全不同的itemtemplates和groupingstylefor每个）

我想实现一个语义缩放，一旦缩小应该显示我拥有的定制组。因此，它应该在缩小时以组的形式显示艺术家、表演、录音。

不幸的是，我只能在 ZoomedIn/Out 标签内放置一个 GridView 或 ListView。

有谁知道如何解决这个问题或可以提供一个可靠的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T09:56:14.273

我犯了一个解决方案，它有效，但它相当笨拙。（我没有足够的时间深入研究它。）如果有人建议一个合适的（可重用的，真正面向对象的:-)等）解决方案，我将不胜感激。

您必须在新类中实现**ISemanticZoomInformation接口。**

我没有找到关于界面如何工作的非常详细的描述，所以我不得不尝试了很多。我的问题是，当您点击 zoomedOutView 中的磁贴时，需要一个 scrollViewer 才能跳转到 zoomedIn 视图中的某个点。我不能从 scrollViewer 类继承。可能你需要继承一个 GridView 的子类，它有一个 scrollViewer 作为一个子类（如果可能的话）。在我的解决方案中（非常错误地）假设它有一个 scrollViewer 子级。另一个问题是，如果你捏，MakeVisible 方法会被调用，并且 item.Bounds.Left 将是 0.5（在这种情况下，你不想在 zoomedIn 视图中滚动到任何地方），但是如果你点击一个zoomedOut 视图中的元素，您必须在代码中设置此值，在这种情况下，

例如：

```
public class GridWithSemanticZoomInformation : Grid , ISemanticZoomInformation
{
    private SemanticZoom _semanticZoomOwner;
    private Boolean _IsZoomedInView;
    private Boolean _IsActiveView;

    public void CompleteViewChange()
    {
        //
    }

    public void CompleteViewChangeFrom(SemanticZoomLocation source, SemanticZoomLocation destination)
    {
        this.IsActiveView = false;
    }

    public void CompleteViewChangeTo(SemanticZoomLocation source, SemanticZoomLocation destination)
    {
        this.IsActiveView = true;

    }

    public void InitializeViewChange()
    {
        //
    }

    public bool IsActiveView
    {
        get
        {
            return this._IsActiveView;
        }
        set
        {
            this._IsActiveView = value;
        }
    }

    public bool IsZoomedInView
    {
        get
        {
            return this._IsZoomedInView;
        }
        set
        {
            this._IsZoomedInView = value;
        }
    }

    public void MakeVisible(SemanticZoomLocation item)
    {
        this.SemanticZoomOwner.IsZoomedInViewActive = (this.Equals(this.SemanticZoomOwner.ZoomedInView));

        if (item.Bounds.Left != 0.5)
        {
            if (this.Children.Count() == 1)
            {
                foreach (UIElement element in this.Children)
                {
                    if (element.GetType() == typeof(ScrollViewer))
                    {
                        ((ScrollViewer)element).ScrollToHorizontalOffset(item.Bounds.Left);
                    }
                }
            }
        }
    }

    public SemanticZoom SemanticZoomOwner
    {
        get
        {
            return this._semanticZoomOwner;
        }
        set
        {
            this._semanticZoomOwner = value;
        }
    }

    public void StartViewChangeFrom(SemanticZoomLocation source, SemanticZoomLocation destination)
    {
        //
    }

    public void StartViewChangeTo(SemanticZoomLocation source, SemanticZoomLocation destination)
    {
        //
    }
} 
```

当您点击 zoomedOut 视图中的项目时，我为这些案例编写了一些笨拙的事件处理程序：

```
 SemanticZoomLocation moveTo = new SemanticZoomLocation();
    moveTo.Bounds = new Rect(0, 0, 0, 0);

    this.ZoomedOutGrid.InitializeViewChange();
    this.ZoomedInGrid.InitializeViewChange();
    this.ZoomedOutGrid.StartViewChangeFrom(new SemanticZoomLocation(), new SemanticZoomLocation());
    this.ZoomedInGrid.StartViewChangeTo(new SemanticZoomLocation(), moveTo);

    this.ZoomedInGrid.MakeVisible(moveTo);
    this.ZoomedOutGrid.CompleteViewChangeFrom(new SemanticZoomLocation(), new SemanticZoomLocation());
    this.ZoomedInGrid.CompleteViewChangeTo(new SemanticZoomLocation(), new SemanticZoomLocation());
    this.ZoomedOutGrid.CompleteViewChange();
    this.ZoomedInGrid.CompleteViewChange();
}

private void SecondButton_Tapped(object sender, TappedRoutedEventArgs e)
{
    SemanticZoomLocation moveTo = new SemanticZoomLocation();
    moveTo.Bounds = new Rect(270, 0, 0, 0);
    this.ZoomedOutGrid.InitializeViewChange();
    this.ZoomedInGrid.InitializeViewChange();
    this.ZoomedOutGrid.StartViewChangeFrom(new SemanticZoomLocation(), new SemanticZoomLocation());
    this.ZoomedInGrid.StartViewChangeTo(new SemanticZoomLocation(), moveTo);

    this.ZoomedInGrid.MakeVisible(moveTo);
    this.ZoomedOutGrid.CompleteViewChangeFrom(new SemanticZoomLocation(), new SemanticZoomLocation());
    this.ZoomedInGrid.CompleteViewChangeTo(new SemanticZoomLocation(), moveTo);
    this.ZoomedOutGrid.CompleteViewChange();
    this.ZoomedInGrid.CompleteViewChange();
} 
```

# c++ - 类前向声明

> ID：14345112
> 
> 赞同：0
> 
> 时间：2013-01-15T19:11:52.150
> 
> 标签：c++, class, forward-declaration

我可以对一个类使用前向声明，以便在使用它之后将它的定义和实现放在程序中（类似于对函数所做的事情）？

（我需要将程序的多个源文件合并到一个文件中，并且我想将类的定义和实现放在文件的末尾，以便位于文件`main`的顶部。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T19:19:07.367

是的，在某种程度上，你可以。

您必须意识到 C++ 编译器非常愚蠢，并且不会提前阅读。这就是您必须使用函数原型的原因（以及其他一些原因）。现在，编译器解析函数并不难。它只是查看函数的返回类型和函数参数的类型，并假设函数在那里，而不知道函数内部的实际内容，因为到那时它最终并不重要.

但是，类的内容确实很重要（例如，编译器需要知道类的大小）。但是还记得没有提前阅读吗？当您转发定义一个类时，编译器不知道其中有什么，因此会丢失很多关于它的信息。例如需要预留多少空间？

因此，您可以转发定义类，但不能将它们用作**值**类型。唯一可以用它做的事情（在具体声明之前）是使用指向它的指针（并将其用作函数返回类型和模板参数，作为@Cheersandhth.-Alf 的指针）。

如果您需要使用的不是指针，您可能应该使用标头（如果您想了解更多信息，请阅读[此内容）。](https://stackoverflow.com/questions/14298417/compilation-error-uses-undefined-struct/14298494#14298494)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T19:26:23.507

如果没有之前某处的类定义，您将无法使用任何类成员，也无法创建任何实例，但您可以

*   使用 T* 和 T& 类型，

*   将 T 用于正式的返回类型和参数声明（是的，甚至按值），

*   使用 T 作为模板参数，

可能还有更多，但以上是我立即想到的。

因此，如果这就是您所需要的，那么您就可以使用前向声明了。

但是，在草图中，前向声明给你带来的只是*额外的工作*，在两个地方维护相同的代码，所以很难看出它的意义……

* * *

哦，我才想起来，前向声明的不完整类型有一个特别讨厌的未定义行为，即使用`delete p`where`p`是指向不完整类型的指针。这要求析构函数是微不足道的。如果编译器很好，那么它会发出警告，但不要指望它。

* * *

总而言之，我只想把它`main`放在该代码的*最后*，它所属的位置，避免所有问题。

# python - 遍历二叉树并对每个元素进行平方

> ID：14345114
> 
> 赞同：0
> 
> 时间：2013-01-15T19:12:01.373
> 
> 标签：python, tree, binary-tree

我希望有人可以帮助我理解即将到来的 CS 课程的二叉树。更具体地说，我想知道是否有人可以帮助我解决这个问题：“返回一棵所有项目都已平方的树”

这是我的班级树：

```
clas Tree(object):
 def __init__(self, entry, left=None, right=None):
        self.entry = entry
        self.left = left
        self.right = right

def __repr__(self):
    args = repr(self.entry)
    if self.left or self.right:
        args += ', {0}, {1}'.format(repr(self.left), repr(self.right))
    return 'Tree({0})'.format(args) 
```

因此，如果我有一个名为 t 的树，其中 t 定义为：

`t = Tree(1,Tree(2,Tree(3)),Tree(4,Tree(5)))`

我想`t`返回`Tree(1,Tree(4,Tree(9)),Tree(16,Tree(25)))`

所以我想出了这个函数，它返回一个平方树，但我想摆脱“无”

```
def square_tree(tree,fn):
    if(tree == None):
        return tree
    else:
        tree.entry = fn(tree.entry)
        map_tree(tree.left,fn)
        map_tree(tree.right,fn)
    return tree 
```

输出：树（4，树（9，树（16），无），树（25，树（36），无））

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T19:18:27.880

树是递归结构。编写树操作程序的最简单方法通常是递归。所以考虑递归步骤。

你有一棵树，你想把所有元素平方。所以你需要：

*   平方根元素
*   将左右子树中的所有元素平方

这应该是足够的暗示，因为它是家庭作业......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:18:20.023

后

`t = Tree(1,Tree(2,Tree(3)),Tree(4,Tree(5)))`

是

`Tree(1, Tree(2, Tree(3), None), Tree(4, Tree(5), None))`

类 repr 正在显示 None 叶子。如果您不想要它，请修复您的代表。

# facebook - 为什么 www.prod.facebook.com 作为本地主机打开？

> ID：14345115
> 
> 赞同：-1
> 
> 时间：2013-01-15T19:12:02.527
> 
> 标签：facebook, localhost, subdomain

我在 facebook 的介绍中看到了这个域名。但是当我尝试打开时。它将我重定向到我的本地主机（WAMP）。 [打开](http://www.prod.facebook.com/) facebook 子域的此链接。为什么它将我重定向到我的本地主机。

> 我的问题是如何在我自己的域上设置这样的服务？

如果您的机器上没有安装 wamp / xamp，我附上了如下预览。

![在此处输入图像描述](../Images/776378e020b43ae976a1292e37997481.png)

** 这是我的本地主机

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T19:29:02.283

他们所做的只是（通过 DNS）将主机名 www.prod.facebook.com 映射到 IP 地址 127.0.0.2。如果您可以控制域的 DNS，则可以轻松做到这一点。我确信他们这样做是为了让 URL 在演示中看起来更正式，而不是在浏览器的 URL 栏中放置“localhost”。

# memory-leaks - ServiceStack Funq 容器弱引用扩散

> ID：14345117
> 
> 赞同：4
> 
> 时间：2013-01-15T19:12:17.340
> 
> 标签：memory-leaks, servicestack, edit-and-continue, funq

我最近编写了一个处理大量吞吐量（每天大约 60+ 百万个请求）的小型服务，它遇到了内存问题。起初，我查看了所有常见的嫌疑人，确信这一定是我写的东西，而不是与非常有用且面向性能的 ServiceStack 库有关的东西。然而，在生产服务器上使用 windbg 到 !dumpheap -stat 时，我惊讶地发现内存中的绝大多数对象都是 System.WeakReference 类型，其中 !gcroots 指向 ServiceStack 的 Funq 容器。

我什至没有在我的服务中使用 IoC 的数据结构，所以我想知道为什么会这样？我是否错误地初始化了某些东西？我的 apphost 初始化类只是使用程序集和名称信息调用基本构造函数，我根本不重写 Configure 方法。

```
public SvcName() : base("SvcName", typeof(SvcName).Assembly) { } 
```

我在其他地方读到 System.WeakReference 对象经常在极少数情况下由 .NET 插入，因为 Visual Studio 编译二进制文件时启用了“编辑并继续”调试选项，但在我的 VS 中将其关闭没有效果（大概是因为SS 二进制文件已经编译并在我的项目中被引用）。

有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T00:06:21.053

在 Funq 中使用 Wea​​kReference 来跟踪存储在[WeakReference Stack 的一次性用品](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/Funq/Container.cs#L17)`IDisposable`中的 's，如此处所示。基本上，Funq 会跟踪创建的每个 WeakReference，以便在处置 Container 时将它们全部处置。`IDisposable`

我会先看看你是否可以减少`IDisposable`实例的使用（例如使用更多的单例），否则尝试修改 Funq 源代码以使用`Stack<IDisposable>`而不是 a`Stack<WeakReference>`并让我知道这是否解决了你的问题，如果可以的话，我可以包含一个 opt使用 ServiceStack 中的 -in 选项来`Stack<IDisposable>`代替`Stack<WeakReference>`.

# php - 在我的页面中显示双引号

> ID：14345126
> 
> 赞同：-1
> 
> 时间：2013-01-15T19:12:52.353
> 
> 标签：php, mysql

> **可能重复：**
> [在php中转义双引号](https://stackoverflow.com/questions/1869695/escaping-double-quotes-in-php)

在我的数据库中，记录就像`this is php's code and "called" a special code`. 当我尝试将此文本从 mysql 数据库获取到我的 php 页面时，它显示为`this is php's code and`
我的代码很简单：

```
$all_gallery_ph_sql = mysql_query("SELECT `path`,`name`,`title`,`details` FROM `gallery` WHERE `status`='1' AND `type`='myreference' AND `enable_status`='1' LIMIT {$startpoint} ,{$limit}");                                       
echo $res['details']; 
```

![在此处输入图像描述](../Images/0ef7e2336a50b4d49d11855c58d29d4e.png) 那么如何解决这个问题。请帮我。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T19:16:18.020

您可以使用[`htmlentities()`](http://php.net/manual/en/function.htmlentities.php)：

```
echo htmlentities( $gallerycontent['content'], ENT_QUOTES); 
```

# c# - 两条 MessageBox 退出确认消息

> ID：14345128
> 
> 赞同：-1
> 
> 时间：2013-01-15T19:12:59.793
> 
> 标签：c#

我的确认信息有问题。我有两个 MessageBox，第一个问“你想退出吗？” 第二个，问“你确定！？” 我的问题是，如果我在第一个 MessageBox “你想退出吗？”时选择是。出现，第二个 MessageBox 仍然会出现..

```
namespace WindowsFormsApplication5
{
    public partial class Form1 : Form
    {

        private void Form1_FormClosing(Object sender, FormClosingEventArgs e)
        {
            var confirmationBox = MessageBox.Show(@"Do you want to quit", @"Title",
                                                  MessageBoxButtons.YesNo);
            var confirmationBox2 = MessageBox.Show(@"Are you sure?", @"", MessageBoxButtons.YesNo);

            if (confirmationBox == DialogResult.Yes)
            {
                if (confirmationBox2 == DialogResult.No)
                {
                    e.Cancel = true;
                }
            }

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T19:14:44.580

在检查第一个消息框的结果之前，不要显示第二个消息框：

```
var confirmationBox = MessageBox.Show(@"Do you want to quit", @"Title",
    MessageBoxButtons.YesNo);

if (confirmationBox == DialogResult.Yes)
{
    var confirmationBox2 = MessageBox.Show(@"Are you sure?", @"", MessageBoxButtons.YesNo);
    if (confirmationBox2 == DialogResult.No)
    {
        e.Cancel = true;
    }
} 
```

PS 用诸如此类的对话框让您的用户烦恼很烦人；考虑不要这样做，除非有一个真正令人信服的理由不应该立即关闭它们（即在操作中间会处于无效状态或有未保存的数据）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:24:52.760

发生的事情是您正在显示消息框，然后检查每个响应。

您想要做的是在您的 if 语句中进行显示并检查响应。

```
if (MessageBox.Show(@"Do you want to quit", "Title", MessageBoxButtons.YesNo) == DialogResult.Yes) {
    if (MessageBox.Show(@"Are you sure?", @"", MessageBoxButtons.YesNo) == DialogResult.No) {
       e.Cancel = true; 
    }
} 
```

# jquery - 阻止 div 被拖动到顶部 300px 以上

> ID：14345131
> 
> 赞同：0
> 
> 时间：2013-01-15T19:13:12.903
> 
> 标签：jquery, drag-and-drop, limit, restriction

在不使用包含的情况下阻止 div 被拖动到 300px 顶部上方。

到目前为止，我让它闪烁并返回..或者在下降后返回 300px

我怎样才能以适当的方式限制它？我需要它在拖动时不要拖动超过 300px 顶部，而不是像“包含”我只有上限......其余的是无限的。请帮忙。

[小提琴演示](http://jsfiddle.net/3ARx9/)

```
$(function() {
    $( "#draggable" ).draggable({
                 drag: function () {
                     if($(this).offset().top<300)
                          $(this).css("top", 300);
                 },
                 stop: function () {
                     if($(this).offset().top<300)
                          $(this).css("top", 300);
                 },
     });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:24:23.980

你应该使用包含坐标数组的容器，比如

```
 $( "#draggable" ).draggable({
  containment: [ 0, 300, 10000, 10000 ]
    }); 
```

o 左侧为 0，从顶部 300 像素开始，右侧为 10000 像素（或任何您想要的，也可以使用 9999999 之类的东西），底部相同。

希望能帮助到你！

忘记添加小提琴链接[http://jsfiddle.net/3ARx9/9/](http://jsfiddle.net/3ARx9/9/)

# python - python Pyodbc，无法在表中创建名为“Date”的字段

> ID：14345132
> 
> 赞同：1
> 
> 时间：2013-01-15T19:13:14.240
> 
> 标签：python, windows, ms-access, pyodbc

问题是我无法创建一个名为的字段`Date`（我认为因为它是一种类型）有什么想法吗？

```
from pyodbc import connect
# database connect
conn = connect('DRIVER={Microsoft Access Driver (*.mdb)};DBQ=test.mdb')
cursor = conn.cursor()
# sql query execute
query = "create table MyTable(name varchar(30), age integer , Date date)"
cursor.execute(query)
# commit changes             
conn.commit()
conn.close() 
```

错误：

```
Traceback (most recent call last):
  File "\Path\to\myscript\test.py", line 9, in <module>
    cursor.execute(query)
ProgrammingError: ('42000', '[42000] [Microsoft][ODBC Microsoft Access Driver] Syntax error in field definition. (-3553) (SQLExecDirectW)') 
```

环境：Windows 7 64bit，Python 2.7 pyodbc-3.0.6.win-amd64-py2.7

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T19:19:23.613

`DATE`是 Access（和其他软件）中的[保留字](http://msdn.microsoft.com/en-us/library/office/bb208875%28v=office.12%29.aspx)。

尝试`Date`用方括号将列名括`[]`起来，或者更好的是，想出一个不同的列名。

```
...
query = "create table MyTable(name varchar(30), age integer , [Date] date)"
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T19:18:01.750

用 ` 符号将反引号中的名称括起来。但是，我强烈建议将名称更改为其他名称，以防止发生拼写错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T19:20:09.837

You're right, you can't create a column with the same name as type. Some RDBMS's will allow you to do this if you quote it, i.e. "`..age integer, "Date" date)`" (or as others have said, backticks or square brackets) but then you have to quote it in all your queries as well. Better to avoid that.

Note that this isn't a python problem, it's a problem with the database server (which appears to be MS Access). (And to be accurate, it's not a *problem* with the database server, that's just how it works. It just has nothing to do with python.)

# ruby-on-rails - Vagrant 和 RoR

> ID：14345135
> 
> 赞同：0
> 
> 时间：2013-01-15T19:13:26.317
> 
> 标签：ruby-on-rails, vagrant

我对 Rails 很陌生，我已经安装了 Vagrant 来运行 Rails 服务器。我已经启动了服务器并且能够加载 localhost:3000，现在我不知道该去哪里。命令行是空白的，我读到我应该输入“脚本/控制台”，但我真正能做的就是 ctrl-C 或 -d。

当我尝试使用“vagrant up”在单独的窗口中运行 Vagrant 时，它说我需要执行“Vagrant init”

我该从哪里开始，以便我可以开始阅读我的教程/开始开发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:40:09.937

[这个](http://railscasts.com/episodes/292-virtual-machines-with-vagrant)来自 RailsCasts 的截屏视频应该可以帮助您入门。有些建议有点过时了，但是通过阅读节目说明和评论，您应该能够启动并运行。从那里你可以修改。

虽然最初使用 Vagrant 设置 Rails 是可行的，但它是一个非常方便的工具，值得体验。当您合并像[Puppet](https://puppetlabs.com/puppet/what-is-puppet/)这样的供应工具时，它会变得**更加**有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:27:00.883

在您的终端中，如果您通过运行 webrick 服务器，`rails server`您需要将其设置为后台或打开一个新终端以获取您的 shell 提示符。如果您 ctrl-C 退出它，您将杀死服务器。请记住，webrick 服务器只能用于本地开发。它不是生产级 Web 服务器。有关详细信息，请参阅[Rails 入门指南](http://guides.rubyonrails.org/getting_started.html)。

如果要在 Vagrant VM 中运行 rails 服务器，则需要在 Vagrantfile 中[配置端口转发](http://docs.vagrantup.com/v1/docs/config/vm/forward_port.html)，以便可以从主机访问。

```
config.vm.forward_port 3000, 9080 
```

您看到的错误是您在不包含 Vagrantfile 的目录中运行 vagrant。

# linux - 长时间运行的进程远程终止？

> ID：14345139
> 
> 赞同：1
> 
> 时间：2013-01-15T19:13:54.177
> 
> 标签：linux, shell, unix, process, pid

我正在开发一个应用程序，允许用户在服务器上远程运行 AI 算法。其中一些算法需要很长时间。它的设置使得 AJAX 调用提供算法参数并在服务器上启动 C++ 算法。通过 AJAX 调用轮询状态文件来跟踪计算的结果和状态。该解决方案似乎适用于同时使用该服务的多个用户，但我现在正在寻找一种方法来取消用户浏览器的计算。我有一个停止按钮，用于停止 AJAX 更新服务并停止浏览器与服务器上正在运行的进程之间的任何通信。问题是进程还在运行，我想在用户取消操作时释放服务器资源。以下是更多细节。

`AJAX`调用命中的 Web 服务在用户下运行`'tomcat'`，可以通过 ps -U tomcat 列出。算法执行都是“java”的子进程，可以用`ps --ppid ###`.

浏览器记录当前计算开始的时间（用户系统时间，而不是服务器系统时间）。

从不同位置连接的用户可能会同时进行多个计算，从而导致许多进程具有相同的名称和父进程。

restful 服务通过 java 执行终端命令`runtime.exec()`。

我对shell脚本不是很了解，所以任何帮助都将不胜感激。谁能想到一种方法来使用java进程对象或shell脚本/awk通过`timestamp`（可能是最接近用户系统时间的时间戳......？）或其他方式来定位进程？

提前致谢。

- 编辑

如果您有 pid...，在 java 中是否有办法获取给定进程的句柄？看起来不像。

- 编辑

我无法更改服务器上长时间运行的进程的源代码。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T19:47:58.247

您的 AJAX 调用应该操作某种资源（最方便的是文本文件），它充当进程的[信号量](http://en.wikipedia.org/wiki/Semaphore_%28programming%29)，在每次轮询迭代中检查该信号量文件是否已设置为停止状态。如果 AJAX 将信号量文件更改为停止，则进程会停止，因为您的应用程序会对其进行检查并做出相应的响应。这反过来意味着需要将功能编程到您的 Java AI 应用程序中，而不是弄清楚 PID 是什么，然后在操作系统级别将其杀死。当然，这假设您可以访问应用程序的源代码。

当然，信号量不一定是文件，也可以是数据库等中的值，以适合您的口味和配置为准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:33:37.727

我终于找到了一个安全的解决方案。在 restful java 服务中，using`Process p = Runtime.getRuntime().exec()`为您提供了正在运行的进程的句柄。然而，获得 pid 的唯一方法是通过一种称为反射的技术。

```
Field f = p.getClass().getDeclaredField();
f.setAccessible(true);
String pid = Integer.toString(f.getInt(p)); 
```

尴尬到不可思议……

无论如何，由于 p 从服务器到客户端的传递是不可能的，并且允许远程调用通过参数传递的 pid 杀死任意服务器进程的不安全性，我能想出的唯一逻辑策略是编写将获取的 pid 保存到由初始客户端时间戳指示的进程唯一文件中，并在 restful 服务函数返回时删除该文件。这个唯一的文件可以通过另一个读取文件的restful服务用作终止句柄，并以等于文件内容的pid终止进程。这

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T20:21:04.633

您可以保留`Process`返回的实例`runtime.exec`并调用 Process.destroy 来终止子进程。不太了解您的 Web 服务应用程序，我假设您可以将流程实例保存在将用户映射到流程列表的全局会话映射中。确保对该映射的访问是线程安全的。此外，它仅在您有一个允许跨不同请求共享此类全局会话映射的 Web 服务进程时才有效。

或者看看[Get subprocess id in Java](https://stackoverflow.com/questions/1897655/get-subprocess-id-in-java)。

# iphone - 在 MFMailCompose 模式打开、取消和草稿保存/删除期间收到内存不足警告后不显示父视图

> ID：14345140
> 
> 赞同：1
> 
> 时间：2013-01-15T19:13:55.253
> 
> 标签：iphone, objective-c, ios5, memory-management, didreceivememorywarning

我的 iPhone 应用程序具有以下结构

AppDelegate / UITabBarController / 5 UINavigationControllers（我的标签） / UIViewController（如每个 UINavigationController 的 rootViewController）

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    HomeViewController *homeViewController = [[HomeViewController alloc] init];
    GoalsTableViewController *goalsTableViewController = [[GoalsTableViewController alloc] init];
    HistoryViewController *historyViewController = [[HistoryViewController alloc] init];
    SettingsViewController *settingsViewController = [[SettingsViewController alloc] init];
    InfoViewController *infoViewController = [[InfoViewController alloc] init];

    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.delegate = self;

    self.navBarActivity = [[UINavigationController alloc] initWithRootViewController:homeViewController];

    self.navBarSettings = [[UINavigationController alloc] initWithRootViewController:settingsViewController];

    self.navBarHistory = [[UINavigationController alloc] initWithRootViewController:historyViewController];

    self.navBarGoals = [[UINavigationController alloc] initWithRootViewController:goalsTableViewController];

    self.navBarAbout = [[UINavigationController alloc] initWithRootViewController:infoViewController];

    self.tabBarController.viewControllers = [NSArray arrayWithObjects:self.navBarActivity, self.navBarGoals, self.navBarHistory,self.navBarSettings, self.navBarAbout, nil];

    self.window.rootViewController =  self.tabBarController;
    [self.window makeKeyAndVisible];

    return YES;

} 
```

在一些 UIViewControllers 中，我实现了一个 MFMailComposeViewController 来发送电子邮件。

我实验了一个奇怪的问题（在模拟器和真实设备 iOS 5.0 和 5.1 上重现）...

使用 iPhone 模拟器（仅限 iOS 5.0 或 5.1），如果我在屏幕上打开 MFMailComposerViewController 模式时模拟内存不足警告，然后点击取消，然后点击删除|保存草稿，当模式被关闭时，父视图似乎不可见（空白视图）。

生命周期似乎工作正常，如果我按照相同的步骤但在模拟内存不足警告后我从 MFMailComposeViewController 模态发送电子邮件，当模态被解除时，我的父视图看起来很好。

有什么建议可以防止我的父视图在内存警告中被卸载吗？

* * *

编辑1

我弄清楚发生了什么，在卸载并返回视图并进入 viewdidload（生命周期）中的最后一个视图后，tabBar 没有插入导航视图。我检查 tabBar 的子视图：

```
UITransitionView
   ==><UIViewControllerWrapperView>
       ==> empty
<UITabBar> 
```

我通过在 viewdidload 中添加子视图重新集成了导航栏的视图：

```
 UIView *tabBarControllerWrapperView = [[[self.tabBarController.view.subviews objectAtIndex:0] subviews] objectAtIndex:0];

    // tabBar UIViewControllerWrapperView has not views
    if([tabBarControllerWrapperView.subviews count] == 0)
    {
         // add navigationbar view
         [tabBarControllerWrapperView addSubview:self.navigationController.view];
    } 
```

没有更好的方法来解决它，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:52:03.030

在可能出现内存警告之后，在不可见的控制器上调用 viewDidUnload （iOS <= 5 ）。在您的情况下，呈现模态邮件撰写器的控制器的视图可能已被卸载。

viewDidUnload 背后的想法是，一旦再次调用 viewDidLoad，您就可以保存恢复视图所需的数据。您必须记住的是，您的 viewDidLoad 可以被多次调用。

在 iOS6 viewDidUnload 不再被调用，所以这个逻辑必须移动到 didReceiveMemoryWarning

# algorithm - 什么是最合适的数据集？

> ID：14345143
> 
> 赞同：-3
> 
> 时间：2013-01-15T19:14:05.813
> 
> 标签：algorithm, dataset, data-mining

我正在制作一个数据挖掘应用程序，可以根据患者的症状将患者分类为正确的诊断。我想知道是否有人知道我需要的最合适的数据集是什么以及我可以从哪里获得它。专注于某个领域（即心脏病、糖尿病等）是更好的方法，还是我应该根据所有类型的疾病对患者进行整体分类？理想情况下，我希望数据集基于患者对医生的访问。因此它应该包含症状和诊断。但是，如果我可以获得包含其他属性（例如年龄、性别等）的数据集，那就更好了。如果有人可以帮助我并将我指向合适的数据集，那么我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:29:15.833

有一些示例数据集。

例如，在[Weka](http://www.cs.waikato.ac.nz/ml/weka/)中有一个包含糖尿病数据的数据集。这些是变量：

```
%    1\. Number of times pregnant
%    2\. Plasma glucose concentration a 2 hours in an oral glucose tolerance test
%    3\. Diastolic blood pressure (mm Hg)
%    4\. Triceps skin fold thickness (mm)
%    5\. 2-Hour serum insulin (mu U/ml)
%    6\. Body mass index (weight in kg/(height in m)^2)
%    7\. Diabetes pedigree function
%    8\. Age (years)
%    9\. Class variable (0 or 1) 
```

还可以查看此页面以获取一些更公开的资源列表（其中一些可能具有医学背景）：

*   [http://www.cs.waikato.ac.nz/ml/weka/datasets.html](http://www.cs.waikato.ac.nz/ml/weka/datasets.html)

# bash - 从 mysql 转储文件 awk 打印

> ID：14345145
> 
> 赞同：1
> 
> 时间：2013-01-15T19:14:15.830
> 
> 标签：bash, scripting, sed, awk

我正在尝试从 mysqldump 文件中提取数据，它是一个非常大的文件，将其还原到数据库需要几天时间，我正在尝试使用 sed 或 awk 来提取数据，如下所示

```
INSERT INTO `CallDetailRecord` VALUES (1706,1340684374803,1340684375823,1340684383013,'2253040012','2253040012','2253040012','4016487697',0,'225304001200','T',1,'','',0,7,1707,'LineTester','1101','57.6.app_linetester.1102@10.40.10.170','',5060,'10.40.10.45',5060,'1000003415761102_app_linetester@10.40.10.170','<sip:12253040012@10.40.10.45:5060>;tag=sansay420992041rdb3914','<sip:14016487697@10.40.10.170>;tag=100000342','200',0,'',0,NULL,'','^A',0,NULL,NULL);
INSERT INTO `CallDetailRecord` VALUES (1707,1340684381526,1340684381526,1340684388725,'3109757108','3109757108','','4016487697',0,'','P',0,'','',0,7,1708,'LineTest','1101','2.20.app_linetest.1103@10.40.10.170','10.40.10.40',5060,'',5060,'212122542-0-2277160422@74.112.124.121','<sip:3109757108@10.40.10.170>;tag=100000667','\"4016487697\" <sip:4016487697@10.40.10.40>;tag=sansay420992112rdb2348','200',0,'',0,NULL,'','^A',0,NULL,NULL);
INSERT INTO `CallDetailRecord` VALUES (1708,1340684380791,1340684381384,1340684389761,'3172850012','3172850012','3172850012','4016487697',0,'317285001200','T',1,'','',0,8,1709,'LineTester','1101','57.13.app_linetester.1102@10.40.10.170','',5060,'10.40.10.45',5060,'10000034357131102_app_linetester@10.40.10.170','<sip:13172850012@10.40.10.45:5060>;tag=sansay420992099rdb5677','<sip:14016487697@10.40.10.170>;tag=100000344','200',0,'',0,NULL,'','^A',0,NULL,NULL); 
```

我希望输出是

```
1706,1340684374803,1340684375823,1340684383013,'2253040012','2253040012','2253040012','4016487697',0,'225304001200','T',1,'','',0,7,1707,'LineTester','1101','57.6.app_linetester.1102@10.40.10.170','',5060,'10.40.10.45',5060,'1000003415761102_app_linetester@10.40.10.170','<sip:12253040012@10.40.10.45:5060>;tag=sansay420992041rdb3914','<sip:14016487697@10.40.10.170>;tag=100000342','200',0,'',0,NULL,'','^A',0,NULL,NULL
1707,1340684381526,1340684381526,1340684388725,'3109757108','3109757108','','4016487697',0,'','P',0,'','',0,7,1708,'LineTest','1101','2.20.app_linetest.1103@10.40.10.170','10.40.10.40',5060,'',5060,'212122542-0-2277160422@74.112.124.121','<sip:3109757108@10.40.10.170>;tag=100000667','\"4016487697\" <sip:4016487697@10.40.10.40>;tag=sansay420992112rdb2348','200',0,'',0,NULL,'','^A',0,NULL,NULL
1708,1340684380791,1340684381384,1340684389761,'3172850012','3172850012','3172850012','4016487697',0,'317285001200','T',1,'','',0,8,1709,'LineTester','1101','57.13.app_linetester.1102@10.40.10.170','',5060,'10.40.10.45',5060,'10000034357131102_app_linetester@10.40.10.170','<sip:13172850012@10.40.10.45:5060>;tag=sansay420992099rdb5677','<sip:14016487697@10.40.10.170>;tag=100000344','200',0,'',0,NULL,'','^A',0,NULL,NULL 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T19:26:51.820

您可以使用：

文件 a.awk：

```
BEGIN { FS = "VALUES \\(" }; 
"INSERT INTO \`CallDetailRecord\` VALUES" { sub( ");$", "", $2 ); print $2 }; 
```

跑：

`cat mysqldump_file | awk -f a.awk`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T19:54:36.480

使用 sed：

```
sed -e 's/^INSERT INTO `CallDetailRecord` VALUES (//' -e 's/);$//' mysqldump_file 
```

# sql-server-2008 - 无法重现 StackOverflow 文章将 NULL 值从文件传输到表的成功

> ID：14345146
> 
> 赞同：0
> 
> 时间：2013-01-15T19:14:19.323
> 
> 标签：sql-server-2008, ssis

我在尝试重复[此](https://stackoverflow.com/questions/4620755/how-do-i-retain-null-values-when-using-ssis-to-import-from-flat-file-in-sql-serv)StackOverflow 文章的成功以将 CSV 文件中的 NULL 值传输到允许 NULL 的表列时遇到问题。

鉴于此 CSV 文件的文本分隔符 = 双引号和列分隔符 = 逗号。请注意，有两条记录以及从末尾算起的第 3 列和第 4 列，分别是“CELL_TXT”和“CELL_VAL”。第一列“CELL_TXT”包含一个文本值。如果此文本值可以计算为数字，则 CELL_VAL 将包含此数字值，否则为 NULL。

```
"FLDR","FILE_NM","TAB_IDX","TAB_NM","TAB_PART","LABEL_DESGTR","LABEL_TXT","SECT_NM","SEG_NM","COLMN_TXT","ROW_IDX","COLMN_IDX","COLMN_LETTR","CELL_TXT","CELL_VAL","LAST_OPER_ID","LAST_TIMESTMP"
"C:\corp_mlr_rebates\Processing\HHS\CGLIC","MLR_Template_CGLIC_Grand_Total.xls","1","Pt 1 and 2","Part 1","1.","Premium","Health Insurance Coverage","Individual","Total as of 12/31/11","19","6","F","2",2,"HHSSWEEP","1/15/2013 1:40:20 PM"
"C:\corp_mlr_rebates\Processing\HHS\CGLIC","MLR_Template_CGLIC_Grand_Total.xls","1","Pt 1 and 2","Part 1","1.","Premium","Health Insurance Coverage","Individual","3/31/12","19","7","G","",,"HHSSWEEP","1/15/2013 1:40:20 PM" 
```

请注意，对于第二行，CELL_TEXT 为空白“”，因此 CELL_VAL 在 CSV 文件中存储为 NULL，由紧跟在前一个列分隔符之后的连续逗号列分隔符指示。

我正在尝试将此文件导入到允许 CELL_VAL 表中为 NULL 的表中。这是完整的表格，尽管我们对 CELL_TXT 尤其是 CELL_VAL 列感兴趣。

```
CREATE TABLE [dbo].[HHS_GRD_STG](
    [FLDR] [varchar](255) NOT NULL,
    [FILE_NM] [varchar](80) NOT NULL,
    [TAB_IDX] [int] NOT NULL,
    [TAB_NM] [varchar](80) NOT NULL,
    [TAB_PART] [varchar](80) NOT NULL,
    [LABEL_DESGTR] [varchar](80) NOT NULL,
    [LABEL_TXT] [varchar](255) NOT NULL,
    [SECT_NM] [varchar](80) NOT NULL,
    [SEG_NM] [varchar](80) NOT NULL,
    [COLMN_TXT] [varchar](80) NOT NULL,
    [ROW_IDX] [int] NOT NULL,
    [COLMN_IDX] [int] NOT NULL,
    [COLMN_LETTR] [char](2) NOT NULL,
    [CELL_TXT] [varchar](255) NOT NULL,
    [CELL_VAL] [decimal](14, 4) NULL,
    [LAST_OPER_ID] [char](8) NOT NULL,
    [LAST_TIMESTMP] [datetime] NOT NULL
) ON [PRIMARY] 
```

在 SSIS 中，我将输入文件对象定义为逗号分隔文件，其中包含 " 文本限定符和 {CR}{LF} 作为行分隔符。

在数据流任务中，我在文件源对象中将“保留空值”设置为 true。在目标 Table 对象中，我还设置了“保持 Nulls”属性，但是当我运行包时，出现以下错误。

```
Error: 0xC0202009 at Load HHS Child tables, HHS_GRD_STG Table [579]: SSIS Error Code DTS_E_OLEDBERROR.  An OLE DB error has occurred. Error code: 0x80004005.
An OLE DB record is available.  Source: "Microsoft SQL Server Native Client 10.0"  Hresult: 0x80004005  Description: "Unspecified error".
Error: 0xC020901C at Load HHS Child tables, HHS_GRD_STG Table [579]: There was an error with input column "CELL_TXT" (659) on input "OLE DB Destination Input" (592). The column status returned was: "The value violated the integrity constraints for the column.".
Error: 0xC0209029 at Load HHS Child tables, HHS_GRD_STG Table [579]: SSIS Error Code DTS_E_INDUCEDTRANSFORMFAILUREONERROR.  The "input "OLE DB Destination Input" (592)" failed because error code 0xC020907D occurred, and the error row disposition on "input "OLE DB Destination Input" (592)" specifies failure on error. An error occurred on the specified object of the specified component.  There may be error messages posted before this with more information about the failure.
Error: 0xC0047022 at Load HHS Child tables, SSIS.Pipeline: SSIS Error Code DTS_E_PROCESSINPUTFAILED.  The ProcessInput method on component "HHS_GRD_STG Table" (579) failed with error code 0xC0209029 while processing input "OLE DB Destination Input" (592). The identified component returned an error from the ProcessInput method. The error is specific to the component, but the error is fatal and will cause the Data Flow task to stop running.  There may be error messages posted before this with more information about the failure. 
```

我注意到文件的第一条记录已成功传输到 dest 表。这是具有 NON NULL 值的记录。

由于 Destination 表允许 CELL_VAL 列为空，为什么此任务会失败？

```
[CELL_VAL] [decimal](14, 4) NULL, 
```

**跟进问题：**

William 指出，当列不允许 NULL 时，另一个列包含空值是正确的。

这是因为我的包似乎没有区分空字符串值

```
,"", 
```

和一个 NULL 值

```
,, 
```

为此，我指定我的文件使用双引号作为文本分隔符，但它似乎没有帮助。结果，由于“保留 NULLS”的设置似乎是一个文件级别的属性，当我真正想要的是将其他列设置为当我有一个由两个连续文本分隔符表示的值时，长度为零的字符串。

是否可以让 SSIS 区分 NULL 和零长度字符串值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T19:37:25.967

在我看来，您显示的错误不是关于 CELL_VAL 列，而是关于 CELL_TXT。

```
There was an error with input column "CELL_TXT" (659) on input "OLE DB Destination
Input" (592). The column status returned was: "The value violated the integrity 
constraints for the column.". 
```

这似乎表明 CELL_TXT 列存在外键关系或其他一些约束，因此不允许使用空白值。

它与 CELL_VAL 中的空值无关。

# java - 使用 JSTL/Tomcat 进行财务计算的最佳实践

> ID：14345147
> 
> 赞同：4
> 
> 时间：2013-01-15T19:14:19.263
> 
> 标签：java, jsp, jstl, decimal

我正在使用 Tomcat/JSTL/MySQL/等构建一个新的电子商务平台。

我知道与使用浮点计算相关的各种问题 - 例如 12.3456000000000789... 我知道舍入与截断也可能是一个问题。

在不将所有业务逻辑移入 Java 类的情况下，在保持架构简单的同时对货币进行可靠计算的最佳方法是什么？

我对可能性的想法包括：

*   隔离问题计算并单独处理
*   将数字表示为多头并使用美分进行计算
*   使用 BigDecimal 并在 Java 中进行所有计算
*   尽可能将数字存储在字符串中
*   使用 <fmt:formatNumber var="... 而不是 <c:set var="...

我可能不是第一个这样做的人。

最直接的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T23:14:20.030

> 隔离问题计算并单独处理

不是答案。无论您使用什么技术，都将来自您列表中的其他地方。

> 将数字表示为多头并使用美分进行计算

可行但很笨拙，而且在金融领域中，有一小部分是有效的：例如，外汇。

> 使用 BigDecimal 并在 Java 中进行所有计算

这就是答案。更好的是，在数据库中进行计算。

> 尽可能将数字存储在字符串中

不是答案。您仍然需要计算，当您计算时，该技术将来自您列表中的其他地方。

> 使用 <fmt:formatNumber var="... 而不是 <c:set var="...

不是答案。您当然必须使用 formatNumber，但它没有说明您将如何计算。我不明白 c:set 与它有什么关系，它做了不同的事情。它不是 numberFormat 的替代品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T03:27:07.063

> 在不将所有业务逻辑移入 Java 类的情况下，在保持架构简单的同时对货币进行可靠计算的最佳方法是什么？

选择简单或可靠——在这种情况下你不能同时拥有两者——至少不是*那么*简单。

JSP 页面中的业务逻辑是一种非常糟糕的代码气味——在小型个人项目中已经够糟糕了，但是为什么要在“电子商务平台”中这样做呢？

尽管您对此犹豫不决，但我建议您将所有业务逻辑从 JSP 移至适当的 java 类。

更好的是，鉴于您正在开发处理金融交易的软件，请帮您自己和您的潜在客户一个大忙，并聘请一位知道他们在做什么的程序员。

我意识到这有点侮辱，但鉴于您明显缺乏对 Java 编程语言和一般体面的编码实践的熟悉，您确实没有编写处理其他人资金的商业软件的业务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T06:29:23.680

答对了。我的问题根本不在EL。原来我不小心在数据库中有一些浮点字段。当我把它们改回小数时，一切都到位了。

似乎如果你从 MySQL 中提取一个小数，你会得到一个 BigDecimal。所以这个词毕竟是有序的。

感谢大家的意见。

看：

```
<c:set var="tests" value="123.45"/>
<br>tests: ${tests} -- <%= pageContext.findAttribute("tests").getClass() %>

<c:set var="testl" value="${3}"/>
<br>testl: ${testl} -- <%= pageContext.findAttribute("testl").getClass() %>

<c:set var="testd" value="${123.45}"/> 
<br>testd: ${testd} -- <%= pageContext.findAttribute("testd").getClass() %>

<c:set var="testbd" value="<%= new BigDecimal(\"123.45\") %>"/>
<br>testbd: ${testbd} -- <%= pageContext.findAttribute("testbd").getClass() %>

<c:set var="testbd" value="${testbd+1}"/>
<br>testbd: ${testbd} -- <%= pageContext.findAttribute("testbd").getClass() %>

<sql:query var="items">
SELECT * FROM items WHERE itemid=?;
<sql:param value="55" />
</sql:query>
<c:set var="testdb" value="${items.rows[0].price}"/>
<br>testdb: ${testdb} -- <%= pageContext.findAttribute("testdb").getClass() %>

<%-- output
tests: 123.45 -- class java.lang.String 
testl: 3 -- class java.lang.Long 
testd: 123.45 -- class java.lang.Double 
testbd: 123.45 -- class java.math.BigDecimal 
testbd: 124.45 -- class java.math.BigDecimal 
testdb: 129.95 -- class java.math.BigDecimal
--%> 
```

# vba - Excel：固定按钮位置

> ID：14345149
> 
> 赞同：6
> 
> 时间：2013-01-15T19:14:43.067
> 
> 标签：vba, excel, excel-2010

在 Excel 工作表上附加 Excel/VBA 按钮需要一些帮助。无论我如何滚动或缩放，我都需要它保持在屏幕上的相同位置。最好，我需要在屏幕的左下角或右下角。

我试过添加一个按钮。然后，我右键单击该按钮。单击“格式控件”->“属性”->“不移动或按单元格调整大小”。我是否错过了一些使这不起作用的东西？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-19T21:29:49.227

我知道这篇文章很旧，但对任何人都可能有用。ActiveWindow 的 VisibleRange 属性可以解决这个问题。使用这样的东西：

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
    With ActiveSheet.OLEObjects("MY_BUTTON'S_NAME")
        .Top = ActiveWindow.VisibleRange.Top + ActiveWindow.VisibleRange.Height - 5
        .Left = ActiveWindow.VisibleRange.Left + ActiveWindow.VisibleRange.Width - .Width - 5
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:05:27.590

这是我今天早些时候在评论中提出的想法 :) 通常我们可以`Floating User Form`通过将表单的 Modal 属性设置为 0 来获得 a，这确实是一个`Modeless`状态。

需要考虑的基本要点：

*   表单的外观和感觉使其看起来像一个按钮（不显示标题栏/不可调整大小/隐藏关闭按钮等）
*   设置按钮的位置
*   哪个事件应该触发表单按钮（工作簿打开）
*   你会用`Form Initialize`Event做什么
*   Whcih 事件应该让它保持在同一个位置*活着*

需要考虑的其他要点：

*   您可能只想让此按钮对您正在工作的工作簿可见，如果您打开另一个工作簿实例，是否仍要保留该按钮
*   如果您最小化 Excel Window 实例，您打算如何管理按钮的状态并使其保持可见

*   [发布关于即使工作簿最小化也继续显示表单的信息。](http://www.excelforum.com/excel-programming-vba-macros/815752-keep-displaying-stopwatch-even-excel-sheet-gets-minimized.html)

*   [我碰巧看到的另一个很好的参考资料（有点技术性）但值得一试 - 至少要了解您可以使用的某些属性/方法：扩展 VBA 用户表单控件。](http://www.cpearson.com/excel/formcontrol.aspx)

文章包括以下信息，请注意最后一行:)

*它们使您可以访问 VBA 或组成 VBA 项目的对象（用户窗体、工作簿等）不可用的功能。当您调用 API 时，您将绕过 VBA 并直接在 Windows 上调用。这意味着您无法获得 VBA 通常提供的类型检查等安全机制。如果您将无效值传递给 API 或（一个非常常见的错误）使用 ByRef 参数而不是 ByVal 参数，您很可能会立即使 Excel 完全崩溃，并且您将丢失所有未保存的工作。**我建议在你确信你的 API 调用是可靠的之前，在调用 API 函数之前保存你的工作。***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-17T10:32:15.013

在工作表的开头添加新行并在其上设置按钮，然后：冻结首行

[![在此处输入图像描述](../Images/1fb090f0c6eb45a36bee6ac84fca7003.png)](https://i.stack.imgur.com/usvFp.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-10T10:49:29.807

右键→属性→放置→更改为3。

# android - Android上的JQuery Mobile / Phonegap - 所有文本都以大写字母显示

> ID：14345156
> 
> 赞同：13
> 
> 时间：2013-01-15T19:15:00.663
> 
> 标签：android, jquery, cordova

我正在构建一个 phonegap (2.3.0) + jQuery Mobile (1.2) 应用程序。

一切都很好，但我无法让任何文本以混合的大写/小写字母显示 -

例子：

```
<p>This is my stuff:</p> 
```

出现：这是我的东西：

我尝试添加 style="font-variant: normal"

```
<p style="font-variant:normal">This is my stuff:</p> 
```

但我仍然得到这是我的东西：

我试图更改顶部的样式表（之前所有 css 加载）：

```
<style>
        body  * {
                font-variant: normal !important;
            }
</style> 
```

仍然一切都是大写的。

我确认我使用的字体是混合大小写字体，而不是全大写字体。

有任何想法吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-15T19:19:10.593

尝试 text-transform 属性：

```
text-transform: none; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-09-04T13:04:59.873

Phonegap 定义在`index.css`：

```
body {
 ...  
 text-transform:uppercase;  
 ...
} 
```

不知道为什么，评论一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T21:49:54.453

我对 phonegap 3.3 jquery 1.4.1 有同样的问题，解决方案是尝试 index.css body { ...
text-transform:uppercase;
... } to body { ...
text-transform:none;
... }

# javascript - async.filter 在所有迭代器完成之前调用回调

> ID：14345159
> 
> 赞同：1
> 
> 时间：2013-01-15T19:15:08.557
> 
> 标签：javascript, async.js

我正在使用[caolan 的 async.js](https://github.com/caolan/async)。我很困惑为什么在所有迭代器完成之前调用回调。当我运行以下代码时：

```
 async.filter(matched_objects.fields, function(item, callback) {
      console.log('checking field: ' + item.id);
      if(item.id == 130 || item.id == 131) {
        console.log('calling field true: ' + item.id);
        callback(true);
      } 
      callback(false);
    },
    function(fieldResults) {
      console.log('fieldsResults.length=' + fieldResults.length);
    }); 
```

我得到以下输出：

```
checking field: 130 
calling field true: 130 
fieldsResults.length=1 
checking field: 131
calling field true: 131 
```

`results.fields`在过滤器循环中检查第二项之前调用回调中的 console.log 对我来说没有任何意义。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-29T21:26:36.883

问题是`callback(false)`每次都被调用，即使你达到了`if`条件。正确的方法是添加一个`return`语句：

```
if(item.id == 130 || item.id == 131) {
  console.log('calling field true: ' + item.id);
  return callback(true);  // now you won't call callback(false) everytime
} 
callback(false); 
```

你甚至可以通过说来缩短过滤器：

```
callback(item.id == 130 || item.id == 131); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:47:44.320

经过更多的实验，我发现问题出在回调（假）；线。显然这导致过滤器退出。我想这是有道理的，因为它强制调用回调。

# git - 如何让 git 更改以工作目录结尾的行？

> ID：14345160
> 
> 赞同：14
> 
> 时间：2013-01-15T19:15:12.483
> 
> 标签：git

我在 Windows 上配置了git，`git config --global core.autocrlf false`因此 git 不会在结帐时自动将文件从 LF 行结尾转换为 CRLF。

当我在 Windows 上创建一个新文件并添加它时，我得到以下输出。

```
git add windows-file.txt
warning: CRLF will be replaced by LF in windows-file.txt.
The file will have its original line endings in your working directory. 
```

因此，当将 windows-file.txt 添加到我想要的 git 索引时，git 正在将我的行结尾从 windows 更改为 unix。

我遇到的问题是工作目录版本没有改变，我该如何配置 git 以改变工作目录和 git 索引的行尾？

**更新**

在添加和提交之后，即使本地工作目录版本具有 windows 行结尾并且 repo 版本具有 unix 行结尾，git status 也不会显示任何差异。

**更新**回购根目录下 .gitattributes 的内容

```
# Set default behaviour, in case users don't have core.autocrlf set.
text eol=lf

# These files are text and should be normalized (convert crlf => lf)
*.java       text
*.xml        text
*.cmd        text
*.sh         text
*.txt        text
*.md         text
*.js         text
*.jsp        text
*.html       text
*.htm        text
*.vm         text
.project     text
.classpath   text
*.properties text
*.txt        text
*.bat        text
*.launch     text

# Denote all files that are truly binary and should not be modified.
*.png    binary
*.jpg    binary
*.jar    binary
*.class  binary
*.gz     binary
*.tar    binary
*.dll    binary
*.exe    binary
*.zip    binary 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-08-31T08:05:13.197

当您没有未提交的更改时，请尝试：

```
git rm --cached -r . 
git reset --hard 
```

删除本地文件并从索引中获取它们。

# python - BROKER_USER 和 BROKER_PASSWORD 是什么？

> ID：14345163
> 
> 赞同：2
> 
> 时间：2013-01-15T19:15:20.200
> 
> 标签：python, django, celery

什么是`BROKER_USER`和`BROKER_PASSWORD`在 django celery 中？这是 Django 中超级用户的用户名和密码？如果没有，如何设置用户和密码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T19:17:57.303

> django celery 中的 BROKER_USER 和 BROKER_PASSWORD 是什么？

这些是底层队列框架（通常是 AMQP）的凭据。

您可以选择：

*   [兔MQ](http://docs.celeryproject.org/en/latest/getting-started/first-steps-with-celery.html#rabbitmq)
*   [雷迪斯](http://docs.celeryproject.org/en/latest/getting-started/first-steps-with-celery.html#redis)
*   [使用数据库](http://docs.celeryproject.org/en/latest/getting-started/first-steps-with-celery.html#using-a-database)
*   [其他一些经纪人](http://docs.celeryproject.org/en/latest/getting-started/first-steps-with-celery.html#other-brokers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:18:31.500

这是您的代理用户名和密码，例如可以是 AMQP。

这是一个示例：[配置您的 Django 项目以使用 Celery](http://ask.github.com/celery/getting-started/first-steps-with-django.html#configuring-your-django-project-to-use-celery)

# c# - .NET DateTime 线程是否安全

> ID：14345164
> 
> 赞同：15
> 
> 时间：2013-01-15T19:15:22.130
> 
> 标签：c#, .net, vb.net

.NET DateTime 线程安全吗？如果*读取*操作返回不正确的值，我并不担心，我唯一担心的是：如果不同步，DateTime 对象是否会损坏。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-15T19:19:18.923

对字段的读写`DateTime`不是原子的（至少在 32 位系统上）。

*   如果您同时从多个线程分配给同一个属性，您可能会损坏它。

*   如果您从一个线程读取并从另一个线程写入，则读取线程可能会获得损坏的值。

*   从多个线程读取而同时没有写入线程是安全的。

`DateTime`本质上，当从多个线程同时使用时，a 的两个 32 位半部分可能包含不同年龄的值。

您可以混合使用两种写入。一次写入的高 32 位部分和另一次写入的低 32 位部分。

作为替代方案，您可以使用for 字段，并使用来自and`Int64`的原子方法处理它。然后使用and转换为/从.`Thread``Interlocked``new DateTime(ticks)``dateTime.Ticks``DateTime`

MSDN 说：

> 这种类型的所有成员都是线程安全的。看起来修改实例状态的成员实际上返回一个用新值初始化的新实例。与任何其他类型一样，**对包含此类型实例的共享变量的读取和写入必须由锁保护以保证线程安全**。
> 
> 在所有硬件平台上分配这种类型的实例并不是线程安全的，因为该实例的二进制表示可能太大而无法在单个原子操作中分配。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-15T19:16:13.297

`DateTime`是一个不可变的值类型（结构）。实例一经创建便无法更改。

它不会被破坏并且是线程安全的。

如果要从多个线程（写入或读取/写入）更改`DateTime` *变量*，则需要同步 - 因为此操作**不是**线程安全的。

# php - 上传大于 5MB 的文件

> ID：14345170
> 
> 赞同：1
> 
> 时间：2013-01-15T19:15:40.527
> 
> 标签：php

我试图创建一个应用程序，它允许我上传大于 5 MB 的文件，但我总是收到一个错误，提示文件太大。我修改了 php.ini upload_max_filesize 和 post_max_size 并将其设置为 1GB，但它不起作用。

这是我的代码：

```
if(is_uploaded_file($_FILES['pdf']['tmp_name'])&&($_FILES['pdf']['error'] == UPLOAD_ERR_OK)){
    $file = $_FILES['pdf'];
    $size = round($file['size']/10485760);
    if($size > 10485760){
        echo 'The uploaded file was to large.';
    }

    if(($file['type'] != 'application/pdf') && (substr($file['name'], -4) !='.pdf')){
        echo 'The uploaded file was not a PDF.';
    }

    if(!array_key_exists('pdf', $add_pdf_errors)){
        $tmp_name = sha1($file['name'].uniqid('', TRUE));
        $dest = '../pdfs/'.$tmp_name.'_tmp';

        if(move_uploaded_file($file['tmp_name'], $dest)){
            $_SESSION['pdf']['tmp_name'] = $tmp_name;
            $_SESSION['pdf']['size'] = $size;
            $_SESSION['pdf']['file_name'] = $file['name'];
            echo '<h4>The file has been uploaded!</h4>';
        }else{
            trigger_error('The file coul not be moved.');
            unlink($file['tmp_name']);
        }
    }
}else{
    switch ($_FILES['pdf']['error']){
        case 1:
        case 2:
            echo 'The uploaded file was to large.';
            break;
        case 3:
            echo 'The file was only partially uploaded.';
            break;
        case 6:
        case 7:
        case 8:
            echo 'The file could not be uploaded to a system error.';
            break;
        case 4:
        default:
            echo 'No file was uploaded.';
            break;
    }
} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:27:35.007

```
$size = round($file['size']/10485760);
if($size > 10485760){
    echo 'The uploaded file was to large.';
} 
```

这个逻辑似乎不正确。这样比较是不准确的。尝试

```
$size = $file['size'];
if($size > 10485760){
    echo 'The uploaded file was to large.';
} 
```

还要检查“上传的文件是否过大”。是从您的 IF 或 ELSE 部分中显示的吗？因为在某些情况下两者都显示相同的消息，所以首先我们必须找出它在哪里显示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:29:07.713

您需要调整 3 个设置：

```
upload_max_filesize
memory_limit
post_max_size 
```

全部在 php.ini 中

# sql - 如何使用一条 SELECT 语句从两台服务器的两个数据库中获取数据？

> ID：14345171
> 
> 赞同：4
> 
> 时间：2013-01-15T19:15:44.350
> 
> 标签：sql, database, oracle, select

我实际上不想修改任何一个数据库，只是获取数据。

我知道如何使用这些连接字符串单独连接到每个数据库：

```
Provider=SQLOLEDB.1;Data Source={0};Initial Catalog={1};Integrated Security=SSPI;Persist Security Info=False;

Provider=OraOLEDB.Oracle.1;Data Source={0};User ID={1};Password={2};Persist Security Info=True; 
```

但是我怎样才能把这些重叠的数据放在一起呢？这甚至可能吗，特别是考虑到一个是**Oracle**而一个是**SQL Server**？或者单独在每个数据库上执行 SELECT 语句然后匹配它们会更好吗？

* * *

例如，我如何让所有 10 岁且喜欢蓝色的学生？ ![两张桌子](../Images/9cd85121b54756831b833f0e1ad78b6c.png)

请注意，DatabaseB 中的所有项目都有一个映射到 DatabaseA 的 ID，但反之则不然。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T10:18:48.780

我已经用 MySQL、Oracle 和 SQL 服务器做到了这一点。您可以创建从中央 MSSQL 服务器到 Oracle 和其他 MSSQL 服务器的链接服务器。然后，您可以直接使用链接服务器查询对象，也可以在数据库中创建链接服务器表的同义词。

创建和使用链接服务器的步骤如下：

1.  在您的“主”MSSQL 服务器上，创建两个链接服务器到包含两个数据库的服务器，或者如您所说的数据库 A 和数据库 B。
2.  然后，您可以使用普通的 TSQL 选择语句直接查询链接服务器上的表。

要创建与 Oracle 的链接服务器，请参阅此链接：http: [//support.microsoft.com/kb/280106](http://support.microsoft.com/kb/280106)

关于同义词的更多信息。如果您要在大量查询中使用这些链接服务器表，那么使用同义词来帮助您维护代码可能是值得的。同义词允许您以不同的名称引用某些内容。

因此，例如从链接服务器中选择数据时，您通常会使用以下语法来获取数据：

```
SELECT *
FROM Linkedserver.database.schema.table 
```

如果您将 Linkedserver.database.schema.table 的同义词创建为 DBTable1，则语法为：

```
SELECT *
FROM DBTable1 
```

如果您的链接服务器发生更改，它可以节省一些打字时间，您不需要对您的代码进行更改。就像我说的那样，如果您在大量代码中使用链接服务器，这真的很有好处。

更要注意的是，您可以在不同服务器上的两个表之间进行连接。然而，这通常非常缓慢。我发现您可以将来自不同服务器的数据选择到临时表中，加入临时表通常可以加快速度。您的里程可能会有所不同，但如果您要加入不同服务器上的表，此技术会有所帮助。

如果您需要更多详细信息，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T19:17:46.790

您使用的是哪个数据库？大多数数据库都带有称为 dblinks 的概念。您必须在数据库 A 中创建数据库 B 的 dblink，然后您可以创建一个同义词（不是必须的，但为了方便）并将其用作数据库 A 的表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T19:51:26.403

看起来像异构连接（不同服务器/技术等的数据）。

因此，并不简单。如果你能让 Namphibian 的方法奏效，那就去吧。

否则，您需要将两个表中的数据收集到一个公共位置（一个或另一个“正在运行”的服务器，或仅用于共同定位数据的第三个服务器/技术）。然后就可以愉快的加入数据了。许多 ETL 工具以这种方式工作，这种情况（几乎）总是涉及在加入之前将一个或多个表重新分配到一个公共位置。Oracle Data Integrator ETL 工具可以做到这一点，Talend Open Studio 的 tJoin 组件也是如此。

高温高压

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T19:33:31.220

尝试在 Visual Studio 中创建 3 个 Linq 查询。一种用于 SQL Server，一种用于 Oracle，另一种用于组合 2 个数据库对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T19:17:49.193

```
SELECT (things)
FROM databaseA.dbo.table t1
INNER JOIN databaseB.dbo.table t2 ON t1.Col1 = t2.Col2
WHERE t1.Col1 = 'something' 
```

编辑 - 此声明应符合新要求：

```
SELECT *
FROM databaseA.dbo.table t1
INNER JOIN databaseB.dbo.table t2 ON t1.ID = t2.ID
WHERE t1.Age = 10 AND t2.FavoriteColor = 'Blue' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T19:19:13.370

假设数据库在同一台服务器上，您应该能够执行以下操作：

```
SELECT t.field1, t.field2
FROM database.schema.table t
JOIN database2.scheme.table2 t2 
   on t.id = t2.id
WHERE t2.field3 = ... 
```

如果数据库位于不同的服务器上，请考虑使用`Linked Servers`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-22T21:27:14.747

如果你想从两个不同的服务器和数据库中选择数据，我会做一个联合而不是一个连接，因为来自一个的数据可能像苹果，另一个可能像橘子。您仍然需要设置链接服务器，我相信如果在某些版本之后，您可以链接 Oracle 和 SQL Server，但您可以执行以下操作：

```
select ColA, ColB, ColC
from (ServerASQLServer).(DatabaseA).(schema).(table)
UNION
select ColA, ColB, ColC
from (ServerBOracleServer).(DatabaseB).(schema).(table) 
```

如果您执行内部连接，您的数据必须共享要绑定的数据类型，否则它们将从返回的数据集中省略。联合必须只共享列数据类型，但不关心逻辑。您实质上是在说：“根据列逻辑匹配将这两组不同的行放在一起。”

但是你提到了连接字符串，所以我很好奇你是否想用一种像 .NET 这样的代码方法来做呢？我也可以提供一个想法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-19T17:28:48.090

当我在加入这两个表时遇到问题时，我通过同时打开两个远程数据库来完成我想要做的事情。MySQL 5.6 (php 7.1) 和另一个 MySQL 5.1 (php 5.6)

```
//Open a new connection to the MySQL server
$mysqli1 = new mysqli('server1','user1','password1','database1');
$mysqli2 = new mysqli('server2','user2','password2','database2');

//Output any connection error
if ($mysqli1->connect_error) {
    die('Error : ('. $mysqli1->connect_errno .') '. $mysqli1->connect_error);
} else { 
echo "DB1 open OK<br>";
}
if ($mysqli2->connect_error) {
    die('Error : ('. $mysqli2->connect_errno .') '. $mysqli2->connect_error);
} else { 
echo "DB2 open OK<br><br>";
} 
```

如果您在屏幕上获得这两个 OK，那么这两个数据库都已打开并准备就绪。然后，您可以继续进行查询。

在您的具体问题上，我将首先从数据库 A 中选择所有 10 岁的孩子，然后通过数据库 B 中的 ID 将它们与颜色匹配。它应该可以工作，我还没有在我的服务器上测试过这段代码，但我的示例如下此代码有效。您可以按任何内容、颜色、年龄等自定义查询，甚至可以根据需要对它们进行分组。

```
$results = $mysqli1->query("SELECT * FROM DatabaseTableA where age=10");
    while($row = $results->fetch_array()) {
        $theColorID = $row[0];
        $theName = $row[1];
        $theAge = $row[2];
        echo "Kid Color ID : ".$theColorID." ".$theName." ".$theAge."<br>";
        $doSelectColor = $mysqli2->query("SELECT * FROM DatabaseTableB where favorite_color=".$theColorID." "); 
        while($row = $doSelectColor->fetch_assoc()) {
            echo "Kid Favorite Color : ".$row["favorite_color"]."<br>";
        }
    } 
```

我已经使用它来为我们的程序来回切换，而无需从远程服务器加入表，并且到目前为止没有问题。

```
$results = $mysqli1->query("SELECT * FROM video where video_id_old is NULL");
    while($row = $results->fetch_array()) {
        $theID = $row[0];
        echo "Original ID : ".$theID." <br>";
        $doInsert = $mysqli2->query("INSERT INTO video (...) VALUES (...)");
        $doGetVideoID = $mysqli2->query("SELECT video_id, time_stamp from video where user_id = '".$row[13]."' and time_stamp = ".$row[28]." ");
            while($row = $doGetVideoID->fetch_assoc()) {
                echo "New video_id : ".$row["video_id"]." user_id : ".$row["user_id"]." time_stamp : ".$row["time_stamp"]."<br>";
                $sql = "UPDATE video SET video_id_old = video_id, video_id = ".$row["video_id"]." where user_id = '".$row["user_id"]."' and video_id = ".$theID.";";
                $sql .= "UPDATE video_audio SET video_id = ".$row["video_id"]." where video_id = ".$theID.";";
                // Execute multi query if you want
                if (mysqli_multi_query($mysqli1, $sql)) {
                    // Query successful do whatever...
                }
            }
    }
// close connection 
$mysqli1->close();
$mysqli2->close(); 
```

我正在尝试进行一些连接，但是由于我打开了这两个数据库，因此我可以通过更改连接来来回进行查询`$mysqli1`或`$mysqli2`

它对我有用，我希望它有帮助......干杯

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-01-15T19:21:35.607

只要两个数据库都在同一个服务器中，您就可以使用数据库名称引用表：）

```
SELECT * FROM db1.table1
join 
db2.tbable2 
WHERE db1.table1.col1 = db2.table2.col1; 
```

# javascript - d3.js 的堆积条形图 .offset() 值

> ID：14345173
> 
> 赞同：1
> 
> 时间：2013-01-15T19:15:48.497
> 
> 标签：javascript, d3.js, offset

有人知道我在哪里可以找到堆积条形图的 .offset() 值列表吗？

我在 github 上找到了这四个，但我确定我在其他地方看到过更多，我只是不记得在哪里。

```
silhouette - center the stream, as in ThemeRiver.
wiggle - minimize weighted change in slope.
expand - normalize layers to fill the range [0,1].
zero - use a zero baseline, i.e., the y-axis. 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:56:33.663

也许我误解了这个问题，但是根据 API，这四个选项正如您所描述的那样。您还可以创建自己的偏移函数，请参阅：

[https://github.com/mbostock/d3/wiki/Stack-Layout#wiki-offset](https://github.com/mbostock/d3/wiki/Stack-Layout#wiki-offset)

# php - 无法让 Laravel 4 在本地主机上工作

> ID：14345174
> 
> 赞同：32
> 
> 时间：2013-01-15T19:15:52.953
> 
> 标签：php, localhost, laravel, laravel-4

在阅读了 Laravel4 beta 发布的公告后，我第一次尝试 Laravel。

我按照[这些步骤](http://four.laravel.com/)安装了 composer 和 laravel 以及它需要的所有依赖项。我把 laravel 放在了我的`~/public_html`目录中——因为我习惯用 Codeigniter 来做，但我认为这里出了点问题。

如果我将浏览器指向`http://localhost/~carlo/laravel-develop/`，它只会显示目录的内容。

然后，虽然在文件系统上我有一个`laravel-develop/public`文件夹，但它没有出现在浏览器上。

我发现`.htaccess`像这样改变：

```
<IfModule mod_rewrite.c> 
RewriteEngine on 
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^(.*)$ index.php/$1 [L] 
</IfModule> 
```

当我尝试访问公用文件夹时导致错误。错误：

> ErrorException：警告：file_put_contents（/home/carlo/public_html/laravel-develop/app/config/../storage/meta/services.json）：无法打开流：/home/carlo/public_html/laravel-中的权限被拒绝开发/供应商/laravel/framework/src/Illuminate/Filesystem/Filesystem.php 第 77 行

另一个：

> /home/carlo/public_html/laravel-develop/vendor/laravel/framework/src/Illuminate/Filesystem/Filesystem.php 第77行

然后是一长串错误。最后一个是：

> require_once('/home/carlo/public_html/laravel-develop/start.php') 在 /home/carlo/public_html/laravel-develop/public/index.php 第 53 行

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-01-15T21:08:41.850

尝试`storage`使用终端更改文件夹的文件夹权限：

`chmod -R 777 storage`

可以在[此处](http://laravel.com/docs/install#installation)找到有关此问题的更多信息。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-15T21:33:25.457

导致您的错误是因为 laravel 无法写入 app/storage 文件夹。其余的只是一个堆栈跟踪。为了使存储文件夹可写， cd 进入您的应用程序文件夹，然后运行：

```
chmod -R 777 storage 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-06-30T12:43:16.690

**生产方式**，对于不熟悉 Unix 的人来说复杂度适中，但更**安全**：

1.  进入超级用户模式（sudo -s 或 su）。
2.  创建组`web`( `groupadd web`)
3.  将您的主要用户添加到组`web`（假设您的用户是`cool_user`，所以运行`usermod -a -G web cool_user`）
4.  将 php-fpm 或 web 服务器用户（如果 php 用作 SAPI 模块）添加到`web`组（例如，在 CentOS 上 php-fpm 使用`apache`用户名，所以在大多数情况下这将起作用`usermod -a -G web apache`：）
5.  将您的项目根目录组所有者更改为`web`递归 ( `chgrp -R web /path/to/project/root/`)
6.  授予组的递归写入权限（`chmod -R g+w /path/to/project/root/`
7.  *可选地*，要允许您的用户访问所有由`apache`（或其他）用户创建的文件和文件夹，请通过在项目根目录 ( )上递归设置*groupid位，使它们获得与其父文件夹相同的组所有权。*`chmod -R g+s /path/to/project/root/`

瞧！

**快速而肮脏的方式**，对于那些不关心安全性并希望不惜一切代价使其工作**而不安全**的人：

1.  进入超级用户模式（sudo -s 或 su）。
2.  以递归方式为所有用户授予完全权限（读、写、执行）（`chmod -R o=rwx /path/to/project/root/`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-24T17:57:04.800

就我而言，我通过在文件 /app/config/app.php 中修改默认设置来解决此错误：

```
'url' => 'http://localhost', 
```

到我的本地自定义虚拟主机主机 url：

```
'url' => 'http://mydomain.local', 
```

这似乎是解决问题的基本更改（我还修改了存储文件夹，如此处所建议的）

希望这对你们中的一些人有所帮助..

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-08-16T15:47:54.660

此外，如果您使用的是 virtualbox/vagrant VM 类型的环境，那么在我的 Mac 上，我需要在主机（mac）系统上发出 chmod，但在我的 Windows 机器上，直接在 VM 上发出 chmod 就可以了.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-15T19:48:11.087

您需要添加：选项+FollowSymLinks

```
<IfModule mod_rewrite.c> 
RewriteEngine on 
Options +FollowSymLinks
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^(.*)$ index.php/$1 [L] 
</IfModule> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-10-20T16:17:12.243

您需要阅读安装文档：

[http://laravel.com/docs/installation#configuration](http://laravel.com/docs/installation#configuration)

注意这里的位：

```
Laravel requires one set of permissions to be configured - folders within app/storage require write access by the web server. 
```

该文档中还有其他有用的内容，因此请务必阅读所有内容。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-05-05T00:59:31.420

我遇到了同样的问题，这是我的解决方法：在您的 httpd-vhosts.conf 文件中，您需要将配置添加到您的文件夹中，这就是我的

```
<VirtualHost *:80>
    ServerAdmin your@mail.com
    DocumentRoot "/home/carlospublic_html"
    ServerName carlos.local
    <Directory "/home/carlos/public_html">
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        allow from all
    </Directory>
</VirtualHost>> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-05-06T13:03:33.997

你的服务器的 webroot 应该指向`/public`你安装 Laravel 的文件夹。这是`index.html`文件从 Laravel 初始化的地方返回。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-25T22:04:22.010

嘿，我也遇到了这个错误，更改写权限似乎也不起作用。原来我需要更改 apache 的 httpd.conf 文件中的用户和组设置。这是一个很好的教程：[Enable Write Permissions for the Native Built-In Apache in Mac OS X Lion](http://paulmason.name/item/change-apache-user-group-in-lion-os-x)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-01-16T02:53:11.817

首先，[这里的答案](https://stackoverflow.com/questions/8103860/move-uploaded-file-gives-failed-to-open-stream-permission-denied-error-after)将帮助您获得权限。其次，您可能需要将其添加`RewriteBase ~/carlo/public_html/laravel-develop`到您的 .htaccess 中，因为您是在主目录之外运行它。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-06-14T23:21:34.567

检查 LR4 的要求，您的本地服务器必须具有这些：PHP >= 5.3.7 MCrypt PHP 扩展

否则，将失败。我也面临这个麻烦，现在正在为我的 XAMPP 寻找更新的 PHP 及其扩展。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-05-14T17:45:41.627

比起将权限更改为 777，我更喜欢这种方法。将 Apache 设置为像你一样运行。

1.  在终端类型`id`中获取`uid=123(Myname)`.

2.  打开 /etc/apache2/httpd.conf 并编辑它以使用您的用户名。

    ```
    <IfModule unixd_module>
       User Myname
       Group staff
    </IfModule> 
    ```

3.  返回终端：`sudo apachectl restart`

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2013-06-10T21:48:46.973

几分钟前我遇到了这个问题，使用 sudo chmod -R 777 storage 似乎有助于使 storage/meta/services.json 可写。只是为了补充每个人一直在说的话。这对我有用。

# c++ - 从其 HWND 获取窗口信息

> ID：14345175
> 
> 赞同：0
> 
> 时间：2013-01-15T19:15:53.290
> 
> 标签：c++, mfc, window, information-extraction

我有这个代码：

```
HWND WindowHandle;
WindowHandle = FindWindowA( WindowClass, WindowName );

if( WindowHandle != NULL)
{
     // here I want to populate a listbox with the window's information like
     // its process name and PID, executable file name,  and its window title.
} 
```

我已经知道如何使用`SendMessage();`and获取窗口标题，`WM_GETTEXT`但我想知道如何获取它的进程名称和 PID，以及可执行文件的位置和名称。

有人可以帮我吗？

请注意，我正在使用 C++ MFC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:21:06.950

Windows 提供了一个名为[`GetWindowThreadProcessId`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633522%28v=vs.85%29.aspx).

这听起来像你想要的。

免责声明：我没有使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-19T10:58:18.570

您可以在 中找到 PID `PROCESS_INFORMATION`。只需声明 say:`PROCESS_INFORMATION pi`并像这样访问 PID: `pi.hProcesss` `pi.dwProcessId`。

# cordova - 如何使用 Xcode 在 PhoneGap 2.3.0 中将 InAppBrowser 替换为 ChildBrowser？

> ID：14345178
> 
> 赞同：0
> 
> 时间：2013-01-15T19:16:12.153
> 
> 标签：cordova, phonegap-plugins

我正在关注这个关于使用 database.com 设置远程数据库连接的[adobe 教程。](http://www.adobe.com/devnet/phonegap/articles/phonegap-apps-powered-by-developercom.html)他使用 ChildBrowser，我无法在我的 PG 版本上工作。所以我将 PG 更新到 2.3.0，我发现有一个很酷的新东西，InAppBrowser。IAB 的基本示例我可以正常工作，但我无法在上面的教程中弄清楚如何使用它。任何帮助表示赞赏。我的 Git 仓库在[这里](https://github.com/mcemond/test2013)。谢谢阅读！麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:58:49.107

所以，我意识到我的问题有点宽泛。在这一点上，cordova 2.3.0 和 InAppBrowser 有点太新了，以至于没有很多文档，所以基本上我所做的是使用旧版本的 cordova 以使教程与我的流程相匹配。

上面链接的教程是 Andrew Trice 的，他们回复我说他们打算使用 IAB 编写教程的更新。据我所知，他使用的 Cordova 版本是 1.7.0。我之前在另一台机器上使用过 1.4.1，因此可以直接从 finder 安装 1.7.0 的 dmg 文件，并且这两个版本似乎在 xcode 中是自主的。我正在创建一个全新的项目，所以我可以忽略有些冗长的科尔多瓦升级说明。所有源文件都是从教程 git repo 复制过来的。并且使用此处的说明安装了 childbrowser：[Ryan Stewart ChildBrower](http://blog.digitalbackcountry.com/2012/03/installing-the-childbrowser-plugin-for-ios-with-phonegapcordova-1-5/)。我发现这套说明是我找到的最好的。唯一的变化是您需要的外部主机是 *.database.com 和 *.salesforce.com。

希望能帮助其他处于同样困境的人。

麦克风

编辑：使用 iOS 而非 iPhone 的子浏览器插件。并在您的数据库表中添加一个“电话”字段。

# ruby-on-rails-3 - 在从 Rails 2.3 升级到 Rails 3.0 的应用程序上运行单元测试时，我如何弄清楚为什么会发生错误？

> ID：14345183
> 
> 赞同：0
> 
> 时间：2013-01-15T19:16:18.630
> 
> 标签：ruby-on-rails-3, rails-3-upgrade

我的任务是将应用程序从 Rails 2.3.5 升级到 3.0.19。这还涉及将 Ruby 从 1.8.6 升级到 1.8.7。在此升级完成且稳定后，计划转移到 Ruby 1.9 和 Rails 3.2。

宝石（来自 的输出`bundle install`），仅供参考：

```
Using rake (10.0.3)
Using abstract (1.0.0)
Using activesupport (3.0.19)
Using builder (2.1.2)
Using i18n (0.5.0)
Using activemodel (3.0.19)
Using erubis (2.6.6)
Using rack (1.2.7)
Using rack-mount (0.6.14)
Using rack-test (0.5.7)
Using tzinfo (0.3.35)
Using actionpack (3.0.19)
Using mime-types (1.19)
Using polyglot (0.3.3)
Using treetop (1.4.12)
Using mail (2.2.19)
Using actionmailer (3.0.19)
Using arel (2.0.10)
Using activerecord (3.0.19)
Using activeresource (3.0.19)
Using highline (1.6.15)
Using net-ssh (2.6.2)
Using net-scp (1.0.4)
Using net-sftp (2.0.5)
Using net-ssh-gateway (1.1.0)
Using capistrano (2.13.5)
Using color (1.4.1)
Using dynamic_form (1.1.4)
Using json (1.7.6)
Using mislav-will_paginate (2.3.11)
Using mysql (2.9.0)
Using transaction-simple (1.4.0.2)
Using pdf-writer (1.1.8)
Using bundler (1.2.3)
Using rdoc (3.12)
Using thor (0.14.6)
Using railties (3.0.19)
Using rails (3.0.19)
Using rcov (1.0.0)
Using rvm-capistrano (1.2.7)
Using verification (1.0.1) 
```

运行测试时发生`unit`了我无法破译或追踪的错误。这些错误发生在针对继承自`ActionMailer`. 它们看起来像这样：

```
1) Error:
test_email_to_list(EmailerTest):
ArgumentError: wrong number of arguments (3 for 2)
    test/unit/emailer_test.rb:6:in `test_email_to_list' 
```

引用的行只是创建一封电子邮件（`create_***`但现在没有`create_`Rails 3 的前缀）。我在附近的任何地方都看不到带有 2 个或 3 个参数的函数调用。

**开始更新以显示相关代码**

中的违规行`emailer_test.rb`如下所示：

```
mail = Emailer.email_to_list('Subject', 'Contents', 'Code', 'Name') 
```

和`ActionMailer`被调用的方法是这样的：

```
def email_to_list(eSubject, contents, list_code, name)
  subject    eSubject
  recipients ['email-list-' + list_code.downcase + '@mydomain.org']
  from       'fromaddress@mydomain.org'
  sent_on    Time.now
  bcc        ['admin@mydomain.org']
  content_type "text/html"

  # Old Rails 2 way
  #body       :contents=>contents, :list_code=>list_code.downcase, :name=>name
  # Rails 3 instance variables
  @contents = contents
  @list_code = list_code.downcase
  @name = name
end 
```

**END UPDATE 显示相关代码**

**使 Mailer 代码更多 Rails 3 后开始更新**

我更新了 Mailer 方法，使它们看起来更像 Rails 3，如下所示：

```
def email_to_list(eSubject, contents, list_code, name)
  # Old Rails 2 way
  #body       :contents=>contents, :list_code=>list_code.downcase, :name=>name
  # Rails 3 instance variables
  @contents = contents
  @list_code = list_code.downcase
  @name = name

  mail(:subject=>eSubject,
    :to=>['email-list-' + list_code.downcase + '@mydomain.org'],
    :from=>'fromaddress@mydomain.org',
    :bcc=>['admin@mydomain.org'],
    :date=>Time.now)
end 
```

这给了我错误堆栈输出中的另一个条目，但仍然没有启发我如何解决问题：

```
1) Error:
  test_email_to_list(EmailerTest):
  ArgumentError: wrong number of arguments (3 for 2)
    app/models/emailer.rb:18:in `email_to_list'
    test/unit/emailer_test.rb:6:in `test_email_to_list' 
```

（第 18 行是`:date=>Time.now`，注释 out 会将错误输出中的行号更改为 17）

该问题似乎发生在该`mail`调用和正在呈现的视图之间的 Rails 胆量中。 `--trace`不会产生更多信息。

**使 Mailer 代码更多 Rails 3 后结束更新**

我已经苦苦挣扎了 2 天，以找出这些错误的根源以及如何解决它们。任何有关如何进一步排除故障的见解将不胜感激。

# javascript - 我的第一个 Jquery 代码有什么问题，我该如何完成这个事件？

> ID：14345185
> 
> 赞同：1
> 
> 时间：2013-01-15T19:16:24.837
> 
> 标签：javascript, jquery, jquery-selectors, jquery-events

我有一个快速的 Jquery 问题 .. 如果单击提交后根本没有填写此 Jquery 代码，则该 Jquery 代码应该在输入文本框上显示红色边框，此代码来自书本，我完全按照代码的方式复制，但我根本没有红色边框，看起来它不起作用..

另外我想在表单的验证过程中给出这个代码条件。如果ESN列表文本字段在1000到3000的范围内，我希望下拉自动选择下面的STM3，如果范围输入的数字在 5000 和 9000 之间，我希望 Trackpack 在用户让我们在文本输入字段上输入 6000 后自动填充.. 在文本字段上输入数字后如何触发下拉菜单？对于新手来说太棘手了，非常感谢您的帮助。

```
<html>
    <head> <title> Form </title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.0/jquery.min.js"></script>
    <script type="text/javascript">
    $(':submit').click(function(e) {
     $(':text').each(function() {
      if($(this.val().length == 0) {
        $(this).css('border', '2px solid red');
        }
    });
    e.preventDefault();
    });

    </script>
    </head>
    <body >
    <form id="provision">
    ESNList:    <input  type="text" id="ESNList" name="ESNList" size="30" /> <br />
    ESN Start:<input type="text" id="ESNStart" name="ESNStart" size="10" /> <br />
    ESN End: <input type="text" id="ESNStart" name="ESNStart" size="10" /> <br />
    UnitName:<input type="text" id="STxName" name="STxName" size="30"  />  <br />  
     Unit Model:   <select name="STxName">
    <option value="stx2">STX2</option>
    <option value="protopak">Protopak</option>
    <option value="stm3" selected>STM3</option>
    <option value="acutec">Acutec</option>
    <option value="mmt">MMT</option>
    <option value="smartone">Trackpack</option>
    <option value="smartoneb" >SmartOneB</option>
    <option value="audi">Acutec</option>
    </select> <br />
    RTU Model Type:
     <select name="rtumodel">
    <option value="globalstar">GlobalStar</option>
    <option value="both">Both</option>
    <option value="comtech">Comtech</option>
    <option value="stmcomtech">STMComtech</option>
    </select> <br />
    <input type="submit" value ="submit"  />
    </form>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:29:07.203

你有一个错字（`$(this.val().length`应该是`$(this).val().length`）。

```
$(':submit').click(function(e) {
  e.preventDefault();
  $(':text').each(function() {
        if($(this).val().length == 0) {
            $(this).css('border', '2px solid red');
        }
  });
}); 
```

一些想法：

*   考虑到可读性，`e.preventDefault();`在评估输入字段的长度之前避免使用默认值 ( )。
*   还可以考虑使用更具体的`$('input:text')`选择器（而不是`$(':text')`）。 [基准测试](http://jsperf.com/input-text-selectors)表明它的表现要好得多。
*   本机 JavaScript 可以取代您用来评估输入字段值是否存在的 jQuery，并且[通常运行得更快](http://jsperf.com/input-value-js-vs-jquery)；替换`if($(this).val().length == 0)...`为`if (this.value.length === 0)`

有关工作示例，请参见[http://jsfiddle.net/jhfrench/PvHGM/ 。](http://jsfiddle.net/jhfrench/PvHGM/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:22:12.763

一个问题是您没有等待页面加载来附加您的事件。这在 jQuery 中很容易做到，只需将代码包围起来，`$(function () {...});`如下所示：

我还修正了一个错字。

```
$(function () {

    $(':submit').click(function(e) {
     $(':text').each(function() {
      var th = $(this);
      if(th.val().length == 0) {
        th.css('border', '2px solid red');
        }
    });
    e.preventDefault();
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T19:24:51.747

您有语法错误 - 缺少`)`

```
if($(this.val().length == 0) {
      ---^ 
```

应该

```
if($(this).val().length == 0) { 
```

[**演示**](http://jsfiddle.net/eqDRc/)

# html - 使用 table-layout=auto 固定 HTML 表格中的宽度列

> ID：14345194
> 
> 赞同：8
> 
> 时间：2013-01-15T19:16:48.160
> 
> 标签：html, html-table, tablelayout, fixed-width

当一个 HTML 表被`table-layout`设置为`auto`它的列是自动调整大小的。鉴于这种情况，有没有办法让特定列保持固定宽度？我试过使用 CSS 宽度 - 似乎没有任何效果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-08T15:52:31.670

如果您使用，您可以使用 CSS 执行此操作`nth-child`

**CSS：**

```
.table {
    table-layout:auto
}
td, th {
    border: 1px solid #999;
    padding: 0.5rem;
}
.table1 th:nth-child(1), .table1 td:nth-child(1) {
    width: 200px; /*becomes 218px with padding*/
    background: hsl(150, 50%, 50%);
} 
```

**HTML：**

```
<h3>table 1</h3>

<table class="table1">
    <thead>
        <tr>
            <th>Column 1</th>
            <th>Column 2</th>
            <th>Column 3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>I'm 218px wide!</td>
            <td>00001</td>
            <td>Blue</td>
        </tr>
        <tr>
            <td>I'm 218px wide!</td>
            <td>00002</td>
            <td>Red</td>
        </tr>
        <tr>
            <td>I'm 218px wide!</td>
            <td>00003</td>
            <td>Green</td>
        </tr>
    </tbody>
</table>

<p>&#160;</p>

<h3>table 2</h3>

<table>
    <thead>
        <tr>
            <th>Column 1</th>
            <th>Column 2</th>
            <th>Column 3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>I'm 118px wide!</td>
            <td>00001</td>
            <td>Blue</td>
        </tr>
        <tr>
            <td>I'm 118px wide!</td>
            <td>00002</td>
            <td>Red</td>
        </tr>
        <tr>
            <td>I'm 118px wide!</td>
            <td>00003</td>
            <td>Green</td>
        </tr>
    </tbody>
</table> 
```

这是一个演示：http: [//jsfiddle.net/3dyhE/2/](http://jsfiddle.net/3dyhE/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-15T11:43:26.813

使用`min-width`而不是`width`：

```
<table style="table-layout: auto">
  <tr>
    <td style="min-width: 200px">some cell 200px width</td>
    <td>other cell, auto width</td>
    <td>other cell, auto width</td>
    <td>other cell, auto width</td>
    <td>other cell, auto width</td>
  </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-13T12:47:27.203

在我的情况下，我必须为所有列指定宽度，并让它们相对于填充可用宽度的表格增长，但我仍然希望一列的宽度保持固定。解决方案是`width`为固定宽度列设置`min-width`&`max-width`为自动宽度列设置：

```
table {
  table-layout: auto;
  text-align: left;
  border: 1px solid black;
  width: 100%;
}

td, th {
  border: 1px solid black;
}

.a {
  min-width: 100px;
  max-width: 100px;
}

.b {
  width: 50px;
}

.c {
  min-width: 40px;
  max-width: 40px;
}

.d {
  min-width: 80px;
  max-width: 80px;
}
```

```
<table>
  <tr>
    <th class="a">A</th>
    <th class="b">B</th>
    <th class="c">C</th>
    <th class="d">D</th>
  </tr>
  <tr>
    <td class="a">Very long text here</td>
    <td class="b">Very long text here</td>
    <td class="c">Very long text here</td>
    <td class="d">Very long text here</td>
  </tr>
</table>
```

# python - 在不相关的数据条目之间添加一个空行

> ID：14345198
> 
> 赞同：0
> 
> 时间：2013-01-15T19:17:05.310
> 
> 标签：python, perl, unix

我有一个数据文件，我需要为程序使用输入，但我需要稍微调整一下格式。使用这种方法：[从文件中提取特定数据并将其写入另一个文件](https://stackoverflow.com/questions/14286480/extracting-specific-data-from-a-file-and-writing-it-to-another-file/14288828#14288828)我生成了一个如下所示的文件：

```
PITG_00002  2   397
PITG_00004  1   1275
PITG_00004  1397    1969
PITG_00005  200 1111
PITG_00005  1281    1646
PITG_00006  1   816
PITG_00009  2398    3276
PITG_00009  1536    1952
PITG_00010  1   537 
```

我需要通过在唯一的序列之间添加一个空行来区分来自同一序列（第一列）的数据和来自不同序列的数据，使其看起来像：

```
PITG_00002  2   397

PITG_00004  1   1275
PITG_00004  1397    1969

PITG_00005  200 1111
PITG_00005  1281    1646

PITG_00006  1   816

PITG_00009  2398    3276
PITG_00009  1536    1952

PITG_00010  1   537 
```

我用我可用的程序/编码选项标记了它。非常感谢您提供的任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T19:20:53.160

```
$ perl -api -e 'print "\n" unless $seen{$F[0]}++ && $. > 1;' file.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T19:30:29.467

```
perl -pae 'print $/ if (defined $x && $x ne $F[0]); $x = $F[0];' input.txt 
```

这将检查第一个字段`$F[0]`与前一个字段，存储在`$x`. 如果它们不相同，则打印一个换行符。

说明：

*   `-p`读取文件并打印每一行
*   `-a`将空格上的行自动拆分为`@F`数组
*   `$/`是您的输入记录分隔符，默认为换行符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T19:25:56.983

我现在没有unix环境，所以我不能直接写代码。我会告诉你伪代码。

```
 loop all lines
     read line
     var=`echo $line | cut -f 1 -d ' '` #P000_0002
     num=`echo $line | cut -f 2 -d '_'` #0002
     if ($prevnum != $num)
         echo "" >> newfile
     echo $line >> newfile
     prevnum = $num
 end loop 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T19:27:08.840

如果你想坚持使用 Python。使用 itertools.groupby 可以获得类似的结果

```
>>> with open("test.txt") as fin, open("test.out","w") as fout:
    groups = groupby(((e.split()[0],e) for e in fin),
             key = operator.itemgetter(0))
    for key, group in groups:
        fout.write('\n'.join(e[1] for e in group)) 
```

# hadoop - 我应该何时在 MapReduce 作业中关闭 HTablePool？

> ID：14345199
> 
> 赞同：1
> 
> 时间：2013-01-15T19:17:08.943
> 
> 标签：hadoop, mapreduce, hbase

我正在尝试使用`HTablePool`来减少 HTable 实例的创建。但是我不知道应该在我的映射器/减速器中的哪个位置放置`HTablePool.close()`.

当应用程序运行时，会调用多个映射器、减速器，它们可以在多台机器上运行。为了获得最佳性能增益，我认为`HTablePool`每台机器都应该有一个，并且`close()`调用应该延迟到整个应用程序关闭为止。但是我们怎么能告诉那些机器关闭它们的池呢？

欢迎任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:23:03.267

在 Map/Reduce 工作的上下文中，我不认为 using`HTablePool`会给你带来显着的改进。

an`HTablePool`带给你的是：

*   **线程安全**：为您的表`HTablePool`使用 a `SynchronizedMap`，因此在多线程应用程序的上下文中这很方便。但是，在 Map/Reduce 作业的上下文中，您有多个节点并且任务是独立的，因此这并不能真正帮助您。
*   **池化对象**：由于它是一个池，因此您可以避免`HTable`每次都实例化 s 的需要。如果您有例如连续访问 HBase 的并发请求，这是一个有效的声明，但对于 Map/Reduce 作业来说不是那么多，因为您为每个任务实例化一次表。

所以我想这真的取决于你的用例，如果你像你说的那样使用 Map/Reduce 作业，那么它可能不值得去做，`HTablePool`因为你仍然需要在每个任务`setup`的方法中实例化和关闭`cleanup`.

我会考虑使用的唯一用例`HTablePool`是具有大量并发请求的高频多线程应用程序 - 在这种情况下，使用池绝对是一个合适的用例。

# javascript - 克隆和插入，插入次数超出预期

> ID：14345202
> 
> 赞同：0
> 
> 时间：2013-01-15T19:17:19.197
> 
> 标签：javascript, jquery

我有一个样式元素，其中隐藏了“项目”类。最初，该页面将只有一个具有此类的元素。我只是将这个隐藏元素用作模型，每次单击“添加项目”按钮时，我都可以使用 jquery 抓取并将其插入列表，并在内部文本中使用正确的项目名称。

我想要做的是克隆这个隐藏的“项目”元素并将其插入到网页上**最后一个项目元素所在的位置之后。**显示它，并将内部文本更改为我需要的任何内容。

我当前的实现没有按预期克隆/插入项目，尽管我认为应该这样做，但我可能遗漏了一些东西。

我的标记

```
<div class="item" style="border:1px solid blue; padding:7px; display:none;">hello</div> 
```

添加项目

我的 JavaScript

```
$(".addItem").click(function(){

   //clone hidden item element blueprint
   $('.item').eq(0).clone().insertAfter('.item:last-child');

   //Change inner text of element
   $('.item:last-child').text("apples").show();
}); 
```

**JSFiddle**

[http://jsfiddle.net/XPVAs/](http://jsfiddle.net/XPVAs/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T19:32:27.150

假设您需要`:last`选择器，而不是`:last-child`：

```
$(".addItem").click(function(){

    //clone hidden item element blueprint
    $('.item').eq(0).clone().insertAfter('.item:last');

    //Change inner text of element
    $('.item:last').text("apples").show();
}); 
```

这是一个演示：http: [//jsfiddle.net/XPVAs/3/](http://jsfiddle.net/XPVAs/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:49:06.103

改变

```
$('.item:last-child').text("apples").show(); 
```

至

```
$('.item:last').text("apples").show(); 
```

仔细阅读以下链接：

[http://api.jquery.com/last-child-selector/](http://api.jquery.com/last-child-selector/)

[http://api.jquery.com/last/](http://api.jquery.com/last/)

# python - 在 Python 中引发异常时了解范围

> ID：14345204
> 
> 赞同：1
> 
> 时间：2013-01-15T19:17:21.547
> 
> 标签：python, exception, exception-handling

```
def set_attribute(attributes, name, value):
    for i, attribute in enumerate(attributes):
        if name in attribute:
            quote_char = attribute.find('"')
            if quote_char == -1:
                raise ValueError
                return None
            attributes[i] = attribute[:quote_char+1] + str(value) + '"'
            return attributes 
```

我是一名新程序员，我正在尝试正确理解异常处理。

在这个例子中，每个地方`name`也应该有一个`"`字符，所以如果失败，我想引发一个异常，但我也试图了解该`return None`语句是否必要（或做任何事情）。

我的理解是，在找到异常处理程序之前，我会逃离每个级别的范围。[Python教程](http://docs.python.org/2/tutorial/errors.html)是这样说的：

> *   首先，执行 try 子句（try 和 except 关键字之间的语句）。
> *   如果没有发生异常，则跳过 except 子句并完成 try 语句的执行。
> *   如果在 try 子句执行期间发生异常，则跳过该子句的其余部分。然后如果它的类型与以 except 关键字命名的异常匹配，则执行 except 子句，然后在 try 语句之后继续执行。
> *   如果在 try 子句执行期间发生异常，则跳过该子句的其余部分。然后如果它的类型与以 except 关键字命名的异常匹配，则执行 except 子句，然后在 try 语句之后继续执行。
> *   如果发生与 except 子句中指定的异常不匹配的异常，则将其传递给外部 try 语句；如果没有找到处理程序，则它是一个未处理的异常，并且执行停止并显示如上所示的消息。

然而，在阅读了这个描述之后，我意识到[我不理解异常，但我应该](http://matt.might.net/articles/implementing-exceptions/)。

所以简单地陈述这个问题：这个`return None`陈述是否必要，为什么？另外，我对异常的工作方式有什么误解？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T19:19:16.947

是`return None`垃圾。Python 永远不会到达那里。

* * *

您可以简化代码并运行一个小实验来查看是否`FOO`返回了该值：

```
def foo():
    if True:
        raise ValueError('Bad value')
        return 'FOO'
    return 'BAR'

try:
    print(foo())
except ValueError as err:
    print(err)
    # Bad value 
```

如果`FOO`被退回，您可能会在 中看到它`print(foo())`，但实际上该行没有打印任何内容。相反，您会看到`Bad value`.

# xml - 为什么<转换为<而>和其他转义字符不能正确转换

> ID：14345208
> 
> 赞同：2
> 
> 时间：2013-01-15T19:17:43.493
> 
> 标签：xml, xslt, xpath, soapui

我通过 SoapUI 发送一个肥皂请求并用于`XSLT`生成`XML`响应。我的回复需要如下所示：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
<soap:Body>
  <TXLifeResponse>         
     <TransType tc="1201">General Requirement Order Request</TransType>
  </TXLifeResponse>
 </soap:Body>
</soap:Envelope> 
```

我可以从下面得到这个回复`XSLT`

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
     xmlns:acord="http://ACORD.org/Standards/Life/2"  
     xmlns="http://ACORD.org/Standards/Life/2">
  <xsl:output method="xml" encoding="utf-8" indent="yes" />
  <xsl:variable name="TransType_tc" select="//acord:TXLife/acord:TXLifeRequest//acord:TransType/@tc" />
  <xsl:variable name="TransType" select="//acord:TXLife/acord:TXLifeRequest//acord:TransType" />

  <xsl:template match="/">       
         <TXLifeResponse>       
          <xsl:element name="TransType">
            <xsl:attribute name="tc"><xsl:value-of select="$TransType_tc"/></xsl:attribute>
            <xsl:value-of select="$TransType"/>
          </xsl:element>
        </TXLifeResponse>
  </xsl:template>
</xsl:stylesheet> 
```

但我注意到了一个意想不到的行为。在使用`<xsl:element`和`<xsl:attribute>`标记之前，我做了这样的事情`XSLT`：

```
&lt;TransType tc=&quot;<xsl:value-of select="$TransType_tc"/>&quot;&gt;<xsl:value-of select="$TransType"/> &lt;/TransType&gt; 
```

收到的输出`SoapUI`是：

```
&lt;TransType tc="1201">General Requirement Order Request &lt;/TransType> 
```

任何人都可以帮助我理解为什么`&lt;`没有转换，而是`&gt;`做`&quot;`了。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T19:29:31.043

XSLT 文件*也是*XML 文件，因此当您输入转义值时，`&lt;`或`&gt;`将被理解为`<`或`>`字符。然后根据需要为输出 XML 转义所有字符。

但是，在输出 XML 文档的上下文中，不需要转义`>`或`"`，只有`<`，所以只有`<`被转义。

您需要查看 XML 规范以获取详细信息，特别是`CharData`XML 解析器的生成（这是您在给出的示例中所处的位置）。在 XML中`<`，如果它们打算成为字符数据，则`&`必须*始终*`>`进行转义，如果在`]]`.

`"`永远不需要在`CharData`上下文中转义。您可能需要转义的地方`"`是，如果您位于用作分隔符的属性值（`AttValue`产生式）中`"`，例如`myattribute="this is a quote: &quot;"`.

请注意，如果您使用不了解 XML 解析上下文的工具生成 XML（例如，如果您正在使用字符串构造 XML），那么最安全和最简单的做法是始终转义所有三个字符。这就是为什么您经常看到`&gt;`并`&quot;`不必要地逃脱的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T20:24:00.627

查看[XML 规范中描述的语法规则](http://www.w3.org/TR/2008/REC-xml-20081126/#syntax)：

> 右尖括号 ( `>`) 可以使用 string 表示，并且为了兼容性，当它出现在content 中的字符串中时，如果该字符串不标记 CDATA 部分的结尾，则`&gt;`必须使用其中一个或一个字符引用进行转义。`&gt;``]]>`

所以，这是合法的：

```
<xml> > </xml> 
```

...但不会在这种情况下：

```
<xml> ]]&gt; </xml> 
```

> 为了允许属性值包含单引号和双引号，撇号或单引号字符 ( `'`) 可以表示为`&apos;`，双引号字符 ( `"`) 表示为`&quot;`。

所以，这是合法的：

```
<xml attr=" ' " /> 
```

...但不会在这种情况下：

```
<xml attr=' &apos; ' /> 
```

一些转义编码器开发人员过于谨慎，或者更容易概括表示，因为您不需要对转义数据的上下文了解太多。

# iphone - 地理定位 iPhone 5 和 iPad 3

> ID：14345217
> 
> 赞同：0
> 
> 时间：2013-01-15T19:18:21.187
> 
> 标签：iphone, ipad, geolocation, ios-simulator

我有一个非常奇怪的问题。以下代码适用于我计算机上的所有浏览器以及 IOS 模拟器（所有设备），但不适用于我自己的 iPhone 5 或 iPad 3（均运行 6.0.2）。

```
getLocation: function()
{   
    if(navigator.geolocation)
    {   console.log('It is supported');
        navigator.geolocation.getCurrentPosition(getPosition);
    }

    function getPosition(position)
    {
        console.log('You should see this :/');
        var coords = [];
            coords['longitude'] = position.coords.longitude;
            coords['latitude'] = position.coords.latitude;
            console.log(coords["longitude"]);
    } 
```

调试时会发生以下情况：在我的浏览器/IOS 模拟器中，我收到所有 console.log 消息，但在我的 iPhone/iPad 中，我只收到“支持”，下一行永远不会执行？！我应该怎么办？当我尝试其他 Geolocations 站点时，它可以工作......真的很奇怪。

**我在这里建立了一个测试站点，请告诉我你的结果，它对你有用吗？** 如果它有效，则应显示带有您的经度的警报弹出窗口。 [测试站点](http://jeho.se/mut)（在您的 iPhone/iPad 上试用...）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:03:09.100

好吧，我找到了一种解决方案。当您连续 3 次授予 iOS Safari 权限时，它将停止请求您的权限。这就解释了为什么要求我许可的弹出窗口从未出现过。当我在我的 iPhone 上进行恢复（设置->恢复->恢复隐私）时，它起作用了。

但不知何故，我仍然认为这是一个错误，即使我连续三次授予我的权限，我的 getPosition 函数仍然应该执行？

# javascript - RequireJS 使用 AMD 模块随机加载错误的文件名

> ID：14345222
> 
> 赞同：1
> 
> 时间：2013-01-15T19:18:44.597
> 
> 标签：javascript, jquery, knockout.js, requirejs, amd

我将我的配置（main.js）定义为：

```
require.config({
    urlArgs: "bust=" + (new Date()).getTime(),
    paths: {
        jquery: 'jquery-1.8.3.min',
        knockout: 'knockout-2.2.0',
        komapping: 'knockout.mapping-latest',
        token: 'jquery.tokeninput'
    },
    shim: {
        'token': ['jquery']
    }
}); 
```

**编辑** main.js 是一个共享配置。我有几个页面都使用相同的设置，我不想在我的项目中到处修改特定于版本的文件名。 **/编辑**

并包含在页面中：

```
<script src="/AnswersDev/Scripts/require.js" data-main="/AnswersDev/Scripts/main"></script> 
```

add-report.js 包含为：

```
<script type="text/javascript">
    require(['Views/add-report']);
</script> 
```

**编辑** 这似乎是原因。内联脚本有时在 main 之前运行，因此它期望找到的别名没有定义，所以它只是去寻找 .js。 **/编辑**

jquery.tokeninput 是 AFAIK，我使用的唯一非 AMD 模块。工作请求会产生以下请求序列（Fiddler 捕获）：

1.  需要.js
2.  main.js
3.  视图/add-report.js
4.  视图/add-report-wizard-model.js
5.  淘汰赛-2.2.0
6.  jquery-1.8.3.min.js
7.  视图/add-report-wizard-model-parameter.js
8.  视图/add-report-wizard-model-step.js
9.  淘汰赛.mapping-latest.js

非工作请求的序列如下：

1.  需要.js
2.  *视图/add-report.js*
3.  *main.js*
4.  视图/add-report-wizard-model.js
5.  **淘汰赛.js**
6.  **jQuery.js**
7.  视图/add-report-wizard-model-step.js
8.  视图/add-report-wizard-model-parameter.js
9.  淘汰赛.mapping-latest.js

添加报告.js：

```
define(['jquery', 'knockout', 'Views/add-report-wizard-model'], function ($, ko, ViewModel) {
... snip ...
}); 
```

请注意，在非工作序列中， add-report.js在 require.js**之前请求（我希望在加载 require.js****之后**应用非确定性加载顺序）以及敲除和 jquery （都具有内置的 AMD 支持）正在使用错误的文件名请求。我观察到在 add-report 之前请求 require 的其他序列，并且敲除和 jquery 文件名仍然错误。我在请求之间唯一要做的就是刷新浏览器（我还要注意，一旦它工作，它往往会继续工作，一旦它中断，它往往会保持损坏）。我试过删除`urlArgs`从配置中，仍然观察到同样的问题。在此特定页面上，未使用 jquery.tokeninput。从配置文件中删除它似乎也没有任何效果。

在这一点上，RequireJS 对我来说完全不可靠，我当然不能在当前状态下将我的代码发布到生产环境中。考虑到似乎相当成功地使用 RequireJS 的人数，我只能假设问题出在我的代码中，但我不知道问题出在哪里。

有人对我可能出错的地方有任何建议吗？谢谢。

编辑：根据要求，摘自 knockout.mapping-latest.debug.js：

```
// Module systems magic dance.

if (typeof require === "function" && typeof exports === "object" && typeof module === "object") {
    // CommonJS or Node: hard-coded dependency on "knockout"
    factory(require("knockout"), exports);
} else if (typeof define === "function" && define["amd"]) {
    // AMD anonymous module with hard-coded dependency on "knockout"
    define(["knockout", "exports"], factory);
} else {
    // <script> tag: use the global `ko` object, attaching a `mapping` property
    factory(ko, ko.mapping = {});
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T19:52:25.347

当您像这样请求文件时：

```
<script src="/AnswersDev/Scripts/require.js" data-main="/AnswersDev/Scripts/main"></script>
<script type="text/javascript">
    require(['Views/add-report']);
</script> 
```

有可能在脚本之前调用了内联 require `main.js`（如果我理解正确，您的配置在哪里）。

所以你们都需要从`main.js`文件中加载。您可以使用配置`deps`选项来加载一些文件。或者你也可以将它们都包含在内，但这会破坏目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:31:46.830

这就是我现在的工作（感谢西蒙）。

tl;dr 版本：`require`在 <head> 的全局变量中创建配置，然后像往常一样包含特定于页面的模块/require.js。

主.js：

```
var require = {
    baseUrl: '/Scripts',
    paths: {
        jquery: 'jquery-1.8.3.min',
        knockout: 'knockout-2.2.0',
        komapping: 'knockout.mapping-latest',
        token: 'jquery.tokeninput'
    },
    shim: {
        'token': ['jquery']
    }
}; 
```

添加报告：

```
<head>
    ...
    <script src="/Scripts/main.js" type="text/javascript"></script>
</head>
<body>
    ...
    <script src="/Scripts/require.js" data-main="Views/add-report.js"></script> 
```

# ios6 - QLPreviewController ios6 获取为 UIImage

> ID：14345223
> 
> 赞同：1
> 
> 时间：2013-01-15T19:18:46.367
> 
> 标签：ios6, qlpreviewcontroller

有没有办法在 ios6 中获取 QLPreviewController 视图的 UIImage 表示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:25:23.170

是的你可以

**[QLPreviewController](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/QLPreviewControllerDataSource_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40009665)可以显示以下项目的预览**：

1.  iWork 文档
2.  Microsoft Office 文档（Office '97 和更高版本）
3.  富文本格式 (RTF) 文档
4.  PDF 文件
5.  图片
6.  统一类型标识符 (UTI) 符合 public.text 类型的文本文件（请参阅统一类型标识符参考）
7.  逗号分隔值 (csv) 文件

有关 QLPreviewController 的更多信息，请参阅此[链接](http://soulwithmobiletechnology.blogspot.in/2012/07/tutorial-how-to-use-qlpreviewcontroller.html)和文档，请参阅此[链接](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/QLPreviewControllerDataSource_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40009665)

# javascript - javascript xml子节点

> ID：14345232
> 
> 赞同：0
> 
> 时间：2013-01-15T19:19:19.790
> 
> 标签：javascript, xml

这是怎么做到的？

我在这里读到了：[CDATA](http://reference.sitepoint.com/javascript/Document/createCDATASection) 我试过了：

```
 var XML = document.createElement("testing");
    var NodeSystemOut = document.createElement("system-out");
    var cdata = document.createCDATASection
    ('<p>Good relations have I with the Wookies</p>');
    NodeSystem.appendChild(cdata);
    XML.appendChild(NodeSystem); 
```

但这不起作用。

有任何想法吗？javascript菜鸟

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:59:44.677

您的运行时代码中是否有换行符？

```
var cdata = document.createCDATASection
('<p>Good relations have I with the Wookies</p>'); 
```

检查您的 JavaScript 引擎是否没有将它们解释为两个单独的表达式。这是一条完全合法的 JavaScript 行：

```
(""); 
```

令人困惑的是，JavaScript 支持[隐式分号表达式分隔符](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml?showone=Semicolons#Semicolons)。

因此，引擎可能正在分配`cdata`一个函数引用：

```
var cdata = document.createCDATASection; 
```

# visual-studio-2010 - 从 Qt5 .pro 文件设置 Visual Studio 2010 解决方案项目依赖项

> ID：14345233
> 
> 赞同：0
> 
> 时间：2013-01-15T19:19:19.533
> 
> 标签：visual-studio-2010, visual-studio, qt, qmake, qt5

是否可以设置一个`TEMPLATE = subdirs`.pro 文件，以便`qmake -tp vc`在生成的 Visual Studio 解决方案中设置项目依赖项？

我尝试使用`CONFIG += ordered`后跟以`SUBDIRS += <libdir>`正确顺序输入的条目，但这似乎对解决方案属性对话框中的“项目依赖项”设置没有影响。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:46:51.860

我正在回答我自己的问题，因为似乎还没有人找到解决方案。据我所知，仍然无法使用 QT .pro 文件设置 Visual Studio 项目依赖项。我们正在使用我们开发的可执行文件（也使用 Qt）在项目构建完成后手动执行此操作。用于构建可执行文件的代码适用于 Visual Studio 2010 解决方案，如下所示。它相当简单，并且会更新您的解决方案，以便所有包含的项目都依赖于命令行中的所有项目输入。IE。`vcSlnDependencies filename.sln dependency1 dependency2 dependency3`将 filename.sln 中的所有项目设置为依赖于dependency1、dependency2 和dependency3。显然，一个项目永远不会依赖于它自己。这段代码应该很容易修改，以允许更复杂的依赖结构。

```
#include <QFile>
#include <QDir>
#include <QFileInfo>
#include <QStringList>
#include <QUuid>
#include <QTextStream>

#include <iostream>
#include <vector>
#include <map>

std::map<QString, QString> dependencyGuids;
std::vector<QString> dependencies;

int main(int argc, char *argv[])
{
    if(argc<3)
    {
        std::cout << "Usage:" << std::endl << std::endl << "vcSlnDependencies filename.sln dependency1 dependency2 dependency3 ..." << std::endl;

        return -1;
    }
    else
    {
        for(int i = 2; i < argc; i++)
        {
            dependencies.push_back(argv[i]);
        }
    }

    QFile file(argv[1]);
    if(!file.open(QIODevice::ReadOnly | QIODevice::Text))
    {
        std::cout << "Could not open sln file: " << argv[1] << "." << std::endl;
        return -1;
    }

    QFileInfo fileInfo(file);

    std::cout << "Processing " << fileInfo.fileName().toStdString() << std::endl;

    QByteArray fileData;
    fileData = file.readAll();
    file.close();

    QFile outFile(argv[1]);
    if(!outFile.open(QIODevice::WriteOnly | QIODevice::Text))
    {
        std::cout << "Could not open sln file: " << argv[1] << "." << std::endl;
        return -1;
    }

    QTextStream reader(fileData);
    QTextStream writer(&outFile);

    //first populate the dependency guids
    while(!reader.atEnd())
    {
        QString currentLine = reader.readLine();

        for(unsigned int i = 0; i < dependencies.size(); i++)
        {
            if(currentLine.contains(dependencies[i]) && currentLine.contains(".vcxproj") && currentLine.contains("Project(\"{"))
            {
                dependencyGuids[dependencies[i]] = currentLine.right(39).left(38);
                std::cout << "Setting dependency GUID for " << dependencies[i].toLatin1().data() << " to " << currentLine.right(39).left(38).toLatin1().data() << "\n";
            }
        }               
    }
    reader.seek(0);

    //now update other projects with those dependencies
    while(!reader.atEnd())
    {
        QString currentLine = reader.readLine();

        writer << currentLine << "\n";

        if(currentLine.contains(".vcxproj") && currentLine.contains("Project(\"{"))
        {
            QString currentGuid = currentLine.mid(9,38);

            std::vector<QString> currentDependencies;

            for(std::map<QString, QString>::const_iterator iter = dependencyGuids.begin(); iter != dependencyGuids.end(); ++iter)
            {
                if(iter->second != currentGuid)
                {
                    currentDependencies.push_back(iter->second);
                }
            }

            if(currentDependencies.size() > 0)
            {
                writer << "\tProjectSection(ProjectDependencies) = postProject\n";

                for(unsigned int i = 0; i < currentDependencies.size(); i++)
                {
                    writer << "\t\t" << currentDependencies[i] << " = " << currentDependencies[i] << "\n";                  
                }

                writer << "\tEndProjectSection\n";
            }
        }       
    }

    writer.flush();
    outFile.close();

    return 0;
} 
```

# javascript - 触发类型文件事件时未捕获 RangeError

> ID：14345234
> 
> 赞同：1
> 
> 时间：2013-01-15T19:19:23.167
> 
> 标签：javascript, jquery, wordpress, file-io, contact-form-7

这是点击事件代码

```
function jqueryscript_in_head(){ ?>
    <script type="text/javascript">

    $j = jQuery.noConflict();
        $j(function() {
        $j("input[type=file]").wrap("<div class='hider' style='height:0px;width:0px;' />");
        $j(".hider").wrap("<div class='fileinputimg' />");
        $j(".fileinputimg").on("click", this, function(e) {
            $j("input[type=file]").trigger('click');
        });

    });
    </script> <?php
 } add_action('wp_head', 'jqueryscript_in_head'); 
```

我不能让它工作..我试过它`live() delegate() click() bind()`太重了。

它是基于 WordPress 的联系表格 7。

[这是网站](http://www.sec-org.co.il/?page_id=191) 点击底部输入字段下的 div。我让输入可见，所以你可以找到它，因为它不是英文的。

![在此处输入图像描述](../Images/b4a94bd063b08a29a95b922813087a11.png)

任何形式的帮助将不胜感激

# c++ - 编程语言理念：避免 vtable 查找

> ID：14345237
> 
> 赞同：4
> 
> 时间：2013-01-15T19:19:25.220
> 
> 标签：c++, compiler-construction, programming-languages, compiler-optimization, vtable

一段时间以来，我一直在玩弄一种编程语言的想法：它本质上是 C++ 和 Java 的语法，适用于系统编程（或实际上任何需要高性能的编程），但在我看来，比 C++ 更有趣的语法。我正在考虑如何处理分层类结构中的虚拟方法（我的语言不包括多重继承），以及避免 vtable 查找的方法。我的问题是双重的：

1.  据我了解，vtable 查找如此影响性能的原因（至少在游戏开发等时间紧迫的场景中）是因为它需要延迟对象 vtable 指针，而这个 vtable 通常是缓存未命中。这是正确的，还是我错过了问题的一部分？
2.  我对部分解决方案的想法是：如果编译器可以完全确定对象的类型（即，它不能是从它认为的类型派生的类型），并且该对象作为参数传递给函数，其类型为对象类型的超类，然后函数中调用的虚方法的位置可以作为一种“隐藏”参数传递，该参数在编译时添加。也许一个例子会有所帮助：

考虑以下类层次结构的伪代码：

```
class Animal {
    public void talk() { /* Generic animal noise... */ }
    // ...
}

class Dog extends Animal {
    public void talk() { /* Override of Animal::talk(). */ }
    // ...
}

void main() {
    Dog d = new Dog();
    doSomethingWithAnimal(d);
}

void doSomethingWithAnimal(Animal a) {
    // ...
    a.talk();
    // ....
} 
```

请记住，这是伪代码，而不是 C++ 或 Java 或类似代码。此外，假设 Animal 参数是通过引用而不是值隐式传递的。因为编译器可以看到它`d`肯定是 type `Dog`，所以它可以将`doSomethingWithAnimal`定义翻译成这样的：

```
void doSomethingWithAnimal(Animal a, methodptr talk = NULL) {
    // ...
    if ( talk != NULL ) {
        talk(a);
    } else {
        a.talk();
    }
    // ...
} 
```

然后`main`看起来会被编译器翻译成这样的东西：

```
void main() {
    Dog d = new Dog();
    doSomethingWithAnimal(d, Dog::talk);
} 
```

显然，这不会完全消除对 vtable 的需求，并且可能仍需要为无法确定对象确切类型的情况提供 vtable，但是您对此作为性能优化有何看法？我计划尽可能使用寄存器传递参数，即使参数必须溢出到堆栈上，堆栈上的 methodptr 参数更有可能是缓存命中而不是 vtable 值，对吧？任何和所有的想法都非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T20:03:41.660

**关于Q1：**缓存利用率实际上只是虚拟调用“问题”的一部分。函数的全部意义`virtual`，以及一般的后期绑定，是调用站点可以调用任何实现而不需要更改。这需要一些间接性：

*   间接意味着解决间接的空间和/或时间开销。
*   *无论您如何进行间接调用，如果 CPU 具有良好的分支预测器并且*调用站点是单态的（即只调用一个实现），间接调用只能与静态调用一样快。而且我什至不确定一个完美预测的分支是否与所有硬件开发人员关心的静态分支一样快。
*   在编译时不知道被调用函数也会抑制基于知道被调用函数的优化（内联，还有循环不变的代码运动等等）。

您的方法并没有改变这一点，因此保留了大部分性能问题：它仍然浪费一些时间和空间（仅在额外的参数和分支上，而不是 vtable 查找上），它不允许内联或其他优化，并且它不会删除间接调用。

**Re 2：**这是对去虚拟化的一种过程间旋转，C++ 编译器已经在某种程度上做到了这一点（在本地，有@us2012 在评论中描述的限制）。它有一些“小”问题，但*如果*有选择地应用它可能是值得的。否则，你会生成更多的代码，传递*很多*额外的参数，做*很多*额外的分支，并且只会获得很少甚至净损失。

我认为主要问题是它不能解决上述大多数性能问题。为子类和同一主题的其他变体生成专门的函数（而不是一个通用的主体）*可能会*有所帮助。但这会产生额外的代码，这些代码必须通过性能提升来证明自己是合理的，而且普遍的共识是，即使在性能关键的程序中，这种激进的优化对于大多数代码来说都是不值得的。

特别是，虚拟调用开销仅在相同功能的基准测试中很重要，或者如果您已经从其他所有内容中优化了永远爱的地狱并且需要大量微小的间接调用（游戏开发中的一个示例：几个虚拟方法调用每个几何对象进行绘图或截锥体剔除）。在大多数代码中，虚拟调用无关紧要，或者至少不足以保证进一步的优化尝试。此外，这仅与 AOT 编译器有关，因为 JIT 编译器有其他方法来处理这些问题。查找多态内联缓存，并注意跟踪 JIT 编译器可以轻松内联*所有*调用，无论是否虚拟。

综上所述：vtables 已经是一种快速且通用的实现虚函数的方式（如果*可以*使用的话，这里就是这种情况）。除非在极少数情况下，否则您不太可能对它们进行很大改进，更不用说注意到改进了。如果你想尝试它，你可以尝试编写一个 LLVM pass 来做这样的事情（尽管你必须在较低级别的抽象上工作）。

# asp.net - ASP.net Vb.Net Label.Text 未更新

> ID：14345239
> 
> 赞同：2
> 
> 时间：2013-01-15T19:19:29.173
> 
> 标签：asp.net, vb.net, label

在我的 VB.net ASP 应用程序中，我有一些 ASPTREEVIEW，在页面加载时有一个标签，我设置了一些值。单击任何行后，我会捕获该值并将其分配给标签。

但是突然之间，该标签值没有按所选值更新。好像我通过调试值来检查它，值会发生变化，但是当我使用 Lable.text = selected_value... 时它会设置值，但它实际上并没有在 html 页面上发生变化。HTML 显示旧值。

会有什么问题，我不明白。

```
Imports DevExpress
Imports DevExpress.Xpo
Imports DevExpress.Data
Imports DevExpress.Data.Filtering
Imports System.Data

Partial Class _Default
    Inherits System.Web.UI.Page

    Public testvar As Integer = 35

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim xpcol As New XPCollection(Of WCSOEE.WcsGCObject)
        Dim GCObj1 As WCSOEE.WcsGCObject
        Dim Filter1 As New DevExpress.XtraCharts.DataFilter
        Dim SelectedGCObject As WCSOEE.WcsGCObject
        Filter1.ColumnName = "Oid"
        Filter1.Condition = XtraCharts.DataFilterCondition.Equal

        Filter1.Value = Label2.Text
        If Label2.Text = "" Then
            Label2.Text = 10
        End If
        For Each Siris As DevExpress.XtraCharts.Series In WebChartControl1.Series
            '  WebChartControl1.Series(Siris.Name).DataFilters.Item(0).Value = CInt(Label2.Text)
        Next

        Dim masterKeyvalue As DevExpress.Web.ASPxTreeList.TreeListNode = ASPxTreeList1.FocusedNode
        If masterKeyvalue IsNot Nothing Then
            SelectedGCObject = masterKeyvalue.DataItem
        Else
            SelectedGCObject = xpcol.Object(31)
        End If

        ' MsgBox(SelectedGCObject.GCName)
        MsgBox(Label2.Text)

        If IsPostBack = False Then
            Label2.Text = calculatehours(SelectedGCObject.Oid)
        End If

    End Sub

    Protected Function calculatehours(Oid As Integer)
        xpocolLogAvailability.Session = DevExpress.Xpo.XpoDefault.Session
        Dim logavail As New XPCollection(Of WCSOEE.LogAvailability)
        Dim gcobjlist As New XPCollection(Of WCSOEE.WcsGCObject)
        gcobjlist.Filter = CriteriaOperator.Parse("[Oid]=?", Oid)
        Dim filter As CriteriaOperator
        Dim ds As New DataTable
        Dim Series As New DevExpress.XtraCharts.Series
        Dim Filter1 As New DevExpress.XtraCharts.DataFilter
        ' Label2.Text = Oid

        logavail.Filter = CriteriaOperator.Parse("GCObject.Oid=?", Oid)
        Filter1.ColumnName = "Oid"
        Filter1.Condition = XtraCharts.DataFilterCondition.Equal
        Filter1.Value = Oid
        Dim arr1(32) As Long
        'For i As Int16 = 1 To 32
        '    arr1(i) = 0
        'Next
        'For Each gcobj As WCSOEE.LogAvailability In logavail
        '    arr1(gcobj.Status) = arr1(gcobj.Status) + gcobj.Duration
        'Next= ""
        'ds.Columns.Add(New DataColumn("Name", System.Type.GetType("System.Int32")))

        For Each Siris As DevExpress.XtraCharts.Series In WebChartControl1.Series

            WebChartControl1.Series(Siris.Name).DataFilters.Item(0).Value = Oid

        Next
        WebChartControl1.RefreshData()

        'For i As Int16 = 1 To 32
        '    ds.Rows.Add(i, arr1(i))
        'Next

        'ASPxListBox1.DataSource = ds
        'ASPxListBox1.DataBind()
        Return Oid
    End Function

    Protected Sub ASPxTreeList1_CustomCallback(sender As Object, e As DevExpress.Web.ASPxTreeList.TreeListCustomCallbackEventArgs) Handles ASPxTreeList1.CustomCallback

    End Sub

    Protected Sub ASPxTreeList1_FocusedNodeChanged(sender As Object, e As System.EventArgs) Handles ASPxTreeList1.FocusedNodeChanged
        Dim masterKeyvalue As DevExpress.Web.ASPxTreeList.TreeListNode = ASPxTreeList1.FocusedNode
        Dim SelectedGCObject As WCSOEE.WcsGCObject = masterKeyvalue.DataItem
        ' MsgBox(SelectedGCObject.GCName)

        If IsPostBack Then
            Label2.Text = calculatehours(SelectedGCObject.Oid)

        End If

        MsgBox(IsPostBack)
        MsgBox(Label2.Text)

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:28:32.523

发布一些代码，以便我们可以准确地看到您在做什么，到目前为止没有看到任何内容确保您在页面加载中有一个 If 语句，仅在当前请求不是回发时应用标签文本，否则标签将设置为这对每个请求。

```
If Not IsPostBack() Then
   lblSomeLabel.Text = "Page load text"
End If 
```

# java - Java/Spring - 保存文件按钮

> ID：14345240
> 
> 赞同：-2
> 
> 时间：2013-01-15T19:19:31.490
> 
> 标签：java, spring, file-io

我想编写一个代码来从服务器获取数据并允许用户将该数据保存到他/她的 PC 中的文件中。

我是这方面的初学者，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:25:29.453

您可以使用[ResponseEntity](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/http/ResponseEntity.html)类生成自定义响应，例如可下载的图像或 zip：

```
@RequestMapping("")
public ResponseEntity<byte[]> generateResponseEntity() {
    HttpHeaders headers = new HttpHeaders();

    headers.add("Content-Type", "application/zip");
    headers.add("Content-Disposition", "attachment; filename=zip.zip");

    return new ResponseEntity<byte[]>(getBytes(), headers, HttpStatus.OK);
} 
```

# winapi - 设置工具提示显示计时器

> ID：14345244
> 
> 赞同：1
> 
> 时间：2013-01-15T19:19:39.160
> 
> 标签：winapi, timer, tooltip

无法将工具提示设置为显示超过 33 秒，这让我感到困扰。我的工具提示是在我使用`TCS_TOOLTIPS`.

但是有一天，我发现我可以在工具提示的（子类）窗口过程中使用以下代码：

```
if (message == WM_TIMER && wParam == 4) {
    static int counter = 0;
    counter++;
    if (counter != 60)
        return 1;
    else
        counter = 0;
}

return CallWindowProc(DefWndProcTabTooltip, hwnd, message, wParam, lParam); 
```

结合以下代码：

```
 SendMessage(hwndTooltip, TTM_SETDELAYTIME, TTDT_AUTOPOP, MAKELPARAM((1000),(0))); 
```

然后工具提示将显示 60 秒。

条件`wParam == 4`意味着该 WM_TIMER 消息的事件是`The display timeout is achieved, and the tooltip is going to be hide`。

虽然这是我想做的，但我有一个问题：

测试`wParam == 4`是正确的测试条件吗？我的意思是：事件的事件ID`The display timeout is achieved...`总是4？是否有一个常数，比如说 (...TOOLTIP)_TIMEOUTEXPIRE 应该（可以）使用。

# google-app-engine - 用户可以上传到谷歌云存储吗？

> ID：14345249
> 
> 赞同：4
> 
> 时间：2013-01-15T19:19:59.690
> 
> 标签：google-app-engine, google-cloud-storage

我想创建一个对象，给我的用户一个上传 url，让他们上传数据。结果对象必须是公共可读的。谷歌云存储可以做到这一点吗？如果是这样，是否可以通过谷歌应用引擎，我在哪里可以找到这样做的文档和/或示例？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-15T19:59:55.333

要将用户直接上传到 Google Cloud Storage，您可以使用[签名 URL](https://developers.google.com/storage/docs/accesscontrol#Signed-URLs)功能。这允许您向单个用户授予对对象发出 PUT 请求的访问权限。

如果您使用的是 Python，则有一个[演示签名 URL 的 python 示例](https://github.com/GoogleCloudPlatform/storage-signedurls-python)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T19:26:13.653

您可以使用 blobstore 服务创建上传 url。请参阅[create_upload_url](https://developers.google.com/appengine/docs/python/blobstore/functions#create_upload_url)函数。

要使对象可公开访问，您可能需要使用存储桶的 acl。

另请参阅[云存储概述](https://developers.google.com/appengine/docs/python/googlestorage/overview)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-21T14:40:30.213

直接上传到 Google Cloud Storage 的另一个选项是[Resumable URLs](https://cloud.google.com/storage/docs/json_api/v1/how-tos/upload#resumable)。

如果您的对象很大，例如视频，您可以通过这种方式分块上传。如果上传失败（例如客户端失去互联网连接），您可以从上次中断的地方继续，而不必让用户重新开始。另外，您不必重新启动上传，从而节省了一些钱。

但是，如果您的媒体很小，只需使用签名 URL。

# java - 设置 beanshell 时出现“主线程”错误

> ID：14345250
> 
> 赞同：0
> 
> 时间：2013-01-15T19:19:59.197
> 
> 标签：java, command-prompt, beanshell

受命学习beanshell。所以在这里我尝试使用本[教程设置我的第一个示例](http://www.philippeadjiman.com/blog/2009/10/17/beanshell-tutorial-quick-start-on-invoking-your-own-or-external-java-code-from-the-shell/)

[我按照建议从这里](http://www.beanshell.org/download.html)下载了 jar 文件，并将其放在我的`C:\lib`文件夹中，因为它最接近`C:\libs`教程建议的。

我在命令提示符下运行了以下命令，我得到了`Exception in thread "Main Thread" java.lang.NoClassDefFoundError: bsh/Interpreter`

我当前的环境适用于 Win XP 中的 Struts1.X/Spring/Hibernate。任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:09:19.600

假设我在命令提示符中，我能够按如下方式运行它`c:\lib`

```
java -cp . -jar bsh-2.0b2.jar 
```

# javascript - 外部 .js 文件中的 jQuery 脚本未触发

> ID：14345251
> 
> 赞同：0
> 
> 时间：2013-01-15T19:20:04.523
> 
> 标签：javascript, jquery, checkbox

我在一个不会运行的外部 .js 文件中有一小段脚本。这是脚本：

```
$(document).ready(function () {
    $('#chkAllTracts').change(function () {
        alert("fired");
    })
}); 
```

我在同一个 .js 文件中有许多其他函数，它们使用了一些 jQuery，它们都可以正常工作，但这是我尝试在此语法中使用的第一个 jQuery：

```
$(document).ready(function (){   } 
```

我要做的就是在更改复选框（选中或未选中）时打开警报。在调用此函数之前，使用 jQuery 动态添加复选框元素“chkAllTracts”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:23:59.600

```
$('#checkbox1').mousedown(function() {
    if (!$(this).is(':checked')) {
        alert("test")
    }
}); 
```

类似的东西？（已编辑）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:31:35.430

这对我有用：

```
$(document).ready(function(){
  $("body").append( 
    $("<input>")
      .attr("type", "checkbox")
      .change(function(){ alert("It works!"); }))
}); 
```

当文档准备好时，它在正文中包含复选框输入，更改事件设置为触发警报消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-03T19:27:33.710

这是因为您的元素是动态添加到 DOM 中的。当 jQuery 首次初始化时，jQuery 选择器不会得到它。你需要做的是

```
$('body').find('#chkAllTracts').change(function () {
    alert("fired");
}); 
```

我认为这应该可以解决您的问题。

# php - 使用 PHP 确定一个图像在另一个图像中的位置

> ID：14345256
> 
> 赞同：4
> 
> 时间：2013-01-15T19:20:40.880
> 
> 标签：php, image, coordinates

我有两个图像（小和大）。其中一个包含另一个。比如一张图片是一张照片，另一张是这张照片所在的相册页面的图片。我希望你明白我说的话。

那么如何使用 PHP 在大图像上获取小图像的坐标 (x,y)？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T15:46:04.343

自己做很容易，不依赖`gd`.

您需要注意的是，您很可能无法对每个像素进行简单的像素检查，因为过滤和压缩可能会稍微修改每个像素的值。

我在这里提出的代码很可能会很慢，如果性能是一个问题，你可以优化它或走捷径。希望代码能让您走上正确的轨道！

**首先，让我们迭代我们的图片**

```
$small = imagecreatefrompng("small.png");
$large = imagecreatefrompng("large.png");

$smallwidth = imagesx($small);
$smallheight = imagesy($small);

$largewidth = imagesx($large);
$largeheight = imagesy($large);

$foundX = -1;
$foundY = -1;

$keepThreshold = 20;

$potentialPositions = array();

for($x = 0; $x <= $largewidth - $smallwidth; ++$x)
{
    for($y = 0; $y <= $largeheight - $smallheight; ++$y)
    {
        // Scan the whole picture
        $error = GetImageErrorAt($large, $small, $x, $y);
        if($error["avg"] < $keepThreshold)
        {
            array_push($potentialPositions, array("x" => $x, "y" => $y, "error" => $error));
        }
    }
}

imagedestroy($small);
imagedestroy($large);

echo "Found " . count($potentialPositions) . " potential positions\n"; 
```

这里的目标是找出像素的相似程度，如果它们有些相似，则保留潜在位置。在这里，我迭代了大图的每个像素，这可能是一个优化点。

现在，这个错误来自哪里？

**获得可能性**

`red`我在这里所做的是遍历小图片和大图片中的“窗口”，检查,`green`和`blue`通道上有多少差异：

```
function GetImageErrorAt($haystack, $needle, $startX, $startY)
{
    $error = array("red" => 0, "green" => 0, "blue" => 0, "avg" => 0);
    $needleWidth = imagesx($needle);
    $needleHeight = imagesy($needle);

    for($x = 0; $x < $needleWidth; ++$x)
    {
        for($y = 0; $y < $needleHeight; ++$y)
        {
            $nrgb = imagecolorat($needle, $x, $y);
            $hrgb = imagecolorat($haystack, $x + $startX, $y + $startY);

            $nr = $nrgb & 0xFF;
            $hr = $hrgb & 0xFF;

            $error["red"] += abs($hr - $nr);

            $ng = ($nrgb >> 8) & 0xFF;
            $hg = ($hrgb >> 8) & 0xFF;

            $error["green"] += abs($hg - $ng);

            $nb = ($nrgb >> 16) & 0xFF;
            $hb = ($hrgb >> 16) & 0xFF;

            $error["blue"] += abs($hb - $nb);
        }
    }
    $error["avg"] = ($error["red"] + $error["green"] + $error["blue"]) / ($needleWidth * $needleHeight);
    return $error;
} 
```

到目前为止，我们已经为大图片中可能包含小图片的每个“窗口”建立了一个潜在的错误值，如果它们看起来“足够好”，则将它们存储在一个数组中。

**排序**

现在，我们只需要对我们最好的匹配进行排序并保留最好的，它很可能是我们的小图片所在的位置：

```
function SortOnAvgError($a, $b)
{
    if($a["error"]["avg"] == $b["error"]["avg"])
    {
        return 0;
    }
    return ($a["error"]["avg"] < $b["error"]["avg"]) ? -1 : 1;
}

if(count($potentialPositions) > 0)
{
    usort($potentialPositions, "SortOnAvgError");
    $mostLikely = $potentialPositions[0];
    echo "Most likely at " . $mostLikely["x"] . "," . $mostLikely["y"];
} 
```

**例子**

鉴于以下两张图片：

![大的](../Images/0e76849ecd50d30c7cd9102eb7db00b8.png)

和

![小的](../Images/5f30abe10c67139f847b1df4ea9a9994.png)

您应该有以下结果：

```
Found 5 potential positions
Most likely at 288,235 
```

这与我们鸭子的位置完全对应。其他 4 个位置是上、下、左、右 1 个像素。

在为您完成一些优化工作后，我将编辑此条目，因为此代码对于大图像来说太慢了（PHP 的性能比我预期的还要差）。

**编辑**

首先，在做任何“优化”代码之前，我们需要数字，所以我添加了

```
function microtime_float()
{
    list($usec, $sec) = explode(" ", microtime());
    return ((float)$usec + (float)$sec);
}

$time_start = microtime_float(); 
```

和

```
$time_end = microtime_float();
echo "in " . ($time_end - $time_start) . " seconds\n"; 
```

最后有一个具体的想法是在算法过程中花费了多少时间。通过这种方式，我可以知道我的更改是改进了代码还是使代码变得更糟。鉴于当前包含这些图片的代码需要大约 45 分钟的时间来执行，我们应该能够大大改善这个时间。

一个不成功的尝试是缓存`RGB`from`$needle`以尝试加速`GetImageErrorAt`功能，但它恶化了时间。

鉴于我们的计算是在几何尺度上进行的，我们探索的像素越多，花费的时间就越长......所以解决方案是跳过许多像素以尝试尽可能快地定位我们的图片，然后更准确地定位我们的立场。

我修改了错误函数以作为参数如何增加`x`和`y`

```
function GetImageErrorAt($haystack, $needle, $startX, $startY, $increment)
{
    $needleWidth = imagesx($needle);
    $needleHeight = imagesy($needle);

    $error = array("red" => 0, "green" => 0, "blue" => 0, "avg" => 0, "complete" => true);

    for($x = 0; $x < $needleWidth; $x = $x + $increment)
    {
        for($y = 0; $y < $needleHeight; $y = $y + $increment)
        {
            $hrgb = imagecolorat($haystack, $x + $startX, $y + $startY);
            $nrgb = imagecolorat($needle, $x, $y);

            $nr = $nrgb & 0xFF;
            $hr = $hrgb & 0xFF;

            $ng = ($nrgb >> 8) & 0xFF;
            $hg = ($hrgb >> 8) & 0xFF;

            $nb = ($nrgb >> 16) & 0xFF;
            $hb = ($hrgb >> 16) & 0xFF;

            $error["red"] += abs($hr - $nr);
            $error["green"] += abs($hg - $ng);
            $error["blue"] += abs($hb - $nb);
        }
    }

    $error["avg"] = ($error["red"] + $error["green"] + $error["blue"]) / ($needleWidth * $needleHeight);

    return $error;
} 
```

例如，传递`2`将使函数返回速度快 4 倍，因为我们同时跳过`x`和`y`值。

我还`stepSize`为主循环添加了一个：

```
$stepSize = 10;

for($x = 0; $x <= $largewidth - $smallwidth; $x = $x + $stepSize)
{
    for($y = 0; $y <= $largeheight - $smallheight; $y = $y + $stepSize)
    {
        // Scan the whole picture
        $error = GetImageErrorAt($large, $small, $x, $y, 2);
        if($error["complete"] == true && $error["avg"] < $keepThreshold)
        {
            array_push($potentialPositions, array("x" => $x, "y" => $y, "error" => $error));
        }
    }
} 
```

这样做，我能够以精确的代价将执行时间从 2657 秒减少到 7 秒。我增加了`keepThreshold`以获得更多“潜在结果”。

现在我没有检查每个像素，我最好的答案是：

```
Found 8 potential positions
Most likely at 290,240 
```

正如你所看到的，我们已经接近我们想要的位置，但它并不完全正确。

接下来我要做的是在这个“非常接近”的位置周围定义一个矩形，以探索`stepSize`我们添加的每个像素。

我现在将脚本的下部更改为：

```
if(count($potentialPositions) > 0)
{
    usort($potentialPositions, "SortOnAvgError");
    $mostLikely = $potentialPositions[0];
    echo "Most probably around " . $mostLikely["x"] . "," . $mostLikely["y"] . "\n";

    $startX = $mostLikely["x"] - $stepSize + 1; // - $stepSize was already explored
    $startY = $mostLikely["y"] - $stepSize + 1; // - $stepSize was already explored

    $endX = $mostLikely["x"] + $stepSize - 1;
    $endY = $mostLikely["y"] + $stepSize - 1;

    $refinedPositions = array();

    for($x = $startX; $x <= $endX; ++$x)
    {
        for($y = $startY; $y <= $endY; ++$y)
        {
            // Scan the whole picture
            $error = GetImageErrorAt($large, $small, $x, $y, 1); // now check every pixel!
            if($error["avg"] < $keepThreshold) // make the threshold smaller
            {
                array_push($refinedPositions, array("x" => $x, "y" => $y, "error" => $error));
            }
        }
    }

    echo "Found " . count($refinedPositions) . " refined positions\n";
    if(count($refinedPositions))
    {
        usort($refinedPositions, "SortOnAvgError");
        $mostLikely = $refinedPositions[0];
        echo "Most likely at " . $mostLikely["x"] . "," . $mostLikely["y"] . "\n";
    }
} 
```

现在给了我这样的输出：

```
Found 8 potential positions
Most probably around 290,240
Checking between X 281 and 299
Checking between Y 231 and 249
Found 23 refined positions
Most likely at 288,235
in 13.960182189941 seconds 
```

这确实是正确的答案，大约比初始脚本快 200 倍。

**编辑 2**

现在，我的测试用例有点太简单了……我把它改成了谷歌图片搜索：

![谷歌图片搜索](../Images/89fb2f01d353f2ea2f017c20168ef1b8.png)

寻找这张照片（它位于`718,432`）

![鸭子](../Images/04d47308f354f90e3bb8c06f6f0c8ab9.png)

考虑到更大的图片尺寸，我们可以预期更长的处理时间，但算法确实在正确的位置找到了图片：

```
Found 123 potential positions
Most probably around 720,430
Found 17 refined positions
Most likely at 718,432
in 43.224536895752 seconds 
```

**编辑 3**

我决定尝试我在评论中告诉你的选项，在执行查找之前按比例缩小图片，我得到了很好的结果。

我在第一个循环之前添加了这段代码：

```
$smallresizedwidth = $smallwidth / 2;
$smallresizedheight = $smallheight / 2;

$largeresizedwidth = $largewidth / 2;
$largeresizedheight = $largeheight / 2;

$smallresized = imagecreatetruecolor($smallresizedwidth, $smallresizedheight);
$largeresized = imagecreatetruecolor($largeresizedwidth, $largeresizedheight);

imagecopyresized($smallresized, $small, 0, 0, 0, 0, $smallresizedwidth, $smallresizedheight, $smallwidth, $smallheight);
imagecopyresized($largeresized, $large, 0, 0, 0, 0, $largeresizedwidth, $largeresizedheight, $largewidth, $largeheight); 
```

对于他们的主循环，我使用调整后的宽度和高度对调整后的资产进行了迭代。然后，当添加到数组时，我将 and 加倍`x`，`y`给出以下内容：

```
array_push($potentialPositions, array("x" => $x * 2, "y" => $y * 2, "error" => $error)); 
```

其余代码保持不变，因为我们想要在真实大小的图片上进行精确定位。您所要做的就是在最后添加：

```
imagedestroy($smallresized);
imagedestroy($largeresized); 
```

使用这个版本的代码和谷歌图像结果，我有：

```
Found 18 potential positions
Most around 720,440
Found 17 refined positions
Most likely at 718,432
in 11.499078989029 seconds 
```

4倍性能提升！

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T20:08:59.660

使用**ImageMagick**。

本页将为您解答：[如何检测/计算大图片中是否存在小图片？](https://stackoverflow.com/questions/6679451/how-can-i-detect-calculate-if-a-small-pictures-is-present-inside-a-bigger-pict)

# objective-c - Cocos2d：CoreFoundation 中的 KERN_INVALID_ADDRESS 崩溃

> ID：14345261
> 
> 赞同：1
> 
> 时间：2013-01-15T19:20:54.010
> 
> 标签：objective-c, cocos2d-iphone

我的应用程序发生了崩溃，并报告了以下崩溃报告：

```
Incident Identifier: 16EF7339-4E8F-4083-9E63-9404BC0A5A3A
CrashReporter Key:   174928c573ccbe3e1a44d9bd43a33374a9833ab5
Hardware Model:      iPad3,1
Process:         Killer [2930]
Path:            /var/mobile/Applications/81EFF1B0-3DE0-4874-B7AA-0ACA60CBB3C2/Killer.app/Killer
Identifier:      Killer
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2013-01-15 20:05:27.000 +0100
OS Version:      iOS 6.0.1 (10A523)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x41d58a76
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x32e8e564 _cache_getImp + 4
1   libobjc.A.dylib                 0x32e8ef84 lookUpMethod + 24
2   libobjc.A.dylib                 0x32e901d2 class_respondsToSelector + 26
3   CoreFoundation                  0x38bac600 objectIsKindOfClass + 32
4   CoreFoundation                  0x38bac358 __handleUncaughtException + 64
5   libobjc.A.dylib                 0x32e93a62 _ZL15_objc_terminatev + 126
6   libc++abi.dylib                 0x33844078 _ZL19safe_handler_callerPFvvE + 76
7   libc++abi.dylib                 0x33844110 std::terminate() + 16
8   libc++abi.dylib                 0x33845594 __cxa_rethrow + 84
9   libobjc.A.dylib                 0x32e939cc objc_exception_rethrow + 8
10  CoreFoundation                  0x38af2f1c CFRunLoopRunSpecific + 452
11  CoreFoundation                  0x38af2d44 CFRunLoopRunInMode + 100
12  GraphicsServices                0x370a32e6 GSEventRunModal + 70
13  UIKit                           0x3a2c02f4 UIApplicationMain + 1116
14  Killer                          0x00063e38 main (main.m:14)
15  Killer                          0x000622bc start + 36 
```

我真的不知道如何调试它。我应该怀疑我的应用程序调用的库中发生了崩溃吗？我应对这次崩溃负责，然后去哪里看？当然 Killer main 中的第 14 行是：

```
int retVal = UIApplicationMain(argc, argv, nil, @"AppDelegate"); 
```

非常感谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:50:05.547

崩溃日志提供的信息很少。无论如何，我对此感到困惑：

```
objc_exception_rethrow
__cxa_rethrow 
```

所以似乎有一些 C++ 异常处理正在进行。（具体来说，在处理异常时，会抛出另一个异常。这将导致执行终止）。

这可能会给你一个提示。你在使用任何 C++ 库吗？

您也可以尝试设置`NSSetUncaughtExceptionHandler`，但我怀疑您无法重现该问题...

（当然，很可能是一些用 C++ 编写的 iOS SDK 框架导致异常，但只是为了检查）......

# linux - 管道命令在一起

> ID：14345269
> 
> 赞同：2
> 
> 时间：2013-01-15T19:21:26.950
> 
> 标签：linux, bash, pipe

我需要将 2 个命令连接在一起，第一个命令将输入​​文件中的 XYZ 替换为“，”，然后我需要进行另一个替换。未成功尝试以下操作。

`tr 'XYZ' ',' <input_file | xargs tr ',' ''`

在第二个命令需要文件输入的情况下，将两个命令连接在一起的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T19:24:14.360

```
tr 'XYZ' ',' <input_file | tr ',' '' 
```

管道符号`|`将第一个命令的标准输出连接到第二个命令的标准输入。`tr`是一个*过滤器*，它是一个程序，它期望其输入出现在标准输入流上，并将其结果输出到标准输出流上。

您可以根据需要将任意数量的这些连接在一起：

```
tr 'A' 'B' < input_file | tr 'C' 'D' | tr 'E' 'F' | tr 'Z' 'Q' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:33:55.867

如果您只想删除字符，则 tr 的 -d 标志将执行此操作，无需替换为`''`

```
tr -d 'xyz' < file 
```

将在标准输出上显示文件的内容，并删除所有 x 的 y 和 z

# c# - 内存映射文件访问被拒绝

> ID：14345274
> 
> 赞同：4
> 
> 时间：2013-01-15T19:22:00.333
> 
> 标签：c#, c#-4.0, service, memory-mapped-files

我正在尝试将一段匆忙拼凑起来的旧代码重构为更优雅的东西。

该项目有两个部分，一个 Windows 服务和一个监视服务活动的表单应用程序。

为了允许这种通信，我决定使用非持久内存映射文件。

以下是旧项目中的工作代码：

```
var security = new MemoryMappedFileSecurity();
security.AddAccessRule(new AccessRule<MemoryMappedFileRights>("everyone", MemoryMappedFileRights.FullControl,AccessControlType.Allow));

file = MemoryMappedFile.CreateOrOpen(@"Global\" + instance, bufferSize,
                     MemoryMappedFileAccess.ReadWrite,
                     MemoryMappedFileOptions.DelayAllocatePages, security,
                     HandleInheritability.Inheritable); 
```

上面的代码在一个由 Service 和 Form 运行的 ctor 中，它们使用完全相同的代码，并且无论哪个创建 mmf 都可以工作。

现在我在一个新项目中有相同的代码，但是如果服务首先创建 mmf，那么表单会收到拒绝访问路径的错误，如果表单创建了 mmf，服务会“打开”他的身边，但两者都看不到所写的信息，这让我相信他们实际上并不是在看同一件事。

此时我不知道从哪里开始调试问题，由于会话 0 隔离，我正在使用安全规则和“全局”命名空间。

我只是无法理解为什么它可以在一个而不是另一个中起作用。

任何关于从哪里去的建议将不胜感激。此外，如果需要更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-15T22:46:20.437

因此，在悲痛欲绝之后，我找到了问题的答案。

显然 Visual Studios 不喜欢我如何将包含该代码的文件添加到我的项目中。我只是做了一个“添加现有”。

为了解决这个问题，我创建了一个新类，并从另一个文件中复制/粘贴了代码：

**现在一切正常。**

# java - 如何在 Java 中检索当前与某个文件关联的应用程序

> ID：14345284
> 
> 赞同：0
> 
> 时间：2013-01-15T19:22:31.983
> 
> 标签：java, file, operating-system

> **可能重复：**
> [如何使用默认关联程序打开文件](https://stackoverflow.com/questions/550329/how-to-open-a-file-with-the-default-associated-program)

如标题所示，如何确定操作系统将使用哪个应用程序打开文件？例如，我想检索应用程序名称及其随机 pdf 文件的路径...是否有独立于操作系统的内部 Java 方法（适用于大多数操作系统）？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:36:28.450

可能不是。对于 Windows，您需要处理[注册表](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144158%28v=vs.85%29.aspx)。[在使用 Java 读取/写入](https://stackoverflow.com/questions/62289/read-write-to-windows-registry-using-java)Windows 注册表中讨论了用 Java 写入 Windows 注册表。

# android - 从 onSizeChanged() 调用 requestLayout() 没有效果？

> ID：14345287
> 
> 赞同：25
> 
> 时间：2013-01-15T19:22:48.090
> 
> 标签：android, android-layout

我有一个在水平滚动窗口中按列显示文本和图像的视图。它重排，因此（至少可能）随着内容的变化而调整自己的大小；当软键盘来来去去并且视图高度发生变化时，它也会重新排列和调整大小（保持大致恒定的区域）。

我发现大多数时候调用[requestLayout()](http://developer.android.com/reference/android/view/View.html#requestLayout%28%29)有效（从某种意义上说，它确实触发了对我的[onMeasure()](http://developer.android.com/reference/android/view/View.html#onMeasure%28int,%20int%29)重载的调用）......但从我的[onSizeChanged()处理程序调用时却](http://developer.android.com/reference/android/view/View.html#onSizeChanged%28int,%20int,%20int,%20int%29)*没有*。

[我可以通过post()](http://developer.android.com/reference/android/view/View.html#post%28java.lang.Runnable%29) ing 一个[Runnable](http://developer.android.com/reference/java/lang/Runnable.html)来解决这个问题，该 Runnable调用`requestLayout()`然后`post()`ed 另一个`Runnable`调用我的代码的代码，该代码需要在`onMeasure()`...之后运行，但这似乎有点脆弱（我不想添加延迟，但是我确实想确保我的第二个`Runnable`确实在 async 之后执行`onMeasure()`）并且可能是因为它通过事件循环进行了太多次，所以屏幕闪烁太多。

是否有某种方式——在一个`onSizeChanged()`——强制一个`onMeasure()`（并且可能是另一个）在下一个[onDraw()](http://developer.android.com/reference/android/view/View.html#onDraw%28android.graphics.Canvas%29)`onSizeChanged()`之前发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-03T03:06:00.750

我建议做一个回电班，也许两个

```
 interface ImGonnaTellClassBThatClassAdidFinished(){

              void ClassHasFinishedProcessing(String YaySuccess);

              void ClassHasFailedProcessing();    

              void SomethingWackaDoodleHappened(String SomeShyte);       
              } 
```

然后在需要它执行功能时重载该类

```
 public class FunctionA{
              ImGonnaTellClassBThatClassAdidFinished someName = new  ImGonnaTellClassBThatClassAdidFinished(){
              @Override
              void ClassHasFinishedProcessing(String YaySuccess){
              //Well I should Call class B with the info then
              //Heres Sting YaySuccess, Use it in the right way
              }
              void ClassHasFailedProcessing(){ 
              //Well I failed and should let someone know
              }
              void SomethingWackaDoodleHappened(String SomeShyte){
              //Well Something else happened and I have some info on it
              }
         //Dont forget to pass it to the class
         ClassB doWorkMeow = new ClassB();
         doWorkMeow.hereYouGo(someName);
     } 
```

确保完成后回电

```
 class ActivityB(){

     public void hereYouGo(ImGonnaTellClassBThatClassAdidFinished finished){
     String itWorked = new String("Hooray");
     finished.ClassHasFinishedProcessing(itWorked);
     }
 } 
```

希望这对您有所帮助，祝您工作顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-16T10:45:03.487

我通过推迟这样的调用解决了这个问题：

```
@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
    post(() -> someMethod());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-02T12:37:15.953

视图实现有一个**onlayout**回调方法，允许您修改子视图和视图在父布局中的定位。

# php - 结合两个查询，列的总和和最大值

> ID：14345290
> 
> 赞同：0
> 
> 时间：2013-01-15T19:22:56.747
> 
> 标签：php, mysql

我想将大约 3 个 MySQL 查询合并为一个，但有些复杂。（以下是我的测试查询和表数据示例）

**表 1：账户**

```
id  |   account | email  | refer
11  |   aasdasd | 5@as.a | 0
12  |   gasd    | 4@ds.a | 11
13  |   xcsxs   | 3@ss.a | 11
14  |   cbasd   | 2@as.a | 11
15  |   asdv    | 1@gs.a | 11
16  |   sdfgx   | 6@hs.a | 8 
```

...

**表2：字符**

```
guid    |account| name | rank   | time
561     |   11  | asda | 945    | 12
562     |   11  | asda | 746    | 19
563     |   11  | asda | 452    | 1
564     |   12  | asda | 123    | 15
565     |   12  | asda | 456    | 18
566     |   13  | asda | 123    | 6
567     |   13  | asda | 789    | 18
568     |   13  | asda | 123    | 17
569     |   15  | asda | 456    | 13
570     |   16  | asda | 123    | 15
571     |   17  | asda | 456    | 16 
```

...
**我的测试查询**：

```
 SELECT id FROM accounts WHERE refer='11' 
```

识别帐户是使用值 '11' 和第二个查询来显示和汇总帐户字符的总时间，其中有参考值 11 ：

```
SELECT a.account, a.email, SUM(c.time) , c.rank
FROM accounts a, characters c
WHERE a.id=c.account
ORDER BY MAX(c.rank) DESC 
```

**我想要什么：**
我想将上述两个查询组合在一起，并得到如下结果：
rank 列是帐户中字符的最高等级，totaltime 是该帐户所有字符时间的总和

```
Account | Email | Rank | TotalTime
gasd    |4@ds.a | 456  | 33
xcsxs   |3@ss.a | 789  | 41
cbasd   |2@as.a |  0   | 0
asdv    |1@gs.a | 456  | 13 
```

我认为 SUM 的第二个查询有问题，我现在添加它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:25:38.703

试试这个

```
 SELECT a.account, a.email,  c.rank,SUM(c.time) totaltime
    FROM accounts a
    INNER JOIN characters c
    ON a.id = c.account

    WHERE a.refer=11
    ORDER BY MAX(c.rank) DESC 
```

编辑 ：

```
 SELECT a.account, a.email,  MAX(c.rank) rank,SUM(c.time) totaltime
    FROM accounts a
     left JOIN characters c
    ON a.id = c.account

    WHERE a.refer=11
  group by a.account
   ORDER BY MAX(c.rank) DESC 
```

[**看演示 SQLFIDDLE**](http://sqlfiddle.com/#!2/4fb76/6)

# java - 越界异常 Java

> ID：14345292
> 
> 赞同：-1
> 
> 时间：2013-01-15T19:23:07.897
> 
> 标签：java, arrays, syntax

此代码有效，但它不断给我数组越界异常。即使我将数组大小更改为 6 并在最后留下 2 个空槽，它也会引发异常。有人可以找出问题吗？

```
 int [] arrayCMYK = new int [4];
  getCMYK(arrayCMYK);

static int getCMYK (int arrayCMYK[])
   {
   Scanner input = new Scanner(System.in);
   //C
   System.out.println("\n\nPlease Enter the 'C' value of the CMYK number.");
   System.out.println("Press Enter after the number has been entered.");
   arrayCMYK[0] = input.nextInt();

   while(arrayCMYK [0] > 100 || arrayCMYK [0] < 0 )
   {
   System.out.println("\n\nError\nPlease Enter the 'C' value of the CMYK number.");
   System.out.println("Press Enter after the number has been entered.");
   arrayCMYK[0] = input.nextInt();
   }
   //M
   System.out.println("\n\nPlease Enter the 'M' value of the CMYK number.");
   System.out.println("Press Enter after the number has been entered.");
   arrayCMYK[1] = input.nextInt();

   while(arrayCMYK [1] > 100 || arrayCMYK [1] < 0 )
   {
   System.out.println("\n\nError\nPlease Enter the 'M' value of the CMYK number.");
   System.out.println("Press Enter after the number has been entered.");
   arrayCMYK[1] = input.nextInt();
   }
   //Y
   System.out.println("\n\nPlease Enter the 'Y' value of the CMYK number.");
   System.out.println("Press Enter after the number has been entered.");
   arrayCMYK[2] = input.nextInt();

   while(arrayCMYK [2] > 100 || arrayCMYK [2] < 0 )
   {
   System.out.println("\n\nError\nPlease Enter the 'Y' value of the CMYK number.");
   System.out.println("Press Enter after the number has been entered.");
   arrayCMYK[2] = input.nextInt();
   }
   // K
   System.out.println("\n\nPlease Enter the 'K' value of the CMYK number.");
   System.out.println("Press Enter after the number has been entered.");
   arrayCMYK[3] = input.nextInt();

   while(arrayCMYK [3] > 100 || arrayCMYK [3] < 0 )
   {
   System.out.println("\n\nError\nPlease Enter the 'K' value of the CMYK number.");
   System.out.println("Press Enter after the number has been entered.");
   arrayCMYK[3] = input.nextInt();
   }
   return arrayCMYK[4]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T19:24:47.347

数组的索引从 0 到 n-1，因此在您定义大小为 4 的数组时，您将拥有索引 0、1、2 和 3。当您 时`return arrayCMYK[4];`，您超出了界限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T19:25:46.937

数组的索引是从零开始的，所以

```
int [] arrayCMYK = new int [4]; 
```

有索引 0 - 3

`arrayCMYK[4]`会给你 ArrayOutOfBoundsException

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T19:25:37.807

这个 4 的索引超出了范围：

```
return arrayCMYK[4]; 
```

您定义的 arrayCMYK 有一个由 4 个整数组成的数组。因此，有效索引为 0、1、2 和 3。您对位置 4 的访问导致数组超出范围异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T19:27:21.777

```
return arrayCMYK[4]; 
```

您声明了一个包含 4 个元素的数组。Java 中的数组是零索引的。

因此，您只能参考 0-3

# ruby - 使用 Ruby curl 检索完整的请求字符串

> ID：14345293
> 
> 赞同：5
> 
> 时间：2013-01-15T19:23:17.123
> 
> 标签：ruby, curb

我打算发送如下请求：

```
c = Curl::Easy.http_post("https://example.com", json_string   
    ) do |curl|
      curl.headers['Accept'] = 'application/json'
      curl.headers['Content-Type'] = 'application/json'
      curl.headers['Api-Version'] = '2.2'
    end 
```

我想记录正在发出的确切 http 请求。有没有办法获取发出的实际请求（基本路径、查询参数、标头和正文）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T19:19:24.210

on_debug[处理程序](http://curb.rubyforge.org/classes/Curl/Easy.html#M000102)以前帮助过我。在您的示例中，您可以尝试：

```
curl.on_debug do |type, data|
  puts type, data
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T09:28:21.213

您可以通过不同的方式获得解决方案：

在您的块内，您可以放置​​：

```
curl.verbose = true   # that prints a detailed output of the connection 
```

或在街区外：

```
c.url  # return the url with queries
c.total_time # retrieve the total time for the prev transfer (name resolving, TCP,...)
c.header_str # return the response header
c.headers # return your call header
c.body_str # return the body of the response 
```

请记住在调用这些方法之前调用 c.perform（如果尚未执行）。

更多选项可以在这里找到：[http ://curb.rubyforge.org/classes/Curl/Easy.html#M000001](http://curb.rubyforge.org/classes/Curl/Easy.html#M000001)

# c# - Socket.SendAsync 什么时候同步完成？

> ID：14345297
> 
> 赞同：2
> 
> 时间：2013-01-15T19:23:35.453
> 
> 标签：c#, sockets, asynchronous

> **可能重复：**
> [尽管有足够的缓冲区空间，但 Socket.BeginSend 并未同步完成](https://stackoverflow.com/questions/14344947/socket-beginsend-does-not-complete-synchronously-despite-plenty-of-buffer-space)

文档[`Socket.SendAsync`](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.sendasync.aspx)说它的返回值表示挂起的异步操作（返回 true）或立即完成的操作（返回 false）。

在我的情况下，返回值始终为 true：所有发送请求在完成时都会导致异步回调，并且`SendAsync`永远不会同步完成。

为什么不直接把数据放到 8KB 的系统发送缓冲区中然后返回呢？它在等什么？

您可以通过简单的测试用例（已剥离清理代码）看到它：

```
TcpListener listener = new TcpListener(IPAddress.Any, 35001);
listener.Start();
Socket client = new Socket(AddressFamily.InterNetwork,
    SocketType.Stream, ProtocolType.Tcp);
client.Connect(new IPEndPoint(IPAddress.Loopback, 35001));
Socket server = listener.AcceptSocket();
SocketAsyncEventArgs asyncArgs = new SocketAsyncEventArgs();
asyncArgs.SetBuffer(new byte[] { 1, 2, 3 }, 0, 3);
bool pending = client.SendAsync(asyncArgs);
Assert.IsFalse(pending); // fails - asynchronous operation is pending 
```

我的动力是表现。我希望大多数发送同步完成，因为它们要快一点。如果没有同步完成，除了已经占用大量 CPU 的应用程序逻辑之外，我还必须每秒处理 200 万次异步回调。

# python - 在 Django 中使用 InlineAdmin 和 post_save 信号创建配置文件模型

> ID：14345303
> 
> 赞同：12
> 
> 时间：2013-01-15T19:23:55.063
> 
> 标签：python, django, django-models, django-admin, django-signals

我创建了一个“配置文件”模型（与用户模型一对一的关系），如[扩展现有用户模型](https://docs.djangoproject.com/en/dev/topics/auth/customizing/#extending-the-existing-user-model)中所述。配置文件模型与另一个模型具有可选的多对一关系：

```
class Profile(models.Model):
    user = models.OneToOneField(User, primary_key=True)
    account = models.ForeignKey(Account, blank=True, null=True, on_delete=models.SET_NULL) 
```

正如那里记录的那样，我还创建了一个内联管理员：

```
class ProfileInline(admin.StackedInline):
    model = Profile
    can_delete = False
    verbose_name_plural = 'profiles'
# UserAdmin and unregister()/register() calls omitted, they are straight copies from the Django docs 
```

现在，如果我`account`在创建用户时没有在管理员中选择一个，则不会创建配置文件模型。因此，我再次按照文档[连接](https://docs.djangoproject.com/en/dev/topics/signals/#connecting-receiver-functions)到[post_save](https://docs.djangoproject.com/en/dev/ref/signals/#post-save)信号：

```
@receiver(post_save, sender=User)
def create_profile_for_new_user(sender, created, instance, **kwargs):
    if created:
        profile = Profile(user=instance)
        profile.save() 
```

只要我*不在*管理员中选择一个，这就可以正常工作`account`，但如果我这样做，我会得到一个`IntegrityError`异常，告诉我`duplicate key value violates unique constraint "app_profile_user_id_key" DETAIL: Key (user_id)=(15) already exists.`

显然，内联管理员试图自己创建`profile`实例，但我的`post_save`信号处理程序当时已经创建了它。

如何解决此问题，同时满足以下所有要求？

1.  无论新用户是如何创建的，之后总会有一个`profile`模型链接到它。
2.  如果用户`account`在创建用户时在 admin 中选择了一个，这`account`将在`profile`之后在新模型上设置。如果不是，则该字段为`null.`

环境：Django 1.5，Python 2.7

相关问题：

*   [创建扩展的用户配置文件](https://stackoverflow.com/questions/1910359/creating-a-extended-user-profile)（类似的症状，但原因却是不同的）

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-08-16T03:05:11.310

正如您自己发现的那样，可以通过设置指向模型`primary_key=True`来避免该问题`OneToOneField`。`User`

这样做的原因似乎很简单。

当您尝试创建模型实例并`pk`在保存之前手动设置它时，Django 将尝试在数据库中找到一条记录`pk`并更新它，而不是盲目地尝试创建新记录。如果不存在，它将按预期创建新记录。

当您将 设置`OneToOneField`为主键并且 Django 管理员将该字段设置为相关`User`模型的 ID 时，这意味着`pk`已经设置，Django 将首先尝试查找现有记录。

`OneToOneField`这是将集合作为主键发生的情况：

1.  Django Admin 创建新`User`实例，没有`id`.
2.  Django Admin 保存`User`实例。
    1.  因为`pk`（在这种情况下`id`）没有设置，Django 尝试创建一个新记录。
    2.  新记录`id`由数据库自动设置。
    3.  该钩子为该实例`post_save`创建一个新实例。`Profile``User`
3.  Django Admin 创建新`Profile`实例，并将其`user`设置为用户的`id`.
4.  Django Admin 保存`Profile`实例。
    1.  因为`pk`（在这种情况下`user`）已经设置，Django 尝试使用该来获取现有记录`pk`。
    2.  Django 找到现有记录并更新它。

如果您没有显式设置主键，Django 会添加一个使用数据库`auto_increment`功能的字段：数据库将 设置`pk`为下一个不存在的最大值。这意味着该字段实际上将留空，除非您手动设置它，因此 Django 将始终尝试插入新记录，从而导致与`OneToOneField`.

这就是导致原始问题的原因：

1.  Django Admin 创建新`User`实例，没有`id`.
2.  Django Admin 保存`User`实例，`post_save`钩子像以前一样创建一个新`Profile`实例。
3.  Django Admin 创建新`Profile`实例，没有`id`（自动添加的`pk`字段）。
4.  Django Admin 保存`Profile`实例。
    1.  因为`pk`（在这种情况下`id`）没有设置，Django 尝试创建一个新记录。
    2.  数据库报告违反了表在`user`字段上的唯一性约束。
    3.  Django 抛出异常。你今天不会去太空。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T19:23:55.063

似乎设置`primary_key=True`将`OneToOneField`配置文件模型连接到`User`模型可以解决此问题。但是，我认为我并不理解这一切的含义以及它为什么会有所帮助。

我将把它留在这里作为提示，但如果这是最好的解决方案并且有人可以提出一个写得很好的解释，我会赞成/接受并可能删除我的。

# jquery - jQuery 找不到合适的选择器

> ID：14345304
> 
> 赞同：0
> 
> 时间：2013-01-15T19:23:55.313
> 
> 标签：jquery, selector

我正在使用 jQuery 将 a 附加（移动）`div`到另一个`div`. 这工作正常，但现在我试图让它成为一个功能，我遇到了一些问题。

我有几个`div`，两个叫`#geregeld`和`#niet_geregeld`。一个叫`#content_vragen`一个`class`叫`.container_vragen`。

`.container_vragen`最初放置在`#content_vragen`. 在中`.container_vragen`是带有此代码的按钮：

```
 $('.submenu').on('click','.groen',function() {
            $(this).closest('.container_vragen').fadeOut(400, function() {
                $(this).closest('.container_vragen').css({overflow : 'hidden', color : 'green'});
                $(this).closest('.container_vragen').appendTo("#geregeld");
                $(this).closest('.container_vragen').fadeIn(400);
            });
        }); 
```

此操作`.container_vragen`将`#geregeld` `div`. 这工作正常。但我希望用户能够将`.container_vragen`背面放入`#content_vragen` `div`，这被证明是一个问题。

我用来做的代码是这样的：

```
function appendToContent_vragen() {
        $(this).closest('.container_vragen').fadeOut(400, function() {
            $(this).closest('.container_vragen').appendTo('#content_vragen');
            $(this).closest('.container_vragen').css({overflow : 'hidden', color : 'black'});
            $(this).closest('.container_vragen').fadeIn(400);
        });
    } 
```

这也有效。问题是在#geregeld div 中选择正确的div。

```
$('#geregeld , #niet_geregeld').on('click',function(){
        $('.container_vragen', this).click(appendToContent_vragen);
    }); 
```

`.container_vragen`如果我使用此代码，我必须在in上单击两次`#geregeld`才能访问该功能`appendToContent_vragen`，显然我希望用户只单击一次。

我正在使用的代码中有一个小的 jsFiddle：http: [//jsfiddle.net/hE7Gm/](http://jsfiddle.net/hE7Gm/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:37:52.507

我被所有的荷兰人弄糊涂了，但在这个街区：

```
$('#geregeld , #niet_geregeld').on('click',function(){
    $('.container_vragen', this).click(appendToContent_vragen);
}); 
```

你可能有两个问题。第一个是内部调用`.click`不会进行点击，而是*注册*一个新的点击处理程序，就像这样`.on('click', ...)`做一样。我不知道这是否是一个真正的问题，因为我不知道该网站真正应该做什么。

第二个问题是设置`this`何时`appendToContent_vragen`被调用。如果，正如我所怀疑的，您只想立即调用该函数（无需再次单击）

```
$('#geregeld, #niet_geregeld').on('click', function() {
     $('.container_vragen', this).each(appendToContent_vragen);
}); 
```

这是有效的，因为将调用与当前元素相等`.each`的提供的函数。`this`

此外，在您的动画函数中，不需要所有这些`.closest()`调用 - 您已经知道传递的元素是 a `.container_vragen`，所以：

```
function appendToContent_vragen() {
    $(this).fadeOut(400, function() {
        $(this).appendTo('#content_vragen')
               .css({overflow : 'hidden', color : 'black'})
               .fadeIn(400);
    });
} 
```

# javascript - 根据下面的颜色反转图像

> ID：14345305
> 
> 赞同：3
> 
> 时间：2013-01-15T19:23:55.827
> 
> 标签：javascript, jquery, css, html

我有一个蒙版 (PNG)，我想反转它下面的颜色。它用于浮动菜单。我不希望它一次全部反转，只是当它根据它下面的部分反转部分时。有可能还是我需要做其他事情？

示例：一半是黑色的，一半是白色的。图像超过了这两半。我希望图像反转它下面的内容，以便您可以看到图像

例子：

![在此处输入图像描述](../Images/edf978b8bc4be6bec97e17f4d7550c9f.png)

我在谷歌上四处搜索，一无所获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:03:20.123

您所描述的是 XNOR 操作：

示例 1：

```
Black: #000000
Black: #000000

Result == Black `xnor` Black
       == Black ^ ~Black
       == #000000 ^ #ffffff
       == #ffffff
       == White 
```

示例 2：

```
Red:   #ff0000
Black: #000000

Result == Red `xnor` Black
       == Red ^ ~Black
       == #ff0000 ^ #ffffff
       == #00ffff
       == Cyan 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:30:31.143

几个月前我为一个网站做了类似的事情，我告诉你，这真的很痛苦......如果你看看[http://www.pixastic.com/lib/docs/](http://www.pixastic.com/lib/docs/)你可能会找到适合您的东西，但需要花费大量时间才能使其正常工作

这个 .js 会将您的 png 转换为画布图像，您可以使用它动态修改颜色

# c++ - 从进程外 COM 服务器返回接口指针的正确方法是什么？

> ID：14345312
> 
> 赞同：3
> 
> 时间：2013-01-15T19:24:22.657
> 
> 标签：c++, com, atl

我有一个进程外 COM 服务器，它有两个 ATL COM 对象。object1 公开了一个接口，该接口在内部创建 object2 并以下列方式返回一个指向它的接口指针：

```
HRESULT CObject1::CreateObject2(IObject2** pIobj2)
{
    CComObject<Object2>* pObj = NULL;

    HRESULT hr = CComObject<Object2>::CreateInstance(&pObj);

    hr = pObj->QueryInterface(IID_IObject2,(void**)pIobj2);

    //Some reason i need to store this pIobj2
    (*pIobj2)->AddRef();

    return hr;
} 
```

Object1 暴露了另一个接口来移除 object2

```
HRESULT CObject1::RemoveObject2(IObject2* pIobj2)
{
    pIobj2->Release(); //This to compensate QI done in CreateObject2

    pIobj2->Release(); //This to compensate addref done to store in create
} 
```

我的要求是客户端不应该`IObject2`在`IObject1::CreateObject2()`. 要销毁 object2 它应该调用`IObject1::RemoveObject2()`。当我执行客户端时，在 RemoveObject2 之后，object2 不会被销毁，但是当我在 RemoveObject2 之后在客户端的 Iobject2 指针上调用 release 时，object2 会被销毁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T17:13:58.783

进程外 COM 对象的生命周期管理比进程内复杂得多。例如，系统必须考虑到对方可能会死掉（例如，如果客户端进程在没有 Release 的情况下死掉，服务器应该清理为一个对象分配的资源）。为此，Microsoft 有一个 DCOM 垃圾收集。

确实有两个 COM 对象，在客户端（代理）和服务器（存根）上。代理维护自己的引用计数，并且您的代码混淆了这个引用计数，因为您在服务器上释放了对象 2 的引用计数 - 不会到达客户端的信息。

我强烈建议你改变你的架构。一方面，COM 契约是释放对象的方式是使用 Release 方法。这就是合同，你的设计改变了它，这就是你让 DCOM 感到困惑的原因。

我认为更好的设计是：

1.  在 Object2 中保留对 Object1 的引用（例如，m_pobj1）
2.  没有 Object1::RemoveObject2。如果您需要做一些工作，请改为使用私有（非 COM）CleanupObject2。
3.  实现Object2::FinalRelease（Object2的清理方法），调用m_pobj1->Cleanup[Object2(this)
4.  请记住，如果您需要在 obj1 中保留指向 obj2 的指针，请确保这些是*弱*引用。那就是 - 只是指针 - 没有添加引用计数。

客户端调用 Object1::CreateObject2 并获得对 obj2 的引用。完成后，它们会调用 obj2->Release()，并清除引用计数，并调用 obj1->CleanupObject2 方法。

# ruby-on-rails-3 - 使用现有 Ruby on Rails 应用程序安装 PostgreSQL

> ID：14345314
> 
> 赞同：1
> 
> 时间：2013-01-15T19:24:25.717
> 
> 标签：ruby-on-rails-3, gem, pg

我在 Mac OSX lion 上，并且是 Ruby on Rails 编程的新手，所以请耐心等待。

我正在尝试开发队友的 Ruby on Rails 应用程序，但它要求我安装了 PostgreSQL。我用 Postgres.app（版本 9.2.2）安装了它。但是，当我运行 rails server 时，出现以下错误。

```
/Users/kevin/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require': dlopen(/Users/kevin/.rvm/gems/ruby-1.9.3-p125/gems/pg-0.14.1/lib/pg_ext.bundle, 9): Library not loaded: /usr/lib/libpq.5.dylib (LoadError)
  Referenced from: /Users/kevin/.rvm/gems/ruby-1.9.3-p125/gems/pg-0.14.1/lib/pg_ext.bundle
  Reason: image not found - /Users/kevin/.rvm/gems/ruby-1.9.3-p125/gems/pg-0.14.1/lib/pg_ext.bundle
from /Users/kevin/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `block in require'
from /Users/kevin/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
from /Users/kevin/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
from /Users/kevin/.rvm/gems/ruby-1.9.3-p125/gems/pg-0.14.1/lib/pg.rb:4:in `<top (required)>'
from /Users/kevin/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `require'
from /Users/kevin/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
from /Users/kevin/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `each'
from /Users/kevin/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `block in require'
from /Users/kevin/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `each'
from /Users/kevin/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `require'
from /Users/kevin/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.2.3/lib/bundler.rb:128:in `require'
from /Users/kevin/Documents/photowhoa/config/application.rb:13:in `<top (required)>'
from /Users/kevin/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.11/lib/rails/commands.rb:53:in `require'
from /Users/kevin/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.11/lib/rails/commands.rb:53:in `block in <top (required)>'
from /Users/kevin/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.11/lib/rails/commands.rb:50:in `tap'
from /Users/kevin/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.11/lib/rails/commands.rb:50:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

我已经尝试卸载并重新安装 PG gem。如果有人可以帮助我，那将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T16:11:44.957

同样的问题。Rake 找不到 Postgres 库。这解决了问题：

> 导出 DYLD_LIBRARY_PATH=/Library/PostgreSQL/9.2/lib

调整 lib 的路径以匹配您的路径。

# sql - 带有日期提取的 Postgres 查询

> ID：14345316
> 
> 赞同：1
> 
> 时间：2013-01-15T19:24:31.130
> 
> 标签：sql, datetime, psql

我有一个名为“run_date”的日期字段的表，我需要在其中执行以下任务：

获取具有（（最新*年份*和*月份*）和较早*日期*）的值。

```
Example:

run_date
2012-12-24
2012-12-31
2013-01-03
2013-01-07
2013-01-14 
```

我需要一个返回“2013-01-03”的查询，因为它遵循上述规则。我最好的尝试是：

```
SELECT
    run_date as val
FROM
    myTable
    WHERE  to_char(run_date, 'MM'::text) = (SELECT MAX(EXTRACT ('MONTH' FROM run_date)) FROM myTable)
    and to_char(run_date, 'YYYY'::text) = (SELECT MAX(EXTRACT ('YEAR' FROM dado_dt_data_rodada)) FROM myTable)

    ORDER BY val ASC LIMIT 1 
```

当然，月份在 1-12 之间循环，所以上面的查询不起作用。我很感激任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:38:15.377

我想你想要最近一个月的最早日期。尝试这个：

```
SELECT run_date as val
FROM myTable
ORDER BY to_char(run_date, 'YYYY-MM') desc, run_date asc
LIMIT 1 
```

# performance - 无法连接到 apache solr - 需要重新启动进程

> ID：14345319
> 
> 赞同：1
> 
> 时间：2013-01-15T19:24:36.527
> 
> 标签：performance, solr

我面临一个奇怪的solr问题。运行 solr 几个小时后，客户端开始报告无法联系 solr 的错误消息，尽管 solr 实例在服务器上已启动。我在网站上看不到任何高流量，这有时是连接拒绝的原因。

solr 重新启动后，此问题得到修复。

知道这里出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:38:31.877

大多数问题的答案都可以在日志中找到。感谢 D_K 提醒我。

严重：java.lang.OutOfMemoryError：Java 堆空间 java.lang.OutOfMemoryError：Java 堆空间

我增加了堆大小来解决这个问题。

```
java -Xms<initial heap size> -Xmx<maximum heap size> 
```

此外，我们通过删除我们不需要保留在 solr 中的不必要信息来减小文档大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:03:07.830

如果您的客户端具有长时间运行的连接但流量较低，则您之间可能有防火墙。防火墙的路由表大小有限，因此它们最终会丢弃一段时间未见的连接的映射。

尝试通过该特定连接每 30 分钟左右发送一次 ping 查询，看看问题是否消失。如果您需要验证它，请在客户端上运行 Wireshark 并查看客户端是否从意外端点（即防火墙）获取 RST（重置）数据包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-01T07:38:20.423

您只需按照此 url ( [https://drupal.stackexchange.com/questions/95897/apache-solr-4-6-0-insta](https://drupal.stackexchange.com/questions/95897/apache-solr-4-6-0-insta) ... ) 中给出的步骤将您的集合添加到 solr 中，然后选择您从在 localhost 或实时站点 ( [http://localhost:8983/solr/](http://localhost:8983/solr/) )上运行的 solr 收集的集合，然后转到架构选项卡。单击架构选项卡，然后您可以在 apachesolr 模块中看到您的架构文件附加。

您现在只需要您的架构 url，它看起来像这样[http://localhost:8983/solr/your_core_name/](http://localhost:8983/solr/your_core_name/)。现在在 apachesolr 模块中添加这个 url。

然后它将显示您的站点已联系您的 drupal 站点中的 apache solr 服务器。

# delphi - 水平或垂直滚动 TImage

> ID：14345323
> 
> 赞同：2
> 
> 时间：2013-01-15T19:24:46.183
> 
> 标签：delphi, pascal, lazarus

我正在为我的学校项目在 Lazarus 写 2-3 Trees 应用程序。

一切都完成了，现在开始玩 GUI（我得到的好 GUI 的分数与我得到的好等的分数相同。插入功能，这很奇怪，但 nvm）。

当我在树中有 10 多个节点时，我的 300*200 图像大小就不够大了。

我想在 TForm 上有一个像 300*200 的 TImage 组件，但实际上它会像 10000 * 10000 并且您可以在其中滚动。

甚至可能吗？

谢谢

**编辑使问题更清楚**

1.  2-3 树是一种数据结构。在纸上绘制以查看其工作原理时，它看起来像这样[http://www.cosc.canterbury.ac.nz/research/RG/alg/tree23.gif](http://www.cosc.canterbury.ac.nz/research/RG/alg/tree23.gif)

2.  作为 lazarus/delphi 中的真正菜鸟（必须在 lazarus 中进行）使用此代码来绘制它（即使我怀疑你需要它来回答我的问题）：

    ```
    procedure TStrom.Paint(Image: TImage); 
    ```

    变量 C：TCanvas；

    程序 Paint1（V：TNode；宽度，X，Y：整数）；开始

    ```
    if V.L <> nil then    //left child
    begin
      C.MoveTo(X, Y);
      C.LineTo(X - Width div 3, Y + 50);
      Paint1(V.L, Width div 3, X - Width div 3, Y + 50);
    end;

    if V.S <> nil then    //middle child 
    begin
      C.MoveTo(X, Y);
      C.LineTo(X + Width div 3, Y + 50);
      Paint1(V.S, Width div 3, X + Width div 3, Y + 50);
    end;

    if V.P <> nil then     //right child
    begin
      C.MoveTo(X, Y);
      C.LineTo(X + Width div 3 + Width div 3, Y + 50);
      Paint1(V.P, Width div 3, X + Width div 3 + Sirka div 3, Y + 50);
    end;

    if V.isLeaf then
    begin
      C.Ellipse(X - 15, Y - 15, X + 15, Y + 15);
      C.TextOut(X - 3, Y - 8, IntToStr(V.Info1));
    end
    else
    begin
      C.Rectangle(X - 15, Y - 15, X + 15, Y + 15);
      C.TextOut(X - 7, Y - 8, IntToStr(V.Info1));
      C.Rectangle(X + 15, Y - 15, X + 50, Y + 15);
      if V.Info2 <> 0 then
        C.TextOut(X + 27, Y - 8, IntToStr(V.Info2));
    end; 
    ```

3.  draw 函数效果很好，但是一些（大部分）高度为 3+ 的节点被绘制在其他节点上，所以看起来很糟糕。该节点位于另一个节点上，并且在它旁边不是 20 像素。

4.  我想我会让树被画得很大的图像，但它会在一个小“面板”中。像这样：TImage 实际上是 1000*1000，但在表格中你只能看到它的一小部分。在这部分中会有水平和垂直滚动条，因此您可以滚动图像并查看部分中绘制的内容。（就像当您滚动浏览网络浏览器以查看页面底部时 :) ）

5.  我们不允许使用任何其他代码，只是内置在 lazarus 组件中。（我们也不允许创建新组件 -> 不知道为什么）

6.  虽然我仍然对如何做到这一点感到好奇，但我的应用程序不再需要它（安装了第二台监视器以查看它是否有帮助，但它不会，所以我想我会深入研究我的绘画方法少量 ：-） ）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T18:04:05.660

您的编辑更清楚地表明您想要绘制一个原理图，就像[您链接到的示例](http://www.cosc.canterbury.ac.nz/research/RG/alg/tree23.gif)中的最后一棵树一样。

从您的代码中，我了解到您正在将所有节点、子节点和叶子绘制到单个画布上，从而生成一个大图像/位图。现在，如何只显示大图像的一部分，旁边有滚动条？

显而易见的选择是将 a`TPaintBox`放在 a 上`TScrollBox`。我不知道 Lazarus 中的默认组件套件，但我希望它们都存在。给画框一个与你的视觉树的边界相等的大小，你就设置好了：滚动条将自动显示。

油漆盒有一个`OnPaint`活动，您可以在其中通过绘画来完成绘画工作`PaintBox.Canvas`。为了优化这一点，您可以将绘图限制为`PaintBox.Canvas.ClipRect`（在滚动框中可见的油漆框部分），但我怀疑这很困难，因为您已经难以计算相邻节点之间的正确距离。（关于那个：我希望总树的最大宽度和高度是总深度的函数，但我很容易弄错。）

如果 Lazarus 没有 a `TPaintBox`，则使用 a`TImage`其中也有一个`Canvas`属性。缺点是`TImage`将所有绘图操作“存储”在一个大的内部位图中，当您的树扩展过多时，这可能会引发内存或资源问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T07:33:49.260

可以将所有图像组合成一张大图像吗？如果是这样，那么也许[这个组件](https://stackoverflow.com/a/11060840/757830)回答了你的问题。

它是 的后代`TGraphicControl`，能够进行动画缩放。通过拖动选择矩形放大图形的一部分，通过双击缩小整个图形。如果您需要帮助更新它以便能够执行平移操作，请拍摄。

# android - 不同设备上的 GCM

> ID：14345328
> 
> 赞同：0
> 
> 时间：2013-01-15T19:24:57.413
> 
> 标签：android, google-cloud-messaging

我正在尝试实现 GCM 功能，但它适用于某些设备，但不适用于其他设备。

```
 GCMRegistrar.checkDevice(this);
    GCMRegistrar.checkManifest(this);
    final String regId = GCMRegistrar.getRegistrationId(this);
    if (regId.equals("")) {

        GCMRegistrar.register(this, "xxxxxx");

    } 
```

这是我的代码，当我在 nexus 中启动应用程序时它工作正常并且应用程序在 GCMRegistrar.register(this, "xxxxxx"); 之后正常调用 GCMBaseIntentService 但是当我在三星 SII 中运行应用程序时，它会调用 GCMRegistrar.register(this, "xxxxxx"); 但从不调用 GCMBaseIntentService，没有任何方法。其他人也一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T03:25:19.050

也许你可以查看catlog，看看是否成功获取了regid。

请参阅以下错误：http: [//developer.android.com/google/gcm/gcm.html#handling_reg](http://developer.android.com/google/gcm/gcm.html#handling_reg)

很可能是由以下原因引起的：

```
W/GoogleLoginService(166): Device has no accounts: sending Intent {act=com.google.android.gsf.LOGIN_ACCOUNTS_MISSING } 
```

由于某些设备在设备中没有 google 帐户同步。如果是这样，请尝试转到设置并设置一个谷歌帐户。

# function - 将函数实现为实用程序的成员

> ID：14345329
> 
> 赞同：0
> 
> 时间：2013-01-15T19:24:58.563
> 
> 标签：function, member, utility

假设我有一个类，其中包含与该类中的另一个成员有关的对象。

让我们使用一个库的例子。如果我有一个书籍数据库，并且我的班级称为 User。用户有一个名为 name 的成员。用户有一个对象（比如一个列表），其中包含从图书馆借来的所有书籍。用成员对象“name”中的书籍填充成员列表“booksBorrowed”的函数应该在哪里？

我是在接受用户类类型的名为 getBooks( ... ) 的类之外实现一个辅助函数，还是应该将该函数作为类的成员来实现？显然，如果我实现为实用程序函数，我显然需要提供包装器来填充用户类中的列表对象。

谢谢，托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:02:00.863

在选择在用户中拥有一个成员列表“booksBorrowed”之前我会仔细考虑，因为很难确保图书馆和所有用户始终保持一致，例如确保同一本书不会同时出现在多个用户的“booksBorrowed”列表中。

我的倾向是在图书馆中有一个“bookList”，其中包含所有书籍（无论是否借用），以及每个 Book 对象中的一个“位置”字段，该字段是对特定用户或图书馆的引用（或在后一种情况下可能为 null）。由于“位置”字段只能有一个值，因此一本书不可能同时位于两个位置。

在任何给定时间，然后可以通过调用库中的成员函数来获取给定用户的“booksBorrowed”列表，该函数返回给定用户的此类列表。

如果由于“booksBorrowed”成员函数每次可能必须搜索数百万本书来创建列表而导致效率问题，则可以通过让 Library 为每个用户更新 Library 对象中的“booksBorrowed”列表进行优化，每次书被借或归还。但是，这不会改变我概述的用户界面，因此我倾向于不进行此优化，直到性能考虑表明需要它。

# ruby-on-rails - 在视图中订购 has_many 列表

> ID：14345330
> 
> 赞同：0
> 
> 时间：2013-01-15T19:25:15.967
> 
> 标签：ruby-on-rails, ruby, rails-activerecord, acts-as-list

我有一个名为 Person 的模型，用户为其选择了五个个性特征。但是，他们选择它们的顺序很重要（他们选择描述性最强到描述性最差）。

我知道如何创建一个带有毒药的连接表并以这种方式进行排序。我也在使用acts_as_list。

但我似乎找不到任何帮助，如何为我的应用程序的用户创建一种设置特征顺序的方法。那就是我想在 HTML 中说五个选择框，让他们选择每一个，并使用 jQuery UI Sortable 之类的东西，让他们可以随意移动它们。

这是我的模型的基本概念（为了获得概念而进行了简化）。

```
class Person < ActiveRecord::Base
  has_many :personalizations
  has_many :traits, :through => :personalizations, :order => 'personalizations.position'
end

class Personalization < ActiveRecord::Base
  belongs_to :person
  belongs_to :trait
end

class Trait  < ActiveRecord::Base
  has_many :persons
  has_many :persons, :through => :personalizations
end 
```

我只是不知道如何在我的视图/控制器中进行定位，以便在提交表单时知道哪个特征在列表中的哪个位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T05:04:35.773

经过大量研究后，我将发布我的结果以帮助其他人封装他们需要通过多对多关系将记录列表附加到模型，并且能够对视图中的选择进行排序。

Ryan Bates 对现有记录进行排序有一个很棒的截屏视频：[http ://railscasts.com/episodes/147-sortable-lists-revised](http://railscasts.com/episodes/147-sortable-lists-revised)

但是在我的情况下，我需要在我的 Person 模型存在之前进行排序。

我可以使用 builder 轻松添加关联字段，或者 simple_form_for 使这更加容易。结果将是 params 包含每个关联字段的属性 trait_ids（因为我的 Person has_many Traits）：

```
#view code (very basic example)
<%= simple_form_for @character do |f| %>
  <%= (1..5).each do |i| %>
    <%= f.association :traits %>
  <% end %>
<% end %>

#yaml debug output
trait_ids:
  - ''
  - '1'
  - ''
  - '2'
  - ''
  - '3'
  - ''
  - '4'
  - ''
  - '5' 
```

那么问题是在提交表单时是否会遵守 DOM 中元素的顺序。特别是如果我实现 jQuery UI 可拖动？我发现这个[帖子表单中的数据顺序与网络表单中的数据顺序相同吗？](https://stackoverflow.com/questions/2565938/will-data-order-in-post-form-be-the-same-to-it-in-web-form)我同意这个答案。正如我所怀疑的那样，假设订单将永远保留，风险太大。即使它现在适用于所有浏览器，也可能导致错误。

因此，经过仔细研究，我得出结论 jQuery 是一个很好的解决方案。与 rails 中的虚拟属性一起处理自定义输出。经过大量测试后，我放弃了使用acts_as_list 来做我想做的事情。

稍微解释一下这个发布的解决方案。本质上，我缓存了对虚拟属性的更改。然后，如果设置了缓存（进行了更改），我验证他们选择了五个特征。出于我的目的，我保留了无效/空选项，以便如果在返回视图时验证失败，则顺序将保持不变（例如，如果他们跳过了中间选择框）。

然后 after_save 调用将这些更改添加到数据库中。after_save 中的任何错误仍然包含在事务中，因此如果任何部分出错，则不会进行任何更改。因此，最简单的做法是删除所有捐赠并保存新捐赠（这里可能有更好的选择，不确定）。

```
class Person < ActiveRecord::Base
  attr_accessible :name, :ordered_traits

  has_many :endowments
  has_many :traits, :through => :endowments, :order => "endowments.position"

  validate :verify_list_of_traits

  after_save :save_endowments

  def verify_list_of_traits
    return true if @trait_cache.nil?

    check_list = @trait_cache.compact

    if check_list.nil? or check_list.size != 5
      errors.add(:ordered_traits, 'must select five traits')
    elsif check_list.uniq{|trait| trait.id}.size != 5
      errors.add(:ordered_traits, 'traits must be unique')
    end
  end

  def ordered_traits
    list = @trait_cache unless @trait_cache.nil?
    list ||= self.traits
    #preserve the nil (invalid) values with '-1' placeholders
    list.map {|trait| trait.nil?? '-1' : trait.id }.join(",")
  end

  def ordered_traits=(val)
    @trait_cache = ids.split(',').map { |id| Trait.find_by_id(id) }    
  end

  def save_endowments
    return if @trait_cache.nil?
    self.endowments.each { |t| t.destroy }
    i = 1
    for new_trait in @trait_cache
      self.endowments.create!(:trait => new_trait, :position => i)
      i += 1
    end
  end 
```

然后用简单的形式添加一个隐藏字段

```
 <%= f.hidden :ordered_traits %> 
```

我使用 jQuery 将错误和提示范围移动到我构建的五个选择框的 div 内的正确位置。然后我在表单上有一个提交事件处理程序，并按照它们在 DOM 中的顺序将五个文本框的选择转换为逗号分隔的数字数组，并在隐藏字段上设置值。

为了完整起见，这里是其他类：

```
class Trait < ActiveRecord::Base
  attr_accessible :title
  has_many :endowments
  has_many :people, :through => :endowments
end

class Endowment < ActiveRecord::Base
  attr_accessible :person, :trait, :position
  belongs_to :person
  belongs_to :trait
end 
```

# java - 捏放大min3D

> ID：14345340
> 
> 赞同：3
> 
> 时间：2013-01-15T19:25:44.383
> 
> 标签：java, android, pinchzoom, min3d

我正在尝试添加捏合以放大我的 3D 视图，但它不起作用。旋转有效，但不能缩放。

我也尝试过 ACTION_POINTER1_UP/DOWN，但这是失败的

这是我的代码：

```
@Override
public boolean onTouchEvent(MotionEvent event) {

     if(event.getPointerCount() > 1)
        {
            int x1 = (int) event.getX(0);
            int y1 = (int) event.getY(0);
            int x2 = (int) event.getX(1);
            int y2 = (int) event.getY(1);
            d = Math.sqrt((x1-x2)^2+(y1-y2)^2);
        }

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        rotating = true;
        break;
    case MotionEvent.ACTION_UP:
        rotating = true;
        prevSwipeY = swipeY = 0; // for the Y axis
        prevSwipeX = swipeX = 0; // for the X axis
        break;

    case MotionEvent.ACTION_MOVE:
        float directionY = (prevSwipeY - event.getX()) * -1;
        float directionX = (prevSwipeX - event.getY()) * -1;
        swipeY = (int) (directionY * ROTATION_SPEED);
        swipeX = (int) (directionX * ROTATION_SPEED);
        if(event.getPointerCount() > 1)
        {
            int x1 = (int) event.getX(0);
            int y1 = (int) event.getY(0);
            int x2 = (int) event.getX(1);
            int y2 = (int) event.getY(1);
            d2 = Math.sqrt((x1-x2)^2+(y1-y2)^2);
            r = d2/d;
        }
        break;

    }

    // Camera pivot point is different
    prevSwipeY = (int) event.getX();
    prevSwipeX = (int) event.getY();
    return super.onTouchEvent(event);
}

@Override
public void updateScene() {
    if (faceObject3D != null) { // If an object is loaded
        if (swipeY != 0) // and we did swiped in the correct direction
            faceObject3D.rotation().y += swipeY;

        swipeY = 0; // Reset the pointer

        if (swipeX != 0) // and we did swiped in the correct direction
            faceObject3D.rotation().x += swipeX;

        swipeX = 0; // Reset the pointer

        if(r != 0) {faceObject3D.scale().x = faceObject3D.scale().y = faceObject3D.scale().z = (float) (r*2.0f);};

    }
} 
```

你知道缺少什么吗？

# extjs - 使用 extjs-rails gem 更改 extjs 主题

> ID：14345342
> 
> 赞同：1
> 
> 时间：2013-01-15T19:25:47.097
> 
> 标签：extjs, gem, themes, extjs4.1

我在我的 rails 应用程序中使用 extjs-rails gem [http://rubygems.org/gems/extjs-rails](http://rubygems.org/gems/extjs-rails)。

现在我想使用默认情况下 Extjs 附带的灰色主题。

关于如何做到这一点的一些想法？

谢谢。

# objective-c - 从 applicationDidEnterBackground 安排 IconBadgeNumber 的每日更新

> ID：14345343
> 
> 赞同：0
> 
> 时间：2013-01-15T19:25:52.593
> 
> 标签：objective-c, xcode, apple-push-notifications, uilocalnotification, badge

我已经能够为我的 iPhone 应用**程序设置一个应用程序徽章编号**，并在用户与我的应用程序交互后更新它：

```
[[UIApplication sharedApplication ] setApplicationIconBadgeNumber:currNrOfNotif]; 
```

*但我不会***在后台模式下**（即从内部`applicationDidEnterBackground`或类似模式）发生此过程。我希望这个过程**安排在每天晚上 00:00 00:00 运行**并在 setApplicationIconBadgeNumber 中获取当前数字并将**其递减 -1**。换句话说，不需要推送通知（或任何服务器类型），因为唯一会发生的是徽章编号值的更改。

首先，**我如何安排在应用程序处于后台模式时发生的活动**，而不使用远程服务器推送通知？

其次，**我如何获取或获取当前的应用程序通知徽章值并将其减一**？

[在这篇文章](https://stackoverflow.com/questions/5962054/iphone-incrementing-the-application-badge-through-a-local-notification)中，有些人认为即使使用本地通知并且需要服务器端推送也无法完成。然而，一个人**说可以通过**在午夜安排它来完成。谁是对的，有人可以提出解决方案吗？

# c# - 具有引用类型的数组赋值？

> ID：14345348
> 
> 赞同：0
> 
> 时间：2013-01-15T19:26:00.530
> 
> 标签：c#, arrays, ado.net

假设我有一些已知的库来从 .xls 文件加载数据并返回一个 DataTable，其中填充了任何 excel 工作簿中第一张工作表中的数据。还有一个 Log 函数，可以在没有工作调试器的情况下打印出消息。

```
DataTable dtFoo = null;
DataTable dtBar = null;
DataTable dtChaz = null;

String[] files = new String[]{ "file1.xls", "file2.xls", "file2.xls" };
DataTable[] dts = new DataTable[] { dtFoo, dtBar, dtChaz };

for(int i = 0; i < 3; i++)
{
    dts[i] = SomeLibrary.LoadFromFile(files[i]); //Returns a new DataTable
    Log((dts[i] == null) + " " + dts[i].Rows.Count)
}

Log((dts[0] == null) + " " + (dtFoo == null));
Log((dts[1] == null) + " " + (dtBar == null));
Log((dts[2] == null) + " " + (dtChaz == null)); 
```

`Log Output:`

```
 False 40
  False 455
  False 34
  False True
  False True
  False True 
```

显然，在使用我无法弄清楚的引用类型变量时，我遗漏了一些重要的东西。为什么循环完成后我的 DataTable 变量仍然为空？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T19:28:57.727

这一行：

```
DataTable[] dts = new DataTable[] { dtFoo, dtBar, dtChaz }; 
```

... 不会像您认为的那样将变量与数组元素混为一谈*。*它只是创建一个新数组，并将初始*值*`dtFoo`分别设置为,`dtBar`和的值`dtChaz`（所有这些都为空）。之后数组和变量完全分开。

如果您想稍后设置变量，您将需要：

```
dtFoo = dts[0];
dtBar = dts[1];
dtChaz = dts[2]; 
```

当然，这不一定是`DataTable`s。简单的例子：

```
string x = "initial";
string[] array = new string[] { x };
array[0] = "modified";

Console.WriteLine(x); // "initial"
x = array[0];
Console.WriteLine(x); // "modified" 
```

请注意，这是当您更改*数组元素的值时*。相反，如果您修改该值所指的对象，那就是另一回事了：

```
StringBuilder builder = new StringBuilder("123");
StringBuilder[] array = new StringBuilder[] { builder };
builder[0].Append("456");
Console.WriteLine(builder); // 123456 
```

有关更多详细信息，请参阅我关于[引用类型和值类型的文章。](http://pobox.com/~skeet/csharp/references.html)基本上，您需要区分*引用*和它们引用的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T19:30:22.680

作为建议，您可以代替您尝试过的代码

```
DataSet ds = new DataSet();
ds.Tables.Add(dtFoo);
ds.Tables.Add(dtBar);
ds.Tables.Add(dtChaz ); 
```

将表添加到数据集而不是创建数据表数组

所以修改后的代码将是

```
DataSet ds = new DataSet();
for(int i = 0; i < 3; i++)
{
    ds.Tables.Add(SomeLibrary.LoadFromFile(files[i])); //Returns a new DataTable
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T19:32:37.000

您需要添加行

```
dtFoo = dts[0];
dtBar = dts[1];
dtChaz = dts[2]; 
```

在日志行之前。

init 语句对赋值语句没有影响。

# phpmyadmin - 试图在 phpmyadmin 中重命名列，出现“未知列”错误

> ID：14345351
> 
> 赞同：2
> 
> 时间：2013-01-15T19:26:12.170
> 
> 标签：phpmyadmin

我正在尝试重命名 phpmyadmin 中的列。该列称为`DeathDate`。它是一个`varchar(11)`.

我单击“结构”选项卡，然后单击该`DeathDate`字段的“更改”选项。“更改”窗口出现。我`DeathDate`在“名称”字段中输入了一个名称。

当我单击“保存”按钮时，我收到以下消息：

> 1054 - 'tblName' 中的未知列 'Death(line break)Date'

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-10T12:41:49.977

在 SQL 命令中写下这段代码

```
ALTER TABLE TABLE_NAME CHANGE OLD_COLUMN_NAME NEW_COLUMN_NAME COLUMN_TYPE; 
```

在哪里

`TABLE_NAME`是您要在其中修改的表名

`OLD_COLUMN_NAME` 是您要更改前列的名称（死亡日期）

```
NEW_COLUMN_NAME is name of new column name ex (DDate)

COLUMN_TYPE is column type  ex (date , text  ) whatever your column type 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:32:24.567

`line break`不是允许的字符。

查看允许字符的[文档。](http://dev.mysql.com/doc/refman/5.0/en/identifiers.html)

如果这不起作用，请尝试使用`ALTER`：

```
ALTER TABLE tblName CHANGE DeathDate DDate varchar(11) 
```

# html - Jquery Mobile ListView 已选项目 CSS 颜色

> ID：14345355
> 
> 赞同：1
> 
> 时间：2013-01-15T19:26:29.353
> 
> 标签：html, css, jquery-mobile

我正在动态创建一个列表。我使用 onclick 事件来调用 javascript 并且这有效，我不能做的是从列表中获取选定的项目以具有不同的颜色。

这是代码示例：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>`enter code here`
    <script src="scripts/jquery.js" type="text/javascript"></script>
    <link href="stylesheets/jquery.mobile.css" rel="stylesheet" type="text/css" />
    <script src="scripts/jquery.mobile.js" type="text/javascript"></script>
    <script>

        $(document).ready(function () {
            var $al = $("#mylist");
            $al.append("<li ><a id='a1' href=\"#\" rel=\"external\" onclick=\"test('selected test 1'); return false\">TEST 1</a></li>");
            $al.append("<li ><a id='a2' href=\"#\" rel=\"external\" onclick=\"test('seleced test 2'); return false\">TEST 2</a></li>");
        });

        function test(text) {
            $("#divtest").html(text);
        } 

        $("#myList li a").click(function () {
                $('#myList li > div').each(function (index) {
                    $(this).removeClass("ui-btn-active");
                });
                var p = $(this).parent();
                $(p).addClass('ui-btn-active');
            });

    </script>
</head>
<body>
    <div data-role="page" id="profile">
        <div data-role="header" data-position="fixed">
        </div>
        <!-- /header -->
        <div data-role="content">
            <ul id="mylist" data-role="listview" data-inset="true">
            </ul>
        </div>
        <div id='divtest'>

        </div>
        <!--/content-->
        <div data-role="footer" data-position="fixed">
        </div>
        <!--/footer-->
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:31:20.500

为此，您需要从列表项中调用 .addClass 和 .removeClass。根据您想要的颜色，您必须删除/添加某些类。对于初学者，您可以将类 ui-btn-active 添加到项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:38:04.847

您只需将**data-theme='a'**属性添加到 li 元素并选择所需的模板。

关于这个属性的更多信息：http: [//jquerymobile.com/demos/1.2.0/docs/content/content-themes.html](http://jquerymobile.com/demos/1.2.0/docs/content/content-themes.html)

您还需要执行**.listview('refresh');** 重新设置列表视图的样式。

这是您的代码中的工作示例：http: [//jsfiddle.net/Gajotres/z5Vhm/](http://jsfiddle.net/Gajotres/z5Vhm/)

这是你的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>`enter code here`
    <link href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" rel="stylesheet" type="text/css" />
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js" type="text/javascript"></script>
    <script>

        $(document).ready(function () {
            var $al = $("#mylist");
            $al.append("<li data-theme='a'><a id='a1' href=\"#\" rel=\"external\" onclick=\"test('selected test 1'); return false\">TEST 1</a></li>");
            $al.append("<li data-theme='b'><a id='a2' href=\"#\" rel=\"external\" onclick=\"test('seleced test 2'); return false\" >TEST 2</a></li>");
            $al.listview('refresh');
        });

        function test(text) {
            $("#divtest").html(text);
        } 

    </script>
</head>
<body>
    <div data-role="page" id="profile">
        <div data-role="header" data-position="fixed">
        </div>
        <!-- /header -->
        <div data-role="content">
            <ul id="mylist" data-role="listview" data-inset="true">
            </ul>
        </div>
        <div id='divtest'>

        </div>
        <!--/content-->
        <div data-role="footer" data-position="fixed">
        </div>
        <!--/footer-->
    </div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T19:38:33.270

您需要找到当前超链接的父 Li 并将背景颜色应用于父级：

```
$('a').click( function() {
  $(this).parent().css({'background-color' : 'red' });
}); 
```

检查这个jsFiddle：http: [//jsfiddle.net/p42SX/3/](http://jsfiddle.net/p42SX/3/)

# ruby - rbenv 不使用垫片 Ubuntu 12.10

> ID：14345366
> 
> 赞同：2
> 
> 时间：2013-01-15T19:27:34.243
> 
> 标签：ruby, ubuntu, rbenv

我正在使用 Ubuntu 12.10，我正在尝试使用 rbenv 和 bundler 启动并运行我的项目。

我已经从 apt 存储库成功安装了 rbenv，并使用 ruby​​-build 安装了所需的 ruby​​ 版本。

当我运行时，我得到了我认为 apt 存储库安装附带`which gem`的全局变量。`/usr/bin/gem`但是，当我运行 rbenv which gem 时，我得到了正确的本地 gem`/home/kasuko/.rbenv/versions/1.9.2-p290/bin/gem`

但是，当我运行时，`gem install bundler`我收到“权限被拒绝 - /var/lib/gems”的权限错误，这让我相信它正在使用全局 gem。

所以当我运行`/home/kasuko/.rbenv/versions/1.9.2-p290/bin/gem install bundler`它成功安装捆绑器

我确实有 rbenv init 行，`~/.zshrc.local (which is sourced in my ~/.zshrc)`并且我得到了更新的路径 `"/home/kasuko/.rbenv/shims:/home/kasuko/.bin:/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games"`，所以我很确定它安装正确。

那么为什么不使用我的 rbenv 垫片呢？

谢谢霞子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T23:05:15.110

如果您不确定哪个`gem`正在执行，请尝试`gem env`哪个会显示有关您正在运行的版本的有用信息`gem`，例如 ruby​​gems 版本、相应的 ruby​​ 可执行文件、gem 路径和其他好东西。

您的 PATH 似乎是正确的。尝试运行`hash -r`以清除 shell 的可执行路径缓存以防万一。

完成此操作后，`which gem`应该给您`/home/kasuko/.rbenv/shims/gem`，这表明它推迟到 rbenv 来确定要运行的实际可执行文件。

然后您可能需要运行`rbenv rehash`. 每次安装带有可执行文件（如 bundler、rake 等）的新 gem 时，都应该运行它。它将更新所有垫片以指向正确的可执行文件。

# haskell - haskell 中的布尔逻辑和类型

> ID：14345370
> 
> 赞同：3
> 
> 时间：2013-01-15T19:27:45.520
> 
> 标签：haskell, types

我目前正在为大学学习 Haskell。给定以下haskell代码：

```
true::t -> t1 -> t
true = (\x y -> x)

false::t -> t1 -> t1
false = (\x y -> y)

-- Implication
(==>) = (\x y -> x y true) 
```

任务是确定函数的类型`(==>)`。GHCi 说是`(==>) :: (t1 -> (t2 -> t3 -> t2) -> t) -> t1 -> t`。

我可以看到评估顺序如下（因为类型保持不变）：

```
(==>) = (\x y -> (x y) true) 
```

所以函数`true`ist 参数`(x y)`。

谁能解释为什么结果类型 t 绑定到第一个参数的结果以及 GHCi 以哪种方式确定 t 的类型`(==>)`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T19:45:58.030

首先，为了更好地概述，

```
type True t f = t -> f -> t
type False t f = t -> f -> f 
```

让我们称其为蕴含的结果`r`，那么我们有，在`\x y -> x y true :: r`，

```
x y :: True t f -> r 
```

所以`x :: y -> True t f -> r`，因此

```
(==>) :: (y -> True t f -> r) -> y -> r 
```

再次扩大`True`，是

```
(==>) :: (y -> (t->f->t) -> r) -> y -> r 
```

# matlab - 如何使用matlab求解复杂的方程组？

> ID：14345375
> 
> 赞同：0
> 
> 时间：2013-01-15T19:28:17.367
> 
> 标签：matlab, wifi

我必须使用 matlab 分析 802.11 饱和吞吐量，这是我的问题。我正在尝试使用求解函数求解下面的参数方程（参数为 m，W，a），我得到

> 警告：找不到显式解决方案

![在此处输入图像描述](../Images/8c4f33676f4ed6f347f5f70127f739a8.png)

![在此处输入图像描述](../Images/77f8f6ab4ded34d08244d80aeb5633c6.png)

如何使用 matlab 求解上述方程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T23:07:10.970

我猜您正在尝试为`tau`和`p`使用符号数学找到分析解决方案。除非您对您的参数非常幸运（例如 m=1），否则不会有解析解。

`tau`如果您对和的数值感兴趣`p`，我建议您手动代`p`入第一个方程，然后`tau-bigFraction=0`使用例如求解形式方程`fzero`。

以下是您如何使用作为参数`fzero`来求解一个简单的方程。`kx=exp(-x)``k`

```
k = 5; %# set a value for k
x = fzero(@(x)k*x-exp(-x),0); %# initial guess: x=0 
```

# java - GWT 2.5 导致服务器 (GF 2.1.1) 挂起 - 多个 RPC 连接处于 CLOSE_WAIT 状态

> ID：14345378
> 
> 赞同：0
> 
> 时间：2013-01-15T19:28:41.713
> 
> 标签：java, gwt, gwt-2.5, glassfish-2.x

库升级（GWT 2.4.0 -> GWT 2.5.0）是必要的。不幸的是，较新的版本似乎会导致更多的问题，而不是它实际解决的问题。

许多“死”连接（数百个）在服务器上累积，直到它停止响应。`netstat -na`给出以下结果：

```
...
tcp      121      0 10.0.0.5:8181       XXX.XXX.XXX.XXX:4609      CLOSE_WAIT
... 
```

它仅发生在 GWT 2.5.0 上，而没有发生在 GWT 2.4.0 上。代码没有其他变化。不幸的是，我无法在本地重现该问题。在我的本地环境和服务器机器上都使用了 GlassFish 2.1.1（我现在坚持使用它，但是如果该问题与应用程序服务器有关，那么知道它仍然很高兴）。服务器上的操作系统是 Debian Squeeze 64 位，本地我使用 Wheezy 32 位。

在绝望中，我使用以下代码添加了过滤器：`httpServletResponse.setHeader("Connection", "close");`但没有结果。

您是否有任何想法如何解决该问题或如何跟踪哪些连接导致问题以及何时导致问题？谢谢！

# php - 如何跟踪用户在他们的搜索结果中的位置，以便我们可以将他们带回到他们离开的地方？

> ID：14345379
> 
> 赞同：0
> 
> 时间：2013-01-15T19:28:42.697
> 
> 标签：php, mysql, session, search, back

在我的一个 PHP 网站上，我们提供用户可以浏览的多页内部搜索结果。用户可以单击任何搜索结果并查看该个人列表并对该列表执行操作。

我想做的是跟踪他们在搜索结果中的位置，以便当他们对列表执行操作时，我们可以自动将他们带回原来的位置，以便他们可以继续浏览他们离开的地方。

最好的方法是什么？请注意，搜索结果不是到达列表的唯一方法，因为还有其他方法可以浏览和查找列表，因此该解决方案显然应该仅当且仅当用户来自实际搜索。

我认为将它们所在页面的 URL 存储在`Session`变量中是可行的方法，但我不确定最好的方法是什么，如何仅在搜索时更新值结果，采取行动后如何删除该值等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:32:58.047

简要地：

处理来自用户的列表页面或搜索请求。

1.  店铺网址`$_SESSION['url'] = $requestUrl;`
2.  如果是搜索请求，则存储搜索变量： `$_SESSION['search_term'] = $searchTerm; $_SESSION['num_results'] = $num; $_SESSION['page'] = $page;`
3.  向用户发送响应。

处理来自用户的下一个（个人）列表请求：

1.  查找会话变量
2.  使用这些会话变量制作一个“返回列表”网址并嵌入到响应中。您可以通过存储的 url 或通过检查是否未在会话上设置搜索词来区分搜索或页面（在这种情况下，如果不是搜索，请取消设置上述请求中的搜索词）。
3.  发送响应。

# php - 在php中将foreach循环添加到数组值？

> ID：14345381
> 
> 赞同：0
> 
> 时间：2013-01-15T19:28:50.070
> 
> 标签：php

我正在尝试将 foreach 添加到 php 中的数组中（它是模板语言的一部分）

```
array('key' => 'some value' . 
foreach ($contents as $content) {
  echo '<li>';
  echo $content['message'];
  echo '</li>';
}; .
'more data',
) 
```

这是错误：解析错误：语法错误，第 62 行 /home/zenconomy/deploy/trunk.zenconomy.se/webroot/zenconomy/controllers/public/om.php 中的意外 T_FOREACH

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T19:32:36.223

您不能“将 foreach 循环放入数组中”。您最好的选择是首先生成值，然后将其放入数组中。

```
$value = '';
foreach($contents as $content) {
    $value .= '<li>' . $content['message'] . '</li>';
}
$array = array('key' => 'some value ' . $value . ' more data'); 
```

# c# - NumberDecimalSeparator 未显示 Windows 8 中的数字格式中指定的正确值

> ID：14345387
> 
> 赞同：1
> 
> 时间：2013-01-15T19:29:06.340
> 
> 标签：c#, .net, cultureinfo

我有以下问题让我很困惑。在此代码之前在 Windows 7 上运行后，我最近安装了一台新的 Windows 8 机器。（不确定它是否相关）

```
Console.Write(System.Globalization.NumberFormatInfo.CurrentInfo.NumberDecimalSeparator); 
```

运行代码检查当前文化信息的 NumberDecimalSeparator 时，它显示逗号而不是小数点。

在 Windows 设置中查看数字格式屏幕时，它肯定设置为小数位。

这可能是 .Net 4.5 和 Windows 8 的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:54:48.513

我已经让这个工作了。

我将应用程序池标识设置为 NetworkService，它现在可以工作了。然而，在另一台有同样问题的机器上，我必须将它设置为 LocalSystem 才能让它工作，所以我不太确定这是否是一个正确的解决方案。

# python - 在 Python 中将字典与自身进行比较

> ID：14345397
> 
> 赞同：0
> 
> 时间：2013-01-15T19:29:50.903
> 
> 标签：python

我想将 Python 字典与其自身进行比较。例如：

```
for key1 in d:
    for key2 in d:
        if key1 == key2:
            continue
        compare(d[key1],d[key2]) 
```

除了我将 key1 与 key 2 进行比较，然后再将其相反（key2 与 key1）进行比较，上述方法将起作用。第二个for循环的范围应该真正在key1之后开始，以避免重复比较。怎么可能呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T19:31:18.133

我认为这[`itertools.combinations`](http://docs.python.org/2/library/itertools.html#itertools.combinations)在这里会有所帮助

```
>>> import itertools
>>> d = dict.fromkeys(range(5),0)
>>> list(itertools.combinations(d,2))
[(0, 1), (0, 2), (0, 3), (0, 4), (1, 2), (1, 3), (1, 4), (2, 3), (2, 4), (3, 4)] 
```

所以，对于你的情况，你想要：

```
for key1,key2 in itertools.combinations(d,2):
    compare(d[key1],d[key2]) 
```

这是一个愚蠢的例子，我构建了一个棕色眼睛（或者我想是头发......）的人的列表：

```
>>> d = dict.fromkeys(["Jon","Jane","Bob","Jim","Janice"],"blue")
>>> d["Jim"] = "Brown"
>>> d["Jane"] = "Brown"
>>> d["Bob"] = "Brown"
>>> [ (x,y) for (x,y) in itertools.combinations(d,2) if d[x]=="Brown" and d[y]=="Brown" ]
[('Jane', 'Bob'), ('Jane', 'Jim'), ('Bob', 'Jim')] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T19:55:43.100

实际上你不需要钥匙来尊重字典。正如@mgilson 所建议的，您可以使用 itertools.combinations 直接比较字典的值

```
>>> from itertools import combinations
>>> d = {random.randint(1,100):i for i in range(10)}
>>> list(combinations(d.values(), 2))
[(7, 4), (7, 2), (7, 3), (7, 1), (7, 0), (7, 8), (7, 9), (7, 5), (7, 6), (4, 2), (4, 3), (4, 1), (4, 0), (4, 8), (4, 9), (4, 5), (4, 6), (2, 3), (2, 1), (2, 0), (2, 8), (2, 9), (2, 5), (2, 6), (3, 1), (3, 0), (3, 8), (3, 9), (3, 5), (3, 6), (1, 0), (1, 8), (1, 9), (1, 5), (1, 6), (0, 8), (0, 9), (0, 5), (0, 6), (8, 9), (8, 5), (8, 6), (9, 5), (9, 6), (5, 6)]
>>> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-30T12:16:02.457

使用`itertools.combinations`显然是最好的答案。但即使是问题的原始代码也只需要稍作修改即可完成预期的工作：

```
for key1 in d:
    for key2 in d:
        if key1 < key2:
            compare(d[key1],d[key2]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T20:05:23.917

如果您想坚持使用嵌套的 for 循环，那么以下方法可以解决问题：

```
d = dict(a=1,b=2,c=3,d=4)
k = d.keys()
l = len(k)

for i in range(l):
    for j in range(i+1,l):
        print d[k[i]] == d[k[j]] 
```

# python - Mayavi 颜色图适用于 imshow 但不适用于 image_plane_widget

> ID：14345400
> 
> 赞同：2
> 
> 时间：2013-01-15T19:30:05.603
> 
> 标签：python, vtk, mayavi

我使用 TraitsUI 和 Mayavi 编写了一些代码。我有两个矩阵：

1.  NxN 称为 imageArray2Dmesh - “数据”的列密度。
2.  NxNxN 称为数据。

当我使用 imshow 进行 2D 渲染时，我得到以下信息：

```
self.scene.mlab.clf()   
self.scene.mlab.imshow(np.log10(self.imageArray2Dmesh),colormap=self.possible_colormap) 
```

![在此处输入图像描述](../Images/8dbe0ce7f7b15cd1e740584adbd72c28.png)

但是当我做横截面版本时，我得到以下信息：

```
 self.scene.mlab.clf()
            self.scene.mlab.pipeline.image_plane_widget(self.scene.mlab.pipeline.scalar_field(np.log10(self.data)),
            plane_orientation='x_axes'
            colormap=self.possible_colormap)
            self.scene.mlab.pipeline.image_plane_widget(self.scene.mlab.pipeline.scalar_field(np.log10(self.data)),
            plane_orientation='y_axes',
            colormap=self.possible_colormap)
            self.scene.mlab.pipeline.image_plane_widget(self.scene.mlab.pipeline.scalar_field(np.log10(self.data)),
            plane_orientation='z_axes',
            colormap=self.possible_colormap) 
```

![在此处输入图像描述](../Images/2bc1a0b912e8b5e61ed38cd36ab96ec2.png)

发生这种情况有什么原因吗？它应该看起来像 3 个切片，颜色图显示在 2D 案例中！是因为我在同一个窗口中运行同一个场景吗？

# python - 如何防止 nltk 语料库将扩展 ascii 读取为 unicode

> ID：14345401
> 
> 赞同：0
> 
> 时间：2013-01-15T19:30:06.953
> 
> 标签：python, nltk

我正在使用以下代码加载一个带有纯文本版本的南非荷兰语维基百科的文本文件作为 nltk 语料库：

```
import nltk
from nltk.corpus import PlaintextCorpusReader
from nltk.corpus.util import LazyCorpusLoader
from __future__ import division
afwikipedia = LazyCorpusLoader('afwikipedia', PlaintextCorpusReader, r'(?!\.).*\.txt')
af = nltk.Text(afwikipedia.words()) 
```

然后，我使用以下内容查看最热门的单词：

```
from nltk.probability import FreqDist
fdist = FreqDist(af)
vocabulary = fdist.keys()
vocabulary[:250]   # 250 most frequently used words. 
```

不幸的是，这种方法有几个问题。“'n”在南非荷兰语中是一个非常流行的词，与英语中的“a”意思相同。上面的方法把它分成“'”和“n”两部分。此外，所有扩展的 ASCII 字符似乎都被视为 unicode 而不是 ascii，因此“verpleër”变为“verple\xc3r”。

有谁知道我将如何解决这个问题？尤其是ASCII字符的unicode处理真的很烦人。

我还做了以下事情：

```
# Create a file called sitecustomize.py in c:\python24\Lib\site-packages.
import sys
sys.setdefaultencoding('iso-8859-1')   # ASCII latin. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T22:18:44.373

这不是 unicode，它是混有 8 位字符的 ascii。`PlaintextCorpusReader`需要一个`encoding`参数，您可以使用它来解决您的问题。

`'`至于从中分解`n`，这是分词器的事情。找到一个令您满意的分词器，并告诉您的语料库阅读器使用它。

# php - 每当通过 ajax 提交表单时自动刷新表

> ID：14345402
> 
> 赞同：0
> 
> 时间：2013-01-15T19:30:09.753
> 
> 标签：php, jquery, html, ajax

每当我使用 jQuery Ajax 提交下面的表单时，我想创建一个自动刷新表。

**这是我的表格**

```
<form id="submitDataToElection">
  <table border="0">
  <tr>
    <td><label for="electionName">Election Name:</label></td>
    <td><input type="text" name="electionName" id="electionName" spellcheck="true" required></td>
  </tr>
  <tr>
    <td><label for="electionDate">Election Date:</label></td>
    <td><input type="text" name="electionDate" id="electionDate" required></td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td><input name="Reset" type="reset" value="Reset" id="resetInAddElection"><input type="submit" value="Submit" id="submitInAddElection"></td>
  </tr>
  </table>
</form> 
```

**表单的 jQuery**

```
$("#submitDataToElection").submit(function(event) {
    $("#resetInAddElection, #submitInAddElection").attr("disabled",true);
    event.preventDefault();
    var values = $(this).serialize();
    $.ajax({
      url: "storeDataToElection.php",
      type: "post",
      data: values,
      success: function(data){
          $('#addElection').dialog('close');              alert(data);
          $("#resetInAddElection, #submitInAddElection").attr("disabled",false);
          $("#electionName,#electionDate").val("");
          $("#electionName").focus();
      },
      error:function(data){
          $("#resetInAddElection, #submitInAddElection").attr("disabled",false);
          alert("failure");
      }   
    }); 
}); 
```

**这是 storeDataToElection.php 的代码**

```
mysql_connect("localhost", "root", "");
mysql_select_db("automated_election");
$name = $_POST['electionName'];
$date = $_POST['electionDate'];

mysql_query("UPDATE election SET is_active = 'no' WHERE is_active = 'yes'")or die(mysql_error());
$insert = mysql_query("INSERT INTO election
    (election_name ,
    election_date ,
    is_active)
    VALUES('$name', '$date', 'yes')");
if(!$insert) die(mysql_error());
else die("Success"); 
```

**这是我要自动刷新的表**

```
$result = mysql_query("SELECT * FROM election WHERE is_active = 'yes'");
echo '<hr><table style="font-size:14px;" id="viewElectionTable">';
while ($data = mysql_fetch_assoc($result)) {
    $date = explode("-",$data['election_date']);
    switch($date[1]){
        case 1:
            $month = "January";
            break;
        case 2:
            $month = "February";
            break;
        case 3:
            $month = "March";
            break;
        case 4:
            $month = "April";
            break;
        case 5:
            $month = "May";
            break;
        case 6:
            $month = "June";
            break;
        case 7:
            $month = "July";
            break;
        case 8:
            $month = "August";
            break;
        case 9:
            $month = "September";
            break;
        case 10:
            $month = "October";
            break;
        case 11:
            $month = "November";
            break;
        case 12:
            $month = "December";
            break;
    }
    echo '<tr>';
    echo "<td>Election Name: &nbsp;&nbsp;</td><td>".$data['election_name'].'</td>';
    echo '</tr><tr>';   
    echo "<td>Election Date: &nbsp;</td><td>".$month." ".$date[2].", ".$date[0].'</td>';
    echo '</tr>'; 
}
echo '</table><hr>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:51:00.977

一般的想法是使用您的 ajax 命中的文件来输出新的表格 HTML。然后使用返回给您的 ajax 调用的 HTML 输出来替换页面上的现有表格。

例如：

将要刷新的表放在一个 div 中，并为该 div 提供一个 id 以供参考。在下面的示例中，我正在使用

```
<div id="tableHolder"><!-- TABLE GOES HERE --></div> 
```

在 storeDataToElection.php 中，写入数据库后，输出新表格 HTML。此 HTML 输出将返回到您的 ajax 调用的“成功”函数。

然后，您可以通过执行以下操作将表格替换为新内容：

```
success : function(updatedTable) {
  ...
  $('div#tableHolder').html(updatedTable);
  ...
} 
```

# video - 使用 Handbake 创建用于转换视频格式的批处理文件

> ID：14345409
> 
> 赞同：0
> 
> 时间：2013-01-15T19:30:27.640
> 
> 标签：video, batch-file, transcoding

我正在尝试编写一个批处理脚本，使用手刹将 .wma 视频转换为 .mov

这是我尝试过的，但似乎不起作用。

```
FOR /F "tokens=*" %%G IN ('DIR /B /S *.wma') DO "C:\Program Files\Handbrake\HandBrakeCLI" -i "%%G" -o "%%G".mov --preset="Normal" 
```

我已将预设设置为正常，因为我想在我的电脑上播放视频。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:37:29.733

您的输出名称格式不正确。

试`-o "%%~dpnG.mov"`...

完整命令：

```
FOR /F "tokens=*" %%G IN ('DIR /B /S *.wma') DO "C:\Program Files\Handbrake\HandBrakeCLI" -i "%%G" -o "%%~dpnG.mov" --preset="Normal" 
```

# django - Django 表单验证取决于表单集中的数据

> ID：14345418
> 
> 赞同：4
> 
> 时间：2013-01-15T19:30:42.623
> 
> 标签：django, validation, django-forms, django-admin

我有以下代码：

```
from django import forms
from django.core.exceptions import ValidationError

class MyAdminForm(forms.ModelForm):
    class Meta:
        model = MyModel

    def clean(self):
        cleaned_data = self.cleaned_data
        max_num_items = cleaned_data['max_num_items']
        inline_items = cleaned_data.get('inlineitem_set', [])

        if len(inline_items) < 2:
            raise ValidationError('There must be at least 2 valid inline items')

        if max_num_items > len(inline_items):
            raise ValidationError('The maximum number of items must match the number of inline items there are')

        return cleaned_data 
```

我以为我可以从`cleaned_data`（通过使用`cleaned_data['inlineitem_set']`）访问表单集，但似乎并非如此。

我的问题是：

1.  如何访问表单集？
2.  我是否需要使用自定义验证创建自定义表单集才能使其正常工作？
3.  如果我需要这样做，如何在其`clean`方法中访问表单集的“父”表单？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T02:51:00.660

我刚刚为我自己的项目解决了这个问题。正如您在第二个问题中所建议的那样，任何需要访问父表单的内联表单集验证都需要在子类的`clean`方法中`BaseInlineFormset`。

令人高兴的是，父表单的实例在`clean`调用内联表单集之前被创建（或从数据库中检索，如果您正在修改而不是创建它），并且它可以作为`self.instance`.

```
from django.core.exceptions import ValidationError
class InlineFormset(forms.models.BaseInlineFormSet):
    def clean(self):
        try:
            forms = [f for f in self.forms
                       if  f.cleaned_data
                       # This next line filters out inline objects that did exist
                       # but will be deleted if we let this form validate --
                       # obviously we don't want to count those if our goal is to
                       # enforce a min or max number of related objects.
                       and not f.cleaned_data.get('DELETE', False)]
            if self.instance.parent_foo == 'bar':
                if len(forms) == 0:
                    raise ValidationError(""" If the parent object's 'foo' is
                    'bar' then it needs at least one related object! """)
        except AttributeError:
            pass

class InlineAdmin(admin.TabularInline):
    model = ParentModel.inlineobjects.through
    formset = InlineFormset 
```

这里的 try-except 模式是为了防止`AttributeError`我自己没有见过的极端情况，但是当我们尝试访问无法验证`cleaned_data`的表单 (in ) 的属性时显然会出现这种情况。[从https://stackoverflow.com/a/877920/492075](https://stackoverflow.com/a/877920/492075)`self.forms`了解到这一点

（注意：我的项目仍在 Django 1.3 上；在 1.4 中没有尝试过）

# plot - 使用 SAS 将垂直条和系列 (x= y=) 一起绘制

> ID：14345422
> 
> 赞同：1
> 
> 时间：2013-01-15T19:31:04.873
> 
> 标签：plot, visualization, sas

这是我试图模仿的图形输出。我想要同时绘制一系列和垂直条

![在此处输入图像描述](../Images/009ab55ae81ffe0bbaac24550dc21b9f.png)

然而，SAS 在将系列和 vbar 一起绘制时存在兼容性问题。有没有办法像上面那样绘制我的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:12:51.787

在以下位置查看 V9.2 GBarLine 示例：

[http://robslink.com/SAS/democd30/aaaindex.htm](http://robslink.com/SAS/democd30/aaaindex.htm)

如果你有 SAS 9.2 或更高版本，你应该没问题。

# functional-programming - 试图了解 SML 选项结构

> ID：14345423
> 
> 赞同：2
> 
> 时间：2013-01-15T19:31:12.047
> 
> 标签：functional-programming, wildcard, option, sml, smlnj

好的，所以我开始为一堂课学习 SML，但我坚持使用选项结构。到目前为止，我对这个例子有什么：

```
datatype suit = spades|hearts|clubs|diamonds;
datatype rank = ace|two|three|...|j|q|k|joker;
type card = suit*rank; 
```

我的讲师试图解释期权结构的使用，他说并非所有的牌都一定有花色。小丑没有与之相关的西装。所以在设计一个函数getsuit来得到一张牌的花色时，我们有以下几点：

```
datatype 'a option = NONE | SOME of 'a;
fun getsuit ((joker,_):card):suit option = NONE
  | getsuit ((_,s):card):suit option = SOME s; 
```

但是使用 emacs，我得到两个错误，一个说模式和约束不同意，

```
pattern: rank * ?.suit
constraint: rank * suit 
```

另一个说表达式类型和结果类型不一致。

```
expression: ?.suit option
result type: suit option 
```

这是讲师提供的代码，很明显，如果它导致错误，它们并没有多大帮助。“？”是什么意思。为什么会出现？我将如何正确定义此功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T20:46:29.007

`option`正如您定义的那样，这并不是真正的问题。您的模式顺序`suit`和模式错误：`rank``card`

尝试：

```
datatype 'a option = NONE | SOME of 'a;

fun getsuit ((_, joker):card):suit option = NONE
  | getsuit ((s, _):card):suit option = SOME s; 
```

我的 ML 版本可能会以不同的方式打印错误，所以我不确定如何解释`?.`etc 的含义。但如果你一点一点理解它就足够简单了：

尝试

```
(clubs, ace); 
```

解释器（或 emacs，如果你正在使用）告诉你类型是`suit * rank`. 这是 ML 的类型推断在起作用，但您可以像这样指定类型（您期望的）：

```
(clubs, ace): suit*rank; 
```

或者

```
(clubs, ace): card; (* Works, since card is defined as (suit*rank) *) 
```

而且你不会有任何抱怨。但显然，如果你这样做了

```
(clubs, ace): rank*suit; 
```

或者

```
(clubs, ace): card; (* card is defined as (rank*) *) 
```

您对`getsuit`的参数类型设置了约束（它必须是 a`card`或兼容的`(suit*rank)`产品），但模式的类型是`(rank*?)`or `(?*rank)`，两者都不兼容`(suit*rank)`。

# java - 在 JfreeChart 中绘制模糊的阴影？

> ID：14345426
> 
> 赞同：1
> 
> 时间：2013-01-15T19:31:18.373
> 
> 标签：java, jfreechart, blur, shadow

这是这篇文章的标题中的问题，但无论如何：

我使用 JFreeChart 在我的应用程序中创建图表。要求之一是柔和的模糊阴影而不是实心，默认情况下呈现。

我知道我可以添加我的图像而不是默认阴影，使用

```
setShadowPaint(Paint paint); 
```

但这种方式意味着创建模糊图像并将其添加到我的报告中。是否有内置案例来达到所需的效果？

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:04:29.790

没有任何内置功能，但您可以使用 a`ConvolveOp`来模糊图像；[有关示例，请参见此处](https://stackoverflow.com/a/3528196/230513)引用的文章。您应该能够在 a 中组成合适的图像`BufferedImage`并将其作为[注释](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/annotations/package-summary.html)添加到图表中。

# visual-studio-2012 - 自动注释（例如“///”）但不是在 Visual Studio 2012 中的 XML

> ID：14345431
> 
> 赞同：1
> 
> 时间：2013-01-15T19:31:36.777
> 
> 标签：visual-studio-2012, comments, auto-generate

我很喜欢 Visual Studio 中的“///”功能，但我发现它以 XML 显示的事实令人迷惑。我更希望输出看起来像 javadocs：

```
/**
 * @author      Firstname Lastname <address @ example.com>
 * @version     1.6                 (current version number of program)
 * @since       2010-03-31          (version of the package this class was first added to)
 */ 
```

有没有办法做到这一点？我不在乎数据可能无法在应用程序之外访问（例如自动生成的 API 文档）。我只是想要这个，以便我和另一个查看代码的人可以看到每个函数的一些简洁统一的注释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T23:23:48.233

好吧，*从技术上讲*，有一种方法可以做到这一点，但是您需要自己编写 Visual Studio 的扩展，以便在 VS 中直观地格式化 XML 注释，同时在源文件中保持原始格式。

[类似于这篇 XML 评论文章](http://msdn.microsoft.com/en-us/magazine/dd722812.aspx#id0400079)末尾的基于 WPF 的查看器（我相信这只是一个内部原型）。

我在 Visual Studio 库中没有看到执行此操作的扩展。也许概念上最接近的是[ItalicComments](http://visualstudiogallery.msdn.microsoft.com/0b439a8a-e21a-4e26-b82b-054fbf0acab7)，但这不是您所追求的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:46:31.537

使用键盘快捷键创建一个片段以包含您自己的评论样式。

[片段编辑器](http://snippeteditor.codeplex.com/)是执行此操作的便捷工具。

但是，如果其他用户习惯于在 Visual Studio 和 C# 中工作，那么*他们*会因为查看除 XML 结构之外的任何其他注释方式而迷失方向。

# c++ - clang++ 4.1，NULL 取消引用没有崩溃？

> ID：14345432
> 
> 赞同：3
> 
> 时间：2013-01-15T19:31:40.370
> 
> 标签：c++, clang

我很好奇为什么在 clang++/OSX 下以下不会导致 sigsegv：

```
int *p = (int*)0;
cout << *p; 
```

但这确实：

```
int *p = (int*)1;
cout << *p; 
```

铿锵的版本是4.1

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T19:36:28.433

取消引用无效指针是未定义行为。这并不意味着 sigsev 是有保证的。什么事情都可能发生。

# version-control - 如何在 ClearCase 中按文件扩展名删除文件元素？

> ID：14345435
> 
> 赞同：2
> 
> 时间：2013-01-15T19:31:45.887
> 
> 标签：version-control, clearcase

我有大量`xxx.cmd`文件位于多个文件夹中（例如，、、`child1`等`child2`）`child3`，它们有一个父文件夹`parent`

是否有我可以在`parent`删除所有`.cmd`子文件夹中的所有文件的文件夹上执行的 cleartool 命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:27:03.097

不容易，因为在执行`cleartool rmname`.

最简单的方法是：

*   复制视图*外的所有元素。*
*   删除所有 *.cmd 文件（使用您想要的任何查找实用程序，与 clearcase 无关）
*   [`clearfsimport`](https://stackoverflow.com/questions/416875/creating-a-new-subdirectory-structure-in-clearcase/418196#418196)**使用选项-rmname** ("mirror clearfsimport")将这些文件返回到您的视图中（减去已删除的 *.cmd 文件）：

    *   *现有*文件都不会受到影响
    *   *.cmd 文件存在于*目标*（您的 ClearCase 视图）中，但不再存在于源中（您清理和删除这些文件的备份），将被删除（rmnamed），并使用父级的挑剔签出签入为您完成的目录。

    --rmname

> **对于所有作为目录的源名称参数，对已经在 VOB 中但不存在于源目录中的**`rmname`元素执行操作。 如果与 结合使用，则在遍历的所有目录中执行此操作。 如果与 结合使用，则在查找 VOB 中的匹配名称之前执行该操作。 **`-recurse``rmname`
> `-downcase``downcase`**

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-13T13:55:05.670

`clearfsimport`我今天也有同样的需求，因为需要制作本地副本，所以对使用的提议不太满意。这是我在 bash 环境中所做的（我在 windows 下的 msys）：

1.  列出所有要删除的文件`find`：
    `find parent -name "*.cmd" | tee to_remove_list.txt`
2.  提取文件夹列表：
    `sort to_remove_list.txt | xargs -i dirname {} | uniq | tee to_checkout.txt`
3.  签出所有这些文件夹：
    `cat to_checkout.txt | xargs -i cleartool co -nc {}`
4.  删除文件：
    `cat to_remove_list.txt | xargs -i cleartool rm {}`
5.  签入所有文件夹：
    `cat to_checkout.txt | xargs -i cleartool ci -nc {}`
6.  （可选）清理文件夹和文件列表：
    `rm to_remove_list.txt to_checkout.txt`**

# wpf - DoDragDrop() - droptarget 是另一个应用程序（word 或 excel）

> ID：14345440
> 
> 赞同：3
> 
> 时间：2013-01-15T19:31:56.190
> 
> 标签：wpf, drag-and-drop, ms-word, cursor

在我的 WPF 应用程序中，我已经实现了拖放并将我的 PNG 图像放在 DataObject 中，然后将其传递给 DoDragDrop 方法。关于我可以使用哪些应用程序，这似乎是偶然的。Excel 是的，Word 没有。

我在这里寻找是否有办法检查目标应用程序（MS Word）是否会接受被拖到它的对象。目前，图像看起来像是被拖动了，但 Word 对它不做任何事情。从 Excel 拖动到 Word 时，我得到一个红色图标，表示拖动不起作用，如果我的拖动不起作用（如果可能），我需要显示相同的图标。

我似乎表明 DropTarget 暗示 DragOver 和反馈事件的所有文章，而不是作为 DragSource 的我的应用程序？这是正确的还是我可以使用这些事件来检查 DropTarget？

奇怪的是 Word 不会接受我的图像，但 Excel 会。还有其他更强大的拖放方式吗？

感谢你的协助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T13:39:44.473

Excel 中的 Drag+Drop 看起来非常糟糕，至少在我的版本 (2013) 中是这样。例如，它不会接受从资源管理器中拖出的文件，否则会产生大量的绘画工件并掉落在错误的位置。但是起作用的是拖动位图对象。

要使其同时适用于 Excel 和 Word，您需要指定一种*以上*的格式。这段 Winforms 测试代码运行良好，使用 Pictures 文件夹中名为“transparent.png”的示例图像。根据需要调整以在 WPF 中拖动您自己的图像文件：

```
 private void Form1_MouseDown(object sender, MouseEventArgs e) {
        string path = Environment.GetFolderPath(Environment.SpecialFolder.MyPictures);
        path = System.IO.Path.Combine(path, "transparent.png");
        using (var bmp = new Bitmap(path)) {
            var data = new DataObject();
            var files = new System.Collections.Specialized.StringCollection();
            files.Add(path);
            data.SetFileDropList(files);   // This format works in Word
            data.SetImage(bmp);            // This format works in Excel
            DoDragDrop(data, DragDropEffects.Copy);
        }
    } 
```

# php - Drupal 7 Media Gallery Extra 停止工作

> ID：14345441
> 
> 赞同：1
> 
> 时间：2013-01-15T19:31:58.977
> 
> 标签：php, drupal-7

我在我的**Drupal 7**中使用诸如**Media**、**Media Gallery**和**Media Gallery Extra**等模块（内部带有*Media Gallery Directory* ）来创建画廊。安装后立即一切正常。大约创建了 10 个画廊，媒体已成功上传到不同的目录 (*sites/default/files/galleries/NAME_OF_THE_GALLERY/...*)。

 **几天后（不幸的是，我没有追踪原因）模块的功能停止运行：通过媒体库创建的所有媒体都上传到**默认路径**（*站点/默认/文件/*）。同样的结果在 Ubuntu 下的服务器上和 Windows 下的本地副本上（所以我猜文件/目录权限没有问题）。

模块的配置还是一样的。模块文件未更改。禁用/启用模块并不能解决问题。它**只能**通过**重新安装**media_gallery_directory、media_gallery_extra 和 media_gallery 模块来修复。但在这种情况下，所有媒体文件/评论/画廊都将被**删除**。因此，如果考虑到已经有大约 150 个画廊已上传到生产站点，这不是我的选择。

我试图在我的开发环境中使用一些数据库配置字段进行操作 - 但一切都没有成功。

我该如何解决这个问题？任何意见都深表感谢。**

# php - 如何使用 PHP 解密 SAML？

> ID：14345447
> 
> 赞同：1
> 
> 时间：2013-01-15T19:32:28.773
> 
> 标签：php, security, saml, federated

我有一个正在尝试与 Federated Security 集成的应用程序——特别是 Siteminder。我正在使用此处找到的 PHP-SAML 工具包：[https ://github.com/onelogin/php-saml](https://github.com/onelogin/php-saml)

我在应用程序中包含 x509 证书，一切正常，直到在 Siteminder 环境中打开加密。一旦打开，我就无法再登录——我收到了这条消息：**无效的 SAML 响应：找不到签名节点**

我已经能够确定从 Siteminder 发送到应用程序的 SAML 断言是加密的。我可以看到断言（示例如下）。不幸的是，我不知道如何解密该消息，以便我可以在我的应用程序中解析和使用。

```
<Response xmlns="urn:oasis:names:tc:SAML:2.0:protocol"
      Destination="{VALUE HERE}"
      ID="_076e8f69ec4adb3b72f0cc76570527222e37"
      IssueInstant="2013-01-15T18:18:48Z"
      Version="2.0"
      >
<ns1:Issuer xmlns:ns1="urn:oasis:names:tc:SAML:2.0:assertion"
            Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity"
            >{VALUE HERE}</ns1:Issuer>
<Status>
    <StatusCode Value="urn:oasis:names:tc:SAML:2.0:status:Success" />
</Status>
<ns2:EncryptedAssertion xmlns:ns2="urn:oasis:names:tc:SAML:2.0:assertion">
    <xenc:EncryptedData xmlns:xenc="http://www.w3.org/2001/04/xmlenc#"
                        Type="http://www.w3.org/2001/04/xmlenc#Element"
                        >
        <xenc:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#aes256-cbc" />
        <ds:KeyInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
            <xenc:EncryptedKey xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
                <xenc:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-1_5" />
                <xenc:CipherData>
                    <xenc:CipherValue>{VALUE HERE}</xenc:CipherValue>
                </xenc:CipherData>
            </xenc:EncryptedKey>
            <ds:X509Data>
                <ds:X509Certificate>
{CERTIFICATE HERE}
</ds:X509Certificate>
            </ds:X509Data>
        </ds:KeyInfo>
        <xenc:CipherData>
            <xenc:CipherValue>{VALUE HERE}</xenc:CipherValue>
        </xenc:CipherData>
    </xenc:EncryptedData>
</ns2:EncryptedAssertion>
</Response> 
```

如果有人可以提供帮助，那就太棒了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:56:55.387

要解密 SAML 消息，您可以提取[simplesamlphp](http://simplesamlphp.org/)库的一些代码。

**lib/SAML2/Utils.php**的函数**_decryptElement**解密消息元素：

 **函数头：

function _decryptElement(DOMElement $encryptedData, XMLSecurityKey $inputKey, array &$blacklist)

（对 $blacklist 使用空数组）

检查：

[http://code.google.com/p/simplesamlphp/source/browse/trunk/lib/SAML2/Utils.php#356](http://code.google.com/p/simplesamlphp/source/browse/trunk/lib/SAML2/Utils.php#356)

要构建 DOMElement，您可以使用**lib/SimpleSAML/Utilities.php**的以下功能：

**formatXMLString**和**formatDOMElement**

[http://code.google.com/p/simplesamlphp/source/browse/trunk/lib/SimpleSAML/Utilities.php#1577](http://code.google.com/p/simplesamlphp/source/browse/trunk/lib/SimpleSAML/Utilities.php#1577)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-15T07:27:46.773

我建议使用[lightsaml/lightsaml](https://packagist.org/packages/lightsaml/lightsaml)库。在它的食谱中有一个关于解密 SAML 断言的条目[http://www.lightsaml.com/LightSAML-Core/Cookbook/How-to-decrypt-Assertion/](http://www.lightsaml.com/LightSAML-Core/Cookbook/How-to-decrypt-Assertion/)

它是通过将 XML 反序列化为 Response 数据模型对象、加载您的密钥对凭证并在返回纯 Assertion 的 EncryptedAssertion 上调用解密方法来完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T01:51:52.063

我怀疑这是 Onelogin PHP 代码的问题 - 已[记录](https://github.com/onelogin/php-saml/issues)了一个类似的问题，并且 Ruby 实现也有一个相同的问题。

**更新：**

如果您试图解决这个问题，您需要使用您的证书解密它，即您发送到 IP 的 sp.xml 元数据中的那个。

[从未使用过 Onlelogin，但SimpleSAMLphp](http://simplesamlphp.org/)代码中会有示例。**

# java - SWT 系统托盘 - Linux GTK Gnome 托盘图标，托盘上带有“SWT”字符串

> ID：14345450
> 
> 赞同：3
> 
> 时间：2013-01-15T19:32:38.653
> 
> 标签：java, swt, trayicon

我正在使用以下代码配置系统托盘图标：

```
/**
 * Configura os ícones da shell principal
 */
protected void setDiplayIcons(Shell shell){
    Display display = shell.getDisplay();
    InputStream inputImgTray = getClass().getClassLoader().getResourceAsStream(ImagensNaNOffline.IMG_LOGO_SEBRAE.getPath());
    Image image = new Image(display, inputImgTray);
    shell.setImage(image);

    Tray tray = display.getSystemTray();

    final ToolTip tip = new ToolTip(shell, SWT.BALLOON | SWT.ICON_INFORMATION);
    tip.setMessage("Balloon Message Goes Here!");
    if(tray != null) {
        TrayItem trayItem = new TrayItem(tray, SWT.NONE);
        trayItem.setImage(image);
        tip.setText("Balloon Title goes here.");
        trayItem.setToolTip(tip);
        final Menu menu = new Menu(shell, SWT.POP_UP);
        MenuItem menuItem = new MenuItem(menu, SWT.PUSH);
        menuItem.setText("Button A");
        menuItem = new MenuItem(menu, SWT.PUSH);
        menuItem.setText("Button B");
        menuItem = new MenuItem(menu, SWT.PUSH);
        menuItem.setText("Show Tooltip");
        menuItem.addListener (SWT.Selection, new Listener () {          
            public void handleEvent (Event e) {
                tip.setVisible(true);
            }
        });         
        trayItem.addListener (SWT.MenuDetect, new Listener () {
            public void handleEvent (Event event) {
                menu.setVisible (true);
            }
        });         
    }

} 
```

托盘设置正常，但字符串“SWT”作为标签出现在托盘图标的一侧。

系统是 Fedora Core 17 (GNOME)。

这是平台问题还是有办法更改文本？

这是一个屏幕截图：

![在此处输入图像描述](../Images/b8e27fdd1a243e0883c642f7f2a7399a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:25:18.830

您对 Gnome 3.x 有误解。系统托盘位于右下角，可与提供的代码示例一起正常工作。所以“SWT”位于您的应用程序标题栏中；显示的菜单是默认插入退出菜单项的应用程序菜单。

您的屏幕截图显示了桌面的左上角。“SWT”是使用 SWT 创建的应用程序的默认后备值。在测试时，我很惊讶它与（活动）窗口的标题不对应。我想这是一个错误。关于如何确定应用程序标题的技术细节可以在这个问题（Python 和 PyGTK；一些外部参考）中找到：[如何在 Gnome Shell 中设置应用程序标题？](https://stackoverflow.com/questions/9324163/how-to-set-application-title-in-gnome-shell)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-02T15:20:26.210

我设法更改了应用程序名称，因此我在 KDE 的系统托盘中看到的文本，通过使用：

```
Display.setAppName("Whatever"); 
```

最重要的是 SWT 代码。

# jquery - 有用的未记录的 jQuery 方法和属性

> ID：14345460
> 
> 赞同：0
> 
> 时间：2013-01-15T19:33:34.917
> 
> 标签：jquery

我想收集所有*有用的未记录的*[**jQuery**](http://jquery.com/)方法和属性（至少对于[当前版本 1.9.0](http://code.jquery.com/jquery.js)）。

其中一些在解决特定问题或加速 JavaScript 代码评估方面看起来很有希望。

**重要提示：**由于此处列出的功能没有记录，因此应谨慎使用，因为新版本的 jQuery 可能在未来版本中不支持这些功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T19:33:34.917

### [$.active](https://github.com/jquery/jquery/blob/master/src/ajax.js#L219)

> 保持活跃查询数的计数器

当需要检查正在运行的 Ajax 请求的数量时，此属性很有用。例如，可以使用以下代码来防止双重 Ajax 请求：

```
$("button").on("click", function() {
    if ($.active.length === 0) {
        $.ajax({ ... });
    }
}); 
```

* * *

### [$.camelCase(字符串)](https://github.com/jquery/jquery/blob/master/src/core.js#L517)

> 将虚线转换为驼峰式

虽然 jQuery 在*css*和*数据*模块中使用此方法，但您可以使用它将格式中的字符串转换`xxx-yyy-zzz`为`xxxYyyZzz`：

```
var str = $.camelCase("xxx-yyy-zzz");  // "xxxYyyZzz 
```

* * *

### [$.easing](https://github.com/jquery/jquery/blob/master/src/effects.js#L652)

此属性包含所有受支持的缓动效果以及用于计算这些效果的函数。默认情况下 jQuery 仅支持`linear`和`swing`效果，但如果您包含[jQueryUI](http://jqueryui.com/) `$.easing`属性，将使用其他效果进行扩展。

例如，我们可以使用以下代码轻松检查是否支持反弹效果：

```
var bounceSupported = "easeInOutBounce" in $.easing; 
```

* * *

### [$.isReady](https://github.com/jquery/jquery/blob/master/src/core.js#L348)

> DOM 准备好使用了吗？一旦发生就设置为真。

如果由于某种原因您不使用 event.properties，则此属性可用作检查 DOM 是否已完全加载的标志`$(document).ready()`。到目前为止的简单示例：

```
if (!$.isReady) {
    $.error("DOM was not fully loaded yet");
} 
```

* * *

### [$.readyWait](https://github.com/jquery/jquery/blob/master/src/core.js#L352)

> 一个计数器，用于跟踪在 ready 事件触发之前要等待的项目数。

但是我发现除了与 for 相同之外没有其他用途`$.isReady`。

* * *

### [$.text(elem)](https://github.com/jquery/jquery/blob/master/src/sizzle-jquery.js#L7)

> 用于检索 DOM 节点数组的文本值的实用函数。

从 DOM 树中获取文本内容的快速方法。当您需要加速与 DOM 元素一起使用的代码时，它很有用：

```
$("div").on("click", function() {
    console.log( $.text(this) );
}); 
```

* * *

### [$.timers](https://github.com/jquery/jquery/blob/master/src/effects.js#L661)

此属性保存 jQuery 元素动画的计时器。它可用于快速检查一次是否有任何动画进程在运行，而不是`$(":animated").length`：

```
$("span").on("click", function() {
    if ($.timers.length === 0) {
        $(".flows, #spoiler, #par > p").fadeIn("slow");
    }
}); 
```

可以从[这个问题](https://stackoverflow.com/q/14218363/1249581)中获取一个很好的用法示例。

* * *

### [$().push](https://github.com/jquery/jquery/blob/master/src/core.js#L268)

`Array.push()`此方法的行为方式与向 jQuery 对象添加新 DOM 元素的方式相同。与以下内容相同`$a = $a.add($b)`：

```
var $a = $("#element1"),
    $b = $("#element2");

$a.push($b[0]); 
```

使用示例：[jQuery 连接选择器而不创建新实例？](https://stackoverflow.com/q/15662293/1249581)

# c# - DrawImage 永远不会返回

> ID：14345462
> 
> 赞同：1
> 
> 时间：2013-01-15T19:33:42.163
> 
> 标签：c#, .net, gdi+, drawimage, non-termination

我和我的同事在 C# 的 Graphics 类中遇到了一个明显的错误。在我们的应用程序中，我们通过在其上绘制新事物来随着时间的推移更新位图。我们使用 Graphics.DrawImage(Image, Rectangle) 方法，有时调用永远不会返回，甚至会抛出异常。这是你们熟悉的问题吗？

这是我们的用例：

```
Bitmap whole = ...; 
```

这在我们的问题出现之前就已经定义好了。正常的通话看起来像这样，“part”和“region”从网络进来：

```
Bitmap part = ...;
Rectangle region = ...;

using(var graphics = Graphics.FromImage(whole))
{
   using(part)
   {
      graphics.DrawImage(part, region); // Execution stops in here
   }
} 
```

我们尝试对其设置超时：

```
...
      var someAttributes = ... part ...;

      var drawing = Task.Factory.StartNew(() => graphics.DrawImage(part, region));

      if (!drawing.Wait(5000))
      {
        // We put a breakpoint here
      }
... 
```

我们尝试检查“部分”图像。通话前，看起来还可以；它没有被处置或任何东西，我们能够获得它的属性。但是在调用之后，它的所有成员都会抛出 InvalidOperationException。

如果我们让程序在此之后继续运行，下一次调用将每次都挂起。如果我们稍后暂停调试器，我们可以在线程视图中看到这些“绘图”任务仍在等待。

因此，如果您知道任何解决方法或防止这种行为的方法，我们将不胜感激您的帮助。

不久后编辑：

我们查看了图形对象，发现我们无法检查它，因为这个“对象当前正在其他地方使用”。我们认为这是对“整体”图像的唯一参考。我们甚至克隆了图像以将其显示在图片框中。我们阅读了 Clone 并发现，如果我们理解正确的话，它只做一个浅拷贝并且仍然与旧图像共享资源。

所以我们尝试替换

```
Rectangle subregion = ...;
Bitmap copy = whole.Clone(subregion); 
```

和

```
Rectangle subregion = ...;
Bitmap copy = new Bitmap(whole.Clone(subregion)); 
```

它似乎解决了我们的问题。尽管在这种情况下 DrawImage 不会引发异常仍然是一个问题。

# ruby-on-rails - Rails 3.2 Oauth2 gem 和示例

> ID：14345464
> 
> 赞同：0
> 
> 时间：2013-01-15T19:33:51.997
> 
> 标签：ruby-on-rails, oauth, gem

我需要为使用 OAUTH 的应用程序实现 API。

我已经使用 OAUTH v1 做了一个，我想尝试使用 OAUTH v2，但我不确定我应该使用哪个 gem，我找不到一个明确的可以使用。

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:33:48.163

我过去使用过[OAuth 插件](https://github.com/pelle/oauth-plugin)，它对我来说效果很好。

# mysql - Mysql 从查询中删除

> ID：14345469
> 
> 赞同：1
> 
> 时间：2013-01-15T19:34:11.817
> 
> 标签：mysql

如何删除下面计数大于 1 的 image_media_set 和 media_set 表。

```
SELECT media_set.id,
       (SELECT COUNT(*)
        FROM   image_media_set
        WHERE  image_media_set.media_set_id = media_set.id) AS imageCount
FROM   media_set
       INNER JOIN image_media_set
         ON media_set.id = image_media_set.media_set_id
WHERE  image_media_set.image_id = 6405; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:47:47.463

这和总是删除注册表一样，不是吗？

COUNT 真的有必要吗？

尝试这个：

```
 DELETE FROM media_set, image_media_set
   WHERE image_media_set.media_set_id = media_set.id
   AND image_media_set.image_id = 6405; 
```

# c# - 需要帮助解决 c# DataContract 反序列化错误

> ID：14345470
> 
> 赞同：0
> 
> 时间：2013-01-15T19:34:17.187
> 
> 标签：c#

我正在尝试将 XML 文档反序列化为 ac#DataContract 并遇到错误：

错误信息如下：

> 第 2 行位置 2 出错。从命名空间“http://ddex.net/xml/2010/ern-main/32”中期待元素“Ernmxml”。遇到名称为“NewReleaseMessage”的“元素”，命名空间“http:// /ddex.net/xml/2010/ern-main/32'

我还没有完成整个 DataContract，但这是我目前所拥有的：

```
namespace DdexCoverter
{
    [DataContract]
    public class Ernmxml
    {

        [IgnoreDataMemberAttribute] public string NewReleaseMessage;
        [DataMember] public string PartId;

    }
} 
```

这是我的主程序：

```
 class Program
    {
        static void Main(string[] args)
        {
            FileStream xmlstream = File.OpenRead(ConfigurationManager.AppSettings["xmlfilepath"]);
            var xr = new XmlTextReader(ConfigurationManager.AppSettings["xmlfilepath"]);

            var ddexxml =  new Ernmxml();

            var dcs = new DataContractSerializer(typeof(Ernmxml));

            var ernmobj = (Ernmxml) dcs.ReadObject(xr);

        }
    }
} 
```

在这一行生成错误： var ernmobj = (Ernmxml) dcs.ReadObject(xr);

XML 开头如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<ern:NewReleaseMessage xmlns:ern="http://ddex.net/xml/2010/ern-main/32"
                       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                       LanguageAndScriptCode="en"
                       xsi:schemaLocation="http://ddex.net/xml/2010/ern-main/32 http://ddex.net/xml/2010/ern-main/32/ern-main.xsd"
                       MessageSchemaVersionId="2010/ern-main/32">
  <MessageHeader>
    <MessageThreadId>PADPIDA</MessageThreadId>
    <MessageId>PADPIDA</MessageId>
    <MessageSender>
      <PartyId>PADPIDA</PartyId>
      <PartyName> 
```

有人可以建议我如何解决此错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:06:23.330

您的 DataMember 被定义为只是一个公共字段。DataMember 和 XmlSerializer 仅适用于公共属性。您的对象模型还必须与 XML 的对象模型相匹配。如果我正确地对其进行了逆向工程，这就是您应该得到的：

```
 [DataContract]
    public class MessageHeader
    {
        [DataMember]
        public string MessageThreadId { get; set; }
        [DataMember]
        public string MessageId { get; set; }
        [DataMember]
        public MessageSender sender { get; set; }
    }
    [DataContract]
    public class MessageSender
    {
        [DataMember]
        public string PartyId { get; set; }
    } 
```

我通常从类定义开始，然后序列化对象以查看格式的外观。不习惯逆向xml。:)

然后应该将其放置在您的 NewReleaseMessage 类中

```
 MessageHeader message {get;set;} 
```

我刚刚注意到的另一件事是您对 DataContractSerializer 的使用。只需这样做：

```
 using ( FileStream stream = File.OpenRead(pathToFile))
    {
        XmlSerializer ser = new XmlSerializer(typeof(NewReleaseMessage));
        NewRealeaseMessage data = ser.Deserialize(stream) as NewReleaseMessage;
        return data;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:37:10.010

改变

```
 public class Ernmxml 
```

至

```
public class NewReleaseMessage 
```

或者

改变

```
<ern:NewReleaseMessage xmlns:ern="http://ddex.net/xml/2010/ern-main/32" 
```

或者

```
<ern:Ernmxml xmlns:ern="http://ddex.net/xml/2010/ern-main/32" 
```

# jquery - ajax 和非 ajax 的 $(document).on() 和 $(element).on 之间的 Jquery 区别

> ID：14345472
> 
> 赞同：0
> 
> 时间：2013-01-15T19:34:27.577
> 
> 标签：jquery

考虑我页面中的以下三个语句。元素#not_ajax_element 和#ajax_element 是按钮。元素#ajax_element 通过先前的ajax 调用（未显示）加载到页面中。

```
// #not_ajax is 'static' element. THIS WORKS
$("#not_ajax_element").on("click", "button", function() {
   alert('Not ajax');
});

// #ajax_element is loaded by a previous ajax call. THIS DOES NOT WORK.
$("#ajax_element").on("click", "button", function() {
   alert('Not ajax');
});

// #ajax_element is loaded by a previous ajax call. THIS WORKS.    
$(document).on("click", "#ajax_element", function () {
   alert('Not ajax');
}); 
```

正如评论所确定的，静态和动态元素的 on() 语法似乎不同。

这是记录在案的行为，还是我在实施中遗漏了一些重要的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T19:40:19.273

运行代码时，上下文元素（您选择并调用的元素`.on`）必须存在。这是很容易遵循的规则。您看到的行为是预期的并记录在案。`document`始终存在，并且您的动态元素并不总是存在。

如果您将该代码正确放置在 ajax 调用的成功回调中，您的第二个示例*应该可以*工作，因为此时（在成功回调中）已添加 ajax 添加的元素，这意味着您可以选择它并将其用作上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T19:48:08.180

#ajax_element 到底是什么？那是一个按钮还是只是一个 div 容器？第二个不起作用，因为您正在查看#ajax_element 内按钮的“单击”事件。第三个有效，因为您正在 document.body 上下文的整个范围内侦听“单击”事件。您必须确保在正确的上下文或范围内聆听，否则将无法正常工作。

# android - Android 应用程序未显示在应用程序抽屉中

> ID：14345475
> 
> 赞同：0
> 
> 时间：2013-01-15T19:34:35.893
> 
> 标签：android

我一直在从多个角度看待它，并尝试了 SO 建议的解决方案。似乎没有任何工作。该图标是可绘制的，我已将建议的操作添加到我的意图过滤器中，但当我安装它时仍然没有显示该应用程序。

我的清单中的问题在哪里？

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="lite.hattrick.main"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.INTERNET" >
    </uses-permission>

    <uses-feature
        android:name="android.hardware.touchscreen"
        android:required="false" />

    <application
        android:hardwareAccelerated="true"
        android:icon="@drawable/icon"
        android:label="liteTrick"
        android:allowBackup="true"
        android:theme="@style/Theme.Sherlock.Light" >

        <service android:name="lite.hattrick.services.LiteTrickService" />

        <activity
            android:name=".LoginActivity"
            android:label="@string/app_name" 
            android:noHistory="true">
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
                <data
                    android:host="whodunit"
                    android:scheme="callback" >
                </data>
            </intent-filter>
        </activity>

        <activity
            android:name=".BaseActivity"
            android:label="@string/app_name" >
        </activity>

        <activity
            android:name="lite.hattrick.players.HattrickPlayerActivity"
            android:theme="@style/NoActionBar" />
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:05:13.150

将它们分成两个意图过滤器：

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter>
<intent-filter>
    <action android:name="android.intent.action.VIEW" />
     <data
          android:host="whodunit"
          android:scheme="callback" >
     </data>
</intent-filter> 
```

看看它是否有效。

# jasmine - PhantomJS 不加载 javascript (jasmine) 库？

> ID：14345477
> 
> 赞同：1
> 
> 时间：2013-01-15T19:34:49.417
> 
> 标签：jasmine, phantomjs

我是幻影的新手，希望我错过了一些明显的东西。我已将这个示例剥离到最低限度，以显示在这种情况下与 Jasmine 集成的问题。

在我的 javascript 文件中，我调用`page.open(...)`并传入包含 Jasmine 的本地 html 文件的名称作为参数。html 文件如下所示：

```
<!DOCTYPE html>
<h2>
    Reporter</h2>
<head>
    <title>Jasmine Spec Runner</title>
    <link rel="stylesheet" type="text/css" href="Content/jasmine.css">
    <script type="text/javascript" src="Scripts/External/Jasmine/jasmine.js"></script>

    <script type="text/javascript">
        jasmine.getEnv();
        jasmine.getEnv().addReporter(new jasmine.TeamcityReporter());
        jasmine.getEnv().addReporter(new jasmine.TrivialReporter());
        jasmine.getEnv().execute();
    </script>
</head> 
```

当我打电话时，`phamtomjs myJavaScriptFile.js myHtmlFile.htm`我从 phantom 收到一条消息，说它找不到名为 jasmine 的变量。（指`jasmine.getEnv()`方法调用。）

我知道 jasmine.js 文件在该 html 文件中是可见的，所以我不确定 phantom 有什么问题，或者如何进一步调试问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:20:57.793

对我来说，这似乎是一个路径问题。Phantom 不喜欢 htm 文件路径中的反斜杠，但想要正斜杠。当我这样做时，发现茉莉花不再是问题：

```
phantomjs c:\folder1\jasmine_tests\myJavaScriptFile.js c:\folder1/jasmine_tests/myHtmlFile.htm 
```

# sql - 此代码导致空白正文

> ID：14345480
> 
> 赞同：0
> 
> 时间：2013-01-15T19:35:15.647
> 
> 标签：sql, response

这段代码似乎实际上并没有返回任何东西。无论它测试的是真还是假，也不是if之外的行。有回应。但响应中没有正文。我很困惑。

我可以直接在服务器上运行 sql 字符串并获得预期的响应。

```
SQLcmd.CommandText = (SQLString)
SQLdr = SQLcmd.ExecuteReader
    While SQLdr.READ()
        IF SQLdr(0) = "notadded" THEN
            context.Response.WRITE("notadded^") 'This is not in the body of the response
        ELSEIF
            context.Response.WRITE("added^" + SQLdr(0) + "^") 'This IS NOT IN the body OF the response
        END IF
        context.Response.WRITE(SQLcmd.CommandText) 'This is not in the body of the response
    End While 
```

# php - 通过复选框更新多行

> ID：14345481
> 
> 赞同：0
> 
> 时间：2013-01-15T19:35:16.357
> 
> 标签：php, mysql, forms, checkbox, sql-update

I've got a query which selects a list of the un-returned loans from my loan table, and so I'm trying to make a checkbox for each row of which when selected the value for the "returned" field is set to " 1”（真），单击提交按钮后，所选行应更新为“1”......由于某种原因，我的查询似乎没有显示所有未归还的书籍，尽管当我回显计数时，正确显示数字：S 这是我到目前为止的代码（提前感谢您的帮助！）

```
// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

$sql="SELECT * FROM $tbl_name";
$result=mysql_query($sql);

$count=mysql_num_rows($result);
?>

<table width="400" border="0" cellspacing="1" cellpadding="0">
<tr>
<td><form name="form1" method="post" action="">
<table width="400" border="0" cellpadding="3" cellspacing="1" bgcolor="#CCCCCC">
<tr>
<td bgcolor="#FFFFFF">&nbsp;</td>
<td colspan="4" bgcolor="#FFFFFF"><strong>Delete multiple rows in mysql</strong> </td>
</tr>
<tr>
<td align="center" bgcolor="#FFFFFF">#</td>
<td align="center" bgcolor="#FFFFFF"><strong>Loan ID</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Username</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Book ID</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Return Date</strong></td>
</tr>

<?php
while($rows=mysql_fetch_array($result)){
?>

<tr>
<td align="center" bgcolor="#FFFFFF"><input name="checkbox[]" type="checkbox"         id="checkbox[]" value="<? echo $rows['loan_id']; ?>"></td>
<td bgcolor="#FFFFFF"><? echo $rows['loan_id']; ?></td>
<td bgcolor="#FFFFFF"><? echo $rows['username']; ?></td>
<td bgcolor="#FFFFFF"><? echo $rows['book_id']; ?></td>
<td bgcolor="#FFFFFF"><? echo $rows['return_date']; ?></td>
</tr>

<?php
}
?>

<tr>
<td colspan="5" align="center" bgcolor="#FFFFFF"><input name="update" type="submit"         id="update" value="UPDATE LOANS"></td>
</tr>

<?php

// Check if delete button active, start this
if($update){
 for($i=0;$i<$count;$i++){
 $update_id = $checkbox[$i];
$sql = "UPDATE $tbl_name SET returned = "1" WHERE loan_id='$del_id'";
$result = mysql_query($sql);
}
// if successful redirect to delete_multiple.php
if($result){
echo "<meta http-equiv=\"refresh\" content=\"0;URL=test_checkbox.php\">";
}
}
mysql_close();
?>

</table>
</form>
</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:56:47.003

此代码将帮助您开始转换为`mysqli_`. 它只会检索您的记录集。

```
<?php

  $link = mysqli_connect("$host", "$username", "$password", "my_db");

  /* check connection */
  if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
  }

  $query = "SELECT loan_id, username, book_id, return_date FROM '" . mysqli_real_escape_string($link, $tbl_name) . "'";
  //echo "login log query is $query <br />\n";
  $result = mysqli_query($link, $query) or die(mysqli_error($link));

  if ($result = mysqli_query($link, $query)) {
?>
<table width="400" border="0" cellspacing="1" cellpadding="0">
<tr>
<td><form name="form1" method="post" action="">
<table width="400" border="0" cellpadding="3" cellspacing="1" bgcolor="#CCCCCC">
<tr>
<td bgcolor="#FFFFFF">&nbsp;</td>
<td colspan="4" bgcolor="#FFFFFF"><strong>Delete multiple rows in mysql</strong> </td>
</tr>
<tr>
<td align="center" bgcolor="#FFFFFF">#</td>
<td align="center" bgcolor="#FFFFFF"><strong>Loan ID</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Username</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Book ID</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Return Date</strong></td>
</tr>
<?php

    /* determine number of rows result set */
    $count = mysqli_num_rows($result);

    /* fetch associative array */
    while($row = mysqli_fetch_assoc($result)) {
?>

<tr>
<td align="center" bgcolor="#FFFFFF"><input name="checkbox[]" type="checkbox" id="checkbox[]" value="<? echo $row['loan_id']; ?>"></td>
<td bgcolor="#FFFFFF"><? echo $row['loan_id']; ?></td>
<td bgcolor="#FFFFFF"><? echo $row['username']; ?></td>
<td bgcolor="#FFFFFF"><? echo $row['book_id']; ?></td>
<td bgcolor="#FFFFFF"><? echo $row['return_date']; ?></td>
</tr>

<?php
    }

    /* free result set */
    mysqli_free_result($result);

?>
<tr>
<td colspan="5" align="center" bgcolor="#FFFFFF"><input name="update" type="submit" id="update" value="UPDATE LOANS"></td>
</tr>
</table>
<?php
  }

  /* close connection */
  mysqli_close($link); 
```

# php - PHP表单验证无法正常工作

> ID：14345482
> 
> 赞同：0
> 
> 时间：2013-01-15T19:35:20.017
> 
> 标签：php, registration

我的页面上有一个注册脚本，它的处理方式如下：

```
<?php
include "inc/config.php";
        $firstname = $_POST['firstname'];
        $lastname = $_POST['lastname'];
        $email = $_POST['email'];
        $pass = $_POST['pass'];
        $conditions = $_POST['conditions'];
        if($firstname==""||$lastname==""||$email==""||$pass==""||$conditions==""){
        echo "
        <p>Tiedoissa oli puutteita :(</p>
            <ul>";
            if($firstname == ""){
                echo "<li>Etunimi puuttuu.</li>";
            }
            if($lastname == ""){
                echo "<li>Sukunimi puuttuu. </li>";
            }
            if($email == ""){
                echo "<li>Sähköposti puuttuu. </li>";
            }
            if($pass == ""){
                echo "<li>Salasana puuttuu. </li>";
            }
            if($conditions == ""){
                echo "<li>Luitko ehdot? </li>";
            }
        echo "</ul>";
        return false;
        }
        $rq = "INSERT INTO Users (Firstname,Lastname,Email,Password) VALUES ($firstname,$lastname,$email,$pass)";
        if(!mysqli_query($dblink,$rq)){
            echo "Rekisteröityminen epäonnistui tuntemattomasta syystä! :(";
        }
        else{
            echo "Rekisteröinti onnistui!<br>
            Käyttäjätunnuksesi on <strong>$email</strong> ja salasanasi on <strong>$pass</strong>.<br>
            Voit nyt kirjautua sisään. 
            ";
        }

?> 
```

正如我尝试过的那样，我很难找到比较表单值的正确方法`==`，`===`并`NULL`进行比较。但我总是收到所有错误消息，或者一个都没有。我做错了什么？

这是表单的html：

```
<form class="form-horizontal span6" method="post" id="registrationform">
          <div class="control-group">
            <label class="control-label">Etunimi</label>
            <div class="controls">
              <input type="text" name="firstname">
            </div>
          </div>
          <div class="control-group">
            <label class="control-label">Sukunimi</label>
            <div class="controls">
              <input type="text" name="lastname">
            </div>
          </div>
          <div class="control-group">
            <label class="control-label">Sähköposti</label>
            <div class="controls">
              <input type="text" name="email">
            </div>
          </div>
          <div class="control-group">
            <label class="control-label">Salasana</label>
            <div class="controls">
              <input type="password" name="pass">
            </div>
          </div>
          <div class="control-group">
            <div class="controls">
              <label class="checkbox">
                <input type="checkbox" name="newsletter"> Tilaan uutiskirjeen
              </label>
              <label class="checkbox">
                <input type="checkbox" name="conditions"> Hyväksyn ehdot
              </label>
              <button type="submit" class="btn btn-success" id="registerbtn">Rekisteröidy</button>
            </div>
          </div>
        </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:37:36.283

由于您的代码不在**函数**中，因此 **返回 false；**没有按预期工作，代码继续在下面执行。你的比较可能已经很好了。更改**返回 false；****死（）**；

 **好的，这可能是问题所在

```
if($firstname=="" || $lastname=="" || $email=="" || $pass=="" || $conditions==""){ 
```

您正在检查这一点，即使您不提交表单并且看起来一切都有错误，该检查也有效。因此，您只需要在提交表单时进行比较，而不是在正常加载时进行比较。因此，将您的 php 代码包装在一些**isset**上，例如

```
if(isset($_POST["firstname"]) && isset($_POST["lastname"]))
{
 // all your php code
} 
```

除此之外，您的代码运行良好。它比较像你期望的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T19:44:04.930

嗨，您可以使用 php fonction 例如使用 if(!isset($firstname)) 或 if(empty($firstname)) 如果您现在想要 $firstname 为 Null**

# javascript - jQuery：在尝试选择动态创建的跨度时被难住了

> ID：14345483
> 
> 赞同：1
> 
> 时间：2013-01-15T19:35:20.093
> 
> 标签：javascript, jquery, onclick

我有一个动态创建`<span class="remove-row">`的，我无法`click()`触发该事件。在 JS 中仍然相对绿色，我***猜***我的问题出在我的选择器上。

这一切都可以**[在 jsFiddle 上看到](http://jsfiddle.net/mOrloff/48nbs/21/)**。
（请参阅 JS 窗格的最底部）

这是**生成**的html 的精简版本：

```
...
<section >
    <div class="look-like-input textfield droppable" restrict-children="1" id="">
        <span class="remove-row"><span>X</span></span>
    </div>
    <br />
    <div class="look-like-input textarea droppable" id="deprecated"></div>
</section>
... 
```

这就是我***试图***获取点击事件的方式：

```
...
$(".remove-row").click(function() {
    alert("Hello");
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T19:42:05.823

Because `.click` gets bound when the page is ready, use `.on` to allow for the bind to happen as the items get added to the dom. While `.live` would work, it has been deprecated.

```
$("#drop-zone").on('click', '.remove-row', function() {
    alert("Hello");
}); 
```

Drop zone id is added for efficiency and scope limiting.

[http://jsfiddle.net/48nbs/22/](http://jsfiddle.net/48nbs/22/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T19:37:57.783

考虑使用：

```
jQuery(".remove-row").on("click", function () {alert('hello');}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T19:39:18.427

尝试像这样使用 on() ：

```
$(".remove-row").on('click',function() {
    alert("Hello");
}); 
```

这将处理动态创建的元素。

你也可以使用 live() 但从 `live()`jQuery 1.7 开始不推荐使用——http: [//api.jquery.com/live/](http://api.jquery.com/live/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T19:39:46.510

我有一个类似的问题。这对我有用：

$(".remove-row").on("点击", function () { alert('hello'); } );

或者 Amd4632 设计的 .live 版本也应该可以工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T19:37:43.920

在设置侦听器的代码已经执行之后，您可能正在生成 html。在这种情况下，监听器将永远不会附加到动态生成的 span 元素上。

**编辑**：
事实上，我刚刚检查了你的小提琴，我没有看到在任何地方设置监听器的脚本代码。我假设您在页面加载后执行代码。在这种情况下，如果尚未生成 DOM 元素，则不会附加侦听器。

# javascript - TypeScript 中的“声明类”和“接口”有什么区别

> ID：14345485
> 
> 赞同：131
> 
> 时间：2013-01-15T19:35:25.033
> 
> 标签：javascript, typescript

在 TypeScript 中，当创建 .d.ts 源声明文件时，哪个更可取，为什么？

```
declare class Example {
    public Method(): void; 
} 
```

或者

```
interface Example {
    Method(): void;
} 
```

我可以说的区别是接口不能有静态方法，所以你必须为此使用一个类。两者都不产生任何 JS 输出，所以也许没关系？

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2013-01-15T22:27:16.760

`interface`当您只想描述对象的形状时。从来没有为接口生成代码——它们只是类型系统中的一个工件。取决于它是否具有`implements`子句，您将看到类的代码生成没有区别。

`declare class`用于描述将在外部存在的*现有*类（通常是 TypeScript 类，但并非总是如此）时（例如，您有两个 .ts 文件，它们编译为两个 .js 文件，并且都通过`script`标签包含在内在网页中）。如果您从`class`using继承`extends`（无论基类型是 a`declare class`还是常规`class`），编译器将生成所有代码以连接原型链和转发构造函数等等。

如果您尝试从`declare class`应该是接口的继承，您将遇到运行时错误，因为生成的代码将引用没有运行时表现的对象。

相反，如果您只是`implement`一个应该是 a 的接口`declare class`，您将不得不自己重新实现所有成员，并且不会利用来自可能的基类和函数的任何代码重用在运行时检查原型链将拒绝您的对象，因为它实际上不是基类的实例。

如果你有 C++ 的背景，你可以粗略地认为是`interface`和`typedef`作为`declare class`一个`extern`构造函数的声明，该构造函数在此编译单元中严格缺乏定义。

`interface`从纯粹的消费端（编写命令式代码，不添加新类型）来看，和之间的唯一区别`declare class`是你不能`new`使用接口。但是，如果您打算`extend`/`implement`其中一种类型在 new`class`中，您绝对必须在`interface`和之间正确选择`declare class`。只有其中一个会起作用。

两条规则会很好地为您服务：

*   `new`类型的名称是否与运行时实际存在的构造函数（可调用的东西）对齐（例如`Date`，是，但`JQueryStatic`不是）？如果*没有*，你肯定想要`interface`
*   我是在处理来自另一个 TypeScript 文件的编译类，还是类似的东西？如果*是*，请使用`declare class`

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-01-15T20:38:13.343

您可以实现接口：

```
class MyClass implements Example {
    Method() {

    }
} 
```

而该`declare class`语法实际上旨在用于为不是用 TypeScript 编写的外部代码添加类型定义 - 所以实现是“其他地方”。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-04-19T21:05:07.373

通俗地说，`declare`在`.ts`/ `d.ts`files 中用于告诉编译器我们应该期望我们将`declaring`存在于那个环境中的关键字，即使它没有在当前文件中定义。这将允许我们在使用声明的对象时具有类型安全性，因为 Typescript 编译器现在知道其他一些组件可能会提供该变量。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-11-21T14:22:22.333

## TS之间的`declare`区别：`interface`

**宣布：**

```
declare class Example {
    public Method(): void; 
} 
```

在上面的代码中`declare`，让 TS 编译器知道在某处`Example`声明了类。这并不意味着该类被神奇地包含在内。作为程序员，您有责任在声明该类时（使用`declare`关键字）使该类可用。

**界面：**

```
interface Example {
    Method(): void;
} 
```

An`interface`是仅存在于 typescript 中的虚拟构造。typescript 编译器将它用于类型检查的唯一目的。当代码编译为 javascript 时，整个结构将被删除。typescript 编译器使用接口来检查对象是否具有正确的结构。

例如当我们有以下接口时：

```
interface test {
  foo: number,
  bar: string,
} 
```

我们定义的具有这种接口类型的对象需要与接口完全匹配：

```
// perfect match has all the properties with the right types, TS compiler will not complain.
  const obj1: test = {   
    foo: 5,
    bar: 'hey',
  } 
```

# windows-phone-7 - 如何在没有定期延迟的情况下在后台运行 WP7 应用程序？

> ID：14345486
> 
> 赞同：0
> 
> 时间：2013-01-15T19:35:25.673
> 
> 标签：windows-phone-7, whatsapp

我知道有后台任务，但它们的限制是大约每 25 分钟运行一次。我想知道“Whats App”或“LINE”之类的应用程序是如何解决这个问题的，因为消息接收者几乎会立即收到通知，即使应用程序没有打开......

# php - 执行简单的数据库查询时，CakePHP 的响应非常慢

> ID：14345488
> 
> 赞同：1
> 
> 时间：2013-01-15T19:35:39.260
> 
> 标签：php, cakephp, cakephp-model

我是 CakePHP 框架的新手，正在尝试设置一个“Hello World”项目。在处理它时，我在执行简单的数据库查询时遇到了来自 CakePHP 的非常缓慢的响应。

以下是我已完成的步骤：

1.  下载 CakePHP 框架 (2.3.0 RC1) 并进行设置
2.  使用名为“Tests”的空表创建一个“Test”数据库。
3.  编辑默认的 AppController.php 文件，如下所示：

    ```
    class AppController extends Controller {

        var $uses = array('Test');

        function say_hello() {
        $this->Test->query("select * from test where id=0");
        echo "hello";
        }
    } 
    ```

4.  之后，我访问了链接“http://localhost/app/say_hello”，响应时间超过 1s。

如果我将查询语句注释如下：

```
class AppController extends Controller {

    var $uses = array('Test');

    function say_hello() {
        //$this->Test->query("select * from test where id=0");
        echo "hello";
    }
} 
```

然后，只用了大约 60ms 的响应时间。

这对我来说似乎不正确，因为对空表执行简单查询不应该花费 ~ 940 毫秒。我尝试使用 DebugKit 进行调试，结果表明 ControllerAction（在这种情况下，say_hello 操作非常简单）占用了超过 1 秒的处理时间。另请注意，缓慢问题不是由 DB 引起的，因为 DebugKit 显示在执行 say_hello 操作时只有一个查询，并且该查询几乎需要 0 毫秒才能完成。

我不确定是什么导致了这种缓慢。任何有经验的 CakePHP 成员可以告诉我在这种情况下出了什么问题吗？我还应该做些什么来解决和解决问题？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T19:54:28.100

在调试模式下，CakePHP 将在短时间内刷新您的数据库绑定、对象缓存和模式，描述映射到定义模型的表。

在测试 CakePHP 应用程序性能之前，请确保将调试级别更改为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-24T07:51:02.210

请检查您的网络服务器和数据库服务器是否在同一台物理机器上。
如果它们在同一台物理机上，则花费的时间应该更少，通常为几百毫秒。如果它们不在同一台物理机上，那么网络延迟就会很重要。大家可以深入了解 CakePHP 框架的源码，它使用 PDO 连接数据库并调用 PDO 的一些函数，由于网络延迟时间，每次都需要相当长的时间。所以这个解决方案可能不合适，你应该编写一个特定的 API，然后你的 PHP 代码调用 API 而不是直接查询数据库。

# mysql - mysqlcheck 使用 100% cpu 导致服务器问题，服务器无响应

> ID：14345490
> 
> 赞同：2
> 
> 时间：2013-01-15T19:35:53.167
> 
> 标签：mysql, database, cpu-usage

我有一个托管许多数据库（〜30）的mysql服务器（5.0.58）。几年前，我开始遇到一些 db 的性能问题，我最终通过执行每晚的 cron 作业来使用以下命令检查/优化数据库来解决这个问题：

```
mysqlcheck --check --auto-repair --analyze --optimize --silent --all-databases 
```

此命令通常在 ~ 20 分钟内执行。这就像一个魅力，直到上个月。现在执行此命令时，机器上的 CPU 会出现峰值，机器几乎没有响应。我唯一能做的就是重新启动 mysqld 服务（等待 10-15 分钟后才能登录）。在查看mysql进程列表时出现这种情况，似乎有些表也可能被锁定，但我仍在研究这个。

任何人都知道为什么这个命令会锁定服务器？我打算尝试将命令限制为特定数据库（而不是 --all-databases），看看这是否有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:12:03.680

**为什么 mysqlcheck 会卡住计算机？**

也许你用尽了所有可用的 RAM，而 mysql 开始使用虚拟交换空间，这需要大量的磁盘读取/写入并耗尽所有 CPU。通过添加 RAM 或一次在更少的数据库上执行 mysqlcheck 来测试这个理论。

也许您已经填满了您的硬盘空间并且进程必须等待可用的硬盘空间，因为它已被保留（即使驱动器未完全填满）。通过释放硬盘空间来测试这个理论。

也许您的 CPU 正在抖动，这意味着 CPU 所做的大部分工作是在任务之间切换，而不是执行任务。尝试按顺序对每个单独的数据库执行命令。

**解决方法：**

尝试`mysqlcheck`以较低的优先级运行，以便您仍然可以登录并且不会阻止其他进程运行。这取决于您使用的操作系统。

# php - 去掉url中的后缀

> ID：14345492
> 
> 赞同：0
> 
> 时间：2013-01-15T19:36:13.100
> 
> 标签：php, apache, .htaccess, mod-rewrite, pretty-urls

是的，我知道这已经被问了数百次了。但我就是找不到真正有效的版本。目前，到目前为止，我尝试过的所有方法都在 remove 中工作`.php`，但那是问题开始的时候。我网站上的一些页面取决于`$_GET`请求，例如`profile`所以当您访问 url [http://www.example.com/profile?username=System](http://www.example.com/profile?username=System)时，您将获得 404，而没有`?username=System`它可以正常工作。我目前的代码是

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T19:40:00.787

您需要`[QSA]`在 RewriteRule 的末尾（附加查询字符串）。

```
RewriteRule ^(.*)$ $1.php [QSA] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:14:26.580

你可以试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{QUERY_STRING}  .       [NC]
RewriteCond %{REQUEST_URI}  ^/([^/]+) [NC]
RewriteRule .*   %1.php               [L] 
```

会默默地映射这个

`http://www.example.com/ScriptName?key1=val1`

至：

`http://www.example.com/ScriptName.php?key1=val1`

# html - Twitter Bootstrap 自定义主题为 1200px / 980px

> ID：14345497
> 
> 赞同：2
> 
> 时间：2013-01-15T19:36:57.967
> 
> 标签：html, css, twitter-bootstrap, responsive-design

我正在使用 twitter 引导 css 框架。我仅为桌面宽度设备（1200 及以上）创建了自定义导航，并希望为每个宽度布局（980 像素、平板电脑、手机）创建更多导航。虽然我已经设置了`visible-desktop`，当我将浏览器的大小从 1200px 调整为更小的导航栏时，我的导航栏就被破坏了，但它仍然没有被隐藏。

```
<div id="navigation-div" class="span6 offset2">

    <div id="navigation-nophone" class="visible-desktop">
        <ul class="menu clearfix">
            <li class="active"><a href="">Home</a></li>
            <li><a href="">News</a></li>
            <li><a href="">Demoes</a></li>
            <li><a href="">Features</a></li>
            <li><a href="">About</a></li>
            <li><a href="">Contact</a></li>
        </ul>
    </div>

    <div id="navigation-phone" class="visible-phone">
        <ul class="menu">
            <li class="active"><a href="">Home</a></li>
            <li><a href="">News</a></li>
            <li><a href="">Demoes</a></li>
            <li><a href="">Features</a></li>
            <li><a href="">About</a></li>
            <li><a href="">Contact</a></li>
        </ul>
    </div>

</div> 
```

所以我认为当窗口调整为小于 1200 像素时，布局宽度变为 980 像素，但引导程序仍然认为它是桌面。我不知道如何解决它。

我为 980px 宽度布局和 1200px 宽度布局定义新参数没有问题，但不知道如何从一个切换到另一个（可见桌面对于这两种情况都是正确的）。

**附言**

*手机的导航开关工作正常！*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:25:02.210

Fluid bootstap 具有 980px 和 1200px 的桌面布局。它们都被认为是*桌面*，因此可见桌面等[响应](http://twitter.github.com/bootstrap/scaffolding.html#responsive)式实用程序类对于您想要做的事情来说不够灵活。

查看响应式引导 css 文件中的 @media 请求，这可能是您想要的方式。

如果您对此不熟悉，这里有一个基本示例，说明如何更改不同窗口宽度的背景颜色：http: [//jsfiddle.net/panchroma/ZNSVr/](http://jsfiddle.net/panchroma/ZNSVr/)

CSS足够合乎逻辑，

```
/* regular desktop */
@media (min-width: 980px) {
body{
background-color: green;
}

}

/* wide desktop */
@media (min-width: 1200px) { 
body{
background-color: olive;
}

} 
```

注意不同@media 块的顺序通常很重要。

@tahdhaze09 的建议被认为是最佳实践，使用 @media 请求可能足够强大，可以让你做你想做的事，并且只使用一组导航链接。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T21:38:57.043

您应该为所有设备使用相同的导航，并允许 CSS 处理导航格式。

查看 Bootstrap 的默认示例并检查导航代码。这些示例在您扩展和收缩视口时效果很好。

[http://twitter.github.com/bootstrap/examples/hero.html](http://twitter.github.com/bootstrap/examples/hero.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-13T07:07:18.510

尝试将此 css 放入您的自定义 style.css 文件中

```
@media (min-width: 768px) and (max-width: 1280px) {
    .navbar-collapse.collapse {
        display: none !important;
    }
    .navbar-collapse.collapse.in {
        display: block !important;
    }
    .navbar-header .collapse, .navbar-toggle {
        display:block !important;
    }
    .navbar-header {
        float:none;
    }
    .navbar-nav {
        float: none !important;
        margin: 0px;
    }
    .navbar-nav {
        margin: 7.5px -15px;
    }
    .nav > li {
        position: relative;
        display: block;
    }
    .navbar-nav > li {
        float: none !important;
    }
    .nav > li > a {
        position: relative;
        display: block;
        padding: 10px 15px;
    }
    .navbar-collapse {
        padding-right: 15px;
        padding-left: 15px;
        overflow-x: visible;
        border-top: 1px solid transparent;
        box-shadow: 0px 1px 0px rgba(255, 255, 255, 0.1) inset;
    }
    .nav {
        padding-left: 0px;
        margin-bottom: 0px;
        list-style: outside none none;
    }
} 
```

# macos - 移动到新 Mac 后 XAMPP 服务器崩溃

> ID：14345499
> 
> 赞同：0
> 
> 时间：2013-01-15T19:37:07.277
> 
> 标签：macos, xampp

我使用 Migration Assistant 将我的应用程序移动到了新的 Mac Mini。当我尝试启动 XAMPP 服务器时，它崩溃说启动路径不可访问。我已经设置了允许每个人读或写的权限，但它仍然不起作用。我在某处错过了许可吗？这是转储的第一部分：

```
Process:         XAMPP Control [3203] 
```

路径：/Applications/XAMPP/XAMPP Control.app/Contents/MacOS/XAMPP 控件标识符：org.apachefriends.XAMPP_Control 版本：1.7.3-beta1 (B8B.1) 代码类型：X86 (Native) 父进程：launchd [178 ] 用户名：501

日期/时间：2013-01-15 11:29:17.183 -0800 操作系统版本：Mac OS X 10.8.2 (12C3103) 报告版本：10

自上次报告以来的间隔：414553 秒自上次报告以来的崩溃：1076645 自上次报告以来的每个应用程序间隔：3055 秒自上次报告以来的每个应用程序崩溃：8 匿名 UUID：E9F33D4F-5808-AB42-1B4B-32662668A5AF

崩溃的线程：13

异常类型：EXC_BREAKPOINT (SIGTRAP) 异常代码：0x0000000000000002、0x0000000000000000

应用程序特定信息： ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“启动路径不可访问”

应用程序特定的回溯 1：0 CoreFoundation 0x92f5412b**raiseError + 219 1 libobjc.A.dylib 0x9924e52e objc_exception_throw + 230 2 CoreFoundation 0x92eb3bbb +[NSException raise:format:] + 139 3 Foundation 0x9708ddc5 -[NSConcreteTask launchWithDictionary:] + 521 4 Foundation 0x97100447 -[NSConcreteTask 03 0508 Apache Apache ApacheTask 启动] + -[ApacheModule(PRIVAT) syntaxCheck] + 252 6 Apache 0x03f7ebb0 -[ApacheModule runStartTests] + 120 7 XAMPP Control 0x0000727f -[XPModule start] + 143 8 XAMPP Control 0x00008343 -[XPModuleViewController doStart] + 73 9 Foundation 0x970c11d] -[NSThread main + 45 10 基础 0x970c115b _*NSThread* _main** + 1396 11 libsystem_c.dylib 0x9821c557 _pthread_start + 344 12 libsystem_c.dylib 0x98206cee thread_start + 34

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:33:07.720

问题是迁移助手没有复制所有的 XAMPP 文件。xamppfiles 目录为空。现在让 MySQL 运行。

# java - 如何在 UI 中编辑数据时警告用户，以便我可以警告他们覆盖，或提示他们保存？（爪哇）

> ID：14345500
> 
> 赞同：6
> 
> 时间：2013-01-15T19:37:08.470
> 
> 标签：java, javafx-2

如何在 UI 中编辑数据时警告用户，以便在他们从其他来源加载或提示他们保存时警告他们覆盖？(JavaFX2.2)

我将在多个选项卡和 2 或 3 个带有按钮的表格中包含 50 多个文本字段，以添加和删除行。

我想知道是否有一个全局“isDirty”布尔标志并且可以在按钮上设置 onAction 处理程序，但我必须在每个文本字段和文本区域上设置[onKeyTyped处理程序吗？](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#onKeyTypedProperty)（它会减慢速度吗？）。Java 是否会跟踪是否编辑了任何字段，如果是，我可以从中捕获该信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:52:44.900

一个可能干净的解决方案是拥有一种 MyWholeDataset 类，该类在 UI 启动时填充数据，以及另一个用于实际 UI 显示的“克隆”对象。然后，每次用户从 UI 更改数据时，您都会更改第二个对象（克隆的对象）。最后，您应该实现 Comparable 接口。这告诉您存在差异，然后您可以使用某种“getDeltas”方法，该方法返回一组不同的字段名称或返回字段名称作为键的 hasmap 和包含旧/新的对象值对作为值。

# jquery - Spring MVC 控制器返回 JSON - 错误 406

> ID：14345505
> 
> 赞同：0
> 
> 时间：2013-01-15T19:37:16.983
> 
> 标签：jquery, ajax, json, spring-mvc, spring-roo

在 StackOverflow 中搜索给定标题的所有相关链接后，我发布了这个问题。

我的控制器代码是：

```
@RequestMapping(value="/user/update", method = RequestMethod.GET, headers="Accept=*/*")
    public @ResponseBody List<Users> getContentSummaryData(@RequestParam String user, @RequestParam String userid){
        return Users.findAllUsers();
    } 
```

我的jQuery请求如下：

```
$.getJSON("user/update", { user: "user", userid:"1230" }, function(data){
        console.log(data);
    }); 
```

但像往常一样，控制台中出现 406 错误，如下所示：

```
GET http://localhost:8080/mycontext/user/update?user=user&userid=1230 406 (Not Acceptable) 
```

根据此处（StackOverflow）中找到的每个配置，我检查并重新检查。自过去 1 小时以来，我一直在与问题作斗争。有人可以帮忙吗？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T19:50:01.620

发完这个我又研究了一下。我发现需要两个 JAR。我将它们添加到类路径中。

[jackson-mapper-asl-1.7.4.jar](http://repo1.maven.org/maven2/org/codehaus/jackson/jackson-core-asl/1.7.4/jackson-core-asl-1.7.4.jar) & [jackson-core-asl-1.7.4.jar](http://repo1.maven.org/maven2/org/codehaus/jackson/jackson-core-asl/1.7.4/jackson-core-asl-1.7.4.jar)

它现在工作正常。呼……

# ios - Xcode“Release-iphoneos”文件夹

> ID：14345518
> 
> 赞同：2
> 
> 时间：2013-01-15T19:38:19.847
> 
> 标签：ios, xcode, build

当我过去在以前的 Xcode 中构建应用程序时（我忘记了版本，4.earlysomething），该应用程序在“Release-iphoneos”文件夹中构建。现在，有了新版本（4.5），它在“Debug-iphoneos”中构建。它是不同类型的可执行文件吗？我想现在它有一些额外的调试信息 - 我怎样才能让它像以前一样构建为“发布”类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T20:50:54.730

在 Xcode 中，转到 Project 菜单、Manage Schemes、Edit，然后仔细检查您的构建配置、Debug 或 Release。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-25T17:51:12.863

您可以通过单击菜单来简单地构建一个版本

**产品 -> 构建 -> 分析**

您可以在`/Users/<user>/Library/Developer/Xcode/DerivedData/<project_name>-<hash>/Build/Products/Release-*`

# java - 为什么 newInstance 使用的内存比预期的要多？

> ID：14345519
> 
> 赞同：1
> 
> 时间：2013-01-15T19:38:23.580
> 
> 标签：java, memory

在 Java 中，我想弄清楚一个对象在分配时使用的确切内存量。

仅仅调用构造函数和度量是行不通的，因为它可能会在构造函数期间分配其他对象。此外，我更喜欢使用实时计算给定 VM 中已用内存的方法。这可能不是标准的 VM，因此计算字段并做出明智的猜测是不够的。

无论如何，到目前为止，我发现您可以使用`newConstructorForSerialization`在`sun.reflect.ReflectionFactory`.

这可行，但不知何故，对 newInstance 的调用分配的内存块比预期的多。

例如，类

```
public class a {
    Integer a;
} 
```

和

```
public class b {
    Integer b = new Integer(12345);
} 
```

两者都应该给出相同的结果。在这种情况下，在默认 VM 中使用 Java 7 时为 16 个字节。

但是，我的代码给出了 32 个字节（总是比预期多 16 个字节）。我可以通过从结果中删除 16 来弥补这一点，但我需要 100% 确定它总是分配那个额外的块。对我来说，知道内存使用的上限比确切的数量更重要。因此，如果我 100% 确定始终添加此块，则从结果中减去 16 才是安全的。

我的代码：（使用 -XX:-UseTLAB VM 参数运行）

```
import java.lang.reflect.Constructor;

import sun.reflect.ReflectionFactory;

public class test {

    public static void main(String[] args) throws Exception {
        prepare(a.class, Object.class);
        System.out.println(memUse());
        System.out.println(memUseSimple());
    }

    private static long memUseSimple() {
        long start = Runtime.getRuntime().freeMemory();
        a a = new a();
        return start - Runtime.getRuntime().freeMemory();
    }

    private static long memUse() throws Exception {
        Object o0 = intConstr.newInstance();
        long start = Runtime.getRuntime().freeMemory();
        Object o1 = intConstr.newInstance();
        return start - Runtime.getRuntime().freeMemory() - 16;
    }

    private static Constructor<?> intConstr;

    private static void prepare(Class<?> clazz, Class<?> parent) throws Exception {
            intConstr = ReflectionFactory.getReflectionFactory()
                    .newConstructorForSerialization(clazz,
                            parent.getDeclaredConstructor());
            return;
    }
} 
```

编辑：澄清：我想知道为什么我需要减去`intConstr.newInstance()`调用的 16 字节开销，如果我可以 100% 确定这个开销总是相同的（或者至少不少于 16 字节）。

即使您在上面的代码中将 a 替换为 b，它仍然给出 16 作为结果`memUse()`，但不是`memUseSimple()`。我只关心`memUse()`但添加了简单的方法作为比较。

我知道`intConstr.newInstance()`在另一个 VM 上可能会有不同的开销。这并不重要，我需要知道的是，如果它在当前 VM 上产生 16 字节的开销，它是否总是会产生 16 字节的开销（在此运行时）？此外，与 just 相比，这种开销来自哪里`new a()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:41:48.523

事情或多或少很简单。我使用以下代码检查和之间是否存在差异`new`，`newInstance()`我找不到任何（Java 7、64 位、`-XX:-UseTLAB -verbose:gc`）：

```
public final static long usedMemory()
{
    return Runtime.getRuntime().totalMemory() 
               - Runtime.getRuntime().freeMemory();
}

public static void main(String[] args) throws Exception
{
    // we get the default ctor
    Constructor<?> ctor = ReflectionFactory
            .getReflectionFactory()
            .newConstructorForSerialization(
                    Main.class, Object.class.getDeclaredConstructor());
    // warm up newInstance
    Object d = ctor.newInstance();
    // warm up Runtime
    System.out.println(usedMemory());
    // warm up Main
    Object b = new Main();
    // force GC
    System.gc();
    // get currently used memory
    final long mem = usedMemory();
    Object a = new Main();
    System.out.println(usedMemory() - mem);
    Object c = ctor.newInstance();
    System.gc();
    System.out.println(usedMemory() - mem);
    System.out.println(a + ", " + b + ", " + c + ", " + d);
} 
```

代码看起来像这样，因为我们必须欺骗编译器不要优化它的任何部分并让系统初始化一些背景内容。我得到的输出是：

```
384024
[GC 381K->400K(249664K), 0.0006325 secs]
[Full GC 400K->264K(249664K), 0.0040675 secs]
16
[GC 264K->296K(249664K), 0.0002040 secs]
[Full GC 296K->264K(249664K), 0.0023534 secs]
32 
```

...这正是我所期望的。'Main' 类型的一个对象消耗 16 个字节，如果我分配另一个对象，我们将消耗 32 个字节。第二个值是与第一次“主要”分配之前已用内存值的差值。

`Main`类是否包含成员变量也没有任何区别。我试过没有，有`Integer integer;`and `Integer integer = Integer.of(42);`，结果总是一样的。

`newInstance`您遇到的开销来自通话背景中正在发生的事情。在我的示例中，我通过强制 GC 运行来弥补这一点。

这可能有点作弊，但这个例子只是为了表明现在和之间有区别`new`，`newInstance`只是后者在后台分配了更多的东西。由于这些对象在伊甸园空间中分配，并且不会在任何 GC 循环中存活，恕我直言，它们可以被忽略。

# google-maps-api-3 - 谷歌地图 - KML fusiontable 查询错误

> ID：14345520
> 
> 赞同：0
> 
> 时间：2013-01-15T19:38:30.070
> 
> 标签：google-maps-api-3, google-fusion-tables

我有一个融合表，它是多边形 kml 和电子表格的合并。根据谷歌文档，我的查询应该有效，但它没有。它永远不会加载，谷歌显示此错误消息：“数据可能仍在加载。拖动或刷新页面以找出答案”。如果我在没有查询的情况下加载页面，它可以工作，但不会显示通过 Google Drive 在 fusiontable 中设置的图层样式（颜色和不透明度）。谷歌tablefusion有什么问题？

```
layer_mun = new google.maps.FusionTablesLayer({     
    query: {
      select: 'geometry',
      from: '1Nrj1Yka8RQ3RW9QlERbOqJnw9Bq2vbFWlAJ0eeQ',
      where: "CODE_CS LIKE '%722000%'"
    }
});
layer_mun.setMap(map); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:01:14.813

根据表中的列名[CODE_CS](https://www.google.com/fusiontables/DataSource?docid=1Nrj1Yka8RQ3RW9QlERbOqJnw9Bq2vbFWlAJ0eeQ) 应该是 Code_CS

[例子](https://www.google.com/fusiontables/DataSource?snapid=S840401nswi)

# linux - 从文件 shell 脚本中提取子字符串

> ID：14345522
> 
> 赞同：0
> 
> 时间：2013-01-15T19:38:36.123
> 
> 标签：linux, shell, grep, substring

> **可能重复：**
> [我需要从文件 shell 脚本中获取子字符串](https://stackoverflow.com/questions/14325857/i-need-get-a-substring-from-a-file-shell-script)

我需要一点帮助。我只有一个包含命令捕获的文件。

> tcpdump -Xvv -n proto \tcp -c 10 > capture.txt 2>/dev/null

输出 capture.txt 的结果是这样的：

```
15:29:18.164566 IP (tos 0x0, ttl 1, id 2394, offset 0, flags [none], proto TCP (6), length 125)
    10.0.0.243.61908 > 10.0.0.184.80: Flags [S], cksum 0x3d53 (correct), seq 1831050442, win 8192, options [mss 1460,nop,wscale 8,nop,nop,sackOK], length 0
    0x0000:  4600 0024 0000 0000 0102 3ad3 0a00 0000  F..$......:.....
    0x0010:  e000 0001 9404 0000 1101 ebfe 0000 0000  ................
   ..............
15:29:18.164567 IP (tos 0x0, ttl 128, id 2394, offset 0, flags [none], proto TCP (6), length 125)
    10.0.0.184.80 > 10.0.0.243.61908: Flags [S.], cksum 0x135e (correct), seq 2906424792, ack 1831050443, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
    0x0000:  4600 0024 0000 0000 0102 3ad3 0a00 0000  F..$......:.....
    0x0010:  e000 0001 9404 0000 1101 ebfe 0000 0000  ................
    0x0020:  0000 0000 0000 0000 2323 2332 2323
    0x0030:  0300 0000 0000 0000 0000 0000 0000       ..............
15:29:18.164569 IP (tos 0x0, ttl 1, id 2394, offset 0, flags [none], proto TCP (6), length 125)
    10.0.0.243.61908 > 10.0.0.184.80: Flags [S], cksum 0x3d53 (correct), seq 1831050442, win 8192, options [mss 1460,nop,wscale 8,nop,nop,sackOK], length 0
    0x0000:  4600 0024 0000 0000 0102 3ad3 0a00 0000  F..$......:.....
    0x0010:  e000 0001 9404 0000 1101 ebfe 0000 0000  ................
    0x0020:  0300 0000 0000 0000 0000 0000 0000       .............. 
```

我正在尝试使用 grep 命令： grep -A 但我无法使其工作。

我需要在 ip 目标地址之后找到目标端口。

输出必须是：

**80**

**61908**

**80**

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:51:50.503

这似乎在这里工作。

```
tcpdump -Xvv -i wlan1 -n -nn proto \TCP -c 10 > capture.txt

sed -n 's/.*\.\(.*\): Flags.*/\1/p' capture.txt
443
35673
443
35071
80 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T21:57:02.153

```
grep -oP '> \d+\.\d+\.\d+\.\d+\.\d+' capture.txt | cut -d. -f5 
```

# jsf-2 - 数据表标题中的 selectBooleanCheckBox 未调用 actionListener

> ID：14345523
> 
> 赞同：0
> 
> 时间：2013-01-15T19:38:40.617
> 
> 标签：jsf-2, primefaces

我有一个包含三列的数据表，每列的标题中有一个复选框。当我选择一个复选框时，我必须更新其他 2 个复选框。这些列下的每一行都是一个带有验证器的输入框。当我提交表单时，我可以看到验证器正在执行，但我的 actionListener 没有被调用。也没有堆栈跟踪。请建议。

```
 <p:dataTable id="segmentRangeTable" var="rank"
    value="#{segmentSetup.ranks}">

    <p:column headerText="Segment Names">
        <p:outputPanel layout="block">
            <p:inputText id="segmentName" style="text-transform:uppercase"
                value="#{segmentSetup.userSegment.segmentNames[rank].name}"
                validator="#{segmentSetup.validateNames}" immediate="true" />
            <p:message for="segmentName" />
        </p:outputPanel>
    </p:column>

    <p:column>
        <f:facet name="header">
            <p:outputPanel layout="block">
                <p:outputLabel value="AUM" />
                <br />

                <p:outputPanel id="AUMcheckBox">
                    <p:selectBooleanCheckbox itemLabel="Default Rating" 
                        styleClass="defaultRating"
                        value="#{segmentSetup.defaultRating eq 'AUM' ? true : false}"
                        disabled="#{!segmentSetup.userSegmentTypesMap['AUM'].selected}" >
                        <p:ajax update=":tabView:clientSegmentationTabForm:segmentRangeTable:REREVcheckBox :tabView:clientSegmentationTabForm:segmentRangeTable:REVcheckBox :tabView:clientSegmentationTabForm:segmentRangeTable:AUMcheckBox" process="@this" immediate="true"
                            listener="#{segmentSetup.changeDefaultRating('AUM')}" />
                    </p:selectBooleanCheckbox>

                </p:outputPanel>

            </p:outputPanel>
        </f:facet>
        <p:inputText id="AUM" styleClass="AUM"
            value="#{segmentSetup.userSegmentTypesMap['AUM'].segmentValues[rank].rangeMinValue}"
            disabled="#{!segmentSetup.userSegmentTypesMap['AUM'].selected || (rank==fn:length(segmentSetup.ranks))}"
            validator="#{segmentSetup.validateRanges}" immediate="true" >
            <f:convertNumber maxFractionDigits="2" currencySymbol="$"
                type="currency" minFractionDigits="0" />
        </p:inputText>
        <p:message for="AUM" />
    </p:column>

    <p:column>
        <f:facet name="header">
            <p:outputPanel>
                <p:outputLabel value="GROSS REVENUE" />
                <br />
                <p:outputPanel id="REVcheckBox">
                    <p:selectBooleanCheckbox itemLabel="Default Rating" 
                        styleClass="defaultRating"
                        value="#{segmentSetup.defaultRating eq 'GRRVN' ? true : false}"
                        disabled="#{!segmentSetup.userSegmentTypesMap['GRRVN'].selected}">
                        <p:ajax update=":tabView:clientSegmentationTabForm:segmentRangeTable:REREVcheckBox :tabView:clientSegmentationTabForm:segmentRangeTable:REVcheckBox :tabView:clientSegmentationTabForm:segmentRangeTable:AUMcheckBox" immediate="true"
                            listener="#{segmentSetup.changeDefaultRating('GRRVN')}">
                        </p:ajax>
                    </p:selectBooleanCheckbox>
                </p:outputPanel>
            </p:outputPanel>
        </f:facet>
        <p:outputPanel>
            <p:inputText id="GRRVN" styleClass="GRRVN"
                value="#{segmentSetup.userSegmentTypesMap['GRRVN'].segmentValues[rank].rangeMinValue}"
                disabled="#{!segmentSetup.userSegmentTypesMap['GRRVN'].selected  || (rank==fn:length(segmentSetup.ranks)) }"
                validator="#{segmentSetup.validateRanges}" immediate="true" >
                <f:convertNumber maxFractionDigits="2" currencySymbol="$"
                    type="currency" />
            </p:inputText>
            <p:message for="GRRVN" />
        </p:outputPanel>
    </p:column>

    <p:column>
        <f:facet name="header">
            <p:outputPanel>
                <p:outputLabel value="REC REVENUE" />

                <br />
                <p:outputPanel id="REREVcheckBox">
                    <p:selectBooleanCheckbox itemLabel="Default Rating" 
                        styleClass="defaultRating"
                        value="#{segmentSetup.defaultRating eq 'RERVN' ? true : false}"
                        disabled="#{!segmentSetup.userSegmentTypesMap['RERVN'].selected}">
                        <p:ajax update=":tabView:clientSegmentationTabForm:segmentRangeTable:REREVcheckBox :tabView:clientSegmentationTabForm:segmentRangeTable:REVcheckBox :tabView:clientSegmentationTabForm:segmentRangeTable:AUMcheckBox" immediate="true"
                            listener="#{segmentSetup.changeDefaultRating('RERVN')}">
                        </p:ajax>
                    </p:selectBooleanCheckbox>
                </p:outputPanel>

            </p:outputPanel>
        </f:facet>

        <p:inputText id="RERVN" styleClass="RERVN"
            value="#{segmentSetup.userSegmentTypesMap['RERVN'].segmentValues[rank].rangeMinValue}"
            disabled="#{!segmentSetup.userSegmentTypesMap['RERVN'].selected  || (rank==fn:length(segmentSetup.ranks)) }"
            validator="#{segmentSetup.validateRanges}" >
            <f:convertNumber maxFractionDigits="2" minFractionDigits="0"
                currencySymbol="$" type="currency" />
        </p:inputText>

        <p:message for="RERVN" />
    </p:column>

</p:dataTable>

<p:outputPanel layout="block" styleClass="blx-align-rl">
    <p:commandButton id="saveButton" value="Save" process="@form"
        update="@form" actionListener="#{segmentSetup.save}" >
        <f:param name="VALIDATE" value="true" />
        </p:commandButton>
    <p:commandButton id="cancelButton" value="Cancel" update="@form"
        actionListener="#{segmentSetup.reset}" immediate="true" />
</p:outputPanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-25T20:11:15.730

我在尝试使用选择状态来呈现或不呈现另一个面板时遇到了类似的问题。我基本上使用的是 JSF 2 和 Richfaces。最后对我有用的是使用组件中的“onchange”并调用一个小js，将我的面板属性更改为“none”和“important”。

它看起来几乎像这样：

```
 <h:selectBooleanCheckbox
    id="idCheck"
    value="#{bean.hidePanel}"
    onchange="changePanelView()">
</h:selectBooleanCheckbox> 
```

和js：

```
 <script>
        function changePanelView() {
            if (document.getElementById('idForm:idCheck').checked) {
                document.getElementById('idPanel').style.setProperty('display', '', 'important');
            } else {
                document.getElementById('idPanel').style.setProperty(
'display','none', 'important');
            }
        }
    </script> 
```

这个页面已经使用了一些 ajax 技巧，但是我从这种情况中删除了，因为它重新渲染了面板，覆盖了属性“display”

# c++ - pyinstaller - C 运行时 DLL - 应用程序崩溃

> ID：14345525
> 
> 赞同：0
> 
> 时间：2013-01-15T19:39:01.363
> 
> 标签：c++, python, dll, pyinstaller

当我尝试使用 py2exe 构建我的应用程序时，由于缺少 Microsoft DLL（未安装 Microsoft Visual C++ 200X Redistributable 的 PC），可执行文件在某些​​ PC 上崩溃。这个建议没有解决问题： http: [//www.py2exe.org/index.cgi/Tutorial#Step52](http://www.py2exe.org/index.cgi/Tutorial#Step52)

因此，我尝试了 pyinstaller，它会生成所有必需的 dll + 清单。在同一台 PC 上，我没有遇到缺少 DLL 的问题，但无论如何，可执行文件在没有任何合理消息或创建日志文件的情况下崩溃。

如何解决问题？甚至可以在用户手动安装的 DLL 上独立构建可执行文件？因为我想从我的 python 脚本创建一个可移植的应用程序。

# c# - 从产生多个实例的 Windows 服务调用 Process.Start

> ID：14345526
> 
> 赞同：-1
> 
> 时间：2013-01-15T19:39:02.737
> 
> 标签：c#, windows-services

我的 C# 应用程序创建一个批处理脚本，然后生成一个进程来执行此脚本。

此应用程序需要作为 Windows 服务运行。此外，我还需要一个独立模式，我将通过命令行参数指示它应该只运行一次并退出。

问题是当我运行独立版本时，我可以看到应用程序（启动器）的多个实例正在生成。但是，如果我要从 Visual Studio 中运行它，它的行为即执行一次并退出。

有人可以帮我了解发生了什么吗？

这是带有 main() 的类

```
static class Launcher
{
    static void Main(String[] args)
    {
        if(args[0] == "/standalone")
        {
            using(MyService service = new MyService())
            {
                service.StartService();
                service.StopService();
            }
        }
        else
        {
            System.ServiceProcess.ServiceBase[] ServicesToRun;
            ServicesToRun = new System.ServiceProcess.ServiceBase[] 
            { new MyService() };
            System.ServiceProcess.ServiceBase.Run(ServicesToRun);
        }
    }
} 
```

MyService 类：

```
public partial class MyService : ServiceBase
{
    protected override void OnStart(string[] args)
    {
        Process p = new Process();
        p.StartInfo.FileName = "C:\abc.bat";
        p.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
        p.Start();
    }

    protected override void OnStop()
    {
        // Log something
    }

    public void StartService()
    { this.OnStart(null); }

    public void StopService()
    { this.OnStop() }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:46:59.403

如果有多个实例，则 process.start 被调用不止一次。我建议您写出日志并跟踪为什么您的 process.start 被多次调用

# scheme - 这可以变成尾递归函数吗？

> ID：14345527
> 
> 赞同：4
> 
> 时间：2013-01-15T19:39:03.747
> 
> 标签：scheme, racket, tail-recursion, htdp

通过 HtDP 并遇到一个问题是：**设计函数乘法。它消耗一个自然数 n 并将其与某个任意数 x 相乘，而不使用 *。**

这就是我想出的：

```
(define (multiply n x)
  (cond
    [(= x 1) n]
    [else (+ n (multiply n (- x 1)))])) 
```

它有效，但我认为这不是最好的解决方案。由于这可以作为 for 循环解决，根据我的理解，这应该是尾递归的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T19:52:03.440

尾递归解法的关键点：保持一个不变的 n * x + r = const。在这种情况下，当 x 为零时，r 包含 n * x。

```
(define (iter-mul n x r)
  (cond ((= x 0) r)
        (else (iter-mul n (- x 1) (+ r n))))) 
```

您可以将其用作：

```
(define (mul n x) (iter-mul n x 0)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T20:16:50.877

既然其他人已经向您展示了如何使函数尾递归，这里是一个函数的替代版本，用于将两个正整数相乘，它比您给出的要快得多。你明白这个函数是如何工作的吗？

```
(define (times x y)
  (let loop ((x x) (y y) (z 0))
    (if (zero? x) z
      (loop (quotient x 2) (+ y y)
            (if (odd? x) (+ y z) z))))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T19:51:36.983

可能不是最优雅的，但这至少是尾递归的：

```
(define (acc a n x)
  (if(= x 0)
    a
    (acc (+ a n) n (- x 1))))

(define (multiply n x)
  (acc 0 n x)) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-15T19:53:23.227

通过使用用于存储结果的累加器参数，可以轻松地将过程转换为尾递归。以下是为`n >= 0`and定义的`x >= 0`，并且我使用命名`let` (`loop`是尾递归过程，*而不是*循环构造) 以避免需要显式定义辅助过程或向过程添加另一个参数。这是如何做到的：

```
(define (multiply n x)
  (let loop ((acc 0)
             (x x))
    (cond
      [(= x 0) acc]
      [else (loop (+ n acc) (- x 1))]))) 
```

另请注意，您的代码中有错误，请尝试运行`(multiply 1 0)`- 无限循环。

# oracle-apex - Oracle APEX 中的可重用组件

> ID：14345529
> 
> 赞同：3
> 
> 时间：2013-01-15T19:39:15.430
> 
> 标签：oracle-apex

我是一位经验丰富的 Oracle Forms 开发人员，今天我第一次看到了 Oracle APEX。老实说，我只是快速浏览了 Apress 为初学者准备的一本书，但我注意到没有提到如何创建可重用组件。在我作为 Oracle Forms 开发人员的经验中，我处理过库、对象库和来自其他模块的引用对象，但我在今天浏览的书中没有找到类似的内容。所以，我想从你那里知道 - 经验丰富的 Oracle APEX 开发人员 - 是否有办法创建“真正的”可重用组件，这意味着不仅仅是制作“复制”（或导出），而是创建一个可供许多人参考的组件APEX 应用程序，以便只修改该组件一次并查看所有引用它的应用程序的更改。

我想这在 APEX 中一定不是那么容易完成的任务，因为它是一个以数据库为中心的应用程序，但我非常感谢一些关于保持 DRY 的最佳实践的提示。我知道 APEX 在设计时并没有考虑到敏捷开发，但我认为组件重用应该是每个“快速”开发框架中必须的。

非常感谢您给我的宝贵提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T10:48:32.200

APEX 不提供与表单对象库相同的解决方案，而是提供“订阅”概念，您可以在其中从工作区中的主应用程序订阅共享组件（LOV、模板、授权......）。

第二种可能性是在 APEX 中使用插件。插件可以是您放在页面上的任何东西，甚至可以是包含一些逻辑的进程。插件通常用于向 APEX 添加新功能（例如地图区域、分组选择列表、模态窗口……），但它们也非常适合代码的重用。

不知道为什么您认为 APEX 在构建时没有考虑到敏捷，并且由于 APEX 在数据库中运行而无法正常工作。我在 APEX 中没有看到任何不适用于敏捷方法的东西。

无论如何，要回答您的问题：查看**Subscriptions** and **Plugins**。

# python - 带有 rabbitMQ 的 django-celery-email - 无法连接。插座关闭

> ID：14345531
> 
> 赞同：0
> 
> 时间：2013-01-15T19:39:20.293
> 
> 标签：python, django, celery

我尝试使用 django-celery-email。我使用rabbitMQ

如果我运行：`python manage.py celeryd -l info`

我有这些错误：

```
(job)user@user-R520-R522-R620:~/Pulpit/job/dp$ python manage.py celeryd -l info
/home/user/Pulpit/job/local/lib/python2.7/site-packages/celery/utils/__init__.py:71: CPendingDeprecationWarning: 
    The 'BROKER_HOST' setting is scheduled for deprecation in     version 2.5 and removal in version v4.0\.     BROKER_URL

  warnings.warn(w)
/home/user/Pulpit/job/local/lib/python2.7/site-packages/celery/utils/__init__.py:71: CPendingDeprecationWarning: 
    The 'BROKER_USER' setting is scheduled for deprecation in     version 2.5 and removal in version v4.0\.     BROKER_URL

  warnings.warn(w)
/home/user/Pulpit/job/local/lib/python2.7/site-packages/celery/utils/__init__.py:71: CPendingDeprecationWarning: 
    The 'BROKER_PASSWORD' setting is scheduled for deprecation in     version 2.5 and removal in version v4.0\.     BROKER_URL

  warnings.warn(w)
/home/user/Pulpit/job/local/lib/python2.7/site-packages/celery/utils/__init__.py:71: CPendingDeprecationWarning: 
    The 'BROKER_PORT' setting is scheduled for deprecation in     version 2.5 and removal in version v4.0\.     BROKER_URL

  warnings.warn(w)
/home/user/Pulpit/job/local/lib/python2.7/site-packages/celery/utils/__init__.py:71: CPendingDeprecationWarning: 
    The 'BROKER_VHOST' setting is scheduled for deprecation in     version 2.5 and removal in version v4.0\.     BROKER_URL

  warnings.warn(w)

 -------------- celery@user-R520-R522-R620 v3.0.13 (Chiastic Slide)
---- **** ----- 
--- * ***  * -- [Configuration]
-- * - **** --- . broker:      amqp://ruser@localhost:5672//
- ** ---------- . app:         default:0xa8dfb2c (djcelery.loaders.DjangoLoader)
- ** ---------- . concurrency: 2 (processes)
- ** ---------- . events:      OFF (enable -E to monitor this worker)
- ** ---------- 
- *** --- * --- [Queues]
-- ******* ---- . celery:      exchange:celery(direct) binding:celery
--- ***** ----- 

[Tasks]
  . djcelery_email.tasks.SendEmailTask

[2013-01-15 20:31:23,718: WARNING/MainProcess] celery@user-R520-R522-R620 ready.
[2013-01-15 20:31:26,735: ERROR/MainProcess] consumer: Cannot connect to amqp://ruser@127.0.0.1:5672//: Socket closed.
Trying again in 2.00 seconds...

[2013-01-15 20:31:31,746: ERROR/MainProcess] consumer: Cannot connect to amqp://ruser@127.0.0.1:5672//: Socket closed.
Trying again in 4.00 seconds... 
```

在哪里找到错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:07:14.657

您的`RabbitMQ`实例似乎没有运行 - 这就是您`consumer: Cannot connect to amqp://ruser@127.0.0.1:5672//: Socket closed.`在错误日志中看到的原因。您的`RabbitMQ`实例是否正在运行并接受连接`127.0.0.1:5672`？

# excel - 在幻灯片放映期间 Excel 未激活

> ID：14345532
> 
> 赞同：0
> 
> 时间：2013-01-15T19:39:36.003
> 
> 标签：excel, powerpoint, vba

嗨，我使用的是 Office 2007，我在 ppt 中创建了一个宏，用于打开 xlsm 文件，但在幻灯片放映期间，如果我从命令按钮开始，它会打开 excel 应用程序和文件，但不会激活它。这是我的代码：

```
Dim appExcel as object
Const ExcelObject = "Excel.Application"
Set appExcel = CreateObject(ExcelObject)
appExcel.Visible = True
appExcel.File.Open:="path name"
appExcel.Workbooks("workbookname").Activate 
```

所以它继续激活没有错误，幻灯片仍然有效，而不是 excel 文件。

我尝试发送 alt+tab 键，但幻灯片仍然处于活动状态。我的问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T19:47:41.840

```
Dim appExcel as object
Const ExcelObject = "Excel.Application"
Set appExcel = CreateObject(ExcelObject)
With appExcel
    .Visible = True
    .File.Open:="path name"
    .Workbooks("workbookname").Activate
    AppActivate .Caption '<<<<<<<
End With 
```

# c# - 需要一个接受实体 id 并包含的通用 EF 方法

> ID：14345533
> 
> 赞同：5
> 
> 时间：2013-01-15T19:39:42.073
> 
> 标签：c#, entity-framework, generics, frameworks, entity

我正在使用 Entity Framework 5 并且有一个通用存储库，其中有几种方法，例如下面的两个 Get() 方法：

```
public TEntity GetById(int id)
{
    return DbSet.Find(id);
}

public TEntity Get(
    Expression<Func<TEntity, bool>> filter = null,
    IEnumerable<string> includePaths = null)
{
    IQueryable<TEntity> query = DbSet;

    if (filter != null)
    {
        query = query.Where(filter);
    }

    if (includePaths != null)
    {
        query = includePaths.Aggregate(query, (current, includePath) => current.Include(includePath));
    }

    return query.SingleOrDefault();
} 
```

这些都非常有用，但是当我想进行稍微复杂的 GetById() 调用并同时检索一些实体引用时，如下所示：

```
var user = _userRepository.GetById(
    id,
    new List<string> { "Roles", "Invoices" }); 
```

我最终不得不为每个实体推出特定于实体（非通用）的 GetById(id, includes) 调用，以便我可以访问它们在 lambda 中的特定 Id 字段，即 UserId 或 InvoiceId 等。

```
public User GetById(
    int id,
    IEnumerable<string> includes)
{
    return Get(
        (u => u.UserId == id),
        includes);
} 
```

似乎我无法以我的平均 EF 技能计算出如何以通用方式将 DbSet.Find(id) 的优点与 .Include() 调用结合起来。

所以问题是 - 有没有一种方法可以编写一个通用的 EF 方法，我可以使用它来通过它的 id 获取实体并包含一些引用，进而消除像我一样编写实体特定的 GetById(id, includes) 调用的需要'上面已经完成了。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T19:43:17.937

以下是我在通用存储库中的操作方式：

```
 public T GetBy(Expression<Func<T, bool>> predicate, params Expression<Func<T, object>>[] includes)
    {
        var result = GetAll();
        if (includes.Any())
        {
            foreach (var include in includes)
            {
                result = result.Include(include);
            }
        }
        return result.FirstOrDefault(predicate);
    } 
```

请注意，这是使用 lambda 包含和 FirstOrDefault 而不是 find 但结果是相同的。

[您可以在此处](https://github.com/lukemcgregor/StaticVoid.Repository)查看我的通用存储库的完整源代码。

您可以通过以下方式调用它：

```
var entity = myRepository.GetBy(e=>e.Id == 7, /*Includes*/ e=> e.ANavigationProperty, e=>e.AnotherNavProperty); 
```

**编辑：**

我不再使用通用存储库，而是使用扩展方法即时构建查询。我发现这得到了更好的重用。（请参阅我关于[可组合存储库](http://blog.staticvoid.co.nz/2015/9/8/composable_repositories)的文章）

# ios - 为什么不声明实例变量？

> ID：14345535
> 
> 赞同：1
> 
> 时间：2013-01-15T19:39:46.400
> 
> 标签：ios, objective-c, compiler-errors, warnings

我正在使用 xcode 4.5.2 和 LLVM 4.1。我期望我不需要合成类属性也不需要声明实例变量，但是我收到错误，指出这些期望是错误的。

我的课：

```
@interface Test : NSManagedObject
@property (strong, nonatomic) NSString *string;
@property (strong, nonatomic) NSString *number;
@end

@implementation Test
- (NSString*)string {
    return _string;
}
@end 
```

1)**使用未声明的标识符“字符串”**

我还在 WWDC 2010 Session 144 中看到了以下内容：

```
return self->string; 
```

但这给使用点符号的建议带来了错误。

2)**在“Test *”类型的对象上找到属性“string”；你的意思是用“。”访问它吗？操作员？**

我也收到警告`number`：

3)**属性 'number' 需要定义方法 'number' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现**

我完全不知道这里发生了什么。它开始让我的血液有点沸腾。我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T19:46:39.730

首先，点符号是你的朋友！

其次，当您尝试使用时，`->`您必须访问 ivar。在最新版本的 Xcode 和 LLVM 中，如果您自己没有使用`@synthesize`.

所以你会这样做`self->_string`。当您使用`.`推荐时，您可以访问该属性。这也可能是您收到警告的原因`number`，因为`self->number`不存在。

* * *

**编辑：**针对您正在使用的事实，`NSManagedObject`我绝对推荐使用属性（如托德推荐的）。NSManagedObjects 期望你使用`@dynamic`，因为 Core Data 在后台做了很多事情，Apple 建议你不要改变它。

如果您想要自定义 getter/setter，我会考虑使用以下方法的[另一个 SO 问题](https://stackoverflow.com/a/6008138/334934)`primitive`：

```
- (NSString *)name
{
    [self willAccessValueForKey:@"name"];
    NSString *myName = [self primitiveName];
    [self didAccessValueForKey:@"name"];
    return myName;
} 
```

当然，[Apple Docs 关于此事](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreData/Articles/cdAccessorMethods.html#//apple_ref/doc/uid/TP40002154-SW1)。以及与iOS 6相关的[相关问题/解决方案。](https://stackoverflow.com/questions/12510849/ios6-automatic-property-synthesize-not-working/12544653#12544653)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T20:26:48.590

如果您为属性实现了 setter 和 getter 方法，则编译器假定您还负责后备存储，并且不会`_string`为您创建实例变量。

您可以自己手动声明它，也可以使用`@synthesize string = _string;`强制编译器为您声明它。后者将根据属性类型为 ivar 提供正确的内存管理语义（强、弱等）。

对于托管对象，您需要实现 MishieMoo 的答案，但这是您的 NSObject 子类没有问题中所述的 _string 变量的原因。

[这里](http://useyourloaf.com/blog/2012/08/01/property-synthesis-with-xcode-4-dot-4.html)有更详细的介绍

# jquery - jQuery单击以随机化字符串上的数字仅触发一次

> ID：14345537
> 
> 赞同：0
> 
> 时间：2013-01-15T19:39:58.323
> 
> 标签：jquery

我需要在每次点击时随机化字符串的数字部分，因此样本后的 1 应该随机化（**sample1**）。我关心数据样本部分，但同时显示值以显示相同的点击并没有任何好处。我怀疑这个数字只是以下点击的字符串。

JS 小提琴[示例](http://jsfiddle.net/cLhSr/2/)。

HTML：

```
<input id="input" value="sample1" data-sample="sample1"/>
<button id="button">Randomize</button> 
```

查询：

```
 var newRandomNumber = (Math.random()*10)+1;
  $("#button").click(function () {
    var value = Math.floor(newRandomNumber);
    $("#input").attr('data-sample', '').attr('data-sample', 'sample' + value).val('sample' + value);
    return false;
  }); 
```

非常感谢任何提示。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T19:41:09.490

您需要在每次点击时获取一个新的随机数，而不仅仅是在页面加载时，因此将随机变量放在 click 函数中：

```
$("#button").click(function(e) {
    e-preventDefault();
    var newRandomNumber = (Math.random()*10)+1,
        ran_value = 'sample' + Math.floor(newRandomNumber);
    $("#input").data('sample', ran_value).val(ran_value);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T19:42:11.513

在点击事件中移动实际的随机数生成。**[jsFiddle 示例](http://jsfiddle.net/cLhSr/2/)**

```
 $("#button").click(function () {
    var newRandomNumber = (Math.random() * 10) + 1;
    var value = Math.floor(newRandomNumber);
    $("#input").attr('data-sample', '').attr('data-sample', 'sample' + value).val('sample' + value);
    return false;
  }); 
```

# ruby-on-rails - Ember.js 路由器 v2 动态 slug 为空

> ID：14345539
> 
> 赞同：0
> 
> 时间：2013-01-15T19:40:05.357
> 
> 标签：ruby-on-rails, ember.js, handlebars.js

在以下示例中，使用新的 Router v2 API，ember 应用程序的行为与预期相同，但有一个异常。当悬停在动态创建的链接上时，使用已注册的#linkTo Handlebars 助手，用户的 id 在 url 中为空。

单击链接会转换到正确的状态，但 url 仍然是“空”。

是什么赋予了？我缺少一个简单的约定吗？

```
App = Ember.Application.create({
  autoinit: false,
  rootElement: "body"
});

App.Store = DS.Store.extend({
  revision: 11, 
  adapter: DS.RESTAdapter.create({})
});

App.User = DS.Model.extend({
  email: DS.attr('string'),
  username: DS.attr('string')
});

App.ApplicationView = Ember.View.extend({
  templateName: 'application'
});

App.ApplicationController = Ember.Controller.extend();

App.HomeController = Ember.Controller.extend({
});

App.UserController = Ember.ObjectController.extend({
});

App.Router.map(function(match) {
  match("/").to("home");
  match("/users/:user_id").to("user");    
});

App.HomeRoute = Ember.Route.extend({
  setupController: function(controller) {
    controller.set('users', App.User.find());
  }
});

App.UserRoute = Ember.Route.extend({
  setupControllers: function(controller, user) {
    controller.set('content', user);
  }
});

App.initialize();

<script type="text/x-handlebars" data-template-name="home">

    {{#if users.isLoaded}}

      {{#each item in users}}
          <div class="user">
            {{item.email}}
          </div>

          <div class="user">
            {{#linkTo user item}}
              {{item.username}}
            {{/linkTo}}
          </div>

      {{/each}}

    {{else}}
      <p class="loading">Loading Users</p>
    {{/if}}

</script>   

<script type="text/x-handlebars" data-template-name="user">

    <div class="user">
      <h3>{{username}}</h3>
      <p class="email">{{email}}</p>
    </div>

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:05:05.217

实际上，这可能是对原始问题的最完整答案：

```
App.Store = DS.Store.extend({
  revision: 11, 
  adapter: DS.RESTAdapter.create({
    serializer: DS.JSONSerializer.create({
      primaryKey: function(type) {
        return '_id';
      }
    })
  })
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T21:24:21.340

我用你的代码创建了一个小提琴，它似乎工作正常：[JS Fiddle Example](http://jsfiddle.net/seankeating/R2SPs/2/)

我假设 API 返回的模型就像我定义的那样`App.User.FIXTURES`。让我知道这是否不正确。

我正在使用 EmberJS 版本：v1.0.0-pre.2-291-g4785901，最后一次提交：4785901 (2013-01-05 18:57:16 +0100)，你可以在[这里](https://raw.github.com/seankeating/ember-js-example/9f0110489d20ac773143c34eef1665776554f6b1/vendor/scripts/ember-latest.js)找到它。尝试查看此版本的 Ember 是否解决了您的问题。

此外，为了您的信息，他们最近再次更新了 EmberJS 路由，并且路由器中的匹配不再有效。您可以在此处查看新格式：[EmberJS.com 定义您的路线](http://emberjs.com/guides/routing/defining-your-routes/)。我的“进行中” [Ember-JS-Example](https://github.com/seankeating/ember-js-example)与您的路由类似，但已更新，如果您愿意，可以将其用作示例。新样式，来自 EmberJS.com：

```
App.Router.map(function() {
  this.route("about", { path: "/about" });
  this.route("favorites", { path: "/favs" });
}); 
```

# android - 应用程序在尝试在列表视图中显示数据时被强制关闭

> ID：14345543
> 
> 赞同：0
> 
> 时间：2013-01-15T19:40:27.590
> 
> 标签：android, database, android-layout, listview, cursor

我试图在列表视图中显示我的数据库中的内容，但是每次打开它时，它都会被强制关闭。这是我的代码：

```
public class AlertViews extends Activity {

private DatabaseHelper db;
private SQLiteDatabase datab;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.viewalerter);
    ListView listview = (ListView)findViewById(R.id.viewalert);

//  db.getReadableDatabase();
    Cursor c=datab.query(DatabaseHelper.DATABASE_TABLE, new String[]{DatabaseHelper.KEY_ALERT,DatabaseHelper.KEY_TRIGGER}, null, null,null,null,String.format("%s", DatabaseHelper.KEY_ALERT));
    String x=c.getColumnName(0);
    String y=c.getColumnName(1);
    String[] cl={x,y};
    int[] v={R.id.nameal,R.id.trigna};
    SimpleCursorAdapter simcr=new SimpleCursorAdapter(this,R.layout.simplerow,c,cl,v,0);
    listview.setAdapter(simcr);

}

} 
```

这是上述活动的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ListView
android:id="@+id/viewalert"
android:layout_width="wrap_content"
android:layout_height="fill_parent"
/>

<TextView
android:id="@+id/nameal"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
/>

<TextView
android:id="@+id/trigna"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
/>
</RelativeLayout> 
```

这是我的日志文件：

```
01-16 01:01:14.845: E/AndroidRuntime(806): FATAL EXCEPTION: main
01-16 01:01:14.845: E/AndroidRuntime(806): java.lang.RuntimeException: Unable to start activity ComponentInfo{alertme.app/alertme.app.AlertViews}: java.lang.NullPointerException
01-16 01:01:14.845: E/AndroidRuntime(806):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
01-16 01:01:14.845: E/AndroidRuntime(806):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
01-16 01:01:14.845: E/AndroidRuntime(806):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
01-16 01:01:14.845: E/AndroidRuntime(806):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
01-16 01:01:14.845: E/AndroidRuntime(806):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-16 01:01:14.845: E/AndroidRuntime(806):  at android.os.Looper.loop(Looper.java:137)
01-16 01:01:14.845: E/AndroidRuntime(806):  at android.app.ActivityThread.main(ActivityThread.java:4745)
01-16 01:01:14.845: E/AndroidRuntime(806):  at java.lang.reflect.Method.invokeNative(Native Method)
01-16 01:01:14.845: E/AndroidRuntime(806):  at java.lang.reflect.Method.invoke(Method.java:511)
01-16 01:01:14.845: E/AndroidRuntime(806):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-16 01:01:14.845: E/AndroidRuntime(806):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-16 01:01:14.845: E/AndroidRuntime(806):  at dalvik.system.NativeStart.main(Native Method)
01-16 01:01:14.845: E/AndroidRuntime(806): Caused by: java.lang.NullPointerException
01-16 01:01:14.845: E/AndroidRuntime(806):  at alertme.app.AlertViews.onCreate(AlertViews.java:21)
01-16 01:01:14.845: E/AndroidRuntime(806):  at android.app.Activity.performCreate(Activity.java:5008)
01-16 01:01:14.845: E/AndroidRuntime(806):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
01-16 01:01:14.845: E/AndroidRuntime(806):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T19:44:26.930

您正在尝试使用您的变量`datab`而不初始化它。就在这儿：

```
Cursor c=datab.query(DatabaseHelper.DATABASE_TABLE, new String[]{DatabaseHelper.KEY_ALERT,DatabaseHelper.KEY_TRIGGER}, null, null,null,null,String.format("%s", DatabaseHelper.KEY_ALERT)); 
```

# c++ - 将格式字符串转换为二进制的简单方法

> ID：14345544
> 
> 赞同：0
> 
> 时间：2013-01-15T19:40:39.200
> 
> 标签：c++, byte, converter

我很想知道是否有一种简单的方法（即使用 clib、stl 或 stdlib 函数）将格式化（编码？）字节字符串转换为字节数组（无符号字符）：

示例，格式化字节字符串： **\x8C\xB5{\x00\x00**

到： **{0x8C，0xB5，0x7B，0x00，0x00}**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:48:32.613

您要问的是将编码的字符串**解码**为普通的字符数组。

回答你的问题，不（AFAIK）。

但是可以很容易地实现。

看看这个。

[http://www.dzone.com/snippets/decode-encoded-query-string-c](http://www.dzone.com/snippets/decode-encoded-query-string-c)

完全按照您在 26 行代码中所要求的。只差一个 % 而不是 \x

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:43:06.600

逐个字符地遍历字符串。如果你看到一个`'\\'`字符，你检查下一个字符是否是 a `'x'`，然后取下一个或两个字符（如果它们是十六进制数字）并将它们转换为字节值并将该值添加到目标向量。任何其他字符都按原样添加到目标。继续直到字符串结束。

# ruby-on-rails - 将 ActiveRecord 的查询缓存用于非查询缓存

> ID：14345547
> 
> 赞同：1
> 
> 时间：2013-01-15T19:41:01.767
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching, rails-activerecord

在 ActiveRecord 的查询缓存中存储特定于请求的数据有多合适？在我看来，他们已经完成了所有艰苦的工作，比如让它成为线程安全的等等。

`ActiveRecord::Base.connection.query_cache['some']['var'] = 42`

还有这个，但它不是线程安全的：[https ://github.com/tricycle/rack-per_request_cache](https://github.com/tricycle/rack-per_request_cache)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:52:45.817

更好用`ActiveSupport::Cache::Store`。下面的示例显示了一个内存存储，但 Rails 还提供了其他支持，包括 memcached。

```
cache = ActiveSupport::Cache::MemoryStore.new

cache.read("city")   # => nil
cache.write("city", "Duckburgh")
cache.read("city")   # => "Duckburgh" 
```

文档：[http ://api.rubyonrails.org/classes/ActiveSupport/Cache/Store.html](http://api.rubyonrails.org/classes/ActiveSupport/Cache/Store.html)

# c++ - 整数转换错误？

> ID：14345548
> 
> 赞同：2
> 
> 时间：2013-01-15T19:41:03.040
> 
> 标签：c++, casting, integer, integer-overflow

考虑以下代码：

```
#include <iostream>
using namespace std;

int main() {
    // the following is expected to not print 4000000000
    // because the result of an expression with two `int`
    // returns another `int` and the actual result 
    // doesn't fit into an `int` 
    cout << 2 * 2000000000 << endl; // prints -294967296

    // as such the following produces the correct result
    cout << 2 * 2000000000U << endl; // prints 4000000000
} 
```

我玩了一下将结果转换为不同的整数类型，并遇到了一些奇怪的行为。

```
#include <iostream>
using namespace std;

int main() {
    // unexpectedly this does print the correct result
    cout << (unsigned int)(2 * 2000000000) << endl; // prints 4000000000

    // this produces the same wrong result as the original statement
    cout << (long long)(2 * 2000000000) << endl; // prints -294967296
} 
```

我预计以下两个语句都不会产生正确的结果，为什么一个成功而另一个没有？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T20:43:29.973

在试图回答这个问题的人们中发生了太多的困惑。

让我们检查一下：

`2 * 2000000000`

这是一个`int`乘以一个`int`。§5/4 告诉我们：

> 如果在计算表达式期间，结果未在数学上定义或不在其类型的可表示值范围内，则行为未定义。

这个结果是在数学上定义的，但它是否在 的可表示值范围内`int`？

那要看。在许多常见架构`int`上，有 32 位来表示值，最大值为 2,147,483,647。由于其数学结果是 4,000,000,000，因此这样的架构将无法表示该值并且行为未定义。（这几乎解决了这个问题，因为现在整个程序的行为是未定义的。）

但这仅取决于平台。如果`int`改为 64 位宽（注意：`long long`保证至少有 64 位来表示值），结果会很好。

让我们稍微解决一下这个问题，然后直奔主题：

```
int x = -294967296; // -294,967,296 
```

让我们进一步说这符合`int`（对于 32 位`int`它确实如此）的范围。

现在让我们将其转换为`unsigned int`：

```
unsigned int y = static_cast<unsigned int>(x); 
```

的价值是`y`多少？**它与 的位表示无关`x`**。

没有“位转换”，编译器只是将位视为无符号数量。转换与*值*一起使用。a转换为 an的*值*在 §4.7/2 中定义：`signed int``unsigned int`

> 如果目标类型是无符号的，则结果值是与源整数一致的最小无符号整数（模 2 ^n其中 n 是用于表示无符号类型的位数）。[注意：在二进制补码表示中，这种转换是概念性的，位模式没有变化（如果没有截断）。——尾注]

对于我们在 32 位 ( `unsigned`)`int`系统上的我们来说，这意味着 4000000000。这与位无关：two's-compliment、one's-compliment、magic's-compliment 等。这些是无关紧要的。

您在第一个地方看到您想要的值（忽略 UB）的*原因*是，在您的二进制恭维机器上，有符号整数和无符号整数之间的差异确实是不同查看位的问题。因此，当您将这两个 相乘时`int`，您“实际上”将两个无符号整数相乘，忽略了溢出，并将结果视为有符号整数。然后演员再次改变你的看法。

但是铸造独立于位！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T19:46:36.583

在 int 中， 的值`4,000,000,000`写为`1110 1110 0110 1011 0010 1000 0000 0000`

在无符号整数中， 的值`4,000,000,000`写为`1110 1110 0110 1011 0010 1000 0000 0000`

查看这两个，您可以看到它们是相同的。

`int`不同之处在于在 a和中读取位的方式`unsigned int`。在常规`int`中，[最高有效位](http://en.wikipedia.org/wiki/Most_significant_bit)用于判断数字是否为负。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T19:49:32.870

在 C++ 中，表达式的类型（通常）不依赖于代码环境。

因此，子表达式 2 * 2000000000 在同一系统上具有相同的类型和值，无论包含表达式的上下文是什么`int`（因为 * 运算符的两个操作数都是`int`s）。它会是 4000000000，但是在您的架构上，由于溢出，它更改为 -294967296。

将其转换为`long long`不会改变值，因为`long long`可以代表 -294967296 就好了。

实际上，它更有趣`cout << (unsigned int)(2 * 2000000000) << endl;`。由于`unsinged int`无法容纳-294967296，再次发生溢出。-294967296 和 4000000000 模 2^32 是全等的，所以这将是新值。（从 GManNickG 的更好答案更新）。

为了说明更深层次的问题，您可以尝试

```
cout << (unsigned int)(2 * 2000000000 / 2) << endl; 
```

除法将在 -294967296 上执行，-147483648 的二进制表示将转换为无符号数，即 4147483648

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T19:57:52.587

在第三种（奇怪的）情况下，正在运行的程序执行以下操作：

```
2 * 2000000000       = binary number (11101110011010110010100000000000)
print it as unsigned = 4000000000 
                   (interprets the first bit (1) as part of the unsigned number) 
```

第四种情况：

```
2 * 2000000000       = binary number (11101110011010110010100000000000, same as above) 
print it as signed   = -294967296 
                   (interprets the first bit (1) as negative number) 
```

要学习的重要一点是表达式 2 * 2000000000 产生一个字节序列，然后将其解释为强制转换操作所说的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T20:07:31.043

请注意，有符号整数溢出是未定义的行为。总而言之，任何事情都可能发生。包括无辜正确的结果。

* * *

整数文字`2`和`2000000000`32 位宽。结果将溢出，正如您的编译器告诉您的那样：

```
warning: integer overflow in expression [-Woverflow] 
```

乘法的结果仍然是一个 32 位有符号整数。而且，在这种情况下，幸运的是，溢出的结果是正确的结果，当被视为无符号 32 位整数时。您可以在将位模式转换为 32bit 时观察到这一点`unsigned int`。

但是，如果将值转换为更大宽度的整数类型（例如 64 位），则前导字节将用`ff`([符号扩展](http://en.wikipedia.org/wiki/Sign_extension)) 填充，从而给出错误的结果。

```
#include <iostream>

int main() {
    long long x = 2 * 2000000000;     // 8 byte width
    unsigned int y = 2 * 2000000000;  // 4 byte width
    unsigned long z = 2 * 2000000000; // 8 byte width
    std::cout << std::hex << x << " " << std::dec << x << std::endl;
    // output is: ffffffffee6b2800 -294967296
    std::cout << std::hex << y << " " << std::dec << y << std::endl;
    // output is: ee6b2800 4000000000
    std::cout << std::hex << z << " " << std::dec << z << std::endl;
    // output is: ffffffffee6b2800 18446744073414584320

} 
```

# repeater - 如何为中继器中的属性创建别名？

> ID：14345552
> 
> 赞同：2
> 
> 时间：2013-01-15T19:41:32.930
> 
> 标签：repeater, qml

这段代码：

```
Repeater {
    id: myImageArr
    property alias changeSource: imageElement
    model: 3
    Image {
        id: imageElement
    }
} 
```

给我一个错误：

> 无效的别名引用。找不到 ID“imageElement”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T05:09:02.143

中继器`Image`内部是根据型号动态创建的，所以不能直接通过id引用。如果您的模型是固定值（3），那么您可以`Image`使用[`Repeater.itemAt(index)`](http://doc.qt.digia.com/qt/qml-repeater.html#itemAt-method)函数访问实例。例如，要为`Image`转发器创建的第一个创建别名：

```
property alias changeSource: myImageArr.itemAt(0) 
```

# neo4j - 在 Cypher 路径查询中返回唯一节点

> ID：14345555
> 
> 赞同：12
> 
> 时间：2013-01-15T19:41:41.047
> 
> 标签：neo4j, cypher

我正在尝试检索链接到给定图形节点的一组唯一元素。我将一些节点加载到 Neo4j 图形数据库中，这些节点使用“TO”关系连接（例如节点 6 连接“TO”节点 7）。我已经能够使用以下方法检索我的起始节点和通过“TO”关系链接的其他节点之间的所有路径：

```
 start a = node(6)
    match p = (a)-[r:TO*..]->(b)
    return distinct EXTRACT(n in nodes(p): n); 
```

这给了我不同的输出路径，但仍然有重复的节点值，例如：

```
 +-------------------------------------------------------+
    | p                                                     |
    +-------------------------------------------------------+
    | [Node[6]{},:TO[5] {},Node[7]{}]                       |
    | [Node[6]{},:TO[5] {},Node[7]{},:TO[9] {},Node[11]{}]  | 
    etc... 
```

**如何将这些路径组合成一个包含唯一路径值的列表？** 我曾尝试使用 COLLECT 但这只会导致上述结果的嵌套版本：

```
 start a = node(6) 
    match p = (a)-[r:TO*..]->(b) 
    return collect(distinct p);

    [[Node[6]{},:TO[5] {},Node[7]{}],[Node[6]{},:TO[5] {},Node[7]{},:TO[9] {}, ... ] 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-15T20:56:26.190

我对你想要的结果感到困惑（如果这不正确，你能举个例子吗？）。你想要路径还是想要节点？如果你想要节点，那么也许你只想要：

```
start a = node(6)
match (a)-[:TO*]->(b)
return collect(distinct b); 
```

# qtp - 从 QTP 中删除 Excel 文件

> ID：14345557
> 
> 赞同：0
> 
> 时间：2013-01-15T19:41:47.037
> 
> 标签：qtp

我在 QTP 中有以下代码：

```
Dim objexcel
Set objexcel = createobject("Excel.application")

objexcel.Visible = True

objexcel.Workbooks.Add
objexcel.Cells(1,1).Value =  "ABCDE"
objexcel.ActiveWorkBook.SaveAs("J:\Test.xls") 
```

如何关闭文件并删除它，我尝试了很多方法，但最终得到对象错误。

提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T04:44:34.777

您需要创建类的对象`Filesystemobject`来删除任何文件，所以代码应该是这样的

```
Dim objExcel,objFSO
Set objExcel = createobject("Excel.application")
Set objFSO = CreateObject("Scripting.Filesystemobject")
objExcel.Visible = True
objExcel.Workbooks.Add
objExcel.Cells(1,1).Value =  "ABCDE"
objExcel.ActiveWorkBook.SaveAs("J:\Test.xls")
objExcel.Workbooks.Close
objExcel.Quit
set objExcel = nothing
objFSO.DeleteFile("J:\Test.xls")
Set objFSO =  nothing 
```

# json - Ext JS JSON 网格分组

> ID：14345559
> 
> 赞同：1
> 
> 时间：2013-01-15T19:41:59.560
> 
> 标签：json, extjs

我有以下 JSON 需要在 Ext JS 4 Grid 中进行分组：

```
{
root: {
    type: 'viewer',
    people: ['person a', 'person b', 'person c']
},
{
    type: 'editor',
    people: ['person c', 'person d']
}
} 
```

我完全不知道从哪里开始在 ExtJS 网格中表示这些数据。

但是，这是我到目前为止所拥有的：

```
var myModel = Ext.create('Ext.data.Model', {
    fields: ['type', 'people']
})

var myStore = Ext.create('Ext.data.Store' , {
    data: (JSON above),
    model: myModel,
    groupField: 'type',
    proxy: {
        type: 'memory',
        reader: {
            type: 'json',
            root: 'root'
        }
    }
});

var myGrid = Ext.create('Ext.grid.Panel', {
    store: myStore,
    columns: [
        {header: 'Name', dataIndex: 'people'}
    ]
})

.... other code to display the grid 
```

我得到了一个要显示的网格，但它没有分组，并且网格内没有显示任何数据。

出于某种原因，我认为我需要一个更精细的模型，但是，由于“人”对象只是一个字符串数组，我不知道如何告诉列定义它是哪个 dataIndex。

很感谢任何形式的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T13:53:49.590

您应该使用网格上的分组功能。

> 此功能允许显示聚合成组的网格行，这些组由 Store 上指定的 Ext.data.Store.groupers 指定。该组将显示组名称的标题，然后显示下方组的相应记录。组也可以展开和折叠。

*   示例：[http ://docs.sencha.com/ext-js/4-1/#!/example/grid/groupgrid.html](http://docs.sencha.com/ext-js/4-1/#!/example/grid/groupgrid.html)
*   文档：[http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.feature.Grouping](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.feature.Grouping)

# eclipse - Eclipse 的定时自动保存插件/功能

> ID：14345567
> 
> 赞同：1
> 
> 时间：2013-01-15T19:42:32.143
> 
> 标签：eclipse, autosave

我正在寻找一种方法让我的文件在 Eclipse 中按时间间隔自动保存，而不是在我构建时，因为我很愚蠢并且忘记经常（如果有的话）保存我的工作。今天早上我失去了大约 6 个小时的工作，如果可能的话，我不希望这种情况再次发生。

是否有一个插件（或者可能是 Eclipse 功能）可以每 x 分钟保存一次我的项目文件？我知道我需要养成自己保存文件的习惯，但我有时会陷入代码中，所以我希望你能理解我的困境。

我看过许多其他关于构建插件/功能自动保存的帖子，但这不是我想要的，尽管谷歌似乎认为它是。

# google-analytics - GA-使用 trackEvent 和多个帐户

> ID：14345570
> 
> 赞同：2
> 
> 时间：2013-01-15T19:42:36.133
> 
> 标签：google-analytics, event-tracking

我有一个需要向两个分析帐户提供数据的站点，但我不确定如何实施 trackEvent，因为有 2 个不同的帐号。它会去哪一个或两者兼而有之？这是我的代码：

```
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXXXX-1']);
_gaq.push(['_setDomainName', 'example.com']);
_gaq.push(['_trackPageview']);

// Second tracker 
_gaq.push(['secondTracker._setAccount','UA-YYYYYYY-2']);
_gaq.push(['_setDomainName', 'example.com']); 
_gaq.push(['secondTracker._trackPageview']);

function recordOutboundLink(link, category, action) {
try {
var myTracker=_gat._getTrackerByName();
_gaq.push(['myTracker._trackEvent', category , action ]);
setTimeout('document.location = "' + link.href + '"', 100)
}catch(err){}
}
</script>
</head> listed here to indicate placement

<script type="text/javascript">  (function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
</body> listed here to indicate placement 
```

该站点是具有移动子域的主域（这就是存在 setDomainName 的原因）。

问题： 1) 两个 GA 帐户的 trackEvent 记录吗？2) 我是否正确拆分了异步代码，recordOutboundLink 是否可以与 gaq_push 在同一个脚本中？

谢谢，凯伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:15:14.777

1.  单个`_trackEvent`调用只会将数据发送到单个 GA 配置文件。如果要将数据发送到两个配置文件，则需要进行多次调用。
2.  `recordOutboundLink`在定义的地方放入同一个脚本没有问题`_gaq`。
3.  假设您在链接上使用 onclick 属性——不要忘记返回 false 以便忽略默认链接行为。
4.  仅供参考：谷歌用于跟踪出站链接的示例代码被搞砸了，几乎就像他们将旧式代码更新为异步并且在中途丢失了：/

尝试以下操作：

```
function recordOutboundLink(link, category, action) {
  _gaq.push(['_trackEvent', category , action ]);
  _gaq.push(['secondTracker._trackEvent', category , action ]);
  setTimeout(function(){document.location = link.href}, 100);
  return false;
}

<a href="linkToTrack" onclick="return recordOutboundLink(this, 'category', 'action')" 
```

# haskell - 使用 ghc-pkg 重新注册现有软件包

> ID：14345571
> 
> 赞同：3
> 
> 时间：2013-01-15T19:42:45.587
> 
> 标签：haskell, ghc, cabal

我以前安装了一个带有`cabal install <package>`. 我已经使用`ghc-pkg unregister`. 但现在我又想要它回来。

软件包二进制文件和源代码仍然存储在我的 .cabal 目录中。我只需要再次注册它`ghc-pkg`。但我没有找到办法。

我试过了：

*   `ghc-pkg register ...`: 为此，我需要一个包描述文件。但我找不到从 .cabal 目录中存储的数据中获取的方法。
*   `cabal install ...`：这从源代码构建包，在这台微型计算机上花费了很长时间。
*   `cabal register`：似乎与构建过程有关，当给定存储在 .cabal/packages/... 中的 .cabal 文件时，要求我运行 .cabal `cabal configure`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T20:53:29.050

我认为没有重建的任何简单方法可以做到这一点。如果您想再次使用包，您不应该使用`unregister`它，因为它会从数据库中删除包信息，`hide`您可以使用稍后可以使用的包`expose`。

您可以做的另一件事是保存输出，`ghc-pkg describe <pkg name>`然后保存`unregister`pkg。以后可以做`ghc-pkg register <file where you saved describe output>`。

# jquery-ui - jquery ui 微调器几分钟

> ID：14345574
> 
> 赞同：3
> 
> 时间：2013-01-15T19:42:54.687
> 
> 标签：jquery-ui, spinner

我尝试使用 jquery ui 微调器进行一分钟输入。目前它的工作范围为 0 - 60，但我希望个位数为 00,01..09 两位数。

根据[文档](http://api.jqueryui.com/spinner/#option-numberFormat)，我应该使用 globalize 插件并设置 numberFormat: 'mm' 但这会引发错误。在控制台中，我查看了 globalize js 和 'mm' 选项在 'formatDate' 内。所以我尝试了：

```
$('.minute-spinner').spinner({culture: "en-US",formatDate: "mm"}); 
```

但这并没有做任何事情。有人知道如何使微调器始终显示 2 位数字吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T20:37:09.643

不幸的是，`.spinner()`没有`formatDate`选择。

试试这个：

```
$('.minute-spinner').spinner({ numberFormat: "d2" }); 
```

演示：http: [//jsfiddle.net/dirtyd77/SA7Gk/](http://jsfiddle.net/dirtyd77/SA7Gk/)

希望这会有所帮助，如果您有任何问题，请告诉我！

* * *

参考：

*   [https://github.com/jquery/globalize#numbers](https://github.com/jquery/globalize#numbers)
*   [http://api.jqueryui.com/spinner/#option-numberFormat](http://api.jqueryui.com/spinner/#option-numberFormat)

* * *

**更新：**

这里是参考[`globalize.js`](https://raw.github.com/jquery/globalize/master/lib/globalize.js)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-05T14:49:14.177

如果您只想为 JQuery 微调器使用 numberFormat，那么整个 Globalize 库就太过分了。

我省略了 Globalize，只是在我的 js 中的某处添加以下代码......

```
// mock Globalize numberFormat for mins and secs using jQuery spinner ...
if (!window.Globalize) window.Globalize = {
        format: function(number, format) {
                number = String(this.parseFloat(number, 10) * 1);
                format = (m = String(format).match(/^[nd](\d+)$/)) ? m[1] : 2;
                for (i = 0; i < format - number.length; i++)
                        number = '0'+number;
                return number;
        },
        parseFloat: function(number, radix) {
                return parseFloat(number, radix || 10);
        }
}; 
```

然后根据 Dom 的回答将以下内容之一添加到您的微调器 cfg ...

```
numberFormat: 'd2' // 0 pad to length of 2
numberFormat: 'n2' // same
numberFormat: 'd5' // 0 pad to length of 5
numberFormat: 'n5' // same 
```

# ruby-on-rails - Push Rails 3.2 站点被 Heroku 视为 PHP 站点

> ID：14345575
> 
> 赞同：0
> 
> 时间：2013-01-15T19:43:02.753
> 
> 标签：ruby-on-rails, heroku

我在顶部添加了一些细节来解释我是如何到达这里的。

我创建了一个 Rails 3.2 应用程序并将其推送到 Heroku。我已经将几个站点推送到 Heroku，所以我已经做了很多次。但是，我从未见过这种情况。

我从正常的“heroku create”命令开始，然后是“git push heroku master”。当我运行它时，它返回消息“没有这样的应用程序...”

根据我在 Stack Overflow 上看到的将[应用程序推送到 Heroku 问题](https://stackoverflow.com/questions/2947190/pushing-app-to-heroku-problem)，然后我输入“git remote -v”，看到两个 heroku 项目，输入“git remote rm heroku”以删除这些项目。我重新运行了“heroku create”、“git push heroku master”，该站点确实推送到了 Heroku，但 Heroku 认为这是一个 PHP 站点。

我的整个应用程序中没有一行 PHP 代码。事实上，字符串“PHP”在任何地方都不存在。

我做错了什么，我该如何解决？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:49:57.387

您的 gem 文件是否命名为 Gemfile 而不是 gemfile？在 Heroku 之前看到过导致问题的原因。它使用您的方向/文件结构来了解它的 Rails 应用程序，并且区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:56:20.393

我把它修好了。我删除了 git 目录，将其发布到 github 上的新存储库，将其克隆到新目录中，然后创建一个新的 Heroku 站点以将其推送到。

# jquery - 使用jquery的地址栏上的URL

> ID：14345583
> 
> 赞同：0
> 
> 时间：2013-01-15T19:43:36.457
> 
> 标签：jquery, html, web

我在 html 上使用这个脚本：

```
$(function () {
        $('table.menu a').bind('click', function (event) {

            var $anchor = $(this);

            //if you don't want to use the easing effects:
            $('html, body').stop().animate({
                scrollTop: $($anchor.attr('href')).offset().top - 170
            }, 1500);

            event.preventDefault();
        });
    }); 
```

但我有一个问题，地址栏上没有出现链接名称...

我的问题是：如何在地址栏上写我的锚？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T19:49:04.253

我假设链接是页面上的哈希。喜欢`<a href="#div2">`？在这种情况下，不需要此 JavaScript 代码。浏览器将自动滚动到具有该 ID 的元素。

如果您想（或出于任何原因需要）使用该代码，您可以设置`location.hash`，这将更新 URL 栏。

```
location.hash = $anchor.attr('href'); 
```

# r - 如何使用apply逐行生成数据框？

> ID：14345585
> 
> 赞同：7
> 
> 时间：2013-01-15T19:43:57.447
> 
> 标签：r, dataframe, apply

我想逐行生成一个数据帧，通过`apply`在值列表上使用某种风格和一个为每个值返回单行数据帧的函数。作为一个玩具示例，假设我的价值观是`i = 1:3`并且我拥有：

```
f <- function(i) {
    return(data.frame(img=letters[i], cached=F, i=i, stringsAsFactors=F))
} 
```

我一直在搞乱`sapply`，，`lapply`一堆转置等但没有成功（例如，`d = sapply(1:3, f)`看起来很有希望，但似乎是我想要的转置，所以我尝试`d = t(sapply(1:3,f))`了，除了它是一个矩阵；因此我尝试了next `d = as.data.frame(t(sapply(1:3, f)))`，它*看起来*是正确的（它打印出来就像我想要的那样），但仍然是错误的，因为如果你尝试对其进行子集化，你会发现它`d[,1]`实际上是一个列表）。

最后我得到了这个，它有效：

```
d = apply(data.frame(i=1:3), 2, f)$i 
```

这给了我想要的框架：

```
 img cached i
1   a  FALSE 1
2   b  FALSE 2
3   c  FALSE 3 
```

有没有更好/更干净的方式来表达上述内容？对我来说，这一切都感觉非常笨拙和过于复杂。

* * *

**编辑**：正如几位读者所提到的，这个“玩具示例”无疑太简单了，而且确实`f(1:3)`会按照我的要求去做。实际功能是基于 Web 的指标仪表板的一部分，从各种数据库表中提取数据，并制作我打算缓存的适度复杂的图（大多数时候它们变化相对缓慢）。我猜，相关的部分是该函数通常需要几个参数，而这些参数不是一个简单的序列`1:n`。所以，让我重写这个例子，让它更真实一点：

```
library(digest)
gkey   <- function(...) {
  args <- list(...)
  return(digest(paste(args,sep=".",collapse=".")));
}

f <- function(conn, table, checknew.query, plot.query, plot.fun, params) {
  latest.data = queryExec(conn, table, checknew.query, params)
  key = gkey(table, latest.data, plot.query, plot.fun, params)
  out = getFromCacheOrPlot(key, conn, table, plot.query, plot.fun, params)
  return(out)
} 
```

where`queryExec`构建查询，执行它并检索结果，`gkey()`根据其参数计算哈希键，`getFromCacheOrPlot()`使用`key`构建文件名（.png 图像），如果存在则从缓存中检索它，否则生成它。它还返回一个 data.frame，其中一行给我们文件名、一个 html`<img=...>`简介来显示它、绘图是否在缓存中，以及绘图使用了哪些参数。

所有这些都用于 wiki 系统的插件中，并且某些页面有十几个情节或更多。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T22:31:52.087

`do.call(rbind, lapply(i, f))`会做你要求的......但也会这样做：

```
data.frame(img=letters[i], cached=F, i=i, stringsAsFactors=F) 
```

就像这样：

```
f(i) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T19:49:31.197

那这个呢？无需使用任何风格的`apply`功能

```
foo <- function(x){
  i <- seq_len(x)
  data.frame(img=letters[i], cached=FALSE, i=i, stringsAsFactors=F)
}

  foo(5)
  img cached i
1   a  FALSE 1
2   b  FALSE 2
3   c  FALSE 3
4   d  FALSE 4
5   e  FALSE 5 
```

# python - 如何将模块导入鸭嘴兽小程序？

> ID：14345587
> 
> 赞同：4
> 
> 时间：2013-01-15T19:44:02.167
> 
> 标签：python, import

我正在使用鸭嘴兽来捆绑 python 小程序。我想知道是否有办法导入模块，比如来自 stdlib 的数学。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-11T16:34:17.680

这可能不是最理想的，但我只是添加了我想要导入到鸭嘴兽中的捆绑文件列表中的包（实际保存代码的目录，而不是鸡蛋或任何花哨的东西）。

当您只需要添加几个包时，这很有效。

# c# - 使用 Sharpen 将 java 转换为 C#

> ID：14345590
> 
> 赞同：1
> 
> 时间：2013-01-15T19:44:10.707
> 
> 标签：c#, java, eclipse, ant, converter

我在使用锐化时遇到问题。我一步一步地跟着[这个链接。](http://web.archive.org/web/20131202022757/http://www.pauldb.me/post/14916717048/a-guide-to-sharpen-a-great-tool-for-converting-java)

我猜这里有一件与 Sharpen 无关但与 Ant 相关的愚蠢事情。

它给了我：

```
Buildfile: C:\Users\Peyman\Workspace\MyZoneCore\src\run-sharpen.xml
clean:
sharpen-docs:
     [exec] Error: Could not find or load main class org.eclipse.equinox.launcher.Main

BUILD FAILED
C:\Users\Peyman\Workspace\MyZoneCore\src\run-sharpen.xml:59: The following error occurred while executing this line:
C:\Users\Peyman\Workspace\MyZoneCore\src\run-sharpen.xml:20: exec returned: 1

Total time: 780 milliseconds 
```

构建文件：

```
<?xml version="1.0"?>
<project name="Db4objects.Db4odoc" default="sharpen-docs">
<property file="sharpen.properties" />

<macrodef name="reset-dir">
    <attribute name="dir" />
    <sequential>
        <delete dir="@{dir}" />
        <mkdir dir="@{dir}" />
    </sequential>
</macrodef>

<echo message="${eclipse.startup.jar}"></echo>

<macrodef name="sharpen">
    <attribute name="workspace" />
    <attribute name="resource" />

    <element name="args" optional="yes" />

    <sequential>
        <exec executable="C:\Program Files\Java\jdk1.6.0_31\bin\java.exe" failonerror="true" timeout="1800000">
            <arg value="-Xms256m" />
            <arg value="-Xmx512m" />
            <arg value="-cp" />
            <arg value="${eclipse.startup.jar}" />
            <arg value="org.eclipse.equinox.launcher.Main" />
            <arg value="-data" />
            <arg file="@{workspace}" />
            <arg value="-application" />
            <arg value="sharpen.core.application" />
            <arg value="-header" />
            <arg file="header.txt" />
            <arg value="@{resource}" />

            <args />

        </exec>
    </sequential>
</macrodef>

<!-- Main target -->
<target name="sharpen-docs" depends="clean">

<property name="target.dir" location="sharpen" />

<!-- Copy java files to the resource folder -->
<copy todir="${target.dir}/sharpened/src">

  <!-- CHECK THIS SETTING 
       Make sure that the fileset dir below points to the root folder 
       containing the Java source code files you want to convert to C#
  -->
  <fileset dir="src">
    <include name="**/*.java" />
  </fileset>
</copy>

    <!-- Sharpen java files -->
<sharpen workspace="${target.dir}" resource="sharpened/src">
  <args>

    <!-- CHECK THIS SETTING 
       Make sure that you have an arg value/path element for 
       EVERY external jar file that your Java project references.
       You can get the list of these by right clicking on the project,
       choosing Build Path -> Configure Build Path, and then checking the Libraries tab.
    -->
    <!-- classpath needed for java sources compilation -->
    <arg value="-cp" />
    <arg path="C:/eclipse/workspace/myproject/libs/kxml2-2.3.0.jar" />
    <arg value="-cp" />
    <arg path="C:/eclipse/workspace/myproject/libs/regexp-me.jar" />

    <!-- Sharpen options are defined in a separate file -->
    <arg value="@sharpen-all-options" />
  </args>
</sharpen> 
```

# mercurial - 损坏的 hg 日志输出，这是真的吗？

> ID：14345591
> 
> 赞同：0
> 
> 时间：2013-01-15T19:44:11.077
> 
> 标签：mercurial, tortoisehg

请注意：

```
c:\dev\shunra.old>hg log -r ecf --template '{files}' |tr " " "\012" | findstr ProductLicenseFeature

c:\dev\shunra.old>hg log -r ecf --template '{file_mods}' |tr " " "\012" | findstr ProductLicenseFeature
Application/ShunraLicense/src/com/shunra/common/license/ProductLicenseFeature.java

c:\dev\shunra.old> 
```

那么，我们这里有什么？**ecf**是修订的前缀，它是合并其他两个修订的结果：

```
c:\dev\shunra.old>hg parents -r ecf --style compact
2430:2420   94067e763d55   2013-01-14 12:17 +0200   gilad
  Marge changes from S4HP9.0 branch

2443   a8f3e0a226eb   2013-01-15 00:48 +0200   genkor
  For empty locations and configurations take default content from templates.

c:\dev\shunra.old> 
```

合并是在 TortoiseHg 中完成的。最奇怪的是，更改列表中没有显示特定文件，这与`{files}`模板关键字相对应。

但是它被改变了，并且确实`{file_mods}`模板关键字确实显示了它。

最终结果是我们无法信任 TortoiseHg 提供的更改列表，这是一件坏事。

到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:34:31.990

看看这个[线程](https://groups.google.com/forum/?fromgroups=#!topic/mercurial_general/2I-e-MMk98g)。也许这个文件是在合并过程中自动解析的？从那里引用：

```
A (automatic) merge will from one point of view not introduce any file
changes - only propagate changes that already has been made. From
another point of view it will introduce a number of "new" file changes
in another context and thus changes a lot of files. An intermediate
point of view is when both sides of a merge touches the same file and
the merge thus produces a combined file where the total content will be
new and unique. 
```

# javascript - 如何捕获在我的 iphone 上拖动手指的 javascript 事件？

> ID：14345594
> 
> 赞同：0
> 
> 时间：2013-01-15T19:44:26.820
> 
> 标签：javascript, events, mobile

我有一个充满绿色 div 的页面。

```
<div class="square">1</div>
<div class="square">2</div>
<div class="square">3</div>
<div class="square">4</div> 
```

样式使它们占据全屏：

```
* {font-family: sans-serif; margin: 0; padding: 0;}
html, body {height: 100%;}
.square { background: green; float: left; height: 50%; width: 50%;}
.touch {background: red;} 
```

当你用鼠标输入每个 div 时，会添加一个“touch”类：

```
$(document).ready(function(){
  $('.square').bind('mouseenter', function(){
    $(this).addClass('touch');
  });
}); 
```

在我的 iPhone 上查看页面，如果我触摸一个，它会变成红色（一个类被添加到它，onmouseenter）。但是，如果我将手指拖到另一个 div 中，它不会变红（没有触发 mouseenter 事件）。我已经尝试了所有能找到的事件，包括移动事件插件，但我不知道如何获得这种效果。这是一个 jsfiddle 来说明：

[http://jsfiddle.net/HdMgS/3/](http://jsfiddle.net/HdMgS/3/ "jsfiddle 示例")

将其加载到您的手机上，然后运行它。触摸四分之一，它会变成红色。将手指放在屏幕上，尝试将手指从一个四分之一拖到另一个。什么都没发生。我错过了什么？谢谢！

更新：这是一个带有 jgestures.js 的 jsfiddle。将此加载到您的手机上：

[http://jsfiddle.net/HdMgS/6/embedded/result/](http://jsfiddle.net/HdMgS/6/embedded/result/)

并将您的手指从一个方格拖到另一个方格。为什么它们不是全部变绿？

更新：这是一个 jsfiddle，其中包含推荐的其他 SO 线程的捕获：

[http://jsfiddle.net/HdMgS/7/](http://jsfiddle.net/HdMgS/7/)

触摸一个正方形会变成红色，很棒。但是刷入另一个方块不会触发 addClass。我只是错过了正确的事件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:57:50.357

支持触摸屏功能是一件很棒的事情，随着移动设备的兴​​起等等，试试这些很棒的库之一：

[http://www.queness.com/post/11755/11-multi-touch-and-touch-events-javascript-libraries](http://www.queness.com/post/11755/11-multi-touch-and-touch-events-javascript-libraries)

我喜欢 jGestures：

```
 http://jgestures.codeplex.com 
```

因为它是一个 jQuery 插件，非常易于使用，并且有很多手势

```
 jQuery('#swipe').bind('swipeone',eventHandler); 
```

# actionscript-3 - 如何在 flashdevelop 中切换 flex 主题？

> ID：14345598
> 
> 赞同：0
> 
> 时间：2013-01-15T19:44:34.233
> 
> 标签：actionscript-3, apache-flex, flex4, themes, flashdevelop

Flex SDK 有许多很棒的包含主题（在 swc 中），如钴/街机/石墨/等，但经过数小时的谷歌，我仍然不知道如何使用它们。那么如何更改默认主题并使用一些包含的 sdk 主题或 flashdevelop 中的任何自定义主题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:46:22.163

知道了！如果有人也会面临这个问题，这里是简单的解决方案：

1.  转到项目属性->编译器选项->其他编译器选项

2.  添加以下编译器选项：

    -主题库/arcade.swc

其中“lib/arcade.swc”是基于项目目录的 swc 主题的路径（我只是将 swc 放入 lib 目录）。

# javascript - jQuery Cycle Plugin 在第一个循环后在第一张幻灯片上停止

> ID：14345600
> 
> 赞同：1
> 
> 时间：2013-01-15T19:44:36.080
> 
> 标签：javascript, jquery, loops, slider, cycle

我正在尝试通过一次 + 1 播放我的幻灯片。为了实现这一点，我设置了播放幻灯片一次的选项，然后在结束后恢复到第一张幻灯片，然后停止。

我觉得我的代码应该可以工作，而且大多数情况下都可以。幻灯片播放所有幻灯片，然后继续动画到第一张幻灯片，但需要注意的是：幻灯片寻呼机“活动”项目不会与幻灯片一起更新。由于某种原因，最后一个项目是保持活动状态的项目。

这是我正在使用的代码：

```
$('.slides_container').after('<div id="slides-nav" class="pagination">').cycle({
    fx: 'scrollLeft',
    // choose your transition type, ex: fade, scrollUp, shuffle, etc...
    pause: true,
    pager: '#slides-nav',
    speed: 500,
    timeout: 500,
    autostop: true,
    end: function(options) {  
        $('.slides_container').cycle('resume').cycle('0').cycle('stop');  
    }
}); 
```

为了方便测试，我将速度和超时设置为 500。

编辑 - 太好了。我创建了一个 jsfiddle 来演示。但它甚至与我实际项目中的工作方式不同。[幻灯片放映结束后，此示例](http://jsfiddle.net/norsewulf/TnLYq/157/)似乎根本没有循环播放。这么多……

一种或另一种我的问题仍然存在。随意使用[jsfiddle](http://jsfiddle.net/norsewulf/TnLYq/157/)来帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:30:45.330

问题解决了！在我的情况下，我必须计算直接子`div`元素，因为我使用的是背景图像。但是为了演示，在[这个 jsfiddle](http://jsfiddle.net/norsewulf/TnLYq/172/)中，我们正在寻找`img`元素。

如您所见，我们刚刚计算了直接子代的数量并将计数加 1，然后将其定义为我们的`autostopCount`选项。

`autostopCount: $('#banner > img').length+1`

# antlr - 生成 ANTLR 语法文件时内存泄漏和崩溃

> ID：14345601
> 
> 赞同：1
> 
> 时间：2013-01-15T19:44:38.927
> 
> 标签：antlr, antlr3

我正在尝试使用 Antlr 3 编译[此语法文件](http://dirkriehle.com/wp-content/uploads/2008/01/creole10_wout_extension.g)（用于 Creole wiki 标记），但只是使用 Antlr 工具（C# 版本）出现内存泄漏，并且 Java 版本的堆空间不足：

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
        at java.util.Arrays.copyOf(Unknown Source)
        at java.util.Arrays.copyOf(Unknown Source)
        at java.util.ArrayList.grow(Unknown Source)
        at java.util.ArrayList.ensureCapacityInternal(Unknown Source)
        at java.util.ArrayList.add(Unknown Source)
        at org.antlr.misc.OrderedHashSet.add(OrderedHashSet.java:67)
        at org.antlr.analysis.DFAState.addNFAConfiguration(DFAState.java:229)
        at org.antlr.analysis.NFAToDFAConverter.closure(NFAToDFAConverter.java:632)
        at org.antlr.analysis.NFAToDFAConverter.closure(NFAToDFAConverter.java:708)
        at org.antlr.analysis.NFAToDFAConverter.closure(NFAToDFAConverter.java:477)
        at org.antlr.analysis.NFAToDFAConverter.findNewDFAStatesAndAddDFATransitions(NFAToDFAConverter.java:296)
        at org.antlr.analysis.NFAToDFAConverter.convert(NFAToDFAConverter.java:110)
        at org.antlr.analysis.DFA.<init>(DFA.java:237)
        at org.antlr.tool.Grammar.createLookaheadDFA(Grammar.java:1355)
        at org.antlr.tool.Grammar.createLookaheadDFAs(Grammar.java:1119)
        at org.antlr.tool.Grammar.createLookaheadDFAs(Grammar.java:1069)
        at org.antlr.codegen.Target.performGrammarAnalysis(Target.java:118)
        at org.antlr.codegen.JavaTarget.performGrammarAnalysis(JavaTarget.java:54)
        at org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:286)
        at org.antlr.Tool.generateRecognizer(Tool.java:696)
        at org.antlr.Tool.process(Tool.java:509)
        at org.antlr.Tool.main(Tool.java:98) 
```

有什么方法可以编译语法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:38:41.970

[ANTLR v3.2](http://antlr.org/download/antlr-3.2.jar)能够从此语法生成词法分析器和解析器。尽管有很多警告，但它确实会生成文件。

# c++ - 在 .h 中声明并在 .cpp 中定义的代码在调用 dll 时会出错

> ID：14345602
> 
> 赞同：0
> 
> 时间：2013-01-15T19:44:39.180
> 
> 标签：c++, visual-studio-2010, dll

> **可能重复：**
> [在非托管 C++ 项目中使用 C# COM -> 0x7697C41F (KernelBase.dll) 处的第一次机会异常](https://stackoverflow.com/questions/13724006/using-c-sharp-com-in-unmanaged-c-project-first-chance-exception-at-0x7697c4)

我有一个从 Visual Studio 2005 升级到 Visual Studio 2010 (Project1) 并输出 dll 的项目。它是带有 clr 的 c++（它与 ac# 项目接口）。

我正在使用来自另一个 VS2010 项目（项目 2）的 dll（两者都有相同的 c++ 目标，都调试和 Win 32）。

在 project2 中，dll 接口使用了一个静态使用的类。这就是问题发生的地方。到目前为止，如果我执行在 .h 中声明但在 cpp 中定义的函数，则会出现错误。如果函数在 .h 中声明和定义，则没有问题。 ![尝试访问 cpp 中定义的函数时出错](../Images/1a4536481a2105648840b1410602ea2f.png)

这在升级到 VS 2010 之前有效。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:55:08.103

您可以使用 __declspec(dllexport) 检查是否**应该**在 DLL 中正确导出函数（即“存储”在二进制文件中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:36:10.190

从[Hans Passant](https://stackoverflow.com/users/17034/hans-passant)提供的关于类似错误代码的链接中，似乎此错误是在 .Net 4.0 clr 启动时在调试模式下使用的 IPC 协议发生的未记录异常，可以安全地忽略。

[msdn上的回答链接](http://social.msdn.microsoft.com/Forums/eu/clr/thread/bca092d4-d2b5-49ef-8bbc-cbce2c67aa89)

# iphone - 在没有开发者ID的越狱设备上部署iPhone应用程序的工作方法

> ID：14345605
> 
> 赞同：0
> 
> 时间：2013-01-15T19:45:11.220
> 
> 标签：iphone, ios, xcode, deployment, jailbreak

有可能吗？

我有 XCode 4.5.2 和带有 ios 5.1.1 的越狱 iphone 4。我已经阅读了很多通过 cydia 调整、自签名证书等来做到这一点的方法。如果在我的配置中当然可以做到这一点，那么最好的方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:02:43.627

我建议查看下面的链接，因为它非常易于使用：

[http://www.youtube.com/watch?v=h0JS0D2tXGY](http://www.youtube.com/watch?v=h0JS0D2tXGY)

# python - 如何确定多个外键中 SQL 插入的顺序？

> ID：14345613
> 
> 赞同：2
> 
> 时间：2013-01-15T19:46:01.467
> 
> 标签：python, django

我最近开始使用 Django，并且还没有停止享受 python/Django，但我目前正在努力解决一个逻辑问题。

情况（简化）：

```
class A(models.Model):
    foo = models.CharField(max_length=255)

class B(models.Model):
    bar = models.CharField(max_length=255)
    foo =  models.ForeignKey(A)

class C(models.Model):
    title = models.CharField(max_length=255)
    bar =  models.ForeignKey(B)

class D(models.Model):
    name = models.CharField(max_length=255)
    title =  models.ForeignKey(C)
    bar =  models.ForeignKey(B) 
```

（真正的用例由数百个这样的类组成，是的，这是一团糟，它清楚地证明了糟糕的数据库设计，但我对此无能为力）

我在每个班级都创建了动态 ModelForms。一般目的是检索一个 excel 文件并将它们插入到字段验证等中的正确 ModelForms 中。每个 excel 文件都有多个映射到类的工作表，第一行（标题）描述模型字段，所有其他行表示数据。

数据完全未排序，因此通常不破坏外键序列的插入顺序是 A => B => C => D。但在这种情况下，整个序列可能像 D => B => C => A . 当我验证第一张由于尚未定义相关外键而未验证的表 D 时，问题就出现了。

问题是，如何添加所有数据并在之后验证参照完整性？

提前致谢！

* * *

谢谢你的帮助！

实际上所有的主键都是从根模型派生的，根模型保存着所有子表的映射表。我在第一篇文章中没有提到它，因为我想保持情况简单。话虽如此，我无法更改（混乱！），也无法重新设计映射到任何现有（混乱！）数据库的类。为了完成这个混乱，每个字段都设置为“not Null”。

我的第二个想法是最初填充一个映射表（还没有真正的想法如何做到这一点），并以此对传入的数据进行排序。听起来像猴子工作，很脏，我自己也不喜欢这个主意，我希望有更聪明的方法。

你对这个问题的任何数学解决方案有任何提示吗？这就像在任意数据上生成一棵树。

更新：

我做了两个函数来解决这个问题，还没有测试错误处理。

validate_tables：查找与给定应用程序相关的所有表，并将嵌套列表 (self.found_fields) 保存在 dict (child: [parent, parent, (...)]) 中。

gen_sequence：写入一个列表（self.sequence），其中包含到 object_names 的正确序列映射。

欢迎认可！

这是我目前的解决方案（得到这个想法的片段）

```
 def validate_tables(self):
        app = get_app("testdata")
        self.sequence = []
        self.found_fields = {}
        for model in get_models(app):
            hits = []
            for local_field in model._meta.local_fields:
                if isinstance(local_field, models.ForeignKey):
                    hits.append(local_field.related.parent_model._meta.object_name)
            self.found_fields.update({model._meta.object_name: hits})
        if self.gen_sequence():
            return True
        else:
            raise self.sequence_errors

    def gen_sequence(self, unresolved=None):

        if unresolved:
            self.found_fields = unresolved
            unresolved = {}
        else:
            unresolved = {}

        for model in self.found_fields:
            if ((all(parent in self.sequence for parent in self.found_fields[model]) 
                 and self.sequence)
                or not self.found_fields[model]):
                self.sequence.append(model)
            else:
                unresolved.update({model: self.found_fields[model]})

        if unresolved == self.found_fields:
            self.sequence_errors = unresolved
            return False
        elif not unresolved:
            return self.gen_sequence
        else:
            return self.gen_sequence(unresolved) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:38:36.497

您将需要定义自己的主键，我认为您有一个合适的字段，否则不会发生此问题，并且还允许 ForeignKey 为空。困难的部分将是稍后建立参照完整性，这在 Django[中很难但似乎并非不可能。](https://stackoverflow.com/questions/3558907/django-foreignkey-which-does-not-require-referential-integrity)

相反，我将有两个字段，一个是您的虚拟主键并使您当前的外键可以为空：

```
class A(models.Model):
    foo = models.CharField(max_length=255)

class B(models.Model):
    bar = models.CharField(max_length=255)
    foo =  models.ForeignKey(A, null=True)
    foo_key =  models.CharField() 
```

然后，在数据导入后找到所有带有 foo_key 的 'B' 对象，建立关系并将 foo_key 设置为 null。

这是我将大量数据从以前的 GAE 项目导入 PostgreSQL 数据库时使用的机制。

# c# - 使用表单身份验证的 C# ASP MVC 网站的文件系统管理

> ID：14345615
> 
> 赞同：0
> 
> 时间：2013-01-15T19:46:13.907
> 
> 标签：c#, sql-server, asp.net-mvc

我试图通过这个问题在特定问题和更广泛主题的最佳实践之间划清界限。底线，我正在构建一个潜在可扩展的网站，它需要允许用户创建文件夹（包括嵌套文件夹），将文件上传到这些文件夹（或至少保持文件、文件夹和用户之间的关系），并授予访问权限他/她控制下的文件夹（实际上是它们下的文件）给其他用户。

我的高级计划是将文件夹信息（和相关/嵌套文件夹）和文件位置信息与用户访问资格一起存储在数据库中。所以...文件夹本质上是虚拟的，根本不代表文件系统结构。文件将是相似的，尽管我显然必须存储一个实际的文件系统位置。

2 个相关问题 - 一个相当具体，一个我会接受答案，另一个是概念性的。

我已经阅读了一些关于散列文件路径的信息——这样的计划是否有意义，或者它是否有点矫枉过正，我可以根据每个用户的用户 ID 将上传的文件放在一个文件夹中——然后基于关系和数据库中维护的文件夹结构？

在更广泛的范围内，对于我在这种情况下管理文件和文件夹的总体概念是否正确的任何评论/输入，我将不胜感激。显然，我无法访问 Active Directory 或类似的工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:59:08.210

假设您使用的是 SQL Server 2008 或更高版本，为什么不考虑使用数据库中的 Filestream 功能让 SQL Server 为您管理文件？如果您打算使用某种非数据库方式来存储文件名信息，则哈希可能会很快，但可能会过度杀伤力，除非涉及大量文件。

# javascript - Javascript回调函数问题

> ID：14345616
> 
> 赞同：0
> 
> 时间：2013-01-15T19:46:20.673
> 
> 标签：javascript, asynchronous, callback, primes

为任何解决问题的人提供赏金。在发布解决方案以讨论金额之前先 PM 我。

我想做的是有一个循环检查param.result。正在对 stepping_isProbablePrime 进行异步调用。这将返回一个接近我的值，我在 checkPrime 函数的返回中使用它。但是，我不确定调用此函数后如何访问结果，我想保留它以在循环期间检查素数。每次我尝试访问结果时，它要么为空，要么身份不明。

```
var findPrime = function(checkPrime, result)
{
    var inParam = null; 
    var prime = new BigInteger("7", 10);

    checkPrime(prime, result);
    alert(inParam);
}

var result = function(param1)
{
    inParam = param1
    return param1;
}

var checkPrime = function(p2,result)
{
    var inParam = null;
    var closure= p2.stepping_isProbablePrime(5);
    var receiver = function(scope,param,subparam) 
    {
        result( param.result );
        return BREAK;
    };
    return ( [ closure, receiver, EXIT ] ).ready().frequency(1).timeout(1).go();
};

var timerID = findPrime(checkPrime, result);
} 
```

下面包括方法调用 stepping_isProbablePrime(t)：

```
BigInteger.prototype.stepping_isProbablePrime = function (t) {
BigInteger.log( "stepping_isProbablePrime:create" );
var self = this;
var x = self.abs();
var et1 = ElapsedTime.create();
var et2 = ElapsedTime.create();
return [
    function(scope,param,subparam) {
    BigInteger.log("stepping_isProbablePrime No.1: " );

    et1.start( "stepping_isProbablePrime" );

    var i;
    if( x.t == 1 && x[0] <= lowprimes[ lowprimes.length-1 ] ) {
        for ( i = 0; i < lowprimes.length; ++i )
        if ( x[0] == lowprimes[i] ) {
            BigInteger.log( "stepping_isProbablePrime.1 EXIT" );
            //return true;
            param.result = true;
            return EXIT;
        }
        BigInteger.log( "stepping_isProbablePrime.2 EXIT" );
        // return false;
        param.result = false;
        return EXIT;
    }

    if ( x.isEven() ) {
        BigInteger.log( "stepping_isProbablePrime.3 EXIT" );
        // return false;
        param.result = false;
        return EXIT;
    }

    i = 1;
    while ( i < lowprimes.length ) {
        var m = lowprimes[i];
        var j = i+1;
        while( j < lowprimes.length && m < lplim ) {
        m *= lowprimes[j++];
        }

        m = x.modInt(m);
        while( i < j ) {
        if( m % lowprimes[i++] == 0 ) {
            BigInteger.log( "stepping_isProbablePrime:4 EXIT" );
            // return false;
            param.result = false;
            return EXIT;
        }
        }
    }

    BigInteger.log( "stepping_isProbablePrime:5 BREAK" );
    return BREAK;
    },

    // // ver1>>
    // function(scope,param,subparam) {
    //  BigInteger.log("stepping_isProbablePrime No.2:called:" + param.result );
    //  // return x.millerRabin(t);
    //  et2.start("isProbablePrime.millerRabin");
    //  var result = x.millerRabin(t);
    //  et2.stop();
    //  et1.stop();
    //  param.result = result;
    //  return BREAK;
    // },
    // // ver1<<

    // ver2>>
    function(scope,param,subparam) {
    BigInteger.log( "stepping_isProbablePrime No.2: calling millerRabin : subparam.result=" + subparam.result );
    et2.start("isProbablePrime.millerRabin");
    subparam.result=null;
    return x.stepping_millerRabin(t).BREAK();
    },
    function(scope,param,subparam) {
    BigInteger.log( "stepping_isProbablePrime No.3: returning millerRabin : subparam.result=" + subparam.result );
    et2.stop();
    et1.stop();
    param.result = subparam.result;
    BigInteger.log( "stepping_isProbablePrime No.3: param.result=" + param.result );
    return BREAK;
    },
    // ver2<<
    EXIT
].NAME("stepping_isProbablePrime");
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:04:37.457

我不能发誓我已经遵循了您的代码，但我认为最直接的问题是您有三个不同的变量，名为“inParam”：一个全局变量，一个用于 findPrime 的本地变量，一个用于 checkPrime 的本地变量。当结果函数设置 inParam 的值时，它设置的是全局变量，但是当 findPrime 使用 inParam 时，它使用的是局部变量。

不过，对数据流使用全局变量通常是个坏主意。如果事情以看起来无害的方式重叠，它往往会使脆弱的代码失败。您最好找到一种使用返回值的方法。或者，如果您无法管理，则使用回调或输出参数。

# android - Eclipse Juno 中的 Android 模拟器颠倒

> ID：14345617
> 
> 赞同：6
> 
> 时间：2013-01-15T19:46:24.003
> 
> 标签：android, eclipse, emulation, android-x86

我正在使用 Eclipse 开发 Android 应用程序，使用模拟器（在 4.1.2 中带有用于 Google API 的 Intel x86 的图像）并且手机是颠倒的并且“在里面”，如下所示：

![在此处输入图像描述](../Images/bc80709aa80a19a4c07f035122bb3cfa.png)

请知道为什么以及如何解决它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T19:47:41.217

尝试旋转模拟器

> Ctrl + F12

如果字符仍然反转，则在 avd 设置中禁用 GPU 仿真

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T19:32:54.403

这是对我有用的链接（4.0.3 到 4.2.2）。

[蜂窝模拟器纵向反转屏幕](https://stackoverflow.com/questions/7027185/honeycomb-emulator-reversed-screen-in-portrait)

这是重要的部分

“向下滚动到屏幕方向并在下拉菜单中选择 sensorPortait”。

注意：如果您在堆栈中启动它们，您可能需要为每个活动执行此操作。完成第一个后，您可以复制/粘贴清单文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-29T10:36:39.047

通过更改 config.ini 的属性来修复

%SYSTEM_DRIVE%\Users\%USER_NAME%.android\avd\YOUR_AVD_NAME_HERE

从

skin.path=1280x720

到

skin.path=720x1280

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T10:31:29.817

我也有同样的问题。

但是在我安装了 Android SDK Tools 21.1 rc（在预览频道中）之后，启用了主机 GPU 的模拟器现在运行良好。

只需启动 Android SDK Manager 并在设置对话框中启用预览通道。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T13:00:22.607

WXGA 对我也一样。解决方法是：将设备设置为纵向。将系统设置中的自动旋转更改为关闭。应用程序现在将正面朝上运行。

# algorithm - 使用二维动态数组排序

> ID：14345618
> 
> 赞同：0
> 
> 时间：2013-01-15T19:46:30.067
> 
> 标签：algorithm, pseudocode

让我困惑的作业练习：

我们有一个`n`随机顺序的整数数组，练习要求我们使用下面指定的方法对它们进行排序。

首先，我们按照两个规则将整数放在行中：

1.  仅当 a < b 时，我们才将整数 a 放在整数 b 之上
2.  否则我们将整数 a 放在新行中

这两条规则用于对数组进行排序。当我们完成应用规则时，我们选择较小的可见整数，一次一个，直到它们被排序。

该练习需要使用 3 个数组：

1.  `data[1...n]`其中包含要排序的数字
2.  `column[1...n,1...]`
3.  `number[1..n]`表示每列的整数总数

例如，如果

```
data = [3,2,12,8] 
```

那么`column`将是：

```
column[1,1] = 3
column[2,1] = 2
column[1,2] = 12
column[2,2] = 8 
```

并且`number`会是`[2,2]`

我正在尝试制作一个循环（请记住，英语中的伪代码可能与我用自然语言学习的伪代码不同）

```
for counter=1 to n 
    number[counter]:=0;
end for

for counter=1 to n
    a := 1;
    b := 1;

    if data[counter] < column[a,number[b]] or number[b]=0 then
        number[b] := number[b] + 1;
        column[a,number[b]] := data[counter];
    else 
        a:=a+1;
        b:=b+1;
    end if
end for 
```

但是这段代码有很多错误。有人可以尝试解释我的逻辑哪里错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T23:13:05.663

由于您不知道`rows`最终会使用多少，因此您需要使用可增长的数据结构来表示您的`rows`，因此请使用列表。其次，由于`rows`正在堆叠数字，因此每一行都应该是一个堆栈。喜欢

```
List<Stack<Integer>> rows = new ArrayList<Stack<Integer>>(); 
```

那么你的算法最终将是 O(n^2)。您将遍历输入并将它们添加到行中

```
for(int i: input){
   boolean done = false;
   for(int x=0; x < rows.size() && ! done; i++)
     if(row.peep() > i){
       row.add(i);
       done = true;
     }
   if(!done)
     row.add(i);
} 
```

完成填充行后，下一步是读回整数。你应该可以从这里拿走它。

# objective-c - 通过 TCP 进行零配置广域服务发现 - Objective-c

> ID：14345619
> 
> 赞同：0
> 
> 时间：2013-01-15T19:46:30.313
> 
> 标签：objective-c, cocoa

我基本上需要建立一个远程TCP连接。从 Mac 到 iPhone（在 3G、LTE 或其他非本地网络上）。

在我的服务器端：

```
self.netService = [[NSNetService alloc]
initWithDomain:@"local." type:@"_myAppName._tcp."
name:chatRoomName port:self.port]; 
```

在我的客户端：

```
[netServiceBrowser searchForServicesOfType:@"_myAppName._tcp." inDomain:@"local."]; 
```

这在本地网络上非常有效。我遇到的麻烦是在远程级别上进行这项工作。我在这里大胆猜测，我所要更改的只是 inDomain:@"local"。和 initWithDomain:@"local." 用别的东西。

我找到[了这个](http://dns-sd.org)。有趣，但我仍然对实施感到困惑。我是否需要创建一个带有托管包的网站，并输入域：@“mywebsite.com”？

任何信息都有帮助！

谢谢！

# debugging - Visual Studio 2012 调试外部程序——模块列表为空

> ID：14345627
> 
> 赞同：1
> 
> 时间：2013-01-15T19:47:00.070
> 
> 标签：debugging, visual-studio-2012, external-process

我创建了一个 .Net (C#) DLL，以便通过 COM 从旧版应用程序中使用。我可以启动旧版应用程序、实例化 COM 对象并使用它——没问题。我可以启动（或切换回）Visual Studio，选择调试/附加到进程，然后选择旧应用程序进程。然后，所有源文件旁边都有“锁定”图标，VS 标题栏更改为项目名称旁边有“（运行）”。我可以设置断点，并且从旧版应用程序中执行 COM 对象允许我逐步调试。但是，VS（当然）不允许编辑代码来修复问题（甚至更正注释中的拼写错误）。Debug / Windows / Modules 窗口显示旧进程和我的 DLL 以及已为我的 DLL 加载的符号。退出旧版应用程序（不足为奇）会移除“锁定”

如果我将 COM 对象的项目设置为启动（在解决方案设置中），将项目的调试页面设置为“启动外部程序”并按 F5 启动旧版应用程序，我可以实例化和运行 COM 对象。标题栏再次显示“（正在运行）”并出现锁定图标。将鼠标悬停在断点上会显示一个工具提示，显示我们在哪里——

进程“legacyapp.exe”中的文件名.cs，第 x 行字符 y（“namespace.class.method()”）

但是断点不会停止，模块窗口是空的——旧应用程序和我的 DLL 都没有显示在那里。（所以我想调试不起作用也就不足为奇了。）

我知道我已经能够在 Visual Studio 2010 中成功地完成“通过启动外部程序来调试基于 .Net 的 COM DLL”的事情。有谁知道可能导致这种情况的原因，更重要的是，我有任何建议可以尝试让它工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:18:51.880

我在 Visual Studio 2012 中通过 MSACCESS 调试 COM-DLL 时遇到了同样的问题。

解决方案：为您的 office 启动程序创建一个配置文件。示例：创建 C:\Program Files (x86)\Microsoft Office\Office10\MSACCESS.EXE.config 并插入

```
<?xml version="1.0"?>
<configuration>
   <startup>
      <supportedRuntime version="v2.0.50727"/>
   </startup>
</configuration> 
```

# jquery - 替换字符串Jquery中的所有出现

> ID：14345628
> 
> 赞同：8
> 
> 时间：2013-01-15T19:47:16.003
> 
> 标签：jquery

我有一串数据..

```
This is a template body for  &lt&ltApproved&gt&gt &lt&ltSubmitted&gt&gt 
```

我想用“<<”替换“<”，用“>>”替换“>”

为了替换“<”，我写了这段代码..

```
 var body = $('#txtHSliderl').val().replace("&lt", "<<"); 
```

但它似乎只取代了第一次出现..

```
This is a template body for  <<&ltApproved&gt&gt &lt&ltSubmitted&gt&gt 
```

如何替换所有出现的事件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T19:48:44.067

```
var body = $('#txtHSliderl').val().replace(/&lt/g, "<<"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T19:50:59.810

您需要使用正则表达式，以便您可以指定全局 (g) 标志：

```
 var body = $('#txtHSliderl').val().replace(/&lt/g, "<<"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T19:48:44.393

像下面这样使用 g

```
 var body = $('#txtHSliderl').val().replace(/&lt/g, "<<").replace(/&gt/g, ">>"); 
```

因为你想在你的值中替换 woth < 和 > 所以你必须应用两次 mathod

`g`在此函数中使用，即替换以替换给定字符串实例的所有出现。

# symfony - Symfony preUpdate 与 prePersist

> ID：14345630
> 
> 赞同：13
> 
> 时间：2013-01-15T19:47:34.990
> 
> 标签：symfony, doctrine-orm

我是 Symfony2 的新手，我想知道 prePersist 和 preUpdate 事件有什么区别。看起来 prePersist 在我“保留”记录之前被“解雇”，但是 preUpdate 什么时候触发？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-15T20:05:52.520

这些都不是 Symfony 的一部分。它们是 Doctrine2 的一部分。prePersist在实体第一次被持久化时触发**。**持久化一个对象意味着它是由 Doctrine entityManager 管理的，即使*它在 flush 之前实际上并没有被插入到数据库中*。

**preUpdate**是即将更新的现有对象上的相应事件。因为现有对象在被查询时已经由 entityManager 管理，所以没有等效的持久事件。它基本上*在现有对象已更改*并且已调用刷新时触发。

换句话说，**如果您没有更改对象中的任何内容**，PreUpdate 将不会运行！

话虽如此，您可以将这些视为“就在插入之前”和“就在更新之前”发生的事情。

它们也有两种形式： **生命周期回调**，可以直接注释到实体中并作为方法添加到其中，但只能访问实体属性。这些可以很好地用于简单的操作，例如时间戳、使字符串符合特定标准或生成派生属性。

还有真正的**事件侦听**器必须在 entityManager 中注册，并且可以访问具有您期望在数据库触发器中的前/后数据类型的事件数据。

请注意，在[Doctrine 版本 2.4 中，他们甚至为 Lifecycle callbacks 添加了事件数据](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/events.html)，这使得执行以前使用事件侦听器所需的相同类型的事情变得更加简单和容易。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-06-14T01:16:52.007

另外值得注意的是：

-**如果您的实体没有任何更改的值，`PreUpdate`则不会触发。**

因此，您不能仅仅依靠它来在保存表单时更新修改时间戳。如果您在一个页面上有一组表单，并且用户可能已经更新了包含的子表单集合的某些字段，这将特别棘手。已更新的实体将触发`PreUpdate`，但主要表单实体不会触发 a `PreUpdate`，除非它的 OWN 字段已更新。

-您可以为**两者****设置多个生命周期回调注释`PrePersist``PreUpdate`**

因此，例如，如果您想在创建记录和更新记录时设置修改时间戳，您可以将两个注释添加到实体中的同一函数，例如

```
/**
 * @ORM\PreUpdate
 * @ORM\PrePersist
 */
public function setTimeModValue() {
    $this->timeMod = time();
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-15T19:53:22.260

从这里：[http ://docs.doctrine-project.org/en/2.0.x/reference/events.html#lifecycle-events](http://docs.doctrine-project.org/en/2.0.x/reference/events.html#lifecycle-events)

**prePersist** - 在执行该实体的相应 EntityManager 持久操作之前，该实体发生 prePersist 事件。

**preUpdate** - preUpdate 事件发生在对实体数据进行数据库更新操作之前。DQL UPDATE 语句不调用它。

另外，请注意这是针对 Doctrine 的，而不是专门针对 Symfony 的。

# google-app-engine - 如何为低流量配置 google app engine java (1 hit/min)

> ID：14345631
> 
> 赞同：3
> 
> 时间：2013-01-15T19:47:37.267
> 
> 标签：google-app-engine

我有一个在应用程序引擎 java 上运行的基于 spring 的 Web 应用程序，它接收大约 1 次命中/分钟。

不幸的是，应用引擎调度程序会杀死空闲超过 10 秒左右的实例。因此，对我的站点的每个请求大约需要 30 秒才能完成，同时会加载一个新的动态实例。

但是，尝试使用常驻实例时，请求永远不会转到常驻实例。不管有多少常驻实例（我尝试了最多 4 个），一个新请求总是会产生一个新的 Dynamic 实例，因此即使有 4 个空闲实例，一个请求也必须等待 30 秒。

空闲实例和延迟的哪些设置可以让我的应用程序始终运行，这样我每分钟收到的奇数 1 个请求都会遇到一个暖/实时实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-05T04:40:51.913

到目前为止，我已经处理此类问题超过 6 个月，命中率/分钟与您的相似，可能略高一些，以及我在 F1 中找到的最佳设置并且没有破坏银行（但相比起来仍然很昂贵与其他提供更好性能的托管服务）是：

```
min idle instances = 1
max idle instances = 1
min pending latency = 15s
max pending latency = 15s 
```

如果每个实例的内存消耗超过 128MB，那么您可以考虑选择 2 或 3 作为最大空闲实例。

根据我的经验，在这种配置下，一些请求将由常驻实例处理，而其他一些请求将由一个新的动态实例处理，如果运气好的话，如果应用引擎之前提供过预热请求，它就会预先加载，获得比通常的 30 秒更好的响应时间（如果不是 DeadlineExceededException）。
但是会有**一些请求会运行新的加载实例，这是使用自动缩放不可避免的**。有一种非常新颖的东西叫做[手动缩放](https://developers.google.com/appengine/docs/java/modules/)，它是可配置的，但它会增加你的应用程序的复杂性，并且不会解决这个严重的性能问题的根本原因。

我很遗憾谷歌无法为使用 Spring、Guice 等 DI 框架的 Java 应用程序提供体面的服务......因为您可以查看多个论坛和许多关于这个问题的开放线程，其中一些是两年多以前的问题.
不管你对[Spring 的优化](https://developers.google.com/appengine/articles/spring_optimization)有多好，不幸**的是，在许多情况下，对于 google app engine for java 中的专业应用程序来说，等待时间仍然是不可接受的**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-26T02:36:34.300

不要使用谷歌应用引擎。请改用 IaaS。在如此小的规模下，您不需要自动缩放。你确实需要更多的控制权。

# mysql - 我在哪里可以了解更高级的 ActiveRecord 查询？

> ID：14345632
> 
> 赞同：2
> 
> 时间：2013-01-15T19:47:39.537
> 
> 标签：mysql, sql, ruby-on-rails-3, postgresql, activerecord

除了我们在 Rails 中获得的好方法（例如 Model.association）之外，是否有任何书籍或资源涵盖更高级的 ActiveRecord 查询？

我需要了解更多关于跨表连接和条件的信息，我对 SQL 相当陌生，只知道基础知识......

我应该只学习 SQL 吗？（如果是这样，你知道任何针对新手的书籍吗？）或者我应该尝试从 ActiveRecord 的角度找到涵盖 SQL 的书籍或资源（因为我只是真正设想自己使用 Rails - 至少在可预见的将来）。

*（如果对我在 Rails 应用程序中使用 Postgres 有任何帮助）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:55:59.777

ActiveRecord 是抽象的（它是一个 ORM）。与编程中的所有抽象一样，您对“幕后”的了解越多，您就会越好。理解 SQL 有助于进行复杂的连接，甚至是简单的事情，比如何时以及何时不添加索引。

我会选择一本关于 SQL 的好书。如果您使用的是 mySQL，我喜欢查看[http://oreilly.com/](http://oreilly.com/)，他们有一些关于 mySQL 和 SQL 的好书。Postgres 比遵循 SQL 标准的 mySQL 严格得多。根据我的经验，我喜欢先学习 mySQL，然后再学习 Postgres 的差异。

# mysql - MySQL 替代查询：不存在/不存在

> ID：14345640
> 
> 赞同：0
> 
> 时间：2013-01-15T19:47:53.060
> 
> 标签：mysql, mysqldump

我在数据库中使用 NOT IN / NOT EXISTS 执行 DELETE 或 UPDATE 查询时遇到问题。我有 2 张桌子`USERS`和`REMARK`.

提示：`Users`表记录 = 9880 AND`Remark`表记录 = 38943

我想从表中删除`REMARK`表中`profile_id`不存在的所有数据`users`。

要执行我使用此查询的操作：

```
UPDATE remark 
SET status = '0'
WHERE profile_id  NOT IN (SELECT * FROM users); 
Or
DELETE from remark 
WHERE profile_id NOT EXISTS (SELECT * FROM users); 
Or
DELETE FROM remark
WHERE NOT EXISTS (
     select * from users
     where users.profile_id = remark. profile_id); 
```

结果 = #2013 - 查询期间与 MySQL 服务器的连接丢失

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:52:49.680

你很近；

```
UPDATE remark SET status = '0' WHERE profile_id NOT IN 
    (SELECT * FROM users); 
```

应该很可能是；

```
UPDATE remark SET status = '0' WHERE profile_id NOT IN
    (SELECT profile_id FROM users); 
```

由于`*`将从用户中选择所有字段，因此您无法将它们与 进行比较`profile_id`，您只需选择要比较的字段即可。

当然，您可以使用相同的`WHERE`子句删除；

```
DELETE FROM remark WHERE profile_id NOT IN
    (SELECT profile_id FROM users); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T06:15:17.713

```
DELETE FROM REMARK
WHERE NOT EXISTS (
    SELECT *
    FROM USERS
    WHERE profile_id=REMARK.profile_id
) 
```

请注意以下内容不起作用（或任何其他紧密变化）：

```
DELETE FROM REMARK r
WHERE NOT EXISTS (
    SELECT *
    FROM USERS
    WHERE profile_id=r.profile_id
) 
```

由于参考。学分：[http ://www.electrictoolbox.com/mysql-delete-records-in-one-table-not-in-another/](http://www.electrictoolbox.com/mysql-delete-records-in-one-table-not-in-another/)

# php - 如何解密 PHP 中以 NUL 字符结尾的二进制数据？

> ID：14345642
> 
> 赞同：4
> 
> 时间：2013-01-15T19:47:58.610
> 
> 标签：php, encryption

例子：

```
$data = "Test Data\x00\x00";
echo strlen($data);

$key = "mykey";
$encrypted = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, MD5($key, true), $data, MCRYPT_MODE_ECB);
echo strlen($encrypted);

$decrypted = mcrypt_decrypt(MCRYPT_RIJNDAEL_128, MD5($key, true), $encrypted, MCRYPT_MODE_ECB);
echo strlen($decrypted);

$newData = rtrim($decrypted,"\x00");
echo strlen($newData); 
```

输出：

```
11
16
16
9  <-- I want 11 here 
```

那么，有什么方法可以解密在加密之前可能已经填充空的数据，并取回正确的长度数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T20:50:45.117

发生这种情况是因为在加密时，数据需要具有一定的大小。你的数据比那个小，所以它被填充了。PHP 使用 NULL 字符填充数据，因此当您`rtrim`删除NULL 和 PHP 添加的 NULL 时*。*

一种解决方案是使用另一种方法将数据填充到正确的长度。我个人使用[PKCS7 padding](http://en.wikipedia.org/wiki/Padding_%28cryptography%29#Byte_padding)。

这是一个如何使用这种填充方法的示例（改编自[https://gist.github.com/1077723](https://gist.github.com/1077723)）：

```
$data = "Test Data\x00\x00";

$key = "mykey";

$blocksize = mcrypt_get_block_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_ECB);

// PKCS7 Padding
$pad = $blocksize - (strlen($data) % $blocksize);
$data .= str_repeat(chr($pad), $pad);

$encrypted = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, MD5($key, true), $data, MCRYPT_MODE_ECB);

$decrypted = mcrypt_decrypt(MCRYPT_RIJNDAEL_128, MD5($key, true), $encrypted, MCRYPT_MODE_ECB);

// PKCS7 Padding
$strPad = ord($decrypted[strlen($decrypted)-1]);
$newData = substr($decrypted, 0, -$strPad); 
```

演示：http: [//ideone.com/bMZxyf](http://ideone.com/bMZxyf)

# javascript - chrome中的javascript标签字符限制

> ID：14345645
> 
> 赞同：0
> 
> 时间：2013-01-15T19:48:09.407
> 
> 标签：javascript, ajax, google-chrome, highcharts

我正在尝试通过使用 ajax 加载图表的 javascript 来加载一个相当大的 highcharts 图表。由于整个图表是由 ajax 加载的，而不是由 ajax 更新的。这适用于 Firefox 上的所有图表（即使它真的很慢）以及除了 chrome 中最大的图表之外的所有图表。

任何超过大约 65000 个字符（可能是无符号 16 位变量，但不确定）的图表都会在 chrome 中引发“输入错误意外结束”。我的图表刚好超过这个限制，然后通过简单地减少字符数，它就起作用了。

整个 ajax 响应都在那里，所以它似乎不是 ajax 问题。

chrome的javascript标签是否有某种字符限制？如果有，是否存在解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:47:03.950

我最终只是对图表进行了分页以避免字符的限制，无论如何有助于可读性。

# ios - 象征性的崩溃只是给了我 __PRETTY_FUNCTION__

> ID：14345648
> 
> 赞同：0
> 
> 时间：2013-01-15T19:48:14.343
> 
> 标签：ios, crash-reports, crash-dumps, uncaught-exception, symbolicate

我已将此代码用作`UncaughtExceptionHandler`我的应用程序来捕获一些崩溃信息并将其返回给我：

```
NSArray *callStack = [exception callStackReturnAddresses];
    int i,len = [callStack count];
//  void **frames = new void *[len];
    void **frames = (void**)malloc(len);

    for (i = 0; i < len; ++i) {
        frames[i] = (void *)[[callStack objectAtIndex:i] unsignedIntegerValue];
    }
    char **symbols = backtrace_symbols(frames,len);

    /*
     *  Now format into a message for sending to the user
     */

    NSMutableString *buffer = [[NSMutableString alloc] initWithCapacity:4096];

    NSBundle *bundle = [NSBundle mainBundle];
    [buffer appendFormat:@"Version %@\n\n",[bundle objectForInfoDictionaryKey:@"CFBundleVersion"]];
    [buffer appendFormat:@"Device: %@. OS: %@\n", [[UIDevice currentDevice] model], [[UIDevice currentDevice] systemVersion]];
    [buffer appendString:@"Uncaught Exception\n"];
    [buffer appendFormat:@"Exception Name: %@\n",[exception name]];
    [buffer appendFormat:@"Exception Reason: %@\n",[exception reason]];
    [buffer appendString:@"Stack trace:\n\n"];
    for (i = 0; i < len; ++i) {
        [buffer appendFormat:@"%4d - %s\n",i,symbols[i]];
    } 
```

今天，我收到了一份崩溃报告，与您从 iTunes Connect 获得的报告相比，该报告非常少。它看起来像这样：

```
0 - 0 CoreFoundation 0x395472a3 + 162
1 - 1 libobjc.A.dylib 0x3343697f objc_exception_throw + 30
2 - 2 CoreFoundation 0x395471c5 + 0
3 - 3 Foundation 0x342ec7cb + 66
4 - 4 myapp 0x0012887d myapp + 424061
5 - 5 myapp 0x001285ed myapp + 423405
6 - 6 myapp 0x0013f1f1 myapp + 516593
7 - 7 libdispatch.dylib 0x3783a11f + 10
8 - 8 libdispatch.dylib 0x378394b7 + 22
9 - 9 libdispatch.dylib 0x3783e1bd + 224
10 - 10 CoreFoundation 0x3951af3b + 1290
11 - 11 CoreFoundation 0x3948debd CFRunLoopRunSpecific + 356
12 - 12 CoreFoundation 0x3948dd49 CFRunLoopRunInMode + 104
13 - 13 GraphicsServices 0x3785b2eb GSEventRunModal + 74
14 - 14 UIKit 0x326cd2f9 UIApplicationMain + 1120
15 - 15 myapp 0x000e72e7 myapp + 156391
16 - 16 myapp 0x000c2530 myapp + 5424 
```

我使用 atos 来表示报告中的内存地址，但是 3 个地址`0x0013f1f1` `0x001285ed` `0x0012887d`只是返回`__PRETTY_FUNCTION__.20480 (in myapp) + 101235` `__PRETTY_FUNCTION__.20480 (in myapp) + 8047` `__PRETTY_FUNCTION__.20480 (in myapp) + 8703`，这对我没有帮助。我还能做些什么来至少找到导致崩溃的方法名称吗？

如果没有，有什么我可以添加到我的`UncaughtExceptionHandler`或在将来的版本中为我提供方法名称的东西吗？我似乎从未收到任何 iTunes Connect 崩溃报告，这就是我选择这条路线的原因。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T20:01:27.813

一些服务/库可以考虑获得更好的崩溃报告，就像你问的那样。

*   [我强烈推荐的Crashlytics](http://try.crashlytics.com/)，简单的设置，漂亮的界面和自动符号化
*   [TestFlight](https://testflightapp.com/sdk/)我喜欢 TestFlight 的 beta 分发版，我对他们的崩溃报告工具没有太多经验
*   [QuincyKit](http://quincykit.net/)如果您想托管自己的服务器以接收报告，这很好，如果您不想弄乱服务器托管，请查看[HockeyApp](http://hockeyapp.net/)，它是[HockeyKit](http://hockeykit.net/) + QuincyKit的“托管”版本
*   [JIRA Mobile Connect](http://www.atlassian.com/software/jiramobileconnect/overview)如果您使用 JIRA

使用其中之一可以让您忘记未处理异常的复杂性，他们是专家。除非您有兴趣成为该领域的专家，否则我真的建议您选择其中一位。我知道这并不能回答您问题的第一部分，但如果您无法获得答案或想花时间研究它，希望它能提供一些价值。

# ruby-on-rails - Rails：工厂女孩故障排除

> ID：14345650
> 
> 赞同：0
> 
> 时间：2013-01-15T19:48:17.620
> 
> 标签：ruby-on-rails, unit-testing, factory-bot

我正在尝试对一个相当复杂的模型进行单元测试。不幸的是，我无法让它们落地，因为 Factory Girl 未能创建有效的工厂。我在控制台中收到此错误消息：

```
←[31mrspec ./spec/models/user_spec.rb:5←[0m ←[36m# User has a valid factory←[0m 
```

但就是这样。工厂有22条线：

```
require 'faker'

FactoryGirl.define do
  factory :user do |f|
    f.name { Faker::Name.name }
    f.username { Faker::Internet.user_name }
    f.email { Faker::Internet.email }
    f.password { Faker::Lorem.characters(char_count = rand(6..20)) }
    f.password_confirmation { "#{password}" }
    f.time_zone { Faker::Address.time_zone }
    f.location_name { Faker::Address.city }
    f.latitude { Faker::Address.latitude }
    f.longitude { Faker::Address.longitude }
    f.slug { "#{username}" }
    f.hide_location { [true, false].sample }
    f.ignore_bookclub_requests { [true, false].sample }
    f.group_distance { rand * 100 }
    f.remote_groups { [true, false].sample }
    f.whuffie { rand * 100 }

  end
end 
```

但我不知道问题出在哪条线。尽管更有经验的程序员可能会指出这一点，但我更好奇如何自己解决这个问题和未来的问题。我怎样才能找出问题出在哪里？通常，Rails 擅长指向特定的代码行或代码块。有没有办法可以在这里提示它这样做？

# ubuntu - Heroku toolbelt 无法安装 407 (Ubuntu/Precise)

> ID：14345651
> 
> 赞同：1
> 
> 时间：2013-01-15T19:48:20.397
> 
> 标签：ubuntu, heroku, ubuntu-12.04

我按照说明运行：

```
wget -qO- https://toolbelt.heroku.com/install-ubuntu.sh | sh 
```

我得到：

```
...
Hit http://archive.ubuntu.com precise-backports/restricted Translation-en                                                  
Hit http://archive.ubuntu.com precise-backports/universe Translation-en                                                    
Err http://toolbelt.heroku.com ./ Packages                                                                                 
  407  Proxy Authentication Required
Ign http://apt-corp.mirror.corp.google.com goobuntu-backports-precise-stable/main Translation-en_US
...      
Ign http://apt-corp.mirror.corp.google.com ubiquity-precise-stable/main Translation-en
Ign http://apt-corp.mirror.corp.google.com vmware-precise-stable/main Translation-en_US
Ign http://apt-corp.mirror.corp.google.com vmware-precise-stable/main Translation-en
Fetched 2,313 kB in 18s (123 kB/s)
W: Failed to fetch http://toolbelt.heroku.com/ubuntu/./Packages  407  Proxy Authentication Required 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:45:40.610

### 这通常意味着什么

通常`407 Proxy Authentication Required`在尝试使用 APT 安装软件包时出错意味着：

1.  您使用 HTTP 代理。
2.  APT 未正确配置为使用它。

如果是这种情况，那么您可以通过添加行来解决问题

```
Acquire::http::Proxy "http://**user**:**pass**@**proxy**:**port**/";
```

到文件中`/etc/apt/apt.conf`（给出**`user`**、**`pass`**、**`proxy`**和**`port`**正确的值）。

***资料来源：** [jaseem](https://askubuntu.com/users/38669/jaseem)对[407 Proxy Authentication Required](https://askubuntu.com/questions/88976/407-proxy-authentication-required)的[回答](https://askubuntu.com/a/89360/22949)（在[Ask Ubuntu](https://askubuntu.com/)上）。*

### 一个奇怪的情况

在这里，似乎其他软件源也可以工作。`apt-get`能够从中读取数据`archive.ubuntu.com`，并且大概能够做更多事情（如果您的 Ubuntu 机器上的包管理器被彻底破坏，您会注意到）。

因此，虽然问题似乎与代理有关，但它可能不是您机器上配置错误的结果。

[关于http://toolbelt.heroku.com](http://toolbelt.heroku.com)软件源的一件有趣的事情是导航到该 URL 会将您转发到 HTTPS 站点。APT 完全支持 HTTPS 软件源，但是*这个软件源不是 HTTPS*。

检查脚本启用的软件源的配置显示：

```
$ cat /etc/apt/sources.list.d/heroku.list 
deb http://toolbelt.heroku.com/ubuntu ./ 
```

[http://toolbelt.heroku.com/ubuntu](http://toolbelt.heroku.com/ubuntu)也转到 HTTPS 404 页面，但*带有尾部斜杠*，它不会。当以 结尾时`/`，它会重定向到[http://heroku-toolbelt.s3.amazonaws.com/apt/](http://heroku-toolbelt.s3.amazonaws.com/apt/)（尽管可能无关紧要，但无论您是否有尾随 ，它的行为都是正确的`/`）。

出于代理目的，也许 Ubuntu 或您的代理很难弄清楚什么是 HTTP 和 HTTPS。这只是一个猜测......但我认为值得一试。

### 一个可能的解决方案

编辑`/etc/apt/sources.list.d/heroku.list`并将其内容更改为：

```
deb http://toolbelt.heroku.com/ubuntu/ ./ 
```

（也就是说，在 URL 中添加一个斜杠。）

然后运行`sudo apt-get update`并查看错误是否消失。如果是这样，请尝试安装 Heroku。

*   您下载的脚本会自动安装它，但它没有达到这一点。所以手动运行：`sudo apt-get install heroku`

### 为什么不直接改成amazonaws域名呢？

当我建议添加斜杠时，您可能想知道为什么我不只是说将行更改为：

```
deb http://heroku-toolbelt.s3.amazonaws.com/apt ./ 
```

原因是，即使`Packages`文件（列出存储库提供的包）存在`http://heroku-toolbelt.s3.amazonaws.com/apt`并且可以下载

```
wget http://heroku-toolbelt.s3.amazonaws.com/apt/./Packages 
```

...尽管如此，不知何故`apt-get update`无法下载该文件：

```
W: Failed to fetch http://heroku-toolbelt.s3.amazonaws.com/apt/./Packages  404  Not Found 
```

`aptitude`有同样的问题，这表明它不是一个`apt-get`错误。此外，除了由和检索的其他文件*之外*`./`，该语法也适用于其他文件。 *`Packages``apt-get update``aptitude update`*

 *因此，除非这是足够的信息，您（或某人）可以弄清楚我无法弄清楚的内容，否则将其更改为 amazonaws 域名也不太可能起作用。

### 手动下载并安装`.deb`软件包

如果您的代理设置正确并且您的代理本身没有问题，并且在 URL 中添加尾部斜杠不起作用，那么我能想到的唯一解决方案是手动下载和安装`.deb`软件包的解决方法。

首先，禁用导致错误的 Heroku 存储库：

```
cd /etc/apt/sources.list.d && sudo mv heroku.list heroku.list.save 
```

该`Packages`文件（以防您根本无法下载）说：

```
Package: foreman
Priority: standard
Section: main
Maintainer: Heroku
Architecture: all
Version: 0.60.0
Depends: ruby1.9.1
Filename: ./foreman-0.60.0.deb
Size: 89486
MD5sum: 83c614451545d98a09d0bb55e939cc03
SHA1: afd5d9d6ede750cb42bce1ab938dd9ac7bebe100
SHA256: a41532cb9ed60226ca9b4388842215c5ba94f8f5c32d832519858f66d5b19ebe
SHA512: c9327af190b12cb4d7f33cf2480c15c1249b400c4605ea5405ba3e3ddd433789a94471946ef4be452ed1669f1b63bf7150dba03c0e76a0d6f9c9ff981890490a
Description: Manage Procfile-based applications.
 Foreman is a manager for Procfile-based applications. Its aim is to
 abstract away the details of the Procfile format, and allow you to
 either run your application directly or export it to some other
 process management format.

Package: heroku-toolbelt
Priority: standard
Section: main
Installed-Size:
Maintainer: Heroku
Architecture: all
Version: 2.34.0
Depends: git-core, foreman, heroku (= 2.34.0)
Filename: ./heroku-toolbelt-2.34.0.deb
Size: 628
MD5sum: e81597804c537e93f85b89720ae2ebfd
SHA1: ebbb60c1479364f112ea386b5f6199de54dfcf5f
SHA256: c204b87691a5fdd8e0b750512e557ac5c494d4d561ecafb1e6d2c04b078b4bf8
SHA512: 8622e839f4748878a3c3083b09d1a84a16fb0c8c6cd3ac0885e5960810e8116c785e63027ccf87bfd1618be53736dabbcfc47c9c83e072776e9099c5443a64f9
Description: A metapackage for working with the Heroku platform.

Package: heroku
Priority: standard
Section: main
Maintainer: Heroku
Architecture: all
Version: 2.34.0
Depends: ruby1.9.1, libopenssl-ruby1.9.1, libreadline-ruby1.9.1, libssl0.9.8 (>= 0.9.8k) | libssl1.0.0
Filename: ./heroku-2.34.0.deb
Size: 639186
MD5sum: 474461b8217d45a954fc0eeab007b53d
SHA1: 50f2ca475d78d480a47dcc56353707c69209dbb9
SHA256: 7caf91c66e6c439b210b338a06313218b8a38ce5458467771f51df770832c476
SHA512: d009fb299232dc65ce586fe185670d96c1cf30bf15e7dada1f11000e7753951dc77b872caca0897e856a88fe3142f2da9f63b90adaeca213bacdb73455c8c1f1
Description: Client library and CLI to deploy apps on Heroku. 
```

因此，创建一个空目录，获取 debs，并安装它们及其依赖项：

```
mkdir ~/heroku-debs
cd ~/heroku-debs
wget http://toolbelt.heroku.com/ubuntu/foreman-0.60.0.deb
wget http://toolbelt.heroku.com/ubuntu/heroku-toolbelt-2.34.0.deb
wget http://toolbelt.heroku.com/ubuntu/heroku-2.34.0.deb
# You may want to verify hashes now. Ideally, download the Packages file
# yourself, rather than assuming the authenticity of what I've quoted here.
sudo dpkg -i *.deb
sudo apt-get update && sudo apt-get -f install 
```

请记住，当您的其他软件更新时，它们不会自动更新。但是，假设您能够下载该`Packages`文件，您可以使用它来不时检查更新。

我希望我提出的早期解决方案之一对您有用。如果没有，这应该，并且希望很快会找到一个不那么丑陋的解决方案。*

# sql - （递归？）用可变数量的行填充表，具体取决于另一个表中另一列中的值

> ID：14345653
> 
> 赞同：-2
> 
> 时间：2013-01-15T19:48:22.113
> 
> 标签：sql, postgresql

我有一个 [报纸、杂志] 版本的概念，每个地区都可以指定他们想要发布它们的频率。一个地区可能每月发布一次，而另一个地区可能每年只发布一次。

```
select id, frequency from regions;
 id | frequency
----+-----------
  1 | 1 year
  2 | 6 mons
  3 | 4 mons
  4 | 1 mon 
```

版本的名称是一个便于翻译的日期，因为它始终是月份的名称（以它编写的语言）和出版的年份。开始/结束日期是应考虑将文章包含在版本中的参考点（还有另一个表包含文章/版本之间的链接，因为并非所有文章都已发布）。

```
select region_id, name, date_start, date_end from editions;
 region_id |    name    |       date_start       |        date_end
-----------+------------+------------------------+------------------------
         1 | 2013-01-01 | 2012-03-24 00:00:00-04 | 2012-12-23 23:59:59-05
         2 | 2013-01-01 | 2012-09-24 00:00:00-04 | 2012-12-23 23:59:59-05
         3 | 2013-01-01 | 2012-11-24 00:00:00-05 | 2012-12-23 23:59:59-05
         4 | 2013-01-01 | 2013-02-24 00:00:00-05 | 2012-12-23 23:59:59-05
         2 | 2013-07-01 | 2012-12-24 00:00:00-05 | 2013-12-23 23:59:59-05
         1 | 2014-01-01 | 2012-12-24 00:00:00-05 | 2014-12-23 23:59:59-05
         4 | 2013-02-01 | 2012-12-24 00:00:00-05 | 2013-02-23 23:59:59-05
         3 | 2013-05-01 | 2012-12-24 00:00:00-05 | 2013-08-23 23:59:59-04 
```

我有这个查询来为每个地区生成*下一个版本：*

```
INSERT INTO editions
    (region_id, name, date_start, date_end)
SELECT 
    regions.id,
    (last_edition.name + regions.frequency) :: date AS name,
    last_edition.date_end + interval '1 second' AS date_start,
    last_edition.name + regions.frequency + regions.frequency - interval '1 month' + interval '22 23:59:59' AS date_end
FROM
    (SELECT region_id, max(name) :: timestamp AS name, max(date_end) AS date_end FROM editions GROUP BY region_id, date_end) AS last_edition JOIN
    regions ON regions.id = last_edition.region_id 
```

它的问题在于，每次我运行查询时，它都会为每个区域制作相同数量的版本。我正在寻找的是一个查询，如果我指定一个日期，它将生成从每个区域的最新版本开始到该日期的所有版本。例如，如果日期是一年后，它将生成以下版本数量：

*   每个地区 1 个版本，频率为`1 year`
*   每个地区 2 个版本，频率为`6 months`
*   每个地区 4 个版本，频率为`3 months`
*   每个地区 12 个版本，频率为`1 month`

这种查询通常会通过 cron 作业同时针对所有区域运行，但如果由于更改了频率而需要重新生成它们的版本，则可以针对特定区域运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:06:32.277

尝试类似：

```
SELECT 
    regions.id,
    name as last_name, 
    generate_series(name + frequency,'2015-01-01',frequency) as name,

    generate_series(name + frequency,'2015-01-01',frequency) 
    + frequency 
    - interval '1 month' 
    + interval '23 days' AS date_start,

    generate_series(name + frequency,'2015-01-01',frequency) 
    + 2 * frequency 
    - interval '1 month' 
    + interval '22 23:59:59' AS date_end

FROM (SELECT region_id, max(name) AS name
      FROM editions 
      GROUP BY region_id) AS last_edition 
JOIN regions ON regions.id = last_edition.region_id

ORDER BY 1, 2 
```

to generate all editions from the most recent to the date specified (`'2015-01-01'` in example).

# sql - SQL - 将一系列更新日期转换为开始和结束日期的行

> ID：14345654
> 
> 赞同：0
> 
> 时间：2013-01-15T19:48:29.377
> 
> 标签：sql, date, version, transpose

我有一种属性记录表，其中包含客户列表、属性和日期。此表每月更新一次，其中包含所有客户的当前属性值。

```
id     attr_val     date
1      red          2012-01-01
1      red          2012-02-01
1      blue         2012-03-01
2      green        2012-01-01
2      green        2012-02-01
2      green        2012-03-01 
```

我想重铸或转置此表，以便它列出每个属性值的开始和结束日期。这样我就可以选择一个任意日期并`date between start_dt and end_dt`获取该日期的值。

```
id     attr_val     start_dt       end_dt
1      red          2012-01-01     2012-02-28
1      blue         2012-03-01     NULL
2      green        2012-01-01     NULL 
```

这可以通过单个 SQL 命令实现，还是我需要运行某种更复杂的脚本？目标环境是 Teradata，但我认为该解决方案与平台无关......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:55:38.167

一个很好的解决方案是相关子查询：

```
select id, attr_val, min(date) as start_date, end_date
from (select t.*,
             (select min(date) - 1 from t t2 where t2.id = t.id and t2.date > t.date and t2.attr_val <> t.attr_val
             ) as end_date
      from t
     ) t
group by id, attr_val, end_date 
```

这将计算给定 id 和属性值的属性不同的下一个日期。比这个日期少一个是结束日期。当给定 id 的属性在连续行上具有相同的值时，它们都将获得相同的 end_date（即使为 NULL）。然后查询使用此结束日期将它们组合在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T19:50:29.823

这可能是你想要的

```
SELECT id, attr_val, min(date) as start_dt, max(date) as end_dt
FROM tablename
GROUP BY id, attr_val 
```

或这个：

```
SELECT id, attr_val, min(date) as start_dt,CASE WHEN max(date) > min(date) THEN max(date) ELSE null END as end_dt
FROM tablename
GROUP BY id, attr_val 
```

# c# - 用户界面滞后。调整我的应用程序窗口的大小会占用 cpu

> ID：14345655
> 
> 赞同：0
> 
> 时间：2013-01-15T19:48:31.913
> 
> 标签：c#, .net, vb.net, winforms, visual-studio-2008

VB.NET / Win 表格 / VS 2008

我正在开发一些软件，到目前为止我对 UI 设计非常满意.. 非常结构化且易于阅读.. 但是当我调整窗口大小时，它非常“滞后”。当我观看任务管理器时，调整窗口大小时 CPU 会飙升至 25%（使用 100% 的核心）（未调整大小时为 0%）。如果那样的话，它会以每秒 4 帧的速度重绘窗口。

这是一个相当复杂的用户界面，但绝不是疯狂的。我觉得它不应该像这样运行。

我的布局层次结构如下所示：

```
<FORM>
    <TABCONTROL> (first tab example, subsequent tabs follow the same control hierarchy)
        <SPLITCONTAINER>
            <PANEL 1>
                <DATAGRIDVIEW />
            </PANEL 1>
            <PANEL 2>
                <TABCONTROL>
                    <TABCONTROL>
                        <TABCONTROL>
                            Lots of data fields in these tabs
                        </TABCONTROL>
                    </TABCONTROL>
                </TABCONTROL>
            </PANEL 2>
        </SPLITCONTAINER>
    </TABCONTROL>
</FORM> 
```

一切都停靠在其父级上。这一切都非常流畅。因此拆分器停靠在主选项卡中（填充模式），选项卡控件停靠在其他选项卡控件中（填充模式），等等。

我认为它只是在调整窗口大小时试图重新计算控件的位置给系统带来很大的负担。

关于完全重新设计软件我能做些什么的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:10:37.553

不幸的是，这对于 WinForms 应用程序来说是正常的，尤其是那些有很多嵌套容器的应用程序。

但是，有一个“解决方法”涉及在窗体即将调整大小和调整大小后调用暂停和恢复布局：

[调整 c# windows 窗体大小时防止窗口重绘](https://stackoverflow.com/questions/2353381/prevent-window-redraw-when-resizing-c-sharp-windows-forms)

# asp.net - 确定用户是否在 Active Directory 组中

> ID：14345659
> 
> 赞同：0
> 
> 时间：2013-01-15T19:48:44.923
> 
> 标签：asp.net, iis

我正在使用以下代码来确定用户是否在特定组中。该代码在我的本地开发环境中运行良好，但是当我将其推送到我们的开发服务器时，它一直返回 false。

我需要在 IIS 中配置什么吗？

注意：此代码仅在特定页面上运行。它并非在全球范围内用于所有网页。

```
Public Function IsInGroup(ByVal GroupName As String)
    Dim MyIdentity As System.Security.Principal.WindowsIdentity = System.Security.Principal.WindowsIdentity.GetCurrent()
    Dim MyPrincipal As System.Security.Principal.WindowsPrincipal = New System.Security.Principal.WindowsPrincipal(MyIdentity)

    '' Web team needs access to all pages. See web.config for value.
    If MyPrincipal.IsInRole(ConfigurationManager.AppSettings("ISSupportAllAccessADGRoup").ToString.ToUpper) Then
        Return True
    Else
        If MyPrincipal.IsInRole(GroupName) Then
            Return True
        Else
            Return False
        End If
    End If

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T23:46:50.693

请参阅以下页面：http: [//msdn.microsoft.com/en-us/library/system.web.httprequest.logonuseridentity.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.logonuseridentity.aspx)

Request.LogonUserIdentity.Name 公开 Windows.Princpal。在任何情况下，这都需要 1) 启用 Windows 身份验证 2) 启用表单身份验证，并且在这种情况下将有效的域凭据传递给应用程序。

否则，匿名访问会破坏目的，并允许任何没有身份的人进入，从而使您的代码毫无意义。如果您需要识别用户的功能子集，请考虑设置一个虚拟目录 /admin 例如，它可以拥有自己的 web.config 并启用 Windows 身份验证。对于 IIS（在服务器上），IUSR 是在没有其他可用时使用的默认 IIS 帐户，我猜 ABC\John Doe 是您在工作站上的帐户。我还要说，您在本地运行的 IIS 实例未设置为匿名。

# javascript - “未捕获的 SyntaxError：意外的标识符”，字符串中带有转义引号

> ID：14345662
> 
> 赞同：2
> 
> 时间：2013-01-15T19:49:03.403
> 
> 标签：javascript

当我尝试使用 jQuery 打开保存的博客文章时，我进入`Uncaught SyntaxError: Unexpected identifier`了第 220 行。第 220 行是`Hans kommande film som har premiär nu på...`. 请参阅下面从 Google Chrome 控制台复制的完整代码。

```
 $('body').on('click', '#load-blogpost-ill-be-back', function() {

        var subject = "I\'ll be back!";
        var message = "[url=http://www.imdb.com/name/nm0000216/]Arnold Schwarzenegger[/url] är en sann legendar när det gäller kända repliker och karriär. I alla fall för min del. Hans \"I\'ll be back!\" i första [url=http://www.imdb.com/title/tt0088247/]Terminator[/url], är en klar klassiker som används ofta i all möjlig media, bilder som filmer. Jag tittade nyss på en [url=http://instagram.com/p/Ugz4LBDcfx/]Instagram-bild[/url] som han hade delat ut på Facebook, såg man att han börjar på att bli en gammal man. En gammal man i äkta papparoll-stuk, vilket gillas. I alla fall av mig :)

Hans kommande film som har premiär nu på fredag i [url=http://sv.wikipedia.org/wiki/USA]USA[/url], [url=http://www.imdb.com/title/tt1549920/]The Last Stand[/url], verkar för övrigt vara en väldigt lovande film med många kända skådespelare; [url=http://www.imdb.com/name/nm0424216/]Johnny Knoxville[/url], [url=http://www.imdb.com/name/nm0350079/]Luis Guzmán[/url], [url=http://www.imdb.com/name/nm0001780/]Peter Stormare[/url], [url=http://www.imdb.com/name/nm0001845/]Forest Whitaker[/url] och såklart våran kära Arnold som har huvudrollen i filmen. Titta på filmen förhandstitt nedan.
Uncaught SyntaxError: Unexpected identifier

[yt]https://www.youtube.com/embed/BS-FyAh9cv8[/yt]";

        $(this).replaceWith(subject);
        $('input[name="textfield-subject"]').val(subject);
        $('textarea[name="textarea-message"]').val(message).focus();

        // VISA
        $('.blogpost-preview-ruler').show();
        $('#blogpost-preview-head').show();

        // VISA & SKRIV UT
        $('#blogpost-preview-subject').show().html(subject);
        $('#blogpost-preview').show().html(bbcode_js(message));

        var selectedID = [];
        $(':checkbox[name="checkbox[]"]').each(function() {
                            if($(this).val() == '4') {
                    $(this).attr('checked', true);
                }
                    });

    }); 
```

那条线有什么问题？它`/`在链接中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T19:54:49.853

问题是 JavaScript 不支持这样的多行字符串。您要么必须以 a 结束每一行`\`（不推荐，因为后面的空格也会产生语法错误）或使用连接。

例如，（注意它们是连接在一起并`\n`注入的两个单独的字符串。）

```
var message = "[url=http://www.imdb.com/name/nm0000216/]Arnold Schwarzenegger[/url] är en sann legendar när det gäller kända repliker och karriär. ... :)\n\n" +
          "Hans kommande film som har premiär nu på fredag i [url=http://sv.wikipedia.org/wiki/USA]USA[/url], [url=http://www.imdb.com/title/tt1549920/]The Last Stand[/url], ..."; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:28:11.067

`json_encode()`是使 PHP 变量中的字符串可用于 Javascript 的好方法。

```
echo "var message = ". json_encode($your_string_var_here); 
```

# django - Heroku Push，pip 安装错误的版本

> ID：14345670
> 
> 赞同：2
> 
> 时间：2013-01-15T19:49:26.307
> 
> 标签：django, heroku, pip

我正在尝试将我的应用程序推送到 Heroku。一切都在本地工作。当推送 pip 运行并安装东西时，推送完成。回顾一下推送输出，有很多错误安装的包。如：

```
Downloading/unpacking python-dateutil==2.1 (from -r requirements.txt (line 22))
     Running setup.py egg_info for package python-dateutil

     Requested python-dateutil==2.1 (from -r requirements.txt (line 22)), but installing version 2.0
Downloading/unpacking South==0.7.6 (from -r requirements.txt (line 24))
     Running setup.py egg_info for package South

     Requested South==0.7.6 (from -r requirements.txt (line 24)), but installing version 0.7.3 
```

这破坏了 collectstatic（在 dateutils 情况下）以及我们整个应用程序（在 django-registration 和其他情况下）的功能。我怎样才能让它安装正确/请求的版本？我尝试直接从 tarball 安装，但它会下载新版本，卸载旧版本，然后重新安装旧版本。

**更新：**

作为临时修复，我更改了运行时 Python 版本，以便卸载所有应用程序，然后将其更改回来并使用 tarball 链接安装正确的版本。我仍然想找到一个允许正常 pip 安装/版本控制的解决方案。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-15T20:09:57.513

通常，当这样的事情发生在我身上时，是因为我忘记了切换正确的虚拟环境（使用 virtualenv.py），并且我使用了错误的 requirements.txt。

# jquery - Jquery动态添加下拉菜单并在未选中时将其删除

> ID：14345671
> 
> 赞同：0
> 
> 时间：2013-01-15T19:49:26.843
> 
> 标签：jquery, html, forms

我在下面有一个表格，当用户选择一项运动时，它会被动态添加。我已经实现了代码，如果一项运动已经存在，则不能再次添加。我想不通的是，如果用户取消选中一项运动，我希望它从列表和数组中删除，并且用户能够再次添加它。

```
<!DOCTYPE html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<meta charset=utf-8 />
<title>Item listing</title>
</head>
<body>
 <form action="test.htm" method="get">
    <select name="mylist" id="myList">
      <option id="1">Baseball</option>
      <option id="2">Soccer</option>
      <option id="3">Basketball</option>
      <option id="4">Volleyball</option>
      <option id="5">Hockey</option>
      <option id="6">Football</option>
      <option id="7">Rugby</option>
      </select>
  <br />
  <div id="sList">
  </div>
  <br />
  <input type="submit" value="Submit" />
  </form>
<script type="text/javascript">
    //add item when selected
    //a sport can not be added twice
    var allVals = [];
    $('#myList').change(function () {
        if ($.inArray(this.value, allVals) == -1) {
            allVals.push($(this).val());
            document.getElementById("sList").innerHTML += "<input checked =\"checked\" id=\"wList\" name=\"wList[]\" type=\"checkbox\" value=\"" + this.value + "\">" + this.value + "<br />";
        }
    });

    //remove sport when unchecked
    $('#wList').change(function () {
       //???
    });

    //submit should send checked sports

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:28:02.103

以下是您可以从列表中删除项目的方法。请注意，我对您的代码进行了几处更改...我已将复选框 ID 更改为类--ID 必须是唯一的。我在您的复选框周围添加了标签，以使它们更易于访问并使标签可点击。我
在输入后删除了标签。改用 CSS 来简化格式并简化必要的 jQuery。

[http://jsfiddle.net/j6G2Y/](http://jsfiddle.net/j6G2Y/)

```
//add item when selected
//a sport can not be added twice
var allVals = [];
$('#myList').change(function () {
  if ($.inArray(this.value, allVals) == -1) {
    allVals.push($(this).val());
    document.getElementById("sList").innerHTML += "<label class=\"wList\"><input checked =\"checked\" class=\"wList-chk\" name=\"wList[]\" type=\"checkbox\" value=\"" + this.value + "\"> " + this.value + "</label>";
  }
});

//remove sport when unchecked
$(document).on("change", ".wList-chk", function () {
  if ($(this).attr('checked')) {
    return;
  } else {
    $(this).parent('.wList').remove();
  }
});

//submit should send checked sports 
```

您应该能够使用以下内容从数组中删除该项目：

[http://jsfiddle.net/j6G2Y/1/](http://jsfiddle.net/j6G2Y/1/)

```
//remove sport when unchecked
$(document).on("change", ".wList-chk", function () {
  if ($(this).attr('checked')) {
    return;
  } else {
    var thisVal = $(this).val();
    var index= $.inArray(thisVal, allVals);

    allVals.splice(index,1); alert(allVals);

    $(this).parent('.wList').remove();
  }
}); 
```

我已经留下了一些警报来监控阵列。

# ms-access - 和 IIF 之间

> ID：14345673
> 
> 赞同：1
> 
> 时间：2013-01-15T19:49:31.530
> 
> 标签：ms-access, count

我有以下代码，目的是统计每个组中在给定时间范围内离开公司的员工人数。我正在使用 COUNT IIF，它说代码的每一位中 AND 之后的 <= 符号是错误的。我应该如何计算日期范围？

```
 SELECT O867IA_VPJOBCO.JOB_GRP_CD, Count(IIf(O867IA_VJOBHST.REC_EFF_STT_DT>=#1/1/2009# And <= #12/31/2009#,2009,0)) AS 2009, Count(IIf(O867IA_VJOBHST.REC_EFF_STT_DT>=#1/1/2010# And <= #12/31/2010#,2010,0)) AS 2010, COUNT(IIF(O867IA_VJOBHST.REC_EFF_STT_DT >= #1/1/2011# AND <= #12/31/2011#, 2011, 0)) AS 2010, COUNT(IIF(O867IA_VJOBHST.REC_EFF_STT_DT >= #1/1/2012# AND <= #12/31/2012#, 2012, 0)) AS 2012,
FROM (O867IA_VJOBHST INNER JOIN O867IA_VACTRSN ON (O867IA_VJOBHST.EMP_ACN_RSN_TYP_CD = O867IA_VACTRSN.EMP_ACN_RSN_TYP_CD) AND (O867IA_VJOBHST.EMP_ACN_TYP_CD = O867IA_VACTRSN.EMP_ACN_TYP_CD)) INNER JOIN O867IA_VPJOBCO ON O867IA_VJOBHST.JOB_CLS_CD = O867IA_VPJOBCO.JOB_CLS_CD
WHERE (((O867IA_VJOBHST.REC_EFF_STT_DT)>=#1/1/2009# And (O867IA_VJOBHST.REC_EFF_STT_DT)<=#12/31/2012#) AND ((O867IA_VACTRSN.EMP_ACN_TYP_CD)<>"RMT"))
GROUP BY O867IA_VPJOBCO.JOB_GRP_CD
HAVING (((O867IA_VPJOBCO.JOB_GRP_CD)>='72' And (O867IA_VPJOBCO.JOB_GRP_CD)<='94')); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:59:13.797

从有问题的表达式开始：

```
O867IA_VJOBHST.REC_EFF_STT_DT>=#1/1/2009# And <= #12/31/2009# 
```

然后简化它（这里我用上面的表达式替换了 a1、a2 和 b2）：

```
a1 >= a2 And <= b2 
```

放入括号以显示意图（这*不是*解析器所做的，但它确实有助于在此处识别问题）：

```
(a1 >= a2) And (<= b2) 
```

唔。不，`(<= b2)`看起来一点也不对 ..（提示：查看 HAVING 子句的条件以获取表单中的有效表达式`a1 >= a2 And b1 <= b2`。）

此外，请参阅[BETWEEN](http://office.microsoft.com/en-us/access-help/between-and-operator-HP001032212.aspx)运算符以了解编写此条件的不同/更简洁的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:26:22.293

我以您的第一个计算列为例：

```
Count(IIf(O867IA_VJOBHST.REC_EFF_STT_DT>=#1/1/2009# And <= #12/31/2009#,2009,0)) 
```

我认为您需要该`Sum`方法，而不是`Count`在这些情况下，请看一下：

```
Sum(IIf([O867IA_VJOBHST].[REC_EFF_STT_DT] BETWEEN #1/1/2009# And #12/31/2009#,1,0)) 
```

# autohotkey - 如果修改键关闭，如何禁用键盘重新映射？

> ID：14345678
> 
> 赞同：4
> 
> 时间：2013-01-15T19:49:49.517
> 
> 标签：autohotkey

我正在使用不同的键盘布局，使用 AHK 的 qwerty to colemak 脚本。它将字母重新映射到不同的字母。当 ctrl、alt 或 windows 键按下时，如何禁用它。这样像 ctrl+s 这样的热键保存应该仍然有效！

编辑：我从这里得到了脚本[http://colemak.com/wiki/index.php?title=Download](http://colemak.com/wiki/index.php?title=Download)

它看起来像这样

```
r::p
t::g
y::j
u::l 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T21:21:19.820

用于`Suspend`禁用热键。Use`~`告诉 AHK 不要阻止本地事件。然后`Suspend`再次使用以重新启用热键。

```
~Ctrl::Suspend, On
~Ctrl Up::Suspend, Off

~Alt::Suspend, On
~Alt Up::Suspend, Off

~LWin::Suspend, On
~LWin Up::Suspend, Off 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T08:49:13.793

虽然我在上面的评论中写道，我认为这种条件禁用不是必需的，但这里有一些代码。我使用了字母 f 并在记事本中进行了测试。按 f 会返回 Hello 按 ^f 应该会给出 hELLO，但由于 #IF 不正确，记事本查找会打开，因为系统会发送常规 Ctrl+f。!f 也一样，这将打开“文件”菜单。警告您必须安装 autoHotKey_L 才能使#IF 正常工作！

```
#If (NOT ((GetKeyState("Control", "P")) OR (GetKeyState("Alt", "P"))))
    f::Send, Hello ; Should execute as long as Ctrl or Alt are not pressed.
    *a::Send, QQQQ ; The * ignores all modyfiers, not executed when Alt or Ctrl is pressed.
    ^f::Send, hELLO ; should never execute due to #IF = False
    !f::Send, olleh ; should never execute due to #IF = False
#IF 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T20:26:45.510

包括脚本的代码或提供脚本的链接（我自己正在搜索但找不到它）会有所帮助。

如果脚本中的重新映射正确完成，组合`Ctrl`+`S`应该仍然有效，尽管键的物理位置已经改变。正如我在布局中看到的那样
[http://colemak.com/wiki/images/8/80/Colemak_layout_2.png](http://colemak.com/wiki/images/8/80/Colemak_layout_2.png)
s 与原始 s 的距离并不远，因此您可以尝试记住它。

禁用热键的通常解决方案是：

```
 Suspend, On 
```

[http://www.autohotkey.com/docs/commands/Suspend.htm](http://www.autohotkey.com/docs/commands/Suspend.htm)

由于我没有看到脚本，我不知道它是否会起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T20:34:08.057

和上面一样。不确定剧本。一个想法可能是使用 autoHotKey_L #if 函数并将重新分配的键放置在 #IF 中。然后应该围绕未按下的修饰键创建#IF。

# xml - 以 XML Schema 1.0 中的顶级祖先为条件的后代约束

> ID：14345685
> 
> 赞同：2
> 
> 时间：2013-01-15T19:50:15.163
> 
> 标签：xml, xsd, constraints, xsd-1.0

我希望有一个以顶级祖先类型为条件的后代元素。是否可以在 xml 模式 1.0 中对这种关系进行建模？如果是这样，怎么做？

以下是我想要的结构/验证行为：

```
<a1>
  <b>
    <c>
      <d/> -- allowed if ancestor is a1
    </c>
  </b>
</a1>

<a2>
  <b>
    <c>
      <d/> -- validation error - not allowed if ancestor is not a1
    </c>
  </b>
</a2> 
```

似乎 XSD 1.1 断言可以让我做到这一点，但我坚持使用 XML Schema 1.0。

我显然可以创建并行层次结构，并且只允许在一个中使用 d 元素，但这对于我们模式的用户来说会变得冗长和混乱。

并行层次结构可能如下所示：

```
<a1>
  <b1>
    <c1>
      <d/> -- allowed in c1 element
    </c1>
  </b1>
</a1>

<a2>
  <b2>
    <c2>
      <d/> -- not allowed in c2
    </c2>
  </b2>
</a2> 
```

**编辑：使用CM的提示解决上述问题的方案**

```
<xs:element name="a1">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="b" type="b1"></xs:element>
        </xs:sequence>
    </xs:complexType>
</xs:element>
<xs:element name="a2">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="b" type="b2"></xs:element>
        </xs:sequence>
    </xs:complexType>
</xs:element>
<xs:complexType name="b1">
    <xs:sequence>
        <xs:element name="c" type="c1"></xs:element>
    </xs:sequence>
</xs:complexType>
<xs:complexType name="b2">
    <xs:sequence>
        <xs:element name="c" type="c2"></xs:element>
    </xs:sequence>
</xs:complexType>
<xs:complexType name="c1">
    <xs:sequence>
        <xs:element name="d"></xs:element>
    </xs:sequence>
</xs:complexType>
<xs:complexType name="c2">
    <xs:sequence>
    </xs:sequence>
</xs:complexType> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:30:28.777

是的，这是可能的。您的并行元素层次结构（如果您在 a1 中，则为 b1 和 c1，如果您在 a2 中，则为 b2 和 c2）的后备建议已经完成了一半。您想要的本质上是相同的并行层次结构，但进一步扭曲的是，您称为 b1 和 b2 的元素都称为 b（对于 c1、c2、c 也是如此）。

关键是将名称“b”绑定到 a1 的上下文中的一种类型（称为 B1）的元素，并将其绑定到 a2 的上下文中的不同类型（B2）。然后，名称“c”在类型 B1 的上下文中绑定到一种类型 (C1)，在类型 B2 的上下文中绑定到不同的类型 (C2)。在类型 C1 中，允许使用 d 个元素，而在类型 C2 中则不允许。

[可以在我在开发 XSD 1.0 时写的一篇论文](http://www.w3.org/2000/04/26-csrules.html)中找到对该技术的更完整描述。可以观察到，相同的技术可以应用于任何模式语言，其中名称/类型绑定可以是给定上下文的本地；例如，Relax NG 可以做同样的事情。

# php - 浏览器使用 PHP 输出缓冲区和 ETag 缓存动态内容

> ID：14345686
> 
> 赞同：3
> 
> 时间：2013-01-15T19:47:48.340
> 
> 标签：php, browser, caching, cache-control

我一直在研究一些策略来优化我正在研究的 Web 应用程序，特别是与 Web 浏览器缓存和动态数据相关的。由于可能在会话中多次加载相同的动态内容，我想出了以下方法，使用 PHP 的输出缓冲区并使用内容的哈希作为 ETag。

我意识到我用这种方法真正节省的唯一事情是将数据传输回用户，因为 PHP 脚本仍然必须完全运行，但我很好奇是否有人做过类似的事情，是否有任何想法或疑虑我应该知道或有什么其他方法可能更好。

这是我在每页顶部包含的代码：

```
<?php
function hash_buffer($content) {
    $buffer_hash = crc32($content);
    if ($_SERVER['HTTP_IF_NONE_MATCH'] == $buffer_hash) {
        header('HTTP/1.1 304 Not Modified');
        header("ETag: $buffer_hash");
        return '';
    }
    header('Cache-Control: private, no-cache');
    header("ETag: $buffer_hash");
    return $content;
}

ob_start('hash_buffer');
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T10:39:47.743

使用快速的东西来创建哈希 crc32 速度很快，但可能会比 md5 给你更多的冲突（尽管文件名会处理一些问题）。

```
<?php
function hash_buffer($content) {
    $buffer_hash = crc32($content);

    // You could add expire time so the check is not made every time.
    // Or force it to happen always
    header('Expires:');//.date('r',strtotime('+1 hour')));

    // Add vary header so client knows to usee ETag
    // Without overwriting existing vary headers
    header('Vary: If-None-Match',false);

    if ($_SERVER['HTTP_IF_NONE_MATCH'] == $buffer_hash) {
        header('HTTP/1.1 304 Not Modified');
        header("ETag: $buffer_hash");
        return '';
    }
    header('Cache-Control: private, no-cache');
    header("ETag: $buffer_hash");
    return $content;
}

ob_start('hash_buffer');
?> 
```

# 尝试更快地获取内容到缓冲区

为了更快地缓冲生成内容，您可以使用文件缓存。例如，将生成的导航/blogroll/newslist 写入文件并从那里读取，如果 filemtime 在缓存生命周期内（10 分钟 - 1 小时等），否则将其写入文件并照常处理。

您需要写锁以防止冲突等。请参阅该[https://github.com/zendframework/zf2/blob/master/library/Zend/Cache/Storage/Adapter/Filesystem.php#L1489上的 ZendFramework 实现](https://github.com/zendframework/zf2/blob/master/library/Zend/Cache/Storage/Adapter/Filesystem.php#L1489)

## 记住

用户权限可能会在文件缓存中发挥作用，就像您不希望其他人的购物车出现在结帐页面上的任何缓存一样。通常，将经过身份验证的用户排除在文件缓存之外是安全的。

在文件上缓存时，必须保护缓存文件免受通过 Web 和其他方式的公共读写访问。

# c++ - 布尔二维数组初始化错误 C++

> ID：14345688
> 
> 赞同：0
> 
> 时间：2013-01-15T19:50:39.620
> 
> 标签：c++

该程序假设采用`size`一定数量的数字对，它们是二维布尔数组中的坐标。触发的每个坐标都会将值切换为`TRUE`。出于某种原因，我在最后一行以及最后一行的最后一个空格中都有错误。有任何想法吗？

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

int main(){
    const int size = 10;
    int *x = new int [size];
    int *y = new int [size];
    bool table[size][size] =  {{false}};
    for(int i = 1 ; i <= size; i++){
        cin >> x[i] >> y[i];
        if(x[i] <= size && y[i] <= size){
            table[x[i]][y[i]] = true;
        } else{
            cout << "invalid input \n";
            i--;
        }
    }

    for(int a = 1; a <= size; a++){
        for(int b= 1; b <= size; b++){
            cout << table[a][b] << " ";
        }
        cout << "\n";
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T19:55:31.337

对于大小为 N 的数组，数组索引从 0 到 N-1。您正在写入超出数组的范围。你的循环应该是这样的

```
for(int i = 0; i < size; ++i) { ..... } 
```

# php - 执行 PDO::exec() 时在非对象上调用成员函数 exec()

> ID：14345689
> 
> 赞同：1
> 
> 时间：2013-01-15T19:50:48.010
> 
> 标签：php, pdo

我正在编写一个 PHP 脚本来将一些数据库行从一个数据库导出/导入到另一个数据库。

到目前为止，我得到了这个函数来确保在将新行放在那里之前目标表是空的：

```
function truncateTable($conn, $tblname)
{
    echo "Truncating..";
    $query = $conn->exec("TRUNCATE TABLE $tblname") or die("failed!");
    echo "Truncated table $tblname!";
} 
```

但是，这给了我这个错误：

```
Call to a member function exec() on a non-object 
```

传递给函数的连接`$conn`字符串如下所示：

```
$con2 = new PDO("mysql:host=$dbs2;dbname=$dbd2",$dbu2,$dbp2); 
```

我这样调用函数：

```
truncateTable($con2, "users"); 
```

我究竟做错了什么？

我只是在学习 PDO，如果这是一个非常基本的问题，请原谅我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T19:53:30.380

试试这个，你正在传递`$conn`给方法，而不是`$q`：

```
function truncateTable($conn, $tblname)
{
    echo "Truncating..";
    $query = $conn->exec("TRUNCATE TABLE $tblname") or die("failed!");
    echo "Truncated table $tblname!";
} 
```

要解决其他问题，请使用`query()`而不是`exec()`:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-14T20:57:27.910

一个可能的罪魁祸首可能是数据库权限——即 MySQL 用户配置文件是否有足够的权限来截断表？直观上看，这似乎与 DELETE 相同，但事实并非如此。TRUNCATE 需要 DROP 权限（[http://dev.mysql.com/doc/refman/5.1/en/truncate-table.html](http://dev.mysql.com/doc/refman/5.1/en/truncate-table.html)）。

关于 mysqli_query() 的一件令人沮丧的事情是，如果不允许 Web 用户 DROP 表，则“...或 die()”部分不会执行 - 一种被动攻击型，IMO。;~)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T19:52:32.070

函数中的参数是`$conn`，不是`$q.`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-05-16T01:48:41.830

这对我有用：

```
$clean2 = $db->query( "TRUNCATE TABLE `table`"); 
```

很好很简单。

# actionscript-3 - AS3 - 生成和拾取一系列影片剪辑

> ID：14345690
> 
> 赞同：0
> 
> 时间：2013-01-15T19:50:53.143
> 
> 标签：actionscript-3, flash, numbers, movieclip

我正在创建一个游戏，其中角色在行走时会留下一连串的移动剪辑（我称之为日志）。达到目标后，角色需要返回并拾取他留下的所有影片剪辑（不一定按照他离开的顺序）。我这样做的方式，它只拾取一个，我无法弄清楚我应该做什么才能拾取它们中的每一个。这是我生成日志的代码：

```
 this["log"+counter] = new _Log();
    addChild(this["log"+counter]);
    this["log"+counter] .x = char.x;
    this["log"+counter] .y = char.y;
    logCounter=0;
    counter ++; 
```

以下是我挑选它们的方式：

```
 if(char.hitTestPoint(this["log"+(counter-1)] .x,this["log"+(counter-1)] .y, true)){
        this["log"+(counter-1)] .visible = false;
        this["log"+(counter-1)] .active = false;
    } 
```

我的想法是，如果我可以在使用 hitTestPoint 函数时以某种方式同时测试 1 和当前计数器值之间的所有数字。我有什么办法吗？如果没有，你会建议我用什么其他方式来获取我的电影剪辑线索？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:01:22.793

根据您的代码，您需要在循环中检查所有必要日志的冲突：

```
for (var i:int=0; i<counter; i++)
    {
        if(char.hitTestPoint(this["log"+i].x,this["log"+i].y, true)){
            this["log"+i].visible = false;
            this["log"+i].active = false;
        }
    } 
```

# directx - DirectX/SlimDX - 点似乎绘制在错误的坐标上 - 可能的视口错误

> ID：14345694
> 
> 赞同：0
> 
> 时间：2013-01-15T19:51:01.837
> 
> 标签：directx, coordinates, slimdx

很抱歉问，但我就是不明白发生了什么。

我是 DirectX/SlimDX 的新手。我目前正在尝试创建一个控件来显示 3D 点。我编写了最简单的代码，主要是使用第 3 个 SlimDX 教程。我在表单上放置了一个大小为 200x200 的控件，并尝试在其上绘制点：

```
 for (float i = -0.5f; i <= 0.5f; i += 0.001f)
         cloud.Add(new Vertex(i, 0.001f, 0)); 
```

这是一条 y 坐标接近 0 且 x 坐标从 -0.5 到 0.5 的线。

现在，据我了解，如果我将矩形标记为视口，则矩形的原点位于中心。现在，我的控件是 200x200，所以在创建视口时，我提供了一个 (0,0,200,200) 的视口矩形。因此，我的这条线应显示在沿 y 轴的矩形的中心。但我得到的是：

[http://www.4shared.com/photo/xGlGwTWK/Untitled.html](http://www.4shared.com/photo/xGlGwTWK/Untitled.html)

我的线在控件的最底部。x坐标似乎很好，但为什么我的线在底部应该在中心？

游戏中根本没有世界、视图、投影矩阵！但线仍然在错误的位置。谁能解释我发生了什么事？

我在这里上传了我的项目的剥离版本，只有 3 个短文件，可能是最简单的绘图：[http ://www.4shared.com/zip/uPKVbQKV/ScanForSO.html](http://www.4shared.com/zip/uPKVbQKV/ScanForSO.html)

谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:24:29.540

我似乎找到了答案。这是因为控件是从 Panel 派生的，而 Panel 的原始大小（我猜是从 Panel 构造函数中设置的）是 200x100。但是，当我创建视口时，我将其设置为 200x200。因此，origo 位于对照的底部中心。然后控件的大小调整为 200x200，设备/视口以某种方式自动跟随。

# c++ - 使用带有 Qt 插件的 Boost 序列化

> ID：14345695
> 
> 赞同：1
> 
> 时间：2013-01-15T19:51:04.227
> 
> 标签：c++, qt, serialization, boost

所有，我正在尝试使用 boost 序列化 Qt 插件基础结构。对我的插件基础架构的快速描述——所有插件都是工厂，我们称它们为 ObjectFactories。每个插件 .so/.dll 由两个类构成

我的问题是，当我从插件（在控制台测试程序中）序列化对象时，出现异常`derived class not registered or exported`

对象工厂.cpp/.h：

```
class ObjectFactory : public QObject, public [PluginInterface]
{
    //most important method
    BaseObject * createBaseObject();
} 
```

派生对象.h：

```
#include "base_object.h"

#include <boost/archive/basic_text_iarchive.hpp>
#include <boost/archive/basic_text_oarchive.hpp>

namespace MyNamespace
{

class DerivedObject : public BaseObject
{
public:
    DerivedObject();

    ~DerivedObject();

private:
    BaseObjectData<double> m_data;

    template<class Archive>
    void serialize(Archive &ar, const unsigned int version)
    {
        ar & boost::serialization::base_object<BaseObject>(*this);
        ar & m_data.data(); // T & BaseObjectData::data() - returns reference
    }
};

}

BOOST_CLASS_EXPORT_KEY(MyNamespace::DerivedObject) //Register our class for serialization/deserialization 
```

在derivedobject.cpp 的底部：

```
 BOOST_CLASS_EXPORT_IMPLEMENT(Mynamespace::DerivedObject) 
```

但是，我仍然得到

```
what(): unregistered class - derived class not registered or exported 
```

如果有人可以提供任何建议，将不胜感激。我很乐意添加更多我需要的资源。 **重要说明**，这两个类 (`ObjectFactory`和`DerivedObject`) 存在于同一个 *.so 中，所以我不知道这是否重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:25:40.247

好，知道了...

在我的基础和派生标题中：

```
#include <boost/archive/basic_text_iarchive.hpp>
#include <boost/archive/basic_text_oarchive.hpp> 
```

在我的测试程序中：

```
#include <boost/archive/text_iarchive.hpp>
#include <boost/archive/text_oarchive.hpp> 
```

我必须让这两个匹配。

# java - 解析 使用 Java

> ID：14345697
> 
> 赞同：1
> 
> 时间：2013-01-15T19:51:09.040
> 
> 标签：java, html, parsing

如何使用 Java 解析具有特定类类型的 HTML 文档中的 ul 元素？我想从 HTML 中解析这一部分：

```
<ul class="news-list">            

            <li>
                <a onclick="AjaxStatManager('Content','1258')" href="http://www.gyte.edu.tr/icerik/120/1258/kim-101-final-mazeret-sinavi.aspx" target="_self"> 
                    <div class="text">
                        <h2>KİM 101 Final Mazeret Sınavı</h2>
                        <p></p>

                    </div>
                </a>
            </li>

            <li>
                <a onclick="AjaxStatManager('Content','1248')" href="http://www.gyte.edu.tr/icerik/120/1248/butunleme-sinav-tarihleri.aspx" target="_self"> 
                    <div class="text">
                        <h2>Bütünleme Sınav Tarihleri</h2>
                        <p></p>

                    </div>
                </a>
            </li>

            <li>
                <a onclick="AjaxStatManager('Content','1242')" href="http://www.gyte.edu.tr/icerik/120/1242/bil-374-internet-teknolojileri-final-sinavi.aspx" target="_self"> 
                    <div class="text">
                        <h2>Bil 374 İnternet Teknolojileri Final Sınavı</h2>
                        <p></p>

                    </div>
                </a>
            </li>

            <li>
                <a onclick="AjaxStatManager('Content','1241')" href="http://www.gyte.edu.tr/icerik/120/1241/kim101-final-sinavi.aspx" target="_self"> 
                    <div class="text">
                        <h2>Kim101 Final Sınavı </h2>
                        <p></p>

                    </div>
                </a>
            </li>

            <li>
                <a onclick="AjaxStatManager('Content','1222')" href="/Files/UserFiles/85/duyurular/yeterlilik.pdf" target="_self"> 
                    <div class="text">
                        <h2>Doktora Yeterlilik Sınav Tarihleri</h2>
                        <p></p>

                    </div>
                </a>
            </li>

            <li>
                <a onclick="AjaxStatManager('Content','1221')" href="/Files/UserFiles/85/duyurular/duyuru-dokt-seminer.pdf" target="_self"> 
                    <div class="text">
                        <h2>Doktora Programı Adaylarına Önemli Duyuru</h2>
                        <p></p>

                    </div>
                </a>
            </li>

            <li>
                <a onclick="AjaxStatManager('Content','1127')" href="http://www.gyte.edu.tr/icerik/120/1127/20122013-egitimogretim-yili-guz-yari-yili--final-programi.aspx" target="_self"> 
                    <div class="text">
                        <h2>2012-2013 Eğitim-Öğretim Yılı Güz Yarı Yılı  Final Programı</h2>
                        <p></p>

                    </div>
                </a>
            </li>

            <li>
                <a onclick="AjaxStatManager('Content','1109')" href="/Files/UserFiles/85/duyurular/Yüksek Lisans  Doktora Seminer I ve II Sunum Takvimi.pdf" target="_self"> 
                    <div class="text">
                        <h2>Yüksek Lisans / Doktora Seminer I ve II Sunum Takvimi</h2>
                        <p></p>

                    </div>
                </a>
            </li>

            <li>
                <a onclick="AjaxStatManager('Content','998')" href="http://www.gyte.edu.tr/icerik/120/998/bilgisayar-muhendisligi-bolumu-20122013-guz-yari-yili-ders-programlari.aspx" target="_self"> 
                    <div class="text">
                        <h2>Bilgisayar Mühendisliği Bölümü 2012-2013 Güz Yarı Yılı Ders Programları</h2>
                        <p>Bilgisayar Mühendisliği Bölümü 2012-2013 Güz Yarı Yılı Ders Programları</p>

                    </div>
                </a>
            </li>

            <li>
                <a onclick="AjaxStatManager('Content','1101')" href="http://www.gyte.edu.tr/icerik/120/1101/kim-101-kimya-dersi---ii-vizesi.aspx" target="_self"> 
                    <div class="text">
                        <h2>KİM 101 Kimya Dersi   II .vizesi</h2>
                        <p></p>

                    </div>
                </a>
            </li>

            <li>
                <a onclick="AjaxStatManager('Content','1073')" href="/Files/duyuru/bilgisayar_muh/Yuksek_lisans_-_Doktora_Seminer_I_-_II.pdf" target="_self"> 
                    <div class="text">
                        <h2>Yüksek Lisans/Doktora Seminer I ve II Ders Planı</h2>
                        <p></p>

                    </div>
                </a>
            </li>

            <li>
                <a onclick="AjaxStatManager('Content','1058')" href="/Files/duyuru/bilgisayar_muh/bil495-496syl.pdf" target="_self"> 
                    <div class="text">
                        <h2>BIL 495/496 Bitirme Projesi Ders Planı</h2>
                        <p></p>

                    </div>
                </a>
            </li>

            <li>
                <a onclick="AjaxStatManager('Content','1006')" href="/Files/duyuru/bilgisayar_muh/duy-ders2013guz_1.doc" target="_self"> 
                    <div class="text">
                        <h2>G.Y.T.E. Lisans Üstü Öğrencilerinin Dikkatine</h2>
                        <p></p>

                    </div>
                </a>
            </li>

            <li>
                <a onclick="AjaxStatManager('Content','984')" href="http://www.gyte.edu.tr/icerik/120/984/bil-341-programlama-dilleri-butunleme-sinavi.aspx" target="_self"> 
                    <div class="text">
                        <h2>BİL 341 Programlama Dilleri bütünleme sınavı</h2>
                        <p></p>

                    </div>
                </a>
            </li>

</ul> 
```

我有以下代码要解析，但它不起作用：

```
try {
        URL url = new URL("http://www.gyte.edu.tr/kategori/120/0/duyurular.aspx");
        HTMLEditorKit kit = new HTMLEditorKit();
        HTMLDocument doc = (HTMLDocument) kit.createDefaultDocument();
        doc.putProperty("IgnoreCharsetDirective", Boolean.TRUE);
        Reader HTMLReader = new InputStreamReader(url.openConnection().getInputStream());
        kit.read(HTMLReader, doc, 0);
        ElementIterator it = new ElementIterator(doc);
        Element elem;

        while ((elem = it.next()) != null) {
            AttributeSet as = elem.getAttributes();

            if (as.containsAttribute("class", "news-list")) {
                int c = elem.getElementCount();
                System.out.println("Element count = " + c);
            }
        }

    } catch (IOException | BadLocationException e) {
        e.printStackTrace();
        return e.getMessage();
    }

    return "Success!"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T19:54:06.157

您可以将其加载到[Document](http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/Document.html)对象中。这将为您读取 HTML，您可以使用可用方法进行迭代/查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:51:41.433

我认为它适用于 XPATH 查询。

```
XPath xpath = XPathFactory.newInstance().newXPath(); 
String expression= "//ul[@class = 'news-list']"; 
InputSource inputSource = new InputSource("your.html"); 
NodeSet nodes = (NodeSet) xpath.evaluate(expression, inputSource, XPathConstants.NODESET); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T21:32:39.633

这是JSoup解决方案：

```
try {
    Document doc = Jsoup.parse(new URL("http://www.gyte.edu.tr/kategori/120/0/duyurular.aspx"), 1000000);
    Elements elements = doc.getElementsByAttributeValue("class", "news-list");
    System.out.println(elements.size());

    for (Element e : elements) {
        System.out.println(e.toString());
    }
} catch (Exception e) {
    e.printStackTrace();
} 
```

和输出：

```
 <ul class="news-list"> 
 <li> <a onclick="AjaxStatManager('Content','1258')" href="http://www.gyte.edu.tr/icerik/120/1258/kim-101-final-mazeret-sinavi.aspx" target="_self"> 
   <div class="text"> 
    <h2>KİM 101 Final Mazeret Sınavı</h2> 
    <p></p> 
   </div> </a> </li> 
 <li> <a onclick="AjaxStatManager('Content','1248')" href="http://www.gyte.edu.tr/icerik/120/1248/butunleme-sinav-tarihleri.aspx" target="_self"> 
   <div class="text"> 
    <h2>B&uuml;t&uuml;nleme Sınav Tarihleri</h2> 
    <p></p> 
   </div> </a> </li> 
 <li> <a onclick="AjaxStatManager('Content','1242')" href="http://www.gyte.edu.tr/icerik/120/1242/bil-374-internet-teknolojileri-final-sinavi.aspx" target="_self"> 
   <div class="text"> 
    <h2>Bil 374 İnternet Teknolojileri Final Sınavı</h2> 
    <p></p> 
   </div> </a> </li> 
 <li> <a onclick="AjaxStatManager('Content','1241')" href="http://www.gyte.edu.tr/icerik/120/1241/kim101-final-sinavi.aspx" target="_self"> 
   <div class="text"> 
    <h2>Kim101 Final Sınavı </h2> 
    <p></p> 
   </div> </a> </li> 
 <li> <a onclick="AjaxStatManager('Content','1222')" href="/Files/UserFiles/85/duyurular/yeterlilik.pdf" target="_self"> 
   <div class="text"> 
    <h2>Doktora Yeterlilik Sınav Tarihleri</h2> 
    <p></p> 
   </div> </a> </li> 
 <li> <a onclick="AjaxStatManager('Content','1221')" href="/Files/UserFiles/85/duyurular/duyuru-dokt-seminer.pdf" target="_self"> 
   <div class="text"> 
    <h2>Doktora Programı Adaylarına &Ouml;nemli Duyuru</h2> 
    <p></p> 
   </div> </a> </li> 
 <li> <a onclick="AjaxStatManager('Content','1127')" href="http://www.gyte.edu.tr/icerik/120/1127/20122013-egitimogretim-yili-guz-yari-yili--final-programi.aspx" target="_self"> 
   <div class="text"> 
    <h2>2012-2013 Eğitim-&Ouml;ğretim Yılı G&uuml;z Yarı Yılı Final Programı</h2> 
    <p></p> 
   </div> </a> </li> 
 <li> <a onclick="AjaxStatManager('Content','1109')" href="/Files/UserFiles/85/duyurular/Y&uuml;ksek Lisans  Doktora Seminer I ve II Sunum Takvimi.pdf" target="_self"> 
   <div class="text"> 
    <h2>Y&uuml;ksek Lisans / Doktora Seminer I ve II Sunum Takvimi</h2> 
    <p></p> 
   </div> </a> </li> 
 <li> <a onclick="AjaxStatManager('Content','998')" href="http://www.gyte.edu.tr/icerik/120/998/bilgisayar-muhendisligi-bolumu-20122013-guz-yari-yili-ders-programlari.aspx" target="_self"> 
   <div class="text"> 
    <h2>Bilgisayar M&uuml;hendisliği B&ouml;l&uuml;m&uuml; 2012-2013 G&uuml;z Yarı Yılı Ders Programları</h2> 
    <p>Bilgisayar M&uuml;hendisliği B&ouml;l&uuml;m&uuml; 2012-2013 G&uuml;z Yarı Yılı Ders Programları</p> 
   </div> </a> </li> 
 <li> <a onclick="AjaxStatManager('Content','1101')" href="http://www.gyte.edu.tr/icerik/120/1101/kim-101-kimya-dersi---ii-vizesi.aspx" target="_self"> 
   <div class="text"> 
    <h2>KİM 101 Kimya Dersi II .vizesi</h2> 
    <p></p> 
   </div> </a> </li> 
 <li> <a onclick="AjaxStatManager('Content','1073')" href="/Files/duyuru/bilgisayar_muh/Yuksek_lisans_-_Doktora_Seminer_I_-_II.pdf" target="_self"> 
   <div class="text"> 
    <h2>Y&uuml;ksek Lisans/Doktora Seminer I ve II Ders Planı</h2> 
    <p></p> 
   </div> </a> </li> 
 <li> <a onclick="AjaxStatManager('Content','1058')" href="/Files/duyuru/bilgisayar_muh/bil495-496syl.pdf" target="_self"> 
   <div class="text"> 
    <h2>BIL 495/496 Bitirme Projesi Ders Planı</h2> 
    <p></p> 
   </div> </a> </li> 
 <li> <a onclick="AjaxStatManager('Content','1006')" href="/Files/duyuru/bilgisayar_muh/duy-ders2013guz_1.doc" target="_self"> 
   <div class="text"> 
    <h2>G.Y.T.E. Lisans &Uuml;st&uuml; &Ouml;ğrencilerinin Dikkatine</h2> 
    <p></p> 
   </div> </a> </li> 
 <li> <a onclick="AjaxStatManager('Content','984')" href="http://www.gyte.edu.tr/icerik/120/984/bil-341-programlama-dilleri-butunleme-sinavi.aspx" target="_self"> 
   <div class="text"> 
    <h2>BİL 341 Programlama Dilleri b&uuml;t&uuml;nleme sınavı</h2> 
    <p></p> 
   </div> </a> </li> 
</ul> 
```

# sql - 将 SQL INSERT 与引用表合并

> ID：14345698
> 
> 赞同：3
> 
> 时间：2013-01-15T19:51:11.167
> 
> 标签：sql, sql-server-2008, tsql, ssis

我需要同步两个表。

**表A**

```
Id    Name 
```

**表B**

```
Id  Name RefID --It's a Foreign key, defined as primary key in Table "TableReference" 
```

**表参考**

```
RefID -- Identity Column, auto increment 
```

我需要合并`TableA`，并且`TableB`在每次插入时`TableB`，都应该插入一个值，`TableReference`并且应该将插入的值复制到`RefId`的列中`TableB`。

我在做什么？

我正在使用 SSIS，因此我需要一个基于 SSIS 的解决方案或基于 SQL 的解决方案。我知道如何使用 Merge SQL 命令合并表，但我无法将值插入`TableRef`并将其复制回`TableB`. 无法弄清楚我怎么能做到这一点。SQL 用户定义的函数不允许`INSERT`，所以我不能使用它。

```
Merge TabaleB T
Using Table A S
On S.Id=T.Id
WHEN MATCHED THEN
UPDATE
T.ID=S.ID,
T.NAME=S.NAME

WHEN NOT MATCHED BY TARGET THEN

INSERT(S.ID,S.NAME, {Somehow here i need a function call that inserts in TableRef and   Returns SCOPE_IDENTITY}) 
```

问题是 T-SQL 函数不允许`INSERT`，并且存储过程不能在这里调用，因为除了after`Merge`之外不允许任何 TSQL 事物。`INSERT``WHEN NOT MATCHED BY TARGET THEN`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:55:05.747

你能`TRIGGER`在你的TableB上添加一个吗？如果是这样，一种选择是使用该`INSERTED`行并从那里开始。

也许是这样的（未经测试）：

```
CREATE TRIGGER dbo.tr_TableB
ON dbo.TableB
FOR INSERT
AS
BEGIN
    SET NOCOUNT ON;

    INSERT TableReference  DEFAULT VALUES;  

    DECLARE @RefId INT;
    SELECT @RefId  = SCOPE_IDENTITY();

    UPDATE t1
        SET t1.RefId = @RefId 
    FROM dbo.TableB AS t1 
        INNER JOIN INSERTED AS i
            ON i.Id= t1.Id

END
GO 
```

祝你好运。

# ios - 删除 NSSet 关系中的对象

> ID：14345699
> 
> 赞同：7
> 
> 时间：2013-01-15T19:51:34.847
> 
> 标签：ios, core-data

我有一个对象 Car.h。Car.h 有 carparts.h（NSSet 到关系）。

我需要删除 NSSet 中属于 car.h 对象的部分之一。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-15T19:54:46.197

如果`car.mySet`是你的套装，你可以试试，

```
NSMutableSet *mutableSet = [car.mySet mutableCopy];
[mutableSet removeObject:carpartsObject];
car.mySet = [mutableSet copy]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T22:55:47.980

我假设这`Car`是一个子类，`NSManagedObject`因为你有 core-data 标签。

Core Data 符合 KVO。

[在此处参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdAccessorMethods.html#//apple_ref/doc/uid/TP40002154)
**动态生成的访问器方法**

默认情况下，Core Data 为托管对象类的建模属性（属性和关系）动态创建高效的公共和原始 get 和 set 访问器方法。这包括键值编码可变代理方法，例如`add<Key>Object:`和删除：，如 mutableSetValueForKey 的文档中所述：-托管对象实际上是其所有对多关系的可变代理。

此处有关 KVO 命名约定的 其他[参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/AccessorConventions.html#//apple_ref/doc/uid/20002174)

为了成为键值编码投诉，`mutable unordered to-many relationship`您必须实现以下方法：

`-add<Key>Object: or -add<Key>:`. 必须至少实施其中一种方法。这些类似于 NSMutableSet 方法 addObject:。
`-remove<Key>Object: or -remove<Key>:`. 必须至少实施其中一种方法。这些类似于 NSMutableSet 方法 removeObject:。
`-intersect<Key>:`. 选修的。如果基准测试表明性能是一个问题，则实施。它执行 NSSet 方法 intersectSet: 的等效操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-16T09:58:49.600

如果您想确保也从对象存储中删除一对多对象（默认操作是使父实体无效），您可以覆盖以下自动生成的方法之一`Car`：

```
- (void)removeCarpartsObject:(Carpart *)value
{
    NSMutableSet *set = [self mutableOrderedSetValueForKey:NSStringFromSelector(@selector(carparts))];

    [set removeObject:value];
    [self.managedObjectContext deleteObject:value];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-17T08:14:16.010

下面是另一种从核心数据中删除 NSSet 中对象的替代方法。我自己尝试过这种方法，它也有效。

```
 - (void)removeCarpartsObject:(Carpart *)value
    {
       NSError *error;
       NSInteger index = [car.mySet.allObjects indexOfObject:carpartsObject];

       [self.managedObjectContext deleteObject:car.mySet.allObjects[index]];
[self.managedObjectContext save:&error];
    } 
```

# json - 用于数据挖掘的 JSON 到 R

> ID：14345701
> 
> 赞同：2
> 
> 时间：2013-01-15T19:51:49.683
> 
> 标签：json, r, data-mining

我正在尝试使用 Topsy Otter api 抓取推文，因此我可以对其进行一些数据挖掘以用于我的论文。

到目前为止，我得到了：

```
library(RJSONIO)
library(RCurl)
tweet_data <- getURL("http://otter.topsy.com/search.json?q=PSN&mintime=1301634000&perpage=10&maxtime=1304226000&apikey=xxx")
fromJSON(tweet_data) 
```

哪个工作正常。然而，现在我想从这个文件中返回一些细节，'content' 和 'trackback_date'。我似乎无法弄清楚如何 - 我尝试将几个示例拼凑在一起，但无法提取我想要的内容。

这是我迄今为止尝试过的：

```
trackback_date <- lapply(tweet_data$result, function(x){x$trackback_date})

content <- lapply(tweet_data$result, function(x){x$content}) 
```

任何帮助将不胜感激，谢谢。

**编辑** 我也试过：

```
library("rjson")
# use rjson

tweet_data <- fromJSON(paste(readLines("http://otter.topsy.com/search.json?q=PSN&mintime=1301634000&perpage=10&maxtime=1304226000&apikey=xxx"), collapse=""))
# get a data from Topsy Otter API
# convert JSON data into R object using fromJSON()

trackback_date <- lapply(tweet_data$result, function(x){x$trackback_date})

content <- lapply(tweet_data$result, function(x){x$content}) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T20:49:07.507

Topsy Otter API 响应的基本处理：

```
library(RJSONIO)
library(RCurl)
tweet_data <- getURL("http://otter.topsy.com/search.json?q=PSN&mintime=1301634000&perpage=10&maxtime=1304226000&apikey=xxx")

#
# Addition to your code
#
tweets <- fromJSON(tweet_data)$response$list
content <- sapply(tweets, function(x) x$content)
trackback_date <- sapply(tweets, function(x) x$trackback_date) 
```

**编辑：处理多个页面**

函数从指定的 100 个项目中获取`page`：

```
pagetweets <- function(page){
  url <- paste("http://otter.topsy.com/search.json?q=PSN&mintime=1301634000&page=",page,
               "&perpage=100&maxtime=1304226000&apikey=xxx",
               collapse="", sep="")
  tweet_data <- getURL(url)
  fromJSON(tweet_data)$response$list
} 
```

现在我们可以将它应用到多个页面：

```
tweets <- unlist(lapply(1:10, pagetweets), recursive=F) 
```

而且，瞧，这段代码：

```
content <- sapply(tweets, function(x) x$content)
trackback_date <- sapply(tweets, function(x) x$trackback_date) 
```

返回您 1000 条记录。

# wpf - WPF 项目 - 实体框架注入与应用程序属性

> ID：14345707
> 
> 赞同：0
> 
> 时间：2013-01-15T19:52:03.307
> 
> 标签：wpf, entity-framework, architecture

我对 WPF 很陌生。

我试图找出 WPF 中各种架构模式的优缺点，同时创建一个旨在与数据库交互的应用程序。

该应用程序从一个主窗口开始，其中包含各种按钮，这些按钮加载其他窗口，每个窗口都对该数据库中的不同表执行 CRUD 操作。

我想知道 3 种可能方法的优缺点：

1）在每个窗口的构造函数中实例化一个新的实体实例

2）每个窗口都有一个支持实体对象依赖注入的构造函数。每次主窗口实例化一个新的窗口对象时，它都会注入它自己的实体实例。

3）根据[WPF 数据绑定演练](http://msdn.microsoft.com/en-us/library/ms752347.aspx)在从应用程序继承的类上创建公共 ObjectResult 属性，并链接到

```
<Window.Resources><CollectionViewSource> 
```

各种窗口的标记。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:18:40.113

依赖注入是为您提供最大灵活性的最佳选择...

但是，您不应该注入与实体对象一样具体的东西，而是注入一些服务提供者，这将是服务的特定实现，`Interface`不会直接使用实体对象，而是使用模型来抽象出数据访问细节，从而为您提供松耦合的好处...

# entity-framework - Linq to SQL 自联接，其中联接的右侧部分被过滤

> ID：14345711
> 
> 赞同：3
> 
> 时间：2013-01-15T19:52:37.710
> 
> 标签：entity-framework, linq-to-sql

我正在尝试映射一个必须过滤正确表的自连接，例如这样的 SQL：

```
select t2.* from table t 
    left join table t2 
    on t2.parentID = t.ID and t2.active=1; 
```

*如果我想过滤左*表，我可以弄清楚语法：

```
// works
var query = from t in table
               where t.active= 1
            join t2 in table
               on t.parentID equals t2.ID into joined
            from r in joined.DefaultIfEmpty() ... 
```

但我不知道如何过滤正确的表格。好像应该是这样的……

```
// does not work
var query = from t in table
            join t2 in table
               where t.field = 1
               on t.parentID equals t2.ID into joined
            from r in joined.DefaultIfEmpty() ... 
```

（无效......`join`不能在哪里）。有关于使用多个 from 子句的讨论，但是如果我创建多个 from 子句，所以我可以将 a 添加`where`到第二个，我无法弄清楚如何将它们的结果加入到一个新的临时表中。

我不能只在加入后添加“位置”；必须首先过滤右表，否则将发生匹配，`where`最后的子句将从左表中删除我在输出中确实想要的行。也就是说，输出应该包含从过滤的右表中没有匹配的行。所以我需要在加入之前过滤正确的表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T20:04:22.860

我认为你正在寻找这样做：

```
var query = from t in table
            join t2 in 
               (from t3 in table
                where t3.field = 1
                select t3)
               on t.parentID equals t2.ID into joined
            from r in joined.DefaultIfEmpty() ... 
```

另一种方法是像这样使用多个`from`：

```
var query = from t in table
            from t2 in table.Where(x => x.field = 1)
                            .Where(x => x.ID == t.parentID)
                            .DefaultIfEmpty()
            select .... 
```

# bash - 将带有扩展名的文件移动到某个位置

> ID：14345714
> 
> 赞同：24
> 
> 时间：2013-01-15T19:52:49.987
> 
> 标签：bash

如何将所有 .txt 文件从文件夹和所有包含的文件夹移动到目标目录中。

最好将它们重命名为它们所在的文件夹，尽管那并不重要。我对 bash 并不十分熟悉。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-15T19:56:39.903

要递归移动文件，请`find`结合`mv`.

```
find src/dir/ -name '*.txt' -exec mv -t target/dir/ -- {} + 
```

或者，如果在没有 GNU 版本的 UNIX 系统`find`（例如 macOS）上，请使用：

```
find src/dir/ -name '*.txt' -exec mv -- {} target/dir/ ';' 
```

要在移动文件时重命名文件，会比较棘手。一种方法是使用一个循环`"${var//from/to}"`来替换所有出现的`from`with `to`in `$var`。

```
find src/dir/ -name '*.txt' -print0 | while IFS= read -rd $'\0' file; do
    mv -- "$file" target/dir/"${file//\//_}"
done 
```

这很难看，因为`from`它是一个斜杠，需要转义为`\/`.

也可以看看：

*   [Unix.SE：理解`IFS= read -r line`](https://unix.stackexchange.com/questions/209123/understanding-ifs-read-r-line)
*   [BashFAQ：如何逐行（和/或逐字段）读取文件（数据流、变量）？](https://mywiki.wooledge.org/BashFAQ/001)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-15T20:11:04.383

尝试这个：

```
find source -name '*.txt' | xargs -I files mv files target 
```

这将比使用 -exec 的任何选项更快，因为它不会为每个需要移动的文件调用单个 mv 进程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T19:59:50.560

如果它只是一个级别：

```
mv *.txt */*.txt target/directory/somewhere/. 
```

# visual-studio-2010 - VS2010 PGO 中的这些“预期失败”消息是什么，我该如何解决？

> ID：14345715
> 
> 赞同：0
> 
> 时间：2013-01-15T19:52:54.627
> 
> 标签：visual-studio-2010, pgo

当我执行 PGO 优化步骤（使用`LINK.EXE /LTCG:PGU`）时，Visual Studio 2010 链接器抱怨：

```
Merging foo!1.pgc
'FOO_EDGE::get_input': Arc 2 --> 4 has negative count (-414343)
Expectation failed: f line 4241
'FOO_DELAY::set_delay': Block 18 outgoing counts differ from block count (-9 diff)
Expectation failed: f line 4261
Expectation failed: f line 4211
'FOO_DELAY::set_delay': Arc 12 --> 23 has negative count (-3)
Expectation failed: f line 4220
Generating code
907 of 4948 ( 18.33%) profiled functions will be compiled for speed
4948 of 4948 functions (100.0%) were optimized using profile data
42912225037 of 42912225037 instructions (100.0%) were optimized using profile data 
```

是什么导致了这些“预期失败”？我应该如何解决它们？似乎 PGO 仍在优化代码，但我对存在这些消息的优化的质量/完整性有点怀疑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:13:55.440

这些错误似乎是在执行多线程应用程序的 PGO 检测运行时发生的。可以通过使用x64 上的标志*编译*（而不是*链接*）来避免它们。`/PogoSafeMode`

我没有发现[关于这个标志的 MSDN 文档](http://msdn.microsoft.com/en-ca/library/ee390848.aspx)特别清楚；在多线程代码上执行 PGO 的正确过程是：

1.  编译`cl.exe /PogoSafeMode`
2.  链接到`link.exe /LTCG:PGI`
3.  执行您的多线程分析运行
4.  重新链接`link.exe /LTCG:PGO`

# javascript - 如何将 div 堆叠在一起以创建轮播

> ID：14345725
> 
> 赞同：0
> 
> 时间：2013-01-15T19:53:32.710
> 
> 标签：javascript, jquery, html, css

我正在尝试创建一个轮播，单击任何元素都会将其向左滑动，同时将右侧元素滑动到视口中。为此，我需要将`div`s 并排堆叠。我正在尝试将其作为`float`基于布局的布局（请参阅[Fiddle](http://jsfiddle.net/Cupidvogel/nf5Dh/)）。

问题是在这里单击红色的`div`幻灯片向左滑动，但不是向左滑动绿色元素。这可能是因为它们实际上位于另一个下方，当`overflow: hidden`从`#cont`的样式中删除时可见。如何将它们并排堆叠，以便向左滑动一个自动向左滑动下一个？（在单击时动态创建下一个元素并将其动画化到视口中是不行的，该元素应该存在于 DOM 中！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:08:10.807

我建议您使用插件，因为这比您可能意识到的要多。有很多插件可以解决这个问题，这里有一个让你开始的列表：[http ://www.tripwiremagazine.com/2012/12/jquery-carousel.html](http://www.tripwiremagazine.com/2012/12/jquery-carousel.html)

我修改了你的 Javascript、HTML 和 CSS，让你指向正确的方向：http:
[//jsfiddle.net/nf5Dh/2/](http://jsfiddle.net/nf5Dh/2/)

您需要一个`contContent`绝对定位的容器，并且该容器在容器 div 内移动。您只需将元素浮动`contContent`以使它们彼此相邻。

HTML：

```
<div id='cont'>
    <div id="contContent">
        <div id='i1'></div>
        <div id='i2'></div>
        <div id='i3'></div>
    </div>
</div> 
```

CSS：

```
#cont {
  width: 50px;
  padding-top: 10px;
  background: blue;
  height: 50px;
  overflow: hidden;
  position: relative;
}
#contContent {
  height: 50px;
  width: 150px;
  position: absolute;
  top: 0;
  left: 0;
}
#contContent > div {
  float: left;
  display: inline-block;
  height: 50px;
  width: 50px;
}
#i1 { background: red; }
#i2 { background: green; }
#i3 { background: yellow; } 
```

和 JS：

```
$("#contContent > div").click(function(){
    $("#contContent").animate({left: "-=50px"},1000);
}); 
```

最好使用 an`ul`而不是所有 div，这至少在语义上更正确，尽管在技术上不是必需的。

```
<div id="carousel">
    <ul id="carouselContent">
        <li id="slide1"></li>
        <li id="slide2"></li>
        <li id="slide3"></li>
    </ul>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T19:58:19.190

这：

```
#cont {
    white-space:nowrap;
    overflow: hidden;
}

.pane { // or whatever the slide divs are called. get rid of the float.
    float: none;
    display: inline-block;
    *zoom:1;
    *display:inline;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T19:58:27.133

您可以使用该轮播，您可以在其中为轮播生成 javascript [http://caroufredsel.dev7studios.com/configuration-robot.php](http://caroufredsel.dev7studios.com/configuration-robot.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T20:00:14.497

我过去曾使用[http://sorgalla.com/jcarousel/](http://sorgalla.com/jcarousel/)来处理类似的事情，这是基于位置：相对和左/右偏移量。可能比弄乱花车更容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T20:00:24.990

您可以尝试使用列表项，并内联显示它们。

# visual-studio-2012 - 定义所有 Visual Studio 2012 解决方案资源管理器图标的参考

> ID：14345726
> 
> 赞同：18
> 
> 时间：2013-01-15T19:53:45.207
> 
> 标签：visual-studio-2012

我一直无法找到对新 Visual Studio 2012 解决方案资源管理器图标的引用。有时，我们的一些 .sql 文件图标会像下面带有黄色三角形的图标一样发生变化。这样的参考存在吗？如果不是，这个黄色三角形图标是什么意思？

![Visual Studio 2012 解决方案资源管理器图标](../Images/71a031f89be36443ce31d1cbc1f4d8b5.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-21T19:26:30.643

我没有所有图标的参考。但是，我相信黄色三角形表示存在与引用程序集相关的警告。

通过转到错误列表（通常在 Visual Studio 底部或菜单 VIEW - 错误列表或按 Ctrl + W、E）查看警告。

然后单击警告选项卡。应该有关于装配的一个或多个警告。通常存在缺失或冲突的引用，或者类似“无法解析主要引用 X，因为它间接依赖于具有不同版本框架的 Y。

如果您引用为新版本的 .NET 框架构建的程序集，则可能会发生这种情况。（例如，您的程序集使用 .NET 4.0，但您要使用的程序集是使用 .NET 4.5 构建的）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-20T04:21:53.370

该图标表示文档警告。

按照此链接[Visual Studio 图像库](http://www.microsoft.com/en-us/download/details.aspx?id=35825)。下载包含图标的文档列表及其含义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-17T11:31:58.367

正如 Chris Weber 所说，如果您将新项目添加到解决方案中，并且新项目针对的 .NET 框架版本高于同一解决方案中的其他项目，则可能会出现问题。

修复：右键单击您新添加的项目，转到属性。在左侧，找到名为“应用程序”的最顶部选项卡。在右侧框架中，您应该会看到一个下拉菜单，您可以在其中设置“目标框架”。确保这是与解决方案的其余部分相同的版本。

# iphone - iPhone 5横向模式下，导航栏右侧的按钮停止工作，如何解决？

> ID：14345727
> 
> 赞同：2
> 
> 时间：2013-01-15T19:53:47.043
> 
> 标签：iphone, ios, uinavigationcontroller, orientation

在为 iPhone 5 的 4 英寸屏幕更新我的旧程序时，我发现导航控制器保持其原始 3.5 英寸屏幕尺寸并且拒绝拉伸以适应 4 英寸屏幕，即使其视图控制器的视图和 tableview 控制器的视图都拉伸到适合4寸屏幕。因为在正常使用时导航控制器的视图是不可见的，人们可能会错过它。因为它拒绝适应新的4英寸屏幕，在横向模式下，屏幕超出了导航控制器的视图宽度，并且右键掉出边界并变得无响应。为了显示上面的情况，我将导航控制器视图的背景颜色设置为半透明红色，将表格视图的背景颜色设置为半透明蓝色。如下图所示。问题是，如何解决问题。加号按钮在横向模式下没有响应，但在纵向模式下，它工作正常。

![http://zhuyali.homedns.org:900/images/screenshot1.jpg](../Images/9b2356fce5b4f9f4b281f324eaaaae6d.png) ![http://zhuyali.homedns.org:900/images/screenshot2.jpg](../Images/1f612c9f988eba6a529dc9f09755b53f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:22:12.683

您的导航控制器的视图，或者更可能的是包含它的窗口，没有设置正确的框架。如果您在代码中创建窗口，请确保您使用的是 UIScreen`-applicationFrame`或`-bounds`而不是硬编码的`(320, 460)`or `(320, 480)`; 如果您使用的是 NIB，请检查您的自动调整大小掩码和布局设置。

# c# - 隐式输入参数

> ID：14345735
> 
> 赞同：3
> 
> 时间：2013-01-15T19:54:35.727
> 
> 标签：c#, generics, out, implicit-typing

[与这个问题](https://stackoverflow.com/questions/14073134/implicitly-typed-variables-in-try-catch)类似，我决定看看是否可以将`out`参数从方法中提取到隐式类型变量中，而无需定义类型。我理想的解决方案如下所示：

```
var result = LiftOutParam((out p1, out p2, out p3) => {
    return CallMyMethod(i1, i2, out p1, out p2, out p3);
});
var o1 = result.Item1;
var o2 = result.Item2;
var o3 = result.Item3;
var returnValue = result.Item4; 
```

在这种情况下，`CallMyMethod`有 2 个普通输入变量、3 个`out`参数和一个返回值。我希望编译器根据传入的委托的语义自动确定`o1`、`o2`、`o3`和的类型。所以我为输出参数的每个组合创建了一些辅助委托和方法。以下是 3 个参数的示例：`returnValue``LiftOutParam``out`

```
public delegate TReturn Lift<T1, T2, T3, TReturn>(
    out T1 o1, out T2 o2, out T3 o3);

public static Tuple<T1, T2, T3, TReturn> LiftOutParam<T1, T2, T3, TReturn>(
    Lift<T1, T2, T3, TReturn> Lift) {

    T1 o1;
    T2 o2;
    T3 o3;
    TReturn ret = Lift(out o1, out o2, out o3);
    return new Tuple<T1, T2, T3, TReturn>(o1, o2, o3, ret);
} 
```

理论上，编译器应该能够根据委托的语义来确定类型`T1`、、、`T2`和。但是，除非我在委托中指定每个参数的类型，否则上述代码不会编译。`T3``TReturn``(out p1, out p2, out p3) => { return CallMyMethod(i1, i2, out p1, out p2, out p3); }``out`

有没有办法做我想要完成的事情？编写一个通用的辅助方法，可以将`out`参数的值拉入隐式类型的局部变量，而无需在任何地方显式定义类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:14:39.213

C# 编译器无法通过传入的方法从委托推断泛型类型。更多这里[C# 3.0 泛型类型推断 - 将委托作为函数参数传递](https://stackoverflow.com/questions/407983/c-sharp-3-0-generic-type-inference-passing-a-delegate-as-a-function-parameter)。它是普通参数还是 ref/out 参数都没有关系。

可能相关：C# 无法推断传递的委托/lambda 的返回类型，如[.NET 中的通用方法中所述，无法推断其返回类型。为什么？](https://stackoverflow.com/questions/3203643/generic-methods-in-net-cannot-have-their-return-types-inferred-why).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T20:36:28.460

这里有两个问题：

1.  当lambda 表达式的一个或多个参数需要`ref`or`out`修饰符时，语法要求您**必须**为 lambda 表达式的所有参数指定类型。这是一个语法问题，无论编译器是否能够推断出类型，它都适用。

2.  必须有一个类型来推断。如果你有方法

    ```
    void MyMethod<T>(Action<T> action)
    {
    } 
    ```

    那么你不能这样调用这个方法：`MyMethod(t => { });`因为在这种情况下没有办法推断出什么`T`是。`T` **必须**推断为一种特定类型。这可能是一种依赖于另一个泛型参数的类型，该参数在`MyMethod`被调用时处于范围内。

# c# - 对象不能从 DBNull 转换为其他类型

> ID：14345737
> 
> 赞同：0
> 
> 时间：2013-01-15T19:54:36.777
> 
> 标签：c#, asp.net

我正在尝试将 gridview 数据保存到数据库中。要决定它应该是插入还是更新，我需要找出是否`Order_SelectionID`存在。Foreach Gridview 行，我正在尝试使用 Asp.Net 在 C# 中使用如下语句。

```
foreach (GridViewRow row in grdFavoriteMerchant.Rows)
    {
        if (grdFavoriteMerchant.DataKeys[row.RowIndex]["Order_SelectionID"].ToString() != "")
        { 
```

如果`Order_SelectionID`存在而不是一个`NUll`或零，我将不得不“插入”，否则一个“更新”。

这个声明给了我一个例外

> “对象不能从 DBNull 转换为其他类型。”

每次我应该使用插入时。我该如何纠正？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T19:56:12.817

为什么不直接比较`DBNull.Value`呢？

```
if(grdFavoriteMerchant.DataKeys[row.RowIndex]["Order_SelectionID"]
                                     ==  DBNull.Value) 
```

# python - 替换python pandas数据框中的部分字符串

> ID：14345739
> 
> 赞同：26
> 
> 时间：2013-01-15T19:54:38.240
> 
> 标签：python, csv, pandas

我有一个与此处发布的问题类似的问题：

[Pandas DataFrame：从列中的字符串中删除不需要的部分](https://stackoverflow.com/questions/13682044/pandas-dataframe-remove-unwanted-parts-from-strings-in-a-column)

我需要从 DataFrame 的字符串中删除换行符。基本上，我已经使用 python 的 json 模块访问了一个 api，这一切都很好。创建 DataFrame 也非常有效。但是，当我想最终将最终结果输出到 csv 中时，我有点卡住了，因为在 csv 文件中存在创建错误“新行”的换行符。

所以基本上我试图改变这个：

'……这是一个段落。

这是另一段……”

进入这个：

'……这是一个段落。这是另一段……”

我不在乎保留任何类型的 '\n' 或任何特殊符号用于分节符。所以可以直接剥离。

我尝试了一些变化：

```
misc['product_desc'] = misc['product_desc'].strip('\n')

AttributeError: 'Series' object has no attribute 'strip' 
```

这是另一个

```
misc['product_desc'] = misc['product_desc'].str.strip('\n')

TypeError: wrapper() takes exactly 1 argument (2 given)

misc['product_desc'] = misc['product_desc'].map(lambda x: x.strip('\n'))
misc['product_desc'] = misc['product_desc'].map(lambda x: x.strip('\n\t')) 
```

没有错误消息，但换行符也不会消失。与此相同：

```
misc = misc.replace('\n', '') 
```

写入 csv 行是这样的：

```
misc_id.to_csv('C:\Users\jlalonde\Desktop\misc_w_id.csv', sep=' ', na_rep='', index=False, encoding='utf-8') 
```

熊猫的版本是 0.9.1

谢谢！:)

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-15T20:02:32.267

`strip`只删除字符串开头和结尾的指定字符。如果要*全部* `\n`删除，则需要使用`replace`.

```
misc['product_desc'] = misc['product_desc'].str.replace('\n', '') 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-30T07:03:08.363

您可以使用方法的`regex`参数`replace`来实现：

```
misc['product_desc'] = misc['product_desc'].replace(to_replace='\n', value='', regex=True) 
```

# ios - 使用 Storyboard 重新定位 textview

> ID：14345741
> 
> 赞同：1
> 
> 时间：2013-01-15T19:54:44.513
> 
> 标签：ios, xcode, storyboard

我正在努力解决一个奇怪的问题......我已经使用 Storyboard 设置了所有内容。根据 uitextview 文本内容的大小，我必须以编程方式调整大小并重新定位它。但是，它似乎没有像我希望的那样重新定位:(

```
-(void)viewWillAppear:(BOOL)animated
{
    //ansContent is connected to the uitextview via IBOutlet
    ansContent.frame = CGRectMake(27, 90, 270, 10000);
    ansContent.text = @"very very long text here";
} 
```

似乎更改文本有效......不是框架：S有什么问题？我在 Storyboard 中所做的只是拖放一个 uitextview 并将其连接到 ansContent。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:11:15.580

禁用情节提要中的自动布局选项。在您的情况下，自动布局阻止它在正确的位置显示它。禁用它后，您可以以编程方式设置框架。

# jquery - Jquery Accordion to dl>dd+dt Backbone Rendered code？

> ID：14345743
> 
> 赞同：0
> 
> 时间：2013-01-15T19:54:47.093
> 
> 标签：jquery, backbone.js, html-lists

我使用 Backbone 和 Coffeescript 创建了一个 DL、DT、DD 定义列表。我在下面的 html 页面中使用了模板。没有问题，成功渲染html。我在 chrome 中查看了 html，元素还可以。

毕竟，我试图制作手风琴。并想尝试所有的DT隐藏。但无法为此标签制作任何 Jquery 代码。

我用控制台；

```
 $(function () {    
       var allDD= $('div#userList dl').html();
       console.log(allDD);
      }); 
```

但没有任何日志！

我在网上搜索什么也没找到。也试过了；

```
 $(document).ready and window.onload() 
```

但仍然什么也没发生。

如何在 Backbone 渲染后对代码制作手风琴效果。

请问有什么帮助吗？

```
 <div id="userList"> 
      // DL > DT+DD will be here
  </div>

  <script type="text/template" id="tpl-user-results">
  <dl class="users"></dl>
  </script>

  <script type="text/template" id="tpl-user-row-dt">
      <span class="percent"><%= Math.ceil(dt.score) %></span>
      <a href="#" class=""> <%= dt.username %> (<%= dt.score%>) </a>
  </script> 

  <script type="text/template" id="tpl-user-row-dd">
      <span class="percent"> <%= dd.username %> (<%= dd.score%>) 
      <img src="/user/0001.jpg">
      <p>User Info : Lorem ipsum dolor sit amet, consectetur adipisicing elit. Temporibus reiciendis corporis hic consequatur alias veniam repudiandae architecto. Maiores aliquid sint cupiditate voluptate modi debitis ipsum consequuntur quaerat odit id ipsa.</p>
  </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:13:42.180

这段代码

```
var allDD= $('div#userList dl').html(); 
```

`render`在您实际呈现 HTML 代码之后，应该在您的视图中显示您的方法。

例子：

```
render: function() {
    this.$el.html(someTemplate);
    this.$el.accordion();
    this.$("dt").hide();
} 
```

# php - 查找两个 # 值之间的差异，其中 itemname = 对于一个特定 ID 相同

> ID：14345754
> 
> 赞同：2
> 
> 时间：2013-01-15T19:55:38.637
> 
> 标签：php, mysql

我有一个名为“项目”的表

```
id       month       year       **itemname**       distmoney
 1        12         2012         chicken           20
 2        12         2012         pork              15
 3        11         2012         chicken           21
 4        11         2012         pork              15 
```

我试图找出两个月之间相同项目名称的“distmoney”之间的区别，仅适用于一个特定项目（通过使用 WHERE id = $id）

例子：

ID 1，物品名称 chicken。第 12 个月的 distmoney 是 20，而第 11 个月的 distmoney 是 21。我希望能够计算 id=1、itemname=chicken 的差值 1。它应该只显示鸡肉的区别，而不是任何其他项目名称（如猪肉）。

现在我有 php 代码来计算两个数字之间的差异，但我很难弄清楚如何抓住上个月的 distmoney。

**能够找到特定项目名称的上个月的 distmoney 并将其插入到名为“oldmoney”的新列中也可以**，但我不确定如何执行此操作。

示例：对于 id 3，itemname chicken。当前的 distmoney 是 20，上个月（在 id = 1 中找到）是 20。让我们取 20 并将其插入到 id 3 下的新列中。

```
<?php
foreach($rows as $row):
 $number1 = htmlentities($row['distmoney'])
endforeach;

$number1 = $row['distmoney'];
$number2 = ????????; // THIS NEEDS TO BE THE PREVIOUS MONTH DISTMONEY VALUE
if ($number1 <= $number2) {
    $difference = "(Price Lowered) Price difference of $";
    $result = $number2 - $number1;
    $percent = round(100.0*($number2-$number1)/$number1);
    echo $difference; echo $result; echo $percent; echo "%";
} elseif ($number1 > $number2) {
    $result = $number1 - $number2;
    $percent = round(100.0*($number2/$number1-1));
    $addition = "(Price Higher) Price difference of $";
    echo $addition; echo $result; echo $percent; echo "%";
} 
```

?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:29:11.710

当您查询**项目**时，**首先按项目***名称排序* 。

 **然后，做一些事情，比如

```
//Create a variable to hold the "previous month" values
$previousItemName = '';
$previousDistMoney = '';

//Check each record from your query
foreach($rows as $row) {

   //If not first time around && same item name as previous
   if($previousItemName != '' && $previousItemName == $row['itemname']) {

      //subtraction calculation here
      //$difference = $row['distmoney'] - $previousDistMoney;  ??
      //echo $difference;  ??
   }

   //Assign the "previous month" value
   $previousItemName = $row['itemname'];
   $previousDistMoney = $row['distmoney'];
} 
```

尽管这两种方式都有些脏，但您也可以选择循环： for($i =0; $i < count($results); $i++) { }

然后检查 $results[$i-1]['distmoney']; 的值

* * *

编辑。

如果您知道查询字符串中的 ID，只需将其放入您的查询中……这样就只返回 2 条“鸡”记录：

```
select  itemname, distmoney from items where itemname in (
   select itemname from items where id = 3
) 
```**

# javascript - Js 或 jquery file.type.match 仅适用于 jpg 和 png

> ID：14345755
> 
> 赞同：3
> 
> 时间：2013-01-15T19:55:39.260
> 
> 标签：javascript, jquery, mime-types

如何使用 file.type.match 将 mimetype 限制为仅 png 和 jpg

下面是我的代码

```
var fileInput = document.getElementById("myfileinput").files[0];

if (fileInput.type.match('image/jpeg'))  
      //I not thinking to use if(xx || xx)
      //prefer using var mimeType = jpg,png  many tries but not work
{
alert("Right");
}else{
alert("wrong");
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T21:28:52.510

从你的问题听起来你不想做这样的事情：

```
if (fileInput.type.match('image/jpeg') || fileInput.type.match('image/png'))  
  //I not thinking to use if(xx || xx)
  //prefer using var mimeType = jpg,png  many tries but not work
{
  alert("Right");
}else{
  alert("wrong");
} 
```

您可以制作一系列可接受的扩展并遍历它们，例如：

```
var fileInput = document.getElementById("myfileinput").files[0];
var allowed = ["jpeg", "png"];
var found = false;

allowed.forEach(function(extension) {
  if (fileInput.type.match('image/'+extension)) {
    found = true;
  }
})

if(found) {
  alert("Right");
}
else{
  alert("wrong");
} 
```

请参阅此[小提琴](http://jsfiddle.net/bZZcu/)进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-09T21:48:16.830

`|`也可以使用OR 运算符在一行中完成：

`if (fileInput.type.match('image/jpeg|image/png')) {...}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-19T01:02:00.057

使用[attr-accept](https://github.com/react-dropzone/attr-accept)（或复制其代码）使您的 mime 类型验证更具前瞻性和可在其他上下文中重用。

# javascript - 限制写入的小数位数（js）

> ID：14345757
> 
> 赞同：0
> 
> 时间：2013-01-15T19:55:42.430
> 
> 标签：javascript

我有一个小脑筋急转弯，一直困扰着我。我无法控制脚本写入的小数位数。

HTML

```
<script type="text/JavaScript">
    <!--
    document.write($tekn_2_2/$tekn_2_1)
    //-->
</script> 
```

JS

```
$tekn_2_1 = "28"
$tekn_2_2 = "7600" 
```

我希望它返回值“271”而不是“271.42857142857144”。对不起，我知道这应该是一个小案例，但我可以做任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T19:58:57.313

编辑：最初我投票给了 toFixed 但不知道这个函数也会轮换。看起来你只需要一个简单的地板。

```
Math.floor($tekn_2_2/$tekn_2_1) == 271 
```

编辑：+1 for Javascript: The Good Parts 它涵盖了诸如此类的基本操作。以简短但内容丰富的方式。

[http://www.amazon.com/JavaScript-Good-Parts-Douglas-Crockford/dp/0596517742](https://rads.stackoverflow.com/amzn/click/com/0596517742)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-15T19:57:41.603

```
document.write(Math.round($tekn_2_2/$tekn_2_1)); 
```

# javascript - 如何使用jquery检查JSON返回是否为空

> ID：14345761
> 
> 赞同：37
> 
> 时间：2013-01-15T19:56:09.480
> 
> 标签：javascript, jquery, ajax, json

```
$.getJSON(url, function(json) {
  var output = '';
  $.each(json, function(i,d) {

    if(d.DESCRIPTION == 'null'){ 
      console.log("Its empty");
    }
    var description = d.DESCRIPTION;
    output += '<tr><td>'+d.NAME+'</td><td>'+'<tr><td>'+d.DESCRIPTION+'</td><td>';
  });
}); 
```

我尝试添加

```
if(d.DESCRIPTION == 'null'){ console.log("Its empty"); 
```

检查返回的对象是否为空，但它不起作用。

有人可以向我解释这有什么问题吗？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-11-28T09:38:03.020

下面的代码（已经提供了**jQuery.isEmptyObject(anyObject)**函数）工作得很好，无需自己编写。

```
 // works for any Object Including JSON(key value pair) or Array.
  //  var arr = [];
  //  var jsonObj = {};
    if (jQuery.isEmptyObject(anyObjectIncludingJSON))
    {
       console.log("Empty Object");
    } 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2013-01-15T20:11:40.770

只需测试数组是否为空。

```
$.getJSON(url,function(json){
    if ( json.length == 0 ) {
        console.log("NO DATA!")
    }
}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-05-27T17:02:14.780

```
if (!json[0]) alert("JSON empty"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-03-12T03:27:47.047

您可以使用 $.isEmptyObject(json)

[https://api.jquery.com/jQuery.isEmptyObject](https://api.jquery.com/jQuery.isEmptyObject)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2015-08-20T10:51:46.540

```
$.getJSON(url,function(json){
if ( json.length == 0 ) 
{
console.log("NO !")
}
}); 
```

# php - 检查 mysql 表中是否存在 valor

> ID：14345763
> 
> 赞同：0
> 
> 时间：2013-01-15T19:56:12.270
> 
> 标签：php, mysql

> **可能重复：**
> [检查mysql中是否存在值](https://stackoverflow.com/questions/14343702/check-if-value-exist-in-mysql)

我有一个小脚本可以将数据从 csv 文件上传到 mysql 数据库，我想检查 csv 文件中的值列表。

这是用于检查 csv 中的值是否存在于 db 中的 CSV 文件：

```
code,alert_quantity
12345,10 
```

这是我的项目 PHP 文件：

```
 <?php
    $link_id = mysql_connect("localhost", "root", "")
               or die("Could not connect.");

    if(!mysql_select_db("database",$link_id))
    die("database was not selected.");

    function _checkIfCodeExists($code){

    $sql        = "SELECT COUNT(*) AS count_no FROM products WHERE code = ?";
    $count      = $sql;
    if($count > 0){
        return true;
    }else{
        return false;
    }
    }

    function _updateData($line_of_data){
    $code            = $line_of_data[0];
    $newAlert       = $line_of_data[1];

    $sql = "UPDATE ";
}

    $file_handle = fopen("file.csv", "r");

    while (($line_of_data = fgetcsv($file_handle, 1000, ",")) !== FALSE) {

    $query = mysql_query("SELECT * FROM products WHERE code ='$line_of_data[0]'") or die(mysql_error());
    $message = '';
    $count   = 1;

    if(_checkIfCodeExists($line_of_data[0])){
        try{
            _updateData($_data);
            $message .= $count . '> Success:: Product with code  (' . $line_of_data[1] . ') Exist (' . $line_of_data[0] . '). <br />';

        }catch(Exception $e){
            $message .=  $count .'> Error:: While updating alert (' . $line_of_data[1] . ') of code (' . $line_of_data[0] . ') => '.$e->getMessage().'<br />';
        }
    }else{
        $message .=  $count .'> Error:: Product code   (' . $line_of_data[0] . ')   Doesnt exist<br />';
    }
    $count++;
echo $message;
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:13:10.450

我不知道你在这里做什么，但它不会工作：

```
$sql        = "SELECT COUNT(*) AS count_no FROM products WHERE code = ?";
$count      = $sql;
if($count > 0){
    return true; 
```

这相当于：

```
if ("SELECT COUNT(*)..." > 0) 
```

那永远不会是真的。

# c - 在c中使用#define

> ID：14345767
> 
> 赞同：0
> 
> 时间：2013-01-15T19:56:38.103
> 
> 标签：c, c-preprocessor

```
#include<stdio.h>
#include<stdlib.h>

#define d 10+10

int main()
{
    printf("%d",d*d);
return 0;
} 
```

我是宏概念的新手。我发现上述程序的输出是 120。它背后的逻辑是什么？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T19:57:20.520

```
10+10*10+10 == 10 + 100 + 10 
```

明白了吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T19:57:59.857

宏被*逐字*替换。想想搜索/替换。编译器将您的代码视为`10+10*10+10`.

出于这个原因，将宏替换文本括在括号中是常见的做法：

```
#define d (10 + 10) 
```

当您的宏是类似函数的宏时，这一点更为重要：

```
#define SQ(x) ((x) * (x)) 
```

想`SQ(a + b)`...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T19:58:12.027

`d*d`扩展为`10+10*10+10`. 乘法先于加法，因此 10 + 100 + 10 = 120。

通常，`#define`表达式应始终用括号括起来：`#define d (10+10)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T19:58:36.930

宏只不过是一个简单的文本替换，所以你的行：

```
printf("%d",d*d); 
```

变成

```
printf("%d",10+10*10+10); 
```

您可以使用`const`变量来获得更可靠的行为：

```
const int d = 10+10; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-15T19:58:48.047

宏按原样展开。你的程序变成

```
/* declarations and definitions from headers */

int main()
{
    printf("%d",10+10*10+10);
return 0;
} 
```

并且计算被解释为

```
10 + (10 * 10) + 10 
```

始终在宏周围使用括号（以及当你拥有它们时它们的参数）

```
#define d (10 + 10) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-15T19:59:02.843

```
#define 
```

预处理器指令用第二个元素替换第一个元素。

就像“查找和替换”一样

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-15T20:00:12.650

我不确定#include，但在C# 中，#define 在顶部用于定义符号。这允许编码人员执行以下操作

```
#define DEBUG

string connStr = "myProductionDatabase";

#if DEBUG
    connStr = "myTestDatabase"
#edif 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-15T19:57:27.027

`10+10*10+10 = 20 + 100 = 120`

简单的数学;)

宏不计算该值（它不加 10 + 10），而只是用指定的表达式替换它的所有出现。

# javascript - 为什么我不能输入这些文本区域？

> ID：14345774
> 
> 赞同：1
> 
> 时间：2013-01-15T19:56:58.510
> 
> 标签：javascript, html, textarea, spine.js

我一直在努力弄清楚为什么`textarea`无法输入特定页面上的标签。据我所知，它们没有被禁用或只读，但我无法在任何浏览器上输入它们。

请带上你的 FireBugs 和 Chrome 开发者工具[来帮助我](http://korhal.andrewmao.net/~mao/peer-prediction/#/exitsurvey)。

其他信息：这是一个用 Spine 构建的单页 JS 应用程序，使用 npm-browserified 包。但我不明白为什么这会导致`textarea`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:19:18.577

向下，靠近 JavaScript 文件的底部是这一行：

```
$(document).keypress(this.keyPressed); 
```

然后再往下是：

```
Tutorial.prototype.keyPressed = function(ev) {
    ev.preventDefault(); 
```

显然，这会禁用`keypress`页面上所有内容的事件。

# javascript - 车把不读取backbone.js 模型属性

> ID：14345775
> 
> 赞同：1
> 
> 时间：2013-01-15T19:57:01.737
> 
> 标签：javascript, backbone.js, handlebars.js

我在使用车把和骨干网显示模型属性时遇到了一些奇怪的困难。这里是代码。

> ```
> MYAPP.Menu = {};
> MYAPP.Menu.Item = Backbone.Model.extend({
> urlRoot : 'menuItem',
>         defaults: {
>         title: "Menu Item Title default",
>         price: "menu item price default"
>         },
> }); 
> ```

```
MYAPP.Menu.Items = Backbone.Collection.extend({
    model: MYAPP.Menu.Item,
    url: 'menuItems'
});

MYAPP.Menu.ItemView = Backbone.View.extend({

    initialize : function() {
        this.model = new MYAPP.Menu.Item();
        this.model.on('all', this.render, this);
    },
    render : function() {
        var source = $("#index-template").html();
        var template = Handlebars.compile(source);
        console.debug(this.model.get("title")); <- shows default value
        var html = template(this.model);
        console.debug(html);
        this.$el.html(html);
        return this;
    }
}); 
```

和模板：

> ```
>  <script type="text/x-mustache-template" id="index-template">
>         <div class="entry">
>          <h1>{{title}}</h1>
>           <div class="body">
>             {{price}}
>           </div>
>         </div>          
>     </script> 
> ```

输出只是没有任何数据的标签。控制台中也没有错误。有任何想法吗？

**好吧，我有一个解决方案：**

当我使用

> ```
>  initialize : function() {
>         this.title = "Menu Item Title default";
>         this.price =  "menu item price default";
>     }, 
> ```

一切正常。有人对此有解释吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T20:07:20.553

```
var html = template(this.model); 
```

应该

```
var html = template(this.model.toJSON()); 
```

基本上，`this.model`有一个`attributes`属性存储您可以使用检索`this.model.get()`和设置使用的所有信息`this.model.set()`。这些属性未附加到基本模型。

当您有以下代码时

```
initialize : function() {
    this.title = "Menu Item Title default";  // BAD!
    this.price =  "menu item price default"; // BAD!
} 
```

您正在将属性附加到基本模型。这是对 Backbone 的错误使用。如果你`this.model.get("title")`后来尝试做，那就是`undefined`。

# java - Java：记录声明和对象声明的区别

> ID：14345778
> 
> 赞同：-1
> 
> 时间：2013-01-15T19:57:09.700
> 
> 标签：java, object

我只是在浏览一篇关于 Java 的教学文章，有一个问题：

> 记录声明和对象声明有什么区别？

不知道是什么意思，有区别吗？（我对JAVA不是很熟悉）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:07:55.910

Java 中不使用术语“记录”。基本上，记录是一个只有字段没有方法的对象。C 结构可以是记录的一个示例。所以下面的 Java 类将是一个“记录”：

```
class Record {
    public String field1;
    public int field2;
} 
```

这可以称为记录，但是没有人使用这个术语。示例代码是类声明。要声明和创建此类的对象，您应该使用以下内容：

```
Record record = new Record(); 
```

这将创建一个 Record 类型的对象并将其放入名为 record 的变量中。

# javascript - jQuery 不会将空白输入解析为 0

> ID：14345779
> 
> 赞同：-4
> 
> 时间：2013-01-15T19:57:10.573
> 
> 标签：javascript, jquery

Javascript 看起来像这样：

```
<script type="text/javascript">
$(document).ready(function(){
    var totalOwed = <?php echo $totalTally; ?>;

    $("#cash").keyup(function() { doThis(); });
    $("#card").keyup(function() { doThis(); });

    var paidSoFar = 0;

    function doThis() {
        paidSoFar = parseInt($("#cash").val()) + parseInt($("#card").val());
        alert(paidSoFar);
        if (paidSoFar >= totalOwed) { 
            endCalc = paidSoFar - totalOwed;
            $("#endCalc").html("Change: " + endCalc); 
        }
        else { 
            remaining = totalOwed - paidSoFar;
            $("#endCalc").html("Remaining: " + endCalc);
        }
    }
});
</script> 
```

HTML如下：

```
Total Owed: <?php echo $totalTally; ?><br />
Cash: <input type="text" id="cash" /><br />
Card: <input type="text" id="card" /><br />
<div id="endCalc"></div> 
```

但是当paidSoFar 变量尝试读取文本输入的值时，它最终会变成 NaN。

* * *

## 日期

现在，我的 Javascript 看起来像这样：

```
<script type="text/javascript">
$(document).ready(function(){
    var totalOwed = <?php echo $totalTally; ?>;

    $("#cash").keyup(function() { doThis(); });
    $("#card").keyup(function() { doThis(); });

    var paidSoFar = 0;

    function doThis() {
        paidSoFar = parseInt($("#cash").val(), 10) + parseInt($("#card").val(), 10);
        alert(paidSoFar);
        if (paidSoFar >= totalOwed) { 
            endCalc = paidSoFar - totalOwed;
            $("#endCalc").html("Change: " + endCalc); 
        }
        else { 
            remaining = totalOwed - paidSoFar;
            $("#endCalc").html("Remaining: " + endCalc);
        }
    }
});
</script> 
```

HTML如下：

```
Total Owed: <?php echo $totalTally; ?><br />
Cash: <input type="text" id="cash" /><br />
Card: <input type="text" id="card" /><br />
<div id="endCalc"></div> 
```

但是`paidSoFar`变量最终会`NaN`在它尝试读取文本输入的值时结束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:11:53.773

## 更新后

您可以使用一元运算符。例如，

```
+$("#cash").val() 
```

如中，

```
paidSoFar = (+$("#cash").val()) + (+$("#card").val()); 
```

* * *

## 更新前

专门回答您的问题，而不涉及所有其他问题的细节。在以下代码行中。

```
function remaining() {
  ...
  if (paidSoFar >= totalOwed) {
    ...
  } else {
    remaining = totalOwed - paidSoFar;
    ...
  }
} 
```

如果您按照 的用法`remaining`，您可以清楚地看到您正在覆盖`remaining`一个数字。因此，下次您尝试使用`remaining()`时，您的 JavaScript 控制台中可能会出现以下错误。

```
Uncaught TypeError: number is not a function 
```

而下面的用法也令人担忧。

```
function remaining() {
    ...
    $("#changeOrRemaining").html(remaining);
    ...
} 
```

这显然是一个无限循环。

检查[如何在不同的浏览器中打开 JavaScript 控制台？](https://webmasters.stackexchange.com/q/8525)有关访问浏览器控制台的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:01:56.077

检查浏览器中的控制台日志（最好使用 Firebug）。您很可能在警报下方遇到错误，它会在收到错误后停止所有 JavaScript 运行。

# windows-8 - WinRT 动态磁贴徽章更新

> ID：14345780
> 
> 赞同：1
> 
> 时间：2013-01-15T19:57:13.703
> 
> 标签：windows-8, notifications, windows-runtime, tile, badge

我目前正在开发 HTML5/JavaScript 中的提要阅读器应用程序，但我遇到了动态磁贴问题。我有一个实时磁贴，它通过查询从博客返回最新 3 篇文章的 Web 服务定期更新。活动磁贴按预期工作，但我想创建一个显示未读文章的徽章通知。

我想这样做的方法是查看磁贴是否更新，然后从徽章通知中增加数字。当用户启动应用程序时，徽章将被清除。

我使用以下代码行：

```
 var notifications = Windows.UI.Notifications;
    var polledUri = new Windows.Foundation.Uri("http://my_url/feed.php");
    var recurrence = notifications.PeriodicUpdateRecurrence.halfHour;
    var tileUpdater = notifications.TileUpdateManager.createTileUpdaterForApplication()
    tileUpdater.startPeriodicUpdate(polledUri, recurrence); 
```

这将创建每半小时更新一次的动态磁贴。我的问题是：我想在每次 PeriodicUpdate 发生时创建一个徽章更新。我使用以下代码：

```
 var badgeType = notifications.BadgeTemplateType.badgeNumber;
    var badgeXml = notifications.BadgeUpdateManager.getTemplateContent(badgeType);
    var badgeAttributes = badgeXml.getElementsByTagName("badge");
    var tileUpdater = notifications.TileUpdateManager.createTileUpdaterForApplication()
    tileUpdater.startPeriodicUpdate(polledUri, recurrence);
    // this is where my problem is
    // if (tileUpdater.update() == true) -> This line is not correct: how can I catch the update event?
    //badgeAttributes[0].setAttribute("value", currentValue + 1);
    var badgeNotification = new notifications.BadgeNotification(badgeXml);
    notifications.BadgeUpdateManager.createBadgeUpdaterForApplication().update(badgeNotification); 
```

我想捕捉该 tileUpdater.startPeriodicUpdate 函数的更新事件并增加徽章的值。我怎样才能做到这一点？我到处搜索，但找不到答案。

我感谢您的帮助。
朱利安·阿塔纳索埃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T06:14:18.890

即使您可以检测到已经发生了定期磁贴更新（我很确定您不能），它也会在您的应用程序未运行的大部分时间发生。因此，您必须通过“本地通知”设置徽章更新的代码将不会执行。事实上，徽章只会在应用程序处于前台并且定期通知命中时更新（这并不是那么有趣，因为您的应用程序处于前台时，您无论如何都看不到磁贴！）。

听起来您想通过在徽章中显示磁贴来跟踪磁贴的更新次数？ *（请注意，最多只能使用 99，最大徽章数）*

我会说对徽章也使用定期通知，并且该定期更新的 URL 端点可以是接受唯一标识客户端的查询字符串参数的服务。然后，您的服务将为该客户端生成正确的标记通知，方法是增加它在服务器端维护的特定于客户端的值。

即使这样，您也会有两个定期通知发生，一个用于磁贴，一个用于徽章，虽然您可以将它们安排在相同的时间间隔，但它们到达时仍然存在潜在的偏差，最多 15 分钟所需的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T07:51:05.703

这个问题有2个解决方案：

1) 我为徽章更新创建定期通知，并将每个客户端的 GUID 存储在 Web 服务上。此解决方案适用于使用不频繁的应用程序（2000 个用户以下），因为 XML 文件会变得太大，并且 Web 服务必须为每个客户端增加很多值。

2）我创建了一个带有计时器的后台任务，我每 15 分钟左右检查一次更新。

朱利安

# c# - 当声音仍在播放时，在 Windows Phone 8 上使用 XNA 进行音频循环

> ID：14345784
> 
> 赞同：11
> 
> 时间：2013-01-15T19:57:21.340
> 
> 标签：c#, audio, xna, visual-studio-2012, windows-phone-8

我需要一种在声音仍在播放时启动/停止循环的方法。我发现一起播放多个声音的最佳方法是使用 XNA。因此，我从包含音频剪辑的对象创建了一个`SoundEffectInstance`起点。`SoundEffect`现在的问题是我有一个按钮，它应该将此剪辑的状态从“循环”更改为“非循环”，反之亦然。

这就是问题所在：它抛出一个异常，说必须在第一次播放之前设置循环。所以我认为，从“非循环”切换到“循环”时，我可以等待声音停止，然后重新创建`SoundEngineInstance`, 设置`IsLooped = true`并让它重新开始。这一个有效，但是有一些延迟，这会让你失去时间，所以它毫无用处。

我正在寻找的是一种在播放声音时设置或取消设置循环并且没有任何延迟的方法。

编辑：

我尝试使用两个`SoundEngineInstance`，一个循环，一个不循环，并简单地使用音量在它们之间切换。问题是非循环的片段在第一次播放后就停止了，所以如果我循环它两次然后我把它放到非循环状态，因为非循环的剪辑已经结束，所以没有声音播放！

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:08:29.627

我有同样的问题，我使用了两个具有相同音频剪辑的实例来解决它，一个带有循环，一个没有它。我在两者之间切换。这可能不是最好的解决方案，但它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:39:08.827

来自[http://msdn.microsoft.com/en-us/library/dd940203(v=xnagamestudio.31).aspx](http://msdn.microsoft.com/en-us/library/dd940203(v=xnagamestudio.31).aspx)：

1.  使用如何：播放声音中所示的方法声明 SoundEffect。

2.  声明一个 SoundEffectInstance，并将其设置为 SoundEffect.CreateInstance 的返回值。

3.  将 SoundEffectInstance.IsLooped 设置为 true。

4.  调用 SoundEffectInstance.Play 播放循环声音。

当您不再希望它循环时，您可以将 IsLooped 设置为 false，而只是播放到最后。

# build - 使用 Autotools 在包中添加 .c 文件而不编译它们

> ID：14345797
> 
> 赞同：0
> 
> 时间：2013-01-15T19:57:55.670
> 
> 标签：build, automake

我有一些 .c 文件包含在某些单元测试中（例如*#include "foo.c"*）。我不希望构建系统尝试构建这些。它会失败。我只想调用“make dist”并获取生成的包中包含的那些 .c 文件。

我怎么做？我试过**noinst_**前缀和**_DATA**后缀没有效果。

此外，指向特定文档的链接会很棒。我正在阅读 GNU 的相关文档。这是巨大的（应该是）！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T06:03:57.473

你有没有尝试过：

```
EXTRA_DIST = foo.c 
```

# ruby - 从 Curb 获取响应标头

> ID：14345805
> 
> 赞同：13
> 
> 时间：2013-01-15T19:58:31.557
> 
> 标签：ruby, curb

我打算从 Ruby on Rails 应用程序拨打电话：

```
c = Curl::Easy.http_post("https://example.com", json_string_goes_here) do |curl|
  curl.headers['Accept'] = 'application/json'
  curl.headers['Content-Type'] = 'application/json'
  curl.headers['Api-Version'] = '2.2'
end 
```

响应应具有自定义标头：

```
X-Custom1 : "some value"
X-Custom2 : "another value" 
```

如何迭代响应标头以将值与我期望的值进行比较？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-16T07:08:48.380

使用 Curl::Easy `header_str`，您可以将返回的标头作为字符串访问。从文档中：

> 返回上一个调用的响应头以执行。这由默认的 on_header 处理程序填充 - 如果您提供自己的标头处理程序，则此字符串将为空。

为了测试这一点，我使用以下命令打开了内置的 Gem 服务器：

```
gem server 
```

这里有一些代码来测试这个：

```
curl = Curl::Easy.http_get('http://0.0.0.0:8808')
curl.header_str
=> "HTTP/1.1 200 OK \r\nDate: 2013-01-10 09:07:42 -0700\r\nContent-Type: text/html\r\nServer: WEBrick/1.3.1 (Ruby/1.9.3/2012-11-10)\r\nContent-Length: 62164\r\nConnection: Keep-Alive\r\n\r\n" 
```

捕获响应并将剩余的字符串分解为散列，使其更易于使用，这很简单：

```
http_response, *http_headers = curl.header_str.split(/[\r\n]+/).map(&:strip)
http_headers = Hash[http_headers.flat_map{ |s| s.scan(/^(\S+): (.+)/) }]

http_response # => "HTTP/1.1 200 OK"

http_headers 
=> {
                  "Date" => "2013-01-10 09:07:42 -0700",
          "Content-Type" => "text/html",
                "Server" => "WEBrick/1.3.1 (Ruby/1.9.3/2012-11-10)",
        "Content-Length" => "62164",
            "Connection" => "Keep-Alive"
    } 
```

再次测试，在 Pry 中：

```
[27] (pry) main: 0> curl = Curl::Easy.http_get('http://www.example.com')
#<Curl::Easy http://www.example.com>
[28] (pry) main: 0> curl.header_str
"HTTP/1.0 302 Found\r\nLocation: http://www.iana.org/domains/example/\r\nServer: BigIP\r\nConnection: Keep-Alive\r\nContent-Length: 0\r\n\r\n"
[29] (pry) main: 0> http_response, *http_headers = curl.header_str.split(/[\r\n]+/).map(&:strip)
[
    [0] "HTTP/1.0 302 Found",
    [1] "Location: http://www.iana.org/domains/example/",
    [2] "Server: BigIP",
    [3] "Connection: Keep-Alive",
    [4] "Content-Length: 0"
]
[30] (pry) main: 0> http_headers = Hash[http_headers.flat_map{ |s| s.scan(/^(\S+): (.+)/) }]
{
          "Location" => "http://www.iana.org/domains/example/",
            "Server" => "BigIP",
        "Connection" => "Keep-Alive",
    "Content-Length" => "0"
} 
```

# c# - 在 Resources.resx 中将文件另存为 byte[]

> ID：14345806
> 
> 赞同：0
> 
> 时间：2013-01-15T19:58:32.530
> 
> 标签：c#, resources, resx

> **可能重复：**
> [以编程方式将资源加载为字节数组](https://stackoverflow.com/questions/9487726/load-resource-as-byte-array-programmaticaly)
> [将 .resx 中的图像存储为字节 [] 而不是位图](https://stackoverflow.com/questions/9901518/store-image-in-resx-as-byte-rather-than-bitmap)

我正在创建一个 Web 服务，使用户能够下载多个文件。我将这些文件保存在 Resources.resx 上。问题是，如果我将二进制（someProgram.exe）文件添加到 Resources.resx 然后执行：

```
 var foo = Resources.someProgram; // Foo is of type byte[]! 
```

如果我然后将图像添加到 Resources.resx (someImage.png) 然后：

```
 var foo2 = Resources.someImage; // Foo2 is of type Bitmap 
```

我希望资源上的所有文件都被视为二进制文件。我怎样才能做到这一点？我添加图像的那一刻，它是位图类型。我怎样才能强制它是二进制的？

## 编辑

一种解决方案是删除文件扩展名，但我想保留文件的文件扩展名......

# javascript - jQuery - 将函数应用于具有相同类名的多个选择元素

> ID：14345807
> 
> 赞同：0
> 
> 时间：2013-01-15T19:58:34.413
> 
> 标签：javascript, jquery, class, select, multiple-instances

这是我到目前为止所拥有的：

```
<!DOCTYPE HTML>
<html>

  <head>
    <meta http-equiv="content-type" content="text/html" />
    <script src="http://code.jquery.com/jquery-latest.js">
    </script>
    <title>
      Select
    </title>
  </head>

  <body>
    <script type="text/javascript">
      var MyArray = {
        "Windows": "imgx.jpg",
        "Linux": "imgt.jpg",
        "Mac": "imgi.jpg",
        "MS DOS": "imgy.jpg",
        "1GB": "imggb.jpg"
      }

      jQuery(function() {

        jQuery('.product').change(function() {

          var xkey = MyArray[jQuery.trim(jQuery(".product option:selected").text())];

          if (typeof xkey == 'string') {

            alert(xkey);

          }

        });

      });
    </script>
    <div>
      <select name="options_random_nr_yy" class="product">
        <option value="">
          -- Select --
        </option>
        <option value="56">
          1GB
        </option>
        <option value="57">
          2GB
        </option>
        <option value="73">
          4GB
        </option>
        <option value="209">
          8GB
        </option>
      </select>
    </div>
    <div>
      <select name="options_random_nr_xx" class="product">
        <option value="">
          -- Select --
        </option>
        <option value="63">
          Windows
        </option>
        <option value="65">
          Linux
        </option>
        <option value="67">
          Mac
        </option>
        <option value="89">
          MS DOS
        </option>
      </select>
    </div>
  </body>

</html> 
```

问题是当我选择一个选项时它总是返回“未定义”。但是，如果我删除其中一个`<select>`元素，它工作正常！

如何将相同的函数应用于`<select>`具有相同类名的所有元素（在此示例中，公共类是“产品”）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:01:49.187

代替

```
var xkey = MyArray[jQuery.trim(jQuery(".product option:selected").text())]; 
```

尝试

```
var xkey = MyArray[jQuery.trim(jQuery(this).val())]; 
```

在事件处理程序中，这总是指向一个甚至发生过的元素。

**更新**：

我看到你的 MyArray 有选项文本而不是选项值作为键，所以你应该使用：

```
var xkey = MyArray[jQuery.trim(jQuery(this).find("option:selected").text())]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:05:27.683

您的问题是 jQuery('.product') 返回所有选择的列表，而不是当前选择的列表。大多数现代浏览器处理从一个 DomElement 列表到特定 DomElement 的转换（因此，如果您删除一个它会突然起作用），但是，在事件处理程序中，您可以使用 $(this) 来处理旧浏览器中的一个选项和多个所有浏览器中的项目。

（$ 是 jQuery 的简写）

所以你想做的是：

```
 $(function(){
      $('.product').change(function(){
          var xkey = MyArray[$.trim($(this).find("option:selected").text())];
      }
      if (typeof xkey == 'string') {

        alert(xkey);

      }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T20:08:41.863

您需要将事件绑定到每个元素。[使用jQuery.inArray](http://api.jquery.com/jQuery.inArray/)搜索数组。清洁解决方案：

```
 jQuery(function() {

    jQuery('.product').change(function() {

        var xkey = jQuery.trim(jQuery(this).find('option:selected').text())

        if(jQuery.inArray(xkey, MyArray) && typeof xkey == 'string')
            alert(xkey);
    })
 }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T20:19:54.570

这样做使用`.each()`： -

```
var MyArray = {
        "Windows": "imgx.jpg",
        "Linux": "imgt.jpg",
        "Mac": "imgi.jpg",
        "MS DOS": "imgy.jpg",
        "1GB": "imggb.jpg"
      };
jQuery('.product').change(function() {
  jQuery(".product option:selected").each(function() {
    var xkey = MyArray[jQuery.trim(jQuery(this).text())];
    if (typeof xkey == 'string') {
      alert(xkey);
    }
  });
}); 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/Tr2hb/)**

这样做的其他方式使用`.map()`

```
jQuery('.product').change(function() {
  $(".product option:selected").map(function(){
        var xkey = MyArray[jQuery.trim(jQuery(this).text())];
        if (typeof xkey == 'string') {
        alert(xkey);
        }
    });
}); 
```

参考**[现场演示 - 使用 map()](http://jsfiddle.net/SivaCharan/Tr2hb/1/)**

# c# - ClickOnce 应用程序的多个安装文件（适用于不同版本） - 同时

> ID：14345808
> 
> 赞同：1
> 
> 时间：2013-01-15T19:58:34.437
> 
> 标签：c#, .net, deployment, clickonce

我希望能够安装**同一**程序的任一版本（完全相同的一个。如：一个安装将覆盖另一个。）。但我不能将它们放在不同的文件夹中，因为只能从一个文件夹安装 ClickOnce 应用程序。

我可以有多个安装文件，因为我发现我可以重命名 setup.exe。此外，我可以拥有该程序的所有实际版本，因为所有版本共存于“应用程序文件”文件夹中。

然而，“部署清单”文件（即**.application**文件）是一个问题 - 新文件将覆盖旧文件，重命名只会导致重命名的文件被忽略。

那么我怎样才能拥有一个安装文件 - setup1.exe - 安装版本 1.0.0.1，而 setup2.exe 安装版本 1.0.0.2？

# python - 如何非阻塞地读取命名的 FIFO？

> ID：14345816
> 
> 赞同：20
> 
> 时间：2013-01-15T19:59:06.850
> 
> 标签：python, nonblocking, fifo

我创建了一个 FIFO，并定期从 a.py 以只读和非阻塞模式打开它：

```
os.mkfifo(cs_cmd_fifo_file, 0777)
io = os.open(fifo, os.O_RDONLY | os.O_NONBLOCK)
buffer = os.read(io, BUFFER_SIZE) 
```

从 b.py，打开 fifo 进行写入：

```
out = open(fifo, 'w')
out.write('sth') 
```

然后 a.py 会报错：

```
buffer = os.read(io, BUFFER_SIZE)

OSError: [Errno 11] Resource temporarily unavailable 
```

有谁知道怎么了？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-15T20:02:42.250

根据手册页`read(2)`：

> ```
>  EAGAIN or EWOULDBLOCK
>           The  file  descriptor  fd refers to a socket and has been marked
>           nonblocking   (O_NONBLOCK),   and   the   read   would    block.
>           POSIX.1-2001  allows  either error to be returned for this case,
>           and does not require these constants to have the same value,  so
>           a portable application should check for both possibilities. 
> ```

所以你得到的是没有可供阅读的数据。像这样处理错误是安全的：

```
try:
    buffer = os.read(io, BUFFER_SIZE)
except OSError as err:
    if err.errno == errno.EAGAIN or err.errno == errno.EWOULDBLOCK:
        buffer = None
    else:
        raise  # something else has happened -- better reraise

if buffer is None: 
    # nothing was received -- do something else
else:
    # buffer contains some received data -- do something with it 
```

确保您已导入 errno 模块：`import errno`.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-15T20:07:31.893

```
out = open(fifo, 'w') 
```

谁会为你关闭它？将您的 open+write 替换为：

```
with open(fifo, 'w') as fp:
    fp.write('sth') 
```

**UPD：** 好的，不仅仅是做这个：

```
out = os.open(fifo, os.O_NONBLOCK | os.O_WRONLY)
os.write(out, 'tetet') 
```

# java - 将 Galaxy SII 连接到 Eclipse LogCat 时开始疯狂抛出错误

> ID：14345818
> 
> 赞同：0
> 
> 时间：2013-01-15T19:59:08.613
> 
> 标签：java, logcat

嘿，希望有人可以帮助我。我刚开始学习为 Android 开发，LogCat 让我陷入了困境。当我以 USB 调试模式将 Galaxy SII 连接到计算机时，Logcat 开始疯狂地喷出错误。我不确定为什么会发生这种情况，因为它以前从未发生过，甚至就在昨晚我正在测试一些 hello world-ish 类型的应用程序时。知道发生了什么吗？错误消息如下：

```
01-15 13:52:59.999: E/AlarmManagerService(1971): android_server_AlarmManagerService_set to type=3, 712.099000000
01-15 13:53:00.009: E/AlarmManagerService(1971): android_server_AlarmManagerService_set to type=3, 632.522000000
01-15 13:53:00.559: E/DataRouter(1804): usb connection is true 
01-15 13:53:00.559: E/DataRouter(1804): DSR is ON. Don't send DTR ON.
01-15 13:53:02.558: E/DataRouter(1804): usb connection is true 
01-15 13:53:02.558: E/DataRouter(1804): DSR is ON. Don't send DTR ON.
01-15 13:53:04.564: E/DataRouter(1804): usb connection is true 
01-15 13:53:04.564: E/DataRouter(1804): DSR is ON. Don't send DTR ON.
01-15 13:53:06.563: E/DataRouter(1804): usb connection is true 
01-15 13:53:06.563: E/DataRouter(1804): DSR is ON. Don't send DTR ON.
01-15 13:53:08.563: E/DataRouter(1804): usb connection is true 
01-15 13:53:08.563: E/DataRouter(1804): DSR is ON. Don't send DTR ON.
01-15 13:53:10.563: E/DataRouter(1804): usb connection is true 
01-15 13:53:10.563: E/DataRouter(1804): DSR is ON. Don't send DTR ON. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T00:43:00.433

我不确切知道，但前几天我在安装驱动程序 Kies 后插入三星 Galaxy Tab 7.0 时发生了类似的事情。我必须重新安装它才能使其正常工作。[http://www.samsung.com/us/support/downloads](http://www.samsung.com/us/support/downloads)。

# jquery - fancybox 的每一页都有错误 Uncaught TypeError: Object [object Object] has no method 'fancybox'

> ID：14345820
> 
> 赞同：0
> 
> 时间：2013-01-15T19:59:18.803
> 
> 标签：jquery, fancybox

我网站上的所有花哨的盒子都运行良好，直到早上，然后突然错误出现在每个页面上，所有花哨的盒子都在标签中打开。 ***Uncaught TypeError: Object [object Object] has no method 'fancybox'*** 我不知道问题出在哪里。请帮助我，我已经花了一半的时间弄清楚但没有帮助。

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>

 <script type="text/javascript">

     $(function () {
         // Error here  **Uncaught TypeError: Object [object Object] has no method 'fancybox'**
         $("a.fancybox").fancybox({

             'overlayShow': true,
             'autoSize': false,
             'autoResize': false,
             'autoDimensions': false,
             'enableEscapeButton': true,
             'showCloseButton': true,
             'width': 620,
             'height': 250,
             'type': 'iframe',
             'scrolling': 'no'
         });
     });
    </script>

      <link rel="stylesheet" href="/Content/fancybox/jquery.fancybox.css?v=2.1.2" type="text/css" />
    <script type="text/javascript" src="/Content/fancybox/jquery.fancybox.pack.js?v=2.1.2"></script>
    <link rel="stylesheet" href="/Content/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" />
    <script type="text/javascript" src="/Content/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:00:24.737

确保...

1.  `http://<your-domain.com>/Content/fancybox/jquery.fancybox.pack.js?v=2.1.2`不会导致错误（404 或其他）

2.  `$`仍然是 jQuery 对象的别名（您可能包含`$`在脚本中稍后重新定义的其他库）

3.  该页面未定义替代[基本 URL](https://stackoverflow.com/questions/1889076/is-it-recommended-to-use-the-base-html-tag)，这将导致包含的脚本为 404，即使它们似乎在页面之外工作

# css - CSS 中的 top 属性不适用于 Internet Explorer 6

> ID：14345821
> 
> 赞同：0
> 
> 时间：2013-01-15T19:59:22.930
> 
> 标签：css, internet-explorer-6

我有一些带有收音机和复选框的表格。

它应该是这样的：

![http://img96.imageshack.us/img96/7672/screenshot1hm.png](../Images/3de3ff138ddaf06718029b51e495600a.png)

CSS：

```
.span-al-top
{
    position:relative;
    top:-7px;

}

.span-al-bottom
{
    position:relative;
    top:2px;
} 
```

HTML：

```
<label>Radio</label>
<br />
<input type="radio" name="radio" value="uno" class="radio-margin"><span class="span-al-bottom">uno</span>
<input type="radio" name="radio" value="due" class="radio-margin"><span class="span-al-bottom">due</span>
<input type="radio" name="radio" value="tres" class="radio-margin"><span class="span-al-bottom">tres</span>
<br />
<label>Checkbox</label>
 <br />
<input type="checkbox" name="vehicle" value="Bike" class="checkbox-margin"><span class="span-al-top">one</span>
<input type="checkbox" name="vehicle" value="Bike" class="checkbox-margin"><span class="span-al-top">two</span>
<input type="checkbox" name="vehicle" value="Bike" class="checkbox-margin"><span class="span-al-top">three</span><br />
<input type="checkbox" name="vehicle" value="Bike" class="checkbox-margin"><span class="span-al-top">four</span>
<input type="checkbox" name="vehicle" value="Bike" class="checkbox-margin"><span class="span-al-top">five</span>
<input type="checkbox" name="vehicle" value="Bike" class="checkbox-margin"><span class="span-al-top">six</span> 
```

它可以工作，但它不适用于 Internet Explorer 6。在 Explorer 6 中，我有这个：

![http://img577.imageshack.us/img577/3822/screenshot12y.png](../Images/cf6c18715ca5ce042c0d8864ad2ee26f.png)

知道我该如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:45:36.607

好的，我解决了。我只需要添加代码：

```
vertical-align: middle; 
```

两种跨度样式。

# php - Ajax jquery返回空白页

> ID：14345822
> 
> 赞同：1
> 
> 时间：2013-01-15T19:59:27.180
> 
> 标签：php, jquery

我有这个 JavaScript 代码：

```
$(document).ready(function(){ 
           $('#sel').change(function(){

        $.ajax({
                      type: "POST", 
                      url: "modules.php?name=TransProject_Management&file=index",
                      data: "&op=index_stat&stat="+$(this).val(),
                      cache: false,
                      success: function(data) {
                         //alert(data);
                         $("#ajax_results").html(data);
                     }
                  }); 

});
}); 
```

在状态更改时，我需要在不重新加载页面的情况下刷新 div。但它返回空白页。如果我尝试在成功时提醒结果，我会得到响应，我也检查了检查元素，没问题。问题是它返回空白页。

我正在处理的文件与我在 ajax 中调用的文件相同（modules.php?name=TransProject_Management&file=index）。

的HTML：

```
<body>
//...
<div id="ajax_results">
//.....
//somewhere here is the select option <select id="sel">......</select>
//.....
</div>
</body> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:27:03.907

使用以下代码返回您的响应 html：

```
echo json_encode(array($your_response)); 
```

然后在您的 javascript 中，您需要将数据引用为：

```
success: function(data) {
    $("#ajax_results").html(data[0]);
} 
```

因为它现在是一个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:04:47.813

嗯，乍一看代码看起来不错。您是否尝试过使用 Chrome 调试工具？点击 F12 并检查 Network 选项卡，这将向您显示返回的内容。您也可以在不使用警报的情况下进行调试，这样您就可以逐步查看属性的确切含义。

只是想，您可能需要在返回的数据中添加“d”。无论如何，如果您按照我上面的建议进行操作，请在该行放置一个暂停符并运行代码，您将看到您需要什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T20:08:37.860

`this`在您的 ajax 函数中是指`jQuery XHR`对象，而不是`$('#sel')`对象。只需将它分配给 ajax 函数之前的变量，`var sel = $(this)`然后稍后在函数中使用它。试试这个：

```
$('#sel').change(function(){
        var sel = $(this);
        $.ajax({
                      type: "POST", 
                      url: "modules.php?name=TransProject_Management&file=index",
                      data: "&op=index_stat&stat="+sel.val(),
                      cache: false,
                      success: function(data) {
                         //alert(data);
                         $("#ajax_results").html(data);
                     }
               }); 

        });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T20:30:18.677

根据您在问题下方的评论，您似乎正在使用相同的脚本来显示您的页面并调用 javascript。这个脚本似乎返回了一个完整的 html 页面，从`<html>`标签开始。

一个页面只能有一个`<html>`标签，当您尝试将完整的 html 页面转储到另一个页面的元素中时，这将导致无效的 html 和不可预测的结果。

解决方案是让您的 ajax 脚本只返回需要插入的必要元素/html，仅此`#ajax_results`而已。

# java - 如何找到数字之间的真实值java

> ID：14345823
> 
> 赞同：0
> 
> 时间：2013-01-15T19:59:27.860
> 
> 标签：java

下午好，

考虑到我们有两个数字，我们想将它们相加但没有任何舍入，我们希望得到真正的值，所以如果我们添加 0,4+0,6 要么是 double 要么 float java 打印结果 1 但实际上这不是存储在内存中的实数。我试图将它们转换为 BigDecimal 但它也会打印结果 1！但是，当数字除了 0.5 之外还有小数部分时，转换 bigDecimal 可以正常工作！

这是我正在使用 netbeans 制作科学计算器的方法的一部分 用户在 textArea 中给出数学表达式。a 将表达式作为字符串，我将其分开，为对象赋值 数学元素 该元素可以是运算符或数字. 我发布的方法部分只有添加的情况

如果用户给出表达式 0.6+0.4 我想找到两个结果并打印它们（给出 0.4+0.6=1 的结果以及这个总和的实际结果）

```
Stack<MathematicElement> stack = new Stack<MathematicElement>();
    BigDecimal pin[]=new BigDecimal[post.length];
    BigDecimal b1;
    BigDecimal flo[]=new BigDecimal[post.length];
    BigDecimal f1;
    float f;
    int k=0;
    for (int i = 0; i < post.length; i++) {
        if (post[i].isNumber) {
            stack.push(post[i]);
            pin[0]=new BigDecimal(post[i].number);
            flo[0]=new BigDecimal(new Float(post[i].number));
            continue;

        }
        if (post[i].isOperator) {
            MathematicElement mx2 = stack.pop();
            double modifier;
            if(system==MathematicalNumberingSystem.DEGREES)
                modifier = pi/180;
            else
                modifier = 1;
            double x2 = mx2.number, x1, y;
            float f2=new Float(x2);
            BigDecimal f22=new BigDecimal(f2);
            BigDecimal b2=new BigDecimal(x2);
            switch (post[i].operator) {
                case PLUS:
                    x1 = stack.pop().number;
                    b1=new BigDecimal(x1);
                    pin[0]=b1.add(b2);
                    f=new Float(x1);
                    f1=new BigDecimal(f);
                    flo[0]=f1.add(f22);
                    //System.out.format("the b1=%20.16f  and the b2=%20.16f \n",b1,b2);
                    y = x1 + x2;

                    //FloatingPointNumber(x1);
                    //FloatingPointNumber(x2);
                    //FloatingPointNumber(y);
                    stack.push(new MathematicElement(y));
                    k++; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:19:49.143

0.4d + 0.6d 最终等于 1.0d。我相信 BigDecimal 会将其减少到 1d 以节省内存。

换句话说，你已经有了答案:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:16:38.670

您可以使用 BigDecimal 来执行此操作，就像您所做的那样，但在此示例中，1（一）可以以 2（二）为底表示，因此计算机拥有精确的值 =D

# android - Android 上的 Alpha 渐变

> ID：14345824
> 
> 赞同：19
> 
> 时间：2013-01-15T19:59:33.837
> 
> 标签：android, imageview, gradient, android-imageview, alpha-transparency

我需要在 ImageView 的边缘创建一个 alpha 渐变。最好只使用 XML。

[*以图片为例*](http://i.stack.imgur.com/Q24wq.png)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-15T20:07:07.637

这里的解决方案

图像如下图所示

![在此处输入图像描述](../Images/2d2594cea6579e5bcb0b0bb263b10ec5.png)

**代码**：

*   准备可绘制的形状

**res/drawable/gradient_shape.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient
            android:startColor="#00FFFFFF"
            android:endColor="#FFFFFFFF"
            android:type="linear" />
</shape> 
```

**定义布局：activity_main.xml：**

```
<ImageView
    android:id="@+id/photo"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/photo"
    android:src="@drawable/gradient_shape" /> 
```

这里 drawable/photo 只是 drawables 文件夹中的 jpeg

**编辑** 以获取更多信息，请参阅本**[教程](http://android-dev-tips-and-tricks.blogspot.in/2012/08/xml-drawables-part-i.html)**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-23T14:17:32.200

```
<?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android">
        <gradient
                android:startColor="#00FFFFFF"
                android:endColor="#FFFFFFFF"
                android:type="linear" />
    </shape> 
```

完美的透明性。确保渐变下方的视图实际上在下方，而不仅仅是触摸渐变形状视图。

如果你有主要的 **RelativeLayout、** **ListView** 和 **View(Background:Gradient)**

确保**渐变视图**位于 ListView 的顶部，而不是一侧。如果您的**渐变**放在一边，它将通过**RelativeLayout**背景颜色而不是**ListView**透明。

我希望你明白我想说什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-06-19T09:45:15.847

对于透明度：

```
android:startColor="@null" 
```

或者您可以使用这样的 8 位十六进制颜色：

```
android:startColor="#FF000000" 
```

前两个 FF 用于颜色的 alpha，00 是完全透明的，FF 是不透明的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-07T08:12:08.617

如果您想要无色透明，则需要编写自定义 ImageView。

如果您的背景是静态颜色，这是我首选的解决方法：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/your_image"/>

    <item>
        <shape android:shape="rectangle">
            <gradient android:startColor="#00efefef"
                android:endColor="#ffefefef"
                android:angle="270"
                android:type="linear"/>
        </shape>
    </item>
</layer-list> 
```

# objective-c - 这些代码块如何产生看似相同的结果，但后来的功能却不同？

> ID：14345826
> 
> 赞同：0
> 
> 时间：2013-01-15T19:59:39.110
> 
> 标签：objective-c

谁能告诉我这段代码之间的功能区别......

> for (int i = 0; i < productsJSON.count; i++) { prod = [[Product alloc] init];
> 
> ```
>  prod.ItemID = [[productsJSON valueForKey:@"ItemID"] objectAtIndex:i];
>    prod.Name = [[productsJSON valueForKey:@"Name"] objectAtIndex:i];
> 
>    [self.products addObject:prod]; 
> ```
> 
> } [超级 viewDidLoad];

...而这段代码...

> prod = [[产品分配] init]; prod.ItemID = @"SB4UL"; prod.Name = @"#4 开口螺栓 - UL 认证"; [self.products addObject:prod];
> 
> prod = [[产品分配] init]; prod.ItemID = @"PVSC07GGUL"; prod.Name = @"I 梁接地夹，UL"; [self.products addObject:prod];
> 
> [超级视图DidLoad];

...当 prod.ItemID 和 prod.Name 是 NSString 属性，并且在“for”循环中分配的值 - 退出循环后 - 被视觉确认与其他代码块分配的值相同?

据我所知，在我实际尝试将结果用于我的应用程序的那一刻之前，两者的行为完全相同。该代码出现在 UITableViewController 的 viewDidLoad 方法中。它被传递给 cellForRowAtIndexPath 方法，在那里我可以确认这些值完好无损地到达。然后我们直接进入代码块......

> UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"ProductCell"]; 产品 *product = [self.products objectAtIndex:indexPath.row]; cell.textLabel.text = 产品名称；

如果我已注释掉第一个块并运行第二个块，则视图将完美显示。

如果我注释掉第二个块并运行第一个块，程序每次都会在“cell.textLabel.text = product.Name”处死掉，并显示一条看似随机的错误消息（例如：“线程 1：EXEC_BAD_INSTRUCTION（代码=EXC_1386_INVOP, subcode=0x0)”或“线程 1：信号 SIGABRT”或“线程 1：EXC_BAD_ACCESS（代码=1，地址=0xf069996f”）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:00:31.627

我不太了解您的代码，例如：

```
prod.ItemID = [[productsJSON valueForKey:@"ItemID"] objectAtIndex:i]; 
```

我想 productsJSON 是一个字典，然后：

```
[productsJSON valueForKey:@"ItemID"]; // <-- is this an array? 
```

第一个疑问：在我看来，这会返回一个字符串？我错了吗？如果我错了

我现在只是在猜测，但我认为您的代码应该是这样的：

```
for (int i = 0; i < productsJSON.count; i++) { 
  prod = [[Product alloc] init];
  prod.ItemID = [[productsJSON objectAtIndex:i] valueForKey:@"ItemID"];
  prod.Name   = [[productsJSON objectAtIndex:i] valueForKey:@"Name"];
  [self.products addObject:prod];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:02:39.417

@Joe 是对的——我只需要深入挖掘才能找到它。该数组是持久的，但 Product 类的属性不是。

productsJSON 代码是特定于 viewDidLoad 的变量。它在方法之间死亡，并且 Product 对象中的引用变坏了。

# youtube-api - YouTube 分析 - 何时停止查询？

> ID：14345827
> 
> 赞同：0
> 
> 时间：2013-01-15T19:59:40.177
> 
> 标签：youtube-api

快速概述我的应用程序正在做什么：

1.  客户通过 OAuth 对其 Google 帐户进行身份验证。
2.  我检索他们的访问和刷新令牌并存储它们以供使用
3.  我对观看次数、评论等基本指标进行 YouTube 分析报告查询。我从今天开始查询，并及时倒退。

我的问题是：我怎么知道什么时候停止查询？

即使我指定了 1980 年的日期，API 似乎也没有返回任何错误。API 似乎没有返回任何结果，因为“rows”字段不存在：

{"kind":"youtubeAnalytics#resultTable","columnHeaders":[{"name":"day","columnType":"DIMENSION","dataType":"STRING"},{"name":"views" ,"columnType":"METRIC","dataType":"INTEGER"}]}

如果API返回这样的结果，而“rows”字段不存在，我停止查询是否可靠？我担心的是，如果客户在某个时间段内没有任何数据，并且 API 返回这种类型的结果（缺少“行”字段），客户是否有可能在他的时间段之前仍有数据？因此我应该继续向后查询？我怎么知道什么时候停止？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T22:01:53.433

YouTube 于 2005 年 2 月推出，因此您至少不必在此之前查询日期 :)

但是，似乎没有任何观看次数的天会返回 0 次观看，而视频或频道存在之前的几天不会返回一行，因此当没有更多行返回时，您应该安全地停止。

但是，与其每天查询，不如查询您感兴趣的整个日期间隔，从而只查询一次？使用 start-date=2005-01-01 和 end-date={$today} 并且尺寸=day？

我最近上传的视频，观看次数*非常有限：*

```
https://www.googleapis.com/youtube/analytics/v1/reports?ids=channel%3D%3DYHMS8hN8s49F93iJuEgG6w&start-date=2005-01-01&end-date=2013-01-21&metrics=views%2Ccomments&dimensions=day&filters=video%3D%3D_iwmv6644dA&sort=day&key={YOUR_API_KEY} 
```

回复：

```
{
  "kind": "youtubeAnalytics#resultTable",
  "columnHeaders": [
    {
      "name": "day",
      "columnType": "DIMENSION",
      "dataType": "STRING"
    }, {
      "name": "views",
      "columnType": "METRIC",
      "dataType": "INTEGER"
    }
  ],
  "rows": [
    ["2013-01-07", 1],
    ["2013-01-08", 0],
    ["2013-01-09", 0],
    ["2013-01-10", 0],
    ["2013-01-11", 0],
    ["2013-01-12", 1],
    ["2013-01-13", 0],
    ["2013-01-14", 1],
    ["2013-01-15", 0],
    ["2013-01-16", 0]
    ["2013-01-17", 0],
    ["2013-01-18", 0],
    ["2013-01-19", 0],
  ]
} 
```

顺便说一句，我使用 API Explorer 进行了尝试：[https ://developers.google.com/youtube/analytics/v1/](https://developers.google.com/youtube/analytics/v1/)

# java - 一项服务，三种方法需要写入一个文件中的特定行（独立且任意）。最好的方法是什么？

> ID：14345828
> 
> 赞同：0
> 
> 时间：2013-01-15T19:59:44.787
> 
> 标签：java, android, java-io

因此，在我的应用程序中，我有 1 个服务，具有三个侦听器回调方法：`onCallStateChanged()`、`onSignalStrengthsChanged()`和`onCellLocationChanged()`，每个都需要将特定行任意写入一个文件。

最好的方法是什么？文件中的数据需要实时更新（即在任何时间点都准确）。

# ftp - 通过FTP上传的文件没有内容，并且被一个空字符串签出？

> ID：14345831
> 
> 赞同：1
> 
> 时间：2013-01-15T19:59:51.840
> 
> 标签：ftp, locking

我尝试通过 Dreamweaver 和 Filezilla 将相同的 PHP 文件上传到我的共享托管服务器，在这两种情况下，我的 2KB 文件都以 0KB 的形式上传到服务器上。

在 Filezilla 中，我尝试以 ASCII 和二进制模式上传并获得相同的结果。

我重命名了本地文件，上传了它，它也最终是空的。

我创建了一个 1KB 的新 HTML 文件并上传了它。它似乎保持它的大小，直到我在服务器上查看它显示为空的文件。我再次检查了服务器，文件已降至 0 字节。

我注意到的一件奇怪的事情是，Dreamweaver 将最近上传的文件标记为“签出者：”——基本上没有人。所有其他文件，包括已清空的文件都是“签出者：*我的名字*”。

我不知所措。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:11:09.767

我会仔细检查 FTP 服务器是否磁盘空间不足。

# c++ - QProcess（净使用）不起作用

> ID：14345833
> 
> 赞同：1
> 
> 时间：2013-01-15T19:59:56.783
> 
> 标签：c++, qt, qprocess

我试图运行“net use \server_ip”并解析结果。平台 - Windows

我有以下代码：

```
QProcess *prc = new QProcess(0);
QString exec="net use";
QStringList params;
params << "\\\\" + getServerIP();
prc->start(exec,params);
qDebug() << "exec process";
prc->waitForFinished();
qDebug() << prc->readAll() << prc->exitStatus();;
delete connected; 
```

但是 readAll() reurns "" 并且 exitStatus() 返回 0。

你们有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:16:12.983

我的建议是删除以上所有内容，并改为调用[WNetAddConnection](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385413.aspx) ¹。

至少如果我正确地解释了你上面的内容，它似乎是这样一个真正的迂回版本：

```
WNetAddConnection(getServerIP(), NULL, NULL); 
```

如果GetServerIP返回一个QString，你可能需要添加对`toAscii`（或toLatin1、toLocal8Bit等）的调用来转换它以获得一些`WNetAddConnection知道如何处理的东西。

* * *

1.  或`WNetAddConnection2`或`WNetAddConnection3`。微软官方推荐后者，但您似乎不需要它们提供的任何额外功能。

# java - 带有枚举和接口的 Java 反射

> ID：14345834
> 
> 赞同：2
> 
> 时间：2013-01-15T20:00:07.243
> 
> 标签：java, events, gwt, reflection, enums

我正在为用户界面编写一些代码。在这段代码中有一个通用接口，如下所示：

```
public interface DataValue<T>
{
  public String getName();

  public T getValue();

  public String getDescription();

} 
```

现在，此接口由代码中的许多枚举实现，并在悬停事件控制器中用于接口中可由 DataValue 接口表示的值。我意识到这个控制器中有一些警告，所以我没有成功地试图找到一种方法来删除它们。控制器类如下所示：

```
public class HintController implements ItemHoverHandler
{

private final Class<? extends Enum> theEnumClass;

public HintController(Class<? extends Enum> enumClass)
{
    theEnumClass = enumClass;
}

@Override
@SuppressWarnings("unchecked")
public void onItemHover(ItemHoverEvent event)
{
  FormItem formItem = event.getItem();
  Enum<?> enumValue =
     Enum.valueOf(theEnumClass, (String)formItem.getValue());
  String prompt = (enumValue instanceof DataValue)
     ? getPromptForDataValue((DataValue)enumValue)
     : null;
  formItem.setPrompt(prompt);
}

 private String getPromptForDataValue(DataValue<?> dataValue)
 {
  return "<b>" + dataValue.getName() + "</b><br /><br />"
     + dataValue.getDescription();
 }
} 
```

当然，这个实现有一些我无法修复的 rawType 警告。如果我用 ? 通配符它将显示边界异常。我的关闭“尝试”是当我尝试更改字段的类型和构造参数 tom 时，如下所示：

```
 public class HintController implements ItemHoverHandler
 {

   private final Enum<? extends DataValue<?>> theEnumClass;

   public HintController(Enum<? extends DataValue<?>>enumClass)
   {
    theEnumClass = enumClass;
   }

    @Override
    public void onItemHover(ItemHoverEvent event)
    {
     FormItem formItem = event.getItem();
     Enum<? extends DataValue<?>>enumValue =
        Enum.valueOf(theEnumClass.getDeclaringClass(),formItem.getValue().toString());
     String prompt = (enumValue instanceof DataValue)
        ? getPromptForDataValue((DataValue<?>)enumValue)
       : null;
     formItem.setPrompt(prompt);
    }

    private String getPromptForDataValue(DataValue<?> dataValue)
    {
      return "<b>" + dataValue.getName() + "</b><br /><br />"
        + dataValue.getDescription();
    }
 } 
```

但当然，它失败了，因为我找不到实际发送该类型引用的方法，因为它们是枚举，我无法实例化它们。我认为应该有适当的方法来做到这一点，如果有人可以提供帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:13:56.593

乍一看，您的问题似乎可以通过`HintController`通用来解决：

```
public class HintController<T extends Enum<T>> implements ItemHoverHandler {

    private final T theEnumClass;

    //and so on... 
```

但是请注意，这`theEnumClass`可能是错误的名称，因为它只是指向 enum 的一个实例`T`。您可能想`Class<T>`改用。这将允许您调用方法反射方法，例如[`getEnumConstants()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getEnumConstants%28%29).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:15:22.803

您可以通过在 上放置一个真实的类型参数来消除警告`HintController`：

```
public class HintController<E extends Enum<E>> implements ItemHoverHandler {

    private final Class<E> theEnumClass;

    public HintController(Class<E> enumClass) {
        theEnumClass = enumClass;
    }

    @Override
    public void onItemHover(ItemHoverEvent event) {
        FormItem formItem = event.getItem();
        E enumValue = Enum.valueOf(theEnumClass, (String) formItem.getValue());
        String prompt = (enumValue instanceof DataValue) ? getPromptForDataValue((DataValue<?>) enumValue) : null;
        formItem.setPrompt(prompt);
    }

    private String getPromptForDataValue(DataValue<?> dataValue) {
        return "<b>" + dataValue.getName() + "</b><br /><br />" + dataValue.getDescription();
    }

} 
```

考虑到对使用它的其他类的影响，这是否合理，我不能说。我想它会是 - 任何创建一个已经对`enumClass`构造函数参数的类型有所了解的地方，它可以简单地传播到`HintController`. 以其他方式使用它的地方总是可以称它为`HintController<?>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T20:13:44.363

我不确定这应该是一个界面。看起来 DataValue 实际上应该是一个*class*。

```
public class DataValue< T extends Enum >
{
    public String getName() { ... }
    public String getValue() { ... } 
    public String getDescription() { ... }
} 
```

如果你这样做，那么只需将 DataValue 放在悬停事件中 - 然后直接从中获取信息。

# android - 谷歌地图 api 自定义标记

> ID：14345836
> 
> 赞同：0
> 
> 时间：2013-01-15T20:00:13.983
> 
> 标签：android, google-maps, google-api, google-maps-markers

我正在寻找来自 xml 文件（RelativeLayout）的自定义标记的良好旅游或解决方案。

我有：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/lay"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<ImageView
    android:layout_width="55dp"
    android:layout_height="65dp"
    android:src="@drawable/custom_marker" />

<TextView
    android:id="@+id/num_txt"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="8dp"
    android:layout_marginTop="5dp"
    android:gravity="center"
    android:text="20"
    android:textColor="#ce8223"
    android:textSize="25dp"
    android:textStyle="bold" />

    </RelativeLayout> 
```

我如何将其用作标记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:27:59.323

好吧，有一些解决方法可以将您的布局转换`Drawable`为可用作标记图像的布局：

```
LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
RelativeLayout view = (RelativeLayout)inflater.inflate(R.layout.your_layout, null);
view.setDrawingCacheEnabled(true);
view.setLayoutParams(new LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT));
view.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
view.layout(0, 0, view.getMeasuredWidth(), view.getMeasuredHeight()); 

view.buildDrawingCache();
//EDIT: updated drawable creation
Drawable d = new BitmapDrawable(context.getResources(), view.getDrawingCache().copy(Config.ARGB_8888, true)); //this drawable can be used as a marker

// **** EDIT2: don't forget to set bounds to your drawable
d.setBounds(0, 0, view.getMeasuredWidth(), view.getMeasuredHeight());
view.setDrawingCacheEnabled(false); 
```

正如您可能理解的那样，您需要存储`Context`指针才能获得`LayoutInflater`

希望能帮助到你

# ssis - 如何使用 ssis 导入简单的 XML 文件...组件没有任何输入或输出

> ID：14345838
> 
> 赞同：0
> 
> 时间：2013-01-15T20:00:15.260
> 
> 标签：ssis

我有一个非常简单的 XML 文件，我想使用 SSIS 导入该文件。

控制流 - 我有一个数据流

数据流 - 我有数据流源作为 xml 源。在编辑时，我取消了 XML 位置并生成了 XSD。当我看到列选项卡时，我看不到任何可用的列。

这是示例 XML 文件

```
<book>
    <title>Microsoft SQL Server 2008 R2 Master Data Services</title>
    <category>Information Technology</category>
    <author>Jeremy Kashel</author>
    <review>excellent book</review>
</book> 
```

我看到这条消息“组件没有任何输入或输出”。任何想法？

提前致谢

# android - 如何在 2 个元素之间为 android 创建自定义列表视图？

> ID：14345840
> 
> 赞同：1
> 
> 时间：2013-01-15T20:00:31.387
> 
> 标签：android, android-layout, android-listview

我需要创建一个具有列表视图活动的应用程序，但列表中的元素应该彼此分开，并且有多个单击选项：

这是图像：

![在此处输入图像描述](../Images/441459127546e84d18afce161b1762e5.png)

所以我可以点击任务上的查看任务详细信息，我可以点击任务的左侧（彩色部分）来改变它的颜色，这样就可以改变它的优先级

如果有人可以为我提供创建此类自定义列表的教程或其他阅读信息，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T20:44:25.663

`divider``dividerHeight`ListView 的和属性可以在您的列表视图项之间腾出空间：

```
<ListView android:id="@+id/list_view"
  android:layout_height="fill_parent"
  android:layout_width="fill_parent"
  android:divider="@android:color/transparent"
  android:dividerHeight="10.0sp"/> 
```

您可以找到一些关于如何构建具有[多个可点击区域的 Android 列表视图的教程](http://wiresareobsolete.com/wordpress/2011/08/clickable-zones-in-listview-items/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T05:42:06.733

您需要为列表项创建自定义 xml 布局。并在列表视图中给出分配器高度......就像我在这里所做的那样。

![在此处输入图像描述](../Images/bba47cb77b2fc70b00b78e11c50bda87.png)

```
 <ListView
     android:id="@+id/lstContact"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:layout_below="@+id/lay"
     android:divider="#0000"
     android:dividerHeight="6dp"
     android:layout_marginTop="3dp"
     android:padding="5dp"
     android:background="#0000"
     android:cacheColorHint="#0000"
     android:scrollbars="none" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T09:24:29.050

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_margin="5dp" >

<ImageView
    android:id="@+id/icon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_launcher" />

<TextView
    android:id="@+id/label"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Label" />

</LinearLayout> 
```

您可以将其用作列表适配器中列表行的布局。您可以通过增加和减少父布局的边距来实现间距。希望对你有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T05:51:57.350

我认为您需要为您的行的每个样式提及一个 shape.xml。然后在您的行布局中使用 RelativeLayout 来安排项目。并确保`android:background="@android:color/transparent"` 为您在那里创建的每个按钮都制作了。第一个是 ImageButton。 ![在此处输入图像描述](../Images/49d914415c1031ebff7ef9899f88a33d.png)

这是您可以实现的。让我知道这是否对您有帮助。

# jquery - jquery检查哪个li是显示块并获取值

> ID：14345841
> 
> 赞同：0
> 
> 时间：2013-01-15T20:00:45.883
> 
> 标签：jquery

我正在尝试从显示中的相同 ul 的 li 列表中获取产品的价值：块（其他被隐藏）。但是，当我单击以选择不同的产品尺寸时，价格会发生变化，并且 li display:block 更改为 none，而 li 的价格与单击尺寸相关的价格正在 display:block now 。我想从 li 获取值，它是 display:block 但它说 undefined 。谁能帮我解决这个问题我的代码是

```
 $(document).on("click", ".sizes li", function() {
 if ($('.sizes-list li').is(':visible'))
 {
 var price=$(this).find('dd').html();
 alert(price);
 }
 }); 
```

尺寸列表 ul 的 li 标记

```
<ul class="sizes-list">
<li style="display:block"><dd>$7</dd></li>
<li><dd>$8</dd></li>
<li><dd>$9</dd></li>
</ul> 
```

用于大小 ul 的 li 标记（在大小按钮上）

```
<ul class="sizes">
<li><a href="#">Small</dd></a>
<li><a href="#">Medium</dd></a>
<li><a href="#">Large</dd></a>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:09:45.243

在 jsfiddle 上考虑这个：http: [//jsfiddle.net/bjryT/4/](http://jsfiddle.net/bjryT/4/)

这里有更新的脚本：

```
jQuery("ul.sizes-list li").each(function () {

  if (jQuery(this).css("display") == "block")
  {
    jQuery(this).on("click", function () 
    {
        var price = jQuery(this).find("dd:first").text();
      alert(price);
    });
  }
}); 
```

# qt - Python代码根据请求使用pyqt4更改显示的图像

> ID：14345845
> 
> 赞同：1
> 
> 时间：2013-01-15T20:01:05.700
> 
> 标签：qt, python-2.7, pyqt, pyqt4

我有以下代码使用 pyQt 显示图像：

```
app = QtGui.QApplication(sys.argv)
window = QtGui.QMainWindow()

window.setGeometry(opts.posx, opts.posy, opts.width, opts.height)

pic = QtGui.QLabel(window)
pic.setGeometry(5, 5, opts.width-10, opts.height-10)
pixmap = QtGui.QPixmap(opts.filename)
pixmap = pixmap.scaledToHeight(opts.height)
pic.setPixmap(pixmap)

window.show()
sys.exit(app.exec_()) 
```

我想以类的形式包装这段代码，并能够在运行时设置不同的图像，使用信号、套接字、我真的不知道的线程。我会想象这样的事情：

```
class MyImage(object):
   def __init(self, args):
       some setup code
       self.pic = whatever
   def set_image(self, filename):
       pixmap = QtGui.QPixmap(opts.filename)
       pixmap = pixmap.scaledToHeight(opts.height)
       pic.setPixmap(pixmap) 
```

使用我刚刚调用的原始代码`sys.exit(app.exec_())`，这使代码“冻结”。但我想从不同的运行 python 代码发送一个信号（和一个文件名）。有什么建议可以轻松直接地处理吗？也许覆盖`app.exec_`方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:19:26.593

像这样的东西应该适合你：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

import sip
sip.setapi('QString', 2)
sip.setapi('QVariant', 2)

from PyQt4 import QtGui, QtCore

class ImageChanger(QtGui.QWidget):    
    def __init__(self, images, parent=None):
        super(ImageChanger, self).__init__(parent)        

        self.comboBox = QtGui.QComboBox(self)
        self.comboBox.addItems(images)

        self.layout = QtGui.QVBoxLayout(self)
        self.layout.addWidget(self.comboBox)

class MyWindow(QtGui.QWidget):
    def __init__(self, images, parent=None):
        super(MyWindow, self).__init__(parent)
        self.label = QtGui.QLabel(self)

        self.imageChanger = ImageChanger(images)
        self.imageChanger.move(self.imageChanger.pos().y(), self.imageChanger.pos().x() + 100)
        self.imageChanger.show()
        self.imageChanger.comboBox.currentIndexChanged[str].connect(self.changeImage)

        self.layout = QtGui.QVBoxLayout(self)
        self.layout.addWidget(self.label)

    @QtCore.pyqtSlot(str)
    def changeImage(self, pathToImage):
        pixmap = QtGui.QPixmap(pathToImage)
        self.label.setPixmap(pixmap)

if __name__ == "__main__":
    import sys

    images = [  "/path/to/image/1",
                "/path/to/image/2",
                "/path/to/image/3",
                ]

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    main = MyWindow(images)
    main.show()

    sys.exit(app.exec_()) 
```

# php - 将div的innerhtml连接成字符串变量

> ID：14345853
> 
> 赞同：0
> 
> 时间：2013-01-15T20:01:30.693
> 
> 标签：php

我试图将 div 的 innerhtml 连接到字符串变量中：
游戏变量：

```
$games = ''; 
```

DOMinnerHTML 函数：

```
function DOMinnerHTML($element) 
{ 
    $innerHTML = ""; 
    $children = $element->childNodes; 
    foreach ($children as $child) 
    { 
        $tmp_dom = new DOMDocument(); 
        $tmp_dom->appendChild($tmp_dom->importNode($child, true)); 
        $innerHTML.=trim($tmp_dom->saveHTML()); 
    } 
    return $innerHTML; 
} 
```

ExtractFromType 函数：

```
function ExtractFromType($type)
{
$html = file_get_contents('www.site.com/' .$type);
$dom = new domDocument;
@$dom->loadHTML($html);
$dom->preserveWhiteSpace = false;
$divs = $dom->getElementsByTagName('div');
foreach ($divs as $div) {
if (strpos($div->getAttribute('style'),'MyString') !== false) {

//////
$games = $games.DOMinnerHTML($div);
//////

}
}
} 
```

代码：

```
ExtractFromType('MyType');
echo $games; // = Nothing. 
```

此代码不返回任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:20:26.563

`$games`在全局范围内定义，在`ExctractFromType`. 在函数内部定义它，然后返回值：

```
function ExtractFromType($type) {
  $html = file_get_contents('www.site.com/' .$type);
  $dom = new domDocument;
  @$dom->loadHTML($html);
  $dom->preserveWhiteSpace = false;
  $divs = $dom->getElementsByTagName('div');

  $games = '';
  foreach ($divs as $div) {
    if (strpos($div->getAttribute('style'),'MyString') !== false) {
      $games = $games.DOMinnerHTML($div);
    }
  }
}

echo ExtractFromType('MyType'); 
```

# java - 爪哇。GUI WindowBuilder 通过单击按钮从 JTextField 读取

> ID：14345854
> 
> 赞同：0
> 
> 时间：2013-01-15T20:01:31.753
> 
> 标签：java, swing, search, actionlistener, jtextfield

我正在使用 WindowBuilder，我想问一下如何在文本文件中搜索特定单词，我`JTextField`通过单击`Search`按钮输入该单词？我的程序如下所示：

[图片 http://img252.imageshack.us/img252/1410/39931036.png](http://img252.imageshack.us/img252/1410/39931036.png)

这是我的`JTextField`和`JButton`：

```
private void initialize() {
    frmInformacijaApieMuzikos = new JFrame();
    frmInformacijaApieMuzikos.setResizable(false);
    frmInformacijaApieMuzikos.setIconImage(Toolkit.getDefaultToolkit()
        .getImage(KDVizualizuotas.class.getResource(
        "/lt/kvk/i3_2/kalasnikovas_stanislovas/resources/Sidebar-Music-Blue-icon.png")));
    frmInformacijaApieMuzikos.setTitle("Muzikos stiliai");
    frmInformacijaApieMuzikos.setBounds(100, 100, 262, 368);
    frmInformacijaApieMuzikos.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    txtStilius = new JTextField();
    txtStilius.setBounds(10, 34, 128, 20);
    txtStilius.setColumns(10);

    JButton btnIekoti = new JButton("Ie\u0161koti");
    btnIekoti.setBounds(146, 36, 89, 19);
    btnIekoti.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent e) {
        }
    });
} 
```

我有代码“在文本文件中搜索”，它可以在控制台中使用，但我需要重新制作它：“输入单词到`JTextField`（不在控制台中）并单击搜索按钮（不是输入按钮）来查找它”。我不知道怎么做。

我的代码（您可以跳过最后两个代码）：

```
package lt.kvk.i3_2.kalasnikovas_stanislovas;

import java.util.Scanner;
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

public class Stilius {

    public static void main(String[] args) {

        Scanner input = new Scanner(System.in);

        try {

            FileReader fr = new FileReader("src/lt/kvk/i3_2/kalasnikovas_stanislovas/Stiliai.txt");
            BufferedReader br = new BufferedReader(fr);
            String stiliuSarasas;
            while((stiliuSarasas = br.readLine()) != null) {
                System.out.println(stiliuSarasas);
                }
            fr.close();

          /** String help = "";  
            System.out.println("Iveskite stiliaus pavadinima apie kuri ieskote informacijos (daugiau funkciju - Pagalba)");

            if ("Pagalba".equalsIgnoreCase(help)) { 
                help = input.nextLine();
            Pagalba pagalba = new Pagalba(help);
            }**/

            String kitasStilius = "Taip";       

            while (!"Ne".equalsIgnoreCase(kitasStilius)) {   
                if ("Taip".equalsIgnoreCase(kitasStilius)) {                 
                    System.out.println("Iveskite stiliaus pavadinima apie kuri ieskote informacijos");

                    String stilius = input.nextLine();
                    Veiksmai stiliausPaieska = new Veiksmai(stilius);   

                }
                else if ("Ne".equalsIgnoreCase(kitasStilius)) {

                } 
                else{
                     System.out.println("Neteisingai pasirinkta.");
                }
                System.out.println("Ar norite ieskoti kito stiliaus?");
                System.out.println("Iveskite: Taip or Ne");
                kitasStilius = input.nextLine();
            }
        }
        catch (IOException e) {
            System.out.println("Error:" + e.toString());
        }
     }
} 
```

和其他类

```
package lt.kvk.i3_2.kalasnikovas_stanislovas;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;

public class Veiksmai {

        public Veiksmai(String stilius) throws IOException {
        BufferedReader bf = new BufferedReader(new FileReader("src/lt/kvk/i3_2/kalasnikovas_stanislovas/Miestai.txt"));
        int counter = 0;                
        String line;

        System.out.println("Ieskoma informacija apie " + stilius);
        ArrayList<String> miestuSarasas = new ArrayList<String>();

        String miestas = null;
        while (( line = bf.readLine()) != null){
            if (line.trim().length() == 0) miestas = null;
               else if (miestas == null) miestas = line;
               int indexfound = line.indexOf(stilius);
               if (indexfound > -1) {
                counter++;
                miestuSarasas.add(miestas);
               }                   
        }
        if (counter > 0) {
            System.out.println(stilius + " turi " + counter + " remejus: " + miestuSarasas);  

            try {
                 File file = new File("src/lt/kvk/i3_2/kalasnikovas_stanislovas/Atsakymas.txt");

                    if (!file.exists()) {
                    file.createNewFile();
                }

                FileWriter fw = new FileWriter(file.getAbsoluteFile(), true);
                BufferedWriter bw = new BufferedWriter(fw);
                bw.write(stilius + " turi " + counter + " remejus: " + miestuSarasas+"\n");
                bw.close();
    } 
            catch (IOException e) {
                e.printStackTrace();                
            }
        } else {
            System.out.println("Klaida, nerastas muzikos stilius");
        }
        bf.close();
    }
    public void stabdyti(){

    }
    public void sarasas() throws IOException{
        FileReader fr = new FileReader("src/lt/kvk/i3_2/kalasnikovas_stanislovas/Stiliai.txt");
        BufferedReader br = new BufferedReader(fr);
        String stiliuSarasas;
        while((stiliuSarasas = br.readLine()) != null) {
            System.out.println(stiliuSarasas);
            }
        fr.close();
    }

} 
```

请问你能帮帮我吗？我还是Java的新手。我尝试了很多，但一切都行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:50:22.410

我很久以前做过这个程序，它会`JTextField`自动突出显示单词。希望这会有所帮助：

![在此处输入图像描述](../Images/aef8c3b70763993ec9c75fb756844789.png)

代码：

```
import java.awt.Color;
import java.awt.event.ActionEvent;
import javax.swing.*;
import javax.swing.text.*;
import javax.swing.event.*;
import javax.swing.GroupLayout.*;

public class Stringtext extends JFrame
                       implements DocumentListener {

private JTextField entry;
private JLabel jLabel1;
private JScrollPane jScrollPane1;
private JLabel status;
private JTextArea textArea;

final static Color  HILIT_COLOR = Color.YELLOW;
final static Color  ERROR_COLOR = Color.PINK;
final static String CANCEL_ACTION = "cancel-search";

final Color entryBg;
final Highlighter hilit;
final Highlighter.HighlightPainter painter;

public Stringtext() {
    initComponents();
  /*code to put text from a file
    InputStream in = getClass().getResourceAsStream("file2.txt");
    try {
        textArea.read(new InputStreamReader(in), null);
    } catch (IOException e) {
        e.printStackTrace();
    }
  */
    textArea.setText("hello Mr! please try to post an SSCCE next time otherwise don't you DARE to...");
    hilit = new DefaultHighlighter();
    painter = new DefaultHighlighter.DefaultHighlightPainter(HILIT_COLOR);
    textArea.setHighlighter(hilit);

    entryBg = entry.getBackground();
    entry.getDocument().addDocumentListener(this);

    InputMap im = entry.getInputMap(JComponent.WHEN_FOCUSED);
    ActionMap am = entry.getActionMap();
    im.put(KeyStroke.getKeyStroke("ESCAPE"), CANCEL_ACTION);
    am.put(CANCEL_ACTION, new CancelAction()); 

    }

  private void initComponents() {
    entry = new JTextField();
    textArea = new JTextArea();
    status = new JLabel();
    jLabel1 = new JLabel();

    setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    setTitle("TextFieldDemo");

    textArea.setColumns(20);
    textArea.setLineWrap(true);
    textArea.setRows(5);
    textArea.setWrapStyleWord(true);
    textArea.setEditable(true);
    jScrollPane1 = new JScrollPane(textArea);

    jLabel1.setText("Enter text to search:");

    GroupLayout layout = new GroupLayout(getContentPane());
    getContentPane().setLayout(layout);

ParallelGroup hGroup = layout.createParallelGroup(GroupLayout.Alignment.LEADING);
SequentialGroup h1 = layout.createSequentialGroup();
ParallelGroup h2 = layout.createParallelGroup(GroupLayout.Alignment.CENTER);

h1.addContainerGap();

h2.addComponent(jScrollPane1, GroupLayout.Alignment.LEADING, GroupLayout.DEFAULT_SIZE, 450, Short.MAX_VALUE);
h2.addComponent(status, GroupLayout.Alignment.LEADING, GroupLayout.DEFAULT_SIZE, 450, Short.MAX_VALUE);

SequentialGroup h3 = layout.createSequentialGroup();
h3.addComponent(jLabel1);
h3.addPreferredGap(LayoutStyle.ComponentPlacement.RELATED);
h3.addComponent(entry, GroupLayout.DEFAULT_SIZE, 321, Short.MAX_VALUE);

h2.addGroup(h3);

h1.addGroup(h2);

h1.addContainerGap();

hGroup.addGroup(GroupLayout.Alignment.TRAILING, h1);

layout.setHorizontalGroup(hGroup);

ParallelGroup vGroup = layout.createParallelGroup(GroupLayout.Alignment.LEADING);

SequentialGroup v1 = layout.createSequentialGroup();

v1.addContainerGap();

ParallelGroup v2 = layout.createParallelGroup(GroupLayout.Alignment.BASELINE);
v2.addComponent(jLabel1);
v2.addComponent(entry, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE);

v1.addGroup(v2);
v1.addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED);
v1.addComponent(jScrollPane1, GroupLayout.DEFAULT_SIZE, 233, Short.MAX_VALUE);
v1.addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED);
v1.addComponent(status);
v1.addContainerGap();

//Add the group v1 to the group vGroup
vGroup.addGroup(v1);
//Create the vertical group
layout.setVerticalGroup(vGroup);
pack();
   }

   public void search() {
    hilit.removeAllHighlights();

    String s = entry.getText();

    if (s.length() <= 0) {
        message("Nothing to search");
        return;
      }

    String content = textArea.getText();

    int index = content.indexOf(s, 0);
    if (index >= 0) {   // match found
        try {
            int end = index + s.length();
            hilit.addHighlight(index, end, painter);
            textArea.setCaretPosition(end);
            entry.setBackground(entryBg);
            message("'" + s + "' found. Press ESC to end search");
        } catch (BadLocationException e) {
            e.printStackTrace();
        }
    } else {
        entry.setBackground(ERROR_COLOR);
        message("'" + s + "' not found. Press ESC to start a new search");
    }
   }

  void message(String msg) {
    status.setText(msg);
   }

   public void insertUpdate(DocumentEvent ev) {
    search();
   }

  public void removeUpdate(DocumentEvent ev) {
    search();
   }

   public void changedUpdate(DocumentEvent ev) {
   }

  class CancelAction extends AbstractAction {
    public void actionPerformed(ActionEvent ev) {
        hilit.removeAllHighlights();

        entry.setText("boo");
        entry.setBackground(entryBg);
    }
   }

   public static void main(String args[]) {

SwingUtilities.invokeLater(new Runnable() {
        public void run() {

            UIManager.put("swing.boldMetal", Boolean.FALSE);
    new Stringtext().setVisible(true);
        }
    });
   }
  } 
```

# android - 同时选中单选按钮

> ID：14345859
> 
> 赞同：0
> 
> 时间：2013-01-15T20:01:45.093
> 
> 标签：android, radio-button, radio-group

我正在使用以下代码在运行时创建一个带有单选按钮（来自枚举）的单选组。

```
RadioGroup radioGroup = new RadioGroup(this);

List<LocationTypeEnum> warningTypes = preferences.getWarningTypes();
for (LocationTypeEnum enumElement : warningTypes) {
    RadioButton radio = new RadioButton(this);
    radio.setText(enumElement.toString());

    //Check one specific radio by default
        radio.setChecked(enumElement.intValue == userDefinedLocation.getType().intValue);

    radioGroup.addView(radio, new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT));
} 
```

当谈到屏幕并且我尝试更改收音机时，这两个选项都保持选中状态：

![在此处输入图像描述](../Images/de9a95e9f8ac55ad9aafbf7dcea520af.png)

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T22:05:46.573

找到了答案。**在将 RadioButton 设置为选中之前**，您必须将 RadioButton 添加到 RadioGroup ，否则单选组会丢失。接下来，正确的代码。

```
 RadioGroup radioGroup = new RadioGroup(this);

    List<LocationTypeEnum> warningTypes = preferences.getWarningTypes();
    for (LocationTypeEnum enumElement : warningTypes) {
        RadioButton radio = new RadioButton(this);
        radio.setText(enumElement.toString());

        //First, add the radio to the group
        radioGroup.addView(radio, new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT));

        //Only after that you can check it.
        radio.setChecked(enumElement.intValue == userDefinedLocation.getType().intValue);

    } 
```

听起来像一个错误，对我来说。感谢[http://code.google.com/p/android/issues/detail?id=1772](http://code.google.com/p/android/issues/detail?id=1772)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:11:54.897

不知道如何评论要求您发布您的布局 .xml 文件。确保您还将它们分组到您的 xml 文件中，如下所示：

```
<RadioGroup
        android:id="@+id/radioSex"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <RadioButton
            android:id="@+id/radioMale"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/radio_male" 
            android:checked="true" />

        <RadioButton
            android:id="@+id/radioFemale"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/radio_female" />

    </RadioGroup> 
```

# c# - 聊天服务应用

> ID：14345860
> 
> 赞同：1
> 
> 时间：2013-01-15T20:01:46.043
> 
> 标签：c#, sockets, tcp

我正在为游戏制作聊天服务，

我正在使用 TCP 侦听器和客户端获取帐户信息，某种登录服务。我想知道我是否可以让客户端连接到服务器，检查他是否仍然在线，如果他有新消息，请继续向他发送消息。

我已经尝试为登录队列制作一个套接字列表，但是一旦我接受了一个新的套接字，它就会断开前一个套接字与服务器的连接。

```
byte[] usernameByte = new byte[100];
int usernameRecieved = s.Receive(usernameByte);
//guiController.setText(System.DateTime.Now + " Recieved Login...");

byte[] passByte = new byte[100];
int passRecieved = s.Receive(passByte);
//guiController.setText(System.DateTime.Now + " Recieved Password...");

string username = "";
string password = "";

for (int i = 0; i < usernameRecieved; i++)
     username += (Convert.ToChar(usernameByte[i]));

for (int i = 0; i < passRecieved; i++)
     password += (Convert.ToChar(passByte[i]));

if (DomainController.getInstance().checkAccount(username, password))
{
    ASCIIEncoding asen = new ASCIIEncoding();
    s.Send(asen.GetBytes("true"));
    s.Send(asen.GetBytes("U are succesfully logged in, press enter to continue"));
    guiController.setText(serverName,System.DateTime.Now+"");
    guiController.setText(serverName, "Sent Acknowledgement - Logged in");
}
else
{
    ASCIIEncoding asen = new ASCIIEncoding();
    s.Send(asen.GetBytes("false"));
    s.Send(asen.GetBytes("U are NOT logged in, press enter to continue"));
    guiController.setText(serverName, System.DateTime.Now + "");
    guiController.setText(serverName, "\nSent Acknowledgement - Not logged in");
} 
```

这是我目前用来检查用户发送给我的帐户信息的代码。在我发送这个之后，用户断开了连接，我继续下一个。

我曾尝试制作 1 个单独的套接字列表并一个一个地处理它们，但由于前一个套接字的连接断开，因此失败了，即使它是 2 台不同的机器尝试连接。

有没有人有解决方案/保存套接字的方法，我可以用它来使程序保持所有连接处于活动状态？所以我可以从用户 1 向用户 2 发送消息，并且只使用他们连接的套接字？还是每次他们建立连接时我都需要添加一个ID？

## 编辑

客户端代码：（这只是一个测试客户端）

```
while (true)
{
TcpClient tcpclnt = new TcpClient();
Console.WriteLine("Connecting.....");
tcpclnt.Connect("xx.xxx.xxx.xx", 26862);
// use the ipaddress as in the server program

while(!(checkResponse(tcpclnt.GetStream())))
{
     Thread.Sleep(1000);
}

Console.WriteLine("Connected");

Console.Write("Enter the string to be transmitted : ");

String str = Console.ReadLine();
if (str == "")
{
    str = " ";
}

Stream stm = tcpclnt.GetStream();

ASCIIEncoding asen = new ASCIIEncoding();
byte[] ba = asen.GetBytes(str);

Console.WriteLine("Transmitting.....");

stm.Write(ba, 0, ba.Length);

Console.Write("Enter the string to be transmitted : ");

String str2 = Console.ReadLine();
if (str2 == "")
{
   str2 = " ";
}

Stream stm2 = tcpclnt.GetStream();

ASCIIEncoding asen2 = new ASCIIEncoding();
byte[] ba2 = asen2.GetBytes(str2);

Console.WriteLine("Transmitting.....");

stm.Write(ba2, 0, ba2.Length);
if (str == "false")
{
    blijvenWerken = false;
}
byte[] bb = new byte[100];
int k = stm.Read(bb, 0, 100);

for (int i = 0; i < k; i++)
Console.Write(Convert.ToChar(bb[i]));

byte[] bb2 = new byte[100];
int k2 = stm.Read(bb2, 0, 100);
Console.Write("\n");
for (int i = 0; i < k2; i++)
Console.Write(Convert.ToChar(bb2[i]));

Console.WriteLine("\n");

tcpclnt.Close();
Thread.Sleep(1000);
} 
```

服务器获取套接字：这段代码在登录服务器上，因为我每次只能接受 1 个套接字以保持连接处于活动状态，所以我将 queueCount 设置为最大 1。我希望能够列出我接受添加到用户帐户的套接字。

```
while (loginServerOn)
{
    if (queueCount < 1)
    {
        if (loginServer.getLoginListener().Pending())
        {
            loginQueue.Add(loginServer.getSocket());
            ASCIIEncoding asen = new ASCIIEncoding();
            Socket s = loginQueue.First();
            try
            {
                s.Send(asen.GetBytes("true"));
                queueCount++;
            }
            catch
            {
                loginQueue.Remove(s);
            }
        }
    }
} 
```

返回接受的套接字的函数。

```
public Socket getSocket()
{
    return myList.AcceptSocket();
} 
```

## 编辑：问题的本质

我想将收到的 socked 或客户端添加到我的 Account 对象，因此每个连接都有一个与其链接的 Account，当我想向某个帐户发送消息时，它应该向绑定到该帐户的 socked 或客户端发送消息，你能帮助/告诉我如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:50:13.083

这仍然是 c# 和套接字，但我的方法与你的不同。

我提出了“connectedCleint”的概念，其目的与您所说的帐户类似。

我有一个名为 ServerTerminal 的类，它负责接受和顶级管理套接字连接。在这我有：

```
 public Dictionary<long, ConnectedClient> DictConnectedClients =
        new Dictionary<long, ConnectedClient>(); 
```

所以这是我的套接字句柄索引的连接客户端列表。

要接受连接，我有一个例程：

```
public void StartListen(int port)
    {
        socketClosed = false;
        IPEndPoint ipLocal = new IPEndPoint(IPAddress.Any, port);

        listenSocket = new Socket(AddressFamily.InterNetwork,
            SocketType.Stream, ProtocolType.Tcp);

        //bind to local IP Address...
        //if ip address is allready being used write to log
        try
        {
            listenSocket.Bind(ipLocal);
        }
        catch (Exception excpt)
        {
            // Deal with this.. write your own log code here ?
            socketClosed = true;

            return;
        }
        //start listening...

        listenSocket.Listen(100); // Max 100 connections for my app

        // create the call back for any client connections...
        listenSocket.BeginAccept(new AsyncCallback(OnClientConnection), null);

    } 
```

因此，当客户端连接时，它会触发：

```
private void OnClientConnection(IAsyncResult asyn)
    {
        if (socketClosed)
        {
            return;
        }

        try
        {
            Socket clientSocket = listenSocket.EndAccept(asyn);

            ConnectedClient connectedClient = new ConnectedClient(clientSocket, this, _ServerTerminalReceiveMode);

            //connectedClient.MessageReceived += OnMessageReceived;
            connectedClient.Disconnected += OnDisconnection;
            connectedClient.dbMessageReceived += OndbMessageReceived;

            connectedClient.ccSocketFaulted += ccSocketFaulted;

            connectedClient.StartListening();

            long key = clientSocket.Handle.ToInt64();
            if (DictConnectedClients.ContainsKey(connectedClient.SocketHandleInt64))
            {
                // Already here - use your own error reporting..
            }

            lock (DictConnectedClients)
            {
                DictConnectedClients[key] = connectedClient;
            }

            // create the call back for any client connections...
            listenSocket.BeginAccept(new AsyncCallback(OnClientConnection), null);

        }
        catch (ObjectDisposedException excpt)
        {
            // Your own code here..
        }
        catch (Exception excpt)
        {
            // Your own code here...
        }

    } 
```

这对您来说至关重要的部分是：

```
 // create the call back for any client connections...
            listenSocket.BeginAccept(new AsyncCallback(OnClientConnection), null); 
```

这将设置服务器终端以接收新连接。

编辑：减少我的连接客户端的版本：

```
public class ConnectedClient
{
    private Socket mySocket;
    private SocketIO mySocketIO;

    private long _mySocketHandleInt64 = 0;

    // These events are pass through; ConnectedClient offers them but really
    // they are from SocketIO

    public event TCPTerminal_ConnectDel Connected
    {
        add
        {
            mySocketIO.Connected += value;
        }
        remove
        {
            mySocketIO.Connected -= value;
        }
    }

    public event TCPTerminal_DisconnectDel Disconnected
    {
        add
        {
            mySocketIO.Disconnected += value;
        }
        remove
        {
            mySocketIO.Disconnected -= value;
        }
    }

    // Own Events

    public event TCPTerminal_TxMessagePublished TxMessageReceived;

    public delegate void SocketFaulted(ConnectedClient cc);
    public event SocketFaulted ccSocketFaulted;

    private void OnTxMessageReceived(Socket socket, TxMessage myTxMessage)
    {
     // process your message
    }

    private void OnMessageSent(int MessageNumber, int MessageType)
    {
    // successful send, do what you want..
    }

    public ConnectedClient(Socket clientSocket, ServerTerminal ParentST)
    {
        Init(clientSocket, ParentST, ReceiveMode.Handler);
    }

    public ConnectedClient(Socket clientSocket, ServerTerminal ParentST, ReceiveMode RecMode)
    {
        Init(clientSocket, ParentST, RecMode);
    }

    private void Init(Socket clientSocket, ServerTerminal ParentST, ReceiveMode RecMode)
    {
        ParentServerTerminal = ParentST;
        _myReceiveMode = RecMode;

        _FirstConnected = DateTime.Now;
        mySocket = clientSocket;
        _mySocketHandleInt64 = mySocket.Handle.ToInt64();
        mySocketIO = new SocketIO(clientSocket, RecMode);

        // Register for events
        mySocketIO.TxMessageReceived += OnTxMessageReceived;
        mySocketIO.MessageSent += OnMessageSent;
        mySocketIO.dbMessageReceived += OndbMessageReceived;

    }

    public void StartListening()
    {
        mySocketIO.StartReceiving();
    }

    public void Close()
    {
        if (mySocketIO != null)
        {
            mySocketIO.Close();
            mySocketIO = null;
        }

        try
        {
            mySocket.Close();
        }
        catch
        {
            // We're closing.. don't worry about it
        }
    }

    public void SendMessage(int MessageNumber, int MessageType, string Message)
    {
        if (mySocket != null && mySocketIO != null)
        {
            try
            {
                mySocketIO.SendMessage(MessageNumber, MessageType, Message);
            }
            catch
            {
                // mySocketIO disposed inbetween check and call
            }
        }
        else
        {
            // Raise socket faulted event
            if (ccSocketFaulted != null)
                ccSocketFaulted(this);
        }
    }

} 
```

}

一些有用的链接：

这是我开始的地方：http: [//vadmyst.blogspot.com.au/2008/01/how-to-transfer-fixed-sized-data-with.html](http://vadmyst.blogspot.com.au/2008/01/how-to-transfer-fixed-sized-data-with.html)

[http://vadmyst.blogspot.com.au/2008/03/part-2-how-to-transfer-fixed-sized-data.html](http://vadmyst.blogspot.com.au/2008/03/part-2-how-to-transfer-fixed-sized-data.html)

和..

[C# 套接字和多线程](https://stackoverflow.com/questions/12417345/c-sharp-sockets-and-multithreading/12417497#12417497)

[导致连接的套接字在 .BeginReceive 之后立即接受新消息？](https://stackoverflow.com/questions/13709801/cause-a-connected-socket-to-accept-new-messages-right-after-beginreceive/13713426#13713426)

[http://nitoprograms.blogspot.com.au/2009/04/tcpip-net-sockets-faq.html](http://nitoprograms.blogspot.com.au/2009/04/tcpip-net-sockets-faq.html)

[http://www.codeproject.com/Articles/83102/C-SocketAsyncEventArgs-High-Performance-Socket-Cod](http://www.codeproject.com/Articles/83102/C-SocketAsyncEventArgs-High-Performance-Socket-Cod)

我现在不能发布我的整个解决方案；我需要调试的服务器代码存在缺陷；另外，有些部分我的雇主可能不想发表。但是我的代码基于 Vadym 对可变长度消息的处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T22:37:57.453

当服务器准备好接受 TCP 连接时，它会创建一个新的 TCP 套接字，将其 Bind() 绑定到端口并使用 Listen() 方法。当连接请求进来时，Listen() 方法返回一个新的套接字，服务器和客户端使用该套接字进行通信。此时，服务器和客户端可以使用 Send() 和 Receive() 来回传递数据。如果客户端断开连接，则服务器的 Receive() 以 0 字节数据终止。

如果您想在接受第一个连接后等待另一个连接请求（即，当您与第一个客户端交互时），可以这样做。此时，您需要使用诸如线程或异步方法之类的东西，以便您可以处理多个连接。基本上，您将能够从您的侦听套接字接受（）连接请求。

麦克风

# python - 将字符串转换为整数，然后在带有字符串的列表中对它们进行排序

> ID：14345861
> 
> 赞同：0
> 
> 时间：2013-01-15T20:01:47.320
> 
> 标签：python

我有以下列表，我需要从最大到最小的名称和数字对它们进行排序。

```
['joe:  5', 'ed:  9', 'joe:  7', 'ed:  8'] 
```

我有以下问题：

1.  将数字从字符串转换为整数以对其进行排序。
2.  使用正确的字符串对它们进行排序。

所以我的最终结果应该是这样的：

```
['ed:  9', 'ed:  8', 'joe:  7', 'joe:  5'] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T20:04:15.073

```
>>> lis=['joe:  5', 'ed:  9', 'joe:  7', 'ed:  8']

>>> sorted(lis,key=lambda x:int(x.split()[-1]),reverse=True)
>>> ['ed:  9', 'ed:  8', 'joe:  7', 'joe:  5'] 
```

`str.split`您可以使用（如下所示）获取每个列表项中的整数，然后使用该整数对列表进行排序：

```
>>> int(lis[0].split(":")[1])
>>> 5

#or  

>>> int(lis[0].split()[1]) 
>>> 5 
```

# jquery - jQuery去抖动功能没有触发

> ID：14345864
> 
> 赞同：1
> 
> 时间：2013-01-15T20:01:50.457
> 
> 标签：jquery, throttling

我试图让我的搜索建议元素在最后一次击键后 300 毫秒触发 ajax 调用，这里是 jQuery：

```
$(document).ready(function(){
$('.textSearch').keyup($.debounce(searchSuggest() {

}, 300)); 
```

我已经测试了 Ajax 函数本身，如果我只是将 onkeyup="searchSuggest()" 添加到具有 textSearch 类的文本输入中，它就可以正常工作。但是使用我在一些谷歌搜索中发现的这个去抖功能，它不会触发任何东西。帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T21:14:35.607

它应该是这样的：

```
$(document).ready(function(){
$('.textSearch').keyup( $.debounce(300, seatchSuggest) ); 
```

# ios - 子类化 UIImageView 并添加 UIControl

> ID：14345869
> 
> 赞同：0
> 
> 时间：2013-01-15T20:02:03.187
> 
> 标签：ios, objective-c, uiimageview, autolayout, nslayoutconstraint

我正在尝试对 UIImageView 进行子类化以向其添加 UIControl，以便我知道何时选择它：

```
-(id)initWithSize:(CGSize)size OffImage:(UIImage *)offImage onImage:(UIImage *)onImage
{
    if (self) {
        [self setTranslatesAutoresizingMaskIntoConstraints:NO];
        self.userInteractionEnabled = TRUE;

        [self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:[self(80)]"
                                                                     options:0
                                                                     metrics:@{@"WIDTH" : [NSNumber numberWithFloat:size.width]}
                                                                       views:NSDictionaryOfVariableBindings(self)]];

        [self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:[self(90)]"
                                                                     options:0
                                                                     metrics:@{@"HEIGHT" : [NSNumber numberWithFloat:size.height]}
                                                                       views:NSDictionaryOfVariableBindings(self)]];

        self.offImage = offImage;
        self.onImage = onImage;
        self.selected = FALSE;

        UIControl *control = [[UIControl alloc] init];
        [control setTranslatesAutoresizingMaskIntoConstraints:NO];
        self.control = control;

        [self addSubview:control];

        [self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[control]|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(control)]];
        [self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[control]|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(control)]];

    }

    return self;
} 
```

当我尝试添加约束以使 UIControl 与子类 UIImageView 的大小相同时，我收到一条错误消息，提示 self.control 没有超级视图：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Unable to parse constraint format: 
Unable to interpret '|' character, because the related view doesn't have a superview 
H:|[control]| 
            ^' 
```

如果我通过创建一个 UIImageView 来做同样类型的事情，然后创建一个 UIControl 并且`[imageView addsubview:control]`它工作得很好。为什么当我尝试将相同的代码添加到`init`方法时它会崩溃？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:22:34.237

你是如何创建你的 imageView 子类对象的？在这段代码中没有 [Super init..]

# c# - 具有太多参数的构造函数

> ID：14345870
> 
> 赞同：1
> 
> 时间：2013-01-15T20:02:09.643
> 
> 标签：c#, oop, constructor

我们有一个`Transaction`负载很重的类；如此加载，以至于我最初最终将近 20 个参数传递给`ctor`. 提取了几个值对象后，还剩下12个参数，我觉得还是太多了。

我将如何避免这种情况？我认为将参数传递给构造函数是合理的，因为它们都是必需的，我想明确说明。我也喜欢如果我添加一个属性，我可以将它添加到`ctor`并让我的编译器找到它破坏的地方，而不必依赖测试本身。我不认为对象初始化器或构建器对这个问题有任何好处。在接下来的几天里，哪些论点属于同一类，并且可以组合起来，可能会变得更加明显。

```
public class MyEntity() 
{
    public MyEntity(ValueType prop2, ValueType prop3, ...) 
    {
        Id = Guid.NewGuid();
        Prop2 = prop2;
        Prop3 = prop3;
        ...
    }

    public Guid Id { get; private set; }

    public ValueType Prop2 { get; private set; }

    public ValueType Prop3 { get; private set; }

    public ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:09:45.110

您确定所有参数都是必需的吗？“必需”这个词具有欺骗性，例如，编译器可能会强制我提供一个字符串参数，但它不能强制我提供一个非 null 或空的值。

真正强制提供有效数据的唯一方法是在使用时对其进行验证。有时这必须在构造函数中，例如一个类，它包装了一些只有在初始化时才有意义的东西，比如一个 I/O 对象。但是，通常允许调用代码以任何旧方式设置属性，然后在需要它们的方法调用中验证它们的值就足够了。

我有点啰嗦。我的观点是，不要将构造函数参数作为向类提供初始化数据的唯一方法。除了简单的属性之外，它们几乎没有提供额外的编译器保护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T00:49:43.313

当您在用户或系统界面中输出完整的交易详细信息时，您将需要所有部分。这不太可能帮助您找到拆分。

但是，看看您的内部处理 - 是否存在您只使用事务中的一部分字段的情况？是否存在您在交易中传递但仅使用其中 4 个字段的地方？如果您确实总是使用所有字段，那么请将它们保存在一个对象中。

在银行交易的情况下，我会考虑按照以下方式进行拆分：-

*   钱从哪里来
*   钱去哪儿了
*   资金是如何转移的——使用了哪种支付工具或设施
*   资金被转移的原因 - 参考编号等
*   金额和币种
*   日期
*   交易状态

（显然这取决于您的确切域）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T20:12:50.440

将参数封装在结构体中，然后将结构体传递进去怎么样？

```
public struct ParamsStruct
{
    Type1 param1;
    Type2 param2;
    ...
}

public void Method(ParamsStruct p)
{
    ...
}

public void Main(String[] args)
{
    ParamsStruct p;
    p.param1 = ...
    p.param2 = ...
    Method(p);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T20:35:38.517

```
public class MyEntity() 
{
    public ValueType Prop1 { get; set; }

    public ValueType Prop2 { get; set; }

    // And so on...

    public MyEntity() 
    {
        Id = Guid.NewGuid();
    }
} 
```

然后：

```
MyEntity entity = new MyEntity();
entity.Prop1 = prop1;
entity.Prop2 = prop2;
// And so on... 
```

您最终可以考虑两种不同的设计方法：

*   [本质](http://www.hillside.net/plop/plop98/final_submissions/P10.pdf) 模式。
*   流畅的[界面](http://java.dzone.com/news/factories-builders-and-fluent-) 模式。

# sql-server - SQL Server 2008 中的备份和还原导致一些数据丢失

> ID：14345871
> 
> 赞同：2
> 
> 时间：2013-01-15T20:02:13.057
> 
> 标签：sql-server, sql-server-2008

大约一年半前，我们开发并交付了一个数据库驱动的应用程序。在此期间，他们备份了数据库，重新安装了软件并恢复了数据库几次。他们还向我们发送了几次他们的数据库，以对数据库结构进行一些更新。他们使用了该软件的内置备份和恢复功能。该软件使用 SMO（SQl 服务器管理对象）来执行备份/恢复操作。

他们现在声称他们的一些数据在最近的备份和恢复过程中丢失了。

这样的索赔是可能的还是只是他们的数据输入错误？

我已经手动检查了他们的数据库，并且他们添加的数据不存在。

有没有关于 SMO 错误的报告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T23:05:59.113

备份和还原是 SQL Server 中的关键功能。他们总是，总是，总是一致地备份数据库（时间点）。您*不能*以丢失部分数据或引入其他不一致的方式进行备份或恢复。SQL Server 总是通过错误消息阻止您执行此操作。

（数据丢失可能的神话来自其他 RDBMS，例如 MySQL，几年前备份是一个挑战）。

问题出在其他地方：在数据库上执行的 DML 中。

# jetty - 码头 HttpParser 完整

> ID：14345872
> 
> 赞同：17
> 
> 时间：2013-01-15T20:02:20.113
> 
> 标签：jetty

我在日志文件中收到这些警告：

```
WARN  2013-01-15 00:08:15,550 org.eclipse.jetty.http.HttpParser- HttpParser Full for SCEP@2d0a7424{l(/10.13.61.19:17602)<->r(/10.118.190.35:80),d=true,open=true,ishut=false,oshut=false,rb=false,wb=false,w=true,i=1r}-{AsyncHttpConnection@22e7a7e3,g=HttpGenerator{s=0,h=-1,b=-1,c=-1},p=HttpParser{s=-1,l=2355,c=-3},r=41} 
WARN  2013-01-15 00:08:17,275 org.eclipse.jetty.http.HttpParser- HttpParser Full for SCEP@3e428386{l(/10.13.61.19:17605)<->r(/10.118.190.35:80),d=true,open=true,ishut=false,oshut=false,rb=false,wb=false,w=true,i=1r}-{AsyncHttpConnection@40a77d2a,g=HttpGenerator{s=0,h=-1,b=-1,c=-1},p=HttpParser{s=-5,l=108,c=-3},r=57} 
WARN  2013-01-15 00:09:34,560 org.eclipse.jetty.http.HttpParser- HttpParser Full for SCEP@39c117ad{l(/10.13.61.19:17708)<->r(/10.118.190.35:80),d=true,open=true,ishut=false,oshut=false,rb=false,wb=false,w=true,i=1r}-{AsyncHttpConnection@11c95f6f,g=HttpGenerator{s=0,h=-1,b=-1,c=-1},p=HttpParser{s=-1,l=1940,c=-3},r=522} 
WARN  2013-01-15 00:09:37,185 org.eclipse.jetty.http.HttpParser- HttpParser Full for SCEP@574e9325{l(/10.13.61.19:17722)<->r(/10.118.190.35:80),d=true,open=true,ishut=false,oshut=false,rb=false,wb=false,w=true,i=1r}-{AsyncHttpConnection@6e997c49,g=HttpGenerator{s=0,h=-1,b=-1,c=-1},p=HttpParser{s=-1,l=2675,c=-3},r=101} 
WARN  2013-01-15 00:09:37,281 org.eclipse.jetty.http.HttpParser- HttpParser Full for SCEP@6838d5cb{l(/10.13.61.19:17726)<->r(/10.118.190.35:80),d=true,open=true,ishut=false,oshut=false,rb=false,wb=false,w=true,i=1r}-{AsyncHttpConnection@d9f6b12,g=HttpGenerator{s=0,h=-1,b=-1,c=-1},p=HttpParser{s=-1,l=2641,c=-3},r=4} 
WARN  2013-01-15 00:10:22,723 org.eclipse.jetty.http.HttpParser- HttpParser Full for SCEP@6f282964{l(/10.13.61.19:17805)<->r(/10.118.190.35:80),d=true,open=true,ishut=false,oshut=false,rb=false,wb=false,w=true,i=1r}-{AsyncHttpConnection@44627fa1,g=HttpGenerator{s=0,h=-1,b=-1,c=-1},p=HttpParser{s=-1,l=2211,c=-3},r=61} 
```

有谁知道它们的意思或如何解决它们？我正在使用 jetty-8.1.5.v20120716 。如您所见，它们发生得非常频繁。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-16T22:05:45.480

翻译：请求实体太大。

某些客户端发出过大的请求 URI + 请求标头。这将导致[`413 Request Entity Too Large`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.14)该客户端的 HTTP 响应代码。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-11T21:14:24.390

从 maven-jetty-plugin 得到类似的东西；通过清除主机的所有 cookie 来解决。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-10T06:42:04.227

我在 solr-Query 中遇到了同样的问题，原因是“请求太长”。所以我在**jetty.xml**中添加了一个名称为“requestHeaderSize”的集合，然后问题就解决了。大小取决于您的需求。希望对你有帮助~

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-24T19:55:54.110

我发现此类日志消息的根本原因`(HttpParser Full)`与使用**Kerberos auth**有关。Kerberos 为每个 Active Directory 组添加标头数据。有关详细信息，请参阅[此 Microsoft 支持文章](http://support.microsoft.com/kb/327825)。

# c - 从文本文件 C 中读取

> ID：14345873
> 
> 赞同：2
> 
> 时间：2013-01-15T20:02:25.193
> 
> 标签：c

我有一个 char 变量，其中包含代表考试 ID 的数字（它是 char，因为它必须是 char）。我的文本文件如下所示：

```
5   1   Exam 1 (audit 31.10.)
6   1   Exam 2 (audit 23.10.)
14  1   Lab 01 (audit 21.11.)
16  1   Lab 02 (audit 28.11.)
... 
```

每行中的第一个数字是考试 ID，第二个是该考试的最大分数，行中剩余的文本是考试名称。我需要搜索考试ID匹配的文本，如果匹配，我需要存储最大点数，并将考试名称存储在变量中以备后用。这是我到目前为止所拥有的：

```
char examName[100];
char tmp[100];
int  examID;
int  maxPoint=0;

FILE *fin=fopen("Exams.txt", "r");

while(fgets(tmp, sizeof(char)*100, fin)!=NULL) {
    sscanf(tmp, "%d", &examID);
    if(examID==s.examNum)
        printf("%d", examID);
} 
```

所以我找到了匹配并打印出来，没关系，但我不知道如何阅读第二个数字和考试名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T20:16:07.780

你几乎在那里：

```
sscanf(tmp, "%d %d %[^\n]", &examID, &maxPoint, examName); 
if(examID==s.examNum)
    printf("%d %d %s\n", examID, maxPoint, examName); 
```

`fgets`读取完整的喜欢，然后`sscanf`将其解析为格式字符串显示。因此，如果您需要一个数字，然后是数字，然后是字符串（如本例所示），您可以使用`"%d %d %[^\n]"`

注意：由于`examName`有空格（并且是换行符之前文本文件的列表部分），我们使用否定扫描集告诉`sscanf`“我想要所有内容，直到找到换行符存储为字符串”

* * *

旁注，初始化您的变量：

```
char examName[100] = {'\0'};
char tmp[100] = {'\0'};
int  examID = 0; 
```

# facebook - Facebook FQL 在查询某些 URL 时返回“发生未知错误”

> ID：14345874
> 
> 赞同：3
> 
> 时间：2013-01-15T20:02:26.913
> 
> 标签：facebook, api, url, facebook-fql

在使用 FQL 查询特定 URL 上的共享统计信息时，我突然开始收到错误代码 1 和“发生未知错误”的错误。根据我的记录，这仅在上周大约 2013-01-11 02:43:02 +0000 开始发生。

```
SELECT url, normalized_url, share_count, like_count, comment_count, total_count, click_count FROM link_stat WHERE url IN('http://phobos.apple.com/WebObjects/MZStore.woa/wa/viewSoftware?id=331975235') 
```

这是我用来进行查询的 URL： [http ://api.facebook.com/method/fql.query?format=json&query=SELECT%20url%2C%20normalized_url%2C%20share_count%2C%20like_count%2C% 20comment_count%2C%20total_count%2C%20click_count%20FROM%20link_stat%20WHERE%20url%20IN%28%27http%3A%2F%2Fphobos.apple.com%2FWebObjects%2FMZStore.woa%2Fwa%2FviewSoftware%3Fid%3D331975235%27% 29](http://api.facebook.com/method/fql.query?format=json&query=SELECT%20url%2C%20normalized_url%2C%20share_count%2C%20like_count%2C%20comment_count%2C%20total_count%2C%20click_count%20FROM%20link_stat%20WHERE%20url%20IN%28%27http%3A%2F%2Fphobos.apple.com%2FWebObjects%2FMZStore.woa%2Fwa%2FviewSoftware%3Fid%3D331975235%27%29)

它返回以下 JSON 结果：

```
{

    "error_code": 1,
    "error_msg": "An unknown error occurred",
    "request_args": [
        {
            "key": "method",
            "value": "fql.query"
        },
        {
            "key": "format",
            "value": "json"
        },
        {
            "key": "query",
            "value": "SELECT url, normalized_url, share_count, like_count, comment_count, total_count, click_count FROM link_stat WHERE url IN('http://phobos.apple.com/WebObjects/MZStore.woa/wa/viewSoftware?id=331975235')"
        }
    ]

} 
```

通常，我会一次查询多个 URL，但在这种情况下，我将问题缩小到导致批处理错误的特定 URL。

任何想法可能导致此问题？我假设这是 Facebook 内部的事情，因为它直到上周都运行良好。此外，Facebook 平台错误工具 (https://developers.facebook.com/bugs) 似乎无法正常工作，它会将我送回开发人员主页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-18T11:54:51.227

1.  此查询现在有效，因此错误不可重现

`[{"url":"http:\/\/phobos.apple.com\/WebObjects\/MZStore.woa\/wa\/viewSoftware?id=331975235","normalized_url":"http:\/\/phobos.apple.com\/WebObjects\/MZStore.woa\/wa\/viewSoftware?id=331975235","share_count":6389,"like_count":3383,"comment_count":262,"total_count":10034,"click_count":0}]`

2.  错误工具也可以工作

[将来向https://developers.facebook.com/bugs](https://developers.facebook.com/bugs)提交错误

# python - ConfigObj 选项验证

> ID：14345879
> 
> 赞同：1
> 
> 时间：2013-01-15T20:02:39.870
> 
> 标签：python, exception, configobj

我正在使用 ConfigObj 和 Validator 来解析 python 中的配置文件。虽然我非常喜欢这个工具，但我在使用 configSpec 文件进行验证时遇到了麻烦。我正在使用 option() configSpec 类型，该类型强制从受控词汇表中选择值：

```
output_mode = option("Verbose", "Terse", "Silent") 
```

我希望我的代码知道用户何时输入不在 CV 中的选项。根据我的喜好，Validator 似乎只说明了哪个配置键验证失败，但没有说明失败的原因：

```
from configobj import ConfigObj, flatten_errors
from validate import Validator

config = ConfigObj('config.ini', configspec='configspec.ini')
validator = Validator()
results = config.validate(validator)

if results != True:
    for (section_list, key, _) in flatten_errors(config, results):
        if key is not None:
            print 'The "%s" key in the section "%s" failed validation' % (key, ', '.join(section_list))
        else:
            print 'The following section was missing:%s ' % ', '.join(section_list) 
```

该代码片段有效，但密钥验证失败的原因有很多，从不在整数范围内到不在 CV 中。我不想询问密钥名称并根据该密钥的失败情况引发不同类型的异常。是否有更简洁的方法来处理特定类型的验证错误？

长时间的stackoverflow阅读器，第一次海报:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:50:01.113

更新：我认为这是我想做的。关键是 config obj 将错误存储为异常，然后可以针对那些 ValidateError 的子类进行检查。然后，您只需对每个子类进行一次检查，而不是对每个参数值进行一次检查。如果 validate 只是在验证失败时抛出异常可能会更好，但也许你会失去其他功能。

```
self.config = configobj.ConfigObj(configFile, configspec=self.getConfigSpecFile())
validator = Validator()
results = self.config.validate(validator, preserve_errors=True)

for entry in flatten_errors(self.config, results):

   [sectionList, key, error] = entry
   if error == False:
      msg = "The parameter %s was not in the config file\n" % key
      msg += "Please check to make sure this parameter is present and there are no mis-spellings."
      raise ConfigException(msg)

   if key is not None:
      if isinstance(error, VdtValueError):
         optionString = self.config.configspec[key]
         msg = "The parameter %s was set to %s which is not one of the allowed values\n" % (key, self.config[key])
         msg += "Please set the value to be in %s" % optionString
         raise ConfigException(msg) 
```

OptionString 只是一个形式为 option("option 1", "option 2") 的字符串，而不是一个列表，因此为了让它看起来不错，您需要获取 () 中的子字符串。

# .htaccess - 这个 .htaccess 不工作。看不出为什么

> ID：14345881
> 
> 赞同：0
> 
> 时间：2013-01-15T20:02:41.380
> 
> 标签：.htaccess

亲爱的，我在 localhost/demo/ 文件夹中的 .htaccess 中有以下代码

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^(.+)$ index.php?url=$1 [QSA,L] 
```

并且以下行在 httpd.config 上处于活动状态

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

如果我输入 localhost/demo/model 我仍然可以看到和浏览子目录。我想要的只是将所有 URL 重定向到 index.php。你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:18:42.263

如果我正确理解您的问题；

```
RewriteCond %{REQUEST_FILENAME} !-d 
```

...表示如果 URL 指向现有目录，则不重写。删除它，重写应该生效，并且不允许您浏览子目录。

# javascript - 将“id”传递给控制器 到javascript

> ID：14345884
> 
> 赞同：1
> 
> 时间：2013-01-15T20:02:43.320
> 
> 标签：javascript, jquery, regex, asp.net-mvc-4

我有一个 ASP.NET MVC4 应用程序，它使用 jQuery 对同一项目中的 WebApi 控制器进行一些调用。将 ID 传递给控制器​​，`/MyController/123`应在页面加载时显示不同的数据。问题是我不知道如何将该 ID 传递给 jQuery。它本身不是查询字符串参数，所以[这](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)不起作用。我想要的是 URL 中的“123”。有没有一种通用/标准的方法可以做到这一点，而不是仅仅切断 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:12:49.420

您可以将它放在控制器中的 ViewBag 对象中，ViewBag.PassedId = Id，然后在前端使用剃刀或任何视图引擎方法将其放入 javascript 变量中，

```
<script>
var id = @(ViewBag.PassedId);
</script> 
```

或者您可以将其附加到隐藏的表单元素并在那里获取值。但是您会绑定一个对象模型以从控制器传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:31:18.477

我更新了 Jeromy 为我的一个项目链接到的问题中的一个答案：

```
(function ($) {
    //http://stackoverflow.com/questions/901115/how-can-i-get-query-string-values
    //usage $.QueryString["param"]
    $.QueryString = (function (a) {
        if (a == "") return {};
        var b = {};
        for (var i = 0; i < a.length; ++i) {
            var p = a[i].split('=');
            if (p.length != 2) continue;
            b[p[0]] = decodeURIComponent(p[1].replace(/\+/g, " "));
        }
        return b;
    })(window.location.search.substr(1).split('&'));

    $.mvcId = (function (a.toLowerCase()) {
        //usage $.mvcId("Bar"); /Foo/Bar/162 (Gets 162)
        var b = location.href.toLowerCase();
        var c;
        if (a != "") {
            a += "/";
            c = b.lastIndexOf(a);
            if (~c) { // ~ = truthy http://stackoverflow.com/questions/1789945/javascript-string-contains
                b = b.substring(c, b.length);
            }
            else {
                throw "didn't match querystring";
            }
        }
        c = b.lastIndexOf("/");
        var id = b.substring(c + 1, b.length);
            return id;
    });
})(jQuery); 
```

所以用它作为

```
//url is /foo/bar/123
var foo = $.mvcId("bar"); 
```

返回`123`

# c# - C# 向 Microsoft Access 表添加行

> ID：14345886
> 
> 赞同：-2
> 
> 时间：2013-01-15T20:02:47.417
> 
> 标签：c#, ms-access, insert, records

我想将 Excel 文件导入 Access 表。

我有一个第一次运行良好的代码。它正在遍历excel文件的所有工作表，并插入记录。

在第二次，我得到一个例外：

> “表已经存在”

我知道该表已经存在于Access文件中！我想在上面插入更多记录！我不想放下它！

任何人都知道如何解决这个问题？

这是代码：

```
 class Program
{
    static void Main(string[] args)
    {

        string ExcelFiles = System.Configuration.ConfigurationSettings.AppSettings["FilesLocation"];
        string AccessFile = System.Configuration.ConfigurationSettings.AppSettings["AccessFileLocation"];

        string[] files = Directory.GetFiles(ExcelFiles, "*.xlsx");

        foreach (string excelFile in files)
        {

                string[] sheets = ListSheetInExcel(excelFile).ToArray();

                foreach (string sheetName in sheets)
                {

                    ImportSpreadsheet(
                        excelFile,
                        sheetName.Replace("'", ""),
                        "MyTable",
                       AccessFile);

                }

        }

    }

    public static void ImportSpreadsheet(string ExcelfileName, string ExcelsheetName, string AccesstableName, string AccessDatabase)
    {
        OleDbConnectionStringBuilder sbConnection = new OleDbConnectionStringBuilder();
        String strExtendedProperties = String.Empty;
        sbConnection.DataSource = ExcelfileName;
        if (Path.GetExtension(ExcelfileName).Equals(".xls"))//for 97-03 Excel file
        {
            sbConnection.Provider = "Microsoft.Jet.OLEDB.4.0";
            strExtendedProperties = "Excel 8.0;HDR=Yes;IMEX=1";//HDR=ColumnHeader,IMEX=InterMixed
        }
        else if (Path.GetExtension(ExcelfileName).Equals(".xlsx"))  //for 2007 Excel file
        {
            sbConnection.Provider = "Microsoft.ACE.OLEDB.12.0";
            strExtendedProperties = "Excel 12.0;HDR=Yes;IMEX=1";
        }
        sbConnection.Add("Extended Properties", strExtendedProperties);

        using (OleDbConnection conn = new OleDbConnection(sbConnection.ToString()))
        {
            try
            {
                conn.Open();
                using (OleDbCommand cmd = new OleDbCommand())
                {
                    cmd.CommandText = @"SELECT * INTO [MS Access;Database="
                        + AccessDatabase + "].["
                        + AccesstableName + "] FROM ["
                        + ExcelsheetName + "]";

                    cmd.CommandType = CommandType.Text;
                    cmd.Connection = conn;
                    cmd.ExecuteNonQuery(); //THE ERROR OCCURS HERE !!!!!!!!
                }
            }
            catch (DbException ex)
            {
                Console.WriteLine("Exception: {0}\r\n   Stack Trace: {1}", ex.Message, ex.StackTrace);
            }
            finally
            {
                conn.Close();
            }
        }
    }

    public static List<string> ListSheetInExcel(string filePath)
    {
        OleDbConnectionStringBuilder sbConnection = new OleDbConnectionStringBuilder();
        String strExtendedProperties = String.Empty;
        sbConnection.DataSource = filePath;
        if (Path.GetExtension(filePath).Equals(".xls"))//for 97-03 Excel file
        {
            sbConnection.Provider = "Microsoft.Jet.OLEDB.4.0";
            strExtendedProperties = "Excel 8.0;HDR=Yes;IMEX=1";//HDR=ColumnHeader,IMEX=InterMixed
        }
        else if (Path.GetExtension(filePath).Equals(".xlsx"))  //for 2007 Excel file
        {
            sbConnection.Provider = "Microsoft.ACE.OLEDB.12.0";
            strExtendedProperties = "Excel 12.0;HDR=Yes;IMEX=1";
        }
        sbConnection.Add("Extended Properties", strExtendedProperties);

        List<string> listSheet = new List<string>();
        using (OleDbConnection conn = new OleDbConnection(sbConnection.ToString()))
        {
            conn.Open();
            DataTable dtSheet = conn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);

            foreach (DataRow drSheet in dtSheet.Rows)
            {
                if (drSheet["TABLE_NAME"].ToString().Contains("$"))//checks whether row contains '_xlnm#_FilterDatabase' or sheet name(i.e. sheet name always ends with $ sign)
                {
                    listSheet.Add(drSheet["TABLE_NAME"].ToString());
                }
            }
        }
        return listSheet;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:23:22.677

我找到了解决方案。

命令“INSERT INTO”需要创建一个新表。

解决方案是构建一个不需要该命令的命令：

```
 cmd.CommandText = @"INSERT INTO [MS Access;Database="
                        + AccessDatabase + "].["
                        + AccesstableName + "] SELECT * FROM ["
                        + ExcelsheetName + "]"; 
```

# core-data - 比较一张核心数据表中的两列

> ID：14345887
> 
> 赞同：1
> 
> 时间：2013-01-15T20:03:15.103
> 
> 标签：core-data, compare, tableview

我有 1 个表，我需要在其中比较值。如果它们不匹配，则突出显示那些表格视图单元格。

## 表有列

## XXX 年年年

MH_01 MH_02

MH_02 MH_03

MH_04 MH_05

它需要检查的是 row[1]YYYY=row[2] XXX 如果不是，那么它应该连续突出显示该单元格。就像在这个例子中一样，它将突出显示（YYYY-（MH_03）和xxxx（MH_04）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:45:41.350

在模型对象上实现下一个和上一个条目的瞬态属性。然后在模型对象上创建另外两个瞬态属性以返回 NSColor 或显示单元格突出显示所需的任何内容。

然后，您可以在表的数据源中填充 next 和 prev 属性。如果您使用 NSArrayController 作为数据源，您可以轻松地继承 NSArrayController 来为您填充下一个和上一个。

```
-(NSArray *)arrangeObjects:(NSArray *)objects
{
    NSArray * arrangedObjects = [super arrangeObjects:objects];

    NSManagedObject * previousEntry;
    for (NSManagedObject * entry in arrangedObjects)
    {
        [previousEntry setValue:entry forKey:@"nextEntry"];
        [entry setValue:previousEntry forKey:@"prevEntry"];
        previousEntry = entry;
    }

    return arrangedObjects;
} 
```

# java - 使用 dom4j 处理压缩的 XML 文档

> ID：14345890
> 
> 赞同：0
> 
> 时间：2013-01-15T20:03:34.867
> 
> 标签：java, xml, zip, kml, dom4j

具体来说，我使用 dom4j 读取 KML 文档并解析出 XML 中的一些数据。当我只是将字符串形式的 URL 传递给阅读器时，它非常简单并且可以同时处理文件系统 URL 和 Web URL：

```
SAXReader reader = new SAXReader();
Document document = reader.read(url); 
```

问题是，有时我的代码需要处理 KMZ 文档，这些文档基本上只是压缩的 XML (KML) 文档。不幸的是，使用 SAXReader 没有方便的方法来处理这个问题。我找到了各种时髦的解决方案来确定任何给定的文件是否是 ZIP 文件，但是我的代码很快就变得很糟糕——读取流，构建文件，检查开头的“神奇”十六进制字节，提取等

有没有一些快速和干净的方法来处理这个？连接到任何 URL 并在压缩内容时提取内容的更简单方法，否则只需获取 XML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:27:20.440

嗯，KMZDOMLoader 似乎无法处理 web 上的 kmz 文件。kmz 可能是动态加载的，因此它并不总是具有 a) 文件引用或 b) 特定的 .kmz 扩展名——它必须通过内容类型来确定。

我最终做的是构建一个 URL 对象，然后获取协议。我有单独的逻辑来处理本地文件或网络上的文档。然后在每个逻辑块中，我必须确定它是否被压缩。SAXReader read() 方法采用输入流，因此我发现可以为 kmzs 使用 ZipInputStream。

这是我最终得到的代码：

```
private static final long ZIP_MAGIC_NUMBERS = 0x504B0304;
private static final String KMZ_CONTENT_TYPE = "application/vnd.google-earth.kmz";

private Document getDocument(String urlString) throws IOException, DocumentException, URISyntaxException {
        InputStream inputStream = null;
        URL url = new URL(urlString);
        String protocol = url.getProtocol();

        /*
         * Figure out how to get the XML from the URL -- there are 4 possibilities:
         * 
         * 1)  a KML (uncompressed) doc on the filesystem
         * 2)  a KMZ (compressed) doc on the filesystem
         * 3)  a KML (uncompressed) doc on the web
         * 4)  a KMZ (compressed) doc on the web
         */
        if (protocol.equalsIgnoreCase("file")) {
            // the provided input URL points to a file on a file system
            File file = new File(url.toURI());
            RandomAccessFile raf = new RandomAccessFile(file, "r");
            long n = raf.readInt();
            raf.close();

            if (n == KmlMetadataExtractorAdaptor.ZIP_MAGIC_NUMBERS) {
                // the file is a KMZ file
                inputStream = new ZipInputStream(new FileInputStream(file));
                ((ZipInputStream) inputStream).getNextEntry();
            } else {
                // the file is a KML file
                inputStream = new FileInputStream(file);
            }

        } else if (protocol.equalsIgnoreCase("http") || protocol.equalsIgnoreCase("https")) {
            // the provided input URL points to a web location
            HttpURLConnection connection = (HttpURLConnection) url.openConnection();
            connection.connect();

            String contentType = connection.getContentType();

            if (contentType.contains(KmlMetadataExtractorAdaptor.KMZ_CONTENT_TYPE)) {
                // the target resource is KMZ
                inputStream = new ZipInputStream(connection.getInputStream());
                ((ZipInputStream) inputStream).getNextEntry();
            } else {
                // the target resource is KML
                inputStream = connection.getInputStream();
            }

        }

        Document document = new SAXReader().read(inputStream);
        inputStream.close();

        return document;
    } 
```

# jquery - 如何从我的代码中触发 Jquery 中的此事件？

> ID：14345891
> 
> 赞同：-1
> 
> 时间：2013-01-15T20:03:36.993
> 
> 标签：jquery, jquery-selectors, javascript

我想在表单的验证过程中给出这个代码条件.. 如果 ESN 列表文本字段输入值在 1000 到 3000 的范围内，我希望下拉自动选择下面的 STM3，如果数字输入的范围在 5000 和 9000 之间，我希望下拉列表中的 Trackpack 选项在用户例如在文本输入字段上输入 6000 后自动填充，因为它介于 5000 和 9000 之间。

**问：**如何根据条件在文本字段上输入数字后触发下拉菜单，例如数字之间的范围将触发选择标签中的下拉选项之一？

```
<html>
    <head> <title> Form </title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.0/jquery.min.js"></script>
    <script type="text/javascript">
    $(':submit').click(function(e) {
     $(':text').each(function() {
      if($(this).val().length == 0) {
        $(this).css('border', '2px solid red');
        }
    });
    e.preventDefault();
    });

    </script>
    </head>
    <body >
    <form id="provision">
    ESNList:    <input  type="text" id="ESNList" name="ESNList" size="30" /> <br />
    ESN Start:<input type="text" id="ESNStart" name="ESNStart" size="10" /> <br />
    ESN End: <input type="text" id="ESNStart" name="ESNStart" size="10" /> <br />
    UnitName:<input type="text" id="STxName" name="STxName" size="30"  />  <br />  
     Unit Model:   <select name="STxName">
    <option value="stx2">STX2</option>
    <option value="protopak">Protopak</option>
    <option value="stm3" selected>STM3</option>
    <option value="acutec">Acutec</option>
    <option value="mmt">MMT</option>
    <option value="smartone">Trackpack</option>
    <option value="smartoneb" >SmartOneB</option>
    <option value="audi">Acutec</option>
    </select> <br />
    RTU Model Type:
     <select name="rtumodel">
    <option value="globalstar">GlobalStar</option>
    <option value="both">Both</option>
    <option value="comtech">Comtech</option>
    <option value="stmcomtech">STMComtech</option>
    </select> <br />
    <input type="submit" value ="submit"  />
    </form>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:26:58.763

您可以使用 setInterval 函数完成此操作。我建议你在这里做一些阅读：http: [//www.w3schools.com/jsref/met_win_setinterval.asp](http://www.w3schools.com/jsref/met_win_setinterval.asp)

此外，您可以在 jsfiddle 上找到您的解决方案：http: [//jsfiddle.net/PCB5d/](http://jsfiddle.net/PCB5d/)

随后，这里是代码：

```
function checkValues()
{
  ESNList = jQuery("#ESNList").val();
    jQuery("#ddl_StxName").val("stx2");  
  if((ESNList >= 1000) && (ESNList <= 3000))
  {
    jQuery("#ddl_StxName").val("stm3");
  }
  if ((ESNList >= 5000) && (ESNList <= 9000))
  {
    jQuery("#ddl_StxName").val("smartone");
  }
  // you should be able to follow the above and add your own conditions  
}

function checkInput()
{
  jQuery(":text").each(function (){
    if (jQuery(this).val().length == 0)
    {
      jQuery(this).css("border", "2px solid red");
    }
    else
    {
      jQuery(this).css("border", "0");
    }
  });
}
setInterval(function () {checkInput();checkValues();}, 500); 
```

我希望这有帮助

# internet-explorer - 浏览器使用什么启发式方法来缓存未明确设置为可缓存的资源？

> ID：14345898
> 
> 赞同：28
> 
> 时间：2013-01-15T20:04:02.750
> 
> 标签：internet-explorer, google-chrome, firefox, safari, browser-cache

> **13.2.2 启发式过期**
> 
> 由于源服务器并不总是提供明确的过期时间，HTTP 缓存通常会分配启发式过期时间，采用使用其他标头值（例如 Last-Modified 时间）的算法来估计合理的过期时间。HTTP/1.1 规范没有提供特定的算法，但确实对其结果施加了最坏情况的约束。由于启发式过期时间可能会损害语义透明度，因此应谨慎使用，我们鼓励源站服务器尽可能提供明确的过期时间。 [HTTP/1.1 RFC 2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html)

浏览器使用哪些算法来估计合理的过期时间？

理想的答案将涵盖所有主要浏览器，并提供来自源代码或官方博客文章的证据。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-08-06T09:36:07.730

假设我们感兴趣的所有浏览器都是 Internet Explorer 8 或更新版本（例如 IE5 的缓存标头有一些糟糕的行为）。

只有一种基于标准的控制缓存的方法（HTTP/1.1 引入）—— [`Cache-Control`HTTP 标头](https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching#cache-control)。

至少从 1996 年起，IE 就一直在使用退出策略来缓存 HTTPS 内容。

似乎自推出以来，Chrome 已经选择退出 HTTPS（即除非被告知不这样做，否则它将缓存它）。2011 年，Firefox 4（但不是 Safari）切换到 HTTPS 内容的退出缓存。[来源](http://securityevaluators.com/knowledge/case_studies/caching/)。

## 建议

1.  **仅使用 HTTP 标头来控制浏览器缓存**。如果您决定反对这一点，请注意 IE 仅识别在 HTML 中设置的两个缓存控制指令：

    ```
    <META HTTP-EQUIV="Pragma" CONTENT="no-cache">
    <META HTTP-EQUIV="Expires" CONTENT="-1"> 
    ```

    似乎只有前者在 HTTPS 场景中有用。此外，[尝试`Pragma`在 IE](https://support.microsoft.com/kb/222064)中使用时可能会出现问题。最后，[Chrome 忽略了元标记中的缓存指令，](https://bugs.chromium.org/p/chromium/issues/detail?id=2763)进一步降低了它们的实用性。

2.  **不要使用`Expires`标题**。在现代浏览器`Expires`中被`Cache-Control`. `Expires: 0`并且`Pragma: no-cache`在*技术上*是无效的响应标头。是的，它们从一开始就存在，但并非所有现代浏览器（例如 Chrome）都使用它们，它们已被`Cache-Control`.

3.  **标题[`Vary`](http://www.bizcoder.com/the-insanity-of-the-vary-header)是一个雷区**。[旧 IE 中的行为](http://blogs.msdn.com/b/ieinternals/archive/2009/06/17/vary-header-prevents-caching-in-ie.aspx)[方式`Vary`](http://blogs.msdn.com/b/ieinternals/archive/2009/06/17/vary-header-prevents-caching-in-ie.aspx)。[XHR 的表现](http://jakearchibald.com/2014/browser-cache-vary-broken/)[如何`Vary`](http://jakearchibald.com/2014/browser-cache-vary-broken/)。找出细节留给读者作为练习 - 并留下印象最好使用不同的 URL 来处理不同的内容......

4.  **通过设置允许浏览器发出条件请求`ETags`**。 [Etags 允许浏览器进行轻量级检查以查看内容是否已更改](https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching#validating-cached-responses-with-etags)，如果没有更改，它可以避免发出完整请求。

5.  **请注意，有些浏览器刚刚坏了，需要破解**。[IE 8 在下载已被告知不要缓存的文件时可能会遇到问题](http://blogs.msdn.com/b/ieinternals/archive/2009/10/02/internet-explorer-cannot-download-over-https-when-no-cache.aspx)。

## 浏览器缓存算法

*   [铬 49.0.2606.2`HttpResponseHeaders::GetFreshnessLifetimes()`](https://chromium.googlesource.com/chromium/src/+/49.0.2606.2/net/http/http_response_headers.cc#1001)
*   [Firefox HTTP 缓存常见问题解答](https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching_FAQ)，[Firefox 38 ESR`nsHttpResponseHead::ComputeFreshnessLifetime()`](https://github.com/mozilla/gecko-dev/blob/esr38/netwerk/protocol/http/nsHttpResponseHead.cpp#L422)。
*   [Internet Explorer (6+?)](https://support.microsoft.com/kb/234067)，[IE 8+ 中的 HTTPS 缓存](http://blogs.msdn.com/b/ieinternals/archive/2010/04/21/internet-explorer-may-bypass-cache-for-cross-domain-https-content.aspx)，[Internet Explorer 9+](http://blogs.msdn.com/b/ie/archive/2010/07/14/caching-improvements-in-internet-explorer-9.aspx)，[Internet Explorer 9+](http://blogs.msdn.com/b/ieinternals/archive/2010/07/08/technical-information-about-conditional-http-requests-and-the-refresh-button.aspx)。
*   [Webkit (Safari)`computeFreshnessLifetimeForHTTPFamily()`](https://github.com/WebKit/webkit/blob/84fa376ac91afc3088e31206c5ab377e1b470b72/Source/WebCore/platform/network/CacheValidation.cpp#L107)

## 也可以看看

*   [Google 的浏览器缓存建议](https://developers.google.com/speed/docs/insights/LeverageBrowserCaching)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-01-14T08:54:42.470

来自 Chromium 的源代码：[https ://code.google.com/p/chromium/codesearch#chromium/src/net/http/http_response_headers.cc&l=1082&rcl=1421094684](https://code.google.com/p/chromium/codesearch#chromium/src/net/http/http_response_headers.cc&l=1082&rcl=1421094684)

```
 if ((response_code_ == 200 || response_code_ == 203 ||
       response_code_ == 206) && !must_revalidate) {
    // TODO(darin): Implement a smarter heuristic.
    Time last_modified_value;
    if (GetLastModifiedValue(&last_modified_value)) {
      // The last-modified value can be a date in the future!
      if (last_modified_value <= date_value) {
        lifetimes.freshness = (date_value - last_modified_value) / 10;
        return lifetimes;
      }
    }
  } 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-01-15T21:01:23.253

似乎[webkit](https://www.webkit.org/)（*“……Safari 使用的引擎的 OS X 系统框架版本……”*）使用与 Chromium 相同的启发式方法。

以下内容来自[CacheValidation.cpp](https://github.com/WebKit/webkit/blob/c143f645242b0223781df22f3da8b007380eb7ce/Source/WebCore/platform/network/CacheValidation.cpp#L140)：

```
return (creationTime - lastModifiedValue) * 0.1; 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-01-15T11:13:08.440

这篇博文说 Internet Explorer 9 使用`max-age = (DownloadTime - LastModified) * 0.1`：http: [//blogs.msdn.com/b/ie/archive/2010/07/14/caching-improvements-in-internet-explorer-9.aspx](http://blogs.msdn.com/b/ie/archive/2010/07/14/caching-improvements-in-internet-explorer-9.aspx)

这实际上与 Mozilla 相同（这篇文章相当陈旧，我不知道它是否已经改变了）：[https ://developer.mozilla.org/en-US/docs/HTTP_Caching_FAQ](https://developer.mozilla.org/en-US/docs/HTTP_Caching_FAQ)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-16T02:52:51.037

Gecko 估计到期时间为`now + (now - lastModified)/10`，最后我检查了一下。

# visual-studio - 如何在 VS 2012 中调试经典 ASP 应用程序

> ID：14345899
> 
> 赞同：9
> 
> 时间：2013-01-15T20:04:13.343
> 
> 标签：visual-studio, debugging, asp-classic

> **可能重复：**
> [您如何调试经典 ASP？](https://stackoverflow.com/questions/1138175/how-do-you-debug-classic-asp)

*   我在 VS2012 中添加了一个新网站，并将其指向我在 IIS 中创建的虚拟目录。
*   在 IIS 中，我启用了服务器端调试
*   该网站在 IIS 中的端口是 5555
*   在项目属性的 VS 中，我的起始 URL 为 localhost:5555，它运行我的站点
*   项目属性中没有启用调试器（Classic ASP 没有调试器）
*   我在 default.asp 底部包含的文件中设置了一个断点
*   我在没有调试的情况下运行站点（Ctrl-F5）
*   然后我附加到进程（IE10）
*   然后我刷新主页（default.asp）
*   没有命中断点
*   如何让调试器在断点处停止，以便调试此页面？

这是预先存在的代码。我只是想让它工作。没有必要对代码进行评论，除非它是修复问题的错误！

我在这个javascript方法的第一个代码块的顶部附近设置了断点，但它从来没有命中。

```
function declareLogos() {
    <%   ' get logos

    SQL = "SELECT l.LogoFileName, p.SortOrder FROM InrixCustomerLogo l join InrixCustomerLogoPage p on l.LogoCode = p.LogoCode WHERE p.PageFileName = '" & fn & "' AND SortOrder > 0 ORDER BY SortOrder"
    On Error Resume Next
    Set oLOGO = oConn.Execute(SQL)
    logoerror = Err.Number
    On Error Goto 0
    x = 1  ' array counter

    %>

    <% If NOT logoerror Then %>
    <% Do While NOT oLOGO.EOF %>
    i[<% =x %>] = '<% =oLOGO("LogoFileName") %>';
    <% oLOGO.MoveNext : x = x + 1 : Loop %>
    <% End If %>

    imax = <% =x-1 %>;
    ilast = <% =(((x-1)*4)/4) %>;  // <% =(((x-1)*4)/4) %>   this is imax - 1 that is divisible by four
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T01:13:21.417

这看起来像服务器端 asp 构建客户端 javascript 函数？如果将调试器附加到 explorer.exe 是无用的（除非您想调试生成的 JavaScript 函数 - 在这种情况下 F12 IE 开发工具会更容易），您需要将调试器附加到 Inetinfo.exe（iis 进程运行您的服务器端 asp）或 Mtx.exe / w3wp.exe（取决于您的配置和 iis 版本）。

有关详细信息，请参阅以下 msdn 文章：

[http://msdn.microsoft.com/en-us/library/ms241740.aspx](http://msdn.microsoft.com/en-us/library/ms241740.aspx)

还有一篇关于VS2008的类似文章（应该和2012的原理差不多）：

[http://www.codeproject.com/Articles/28792/Debugging-Classic-ASP-VBScript-in-Visual-Studio-20](http://www.codeproject.com/Articles/28792/Debugging-Classic-ASP-VBScript-in-Visual-Studio-20)

# php - 在 HMVC 方法中定位视图文件

> ID：14345905
> 
> 赞同：0
> 
> 时间：2013-01-15T20:04:23.523
> 
> 标签：php, codeigniter, module, hmvc

我正在为我的应用程序使用 codeigniter，并使用 HMVC 方法在此处添加包进行开发：

[https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc)

我有一个为我的视图创建的自定义模板，在我的内容视图中有以下几行：

```
if ((!isset($page_view)) || (is_null($page_view)) || (!file_exists(APPPATH . 'views/backend/' .     $this->cms_template . '/cpanel/pages/' . $page_view . '.php')))
{
    $this->load->view('backend/' . $this->cms_template . '/cpanel/template/page_unknown_view');
}
else
{
    $this->load->view('backend/' . $this->cms_template . '/cpanel/pages/' . $page_view);
} 
```

?>

这在文件夹中有视图时有效，但由于对于这种 HMVC 方法，我的一些视图将位于不同的文件夹中，因此它始终显示为我的未知页面文件。我应该如何修改以使其适用于这种方法。

**编辑：**让我试着改写所有这些。这是我的文件系统...

```
/application/views/backend/{templatename}/cpanel/index_view
/application/views/backend/{templatename}/cpanel/template/(header.php, footer.php, content.php)
/application/modules/users/controllers/users
/application/modules/users/views/users_view 
```

假设用户控制器将 cpanel 视图加载为其加载三个模板页面的主视图页面。作为页眉、页脚和内容页面。在内容页面内部，它执行如上所示的 if 语句。它会发送一个变量，找出要加载的控制器特定视图。在这种情况下，我希望它加载 users_view 文件。因此，使用我的 if 语句，我需要它来确定它是否存在于该模块文件夹中的某个位置。

这有帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:57:43.370

如果您想访问不同的模块视图，您可以通过以下方式访问它：

```
$this->load->view('module_name/view_file_name'); 
```

如果所有模块都需要它，也可以放在主视图，即应用程序视图中

您可以使用以下方法简单地访问它们：

```
$this->load->view('view_file_name'); 
```

从任何模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-16T15:09:51.310

据我了解 OP 问题，它是关于在尝试加载视图文件之前检查它是否存在

例如：在尝试加载模块之前检查模块是否有“my_template.php”文件。

* * *

首先，该`load->view()`函数检查`views`其加载路径中的每个文件夹

给定路径：

*应用程序/
应用程序/模块/xxxxx/
应用程序/模块/yyyyy/*

> `$this->load->view('my_template');`
> 
> `my_template.php`将在所有`views/`文件夹中搜索文件
> 
> *application/views/my_template.php
> application/modules/xxxxx/views/my_template.php
> application/modules/yyyyy/views/my_template.php*

-

> `$this->load->view('my_module/my_template');`
> 
> `my_template.php`将在所有`views/my_modules/`文件夹中搜索文件
> 
> *application/views/my_module/my_template.php
> application/modules/xxxxx/views/my_module/my_template.php
> application/modules/yyyyy/views/my_module/my_template.php*

所以请注意，如果你想通过调用特定模块的视图

`$this->load->view('x_module/my_template');`

您必须在主视图文件夹或模块视图文件夹中创建一个“x_module/”子文件夹：

*   `application/views/x_module/my_template.php`
*   `application/modules/x_module/views/x_module/my_template.php`

**！！注意**：如果多个模块具有相同的子文件夹`views/x_module/`，或者如果您将文件直接放在模块的视图文件夹中，则在视图文件夹中设置具有相同文件名的另一个模块时可能会遇到问题

> `$this->load-views('my_template');`<- 模棱两可
> 
> `application/modules/x_module/views/my_template.php` `application/modules/y_module/views/my_template.php`

-

> `$this->load-views('my_module/my_template');`<- 模棱两可
> 
> `application/modules/x_module/views/my_module/my_template.php` `application/modules/my_module/views/my_template.php`

-

> `$this->load-views('x_module/my_template');`<-晶莹剔透！
> 
> `application/modules/x_module/views/x_module/my_template.php` `application/modules/y_module/views/y_module/my_template.php`

* * *

这就是说，这里的问题是检查加载路径中是否存在模板，因此是 if 语句构造。

我在使用 HMVC & CI 和模块时遇到了这个问题，因为`$this->load->view()`如果文件不存在会引发错误，有时您只想检查文件是否可用而不考虑是否丢失错误。

所以我的解决方案是检查 CI 加载路径中的文件

```
// set the view I want to load->view()
$relative_view_path = 'x_module/my_template.php';

// retrieve an array of the paths loaded by CI
$pack_path = $this->load->get_package_paths( TRUE );

// set the checker to false
$can_load = FALSE;

// loop the loaded paths
foreach( $pack_path as $path )
{
    // Check if the file exists in the path
    // $path has a ending slash !
    if( file_exists( $path.$relative_view_path ) ) $can_load = TRUE; 
}

// and finally 
if( $can_load == TRUE ) $this->load->view($relative_view_path); 
```

希望有帮助

# wordpress - TinyMCE 格式化按钮

> ID：14345906
> 
> 赞同：1
> 
> 时间：2013-01-15T20:04:29.977
> 
> 标签：wordpress, button, tinymce

我在我的网页上使用 Wordpress，现在我决定在那里发布一些关于它的教程和帖子，我只需要一些按钮可以打开一个带有选项的框，我需要使用这些选项制作起始标签，然后选择放结束标记。我在 JS 方面不是很好，所以我只懂一点。

* * *

我发现了这个： [http :](http://return-true.com/2011/12/adding-tinymce-button-to-wordpress-via-plugin-part-2/) [//return-true.com/2011/12/adding-tinymce-button-to-wordpress-via-plugin-part-2/ 使用 ed.selection.setContent 使用 TinyMCE 添加自定义标签](https://stackoverflow.com/questions/5265024/adding-custom-tag-with-tinymce-using-ed-selection-setcontent) 也许我需要仅将这两种解决方案结合起来

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:14:46.193

这可以使用自己的插件来完成。您的插件需要一个按钮，此按钮将触发您必须定义的 tinymce 命令。此命令将打开该框。

开发自己的插件非常简单：[http](http://www.tinymce.com/wiki.php/Creating_a_plugin) : //www.tinymce.com/wiki.php/Creating_a_plugin 您应该从 moxiecode 下载页面获得 tinymce 开发版本。查看使用弹出/模型对话框的插件的插件目录 - 我认为像 searchreplace 插件这样的东西会有所帮助。

# gtkmm - 如何在 Gtk::TreeView 中的行之间放置一条水平线（分隔符）

> ID：14345907
> 
> 赞同：1
> 
> 时间：2013-01-15T20:04:32.070
> 
> 标签：gtkmm, separator, gtktreeview

我正在`gtkmm-2.4`Linux 中使用 GUI 包编写程序。如何将水平线作为 TreeView 行之间的分隔符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:23:52.200

您正在寻找[set_grid_lines](http://developer.gnome.org/gtkmm/stable/classGtk_1_1TreeView.html#a9f6601372b4b0d271669efac7c16ecf9)：

```
someTreeView.set_grid_lines(Gtk::TREE_VIEW_GRID_LINES_HORIZONTAL); 
```

线条的实际外观由当前的 Gtk 主题控制。

# python - Matplotlib 和 django 中看起来很奇怪的图

> ID：14345908
> 
> 赞同：0
> 
> 时间：2013-01-15T20:04:35.907
> 
> 标签：python, django, matplotlib

我从 matplotlib 中看到了一些奇怪的结果，我几乎使用了股票示例将其添加到 Django；

```
def graph(request):
if request.user.is_authenticated():
    user = request.user.first_name
else:
    return redirect('/login')

form = GetGraphData(request.POST or None)
if form.is_valid():

    os.environ['MPLCONFIGDIR'] = "/tmp"
    from matplotlib.backends.backend_agg import FigureCanvasAgg as FigureCanvas
    from matplotlib.figure import Figure
    from matplotlib.dates import DateFormatter

    from_date = form.cleaned_data['chosen_from_date']
    to_date = form.cleaned_data['chosen_to_date']
    graph_property = form.cleaned_data['chosen_property']
    rack = form.cleaned_data['chosen_rack']
    query = "select %s,reading_date from readings where reading_date" \
            " between '%s' and '%s' and pdu_location like '%s%%'" \
            %(graph_property,from_date, to_date, rack)

    results = db.db_query(query)

    if results[0]: 
        fig=Figure()
        fig.clear()
        ax=fig.add_subplot(111)
        x=[]
        for i in results[0]:
            x.append(i[1])
        y=[]
        for i in results[0]:
            y.append(i[0])

        ax.plot_date(x, y, '-')
        ax.xaxis.set_major_formatter(DateFormatter('%Y-%m-%d'))
        ax.set_title(rack)
        ax.set_xlabel("Date")
        ax.set_ylabel(graph_property)
        fig.autofmt_xdate()
        canvas=FigureCanvas(fig)
        response=HttpResponse(content_type='image/png')
        canvas.print_png(response)
        return response
    else:
        error_message = 'There were no results for that query, check' \
                        ' your dates and try again.' 
        return render_to_response('generic_message.html'
                           ,{'message':error_message,'title':'No results'})

template_dict = {'username':user, 'form':form,'view':True}
return render_to_response('get_circuit.html',template_dict) 
```

缩进是正确的，它只是奇怪地粘贴在上面，在 x 轴上，我们最终得到一个日期时间对象列表，在 y 轴上，我们最终得到一个浮点数列表。

我得到下面的图表； ![在此处输入图像描述](../Images/5f98e6ad282adf99aa3af3890b18bb80.png)

您可以看到图表的左侧看起来很奇怪。作为此查询的一部分，有 96 个数据点返回，我还注意到，当 y 轴上有超过 1000 个数据点时，它变得更加疯狂。

有人有什么建议来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:18:46.340

看起来你的点不是线性绘制的。我相信按日期订购应该可以解决它

`order by reading_date ASC`

# android - 如何将 android 从一个页面导航到另一个页面？

> ID：14345910
> 
> 赞同：-1
> 
> 时间：2013-01-15T20:04:41.973
> 
> 标签：android, navigation

我有 5 个布局和按钮，它们可以从一个导航到另一个：ac、ab、cd、de。我只能从 a 导航到 b 和 c。我将相同的代码提供给其他人，但应用程序停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:42:05.183

假设您的*布局*是*活动*；您需要做的就是设置按钮单击侦听器并在侦听器块中调用相应的活动。

例如; 在**ActivityA**中（onCreate() 方法）

```
btnStartB = (Button)findViewById(R.id.btnStartB);
btnStartB.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v)
    {
        Intent intent = new Intent(ActivityA.this, ActivityB.class);
        startActivity(intent);
    }
}); 
```

您需要对 ActivityA 中的 btnStartC、ActivityC 中的 btnStartD 和 ActivityD 中的 btnStartE 执行相同的操作。尝试调试并找出它停止的位置。

# java - 您如何在依赖项中引用 Maven 配置文件？

> ID：14345911
> 
> 赞同：2
> 
> 时间：2013-01-15T20:04:45.170
> 
> 标签：java, maven

我有一个仅作为配置文件构建的 jar 文件。我如何在一个`<dependency/>`块中引用它？假设它的 groupId 是 com.mycompany，artifactId 是 test-jar，版本是 2.0，profile 是 customBuild。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:14:44.320

从您正在构建的项目中运行`mvn install`，它将在您的`.m2`目录中本地安装 jar。然后您可以使用它作为常规依赖项引用它

```
 <dependency>
        <groupId>com.mycompany</groupId>
        <artifactId>test-jar</artifactId>
        <version>2.0</version>
    </dependency> 
```

在您的依赖项目中。

# jakarta-ee - javax.ejb.TransactionRolledbackLocalException

> ID：14345913
> 
> 赞同：0
> 
> 时间：2013-01-15T20:04:49.783
> 
> 标签：jakarta-ee, ejb, glassfish-3

我的网络应用程序（对我来说）有一个非常困难的问题。这是 glassfish 的输出：

```
INFO: ------------Czy pacjent BEAN przed getNazwaKonta ---------------
INFO: ------------Czy pacjent BEAN PO getNazwaKonta ---------------
INFO: ------------Czy pacjent ENDPOINT przed pobierz po loginie ---------------
INFO: ------------pobierzPoLoginie LocalFACADE PRZED ---------------
WARNING: EJB5184:A system exception occurred during an invocation on EJB konto, method: public pl.karta.epacjent.entities.Konto pl.karta.epacjent.facades.KontoFacade.pobierzPoLoginie(java.lang.String)
WARNING: javax.ejb.TransactionRolledbackLocalException: Exception thrown from bean
    at com.sun.ejb.containers.BaseContainer.checkExceptionClientTx(BaseContainer.java:5071)
    at com.sun.ejb.containers.BaseContainer.postInvokeTx(BaseContainer.java:4906)
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:2045)
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:1994)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:222)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:88)
    at $Proxy554.pobierzPoLoginie(Unknown Source)
    at pl.karta.epacjent.endpoints.Endpoint.czyPacjent(Endpoint.java:55)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
    at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
    at com.sun.ejb.containers.BaseContainer.invokeTargetBeanMethod(BaseContainer.java:4180)
    at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5368)
    at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:88)
    at $Proxy556.czyPacjent(Unknown Source)
    at pl.karta.epacjent.beans.LoginBean.czyPacjent(LoginBean.java:52)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.el.BeanELResolver.invokeMethod(BeanELResolver.java:779)
    at javax.el.BeanELResolver.invoke(BeanELResolver.java:528)
    at javax.el.CompositeELResolver.invoke(CompositeELResolver.java:257)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:134)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:183)
    at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    at javax.faces.component.UIComponentBase.isRendered(UIComponentBase.java:413)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:297)
    at com.sun.faces.renderkit.html_basic.OutputLinkRenderer.encodeChildren(OutputLinkRenderer.java:124)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.IllegalStateException: Attempting to execute an operation on a closed EntityManagerFactory.
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.verifyOpen(EntityManagerFactoryDelegate.java:305)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:276)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:294)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:279)
    at com.sun.enterprise.container.common.impl.EntityManagerWrapper._getDelegate(EntityManagerWrapper.java:208)
    at com.sun.enterprise.container.common.impl.EntityManagerWrapper.createNamedQuery(EntityManagerWrapper.java:565)
    at pl.karta.epacjent.facades.KontoFacade.pobierzPoLoginie(KontoFacade.java:26)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
    at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
    at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
    at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
    at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
    at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214)
    ... 64 more 
```

我的代码：

豆

```
@Stateless
@LocalBean
@ManagedBean(name = "LoginBean")
@SessionScoped
public class LoginBean {
@EJB
private EndpointLocal endpoint;
public boolean czyPacjent()
{
System.out.println("------------Czy pacjent BEAN przed getNazwaKonta ---------------");
if(getNazwaKonta()==null)return false;      
System.out.println("------------Czy pacjent BEAN PO getNazwaKonta ---------------");
return endpoint.czyPacjent(getNazwaKonta());
} 
```

端点

```
@Stateful
@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW) 
public class Endpoint implements EndpointLocal{
@EJB(beanName = "konto")
private KontoFacadeLocal kontofacade;
private Konto konto = new Konto();
@Override
public boolean czyPacjent(String nazwa) {
System.out.println("------------Czy pacjent ENDPOINT przed pobierz po loginie ---------------");
konto = kontofacade.pobierzPoLoginie(nazwa);
System.out.println("------------Czy pacjent ENDPOINT PO pobierz po loginie ---------------");
for (PoziomDostepu p : konto.getPoziomDostepuCollection()) {
if (p instanceof Pacjent) {
return true;
}
}
return false;
} 
```

正面：

```
@Stateless(name="konto")
public class KontoFacade extends AbstractFacade<Konto> implements KontoFacadeLocal {
@PersistenceContext(unitName = "epacjentPU")
private EntityManager em;
@Override
public Konto pobierzPoLoginie(String login) {
System.out.println("------------pobierzPoLoginie LocalFACADE PRZED ---------------");
TypedQuery tq = em.createNamedQuery("Konto.findByLogin", Konto.class);
tq.setParameter("login", login);
System.out.println("------------pobierzPoLoginie LocalFACADE PO (przed returnem) ---------------");
return (Konto) tq.getSingleResult();
} 
```

如果有任何信息遗漏，请告诉我。我知道很少有东西是用波兰语写的，但这只是`System.out.println()`让我知道它在哪里停止。感谢所有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:14:46.763

检查堆栈跟踪，这是您的问题的原因：

```
Caused by: java.lang.IllegalStateException: Attempting to execute an operation on a closed EntityManagerFactory. 
```

检查您的数据库连接和持久性配置，如果有任何不正确的配置可能是原因。

Glassfish 3.1 还有一个众所周知的错误，请参见此链接：

*   [Glassfish 3.1 问题 - “对关闭的 EntityManagerFactory 进行操作”](http://richardchesterwood.blogspot.com/2011/09/javaee-course-ships-with-copy-of-javaee.html)

因此，如果您的持久性配置一切正常，请尝试更改 GF 版本，看看会发生什么。

# git - 具有多个位置的目录的单个 Git 存储库

> ID：14345917
> 
> 赞同：8
> 
> 时间：2013-01-15T20:05:02.893
> 
> 标签：git

Git newb 问题在这里。来自 SVN，我可以在所有地方检查多个分支（“/www/project1”、“/users/project2”等），但都位于同一个存储库中。每个分支都有自己的提交、修订等。你们知道这笔交易。

在 Git 中是否有与此类似的方法，您可以在一个存储库中将目录/分支分布在各处？再次，抱歉新问题。试图对此有所了解。非常感谢您在此处提供的任何见解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T20:17:05.827

通常，由于结帐和合并过程非常快，因此使用 Git 的开发人员会保留所有分支并在同一文件夹中切换它们。SVN 分支系统非常慢，而且不是很好，这就是为什么他们通常将它们保存在不同的文件夹中。

可以将分支检出到不同的文件夹：

```
git --work-tree=<path to target> --git-dir="<path from source>" checkout <reference-name>
# example:
git --work-tree=. --git-dir="/base-repo/.git" checkout master 
```

但请注意，这个新文件夹不会被版本控制。要保持版本化，您可以在另一个文件夹中重新克隆 repo：

```
git clone path/to/local/repo/.git 
```

请注意，在 git 中，每个克隆都是完整的 repo（与您的服务器和其他文件夹中的内容完全相同）。每个克隆都是完全独立的，可以从任何其他 repo 推/拉。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:11:59.810

Git 是一个分布式控制版本。因此，您可以拥有本地分支和远程分支。要创建本地分支，请使用`git branch name`name 代表您的分支名称的命令。要查看所有本地分支，可以使用命令`git branch`。它将列出所有分支和当前分支。要在本地分支之间进行更改，请使用`git checkout name`name 代表您的分支名称的命令。

要将本地分支发送到远程存储库，请使用`git push origin name`name 代表分支名称的命令。要将本地分支复制到您的计算机，请使用命令`git checkout -t origin/name`.

# jquery - 如何连接非空、断开连接的节点？

> ID：14345919
> 
> 赞同：3
> 
> 时间：2013-01-15T20:05:09.670
> 
> 标签：jquery

当我尝试使用 构建一系列断开连接的 DOM 节点`.after`时，如果它们为空，它可以正常工作：

```
[14:56:45.186] $('<span></span>').after('<p></p>');
[14:56:45.193] ({0:({}), length:2, prevObject:{0:({}), length:1}, context:(void 0), selector:".after([object Arguments])", 1:({})}) 
```

但是，如果我尝试在第一个节点中添加任何文本，则会失败：

```
[14:56:41.521] $('<span>test</span>').after('<p></p>');
[14:56:41.525] ({0:({}), length:1}) 
```

如果我将该结果分配给一个变量并尝试检查它，它看起来好像`after`根本没有被调用过。

这里发生了什么，我该如何解决？

* * *

编辑：对于那些感兴趣的人，我最终编写了以下包装器，这似乎让我的生活变得更加轻松：

```
function tag(name) {
    return function(contents, options) {
        var o = options || {};
        var is_array = $.type(contents) === "array";
        if (!is_array) {
            o.text = contents;
        }
        result = $('<' + name + ' />', o);
        if (is_array) {
            $.each(contents, function(i, child) { result.append(child); });
        }
        return result;
    }
}
var span = tag('span');
var div = tag('div'); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T20:40:13.877

为了澄清你的错误——当我在我的 JavaScript 控制台中运行你的代码时，我得到以下信息：

```
> $('<span></span>').after('<p></p>');
[<span>​&lt;/span>​,<p>​&lt;/p>]
> $('<span>test</span>').after('<p></p>');
[<span>​test​&lt;/span>​] 
```

根据[jQuery 1.9 升级指南](http://jquery.com/upgrade-guide/1.9/#after-before-and-replacewith-with-disconnected-nodes)：

> 在 1.9 之前，如果集合中的第一个节点未连接到文档，.after()、.before() 和 .replaceWith() 将尝试在当前 jQuery 集合中添加或更改节点，并且在这些情况下返回一个新的 jQuery 集合而不是原始集合。***这造成了一些不一致和彻底的错误——该方法可能会也可能不会返回新结果，具体取决于它的参数！***从 1.9 开始，这些方法总是返回原始的未修改集，并且尝试在没有父节点的节点上使用 .after()、.before() 或 .replaceWith() 无效——也就是说，集或它包含的节点已更改。

所以：您观察到的行为是`.after()`在没有父节点的节点上使用导致的错误。从 1.9 开始，jQuery 开发团队已经通过完全删除它来解决这种不一致问题——使用`.after()`这种方式应该总是返回初始节点而没有`<p>`后面的（[小提琴](http://jsfiddle.net/mblase75/vg4xh/)）。

**解决方法：**

将你的 DOM 节点推送到一个简单的数组上。或者将它们附加到父节点，然后获取所有子节点：（[小提琴](http://jsfiddle.net/mblase75/2Xa6r/)）

```
$chain = $('<div>').append('<span></span>').append('<p>qwer</p>').children(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:07:24.053

创建新节点通常是这样完成的：

```
$('<span />', {text: 'test'}).after($('<p />')); 
```

# python-sphinx - 如何使用 sphinx 链接到 rst 中的文件？

> ID：14345922
> 
> 赞同：47
> 
> 时间：2013-01-15T20:05:21.797
> 
> 标签：python-sphinx, restructuredtext

我正在编写文档，我想包含指向 pdf 文件或 zip 档案的链接。如何使用 rst 语言和 sphinx 实现这一目标？

如果我这样做

```
here is a pdf file : `pdf <doc/mypdf.pdf>`_ 
```

它不起作用，因为在编译 sphinx 期间不要复制 doc 目录的包含（我使用 sphinx-quickstart 生成的 makefile）。

相反，使用`image`指令：

```
.. image:: img/plop.png 
```

sphinx 确实将 plop.png 图像复制到构建目录中。如何为 pdf 或 zip 存档获得相同的行为？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-01-15T20:32:01.490

一个解决方案是使用`:download:`“角色”（在[sphinx 关于角色的文档](http://www.sphinx-doc.org/en/master/usage/restructuredtext/roles.html#referencing-downloadable-files)中有详细说明）。

这是一个简短的示例，假设您`mypdf.pdf`在目录中有一个文件`doc`。该目录`doc`和您的第一个文件必须在同一目录中：

```
here is a pdf file :download:`pdf <doc/mypdf.pdf>` 
```

请注意，您不能在文件路径和文件路径之间放置空格`:download:`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-24T15:11:18.643

The `image` directive also works for PDF files.

```
.. image:: doc/mypdf.pdf 
```

# hash - 如何安全地检测具有匹配密码的帐户？

> ID：14345923
> 
> 赞同：1
> 
> 时间：2013-01-15T20:05:23.423
> 
> 标签：hash, cryptography, security, bcrypt

在我们的留言板上，我们使用密码匹配来帮助检测具有多个注册的成员，并针对恶意傀儡帐户执行我们的规则。当我们有 SHA256 哈希和每个站点的盐时，它运行良好。但是我们最近遇到了一个令人震惊的安全漏洞，其中一些密码哈希值落入了字典攻击。所以我们强制更改密码，并切换到 bcrypt + per-user salts。

当然，现在密码匹配不再起作用了。我没有接受过密码学或计算机科学方面的正规教育，所以我想问一下是否有一种安全的方法来克服这个问题。与我一起工作的人建议使用松散散列算法的第二个密码字段，该算法故意有很多冲突，但在我看来，这要么会导致大量误报，要么会过多地减少搜索空间以确保安全。我的想法是坚持使用 bcrypt，但存储第二个密码哈希，它使用每个站点的盐和极高的迭代次数（比如在现代硬件上生成 10 多秒）。这样，具有相同密码的用户将具有相同的哈希值，但不能通过字典攻击轻易推断出来。

我只是想知道这是否有明显的问题，或者比我更有知识的人有什么建议可以更好地处理事情？在我看来它会起作用，但我了解到在安全方面可能存在很多隐藏的问题。:P 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:51:56.283

## 简答

任何允许您检测 2 个用户是否具有相同密码的算法也将允许攻击者检测 2 个用户是否具有相同的密码。这实际上是一种预计算攻击。因此，您的问题无法安全解决。

## 例子

*   假设我已经破坏了您的密码数据库。
*   假设我已经弄清楚你的哈希是如何计算的。

如果我可以将您的密码转换算法应用于“密码”并快速判断哪些用户使用“密码”作为他们的密码，那么系统很容易受到某种形式的预计算攻击。

如果我必须进行昂贵的计算来确定每个用户的密码，并且计算用户 A 的密码所花费的工作不会使计算用户 B 的密码变得更容易，那么系统是安全的（针对这些类型的攻击）。

## 进一步考虑

您使用带有 bcrypt 和高迭代次数的 per-site salt 的想法起初可能看起来很有吸引力，但它无法扩展。即使在 10 秒内，也就是每分钟 6 次密码猜测、每小时 360 次、每天 8640 次或每年 3M 次（很多）。这只是一台机器。在那个问题上抛出一个机器僵尸网络，或者一些 GPU，然后这个数字突然变得暴涨。仅 300 台机器/内核/GPU 就可以在一天内淘汰 250 万次猜测。

因为您将为每个人使用相同的盐，所以您允许攻击者一次破解所有用户的密码。通过只使用每个用户的盐，攻击者一次只能有效地尝试破解单个用户的密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:57:24.807

上面给出的简短答案假设攻击者始终拥有与服务器相同的访问权限，这可能是不合理的。如果服务器以永久性方式（由攻击者拥有）受到破坏，那么任何方案都无法拯救您 - 攻击者可以检索用户设置的所有密码。该模型更常见的是攻击者能够在*有限*的时间内访问您的服务器，即在服务器上线后的某个时间点。这引入了一个机会，可以在不提供对攻击者有用的信息的情况下执行您所询问的密码匹配。

如果在注册或更改密码时，您的服务器可以访问纯文本密码，那么服务器可以遍历系统上的所有用户帐户，使用每个用户的个人盐对新密码进行哈希处理，并测试它们是否是相同。

这不会引入任何弱点，但只有当您的防止多个虚假帐户的算法可以将其用作一次性输入（“此密码与这些帐户匹配”）时，它才会对您有用。

Storing that information for later analysis would obviously be a weakness (for if an attacker can obtain your database of passwords, they can probably also obtain this list of accounts with the same password). A middle ground might be to store the information for daily review - reducing the total useful information available to an attacker who temporarily compromises your storage.

All of this is moot if the salting and hashing occurs client-side - then the server can't carry out the test.

# javascript - 使用 d3.svg.line 从 GeoJSON LNeString 数据生成 SVG 折线时出错

> ID：14345929
> 
> 赞同：1
> 
> 时间：2013-01-15T20:05:36.913
> 
> 标签：javascript, d3.js

[根据此处](https://github.com/mbostock/d3/wiki/SVG-Shapes#wiki-svg_polyline)d3.js API 文档中的建议，我正在尝试使用 d3.svg.line 从描述 GeoJSON 格式的 LineString 的坐标数据生成 SVG 折线。但是，当我这样做时，我在浏览器的 JavaScript 控制台中收到如下错误：

```
Error: Problem parsing d="[object SVGLineElement]" 
```

GeoJSON 数据如下所示。

测试.json

```
{"type": "FeatureCollection", "features": [
  { "type": "Feature", "properties": { "id": "0" },
    "geometry": {
      "type": "LineString",
      "coordinates": [
        [ -122.1219348702,42.3351232329 ],
        [ -122.05927795103516,43.04825098762893 ],
        [ -117.5980213906,43.0866974143 ]
      ]
    }
  }
] } 
```

JavaScript 看起来像这样，它遵循我在上面标题为“路径数据生成器”的部分中链接的文档中的示例。

应用程序.js

```
var projection = d3.geo.albers()
  .scale(2000)
  .center([-20,47]);

var path = d3.geo.path()
  .projection(projection);

var line = d3.svg.line()
  .x(function(d) { return projection(d)[0]; })
  .y(function(d) { return projection(d)[1]; })
  .interpolate("linear");

var svg = d3.select("body").append("svg")
  .attr("width", width)
  .attr("height", height);

var g = svg.append("g");

d3.json("test.json", function(json) {
  g.selectAll("path")
  .data(json.features)
  .enter().append("path")
  .attr("d", line); 
```

我能够很好地生成多边形......我在尝试生成折线时遇到了麻烦。有什么建议么？！

# qt - 无法从 QtScript 访问公共插槽

> ID：14345931
> 
> 赞同：0
> 
> 时间：2013-01-15T20:05:53.303
> 
> 标签：qt, qt4, qtscript

我有这堂课：

```
class JavaScript : public QObject {    
    Q_OBJECT
    public:
        JavaScript();        
        bool executeFromFile(QString file);  
        bool enabled;

    public slots:
        void setEnabled( bool enabled );
        bool isEnabled() const;    

    private:
        QScriptEngine engine;
}; 
```

方法定义如下：

```
#include "javascript.h"

JavaScript::JavaScript() {  
    executeFromFile("test.js");
}
bool JavaScript::executeFromFile(QString file) {
    QFile scriptFile(file);
    if (!scriptFile.open(QIODevice::ReadOnly)) return false;
    QTextStream stream(&scriptFile);
    QString contents = stream.readAll();    
    scriptFile.close();
    engine.evaluate(contents, file);    
    return true;
}

void JavaScript::setEnabled( bool enabled ) {
    JavaScript::enabled = enabled;
}
bool JavaScript::isEnabled() const {
    return enabled;
} 
```

我正在尝试访问先前在头文件中定义的公共插槽，如文档所述：

[http://doc.qt.digia.com/qt/scripting.html#making-ac-object-available-to-scripts-written-in-qtscript](http://doc.qt.digia.com/qt/scripting.html#making-a-c-object-available-to-scripts-written-in-qtscript)

test.js 文件看起来像这样，就像文档的示例一样：

```
var obj = new JavaScript();
obj.setEnabled( true );
print( "obj is enabled: " + obj.isEnabled() ); 
```

但我什么也得不到。它似乎没有找到 JavaScript 对象。我错过了什么？

做一个简单的

```
print(1+1) 
```

工作得很好。

**编辑：** qt4 网页中的一个[示例](http://qt-project.org/doc/qt-4.8/script-defaultprototypes.html)实现了**Q_PROPERTY**。我试过这个，但得到了相同的结果：

```
Q_PROPERTY(bool enabled READ isEnabled WRITE setEnabled) 
```

**编辑1：**尝试像这样实现初始化程序：

```
// javascript.h:

JavaScript(QObject *parent = 0);

// javascript.cpp:

JavaScript::JavaScript(QObject *parent) : QObject(parent) {} 
```

依然没有...

**编辑2：**一些例子也继承自`QScriptable`：

```
class JavaScript : public QObject, public QScriptable {} 
```

但这也没有什么区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:51:24.873

您需要创建 QScriptClass 而不是 QObject。Qt 包含如何在 Qt 中扩展脚本功能的示例。看看[自定义脚本类示例](http://qt-project.org/doc/qt-4.8/script-customclass.html)

# javascript - 如何使 noUiSlider 工作

> ID：14345932
> 
> 赞同：1
> 
> 时间：2013-01-15T20:05:53.117
> 
> 标签：javascript, slider

我需要一个 2 手柄滑块，当我移动它时它会显示手柄值。我正在使用 nouislider。我在使它工作时遇到问题。我删除了大部分不需要的代码，稍后将添加移动并更改好东西。如何初始化滑块？下面是我的代码：

```
<!DOCTYPE html>
<html>
  <head>
    <title>jQuery No UI Slider - Range slider</title>
    <link rel="stylesheet" href="nouislider.css" />
    <link rel="stylesheet" href="site.css" />
    <script src="jquery-1.8b1.js"></script>
    <script src="jquery.nouislider.js"></script>
  </head>
  <body>
    <div class="example">
      <div id="noUiSlider" class="noUiSlider"></div>
      <div id="valueInput">
        START <input type="text" id="start" value="0"/></label>
        END   <input type="text" id="end" value="60"/></label>
      </div>

      <script>
        window.onload =$(function(){                        
          $("#noUiSlider").empty().noUiSlider( 'init', {
            handles: 2,
            connect: true,
            scale:[10,30],
            start:[0,60]
          });
        </script>           
      </div>
   </body>    
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-17T21:54:43.823

```
$(function() {                        
   $("#noUiSlider").noUiSlider({
       handles: 2,
       connect: true,
       scale:[10,30],
       start:[0,60]
   });
}); 
```

# regex - 使用 RegEx 从文本文件中删除重复的字符串

> ID：14345933
> 
> 赞同：0
> 
> 时间：2013-01-15T20:05:55.067
> 
> 标签：regex, string, duplicates

我想从一个文件中删除字符串，该文件已经存在于一个数量较少的行中，起诉 RegEx（Note++）。

例子 -

```
123   = 45,
789 = 321,
123     =   951 
```

应该导致 -

```
123   = 45,
789 = 321,
     =   951 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:34:26.077

嗯，这是一个很好的例子，说明虽然 RegEx 非常强大，但它并不总是适合这项工作的工具。例如，下面的 RegEx 可能会做你想做的事（我没有安装 Notepad++，但它在我的 RegEx 客户端中工作）

```
Search: (\b\d+\b)(.+?)\1
Replace: \1\2 (or $1$2, depending on your setup) 
```

这需要一个数字的实例，搜索直到找到它的另一个实例，然后用它自己替换整个事物减去第二个实例。

但是，除了非常脏之外，使用快速脚本甚至 Excel 之类的东西会更简单。

# android - 检查用户是否启用了全局搜索

> ID：14345935
> 
> 赞同：2
> 
> 时间：2013-01-15T20:06:10.597
> 
> 标签：android, android-searchmanager

我正在开发一个 Android 应用程序，它提供了一个可在本地和全球范围内使用的[搜索界面。](http://developer.android.com/guide/topics/search/search-dialog.html)

为了使自定义界面出现在系统的快速搜索框中，用户必须在*搜索设置*中明确启用它，这可以通过有用的`android.app.SearchManager.INTENT_ACTION_GLOBAL_SEARCH`意图以编程方式启动。

问题是：**如果我的可搜索界面已被用户启用，我如何以编程方式检查？**

唯一让我“几乎在那里”的是[`SearchManager`class](http://developer.android.com/reference/android/app/SearchManager.html)，它提供（除其他外）：

*   [`getSearchablesInGlobalSearch`方法](http://developer.android.com/reference/android/app/SearchManager.html#getSearchablesInGlobalSearch%28%29)：返回一个列表，其中包含在其可搜索元数据中设置
    了属性的所有可搜索活动的可搜索信息，*但没有用户是否启用它们的信息*。`android:includeInGlobalSearch`
**   [`INTENT_ACTION_SEARCH_SETTINGS_CHANGED`意图](http://developer.android.com/reference/android/app/SearchManager.html#INTENT_ACTION_SEARCH_SETTINGS_CHANGED)：
    广播动作以通知搜索设置已以某种方式更改；已启用或禁用可搜索项，或者已选择不同的 Web 搜索提供程序，*但同样没有关于实际更改的信息*。*

 *对此事进行广泛的谷歌搜索失败，这可能意味着：

*   我错过了一些非常明显的东西（可能）
*   以前从未尝试过（不太可能）
*   这根本不可能

有人可以对此有所了解吗？*

# javascript - 如何让 javascript 与 flash (Object # 没有方法

> ID：14345936
> 
> 赞同：1
> 
> 时间：2013-01-15T20:06:16.023
> 
> 标签：javascript, actionscript-3, flash, swfobject, externalinterface

我正在尝试从 javascript 向 flash 发送一个简单的测试消息，但出现错误：

```
Object #<HTMLObjectElement> has no method "listenToJS" 
```

我已经在堆栈上阅读了许多关于此的问题，但我觉得要么浏览器没有正确引用我的 flash 对象，要么在我的 actionscript 中我没有将我的 flash 函数放在正确的位置。

所以在 html 中，我使用 SWFObj 嵌入 flash：

```
<div id="flash_content">
    <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="1280" height="800" id="tourFlash" name="pano" class="pano">
        <param name="movie" value="VRDemo.swf" />
        <param name="menu" value="false" />
        <param name="wmode" value="transparent" />
        <param name="allowscriptaccess" value="always" />
        <!--[if !IE]>-->
        <object type="application/x-shockwave-flash" data="VRDemo.swf" width="1280" height="800" class="pano">
            <param name="menu" value="false" />
            <param name="wmode" value="transparent" />
            <param name="allowscriptaccess" value="always" />
            <param name="allownetworking" value="all" />
            <param name="flashvars" value="zoom=null&amp;pan=null&amp;sound=null" />
        <!--<![endif]-->
            <a href="http://www.adobe.com/go/getflashplayer">
                <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
            </a>
        <!--[if !IE]>-->
        </object>
        <!--<![endif]-->
    </object>
</div>

<script>

var flashObj; 

$(document).ready(function(){

    flashObj = document.getElementById('tourFlash');

    $('#interface').click(function(){
        console.log('click');
        talkToFlash();
    });
});

function talkToFlash(){
    flashObj.listenToJS('hello from js');
}

function listenFromFlash(flashMessage){
    console.log(message);
}
</script> 
```

点击处理程序被触发，但在这里我得到了错误。我的 flash 文件使用一个文档类，并且在文档类中是公共函数。Flash 的结构如下：

```
package com.company.vr {

    import flash.display.*;
    import flash.events.*; 
    import com.greensock.*;
    import com.greensock.easing.*;
    import flash.external.ExternalInterface;
    import flash.system.Security;

    Security.allowDomain("*");

     public class VR_TestDocument extends MovieClip {
            public function VR_TestDocument() {
              ExternalInterface.addCallback("talkToFlash", listenToJS);
            }

            public function listenToJS(message){
              trace ("from js: " + message);
              var flashMessage = message + " flash";
              ExternalInterface.call("listenFromFlash", flashMessage);
            }
     }
} 
```

- -更新 - -

由于某种原因，看起来外部接口不喜欢 SWFObject。如果我切换到本示例中使用的嵌入 Flash 的方法：

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html#addCallback](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html#addCallback) ()

它有效，但我觉得 swfobject 是嵌入 Flash 的最佳方式。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:11:37.143

如果您在 html 中嵌入 flash 作为上面的代码，请注意，第二个标记**对象**也必须包含属性**id**，更正的代码在这里：

```
<div id="flash_content">
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="1280" height="800" id="tourFlash" name="pano" class="pano">
    <param name="movie" value="VRDemo.swf" />
    <param name="menu" value="false" />
    <param name="wmode" value="transparent" />
    <param name="allowscriptaccess" value="always" />
    <!--[if !IE]>-->
    <object type="application/x-shockwave-flash" data="VRDemo.swf" width="1280" height="800" class="pano" id="tourFlash1">
        <param name="menu" value="false" />
        <param name="wmode" value="transparent" />
        <param name="allowscriptaccess" value="always" />
        <param name="allownetworking" value="all" />
        <param name="flashvars" value="zoom=null&amp;pan=null&amp;sound=null" />
    <!--<![endif]-->
        <a href="http://www.adobe.com/go/getflashplayer">
            <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
        </a>
    <!--[if !IE]>-->
    </object>
    <!--<![endif]-->
</object> 
```

但当然，swfobject 是嵌入 Flash 的最佳方式。正确的 html 代码如下所示：

```
 <html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
    <head>
        <title>js</title>       
        <script type="text/javascript" src="swfobject.js"></script>
        <script>
            function talkToFlash(){
                document.getElementById('flash_content').listenToJS('hello from js');
            }

            var flashvars =  {};
            var params = {
                allowscriptaccess: "always"         
            }           
            var attributes =  {};
            swfobject.embedSWF("VRDemo.swf", "flash_content", "550", "400", "10.0.0", false, flashvars, params, attributes);
    </script>   
    </head>
    <body>
        <div id="flash_content"></div>
    </body>
</html> 
```

- 更新 -

您必须在页面上选择正确的 flash 元素。（取决于浏览器）。例如，以下是获取正确 flashObj 的代码：

```
flashObj1 = document.getElementById('tourFlash');
flashObj2 = document.getElementById('tourFlash1');
flashObj = flashObj1.talkToFlash != undefined ? flashObj1 : flashObj2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T01:00:13.657

这很可能是一个时间问题——Flash Player 需要一点时间来初始化 ExternalInterface，然后再多一点时间来加载您的 SWF。您的示例代码在 DOMReady 上运行，这不能保证 SWF 已加载或 ExternalInterface 已在 Flash Player 中初始化。

我建议查询 SWF 以查看它是否已完成加载。LearnSWFObject.com 上有一个示例（使用动态发布）：http: [//learnswfobject.com/advanced-topics/executing-javascript-when-the-swf-has-finished-loading/](http://learnswfobject.com/advanced-topics/executing-javascript-when-the-swf-has-finished-loading/)

更新：重新阅读您的代码和其他一些建议的答案后，我注意到您正在`document.getElementById`使用`<object>`. 使用嵌套`<object>`标记时，这将不起作用（在 IE 中除外，它使用 external `<object>`）。`swfobject.getObjectById`是专门为解决这个问题而创建的。尝试编辑您的 JS 以使用`swfobject.getObjectById`.

# c - sysinfo 为 freeram 返回不正确的值（即使使用 mem_unit）

> ID：14345937
> 
> 赞同：1
> 
> 时间：2013-01-15T20:06:17.623
> 
> 标签：c, linux, sysinfo

我的完整 C MATE 小程序可以在 github 上找到：[https](https://github.com/geniass/mate-resource-applet/tree/cmake) ://github.com/geniass/mate-resource-applet/tree/cmake (BRANCH CMAKE)。现在是一团糟，所以请看下面的代码。

我找不到一个小程序来显示我电脑的空闲内存，所以基本上就是这样。我正在使用 sysinfo 获取此信息，它适用于我系统的总内存（大约 4GB，显示 3954 MB）。htop 显示 3954 MB 中使用了 3157 MB。

但是，sysinfo 为免费内存（136 MB）提供的值显然是错误的（如果免费内存是尚未分配的内存或其他东西，我不知道）。

[这个问题](https://stackoverflow.com/questions/8987636/sysinfo-system-call-not-returning-correct-freeram-value)是同一个问题，但是涉及 mem_unit 的解决方案不起作用，因为 mem_unit = 1 在我的系统上。

这是一个给出相同值的最小程序：

```
#include <stdio.h>
#include <sys/sysinfo.h>

int main() {
    /* Conversion constants. */
    const long minute = 60;
    const long hour = minute * 60;
    const long day = hour * 24;
    const double megabyte = 1024 * 1024;
    /* Obtain system statistics. */
    struct sysinfo si;
    sysinfo (&si);
    /* Summarize interesting values. */
    printf ("system uptime : %ld days, %ld:%02ld:%02ld\n", 
            si.uptime / day, (si.uptime % day) / hour, 
            (si.uptime % hour) / minute, si.uptime % minute);
    printf ("total RAM   : %5.1f MB\n", si.totalram / megabyte);
    printf ("free RAM   : %5.1f MB\n", si.freeram / megabyte);
    printf ("mem_unit:   : %u\n", si.mem_unit);
    printf ("process count : %d\n", si.procs);
    return 0;
} 
```

输出：

```
system uptime : 0 days, 10:25:18
total RAM   : 3953.9 MB
free RAM   : 162.1 MB
mem_unit:   : 1
process count : 531 
```

这里发生了什么？freeram不是我想的那样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:36:47.187

Linux 不喜欢无处使用*可用*内存。因此，当有可用内存可用时，它会暂时将其用作*高速缓存*和缓冲区。*可用内存*似乎很低，但是一旦程序需要内存，Linux 就会减少其缓存/缓冲区的使用并为程序提供所需的内容。

Linux 命令`free -m`显示内存、缓存和缓冲区的状态。

有关示例和详细信息，请参[见此链接](http://blog.scoutapp.com/articles/2010/10/06/determining-free-memory-on-linux)。

# ios - Storyboard 中的 OBShapedButton 类

> ID：14345938
> 
> 赞同：0
> 
> 时间：2013-01-15T20:06:17.420
> 
> 标签：ios, xcode, storyboard, nib, obshapedbutton

我正在尝试在我的 iOS 项目中实现 OBShapedButton 类，这样我就可以创建由 png 文件定义的不规则形状的按钮。这是有关 OBShapedButton 的更多信息的[链接](https://github.com/ole/OBShapedButton)。

基本上，当我将它与我的 nib 文件一起使用时，这个类效果很好。但是我更喜欢在我的项目中使用故事板。但是当我尝试在情节提要中做同样的事情时，按照我在 nib 文件中制作不规则按钮的所有相同步骤，它不起作用，可点击区域仍然由矩形而不是我的 png 图像定义.

我的问题是我将如何使用带有 OBShapedButton 的情节提要？故事板有什么我遗漏的东西会阻止 OBShapedButton 工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:03:29.867

我在带有故事板的项目中使用它。确保将身份检查器中的自定义类设置为`OBShapedButton`，我认为我没有做任何其他特别的事情。

# ruby - 懒惰，贪婪和所有格量词之间有什么区别？

> ID：14345941
> 
> 赞同：5
> 
> 时间：2013-01-15T20:06:45.437
> 
> 标签：ruby, regex, ruby-1.9.3

以下量词如何不同 - 在场景、速度等方面。

*   `?`,`??`并且`?+`全部匹配**0 或 1 次**。
*   `*`, `*? and`*+` 都匹配**0 次或多次**。
*   `+`,`+?`并且`++`全部匹配**1 次或多次**。

* * *

*   `?`，`*`并且`+`是**贪婪**的。
*   `??`，`*?`并且`+?`不**情愿/懒惰**。
*   `?+`,`*+`并且`++`是**所有格**。

谁能帮我理解这些术语的含义？为什么同一个工作的每个量词有三种变体？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T22:22:13.587

拿绳子

```
aaaab 
```

并查看以下正则表达式如何匹配它：

```
Regex          Submatches
               group 1  group 2  group3
(a?)(a*)(ab)   a        aa       ab
(a??)(a*)(ab)           aaa      ab
(a?+)(a*)(ab)  a        aa       ab
(a*)(a?)(ab)   aaa               ab
(a*?)(a?)(ab)  aa       a        ab
(a*+)(a?)(ab)  aaaa              <Match fails!>
(a+)(a*)(ab)   aaa               ab 
(a+?)(a*)(ab)  a        aa       ab
(a++)(a*)(ab)  aaaa              <Match fails!> 
```

**解释：**

*   `a?`尝试匹配 one `a`，但如果整个匹配成功需要，它准备不匹配任何内容。
*   `a??``a`尝试不匹配任何内容，但如果需要整个匹配成功，它会准备匹配一个。
*   `a?+`试图匹配一个`a`。如果它可以做到这一点，那么它就*不会*退缩以使整体匹配成功。但是，如果它不能匹配 a `a`，那么它将很乐意不匹配任何内容。
*   `a*`尝试匹配尽可能多`a`的 s，但它准备匹配更少`a`的 s，即使对于整个匹配成功而言这是必要的。
*   `a*?`尝试不匹配任何内容，但它准备匹配尽可能多`a`的 s 以使整个匹配成功，但不会更多。
*   `a*+`尝试匹配尽可能多`a`的 s。如果它可以做到这一点，它*不会*退缩以匹配更少`a`的 s，如果这是整个匹配成功所必需的。如果它甚至不能匹配单个`a`，那么它会很乐意匹配任何内容。
*   `a+`尝试匹配尽可能多`a`的 s，但如果这对整个匹配成功是必要的，它准备匹配更少`a`的 s（但至少一个）。
*   `a+?`尝试只匹配一个`a`，但它准备匹配尽可能多`a`的 s 以使整个匹配成功，但不会更多。
*   `a++`尝试匹配尽可能多`a`的 s。如果它可以做到这一点，它*不会*退缩以匹配更少`a`的 s，如果这是整个匹配成功所必需的。如果它甚至不能匹配单个`a`，则正则表达式失败。

# javascript - innerHTML、DOM 元素、背景颜色、样式

> ID：14345942
> 
> 赞同：0
> 
> 时间：2013-01-15T20:06:50.630
> 
> 标签：javascript, dom, dynamic, innerhtml

我正在通过 DOM 元素和 innerHTML 向表中添加行。它有效，唯一的问题是cell3。背景颜色不会显示。我相信这是因为 cell3 有一个附加元素。帮助？

```
 var table = document.getElementById("vessel_tab");

        var rowCount = table.rows.length;
        var row = table.insertRow();
        //row.style.backgroundColor="#7F9EBE"; doesn't work as bg for entire row

        var cell1 = row.insertCell(0);
        cell1.style.backgroundColor="#7F9EBE"; working  

        cell1.innerHTML = "<font color='#000'><strong>EMS 345</strong></font>";
        cell1.colSpan = 2;

        var cell3 = row.insertCell(1);
        cell3.style.backgroundColor="#7F9EBE"; !NOT WORKING

        var element1 = document.createElement("input");
        element1.type = "checkbox";
        cell3.innerHTML = "<img title='remove'  src='images/delete-row-icon1.png' class='sub_icon remove'/> &nbsp;";
        cell3.appendChild(element1); 
```

# php - preg_replace 在变量中返回

> ID：14345947
> 
> 赞同：0
> 
> 时间：2013-01-15T20:07:30.087
> 
> 标签：php, regex

在这里，我有我的正则表达式，它找到了 4chan 样式引用的所有实例（例如 >10、>59、>654564）并将其作为*模式输出*返回。我的问题是，是否可以插入我的*模式输出*...

**\1**

...进入 PHP 函数。

虽然这工作正常：

```
$a = preg_replace('`(&gt;\d+)`i', '\1', $b); 
```

我正在寻找的东西不是：

```
$a = preg_replace('`(&gt;\d+)`i', '".getpost('\1')."', $b); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:09:45.663

## 看一下[preg_replace_callback()](http://php.net/manual/en/function.preg-replace-callback.php)函数。

* * *

**示例 [php >= 5.3.0]**（*使用[Closure](http://php.net/manual/en/class.closure.php)*）：

```
$callback = function($match) {
    return "{" . $match[1] . "}"; # do smth with match
};
$string = 'test1 &gt;1 test2 &gt;12 test3 &gt;123 test4';
echo preg_replace_callback('~(&gt;\d+)~i', $callback, $string); 
```

将输出：

```
test1 {&gt;1} test2 {&gt;12} test3 {&gt;123} test4 
```

* * *

**示例 [php < 5.3.0]**：

```
function replaceCallback($match) {
    return "{" . $match[1] . "}"; # do smth with match
};
$string = 'test1 &gt;1 test2 &gt;12 test3 &gt;123 test4';
echo preg_replace_callback('~(&gt;\d+)~i', 'replaceCallback', $string); 
```

# android - Android根据另一张图片的比例翻译一张图片

> ID：14345951
> 
> 赞同：1
> 
> 时间：2013-01-15T20:07:32.730
> 
> 标签：android, android-layout, scale

我有这个应用程序，其中有 2 个 ImageView，一个充当背景，另一个是位于背景图像上的小图像，充当地图上的标记，需要保持与背景图像相关的位置.

因此，在拖动时实现这一点很容易，但我需要的是在用户缩放背景图像时保持小图像与背景图像的相对位置，这是到目前为止的代码（lampMatrix 和 lampStart 是矩阵和 PointF用于较小的图像）：

```
 public boolean onTouch(View v, MotionEvent rawEvent) {
      WrapMotionEvent event = WrapMotionEvent.wrap(rawEvent);
      // ...
      ImageView view = (ImageView) v;

      // Dump touch event to log
      dumpEvent(event);

      // Handle touch events here...
      switch (event.getAction() & MotionEvent.ACTION_MASK) {
      case MotionEvent.ACTION_DOWN:
         savedMatrix.set(matrix);
         start.set(event.getX(), event.getY());

         savedLampMatrix.set(lampMatrix);
         lampStart.set(event.getX(), event.getY());

         Log.d(TAG, "mode=DRAG");
         mode = DRAG;
         break;
      case MotionEvent.ACTION_POINTER_DOWN:
         oldDist = spacing(event);
         Log.d(TAG, "oldDist=" + oldDist);
         if (oldDist > 10f) {
            savedMatrix.set(matrix);
            midPoint(mid, event);
            mode = ZOOM;
            Log.d(TAG, "mode=ZOOM");
         }
         break;
      case MotionEvent.ACTION_UP:
      case MotionEvent.ACTION_POINTER_UP:
         mode = NONE;
         Log.d(TAG, "mode=NONE");
         break;
      case MotionEvent.ACTION_MOVE:
         if (mode == DRAG) {
            // ...
            matrix.set(savedMatrix);
            matrix.postTranslate(event.getX() - start.x,
                  event.getY() - start.y);

            lampMatrix.set(savedLampMatrix);
            lampMatrix.postTranslate(event.getX() - lampStart.x, event.getY() - lampStart.y);
         }
         else if (mode == ZOOM) {
            float newDist = spacing(event);
            Log.d(TAG, "newDist=" + newDist);
            if (newDist > 10f) {
               matrix.set(savedMatrix);
               float scale = newDist / oldDist;
               matrix.postScale(scale, scale, mid.x, mid.y);
            }
         }
         break;
      }

      view.setImageMatrix(matrix);
      ((ImageView)findViewById(R.id.imageView1)).setImageMatrix(lampMatrix);
      return true; // indicate event was handled
   } 
```

# c++ - 当成员计算机未使用 C++ 连接到 DC 时如何获取成员计算机的专有名称

> ID：14345952
> 
> 赞同：4
> 
> 时间：2013-01-15T20:07:47.480
> 
> 标签：c++, winapi, networking, active-directory, distinguishedname

我通常会通过调用以下方法获取 Active Directory 网络上成员计算机的可分辨名称：

```
TCHAR buff[256];
buff[0] = 0;
DWORD dwSz = SIZEOF(buff);
GetComputerObjectName(NameFullyQualifiedDN, buff, &dwSz); 
```

但是，当该成员计算机当前未连接到 DC 时，就会出现问题。例如，如果我将我的工作笔记本电脑带回家，它将无法访问我们在工作中拥有的本地 AD，并且`GetComputerObjectName`会失败。（我相信错误代码为 1355 或 `ERROR_NO_SUCH_DOMAIN`。）

所以我的问题是，在这种情况下，有没有办法获得成员计算机的专有名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:45:18.023

如果您不介意我说，我认为您尝试做的事情有些缺陷。

FQDN 仅在成员计算机连接到域时才真正有效。如果您离线登录到机器（根据您的描述，我假设一定是这种情况），则机器不再被认为在域上具有 FQDN。

毕竟，当你离线时，一些狡猾的系统管理员可能会在 AD 中移动机器的帐户，以便下次你从它登录域时，它的 FQDN 已经改变。

您引用的注册表项确实提供了 FQDN，但是当机器处于脱机状态时，我是否应该将其视为最后记录值的缓存。

如果我是你，我会处理 GetComputerObjectName() 抛出的异常，并改用[gethostname()](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms738527%28v=vs.85%29.aspx)之类的东西。

干杯，伊恩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:48:05.300

也许带有 ComputerNameDnsFullyQualified NameType 的 GetComputerNameEx 对与 DC 通信的依赖性较小？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T23:39:23.620

唔。所以没有人知道，哈？

我唯一疯狂的猜测是从 GPO 的此注册表项中获取它：`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Group Policy\State\Machine\Distinguished-Name`

所以你怎么看？

# symfony - Symfony 2 的 getter 和 setter

> ID：14345953
> 
> 赞同：0
> 
> 时间：2013-01-15T20:07:53.383
> 
> 标签：symfony

我想知道是否可以避免对 Symfony 2 实体使用 getter 和 setter。虽然 php app/console 学说:generate:entities 很有帮助，但是对于一个字段很多的实体来说，行代码似乎增加了很多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:19:09.120

您可以定义属性的可见性，从**受保护**或**私有**到**公开**，因此您现在可以通过以下方式访问它们：

```
// on entity
public $someProp;

// On your code
$someEntity->someProp = someValue; 
```

**这不是一个好的 OOP 实践，应该避免**，如果你想要干净和安全的代码，getter 和 setter 是要走的路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T07:29:18.427

如果跳过 getter 和 setter，您的代码将无法正常工作。特别是如果您有不同实体的映射。

Doctrine 在存储和获取信息期间使用 getter 和 setter 填充各种成员字段

对实体中的每个属性使用公共是非常糟糕的做法。而且您最终会浪费大量时间将属性更改为公共，因为 doctinr 在自动生成代码时使用 proted

# java - @RequestHeader 映射 地图默认情况？

> ID：14345956
> 
> 赞同：4
> 
> 时间：2013-01-15T20:07:57.260
> 
> 标签：java, spring, spring-mvc, spring-test-mvc

在 spring 3.2 中，我们在控制器中使用了它：

`@RequestHeader Map<String, String> headers`

问题是标题键的映射可以是任何大小写，所以我们必须重新构建标题映射，强制键为小写。

如果 spring 始终在 map 中的标题上强制使用小写或大写，以便更容易检查标题，那就太好了。

研究如何改变这种行为很困难，spring mvc 测试设置也是如此。

我们可以覆盖 RequestHeaderMapMethodArgumentResolver 但如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T20:46:12.890

是的，您可以覆盖 RequestHeaderMapMethodArgumentResolver。这是一种方法：

```
import org.apache.commons.collections.map.CaseInsensitiveMap;
import org.springframework.beans.BeansException;
import org.springframework.beans.factory.config.BeanPostProcessor;
import org.springframework.core.MethodParameter;
import org.springframework.web.bind.support.WebDataBinderFactory;
import org.springframework.web.context.request.NativeWebRequest;
import org.springframework.web.method.annotation.RequestHeaderMapMethodArgumentResolver;
import org.springframework.web.method.support.ModelAndViewContainer;

import java.util.Map;

public class FixRequestHeaderMapMethodArgumentResolverConfigurer implements BeanPostProcessor {
    @Override
    public Object postProcessBeforeInitialization(Object bean, String s) throws BeansException {
        return bean;
    }

    @Override
    public Object postProcessAfterInitialization(Object bean, String s) throws BeansException {
        if(bean instanceof RequestHeaderMapMethodArgumentResolver) {
            return new RequestHeaderMapMethodArgumentResolver() {
                @Override
                public Object resolveArgument(MethodParameter parameter, ModelAndViewContainer mavContainer, NativeWebRequest webRequest, WebDataBinderFactory binderFactory) throws Exception {
                    return new CaseInsensitiveMap((Map)super.resolveArgument(parameter, mavContainer, webRequest, binderFactory));
                }
            };
        } else
            return bean;
    }
} 
```

# c - 需要帮助定位单个代码行中的错误

> ID：14345957
> 
> 赞同：0
> 
> 时间：2013-01-15T20:08:01.783
> 
> 标签：c, syntax

```
void find_best_match(char*currword, char(*)[]chosen_dict ,char*newWord,int length_of_dict) 
```

我在 "chosen_dict" " 之前得到 "expected "," ,";" 或 ")" 。我已经多次修改语法，但找不到错误。任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T20:08:55.887

这没有任何意义：

```
char(*)[]chosen_dict 
```

正确的声明是

```
char(*chosen_dict)[] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T20:09:28.260

指向未知大小数组的指针是：

```
char (*chosen_dict)[] 
```

有些人发现“螺旋规则”有助于理解宣言。其他人更喜欢 typedef，而其他人只是用来`cdecl`解决这些问题。

只要您不需要将函数指针数组声明为在一行中获取指向数组的指针的函数，就可以了。

# hibernate - Hibernate/JPA - 可以同时使用@Id 和@EmbededId 吗？

> ID：14345958
> 
> 赞同：3
> 
> 时间：2013-01-15T20:08:07.443
> 
> 标签：hibernate, jpa, key, composite

我有点困惑在我的实体映射中添加业务键。所有实体都使用 Long 作为 Id，但现在我必须创建一个复合 Id，我的疑问是，我可以将 @Id 和 @EmbeddedId 混合在一起还是只有嵌入的对象必须是单独的 Id？

这是代码：

```
@MappedSuperclass
@Inheritance(strategy=InheritanceType.TABLE_PER_CLASS)
public abstract class AbstractEntity implements Serializable {
/**
 * 
 */
private static final long serialVersionUID = 6891295574206401221L;

@Id
@GenericGenerator(
        name = "seq_id",
        strategy = "br.com.alianca.customerservicemacros.entity.AliancaSequenceGenerator")
@GeneratedValue(generator = "seq_id")
private Long id;

@Column(name = "dt_created")
private Date created;

@Column(name = "dt_altered")
private Date altered; 
```

可嵌入类：

```
@Embeddable
public class DacsInfo implements Serializable {
/**
 * 
 */
private static final long serialVersionUID = 5960251258518073347L;

/**
 * Código Docsys do Navio
 */
@Column(name = "COD_VESSEL", length = 4)
private String vessel;

/**
 * Código do navio.
 */
@Column(name = "NUM_VOYAGE", length = 5)
private String voyage;

/**
 * Primeiros 4 digitos do código do <code>BLUI</code>.
 */
@Column(name = "PREFIX_BLUI", length = 4)
private String prefixBlui;

/**
 * Número universal do BL.
 */
@Column(name = "NUM_BLUI", length = 12)
private String blui; 
```

这里是最终实体：

```
@Entity
@Table(name = "FATO_DACS_REPT", schema = "u_cs_service")
public class FatoDacsRept extends AbstractEntity {

/**
 * 
 */
private static final long serialVersionUID = 9148311315020469420L;

@EmbeddedId
private DacsInfo dacsInfo;

@Column(name = "DAT_INPUT")
private Date loading;

/**
 * Código da companhia (Hamburg Sud - 699 / Aliança - 690)
 */
@Column(name = "COD_COMPANY", length = 4)
private String company;

@OneToMany(fetch = FetchType.LAZY, mappedBy = "fatoDacsRept")
private List<FatoDacsReptChq> pendencias; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T23:42:44.547

我想不是...

JPA 2.0 最终规范第 373 页：

11.1.15 EmbeddedId注解

...

使用 EmbeddedId 注解时，EmbeddedId 注解必须只有一个且没有 Id 注解。

...

# f# - F# 中的“求和”函数

> ID：14345962
> 
> 赞同：2
> 
> 时间：2013-01-15T20:08:13.200
> 
> 标签：f#, inline

我在 F# 中有一个函数列表，它们都是类型（float -> float -> float -> float）。我想对序列进行某种折叠以获得一个函数，该函数返回所有函数的总和。

例如，我可以将值 1.0、2.0 和 3.0 传递给列表中的每个函数，并从每个函数中获取一个返回值。然后我可以计算所有这些值的总和。但是，我想概括一下。

我知道如何递归地做到这一点，但我觉得它应该在一行中是可行的。有没有一种简洁的方法来完成这项任务？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T20:39:53.453

@Lee 的解决方案是您正在寻找的单线。如果您想保存一些字符，您可以使用`List.sumBy`which 首先将给定函数应用于列表的元素（类似于`List.map`），然后对结果求和（就像`List.sum`）：

```
let sumAll (fs:(_ -> _ -> _ -> float) list) a b c = 
  List.sumBy (fun f -> f a b c) fs 
```

这个版本和 Lee 的版本都使用类型注释来指定列表中的函数 return `float`。这是必需的，因为否则编译器不知道您要使用哪种数字求和`List.sum`（浮点数、整数等）。需要解决这种歧义以编译该函数。

或者，您可以将函数标记为`inline`，然后在调用它时将其内联（它适用于多种不同的数字类型）。您还可以将`fs`参数作为最后一个传递并使用偏函数应用程序：

```
let inline sumAll a b c = List.sumBy (fun f -> f a b c) 
```

现在您可以使用流水线调用它，如下所示 `fs |> sumAll 1 2 3`：

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T20:13:40.697

```
let sumAll (fs: (float -> float -> float -> float) list) a b c = List.map (fun f -> f a b c) fs |> Seq.sum 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-16T01:40:04.103

@Lee 和 @Tomas 的答案很棒，但还有更短的方法。

`(a, b, c)`如果您可以在调用时以三元组的形式传递：

```
let inline sumAll() = (|||>) >> List.sumBy
// usage
let predicates =
    [
        fun a b c -> a
        fun a b c -> b * 42.0 - c
    ]
let ret1 = predicates |> sumAll()(1.0, 2.0, 3.0) 
```

它也将是通用的：

```
let predicates2 =
    [
        fun a b c -> c - 10
        fun a b c -> a + c * 42
    ]
let ret2 = predicates2 |> sumAll()(1, 2, 3) 
```

一种支持咖喱参数的更易读的方式：

```
let sumAllCurried a b c = (a,b,c) |> (|||>) |> List.sumBy<_, float> 
// usage
let ret3 = predicates |> sumAllCurried 1.0 2.0 3.0 
```

请注意，我使用类型参数 on`List.sumBy`因为它看起来比为`f`.

# c++ - difftime 和 strftime 值的差异

> ID：14345965
> 
> 赞同：0
> 
> 时间：2013-01-15T20:08:36.417
> 
> 标签：c++, time, mktime

我看到时间函数有所不同，想知道是什么原因。目前，我正在使用 localtime、mktime、strftime 和 difftime：

```
time_t ltime; 
ltime = time(NULL); 
StartTM = localtime(&ltime); 
time_t time1 = mktime(StartTM ); 
char startbuffer [128]; 
strftime( start_buffer, 128, "%H:%M:%S", StartTM ); 
<<Do some stuff, take some time >>>
time_t ttime; 
ttime = time(NULL); 
StopTM = localtime(&ttime); 
time_t time2 = mktime(StopTM ); 
char stop_buffer [128]; 
strftime( stop_buffer, 128, "%H:%M:%S:", StopTM ); 
double wtinsec = difftime(time2, time1); 
```

执行后，输出如下：

停止缓冲区=08:46:18

开始缓冲区=08:44:11

wtsec=129

手动从停止减去开始，时间长度为 2:07，但总秒数（difftime）为 2:09。由于两次计算都使用相同的原始数据（time1、time2），我最初的想法是 strftime 转换缺乏精度，而 difftime 是造成这种情况的原因。

但差异不是恒定的。如果 2 个本地呼叫之间的时间很短（例如 10 秒），则没有区别。但是，随着 2 次调用之间的时间变长，时间总和的差异会变大。2分钟，2秒，5分钟，4秒，依此类推......

为什么会发生这种情况，是否有任何更准确的（在 C++ 中）最好以微/毫秒为单位，可以跟踪一天中的时间并从另一个中减去一个？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:19:56.590

`ltime`和中的值`time1`应该相同；往返`localtime()`，`mktime()`应该会给你你开始的答案。同样，当然，对于`ttime`和`time2`。

此 C 代码演示了预期的行为。您需要仔细查看您的代码以找出问题所在。

```
#include <stdio.h>
#include <time.h>
#include <unistd.h>

int main(void)
{

    time_t     ltime = time(NULL); 
    struct tm *start = localtime(&ltime); 
    time_t     time1 = mktime(start); 
    char startbuffer[128]; 
    strftime(startbuffer, sizeof(startbuffer), "%H:%M:%S", start); 
    printf("lt = %10lu, t1 = %10lu, time = %s\n",
           (unsigned long)ltime, (unsigned long)time1, startbuffer);

    sleep(10);

    time_t     ttime = time(NULL); 
    struct tm *finis = localtime(&ttime); 
    time_t     time2 = mktime(finis); 
    strftime(startbuffer, sizeof(startbuffer), "%H:%M:%S", finis); 
    printf("lt = %10lu, t1 = %10lu, time = %s\n",
           (unsigned long)ttime, (unsigned long)time2, startbuffer);

    printf("diff time = %.2f\n", difftime(time2, time1));

    return(0);
} 
```

示例输出（来自 Mac OS X 10.7.5）：

```
lt = 1358284665, t1 = 1358284665, time = 13:17:45
lt = 1358284675, t1 = 1358284675, time = 13:17:55
diff time = 10.00 
```

我建议查看代码中的值，类似于我所做的方式。您可能（也可能不会）打印出`struct tm`结构的内容。编写一个函数来处理 7 行重复代码块是值得的；你需要它来返回`time1`，`time2`当然，你可以在“主”代码中做不同的事情。还要记住，`localtime()`可能会返回相同的指针两次；在您使用结束时间调用后，您无法可靠地使用开始时间结构`localtime()`。

# html - 为什么我不能在 Perl 中使用 WWW::Mechanize::Firefox 提交我的表单？

> ID：14345970
> 
> 赞同：1
> 
> 时间：2013-01-15T20:08:43.800
> 
> 标签：html, perl, mechanize

我有一个 HTML，这是我正在处理的表单的一部分

```
<form action="/goform/FormUpdateVAP" autocomplete="off" name="myform" id="formid" method="POST">
<table>
    <tbody>             
            <tr>
                <td align="right"><span class="label">Name:</span></td>
                <td><input id="essid" name="essid"  value="X" type="text"></td>
            </tr>
            <tr>
                <td align="right"><input id="broadcast_essid" name="broadcast_essid" value="any" checked="" type="checkbox"></td>
                <td><span class="label">Broadcast name:</span></td>
            </tr>
    </tbody>
</table>
<!-- BEGIN RIGHT COLUMN -->
<table>
    <tbody><tr>
        <td>
            <input name="authentication" id="authentication" value="any" onclick="Update();" type="checkbox"><span class="label"><b>authentication</b></span>
        </td>
        <td>
            <input onclick="Update();" name="wp" id="wp" value="any" type="checkbox"><span class="label"><b>Wp</b></span>
            <select id="8021x_mode" name="8021x_mode" onchange="Update();"><option value="wpa">WPA</option>
            <option value="wep">WEP</option>
            </select>
        </td>

    </tr>
    <tr>
        <td height="26">&nbsp;
            <input onclick="Update();" name="w_p" id="w_p" value="any" type="checkbox"><span class="label"><b>Wp</b></span>
            <select id="8021x_mode" name="8021x_mode" onchange="Update();"><option value="wpa">WPA</option>
            <option value="wep">WEP</option>
            </select>
        </td>
    </tr>
    <tr>
    <td>
        <input id="cancel" name="cancel" value="Cancel" onclick="window.location.href = '/fg/list.asp';" type="button">

    </td>
    <td>
        <input id="add-2" name="add" value="Save" type="submit">
    </td>
</tr>
</tbody>
</table> 
```

我正在尝试填写名称和广播名称来提交它。并检查**8021x_mode**和**wp**复选框。如果我勾选**8021x_mode**并设置表单提交的字段就好了。但是当我尝试勾选**wp**时，它不会提交。我没有收到错误消息。到目前为止，这是我的代码：

```
use WWW::Mechanize::Firefox;
use Crypt::SSLeay;
use URI::Fetch;
use HTML::TagParser;
$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME}=0; #not verifying certificate

my $url = 'https://';
$url = $url.@ARGV[0]; 
my $mech = WWW::Mechanize::Firefox->new;
$mech->get($url);

$mech->form_id('formid');
$mech->tick( '8021x_mode','any'); 
$mech->tick( 'wp','any'); --after I add this the form doesn't submit
my $name = @ARGV[1];

$mech->set_fields(
    'vap_name' => $name, 
    'essid' => $name,
);
$mech->click_button( id => 'add-2' );
$mech->reload(); 
```

**add-2**是提交按钮。知道为什么不工作吗？如果您需要更多信息，请现在告诉我。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:48:41.813

问题是 html 不包含`any`8021x_mode 的选择。

我收到此错误：

> 在 test.pl 第 24 行找不到名称为“8021x_mode”且值为“any”的复选框的元素。

要检查表格，我建议您使用`mech-dump`实用程序（与 一起安装`WWW::Mechanize`）

```
$ mech-dump --forms http://domain.tld/path_to_forms
POST /goform/FormUpdateVAP [myform]
  essid=X                        (text)
  broadcast_essid=<UNDEF>        (checkbox) [*<UNDEF>/off|any]
  authentication=<UNDEF>         (checkbox) [*<UNDEF>/off|any/authentication]
  wp=<UNDEF>                     (checkbox) [*<UNDEF>/off|any/Wp]
  8021x_mode=wpa                 (option)   [*wpa/WPA|wep/WEP]
  w_p=<UNDEF>                    (checkbox) [*<UNDEF>/off|any/Wp]
  8021x_mode=wpa                 (option)   [*wpa/WPA|wep/WEP]
  cancel=Cancel                  (button)
  add=Save                       (submit) 
```

如您所见，`any`别无选择...

也许`javascript`那里正在做一些我们不知道的事情。

一种解决方法是使用`LiveHttpHeaders` `Firefox`插件来捕获`POST`ed 到的表单`/goform/FormUpdateVAP`，然后`POST`使用`WWW::Mechanize`.

# unit-testing - 使用 mockFor 和 MockDomain 发出覆盖方法

> ID：14345971
> 
> 赞同：0
> 
> 时间：2013-01-15T20:08:45.477
> 
> 标签：unit-testing, grails

我正在尝试对服务进行单元测试，并且我想使用模拟来覆盖域对象上的方法，该方法从数据库中检索文件。

```
 def mockElem = mockFor(DataElement, false)
    mockElem.demand.getFile(){return tempFile}

    def dataElem = mockElem.createMock()
    dataElem.orderId = "123"
    dataElem.id = tempFileName
    dataElem.dataType = "cnv"
    dataElem.dataStatus = DataStatus.TRANSFERED
    mockDomain(DataElement, [dataElem]) 
```

当我在数据元素上调用动态查找器时，我希望这个模拟域与 getFile 的 mockFor 需求功能一起返回。到达 MockDomain 行时抛出断言错误

> junit.framework.AssertionFailedError：此时不应调用“getClass”。仍然需要 1 次调用“getFile”。在 groovy.mock.interceptor.StrictExpectation.match(StrictExpectation.groovy:56) 在 grails.test.GrailsMock.createMock_closure1(GrailsMock.groovy:136) 在 grails.test.MockUtils.updateMetaClassForClass_closure95(MockUtils.groovy:1297) 在 groovy。 lang.Closure.call(Closure.java:412) 在 grails.test.MockUtils.updateMetaClassForClass(MockUtils.groovy:1294) 在 grails.test.MockUtils.mockDomain 的 groovy.lang.Closure.call(Closure.java:425) (MockUtils.groovy:470) 在 grails.plugin.spock.UnitSpec.mockDomain(UnitSpec.groovy:141) 在 com.genospace.inbound.pg.HemeCNVPipelineTestSpec.test 处理血红素文件(HemeCNVPipelineTestSpec.groovy:66)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:38:03.837

不知道是什么问题。

您收到此错误是因为您两次模拟一个对象：

*   与`mockFor`/`createMock`
*   和`mockDomain`

`mockDomain`需要知道一些关于作为参数传递的对象的信息（这里它验证类是正确的）但`mockFor`不允许`getClass()`被调用：你没有`demand`为这样的调用添加一个。

你真的需要嘲笑`demand`吗？

我认为简单的案例应该有效：

```
def dataElem = new DataElement()
dataElem.orderId = "123"
dataElem.id = tempFileName
dataElem.dataType = "cnv"
dataElem.dataStatus = DataStatus.TRANSFERED

dataElem.file = tempFile
mockDomain(DataElement, [dataElem]) 
```

# powershell - Powershell - Invoke-WmiMethod 以完全控制权限远程创建共享文件夹

> ID：14345972
> 
> 赞同：0
> 
> 时间：2013-01-15T20:08:52.360
> 
> 标签：powershell, wmi, share

我一直在使用这个脚本来创建我的用户文件夹，但我发现远程共享文件夹是使用只读共享创建的。

我的问题是如何创建与`$domainname\domain`用户的共享文件夹`full control`？

```
Invoke-WmiMethod -Class win32_share -name Create -ArgumentList `
 @($null,"",100,"hideshare$","",e:\users\hideshare,0) -computername "DestinationSRV" 
```

我找到了许多带有答案的线程，但不是我使用的方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T20:55:15.473

尝试：

```
#Username/Group to give permissions to
$trustee = ([wmiclass]'Win32_trustee').psbase.CreateInstance()
$trustee.Domain = "domainname"
$trustee.Name = "username or groupname"

#Accessmask values
$fullcontrol = 2032127
$change = 1245631
$read = 1179785

#Create access-list
$ace = ([wmiclass]'Win32_ACE').psbase.CreateInstance()
$ace.AccessMask = $fullcontrol
$ace.AceFlags = 3
$ace.AceType = 0
$ace.Trustee = $trustee

#Securitydescriptor containting access
$sd = ([wmiclass]'Win32_SecurityDescriptor').psbase.CreateInstance()
$sd.ControlFlags = 4
$sd.DACL = $ace
$sd.group = $trustee
$sd.owner = $trustee

$share = Get-WmiObject Win32_Share -List -ComputerName "DestinationSRV"
$share.create("e:\users\hideshare", "hideshare$", 0, 100, "Description", "", $sd) 
```

此共享的安全性将只允许指定的用户名。您需要修改它（添加多个 ace）以添加不同的组、添加每个人等。

[访问部分的来源](http://itknowledgeexchange.techtarget.com/powershell/setting-permissions/)

# ruby - Ruby 2.3.15 错误：格式错误的版本号字符串

> ID：14345973
> 
> 赞同：0
> 
> 时间：2013-01-15T20:08:52.803
> 
> 标签：ruby, ruby-on-rails-2

我正在努力将在 Ubuntu 上运行 Rails 2.3.2 的旧 Rails 应用程序升级到最新的 Rails 2.3.15。该应用程序最初有一个供应商版本的rails，`vendor/rails`但我已经删除了它，安装了`rails 2.3.15`gem，并将版本号更改`config/environment.rb`为：

```
RAILS_GEM_VERSION = '2.3.15' unless defined? RAILS_GEM_VERSION 
```

重新启动应用程序后，我在 mongrel 日志中收到此错误消息（这会阻止应用程序启动）：

```
/usr/local/lib/site_ruby/1.8/rubygems/version.rb:53:in `initialize': Malformed version number string  (ArgumentError)
    from /usr/lib/ruby/gems/1.8/gems/rails-2.3.15/lib/rails/vendor_gem_source_index.rb:105:in `new'
    from /usr/lib/ruby/gems/1.8/gems/rails-2.3.15/lib/rails/vendor_gem_source_index.rb:105:in `version_for_dir'
    from /usr/lib/ruby/gems/1.8/gems/rails-2.3.15/lib/rails/vendor_gem_source_index.rb:47:in `refresh!'
    from /usr/lib/ruby/gems/1.8/gems/rails-2.3.15/lib/rails/vendor_gem_source_index.rb:45:in `each'
    from /usr/lib/ruby/gems/1.8/gems/rails-2.3.15/lib/rails/vendor_gem_source_index.rb:45:in `refresh!'
    from /usr/lib/ruby/gems/1.8/gems/rails-2.3.15/lib/rails/vendor_gem_source_index.rb:29:in `initialize'
    from /usr/lib/ruby/gems/1.8/gems/rails-2.3.15/lib/rails/gem_dependency.rb:21:in `new'
    from /usr/lib/ruby/gems/1.8/gems/rails-2.3.15/lib/rails/gem_dependency.rb:21:in `add_frozen_gem_path'
     ... 17 levels...
    from /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/command.rb:212:in `run'
    from /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/mongrel_rails:281
    from /usr/bin/mongrel_rails:19:in `load'
    from /usr/bin/mongrel_rails:19 
```

我需要做什么才能克服这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T23:35:42.450

我找到了我的问题的答案...

Rails 期望只有目录位于 中`vendor/gems`，但其中有一个`init.rb`文件试图将 gem 添加到加载路径（Rails 已处理）。

# python - scipy 给出未定义的符号：clapack_sgesv

> ID：14345974
> 
> 赞同：0
> 
> 时间：2013-01-15T20:08:55.610
> 
> 标签：python, numpy, compiler-errors, scipy, lapack

我想有一个干净的开始，所以我编译了我自己的最新 ATLAS、Lapack 和 Python 2.7.3 的副本。

我已经安装了 numpy，它可以识别来自 ATLAS 的 BLAS 以及以下工作......

```
 python
  import numpy
  numpy.test() 
```

但是scipy可没那么容易！

```
$ python
Python 2.7.3 (default, Jan 14 2013, 13:13:35)
[GCC 4.4.6 20120305 (Red Hat 4.4.6-4)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import scipy.linalg
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/projects/nrel/cid/ladab/pkgi/lib/python2.7/site-packages/scipy/linalg/__init__.py", line 133, in <module>
    from basic import *
  File "/projects/nrel/cid/ladab/pkgi/lib/python2.7/site-packages/scipy/linalg/basic.py", line 12, in <module>
    from lapack import get_lapack_funcs
  File "/projects/nrel/cid/ladab/pkgi/lib/python2.7/site-packages/scipy/linalg/lapack.py", line 15, in <module>
    from scipy.linalg import clapack
ImportError: /projects/nrel/cid/ladab/pkgi/lib/python2.7/site-packages/scipy/linalg/clapack.so: undefined symbol:
+clapack_sgesv

$ which python
/projects/nrel/cid/ladab/pkgi/bin/python

$ ldd /projects/nrel/cid/ladab/pkgi/lib/python2.7/site-packages/scipy/linalg/clapack.so
        linux-vdso.so.1 =>  (0x00007fff57bff000)
        libgfortran.so.3 => /usr/lib64/libgfortran.so.3 (0x00007f9229192000)
        libm.so.6 => /lib64/libm.so.6 (0x00007f9228ef4000)
        libgcc_s.so.1 => /lib64/libgcc_s.so.1 (0x00007f9228cde000)
        libc.so.6 => /lib64/libc.so.6 (0x00007f922894b000)
        /lib64/ld-linux-x86-64.so.2 (0x000000387dc00000)

$ cat scipy-0.11.0/site.cfg
[DEFAULT]
library_dirs = /projects/nrel/cid/ladab/pkgi/lib
include_dirs = /projects/nrel/cid/ladab/pkgi/include
[blas_opt]
libraries = f77blas, cblas, atlas
[lapack_opt]
libraries = lapack, f77blas, cblas, atlas

$ env | egrep python
PYTHONPATH=/projects/nrel/cid/ladab/pkgi/lib/python2.7/site-packages 
```

搜索 clapack_sgesv 的定义，我在 site-packages/scipy 中找不到：

```
$ cd /projects/nrel/cid/ladab/pkgi/lib/python2.7/site-packages/scipy/linalg

$ for ii in *.so; do echo ========== $ii; nm $ii | egrep clapack_sgesv
> done
========== atlas_version.so
========== calc_lwork.so
========== cblas.so
========== clapack.so
                 U clapack_sgesv
00000000002103e0 d doc_f2py_rout_clapack_sgesv
0000000000009810 t f2py_rout_clapack_sgesv
========== fblas.so
========== flapack.so
========== _flinalg.so 
```

它显然在 LD_LIBRARY_PATH 上可用，但 scipy 没有使用它......

```
$ echo $LD_LIBRARY_PATH
/projects/nrel/cid/ladab/pkgi/lib:/usr/lib64

$ cd /projects/nrel/cid/ladab/pkgi/lib

$ for ii in *.so; do echo ========== $ii; nm $ii | egrep clapack_sgesv; done
========== libsatlas.so
0000000000094ce0 T clapack_sgesv
========== libtatlas.so
00000000000accb0 T clapack_sgesv 
```

你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:10:11.260

非常感谢 Adam Cadien 的评论…… [http://www.scipy.org/Installing_SciPy/Linux](http://www.scipy.org/Installing_SciPy/Linux)中关于“在 Ubuntu（2010 年 11 月）上使用 gfortran 从源代码构建所有内容”的部分仍然运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T17:17:26.613

从 Ubuntu 12.04 升级到 12.10 后，我遇到了这个问题。问题是我在 /usr/local/lib/python2.7/dist-packages 中安装了两个版本的 scipy。为了解决我所做的问题：

```
 sudo apt-get remove python-scipy
 sudo rm -fr /usr/local/lib/python2.7/dist-packages/scipy*
 sudo apt-get install python-scipy 
```

# html - 文本框上的 css 转换属性

> ID：14345980
> 
> 赞同：0
> 
> 时间：2013-01-15T20:09:32.350
> 
> 标签：html, css, textbox, transform

我托管了我的网站，并使用 css3 转换来旋转其中一个页面的内容。你可以看看[这里](http://www.tauqirpervez.com/contact/)。如果我在 Firefox 中打开页面，当我单击任何文本框时，自动完成建议会显示为好像文本框没有旋转，这会使网站看起来很糟糕。我在容器 div 上应用了以下转换：

```
-webkit-transform: rotate(355deg);
-moz-transform: rotate(355deg);
-o-transform: rotate(355deg); 
```

快照如下图所示。 ![图像快照](../Images/75ca8ab26bbe68915dc1fce7dbf0d821.png) 谁能建议我如何解决它？提前致谢。:)

PS：Chrome由于某种原因没有给我自动完成功能，在多个系统中尝试过。

编辑：

我正在使用 asp 文本框，所以我可以使用`autocompletetype="disabled"`来关闭自动完成功能，但我想知道是否有办法解决此问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T20:15:21.073

你能通过关闭自动完成来修复它吗？

```
<input type="text" name="name" autocomplete="off" /> 
```

**编辑：** 否则似乎不可能：[如何设置浏览器的自动完成下拉框的样式？](https://stackoverflow.com/questions/11595824/how-to-style-the-browsers-autocomplete-dropdown-box)

# html - 标签表单字段对齐css

> ID：14345982
> 
> 赞同：1
> 
> 时间：2013-01-15T20:09:38.880
> 
> 标签：html, css, twitter-bootstrap

如何使表单字段的标签与帐单地址标题垂直对齐？ [http://jsfiddle.net/DA9gK/1/](http://jsfiddle.net/DA9gK/1/)

```
<h4 class="billingAddress">Billing Address</h4>

<div class="control-group">
    <label class="control-label" for="inputEmail">Company Name</label>
    <div class="controls">
        <input type="text" id="inputEmail">
    </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:05:52.587

看看 css[盒子模型](http://www.w3schools.com/css/css_boxmodel.asp)，如果你能实现它，你的间距问题应该会消失。浮动是其他一些需要考虑的因素，但是......你会从这里特别受益......我找不到链接，所以这样做：

```
<div id="head"></div>
<div id="nav"></div>
<div id="wrapper"></div>
<div id="leftcolumn"></div>
<div id="rightcolumn"></div>
<div id="footer"></div> 
```

您可以根据您的风格在 head 和 nav 之间共享一条线，您的左侧表单对象进入 leftcolumn，右侧进入右侧，页脚通常保持自己的线条。这依赖于包装器的绝对定位和我相信的其他一切的相对定位。浮点数也可以，但被认为不太灵活。

这种方法应该让您能够控制使您的页面“提琴手”示例看起来不错所需的间距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:26:31.320

添加

```
.form-horizontal .control-label {
     text-align: left;
  } 
```

到您的 CSS 部分...这是您想要的吗？

# python - Bottle.py 以较短的延迟提供较大的图像导致零长度响应

> ID：14345986
> 
> 赞同：0
> 
> 时间：2013-01-15T20:09:48.770
> 
> 标签：python, bottle

我在 Bottle.py 中定义了以下静态路由

```
@get('/create/new/image', apply=[auth_request])
def request_new_image():
   file = invoke_image_creation()
   return static_file(file, root='pics',
                      mimetype='image/jpg') 
```

在该方法中`invoke_image_creation()`，一个简单的事件锁 ( `threading.Event`) 用于让应用程序阻塞，直到创建图像。然后它应该返回静态文件。

对于小图像，这适用，对于较大的图像（1280x720，大约 50 KB），它会返回：

*   HTTP 200
*   没有回复内容
*   内容长度：0
*   MIME 类型：图像/jpg

阻塞只持续片刻，不到一秒钟，只是为了确保它在那里。

是什么原因造成的？使用[简单的路由静态文件功能](http://bottlepy.org/docs/dev/tutorial.html#routing-static-files)可以很好地处理完全相同的图片。唯一的区别是，该文件是预先存在的，并且它在 HTTP GET 请求中定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:27:38.897

文件打开和文件数据刷新到磁盘之间存在延迟，因此如果您正在监视文件创建事件，您可以轻松返回本质上仍然是空文件的内容。

您需要更改通知以侦听更改而不是新文件，或者确保新文件已完全形成。

要执行后者，请更改外部进程以在其他位置创建文件，然后在创建图像后将文件移动到您正在观看的位置。如果这两个位置在同一个分区上，则移动将是原子的；如果您的文件监控看到该文件出现，则可以保证此时该文件非空。

或者，伪python代码，在您的单独进程中：

```
import shutil

createImage(locA, filename)
shutil.move(os.path.join(locA, filename), locB) 
```

并观看`locB`。

# java - 正则表达式 String.split()

> ID：14345995
> 
> 赞同：3
> 
> 时间：2013-01-15T20:10:15.547
> 
> 标签：java, regex, string

我正在使用 java 来拆分形式的字符串：

```
String stringToSplit = "AAA BBB CCC DDD EEE FFF GGG HHH III JJJ KKK"; 
```

我在用着

```
String[] tokens = stringToParse.split("\\s"); 
```

沿空白分割字符串，给出：

```
tokens = {"AAA","BBB","CCC", "DDD","EEE","FFF","GGG","HHH","III", "JJJ", "KKK"} 
```

我现在需要做的是将它们中的大多数沿着空格分开，但在特定情况下还要保持一些字符串在一起。例如，当我拆分时，我希望“CCC DDD”和“III JJJ KKK”保持完整的字符串。所以我希望我的令牌数组是：

```
tokens = {"AAA","BBB","CCC DDD","EEE","FFF","GGG","HHH","III JJJ KKK"} 
```

我会使用什么正则表达式？这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T20:13:53.520

您可以用 ccc_ddd 替换 ccc ddd ，然后稍后将下划线转换回空格。

如果你要做很多这样的事情，你可能想投资某种语法解析器

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T20:19:44.983

除了使用`split()`，您可以使用以下方法查找所有连续的非空白字符，但使用交替来匹配包含空白的特定目标字符串：

```
Pattern p = Pattern.compile("CCC DDD|III JJJ KKK|\\S+");
Matcher m = p.matcher("AAA BBB CCC DDD EEE FFF GGG HHH III JJJ KKK");
while(m.find()) {
    System.out.println(m.group());
} 
```

示例：http: [//ideone.com/AxI1CV](http://ideone.com/AxI1CV)

# delphi - Firemonkey 中的 DirectX10 支持（非 10.1）

> ID：14345997
> 
> 赞同：2
> 
> 时间：2013-01-15T20:10:21.070
> 
> 标签：delphi, delphi-xe3, direct2d, directx-10

是否可以下降到 DX10 而不是 DX10.1 支持。我有一个客户的电脑只支持 DX10，所以他们不能利用 Direct2D，因为 FM 似乎只支持 10.1

我尝试修改源以使用 DX10（FMX.Canvas.D2D 和 FMX.Context.DX10），并再次切换到 DX10，但一个调用似乎失败了。

我修改了共享设备的创建方式

```
if not Assigned(FSharedDevice) then 
begin
SaveClearFPUState;
try
Flags := {$ifdef DXDEBUG}D3D10_CREATE_DEVICE_DEBUG{$else}0{$endif};
Flags := Flags or D3D10_CREATE_DEVICE_BGRA_SUPPORT;
HR := D3D10CreateDevice(nil, FDriverType, 0, Flags, D3D10_SDK_VERSION, FSharedDevice);
if Succeeded(HR) then
begin
HR := FSharedDevice.CreateBuffer(TD3D10_BufferDesc.Create(VBSize, D3D10_BIND_VERTEX_BUFFER, D3D10_USAGE_DYNAMIC, D3D10_CPU_ACCESS_WRITE), nil, @FVB);
HR := FSharedDevice.CreateBuffer(TD3D10_BufferDesc.Create(IBSize, D3D10_BIND_INDEX_BUFFER, D3D10_USAGE_DYNAMIC, D3D10_CPU_ACCESS_WRITE), nil, @FIB);
// Acquire device DXGI factory
HR := FSharedDevice.QueryInterface(IDXGIDevice, DXGIDevice);
if Succeeded(HR) and (DXGIDevice <> nil) then
begin
HR := DXGIDevice.GetParent(IDXGIAdapter, DXGIAdapter);
if Succeeded(HR) and (DXGIAdapter <> nil) then
HR := DXGIAdapter.GetParent(IDXGIFactory, FDXGIFactory);
end;
if not Assigned(FDXGIFactory) then
HR := CreateDXGIFactory(IDXGIFactory, FDXGIFactory);
end;
finally
RestoreFPUState;
end;
end; 
```

当我使用设备时，我使用下面这样的代码..

```
SharedDevice: ID3D10Device

if Assigned(TCustomDX10Context.SharedDevice) then
begin
FillChar(Desc, SizeOf(D3D10_TEXTURE2D_DESC), 0);
Desc.Format := DXGI_FORMAT_B8G8R8A8_UNORM;
Desc.Width := 1;
Desc.Height := 1;
Desc.MipLevels := 1;
Desc.ArraySize := 1;
Desc.SampleDesc.Count := 1;
Desc.SampleDesc.Quality := 0;
Desc.Usage := D3D10_USAGE_DEFAULT;
Desc.BindFlags := D3D10_BIND_RENDER_TARGET or D3D10_BIND_SHADER_RESOURCE;
Res := TCustomDX10Context.SharedDevice.CreateTexture2D(Desc, nil, FSharedTexture);
Prop := D2D1RenderTargetProperties(TargetMode, D2D1PixelFormat(DXGI_FORMAT_UNKNOWN, D2D1_ALPHA_MODE_PREMULTIPLIED));
Res := FFactory.CreateDxgiSurfaceRenderTarget(FSharedTexture as IDXGISurface, Prop, FSharedRenderTarget);
end; 
```

我在源代码中创建了一个开关，允许我在 10.1 和 10 设备之间切换，并修改了 FMX.Canvas.D2D 和 FMX.Context.DX10 中的所有代码以使用替代设备。

但...

CreateDxgiSurfaceRenderTarget 失败，错误代码为 -2147024809。

所以应用程序加载，但表单都是空白的，因为无法创建目标。

有哪位大师可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:52:14.980

Direct2D 1.0 支持与 Direct3D 10.1 的互操作，但它仍然可以通过功能级别选择支持 Direct3D 10.0 硬件。我对Delphi一无所知，但不是调用D3D10CreateDevice来创建Direct3D设备，而是需要调用D3D10CreateDevice1函数。然后，您可以简单地请求所需的功能级别，例如 D3D10_FEATURE_LEVEL_10_0。