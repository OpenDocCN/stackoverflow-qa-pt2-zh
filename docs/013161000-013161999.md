# StackOverflow 问答 13161000-13161999

# ruby-on-rails - Capistrano 在尝试部署时抱怨

> ID：13161000
> 
> 赞同：2
> 
> 时间：2012-10-31T15:07:38.007
> 
> 标签：ruby-on-rails, capistrano, rvm-capistrano

```
$ bundle exec cap -S branch=master production deploy --dry-run
/Users/myname/.rvm/lib/rvm/capistrano.rb:5: RVM - Capistrano integration was extracted to a separate gem, install: `gem install rvm-capistrano` and remove the `$LOAD_PATH.unshift` line, note also the 'set :rvm_type, :user' is now the default (instead of :system). (RuntimeError) 
```

这就是我得到的。不知道发生了什么。想法？

**编辑**我的`deploy.rb`

```
# RVM is used for ruby 1.9.2 - this is so cap can see the rvm gemset.
$LOAD_PATH.unshift "lib", File.expand_path('./lib', ENV['rvm_path'])

set :stages, %w(sandbox qa production)
require 'capistrano/ext/multistage'
require 'bundler/capistrano'
require 'airbrake/capistrano'
require 'chef/capistrano'
require 'secure_files/capistrano'
require "rvm/capistrano"

set :rvm_ruby_string, '1.9.2'
set :rvm_bin_path, '/usr/local/rvm/bin'
set :user, "root"
set :scm, :git
set :repository,  "git@github.com:Myact/fbadapter.git"
set :deploy_to, '/var/www/fbadapter'
set :deploy_via, :remote_cache
set :rails_env, Proc.new {stage}
set :application, 'fbadapter'
set :default_environment, Proc.new { { 'RAILS_ENV' => stage } }
set :rake, "bundle exec rake --trace"
set :foreman_bin, 'bundle exec foreman'
set :rake, "#{foreman_bin} run rake"  
set :rails, "#{foreman_bin} run rails"
set :app_user, 'www-data'

set :bundle_without,  [:development, :test, :ops, :darwin]

# this must be set before foreman/capistrano is read
set :foreman_roles, [:app]
require "foreman/capistrano"

after 'multistage:ensure' do
 role_from_chef :db, 'app', :limit => 1, :primary => true # perform db operations on one of the app servers
 role_from_chef :web, 'app'
 role_from_chef :app
 role_from_chef :queue
 role_from_chef :cron
end

before 'deploy:symlink', 'deploy:assets:precompile', 'deploy:migrate'
after 'deploy:symlink', :set_application_permissions

after 'deploy', 'deploy:cleanup', 'campfire:deploy_stop'
after 'rollback', 'campfire:deploy_rollback'

desc 'Changes the permissions for the release path to be used with www-data'
task :set_application_permissions do
  run "chown -R #{app_user}:#{app_user} #{release_path}/*"
end

# These services are monitored by monit, but interacting with them that way
# is hugging-every-cat crazy. This means we're assuming two thin procs per
# app server; if that changes then remember to change this too.

namespace :deploy do
  task :stdout_logger do 
    run "cd #{release_path} && #{rails} plugin install https://github.com/ddollar/rails_log_stdout.git"
  end

  before 'deploy:symlink', 'deploy:stdout_logger'
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T03:53:28.583

这是我的。这些是我必须使用 rvm-capistrano gem 的唯一行。如果有帮助，我也会以非 sudo 用户的身份进行部署。

```
set :rvm_ruby_string, '<interpreter>@<gemset>'

# Load RVM's capistrano plugin.
require "rvm/capistrano"
set :rvm_path, "$HOME/.rvm" 
```

由于您正在运行 bundle exec，请确保 rvm 和 rvm-capistrano gem 在您的 Gemfile 中。还可以根据需要更改下面的 rvm_ruby_string。

我很确定您也需要删除此行

```
LOAD_PATH.unshift "lib", File.expand_path('./lib', ENV['rvm_path']) 
```

我还注意到您正在使用“root”用户进行部署。可以肯定的是，除非为 root 用户安装了 rvm，否则这不会起作用。如果您必须使用 root 用户，我会尽可能使用 rvm 包装器。

[RVM 包装器](https://rvm.io/integration/god/)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:19:49.290

你能发布你的新 deploy.rb 文件吗？另外，确认确实安装了 rvm-capistrano gem？

此外，如果您还没有添加`require "rvm/capistrano"`到 deploy.rb 文件的顶部。这就是对我有用的东西。

# c# - 为什么调用 DatabaseInstance.ExecuteSprocAccessor (...) 这么简单的查询要花这么长时间？

> ID：13161009
> 
> 赞同：3
> 
> 时间：2012-10-31T15:08:03.683
> 
> 标签：c#, performance, sql-server-2008-r2, daab, data-access-app-block

调用数据访问应用程序块时非常奇怪的减速。

它调用的 SP（“QuestionsToBeAnswered”）在不到 1 秒的时间内返回 58 行和三列（两个 GUID 和一个整数：21AF77DA-2E76-47DB-AB54-0E5C85CD9AD8、21AF77DA-2E76-47DB-AB54-0E5C85CD9AF0、2）直接在服务器上执行。我的 SQL 体验非常好，我确信 SQL 服务器上不存在该问题。

但是，当它通过 DAAB 调用时，需要很长时间才能返回对象集合。ExecuteSprocAccessor(...) 通常返回一个 IEnumerable，并且 SP 直到集合被枚举或以其他方式被消耗后才被执行，所以这个问题在消耗发生之前不会出现。

```
DatabaseInstance.ExecuteSprocAccessor<T>(storedProcedure, rowMapper, args); 
```

鉴于相同的代码返回 >200 行相当复杂的信息没有问题，我很困惑为什么这段代码需要这么长时间（55 秒！）来执行。

任何想法都会受到欢迎...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T21:41:42.890

您可以尝试运行 SQL Profiler 以查看使用 DAAB 运行时实际调用的样子。有了它，看看它正在使用的执行计划。

过去，我编写了一些代码，它们作为 SQL 查询运行良好，但作为存储过程却非常慢。结果是查询优化器对一些重复索引使用了不同的 SQL Query 执行计划，然后是存储过程。在对索引进行排序后，两者都以相同的速度运行。

# c# - Windows 8 中的位置

> ID：13161016
> 
> 赞同：-1
> 
> 时间：2012-10-31T15:08:14.417
> 
> 标签：c#, windows-8

我正在尝试在 Windows 8 中创建一个可以定位用户位置的应用程序。为此，我有以下课程

```
public sealed partial class Cercano : CentrosCo.Common.LayoutAwarePage
{
    Geolocator geo = null;
    public Cercano()
    {
        this.InitializeComponent();
    }

    public async void button1_Click(
        object sender, RoutedEventArgs e)
    {
        if (geo == null)
        {
            geo = new Geolocator();
        }

        IGeoposition pos = await geo.GetGeopositionAsync();
        textLatitude.Text = "Latitude: " + pos.Coordinate.Latitude.ToString();
        textLongitude.Text = "Longitude: " + pos.Coordinate.Longitude.ToString();
        textAccuracy.Text = "Accuracy: " + pos.Coordinate.Accuracy.ToString();
    } 
```

在 IGeoposition 中得到错误：

> Windows.Devices.Geolocation.IGeoposition 由于其保护级别而无法访问，

选择已在宣言中的位置...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:16:32.270

[Geolocator.GetGeopositionAsync() 方法](http://msdn.microsoft.com/en-us/library/windows/apps/br225537.aspx)的异步返回类型是[*Geoposition*](http://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.geolocation.geoposition.aspx)，而不是*IGeoposition*。

试试这个：

```
Geoposition pos = await geo.GetGeopositionAsync(); 
```

# html - EBAY API：findItemsAdvanced 如何按关键字和类别搜索？

> ID：13161018
> 
> 赞同：0
> 
> 时间：2012-10-31T15:08:35.100
> 
> 标签：html, json, ebay-api, ebay-lms

一直在看EBAY api教程

[http://developer.ebay.com/DevZone/finding/HowTo/GettingStarted_JS_NV_JSON/GettingStarted_JS_NV_JSON.html](http://developer.ebay.com/DevZone/finding/HowTo/GettingStarted_JS_NV_JSON/GettingStarted_JS_NV_JSON.html)

但我想知道如何根据类别和关键字进行搜索。我通过使用 operation 来做到这一点`findItemsAdvanced`，但我真的不知道在这里做什么。我一直在努力让它工作，但我得到的是一个空页面。这是html：

```
<html>
<head>
<title>eBay Search Results</title>
<style type="text/css">body { font-family: arial,sans-serif;} </style>
</head>
<body>
<h1>eBay Search Results</h1>
<div id="results"></div>
<script>
//Parse the response and build an HTML table to display search results
function _cb_findItemsAdvanced(root) {

      var items = root.findItemsByKeywordsResponse[0].searchResult[0].item || [];
      var html = [];
      html.push('<table width="100%" border="0" cellspacing="0" cellpadding="3"><tbody>');
      for (var i = 0; i < items.length; ++i) {
        var item     = items[i];
        var title    = item.title;
        var pic      = item.galleryURL;
        var viewitem = item.viewItemURL;
        var price    = item.sellingStatus[0].currentPrice[0].__value__;

        if (null != title && null != viewitem) {
          html.push('<tr><td>' + '<img src="' + pic + '" border="0">' + '</td>' +
          '<td><a href="' + viewitem + '" target="_blank">' + title + '</a></td>'+ '<td>' + price + "$" + '</td></tr>');
        }
      }
      html.push('</tbody></table>');
      document.getElementById("results").innerHTML = html.join("");

}  // End _cb_findItemsByKeywords() function
//Construct the request
//Replace MyAppID with your Production AppID
var url = "http://svcs.ebay.com/services/search/FindingService/v1";
 url += "?OPERATION-NAME=findItemsAdvanced";
 url += "&SERVICE-VERSION=1.0.0";
 url += "&SECURITY-APPNAME=AppID";
 url += "&GLOBAL-ID=EBAY-US";
 url += "&RESPONSE-DATA-FORMAT=JSON";
 url += "&callback=_cb_findItemsAdvanced";
 url += "&REST-PAYLOAD";
 url += "&categoryId=1"; // video game  
 url += "&keywords=digimon%20world%201"; // change value to game title 
 url += "&paginationInput.entriesPerPage=6"; 

//Submit the request
 s=document.createElement('script'); // create script element
 s.src= url;
 document.body.appendChild(s);
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T10:46:23.380

您的代码中有两个小错误。

第一个是 categoryId - 在您指定的示例中`categoryId=1`。对于美国 eBay 网站上的视频游戏，这应该是`categoryId=139973`. 这应该会在您的 API 调用中为您提供结果。

第二个问题是在第 13 行解析 API 调用时：

`var items = root.findItemsByKeywordsResponse[0].searchResult[0].item || [];`

您的代码正在寻找 a`findItemsByKeywordsResponse`但您的 API 调用是`findItemsAdvanced`- 因此您需要将 Javascript 函数中的行更改为：

`var items = root.findItemsAdvancedResponse[0].searchResult[0].item || [];`

我刚刚对此进行了测试，并且效果很好！

# android - 如何调整android自定义对话框以使原始布局变暗？

> ID：13161019
> 
> 赞同：1
> 
> 时间：2012-10-31T15:08:36.433
> 
> 标签：android, dialog

我认为在正常情况下，当我打开 Android 对话框时，原始视图会变暗，我可以将视图聚焦在对话框上，关闭对话框后它将恢复。但是现在，我尝试使用 XML 制作一个自定义对话框`dialog.setContentView`。在这个时候，原来的活动视图不会变暗，我该如何调整？

我从网上找到了这种方法，但它不起作用，其他人也这么说。有谁知道为什么？

`WindowManager.LayoutParams lp = dialog.getWindow().getAttributes(); lp.dimAmount=0.6f; dialog.getWindow().setAttributes(lp);`

我认为下面的方式很吓人 `dialog.getWindow().addFlags(WindowManager.LayoutParams.FLAG_BLUR_BEHIND);`

-> 我发现这可能是我的活动问题。我使用来自 android 示例代码的自定义对话框视图活动。它使用 android:style/Theme.Dialog。现在在这个dialog activity中，希望能打开一个真实的dialog，并且dialog activity可以变暗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:16:25.200

尝试使用 ProgressDialog：

```
 ProgressDialog progressDialog;
    progressDialog = new ProgressDialog(this);
    progressDialog.setIndeterminate(true);
    progressDialog.setCancelable(true);
    progressDialog.setMessage("test");
    progressDialog.show(); 
```

这使我的测试中的背景变暗。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:18:16.700

尝试这个 ：

```
WindowManager.LayoutParams lp = dialog.getWindow().getAttributes();
lp.dimAmount=0.0f;
dialog.getWindow().setAttributes(lp);
dialog.getWindow().addFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND); 
```

# css - Chrome + Lucida Grande + 自动换行

> ID：13161024
> 
> 赞同：3
> 
> 时间：2012-10-31T15:08:45.230
> 
> 标签：css, google-chrome

我有一种奇怪的样式组合，它们只会在 Chrome 中导致问题。我整理了一个小提琴来展示这个问题：http: [//jsfiddle.net/C3CbF/1/](http://jsfiddle.net/C3CbF/1/)

当然，这只有在您安装了 Lucida Grande 字体的情况下才有效 - 否则它们看起来会一样。但是，如果您有 Lucida Grande，您会注意到第一个表中“测试”中的最后一个“t”，仅在 Chrome 中（并且可能仅在 Mac 上 - 我还没有测试过 PC），分解为第二个行，而第二张桌子很好。

所以，我的问题是，在不删除任何样式（如自动换行或字体）的情况下，有没有办法让它不中断（或适当中断）？

另请注意，`white-space: nowrap`这在这种情况下不起作用，因为如果单个单词的长度超过 300 像素（例如 URL 的情况），我希望将其中断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:24:46.403

我没有 Lucida Grande 字体，但我知道 [no] 环绕文本的最佳跨浏览器解决方案。看一下这个：

```
.nowrap {
    -webkit-white-space: nowrap;
    -khtml-white-space: nowrap;
    -moz-white-space: nowrap;
    -ms-white-space: nowrap;
    -o-white-space: nowrap;
    white-space: nowrap;

    word-wrap: normal;

    -webkit-word-break: keep-all;
    -khtml-word-break: keep-all;
    -moz-word-break: keep-all;
    -ms-word-break: keep-all;
    -o-word-break: keep-all;
    word-break: keep-all;
} 
```

查看更多：http: [//jsfiddle.net/iegik/ymSse/](http://jsfiddle.net/iegik/ymSse/)

# iphone - 应用程序在不应该在 iPhone 5 上全屏运行时

> ID：13161026
> 
> 赞同：-1
> 
> 时间：2012-10-31T15:09:07.983
> 
> 标签：iphone, ios, xcode

我正在 iPhone 5 上测试我的应用程序，但发生了一些奇怪的事情：

我正在为 iOS 5.1 进行开发，并且第一次在新 iPhone 5 上测试该应用程序时它运行正常。但是突然就全屏运行了！如果我在 iPhone 4 英寸模拟器上运行该应用程序，它会显示为正常（不是全屏）。在构建设置中，部署目标是 5.1。虽然在摘要中出现了一个用于 4 英寸视网膜的启动图像空间，并且出现了图像丢失的警告。

如何让应用程序再次在 iPhone 5 上“正常”运行（如 3.5 英寸）？

我正在使用 Xcode 4.5.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:14:21.207

只需从摘要视图中清理视网膜 4" 飞溅

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T20:43:50.917

做到了吗：如果 Xcode 自动将图像“default-586h@2x.png”添加到项目中，请确保它已从项目和源文件夹中正确删除。然后转到产品-> 清洁。从模拟器/iPhone 中手动删除应用程序。构建并运行。问题解决了。

# xml - JAXB 设置 @XmlRootElement

> ID：13161028
> 
> 赞同：1
> 
> 时间：2012-10-31T15:09:11.433
> 
> 标签：xml, jaxb

是否可以在运行时设置@XmlRootElement？我有一个需要转换为 xml 的类，但该类应该转换为多个 XML，唯一不同的是根元素名称。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T15:19:12.957

如果该类表示一种可由多个元素名称使用的 XML 模式类型，则不应对其进行注释`@XmlRootElement`。相反，它应该是 annotated `@XmlType`，并且当您想要将 XML 的实例编组`MyType`为 XML 时，您将其包装在`JAXBElement<MyType>`指定元素名称的 a 中。

# python - 使用 Tastypie 上的自定义验证类获取错误消息

> ID：13161029
> 
> 赞同：1
> 
> 时间：2012-10-31T15:09:12.620
> 
> 标签：python, django, validation, tastypie

我正在尝试使用tastepie 上的自定义验证类获取字段的错误消息。

我在 Tastipye 文档网站（AwesomeValidation 类）上使用了代码：http: [//django-tastypie.readthedocs.org/en/latest/validation.html#implementing-your-own-validation](http://django-tastypie.readthedocs.org/en/latest/validation.html#implementing-your-own-validation)

这是我的资源类：

```
class UserResource(ModelResource):                                                                                                                                             
class Meta:                                                                                                                                                                
    queryset = User.objects.all()                                                                                                                                          
    resource_name = 'user'                                                                                                                                                 
    authorization = Authorization()                                                                                                                                        
    validation = AwesomeValidation() 
```

我使用休眠来尝试 POST 请求：

```
import slumber
api = slumber.API("127.0.0.1", auth=("auth", "auth"))
api.user.post({"username": "test", "password": "test", "password_confirm": "test", "email": "test@example.com"}) 
```

我收到错误 400，但没有错误消息。

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/slumber/__init__.py", line 125, in post
    resp = self._request("POST", data=s.dumps(data), params=kwargs)
  File "/usr/local/lib/python2.7/dist-packages/slumber/__init__.py", line 104, in _request
    raise exceptions.HttpClientError("Client Error %s: %s" % (resp.status_code, url), response=resp, content=resp.content)
slumber.exceptions.HttpClientError: Client Error 400: http://127.0.0.1:8000/api/v1/user/ 
```

自定义验证类是否与获取错误消息有关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:33:37.763

引用您的链接：

> 在此验证下，每个作为字符串的字段都会检查单词“awesome”。如果它不在字符串中，则为错误。

# syntax-error - 表达式错误JAVA的非法开始

> ID：13161032
> 
> 赞同：0
> 
> 时间：2012-10-31T15:09:18.120
> 
> 标签：syntax-error

所以我试图创建一个应用程序来打开一个 url。到目前为止，我有以下内容：

```
package openkaty;

import java.awt.Desktop;
import java.io.IOException;
import java.net.URI;
import java.net.URISyntaxException;

/**
 *
 * @author user
 */
public class OpenKaty {

    /**
     * @param args the command line arguments
     */
public static void main(String[] a) {
      public OpenKaty (String baseUrl, String docID) {
            String docURL = baseUrl+docID;

            try {
                URI uri = new URI(docURL);
                Desktop desktop = null;
                if (Desktop.isDesktopSupported()) {
                   desktop = Desktop.getDesktop();
                }

                if (desktop != null)
                {
                    desktop.browse(uri);
                }
            } catch (IOException | URISyntaxException ioe) {
            }   
      }
} 
```

当我声明成员类 openKaty 时，我得到一个*非法的表达式开始*错误，有人知道该怎么做吗？这将需要由另一个类调用，该类会将参数传递给此类以打开由两部分组成的特定 url。我是一个几乎完全的 Java 新手，所以请注意我很可能有一个非常简单的错误。对不起 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:20:24.497

这是无效的语法[（Java 7 之前）](http://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html)：

```
catch (IOException | URISyntaxException ioe){ 
```

您必须分别赶上每个班级：

```
catch (IOException ioe){
  //handle the exception
} catch (URISyntaxException urise){
  //handle the other exception
} 
```

您的课程也未封闭-您最后缺少一个花括号

此外，您不能在另一个方法中声明一个方法。如果您删除带有`public static void main`（以便构造函数不在其中）的行，您的代码应该编译。但是，由于您可能需要一个 main 方法（在任何类中），请在下一行之前关闭并实现 main 方法（使用`public OpenKaty`）：

```
public static void main(String[] a){
  // add your main method code here
} // was missing
public OpenKaty(String baseUrl, String docID){ 
```

另请注意，丢弃未知异常*绝不*是一个好主意（就像您一样）。至少，您始终可以在丢弃之前记录它们。

除此之外，语法对我来说似乎是正确的。

# c# - WCF/IIS 400 错误

> ID：13161034
> 
> 赞同：1
> 
> 时间：2012-10-31T15:09:27.743
> 
> 标签：c#, wcf, url, iis

我在 IIS7 中使用以下 URL 运行 WCF 服务 (.NET 3.5) 时遇到 400 错误：

```
http://localhost/mrlabatch/MRLABatchProcessingService.svc/events/sr123%20eb/ACCESSCONTROL,ADT,ADTDERIVATION,ADTSTATIONNUMBER,ADTYEAR,CITY,COUNTY,FACILITYTYPE,FEDERALAIDROUTENUMBER,FUNCTIONALCLASSIFICATION,JURISDICTION,LEFTSHOULDERTYPE,LEFTSHOULDERWIDTH,LEFTSIDEWALKWIDTH,MASSDOTHIGHWAYDISTRICT,MEDIANTYPE,MEDIANWIDTH,MPO,NHSSTATUS,NUMBEROFPEAKHOURLANES,NUMBEROFTRAVELLANES,RIGHTOFWAYWIDTH,RIGHTSHOULDERTYPE,RIGHTSHOULDERWIDTH,RIGHTSIDEWALKWIDTH,ROUTEKEY,SPEEDLIMIT,STREETNAME,STREETOPERATION,SUBROUTE,SURFACETYPE,SURFACEWIDTH,TERRAIN,TRUCKROUTE,UNDIVIDEDLEFTSHOULDERTYPE,UNDIVIDEDLEFTSHOULDERWIDTH,URBANIZEDAREA,URBANTYPE/?frommp=8.28489&tomp=10.30031 
```

在 Visual Studio 中调试时，该 url 将正常工作（当然指定不同的端口）

如果我缩短 URL，它在 VS 和 IIS 中也能正常工作：

```
http://localhost/mrlabatch/MRLABatchProcessingService.svc/events/sr123%20eb/ACCESSCONTROL,ADT,ADTDERIVATION,ADTSTATIONNUMBER,ADTYEAR,CITY,COUNTY,FACILITYTYPE,FEDERALAIDROUTENUMBER,URBANIZEDAREA,URBANTYPE/?frommp=8.28489&tomp=10.30031 
```

我尝试在 web.config 中增加我的 maxrequestlength：

URL大小是否有其他障碍？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:29:04.297

问题出在我发布的 URL 上。我应该在 URL 中添加正确的查询字符串：?events=

```
 http://localhost/mrlabatch/MRLABatchProcessingService.svc/events/sr123%20eb/?events=ACCESSCONTROL,ADT,ADTDERIVATION,ADTSTATIONNUMBER,ADTYEAR,CITY,COUNTY,FACILITYTYPE,FEDERALAIDROUTENUMBER,FUNCTIONALCLASSIFICATION,JURISDICTION,LEFTSHOULDERTYPE,LEFTSHOULDERWIDTH,LEFTSIDEWALKWIDTH,MASSDOTHIGHWAYDISTRICT,MEDIANTYPE,MEDIANWIDTH,MPO,NHSSTATUS,NUMBEROFPEAKHOURLANES,NUMBEROFTRAVELLANES,RIGHTOFWAYWIDTH,RIGHTSHOULDERTYPE,RIGHTSHOULDERWIDTH,RIGHTSIDEWALKWIDTH,ROUTEKEY,SPEEDLIMIT,STREETNAME,STREETOPERATION,SUBROUTE,SURFACETYPE,SURFACEWIDTH,TERRAIN,TRUCKROUTE,UNDIVIDEDLEFTSHOULDERTYPE,UNDIVIDEDLEFTSHOULDERWIDTH,URBANIZEDAREA,URBANTYPE/?frommp=8.28489&tomp=10.30031 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:24:37.837

我很确定您的 url 由于某些无效字符或太长而被修剪。

url 长度有一些限制。

尝试使用 POST 而不是 GET 来传递这么多东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T15:25:16.067

根据[这篇文章](http://www.iis.net/configreference/system.webserver/security/requestfiltering/requestlimits)，如果 URL 太长，您会收到 404 错误，而不是 400。我会确保请求与 URL 长度相同。

您可以检查服务器上的 IIS 日志以确保 url（当它到达服务器时）是您所期望的。

.NET 框架中的 url 似乎有 260 个字符的限制，但我认为这在 VS Web 服务器中也会失败。

# sql - 每小时汇总一个小时范围内的值

> ID：13161040
> 
> 赞同：13
> 
> 时间：2012-10-31T15:09:36.153
> 
> 标签：sql, postgresql, datetime, postgresql-9.1, window-functions

我有一个 PostgreSQL 9.1 数据库，其中包含一个包含**时间戳**和测量**值的表**

```
'2012-10-25 01:00'   2
'2012-10-25 02:00'   5
'2012-10-25 03:00'   12
'2012-10-25 04:00'   7
'2012-10-25 05:00'   1
...                  ... 
```

我需要在每小时 8 小时的范围内平均该值。换句话说，我需要 1h-8h、2h-9h、3h-10h 等的平均值。

我不知道如何进行这样的查询。我到处寻找，但也不知道要寻找什么功能。

我发现的收盘价是每小时/每天的平均值或块平均值（例如 1h-8h、9h-16h 等）。但在这些情况下，时间戳只是使用`date_trunc()`函数进行转换（如下例所示），这对我没有用处。

我想我正在寻找的是与此类似的功能

```
SELECT    date_trunc('day', timestamp), max(value) 
FROM      table_name
GROUP BY  date_trunc('day', timestamp); 
```

但是随后在 group-by 子句中使用某种 8 小时范围来表示每个小时。这甚至可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T00:31:22.470

[**带有自定义框架**](http://www.postgresql.org/docs/current/interactive/sql-expressions.html#SYNTAX-WINDOW-FUNCTIONS)的窗口函数使这变得*非常简单*：

```
SELECT ts
      ,avg(val) OVER (ORDER BY ts
                      ROWS BETWEEN CURRENT ROW AND 7 FOLLOWING) AS avg_8h
FROM tbl; 
```

[sqlfiddle 上的现场演示。](http://www.sqlfiddle.com/#!12/3e558/2)

每个平均值的框架是当前行加上以下 7 行。这假设您每小时恰好有一行。您的样本数据似乎暗示了这一点，但您没有具体说明。

它的方式是，`avg_8h`对于集合的最后（根据`ts`）7 行，用更少的行计算，直到最后一行的值等于它自己的平均值。您没有指定如何处理特殊情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T23:34:11.000

关键是创建一个虚拟表来加入您的结果集。该`generate_series`功能可以通过以下方式帮助做到这一点：

```
SELECT
    start
    , start + interval '8 hours' as end
FROM (
    SELECT generate_series(
        date'2012-01-01'
        , date'2012-02-02'
        , '1 hour'
    ) AS start
) x; 
```

这会产生类似这样的输出：

```
 start          |          end           
------------------------+------------------------
 2012-01-01 00:00:00+00 | 2012-01-01 08:00:00+00
 2012-01-01 01:00:00+00 | 2012-01-01 09:00:00+00
 2012-01-01 02:00:00+00 | 2012-01-01 10:00:00+00
 2012-01-01 03:00:00+00 | 2012-01-01 11:00:00+00 
```

这给了你一些东西来加入你的数据。这样，查询如下：

```
SELECT
    y.start
    , round(avg(ts_val.v))
FROM
    ts_val,
    (
        SELECT
            start
            , start + interval '8 hours' as end
        FROM (
            SELECT generate_series(
                date'2012-01-01'
                , date'2012-02-02'
                , '1 hour'
            ) AS start
        ) x
    ) y
WHERE
    ts BETWEEN y.start AND y.end
GROUP BY
    y.start
ORDER BY
    y.start
; 
```

对于以下数据

```
 ts          | v 
---------------------+---
 2012-01-01 01:00:00 | 2
 2012-01-01 09:00:00 | 2
 2012-01-01 10:00:00 | 5
(3 rows) 
```

会产生以下结果：

```
 start          | round 
------------------------+-------
 2012-01-01 00:00:00+00 |   2.0
 2012-01-01 01:00:00+00 |   2.0
 2012-01-01 02:00:00+00 |   3.5
 2012-01-01 03:00:00+00 |   3.5
 2012-01-01 04:00:00+00 |   3.5
 2012-01-01 05:00:00+00 |   3.5
 2012-01-01 06:00:00+00 |   3.5
 2012-01-01 07:00:00+00 |   3.5
 2012-01-01 08:00:00+00 |   3.5
 2012-01-01 09:00:00+00 |   3.5
 2012-01-01 10:00:00+00 |   5.0
(11 rows) 
```

# sql - 检查给定日期是否适合一系列日期

> ID：13161044
> 
> 赞同：22
> 
> 时间：2012-10-31T15:09:47.827
> 
> 标签：sql, sql-server, sql-server-2008, tsql

如果我在一个表中有 2 个日期列，`startDate`并且`endDate`. 如何返回给定日期介于这两个日期之间的行？例如：

如果给定的日期是`2012-10-25`

它应该返回以下行

```
startDate   -   endDate
2012-10-25  -   2012-10-25
2011-09-10  -   2013-11-15
2012-10-20  -   2012-10-25
2012-10-23  -   2012-10-28
2012-09-14  -   2012-10-28 
```

从以下行：

```
startDate   -   endDate
2012-10-25  -   2012-10-25
2011-09-10  -   2013-11-15
2012-01-11  -   2012-10-11
2012-10-20  -   2012-10-25
2012-04-15  -   2012-04-16
2012-05-20  -   2012-05-25
2012-12-01  -   2012-12-10
2012-10-23  -   2012-10-28
2012-09-14  -   2012-10-28
2012-11-13  -   2012-12-15 
```

这可以用sql吗？

我正在使用 sql server 2008。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-10-31T15:11:56.993

使用 SQL Server，它实际上很简单：

```
SELECT startDate, endDate
FROM YourTable
WHERE '2012-10-25' between startDate and endDate 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T15:15:44.913

检查[BETWEEN](http://www.sql-tutorial.net/SQL-BETWEEN.asp)关键字。

语法很简单：

```
SELECT col1, col2
FROM table1
WHERE '2012-10-25' BETWEEN col1 and col2 
```

其中 col1 和 col2 分别是开始日期和结束日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T15:50:54.900

对于其他研磨检查，以下可能很有趣

```
Select * from sted where [dbo].[F_LappingDays](Startdate,EndDate,'20121025','20121025')=1

CREATE Function [dbo].[F_LappingDays](@Von1 datetime,@bis1 Datetime,@von2 Datetime,@bis2 Datetime) Returns int as
/*
20110531 Thomas Wassermann
Terminüberschneidungen finden
*/
begin
Declare @Result int

Select @Result  = 0
if (@Von1>=@Von2) and (@bis1<=@Bis2)
    begin
        Select @Result=Cast(@Bis1 - @von1 + 1 as Int)
    end

else if (@Von1<=@Von2) and (@bis1 > @Von2) and (@bis1<=@Bis2)
    begin
        Select @Result=Cast(@Bis1 - @von2 + 1 as Int)
    end

else if (@Von1>=@Von2) and (@von1<=@bis2) and (@bis1>@Bis2)
    begin
        Select @Result=Cast(@Bis2 - @von1 + 1 as Int)
    end

else if (@Von1<@Von2) and (@bis1>@Bis2)
    begin
        Select @Result=Cast(@Bis2 - @von2 + 1 as Int)
    end

Return @Result
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-02T07:15:01.003

您可以使用 between 运算符来查找两个约束之间的值。这对于查找范围内的日期也很有用。

```
SELECT startDate, endDate FROM sampleTable WHERE '2012-10-25' between startDate and endDate 
```

更多[BETWEEN](http://www.sql-tutorial.net/SQL-BETWEEN.asp)

# apache - 如何通过局域网访问在Win7上运行apache的CMS网站

> ID：13161045
> 
> 赞同：1
> 
> 时间：2012-10-31T15:09:49.237
> 
> 标签：apache, windows-7, wamp, lan, easyphp

我正在使用 EasyPHP（便携式本地 WAMP）在 Windows 7 PC 上运行 Web 服务器。那是我的**计算机_1**，其 IP 地址为`10.0.1.6`.

现在我在 LAN 上有另一台计算机 ( **computer_2** ) 使用 IP 地址`10.0.1.203`。

我想从**computer_2访问****computer_1**上的站点。

 **当我在**computer_2**`10.0.1.6`的网络浏览器中键入时，我可以看到 EasyPHP 文件夹中的站点列表，但我无法访问 WordPress 网站：我收到错误消息。**`\WWW``unable to establish connection`**

 **`ServerName 10.0.1.6:8888`我为和修改了 Apache HTTP Server 配置`Listen (same ip)`，`Allow from all`然后禁用了防火墙，打开`8888`了传入连接的端口。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:55:01.550

如果您提供更多详细信息，则对您的案例进行故障排除会容易得多。

*   你安装了什么版本的 EasyPHP WAMP 包？

*   你在日志上看到了什么？

*   网络浏览器中的**确切错误措辞是什么？**

EasyPHP 提供了漂亮的界面，因此您可以轻松管理 WAMP 实例，而无需在常见情况下手动编辑 Apache（或其他）配置。我可以假设有一些简单的错误配置，在检查日志后很容易解决。因此，既然您可以访问服务器并得到一些错误 - 请检查日志以获取有关根本原因的线索。****

# javascript - 正则表达式忽略封闭的大括号和半列

> ID：13161050
> 
> 赞同：0
> 
> 时间：2012-10-31T15:10:03.373
> 
> 标签：javascript, jquery, regex

我正在为一些用户输入的常规文本使用 codemirror，在我将表单提交到服务器之前，我想在每个闭合的大括号之后添加一个半列。我现在的做法是：

```
editor.getValue().replace(/}/g,"};") 
```

`};`如果我提交的文本中没有内容，这可以正常工作。有没有办法`};`在我替换之前扩展我的正则表达式以忽略这个特定的字符串组合（）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:12:17.273

`/}(?!;)/g`应该为你做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:13:23.670

这应该工作：

```
 "editor.getValue().replace(/}(?!;)/g,"};")". 
```

并考虑 } 和 ; 之间的空格

```
 "editor.getValue().replace(/}(?!\s*;)/g,"};")". 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T15:16:11.567

一起去

```
editor.getValue().replace(/}/g, "};") 
```

但是，如果您不想添加`;`（如果已经有的话），请使用

```
editor.getValue().replace(/}(?!;)/g, "};") 
```

# c# - 使用 OpenXML SDK 2.0 从 Excel 单元格中读取数据

> ID：13161056
> 
> 赞同：0
> 
> 时间：2012-10-31T15:10:16.450
> 
> 标签：c#, excel, openxml-sdk

我试图以这种方式从 Excel 单元格中获取价值：

```
 SpreadsheetDocument spreadSheetDocument = SpreadsheetDocument.Open(filePath, true);

    WorksheetPart worksheetPart = getWorksheetByName(spreadSheetDocument, DEFAULT_SHEET_NAME);

    SheetData sheetData = worksheetPart.Worksheet.GetFirstChild<SheetData>();

    Cell theCell1 = worksheetPart.Worksheet.Descendants<Cell>().FirstOrDefault(c => c.CellReference == "A5");
    Cell theCell2 = worksheetPart.Worksheet.Descendants<Cell>().FirstOrDefault(c => c.CellReference == "A6");
    Cell theCell3 = worksheetPart.Worksheet.Descendants<Cell>().FirstOrDefault(c => c.CellReference == "B5");
    Cell theCell4 = worksheetPart.Worksheet.Descendants<Cell>().FirstOrDefault(c => c.CellReference == "B6"); 
```

然后我正在检查 Cell1.CellValue.Text 属性，我得到了一些奇怪的数据，比如 4,5,248 等，这实际上与真实数据相去甚远。我可以使用 Excel 查看和编辑的实际值。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T10:36:16.940

每个 Excel 单元格中的值（大部分）都存储在一个名为`SharedStringTable`. 该表就像一个数组，其中添加了每个唯一值，然后将其索引作为实际 Excel 单元格中的值。这意味着您要检索的 4、5、248 实际上是该表中的索引，指向该单元格的实际值。此表的目的是帮助减少存储的冗余数据量。例如，如果两个单元格包含相同的字符串，Excel 只需将字符串存储一次，`SharedStringTable`然后引用相同的字符串两次作为单元格的值。这将有助于减小文件的整体大小，因为您不需要在构成 Excel 文件的实际 XML 中存储尽可能多的文本。

例如，我在单元格 A1 和 A2 中添加了文本“测试”，在单元格 A3 中添加了文本“唯一”，这就是`SharedStringTable`XML 的样子：

```
<x:sst count="3" uniqueCount="2" xmlns:x="http://schemas.openxmlformats.org/spreadsheetml/2006/main">
  <x:si>
    <x:t>test</x:t>
  </x:si>
  <x:si>
    <x:t>unique</x:t>
  </x:si>
</x:sst> 
```

注意 test 只存储一次。这是单元格值：

```
<x:c r="A1" t="s">
    <x:v>0</x:v>
  </x:c>
  <x:c r="B1" t="s">
    <x:v>0</x:v>
  </x:c>
  <x:c r="C1" t="s">
    <x:v>1</x:v>
</x:c> 
```

注意 A1 和 A2 的值都是 0，因为它们都指向`SharedStringTable`.

通过索引访问 SharedStringTable 的简单代码片段是：

```
workbookPart.SharedStringTablePart.SharedStringTable.Elements<SharedStringItem>().ElementAt(index); 
```

# joomla - 在 joomla 中显示文章

> ID：13161057
> 
> 赞同：0
> 
> 时间：2012-10-31T15:10:19.707
> 
> 标签：joomla, joomla2.5

大家好，我在 joomla 中创建了一个模板和一个菜单..

这是我的 index.html 模板

```
<body class="cabecera <?php ($portada)? "" : "_otra"  ?> ">
        <div id="wrapper-top" class="fondo <?php ($portada)? "": "_otra" ?> ">
            <div class="row">
                <jdoc:include type="modules" name="mod_izquierdo" style="none"/>
                    <div id="wrapper-header-right" class="column grid_10">
                        <jdoc:include type="modules" name="mod_extranet" style="none"/>
                        <jdoc:include type="modules" name="mod_menuPrincipal" style="none"/>
                    </div>
            </div>
        </div>
        <div id="wrapper-body" class="row">
            <div id="content" class="column grid_16">
                <jdoc:include type="component" />
                <jdoc:include type="modules" name="mod_noticias" style="none"/>

            </div>
            <div class="clr"></div>
            <jdoc:include type="modules" name="mod_carrusel" style="none"/>
            <div class="clr"></div>

            <div id="noticias" class="column grid_16">

            </div>
        </div>
        <jdoc:include type="modules" name="mod_pie" style="none"/>
    </body> 
```

对于菜单，我创建了一个模块 mod_menuPrincipal 这是链接

```
<div id="Menu_Principal">
    <ul class="menu">
        <li id="current" class="parent active item1"><a href="<?php echo JRoute::_('index.php?Itemid=1');?>"><span>Principal</span></a></li>
        <li class="item2"><a href="<?php echo JRoute::_('index.php?option=com_content&view=article&id=2');?>"><span>Hardware</span></a></li>
        <li class="item3"><a href="<?php echo JRoute::_('index.php?option=com_content&view=article&id=3');?>"<span>Software</span></a></li>
        <li class="item4"><a href="<?php echo JRoute::_('index.php?option=com_content&view=article&id=4');?>""><span>Other</span></a></li>
    </ul>
</div> 
```

我创建了这篇文章，但是现在当我点击链接时什么都没有显示.. 只有页脚和其他人认为，但没有文章的内容。

我想念什么？任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:04:55.653

你不见了——

```
<jdoc:include type="component" /> 
```

这会加载组件。将此添加到您要显示文章的 index.php 中。如果这不起作用，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:34:49.763

我真的会考虑使用核心模板、菜单管理器和核心 mod_menu 来掌握菜单的工作原理。这与您的模板完全无关。使用菜单管理器创建一些菜单链接，并查看它们如何转换为呈现的页面。如果那是您想要做的，然后创建一个模板。

或者反过来，首先了解模板是如何工作的——使用 jdoc:include modules 和 module（以及 component 和 head）将模块放在页面的不同位置。然后学习使用菜单系统。

然后把两个部分放在一起。

我想你会发现它比你想象的要容易得多。

# phabricator - Phabricator 安装问题

> ID：13161059
> 
> 赞同：5
> 
> 时间：2012-10-31T15:10:30.803
> 
> 标签：phabricator

我正在遵循安装步骤：[http](http://www.phabricator.com/docs/phabricator/article/Configuration_Guide.html) : //www.phabricator.com/docs/phabricator/article/Configuration_Guide.html，但无法成功安装 Phabricator。即使我已经检查了很多次步骤。

我在 /tmp/codereview 中创建了一个文件夹，在这个文件夹中，我从 Github 下载了最新的代码，如下所示：

```
drwxr-xr-x  8 root root 4096 Oct 31 16:28 arcanist
drwxr-xr-x  7 root root 4096 Oct 31 16:28 libphutil
drwxr-xr-x 11 root root 4096 Oct 31 17:23 phabricator 
```

我还设置了环境。变量如手册所示：

```
$export PHABRICATOR_ENV=/tmp/codereview/phabricator/conf/my 
```

'my' 的意思是 'my.conf.php'，我已经把 MySQL 信息放进去。但是当我执行第一个设置命令时：

```
$./phabricator/bin/storage upgrade 
```

我收到以下错误消息：

```
PHP Warning:  require_once(/tmp/codereview/scripts/__init_script__.php): failed to open stream: No such file or directory in /tmp/codereview/phabricator/bin/storage on line 21
PHP Fatal error:  require_once(): Failed opening required '/tmp/codereview/scripts/__init_script__.php' (include_path='.:/usr/share/pear:/usr/share/php') in /tmp/codereview/phabricator/bin/storage on line 21 
```

我认为这是来自 Facebook 的，很多用户正在下载并使用它。所以安装应该工作，我错过了一些重要的事情吗？

如果你已经安装成功，你能帮忙检查一下我的步骤有什么问题吗？如果您使用以前的版本，您的号码是多少，所以我可以使用您的版本。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T09:34:46.733

问题解决了。这是由于符号链接。从 github 提取源代码后，我将文件夹转移（scp）到另一个我想安装 Phabricator 的服务器。符号将替换为真实文件。如上所述，这将导致错误。

所以不要直接将文件夹复制到其他服务器，您可以将其打包并复制tar球。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T13:11:19.213

我第一次尝试在（n 旧）Debian 系统上安装它没有成功。我无法让它工作并且最终没有弄清楚问题是什么。在我的第二次尝试中：

*   我从最新的 Ubuntu 版本（版本 ubuntu-12.10-server-amd64）创建了一个全新的空 Ubuntu VM。
*   [从 Phabricator 网站](http://www.phabricator.com/rsrc/install/install_ubuntu.sh)下载Ubuntu 安装程序脚本并在我的虚拟机上运行它。
*   完成上述脚本后，按照[Phabricator 安装指南](http://www.phabricator.com/docs/phabricator/article/Installation_Guide.html)中的说明配置系统。

这个过程对我来说非常顺利，我很快就开始使用它！希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T23:20:02.200

试试`PHABRICATOR_ENV=my`。除非他们改变了某些东西，否则它应该只是相对的，而不是绝对的。

# .net-framework-version - .NET 2.0 运行时 DLL 版本

> ID：13161060
> 
> 赞同：0
> 
> 时间：2012-10-31T15:10:31.207
> 
> 标签：.net-framework-version

我最近在 VS2008 中在一个新项目上编辑了一个资源文件（我以前从未处理过——它在源代码控制中），并注意到运行时版本从*2.0.50727 更改。**5456***到*2.0.50727。**4971*** .

`C:\Windows\Microsoft.NET\Framework\v2.0.50727`较旧的后一版本与(2.0.50727.4971)中 mscorlib.dll 上的版本一致。

很明显，我的同事安装了更新版本的 .NET 2.0。但是我有哪一个，哪个版本？我找不到有关按产品分类的 DLL 版本的任何信息（例如，SP1 与非 SP1）。

我的注册表项`HKLM\Software\Microsoft\Net Framework Setup\v2.0.50727\SP`设置为`0x00000002`，表示我安装了 .NET 2.0 SP2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:16:09.920

确认您安装了相同的更新和补丁。在过去的几年中，有许多更新改变了框架的 dll 版本号。这是其中之一：http: [//support.microsoft.com/kb/2656356](http://support.microsoft.com/kb/2656356)

还要记住，.net 3.5 使用并提供对 .net 2 工具的升级以支持 ASP（3.5 asp 使用 2.0 框架执行 IIS，但添加了一些用于 ajax 和其他扩展的库。）

# forms - 在 Symfony 2.1+FOSRestBundle 中，表单绑定不绑定请求到表单

> ID：13161062
> 
> 赞同：1
> 
> 时间：2012-10-31T15:10:45.650
> 
> 标签：forms, symfony, bind, symfony-2.1, fosrestbundle

我正在使用 FOSRestbundle 实现 rest API。现在说对于 POST 请求，我正在正确获取请求参数，例如：

```
Symfony\Component\HttpFoundation\ParameterBag Object
(
    [parameters:protected] => Array
        (
            [rank] => 12
            [city] => 1345
            [comment]=> 'safd'
        )

) 
```

我的发布操作代码是：

```
/**
 * @Rest\View
 */   
public function newAction(){

    $rank= new Rank();       
    $form = $this->createForm(new RankType(), $rank);
    $form->bind($this->getRequest());
    if ($form->isValid()) {
      //.  $user->flush();

      $em = $this->getDoctrine()->getManager();
      $em->persist($rank);
      $em->flush();
      $response = new Response();
      $response->setStatusCode($statusCode);
      $view = View::create()  
        ->setData($rank)
        ->setFormat('json');

      return $this->handleView($view);
    }

    return $this->handleView(View::create($form, 400));
} 
```

但`form->isValid`由于将空值设置为表单而失败。

```
After Binding form form->getData() will display :

MyProject\DataBundle\Entity\Rank Object
(
    [city:MyProject\DataBundle\Entity\Ranking:private] => 
    [rank:MyProject\DataBundle\Entity\Ranking:private] => 
    [comment:MyProject\DataBundle\Entity\Ranking:private] => 
) 
```

RankType 代码：

```
class RankType extends AbstractType
{
    /**
     * {@inheritdoc}
     */
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('rank');
        $builder->add('city');
        $builder->add('comment');
    }

    /**
     * {@inheritdoc}
     */
    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class'        => 'Myporject\DataBundle\Entity\rank',
            'csrf_protection'   => false,
        ));
    }

    /**
     * {@inheritdoc}
     */
    public function getName()
    {
        return 'rank';
    }
} 
```

验证会抛出像城市这样的错误，排名不应该为空

有什么建议为什么`$form->bind`不绑定值？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-14T08:57:31.007

我想，我刚刚在我的应用程序中解决了同样的问题:)

查看您的表单：getName() 方法返回 'rank' - 这是表单的名称，这是此表单数据的命名空间 :) Symfony2 将使用它来绑定。

因此，当您发送这样的数据时：

`array('rank'=> 'somevalue', 'city' => 'comecityname', 'comment' => 'somecomment')`

它不起作用，因为 bind 方法将搜索放置在“rank”命名空间下的数据数组并找到字符串“somevalue”。表单数据将保持为空。

将数据格式更改为：

```
array('rank' => array('rank'=> 'somevalue', 'city' => 'comecityname', 'comment' => 'somecomment')) 
```

并与 REST 一起发送 - 然后它应该可以工作

我希望这个能帮上忙

# html - CSS 类在 id 工作的地方失败

> ID：13161075
> 
> 赞同：1
> 
> 时间：2012-10-31T15:11:21.757
> 
> 标签：html, navigation, css-selectors

我有一个具有默认样式的导航菜单...

```
<nav>   
 <ul id="MenuBar1" class="MenuBarHorizontal">
  <li>
   <a href="#">Home</a>
  </li>
  <li>
   <a class="MenuBarItemSubmenu" href="membership.php">Membership</a>
   <ul>
    <li><a href="#">General</a></li>
    <li>
     <a class="MenuBarItemSubmenu" href="#">Adult</a>
     <ul>
      <li><a href="#">Beginner</a></li>
      <li><a href="#">Intermediate</a></li>
      <li><a href="#">Advanced</a></li>
     </ul>                    
    </li>
   [...]
</nav> 
```

有这样的样式，比如blah：

```
/* Menu items are a light gray block with padding and no text decoration */
ul.MenuBarHorizontal a {
 display: block;
 cursor: pointer;
 background-color: #000;
 padding: 0.5em 0.75em;
 color: #FFF;
 text-decoration: none;
}
/* Menu items that have mouse over or focus have an off-white background and dark text */
ul.MenuBarHorizontal a:hover, ul.MenuBarHorizontal a:focus {
 background-color: #EEE;
 color: #333;
}
/* Menu items that are open with submenus are set to MenuBarItemHover with an off-white background and dark text */
ul.MenuBarHorizontal a.MenuBarItemHover, ul.MenuBarHorizontal a.MenuBarItemSubmenuHover, ul.MenuBarHorizontal a.MenuBarSubmenuVisible {
 background-color: #EEE;
 color: #333;
} /* And so on... */ 
```

但是我想要子菜单和突出显示的项目有所不同。这个问题并不是专门针对这个的，因为我有一个解决方案，如果不是最优雅的，也是有意义的，那就是构建一个完全不同的选择器：

```
#topitem:hover, #topitem:focus {
 background-color: #FFF;
 color: #000;
}

#subitem:hover, #subitem:focus{
 background-color: #FFF;
 color: #000;
} 
```

然后有相应的HTML

```
<nav>   
 <ul id="MenuBar1" class="MenuBarHorizontal">
  <li><a href="#" id="topitem">Home</a></li>
  <li><a class="MenuBarItemSubmenu" id="topitem" href="membership.php">Membership</a>
 <ul> ... 
```

这很好用..但是呃......任何id的实例都不应该超过一个。所以我说，K，让我们将这些作为类：

CSS

```
.topitem:hover, .topitem:focus {
 background-color: #FFF;
 color: #000;
}

.subitem:hover, .subitem:focus {
 background-color: #FFF;
 color: #000;
} 
```

HTML

```
 <nav>  
  <ul id="MenuBar1" class="MenuBarHorizontal">
   <li><a href="#" class="topitem">Home</a></li>
   <li><a class="MenuBarItemSubmenu topitem" href="membership.php">Membership</a>
    <ul> ... 
```

但令我惊讶的是，这根本不起作用......

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:30:19.573

ID 版本之所以有效，是因为 ID 的 CSS 规则总是胜过类的规则。

然后，类样式还取决于在样式表中声明规则的时间。

如果在声明默认样式之前声明子`<li>`项样式，则默认样式将胜出。将所需的样式规则移到默认样式下方，这应该可以解决您的问题。

# objective-c - 使用 RestKit iOS 将对象 POST 到 MVC4 webapi 看不到 json 对象

> ID：13161080
> 
> 赞同：1
> 
> 时间：2012-10-31T15:11:33.310
> 
> 标签：objective-c, ios, json, asp.net-mvc-3, asp.net-web-api

尝试使用 RestKit 从 iOS 调用 ASP.NET 4 Web API，但序列化的 json 对象在服务器命令上没有得到识别。任何人都可以帮忙吗？

obj C 类；

```
 #import "NoddyModel.h"
 @synthesize messageId;
 @synthesize message;
 @end 
```

（以上是NSStrings）

来自 mvc 服务的等效 C#；

```
using Core.MessageDocuments;

namespace WebApi.Models
{
    [DataContract]
    public class NoddysModel : List<NoddyModel>
    {
        [DataMember(IsRequired = true)]
        public long NumberOfMessages
        {
            get { return Count; }
        }   
    }

    [DataContract]
    public class NoddyModel
    {
        public NoddyModel(string MessageId, string Message)
        {
            MessageId = MessageId;
            Message = Message;
        }

        [DataMember]
        public string MessageId { get; set; }
        [DataMember]
        public string Message { get; set; }
    }
} 
```

和 mvc 命令；

```
// POST api/Noddy
[HttpPost]
public MessagesPostResponse Post(NoddyModel noddy)
{
    int count = 999;
    try
    {
        count = noddy.Message.Length + 9000;
    }
    catch (Exception e)
    {
        FileStream traceLog = new FileStream("C:\\logs\\Traces.svclog", FileMode.Append);
        TextWriterTraceListener myListener = new TextWriterTraceListener(traceLog);
        Trace.Listeners.Add(myListener);
        myListener.WriteLine("Exception in POST NoddyModel calc count = " + e.Message + " response = " + HttpContext.Current.Request.Params.ToString());
        Trace.Flush();
        myListener.Flush();
        traceLog.Close();

        return new MessagesPostResponse(false, 0);
    }
    try
    {
        FileStream traceLog = new FileStream("C:\\logs\\Traces.svclog", FileMode.Append);
        TextWriterTraceListener myListener = new TextWriterTraceListener(traceLog);
        Trace.Listeners.Add(myListener);
        myListener.WriteLine("Sending trace information : Noddy = " + noddy);
        Trace.Flush();
        myListener.Flush();
        traceLog.Close();

        return new MessagesPostResponse(true, count);
    }
    catch (Exception e)
    {
        FileStream traceLog = new FileStream("C:\\logs\\Traces.svclog", FileMode.Append);
        TextWriterTraceListener myListener = new TextWriterTraceListener(traceLog);
        Trace.Listeners.Add(myListener);
        myListener.WriteLine("Exception in POST NoddyModel = " + e.Message);
        Trace.Flush();
        myListener.Flush();
        traceLog.Close();

        return new MessagesPostResponse(false, 0);
    }
} 
```

和 Obj C 函数；

```
RKURL *baseURL = [RKURL URLWithString: @"http://ServerX/cirrusdev/api"];
RKObjectManager *objectManager = [RKObjectManager objectManagerWithBaseURLString: @"http://ServerX/cirrusdev/api"];
objectManager.client.baseURL = baseURL;
[objectManager setSerializationMIMEType:RKMIMETypeJSON];

RKObjectRouter *dynrouter = [RKObjectRouter new];
[dynrouter routeClass:[NoddyModel class] toResourcePath:@"/messages" forMethod:RKRequestMethodPOST];

objectManager.router = dynrouter;

RKObjectMapping* pmsg = [RKObjectMapping mappingForClass:[NSMutableDictionary class]];

[pmsg mapKeyPath: @"MessageId"     toAttribute:@"messageId"    ];
[pmsg mapKeyPath: @"Message"       toAttribute:@"message"      ];

RKObjectMapping* pmsgSerializeMapping = [pmsg inverseMapping];
[objectManager.mappingProvider setSerializationMapping:pmsgSerializeMapping forClass:[NoddyModel class]];

NoddyModel *msg = [[NoddyModel alloc]init];
msg.messageId =@"abc999";
msg.message = @"Hello Cirrus";

[objectManager postObject:msg delegate:self]; 
```

以及来自 RestKit 的日志；

```
> 2012-10-31 15:28:26.851 ELOI[74400:c07] D
> restkit.network:RKClient.m:437 Reachability to host '0.0.0.0'
> determined for client <RKClient: 0x76dda50>, unsuspending queue
> <RKRequestQueue: 0x76ddb90 name=(null) suspended=YES requestCount=1
> loadingCount=0/5> 2012-10-31 15:28:26.851 ELOI[74400:c07] D
> restkit.network:RKRequest.m:437 Sending asynchronous POST request to
> URL `http://ServerX/cirrusdev/api/messages`. 2012-10-31 15:28:26.852
> ELOI[74400:c07] D restkit.network:RKObjectLoader.m:374 POST or PUT
> request for source object <NoddyModel: 0x7696ba0>, serializing to MIME
> Type application/json for transport... 2012-10-31 15:28:26.853
> ELOI[74400:c07] T restkit.network:RKRequest.m:399 Prepared POST
> URLRequest '<NSMutableURLRequest
> http://ServerX/cirrusdev/api/messages>'. HTTP Headers: {
>     Accept = "application/json";
>     "Content-Length" = 47;
>     "Content-Type" = "application/json"; }. HTTP Body: {"MessageId":"abc999","Message":"Hello Cirrus"}. 2012-10-31
> 15:28:26.855 ELOI[74400:c07] D restkit.network:RKResponse.m:198
> Proceeding with request to <NSURLRequest
> http://ServerX/cirrusdev/api/messages> 2012-10-31 15:28:31.224
> ELOI[74400:c07] D restkit.network:RKResponse.m:219 NSHTTPURLResponse
> Status Code: 200 2012-10-31 15:28:31.224 ELOI[74400:c07] D
> restkit.network:RKResponse.m:220 Headers: {
>     "Cache-Control" = "no-cache";
>     "Content-Length" = 74;
>     "Content-Type" = "application/json; charset=utf-8";
>     Date = "Wed, 31 Oct 2012 15:28:30 GMT";
>     Expires = "-1";
>     Pragma = "no-cache";
>     Server = "Microsoft-IIS/7.5";
>     "X-AspNet-Version" = "4.0.30319";
>     "X-Powered-By" = "ASP.NET"; } 2012-10-31 15:28:31.225 ELOI[74400:c07] T restkit.network:RKResponse.m:231 Read response body:
> {"Successful":false,"Message":"We have received 0
> message(s)","Data":null} 
```

PS我手动编辑了服务器名称，所以如果不同请忽略

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:20:22.063

我需要通过反复试验来尝试很多事情——最后一件事是 ASP.NET Web API 操作无法实例化 Noddy 对象，因为它需要一个无参数初始化程序。

# c - libpng 是否允许将不整个图像读取到内存中

> ID：13161083
> 
> 赞同：1
> 
> 时间：2012-10-31T15:11:45.277
> 
> 标签：c, png, libpng

我知道`libJPEG`不能读取整个图像，使用`jpeg_read_scanlines`.

`libPNG`有这样的机会吗？我只看到`png_read_png`方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:22:27.343

你看过 [`png_read_row()`](http://www.libpng.org/pub/png/libpng-1.2.5-manual.html#section-3.8)和`png_read_rows()`吗？

请记住，如果 PNG 是隔行扫描的，这可能会带来麻烦。

# c# - 无法在 WPF 中单击单选按钮时生成动态文本框

> ID：13161085
> 
> 赞同：1
> 
> 时间：2012-10-31T15:11:49.910
> 
> 标签：c#, .net, wpf, dynamic, mvvm

我正在开发一个 WPF 应用程序，我必须首先生成 4 个单选按钮，一旦完成，我需要在每个按钮单击时生成文本框和标签。

*   生成 4 个具有不同的单选按钮`Content`
*   单击每个按钮时，`Content`根据单击的按钮生成 8 个不同的标签，并生成 64 个文本框，这些文本框是只读的，每个标签都有 8 个与之关联的文本框。即 8 x 8

我通过以下方式在某种程度上取得了成功：

**XAML：**

在我的 xaml 中，我将网格划分为 2 行。第一行将有 4 个单选按钮。第二行将分为 2 列，其中第一列将有 8 个动态标签，第二列将有 64 个文本框。即每行8个。

```
<Grid Grid.Row="0">                     

        <ItemsControl ItemsSource="{Binding Children}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Vertical" >
                        <RadioButton Content="{Binding RadioBase}" Margin="0,10,0,0" IsChecked="{Binding BaseCheck}" GroupName="SlotGroup" />                            
                    </StackPanel>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>

        <Button Content="Refresh Regs" HorizontalAlignment="Center" VerticalAlignment="Center" Grid.Row="1" Margin="0" Width="100" Height="25" />
    </Grid>

<Grid Grid.Row="1">            

        <ItemsControl ItemsSource="{Binding Children}" Grid.Column="0">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                        <ItemsControl Visibility="{Binding IsRegisterItemsVisible, Converter={StaticResource BoolToVisibilityConv}}" ItemsSource="{Binding RegisterLabels}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Margin="50,20,0,0">
                                        <TextBlock Text="{Binding}"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>

        <ItemsControl ItemsSource="{Binding Children}" Grid.Column="1">
            // Textbox here
        </ItemsControl>
    </Grid> 
```

**FPGARadioWidgetViewModel类：**这里设置这个类的DataContext

```
public ObservableCollection<FPGAViewModel> Children { get; set; }

    public FPGARadioWidgetViewModel()
    {
        Children = new ObservableCollection<FPGAViewModel>();
        Children.Add(new FPGAViewModel() { RadioBase = "Base 0x0", ID = 0 });
        Children.Add(new FPGAViewModel() { RadioBase = "Base 0x40", ID = 1 });
        Children.Add(new FPGAViewModel() { RadioBase = "Base 0x80", ID = 2 });
        Children.Add(new FPGAViewModel() { RadioBase = "Base 0xc0", ID = 3 });            
    } 
```

**FPGAViewModel 类：**

```
private bool sBaseCheck;
    public bool BaseCheck
    {
        get { return this.sBaseCheck; }
        set
        {
            this.sBaseCheck = value;
            Generatelabels(this, ID);
            this.OnPropertyChanged("BaseCheck");
        }
    }

    private static void Generatelabels(FPGAViewModel currentItem, int index)
    {
        int m_baseRegister = 0;

        if (index == 0)
        {                
            for (int i = 0; i < 0x40 / 8; i++)
            {
                int reg = (i * 8) + m_baseRegister;
                currentItem.RegisterLabels[i] = "Reg 0x" + reg.ToString("X");
                currentItem.IsRegisterItemsVisible = true;
            }
        }
        else if (index == 1)
        {
            m_baseRegister = 0x40 * index;
            for (int i = 0; i < 0x40 / 8; i++)
            {
                int reg = (i * 8) + m_baseRegister;
                currentItem.RegisterLabels[i] = "Reg 0x" + reg.ToString("X");
                currentItem.IsRegisterItemsVisible = true;
            }
        }
        // Similarly for Index 2 and Index = 3
    }

    private string[] registerLabels = new string[8];
    public string[] RegisterLabels { get { return registerLabels; } }

    private bool isRegisterItemsVisible = false;
    public bool IsRegisterItemsVisible
    {
        get { return isRegisterItemsVisible; }
        set
        {
            isRegisterItemsVisible = value;
            OnPropertyChanged("IsRegisterItemsVisible");
            OnPropertyChanged("RegisterLabels");
        }
    }        

    private string _RadioBase;
    public string RadioBase
    {
        get; set;
    }

    private int _ID;
    public int ID
    {
        get; set;
    } 
```

因此，如果您注意到上面的 viewmodel 类，Index 会给我单击的单选按钮，我可以根据计算生成具有不同值的标签。十六进制转换完成。

这是要求：

*   当我单击单选按钮时，标签会显示在其中，`Grid.Column="0"`但我希望文本框也相应地放置。如前所述，每次单击按钮将显示 64 个框，每个标签 8 个。文本框必须显示在`Grid.Column="1"`.

*   当我单击单选按钮时，会显示标签。当我单击下一个按钮时，标签会再次显示。但之前显示的标签不会被清除。我想在显示新标签之前清除它们。

*   启动时，必须选中第一个单选按钮，并且必须显示关联的标签 + 文本框。

我在 C++ 中创建文本框的示例代码：

```
for(i = 0; i < 0x40; i++)
{
    m_registerGetValue[i] = new TextEditor();
    m_registerGetValue[i]->setReadOnly(true);
    addAndMakeVisible(m_registerGetValue[i]);
} 
```

这是屏幕截图：![了解更多详情](../Images/3c9f33dc5913bb14248a3d1757159f7c.png) 请帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:41:42.723

我会为此采取不同的方法：

*   你无线电虚拟机是好的，但它们也应该是一个儿童集合，包含网格中的每个“行”，它又包含一个“标题”属性（你放在标签上的那个）和一个列表8 个字符串值，它们是您将在文本框中显示的值。就像是：

主视图模型

1.  -> 无线电 Vms 列表
2.  -> 选定的无线电虚拟机
    1.  -> 儿童“行”列表
    2.  排
        1.  -> 行标签（字符串属性）
        2.  -> 字符串值列表

那么您只需要 2 个 itemcontrols：1 个绘制所有“行”以及每行内部、一个标签和第二个 ItemsControl（在 ItemsPanelTemplate 中使用水平 StackPanel 来绘制文本框）

# javascript - 同源策略导致从 www.example.com 到 example.com 的 Ajax 请求被拒绝？

> ID：13161092
> 
> 赞同：1
> 
> 时间：2012-10-31T15:12:02.423
> 
> 标签：javascript, ajax, security, same-origin-policy

如果您访问[http://www.example.com/dir上的网站，那么对](http://www.example.com/dir)[http://example.com/dir/something.php](http://example.com/dir/something.php)的任何 ajax 请求（缺少 www）都会导致以下消息显示在谷歌浏览器的控制台：

```
XMLHttpRequest cannot load http://example.com/dir/something.php.
Origin http://www.example.com is not allowed by Access-Control-Allow-Origin. 
```

这是怎么回事，可以做些什么来解决这个问题？

编辑：当您访问 www.example.com 时，example.com 设置的任何 cookie 似乎也会消失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:15:00.440

子域被认为是“不同的域”，因此将被阻止。包括在其中是`www`因为它被认为是`example.com`

可以通过 iframe 通信解决此问题，因为 iframe 可以与主页内容进行通信，只要它们位于同一个顶级域中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T15:16:28.790

`www.example.com`并且`example.com`是不同的域，它们可以提供不同的内容。`www.stackoverflow.com`仅重定向到，`stackoverflow.com`但从技术上讲，它可以显示一个充满小马的站点。

请参阅[*起源确定规则*](http://en.wikipedia.org/wiki/Same_origin_policy#Origin_determination_rules)- 它实际上使用完全相同的`example.com`( *nomen est omen!* ) 作为示例。

# ios - 游戏中心显示方向错误

> ID：13161096
> 
> 赞同：1
> 
> 时间：2012-10-31T15:12:18.617
> 
> 标签：ios, game-center

我正在尝试将游戏中心集成到我的应用程序中。它在 iPad 上运行良好，但在 iPhone 上，游戏中心视图部分显示，方向错误。见：[http ://cl.ly/image/2b241H210T3E](http://cl.ly/image/2b241H210T3E)

这是我如何称呼视图：

```
 GKLeaderboardViewController *lb = [[GKLeaderboardViewController alloc] init];
if (lb != nil) {
    lb.category = [NSString stringWithFormat:@"%@_overall", [AppSettings appleGameCenterId]];
    lb.leaderboardDelegate = self;
    [self presentModalViewController:lb animated:YES];
}
[lb release]; 
```

我还尝试像这样子类 GKLeaderboardViewController：

。H：

```
 @interface ITGKLeaderboardViewController : GKLeaderboardViewController 
 @end 
```

米：

```
@interface ITGKLeaderboardViewController ()

@end

@implementation ITGKLeaderboardViewController

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskLandscape;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
}

@end 
```

但这仍然是相同的结果。

任何的想法 ？谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:14:44.073

终于喜欢怎么解决了。

```
self.modalPresentationStyle = UIModalPresentationCurrentContext; 
```

我在使用 MFMailComposeViewController 时遇到了完全相同的问题，并且同一行解决了该问题。

# facebook-graph-api - 使用 Facebook API (Javascript SDK) 从页面获取事件列表

> ID：13161098
> 
> 赞同：1
> 
> 时间：2012-10-31T15:12:29.083
> 
> 标签：facebook-graph-api, facebook-javascript-sdk

看来我无法从 Facebook 页面检索事件。我已经用相册（来自同一页面）做到了这一点，效果很好。加载 API 和所有内容后，我使用此函数获取事件并显示它们：

```
function getAlbums() {
        FB.api('/___PAGE___/events', function (resp) {
            if (resp.data !== undefined) {
                for (var i = 0, l = resp.data.length; i < l; i++) {
                    var event = resp.data[i];
                    // process events here...
                }
            }
            else 
            // no events handle             
        });
    } 
```

它直接进入 0 个事件的句柄，这意味着这是真的：resp.data == undefined。所以我没有从 Facebook 获得任何数据。找不到任何解决方案，因为其他主要来自 PHP 和 FQL，我不能在这里使用。无论用户是否登录，我都需要能够显示事件。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T08:23:31.537

正如@cpilko 所提到的，存在这个[错误](https://developers.facebook.com/bugs/165109696955100?browse=search_5092119b84f167f16476254)，因此您过去的事件无法通过 Graph API 检索。仅检索未来事件。您也可以订阅相同的错误，以便在修复后及时通知自己。

# java - 通过为多个域设置 JSESSIONID cookie 来共享会话

> ID：13161100
> 
> 赞同：1
> 
> 时间：2012-10-31T15:12:34.670
> 
> 标签：java, session, tomcat, web-applications, servlets

我的 Web 应用程序部分可从 www.domainA.com 访问，另一部分可从 www.domainB.com 访问。当我通过 domainA.com 进入我的应用程序并导航到 domainB.com 时，旧会话丢失并创建了新会话。但是我不想在这两个域之间共享我的会话（当我登录 domainA.com 时，我不想再次登录 domainB.com）。

所以我认为解决方案是`JSESSIONID`为域 domainA.com 和 domainB.com 创建 cookie，无论输入哪个站点。

我以为我会在创建会话时手动创建`HttpSessionListener`一个设置的`JSESSIONID`cookie。但我不知道如何从这个 HttpSessionListener 设置 cookie。

另一种实现此目的的方法是使用`Filter`. 但对我来说，过滤每个请求似乎是不必要的，即使我只需要在创建会话时设置 cookie。

我正在使用 Tomcat 7，但对于所有 Java 服务器的通用解决方案将不胜感激。

我还认为最好的解决方案是以某种方式挂钩或覆盖机制，在正常情况下设置 cookie 并使其为两个域设置此 cookie。

可能存在没有想到的更好更清洁的解决方案。

# android - Android布局 - 绘制分隔线，它是如何工作的？

> ID：13161101
> 
> 赞同：0
> 
> 时间：2012-10-31T15:12:35.717
> 
> 标签：android, android-listview

我正在尝试复制一些布局 xml（我无法开始工作），但我不明白这是如何工作的。它绘制了一个带有包装内容的分隔线，但它没有内容那么它是如何绘制的？

```
<TextView
    android:id="@+id/divider"
    android:layout_width="wrap_content"
    android:layout_height="1px"
    android:background="@color/medium_gray"
    android:layout_below="@id/spacer"
    android:layout_alignParentRight="true"
    android:layout_marginRight="@dimen/gutter_right"
    android:layout_toRightOf="@id/image" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:21:56.470

如果我不得不猜测，他们会将内容放入代码中的某个位置。它们使背景变灰，但高度只有 1 个像素高，所以如果你用空白填充 TextView，它会形成一条高度为 1 个像素的灰线。

无论如何，常量`wrap_content`意味着视图的大小取决于所包含的内容。在 a 的情况下`TextView`，它将与它必须绘制的字符一样大。如果您将其更改为`fill_parent`or `match_parent`，则大小将根据其父级确定的尺寸进行绑定。

如果你做了这样的事情：

```
<TextView
    android:id="@+id/divider"
    android:layout_width="match_parent"
    android:layout_height="1px"
    android:background="@color/medium_gray"
    android:layout_below="@id/spacer"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_marginRight="@dimen/gutter_right" /> 
```

然后它将从父节点的左侧到父节点的右侧绘制一条 1 像素高的灰线，从 size 的右侧减去一个边距`@dimen/gutter_right`。

除了没有禁用绘图的小部件之外，没有特定的理由使用`TextView`它，因此绘制了背景。

# webkit - 抓取在 URL 中使用井号标签的页面

> ID：13161103
> 
> 赞同：1
> 
> 时间：2012-10-31T15:12:39.117
> 
> 标签：webkit, web-crawler, phantomjs, headless-browser

我正在构建一个工具，用于获取有关网站的一些基本元数据（与 Facebook 在您尝试共享链接时所做的相同）：标题、描述和主图像。[这对于带有Nokogiri](http://nokogiri.org/)、[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)或许多其他工具的 HTML 页面来说相当简单。

但是，大量使用 ajax 的页面呢？一些网站，尤其是那些使用哈希片段的网站可能会响应[Google AJAX 抓取标准](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=174992)并使用`_escaped_fragment_`，但我认为这不是大多数。

是否有任何使用[PhantomJS](http://phantomjs.org/)或无头 Chrome / Webkit 来建立爬网农场的稍微可扩展的解决方案？还是有另一种方法可以无头执行 JS 并提取生成的 HTML？

支持屏幕截图的工具的奖励积分：D

# android - Android 裁剪坐标

> ID：13161106
> 
> 赞同：5
> 
> 时间：2012-10-31T15:12:47.120
> 
> 标签：android, image, coordinates, crop

我想从图库或相机中裁剪图像，并获取原始图像的裁剪坐标 X 和 Y，而不是裁剪后的图像。

我需要这些坐标以便在 POST 请求中使用它们，在该请求中我发送原始图像和作物的坐标。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-13T20:09:26.633

您需要使用 DragRectView 类来读取所有的 Touch Event 和 Motion Event，然后在 Canvas 中绘制一个矩形。使用 onTouchEvent 函数，您可以从 X 和 Y 值中获取坐标。

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Rect;
import android.text.TextPaint;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.View;

public class DragRectView extends View {

    private Paint mRectPaint;    
    private int mStartX = 0;
    private int mStartY = 0;
    private int mEndX = 0;
    private int mEndY = 0;
    private boolean mDrawRect = false;
    private TextPaint mTextPaint = null;

    private OnUpCallback mCallback = null;

    public interface OnUpCallback {
        void onRectFinished(Rect rect);
    }

    public DragRectView(final Context context) {
        super(context);
        init();
    }

    public DragRectView(final Context context, final AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public DragRectView(final Context context, final AttributeSet attrs,     final int defStyle) {
        super(context, attrs, defStyle);
        init();
    }

    public void setOnUpCallback(OnUpCallback callback) {
        mCallback = callback;
    }

    private void init() {
        mRectPaint = new Paint();
            mRectPaint.setColor(getContext().getResources().getColor(android.R.color.holo_gr    een_light));
        mRectPaint.setStyle(Paint.Style.STROKE);
        mRectPaint.setStrokeWidth(5);

        mTextPaint = new TextPaint();
            mTextPaint.setColor(getContext().getResources().getColor(android.R.color.holo_gr    een_light));
        mTextPaint.setTextSize(20);
    }

    @Override
    public boolean onTouchEvent(final MotionEvent event) {

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                mDrawRect = false;
                mStartX = (int) event.getX();
                mStartY = (int) event.getY();
                invalidate();
                break;

            case MotionEvent.ACTION_MOVE:
                final int x = (int) event.getX();
                final int y = (int) event.getY();

                if (!mDrawRect || Math.abs(x - mEndX) > 5 || Math.abs(y -     mEndY) > 5) {
                    mEndX = x;
                    mEndY = y;
                    invalidate();
                }

                mDrawRect = true;
                break;

            case MotionEvent.ACTION_UP:
                if (mCallback != null) {
                    mCallback.onRectFinished(new Rect(Math.min(mStartX,     mEndX), Math.min(mStartY, mEndY),
                            Math.max(mEndX, mStartX), Math.max(mEndY,     mStartX)));
                }
                invalidate();
                break;

            default:
                break;
        }

        return true;
    }

    @Override
    protected void onDraw(final Canvas canvas) {
        super.onDraw(canvas);

        if (mDrawRect) {
            canvas.drawRect(Math.min(mStartX, mEndX), Math.min(mStartY, mEndY),
                    Math.max(mEndX, mStartX), Math.max(mEndY, mStartY), mRectPaint);
            canvas.drawText("  (" + Math.abs(mStartX - mEndX) + ", " + Math.abs(mStartY - mEndY) + ")",
                    Math.max(mEndX, mStartX), Math.max(mEndY, mStartY),     mTextPaint);
        }
    }
} 
```

这将是主要方法：

```
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Rect;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {

    private static final String TAG = "MainActivity";
    Bitmap Imag;
    ImageView view;
    TextView text;
    int picw, pich;
    int pix[];
    int x1, x2, y1, y2;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final DragRectView view2 = (DragRectView)     findViewById(R.id.dragRect);
        Imag = BitmapFactory.decodeResource(getResources(), R.drawable.rgb);
        picw = Imag.getWidth();
        pich = Imag.getHeight();
        view = (ImageView) findViewById(R.id.image);
        view.setImageBitmap(Imag);
        text = (TextView) findViewById(R.id.tex);
        pix = new int[picw * pich];

        if (null != view2) {
            view2.setOnUpCallback(new DragRectView.OnUpCallback() {
                @Override
                public void onRectFinished(final Rect rect) {
                    x1 = rect.left;
                    y1 = rect.top;
                    x2 = rect.right;
                    y2 = rect.bottom;

                    Toast.makeText(getApplicationContext(), "Coordenadas (" + x1 + ", " + y1 + ", " + x2 + ", " + y2 + ")", Toast.LENGTH_LONG).show();
                }
            });
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-03T05:06:54.183

```
 File tempDir = Environment.getExternalStorageDirectory();
                    tempDir = new File(tempDir.getAbsolutePath() + "/.temp/");
                    tempDir.mkdir();
                    File tempFile = null;
                    try {
                        tempFile = File.createTempFile("Trendii", ".png", tempDir);

                        ByteArrayOutputStream bytes = new ByteArrayOutputStream();
                        bitmap.compress(Bitmap.CompressFormat.JPEG, 100, bytes);
                        byte[] bitmapData = bytes.toByteArray();

                        //write the bytes in file
                        FileOutputStream fos = new FileOutputStream(tempFile);
                        fos.write(bitmapData);
                        fos.flush();
                        fos.close();

                        float height = 0, width = 0;

                        if (bitmap != null) {
                            height = bitmap.getHeight();
                            width = bitmap.getWidth();
                        }

                        Uri destination = Uri.fromFile(new File(getCacheDir(), "cropped"));
                        Crop.of(Uri.fromFile(tempFile), destination, inspirationId, height, width).asSquare().start(InspirationDetailsActivity.this);

                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }

                @Override
                public void onPermissionDenied(PermissionDeniedResponse response) {
                    showSettingsDialog();
                }

                @Override
                public void onPermissionRationaleShouldBeShown(PermissionRequest permission, PermissionToken token) {
                    token.continuePermissionRequest();
                }
            }).check();
        } else {

            File tempDir = Environment.getExternalStorageDirectory();
            tempDir = new File(tempDir.getAbsolutePath() + "/.temp/");
            tempDir.mkdir();
            File tempFile = null;
            try {
                tempFile = File.createTempFile("Trendii", ".png", tempDir);

                ByteArrayOutputStream bytes = new ByteArrayOutputStream();
                bitmap.compress(Bitmap.CompressFormat.JPEG, 100, bytes);
                byte[] bitmapData = bytes.toByteArray();

                //write the bytes in file
                FileOutputStream fos = new FileOutputStream(tempFile);
                fos.write(bitmapData);
                fos.flush();
                fos.close();

                float height = 0, width = 0;

                if (bitmap != null) {
                    height = bitmap.getHeight();
                    width = bitmap.getWidth();
                }

                Uri destination = Uri.fromFile(new File(getCacheDir(), "cropped"));
                Crop.of(Uri.fromFile(tempFile), destination, inspirationId, height, width).asSquare().start(this);

            } catch (IOException e) {
                e.printStackTrace();
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-20T12:16:28.743

[在https://github.com/Yalantis/uCrop](https://github.com/Yalantis/uCrop)库的帮助下，我得到了裁剪的图像。我使用了 com.github.yalantis:ucrop:2.2.6-native 版本并对其进行了一些修改。

```
open class UCropActivity1 : BaseActivity() {
companion object {
    const val DEFAULT_COMPRESS_QUALITY = 90
    val DEFAULT_COMPRESS_FORMAT = CompressFormat.JPEG
    const val NONE = 0
    const val SCALE = 1
    const val ROTATE = 2
    const val ALL = 3
    private const val TABS_COUNT = 3

    init {
        AppCompatDelegate.setCompatVectorFromResourcesEnabled(true)
    }
}

@ColorInt
private var mRootViewBackgroundColor = 0

@DrawableRes
private var mToolbarCropDrawable = 0
private var mGestureCropImageView: GestureCropImageView? = null
private var mOverlayView: OverlayView? = null
private var mWrapperStateAspectRatio: ViewGroup? = null
private var mBlockingView: View? = null
private var type: String? = null
private var mCompressFormat = DEFAULT_COMPRESS_FORMAT
private var mCompressQuality = DEFAULT_COMPRESS_QUALITY
private var mAllowedGestures = intArrayOf(SCALE, ROTATE, ALL)

private val mImageListener: TransformImageListener = object : TransformImageListener {
    override fun onRotate(currentAngle: Float) {
    }

    override fun onScale(currentScale: Float) {
    }

    override fun onLoadComplete() {
        ucrop?.animate()?.alpha(1f)?.setDuration(300)?.interpolator = AccelerateInterpolator()
        mBlockingView?.isClickable = false
    }

    override fun onLoadFailure(e: Exception) {
        setResultError(e)
        finish()
    }
}

override fun getLayoutId(): Int? {
    return R.layout.activity_crop
}

public override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    val intent = intent
    setupViews(intent)
    setImageData(intent)
}

override fun onStop() {
    super.onStop()
    if (mGestureCropImageView != null) {
        mGestureCropImageView?.cancelAllAnimations()
    }
}

/**
 * This method extracts all data from the incoming intent and setups views properly.
 */
private fun setImageData(intent: Intent) {
    val inputUri = intent.getParcelableExtra<Uri>(UCrop1.EXTRA_INPUT_URI)
    val outputUri = intent.getParcelableExtra<Uri>(UCrop1.EXTRA_OUTPUT_URI)
    type = intent.getStringExtra(UCrop1.EXTRA_TYPE)
    processOptions(intent)
    if (inputUri != null && outputUri != null) {
        try {
            mGestureCropImageView?.setImageUri(inputUri, outputUri)
        } catch (e: Exception) {
            setResultError(e)
            finish()
        }
    } else {
        setResultError(NullPointerException(getString(com.yalantis.ucrop.R.string.ucrop_error_input_data_is_absent)))
        finish()
    }
}

/**
 * This method extracts [#optionsBundle][UCrop1.Options] from incoming intent
 * and setups Activity, [OverlayView] and [CropImageView] properly.
 */
private fun processOptions(intent: Intent) {
    // Bitmap compression options
    val compressionFormatName = intent.getStringExtra(UCrop1.Options.EXTRA_COMPRESSION_FORMAT_NAME)
    var compressFormat: CompressFormat? = null
    if (!TextUtils.isEmpty(compressionFormatName)) {
        compressFormat = CompressFormat.valueOf(compressionFormatName!!)
    }
    mCompressFormat = compressFormat ?: DEFAULT_COMPRESS_FORMAT
    mCompressQuality = intent.getIntExtra(UCrop1.Options.EXTRA_COMPRESSION_QUALITY, DEFAULT_COMPRESS_QUALITY)

    // Gestures options
    val allowedGestures = intent.getIntArrayExtra(UCrop1.Options.EXTRA_ALLOWED_GESTURES)
    if (allowedGestures != null && allowedGestures.size == TABS_COUNT) {
        mAllowedGestures = allowedGestures
    }

    // Crop image view options
    mGestureCropImageView?.maxBitmapSize = intent.getIntExtra(UCrop1.Options.EXTRA_MAX_BITMAP_SIZE, CropImageView.DEFAULT_MAX_BITMAP_SIZE)
    mGestureCropImageView?.setMaxScaleMultiplier(intent.getFloatExtra(UCrop1.Options.EXTRA_MAX_SCALE_MULTIPLIER, CropImageView.DEFAULT_MAX_SCALE_MULTIPLIER))
    mGestureCropImageView?.setImageToWrapCropBoundsAnimDuration(intent.getIntExtra(UCrop1.Options.EXTRA_IMAGE_TO_CROP_BOUNDS_ANIM_DURATION, CropImageView.DEFAULT_IMAGE_TO_CROP_BOUNDS_ANIM_DURATION).toLong())

    // Overlay view options
    //mOverlayView?.setFreestyleCropEnabled(intent.getBooleanExtra(UCrop1.Options.EXTRA_FREE_STYLE_CROP, OverlayView.DEFAULT_FREESTYLE_CROP_MODE != OverlayView.FREESTYLE_CROP_MODE_ENABLE));
    mOverlayView?.freestyleCropMode = FREESTYLE_CROP_MODE_ENABLE
    mOverlayView?.setDimmedColor(intent.getIntExtra(UCrop1.Options.EXTRA_DIMMED_LAYER_COLOR, ContextCompat.getColor(this, com.yalantis.ucrop.R.color.ucrop_color_default_dimmed)))
    mOverlayView?.setCircleDimmedLayer(intent.getBooleanExtra(UCrop1.Options.EXTRA_CIRCLE_DIMMED_LAYER, OverlayView.DEFAULT_CIRCLE_DIMMED_LAYER))
    mOverlayView?.setShowCropFrame(intent.getBooleanExtra(UCrop1.Options.EXTRA_SHOW_CROP_FRAME, OverlayView.DEFAULT_SHOW_CROP_FRAME))
    mOverlayView?.setCropFrameColor(intent.getIntExtra(UCrop1.Options.EXTRA_CROP_FRAME_COLOR, ContextCompat.getColor(this, com.yalantis.ucrop.R.color.ucrop_color_default_crop_frame)))
    mOverlayView?.setCropFrameStrokeWidth(intent.getIntExtra(UCrop1.Options.EXTRA_CROP_FRAME_STROKE_WIDTH, resources.getDimensionPixelSize(com.yalantis.ucrop.R.dimen.ucrop_default_crop_frame_stoke_width)))
    mOverlayView?.setShowCropGrid(intent.getBooleanExtra(UCrop1.Options.EXTRA_SHOW_CROP_GRID, OverlayView.DEFAULT_SHOW_CROP_GRID))
    mOverlayView?.setCropGridRowCount(intent.getIntExtra(UCrop1.Options.EXTRA_CROP_GRID_ROW_COUNT, OverlayView.DEFAULT_CROP_GRID_ROW_COUNT))
    mOverlayView?.setCropGridColumnCount(intent.getIntExtra(UCrop1.Options.EXTRA_CROP_GRID_COLUMN_COUNT, OverlayView.DEFAULT_CROP_GRID_COLUMN_COUNT))
    mOverlayView?.setCropGridColor(intent.getIntExtra(UCrop1.Options.EXTRA_CROP_GRID_COLOR, ContextCompat.getColor(this, com.yalantis.ucrop.R.color.ucrop_color_default_crop_grid)))
    mOverlayView?.setCropGridCornerColor(intent.getIntExtra(UCrop1.Options.EXTRA_CROP_GRID_CORNER_COLOR, ContextCompat.getColor(this, com.yalantis.ucrop.R.color.ucrop_color_default_crop_grid)))
    mOverlayView?.setCropGridStrokeWidth(intent.getIntExtra(UCrop1.Options.EXTRA_CROP_GRID_STROKE_WIDTH, resources.getDimensionPixelSize(com.yalantis.ucrop.R.dimen.ucrop_default_crop_grid_stoke_width)))

    mRootViewBackgroundColor = intent.getIntExtra(UCrop1.Options.EXTRA_UCROP_ROOT_VIEW_BACKGROUND_COLOR, ContextCompat.getColor(this, com.yalantis.ucrop.R.color.ucrop_color_crop_background))
    ucrop_frame?.setBackgroundColor(mRootViewBackgroundColor)

    // Aspect ratio options
    val aspectRatioX = intent.getFloatExtra(UCrop1.EXTRA_ASPECT_RATIO_X, 0f)
    val aspectRatioY = intent.getFloatExtra(UCrop1.EXTRA_ASPECT_RATIO_Y, 0f)
    if (aspectRatioX > 0 && aspectRatioY > 0) {
        if (mWrapperStateAspectRatio != null) {
            mWrapperStateAspectRatio!!.visibility = View.GONE
        }
        mGestureCropImageView?.targetAspectRatio = aspectRatioX / aspectRatioY
    } else {
        mGestureCropImageView?.targetAspectRatio = CropImageView.SOURCE_IMAGE_ASPECT_RATIO
    }

    // Result bitmap max size options
    val maxSizeX = intent.getIntExtra(UCrop1.EXTRA_MAX_SIZE_X, 0)
    val maxSizeY = intent.getIntExtra(UCrop1.EXTRA_MAX_SIZE_Y, 0)
    if (maxSizeX > 0 && maxSizeY > 0) {
        mGestureCropImageView?.setMaxResultImageSizeX(maxSizeX)
        mGestureCropImageView?.setMaxResultImageSizeY(maxSizeY)
    }
}

private fun setupViews(intent: Intent) {
    getAppComponent().inject(this)
    mToolbarCropDrawable = intent.getIntExtra(UCrop1.Options.EXTRA_UCROP_WIDGET_CROP_DRAWABLE, com.yalantis.ucrop.R.drawable.ucrop_ic_done)
    initiateRootViews()
    setupControllerClickListeners()
    cropViewScreen(appPref)
}

/**
 * method for controller click listeners
 */
private fun setupControllerClickListeners() {
    ivCancel?.setOnClickListener { showDialogForDiscardChanges() }
    ivConfirm?.setOnClickListener {
        mGestureCropImageView?.cropAndSaveImage(mCompressFormat, mCompressQuality, object : BitmapCropCallback {
            override fun onBitmapCropped(resultUri: Uri, offsetX: Int, offsetY: Int, imageWidth: Int, imageHeight: Int) {
                setResultUri(resultUri, mGestureCropImageView?.targetAspectRatio!!, offsetX, offsetY, imageWidth, imageHeight)
                finish()
            }

            override fun onCropFailure(t: Throwable) {
                setResultError(t)
                finish()
            }
        })
    }
    ivBackDetail?.setOnClickListener { onBackPressed() }
    ivRotate?.setOnClickListener { rotateByAngle() }
}

private fun initiateRootViews() {
    mGestureCropImageView = ucrop?.cropImageView
    mOverlayView = ucrop?.overlayView
    mGestureCropImageView?.setTransformImageListener(mImageListener)
}

private fun rotateByAngle() {
    mGestureCropImageView?.postRotate(90F)
    mGestureCropImageView?.setImageToWrapCropBounds()
}

private fun setResultUri(uri: Uri?, resultAspectRatio: Float, offsetX: Int, offsetY: Int, imageWidth: Int, imageHeight: Int) {
    setResult(RESULT_OK, Intent()
        .putExtra(UCrop1.EXTRA_OUTPUT_URI, uri)
        .putExtra(UCrop1.EXTRA_TYPE, type)
        .putExtra(UCrop1.EXTRA_OUTPUT_CROP_ASPECT_RATIO, resultAspectRatio)
        .putExtra(UCrop1.EXTRA_OUTPUT_IMAGE_WIDTH, imageWidth)
        .putExtra(UCrop1.EXTRA_OUTPUT_IMAGE_HEIGHT, imageHeight)
        .putExtra(UCrop1.EXTRA_OUTPUT_OFFSET_X, offsetX)
        .putExtra(UCrop1.EXTRA_OUTPUT_OFFSET_Y, offsetY)
    )
}

private fun setResultError(throwable: Throwable?) {
    setResult(UCrop1.RESULT_ERROR, Intent().putExtra(UCrop1.EXTRA_ERROR, throwable))
} 
```

}

Ucrop1.kt 文件

```
class UCrop1 private constructor(source: Uri, destination: Uri, type: String) {
private val mCropIntent: Intent = Intent()
private var mCropOptionsBundle: Bundle = Bundle()

fun withOptions(options: Options): UCrop1 {
    mCropOptionsBundle.putAll(options.optionBundle)
    return this
}

/**
 * Send the crop Intent from an Activity with a custom request code
 *
 * @param activity    Activity to receive result
 * @param requestCode requestCode for result
 */
@JvmOverloads
fun start(activity: Activity, requestCode: Int = REQUEST_CROP) {
    activity.startActivityForResult(getIntent(activity), requestCode)
}

/**
 * Get Intent to start [UCropActivity1]
 *
 * @return Intent for [UCropActivity1]
 */
fun getIntent(context: Context): Intent {
    mCropIntent.setClass(context, UCropActivity1::class.java)
    mCropIntent.putExtras(mCropOptionsBundle)
    return mCropIntent
}

/**
 * Class that helps to setup advanced configs that are not commonly used.
 * Use it with method [.withOptions]
 */
class Options {
    val optionBundle: Bundle = Bundle()

    /**
     * Set one of bitmap that will be used to save resulting Bitmap.
     */
    fun setCompressionFormat(format: CompressFormat) {
        optionBundle.putString(EXTRA_COMPRESSION_FORMAT_NAME, format.name)
    }

    /**
     * Set compression quality [0-100] that will be used to save resulting Bitmap.
     */
    fun setCompressionQuality(@IntRange(from = 0) compressQuality: Int) {
        optionBundle.putInt(EXTRA_COMPRESSION_QUALITY, compressQuality)
    }

    /**
     * @param hide - set to true to hide the bottom controls (shown by default)
     */
    fun setHideBottomControls(hide: Boolean) {
        optionBundle.putBoolean(EXTRA_HIDE_BOTTOM_CONTROLS, hide)
    }

    /**
     * @param enabled - set to true to let user resize crop bounds (disabled by default)
     */
    fun setFreeStyleCropEnabled(enabled: Boolean) {
        optionBundle.putBoolean(EXTRA_FREE_STYLE_CROP, enabled)
    }

    companion object {
        const val EXTRA_COMPRESSION_FORMAT_NAME = "$EXTRA_PREFIX.CompressionFormatName"
        const val EXTRA_COMPRESSION_QUALITY = "$EXTRA_PREFIX.CompressionQuality"
        const val EXTRA_ALLOWED_GESTURES = "$EXTRA_PREFIX.AllowedGestures"
        const val EXTRA_MAX_BITMAP_SIZE = "$EXTRA_PREFIX.MaxBitmapSize"
        const val EXTRA_MAX_SCALE_MULTIPLIER = "$EXTRA_PREFIX.MaxScaleMultiplier"
        const val EXTRA_IMAGE_TO_CROP_BOUNDS_ANIM_DURATION = "$EXTRA_PREFIX.ImageToCropBoundsAnimDuration"
        const val EXTRA_DIMMED_LAYER_COLOR = "$EXTRA_PREFIX.DimmedLayerColor"
        const val EXTRA_CIRCLE_DIMMED_LAYER = "$EXTRA_PREFIX.CircleDimmedLayer"
        const val EXTRA_SHOW_CROP_FRAME = "$EXTRA_PREFIX.ShowCropFrame"
        const val EXTRA_CROP_FRAME_COLOR = "$EXTRA_PREFIX.CropFrameColor"
        const val EXTRA_CROP_FRAME_STROKE_WIDTH = "$EXTRA_PREFIX.CropFrameStrokeWidth"
        const val EXTRA_SHOW_CROP_GRID = "$EXTRA_PREFIX.ShowCropGrid"
        const val EXTRA_CROP_GRID_ROW_COUNT = "$EXTRA_PREFIX.CropGridRowCount"
        const val EXTRA_CROP_GRID_COLUMN_COUNT = "$EXTRA_PREFIX.CropGridColumnCount"
        const val EXTRA_CROP_GRID_COLOR = "$EXTRA_PREFIX.CropGridColor"
        const val EXTRA_CROP_GRID_CORNER_COLOR = "$EXTRA_PREFIX.CropGridCornerColor"
        const val EXTRA_CROP_GRID_STROKE_WIDTH = "$EXTRA_PREFIX.CropGridStrokeWidth"
        const val EXTRA_TOOL_BAR_COLOR = "$EXTRA_PREFIX.ToolbarColor"
        const val EXTRA_STATUS_BAR_COLOR = "$EXTRA_PREFIX.StatusBarColor"
        const val EXTRA_UCROP_COLOR_CONTROLS_WIDGET_ACTIVE = "$EXTRA_PREFIX.UcropColorControlsWidgetActive"
        const val EXTRA_UCROP_WIDGET_COLOR_TOOLBAR = "$EXTRA_PREFIX.UcropToolbarWidgetColor"
        const val EXTRA_UCROP_TITLE_TEXT_TOOLBAR = "$EXTRA_PREFIX.UcropToolbarTitleText"
        const val EXTRA_UCROP_WIDGET_CANCEL_DRAWABLE = "$EXTRA_PREFIX.UcropToolbarCancelDrawable"
        const val EXTRA_UCROP_WIDGET_CROP_DRAWABLE = "$EXTRA_PREFIX.UcropToolbarCropDrawable"
        const val EXTRA_UCROP_LOGO_COLOR = "$EXTRA_PREFIX.UcropLogoColor"
        const val EXTRA_HIDE_BOTTOM_CONTROLS = "$EXTRA_PREFIX.HideBottomControls"
        const val EXTRA_FREE_STYLE_CROP = "$EXTRA_PREFIX.FreeStyleCrop"
        const val EXTRA_ASPECT_RATIO_SELECTED_BY_DEFAULT = "$EXTRA_PREFIX.AspectRatioSelectedByDefault"
        const val EXTRA_ASPECT_RATIO_OPTIONS = "$EXTRA_PREFIX.AspectRatioOptions"
        const val EXTRA_UCROP_ROOT_VIEW_BACKGROUND_COLOR = "$EXTRA_PREFIX.UcropRootViewBackgroundColor"
    }

}

companion object {
    const val REQUEST_CROP = 69
    const val RESULT_ERROR = 96
    const val MIN_SIZE = 10
    private const val EXTRA_PREFIX = "APPLICATION_ID"
    const val EXTRA_INPUT_URI = "$EXTRA_PREFIX.InputUri"
    const val EXTRA_OUTPUT_URI = "$EXTRA_PREFIX.OutputUri"
    const val EXTRA_TYPE = "$EXTRA_PREFIX.Type"
    const val EXTRA_OUTPUT_CROP_ASPECT_RATIO = "$EXTRA_PREFIX.CropAspectRatio"
    const val EXTRA_OUTPUT_IMAGE_WIDTH = "$EXTRA_PREFIX.ImageWidth"
    const val EXTRA_OUTPUT_IMAGE_HEIGHT = "$EXTRA_PREFIX.ImageHeight"
    const val EXTRA_OUTPUT_OFFSET_X = "$EXTRA_PREFIX.OffsetX"
    const val EXTRA_OUTPUT_OFFSET_Y = "$EXTRA_PREFIX.OffsetY"
    const val EXTRA_ERROR = "$EXTRA_PREFIX.Error"
    const val EXTRA_ASPECT_RATIO_X = "$EXTRA_PREFIX.AspectRatioX"
    const val EXTRA_ASPECT_RATIO_Y = "$EXTRA_PREFIX.AspectRatioY"
    const val EXTRA_MAX_SIZE_X = "$EXTRA_PREFIX.MaxSizeX"
    const val EXTRA_MAX_SIZE_Y = "$EXTRA_PREFIX.MaxSizeY"

    /**
     * This method creates new Intent builder and sets both source and destination image URIs.
     *
     * @param source      Uri for image to crop
     * @param destination Uri for saving the cropped image
     * @param type String for the image type
     */
    fun of(source: Uri, destination: Uri, type: String): UCrop1 {
        return UCrop1(source, destination, type)
    }

    /**
     * Retrieve cropped image Uri from the result Intent
     *
     * @param intent crop result intent
     */
    fun getOutput(intent: Intent): Uri? {
        return intent.getParcelableExtra(EXTRA_OUTPUT_URI)
    }

    /**
     * Method retrieves error from the result intent.
     *
     * @param result crop result Intent
     * @return Throwable that could happen while image processing
     */
    fun getError(result: Intent): Throwable? {
        return result.getSerializableExtra(EXTRA_ERROR) as Throwable?
    }
}

init {
    mCropOptionsBundle.putParcelable(EXTRA_INPUT_URI, source)
    mCropOptionsBundle.putParcelable(EXTRA_OUTPUT_URI, destination)
    mCropOptionsBundle.putString(EXTRA_TYPE, type)
} 
```

}

在您的活动或片段中，在 onActivityResult 方法中，编写以下代码：

```
 val croppedOffsetX: Int = data.extras?.getInt(UCrop1.EXTRA_OUTPUT_OFFSET_X)!!
        val croppedOffsetY: Int = data.extras?.getInt(UCrop1.EXTRA_OUTPUT_OFFSET_Y)!!
        val croppedWidth: Int = data.extras?.getInt(UCrop1.EXTRA_OUTPUT_IMAGE_WIDTH)!!
        val croppedHeight: Int = data.extras?.getInt(UCrop1.EXTRA_OUTPUT_IMAGE_HEIGHT)!!

        croppedImageRect = Rect(croppedOffsetX, croppedOffsetY, croppedWidth, croppedHeight) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-15T13:49:18.693

lockdawn 的回答对我有用，但我必须更正这条线......

```
Math.max(mEndX, mStartX), Math.max(mEndY,     mStartX))); 
```

我认为这条线应该是：

```
Math.max(mEndX, mStartX), Math.max(mEndY,     mStartY))); 
```

# fluent-nhibernate - 流利的休眠多对多约定自动映射

> ID：13161107
> 
> 赞同：1
> 
> 时间：2012-10-31T15:12:48.510
> 
> 标签：fluent-nhibernate, fluent-nhibernate-mapping

我正在使用具有自动映射和约定的 FluentNH。我建立了一个多对多的约定：

```
 public class HasManyToManyConvention : IHasManyToManyConvention
    {
        public void Apply(IManyToManyCollectionInstance instance)
        {
            instance.Key.Column(instance.EntityType.Name + "Id");
            instance.Relationship.Column(instance.Relationship.StringIdentifierForModel + "Id");
        }
    } 
```

假设这些是我的表： User(Id,Username,Password), Role(Id,Name)

数据库生成后，关联表生成良好： UserInRole(UserId,RoleId)

但是，它没有复合主键集。知道如何从公约中解决这个问题吗？

任何人？可能是目前 Fluent 不支持此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:46:25.180

事实证明，公约应该保持不变。但是，我现在使用 ISet<User> 和 ISet<Role>，而不是在我的实体定义中使用 IList<User> 和 IList<Role>。现在 NHibernate 将自动在关联表上创建一个复合主键。

# javascript - 没有连接到 DOM 元素或连接到临时 DOM 元素的 jQuery 函数调用

> ID：13161109
> 
> 赞同：0
> 
> 时间：2012-10-31T15:12:54.327
> 
> 标签：javascript, jquery, tipsy

我有以下 jQuery 摘录：

```
Tselector.mouseup = function() {
     var sel =  getSelectionCharOffsetsWithin(document.getElementById("base"));
     //...
} 
```

每次我在`div`具有上述功能的标签中选择文本时`id=base`，都会在释放鼠标按钮时触发。`getSelectionCharOffsetsWithin(element)`是一种解析选择的方法（我需要进一步的步骤）。

我现在要做的是弹出一个工具提示，向我显示我可以对选择做什么的选项。（对于那些熟悉 iOS 的人来说，它类似于我在 Web 浏览器中选择文本时的功能。）

问题是 jQuery 需要一个 DOM 元素来执行操作。例如，当使用[Tipsy](http://jquery.com/)时：

```
$('#foo').tipsy(); 
```

工具提示与`div`具有`id=foo`.

触发该`mouseup`功能时，我选择的文本没有这样的元素，因此我无法将我的选择与工具提示联系起来。

是否有可能在不连接到 DOM 元素的情况下直接调用 jQuery 函数（例如，将工具提示与鼠标位置连接）？如果没有，是否可以使用正在创建并连接到我的事件但未永久存储在 HTML 代码中的临时 DOM 元素来解决问题？

这是一个证明这一点的小提琴：http: [//jsfiddle.net/noplacetoh1de/bYNmb/](http://jsfiddle.net/noplacetoh1de/bYNmb/)

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:20:10.343

我认为这是可能的。使用您的**sel**变量创建一个临时跨度，首先拆分 HTML。使用 substr() ( [http://www.w3schools.com/jsref/jsref_substr.asp](http://www.w3schools.com/jsref/jsref_substr.asp) )。然后在您的选择周围放置一个跨度。When the selection hides, you should get the innerHTML of the span but it back in it's place using the **sel** variable again, and then destroy it.

我认为这在 mootools 顺便说一句要容易得多。也许你可以设置一个我们可以继续的小提琴？

# c# - 检查 IsDisposed 和 Disposing 时“无法访问已处理的对象”

> ID：13161115
> 
> 赞同：1
> 
> 时间：2012-10-31T15:13:12.140
> 
> 标签：c#, winforms, objectdisposedexception

当应用程序收到来自服务的调用时，它会为每个调用打开一个表单。用户必须在每个窗口中输入并关闭它。为了使用户的工作顺利进行，我试图在显示下一个窗口时重新激活用户正在处理的窗口。

执行此操作的方法如下：

```
private void ActivatePreviousActiveForm() {

    if (_activeWhenOpen != null && _activeWhenOpen.InvokeRequired) {
         if (!_activeWhenOpen.Disposing || !_activeWhenOpen.IsDisposed)
              _activeWhenOpen.Invoke((MethodInvoker)ActivatePreviousActiveForm);
    } else
         if (_activeWhenOpen != null && !(_activeWhenOpen is FrmRuntimeError))
             _activeWhenOpen.Activate();
} 
```

有时它会在到达线路时抛出““无法访问已处理的对象”

```
if (!_activeWhenOpen.Disposing || !_activeWhenOpen.IsDisposed) 
```

有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T15:21:19.137

尝试反转*if*条件：

这条线

`if (!_activeWhenOpen.Disposing || !_activeWhenOpen.IsDisposed)`

必须成为

`if (!_activeWhenOpen.IsDisposed || !_activeWhenOpen.Disposing)`

那是因为条件是按照它们编写的顺序检查的，所以你的代码可能会调用`Disposing`一个已经被释放的对象，从而引发你的错误。

编辑：

我也认为你应该改变**||** 到**&&**，因为如果您的窗口不是 Disposed 但处于 Disposing 状态，您可能会遇到错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:19:13.313

您无法访问已处置的对象。为什么要处置？当用户关闭表单时，关闭的默认行为是处置它。为了防止这种情况，您必须重写 Close 方法，以便它只是隐藏表单而不是处理它。像这样：

```
// Use this event handler for the FormClosing event.
private void YourFormClosing(object sender, FormClosingEventArgs e)
{
  this.Hide();
  e.Cancel = true; // this will cancel the close event.
} 
```

问候。

# java - 调用自己的方法时出错

> ID：13161116
> 
> 赞同：2
> 
> 时间：2012-10-31T15:13:17.367
> 
> 标签：java, methods

所以几周前我刚开始使用 Java，我正在尝试自学如何制作自己的方法。我编写了一个程序，在编译“ClassTest”类时添加两个数字。这是错误：

```
H:\Java Things\ClassTest.java:10: error: cannot find symbol
            GetNum(int1, int2);
        ^
  symbol:   method GetNum(int,int)
  location: class ClassTest
1 error

Process completed. 
```

这是**ClassTest**的代码：

```
import LotsOfMethods.*;

public class ClassTest
{
    public static void main (String[] args)
    {
        int int1 = 5, int2 = 7;
        GetNum(int1, int2);
    }
} 
```

这是**ExampleMethod**的代码：

```
package LotsOfMethods;

public class ExampleMethod
{
    public static int GetNum(int num1, int num2)
    {
        int result;
        result = num1 + num2;
        return result;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:24:06.393

首先，重要的是要了解如何在 Java 中调用方法。您需要指定将实现该方法的对象，以及您正在调用的方法的名称。

当你写：

```
GetNum(int1, int2); 
```

您没有指定将执行 GetNum 的对象。Java 有一些默认行为来处理这种情况：它尝试从代码周围的对象上下文中解析方法。所以 Java 说，“我找不到属于这个 ClassTest 对象的 GetNum() 方法”，你会得到错误：

```
H:\Java Things\ClassTest.java:10: error: cannot find symbol
            GetNum(int1, int2); 
```

您想要的方法在类 ExampleMethod 中。它是附加到 ExampleMethod 类的静态方法，这意味着您无需实例化副本即可到达那里。相反，您可以这样做：

```
int result = ExampleMethod.GetNum(int1, int2); 
```

具有静态方法的类围绕这些方法提供了一种命名空间，因此该类本身提供了足够的数据来解析您的方法。如果您有一个非静态方法，则需要执行以下操作：

```
ExampleMethod example = new ExampleMethod();
int result = example.GetNum(int1, int 2); 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:22:58.890

您可以将该`GetNum()`方法移动到 ClassTest 类中，或者您可以将`GetNum()`调用更改为`ExampleMethod.GetNum()`. 不知道为什么你有一个名为“ExampleMethod”的单独类；一般来说，您通常不需要定义一个新类来包含每个方法的定义。

# symfony - 如何在树枝中渲染带有多个参数的控制器？

> ID：13161118
> 
> 赞同：3
> 
> 时间：2012-10-31T15:13:21.113
> 
> 标签：symfony, render, twig

对于“with”的几个论点，您将如何做到这一点？

我正在努力让这个工作......

控制器：

```
public function BeforeSlideAction($template,$order) { 
```

枝条：

```
{% render "BizTVScreenDisplayBundle:Default:BeforeSlide" with { 'template': c.template.id, 'order': i } %} 
```

我收到一条错误消息，说缺少 arg2 ($order)...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T15:13:21.113

从来没有！

原来“订单”是一个保留字（在 TWIG 中？），这就是导致错误的原因。将其更改为订单号，我很好 =)

# c++ - 编译时出错，代码中看不到明显的错误

> ID：13161123
> 
> 赞同：0
> 
> 时间：2012-10-31T15:13:38.240
> 
> 标签：c++, windows

我正在修改 MSDN 上的 STablUpd 代码示例（用于编辑资源中的字符串表）但是，我遇到了一些错误。

错误所在的代码是

```
HSTRBLOCK strBlock = GetStringBlockW( L"file.exe", 7, MAKELANGID(LANG_ENGLISH, SUBLANG_ENGLISH_UK) );
UINT str1Len;
GetStringLength( strBlock, str1Len );
LPWSTR pszString1;
GetStringW(strBlock, 6, pszString1 );
MessageBox(NULL, (LPCSTR) pszString1, NULL, NULL); 
```

我收到的错误如下

```
Error   4   error C2065: 'pszString1' : undeclared identifier   tabledlg.c  190 1   STablUpd
Error   5   error C2065: 'pszString1' : undeclared identifier   tabledlg.c  191 1   STablUpd
Error   8   error C2065: 'pszString1' : undeclared identifier   tabledlg.c  192 1   STablUpd
Error   3   error C2146: syntax error : missing ';' before identifier 'pszString1'  tabledlg.c  190 1   STablUpd
Error   2   error C2275: 'LPWSTR' : illegal use of this type as an expression   tabledlg.c  190 1   STablUpd 
```

请任何人指出这是否有任何错误，我已经检查过，但代码对我来说似乎很好。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:16:47.890

似乎`LPWSTR`没有定义。要么您缺少`include`，要么您包含该文件，但某些预处理器指令排除了该类型。

有关更多信息，请参阅[此](http://www.codeproject.com/Articles/76252/What-are-TCHAR-WCHAR-LPSTR-LPWSTR-LPCTSTR-etc)内容。

# coldfusion - 在特定字符之前、之后和之间提取文本

> ID：13161124
> 
> 赞同：1
> 
> 时间：2012-10-31T15:13:39.197
> 
> 标签：coldfusion, coldfusion-9

在我的数据库中，一些关键字被“/”和“\”字符包围。

在应用程序端，在 ColdFusion 中，我试图提取和分离出现在由“/”和“\”包围的文本字符串中和之前或之后的文本</p>

所以说我有一句话：我的胡扯有一个名字，它是 /HOMER\

1.  我想将两者分开，所以我有一个变量，其中包含字符串**My baloney 有一个名字，它是**
2.  以及另一个具有**HOMER**且不带“/”和“\”的变量</li>

同样，“/”和“\”可以出现在一串文本之前或之后，如下所示：

```
/Ash\ Gotta catch’em all 
```

.

```
/Nike\ Just do it. 
```

.

```
Impossible is nothing. /Adidas\ 
```

.

> 微软已经面临与刚刚推出的 Windows 相关的诉讼，一名操作系统技术设计师指责微软窃取了其“瓷砖”专利。
> 
> SurfCast 昨天在缅因州的美国地方法院提起诉讼，称微软通过“制造、使用、销售和提供销售设备和软件产品”侵犯了其四项专利中的一项——第 6,724,403 号——SurfCast 的专利。这包括使用 Windows Phone 7 和 Windows Phone 8 操作系统的移动设备以及使用 /Windows 8\ 的 PC

如何提取和分离出现在由“/”和“\”包围的文本字符串中和之前或之后的文本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T15:25:13.133

如果单独的文本总是在开始/结束，你可以简单地使用[ListFirst](http://cfdocs.org/ListFirst)像这样：

```
<cfset First = ListFirst(Text,'/\') />
<cfset Last = ListLast(Text,'/\') /> 
```

并且您将在单独的变量中拥有这两个部分。要确定哪个是哪个，您需要[`Left(Text,1)`](http://cfdocs.org/Left)确定原始文本是否以开头`/`。

[否则，您可以使用rematch](http://cfdocs.org/rematch) 提取 /...\ 文本：

```
<cfset Slashes = rematch('/[^\\]+(?=\\)',Text) /> 
```

它返回一个以 - 开头的匹配数​​组，`/`您无法避免捕获 CF 正则表达式中的第一个斜杠（不支持后视），但您可以随后使用[substring](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#substring(int))将其删除：

```
<cfset Slashes[x] = Slashes[x].substring(1) /> 
```

[（如果只有一个结果，请使用`1`而不是，否则您将需要一个循环。）`x`]

要获取没有此值的文本，您可以使用简单的[替换](http://cfdocs.org/replace)，如下所示：

```
<cfset Unslashed = replace(Text,'/#Slashes[x]#\','') /> 
```

# if-statement - 根据条件包含蚂蚁修改的选择器

> ID：13161125
> 
> 赞同：1
> 
> 时间：2012-10-31T15:13:40.690
> 
> 标签：if-statement, ant, ant-contrib, fileset

我正在修改我现有的 ant 脚本以支持差异构建。为此，我在文件集中使用了修改后的选择器来仅查找修改过的文件。但问题是当我进行完整构建时，我需要绕过基于某些属性或参数的修改过滤器。如下所示。有没有办法做到这一点。

```
<project name="test" default="dt" basedir=".">
    <target name="dt1">
        <copy todir="ant_temp2">
            <fileset dir="ant_temp1">
                <if>
                    <equals arg1="${ABC}" arg2="true" />
                    <then>
                        <modified update="true" />
                    </then>
                </if>
                <exclude name="*.txt"/>
            </fileset>
        </copy>
    </target>

    <target name="dt">
        <antcall target="dt1">
            <param name="ABC" value="true" />
        </antcall>
    </target>

    <target name="dt2">
        <antcall target="dt1" />    
    </target>
</project> 
```

如果我使用 target 调用上面的 ant 脚本，那么`dt`我需要考虑in任务。如果它是使用调用的，那么我只需要在任务中考虑。`modified``exclude``fileset``dt2``exclude``fileset`

我无法使用上述脚本，因为`fileset`不支持嵌套`if`任务。这就是为什么我正在寻找替代方法来做到这一点。请提出一些方法来做到这一点。

PS：我不想创建具有相同复制任务的两个目标，一个包含`modified`和`exclude`in `fileset`，另一个目标仅包含`exclude`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:31:17.797

您可以在[目标](http://ant.apache.org/manual/targets.html)`if`上使用和`unless`属性，使它们的执行以属性为条件。您应该将条件部分移动到它自己的目标（如果尚未完成），然后将or条件添加到目标。`if``unless`

从您的示例中我并不完全清楚，但这可能意味着有`copy`两个目标，包括其中`modified`一个目标中的部分。在这种情况下，您可以使每个目标都以相同的属性为条件——一个`if`与另一个为`unless`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T05:07:13.337

我使用下面的 ant 脚本来实现我的要求。

```
<project name="test" default="dt" basedir=".">
    <patternset  id="fs1">
        <exclude name="*.txt"/>
    </patternset >

    <target name="dt1">
        <copy todir="ant_temp2">
            <fileset dir="ant_temp1">
                <patternset refid="fs1" />
            </fileset>
        </copy>
    </target>

    <target name="dt3">
        <copy todir="ant_temp2">
            <fileset dir="ant_temp1">
                <modified update="true" />
                <patternset refid="fs1" />
            </fileset>
        </copy>
    </target>
</project> 
```

我已经创建了可重用的模式集，开发人员将在该模式集中更新他们的排除项，并且我正在将该模式集重用于正常和增量构建。

# php - lighttpd，绝对默认索引和损坏的 getenv("SCRIPT_NAME")

> ID：13161129
> 
> 赞同：0
> 
> 时间：2012-10-31T15:13:47.150
> 
> 标签：php, indexing, lighttpd

对于目录索引，我将默认索引文件名设置为 lighttpd conf 文件中的绝对路径：

```
index-file.names += ( "index.html", "index.php", "/_h5ai/server/php/index.php" ) 
```

在这个`/_h5ai/server/php/index.php`脚本中，我尝试找到脚本本身的 URL

```
$path = getenv("SCRIPT_NAME"); 
```

这在 Apache httpd、nginx 和 Cherokee 中运行良好。他们将其解析为`/_h5ai/server/php/index.php`. 但是 lighttpd 将其解析为当前 URL，例如`/abc/`，加上这个绝对路径：`/abc//_h5ai/server/php/index.php`。

任何想法如何在 lighttpd 中解决这个问题？

*   在上下文中查看：这是GitHub 上[的关键行](https://github.com/lrsjng/h5ai/blob/master/src/_h5ai/server/php/inc/init.php#L10)
*   工具本身：它是[h5ai](http://larsjung.de/h5ai/)，但演示是从 Apache httpd 提供的

* * *

**更新**

已经尝试过 PHP 选项`cgi.fix_pathinfo = 1`，不起作用:(

# mysql - 如何删除和重新填充 mysql 数据库？

> ID：13161130
> 
> 赞同：3
> 
> 时间：2012-10-31T15:13:50.317
> 
> 标签：mysql, mysqldump

我有一个包含 10 个表的 mysql 数据库，需要删除并重新填充数据库以运行一些性能测试。使用 mysqldump，我可以转储数据。接下来我应该遵循哪些步骤来清除数据库并重新导入？需要针对不同大小的数据库（即具有不同行数的表）运行它来计算数据库性能，所以我需要确保可以复制这些步骤。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T15:16:34.437

您可能想查看`mysqldump`诸如`--add-drop-database`和之类的选项`--add-drop-table`。`--add-drop-database`在这种情况下，我可能会去。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:02:21.297

1) 转储

```
 drop database db_name
    create database db_name
    mysql -u user -p db_name < dump.sql 
```

我相信这可以重复任意次数。它的幂等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-14T20:21:01.103

从 MySQL 控制台：

```
mysql> DROP DATABASE [dbName]; 
mysql> CREATE DATABASE [dbName];
mysql> USE [dbName];
mysql> SOURCE [pathToSQLDump]; 
```

# ruby - 带有乘客 3.0.12 的 ruby 1.9 3 - 尝试 rmdir 时临时文件导致“没有这样的文件或目录”*.lock

> ID：13161133
> 
> 赞同：2
> 
> 时间：2012-10-31T15:14:04.780
> 
> 标签：ruby, passenger, ruby-1.9.3, temporary-files, rmdir

我认为 ruby​​ 1.9.3 无法在 /tmp 目录中创建临时文件。问题错误信息：

```
Status: 500 Internal Server Error No such file or directory   /tmp/RackRewindableInput20121031-8340-1qko694.lock  
/lib/ruby/1.9.1/tempfile.rb:346:in rmdir'  
/lib/ruby/1.9.1/tempfile.rb:346:in rmdir'  
/lib/ruby/1.9.1/tempfile.rb:338:in ensure in locking'  
/lib/ruby/1.9.1/tempfile.rb:338:in locking'  
/lib/ruby/1.9.1/tempfile.rb:144:in block in initialize'  
/lib/ruby/1.9.1/tmpdir.rb:133:in create'  
/lib/ruby/1.9.1/tempfile.rb:134:in initialize'  
/lib/ruby/gems/1.9.1/gems/passenger-3.0.12/lib/phusion_passenger/utils/rewindabl‌​e_input.rb:86:in new' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T15:45:12.953

报告相同的错误，当我尝试使用 Prince xml 生成 pdf 文件时发生：

在本地机器上运行良好，开发和生产运行 webrick，但乘客导致崩溃。

这是我的回溯（短版）：

```
 Compiled print/print_core.css  (1ms)  (pid 14275)
  Completed 500 Internal Server Error in 236ms

  Errno::ENOENT (No such file or directory - /*** PATH DELETED ***/tmp/cache/assets/10948d89a043b6251405277a36d3e0e2.cache20130517-14275-1l2wvu7.lock):
    /usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/tempfile.rb:346:in `rmdir'
    /usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/tempfile.rb:346:in `rmdir'
    /usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/tempfile.rb:338:in `ensure in locking'
    /usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/tempfile.rb:338:in `locking'
    /usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/tempfile.rb:144:in `block in initialize'
    /usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/tmpdir.rb:133:in `create'
    /usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/tempfile.rb:134:in `initialize'
    activesupport (3.2.9) lib/active_support/core_ext/file/atomic.rb:19:in `new'
    activesupport (3.2.9) lib/active_support/core_ext/file/atomic.rb:19:in `atomic_write'
    activesupport (3.2.9) lib/active_support/cache/file_store.rb:91:in `write_entry'
    activesupport (3.2.9) lib/active_support/cache/strategy/local_cache.rb:140:in `write_entry'
    activesupport (3.2.9) lib/active_support/cache.rb:364:in `block in write'
    activesupport (3.2.9) lib/active_support/cache.rb:520:in `instrument'
    activesupport (3.2.9) lib/active_support/cache.rb:362:in `write'
    sprockets (2.2.2) lib/sprockets/caching.rb:90:in `cache_set'
    sprockets (2.2.2) lib/sprockets/caching.rb:53:in `cache_set_hash'
    sprockets (2.2.2) lib/sprockets/caching.rb:24:in `cache_asset'
    sprockets (2.2.2) lib/sprockets/index.rb:92:in `build_asset'
    sprockets (2.2.2) lib/sprockets/base.rb:169:in `find_asset'
    sprockets (2.2.2) lib/sprockets/index.rb:60:in `find_asset'
    sprockets (2.2.2) lib/sprockets/bundled_asset.rb:16:in `initialize'
    sprockets (2.2.2) lib/sprockets/base.rb:252:in `new'
    sprockets (2.2.2) lib/sprockets/base.rb:252:in `build_asset'
    sprockets (2.2.2) lib/sprockets/index.rb:93:in `block in build_asset'
    sprockets (2.2.2) lib/sprockets/caching.rb:19:in `cache_asset'
    sprockets (2.2.2) lib/sprockets/index.rb:92:in `build_asset'
    sprockets (2.2.2) lib/sprockets/base.rb:169:in `find_asset'
    sprockets (2.2.2) lib/sprockets/index.rb:60:in `find_asset'
    /var/www/*** PATH DELETED ***_core/lib/princely/pdf_helper.rb:83:in `asset_file_path'
    /var/www/*** PATH DELETED ***_core/lib/princely/pdf_helper.rb:29:in `block in make_pdf'
    /var/www/*** PATH DELETED ***_core/lib/princely/pdf_helper.rb:29:in `collect'
    /var/www/*** PATH DELETED ***_core/lib/princely/pdf_helper.rb:29:in `make_pdf'
    /var/www/*** PATH DELETED ***_core/lib/custom_pdf_helper.rb:28:in `make_pdf_with_defaults'
    /var/www/*** PATH DELETED ***_core/lib/custom_pdf_helper.rb:59:in `make_tmp_pdf'
    /var/www/*** PATH DELETED ***_concept/app/controllers/pdf_builder_controller.rb:171:in `build_pdf' 
```

问题是由乘客以用户“nobody”运行时的权限问题引起的，这种情况发生在 root 拥有的配置文件时。

在您的 apache/passenger conf 中设置以下内容使其工作

```
PassengerDefaultUser www-data # should be same as apache user 
```

将 apache/rails 应用程序使用的所有文件/文件夹设置为

```
chown www-data:www-data 
```

（在我的情况下，它是*chown -R tmp/*）使它工作。

**注意：**我认为，实际上当 ruby​​ 尝试实际写入临时文件时会发生错误，但显然此时没有错误发生。在下一步中，ruby 尝试删除一个不存在的临时文件并崩溃。

希望它有所帮助！

# asp.net - Visual Studio 不能让我在用 aspx.vb 制作的 aspx 页面上定义样式属性

> ID：13161138
> 
> 赞同：1
> 
> 时间：2012-10-31T15:14:14.827
> 
> 标签：asp.net, visual-studio-2012

我用 .aspx.vb 代码库制作了一个 aspx 页面，但它不能让我通过键入来定义样式属性。我无法在样式属性中输入任何内容。

这是 Vs12 中的错误吗（我也在 VWD 中得到了它）

```
 <asp:Label runat="server" id="Label26" Text="Positions" style="width:200px;"></asp:Label> 
```

当我有 style=""; 时，我无法编辑它 如果我重新启动，那么我可以编辑，过了一段时间又是同样的问题。

* * *

我的意思是我不能在样式属性中输入任何东西，它看起来像块。当我关闭我的视觉工作室并再次打开时，我可以输入，但过了一段时间这是同样的问题。

我不认为这是我的问题。我在 Win8 PRO 上的 VWD 和 VS 12 PRO 中测试了相同的东西。

如果我可以运行此代码并且它有效，那么为什么我不能这样做。如果不建议这样做，那么为什么在 IDE 重新启动后它可以工作。

@选项。请再读一遍，我的 VWD12 和 VS12 PRO 都有这个问题。

有人可以帮我让它为我工作。它看起来像 Visual Studio 中的错误。有人可以使用 .aspx 和 aspx.vb 文件在他们的 IDE 上检查这一点。

有人现在知道如何为我完成它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:24:14.290

`style`不是`ASP.net`'s`Label`控件的属性。它仅用于兼容性，但我不建议您以这种方式使用它。最好`CssClass`在 Css 中使用和定义 all。

无论如何，如果您想从代码隐藏中添加样式：

```
Label26.Attributes.Add("style", "width: 200px;") 
```

# python - 将 check_output() 的输出与文件中的文本进行比较

> ID：13161139
> 
> 赞同：1
> 
> 时间：2012-10-31T15:14:15.587
> 
> 标签：python, windows

我正在尝试在调用的命令的输出之间进行比较`subprocess.check_output()`。因为我在 Windows 上运行它，所以我也在`\r\n`输出中得到 's（这是一件好事）。

现在我想将该命令的输出与文本文件进行比较。这失败了，因为`open()`不保留`\r`'s。这是我到目前为止得到的：

```
try:
    output = subprocess.check_output(paramList, universal_newlines=False,
                                     stderr=subprocess.STDOUT)
except subprocess.CalledProcessError as err:
    output = err.output
    errorCode = err.returncode

with open(EMCMD_INCORRECT_PARAMS, 'r') as fd_usage:
    usageLines = fd_usage.read()
    usage = True if usageLines == output else False 
```

有什么建议可以保留`\r`'s？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:41:54.910

在 python 3 中， open 需要一个`newlines`参数来控制换行翻译器的行为（[参见文档](http://docs.python.org/3.3/library/functions.html#open)）。此参数的值`''`禁用换行转换。

* * *

如果您不能使用 python 3，则打开的文件对象`open`具有`newline`包含原始换行符类型的属性，因此您可以使用它来获取原始内容：

```
with open(EMCMD_INCORRECT_PARAMS, 'r') as fd_usage:
    usageLines = fd_usage.read().replace('\n', fd_usage.newline) 
```

如果您不喜欢对`read`返回的内容进行后处理以获取文件的原始内容，那么二进制模式也可能是一种解决方案。

# pascal - 在 Pascal 文件中组织程序的标准做法是什么？

> ID：13161140
> 
> 赞同：1
> 
> 时间：2012-10-31T15:14:18.457
> 
> 标签：pascal, fpc

我想知道如何在 Pascal 中组织源文件树。从 FPC 的[语言参考指南](http://www.freepascal.org/docs-html/ref/refse90.html#x190-20000016.2)来看，程序和单元似乎必须完全包含在单个文件中（除非`${INCLUDE}`使用该指令）。

我可以想到几种组织程序的方法：

*   将所有内容都放在一个大文件中（*真的*不喜欢那样），
*   写几个大的单元文件，
*   编写许多小单元文件（可能会变成依赖项的意大利面），
*   编写几个大单元，但使用将它们拆分为文件`${INCLUDE}`

使用`${INCLUDE}`对我来说似乎有点像黑客，因为适当的模块系统应该使它变得不必要。另一方面，我担心单文件模块会变得大到笨重。

这在实际项目中通常是如何完成的？有什么我错过的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:32:21.713

绝对不需要使用单个文件，`{$INCLUDE}`除非您有特定需要，否则也不需要使用。

我有几个 Delphi 项目，它们有 100 多个独立的代码单元，根据需要在需要它们的适当`uses`子句（`interface`或`implementation`部分）中添加。您也可以在 FPC 源代码中看到这种模式：

```
unit One;

interface
  uses System;

type
  TSomeThing=class(TBaseThing)
  ...
  public
  ...
  private
  ...
  end;

implementation

uses
  Math;

.... 
```

将您的源代码分解为逻辑单元（例如，相互关联的类的单元、相互关联或依赖的类型、功能单元等）。在 FP 中有很多这样做的例子（它们遵循与 Delphi 的 VCL/RTL 相同的模式）来了解这通常是如何完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:18:19.727

如果您正确地设计您的应用程序，那么每个 UNIT 都应该有一个合理的大小并且有一个明确定义的用途。依赖关系应该在某种程度上是分层的，如果您的应用程序足够大以保证它，您总是可以将任意数量的密切相关的 UNIT 分组到一个库中。

# java - 我可以在枚举中嵌套类，并在枚举中创建数组列表吗？

> ID：13161141
> 
> 赞同：5
> 
> 时间：2012-10-31T15:14:19.397
> 
> 标签：java, class, enums

我正在尝试这样做。我有一个`enum`工作日。我一直在使用`enum`，因为工作日是不变的

```
public enum WeekDay {
  MONDAY,TUESDAY,WEDNESDAY,THURSDAY,FRIDAY;
} 
```

我有一门课，叫做`Session`. 会话只是在特定时间发生的事情，例如数学课

```
public class Session {
  // some fields
  public String title; 
  public int duration,start,end;

  /** several methods follow to get and set, and check e.t.c **/
} 
```

还有第三类，叫做`Venue`。举办会议的场地，例如数学课可以从上午 9 点到 10 点，在一个名为“数学课”的场地（示例）

```
public class Venue { // simply a place that can hold several sessions in a day
  private String name;
  private int capacity;

  /** several methods**/
} 
```

我需要做的是 - 在枚举中创建一个会话列表，即每天都有它的会话，然后我需要将枚举保存在一个场地内的结构（ArrayList 或枚举集？）中，即一个场地有来自周一至周五（最好是学校课程）。所以它会是这样的：

```
public enum WeekDay {
  MONDAY,TUESDAY,WEDNESDAY,THURSDAY,FRIDAY;

  /** the list of sessions for a given day**/
  private ArrayList <Session> list;
  private int numOfSessions; // number of sessions

  /** with some methods like **/
  addSession();
  removeSession();
  getSession();
  checkTimeOfSession();
  ...
} 
```

这样在场地中，我们可以拥有：

```
public class Venue {
  private String name;
  private int capacity;
  private ? <WeekDay> list; //structure to hold days, i don't know which one to use yet

  /** several methods like **/
  numOfSessionsOn();
  getSessionsOn();
  addSessionOn();
  removeSessionOn();
  ...
} 
```

这是我的问题：

1.  我可以将`Session`类嵌套在 中`enum`吗？
2.  可以`enum`接受`arraylists`吗？
3.  在场地内举行会议的最佳结构是什么？
4.  对此有什么更好的想法吗？

有人刚刚告诉我，我将在同一天通过所有场地，例如所有场地的星期一是星期一，每个场地都会更新其列表。所以我认为这是讨论的结束，即使没有人发表评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:08:47.940

1) 是的，你可以。

2）枚​​举可以拥有普通类所拥有的一切。唯一的区别是它具有固定数量的对象（例如，您的工作日有星期一、星期二等）。所以，你可以有类似的东西

```
public enum WeekDay {
    MONDAY, ..., FRIDAY;
    private final List<Session> sessions;
    private WeekDay {
        this.sessions = new ArrayList<Session>();
    }
} 
```

3) 它总是视情况而定。你可以使用[EnumSet](http://docs.oracle.com/javase/6/docs/api/java/util/EnumSet.html)来保存你的 WeekDay

4）您正在尝试将您的枚举用作一个类。枚举应该始终是原子的（没有状态）。我会让 WeekDay 成为一个简单的枚举，并构建类似于我在下面发布的结构的结构：

```
public enum WeekDay {
    MONDAY,TUESDAY,WEDNESDAY,THURSDAY,FRIDAY;
}
// Session have a topic and a duration
public class Session {
    private final String topic;
    private final Duration duration;
    public Session(String title, Duration duration) {
        ...
    }
    // getter/setters
}
/**
/* Venue is nothing more than an specialization of Session. So for example
/* A venue is a session of math hat starts at 3pm.
/*/
public class Venue {
    private Session session;
    private Time startTime;
    ...
}
/**
 * Class that manages the venues that happens in a WeekDay. It can control
 * that will not add two Venus that happens at same period of time.
 */
public class WeekDaySchedule {
    private WeekDay weekDay;
    private Set<Venue> venues;
    ...
}
/**
* Controls the whole week.
*/
public class WeekSchedule {
    private Collection<WeekDaySchedule> weekDaySchedules;
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:26:50.537

如果你给你的工作日枚举添加太多，你应该考虑一个超类或接口`Weekday`，并在他自己的类中实现每个工作日。

如果你真的想在你的枚举中这样做，你可以这样做：

1）实现该方法，在每个方法（和构造函数）中进行切换，例如：

```
switch (this) {
case MONDAY:
    return ...
    break;

default:
    break;
} 
```

2）使方法抽象，为每个工作日添加一个匿名实现：

```
public enum weekday {
    MONDAY {
        @Override
        public Object getSomething() {
            // TODO Auto-generated method stub
            return null;
        }
    };
    public abstract Object getSomething();
} 
```

3）为构造函数添加参数：

```
public enum weekday {
    MONDAY(new Object());
    final private Object object;
    private weekday(Object object) {
        this.object = object;
    }
} 
```

但正如我所说，尽量避免让你的枚举不仅仅是一个枚举。

# javascript - 隐藏 div 而不指定 id 或类

> ID：13161145
> 
> 赞同：1
> 
> 时间：2012-10-31T15:14:50.193
> 
> 标签：javascript, jquery

我一直在寻找这样的问题，但我找不到。

我的结构如下所示：

```
<div id="productholder@(item.ProductId)" class="productholder">  
  <img src="@Html.DisplayFor(modelItem => item.Image)" alt="" />
  <div class="productinfo">
    <h2>@Html.DisplayFor(modelItem => item.Name)</h2>
    <p>@Html.DisplayFor(modelItem=> item.Description)</p>
    <br />   
  </div>
  <div class="productprice">     
    <h2>@Html.DisplayFor(modelItem => item.price):-</h2>          
    <input type="button" value="Ta bort" class="b" data-ProductImageId='@item.ProductImageId'>                          
  </div>                                   
</div> 
```

我想要做的是，当有人单击具有`class="b"`整个 div 标签的按钮时应该隐藏`.hide()`问题是我有 10 个这些 div 标签看起来相同，所以我不能指定一个 div 标签，因为它很重要只是我单击的按钮内的 div 标签被隐藏了。

我想我需要使用 parent 或类似的东西？

我尝试了以下 jquery 脚本：

```
<script type="text/javascript">
    $(document).ready(function () {
        $(".b").click(function () {
            $("div:eq(0)").hide();
        });
    });
</script> 
```

但我发现它不会起作用，因为它会隐藏整个 div 包装器。

任何一种解决方案都值得赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:17:12.160

我认为您正在尝试隐藏整个容器..尝试使用`closest`

```
$(this).closest('.productholder').hide() 
```

或者如果您只是想隐藏父 div，那么只需使用`.parent()`

```
$(this).parent().hide() 
```

**完整代码：**

```
$(document).ready(function () {
    $(".b").click(function () {
        $(this).closest('.productholder').hide();
        // or $(this).parent().hide()
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:17:57.060

```
 $(".b").click(function () {
        $(this).parent().hide();
    }); 
```

或者

```
 $(".b").click(function () {
        $(this).parent().parent().hide();
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T15:16:28.040

你很接近，只需隐藏按钮的父级：

```
 $(".b").click(function () {
        $(this).parent('div').hide();
    }); 
```

或者，如果您想确保 div 被隐藏，即使您稍微更改层次结构：

```
 $(".b").click(function () {
        $(this).parents('div.productprice').hide();
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T15:16:30.833

基本 DOM：每个 dom 节点都有一个父元素：

```
$('.b').click(function() {
   $(this).parent('div.productprice').hide();
}); 
```

# ajax - 设计登记表上缺少模板（注册）

> ID：13161146
> 
> 赞同：1
> 
> 时间：2012-10-31T15:14:58.020
> 
> 标签：ajax, ruby-on-rails-3, devise, ruby-on-rails-3.2

我试图了解我得到了谁

```
Template is missing

Missing template devise/registrations/create, devise/create, application/create with {:locale=>[:en], :formats=>[:js, :html], :handlers=>[:erb, :builder, :coffee]}. Searched in: * "C:/project/app/views" * "C:/Ruby193/lib/ruby/gems/1.9.1/gems/devise-2.1.2/app/views" 
```

如果我尝试通过 :remote => true 发送注册信息。

据我了解，使用 remote true 将确保表单与 ajax 帖子一起发送，但是一旦我点击提交，我就会看到服务器返回缺少模板错误。

我在某处读到注册控制器已经在使用 respond_with（我在代码中看到），这意味着它应该响应 ajax。

有人可以澄清一下，还是我在拼图中遗漏了一块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T07:59:23.390

在设计注册文件夹中创建一个名为 create.js 的文件。

# ios - 在葫芦测试中在单独的网络浏览器中输入登录名

> ID：13161149
> 
> 赞同：2
> 
> 时间：2012-10-31T15:15:17.207
> 
> 标签：ios, cucumber

我们有一个正在开发的 iOS 应用程序，它在 Safari（而不是应用程序本身）中打开一个浏览器以获取登录信息（用户名、密码、提交按钮），然后返回到应用程序。到目前为止，我的 Calabash 测试一直不愿在这些字段中输入任何数据。我可能需要在 Calabash 之外做这件事，可能和 Watir 一起做吗？或者是其他东西？

先感谢您。克里斯·彼得森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:25:31.683

我认为这是不可能的，否则您可以打开 webview 并使用 NSURLRequest 对象传递数据：

```
[self.webView loadRequest:request]; 
```

# c - 如何从用户空间使用 asm/system.h？

> ID：13161150
> 
> 赞同：0
> 
> 时间：2012-10-31T15:15:17.020
> 
> 标签：c, network-programming, linux-kernel

对于我的 Linux 网络应用程序，我指的是[lincap.c](http://www.scaramanga.co.uk/code-fu/lincap.c)以了解如何使用 PACKET_MMAP 方法通过环形缓冲区接收以太网数据包。

lincap.c 使用`mb()`asm/system.h 中定义的内存屏障宏。但是，该头文件中的代码包含在`#ifdef __KERNEL__`. 我想这意味着它是一个内核头文件。如何`mb()`从用户空间应用程序（我相信 lincap.c 是）中使用？

BR

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T01:06:15.277

也许您可以使用[`__sync_synchronize`](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/_005f_005fsync-Builtins.html#index-g_t_005f_005fsync_005fsynchronize-2810)内置的 gcc 提供。我不确定它是否生成完全相同的代码，但它应该在效果上足够相似。因此，只需将其定义`mb`为别名即可。

# javascript - 用javascript文件中的图像替换单词

> ID：13161151
> 
> 赞同：0
> 
> 时间：2012-10-31T15:15:19.710
> 
> 标签：javascript

我需要修改一个我目前用来显示图像的 javascript 文件（它是一个标准的灯箱 JS）。这是我需要修改的脚本部分：

```
settings : function() {
    var t = this, s = shutterSettings;

    t.imageCount = s.imageCount || 0;
    t.msgLoading = s.msgLoading || 'L O A D I N G';
    t.msgClose = s.msgClose || 'Click to Close';
}, 
```

基本上我需要用加载条 gif 替换脚本中的“加载”一词。有人可以指出我如何做到这一点的正确方向（链接到教程、手册等）吗？我试图用`<img>`or`<div>`标记替换这个词，但没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:19:09.977

[http://lokeshdhakar.com/projects/lightbox/](http://lokeshdhakar.com/projects/lightbox/)看看第三点是否有帮助......

> 如果您想向用户显示“正在加载”图形，例如上面示例中的动画进度条，请在 lightbox.js 文件的顶部指定其位置：
> 
> `var loadingImage = 'loading.gif';`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:24:45.373

您需要在灯箱插件中进行此替换**，**而不是在其设置中。

`msgLoading`很可能被认为是作为字符串给出的，并且接收到的字符串被设置为 a或元素`div`的文本。`p``span`

如果你发布一个指向 lightbox 插件的 js 文件的链接或者告诉我们插件的名称或者你下载它的站点，也许我可以给你一个更准确的答案。事实上，它是一个标准的灯箱 JS 并不完全有帮助

[编辑]因此，您似乎正在[为 NextGEN Gallery 使用 Shutter Reloaded](http://www.laptoptips.ca/javascripts/shutter-reloaded/) 如果您查看插件的 js 文件（[此处](http://redflexmedia.com/portfolio/wp-content/plugins/nextgen-gallery/shutter/shutter-reloaded.js?ver=1.3.3)为您的情况），您将看到`innerHTML`已设置，因此使用 an`img`应该可以。

```
loading : function() {
        var t = this, S, WB, W;
        if ( (W = t.I('shWrap')) && W.style.visibility == 'visible' ) return;
        if ( ! (S = t.I('shShutter')) ) return;
        if ( t.I('shWaitBar') ) return;
        WB = document.createElement('div');
        WB.setAttribute('id','shWaitBar');
        WB.style.top = t.Top + 'px';
        WB.style.marginTop =(t.pgHeight/2) + 'px'
        WB.innerHTML = t.msgLoading;
        S.appendChild(WB);
    }, 
```

尝试使用以下设置：

```
var shutterSettings = {"msgLoading":"<img src=\"http://redflexmedia.com/loading.gif\">","msgClose":"Click to Close","imageCount":"1"}; 
```

[编辑]上面的代码必须放在 HTML 文件中的`head`部分，而**不是**插件中。

这意味着您必须更换这部分

```
<script type='text/javascript'>
/* <![CDATA[ */
var shutterSettings = {"msgLoading":"<img src=\"http://redflexmedia.com/loading.gif\">","msgClose":"Click to Close","imageCount":"1"};
/* ]]> */
</script> 
```

和

```
<script type='text/javascript'>
/* <![CDATA[ */
var shutterSettings = {"msgLoading":"L O A D I N G","msgClose":"Click to Close","imageCount":"1"};
/* ]]> */
</script> 
```

# c++ - 与 USB 设备通信

> ID：13161152
> 
> 赞同：0
> 
> 时间：2012-10-31T15:15:22.790
> 
> 标签：c++, usb

我正在编写一个应该使用 USB 设备的软件。我的设备源代码有一些问题（它庞大而复杂，我只需要访问 3-4 个特定功能。所以我想如果我知道命令写入 USB 的确切格式，我可以尝试阅读/直接从/向 USB 设备写入。

我该怎么做？

写信给司机？我以某种方式直接写入USB端口吗？任何人都可以请我参考一些简单的文件吗？

该设备被标识为 HID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:03:34.673

你可以试试 libusb：

[http://www.libusb.org/](http://www.libusb.org/)

[http://sourceforge.net/apps/trac/libusb-win32/wiki](http://sourceforge.net/apps/trac/libusb-win32/wiki)

从用户空间使用 USB

# c++ - c++11 进程间原子和互斥锁

> ID：13161153
> 
> 赞同：20
> 
> 时间：2012-10-31T15:15:26.977
> 
> 标签：c++, c++11

我有一个 Linux 程序，它产生多个进程（fork）并通过 POSIX 共享内存进行通信。我想让每个进程分配一个 id (0-255)。我的意图是在共享内存区域中放置一个位向量（初始化为零）并原子地比较和交换位以分配一个 id。

有没有一种对 c++11 友好的方法来做到这一点？我可以创建一个原子位集吗？我可以跨进程使用互斥锁吗？我如何确保构造函数在所有进程中被调用一次且仅调用一次？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-31T17:19:45.817

C++11 线程原语（互斥体、原子等）是*线程*原语。C++ 标准不引用进程，并且这些工具中的大多数不跨进程互操作。

标准中唯一提到的进程是在一个非规范的符号中表示[无锁原子对 IPC 来说是可以的](https://timsong-cpp.github.io/cppwp/n4659/atomics.lockfree#4)：

> 无锁的操作也应该是无地址的。也就是说，通过两个不同地址对同一内存位置的原子操作将以原子方式进行通信。实现不应依赖于任何每个进程的状态。此限制允许通过多次映射到进程的内存和两个进程之间共享的内存进行通信。

在这种非规范符号之外，线程原语并非旨在成为实现进程间通信的一种手段。当放置在共享内存中时（除了上面提到的无锁原子）这些对象的行为是未定义的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-11T14:35:54.480

您可以在共享内存块内使用互斥锁，但必须将互斥锁声明为 SHARED，因此在共享内存内使用互斥锁并不少见，您可以创建自己的类，非常简单：

```
class Mutex {
private:
    void *_handle;
public:
    Mutex(void *shmMemMutex,  bool recursive =false, );
    virtual ~Mutex();

    void lock();
    void unlock();
    bool tryLock();
};

Mutex::Mutex(void *shmMemMutex, bool recursive)
{
    _handle = shmMemMutex;
    pthread_mutexattr_t attr;
    ::pthread_mutexattr_init(&attr);
    ::pthread_mutexattr_setpshared(&attr, PTHREAD_PROCESS_SHARED);
    ::pthread_mutexattr_settype(&attr, recursive ? PTHREAD_MUTEX_RECURSIVE_NP : PTHREAD_MUTEX_FAST_NP);

    if (::pthread_mutex_init((pthread_mutex_t*)_handle, &attr) == -1) {
        ::free(_handle);
        throw ThreadException("Unable to create mutex");
    }
}
Mutex::~Mutex()
{
    ::pthread_mutex_destroy((pthread_mutex_t*)_handle);
}
void Mutex::lock()
{
    if (::pthread_mutex_lock((pthread_mutex_t*)_handle) != 0) {
        throw ThreadException("Unable to lock mutex");
    }
}
void Mutex::unlock()
{
    if (::pthread_mutex_unlock((pthread_mutex_t*)_handle) != 0) {
        throw ThreadException("Unable to unlock mutex");
    }
}
bool Mutex::tryLock()
{
    int tryResult = ::pthread_mutex_trylock((pthread_mutex_t*)_handle);
    if (tryResult != 0) {
        if (EBUSY == tryResult) return false;
        throw ThreadException("Unable to lock mutex");
    }
    return true;
} 
```

# dart - 找不到引用的源：包

> ID：13161155
> 
> 赞同：4
> 
> 时间：2012-10-31T15:15:31.647
> 
> 标签：dart, dart-pub

我有这个 pubspec.yaml

```
 name: Dart Pages
    description: The Dart platform.
    dependencies:
      web_components: any
      mongo_dart: any 
```

然后我运行 Tools > Pub Install，操作成功完成。

当我运行应用程序时，我收到以下错误：

```
 dart --enable-checked-mode web\page.dart
    Unable to open file: C:/Users/Samer/Documents/GitHub/dart/web/packages/mongo_dart/mongo_dart.dart'file:///C:/Users/Samer/Documents/GitHub/dart/web/page.dart': Error: line 1 pos 1: library handler failed
    #import("package:mongo_dart/mongo_dart.dart"); 
```

我正在使用 Windows 7 64 位和最新的 Dart 编辑器版本 0.2.1_r14167

问题似乎不仅在于 mongo_dart，还在于所有其他库，编辑器正在 /dart/web/packages 中寻找错误的包路径，而我在文件夹 /dart/packages 中看到了一个。

感谢您的帮助和时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:18:15.253

`pub install`自创建“web”目录以来，您是否运行过？如果没有，请尝试。你需要在包含 Dart 入口点的目录中有一个“packages”目录，以便正确解析“package:”导入。

Pub 将为您创建这些目录，但它需要知道这样做。如果你在你的包中添加一个新目录，你会想要`pub install`再次运行，所以它会向它添加一个“包”目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-17T04:11:07.703

我对 TeamCity 也有类似的问题。在我的开发机器上，我可以一遍又一遍地做`pub get`，`pub build`而且效果很好，但这仅在我第一次使用 TeamCity 构建解决方案时才有效。

经过一番折腾，我终于发现，主要是通过反复试验，问题是由 TeamCity 在构建解决方案之前清理文件夹引起的。

我找不到任何关于如何`pub`工作的合理文档，我不知道为什么这只是第一次工作，但我的试验和错误发现`pub cache repair`在之前的每个构建上执行`pub get`并最终`pub build`重复工作，我的 TeamCity 项目现在构建每次都成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T04:03:52.597

我在这里有类似的东西，带有 js-interop 包。我将'：'更改为'/'并且它起作用了。

原始声明：

```
 import("package:mongo_dart/mongo_dart.dart"); 
```

修改声明：

```
 #import("package/mongo_dart/mongo_dart.dart"); 
```

你也可以试试这个（它对我有用）：

```
 import 'packages/mongo_dart/mongo_dart.dart'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T18:06:14.650

您可能需要在导入 mongo_dart.dart 的位置添加一个额外的库，然后将该库导入您的主库中。我知道这是一个奇怪的解决方案，但当我试图让 Google 地图在 Dart 中运行时，它对我有用。

更多信息：[https ://groups.google.com/a/dartlang.org/d/msg/misc/ORXJmmmH3fA/WIKyBik1e7sJ](https://groups.google.com/a/dartlang.org/d/msg/misc/ORXJmmmH3fA/WIKyBik1e7sJ)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T09:10:54.477

我在尝试导入 unittest 时遇到了类似的问题。我正在使用 dart 编辑器插件在 Windows 7 64 位中运行 Eclipse 4.2。

删除 c:\USERS\< *user* >\AppData\Roaming\ 下的 'pub' 文件夹对我有用。

这要归功于 darlang google 组的 Samer Ali，请参见[此处](https://groups.google.com/a/dartlang.org/d/msg/misc/ORXJmmmH3fA/oyg5tVVxGigJ)。

# iphone - 来自 xml 的 NSDictionary 元素

> ID：13161161
> 
> 赞同：1
> 
> 时间：2012-10-31T15:15:59.587
> 
> 标签：iphone, objective-c, nsdictionary

我有一种情况，我从服务器获取数据作为 xml，我使用[https://github.com/Insert-Witty-Name将该数据转换为 NSDictionary](https://github.com/Insert-Witty-Name)

我的 xml 就像

```
<Game>
      <userid></userid>
      <name></name>
      <friendId></friendId>
      <friendName></friendName>
</Game> 
```

值 Game 和所有其他项目都可以更改，所以首先我需要找出第一个游戏元素的名称 =>

我通过上面的库转换了这个，现在我得到了

```
 xmlString = [NSString stringWithFormat:@"<Game><userid>12</userid><userName>ben</userName><friendId>41</friendId><friendName>Ben1</friendName></Game>"];

NSDictionary *dict = [XMLReader dictionaryForXMLString:xmlString error:nil];

NSString *string;
string = [dict objectForKey:@"Game"];
NSLog(@"name is :%@",string); 
```

输出是

```
{
friendId = 41;
friendName = Ben1;
userName = ben;
userid = 12;
} 
```

我需要找出 xml 的根元素名称以及如何使用 objectForKey 在 NSDictionary 中访问这些值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:37:29.857

```
string = [[dict objectForKey:@"Game"] objectForKey:@"userName"]; 
```

使用 Enumerator 迭代并根据键查找值或
`[[dict objectForKey:@"Game"] allKeys]`获取所有键

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:26:03.983

所以你希望结果是`"ben"`，对吗？嗯，`[dict objectForKey:@"Game"];`不是一个，`NSString`而是一个`NSDictionary`。您不会收到任何错误，因为 LLVM 无法在编译时检查它，因此它会愉快地构建。到字符串的转换发生在解析成格式字符串的过程`"%@"`中。相反，你想要的是：

```
string = [[dict objectForKey:@"Game"] objectForKey:@"name"]; 
```

**编辑：从评论中可以清楚地看出不同的问题......**

还是您更需要`"Game"`？在这种情况下

```
NSString* rootName = [[dict allKeys] firstObject]; 
```

总是会给你正确的答案，因为总是只有一个根。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T15:28:48.127

如果您的 xml 可以更改

这：

```
<Game>
      <userid></userid>
      <name></name>
      <friendId></friendId>
      <friendName></friendName>
</Game> 
```

变成这样：

```
<Status>
      <userid></userid>
      <name></name>
      <friendId></friendId>
      <friendName></friendName>
</Status> 
```

那么您必须使用方法 allKeys 动态查找字典键

像这样：

```
[dict allKeys] 
```

在我的第一个示例中，结果将是：`["Game"]`而在第二个示例中：`["Status"]`

如果您需要内部元素的键，请执行以下操作：

```
[[dict objectForKey:@"Game"] allKeys] 
```

这将返回：`["userid","name","friendId", "friendName"]`

# php - 使用 CakePHP 2 再做一个外键跳来获取数据

> ID：13161163
> 
> 赞同：1
> 
> 时间：2012-10-31T15:16:03.970
> 
> 标签：php, cakephp, model, controller, model-associations

我已经正确配置了所有相应的模型关联。

这是我的数据库 SQL 脚本，因此您可以轻松查看外键关联：

```
create table proveedors 
(
    id int primary key AUTO_INCREMENT,
    nombre varchar(256)
);

create table libros 
(
    id int primary key AUTO_INCREMENT,
    proveedor_id int,
    FOREIGN KEY (proveedor_id) REFERENCES proveedors(id),
    titulo varchar(1024),
    autor varchar(512)
);

create table materias 
(
    id int primary key AUTO_INCREMENT,
    nombre varchar(1024),
    version varchar(8)
);

create table libros_materias
(
    id int primary key AUTO_INCREMENT,
    materia_id int,
    FOREIGN KEY (materia_id) REFERENCES materias(id),
    libro_id int,
    FOREIGN KEY (libro_id) REFERENCES libros(id)
); 
```

这是我正在运行的查询：

```
# Buscar todos los libros asociados a esta materia.
$libros = $this->LibrosMateria->findAllByMateriaId($id);
$this->set('libros', $libros); 
```

现在它正在按预期正确获取所有数据；我只需要让查询多跳一点，然后让我得到`Proveedor's name`.

当前查询返回：

```
(int) 0 => array(
    'LibrosMateria' => array(
        'id' => '2',
        'materia_id' => '1',
        'libro_id' => '1'
    ),
    'Materia' => array(
        'id' => '1',
        'tipo_materia_id' => '1',
        'sigla' => 'MKT-111',
        'nombre' => 'Direccion de Marketing',
        'version' => '3-2012'
    ),
    'Libro' => array(
        'id' => '1',
        'proveedor_id' => '1',
        'titulo' => 'PHP 2.0',
        'autor' => 'Arhari',
        'edicion' => '3ra Edicion',
        'isbn' => '0912309',
        'cantidad_de_paginas' => '912',
        'fecha_de_publicacion' => '2012-10-08',
        'portada' => null
    )
), 
```

我可以看到它正在制作 1 个单外键跃点，但不会更进一步。CakePHP 有什么方法可以做到这一点吗？有什么建议么？记住：**我的模型关联设置正确。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:24:12.860

尝试从以下位置更改您的查询：

```
$libros = $this->LibrosMateria->findAllByMateriaId($id); 
```

到：

```
$libros = $this->LibrosMateria->findAllByMateriaId($id, array(), array(), null, null, 2); 
```

在这里，您将 $recursive 字段设置为 2，它应该检索您想要的信息。

有关更多信息，请参阅 [http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#findallby](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#findallby)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:01:16.327

使用[CakePHP 的 Containable 行为](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)。

在您的 LibrosMateria 模型中（或 AppModel 将它们设置为所有模型的默认值）：

```
public $recursive = -1; 
public $actsAs = array('Contaniable'); 
```

然后，将其用于您的查找：

```
$this->LibrosMateria->find('all', array(
    'contain' => array(
        'Materia',
        'Libro' => array(
            'Proveedor'
        )
    )
)); 
```

这使您可以准确地指定您想要的信息，包括每个表的哪些字段、限制、条件...等。

尽管目前使用 可能会得到类似的结果`$recursive=2`，但这是一个坏主意，并且随着应用程序的增长会导致很多问题。它盲目地检索数据，而不关心您实际需要或想要的数据。相信我这个。现在几乎可以接受递归甚至不应该存在，并且在未来的 CakePHP 版本中，我相信他们会完全消除这个想法。**请改用可包含的。**

# asp.net - 并发请求 - 长时间运行的进程状态进度 - chrome问题

> ID：13161164
> 
> 赞同：0
> 
> 时间：2012-10-31T15:16:08.603
> 
> 标签：asp.net

我试图获取长时间运行的状态进度。它在 FF:)、Opera 和 IE:? 中运行良好，但在 Chrome 中？！它失败了：它永远不会进入通用处理程序中的 ProcessRequest。拜托，你能建议我做错了什么吗？

默认.aspx：

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
CodeBehind="Default.aspx.cs" Inherits="AspNetProgressBar._Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js" type="text/javascript"></script>
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:Button runat="server" Text="Run" OnClick="button_Click" OnClientClick="button_start()"  />
...

<script type="text/javascript">
    function button_start() {
        setInterval(function () {
            $.ajax({
                url: 'StatusHandler.ashx',
                data: { statusKeyId: '<%= ViewState["key"] %>' },
                type: 'post',
                dataType: 'json',
                success: function (json) {
                    ... process response
                },
                error: function () {

                }
            });
        }, 1000);
    }
</script> 
```

...

默认.aspx.cs

```
....
protected void button_Click(object sender, EventArgs e)
    {
        System.Threading.Thread.Sleep(2000);
        for (int i = 0; i < 10; ++i)
        {
            System.Threading.Thread.Sleep(500);
            // TODO: update progress status
        }
        // lblStatus.Text = "Done";
    } 
```

状态处理程序.ashx.cs：

```
public class StatusHandler : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {
        context.Response.ContentType = "application/json";

        string statusKeyId = context.Request.Params["statusKeyId"];
        if (statusKeyId != null)
        {
                System.Web.Script.Serialization.JavaScriptSerializer s = new System.Web.Script.Serialization.JavaScriptSerializer(GetStatusInfo(statusKeyId ));
                string output = s.Serialize(info);
                context.Response.Write(output);
                return;
        }
        context.Response.Write("{test: \"empty\"}");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:41:36.067

问题不是：为什么这在 Chrome 中不起作用，但为什么在 IE 和 Firefox 中起作用。

当点击按钮时，浏览器会向服务器发送一个正常的http请求来替换整个页面。我猜想在那一刻是否在页面上执行 javascript 的行为是未定义的，或者至少在不同浏览器之间有所不同，正如您所注意到的那样。

更好的方法是使用异步请求 (Ajax) 调用您的服务器，以便页面在浏览器中保持活动状态。然后，当您的 StatusHandler 回答时，您的长时间运行的进程已准备好，您可以将浏览器重定向到一个 url，它可以从服务器获取结果页面。

# java - 如何在 Java 中按 Enter 键进入文件

> ID：13161171
> 
> 赞同：1
> 
> 时间：2012-10-31T15:16:17.493
> 
> 标签：java, file, newline, enter

> **可能重复：**
> [Java：如何获得独立于平台的换行符？](https://stackoverflow.com/questions/207947/java-how-do-i-get-a-platform-independent-new-line-character)

我想用 class 将**enter**写入文件`RandomFileAccess`，但我无法正确执行。

我应该怎么办 ？

像这样的代码：

```
char enter = '\n' ;
outputfile.writeChar(enter); 
```

* * *

我正在使用 Windows....感谢您的帮助，但它没有用 :(

```
public class MainClass {
    public static void main(String[] args) {
        String BeforEnter = "It's Before Enter...";
        String Enter = System.getProperty("line.separator");
        String AfterEnter = "It must be on next Line...";

        File MyFile = new File("test.txt");
        try {
            RandomAccessFile TextFile = new RandomAccessFile(MyFile, "rw");
            TextFile.writeChars(BeforEnter);
            TextFile.writeChars(Enter);
            TextFile.writeChars(AfterEnter);
            TextFile.close(); 
```

我期望这种文件样式：

进入前...

它必须在下一行...

但它变成了这样: :(

I's B before Enter。. . 我必须在下一行。. .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T15:18:36.747

您使用什么操作系统？更好地使用这个：

```
String enter = System.getProperty("line.separator"); 
```

使用上面的代码片段，您不必担心换行符的确切细节，因为它们会根据当前使用的操作系统而变化。

例如，在 Windows 中是`\r\n`，在当前的 Mac 和 Linux 中是`\n`，而在较旧的 Mac 中是`\r`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T15:17:19.883

改用`System.getProperty("line.separator");`换行符。

根据[javadoc](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)

> 操作系统用于分隔文本文件中的行的序列

# node.js - 在请求未完成时开始查看网页

> ID：13161182
> 
> 赞同：2
> 
> 时间：2012-10-31T15:16:47.433
> 
> 标签：node.js, express

我正在寻找一种解决方案，以便在请求未完成时开始查看网页。例如，使用 Express 和 EJS，如果我查询多个数据源（我没有掌握），我必须等待在 "res.render" 之前检索我需要使用的所有数据。

是否可以发送页面顶部然后逐个阻止？

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:26:20.113

您不能简单地渲染一半页面并等待数据通过服务器端编程完成加载页面。

您尝试做的最好的解决方案是 AJAX 调用。从客户端检索数据允许用户查看所有可用的静态内容，而无需等待获取数据驱动的内容。

这不是解决您的问题的最佳解决方案，即优化您对数据源的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:39:29.807

1.  制作一个基本模板并使用它提供 res.render()。这将是用户看到的第一件事。

2.  您必须编写客户端 .js 代码（使用“基本”页面调用）。这一个，on`document.ready`将发出 ajax 调用来获取其他页面。为此，您需要启用其他路由，每个路由都有各自的内容。

3.  ajax 调用的回调必须能够将检索到的内容附加到您的“基本页面”中。

4.  应该这样做。

（显然，有几种方法可以让这变得更复杂和更专业，但我认为@LeGilles 正在寻找一个“kickstart”）。

问候，

H。-

# java - 从 html 代码中提取图像 url 的正则表达式

> ID：13161185
> 
> 赞同：3
> 
> 时间：2012-10-31T15:16:58.103
> 
> 标签：java, regex, html-parsing, imageurl

我想从 html 代码中提取图像的 Url，例如下面的 html 代码：

```
<div class="imageContainer">
   <img src="http://ecx.images-amazon.com/images/I/41%2B7N48F7JL._SL135_.jpg"
      alt="" width="135" height="94"
      style="margin-top: 21px; margin-bottom:20px;" /></div> 
```

我从网上得到了一个代码

```
String regexImage = "(?<=<img (*)src=\")[^\"]*";
Pattern pImage = Pattern.compile(regexImage);
Matcher mImage = pImage.matcher(elementString);
while (mImage.find()) {
   String imagePath = mImage.group();} 
```

它正在工作并且具有重新（正则表达式）

```
"(?<=<img src=\")[^\"]*" 
```

但现在我想从 html 代码中提取图像 url，如下所示：

```
<img onerror="img_onerror(this);" data-logit="true" data-pid="MOBDDDBRHVWQZHYY"
   data-imagesize="thumb"
   data-error-url="http://img1a.flixcart.com/mob/thumb/mobile.jpg"
   src="http://img8a.flixcart.com/image/mobile/h/y/y/samsung-galaxy-s-duos-s7562-125x125-imadddczzr4qhqnc.jpeg"
   alt="Samsung Galaxy S Duos S7562: Mobile"
   title="Samsung Galaxy S Duos S7562: Mobile"></img></a>
<div class="bp-offer-image image-offer"></div> 
```

img 和 src= 之间有代码的地方

我正在尝试正则表达式，`"(?<=<img (*)src=\")[^\"]*"` 但它不起作用。所以请给我正则表达式，以便我可以 `http://ecx.images-amazon.com/images/I/61xqOQ3Sj8L._SL135_.jpg`从上面的 html 代码中提取图像 url 即。

而且，首先我使用 Jsoup 解析 html 以提取包含 img 的标签：

```
doc = Jsoup.connect(urlFromBrowse).get();
            Elements elements = doc.getElementsByTag("img");

            for (Element element : elements) {
                String elementString = element.toString(); 
```

并将这个 elementString 传递给 matcher() 肉类。从我得到的标签（元素）中，我使用正则表达式来解析图像 url、名称等内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T15:42:26.563

这篇文章是对问题的回答，而不是指导方针。

问题不是“RegExp vs DOM”，而是“从 html 代码中提取图像 url 的正则表达式”。

这里是：

```
String htmlFragment =
   "<img onerror=\"img_onerror(this);\" data-logit=\"true\" data-pid=\"MOBDDDBRHVWQZHYY\"\n" + 
   "   data-imagesize=\"thumb\"\n" + 
   "   data-error-url=\"http://img1a.flixcart.com/mob/thumb/mobile.jpg\"\n" + 
   "   src=\"http://img8a.flixcart.com/image/mobile/h/y/y/samsung-galaxy-s-duos-s7562-125x125-imadddczzr4qhqnc.jpeg\"\n" + 
   "   alt=\"Samsung Galaxy S Duos S7562: Mobile\"\n" + 
   "   title=\"Samsung Galaxy S Duos S7562: Mobile\"></img></a>";
Pattern pattern =
   Pattern.compile( "(?m)(?s)<img\\s+(.*)src\\s*=\\s*\"([^\"]+)\"(.*)" );
Matcher matcher = pattern.matcher( htmlFragment );
if( matcher.matches()) {
   System.err.println(
      "OK:\n" +
      "1: '" + matcher.group(1) + "'\n" +
      "2: '" + matcher.group(2) + "'\n" +
      "3: '" + matcher.group(3) + "'\n" );
} 
```

和输出：

```
OK:
1: 'onerror="img_onerror(this);" data-logit="true" data-pid="MOBDDDBRHVWQZHYY"
   data-imagesize="thumb"
   data-error-url="http://img1a.flixcart.com/mob/thumb/mobile.jpg"
   '
2: 'http://img8a.flixcart.com/image/mobile/h/y/y/samsung-galaxy-s-duos-s7562-125x125-imadddczzr4qhqnc.jpeg'
3: '
   alt="Samsung Galaxy S Duos S7562: Mobile"
   title="Samsung Galaxy S Duos S7562: Mobile"></img></a>' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T15:31:11.943

根据[文档](http://jsoup.org/cookbook/extracting-data/attributes-text-html)， JSoup（一个 DOM 解析器）可以在获取标签元素后轻松获取属性。就像是

```
doc.getElementsByTag("img").attr("src") 
```

应该工作。

作为记录，我是一个 Perl 人，一个经常过快地使用正则表达式的社区。我一直试图让人们了解使用 DOM 解析器而不是脆弱的正则表达式的乐趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T15:30:03.983

我希望您能够`<img>`通过 JSoup API 获取元素的各种属性。Node.attributes [()](http://jsoup.org/apidocs/org/jsoup/nodes/Node.html#attributes%28%29)给你你想要的吗？

# c# - WPF自定义网格不显示内容

> ID：13161186
> 
> 赞同：0
> 
> 时间：2012-10-31T15:17:00.383
> 
> 标签：c#, wpf, grid

我有一个控件，它是从 Grid 继承的

```
<Grid x:Class="User_Controls.CustomGrid"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         mc:Ignorable="d" x:Name="LayoutRoot" 
         >

<TextBlock>Test</TextBlock>
</Grid> 
```

目前，后面的代码是空白的

```
 public partial class CustomGrid : Grid
{
public CustomGrid(){}    
} 
```

我在页面上的另一个网格中有一个 CustomGrid 实例。

```
<Grid Grid.Column="4" Grid.Row="2" Style="{StaticResource MenuItemStyle}">
            <src:LiveTile  x:Name="liveTile1" />    
        </Grid> 
```

当我运行项目时，文本字段中的值不会显示。我尝试将控件从父网格中取出，弄乱字体和垂直/水平对齐方式。

知道为什么我看不到价值吗？

# extjs - 使 EXT 网格可编辑

> ID：13161187
> 
> 赞同：0
> 
> 时间：2012-10-31T15:17:01.773
> 
> 标签：extjs

我在 EXTJS 3.0 版中有以下功能的要求

是否有任何选项可以编辑可编辑的网格。每条记录都是可编辑的。就像我需要网格作为 excel 文档。我需要显示批量添加和编辑网格

，我需要修改上述网格的记录来保存记录，并且可选的是在任何列上进行验证

我想添加按钮作为添加页面，它将在网格的末尾添加 20 个空的可编辑行。分页应该可以正常工作。

如果有人知道请帮助我...关键的优先工作

提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:23:01.623

据我所知，虽然 Sencha 不再支持 3.0，但库中有一个单元格编辑器，您可以使用它来编辑单个单元格。

添加行的按钮您将不得不自己编写代码，但这应该不难。

# html - 我应该把我想在模块中使用的 css 放在哪里？

> ID：13161197
> 
> 赞同：2
> 
> 时间：2012-10-31T15:17:26.743
> 
> 标签：html, css, module, dotnetnuke

我建立了我的第一个 DotNetNuke 站点，现在我有一个页面，我必须在其中放置一个 HTML 模块。

我需要格式化其中的文本，但被告知要创建 CSS 类。我的问题是，我应该将 .css 文件放在我的 DNN 站点的什么位置，如何访问它，我是否必须使用已经存在的 .css 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:59:53.513

如果您想要的样式是针对皮肤的，则必须将其命名为 style.css，但如果您正在谈论模块，则将其命名为 module.css

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:18:47.403

对于不与任何特定模块关联的样式，您可能希望将它们放在站点样式表中，该样式表可以通过站点设置模块进行编辑。

如果您希望这些样式应用于同一 DNN 安装中的多个门户/站点，您可能更愿意更改皮肤`skin.css`文件。但是，如果您选择在此处进行更改，您将无法在不覆盖更改的情况下将更新应用到皮肤（如果它是由外部开发人员开发的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T15:18:57.730

链接到“href="style.css"' 的 css 文件将是一个名为 style.css 的文件，位于与 .html 页面相同的文件夹结构中。

# c - ASCII TABLE - 负值

> ID：13161199
> 
> 赞同：4
> 
> 时间：2012-10-31T15:17:30.647
> 
> 标签：c, char, ascii

> **可能重复：**
> [负 ASCII 值](https://stackoverflow.com/questions/4690415/negative-ascii-value)

```
int main() {
    char b = 8-'3';
    printf("%c\n",b);

    return 0;
} 
```

我运行这个程序，我得到一个看起来像问号（？）的标志。

我对你的问题是为什么它打印那个而不打印任何内容，因为据我所知，ASCII 表中 b 的值是负 43，这是不存在的。

顺便说一句，当我编译这段代码时：

```
int main() {
    char b = -16;
    printf("%c\n",b);

    return 0; 
} 
```

我什么都得不到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T15:55:55.693

[这是C 2011 标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)中指定的行为

> ### 7.21.6.1 fprintf 函数
> 
> ...
> 8 转换说明符及其含义是：
> ...
> `c`如果不存在`l`长度修饰符，则将`int`参数转换为 `unsigned char`，并写入结果字符。
> 
> 如果存在`l`长度修饰符，则将`wint_t`参数转换为好像通过`ls`没有精度的转换规范和指向二元素数组的初始元素的参数，`wchar_t`第一个元素包含转换规范的`wint_t`参数和第二个元素`lc`一个空宽字符。

-43 被转换为无符号值 (213)，因此它正在打印扩展的 ASCII 字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T15:34:52.807

That's because `-16` is the same as hex `0xf0` which is the same as `240`. In my character set (ISO 8859-1) that character is `LATIN SMALL LETTER ETH` or `'ð'`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T16:36:39.397

没有“负 ASCII”值这样的东西。ASCII 定义从 0 到 127 的值的字符和控制代码。

大多数系统不使用纯 ASCII。他们使用其他一些字符集。对于 0 到 127 的值，几乎所有其他字符集都与 ASCII 匹配，但它们为更高的值定义了附加字符和控制代码。

在某些 C 和 C++ 实现`char`中，对应于一个带符号的 char，它的取值范围为 -127 到 +127（大多数情况下为 -128 到 +127）。在其他实现`char`中是从 0 到 255 的无符号值。

如果您有一个`char`带负值的签名并尝试打印它，库会将其视为一个`unsigned char`（例如，-1 变为 255），并且它将打印平台字符集中与该值相对应的任何字符。如果没有分配给特定值的字符，库可能会选择显示一些默认占位符字符，如问号或框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T15:42:13.943

打印时字符在内部被解释为“无符号”。因此，它将是 255 - 16 = 第 239 个字符。顺序为 239 的 ascii 值打印在屏幕控制台上。同样 -43 是订单 212。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T15:42:22.080

格式将`%c`始终打印一个字符，因此大概它只需要您的位`char`并将其视为无符号值，最终成为设置最高位的东西。您的终端可能会将这些字符显示为空白或带问号的占位符，但我的终端显示 Õ 和 ð...</p>

如果您想在值为负数时不打印任何内容，则需要检查它（并使用更大的数据类型，例如`int`以便您可以将非字符值与所有可能的字符一起放置，或者`signed char`如果您希望确保你得到一个有符号的类型；一个普通的`char`可能是有符号的或无符号的）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T15:43:59.933

您可以参考[ASCII 表](http://www.asciitable.com/)。并且所有数字都应映射到 (256+(value))%256 （这是处理[溢出](http://www.cplusplus.com/articles/DE18T05o/)的方式）。您应该能够找到为哪个数字打印哪个符号。

# wordpress - 如何在WordPress的“wp_nav_menu”子菜单中添加类和元素到-tag？

> ID：13161201
> 
> 赞同：7
> 
> 时间：2012-10-31T15:17:41.927
> 
> 标签：wordpress, wordpress-theming, submenu, menu-items, wp-nav-menu-item

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-31T15:22:17.833

看看这个答案，它解释了如何将自定义 HTML 添加到 wordpress 菜单：[https ://stackoverflow.com/a/12251157/1627227](https://stackoverflow.com/a/12251157/1627227)

**编辑：**

我已经整理了一个例子来适应你的问题。您可以将其放入**functions.php**中。注意注释，它们解释了在哪里添加您的自定义代码。

```
class Custom_Walker_Nav_Menu extends Walker_Nav_Menu {

  function start_lvl(&$output, $depth) {
      $indent = str_repeat("\t", $depth);
      //$output .= "\n$indent<ul class=\"sub-menu\">\n";

      // Change sub-menu to dropdown menu
      $output .= "\n$indent<ul class=\"dropdown-menu\">\n";
  }

  function start_el ( &$output, $item, $depth = 0, $args = array(), $id = 0 ) {
    // Most of this code is copied from original Walker_Nav_Menu
    global $wp_query, $wpdb;
    $indent = ( $depth ) ? str_repeat( "\t", $depth ) : '';

    $class_names = $value = '';

    $classes = empty( $item->classes ) ? array() : (array) $item->classes;
    $classes[] = 'menu-item-' . $item->ID;

    $class_names = join( ' ', apply_filters( 'nav_menu_css_class', array_filter( $classes ), $item, $args ) );
    $class_names = ' class="' . esc_attr( $class_names ) . '"';

    $id = apply_filters( 'nav_menu_item_id', 'menu-item-'. $item->ID, $item, $args );
    $id = strlen( $id ) ? ' id="' . esc_attr( $id ) . '"' : '';

    $has_children = $wpdb->get_var("SELECT COUNT(meta_id)
                            FROM wp_postmeta
                            WHERE meta_key='_menu_item_menu_item_parent'
                            AND meta_value='".$item->ID."'");

    $output .= $indent . '<li' . $id . $value . $class_names .'>';

    $attributes  = ! empty( $item->attr_title ) ? ' title="'  . esc_attr( $item->attr_title ) .'"' : '';
    $attributes .= ! empty( $item->target )     ? ' target="' . esc_attr( $item->target     ) .'"' : '';
    $attributes .= ! empty( $item->xfn )        ? ' rel="'    . esc_attr( $item->xfn        ) .'"' : '';
    $attributes .= ! empty( $item->url )        ? ' href="'   . esc_attr( $item->url        ) .'"' : '';

    // Check if menu item is in main menu
    if ( $depth == 0 && $has_children > 0  ) {
        // These lines adds your custom class and attribute
        $attributes .= ' class="dropdown-toggle"';
        $attributes .= ' data-toggle="dropdown"';
    }

    $item_output = $args->before;
    $item_output .= '<a'. $attributes .'>';
    $item_output .= $args->link_before . apply_filters( 'the_title', $item->title, $item->ID ) . $args->link_after;

    // Add the caret if menu level is 0
    if ( $depth == 0 && $has_children > 0  ) {
        $item_output .= ' <b class="caret"></b>';
    }

    $item_output .= '</a>';
    $item_output .= $args->after;

    $output .= apply_filters( 'walker_nav_menu_start_el', $item_output, $item, $depth, $args );
  }

} 
```

完成此操作后，您必须转到`wp_nav_menu()`调用菜单 ( ) 的位置。在我链接到的答案中，有对`wp_nav_menu`. 但是，您必须将此行添加`'walker' => new Custom_Walker_Nav_Menu`到参数数组中，以在该特定菜单上使用您的自定义 walker 对象。

希望你明白了；）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-26T14:58:04.760

从 Wordpress 3.6.0 开始，您可以使用 nav_menu_link_attributes 过滤器：

```
add_filter( 'nav_menu_link_attributes', 'add_class_to_items_link', 10, 3 );

function add_class_to_items_link( $atts, $item, $args ) {
  // check if the item has children
  $hasChildren = (in_array('menu-item-has-children', $item->classes));
  if ($hasChildren) {
    // add the desired attributes:
    $atts['class'] = 'dropdown-toggle';
    $atts['data-toggle'] = 'dropdown';
    $atts['data-target'] = '#';
  }
  return $atts;
} 
```

不幸的是，这些标签没有我们可以使用的过滤器，所以我们需要一个 walker：

```
class MY_Menu_Walker extends Walker_Nav_Menu {

  public function start_lvl( &$output, $depth = 0, $args = array() ) {
    $indent = str_repeat("\t", $depth);
    $output .= "\n$indent<ul class=\"sub-menu dropdown-menu\">\n";
  }   

} 
```

然后在调用菜单时添加 walker 选项：

```
wp_nav_menu( array('walker' => new MY_Menu_Walker)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-23T06:03:00.320

在 Function.php 中使用此代码

```
function add_menuclass($ulclass) {
   return preg_replace('/<a /', '<a class="list-group-item"', $ulclass);
}
add_filter('wp_nav_menu','add_menuclass'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-24T23:35:53.860

您可以使用它来检查是否有子菜单：

```
$has_children = $wpdb->get_var("SELECT COUNT(meta_id)
                                FROM wp_postmeta
                                WHERE meta_key='_menu_item_menu_item_parent'
                                AND meta_value='".$item->ID."'"); 
```

然后做简单的检查

```
if ( $has_children > 0 ) {
  // These lines adds your custom class and attribute
  $attributes .= ' class="dropdown-toggle"';
  $attributes .= ' data-toggle="dropdown"';
} 
```

请记住将**$wpdb**设置为全局：

```
global $wp_query, $wpdb; 
```

多田~

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-21T10:46:03.407

你可以把它放到functions.php中。

```
class My_Walker_Nav_Menu extends Walker_Nav_Menu {
    function display_element( $element, &$children_elements, $max_depth, $depth=0, $args, &$output ){
      $GLOBALS['dd_children'] = ( isset($children_elements[$element->ID]) )? 1:0;
      $GLOBALS['dd_depth'] = (int) $depth;
      parent::display_element( $element, $children_elements, $max_depth, $depth, $args, $output );
    }
   function start_lvl(&$output, $depth) {
     $indent = str_repeat("\t", $depth);
     $output .= "\n$indent<ul class=\"dropdown-menu\">\n";
   }
  function start_el( &$output, $item, $depth = 0, $args = array(), $id = 0 ) 
  {
    global $wp_query, $wpdb;
    $indent = ( $depth ) ? str_repeat( "\t", $depth ) : '';
    $li_attributes = '';
    $class_names = $value = '';
    $classes = empty( $item->classes ) ? array() : (array) $item->classes;

    //Add class and attribute to LI element that contains a submenu UL.
    if ($args->has_children){
      $classes[]    = 'dropdown';
      $li_attributes .= 'data-dropdown="dropdown"';
    }
    $classes[] = 'menu-item-' . $item->ID;
    //If we are on the current page, add the active class to that menu item.
    $classes[] = ($item->current) ? 'active' : '';
    //Make sure you still add all of the WordPress classes.
    $class_names = join( ' ', apply_filters( 'nav_menu_css_class',     array_filter( $classes ), $item, $args ) );
    $class_names = ' class="' . esc_attr( $class_names ) . '"';
    $id = apply_filters( 'nav_menu_item_id', 'menu-item-'. $item->ID, $item, $args );
    $id = strlen( $id ) ? ' id="' . esc_attr( $id ) . '"' : '';
    $has_children = $wpdb->get_var(
    $wpdb->prepare("
       SELECT COUNT(*) FROM $wpdb->postmeta
       WHERE meta_key = %s
       AND meta_value = %d
       ", '_menu_item_menu_item_parent', $item->ID)
     );
   $output .= $indent . '<li' . $id . $value . $class_names .'>';
   $output .= $indent . '<li' . $id . $value . $class_names . $li_attributes . '>';
   //Add attributes to link element.
   $attributes  = ! empty( $item->attr_title ) ? ' title="'  . esc_attr( $item->attr_title ) .'"' : '';
   $attributes .= ! empty( $item->target ) ? ' target="' . esc_attr( $item->target     ) .'"' : '';
   $attributes .= ! empty( $item->xfn ) ? ' rel="'    . esc_attr( $item->xfn        ) .'"' : '';
   $attributes .= ! empty( $item->url ) ? ' href="'   . esc_attr( $item->url        ) .'"' : '';
   // Check if menu item is in main menu

if ( $depth == 0 && $has_children > 0  ) {
    // These lines adds your custom class and attribute
    $attributes .= ' class="dropdown-toggle"';
    $attributes .= ' data-toggle="dropdown"';
}
   $item_output = $args->before;
   $item_output .= '<a'. $attributes .'>';
   $item_output .= $args->link_before . apply_filters( 'the_title', $item->title, $item->ID ) . $args->link_after;
   // Add the caret if menu level is 0
   if ( $depth == 0 && $has_children > 0  ) {
      $item_output .= ' <b class="caret"></b>';
   }
   $item_output .= '</a>';
   $item_output .= $args->after;
   $output .= apply_filters( 'walker_nav_menu_start_el', $item_output, $item, $depth, $args );
  }
} 
```

然后在您要显示此菜单的模板中放置此代码。

```
 <?php

                if ( has_nav_menu( 'primary' ) ) {

                     $defaults = array(
                        'theme_location'  => 'primary',
                        //'menu'            => '',
                         'container'       => 'ul',
                         'container_class' => '',
                         'container_id'    => '',
                         'menu_class'      => '',
                         'menu_id'         => '',
                         'walker'          =>  new My_Walker_Nav_Menu()
                    );

                    wp_nav_menu( $defaults );

                }
            ?> 
```

使用它我解决了我的问题。

# wpf - 如何将矩形添加到 WPF 中的菜单项？

> ID：13161203
> 
> 赞同：1
> 
> 时间：2012-10-31T15:17:55.060
> 
> 标签：wpf, xaml

我正在使用矩形自定义菜单项。我需要删除默认菜单项中的所有特征并将自定义矩形添加到菜单中。我不确定菜单项的哪个属性应该被覆盖？有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T18:51:47.970

定义这样的模板：

```
 <ControlTemplate x:Key="customMenuItem" TargetType="{x:Type MenuItem}">
        <WrapPanel Background="Gray" Margin="3">
            <Rectangle Fill="Black" Width="16"/>
            <ContentPresenter Content="{TemplateBinding Header}"/>
        </WrapPanel>
    </ControlTemplate> 
```

然后将其用作任何菜单项的模板。

```
<Menu>
    <MenuItem Template="{StaticResource customMenuItem}" Header="some text"/>
</Menu> 
```

# asp.net - 为什么我的自定义模板数据绑定控件中的 DataItem 在 ItemCommand 事件中为空？

> ID：13161206
> 
> 赞同：0
> 
> 时间：2012-10-31T15:18:05.447
> 
> 标签：asp.net, databound-controls, itemcommand

这是我的自定义控制代码：

```
namespace MyControlNameSpace  
{  
  public class MyControlItemCommandEventArgs : CommandEventArgs
  {
    private MyControlItem _item;
    private object _commandSource;

    public MyControlItemCommandEventArgs(MyControlItem item, object commandSource, CommandEventArgs cea) : base(cea)
     {
      _item = item;
      _commandSource = commandSource;   
     }

    public MyControlItem Item { get{ return _item; } }
    public object CommandSource { get{ return _commandSource; } }

  }

  public class MyControlItem : Control, IDataItemContainer
  {
    public MyControlItem(object dataItem, int index)
    {
        _dataItem = dataItem;
        _dataItemIndex = _displayIndex = index;
    }  

    private readonly object _dataItem;
    private readonly int _dataItemIndex;
    private readonly int _displayIndex;

    public object DataItem { get { return _dataItem; } }
    public int DataItemIndex { get { return _dataItemIndex; } }
    public int DisplayIndex { get { return _displayIndex; } }

    protected override bool OnBubbleEvent(object source, EventArgs args)
    {
      if (args is CommandEventArgs)
      {
       var e = new MyControlItemCommandEventArgs(this, source, (CommandEventArgs)args);
       base.RaiseBubbleEvent(this, e);
       return true;
      }

      return false;
    }
  }  

  public delegate void ItemEventHandler(object sender, MyControlItemCommandEventArgs e);

  [DefaultProperty("Text")]
  [ToolboxData("<{0}:MyControl runat=server></{0}:MyControl>")]
  public class MyControl : CompositeDataBoundControl, IPrivilage
  {
    public event ItemEventHandler ItemCommand;

    protected virtual void OnItemCommand(MyControlItemCommandEventArgs e)
    {
     if (ItemCommand != null)
        ItemCommand(this, e);
    }

    protected override bool OnBubbleEvent(object source, EventArgs args)
    {
        // only bother bubbling appropriate events
        if (args is MyControlItemCommandEventArgs)
        {
            OnItemCommand((MyControlItemCommandEventArgs)args);
            return true;
        }

        return false;
    }

    protected override int CreateChildControls(IEnumerable dataSource, bool dataBinding)
    {
       // here I'm adding some controls like buttons and other

       // Iterate for ItemTemplate
       foreach (object dataItem in dataSource)
       {
         if (ItemTemplate != null)
         {
           // create instance of MyControlItem control
           var item = new MyControlItem(dataItem, count++);
           // instantiate in new item object
           ItemTemplate.InstantiateIn(item);
           // add item to Controls collection
           Controls.Add(item);
           // need to support <%# %> expressions
           item.DataBind();
         }
       }

      // some code here
    }
  } 
```

在 .aspx 页面中：

```
protected void Page_Load(object sender, EventArgs e)
 {
   // if it's not post back then get the data and assign to MyControl DataSource property
   if(!IsPostBack)
     GetData();
 }    

protected void MyControl1_OnItemCommand(object sender, MyControlItemCommandEventArgs e)
 {
   var x = e.DataItem;  
   // x here is always null;
 } 
```

如您所见，我在 OnItemCommand 事件时无法获取 e.DataItem，因为它始终为空。
我试图删除`if(!IsPostBack)`，`Page_Load`以便每次页面加载都分配数据源，但这是不对的，如果它`PostBack`像在 Asp.Net`Repeater`控件中一样，我应该能够不分配数据源。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:38:08.767

该`OnItemCommand`事件在回发时引发。此时，如果`CompositeDataBoundControl`已`ViewState`启用，它将重新创建子控件而不查询数据库。您的`CreateChildControls`方法将使用`dataBinding`set to调用`false`，并且`dataSource`将是一个可枚举的对象序列，`null`用作实际数据的占位符。

您将在任何数据绑定控件中获得相同的行为。如果你尝试用 a 做同样的事情`Repeater`，你会看到在事件中`e.Item.DataItem`是。`null``ItemCommand`

# c++ - C ++中'〜'有什么用？

> ID：13161209
> 
> 赞同：0
> 
> 时间：2012-10-31T15:18:16.350
> 
> 标签：c++, pointers, loops

```
#include<iostream.h>
void main()
{
   int x[]={1,2,3,4,5};
   for(int i=0;~i<5;i++)
      {    cout<<*x;
      }
} 
```

当我运行这个程序时，控制台的显示有无限的数字 1。我不明白这是怎么发生的。请帮我退出这个程序......这是由于波浪号运算符，如果是原因，那怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T15:20:39.127

是的，这是由于**按位 NOT 运算符**( `~`)**和未定义行为**的组合。

基本上，`~i`将始终低于`5`（嗯，比你的情况），因为它会为大于`0`的值返回一个负数。当您达到最大数量时，将溢出并因此遇到未定义的行为。`i``0``int``i++`

在那之前，你会`1`打印出来，因为那是`*x`返回的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:20:43.563

波浪号是按位逆运算符。所以〜0x00000000 = 0xFFFFFFFF或-1。增加 i 会使这个运行很长时间，几十亿次迭代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T15:21:06.693

~ 运算符是按位非。由于 int 的带符号性质，按位 NOT 使数字为负数，小于 5。为您尝试做的事情摆脱它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T15:23:32.497

该`~`运算符是 BITWISE NOT 布尔运算符。所以你的循环是无限的，因为计数器是一个`int32`，并且按位非的结果总是一个负数。

# c# - 如何在 LINQPad 中使用 CallerMemberName？

> ID：13161211
> 
> 赞同：1
> 
> 时间：2012-10-31T15:18:22.393
> 
> 标签：c#, linqpad, c#-5.0

所以 LINQPad 说它支持 C# 5.0 中的所有内容，但我无法让 CallerMemberName 工作。

```
void Main()
{
    GetMethodName().Dump();
}

public string GetMethodName([CallerMemberName] string memberName = "")
{
    return memberName;
} 
```

错误：找不到类型或命名空间名称“CallerMemberName”（按 F4 添加 using 指令或程序集引用）

找不到类型或命名空间名称“CallerMemberNameAttribute”（您是否缺少 using 指令或程序集引用？）

我尝试`using`为 CallerMemberName 所在的命名空间添加一行，但这当然不起作用，因为 LINQPad 假定您输入的代码位于某个秘密隐藏类中，而您不能将其放入`using`类中。然后我尝试为 CallerMemberName 输入完整的命名空间：`public string GetMethodName([System.Runtime.CompilerServices.CallerMemberName] string memberName = "")`但这仍然不起作用。

错误：命名空间“System.Runtime.CompilerServices”中不存在类型或命名空间名称“CallerMemberName”

命名空间“System.Runtime.CompilerServices”中不存在类型或命名空间名称“CallerMemberNameAttribute”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T20:23:20.650

首先，错误消息清楚地表明要添加 a `using`，您需要按 F4 并将其添加到显示的对话框中。

但是您的第二个版本应该可以工作，而且对我来说效果很好。也许它对您不起作用，因为您实际上没有安装 C# 5.0 编译器。您是否安装了 .Net 4.5（包括更新的编译器）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T16:54:55.633

如果我`System.Runtime.CompilerServices`在 LINQPad 中添加 using 指令，这对我有用：

```
public void Method1(object someArgument, object someOtherArgument,
             [CallerMemberName] string callerMemberName = null,
             [CallerFilePath] string callerFilePath = null,
             [CallerLineNumber] int callerLineNumber = 0)
{
    string.Format("Called with {0}, {1} from method {2} in file {3} at line number {4}",
            someArgument, someOtherArgument, 
            callerMemberName, callerFilePath, callerLineNumber)
        .Dump();
} 
```

确保您使用的是当前版本的 LINQPad。过去，.NET < 4 有一个单独的版本。

# php - 存储以前的搜索

> ID：13161212
> 
> 赞同：0
> 
> 时间：2012-10-31T15:18:28.337
> 
> 标签：php

我正在开发一个用于预订火车的 PHP 网站。当用户登录到他的帐户时，他将能够搜索可用的火车，并且他将在另一个网页中获得许多可用的火车。

我需要保存他为搜索获得的结果页面，以便每当他重新登录到他的帐户时，他都可以看到他的搜索历史记录。谁能告诉我这个的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T15:22:11.887

使用 user_id、关键字和时间在数据库中创建一个“历史”表。每次有人搜索时，都会将他的搜索保存到此表中。正如 Alien 先生建议的那样，您可以使用 session ，但这是暂时的保存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T15:19:28.910

您可以将他的搜索历史保存在[会话](http://www.php.net/manual/en/book.session.php)变量中

```
$_SESSION['search_history']; 
```

或者你也可以维护一个表来存储他们的搜索结果，比如

`search table`

```
--------------------
userid   |   search
--------------------
12345       whatever
86459       blah blah 
```

现在，当用户返回时，您可以简单地检索与用户 ID 匹配的数据，例如

```
$query = SELECT search FROM search_table WHERE userid=$_SESSION['userid']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T15:21:45.143

如果您希望始终保存历史记录，您可以将其保存到数据库中。一段时间后会话会消失。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T15:30:11.707

在数据库中创建一个表，字段为 1\. user_id 2\. word_searched。3.日期和时间

当按下搜索按钮时，将这些保存在表中，以便将来您可以针对登录用户获取此表中的所有记录。您也可以将其放在文本框中以再次显示结果。

# .net - WCF：使用证书和用户名身份验证来使用 WebService

> ID：13161218
> 
> 赞同：1
> 
> 时间：2012-10-31T15:18:41.613
> 
> 标签：.net, wcf, web-services, soap, certificate

我一直在努力尝试使用托管在**我无法控制的服务器中**的 Web 服务（因此我无法在服务器部分进行任何配置）。

我一直在使用 WCF 尝试使用同时具有用户名/密码和证书身份验证要求（以及 HTTPS 连接）的 Web 服务。

我的代码是这样的：

```
 EndpointAddress ea = new
                EndpointAddress("https://the.server.address");

        BasicHttpBinding bs = new BasicHttpBinding();

        bs.Security.Mode = BasicHttpSecurityMode.TransportWithMessageCredential;
        bs.Security.Transport.ClientCredentialType =
            HttpClientCredentialType.Certificate;

        //here if I put username I get a 'message is not signed' error. 
           If I put credentials I get an 'invalid username/password'.
        bs.Security.Message.ClientCredentialType = BasicHttpMessageCredentialType.Certificate;

        var svc = new myWebServiceClient(bs, ea);

        var request = new ObjectWS();

        svc.ClientCredentials.ClientCertificate.SetCertificate(
                                        StoreLocation.CurrentUser,
                                                 StoreName.Root,
                                X509FindType.FindBySerialNumber,
                                "the serial");

        svc.ClientCredentials.UserName.UserName = "user";
        svc.ClientCredentials.UserName.Password = "pass";

        //the call to the method in the WS
        request= svc.getValue("param"); 
```

问题是，由于我是 WCF（以及一般的 WebServices）的新手，我实际上并不知道如何使用用户名和证书身份验证来使用 Web 服务，也不知道这是否有意义一点也不。

在行中：

```
bs.Security.Message.ClientCredentialType = BasicHttpMessageCredentialType.Certificate; 
```

如果我将凭证类型设置为证书，我会得到一个无效的用户名/密码。另一方面，如果我将其设置为用户名，我将收到“消息未签名错误”。

我非常感谢在这个问题上的一些反馈/帮助。问候！

# ruby - Sinatra 设置在类范围内丢失

> ID：13161219
> 
> 赞同：0
> 
> 时间：2012-10-31T15:18:41.763
> 
> 标签：ruby, scope, sinatra, settings

对于 Sinatra 应用程序，config.ru 在以下类中调用“运行”：

```
class My_init < Sinatra::Base
    # Define all environments available in our app

    # Set the applications root directory

    # Define Root Path

    # Require all files in the App directory

    # Load database configuration

    require './config/database'

    ActiveRecord::Base.establish_connection(
      :adapter  => "mysql2",
      :host     => settings.db_host,
      :database => settings.db_name,
      :username => settings.db_username,
      :password => settings.db_password
    )
end 
```

出于某种原因，无法从此范围访问从 ./config/database 加载的设置。如果我从配置文件本身打印设置，如“p settings.db_host”，一切正常，但是，在这个类中，settings.db_host 是未知的。

有人知道发生了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T19:08:03.200

如果您正在运行 Ruby > 1.9.2，`require`则不查看当前目录。

您应该尝试使用`require_relative 'config/database'`或将当前目录添加到加载路径：`$LOAD_PATH << '.'`.

# linux - 如何通过c程序在linux中找到默认下载目录？

> ID：13161226
> 
> 赞同：14
> 
> 时间：2012-10-31T15:18:54.250
> 
> 标签：linux, download, ubuntu-12.04

正如我的标题，

是否有可用的 API 来确定 Linux 中的默认下载目录？

我正在使用 ubuntu 发行版。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-07-31T09:20:03.877

迟到了，但是：XDG 规范正好涵盖了这个主题。要在 shell（脚本）中获取下载目录，只需运行：

```
$ xdg-user-dir DOWNLOAD
/home/djasa/Downloads 
```

对于程序，该位置位于`$HOME/.config/user-dirs.dirs`：

```
$ grep DOWNLOAD .config/user-dirs.dirs 
XDG_DOWNLOAD_DIR="$HOME/Downloads" 
```

有关 XDG 的更多信息，请阅读`man -k xdg`返回给您的手册页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T15:23:11.367

操作系统级别没有“默认下载目录”，尽管所有当前发行版都会`~/Downloads`为此创建一个目录，并且大多数浏览器会默认选择它。你想达到什么目的？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T15:21:48.170

我认为最好的近似值是使用用户的 HOME 环境变量。在许多发行版中，您可以在其中使用 then 子文件夹，但它并不适用于所有发行版。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-31T15:34:21.067

There are no standards for how to organise user data on Linux, besides that in most of the cases it goes to where `$HOME` points to.

One excpetion to this is where to place and how to name files and directories to store user specific application configruations. They shall go to the root of the users home, and those file/directories shall start with a `.`. Please [see here for this](http://www.pathname.com/fhs/pub/fhs-2.3.html#REQUIREMENTS4A).

For system files there do exist guide lines, namely the [FHS](http://www.pathname.com/fhs/pub/fhs-2.3.html).

# json - System.Web.Script.Serialization.JavaScriptSerializer().Serialize 做 Json.Encode 没有做的事情吗？

> ID：13161227
> 
> 赞同：2
> 
> 时间：2012-10-31T15:18:55.343
> 
> 标签：json, knockout.js, asp.net-mvc-4

前言：这是以下问题的派生问题：

1.  [将 Mvc 模型传递给 KnockoutJS 的最佳实践](https://stackoverflow.com/questions/11628938/best-practice-on-passing-mvc-model-to-knockoutjs)
2.  [如何使用 ASP.NET MVC 3“Razor”视图引擎在 KnockoutJS 中启用数据绑定？](https://stackoverflow.com/questions/5873636/how-to-enable-data-binding-in-knockoutjs-using-the-asp-net-mvc-3-razor-view-en)

* * *

将我的 MVC 视图模型传递给 KnockoutJS 时，我习惯于使用[以下语法](https://stackoverflow.com/a/5875129/109941)：

```
var initialData = @Html.Raw(Json.Encode(Model)); 
```

但最近，我看到人们使用[以下语法](https://stackoverflow.com/a/7290692/109941)：

```
var initialData = @Html.Raw( new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model)); 
```

* * *

我的问题：

*   做`System.Web.Script.Serialization.JavaScriptSerializer().Serialize`一些不做的事情`Json.Encode`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T15:53:49.417

这是相反的方式：`Json.Encode(Model)`做的比普通的更多`JavaScriptSerializer`：

在内部，`Json.Encode`也使用了，`System.Web.Script.Serialization.JavaScriptSerializer`但它注册了一个额外的转换器，称为`DynamicJavaScriptConverter`.

哪里`DynamicJavaScriptConverter`是

> 知道如何从动态对象中获取成员值的转换器。

您可以`Json.Encode` [在线查看来源](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/bfa28d1ddbca#src/System.Web.Helpers/Json.cs)：

```
public static class Json
{
    private static readonly JavaScriptSerializer _serializer = CreateSerializer();

    public static string Encode(object value)
    {
        // Serialize our dynamic array type as an array
        DynamicJsonArray jsonArray = value as DynamicJsonArray;
        if (jsonArray != null)
        {
            return _serializer.Serialize((object[])jsonArray);
        }

        return _serializer.Serialize(value);
    }       

    private static JavaScriptSerializer CreateSerializer()
    {
        JavaScriptSerializer serializer = new JavaScriptSerializer();
        serializer.RegisterConverters(new[] { new DynamicJavaScriptConverter() });
        return serializer;
    }

    //...
} 
```

因此，使用`Json.Encode`你可以获得一些额外的支持来处理`dynamic`对象，但如果你不需要它，你可以使用“vanilia”`JavaScriptSerializer`来代替。

# date - oracle 日期时间的数据类型

> ID：13161235
> 
> 赞同：7
> 
> 时间：2012-10-31T15:19:15.950
> 
> 标签：date, oracle11g, timestamp

我正在创建一个数据库，我对使用日期或时间戳作为字段有点困惑。

我需要创建一些触发器来检查可用的日期和时间，所以我认为我可以使用相同的字段来存储这两个值。

我更倾向于使用 TIMESTAMP，因此；

```
TO_TIMESTAMP('18/03/2012 02:24', 'DD/MM/YYYY HH24:MI') 
```

使用时间戳会比使用日期更好吗？或不同字段中的日期和时间。

干杯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T15:38:23.013

DATE 数据类型还存储时间，因此您不需要两个字段。两者的区别在于

1.  时间戳下降到小数秒
2.  减去两个时间戳 (timestamp-timestamp) 会产生一个 INTERVAL 数据类型答案。对于日期，您会得到一个以天为单位的数字。
3.  如果您需要存储时区，则 TIMESTAMP WITH TIME ZONE 可用，则无法在日期字段中执行此操作。
4.  日期占用的存储空间略少（7 字节与时间戳 11 字节）（当时间戳的精度 > 0..否则时间戳（0）也是 7 字节）

时间戳数据类型更现代（ASNI），而 DATE 在 Oracle 中的使用时间更长。

# memory-leaks - 这个vala代码是内存泄漏吗？

> ID：13161236
> 
> 赞同：2
> 
> 时间：2012-10-31T15:19:16.340
> 
> 标签：memory-leaks, vala

据此[_](https://stackoverflow.com/a/2270511/398460)

> Vala 没有垃圾收集。它进行引用计数。

我不确定垃圾收集和引用计数之间有什么区别，也找不到明确的解释。我是否明确需要删除 bmp 和/或向 Bmp 类添加析构函数？IOW：这段代码有内存泄漏吗？

```
public void* run() {
    while(true) {
        if(detected) {
            ...
            var bmp = new Bmp(800,800);
            ...

public class Bmp {
    ... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T19:37:22.537

您编写的代码不是内存泄漏，但可以编写一个。例如：

```
 class Foo {
       Foo? f;
   }
   var foo1 = new Foo();
   var foo2 = new Foo();
   foo1.f = foo2;
   foo2.f = foo1; 
```

每次`Foo`分配 a 时，该实例的计数器在未分配时递增和递减。因为`foo1`和`foo2`相互引用，所以它们的计数永远不会变为零，即使在程序的其余部分中没有对它们的引用。`unowned`关键字进行了不计入的引用。所以，悬空指针可以写成如下：

```
var foo = new Foo();
unowned Foo f = foo;
foo = null;
// f now refers to an object that has been deallocated. 
```

如果您的对象图没有循环，则不会有问题。如果您有任何循环引用，如果您没有正确清理，您可能会泄漏内存。

# objective-c - 在桌面视图上查看

> ID：13161245
> 
> 赞同：0
> 
> 时间：2012-10-31T15:19:36.390
> 
> 标签：objective-c, core-data, uitableview

我正在使用 NSFetchResultsController 构建一个应用程序。为此，我使用 CoreDataTableViewController 类。所以我所有的 tableviewControllers 都是从这个类派生的。

```
@interface MultimediaViewController : CoreDataTableViewController 
```

所以现在我想在那个 tableview 上添加一个视图。我有一个这样的故事[板](http://www.flickr.com/photos/74322780@N08/8122607578/)。它在表格视图的顶部正确显示，但是当我向下滚动时它会消失，但我希望它始终保持在顶部。我怎样才能做到这一点？请记住，我总是需要派生自 CoreDataTableViewController - 类的视图控制器。

谁能帮助我，我在这方面搜索了好几天，但没有找到合适的解决方案。如果您真的想帮助我，我会将我的项目邮寄给您以获取更多详细信息。

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:39:17.430

您希望您的“该表视图顶部的视图”成为表视图的子视图。表格视图是滚动视图（UIScrollView）。我不知道 CoreDataTableViewController 是什么，但大概它可以访问表视图。这意味着您可以在该表视图上设置一个委托，这意味着您已经在滚动视图上设置了一个委托。（在这种情况下，您可能必须将代码放在已经用作表格视图委托的任何类中。）这意味着您可以使用滚动视图委托来检测滚动视图何时滚动，这意味着它的内容偏移量已更改. 现在您更改“tableview 顶部的视图”的框架以补偿滚动视图内容偏移量的变化。

# sql - 远程连接到 SQL Server 2008 sp2

> ID：13161247
> 
> 赞同：0
> 
> 时间：2012-10-31T15:19:40.867
> 
> 标签：sql, sql-server-2008, tcp, remote-server

我在 Visual Studio 2010 中构建了一个窗口应用程序。它在我的计算机上运行良好。当我尝试从另一台计算机运行时，它给了我一个错误：建立与 SQL Server 的连接时发生网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。

这里有一些信息：计算机ip：192.168.0.25 DNS - 192.168.0.12 实例 - SQLEXPRESS

连接字符串：String = "Data Source=192.168.0.12\SQLEXPRESS;Initial Catalog=fleetInfo;User ID=user;Password=user123;"

我正在运行 SQL Server Management Studio 2008 SP2。我检查了 sql server 配置管理器。一切都很好。在配置管理器> SQLEXPRESS 的协议> TCP/IP：IP1 IP 地址：192.168.20.100 端口：空 IP ALL 动态端口：1408 TCP 端口：空

我想知道我在这里做错了什么。

多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:50:51.227

If you are running the application on the same server as the SQL Instance you will need to reference that SQL instance rather than the IP of the server so your connection string should look something like Connection string : String = "Data Source=.\SQLEXPRESS;Initial Catalog=fleetInfo;User ID=user; Password=user123;" when it is compiled and put on the server. For you to run it locally it will still need to be like you have it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T22:05:59.710

您似乎正在使用动态端口，因此您必须在连接字符串中指定端口号（在您的情况下为 1408）：`192.168.0.12,1408`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T23:14:02.397

您的 SQL Server 配置管理器似乎表明您的 SQL Server 的 IP 地址是 192.168.20.100，而不是连接字符串中的 192.168.0.12。

此外，SSWUG 文章中的说明无法正常工作，因为它表明在 telnet 部分中使用了错误的地址。

所以：

1.  再次检查服务器上的配置管理器并验证 IP 地址和端口（端口可能已更改）

2.  转到命令提示符（开始/运行/CMD.EXE）并键入

    ```
    TELNET [ip address from config manager] [port from config manager] 
    ```

您是否收到黑屏（表示连接成功）或失败消息？

# javascript - javascript图片库查询（下一张图片）

> ID：13161248
> 
> 赞同：1
> 
> 时间：2012-10-31T15:19:42.987
> 
> 标签：javascript, onclick, slideshow, image-gallery, next

这是我第一次使用stackoverflow，我真的希望有人能提供帮助。我在编码方面相当新手，所以我希望我的查询很容易解决。我创建了一个简单的 javascript 图片库，如果您单击左箭头或右箭头，它会循环显示我的数组列表中的下一个图像。我还有跳转到此列表中特定图像的快速链接。我怎样才能让我的下一个/后退链接继续，以显示当前所选图像的下一个图像？例如，如果我跳到图库图像 3，然后它会在列表图库图像 4 中显示下一个图像，而不是图库图像 2。

以下是我的代码示例。

非常感谢您的帮助。

**这是我的脚本：**

```
var num=0;

imgArray = [
  ['../00_assets/gallery/work_00.jpg','Gallery', '1 of 6',],
  ['../00_assets/gallery/work_01.jpg','Gallery', '2 of 6',],
  ['../00_assets/gallery/work_02.jpg','Gallery', '3 of 6'],
  ['../00_assets/gallery/work_03.jpg','Gallery', '4 of 6'],
  ['../00_assets/gallery/work_04.jpg','Gallery', '5 of 6'],
  ['../00_assets/gallery/work_05.jpg','Gallery', '6 of 6'],
]

function slideshow(slide_num) {
  document.getElementById('mypic').src=imgArray[slide_num][0];
  document.getElementById('mypic').alt=imgArray[slide_num][1];
  document.getElementById('number').innerHTML=imgArray[slide_num][2];
}

function slideshowUp() {
  num++;
  num = num % imgArray.length;
  slideshow(num);
}

function slideshowBack() {
  num--;
  if (num < 0) {num=imgArray.length-1;}
  num = num % imgArray.length;
  slideshow(num);
} 
```

**这是我的 HTML****（我已经删除了看起来不相关的部分）*****：*****

 ***```
 <div align="left">
    <!--  First image in array list is here  -->
    <img src="../00_assets/gallery/work_00.jpg" id="mypic" name="mypic" alt="Gallery">

        <!--  Previous link is here  -->
<a href="#" onclick="slideshowBack(); return false;"> ← </a>

        <!--  First image number is here  -->
  <div id="number">1 of 9</div>

        <!--  Next link is here  -->
<a href="#"  onclick="slideshowUp(); return false;"> → </a>

        <!--  Three quicklinks are link is here  -->
<a href="#" onclick="slideshow(0); return false;">Quicklink 1</a> | 
<a href="#" onclick="slideshow(2); return false;">Quicklink 2</a> | 
<a href="#" onclick="slideshow(4); return false;">Quicklink 3</a> | 
```

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:37:21.543

`num`每当您更改当前幻灯片时，您都应该更新您的变量。

然后，当单击快速链接时，它将具有当前幻灯片以供其他方法 (`slideshowUp`和`slideshowBack`) 使用，并按预期保持导航。

换句话说：

```
function slideshow(slide_num) {
    num = slide_num; // add this line
    document.getElementById('mypic').src=imgArray[slide_num][0];
    document.getElementById('mypic').alt=imgArray[slide_num][1];
    document.getElementById('number').innerHTML=imgArray[slide_num][2];
} 
```***

# asp.net-mvc - mvc 加载文化视图

> ID：13161249
> 
> 赞同：0
> 
> 时间：2012-10-31T15:19:44.290
> 
> 标签：asp.net-mvc, asp.net-mvc-3, uiculture

我似乎无法找到太多关于此的信息。有没有办法让我对每种文化有不同的看法？mvc3 中有为此内置的东西吗？有什么关于这个的吗？我不想将 res 文件用于整个页面，仅用于验证等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:39:08.563

没有内置功能。

看看这篇文章作为起点：

*   [ASP.NET MVC 3 国际化](http://afana.me/post/aspnet-mvc-internationalization.aspx)
*   [ASP.NET MVC 3 国际化 - 第 2 部分 (NerdDinner)](http://afana.me/post/aspnet-mvc-internationalization-part-2.aspx)

此外，如果您对数据库翻译感兴趣：

*   [ASP.NET 2.0 自定义 SQL Server ResourceProvider](http://www.codeproject.com/Articles/14190/ASP-NET-2-0-Custom-SQL-Server-ResourceProvider)
*   [ResourceProviderFactory 类](http://msdn.microsoft.com/en-us/library/system.web.compilation.resourceproviderfactory.aspx)

# java - MouseListener 给 show() 方法带来问题

> ID：13161251
> 
> 赞同：1
> 
> 时间：2012-10-31T15:19:45.933
> 
> 标签：java, swing, jtable, illegalstateexception, jpopupmenu

当用户在我的应用程序中右键单击表格行时，我想显示一个小的上下文菜单。我的计划是使用为此定制`MouseListener`的调用该方法的`show()`方法。这是我的代码：

```
import java.awt.Point;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.JMenuItem;
import javax.swing.JPopupMenu;
import javax.swing.JTable;
import javax.swing.SwingUtilities;

class TableMouseListener extends MouseAdapter {
public void mousePressed(MouseEvent e) {
    JTable table = (JTable)(e.getSource());
    Point p = e.getPoint();
    int row = table.rowAtPoint(p);
    int col = table.columnAtPoint(p);

// The autoscroller can generate drag events outside the Tables range.
if ((col == -1) || (row == -1)) {
        return;
}

    if (SwingUtilities.isRightMouseButton(e)) {
        JPopupMenu pop = new JPopupMenu("Row "+row);
        JMenuItem menu1 = new JMenuItem("Wijzigen");
        menu1.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e){
                //do things, still have to make that
            }
        });
        pop.show(menu1, p.x, p.y);

    }
}
} 
```

现在我的问题是：当我运行我的应用程序时，我右键单击表格行，它会弹出这个错误：

```
Exception in thread "AWT-EventQueue-0" java.awt.IllegalComponentStateException: component must be showing on the screen to determine its location
at java.awt.Component.getLocationOnScreen_NoTreeLock(Unknown Source)
at java.awt.Component.getLocationOnScreen(Unknown Source)
at javax.swing.JPopupMenu.show(Unknown Source)
at TableMouseListener.mousePressed(TableMouseListener.java:34) 
```

这里到底出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T15:24:05.653

您正在尝试相对于 JMenuItem (menu1) 组件显示 JPopupMenu (pop)。但是在调用 popupmenu 方法的那一刻，JMenuItem 是不可见的，`show`并且它无法确定 JMenuItem 在屏幕上的位置（当然，它还没有显示在屏幕上）。

您必须在 popupmenu`show`方法中使用一些可见组件作为第一个参数（例如，添加到显示框架或任何其他**实际可见**组件的按钮）。您还可以传递 null 以相对于 (0;0) 坐标（屏幕左上角）放置弹出菜单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T16:19:42.660

*   `JMenuItem`不添加到`JPopup`，那么不`JMenuItem`应该`isDisplayable`

*   准备这个容器，不要在飞行中创建，

*   将整个弹出容器创建为局部变量或从类、void 等返回

    a)`JMenuItems`也准备

    b) override `maybeShowPopup`，然后你可以管理任何东西（必须在 EDT 上完成）

*   [其余重要方法](https://stackoverflow.com/questions/7423533/jtable-with-jpopupmenu)

# javascript - 将 jsLint 集成到 BBEdit

> ID：13161252
> 
> 赞同：3
> 
> 时间：2012-10-31T15:19:47.683
> 
> 标签：javascript, node.js, applescript, jslint, bbedit

如何将 jsLint 合并到 BBEdit 中？

*   环境：
    *   OSX 山狮
    *   BBEdit *10.1.2 (3152)*

我安装了[Node.js](http://nodejs.org/) ( *0.8.14* ) 并运行

```
sudo npm install -g jslint 
```

我可以通过运行从命令行运行**jslint**

```
jslint [filepath/]filename 
```

* * *

我找到了一个似乎解释如何将**jsLint**连接到**BBEdit的**[教程](http://forrst.com/posts/JSLint_Script_for_BBEdit-UQV)；但是，我从未编写过 AppleScript，也不知道从哪里开始。

 ****任何指导将不胜感激。

* * *

## **更新**

我将教程中的 AppleScript加载到[AppleScript编辑器应用程序中并运行它。](http://forrst.com/raw_code/c95ab22ac862655c91fbb8c0c35b65dfeebbdd88)

我现在收到以下错误消息：

> 无法获取“无法将缺失值的 POSIX 路径转换为 ​​Unicode 类型文本”的第 3 至 -1 段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:14:34.127

我发现了问题。我正在使用 BBEdit FTP 浏览器并直接在服务器之外工作。这导致 AppleScript 所依赖的文件路径出现问题。

一个短期的解决方案是在本地处理文件，然后在完成后上传。

更好的解决方案是将服务器安装为驱动器。这将提供最多的功能和最大的易用性。****

# jquery - 单选按钮组的 jquery 选择器，其中名称属性值具有数组表示法

> ID：13161253
> 
> 赞同：4
> 
> 时间：2012-10-31T15:19:49.477
> 
> 标签：jquery, jquery-selectors, radio-button

我想将 jquery 选择器用于带有数组表示法的单选按钮组

我有这样的单选按钮

```
<input name="show[]" type="radio" value="1" /> Show<br>
<input name="show[]" type="radio" value="0" /> Hide<br> 
```

我想对上述使用 jquery 选择器并尝试了以下操作

```
$("input:radio[name=show[]]").click(function(){
    alert(this.value)
}) 
```

这不起作用

我知道我们可以为单选按钮的 name 属性提供 like show 而不是 show[]

然而 IE 存在问题，因此通过使用数组表示法在所有浏览器中都可以使用。

现在我想像我所做的那样给出，这可能还是包含数组表示法的不同语法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-31T15:21:05.460

您需要转义选择器中的方括号：

```
$("input:radio[name=show\\[\\]]").click(function(){
    alert(this.value)
}) 
```

正如 James Allardice 所提到的，您还可以在属性本身周围加上引号以阻止歧义：

```
$("input:radio[name='show[]']").click(function(){
    alert(this.value)
}) 
```

更好的是，使用一个类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:24:25.740

您应该使用以下命令转义括号`\\`：

```
$('input:radio[name=show\\[\\]]').on('click', function(){
    alert(this.value)
})​;​ 
```

为了提高可读性，您还可以将名称选择器括在引号中：

```
$('input:radio[name="show[]"]').on('click', function(){
    alert(this.value)
})​;​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T15:22:20.157

您必须转义`[`and`]`选择器内。

**[现场演示](http://jsfiddle.net/RzeNt/)**

```
$("input:radio[name=show\\[\\]]").click(function(){
    alert(this.value)
})​ 
```

# android - 停止 HttpURLConnection 连接

> ID：13161256
> 
> 赞同：3
> 
> 时间：2012-10-31T15:19:54.547
> 
> 标签：android, android-asynctask, httpurlconnection, cancellation

前段时间有人问过这个问题并回答了这个[问题](https://stackoverflow.com/questions/12383854/how-to-stop-httpurlconnection-connect-on-android)。然而，答案还没有帮助我。我与另一篇文章的 OP 处于相同的位置：我有一个 Asynctask，我在其中连接到某个网站，但是，由于互联网连接滞后，大多数情况下连接需要一些时间。我希望用户能够随时停止尝试连接。

```
public class DownloadWebHtml extends AsyncTask<String, Void, Map<String,ArrayList<ArrayList<String>>>> {        
        HttpURLConnection con = null;

        @Override
        protected void onPreExecute(){
            Button but = (Button) findViewById(301);
            but.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    cancel(true);
                    con.disconnect();
                }
            });
        }

        @Override
        protected Map<String, ArrayList<ArrayList<String>>> doInBackground(String... urlcodes) {
            //stuff
            BufferedReader in = null;
            try {
                URL url = new URL("some url");
                con = (HttpURLConnection) url.openConnection();
                in = new BufferedReader(new InputStreamReader(con.getInputStream(),Charset.forName("ISO-8859-1")));
                String line = "";
                while ((line = in.readLine()) != null && !isCancelled()) {
                    html.add(line);
                }
                in.close();
            } catch (MalformedURLException e) {
                return null;
            } catch (IOException e) {
                return null;
            } finally {
                con.disconnect();
                 if (in != null) {
                     try {
                         in.close();
                     } catch (IOException e) {
                         Log.d("gettxt", e.getMessage());
                     }
                 }
            }

            if(!html.isEmpty()) {
                return //stuff;
            }
            return null;

        }

        @Override
        protected void onCancelled(){
            //cancellation
        }

    //onpostexecute doing stuff
} 
```

每当按下按钮时，整个 AsyncTask 只有在建立连接后才会取消。是否可以在按下按钮时立即停止整个过程？可以使用默认的httpurlconnection来完成吗？

我尝试在忙时使用断开连接来触发异常`con.getInputStream`，但它无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:32:50.067

我建议切换到 Apache 的[HTTP Components](http://hc.apache.org/)。它很有魅力，并且有一个线程安全的`abort`方法，如此[处所述](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/fundamentals.html#d5e286)。

# session - 用户会话超时时，csrf 令牌无效

> ID：13161257
> 
> 赞同：0
> 
> 时间：2012-10-31T15:20:00.330
> 
> 标签：session, csrf, cherrypy

使用这个烧瓶示例在我的cherrypy应用程序中为我的所有网站表单实现一个csrf令牌......

[烧瓶 csrf 令牌示例](http://flask.pocoo.org/snippets/3/)

但是，当用户的会话超时时，会话中的 csrf 令牌变为无。

```
token = cherrypy.session.get('csrf_token')
if token is None or token != cherrypy.request.params['csrf_token']:
    raise cherrypy.HTTPError(403) 
```

我该如何解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T23:14:17.783

无需解决此问题，因为您描述的行为是正确的。如果 csrf 令牌持续存在很长时间，它就不是很有用 - 整个想法是它不能重复使用，至少不能在很长一段时间内重复使用。

# azure - Azure 计算时间

> ID：13161258
> 
> 赞同：3
> 
> 时间：2012-10-31T15:20:03.050
> 
> 标签：azure

我想在 Azure 上托管一个网站，但不完全了解计算时间与它的关系。我希望我的网站 24/7 可用，那么这是否意味着每天 24 小时的计算时间？

非常感谢您的帮助，

理查德·休斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T15:28:21.480

是的，这意味着一天有 24 个计算小时。这意味着每个实例每小时。

因此，如果您有两个实例 24 小时，您将有 48 个计算小时。

一个 24 小时的实例是 24 个计算小时。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-31T15:31:10.263

计算时间取决于您的网站消耗的资源量，即它获得多少流量与使用的带宽有关，它占用多少空间与磁盘空间有关，以及它需要多少处理能力与 CPU 时间有关。

查看此计算器以更好地了解在 Azure 上托管您的网站可能需要多少费用 - [https://www.windowsazure.com/en-us/pricing/calculator/?scenario=full](https://www.windowsazure.com/en-us/pricing/calculator/?scenario=full)

# android - 在 Android 2.3.x 中选择元素不更新

> ID：13161261
> 
> 赞同：2
> 
> 时间：2012-10-31T15:20:14.727
> 
> 标签：android, html, select

我们有一个通过 JS 动态构建元素的 Web 应用程序。我们正在测试移动可用性，并发现在运行 2.3.x 版本的 Android 的设备上，我们的选择元素行为有点奇怪。触摸选择元素将调出通常的选项单选按钮列表，触摸选项将选择它并返回页面视图。但是，选择框中显示的选项不会更新。它仍然显示选项列表中的顶部元素。当页面重新加载时，行为是正常的。我尝试在列表顶部添加一个额外的空元素，并在构建元素时将其设置为选中状态，这似乎解决了某些设备上的问题，但我们的 QA 测试人员说该行为仍然存在于其他设备上。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-19T03:07:28.323

如果您正在寻找要研究的区域，那么在任何 Android 2.3.x 浏览器中使用 fastclick 库时，我都会遇到类似的选择元素问题。该问题是由 fastclick 中的一个 hack 引起的，以便它在 Android Chrome 下更好地工作。本机浏览器的修复程序至今尚未合并 ( [https://github.com/ftlabs/fastclick/pull/190](https://github.com/ftlabs/fastclick/pull/190) )。

另一方面，一旦你开始添加各种各样的日常事物——CSS 动画、不透明度、屏幕外的负边距等，Android 2.x 可能会在意想不到的地方成为一场噩梦

# sql - 将 varchar 转换为数字数据类型的算术溢出错误。'10' <= 9.00

> ID：13161264
> 
> 赞同：9
> 
> 时间：2012-10-31T15:20:21.490
> 
> 标签：sql, sql-server-2008, tsql

下面是我正在使用的表结构和数据的一个子集。

```
CREATE TABLE #Test
(
     Val varchar(5)
    ,Type varchar(5)
)

INSERT #Test VALUES ('Yes','Text')
INSERT #Test VALUES ('10','Int')
INSERT #Test VALUES ('10.00','Float')
INSERT #Test VALUES ('9.00','Float')
INSERT #Test VALUES ('9','Int') 
```

我想编写一个查询，让我知道列“Val”是否<= 9.00（必须是数字数据类型）。我通过执行以下操作来做到这一点：

```
SELECT *
FROM
    (
        SELECT Val
        FROM #Test
        WHERE Type = 'Int'
    ) IntsOnly
WHERE IntsOnly.Val <= 9.00 
```

这给了我一个算术溢出错误。但是，如果我排除值为“10”的数据行：

```
SELECT *
FROM
    (
        SELECT Val
        FROM #Test
        WHERE Type = 'Int'
        AND Val <> '10'
    ) IntsOnly
WHERE IntsOnly.Val <= 9.00 
```

它可以正常工作。**我的问题不是如何解决这个问题，因为我知道我可以简单地将数据转换为我需要的格式。**

我的问题是为什么“Val”列中的“10”值返回错误。当然，逻辑应该只返回“False”并简单地排除行，因为“10”（我假设它是隐式转换的）大于 9.00。

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-31T15:32:12.273

这会产生算术溢出，因为它试图将`Val`列隐式转换为 NUMERIC(3,2)，这自然会溢出像 10 这样的 2 位值。

它使用 NUMERIC(3,2) 作为目标类型和大小，因为这是`9.00`看起来适合的最小数字。

当然，解决方案是使用显式 CASTing 而不是隐式进行

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T15:31:14.620

来自[BOL](http://msdn.microsoft.com/en-us/library/ms187746.aspx)：

> 在 Transact-SQL 语句中，带小数点的常量会自动转换为数值数据值，使用所需的最小精度和小数位数。例如，常数 12.345 被转换为精度为 5、小数位数为 3 的数值。

这意味着您的常量`9.00`将具有~~1 的精度和 0~~的小数位数、3 的精度和 2 的小数位数，因此它无法存储值`10`，它需要的最小精度为`2 + scale`。

您需要`IntsOnly.Val`用 a`CAST`或包裹`CONVERT`以指定正确的精度和比例。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-10-01T08:41:59.737

试试这个……它对我有用

```
 CAST(CAST(@UR_VARIABLE AS FLOAT) AS NUMERIC(3,2)) 
```

# objective-c - 如何定义和发送将 UIBarButtonItems 动态添加到 UIToolbar 的方法\消息？

> ID：13161267
> 
> 赞同：1
> 
> 时间：2012-10-31T15:20:22.170
> 
> 标签：objective-c, ios, methods, uitoolbar, receiver

我已经将 UIBarButtonItem 动态添加到 UIToolBar，现在我正在尝试将其实现为一种方法`-(void)AddBarButton:withTitle (NSString*)title`并从事件处理程序中调用它（单击 UISearchBar 搜索结果行）。问题是我不知道如何实现将 UIBarButton 添加为单独的方法，最重要的是如何调用它（发送）？谁将成为这条消息的接收者？ `[self.toolBar addButton]`不工作。

我想为这个对于专业 iOS 开发人员可能很愚蠢的问题道歉，因为我是一名 C++\Java 程序员 7 年，现在我必须在短时间内制作一个没有任何经验的 iOS 项目。所以我真的需要帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:36:58.273

我建议为您的方法添加更多参数以使其更灵活（如果您不想要或不需要，您可以从声明中删除它们并在方法实现中用固定值替换它们）。示例实现可能如下所示：

```
- (void)addBarButtonWithTitle:(NSString *)title style:(UIBarButtonItemStyle)style target:(id)target action:(SEL)action animated:(BOOL)animated
{
    UIBarButtonItem *newButton = [[UIBarButtonItem alloc] initWithTitle:title style:style target:target action:action];
    NSMutableArray *items = [self.toolBar.items mutableCopy];
    [items addObject:newButton];

    [self.toolBar setItems:items animated:animated];
} 
```

然后在您的事件处理程序中调用（根据需要修改参数）：

```
[self addBarButtonWithTitle:@"someTitle" style:UIBarButtonItemStyleBordered target:self action:@selector(someMethod:) animated:YES]; 
```

# android - 禁用特定版本，例如 Honeycomb / 3.1

> ID：13161270
> 
> 赞同：4
> 
> 时间：2012-10-31T15:20:39.570
> 
> 标签：android

有没有办法从 Google Play 禁用特定版本。例如从 Google Play 隐藏/禁用 Honeycomb 3.1 版？

目前我有

```
<supports-screens 
    android:smallScreens="true"
    android:normalScreens="true"
    android:largeScreens="true"
    android:xlargeScreens="true"
    android:anyDensity="true"/> 

<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="10"/> 
```

但我不希望 3.1 版本的用户看到我的应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T15:36:14.473

In google play you can upload multiple apk's, so that you can have different versions to target different platforms (perhaps you have a version with newer sdk features, but you keep another version built for older phones w/ different features)... you could have two, with the same code: one that targets below up to 3.x, and the other that targets above... you'll then have to maintain two apk's with the same code, of course. Also I don't think it prevents them from side-loading, it just filters it out of their results on the play store app.

Suppose you want to block only 3.1, and you support from 1.5+ up to 4.1 For one apk, you'll have:

```
<uses-sdk android:minSdkVersion="3" 
      android:targetSdkVersion="16"
      android:maxSdkVersion="10" /> 
```

And for the other:

```
<uses-sdk android:minSdkVersion="12" 
      android:targetSdkVersion="16"
      android:maxSdkVersion="16" /> 
```

Of course, adjust the targets and bounds as they make sense. It might be grumpy if max < target, I'm not sure. And keep in mind target sdk compatibilities..

AS a follow up, here's some insight from the documentation on multiple apk's:

> API level This is based on your manifest file's element. You can use both the android:minSdkVersion and android:maxSdkVersion attributes to specify support for different API levels. For example, you can publish your application with one APK that supports API levels 4 - 7 (Android 1.6 - 2.1)—using only APIs available since API level 4 or lower—and another APK that supports API levels 8 and above (Android 2.2+)—using APIs available since API level 8 or lower. Note: If you use this characteristic as the factor to distinguish multiple APKs, then the APK with a higher android:minSdkVersion value must have a higher android:versionCode value. This is also true if two APKs overlap their device support based on a different supported filter. This ensures that when a device receives a system update, Google Play can offer the user an update for your application (because updates are based on an increase in the app version code). This requirement is described further in the section below about Rules for multiple APKs. You should avoid using android:maxSdkVersion in general, because as long as you've properly developed your application with public APIs, it is always compatible with future versions of Android. If you want to publish a different APK for higher API levels, you still do not need to specify the maximum version, because if the android:minSdkVersion is "4" in one APK and "8" in another, devices that support API level 8 or higher will always receive the second APK (because it's version code is higher, as per the previous note).

[http://developer.android.com/guide/google/play/publishing/multiple-apks.html](http://developer.android.com/guide/google/play/publishing/multiple-apks.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-31T15:40:00.697

您可以使用`maxSdkVersion="11"`（但您也排除了 Android 3.2 和 Android 4.x）；我不确定这是否适合您的需求。

# css - 将 primefaces 对话框置于屏幕中央

> ID：13161272
> 
> 赞同：1
> 
> 时间：2012-10-31T15:20:51.257
> 
> 标签：css, user-interface, dialog, datatable, primefaces

不同页面中有很多对话框，为了将它们定位在屏幕的中心，我想应用一个 css。然而这并没有奏效。

```
 .ui-dialog{
    position: fixed;
    top: 50%;
    left: 50%;
    margin-top: -50px;
    margin-left: -100px;
  } 
```

在将 .ui-dialog-content、ui-dialog-titlebar 添加到 css 时，对话框的某些部分显示在左上角，一些在中心，还有一些重叠。如何使对话框在屏幕中央弹出。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T14:32:53.657

您不应该使用 CSS 将 primefaces 对话框居中。默认情况下，它们是居中的。所以我建议您删除任何自定义 css 以使对话框居中，如果仍然对话框未居中，则向 primefaces 提交问题。

# node.js - MongoDB Upsert 添加到数组

> ID：13161276
> 
> 赞同：1
> 
> 时间：2012-10-31T15:21:02.737
> 
> 标签：node.js, mongodb, typescript

我正在尝试使用在 NodeJS 中运行的一些打字稿代码在 mongodb 文档中插入/更新字符串数组。以下代码是打字稿，但我猜 JS 开发人员会得到它而没有任何问题：

```
export function addEvents(entityId: string, 
                          events: string[] , 
                          callback: () => void) {

   db.collection('events', function(error, eventCollection) {
       if(error) { 
           console.error(error); return; 
       }
       eventCollection.update({ _id: entityId }, { "$pushAll ": 
       { events: events }},
           function(error, result) {
               if(error) { 
                   console.error(error); return; 
               }
               callback();
           });
   });
} 
```

该文件具有以下结构：

```
{
    _id : string
    events : ["array","of","strings"]
} 
```

我只是想在现有数组的末尾为特定的_id附加一个数组字符串。

我不太明白是否应该使用 update、save、$push、$pushall 等。

有人可以解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:03:49.863

您的 update 和 $pushAll 的组合看起来像是您在这里所做的事情的最佳选择 - 它用于将数组附加到现有数组。$push 用于将元素添加到数组中。保存将涉及获取现有事件数组，附加到它，然后保存文档。

"$pushAll" 中的多余空间需要删除。它可能有引号：“$pushAll”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T15:49:34.637

如果我理解正确，问题是 pushAll 什么都不做或更新返回错误？也许在你的例子中复制粘贴错误，但我认为你在这里有错字。

```
{ "$pushAll ":  { events: events }} 
```

它应该是

```
{ $pushAll: { events: events }} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T07:24:26.637

发现问题，我需要将“{ upsert = true }”作为第三个参数传递给更新函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-25T05:38:13.717

在这种情况下，要实现“upsert”语义，您需要使用`$addToSet`. 如果要添加一组值，则需要输入[`$each`](http://docs.mongodb.org/manual/reference/operator/update/addToSet/)修饰符。从 mongo 外壳：

```
db.events.update(
    { _id: entityId },
    { $addToSet: { $each: events } }
) 
```

# spring - 无法在 Spring 3.0.6 中使用 CustomizableTraceInterceptor 启用日志记录

> ID：13161277
> 
> 赞同：2
> 
> 时间：2012-10-31T15:21:04.587
> 
> 标签：spring, jakarta-ee, logging, tomcat6, spring-3

我有一个非常简单的设置

我有一个`applicationContext.xml`这样的文件：

```
 <context:component-scan base-package="com.mkyong.common.controller" />

    <bean id="customizableTraceInterceptor"
        class="org.springframework.aop.interceptor.CustomizableTraceInterceptor">
        <property name="enterMessage" value="Entering $[methodName]($[arguments])" />
        <property name="exitMessage" value="Leaving $[methodName](): $[returnValue]" />
    </bean>
    <bean
        class="org.springframework.aop.framework.autoproxy.BeanNameAutoProxyCreator">
        <property name="beanNames">
            <list>
                <value>*Service</value>
            </list>
        </property>
        <!-- <property name="proxyTargetClass" value="true" /> -->
        <property name="interceptorNames">
            <list>
                <value>customizableTraceInterceptor</value>
            </list>
        </property>
    </bean>
    <mvc:annotation-driven />

    <bean id="wowService" class="org.daud.WowService" scope="prototype" />
</beans> 
```

控制器类也很简单：

```
@Controller
@RequestMapping("/welcome")
public class HelloController {

    @Autowired
    private WowService wowService;

    @RequestMapping(method = RequestMethod.GET)
    public String printWelcome(ModelMap model) {

        getWowService().printIt();
        model.addAttribute("message", "Spring 3 MVC Hello World");
        return "hello";

    }

    public WowService getWowService() {
        return wowService;
    }

    public void setWowService(WowService wowService) {
        this.wowService = wowService;
    }

} 
```

web.xml 是：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
         version="3.0" metadata-complete="true">

    <display-name>simple-form</display-name>

    <listener>
        <listener-class>
            org.springframework.web.context.ContextLoaderListener
        </listener-class>
    </listener>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/applicationContext.xml
        </param-value>
    </context-param>

    <servlet>
        <servlet-name>simple-form</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value></param-value>
        </init-param>
    </servlet>

    <servlet-mapping>
        <servlet-name>simple-form</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>

</web-app> 
```

`WowService`也很简单

```
public class WowService {

    public String printIt() {
        return "daud";

    }
} 
```

我有`spring jars of version 3.0.6`,`aopalliance-1.0.jar`和`commons-logging-1.1.1.jar`在我的 lib 文件夹中，没有别的。但是没有记录任何痕迹.. 即当我们进入 的方法`WowService`或离开它时，没有记录。我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:05:07.193

以下行：

```
new WowService().printIt(); 
```

不创建由容器（Spring）管理的对象，并且不考虑 bean 的定义。

豆定义：

```
<bean id="wowService" class="org.daud.WowService" scope="prototype" /> 
```

看起来不错，但你没有使用它。

将您的控制器更改为：

```
@Controller
@RequestMapping("/welcome")
public class HelloController {

    @Autowired
    WowService wowService;

    @RequestMapping(method = RequestMethod.GET)
    public String printWelcome(ModelMap model) {

        wowService.printIt();
        model.addAttribute("message", "Spring 3 MVC Hello World");
        return "hello";

    }
} 
```

# c# - 在没有 SQL Server 的情况下评估 c# 中的 SQL where 子句

> ID：13161280
> 
> 赞同：1
> 
> 时间：2012-10-31T15:21:10.863
> 
> 标签：c#, sql-server

我有大量条件（我不提前知道它们），我需要对一个相对较小的 SQL Server 表（< 10,000 行）进行计数。每个条件都采用 SQL where 子句的形式。目前，我构建了一个完整的sql语句，形式为“select count(*) from some_table where” + Where_Clause; 我让 SQL Server 将计数返回给我。我在一个循环中执行此操作以获得所有各种条件所需的所有计数。

当我需要运行数十或数百个计数时，我正在寻找加快速度的方法。我不知道这些声明提前。有些会选择整个表格，有些可能不会选择任何行。我尝试了以下解决方案：

1.  并行发出查询 - 即使没有进行任何锁定，改进也很小
2.  将它们写成 case 语句的复杂计数，这样我就可以在一个语句中运行多个 where 子句
3.  将许多查询作为 UNION 一起传递，并将结果作为一个结果集返回

这些选项都没有在运行时有显着的改进（有时它会运行得更慢），而且随着复杂性的增加，我觉得它们中的任何一个都不值得。

我的问题是：只需对它运行一个“select *”，我就可以非常快速地将整个表加载到 DataTable 对象中。如果我将整个表放在内存中，有没有办法在不来回 SQL Server 的情况下对它进行计数？我希望减少以下开销：网络、I/O、锁定等。

最复杂的 where 子句类似于：

```
a=1 or b in (2,3) or c<4 or d like '%5' or substring(e,2,1)='z' 
```

所以这不是微不足道的，尽可能多地支持 T-SQL 是理想的，但我认为 DataTable 的 .Select() 方法不支持这个 OR 是否非常快。因此，给定内存中的数据表，我可以使用 T-SQL 语法快速（或并行）行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T03:16:58.747

您可以考虑使用 LINQ to SQL，或者可能将查询构建为您可以执行的存储过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:38:51.700

要尝试的事情

a) 确保您拥有正确的索引 - 检查最复杂查询的查询计划，并确保其中没有表扫描。

b）使用类似的方法在同一个请求中执行多个查询。

```
var cmd = new SqlCommand(@"SELECT TOP 10 * FROM Foo; SELECT TOP 10 * FROM Bar", con))
var ad = new SqlDataAdapter(cmd);
var ds = new DataSet();
ad.Fill(ds);

var foo = ds.Tables[0];
var bar = ds.Tables[1]; 
```

# c# - 仅使用 switch-case 使用单选按钮更改背景色

> ID：13161282
> 
> 赞同：0
> 
> 时间：2012-10-31T15:21:19.087
> 
> 标签：c#, radio-button, switch-statement

我是 C# 的初学者，我有一个家庭作业。在表单中，我有一个带有 5 个单选按钮和数字向上/向下数天的组合框。当我更改数字时。up-down，backcolor 应该改变它之前选择的颜色。我只能使用开关盒。我管理了数字。上下，标签随之变化。但是我不能插入开关盒来改变颜色。实际上我不能命名开关。

```
 private void Form1_Load(object sender, EventArgs e)
        {
            label1.Text = "Pazartesi";

        }

        private void numericUpDown1_ValueChanged(object sender, EventArgs e)
        {
            byte sayi = Convert.ToByte(numericUpDown1.Value);

            switch (sayi)
            {
                case 1:
                    label1.Text="Pazartesi";
                    switch ( )
                    {
                        case renkbtn_1.Checked:
                            this.BackColor = Color.Red;
                            break;
                        case renkbtn_2.Checked:
                            this.BackColor = Color.White;
                            break;
                        case renkbtn_3.Checked:
                            this.BackColor = Color.Yellow;
                            break;
                        case renkbtn_4.Checked:
                            this.BackColor = Color.Blue;
                            break;
                        case renkbtn_5.Checked:
                            this.BackColor = Color.Green;
                            break;
                    }
                    break;
                case 2:
                    label1.Text="Salı";
                    break;
                case 3:
                    label1.Text = "Çarşamba";
                    break;
                case 4:
                    label1.Text = "Perşembe";
                    break;
                case 5:
                    label1.Text = "Cuma";
                    break;
                case 6:
                    label1.Text = "Cumartesi";
                    break;
                case 7:
                    label1.Text = "Pazar";
                    break; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:48:25.773

switch 语句不是这样工作的。

里面的大括号`switch ( )`应该是一个产生某个值的表达式（它*不是*一个“名称”，但可能是一个变量）。这些`case`s 必须具有（编译时）常量，这些常量会根据 switch 表达式中的值进行检查。

您将不得不将其重写为一堆`if`语句：

```
 if (renkbtn_1.Checked)
      this.BackColor = Color.Red;
  else if (renkbtn_2.Checked)
      this.BackColor = Color.White;
  else if (renkbtn_3.Checked)
      this.BackColor = Color.Yellow;
  else if (renkbtn_4.Checked)
      this.BackColor = Color.Blue;
  else if (renkbtn_5.Checked)
      this.BackColor = Color.Green; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:40:04.940

如果我理解了这个问题，你改变了上下值，你想将背景色设置为你选择的单选按钮的颜色。正确的？

如果是这种情况，您必须检查哪个单选按钮，然后正确设置颜色。

然后您可以遍历您的 groupbox 的控件以获取选中的收音机：

```
foreach (Control c in groupBox1.Controls)
            {
                if (c.GetType() == typeof(RadioButton))
                {
                    RadioButton rb = c as RadioButton;
                    if (rb.Checked)
                    {
                       //here you can either store the checked radio button in a variable to further check the color you need to set, or do the logic here.
                    }
                }
            }
} 
```

你的整个代码可能是这样的：

private void Form1_Load(object sender, EventArgs e) { label1.Text = "Pazartesi";

```
 }

    private void numericUpDown1_ValueChanged(object sender, EventArgs e)
    {
        byte sayi = Convert.ToByte(numericUpDown1.Value);

        switch (sayi)
        {
            case 1:
                label1.Text="Pazartesi";
                break;
            case 2:
                label1.Text="Salı";
                break;
            case 3:
                label1.Text = "Çarşamba";
                break;
            case 4:
                label1.Text = "Perşembe";
                break;
            case 5:
                label1.Text = "Cuma";
                break;
            case 6:
                label1.Text = "Cumartesi";
                break;
            case 7:
                label1.Text = "Pazar";
                break;
        }
        RadioButton selectedRadio = GetSelectedRadioButton();

        switch(selectedRadio.Name)
        { 
           case rankbtn_1.Name:
                this.BackColor = Color.Red;
                break;
           case rankbtn_2.Name:
                this.BackColor = Color.White;
                break;

           //Repeat for the other buttons.
        }

   }

   private RadioButton GetSelectedRadioButton()
   {
                foreach (Control c in groupBox1.Controls)
            {
                if (c.GetType() == typeof(RadioButton))
                {
                    RadioButton rb = c as RadioButton;
                    if (rb.Checked)
                    {
                       return rb;
                    }
                }
            }
   } 
```

# ruby-on-rails - Rails 远程表单在浏览器中呈现 json

> ID：13161283
> 
> 赞同：1
> 
> 时间：2012-10-31T15:21:26.187
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery

我有一个用于创建图像的远程表单。每次更改文件输入时，它都会提交表单。

```
<%= form_for Image.new, remote: true, multipart: true do |f| %>
  <!-- form omitted -->
<% end %> 
```

自动提交：

```
$("#new_image input[type=file]").on("change", function() {
  $("#new_image").submit();
}); 
```

创建图像并在图像控制器中渲染 json 就好了：

```
def create
  @image = Image.new params[:image]
  if @image.save
    render json: @image, status: :success
  else
    render json: @image.errors, status: :unprocessable_entity
  end
end 
```

问题是用户被重定向到 json 输出。怎么会这样？表单是远程的：true，所以它不应该重定向对吗？我只希望数据可用于不引人注目的回调。

我怎样才能让它工作？

**编辑**：application.js

```
//= require jquery
//= require jquery_ujs
//= require jquery-ui
//= require_tree . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:00:29.500

确保您包含帮助程序 javascript：

```
//= require jquery_ujs 
```

这应该在视图引用的 Javascript 文件之一中（或者您可以将其放在 application.js 中，假设您没有修改任何会阻止 application.js 被包含的内容）。如果不是这样，请使用 Firebug 或类似的开发人员工具并查找 JavaScript 错误或警告。

# vb.net - 您如何制作一个下拉列表以根据选择的其他下拉项目填充其列表？

> ID：13161284
> 
> 赞同：0
> 
> 时间：2012-10-31T15:21:26.333
> 
> 标签：vb.net, webforms

我在查询数据库的 vb.net 中有 3 个下拉菜单。我希望用户能够选择第一个下拉项目，并根据他/她的选择，第三个下拉菜单执行其各自的查询。我该怎么做？

```
cmdString = "select distinct t.desc, t.id " & _
                           " from Table t" & _                           
                '" where t.id=" & Me.ddFilter1.SelectedValue & _ 
```

我已经评论了我的命令字符串的一部分；我正在使用第一个下拉列表中的选定值，但是当我`Run to Cursor`保持不变时。我假设要更改的第三个下拉列表什么也没有显示，因为数据读取器是空的（因为它无法从 cmdstring 中的查询中获取任何内容）

当用户从第一个下拉列表中选择不同的项目时，为什么我的第一个下拉列表（ddFilter1）中的 selectedValue 不会改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:25:40.370

您可以切换第一个的选定项目。然后根据哪种情况用值填充下一个下拉列表？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:20:04.093

```
where t.id=" & Me.ddFilter1.SelectedItem.Value 
```

已解决问题。

# c# - 替换 int 中的字节

> ID：13161285
> 
> 赞同：4
> 
> 时间：2012-10-31T15:21:32.823
> 
> 标签：c#, bit-manipulation

一个 int 由 4 个字节组成。我怎么能用新字节替换这 4 个字节之一。换句话说，我正在寻找一种方法：

```
int ReplaceByte(int index, int value, byte replaceByte)
{
     // implementation
} 
```

例如，如果我有值`FFFFFFFF`(-1) 并且我想`0`用`0A`(10) 替换字节，那么我将调用该方法：

`ReplaceByte(0,-1,10)`

我会喜欢那种方法来回报我`FFFFFF0A`

我是否必须将 int 转换为字节数组，然后替换我想要的字节，然后再转换回 int？我正在寻找一种有效的方法来做到这一点。我们正在创建一个类似于调试器的程序，它连接到一个目标（板），我们非常频繁地更新这些值。

## 编辑（结果）

**感谢您的回答，我比较了以下方法：**

结果如下：

![在此处输入图像描述](../Images/67e3aa0a61840cb47c37b594654c1993.png)

**注意我的实现是最慢的！**

这是代码：

```
 static void Main ( string[ ] args )
    {
        byte[ ] randomBytes = new byte[ 1024 * 1024 * 512 ]; 

        Random r = new Random( );
        r.NextBytes( randomBytes );

        Int64 sum;
        var now = DateTime.Now;

        Console.WriteLine( "Test 1" );
        sum = 0;
        now = DateTime.Now;
        foreach ( var bt in randomBytes )
        {
            sum += ReplaceByte1( 1 , -1 , bt );
        }

        Console.WriteLine( "Test 1 finished in {0} seconds \t hash = {1} \n" , ( DateTime.Now - now ).TotalSeconds, sum );

        Console.WriteLine( "Test 2" );
        sum = 0;
        now = DateTime.Now;
        foreach ( var bt in randomBytes )
        {
            sum += ReplaceByte2( 1 , -1 , bt );
        }

        Console.WriteLine( "Test 2 finished in {0} seconds \t hash = {1} \n" , ( DateTime.Now - now ).TotalSeconds,  sum );

        Console.WriteLine( "Test 3" );
        sum = 0;
        now = DateTime.Now;
        foreach ( var bt in randomBytes )
        {
            sum += ReplaceByte3( 1 , -1 , bt );
        }

        Console.WriteLine( "Test 3 finished in {0} seconds \t hash = {1} \n" , ( DateTime.Now - now ).TotalSeconds , sum );

        Console.Read( );            
    }

    // test 1
    static int ReplaceByte1 ( int index , int value , byte replaceByte )
    {
        return ( value & ~( 0xFF << ( index * 8 ) ) ) | ( replaceByte << ( index * 8 ) );
    }

    // test 2
    static int ReplaceByte2 ( int index , int value , byte replaceByte )
    {
        // how many bits you should shift replaceByte to bring it "in position"
        var shiftBits = 8 * index;

        // bitwise AND this with value to clear the bits that should become replaceByte
        var mask = ~( 0xff << shiftBits );

        // clear those bits and then set them to whatever replaceByte is
        return value & mask | ( replaceByte << shiftBits );
    }

    // test 3
    static int ReplaceByte3 ( int index , int value , byte replaceByte )
    {
        var bytes = BitConverter.GetBytes( value );
        bytes[ index ] = replaceByte;

        return BitConverter.ToInt32( bytes , 0 );
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T15:24:10.413

不，没有字节数组。这其实很简单。

未测试：

```
int ReplaceByte(int index, int value, byte replaceByte)
{
    return (value & ~(0xFF << (index * 8))) | (replaceByte << (index * 8));
} 
```

首先它清除指定索引处的空间，然后将新值放入该空间。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T15:24:27.887

您可以简单地使用一些按位算术：

```
// how many bits you should shift replaceByte to bring it "in position"
var shiftBits = 8 * index;

// bitwise AND this with value to clear the bits that should become replaceByte
var mask = ~(0xff << shiftBits);

// clear those bits and then set them to whatever replaceByte is
return value & mask | (replaceByte << shiftBits); 
```

# c# - 使用 PowerShell 在 ac# 结构中设置值

> ID：13161286
> 
> 赞同：6
> 
> 时间：2012-10-31T15:21:32.923
> 
> 标签：c#, powershell, pinvoke

我已经将一些 DHCP Win32 Api 翻译成 C#，所以我可以使用来自 PowerShell 的：

```
$definition = @"
using System;
using System.Collections.Generic;
using System.Text;
using System.Runtime.InteropServices;
using System.Net;

namespace Dhcpsapi
{

    public enum DHCP_SEARCH_INFO_TYPE : int
    {
        DhcpClientIpAddress = 0,
        DhcpClientHardwareAddress = 1,
        DhcpClientName = 2
    };

    [StructLayout(LayoutKind.Sequential)]
    public struct DHCP_BINARY_DATA
    {
        public uint DataLength;
        public IntPtr Data;
    };

    [StructLayout(LayoutKind.Sequential)]
    public struct DHCP_IP_ADDRESS
    {
        public UInt32 IPAddress;
    }

    [StructLayout(LayoutKind.Explicit, Size=8)]
    public struct SearchInfo
    {
        [FieldOffset(0)]
        public DHCP_IP_ADDRESS ClientIpAddress;
        [FieldOffset(0)]
        public DHCP_BINARY_DATA ClientHardwareAddress;
        [FieldOffset(0)]
        public IntPtr ClientName; //LPWSTR
    }

    [StructLayout(LayoutKind.Sequential)]
    public struct DHCP_SEARCH_INFO
    {
        public DHCP_SEARCH_INFO_TYPE SearchType;
        public SearchInfo SearchInfo;
    }

    [StructLayout(LayoutKind.Sequential)]
    public struct DATE_TIME
    {
        public UInt32 dwLowDateTime;
        public UInt32 dwHighDateTime;

        public DateTime ToDateTime()
        {
            if (dwHighDateTime == 0 && dwLowDateTime == 0)
            {
                return DateTime.MinValue;
            }
            if (dwHighDateTime == int.MaxValue && dwLowDateTime == UInt32.MaxValue)
            {
                return DateTime.MaxValue;
            }
            return DateTime.FromFileTime((((long)dwHighDateTime) << 32) | dwLowDateTime);
        }
    }

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
    public struct DHCP_HOST_INFO
    {
        public uint IpAddress;
        public string NetBiosName;
        public string HostName;
    }

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
    public struct DHCP_CLIENT_INFO
    {
        public uint ClientIpAddress;
        public uint SubnetMask;
        public DHCP_BINARY_DATA ClientHardwareAddress;
        [MarshalAs(UnmanagedType.LPWStr)]
        public string ClientName;
        [MarshalAs(UnmanagedType.LPWStr)]
        public string ClientComment;
        public DATE_TIME ClientLeaseExpires;
        public DHCP_HOST_INFO OwnerHost;
    }

    public static class PS
    {

        [DllImport("Dhcpsapi.dll")]
        public static extern uint DhcpGetClientInfo(
            [MarshalAs(UnmanagedType.LPWStr)]
            string ServerIpAddress,
            [MarshalAs(UnmanagedType.Struct)]
            ref DHCP_SEARCH_INFO SearchInfo,
            out IntPtr ClientInfo);

        [DllImport("dhcpsapi.dll", SetLastError=true)]
        public static extern void DhcpRpcFreeMemory(IntPtr BufferPointer);
    }
}
"@

Add-Type -TypeDefinition $definition -PassThru 
```

现在我尝试从 PowerShell 中使用它：

```
$dsi = New-Object dhcpsapi.DHCP_SEARCH_INFO
$dsi.SearchType = [Dhcpsapi.DHCP_SEARCH_INFO_TYPE]::DhcpClientIpAddress
$ipa = [System.Net.IPAddress]::Parse("10.4.3.101")
$ip = [UInt32][System.Net.IPAddress]::NetworkToHostOrder([int][System.BitConverter]::ToUInt32($ipa.GetAddressBytes(), 0))

# $ip is now 168035173
$dsi.SearchInfo.ClientIpAddress.IPAddress = $ip

#however $dsi.SearchInfo.ClientIpAddress.IPAddress is 0
$dsi.SearchInfo.ClientIpAddress.IPAddress 
```

在运行 $dsi.SearchInfo.ClientIpAddress.IPAddress 之后，我期望的是 0 而不是 168035173 。为什么会发生这种情况（它按 C# 的预期工作）以及如何使其工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T15:47:45.647

SearchInfo 是一个结构，所以当你这样做时：

```
#however $dsi.SearchInfo.ClientIpAddress.IPAddress is 0
$dsi.SearchInfo.ClientIpAddress.IPAddress 
```

那么您正在创建 SearchInfo 的副本，并且该副本上的值正在发生变化。对于每个结构，您需要改变结构，然后将其分配回：

```
$clientIpAddress = $dsi.SearchInfo.ClientIpAddress
$clientIpAddress.IPAddress = $ip

$searchInfo = $dsi.SearchInfo
$searchInfo.ClientIpAddress = $clientIpAddress

$dsi.SearchInfo = $searchInfo 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T17:36:00.703

问题是您使用的是值类型的结构，而不是引用类型。通过 PowerShell`'.'`运算符访问这些成员时，它会返回该结构成员的副本，并且值分配发生在该副本上，并且永远不会将其放入您尝试修改的对象中。

这是一个较小的示例，可以证明这一点：

```
> add-type @"
namespace TestStructs {
    public struct Inner {
        public int i;
    };
    public class Outer {
        public Inner i;
    }
}
"@
$s = new-object TestStructs.Outer 
```

我创建了一个`Outer`具有`Inner`struct 作为 member的类`i`。如果我尝试分配值，我会得到您所看到的行为，它保持为 0：

```
> $s.i.i
0

> $s.i.i = 6

> $s.i.i
0 
```

解决这个问题的方法是分配整个结构。因此，对于这个简单的案例，我可以创建一个新结构，设置值，然后将其分配给我要修改的对象：

```
> $new_inner = new-object TestStructs.Inner
> $new_inner.i
0

> $new_inner.i = 6
> $new_inner.i
6

> $s.i = $new_inner
> $s.i.i
6 
```

我可以使用一些速记来做到这一点：

```
> $s.i = new-object TestStructs.Inner -prop @{ i = 7 }
> $s.i.i
7 
```

但是，如果结构中有很多值，这可能不切实际。因此，您还可以将其保存为临时值，然后重新分配：

```
> $s.i = &{ $temp = $s.i; $temp.i = 10; $temp }

H:\
> $s.i.i
10 
```

# asp.net - 使用成员资格时出现不受信任的域错误

> ID：13161287
> 
> 赞同：2
> 
> 时间：2012-10-31T15:21:40.157
> 
> 标签：asp.net, asp.net-membership

我正在尝试开发一个具有注册和登录功能的 ASP.NET 网站。为此，我按照本指南使用会员资格：

[http://msdn.microsoft.com/en-us/library/ff648345.aspx](http://msdn.microsoft.com/en-us/library/ff648345.aspx)

我已经运行`Aspnet_regsql.exe`并设置了数据库，并且还通过`Web.config`文件进行了更改以反映这一点：

```
<connectionStrings>
    <add name="MsSqlConnection" connectionString="Data Source=fostvm;Initial Catalog=db_74;User ID=user74;password=mypassword;Integrated Security=SSPI;" />
</connectionStrings>
<authentication mode="Forms">
  <forms loginUrl="Account/Login.aspx"
         protection="All"
         timeout="30"
         name="AppNameCookie"
         path="/FormsAuth"
         requireSSL="false"
         slidingExpiration="true"
         defaultUrl="default.aspx"
         cookieless="UseCookies"
         enableCrossAppRedirects="false" />
</authentication>
<authorization>
  <deny users="?" />
  <allow users="*" />
</authorization>
<membership defaultProvider="SqlProvider" userIsOnlineTimeWindow="15">
  <providers>
    <clear />
    <add
      name="SqlProvider"
      type="System.Web.Security.SqlMembershipProvider"
      connectionStringName="MsSqlConnection"
      applicationName="WebSite10"
      enablePasswordRetrieval="false"
      enablePasswordReset="true"
      requiresQuestionAndAnswer="true"
      requiresUniqueEmail="true"
      passwordFormat="Hashed" />
  </providers>
</membership> 
```

加载登录或注册页面时我没有收到任何错误，但是当我尝试使用虚拟帐户数据登录时，我收到此错误：

```
Login failed. The login is from an untrusted domain and cannot be used with Windows authentication. 
```

我用谷歌搜索了它，发现了来自不同论坛和博客的大量线程，但没有任何解决方案有效。

我错过的配置中是否有任何明显的错误？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T20:15:44.670

我的猜测是，在你的连接字符串中你有。

`Data Source=fostvm;Initial Catalog=db_74;User ID=user74;password=mypassword;Integrated Security=SSPI;`

有人可以纠正我，当您`Integrated Security=SSPI`指定时，将`User ID`忽略`password`and 并使用 Windows 身份验证？在这种情况下，最有可能的是应用程序池帐户，甚至可能是 IUSR_Account，用于匿名访问，它可能对您的数据库没有权限。

所以总结一下 - 尝试`Integrated Security=SSPI`从连接字符串中删除，或将其替换为 `Integrated Security=false`

# .net - 如何高效查询事件查看器

> ID：13161289
> 
> 赞同：1
> 
> 时间：2012-10-31T15:21:42.870
> 
> 标签：.net, optimization, filtering, event-viewer

我可以轻松地写入事件日志并读取其内容。但是，我希望能够仅查询事件查看器的一个子集，主要是我在特定时间范围内创建的源。

据我所知，可以按机器名称和来源进行过滤（由于某种原因，我还没有让它工作，它总是从应用程序日志中返回所有内容），但不能按日期和时间。

我能够使用 LINQ 轻松做到这一点。但是，它仍然会查看整个应用程序日志，因此需要一段时间。随着时间的推移，我猜事件查看器中的事件数量会越来越大，所以我看不到会变得更好。

有没有办法通过比通常参数更多的参数来查询事件查看器以加快进程，还是我必须“忍受它”？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:41:02.510

我用 WMI 做了一些测试，当我得到一小部分结果时，结果证明这是一个足够好的解决方案。

```
Dim oMag As New Management.ManagementObjectSearcher("SELECT User, Type,TimeGenerated,Message FROM Win32_NTLogEvent WHERE LogFile = 'Application' AND SourceName = 'Journalisation' AND TimeGenerated >= '20121031180000.000000-000' AND TimeGenerated <= '20121031181500.000000-000'")
Dim oMagColl As Management.ManagementObjectCollection = oMag.Get

For Each oMagObj As Management.ManagementObject In oMagColl
    Msgbox(oMagObj("User") & vbTab & oMagObj("Type") & vbTab & oMagObj("TimeGenerated") & vbTab & oMagObj("Message"))    
Next 
```

只是觉得我觉得奇怪的是日期时间格式。此外，有时感觉整个事情都需要很长时间，没有明显的原因。

无论如何，我认为这是一个很好的解决方案。

# jquery - jQuery 实时点击事件上的错误 event.target

> ID：13161293
> 
> 赞同：3
> 
> 时间：2012-10-31T15:21:45.497
> 
> 标签：jquery

当我使用以下内容为单击事件注册处理程序时：

```
$('.drilldown-action > li').live('click', function(event){
    drilldown.loadActions($(event.target));
}); 
```

使用 HTML：

```
<ul class="drilldown-action">
    <li data-action="Dummy"><a href="#">Dummy</a> Dum</li>
</ul> 
```

在浏览器中（使用 Chrome）我点击`a`标签，我怎样才能获得注册事件的 jQuery 对象？我希望`li`元素成为事件目标，因为这就是我放入选择器的内容。我知道我可以只`.parent()`用于这种情况，但是有没有办法获取与选择器匹配的对象，而不是底部事件目标？使用`.parent()`也很痛苦，因为当单击其他部分时`li`，我不必使用它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T15:22:53.427

`e.target`是链接标签。

您应该使用`this`来获取`li`绑定到处理程序的元素的标签。

**代码：**

```
$('.drilldown-action > li').live('click', function(event){
    drilldown.loadActions($(this));
}); 
```

**注意：**从 jQuery 1.7 开始，该`.live()`方法已被弃用。用于`.on()`附加事件处理程序。旧版本 jQuery 的用户应该`.delegate()`优先使用`.live()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T15:23:23.380

是的，`this`就像在任何其他事件中一样使用。

```
drilldown.loadActions($(this)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-22T12:33:03.513

在这种情况下，我会确保我总是通过我想要的：

```
$('.drilldown-action > li').live('click', function(event){
    drilldown.loadActions($(event.target).closest('li'));
}); 
```

根据 jQuery api 文档，*closest()*将始终传递“li”元素：

> **描述：**对于集合中的每个元素，通过测试元素本身并向上遍历其在 DOM 树中的祖先来获取与选择器匹配的第一个元素。 [https://api.jquery.com/closest/](https://api.jquery.com/closest/)

# qt - 使用 ShaderEffectItem 的奇怪 alpha 混合结果

> ID：13161296
> 
> 赞同：3
> 
> 时间：2012-10-31T15:22:09.913
> 
> 标签：qt, glsl, qml, alphablending

我正在尝试使用`ShaderEffectItem`.

这是一个最小（非）工作示例：我有一个从红到白的渐变作为背景，并想在它上面绘制一个绿色的 200x200 正方形。这个正方形的 alpha 掩码在左边应该是 0.0，在右边框应该是 1.0，所以它应该在左边框是透明的。

```
import QtQuick 1.1
import Qt.labs.shaders 1.0

Rectangle {
    width: 300
    height: 300

    id: wrapper

    gradient: Gradient {
        GradientStop { position: 0.0; color: "red" }
        GradientStop { position: 1.0; color: "white" }
    }

    Rectangle {
        id: square
        anchors.centerIn: parent
        width: 200
        height: 200
        color: "green"
    }

    ShaderEffectItem {
        anchors.centerIn: parent
        width: 200
        height: 200

        property variant source: ShaderEffectSource {
            sourceItem: square
            hideSource: true
        }

        fragmentShader: "
        varying vec2 qt_TexCoord0;
        uniform sampler2D source;
        void main(void)
        {
            vec4 sourceColor = texture2D(source, qt_TexCoord0);
            float alpha = qt_TexCoord0.x; // = 0.0 at left, 1.0 at right border
            sourceColor.a *= alpha;       // apply alpha mask
            gl_FragColor = sourceColor;
        }
        "
    }
} 
```

我期望以下输出（使用 GIMP 绘制）：

![预期结果](../Images/8c6114acb117f2b7951eb4380fbccd9c.png)

但这实际上显示了：

![实际结果](../Images/dec9f1c09e8d47a0e234d8079f743c35.png)

我究竟做错了什么？

我正在使用**qmlviewer** (Qt 4.8.2) 显示带有选项的 QML 文件，`-opengl`以启用着色器效果。

也许这与我几周前发现[的 QGLFramebufferObjects 上的 alpha 混合的这种奇怪行为有关](https://stackoverflow.com/questions/12306894/wrong-alpha-blending-when-rendering-on-a-qglframebufferobject)......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T08:46:02.503

尝试将片段着色器的主要功能修改为：

```
 void main(void)
    {
        gl_FragColor = texture2D(source, qt_TexCoord0).rgba*qt_TexCoord0.x;
    } 
```

# silverlight - Silverlight DataField 标签内的粗体单字

> ID：13161301
> 
> 赞同：0
> 
> 时间：2012-10-31T15:22:22.673
> 
> 标签：silverlight, styles, label, datafield

想象一下，我的 Silverlight 应用程序中有一个简单的 DataField。像这样的东西：

```
<toolkit:DataField Label="This is my test label:">
  <TextBox ... etc... />
</toolkit:DataField> 
```

是否可以在上面的示例中设置标签的样式，以便只有“test”这个词是粗体的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:40:46.713

您可以在文本块标签内使用 Run 标签，如下所示：

```
<toolkit:DataField >
     <toolkit:DataField.Label>
         <TextBlock >This is my <Run FontWeight="Bold">test</Run>label</TextBlock>
     </toolkit:DataField.Label>  
    <TextBox ... etc... />
</toolkit:DataField> 
```

我希望它能修复你的铅。

# ios - 粘性导航菜单链接在 iPad 上不起作用

> ID：13161306
> 
> 赞同：1
> 
> 时间：2012-10-31T15:22:36.027
> 
> 标签：ios, css, ipad, anchor, css-position

我有一个粘性导航，当用户向下滚动页面时，它会固定在屏幕顶部。除了在 iPad 上，它运行良好。第一次单击它的链接时，它可以工作。但是在您单击一次链接后，当您单击任何其他链接时，它们将不起作用。

有任何想法吗？

[http://debourg-dev.ch/syselcloud/le-cloud-computing/](http://debourg-dev.ch/syselcloud/le-cloud-computing/)

非常感谢

# javascript - 当分数上升时，如何减少我的 setInterval？

> ID：13161310
> 
> 赞同：3
> 
> 时间：2012-10-31T15:22:51.957
> 
> 标签：javascript, setinterval

我正在制作一个类似于俄罗斯方块的小游戏。随着玩家得分的提高，我需要块落得更快我目前有这个代码：

```
setInterval(function(){
    if(gameOn == 1){
        gravity();
    }
},1000); 
```

这调用了我的重力函数，它使块下降并进行所有的碰撞检测等。

```
var time = 1000 - score;

setInterval(function(){
        if(gameOn == 1){
            hideStuff('hover');
            gravity();
            time = 1000 - score;
        }
    },time); 
```

我认为这样的事情可能会奏效，但似乎没有。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T15:25:26.330

每当您想更改延迟时，您都需要[清除间隔](https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval)并重新启动它：

```
window.icount = setInterval(function(){
    if(gameOn == 1){
        gravity();
    }
},1000);

var time = 1000 - score;

clearInterval(window.icount);
window.icount = setInterval(function(){
        if(gameOn == 1){
            hideStuff('hover');
            gravity();
            time = 1000 - score;
        }
    },time); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T15:25:57.487

你可以做一个`setTimeout`循环。这样，每次调用都`setTimeout`将反映对值所做的任何更改`time`

```
var time = 1000;

(function foo(){

  if(gameOn == 1){
    hideStuff('hover');
    gravity();
    time = 1000 - score;
  }

  setTimeout(foo,time);

}()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T15:25:15.263

您可以使用超时而不是间隔，并在回调结束时使用所需时间设置新的超时。这样您就不需要在每次想要更改时间时清除间隔。

像这样的东西：

```
// Some initial time to use
var time = 1000;
// Set the first timeout
setTimeout(callback, time);

function callback(){
    if(gameOn == 1){
        hideStuff('hover');
        gravity();
        time = 1000 - score;
        // Set a new timeout with your new time
        setTimeout(callback, time);
    }
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T15:26:18.843

您需要使用 setTimeout 而不是 setInterval，如下所示：

```
setTimeout (function play () {
   if (gameOn == 1){
     hideStuff('hover');
     gravity();
     time = 1000 - score;
     setTimeout (play, 1000 - score);
   }
}, 1000); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-31T15:30:13.773

如果第一个代码确实有效（但没有变得更快），这是一个答案，您还没有真正告诉我们发生了什么。

使用您的系统，由于计时器设置为零或更低，因此您无法在不破坏事物的情况下获得等于或超过 1000 的分数。我只是慢慢地减少每个“滴答”的时间，并有一个最小值（比如 100）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T15:26:02.557

您必须清除现有的计时器对象并使用修改后的时间创建一个新对象。

# java - Tomcat 7.0.32 cannot deploy my project

> ID：13161321
> 
> 赞同：2
> 
> 时间：2012-10-31T15:23:51.083
> 
> 标签：java, eclipse, tomcat, struts

I dont understand what should I do. I have tried to search google and here too but none of the solutions solved my problem.

```
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/strus2starter]]
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
    at java.util.concurrent.FutureTask.get(FutureTask.java:111)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/strus2starter]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    ... 7 more
Caused by: java.lang.IllegalArgumentException: Filter mapping specifies an unknown filter name struts2
    at 
```

the xml file

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="WebApp_ID" version="3.0">
    <display-name>strubs2Starter</display-name>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
        <welcome-file>index.htm</welcome-file>
        <welcome-file>index.jsp</welcome-file>
        <welcome-file>default.html</welcome-file>
        <welcome-file>default.htm</welcome-file>
        <welcome-file>default.jsp</welcome-file>
    </welcome-file-list>

<filter>
    <filter-name>struts</filter-name>
    <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
</web-app> 
```

I'm running mac os mountain lion 64, eclipse juno and I upload all the jars from struts to a library.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:29:22.850

this line say the root cause for the issue

```
 Caused by: java.lang.IllegalArgumentException: Filter mapping specifies an unknown filter name struts2 
```

This error occurs in the following situations:

```
your web.xml file has a <filter-mapping> with no matching <filter>. Each mapping must include a <filter-name> that matches a <filter-name> in a <filter> element.
your web.xml file has a correctly matched filter-mapping and filter element, but the filter-mapping appears before the filter. The filter-mapping must appear below the filter, because the file is parsed in order. 
```

Just googled and found this url. check and see whether it is useful to you

```
 http://wiki.metawerx.net/wiki/Java.lang.IllegalArgumentException

As per you web xml following is the correct one

<filter>
   <filter-name>struts2</filter-name>
      <filter-  class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:32:53.267

Your filter configuration is wrong. This is the correct one:

```
<filter>
  <filter-name>struts2</filter-name>
  <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
</filter>

<filter-mapping>
  <filter-name>struts2</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping> 
```

Your filter name is `struts` while it should be `struts2`, because in your configuration in `<filter>` configuration you have a filter named: `struts` and your are mapping it in `<filter-mapping>` with a name `struts2`. This filter is unknown, because there is no filter named `struts2`. Paste the configuration as above and everything should be fine.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T15:32:39.627

to the best of my knowledge some of your jars are from struts1 and some from struts2 , so please make sure you have added all jars either from struts1 or struts2

# html - TinyMCE 从 iframe 元素中剥离类属性

> ID：13161323
> 
> 赞同：2
> 
> 时间：2012-10-31T15:23:51.487
> 
> 标签：html, css, tinymce

我想使用类属性来定位特定的 iframe，以便使用 CSS 设置宽度。

iframe 是像这样嵌入的谷歌地图：

```
<iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.co.uk/?ie=UTF8&amp;t=m&amp;ll=52.8382,-2.327815&amp;spn=4.646012,9.338379&amp;z=6&amp;output=embed"></iframe> 
```

它们被复制并粘贴到 tinyMCE 的 HTML 源代码编辑器中。我需要对 iframe 应用一个类属性，但是在源编辑器上单击更新时它会被删除。

我已经尝试在配置中使用 valid_elements 和 extended_valid_elements 但对于 iframe [class] 都不起作用。

我正在运行 3.4.3 版。我下载了 3.5.7，它似乎有同样的问题。尽管 valid_elements 的文档声明支持类属性 (http://www.tinymce. com/wiki.php/Configuration:valid_elements）。

这是完整的配置：

```
tinyMCE.init({
    // General options
    mode : "specific_textareas",
    editor_selector : "formInputWysiwyg",
    theme : "advanced",
    plugins : "autolink,lists,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,wordcount,advlist",

    // Theme options
    theme_advanced_buttons1 : "bold,italic,strikethrough,formatselect,styleselect,undo,redo,|,code,|,fullscreen,",
    theme_advanced_buttons2 : "cut,copy,paste,pastetext,|,search,replace,|,bullist,numlist,|,blockquote,nonbreaking,|,charmap,media,|,link,unlink,anchor,image",
    theme_advanced_buttons3 : "",
    theme_advanced_buttons4 : "",
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    theme_advanced_statusbar_location : "bottom",
    theme_advanced_resizing : true,
    width : "500",
    height : "600",
    apply_source_formatting : true,
    remove_linebreaks: true,
    theme_advanced_blockformats : "p,blockquote,h1,h2,h3,h4,h5,h6",
    forced_root_block : false,
    plugin_preview_width : "1050",
    plugin_preview_height : "800",
    convert_urls : false,
    extended_valid_elements : "figure,figcaption",

    // Skin options
    skin : "o2k7",
    skin_variant : "silver",

    // Example content CSS (should be your site CSS)
    content_css : "/admin/includes/css/tinymce.css",

    // Drop lists for link/image/media/template dialogs
    template_external_list_url : "lists/template_list.js",
    external_link_list_url : "lists/link_list.js",
    external_image_list_url : "lists/image_list.js",
    media_external_list_url : "lists/media_list.js",

    // Style formats
    style_formats : [
        {title : 'Google Maps', selector : 'iframe', classes : 'google-maps-embed'},
        {title : 'Intro', selector : 'p', classes : 'intro'},
        {title : 'News Image', selector : 'img', classes : 'news-image'}
    ],
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:45:45.270

在 \tinymce\jscripts\tiny_mce\plugins\media\editor_plugin_src.js 中，我通过从第 12 行的 rootAttributes 中删除“类”然后使用 jscompress.com 缩小并替换了 editor_plugin.js 的内容来解决此问题文件（在同一文件夹中）。

改变：

```
 var rootAttributes = tinymce.explode('id,name,width,height,style,align,class,hspace,vspace,bgcolor,type') 
```

到：

```
 var rootAttributes = tinymce.explode('id,name,width,height,style,align,hspace,vspace,bgcolor,type') 
```

它在 3.5.8 中仍然是一个问题，并已将其作为错误提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:19:16.813

您是否启用了“媒体”插件？我看到了类似的问题，我想知道媒体插件是否干扰了编辑器对 HTML 元素的正常操作。我尝试创建一个 style_formats 选项来操作 iframe，但没有任何运气。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-21T08:45:17.333

对于遇到媒体插件冲突，但仍需要媒体插件的用户，可以在tinymce初始化时设置以下选项来消除冲突：

```
media_live_embeds: false 
```

在 tinymce v4.6.1 中测试

# c++ - Sublime Text 2 作为 C++ IDE 有用吗？[与。视觉工作室]

> ID：13161327
> 
> 赞同：6
> 
> 时间：2012-10-31T15:24:03.250
> 
> 标签：c++, visual-studio, ide, sublimetext2

我一直在花费大量时间试图找出构建 C++ 程序的方法。作为编辑器，我爱上了 Sublime Text 2，因为它非常强大且可扩展。但是，与此同时，开发 C++ 程序似乎需要像 Visual Studio 或 Codeblocks 这样的 IDE。

是否可以仅使用 Sublime Text 2 创建一个 c++ 程序，还是不推荐这样做？是否可以像使用 Visual Studio 一样将 Sublime Text 用作 IDE？

所有答案都表示赞赏:) 是的，我进行了广泛的研究；我在编程方面不是很有经验。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T15:44:35.503

您可以使用任何文本编辑器编写代码并使用单独的编译器构建它。一些人认为像 Visual Studio 这样的集成开发环境 (IDE) 很方便，因为它们将文本编辑器、项目管理和编译器打包在一起。

例如，当我在 Linux 上编写代码时，我使用[vim](http://www.vim.org/)编写代码并使用[gcc 编译器](http://gcc.gnu.org/)来构建它。

> 是否可以仅使用 SublimText 2 创建一个 c++ 程序，还是不推荐这样做？是否可以像使用 Visual Studio 一样将 Sublime Text 用作 IDE？

我推荐最适合你的东西。当我在 Windows 中时，我使用 Visual Studio 来构建我的项目，但我仍然通常使用我自己的编辑器 (vim) 来编写代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:30:05.877

Sublime Text 2 有一些类似 IDE 的功能，比如项目和“构建”，可以从编辑器内部执行其他程序。我在家里使用它来制作 C++ 项目，并在处理 HTML/Javascript 项目时使用它。

然而，与完整的 IDE 相比，缺少很多功能，例如 Visual Studios Intellisense 和向导，或集成调试器。

# asp.net - 在什么情况下 HttpContext.Current.Session 可以为空？

> ID：13161335
> 
> 赞同：6
> 
> 时间：2012-10-31T15:24:19.900
> 
> 标签：asp.net, .net, session, httpcontext

在什么情况下 HttpContext.Current.Session 可以为空？

我有一些asp.net 页面。

我只是想知道为什么我应该总是检查 Session 对象是否为 null ？

例如

```
public static object GetSession(string key)
{

if (HttpContext.Current.Session != null)
{

return HttpContext.Current.Session[key];

}

return null;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T15:28:09.720

查看此页面：[如果当前 ASP.NET 会话为空，我该怎么办？](https://stackoverflow.com/questions/1382791/asp-net-what-to-do-if-current-session-is-null). 它对可能性有很好的解释。

**编辑**

您很少会遇到不知道 Session 对象是否可用***并且***您想从中访问值的情况。在大多数情况下，包括其他答案提到的那些，*HttpContext.Current.Session[key]*将为空，但不是*HttpContext.Current.Session*本身。

在大多数日常编码场景中， Session 对象不会为空，并且您问题中的代码将是矫枉过正的。同样，如果您提前知道 Session 对象为空，您甚至不应该尝试访问它。

如果您的应用程序在不寻常的情况下访问 Session 对象，而该对象可能为空，也可能不为空，那么您的代码将是处理它的好方法，例如上面引用的问题中描述的那些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T15:29:15.387

*   如果 IIS 重置您的 Session 将变为空。
*   如果会话超时到期，它将变为空。
*   可能还有其他原因。

检查它的目的是防止您的页面在会话为空的情况下抛出丑陋的 NullReferenceException。例如，如果您检查它是否为空，则可以更新页面的会话，或重定向到登录页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T15:27:21.497

如果 sessionState 在 web.config 中关闭，它可能为 null

```
 <configuration>
  <system.web>
    <sessionState mode="Off" />
  </system.web>
</configuration> 
```

# javascript - 如何在 JavaScript 中将图像放大 x%（使用 jQuery）

> ID：13161339
> 
> 赞同：2
> 
> 时间：2012-10-31T15:24:36.970
> 
> 标签：javascript, jquery

我认为这应该是一件简单的事情，但我没有看到一个明确的方法来做到这一点。

我想这样当用户将鼠标悬停在图像上时，图像会变大 10%，然后当用户将鼠标移开时返回到其原始大小。

我想我会想要使用 jQuery`hover`函数，但我不知道要传递给`hover`.

```
$('.resizableImage').hover(makeBigger, returnToOriginalSize); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T15:32:44.263

jQuery 让您可以使用`+=`和`%`. 所以这两个人一起做你想做的事。

```
$('.resizableImage').hover(makeBigger, returnToOriginalSize);

function makeBigger() {
    $(this).css({height: '+=10%', width: '+=10%'});
}
function returnToOriginalSize() {
    $(this).css({height: "", width: ""});
} 
```

***演示：http:*** [//jsfiddle.net/rZaAE/](http://jsfiddle.net/rZaAE/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T15:30:14.097

例如，您可以使用 CSS3 转换属性来做到这一点

```
$('.resizableImage').hover(function(){
   $(this).css("transform", "scale(1.1, 1.1)");
}, function(){
   $(this).css("transform", "none");
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T15:32:29.127

如果没有 CSS3，您可以简单地使用`.width()`和`.height()`方法获取原始大小，将其存储在数据属性中并调整大小。在 mouseout 上只需恢复原始值。

```
var hoverRatio = 1.1;

$('.resizableImage').hover(function() {
    $(this).data('width', $(this).width());
    $(this).data('height', $(this).height());
    $(this).css({
        width: $(this).width() * hoverRatio,
        height: $(this).height() * hoverRatio 
    });
}, function() {
    $(this).css({
        width: $(this).data('width'),
        height: $(this).data('height')
    });
});​ 
```

见[演示](http://jsfiddle.net/5mnYL/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T15:35:30.863

您还应该在动画上使用停止，这样当用户在动画完成之前移出时它不会被打断

html:

```
<img src="http://placehold.it/350x150" class="resizableImage" width="350" height="150" />​ 
```

js：

```
$('.resizableImage').mouseenter(function() {
    $(this).stop().animate({ width: "+=10%", height: "+=10%" });
});

$('.resizableImage').mouseleave(function() {
    var x = $(this).attr('width'),
        y = $(this).attr('height');

    $(this).stop().animate({ width: x, height: y });
}); 
```

​</p>

这是一个小提琴：http: [//jsfiddle.net/tWdAK/1/](http://jsfiddle.net/tWdAK/1/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-31T15:40:50.987

你不能只用css做到这一点：

CSS

```
.resizable_img {
    position: relative; // needed for z-index to work
    width: 100%;
    height: auto; // will resize image proportionally

}

.resizable_img:hover {
    width: 120%;
    z-index: 1; // place image on top
}

.img_container {
    width: 25%;
    position: relative;
    overflow: visible; // stops images being shifted 
    float:left;
} 
```

HTML

```
<div class="contents">
    <div class="img_container">
        <img class="resizable_img" src="img.jpg">
    </div>
</div> 
```

[在这里](http://jsfiddle.net/bruno/yA2WC/3/)提琴

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T15:34:01.297

如果您不使用内联样式，则可以省略将旧值保存在数据中并使用样式 attr 代替。

```
$('.element').hover(function() {
    var el = $(this);
    el.attr('style','width:'+el.width() * 1.1 + 'px;height:'+el.height() * 1.1 + 'px;');   
}, function() {
    $(this).removeAttr('style');
});​ 
```

# php - 分解数组以生成两个变量，以便我可以从数据库表中获取信息以发送电子邮件

> ID：13161343
> 
> 赞同：0
> 
> 时间：2012-10-31T15:24:57.243
> 
> 标签：php, mysql, database, arrays, web

对，所以我在数据库的一个表中有一个数组。我需要将这个数组分开，这样我就可以使用其中的一部分从数据库中的另一个表中获取信息，然后发送一封包含该信息的电子邮件。

我在表格中的数组看起来像这样

30-1,

30 是产品 ID，1 是数量。（购买的商品数量）

我是个布偶，弄错了吗？

```
//Get product_id_array of item purchased
$sql = mysql_query("SELECT product_id_array FROM transactions WHERE id='$orderID'")or die(mysql_error());
while($row = mysql_fetch_array($sql)){
    $prod_quant_array = $row['product_id_array'];
}
//Explode prod_quant_array
(explode("-", $prod_quant_array));
$product_id = $prod_quant_array[0];
$product_quantity = $prod_quant_array[1]; 
```

我认为这会给我两个变量。 `$product_id`将是 30 和`$product_quantity`1

然后我尝试使用这些信息从另一个表中获取更多信息。

```
$sql = mysql_query("SELECT product_name, product_price FROM products WHERE id='$product_id'")or die(mysql_error());
while($row = mysql_fetch_array($sql)){
    $product_name = $row['product_name'];
    $product_price = $row['product_price'];
} 
```

如您所见，我的 WHERE 正在查看 $product_id 变量。因此，当我尝试发送电子邮件时，我收到了电子邮件，但看不到`$product_name`or `$product_price`。请忽略那些其他变量，它们在电子邮件中显示良好并且来自不同的查询。

```
/////// Send Email ///////
$to = "" . $payer_email . "";
$subject = "Confirmation of your order";
$message .= "Dear " . $first_name . " " . $last_name . ",

This is an email to confirm your recent purchase of goods with Bloodlust.

You have ordered: 

--------------------------------------------------
" . $product_name . ".

" . $product_price . "
--------------------------------------------------

Please keep this email for your records.

Please note that this is not a proof of transaction.

Thank you.";
$from = "no-reply@blood-lust.com";
$headers = "From:" . $from;
mail($to,$subject,$message,$headers); 
```

是我的 explode() 吗？或者是别的什么？

这绝对是在扼杀我的大脑，我已经做了好几个小时了。请帮忙！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T15:26:42.217

尝试`$prod_quant_array = explode("-", $prod_quant_array);`

作为旁注，您应该通过添加数量字段来真正规范您的数据库，并让当前字段仅包含产品 ID。这样，您还可以在同一个查询中加入产品价格，而不是发送另一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:28:50.007

我想你误解了 explode()

您需要将explode分配给一个变量，然后该变量将采用explode创建的一组值......

代替：

```
(explode("-", $prod_quant_array));
$product_id = $prod_quant_array[0];
$product_quantity = $prod_quant_array[1]; 
```

做：

```
$theArray = (explode("-", $prod_quant_array));
$product_id = $theArray[0];
$product_quantity = $theArray[1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T15:29:46.713

你有一个错误。换行

```
(explode("-", $prod_quant_array));
$product_id = $prod_quant_array[0];
$product_quantity = $prod_quant_array[1]; 
```

到

```
$prod_quant_array = explode("-", $prod_quant_array);
$product_id = $prod_quant_array[0];
$product_quantity = $prod_quant_array[1]; 
```

# c# - 为类提供不相交的功能

> ID：13161346
> 
> 赞同：0
> 
> 时间：2012-10-31T15:25:08.960
> 
> 标签：c#

我目前正在编写一个图表应用程序。我正在使用 Zedgraph 来显示 2D 图。在我的应用程序中，我需要显示大约 8 种不同类型的图表，每一种都需要提供略有不同的功能。

这里的问题是，有时我有一些大多数类将使用的“基本”功能，有时我有一些类将使用的“添加”功能，有时它是这些功能的混合体。最重要的是，图表中显示的数据再次脱节，视觉外观也脱节。

考虑以下可能适用于一个或多个图表的功能：

*   图表自动滚动的能力（使用实时数据）
*   图表可以在水平方向放大
*   图表在垂直方向上放大的能力
*   用户能够编辑图表中的点
*   用户选择数据区域的能力
*   用户可以更改图表的比例
*   图表“缩放以适应”的能力
*   拥有一个、两个、三个或四个垂直轴的能力
*   能够显示图表叠加
*   ETC

综上所述，一些功能适用于所有图表，一些适用于图表的子集，还有一些适用于单个图表。目前我看不到要实现的功能层次结构。

我当前的实现使用一个基类（提供我可以清楚地看到的全局功能），然后我在这个基类上有两个“分支”，但我现在陷入了如何在单个类上实现**不相交的功能上。**我不能使用抽象类，因为有时我需要从多个类继承，但我不想提供接口，因为代码完全相同。

那么，我在这里做什么？我是否可以使用扩展方法来启用特定功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:37:12.973

鉴于您拥有如此多的功能方面，它们看起来相当独立（任何特定图表都可以具有任何功能子集，或接近它），并且在我看来这些是事物的类型这可能会随着应用程序的变化而变化，您可能希望花一些前期时间来概括这一点，而不是在每个图表的基础上实现它们。

我会简单地制作一个通用的“图表”用户控件并实现*所有*功能。然后，对于每个功能，给它一个布尔属性来启用/禁用它。（即`IsHorizontalScrollable`, `IsVerticalScrollable`, `IsSelectionEnabled`, `ArePointsEditable`）然后表单的每个实际实例只需要设置更通用表单的适当属性以及它的实际数据。

# asp.net - 如果用户名包含正斜杠，我如何在 URL 中包含我的凭据？

> ID：13161348
> 
> 赞同：1
> 
> 时间：2012-10-31T15:25:14.047
> 
> 标签：asp.net, vb.net, url

我想像这样在我的网址中包含我的用户名和密码，`http://username:password@website/path/to/page.aspx`

但是，我的用户名包含域的斜线。像：`domain\user`

在这种情况下，我如何仍然通过 url 传递我的凭据？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:27:27.753

对其进行urlencode，例如`%5C`将被视为\

# vb.net - VB.NET - ArrayLists 数组

> ID：13161352
> 
> 赞同：0
> 
> 时间：2012-10-31T15:25:21.690
> 
> 标签：vb.net, visual-studio-2010, arraylist, vb.net-2010

我使用以下代码声明了一个包含 88 个数组列表的数组：

```
Dim Data_FRONT(88) As ArrayList 
```

然后我尝试使用以下代码向其中添加传入数据：

```
Dim Data_In(88) As Double
For i = 0 To 87
    Data_In(i) = 15 ' Hard-coding just to test it
Next

' ...

' Then later in the code after some processing 
For i = 0 To 87
    Data_FRONT(i).Add(Data_In(i))        
Next 
```

我收到以下运行时错误：“对象引用未设置为对象的实例。”

我什至尝试过这样做：

```
For i = 0 to 87
    Data_FRONT(i).Add(15) ' Hard-coding to test it
Next 
```

我仍然得到那个错误。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:29:00.997

您需要实际初始化每个数组列表：

```
For i = 0 To 87
    Data_FRONT(i) = new ArrayList() ' Initialize each ArrayList
    Data_FRONT(i).Add(Data_In(i))        
Next 
```

话虽如此，如果你总是存储一个双精度数组，为什么不只创建一个多维数组呢？

```
Dim Data(88,88) As Double = new Double(88, 88) 
```

# css - 100% 高度与浏览器缩放

> ID：13161354
> 
> 赞同：5
> 
> 时间：2012-10-31T15:25:25.223
> 
> 标签：css, drupal, browser, zooming, user-experience

我已经看过了，似乎没有另一篇帖子正是我正在寻找的，而且我在截止日期前完成这项工作，所以让我们看看我是否可以更好地解释它。

我们在使用面板和视图幻灯片的 Drupal 站点上有一个页面正在开发中。有很多绝对和固定位置元素，因为它们需要在页面上的位置。父 div 需要具有 100% 的宽度和高度才能填充页面。请记住，此页面的重点是没有滚动条，并且无论用户使用何种屏幕尺寸，都将所有内容呈现给用户。所以我有媒体查询清理需要在某些屏幕尺寸上的元素。

尽管当用户使用浏览器放大页面时，元素开始移动并相互堆叠。我相信这是因为 100% 的高度/宽度专门遵循窗口大小，并且在用户放大时不会超出窗口。

我能够通过删除 100% 并用像素替换它们来修复它，但这会成为一个问题，因为如果屏幕的高度或宽度不正确，那么你有滚动条并且用户不会立即看到所有内容在页面上。

在浏览器缩放期间，是否有任何 JavaScript 或任何可以利用 100% 高度/宽度并允许它们扩展到页面之外并打开滚动条的东西？

请记住，如果用户放大，页面溢出并显示滚动条是可以的，但默认屏幕是不允许的。

我希望这可以显示，但是使用 Javascript 缩放整个页面的页面示例几乎是我可以看到自己需要但不知道如何。

[http://www.ammunitiongroup.com/](http://www.ammunitiongroup.com/)

任何帮助表示赞赏，当然越快越好:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:12:29.737

这应该会有所帮助。让您检测现代浏览器中的浏览器缩放级别。 [https://github.com/yonran/detect-zoom](https://github.com/yonran/detect-zoom)

示例页面： [http ://htmldoodads.appspot.com/dimensions.html](http://htmldoodads.appspot.com/dimensions.html)

# mysql - mySQL 中的 NOT DISTINCT 查询

> ID：13161359
> 
> 赞同：3
> 
> 时间：2012-10-31T15:25:54.750
> 
> 标签：mysql, sql, database

我被要求在一个简单的员工数据库列上为此创建一个查询，包括：

ninumber - 名字 - 姓氏 - 地址 - SuperVisorNiNumber

员工和主管都在同一个表中，并由他们的 ninumber 引用。我被要求构建的查询是：

v. 查找员工的 NI 编号、员工的姓名和主管的 NI 编号，其中员工共享该主管并且员工和主管都在部门 8 工作。您将参考在实践 2 的查询 vi 中完成的两次员工关系. 您的结果应显示在标题为“员工 NI 编号”、“名字”、“姓氏”和“主管 NI 编号”的列中。

因此我创建了这个查询：

```
SELECT e1.ninumber,
       e1.fname,
       e1.minit,
       e1.lname,
       e1.address,
       e1.superNiNumber,
       COUNT(*) AS nrOfOccurences
FROM   employee AS e1,
       employee AS e2
WHERE  e1.dno = 8
   AND e1.superNiNumber = e2.ninumber
   AND e2.dno = 8
GROUP  BY e1.superNiNumber
HAVING COUNT(*) > 1 
```

我无法做一个不明确的查询来解决这部分问题——“员工在哪里共享那个主管”。此查询返回一组行，这些行又隐藏了我想要显示的一些行。

我的问题是：我的查询是否正确，我可以在 mySQL 中执行 NON DISTINCT 查询以使数据库返回所有字段而不是将它们组合在一起。

从我的查询中返回结果

```
NInumber    fname  minit    lname   address    supervisorNiNum     number of occerences
666666601   Jill    J   Jarvis  6234 Lincoln, Antrim, UK    666666600   2
666666607   Gerald  D   Small   122 Ball Street, Letterkenny, IRL   666666602   3
666666604   Billie  J   King    556 WAshington, Antrim, UK  666666603   2 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T15:35:08.593

In your result table column description, I see no `minit, address and number of occurrences`. Therefore I would simplify your select to:

```
SELECT e1.ninumber,
       e1.fname,
       e1.lname,
       e1.superNiNumber,
FROM   employee AS e1,
       employee AS e2
WHERE  e1.dno = 8
       AND e1.superNiNumber = e2.ninumber
       AND e2.dno = 8
       and (select count(*) from employee e3
            where e3.superNiNumber = e1.superNiNumber) > 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-23T21:43:17.333

接受的答案在性能上相当缓慢。经过一番搜索，我设法产生了一个运行速度更快的等效项：

```
SELECT e1.ninumber,
       e1.fname,
       e1.lname,
       e1.superNiNumber
FROM   employee AS e1, (SELECT superNiNumber, 
                        COUNT(*) AS count 
                        FROM employee 
                        GROUP BY superNiNumber 
                        HAVING count > 1) AS e2
WHERE  e1.superNiNumber = e2.superNiNumber 
```

信用： http: [//www.programmingforums.org/thread14669.html](http://www.programmingforums.org/thread14669.html)

# actionscript-3 - 在不同按钮上播放/暂停音频的动作脚本

> ID：13161370
> 
> 赞同：3
> 
> 时间：2012-10-31T15:26:44.537
> 
> 标签：actionscript-3, flash, actionscript-2

我在 Flash 中创建了一些按钮。我正在努力做到这一点，如果您单击一个按钮，音频就会开始播放该按钮。如果您单击另一个按钮，活动音频将停止，并且您上次单击的按钮的新音频开始播放。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:01:47.110

你所描述的实际上很容易做到。

首先，我建议将音频导入您的 Flash 项目。或者，有一种方法可以直接从外部文件播放。这超出了我的回答范围，所以如果您需要帮助，您应该发布一个专门涵盖它的问题。

假设您已将音频文件导入到 Flash 项目的库中，请为其创建一个 as3 实例。（右键单击库中的文件，单击属性 --> ActionScript [选项卡] --> [检查] Export for ActionScript & [Enter name in] Class）

现在，在您的代码中创建声音的定义。（假设您的两个声音在上一步的 Class 字段中被命名为“mySound1”和“mySound2”。）

```
var mySound1:Sound = new mySound1();
var mySound2:Sound = new mySound2(); 
```

现在，定义您的声音通道。

```
var mySoundChannel:SoundChannel = new SoundChannel(); 
```

有两种替代方法可以停止一种声音并播放另一种声音。第一个是创建一个每次都执行的函数。第二种方法是创建两个公式，一个用于“播放”，一个用于“停止”。您需要决定哪种方法最适合您。我将使用下面的双功能方法：

```
function stopSound():void
{
   //This stops all sound in the sound channel. 
   //If there is nothing playing, nothing happens.
   mySoundChannel.stop();
}

//In this function, we create an argument that allows us to tell the function 
//what sound to we want it to play.
function playSound(soundname:String):void
{
   mySoundChannel = this[soundname].play(0, 0);
} 
```

[注意，您可以调整 play() 属性以满足您的需要，例如从歌曲中间开始，或者永远循环播放。0,0 从头开始​​，不循环。请参阅[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Sound.html#play%28%29)。]

现在您连接按钮的事件侦听器。（如果您需要有关事件侦听器的帮助，请阅读[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/EventDispatcher.html#addEventListener%28%29)。）

```
myButton1.addEventListener(Mouse.CLICK, btn1Click);
myButton2.addEventListener(Mouse.CLICK, btn2Click);

function btn1Click(evt:Event):void
{
   stopSound();
   playSound(mySound1);
}

function btn2Click(evt:Event):void
{
   stopSound();
   playSound(mySound2);
} 
```

这应该足以让您入门。在我的游戏核心中，我实际上有一个用于处理声音播放的自定义类，它使我能够重复声音、改变音量以及防止声音相互冲突。我这样说是为了强调你可以在声音类上做很多事情。[在该文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Sound.html#play%28%29)中进行一些挖掘以获得想法和帮助。

您也可以考虑在 playSound 函数中放置一条 try-catch 语句，因为如果您为不存在的声音传递名称，它将引发引用错误。

# jquery - JQuery .trigger('click')、.click()、.triggerHandler('click') 在 Google Chrome 中不起作用

> ID：13161372
> 
> 赞同：0
> 
> 时间：2012-10-31T15:26:49.617
> 
> 标签：jquery, triggers, click

我有一个简单的 JQuery 代码，它将检查当前 URL 并搜索文本；如果存在，执行一些代码。我正在使用开关盒。该代码适用于 FF、IE，但不适用于 Webkit 浏览器、Chrome 和 Safari。这是代码：

注意：请假设当前 URL 最后包含 #f3 - 所以案例

```
$(document).ready(function() {      

    var checkUrl = $(location).attr('href');

        switch (true) {

        case (checkUrl.search("#f1") > 0):
            //just focus on #f3 below
            break;

        case (checkUrl.search("#f2") > 0):
            //just focus on #f3 below
            break;

        case (checkUrl.search("#f3") > 0):
            //$(".jcarousel-next").trigger("click");
            $(".jcarousel-next").triggerHandler('click');

            break;

        default:
            false;

        }
}); 
```

这应该做的是模拟在页面上单击的`div`类。`".jcarousel-next"`Chrome 和 Safari 什么都不做（除了加载页面）。适用于 Firefox、IE 等...

大佬们有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:06:51.203

我更新了代码，现在适用于所有必需的浏览器（ie7、ie8、ie9、FF、Chrome 和 Safari）。这是其中一种情况（case2）中的示例：

for (var i =1; i <2; i++) {
setTimeout(function () { $(".jcarousel-next").click(); }, 700 * i);
}

for 循环会以一定的时间间隔对所需的代码执行一定次数的操作，以延迟单击，否则，循环发生得如此之快，以至于您看不到它。

感谢大家的建议。

阿布·K。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:05:09.787

触发器在所有浏览器中都可以正常工作，我认为问题是因为选择器是一个类，所以如果“jcarousel-next”它是在运行时添加的，则有必要在之后添加处理程序

这是一个示例，并且工作正常，第一个文本什么也不做。第二次从第三次引发点击事件。第三个有点击事件...

正在运行.... [http://jsfiddle.net/37dAj/](http://jsfiddle.net/37dAj/)

```
<div class="botton1">
    <h2>nothing</h2>
</div>

<div class="botton2">
    <h2>raise click event from botton3</h2>
</div>

<div class="botton3">
    <h2>click event</h2>
</div>​

$(document).ready(function () {
        $('.botton3').click(doSomething);
        $('.botton2').click(doTrigger);
    });

    function doTrigger() {
        $('.botton3').trigger('click');
    }

    function doSomething() {
        alert('boo!');
    } 
```

# c# - 如何从各种文本框（多个标准）中过滤 ObservableCollection？

> ID：13161373
> 
> 赞同：1
> 
> 时间：2012-10-31T15:26:49.583
> 
> 标签：c#, wpf, listview, filter, observablecollection

我有一个`ListView`我正在填充的`ObservableCollection`

我正在从输入的文本中过滤列表`TextBox`

这是我正在使用的代码的一部分：

```
 private void Filter_TextChanged(object sender, TextChangedEventArgs e)
    {
           view = CollectionViewSource.GetDefaultView(Elementos_Lista.ItemsSource);
           view.Filter = null;
           view.Filter = new Predicate<object>(FilterList);
    } 
```

如果我只想按一个标准过滤列表，这可以正常工作，但每当我想混合超过 1 个文本框进行过滤时，它总是根据 ItemsSource 过滤，而不是当前结果集，这意味着没有积累标准。

这是我的 FilterList 方法。

```
 ItemDetail item = obj as ItemDetail;  
 if (item == null) return false;
 string  textFilter = txtFilter.Text; 
 if (textFilter.Trim().Length == 0) return true; //this returns the unfiltered results.
 if ((item.problema.ToLower().Contains(textFilter.ToLower()))) return true;  
 return false; 
```

有没有办法通过多个条件过滤 ObservableCollection （视图），这些条件并不总是同时提供？

我试图更改 FilterList 方法来评估各种文本框，但我必须制作一个 IF 语句来检查匹配条件的所有可能性。

```
(filter1=value , filter2=value) OR 
(filter1=value , filter2=empty) OR 
(filter1=empty , filter2=value) 
```

而且由于我计划通过至少 5 个不同的控件进行过滤，所以这根本不会有趣。

例子：

```
List:
Maria, Age:26
Jesus, Age:15
Angela, Age:15 
```

第一个过滤器

```
Filters:
Name: //Empty
Age: 15

Result:
Jesus, Age:15
Angela, Age:15 
```

第二个过滤器：

```
Filters:
Name: Jesus
Age: 15

Result:
Jesus, Age:15 
```

我要做的是将过滤器应用于已过滤的集合，而不是原始集合，并且这种方法会用下一个过滤器覆盖应用的过滤器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:07:23.777

好吧，让我们看看，我这里也有类似的东西……

```
[ContractClass(typeof(CollectionViewFilterContracts<>))]
public interface ICollectionViewFilter<in T> where T : class
{
    bool FilterObject(T obj);
} 
```

合同当然是可选的（[CodeContracts](http://research.microsoft.com/en-us/projects/contracts/)）

```
 [ContractClassFor(typeof(ICollectionViewFilter<>))]
    public abstract class CollectionViewFilterContracts<T> : ICollectionViewFilter<T> where T : class
    {
        public bool FilterObject(T obj)
        {
            Contract.Requires<ArgumentNullException>(obj != null, "Filtered object can't be null");

            return default(bool);
        }
    } 
```

然后是基本实现，据我所知，您只使用字符串进行比较，所以这里是纯字符串版本：

```
public abstract class CollectionFilterBase<T> : ICollectionViewFilter<T> where T : class
    {

        private readonly Dictionary<string, string> filters = new Dictionary<string, string>(10);
        private readonly PropertyInfo[] properties;

        protected CollectionFilterBase()
        {
             properties = typeof(T).GetProperties();
        }        

        protected void AddFilter(string memberName, string value)
        {
            if (string.IsNullOrEmpty(value))
            {
                filters.Remove(memberName);
                return;
            }

            filters[memberName] = value;
        }

        public virtual bool FilterObject(T objectToFilter)
        {
             foreach (var filterValue in filters)
             {
                 var property = properties.SingleOrDefault(x => x.Name == filterValue.Key);
                 if(property == null)
                     return false;

                 var propertyValue = property.GetValue(objectToFilter, null);
                 var stringValue = propertyValue == null ? null : propertyValue.ToString(); // or use string.Empty instead of null, depends what you're going to do with it.
                 // Now you have the property value and you have your 'filter' value in filterValue.Value, do the check, return false if it's not what you're looking for.
                 //The filter will run through all selected (non-empty) filters and if all of them check out, it will return true.
             }

            return true;
        }
  } 
```

现在一些有意义的实现，假设这是你的类，为简单起见：

```
public class Person
{
    public string Name {get;set;}
    public int Age {get;set;}
} 
```

过滤器实现同时是包含所有“过滤”控件的视图后面的视图模型，因此您可以将文本框值相应地绑定到属性。

```
public class PersonFilter : CollectionFilterBase<Person>
{
    private string name;
    public string Name
    {
        get
        {
            return name;
        }

        set
        {
            name = value;
            //NotifyPropertyChanged somehow, I'm using Caliburn.Micro most of the times, so:
            NotifyOfPropertyChange(() => Name);
            AddFilter("Name", Name);            
        }
    }
    private int age;
    public int Age
    {
        get
        {
            return age;
        }
        set
        {
            age = value;
            //Same as above, notify
            AddFilter("Age", Age.ToString()) // only a string filter...
        }
    }
} 
```

然后你`PersonFilter`的视图模型中有一个对象实例。

```
ICollectionViewFilter<Person> personFilter = new PersonFilter(); 
```

然后你只需要在视图模型中的某个方法`Filter`上使用事件，例如：`CollectionView`

```
CollectionView.Filter += FilterPeople

private void FilterPeople(object obj)
{
    var person = obj as Person;
    if(person == null)
        return false;
    return personFilter.FilterObject(person);
} 
```

过滤器名称必须与过滤对象上的属性名称相同。:)

当然，你必须调用`CollectionView.Refresh();`某个地方，你可以将它移动到过滤器（例如，当属性更改时，你可以调用`CollectionView.Refresh()`以立即查看更改），你可以在事件处理程序中调用它，但你想要。

这很简单，尽管性能可能会更好。除非您使用几十个过滤器过滤大量数据，否则在调整和使用代码段时应该不会有太多问题。:)

# knockout.js - 调用默认敲除绑定时自定义敲除绑定失败

> ID：13161374
> 
> 赞同：4
> 
> 时间：2012-10-31T15:26:58.897
> 
> 标签：knockout.js

**概述**

创建包含对淘汰赛默认绑定的调用的淘汰赛自定义绑定时，我的自定义绑定在第一次调用后停止工作 [。](http://jsfiddle.net/jamshall/6UtsP/1/)

要查看问题，请在[JSFiddle 示例](http://jsfiddle.net/jamshall/6UtsP/1/)中更改 ddl 中的选定项目一次。文本按预期更改。再次更改它，没有任何反应。失败。

**细节**

在使用我自己的自定义绑定“htmlFade”扩展默认的淘汰赛绑定“ [html](http://knockoutjs.com/documentation/html-binding.html) ”时，我看到了一些奇怪的行为。我正在寻找的行为与[html binding](http://knockoutjs.com/documentation/html-binding.html)相同，但使用 JQuery 淡入淡出动画来淡入和淡出 DOM 元素。

下面的代码示例。可以在[此处](http://jsfiddle.net/jamshall/6UtsP/1/)查看完整的 JSFiddle 示例。

HTML 如下所示：

```
<select data-bind="options: names, value: selectedName"></select>  
<data-bind="htmlFade : selectedName" class="main"></div> 
```

Json 数据如下所示：

```
var viewModel = {
    names: ko.observableArray(['Bob', 'Jon']),
    selectedName: ko.observable('Bob')
}; 
```

自定义绑定如下所示：

```
ko.bindingHandlers.htmlFade = {
    init: function(element, valueAccessor) {
        ko.bindingHandlers.html.init();
        $(element).hide();
    },
    update: function(element, valueAccessor) {
        $(element).fadeOut(700, function() {
           ko.bindingHandlers.html.update(element, valueAccessor);           
           $(element).fadeIn(700);
        });        
    }
}; 
```

我故意使用*"ko.bindingHandlers.html.update(element, valueAccessor)"*行推迟到默认的 html 处理程序，因为我的目标是*扩展*行为，而不是重新创建。

**我遇到**的问题是上面的代码在第一次更改选择列表时起作用。**之后它失败了。**

 **我创建了另一个[JSFiddle 示例](http://jsfiddle.net/jamshall/kYwEE/1/)，我没有扩展行为，而是通过添加以下行*“http://jsfiddle.net/jamshall/kYwEE/1/” （从*[默认 html 绑定](https://github.com/SteveSanderson/knockout/blob/master/src/binding/defaultBindings/html.js)的淘汰源复制）重新创建它以上引用的*html.update*调用。这似乎工作正常。

**那么，我的问题**是，当我包含对默认绑定的调用时，为什么我的自定义绑定在第一次调用后停止工作？或者，为了简单起见，为什么[JSFiddle1](http://jsfiddle.net/jamshall/6UtsP/1/)不起作用但[JSFiddle2](http://jsfiddle.net/jamshall/kYwEE/1/)起作用？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:04:38.100

您可以`update`将自定义绑定的功能想象为计算的 observable（当元素上的绑定执行时，Knockout 确实使用计算的 observables 来跟踪依赖关系）。因此，在您的自定义绑定中，您不会获取对绑定的 observable 的依赖，因为您的代码是异步执行的。

在您的`update`中，您可能想要执行以下操作：

```
update: function(element, valueAccessor) {
    //just grab dependency
    ko.utils.unwrapObservable(valueAccessor());

    $(element).fadeOut(700, function() {
       ko.bindingHandlers.html.update(element, valueAccessor);           
       $(element).fadeIn(700);
    });        
} 
```

因此，我们只需访问 observable 的值来获取依赖项。 `ko.utils.unwrapObservable`只是安全地处理检索值，无论它是不可观察的还是可观察的。

更新示例：http: [//jsfiddle.net/rniemeyer/6UtsP/10/](http://jsfiddle.net/rniemeyer/6UtsP/10/)**

# asp.net - 在会话超时时调用方法？

> ID：13161379
> 
> 赞同：3
> 
> 时间：2012-10-31T15:27:28.640
> 
> 标签：asp.net

我有一个包含多个页面的网站。每个页面都有一个“另存为草稿”方法，可以保存用户的进度。我有 40 分钟的会话超时，我想知道如何做到这一点，以便每当会话过期时，页面会自动调用“另存为草稿”（所以它不会丢失）

我将如何开始做这样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T15:30:01.670

您不能：会话在服务器端过期并且无法向浏览器发送消息（它甚至不知道用户是否仍然看到该页面或已关闭浏览器）。

您*可以*设置客户端超时以将页面（作为草稿）保存到服务器，但这具有刷新会话的效果！因此，也许只需每 5 到 10 分钟自动“另存为草稿”一次，从而保持您的会话（加上完成工作的草稿副本）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:21:24.137

在 .Net 中，您可以通过 Session_End(object sender, EventArgs e) 例程中的 Global.asax 来完成。我用它来做一些资源释放工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-10T11:09:28.433

当会话过期时，您可以在 global.asax 中调用函数，就像这样

```
Sub Session_End(ByVal sender As Object, ByVal e As EventArgs)
    If Not Session.Item("sessionid") Is Nothing Then
        If Session.Item("sessionid").ToString = "1" Then
            ClsUtilities.CustomerLogout()
        ElseIf Session.Item("sessionid").ToString = "2" Then
            ClsUtilities.Logout()
        End If
    End If
End Sub 
```

# jquery - fancybox 不同风格的不同图片

> ID：13161380
> 
> 赞同：0
> 
> 时间：2012-10-31T15:27:29.100
> 
> 标签：jquery, fancybox

我只想控制我的fancybox 组中的一些图像。

这与我在该领域提出的另一个问题有关，但正在转向问题的不同部分，因此我开始了一个新问题。

给定代码

```
<div id="gallery"> 
    <a href="photos/pic1.jpg" rel="lightbox-left" title=""> 
        <img src="photos/pic1_2.jpg" /></a> 

    <a href="photos/pic2.jpg" rel="lightbox-left" title="my title" class="flag"> 
        <img src="photos/pic2_2.jpg"  /></a>
</div> 
```

你会看到包含第二张图片（pic2.jpg）的“a”标签有一个“flag”类。这是因为我希望它的样式与其他样式不同。例如，假设我希望它具有绿色背景。

我可以通过类似的方式为所有实例实现这一点

```
.fancybox-skin {
    background-color: green;
} 
```

但这适用于所有显示的图片。显然，我的“标志”类仅适用于我的元素，而不适用于生成的fancybox 代码。

有什么方法可以控制生成代码的特定实例？

我知道 wrapCSS 属性，但是，正如我所见，它将在所有图像而不只是指定的图像周围放置一个包含类......或者我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:58:12.937

您可以使用回调来根据当前项目设置样式。例如：

```
$(".fancybox").fancybox({
    beforeShow: function() {

        if (this.index == 0) {
            this.skin.css("background-color", "green");

        } else if (this.index == 1) {
            this.skin.css("background-color", "blue");
        }

    }
});​ 
```

看看在行动 - [http://jsfiddle.net/LehkV/](http://jsfiddle.net/LehkV/)

有不同的方法可以单独设置参数，参见[http://fancyapps.com/fancybox/#useful中的#15](http://fancyapps.com/fancybox/#useful)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:30:33.870

感谢@Janis 为我指明了正确的方向！

使用附加到**beforeShow**事件的以下代码，我能够达到可接受的效果......

```
 $('#gallery a').fancybox({          
        beforeShow: function () {
            if ($(this.element).hasClass('flag')) {
                this.skin.css("background-color", "green");                
            }
        }, ...etc... 
```

我遇到的主要问题是能够获取当前元素的属性

```
$(this.element) 
```

允许我做。

# java - 如何执行不依赖于电平比较器的累积和？

> ID：13161381
> 
> 赞同：0
> 
> 时间：2012-10-31T15:27:29.397
> 
> 标签：java, cumulative-sum, activepivot

我们有一个基于 Stream2PositionPostProcessor（来自 ActivePivot）的累积度量。我们使用它在时间维度上动态汇总我们的缓存流。

我们希望按时间顺序求和，但以相反的顺序显示结果。为了以相反的顺序显示结果，我们更改了级别比较器。

这是我们得到的数据透视表：

```
Time dimension  | cumulative measure
2012            |    20
2011            |    35
2010            |    65
2009            |    75 
```

这是我们想要得到的：

```
Time dimension  | cumulative measure
2012            |    70
2011            |    55
2010            |    40
2009            |    10 
```

Stream2PositionPostProcessor 似乎使用了级别比较器。我们怎样才能改变这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:19:36.440

如果要对相反的顺序求和，则应在定义 stream2position 后处理器时将属性“reverseDimensionOrder”设置为 true。（自 ActivePivot 4.3.0 起可用）

例如：

```
<postProcessor pluginKey="Stream2Position">
     <properties>
          <entry key="id" value="CURRENT" />
          <entry key="timeDimensionName" value="BucketRelative" />
          <entry key="streamMeasureName" value="cashFlowInCurrency.SUM" />
          <entry key="positionType" value="PREVIOUS_STREAM" />
          <entry key="reverseDimensionOrder" value="true" />
      </properties>
</postProcessor> 
```

然后，您应该获得以下数据透视表：

```
Time dimension  | cumulative measure
2012            |    75
2011            |    55
2010            |    40
2009            |    10 
```

# jquery - 如何取消隐藏元素

> ID：13161382
> 
> 赞同：2
> 
> 时间：2012-10-31T15:27:33.243
> 
> 标签：jquery

我在一个下拉列表中工作，当单击下拉列表项时，下面会显示一些单选按钮。问题是如何取消隐藏单选按钮？我已经知道我的代码已经很远了，只有最后一步仍然缺失。我想说的是，每次 selectString 是 Selecteer **een verstiging** dont show .locationRB class。但我不知道该怎么做。这就是我已经拥有的：

```
//Unhided radiobuttons
  jQuery( 'div.locationRB' ) .hide(); //

 $(document).ready(function() {
  $('.wijzigingOpvangVestiging').change(function() {

    var selectedString = $('.wijzigingOpvangVestiging option:selected').text()

    console.log( selectedString )

    if( selectedString !== "(Selecteer een vestiging)" ){
      console.log( 'show' );
    }else{
      console.log( 'hide' );
    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:30:44.653

以显示：

```
$( 'div.locationRB' ).show(); 
```

隐藏：

```
$( 'div.locationRB' ).hide(); 
```

我看到你有一个布尔条件，所以你可以使用切换：

```
var willshow = selectedString !== "(Selecteer een vestiging)";
$( 'div.locationRB' ).toggle(willshow); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:43:46.047

AmirsBay，添加“});” 关闭你的 $.change() 函数。您的脚本应显示在控制台日志中。这就是你所缺少的。你走在正确的轨道上。

```
//Unhided radiobuttons
  jQuery( 'div.locationRB' ) .hide(); //

 $(document).ready(function() {
  $('.wijzigingOpvangVestiging').change(function() {

    var selectedString = $('.wijzigingOpvangVestiging option:selected').text()

    console.log( selectedString )

    if( selectedString !== "(Selecteer een vestiging)" ){
      console.log( 'show' );
    }else{
      console.log( 'hide' );
    }

  }); //<--- you are missing this
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T15:30:50.193

用于`.show()` 显示和`.hide()`隐藏内容

利用

```
jQuery( 'div.locationRB' ).show();  // Show the particular div

jQuery( 'div.locationRB' ).hide();  // hide the particular div 
```

更改事件也**缺少右括号**..修复它应该没问题

**完整代码**

```
$(document).ready(function() {
    jQuery('div.locationRB').hide();

    $('.wijzigingOpvangVestiging').change(function() {
        var selectedString = $('.wijzigingOpvangVestiging option:selected').text()

        console.log(selectedString)

        if (selectedString !== "(Selecteer een vestiging)") {
            jQuery('div.locationRB').show();
        } else {
            jQuery('div.locationRB').hide();
        }
    }).change();
});​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/CdN63/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T15:32:42.197

这是您需要更改的代码...

```
//Unhided radiobuttons
jQuery( 'div.locationRB' ).hide(); //

$(document).ready(function() {
    $('.wijzigingOpvangVestiging').change(function() {

        var selectedString = $('.wijzigingOpvangVestiging option:selected').text()

        console.log( selectedString )

        if( selectedString !== "(Selecteer een vestiging)" ){
            jQuery( 'div.locationRB' ).show();
        }else{
            jQuery( 'div.locationRB' ).hide();
        }
    });
}); 
```

# css - mixin 调用中的 SCSS 插值

> ID：13161383
> 
> 赞同：1
> 
> 时间：2012-10-31T15:27:35.087
> 
> 标签：css, sass

我想在 mixin 调用中做一个简单的插值：

```
$models: "square", "square-green", "circle";
$services: "facebook", "twitter", "linkedin", "gplus", "feed";

@each $model in $models {
    @include all-#{$model}-sprites;
    @each $service in $services {
            #{$model}-#{$service} {
                &:hover{ @extend .#{$model}-#{$service}-hover;};
            }
    }
} 
```

> 错误 sass/soboo2.scss（第 14 行：“@include all-”之后的无效 CSS：预期的“}”，是“#{$model}-sprites;”）

我还尝试了互联网上的一些语法变体：

```
@include all-"#{$model}"-sprites;
@include [all-#{$model}-sprites];
@include [all-"#{$model}"-sprites];
@include all-$model-sprites; 
```

不起作用...有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-05-15T14:33:51.363

进行 mixin 插值的“正确”方法是这样编写调用：

```
@include all-#{$model}-sprites(); // parenthesis are optional if 0 arguments given 
```

但是，您应该看看这个答案：

[https://stackoverflow.com/a/16153447/10680340](https://stackoverflow.com/a/16153447/10680340)

# c# - 如何在 Visual Studio 2010 中开发可以通过 regasm 在另一台电脑上注册的 C# dll？

> ID：13161384
> 
> 赞同：-2
> 
> 时间：2012-10-31T15:27:38.743
> 
> 标签：c#, regasm, dllregistration

> **可能重复：**
> [regasm RA0000：未注册类型](https://stackoverflow.com/questions/8054039/regasm-ra0000-no-types-were-registered)

我有一个相当简单的组件，强命名并内置到一个 dll 文件中。

我将该文件提供给一位同事，以便在他的 Windows 7 机器上注册。

他使用命令：（从他将文件复制到的位置）

```
regasm mycontrol.dll 
```

并得到答复

> RegAsm：警告 RA0000：未注册任何类型。

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:38:27.150

> 有没有人真的在 Visual Studio 2010 中开发了一个可以通过 regasm 在另一台电脑上注册的 C# dll？

是的，有人已经做到了。

查看有关创建互操作 DLL[的文档](http://msdn.microsoft.com/en-us/library/zsfww439.aspx)，看看是否有您可能遗漏的步骤。一个常见的问题是忘记将`ComVisible`属性设置为`true`in `assemblyInfo.cs`。

一些关键部分：

[为 COM 打包程序集](http://msdn.microsoft.com/en-us/library/zsfww439.aspx)

[限定 .NET 类型以进行互操作](http://msdn.microsoft.com/en-us/library/7fcfby2t.aspx)

# iphone - 在两台 Mac 上开发 iOS 应用？

> ID：13161385
> 
> 赞同：0
> 
> 时间：2012-10-31T15:27:41.660
> 
> 标签：iphone, ios, xcode

我在 iMac 上为 iPhone 开发。我的 iPhone 连接到我的 iMac 以通过 iTunes 播放音乐等。

我是否能够将测试应用程序从 iMac 和新的笔记本电脑（air）部署到 iPhone，并且它仍然连接到我的 iMac 以播放音乐等？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:29:53.687

是的。只需将您的 iTunes on the Air 配置为在插入设备时不执行任何自动同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:34:53.473

If you develop on the other mac, you probably have Xcode and then you can directly run the app to your iPhone without unpairing your device with the first Mac. Through Xcode organizer (cmd + fn + 2) you can also drag apps without opening iTunes. It's really handy!

# javascript - 我正在寻找一个 javascript 服务器端模板/页面渲染引擎

> ID：13161386
> 
> 赞同：-2
> 
> 时间：2012-10-31T15:27:45.303
> 
> 标签：javascript, template-engine

类似于 razor (MVC c#) 但使用 javascript。我真正想做的是从数据中生成 HTML 报告。我向用户公开的脚本语言是 JS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:31:34.277

有许多 JavaScript 模板引擎。示例包括：

*   [胡子](http://mustache.github.com/)
*   [车把](http://handlebarsjs.com/)
*   [EJS](http://embeddedjs.com/)
*   [灰尘](http://akdubya.github.com/dustjs/)

# java - 设置 Maven 将剥离的子 JVM 进程的 permgen 大小

> ID：13161387
> 
> 赞同：11
> 
> 时间：2012-10-31T15:27:47.900
> 
> 标签：java, maven, jenkins, maven-jetty-plugin, permgen

我正在 Jenkins 构建服务器上构建一个 Maven Java 应用程序。我`java.lang.OutOfMemoryError: PermGen space`在 Jenkins 上构建期间遇到了很多次（但从来没有在我的本地主机上），因此它使我的构建失败。

我已经尝试过`MAVEN_OPTS`为 Jenkins 设置：我进入`Jenkins`--> `Manage Jenkins`--> `Configure system`-->`Global MAVEN_OPTS`并将其设置为`-Xms512m -Xmx1024m -XX:MaxPermSize=512m -XX:PermSize=512m`. 尽管将其设置为如此高的值，但我们仍会遇到 PermGen 空间问题。我不想将 MAVEN_OPTS 设置为更高的值；我看不出我的应用程序如何需要大量空间，我宁愿深入研究高内存使用问题。

最近，我一直在想，permgen 空间问题可能不是来自 Maven 本身，而是来自 Maven 衍生的 JVM 进程之一（例如：插件）。我提出这个假设是因为 Maven 仍然能够正常执行 TestNG 测试，尽管已经吐出了我们的 permgen 空间错误行。导致 PermGen 错误的插件之一是**Jetty：**

```
Oct 31, 2012 7:55:37 AM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: handle failed
java.lang.OutOfMemoryError: PermGen space 
```

因此，我想知道：

**该`MAVEN_OPTS`变量是否也适用于 Maven 构建衍生的子 JVM 进程？如果没有，那么如何为这些子进程（例如 Jetty）设置 JVM 选项？**

注意：我使用的是 Maven 3.0.4。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T10:08:09.053

大多数生成 Java 进程的 Maven 插件都有自己的方式来指定 JVM 命令行参数。例如，您可以使用`argLine`配置参数在 Surefire 插件生成的进程中配置堆和永久生成大小（请参阅[http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html#argLine](http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html#argLine)）。

Jetty 插件不会产生进程，因此 heap 和 permgen 由提供给 Maven 进程的 JVM 参数控制。

如果从 Jenkins 运行时内存不足，但在本地运行时没有，请检查 Jenkins 传递给 Maven 的 MAVEN_OPTS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:39:00.777

您可以全局配置 vm 选项（设置）并为任何构建作业覆盖它。例如，在基于 Maven 的作业中，MAVEN_OPTS 字段隐藏在“高级”块之一中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T18:34:22.603

正如前面另一个回复所提到的，每个进程都有自己指定参数的方式。如果 Jenkins 生成了 Maven 子进程，该设置将在 Maven 构建下的作业配置中。您需要单击“高级”按钮并在`MAVEN_OPTS`字段中设置选项。例如：`-XX:MaxPermSize=256m -Xms512m -Xmx1024m`

# javascript - 将模块传递给 Require.js require.config

> ID：13161390
> 
> 赞同：0
> 
> 时间：2012-10-31T15:27:58.237
> 
> 标签：javascript, requirejs

是否可以将模块传递给require.config？我有一个在 require.config 之前在 DOM 中创建的模块，其中包含服务器端配置数据，我希望能够访问我的 require.config 文件中的那个。这是我正在尝试做的一个例子。

```
 define("config", 
    [],
    function() {
        var Config = {};   
        Config.locale = '{$locale}';
        Config.version = '{$version}';
        return Config;
    }); 
```

然后我希望能够将 Config 模块传递给 require.config 。

```
require.config({

  paths: {
    link1: "//url/" + Config.version + "/data.js",
    link2: "//url/" + Config.version + "/data.js",
    link3: "//url/" + Config.version + "/data.js"
}, 
```

与往常一样，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:07:31.707

Have you tried your method? Although I haven't, I'm pretty sure config is not treated as a module.

You could take advantage of defining require as an object before the library is loaded.

```
<script>
    var require = (function(){

        // Do your setup stuff here

        // Now return the config object
        return {
            baseUrl: 'test/path/'
            paths: {
                // etc
            }
        }

    })()
</script>
<script src="require.js"></script> 
```

# c++ - 预期 '(' 跟随 'WINGDIAPI'

> ID：13161391
> 
> 赞同：3
> 
> 时间：2012-10-31T15:28:05.560
> 
> 标签：c++, visual-studio-2010, opengl, glut

我收到上述错误和大约 101 个其他错误（总共 102 个错误）。我四处搜索，发现的唯一解决方案是在 gl.h 之前包含 windows.h 库。但我已经在这样做了。那么解决方案是什么？谁能帮我？我正在使用过剩和opengl。以下是我的包含过程。如果您要求更多我的代码，请告诉我

```
#include <stdio.h>           // Standard C/C++ Input-Output
#include <math.h>            // Math Functions
#include <windows.h>        // Standard Header For MSWindows Applications
#include <GL/gl.h>        
#include <time.h>
#include <stdlib.h>
#include "SOIL.h" 
```

这是完整的错误列表：

```
Error   1   error C2054: expected '(' to follow 'WINGDIAPI' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1152
Error   2   error C2085: 'APIENTRY' : not in formal parameter list  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1152
Error   3   error C2146: syntax error : missing ',' before identifier 'glAccum' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1152
Error   4   error C2143: syntax error : missing ';' before '('  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1152
Error   5   error C2059: syntax error : ')' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1152
Error   6   error C2054: expected '(' to follow 'WINGDIAPI' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1153
Error   7   error C2085: 'APIENTRY' : not in formal parameter list  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1153
Error   8   error C2146: syntax error : missing ',' before identifier 'glAlphaFunc' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1153
Error   9   error C2143: syntax error : missing ';' before '('  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1153
Error   10  error C2059: syntax error : ')' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1153
Error   11  error C2054: expected '(' to follow 'WINGDIAPI' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1154
Error   12  error C2085: 'APIENTRY' : not in formal parameter list  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1154
Error   13  error C2146: syntax error : missing ',' before identifier 'glAreTexturesResident'   c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1154
Error   14  error C2143: syntax error : missing ';' before '('  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1154
Error   15  error C2059: syntax error : ')' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1154
Error   16  error C2054: expected '(' to follow 'WINGDIAPI' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1155
Error   17  error C2085: 'APIENTRY' : not in formal parameter list  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1155
Error   18  error C2146: syntax error : missing ',' before identifier 'glArrayElement'  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1155
Error   19  error C2143: syntax error : missing ';' before '('  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1155
Error   20  error C2059: syntax error : ')' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1155
Error   21  error C2054: expected '(' to follow 'WINGDIAPI' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1156
Error   22  error C2085: 'APIENTRY' : not in formal parameter list  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1156
Error   23  error C2146: syntax error : missing ',' before identifier 'glBegin' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1156
Error   24  error C2143: syntax error : missing ';' before '('  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1156
Error   25  error C2059: syntax error : ')' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1156
Error   26  error C2054: expected '(' to follow 'WINGDIAPI' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1157
Error   27  error C2085: 'APIENTRY' : not in formal parameter list  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1157
Error   28  error C2146: syntax error : missing ',' before identifier 'glBindTexture'   c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1157
Error   29  error C2143: syntax error : missing ';' before '('  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1157
Error   30  error C2059: syntax error : ')' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1157
Error   31  error C2054: expected '(' to follow 'WINGDIAPI' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1158
Error   32  error C2085: 'APIENTRY' : not in formal parameter list  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1158
Error   33  error C2146: syntax error : missing ',' before identifier 'glBitmap'    c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1158
Error   34  error C2143: syntax error : missing ';' before '('  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1158
Error   35  error C2059: syntax error : ')' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1158
Error   36  error C2054: expected '(' to follow 'WINGDIAPI' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1159
Error   37  error C2085: 'APIENTRY' : not in formal parameter list  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1159
Error   38  error C2146: syntax error : missing ',' before identifier 'glBlendFunc' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1159
Error   39  error C2143: syntax error : missing ';' before '('  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1159
Error   40  error C2059: syntax error : ')' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1159
Error   41  error C2054: expected '(' to follow 'WINGDIAPI' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1160
Error   42  error C2085: 'APIENTRY' : not in formal parameter list  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1160
Error   43  error C2146: syntax error : missing ',' before identifier 'glCallList'  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1160
Error   44  error C2143: syntax error : missing ';' before '('  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1160
Error   45  error C2059: syntax error : ')' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1160
Error   46  error C2054: expected '(' to follow 'WINGDIAPI' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1161
Error   47  error C2085: 'APIENTRY' : not in formal parameter list  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1161
Error   48  error C2146: syntax error : missing ',' before identifier 'glCallLists' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1161
Error   49  error C2143: syntax error : missing ';' before '('  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1161
Error   50  error C2059: syntax error : ')' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1161
Error   51  error C2054: expected '(' to follow 'WINGDIAPI' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1162
Error   52  error C2085: 'APIENTRY' : not in formal parameter list  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1162
Error   53  error C2146: syntax error : missing ',' before identifier 'glClear' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1162
Error   54  error C2143: syntax error : missing ';' before '('  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1162
Error   55  error C2059: syntax error : ')' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1162
Error   56  error C2054: expected '(' to follow 'WINGDIAPI' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1163
Error   57  error C2085: 'APIENTRY' : not in formal parameter list  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1163
Error   58  error C2146: syntax error : missing ',' before identifier 'glClearAccum'    c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1163
Error   59  error C2143: syntax error : missing ';' before '('  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1163
Error   60  error C2059: syntax error : ')' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1163
Error   61  error C2054: expected '(' to follow 'WINGDIAPI' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1164
Error   62  error C2085: 'APIENTRY' : not in formal parameter list  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1164
Error   63  error C2146: syntax error : missing ',' before identifier 'glClearColor'    c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1164
Error   64  error C2143: syntax error : missing ';' before '('  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1164
Error   65  error C2059: syntax error : ')' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1164
Error   66  error C2054: expected '(' to follow 'WINGDIAPI' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1165
Error   67  error C2085: 'APIENTRY' : not in formal parameter list  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1165
Error   68  error C2146: syntax error : missing ',' before identifier 'glClearDepth'    c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1165
Error   69  error C2143: syntax error : missing ';' before '('  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1165
Error   70  error C2059: syntax error : ')' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1165
Error   71  error C2054: expected '(' to follow 'WINGDIAPI' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1166
Error   72  error C2085: 'APIENTRY' : not in formal parameter list  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1166
Error   73  error C2146: syntax error : missing ',' before identifier 'glClearIndex'    c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1166
Error   74  error C2143: syntax error : missing ';' before '('  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1166
Error   75  error C2059: syntax error : ')' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1166
Error   76  error C2054: expected '(' to follow 'WINGDIAPI' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1167
Error   77  error C2085: 'APIENTRY' : not in formal parameter list  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1167
Error   78  error C2146: syntax error : missing ',' before identifier 'glClearStencil'  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1167
Error   79  error C2143: syntax error : missing ';' before '('  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1167
Error   80  error C2059: syntax error : ')' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1167
Error   81  error C2054: expected '(' to follow 'WINGDIAPI' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1168
Error   82  error C2085: 'APIENTRY' : not in formal parameter list  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1168
Error   83  error C2146: syntax error : missing ',' before identifier 'glClipPlane' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1168
Error   84  error C2143: syntax error : missing ';' before '('  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1168
Error   85  error C2059: syntax error : ')' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1168
Error   86  error C2054: expected '(' to follow 'WINGDIAPI' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1169
Error   87  error C2085: 'APIENTRY' : not in formal parameter list  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1169
Error   88  error C2146: syntax error : missing ',' before identifier 'glColor3b'   c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1169
Error   89  error C2143: syntax error : missing ';' before '('  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1169
Error   90  error C2059: syntax error : ')' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1169
Error   91  error C2054: expected '(' to follow 'WINGDIAPI' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1170
Error   92  error C2085: 'APIENTRY' : not in formal parameter list  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1170
Error   93  error C2146: syntax error : missing ',' before identifier 'glColor3bv'  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1170
Error   94  error C2143: syntax error : missing ';' before '('  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1170
Error   95  error C2059: syntax error : ')' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1170
Error   96  error C2054: expected '(' to follow 'WINGDIAPI' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1171
Error   97  error C2085: 'APIENTRY' : not in formal parameter list  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1171
Error   98  error C2146: syntax error : missing ',' before identifier 'glColor3d'   c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1171
Error   99  error C2143: syntax error : missing ';' before '('  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1171
Error   100 error C2059: syntax error : ')' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1171
Error   101 error C2054: expected '(' to follow 'WINGDIAPI' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1172
Error   102 error C1003: error count exceeds 100; stopping compilation  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\gl\gl.h 1172 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T16:07:23.430

这通常是由在编译设置中或在编译设置中定义引起`WIN32_LEAN_AND_MEAN`的`stdafx.h`。

在包含之前定义该宏会`windows.h`自动排除不常用的头文件和定义。

由于您使用的是 OpenGL，因此您正在使用一些不常用的标头，因此您需要将其关闭。

它可能出现在诸如 stdafx.h 之类的标头中，如下所示：

```
#define WIN32_LEAN_AND_MEAN 
```

或者它可能在编译设置中，如下所示：

```
-DWIN32_LEAN_AND_MEAN 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-05T03:22:17.817

您忘记在`windows.h`之前包含`gl.h`。来自[http://www.opengl.org/archives/resources/faq/technical/gettingstarted.htm](http://www.opengl.org/archives/resources/faq/technical/gettingstarted.htm)：

> ```
> Error:
> c:\program files\microsoft visual studio\vc98\include\gl\gl.h(1152) : error C2054: expected '(' to
> follow 'WINGDIAPI' 
> c:\program files\microsoft visual studio\vc98\include\gl\gl.h(1152) : error C2085: 'APIENTRY' : not in
> formal parameter list 
> ```
> 
> 没有#include windows.h 或在 gl.h 之后包含它。既不使用 GLUT 也不使用 MFC，但调用 OpenGL 的源文件应该：
> 
> ```
>  #include <windows.h> 
>      #include <GL/gl.h> 
> ```

为我工作。

另外，请确保您没有使用预编译的标头

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-07T06:01:19.480

好的，我遇到了同样的问题，我修复了它。只需确保您的项目中没有其他文件（预编译头文件/.c/.cpp）。删除它们并只留下您需要的文件，它会起作用

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-01T03:58:11.130

看来您正在使用 SOIL 库。确保包含 windows.h（预处理器可能采用不同的分支）。如果您不想更改 SOIL 库，请确保定义了 WIN32。如果没有，您可以将其替换为_WIN32。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-11T15:47:34.437

这一切似乎都是错误的家伙（对不起！）。

仅仅因为这大声宣称需要包含 windows.h 并不意味着应该包含 windows.h。

OpenGL 是一个开放标准协议接口规范。因此，其相关的 STANDARD 标头（GL/gl.h、GL/glu.h 等）绝对**不会**因某些专有供应商设法提出的专有废话而造成大规模污染。

具体来说，我说的是可悲的 Win32 特定宏 WINGDIAPI 和 APIENTRY，它们已添加到以前的标准 GL 标头内容中（提示：请参阅该标头中的 SGI 文本），并导致这些 GL 标头**不是**正确独立的和通用接口了！！（即，需要大量的wingdi.h 和厨房水槽等，其后果是使用完全特定于环境的废话、windows.h 等在全球范围内污染您的整个源代码范围）

因此，要纠正这种可怕的情况，可能应该这样做：

1.  创建特定用途的本地标头，尝试最精确地提供这些少数必需但缺少的（非独立标头！）环境特定部分：

*   APIENTRY 定义头文件
*   WINGDIAPI 定义头文件

2.  通过在包含相关官方 GL 头（接口！）的任何地方包含这些帮助头来提供这些缺失的部分（由于非独立的 OpenGL 接口而损坏......） - 仅在 Windows 专有平台上（#ifdef _WIN32）！
3.  **非常注意**将任何和所有 Windows 专有的转换到 OpenGL 的帮助程序（那些使用 Win32 HDC 等，例如 wgl*() API）处理到他们自己的严格隔离的翻译单元 (.cpp)
4.  将所有标准/通用/跨平台/通用（阅读：无辜;-)）OpenGL实现处理部分保留到它们自己的翻译单元（因此，完全**不会**被环境特定的windows.h废话感染，因此可以正常工作所有平台）
5.  利润！（希望）

与主题相关的参考资料（可能已经有帮助）：

[github WindowsH模块化](https://github.com/Leandros/WindowsHModular)

话题相关的东西：

*   Win32 min / max 宏“命名空间”/符号污染（早期定义 NOMINMAX 并更喜欢在仍需要的地方使用 __min / __max）
*   Win32 近/远宏

事实仍然是，使用实际上是*外来*工具包的可忽略部分（在本例中为符号导出宏）污染标准的极简主义（？）接口（OpenGL）是非常侵入性的行为，因此需要充分（标题端！）具有完全特定于环境的废话的所谓*通用*用户代码的全局范围污染：windows.h（而不是简单地确保这些公共接口头文件已经在范围内提供了自己的编译器特定符号导出宏）。

tl;dr：“一个平台启用，十一个平台损坏 - 工作完成”

# mysql - ActiveRecord 错误：SAVEPOINT active_record_1 不存在

> ID：13161394
> 
> 赞同：25
> 
> 时间：2012-10-31T15:28:20.543
> 
> 标签：mysql, ruby-on-rails, activerecord

完整的错误是

```
ActiveRecord::StatementInvalid: Mysql2::Error: SAVEPOINT active_record_1 does not exist: ROLLBACK TO SAVEPOINT active_record_1 
```

每当我尝试创建一个新的 ActiveRecord 对象时，我正在编写一个单元测试并得到这个错误——但只有在某个点之后。这发生在这些行之后：

```
ActiveRecord::Base.connection.execute "DROP TABLE IF EXISTS foo"
ActiveRecord::Base.connection.execute "CREATE TABLE foo (id INTEGER PRIMARY KEY)" 
```

（如果我的测试成功，表 'foo' 将填充数据）

在上述几行之前，我可以写一些类似的东西

```
User.create(email => 'foo@bar.com') 
```

一切正常。但是，如果我在调用 之后尝试编写上述行`ActiveRecord::Base.connection.execute`，那么我会得到`SAVEPOINT error`上述内容。我也尝试将我的执行语句放在事务中，但这没有帮助。我难住了。

仅供参考 - 我正在使用 Rails 3.2.8

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-05T20:52:33.443

您正在使用 Mysql DDE 语句（创建/删除/截断表），这将导致[隐式提交](http://dev.mysql.com/doc/refman/5.0/en/implicit-commit.html)。

由于隐式提交，当前事务的所有保存点都被删除（请参阅上面的文档）。

要解决此问题，您可以[关闭事务](https://stackoverflow.com/questions/3853098/turn-off-transactional-fixtures-for-one-spec-with-rspec-2)并使用[DatabaseCleaner](https://github.com/bmabey/database_cleaner)（截断模式）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-13T06:14:04.903

为了解决这个问题。。

config.use_transactional_fixtures = false

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-28T21:02:27.863

您可以在创建/删除表时使用“TEMPORARY”。

[http://dev.mysql.com/doc/refman/5.1/en/implicit-commit.html](http://dev.mysql.com/doc/refman/5.1/en/implicit-commit.html) 如果使用了 TEMPORARY 关键字，则 ALTER TABLE、CREATE TABLE 和 DROP TABLE 不会提交事务。（这不适用于临时表上的其他操作，例如 CREATE INDEX，它们确实会导致提交。）但是，虽然没有发生隐式提交，但语句也不能回滚。因此，使用此类语句将违反事务原子性：例如，如果您使用 CREATE TEMPORARY TABLE 然后回滚事务，则该表仍然存在。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-03T16:28:04.973

只是为了澄清。您可以将触发 MySql DDE 语句的测试隔离到它们自己的文件中，然后塞进`config.use_transactional_fixtures = false`该文件中。这样您的所有其他测试都不会受到影响。现在您负责清理那个隔离的测试文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T08:00:28.790

I found the following links that helped me:

*   [http://www.ruby-forum.com/topic/214995](http://www.ruby-forum.com/topic/214995)
*   [http://atevans.com/rspec-db-cleaning-causing-mysqlerror-savepoin.html](http://atevans.com/rspec-db-cleaning-causing-mysqlerror-savepoin.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-30T09:51:09.440

首先确保您安装了 DatabaseCleaner gem，这将允许您选择数据库清理策略。我们收到的错误意味着最好使用该`truncation`策略。

```
# file: Gemfile

group :test do
  gem ‘database_cleaner’
end 
```

将 DatabaseCleaner 配置添加到 features 目录（*见下文*）。

```
#file: features/support/database_cleaner.rb

begin
  require 'database_cleaner'
  require 'database_cleaner/cucumber'

  DatabaseCleaner.strategy = :truncation
rescue NameError
  raise "You need to add database_cleaner to your Gemfile (in the :test group) if you wish to use it."
end

Around do |scenario, block|
  DatabaseCleaner.cleaning(&block)
end 
```

# visual-studio-2010 - 你如何通过 TFS 集合进行分支

> ID：13161395
> 
> 赞同：0
> 
> 时间：2012-10-31T15:28:24.647
> 
> 标签：visual-studio-2010

提前感谢您的帮助。

我想知道是否可以在 TFS2010 中按集合进行分支？

基本上，我有一个名为“ReleaseTesting”的集合，当我右键单击它时，我可以看到“分支和合并”的菜单，但是它是灰色的。

那么，是否可以按集合进行分支？只是菜单在那里，让我相信这是真的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T21:46:27.940

如果您的意思是从一个集合分支到另一个集合，那么不，这是不可能的（或者从集合的根分支创建另一个集合）。TFS 中的幕后集合是独立的数据库，不能共享任何人工制品（代码、工作项、构建等）。

如果您需要在集合之间移动代码并维护历史记录，您可以使用[TFS 集成平台](http://tfsintegration.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:33:56.300

Hmm, I think you are on the right track. Remember that TFS has it's own permissions. So if something is greyed out, it could be because you don't have permissions.

For example, the new folder icon for me is greyed out sometimes, depending where in the folder tree I am.

Standard answer- contact you administration, i know that is not very helpful though.

# algorithm - O(kn) 是线性复杂度还是二次复杂度？还是取决于k？

> ID：13161397
> 
> 赞同：3
> 
> 时间：2012-10-31T15:28:30.443
> 
> 标签：algorithm, complexity-theory, time-complexity

如果 n 很大，而 k 很小，我可以说 O(kn) 是线性复杂度吗？

如果 k 接近于 n/2 但不大于 n/2 会怎样？我是否仍然认为它是线性复杂性？还是二次复杂度 O(n^2)？

将 O(kn) 视为二次复杂度，k 的大小是否有限制？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-31T15:30:55.270

如果`k`是一个常数，那么任何O(kn)函数都是O(n)，即线性

如果`k`是的函数`n`并且是 O(n)，那么任何 O(kn) 函数都是 O(n^2)。n/2 是 O(n)。此外，`(n^2)/2`不是O(n)，因此如果接近then*不是*O(n)。`k``n/2``kn`

如果`k`不是 O(n)，则`kn`不是 O(n^2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:31:16.560

假设 k 和 n 是自变量，说 O(kn) 是线性的是正确的陈述。

# php - 将来设置客户端时钟时，PHP会话立即到期

> ID：13161398
> 
> 赞同：7
> 
> 时间：2012-10-31T15:28:36.240
> 
> 标签：php, session, clock

我已经开发了这个 PHP Web 应用程序，它现在已经运行了几个月。突然，其中一位用户抱怨他可以登录，但只要他点击任何按钮，会话就会终止！同样的问题发生在不同的浏览器上。

经过一些测试，我意识到每次用户单击任何按钮时都会创建一个全新的会话 ID，可能是因为原始会话已过期。

不管出于什么原因，我看了一眼用户的计算机时钟，然后……惊喜！他的时钟是未来三个月！我不知道这样的事情是否与失败有任何关系，但我确实修好了时钟。仍然没有用。我删除了所有的cookies。依然没有。所以我重新启动了浏览器——然后它又开始工作了！

我得到的关于这个问题的最接近的信息是 Shimon Amit 对[这个问题](https://stackoverflow.com/questions/1489807/zend-framework-session-expires-prematurely)的回答。很好，现在我知道时钟“配置错误”是原因。问题是……我无法控制每个客户的计算机时钟。他们中的一些人将来可能会设置计算机时钟。

**我的问题**：有什么解决方案吗？有什么诀窍吗？我不希望客户面对这样的错误，因为他们可能会觉得它“蹩脚”并破坏他们对应用程序的信任，即使这并不是我的错（在某种意义上）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T15:30:18.340

会话 cookie（与所有 cookie 一样）在客户端浏览器过期时受到控制和删除。即使您设置了一个遥远的过期日期（无论如何您可能不想这样做），客户需要做的就是将他的时钟进一步向前移动，它就会过期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T15:30:48.877

您可以将会话超时延长到以后的日期。也许您可以使用不会过期的 cookie（会话与客户端的 cookie 有关）否则，您的客户端浏览器只是在做它设计的事情。

**编辑：Javascript 选项**

这完全是一个技巧，但您可以使用 javascript 获取客户端计算机上的当前时间并将其发送回服务器，然后将会话 cookie 的超时调整为三个月后过期。见[http://www.w3schools.com/jsref/jsref_gettime.asp](http://www.w3schools.com/jsref/jsref_gettime.asp)

检索到客户端时间后，您可以使用 session_cache_expire() 重置会话过期时间。 [http://www.php.net/manual/en/function.session-cache-expire.php](http://www.php.net/manual/en/function.session-cache-expire.php)

**编辑：100% 服务器端选项**

我想到的另一个选择是设置一个没有过期的会话 cookie，但跟踪 cookie 在服务器上设置的时间，比如在 MySQL 表中。您还需要跟踪上次活动。每当登录用户发出请求时，您都可以检查他们会话的开始时间和他们的最后一次活动。如果当前时间大于您可接受的超时时间，则销毁会话服务器端并将它们带回登录页面。如果会话仍然正常，则更新与该用户关联的最后一个活动，以便您可以比较下一个请求。无需客户端代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T15:39:48.053

I fully agree with @MarcB's comment that you can't assume responsibility for how grossly misconfigured a user's machine could be. If you really want to make a difference in this regard I would suggest using PHP to output a small snippet of javascript that includes the time on the server. The snippet would compare that time to the time on the client computer and raise an alert if the time differs by more than X from the server. [say, 24hours or so]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T15:39:38.517

> 有什么诀窍吗？

使用会话 cookie。不是 PHP 会话含义中的会话，而是浏览器会话。[会话 cookie](https://www.rfc-editor.org/rfc/rfc6265)会一直保存到用户关闭浏览器。它们不受用户设置她计算机的时钟的影响。它们将持续到浏览器关闭。

这通常适用于与 PHP 会话相关的 cookie。

对于 PHP，您需要确保将会话 cookie 参数*生命周期*配置为`0`在会话开始之前。那是ini设置[`session.cookie_lifetime`](http://php.net/session.configuration.php#ini.session.cookie-lifetime)或调用[`session_set_cookie_params`](http://php.net/function.session-set-cookie-params.php)函数。

有关 cookie 参数的更详细说明，请参阅[`setcookie`](http://php.net/manual/en/function.setcookie.php)函数的文档。

技巧的第二部分是您将会话开始时间戳和最后活动时间戳放入 PHP`$_SESSION`中。这些是基于服务器的，因此始终具有相同的基础。

检查它们，例如会话是否太旧、上次活动太久等，销毁会话并强制用户再次登录。

您甚至可以使用技巧的第二部分将其与未来 10 年到期的 cookie 结合起来（好吧，浏览器可能不*喜欢*这样，也许您只想要三个月）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-31T15:29:55.880

尝试禁用会话超时或至少将其设置为遥远的未来。这应该够了吧。

# sql - 使用 SQL Server 从 sysdate 和birthdate 计算年龄

> ID：13161401
> 
> 赞同：4
> 
> 时间：2012-10-31T15:28:47.923
> 
> 标签：sql, sql-server

> **可能重复：**
> [如何在 T-SQL 中用年、月和日计算年龄](https://stackoverflow.com/questions/57599/how-to-calculate-age-in-t-sql-with-years-months-and-days)

我只是想使用生日变量来计算年龄（以年为单位）

```
1932-04-29 00:00:00.000 
```

和 SQL Server 中的 SYSDATETIME( )，其中

```
SELECT year(Sysdatetime() - Birthdate) as Age 
```

生产（令人惊讶）：1980

我错过了什么？本来想80的！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T15:33:58.283

计算年龄并不像最初看起来那么简单。

如果你使用`Datediff`你会得到绝对年份的差异，这不是年龄。

例如

```
select DATEDIFF(yy, '1980-12-31', getdate()) 
```

将返回 32，而相关人员的年龄为 31。

对于您的目的，这可能足够准确。更准确，但仍然错误，可以使用

```
select convert(int,DATEDIFF(d, '1933-10-31', getdate())/365.25) 
```

*大多数*时候这是正确的。

或者你可以写一个更复杂的函数......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:43:21.603

```
CREATE Function [dbo].[F_GetAge]( @RefDate Datetime,@Birthdate Datetime) Returns Int as
/*
200040916 Thomas Wassermann
*/
Begin
    Declare @Alter Int
    if @RefDate>@Birthdate
    Select @Alter=(DatePart(yy,CAst(@Refdate-@Birthdate -1 as Float))-1900)
    else select @Alter=0
    Return(@Alter) 
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T15:59:34.817

又快又脏。在闰年等方面可能会有一些错误。

```
-- quick and dirty age in years

declare @birthday datetime

set @birthday = '19320429'

-- this is pretty close, but could have problems with leap years, etc.
select floor(datediff(day, @birthday, CURRENT_TIMESTAMP) / 365.25) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T15:37:18.417

这里发生的情况如下：

1.  两个日期都转换为浮点数，作为自 1900-01-01T00:00:00 以来的天数
2.  浮点数彼此相减，得出它们之间的天数
3.  通过将天数添加到基准日期，结果将转换回日期

要正确计算差异，请使用 DATEDIFF：http: [//msdn.microsoft.com/en-us/library/ms189794.aspx](http://msdn.microsoft.com/en-us/library/ms189794.aspx)

但这仍然存在问题。请参阅此处获取完整的解决方案：[如何根据出生日期和 getDate() 计算年龄（以年为单位）](https://stackoverflow.com/questions/1572110/how-to-calculate-age-in-years-based-on-date-of-birth-and-getdate)

# asp.net - Umbraco 不允许输入 httphandler 调整大小的图像

> ID：13161403
> 
> 赞同：2
> 
> 时间：2012-10-31T15:28:51.697
> 
> 标签：asp.net, tinymce, umbraco, httphandler, ashx

我正在尝试将遗留内容移至 Umbraco v4.9.1。正在迁移的一些照片正在使用通过查询传递的变量使用 httphandler (ImageResizer.ashx) 调整大小。当我尝试保存路径时，url 被替换为“/”或原来的路径。有解决办法吗？标签如下。

```
<img src="/imageresizer.ashx?mw=232&src=/imagePath/image.jpg" /> 
```

url 是正确的，因为如果我在浏览器中输入它，图像就会出现。似乎 Umbraco 正在过滤掉这个 url。

更新：我注意到编辑器将之前的所有内容都砍掉`/imagePath/image.jpg`，只显示它。我试过`TidyEditorContent`在 UmbracoSettings.config 中关闭它，它仍然这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:07:49.477

一种解决方法是对这些 Url 的 src 部分进行 UrlEncode，其中“/”替换为“%2F”。

```
<img src="/imageresizer.ashx?mw=232&src=%2FimagePath%2Fimage.jpg" /> 
```

我不知道您是否可以这样做是您的特殊情况，但这是一种解决方法。

# javascript - Knockout.js 回传到服务器以更新模型

> ID：13161404
> 
> 赞同：7
> 
> 时间：2012-10-31T15:28:59.770
> 
> 标签：javascript, knockout.js

我知道你可以在 knockout.js 中创建 2 路绑定。一旦您更改视图，这会更改 javascript 中的模型，反之亦然。我需要一种方法来通知并将此更改发送回服务器。所以我几乎需要在服务器上发布一个帖子。我怎样才能做到这一点？

我的意思是，我需要以某种方式附加一个事件处理程序，因此每当我更改一次模型时，它会自动将更改回传到服务器。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-31T18:55:39.397

```
function MyViewModel() {
    var self = this;
    self.value1 = ko.observable();
    self.value2 = ko.observable();
    ko.computed(function() {
        $.ajax({
            url: '/path/to/server/endpoint',
            type: 'POST',
            data: {
                value1: self.value1(),
                value2: self.value2()
            }
        });
    });
} 
```

您不需要为每个视图模型属性单独“手动订阅”。只需定义一个`ko.computed`. 所有`ko.computed`的 s 都会被自动通知它们所依赖的 observables 的变化。在上面的代码中，计算取决于 value1 和 value2 可观察对象（在`data`jQuery`$.ajax`函数的参数中）。每当 observable 的值发生变化时，包装的`ko.computed`函数就会执行，并将新值提交给服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:33:41.930

[手动订阅](http://www.knockmeout.net/2011/03/reacting-to-changes-in-knockoutjs.html)怎么样？

> *   可以将手动订阅视为视图模型的绑定。绑定允许您的 UI 对视图模型中的更改做出反应，而手动订阅允许您的视图模型对自身的更改做出反应。这可能意味着对视图模型中的其他相关对象进行更新。
>     
>     
> *   一个常见的例子是当另一个 observable 发生变化时通过 AJAX 触发对 observable 的更新，例如选中复选框或更改下拉值时。在这种情况下，手动订阅就像一个异步计算的 observable。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T15:53:31.543

我通过 json 来做（只有一种方式）：

从 json String 加载您的 ko 绑定（示例）：

```
userSettingsModel = ko.mapping.fromJSON('${userSettingsJSON}');
    ko.applyBindings(userSettingsModel); 
```

将更改后的 ko 对象发送回服务器（示例）：

```
function saveConferencesFilter() {
    // console.log(ko.mapping.toJSON(userSettingsModel));
    $.ajax({
        type: 'PUT',
        url: '/AudioPlace/userSettings/rest',
        dataType: 'json',
        contentType: 'application/json;charset=UTF-8',
        data: ko.mapping.toJSON(userSettingsModel),
        success: function (data) {
            getConferences();
        }
    });
} 
```

# android - 从 Android USB 附件读取会引发 ENODEV IOException

> ID：13161406
> 
> 赞同：11
> 
> 时间：2012-10-31T15:29:00.067
> 
> 标签：android, usb, libusb

因此，我实现了 Android USB 附件 API，这样我就可以将手机插入运行 linux 的笔记本电脑，并将手机置于 USB 附件模式。然后我可以访问附件，打开它，然后开始读取它的内容。我的代码看起来几乎与[文档](http://developer.android.com/guide/topics/connectivity/usb/accessory.html#communicating-a)中的示例相同。主要区别在于我使用单独的读写方法并通过 JNI 从本机代码访问它们。

这就是有趣的地方。在成功读/写一两秒后，从我的笔记本电脑进行的批量传输写入开始出现超时错误，然后在 Android 中对 USB 附件的读取调用会引发带有 ENODEV 错误代码的 IOException。这是在电缆仍然连接并且 UsbManager 仍然在列表中列出附件的情况下，并且我仍然拥有它的权限。

更奇怪的是，我发现如果我在读取循环中设置 100 毫秒的睡眠时间，问题基本上就会消失（尽管有时仍会发生）。在那里睡觉不仅是一件可怕的事情，而且会给我的应用程序带来无法忍受的延迟。睡眠时间越短，hack 的效果就越差，在 10ms 的睡眠时间里它是无效的。

我正在使用批量传输传输大约 20-30kbps 的实时数据（但不是实时到批量传输不够），传输大小范围为 50 到 800 字节，频率约为 20-30Hz。会不会是 USB 的限制？我没有太多的经验，所以我基本上把它当作网络套接字来对待。我是否应该将较小的消息排队并以较低频率但较大的传输一起发送？小型高频批量传输是否存在问题？我会调查这个，但我基本上在这里抓住了稻草。

硬件：

*   笔记本电脑正在运行 Ubuntu 10.04 并使用 libusb 1.0.0。
*   手机是 Galaxy Nexus S，运行库存 Android 4.1.2。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T07:12:08.617

因此，虽然我仍然不了解正在发生的一切，但实施双缓冲方案解决了我的问题。

我发现全速读取的 Java Android 应用程序没有遇到 ENODEV 问题，这使我得出结论，Java 原生接口是我问题的根源。

以前，我以轮询方式直接从 JNI 调用的方法中读取 UsbAccessory。从本机代码到 Java，然后从 Java 到本机 Android 内核的过渡显然让一切变得暴躁。

我的解决方法是从纯 Java 线程（无 JNI 调用）读取/写入 UsbAccessory，然后缓冲该数据以从 JNI 调用的方法读取/写入。

似乎像魅力一样工作。在我在附件端非常一致地收到发送超时之前，然后最终在 Android 端出现如上所述的 IOExeception，现在我没有超时，也没有 IOExceptions。我仍然有点好奇究竟是什么导致了这种行为，但我怀疑它需要强大的 JNI Kung-fu 才能理解。

# c# - 使用 EPPlus 写入 HTTP 响应不起作用

> ID：13161413
> 
> 赞同：2
> 
> 时间：2012-10-31T15:29:41.247
> 
> 标签：c#, export-to-excel, httpresponse, epplus

我正在使用 EPPlus 库将数据写入 Excel。我希望能够在 HTTP 响应对象中写入精细的内容并将其发送，以便客户端然后将文件保存为对话框并可以选择保存文件的位置。

到目前为止，在网上搜索了很多之后，我仍然没有成功，这是我的代码片段 -

我试过了 -

```
using (ExcelPackage package = new ExcelPackage())
{
    //Writing data to the worksheet

    Response.Clear();
    Response.AddHeader("content-disposition", "attachment;  filename=file.xlsx");
    Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";                    
    Response.BinaryWrite(package.GetAsByteArray());
    Response.End();
} 
```

所有在线链接都显示相同的代码，但这仍然不起作用。也没有客户端或服务器端错误。

有什么想法吗？

编辑：因此，如果此代码有效，那么调用此代码的客户端可能存在一些问题？我对请求响应模型没有太多经验，我很有可能搞砸了。

我已经发出了一个包含要写入文件的内容的发布请求 -

```
$post("/app/Services/ExcelDownloadHandler.ashx", { "columnValues": columnValues }); 
```

在 ExcelDownloadHandler.ashx 中，我有

```
 public void ProcessRequest(HttpContext context)
    {
        var r = context.Response;
        Models.DTData excelData = (Models.DTData)Newtonsoft.Json.JsonConvert.DeserializeObject(context.Request.Form["columnValues"], typeof(Models.DTData));

        //Write excelData to worksheet using EPPlus

        Response.Clear();
        Response.AddHeader("content-disposition", "attachment;  filename=file.xlsx");
        Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";                    
        Response.BinaryWrite(package.GetAsByteArray());
        Response.End();
    } 
```

//一旦我对响应进行二进制写入，我应该会在浏览器上看到文件保存对话框，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-01T12:40:07.037

我有同样的问题。添加此处显示的四个注释行会出现提示，允许用户在 IE11 中打开、保存或另存为。

`//Write it back to the client Response.ClearContent(); //Clear contents of current Response. Response.BufferOutput = true; //Buffer output before sending. Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"; Response.AddHeader("content-disposition", "attachment; filename=ExportData.xlsx"); Response.BinaryWrite(pck.GetAsByteArray()); Response.Flush(); //Send buffered output to client. Response.End(); //Stop rqst. process; Raise EndRequest event.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-16T11:01:03.983

我使用 EPPLUS 如下代码：

```
 MemoryStream ms = new MemoryStream();
            pkg.SaveAs(ms);
            byte[] ba = ms.GetBuffer();
            HttpContext.Current.Response.ClearContent();
            HttpContext.Current.Response.AddHeader("Content-Disposition", "attachement; filename=ExportData.xlsx");
            HttpContext.Current.Response.AddHeader("Content-Length", ba.Length.ToString());
            HttpContext.Current.Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
            HttpContext.Current.Response.BinaryWrite(ba);
            HttpContext.Current.Response.Flush();
            HttpContext.Current.Response.End(); 
```

# ruby-on-rails-3 - Rails 3 - 模型错误消息验证消息

> ID：13161424
> 
> 赞同：0
> 
> 时间：2012-10-31T15:30:05.080
> 
> 标签：ruby-on-rails-3, validation

目前我有一个脚本，用于检查以确保未在生产中提交测试卡（因为 Authorize.net 在实时模式下接受测试信用卡），如果提交的信用卡号在`Test_Credit_Cards`像这样的数组：

```
TEST_CREDIT_CARDS = ['370000000000002', '6011000000000012', '4007000000027', '4012888818888']
validate :not_a_test_credit_card
 def not_a_test_credit_card
      self.errors[:cc_number] << "number is invalid!" if TEST_CREDIT_CARDS.include?(cc_number) and Rails.env.production?
    end 
```

现在在前端，错误消息如下所示： `Credit card cc number is invalid!`

无论如何要将消息更改为阅读`Credit Card number is invalid!`我只想`cc`从消息中删除该部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:22:03.050

首先，从错误消息中删除数字：

```
 self.errors[:cc_number] << "is invalid!" if TEST_CREDIT_CARDS.include?(cc_number) and Rails.env.production? 
```

接下来，将 cc_number 的翻译放在 config/locales/en.yml 中：

```
en:
  activerecord:
    attributes:
      credit_card:
        cc_number: "number" 
```

我更喜欢这个答案而不是 Anthony Alberto 的答案，原因有以下三个：

1.  使用 ActiveRecord 现有的翻译引擎总是一个好主意。
2.  这样，每当您在其上添加错误时，cc_number 都会被转换为数字。
3.  错误出在 CreditCard 实例本身并不是真的，它与 cc_number 字段特别相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:02:37.597

那应该这样做：

```
self.errors[:base] << "number is invalid!" if TEST_CREDIT_CARDS.include?(cc_number) and Rails.env.production? 
```

`base`指的是整个对象，而不是特定的属性。

# magento-1.7 - 从 CSV 导入 Magento 中的可配置产品

> ID：13161432
> 
> 赞同：7
> 
> 时间：2012-10-31T15:30:31.053
> 
> 标签：magento-1.7, magento, magmi

我正在尝试将复杂数据附加到我的数据库产品中`Magento`。1.7.0.2，有些是简单的，有些是可配置的。导出的 Magento`CSV`不满足导入的需求。例如，我有这个文件用于导入数据：

```
 sku,_store,_attribute_set,_type,_category,_root_category,_product_websites,price,special_price,special_from_date,special_to_date,image,media_gallery,news_from_date,news_to_date,url_key,url_path,minimal_price,visibility,custom_design,custom_layout_update,page_layout,options_container,required_options,has_options,image_label,small_image_label,thumbnail_label,created_at,updated_at,enable_googlecheckout,gift_message_available,is_imported,country_of_manufacture,msrp_enabled,msrp_display_actual_price_type,msrp,qty,min_qty,use_config_min_qty,is_qty_decimal,backorders,use_config_backorders,min_sale_qty,use_config_min_sale_qty,max_sale_qty,use_config_max_sale_qty,is_in_stock,notify_stock_qty,use_config_notify_stock_qty,manage_stock,use_config_manage_stock,stock_status_changed_auto,use_config_qty_increments,qty_increments,use_config_enable_qty_inc,enable_qty_increments,is_decimal_divided,_links_related_sku,_links_related_position,_links_crosssell_sku,_links_crosssell_position,_links_upsell_sku,_links_upsell_position,_associated_sku,_associated_default_qty,_associated_position,_tier_price_website,_tier_price_customer_group,_tier_price_qty,_tier_price_price,_group_price_website,_group_price_customer_group,_group_price_price,_media_attribute_id,_media_image,_media_lable,_media_position,_media_is_disabled,_super_products_sku,_super_attribute_code,_super_attribute_option,_super_attribute_price_corr
"1202012000009S_freesoul,,PartesDeArriba_Hombre,simple,Hombre/Camisetas,""Default Category"",base,45.0000,,,,/t/n/tn_1202012000009-1_1.jpg,,,,camiseta-freesoul,camiseta-freesoul.html,,1,,,,""Bloque después de la columna de Información"",0,0,""Camiseta Freesoul"",""Camiseta Freesoul"",""Camiseta Freesoul"",""2012-10-05 08:41:01"",""2012-10-05 12:07:06"",1,,No,,""Usar configuración"",""Usar configuración"",,5.0000,0.0000,1,0,0,1,1.0000,1,0.0000,1,1,,1,0,1,0,1,0.0000,1,0,0,,,,,,,,,,,,,,,,,73,/t/n/tn_1202012000009-1_1.jpg,""Camiseta Freesoul"",1,0,,,,"
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,73,/t/n/tn_1202012000009-2_1.jpg,""Camiseta para hombre Freesoul"",2,0,,,,"
"1202012000009M_freesoul,,PartesDeArriba_Hombre,simple,Hombre/Camisetas,""Default Category"",base,45.0000,,,,no_selection,,,,camiseta-freesoul,camiseta-freesoul-58.html,,1,,,,""Bloque después de la columna de Información"",0,0,/,/,/,""2012-10-05 08:41:51"",""2012-10-05 12:07:39"",1,,No,,""Usar configuración"",""Usar configuración"",,5.0000,0.0000,1,0,0,1,1.0000,1,0.0000,1,1,,1,0,1,0,1,0.0000,1,0,0,,,,,,,,,,,,,,,,,73,/t/n/tn_1202012000009-1_1_1.jpg,""Camiseta Freesoul"",1,0,,,,"
",espanol,,,,,,,,,,,,,,,camiseta-freesoul.html,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,73,/t/n/tn_1202012000009-2_1_1.jpg,""Camiseta para hombre Freesoul"",2,0,,,,"
"1202012000009L_freesoul,,PartesDeArriba_Hombre,simple,Hombre/Camisetas,""Default Category"",base,45.0000,,,,no_selection,,,,camiseta-freesoul,camiseta-freesoul-59.html,,1,,,,""Bloque después de la columna de Información"",0,0,/,/,/,""2012-10-05 08:43:19"",""2012-10-05 12:08:03"",1,,No,,""Usar configuración"",""Usar configuración"",,5.0000,0.0000,1,0,0,1,1.0000,1,0.0000,1,1,,1,0,1,0,1,0.0000,1,0,0,,,,,,,,,,,,,,,,,73,/t/n/tn_1202012000009-1_1_1_1.jpg,""Camiseta Freesoul"",1,0,,,,"
",espanol,,,,,,,,,,,,,,,camiseta-freesoul.html,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,73,/t/n/tn_1202012000009-2_1_1_1.jpg,""Camiseta para hombre Freesoul"",2,0,,,,"
"1202012000009XL_freesoul,,PartesDeArriba_Hombre,simple,Hombre/Camisetas,""Default Category"",base,45.0000,,,,no_selection,,,,camiseta-freesoul,camiseta-freesoul-60.html,,1,,,,""Bloque después de la columna de Información"",0,0,/,/,/,""2012-10-05 08:44:34"",""2012-10-05 12:08:29"",1,,No,,""Usar configuración"",""Usar configuración"",,5.0000,0.0000,1,0,0,1,1.0000,1,0.0000,1,1,,1,0,1,0,1,0.0000,1,0,0,,,,,,,,,,,,,,,,,73,/t/n/tn_1202012000009-1_1_1_1_1.jpg,""Camiseta Freesoul"",1,0,,,,"
",espanol,,,,,,,,,,,,,,,camiseta-freesoul.html,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,73,/t/n/tn_1202012000009-2_1_1_1_1.jpg,""Camiseta para hombre Freesoul"",2,0,,,,"
"1202012000009XXL_freesoul,,PartesDeArriba_Hombre,simple,Hombre/Camisetas,""Default Category"",base,45.0000,,,,no_selection,,,,camiseta-freesoul,camiseta-freesoul-61.html,,1,,,,""Bloque después de la columna de Información"",0,0,/,/,/,""2012-10-05 11:39:42"",""2012-10-05 12:08:52"",1,,No,,""Usar configuración"",""Usar configuración"",,5.0000,0.0000,1,0,0,1,1.0000,1,0.0000,1,1,,1,0,1,0,1,0.0000,1,0,0,,,,,,,,,,,,,,,,,73,/t/n/tn_1202012000009-1_1_1_1_1_1.jpg,""Camiseta Freesoul"",1,0,,,,"
",espanol,,,,,,,,,,,,,,,camiseta-freesoul.html,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,73,/t/n/tn_1202012000009-2_1_1_1_1_1.jpg,""Camiseta para hombre Freesoul"",2,0,,,,"
"12020120000093XL_freesoul,,PartesDeArriba_Hombre,simple,Hombre/Camisetas,""Default Category"",base,45.0000,,,,no_selection,,,,camiseta-freesoul,camiseta-freesoul-62.html,,1,,,,""Bloque después de la columna de Información"",0,0,/,/,/,""2012-10-05 11:41:45"",""2012-10-05 12:09:15"",1,,No,,""Usar configuración"",""Usar configuración"",,5.0000,0.0000,1,0,0,1,1.0000,1,0.0000,1,1,,1,0,1,0,1,0.0000,1,0,0,,,,,,,,,,,,,,,,,73,/t/n/tn_1202012000009-1_1_1_1_1_1_1.jpg,""Camiseta Freesoul"",1,0,,,,"
",espanol,,,,,,,,,,,,,,,camiseta-freesoul.html,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,73,/t/n/tn_1202012000009-2_1_1_1_1_1_1.jpg,""Camiseta para hombre Freesoul"",2,0,,,,"
"1202012000009_freesoul,,PartesDeArriba_Hombre,configurable,Hombre/Camisetas,""Default Category"",base,45.0000,,,,/t/n/tn_1202012000009-1_3.jpg,,""2012-10-04 00:00:00"",,camiseta-freesoul-conf,camiseta-freesoul-conf.html,,4,,,,""Bloque después de la columna de Información"",1,1,,,,""2012-10-05 11:59:13"",""2012-10-10 11:02:47"",1,,No,,""Usar configuración"",""Usar configuración"",,0.0000,0.0000,1,0,0,1,1.0000,1,0.0000,1,1,,1,0,1,0,1,0.0000,1,0,0,,,,,,,,,,,,,,,,,73,/t/n/tn_1202012000009-1_3.jpg,,1,0,1202012000009S_freesoul,tallacamisetas_h,S, 
```

我收到此错误：

```
Product Type is invalid or not supported in rows: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13,
Product with specified super products `SKU` not found in rows: 14 
```

如果尝试了这些事情以使其工作：

*   这`SKU`是必需的，我看到有些行没有，因此尝试导入其他行，但类型不正确。
*   我已将 CSV 转换为 utf-8 并且错误仍在继续
*   我已经更改了列名，放入“”并且也不起作用
*   我使用过 Magmi，在运行导入文件时出现此错误：`SQLSTATE[28000] [1045] Access denied for user '<>'@'localhost' (using password: YES)`

**编辑** 在我尝试从 CSV 导入时正确配置 Magmi 后，文件的路径有问题并出现此错误：

```
C:wampwwwmagentoarimport/myfile.csv not found - 
```

问题是路径缺少“/”，因为它应该是：

```
C:wamp/www/magento/var/import/myfile.csv 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T21:37:47.530

如果那是 CSV 的最新版本，那么问题将是由于引号的完成方式。如果您在电子表格应用程序中打开该文件，它的外观如何？我有一种感觉，它看起来不像你期望的那样。

我已经删除了多余的引号，但看起来你也有列数的问题，试试下面的版本，你会明白我的意思。我建议您在电子表格应用程序中查看文件，您会明白我的意思

```
sku,_store,_attribute_set,_type,_category,_root_category,_product_websites,price,special_price,special_from_date,special_to_date,image,media_gallery,news_from_date,news_to_date,url_key,url_path,minimal_price,visibility,custom_design,custom_layout_update,page_layout,options_container,required_options,has_options,image_label,small_image_label,thumbnail_label,created_at,updated_at,enable_googlecheckout,gift_message_available,is_imported,country_of_manufacture,msrp_enabled,msrp_display_actual_price_type,msrp,qty,min_qty,use_config_min_qty,is_qty_decimal,backorders,use_config_backorders,min_sale_qty,use_config_min_sale_qty,max_sale_qty,use_config_max_sale_qty,is_in_stock,notify_stock_qty,use_config_notify_stock_qty,manage_stock,use_config_manage_stock,stock_status_changed_auto,use_config_qty_increments,qty_increments,use_config_enable_qty_inc,enable_qty_increments,is_decimal_divided,_links_related_sku,_links_related_position,_links_crosssell_sku,_links_crosssell_position,_links_upsell_sku,_links_upsell_position,_associated_sku,_associated_default_qty,_associated_position,_tier_price_website,_tier_price_customer_group,_tier_price_qty,_tier_price_price,_group_price_website,_group_price_customer_group,_group_price_price,_media_attribute_id,_media_image,_media_lable,_media_position,_media_is_disabled,_super_products_sku,_super_attribute_code,_super_attribute_option,_super_attribute_price_corr
1202012000009S_freesoul,,PartesDeArriba_Hombre,simple,Hombre/Camisetas,"Default Category",base,45.0000,,,,/t/n/tn_1202012000009-1_1.jpg,,,,camiseta-freesoul,camiseta-freesoul.html,,1,,,,"Bloque después de la columna de Información",0,0,"Camiseta Freesoul","Camiseta Freesoul","Camiseta Freesoul","2012-10-05 08:41:01","2012-10-05 12:07:06",1,,No,,"Usar configuración","Usar configuración",,5.0000,0.0000,1,0,0,1,1.0000,1,0.0000,1,1,,1,0,1,0,1,0.0000,1,0,0,,,,,,,,,,,,,,,,,73,/t/n/tn_1202012000009-1_1.jpg,"Camiseta Freesoul",1,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,73,/t/n/tn_1202012000009-2_1.jpg,"Camiseta para hombre Freesoul",2,0,,,,
1202012000009M_freesoul,,PartesDeArriba_Hombre,simple,Hombre/Camisetas,"Default Category",base,45.0000,,,,no_selection,,,,camiseta-freesoul,camiseta-freesoul-58.html,,1,,,,"Bloque después de la columna de Información",0,0,/,/,/,"2012-10-05 08:41:51","2012-10-05 12:07:39",1,,No,,"Usar configuración","Usar configuración",,5.0000,0.0000,1,0,0,1,1.0000,1,0.0000,1,1,,1,0,1,0,1,0.0000,1,0,0,,,,,,,,,,,,,,,,,73,/t/n/tn_1202012000009-1_1_1.jpg,"Camiseta Freesoul",1,0,,,,,espanol,,,,,,,,,,,,,,,camiseta-freesoul.html,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,73,/t/n/tn_1202012000009-2_1_1.jpg,"Camiseta para hombre Freesoul",2,0,,,,
1202012000009L_freesoul,,PartesDeArriba_Hombre,simple,Hombre/Camisetas,"Default Category",base,45.0000,,,,no_selection,,,,camiseta-freesoul,camiseta-freesoul-59.html,,1,,,,"Bloque después de la columna de Información",0,0,/,/,/,"2012-10-05 08:43:19","2012-10-05 12:08:03",1,,No,,"Usar configuración","Usar configuración",,5.0000,0.0000,1,0,0,1,1.0000,1,0.0000,1,1,,1,0,1,0,1,0.0000,1,0,0,,,,,,,,,,,,,,,,,73,/t/n/tn_1202012000009-1_1_1_1.jpg,"Camiseta Freesoul",1,0,,,,,espanol,,,,,,,,,,,,,,,camiseta-freesoul.html,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,73,/t/n/tn_1202012000009-2_1_1_1.jpg,"Camiseta para hombre Freesoul",2,0,,,,
1202012000009XL_freesoul,,PartesDeArriba_Hombre,simple,Hombre/Camisetas,"Default Category",base,45.0000,,,,no_selection,,,,camiseta-freesoul,camiseta-freesoul-60.html,,1,,,,"Bloque después de la columna de Información",0,0,/,/,/,"2012-10-05 08:44:34","2012-10-05 12:08:29",1,,No,,"Usar configuración","Usar configuración",,5.0000,0.0000,1,0,0,1,1.0000,1,0.0000,1,1,,1,0,1,0,1,0.0000,1,0,0,,,,,,,,,,,,,,,,,73,/t/n/tn_1202012000009-1_1_1_1_1.jpg,"Camiseta Freesoul",1,0,,,,,espanol,,,,,,,,,,,,,,,camiseta-freesoul.html,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,73,/t/n/tn_1202012000009-2_1_1_1_1.jpg,"Camiseta para hombre Freesoul",2,0,,,,
1202012000009XXL_freesoul,,PartesDeArriba_Hombre,simple,Hombre/Camisetas,"Default Category",base,45.0000,,,,no_selection,,,,camiseta-freesoul,camiseta-freesoul-61.html,,1,,,,"Bloque después de la columna de Información",0,0,/,/,/,"2012-10-05 11:39:42","2012-10-05 12:08:52",1,,No,,"Usar configuración","Usar configuración",,5.0000,0.0000,1,0,0,1,1.0000,1,0.0000,1,1,,1,0,1,0,1,0.0000,1,0,0,,,,,,,,,,,,,,,,,73,/t/n/tn_1202012000009-1_1_1_1_1_1.jpg,"Camiseta Freesoul",1,0,,,,,espanol,,,,,,,,,,,,,,,camiseta-freesoul.html,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,73,/t/n/tn_1202012000009-2_1_1_1_1_1.jpg,"Camiseta para hombre Freesoul",2,0,,,,
12020120000093XL_freesoul,,PartesDeArriba_Hombre,simple,Hombre/Camisetas,"Default Category",base,45.0000,,,,no_selection,,,,camiseta-freesoul,camiseta-freesoul-62.html,,1,,,,"Bloque después de la columna de Información",0,0,/,/,/,"2012-10-05 11:41:45","2012-10-05 12:09:15",1,,No,,"Usar configuración","Usar configuración",,5.0000,0.0000,1,0,0,1,1.0000,1,0.0000,1,1,,1,0,1,0,1,0.0000,1,0,0,,,,,,,,,,,,,,,,,73,/t/n/tn_1202012000009-1_1_1_1_1_1_1.jpg,"Camiseta Freesoul",1,0,,,,,espanol,,,,,,,,,,,,,,,camiseta-freesoul.html,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,73,/t/n/tn_1202012000009-2_1_1_1_1_1_1.jpg,"Camiseta para hombre Freesoul",2,0,,,,
1202012000009_freesoul,,PartesDeArriba_Hombre,configurable,Hombre/Camisetas,"Default Category",base,45.0000,,,,/t/n/tn_1202012000009-1_3.jpg,,"2012-10-04 00:00:00",,camiseta-freesoul-conf,camiseta-freesoul-conf.html,,4,,,,"Bloque después de la columna de Información",1,1,,,,"2012-10-05 11:59:13","2012-10-10 11:02:47",1,,No,,"Usar configuración","Usar configuración",,0.0000,0.0000,1,0,0,1,1.0000,1,0.0000,1,1,,1,0,1,0,1,0.0000,1,0,0,,,,,,,,,,,,,,,,,73,/t/n/tn_1202012000009-1_3.jpg,,1,0,1202012000009S_freesoul,tallacamisetas_h,S, 
```

至于 magmi 问题，看起来您没有正确设置全局参数。确保您已在配置页面上指定用户名和密码，**并**单击“保存全局参数”按钮。

如果已正确设置并且您仍然看到问题，那么我认为这将是 MySQL 权限问题

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T11:43:14.737

您应该检查不同的选项：

1.  Magmi[链接](http://sourceforge.net/projects/magmi/)
2.  检查此[视频](https://www.youtube.com/watch?v=XoqPVz8Fq7o)
3.  检查本[手册](http://www.ayasoftware.com/content/how-import-configurable-products-csv-file-magento-system)
4.  另一个有趣的[手册](http://www.magentocommerce.com/wiki/3_-_store_setup_and_management/import_export/how_to_automatically_import_simple_grouped_and_configurable_products)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-15T15:27:03.627

您可以使用 MAGMI 轻松输入可配置产品。

[在这里](http://magelynx.com/shop/import-export-plugin.html)，如果您单击“下载 CSV 示例”选项卡，您可以看到格式示例，还可以查看“基本表”和“可配置产品”部分，然后单击下载并获取与 MAGMI 兼容的导入文件你可以参考。

注意：您需要启用 MAGMI 插件“可配置产品”并进行一些微调，以便正确地将此类 CSV 输入到 MAGMI。

您也可以使用上面链接中提供的插件，因为它基本上是一个 MAGMI 集成到 Magento admin 中，具有一些扩展的附加功能

# android - 在某些手机上使用 Facebook 登录时出现问题

> ID：13161438
> 
> 赞同：0
> 
> 时间：2012-10-31T15:30:52.230
> 
> 标签：android, facebook, facebook-android-sdk

我收到一些人的报告，他们无法使用 Facebook 登录我的应用程序。大多数报告来自三星手机用户。我已要求他们重新安装我的应用程序和 Facebook 应用程序，并尝试安装和不安装 Facebook 应用程序，但这似乎没有帮助。我的应用程序正在使用单点登录。

我已经用多部三星手机进行了测试，但我一直无法重现这个问题。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:36:29.813

原来，用户在“开发人员选项”下选中了“不保留活动”。这基本上会在启动身份验证对话框时杀死尝试进行身份验证的应用程序。

# salesforce - 如何在 Salesforce 中获取所有共享帐户列表？

> ID：13161440
> 
> 赞同：0
> 
> 时间：2012-10-31T15:30:54.523
> 
> 标签：salesforce, apex-code

我对销售人员很陌生，在销售人员中，所有者可以手动与其他用户共享帐户。我需要一个显示所有帐户的手动共享的列表。是否可以使用 apex 类或触发器或任何其他方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T16:19:27.230

检查`AccountShare`表格，尤其是类似的东西：

```
SELECT Id, AccountAccessLevel, AccountId, UserOrGroupId 
FROM AccountShare
WHERE RowCause IN ('Manual', 'TerritoryManual')
LIMIT 100 
```

[您可以在此处](http://www.salesforce.com/us/developer/docs/apexcode/index_Left.htm#StartTopic=Content/apex_bulk_sharing_understanding.htm)阅读有关值的更多信息，还有一个很好的 Apex 示例，用于基于无法在正常共享规则中表达的规则共享记录。

`UserOrGroupId`很棘手 -> 如果它以“005”开头，那是一个用户 ID，并且您的搜索已完成。否则，您将不得不在`Group`表格中查找它。这将包含真正的组（在设置中称为“公共组”）以及系统生成的组，这些组对应于队列、角色、角色+下属、领土等。所以你可能会在这里遇到一些痛苦的递归世界了解谁实际上在这个组中。

我承认我过去很幸运，我在 Group 表中看到的嵌套级别从未超过 2 级。

# sql - SQL ACCESS - 随着时间的推移将行除以特定的总数

> ID：13161441
> 
> 赞同：2
> 
> 时间：2012-10-31T15:30:56.603
> 
> 标签：sql, ms-access

我有一个使用 Access 连接到的 SQL 数据库。

数据结构如下：

```
Date    ELEMENT     VALUE
01-2010 ElementA    12
01-2010 ElementB    43
01-2010 ElementC    53
01-2010 ElementD    24
01-2010 El_Divisor  120
02-2010 ElementA    54
02-2010 ElementB    32
02-2010 ElementC    48
02-2010 ElementD    21
02-2010 El_Divisor  130
etc etc.... 
```

对于每个时间点，我需要获取除以“ElementDivisor”的每个元素，即

```
Date    ELEMENT     VALUE
01-2010 ElementA    = 12 / 120
01-2010 ElementB    = 43 / 120
01-2010 ElementC    = 53 / 120
01-2010 ElementD    = 24 / 120
01-2010 El_Divisor  = 120 / 120 = 1
02-2010 ElementA    = 54 / 130
02-2010 ElementB    = 32 / 130
02-2010 ElementC    = 48 / 130
02-2010 ElementD    = 21 / 130
02-2010 El_Divisor  = 130 / 130 = 1
etc etc.... 
```

注意：“El_Divisor”不是所有其他元素的总和。目前我正在使用一个非常不优雅的多交叉表系统，这是非常次优的。

有人有想法吗？其他 SQL 程序中的想法也非常受欢迎。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:37:17.850

不确定这是否适用于 Access，可能必须将内部选择放入视图中：

```
Select
  v.[Date],
  v.Element,
  v.[Value] / d.[Value] As [Value]
From (
  Select
    e.[Date], e.[Value]
  From
    Elements e
  Where
    e.Element = 'El_Divisor'
 ) As d Inner Join (
   Select
     e.[Date], e.Element, e.[Value]
   From
     Elements e
   Where
     e.Element <> 'El_Divisor' -- take this out if you want to see the El_Divisor/El_Divisor row
 ) as v
   On d.[Date] = v.[Date] 
```

编辑 - 根据 Remou 的建议修复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:54:58.407

我会使用这个解决方案：

```
Select
  tbl_Elements.[Date],
  tbl_Elements.Element,
  tbl_Elements.[Value] / tbl_Elements_1.[Value]
From
  tbl_Elements
    INNER JOIN
  tbl_Elements tbl_Elements_1
    ON tbl_Elements.Date = tbl_Elements_1.Date
Where
  tbl_Elements.Element <> "El_Divisor"
  AND tbl_Elements_1.Element = "El_Divisor" 
```

`tbl_Elements.Element <> "El_Divisor"`如果你想看到除数除以自身，你可以删除。

# javascript - 如何为 div 中的所有元素设置点击处理程序

> ID：13161442
> 
> 赞同：2
> 
> 时间：2012-10-31T15:30:57.020
> 
> 标签：javascript, html

我有一堆元素，我想为所有元素设置一个点击处理程序，然后根据被点击的元素做一些事情。对于这个例子，你可以让它给出一个警告，说明被点击的按钮的类。我的元素看起来像这样：`<input type="button" class="numpad np-txtTP">`它们都包含在同一个元素中。在我的情况下，我想把后面的内容`np-txt`添加到文本框中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:33:39.267

```
document.getElementById("yourdiv").addEventListener("click",function(e) {
    if(e.target && e.target.nodeName == "INPUT") {
        //do something to e.target here
    }
} 
```

这称为事件委托，允许您为一个元素的多个后代绑定一次处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:48:44.863

```
var container = document.getElementById('container');
var elements = container.getElementsByTagName('input');
for(i = 0; i < elements.length; i++){
    elements(i).addEventListener('click', function() {
        alert(this.className);
    });
} 
```

将为 id 元素中的所有输入元素分配一个点击处理程序，`container`这将提醒他们的类名

* * *

如果您可以访问它，这也可以通过以下方式在 jQuery 中轻松完成

```
$(function() {
    $('input[type=button]').click(function() {
        alert($(this).prop('class'));
    });
}); 
```

# asp.net-web-api - ASP.NET Web API 将查询参数反序列化为嵌套的 POCO 操作参数

> ID：13161447
> 
> 赞同：1
> 
> 时间：2012-10-31T15:31:26.730
> 
> 标签：asp.net-web-api, jsonp

已经检查过[这个问题](https://stackoverflow.com/questions/9802170/webapi-deserialize-uri-parameter-to-poco-action-parameter)，但没有回答。

**背景**

我有一个使用 ASP.NET Web API 编写的功能齐全的 RESTful Web 服务，它目前有效地支持[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)，以便从支持 CORS 的浏览器进行跨域访问。问题是当前的业务需求需要支持不支持 CORS 的浏览器。除了支持 CORS 之外，我还在我的 Web 服务中添加[JSON-P](http://en.wikipedia.org/wiki/JSONP)支持，并且通过动作选择器和类型格式化程序的魔力，我的实际 Web 服务代码还没有改变......。

目前，我使用嵌套的 POCO 对象（包含其他对象的对象）作为参数，例如，用于我的 Post 操作。由于我支持 XML 和 JSON 传入，因此 POST 数据可以很好地反序列化为 POCO 对象，因为 XML 和 JSON 都支持嵌套反序列化。但是为了支持 JSON-P，我现在必须通过查询参数模拟 POST。通过 httpMethod 查询参数和自定义操作选择器成功访问 Post 操作方法。

**问题）**

首先，我在阅读其他问题的回复后问这个问题，如果我没有请求正文，注册的类型格式化程序甚至会访问查询参数以进行反序列化吗？JSON-P 请求将是一个没有正文的简单 GET 请求，因此我什至不确定是否可以在我的操作参数中包含 POCO，并使用 GET 请求和仅查询参数对其进行反序列化。

**编辑**：看起来我可以使用自定义格式化程序并使用 QueryStringMapping 来做一些 MediaTypeFormatter 魔术。不过还不确定。

其次，是否可以将查询参数反序列化为 POCO 对象的嵌套属性？如果是这样，查询参数的命名约定是什么？例如，如果 action 参数的类型为 Message，则 Bob 的 XML 将被反序列化为 Message.User.FirstName。

**编辑**：`FormUrlEncodedMediaTypeFormatter`如果我可以将其重定向为使用查询字符串而不是正文，则具有我想要的一些功能。但我也不想要一个`JToken`对象——我想要我的 POCO，但我想我可以`JToken`用 JSON.NET 反序列化 a。所以我可能会从`FormUrlEncodedMediaTypeFormatter`相关的内部类中窃取代码`FormUrlEncodedJson`来制作自定义格式化程序。只需要首先确保问题#1 是可能的。

***示例 POCO***

```
public class User
{
    public string FirstName { get; set;}
}
public class Message
{
   public User User { get; set; }
} 
```

***示例“标准”RESTful POST***

```
POST /api/messages
Content-Type: text/xml

<Message><User><FirstName>Bob</FirstName></User></Message> 
```

***假设的 JSON-P 模拟 POST 示例***

```
<script type="text/javascript"
   src="https://api.mydomain.com/api/messages?callback=MyCallback&httpMethod=Post&User.FirstName=Bob">
</script> 
```

**编辑：总体目标：**如果可能，我现在尝试不理会操作方法，因为它们当前处理支持 RESTful CORS 的请求。我的目标是在不更改方法签名的情况下为调用添加 JSON-P 支持。我已经完成了大部分工作。当它是 JSON-P 请求时，我所剩下的就是能够将查询参数反序列化为操作方法参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T21:28:30.827

尝试将 [FromUri] 添加到您的操作定义中，即：

```
public HttpResponseMessage YourAction([FromUri] YourModel model)
{
...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T14:53:30.967

此时，我似乎必须在 API 中创建两条不同的路径。由于请求参数反序列化的工作方式，模型绑定与媒体类型格式化程序，以及在这个特定区域缺乏挂钩，我不能有一个单一的 Web API 方法并且从查询字符串或内容中获取参数基于各种请求因素。

# java - java - 如何使用java检查xml文件中的打开和关闭标签？

> ID：13161448
> 
> 赞同：5
> 
> 时间：2012-10-31T15:31:26.287
> 
> 标签：java

我有一个 xml 文件，如下所示：

```
<file>
     <students>
          <student>
               <name>Arthur</name>
               <height>168</height>
          </student>
          <student>
               <name>John</name>
               <height>176</height>
          </student>
     </students>
</file> 
```

如何检查每个开始标签是否有结束标签？例如，如果我不提供结束标签：

```
<file>
     <students>
          <student>
               <name>Arthur</name>
               <height>168</height>
          // Ending tag for student missing here
          <student>
               <name>John</name>
               <height>176</height>
          </student>
     </students>
</file> 
```

如何继续解析文件的其余部分？

[我尝试了这里](http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/)解释的 SAX 解析器，但它不太适合我，因为如果我没有像我提供的第二个 xml 代码那样提供结束标记，它会引发异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:41:08.830

*[没有验证您的条件“对于每个开始标签，都有一个结束标签”的 XML 文件格式](http://en.wikipedia.org/wiki/XML#Well-formedness_and_error-handling)*不正确。检查 XML 文件的格式是否正确是 XML 解析器的第一项工作（这是它的第一项任务）。因此，您需要一个 XML 解析器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:41:28.583

您找到的教程中有一个错误。[可能会为同一个元素（ source](http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html#characters%28char%5B%5D,%20int,%20int%29)`characters()` ）多次调用。标记元素结束的正确方法是重置. [注释部分](http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/#comment-77769)包含显示所需更改的代码。`endElement()`

修复了该问题后，您可以进行错误检查`startElement()`以确保文件不会尝试在给定当前状态的情况下启动无效元素。这也将允许您确保`name`仅在元素内部找到`student`元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T15:43:39.440

您可以实现以下算法（伪代码）：

```
String xml = ...
stack = new Stack()

while True:

    tag = extractNextTag(xml)

    // no new tag is found
    if tag == null:
       break

    if (tag.isOpening()):
        stack.push(tag.name)
    else:
        oldTagName = stack.pop()
        if (oldTagName != tag.name):
            error("Open/close tag error")
if ! stack.isEmpty():
    error("Open/close tag error") 
```

您可以使用一些有关解析器的知识或仅编写简单的正则表达式，用 10-20 行代码实现函数 extractNewTag。当然，当您搜索新标签时，您需要从找到的最后一个标签之后的符号开始搜索。

# asp.net - 在 asp.net 中插入动态内容的句子本地化

> ID：13161451
> 
> 赞同：3
> 
> 时间：2012-10-31T15:31:42.517
> 
> 标签：asp.net, localization

我即将本地化以 webforms (asp.net) 编码的 web 应用程序，我想知道多部分可本地化内容的最佳方法。为了说明问题：当您翻译类似“我的名字是 Jonhy，我 12 岁”这样的句子时，如果您假设姓名和年龄是动态检索的，则可能需要更改姓名的位置和翻译中的年龄以使其在目标语言中的语法正确。我在想我们可以使用 string.Format 并将 {0} 和 {1} 放在资源文件中，让翻译器处理。但是，我想知道是否有更好的方法来实现这一目标？我敢肯定这经常出现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T17:35:09.260

我很不幸地从事许多微软软件的本地化工作，我可以告诉你，这是司空见惯的。本地化人员习惯于查看带有占位符的字符串，在您的示例中（“我的名字是 {0}，我 {1} 岁”），这并不难理解。您可能应该为单数添加一个变体，因为如果值为 0 或 1，则年份中的 s 将不正确（但我知道这只是一个示例）。

大公司甚至拥有专有软件来定义和验证单个字符串的规则，然后用于确保翻译人员不会引入错误，例如格式错误的占位符或使字符串的长度超出可接受的范围。

对于占位符字符串，最好使用注释功能（即在 Visual Studio 资源编辑器中的“注释”列中键入），这样您就可以告诉本地化人员有关占位符的信息并给他们一些示例。然后，他们有权在需要时重新排序占位符。但是请注意，即使您这样做，本地化人员也是容易犯错的（而且他们的时间报酬不高），因此在涉及占位符时，错误是司空见惯的。一个真实的例子是打印页面底部的“{0} of {1}”字符串（例如“1 of 3”，与页数有关）。最常见的法语翻译是直译“{0} de {1}”，在特定的页数上下文中是不正确的，在这种情况下应该是“{0} sur {1}”。但是大多数打印的应用程序在法语中的翻译是错误的。如果他们不知道如何使用字符串，你也不能责怪他们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T13:29:24.370

克拉福的好回答。它实际上变得更加复杂：

*CN: 你赢了一辆汽车。=> 你赢得了 {0}*

现在你认为你可以把任何东西放在那里，比如船、假期等。

不幸的是，在其他语言中，文章并不总是相同的。

*DE：Sie haben ein Auto gewonnen。*

但

*Sie haben Ferien gewonnen*（无文章）或*Sie haben eine Gurke gewonnen*。（不同的文章）。意大利语和其他语言也是如此。因此，您必须将文章包含到变量中。

# mysql - 玩！2.0 - BoneCP 返回关闭的连接

> ID：13161452
> 
> 赞同：4
> 
> 时间：2012-10-31T15:31:44.890
> 
> 标签：mysql, playframework, amazon-rds, bonecp

我有一个有趣的问题，我无法解决。我正在使用播放！2.0.4 并使用集成的 BoneCP 连接池来获取 DB 连接。然而，出于某种原因，BoneCP 不断返回关闭的连接。

```
Database Server: Amazon RDS MySQL 5, default timeout settings (which should be 8 hours...) 
```

我的 Play 数据源配置如下所示：

```
db.default.driver=com.mysql.jdbc.Driver
db.default.url="jdbc:mysql://{server}/{schema}?autoReconnect=true&useUnicode=yes&characterEncoding=UTF-8"
db.default.partitionCount=4
db.default.idleConnectionTestPeriod=2 minutes 
```

我曾假设将 idleConnectionTestPeriod 设置为 2 分钟肯定会阻止 BoneCP 返回关闭的连接，但事实并非如此。

每隔一段时间，我的日志中就会出现以下堆栈跟踪：

```
 Exception in thread "pool-6-thread-25" java.sql.SQLException: Connection is closed!
    at com.jolbox.bonecp.ConnectionHandle.checkClosed(ConnectionHandle.java:350)
    at com.jolbox.bonecp.ConnectionHandle.setReadOnly(ConnectionHandle.java:1089)
    at play.api.db.BoneCPApi$$anon$1.onCheckOut(DB.scala:328)
    at com.jolbox.bonecp.BoneCP.getConnection(BoneCP.java:514)
    at com.jolbox.bonecp.BoneCPDataSource.getConnection(BoneCPDataSource.java:114)
    at play.api.db.DBApi$class.getConnection(DB.scala:64)
    at play.api.db.BoneCPApi.getConnection(DB.scala:273)
    at play.api.db.DB$$anonfun$getConnection$1.apply(DB.scala:129)
    at play.api.db.DB$$anonfun$getConnection$1.apply(DB.scala:129)
    at scala.Option.map(Option.scala:133)
    at play.api.db.DB$.getConnection(DB.scala:129)
    at play.api.db.DB.getConnection(DB.scala)
    at play.db.DB.getConnection(DB.java:50)
    at play.db.DB.getConnection(DB.java:43)
    at play.db.DB.getConnection(DB.java:29)
    at com.edatasource.inboxtracker.tasks.TrackSiteEventActionTask.run(TrackSiteEventActionTask.java:23)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

有人知道我该如何解决这个问题吗？目前，我必须将 DB.getConnection() 包装在 try/catch 中，然后捕获 BoneCP 抛出的异常并重试，直到检索到有效连接。似乎这应该是不必要的。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:47:14.053

请尝试使用 0.8.0-beta1。有一个与此相关的错误。

# retina-display - Retina.js 如何不下载较小的图像？

> ID：13161453
> 
> 赞同：1
> 
> 时间：2012-10-31T15:31:51.780
> 
> 标签：retina-display

我一直在研究retina.js，它是一个Javascript 工具，可以查找更高分辨率版本的图像并将它们显示给视网膜用户。我读过它不会为视网膜用户下载较小版本的图像，但我不明白这是怎么回事。

如果它使用 Javascript 来更改图像 href，在浏览器已经获取 HTML 中链接的原始图像之后会运行它吗？

# jquery - 来自 jquery ajax 的 d3js 饼图 - 关联图表上的 json 键和值

> ID：13161454
> 
> 赞同：3
> 
> 时间：2012-10-31T15:31:59.413
> 
> 标签：jquery, d3.js

所以我有一个已经在工作的 jquery ajax 应用程序，我正在尝试创建使用 d3js 的图形。我对 jq 非常熟悉，但这是我使用 d3 的第一个项目。

所以，我的 html 文件使用 jquery.ajax 从 php 脚本/mysql db 请求 json 编码数据。我的所有数据都以类似于以下的格式返回：

`{"status":"Failed","msg":"Bad request."}`

或者如果是这样的数据（这是用户的年龄细分）：

`{"status":"Found","msg":{"under_18":103,"18-23":841,"24-29":1436,"30-36":1058,"37-46":907,"47-56":483,"over_56":200}}`

我已经有登录/会话/cookie 的东西与 jq 一起使用。我可以从我的 ajax api 请求数据，对其进行格式化，然后毫无问题地将其绘制到屏幕上。

所以我尝试使用 d3js 创建一个带有我在上面发布的第二个 json blob 的饼图。这是我正在处理的代码片段：

```
function ageDemographics() {
    closure(
        'action=ageDemographics',
        function(result) {
            var width = 200,
                height = 200,
                outerRadius = Math.min(width, height) / 2,
                innerRadius = outerRadius * .6,
                data = d3.values(result.msg),
                color = d3.scale.category20(),
                donut = d3.layout.pie(),
                arc = d3.svg.arc().innerRadius(0).outerRadius(outerRadius);
            var vis = d3.select("#ageDemographics")
              .append("svg")
                .data([data])
                .attr("width", width)
                .attr("height", height);
            var arcs = vis.selectAll("g.arc")
                .data(donut)
              .enter().append("g")
                .attr("class", "arc")
                .attr("transform", "translate(" + outerRadius + "," + outerRadius + ")");
            arcs.append("path")
                .attr("fill", function(d, i) { return color(i); })
                .attr("d", arc);
            arcs.append("text")
                .attr("transform", function(d) { return "translate(" + arc.centroid(d) + ")"; })
                .attr("dy", ".35em")
                .attr("text-anchor", "middle")
                .attr("display", function(d) { return d.value > .15 ? null : "none"; })
                .text(function(d, i) { return d.value.toFixed(2); });
        },
        function(xhr, status, thrown) {
            setupLoginForm();
            $('#error').html('You have been logged out.<br class="clear"/><br/>');                      
        }
    );
}
function closure(data, success, error) {
    $.ajax({
        type: "POST",
        url: 'http://localhost/analytics/api/ajax.php',
        data: data,
        cache: false,
        success: success,
        error: error
    });
} 
```

我正在使用[d3js git repo 中的饼图示例，](https://github.com/mbostock/d3/blob/master/examples/pie/pie.html)并且图表呈现“ok”，但在上面代码中的第 9 行，我正在调用：

```
data = d3.values(result.msg), 
```

提取 d3 的值以生成饼图。但馅饼上的标签是我给它的值，但我想改为显示键。

例如“18 岁以下”、“18-23 岁”等...

这可能吗？
在第 31 行，我将文本设置为：

```
.text(function(d, i) { return d.value.toFixed(2); }); 
```

但在这种情况下，“d”只是数值。我在想我可以使用“i”来查找原始“result.msg”中的键，但由于键是字符串而不是整数（如数组），我不知道该怎么做。

好的，所以我解决了我的问题。请参阅下面的答案，这是一个新问题，是否可以将标签移出馅饼？或翻车？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T15:37:25.530

我想到了。

创建标签：

```
labels = d3.keys(result.msg) 
```

然后在第 31 行：

```
.text(function(d, i) { return labels[i]; }); 
```

我在这段代码上花了一整天的时间，我一把它贴在这里我就明白了。哈哈

# drupal - 如何使用 Drupal 创建键/值可修改系统？

> ID：13161460
> 
> 赞同：1
> 
> 时间：2012-10-31T15:32:11.543
> 
> 标签：drupal, dictionary, key-value

我只想制作一个页面，版主可以编辑与网站上显示的某些字符串相对应的键/值列表。我真的没有发现模块比模块变量更用户友好。此外，鉴于应用程序的简单性，为此创建一个模块似乎有点野蛮。您知道任何能够在 drupal 7 上执行此操作的模块吗？

编辑：我最后直接创建了一个基于变量模块的模块来管理变量列表。比准备好的东西略长，但非常有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:15:32.530

作为记录。我会选择[数据](http://drupal.org/project/data)模块。

# android - 呼叫日志返回所有日志呼叫以及短信日志，我如何仅过滤呼叫日志？

> ID：13161461
> 
> 赞同：8
> 
> 时间：2012-10-31T15:32:14.630
> 
> 标签：android, calllog

我正在尝试获取所有内容，`Call-Logs excluding SMS`但我得到了一个合并列表。

*如何仅过滤通话记录？*

我正在使用以下代码。

```
String[] strFields = {
            android.provider.CallLog.Calls.NUMBER, 
            android.provider.CallLog.Calls.TYPE,
            android.provider.CallLog.Calls.CACHED_NAME,
            android.provider.CallLog.Calls.CACHED_NUMBER_TYPE,
            android.provider.CallLog.Calls.DATE
};
String strOrder = android.provider.CallLog.Calls.DATE + " DESC"; 

Uri calluri = Uri.parse("content://call_log/calls");
Cursor mCallCursor = getContentResolver().query(
            calluri,
            strFields,
            null,
            null,
            strOrder
); 
```

我正在使用三星 Note 2 进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-25T11:45:16.533

**CallLog.Calls 提供澄清、来电、去电和未接电话的功能。所有类型的 CallLog.Calls 也获取其他记录。**

见下面的代码：

游标 managedCursor = getActivity().getContentResolver().query(CallLog.Calls.CONTENT_URI,null, null,null, null); int number = managedCursor.getColumnIndex(CallLog.Calls.NUMBER); int name = managedCursor.getColumnIndex(CallLog.Calls.CACHED_NAME); int type = managedCursor.getColumnIndex(CallLog.Calls.TYPE); int date = managedCursor.getColumnIndex(CallLog.Calls.DATE); int newcall = managedCursor.getColumnIndex(CallLog.Calls.NEW); int callduration = managedCursor.getColumnIndex(CallLog.Calls.DURATION); int id = managedCursor.getColumnIndex(CallLog.Calls._ID);

```
 while ( managedCursor.moveToNext() ) {
            callNumber = managedCursor.getString( number );
            callName = managedCursor.getString(name);
            callType = managedCursor.getString( type );
            callDate = managedCursor.getString( date );
            isCallNew = managedCursor.getString(newcall);
            Date callDayTime = new Date(Long.valueOf(callDate));
            duration = managedCursor.getString( callduration );
            contactId = managedCursor.getString(id);

         // process log data...
                Log.i("Call Name-----", callNumber);
                String cType = null;

                 int cTypeCode = Integer.parseInt(callType);

                 switch(cTypeCode)
                     {
                             case CallLog.Calls.OUTGOING_TYPE:
                             cType = "OUTGOING";
                             break;

                             case CallLog.Calls.INCOMING_TYPE:
                             cType= "INCOMING";
                             break;

                             case CallLog.Calls.MISSED_TYPE:
                             cType = "MISSED";
                             break;

                     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:38:47.800

我的两个三星设备都有同样的问题。研究这个问题表明三星处理android日志的方式存在问题，它将它们合并。显然，这是不正确且不一致的行为。注意，短信不能通过通话记录API删除，但可以通过通话记录API检索。

# android - 将文件保存在内部存储android中

> ID：13161470
> 
> 赞同：17
> 
> 时间：2012-10-31T15:32:45.353
> 
> 标签：android, local-storage, mkdirs

我是 android 新手，当我尝试将文件保存到内部存储时遇到问题，新示例适用于我的 sdk，但不适用于我的手机。

我正在尝试在索尼爱立信 xperia 中运行示例，顺便说一下使用 android 2.1 ... log.i - 给了我下一行：

```
/data/data/com.example.key/files/text/(my_title) 
```

谢谢。

```
 @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);

            setContentView(R.layout.new_text);

            file = (EditText) findViewById(R.id.title_new);
            entry = (EditText) findViewById(R.id.entry_new);

            btn = (Button) findViewById(R.id.save_new);
            btn.setOnClickListener( new OnClickListener() {

                @Override
                public void onClick(View v) {

                    File myDir = getFilesDir();

                    NEWFILENAME = file.getText().toString();
                    if (NEWFILENAME.contentEquals("")){
                        NEWFILENAME = "UNTITLED";
                    }
                    NEWENTRY = entry.getText().toString();

                    try {

                        File file_new = new File(myDir+"/text/", NEWFILENAME);
                        file_new.createNewFile();

                        Log.i("file", file_new.toString());

                        if (file_new.mkdirs()) {
                            FileOutputStream fos = new FileOutputStream(file_new);

                            fos.write(NEWENTRY.getBytes());
                            fos.flush();
                            fos.close();
                        }

                    } catch (FileNotFoundException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                    Intent textPass = new Intent("com.example.TEXTMENU");
                    startActivity(textPass);
                }
            });

            }

 //That's for creating... then in other activity i'm reading

            @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.text_menu);

            btn = (Button) findViewById(R.id.newNote);
            listfinal = (ListView) findViewById(R.id.listView);

            btn.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Intent textPass = new Intent("com.example.TEXTNEW");
                    startActivity(textPass);

                }
            });

            listfinal.setOnItemClickListener(this);

            File fileWithinMyDir = getApplicationContext().getFilesDir();

            loadbtn = (Button) findViewById(R.id.loadList);

            loadbtn.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    File myDir = getFilesDir();

                    File dir = new File(myDir + "/text/");

                    String[] files = dir.list();

                    //String[] files = getApplicationContext().fileList();
                    List<String> list = new ArrayList<String>();

                    for (int i =0; i < files.length; i++){
                        list.add(files[i]);
                    }
                    ArrayAdapter<String> ad = new ArrayAdapter<String>(TextMenu.this,  android.R.layout.simple_list_item_1,
                                    android.R.id.text1, list);

                    listfinal.setAdapter(ad);
                }
            });
            } 
```

在我的 android 清单中我有权限

```
 <uses-sdk
                    android:minSdkVersion="5"
                    android:targetSdkVersion="15" />

                <uses-permission android:name="android.hardware.camera" />
                <uses-permission android:name="android.permission.INTERNET" />
                <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
                <uses-permission android:name="android.permission.WRITE_INTERNAL_STORAGE" /> 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-10T15:25:09.170

我不太确定您指的是哪个示例，但我这里有两个工作示例，其中至少一个应该适合您的需要。我在运行内部版本号 2.1.A.0.435 的 X10、运行内部版本号 7.0.A.1.303 的 Xperia T 和运行内部版本号 JZO54K 的 Nexus S 上测试了这些

示例 1

```
 String filename = "myfile";
    String outputString = "Hello world!";

    try {
        FileOutputStream outputStream = openFileOutput(filename, Context.MODE_PRIVATE);
        outputStream.write(outputString.getBytes());
        outputStream.close();
    } catch (Exception e) {
        e.printStackTrace();
    }

    try {
        FileInputStream inputStream = openFileInput(filename);
        BufferedReader r = new BufferedReader(new InputStreamReader(inputStream));
        StringBuilder total = new StringBuilder();
        String line;
        while ((line = r.readLine()) != null) {
            total.append(line);
        }
        r.close();
        inputStream.close();
        Log.d("File", "File contents: " + total);
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

示例 2

```
 String filename = "mysecondfile";
    String outputString = "Hello world!";
    File myDir = getFilesDir();

    try {
        File secondFile = new File(myDir + "/text/", filename);
        if (secondFile.getParentFile().mkdirs()) {
            secondFile.createNewFile();
            FileOutputStream fos = new FileOutputStream(secondFile);

            fos.write(outputString.getBytes());
            fos.flush();
            fos.close();
        }
    } catch (Exception e) {
        e.printStackTrace();
    }

    try {
        File secondInputFile = new File(myDir + "/text/", filename);
        InputStream secondInputStream = new BufferedInputStream(new FileInputStream(secondInputFile));
        BufferedReader r = new BufferedReader(new InputStreamReader(secondInputStream));
        StringBuilder total = new StringBuilder();
        String line;
        while ((line = r.readLine()) != null) {
            total.append(line);
        }
        r.close();
        secondInputStream.close();
        Log.d("File", "File contents: " + total);
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-22T00:21:36.283

即使我在清单文件中授予了读写权限，我也遇到了三星 Galaxy S7 的“权限被拒绝”问题。我通过转到手机设置>>应用程序>> [我的应用程序]解决了这个问题，并在许可下允许“存储”。之后工作正常。

# excel - 动态列的 Excel 公式

> ID：13161474
> 
> 赞同：1
> 
> 时间：2012-10-31T15:32:49.853
> 
> 标签：excel, vba, formula, worksheet

我会尽我所能理解这一点。我很讨厌把事情说清楚。:) 所以……就这样……

我有一张电子表格，上面列出了我种植辣椒的种子。这是我的专栏，我会在后面解释更多。

作物 | 颜色 | 一代 | 物种 | 来源 | 斯科维尔 | 风味 | 热 | 笔记 | 2012 类型 | 2012 名称 1 | 2012 名称 2 | 2013 类型 | 2013 名称 1 | 2013 姓名 2 | 等等

行。所以“2012 Type”是一个包含空白、“N”、“O”或“M”的列表。我只关心这个问题是否为空白。如果它不是空白的，我想用绿色背景突出显示作物名称，以表明我已经种植了这种作物。通过条件格式来做到这一点是不费吹灰之力的。但是，当我像往常一样使事情变得更复杂时，我的问题就开始了。当我添加“2013 Type”、“2014 Type”等时，我也想检查这些。所以我的公式变成了 OR；2012 年或 2013 年或 2014 年等是否存在价值。部分问题是。如何编写一个足够动态的公式来获取我每年添加的新字段...2015 年类型、2016 年类型...等？

我还有很多其他事情要做，但我想我可能已经弄清楚了……有点。

感谢您的帮助，不胜感激。

编辑：好的。我觉得我需要解释我是如何尝试开发我的整个工作表的，一个来检查我的想法，另一个来理清目标。

除了我上面解释的内容之外，我还有一些标签，分别是**2012**、**2013**、 grow 、**not-** **grown**、**MasterList**和**Criteria**。

 ********MasterList**就是我们在这里讨论的内容。

**标准**是我用于高级过滤器的标准，用于将作物复制到适当的工作表中。**因此，如果我在“ 2012 类型**”列中标记了一个作物，那么它将被复制到**2012**工作表中。它也将列在“增长”选项卡下。**如果在“ 2013 Type** ”等下标记，则相同。

基本上，我使用标签从我的 MasterList 中过滤掉细节，以便我可以快速找到我正在寻找的内容，或者将所有内容作为一个整体查看。

再一次，我很擅长把事情复杂化。再加上我对 Excel 编码还是很陌生的事实......你有一场灾难。:)

谢谢大家的收听。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T16:15:33.487

尝试在条件格式中使用 COUNTIFS 公式，例如这个公式

`=COUNTIFS($1:$1,"*Type*",2:2,"<>")`

....将计算第 2 行中具有某些值的单元格的数量......并且第 1 行的“类型”包含在同一列的标题行中。

对于您的情况，您想知道 COUNTIFS 公式的结果是否为零（零表示该行的任何类型列中没有条目），因此用于绿色

`=COUNTIFS($1:$1,"*Type*",2:2,"<>")>0`

注意： COUNTIFS 仅在 Excel 2007 及更高版本中可用，对于早期版本，您可以使用此公式

`=SUM(ISNUMBER(SEARCH("type",$1:$1))*(2:2<>""))>0`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:55:52.710

实际上，对于年度练习，当您添加带有 OR 的列时，我会在您提到的过程中修改条件格式。条件应该是（您可能已经知道）：

```
=OR(ISBLANK($J2),ISBLANK($M2)) 
```

我会考虑让它更智能，但我已经有一种感觉，这将涉及更多的编码等，为此付出的努力比年度更新的好处更大。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T19:14:19.267

您可能会考虑重新格式化数据，使其仅在行方向而不是列方向增长。我在想

```
Crop | Color | Generation | Species | Source | Scoville | Flavor | Heat | Notes | Year | Type | Name 1 | Name 2 
```

然后，您可以使用数据透视表、公式和数组公式以各种方式呈现数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T16:15:48.980

我会创建一个工作列（您以后可以随时将其隐藏），它将所有类型列连接到一个列中：

```
=CONCATENATE(K2,N2,Q2,T2,W2,Z2,AC2,AF2,AI2,AL2,AO2,AR2,AU2,AX2) 
```

![例如1](../Images/3c1d77c96ccad86192b9a816440a067d.png)

```
=$A$2:$ZZ$10000 
```

![例2](../Images/dac2e2d27f9625678c14c1c772a36ab5.png)

```
=IF($A2="",FALSE,TRUE) 
```

![例如3](../Images/4807ba24907675347abd7d50b882bb31.png)

输入公式和条件格式公式并准确应用于范围非常重要 - 使用正确的语法（注意 $ 的使用）。

祝你好运。******

# php - GEOIP 并获取计算机 IP 地址 位置？

> ID：13161477
> 
> 赞同：4
> 
> 时间：2012-10-31T15:32:53.267
> 
> 标签：php, ip

我希望我的站点能够找到计算机位置，因此如果有人从伦敦或曼彻斯特等地访问我的站点，并根据他们的计算机位置显示来自某个区域的用户。有点像一个在线约会网站，向您所在地区的用户提供建议。

我一直在查看这个列出全球所有城市的 GEOIP 数据库。但我不知道下一步该怎么做？我是否需要查看从 GEOip 数据库中提取和比较信息的获取 IP 地址脚本？

请有人指出我正确的方向。谢谢。

GeoIP 数据库来自： [http ://dev.maxmind.com/geoip/geolite](http://dev.maxmind.com/geoip/geolite)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T09:37:53.607

It depends on your need. I would suggest you use a web service so you do not need to worry about hosting the database and maintaining it on your own. All you need to do is parse the IP address of your visitor and get the result instantly. I am using the IP2location web service from [this site](http://www.fraudlabs.com/ip2location.aspx).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T15:39:37.470

PHP 具有 GeoIP 的内置函数

[GeoIP 库](http://php.net/manual/en/book.geoip.php)

这个函数可能特别有用，因为它将以数组的形式返回大陆、国家、城市等。

[geoip_record_by_name](http://www.php.net/manual/en/function.geoip-record-by-name.php)

用作`$_SERVER['REMOTE_ADDR']`您的 ip。

`$record = geoip_record_by_name( $_SERVER['REMOTE_ADDR']);`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-31T15:38:47.960

试试下面的代码。

```
$ip =  $_SERVER['REMOTE_ADDR'];
echo $location = file_get_contents("http://api.hostip.info/country.php?ip=$ip"); 
```

不要在您的本地主机中尝试此操作。它将提供 ip 127.0.0.1。

```
echo $location= file_get_contents("http://api.hostip.info/country.php?ip=12.215.42.19");
//outputs US 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T15:40:53.223

我在我的网站上的 PHP 中使用了这个。非常快速且易于消化（xml 等）：[http ://www.geoplugin.com/](http://www.geoplugin.com/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-31T15:41:41.543

请注意，这个数据库是：`In our recent tests, the GeoIP databases tested at 99.8% accurate on a country level, 90% accurate on a state level in the US, and 83% accurate for cities in the US within a 40 kilometer radius.`

我会研究类似的东西：PEAR GeoLite library

在 php 中使用这个库的快速片段：

```
$geoip = Net_GeoIP::getInstance(dirname(__FILE__) . '/data/GeoLiteCity.dat');
$ipaddress = '72.30.2.43'; // Yahoo!
$location = $geoip->lookupLocation($ipaddress);
var_dump($location); 
```

输出将显示类似于：

```
object(Net_GeoIP_Location)[2]
    protected 'aData' =>
        array
        'countryCode' => string 'US' (length=2)
        'countryCode3' => string 'USA' (length=3)
        'countryName' => string 'United States' (length=13)
        'region' => string 'CA' (length=2)
        'city' => string 'Sunnyvale' (length=9)
        'postalCode' => string '94089' (length=5)
        'latitude' => float 37.4249
        'longitude' => float -122.0074
        'areaCode' => int 408
        'dmaCode' => float 807 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T15:40:01.437

您可能已经将[GEOIP](http://us3.php.net/manual/en/book.geoip.php)作为 PECL 扩展安装。如果你不这样做，那么你可以自己安装它。

如果您需要比国家更具体的内容，则必须付费才能获得数据库，但功能仍然存在。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-09T13:49:37.287

您可以使用[https://geoip-db.com](https://geoip-db.com)的服务。返回给定 IP 地址位置的 php JSONP 示例。

```
<?php

    $json = file_get_contents('https://geoip-db.com/jsonp/82.196.6.158');
    $data = jsonp_decode($json);

    print $data->country_code . '<br>';
    print $data->country_name . '<br>';
    print $data->state . '<br>';
    print $data->city . '<br>';
    print $data->postal . '<br>';
    print $data->latitude . '<br>';
    print $data->longitude . '<br>';
    print $data->IPv4 . '<br>';

    function jsonp_decode($jsonp, $assoc = false) {
        if($jsonp[0] !== '[' && $jsonp[0] !== '{') {
            $jsonp = substr($jsonp, strpos($jsonp, '('));
        }
        return json_decode(trim($jsonp,'();'), $assoc);
    }
?> 
```

# authentication - 在本机和 Web javascript 之间传输经过身份验证的用户

> ID：13161479
> 
> 赞同：1
> 
> 时间：2012-10-31T15:33:03.567
> 
> 标签：authentication, cordova, parse-platform

我正在使用 parse.com 和 phonegap，并且希望能够在应用程序的本机和 phonegap/uiwebview 部分之间传递用户凭据。

我在本机端有一个有效的 PFUser，并且希望将相同的有效用户传递/创建到应用程序的 Web 部分。

是否可以使用现有凭据创建用户，也许 Parse.User.current()._sessionToken？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T05:24:24.850

给定一个 sessionToken 和一个用户的 objectId，您就拥有了在 JavaScript 端重新登录用户所需的所有信息。但是，没有支持的方法来执行此操作。您将不得不做一些可怕的事情，例如：

```
var user = new Parse.User();
user.id = "the object id";
user._sessionToken = "the session token";
Parse.User._saveCurrentUser(user);
user.fetch({
  success: function(user) {
    // Now the user is logged in.
  }
}); 
```

但是，这是不受支持的，可能行不通，将来可能会崩溃，并且可能随时起火。所以不要这样做。;-)

# javascript - 有花式框问题的现场网站请

> ID：13161482
> 
> 赞同：0
> 
> 时间：2012-10-31T15:33:07.973
> 
> 标签：javascript, fancybox

我在使用 fancybox 插件时遇到问题，请检查我的代码。当您在 Firefox 中滚动图像时，您似乎需要单击屏幕，然后它是猿战神。

```
<script>
        $(document).ready(function() {
    $(".fancybox").fancybox({
        openEffect  : 'none',
        closeEffect : 'none'
    });
}); 
</script>

<script>
$.ajax({
  url: "user-uploads-thumbnails",
  success: function(data){
     $(data).find("a:contains(.jpg)").each(function(){
        // will loop through 
var images = 'user-uploads-thumbnails/' + $(this).attr("href");
var linkimage = 'user-uploads/' + $(this).attr("href");
// back up $('<p><a href="' + linkimage + '"><img class="resizeme" src="' + images + '"></a></p>').appendTo('#content');
$('<p><a class="fancybox" href="' + linkimage + '" data-fancybox-group="gallery"><img class="resizeme" src="' + images + '"></a></p>').appendTo('#content');
     });
  }
});
//linkimage is user-uploads directory which contains the larger file for fancy box
//user-uploads-thumbnails is only so i can pull smaller images for the infite scroll
//<a href="user-uploads/"'linkimages'"/" >
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:36:41.370

您的 CSS 没有被很好地引用：

[http://ilovesmallies.com/fancybox/source/jquery.fancybox.css?v=2.1.3](http://ilovesmallies.com/fancybox/source/jquery.fancybox.css?v=2.1.3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:37:50.690

当我访问您的网站时，我明白了：

> GET /fancybox/source/jquery.fancybox.css?v=2.1.3 404（未找到）showcase.php:57 GET /scripts/helpers/jquery.fancybox-buttons.js?v=1.0.5 404（未找到）showcase.php:57 GET /fancybox/source/helpers/jquery.fancybox-buttons.css?v=1.0.5 404（未找到）showcase.php:57 GET /fancybox/source/helpers/jquery.fancybox-thumbs .css?v=1.0.7 404（未找到）showcase.php:57

我认为你有一个链接问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T18:22:26.157

有几件事要解决：

**一**：使用 jQuery 的单个实例（最好是最新版本）到目前为止，您正在加载两个：v1.8.2 和 v1.7.2

**二**：如前所述，找不到您的fancybox CSS 样式表（404）。您必须使用正确的路径引用它：

当前： http: [//ilovesmallies.com/fancybox/source/jquery.fancybox.css](http://ilovesmallies.com/fancybox/source/jquery.fancybox.css?v=2.1.3) ?v=2.1.3 (404)

真实的：http: [//ilovesmallies.com/forum/scripts/jquery.fancybox.css ?v=2.1.3](http://ilovesmallies.com/forum/scripts/jquery.fancybox.css?v=2.1.3)

# html - 将 div 的子元素放置在 div 之外是否违反 HTML 规范？

> ID：13161487
> 
> 赞同：1
> 
> 时间：2012-10-31T15:33:18.287
> 
> 标签：html

![在此处输入图像描述](../Images/4ff094018d2e53438db7372fd7c58c04.png)

**上图为以下代码提供了视觉效果**

*   蓝色矩形是父 div。
*   红色方块是子图像。

> ```
>  <!-- a centered fixed-width parent div -->
>  <div style="position: relative; width: 400px; height: 200px; margin: 0px auto;">
>     <img src="46px_square.jpg" style="position: absolute; top: -46px; left: -46px;" />
>  </div> 
> ```

如您所见，从空间角度来看，子元素位于父元素之外，尽管它是 DOM 中的子元素。

根据 HTML 霸主的说法，这是合理使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:35:55.107

很多人使用`fixed`和`absolute`position来定位一些元素，这就是定位的作用，一般这些元素是在文档流`child`之外的，所以元素在元素之外是绝对可以的，与unless和until`parent`没有区别`validation`您在父容器中使用了一些无效的子元素。

例如：

```
<p>
  <p>This won't pass your validation, no matter what positions you use for these element</p>
</p> 
```

并始终使用`position: relative;`您的父元素，以免孩子在野外流淌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:38:30.097

是的，这是完全有效的，但您将使用 position:absolute.relative 让它们坐在适当的位置。当您想在移动设备上加载页面时，这会为页面创建一个警告。

# ruby-on-rails - 是否可以覆盖在“rails new first_app”期间产生的冲突？

> ID：13161488
> 
> 赞同：1
> 
> 时间：2012-10-31T15:33:20.200
> 
> 标签：ruby-on-rails

`$ cd rails_projects` `$ rails new first_app`

我在下面的输出底部遇到了这个冲突：`conflict config/initializers/secret_token.rb`

```
 exist  
   identical  README.rdoc
   identical  Rakefile
   identical  config.ru
   identical  .gitignore
   identical  Gemfile
       exist  app
   identical  app/assets/images/rails.png
   identical  app/assets/javascripts/application.js
   identical  app/assets/stylesheets/application.css
   identical  app/controllers/application_controller.rb
   identical  app/helpers/application_helper.rb
       exist  app/mailers
       exist  app/models
   identical  app/views/layouts/application.html.erb
   identical  app/mailers/.gitkeep
   identical  app/models/.gitkeep
       exist  config
   identical  config/routes.rb
   identical  config/application.rb
   identical  config/environment.rb
       exist  config/environments
   identical  config/environments/development.rb
   identical  config/environments/production.rb
   identical  config/environments/test.rb
       exist  config/initializers
   identical  config/initializers/backtrace_silencers.rb
   identical  config/initializers/inflections.rb
   identical  config/initializers/mime_types.rb
    conflict  config/initializers/secret_token.rb
Overwrite /Users/XXXXXX/rails_projects/first_app/config/initializers/secret_token.rb? (enter "h" for help) [Ynaqdh] 
```

做什么 `config/initializers/secret_token.rb`？我之前运行过它并覆盖了代码并安装了捆绑包，但想知道是否有意想不到的后果。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:12:24.720

Ruby 中基于 Cookie 的会话使用秘密令牌来保证 cookie 是使用秘密字符串创建的，并且不能轻易地重新创建。

更改秘密令牌不会影响任何事情，除非您在用户登录时在生产中更改它，这将导致他们被注销，因为他们不会被识别为具有与您的令牌匹配的有效 cookie。

如果你想生成一个新的秘密令牌，你可以简单地运行：

```
rake secret 
```

（或者，如果您愿意，您可以自己生成一个长字符串）

让这个文件远离任何开源存储库是很重要的，因为通过访问它，人们可能会劫持 Rails 网站上的会话。

有关它的更多信息[提醒：secret_token.rb 如此命名是有原因的。](http://biggestfool.tumblr.com/post/24049554541/reminder-secret-token-rb-is-named-so-for-a-reason)

高温高压

**更新**

此外，如果您想了解更多信息，这里有一篇关于它的优秀文档[文章](http://api.rubyonrails.org/classes/ActionDispatch/Session/CookieStore.html)

# javascript - javascript 我可以动态构建一个函数名来调用吗？

> ID：13161492
> 
> 赞同：0
> 
> 时间：2012-10-31T15:33:31.037
> 
> 标签：javascript, jquery, html

我有调用的函数

```
BeforeSlide1() {
...
}

BeforeSlide2() {
...
} 
```

我希望能够在循环中动态地构建对这些的调用，如下所示：

```
 code = "BeforeSlide" + slide + "()"
        eval(code); 
```

现在我的这段代码显然不起作用（如果它这么简单！）有人知道吗？

好吧，我来画大图。

我有一个由简单脚本运行的幻灯片

```
 function slideshow(slide) {
            if (pauseTimes[slide]>0) {
                    /* if there is another slide after the one currently showing... */

                //Call BeforeSlide-function if there is one
                code = "BeforeSlide" + slide + "();"
                try {
                    eval(code);                 

                } catch(e) {
                    /* do nothing since many slides don't have one */
                }           
                $('#slide'+slide).
                fadeIn(1500,function(){}).
                delay(pauseTimes[slide]).
                fadeOut(1500,function(){slideshow(slide+1);});
                ;
            }
            else {
                    /* if there is no more slide and we've reached the end, try to ajax-refresh the slideshow contents */
                ajaxUpdate();
            }
            } 
```

在幻灯片本身的 HTML 中，前函数和后函数定义如下：

```
 /* fire the slideshow from slide 1 once document is finished loading */
    $(document).ready(function(){
        slideshow(1);
    });

    </script>

    </HEAD>

    <body id="slideshow_body">

    <script id='pauseTimesScript' type='text/javascript'>
    /* Define pauseTimes (array holding duration of each slide) */
    try {
            pauseTimes=null;
            pauseTimes=undefined;
            pauseTimes = new Array();   
            setPauseTimes();        
            /*alert('satte först till null, deklarerade sedan om.');*/
    } catch(e) {
            pauseTimes = new Array();   
            setPauseTimes();        
            /*alert('deklarerade utan att först sätta null.');*/
    }

    function setPauseTimes() {  

        pauseTimes[1]=2000;         

        pauseTimes[2]=2000;         

        pauseTimes[3]=2000;         

    }
    </script>

    <div id="avbrott">Tillfälligt avbrott, visar cachelagrat innehåll sedan 2012-10-31 16:37:35</div>

    <div id="canvas" style="width:1072px;height:732px;">

                <script language='text/javascript'>
                function BeforeSlide1(order=1) {
                alert('here goes slide '+order);

                }
                </script>
                        <div id="slide1" class="slide" style="z-index:1;">

    <div id="slide_bg" style="float:left;height:100%;width:100%;background-color:#ffffff;background-image:url('http://bglabs.evade.netdna-cdn.com/45875kli90/505.jpg');">

        <div style="background-color:#eeeeee;color:#000000;float:right;text-align:center;margin-top:30px;padding:10px;font-weight:bold;font-size:30pt;" id="preview_title">Egypt rocks!</div>
        <div style="clear:both;float:none;"></div>

        <p style="color:#000000;margin:10px 10px 0 20px;font-style:italic;font-size:38pt;" id="preview_data_6">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse feugiat pharetra eros, vitae ullamcorper tellus condimentum sit amet. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Suspendisse in leo erat. Aliquam interdum molestie tortor, nec lacinia mauris viverra eget. Suspendisse aliquam tempor scelerisque. Proin vel purus nunc. Pellentesque ut sapien libero.<br />
    </p>

    </div> 
```

这个 BeforeSlide 函数的目的当然是做其他事情而不是产生警报......

请让我知道我应该如何以更好的方式构建它！=)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:37:26.857

**不要使用评估！**声明的每个函数都可以通过`window`. 试试这个：

```
function test() {
    alert("test");
}

var x = window['test'];
x(); 
```

[**示例小提琴**](http://jsfiddle.net/CwtA2/)

但是，拥有一个函数并将整数作为参数传递给它会更合乎逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:38:42.337

我可能会创建一个如下所示的对象，

```
var myFunc = {
    BeforeSlide1: function () {
        //some stuff
    },
    BeforeSlide2: function () {
        //some stuff
    } 
} 
```

然后你可以简单地打电话`myFunc['BeforeSlide' + num]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T15:37:49.280

```
var code = "this.f = BeforeSlide" + slide + "() {...}";
eval(code); 
```

# linq - linq joint type inference failed to call 'join' error

> ID：13161496
> 
> 赞同：1
> 
> 时间：2012-10-31T15:33:40.613
> 
> 标签：linq

i have 3 tables User, TeamMember and Assessment all three have the user_id column, User is linked to TeamMember by userid and TeamMember and Assessment are linked with user_id(TeamMember) & rater,rated(Assessment)

Im trying to join in with this

```
 from a in db.Assessments
                         join u in db.Team_Members on a.rated equals u.user_id
                         join u2 in db.Team_Members on a.rater equals u2.user_id 
```

It's throwing this error

> The type of one of the expressions in the join clause is incorrect. Type inference failed in the call to 'Join'.

Any idea what going on?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T16:02:24.013

您需要确保`a.rated`/`u.user_id`和`a.rater`/`u2.user_id`是同一类型

# r - 通过R中的数据框行优化“if”函数

> ID：13161503
> 
> 赞同：0
> 
> 时间：2012-10-31T15:34:07.230
> 
> 标签：r

> **可能重复：**
> [R if 带有向量化语句](https://stackoverflow.com/questions/4042413/r-if-with-vectorized-statements)

关于如何在此处最好地矢量化函数有一些类似的问题，但我还没有找到一个按行对数据框应用 if 类型函数的示例。

给出一个数据框 df，其中包含 1912 年至 2010 年的“年份”列，我只是想应用一个测试来判断给定年份是在测试年份之前还是之后（例如 1948 年）并分配一个字符“是”或“否”在另一列中。应该很容易...

目前，我编写的代码如下：

```
i = 1
while (i < nrow(df)) {
     if (df$Year[i] < 1948) {
         df$Test[i] <- "Yes"        
     } else { df$Test[i] <- "No"
     }
     i = i + 1
 } 
```

上面的方法有效，但是对于大型数据集来说很慢，而且我知道在 R 中必须有一个更“优雅”的解决方案。是否可以使用更好的方法？还是有更简单的东西？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T15:36:28.397

`ifelse`在这里更有意义。

```
df$Test <- ifelse(df$Year < 1948, "Yes", "No") 
```

`ifelse`是 if/else 构造的矢量化版本。使用 R 时，如果可能，使用矢量化解决方案几乎总是更有意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T15:37:43.100

`ifelse()`相反，您希望它是矢量化`returns a value with the same shape as test which is filled with elements selected from either yes or no depending on whether the element of test is TRUE or FALSE`的，并且，或者说帮助页面。

例如：

```
> years <- 1980:2000

> ifelse(years < 1986, "old", "young")
 [1] "old"   "old"   "old"   "old"   "old"   "old"   "young" "young" "young" "young" "young" "young" "young" "young" "young"
[16] "young" "young" "young" "young" "young" "young" 
```

如果你有两个以上的条件，你甚至可以嵌套`ifelse()`语句，如果你熟悉的话，类似于 Excel`=IF()`

```
ifelse(years < 1986, "old", ifelse(years < 1996, "medium", "young")) 
```

# javascript - 从 JS 读取的 CSV 文件上的平方问号符号

> ID：13161517
> 
> 赞同：1
> 
> 时间：2012-10-31T15:35:10.210
> 
> 标签：javascript, jquery, unicode, utf-8, non-ascii-characters

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T16:18:15.443

This character is U+FFFD, REPLACEMENT CHARACTER, commonly used to replace invalid data in streams thought to be some Unicode encoding.

For example if you had the text "Résumé" encoded as IS0 8859-1 and wanted to convert it to UTF-16, but told the conversion routine that the text was UTF-8 then the library would probably produce the UTF-16 text "R�sum�" (the other alternative would be to throw an error and not give any results).

Another way these may appear is if a web page declares that it is UTF-8 but it is not actually UTF-8\. The browser is likely to do the re-encoding described above and the replacement characters will show up in the rendered web-page, but viewing the source with an editor that ignores or disregards the HTML encoding info will show the characters correctly.

From your comments it looks like your process is something like:

Excel -> export to csv -> process csv in js -> produce html

Windows software typically uses the platform's 'encoding for non-Unicode programs' for encoding eight bit text, not UTF-8\. So the CSV file is probably Windows CP1252 (If you're using a version of windows set up for most of the western world), and if your javascript program is reading that data and copying it directly into HTML source that's supposed to be UTF-8, that would cause a problem that fits your description.

What you need to do convert from whatever encoding the CSV is using to UTF-8\. Javascript doesn't really have the facilities to do this so your best bet is probably to convert the file after exporting it from Excel but before accessing it in JS.

Other alternatives are to change the encoding the HTML page is using to whatever the csv uses, or to not specify an encoding and leave it up to the browser to guess.

# javascript - Breaking down a date into segments

> ID：13161520
> 
> 赞同：0
> 
> 时间：2012-10-31T15:35:33.367
> 
> 标签：javascript, jquery, html

> **Possible Duplicate:**
> [Simplest way to parse a Date in Javascript](https://stackoverflow.com/questions/1258310/simplest-way-to-parse-a-date-in-javascript)

I understand how do get the data and break it down into it's segments, i.e.

```
alert( ( new Date ).getDate() ); 
```

and

```
alert( ( new Date ).getFullYear() );
alert( ( new Date ).getFullMonth() ); 
```

etc etc.

But how do I do the same but use a date from a html textbox? instead of reading `new Date`?

The date in the HTML box would be formated as follows

31/10/2012

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:40:45.533

你可以试试：

```
var datearray = input.value.split("/");

var date = new Date(datearray[2],datearray[1] - 1,datearray[0]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:39:31.133

如果您的文本框具有适合日期对象的字符串格式，您可以使用：

```
var aDate = new Date($("textbox").val()); 
```

但是，如果您没有将它写在文本框中，就像在传递给对象的字符串中一样，您的变量将得到 null。

仅供参考，我制作了一个插件，它很好地“扩展”了 Date 对象，并预先格式化了日期/时间，其中包括基本的 SQL 日期时间格式。

只需转到[***这个 jsFiddle***](http://jsfiddle.net/SpYk3/frMBY/)，将代码复制到 js 文件中，然后在 jQuery 之后将其链接到标题中`Begin Plugin`。`End Plugin`

使用和上面的例子一样简单：

```
var aDate = new DateTime($("textbox").val()); 
```

并从中获得特定格式：

```
var sqlDate = aDate.formats.compound.mySQL; 
```

# asp.net - Ext.net 2.0 ComboBox Store

> ID：13161521
> 
> 赞同：0
> 
> 时间：2012-10-31T15:35:35.230
> 
> 标签：asp.net, extjs, sencha-touch, ext.net

I have a ComboBox Control:

```
<ext:ComboBox id="comboDatabase"></ext:ComboBox> 
```

In my code I populate the ComboBox Store by:

```
comboDatabase.Store.Primary.DataSource = dbList
comboDatabase.Store.Primary.DataBind() 
```

However, in my javascript, when I do `comboDatabase.getStore().data.items`, it returns nothing.

Any idea why? Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T05:11:47.880

只需定义商店：

```
<ext:ComboBox ID="PACKING" runat="server" FieldLabel="PACKING" 
           ValueField="id" DisplayField="pk" QueryMode="Local">
  <Store>
    <ext:Store ID="PackingStore" runat="server" Data='<%# packings %>'>
      <Model>
        <ext:Model runat="server">
          <Fields>
            <ext:ModelField Name="id" />
            <ext:ModelField Name="pk" />
          </Fields>
        </ext:Model>
      </Model>
      <Reader>
        <ext:ArrayReader IDProperty="id" />
      </Reader>
    </ext:Store>
  </Store>
</ext:ComboBox> 
```

C＃：

```
protected object packings
{
  get { return ctx.Packings.Select(p => new object[] { p.id, p.PackingName }).ToArray<object>();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-29T17:52:46.033

Is Easy，ext.net 1.x 的相同代码

EXT.NET 代码

```
<ext:Store ID="Store1" runat="server" >                        
    <Model>
        <ext:Model runat="server" IDProperty="code">
        <Fields>
            <ext:ModelField Name="code_item" />
            <ext:ModelField Name="description_item" />
        </Fields>                                
        </ext:Model>
    </Model>                                               
</ext:Store> 
```

...

```
<ext:combobox id="combo" runat="server" storeid="Store1" displayfield="description_item" valuefield="code_item" /> 
```

C# 代码

```
private void LoadStore(Store store, string query)
{
        OdbcConnection Odbc = new OdbcConnection();
    try
    {
        Odbc.ConnectionString = mntClass.HelperDB.strConn(); //mntClass is my particular dll
        Odbc.Open();
        DataSet objDataset1 = new DataSet();
        objDataset1 = mntClass.HelperDB.ExecuteSelectQuery(Odbc, query);
        store.DataSource = objDataset1;
        store.DataBind();   
    }
    catch (OdbcException)
    {

    }
    finally
    {
      Odbc.Close();
    }
} 
```

# tsql - Inserting a record into Top of Table

> ID：13161522
> 
> 赞同：0
> 
> 时间：2012-10-31T15:35:39.460
> 
> 标签：tsql, insert, ssms

Hopefully an easy question for someone with more experience than me. I have a stored procedure that Inserts records into a table. Like all databases that I have worked with, when you insert a record it inserts it into the bottom of the table. I would like to insert it to the top of the table and then move all the existing records down by one (I assume this would happen automatically with the insert).

I want to to do this because I'm using the 'Top #' keyword. I am pretty sure that I could just leave it the way it is, and instead of using the 'Top" keyword, I could use the 'Bottom" keyword. But I want to make it easier for people reading it that aren't familiar with it, so they can instantly see the newest entries. I'm going to keep researching this on my own, but If someone knew off the top of their head and could save me the time that would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:55:28.737

该表上是否有任何增量 id。如果是，则按降序在该 id 上创建聚集索引

# asp.net-mvc-3 - querystring in URL is allowed or not?

> ID：13161524
> 
> 赞同：0
> 
> 时间：2012-10-31T15:35:48.603
> 
> 标签：asp.net-mvc-3

my view have two dropdown and one submit buttom if no value is selected and if form get sumbited with GET method then my URL will be `http://localhost:53372/question/index?Index=List&type=&stage=&mid=1&mod=5`.

but i m applying an ActionFilter with `OnActionExcuting()` overriden method. so after submitting form URL is like `http://localhost:53372/question/index?index=List&mid=1&mod=5`.

**where other two QueryString is gone?**

```
public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (filterContext.RequestContext.HttpContext.Request.QueryString["mid"] == null || filterContext.RequestContext.HttpContext.Request.QueryString["mod"] == null)
        {
            mid = Convert.ToString(HttpUtility.ParseQueryString(filterContext.RequestContext.HttpContext.Request.UrlReferrer.Query)["mid"]);
            mod = Convert.ToString(HttpUtility.ParseQueryString(filterContext.RequestContext.HttpContext.Request.UrlReferrer.Query)["mod"]);
            if (!string.IsNullOrEmpty(mid) || !string.IsNullOrEmpty(mod))
            {
                RouteValueDictionary redirecttargetDictionary = new RouteValueDictionary();
                NameValueCollection Qstr = null;
                if (filterContext.HttpContext.Request.RequestType == "GET")
                {
                    Qstr = HttpUtility.ParseQueryString(filterContext.HttpContext.Request.Url.Query);
                    foreach (string item in Qstr)
                    {
                        redirecttargetDictionary.Add(item, Qstr[item]);
                    }
                    if (Qstr["mid"] == null)
                    {
                        redirecttargetDictionary.Add("mid", mid);
                    }
                    if (Qstr["mod"] == null)
                    {
                        redirecttargetDictionary.Add("mod", mod);
                    }
                    filterContext.Result = new RedirectToRouteResult(redirecttargetDictionary);
                }
            }
        }           
    } 
```

but if i select Dropdown value then all queryString is in URL.

QueryString with no values `stage=&type=` are not allowed?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:48:30.017

默认情况下，MVC 将数据作为查询字符串传递，除非您提交表单，在这种情况下，查询字符串被捆绑为 HttpRequest 对象的一部分。您可以直接使用`FormCollection`对象或作为对象的一部分访问查询字符串`HttpRequest`。访问查询字符串最直接的方法是通过`FormCollection`对象如下 [HttpPost] public ActionResult SubmitData(FormCollection form) { foreach(var key in form.AllKeys) { switch(key) { case "stage": // do some工作休息；case "type": // 做更多工作 break; } } return RedirectToAction("SomeAction"); }

我已经看到空查询字符串值在某些情况下会导致某些浏览器（我认为是 IE）出现问题。我建议使用标记填充您的 DropDownList，而不是没有值，例如“Select...”和值 -1。

```
var dropDownList = new List<SelectListItem>();

dropDownList.Add(new SelectListItem{ Text = "Select", Value = "-1"} ); 
```

接着

```
@Html.DropDownList("stage", Model.Stages) 
```

或类似的东西。

我希望这有帮助 ：）

# linux - 将两个 crontab 条目合并为一个条目

> ID：13161526
> 
> 赞同：1
> 
> 时间：2012-10-31T15:35:59.467
> 
> 标签：linux, cron, crontab

在我的 crontab 文件中，我有两个条目

```
00 13 * * * DISPLAY=:0.0 /home/noob/.scripts/backup.sh 
00 21 * * * DISPLAY=:0.0 /home/noob/.scripts/backup.sh 
```

现在我可以编写一个在`backup.sh`下午 1:00 和晚上 9:00 执行文件的条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:39:41.297

```
00 13,21 * * * DISPLAY=:0.0 /home/noob/.scripts/backup.sh 
```

# c# - Outlines around all of my objects are gone in all projects VS 2010

> ID：13161527
> 
> 赞同：1
> 
> 时间：2012-10-31T15:36:05.037
> 
> 标签：c#, visual-studio-2010

My initial question was unclear (because to be honest I am not sure what the dotted lines around every control in the form in Design view is called). Reinstated: All controls I have added to my form have a dotted line around them so you can see their shape and size. Those dotted lines have always been there by default and since have disappeared. I have not changed anything that I know of and now I am unable to view all of my controls because some do not contain text. For example, if you add a label to your form but leave the Text blank, you are unable to see it in design view. There used to be a dotted line around all of my controls so I knew exactly where they were and what size they were. It is now gone.

This is as clear as I can describe it unfortunately.

I have uploaded a pic here [Pic of what it looks like now](http://i48.tinypic.com/aylwfq.png)

These are pictureboxes and there is no easy way to see where their edges are without clicking on them and even then it only shows dots to drag and drop. I used to have dotted lines around all of my controls and now they are "invisible" I need to get them back.

I was able to find a pic of the way it used to be and have uploaded it here: [Pic of the way it should look like](http://i46.tinypic.com/2d0c4dy.png)

These are Windows forms

I hope this makes sense and I am literally at a stand still until I can get this resolved.

Thanks in advance!

DH

# c++ - Error LNK2001 while using my static library

> ID：13161528
> 
> 赞同：0
> 
> 时间：2012-10-31T15:36:05.317
> 
> 标签：c++, windows, static-libraries, lnk2001, const-char

I'm having LNK2001 issues while building my solution.

The solution has 3 projects, one of them if just a main that returns 0, so I'll exclude it from the problem.

One project (**SerialPort**) is a .lib that implements a class (`SerialPort`), while the other (**SerialHost**) simply creates an instance of `SerialPort`.

I'm thinking the problem is somewhere in the project settings of **SerialHost**. Here goes the **SerialHost** project code:

```
#include "SerialPort.h"

int main (int argc, char *argv[])
{
    SerialPort* serialHost = new SerialPort();

    serialHost->init(PORT_HOST,"COM1");

    delete serialhost;
    return 0;
} 
```

And building yields:

> main.obj : error LNK2001: unresolved external symbol "public: unsigned long __thiscall SerialPort::init(unsigned long,char const *)" (?init@SerialPort@@QAEKKPBD@Z)

I've searched SO for answers and found no solution that cured my problem.

To set the project settings I followed [this](http://msdn.microsoft.com/en-us/library/ms235627%28v=vs.100%29.aspx) msnd walkthrough.

I also tried adding specifically the .lib to the Additional Dependencies in Linker-Input.

Then I read [this](https://stackoverflow.com/questions/9126415/strange-lnk2001-linker-error) SO thread, and setting the option "Treat wchar_t as build-in type (Properties->C/C++->Language-> ... ) to No still didn't work. I thought it would work because `SerialPort::init` is declared as

```
DWORD init (DWORD portType, LPCTSTR portName); 
```

*   it thought the fault was with the use of the LPCTSTR type.

The **SerialPort** project builds OK (the `init` method is implemented in the .cpp).

I'm just beginning to work with my own static libs in VS so I may be doing some basic error here.

Thank you in advance for your help!

* * *

**Additional Info:**

I tried commenting out the `init` and using another method and it built just fine! This code:

```
int main (int argc, char *argv[])
{
    SerialPort* serialHost = new SerialPort();

    serialHost->init(PORT_HOST,"COM1");

    serialHost->runTerminal();

    return 0;
} 
```

in **SerialHost** just yields the error in `init` - if I comment `init`, no linking errors appear.

Here is the implementation for SerialPort

```
// SerialPort.h
#pragma once

#include <windows.h>
#include <iostream>

#define READ_BUFFER_SIZE 1
#define PORT_BAUD_RATE CBR_9600
#define PORT_PARITY NOPARITY
#define PORT_BYTE_SIZE 8
#define PORT_STOP_BITS ONESTOPBIT
#define PORT_HOST 0
#define PORT_DEVICE 1

class SerialPort
{
public:
    SerialPort          (void);
    virtual ~SerialPort (void);

    DWORD init          (DWORD portType, LPCTSTR portName);

    DWORD runTerminal   (void);
    DWORD runDevice     (void);

    LPCTSTR getVersion  (void);

protected:

    // Port properties
    HANDLE _hSerialComm;

    // Buffers
    DWORD _dwBytesRead;
    DWORD _dwEvtCodeRecvd;
    std::string _inputString;

    DWORD _eventNum;
    COMSTAT _portStats;
    COMMCONFIG _portDefaultConfig;
    DCB _portCfgDCB;

    std::string _version;

    DWORD configureSerialPort   (LPCTSTR portName, DWORD portType);
    DWORD resetPortCfg          (LPCTSTR portName);
    HANDLE openPort             (LPCTSTR portName, DWORD accessFlags);
    DWORD configureDCB          (HANDLE hSerialPort);
    DWORD configureCommMask     (HANDLE hSerialPort);
    DWORD configureTimeOuts     (HANDLE hSerialPort);

    DWORD clearPortIO           (HANDLE hSerialPort);

    VOID printPortConfig        (DCB portCfgDCB, LPCTSTR portName);
    VOID printPortErrors        (DWORD portErrors, COMSTAT portStats);
    DWORD checkCommErrors       (HANDLE hSerialPort);

};

// SerialPort.cpp - just init method
DWORD SerialPort::init(DWORD portType,LPCTSTR portName)
{
    _hSerialComm = NULL;
    _dwBytesRead = 0;
    _dwEvtCodeRecvd = 0;
    _eventNum = 0;

    memset(&_portStats,0,sizeof(_portStats));
    memset(&_portDefaultConfig,0,sizeof(_portDefaultConfig));
    memset(&_portCfgDCB,0,sizeof(_portCfgDCB));

    // Configure Serial Port
    configureSerialPort(portName,portType);

    return 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:24:03.953

问题出在`SerialPort::init(unsigned long,char const *)" (?init@SerialPort@@QAEKKPBD@Z)`

正如我所料，类型`LPCTSTR`是`char const*`而不是。`const char*`

因此传递`"COM1"`参数`init`导致错误！

我用过`LPCSTR`，一切正常。我读了[更多](https://stackoverflow.com/questions/8091770/const-char-and-char-const-are-they-the-same)，他们应该是同样的事情......然后我尝试将我的`LPCSTR`( `const char*`) 参数转换为`LPCTSTR`( `char const*`) 并且它也有效。

如果它们应该是相同的，我仍然希望了解为什么会发生这种情况，所以我现在不会接受我自己的答案！

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:45:55.183

这看起来像 SerialHost 没有链接 SerialPort。在 VS 2008 中，您可以通过转到 Project > Project Dependencies for SerialHost 并让 SerialHost 依赖于 SerialPort 来实现此目的。

这是假设 SerialPort 项目实际上包含 SerialPort::init() 的定义。

# javascript - 获取当前脚本标签

> ID：13161532
> 
> 赞同：3
> 
> 时间：2012-10-31T15:36:34.510
> 
> 标签：javascript

> **可能重复：**
> [如何引用加载当前执行脚本的脚本标签？](https://stackoverflow.com/questions/403967/how-may-i-reference-the-script-tag-that-loaded-the-currently-executing-script)

我不想在这个表单的脚本中实现这个配置选项

```
<script src="x.js" attr1="val1" attr2="val2" attr3="val3"></script> 
```

问题是找到当前的脚本标签，并且 x.js 可以在各种路径`fold1/x.js` `fold1/fold2/x.js` `../fold/x.js` 等中......我认为这是可能的，因为 Dojo 框架使用这种方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T15:39:05.073

我认为您可以安全地执行此操作，而不是在 DOM 就绪模式下。

```
var scripts = document.getElementsByTagName("script"),
selfScript = scripts[scripts.length-1]; 
```

我建议如果可以的话，将任何配置放在另一个脚本块中。

```
<script>
  window.attr1 = 'val1';
  window.attr2 = 'val2';
  window.attr3 = 'val3';
</script>
<script src="x.js"></script> 
```

# c++ - OpenGL 渲染命令

> ID：13161536
> 
> 赞同：2
> 
> 时间：2012-10-31T15:36:48.990
> 
> 标签：c++, opengl, textures

我想要做的是从我的程序中获取几个纹理并将它们渲染成一个纹理并将其发送回，但我只希望它在我告诉它时渲染它们。有没有办法摆脱opengl的主循环，这样我就可以在我想要的时候渲染，或者我可以暂停主循环直到我想渲染下一个纹理？

编辑：我现在正在使用 Glut 和 Glew。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T15:41:34.130

OpenGL 没有主循环。你在使用某种框架吗？是什么让您认为您无法控制渲染何时发生？您应该可以控制何时交换缓冲区或调用`glFlush()`. 听起来您更像是需要更好地理解 C++ 控制结构，但是您的问题中提供的信息非常有限，很难知道。

# dart - 更新尚未在 pub 上更新的库

> ID：13161538
> 
> 赞同：2
> 
> 时间：2012-10-31T15:36:55.603
> 
> 标签：dart, dart-pub

我想使用更新的库（Vadim Tsushko 在[https://github.com/vadimtsushko/mongo_dart](https://github.com/vadimtsushko/mongo_dart)的 mongo_dart ），但 Pub (pub.dartlang.org) 仍然有旧的，所以 pub 更新没有帮助。我在我的包目录中替换了 mongo_dart。如何为引用它的所有应用程序更新包？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T15:55:28.733

您可以临时更改`pubspec.yaml`以将依赖项从[pub.dartlang.org](http://pub.dartlang.org)重定向到具体的 GitHub 存储库。因为`mongo_dart`它是：

```
mongo_dart:
  git: git://github.com/vadimtsushko/mongo_dart.git 
```

# c# - 如何使用类（本地主机）发送邮件？

> ID：13161540
> 
> 赞同：0
> 
> 时间：2012-10-31T15:36:56.280
> 
> 标签：c#, asp.net, .net, class, visual-studio-2005

电子邮件 + 附件 (vCard) 发送。

我不知道我做错了什么，搜索了 2 天的类似问题，但 Stackoverflow 或 Google 上的问题/解决方案不符合我的描述。

因为我用不同的方式编写了我的代码

**发送邮件+附件类：**

```
using System;
using System.Data;
using System.Configuration;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.Web.Configuration;
using System.Net.Mail;
using System.Net.Configuration;
using Compulutions.Net;
using Compulutions.Web;
using System.IO;
using System.Web.Mail;
using System.Collections.Generic;
using System.ComponentModel;
using System.Web.Services.Description;

// System.Web.Mail.SmtpMail.SmtpServer
// using System.Web.Mail.SmtpClient;

namespace vCardGenerator.Website
{
    public class SendvCard
    {
        public void MailvCard(string recipient, string filename)
        {
            Mailer smtp = new Mailer("localhost");

            /* SMTP - port 25 */

            smtp.AddAttachment(filename); //.vcf file Path
            smtp.FromAddress = new MailAddress ("random@mail.com");
            smtp.Subject = "vCard";
            smtp.MailBody = "Attachment is a vCard";
            smtp.AddRecipient(recipient);

#if !DEBUG
            try
            {
#endif
                smtp.SendMail();
#if !DEBUG
            }

            catch (Exception ex)
            {
                Response.Write("Exception Occured:   " + ex);
                    //Responds.Write("Sending vCard Failed! Please try again")
            }
#endif

            //  File.Delete(filename);

            //      vCard.vcf Delete after being send
                FileInfo DeleteFileInfo = new FileInfo(filename);

        /*  FileInfo DeleteFileInfo = new FileInfo("C:\\local\\vCardGenerator.Website" + "\\" + "FirstName_LastName" + ".vcf");
            if (DeleteFileInfo.Exists)
                File.Delete("C:\\local\\vCardGenerator.Website" + "\\" + "FirstName_LastName" + ".vcf"); */
        }
    }
} 
```

**按钮发送：**

```
protected void btnSend_Click(object sender, EventArgs e)
{
// Send mail with attachment
using (Attachment data = new Attachment("C:\\local\\vCardGenerator.Website\\" + "FirstName_LastName.vcf", MediaTypeNames.Application.Octet))
{

SendvCard smtp = new SendvCard();
}

lblStatus.Text = "Send to:" + " " + txtMail.Text;

FileInfo DeleteFileInfo = new FileInfo("C:\\local\\vCardGenerator.Website" + "\\" + "FirstName_LastName" + ".vcf");
if (DeleteFileInfo.Exists)
File.Delete("C:\\local\\vCardGenerator.Website" + "\\" + "FirstName_LastName" +".vcf");
  }
 }
} 
```

如果需要，愿意提供任何其他/更多信息。

试图得到专业人士的帮助，至少在烧死我之前给我一个解决方案。

真诚的，
绝望的生物。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:39:23.430

看起来您只创建了一个实例`SendvCard`并且没有调用类中的 send 方法`(MailvCard)`。

```
 SendvCard smtp = new SendvCard();

 smtp.MailvCard("user@domain.com", "filename"); // calls the method on the class 
```

# c# - Web 应用程序和 Web 服务是如何编译的？

> ID：13161546
> 
> 赞同：0
> 
> 时间：2012-10-31T15:37:10.447
> 
> 标签：c#, asp.net, web-services, compiler-construction

我遵循了这个例子：[http ://www.tutorialspoint.com/webservices/web_services_examples.htm](http://www.tutorialspoint.com/webservices/web_services_examples.htm)

在此示例中，提到了您首先必须使用 WSDL .NET SDK 创建 Web 代理的 Web 应用程序。接下来是使用 CSC /t:library 编译代理，因此据我所知，Web 应用程序使用 CSC 进行编译，但是 Web 服务再也没有被触及。

由于它是用 C# 编写的，保存在 IIS7 的虚拟目录中并使用 noteblock，我不知道它是如何编译 Web 服务器的。

有人可以使用 ASP.NET 技术说出并解释本示例使用的是哪个编译器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:51:35.977

这取决于您的应用程序是如何部署的。听起来您在部署代码之前没有使用 VS 来编译代码，在这种情况下，您大概是将 WSDL 代理生成实用程序生成的源代码直接部署到网站（在 App_Code 文件夹中）？

您的 Web 服务器上的 ASP.net 将自动编译这些文件（使用 CSC）。

[http://msdn.microsoft.com/en-us/library/t990ks23(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/t990ks23(v=vs.80).aspx)

另一种方法是在开发机器上本地编译文件并上传程序集。然后显然CSC在本地进行编译。在这种情况下，您通常会将 WSDL 代理生成实用程序创建的文件放入单独的 VS 项目并编译类库。

我相信您也可以将 .wsdl 文件直接拖放到 App_Code 中，服务器上的 ASP.net 将使用适当的编译器（同一文件夹中其他文件使用的语言或指定的默认编译器）自动创建和编译代理站点或机器配置）。听起来你没有这样做，这不是我做过的事情 - 但值得了解。

# php - PHP 代码不能从 file:// URL 工作

> ID：13161549
> 
> 赞同：1
> 
> 时间：2012-10-31T15:37:17.163
> 
> 标签：php

自从我使用 PHP 以来已经有几个月了，所以我假设我只是忘记了一些琐碎的事情。无论我将什么 PHP 放入 .php 文件中，PHP 部分都不会运行。即使是这么简单的事情

```
<html>
    <body>
        <?php 
            echo "hey";
        ?>
    </body>
</html> 
```

不起作用——它会产生一个空白页。谢谢你的帮助！

编辑：我忘了提到我正在通过在 URL 中输入文件位置来查看浏览器中的页面。前任）`file:///C:/Users/Student/Documents/test.php`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-31T15:39:25.120

```
file:///C:/Users/Student/Documents/test.php 
```

**此 URL**由您的浏览器从本地文件系统打开。PHP 由网络服务器执行。浏览器不理解 PHP。您的 PHP 在服务器执行后生成 HTML，最终由您的 Web 浏览器显示。

因此，您应该托管一个本地网络服务器并访问它，`http://localhost/xxx.php,`就像您希望 PHP 执行一样。也许是**[Xampp 。](http://www.apachefriends.org/en/xampp.html)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:40:55.753

你需要一个 PHP 服务，XAMPP 只是一种可能。

*   [http://www.apachefriends.org/en/xampp.html](http://www.apachefriends.org/en/xampp.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T15:41:48.547

您将需要一个程序来运行和处理“服务器端”的 php 文件，从而使您的 pc 成为 php 文件的网络服务器。Xampp 应该可以正常工作：http: [//www.apachefriends.org/en/xampp.html](http://www.apachefriends.org/en/xampp.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T15:41:12.410

您需要安装一个网络服务器，例如 XAMPP 或 WAMP，并将您的文件运行为`localhost/test.php`. PHP 不能被浏览器自己解析。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T15:42:46.240

如果您已经安装了 Apache 服务器，请检查您的 Apache 日志。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T15:45:19.130

在编写 PHP 时，我使用[Mamp](http://www.mamp.info/en/index.html)来创建我的服务器环境。它超级容易配置和免费。下载附带一个专业选项，但您可以安全地删除它。

# vb.net - 水晶报表 - 传递 DateRange 参数

> ID：13161553
> 
> 赞同：2
> 
> 时间：2012-10-31T15:37:23.517
> 
> 标签：vb.net, crystal-reports

与 CR 合作相对较新。最近一直在将许多以前通过 vbscripts 执行的旧报告转换为在 vb.net 上运行。

我有一份特别的报告，我无法工作。为了运行，它需要一个存储在名为“DateRange”的参数字段中的日期范围

在调用此报告并导出它的旧 vbscript 中，传递此日期范围参数的代码是：

```
Set crParms = CrystalReport.ParameterFields
crParms.Item(1).AddCurrentRange CDate(StartDate), CDate(EndDate), 3 
```

任何人都可以帮助我了解这段代码在 vb.net 中的样子吗？我有点困惑，因为报告中的“DateRange”参数是一个变量。那么它是否期望收集日期或其他东西？

我只是创建一个简单的控制台项目来调用报告、传递日期范围并导出报告。我已经能够找出导出报告的代码，而且效果很好。我只需要弄清楚如何将我的日期范围传递到报告中。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T19:48:07.937

如果其他人需要帮助将两个日期从 VB.NET 传递到 Crystal 报表中的单个 DateRange 参数，这最终对我有用：

```
Const PARAMETER_FIELD_NAME As String = "DateRange"

Dim startDate as Date

Dim endDate as Date

<other code>

Dim crParameterFieldDefinitions As ParameterFieldDefinitions
Dim crParameterFieldDefinition As ParameterFieldDefinition
Dim crParameterValues As New ParameterValues
Dim crParameterRangeValue As New ParameterRangeValue

crParameterRangeValue.StartValue = startDate
crParameterRangeValue.EndValue = endDate

crParameterFieldDefinitions = cryReport.DataDefinition.ParameterFields
crParameterFieldDefinition = crParameterFieldDefinitions.Item(PARAMETER_FIELD_NAME)
crParameterValues = crParameterFieldDefinition.CurrentValues

crParameterValues.Clear()
crParameterValues.Add(crParameterRangeValue)
crParameterFieldDefinition.ApplyCurrentValues(crParameterValues)

<other code> 
```

我确实发现[本教程](http://vb.net-informations.com/crystal-report/vb.net_crystal_report_parameter_date.htm)对于编写上面对我有用的代码非常有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:31:21.357

```
 Dim cryRpt As New ReportDocument
    cryRpt.Load("PUT CRYSTAL REPORT PATH HERE\CrystalReport1.rpt")

    Dim crParameterFieldDefinitions As ParameterFieldDefinitions
    Dim crParameterFieldDefinition As ParameterFieldDefinition
    Dim crParameterValues As New ParameterValues
    Dim crParameterDiscreteValue As New ParameterDiscreteValue

    crParameterDiscreteValue.Value = enteredDate
    crParameterFieldDefinitions =  _
        cryRpt.DataDefinition.ParameterFields
    crParameterFieldDefinition =  _
        crParameterFieldDefinitions.Item("Orderdate")
    crParameterValues = crParameterFieldDefinition.CurrentValues

    crParameterValues.Clear()
    crParameterValues.Add(crParameterDiscreteValue)
    crParameterFieldDefinition.ApplyCurrentValues(crParameterValues)

    CrystalReportViewer1.ReportSource = cryRpt
    CrystalReportViewer1.Refresh() 
```

# ruby-on-rails - 如何设置空白输入表单？

> ID：13161554
> 
> 赞同：1
> 
> 时间：2012-10-31T15:37:23.750
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

我想创建一个表单，用户可以在其中更新他/她的电子邮件和密码。

```
<%= form_for @customer do |c| %>
    <%= c.label :email%>
    <%= c.text_field :email%>
    <%= c.label :email_confirmation %>
    <%= c.text_field :email_confirmation%>
    <%= c.label :password%>
    <%= c.password_field :password%>
    <%= c.label :password_confirmation%>
    <%= c.password_field :password_confirmation%>
    <%= c.submit("Edit profile")%>
<% end %> 
```

问题是我不希望他们只是看着它就被填写。所以它应该有类似的东西：

```
Email [blank]
Email confirmation [blank]
Password [blank]
Password confirmation [blank] 
```

那么如何让这个空白而不是由 Rails 预先填写呢？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:42:00.987

传递一个空值：

```
<%= c.text_field :email, :value => "" %> 
```

# javascript - 在 arg 中通过引用传递类变量

> ID：13161568
> 
> 赞同：0
> 
> 时间：2012-10-31T15:38:15.363
> 
> 标签：javascript

所以我正在尝试执行以下操作；

```
var myVar;  

function testFunction(args){  
args.cacheVar = new Date();  
}  

testFunction({cacheVar:myVar}); 
```

但不是更改 myVar 的值，而是更改 args.cacheVar 的值。我想要发生的是 myVar = new Date()。不是 args.cacheVar。

如何使用当前设置完成此操作？（使用参数）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:44:00.680

您传递的是对`testFunction`所有的引用，但它是对您动态创建的对象文字的引用：`testFunction({cacheVar:myVar});`<--`{}`是被引用的对象。它从来没有分配给任何变量，所以它一`testFunction`返回就被 GC'ed。
该`cacheVar`属性被分配了*的值**的副本`myVar`*（在这种情况下未定义）。您必须记住，只有通过引用传递的*对象*`typeof something`才会返回`object`数组、对象字面量、自定义对象、函数......但可以返回`undefined`, `string`,`boolean`并且`number`它们都是原语。`null`是证明此规则顺便说一句的例外（`object`由于历史原因它返回）。

如果要更改 的值`myVar`，只需使用`myVar`：

```
function testFunction()
{
    myVar = new Date();
}
//alternative:
function testFunction()
{
    return new Date();
}
var myVar = testFunction(); 
```

然而，第一种方法不是很安全（隐含的全局变量），所以要么将所需的值直接返回给你想要更改的变量（第二个版本），要么使用闭包，要么将所有东西都变成一个对象，但这可能只需要我们现在太远了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:42:57.967

你没有传递`myVar`给你的函数。您正在传递一个对象。该对象可能会更新，但由于您在任何地方都没有对它的引用，所以什么也没有发生。

您需要在传递对象之前将其保存为变量。

```
var myVar = {cacheVar:null}; 

function testFunction(args){  
    args.cacheVar = new Date();  
}  

testFunction(myVar); 
```

# emacs - 在 emacs 中设置字体大小和突出显示注释

> ID：13161573
> 
> 赞同：1
> 
> 时间：2012-10-31T15:38:27.600
> 
> 标签：emacs, elisp, emacs23

如何在 emacs 中设置注释的字体大小。我希望注释的大小比其他代码小。我也希望它被突出显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:48:24.463

运行`M-x customize-face font-lock-comment-face`并设置`height`属性，以及`background`您`foreground`希望如何突出显示注释。

要在会话之间保留此内容，`Save for future sessions`请从自定义屏幕中选择或将其添加到您的`.emacs`：

```
(custom-set-faces
 '(font-lock-comment-face ((t (:background "yellow" :foreground "red" :height 0.5))))) 
```

# log4j - 如何将时间戳添加到日志文件名

> ID：13161574
> 
> 赞同：0
> 
> 时间：2012-10-31T15:38:27.837
> 
> 标签：log4j

我想为日志文件添加时间戳，如下所示。

accesslogs.2012-10-31-02-39.log

我尝试使用**DailyRollingFileAppender**并且能够添加时间戳，但它会在“.log”之后附加时间戳，这导致 accesslogs.log.2012-10-31-02-39 并且 **Maxsize 属性也是 DailyRollingFileAppender 中的任务**。
那么有没有其他方法可以将时间戳添加到日志文件中。

下面是 log4j.xml 的代码片段

```
 <appender name="roll" class="org.apache.log4j.DailyRollingFileAppender">
           <param name="DatePattern" value="'.'yyyy-MM-dd-hh-mm'.log'" />
           <param name="File" value="C:\\Users\\sharmag\\logsfile.log" />    
           <layout class="org.apache.log4j.PatternLayout"> 
              <param name="ConversionPattern" value="%d %-5p (%15F:%L) %3x - %m (%c)%n"/>
          </layout>
    </appender> 
```

任何帮助将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T03:05:41.173

开箱即用的 Log4J 无法做到这一点。这是 Log4J 源代码的一个片段：

`String datedFilename = fileName+sdf.format(now);`

这就是 Log4J 构建文件名的方式：格式化日期对象并将其附加到文件名。

不幸的是，按照`DailyRollingFileAppender`设计的方式，您无法有效地对其进行子类化以自定义此行为，因此我被引导相信，不幸的是，您的问题的答案是“否”。

（除非您开发自己的实现`FileAppender`）

**已编辑**（五个月后）...

如果您使用 Log4J Extras（由 Log4J 社区提供），则可以执行此操作。看看[TimeBasedRollingPolicy](http://logging.apache.org/log4j/companions/extras/apidocs/org/apache/log4j/rolling/TimeBasedRollingPolicy.html)。不过，您最终将使用与 不同的附加程序`DailyRollingFileAppender`。

# html - IE Z-Index 问题

> ID：13161575
> 
> 赞同：2
> 
> 时间：2012-10-31T15:38:29.013
> 
> 标签：html, css, internet-explorer, iframe

我遇到了经典问题，我的标题导航栏位于正文中的 iframe 下方，但是我尝试使用 z-indexes 解决这个问题让我更加困惑并且仍然遇到同样的问题：/ 这是我的设置：

```
<header style="z-index:2;">
....code....
<nav align="center" style="z-index:2;">
....nav....
</nav>
</header>
<section id="content" style="z-index:-1;">
<div class="block">
    <div class="main">
    <!--[if IE]>
<div style="z-index:-2;">
<iframe width="900" height="900" style="position:relative; z-index:-2;" src="http://www.flytheflagtexas.com/athens/magazine/latest/index.html" ></iframe>
</div>
<![endif]-->
....code.... 
```

为什么 z-index:-2 iframe 不会出现在任何东西下？这是页面：[http](http://www.flytheflagtexas.com/athens/latest) : //www.flytheflagtexas.com/athens/latest 随意浏览代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:40:22.233

z-index 仅在您指定用于布局组件的位置时才有效。否则它只是行不通。这意味着 z-index 适用于：定位元素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:20:59.567

试试这个：

```
#nav{position:relative; z-index:2;} 
```

和框架

```
#content{position:relative;} 
```

您不需要为底部元素提供 z-index 值，但可以，只需使其小于 2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-20T19:08:24.903

Z-index 只有在您使用时才能可靠地工作

```
position: relative; 
```

或者

```
position: absolute; 
```

如果您没有将 CSS 中的位置设置为支持的值之一，则 z-index 将不会产生任何影响。

# asp.net - 使用 asp.net 开发 Facebook 应用程序

> ID：13161579
> 
> 赞同：0
> 
> 时间：2012-10-31T15:38:43.577
> 
> 标签：asp.net, facebook

我想为 Facebook 开发一个 asp.net 应用程序。

由于 Facebook 中的大多数示例都是用 PHP 编写的（我不熟悉），所以我想知道是否可以在 asp.net 中创建服务器端。

我创建了一个 Facebook 应用程序，但是当我单击 url 访问它时，我收到一条“上传”消息，该消息最终消失了，并且我在页面本身的应用程序部分收到一条错误消息。

我阅读了有关 c# SDK 和其他内容的信息，但我看不到来自服务器的任何结果 - 甚至是简单的文本消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:47:54.847

尝试运行[facebook SDK C# 示例](https://github.com/facebook-csharp-sdk/facebook-aspnet-sample)，并确保实现[Facebook Developer App](http://www.facebook.com/developers/)提供的您自己的“AppId”和“AppSecret”值。

# javascript - jQuery下拉列表

> ID：13161584
> 
> 赞同：0
> 
> 时间：2012-10-31T15:38:54.397
> 
> 标签：javascript, drop-down-menu

javascript / jQuery的新手。我在有序列表中显示了一些数据，如下所示

```
<ul>        
   <li data-id="">
    <a data-link="0" data-actiontype="article" href="#">Data 0</a>
   </li>
   <li data-id="">
    <a data-link="1" data-actiontype="article" href="#">Data 1.</a>
    </li>

    <li data-id="">
    <a data-link="2" data-actiontype="article" href="#">Data 2</a>
    </li>   
 <ul> 
```

我想在下拉列表中而不是在有序列表中呈现以上内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:50:35.977

怎么样

```
<select>

<option> Data 0 </option>
.
.
.
<option> Data 2 </option>
</select> 
```

要使用 JQuery 实现这种转换，您需要执行以下操作：

页面上有一个空的选择标签

```
<select id="randomid"></select> 
```

然后将其添加到您的脚本中：

```
$('ul>li').each(function(i)
{
 $('#randomid').append($(this).text());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:53:32.980

下拉列表是指在一个选择框中还是悬停在列表项上会导致列表出现？

如果它是第一个，则只能使用一个选择标签，每个列表项都设置为一个选项。

如果是第二种方法，您可以给每个元素一个类，并将该类设置为仅在

# git - 是否可以在 git 中链接目录？

> ID：13161586
> 
> 赞同：3
> 
> 时间：2012-10-31T15:38:59.710
> 
> 标签：git, version-control, cross-platform

我将从描述我的意图的简化示例开始。

我有一个`my-rep.git`包含两个目录的存储库，`src`然后部署。在`src`我有我的源代码（NodeJS 代码，但这没关系），并且在部署中我想保留我的部署配置。例如，如果我有一个项目，`projectA`那么结构应该是这样的，

```
my-rep.git/src/projectA
my-rep.git/deploy/projectA/dotcloud.yml
my-rep.git/deploy/projectA/src 
```

现在我的问题。我希望源代码在`projectA`dotcloud 的部署目录中可用。有什么办法可以`my-rep.git/deploy/projectA/src`指出`my-rep.git/src/projectA`，也就是说，当我执行 git pull in deploy 时，它会自动拉取`my-rep.git/deploy/projectA/src`.

它必须在 git 中得到支持，符号 linux 链接将无法正常工作，因为我团队中的一些开发人员在 Windows 中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:01:14.907

不要重复结构。请改用部署脚本。如果您在源代码中包含配置，请将其抽象化，使其在任何地方都不起作用。然后依靠随环境变化的涂抹/清洁脚本在签出时更改文件，反之亦然。

# wordpress - (Wordpress, Cryon) 'wp-load' 解决方案的参数不正确

> ID：13161588
> 
> 赞同：0
> 
> 时间：2012-10-31T15:39:02.873
> 
> 标签：wordpress, plugins

如果您已安装 Cryon 插件，并在 ajax 请求中收到错误消息：“wp-load”的参数不正确

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:39:02.873

您可以检查您是否在 PHP 代码中定义了 ABSPATH，如果没有，这里是低级解决方案：

编辑：cryon_te_content.php

线路：16

代码：

```
require_once('../../crayon_wp.class.php');
//crayon_die_if_not_php($_GET['wp_load'], 'wp-load');
//require_once ($_GET['wp_load']);
require_once ( $_SERVER['DOCUMENT_ROOT'] . '/wp-load.php'); 
```

这就是所有的人！:)

# c++ - 如何通过任务管理器创建的转储文件打开并查看源代码

> ID：13161596
> 
> 赞同：0
> 
> 时间：2012-10-31T15:39:20.027
> 
> 标签：c++, debugging, visual-c++

我有 c++ 源代码，我用 vs 2008 编译它。当我按 F5 运行程序并打破运行时。我可以将它保存为转储文件，我可以通过 Visual Studio 单击文件来打开它，我可以在保存它的步骤中看到 c++ 源代码。

但是当我使用任务管理器并从程序的进程中创建转储文件时，当我打开它时，我只看到汇编代码而不是 c++ 代码？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:03:05.680

您可以使用 WinDbg.exe 打开这些转储文件。它可作为 Microsoft Debugging Tools For Windows 的一部分从 Microsoft 免费获得，网址为[http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)。您可以将其设置为抓取您的源文件，以便您可以查看您的源以及转储信息。有关如何使用 WinDbg 的信息，请查看[http://windbg.info/doc/1-common-cmds.html](http://windbg.info/doc/1-common-cmds.html)或[http://msdn.microsoft.com/en-us/library/windows/hardware/ff551063( v=VS.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551063(v=VS.85).aspx)

# azure - 尝试获取 Autoscaler 类型的实例时发生 Azure WASABi 激活错误，密钥“”

> ID：13161599
> 
> 赞同：1
> 
> 时间：2012-10-31T15:39:25.283
> 
> 标签：azure, integration, enterprise, activation, wasabi

尝试从适用于 Windows Azure 的 Enterprise Library 5.0 集成包中使用 WASABi获取[此Azure Autoscale 演示项目时出现此错误。](http://blog.paulbouwer.com/2012/05/26/autoscaling-azure-with-wasabi-introduction/)正确遵循所有指令时引发的错误是：

> 尝试在 c:\Home\Chris\Projects\CommonServiceLocator\main\Microsoft 中获取 Microsoft.Practices.ServiceLocation.ServiceLocatorImplBase.GetInstance(Typ e serviceType, String key) 类型 Autoscaler 的实例时发生激活错误。 Practices.ServiceLocation\ServiceLocatorImplBase.cs：Microsoft.Practices.ServiceLocation.ServiceLocatorImplBase.GetInstanceTSe 服务的第 57 行
> ，位于 c:\Home\Chris\Projects\CommonServiceLocator\main\Microsoft.Practices .ServiceLocation\ServiceLocatorImplBase.cs：PB_WASABi_autoscaler 的第 90 行。 Program.Main(String[] args) 在 c:\Users\daniel\Documents\Visual Studio 2012\Projects\PB-WASABi-autoscaler\PB-WASABi-autoscaler\Progr am.cs:line 13

使用 Windows Azure 1.7 库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T15:39:25.283

教程（和其他在线资源）主要使用 Azure 1.6 SDK。

> 它在控制台应用程序中有对 Azure SDK 1.6 中的 WindowsAzure.StorageClient.dll 文件的引用时起作用。在 Azure SDK 1.7 环境下，出现此错误消息：尝试获取 Autoscaler 类型的实例时发生激活错误，密钥“”。在错误详细信息中，我们发现：无法加载文件或程序集 'Microsoft.WindowsAzure.StorageClient, Version=1.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）。

解决方案：

> app.config 文件中的绑定重定向将解决该问题：

```
 <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.WindowsAzure.StorageClient"
                          publicKeyToken="31bf3856ad364e35"
                          culture="neutral" />
        <bindingRedirect oldVersion="1.1.0.0"
                         newVersion="1.7.0.0"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime> 
```

来源：[这里](http://entlib.codeplex.com/discussions/399750#PostDetailsCell_930994)

# android - 从安卓 2.3 到安卓 4

> ID：13161603
> 
> 赞同：0
> 
> 时间：2012-10-31T15:39:33.670
> 
> 标签：android, crop, android-4.0-ice-cream-sandwich

我正在开发一个在 Android 2.3 上测试的应用程序，它运行良好。在 Android 4 中，我将所有网络调用都放在了 Asyntask 中，现在几乎所有调用都可以正常工作。我还需要考虑什么？

但是当我尝试通过 Intent 裁剪和图像时，当我从图库或相机中选择图像时，它首先与调试器断开连接（¿ 为什么？），当我裁剪它时，当它保存图片时，它会崩溃。

现在 Eclipse 日志不显示异常，或任何可以帮助我的消息，在 2.3 上总是打印错误消息。

对不起我的英语，我希望你能理解我，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:00:48.627

考虑查看您可能正在调用的任何**已弃用的方法**，例如[getWidth()](http://developer.android.com/reference/android/view/Display.html#getWidth%28%29)、[导航硬件键](http://developer.android.com/design/patterns/compatibility.html)或与[偏好](https://stackoverflow.com/questions/6503496/preferences-without-deprecated-methods)相关的东西。

还可以考虑添加自定义（版本化）style.xml 以轻松**支持全息主题。**最好创建一致的用户体验，因此在 Android 4.0 下，您的可视组件应尽可能“标准”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:48:57.750

您是否在 UI 线程上运行裁剪/保存？如果你这样做了，StrictMode 会在你在 UI 线程上进行磁盘写入之后出现。生成一个 AsyncTask（或线程）来执行此操作，然后重试。

# objective-c - 在 UIScrollView 的子视图中禁用水平滚动

> ID：13161604
> 
> 赞同：0
> 
> 时间：2012-10-31T15:39:35.423
> 
> 标签：objective-c, ios, uiscrollview

我有 3 个`UIScrollViews`，叫他们`A`,`B`和`C`。

`A`是一个分页滚动视图，其中`B`添加了许多滚动视图作为子视图（页面）。 `B`只能垂直滚动。 `C`是作为子视图添加到 a 的滚动视图，该滚动视图作为子`UIView`视图添加到`B`.

我想要实现的功能是：

如果在房屋`A`内发生水平滚动，则不允许分页。但是，仍然允许垂直滚动。`UIView``C``B`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:43:56.813

实现`- (void)scrollViewDidScroll:(UIScrollView*)scrollView`以找出正在滚动的滚动视图，然后检查滚动`contentOffset`视图的属性以确定滚动视图的滚动位置。`scrollViewDidEndDecelerating`委托可用于检测滚动结束。

例如：-

```
- (void)scrollViewDidScroll:(UIScrollView*)scrollView {
    if (scrollView == C) {
       //disable scrolling of A
    }
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
    if (scrollView == C) {
        //enable scrolling of A
    }
} 
```

根据您的确切要求，您可以使用这两个委托和`contentOffset`该特定滚动视图来获得所需的效果。

# jquery - 使用 xsl 变量通过 jquery 选择类

> ID：13161607
> 
> 赞同：1
> 
> 时间：2012-10-31T15:39:38.333
> 
> 标签：jquery, xslt

尝试使用变量来选择一个类，我试过了，

```
<xsl:variable name="aClassName"><xsl:text>sub</xsl:text><xsl:apply-templates select="name" mode="translate"/></xsl:variable>

$('.'+$aClassName).removeClass('hide '); 
```

但我得到一个错误 $aClassName is not defined。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T21:48:40.873

你需要把`<xsl:value-of select="$aClassName"/>`你有的地方`$aClassName`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-29T06:46:19.107

我只需要实现这一点，而 Matthew Greens 的回答在某种程度上是不完整的，因为简单地替换这些值对我来说并没有成功。

不过，这对我有用：

```
<script type="text/javascript">
  $(document).ready(function() {
     var  row = $('tr#<xsl:value-of select="$val"/>');
     row.show();
  });

</script> 
```

请注意，没有连接`+`，并且单引号包围了完整的选择器。

# c# - 如何使用 EWS 保存对话历史消息并使其正确显示在对话历史文件夹中

> ID：13161611
> 
> 赞同：0
> 
> 时间：2012-10-31T15:39:55.927
> 
> 标签：c#, exchange-server, exchangewebservices, mapi, lync-2010

Lync 客户端 Microsoft 提供了一个选项，可以使用 EWS（Exchange Web 服务）将对话历史记录保存到交换文件夹中，该文件夹可通过 ac# 托管 API 访问。当 Lync 使用 EWS 将消息保存在“对话历史记录”文件夹中时，这些消息将显示为特殊的对话项目。这是通过将 ItemType 设置为“IPM.Note.Microsoft.Conversation”来完成的——至少部分如此。

我的问题是：如果我必须自己创建对话文件夹而不是依靠 Lync 创建它，如何获得 Lync 管理的对话文件夹的完整行为？我发现我需要将 FolderType 设置为“IPF.Note.Microsoft.Conversation”，但这显然不足以让文件夹中包含的对话项目正确显示。还需要什么魔法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:20:04.810

在这种情况下，问题原来是 Exchange 和 Lync 服务器之间的集成失败，这导致对话历史文件夹的 Outlook Web 访问视图呈现不正确。对话历史文件夹实际上是正确的 - 只需设置 IPF.Note.Microsoft.Conversation。

参考：

1.  [http://support.microsoft.com/kb/2000886](http://support.microsoft.com/kb/2000886)
2.  [http://www.expta.com/2010/09/how-to-integrate-lync-server-2010-with.html](http://www.expta.com/2010/09/how-to-integrate-lync-server-2010-with.html)
3.  [http://technet.microsoft.com/en-us/library/gg398806.aspx](http://technet.microsoft.com/en-us/library/gg398806.aspx)
4.  [http://blog.schertz.name/2010/11/lync-and-exchange-im-integration/](http://blog.schertz.name/2010/11/lync-and-exchange-im-integration/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T08:46:13.223

Microsoft Lync 控制台您可以找到 3 个图标 1st Contacts、2nd Activity Feesds 、3rd Conversations。单击第三个图标对话。在控制台底部，您可以找到“在 Outlook 中查看更多”单击它并在 Outlook 中找到所有对话历史文件夹。

# apache - 流媒体视频仅在短时间内无法加载

> ID：13161616
> 
> 赞同：1
> 
> 时间：2012-10-31T15:40:05.087
> 
> 标签：apache, h.264

我使用 jwplayer 和 apache2.2 以及从[http://blog.codingmafia.com/?p=167](http://blog.codingmafia.com/?p=167)下载的 h264 流媒体模块。我一直在搞乱“开始”和“结束”功能，它们允许您流式传输视频片段。

我注意到一个奇怪的现象。它允许我在视频开头附近播放几秒钟。但是当我将播放时间从 15-19 推迟到 1115-1119（秒）时，它返回了一条错误消息说`Video not found or access denied: video.mp4?start=1115&end=1119.`

我尝试了不同的时间设置和持续时间，似乎随着视频接近尾声，它需要工作的持续时间变得更长。

什么可以解释这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-30T04:11:33.770

这是由于我的视频编码。前面提到的 h.264 流媒体模块似乎为开始和结束定位了最接近的“I 帧”（完整图像帧），并剪切了盯着和结束于 I 帧的部分。当这两个 I 帧实际上是一个时，它返回 null 类型的值，因此出现上述错误。
重新编码视频，每 6 帧插入一个 I 帧解决了这个问题。

# javascript - JavaScript insertBefore() 的作用类似于 appendChild()

> ID：13161617
> 
> 赞同：1
> 
> 时间：2012-10-31T15:40:07.827
> 
> 标签：javascript

单击按钮时，我想在当前选定元素之前插入一个元素。我通过将最后点击的元素 ID 存储在变量中来处理“选定”。

我的代码：

初始化.js

```
(function()
{
    main.page = parent.document;
}
)();

/** 
 *
 *      Easier than console.log();
 *
 */
function echo(string)
{
    console.log(string);
} 
```

item_document_elements.js

```
// Example of the 2 parameters:
// controls.inserting_this = "canvas"
// select_element.selected = "default_div"    

main.page.getElementById("new_element_go").addEventListener
(
    "click", 
    function()
    {
        controls.insert_before(controls.inserting_this, select_element.selected);
    }, 
    false
);

controls.insert_before = function(element, selected)
{   
    echo("DEFINITELY INSERTING BEFORE");

    var id   = main.page.getElementById("new_element_id_input");
    var name = main.page.getElementById("new_element_name_input");

    // Return false if the input field is empty.
    if(id.value == "" || id.value == null || id.value == "undefined")
    {
        id.style.color = "#F00";
        id.value = "ID required";
        id.focus();

          return false;
    }

    // Check if the element ID is in the array.
    // If indexOf returns -1, it doesn't exist.
    if(create.element_array["name"].indexOf(id.value) != -1)
    {
        id.style.color = "#F00";
          id.value = "ID already exists";
          id.focus();

          return false;
    }
    else
    {
        var master_parent  = main.page.getElementById(selected).parentNode;
        var create_element = main.page.createElement(element);

          create_element.id         = id.value;
          create_element.style.border = "1px solid black";
          create_element.style.width  = "auto";
          create_element.style.height = "auto";
          create_element.textContent  = "New " + element;

          // Add element to array of elements in the document.
          create.element_array["name"].push(id.value);
          create.element_array["name"]["properties"].push(new element_properties);

          master_parent.insertBefore(create_element, selected); 
    }

        // End blackout window and remove popup.
        controls.end_darkness();
    } 
```

该文档仅包含以下内容：

```
<div id="container" class="hovering selected" style="margin-right: auto; margin-left: auto; height: auto;">
    <div id="default_div" style="width: auto; height: 120px; border: 1px solid #999;"></div>
</div> 
```

上面的代码总是在最后一个元素之后插入新元素，从来没有。据我所知，该功能正在正确使用。如果不是，请指教。

我究竟做错了什么？

***解析度***

问题是 insertBefore 函数的参数 2 必须是节点，而不是字符串。解决方案是：

```
master_parent.insertBefore(create_element, main.page.getElementById(selected)); 
```

# c# - 使用 GridView 组件在 StackPanel 中构建 StackPanel

> ID：13161618
> 
> 赞同：1
> 
> 时间：2012-10-31T15:40:15.237
> 
> 标签：c#, gridview, windows-8, stackpanel, hittest

我需要在 StackPanel Vertical 内构建类似 StackPanel Horizo​​ntal 的东西，其中包含许多可变宽度的按钮（但汇总宽度是固定的）。

我自己做的，它确实工作得很好......但是当我尝试用 VS2012 GroupedView 生成的 GridView 页面回复结果时，它很糟糕。

```
<GridView
    x:Name="itemGridView"
    AutomationProperties.AutomationId="ItemGridView"
    AutomationProperties.Name="Grouped Items"
    Grid.RowSpan="2"
    Padding="116,137,40,46"
    ItemsSource="{Binding Source={StaticResource groupedItemsViewSource}}"
    ItemTemplate="{StaticResource PalinsestoTemplate}"
    SelectionMode="None"
    IsSwipeEnabled="False"
    IsItemClickEnabled="True"
    ItemClick="ItemView_ItemClick">

    <GridView.ItemsPanel>
        <ItemsPanelTemplate>                        
            <VirtualizingStackPanel Orientation="Vertical" IsHitTestVisible="False"/>
        </ItemsPanelTemplate>
    </GridView.ItemsPanel>
    <GridView.GroupStyle>
        <GroupStyle>
            <GroupStyle.HeaderTemplate>
                <DataTemplate>
                    <Grid Margin="10,5,0,0">
                        <Button
                            AutomationProperties.Name="Group Title"
                            Click="Header_Click"
                            Style="{StaticResource TextPrimaryButtonStyle}" >
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding Nome}" Margin="3,-7,10,10" Style="{StaticResource GroupHeaderTextStyle}" />
                                <TextBlock Text="{StaticResource ChevronGlyph}" FontFamily="Segoe UI Symbol" Margin="0,-7,0,10" Style="{StaticResource GroupHeaderTextStyle}"/>
                            </StackPanel>
                        </Button>
                    </Grid>
                </DataTemplate>
            </GroupStyle.HeaderTemplate>
            <GroupStyle.Panel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal" Margin="0,0,80,0" IsHitTestVisible="False" />
                </ItemsPanelTemplate>
            </GroupStyle.Panel>
        </GroupStyle>
    </GridView.GroupStyle>
</GridView> 
```

以上是我的代码，但问题是`minimum hitTest area`里面的每个项目都会破坏固定的汇总宽度。我该如何解决这个问题？

# css - 在不破坏原始页面的情况下在书签中包含 css 框架？

> ID：13161619
> 
> 赞同：1
> 
> 时间：2012-10-31T15:40:16.797
> 
> 标签：css, twitter-bootstrap, bookmarklet

我正在编写一个应用程序，它将使用书签来实现其部分功能。小书签将是相当繁重的 UI，因此我希望利用 Twitter Bootstrap 框架。但是，从我所做的研究来看，您必须仔细编写任何 CSS 以确保命名冲突不会破坏原始站点。

我可以设想的一种可能的解决方案是遍历 Bootstrap 中的所有 CSS 并预先添加一个长的唯一 id，以便`.column`css 选择器看起来像`#my_app_00234 .column`. 这看起来很笨拙，可能会破坏 Bootstrap Javascript，并且如果我们更改了我们使用的 Bootstrap 代码（可能是因为重新配置 CSS 以使用不同的边距和颜色），则必须重做。

我还发现 HTML5 具有命名 CSS 的能力，但它没有非常广泛的浏览器支持，我们需要支持一定数量的 IE。

有任何想法吗？

# c# - C# WPF Service 自定义请求格式

> ID：13161620
> 
> 赞同：0
> 
> 时间：2012-10-31T15:40:20.280
> 
> 标签：c#, wcf

我有一个 WCF 服务，它使用 XML 有效负载读取请求并响应这些请求。例如，一个简单的登录请求如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LoginRequest>
    <username>test</username>
    <password>foo</password>
</LoginRequest> 
```

现在我知道我可以简单地接受`XElement`我的服务方法，但是有什么方法可以告诉底层系统如何读取上述 XML 并将其转换为这种格式的函数调用：

```
public LoginResponse Login (string username, string password); 
```

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:39:52.233

我不相信您指定的 XML 会按原样格式化。我只说这是因为除非您更改传入的 SOAP 消息，否则它会将内部的 XML 识别为单个字符串值（就像您现在一样）而不是多个值。

如果您有一个 .NET 客户端，那么您可能希望在已经知道如何序列化和反序列化为 SOAP 格式的客户端（或代理对象）上使用相同的类，并使用 DataContract 属性进行修饰。由于您没有指定向您发送 XML 有效负载的客户端是什么，因此 XML 很可能已经包装在 SOAP 信封中，并且需要双方进行一些大修才能“更正确”。

此外，由于您在此处进行的操作，您的实际 SOAP 请求必须进行显着更改才能将它们作为参数传递，而不仅仅是 XML 值。

所以，我想最重要的答案是否定的。您将无法单独更改 WCF 服务来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T22:03:58.060

**是**的，这是可能的。

**a)**将 xml 更改为

```
<Login>
     <username>test</username>
     <password>foo</password>
</Login> 
```

**b)**替换 `[ServiceContract]`为`[ServiceContract(Namespace = "")]`

**c)**并将方法声明为

```
[OperationContract]
[WebInvoke(RequestFormat = WebMessageFormat.Xml, 
           ResponseFormat = WebMessageFormat.Xml, 
           BodyStyle = WebMessageBodyStyle.Wrapped)]
public string Login(string username, string password){} 
```

它有效....

这是我用来测试的代码

```
public void TestWCFService()
{
    //Start Server
    Task.Factory.StartNew(
        (_) =>
        {
            Uri baseAddress = new Uri("http://localhost:8080/Test");
            WebServiceHost host = new WebServiceHost(typeof(TestService), 
                                                     baseAddress);
            host.Open();
        }, null, TaskCreationOptions.LongRunning).Wait();

    //Client
    string xml = @"<Login>
                      <username>test</username>
                      <password>foo</password>
                  </Login>";

    var wc = new WebClient();
    wc.Headers.Add("Content-Type", "application/xml; charset=utf-8");
    var result = wc.UploadString("http://localhost:8080/Test/Login", xml);
}

[ServiceContract(Namespace = "")]
public class TestService
{
    [OperationContract]
    [WebInvoke(RequestFormat = WebMessageFormat.Xml, 
               ResponseFormat = WebMessageFormat.Xml, 
               BodyStyle = WebMessageBodyStyle.Wrapped)]
    public string Login(string username, string password)
    {
        return username + " " + password;
    }
} 
```

# c# - 为什么我得到 ArgumentOutOfRangeException？

> ID：13161622
> 
> 赞同：-3
> 
> 时间：2012-10-31T15:40:26.597
> 
> 标签：c#, .net, arrays

我有一个 trackBar 的 Scroll 事件：

```
private void trackBar1_Scroll(object sender, EventArgs e)
        {

                trackbarCounter++;
                if (manualDone == true)
                {
                    myTrackPanelss1.trackBar1.Minimum = 0;
                    myTrackPanelss1.trackBar1.Maximum = _fi.Length - 1;                    setpicture(myTrackPanelss1.trackBar1.Value);
                    this.pictureBox1.Refresh();
                }
                if (automaticDone == true)
                {
                    myTrackPanelss1.trackBar1.Minimum = 0;
                    myTrackPanelss1.trackBar1.Maximum = fiAutomatic.Length - 1;
                    long[] tt = list_of_histograms[myTrackPanelss1.trackBar1.Value];
                    long res = GetTopLumAmount(tt, 1000);
                    long max = GetHistogramMaximum(tt);
                    GetHistogramAverage(tt);
                    setpicture(myTrackPanelss1.trackBar1.Value);
                    this.pictureBox1.Refresh();

                                    }

        } 
```

例外是在这一行：

```
long[] tt = list_of_histograms[myTrackPanelss1.trackBar1.Value]; 
```

在我单击 trackBar 并将其移动到右侧之后，在这种情况下，这次它一直到帧/轨道 40，然后在那里抛出异常。

例外：

指数超出范围。必须是非负数且小于集合的大小。参数名称：索引

现在 fiAutomatic 变量包含 2225 个索引，例如在索引 [0] 我看到：{000001.bmp} 在索引 [1] 我看到：{000002.bmp} 等等。

list_of_histograms 现在在每个索引中包含 40 个索引，我在其中有 256 个索引，例如在 index[0] 中我看到：{[long256]}，我在 index[0] 中看到 256 个数字。然后在 index[1] 中再次 {[long256]} 和另外 256 个数字，依此类推。

trackBar 值为 40。

但是为什么当我在 40 帧/图像之后将 trackBar 向右移动时会抛出这个异常？

这是完整的异常消息：

```
System.ArgumentOutOfRangeException was unhandled
  Message=Index was out of range. Must be non-negative and less than the size of the collection.
Parameter name: index
  Source=mscorlib
  ParamName=index
  StackTrace:
       at System.ThrowHelper.ThrowArgumentOutOfRangeException()
       at System.Collections.Generic.List`1.get_Item(Int32 index)
       at Extracting_Frames.Form1.trackBar1_Scroll(Object sender, EventArgs e) in D:\C-Sharp\Extracting_Frames\Extracting_Frames\Extracting_Frames\Form1.cs:line 1793
       at System.Windows.Forms.TrackBar.OnScroll(EventArgs e)
       at System.Windows.Forms.TrackBar.WndProc(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.SendMessage(HandleRef hWnd, Int32 msg, IntPtr wParam, IntPtr lParam)
       at System.Windows.Forms.Control.SendMessage(Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.Control.ReflectMessageInternal(IntPtr hWnd, Message& m)
       at System.Windows.Forms.Control.WndProc(Message& m)
       at System.Windows.Forms.ScrollableControl.WmHScroll(Message& m)
       at System.Windows.Forms.ScrollableControl.WndProc(Message& m)
       at System.Windows.Forms.UserControl.WndProc(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.CallWindowProc(IntPtr wndProc, IntPtr hWnd, Int32 msg, IntPtr wParam, IntPtr lParam)
       at System.Windows.Forms.NativeWindow.DefWndProc(Message& m)
       at System.Windows.Forms.Control.DefWndProc(Message& m)
       at System.Windows.Forms.Control.WndProc(Message& m)
       at System.Windows.Forms.TrackBar.WndProc(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
       at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.Run(Form mainForm)
       at Extracting_Frames.Program.Main() in D:\C-Sharp\Extracting_Frames\Extracting_Frames\Extracting_Frames\Program.cs:line 18
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.Runtime.Hosting.ManifestRunner.Run(Boolean checkAptModel)
       at System.Runtime.Hosting.ManifestRunner.ExecuteAsAssembly()
       at System.Runtime.Hosting.ApplicationActivator.CreateInstance(ActivationContext activationContext, String[] activationCustomData)
       at System.Runtime.Hosting.ApplicationActivator.CreateInstance(ActivationContext activationContext)
       at System.Activator.CreateInstance(ActivationContext activationContext)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssemblyDebugInZone()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:50:42.293

`list_of_histograms is a contain now 40 indexs in each index`

这将是你的问题。请记住，当您声明某些内容时，它会从 0 开始对其进行索引。因此，40 个索引意味着它的最大值为 39。这样做`list_of_histograms[40]`会导致错误。

编辑：现在，当我重新标记它时，我注意到对您的问题的评论......

# java - 相同的 Runnable 类被两次传递给同时运行两个/多个线程的 ExecutorService

> ID：13161625
> 
> 赞同：1
> 
> 时间：2012-10-31T15:40:30.860
> 
> 标签：java, multithreading, runnable, executorservice

我有多个可运行的类，我想通过一个集中的类使用执行器服务运行它们（称之为 Launcher 类，其中包含所有可运行的列表）。

我写了一个`Launcher`类，它使用所有的 bean 来实例化`applicationContext.getBean()`. 每个可运行类还`pool size`为它定义一个（为此可运行类产生的线程数）。

```
public class DaemonsLauncher {

    @Autowired
    private ApplicationContext appContext;

    private List<Daemon> daemons = new ArrayList<Daemon>();

    private ScheduledThreadPoolExecutor executor;

    private void initThreadPool() throws Exception {
        //daemonNames coming at run time from somewhere.
        List<String> daemonList = Arrays.asList(daemonNames.split(Constant.COMMA));
        //Pool size will now be summation of all the pool sizes.
        int poolSize = 0;
        for (String dName : daemonList) {
            Daemon daemon = appContext.getBean(dName, Daemon.class);
            poolSize += daemon.getPoolSize();
            daemons.add(daemon);
        }
        executor = new ScheduledThreadPoolExecutor(poolSize);
    }

    public void launchDaemons() throws Exception {
        for (Daemon daemon : daemons) {
            for (int currentThreadCount = 1; currentThreadCount <= daemon.getPoolSize(); currentThreadCount++) {
                executor.scheduleWithFixedDelay(daemon, 0, XYZ, ABC);
            }
        }
    }
} 
```

在执行此操作的过程中，我将所有可运行对象添加到一个`List<Daemon>`（其中 Daemon 是由其他守护进程扩展的抽象可运行类）。

```
public abstract class Daemon implements Runnable {

    protected int poolSize = 1;

    public int getPoolSize() {
        return poolSize;
    }

    @Override
    public void run() {
        //Calls run methods of individual runnables here.
    }

} 
```

如您所见，我在执行时多次添加每个可运行类的相同实例（取决于 poolSize）。

`executor`作为一个`ScheduledThreadPoolExecutor`.

在调用run 方法的那一刻，`R`我两次都找到了相同的可运行类实例，因为它们只被使用一次`appContext.getBean()`（通过打印 hasCode 和 toString 进行检查）。

但是这些可运行类的多个实例同时运行。

这种情况可能有什么问题？这些为同一个可运行对象运行的多个线程会导致问题还是会正常运行？

作为替代方案，根据 poolSize，我甚至可以在此循环之前获取 Runnable 类的多个实例，并且根据列表中存在的所有“Runnable”条目仅循环一次。

1.  所有 bean 本质上都是原型（尽管它不会出现，因为我只调用了一次 appContext.getBean）。
2.  一个`sample Runnable class`。

    ```
    public class R extends Daemon {
        @Override
        public void runIndividualDaemon() {
            //Called by run of Daemon class.
            logger.info("Running Daemon." + this.hashCode() + " " + this.toString());
        }

        @Override
        protected void init() throws Exception {
            this.poolSize = 5;
        }
    } 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:52:41.637

如果您有一个任务被多次执行，那是因为您多次添加了它。

我建议您在添加任务时登录以确认这一点。

> 但是同一个线程执行两个线程的任务怎么会发生呢？

一个线程不能同时执行两个任务，但它可以一个接一个地执行一个任务，重复使用同一个线程。

> 是不是“我有两个'Runnable'类的实例”，如果那个bean是单例的，情况就不会如此？

在这种情况下，我不相信添加两个相同的任务或两次添加相同的任务会产生很大的不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:13:05.913

由于 Daemon 类不是线程安全的，因此从多个线程运行相同的实例（Runnable 类型）是危险的。从多个线程运行同一实例的方法总是很危险的，除非对对象的访问受到监视器（同步关键字）的保护。

然后，池中的所有线程只执行单个 Runnable 对象。线程池是为我们有许多小型 Runnables 但不想为每个实例花费一个线程的用例而设计的。由于您的任务是轮询数据库，因此每个任务都有一个线程是合乎逻辑的，但是您不需要创建线程池：只需为每个任务启动一个新线程（包括 daemonList 中某些类的多个线程）。

您写道：“但是这些可运行类的多个实例同时运行”。当然，因为你是这样编程的。线程是同时运行事物的工具。线程是否将 Runnable 类型的相同或不同对象作为要执行的任务并不重要。

# oop - Grails继承错误行为

> ID：13161626
> 
> 赞同：0
> 
> 时间：2012-10-31T15:40:32.967
> 
> 标签：oop, grails, groovy, sts-springsourcetoolsuite

我注意到 groovy OOP 上有一个非常奇怪（或错误）的行为。我想确定这是正常的。
我有一个接口和一个类（在 grails 项目中），例如：

*界面*

```
package it.rascio.test

interface MyInterface {
  public Object myMethod()

  public ArrayList<? extends Observable> secondMethod()
} 
```

*班级*

```
package it.rascio.test

import java.util.ArrayList;
import java.util.Observable;

class MyImplementation implements MyInterface {

  @Override
  public Object myMethod() throws Exception{
    return null;
  }

  @Override
  public ArrayList<String> secondMethod() {
    // TODO Auto-generated method stub
    return null;
  }

} 
```

你怎么看这在概念上是错误的，因为*myMethod*没有声明*throws*子句，而实现接口的类却声明了

并且`secondMethod`需要 a`List`的`Observable`对象，但是实现类声明了 a `List`of `String`（那不是 a `Observable`）。

使用此代码 STS (eclipse) 告诉我存在编译错误，但如果我尝试启动`grails compile`命令，它可以工作！

这怎么可能？这是一个错误还是什么？

# c++ - Visual Studio 2008 Windows SDK 编译器错误

> ID：13161627
> 
> 赞同：2
> 
> 时间：2012-10-31T15:40:37.847
> 
> 标签：c++, visual-studio, compiler-errors

我最近遇到了编译器错误。

出于某种原因，当我尝试在 Visual Studio 2008（引用 7.1 SDK）中编译我的解决方案时，我收到了大量如下所示的错误：

> 错误 C2040：“WCHAR”：“const WCHAR *”与“wchar_t”的间接级别不同

还有这个：

> 错误 C2146：语法错误：缺少“；” 在标识符“PCTSTR”之前

我对这些消息有点困惑，因为我团队的其他成员能够毫无问题地编译相同的代码。

有没有其他人遇到过这个问题？我似乎正在编译为 C++，并且文件也以 .cpp 扩展名命名（这是本文中提到的问题[）](https://stackoverflow.com/questions/3354490/strange-visual-studio-2008-c-compiler-error)，所以我不确定还有什么可能导致此错误。

对此问题的任何帮助将不胜感激。

这是一个简单的示例程序，应该但不会为我构建：

**注意：这仅在包含 windows.h 时发生**

```
#include <windows.h>

int WINAPI
WinMain(HINSTANCE hInst, HINSTANCE hPrev, LPSTR pszCmdLine, int iCmdShow)
{
    return 0;
} 
```

这些是出现的错误：

> 错误 1 ​​错误 C2040: 'WCHAR' : 'const WCHAR *' 与 'wchar_t' c:\program files (x86)\microsoft sdks\windows\v7.1\include\winnt.h 的间接级别不同
> 
> 错误 2 错误 C2146：语法错误：缺少 ';' 在标识符“PCTSTR”之前 c:\program files (x86)\microsoft sdks\windows\v7.1\include\winnt.h
> 
> 错误 3 错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数 c:\program files (x86)\microsoft sdks\windows\v7.1\include\winnt.h
> 
> 错误 4 错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数 c:\program files (x86)\microsoft sdks\windows\v7.1\include\winnt.h
> 
> 错误 5 错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数 c:\program files (x86)\microsoft sdks\windows\v7.1\include\winnt.h

# android - 在 Android 上裁剪图像的透视变换

> ID：13161628
> 
> 赞同：14
> 
> 时间：2012-10-31T15:40:40.020
> 
> 标签：android, image, matrix, bitmap, transform

我正在尝试对通过相机捕获的位图进行透视变换。用户调整矩形对象周围的边界四边形（如白框所示）。然后我尝试使用以下代码将其转换为矩形图像：

```
public static Bitmap perspectiveTransformation(Bitmap bitmap,BoundingQuad boundingQuad)
{
    Matrix matrix = new Matrix();
    float[] dst = new float[] {
            0,
            0,
            bitmap.getWidth(),
            0,
            bitmap.getWidth(),
            bitmap.getHeight(),
            0,
            bitmap.getHeight()
    };
    float[] src = new float[] {
            boundingQuad.topLeft.x,
            boundingQuad.topLeft.y,
            boundingQuad.topRight.x,
            boundingQuad.topRight.y,
            boundingQuad.bottomRight.x,
            boundingQuad.bottomRight.y,
            boundingQuad.bottomLeft.x,
            boundingQuad.bottomLeft.y
    };
    matrix.setPolyToPoly(src, 0, dst, 0, src.length >> 1);
    return Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(), bitmap.getHeight(), matrix, true);
} 
```

但是，我生成的图像包含在我的四边形边界之外的图像数据。如果我能弄清楚变换后四边形的坐标是什么，这将是可以接受的，这样我就可以裁剪结果，但我完全不知道该怎么做。

无论是在转换后找到四边形的坐标，还是理想地找到一种方法来防止这种情况首先发生，任何帮助都将不胜感激。

输入：

[http://i.stack.imgur.com/33RfN.png](http://i.stack.imgur.com/33RfN.png)

输出：

[http://i.stack.imgur.com/zWFvA.png](http://i.stack.imgur.com/zWFvA.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-10-30T12:30:41.430

我有同样的问题，并通过在变换后找到矩形的坐标来解决它。

要找到这些坐标，您必须了解发生了什么。该矩阵定义了一个透视变换，由四边形的 4 个边缘点和对应点给出。您已使用以下代码完成此操作：

```
Matrix matrix = new Matrix();
float[] dst = new float[] {
        0,
        0,
        bitmap.getWidth(),
        0,
        bitmap.getWidth(),
        bitmap.getHeight(),
        0,
        bitmap.getHeight()
};
float[] src = new float[] {
        boundingQuad.topLeft.x,
        boundingQuad.topLeft.y,
        boundingQuad.topRight.x,
        boundingQuad.topRight.y,
        boundingQuad.bottomRight.x,
        boundingQuad.bottomRight.y,
        boundingQuad.bottomLeft.x,
        boundingQuad.bottomLeft.y
}; 
matrix.setPolyToPoly(src, 0, dst, 0, src.length >> 1); 
```

这意味着（例如）四边形的左上角被转换为点 (0,0)。您可以通过将矩阵应用于点并检查结果值来验证这一点。要应用矩阵，您可以使用方法`mapPoints(...)`。定义的转换矩阵工作正常。这种转换的（乍一看）奇怪的行为是由位图的创建引起的：

```
 return Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(), bitmap.getHeight(), matrix, true); 
```

生成的位图似乎是错误的，因为某些点（例如四边形左上角左侧的所有点）都转换为负坐标，如果您想将某些东西绘制到位图中，坐标必须为正. 因此，变换点是移位的，这会导致位图中变换点的奇怪坐标。

总结：点被正确地转换到新坐标，但不能显示，因此它们被移动，位图中变换点的移动坐标不是转换矩阵中定义的坐标。

为了解决这个问题并获得位图中变换点的正确坐标，您必须计算移位的值。位移由一个 x 值和一个 y 值组成。

为了计算 x 值，我用先前定义的矩阵转换了原始图像左上点的 x 值和左下点的 x 值。左上点或左下点被转换到生成位图的左边界，因此该点的位图坐标的 x 值等于 0 并且取反（因为 x-值必须是正数）转换坐标的 x 值是移位的 x 值。转换到结果位图左边界的点是具有最大否定 x 值的点。因此，移位的 x 值是变换后的左上角和左下角点的否定 x 值的最大值。

为了计算 y 值，我转换了原始图像左上点的 y 值和右上点的 y 值，因为这是转换到结果顶部边界的可能点位图和变换点的 y 值在结果位图中等于 0。通过再次取转换后的 y 值的否定值的最大值，您可以获得移位的 y 值。

生成的代码如下所示：

```
 float[] mappedTL = new float[] { 0, 0 };
    matrix.mapPoints(mappedTL);
    int maptlx = Math.round(mappedTL[0]);
    int maptly = Math.round(mappedTL[1]);

    float[] mappedTR = new float[] { bitmap.getWidth(), 0 };
    matrix.mapPoints(mappedTR);
    int maptrx = Math.round(mappedTR[0]);
    int maptry = Math.round(mappedTR[1]);

    float[] mappedLL = new float[] { 0, bitmap.getHeight() };
    matrix.mapPoints(mappedLL);
    int mapllx = Math.round(mappedLL[0]);
    int maplly = Math.round(mappedLL[1]);

    int shiftX = Math.max(-maptlx, -mapllx);
    int shiftY = Math.max(-maptry, -maptly);

    Bitmap resultBitmap = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(), bitmap.getHeight(), matrix, true);
    return Bitmap.createBitmap(resultBitmap, shiftX, shiftY, bitmap.getWidth(), bitmap.getHeight(), null, true); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-10-25T16:36:30.777

创建新`Bitmap`图像后，您可以通过构建“裁剪”意图并调用它来调用 Android 的内置裁剪功能，例如：

```
Intent cropIntent = new Intent("com.android.camera.action.CROP");

// Put in 'Extras' here to build the intent

// Start the activity. It will be handled by returning data to onActivityResult
startActivityForResult(cropIntent, PIC_CROP); // PIC_CROP is just an arbitrary tag name. 
```

可以从[这里](https://stackoverflow.com/questions/15228812/crop-image-android-android)获得有关 Android 中图像裁剪的更多详细信息。

您还需要在应用的清单文件中添加以下内容才能使其正常工作：

```
<uses-feature android:name="android.hardware.camera" ></uses-feature>
<uses-permission android:name="android.permission.CAMERA" /> 
```

# jquery-ui - JQuery拖放 - 如何获取被拖动的元素？

> ID：13161632
> 
> 赞同：-1
> 
> 时间：2012-10-31T15:40:50.577
> 
> 标签：jquery-ui, jquery

我正在使用 jQuery UI - 拖放

我的 html 是：

```
<head>
    <title></title>
    <script type="text/javascript" src="jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="jquery-ui-1.8.custom.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css" media="screen" />
    <script type="text/javascript">
        $(document).ready(function () {
            $("#example-1-2 .sortable-list").sortable({ connectWith: '#example-1-2 .sortable-list', opacity: 0.6, cursor: 'move' });
        });
    </script>
</head>
<body>
    <div id="example-1-2">
                <div id="Div2" class="column left first">
                    <ul id="leftlist" class="sortable-list">
                        <li class="sortable-item">Item1</li>
                        <li class="sortable-item">Item2</li>
                        <li class="sortable-item">Item3</li>
                    </ul>
                </div>
                <div class="column left">
                    <ul id="rightlist" class="sortable-list">
                        <li class="sortable-item">Item4</li>
                        <li class="sortable-item">Item5</li>
                        <li class="sortable-item">Item6</li>
                    </ul>
                </div>
            </div>
</body>
</html> 
```

所以让我们看看我是否选择`"item5"`从`rightlist`to 和 drop at`leftlist`

我想在我的 $jquery Ajax 方法中获取 item5

我怎么得到这个？

我尝试的是：

但是使用这个 [var order = $(this).sortable("toArray");] 我得到了所有元素，但我想要一个被拖动的元素

```
$("#leftlist,#rightlist").sortable({
                update: function (event, ui) {
                    var order = $(this).sortable("toArray");
                    $.ajax(
                     {
                        type: "POST",
                        url: "WebForm3.aspx/LeftSideData",
                        data: "{'newdata': '" + order + "'}",
                        dataType: "json",
                        contentType: "application/json",
                     });
                }

            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:52:56.963

艾伦 - 试试看：

```
ui.item 
```

根据 jQueryUI 可排序 API 文档，“项目”：“代表当前拖动元素的 jQuery 对象”

你确定你不想也使用“可拖动”，因为你正在从一个列表拖放到另一个列表？您可以使用 Draggable 的 connectToSortable 来作为 API 文档所述：“允许将可拖动对象拖放到指定的可排序对象上。”

通过 API 文档：

```
$( ".selector" ).draggable({ connectToSortable: "#my-sortable" }); 
```

# java - JavaEE EJB/Web 容器中的线程创建

> ID：13161634
> 
> 赞同：2
> 
> 时间：2012-10-31T15:40:53.617
> 
> 标签：java, multithreading, jakarta-ee, ejb, threadpool

我在 Adam Bien 的 JavaEE night hacks 书中读到，虽然在 EJB 容器上禁止创建线程，但对于 Web 容器却不是这样。他实际上在他的 X 射线探测器中创建了一个线程池执行器，该探测器在 Tomcat 上运行。

我现在有点困惑。虽然我遇到了必须在 EE 应用程序中进行手动线程池管理的情况，但我可以理解为什么在 JavaEE 容器中手动创建线程是个坏主意。但是，当您可以将大部分 EJB 部署到其中一个时，我不明白 EJB 容器和 Web 容器在线程创建方面的区别。如果在 Web 容器中生成线程的会话 bean 没有任何问题，那么将相同的会话 bean 部署到 EJB 容器会导致什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T17:44:21.730

这就是 Java EE 的“企业”部分与现实世界相遇的地方。

使用“企业”系统的前提大多以管理为中心。具体来说，将决策和配置交给容器，而不是依赖应用程序本身来管理这些资源。通过将资源的创建和管理与应用程序代码分离并依赖容器，系统管理员可以查看和访问这些资源，从而有可能在更高级别以通用方式调整和监控应用程序，而不是为此使用特定于应用程序的机制。

所以，这就是我们所处的环境，也是驱动 Java EE 规范中关于你能做什么和不能（不应该）做什么的“规则”的部分原因。

现在，servlet 容器规范更加狂野西部。它没有所有这些“企业”管理功能（请注意，许多容器公开了它们，但规范没有提及它们）。例如，提供静态文件是 Web 容器的基本功能，因此限制开发人员对所述文件的访问几乎没有意义。此外，servlet 规范出现在 EJB 规范之前，并且被固定在环境中，而不是根据该环境重做。

这为您提供了两个关于特定事物（如线程）的“矛盾”规范。

所以，是的，Servlet 规范“让你”管理自己的线程池，即使在 Java EE 应用程序中，即使这些线程池可能在完全相同的 JVM 中（因此“无法管理”消耗 Java EE 资源） Java EE 容器。

这在现实世界中的最终含义是，是的，如果您愿意，您可以在 Java EE 容器或 servlet 容器中假脱机线程等。没有一个流行的容器禁止您这样做（WebSphere 可能，我不使用它）。

但是，你不应该。Java EE（尤其是 Java EE 6）有机制和箍，你可以跳过来做事，而不是使用线程池。诸如 WorkManager、JMS 队列、异步会话 bean、计时器作业之类的东西。

在 servlet 应用程序中，这些机制中的大多数都不存在，因此您无法利用它们，因此您使用“just Java”来代替。

在使用 Java EE 应用程序部署的 Web 应用程序中使用“Just Java”的后果是容器内的可见性。例如，您的 Web 应用程序将需要自己的配置变量来设置其线程池的大小，并且不能依赖容器来管理它。

最后，这通常没什么大不了的。Java EE 的大部分复杂性都集中在许多人不使用的管理功能上。就我自己而言，我使用 Java EE 并且很少使用普通的 OL WAR，我喜欢尽可能多地向容器中推送 - 让它完成它的工作。也就是说，我在 Java EE 容器中的 WAR 中运行自定义套接字服务器，打破了所有可以想象的规则，仅仅是因为它更容易做到。“Java EE 方式”对于我们想要做的事情还不够灵活，所以我们选择了“Just Java”，并将代码投入到 WAR 中，这样我们就可以在狂野的西部玩耍，那里的男人就是男人，管理自己的线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T16:59:55.087

EJB 是服务器管理的。管理意味着即依赖注入。如果您使用注释从类中生成线程，服务器将无法处理它们（执行@PostConstruct、注入引用等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T17:19:15.363

EJB 始终在 EJB 容器中执行，因此不应在 EJB 中手动创建线程。即使它们是作为 WAR 文件（Web 模块）的包，它们也会在 EJB 容器中执行，并且在线程创建方面具有相同的限制。

但是，servlet 和过滤器是在 web 容器中执行的，没有什么可以阻止它们拥有自己的手动管理的线程池。

# excel - 不明白为什么下面的 VBA 片段会抛出错误 52

> ID：13161636
> 
> 赞同：0
> 
> 时间：2012-10-31T15:40:56.210
> 
> 标签：excel, vba

以下代码段抛出错误 52 - 错误的文件名或编号，我不知道为什么：

```
Private Sub InitializeLogFile()
  Dim fileNumber As Integer

  filename = Left(ThisWorkbook.Name, (InStrRev(ThisWorkbook.Name, ".", -1, vbTextCompare) - 1))
  LOG_FULL_FILENAME = "D:\data\" & Environ("USERNAME") & "\My Documents\" + filename + "_" + Format(Now, "yyyymmdd_hh:mm:ss") + ".log"

  MsgBox LOG_FULL_FILENAME

  fileNumber = FreeFile

  MsgBox fileNumber

  Open LOG_FULL_FILENAME For Append As #fileNumber

  Print #fileNumber, Date & " - " & ThisWorkbook.Name & " opened. "
  Print #fileNumber,

  Close #fileNumber
End Sub 
```

有人可以指出我的错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T16:42:00.507

错误在这一行：

```
LOG_FULL_FILENAME = "D:\data\" & Environ("USERNAME") & "\My Documents\" + filename + "_" + Format(Now, "yyyymmdd_hh:mm:ss") + ".log" 
```

具体来说，从`Format(Now, "yyyymmdd_hh:mm:ss")`

你不能有`:`一个文件名

文件名不能包含`\/:*?"<>|`

尝试：`Format(Now, "yyyymmdd_hhmmss")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:48:16.223

首先，使用`Option Explicit`并初始化所有变量。

其次，如果工作簿名称是例如。“Book1”，然后`(InStrRev(ThisWorkbook.Name, ".", -1, vbTextCompare) - 1)`结果为 -1。调用`Left(..., -1)`会产生运行时错误。

使用调试器，你会看到。

# sphinx - Sphinx 并不总是返回字符串属性

> ID：13161639
> 
> 赞同：0
> 
> 时间：2012-10-31T15:41:01.307
> 
> 标签：sphinx

在某些情况下，Sphinx 返回的结果没有我声明为 sql_attr_string 的 JOIN 字段。以以下源/索引配置为例：

```
source myapp_recipe
{
    type                = pgsql
    sql_host            = 
    sql_user            = me
    sql_pass            = secret
    sql_db              = myapp_db
    sql_port            = 

    sql_query           = \
        SELECT myapp_recipe.id as id, \
            myapp_recipe.name as name, \
            myapp_recipe.cookbook_id as cookbook_id, \
            myapp_cookbook.name as cookbook_name, \
            'recipe' as content_type \
        FROM myapp_recipe \
        INNER JOIN myapp_cookbook \
        ON myapp_recipe.cookbook_id = myapp_cookbook.id

    #content_type for django
    sql_attr_string       = content_type

    # stored string fields in the document
    sql_attr_string     = cookbook_name

    # stored and indexed string fields
    sql_field_string     = name

    # ForeignKey's
    sql_attr_uint       = cookbook_id
}

index myapp_recipe
{
    source          = myapp_recipe
    path            = /var/data/myapp_recipe
    docinfo         = extern
    morphology      = none
    stopwords       =
    min_word_len    = 2
    charset_type    = utf-8
    min_prefix_len  = 0
    min_infix_len   = 3
    enable_star     = 0
} 
```

对于某些搜索，返回的结果文档除了`content_type`和之外没有其他属性`name`。对于返回相同文档的不同搜索，Sphinx 很可能返回具有所有预期属性的相同结果文档。

示例：“pizza”查询将返回不完整的结果文档 (documentA)，没有 JOIN 字符串属性。

对“pizza pocket”的查询将返回具有所有预期 JOIN 属性的相同文档 (documentA)。

谁能解释这种莫名其妙的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:52:59.700

检查您是否没有重复的 id 您的 sql_query 必须返回具有唯一 id 的结果，否则 Sphinx 可以具有相同 id 的多个文档（对于 Sphinx，id 被视为一个简单的数字，不适用任何唯一性规则）。当您编制索引时，应该会发出警告，指出您有重复项。

# asp.net-mvc - @Html.ActionLink 调用 Post 方法

> ID：13161645
> 
> 赞同：3
> 
> 时间：2012-10-31T15:41:20.810
> 
> 标签：asp.net-mvc, post, razor, get

我的 Razor 视图中有一个`@HTML.ActionLink`，我希望它调用一个`Post`操作方法而不是`Get` 一个。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-24T10:49:30.163

如果您使用的是引导程序，您可以通过应用 btn-link 类轻松地使按钮看起来像一个链接，例如

```
<input type="submit" name="ActionType" value="Edit" class="col-md-1 btn btn-link" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T15:45:26.757

如果要调用 POST 操作，请将此链接放在使用 POST 操作的表单中，或使用 ajax 版本。[您可以在此处](https://stackoverflow.com/questions/2048778/asp-net-mvc-actionlink-and-post-method)找到更多详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T15:45:43.437

是和不是。普通的 ActionLinks 将是普通的链接。要么你必须使用一个表格（方法是粗略的帖子）并有一个链接来提交它。或者你可以添加一个 javascript 和一个不错的扩展。

看看[http://dr2ab.wordpress.com/2011/07/25/linkbuttons-in-mvc-razor/](http://dr2ab.wordpress.com/2011/07/25/linkbuttons-in-mvc-razor/)

可能适合你。

# c# - 无法获取 feedburner 订阅者的数量

> ID：13161651
> 
> 赞同：0
> 
> 时间：2012-10-31T15:41:36.890
> 
> 标签：c#, c#-4.0, feedburner

我正在尝试运行此代码：

```
public string FeedReadersCount(string id)
{
    XDocument xdoc = XDocument.Load("http://feedburner.google.com/api/awareness/1.0/GetFeedData?uri=" + id);
    return (from item in xdoc.Descendants("entry")
            select item.Attribute("circulation").Value).SingleOrDefault();
} 
```

但它返回 404 错误。有人知道另一种方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:53:43.027

自 2012 年 10 月 20 日起，Feedburner API 已被弃用。我正在尝试找出另一种获取订阅者数量的方法。

# c# - 在 RDLC 的列中重复表

> ID：13161653
> 
> 赞同：0
> 
> 时间：2012-10-31T15:41:41.383
> 
> 标签：c#, winforms, report, rdlc

我在 VS2010 RDLC 报告中有一个表格。它会像打印收据一样打印数据，因为我们正在尝试节省一些空间。

我想让表格在开始新页面之前作为同一页面上的第二列重复。例如：

```
Table            Table
Table            Table
Table            Table
Table            Table
Table            Table
=== page break ===== 
```

代替

```
Table
Table
Table
Table
Table
Table
Table
====page break=====
Table
Table
Table 
```

如何在表格中添加第二列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:57:25.197

Under the Report properties there is a Property for Columns.
I have changed this to two(2).
But the default report viewer will not show the columns, nor will they print the columns.

So I exported the report to a PDF and then printed that file.

```
private void Export(LocalReport report)
{
        try
        {
            string deviceInfo =
              @"<DeviceInfo>
            <OutputFormat>PDF</OutputFormat>
            <PageWidth>8.5in</PageWidth>
            <PageHeight>11in</PageHeight>
            <MarginTop>0.25in</MarginTop>
            <MarginLeft>0.25in</MarginLeft>
            <MarginRight>0.25in</MarginRight>
            <MarginBottom>0.25in</MarginBottom>
            </DeviceInfo>";
            Warning[] warnings;
             string[] streamIds;
            string mimeType = string.Empty;
            string encoding = string.Empty;
            string extension = string.Empty;

            m_streams = new List<Stream>();
            byte[] bytes = report.Render("PDF", deviceInfo, out mimeType, out encoding, out extension, out streamIds, out warnings);

            using (FileStream fs = new FileStream("output.pdf", FileMode.Create))
            {
                fs.Write(bytes, 0, bytes.Length);
            }

            foreach (Stream stream in m_streams)
                stream.Position = 0;
        }
        catch (Exception ex)
        {
            Common.LogManager.WriteToLog(ex.Message + Environment.NewLine + ex.StackTrace);
        }
    } 
```

and then to print i use the print dos command in a new process:

```
ProcessStartInfo psi = new ProcessStartInfo();
psi.UseShellExecute = true;
psi.Verb = "print";
psi.WindowStyle = ProcessWindowStyle.Hidden;
psi.FileName = "output.pdf";
Process.Start(psi); 
```

The report printed exactly as I needed it to.

# javascript - jquery/javascript中的近似文本匹配

> ID：13161655
> 
> 赞同：0
> 
> 时间：2012-10-31T15:41:42.780
> 
> 标签：javascript, jquery, html

有没有办法在 jquery 中进行近似文本匹配？

我有一个正确答案的 div

```
<div class="correctAnswer" style="display:none;">CORRECT</div> 
```

我希望当输入标签中的答案是近似正确时显示一些文本

```
<input type="text"> //lets guess i type "CORREC"
<div class="Approximate" style="display:none;">Your answer is Approximate correct!</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:51:05.227

您可以使用 Levenshtein 距离算法来执行此操作，这将为您提供字符串相似度的分数。

它[在维基百科上得到了很好的描述，](http://en.wikipedia.org/wiki/Levenshtein_distance)并已用于许多不同的语言/技术。

伪算法是这样的：

```
int LevenshteinDistance(string s, string t)
{
  int len_s = length(s), len_t = length(t), cost = 0

  if(s[0] != t[0]) then cost = 1

  if(len_s == 0) then      return len_t
  elseif(len_t == 0) then  return len_s
  else                     return minimum(LevenshteinDistance(s[1..len_s-1], t) + 1,
                                      LevenshteinDistance(s, t[1..len_t-1]) + 1,
                                      LevenshteinDistance(s[1..len_s-1], t[1..len_t-1]) + cost)
} 
```

您可能还想[在 github 上尝试这个 javascript 实现](https://gist.github.com/979790)（这不是我的，顺便说一句）。

# android - 是否有任何可用的库可用于在 android 中显示离线栅格地图？

> ID：13161657
> 
> 赞同：1
> 
> 时间：2012-10-31T15:41:47.643
> 
> 标签：android, map, gis, raster, geotiff

正如标题所示，我正在寻找一个在 android 中显示离线地图的库。

* * *

## 我的目标

我有一个要显示的（地理）Tiff 格式的栅格地图。

* * *

## 类似问题

[Android - 离线、非基于矢量的自定义地图](https://stackoverflow.com/questions/1482206/android-offline-non-vector-based-custom-maps)

[在 android 中使用 mapsforge 的离线地图](https://stackoverflow.com/questions/9645235/offline-map-using-mapsforge-in-android)

* * *

## 我做了什么

我在谷歌和这里查看并重新优化了我的搜索，大部分只提到了矢量地图库，比如 OSMDroid。

我还没有运气地查看了[mapsforge](http://code.google.com/p/mapsforge/)，因为 osmosis 仅从 OSM 数据生成地图。

* * *

## 我知道的

我知道移动 GIS 不适合直接采用大型 Tiff 格式。所以我准备将地图转换并重新校准为图书馆可以采用的任何合适的格式。

好吧，我记得有一个名为 GVSIG 的好图书馆。不幸的是，由于商标持有人的一些问题，现在无法找到它？

如果您听说过名为 Locus 的应用程序，那实际上是我的目标。它可以采用任何离线地图源，包括矢量和光栅之一。

* * *

## 你为什么不开始你自己的？

好吧，我不是很擅长，所以这就是我首先要寻找图书馆的原因。

说真的，你不想看到我带头。它涉及很多混乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:33:52.283

OSMDroid 是基于光栅而不是基于矢量的。对于具有离线支持的基于栅格的映射库，它做得很好。将您的 tiff 转换为合适的格式可能需要一些工作，但我不知道 MOAB 是否会采用值得一看的 tiff 输入。

# python - 如何在 python 脚本中调用 robocopy 来批量复制多个文件夹？

> ID：13161659
> 
> 赞同：1
> 
> 时间：2012-10-31T15:41:47.287
> 
> 标签：python, windows-7, command-line, copy, robocopy

我正在尝试在网络驱动器之间移动多个大文件夹（> 10 Gb、> 100 个子文件夹、> 2000 个文件）。我曾尝试在 python 中使用 shutil.copytree 命令，该命令工作正常，但由于不同原因它无法复制一小部分（< 1 % of files ）。

我相信 robocopy 对我来说是最好的选择，因为我可以创建一个记录传输过程的日志文件。但是，由于我需要复制 > 1000 个文件夹，因此手动工作是不可能的。

所以我的问题本质上是如何从python脚本中调用robocopy（即命令行），确保日志文件写入外部文件。

我在 Windows 7 环境中工作，由于组织限制，Linux/Unix 是不可能的。如果有人有任何其他建议可以灵活地批量复制这么多文件夹，欢迎他们。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T15:54:50.823

[子进程](http://docs.python.org/library/subprocess.html)允许您进行系统调用。这将允许您像从命令行一样调用 robocopy。

```
from subprocess import call
call(["robocopy", "basefolder newfolder /S /LOG:mylogfile"]) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-06T18:14:14.200

就像 halfs13 说的那样使用 subprocess 但你可能需要像这样格式化它

`from subprocess import call call(["robocopy",'fromdir', 'todir',"/S"])` 否则它可能会将源代码读取为一切

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T15:51:52.470

使用`os.exec`一系列函数之一来启动任何外部程序：

*   [http://docs.python.org/2/library/os.html#process-management](http://docs.python.org/2/library/os.html#process-management)

可能你想要`os.execlp(file, arg0, arg1, ...)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-11T21:16:42.293

这让我走上了正确的道路，但我不得不用逗号分隔选项，例如

```
from subprocess import call
call(["robocopy", "./", "newfolder/test02", "/S", "/LOG:mylogfile"]) 
```

这是一种享受。“/S”复制了所有子文件夹。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-28T06:31:28.320

```
cmd = 'robocopy.exe {0} {1} /S'.format(srcDir, destPath)
output = subprocess.run(cmd.split(), capture_output=True, text=True)
print(output.stdout) 
```

上面的代码片段会做到这一点。

注意：如果`srcDir`和`destPath`中有任何空格，则`cmd.split()`将不起作用。相反，您需要执行以下操作：

```
output = subprocess.run(['robocopy.exe',
                         r'<full src path>',
                         r'<full dest path>',
                         '/S'],
                        capture_output=True,
                        text=True)
print(output.stdout) 
```

您可以在此处阅读有关子流程的所有信息：[https ://docs.python.org/3.7/library/subprocess.html](https://docs.python.org/3.7/library/subprocess.html)

# apache-flex - 使用 URLRequest 发送 Base64 编码数据

> ID：13161662
> 
> 赞同：1
> 
> 时间：2012-10-31T15:41:54.863
> 
> 标签：apache-flex, base64

我正在编写将图像与一些元数据一起上传到服务的功能，该服务期望使用以 base64 编码的图像进行 POST 操作。但是，图像数据在发布到服务器时似乎会被破坏，并且不会产生有效的图像。我选择使用 URLRequest 框架而不是 HTTPService，因为该服务返回用户想要保存的内联下载。

在此 URLRequest 调用中是否存在我错误地处理编码的地方？

```
 public function imageExportHandler():void
    {
        trace(this);
        var request:URLRequest = new URLRequest();
        request.method = URLRequestMethod.POST;
        request.url = imageExportServiceUrl;

        var params:Object = {
            image: encodeImageBase64(imageData),
            name: StringUtil.substitute("map-{xmin},{ymin}-{xmax},ymax}", imageExtent),
            format: Model.instance.imageExportModel.selectedFormat
        };
        request.data = new URLVariables(StringUtil.substitute("image={image}&format={format}&name={name}", params));
        navigateToURL(request, "_blank");
    }

    private function encodeImageBase64(toEncode:BitmapData):String
    {
        var pngEncoder:PNGEncoder = new PNGEncoder();
        var data:ByteArray = pngEncoder.encode(toEncode);
        var base64Encoder:Base64Encoder = new Base64Encoder();
        base64Encoder.encodeBytes(data);
        return base64Encoder.flush();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:09:20.143

事实证明，base64Encoder.flush() 没有正确终止编码字符串 - 要使用的正确函数是 base64Encoder.toString()。

# ios - 键盘出现时如何滚动 UIScrollView？

> ID：13161666
> 
> 赞同：118
> 
> 时间：2012-10-31T15:42:02.717
> 
> 标签：ios, objective-c, iphone, cocoa-touch, scrollview

我的代码有问题。`UIScrollView`当我编辑一个`UITextField`应该被键盘弹出隐藏的东西时，我试图移动它。

我现在正在移动主框架，因为我不知道如何在代码中“向上滚动”。所以，我做了一些代码，它工作正常，但是当我编辑一个 UItextfield 并切换到另一个`UITextField`而不按下“返回”按钮时，主视图会变得很远。

我对`NSLog()`我的变量大小、距离和 textFieldRect.origin.y 做了一个，如下所示。当我将两个`UITextField`放在同一个位置（y 原点）并执行此特定的“开关”（不按回车键）时，我得到相同的数字，而我的代码在第一次编辑时工作正常，`UITextField`但在第二次编辑时却不行。

看一下这个：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField {
{
    int size;
    CGRect textFieldRect = [self.view.window convertRect:textField.bounds fromView:textField];
    size = textFieldRect.origin.y + textFieldRect.size.height;
    if (change == FALSE)
    {
        size = size - distance;
    }
    if (size < PORTRAIT_KEYBOARD_HEIGHT)
    {
        distance = 0;
    }
    else if (size > PORTRAIT_KEYBOARD_HEIGHT)
    {
        distance = size - PORTRAIT_KEYBOARD_HEIGHT + 5; // +5 px for more visibility
    }
    NSLog(@"origin %f", textFieldRect.origin.y);
    NSLog(@"size %d", size);
    NSLog(@"distance %d", distance);
    CGRect viewFrame = self.view.frame;
    viewFrame.origin.y -= distance;
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:KEYBOARD_ANIMATION_DURATION];
    [self.view setFrame:viewFrame];
    [UIView commitAnimations];
    change = FALSE;
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
    change = TRUE;
    CGRect viewFrame = self.view.frame;
    viewFrame.origin.y += distance;
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:KEYBOARD_ANIMATION_DURATION];
    [self.view setFrame:viewFrame];
    [UIView commitAnimations];
} 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：224
> 
> 时间：2012-10-31T17:29:32.197

Apple 推荐的方法是更改`contentInset`​​ . `UIScrollView`这是一个非常优雅的解决方案，因为您不必弄乱`contentSize`. [以下代码是从Keyboard Programming Guide](https://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)复制的，其中解释了此问题的处理。你应该看看它。

```
// Call this method somewhere in your view controller setup code.
- (void)registerForKeyboardNotifications
{
    [[NSNotificationCenter defaultCenter] addObserver:self
            selector:@selector(keyboardWasShown:)
            name:UIKeyboardDidShowNotification object:nil];
   [[NSNotificationCenter defaultCenter] addObserver:self
             selector:@selector(keyboardWillBeHidden:)
             name:UIKeyboardWillHideNotification object:nil];
}

// Called when the UIKeyboardDidShowNotification is sent.
- (void)keyboardWasShown:(NSNotification*)aNotification
{
    NSDictionary* info = [aNotification userInfo];
    CGSize kbSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;
    UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, kbSize.height, 0.0);
    scrollView.contentInset = contentInsets;
    scrollView.scrollIndicatorInsets = contentInsets;

    // If active text field is hidden by keyboard, scroll it so it's visible
    // Your application might not need or want this behavior.
    CGRect aRect = self.view.frame;
    aRect.size.height -= kbSize.height;
    if (!CGRectContainsPoint(aRect, activeField.frame.origin) ) {
        CGPoint scrollPoint = CGPointMake(0.0, activeField.frame.origin.y-kbSize.height);
        [scrollView setContentOffset:scrollPoint animated:YES];
    }
}

// Called when the UIKeyboardWillHideNotification is sent    
- (void)keyboardWillBeHidden:(NSNotification*)aNotification
{
    UIEdgeInsets contentInsets = UIEdgeInsetsZero;
    scrollView.contentInset = contentInsets;
    scrollView.scrollIndicatorInsets = contentInsets;
} 
```

**斯威夫特版本：**

```
func registerForKeyboardNotifications() {
    NotificationCenter.default.addObserver(self, selector: #selector(onKeyboardAppear(_:)), name: NSNotification.Name.UIKeyboardDidShow, object: nil)
    NotificationCenter.default.addObserver(self, selector: #selector(onKeyboardDisappear(_:)), name: NSNotification.Name.UIKeyboardDidHide, object: nil)
}

// Don't forget to unregister when done
deinit {
    NotificationCenter.default.removeObserver(self, name: NSNotification.Name.UIKeyboardDidShow, object: nil)
    NotificationCenter.default.removeObserver(self, name: NSNotification.Name.UIKeyboardDidHide, object: nil)
}

@objc func onKeyboardAppear(_ notification: NSNotification) {
    let info = notification.userInfo!
    let rect: CGRect = info[UIKeyboardFrameBeginUserInfoKey] as! CGRect
    let kbSize = rect.size

    let insets = UIEdgeInsetsMake(0, 0, kbSize.height, 0)
    scrollView.contentInset = insets
    scrollView.scrollIndicatorInsets = insets

    // If active text field is hidden by keyboard, scroll it so it's visible
    // Your application might not need or want this behavior.
    var aRect = self.view.frame;
    aRect.size.height -= kbSize.height;

    let activeField: UITextField? = [addressTextView, servicePathTextView, usernameTextView, passwordTextView].first { $0.isFirstResponder }
    if let activeField = activeField {
        if !aRect.contains(activeField.frame.origin) {
            let scrollPoint = CGPoint(x: 0, y: activeField.frame.origin.y-kbSize.height)
            scrollView.setContentOffset(scrollPoint, animated: true)
        }
    }
}

@objc func onKeyboardDisappear(_ notification: NSNotification) {
    scrollView.contentInset = UIEdgeInsets.zero
    scrollView.scrollIndicatorInsets = UIEdgeInsets.zero
} 
```

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2015-09-02T12:23:56.157

我刚刚在 Xcode 7（beta 6）上使用适用于 iOS9 的 Swift 2.0 实现了这一点，在这里可以正常工作。

```
override func viewWillAppear(animated: Bool) {
    super.viewWillAppear(animated)
    registerKeyboardNotifications()
}

func registerKeyboardNotifications() {
    NSNotificationCenter.defaultCenter().addObserver(self, selector: "keyboardWillShow:", name: UIKeyboardWillShowNotification, object: nil)
    NSNotificationCenter.defaultCenter().addObserver(self, selector: "keyboardWillHide:", name: UIKeyboardWillHideNotification, object: nil)
}

deinit {
    NSNotificationCenter.defaultCenter().removeObserver(self)
}

func keyboardWillShow(notification: NSNotification) {
    let userInfo: NSDictionary = notification.userInfo!
    let keyboardSize = userInfo.objectForKey(UIKeyboardFrameBeginUserInfoKey)!.CGRectValue.size
    let contentInsets = UIEdgeInsetsMake(0, 0, keyboardSize.height, 0)
    scrollView.contentInset = contentInsets
    scrollView.scrollIndicatorInsets = contentInsets

    var viewRect = view.frame
    viewRect.size.height -= keyboardSize.height
    if CGRectContainsPoint(viewRect, textField.frame.origin) {
        let scrollPoint = CGPointMake(0, textField.frame.origin.y - keyboardSize.height)
        scrollView.setContentOffset(scrollPoint, animated: true)
    }
}

func keyboardWillHide(notification: NSNotification) {
    scrollView.contentInset = UIEdgeInsetsZero
    scrollView.scrollIndicatorInsets = UIEdgeInsetsZero
} 
```

**为 Swift 3 编辑**

似乎您只需要使用 Swift 3 设置`contentInset`和`scrollIndicatorInset`，滚动/contentOffset 会自动完成..

```
override func viewWillAppear(_ animated: Bool) {
    super.viewWillAppear(animated)
    registerKeyboardNotifications()
}

func registerKeyboardNotifications() {
    NotificationCenter.default.addObserver(self,
                                         selector: #selector(keyboardWillShow(notification:)),
                                         name: NSNotification.Name.UIKeyboardWillShow,
                                         object: nil)
    NotificationCenter.default.addObserver(self,
                                         selector: #selector(keyboardWillHide(notification:)),
                                         name: NSNotification.Name.UIKeyboardWillHide,
                                         object: nil)
}

deinit {
    NotificationCenter.default.removeObserver(self)
}

func keyboardWillShow(notification: NSNotification) {
    let userInfo: NSDictionary = notification.userInfo! as NSDictionary
    let keyboardInfo = userInfo[UIKeyboardFrameBeginUserInfoKey] as! NSValue
    let keyboardSize = keyboardInfo.cgRectValue.size
    let contentInsets = UIEdgeInsets(top: 0, left: 0, bottom: keyboardSize.height, right: 0)
    scrollView.contentInset = contentInsets
    scrollView.scrollIndicatorInsets = contentInsets
}

func keyboardWillHide(notification: NSNotification) {
    scrollView.contentInset = .zero
    scrollView.scrollIndicatorInsets = .zero
} 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2018-06-21T12:34:10.387

**斯威夫特 5**解决方案：

```
override func viewWillAppear(_ animated: Bool) {
    super.viewWillAppear(animated)
    registerKeyboardNotifications()
}

func registerKeyboardNotifications() {
    NotificationCenter.default.addObserver(self,
                                         selector: #selector(keyboardWillShow(notification:)),
                                         name: UIResponder.keyboardWillShowNotification,
                                         object: nil)
    NotificationCenter.default.addObserver(self,
                                         selector: #selector(keyboardWillHide(notification:)),
                                         name: UIResponder.keyboardWillHideNotification,
                                         object: nil)
}

override func viewWillDisappear(_ animated: Bool) {
    super.viewWillDisappear(animated)
    NotificationCenter.default.removeObserver(self)
}

@objc func keyboardWillShow(notification: NSNotification) {
    let userInfo: NSDictionary = notification.userInfo! as NSDictionary
    let keyboardInfo = userInfo[UIResponder.keyboardFrameBeginUserInfoKey] as! NSValue
    let keyboardSize = keyboardInfo.cgRectValue.size
    let contentInsets = UIEdgeInsets(top: 0, left: 0, bottom: keyboardSize.height, right: 0)
    scrollView.contentInset = contentInsets
    scrollView.scrollIndicatorInsets = contentInsets
}

@objc func keyboardWillHide(notification: NSNotification) {
    scrollView.contentInset = .zero
    scrollView.scrollIndicatorInsets = .zero
} 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-11-13T12:16:59.740

这里的所有答案似乎都忘记了景观的可能性。如果您希望在设备旋转到横向视图时使用此功能，那么您将面临问题。

这里的诀窍是，虽然视图知道方向，但键盘却没有。这意味着在横向中，键盘宽度实际上是它的高度，反之亦然。

要修改 Apple 推荐的更改内容插图的方法并使其支持横向，我建议使用以下方法：

```
// Call this method somewhere in your view controller setup code.
- (void)registerForKeyboardNotifications
{
    [[NSNotificationCenter defaultCenter] addObserver:self
            selector:@selector(keyboardWasShown:)
            name:UIKeyboardDidShowNotification object:nil];
   [[NSNotificationCenter defaultCenter] addObserver:self
             selector:@selector(keyboardWillBeHidden:)
             name:UIKeyboardWillHideNotification object:nil];
}

// Called when the UIKeyboardDidShowNotification is sent.
- (void)keyboardWasShown:(NSNotification*)aNotification
{
    UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];
    CGSize keyboardSize = [[[notif userInfo] objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;
    if (orientation == UIDeviceOrientationLandscapeLeft || orientation == UIDeviceOrientationLandscapeRight ) {
        CGSize origKeySize = keyboardSize;
        keyboardSize.height = origKeySize.width;
        keyboardSize.width = origKeySize.height;
    }
    UIEdgeInsets contentInsets = UIEdgeInsetsMake(0, 0, keyboardSize.height, 0);
    scroller.contentInset = contentInsets;
    scroller.scrollIndicatorInsets = contentInsets;

    // If active text field is hidden by keyboard, scroll it so it's visible
    // Your application might not need or want this behavior.
    CGRect rect = scroller.frame;
    rect.size.height -= keyboardSize.height;
    NSLog(@"Rect Size Height: %f", rect.size.height);

    if (!CGRectContainsPoint(rect, activeField.frame.origin)) {
        CGPoint point = CGPointMake(0, activeField.frame.origin.y - keyboardSize.height);
        NSLog(@"Point Height: %f", point.y);
        [scroller setContentOffset:point animated:YES];
    }
}

// Called when the UIKeyboardWillHideNotification is sent    
- (void)keyboardWillBeHidden:(NSNotification*)aNotification
{
    UIEdgeInsets contentInsets = UIEdgeInsetsZero;
    scrollView.contentInset = contentInsets;
    scrollView.scrollIndicatorInsets = contentInsets;
} 
```

* * *

这里要注意的部分如下：

```
UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];
CGSize keyboardSize = [[[notif userInfo] objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;
if (orientation == UIDeviceOrientationLandscapeLeft || orientation == UIDeviceOrientationLandscapeRight ) {
    CGSize origKeySize = keyboardSize;
    keyboardSize.height = origKeySize.width;
    keyboardSize.width = origKeySize.height;
} 
```

它的作用是检测设备所处的方向。如果是横向，它将“交换”keyboardSize 变量的宽度和高度值，以确保在每个方向上使用正确的值。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-11-01T05:47:14.667

对于这些东西，不需要大量的编码，就像下面的代码一样简单：-

您从笔尖在 UIScrollview 中归档的所有文本，如下图所示：-

![在此处输入图像描述](../Images/962b896def2544834c6890b5cf65dd78.png)

`YourViewController.h`

```
@interface cntrInquiryViewController : UIViewController<UIScrollViewDelegate,UITextFieldDelegate>
{
     IBOutlet UITextField *txtName;
     IBOutlet UITextField *txtEmail;
     IBOutlet UIScrollView *srcScrollView;
}
@end 
```

**从 nib 连接 IBOutlet 并从 NIB 连接 UItextfiled 的每个代表和 scrollview 代表**

```
-(void)viewWillAppear:(BOOL)animated
{
    srcScrollView.contentSize = CGSizeMake(320, 500);

    [super viewWillAppear:YES];
}

-(void)textFieldDidBeginEditing:(FMTextField *)textField
{
    [srcScrollView setContentOffset:CGPointMake(0,textField.center.y-140) animated:YES];//you can set your  y cordinate as your req also
}

-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
     [textField resignFirstResponder];
     [srcScrollView setContentOffset:CGPointMake(0,0) animated:YES];

    return YES;
} 
```

**注意**如果文本文件的委托没有连接，那么没有一种方法可以工作，请确保所有 iBOulate 和委托都正确连接

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-12-07T13:00:06.727

Apple 的建议在**Swift** + Using UIScrollView with Auto Layout in iOS 中重新编码（基于以下链接：[链接 1](https://developer.apple.com/library/ios/documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html#//apple_ref/doc/uid/TP40009542-CH5-SW7)、[链接 2](http://spin.atomicobject.com/2014/03/05/uiscrollview-autolayout-ios/)、[链接 3](https://www.youtube.com/watch?v=Isu3xLjjyZg)）：

```
import UIKit

class ViewController: UIViewController, UITextFieldDelegate {

    @IBOutlet var t1: UITextField!
    @IBOutlet var t2: UITextField!
    @IBOutlet var t3: UITextField!
    @IBOutlet var t4: UITextField!

    @IBOutlet var srcScrollView: UIScrollView!

    @IBOutlet var contentView: UIView!

    var contentViewCoordinates: CGPoint!

    override func viewDidLoad() {

        super.viewDidLoad()
        // Do any additional setup after loading the view, typically from a nib.

        /* Constraints on content view */
        let leftConstraint = NSLayoutConstraint(item:self.contentView,
            attribute:NSLayoutAttribute.Leading,
            relatedBy:NSLayoutRelation.Equal,
            toItem:self.view,
            attribute:NSLayoutAttribute.Left,
            multiplier:1.0,
            constant:0)
        self.view.addConstraint(leftConstraint)

        let rightConstraint = NSLayoutConstraint(item:self.contentView,
            attribute:NSLayoutAttribute.Trailing,
            relatedBy:NSLayoutRelation.Equal,
            toItem:self.view,
            attribute:NSLayoutAttribute.Right,
            multiplier:1.0,
            constant:0)
        self.view.addConstraint(rightConstraint)

        /* Tap gesture */
        let tapGesture: UITapGestureRecognizer = UITapGestureRecognizer(target: self, action: "hideKeyboard")
        // prevents the scroll view from swallowing up the touch event of child buttons
        tapGesture.cancelsTouchesInView = false
        srcScrollView.addGestureRecognizer(tapGesture)

        /* Save content view coordinates */
        contentViewCoordinates = contentView.frame.origin
    }

    func hideKeyboard() {
        t1.resignFirstResponder()
        t2.resignFirstResponder()
        t3.resignFirstResponder()
        t4.resignFirstResponder()
    }

    var activeField: UITextField?

    func textFieldDidBeginEditing(textField: UITextField) {
        activeField = textField
    }

    func textFieldDidEndEditing(textField: UITextField) {
        activeField = nil
    }

    override func viewWillAppear(animated: Bool) {
        super.viewWillAppear(animated)
        let center = NSNotificationCenter.defaultCenter()
        center.addObserver(self, selector: "keyboardOnScreen:", name: UIKeyboardDidShowNotification, object: nil)
        center.addObserver(self, selector: "keyboardOffScreen:", name: UIKeyboardDidHideNotification, object: nil)
    }

    func keyboardOnScreen(notification: NSNotification){
        // Retrieve the size and top margin (inset is the fancy word used by Apple) 
        // of the keyboard displayed.
        let info: NSDictionary  = notification.userInfo!
        let kbSize = info.valueForKey(UIKeyboardFrameEndUserInfoKey)?.CGRectValue().size
        let contentInsets: UIEdgeInsets  = UIEdgeInsetsMake(0.0, 0.0, kbSize!.height, 0.0)

        srcScrollView.contentInset = contentInsets
        srcScrollView.scrollIndicatorInsets = contentInsets

        var aRect: CGRect = self.view.frame
        aRect.size.height -= kbSize!.height
        //you may not need to scroll, see if the active field is already visible
        if (CGRectContainsPoint(aRect, activeField!.frame.origin) == false) {
            let scrollPoint:CGPoint = CGPointMake(0.0, activeField!.frame.origin.y - kbSize!.height)
            srcScrollView.setContentOffset(scrollPoint, animated: true)
        }
    }

//    func keyboardOnScreen(aNotification: NSNotification) {
//        let info: NSDictionary  = aNotification.userInfo!
//        let kbSize = info.valueForKey(UIKeyboardFrameEndUserInfoKey)?.CGRectValue().size
//        
//        var bkgndRect: CGRect! = activeField?.superview?.frame
//        
//        bkgndRect.size.height += kbSize!.height
//        
//        activeField?.superview?.frame = bkgndRect
//        
//        srcScrollView.setContentOffset(CGPointMake(0.0, activeField!.frame.origin.y - kbSize!.height), animated: true)
//    }

    func keyboardOffScreen(notification: NSNotification){
        let contentInsets:UIEdgeInsets = UIEdgeInsetsZero

        srcScrollView.contentInset = contentInsets
        srcScrollView.scrollIndicatorInsets = contentInsets

        self.srcScrollView.setContentOffset(CGPointMake(0, -self.view.frame.origin.y/2), animated: true)
    }

} 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-09-06T02:42:36.947

**考虑到 UIToolbar 和 UITabBar 可能高度的**Swift 4.2解决方案。****

 **```
private func setupKeyboardNotifications() {
    NotificationCenter.default.addObserver(self, selector: #selector(keyboardWillShow(_:)), name: UIControl.keyboardWillShowNotification, object: nil)
    NotificationCenter.default.addObserver(self, selector: #selector(keyboardWillHide(_:)), name: UIControl.keyboardWillHideNotification, object: nil)
}

@objc func keyboardWillShow(_ notification: Notification) {
    let userInfo: NSDictionary = notification.userInfo! as NSDictionary
    let keyboardSize = (userInfo[UIResponder.keyboardFrameEndUserInfoKey] as! NSValue).cgRectValue.size

    let tabbarHeight = tabBarController?.tabBar.frame.size.height ?? 0
    let toolbarHeight = navigationController?.toolbar.frame.size.height ?? 0
    let bottomInset = keyboardSize.height - tabbarHeight - toolbarHeight

    scrollView.contentInset.bottom = bottomInset
    scrollView.scrollIndicatorInsets.bottom = bottomInset
}

@objc func keyboardWillHide(_ notification: Notification) {
    scrollView.contentInset = .zero
    scrollView.scrollIndicatorInsets = .zero
} 
```

而且，如果您的目标是 < iOS 9，您必须在某个时候取消注册观察者（感谢[Joe](https://stackoverflow.com/questions/13161666/how-do-i-scroll-the-uiscrollview-when-the-keyboard-appears/52195756#comment95350281_52195756)）

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-06-19T14:45:15.567

我要在 Apple 代码中更新的唯一内容是 keyboardWillBeHidden: 方法，以提供平滑过渡。

```
// Called when the UIKeyboardWillHideNotification is sent
- (void)keyboardWillBeHidden:(NSNotification*)aNotification
{
    UIEdgeInsets contentInsets = UIEdgeInsetsZero;

    [UIView animateWithDuration:0.4 animations:^{
        self.scrollView.contentInset = contentInsets;
    }];
    self.scrollView.scrollIndicatorInsets = contentInsets;

} 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-01-08T10:10:25.683

这是一个与**Swift 3**兼容的答案，它也适用于导航控制器中的视图控制器 - 因为它们将更改滚动视图`contentInset.top`属性。

```
override func viewWillAppear(_ animated: Bool) {
    super.viewWillAppear(animated)

    self.registerKeyboardNotifications()
}

override func viewWillDisappear(_ animated: Bool) {
    super.viewWillDisappear(animated)

    self.unregisterKeyboardNotifications()
}

func registerKeyboardNotifications() {
    NotificationCenter.default.addObserver(self, selector: #selector(LoginViewController.keyboardDidShow(notification:)), name: NSNotification.Name.UIKeyboardDidShow, object: nil)
    NotificationCenter.default.addObserver(self, selector: #selector(LoginViewController.keyboardWillHide(notification:)), name: NSNotification.Name.UIKeyboardWillHide, object: nil)
}

func unregisterKeyboardNotifications() {
    NotificationCenter.default.removeObserver(self)
}

func keyboardDidShow(notification: NSNotification) {
    let userInfo: NSDictionary = notification.userInfo! as NSDictionary
    let keyboardInfo = userInfo[UIKeyboardFrameBeginUserInfoKey] as! NSValue
    let keyboardSize = keyboardInfo.cgRectValue.size

    // Get the existing contentInset for the scrollView and set the bottom property to be the height of the keyboard
    var contentInset = self.scrollView.contentInset
    contentInset.bottom = keyboardSize.height

    self.scrollView.contentInset = contentInset
    self.scrollView.scrollIndicatorInsets = contentInset
}

func keyboardWillHide(notification: NSNotification) {
    var contentInset = self.scrollView.contentInset
    contentInset.bottom = 0

    self.scrollView.contentInset = contentInset
    self.scrollView.scrollIndicatorInsets = UIEdgeInsets.zero
} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-09-05T07:56:17.213

我发现上面的答案已经过时了。滚动时也不完美。

这是一个快速版本。

它将在文本字段的正下方滚动，没有多余的空间。它会恢复到它第一次出现的样子。

```
//add observer
override func viewDidLoad() {
    super.viewDidLoad()

    NSNotificationCenter.defaultCenter().addObserver(self, selector: #selector(ARVHttpPlayVC.keyboardDidShow(_:)), name: UIKeyboardDidShowNotification, object: nil)
    NSNotificationCenter.defaultCenter().addObserver(self, selector: #selector(ARVHttpPlayVC.keyboardDidHide(_:)), name: UIKeyboardDidHideNotification, object: nil)
}

func keyboardDidShow(notification: NSNotification) {
    let userInfo: NSDictionary = notification.userInfo!
    let keyboardSize = userInfo.objectForKey(UIKeyboardFrameEndUserInfoKey)!.CGRectValue.size
    let difference = keyboardSize.height - (self.view.frame.height - inputTextField.frame.origin.y - inputTextField.frame.size.height)
    if difference > 0 {
        var contentInset:UIEdgeInsets = self.scrollView.contentInset
        contentInset.bottom = difference
        self.scrollView.contentInset = contentInset

        let scrollPoint = CGPointMake(0, difference)
        self.scrollView.setContentOffset(scrollPoint, animated: true)
    }

}

func keyboardDidHide(notification: NSNotification) {
    let contentInset:UIEdgeInsets = UIEdgeInsetsZero
    self.scrollView.contentInset = contentInset
}

//remove observer
deinit {
    NSNotificationCenter.defaultCenter().removeObserver(self)
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-10-31T15:53:43.997

这是我一直在使用的。这很简单，而且效果很好。

```
#pragma mark - Scrolling

-(void)scrollElement:(UIView *)view toPoint:(float)y
{
    CGRect theFrame = view.frame;
    float orig_y = theFrame.origin.y;
    float diff = y - orig_y;

    if (diff < 0) 
        [self scrollToY:diff];

    else 
        [self scrollToY:0];
}

-(void)scrollToY:(float)y
{
    [UIView animateWithDuration:0.3f animations:^{
        [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
        self.view.transform = CGAffineTransformMakeTranslation(0, y);
    }];
} 
```

使用`UITextField`委托调用`textFieldDidBeginEditing:`将您的视图向上移动，并添加一个通知观察者以在键盘隐藏时使视图恢复正常：

```
-(void)textFieldDidBeginEditing:(UITextField *)textField
{
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil];

    if (self.view.frame.origin.y == 0)
        [self scrollToY:-90.0];  // y can be changed to your liking

}

-(void)keyboardWillHide:(NSNotification*)note
{
    [self scrollToY:0];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardWillHideNotification object:nil];
} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-06-19T06:39:38.040

这是**Swift中改进的最终代码**

```
 //MARK: UITextFieldDelegate
func textFieldDidBeginEditing(textField: UITextField!) {    //delegate method
    self.textField = textField
}

func textFieldShouldReturn(textField: UITextField!) -> Bool {   //delegate method
    textField.resignFirstResponder()
    return true
}

//MARK: Keyboard handling
override func viewWillDisappear(animated: Bool) {
    super.viewWillDisappear(animated)
    unregisterKeyboardNotifications()
}

func registerKeyboardNotifications() {
    NSNotificationCenter.defaultCenter().addObserver(self, selector: #selector(UCProfileSettingsViewController.keyboardDidShow(_:)), name: UIKeyboardDidShowNotification, object: nil)
    NSNotificationCenter.defaultCenter().addObserver(self, selector: #selector(UCProfileSettingsViewController.keyboardWillHide(_:)), name: UIKeyboardWillHideNotification, object: nil)
}

func unregisterKeyboardNotifications() {
    NSNotificationCenter.defaultCenter().removeObserver(self)
}

func keyboardDidShow(notification: NSNotification) {
    let userInfo: NSDictionary = notification.userInfo!
    let keyboardSize = userInfo.objectForKey(UIKeyboardFrameBeginUserInfoKey)!.CGRectValue.size
    let contentInsets = UIEdgeInsetsMake(0, 0, keyboardSize.height, 0)
    scrollView.contentInset = contentInsets
    scrollView.scrollIndicatorInsets = contentInsets

    var viewRect = self.view.frame
    viewRect.size.height -= keyboardSize.height
    let relativeFieldFrame: CGRect = textField.convertRect(textField.frame, toView: self.view)
    if CGRectContainsPoint(viewRect, relativeFieldFrame.origin) {
        let scrollPoint = CGPointMake(0, relativeFieldFrame.origin.y - keyboardSize.height)
        scrollView.setContentOffset(scrollPoint, animated: true)
    }

}

func keyboardWillHide(notification: NSNotification) {
    scrollView.contentInset = UIEdgeInsetsZero
    scrollView.scrollIndicatorInsets = UIEdgeInsetsZero
} 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-05-17T09:57:57.983

最简单的解决方案之一是使用以下协议：

```
protocol ScrollViewKeyboardDelegate: class {
    var scrollView: UIScrollView? { get set }

    func registerKeyboardNotifications()
    func unregisterKeyboardNotifications()
}

extension ScrollViewKeyboardDelegate where Self: UIViewController {
    func registerKeyboardNotifications() {
        NotificationCenter.default.addObserver(
            forName: UIResponder.keyboardWillChangeFrameNotification,
            object: nil,
            queue: nil) { [weak self] notification in
                self?.keyboardWillBeShown(notification)
        }

        NotificationCenter.default.addObserver(
            forName: UIResponder.keyboardWillHideNotification,
            object: nil,
            queue: nil) { [weak self] notification in
                self?.keyboardWillBeHidden(notification)
        }
    }

    func unregisterKeyboardNotifications() {
        NotificationCenter.default.removeObserver(
            self,
            name: UIResponder.keyboardWillChangeFrameNotification,
            object: nil
        )
        NotificationCenter.default.removeObserver(
            self,
            name: UIResponder.keyboardWillHideNotification,
            object: nil
        )
    }

    func keyboardWillBeShown(_ notification: Notification) {
        let info = notification.userInfo
        let key = (info?[UIResponder.keyboardFrameEndUserInfoKey] as? NSValue)
        let aKeyboardSize = key?.cgRectValue

        guard let keyboardSize = aKeyboardSize,
            let scrollView = self.scrollView else {
                return
        }

        let bottomInset = keyboardSize.height
        scrollView.contentInset.bottom = bottomInset
        scrollView.scrollIndicatorInsets.bottom = bottomInset
        if let activeField = self.view.firstResponder {
            let yPosition = activeField.frame.origin.y - bottomInset
            if yPosition > 0 {
                let scrollPoint = CGPoint(x: 0, y: yPosition)
                scrollView.setContentOffset(scrollPoint, animated: true)
            }
        }
    }

    func keyboardWillBeHidden(_ notification: Notification) {
        self.scrollView?.contentInset = .zero
        self.scrollView?.scrollIndicatorInsets = .zero
    }
}

extension UIView {
    var firstResponder: UIView? {
        guard !isFirstResponder else { return self }
        return subviews.first(where: {$0.firstResponder != nil })
    }
} 
```

当你想使用这个协议时，你只需要遵守它并在你的控制器中分配你的滚动视图，如下所示：

```
class MyViewController: UIViewController {
      @IBOutlet var scrollViewOutlet: UIScrollView?
      var scrollView: UIScrollView?

      public override func viewDidLoad() {
        super.viewDidLoad()

        self.scrollView = self.scrollViewOutlet
        self.scrollView?.isScrollEnabled = true
        self.registerKeyboardNotifications()
    }

    extension MyViewController: ScrollViewKeyboardDelegate {}

    deinit {
       self.unregisterKeyboardNotifications()
    }

} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2012-10-31T15:57:45.950

我会这样做。这是很多代码，但它确保当前焦点的 textField 在“可用空间”中垂直居中：

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil];
}

- (void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardWillShowNotification object:nil];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardWillHideNotification object:nil];
}

- (void)keyboardWillShow:(NSNotification *)notification {
    NSDictionary *info = [notification userInfo];
    NSValue *keyBoardEndFrame = [info objectForKey:UIKeyboardFrameEndUserInfoKey];
    CGSize keyboardSize = [keyBoardEndFrame CGRectValue].size;
    self.keyboardSize = keyboardSize;

    [self adjustScrollViewOffsetToCenterTextField:self.currentTextField];
}

- (void)keyboardWillHide:(NSNotification *)notification {
    self.keyboardSize = CGSizeZero;
}

- (IBAction)textFieldGotFocus:(UITextField *)sender {
    sender.inputAccessoryView = self.keyboardAccessoryView;
    self.currentTextField = sender;
    [self adjustScrollViewOffsetToCenterTextField:sender];    
}

- (void)adjustScrollViewOffsetToCenterTextField:(UITextField *)textField
{
    CGRect textFieldFrame = textField.frame;
    float keyboardHeight = MIN(self.keyboardSize.width, self.keyboardSize.height);

    float visibleScrollViewHeight = self.scrollView.frame.size.height - keyboardHeight;
    float offsetInScrollViewCoords = (visibleScrollViewHeight / 2) - (textFieldFrame.size.height / 2);

    float scrollViewOffset = textFieldFrame.origin.y - offsetInScrollViewCoords;

    [UIView animateWithDuration:.3 delay:0 options:UIViewAnimationOptionBeginFromCurrentState animations:^{
        self.scrollView.contentOffset = CGPointMake(self.scrollView.contentOffset.x, scrollViewOffset);
    }completion:NULL];

}

you'll need these two properties in your @interface...
@property (nonatomic, assign) CGSize keyboardSize;
@property (nonatomic, strong) UITextField *currentTextField; 
```

请注意，该`- (IBAction)textFieldGotFocus:`操作与每个 textField 的`DidBeginEditing`状态相关联。

此外，从键盘通知中获取动画持续时间并将其用于滚动视图动画而不是固定值会更好一些，但起诉我，这对我来说已经足够了；）

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-01-15T10:59:28.797

如果您不想计算太多，请使用以下扩展：

```
func scrollSubviewToBeVisible(subview: UIView, animated: Bool) {
    let visibleFrame = UIEdgeInsetsInsetRect(self.bounds, self.contentInset)
    let subviewFrame = subview.convertRect(subview.bounds, toView: self)
    if (!CGRectContainsRect(visibleFrame, subviewFrame)) {
        self.scrollRectToVisible(subviewFrame, animated: animated)
    }
} 
```

也许你想让你的 UITextField 始终可见：

```
func textViewDidChange(textView: UITextView) {
    self.scrollView?.scrollSubviewToBeVisible(textView, animated: false)
} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2017-08-28T06:10:36.907

在 Swift 3 中试试这个代码：

```
override func viewDidAppear(_ animated: Bool) {
    setupViewResizerOnKeyboardShown()
}

func setupViewResizerOnKeyboardShown() {
    NotificationCenter.default.addObserver(self,
                                           selector: #selector(self.keyboardWillShowForResizing),
                                           name: Notification.Name.UIKeyboardWillShow,
                                           object: nil)
    NotificationCenter.default.addObserver(self,
                                           selector: #selector(self.keyboardWillHideForResizing),
                                           name: Notification.Name.UIKeyboardWillHide,
                                           object: nil)
}

func keyboardWillShowForResizing(notification: Notification) {
    if let keyboardSize = (notification.userInfo?[UIKeyboardFrameEndUserInfoKey] as? NSValue)?.cgRectValue,
        let window = self.view.window?.frame {
        // We're not just minusing the kb height from the view height because
        // the view could already have been resized for the keyboard before
        self.view.frame = CGRect(x: self.view.frame.origin.x,
                                 y: self.view.frame.origin.y,
                                 width: self.view.frame.width,
                                 height: window.origin.y + window.height - keyboardSize.height)

    } else {
        debugPrint("We're showing the keyboard and either the keyboard size or window is nil: panic widely.")
    }
}

func keyboardWillHideForResizing(notification: Notification) {
    if let keyboardSize = (notification.userInfo?[UIKeyboardFrameEndUserInfoKey] as? NSValue)?.cgRectValue {
        let viewHeight = self.view.frame.height
        self.view.frame = CGRect(x: self.view.frame.origin.x,
                                 y: self.view.frame.origin.y,
                                 width: self.view.frame.width,
                                 height: viewHeight) //viewHeight + keyboardSize.height

    } else {
        debugPrint("We're about to hide the keyboard and the keyboard size is nil. Now is the rapture.")
    }
}

deinit {
        NotificationCenter.default.removeObserver(self)
    } 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-05-23T11:50:18.990

**基于上述[Masa 解决方案的](https://stackoverflow.com/a/13163543/1656515)**Swift 5**解决方案- 与之相关的更改：**

 ***   使用`keyboardFrameEndUserInfoKey`而不是 `keyboardFrameBeginUserInfoKey`，因为 `keyboardFrameBeginUserInfoKey`可以在第一次显示时返回其他值，例如此处所述：[键盘高度在出现时变化](https://stackoverflow.com/questions/42358783/keyboard-height-varies-when-appearing)
*   使用“will”而不是“did”通知并将其更改为 Swift 5 键名称：`UIResponder.keyboardWillShowNotification`/`UIResponder.keyboardWillHideNotification`而不是`NSNotification.Name.UIKeyboardDidShow`/`NSNotification.Name.UIKeyboardDidHide`

代码：

```
override func viewDidLoad() {
    super.viewDidLoad()
    registerForKeyboardNotifications()
}

func registerForKeyboardNotifications() {
    NotificationCenter.default.addObserver(self, selector: #selector(onKeyboardAppear(_:)), name: UIResponder.keyboardWillShowNotification, object: nil)
    NotificationCenter.default.addObserver(self, selector: #selector(onKeyboardDisappear(_:)), name: UIResponder.keyboardWillHideNotification, object: nil)
}

@objc func onKeyboardAppear(_ notification: NSNotification) {
    guard let info = notification.userInfo, let kbSize = (info[UIResponder.keyboardFrameEndUserInfoKey] as? NSValue)?.cgRectValue.size else { return }

    let insets = UIEdgeInsets(top: 0, left: 0, bottom: kbSize.height, right: 0)

    scrollView.contentInset = insets
    scrollView.scrollIndicatorInsets = insets

    //Other changes if needed
}

deinit {
    NotificationCenter.default.removeObserver(self)
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2012-10-31T15:48:41.217

您可以使用 中的属性`contentOffset`进行滚动`UIScrollView`，例如，

```
CGPoint offset = scrollview.contentOffset;
offset.y -= KEYBOARD_HEIGHT + 5;
scrollview.contentOffset = offset; 
```

还有一种方法可以进行动画滚动。

至于您的第二次编辑没有正确滚动的原因，可能是因为您似乎认为每次编辑开始时都会出现一个新键盘。您可以尝试检查是否已经针对“键盘”可见位置进行了调整（同样在还原之前检查键盘可见性）。

更好的解决方案可能是监听键盘通知，例如：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(keyboardDidShow:)
                                             name:UIKeyboardDidShowNotification
                                           object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(keyboardWillHide:)
                                             name:UIKeyboardWillHideNotification
                                           object:nil]; 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2012-10-31T15:55:21.957

您实际上不需要 UIScrollView 来执行此操作。我使用了这段代码，它对我有用：

```
-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{

   if (textField==_myTextField)
   {
      [self keyBoardAppeared];
   }
   return true;
}

-(void)textFieldDidEndEditing:(UITextField *)textField {
   if (textField==_myTextField)
   {
      [self keyBoardDisappeared];
   }
}

-(void) keyBoardAppeared
{
   CGRect frame = self.view.frame;

[UIView animateWithDuration:0.3
                      delay:0
                    options: UIViewAnimationCurveEaseOut
                 animations:^{
                     self.view.frame = CGRectMake(frame.origin.x, frame.origin.y-215, frame.size.width, frame.size.height);
                 }
                 completion:^(BOOL finished){

                 }];
}

-(void) keyBoardDisappeared
{
   CGRect frame = self.view.frame;

  [UIView animateWithDuration:0.3
                      delay:0
                    options: UIViewAnimationCurveEaseOut
                 animations:^{
                     self.view.frame = CGRectMake(frame.origin.x, frame.origin.y+215, frame.size.width, frame.size.height);
                 }
                 completion:^(BOOL finished){

                 }];
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2014-04-01T15:26:37.030

我知道这是一个老问题，但我认为它可能对其他人有所帮助。我想为我拥有的一些应用程序实现一些更容易的东西，所以我为此创建了一个类。如果需要，可以在这里下载：[https ://github.com/sdernley/iOSTextFieldHandler](https://github.com/sdernley/iOSTextFieldHandler)

就像将所有 UITextFields 设置为具有 self 的代表一样简单

```
textfieldname.delegate = self; 
```

然后使用你的滚动视图和提交按钮的名称将它添加到你的视图控制器

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    [iOSTextFieldHandler TextboxKeyboardMover:containingScrollView tf:textField btn:btnSubmit];
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2014-05-28T08:33:50.423

以下是我的有效解决方案（5个步骤）

Step1：添加一个观察者来捕捉哪个UITEXTFIELD或UITEXTVIEW ShoudBeginEditing（其中对象被初始化或ViewDidLoad。

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(updateActiveField:)
                                             name:@"UPDATE_ACTIVE_FIELD" object:nil]; 
```

Step2：当..ShouldBeginEditing 使用UITEXTFIELD 或UITEXTVIEW 的OBJECT 时发布通知

```
-(BOOL)textViewShouldBeginEditing:(UITextView *)textView {

[[NSNotificationCenter defaultCenter] postNotificationName:@"UPDATE_ACTIVE_FIELD" 
                                                    object:textView];
return YES;
} 
```

Step3：（Step1调用）分配当前UITEXTFIELD或UITEXTVIEW的方法

```
-(void) updateActiveField: (id) sender {
    activeField = [sender object];
} 
```

Step4：添加键盘观察者UIKeyboardWillShowNotification（与Step1相同的地方）

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(keyboardWasShown:)
                                             name:UIKeyboardDidShowNotification object:nil]; 
```

和方法：

```
// Called when the UIKeyboardDidShowNotification is sent.
- (void)keyboardWasShown:(NSNotification*)aNotification
{
    NSDictionary* info = [aNotification userInfo];
    CGSize kbSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;
    UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, kbSize.height, 0.0);

    _currentEdgeInsets = self.layoutPanel.contentInset; // store current insets to restore them later
    self.layoutPanel.contentInset = contentInsets;
    self.layoutPanel.scrollIndicatorInsets = contentInsets;

    // If active text field is hidden by keyboard, scroll it so it's visible
    CGRect aRect =  self.view.frame;
    aRect.size.height -= kbSize.height;

    UIWindow *window = [[UIApplication sharedApplication] keyWindow];
    CGPoint p = [activeField convertPoint:activeField.bounds.origin toView:window];

    if (!CGRectContainsPoint(aRect, p) ) {
        CGPoint scrollPoint = CGPointMake(0.0, activeField.frame.origin.y +kbSize.height);
       [self.layoutPanel setContentOffset:scrollPoint animated:YES];
       self.layoutPanel.scrollEnabled = NO;
    }
} 
```

Step5：添加键盘观察器UIKeyboardWillHideNotification（与步骤1相同的地方）

```
 [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWillBeHidden:)
                                                 name:UIKeyboardWillHideNotification object:nil]; 
```

和方法：

```
// Called when the UIKeyboardWillHideNotification is sent
- (void)keyboardWillBeHidden:(NSNotification*)aNotification
{
    self.layoutPanel.contentInset = _currentEdgeInsets;
    self.layoutPanel.scrollIndicatorInsets = _currentEdgeInsets;
    self.layoutPanel.scrollEnabled = YES;
} 
```

记得删除观察者！

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2016-04-13T02:05:29.557

我使用了 Sudheer Palchuri [https://stackoverflow.com/users/2873919/sudheer-palchuri](https://stackoverflow.com/users/2873919/sudheer-palchuri) [https://stackoverflow.com/a/32583809/6193496提供的这个答案](https://stackoverflow.com/a/32583809/6193496)

在 ViewDidLoad 中，注册通知：

```
NSNotificationCenter.defaultCenter().addObserver(self, selector: #selector(DetailsViewController.keyboardWillShow(_:)), name:UIKeyboardWillShowNotification, object: nil)
NSNotificationCenter.defaultCenter().addObserver(self, selector: #selector(DetailsViewController.keyboardWillHide(_:)), name:UIKeyboardWillHideNotification, object: nil) 
```

添加以下观察者方法，当键盘出现时自动滚动。

```
func textFieldShouldReturn(textField: UITextField) -> Bool {
textField.resignFirstResponder()
return true
}

func keyboardWillShow(notification:NSNotification){

var userInfo = notification.userInfo!
var keyboardFrame:CGRect = (userInfo[UIKeyboardFrameBeginUserInfoKey] as! NSValue).CGRectValue()
keyboardFrame = self.view.convertRect(keyboardFrame, fromView: nil)

var contentInset:UIEdgeInsets = self.scrollView.contentInset
contentInset.bottom = keyboardFrame.size.height
self.scrollView.contentInset = contentInset
}

func keyboardWillHide(notification:NSNotification){

var contentInset:UIEdgeInsets = UIEdgeInsetsZero
self.scrollView.contentInset = contentInset
} 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2017-06-17T10:05:37.040

我的解决方案有 4 个步骤：
- 第 1 步：该功能在键盘出现时进行侦听

```
- (void)keyboardWasShown:(NSNotification *)notification {
// Get the size of the keyboard.
CGSize keyboardSize = [[[notification userInfo] objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;
//top: 64 for navigation bar, 0 for without navigation
UIEdgeInsets contentInsets = UIEdgeInsetsMake(64, 0, keyboardSize.height, 0);
_scrollView.contentInset = contentInsets;
_scrollView.scrollIndicatorInsets = contentInsets;
} 
```

- 第 2 步：当键盘消失时函数会监听

```
- (void)keyboardWillHide:(NSNotification *)notification {
//top: 64 for navigatiob bar
UIEdgeInsets contentInsets = UIEdgeInsetsMake(64, 0, 0, 0);
[_editScrollView setContentInset: contentInsets];
[_editScrollView setScrollIndicatorInsets: contentInsets];
} 
```

- 第三步：将这些功能添加到通知中心：

```
- (void)viewWillAppear:(BOOL)animated{
[super viewWillAppear:animated];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWasShown:) name:UIKeyboardDidShowNotification object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil];
} 
```

- 第 4 步：当视图控制器消失时移除监听

```
- (void)viewDidDisappear:(BOOL)animated{
[super viewDidDisappear:animated];
[[NSNotificationCenter defaultCenter]removeObserver:self name:UIKeyboardDidShowNotification object:nil];
[[NSNotificationCenter defaultCenter]removeObserver:self name:UIKeyboardWillHideNotification object:nil];
} 
```****

# java - 如何让 Quartz Cron Expression 在特定年份一次运行？

> ID：13161679
> 
> 赞同：0
> 
> 时间：2012-10-31T15:43:02.063
> 
> 标签：java, multithreading, quartz-scheduler

我正在使用**Quartz 2.1.x Distribution**以定期方式运行程序。指每小时、每天、每周、每年。我能够正确安排节目。
问题在于非周期调度：在非周期调度的帮助下，我想实现这样的目标-> **“0 59 12 26 10 ? 2013”**
​​，这意味着它将在 2013 年 10 月 26 日下午 12:59 运行。哪个应该只运行一次。当我尝试用 Quartz 执行上述表达式时，我出错了。请建议我如何使用 Quartz 或任何其他 API 执行非周期性调度。
谢谢，
桑奇特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:24:53.003

对不起，实际上我的程序当时没有工作（不知道为什么？）：P.. 但现在它工作正常。感谢您的意见和建议。干杯。

# wordpress - 联系表格 7 Wordpress 可访问

> ID：13161682
> 
> 赞同：1
> 
> 时间：2012-10-31T15:43:06.993
> 
> 标签：wordpress, accessibility, contact-form-7

我在联系表格 7 和可访问性方面有 2 个问题。

在不改变插件核心代码的情况下：

1.  当我将鼠标悬停在它们上时，如何阻止错误消息消失？
2.  错误消息当前正在输入旁边的跨度中生成，有什么方法可以让它出现在标签中？否则屏幕阅读器将永远不会阅读它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:49:08.723

Both of these might require core code editing from the sounds of it.

> The error message is currently being generated in a span right next to the input, any way to make it appear IN the label? Otherwise a screen reader won't ever read it.

I don't recommend doing this. What I recommend is seeing if the `<span>`s have their own `id`, if so you can probably write some JS function that looks for either the `id` and add the `aria-describedby="spanIDhere"` to the associated `<input>`. Or if the `<span>` don't have one, generate one, then insert it like mentioned.

Most AT will read it as `<label>` text, text in the `span` denoted by the ID, form element type.

# javascript - 淡出一切，但 div 像 blockUI 一样

> ID：13161688
> 
> 赞同：-1
> 
> 时间：2012-10-31T15:43:28.310
> 
> 标签：javascript, jquery, html, css

我这里有一个带有大蓝色 div 的小提琴。当我单击按钮时，我想选择除 div 之外的所有内容并将其淡出。

我已经尝试过类似这样`$("body :not('#myBody')").css({opacity : '0.1'});`的事情，但还没有任何效果。

我还查看了 blockUI 代码，但不能完全理解它。

你们都是如何淡出背景元素的？[在此处输入链接描述](http://jsfiddle.net/bVsnP/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:07:26.430

您的不透明度周围有错误的 id 和引号。[这个小提琴适用](http://jsfiddle.net/bVsnP/8/)于这段代码：

```
 $("body :not('#box')").css({opacity: 0.1}); 
```

# visual-studio - 如何告诉 scons 使用 MinGW 而不是 MSVC

> ID：13161690
> 
> 赞同：13
> 
> 时间：2012-10-31T15:43:38.007
> 
> 标签：visual-studio, compiler-errors, mingw, zxing, scons

我正在尝试在 Windows 上构建 zxing 的 C++ 端口，但 scons 失败并显示：

```
cl : Command line error D8021 : invalid numeric argument '/Wextra' 
```

我同时安装了 VS2010 和 MinGW，并且 scons 尝试使用 MSVC 编译器，即使 SConscript 文件假定 gcc 并使用 gcc 特定参数，这会导致错误。

我如何告诉 scons 改用 MinGW？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-31T17:43:59.550

Scons 在 Windows 上默认使用 MSVC 编译器。在创建 Environment 对象时设置 mignw 编译器使用 tools 参数。

```
env = Environment(tools = ['mingw']) 
```

然后使用 env.Program() 代替 Program()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-01T06:55:13.720

下面是我在 Windows 上为 mingw 工作的 SConstruct：

```
import os

env = Environment(ENV={'PATH': os.environ['PATH'], 'TEMP': os.environ['TEMP']}, tools=['mingw'])
env.Program('main.cpp') 
```

Windows 环境变量 PATH 和 TEMP 可以在[外部设置](https://www.computerhope.com/issues/ch000549.htm)。环境变量 PATH 应该包含 mingw 的 bin 文件夹路径。

# python - Python，定义一个函数并访问它

> ID：13161694
> 
> 赞同：0
> 
> 时间：2012-10-31T15:43:53.147
> 
> 标签：python, list, function, parameters

> **可能的重复：**
> [Python 拆分字符串并混淆中间](https://stackoverflow.com/questions/13033724/python-splitting-strings-and-jumbling-the-middle)

我有一个 python 程序，我真的被困住了，我这样做的目的是从用户那里取一个句子，然后把单词的中间弄乱，让外面的字母保持完整......我的老师说我需要做点什么参数，但我真的不知道如何访问或使用我的功能......

```
import random

user_words = input("Enter a word or sentence: ") #Gets user input

word = list(user_words.split()) #Creating a word list of the user input

def Jumble_One_Word(x):

    if len(user_words) > 2: #Only need to change words longer than 2

      first_letter = user_words[0] #Takes the first letter out and defines it

      last_letter = user_words[-1] #Takes the last letter out and defines it

      letters = list(user_words[1:-1]) #Takes the rest and puts them into a list

      random.shuffle(letters) #shuffles the list above

      middle_letters = "".join(letters) #Joins the shuffled list

      final_word = "".join([first_letter, middle_letters, last_letter]) #Puts final      word all back  in place as a list

    print(final_word)#Prints out the final word all back together again

Jumbler_Count = -1

for i in range(len(word)):
    Jumbler_Count + 1
    Word1 = Jumble_One_Word(word[Jumbler_Count]) 
```

示例输入：HELLO MY NAME IS OUTPUT：HLELO MY NMAE IS RESULTED 输出：H leai El moymns Hoi ynmeEa lm ls Hiyn l oelEamms H naellmEyo m is

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:59:40.103

你把一些事情混在一起，让另一些事情变得过于复杂。

首先，你应该把你的代码放在一个`main()`函数中，以明确它从哪里开始。

此外，在这段代码中：

```
Jumbler_Count = -1

for i in range(len(word)):
    Jumbler_Count + 1
    print Jumble_One_Word(word[Jumbler_Count]) 
```

`Jumbler_Count`在这里是不必要的，只需遍历单词列表本身。

所以让我们创建一个`main()`函数：

```
def main():
    user_words = raw_input("Enter a word or sentence: ") #Gets user input
    words = user_words.split() #Creating a word list of the user input    

    for word in words:
        print Jumble_One_Word(word)

if __name__ == '__main__':
    main() 
```

这是你的函数的一个稍微改变的版本`Jumble_One_Word`：

```
def Jumble_One_Word(word):
    if len(word) <= 2: #Only need to change words longer than 2
        return word

    first_letter = word[0] #Takes the first letter out and defines it
    last_letter = word[-1] #Takes the last letter out and defines it
    letters = list(word[1:-1]) #Takes the rest and puts them into a list
    random.shuffle(letters) #shuffles the list above
    middle_letters = "".join(letters) #Joins the shuffled list
    return "".join([first_letter, middle_letters, last_letter]) #Puts final      word all back 
```

请注意，在您的版本中，您实际上从不使用 parameter `x`。我将其重命名为`word`以使其更清楚它是什么，并且还使用它而不是`user_words`，这在这里是完全错误的。

我还删除了 print 语句并让函数返回混乱的单词，因为将数据处理和 IO 分开是一种很好的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:01:22.200

你需要`x`在函数内部工作，而你正在工作`user_words`。

```
import random

user_words = input("Enter a word or sentence: ") #Gets user input

word = user_words.split()  #no need of list()

def Jumble_One_Word(x):

    if len(x) > 2: #Only need to change words longer than 2

      first_letter = x[0] #Takes the first letter out and defines it

      last_letter = x[-1] #Takes the last letter out and defines it

      letters = list(x[1:-1]) #Takes the rest and puts them into a list

      random.shuffle(letters) #shuffles the list above

      middle_letters = "".join(letters) #Joins the shuffled list

      final_word = "".join([first_letter, middle_letters, last_letter]) #Puts finalword all back  in place as a list

      return final_word # better return from function inste

for i in word:                 #you can iterate this way too
    print (Jumble_One_Word(i)) 
```

**输出：**

```
$ python3 abc.py
Enter a word or sentence: python guido spam
pyhton
giudo
sapm 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T15:53:51.423

符号右侧`Word1 = Jumble_One_Word(word[Jumbler_Count])`（`=`赋值运算符）是函数调用。您将`word[Jumbler_Count]`作为参数传递给您的函数。

但是，在您的函数内部，您正在命名该参数`x`......然后不使用它！“乱一字”中的“一字”就是论据，`x`。但是您正试图直接从函数内部访问单词列表。

您不需要从函数内部进行操作`user_words`，而是需要操作`x`.

此外，在您的循环中，您将函数的每次迭代的结果分配给同一个变量。每次循环时，您都会覆盖之前的答案，因此一旦您的函数起作用，您将只能看到最后一个答案。尝试在循环之前创建一个`results`列表，`results = []`然后使用`results.append(Jumble_One_Word(your_argument))`，或者只是用`print`结果语句替换整个函数调用行，以便立即显示结果。

顺便说一句，您的循环可以大大简化（这是一个使用 print 语句策略的示例，但`results.append()`如果您创建该列表也可以这样做）：

```
for item in word:
    print Jumble_One_Word(item) 
```

# php - MSSQL 字段别名 (AS) 已停止工作

> ID：13161698
> 
> 赞同：1
> 
> 时间：2012-10-31T15:44:00.430
> 
> 标签：php, sql-server, linux, apache, odbc

我们正在尝试将使用 PHP 5.2.1 的 Linux 机器移动到使用 PHP 5.3.3 的虚拟机。使用 Apache 网络服务器。

所有具有以下内容的脚本：

```
Select real_column as alias_column from some_table 
```

为 alias_column 返回 null。如果我们删除“as alias_column”，一切正常。

我们正在使用 LibTDS ODBC 驱动程序，连接到 MS-SQL 2008。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:05:17.177

`alias_column`应该用单引号括起来，即：

```
SELECT real_column AS 'alias_column' FROM some_table 
```

如果您仍然没有得到任何结果，您可能需要检查语句是否生成任何错误消息，这可能还涉及在 PHP 中调高 error_reporting 级别。

此外，请在您的结果上尝试 a`var_dump()`以查看您的结果是否仍以预期格式返回。

# c++ - c++ 运行时错误，类中向量的 random_shuffle

> ID：13161699
> 
> 赞同：0
> 
> 时间：2012-10-31T15:44:00.883
> 
> 标签：c++, class, vector, blackjack

我正在尝试编写二十一点游戏。我在业余时间一直在自学 C++，这是我第一次在任何网站上发布有关编程的文章。

我一直在寻找问题的答案，并且学到了很多东西。但是这个问题完全让我感到困惑。我担心我完全错误地完成了这项任务，希望你能帮助我。

我有一个 Card 类和一个包含 52 张卡片的向量的 Deck 类。向量是 Deck 类的私有成员，我担心这是我的问题？

当我将 random_shuffle 行添加到我的代码中时，它可以正常编译，但随后控制台窗口崩溃（Windows 7 x64，code::blocks，c++）。我无法弄清楚我做错了什么。我将向量随机访问迭代器称为 begin() 和 end()...

**甲板.h**

```
#ifndef DECK_H
#define DECK_H

#include <vector>

using namespace std;

/** Card Class */
class Card
{
public:
/** Constructor prototypes */
//Card(); //default constructor
Card(int s, int r) : suit(s), rank(r) {} 

/** GET function prototypes */
int getRank(); // returns card number as int
string getSuit(); // returns the suit in a string

private:
int rank;
int suit;
} ;

/** Deck class */
class Deck
{
public:
Deck();
vector <Card> get_deck() { return deck; };

private:
vector<Card> deck;
};

#endif // DECK_H 
```

**甲板.cpp**

```
#include <iostream>
#include <string>
#include <vector>
#include "deck.h"

using namespace std;

/** Deck ctor to initialise deck */
Deck::Deck()
{
for(int suit = 0; suit < 4; suit++)
{
    for(int rank = 0; rank < 13; rank++)
    {
        deck.push_back(Card(suit,rank));
    }
}

}

/** Functions to GET rank and suit */
// Function to get rank as int
int Card::getRank()
{
return rank;
}

// Function to get suit as string
string Card::getSuit()
{
switch(suit)
{
    case 0:
    return "Diamonds";

    case 1:
    return "Hearts";

    case 2:
    return "Clubs";

    case 3:
    return "Spades";

    default:
    return "Error";
}
} 
```

**主文件**

```
#include <iostream>
#include <algorithm>
#include <ctime> // time()
#include <string>
#include <vector>

#include "deck.h"

using namespace std;

int main()
{

Deck mydeck;

random_shuffle( mydeck.get_deck().begin(), mydeck.get_deck().end() );

// Loop to iterate through deck of cards
for(int i = 0; i<52; i++)
{
    cout << mydeck.get_deck()[i].getRank() << " of " << mydeck.get_deck()[i].getSuit() << endl;
}

// Display size of deck
//cout << endl << "The size of deck is: " << mydeck.get_deck().size() << endl;

return 0;
} 
```

任何帮助或智慧之言将不胜感激，我希望我正确格式化了一切......

非常感谢

担

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T15:46:52.353

此访问器方法：

```
vector <Card> get_deck() { return deck; }; 
```

返回卡片向量的*副本*。因此，当您调用它两次时，您会得到两个不同的副本，并且`begin()`第一个副本的 与第二个副本的不匹配`end()`，因此它崩溃了。

要修复它，您应该*通过引用*返回数组，以免复制：

```
vector <Card>& get_deck() { return deck; }  // no semicolon needed here
//           ^
//           |
//    this is a reference 
```

但是，这允许调用者修改内部数组，这通常是个坏主意。为避免这种情况，您应该通过`const`引用返回它：

```
const vector <Card>& get_deck() { return deck; } 
```

但是，如果您这样做，则`std::random_shuffle`无法修改数组。`Deck`所以要解决这个问题，理想的解决方案是向调用`random_shuffle`自身的类添加一个类方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T15:46:31.013

尝试`vector<Card>&`从`get_deck()`. 在发布的代码中，您将制作两个单独的副本并返回它们。

因此，当`random_shuffle`尝试完成其工作时，它具有指向两个不同向量的迭代器。

正如@Will 在对另一个答案的评论中指出的那样，您最好通过实现一个`void Deck::shuffle()`调用`random_shuffle`成员`deck`并且根本不公开的方法来保留封装`deck`。

# jenkins - Jenkins 在重新启动或从磁盘重新加载配置时删除作业

> ID：13161702
> 
> 赞同：3
> 
> 时间：2012-10-31T15:44:08.620
> 
> 标签：jenkins

我刚刚更新到适用于 Windows 7（64 位）的 Jenkins (1.488) 的最新版本，但似乎如果我重新启动 Jenkins 或选择*从磁盘重新加载配置*选项，我配置的作业就会消失。如果我创建一个新工作，我可以在下面看到它，`JENKINS_HOME/jobs`但由于某种原因，Jenkins 无法将这些工作拉回内存。

有什么我可以尝试的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:11:31.237

**[正如上面Sagar](https://stackoverflow.com/users/289812/sagar)**所提到的，这可能与权限有关。

确保运行 Jenkins（或运行 Jenkins 的服务）的用户是文件夹树
的**所有者**， 并且它对那里的**所有**项目具有**完全权限。**`%JENKINS_HOME%`

# php - 从 JQUERY 自动完成获取 ID

> ID：13161703
> 
> 赞同：1
> 
> 时间：2012-10-31T15:44:10.433
> 
> 标签：php, jquery

我有一个来自 JQUERY 的自动完成功能，我想要产品的 ID 而不是我选择的产品的名称。

这是完整的自动完成：

```
 <?php

    // if the 'term' variable is not sent with the request, exit
    if ( !isset($_REQUEST['term']) )
    exit;

    // connect to the database server and select the appropriate database for use
    include 'conexion2.php';

    // query the database table for client codes that match 'term'
    $rs = mysql_query('SELECT id_cliente, nombrecliente FROM cliente where nombrecliente like "'. mysql_real_escape_string($_REQUEST['term']) .'%" order by nombrecliente asc', $conexio);

    // loop through each name returned and format the response for jQuery
$data = array();
    if ( $rs && mysql_num_rows($rs) )
    {
    while( $row = mysql_fetch_array($rs, MYSQL_ASSOC) )
    {
        $data[] = array(
            'label' => $row['nombrecliente'],
            'value' => $row['nombrecliente'],
        );
    }
    }

    // jQuery wants JSON data
    echo json_encode($data);
    flush(); 
```

当我选择客户时，我不知道如何取出身份证。如果我更改 'value' => $row['id_cliente']，那么我会在我的自动完成 INPUT 中获得 ID 号....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:05:20.603

在您的数组中，添加另一个项目：

```
'id' => $row['id_cliente'] 
```

然后，您需要添加一个隐藏的表单字段来存储您的 ID。在您的 jQuery 中（假设您使用的是 jQueryUI 自动完成功能），您可以在源代码下方添加它作为自动完成功能的一部分：

```
$('#autocomplete_input').autocomplete({
    source: '/path/to/lookup/php/file',
    select: function(event, ui){
        $('#my_hidden_field').val(ui.item.id);
    }
}); 
```

然后，当您在提交后阅读表单时，您将阅读该 ID 而不是自动完成的字段。

# php - 无法登出

> ID：13161704
> 
> 赞同：0
> 
> 时间：2012-10-31T15:44:12.383
> 
> 标签：php, session, logout, logoff

我在一个注销功能不起作用的工具上工作。我有一个索引页面，其中包含带有 session_start() 的配置文件。

之后，我包含一个页面，其中有我的横幅以及我的登录和注销按钮。当我单击其中一个按钮时，我会转到另一个页面`connec.php`，我会破坏或创建连接。

连接没问题，我初始化了所有会话变量。对于断开连接，我这样做：

```
if(isset($_POST['logout'])){
    $_SESSION = array ();
    session_unset();
    session_destroy();
    $_POST['logout']=1; 
    //gotopage($GLOBALS["GLOBAL_URL_PSISITE"]);
    header("Location: ../index.php"); 
```

我仍然保持联系，并且当我确实`print_r($_SESSION)`存在时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:48:08.687

首先确保页面已`session_start()`在最顶部定义，然后在页面上执行任何操作之前，其次确保您的输入字段包裹在`form`元素周围，并且您的`submit button`has`name=logout`和您的表单设置为 `method=post`

```
<form method="post" action="your_logout_script_page.php">
  <input type="submit" name="logout" />
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:54:00.070

为了正确地“销毁”一个正在运行的会话，您必须首先告诉 PHP 您要杀死哪个会话。

如果您的会话没有自定义/手动名称（大多数情况下），您必须首先调用

```
session_start(); 
```

在你打电话之前

```
session_destroy(); 
```

... 所以：

```
<?php session_start(); session_destroy(); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T15:51:23.043

你会在你的文件中想要这样的东西

```
<?php
session_start();

if (isset($_POST['logout'])) {

    $_SESSION = array();

    if (ini_get("session.use_cookies")) {
        setcookie(session_name(), '', time() - 42000, '/');
    }

    session_destroy();

    //$_POST['logout']=1;  // this won't do anything since you're redirecting on the next line.

    header("Location: ../index.php");
    exit;

}
?> 
```

# testing - 集成测试与测试覆盖率

> ID：13161707
> 
> 赞同：2
> 
> 时间：2012-10-31T15:44:28.557
> 
> 标签：testing, integration-testing, code-coverage

我的公司有一个规则是通过单元测试或集成测试达到 75% 的测试覆盖率。由于整个系统的复杂性，开发人员倾向于编写集成测试（例如，针对正在运行的应用程序使用 selenium webdriver），而不是承担模拟依赖服务/类的负担。

我不是那个朋友，我想知道 i-tests 的测试覆盖数据实际上意味着什么：

在我看来，测试应该定义预期的行为并对其进行测试。如果 i-test 深入到应用程序中，通过许多服务，可能到 DB 层并再次返回，它将覆盖很多行，但绝对不清楚这种覆盖行的预期行为是什么. 因此，覆盖数据的质量是有问题的恕我直言，而且——更糟糕的是——增加了维护工作。

那个POV正确吗？在与管理层讨论时，我如何支持它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T15:53:04.890

关于测试覆盖率的盲目百分比规则并不理想。集成测试就是一个很好的例子。如果有东西坏了，你能准确地说出是什么坏了吗？如果您有多个集成点（例如，单个请求访问数据库、Web 服务并发送电子邮件）怎么办？那里发生了太多事情，以至于测试没有真正的意义。

您能否在不测试所有可能结果的情况下获得 100% 的覆盖率？你是否可以编写 10,000 个测试，但仍然无法涵盖软件中最重要的类？盲目的指标是不好的，对质量没有真正的结果。

通常，进行更小、更离散的测试更有价值。我们通过存根集成点并在测试中模拟它们来做到这一点。然后您可以设置场景“如果数据库执行此操作，那么我的代码执行此操作”。这种类型的问题在内存中解决比在可重复的基础上建立一个数据库来做那个确切的事情要容易得多。您将如何自动化集成测试服务器断开连接？这很难。存根处理特定 SQL 异常的数据库更容易且可重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:58:32.603

如果你无法在截止日期之前达到 75% 的测试覆盖率，或者即使你达到了，那剩下的 25% 会怎样，所以你的公司没有专注于获得具有不太明显缺陷的产品，而是专注于测试覆盖率的百分比。尽管您使用硒或任何所谓的东西，但仍以可信的方式解释您的方法。

# azure - 无法测试 Azure 的瞬态故障处理应用程序块

> ID：13161710
> 
> 赞同：3
> 
> 时间：2012-10-31T15:44:41.410
> 
> 标签：azure

我在执行瞬态故障处理应用程序块的简单测试时遇到了麻烦，所以我一定错过了一些愚蠢的东西。

基于[http://msdn.microsoft.com/en-us/library/hh680927(v=pandp.50).aspx](http://msdn.microsoft.com/en-us/library/hh680927(v=pandp.50).aspx)和 [http://azuretable.blogspot.com/2012/08/unit-testing-中的信息transient-errors-in-azure.html](http://azuretable.blogspot.com/2012/08/unit-testing-transient-errors-in-azure.html)我在下面创建了模拟类：

```
Public Class DBUtils_TestRetryPolicy

' see http://msdn.microsoft.com/en-us/library/hh680927(v=pandp.50).aspx
' see http://azuretable.blogspot.com/2012/08/unit-testing-transient-errors-in-azure.html

Public Class TransientMock
    Implements ITransientErrorDetectionStrategy

    Public Function IsTransient(ex As System.Exception) As Boolean Implements Microsoft.Practices.TransientFaultHandling.ITransientErrorDetectionStrategy.IsTransient
        Return (True)
    End Function
End Class

Private Shared mockExceptionCounter As Integer = 0
Private Shared retryLog As String = ""

Private Sub ThrowException()
    mockExceptionCounter += 1
    Throw New Exception("This is as mock exception to test retries")
End Sub

Public Function TestRetryLogic() As String
    Dim theRetryStrategy = New Incremental(6, TimeSpan.FromSeconds(1), TimeSpan.FromSeconds(2)) ' should result in retries at 0, 1, 3, 5, 7, 9 seconds (25 seconds total)
    theRetryStrategy.FastFirstRetry = True
    Dim theRetryPolicy = New RetryPolicy(Of TransientMock)(theRetryStrategy)
    AddHandler theRetryPolicy.Retrying, AddressOf OnMockConnectionRetry

    mockExceptionCounter = 0
    retryLog = ""

    Try
        theRetryPolicy.ExecuteAction(New System.Action(AddressOf ThrowException))
    Catch ex As Exception
        ' here we should have the last exception thrown after all the retries
        Dim a As Integer = 231234234
    End Try

    Return (retryLog)
End Function

Private Sub OnMockConnectionRetry(sender As Object, e As RetryingEventArgs)
    retryLog += DateTime.UtcNow.ToString + " [" + mockExceptionCounter.ToString() + "] -> CurrentRetryCount [" + Cstr(e.CurrentRetryCount) + "]" + "Delay (ms) [" + CStr(e.Delay.TotalMilliseconds) + "]" + "LastException [" + e.LastException.Message + "]"
End Sub

End Class 
```

我在代码中所做的只是实例化这个类并调用 TestRetryLogic()。

我运行了 Visual Studio 调试器，期望看到几次重试，但我得到的是来自 Visual Studio 的弹出窗口，上面写着“用户代码未处理异常”。一旦我在 ThrowException() 方法中抛出，就会发生这种情况。当然，似乎没有重试发生。

我错过了什么？

编辑：我未能在 OnMockConnectionRetry 中强制转换为字符串，所以我假设我在（已经“运行”的）异常处理块中抛出了一个异常。通过使用 Petar 的提示，我能够看到（并修复）这个小问题，现在重试按预期工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T16:46:27.157

您需要通过取消选中用户未处理选项来关闭公共语言运行时异常，以免被 VS 中断。这位于调试/异常菜单下。

![在此处输入图像描述](../Images/0edb913fbd4d55c3bb7aeb1ae8325d47.png)

# ruby-on-rails - 运行“cap deploy:setup”命令时“此帐户当前不可用”

> ID：13161712
> 
> 赞同：0
> 
> 时间：2012-10-31T15:44:47.883
> 
> 标签：ruby-on-rails, capistrano

我想部署 Ruby on Rails 网站并为此目的使用 Capistrano。

在我填写了 deploy.rb 文件并运行之后，`cap deploy:setup`这就是我得到的

```
C:\Sites\blog>cap deploy:setup
  * ←[32m2012-10-31 15:39:22 executing `deploy:setup'←[0m
  * ←[33mexecuting "mkdir -p /var/www/blog /var/www/blog/releases /var/www/blog/
shared /var/www/blog/shared/system /var/www/blog/shared/log /var/www/blog/shared
/pids"←[0m
    servers: ["188.121.54.128"]
Password:
    [188.121.54.128] executing command
 ** [out :: 188.121.54.128] This account is currently not available.
    ←[2;37mcommand finished in 153ms←[0m
failed: "sh -c 'mkdir -p /var/www/blog /var/www/blog/releases /var/www/blog/shar
ed /var/www/blog/shared/system /var/www/blog/shared/log /var/www/blog/shared/pid
s'" on 188.121.54.128

C:\Sites\blog> 
```

关于可能出现问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:09:55.937

似乎您甚至无法登录远程服务器。Capistrano 需要 SSH 访问权限，因此请尝试使用与 cap 配置相同的凭据在您的服务器中 ssh，但您不能，请联系您的托管服务提供商，让您对机器进行 ssh 访问。

# java - java.lang.Exception：参数索引超出范围（2 > 参数个数，即 1）

> ID：13161715
> 
> 赞同：0
> 
> 时间：2012-10-31T15:44:53.343
> 
> 标签：java, mysql, prepared-statement

我很想知道为什么会出现这个错误：java.lang.Exception: Parameter index out of range (2 > number of parameters, which is 1)。

是的，我使用 PreparedStatement

```
 SQL="SELECT pcsv("+servidor_virtual_nuestro+","+nivel_cuenta_receptora+","+codigo_sku[id_componente]+","+t_precio[tipo_precio]+",0) as p_unitario FROM servidores_virtuales t1"+
 "WHERE t1.id_servidor_virtual= ? ";

PreparedStatement pstm100 = this.conexion.prepareStatement(SQL);

pstm100.setInt(1, servidor_virtual_nuestro);

ResultSet rs66 =  pstm100.executeQuery(); 
```

pcsv 是我创建的一个程序，所以我不知道为什么会出现这个错误，你能帮帮我吗？非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:49:15.947

I don't see what would cause the exception as thrown, but I suppose it could be a side effect of the fact that you're creating improper SQL. Your SQL string needs a space between `t1` and `WHERE`.

Or it could be some extra question marks that are in some of your variables. Try printing out the SQL string to a log or `stdout` before executing it.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2018-07-24T05:44:03.373

```
public void ReturnUpdate() {
        String sql = "insert into returnbook (`Student Id`,`Student Name`,`Father Name`,Course,Branch,Year,Semester,`Book Id`,`Book Name`,Edition,Publisher,Price,Pages,`Date of Issue`,`Date of Return`) values ";
        try{
         pst = conn.prepareStatement(sql);
         pst.setString (1,  jTextField1.getText());
         pst.setString (2,  jTextField2.getText());
         pst.setString (3,  jTextField3.getText());
         pst.setString (4,  jTextField4.getText());
         pst.setString (5,  jTextField5.getText());
         pst.setString (6,  jTextField6.getText());
         pst.setString (7,  jTextField7.getText());
         pst.setString (8,  jTextField8.getText());
         pst.setString (9,  jTextField9.getText());
         pst.setString (10, jTextField10.getText());
         pst.setString (11, jTextField11.getText());
         pst.setString (12, jTextField12.getText());
         pst.setString (13, jTextField13.getText());
         pst.setString(15, ((JTextField)jDateChooser1.getDateEditor().getUiComponent()).getText());
         pst.execute();
           JOptionPane.showMessageDialog(null,"Book Returned");
        }catch(Exception e){
            JOptionPane.showMessageDialog(null, e);
        }
    } 
```

# ruby-on-rails - 不要在 render :file 中运行 ruby 代码

> ID：13161717
> 
> 赞同：0
> 
> 时间：2012-10-31T15:44:59.147
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我试图`render :file`在我的视图中渲染一个 HTML 文件，但问题是，如果这个 .html 文件包含任何 ruby​​ 代码，它最终会被执行，这是我试图避免的事情。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:52:53.230

如果你想输出一个简单的文件，你可以这样做：

```
path = __FILE__
render text: File.read(path).html_safe 
```

这会将当前文件作为输出写入。

# javascript - 如何使用 javascript 访问此 JSON 字符串中的响应/响应 ID？

> ID：13161720
> 
> 赞同：0
> 
> 时间：2012-10-31T15:45:02.667
> 
> 标签：javascript, jquery

大家好，我正在使用 parseJSON 来解析这个 JSON 字符串：

```
json = [
  {
    "Answers": [
      {
        "Responses": [

        ],
        "AnswerID": 1,
        "AnswerText": "Green"
      },
      {
        "Responses": [
          {
            "ResponseID": 1,
            "RespondingUser": null,
            "ResponseDate": "\/Date(1351694241577)\/"
          },
          {
            "ResponseID": 2,
            "RespondingUser": null,
            "ResponseDate": "\/Date(1351694245093)\/"
          }
        ],
        "AnswerID": 2,
        "AnswerText": "Blue"
      }
    ],
    "QuestionID": 1,
    "QuestionText": "Favourite colour?",
    "ClosingDate": "\/Date(1351953058527)\/",
    "AskingUser": null
  }
]

var result = jQuery.parseJSON(json); 
```

但是我现在如何从“结果”中获取响应/响应 ID？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:50:38.550

[] = 数组

{ } = 对象

你有一个数组，失去了环绕方括号。

警报（json.Answers[0].AnswerText）=“绿色”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:47:55.243

您应该能够使用 for-in 循环：

```
 for (i in result[0].Answers)
 {
    // do something with result[0].Answers[i].Responses
 } 
```

这是你要找的吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T15:48:09.737

```
for (var a in result[0].Answers) {
    result[0].Answers[a].AnswerID // Do something with it.
} 
```

# java - jax-rs 响应实体类

> ID：13161724
> 
> 赞同：1
> 
> 时间：2012-10-31T15:45:27.383
> 
> 标签：java, cxf, jax-rs

我正在尝试创建一个 jax-rs 客户端，它将 xml 作为对象发布并从服务器的响应正文中接收 xml。代码如下：

```
import org.apache.cxf.jaxrs.client.WebClient;
..
TravelRequest tr = ...
..
WebClient client = WebClient.create(url);
client.type(javax.ws.rs.core.MediaType.APPLICATION_XML_TYPE).accept(javax.ws.rs.core.MediaType.APPLICATION_XML_TYPE);
javax.ws.rs.core.Response r = client.post(tr);
Object response = r.getEntity(); 
```

响应对象的 java 类型是 sun.net.www.protocol.http.HttpURLConnection$HttpInputStream 是否可以获取 TravelRequest 类型的对象而不是从输入流中读取 xml？有人知道它的任何例子吗？我也可以使用 spring 来配置我的客户端。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:00:32.320

你用`WebClient`错了方法。类似[`accept`](https://cxf.apache.org/javadoc/latest/org/apache/cxf/jaxrs/client/WebClient.html#accept%28javax.ws.rs.core.MediaType...%29)和[`type`](https://cxf.apache.org/javadoc/latest/org/apache/cxf/jaxrs/client/WebClient.html#type%28javax.ws.rs.core.MediaType%29)不'*改变*但`WebClient`返回更新的客户端的方法

所以正确的用法是：

```
WebClient client = WebClient.create(url);
Response response = client.type(...).accept(...).post(tr); 
```

然后[`Response.getEntity()`](http://jsr311.java.net/nonav/releases/1.1/javax/ws/rs/core/Response.html#getEntity%28%29)可用于提取响应。

CXF 支持[各种形式的数据绑定](https://cxf.apache.org/docs/databindings.html)，您可以使用这些数据绑定将响应主体映射到您的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-18T11:42:29.210

这就是它的完成方式。

```
TravelRequest travelRequest = client.post(tr, TravelRequest.class); 
```

希望这会对某人有所帮助。

# jboss7.x - JBoss 7：绒毛还是真正好的应用服务器？

> ID：13161725
> 
> 赞同：1
> 
> 时间：2012-10-31T15:45:28.317
> 
> 标签：jboss7.x

我特别问这个问题，因为 JBoss AS 7+ 已经完全改变了 360 度，迫使应用程序开发人员完全考虑 JBoss 模块。这可以防止早期的类路径地狱问题等，并鼓励干净的模块化思维等。它还声称快速启动时间等。

一切都很好，但我主要担心的是，请确认您是否有同感：

1.  JBoss 坚持将 jboss-deployment-structure.xml 文件放在 WEB-INF 中。这将使 WAR 文件根本不可移植，因为它现在包含应用程序服务器特定的配置文件。我担心互操作性。

2.  我仍然对所需的大量 XML 配置感到紧张 - 为您要添加的每个依赖项创建一个模块目录结构，为该依赖项创建一个 module.xml，为非模块创建一个 jboss-deployment-structure.xml 条目或 WEB-INF/lib 中的库的清单条目。等等等等。这将需要开发人员花费足够的时间和精力来成为配置专家或聘请专家或购买支持 - 从长远来看，对于任何团队和公司来说都是一笔巨大的成本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:45:41.543

jboss-deployment-structure.xml 没有任何东西使它不可移植。如果其他应用程序服务器不使用该文件，它们将简单地忽略它。

如果您想在应用程序中使用依赖项，则无需创建模块。如果您想在多个部署之间使用公共依赖项，您只会这样做。例如 JDBC 驱动程序库。

无需为 WEB-INF/lib 中的库创建 jboss-deployment-structure.xml 或添加清单条目。唯一需要 jboss-deployment-structure.xml 的情况是，如果您想排除服务器依赖项，例如 log4j，或者在部署范围之外添加未自动添加的依赖项。可能还有其他一些用例，但这些是最常见的。

# .net - 32 位 VSTO 4 Excel 2007 插件能否在 64 位 Windows Server 2003 和 Excel 2007 32 位上运行？

> ID：13161726
> 
> 赞同：1
> 
> 时间：2012-10-31T15:45:41.647
> 
> 标签：.net, vsto, excel-2007, ms-office, excel-addins

我们有一个 VSTO 4 32 位 Excel 插件，它在 Windows XP（和 Server 2003）32 位上运行良好。我们计划将我们的服务器升级到 Windows 2003 64 位操作系统和 Excel 2007 32 位。我的问题是我们现有的 Excel 插件是否仍然有效。

VSTO 4 运行时 64 位是否也仅适用于 64 位 Office？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:04:37.877

只要您保持 Office 版本**目标平台**相同，它就可以正常工作。如果您从 Office x86 更改为 Office x64，则需要构建面向 x64 而不是默认 x86 的安装程序。更改操作系统平台不会给您带来任何问题。

请参阅[有关**TargetPlatform**](https://stackoverflow.com/a/13071907/175679)的相关 SO 帖子。

VSTO 4 x64 运行时仅适用于 Office x64。

# postgresql - 在大分区中执行缓慢的查询

> ID：13161728
> 
> 赞同：0
> 
> 时间：2012-10-31T15:45:44.107
> 
> 标签：postgresql, postgresql-performance

我有一个在时间戳字段上分区的数据库模式，每个分区包括 155 个时间戳唯一值，大小为 1.5 GB。架构非常简单，包括时间戳、对象 ID 和其他字段（无外键无连接）。主键是时间戳和对象 ID 字段。

现在以下查询需要大约 50 秒才能执行

```
SELECT c_aggregated_data_10_minutes */ 
    from_time,
    object_id,
    object_type,
    latencies_ttlbsec_sum,
    usage_hits_total
FROM
    metric_store.lc_aggregated_data_master_10_minutes
WHERE
    object_id in ( list of ~100 ids) AND 
    from_time >= 1351602600 AND 
    from_time <  1351688400 
```

条件中的时间跨度涵盖144个时间点

执行计划如下：

```
"Result  (cost=0.00..279041.19 rows=68274 width=24)"
"  ->  Append  (cost=0.00..279041.19 rows=68274 width=24)"
"        ->  Seq Scan on lc_aggregated_data_master_10_minutes  (cost=0.00..0.00 rows=1 width=24)"
"              Filter: ((from_time >= 1351602600) AND (from_time < 1351688400) AND (object_id = ANY ('{258453,260435,259490,262254,261341,445607,263218,447674,446803,448540,9532,2071,5232,2429532,246502,3939,244000,241179,236971,254544,252928,250982,248878,257377,5893,256092,5707,2986,733,7765,3836,7850,2885,100,9744,4435,10492,2441779,573255,8105,993,6004,5052,7581,15,10171,7363,10381,822,4340,5616,2673,2174,10696,7028,10066,8845,10595,2499,3184,6325,2280,10278,519,8020,1504,3081,7935,3741,4235,3535,5428,6218,7472,567771,568316,568862,569411,8954,570517,569972,571619,571062,572710,572165,9862,1710,1875,6541,2397,205,4756,2435059,4859,562859,563404,426,562308,6434,8738,4038,567226,566681,7260,566130,565584,8628,565039,564494,2492165,563949,1286,8307,5141,9308,1080,6824,6640,9961,518277,519721,556424,178509,555067,160902,559587,558254,522427,520857,524956,523659,229743,3379,222533,215285,208058,200756,193533,186251,5327,630,505950,7680,3632,2491614,517196,509766,510971,507374,508381,1593,4965,514786,9425,515944,512018,513537,1974,1377,9128,4129,5529,503659,504806,471537,495721,1201,496761,497870,499285,500262,3284,501341,502624,309,6733,4639,6915,470231,467992,469134,465660,466675,463127,8196,464183,6107,461061,462081,2790,459792,9043,455646,456791,457747,458721,451617,452556,453738,454718,9213,9643,8414,449680,450608}'::integer[])))"
"        ->  Bitmap Heap Scan on lc_aggregated_data_10_minutes_from_1351510800 lc_aggregated_data_master_10_minutes  (cost=1444.26..174220.14 rows=42626 width=24)"
"              Recheck Cond: ((from_time >= 1351602600) AND (from_time < 1351688400))"
"              Filter: (object_id = ANY ('{258453,260435,259490,262254,261341,445607,263218,447674,446803,448540,9532,2071,5232,2429532,246502,3939,244000,241179,236971,254544,252928,250982,248878,257377,5893,256092,5707,2986,733,7765,3836,7850,2885,100,9744,4435,10492,2441779,573255,8105,993,6004,5052,7581,15,10171,7363,10381,822,4340,5616,2673,2174,10696,7028,10066,8845,10595,2499,3184,6325,2280,10278,519,8020,1504,3081,7935,3741,4235,3535,5428,6218,7472,567771,568316,568862,569411,8954,570517,569972,571619,571062,572710,572165,9862,1710,1875,6541,2397,205,4756,2435059,4859,562859,563404,426,562308,6434,8738,4038,567226,566681,7260,566130,565584,8628,565039,564494,2492165,563949,1286,8307,5141,9308,1080,6824,6640,9961,518277,519721,556424,178509,555067,160902,559587,558254,522427,520857,524956,523659,229743,3379,222533,215285,208058,200756,193533,186251,5327,630,505950,7680,3632,2491614,517196,509766,510971,507374,508381,1593,4965,514786,9425,515944,512018,513537,1974,1377,9128,4129,5529,503659,504806,471537,495721,1201,496761,497870,499285,500262,3284,501341,502624,309,6733,4639,6915,470231,467992,469134,465660,466675,463127,8196,464183,6107,461061,462081,2790,459792,9043,455646,456791,457747,458721,451617,452556,453738,454718,9213,9643,8414,449680,450608}'::integer[]))"
"              ->  Bitmap Index Scan on lc_aggregated_data_10_minutes_from_1351510800_pkey  (cost=0.00..1433.60 rows=66382 width=0)"
"                    Index Cond: ((from_time >= 1351602600) AND (from_time < 1351688400))"
"        ->  Bitmap Heap Scan on lc_aggregated_data_10_minutes_from_1351630800 lc_aggregated_data_master_10_minutes  (cost=866.98..104821.05 rows=25647 width=24)"
"              Recheck Cond: ((from_time >= 1351602600) AND (from_time < 1351688400))"
"              Filter: (object_id = ANY ('{258453,260435,259490,262254,261341,445607,263218,447674,446803,448540,9532,2071,5232,2429532,246502,3939,244000,241179,236971,254544,252928,250982,248878,257377,5893,256092,5707,2986,733,7765,3836,7850,2885,100,9744,4435,10492,2441779,573255,8105,993,6004,5052,7581,15,10171,7363,10381,822,4340,5616,2673,2174,10696,7028,10066,8845,10595,2499,3184,6325,2280,10278,519,8020,1504,3081,7935,3741,4235,3535,5428,6218,7472,567771,568316,568862,569411,8954,570517,569972,571619,571062,572710,572165,9862,1710,1875,6541,2397,205,4756,2435059,4859,562859,563404,426,562308,6434,8738,4038,567226,566681,7260,566130,565584,8628,565039,564494,2492165,563949,1286,8307,5141,9308,1080,6824,6640,9961,518277,519721,556424,178509,555067,160902,559587,558254,522427,520857,524956,523659,229743,3379,222533,215285,208058,200756,193533,186251,5327,630,505950,7680,3632,2491614,517196,509766,510971,507374,508381,1593,4965,514786,9425,515944,512018,513537,1974,1377,9128,4129,5529,503659,504806,471537,495721,1201,496761,497870,499285,500262,3284,501341,502624,309,6733,4639,6915,470231,467992,469134,465660,466675,463127,8196,464183,6107,461061,462081,2790,459792,9043,455646,456791,457747,458721,451617,452556,453738,454718,9213,9643,8414,449680,450608}'::integer[]))"
"              ->  Bitmap Index Scan on lc_aggregated_data_10_minutes_from_1351630800_pkey  (cost=0.00..860.56 rows=39940 width=0)"
"                    Index Cond: ((from_time >= 1351602600) AND (from_time < 1351688400))" 
```

如何加快此查询的执行速度（在不到 10 秒内执行）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:52:27.833

在第一个（id，ts）而不是（ts，id）上创建索引`id`或创建主键。`id`顺便说一句，时间戳字段是一个 unix 时间戳，不要与 postgresql 的`timestamp`数据类型混淆。

# xml - 匹配元素和属性，如果元素不属于默认命名空间

> ID：13161731
> 
> 赞同：0
> 
> 时间：2012-10-31T15:45:48.023
> 
> 标签：xml, xslt

我想修改名为“FOO”的元素的属性值，所以我写道：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

  <xsl:template match="@* | node()">
      <xsl:copy>
          <xsl:apply-templates select="@* | node()"/>
      </xsl:copy>
  </xsl:template>

  <xsl:template match="FOO/@extent">
      <xsl:attribute name="extent">
      <xsl:text>1.5cm</xsl:text>
      </xsl:attribute>
  </xsl:template>

</xsl:stylesheet> 
```

这东西有效。现在我需要同样的东西，但使用元素“fs：BOO”。我尝试用“fs:BOO”替换 FOO，但 xsltproc 说它不能编译这样的代码。我以这种方式临时解决了这个问题：

```
sed 's|fs:BOO|fs_BOO|g' | xsltproc stylesheet.xsl - | sed 's|fs_BOO|fs:BOO|g' 
```

但可能有更简单的解决方案，而不使用“sed”？

输入数据示例：

```
<root>
    <fs:BOO extent="0mm" />
</root> 
```

如果写：

```
<xsl:template match="fs:BOO/@extent"> 
```

我有：

```
xsltCompileStepPattern : no namespace bound to prefix fs
compilation error: file test.xsl line 10 element template
xsltCompilePattern : failed to compile 'fs:BOO/@extent' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:09:15.333

首先，我希望您的 XML 具有命名空间的声明，否则它将无效

```
<root xmlns:fs="www.foo.com">
    <fs:BOO extent="0mm" />
</root> 
```

这也适用于您的 XSLT。如果您尝试这样做，`<xsl:template match="fs:BOO/@extent">`那么您也需要在 XSLT 中声明命名空间。

```
<xsl:stylesheet version="1.0" 
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
   xmlns:fs="www.foo.com"> 
```

重要的是命名空间 URI 与 XML 中的匹配。

但是，如果您想处理不同的命名空间，您可以采用不同的方法。您可以使用**local-name()**函数来检查没有命名空间前缀的元素名称。

试试这个 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

  <xsl:template match="@* | node()">
      <xsl:copy>
          <xsl:apply-templates select="@* | node()"/>
      </xsl:copy>
  </xsl:template>

  <xsl:template match="*[local-name()='BOO']/@extent">
      <xsl:attribute name="extent">
         <xsl:text>1.5cm</xsl:text>
      </xsl:attribute>
  </xsl:template>
</xsl:stylesheet> 
```

这应该输出以下内容

```
<root xmlns:fs="fs">
   <fs:BOO extent="1.5cm"></fs:BOO>
</root> 
```

# javascript - 正则表达式限制字母

> ID：13161734
> 
> 赞同：0
> 
> 时间：2012-10-31T15:45:52.550
> 
> 标签：javascript, html, regex

我有一个字符串：

```
var str = "str is str, 12str345 and ABCstrDEF"; 
```

我想捕获`str`除`ABCstrDEF`（`str`被字母字符包围）之外的所有内容

是否可以使用正则表达式限制字母？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:51:14.350

一起去

```
RegExp.quote = function(str) {
  return (str + '').replace(/([.?*+^$[\]\\(){}|-])/g, "\\$1");
};

var re = new RegExp("/\b[^a-zA-Z]*?" + RegExp.quote(str) + "[^a-zA-Z]*?\b/g");  
alert(input.match(re)); 
```

# css - CSS 图像 url 在 IE 中没有正确呈现

> ID：13161736
> 
> 赞同：0
> 
> 时间：2012-10-31T15:45:56.280
> 
> 标签：css, internet-explorer

大家好，thanx 提前...我创建了 HTML 和 CSS - 所有图像都在 FF 和 chrome 中正确呈现但是 IE 存在一些问题

当我尝试使用`<img src="same_path_as_per_css"/>`它时，它可以在 IE 上正常工作

但是当我使用`background: url("same_path_as_per_html");`

不能在 IE 中工作

这是代码[http://jsfiddle.net/KKWLS/2/](http://jsfiddle.net/KKWLS/2/)

有任何想法吗！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:01:06.680

尝试将引号保留/替换为直引号/弯引号。

```
background:url(../images/menubar.jpg); 
```

此外，该文件应与 CSS 文件相关，而不是与 HTML 文件相关。

url 和 () 之间也不能有空格

# algorithm - 具有多个变量的数据管理

> ID：13161738
> 
> 赞同：2
> 
> 时间：2012-10-31T15:46:26.320
> 
> 标签：algorithm, stata

目前我面临以下问题，我正在 Stata 解决这个问题。我添加了算法标签，因为它主要是我感兴趣的步骤而不是 Stata 代码。

我有一些变量，比如 var1 - var20 可能包含一个字符串。我只对其中一些字符串感兴趣，我们称它们为 A、B、C、D、E、F，但也可以出现其他字符串（所有这些都将表示为 X）。我还有一个唯一的标识符 ID。部分数据可能如下所示：

```
ID  |  var1  |  var2  |  var3  |  ..  |  var20  
1   |   E    |        |        |      |    X
1   |        |   A    |        |      |    C
2   |   X    |   F    |   A    |      |   
8   |        |        |        |      |    E 
```

现在我想为每个 ID 以及在任何变量中每次出现的字符串 A、B、C、E、D、F 之一创建一个条目。上面的数据应该是这样的：

```
ID  |  var1  |  var2  |  var3  |  ..  |  var20
1   |    E   |        |        |  ..  |       
1   |        |    A   |        |      |       
1   |        |        |        |      |    C
2   |        |    F   |        |      |
2   |        |        |    A   |      |
8   |        |        |        |      |    E 
```

在这里，每当有一个不是 A、B、C、D、E 或 F 的字符串 X 时，我们都会忽略。到目前为止，我的尝试是创建一个变量，为每个条目计算 A、B 出现的次数 N， C、D、E、F。在上面的原始数据中，该变量将为 N=1,2,2,1。然后对于每个条目，我都会创建 N 个副本。这导致数据：

```
ID  |  var1  |  var2  |  var3  |  ..  |  var20  
1   |   E    |        |        |      |    X
1   |        |   A    |        |      |    C
1   |        |   A    |        |      |    C
2   |   X    |   F    |   A    |      |   
2   |   X    |   F    |   A    |      |   
8   |        |        |        |      |    E 
```

我的问题是如何从这里解决这个问题？很抱歉标题不好，但我无法更具体地表达它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:30:01.553

抱歉，我认为 finally 块是您想要的输出（现在我知道这是您到目前为止所完成的）。您可以通过两次调用`reshape`( `long`, then `wide`) 来获得中间块。

首先，我将生成与您匹配的数据。

```
clear
set obs 4

* ids
generate n = _n
generate id = 1 in 1/2
replace id = 2 in 3
replace id = 8 in 4

* generate your variables
forvalues i = 1/20 {
    generate var`i' = ""
}
replace var1 = "E" in 1
replace var1 = "X" in 3
replace var2 = "A" in 2
replace var2 = "F" in 3
replace var3 = "A" in 3
replace var20 = "X" in 1
replace var20 = "C" in 2
replace var20 = "E" in 4 
```

现在这两个调用`reshape`.

```
* reshape to long, keep only desired obs, then reshape to wide
reshape long var, i(n id) string   
keep if inlist(var, "A", "B", "C", "D", "E", "F")
tempvar long_id
generate int `long_id' = _n
reshape wide var, i(`long_id') string 
```

第一个`reshape`将您的数据从宽转换为长。`var`指定要重塑为 long 的变量都以`var`. `i(n id)`指定 和 的每个唯一组合`n`是唯一`i`的观察。该调用为每个通过变量`reshape`提供了一个观察`n`-`id`组合。所以现在有 4*20=80 个观察值。然后我只保留你想保留的字符串。`var1``var20``inlist()`

对于第二个`reshape`调用`var`，指定您正在重塑的值在变量中`var`，并且您将使用它作为前缀。您希望每个剩余字母有一行，所以我创建了一个新索引（最终没有真正意义），它成为第二次调用的`i`索引（如果我使用-作为唯一观察，那么我们最终会回到哪里我们开始了，但只有好的琴弦）。索引从第一次调用（变量）开始保留，因此已经知道给每个 赋予什么后缀。`reshape``n``id``j``reshape``_j``reshape``var`

这两个`reshape`调用产生：

```
. list n id var1 var2 var3 var20

     +-------------------------------------+
     | n   id   var1   var2   var3   var20 |
     |-------------------------------------|
  1\. | 1    1      E                       |
  2\. | 2    1             A                |
  3\. | 2    1                            C |
  4\. | 3    2             F                |
  5\. | 3    2                    A         |
     |-------------------------------------|
  6\. | 4    8                            E |
     +-------------------------------------+ 
```

您可以轻松地添加回不存在两个`reshape`s 的变量。

```
* if you need to add back dropped variables
forvalues i =1/20 {
    capture confirm variable var`i'
    if _rc {
        generate var`i' = ""
    }
} 
```

# javascript - fancybox-overlay 显示两个元素

> ID：13161739
> 
> 赞同：-1
> 
> 时间：2012-10-31T15:46:27.850
> 
> 标签：javascript, jquery, fancybox

我需要帮助。我或多或少地在一个显示照片的花式框中尝试了，并在带有 facebook 评论社交插件的图片展示旁边。

在 fancybox 选项 Javascript 中，我有一个

```
$(".fancybox").fancybox({
 padding: 0,
    modal: true,
        helpers: {
        thumbs : {
                    width  : 50,
                    height : 50
                },
        buttons: {},

        },

    afterShow: function(){
        var descripcion = "<div class='texto1'><p>TEXTO1</p></div>"
        var comentarios = "<div class='texto2'><p>TEXTO2</p></div>;"
        $('#fancybox-overlay').append(comentarios);
        $('#fancybox-overlay').append(descripcion);

    },
    nextEffect: 'fade',
    prevEffect: 'fade'
}); 
```

问题是它不会让我一次显示两个东西的叠加层，只有一个或另一个......：S有任何解决方案，所以你可以同时显示？先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:56:29.923

注意语法错误......然后你可以创建一个包装器来将你的新文本插入到fancybox中，比方说

```
<div class='wrapText'></div> 
```

...有一些风格来正确定位它

```
.wrapText {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1100;
    color : #fff;
} 
```

`beforeShow`...然后使用回调将其添加到fancybox内容

```
$(".fancybox").fancybox({
    beforeShow: function () {
      var descripcion = "<div class='texto1'><p>TEXTO1</p></div>";
      var comentarios = "<div class='texto2'><p>TEXTO2</p></div>";
      $("<div class='wrapText'>" +descripcion+comentarios+ "</div>")
        .prependTo( this.inner );
    }
}); 
```

[看到它工作](http://jsfiddle.net/65B98/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:30:58.897

如果我清楚地了解您期望它做什么：

```
afterShow: function(){
    var descripcion = '<div class="texto1"><p>TEXTO1</p></div>';
    var comentarios = '<div class="texto2"><p>TEXTO2</p></div>';
    $('#fancybox-overlay').append(descripcion, comentarios);
} 
```

# javascript - 我该如何做到这一点，如果我单击一个元素，它会转到链接，但它不会触发其父元素的 .click() 事件？

> ID：13161742
> 
> 赞同：2
> 
> 时间：2012-10-31T15:46:31.500
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T15:47:13.863

您应该使用`e.stopPropagation()`来阻止事件冒泡。

> 防止事件在 DOM 树中冒泡，防止任何父处理程序收到事件通知。

~来自 jQuery 文档[**.stopPropagation**](http://api.jquery.com/event.stopPropagation/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T15:48:32.477

你必须使用`stopPropagation`而不是`preventDefault`

```
$('a').click(event){
     event.stopPropagation();
}); 
```

# emacs - AUCTeX 中的乳胶电动环境对模式

> ID：13161743
> 
> 赞同：3
> 
> 时间：2012-10-31T15:46:32.890
> 
> 标签：emacs, latex, elisp, auctex

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T01:50:24.333

您可能错过了`tex-env-mark`（设置稍后`latex-electric-env-pair-mode`用于查找环境启动器/结束器的标记）或`latex-syntax-propertize-rules`（`tex-env-marks`在缓冲区的相关部分上运行）或设置`syntax-propertize-function`（使用`latex-syntax-propertize-rules`以便实际使用这些规则）。

顺便说一句，我建议您尝试以下未经测试的代码，而不是复制这些东西：

```
(defconst my-latex-syntax-propertize-function
   (with-temp-buffer (latex-mode) syntax-propertize-function))

(add-hook 'LaTeX-mode-hook
          (lambda ()
            (set (make-local-variable 'syntax-propertize-function)
                 my-latex-syntax-propertize-function)
            (latex-electric-env-pair-mode 1))) 
```

# tfs - TFS 2010 Builds 中的“原因”属性发生了什么变化

> ID：13161746
> 
> 赞同：2
> 
> 时间：2012-10-31T15:46:44.463
> 
> 标签：tfs, msbuild, tfsbuild

当我们使用 TFS 2008 (SP1) 时，我们曾经能够访问“原因”MSBuild 属性，其中包含构建运行的原因。这在构建开始后就可用，因此不需要任务/目标来获取它。现在我们使用的是 TFS 2010（和 MSBuild/升级模板，而不是工作流）并且不再填充该属性。我可以编写一个自定义任务来从 IBuildDetail 检索信息，但是我的 MSBuild 脚本没有立即可用的属性吗？我曾经能够根据构建原因进行有条件的 MSBuild 脚本导入，如果我必须使用任务/目标来获取原因，这将不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:44:19.577

您仍在使用 MSBuild 脚本，因此我假设您使用的是升级模板。您可以克隆/编辑或修改升级模板，以便模板采用当前构建原因并通过**Run TfsBuild for Configuration Folder**活动将其传递给 MSBuild。在 Visual Studio 中打开模板进行编辑并执行以下操作：

选择**Run On Agent**活动并转至变量选项卡。创建一个新变量来存储构建原因并使用来自 IBuildDetail 的信息填充其默认值。将类似以下内容添加到变量列表中：

```
Name: currentBuildReason
Variable type: String
Scope: Run On Agent
Default: BuildDetail.Reason.ToString() 
```

接下来，单击**Run TfsBuild for Configuration Folder**活动的 Properties 对话框。选择**CommandLineArgument**省略号以打开将参数传递给 TFSBuild 的对话框。您可能只会看到列出的一个变量：

```
MSBuildArguments 
```

您现在可以将当前构建原因添加到命令行参数（并且仍然传递任何现有的 MSBuildArguments），类似于：

```
String.Format("/p:CurrentBuildReason={0} {1}", currentBuildReason, MSBuildArguments) 
```

单击确定关闭对话框。这会将当前构建原因作为名为 CurrentBuildReason 的新参数传递，并且可以在您的 MSBuild 脚本中以 $(CurrentBuildReason) 的形式引用。

保存并签入升级模板。将模板分配给构建定义。该定义使用的 MSBuild 脚本现在可以使用上述变量。

# java - 我必须将 Tomcat 连接池的 JDBC 驱动程序放在哪里？

> ID：13161747
> 
> 赞同：28
> 
> 时间：2012-10-31T15:46:44.337
> 
> 标签：java, tomcat, jdbc, connection-pooling

所以我已经弄清楚了我的错误，现在我只是在寻找一些关于到底发生了什么的见解。我正在使用 Apache Tomcat 版本 7.0.32。我正在使用[本教程](http://people.apache.org/~fhanik/jdbc-pool/jdbc-pool.html)为 JDBC 设置池。在我的 META-INF 文件夹中，我创建了一个 context.xml 文件并将其放入其中。

```
<?xml version="1.0" encoding="UTF-8"?>

<Context>
    <Resource type="javax.sql.DataSource" name="jdbc/gmustudent"
        factory="org.apache.tomcat.jdbc.pool.DataSourceFactory" 
        driverClassName="com.mysql.jdbc.Driver"
        url="jdbc:mysql://localhost:3306/official"
        username="root" password="root"
        maxActive="100" maxIdle="20" minIdle="15" initialSize="15" maxWait="10000" />
</Context> 
```

我写这篇文章时遇到了这个错误

```
WARNING: Unexpected exception resolving reference
java.sql.SQLException: com.mysql.jdbc.Driver
    at org.apache.tomcat.jdbc.pool.PooledConnection.connectUsingDriver(PooledConnection.java:254)
    at org.apache.tomcat.jdbc.pool.PooledConnection.connect(PooledConnection.java:182)
    at org.apache.tomcat.jdbc.pool.ConnectionPool.createConnection(ConnectionPool.java:699)
    at org.apache.tomcat.jdbc.pool.ConnectionPool.borrowConnection(ConnectionPool.java:631)
    at org.apache.tomcat.jdbc.pool.ConnectionPool.init(ConnectionPool.java:485)
    at org.apache.tomcat.jdbc.pool.ConnectionPool.<init>(ConnectionPool.java:143)
    at org.apache.tomcat.jdbc.pool.DataSourceProxy.pCreatePool(DataSourceProxy.java:116)
    at org.apache.tomcat.jdbc.pool.DataSourceProxy.createPool(DataSourceProxy.java:103)
    at org.apache.tomcat.jdbc.pool.DataSourceFactory.createDataSource(DataSourceFactory.java:539)
    at org.apache.tomcat.jdbc.pool.DataSourceFactory.getObjectInstance(DataSourceFactory.java:237)
    at org.apache.naming.factory.ResourceFactory.getObjectInstance(ResourceFactory.java:143)
    at javax.naming.spi.NamingManager.getObjectInstance(NamingManager.java:304)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:843)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:168)
    at org.apache.catalina.core.NamingContextListener.addResource(NamingContextListener.java:1061)
    at org.apache.catalina.core.NamingContextListener.createNamingContext(NamingContextListener.java:671)
    at org.apache.catalina.core.NamingContextListener.lifecycleEvent(NamingContextListener.java:270)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5173)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:247)
    at org.apache.tomcat.jdbc.pool.PooledConnection.connectUsingDriver(PooledConnection.java:246)
    ... 29 more
Oct 31, 2012 11:23:25 AM org.apache.catalina.core.NamingContextListener addResource
WARNING: Failed to register in JMX: javax.naming.NamingException: com.mysql.jdbc.Driver
Oct 31, 2012 11:23:25 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8086"]
Oct 31, 2012 11:23:25 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Oct 31, 2012 11:23:25 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 794 ms 
```

仅当我的 context.xml 文件中有此语句时，才会出现此错误。当我删除它没有错误。

```
factory="org.apache.tomcat.jdbc.pool.DataSourceFactory" 
```

我想确保我拥有它的原因是因为在 apache tomcat 教程中它说

```
factory is required, and the value should be org.apache.tomcat.jdbc.pool.DataSourceFactory 
```

所以后来我对 SO 做了一些研究，发现一个帖子说如果你有旧版本的 tomcat ，你需要[将此 jar添加到你的 lib 文件夹中。](http://people.apache.org/~fhanik/jdbc-pool/)所以我添加了 jar，现在它可以工作了，但我想了解一些关于到底发生了什么的信息，因为我使用的是最新的 tomcat 版本。那么为什么当我指定工厂时会出现错误。我要添加的这个 jar 是什么，为什么关于它的文档很少？任何有关这里发生的事情的信息将不胜感激。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-11-01T10:58:17.203

JDBC 驱动程序必须对与数据源工厂本身相同的类加载器可见。数据源工厂库放置在 Tomcat 自己的`/lib`文件夹中，因此由 Tomcat 的“通用”类加载器加载。

您的问题听起来很像您在 webapp 的`/WEB-INF/lib`. webapp`/WEB-INF/lib`对“通用”类加载器是不可见的。因此，从技术上讲，您必须将 JDBC 驱动程序放置在 Tomcat 自己的`/lib`文件夹中（或者至少放置在通过`common.loader`设置 in指定的可配置路径中`/conf/catalina.properties`），以使其对数据源工厂可见。

或者，正如您尝试的那样，将数据源工厂复制到其中`/WEB-INF/lib`也将修复它。在类加载中，webapp 的`/WEB-INF/lib`优先级高于 Tomcat 的`/lib`文件夹。因此，如果在 中找到数据源工厂`/WEB-INF/lib`，将从那里加载。由于 JDBC 驱动程序也在那里，它会被看到。然而，这不是解决您的具体问题的正确方法，这更像是一种解决方法，因此您不应该这样做。

没有专门针对此问题的文档。然而，[Tomcat 类加载器 HOW-TO](http://tomcat.apache.org/tomcat-7.0-doc/class-loader-howto.html)将有助于理解 Tomcat 中的类加载层次结构。

[![显示嵌套的 Tomcat 文件夹的屏幕截图](../Images/2a94e2c66360ec2cb77a1247c6195886.png)](https://i.stack.imgur.com/iNLWX.png)

### 也可以看看：

*   [臭名昭著的 java.sql.SQLException：找不到合适的驱动程序](https://stackoverflow.com/questions/1911253/the-infamous-java-sql-sqlexception-no-suitable-driver-found)
*   [我应该如何在基于 servlet 的应用程序中连接到 JDBC 数据库/数据源？](https://stackoverflow.com/questions/2299469/how-should-i-connect-to-jdbc-database-datasource-in-a-servlet-based-applicatio)
*   [在多线程系统中使用静态 java.sql.Connection 实例是否安全？](https://stackoverflow.com/questions/9428573/is-it-safe-to-use-a-static-java-sql-connection-instance-in-a-multithreaded-syste)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T18:56:24.233

我有同样的问题，你的解决方案对我不起作用。我必须将“mysql-connector-java-5.1.30-bin.jar”文件添加到我的 lib 文件夹中才能正常工作，因为我使用的是该驱动程序 :) 干杯。

# c# - 使用没有类型的 FileHelpers

> ID：13161749
> 
> 赞同：6
> 
> 时间：2012-10-31T15:46:49.937
> 
> 标签：c#, csv, filehelpers

我有一个 CSV 文件正在从另一个系统导出，其中列顺序和定义可能会更改。我发现 FileHelpers 非常适合读取 csv 文件，但除非您在编译应用程序之前知道列的顺序，否则您似乎无法使用它。我想知道是否可以以非类型化方式使用 FileHelpers。目前我正在使用它来读取文件，但是我正在手动执行其他所有操作，所以我有一个类：

```
[DelimitedRecord(",")]
public class CSVRow
{
    public string Content { get; set; }
} 
```

这意味着每一行都在 内`Content`，这很好，因为我已经拆分了行等，但是由于文件中固有的逗号，我现在遇到了这种方法的问题，所以一行可能是：

```
"something",,,,0,,1,,"something else","","",,,"something, else" 
```

我对这个字符串上的逗号的简单拆分不起作用，因为“something, else”中有一个逗号会被拆分。显然，这里是像 FileHelpers 这样的东西真正派上用场的地方，解析这些值并考虑引号。那么是否有可能以这种方式使用 FileHelpers，而无需已知的列定义，或者至少能够将其传递给 csv 字符串并返回值列表，或者是否有任何好的库可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T15:55:48.987

如果您知道（或可以推断）运行时列的顺序和定义，则可以使用[FileHelpers 的 RunTime 记录。](https://www.filehelpers.net/docs/html/N_FileHelpers_Dynamic.htm)

否则，有很多关于 CSV 库的问题，例如[Reading CSV files in C#](https://stackoverflow.com/questions/1544721/reading-csv-files-in-c-sharp)

编辑：更新的链接。原件存档[在这里](https://web.archive.org/web/20150601025454/http://www.filehelpers.com/runtime_classes.html)

# facebook - Facebook 应用程序（静态 HTML）

> ID：13161751
> 
> 赞同：0
> 
> 时间：2012-10-31T15:46:55.040
> 
> 标签：facebook

我正在尝试使用静态 HTML 应用程序在 facebook 上创建一个登录页面，但该图像不会出现在 IE8 中，仅在 9 和其他浏览器（如 Chrome 和 Firefox）中显示。

申请链接为：[https](https://www.facebook.com/hyundainic/app_128953167177144) ://www.facebook.com/hyundainic/app_128953167177144 。

另一个看起来像这样的应用程序： [https](https://www.facebook.com/SomosEskimo/app_367456286664440) ://www.facebook.com/SomosEskimo/app_367456286664440 。

这如果显示在所有浏览器中，除了技术上我不知道它是否相同。

我正在编辑html / css并占据绝对和相对定位，我认为这可能会影响并删除它，但问题永远存在。

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:58:52.107

我认为问题可能是您使用的是绝对的非 SSL URL 作为图像源，并且您发布到应用程序的链接使用 SSL。如果您关闭协议（例如：“//whatever.com/myimage.jpg”而不是“http://whatever”或“https://whatever”），浏览器将在需要时使用 https。

但是，您的图像似乎无法通过 SSL 工作：

```
https://hyundai.com.ni/img/quickservice-fb.jpg?id=3 
```

您可以尝试使用 http:// 查看您的应用程序，并确认它在所有目标浏览器中都显示正常，看看这是否真的是您的问题。

# java - 杰克逊：如何反序列化 JSON 数组中的空元素

> ID：13161752
> 
> 赞同：1
> 
> 时间：2012-10-31T15:46:58.240
> 
> 标签：java, json, jackson, deserialization, pojo

**编辑：**应你们中的一些人的要求，我发布了我的真实数据结构和类。我未能让您更容易理解问题。

我在解决杰克逊`null`JSON 数组元素时遇到了问题，最后出现了一个异常，我将在本文后面报告。

我有一个来自第 3 方提供商的冗长 JSON 字符串：

```
[
  null,
  null,
  [
    {
      "t" : {
        "id" : 0,
        "it" : "Attuazione"
      },
      "c" : "DM.10.0.2",
      "l" : "Macro 2",
      "v0" : 0,
      "scid" : "1",
      "m" : "10",
      "sam" : 0,
      "v1" : 100,
      "smcm" : true,
      "w" : "OD.10.4",
      "st" : {
        "auto_formula" : {
          "ia" : "($x > 0 ? 1 : 0)",
          "id" : "($x > 0 ? 1 : 0)",
          "bit" : "($x > 0 ? 1 : 0)",
          "oa" : "($x > 0 ? 1 : 0)",
          "od" : "($x > 0 ? 1 : 0)",
          "dm" : "($x > 0 ? 1 : 0)"
        },
        "id" : 0,
        "css_rule" : "containerTypeOnOff",
        "default_measure_unit" : null,
        "it" : "On \/ Off",
        "widget" : {
          "id" : 0,
          "caption" : {
            "it" : "Etichetta di testo"
          }
        }
      }
    }
  ],
  null,
  null,
  null,
  null,
  null
] 
```

我的 Java 类合奏如下。

这是最外面的容器：

```
public class TinyMap {
    ArrayList<TinyMapModule> modules;

    public TinyMap() { ...  }

    public ArrayList<TinyMapModule> getModules() { ... }

    /**
     * @param modules the modules to set
     */
    @SuppressWarnings("unchecked")
    public void setModules(ArrayList<TinyMapModule> modules) { ... }

    public void appendNewMacro(TinyMapModule m) { ... }

} 
```

这是一级容器：

```
public class TinyMapModule {
    private ArrayList<TinyMapMacro> macros;

    /**
     * C'tor 
     */
    public TinyMapModule() { ... }

    /**
     * @return ArrayList<TinyMapMacro> 
     */
    public ArrayList<TinyMapMacro> getMacros() { ... }

    /**
     * @param macros the macros to set
     */
    @SuppressWarnings("unchecked")
    public void setMacros(ArrayList<TinyMapMacro> macros) { ... }

} 
```

这是最内层：

```
public class TinyMapMacro {
    private String c; 
    private String l;
    private String m;
    private MacroType t;
    private String w;

    private static Logger logger;

    static {
        logger = Logger.getLogger(TinyMapMacro.class);
        DOMConfigurator.configure("log4j.xml");
    }

    /**
     * C'tor 
     */
    public TinyMapMacro() { ... }

    public static class MacroType {
        private int id;
        private String it; // Italian

        public int getId() { ... }
        public void setId(int id) { ... }
        public String getIt() { ... }
        public void setIt(String it) { ... }
    }

    public String getC() { ... }

    public void setC(String c) { ... }

    public String getL() { ... }

    public void setL(String l) { ... }

    public String getM() { ... }

    public void setM(String m) { ... }

    public MacroType getT() { ... }

    public void setT(MacroType t) { ... }

    public String getW() { ... }

    public void setW(String w) { ... }

    public int getTypeId() { ... }

    public String getLocalizedTypeString() { ... }

} 
```

最后，这是我的反序列化代码：

```
ObjectMapper mapper = new ObjectMapper();
mapper.disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES);
mapper.disable(DeserializationFeature.FAIL_ON_NULL_FOR_PRIMITIVES);
ObjectReader reader = mapper.reader(TinyMapModule.class);
try {
    logger.info("Instantiating ObjectMapper");
    TinyMap tm = new TinyMap();
    tm.buildTinyMap(reader.readValues(jsonString.replaceAll("null", "[{\"name\":\"\"}]")));
    for (int i = 0; i < tm.getModules().size(); i++) {
        if (tm.getModules().get(i) == null) 
            continue;
        for (int j = 0; j < tm.getModules().get(i).getMacros().size(); j++) {
            if (tm.getModules().get(i).getMacros().get(j) == null) 
                continue;
            System.out.println(String.format("c: %s", tm.getModules().get(i).getMacros().get(i).getC()));
            System.out.println(String.format("l: %s", tm.getModules().get(i).getMacros().get(i).getL()));
            System.out.println(String.format("m: %s", tm.getModules().get(i).getMacros().get(i).getM()));
            System.out.println(String.format("t.id: %d", tm.getModules().get(i).getMacros().get(i).getTypeId()));
            System.out.println(String.format("t.it: %s", tm.getModules().get(i).getMacros().get(i).getLocalizedTypeString()));
            System.out.println(String.format("w: %s", tm.getModules().get(i).getMacros().get(i).getW()));
        }
    }
    logger.info("Execution terminated");
} 
... 
```

在极端综合中，我试图将问题图解如下：

1.  `TinyMap`类有一个模块成员，它是`ArrayList`一个`TinyMapModule`对象
2.  `TinyMapModule`类有一个宏成员，它是`ArrayList`一个`TinyMapMacro`对象
3.  `TinyMapMacro`类映射具有我严格需要的唯一属性的对象。

现在，当我尝试将上面的 JSON 字符串反序列化到我的对象中时，我收到一个异常，告诉我 JSON 无法反序列化：

```
Exception in thread "main" com.fasterxml.jackson.databind.RuntimeJsonMappingException: Can not deserialize instance of it.asystelsrl.hcsbridge.communication.TinyMapModule out of START_ARRAY token
 at [Source: java.io.StringReader@3c50507; line: 1, column: 2]
    at com.fasterxml.jackson.databind.MappingIterator.next(MappingIterator.java:122)
    at it.asystelsrl.hcsbridge.communication.TinyMap.buildTinyMap(TinyMap.java:47)
    at it.asystelsrl.hcsbridge.tests.TestTinyMap.main(TestTinyMap.java:69)
Caused by: com.fasterxml.jackson.databind.JsonMappingException: Can not deserialize instance of it.asystelsrl.hcsbridge.communication.TinyMapModule out of START_ARRAY token
 at [Source: java.io.StringReader@3c50507; line: 1, column: 2]
    at com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:164)
    at com.fasterxml.jackson.databind.DeserializationContext.mappingException(DeserializationContext.java:599)
    at com.fasterxml.jackson.databind.DeserializationContext.mappingException(DeserializationContext.java:593)
    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromArray(BeanDeserializer.java:531)
    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:141)
    at com.fasterxml.jackson.databind.MappingIterator.nextValue(MappingIterator.java:188)
    at com.fasterxml.jackson.databind.MappingIterator.next(MappingIterator.java:120)
    ... 2 more 
```

我已经阅读了很多关于 Jackson 注释、自定义反序列化器等的信息，但我似乎想出的唯一解决方案是将`TinyMap.modules`成员 from转换`ArrayList<TinyMapModules>`为`ArrayList<Object>`并使用自定义反序列化器来处理 NullType 对象。

通过这种选择（如果可行，因为我还没有测试过）我会失去`TinyMap.modules`成员的语义价值，我不会被迫这样做。

还有其他方法可以解决空元素问题吗？

编辑：

重要的是我可以在这个结构中保留非空对象的序数位置，所以我绝对应该至少用可用作占位符的东西替换空元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:30:27.190

这里的问题是我在使用杰克逊时造成了很多混乱。

[阅读ProgrammerBruce 的这篇文章后，](http://programmerbruce.blogspot.co.uk/2011/05/deserialize-json-with-jackson-into.html)我开始理解它。

正如 StaxMan 在他的评论中所建议的那样，我试图将 Collection 反序列化为它不是的东西。

感谢 ProgrammerBruce 的有用而清晰的文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T19:27:52.083

您仍然只`theBeans`在示例 JSON 中显示属性，而不是完整`MyContainer`对象。而且您的错误听起来好像实际上是在尝试将给定的 JSON 解析为`MyContainer`.

可以肯定的是，您可以发布完整的 JSON 对象和您的反序列化代码吗？

杰克逊很好地理解空 POJO。

# c++ - 在 C++ 中使用正则表达式解析文本树

> ID：13161762
> 
> 赞同：0
> 
> 时间：2012-10-31T15:47:36.757
> 
> 标签：c++, regex

请帮忙！我需要创建代码/正则表达式以将以下文本解析为树：

```
some text I want to ignore==toplevel==
some text, with newlines maybe

===nextlevel===
more text. This is a child node of 'toplevel'

===anotherchild===
this is a sibling of 'nextlevel' and a child of 'toplevel'====leaf====
this is a child of 'anotherchild'
====leaf2====
sibling of 'leaf' & child of 'anotherchild'

===child3===
this is a sibling of 'anotherchild' and 'nextlevel' and a child of 'toplevel' 
```

等等。你明白了。

我无法阻止子级别与顶层匹配。我试过 ={2} 但 === 和 ==== 仍然匹配。只需获得一个匹配 '==toplevel==' 之后的所有文本的匹配将是一个开始。我似乎无法忽略/吃掉换行符。

非常感谢任何帮助！查理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:49:14.087

只需匹配所有`=+(name)=+`字符串，然后计算代码*中 = 的数量。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:53:39.813

以下正则表达式将匹配第一行：“^==[^=]”。也就是说，一行以两个等号开头，后面跟着一个不是等号的东西。您可以对其他级别使用类似的模式。

换行跳过/处理实际上取决于您阅读文本的方式。如果可能的话，我会在输入例程中处理换行符，而不是尝试将它们与正则表达式匹配。

# c - C初学者，指针和取消引用

> ID：13161763
> 
> 赞同：2
> 
> 时间：2012-10-31T15:47:40.500
> 
> 标签：c, pointers, dereference

我试图理解 C 中的整个指针和取消引用的东西。我几乎明白了，但遇到了非常简单的代码，结果我不明白：

```
char *ptr = "Characters";
char val = *ptr;
char *chrptr = &val;
printf("Value under character pointer is: %p / %c\n", &val, val);
printf("Dereferenced character pointer: %p\n", chrptr);
printf("Array pointer: %p\n", ptr); 
```

现在，正如我在执行之前所理解的那样`ptr == chrptr == &val`，但实际上`ptr != chrptr == &val`。为什么是这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T15:50:40.117

```
char *ptr = "Characters"; // returns a pointer to 'C'
char val = *ptr; // dereferences the pointer to 'C' and copies 'C' into val 
```

*val*有自己的内存位置，所以***val*****的地址会不一样**

 *```
 char *chrptr = &val; //chptr points to val. A different memory location. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T16:08:49.963

```
char *ptr = "Characters";

       +---+---+---+---+---+---+---+---+---+---+----+ 
ptr -> | C | h | a | r | a | c | t | e | r | s | \0 |
       +---+---+---+---+---+---+---+---+---+---+----+ 

char val = *ptr; // you copy 'C' by value from the array, ptr is still pointing 
                 // where it originally pointed

// &val is somewhere else in memory so

char *chrptr = &val;

          +---+ 
chrptr -> | C |
          +---+ 
```

如果你想要 chrptr 点 ptr 点然后写

```
char* chrptr = ptr; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T15:49:47.923

当您分配给 a`char`时，会生成一个副本。因此，该副本的地址将不等于原始字符串。

相反，当您分配给指针时，您分配的是原始字符串的地址（或任何它的指针）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T15:50:49.363

```
ptr == chrptr == &val 
```

只有`chrptr == &val`部分是正确的，但是`ptr != chrptr`。这是因为`val`它是的第一个字符的*副本*`ptr`，即`'C'`。副本存储在与原始不同的位置，因此其在内存中的地址不同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T15:51:52.967

字符串“Characters”被编译器定位在一个内存区域，而变量“val”（等于'C'）位于另一个内存区域。这就是 &val 不等于“ptr”的原因。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T15:51:55.050

别介意所有的间接变量和局部变量，但你的问题归结为与这个相同：

```
int a = 1;
int b = 1; 
```

两者`a`和`b`具有相同的值，但它们显然是不同的对象，因此它们具有不同的地址。`val`和也是如此 `ptr[0]`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-31T15:59:00.943

您的代码执行以下操作。

```
char *ptr = "Characters"; //- Store "Characters" in read only data section and assign the address to variable to `ptr`.

char val = *ptr; //- Assign the value 'C' (i.e 67) to stack variable val.

char *chrptr = &val; //- Assign the address of variable val to chrptr 
```

这`val`是一个堆栈变量，因此它的地址将在堆栈地址范围内。但是字符串文字存储在只读数据部分中。而且只有 ptr 持有那个地址。

很明显`&val`和`ptr`是两个不同的地址。*

# c# - 允许在复合控件中进行 GridView 排序

> ID：13161767
> 
> 赞同：1
> 
> 时间：2012-10-31T15:47:53.183
> 
> 标签：c#, asp.net, gridview, composite-controls

我不知道如何在我的复合控件中动态创建的 GridView 中启用排序。当然，我尝试将 GridView 的 AllowSorting 属性设置为“true”，但它不允许排序功能（标题中没有可以单击的链接按钮）。AllowPaging 属性工作得很好。

任何想法如何解决这个问题？

```
protected override void OnInit(EventArgs e)
    {
        innerGridView.AutoGenerateColumns = false;
        innerGridView.AllowSorting = true;
        innerGridView.AllowPaging = true;
        innerGridView.PageSize = 2;

        base.OnInit(e);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:05:35.997

我认为唯一可见的问题是，GridView HeaderRow 中没有生成 LinkBut​​ton。所以我通过将 onclick 属性设置为 HeaderRow 中的每个单元格来绕过它。

```
protected override void Render(HtmlTextWriter writer)
    {
        if (innerGridView.HeaderRow != null)
        {
            for (int i = 0; i < innerGridView.HeaderRow.Cells.Count; i++)
            {
                innerGridView.HeaderRow.Cells[i].Attributes["onclick"] =
                    Page.ClientScript.GetPostBackClientHyperlink(innerGridView, "Sort$" + InnerGridViewDataTable.Columns[i].Caption, true);
            }
        }

        base.Render(writer);
    } 
```

现在我可以点击标题和排序工作。当然，如果有人能提供更好的解决方案，我会很高兴。

# r - R奇怪的应用返回

> ID：13161770
> 
> 赞同：0
> 
> 时间：2012-10-31T15:47:55.267
> 
> 标签：r

我使用 apply 到一个矩阵，以便逐行应用一个函数。我的语法如下：

```
res = apply(X,1,MyFunc) 
```

上面的函数 MyFunc 返回一个包含两个值的列表。但是这个应用程序的结果是一个奇怪的结构，其中 R 似乎添加了一些自己的（内务管理？）数据：

```
res = $`81`
$`81`$a
[1] 80.8078

$`81`$b
[1] 6247 
```

而我等待的结果很简单：

```
res = $a
[1] 80.8078

$b
[1] 6247 
```

我不知道为什么`81`R 会插入这个奇怪的东西，我该如何摆脱它。感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T16:06:49.837

这是完全正常的行为。您正在对具有命名行的矩阵应用函数。您的函数为每一行返回一个列表，并且这个新列表列表中的每个元素都以相应的行名命名。

这是一个重现您所描述内容的示例：

```
x <- matrix(1:4, nrow=2)
rownames(x) <- 80:81

myFunc <- function(x)list(a=1, b=2)

xx <- apply(x, 1, myFunc)
xx 
```

这将返回：

```
$`80`
$`80`$a
[1] 1

$`80`$b
[1] 2

$`81`
$`81`$a
[1] 1

$`81`$b
[1] 2 
```

看一下这个列表的结构：

```
str(xx)
List of 2
 $ 80:List of 2
  ..$ a: num 1
  ..$ b: num 2
 $ 81:List of 2
  ..$ a: num 1
  ..$ b: num 2 
```

要索引第一个元素，只需使用`xx[[1]]`：

```
xx[[1]]
$a
[1] 1

$b
[1] 2 
```

* * *

这是您可能想要的猜测......如果您返回一个向量，而不是返回一个列表，那么结果`apply`将是一个矩阵：

```
myFunc <- function(x)c(a=1, b=2)
apply(x, 1, myFunc)
  80 81
a  1  1
b  2  2 
```

* * *

要获得没有名称的特定行，请执行以下操作：

```
unname(xx[2, ])
[1] 2 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:10:10.407

了解您的矩阵 ( `X`) 的样子会有所帮助。让我们尝试这样的事情：

```
mf <- function(x) list(a=sum(x),b=prod(x))
mat <- matrix(1:6,nrow=2) 
```

然后：

```
> apply(mat,1,mf)
[[1]]
[[1]]$a
[1] 9

[[1]]$b
[1] 15

[[2]]
[[2]]$a
[1] 12

[[2]]$b
[1] 48 
```

您需要第一个下标来区分每行将生成的列表。我怀疑您的行名已编号，这导致`$`81``您看到的是。

# silverlight - SL40PropertyGrid 按钮属性

> ID：13161773
> 
> 赞同：1
> 
> 时间：2012-10-31T15:48:03.653
> 
> 标签：silverlight, propertygrid

我正在使用 Silverlight 属性网格 ( [http://slg40.codeplex.com/](http://slg40.codeplex.com/) )。我想把“按钮”作为这个网格中的属性，并实现这个按钮的“点击”功能。

主要任务是：有对象的工作区（模式），对象的属性显示在网格中，一些对象有自己的模式作为属性。单击按钮时，我想在网格中显示它。

现在只有简单的类型可以显示在网格中。如果我添加复杂类型，它会显示“ToString()”和小按钮的结果。顺便说一句，这可能是一个解决方案，但我无法覆盖单击此按钮。

也许有人已经解决了这样的任务？

# layout - 如何在 Alfresco 4.0.2 中添加新的站点仪表板布局？

> ID：13161778
> 
> 赞同：1
> 
> 时间：2012-10-31T15:48:16.160
> 
> 标签：layout, alfresco, dashboard, alfresco-share

我希望创建新的站点仪表板布局（一个全宽行，第二行有两个相等的列），并且我希望将这些更改应用于 Alfresco 4.0.2 上的所有现有用户。

我怎样才能做到这一点？

先感谢您。

最好的，

D

# vb.net - 有没有办法以编程方式获取 Outlook 插件的电子邮件地址？

> ID：13161790
> 
> 赞同：0
> 
> 时间：2012-10-31T15:48:46.553
> 
> 标签：vb.net, com-interop, outlook-addin

正如标题所说，我希望能够获得我自己或插件用户的电子邮件地址，并将其存储在字符串变量中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:46:59.450

看看这个

[http://www.c-sharpcorner.com/UploadFile/hirendra_singh/accessing-outlook-contacts-list-in-C-Sharp/](http://www.c-sharpcorner.com/UploadFile/hirendra_singh/accessing-outlook-contacts-list-in-C-Sharp/)

它在c#中，但应该可以帮助你！

# ruby-on-rails - 安装 Carrierwave 时未保存 Rails / 图像

> ID：13161791
> 
> 赞同：0
> 
> 时间：2012-10-31T15:48:47.897
> 
> 标签：ruby-on-rails, database, image, carrierwave, rails-engines

我正在使用 Carrierwave 插件上传图片。它工作正常，但如果我尝试使用从控制器保存图像

```
Article.create(:image => 'sample.png') 
```

只要安装了载波，它就不会保存图像，如果我卸载 Rails 会像平常一样保存图像。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:59:10.933

我就是这样做的，它至少在我的种子中起作用：

```
Article.create(:image => File.open(Rails.root.join("app", "assets", "images", "sample.png")) 
```

如您所见，请确保提供文件的完整路径。显式打开文件也可能有所帮助。

# sql-server - 在多列主键的第一列上定义索引是否多余？

> ID：13161795
> 
> 赞同：3
> 
> 时间：2012-10-31T15:49:00.543
> 
> 标签：sql-server, indexing

在多列主键的第一个字段上添加单独的单列索引是否多余？与表的大小相比，它是否取决于第一列中唯一值的相对数量？

我的具体情况是，我正在构建几个具有两列和三列主键的中等大小的表（20k - 500k 行）。这些表中的第一列是一个整数，对应于某个业务活动（在这里我将其称为“活动”），第二列是产品 ID（实际上是 UPC）或业务位置标识符：

```
-- Activity - upc table: entire table is a two-column primary key
CREATE TABLE activity_upc (
    activity_id int NOT NULL,
    upc_id dec(18,0) NOT NULL,
    CONSTRAINT PRIMARY KEY PK_activity_upc CLUSTERED ( activity_id, upc_id )
) 

-- One of several transaction tables, unique by activity, location, and date
-- (date in SQL server is a 3-byte integer)
CREATE TABLE activity_stuff (
    activity_id int NOT NULL,
    location_id smallint NOT NULL,
    transaction_date date NOT NULL,
    [ other columns ],
    CONSTRAINT PRIMARY KEY PK_activity_stuff CLUSTERED ( 
        activity_id, location_id, transaction_date )
) 
```

有数百个唯一位置 ID、数千个唯一活动 ID 和超过一百万个唯一 UPC。我在 上有一个索引，`location_id`因为它非常频繁地通过`location_id`. **在activity_id上添加一个单独的索引是否有帮助，或者是愚蠢和多余的，它也经常用作单列过滤器？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:52:10.003

这是多余的。`explain`您可以通过添加/删除索引和比较结果轻松检查它。另一方面，对于复合键中的第二列，附加索引会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:04:15.430

是的，基于左的索引键子集通常是多余的。

您还可以组合包含列。包含列的顺序无关紧要。

**例如：**

索引 1 - F、W、B 列

索引 2 - F、W 列；包括 X

索引 3 - F 列；包括 E

**解决方案：**

删除索引 1、2 和 3

新索引 4 - 列、F、W、B；包括 E、X

# c++ - 获取级联触摸事件的目标不起作用

> ID：13161796
> 
> 赞同：2
> 
> 时间：2012-10-31T15:49:00.717
> 
> 标签：c++, qt, qml, touch-event, blackberry-10

我在尝试从 BB10 级联 API 达到触摸事件的目标时遇到问题。我有几个容器，一个在另一个下面，每个容器都分配了相同的触摸信号和插槽。一切都是从 C++ 动态加载的。所以，为了捕捉每个触摸事件，我需要知道哪个容器触发了该事件。我读过我只需要使用 TouchEvent 中的 TARGET 属性，但它不起作用，我不知道为什么。所以我在寻求帮助

这是我的代码：

```
for (int i = 0; i < 10; i++) {
    QmlDocument *qml = QmlDocument::create("asset:///customComponents/TableRow.qml").parent(this);

    Container *passivesRow = qml->createRootObject<Container>();
    passivesRow->setProperty("labelTextOne", "Hello_" + i);

    bool res = QObject::connect(passivesRow,         
        SIGNAL(touch(bb::cascades::TouchEvent*)), this,
        SLOT(handleAccountTouch(bb::cascades::TouchEvent*)));

    Q_ASSERT(res);
    Q_UNUSED(res);

    myCurrentPageContainer->add(passivesScroll);
}

void PosicionConsolidada::handleAccountTouch(bb::cascades::TouchEvent* event) {
    if (event->touchType() == TouchType::Up) {
        qDebug() << "event catched";

        VisualNode *p = event->target();
        qDebug() << "object p: " << p->property("labelTextOne"); //Print nothing
    }
} 
```

其他一切工作正常。我的容器列表正在使用它们各自的文本创建得很好。当我单击其中一个时，事件被成功捕获。我还尝试将 VisualNode 对象强制转换为 Container，但它也不起作用。请帮忙！。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:24:57.047

我会建议您使用我之前使用的替代方法。您可以像这样设置控件的 objectName：

```
passiveRow->setObjectName("Hello_" + i");

QObject::connect(passiveRow, SIGNAL(touch(bb::cascades::TouchEvent*)), this,
        SLOT(handleAccountTouch(bb::cascades::TouchEvent*))); 
```

& 在 SLOT 中使用它你可以知道哪个控件发出了信号：

```
if (event->touchType() == TouchType::Up) {
    qDebug() << "object: " << QObject::sender()->objectName();
} 
```

在这里，sender() 返回发出信号的控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:06:53.490

在 API 参考中，容器没有[onTouch 信号](https://developer.blackberry.com/cascades/reference/bb__cascades__container.html)。

[与CustomControl](https://developer.blackberry.com/cascades/reference/bb__cascades__control.html)等其他元素相反

我不知道您的信号是如何成功连接到您的插槽的，但我猜它是从容器内的另一个组件传播的。所以目标可能是一个标签或它里面的其他东西。

# http - 请求中缺少参数的 HTTP 响应状态码

> ID：13161797
> 
> 赞同：0
> 
> 时间：2012-10-31T15:49:01.043
> 
> 标签：http

我有一个 URI，可以通过 POST 获得。
它*需要*4 个 POST 参数。

如果用户没有向我传递所有必需的参数，我应该使用什么 HTTP 响应状态代码？

406？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:01:10.993

你最好使用 400 而不是 406：

> 406 Not Acceptable 请求的资源只能生成根据请求中发送的 Accept 标头不可接受的内容。 [2
> 
> 400 Bad Request 由于语法错误，请求无法完成。[2]

[HTTP 状态码列表](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)

此外，您可以生成一个`Exception`更好的，因为您可以编写一个自定义错误来指示请求有什么问题。

# ruby-on-rails - 获取最终 state_machine 状态列表

> ID：13161802
> 
> 赞同：2
> 
> 时间：2012-10-31T15:49:29.470
> 
> 标签：ruby-on-rails, ruby, state-machine

StateMachine 库中有一个方法[可以获取状态列表](https://stackoverflow.com/questions/4138437/get-list-of-state-machine-states)：

```
ModelName.state_machines[:name_of_state].states.map &:name 
```

或者

```
ModelName.state_machines.states.map &:name 
```

当包含状态的属性名称是默认的“状态”时。

但是，我想知道是否有办法找到最终的状态机，因为如果你用

```
rake state_machine:draw FILE=model.rb CLASS=ModelName 
```

最后的状态是双圈的。乍一看，我无法从 rake 任务的来源中获得它。

获取初始状态似乎很容易：

```
ModelName.state_machines[:name_of_state].states.select(&:initial).map(&:name) 
```

**更新**：

哦，德拉斯！这很简单：

```
ModelName.state_machines[:name_of_state].states.select(&:final?).map(&:name) 
```

留给未来的 Google 员工！

# java - 使这个模板类成为一个泛型类

> ID：13161804
> 
> 赞同：3
> 
> 时间：2012-10-31T15:49:42.323
> 
> 标签：java, generics, template-classes

所以我是一个大学生只是想寻求一点帮助和理解，我有一个教授不允许我们使用java预写的类如ArrayList，所以我想弄清楚如何修改我当前封装的数组类使用泛型，这样我就不必在我的程序的应用程序类中做太多的转换

```
public class ArrayClass {
    private Object[]  objArray;
    private int index = 0;
    public static final int MAX_SIZE = 100;

    public ArrayClass(){
        objArray = new Object[100];
    }

    public ArrayClass(int numSlots){
        objArray = new Object[numSlots];
    }
    public ArrayClass(Object[] anArray, int newIndex){
        objArray = new Object[newIndex];
        for(int i=0; i<newIndex; i++){
            objArray[i] = anArray[i];
        }
        index = newIndex;
    }

    //return object array, accessor
    public Object[] getstrArr(){
        return objArray;
    }
    //return # of actual data in array, accessor
    public int getIndex(){
        return index;
    }
    //return an object at given pos, accesor
    public Object getObject(int pos){
        return objArray[pos];
    }

    //assign a new object array, mutator
    public void setObjArr(Object[] aStrArr){
        for(int i=0; i<index; i++){
            objArray[i] = aStrArr[i];
        }
    }
    //assign a new index, mutator
    public void setIndex(int anIndex){
        index = anIndex;
    }
    //insert a new string into the array if there is room, increment index
    public void add(Object someObj){
        if(index < objArray.length){
            objArray[index] = someObj;
            index++;
        }
    }

    //return the string with contents of array
    public String toString(){
        String output = " ";
        for(int i=0; i<index; i++){
            output = output + objArray[i].toString();
        }
        return output;
    }

    //return true if calling object is equivalent to argument
    public boolean equals(Object someObj){
        for(int i=0; i< index; i++){
            if(objArray[i].equals(someObj))
                return true;
        }
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T15:52:05.510

```
public class ArrayClass<E> {

// return object array, accessor
public <T> T[] getstrArr(T[] t) {<--This is done because arrays are covarant in nature    
       return (T[]) Arrays.copyOf(objArray, index, t.getClass());
    }

 // return an object at given pos, accesor
public E getObject(int pos) {<-- For single elements just return E with casting
    return (E) objArray[pos];
} 
```

实施说明

1.  长度检查应`Arrays.copy`考虑
2.  你可以阅读一篇关于[泛型的好文章](http://docs.oracle.com/javase/tutorial/java/generics/types.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:47:38.727

好吧，我不会使用 setIndex 等方法公开您的索引。也不会添加空元素检查。

无论如何，我会做类似的事情：

```
public class ArrayClass<E> {
    ...
    private E[] elements;
    private int index;
    ...
    public ArrayClass() {
        this.elements = (E[]) new Object[MAX_SIZE];
        this.index = 0;
    }
    // this constructor substitutes the method setObjArr
    public ArrayClass(E[] elements) {
        this.elements = elements;
        this.index = elements.length;
    }
    ...
    public void add(E element) {
        if (needsToGrow()) {
            duplicateArraySize();
        }
        this.elements[index++] = element;
    }
    private boolean needsToGrow() {
        return index + 1 == elements.length;
    }
    private void duplicateArraySize() {
        E[] extendedArray = (E[]) new Object[this.elements.length * 2];
        System.arraycopy(elements, 0, extendedArray, 0, elements.length);
        this.elements = extendedArray;
    }
    public E get(int index) {
        return this.elements[index];
    }
    public int size() {
        return this.index;
    }
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T16:30:30.780

我会这样做：

```
public class ArrayClass<T> {
  public T[] objArray;
  private int index = 0;
  public static final int MAX_SIZE = 100;

  @SuppressWarnings("unchecked")
  public ArrayClass(Class<T> c) {
    objArray = (T[]) Array.newInstance(c,MAX_SIZE);
  }
} 
```

等等。

接着：

```
ArrayClass<String> myStringArray = new ArrayClass<String>(String.class); 
```

# java - JMS 主题队列大小始终为 0

> ID：13161807
> 
> 赞同：0
> 
> 时间：2012-10-31T15:49:48.287
> 
> 标签：java, jms, activemq, geronimo

如果我将一堆消息发布到订阅者非常慢的主题。geronimos“JMS 资源”选项卡中的“队列大小”保持为 0。如果我使用 JMS 队列而不是主题，我可以看到大小在增长。在这两种情况下，所有消息都会被传递。

为什么主题的“Queue Size”总是显示为0？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T21:42:37.443

主题代表发布-订阅模型，当没有订阅者收听时，消息将消失。因此，对主题​​大小的查询始终为零。

主题可以有多个订阅者，因此可以在多个“侦听”该主题的客户端上读取消息。

另一方面，队列将保留消息，直到客户端请求下一条消息。在这里可以查询当前持有的消息量大小。一条消息只能由一个客户端接收。

另请参阅 Oracle 的[基本 JMS API 概念](http://docs.oracle.com/javaee/6/tutorial/doc/bncdx.html)。

针对理想情况进行描述，此处不考虑持久主题以及临时队列。

# python - Flask Python REST API 在接收 POST 时设置可选的 JSON 参数

> ID：13161811
> 
> 赞同：1
> 
> 时间：2012-10-31T15:50:16.950
> 
> 标签：python, json, api, rest, flask

我正在使用 Flask 构建一个 REST API，它将照片添加到数据库中。数据库抽象为 PhotoModel 类。API 接收 JSON 格式的 HTTP POST，其中包含 bin 字符串中的图片和名称，所有其他参数都是可选的。

如果发布的 JSON 中不存在某些参数，如何构造“照片”对象？在数据库模型（PhotoModel）上，我只指定了两个强制性项目，因此只考虑 JSON 中存在的参数的逻辑应该在下面的函数中。

```
def add_photo():
"""Add photo to database"""
if request.method == 'POST' and request.headers['Content-Type'] == 'application/json':
    photo = PhotoModel(
        name = request.json['name'],
        device_version = request.json['device_version'],
        date = request.json['date'],
        picture = request.json['picture'],
        comment = request.json['comment']
    )
    try:
        photo.put()
        return "200"
    except CapabilityDisabledError:
        return "500 DB read-only"
else:
    return "415 Unsupported Media Type" 
```

我不知道该怎么做，任何指针都会有所帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T12:38:49.447

我发现了 JSON Schema，它可以很好地验证 JSON 请求。

创建一个可用于所有视图的装饰器：

```
from functools import update_wrapper

from jsonschema import validate as jsonschema_validate

def validate(schema):
    def decorator(f):
        def wrapped_function(*args, **kwargs):
            # Validate request Content Type
            if request.json is None:
                raise ValidationError("Content Type must be JSON")
            # Validate document
            jsonschema_validate(request.json, schema)
            return f(*args, **kwargs)
        return update_wrapper(wrapped_function, f)
    return decorator 
```

为您的视图使用装饰器：

```
@app.route('/', methods=['POST'])
@validate(schema)
def insert_document():
    # now your request.json object is validated against the specified schema 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T05:40:57.143

看看[peewee](http://flask-peewee.readthedocs.org/en/latest/rest-api.html)，它带有一个 JSON 格式的 RESTful API。它也是一个轻量级的 ORM 引擎。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-04T03:28:04.073

```
data = request.get_json() #You can use any method here. 

#Below the required parameters outside the try

email=data['email']
role=data['role']
try:
   #Here are the optional json parameters inside a try
   firstname = data['firstname']
   lastname = data['lastname']
except KeyError:
   #Here handle the exception, maybe parse some default values. 
   pass 
```

# android - phonegap sqlitelog 错误

> ID：13161816
> 
> 赞同：2
> 
> 时间：2012-10-31T15:50:39.347
> 
> 标签：android, sqlite, cordova, webkit, phonegap-plugins

我正在尝试使用 phonegap 执行我的 android 应用程序，但是当我执行我创建的插件时出现以下错误：

> 15:33:12.912：E/SQLiteLog(2249)：(14) 无法在 [00bb9c9ce4] 10-31 的第 30174 行打开文件 15:33:12.912：E/SQLiteLog(2249)：(14) os_unix.c:30174 : (2) open(/CachedGeoposition.db) - 10-31 15:33:12.912: D/WebKit(2249): 错误: 10-31 15:33:12.921: D/WebKit(2249): SQLite 数据库失败从 /CachedGeoposition.db 加载 10-31 15:33:12.921: D/WebKit(2249): 原因 - 无法打开数据库文件 10-31 15:33:12.921: D/WebKit(2249): external/webkit/Source /WebCore/platform/sql/SQLiteDatabase.cpp(71) : bool WebCore::SQLiteDatabase::open(const WTF::String&, bool)

顺便说一句，我没有使用 sqlite 数据库

# facebook - 上次大修后粉丝页面停止访问

> ID：13161819
> 
> 赞同：0
> 
> 时间：2012-10-31T15:50:41.870
> 
> 标签：facebook, facebook-page

我曾经有大约 1200 名粉丝，我的统计数据显示我的页面会被看到数百次，通常超过 1,000 次。

然后对 Facebook 进行了一次大修，除其他外，只在人们的墙上显示最受欢迎的帖子。从那以后，尽管我的 FB 粉丝群已经增长到 1800 多人，但我的帖子的自然浏览量通常不超过 200 或 300 次。

我研究了最好的日子和时间，经过大约一年的时间和图表，我发现周二晚上 6:30 是我最受欢迎的时间。周二 6:30 8 月 21 日，我获得了 1,000 次观看，这让我很兴奋，但从那以后，在我尝试过的周二和其他日子/时间里，如果我的 1,800 人中有 300 人看到我的帖子，我就很幸运了。

我可以做些什么来确保至少有最多的粉丝看到我的帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:53:52.250

他们试图让你为晋升的职位付费。现在让所有粉丝看到您的帖子的唯一方法是为该特权付费。如果您不付费，则只有一部分粉丝会看到帖子。

当然，在我发布此消息的那天晚上，我看到了有关一项新功能的报道。我仍然找不到官方通知，但这是一个好故事，并且有完整的说明。 [http://www.nbcnews.com/technology/technolog/responding-criticism-facebook-adds-way-you-really-really-something-1C6669506](http://www.nbcnews.com/technology/technolog/responding-criticism-facebook-adds-way-you-really-really-something-1C6669506)

因此，所有页面所有者都需要教育最终用户他们需要采取额外的步骤。这不是很好，但它是一种改进。

# mercurial - TFS 2012 版本控制与 Mercurial

> ID：13161822
> 
> 赞同：9
> 
> 时间：2012-10-31T15:50:46.857
> 
> 标签：mercurial

我正在为我们的团队（1 到 2 名开发人员）评估版本控制系统，并且想知道 TFS 2012 版本控制与 Mercurial 在合并和分支方面的比较。我们没有一个庞大的团队，可能只有我和另一个开发人员，所以我们可能不需要 DVCS 提供的强大的分支/合并功能。就其功能而言，我无法找到有关 TFS 2012 版本控制的太多信息。任何人都可以指点我指南或突出一些功能吗？请注意，我们只能在 VS 专业版上访问 TFS 2012 的独立版本。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T11:21:42.430

Mercurial 分支在一个关键方面与 TFS 不同。TFS 将您的分支存储在文件空间的不同部分，而 Mercurial 将它们存储在历史记录本身中。这大大减少了分支和合并中涉及的摩擦。例如，这意味着：

*   分支是隐式创建的，只需更新到最新版本以外的版本，然后在此之上提交。
*   分支也被隐式地关闭，再次，简单地通过合并。
*   可以隐式地重新打开分支，就像您首先创建它们一样。
*   Mercurial 让您可以非常轻松地在原地切换分支。您不需要设置单独的工作区映射，也不需要从一个目录更改到另一个目录。
*   分支可以是匿名的。
*   尽管 TFS 具有“无根据的合并”（这基本上意味着它与不处于直接父/子关系的分支存在大量问题），但 Mercurial 中没有这样的事情。总是有可能在两个修订版之间找到一个共同的起源，无论它们各自的分支相距多远。
*   TortoiseHg 中的分支图形视图与您的项目历史集成在一起，让您更容易理解分支和合并的实际工作原理。

分支和合并有几个优点，甚至适用于小型团队或单独的开发人员。一个这样的例子是即使您在开发中还有其他功能，也能够修复生产系统上的错误。另一个例子是探索性或实验性开发：如果一种方法行不通，您可以轻松地回滚到开始并尝试第二种不同的方法，同时仍然保留原始方法以防万一您需要参考它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T19:30:07.143

之前的“答案”有些奇怪。TFS 2012 中的分支和合并工作与您期望的完全一样，具有 GUI 和命令行实现。这是一个很好的文档，相当完整地涵盖了该主题：

[ALM 游侠指南](http://vsarbranchingguide.codeplex.com/) **已更新**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T16:37:44.827

**前言：**

我与 TFS 没有任何关系，也从未使用过它

**脸：**

最新的“tfs2012”问题，至少有一些（[如何设置 TFS 以迎合多个客户的多个项目](https://stackoverflow.com/questions/13152030/how-to-set-up-tfs-to-cater-multiple-projects-to-multiple-clients)，[TFS 2012：将二进制文件与构建和源代码相关联](https://stackoverflow.com/questions/13078526/tfs-2012-correllating-binaries-to-builds-and-source-code)，[TFS 2012 禁用多重签出不起作用](https://stackoverflow.com/questions/13014746/tfs-2012-disable-multiple-check-out-not-working)），向我们展示了**问题**，其中我从来没有考虑过 Mercurial 中的*问题*（有时会添加一些外部工具）。但您也可以理解，TFS 定位为完整的 ALM 工具，而不是 Mercurial 的纯 SCM。

[James McKay的“Team Foundation Server 是版本控制工具的 Lotus Notes”](http://jamesmckay.net/2011/02/team-foundation-server-is-the-lotus-notes-of-version-control-tools/)并不是最新的文章（2011 年 2 月），但我认为至少有些陈述仍然有效。

分支合并的数量仅与团队规模相关，主要取决于开发风格，开发人员的习惯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T23:59:13.987

如果您在一个小团队中，毫无疑问选择 Mercurial。

Mercurial 对于您将使用的特定开发工作流程来说是轻量级和灵活的。它更适合较小的团队，事实上，它甚至适合单人开发，因为它不会带来任何管理开销。

关于合并的必要性，它实际上并不是您所暗示的高级功能：它是大多数（全部？）非分布式 VCS 无法正确处理的非常基本的功能。你现在可能不需要它，但如果你需要它，你会在 Mercurial 中拥有它并且它可以正常工作。

# javascript - 根据 URL 调用不同的变量

> ID：13161824
> 
> 赞同：0
> 
> 时间：2012-10-31T15:50:52.030
> 
> 标签：javascript, jquery

我有这个代码：

```
var mods1 = ['a', 'b', 'c', 'd'];
var mods2 = ['1', '2', '3', '4'];
var mods3 = ['js', 'hates', 'me', ':('];

jQuery('div').append('<ul class="modlist"></ul>');
jQuery.each(mods1, function(i) {
    jQuery('<li/>').html(mods1[i]).appendTo('.modlist');
}); 
```

我需要根据使用此脚本的 URL 使用不同的变量（mods1、modsN、...）。

URL 始终具有相同的结构：

[http://www.example.com/NUMBER/](http://www.example.com/NUMBER/)
[http://www.example.com/NUMBER/example/](http://www.example.com/NUMBER/example/)
[http://www.example.com/NUMBER/example/example](http://www.example.com/NUMBER/example/example)

“数字”部分是我可以用来区分页面的部分。

jsFiddle 运行我的示例代码：http: [//jsfiddle.net/RZHxz/](http://jsfiddle.net/RZHxz/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:53:20.127

只需解析[`window.location`](https://developer.mozilla.org/en-US/docs/DOM/window.location)：

```
var url = location.pathname.substr(1),
    arr_url = url.split('/'),
    NUM = arr_url[0]; 
```

或者，如果您希望代码更紧凑：

```
var NUM = location.pathname.substr(1).split('/')[0]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T15:58:23.657

试试这个：

```
var url = "/1/example"; // location.pathname
var id = url.split("/")[1];

mods = [
    ['a', 'b', 'c', 'd'],
    ['1', '2', '3', '4'],
    ['js', 'hates', 'me', ':(']
];

jQuery('div').append('<ul class="modlist"></ul>');
jQuery.each(mods[id], function(i,v) {
    jQuery('<li/>').html(v).appendTo('.modlist');
}); 
```

我已经把它`mods`变成了一个数组，因为这就是你有效地访问它们的方式，而且，该`each()`函数将值作为参数传递给处理函数，所以你不需要再次进入数组。

[**示例小提琴**](http://jsfiddle.net/RZHxz/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T15:55:50.657

假设所有*mods*变量都在公共`mods`对象中并且`mods1`默认使用：

```
var mods = {
    mods1: ['a', 'b', 'c', 'd'],
    mods2: ['1', '2', '3', '4'],
    mods3: ['js', 'hates', 'me', ':(']
};

var key = "mods" + (/^\/(\d+)/.exec(location.pathname) || [,1])[1];
$.each(mods[key], function(i) {
    // ...
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T16:02:09.907

如果您确定该号码会在那里，您可以像这样轻松获得它：

```
var urlNumber = parseInt(location.pathname.substr(1),10); // always use a radix
//or, if the number needn't be there
var urlNumber = (location.pathname.match(/^\/([0-9]+)\//) || ['no','number'])[1]; 
```

如果它在 url 中，则第二个返回数字，或者`number`如果它不在

# c++ - PI近似的问题

> ID：13161827
> 
> 赞同：1
> 
> 时间：2012-10-31T15:51:01.593
> 
> 标签：c++, math

我正在尝试将 pi 的近似值模拟到小数点后 5 位。这是我所依据的公式：

![在此处输入图像描述](../Images/935bc82e1619916efc3e584977d6ba87.png)

但我没有使用无穷大，而是将其近似为小数点后 5 位。这是我拥有的代码，但我得到的结果是 0。我的猜测是因为整数除法，但我尝试将 0\. 添加到除法之一，但它没有帮助：

```
#include <cmath>
#include <iostream>

int main() {

    int sum = 0;

    for (int k = 0; k < 5; ++k) {

        sum += pow(-1, k) / (2 * k + 1);

    }

    sum *= 4;

    std::cout << sum;

} 
```

这部分：

```
sum += pow(-1, k) / (2 * k + 1); 
```

我尝试更改为：

```
sum += ( pow(-1, k) + 0\. ) / (2 * k + 1); 
```

或者

```
sum += ( pow(-1, k) * 1\. ) / (2 * k + 1); 
```

但结果仍然是 0。我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T15:52:33.470

您必须声明`sum`为`double`.

# ruby - 将字符串拆分为路径的更快更简洁的方法

> ID：13161828
> 
> 赞同：-1
> 
> 时间：2012-10-31T15:51:02.810
> 
> 标签：ruby

我有一个像这样的字符串：

```
str = "/some/path/to/some/file.ext" 
```

结果应该是这样的：

```
[path, dir, file]
=> ["/some/path/to", "some", "file.ext"] 
```

我当前的代码：

```
chunks = str.split '/'
=> ["", "some", "path", "to", "some", "file.ext"]

file = chunks.pop
=> "file.ext"

dir = chunks.pop
=> "some"

path = chunks.join '/'
=> "/some/path/to" 
```

但它又丑又慢。

我也尝试了正则表达式 and `File.split`，但我得到了更难看的一团糟。

解决办法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T15:52:56.973

使用`pathname`：

```
require 'pathname'

str = "/some/path/to/some/file.ext"

p = Pathname.new str

path, dir, file = [p.dirname.parent, p.parent.basename, p.basename].map(&:to_s)

p( [path, dir, file] ) 
```

它在所有版本上运行良好。

[**在这里您可以看到它的实际效果**](http://cibox.org/slivu/stackoverflow?lang=ruby&file=faster-cleaner-way-to-split-a-string-into-path.rb&run=true)。

# java - 使用 Spring/JSF 查看不加载 CSS

> ID：13161831
> 
> 赞同：1
> 
> 时间：2012-10-31T15:51:09.577
> 
> 标签：java, css, spring, internet-explorer, jsf

我正在尝试运行下面的项目，但在 Internet Explorer 9 上使用文档模式：IE9 标准时出现“错误”。它根本不加载css。

在 Chrome、Firefox、IE 7 和 IE8、具有 IE8 标准/IE7 标准的 IE 9 中，它运行正常。

我能做些什么来修复这个“错误”？？？

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <display-name>HibernateSpringJSFDispatcher</display-name>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/application-context.xml</param-value>
    </context-param>
    <context-param>
        <param-name>facelets.REFRESH_PERIOD</param-name>
        <param-value>2</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
        <param-value>.xhtml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>DispatcherServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/application-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>DispatcherServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
</web-app> 
```

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:mvc="http://www.springframework.org/schema/mvc"

       xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/tx 
        http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
        http://www.springframework.org/schema/aop 
        http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <context:component-scan base-package="br.gov.pr.maringa" />

    <import resource="classpath:persistence-context.xml"/>

    <!-- map all requests to /resources/** to the container default servlet (ie, don't let Spring handle them) -->

    <bean id="defaultServletHttpRequestHandler" class="org.springframework.web.servlet.resource.DefaultServletHttpRequestHandler" />

    <bean id="simpleUrlHandlerMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
        <property name="urlMap">
        <map>
            <entry key="/resources/**" value-ref="defaultServletHttpRequestHandler" />
            <entry key="/javax.faces.resource/**" value-ref="defaultServletHttpRequestHandler" />
        </map>
        </property>
    </bean>

    <bean class="org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter" />

    <mvc:annotation-driven/>
    <bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
        <property name="cache" value="false" />
        <property name="viewClass" value="org.springframework.faces.mvc.JsfView" />
        <property name="prefix" value="/WEB-INF/views/" />
        <property name="suffix" value=".xhtml" />
    </bean>

    <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="loadTimeWeaver">
            <bean
                class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver" />
        </property>
        <property name="persistenceUnitName" value="persistence-unit" />
    </bean>
</beans> 
```

面孔-config.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config version="2.0" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="       http://java.sun.com/xml/ns/javaee       http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd">
    <application>
        <resource-handler>br.gov.pr.maringa.hibernatespringjsfdispatcher.CustomResourceHandler</resource-handler>
        <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>
        <resource-bundle>
            <base-name>MessageResources</base-name>
            <var>messages</var>
        </resource-bundle>
    </application>
</faces-config> 
```

CustomResourceHandler.java

```
package br.gov.pr.maringa.hibernatespringjsfdispatcher;

import javax.faces.application.Resource;
import javax.faces.application.ResourceHandler;
import javax.faces.application.ResourceHandlerWrapper;
import javax.faces.application.ResourceWrapper;
import javax.faces.context.FacesContext;

import com.sun.faces.util.Util;

/**
 * Custom JSF ResourceHandler.
 * 
 * This handler bridges between Spring MVC and JSF managed resources. The handler takes
 * care of the case when a JSF facelet is used as a view by a Spring MVC Controller and the
 * view uses components like h:outputScript and h:outputStylesheet by correctly pointing the 
 * resource URLs generated to the JSF resource handler.
 * 
 * The reason this custom handler wrapper is needed is because the JSF internal logic assumes
 * that the request URL for the current page/view is a JSF url. If it is a Spring MVC request, JSF
 * will create URLs that incorrectly includes the Spring controller context.
 * 
 * This handler will strip out the Spring context for the URL and add the ".jsf" suffix, so the
 * resource request will be routed to the FacesServlet with a correct resource context (assuming the
 * faces servlet is mapped to the *.jsf pattern). 
 * 
 *
 */
public class CustomResourceHandler extends ResourceHandlerWrapper {

    private ResourceHandler wrapped;

    public CustomResourceHandler(ResourceHandler wrapped) {
        this.wrapped = wrapped;
    }
    @Override
    public ResourceHandler getWrapped() {
        return this.wrapped;    
    }

    @Override
    public Resource createResource(String resourceName, String libraryName) {
        return new CustomResource(super.createResource(resourceName, libraryName));
    }
    @Override
    public Resource createResource(String resourceName, String libraryName,
            String contentType) {
        return new CustomResource(super.createResource(resourceName, libraryName, contentType));
    }

    private static class CustomResource extends ResourceWrapper {

        private Resource wrapped;

        private CustomResource(Resource wrapped) {
            this.wrapped = wrapped;
        }
        @Override
        public Resource getWrapped() {
            return this.wrapped;
        }
        @Override
        public String getRequestPath() {
            String path = super.getRequestPath();
            FacesContext context = FacesContext.getCurrentInstance();
            String facesServletMapping = Util.getFacesMapping(context);
            // if prefix-mapped, this is a resource that is requested from a faces page
            // rendered as a view to a Spring MVC controller.
            // facesServletMapping will, in fact, be the Spring mapping
            if (Util.isPrefixMapped(facesServletMapping)) {
                // remove the Spring mapping
                path = path.replaceFirst("(" + facesServletMapping + ")/", "/");
                // append .jsf to route this URL to the FacesServlet
                path = path.replace(wrapped.getResourceName(), wrapped.getResourceName() + ".jsf");
            }
            return path;
        }

    }
} 
```

HelloWorldController.java

```
package br.gov.pr.maringa.hibernatespringjsfdispatcher.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;

import br.gov.pr.maringa.exception.InvalidEntityException;
import br.gov.pr.maringa.hibernatespringjsfdispatcher.model.HelloWorld;
import br.gov.pr.maringa.hibernatespringjsfdispatcher.model.Usuario;
import br.gov.pr.maringa.hibernatespringjsfdispatcher.model.UsuarioHome;

@Controller
public class HelloWorldController {

    @Autowired
    private HelloWorld helloWorld;
    @Autowired
    private UsuarioHome uh;

    @RequestMapping(value="/helloWorld", method=RequestMethod.GET)
    public void helloWorld() {
        helloWorld.setMessage("Hello World from Spring MVC to JSF");

        Usuario u = new Usuario();

        u.setUsuario("claudio");
        u.setSenha("1234");

        try {
            uh.save(u);
        } catch (InvalidEntityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    @RequestMapping(value="/helloWorld", method=RequestMethod.POST)
    public void helloWorldPost(@RequestParam String msg) {
        helloWorld.setMessage(msg);
    }
} 
```

helloWorld.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:p="http://primefaces.org/ui"  
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <title>Hello World</title>
    </h:head>
    <h:body>
        <p>${helloWorld.message}</p>
        <p:panel header="qualquercoisa">abc</p:panel>
        <p>Say something: </p>
        <form method="post">
            <input name="msg" type="text"></input>
            <input type="submit" ></input>
        </form>
        <p>This image is linked as a JSF resource</p>
        <h:graphicImage name="images/jsf.jpg" />
        <p>This image is directly linked</p>
        <img src="resources/images/spring.png"></img>
    </h:body>
</html> 
```

参考资料： http: [//papweb.wordpress.com/2011/07/29/spring-mvc-3-jsf-2-with-maven-2-and-tomcat/](http://papweb.wordpress.com/2011/07/29/spring-mvc-3-jsf-2-with-maven-2-and-tomcat/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:39:30.003

IE9 标准模式仅接受`Content-Type: text/css`CSS 资源。如果返回另一个内容类型，IE9 将完全忽略整个 CSS 资源。

您需要绝对确保您的自定义资源处理程序设置了正确的内容类型标头。我不知道 Spring 是如何在这里发挥作用的，也不知道自定义资源处理程序在这个结构中的意义如何，但默认情况下，内容类型是根据文件扩展名设置的。至少，您需要确保`Resource#getContentType()`您的方法`CustomResource`return `text/css`。

# iphone - iOS 应用程序在线程 0 中崩溃

> ID：13161833
> 
> 赞同：1
> 
> 时间：2012-10-31T15:51:15.077
> 
> 标签：iphone, ios, xcode, crash-reports

我们的一位用户向我们提出了一个问题，即应用程序在应用程序启动后直接崩溃。现在我们只有两个崩溃报告，但无法在我们的任何设备上重现崩溃。Build 是一个 Enterprise Distribution Build。

该设备是带有 iOS 6 的 iPhone 4。

任何想法将不胜感激。

```
Date/Time:       2012-10-30 17:41:11.762 +0100
OS Version:      iOS 6.0 (10A403)
Report Version:  104

Exception Type:  EXC_CRASH (SIGTRAP)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_c.dylib              0x38edad8e memmove$VARIANT$CortexA8 + 654
1   QuartzCore                     0x3401c81c CA::Render::Encoder::encode_bytes(void const*, unsigned long) + 24
2   QuartzCore                     0x3401d494 CA::Render::Layer::Ext::encode(CA::Render::Encoder*) const + 152
3   QuartzCore                     0x3401c706 CA::Render::encode_set_object(CA::Render::Encoder*, unsigned long, unsigned int, CA::Render::Object*, unsigned int) + 42
4   QuartzCore                     0x3401b3e2 CA::Context::commit_layer(CA::Layer*, unsigned int, unsigned int, void*) + 114
5   QuartzCore                     0x34011076 CA::Layer::commit_if_needed(CA::Transaction*, void (*)(CA::Layer*, unsigned int, unsigned int, void*), void*) + 310
6   QuartzCore                     0x3401101c CA::Layer::commit_if_needed(CA::Transaction*, void (*)(CA::Layer*, unsigned int, unsigned int, void*), void*) + 220
7   QuartzCore                     0x3401101c CA::Layer::commit_if_needed(CA::Transaction*, void (*)(CA::Layer*, unsigned int, unsigned int, void*), void*) + 220
8   QuartzCore                     0x3401052c CA::Context::commit_transaction(CA::Transaction*) + 1024
9   QuartzCore                     0x34010024 CA::Transaction::commit() + 312
10  QuartzCore                     0x3400fe84 CA::Transaction::observer_callback(__CFRunLoopObserver*, unsigned long, void*) + 56
11  CoreFoundation                 0x34e326ca __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 18
12  CoreFoundation                 0x34e309bc __CFRunLoopDoObservers + 272
13  CoreFoundation                 0x34e30d12 __CFRunLoopRun + 738
14  CoreFoundation                 0x34da3eb8 CFRunLoopRunSpecific + 352
15  CoreFoundation                 0x34da3d44 CFRunLoopRunInMode + 100
16  GraphicsServices               0x35b0c2e6 GSEventRunModal + 70
17  UIKit                          0x379e92fc UIApplicationMain + 1116
18  MyApp                           0x000ceb90 main (main.m:16)
19  MyApp                           0x000ceb2c start + 36 
```

这是第二个：

```
Date/Time:       2012-10-29 15:54:48.926 +0100
OS Version:      iOS 6.0 (10A403)
Report Version:  104

Exception Type:  EXC_CRASH (SIGTRAP)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib         0x33b1beb4 mach_msg_trap + 20
1   libsystem_kernel.dylib         0x33b1c048 mach_msg + 36
2   CoreFoundation                 0x34e32040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                 0x34e30d5a __CFRunLoopRun + 810
4   CoreFoundation                 0x34da3eb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                 0x34da3d44 CFRunLoopRunInMode + 100
6   GraphicsServices               0x35b0c2e6 GSEventRunModal + 70
7   UIKit                          0x379e92fc UIApplicationMain + 1116
8   MyApp                           0x00024b90 main (main.m:16)
9   MyApp                           0x00024b2c start + 36 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:39:48.940

第一个我怀疑你是在将它们放到屏幕上时为它们制作动画（因为它发生在启动期间）。也许您正在应用程序委托中执行与 UI 相关的操作，或者从尚未出现在屏幕上的视图控制器中执行操作。也就是说，Core Animation 调用可能是一个红鲱鱼（见下文）。

第二个不太可能是实际的崩溃点。iOS 不能总是确定哪个线程实际崩溃了，有时会归咎于错误的线程（大多数情况下线程 0 会被错误地归咎于错误）。函数崩溃`_trap`真的不太可能。线程通常在此时暂停。我会研究其他线程，看看其中一个是否在做可疑的事情。如果您在其他地方找到它，那么这也可能是第一次崩溃的原因。

# java - 代码永远不会 clear() 的情况

> ID：13161835
> 
> 赞同：5
> 
> 时间：2012-10-31T15:51:20.237
> 
> 标签：java

```
try {
    if (check) {
        while (true) ;
    } else {
        System.exit(1);
    }
} finally {
    clear();
} 
```

问：有`clear()`没有永远不会被执行的情况？我个人觉得没有不执行 clear() 的情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T15:53:46.993

如果`System.exit`成功，`clear()`则不会执行。但是，[`System.exit(1)` *可能会*抛出`SecurityException`异常](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#exit%28int%29)，在这种情况下`clear()`将被执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:52:53.827

如果`check`为真，那么您将陷入无限循环，在这种情况下，从技术上讲，您永远无法到达 finally 块。

否则如果`check`为假，则`System.exit(1);`执行然后您的程序终止；在这种情况下，它永远不会到达要`finally`执行的块`clear()`。

在这个例子中，实际上是无法达到的`clear()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T15:54:24.740

clear 只会在 try 块完成时执行。

如果`check`为真，那么 while(true) 将永远坐在那里，所以永远不要离开 try 块

如果`check`为假，`System.exit(0)`则将退出程序，因此 finally 块也不会运行。但是`System.exit(int)`可以抛出一个`SecurityException`这会导致 finally 被调用。

所以总而言之，我认为如果`System.exit`抛出一个`SecurityException`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T15:56:31.103

> 有没有 clear() 永远不会被执行的情况？

您给出的两个示例都是这种情况，您可以通过运行代码来确认。

当你有一个无限循环时，它之后什么都不会执行。

当 System.exit() 成功时，它会立即停止线程。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-31T15:56:39.213

System.exit(1) 阻止 finally 子句运行。

基本上，无论 try 或 catch 是正常返回还是异常返回，都会在 try/catch 之后执行 finally 块。

然而，System.exit 阻止了块返回。

而（真）；显然会无限期地阻塞。只是假设 while (true) ; 是更有意义的东西的存根:)

# c# - SQL Server CE 4.0 部署问题——哪些文件是必需的？

> ID：13161839
> 
> 赞同：6
> 
> 时间：2012-10-31T15:51:32.173
> 
> 标签：c#, sql-server-ce-4

我正在尝试部署一个使用 SQL Server CE 4.0 数据库的小型 Windows 窗体应用程序。我不希望运行此应用程序的每个系统都必须安装 SQL Server CE 4.0，因此我试图获取应用程序中包含的任何必需的 DLL。

当我查看参考列表时，SQL Server CE 4.0 的唯一参考是`System.Data.SqlServerCe`. `System.Data.SqlServerCe.dll`在尝试连接到数据库时，包括 DLL仍然会导致以下错误：

> *无法加载与版本 8876 的 ADO.NET 提供程序对应的 SQL Server Compact 的本机组件。安装正确版本的 SQL Server Compact。有关详细信息，请参阅知识库文章 974247。*

我看过一些关于不同版本的 SQL Server CE 的文章，但据我所知，它们列出了其他版本的 DLL。应用程序将在其上运行的系统都应该至少安装有 .NET 4.0 的 Windows 7，如果这会有所不同的话。

我尝试了此处的步骤来添加文件，如链接所示：[http ://erikej.blogspot.com/2011/02/using-sql-server-compact-40-with.html](http://erikej.blogspot.com/2011/02/using-sql-server-compact-40-with.html)

使用构建中包含的这些文件，程序编译时不会出现任何错误，但是当在辅助系统上运行时，GUI 永远不会出现（公共 Form1() 的一部分包括从 SQL CE 数据库中获取数据的方法）和程序几秒钟后就关闭了。事件查看器显示此错误：

> 错误应用程序名称：Dispatch Review Assistant.exe，版本：1.0.0.0，时间戳：0x50915d3c 错误模块名称：KERNELBASE.dll，版本：6.1.7601.17932，时间戳：0x503285c2 异常代码：0xe0434352 错误偏移：0x000000000000caed 错误进程 id： 0x1028 错误应用程序启动时间：0x01cdb78c10761c73 错误应用程序路径：C:\Users\deLucain\Desktop\Release\Dispatch Review Assistant.exe 错误模块路径：C:\Windows\system32\KERNELBASE.dll 报告 ID：4e4f45e3-237f-11e2- bd76-14dae92102de

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T10:47:05.737

在对 SQLCE 4.0 应用程序进行私有部署（即包括应用程序文件夹中的库）时，我们会显示相同的错误消息。

在添加对我们项目的引用时，我们根据文档添加了 x64 和 x86 文件夹（以及相关的 dll）。

此时，我们得到了错误：

`Unable to load the native components of SQL Server Compact corresponding to the ADO.NET provider of version 8876\. Install the correct version of SQL Server Compact. Refer to KB article 974247 for more details.`

在我们的环境中，我们发现*amd64*文件夹位于：

**%Program Files%\Microsoft SQL Server Compact Edition\v4.0\Private**

也需要。

将其添加到项目并引用包含的 dll 后，我们的问题得到了解决。

# c# - 在 WPF 应用程序中使用 WebMatrix.WebData.WebSecurity

> ID：13161841
> 
> 赞同：1
> 
> 时间：2012-10-31T15:51:34.710
> 
> 标签：c#, wpf, asp.net-mvc, webmatrix

我有一个使用开箱即用的 WebMatrix 安全性的 MVC4 互联网项目。需要将 WPF 前端添加到同一应用程序。我已将模型移动到一个单独的 DLL 中，并开始在相同的实体上构建 WPF 前端。

我遇到的唯一问题是尝试与现有的安全模型集成。我在我的 WPF 项目的 app.config 中添加了一个 system.web 部分，如下所示：

```
<system.web>
  <membership defaultProvider="SimpleMembershipProvider">
    <providers>
      <clear/>
      <add name="SimpleMembershipProvider" type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData" />
    </providers>
  </membership>
</system.web> 
```

现在，当我打电话时，`WebSecurity.Login("Username", "Password")`我收到以下错误：

> 在调用“WebSecurity”类的任何其他方法之前，您必须调用“WebSecurity.InitializeDatabaseConnection”方法。此调用应放置在站点根目录中的 _AppStart.cshtml 文件中。

我曾尝试`InitializeSimpleMembershipAttribute();`在我的 WPF 应用程序启动时调用 MVC 项目附带的代码，但这对上述错误没有影响。

我在网上找不到任何关于如何做到这一点的例子，我在这里走上死胡同吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:50:09.180

你需要做两件事才能让它工作

首先在 Global.asax.cs 中将其添加到 Application_Start() 的底部

```
 var attr = new MixThread.Web.Filters.InitializeSimpleMembershipAttribute();
    attr.OnActionExecuting(null); 
```

其次，将此添加到您的 Web.config

```
<system.serviceModel>
      <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
</system.serviceModel> 
```

您应该能够像这样构建基于 WCF 的登录：

```
[AllowAnonymous]
public bool Login(string username, string password)
{
    return WebMatrix.WebData.WebSecurity.Login(username, password);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-25T15:55:57.983

您可能还需要将此添加到您的服务中。

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Required)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T09:20:43.017

最后，我决定采用不同的方法并使用 WCF 身份验证服务在我的不同客户端之间共享，如本文[演练：使用 ASP.NET 应用程序服务](http://msdn.microsoft.com/en-us/library/bb515342.aspx)中所述。

这是一个比试图让 Web 矩阵直接从 WPF 项目内部工作更简洁的解决方案。

# c# - 收藏像字典 这允许价值改变

> ID：13161843
> 
> 赞同：0
> 
> 时间：2012-10-31T15:51:36.613
> 
> 标签：c#, dictionary

我理解为什么没有内置的方法来执行此操作，但是我想要一个允许在枚举期间更改值的集合*对象*。

想象一下：

```
Dictionary<string, List<string>> test =  new Dictionary<string, List<string>> {{"key", null}}; 
```

假设我在一个实现 IEnumberable 的类中有 20 个

我想使用 lambda 或简单`foreach`的遍历类并找到与键匹配的对象，然后将 my`List<T>`与 Value 参数一起存储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:57:33.007

您可以完全避免使用枚举器，例如

```
var data = myEnumerable.ToArray();
for(var i = 0; i < data.Length; i++) {
    // here you can manipulate data[i] to your heart's content
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:11:33.613

正如您发现的那样，您无法`DictionaryEntry`通过`Value`属性更改 a - 您必须`Item`使用`Key`.

一种选择是将`Where`结果转换为数组，然后循环以获取匹配`Key`的 s：

```
Dictionary<string, List<string>> test =  new Dictionary<string, List<string>>
                                             {{"key", null}};
test.Add("newKey",null);

var matches = test.Where(di => di.Key == "key").ToArray();

foreach(var di in matches) {
    test[di.Key] = new List<string> {"one","two"}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T16:19:11.433

您可能正在寻找一个名为[multimap](http://en.wikipedia.org/wiki/Multimap)的集合。请参阅[此处](https://stackoverflow.com/a/10089931/880990)了解我的实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T16:29:33.393

您可以使用它来修改字典中的值：

```
public static void ChangeValue(string indexKey,List<string> newValue)
{
     if (test.ContainsKey(indexKey))
         keysDictionary[indexKey] = newValue;
} 
```

# r - 使用 nlminb R 函数最小化错误

> ID：13161851
> 
> 赞同：1
> 
> 时间：2012-10-31T15:51:57.500
> 
> 标签：r

我想估计最小化对数似然函数 LogL(\theta) 的 4 参数。前两个参数（a 和 sigma）为正；第三个是不受约束的，最后一个应该小于数据中的最小值。所以，我尝试使用 nlminb 函数并将其写为：

```
nlminb(start=c(a=0.13,mu=1,sigma=31,xi=0.01),f,lower=c(0.0001,0,0.123,0.01210),
upper=c(2,18.21,50,0.95),control=list(eval.max=100, iter.max=100)) 
```

我得到了一个很好的结果，但仍然存在问题，即 mu 的估计器对我尝试使用的所有值和 xi 采用相同的上限值，即使我更改起始值，它也采用相同的较低值。

对数似然函数采用以下形式：

```
-loglik=-n*log(a)+n*log(1-exp(-1))+n*log(sigma) -(a-1)*sum(log(x-mu))+(1/xi+1)*sum(log(1+xi*((x-mu)**a)/sigma))+ sum((1+xi*((x-mu)**a)/sigma)*(-1/xi)) 
```

我还有另一个条件`x-mu`应该是积极`1+xi*((x-mu)*a)/sigma`的

任何建议将不胜感激

# visual-studio-2012 - Visual Studio 2012 中的 32 位构建

> ID：13161857
> 
> 赞同：7
> 
> 时间：2012-10-31T15:52:13.500
> 
> 标签：visual-studio-2012

我在另一个线程中读到，为了使 exe 应用程序在 32 位操作系统上运行，您需要进入程序的属性并将目标 CPU 更改为 x86。我已经这样做了，由于某种原因，当我尝试在 Windows XP 中运行它时，我仍然得到一个无效的 win32 错误。我会发布一张图片，但我没有足够的代表，所以我希望你能明白我想说的！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T15:58:18.247

我遇到了完全相同的问题，看看这里[如何使用 Visual Studio 2012 为 Win XP 编译？](https://stackoverflow.com/questions/13130713/how-to-compile-for-win-xp-with-visual-studio-2012)

基本上，VS 2012 不支持 Windows XP，因此如果您希望您的程序在该操作系统中运行，您需要下载并安装[CTP 更新。](http://www.microsoft.com/en-us/download/details.aspx?id=34818)

安装后，您需要在项目属性中更改此选项：

![项目属性](../Images/9e6809936e28cf393f96987929dddf48.png)

希望这可以帮助。

# iphone - 无法打开 iphone build

> ID：13161858
> 
> 赞同：-1
> 
> 时间：2012-10-31T15:52:15.183
> 
> 标签：iphone, ipad, ad-hoc-distribution

我创建了一个支持 iphone 和 ipad 的 ios 应用程序我创建了配置文件，并正确安装了它。（在 iphone 应用程序中处理以下内容）

即使我能够使用开发配置文件调试应用程序。但不幸的是，当我尝试使用 Ad-Hoc 环境将应用程序安装到我的 ipad 时。没有任何错误它安装成功。但我无法打开应用程序。它的关闭。（我已经试飞了）

任何人都知道的特殊原因

我需要对上面的帖子添加一些修改这个应用程序是一个通用应用程序。并且 iphone 应用程序无法正常工作（崩溃）。我需要为 ipad 创建构建吗 谢谢

嗨，伙计们发现了问题，我从显示中获取了 .app 文件并且它有效。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:06:04.447

您是否使用启用了 Ad-Hoc 的分发配置文件来签署应用程序？

[http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/CreatingandDownloadingaDistributionProvisioningProfile/CreatingandDownloadingaDistributionProvisioningProfile.html](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/CreatingandDownloadingaDistributionProvisioningProfile/CreatingandDownloadingaDistributionProvisioningProfile.html)

还要确保将您当前的设备添加到此配置文件中（上面链接中的第 6 条）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:06:39.300

检查架构，您已经构建了应用程序。您的设备应支持该架构

# php - 使用 php 去除/修剪 URL 路径/字符串以在指定字符之后仅保留结束文件名字符串

> ID：13161860
> 
> 赞同：1
> 
> 时间：2012-10-31T15:52:26.820
> 
> 标签：php

这是一个非常简单的问题，但我无法弄清楚我应该使用什么。

我`$image['url']`的是**http://hello.com/uploads/2012/name.jpg**

所以我想留下这个...... **name.jpg**

我尝试了很多，但我认为爆炸是我应该使用的，但我只是从中得到`array`输出。

```
$filename = explode('/', $image['url']);

echo $filename; 
```

谁能在php手册上指出我正确的方向。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:54:07.297

很想说你可以在[`basename`](http://php.net/manual/en/function.basename.php)这里使用它，它将与 URL 或相对路径一起使用：

```
$filename = basename($image['url']); 
```

根据文档，这将返回路径的尾随名称组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:54:09.200

`$filename = basename($image['url']);`应该给你你需要的。（更多细节在这里： http: [//php.net/manual/en/function.basename.php](http://php.net/manual/en/function.basename.php)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T15:56:12.103

您正在寻找的是内置的 PHP 函数[basename()](http://php.net/manual/en/function.basename.php)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T15:57:14.330

您的代码大部分是正确的，只是缺少一个[array_pop()](http://es1.php.net/manual/en/function.array-pop.php)来提取返回的数组的最后一个元素`explode()`，如下所示：

```
$filename = array_pop(explode('/', $image['url']));

echo $filename; //echoes 'name.jpg' 
```

# php - 生日前的最后一天

> ID：13161866
> 
> 赞同：-3
> 
> 时间：2012-10-31T15:52:44.193
> 
> 标签：php, zend-framework

我在生日前的最后一天搜索计算函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:58:55.343

```
$timestamp = strtotime("yesterday", $birthday); 
```

$birthday 必须是时间戳，如果 $birthday 是像“1992-09-98”这样的字符串，你必须像这样改变它

```
$birthday = strtotime($birthday); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:31:30.557

```
function daysLeftForBirthday($devabirthdate)
{
    /* input birthday date format -> Y-m-d */
    list($y, $m, $d) = explode('-',$devabirthdate);
    $nowdate = mktime(0, 0, 0, date("m"), date("d"), date("Y"));
    $nextbirthday = mktime(0,0,0,$m, $d, date("Y"));

    if ($nextbirthday<$nowdate)
        $nextbirthday=$nextbirthday+(60*60*24*365);

    $daycount=intval(($nextbirthday-$nowdate)/(60*60*24));

    return $daycount;
} 
```

# python - 在python中制作一个二维数组

> ID：13161867
> 
> 赞同：0
> 
> 时间：2012-10-31T15:52:44.870
> 
> 标签：python, list, file

我的任务是编写一个 2D 数组，这将允许我反复循环该行并将单元格存储在一个 5 长度的数组中。我需要帮助的是如何创建它，以便它不断循环直到达到最后 5 个值并存储这些值。

例如，我的 .csv 文件中有 6 行整行

```
line = "1,9/20/2012, 48.019,34.888,37.334,35.425,36.69,38.916,36.837,39.212,37.528,37.404"
line = "1,9/20/2012, 38.019,54.888,36.334,35.425,36.69,38.916,36.837,39.212,37.528,37.404"
line = "1,9/20/2012, 28.019,31.888,56.334,33.825,36.69,38.916,36.837,39.212,37.528,37.404"
line = "1,9/20/2012, 48.019,34.888,37.334,35.425,36.69,38.916,36.837,39.212,37.528,37.404"
line = "1,9/20/2012, 38.019,54.888,31.334,37.425,33.69,38.916,36.837,39.212,37.528,37.404"
line = "1,9/20/2012, 28.019,31.888,56.334,33.825,36.69,38.916,36.837,39.212,37.528,37.404" 
```

我已将脚本设置为跳过前 2 个值 [1,9/20/2012]

然后我将它们分开，这意味着前 5 个值是`htr1`和第二个`htr2` `[ 48.019,34.888,37.334,35.425,36.69]` `[38.916,36.837,39.212,37.528,37.404]`

所以基本上我需要帮助的是获取列中的最后 5 个值并将它们存储在 python 中的数组或列表中。例如：

```
htrA[38.019,28.019,48.019,38.019,28.019]
htrB[36.334,56.334,37.334,31.334, 56.334 
```

这是我到目前为止的代码

```
inFile = open("input_test.csv", "r")
outFile = open("results.txt", "w")

#To reliably determine steady state temperature average fifoSize last temperature readings
fifoSize = 5        #last fifoSize to average to get final temperature
bufFifo = FiFoBuf(fifoSize) 

#Write Header
#outFile.write('Test Name,X+ avg,X+ std,X+ count,X- avg,X- std,X- count,X angle,Y+ avg,Y+ std,Y+ count,Y- avg,Y- std,Y- count,Y angle\n')

for line in inFile:

    print line
    #Characters of each line as list - items that were separated by commas
    list = line.rstrip().replace(' ','').split(',')
    list = list[2:]     #remove index and date code (1st 2 items of list)

    htr1 = list[0:5]    #1st heater temperatures
    htr2 = list[6:10]   #2nd heater temperatures

    print "\nhtr1: "
    print htr1
    print "\nchDeviation(htr1): "
    print chDeviation(htr1)

    avg()
#printStats()

inFile.close()
outFile.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:38:06.467

这是我的答案的修订版，它不使用该`csv`模块，而是读取并解析文件本身的每一行。

```
htrA = []
htrB = []
with open("input_test.csv", "rt") as inFile:
    for line in inFile:
        line = [float(value) for value in line.split(',')[2:]] # skips first 2 cols
        htr1 = line[0:5]
        htr2 = line[5:10]
        htrA.append(htr1[0])
        htrB.append(htr1[1])

htr2d = [htrA[-5:], htrB[-5:]]  # want just the last 5 rows
print 'htr2d:'
for row in htr2d:
    print '  ', row 
```

输出：

```
htr2d:
   [38.019, 28.019, 48.019, 38.019, 28.019]
   [54.888, 31.888, 34.888, 54.888, 31.888] 
```

您可以使用 访问 htr2d 的各个元素`htr2d[row][column]`。
例如：

```
print htr2d[0][3]  # 38.019 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:19:53.453

由于您只需要最后 5 行，因此您可以使用 unix 命令`tail -n 5`仅获取最后 5 行。然后，您可以简单地阅读每一行并根据需要附加。

如果这是不可能的（因为你不能使用 unix 命令），你可以在 python 中创建一个简单的版本，如下所示：

```
for line in file.readlines()[-5:]:
     #do whatever appending you need to do 
```

如果文件真的很大，您可以从文件末尾向后读取，直到您读取了五个换行符，然后拆分换行符。有食谱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T16:24:18.303

为每一列创建一个新列表`columnX=[]`，然后调用`columnX.append(item)`每一行来收集所有第 X 个元素。

```
column0.append(line[0])
column1.append(line[1])
#... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T16:24:49.750

您可以将所有行放在一个列表中，从中获取最后 5 个元素（最后 5 行），然后将行拆分为逗号周围的片段，获得 Hans Then 建议的列表列表。您从虚假空格中删除值，然后使用 zip 函数的一点魔法来转置您的行。您获得一个列表列表，但每个列表对应于您的一个列

```
lines1 = [ line1, line2, line3, line4, line5, line6 ]
lines2 = [ [s.strip() for s in l.split(',')[2:]] for l in lines2 ][-5:]
lines3 = zip(*lines2)

print lines3
#[('38.019', '28.019', '48.019', '38.019', '28.019'),
# ('54.888', '31.888', '34.888', '54.888', '31.888'),
# ('36.334', '56.334', '37.334', '31.334', '56.334'),
# ('35.425', '33.825', '35.425', '37.425', '33.825'),
# ('36.69', '36.69', '36.69', '33.69', '36.69'),
# ('38.916', '38.916', '38.916', '38.916', '38.916'),
# ('36.837', '36.837', '36.837', '36.837', '36.837'),
# ('39.212', '39.212', '39.212', '39.212', '39.212'),
# ('37.528', '37.528', '37.528', '37.528', '37.528'),
# ('37.404', '37.404', '37.404', '37.404', '37.404')] 
```

# java - Java：控制台跳过输入

> ID：13161870
> 
> 赞同：3
> 
> 时间：2012-10-31T15:52:54.310
> 
> 标签：java, console

我正在尝试使用`in.nextLine()`和从那里解析控制台输入中的字符 take `charAt(0)`。我的问题是在要求用户输入字符串以执行`in.nextLine()`on 之后，它会跳过输入并由于尝试获取空字符串的第一个字符而产生错误。

```
System.out.print("Select an operator (+, -, *, /), 'c' or 'C' to clear, or 'q' to quit: ");
String temp = in.nextLine();
char tempOperator = temp.charAt(0); 
```

错误是

```
java.lang.StringIndexOutOfBoundsException: String index out of range: 0
at java.lang.String.charAt(Unknown Source) 
```

完整程序可[在此处获得](http://www.sourcepod.com/ytqsry76-11791)

欢迎提出一般性意见和建议。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T16:10:26.957

当您这样做时`cValue = in.nextDouble();`，它会读取下一个标记（完整值）并将其解析为加倍。如果此时按下回车键，`\n`是缓冲区中的下一个要读取的令牌。

当你这样做时：`String temp = in.nextLine();`，它`\n`从前一个输入的缓冲区中读取并`charAt(0)`失败，因为它只读取了 empty("") 字符串。

为了克服这个问题，或者通过添加一个附加项来跳过前一个缓冲区`in.nextLine()`，添加`\n \r`如下跳过模式（这是在`Scanner.class`as中定义的模式`LINE_SEPARATOR_PATTERN`）：

```
 in.skip("\r\n|[\n\r\u2028\u2029\u0085]"); 
```

或如下放置一个小循环`while`：

```
 String temp = "";
   while((temp.length() < 0){
      temp = in.nextLine();
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:10:06.817

您可能会考虑的一件事是不要这样做：

```
String temp = in.nextLine(); 
```

做这个：

```
String temp = in.next(); 
```

这当然是假设您只需要用户输入中的一个字符，看起来这就是您要求用户的全部内容。这将消除您收到的异常。但是，如果您想在用户键入多个字符时抛出错误，您可能需要先阅读整行以查看长度是多少。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T16:10:41.820

好吧，问题出在这条线上`in.nextDouble()`。

[`Scanner#nextDouble`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextDouble%28%29)从用户那里读取下一个令牌作为双倍。因此，当您将值`4.5`作为输入传递时，`nextDouble`只需读取令牌`4.5`并跳过`linefeed`用户输入的输入。现在这个换行（因为这是一个新行），将被视为下一个的输入`Scanner.nextLine`。因此，您的`in.nextLine`after`in.nextDouble`正在阅读`newline`previous 的剩余内容`in.nextDouble`。

因此，解决方法与@tjg184 在他的回答中指出的相同。`in.nextLine`之后添加一个空白`in.nextDouble`将读取`newline`剩下的内容。因此，您的到来`in.nextLine`会读取实际传递的输入。

```
cValue = in.nextDouble();
in.nextLine();  // Add this before your `while` which will read your `newline`

while (true) {
    //continue;
} 
```

然而，[`Scanner.nextLine`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine%28%29)读取完整的输入直到换行。因此，它不会留下任何`newline`供用户下次阅读的内容。

虽然不需要这个答案，但`@tjg184's`答案是一样的。我刚刚添加它是为了更好地解释到底发生了什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T15:58:33.653

查看您的程序，这是因为`String temp = in.nextLine();`. 当用户点击“Enter”键时，它本质上是跳过此语句，因为用户键入了“Enter”。试试下面的。注意，我只添加了以下行`String enter = in.nextLine();`

```
import java.util.Scanner;

public class Calculator
{    
    public static void main(String[] args)
    {
        Scanner in = new Scanner(System.in);
        char operator = 'z'; //initialize operator
        double cValue; //current value
        double rhValue; //right hand value
        boolean cont = true;

        System.out.print("Enter starting value: ");
        cValue = in.nextDouble();

        // disregard the "Enter" key
        String enter = in.nextLine();

        while(true)
        {
            System.out.print("Select an operator (+, -, *, /), 'c' or 'C' to clear, or 'q' to quit: ");
            String temp = in.nextLine();
            char tempOperator = temp.charAt(0);

            if (tempOperator == 'c' || tempOperator == 'C')
            {
                cValue = 0.0;
                System.out.println("Current value is: " + cValue);
                System.out.println();
            }
            else if(tempOperator == 'q')
            {
                System.out.println("Final result: " + cValue);
                System.exit(1);
            }
            else if(tempOperator == '+' || tempOperator == '-' || tempOperator == '*' || tempOperator == '/')
            {
                operator = tempOperator;
                break;
            }
            else
                throw new IllegalArgumentException("operator not valid");
        }

        System.out.println("Enter a right hand value (type double): ");
        rhValue = in.nextDouble();

        System.out.println("Math expression: answer " + operator + "= " + rhValue);
        switch(operator)
        {
            case '+': cValue =+ rhValue;
                      break;
            case '-': cValue =- rhValue;
                      break;
            case '*': cValue = cValue * rhValue;
                      break;
            case '/': cValue = cValue / rhValue;
                      break;
        }

        System.out.println("Current value is: " + cValue);
    }
} 
```

# c# - 如何检查从 datetimepicker 中选择的日期是否与 sql 表中的日期相同？

> ID：13161874
> 
> 赞同：-2
> 
> 时间：2012-10-31T15:52:56.350
> 
> 标签：c#, asp.net, sql-server-express

如何检查我从`DateTimePicker`控件中选择的日期是否存在于 SQL 表中？

`DateTimePicker`我的ASP.NET 页面上有一个可以选择日期的页面。我需要检查这个选定的日期是否存在于 SQL 表中（在名为 的表中`blockdate`）。如果所选日期确实存在，我需要将表中`date`和`reason`列中的相应值输入`blockdate`到`DataGridView`.

谁能告诉我我该怎么做？

这是我到目前为止检查所选日期是否为周末的代码。

```
DatePicker.SelectedDate.ToString("dd-MM-yyyy");
DateTime date = DatePicker.SelectedDate.Date;
DateTime weekend;

if (date.DayOfWeek == DayOfWeek.Saturday)
{
    weekend = date.AddDays(+2);
}

if (date.DayOfWeek == DayOfWeek.Sunday)
{
    weekend = date.AddDays(+1);
}
else
{
    weekend = date;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:34:29.897

我认为每次`DatePicker`值更改时都调用数据库并不是一个理想的解决方案。

您可以从 sql 表中选择所有日期到页面加载中的列表。

```
var dateList = new List<DateTime>();
dateList = //all the dates from you sql table 
```

然后，当`DatePicker`值更改时，您可以将值与您的列表进行匹配。

希望这可以帮助

# python - 如何在应用程序上显示 Django 索引页面

> ID：13161876
> 
> 赞同：1
> 
> 时间：2012-10-31T15:53:01.243
> 
> 标签：python, django

我正在做 Django 教程，第 3 部分：[https ://docs.djangoproject.com/en/dev/intro/tutorial03/](https://docs.djangoproject.com/en/dev/intro/tutorial03/)

我目前在我的views.py中有这个文本：

```
from django.http import HttpResponse

from polls.models import Poll

def index(request):
    latest_poll_list = Poll.objects.order_by('-pub_date')[:5]
    output = ', '.join([p.question for p in latest_poll_list])
    return HttpResponse(output) 
```

这在我去时有效： `http://localhost:8000/polls/`，它显示记录

问题是当我采取下一步并将views.py更改为：

```
from django.shortcuts import render

from polls.models import Poll

def index(request):
    latest_poll_list = Poll.objects.all().order_by('-pub_date')[:5]
    context = {'latest_poll_list': latest_poll_list}
    return render(request, 'polls/index.html', context) 
```

从`http://localhost:8000/polls/`它显示以下错误：TemplateDoesNotExist at /polls/ 从`http://localhost:8000/polls/index.html`它显示此错误：找不到页面（404）

我将 mysite/urls.py 设置为：

```
urlpatterns = patterns('',
    url(r'^polls/', include('polls.urls')),
    url(r'^admin/', include(admin.site.urls)),
) 
```

我将 poll/views.py 设置为：

```
urlpatterns = patterns('',
    url(r'^$', views.index, name='index'), 
```

我将 TEMPLATE_DIRS 设置为：

```
'/path/to/mysite/templates' 
```

为什么页面不会加载新代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:23:24.780

`polls`在模板目录中创建一个名为的文件夹，并`index.html`在其中创建一个包含以下内容的文件。

```
<html>
<body>
<ul>
{% for p in latest_poll_list %}
<li>{{ p.question }}</li>
{% endfor %}
</ul>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:56:54.483

您没有显示整个`TEMPLATE_DIRS`设置。但我怀疑你有这个：

```
TEMPLATE_DIRS = (
    '/path/to/mysite/templates'
) 
```

当你真正应该拥有这个时：

```
TEMPLATE_DIRS = (
    '/path/to/mysite/templates',
) 
```

请注意字符串末尾的额外逗号。Python 中的单元素元组需要逗号 - 否则，它只是括号中的字符串。

# php - Amazon AMI (EC2) 上的 PHP + SQLite3

> ID：13161877
> 
> 赞同：2
> 
> 时间：2012-10-31T15:53:03.933
> 
> 标签：php, sqlite, amazon-ec2, installation

我有一个与此类似的问题[，](https://stackoverflow.com/questions/2785473/how-to-enable-core-php-extension-in-linux)我希望我的 EC2（标准 Amazon AMI）上支持 sqlite3 php，但 PHP 是用`--without-sqlite3`.

如何添加 sqlite3 支持？它的软件来自存储库，所以我不能只是重新运行`./configure`脚本

更多信息：

我尝试从 PECL 安装它但没有取得多大成功，此外它还说版本是`0.6 (alpha)`并且 sqlite3 支持仅通过 PECL 短暂提供，应该编译成 PHP 可执行文件（我认为）。它令人困惑。

我也有 PDO 扩展（一些网站说 sqlite3 在 PDO 中）

这是我对 PECL 的尝试：

```
ec2-user[~]> pecl search sqlite
Retrieving data...0%
..Matched packages, channel pecl.php.net:
=======================================
Package    Stable/(Latest) Local
PDO_SQLITE 1.0.1 (stable)        SQLite v3 Interface driver for PDO
SQLite     1.0.3 (stable)        SQLite database bindings
sqlite3    0.6 (alpha)           SQLite v3 Database Bindings.
ec2-user[~]> pecl download sqlite3
Failed to download pecl/sqlite3 within preferred state "stable", latest release is version 0.6, stability "alpha", use "channel://pecl.php.net/sqlite3-0.6" to install
download failed
ec2-user[~]> pecl download channel://pecl.php.net/sqlite3-0.6
downloading sqlite3-0.6.tgz ...
Starting to download sqlite3-0.6.tgz (768,302 bytes)
.........................................................................................................................................................done: 768,302 bytes
File /home/ec2-user/sqlite3-0.6.tgz downloaded
ec2-user[~]> sudo pecl install sqlite3-0.6.tgz
84 source files, building
running: phpize
Configuring for:
PHP Api Version:         20090626
Zend Module Api No:      20090626
Zend Extension Api No:   220090626
Optionally provide the path to the libsqlite3 library [autodetect] : yes
building in /var/tmp/pear-build-root8Jljf1/sqlite3-0.6

(...)

/var/tmp/sqlite3/sqlite3.c:1586: error: duplicate 'static' // repeated lots of times
make: *** [sqlite3.lo] Error 1
ERROR: `make' failed 
```

编辑：没有`php-sqlite`或`php5-sqlite`包

```
ec2-user[~]> sudo yum search sqlite
Loaded plugins: fastestmirror, priorities, security, update-motd, upgrade-helper
Loading mirror speeds from cached hostfile
 * amzn-main: packages.us-west-2.amazonaws.com
 * amzn-updates: packages.us-west-2.amazonaws.com
========================================================================= N/S Matched: sqlite ==========================================================================
apr-util-sqlite.x86_64 : APR utility library SQLite DBD driver
libdbi-dbd-sqlite.x86_64 : SQLite plugin for libdbi
python-sqlite.x86_64 : Python bindings for sqlite.
python24-sqlite.x86_64 : Python bindings for sqlite.
sqlite-devel.x86_64 : Development tools for the sqlite3 embeddable SQL database engine
sqlite-doc.x86_64 : Documentation for sqlite
sqlite-tcl.x86_64 : Tcl module for the sqlite3 embeddable SQL database engine
perl-DBD-SQLite.x86_64 : Self Contained RDBMS in a DBI Driver
sqlite.i686 : Library that implements an embeddable SQL database engine
sqlite.x86_64 : Library that implements an embeddable SQL database engine 
```

编辑 2：在启用（默认禁用）[企业 Linux (EPEL) 存储库的附加软件包后，也没有上述软件包可用](http://aws.amazon.com/amazon-linux-ami/faqs/#epel)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T12:56:04.710

我认为 Amazon AMI 现在可以解决这个问题。我从 repos 安装的默认 PHP 5.4 启用了 SQLite3 支持。

```
[root@amazon-ami php.d]# php -m | grep sqlite
pdo_sqlite
sqlite3
[root@amazon-ami php.d]# 
```

例如，此代码对我来说很好：

```
$db = new SQLite3('localDB.sqlite');

$db->exec('CREATE TABLE test (foo STRING)');
$db->exec("INSERT INTO test (foo) VALUES ('bar')");

$results = $db->query('SELECT foo FROM test');

while ($row = $results->fetchArray())
    echo $row['foo']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:29:01.687

我最终为此放弃了 EC2，并在 VM 中安装了 Linux Mint。

如果有人知道解决方案，尽管我很乐意接受他的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-26T18:16:59.590

对于 Amazon linux 上的 sqlite，我做了以下操作：

```
sudo yum install sqlite-devel 
```

# objective-c - 使用gestureRecognizer时两个手势识别器之间的顺序：shouldRecognizeSimultaneouslyWithGestureRecognizer：

> ID：13161879
> 
> 赞同：5
> 
> 时间：2012-10-31T15:53:05.827
> 
> 标签：objective-c, uigesturerecognizer

我有一个`UIScrollView`，我添加了一个`UIPanGestureRecognizer`。

我想同时使用`scrollView.panGestureRecognizer`（默认的）和我的自定义识别器。

所以我将函数重写`gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:`为YES，并且我都`panGestureRecognizer`调用了。

我的问题是我需要先调用我的自定义识别器，然后再调用默认识别器。

在文档中，我读到：

> 在默认行为中，多点触控序列中的触摸事件以**不确定**的顺序从一个手势识别器传递到另一个手势识别器，直到事件最终传递到视图（如果有的话）。

有没有办法让两个识别器都以**确定**的顺序活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:49:59.320

您是否尝试过使用：

```
- (void)requireGestureRecognizerToFail:(UIGestureRecognizer *)otherGestureRecognizer 
```

您可以在`UIScrollView`平移手势识别器上调用它，以确保首先调用您的自定义识别器。

# wordpress - Wordpress 密码保护 - PHP 谁已登录？

> ID：13161880
> 
> 赞同：0
> 
> 时间：2012-10-31T15:53:08.760
> 
> 标签：wordpress, password-protection

我使用[受密码保护的子页面插件](http://fullthrottledevelopment.com/password-protect-children-pages)在我的页面上使用 2.8 Wordpress 的通用密码保护，并且我还在受保护的子页面上包含 PHP 文件，但我想弄清楚如果他们正在查看我需要哪些 PHP 代码输入密码“A”或输入密码“B”的页面

这甚至可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T20:18:13.143

好的，我使用 is_page() 函数来分配一个变量...不是最好的解决方案，因为我必须将任何新页面添加到 php 文件中，以检查哪些页面进入每个密码，但我只能这样做想出。

# metadata - 避免在 OBIEE 中刷新 GUID

> ID：13161882
> 
> 赞同：1
> 
> 时间：2012-10-31T15:53:11.687
> 
> 标签：metadata, business-intelligence, obiee

每次在 Linux 上使用企业管理器部署 OBIEE 的元数据存储库后，我都无法登录 Answers (/analytics)。它在我刷新 GUID 后工作。有没有办法避免刷新 GUID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T20:56:08.103

在部署前离线打开 rpd，转到管理 -> 身份 -> 用户 检查您的用户是否在 rpd 中，如果有，请删除它们。现在在您的目标实例上部署您的 rpd。这应该没问题。您不必重置 GUID...干杯，RamC

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:53:11.687

就在这里。

1.  停止 BI 服务器

    opmnctl stopproc ias-component=coreapplication_obis1

2.  备份原始存储库

    cp repository1.rpd repository2.rpd

3.  在 Windows 机器上修改 repository1.rpd 并将其复制回运行 OBIEE 的 Linux 机器

4.  启动 BI 服务器

    opmnctl startproc ias-component=coreapplication_obis1

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-08-08T18:53:53.927

# 在 Linux 中停止服务：

1.停止opmnctl

导航到 /instances/instance1/bin

./opmnctl stopall

2.停止托管服务器（bi_server1）

导航到 /user_projects/domains/bifoundation_domain/bin

./stopManagedWebLogic.sh bi_server1

3.停止管理服务器（weblogic）

在上述相同的位置

./stopWebLogic.sh 4.停止节点管理器

只需杀死节点管理器进程

ps -ef|grep node –查找nodemanger pid

杀死 -9

注意：如果 Managed 和 Admin server 没有正确停止，你可以像上面一样杀死

ps -ef|grep weblogic

杀死 -9

启动服务：

=======================

1.启动节点管理器

导航到 /wlserver_10.3/server/bin

nohup sh startNodeManager.sh &

2.启动管理服务器

导航到 /user_projects/domains/bifoundation_domain/bin

nohup sh startWebLogic.sh -Dweblogic.management.username=weblogic -Dweblogic.management.password=weblogic123 > admin_server.log &

提示：您可以使用 tail 命令查看日志

tail -f admin_server.log ctrl-z 或 ctrl-c 退出日志窗口

3.启动托管服务器（bi_server1）

在上述相同的位置

nohup sh startManagedWebLogic.sh bi_server1 http://managed_server.log &

4.  启动 opmnctl

导航到 /instances/instance1/bin

./opmnctl startall

# c++ - 将指向堆对象的指针存储在 STL 容器中以供以后释放

> ID：13161887
> 
> 赞同：1
> 
> 时间：2012-10-31T15:53:22.233
> 
> 标签：c++, stl, c++11, cuda

如何在 STL 容器中存储任意数量的动态创建的实例（不同类型的），以便以后只有容器才能释放内存？

它应该像这样工作：

```
std::vector< void * > vec;
vec.push_back( new int(10) );
vec.push_back( new float(1.) ); 
```

现在，如果`vec`超出范围，则指向实例的指针将被破坏，但不会释放`int`和的内存。`float`显然我不能这样做：

```
for( auto i : vec )
  delete *i; 
```

因为`void*`不是指向对象的类型。

您可能会反对并争辩说这不是一个好主意，因为无法访问向量的元素。没错，我自己也不会访问它们。NVIDIA 驱动程序将访问它们，因为它只需要地址（`void*`很好）作为内核调用的参数。

我想这里的问题是它可以存储不同的类型。想知道如果`union`想将其作为参数传递给 cuda 内核，是否可以解决问题。

内核采用不同类型的参数，并通过遍历您事先不知道类型的表达式树（表达式模板）来收集。因此，在访问叶子时，您将存储参数。它只能是 void*，以及内置类型 int、float 等。

可以在内核启动后立即删除向量（启动是异步的，但驱动程序首先复制参数然后继续主机线程）。第二个问题：每个参数都传递一个 void* 给驱动程序。无论它是 int、float 还是 void*。所以我想一个人可以分配比需要更多的内存。我认为工会的东西可能值得一看。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T15:58:36.820

您可以使用您想要支持的每种类型的一个向量。

但是，虽然这对 的向量的想法有了很大的改进`void*`，但它仍然很臭。

这听起来确实像一个**XY 问题**：你有一个问题 X，你设想了一个解决方案 Y，但是如果没有某种巧妙的适应，Y 显然是行不通的，所以询问 Y。相反，应该询问真正的问题X. 哪个是？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:38:59.480

好的，FWI

我建议使用就地 new 与`malloc`. 这样做是允许您将创建的指针存储`void*`在向量中。然后当向量完成时，可以简单地迭代并`free()`调用它。

IE

```
void* ptr = malloc(sizeof(int));
int* myNiceInt = new (ptr) int(myNiceValue);
vec.push_back(ptr);

//at some point later iterate over vec
free( *iter ); 
```

我相信这将是在这种情况下问题的最简单解决方案，但请接受这是一个类似“C”的答案。

只是在说' ;）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T16:18:50.220

无论如何，“NVIDIA 驱动程序”听起来像一个 C 接口，所以`malloc`这不是一个疯狂的建议。

正如您所建议的，另一种选择是使用联合...但是您还需要将“标签”存储在并行向量中以记录元素的实际类型，以便您可以在删除时转换为适当的类型。

简而言之，您必须先强制`void *`​​转换为适当的类型`delete`。“C++ 方式”是拥有一个带有虚拟析构函数的基类；`delete`当它指向任何子类的实例时，您可以调用它。但是，如果您使用的库已经确定了类型，那么这不是一个选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T23:17:41.060

如果您可以控制类型，则可以为它们创建一个抽象基类。给那个类一个虚拟析构函数。然后你可以让你的`std::vector<Object*>`和迭代它来删除任何继承自 Object 的东西。

您可能需要第二个`std::vector<void*>`指向实际值的指针，因为它`Object*`可能首先命中 vtable。第二个虚拟功能`virtual void* ptr() { return &value; }`在这里会很有用。如果它需要对象的大小，您也可以添加它。

您可以像这样使用模板模式：

```
template<typename T>
class ObjVal : public Object {
    public:
    T val;
    virtual void* ptr() { return &this->val; }
    virtual size_t size() { return sizeof(this->val); }
}; 
```

然后，您只需键入一次。

这不是特别有效的内存，因为每个 Object 至少为 vtable 选择一个额外的指针。

但是，`new int(3)`内存效率也不是很高，因为您的分配器可能使用超过 4 个字节。添加该 vtable 指针可能基本上是免费的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-31T16:07:42.520

使用超过 1 个向量。保持与`vector<void*>`API 交谈（我猜这需要一个连续的非统一类型的 void*s 块？），但也有一个`vector<std::unique_ptr<int>>`并且`vector<std::unique_ptr<float>>`拥有数据。创建`new`int 时，将`unique_ptr`拥有内存的 a 推送到您`vector`的 of 中`int`，然后将其`vector`作为`void*`. 将三个`vector`s`struct`捆绑在一起，以便尽可能将它们的生命周期捆绑在一起（并且可能是）。

您也可以使用存储变量所有权的单个向量来执行此操作。一个`vector`你自己的 RAII 伪类`unique_ptr`，或者`shared_ptr`带有自定义的销毁器，或者你`vector`的`std::function<void()>`“捆绑”结构的销毁器调用的一个，或者你有什么。但我不会推荐这些选项。

# php - 我们如何使用 facebook open graph api 在我们的网页中捕捉用户 最近的活动？

> ID：13161890
> 
> 赞同：1
> 
> 时间：2012-10-31T15:53:31.170
> 
> 标签：php, facebook, facebook-opengraph

我的项目有问题，我需要你的帮助。

我想在我的网页上捕捉用户最近的活动，例如：假设如果用户点击我的网址，然后点击一些超链接来下载文件。所以这里用户做了两个活动——第一次点击超链接，第二次下载了一张图片。

基本上，我想捕捉用户的这一活动（即用户在我的网站上完成的活动）并将其发布在用户 Facebook 个人资料的“近期活动”部分。使用 Facebook 开放图形 API 可以做到这一点吗？我是新手，任何建议都会对我有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:03:34.403

Open Graph Follows 将允许您发布最近的活动，特别是“关注活动的通知和故事”部分。该人必须关注您并安装您的应用程序。但随后您可以发布“故事”，例如“马克喝了一杯冰茶”。确保您告诉 Facebook 您需要应用的“publish_actions”权限。

至于*如何*实现这一点，请使用 ajax 回调来为您发布这些内容的 PHP 脚本。

文档[在这里](https://developers.facebook.com/docs/opengraph/actions/builtin/follows/)

# asp.net-mvc - 在表单外添加帖子

> ID：13161899
> 
> 赞同：1
> 
> 时间：2012-10-31T15:53:57.230
> 
> 标签：asp.net-mvc, actionmethod

我的剃刀视图中有一个表格，它完全可以正常工作。我从下拉列表中选择值并按下提交按钮，它会返回给我一组分页的结果。一切都很好。

```
@using (Html.BeginForm())
    {
        int index = 0;
        foreach (var type in @Model.AttributeTypes)
        {
            @Html.DropDownListFor(m => m.SelectedAttributeValueIds[index], Model.AttributeValuesList[Convert.ToInt32(@type.Value)], "Filter by " + type.Text)
            index++;
        }

        <input type="submit" value="Filter"/>
} 
```

问题是在页面底部，在表单之外，我想要一个显示所有按钮/链接。按下这个按钮应该和上面的提交按钮做同样的事情。换句话说，我希望这个显示所有按钮显示最后一个查询的所有结果（或下拉列表中当前选择的值 - 不要太在意哪个）而无需分页。我可以做无分页位，这很容易。我想知道的是我的按钮/链接将如何从表单外部的下拉列表中获取值并提交该表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:56:47.683

使用 javascript 读取有关获取信息所需的 dom 元素的信息，然后他们提交 ajax 请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:57:27.967

您可以使用 javascript/jquery在单击该按钮时[提交表单。](http://api.jquery.com/submit/)

```
$('#formId').submit(); 
```

要将其连接起来，您可以在文档就绪脚本上执行以下操作：

```
$('#buttonId').click(function() {
  $('#formId').submit();
}); 
```

# java - Java关于 在公共静态 空白

> ID：13161902
> 
> 赞同：9
> 
> 时间：2012-10-31T15:53:59.890
> 
> 标签：java

使用 Java：我不想浪费人们的时间并在这里发布，但是我的谷歌搜索技能让我失望了，我找不到答案。我正在查看一些提供的代码，他们使用

```
public static <E> void printTree(TwoFourTree<E> tf) 
```

（作为参考，我们正在从红黑树转换为二四树）。当我第一次处理这个问题时，我会使用而不是甚至不包含在`public static void`. 但是我遇到了`<E>`问题，尽管使用`<Integer>`而不是`<E>`其他任何地方，都解决了我所有的问题。

`<E>`所以我的问题是，有人可以向我解释一下

```
public static <E> void 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T16:00:39.513

这是一个称为[泛型](http://docs.oracle.com/javase/tutorial/java/generics/)的 Java 功能。

为什么要使用泛型？好吧，下面给出了它们有用的一种场景。回到“糟糕的过去”，如果你想拥有一个可以处理任何对象的类，你必须根据对象声明它的所有接口，例如

```
public class MySuperList
{
    public void Add(object a) { }
} 
```

然而，这很糟糕，因为你没有类型安全——你可以编写如下代码：

```
// Your code
MySuperList list = new MySuperList();
cars.Add(new Car("Ford Mondeo"));// Works
cars.Add(new Fish("Herring")); // Works - which is a shame as a Fish is not a car! 
```

泛型解决了这个问题，允许您以一种通用的方式强类型化您的类。例如：

```
public class MySuperList<T>
{
    // Add method will only accept instances of type T.
    public void Add(T a) { }
}

// Your code
MySuperList<Cars> list = new MySuperList<Cars>();
cars.Add(new Car("Ford Mondeo"));// Works
cars.Add(new Fish("Herring")); // Compile-time error. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:56:51.987

它创建了一个*通用方法*；即，它允许您使用`TwoFourTree`包含任何类型对象的 a 作为您的参数（在这种情况下）。

例如，如果您只想接受`TwoFourTree`包含 type 对象的 s `List`，您可以将方法定义为

```
public static <E extends List> void ... 
```

如果您只想要`Number`对象（`Integer`等`Double`），您会这样做

```
public static <E extends Number> void ... 
```

这就是为什么创建这样的方法实际上是有用的原因。我应该指出，乐趣不止于此，您可以使用多个类型参数来做同样的事情，例如：

```
public static <T, S extends Number> void ... 
```

如果您想了解更多信息，我认为您可能会发现阅读[本关于泛型方法的教程很有帮助。](http://docs.oracle.com/javase/tutorial/extra/generics/methods.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T16:00:19.443

而不是写

```
public static Integer ...
public static Double ...
public static Long ... 
```

...

你所做的就是创建泛型方法

```
public static <E> 
```

# ruby - 正则表达式“char 类错误中的空范围”

> ID：13161903
> 
> 赞同：14
> 
> 时间：2012-10-31T15:54:00.267
> 
> 标签：ruby, regex, irb

我的代码中有一个正则表达式，它匹配 url 的模式并抛出错误：

```
/^(http|https):\/\/([\w-]+\.)+[\w-]+([\w- .\/?%&=]*)?$/ 
```

错误是“char 类错误中的空范围”。我发现这是`([\w- .\/?%&=]*)?`部分原因。Ruby 似乎将`-`in识别`\w- .`为 range 而不是文字的运算符`-`。在破折号中添加转义后，问题就解决了。

但原来的正则表达式在我同事的机器上运行良好。我们使用相同版本的 osx、rails 和 ruby​​：Ruby 版本是 ruby​​ 1.9.3p194，rails 是 3.1.6，osx 是 10.7.5。在我们将代码部署到我们的 Heroku 服务器之后，一切都运行良好。为什么只有我的环境对此正则表达式有错误？Ruby regex 解释的机制是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-08T08:57:29.457

我可以在使用 rvm 1.13.4 安装在 Ubuntu 12.04.1 LTS 上的 Ruby 1.9.3p194（2012-04-20 修订版 35410）[i686-linux] 上复制此错误。但是，这不应该是特定于版本的错误。事实上，我很惊讶它完全可以在其他机器上运行。

一个同样失败的简单演示：

```
"abcd" =~ /[\w- ]/ 
```

这是因为`[\w- ]`它被解释为“以空格（或空白）之前的任何单词字符开头的范围”，而不是包含单词、连字符或空格的字符类，这正是您想要的。

[根据 Ruby 的正则表达式文档](https://github.com/ruby/ruby/blob/trunk/doc/re.rdoc)：

> 在字符类中，连字符 (-) 是表示包含字符范围的元字符。[abcd] 等价于 [ad]。一个范围后面可以跟另一个范围，所以 [abcdwxyz] 等价于 [a-dw-z]。范围或单个字符出现在字符类中的顺序无关紧要。

如您所见，在反斜杠前面添加了连字符，从而将正则表达式的性质从范围更改为字符类，从而消除了错误。但是，不建议在字符类中间转义连字符，因为在这种情况下很容易混淆连字符的预期含义。正如 m.buettner 指出的那样，始终将连字符放在字符类的开头或结尾：

```
"abcd" =~ /[-\w ]/ 
```

# google-app-engine - 需要将辅助域添加到 GAE 应用程序

> ID：13161906
> 
> 赞同：4
> 
> 时间：2012-10-31T15:54:16.470
> 
> 标签：google-app-engine

我有一个在 myappname.appspot.com 上运行的 AppEngine 应用程序，并且我添加了 URL status.domain1.com。但是，整个项目的重点是让应用程序运行在：status.domain2.com。我们将 domain1.com 作为与我们的 Google Apps 帐户关联的主域，并且 domain2.com 将该帐户链接为活动域。

当我在控制面板中转到“myappname (App Engine) 设置”并尝试“添加新 URL”作为 status.domain2.com 时，我收到错误横幅：

```
The term &#39;domain2.com&#39; is not allowed. 
```

即使“domain2.com”被列为与我们帐户关联的域之一，并且在下拉菜单中可用，这也是如此。

如何让 VirtualHost status.domain2.com 工作？我们的 Google Apps 帐户中已经有此域，但 Google Apps 支持无法提供帮助。

这个问题类似于[Google App Engine and domain name](https://stackoverflow.com/questions/6532300/google-app-engine-and-domain-name)和 [How do I point multiple domain names at a single Google App Engine application？](https://stackoverflow.com/questions/10369151/how-do-i-point-multiple-domain-names-at-a-single-google-app-engine-application)，但在这种情况下，我可以将“myname@domain2.com”添加为 Google Apps 上“domain2.com”域的管理员，并且当我添加“domain2.com”作为下拉选项时“添加新 URL”，但我仍然收到错误消息。

GAE 中的这个错误让我把头发拔了出来。希望我没有走这条路。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T22:12:02.957

为了将 status.domain2.com 与应用引擎一起使用，您必须将其作为域别名而不是活动域添加到您的 google 应用程序帐户中。

Google 不会让这很容易找到，但请参阅此页面的最后一段：http: [//support.google.com/a/bin/answer.py ?hl=en&answer=182081](http://support.google.com/a/bin/answer.py?hl=en&answer=182081)

# mysql - 如何加入 MySQL 查询

> ID：13161907
> 
> 赞同：1
> 
> 时间：2012-10-31T15:54:16.047
> 
> 标签：mysql, join

我有 2 个要加入的表。

`Table 1`是一个主表，包含一组唯一的行。

```
ID DESCRIPTION
01 Alpha
02 Gamma
03 Delta
04 Beta 
```

`Table 2`是一个包含许多行的明细表，其中只有一些行与主表匹配。

```
ID   INFO MASTER_ID
0001 abc  02
0002 def  02
0004 xyz  01
0005 mno  04 
```

我想加入表格以产生以下结果：

```
Alpha "has detail"
Gamma "has detail"
Delta "does not have detail"
Beta "has detail" 
```

而不是：

```
Alpha "has detail"
Gamma "has detail"
Gamma "has detail"
Delta "does not have detail"
Beta "has detail" 
```

后面的输出返回 Gamma 两次，我只希望它返回一次。

我尝试了 LEFT JOIN、RIGHT JOIN、INNER JOIN，但它们都没有产生我想要的结果。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T15:57:30.100

使用`LEFT JOIN`可能你错过了一些东西

```
SELECT  CONCAT(a. description, IF(b.master_ID IS NOT NULL, ' has detail',' does not have detail'))
FROM    table1 a
        LEFT JOIN (SELECT DISTINCT master_ID FROM table2) b
            ON a.ID = b.master_ID 
```

*   [**SQLFIDDLE 演示**](http://sqlfiddle.com/#!2/e302e/1)
*   [**SQLFIDDLE 演示**（*带双引号*）](http://sqlfiddle.com/#!2/e302e/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:57:18.087

也许是这样的：

```
SELECT
    Table1.DESCRIPTION,
    (
        CASE 
            WHEN EXISTS(SELECT NULL FROM Table2 WHERE Table2.MASTER_ID=Table1.ID)
            THEN 'has detail'
            ELSE 'does not have detail'
        END
    ) AS has
FROM
    Table1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T16:21:58.667

只是一种不同的方法：

```
SELECT
  table1.description,
  IF((EXISTS(SELECT master_id from table2  where table2.master_id = table1.id)),
    'has detail',
    'does not have detail') As Status
FROM table1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T16:07:33.420

```
SELECT a.Description, IF(b.Info, "has detail", "does not have detail") as Status
FROM Table_1 a
LEFT OUTER JOIN Table_2 b
ON a.MASTER_ID = b.MASTER_ID
GROUP BY 1,2; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T16:10:25.350

如果您的输出包含详细信息部分，那么您必须查看两行（因为它是有效结果），或者您需要通过选择 FIRST、MAX 等来聚合结果。

如果您本身不需要详细信息值，则替代方法是执行两个 SELECT 并使用 UNION：

```
 SELECT DISTINCT Table1.Description, "does not have detail" as Comment
    FROM Table1
    LEFT JOIN Table2 ON (Table1.ID = MASTER_ID)
    WHERE Table2.id IS NULL

    UNION 

    SELECT DISTINCT Table1.Description, "has detail" as Comment
    FROM Table1
    LEFT JOIN Table2 ON (Table1.ID = MASTER_ID)
    WHERE Table2.id IS NOT NULL 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T16:14:26.090

您也可以使用 groupby 来实现此目的

```
SELECT a.Description, IF(count(b.id) > 0, "has detail", "does not have detail") as Status
FROM Table1 a
LEFT OUTER JOIN Table2 b
ON a.iD = b.MASTER_ID
GROUP BY a.Description ORDER BY a.Description ASC 
```

# drupal - drupal 将 node_access 钩子添加到现有模块（OG）

> ID：13161909
> 
> 赞同：0
> 
> 时间：2012-10-31T15:54:23.943
> 
> 标签：drupal, drupal-6, hook, drupal-modules, drupal-hooks

请不要问我为什么需要这样做，或者我为什么这么变态。

我在 drupal 6 上有一个 Organic Groups 模块。出于某种原因，我需要向该模块添加 node_access 挂钩。

“og.module”文件或任何文件中没有预设的node_access钩子，连接到这个模块（我已经检查过了）。我尝试使用以下主体添加“og_node_access”函数：“echo '1111111';return true;” 它不会在任何地方触发（根本没有回声）。我试图将它添加到 og.module 文件中。

PS：请不要为 OG 推荐任何访问扩展 - 我已经尝试了很多。我需要的是：（伪代码）

```
 if ($op=='view'){
      if ($node->type == 'xxxx' || $node->type =='yyyyyyyy') {
          SHOW THIS TYPE OF NODES ONLY TO ADMIN(S) OF THE GROUP (OR SITE) AND THE AUTHOR OF THE NODE, NOBODY ELSE (EVEN IN THE SAME GROUP) IS ALLOWED TO SEE IT OR TOUCH IT.
      } else {
        USE DEFAULT RULES (return IGNORE);
      }
    } 
```

而且我需要对它进行硬编码，因为分类法访问、内容访问和其他“访问”模块不能与 OG 模块一起正常工作（实际上它们根本不工作）。

PPS：我知道，OG 有点糟糕，有几种选择，但我只需要以描述的方式完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:50:32.747

所以... node_grants 钩子（我在评论中打错了“node_grants”而不是“access_grants”）解决了我的问题。不幸的是，我花了太多时间（一整天）在谷歌上搜索并试图了解一些复杂的 drupal 赠款系统。无论如何，谢谢你~~（所有人）~~~~的~~回答。

# java - 从 MBean 检索属性时出现问题

> ID：13161912
> 
> 赞同：1
> 
> 时间：2012-10-31T15:54:39.377
> 
> 标签：java, attributes, jmx

我尝试`Token`从 JBoss7 中的 MBean 访问字符串属性。我可以验证 MBean 是否已注册并且 getter`String getToken()`是接口的一部分。 `mbServer`拥有 mbean 服务器和`objName`正确的`ObjectName`.

我尝试了三种方法来访问该属性。第二个失败。

1.  `final String token1 = (String)mbServer.getAttribute(objName, "Token");`成功

2.  `final String token2 = (String)mbServer.invoke(ojbName, "getToken", new Object[]{}, new String[]{});`=>`ReflectionException, No such operation: getToken`

3.  这个有效：

    ```
    final MyMBean mbean = JMX.newMBeanProxy(mbServer, objName, MyMBean.class);
    final String token3 = mbean.getToken(); 
    ```

为什么第二个失败了？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:32:17.713

对于#1，属性名称应为“Token”

# java - 无法在 Eclipse 中找到 svn 选项？

> ID：13161914
> 
> 赞同：1
> 
> 时间：2012-10-31T15:54:41.997
> 
> 标签：java, svn

我已经导入了一个 Maven 项目。我做了一些修改，需要签入。我在我的 Eclipse 中安装了 subclipse。但是当我右键单击该项目时，我找不到提交、与存储库同步等选项。

我只看到右键单击项目的两个选项。他们是 ：

```
Team ----> **apply patch** and **share project** 
```

如果我选择共享项目，我会收到以下错误：

```
svn: The path 'D:\myproject_space' appears to be part of a Subversion 1.7 or greater
working copy.  Please upgrade your Subversion client to use this
working copy. 
```

我怎样才能获得其他功能？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:58:44.450

要支持 Subversion 1.7 和相应的工作副本格式，您需要安装 Subclipse 1.8.x。[请参阅Subclipse 网站上](http://subclipse.tigris.org/)的下载选项卡。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T16:03:30.247

要使用 SVN 1.7，您需要通过将以下内容添加到更新站点列表来安装 Subclipse 1.8：`http://subclipse.tigris.org/update_1.8.x`

# ruby - EventMachine 和 em-websocket - 从队列中读取并推送到通道

> ID：13161920
> 
> 赞同：4
> 
> 时间：2012-10-31T15:55:09.890
> 
> 标签：ruby, websocket, jruby, eventmachine, em-websocket

我正在使用 eventmachine 从 HornetQ 主题中读取，推送到由 EM websocket 连接订阅的频道。我需要防止 @topic.receive 循环阻塞，因此创建了一个 proc 并在没有回调的情况下调用 EventMachine.defer。这将无限期地运行。这工作正常。我也可以只使用 Thread.new。

我的问题是，这是从流/队列中读取数据并将数据传递到通道的正确方法吗？还有更好的/其他方法吗？

```
require 'em-websocket'
require 'torquebox-messaging'

class WebsocketServer

  def initialize
    @channel = EM::Channel.new

    @topic = TorqueBox::Messaging::Topic.new('/topics/mytopic')
  end 

  def start
    EventMachine.run do

      topic_to_channel = proc do
        while true
          msg = @topic.receive
          @channel.push msg
        end
      end

      EventMachine.defer(topic_to_channel)

      EventMachine::WebSocket.start(:host => "127.0.0.1", :port => 8081, :debug => false) do |connection|
        connection.onopen do

          sid = @channel.subscribe { |msg| connection.send msg }

          connection.onclose do            
            @channel.unsubscribe(sid)
          end
        end
      end                  
    end
  end
end

WebsocketServer.new.start 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-28T18:57:47.147

这没关系，但是 EM.defer 会产生 20 个线程，所以我会避免它用于您的用例。一般来说，我会完全避免使用 EM，尤其是 Java 反应器，因为我们从未完成它。

Torquebox 有一个原生 stomp over websockets 解决方案，在这种情况下这将是一个更好的方法，并为您解决了许多其他封装挑战。

如果你真的想为此坚持使用 EM，那么我会使用 Thread.new 而不是 defer，以避免 19 个空闲线程无缘无故地占用额外的内存。

# python - Python sklearn.mixture.GMM 对扩展不健壮？

> ID：13161923
> 
> 赞同：3
> 
> 时间：2012-10-31T15:55:24.653
> 
> 标签：python, machine-learning, gaussian, scikit-learn

我在 Python 中使用[sklearn.mixture.GMM](http://scikit-learn.org/0.11/modules/generated/sklearn.mixture.GMM.html)，结果似乎取决于数据缩放。在以下代码示例中，我更改了整体缩放比例，但不更改尺寸的相对缩放比例。然而，在三种不同的缩放设置下，我得到了完全不同的结果：

```
from sklearn.mixture import GMM
from numpy import array, shape
from numpy.random import randn
from random import choice

# centroids will be normally-distributed around zero:
truelumps = randn(20, 5) * 10

# data randomly sampled from the centroids:
data = array([choice(truelumps) + randn(5) for _ in xrange(1000)])

for scaler in [0.01, 1, 100]:
    scdata = data * scaler
    thegmm = GMM(n_components=10)
    thegmm.fit(scdata, n_iter=1000)
    ll = thegmm.score(scdata)
    print sum(ll) 
```

这是我得到的输出：

```
GMM(cvtype='diag', n_components=10)
7094.87886779
GMM(cvtype='diag', n_components=10)
-14681.566456
GMM(cvtype='diag', n_components=10)
-37576.4496656 
```

原则上，我认为整体数据缩放并不重要，总对数似然每次都应该相似。但也许我忽略了一个实施问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T18:28:36.543

I've had [an answer via the scikit-learn mailing list](http://sourceforge.net/mailarchive/forum.php?thread_name=50914D1F.4020708%40inria.fr&forum_name=scikit-learn-general): in my code example, the log-likelihood **should** indeed vary with scale (because we're evaluating point likelihoods, not integrals), by a factor relating to `log(scale)`. So I think my code example in fact shows GMM giving correct results.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T16:27:49.790

我认为 GMM 是尺度相关的（例如 k-means），因此建议按照[文档的预处理章节中的](http://scikit-learn.org/stable/modules/preprocessing.html)说明对输入进行标准化。

# mysql - 为什么我收到 MySQL 错误 1064

> ID：13161926
> 
> 赞同：-1
> 
> 时间：2012-10-31T15:55:46.897
> 
> 标签：mysql

这是我的表定义：

```
CREATE TABLE IF NOT EXISTS `sms_data_updated` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `id_sms_received` int(10) unsigned DEFAULT NULL,
  `sender_name` varchar(50) NOT NULL,
  `sender_number` char(14) NOT NULL,
  `key_word` varchar(20) NOT NULL,
  `message_content` varchar(160) NOT NULL,
  `date_received` datetime NOT NULL,
  `date_inserted` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `categories` varchar(100) NOT NULL,
  `Division` varchar(30) NOT NULL,
  `location_name` varchar(80) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ; 
```

当使用以下 INSERT 语句时：

```
INSERT INTO sms_data_updated (id_sms_received, sender_name, sender_number, key_word, message_content, date_received, Division, location_name) 
VALUES (1,Shahriar Khondokar,+1726740333,,This is message content1\. I need help1.,2012-10-16 10:11:09,Barisal,Borishal) 
```

我收到以下错误消息：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version 
for the right syntax to use near 'Khondokar,+8801726740333,,This is message content1\. I need help1.,2012-10-16 10:' at line 1 
```

知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T15:59:33.757

字符串值必须用单引号括起来

```
VALUES(1,'Shahriar Khondokar','+172674033','This is message content1.',...) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:58:09.210

看起来你在`location_name`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T15:58:55.297

像 Shahriar Khondoka 这样的字符串需要引号。像这样：

```
INSERT INTO sms_data_updated (id_sms_received, sender_name, sender_number, key_word, message_content, date_received, Division, location_name, Latitude, Longitude) 
VALUES (1,'Shahriar Khondokar',rest of columns...) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T16:03:00.850

您有不同数量的值作为您在查询中插入的行数。这可能会导致问题。

# node.js - Node.js：在网页按钮单击上执行命令

> ID：13161931
> 
> 赞同：1
> 
> 时间：2012-10-31T15:55:56.780
> 
> 标签：node.js

如何使用 NodeJs 和 PHP 在网页按钮单击或键盘按键上执行 linux shell 命令？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:00:01.123

我不太明白。你想点击一个按钮并且nodejs执行一个命令吗？如果是，这是 nodejs 部分

```
var sys = require('sys')
var exec = require('child_process').exec;
function puts(error, stdout, stderr) { sys.puts(stdout) }
exec("ls", puts); // Command 
```

在按钮上，您将分配一个向 nodejs 发出请求的 ajax 调用 onclick。

来源：[http ://www.dzone.com/snippets/execute-unix-command-nodejs](http://www.dzone.com/snippets/execute-unix-command-nodejs)

# smartgit - SmartGit - 选择多个提交中的所有文件

> ID：13161932
> 
> 赞同：5
> 
> 时间：2012-10-31T15:55:57.427
> 
> 标签：smartgit

我正在 SmartGit 中寻找一种方法来选择多个提交中的所有文件。本质上，我需要在提交 A 和提交 C 之间更改的每个文件的列表，包括来自提交 B 的文件。我还在寻找一种方法来复制每个更改文件的相对文件路径，但仅文件视图允许在仅选择单个文件时选择相对文件路径的选项。一旦我选择了多个文件，我复制其文件路径的能力就会消失。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T16:00:33.893

在日志窗口中选择提交 A 和 C。在文件列表中，您可以看到所有文件。然后按 Ctrl-C。

# php - 用php上传图片

> ID：13161934
> 
> 赞同：0
> 
> 时间：2012-10-31T15:56:06.470
> 
> 标签：php, upload

我有这个代码来上传图片：

```
$name = "test.jpg";
if (isset($_FILES['image']))
{
        if ($_FILES['image']['size'] <= 500000)
        {
                $extensions_ok = array( 'jpg' , 'jpeg' , 'gif' , 'png' );
                $extension_upload = strtolower(  substr(  strrchr($_FILES['image']['name'], '.')  ,1)  );
                if (in_array($extension_upload,$extensions_ok))
                {
                    move_uploaded_file($_FILES['image']['tmp_name'],$name);
                }

        }

} 
```

例如，它正在处理一些图片，但对于其他图片则不起作用（即使尺寸小于 5mo），它正在处理这个：![在此处输入图像描述](../Images/a87652f425b45b9b85cbef1ebcce2e4e.png)

但不是这个：![在此处输入图像描述](../Images/cd97556f8fecabf9576f059fa00274b3.png)

# drools - Drools 执行服务器指向 Guvnor 存储库

> ID：13161937
> 
> 赞同：4
> 
> 时间：2012-10-31T15:56:16.360
> 
> 标签：drools, drools-guvnor

我正在尝试调用在 tomcat6 上运行的 drools 执行服务器（5.4.0），它指向之前在 Guvnor 存储库（.pkg 文件）中创建的快照。

根据教程，我只需编辑位于我的执行服务器的 /webapps/drools-webapp/WEB-INF/classes 中的 Knowledge-service.xml 文件。因此应该添加一个指向 Guvnor 存储库的新资源（见下文）：

```
<drools:kbase id="kbase1" node="node1">
      <drools:resources>
         <!--   <drools:resource  type="DRL" source="classpath:test.drl"/> -->
         <drools:resource  type="PKG" source="http://localhost:9080/guvnor-webapp/org.drools.guvnor.Guvnor/package/bonita/LATEST" basic-authentication="enabled"  />
    </drools:resources>
  </drools:kbase> 
```

该 URL 指向使用 Guvnor 创建并提供 .pkg 文件的快照。

这里的问题：

调用 drools 执行服务器后，我收到一条如下所示的错误消息：

Tomcat日志：

```
INFO: Server startup in 4358 ms
31.10.2012 14:21:07 org.apache.cxf.jaxrs.impl.WebApplicationExceptionMapper toResponse
WARNUNG: WebApplicationException has been caught : bonita.BonitaPerson : bonita.BonitaPerson
---- Debugging information ----
message             : bonita.BonitaPerson
cause-exception     : com.thoughtworks.xstream.mapper.CannotResolveClassException
cause-message       : bonita.BonitaPerson
class               : org.drools.command.runtime.rule.InsertObjectCommand
required-type       : org.drools.command.runtime.rule.InsertObjectCommand
converter-type      : org.drools.runtime.help.impl.XStreamXML$InsertConverter
path                : /batch-execution/insert/bonita.BonitaPerson
line number         : 3
class[1]            : org.drools.command.runtime.BatchExecutionCommandImpl
converter-type[1]   : com.thoughtworks.xstream.converters.reflection.ReflectionConverter
version             : null
------------------------------- 
```

我认为从 drools 执行服务器到 guvnor 存储库的重定向不起作用，并且找不到必要的类。即使我关闭了我的 Guvnor 服务器，我也会收到相同的错误消息。对我来说，Guvnor 服务器永远不会被 drools 执行服务器调用......

谁能帮我弄清楚从drools到guvnor的正确重定向是什么样的？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T15:20:36.863

我有类似的问题。请看这篇文章 [..drools-rest-cannotresolveclassexeption](https://stackoverflow.com/questions/16695954/drools-rest-cannotresolveclassexception/16738333#16738333)

基本上你的元素不正确。它应该看起来像这样：

```
<drools:resource  type="PKG" source="http://localhost:9080/guvnor-webapp/rest/package/bonita/LATEST" basic-authentication="enabled" username="admin" password="admin" /> 
```

*   我没有要评论的声誉点，所以这就是我创建答案而不是评论的原因。

# regex - 需要正则表达式的帮助来重写 URL 路径（对于 Cherokee）

> ID：13161938
> 
> 赞同：1
> 
> 时间：2012-10-31T15:56:17.267
> 
> 标签：regex, apache, .htaccess, mod-rewrite

我需要帮助来编写一个正则表达式来重定向 URL 路径：

`http://mydomain.com/files/2012/10/image_4-1.png`

到：

`http://mydomain.com/wp-content/blogs.dir/5/files/2012/10/image_4-1.png`

...`wp-content/blogs.dir/5`需要添加（它是静态的）。

只是想不通......任何人都可以帮助使用正则表达式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:00:04.160

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^(files/2012/10/image_4-1\.png)$ wp-content/blogs.dir/5/$1 [L,R=302,NC] 
```

**PS：**如果要`wp-content/blogs.dir/5`在每个路径之前添加，请使用此规则：

```
RewriteRule (?!^wp-content/blogs.dir/5/)^(.*)$ wp-content/blogs.dir/5/$1 [L,R=302,NC] 
```

# c# - VS2010 C# 64bit app throws OutOfMemoryException after consuming 1.5GB of memory

> ID：13161939
> 
> 赞同：2
> 
> 时间：2012-10-31T15:56:19.303
> 
> 标签：c#, visual-studio-2010, 64-bit, out-of-memory

I want to see the System.OutOfMemoryException and the memory consumed in the task manager, when the app is built against x64\. There are two drop-downs in the Build tab in the app properties: "Platform target" and "Platform", both are set to x64.

```
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            List<long> lst = new List<long>();
            while (true)
            {
                lst.Add(long.MaxValue);
            }
        }
    }
} 
```

It is indeed showing OutOfMemoryException...but when it stops, the task manager is showing a number like 1587443K which is 1.5GB which would I expect if it was built against x86. Yes, the operating system is 64bit.

Am I forgetting something else?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T15:59:14.850

> Am I forgetting something else?

Yes - in .NET 4, there was still a 2GB-per-object limit. (You could use much more memory, but not in a single object.) I suspect your list needs to reallocate its internal buffer, requiring ~3GB in a single array.

You may be pleased to hear that [.NET 4.5 supports larger objects](http://blogs.msdn.com/b/dotnet/archive/2012/07/20/the-net-framework-4-5-includes-new-garbage-collector-enhancements-for-client-and-server-apps.aspx) if you set the [`<gcAllowVeryLargeObjects>`](http://msdn.microsoft.com/en-us/library/hh285054%28v=VS.110%29.aspx) configuration parameter.

# c - 存储的字节数超过堆的容量

> ID：13161940
> 
> 赞同：0
> 
> 时间：2012-10-31T15:56:23.890
> 
> 标签：c, string, malloc, heap-memory

为什么下面的代码成功了，尽管我只使用 malloc() 在堆上占用了 1 个字节：

```
char* sp=(char*)malloc(1);
strcpy(sp,"aaaaa"); 
```

`sp`有 1 字节的堆大小，它可以处理`aaaa`更多的 1 字节！怎么来的！

我正在使用 MS VS 2010。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T15:59:05.790

这被称为*未定义的行为*，目前*似乎*可以工作。但很可能会在以后发生奇怪且看似无关的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T15:59:17.170

这称为未定义行为。仅仅因为*您机器上**的*编译器似乎对此没有问题，并不意味着另一个编译器或另一个平台的行为将相同。（提示：由于此用例的简单性，您没有看到任何不良影响。任何更复杂的事情，您都会遇到重大问题。）

实际上，分配溢出了您的分配。在这种情况下会发生什么取决于您的编译器和您的特定 C/C++ 运行时。在某些平台上，这将导致段错误或访问冲突（尤其是在使用 Electric Fence 或 Valgrind 等调试辅助工具时）。

像这样的代码*最好的情况*是立即崩溃！如果代码没有崩溃，那么您很可能破坏了另一个内存分配，并且您的应用程序稍后会崩溃或损坏数据——所谓的“定时炸弹”错误。定时炸弹*更难*调试，因为应用程序崩溃的点可能在任何地方，而且很可能离坏代码不远。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T15:59:38.737

堆分配是一项合作活动。通过覆盖分配空间的末尾，您玩得不好，并且会发生不好的事情。

保持在分配给您的空间内是您的工作。没有人会阻止你越过最后，甚至在属于你的程序的随机内存位上写，但结果将是......不可预测的。（这是“坏”的代码）。

# css - CSS3关键帧动画反向跳跃关键帧

> ID：13161942
> 
> 赞同：2
> 
> 时间：2012-10-31T15:56:35.127
> 
> 标签：css, css-animations

我有一个简单的 CSS3 关键帧动画，我想**在它运行时反转它**。请参阅此处的代码：http: [//jsfiddle.net/breizo/EUVav/](http://jsfiddle.net/breizo/EUVAv/)

```
@-webkit-keyframes transform-keyframes {
0%      {-webkit-transform:translateX(0px) translateY(0px) rotate(270deg);}
25%     {-webkit-transform:translateX(200px) translateY(0px) rotate(270deg);}
25.01%  {-webkit-transform:translateX(200px) translateY(0px) rotate(0deg);}
50%     {-webkit-transform:translateX(200px) translateY(200px) rotate(0deg);}
50.01%  {-webkit-transform:translateX(200px) translateY(200px) rotate(90deg);}
75%     {-webkit-transform:translateX(0px) translateY(200px) rotate(90deg);}
75.01%  {-webkit-transform:translateX(0px) translateY(200px) rotate(180deg);}
100%    {-webkit-transform:translateX(0px) translateY(0px) rotate(180deg);}
} 
```

任何人都有一个技巧来**防止动画跳到另一个关键帧**而不是当前的关键帧？看起来它正在跳转到与持续时间的 1/2 对称的关键帧。

非常感谢任何输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T19:12:52.397

I had the same flavor of jumpiness using CSS to animate a 3D carousel product catalog In two directions based on :hover.

Having fiddled with obvious ideas like animation-fill-mode:forwards and such with not the least good fortunes what finally solved it was to mix in two bits of transition syntax with a tiny duration and the transform itself as the property. In the course of transition chasing to catch transform's state ,it's updates To the element being transformed remained intact , and the effect seems to fit the specs , so it should be a valid solution

```
transition-duration: 0.2s;transition-property:transform; 
```

pardon any typos ,as I"m using a pad.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:13:25.327

在拉了很多头发之后（剩下的不多......）我最终使用了出色的 greensock 库：[http](http://www.greensock.com/gsap-js/) ://www.greensock.com/gsap-js/ 它为整个动画提供了更多控制。

# wpf - 解释 Visual Studio 2010 及更高版本、WinForms 和 WPF 中的严重错误

> ID：13161947
> 
> 赞同：7
> 
> 时间：2012-10-31T15:56:44.847
> 
> 标签：wpf, winforms, form-load

尝试将以下代码放入WinForms 或WPF的`Load`事件处理程序中。`Loaded`

```
Dim doc As New XmlDocument
Dim nsmgr As New XmlNamespaceManager(Nothing) 'this line throws an exception 
```

问题是没有抛出异常，并且发生堆栈损坏。它可能有不同的副作用，具体取决于 IDE - 见下文。

*   受影响的 IDE 是：2008、2010 和 2012（我可以测试的）。2010 重置堆栈状态，并从子/处理程序返回，就像什么都没发生一样（但没有继续执行其他语句）。2012 可能会警告用户有关失败的应用程序和尝试在`compatibility mode`. 之后的下一次运行与 2010 相同。2008 正确地引发异常，但仅在默认配置 (AnyCPU) 上。将平台目标切换到 x86 使问题在 2008 年再次出现。
*   受影响的框架是 WinForms 和 WPF。控制台应用程序和 ASP.NET 似乎工作正常。.NET v2.0-4.5。
*   受影响的范围是`Load`迄今为止唯一的事件。将此代码放入按钮使其工作。
*   受影响的构建配置 = 任何。尝试默认`Debug`和`Release`.

为什么我认为它是一个错误是因为它会使对象处于不稳定状态——它们没有完成初始化，这不是预期的行为。关键是没有人会知道它发生了，因为它不会抛出异常。根据您的设计，您最终可能会在数据库中得到不正确的数据，在最坏的情况下可能会导致严重的后果。

有没有人很好地解释为什么会发生这种情况以及是否有解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T22:33:13.517

这个问题是由 wow64 仿真层引起的，当您在 x64 操作系统上以 x86 平台为目标时，该层会发挥作用。
它吞下负责触发 Load 事件的代码中的异常。
因此，调试器看不到异常，也无法介入处理这种情况。
[这篇文章似乎](http://blog.paulbetts.org/index.php/2010/07/20/the-case-of-the-disappearing-onload-exception-user-mode-callback-exceptions-in-x64/)很好地记录了那里发生的事情，

Hans Passant 的[这个先前的回答（所有的学分和赞成）解释了可能的解决方法。](https://stackoverflow.com/questions/4933958/vs2010-does-not-show-unhandled-exception-message-in-a-winforms-application-on-a)
我最喜欢的是将所有内容移出 Form_Load 事件并将有问题的代码放入表单构造函数中。（当然我不知道它是否适用于你的情况）

# javascript - 制作打开的fancybox模态

> ID：13161955
> 
> 赞同：1
> 
> 时间：2012-10-31T15:57:06.360
> 
> 标签：javascript, jquery, fancybox

我有一个带有两个按钮的 Fancybox：合并和取消。Cancel 关闭fancybox，Merge 发布一个表单并等待页面重新加载。页面重新加载需要几秒钟，因此在用户按下合并后，我禁用了取消按钮，我想将选项设置为`modal`，`true`但我似乎找不到在已打开的选项上设置选项的方法花式盒子。有人对如何做到这一点有任何建议吗？

游乐场：http: [//jsfiddle.net/vCtVq/](http://jsfiddle.net/vCtVq/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T21:19:02.197

没有简单的选项来切换“模态”状态，fancyBox 要么是模态的，要么不是模态的。但我可以想到两种解决方案。

1）隐藏关闭按钮并取消绑定覆盖上的点击事件 -

```
$('#merge').click(function() {
    $('#cancel').attr("disabled", "disabled");

    $('.fancybox-item').hide();
    $('.fancybox-overlay').unbind();

    console.log('submit');
}); 
```

演示 - [http://jsfiddle.net/am8d3/](http://jsfiddle.net/am8d3/)

2）创建一个全局变量，并使用“beforeClose”回调检查它。您可以通过返回“false”来取消关闭 -

```
var busy = false;

$(".o").fancybox({
    //modal: true
    beforeClose: function() {
        if (busy) {
            return false;
        }
    }
}); 
```

演示 - [http://jsfiddle.net/MLjAT/](http://jsfiddle.net/MLjAT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:13:40.560

当函数运行时，Fancybox 会被初始化一次，我很确定不能用不同的选项重新初始化。您可以做的是创建一个标志并使用一些更传统的 javascript 来控制关闭行为。从一开始就将 modal 设置为 true，而是使用正文单击事件处理关闭。然后，设置一个真/假标志来确定是否单击了合并以允许或不允许窗口在正文单击时关闭。像这样的东西：

```
$('body').click(function(e) {    
    if (allowClose == true) {
        $.fancybox.close();
    }
})​ 
```

[我已经更新了你在这里](http://jsfiddle.net/vCtVq/3/)摆弄这个解决方案。

# c# - 将 WPF 控件绑定到由后台线程修改的 ObeservableCollection

> ID：13161959
> 
> 赞同：0
> 
> 时间：2012-10-31T15:57:21.550
> 
> 标签：c#, wpf, data-binding

这是我[之前的问题](https://stackoverflow.com/questions/13131305/threading-serial-port-query-and-using-the-result-in-a-listview-control)的延续 这 是我的 mainwindow.cs

```
 public partial class MainWindow : Window
{
    ObservableCollection<string> store;
    public MainWindow()
    {
     SerialPort _serialPort = new SerialPort(SerialCom.findCOMPort(), 115200, Parity.None, 8, StopBits.One);
     _serialPort.Handshake = Handshake.None;
     string[] query = new string[3] { "t02", "t03", "t04" };
     store = new ObservableCollection<string> { " ", " ", " " };
     this.DataContext = this;
     Thread thread = new Thread(delegate(){Process(store,query,_serialPort);});
     thread.IsBackground = true;
     try
     {
        thread.Start(); //catch sudden serial port closure exception
     }
     catch (Exception)
     {
        thread.Abort();
     }
   }

 public static void Process(ObservableCollection<string> store, string[] query, SerialPort _serialPort)
 {          
     while (true)
     {             
         for (int i = 0; i < 3; i++)
         {
             string add = SerialCom.returnData(query[i], _serialPort);
             if (store[i] != add)
             {
                 store.Insert(i,add);
             }
         }             
         Thread.Sleep(300);

     }
 } 
```

我的 XAML 页面中有一个 WPF listview 控件。我想将该控件绑定到在非 UI 线程中更改的 ObservableCollection。似乎美中不足的是程序运行时我必须查询设备的无限循环。另外，由于 ObservableCollection 实现了 INotifyPropertyChanged，所以当我将集合绑定到控件时，控件应该会自动更新而无需任何其他代码在代码后面或 XAML 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:00:56.870

如果您使用绑定系统中的 ObservableCollection，则不允许从后台线程更新它。这是因为更新通知（通过 INotifyCollectionChanged）发生在进行更改的线程上。必须将 ObservableCollection 的更改分派到 UI 线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:09:48.517

4.5 中有一个很好的解决方案，使用`BindingOperations`该类：http: [//10rem.net/blog/2012/01/16/wpf-45-observable-collection-cross-thread-change-notification](http://10rem.net/blog/2012/01/16/wpf-45-observable-collection-cross-thread-change-notification)

对于早期版本，您需要在调度程序线程上更新集合，或者将更改通知事件推送到调度程序线程：http: [//julmar.com/blog/mark/ ?p=41](http://julmar.com/blog/mark/?p=41)

# perl - 多列文件比较

> ID：13161963
> 
> 赞同：1
> 
> 时间：2012-10-31T15:57:31.537
> 
> 标签：perl, bash, unix, awk

我正在进行目录清理以检查未在我们的测试环境中使用的文件。我有一个所有文件名的列表，这些文件名在一个文本文件和另一个我想要比较的文件中按字母顺序排序。

这是第一个文件的设置方式：

```
test1.pl
test2.pl
test3.pl 
```

这是一个简单的脚本名称，每行文本文件的一个脚本名称是我要根据下面的另一个文件清理的目录中的所有脚本。

我要比较的文件是一个选项卡文件，其中列出了每个服务器作为测试运行的脚本，并且显然有很多重复项。我想从这个文件中去掉测试脚本的名称，并将它与另一个文件比较，使用`uniq`，`sort`这样我就可以`diff`用上面的这个文件来查看哪些测试脚本没有被使用。

该文件设置如下：

```
server: : test1.pl test2.pl test3.pl test4.sh test5.sh 
```

有些行少，有些行多。我的第一个冲动是制作一个`Perl`脚本来拆分行并将值推送到列表中（如果它们不存在），但这似乎完全低效。我没有经验，`awk`但我认为有不止一种方法可以做到这一点。比较这些文件的任何其他想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T19:39:53.847

A Perl solution that makes a `%needed` hash of the files being used by the servers and then checks against the file containing all the file names.

```
#!/usr/bin/perl
use strict;
use warnings;
use Inline::Files;

my %needed;
while (<SERVTEST>) {
    chomp;
    my (undef, @files) = split /\t/;
    @needed{ @files } = (1) x @files;
}

while (<TESTFILES>) {
    chomp;
    if (not $needed{$_}) {
        print "Not needed: $_\n";   
    }
}

__TESTFILES__
test1.pl
test2.pl
test3.pl
test4.pl
test5.pl
__SERVTEST__
server1::   test1.pl    test3.pl
server2::   test2.pl    test3.pl
__END__
*** prints

C:\Old_Data\perlp>perl t7.pl
Not needed: test4.pl
Not needed: test5.pl 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T19:32:53.190

这通过 将文件名重新排列为第二个文件中的每行一个`awk`，然后`diff`与第一个文件一起输出。

```
diff file1 <(awk '{ for (i=3; i<=NF; i++) print $i }' file2 | sort -u) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T17:26:35.483

快速而肮脏的脚本来完成这项工作。如果听起来不错，请使用 open 来读取文件并进行适当的错误检查。

```
use strict;
use warnings;
my @server_lines = `cat server_file`;chomp(@server_lines);
my @test_file_lines = `cat test_file_lines`;chomp(@test_file_lines);
foreach my $server_line (@server_lines){
   $server_line =~ s!server: : !!is;
   my @files_to_check = split(/\s+/is, $server_line);
   foreach my $file_to_check (@files_to_check){
      my @found = grep { /$file_to_check/ } @test_file_lines;
      if (scalar(@found)==0){
        print "$file_to_check is not found in $server_line\n";
      }
   } 
```

}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T17:39:48.670

如果我正确理解您的需求，您有一个包含测试列表的文件（testfiles.txt）：

```
test1.pl
test2.pl 
test3.pl
test4.pl
test5.pl 
```

还有一个包含服务器列表的文件，其中包含所有测试的文件（serverlist.txt）：

```
server1:        :       test1.pl        test3.pl
server2:        :       test2.pl        test3.pl 
```

（我假设所有空格都是制表符）。

如果您将第二个文件转换为经过测试的文件列表，则可以将其`diff`与原始文件进行比较。

```
cut -d: -f3 serverlist.txt | sed -e 's/^\t//g' | tr '\t' '\n' | sort -u > tested_files.txt 
```

`cut`删除服务器名称和“：”，删除`sed`留下的前导选项卡，`tr`然后将剩余的选项卡转换为换行符，然后我们进行唯一排序以排序和删除重复项。这是输出到`tested_files.txt`.

然后你要做的就是`diff testfiles.txt tested_files.txt`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T03:54:59.653

很难说，因为您没有发布预期的输出，但这是您要找的吗？

```
$ cat file1
test1.pl
test2.pl
test3.pl
$
$ cat file2
server: : test1.pl test2.pl test3.pl test4.sh test5.sh
$
$ gawk -v RS='[[:space:]]+' 'NR==FNR{f[$0]++;next} FNR>2 && !f[$0]' file1 file2
test4.sh
test5.sh 
```

# .net - Visual Studio 2010 中的 Crystal Server CrystalDecisions.Enterprise

> ID：13161965
> 
> 赞同：1
> 
> 时间：2012-10-31T15:57:34.677
> 
> 标签：.net, crystal-reports, gac

我有一个 .NET 4 网站（不是应用程序），我在其中尝试使用 Crystal Reports Server 的 InfoStore DLL，以便查询生产服务器。服务器正在运行 SAP Crystal Server 2011。

开发机器运行 Windows 8 64 位，运行 Visual Studio 2010 和 Crystal Server 运行时环境 x64，从我在[http://service.sap.com](http://service.sap.com)的帐户下载。

我可以在 C:\Windows\assembly\GAC_64 的 GAC 中看到*CrystalDecisions.Enterprise.InfoStore*和*CrystalDecisions.Enterprise.Framework*，然后我单击“添加引用”并通过浏览它来选择它添加**<add assembly="CrystalDecisions.Enterprise .InfoStore，版本=14.0.2000.0，文化=中性，PublicKeyToken=692FBEA5521E1304"/>**到 web.config。这就是我期望它发生的方式。

问题是，尽管能够在对象浏览器中浏览对象，但当我尝试构建站点时，它总是会导致：

*无法加载文件或程序集“CrystalDecisions.Enterprise.InfoStore，版本=14.0.2000.0，文化=中性，PublicKeyToken=692fbea5521e1304”或其依赖项之一。该系统找不到指定的文件。C:\Users\lee\Documents\Projects\app\web.config*

在过去的 8 个小时里，我一直在扯头发，试图找出原因，但我很茫然，所以任何想法都将不胜感激。

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:18:48.813

对其进行排序。我不得不做一些事情，所以认为最好为其他人记录它们。

1.  卸载 Crystal Server Runtime 环境 x64 并安装 x86 版本。尽管它是 x64 环境，但 Visual Studio 2010 是 32 位的并且需要它。
2.  安装已损坏，需要运行批处理文件来纠正它（请参阅此处[http://scn.sap.com/thread/3175725](http://scn.sap.com/thread/3175725)）
3.  确保您的应用程序池允许 32 位。默认情况下它只有 64 位。

# wpf - WPF TextWrapping 在空白处

> ID：13161966
> 
> 赞同：0
> 
> 时间：2012-10-31T15:57:38.363
> 
> 标签：wpf, textblock, word-wrap

我在 WPF 中使用 TextBlock，我想在其上使用 TextWrapping，我在 XAML 中所做的如下。

```
<TextBlock TextWrapping="Wrap" Grid.Column="0" Grid.ColumnSpan="4" Grid.Row="0" Margin="5,5,5,5">
                                <TextBlock.Text>
                                    This is just a test. This is just a test.
                                </TextBlock.Text>
                            </TextBlock> 
```

当我运行此代码时，它会显示如下输出

```
This is just a test. Th
is is just a test. 
```

但我只想包裹在空白处，比如

```
This is just a test.
This is just a test. 
```

我无法找到 WPF 显示此行为的原因，我尝试过`WrapWithOverflow`但`IsHyphenationEnabled=true`没有成功。请帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:00:54.880

Bizz 是对的，这不应该是文本换行的行为，只是一个疯狂的猜测，你是从某个地方复制/粘贴文本到 Visual Studio 吗？在这种情况下，空格可能存在问题，WPF 将以错误的方式包装您的文本。

# javascript - 通过链接文件使用js注入html

> ID：13161969
> 
> 赞同：0
> 
> 时间：2012-10-31T15:57:42.110
> 
> 标签：javascript, jquery, html, prototypejs

我试图想出一种通过链接脚本将大量 html 注入文档的方法，但我找不到一个好的方法。

像这样的东西会进入我“注入”到的文档的头部：

```
<script src="http://example.com/html-inject.js" type="text/javascript"></script> 
```

然后这个家伙的内容会是这样的：

```
$(document).ready(function(){
    $('body').insert({after: '<div id="test_div"><h1>This is a test.</h1></div>'});
    $('header').insert({after: '<div id="test_div"><h1>This is another test.</h1></div>'});
}) 
```

（上面需要prototype.js，但我宁愿只链接到一个文件......）

我试图这样做的原因：我试图想出一个好方法来修改博客主题，而不会篡改错综复杂的变量和块

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:03:27.410

使用 jQuery（这是相当标准的这些天），您可以执行以下操作：

```
$('#div').append('<h1>SomeHtml</h1>'); 
```

但是，就像其他人所说的那样，你最好学习你的博客主题并正确地做到这一点。

# rubygems - 如何找到我从 github 克隆的 gem 的版本？

> ID：13161971
> 
> 赞同：1
> 
> 时间：2012-10-31T15:57:46.370
> 
> 标签：rubygems, gem, bundler

所以我只是在 github 上克隆了“capybara-webkit”gem。我怎么知道我有什么版本的 gem？Gemspec 中似乎没有任何数字确定这一点，但是当我让 bundler 将该文件夹安装为 github 存储库时，它声称它正在尝试安装版本 0.12.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:01:11.990

为了避免重复，gem 作者将版本号放在一个文件中，并在 .gemspec 文件中重用它：

```
s.version  = Capybara::Driver::Webkit::VERSION.dup 
```

所以版本号位于文件中`lib/capybara/driver/webkit/version.rb`。

# javascript - 正则表达式 - 数量字段

> ID：13161972
> 
> 赞同：1
> 
> 时间：2012-10-31T15:57:48.007
> 
> 标签：javascript, regex, integer

我想使用 Javascript 的正则表达式验证数量字段的内容。

有效输入将是一个整数，从零开始。如果前导零也可以删除，那就太好了。

**例子**

```
1         Pass
0         Pass
01        Failed
00        Failed
-1        Failed
1.1       Failed
1000000   Pass 
```

我已经尝试过自己，但我得到的最好的是......

```
var regex = /[0-9]{1,9}/; 
```

...它不会在负数或带前导零的数字上失败。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T16:01:12.430

这个正则表达式匹配任何没有前导的数字序列`0`（除了`0`它本身，它是单独处理的）。

```
var regex = /^0$|^[1-9][0-9]*$/; 
```

`^`和`$`是锚，将匹配锚定到字符串的开头和结尾。这意味着在数字之前或之后不允许任何内容，因此不能包含减号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:01:01.480

如果你想**删除**前导零而不是禁止它们，那么你可以使用这个：

```
^0*(\d{1,9})$ 
```

现在您将在捕获的组号中找到没有尾随零的数字。`1`（即使只`0`输入了一个）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T16:03:46.750

```
var re = /^0*([^0]\d*)$/;
var match = re.exec(str);
if (match) {
    var i = parseInt(match[1], 10);
}
else {
    //whoops, not an integer
} 
```

（match[1] 返回不带前导零的 int，match[0] 是整个匹配的字符串）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T16:00:57.353

试试`^\d+$`。应该匹配正整数。

# mysql - mysql 在更新时表现得很奇怪。请帮忙，我已经坚持了一整天了

> ID：13161975
> 
> 赞同：1
> 
> 时间：2012-10-31T15:58:03.987
> 
> 标签：mysql, sql-update, paypal-ipn

我已经坚持了一整天了，这是我一直坚持编码的时间最长的一次。请帮我。

我有以下代码，它是一个用于验证数据库帐户的 paypal ipn URL。我首先连接到 sql 等，然后从 paypal 获取用户信息，然后从数据库中获取用户信息。在付款之前，用户应该在 user_level 列中具有“未验证”的值，如果是“未验证”，则应该更新它。

这是我被困在的奇怪的事情。user_level 的值永远不会“未验证”，即使我在运行代码之前检查了实际的数据库，它实际上是“未验证的”。但是当我注释掉 mysql_query($u) 时，它给出的值是“未验证”。

正在发生的事情是，它似乎在调用实际代码以检查是否更新它之前更新记录。

请帮助任何人，我将不胜感激。我

```
$sql_connect = @mysql_connect($_SERVER['HTTP_HOST'].':3306','root', '******')   or  die('Could not connect: ' . mysql_error());
mysql_select_db('4bkk');

$url = 'https://www.sandbox.paypal.com/cgi-bin/webscr';

$postFields = 'cmd=_notify-validate';

foreach($_POST as $key => $value)
{
    $postFields .= "&$key=".urlencode($value);
}

$ch = curl_init();

curl_setopt_array($ch, array(
    CURLOPT_URL => $url,
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_SSL_VERIFYPEER => false,
    CURLOPT_POST => true,
    CURLOPT_POSTFIELDS => $postFields
));

$result = curl_exec($ch);
curl_close($ch);

if($result=='VERIFIED'){

$log = 'Verfied --- ';

    //get buyers information from PAYPAL checkout
    $email = $_POST['payer_email'];
    $first_name = $_POST['first_name'];
    $last_name = $_POST['last_name'];
    $amount = $_POST['amount3'];
    $plan = $_POST['option_selection1'];

    $q = "SELECT * FROM users WHERE email='$email'";
    $data = mysql_query($q);

    $con = mysql_fetch_array($data); 

    //get buyers information from DATABASE
    $email2 = $con['email'];
    $first_name = $con['first_name'];
    $last_name = $con['last_name'];
    $active = $con['active'];
    $user_level = $con['user_level'];

$log .= $first_name.' ,  '.$last_name.' ,  '.$email2.' ,  '.$active.' ,  '.$user_level.' **************** '.$email ;

if($email2==$email){ //User already has a record 
    if($user_level=='unverified'){ // User unverified, ready for verification
        $log .= 'Emails match, and user is VERIFIED';
        $u = "UPDATE users SET active='verified', user_level='$plan' WHERE email='$email' LIMIT 1";
        $log .= $u;

        mysql_query($u);

    }
    else{ // User is already verified, 
$log .= 'Emails match, BUT user is NOT VERIFIED';

    }
}
else{  //User doesn't have a record
    $log .= 'Emails DONT match, execute update here';
}

$fh = fopen('result_ipn_test.txt', 'w');
//fwrite($fh, $subject.' --- '.$message);
fwrite($fh, $message.' ********** '.$log);
fclose($fh);

}
else
    echo 'INVALID';

mysql_close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:13:48.283

您不应该检查状态而不是用户级别吗？

```
if($user_level=='unverified') 
```

应该

```
if($active=='unverified') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:17:21.407

您正在检查用户是否未在数据库中验证，然后立即记录该用户已验证。此外，如果这不是检查 $active 而不是 $user_level，因为您将 $plan 的值放入 $user_level

```
if($user_level=='unverified'){ // User unverified, ready for verification
    $log .= 'Emails match, and user is VERIFIED'; 
```

同样，如果用户在数据库中被列为“已验证”，则您正在记录他未经过验证：

```
else{ // User is already verified, 
    $log .= 'Emails match, BUT user is NOT VERIFIED'; 
```

注释掉 sql 查询会导致 $data 为空，从而使 $user_level 为空。$user_level 将不匹配未验证并会导致日志“电子邮件匹配，但用户未验证”

# javascript - 可排序列表重叠并防止拖放

> ID：13161983
> 
> 赞同：3
> 
> 时间：2012-10-31T15:58:32.637
> 
> 标签：javascript, html, css, jquery-ui-sortable

我在这里有一个 JSfiddle 来演示我的问题。 [http://jsfiddle.net/J6uM5/4/](http://jsfiddle.net/J6uM5/4/)

```
<div id="list-A" style="height:50px; overflow-y:scroll; border:1px solid red">
<ul class="sortable">
    <li>item 1</li>
    <li>item 2</li>
    <li>item 3</li>
    <li>item 4</li>
    <li>item 5</li>
    <li>item 6</li>
    <li>item 7</li>
    <li>item 8</li>
    <li>item 9</li>
    <li>item 10</li>
    <li>item 11</li>
    <li>item 12</li>
    <li>item 13</li>
    <li>item 14</li>
    <li>item 15</li>
    <li>item 16</li>
</ul> 
```

```
<div id="list-B">
<ul class="sortable">
    <li>item 4</li>
    <li>item 5</li>
    <li>item 6</li>
</ul> 
```

这是JS

```
$(function() {
$('.sortable').sortable({

    connectWith: ".sortable",
    scroll:false,

}).disableSelection(); 
```

});

问题是 sortable1（虽然被 div 隐藏）仍然延伸到 dom 中的 sortable2。为了成功地将一个项目从 list1 拖到 list2，您必须滚动到 list1 的底部，或者如果您向下滚动到足以使 list1 不与 list2 重叠。任何解决方法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T02:38:42.860

通过在实际可排序列表（ul）而不是包装器上设置高度/溢出，它似乎可以工作。

```
#sortable1 {
    height:25px;
    overflow-y:scroll;
    padding-bottom:35px;
} 
```

看这里：

[http://jsfiddle.net/J6uM5/8/](http://jsfiddle.net/J6uM5/8/)

那是你要找的吗？

# powershell - 目录/文本搜索时的 DISTINCT Select-String 输出

> ID：13161984
> 
> 赞同：5
> 
> 时间：2012-10-31T15:58:32.860
> 
> 标签：powershell, scripting, powershell-2.0, powershell-3.0, powershell-ise

我很好奇如何根据这个例子生成一个不同的文件列表。

** 此示例生成所有 .ps1 和 .psm1 文件的列表，其中包含文本“文件夹”，但在同一行中没有文本“.invoke”。

```
$text='folders'
dir C:\Workspace\mydirectorytosearch1\ -recurse -filter '*.ps*1' | Get-ChildItem | select-string -pattern $text | where {$_ -NotLike '*.invoke(*'}
dir C:\Workspace\mydirectorytosearch2\ -recurse -filter '*.ps*1' | Get-ChildItem | select-string -pattern $text | where {$_ -NotLike '*.invoke(*'} 
```

这很酷并且效果很好，但是我得到了重复的文件输出（相同的文件但不同的行号）。

**如何保持我的文件输出不同？**

当前不受欢迎的输出：

*   C:\Workspace\mydirectorytosearch1\anonymize-psake.ps1:4:。"$($folders.example.test)\anonymize\Example.vars.ps1"
*   C:\Workspace\mydirectorytosearch1\anonymize-psake.ps1:5:。"$($folders.missles)\extract\build-utilities.ps1"

所需的输出：

*   C:\Workspace\mydirectorytosearch1\anonymize-psake.ps1

帮我调整我的脚本？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T17:33:39.913

您可以使用 Select-String 和 Unique 参数消除重复项：

```
$text='folders'
Get-ChildItem C:\Workspace\mydirectorytosearch1\,C:\Workspace\mydirectorytosearch2\ -Recurse -Filter '*.ps*1' |
Select-String -Pattern $text | Where-Object {$_ -NotLike '*.invoke(*'} | 
Select-Object Path -Unique 
```

# tsql - 向包含点的用户名授予权限时出现“语法错误”错误

> ID：13161986
> 
> 赞同：1
> 
> 时间：2012-10-31T15:58:34.443
> 
> 标签：tsql

我们正在尝试在存储过程上授予 EXECUTE 角色，但是以下命令

```
GRANT EXECUTE ON dbo.sp_AgentIdAprCheck TO s.AgentData.Dev 
```

不断给我们以下错误（它不喜欢第一个时期）：

```
Incorrect syntax near 's.AgentData.Dev'. 
```

用户帐户需要按照我们的方式编写。任何人都可以提供任何建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T16:01:30.340

您是否尝试将 s.AgentData.Dev 放在方括号之间？

```
GRANT EXECUTE ON dbo.sp_AgentIdAprCheck TO [s.AgentData.Dev] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T11:15:20.947

我在创建视图后获得授权时出现此错误。我需要在创建视图调用之后添加**go**

例如：

```
 CREATE VIEW Something
   (    .....
   ) ;
go
  GRANT UPDATE ON Something TO someone; 
```

# c# - 为什么依赖属性没有返回它的值？

> ID：13161987
> 
> 赞同：0
> 
> 时间：2012-10-31T15:58:34.720
> 
> 标签：c#, wpf, user-controls

我有一个带有以下 Xaml 的 MyUserControl：

```
<TextBox Text="{Binding InputValueProperty}" /> 
```

在 MyUserControl.xaml.cs 我有：

```
public string InputValue
{
    get { return (string)GetValue(InputValueProperty); }
    set { SetValue(InputValueProperty, value); }
}
public static readonly DependencyProperty InputValueProperty = 
    DependencyProperty.Register("InputValueProperty", typeof(string), 
    typeof(MyUserControl)); 
```

在我的 MainWindow.xaml 中，我创建了一个用户控件：

```
<local:MyUserControl InputValue="My Input" /> 
```

稍后在我的 MainWindow.xaml.cs 中，我试图访问这个字符串。MyUserControl 的所有实例都包含在 List 中，我使用 foreach 访问它们。

```
string temp = userControl.InputValue; 
```

这始终为空。在我的 MainWindow.xaml 中，我可以在用户控件的文本框中看到“我的输入”，但我似乎永远无法摆脱它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T16:04:36.617

```
DependencyProperty.Register("InputValueProperty", ... 
```

那应该是：

```
DependencyProperty.Register("InputValue", ... 
```

XAML 取决于属性的注册名称，而不是属性访问器的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T19:46:36.227

看起来问题出在您的绑定中。这是一个使用相对源绑定以您的代码为模型的工作示例：

这是用户控件：

```
 public partial class MyUserControl : UserControl
  {
    public MyUserControl()
    {
      InitializeComponent();
    }

    public string InputValue
    {
      get { return (string)GetValue(InputValueProperty); }
      set { SetValue(InputValueProperty, value); }
    }
    public static readonly DependencyProperty InputValueProperty =
        DependencyProperty.Register("InputValueProperty", typeof(string),
        typeof(MyUserControl));
  }
<UserControl x:Class="WpfApplication4.MyUserControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:local="clr-namespace:WpfApplication4" Height="30" Width="300">
    <Grid>
       <TextBox Text="{Binding Path=InputValue, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type local:MyUserControl}}}" />
    </Grid>
</UserControl> 
```

这是窗口：

```
 public partial class Window1 : Window
  {
    public Window1()
    {
      InitializeComponent();
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
      string text1 = ctrl1.InputValue;
      string text2 = ctrl2.InputValue;
      string text3 = ctrl3.InputValue;
//breakpoint here
    }
  }

<Window x:Class="WpfApplication4.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:local="clr-namespace:WpfApplication4" Title="Window1" Height="300" Width="300">
    <Grid>
    <StackPanel>
      <local:MyUserControl x:Name="ctrl1" InputValue="My Input" />
      <local:MyUserControl x:Name="ctrl2" InputValue="2" />
      <local:MyUserControl x:Name="ctrl3" InputValue="3" />
      <Button Click="Button_Click" Height="25" Content="debug"/>
      </StackPanel>
    </Grid>
</Window> 
```

如果我在点击事件中抛出一个断点，我可以看到每个控件的绑定值。（如果您从中复制和粘贴，请务必将 WpfApplication4 更改为您的项目所调用的任何内容。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-31T16:06:20.577

您需要在具有该属性的类上实现 INotifyPropertyChanged

```
 public class YourClassThatHasTheInputValuePropertyInIt: INotifyPropertyChanged
    {
            public event PropertyChangedEventHandler PropertyChanged;
            private void NotifyPropertyChanged(String propertyName)
            {
                if (PropertyChanged != null)
                    PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }

            public string InputValue
            {
                get { return (string)GetValue(InputValueProperty); }
                set { SetValue(InputValueProperty, value);
                      NotifyPropertyChanged("InputValue"); }
     }
    } 
```

这将允许绑定获取属性