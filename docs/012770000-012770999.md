# StackOverflow 问答 12770000-12770999

# java - 加载可见的图像 Android

> ID：12770000
> 
> 赞同：1
> 
> 时间：2012-10-07T15:13:02.377
> 
> 标签：java, android, android-asynctask

我如何加载图像，因为它们在 android 中可见？有谁知道好的教程吗？此外，我是否需要 asyncTask 才能做到这一点？此外，如果我想要一张像下面这样的图片，我应该如何声明我的 Android XML 文件？

![在此处输入图像描述](../Images/72faa9bddb3b0cddaa52347735c2dc22.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T15:27:28.880

开发者网站上有一个关于如何做到这一点的非常棒的教程。它附带的示例应用程序也做得很漂亮。你应该阅读它。:)

[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T15:16:24.623

这称为列表视图中图像的延迟加载。这是一段可用于执行此操作的代码：

```
package com.wilson.android.library;

import java.io.IOException;

public class DrawableManager {
    private final Map<String, Drawable> drawableMap;

    public DrawableManager() {
        drawableMap = new HashMap<String, Drawable>();
    }

    public Drawable fetchDrawable(String urlString) {
        if (drawableMap.containsKey(urlString)) {
            return drawableMap.get(urlString);
        }

        Log.d(this.getClass().getSimpleName(), "image url:" + urlString);
        try {
            InputStream is = fetch(urlString);
            Drawable drawable = Drawable.createFromStream(is, "src");

            if (drawable != null) {
                drawableMap.put(urlString, drawable);
                Log.d(this.getClass().getSimpleName(), "got a thumbnail drawable: " + drawable.getBounds() + ", "
                        + drawable.getIntrinsicHeight() + "," + drawable.getIntrinsicWidth() + ", "
                        + drawable.getMinimumHeight() + "," + drawable.getMinimumWidth());
            } else {
              Log.w(this.getClass().getSimpleName(), "could not get thumbnail");
            }

            return drawable;
        } catch (MalformedURLException e) {
            Log.e(this.getClass().getSimpleName(), "fetchDrawable failed", e);
            return null;
        } catch (IOException e) {
            Log.e(this.getClass().getSimpleName(), "fetchDrawable failed", e);
            return null;
        }
    }

    public void fetchDrawableOnThread(final String urlString, final ImageView imageView) {
        if (drawableMap.containsKey(urlString)) {
            imageView.setImageDrawable(drawableMap.get(urlString));
        }

        final Handler handler = new Handler() {
            @Override
            public void handleMessage(Message message) {
                imageView.setImageDrawable((Drawable) message.obj);
            }
        };

        Thread thread = new Thread() {
            @Override
            public void run() {
                //TODO : set imageView to a "pending" image
                Drawable drawable = fetchDrawable(urlString);
                Message message = handler.obtainMessage(1, drawable);
                handler.sendMessage(message);
            }
        };
        thread.start();
    }

    private InputStream fetch(String urlString) throws MalformedURLException, IOException {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpGet request = new HttpGet(urlString);
        HttpResponse response = httpClient.execute(request);
        return response.getEntity().getContent();
    }

} 
```

从这个线程获得：[ListView 中图像的延迟加载](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview)

# regex - 如何使用正则表达式格式化给定的字符串？

> ID：12770001
> 
> 赞同：1
> 
> 时间：2012-10-07T15:13:21.283
> 
> 标签：regex, formatting

所以我在我的文件中以这种方式定义了变量：

```
public static final String hello_world = "hello world" 
public static final String awesome_world = "awesome world"
public static final String bye_world= "bye world" 
```

我有很多这样的声明。

是否可以将它们格式化为（一行中的所有'='）：

```
public static final String hello_world   = "hello world" 
public static final String awesome_world = "awesome world"
public static final String bye_world     = "bye world" 
```

我什至想不出办法。任何形式的帮助表示赞赏。

PS如果重要的话，我使用崇高的文字2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T15:32:25.853

如果这是一次性任务，您可以尝试以下操作：

使用“列中的文本”功能（分隔符：空格）将文本文件导入到 Excel 中，以便 A 列在每行中包含“public”，B 列“静态”，...，E 列包含变量名称，F 列是“=”符号，G 列是变量值（字符串）。

然后将以下公式放入单元格 H1（并将其复制到其他行）：

```
="public static final String "&E1&REPT(" ";50-LEN(E1))&" = "&""""&G1&"""" 
```

之后，H 列包含以下输出：

```
public static final String hello_world                                        = "hello world"
public static final String awesome_world                                      = "awesome world"
public static final String bye_world                                          = "bye world" 
```

请注意，如果您的 Excel 语言不是英语，则 Excel 函数 REPT 和 LEN 的名称会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T16:44:36.087

如果您对原始布局很小心（例如，将`=`符号与变量名分开，这与示例中的第三行数据不同），那么这将完成这项工作：

```
awk '{ if (length($5) > max) max = length($5);
       name[NR] = $5; value[NR] = $0; sub(/^[^"]*"/,  "\"", value[NR]); }
 END { format = sprintf("public static final String %%-%ds = %%s\n", max);
       for (i = 1; i <= NR; i++) printf(format, name[i], value[i]); }' 
```

它假定您自始至终都在处理“公共静态最终字符串”（但不验证）。它跟踪它读取的最长名称的长度（第 1 行），以及从打开的双引号到行尾的变量名称和材料（第 2 行）。最后，它会生成一个格式字符串，该字符串将打印在字段中左对齐的变量名称，只要最长（第 3 行）。然后将其应用于保存的数据（第 4 行），生成：

```
public static final String hello_world   = "hello world" 
public static final String awesome_world = "awesome world"
public static final String bye_world     = "bye world" 
```

要使其防弹（例如原始数据），您必须更加努力地工作，尽管它不应该是不可克服的。对于草率的原始格式，最简单的修复方法是使用以下方法预过滤数据：

```
sed 's/=/ = /' 
```

适当间隔的输入周围的额外空格不会影响输出，并且 3 样本数据行中的缺失空格是固定的。在内部这样做会很繁琐，`awk`因为您希望它在编辑后重新拆分行。你可以在 Perl 中做一些非常相似的事情。

鉴于要处理的数据量不可能在兆字节范围内，更不用说更大了，两个命令-命令的解决方案是完全合理的；您不太可能衡量`sed`流程的成本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T15:36:13.897

没有单一的正则表达式可以解决您的问题。您唯一的选择是运行一系列正则表达式，一个来处理每个行的长度：

```
s/^(.{40})=/\1 =/
s/^(.{39})=/\1  =/
s/^(.{38})=/\1   =/ 
```

即便如此，这可能不是您想要的，而且手动完成可能要容易得多。

问题是，正则表达式替换可以在不同时间插入不同字符串的唯一方法是，如果它插入的是反向引用，并且没有反向引用可以为您提供`5 - N`空格字符。您的另一种选择是尝试*捕获*可变数量的字符，但在这种情况下，也无法为您做到这一点。

正则表达式不是用来做这样的事情（它们不支持算术），但一些文本编辑器是，所以只需找一个花哨的文本编辑器或手工完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T16:46:54.317

由于您使用的是 Sublime Text 2，因此有一种更简单的方法可以做到这一点。
Sublime Text 2 有一个很棒的包，它可以**完全**满足您的要求：

> ## **[崇高对齐](http://wbond.net/sublime_packages/alignment)**
> 
> Sublime Text 2 的多行选择和多个选择的简单对齐。
> 
> **特征：**
> 
> *   通过插入空格（或制表符）将多个选择对齐到同一列
> *   将多行选择中的所有行对齐到相同的缩进级别
> *   将多行选择的每一行上的第一个 = 对齐到同一列

前：

![在此处输入图像描述](../Images/b79aac8a7815aea3c8ef1af287c2c7c0.png)

后：

![在此处输入图像描述](../Images/3e0c6e2aa78d74855035d22cf04df81c.png)

# javascript - 将 JavaScript 代码转换为 python

> ID：12770010
> 
> 赞同：-4
> 
> 时间：2012-10-07T15:14:13.873
> 
> 标签：javascript, python

我想将此 JavaScript 代码转换为 python，我在 JS 中没有坚实的基础。

所以我不知道如何翻译上面的代码。

请提供任何帮助或建议

```
Packer = function(w, h) {
  this.root = { x: 0, y: 0, w: w, h: h };
};

Packer.prototype = {

  fit: function(blocks) {
    var n, node, block;
    for (n = 0; n < blocks.length; n++) {
      block = blocks[n];
      if (node = this.findNode(this.root, block.w, block.h))
        block.fit = this.splitNode(node, block.w, block.h);
    }
  },

  findNode: function(root, w, h) {
    if (root.used)
      return this.findNode(root.right, w, h) || this.findNode(root.down, w, h);
    else if ((w <= root.w) && (h <= root.h))
      return root;
    else
      return null;
  },

  splitNode: function(node, w, h) {
    node.used = true;
    node.down  = { x: node.x,     y: node.y + h, w: node.w,     h: node.h - h };
    node.right = { x: node.x + w, y: node.y,     w: node.w - w, h: h          };
    return node;
  }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T15:18:21.300

代码定义了一个名为 的对象`Packer`，构造函数接受`w`和`h`参数。

它还定义了以下方法：

```
fit(blocks)
findNode(root, w, h) 
splitNode(node, w, h) 
```

该对象有一个名为 的成员变量`root`，用于保存某种状态。其余的应该可以理解，祝你好运。

# ruby-on-rails - Ruby on Rails：如何在特定条件下验证嵌套属性？

> ID：12770018
> 
> 赞同：11
> 
> 时间：2012-10-07T15:14:46.823
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, validation

我有这些模型：

```
class Organisation < ActiveRecord::Base

  has_many    :people
  has_one     :address, :as         => :addressable,
                        :dependent  => :destroy
  accepts_nested_attributes_for :address, :allow_destroy => true

end

class Person < ActiveRecord::Base

  attr_accessible :first_name, :last_name, :email, :organisation_id, :address_attributes

  belongs_to  :user
  belongs_to  :organisation
  has_one     :address, :as         => :addressable,
                        :dependent  => :destroy
  accepts_nested_attributes_for :address, :allow_destroy => true

  # These two methods seem to have no effect at all!
  validates_presence_of :organisation,  :unless => "address.present?"
  validates_associated  :address,       :unless => "organisation.present?"

end

class Address < ActiveRecord::Base

  belongs_to :addressable, :polymorphic => true

  validates_presence_of :line1, :line2, :city, :zip

end 
```

...以及这些观点：

**_fields.html.erb**：

```
<%= render 'shared/error_messages', :object => f.object %>
<fieldset>
<div class="left">
    <%= f.label :first_name %><br/>
    <%= f.text_field :first_name %>
</div>
<div>
    <%= f.label :last_name %><br/>
    <%= f.text_field :last_name %>
</div>
<div>
    <%= f.label :email %><br/>
    <%= f.text_field :email %>
</div>
<div>
    <%= f.label :organisation_id %><br/>
    <%= f.select(:organisation_id, current_user.organisation_names, {:include_blank => "--- None ---"}, :id => 'organisation_select') %>
</div>
</fieldset>

<%= f.fields_for :address do |address| %>
  <%= render 'shared/address', :f => address %>
<% end %> 
```

**_address.html.erb：**

```
<fieldset id="address_fields">
<div>
    <%= f.label :line1 %>
    <%= f.text_field :line1 %>
</div>
<div>
    <%= f.label :line2 %>
    <%= f.text_field :line2 %>
</div>
<div>
    <%= f.label :zip %>
    <%= f.text_field :zip %>
</div>  
<div>
    <%= f.label :city %>
    <%= f.text_field :city %>
</div>  
</fieldset> 
```

**people_controller.rb**：

```
def new
  puts params.inspect
  @person = Person.new(:organisation_id => params[:organisation_id])
  @person.build_address
  @title = "New person"
end

{"action"=>"new", "controller"=>"people"}

def edit
  puts params.inspect
  @title = @person.name
end

{"action"=>"edit", "id"=>"69", "controller"=>"people"}

def create
  puts params.inspect
  if params[:organisation_id]
    @person = current_user.organisations.build_person(params[:person])
  else
    @person = current_user.people.build(params[:person])
  end
  if @person.save
    flash[:success] = "Person created."
    redirect_to people_path
  else
    render :action => "new"
  end
end

{"commit"=>"Create", "action"=>"create", "person"=>{"last_name"=>"Doe", "organisation_id"=>"9", "email"=>"john.doe@email.com", "first_name"=>"John", "address_attributes"=>{"city"=>"Chicago", "zip"=>"12345", "line2"=>"Apt 1", "line1"=>"1 Main Street"}}, "authenticity_token"=>"Jp3XVLbA3X1SOigPezYFfEol0FGjcMHRTy6jQeM1OuI=", "controller"=>"people", "utf8"=>"✓"} 
```

在我的`Person`模型中，我需要确保只有当一个人`organisation_id`的地址为空白时，该人的地址字段才必须存在。

我试过这样的事情：

```
validates :address, :presence => true, :if => "organisation_id.blank?" 
```

但它不起作用。

如何才能做到这一点？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-07T19:52:56.367

首先，我想确定你的意思是`blank?`而不是`present?`。通常，我会看到：

```
validate :address, :presence_of => true, :if => 'organisation.present?' 
```

这意味着，如果组织也存在，您只想验证地址。

关于，`:accepts_nested_attributes_for`您是通过传入嵌套表单属性或类似的东西来使用此功能吗？我只是想确保您绝对需要使用此功能。如果您实际上并未处理嵌套表单属性，则可以使用以下方法实现级联验证：

```
validates_associated :address 
```

如果确实需要使用`:accepts_nested_attributes`，请务必查看`:reject_if`参数。基本上，如果某些条件适用，您可以完全拒绝添加属性（及其后代）：

```
accepts_nested_attributes_for :address, :allow_destroy => true, :reject_if => :no_organisation

def no_organisation(attributes)
  attributes[:organisation_id].blank?
end 
```

现在，如果以上都不适用，让我们看看你的语法：

它应该可以工作，`:if/:unless`接受[符号、字符串和 procs](http://guides.rubyonrails.org/active_record_validations_callbacks.html#conditional-validation)。您不需要指向foreign_key，但可以通过指向来简化：

```
:if => "organisation.blank?" 
```

您在地址模型中有其他验证，对吗？当您不希望地址被验证时，它是否正在被验证？或者地址没有被验证？如果你能给我一些额外的细节，我可以帮助你在控制台中测试它。

* * *

1.  为了让我自己更容易重新：大规模分配，我更改了 rails 配置：`config.active_record.whitelist_attributes = false`
2.  我创建[了一个要点供您遵循](https://gist.github.com/3853702)
3.  我也有一个示例项目。如果您有兴趣，请告诉我。

    基本点：

4.  将以下内容添加到 Person 以确保 Org 或 Address 有效：

    `validates_presence_of :organisation, :unless => "address.present?"` `validates_associated :address, :unless => "organisation.present?"`

5.  向地址添加了验证以在 Org 不存在时触发错误： `validates_presence_of :line1, :line2, :city, :zip`

    我能够产生您正在寻求的要求。请查看[我创建的要点，](https://gist.github.com/3853702)其中我有一个完整的控制台测试计划。

* * *

我[在前面的 gist 中添加了一个控制器文件](https://gist.github.com/3853702#file_controller.rb)。

概述：

1.  创建此人所需要做的就是： `@person = current_user.people.build(params[:person])`
2.  :organisation_id 将始终从 :person 参数节点中找到，如下所示： `params[:person][:organisation_id]` 所以你的 if 永远不会是真的。

* * *

[我更新了要点，对控制器](https://gist.github.com/3853702#file_person_controller.rb)、[模型](https://gist.github.com/3853702#file_models.rb)和[表单](https://gist.github.com/3853702#file__fields.html.erb)进行了必要的更改。

概述：

1.  你需要清理你的控制器。您正在使用`accepts_nested_attribute`，所以在 :create 中，您只关心`params[:person]`. 此外，在 中`render :new`，您需要设置部分将使用的任何实例变量。这不会**通过**操作返回`:new`。和动作`:new`也`:edit`需要简化。
2.  您的 Person 模型需要使用`:reject_if`参数，因为 Address 字段将返回到 :create 操作 as `:address_attributes => {:line1 => '', :line2 => '', etc}`。如果有任何值，您只想创建关联。然后你的`validates_presence_of`for`:organisation`会工作得很好。
3.  您的表单需要将组织 ID 传递给控制器​​，而不是组织名称

    一切[尽在掌握之中](https://gist.github.com/3853702)

* * *

应该是[最后的要点](https://gist.github.com/3879505)。

概述：

1.  在构建 @person 之后立即将以下内容添加到您的编辑操作中：

    @person.build_address 如果@person.address.nil？这确保您有地址输入，即使 @person.address 不存在。它不存在，因为 accept_nested_attributes 上的 :reject_if 条件

2.  我干了 :reject_if 如下。这有点hacky，但有一些实用性：

    ```
    accepts_nested_attributes_for :address, :allow_destroy => true, :reject_if => :attributes_blank?

    def attributes_blank?(attrs)  
      attrs.except('id').values.all?(&:blank?)  
    end 
    ```

    一种。`attrs`-> params[:person][:address] 的结果
    b. `.except('id')`-> 返回除 'id' 之外的所有键值
    c. `.values`-> 将哈希中的所有值作为数组返回
    d. `.all?`-> 数组中的所有元素是否满足以下检查
    e. `&:blank`-> 块的 ruby​​ 简写，如下所示：`all?{ |v| v.blank? }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T15:20:52.593

你确定你不是这个意思：

```
validates :address, :presence => true, :if => organisation_id.nil? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-23T18:04:17.163

更简单的方法可能是添加自定义验证器。这非常简单，您不必偶然发现语法或试图弄清楚为什么 Rails 的魔法不起作用。

> 在我的 Person 模型中，我需要确保只有当一个人的 organization_id 为空白时，该人的地址字段才必须存在。

```
class Person < ActiveRecord::Base
  ...
  validate :address_if_organisation_id_is_present

  private

  def address_if_organisation_id_is_present
    return true unless organisation_id
    errors.add(:address, "cannot be blank") unless address
  end
end 
```

添加到模型的错误将阻止它保存。注意：您可能希望使用`address.blank?`或`address.empty?`如其他答案中所讨论的那样，但您可以为您想要的行为定义它。

# html - 如何使用百分比作为参数调整 HTML 中的图像大小？

> ID：12770021
> 
> 赞同：6
> 
> 时间：2012-10-07T15:15:06.033
> 
> 标签：html, css, image

我想在我的网站上调整图像的大小。我知道如何通过调整之前的图像大小或计算宽度和高度并以像素为单位设置值来做到这一点。但是我多次使用不同尺寸的同一张图片，所以如果我可以根据自己的大小调整图像的大小，我会花费更少的时间。

```
<img src='images/logo-beta.png' id="logo" height="75%" width="75%"/> 
```

我已经尝试过了，但是问题是大小是相对于其父元素设置的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T15:22:46.737

仅使用 HTML 或 CSS 无法自动执行您想要的操作。您需要使用 JavaScript 来获取图像的尺寸，然后计算这些尺寸的百分比并将它们重新应用于图像（以像素为单位）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T16:02:00.313

有一种方法，但并不完美。它需要一个显示设置为“inline-block”的包装元素，并使用“max-width”调整图像大小。

问题是父元素保留了图像的原始宽度，这可能会根据您的要求引起问题。

示例：http: [//jsfiddle.net/amustill/GnEw5/](http://jsfiddle.net/amustill/GnEw5/)

# c++ - 使用 CMake 创建一个自包含的 c++ 共享库

> ID：12770022
> 
> 赞同：1
> 
> 时间：2012-10-07T15:15:09.550
> 
> 标签：c++, cmake, shared-libraries

我创建了一个“自包含”C++ 共享库，它使用两个附加库，即 OpenCL 和 Boost C++。为此，我使用了 CMake。

理想情况下，该库将是自包含的，即外部应用程序不必显式链接到 OpenCL 和 Boost。相反，他们只会链接到我的图书馆。

但是，使用 g++（而不是使用 CMake）编译外部应用程序需要用户知道 OpenCL 和 Boost 的头文件的位置，除了显式指定它们（使用 -I*sub/library/path *)。

有没有办法让 CMake 生成一个包含属于子库的标题的路径的库？这样，用户只需链接到我的库，而无需负责为子库标头提供文件路径。

谢谢

# java - 从服务器获取对象并在以 ajax 加载的页面中使用它的最佳方法是什么？

> ID：12770024
> 
> 赞同：0
> 
> 时间：2012-10-07T15:15:22.267
> 
> 标签：java, jquery, struts2

我有两个 JSP：A 和 BAjsp 是一个容器 jsp，在使用 jQuery/Javascript 加载 A.jsp 时，我正在通过 Ajax 加载 B.jsp。

我需要将 B.jsp 中加载的值与存储在我的数据库中的一组变量进行比较。（它们只需要获取一次，因为它们不会改变。）

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T15:15:22.267

在 A.jsp 中，将变量包含为会话变量。

```
<s:set var="var1" value="Obj1" scope="session"/> 
```

在 B.jsp 我使用变量

```
<s:if test="%{ajaxVal < var1.val1}" />true</s:if> 
```

# php - 使用 jQuery / PHP 在 Iframe 中传递登录详细信息

> ID：12770025
> 
> 赞同：0
> 
> 时间：2012-10-07T15:15:23.917
> 
> 标签：php, jquery

我正在尝试将 zopim 仪表板集成到我的管理面板中。我想将它放在我的管理面板中的某种 iframe 中，但我也希望在页面加载时无缝登录。

可以用 jQuery / PHP 来实现吗？

这是我要使用的页面的网址：- [https://dashboard.zopim.com/](https://dashboard.zopim.com/)

我检查了stackoverflow +许多论坛，但没有找到正确的答案，例如如何使用jQuery通过iframe传递登录详细信息......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:33:47.033

您可以仅在 1 个方向上传递信息，从页面到 iframe，使用 URL 中的 GET 参数，因此 iframe 中调用的页面可以获取此信息

```
 <iframe src="http://mysite.com?info1=foo&info2=bar" /> 
```

但是，您无法从调用该其他站点的父页面访问 iframe 的信息。

# eclipse - 如何在启动时恢复 Eclipse 最后一个项目树展开？

> ID：12770027
> 
> 赞同：0
> 
> 时间：2012-10-07T15:15:42.223
> 
> 标签：eclipse

当我退出 Eclipse 时，会打开一些有趣的包。但是当我重新启动 Eclipse 时，所有项目/包都被折叠了。有没有办法在关闭 Eclipse 时保存 Project-Explorer 的状态？

我*不想*使用该`Link to Editor`功能，因为这总是打开包，我不想扩展它只是为了在其他类中查找一些声明。

我也*不想*使用`focus view`of `MyLyn`，因为我想独立于任务并想查看所有可用的包。

是否有 Eclipse 的内置功能可以这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:25:28.577

我在 Eclipse-Issue 中发现此功能已被删除，因为它在启动阶段花费了很多时间。因此，如果没有额外的插件，Eclipse 中不存在此功能。

# c# - 从中继器内的标签中删除单词

> ID：12770037
> 
> 赞同：0
> 
> 时间：2012-10-07T15:17:19.843
> 
> 标签：c#, asp.net, label, repeater

我正在尝试从标签中删除单词，直到它低于指定的允许宽度。但是，当我遍历中继器项目时，Width = 0 和 Text 属性始终为空。

我已经尝试将我的代码移动到 OnItemDataBound

```
private void loadData()
{
    Activities activities = new Activities();
    var acts = activities.getNextActivities(3);
    if (acts.Count > 0)
    {
        rptActivities.DataSource = acts;
        rptActivities.DataBind();

        foreach (RepeaterItem item in rptActivities.Items)
        {
            Label lblActName = (Label)item.FindControl("lblActName");
            Unit width = lblActName.Width;
            while (width.Value > 310)
            {
                int pos = lblActName.Text.LastIndexOf(" ") < 0 ? 0 : lblActName.Text.LastIndexOf(" ");
                lblActName.Text = lblActName.Text.Substring(0, pos);
                width = lblActName.Width;
            }
        }
     }
     else
     {
        pnlItems.Visible = false;
        pnlNoItems.Visible = true;
     }
} 
```

# php - 对来自 PHP 的 MSSQL 连接进行故障排除

> ID：12770038
> 
> 赞同：1
> 
> 时间：2012-10-07T15:17:22.933
> 
> 标签：php, sql-server

我正在尝试通过 PHP 5.2 连接到外部 Sql Server。

使用这条线：

```
$con = mssql_connect('123.123.123.123','Username','Password') or die('Could not connect to the server!'); 
```

我收到此错误：

> 警告：mssql_connect() [function.mssql-connect]: Unable to connect to server: 123.123.123.123 in /home/file/public_html/structure/index.php on line 4 无法连接到服务器！

我的托管服务提供商向我保证，我的服务器已打开端口以连接到数据库。查看我的 php 信息，使用 FreeTDS 启用了 MSSQL 支持。

任何想法为什么这会失败，或者我如何开始解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:21:05.593

我知道远程连接到 MSSQL 有一些安全性。我有同样的问题。您需要为请求的 IP 提供连接许可。

您是否尝试使用 MS SQL 程序连接您的个人计算机。

如果可以的话，您的cilent（php主机）有问题

如果你不能，那么你的 mssql 服务器有问题

# jquery - 更改文本框 iframe 源

> ID：12770039
> 
> 赞同：1
> 
> 时间：2012-10-07T15:17:27.853
> 
> 标签：jquery, iframe, textbox

请参阅下面的代码片段或[jsfiddle](http://jsfiddle.net/yRypL/)。

我想要做的是在文本框中输入一个像“google.com”这样的网址并进行设置，这样每次我在文本框中按回车键时，它都会直接指向所放置的站点/网址。

我在下面尝试了以下方法，但没有运气。如果有人可以提供帮助，将不胜感激。

```
$("#go").keyup( function(e) {
    if (e.keyCode == 13) {
        var sitesgohere = document.getElementById("sitesfool");
        sitesgohere.src = "https://" + document.searchme.ducks.value;
    }
}); 
```

```
$("#hidesearch, .search").hide();
$('.container').draggable();

$(".togglesearch").toggle(function() {
    $(".search").fadeIn(800);
    $("#hidesearch").show();
    $("#showsearch").hide();
}, function() {
    $(".search").fadeOut(400);
    $("#hidesearch").hide();
    $("#showsearch").show();
});

$("#go").click(function() {
    var siteurl = (document.sites.siteurl.value);

    var sitesgohere = document.getElementById("sitesfool");
    sitesgohere.src = "http://" + siteurl;
});

$("#searchthis").click(function() {
    var siteurl = (document.searchme.ducks.value);

    var sitesgohere = document.getElementById("sitesfool");
    sitesgohere.src = "https://duckduckgo.com/?q=" + siteurl;
});
```

```
html, body {
    padding:0;
    margin:0;
    width:100%;
    height:100%;
    background-color:rgb(0,156,156);
    overflow:hidden;}

div.nav {
    padding:5px;
    margin:0px 0px 0px 1%;
    width:98%;
    height:20px;
    background-color:rgba(0,0,0,0.7);
    box-shadow:0px 0px 8px rgba(0,0,0,1);
    border-radius:0px 0px 10px 10px;}

div.togglenav {
    cursor:pointer;
    position:absolute;
    top:0px;
    right:10px;
    padding:5px;
    width:20px;
    height:20px;
    margin:0px 0px 0px 1%;
    background-color:rgba(0,0,0,0.7);
    box-shadow:0px 0px 8px rgba(0,0,0,1);
    border-radius:0px 0px 10px 10px;}

form[name="sites"] {
    padding-left:0.5%;}

div.urlspace {
    position:absolute;
    top:5%;
    left:0px;
    width:100%;
    height:95%;}

div.containsearch {
    position:absolute;
    bottom:0px;
    left:0px;
    padding:15px 10px 10px 10px;
    width:auto;
    height:20px;
    background-color:rgba(0,0,0,0.7);
    box-shadow:0px 0px 8px rgba(0,0,0,1);
    border-radius:0px 10px 0px 0px;}

div.containsearch div {
    display:inline;}

div.togglesearch {
    position:relative;
    bottom:7px;
    cursor:pointer;
    float:right;
    margin-left:5px;
    width:auto;
    height:20px;
    overflow:hidden;}

#search {
    position:relative;
    bottom:7px;
    cursor:pointer;
    float:right;
    margin-left:5px;
    width:auto;
    height:20px;
    overflow:hidden;}

input[name="ducks"] {
    width:250px;}

form {
    position:relative;
    display:inline;
    padding:0;
    margin:0;
    top:-5px;}

svg {
    margin:5px 0px 0px 5px;
    padding:0px 5px 5px 0px;
    fill:white;
    transition:all 250ms ease-in-out;
    -webkit-transition:all 250ms ease-in-out;
    -moz-transition:all 250ms ease-in-out;
    -o-transition:all 250ms ease-in-out;
    -ms-transition:all 250ms ease-in-out;}

svg:hover {
    fill:#00ff00;}

svg#go {
    fill:#00bc00;
    transition:all 250ms ease-in-out;
    -webkit-transition:all 250ms ease-in-out;
    -moz-transition:all 250ms ease-in-out;
    -o-transition:all 250ms ease-in-out;
    -ms-transition:all 250ms ease-in-out;}

svg#go:hover {
    fill:#00ff00;}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<div class="nav">
    <form name="sites">
        <input type="text" name="siteurl" style="width:80%;">
    </form>

    <svg id="go" xmlns="http://www.w3.org/2000/svg" version="1.1" width="10" height="10">
        <polygon points="0,0  0,10  10,5">
    </svg>
</div>

<div class="urlspace">
    <iframe id="sitesfool" height="100%" width="100%" frameBorder="0" src="http://michaelsdelivery.tk/">
        Your browser does not support IFRAME's
    </iframe>
</div>

<div class="containsearch">
    <div class="search">
        <form name="searchme">
            <input type="text" name="ducks">
        </form>

        <svg id="searchthis" xmlns="http://www.w3.org/2000/svg" version="1.1" width="10" height="10">
            <polygon points="0,0  0,10  10,5">
        </svg>
    </div>

    <div class="togglesearch">
        <svg id="hidesearch" xmlns="http://www.w3.org/2000/svg" version="1.1" width="10" height="10" style="margin:10px 0px 0px 10px;">
            <polygon points="10,10  10,0  0,5">
        </svg>

        <svg id="showsearch" xmlns="http://www.w3.org/2000/svg" version="1.1" width="10" height="10" style="margin:10px 0px 0px 10px;">
            <polygon points="0,0  0,10  10,5">
        </svg>
    </div>
</div>
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:48:02.420

由于您的输入元素在表单中，因此您只需要提交事件的处理程序，因为它在按下 Enter 键时触发：

```
$("form[name='sites']").submit(function(e) {
    // TODO: extract a function with the contents of this click handler
    $('#go').click();

    e.stopPropagation();
    return false;
});​​​​​​​​​​​​​​​​​ 
```

.

关于代码风格的一些评论：

*   小提琴是使用 jQuery 访问元素的奇怪组合，`document.<element_name>`并且`document.getElementById()`- 考虑对其进行规范化，例如仅使用 jQuery；
*   由于您创建了自定义按钮/链接，`cursor:pointer;cursor:hand;`因此向按钮的悬停类添加（或以相反的顺序，现在不记得了）会更加网络友好。

# icons - 如何通过 GUI 设计器将图标添加到标签栏项目

> ID：12770041
> 
> 赞同：1
> 
> 时间：2012-10-07T15:17:48.033
> 
> 标签：icons, ios6, tabbar

我有一个带有标签栏和标签栏按钮的 iOS6 iPhone 应用程序。这些按钮需要图标，这就是麻烦开始的地方。在项目中添加了一个图标，双击设计器中的一个按钮，并通过图像组合框将（问号）图标与该按钮相关联。当我在我的 iPhone 上运行该应用程序时，我确实看到该按钮现在确实显示了一个渐变灰色方块，它变成了一个渐变浅蓝色方块，但没有显示问号图标。图标是 .png，大小是宽 40，高 51。我在代码中没有更改任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T21:19:23.300

我在可以使用的范围内解决了我的问题：您需要所谓的“透明图标”。

# asp.net - 当服务托管在 IIS 中时，命名空间 System.Security.Cryptography 中的方法需要 2 分钟才能执行

> ID：12770042
> 
> 赞同：1
> 
> 时间：2012-10-07T15:17:53.357
> 
> 标签：asp.net, wcf, iis, delay

我构建了一个 ASP.NET Web 服务，它在处理其请求时使用 System.Security.Cryptography 命名空间。

当我在 ASP.NET 开发服务器中托管该服务时，一切正常。然后我把服务移到了IIS中，依然使用localhost地址，令人惊讶的是，每次服务从指定的命名空间调用一个方法，都需要2分钟才能完成！如果单个请求需要服务调用指定命名空间的 3 个方法，那么请求总共需要 6 分钟才能完成！

跟踪显示请求已按时收到，并且在每次调用指定命名空间时显示大约 2 分钟的时间间隔。

有人在其他地方看到过这种奇怪的行为吗？任何猜测将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T21:35:39.327

接受的答案是：更改应用程序的池标识并检查“加载用户配置文件”，以便可以代表应用程序池标识使用加密服务。

# java - OOP 设计：getter 方法（或对象）的可见性

> ID：12770044
> 
> 赞同：1
> 
> 时间：2012-10-07T15:18:16.007
> 
> 标签：java, android, oop

我目前正在编写一个 Android 游戏引擎库。基类（得到扩展）包含两个`WSLog`对象（Android Log 类方法的包装器）。一个被调用`gameEngineLog`（它应该只在游戏引擎项目中可见），另一个被调用`gameLog`（它应该在游戏引擎项目和实际游戏项目中可见）。

在基类中，您可以使用 getter 方法获取两个日志。

我已经通读了[控制对类成员的访问，](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)以了解哪些修饰符应该在前面，`getGameEngineLog()`使其仅在游戏引擎项目中可见，但没有任何修饰符（公共、受保护、默认或私有）适合我的需要。

如何使`gameEngineLog`对象仅在整个游戏引擎项目中可见，而不是实际的游戏项目？

注意：游戏引擎项目中的所有其他组件（类）都包含对基类的引用（有些在不同的包中）。我想要的只是这些类具有对`gameEngineLog`对象的引用。欢迎任何方法。

这是一个视觉表示：

![在此处输入图像描述](../Images/ce6a88818dbc6adb17a38a2b491d80e1.png)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:10:05.383

正如@JB Nizet 所说，似乎游戏引擎类和游戏类应该有不同的基类。这些类仍然可以共享一个共同的基类（应该有`getGameLog`）。至少，游戏引擎类可能只有一个单独的子类。

如果只有这个基类的子类需要访问`getGameEngineLog`，那么它可以作为受保护的成员引入游戏引擎类的子类中。

如果打算从其他类（但仅限于游戏引擎中的类）调用它，并且 package-private 不会这样做，则一种方法是为任何可以使用此日志的类提供一个对象，该对象提供对它的访问权限一个游戏引擎对象。

例如，如果对日志的访问是从一个中心点控制的，并且执行不良的游戏必须不可能访问它（即使是通过黑客攻击），那么您的项目可以创建一个单例，通过它所有日志记录完成后，它可以（直接或间接）创建任何其他可以访问日志的对象，并为它们提供具有日志记录功能的对象。

实现提供对日志访问的对象的一种方法是将其作为具有私有构造函数的游戏引擎类的内部类的实例（以便只有游戏引擎可以创建它）。

# javascript - Javascript .替换替代品

> ID：12770045
> 
> 赞同：6
> 
> 时间：2012-10-07T15:18:17.753
> 
> 标签：javascript, css

我正在为 eBay 编写模板。但是，eBay 不允许使用 .replace。下面的代码用于滚动选项卡部分。当用户将鼠标悬停在选项卡（a）上时，相应的 div div（a）变得可见。

是否有一种解决方法可以在不使用 .replace 的情况下使代码正常工作？

```
var divs = new Array();
divs.push("contentPayment");
divs.push("contentShipping");
divs.push("contentWarranty");
divs.push("contentContact");
var navs = new Array();
navs.push("nav1");
navs.push("nav2");
navs.push("nav3");
navs.push("nav4");
///////////////////////////////////////

function hasClass(element, cls) {
    return (' ' + element.className + ' ').indexOf(' ' + cls + ' ') > -1;
}
///////////////////////////////////////////////////////////////////////

function toggleDisplay(id) {
    for (var i = 0; i < divs.length; i++) {
        var item = document.getElementById(divs[i]);
        item.style.display = 'none';
    }
    var target = document.getElementById(id);
    target.style.display = 'block';
    /////////////////////////////////////////////////////////////////////////////////////////////////////// 
    ////////////////////////////PAYMENT IS HOVERED////////////////////////////////////////////////////////
    if (id == "contentPayment") {
        var CurrentTab = document.getElementById("nav1");
        var AlreadyActive = hasClass(CurrentTab, "tabActive");
        if (AlreadyActive === false) {
            for (var i = 0; i < navs.length; i++) {
                var otherTabs = document.getElementById(navs[i]);
                otherTabs.className = otherTabs.className.replace(' tabActive', '');
            }
            CurrentTab.className += " " + "tabActive";
        }
    }

    /////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////Shipping IS HOVERED////////////////////////////////////////////////////////
    if (id == "contentShipping") {
        var CurrentTab = document.getElementById("nav2");
        var AlreadyActive = hasClass(CurrentTab, "tabActive");
        if (AlreadyActive === false) {
            for (var i = 0; i < navs.length; i++) {
                var otherTabs = document.getElementById(navs[i]);
                otherTabs.className = otherTabs.className.replace(' tabActive', '');
            }
            CurrentTab.className += " " + "tabActive";
        }
    }

    ///////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////Warranty IS HOVERED////////////////////////////////////////////////////////
    if (id == "contentWarranty") {
        var CurrentTab = document.getElementById("nav3");
        var AlreadyActive = hasClass(CurrentTab, "tabActive");
        if (AlreadyActive === false) {
            for (var i = 0; i < navs.length; i++) {
                var otherTabs = document.getElementById(navs[i]);
                otherTabs.className = otherTabs.className.replace(' tabActive', '');
            }
            CurrentTab.className += " " + "tabActive";
        }
    }

    ///////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////Contact IS HOVERED////////////////////////////////////////////////////////
    if (id == "contentContact") {
        var CurrentTab = document.getElementById("nav4");
        var AlreadyActive = hasClass(CurrentTab, "tabActive");
        if (AlreadyActive === false) {
            for (var i = 0; i < navs.length; i++) {
                var otherTabs = document.getElementById(navs[i]);
                otherTabs.className = otherTabs.className.replace(' tabActive', '');
            }
            CurrentTab.className += " " + "tabActive";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T15:32:48.380

你可以试试这个作为`replace`功能的替代品

```
String.prototype.fakeReplace = function(str, newstr) {
    return this.split(str).join(newstr);
};

var str = "Welcome javascript";
str = str.fakeReplace('javascript', '');
alert(str); // Welcome 
```

[**演示**](http://jsbin.com/eyebad/3/edit)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T09:55:45.287

要获得更有效但稍长的方法，请使用以下命令：

```
String.prototype.myReplace = function(pattern, nw) {
   var curidx = 0, len = this.length, patlen = pattern.length, res = "";
   while(curidx < len) {
       var nwidx = this.indexOf(pattern, curidx);
       console.log(nwidx);
       if(nwidx == -1) {
           break;
       }
       res = res + this.substr(curidx, nwidx - curidx);
       res = res + nw;
       curidx = nwidx + patlen;
   }
   return res;
};
alert("Glee is awesome".myReplace("awesome", "very very very awesome")); 
```

看看它的实际效果：[小链接](http://jsfiddle.net/glee/eRvzY/)。

希望有帮助！

# c# - ASP.NET-C#：在 Gridview 中将 const 插入到 TextBox

> ID：12770049
> 
> 赞同：0
> 
> 时间：2012-10-07T15:18:38.453
> 
> 标签：c#, asp.net, gridview, datagridviewtextboxcell

我在将 const "1" 插入到 gridview 的文本框中时遇到了一些问题。

网格视图代码：

```
<asp:GridView ID="GridView2" runat="server" AutoGenerateColumns="False" EnableViewState="False">
        <Columns>
        <asp:BoundField DataField="Price" HeaderText="Price" ItemStyle-CssClass="price" >

<ItemStyle CssClass="price"></ItemStyle>
            </asp:BoundField>

                         <asp:TemplateField HeaderText="ProductID">
                <ItemTemplate>
                    <asp:Label ID="lblID" runat="server" Text='<%# Eval("ProductID") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
             <asp:TemplateField HeaderText="ProductName">
                <ItemTemplate>
                    <asp:Label ID="lblName" runat="server" Text='<%# Eval("ProductName") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>

             <asp:TemplateField HeaderText="Summary">
                <ItemTemplate>
                    <asp:Label ID="lblSum" runat="server" Text='<%# Eval("Summary") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
             <asp:TemplateField HeaderText="picPath">
                <ItemTemplate>
                    <asp:Label ID="lblPic" runat="server" Text='<%# Eval("picPath") %>' ></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>

            <asp:TemplateField HeaderText = "quantity">
            <ItemTemplate>
                <asp:TextBox ID="lblquantity" runat="server" ></asp:TextBox>

            </ItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderText = "Total">
            <ItemTemplate>
                <asp:Label ID="lblTotal" runat="server" ></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

所有信息都是从上一页的会话中填充的，在这个不是来自任何地方的文本框旁边，它是一个用户应该输入的数量文本框。我希望它的默认值为“1”。

我实际上不知道如何插入到 gridview 中的文本框中。

请帮我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T16:26:12.017

这可能是因为代码也在检查页眉和页脚模板。

只需在设置值之前进行空检查...

```
TextBox tb = (TextBox)e.Row.FindControl("lblquantity");
if(tb!=null)
    tb.Text = Convert.ToString(123); 
```

这肯定会奏效...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T15:36:19.400

```
<asp:TemplateField HeaderText = "quantity">
        <ItemTemplate>
            <asp:TextBox ID="lblquantity" runat="server" Text='<%# Eval("quantity") == DBNull.Value ? "1" : Eval("quantity").ToString()' ></asp:TextBox>
        </ItemTemplate>
</asp:TemplateField> 
```

如果表中的数量值为空，则Text属性将默认为1。否则它将是表中的数量列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T15:42:56.203

您可以将 chis 代码放入 GridView 的 RowDataBound 事件中...

```
TextBox tb = (TextBox)e.Row.FindControl("lblquantity");
tb.Text = Convert.ToString(123); 
```

我希望这有帮助...

# java - 修剪有向图的叶分量

> ID：12770050
> 
> 赞同：0
> 
> 时间：2012-10-07T15:18:42.533
> 
> 标签：java, graph, graph-algorithm, directed-graph

给定一个有向图及其一些节点，如何修剪无法到达任何给定节点的节点。（我称它为叶组件，我不确定这是一个正确的术语）

是否有任何已知的算法可以有效地解决这个问题？

如果您能指出一些 Java 开源代码，那将是完美的。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T16:50:59.290

从给定的一组节点开始进行广度优先搜索或深度优先搜索，并标记搜索遍历的所有节点。之后，所有未标记的节点都无法从您的给定节点集访问，并且可以被修剪。如果*n*是顶点数，*m*是边数，这将解决*O(n + m)*中的问题。

我个人更喜欢[Tinkerpop Blueprints](http://blueprints.tinkerpop.com "Tinkerpop 蓝图")作为我在 JVM/Java/Scala 中进行图形处理的主要库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T16:55:56.413

如果我猜对了，您需要找到[强连通分量](http://en.wikipedia.org/wiki/Strongly_connected_component)，可以通过 2 次深度优先搜索在 O(n + m) 时间内找到。

# java - 如何在 Java 中的简单 HTTP Web 服务器中从客户端读取输入？

> ID：12770052
> 
> 赞同：0
> 
> 时间：2012-10-07T15:19:09.640
> 
> 标签：java, http, webserver

我正在尝试用 Java 创建一个简单的 HTTP Web 服务器。我只是一步一步地采取这个，所以它非常简单。我正在努力做到这一点，以便我可以从客户端读取简单的输入，并在它们都连接时从服务器输出任何内容。

在网站上搜索教程后，这是我到目前为止所做的：

```
public class Server
{
    public static void main(String[] args) throws Exception
    {
        boolean listening = true;
        ServerSocket server = null;
        int port = 2222;
        try
        {
            System.out.println("Server binding to port " + port);
            server = new ServerSocket(port);
        }
        catch(Exception e)
        {
            System.out.println("Error: " + e);
            System.exit(1);
        }

        System.out.println("Server successfully binded to port " + port);

        while(listening)
        {
            System.out.println("Attempting to connect to client");
            Socket client = server.accept();
            System.out.println("Successfully connected to client");
            new ServerThread(client).start() ;
        }

        server.close();
    }
}

public class ServerThread extends Thread
{
    private Socket socket = null ;
    public ServerThread(Socket s)
    {
        this.socket = s ;
    }

    public void run()
    {       
        InputStream in = socket.getInputStream() ;
        OutputStream out = socket.getOutputStream() ;
        byte [] message, reply;
        while((in.read(message))
        {
            out.write(reply) ;
        }
        in.close() ;
        out.close() ;
        socket.close() ;    
    }
} 
```

它在尝试连接到客户端后绑定然后挂起。这是因为我不确定你在 ServerThread 的 while 循环中做了什么，以及你对消息和回复变量做了什么>_< 我已经很久没有做 Java 了，所以放轻松！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T19:32:02.967

我只将这种服务器用作“好奇心”，仅用于学习新东西，因为您正在重新发明轮子，出于安全原因等……我只需要使用一次，因为我必须使用 JSON 与服务器通信代码并且无法安装服务器。这段代码需要更多的工作，比如我们为每个请求创建一个新线程，一个更好的 RCF HTTP 实现，但它适用于您的普通浏览器。

我希望这有帮助。

```
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;

public class MiniPbxManServer extends Thread {
    private final int PORT = 2222;    
    public static void main(String[] args) {
        MiniPbxManServer gtp = new MiniPbxManServer();
        gtp.start();
    }    
    public void run() {
        try {
            ServerSocket server = new ServerSocket(PORT);
            System.out.println("MiniServer active "+PORT);
            boolean shudown = true;
            while (shudown) {               
                Socket socket = server.accept();                
                InputStream is = socket.getInputStream();
                PrintWriter out = new PrintWriter(socket.getOutputStream());            
                BufferedReader in = new BufferedReader(new InputStreamReader(is));              
                String line;
                line = in.readLine();
                String auxLine = line;
                line = "";
                // looks for post data
                int postDataI = -1;
                while ((line = in.readLine()) != null && (line.length() != 0)) {
                    System.out.println(line);
                    if (line.indexOf("Content-Length:") > -1) {
                        postDataI = new Integer(line
                                .substring(
                                        line.indexOf("Content-Length:") + 16,
                                        line.length())).intValue();
                    }
                }
                String postData = "";
                for (int i = 0; i < postDataI; i++) {
                    int intParser = in.read();
                    postData += (char) intParser;
                }                               
                out.println("HTTP/1.0 200 OK");
                out.println("Content-Type: text/html; charset=utf-8");
                out.println("Server: MINISERVER");
                // this blank line signals the end of the headers
                out.println("");
                // Send the HTML page               
                out.println("<H1>Welcome to the Mini PbxMan server</H1>");
                out.println("<H2>GET->"+auxLine+ "</H2>");        
                out.println("<H2>Post->"+postData+ "</H2>");
                out.println("<form name=\"input\" action=\"imback\" method=\"post\">");
                out.println("Username: <input type=\"text\" name=\"user\"><input type=\"submit\" value=\"Submit\"></form>");                 
                //if your get parameter contains shutdown it will shutdown
                if(auxLine.indexOf("?shutdown")>-1){
                    shudown = false;
                }
                out.close();
                socket.close();
            }
            server.close();            
        } catch (Exception e) {
            e.printStackTrace();
        }
    }    
} 
```

网址：本地主机：2222/随便

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T15:45:16.173

我认为你在高水平上走的是正确的道路。您所拥有的系统与生产系统之间的区别在于，它们对套接字上的输入进行轮询是在不同的线程中完成的，以免在等待输入时停止系统。

事实上，Web 服务器的配置参数之一是有多少客户端（线程）启动并运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T15:51:05.373

您应该始终从服务器的输出流中刷新数据。客户端响应可能取决于此：

```
out.flush(); 
```

要检查流的结尾，您可以使用：

```
int result = 0;
while ((result = in.read(message)) != -1) {
... 
```

此外，您的回复消息似乎没有被初始化，您可能希望最初重新发送客户端数据：

```
reply = message; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T16:18:11.847

jdk 包含一个简单的 http 服务器，用于构建嵌入式 http 服务器。看看这个[链接](http://docs.oracle.com/javase/6/docs/jre/api/net/httpserver/spec/com/sun/net/httpserver/package-summary.html)。

# .net - 内联网上的 WPF（XBAP）与 ASP.NET MVC？

> ID：12770054
> 
> 赞同：2
> 
> 时间：2012-10-07T15:19:24.357
> 
> 标签：.net, wpf, asp.net-mvc, web-applications, xbap

我需要制作一个将在组织内使用的应用程序。他们需要它在他们的网络上可用。我考虑了两个选项 ASP.NET MVC 和 WPF (web)。

可以在 IE 和 Firefox 上访问 WPF Web Browser 应用程序。

在 Intranet 上使用 ASP.NET MVC 和 WPF 的优缺点是什么？

我应该使用 ASP.NET MVC 还是 WPF ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T15:35:58.713

如果您要构建 Web 应用程序，请使用 MVC。如果您不需要 WPF 为您提供的任何额外内容，则没有理由使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T16:05:28.570

这取决于您打算构建的应用程序的类型。使用 WPF，您可以为本地资源的设计和使用提供更多可能性。但是，如果您在浏览器中运行应用程序，您仍然有一些限制。对于 WPF，您需要在客户端上安装正确版本的 .NET。

如果您只想在没有繁重图形交互的情况下显示数据，我会构建一个 ASP.NET MVC 应用程序。它独立于平台且易于升级。您可能还需要考虑移动设备（智能手机、平板电脑等）。您的浏览器应用程序也将在那里运行。

另一个问题是，您更了解哪种技术。WPF 和 ASP.NET 都需要一些时间来正确学习，以便您可以创建高性能且易于维护的应用程序。

**利弊**

ASP.NET MVC

*   平台独立，无需框架
*   在每个浏览器上运行，甚至是移动设备

WPF

*   更好，性能更高的用户界面
*   可以使用本地资源
*   多线程和异步编程的可能性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T15:51:16.867

在其网络上的组织内使用的应用程序。
为什么将其限制为浏览器应用程序？

如果您不想部署应用程序，请使用 ASP.NET MVC。

如果您需要 WPF 的功能，请直接使用它（而不是作为 XBAP）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T16:11:54.327

在不了解应用程序要求的情况下，很难说。两者都有好处。

如果你有一个现有的团队，我会看看他们的技能。使用 WPF 为桌面开发或使用 HTML/JS/CSS/MVC 为浏览器开发都是非常不同的野兽，需要不同的技能和经验。

另外，几年前我在一个项目的浏览器（称为 XBAP）中尝试了 WPF，发现它在实践中并不是那么好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T16:12:06.357

网页中的WPF？也许是银光。

Silverlight 优点：

*   与 ASP.NET MVC 相比，开发速度更快
*   适合企业内网对比：
*   需要安装 Silverlight 插件。

ASP.NET MVC 专业人士： - 无需安装任何插件或其他东西 - 很容易从不同平台使用（Mac、Linux、Windows，Silverlight 针对不同平台存在一些差异，Linux 可能会出现问题）

对于企业 Intranet，我会选择 Silverlight 作为项目，但 Silverlight 或 ASP.NET MVC 技术取决于项目需求。

# hbase - HBase 列族：有多少？

> ID：12770056
> 
> 赞同：12
> 
> 时间：2012-10-07T15:19:35.077
> 
> 标签：hbase

可能有很多类似的问题，但他们没有回答我的情况（至少我无法理解这一点）。

*   可以说，我在 HBase 中有一个包含 4 个列族的表。主要原因是每个列族都有不同的 VERSIONS 属性（非常不同）。

*   所有族的所有列都不是存储大数据（例如全文），而是平均1KB（长的标识符，一些短字符串，整数等）

*   我需要以多种方式访问​​数据：按列族扫描和获取，按版本（特定版本或范围）获取给定行的所有单元格，最后但并非最不重要：获取给定行的所有列的最新版本.

那么，在这种情况下，拥有 4 个列族的缺点是什么？读取效率是否较低，因为它们在不同的存储文件上操作（如果行不在内存中）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-04-20T19:53:36.480

HBase 中的列族数量是有限制的。每个列族有一个 MemStore（它是一个写入缓存，用于在将新数据写入 Hfile 之前存储新数据），当一个已满时，它们都会刷新。

添加的列族越多，创建的 MemStore 就越多，并且 Memstore 刷新会更频繁。它会降低性能。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-08T07:27:22.737

列族背后的想法很棒——不幸的是，当前的 HBase 实现不能很好地处理很多列族。基本上，如果您有完全不同的访问模式，您应该尝试坚持使用一个并添加第二个。另请参阅[HBase 手册](http://hbase.apache.org/book.html#number.of.cfs)

您可以做的是将您不同的“家庭”保留为具有不同前缀的列。HBase 是稀疏的，因此不会占用更多空间，如果需要，您仍然可以在扫描时获得一个带有 columnPrefix 过滤器的“家庭”

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-08T05:48:49.343

根据 Apache HBase wiki Hbase 将面临超过 2 或 3 个列族的性能问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-19T08:59:58.117

当 MemStore 积累了足够的数据时，整个排序集被写入 HDFS 中的新 HFile。HBase 每个列族使用多个 HFile，其中包含实际的单元格或 KeyValue 实例。这些文件随着时间的推移而创建，因为在 MemStore 中排序的 KeyValue 编辑作为文件刷新到磁盘。

请注意，这是 HBase 中列族数量受到限制的原因之一。每个 CF 有一个 MemStore；当一个满了，他们都冲水。它还保存最后写入的序列号，以便系统知道到目前为止保存的内容。添加的列族越多，创建的 MemStore 就越多，并且 Memstore 刷新会更频繁。

# java - StdRandom、StdOut、插入无法解析

> ID：12770063
> 
> 赞同：2
> 
> 时间：2012-10-07T15:19:55.553
> 
> 标签：java, sorting, input

此代码应实现排序。
我有 3 个错误：
“StdRandom 无法解析”、
“StdOut 无法解析”、
“插入无法解析”。
可能有一些库要导入？

```
public class randomDoubles 
{
public static void main(String[] args)
{

    int N = Integer.parseInt(args[0]);
    Double[] a = new Double[N];
    for(int i = 0; i < N; i++)
        a[i] = StdRandom.uniform(); // error: StdRandom cannot be resolved
    Insertion.sort(a);                  // error: Insertion cannot be resolved
    for (int i = 0; i < N; i++)
        StdOut.println(a[i]);       // error: StdOut cannot be resolved
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-23T15:16:46.587

您需要使用以下文件

[http://introcs.cs.princeton.edu/java/stdlib/StdRandom.java.html](http://introcs.cs.princeton.edu/java/stdlib/StdRandom.java.html)

[http://algs4.cs.princeton.edu/11model/StdOut.java.html](http://algs4.cs.princeton.edu/11model/StdOut.java.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T16:10:17.163

您肯定在这里缺少一些非标准库的导入。如果您想按原样编译和使用此代码，您应该询问您的教授在哪里可以找到这些库以及如何导入它们。

但是，如果您只想要一个使用标准 java 库大致执行此处所示操作的示例，则以下内容可能就足够了：

```
import java.util.Arrays;
import java.util.Random;

public class RandomDoubles {

    public static void main(String[] args)
    {

        int N = Integer.parseInt(args[0]);
        Double[] a = new Double[N];
        Random rand = new Random();
        for(int i = 0; i < N; i++)
            a[i] = rand.nextDouble();
        Arrays.sort(a);
        for (int i = 0; i < N; i++)
            System.out.println(a[i]);
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-21T06:43:38.960

其他人提供的链接没有处理想法。如果您是 idea(jetbrains intellij idea) 用户，您还需要转到 File->Project Structure->Libraries 并添加 algs4.jar

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-25T16:00:51.303

从课程代码中添加外部库

文件->项目结构->库并添加 algs4.jar

导入以下import edu.princeton.cs.algs4.StdRandom；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-03T03:36:24.667

几年前我上同一门课时也遇到过类似的问题，这里的问题是课程作者`StdRabdom`编写`StdOut`的所有第三方库。解决此问题的唯一方法是将库安装到您的本地机器上，例如提到的 rv1822。安装说明也包含在提供的链接中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-21T03:34:53.820

[您可以从http://algs4.cs.princeton.edu/code/](http://algs4.cs.princeton.edu/code/)下面的站点下载 jar ，并将其导入到您的项目中

# asp.net - 正确使用 MapPath 方法

> ID：12770067
> 
> 赞同：0
> 
> 时间：2012-10-07T15:20:14.090
> 
> 标签：asp.net, redirect, path

我有 Asp.Net 项目，我不能很好地使用 Mappath 方法。当我使用它时，例如：

```
response.redirect(mappath(".")); 
```

此行重定向到根目录，但对我来说有任何问题，我的问题是：

之间有什么不同：

```
response.redirect(mappath(".")); 
```

和

```
response.redirect("/"); 
```

二线工作正常！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:30:00.893

MapPath 方法返回硬盘驱动器上的物理地址。Response.Redirect 需要一个 url。在这里查看[http://msdn.microsoft.com/en-us/library/a8wa7sdt.aspx](http://msdn.microsoft.com/en-us/library/a8wa7sdt.aspx)

# ios - 如何在 iOS 中更改 OHAttributedLabel 的字体和字体大小？

> ID：12770070
> 
> 赞同：3
> 
> 时间：2012-10-07T15:20:19.827
> 
> 标签：ios, uilabel, nsattributedstring

我使用 OHAttributedLabel 和 NSAttributedString+Attributes.h 来设置属性标签，我成功地实现了这一点。但是我注意到字体大小和面孔不起作用。我也更改了字体形式 IB 以及使用 setFont:size of UILabel 的代码，但没有任何收获。我也搜索过没有人在谈论这个问题。

编辑：再添加一个，是否可以更改 UILabel 的行高？我搜索了 SO 并找到了一些允许更改行高的示例项目，但我已经在使用 OHAttributedLabel 类，所以不想创建混乱的类。

好心劝告。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:05:27.577

您需要在 NSAttributedString 中设置 Font 和 Size。

```
NSMutableAttributedString* attrStr = [NSMutableAttributedString attributedStringWithString:txt];
// Change font, text color, paragraph style
[attrStr setFont:[UIFont fontWithName:@"Helvetica" size:18]];
[attrStr setTextColor:[UIColor grayColor]]; 
```

# knockout.js - 使用 Knockout.js 对 Select2 的标记支持

> ID：12770071
> 
> 赞同：2
> 
> 时间：2012-10-07T15:20:34.827
> 
> 标签：knockout.js, jquery-select2

在尝试将[Knockout.js](http://knockoutjs.com/)与[Select2](http://ivaynberg.github.com/select2/)集成时，我注意到似乎[通常](https://github.com/ivaynberg/select2/wiki/Knockout.js-Integration)的做法似乎没有[标记支持](http://ivaynberg.github.com/select2/#tags)。

有[一个 jsFiddle](http://jsfiddle.net/drosen/6XvqX/)说明了基本支持，但不清楚如何将其扩展到 Select2 的标记支持。

我已将其简化为一个更简洁的**[jsFiddle 示例](http://jsfiddle.net/bmh_ca/6XvqX/38/)**，人们期望该示例将构成解决方案的基础。

对于如何使用 Knockout.js 获得对 Select2 的标记支持的想法和建议，我将不胜感激。

**注意：**我没有结婚`Select2`，尽管我认为它很棒。但是，如果有一个替代建议可以很好地与 标记支持`Knockout.js`，我会很想听听它。话虽`Select2`如此，我认为解决问题的方法会很有趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T20:22:35.520

如您所述，标记功能不适用于`<select>`元素。那是因为它允许用户添加不在列表中的标签。您可以在该字段中键入任何内容并按 Enter，它会添加到值中。

这是一个工作示例：http: [//jsfiddle.net/mbest/6XvqX/41/](http://jsfiddle.net/mbest/6XvqX/41/)

主要变化：

1.  可用项目列表通过`tags`选项直接传递给 Select2。
2.  使用`value`绑定而不是`selectedOptions`因为后者仅适用于`<select>`元素。
3.  计算用于将所选项目作为数组获取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-09T07:34:06.483

我已经用更新版本的 knockout.js 更新了提琴手，因为我无法让上面的示例正常工作。这个可以解决问题：http: [//jsfiddle.net/6XvqX/424/](http://jsfiddle.net/6XvqX/424/)。

```
(no change to the code itself) 
```

无论如何，感谢迈克尔提供的解决方案。:)

# python - C库的python包装的可维护性

> ID：12770077
> 
> 赞同：7
> 
> 时间：2012-10-07T15:21:08.303
> 
> 标签：python, dll, wrapper, ctypes

我有一个设计不佳且很大的 ( `> 300 public functions`，在头文件中`>200 numeric constants`定义`#define`)，我必须用 Python 包装。我有`dll`和`h`文件。该库每年更新一次，直到现在以向后兼容的方式（即只添加了函数，常量保持它们的数值等）。但我不能保证，因为我不控制图书馆。

使用`ctypes`，我看到了两种在 Python 中包装它的方法：

> 1.  将每个常量和函数映射到 python，1 到 1
> 2.  在 Python 中重新定义 API 并调用库。

第一个可以从头文件以（大致）自动方式完成，因此更易于维护和升级，第二个需要大量 python 代码，但更易于使用。

根据您对此类问题的经验和一些示例，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T12:48:52.477

我最近使用[ctypesgen](http://code.google.com/p/ctypesgen/)为 SDL 和补充库（SDL_image、SDL_ttf、SDL_mixer）创建了一个 ctypes 包装。

对我来说，它运作得相当好。它生成 Python 2.x，但我能够通过使用“2to3”实用程序获得所需的 3.x 代码。

我认为使用 ctypes 包装作为更“pythonic” api 的基础是一个好主意，这基本上就是我对[pslab](https://github.com/goranm/pslab)模块所做的（在非常简单的层面上）。

所以，如果你想做类似的事情，那将是一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T10:12:20.633

使用 ctypes 后端维护 Python 库并不是一种难以管理的方法。显然，初始投资比使用自动化工具要大，但你剩下的 API 应该会好得多。

如果您确实采取了这条路线，那么目标是将 Python API 与 C 库完全分开。使用一个 Python 前端 api 支持多个 ctypes 后端并不算太糟糕 - 只需在运行时查询并动态加载正确的 ctypes 包装器模块。我这样做是为了为 windows 和 linux 包装不同的 dll 文件和 .so 文件，但它也适用于库的版本。

# java - 线程“主”java.lang.StackOverflowError 中的异常

> ID：12770084
> 
> 赞同：7
> 
> 时间：2012-10-07T15:21:58.787
> 
> 标签：java, recursion, hashmap, stack-overflow

我有一段代码，但我无法弄清楚为什么它在线程“main”java.lang.StackOverflowError 中给了我异常。

这是问题：

```
Given a positive integer n, prints out the sum of the lengths of the Syracuse 
sequence starting in the range of 1 to n inclusive. So, for example, the call:
lengths(3)
will return the the combined length of the sequences:
1
2 1
3 10 5 16 8 4 2 1 
which is the value: 11\. lengths must throw an IllegalArgumentException if 
its input value is less than one. 
```

我的代码：

```
import java.util.HashMap;

public class Test {

HashMap<Integer,Integer> syraSumHashTable = new HashMap<Integer,Integer>();

public Test(){

}

public int lengths(int n)throws IllegalArgumentException{

    int sum =0;

    if(n < 1){
        throw new IllegalArgumentException("Error!! Invalid Input!");
    }   

    else{

        for(int i =1; i<=n;i++){

            if(syraSumHashTable.get(i)==null)
            {
                syraSumHashTable.put(i, printSyra(i,1));
                sum += (Integer)syraSumHashTable.get(i);

            }

            else{

                sum += (Integer)syraSumHashTable.get(i);
            }

        }

        return sum;

    }

}

private int printSyra(int num, int count){

    int n = num;

    if(n == 1){

        return count;
    }

    else{   
            if(n%2==0){

                return printSyra(n/2, ++count);
            }

            else{

                return printSyra((n*3)+1, ++count) ;

            }

    }

}
} 
```

驱动代码：

```
public static void main(String[] args) {
    // TODO Auto-generated method stub
    Test s1 = new Test();
    System.out.println(s1.lengths(90090249));
    //System.out.println(s1.lengths(5));
} 
```

. 我知道问题在于递归。如果输入的值很小，则不会发生错误，例如：5。但是当数字很大时，例如 90090249，我在线程“main”java.lang.StackOverflowError 中出现异常。感谢你的帮助。:)

我差点忘记了错误信息：

```
Exception in thread "main" java.lang.StackOverflowError
at Test.printSyra(Test.java:60)
at Test.printSyra(Test.java:65)
at Test.printSyra(Test.java:60)
at Test.printSyra(Test.java:65)
at Test.printSyra(Test.java:60)
at Test.printSyra(Test.java:60)
at Test.printSyra(Test.java:60)
at Test.printSyra(Test.java:60) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-07T15:30:36.717

你的算法很好。但是`int`对于您的计算来说太小了，因此输入失败：

```
printSyra(113383, 1); 
```

在某些时候整数溢出到负值并且你的实现变得疯狂，无限递归。换成`int num`，`long num`你会没事的 - 一段时间。稍后您将需要`BigInteger`.

请注意，根据 Wikipedia on [Collat​​z 猜想](http://en.wikipedia.org/wiki/Collatz_conjecture)（粗体字）：

> 任何小于 1 亿的初始起始数字的最长级数是 63,728,127，有**949 步**。对于小于 10 亿的起始数字，它是 670,617,279，有 986 个步骤，对于小于 100 亿的数字，它是 9,780,657,630，有**1132 个步骤**。

总步数等于您可以预期的最大嵌套级别（堆栈深度）。所以即使是相对较大的数字`StackOverflowError`也不应该发生。看看这个实现使用`BigInteger`：

```
private static int printSyra(BigInteger num, int count) {
    if (num.equals(BigInteger.ONE)) {
        return count;
    }
    if (num.mod(BigInteger.valueOf(2)).equals(BigInteger.ZERO)) {
        return printSyra(num.divide(BigInteger.valueOf(2)), count + 1);
    } else {
        return printSyra(num.multiply(BigInteger.valueOf(3)).add(BigInteger.ONE), count + 1);
    }
} 
```

它甚至适用于非常大的值：

```
printSyra(new BigInteger("9780657630"), 0)  //1132
printSyra(new BigInteger("104899295810901231"), 0)  //2254 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T15:24:44.313

这是递归算法的固有问题。使递归的数量足够大，并且您无法真正避免堆栈溢出，除非该语言可以保证尾调用优化（Java 和大多数类似 C 的语言都不能）。真正修复它的唯一方法是“展开”递归，迭代地重写算法或使用辅助函数来模拟递归调用的状态传递，而无需实际嵌套调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T15:43:25.837

一种解决方案是允许 JVM 使用 java -Xss 参数为堆栈递归占用更多空间。它的默认值小于一兆字节，IIRC，最多可以限制为几百个递归。

更好的解决方案是在不递归的情况下重写练习：

```
private int printSyra(int num){
    int count = 1;    
    int n = num;    
    while(n != 1){

            if(n%2==0){    
                n = n/2;
                ++count;
            }    
            else{    
                n=(n*3)+1;
                ++count;    
            }    
    }
    return count;
} 
```

# java - 尝试重新打开一个已经关闭的对象：SQLiteDatabase

> ID：12770092
> 
> 赞同：22
> 
> 时间：2012-10-07T15:22:47.977
> 
> 标签：java, android, database

当我尝试在项目属性中将项目构建目标更改为 4.1 google API 时，我的 logcat 中出现这些错误。我试图修复项目属性并清理项目，但没有成功。有什么问题？

```
10-07 15:13:34.839: E/Trace(731): error opening trace file: No such file or directory (2)
10-07 15:13:35.259: I/SQLiteConnectionPool(731): The connection pool for /data/data/hr.punctum.LociranjePonudaProizvoda/databases/proizvodidb has been closed but there are still 1 connections in use.  They will be closed as they are released back to the pool.
10-07 15:13:35.259: D/AndroidRuntime(731): Shutting down VM
10-07 15:13:35.259: W/dalvikvm(731): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
10-07 15:13:35.278: E/AndroidRuntime(731): FATAL EXCEPTION: main
10-07 15:13:35.278: E/AndroidRuntime(731): java.lang.RuntimeException: Unable to start activity ComponentInfo{hr.punctum.LociranjePonudaProizvoda/hr.punctum.LociranjePonudaProizvoda.ListaProizvoda}: java.lang.IllegalStateException: attempt to re-open an already-closed object: SQLiteDatabase: /data/data/hr.punctum.LociranjePonudaProizvoda/databases/proizvodidb
10-07 15:13:35.278: E/AndroidRuntime(731):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
10-07 15:13:35.278: E/AndroidRuntime(731):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
10-07 15:13:35.278: E/AndroidRuntime(731):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
10-07 15:13:35.278: E/AndroidRuntime(731):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
10-07 15:13:35.278: E/AndroidRuntime(731):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-07 15:13:35.278: E/AndroidRuntime(731):  at android.os.Looper.loop(Looper.java:137)
10-07 15:13:35.278: E/AndroidRuntime(731):  at android.app.ActivityThread.main(ActivityThread.java:4745)
10-07 15:13:35.278: E/AndroidRuntime(731):  at java.lang.reflect.Method.invokeNative(Native Method)
10-07 15:13:35.278: E/AndroidRuntime(731):  at java.lang.reflect.Method.invoke(Method.java:511)
10-07 15:13:35.278: E/AndroidRuntime(731):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-07 15:13:35.278: E/AndroidRuntime(731):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-07 15:13:35.278: E/AndroidRuntime(731):  at dalvik.system.NativeStart.main(Native Method)
10-07 15:13:35.278: E/AndroidRuntime(731): Caused by: java.lang.IllegalStateException: attempt to re-open an already-closed object: SQLiteDatabase: /data/data/hr.punctum.LociranjePonudaProizvoda/databases/proizvodidb
10-07 15:13:35.278: E/AndroidRuntime(731):  at android.database.sqlite.SQLiteClosable.acquireReference(SQLiteClosable.java:55)
10-07 15:13:35.278: E/AndroidRuntime(731):  at android.database.sqlite.SQLiteDatabase.endTransaction(SQLiteDatabase.java:520)
10-07 15:13:35.278: E/AndroidRuntime(731):  at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:263)
10-07 15:13:35.278: E/AndroidRuntime(731):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:164)
10-07 15:13:35.278: E/AndroidRuntime(731):  at hr.punctum.LociranjePonudaProizvoda.ListaProizvoda.onCreate(ListaProizvoda.java:27)
10-07 15:13:35.278: E/AndroidRuntime(731):  at android.app.Activity.performCreate(Activity.java:5008)
10-07 15:13:35.278: E/AndroidRuntime(731):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
10-07 15:13:35.278: E/AndroidRuntime(731):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
10-07 15:13:35.278: E/AndroidRuntime(731):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-07T15:58:27.600

确保您只使用过一个`SQLiteDatabase`. 我猜您已经实例化了多个实例，因此 Android 会抱怨。

你也应该看看这篇关于这个主题的[**博客文章**](http://www.androiddesignpatterns.com/2012/05/correctly-managing-your-sqlite-database.html)。

# mkmapview - MKMapView & iOS6，避免地图即时更新

> ID：12770095
> 
> 赞同：1
> 
> 时间：2012-10-07T15:23:32.930
> 
> 标签：mkmapview, caeagllayer

我已经实现了一个`MKMapView`用于显示卫星地图的应用程序。在我的应用程序中，我需要以编程方式更新地图的中心以及地图视图的转换。在 iOS 6 之前，这很好用。在 iOS 6 上，不能再加入两步操作。也就是说，当我尝试设置地图中心时，它会立即刷新，在我有机会设置转换之前。这很糟糕，因为一瞬间，我可以看到中间表示。查看新`MKMapView`实现的内部，我看到它现在使用 OpenGL：

`VKMapCanvas: 0x9d29440; frame = (0 0; 1217.57 1217.57); clipsToBounds = YES; layer = [CAEAGLLayer]: 0x9d2a610`

我认为问题在于 OpenGL 表面会立即更新。我的问题是，无论如何启用/禁用更新`VKMapCanvas`？

# objective-c - xcode核心数据部分错误

> ID：12770096
> 
> 赞同：1
> 
> 时间：2012-10-07T15:23:33.723
> 
> 标签：objective-c, xcode, uitableview, core-data

我有一个从核心数据中获取数据的表。我添加了一个部分，其中必须只有一个静态单元格。但我得到一个错误，我不知道为什么。

> *** 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*** -[__NSArrayM objectAtIndex:]: index 1 beyond bounds [0 .. 0]”

questo è il codice

```
- (void)viewWillAppear:(BOOL)animated {
[super viewWillAppear:animated];
[self setupFetchedResultsController];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
return 2;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

if (section == 0) {

    return [[self.fetchedResultsController fetchedObjects] count];

} else if (section == 1) {

    return 1;

}

return 0;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"Category Cell";

CategoryCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[CategoryCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

// Configure the cell...

if (indexPath.section == 0) {

    NSLog(@"section %i",indexPath.section);

    Category *category = [self.fetchedResultsController objectAtIndexPath:indexPath];

    cell.categoryNameLabel.text = category.name;
    cell.categoryNumberItemsLabel.text = [NSString stringWithFormat:@"%i",category.containItem.count];

} else {
    //Static cell
}
return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T16:59:27.770

您的两个 tableView 数据源方法不一致。

在`numberOfRowsInSection`中，您返回获取的结果控制器的总数`fetchedObjects`。

在`cellForRow...`中，您正在使用 fetched results 控制器的`objectAtIndexPath`方法。

根据文档，您应该获取部分信息对象并从那里获取行数：

```
- (NSInteger)tableView:(UITableView *)table numberOfRowsInSection:(NSInteger)section {
    id <NSFetchedResultsSectionInfo> sectionInfo = [[<#Fetched results controller#> sections] objectAtIndex:section];
    return [sectionInfo numberOfObjects];
} 
```

# c++ - 如何在运行 SDL 程序时降低 CPU 使用率？

> ID：12770098
> 
> 赞同：10
> 
> 时间：2012-10-07T15:24:26.400
> 
> 标签：c++, multithreading, sdl

我已经使用 SDL 完成了一个非常基本的窗口，并希望保持它运行，直到我按下窗口上的 X。

```
#include "SDL.h"
const int SCREEN_WIDTH = 640;
const int SCREEN_HEIGHT = 480;

int main(int argc, char **argv)
{
    SDL_Init( SDL_INIT_VIDEO );
    SDL_Surface* screen = SDL_SetVideoMode( SCREEN_WIDTH, SCREEN_HEIGHT, 0, 
                                            SDL_HWSURFACE | SDL_DOUBLEBUF );
    SDL_WM_SetCaption( "SDL Test", 0 ); 
    SDL_Event event;
    bool quit = false;
    while (quit != false)
    {
        if (SDL_PollEvent(&event)) {
            if (event.type == SDL_QUIT) {
                quit = true;
            }
        }
        SDL_Delay(80);
    }
    SDL_Quit();
    return 0;
} 
```

我尝试`SDL_Delay()`在 while 子句的末尾添加，效果很好。

然而，80 毫秒似乎是我可以用来保持程序平稳运行的最高值，即使如此，CPU 使用率也约为 15-20%。

这是做到这一点的最好方法吗？我是否必须忍受它已经在这一点上吃掉这么多 CPU 的事实？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-05-06T22:13:11.907

我知道这是一篇较旧的帖子，但我自己在启动一个小演示项目时遇到了 SDL 的这个问题。就像用户 'thebuzzsaw' 指出的那样，最好的解决方案是`SDL_WaitEvent`减少事件循环的 CPU 使用率。

对于将来寻求快速解决方案的任何人，这就是它在您的示例中的外观。希望能帮助到你！

```
#include "SDL.h"
const int SCREEN_WIDTH = 640;
const int SCREEN_HEIGHT = 480;

int main(int argc, char **argv)
{
    SDL_Init( SDL_INIT_VIDEO );
    SDL_Surface* screen = SDL_SetVideoMode( SCREEN_WIDTH, SCREEN_HEIGHT, 0, 
                                            SDL_HWSURFACE | SDL_DOUBLEBUF );
    SDL_WM_SetCaption( "SDL Test", 0 ); 
    SDL_Event event;
    bool quit = false;
    while (quit == false)
    {
        if (SDL_WaitEvent(&event) != 0) {
            switch (event.type) {
            case SDL_QUIT:
            quit = true;
            break;
            }
        }
    }
    SDL_Quit();
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-07T17:09:51.730

我肯定会尝试完全阻塞的功能（例如`SDL_WaitEvent`）。我在 Qt 中有一个 OpenGL 应用程序，我注意到 CPU 使用率徘徊在 0% 和 1% 之间。在“使用”期间（移动相机和/或产生动画），它可能会飙升至 4%。

我正在开发自己的窗口工具包。我注意到当我使用阻塞事件循环时，我可以达到类似的 CPU 使用率。这将使您可能依赖的任何计时器变得复杂，但使用这种新方法实现计时器并不是非常困难。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-01T12:57:03.720

我刚刚想出了如何将游戏中的 CPU 使用率从 50% 降低到 < 10%。您的程序要简单得多，简单地使用`SDL_Delay()`就足够了。

我所做的是：`SDL_DisplayFormat()`在加载图像时使用，因此 blitting 会更快。这使其 CPU 使用率下降到大约 30%。

所以我发现对游戏背景（大的一体式 .png 文件）进行 blitting 占用了我的 CPU 资源。我在互联网上搜索了一个解决方案，但我发现的都是相同的答案 - 只需使用`SDL_Delay()`. 最后，我发现问题非常简单——`SDL_DisplayFormat()`将我的 24 位图像转换为 32 位。所以我将我的显示 BPP 设置为 24，这使 CPU 使用率达到了 ~20%。将它降低到 16 位解决了我的问题，现在 CPU 使用率低于 10%。

当然，这意味着色彩细节的损失，但由于我的游戏是一个简单的 2D 游戏，没有太详细的图形，这没关系。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-07T15:36:16.877

为了真正理解这一点，您需要了解线程。在线程应用程序中，程序一直运行到它正在等待某个东西，然后它告诉操作系统其他东西可以运行。本质上，您正在使用`SDL_Delay`命令执行此操作。如果完全没有延迟，我怀疑您的程序将以接近 100% 的容量运行。

仅当其他命令花费大量时间时，您应该在延迟语句中放置的时间量才重要。一般来说，我会将延迟设置为与测试 poll 命令所需的时间类似，但不超过 10 毫秒。将会发生的情况是操作系统将至少等待该时间长度，从而允许其他应用程序在后台运行。

至于您可以做些什么来改善这一点，好吧，看起来您可以做的并不多。但是，请注意，如果有另一个进程正在运行，占用大量 CPU 资源，您的程序的份额将会减少。

# android - 在 Java 中发送 sysex 消息

> ID：12770100
> 
> 赞同：0
> 
> 时间：2012-10-07T15:24:34.777
> 
> 标签：android, midi, hex, sysex

我正在尝试制作一个将 sysex 消息发送到 Roland 设备的应用程序。我找到了一个示例并尝试根据自己的需要对其进行一些修改：

```
protected void transmitSYSEX(String byteString)
{
    SysexMessage sysx = new SysexMessage();
    int lengthInBytes = byteString.length() / 2;
    byte sysxMsg[] = new byte[lengthInBytes];

    String message = "";

    for (int i = 0; i < lengthInBytes; i++) 
    {
        sysxMsg[i] = (byte) Integer.parseInt(
        byteString.substring(i * 2, i * 2 + 1), 16);
    }

    for (int i = 0 ; i < sysxMsg.length ; i++)
        message += sysxMsg[i];

    textView.setText(message);

    try
    {
        sysx.setMessage(sysxMsg, sysxMsg.length);
    } 
    catch (InvalidMidiDataException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    out_queue.add(sysx);
} 
```

byteString 是一个包含以下十六进制消息的字符串：F0411000004F1200020201070272F7 但是，我在 textView.setText(message) 行的控件打印输出返回以下字符串：15410041000000715

不太确定哪里出错了，textView消息不应该和输入消息一样吗？

问候/米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:47:20.957

我通过使用这个算法解决了这个问题：

```
int len = s.length();
byte[] data = new byte[len / 2];
for (int i = 0; i < len; i += 2) {
    data[i / 2] = (byte) ((Character.digit(s.charAt(i), 16) << 4)
                         + Character.digit(s.charAt(i+1), 16)); 
```

在此讨论中提供： [使用 Java 将十六进制转储的字符串表示形式转换为字节数组？](https://stackoverflow.com/questions/140131/convert-a-string-representation-of-a-hex-dump-to-a-byte-array-using-java)

不是 100% 确定为什么我返回的数组都是混乱的，我猜由于某种原因子字符串不能完全胜任这项工作。

干杯/M

# android - Android 用于精确定时事件处理的最佳方法

> ID：12770102
> 
> 赞同：0
> 
> 时间：2012-10-07T15:24:43.630
> 
> 标签：android, events, handler, precision, timed

我正在尝试改进我的事件处理系统，使其更加健壮，提高精度稳定性。

由于它是基于时间的事件处理/应答系统，第一个相关决定将是使用哪个时间参考。在阅读了我能找到的所有内容后，我最终使用了 SystemClock.elapsedRealtime()。为什么不使用 SystemClock.uptimeMillis() 或 System.nanoTime()？因为我的系统需要在睡眠/屏幕关​​闭时继续工作。

这里有更好的方法吗？

在那之后，最有问题的一步：如何处理定时事件并保证它们在期望的时间发生，没有滞后/延迟/变化？

在阅读了尽可能多的内容后，我决定采用处理程序方法，为每个事件类设置一个（因此不同的类可以异步发生）。

不幸的是，这并没有按预期工作： - 时间有时会完全同步，有时会出现非常大的持续延迟。根本不更改代码，只需几分钟后启动应用程序。线程之间的任何时钟同步问题（事件生成器和事件处理程序在不同的线程中）？- 处理程序计时不是恒定/精确的，我可以很容易地注意到显示的事件结果与可变滞后不同步。

有关如何在 Android 中以更精确的方式处理定时事件的任何提示？

谢谢，加布里埃尔西蒙斯

# vim - 覆盖插件的重新映射？

> ID：12770103
> 
> 赞同：11
> 
> 时间：2012-10-07T15:24:47.510
> 
> 标签：vim, remap

安装[vim-ruby-debugger](https://github.com/astashov/vim-ruby-debugger)后，该插件“劫持”了几个映射。Like `<leader>n`，或者`<leader>t`我分别用于 NERDTreeToggle 和 Command-T 查找。

[在这个 ruby​​-debugger](https://github.com/astashov/vim-ruby-debugger/blob/master/plugin/ruby_debugger.vim#L5)的硬编码映射中找到了罪魁祸首。

我希望将这些重新映射为`<leader>rdX`，即：以 *r*uby-*d*ebugger 为前缀。显然，我可以简单地破解插件并更改那里的映射。但这似乎有点太老套了（并且可能会在更新时中断）。

如何取消映射这些映射，以便 vim 再次回退到我自己的映射？这样我就可以重新映射我的 .vimrc 中的命令（它应该在哪里，恕我直言）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T15:27:33.163

首先，我同意 ZyX 的评论，即这是插件中应该修复的问题。请插件作者提供定制。

取消映射没有简单的方法，因为当映射被覆盖时，Vim 不会记住原始映射。您必须记下原始映射（当有问题的插件被暂时禁用时，或在 Vim 脚本中查看它们的定义），然后在加载有问题的插件*后*`:map ...`重新执行它们（减去它可能有的任何标志，因为这些会导致重新执行时出错）。这不能在 中完成，它是先采购的；我会推荐一个这样的地方。*`<unique>``.vimrc``~/.vim/after/plugin/zzzmappings.vim`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-24T04:28:28.000

我将所有映射保存在`after/plugin/keys.vim`. 这似乎确保它们始终优先于插件映射。（我使用了一堆插件，似乎已经解决了冲突）（[这是我的 nvim 配置](https://github.com/jameh/nvim-config)）

FWIW，我还将文件类型特定的映射保存在同一个文件夹中，但将它们写为`autocmd FileType`带有`<buffer>`关键字的命令。例如，下面是一个与[bullets.vim](https://github.com/dkarter/bullets.vim)的`ToggleCheckbox`函数冲突的映射（如果没有，它会在项目符号中添加一个空复选框）

```
autocmd FileType markdown nnoremap <buffer> <expr> <leader>x (getline('.') =~ '^\s*- \[' ? ':ToggleCheckbox<cr>' : '0/-<space><cr>la[<space>]<space><esc>') 
```*

# php - 谷歌驱动文件访问

> ID：12770110
> 
> 赞同：0
> 
> 时间：2012-10-07T15:26:39.317
> 
> 标签：php, google-docs-api, google-drive-api

我正在编写一个 PHP 脚本，它应该从谷歌驱动器电子表格中提取一些数据。现在，重要的是我们正在讨论一个特定的电子表格，它位于一个确切的谷歌帐户上。此数据需要显示在网站上。这意味着当用户访问此站点时，他/她不需要登录/验证或类似的操作，因为正在访问的电子表格存储在一个特定的谷歌驱动器帐户中。

我怎么拉这个？我在网上看到的只是用户登录到他们自己的帐户，查看他们自己不需要的文件的示例。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:16:06.123

所有云端硬盘访问都需要身份验证。我能想到的唯一方法是使用文件/发布到网络来发布电子表格。您的应用无需身份验证即可使用已发布的 URL 访问数据。

# java - ActiveMQ 不会重启，因为 KahaDB 被锁定

> ID：12770111
> 
> 赞同：7
> 
> 时间：2012-10-07T15:26:48.293
> 
> 标签：java, jetty, activemq, restart

在我刚刚运行的开发机器上本地启动/停止 ActiveMQ (5.6)`./activemq start`和`./activemq stop`分别。

在我们的 QA 机器上，我们将其作为服务安装`service activemq start`并`service activemq stop`分别运行和运行。

我只是去反弹QA机器并发出`service activemq stop`，然后`service activemq start`重新启动它。

我看到正在创建一个进程 ID，如果我运行，`ps -aef | grep activemq`我会看到 ActiveMQ 服务器的活生生的、呼吸的进程。

但是，如果我去，`http://<qa-server>:8161/admin`我会在服务器关闭时看到典型的错误：

> Firefox 无法在 :8161 建立与服务器的连接。

**编辑：**我现在已经尝试了`./active start`和`service activemq start`方法，并且都产生了相同的问题：我看到正在创建一个进程，但在 web 管理工具中什么都没有。

我检查了 ActiveMQ 的主目录，没有看到任何类型的`logs/`目录，所以我什至不确定从哪里开始调试问题。

AMQ 未重新启动，或者其 Web 管理应用程序未重新启动或正常运行；无论哪种方式，我都不知道从哪里开始。提前致谢！

**编辑**：

我在中看到以下错误`data/activemq.log`：

> 2012-10-07 11:37:14,501 | 信息 | 数据库 /qa-server/kahadb/lock 已锁定...等待 10 秒以使数据库解锁。原因：java.io.IOException：无法锁定文件“/qa-server/kahadb/lock”。| org.apache.activemq.store.kahadb.MessageDatabase | 主要 2012-10-07 11:37:24,504 | 信息 | 数据库 /qa-server/kahadb/lock 已锁定...等待 10 秒以使数据库解锁。原因：java.io.IOException：无法锁定文件“/qa-server/kahadb/lock”。| org.apache.activemq.store.kahadb.MessageDatabase | 主要的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T20:07:44.180

原来在我们的 QA 环境中有多个 AMQ 服务器。当我关闭第一台服务器时，由于某种原因引发了异常，因此它没有释放锁。拥有该锁然后转到另一个 AMQ 实例（第一个服务器是主服务器，第二个服务器是从服务器）。

当我尝试重新启动第一台服务器（主服务器）时，它不会重新启动，因为第二台服务器拥有锁。我关闭了第二台服务器并释放了锁，允许我重新启动它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T15:36:59.663

检查`data/`目录中的日志。

这是一个错字吗？`:8161.admin`
尝试`:8161/admin`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-25T13:12:38.580

1.  转到 Win7 中的 apache 安装主文件夹，即 apache-activemq-X.XX.X
2.  右键单击并选择属性
3.  为您的登录用户更改此文件夹的访问权限 - “通常您的登录用户应该已经具有 ADMIN 访问权限，但如果您在您的机器上解压缩了这个 apache MQ，那么管理员权限将丢失”

现在，您应该可以顺利运行 activemq 命令

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T15:53:09.213

停止服务并不能保证该服务已停止。Windows 跨越线程，并在一定时间后假定服务已停止。如果您仍然看到它在进程列表中运行，请始终检查、验证、终止该进程。这样做可能会清除它持有的锁。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-22T16:00:41.540

如果以上都不适合您的情况，请按照以下更简单的步骤操作：

1.  转到任务管理器并杀死当前正在运行的所有 java 进程。
2.  以管理员身份运行activemq批处理文件

通过在本地浏览器中打开以下内容来验证它是否运行良好：[http://localhost:8161/](http://localhost:8161/)

# java - 不工作 在 ?

> ID：12770112
> 
> 赞同：1
> 
> 时间：2012-10-07T15:26:50.363
> 
> 标签：java, jsf-2, primefaces, seam

当我使用`<h:outputText>`in 时`<p:panelGrid>`，getter 属性`getStartDate()`并`getEndDate()`不起作用。但是，当我`<p:panelGrid>`从页面中删除时，`getter`属性运行良好。还有一件事，当我点击链接时，我得到了in action 方法`Go To Next Week`的 null 值。我不知道为什么，即使我使用as 。`endDate``nextWeek()``DatePick``Conversation Scope`

我的页面.xhtml

```
<table>
    <tr>
        <td>
            <p:commandLink action="#{DatePick.nextWeek()}" immediate="true" value="Go To Next Week" />          
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <p:panelGrid style="margin-top:-1px;" id="datePanel">
                    <h:outputText value="#{DatePick.startDate}" style="color:#333333;font-size:15px;">
                        <f:convertDateTime pattern="yyyy-MM-dd"/>
                    </h:outputText>
                    -
                    <h:outputText value="#{DatePick.endDate}" style="color:#333333;font-size:15px;">
                        <f:convertDateTime pattern="yyyy-MM-dd"/>
                    </h:outputText>
            </p:panelGrid>
        </td>
    </tr>
</table> 
```

日期选择.java

```
@Name("DatePick")
@Scope(ScopeType.CONVERSATION)
public class DatePick {
    private Date startDate;
    private Date endDate;
    private boolean initFlag = true;

    public void init() {
        System.out.println("init().....");
        initFlag = false;
        startDate = new Date();
    }

    public boolean getInitFlag() {
        System.out.println("getInitFlag() : " + initFlag);
        return initFlag;
    }

    public Date getEndDate() {
        Calendar cal = Calendar.getInstance();        
        cal.setTime(startDate);
        cal.add(Calendar.DATE, 7); 
        endDate =  cal.getTime();
        System.out.println("getEndDate() : " + endDate);
        return endDate;
    }

    public Date getStartDate() {
        System.out.println("getStartDate() : " + startDate);
        return startDate;            
    }

    public void nextWeek() {
        System.out.println("nextWeek() : " + endDate);
        startDate = endDate;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T19:12:40.770

您需要指定`columns`属性。没有它，它默认为 0 列，您需要明确使用`<p:row>`和`<p:column>`。[另请`<p:panelGrid>`](http://www.primefaces.org/showcase/ui/panelGrid.jsf)参阅[陈列柜](http://www.primefaces.org/showcase/ui/panelGrid.jsf)。

您的具体功能要求不清楚，但也许您想实现这种 1 列布局？

```
<p:panelGrid columns="1">
    <h:outputText ... />
    <h:outputText ... />
</p:panelGrid> 
```

或者也许您*只是*想将它们显示在彼此下方？整个事情已经在一个普通的 HTML`<table>`中，并且使用`<p:panelGrid>`for 在视觉上几乎没有意义。就用一个`<br>`then。

```
<h:outputText ... />
<br />
<h:outputText ... /> 
```

# c++ - 按值、引用和名称调用

> ID：12770113
> 
> 赞同：0
> 
> 时间：2012-10-07T15:26:53.767
> 
> 标签：c++, reference, callbyname

> **可能重复：**
> [在 C++ 中通过引用/值传递](https://stackoverflow.com/questions/410593/pass-by-reference-value-in-c)

我想知道按值/引用/名称调用之间有什么区别。为什么使用一种比另一种更有益呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:32:38.367

按值调用：将参数的副本传递给函数

call be reference：不做额外的拷贝，直接传递调用者的变量。

主要区别是在按值调用范式中创建了一个额外的不必要的副本...除非被调用者需要修改变量并且您不希望更改调用者的变量，否则您应该始终使用调用作为引用（或常量引用） ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T15:31:39.380

按值调用会创建传递给函数的参数的副本 - 因此对于可能会产生大量开销的大型对象。它还会阻止您对函数内的参数进行任何更改，因为它们只会反映在副本中。通过引用调用传递对对象的引用，因此可以对该对象进行更改 - 当然除非您通过`const`引用传递。

# xcode - 在 xcode 4.5.1 上链接库 OpenCV 2.4.2

> ID：12770115
> 
> 赞同：13
> 
> 时间：2012-10-07T15:27:11.017
> 
> 标签：xcode, opencv

我已经按照此处的说明安装了带有 macports 的 opencv：[Compile OpenCV (2.3.1+) for OS X Lion / Mountain Lion with Xcode](https://stackoverflow.com/questions/8552839/compile-opencv-2-3-1-for-os-x-lion-mountain-lion-with-xcode)

我也在 stackexchange 和 google 上搜索并尝试了这个的所有其他变体，但这似乎让我最接近。

它似乎适用于某些事情，但不适用于 2.4.2 附带的示例代码。请注意，我已经添加了所有 opencv 2.4.2 dylibs Link Binary with Libraries。

例如，以下将编译并运行：

```
#include <opencv2/opencv.hpp>
#include <opencv2/highgui/highgui.hpp>

int main ( int argc, char **argv )
{
    cvNamedWindow( "My Window", 1 );
    IplImage *img = cvCreateImage( cvSize( 640, 480 ), IPL_DEPTH_8U, 1 );
    CvFont font;
    double hScale = 1.0;
    double vScale = 1.0;
    int lineWidth = 1;
    cvInitFont( &font, CV_FONT_HERSHEY_SIMPLEX | CV_FONT_ITALIC,
           hScale, vScale, 0, lineWidth );
    cvPutText( img, "Hello World!", cvPoint( 200, 400 ), &font,
          cvScalar( 255, 255, 0 ) );
    cvShowImage( "My Window", img );
    cvWaitKey();
    return 0;
} 
```

但是，当我尝试构建任何示例时，例如 display_image.cpp 示例，如下所示，我得到链接错误。

-不工作-

```
 #include <stdio.h>
 #include <iostream>
 #include "opencv2/imgproc/imgproc.hpp"
 #include "opencv2/highgui/highgui.hpp"
 #include "opencv2/flann/miniflann.hpp"

 using namespace cv; // all the new API is put into "cv" namespace. Export its content
 using namespace std;
 using namespace cv::flann;

static void help()
{
    cout <<
    "\nThis program shows how to use cv::Mat and IplImages converting back and forth.\n"
    "It shows reading of images, converting to planes and merging back, color conversion\n"
    "and also iterating through pixels.\n"
    "Call:\n"
    "./image [image-name Default: lena.jpg]\n" << endl;
}

int main(int argc, char *argv[])
{
    help();
    const char* imagename = argc > 1 ? argv[1] : "lena.jpg";
    Mat img = imread(imagename); // the newer cvLoadImage alternative, MATLAB-style function
    if(img.empty())
    {
        fprintf(stderr, "Can not load image %s\n", imagename);
        return -1;
    }
    if( !img.data ) // check if the image has been loaded properly
        return -1;

    Mat img_yuv;
    cvtColor(img, img_yuv, CV_BGR2YCrCb); // convert image to YUV color space. The output image will be created automatically

    vector<Mat> planes; // Vector is template vector class, similar to STL's vector. It can store matrices too.
    split(img_yuv, planes); // split the image into separate color planes

    imshow("image with grain", img);

    waitKey();

    return 0;

} 
```

* * *

我收到以下错误：

```
Undefined symbols for architecture x86_64:
 "cv::split(cv::Mat const&, std::__1::vector<cv::Mat, std::__1::allocator<cv::Mat> >&)", referenced from:
  _main in main1.o
 "cv::imread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, int)", referenced from:
  _main in main1.o
 "cv::imshow(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, cv::_InputArray const&)", referenced from:
  _main in main1.o
 ld: symbol(s) not found for architecture x86_64
 clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-12T05:38:56.497

我有同样的问题。Xcode 4.5 中的构建设置默认值似乎有所不同。

在“构建设置”下 - > Apple LLVM 编译器 4.1 - 语言 >

**C++ 标准库：=** 从**libc++** (LLVM ...) 更改为**libstdc++** (GNU C++ ...)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T21:23:38.277

OpenCV 很可能没有使用 C++11 设置编译，而程序是。在没有 C++11 开关的情况下设置工具的构建（即 -std=c++11 -stdlib=libc++）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T16:08:56.130

尝试在 Build Settings->Library search path 中手动添加 port 放置所有 dylib 的目录（`/opt/local/lib`如果我没有弄错的话）。这应该可以解决链接问题。

# wpf - 数据网格列自定义复选标记

> ID：12770119
> 
> 赞同：0
> 
> 时间：2012-10-07T15:27:56.243
> 
> 标签：wpf, xaml, datatrigger

我想要一个绑定到布尔值的只读列，当为真时显示复选标记图像，当为假时不显示任何内容。

问题是错误的值；我只想显示数据网格的背景是什么，但我看不到如何清除图像源。

图像源的价值应该是什么？

干杯，
贝里尔

```
<DataGridTemplateColumn.CellTemplate>
    <DataTemplate>
        <Image Name="imgChecked" Source="\Img_Checkmark" />
        <DataTemplate.Triggers>
            <DataTrigger Binding="{Binding IsPrimary}" Value="False">
                <Setter TargetName="imgChecked" Property="Source" Value=""/> *** ??? ***
            </DataTrigger>
        </DataTemplate.Triggers>
    </DataTemplate>
</DataGridTemplateColumn.CellTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T15:36:01.167

而是使用[`Visbility Property`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.visibility.aspx)

```
<DataTrigger Binding="{Binding IsPrimary}" Value="False">
    <Setter TargetName="imgChecked" Property="Visibility" Value="Hidden"/>
</DataTrigger> 
```

的价值`Source`将是`"{x:Null}"`

# php - fprint 在我的 php 中不起作用

> ID：12770127
> 
> 赞同：0
> 
> 时间：2012-10-07T15:29:28.433
> 
> 标签：php, stdout, printf, fclose

我想在浏览器中从脚本中写一些文本。

```
<?php
$out = fopen('php://stdout', 'w');
fprintf($out, "Hello!");
fclose($out);
?> 
```

我期待“你好！” 在输出上，但没有任何反应......这可能是标准输出中的错误，还是我只是疏忽了一些东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T15:33:41.180

如果从控制台调用 php，这将是正确的。

但是如果你在谈论网络访问，你应该使用`php://output`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T15:34:31.313

你试过简单的：

```
<?php
$out = "foobar";
echo $out;
?> 
```

?

默认情况下，php 打印在`STDOUT`.

# c# - 在 winRT 应用程序中显示来自 Web 的图像

> ID：12770128
> 
> 赞同：0
> 
> 时间：2012-10-07T15:29:39.940
> 
> 标签：c#, windows, microsoft-metro, windows-runtime

将数据绑定到`GridView`，collection 中的每个项目都具有 URL 到外部服务器上图像的属性。

仅将其绑定到 Image 组件时，在加载图像时会出现延迟。

那么在winRT（c＃）应用程序中显示来自网络的许多图像的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T19:18:02.830

I would create a class which asynchronously downloads the images and sets a property of your data model (which implemenents `INotifyPropertyChanged`). This way you will not experience any lag and the image will be shown when it's downloaded.

# spring - Spring 的 PropertyPlaceHolderConfigurer 不会忽略无法解析的文件

> ID：12770133
> 
> 赞同：10
> 
> 时间：2012-10-07T15:30:31.487
> 
> 标签：spring

我正在使用 spring 的 PropertyPlaceHolderConfigurer，如下所示：

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="ignoreUnresolvablePlaceholders" value="true" />
    <property name="locations">
        <list>
            <value>classpath:default.properties</value>
            <value>file:${user.home}/webextractor.properties</value>
        </list>
    </property>
</bean> 
```

尽管已将`ignoreUnresolvablePlaceholders`属性设置为`true`，但我仍然得到一个`FileNotFoundException`on `/home/kaykay/webextractor.properties`。我知道我可以创建这个文件并将其留空，但我想知道这里出了什么问题。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-07T15:54:00.047

设置为 true 将忽略未设置的`ignoreUnresolvablePlaceholders`占位符并且不会引发异常。例如，如果您的类中有以下属性，`@Value("${person.age}")`并且在属性文件中没有设置相应的值。

设置为 true的`ignoreResourceNotFound`属性将具有您预期的行为，即忽略未找到的资源。

希望这有帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-31T12:30:01.827

我已经解决了你的问题，我认为 Osiris 对财产的看法是正确的`ignoreUnresolvablePlaceholders`。但在你的情况下，你应该将属性设置为`ignoreResourceNotFound`true。因此，如果该文件不存在，那么它将忽略该文件。

修改后的代码将是

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="ignoreUnresolvablePlaceholders" value="true" />
    <property name="ignoreResourceNotFound" value="true" />
    <property name="locations">
        <list>
            <value>classpath:default.properties</value>
            <value>file:${user.home}/webextractor.properties</value>
        </list>
    </property>
</bean> 
```

试试这个代码，让我知道。

# java - Java 中具有静态成员和方法的 Singleton v/s 类

> ID：12770138
> 
> 赞同：5
> 
> 时间：2012-10-07T15:31:11.907
> 
> 标签：java, design-patterns, singleton

> **可能重复：**
> [静态类和单例模式之间的区别？](https://stackoverflow.com/questions/519520/difference-between-static-class-and-singleton-pattern)

为什么需要一个且只有一个实例？使用具有静态成员变量和静态方法的类也可以达到同样的目的。

据我所知，可能有两个可能的答案 -

1.  当你的类需要有状态并且你只想要它的一个对象时。从设计的角度来看，具有静态方法和变量的类被认为是实用程序类，不应保持任何状态。

2.  如果您的类需要参与多态性，并且您只需要继承树中的类的一个对象。

如果有人可以从现实生活场景或任何 Java API 中提供单例对象需要参与多态/继承的示例，那将非常有帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T17:12:39.187

[Collections.emptySet()](http://www.docjar.com/html/api/java/util/Collections.java.html#3081)是不能作为静态类实现的单例的典型示例，因为很明显，它的目标是成为`java.util.Set`接口的实例。创建成本不高，但是每次需要空集时创建一个新实例是愚蠢的，因为可以重用唯一实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T15:41:17.600

执行日志记录或对数据库进行公共访问的类经常遵循单例模式。基本上任何应该有实例方法并且构建成本很高的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T17:34:17.193

我的回答很短，但使用完全常见的单例而不是静态实现就足够了。答案是：

*   流行范式（是的！）
*   线程（同步等）
*   接口实现（你的静态类有一些限制）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T17:35:42.230

范围和行为是不同的关注点，不应混为一谈。您可能希望您的对象在每次使用、每个线程、每个 Web 请求、每个会话或全局（单例）时都可用。进行这些调整的原因可能是由于资源管理和最终的性能。如果你改变它的范围，你的类内部的行为不应该改变。

单例模式用于获取常规对象并通过一些附加代码控制其范围。但理想情况下，您真的不应该真正处理对象内部的范围并将其委托给工厂或容器。

# java - 是否有任何用于记录用户操作的启发式/模式

> ID：12770142
> 
> 赞同：0
> 
> 时间：2012-10-07T15:31:43.560
> 
> 标签：java, gwt, logging

我有一个对多个对象执行 CRUD 的 GWT/Java/Hibernate/MySQL 应用程序（但我认为任何 Web 模式都可能是有效的）。每个对象都存储在数据库的一个表中。我想实现一个动作记录器。例如，对象 AI 想知道是谁创建和修改了它，而对于用户 B，他执行了哪些操作。

我的想法是有一个历史表来存储：UserId、ObjectId、ActionName。UserId 和 ObjectId 是外键。我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:57:14.150

如果只应跟踪对特定字段的更改，例如用户表中的状态，我将使用通过外键从用户表引用的 user_status_histories 表。user_status_histories 表将包含诸如 current_status、date 和诸如 admin_who_modified_the_status 之类的字段。

每当进行状态更改时，都会将一条新记录插入到 user_status_histories 表中。这将允许轻松查询所有状态更改。

当然，查询用户需要与 user_status_histories 表进行（LEFT 或 INNER）JOIN 以获取最后一条记录（= 当前状态）。

根据您的需要，您可能会考虑用户表中的 current_status 字段（除了用作外键的状态）以进行快速访问，该字段将与 user_status_histories 表并行维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T16:01:27.713

我也认为这是正确的方向。
但是，请记住，在具有大量流量的应用程序中，此日志可能会成为开销。在这种情况下，我建议以下内容 - A. 不要将休眠用于此“动作日志记录” - Hibernate 对于“主要读取数据库”具有更好的性能
B. 考虑在“主要写入”场景中更好的数据库用于动作日志记录桌子。
您可以尝试为此寻找 NoSQL 解决方案。
C. 如果您使用这样的 NoSQL 数据库，但仍希望将日志记录操作保留在关系数据库中，例如有一个每天运行一次的离线进程），它将查询您的“操作日志记录数据库”并将其插入到关系数据库。
D. 如果您的系统可能会丢失一些操作日志记录是可以的，请考虑使用生产者/消费者模式（例如 - 在生产者和消费者线程之间使用队列） - 需要记录操作的线程不会同步记录它们，但会记录它们是异步的。
E. 另外，不要忘记这样的日志表有可能在时间上被溢出，导致查询需要很长时间。
对于这些问题，请考虑以下事项：
E.1。每天都删除非常旧的日志 - 比如说 - 超过一个月，或者将它们移动到一些“备份”表。
E.2 索引您主要用于操作日志查询的一些字段（例如 - 可能是 action_type）字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T15:43:09.220

是的，你是。另一个非常相似的框架是支持撤消和重做的框架。这些框架跟踪用户操作，并具有将状态恢复到用户操作之前的状态的额外能力。

# jquery - 溢出：隐藏不从 IE 中的 jQuery 循环中删除水平滚动条

> ID：12770143
> 
> 赞同：1
> 
> 时间：2012-10-07T15:32:12.730
> 
> 标签：jquery, html, internet-explorer, yii, blueprint-css

我正在使用 jQuery.cycle 来显示三个图像。与本网站上的其他答案保持一致，我使用`min-width`和的组合`overflow:hidden`来删除仅出现在 Internet Exploder Nein 中的水平滚动条。

如果相关，该站点同时使用 Yii 框架和蓝图。

水平滚动条不会消失。为什么？

**行动**

```
<?php
class IndexAction extends CAction
{
    public function run()
    {
        $ds = DIRECTORY_SEPARATOR;
        $cs = Yii::app()->clientScript;

        $cs->registerScriptFile( $ds. 'js' . $ds .
                  'jquery.cycle.all.js', CClientScript::POS_HEAD );

        $cs->registerScript( 'cycle', "$('.pics').cycle({
            fx: 'scrollLeft',
            containerResize: false,
            slideResize: false,
            width:960,
            height:300,
            fit:true
        });", CClientScript::POS_END );

        $this->controller->render('index');
    }
} 
```

**看法**

```
<?php
Yii::app()->clientScript->registerCss('ServicesCycleSlideShow',"
.pics {  
    min-width:960px;  
    height:300px;  
    padding:0;
    margin:0;
    overflow:hidden;
} 

.pics img {  
    padding: 0;
    margin: 0;
    border:  none;  
    min-width:  960px; 
    height: 300px; 
    overflow:hidden;
}");
?>
<div class="pics"> 
    <img src="/images/1.png" width="960" height="300" /> 
    <img src="/images/2.png" width="960" height="300" /> 
    <img src="/images/3.png" width="960" height="300" /> 
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T01:15:10.327

我发现了问题。jQuery.cycle 引入`overflow-x:scroll`，它优先于`overflow:hidden`. 添加`overflow-x:hidden`删除滚动条。

# javascript - HTMLCollection 是一个数组吗？

> ID：12770147
> 
> 赞同：22
> 
> 时间：2012-10-07T15:32:34.923
> 
> 标签：javascript, html

我知道 HTMLCollection 实际上不是一个数组，否则它将被定义为一个数组。我使用称为 isArray() 的帮助函数来检测对象是否为数组。我到处使用这个小助手，并且在检查 htmlCollection 时，我一直在运行返回 false 的问题。

```
var isArray: function(obj) {
    var type = Function.prototype.call.bind( Object.prototype.toString );
    return type(obj) === '[object Array]' || type(obj) === '[object HTMLCollection]';
} 
```

在这个辅助函数中检查 htmlCollection 类型并假设它与数组相同，会不会出错？是什么让它与众不同？除了它的 html 元素而不是 javascript 对象。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-07T15:33:19.910

不，它是一个`HTMLCollection`，不是一个`Array`。

它具有类似数组的特性，如数值属性和一个`.length`属性，但它不继承自`Array.prototype`. 因此它没有标准`Array`方法，因此应该被视为不同。

另一个显着的区别是`HTMLCollection`“实时”集合，这意味着它会随着 DOM 的更新而更新。如果您从 DOM 中删除其节点之一，它将自动从 DOM 中删除`HTMLCollection`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-24T22:07:30.650

如果您正在考虑进行数组转换，请参阅这篇文章：

[将 HTMLCollection 转换为 Array 的最有效方法](https://stackoverflow.com/questions/222841/most-efficient-way-to-convert-an-htmlcollection-to-an-array)。

他们讨论了一些方法，所选答案中的解决方案也适用于我经历过的情况。

# android - 如何在 Android 中使用 buttonStop 停止可运行对象

> ID：12770149
> 
> 赞同：0
> 
> 时间：2012-10-07T15:32:43.343
> 
> 标签：android

我正在开发一个简单的应用程序，其中按钮背景在一秒钟后动态变化。我的应用程序名称中有一个按钮 stopButtonBackgroundChanging，当我单击该按钮时，它会停止更改按钮背景，但 2 秒后应用程序意外停止”。请在这方面帮助我，并查看下面的代码，您可能会得到更好的主意这才是我真正想做的。

```
UpdateRunnable updateRunnable;  
private Runnable mEndlessRunnable;

     public void onCreate(Bundle savedInstanceState) 
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.myLayout);

            Button stopButtonBackgroundChanging = (Button)findViewById(R.id.buttonStop);
            stopButtonBackgroundChanging.setOnClickListener(new OnClickListener() 
            {

                public void onClick(View v) 
                {
                    //See implementation of stop() method at the end of the code
                    updateRunnable.stop();

                }
            });

            mEndlessRunnable = (Runnable) new UpdateRunnable(new Handler(), new Button[] 
            {

                    (Button) findViewById(R.id.button1),
                    (Button) findViewById(R.id.button2),
                    (Button) findViewById(R.id.button3),
                    (Button) findViewById(R.id.button4),

            });
            mEndlessRunnable.run();

        }// End of onCreate()

     //Start of UpdateRunnable
     private static class UpdateRunnable implements Runnable 
     {

         private boolean myContinue = true;

            private Random mRand = new Random();
            private Handler mHandler;
            private Button[] mButtons;

            private Button mCurButton;
            private int mState;

            public UpdateRunnable(Handler handler, Button[] buttons) 
            {
                mHandler = handler;
                mButtons = buttons;
            }

            public void run() 
            {
                if(myContinue)
                {
                    // select a button if one is not selected
                    if (mCurButton == null) 
                    {
                        mCurButton = mButtons[mRand.nextInt(mButtons.length)];
                    }
                    // check internal state, `0` means first bg change, `1` means last
                    switch (mState) 
                    {
                    case 0:
                        mCurButton.setBackgroundResource(R.drawable.buttonyellow);
                        mState = 1;
                        break;
                    case 1:
                        mCurButton.setBackgroundResource(R.drawable.buttonblue);
                        // reset state and nullify so this continues endlessly
                        mState = 0;
                        mCurButton = null;
                        break;
                    }

                    mHandler.postDelayed(this, 1000); 

                }

            }// End of run()

            public void stop()
            {
             this.myContinue =false;    
            }

        }//End of class UpdateRunnable 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T16:35:46.610

我相信您可以通过更改 onClick 来实现此功能：

```
public void onClick(View v)
{
    //See implementation of stop() method at the end of the code
    ((UpdateRunnable) mEndlessRunnable).stop();
} 
```

# haskell - HASKELL - 更改类型

> ID：12770152
> 
> 赞同：-2
> 
> 时间：2012-10-07T15:33:14.980
> 
> 标签：haskell, haskell-platform

我需要创建一个功能`f:: Log->[String]` 来做到这一点 `(((o, i ,d),s) = [(o, i ,d)]`

```
type Log = (Plate, [String]) 
```

`type Plate = (Pin, Pin, Pin)` `type Pin = (Char, Int)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T15:52:34.293

如果您在这样[的页面](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html)上，请单击右侧的“来源”，在您感兴趣的功能旁边。

如果您需要查找功能，[Hayo！](http://holumbus.fh-wedel.de/hayoo/hayoo.html)Hoogle[会将](http://www.haskell.org/hoogle/)您链接到上述文档页面。

需要注意的重要一点是，`show`它没有一个定义。`show`是为`Show`（大写“S”）类型类中的所有数据类型定义的函数。例如，这里是[Show typeclass](http://www.haskell.org/ghc/docs/latest/html/libraries/base/src/GHC-Show.html#show)的完整源代码。Show 在类型类中被定义为 just `show :: a -> String`。但是，如果您搜索“instance Show Bool”或“instance Show Int”，您会找到具体的定义。

* * *

对于您问题的第二部分，获取`show`新类型函数的最简单方法是简单地`deriving (Show)`在它下面写。例如，

```
data Foo = Foo Int Int
   deriving (Show) 
```

现在我可以使用`show`type 的数据了`Foo`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T15:34:43.523

使用[hoogle](http://www.haskell.org/hoogle/)查找此类信息。

示例：[http ://www.haskell.org/hoogle/?hoogle=show](http://www.haskell.org/hoogle/?hoogle=show)

在列表中找到您想要的功能后，单击此处，您将`Source`在页面右侧找到一个链接。

注意这是对原始问题的回答：

> 我在哪里可以看到 haskell 中预定义函数的代码？主要是函数SHOW？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-07T16:28:36.207

```
g :: Log -> [String]
g (plate, _) = [show plate] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-07T16:13:39.520

确实可以使用 Hoogle 搜索 Prelude（和其他模块）中定义的函数，但源代码本身位于 Hackage。

[Hackage](http://hackage.haskell.org/packages/hackage.html)是 Haskell 软件包的数据库。您可以从中下载新包，还可以查看数据库中每个包的 Haddock 文档。

[这是标准 Prelude 的 Haddock 页面](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html)。它记录了 Prelude 模块导出的类型类、数据类型、类型和顶级函数。每个定义标题的右侧是一个链接，上面写着“来源”。您可以单击此按钮转到您正在查看的模块的源代码的在线副本。

* * *

在预览时，您现在完全提出了一个不同的问题，而在再次预览时，实际上原始问题已从这篇文章中删除。

您的新问题尚不清楚，但此解决方案将在您的示例中产生输出。

```
> [fst ((('O',0),('I',0),('D',1)),"O->D")]
[(('O',0),('I',0),('D',1))] 
```

顺便说一句，我认为您使用列表表示法而不是双引号来标识`String`s，所以我在`0->D`上面修复了它。所以你也可以试试这个。

```
> show (fst ((('O',0),('I',0),('D',1)),"O->D"))
"(('O',0),('I',0),('D',1))" 
```

这是有效的，因为您只在已经具有实例的数据结构上定义了类型同义词（通过`type`在声明中使用而不是）。`data``Show`

# asp.net - 使用子域开发 Web 应用程序

> ID：12770155
> 
> 赞同：2
> 
> 时间：2012-10-07T15:33:57.363
> 
> 标签：asp.net, asp.net-mvc, node.js, subdomain

我的应用程序将为每个客户提供一个子域来显示他们的徽标和其他一些东西：

```
company1.service.com
company2.service.com 
```

我试图看看在开发过程中最好的工作方式是什么：

1.  配置开发机HOST文件做一些映射，所以我可以访问company1.localhost等。
2.  使用应用程序将检查的某种秘密配置标志来确定覆盖的域是什么
3.  根本不使用子域（即使在生产中），更喜欢查询字符串

我认为＃1对我来说应该没问题，只是想看看是否有人对它有不好的经验或对其他选择有好处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T07:19:13.500

我会使用第一个选项，因为它易于设置并且会反映您的目标架构。第三个选项也很容易设置，但它会与您的实际情况不同，因此您可能需要在发货前进行最后一分钟的更改，这绝不是一件好事。

# filter - Yii CGridView 和下拉过滤器

> ID：12770157
> 
> 赞同：2
> 
> 时间：2012-10-07T15:34:15.080
> 
> 标签：filter, yii

我创建了下拉过滤器，它可以显示，但不能正常工作。当我理解 search() 方法的麻烦时

看法：

```
 $this->widget('zii.widgets.grid.CGridView', array(
        'dataProvider'=>$model->search(),
        'filter' => $model,
        'columns'=>array(
            array(
                'name' => 'client_id',
                'filter' => CHtml::listData(Client::model()->findAll(), 'client_id', 'name'),
                'value'=>'$data->client->name'
            ),
            'task'
         )
    )); 
```

我必须表格，它们的关系显示在模型中：

```
public function relations()
{
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.
    return array(
        'client' => array(self::BELONGS_TO, 'Client', 'client_id'),
    );
}

public function search()
{
    // Warning: Please modify the following code to remove attributes that
    // should not be searched.

    $criteria=new CDbCriteria;
    $criteria->with = array('client');
    $criteria->compare('task_id',$this->task_id);
    $criteria->compare('client_id',$this->client_id);
    $criteria->compare('name',$this->client->name);
    $criteria->compare('task',$this->task,true);
    $criteria->compare('start_date',$this->start_date,true);
    $criteria->compare('end_date',$this->end_date,true);
    $criteria->compare('complete',$this->complete);

    return new CActiveDataProvider($this, array(
        'criteria'=>$criteria,
    ));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:43:49.350

我理解我的错误，我的控制器应该是这样的：

```
public function actionIndex()
{
    $model=new Tasks;
    if(isset($_REQUEST['Tasks']))
        $model->attributes=$_GET['Tasks'];
    $this->render('index',array(
        'model'=>$model
    ));
} 
```

我忘记了从控制器到模型的传递参数。谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T22:55:40.570

检查[这个 wiki](http://www.yiiframework.com/wiki/281/searching-and-sorting-by-related-model-in-cgridview)，它以详细的方式准确地解释了您需要什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T21:01:20.913

检查`rules`方法。`client_id`应该`safe`在`search`

```
public function rules()
{
    return array(
        array('client_id', 'safe', 'on'=>'search'),
    );
} 
```

# c++ - 模板化结构数组

> ID：12770159
> 
> 赞同：0
> 
> 时间：2012-10-07T15:34:23.047
> 
> 标签：c++, templates, struct

我有由从 Base 结构派生的 int 模板化的结构。

```
struct Base { int i; double d; }; 
template< int N > struct Derv : base { static const int mN = N; }; 
```

我需要创建一个 Derv< N > 数组，其中 N 可以针对该数组中的每个结构而变化。我知道 C/C++ 不允许使用不同类型的对象数组，但有没有办法解决这个问题？我正在考虑以某种方式分离类型信息（诸如指向 Base struct 的指针或 union 的使用之类的提示在我脑海中浮现，但是所有这些我不知道如何存储每个数组元素的类型信息以供在编译期间使用）。可以看到，每个 Derv<N> 的内存模式都是一样的。

我需要稍后在我的代码中访问每个数组元素的类型以进行模板特化。这一切的总体目标是拥有一个编译时调度机制，而无需在代码中的某处进行运行时“类型切换”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:38:27.507

我猜你可以使用`ptr = dynamic_cast<Type>(element);`..`ptr`将等于`NULL`如果它是错误的类型。例如：

```
#include <map>
#include <cmath>
#include <vector>
#include <string>
#include <cstdlib>
#include <fstream>
#include <sstream>
#include <iostream>

using namespace std;

struct Base { int i; double d; Base(){}; virtual ~Base(){};}; 
template< int N > struct Derv : public Base { static const int mN = N; ~Derv(){}; };

int main(int argc, char **argv){
    Base* arr[2];
    arr[0] = new Derv<10>;
    arr[1] = new Derv<5>;
    Derv<10> *ptr = dynamic_cast<Derv<10>* >(arr[0]);
    Derv<5> *ptr2 = dynamic_cast<Derv<5>* >(arr[0]);
    cout << ptr << endl << ptr2 << endl;
    return 0;
}
// That should print 
0x9571008 //ptr to object will differ every time.
0 // Null because of wrong type. 
```

但是您需要在结构中定义虚拟析构函数才能使其工作，和/或虚拟函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T15:39:09.780

这绝对是不可能的。如果你做了

```
int i;
std::cin >> i;
some_magic_array X[size]; 
```

那么是什么类型的`X[i]`呢？哦，等等，你不可能知道。这不是 C++ 特定的，它*根本上是不可能*的。这就是为什么`some_magic_array`永远不会存在允许这样做的原因。

除非您有效地使用 a`std::tuple`并保证它`i`是 constexpr。那么你绝对可以用`std::get<i>(tup);`.

# python - gae 会话和鼻子的错误

> ID：12770163
> 
> 赞同：3
> 
> 时间：2012-10-07T15:34:47.117
> 
> 标签：python, google-app-engine, nose, gae-sessions

在将 gae 会话添加到相对成熟的 GAE 应用程序时，我遇到了一些问题。我仔细阅读了自述文件并查看了演示。

首先，在使用nose 和nose-gae 运行测试时，仅将gaesesions 目录添加到我的应用程序会导致以下错误：

```
Exception ImportError: 'No module named threading' in <bound method local.__del__ of <_threading_local.local object at 0x103e10628>> ignored 
```

所有测试都运行良好，所以不是大问题，但表明有些地方不对劲。

接下来，如果我添加以下两行代码：

```
from gaesessions import get_current_session
session = get_current_session() 
```

并运行我的测试，然后我收到以下错误：

```
Traceback (most recent call last):
  File "/Users/.../unit_tests.py", line 1421, in testParseFBRequest
    data = tasks.parse_fb_request(sr)
  File "/Users/.../tasks.py", line 220, in parse_fb_request
    session = get_current_session()
  File "/Users/.../gaesessions/__init__.py", line 36, in get_current_session
    return _tls.current_session
  File "/Library/.../python2.7/_threading_local.py", line 193, in __getattribute__
    return object.__getattribute__(self, name)
AttributeError: 'local' object has no attribute 'current_session' 
```

开发服务器上不会发生此错误。

任何有关解决上述问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T03:32:57.400

我遇到了同样的问题。问题似乎是 gae 测试平台的行为与开发服务器不同。我不知道具体细节，但最终通过添加解决了它

```
def setUp(self):
  testbed.Testbed().activate()
  # after activating the testbed:
  from gaesessions import Session, set_current_session
  set_current_session(Session()) 
```

# java - LiveView 插件模板会产生很多错误？

> ID：12770165
> 
> 赞同：0
> 
> 时间：2012-10-07T15:35:05.423
> 
> 标签：java, android, eclipse, mobile, sony

我试图让 LiveView 插件模板工作，但在将项目导入 Eclipse 后，我已经有 13 个错误和 2 个警告。我已经下载了适用于 Android 1.6 的 SDK，我相信这是它所需要的。错误如下：

```
The method startPlugin() of type AbstractPluginService.LiveViewCallback must override a superclass method   AbstractPluginService.java  /com.sonyericsson.extras.liveview.plugins.PluginPreferences/src/com/sonyericsson/extras/liveview/plugins    line 173    Java Problem
The method stopPlugin() of type AbstractPluginService.LiveViewCallback must override a superclass method    AbstractPluginService.java  /com.sonyericsson.extras.liveview.plugins.PluginPreferences/src/com/sonyericsson/extras/liveview/plugins    line 182    Java Problem
The method onSharedPreferenceChanged(SharedPreferences, String) of type new SharedPreferences.OnSharedPreferenceChangeListener(){} must override a superclass method    AbstractPluginService.java  /com.sonyericsson.extras.liveview.plugins.PluginPreferences/src/com/sonyericsson/extras/liveview/plugins    line 360    Java Problem
The method onServiceDisconnected(ComponentName) of type new ServiceConnection(){} must override a superclass method AbstractPluginService.java  /com.sonyericsson.extras.liveview.plugins.PluginPreferences/src/com/sonyericsson/extras/liveview/plugins    line 345    Java Problem
The method onServiceConnected(ComponentName, IBinder) of type new ServiceConnection(){} must override a superclass method   AbstractPluginService.java  /com.sonyericsson.extras.liveview.plugins.PluginPreferences/src/com/sonyericsson/extras/liveview/plugins    line 318    Java Problem
The method screenMode(int) of type AbstractPluginService.LiveViewCallback must override a superclass method AbstractPluginService.java  /com.sonyericsson.extras.liveview.plugins.PluginPreferences/src/com/sonyericsson/extras/liveview/plugins    line 230    Java Problem
The method openInPhone(String) of type AbstractPluginService.LiveViewCallback must override a superclass method AbstractPluginService.java  /com.sonyericsson.extras.liveview.plugins.PluginPreferences/src/com/sonyericsson/extras/liveview/plugins    line 221    Java Problem
The method run() of type SandboxPluginService.Rotator must override a superclass method SandboxPluginService.java   /com.sonyericsson.extras.liveview.plugins.PluginPreferences/src/com/sonyericsson/extras/liveview/plugins/sandbox    line 254    Java Problem
The method onUnregistered() of type AbstractPluginService.LiveViewCallback must override a superclass method    AbstractPluginService.java  /com.sonyericsson.extras.liveview.plugins.PluginPreferences/src/com/sonyericsson/extras/liveview/plugins    line 216    Java Problem
The method run() of type SandboxPluginService.Timer must override a superclass method   SandboxPluginService.java   /com.sonyericsson.extras.liveview.plugins.PluginPreferences/src/com/sonyericsson/extras/liveview/plugins/sandbox    line 235    Java Problem
The method displayCaps(int, int) of type AbstractPluginService.LiveViewCallback must override a superclass method   AbstractPluginService.java  /com.sonyericsson.extras.liveview.plugins.PluginPreferences/src/com/sonyericsson/extras/liveview/plugins    line 206    Java Problem
The method button(String, boolean, boolean) of type AbstractPluginService.LiveViewCallback must override a superclass method    AbstractPluginService.java  /com.sonyericsson.extras.liveview.plugins.PluginPreferences/src/com/sonyericsson/extras/liveview/plugins    line 196    Java Problem
The method getPluginName() of type AbstractPluginService.LiveViewCallback must override a superclass method AbstractPluginService.java  /com.sonyericsson.extras.liveview.plugins.PluginPreferences/src/com/sonyericsson/extras/liveview/plugins    line 191    Java Problem 
```

和警告：

```
The method getInterfaceDescriptor() from the type IPluginServiceV1.Stub.Proxy is never used locally IPluginServiceV1.java   /com.sonyericsson.extras.liveview.plugins.PluginPreferences/gen/com/sonyericsson/extras/liveview    line 242    Java Problem
The method getInterfaceDescriptor() from the type IPluginServiceCallbackV1.Stub.Proxy is never used locally IPluginServiceCallbackV1.java   /com.sonyericsson.extras.liveview.plugins.PluginPreferences/gen/com/sonyericsson/extras/liveview    line 130    Java Problem 
```

这些都是从索尼移动开发者世界的 ZIP 文件中新鲜出现的。没有更改任何代码。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T16:18:12.513

您需要 Java 1.6，而不是 Android 1.6。

Java 1.6 应该解决这些`override`问题。

# php - Heroku + Yii“应用程序运行时路径无效”

> ID：12770168
> 
> 赞同：1
> 
> 时间：2012-10-07T15:35:15.687
> 
> 标签：php, web-applications, heroku, path, yii

我正在尝试将 Yii webapp 部署到 Heroku 中，但是它不断向我抛出一个奇怪的错误：

```
Application runtime path "/app/www/protected/runtime" is not valid. Please make sure it is a directory writable by the Web server process. 
```

毫无意义，我知道这与 Heroku 有关，因为在我的本地机器上它工作正常。有人知道这是什么意思吗？我需要在 Heroku 中做什么来解决这个问题？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T23:45:43.660

多谢你们！那解决了它。这实际上是两件事：我需要 chmod 以及运行时文件夹没有在 Heroku 中提交的事实，仅仅是因为该文件夹是空的，所以如果它是空的，它将不会部署到服务器。

无论如何，谢谢。

# php - Instagram API 如何获取用户 ID？

> ID：12770169
> 
> 赞同：7
> 
> 时间：2012-10-07T15:35:22.030
> 
> 标签：php, json, instagram

如何在没有用户身份验证的情况下使用 instagram API 获取具有用户名的用户 ID？如果我尝试用户/搜索，它会返回多个研究结果，那么我如何确定我只获得了准确用户名的结果？

例如，以下请求返回多个用户的用户名类似于`aliciakeys`，我只想获取具有确切用户名的用户的数据。

```
https://api.instagram.com/v1/users/search?q=aliciakeys&access_token=[your token] 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-07T16:15:36.033

如果您知道搜索词始终是完整的用户名，您可以简单地遍历结果并在用户名与搜索查询完全匹配时停止。

此外，永远不要公开您的访问令牌。

这就是你在 PHP 中的做法

```
<?php

function getInstaID($username)
{

    $username = strtolower($username); // sanitization
    $token = "InsertThatHere";
    $url = "https://api.instagram.com/v1/users/search?q=".$username."&access_token=".$token;
    $get = file_get_contents($url);
    $json = json_decode($get);

    foreach($json->data as $user)
    {
        if($user->username == $username)
        {
            return $user->id;
        }
    }

    return '00000000'; // return this if nothing is found
}

echo getInstaID('aliciakeys'); // this should print 20979117

?> 
```

实际上，如果您正在搜索完整的用户名，几乎每次搜索时，第一个结果都会是您要查找的结果。

# java - 引用远程参与者的问题

> ID：12770173
> 
> 赞同：0
> 
> 时间：2012-10-07T15:36:03.823
> 
> 标签：java, playframework-2.0, maven-3, akka, eclipse-juno

我有一个播放框架，它使用播放演员集成来引用远程 akka 系统并与之通信。看起来我没有得到正确的远程引用。首先，远程 akka 实现了可启动接口，并且它有一个主节点来创建一个子角色系统。
然后播放器系统引用远程系统。代码片段如下所示。

这是创建本地参与者系统的 Play 框架节点

```
 public void connectMaster (final String classname)
 {  
     localActor.tell(classname);

 }

 public  void connectMaster ()
 {  
     //localActor.tell(getByte(new Coordinates()));
 }

 public void connectMaster (final WebSocket.In<JsonNode> in, final WebSocket.Out<JsonNode> out )
 {        
         in.onMessage(new Callback<JsonNode>() {
     public void invoke(JsonNode event) throws JsonParseException, JsonMappingException, IOException {                 

    ObjectMapper mapper = new ObjectMapper();               

    @SuppressWarnings("unchecked")
        Map<String,ArrayList<Object>> jsonMap = mapper.readValue(event, Map.class); 
    GesturePoints gp = new GesturePoints();

    gp.setPoints(jsonMap);
    localActor.tell(gp);            
     }
  });     } 
```

这是play框架中的本地Actor系统

包控制器；

```
import Com.RubineEngine.GesturePoints.*;

import akka.actor.ActorRef;
import akka.actor.UntypedActor;
import akka.event.Logging;
import akka.event.LoggingAdapter;

public class LocalActor extends UntypedActor {

     /**
     * 
     */

    ActorRef masterActor; // = getContext().actorFor("akka://MasterNode@127.0.0.1:2552/user/masterActor");
     LoggingAdapter log = Logging.getLogger(getContext().system(), this);

    @Override
    public void onReceive(Object arg) throws Exception {
        System.out.println(" Local Actor 1");
          if(arg instanceof GesturePoints)
         {  System.out.println(" local Actor 2");
              masterActor.tell(arg , getSelf());    
              System.out.println(" Local Actor 3");}    
         else 
         {unhandled(arg);}
    }

    public void preStart()
    {
      masterActor = getContext().actorFor("akka://MasterNode@127.0.0.1:2552/user/masterActor");
    }

} 
```

这是创建主actor的远程akka系统主节点

```
package Rubine_Cluster;

import java.util.Arrays;

import com.typesafe.config.ConfigFactory;

import akka.actor.ActorRef;
import akka.actor.ActorSystem;
import akka.actor.Props;
import akka.kernel.Bootable;

/**
 * Hello world!
 *
 */
public class MasterNode implements Bootable
{
     final ActorSystem system;
     ActorRef masterActor;

      public MasterNode() {

        //Create a child actor of this actor upon initialization 
        system = ActorSystem.create("MasterNode", ConfigFactory.load()
            .getConfig("masterNode"));
         masterActor = system.actorOf(new Props(MasterActor.class),"masterActor");  

      }

      public void startup() {

      }

          public void shutdown() {
            system.shutdown();
          }
} 
```

这是由 MasterNode 创建的远程参与者系统

```
public class MasterActor extends UntypedActor {

    /**
     * 
     */

    ActorSystem system = ActorSystem.create("container");

    ActorRef worker1;

    //public MasterActor(){}

    @Override
    public void onReceive(Object message) throws Exception {
        System.out.println(" Master Actor 5");

         if(message instanceof GesturePoints)
         {  //GesturePoints gp = (GesturePoints) message;
              System.out.println(" Master Actor 1");             
         try {      worker1.tell(message, getSelf());

             System.out.println(" Master Actor 2");
                } catch (Exception e) {
                  getSender().tell(new akka.actor.Status.Failure(e), getSelf());
                  throw e;
                }

    }
         else{ unhandled(message);}
  }  

    public void preStart()
    {
      worker1 = getContext().actorFor("akka://WorkerNode@127.0.0.1:2553/user/workerActor");
    }

} 
```

我想我的引用有误，或者可能要发送消息，欢迎提出任何建议

# c# - .NET 中的 Png 图像处理

> ID：12770175
> 
> 赞同：3
> 
> 时间：2012-10-07T15:36:13.393
> 
> 标签：c#, .net, image, png

我有以下任务。拍摄一个基本图像并在其上叠加另一个。基本图像是 8b png 以及叠加。这是基本（左）和覆盖（右）图像。

![叠加图像](../Images/0b4294b4e37ea04124ed3b01ddc23acd.png) ![叠加图像](../Images/c9d8b23854a631d05b627043ebfd776a.png)

这是一个结果以及它的外观。

![在此处输入图像描述](../Images/d9fe57a3340acdaac01c9f7d7c728030.png) ![在此处输入图像描述](../Images/eeafd1e2825657f31084900692cffaf2.png)

左图是一张图片在另一张（html和定位）之上的截图，第二张是程序化合并的结果。

正如您在屏幕截图中看到的那样，文本的边框更暗。这里还有图像的大小

*   基础镜像 14.9 KB
*   叠加图像 6.87 KB
*   结果图像 34.8 KB

生成的图像的大小也很大

这是我用来合并这些图片的代码

```
/*...*/
public Stream Concatinate(Stream baseStream, params Stream[] overlayStreams) {
    var @base = Image.FromStream(baseStream);
    var canvas = new Bitmap(@base.Width, @base.Height);
    using (var g = canvas.ToGraphics()) {
        g.DrawImage(@base, 0, 0);
        foreach (var item in overlayStreams) {
            using (var overlayImage = Image.FromStream(item)) {
                try {
                    Overlay(@base as Bitmap, overlayImage as Bitmap, g);
                } catch {

                }
            }
        }
    }
    var ms = new MemoryStream();
    canvas.Save(ms, ImageFormat.Png);
    canvas.Dispose();
    @base.Dispose();
    return ms;
}

/*...*/
/*Tograpics extension*/
public static Graphics ToGraphics(this Image image,
    CompositingQuality compositingQuality = CompositingQuality.HighQuality,
    SmoothingMode smoothingMode = SmoothingMode.HighQuality,
    InterpolationMode interpolationMode = InterpolationMode.HighQualityBicubic) {
    var g = Graphics.FromImage(image);

    g.CompositingQuality = compositingQuality;
    g.SmoothingMode = smoothingMode;
    g.InterpolationMode = interpolationMode;
    return g;
}
private void Overlay(Bitmap source, Bitmap overlay, Graphics g) {
    if (source.Width != overlay.Width || source.Height != overlay.Height)
        throw new Exception("Source and overlay dimensions do not match");
    var area = new Rectangle(0, 0, source.Width, source.Height);
    g.DrawImage(overlay, area, area, GraphicsUnit.Pixel);
} 
```

我的问题是

*   我应该怎么做才能合并图像以达到屏幕截图中的结果？
*   如何降低结果图像的大小？
*   这是`System.Drawing`一个合适的工具，还是有更好的工具来处理.NET的png？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T10:53:29.223

您的问题的答案是：1）只需使用参数 CompositingQuality.Default 调用方法 ToGraphics，而不是使用示例中的默认参数值：

```
using (var g = canvas.ToGraphics(compositingQuality: CompositingQuality.Default)) 
```

问题在于 CompositingQuality.HighQuality 是它将两个图像合成为一个，但是您想要进行叠加，而不是合成两个图像。

2) 尺寸将与您指定的尺寸相似且无法更改，这是由于图像格式所致。

3) 如果您使用 c# 进行桌面编程，据我所知 System.Drawing 是最佳选择。

# iphone - 如何获得触摸时的像素颜色？

> ID：12770181
> 
> 赞同：26
> 
> 时间：2012-10-07T15:37:01.123
> 
> 标签：iphone, ios, touch, paint, pixel

我知道这是一个常见的问题，并且这个问题有很多答案。我已经使用了其中的一些。虽然很多都是一样的。但对我来说可悲的是，他们都没有为我工作。以下代码我一直使用到现在。

```
-(void)getRGBAsFromImage:(UIImage*)image atX:(int)xx andY:(int)yy
{
    // First get the image into your data buffer
    CGImageRef imageRef = [image CGImage];
    NSUInteger width = CGImageGetWidth(imageRef);
    NSUInteger height = CGImageGetHeight(imageRef);
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    unsigned char *rawData = (unsigned char*) calloc(height * width * 4, sizeof(unsigned char));
    NSUInteger bytesPerPixel = 4;
    NSUInteger bytesPerRow = bytesPerPixel * width;
    NSUInteger bitsPerComponent = 8;
    CGContextRef context = CGBitmapContextCreate(rawData, width, height,
                                                 bitsPerComponent, bytesPerRow, colorSpace,
                                                 kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
    CGColorSpaceRelease(colorSpace);

    CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef);
    CGContextRelease(context);

    // Now your rawData contains the image data in the RGBA8888 pixel format.
    int byteIndex = (bytesPerRow * yy) + xx * bytesPerPixel;

    CGFloat red   = (rawData[byteIndex]     * 1.0) / 255.0;
    CGFloat green = (rawData[byteIndex + 1] * 1.0) / 255.0;
    CGFloat blue  = (rawData[byteIndex + 2] * 1.0) / 255.0;
    CGFloat alpha = (rawData[byteIndex + 3] * 1.0) / 255.0;
    byteIndex += 4;
    NSLog(@"the vale of the rbg of red is %f",red);

    demoColor.tintColor = [UIColor colorWithRed:red green:green blue:blue alpha:alpha];
    free(rawData);
} 
```

这是我使用的另一种方法 -

```
- (CGContextRef) createARGBBitmapContextFromImage:(CGImageRef) inImage {

    CGContextRef    context = NULL;
    CGColorSpaceRef colorSpace;
    void *          bitmapData;
    int             bitmapByteCount;
    int             bitmapBytesPerRow;

    // Get image width, height. We'll use the entire image.
    size_t pixelsWide = CGImageGetWidth(inImage);
    size_t pixelsHigh = CGImageGetHeight(inImage);

    // Declare the number of bytes per row. Each pixel in the bitmap in this
    // example is represented by 4 bytes; 8 bits each of red, green, blue, and
    // alpha.
    bitmapBytesPerRow   = (pixelsWide * 4);
    bitmapByteCount     = (bitmapBytesPerRow * pixelsHigh);

    // Use the generic RGB color space.
    //colorSpace = CGColorSpaceCreateWithName(kCGColorSpaceGenericRGB);
    colorSpace = CGColorSpaceCreateDeviceRGB();
    if (colorSpace == NULL)
    {
        fprintf(stderr, "Error allocating color space\n");
        return NULL;
    }

    // Allocate memory for image data. This is the destination in memory
    // where any drawing to the bitmap context will be rendered.
    bitmapData = malloc( bitmapByteCount );
    if (bitmapData == NULL)
    {
        fprintf (stderr, "Memory not allocated!");
        CGColorSpaceRelease( colorSpace );
        return NULL;
    }

    // Create the bitmap context. We want pre-multiplied ARGB, 8-bits
    // per component. Regardless of what the source image format is
    // (CMYK, Grayscale, and so on) it will be converted over to the format
    // specified here by CGBitmapContextCreate.
    context = CGBitmapContextCreate (bitmapData,
                                     pixelsWide,
                                     pixelsHigh,
                                     8,      // bits per component
                                     bitmapBytesPerRow,
                                     colorSpace,
                                     kCGImageAlphaPremultipliedFirst);
    if (context == NULL)
    {
        free (bitmapData);
        fprintf (stderr, "Context not created!");
    }

    // Make sure and release colorspace before returning
    CGColorSpaceRelease( colorSpace );

    return context;
}

- (UIColor*) getPixelColorAtLocation:(CGPoint)point {
    UIColor* color = nil;
    //CGImageRef inImage = self.image.CGImage;
    CGImageRef inImage = [AppDelegate getInstance].capturedImage.CGImage;
    // Create off screen bitmap context to draw the image into. Format ARGB is 4 bytes for each pixel: Alpa, Red, Green, Blue
    CGContextRef cgctx = [self createARGBBitmapContextFromImage:inImage];
    if (cgctx == NULL) { return nil; /* error */ }

    size_t w = CGImageGetWidth(inImage);
    size_t h = CGImageGetHeight(inImage);
    CGRect rect = {{0,0},{w,h}}; 

    // Draw the image to the bitmap context. Once we draw, the memory
    // allocated for the context for rendering will then contain the
    // raw image data in the specified color space.
    CGContextDrawImage(cgctx, rect, inImage); 

    // Now we can get a pointer to the image data associated with the bitmap
    // context.
    unsigned char* data = CGBitmapContextGetData (cgctx);
    if (data != NULL) {
        //offset locates the pixel in the data from x,y.
        //4 for 4 bytes of data per pixel, w is width of one row of data.
        int offset = 4*((w*round(point.y))+round(point.x));
        int alpha =  data[offset];
        int red = data[offset+1];
        int green = data[offset+2];
        int blue = data[offset+3];
        NSLog(@"offset: %i colors: RGB A %i %i %i  %i",offset,red,green,blue,alpha);
        color = [UIColor colorWithRed:(red/255.0f) green:(green/255.0f) blue:(blue/255.0f) alpha:(alpha/255.0f)];
    }

    // When finished, release the context
    CGContextRelease(cgctx);
    // Free image data memory for the context
    if (data) { free(data); }

    return color;
} 
```

但这些都没有为我工作。请帮我解决这个问题。有什么我想念的吗？

我的 UI 中有 2 个 UIImageView。后面的那个包含我需要从中选择触摸像素颜色的图像。另一个 UIImageView 是用选择的颜色在背面图像上绘制。

请帮忙。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-07T16:36:43.480

这是我用过的，它看起来比你尝试过的方法更简单。

在我的自定义视图类中，我有这个：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint loc = [touch locationInView:self];
    self.pickedColor = [self colorOfPoint:loc];
} 
```

colorOfPoint 是 UIView 上一个类别中的一个方法，代码如下：

```
#import "UIView+ColorOfPoint.h"
#import <QuartzCore/QuartzCore.h>

@implementation UIView (ColorOfPoint)

-(UIColor *) colorOfPoint:(CGPoint)point
    {
    unsigned char pixel[4] = {0};
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(pixel,
            1, 1, 8, 4, colorSpace, (CGBitmapInfo)kCGImageAlphaPremultipliedLast);

    CGContextTranslateCTM(context, -point.x, -point.y);

    [self.layer renderInContext:context];

    CGContextRelease(context);
    CGColorSpaceRelease(colorSpace);
    UIColor *color = [UIColor colorWithRed:pixel[0]/255.0
        green:pixel[1]/255.0 blue:pixel[2]/255.0
        alpha:pixel[3]/255.0];
    return color;
    } 
```

不要忘记将类别导入自定义视图类并添加 QuartzCore 框架。

* * *

2013 年的琐碎说明：将最后一个参数转换为 (CGBitmapInfo) 以避免隐式转换警告：[这里](https://stackoverflow.com/questions/18921703)的示例。希望能帮助到你。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-05-04T02:03:43.447

# Swift 4、Xcode 9 - 带有 UIImageView 扩展

这是上述所有答案的组合，但在扩展中

```
extension UIImageView {
    func getPixelColorAt(point:CGPoint) -> UIColor{

        let pixel = UnsafeMutablePointer<CUnsignedChar>.allocate(capacity: 4)
        let colorSpace = CGColorSpaceCreateDeviceRGB()
        let bitmapInfo = CGBitmapInfo(rawValue: CGImageAlphaInfo.premultipliedLast.rawValue)
        let context = CGContext(data: pixel, width: 1, height: 1, bitsPerComponent: 8, bytesPerRow: 4, space: colorSpace, bitmapInfo: bitmapInfo.rawValue)

        context!.translateBy(x: -point.x, y: -point.y)
        layer.render(in: context!)
        let color:UIColor = UIColor(red: CGFloat(pixel[0])/255.0,
                                    green: CGFloat(pixel[1])/255.0,
                                    blue: CGFloat(pixel[2])/255.0,
                                    alpha: CGFloat(pixel[3])/255.0)

        pixel.deallocate(capacity: 4)
        return color
    }
} 
```

## 如何使用

```
override func touchesBegan(_ touches: Set<UITouch>, with event: UIEvent?) {
    let touch = touches.first
    if let point = touch?.location(in: view) {
        let color = myUIImageView.getPixelColorAt(point: point)
        print(color)
    }
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-12-25T08:16:05.703

感谢@Aggressor 发布上面的代码

**斯威夫特 2.1**

```
func getPixelColorAtPoint(point:CGPoint) -> UIColor{

   let pixel = UnsafeMutablePointer<CUnsignedChar>.alloc(4)
   let colorSpace = CGColorSpaceCreateDeviceRGB()
   let bitmapInfo = CGBitmapInfo(rawValue: CGImageAlphaInfo.PremultipliedLast.rawValue)
   let context = CGBitmapContextCreate(pixel, 1, 1, 8, 4, colorSpace, bitmapInfo.rawValue)

   CGContextTranslateCTM(context, -point.x, -point.y)
   view.layer.renderInContext(context!)
   let color:UIColor = UIColor(red: CGFloat(pixel[0])/255.0, green: CGFloat(pixel[1])/255.0, blue: CGFloat(pixel[2])/255.0, alpha: CGFloat(pixel[3])/255.0)

   pixel.dealloc(4)
   return color
} 
```

**Swift 3**，Xcode 版本 8.2 (8C38) 和 **Swift 4**，Xcode 版本 9.1 (9B55)

```
 func getPixelColorAtPoint(point:CGPoint, sourceView: UIView) -> UIColor{

    let pixel = UnsafeMutablePointer<CUnsignedChar>.allocate(capacity: 4)
    let colorSpace = CGColorSpaceCreateDeviceRGB()
    let bitmapInfo = CGBitmapInfo(rawValue: CGImageAlphaInfo.premultipliedLast.rawValue)
    let context = CGContext(data: pixel, width: 1, height: 1, bitsPerComponent: 8, bytesPerRow: 4, space: colorSpace, bitmapInfo: bitmapInfo.rawValue)
    var color: UIColor? = nil

    if let context = context {
        context.translateBy(x: -point.x, y: -point.y)
        sourceView.layer.render(in: context)

        color = UIColor(red: CGFloat(pixel[0])/255.0,
                        green: CGFloat(pixel[1])/255.0,
                        blue: CGFloat(pixel[2])/255.0,
                        alpha: CGFloat(pixel[3])/255.0)

        pixel.deallocate(capacity: 4)
    }
    return color
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-01-02T18:34:49.167

很好的答案 rdelmar 这对我帮助很大！

以下是我在 Swift 中执行上述操作的方式：

```
override func touchesBegan(touches: NSSet, withEvent event: UIEvent)
    {
        var touch:UITouch = event.allTouches()!.anyObject() as UITouch
        var loc = touch.locationInView(self)
        var color:UIColor = getPixelColorAtPoint(loc)
        println(color)
    }

    //returns the color data of the pixel at the currently selected point
    func getPixelColorAtPoint(point:CGPoint)->UIColor
    {
        let pixel = UnsafeMutablePointer<CUnsignedChar>.alloc(4)
        var colorSpace = CGColorSpaceCreateDeviceRGB()
        let bitmapInfo = CGBitmapInfo(CGImageAlphaInfo.PremultipliedLast.rawValue)
        let context = CGBitmapContextCreate(pixel, 1, 1, 8, 4, colorSpace, bitmapInfo)

        CGContextTranslateCTM(context, -point.x, -point.y)
        layer.renderInContext(context)
        var color:UIColor = UIColor(red: CGFloat(pixel[0])/255.0, green: CGFloat(pixel[1])/255.0, blue: CGFloat(pixel[2])/255.0, alpha: CGFloat(pixel[3])/255.0)

        pixel.dealloc(4)
        return color
    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-06-22T21:31:16.293

首先，我要感谢这段代码的作者，它对我的​​游戏项目帮助很大，因为我一直在寻找这个函数来做一个像素完美的命中框（不包括 aplha 是 O 的地方）。这是 Swift 5 的一个小更新：

```
// Fonction permettant de retourner les valeurs RGBA d'un pixel d'une vue
func getPixelColor(atPosition:CGPoint) -> UIColor{

    var pixel:[CUnsignedChar] = [0, 0, 0, 0];
    let colorSpace = CGColorSpaceCreateDeviceRGB();
    let bitmapInfo = CGBitmapInfo(rawValue:    CGImageAlphaInfo.premultipliedLast.rawValue);
    let context = CGContext(data: &pixel, width: 1, height: 1, bitsPerComponent: 8, bytesPerRow: 4, space: colorSpace, bitmapInfo: bitmapInfo.rawValue);

    context!.translateBy(x: -atPosition.x, y: -atPosition.y);
    layer.render(in: context!);
    let color:UIColor = UIColor(red: CGFloat(pixel[0])/255.0,
                                green: CGFloat(pixel[1])/255.0,
                                blue: CGFloat(pixel[2])/255.0,
                                alpha: CGFloat(pixel[3])/255.0);

    return color;

} 
```

我对 pixel.dealloc(4) 有一些问题，就像在 Swift 5 中一样，您似乎不能再使用容量参数来解除分配。我删除了 (4)，但它有一些奇怪的行为（因为 dealloc() 没有释放整个数组）。

我没有做 UIView 的扩展，因为在我的项目中我有自己的子类，但这很容易做到。

我实现代码的方式：

```
// Méthode déterminant si le "touch" est validé par l'objet (par défaut, exclut les zones transparentes et les objets invisibles). A surcharger si nécessaire.
func isHit(atPosition position:CGPoint) -> Bool
{

    // Si l'objet n'est pas caché (paramètre isHidden) et si la zone touchée correspond à une zone effectivement dessinée (non transparente), retourne true.
    if (!self.isHidden && self.getPixelColor(atPosition: position).cgColor.alpha != 0) {return true}
    else {return false}

} 
```

我希望这会有所帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-10-21T06:44:01.547

```
import UIKit

class ViewController: UIViewController {

    let imageV = UIImageView(frame: CGRect(x: 0, y: 0, width: 223, height: 265))
    override func viewDidLoad() {
        super.viewDidLoad()
        imageV.center = view.center
        imageV.image = UIImage(named: "color_image")
        view.addSubview(imageV)
        // Do any additional setup after loading the view.

        let tapGestureRecognizer = UITapGestureRecognizer(target: self, action: #selector(imageTapped(tapGestureRecognizer:)))
        imageV.isUserInteractionEnabled = true
        imageV.addGestureRecognizer(tapGestureRecognizer)
    }

    @objc func imageTapped(tapGestureRecognizer: UITapGestureRecognizer)
    {

        let cgpoint = tapGestureRecognizer.location(in: view)
        let color : UIColor = colorOfPoint(point: cgpoint)
        print("Picked Color is:",color)
        let new = UIView(frame: CGRect(x: 10, y: 10, width: 50, height: 50))
        new.backgroundColor = color
        view.addSubview(new)
    }

    func colorOfPoint(point:CGPoint) -> UIColor
    {
        let colorSpace:CGColorSpace = CGColorSpaceCreateDeviceRGB()
        let bitmapInfo = CGBitmapInfo(rawValue: CGImageAlphaInfo.premultipliedLast.rawValue)

        var pixelData:[UInt8] = [0, 0, 0, 0]

        let context = CGContext(data: &pixelData, width: 1, height: 1, bitsPerComponent: 8, bytesPerRow: 4, space: colorSpace, bitmapInfo: bitmapInfo.rawValue)
        context!.translateBy(x: -point.x, y: -point.y);
        self.view.layer.render(in: context!)

        let red:CGFloat = CGFloat(pixelData[0])/CGFloat(255.0)
        let green:CGFloat = CGFloat(pixelData[1])/CGFloat(255.0)
        let blue:CGFloat = CGFloat(pixelData[2])/CGFloat(255.0)
        let alpha:CGFloat = CGFloat(pixelData[3])/CGFloat(255.0)

        let color:UIColor = UIColor(red: red, green: green, blue: blue, alpha: alpha)
        return color
    }
} 
```

# android - 显示的活动 Android

> ID：12770182
> 
> 赞同：0
> 
> 时间：2012-10-07T15:37:03.980
> 
> 标签：android

我想创建一个应用程序储物柜。它适用于低于 4.03 的 android app lock 并且适用于 android 2.0 到 4.03，但不适用于 4.04。这是我的问题：

在 android 4.04 中，我收到了在每个应用程序上运行的消息：

```
08-16 15:43:00.291: I/ActivityManager(533): Displayed shortComponentName: +329ms 
```

但在较低版本中，我得到了应用程序包名称：

```
08-16 15:43:00.291: I/ActivityManager(533): Displayed com.test.app/com.test.app.Lock +329ms 
```

如何在 android 4.04 上获取包名

我有 Galaxy S3 的 testet

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:31:35.707

如果您正在解析日志以实现此目的，我建议您尽快停止这样做。Android 4.1 Jelly Bean 不再允许第三方应用查看其他第三方应用的日志，因此任何依赖日志的解决方案都不可避免地会崩溃。

除此之外，您必须更具体地说明您在做什么......我无法从您发布的日志中真正说出您正在尝试做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T16:34:08.797

尽管您有问题，但您将无法再读取**其他应用程序**的日志（除非您在有根设备上运行）。

# android - 将文件从图库保存到应用程序外部存储

> ID：12770183
> 
> 赞同：0
> 
> 时间：2012-10-07T15:37:24.093
> 
> 标签：android, file, copy

在我的应用程序中，用户可以从他们的图库中选择一张图片作为头像，但我想将其保存到我的应用程序存储中，以便他们可以删除文件。

我的代码是：

```
//onActivityResult()
else if (requestCode == SELECT_PICTURE)
            {
                mFile = new File(getRealPathFromURI(data.getData()));

                Date d = new Date();
                long ms = d.getTime();
                mName = String.valueOf(ms) + ".jpg";

                copyfile(mFile,mName);

                File file = new File(Environment.getExternalStorageDirectory(), mName);
                Bitmap myBitmap = BitmapFactory.decodeFile(file.getAbsolutePath());
                imgPhoto.setImageBitmap(myBitmap);

            }

   public String getRealPathFromURI(Uri contentUri)
{
    // can post image
    String [] proj={MediaStore.Images.Media.DATA};
    Cursor cursor = managedQuery( contentUri,proj,null,null,null);
    int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
} 

    private void copyfile(File file,String newFileName){
    try{
      InputStream in = new FileInputStream(file);
      OutputStream out = openFileOutput(newFileName, MODE_PRIVATE);
      byte[] buf = new byte[4096];
      int len;
      while ((len = in.read(buf)) > 0){
        out.write(buf, 0, len);
      }
      in.close();
      out.close();
      Log.d(null,"success");
    }
    catch(FileNotFoundException ex){
        ex.printStackTrace();
    }
    catch(IOException e){
        e.printStackTrace();     
    }
  } 
```

如果我在位图中解码 mFile，则会显示图像，因此 mFile 具有图像。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T15:51:17.287

好吧，首先……您还没有告诉我们您当前的行为。你的应用程序崩溃了吗？图片不显示？其他一些意想不到的行为？

除此之外：

1.  不要使用`managedQuery()`...它在主 UI 线程上运行，因此很容易将延迟引入您的应用程序。理想情况下，您希望使用 a`CursorLoader`但将所有工作包装在一个中可能会更容易`AsyncTask`（“所有工作”是指与保存/检索/解码图像文件相关的所有工作......和我建议这样做，因为完成所有这些工作可能需要相当长的时间，而且如果 UI 线程被阻塞太久，您的应用程序可能看起来很慢）。

2.  如果您确实选择将您的工作`AsyncTask`包装`doInBackground()`在`onPostExecute()`.

# javascript - 在客户端使用 js 缓存数据的最佳方式是什么？

> ID：12770185
> 
> 赞同：14
> 
> 时间：2012-10-07T15:37:44.323
> 
> 标签：javascript, html, cookies, web-storage

我的应用程序使用请求数量有限的 API 从另一台服务器接收数据。数据很少更改，但即使在刷新页面后也可能需要更改。

1.  使用 cookie 或 HTML5 WebStorage 的最佳解决方案是什么？
2.  并且可能有其他方法来解决这个任务？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-07T15:43:02.030

As much as cross browser compatibility matters, `cookie` is the only choice rather than web storage.

But the question really depends on ***what kind of data you are caching?***

For what you are trying, cookie and web-storage might not be needed at all.

*   Cookies are used to store configuration related information, rather than actual data itself.
*   Web storage supports persistent data storage, similar to cookies but with a greatly enhanced capacity and no information stored in the HTTP request header. ^([[1]](http://en.wikipedia.org/wiki/Web_storage))

I would rather say, it would be stupid to cache the entire page as cookie or web-storage both. For these purposes, server-side caching options might be the better way.

**Update:**

Quoting:

> data about user activity in some social networks (fb, vk, google+)

Detect the web-storage features, using libraries like [mordernizr](http://modernizr.com) and if does not exists fall back to cookie method. *A simple example*

```
if (Modernizr.localstorage) {
    // browser supports local storage
    // Use this method
} else {
    // browser doesn't support local storage
    // Use Cookie Method
} 
```

* * *

[1]: [http://en.wikipedia.org/wiki/Web_storage](http://en.wikipedia.org/wiki/Web_storage)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-15T07:51:00.567

我写了这个库来解决同样的问题：

[使用 Javascript 使用 cacheJS 缓存您的数据](http://hoangnd.me/blog/cache-your-data-with-javascript-using-cachejs)

以下是一些基本用法

```
// just add new cache using array as key
cacheJS.set({blogId:1,type:'view'},'<h1>Blog 1</h1>');
cacheJS.set({blogId:1,type:'json'}, jsonData);

// remove cache using key
cacheJS.removeByKey({blogId:1,type:'json'});

// add cache with ttl and contextual key
cacheJS.set({blogId:2,type:'view'},'<h1>Blog 2</h1>', 3600, {author:'hoangnd'});

cacheJS.set({blogId:3,type:'view'},'<h1>Blog 3</h1>', 3600, {author:'hoangnd'});

// remove cache with con textual key
// cache for blog 2 and 3 will be removed
cacheJS.removeByContext({author:'hoangnd'})
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-05-16T16:49:29.480

这是一个从 JQuery AJAX 缓存数据的示例。因此，如果您只想在还没有数据时拨打电话，那真的很简单。只需这样做（示例）。在这里，我们首先检查我们是否有负载信息（键入在线、位置和发货日期），只有当我们没有时，我们才进行 AJAX 调用并将该数据放入缓存中：

```
var dict = [];

function checkCachedLoadLine(line, location, shipDate, callback) {
    var ret = 0;
    if(!((line+location+shipDate) in dict)) {
        productionLineService.getProductionLoadLine(line, location, shipDate, callback);
    }
    return dict[line+location+shipDate];
} 
```

...然后在回调中将值写入缓存

```
function callback(data) {
    if (!data) {
        document.getElementById('htmlid').innerHTML = 'N/A';
    } else {
        document.getElementById('htmlid').innerHTML = data[0];
        dict[data[2]+data[3]+data[4]] = data[0];
    }
} 
```

# iphone - 使用 CGImageCreateWithImageInRect 裁剪图像

> ID：12770186
> 
> 赞同：5
> 
> 时间：2012-10-07T15:37:55.783
> 
> 标签：iphone, objective-c, ios

我正在尝试实现一个 iOS 相机视图，它可以拍摄方形照片（类似于 Instagram）。我的代码出现在下面。第一部分，其中框架高度设置为等于框架宽度，按预期工作，并且为用户提供了一个正方形的视图。当我尝试使用 CGImageCreateWithImageInRect 将框架（这是一个 CGRect 属性）应用于图像数据时，稍后会出现问题。我将框架矩形与图像一起传递给此方法。但结果并没有被裁剪成正方形。相反，图像保留了 iOS 相机的原始默认尺寸。有人可以告诉我我做错了什么吗？我对 Apple 文档的理解是 CGImageCreateWithImageInRect 应该从某个起始 x/y 坐标中选择形状为 Rect 的图像区域。但这并不

```
//Set the frame size to be square shaped
UIView *view = imagePicker.view;
        frame = view.frame;
        frame.size.height = frame.size.width;
        view.frame = frame;

//Crop the image to the frame dimensions using CGImageCreateWithImageInRect
-(void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    [self.popoverController dismissPopoverAnimated:true];

NSString *mediaType = [info
                       objectForKey:UIImagePickerControllerMediaType];
[self dismissModalViewControllerAnimated:YES];
if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) {
    UIImage *image = [info
                      objectForKey:UIImagePickerControllerOriginalImage];

    croppedImage = (__bridge UIImage *)(CGImageCreateWithImageInRect((__bridge CGImageRef)(image), frame));

    imageView.image = croppedImage;

}
else if ([mediaType isEqualToString:(NSString *)kUTTypeMovie])
{
    // Code here to support video if enabled
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:35:49.810

您设置的框架错误。我建议您查看 Apple 的此示例代码，了解如何创建您想要的内容：

[https://developer.apple.com/library/mac/#samplecode/VirtualScanner/Listings/Sources_VirtualScanner_m.html#//apple_ref/doc/uid/DTS40011006-Sources_VirtualScanner_m-DontLinkElementID_9](https://developer.apple.com/library/mac/#samplecode/VirtualScanner/Listings/Sources_VirtualScanner_m.html#//apple_ref/doc/uid/DTS40011006-Sources_VirtualScanner_m-DontLinkElementID_9)

看着那（这：

```
- (ICAError)startScanningWithParams:(ICD_ScannerStartPB*)pb 
```

功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T16:06:48.657

你做得对。唯一的问题是，我认为您将 frame 属性设置为与选取器视图相同，因此最终大小与原始大小相同。

尝试设置frame小于pickerView.view.frame，不等于

看一下这个

[裁剪 UIImage](https://stackoverflow.com/questions/158914/cropping-a-uiimage)

# facebook - 使用 facebook 的 JavaScript SDK 检查用户是否喜欢帖子

> ID：12770188
> 
> 赞同：1
> 
> 时间：2012-10-07T15:38:00.097
> 
> 标签：facebook, facebook-graph-api

我想知道用户是否已经喜欢指定的元素，即以前的 Wordpress 文章。我知道如何使用 捕获类似的事件`FB.Event.subscribe('edge.create', handler);`，但我找不到类似的方法来检查当前状态（加载页面时）。我想应该有一个 Graph API 查询来解决这个问题，但我找不到它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T16:31:02.280

这是您正在寻找的东西

[http://developers.facebook.com/docs/reference/api/post/](http://developers.facebook.com/docs/reference/api/post/)

我认为如果你只使用 fql 会更好。你需要一个类似这样的查询

```
SELECT user_id FROM like WHERE post_id="THE ID OF YOUR POST" 
```

有了这个，你就有了所有喜欢你的帖子的用户的 ID。一旦你有了一个集合，你就可以为你正在寻找的用户过滤它。

你可以在这里找到更多信息

[http://developers.facebook.com/docs/reference/fql/like/](http://developers.facebook.com/docs/reference/fql/like/)

编辑以获得任何元素：

上述查询适用于任何元素

例如，如果您想获得任何图像的喜欢

```
SELECT user_id FROM like WHERE object_id="The object_id of a video, note, link, photo" 
```

现在对此有一些复杂性，您必须首先找出链接的 id 是什么。您可以使用 fql 中的链接表来做到这一点。

# php - json data char '&' 扰乱 ajax post 请求数据

> ID：12770189
> 
> 赞同：0
> 
> 时间：2012-10-07T15:38:03.077
> 
> 标签：php, javascript, jquery, json

我正在使用生成一个 json 字符串`JSON.stringify`，我的 json 字符串会像

```
jsonstring=[{"step1":[{"nm":"John & joe"},{"title":"Hello & hai"}]},{"step2":[{"desc":"1234"},{"usr":"abc@xyz.com"}]}]` 
```

我正在转义`&`并`\&`通过 ajax 将此 json 字符串发送到服务器。

```
$.ajax({
url:"test-usr-data.php",
type:"post",
data:"usrdata="+jsonstring,
success: function(response){
console.log("data is "+response); 
},
complete:function (jqXHR, textStatus){ 
console.log("ajax Request completed"+textStatus);
    }
}); 
```

问题在于`&`json 字符串中的 char，即使我转义`&`到`\&`数据未发布到服务器但 ajax 请求状态为成功。

我尝试`&`从 json 字符串中删除它工作正常并且数据正确发布到服务器。

任何人都可以帮助我以正确的方式`&`在 json 字符串中转义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T15:41:07.680

Who told you that escaping in URL's works by prepending a backslash?

jQuery will take care of it, just do

```
data: {usrdata: jsonstring}, 
```

FYI: You could use `encodeURIComponent` as well

```
data: "usrdata=" + encodeURIComponent(jsonstring), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T15:43:08.077

The way to URI encode a `&` is as `%26`, given that 0x26 (38) is the ASCII code for that character.

But don't, use the `data: { key: value, ... }` way of passing parameters to `$.ajax` instead, and have jQuery do it all for you.

# sql - SQL 查找每个客户最近的帐户交易

> ID：12770190
> 
> 赞同：2
> 
> 时间：2012-10-07T15:38:15.410
> 
> 标签：sql, sql-server, max, aggregate

编辑：我正在使用 SQL Server

我环顾四周寻找一个例子，但找不到任何东西，所以我将开始一个新线程......

我有 3 张桌子。

# 帐户

*   帐户ID
*   名
*   姓

# 帐户注册

*   AccountEnrollID
*   帐户ID
*   帐户类型 ID
*   注册日期

# 帐户类型

*   帐户类型 ID
*   帐户类型

AccountEnroll 表是一个桥接表，用于跟踪每个客户的注册历史。我想使用“EnrollDate”列来确定每个客户的当前帐户类型。我需要编写一个可以显示 AccountID、FirstName、LastName、(current)AccountType 的 SELECT 语句。

我无法让我的结果集*仅*显示每个客户的 MAX(EnrollDate) 记录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T16:16:31.047

您可以使用公用表表达式非常简单地做到这一点。

```
with cte as (

select A.FirstName, A.LastName, AT.AccountType, AE.EnrollDate, row_number() over (partition by AE.AccountID order by EnrollDate desc) as [rn]
from Account as A
inner join AccountEnrolled as AE
   on A.AccountId = AE.AccountId
inner join AccountType as AT
   on AE.AccountTypeId = AT.AccountTypeId

)
select FirstName, LastName, AccountType, EnrollDate
from cte
where rn = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T15:45:21.210

尝试这个：

```
SELECT 
  a.AccountID, a.FirstName, a.LastName, 
  at.AccountType AS 'Current AccountType'
FROM Account a
INNER JOIN
(
   SELECT AccountID, MAX(EnrollDate) MaxDate
   FROM AccountEnroll
   GROUP BY AccountID
) t
INNER JOIN AccountEnroll ae ON  ae.AccountID = t.AccountID 
                            AND ae.EnrollDate = t.MaxDate
INNER JOIN AccountType at ON ae.AccountTypeID = at.AccountTypeID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T17:11:50.310

您可以使用相关的子查询：

```
SELECT A.AccountId, A.FirstName, A.LastName, AT.AccountType
FROM Account A
JOIN AccountEnroll AE
    ON A.AccountId = AE.AccountId
JOIN AccountType AT
    ON AE.AccountTypeId = AT.AccountTypeId
WHERE NOT EXISTS (
    SELECT 1
    FROM AccountEnroll
    WHERE AccountId = AE.AccountId
        AND EnrollDate > AE.EnrollDate
) 
```

# objective-c - 使用后缀搜索 NSArray

> ID：12770193
> 
> 赞同：1
> 
> 时间：2012-10-07T15:38:28.240
> 
> 标签：objective-c, search, nsarray

我有一个存储在一个单词列表中`NSArray`，我想找到其中所有以'ing'结尾的单词。

有人可以为我提供一些示例/伪代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T15:45:27.137

用于[`NSPredicate`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html)过滤`NSArrays`。

```
NSArray *array = @[@"test", @"testing", @"check", @"checking"];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF ENDSWITH 'ing'"];
NSArray *filteredArray = [array filteredArrayUsingPredicate:predicate]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T15:49:31.503

假设您定义了一个数组：

```
NSArray *wordList = // you have the contents defined properly 
```

然后您可以使用块枚举数组

```
// This array will hold the results.
NSMutableArray *resultArray = [NSMutableArray new];

// Enumerate the wordlist with a block
[wordlist enumerateObjectsUsingBlock:(id obj, NSUInteger idx, BOOL *stop) {
    if ([obj hasSuffix:@"ing"]) {
        // Add the word to the result list
        [result addObject:obj];
    }
}];

// resultArray now has the words ending in "ing" 
```

（我在这个代码块中使用 ARC）

我给出了一个使用块的示例，因为它在您需要时为您提供了更多选项，并且它是一种更现代的枚举集合的方法。您也可以使用并发枚举来执行此操作，并获得一些性能优势。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-07T15:44:58.637

只需遍历它并检查后缀：

```
for (NSString *myString in myArray) {
  if ([myString hasSuffix:@"ing"]){
    // do something with myString which ends with "ing"
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-07T15:44:46.460

```
NSMutableArray *results = [[NSMutableArray alloc] init];

// assuming your array of words is called array:
for (int i = 0; i < [array count]; i++)
{
    NSString *word = [array objectAtIndex: i];
    if ([word hasSuffix: @"ing"])
        [results addObject: word];
}

// do some processing

[results release]; // if you're not using ARC yet. 
```

从头开始输入，应该可以工作:)

# php - Get info using PHP Simple HTML DOM

> ID：12770195
> 
> 赞同：0
> 
> 时间：2012-10-07T15:38:49.957
> 
> 标签：php

I'm using PHP Simple HTML DOM to **scrape** the data from a site. just like to know how to get the info separately without getting all together.

using this command i can get the full page.

```
$html = file_get_html('http://mp3skull.com/mp3/gangnam_style.html');    
foreach($html->find('div#song_html') as $e)
       echo $e->innertext . '<br>'; 
```

What i need is to get the Title, URL, time, bites separately.

```
<div id="song_html" class="show1">
            <div class="left">
            <!-- info mp3 here -->
                320 kbps<br />4:01<br />9.2 mb          </div>
            <div id="right_song">
                <div style="font-size:15px;"><b>Psy - Gangnam style (DJ Pasha Lee & DJ Vitaco remix) - Psy - Gangnam style (DJ Pasha Lee & DJ Vitaco remix) mp3</b></div>
                <div style="clear:both;"></div>
                <div style="float:left;">
                    <div style="float:left; height:27px; font-size:13px; padding-top:2px;">
                        <div style="float:left;"><a href="http://promodj.com/source/3594542/Psy_Gangnam_style_DJ_Pasha_Lee_DJ_Vitaco_remix.mp3" rel="nofollow" target="_blank" style="color:green;">Download</a></div> 
                                                <div style="margin-left:8px; float:left; width:27px; text-align:center;"><a href="javascript:void(0)" onclick="showPlayer_new(11683153, '77380784862db5cfb455861b62fdc62690aca7d2', 'psy', 'gangnam+style')" rel="nofollow" id="lk11683153" class="play_now">Play</a></div>                     
                                                                        <div style="margin-left:8px; float:left;"><a href="javascript:void(0)" onclick="showEmbed_new(11683153, '77380784862db5cfb455861b62fdc62690aca7d2')" rel="nofollow" id="em11683153" class="embed">Embed</a></div>
                                                <div style="margin-left:8px; float:left;"><a href="http://www.ringtonematcher.com/go/?sid=WDLL&artist=psy&song=gangnam+style" rel="nofollow" target="_blank" style="color:red;" title="Send Psy - Gangnam Style Ringtone to your Cell">Send Ringtone</a></div> 
                        <div style="clear:both;"></div>
                    </div>
                    <div id="player11683153" style="float:left; margin-left:10px;" class="player"></div>
                </div>  
                <div style="clear:both;"></div>
            </div>
            <div style="clear:both;"></div>
        </div> 
```

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T16:08:18.597

你可以这样做

```
$html = file_get_html('http://mp3skull.com/mp3/gangnam_style.html');
$list = array();
$x = 0 ;
foreach ( $html->find('div#song_html ') as $e ) {

    $song = array();
    $song['bit'] = preg_replace('!\s+!', ' ',$e->find('div', 0)->plaintext);
    $song['title'] = preg_replace('!\s+!', ' ',$e->find('div', 1)->plaintext);
    $song['url'] = preg_replace('!\s+!', ' ',$e->find('a', 0)->href);
    $list[] = $song;
}
echo "<pre>";
print_r($list); 
```

输出

```
Array
(
    [0] => Array
        (
            [bit] =>  320 kbps 4:01 9.2 mb 
            [title] =>  Psy - Gangnam style (DJ Pasha Lee & DJ Vitaco remix) - Psy - Gangnam style (DJ Pasha Lee & DJ Vitaco remix) mp3 Download Play Embed Send Ringtone 
            [url] => http://promodj.com/source/3594542/Psy_Gangnam_style_DJ_Pasha_Lee_DJ_Vitaco_remix.mp3
        )

    [1] => Array
        (
            [bit] =>  320 kbps 4:01 9.2 mb 
            [title] =>  Psy - Gangnam style (DJ Pasha Lee & DJ Vitaco remix) - Psy - Gangnam style (DJ Pasha Lee & DJ Vitaco remix) mp3 Download Play Embed Send Ringtone 
            [url] => http://promodj.com/download/3608444/Psy_Gangnam_style_DJ_Pasha_lee_DJ_Vitaco_remix.mp3
        )

    [2] => Array
        (
            [bit] =>  128 kbps 4:21 3.98 mb 
            [title] =>  Psy - Gangnam Style (Boys Electro Mash-Up) - Psy Gangnam Style Boys Electro Mash Up mp3 Download Play Embed Send Ringtone 
            [url] => http://promodj.com/download/3614746/Psy_Gangnam_Style_Boys_Electro_Mash_Up.mp3
        )

    [3] => Array
        (
            [bit] =>  128 kbps 4:21 3.98 mb 
            [title] =>  Psy - Gangnam Style (Boys Electro Mash-Up) - Psy Gangnam Style Boys Electro Mash Up mp3 Download Play Embed Send Ringtone 
            [url] => http://promodj.com/source/3614746/Psy_Gangnam_Style_Boys_Electro_Mash_Up.mp3
        )

    [4] => Array
        (
            [bit] =>  192 kbps 2:53 3.97 mb 
            [title] =>  Jewish style Official parody to PSY GANGNAM STYLE MISSION ARIO REMIX DEMO FUNNY mp3 Download Play Embed Send Ringtone 
            [url] => http://promodj.com/download/3623591/Jewish_style_Official_parody_to_PSY_GANGNAM_STYLE_MISSION_ARIO_REMIX_DEMO_FUNNY.mp3
        )

    [5] => Array
        (
            [bit] =>  192 kbps 2:53 3.97 mb 
            [title] =>  Jewish style Official parody to PSY GANGNAM STYLE MISSION ARIO REMIX DEMO FUNNY mp3 Download Play Embed Send Ringtone 
            [url] => http://promodj.com/source/3623591/Jewish_style_Official_parody_to_PSY_GANGNAM_STYLE_MISSION_ARIO_REMIX_DEMO_FUNNY.mp3
        )

 ........ so many more 
```

# uiwebview - UIWebView and UIPageViewController

> ID：12770196
> 
> 赞同：1
> 
> 时间：2012-10-07T15:38:57.750
> 
> 标签：uiwebview, uipageviewcontroller

I have html content which is displayed using UIWebView. User navigate pages using UIPageViewController. The problem is that the web view completes rending the content after the page is displayed. There is noticeable delay makes the performance sluggish.

```
- (ContentViewController *)viewControllerAtIndex:(NSUInteger)index andPageIndex:  (NSUInteger)pageIndex{
    if (([self.pageData count] == 0) || (index >= [self.pageData count])) {
        return nil;
    }

    Topic * topic = (Topic *)[pageData objectAtIndex:index];

    ContentViewController * contentViewController = [[ContentViewController alloc] init];
    [contentViewController setCurrentTopic:topic];
    [contentViewController setCurrentPageIndex:pageIndex];

    return  hadeethViewController;

} 
```

The Content View Controller will not render the content unless it is really loaded by the PageViewContoller. Is there any way to enforce the view to load before the viewControllerAtIndex returns? Or is there any solution for such situation?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T17:48:46.613

`UIWebView`可以在不在屏幕上时加载内容。我猜你的问题是你的webview只有在你被初始化后才会`ContentViewController`被初始化。如果您已经知道哪些 HTML 文件将通过内容作为用户页面加载，您可以在创建之前在屏幕外 UIWebViews 中根据需要预加载它们，`ContentViewController`并将相应的预加载 UIWebView 添加到内容视图控制器。

# c# - How can I transfer the mouse position on the Canvas to the Ruler?

> ID：12770203
> 
> 赞同：0
> 
> 时间：2012-10-07T15:40:17.640
> 
> 标签：c#, wpf

I have WPF application with Canvas and a Ruler. Now I need to pass Canvas OnMouseMove(MouseEventArgs e) to the Ruler to reflect mouse movements on its scale. Both controls are created independently while initialization, they do not know of each other. How can I transfer the mouse position on the Canvas to the Ruler?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:42:48.340

我找到了解决方案，但我仍然有疑问。在我看来有点复杂：

1.  Canvas 作为“父”控件包含以下代码：

    公共点 MousePosition { get { return (Point)GetValue(MousePositionProperty); } set { SetValue(MousePositionProperty, value); } }

    ```
    public static readonly DependencyProperty MousePositionProperty =
            DependencyProperty.Register("MousePosition", typeof(Point), typeof(DesignerCanvas), new UIPropertyMetadata(point));

    protected override void OnMouseMove(MouseEventArgs e)
    {
        base.OnMouseMove(e);
        MousePosition = e.GetPosition(this); 
    ```

    }

2.  标尺包含以下代码：

    public Point Position { get { return (Point)GetValue(PositionProperty); } set { SetValue(PositionProperty, value); } }

    ```
    public static readonly DependencyProperty PositionProperty =
        DependencyProperty.Register("Position", typeof(Point), typeof(HorizontalRuler), new UIPropertyMetadata(defaultMousePoint,
          new PropertyChangedCallback(PositionPropertyChangedCallback)));

    private static void PositionPropertyChangedCallback(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        HorizontalRuler horizontalRuler = (HorizontalRuler)sender;
        horizontalRuler.InvalidateVisual();
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T18:09:45.887

MouseEventArgs 有一个[GetPosition](http://msdn.microsoft.com/en-us/library/system.windows.input.mouseeventargs.getposition.aspx)方法，允许您将任何 IInputElement 作为参数传递，并返回鼠标指针相对于指定元素的位置。将标尺作为参数值传递。

# android - Listview populated by sql db with onListItemClick to fill textviews in other activity

> ID：12770206
> 
> 赞同：2
> 
> 时间：2012-10-07T15:40:44.800
> 
> 标签：android, sqlite, listview, textview, onclicklistener

I am filling a listview from names of a database. That is all working fine. After clicking on an Listitem with the name i would like to set the `onListItemClick`to fill out textviews in another activity. That is where i am stuck.

Here the code of my listview activity which is working:

```
public class DataListView extends ListActivity {

private ArrayList<String> results = new ArrayList<String>();

private SQLiteDatabase newDB;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.hotelslist);

    openAndQueryDatabase();

    displayResultList();

}
private void displayResultList() {
    ListView hotelslist = (ListView) findViewById(android.R.id.list);
    hotelslist.setAdapter(new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, results));
   getListView().setTextFilterEnabled(true);

}

 @Override
  public void onListItemClick(ListView l, View v, int position, long id) {

     super.onListItemClick(l, v, position, id);
      Toast.makeText(getBaseContext(), l.getItemAtPosition(position).toString(), Toast.LENGTH_SHORT).show();

  }

private void openAndQueryDatabase() {
    try {

        DataBaseHelper newDB = new DataBaseHelper(this, "mydatabase.sqlite");

        SQLiteDatabase sdb = newDB.getReadableDatabase();

        Cursor c = sdb.rawQuery("SELECT name FROM hotel ORDER BY name ASC", null);

if (c != null ) {
    if  (c.moveToFirst()) {
        int i = 0;
        do {
            i++;
            String name = c.getString(c.getColumnIndex("name"));

            results.add(name);
        }while (c.moveToNext());
    } 

}       

    } catch (SQLiteException se ) {
        Log.e(getClass().getSimpleName(), "Could not create or Open the database");
    } finally {
        if (newDB != null) 

            newDB.close();
    }

}

} 
```

Besides the name the table also contains columns "address" and "telephone". This data i would like to be filled in textviews "addressfill" and "telephonefill" of another activity with following xml:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >
 <TextView
    android:id="@+id/name"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
     />
 <TextView
    android:id="@+id/address"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Address" />
 <TextView
    android:id="@+id/addressfill"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    />
  <TextView
    android:id="@+id/telephone"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Telephone number" />
  <TextView
    android:id="@+id/telephonefill"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    />

</LinearLayout> 
```

I tried to read into many tutorials out there and many posts here but didnt get around to found the right answer.

What code would i have to use for the `onListItemClick` and in my activity that uses the xml I presented. Help is very appreciated!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:49:46.897

如果要在列表项上设置侦听器，则需要扩展数组适配器并将侦听器代码放入适配器中：

```
public class SettingsListAdapter extends ArrayAdapter<String> {

     @Override
     public View getView(int position, View convertView, ViewGroup parent){
          // put your listener in here
                  mybutton.setOnClickListener(new View.OnClickListener() {          
                @Override
                public void onClick(View v) {
                    // do work here
                }

     }

} 
```

换句话说，simplelistadapter 不足以满足您的需求，您需要自己创建。

**编辑**

这是创建您自己的自定义 ArrayAdapter 的一个很好的示例：[自定义数组适配器教程](https://www.youtube.com/watch?v=LjAlNfa6obU)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T17:27:28.463

在`onListItemClick()`创建一个 Intent 并将名称放入 Intent 中：

```
Intent intent = new Intent(DataListView.this, SecondActivity.class);
intent.putExtra("name", l.getItemAtPosition(position).toString());
startActivity(intent); 
```

您必须更改`SecondActivity`为将接收该名称的 Activity 的类名称。

在第二个 Activity 中`onCreate()`，读取字符串：

```
String name = getIntent().getStringExtra("name");
if(name != null) {
    // Do something with the name, like selecting the address 
    //   and telephone number from your database to display
} 
```

* * *

但是，由于您正在使用数据库，因此您确实应该使用[SimpleCursorAdapter](http://thinkandroid.wordpress.com/2010/01/09/simplecursoradapters-and-listviews/)。使用光标更加有用和高效。

* * *

> 我该如何处理表格的其他列数据，如地址和电话？

你有两个选择：

1.  在您的第二个活动中，使用如下查询：

    ```
    "SELECT address, telephone FROM Hotel WHERE name = '" + name + "'" 
    ```

    但是如果多个酒店同名，你会得到不止一个地址...

2.  将您的第一个活动中的查询更改为：

    ```
    "SELECT name, address, telephone FROM Hotel ORDER BY name" 
    ```

    现在`onListItemClick()`您可以同时传递姓名、地址和电话号码，但是您需要将地址和电话号码存储在某个地方……这就是*SimpleCursorAdapter 非常*[有用](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html)的地方。

# python - .writerow() csv returns a number instead of writing rows

> ID：12770213
> 
> 赞同：4
> 
> 时间：2012-10-07T15:41:41.343
> 
> 标签：python, csv, python-3.x

I am testing some really simple code with Python 3\. For some reason, the following code generates an empty output, instead of writing a line

```
import csv

output = open('hello world.csv', 'w',newline='')
wr = csv.writer(output, quoting=csv.QUOTE_ALL)

wr.writerow('hello world') 
```

If I try the commands in the interpreter, `.writerow()` returns a number. The following example is the one used in the [documentation page](http://docs.python.org/release/3.1.5/library/csv.html):

```
>> import csv
>>> spamWriter = csv.writer(open('eggs.csv', 'w', newline=''), delimiter=' ',
... quotechar='|', quoting=csv.QUOTE_MINIMAL)
>>> spamWriter.writerow(['Spam'] * 5 + ['Baked Beans'])
40
>>> spamWriter.writerow(['Spam', 'Lovely Spam', 'Wonderful Spam'])
37 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T18:14:37.390

`writerow``eggs.csv`实际上会写入行，但由于文件缓冲，您看不到它们。要查看文件中的某些内容，请关闭它或调用`.flush()`方法。如果您使用`with`-statement，则即使出现错误，文件也会自动关闭。

它没有记录（[报告错误？](http://bugs.python.org/)）但`writerow`返回`fileobj.write()`方法的结果，即在这种情况下写入文件的字符数。

您应该将形成一行的字段序列传递给`writerow`方法：

```
writer.writerow(['field 1', 'field 2', 'etc']) 
```

如果您传递一个字符串而不是列表，则该字符串被解释为一个字段序列，其中每个字段都是一个单独的字符：

```
#XXX this is probably not what you want, don't do it
writer.writerow('abc')
# -> a,b,c 
```

# mysql - mysql表列的数据类型应该是什么，用于存储笔记

> ID：12770215
> 
> 赞同：0
> 
> 时间：2012-10-07T15:41:44.353
> 
> 标签：mysql, file-io, blob

我正在开发一个存储用户创建的笔记的 Web 应用程序。我很困惑是将笔记作为单独的文件存储在文件系统上，还是使用数据库列来保存文本。

如果 mysql 是更好的解决方案，那么我应该使用什么数据类型（内容可以是简单的文本或 html）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:50:41.797

如果你需要速度，你可以使用 MySQL。您需要使用其中一个，`BLOB`或者如果它只是文本，则`TEXT`用作数据类型。使用良好的数据库引擎（MySQL、SQLite 等）。然后，为了获得最佳性能，请使用 memcached 缓存内容。

### 请记住几件事：

1.  MySQL 有一个查询缓存。如果您重复发出相同的查询，则无需添加缓存层即可获得很多性能。
2.  无论如何，MySQL 真的很快。您是否进行了负载测试以证明它不够快？

另一件事是，很难搜索平面文件。如果使用 MySQL，不仅速度更快，而且搜索起来也更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T15:54:48.473

您可以做的是使用以下字段创建一个 mysql 表：ID (INT)、CreationDate (DATETIME)、Content (TEXT)

如果您想存储简单的文本或 html，这完全取决于您的需要（用户是否可以在他的笔记上放置特殊字体？特殊颜色？），但不要忘记正确转义文本。

从那时起，您可以轻松地通过 ID 检索用户的笔记，也可以轻松地按创建/修改日期对其进行排序。使用 SQL 数据库为您提供了很大的灵活性。

# typescript - TypeScript: Multiple projects in solution

> ID：12770216
> 
> 赞同：10
> 
> 时间：2012-10-07T15:41:46.430
> 
> 标签：typescript

I've finished porting a JavaScript library to TypeScript in Visual Studio 2012\. All in all its about 60 classes, with each class defined in its own .ts file.

All classes are defined in the same module. I use reference comments to reder to classes defined in other files. The layout of every file looks like this:

```
///<reference path='./../myotherclass.ts' />

module MyModule {

    export class MyClass {
        ...
    }

} 
```

Now I've created a second project in the same solution which is going to be the actual application using my newly ported library. I have to include my library somehow and I guess that's what the module system is for. However, I'm not sure what file(s) to import as MyModule is spread over dozens of files. Is this what I can use the .d.ts file for?

Also, to be able to import a module, it has to be declared with the 'export' keyword but if I do that then it is not found by reference comments anymore.

On top of all that, both projects should be compiled so that the compiler output can be readily used with a module loader like requireJS.

What's the best approach to accomplish all this?

Thank you!

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T19:22:22.860

好的，让我首先说“模块”可以表示不同的东西。例如，您的“MyModule”创建了“模块模式”。据我所知，TypeScript 在语言规范中将这些称为“内部模块”，它们与您将使用 RequireJS 之类的东西加载的“外部模块”不同。主要区别在于外部模块期望拥有自己的隔离环境，其中包含可用于导出其功能的预定义“导出”对象。

看看你的模块的输出：

```
var MyModule;
(function (MyModule) {
    var MyClass = (function () {
        function MyClass() { }
        return MyClass;
    })();
    MyModule.MyClass = MyClass;    
})(MyModule || (MyModule = {})); 
```

您会看到它正在将内容导出到“MyModule”中，这将对您加载的其他脚本文件全局可用，例如，html“脚本”块。由于您提到您有 60 个，您可能还可以将编译器设置为输出一个可以包含在标记中的文件，而不是一个一个地加载每个文件。

继续，看看如果将模块声明从“module MyModule { ... }”更改为“export module MyModule { ... }”，输出会发生什么：

```
(function (MyModule) {
    var MyClass = (function () {
        function MyClass() { }
        return MyClass;
    })();
    MyModule.MyClass = MyClass;    
})(exports.MyModule || (exports.MyModule = {})); 
```

如您所见，您的模块仍在使用“模块模式”，但它被分配为“exports”的成员，这意味着它应该被加载，例如，节点的“require”函数。

在这种情况下，您可能希望通过以下代码实际使用您的模块：

```
import wrapper = module("./MyModule");
var instance = new wrapper.MyModule.MyClass(); 
```

请注意，“./MyModule”名称实际上是指定义模块的**文件名**（减去 .js 扩展名）（这就是 VS 说它无法为您找到这些模块的原因）。代码应编译为：

```
var wrapper = require("./MyModule");
var instance = new wrapper.MyModule.MyClass(); 
```

除此之外，您甚至不再需要对“模块”关键字做任何事情来拥有一个模块。您可以简单地导出一个函数：

```
// foo.ts
export function foo() {
    ...
};

// some other file in the same dir
import wrapper = module("./foo");
var result = wrapper.foo(); 
```

这是有效的，因为函数 'foo' 将直接分配给“exports”，该函数将在另一个文件中别名为“wrapper”。

为了进一步增加与模块相关的混乱混乱，我还应该提到 AMD 模块仍然不同，因为它们是异步加载的，与节点的“要求”不同。要让 TypeScript 输出这些内容，您需要将“--module AMD”参数传递给编译器。

无论如何，我希望我能很好地解释这种情况，以至于你能够弄清楚你到底需要/想要什么。您最终使用的模块类型实际上取决于您将如何使用它们……即节点、Web 或两者的混合。

# windows - Trying to write to file a char with ascii code more than 127 in JScript

> ID：12770217
> 
> 赞同：1
> 
> 时间：2012-10-07T15:41:59.683
> 
> 标签：windows, jscript

> **Possible Duplicate:**
> [Javascript, write to txt file save as UNICODE](https://stackoverflow.com/questions/8802867/javascript-write-to-txt-file-save-as-unicode)

I have a problem with writing to a TextStream char with code more than 127.

Example:

```
a.WriteLine(String.fromCharCode(130)); 
```

will return error. But

```
a.WriteLine(String.fromCharCode(65)); 
```

will write A. What is the problem?

# python - Using PIL or a Numpy array, how can I remove entire rows from an image?

> ID：12770218
> 
> 赞同：5
> 
> 时间：2012-10-07T15:42:03.310
> 
> 标签：python, image-manipulation, python-imaging-library

I would like to know how I could remove entire rows from an image, preferably based on the color of the row?

Example: I have an image that is 5 pixels in height, the top two rows and the bottom two rows are white and the middle row is black. I would like to know how I could get PIL to identify this row of black pixels, then, remove the entire row and save the new image.

I have some knowledge of python and have so far been editing my images by listing the result of "getdata" so any answers with pseudo code may hopefully be enough. Thanks.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T16:47:55.973

我给你写了下面的代码，它删除了每一行完全是黑色的。我使用循环的[else 子句](http://docs.python.org/tutorial/controlflow.html#break-and-continue-statements-and-else-clauses-on-loops)，`for`当循环*没有*被中断退出时，该子句将被执行。

```
from PIL import Image

def find_rows_with_color(pixels, width, height, color):
    rows_found=[]
    for y in xrange(height):
        for x in xrange(width):
            if pixels[x, y] != color:
                break
        else:
            rows_found.append(y)
    return rows_found

old_im = Image.open("path/to/old/image.png")
if old_im.mode != 'RGB':
    old_im = old_im.convert('RGB')
pixels = old_im.load()
width, height = old_im.size[0], old_im.size[1]
rows_to_remove = find_rows_with_color(pixels, width, height, (0, 0, 0)) #Remove black rows
new_im = Image.new('RGB', (width, height - len(rows_to_remove)))
pixels_new = new_im.load()
rows_removed = 0
for y in xrange(old_im.size[1]):
    if y not in rows_to_remove:
        for x in xrange(new_im.size[0]):
            pixels_new[x, y - rows_removed] = pixels[x, y]
    else:
        rows_removed += 1
new_im.save("path/to/new/image.png") 
```

如果您有问题，请询问:)

# javascript - jQuery form validation

> ID：12770220
> 
> 赞同：0
> 
> 时间：2012-10-07T15:42:10.283
> 
> 标签：javascript, jquery

I'm creating a contact form and I'm validating it with jQuery. However, if I use class `.control-group`, my code isn't doing anything. But it works fine if I don't use `.control-group` with it. Here's the html:

```
<form class="form-horizontal" id="contact">
    <div class="control-group" id="nimi">
        <label class="control-label">Nimi</label>
        <div class="controls">
            <div class="input-prepend"> <span class="add-on"><i class="icon-envelope"></i></span>
                <input type="text" placeholder="Nimi" name="nimi">
            </div>
        </div>
    </div>
    <div class="control-group" id="sposti">
        <label class="control-label">Sähköposti</label>
        <div class="controls">
            <div class="input-prepend"> <span class="add-on"><i class="icon-user"></i></span>
                <input type="text" placeholder="Sähköposti" name="sposti">
            </div>
        </div>
    </div>
    <div class="control-group" id="viesti">
        <label class="control-label">Viesti</label>
        <div class="controls">
        <textarea name="viesti"></textarea>       
        </div>
    </div>
    <div class="control-group">
        <label class="control-label"></label>
        <div class="controls">
        <input type="submit" class="btn btn-success sendbutton" value="Lähetä">       
        </div>
    </div>
</form>​ 
```

And the javascript:

```
$(document).ready(function(){
    $('.sendbutton').click(function(){
        var nimi = $('input[name=nimi]').val();
        var viesti = $('input[name=viesti]').val();
        $('.control-group').removeClass("error");

        if(nimi == ""){
          $('.control-group #nimi').addClass("error");
          return false;    
        }
        if(viesti == ""){
          $('.control-group #nimi').addClass("error");
          return false;    
        }
    });
});​ 
```

And a fiddle about this: [http://jsfiddle.net/GDXCE/](http://jsfiddle.net/GDXCE/) And a fiddle if I don't use class control-group: [http://jsfiddle.net/WgAZC/1/](http://jsfiddle.net/WgAZC/1/)

What I'm doing wrong with the selectors?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T15:47:31.770

改变这个：

```
$('.control-group #nimi').addClass("error"); 
```

至：

```
$('.control-group#nimi').addClass("error"); 
```

`#nimi`不是您的`.control-group`元素的后代之一。

```
<div class="control-group" id="nimi"> 
```

[http://jsfiddle.net/tTBRx/](http://jsfiddle.net/tTBRx/)

由于您通过 ID 选择元素并且 ID 是唯一的，因此无需使用其他选择器。

```
$('#nimi').addClass("error") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T15:47:14.110

你在选择器之间放置一个空格

```
.control-group #nimi 
```

表示有一个 id = nimi 的元素是具有类 .control-group 的元素的后代

正确的版本应该是

```
.control-group#nimi 
```

如果 class 和 id 都属于同一个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T15:51:48.553

`.control-group`在您的选择器中，在和之间放置一个空格`#nimi`将查找`#nimi`是 的子元素`.control-group`，而不是进一步定义`.control-group`您想要的。尝试这个：

```
if(nimi == ""){
    $('.control-group#nimi').addClass("error");
    return false;    
} 
```

[CSS 选择器参考](http://www.w3schools.com/cssref/css_selectors.asp)

# python - Open URL and place it to a string

> ID：12770221
> 
> 赞同：-1
> 
> 时间：2012-10-07T15:42:25.877
> 
> 标签：python, regex

`filehandle = urllib.urlopen(myurl)`

Because of the fact that I want to `regex` the `filehandle` afterwords I need to transform the filehandle from an object to a string. How can I make the webpage code to be stored in a string?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T15:43:25.820

这很简单：

```
page = filehandle.read() 
```

您也可以对其进行迭代，例如：

```
lines = []
for line in filehandle:
    lines.append(line) 
```

要提取数据，请使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)或[lxml](http://www.lxml.de)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T15:44:23.550

因为`urllib.urlopen`返回一个类似对象的文件，所以您可以调用`.read()`它，也可以直接迭代它。

有关更多信息，请参阅[文档](http://docs.python.org/library/urllib.html)

编辑：

好解释什么

> 直接迭代它

方法。

```
import urllib
request = urllib.urlopen("http://www.python.org")
for source_line in request:
    print source_line 
```

# java - Formatting output in Java

> ID：12770222
> 
> 赞同：2
> 
> 时间：2012-10-07T15:42:33.970
> 
> 标签：java

I want to format the numbers so that it gets displayed in proper format. At the moment 1-12 left side is displaying correctly apart from 1 because it has moved into another space due to pushing the 8 into the format.

The Wrong outcome is shown below... The (-) act as spaces on here because I cant attach an image.

```
--1 * 8 = -8
-2 * 8 = 16
-3 * 8 = 24
-4 * 8 = 32
-5 * 8 = 40
-6 * 8 = 48
-7 * 8 = 56
-8 * 8 = 64
-9 * 8 = 72
10 * 8 = 80
11 * 8 = 88
12 * 8 = 96 
```

The outcome I want is shown below... The (-) act as spaces on here because I cant attach an image.

```
--1 * 8 = --8
--2 * 8 = 16
--3 * 8 = 24
--4 * 8 = 32
--5 * 8 = 40
--6 * 8 = 48
--7 * 8 = 56
--8 * 8 = 64
--9 * 8 = 72
10 * 8 = 80
11 * 8 = 88
12 * 8 = 96 
```

I appreciate if anyone can help me with this... has been driving me insane.

**Here is my code so far:**

```
 public class Main {

        public static void main(String [] args) {

            int end_value = 13;
            int result = 0;

            System.out.print("Enter a Number:");
            int num_input = BIO.getInt();

            for (int numberLoop = 1; numberLoop < end_value; numberLoop++) 
            {
                result = numberLoop * num_input;

                System.out.printf("%11s\n", numberLoop + " * " + num_input + 
                                                          " = " + result);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T15:44:49.820

您应该对单个元素应用格式：-

```
System.out.format("%3d * %4d = %5d\n", numberLoop, num_input, result); 
```

你应该`%d`在打印整数时使用..

`%3d`将被替换`numberLoop`。

`%4d`将被替换为`num_input`

`%5d`将被替换为`result`

你会得到如下输出： -

```
numberLoop(3 spaces) * num_input(4 spaces) = result(5 spaces) 
```

`%3d`用于右对齐..`%-3d`用于左对齐.. 您可以使用其中任何一个..

您还可以使用**将格式化的字符串存储**到 String 变量中`String.format()`，以后可以打印该字符串变量：-

```
String result = String.format("%3d * %4d = %5d\n", numberLoop, num_input, result) 
```

**注意： - 有关更多格式化选项**，您可以查看[Formatter](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html)类的文档。

# php - Using fetch array in foreach loop PHP

> ID：12770229
> 
> 赞同：1
> 
> 时间：2012-10-07T15:43:03.177
> 
> 标签：php, arrays, loops, foreach

So basicly this is my code:

```
echo "<SELECT>";
foreach($arr_res as $op) {
   $q3 = mysql_query(mysql_fetch_array("SELECT SL_TIME FROM SLOTS WHERE SL_ID='$op'"));
   echo "<OPTION value=".$op.">".$q3."</OPTION>";
}
echo "</SELECT>"; 
```

`$arr_res` is the resulting array of an `array_diff`. It has only numerical values which are the SL_ID from my timeslots.. I want to show SL_TIME but the result I get is the `$q3` producing empty result.. Why isn't this working?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:48:41.537

你不查询 mysql_fetch_array。Mysql_query 给出了你使用 mysql_fetch_array 的结果。所以正确的代码是：

```
echo "<SELECT>";
foreach($arr_res as $op){
$result = mysql_query("SELECT SL_TIME FROM SLOTS WHERE SL_ID='$op'");
$q3=mysql_fetch_array($result);
echo "<OPTION value=".$op.">".$q3."</OPTION>";
}
echo "</SELECT>"; 
```

但是， $q3 将是一个数组，这可能不是您想要的。此外，如果使用诸如 PDO (http://www.php.net/manual/en/class.pdo.php) 之类的抽象会更好。这将最大限度地提高性能并提高安全性。

# javascript - JavaScript AJAX 和 Rails 控制器（来回）

> ID：12770233
> 
> 赞同：0
> 
> 时间：2012-10-07T15:43:14.747
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3, jquery-events

我在 Rails 控制器和 JS 文件之间来回发送信息。

1.  我通过 JS 将表单发送到控制器（作品）

    ```
    $("#help-email-submit").ajaxSubmit({url: '/help/send_help_email', type: 'post' }); 
    ```

2.  我能够在控制器中捕捉到事件（作品）

    ```
    def send_help_email
      ....
    end 
    ```

3.  在发送上述请求的同一个 JS 文件中，如何捕获 JSON 响应（如下）？（不起作用）

    ```
    def send_help_email
      ...
      cst_str = @current_support_ticket.to_s
      respond_to do |format|
        format.json { render :json => cst_str }
      end
    end 
    ```

    在 JS 文件中

    ```
    var xmlhttp = new XMLHttpRequest();
    alert(xmlhttp.responseText); 
    ```

* * *

更新

我注意到一个阻止成功的 JS 错误：函数执行：

错误

> TypeError: 'undefined' 不是函数（评估'$("#help-email-form").ajaxSubmit({url: '/help/send_help_email', type: 'post', complete: handlerResponse })'）

这是触发错误的行

```
$("#help-email-form").ajaxSubmit({url: '/help/send_help_email', type: 'post', complete: handlerResponse }) 
```

这是完整的块

```
var handlerResponse = function(data) {
alert(data);
};

$('#help-email-submit').live('click', function(e) {
    $('#sender-email-wrapper').fadeOut('fast', function() {
        $("#help-email-sent").fadeIn('slow');
    });
    $("#help-email-form").ajaxSubmit({url: '/help/send_help_email', type: 'post', complete: handlerResponse })
    e.preventDefault();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:54:03.580

根据[`ajaxSubmit`文档](http://www.malsup.com/jquery/form/#api)，它接受与该[`jQuery.ajax`方法](http://api.jquery.com/jQuery.ajax/)相同的选项。因此，要获得响应，您可以将`complete`回调传递给调用：

```
var handleResponse = function(data) {
  // Use response here
};

$("#help-email-submit").ajaxSubmit({url: '/help/send_help_email', type: 'post', complete: handleResponse }); 
```

根据您使用的 jQuery 版本，您还可以通过以下`complete`方法的返回值传递回调`jQuery.ajax`：

```
$("#help-email-submit").ajaxSubmit({url: '/help/send_help_email', type: 'post'}).complete(function(data) {
  // Use response here
}); 
```

# php - php isset() 不工作

> ID：12770234
> 
> 赞同：-1
> 
> 时间：2012-10-07T15:43:15.393
> 
> 标签：php, zend-framework, zend-db

起初我发布了我的代码：

```
//if ($filterResults['id']) {
  if (isset($filterResults['id'])){
            $select = $this->select();
            $select->where('id = ?', $filterResults['id']);

        $this->fetchAll($select);

        } 
```

现在，问题是如果我使用`if ($filterResults['id']) {`它会给出预期的结果，但如果我使用`if (isset($filterResults['id'])){`它就不起作用。我看不出这背后有什么原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T15:45:27.693

`isset()`如果值为 NULL，将返回 false。如果这是一种可能性，您可能希望`array_key_exists()`改用：

```
if (array_key_exists('id', $filterResults)) {
    [...]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T16:01:56.913

如果我像这样使用 isset() 它会起作用：

```
if ( isset($filterResults['id']) && $filterResults['id'] != null ){
        $select = $this->select();
        $select->where('id = ?', $filterResults['id']);

    $this->fetchAll($select);

    } 
```

# javascript - Chrome 扩展加载行为

> ID：12770238
> 
> 赞同：8
> 
> 时间：2012-10-07T15:43:37.887
> 
> 标签：javascript, google-chrome-extension

我正在为 chrome 扩展开发一个设置页面。在我的 options.js 文件中，我想用一些默认值来初始化设置，我会使用`window.onload = initSettings();`它。在我的`initSettings()`函数中，我试图通过`document.getElementById("someId")`. 但是这个调用总是返回`null`。我认为`window.onload`在所有 DOM 元素就位后触发该事件。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-07T15:53:05.883

我在 options.js 文件的顶部有这个 - 自从我上次玩扩展以来已经很久了，我不能确定它是否有任何帮助。值得一试..

```
// fires when script is first loaded
// can't do onInit directly here, because the DOM hasn't been loaded for options.html yet
// we just set an event listener for document.DOMContentLoaded - In that handler we can call onInit
document.addEventListener('DOMContentLoaded', onInit, false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-11T17:27:43.300

打开我的 chrome 扩展时，我需要运行一段代码，我使用了以下代码：

```
document.addEventListener("DOMContentLoaded", function(){ checkCheckBoxes(); }, false); 
```

其中“checkCheckBoxes”是被调用的 Javascript 函数。

# django - uWSGI 配置问题：uwsgi 失败且没有任何错误消息。

> ID：12770239
> 
> 赞同：0
> 
> 时间：2012-10-07T15:43:40.983
> 
> 标签：django, nginx, uwsgi

第一次配置 uwsgi django 应用程序时，我遇到了奇怪的错误。NGIX（根据文档配置）以`502 Bad Gateway response`.

Uwsgi 日志没有给出明显的错误：

```
 Sun Oct  7 17:36:31 2012 - *** Starting uWSGI 1.2.3-debian (64bit) on [Sun Oct  7 17:36:31 2012] ***
  Sun Oct  7 17:36:31 2012 - compiled with version: 4.7.1 on 13 September 2012 19:07:14
  Sun Oct  7 17:36:31 2012 - detected number of CPU cores: 2
  Sun Oct  7 17:36:31 2012 - current working directory: /
  Sun Oct  7 17:36:31 2012 - writing pidfile to /run/uwsgi/app/lfitjcmsjb/pid
  Sun Oct  7 17:36:31 2012 - detected binary path: /usr/bin/uwsgi-core
  Sun Oct  7 17:36:31 2012 - setgid() to 33
  Sun Oct  7 17:36:31 2012 - setuid() to 33
  Sun Oct  7 17:36:31 2012 - your memory page size is 4096 bytes
  Sun Oct  7 17:36:31 2012 - detected max file descriptor number: 1024
  Sun Oct  7 17:36:31 2012 - lock engine: pthread robust mutexes
  Sun Oct  7 17:36:31 2012 - uwsgi socket 0 bound to UNIX address /run/uwsgi/app/lfitjcmsjb/socket fd 3
  Sun Oct  7 17:36:31 2012 - uwsgi socket 1 bound to UNIX address /tmp/lfitj.sock fd 5
  Sun Oct  7 17:36:31 2012 - your server socket listen backlog is limited to 100 connections
  Sun Oct  7 17:36:31 2012 - *** Operational MODE: preforking ***
  Sun Oct  7 17:36:31 2012 - *** no app loaded. going in full dynamic mode ***
  Sun Oct  7 17:36:31 2012 - *** uWSGI is running in multiple interpreter mode ***
  Sun Oct  7 17:36:31 2012 - spawned uWSGI master process (pid: 5141)
  Sun Oct  7 17:36:31 2012 - spawned uWSGI worker 1 (pid: 5144, cores: 1)
  Sun Oct  7 17:36:31 2012 - spawned uWSGI worker 2 (pid: 5145, cores: 1)
  Sun Oct  7 17:37:57 2012 - -- unavailable modifier requested: 0 -- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T15:43:40.983

uWSGI 日志显示错误 --- 它是：

```
 -- unavailable modifier requested: 0 -- 
```

这基本上意味着缺少 python 插件 --- 你需要安装它。在 debian 上，您需要安装`uwsgi-plugin-python`.

# vhdl - VHDL/Verilog：访问 HDMI 端口

> ID：12770241
> 
> 赞同：4
> 
> 时间：2012-10-07T15:43:50.720
> 
> 标签：vhdl, verilog, fpga, xilinx, hdmi

我刚买了一块新板。

[http://www.digilentinc.com/Products/Detail.cfm?NavPath=2,400,836&Prod=ATLYS](http://www.digilentinc.com/Products/Detail.cfm?NavPath=2,400,836&Prod=ATLYS)

如您所见，我在板上有两个 HDMI 输入和两个 HDMI 输出。

我想要做的是采用一个 HDMI 输入并对 1080p 信号进行一些转换。具体来说，我想让屏幕中心的像素稍微不亮，而屏幕边缘的像素更亮。然后将这个新信号输出到其中一个 HDMI 输出端口。

我真的不知道该怎么做——我对 FPGA 设计很陌生。

我是否需要获得一些 IP，或者我可以使用标准工具自己做这件事吗？我有赛灵思 ISE webpack。

任何见解都非常感谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T18:38:03.180

您通常有两种选择：
1) 您可以继续使用您选择的 HDL 实现您自己的 HDMI 接收器/发送器模块。但是出于您的目的，这似乎太耗时且过于矫枉过正，因为您要做的就是“更改一些像素值”。
我也不向 HDL/FPGA 领域的初学者推荐这个。
据我所知，HDMI 规范也不是免费提供的，所以这可能不是最便宜的解决方案。
2) 使用现有的 IP 核。您是否查看了digilent页面底部的“支持文档”（您的问题中的链接）？似乎存在一个[参考设计](http://www.digilentinc.com/Data/Products/ATLYS/Atlys_HDMI_PLB_demo.zip)“ **接受 HDMI 输入，将输入帧缓冲到内存中，然后将缓冲区输出到另一个 HDMI 端口。**"
如果您拥有使用 EDK（嵌入式开发套件）的必要许可，此参考设计应该包含您正在寻找的内容。
但即使您想要纯 HDL 解决方案，请查看 EDK 解决方案随附的 HDL 源文件不会有伤害
。EDK 的完整许可证也需要付费，但您可以从 Xilinx 获得 30 天免费评估许可证。

最后，互联网上有很多免费的 IP 内核可用，例如在[OpenCores.org](http://www.opencores.org)上。

编辑：我刚刚发现这个 Xilinx 论坛条目[理解 DVI/HDMI 和 Atlys](http://forums.xilinx.com/t5/Spartan-Family-FPGAs/Limitations-of-XAPP945-on-the-Atlys-Board/m-p/165404#M12272)可能涵盖了您面临/即将面临的一些问题。

# c# - 为什么，即：10^((77-109)/32)，不能在 Silverlight C# 中工作？

> ID：12770242
> 
> 赞同：-1
> 
> 时间：2012-10-07T15:44:06.560
> 
> 标签：c#, math

我正在尝试执行以下操作：

```
10^((77-109)/32) = 0,1 
```

在 C# 中：

```
MessageBox.Show((Math.Pow((((77-109)/ 32)), 10)).ToString()); 
```

输出：

```
1 
```

到底是怎么回事？我怎样才能得到正确的答案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T15:46:20.843

您正在使用导致 C# 使用整数算术的所有整数操作数；

(88-109)/32 =（四舍五入）0，并且 0^10 = 0（这是您的代码行将显示的内容，而不是 1）

在问题顶部获得所需结果的正确行是；

```
MessageBox.Show((Math.Pow(10.0, (77.0 - 109.0) / 32.0)).ToString()); 
```

其中，正确地，将显示 0.1。请注意更改为十进制数字而不是整数，以及将（错误）交换`x^10`为`10^x`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T15:58:44.033

你已经交换了参数`Math.pow`；您的代码正在提高`(88-109)/32`到 10 的幂，结果，您得到了意想不到的结果。交换参数（并将 88 更正为 77）将为您提供 的预期结果`0.1`，因为它将评估`10^-1`。

```
MessageBox.Show((Math.Pow(10, (77 - 109) / 32)).ToString()); 
```

# asp.net - 过滤时是否可能发生 XSS 攻击 如果服务器过滤，是否可以发送 XSS 攻击，但 <{space}tag> 允许并发送回？似乎浏览器不将 <tag>作为 HTML 标记 :( 服务器只更改输入。（点）到 、（逗号）和过滤器 谢谢。</tag>

> ID：12770244
> 
> 赞同：2
> 
> 时间：2012-10-07T15:44:18.200
> 
> 标签：asp.net, xss

如果服务器过滤，是否可以发送 XSS 攻击，但 <{space}tag> 允许并发送回？似乎浏览器不将 <tag> 作为 HTML 标记 :(

服务器只更改输入。（点）到 、（逗号）和过滤器

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:33:54.000

属性攻击仍然是可能的（打破 html 属性并添加 javascript 事件处理程序）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:40:42.220

正如另一个答案中提到的，XSS 攻击还有许多其他方式可以发生。一个好的资源是

[https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet)

[https://www.owasp.org/index.php/Testing_for_Cross_site_scripting](https://www.owasp.org/index.php/Testing_for_Cross_site_scripting)

具体例子：

```
<b onmouseover=alert('Wufff!')>click me!</b> 
```

# c# - ServiceStack Redis 如何实现分页

> ID：12770251
> 
> 赞同：1
> 
> 时间：2012-10-07T15:44:49.863
> 
> 标签：c#, redis, servicestack

我试图找出如何在 SS.Redis 中进行分页，我使用：

```
var todos = RedisManager.ExecAs<Todo>(r => r.GetLatestFromRecentsList(skip,take)); 
```

它返回 0，但我确信数据库不为空，因为`r.GetAll()`返回的是一个事物列表。这样做的正确方法是什么？

* * *

编辑：这是代码：

```
public class ToDoRepository : IToDoRepository
{

    public IRedisClientsManager RedisManager { get; set; }  //Injected by IOC

    public Todo GetById(long id) {
        return RedisManager.ExecAs<Todo>(r => r.GetById(id));
    }
    public IList<Todo> GetAll() {
        return RedisManager.ExecAs<Todo>(r => r.GetAll());
    }
    public IList<Todo> GetAll(int from, int to) {
        var todos = RedisManager.ExecAs<Todo>(r => r.GetLatestFromRecentsList(from,to));
        return todos;
    }
    public Todo NewOrUpdate(Todo todo) {
        RedisManager.ExecAs<Todo>(r =>
        {
            if (todo.Id == default(long)) todo.Id = r.GetNextSequence(); //Get next id for new todos 
            r.Store(todo); //save new or update
        });
        return todo;
    }
    public void DeleteById(long id) {
        RedisManager.ExecAs<Todo>(r => r.DeleteById(id));
    }
    public void DeleteAll() {
        RedisManager.ExecAs<Todo>(r => r.DeleteAll());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T16:02:52.123

由于我没有看到任何代码，我假设您在添加实体时没有维护“最近”列表。[这是GetLatestFromRecentsList](https://github.com/ServiceStack/ServiceStack.Redis/blob/master/tests/ServiceStack.Redis.Tests/Generic/RedisTypedClientAppTests.cs#L161)的测试用例：

```
var redisAnswers = Redis.As<Answer>();

redisAnswers.StoreAll(q1Answers);
q1Answers.ForEach(redisAnswers.AddToRecentsList); //Adds to the Recents List

var latest3Answers = redisAnswers.GetLatestFromRecentsList(0, 3);

var i = q1Answers.Count;
var expectedAnswers = new List<Answer>
{
    q1Answers[--i], q1Answers[--i], q1Answers[--i],
};

Assert.That(expectedAnswers.EquivalentTo(latest3Answers)); 
```

[Redis StackOverflow](http://www.servicestack.net/RedisStackOverflow/)是另一个使用最近列表功能来显示最新添加的问题的示例。它通过在创建新问题时调用[AddToRecentsList](https://github.com/ServiceStack/ServiceStack.Examples/blob/master/src/RedisStackOverflow/RedisStackOverflow.ServiceInterface/IRepository.cs#L249)来维护最近的问题列表。

# c# - 为什么需要在 UnitOfWork EF 上实现 Dispose 模式？

> ID：12770267
> 
> 赞同：2
> 
> 时间：2012-10-07T15:46:11.697
> 
> 标签：c#, asp.net-mvc, entity-framework, dispose, unit-of-work

微软教程[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp -net-mvc-application](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)建议实现 dispose 模式，如下所示：

```
private bool disposed = false;

        protected virtual void Dispose(bool disposing)
        {
            if (!this.disposed)
            {
                if (disposing)
                {
                    context.Dispose();
                }
            }
            this.disposed = true;
        }

        public void Dispose()
        {
            Dispose(true);
            GC.SuppressFinalize(this);
        } 
```

为什么我应该这样做，为什么我不能简单地处理上下文和足够的，如果我只使用会发生什么：

```
context.Dispose() 
```

微软的 dispose 模式的实现目标有哪些？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T19:39:19.690

你可以只用...

```
 public void Dispose() // IDisposable implementation
    {
        context.Dispose();
    } 
```

...没有虚拟`Dispose`重载，也没有私有`disposed`标志，因为

*   上下文本身检查是否`Dispose`已被调用，以便在第二次调用时不会发生任何事情并且不会引发异常
*   `Dispose`上下文类有自己的终结器，如果您没有显式调用，它将确保数据库连接在垃圾收集时释放

最后一点并不意味着您根本不需要调用`context.Dispose()`，因为垃圾收集器最终确定上下文的时间点是不确定的，它可能晚于您创建新上下文实例的时间点和可能与相同的实体一起使用它 - 这可能会导致一些麻烦。所以：总是显式地或通过`using`块来处理上下文。

我也怀疑这`GC.SuppressFinalize(this);`有什么影响，因为你的类和基类中都没有终结器，所以没有什么可以抑制的。

在我看来，您示例中的模式是一个片段（错过了终结器/析构函数的实现），如果您必须在类中处理自己的非托管资源，这可能很有用。但是对于您的 UnitOfWork 课程，您不必这样做。非托管资源（数据库连接）由上下文管理，您只需通过调用`context.Dispose()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T21:02:39.713

客户端代码应该只与存储库对话。存储库从调用代码中隐藏了实现细节（例如使用 DBContext、EF 和您正在使用的任何后端），这是存储库模式的主要目标之一。

这就是为什么对存储库的调用代码不能也不应该调用 context.dispose。它甚至不应该知道上下文。它只知道存储库并调用其 Dispose 方法（显式或最好使用**using**关键字）

# android - 注册屏幕和默认屏幕之间的 Android 启动器活动

> ID：12770270
> 
> 赞同：0
> 
> 时间：2012-10-07T15:46:31.343
> 
> 标签：android, android-intent, registration, homescreen

我正在开发一个需要注册屏幕的应用程序，

我最初将注册屏幕设置为默认值

```
<activity android:name=".RegistrationActivity" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

成功注册后，我应该让用户再也看不到这个屏幕

我的工作是对主实际屏幕做出新的意图

```
Intent i = new Intent(this, SettingsActivity.class);
startActivity(i); 
```

但它的作用是，当我按下返回时，我再次看到注册屏幕

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:27:49.357

试试这个：

```
startActivity(new Intent(getApplicationContext(), MyNewActivity.class)
    .setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK));
this.finish(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T15:48:18.870

在 AndroidManifest.xml 中为您的注册活动设置`android:noHistory="true"`活动条目。这将防止活动被保存在堆栈中，并且当您按下后退按钮时它不会显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T15:55:48.300

你所做的就是让你的主页成为你的“LAUNCHER”活动。然后检查用户是否已注册。如果用户未注册，请将他们发送到注册活动。当您的用户完成注册后，完成活动并在您返回时刷新主页。

保留应用程序访问过的页面的历史记录是个好主意，直​​到您了解如何管理应用程序堆栈。

# java - java 1.6中未给出阶乘递归异常

> ID：12770271
> 
> 赞同：0
> 
> 时间：2012-10-07T15:46:37.703
> 
> 标签：java, exception, recursion, factorial, throws

为什么我在以下代码中没有收到任何异常？运行此代码后，我在 test.fact(t.java:32) 处得到一个无限循环，未找到编译时错误。

```
class test
{

    int fact(int m) throws Exception
    {
        if (m==1)
        {
        return 1;
        }
    else
        return (fact ((m-1)*m));
    }
}

class main
{
    public static void main(String ar[]) throws Exception
    {
        test t = new test();
        System.out.println(t.fact(5));
    }
} 
```

虽然说例如我正在使用

```
return(a+b); 
```

它成功执行递归显示错误有什么问题？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T15:49:40.833

你在 fact 方法的返回值表达式中有错误。它应该是

```
 return fact(m-1) * m; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T16:16:22.730

另一种使用循环计算阶乘的方法（没有递归）：

```
int fact(int m) throws Exception
{
    int f = 1;
    for (int i = 0; i < m; f *= ++i);
    return f;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T15:57:36.613

```
 return (fact ((m-1)*m)); 
```

返回

```
fact(20) 
```

返回

```
fact (380) 
```

返回

```
fact (379*380) 
```

哪个 ....

它永远不会返回任何东西，并且应该使堆栈溢出（调用堆栈上使用了太多内存）。

```
 return fact(m-1) * m; 
```

应该管用。

我强烈建议您再次阅读基础知识和示例（例如 - [http://www.toves.org/books/java/ch18-recurex/index.html](http://www.toves.org/books/java/ch18-recurex/index.html)）

尝试自己编写递归树，以了解会发生什么。

# javascript - JavaScript：X.prototype.x 也将 x 添加到基类

> ID：12770272
> 
> 赞同：3
> 
> 时间：2012-10-07T15:46:45.983
> 
> 标签：javascript, polymorphism

我精通 C++，所以我在 OOP 方面有很好的背景，但我是 JavaScript 新手，我正在尝试了解如何在 JavaScript 中正确实现多态性。我已经阅读了许多与该主题相关的教程和 StackOverflow 问题，但没有一个详细解释如何正确地从基类*继承以及向子类**添加新成员*。

```
function Obj1() {}
function Obj2() {}
function Obj3() {}

Obj2.prototype === Obj3.prototype;  // false 
```

**好奇心＃1：** 如果`Obj2`和`Obj3`（以及，就此而言，`Obj1`）都继承自`Object`，为什么它们的原型不相同？每个人都收到了自己`Obj2`的*副本*吗？`Obj3`*`Object`*

 *```
Obj2.prototype = Object;
Obj2.prototype = Object;
Obj2.prototype === Obj3.prototype;  // true
Obj2.prototype = Obj1;
Obj3.prototype = Obj1;
Obj2.prototype === Obj3.prototype;  // true 
```

**好奇心#2：** 在这两种情况下，`Obj2`现在`Obj3`共享同一个原型。发生了什么变化？

```
Obj2.prototype.pi = function() {  return 3.14159;  }
Obj2.prototype.pi();  // 3.14159
Obj3.prototype.pi();  // 3.14159
Obj1.pi();  // 3.14159 
```

**真正的问题：** 更改原型`Obj2`也会更改原型`Obj3`和函数`Obj1`本身。这对这位 C++ 程序员来说是非常令人震惊的，尽管这正是我从上述语法中所期望的：毕竟，由于 和 的原型`Obj2`都`Obj3`等同于`Obj1`，因此对一个的更改将产生对另外两个相同的更改。不过，我想将*and*`Obj1`用作两者的基类，`Obj2`并在其上插入一个新函数，它*不会*以任何方式由or共享。我怎么做？`Obj3` *`Obj2`*`Obj1``Obj3`**

 ****当这些对象被实例化时，会产生**更多的好奇：****

 **```
var x = new Obj2();
x.pi();  // 3.14159
var y = new Obj3();
y.pi();  // 3.14159
var z = new Obj1();
z.pi();  // Error: pi() not defined on z. 
```

`Obj2`并且`Obj3`两者都有一个函数`pi()`，这意味着它们仍然共享一个包含函数的*基类*`pi()`。这个基类就是——*但是不*包含的`Obj1`实例，尽管有相反的证据！`Obj1`*`pi()`*

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T16:12:41.853

在你的第一个证明中：

```
function a () {};
function b () {};

a.prototype === b.prototype; // false 
```

`prototype`您正在了解不是`Object`- 它不是基类的事实。它是一个对象，它又在原型上被扩展，具有`Object`.
并且任何测试`{} === {};`都将返回 false, ***always***，除非您正在测试指向同一个对象的两个指针：

```
var a = {},
    b = a;

a === b; // true 
```

之后您的继承 trainwreck 直接指向缺少这个概念，因为您已将所有三个函数设置为指向同一个对象（最初指向`Object`自身，然后指向`Obj1`的原型对象）。
A`prototype`是***live***，在对象构造之后对原型的任何更改都将反映在包含指向该对象的指针的对象中。

你已经给出了`Obj1`,`Obj2`和`Obj3`一个指向完全相同的对象的指针。
因此，对它们共享的原型对象的任何修改都将反映在它们所有构造的对象中，因为继承解析是实时发生的，当您尝试访问属性时（而不是生活在一些静态的、预编译的 GOTO状态）。

如果你想要子类化的能力，你可以这样做：

```
var A = function () {};
A.prototype.foo = function () {};
var a = new A();

var B = function () {};
B.prototype = a; // or new A(); -- an object which can live-lookup the prototype of A
// problem is, `constructor` on the prototype will now point to `A`, so...
B.prototype.constructor = B; // now b instanceof B should work in tests
B.bar = function () {};

var b = new B();
b.foo(); // A.prototype.foo
b.bar(); // B.prototype.bar 
```

但实际上，如果您尝试将其扩展得太远，您会发疯的。
在 JS 中更明智的做法是基于组件的对象构造和依赖注入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T15:50:49.800

该`prototype`属性也返回一个对象，它是对象的一个​​实例，但不是同一个实例，因此它们不是同一个对象，相等的比较自然会返回 false。

更详细地说，Obj1、Obj2 和 Obj3 都是函数和对象，它们的原型也是对象。在 C++ 术语中，将`prototype`属性视为指向另一个对象的指针，而不是类定义或基类。

对于 Obj2，您将声明一个单独的方法，如下所示：

```
function Obj2() {
    this.prototype = new Obj1();
    this.myOwnMethod = function (x) { ... }
} 
```

我试图用我自己的话来写一个关于 Javascript 中面向对象的很好的解释，但我认为这会花费太长时间:) 相反，我决定删除我写的半连贯的文本，并给出两个帮助我理解的指针它更深入，希望他们也会帮助你：

*   [面向对象 JavaScript 简介](https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript)
*   [Crockford 上 Javascript 演示系列](http://www.youtube.com/watch?v=ya4UHuXNygM&feature=BFa&list=PL62E185BB8577B63D)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-07T15:54:18.580

使用[ember](http://emberjs.com/)或[骨干网](http://backbonejs.org/#Model)或其他一些框架为您提取它。要让继承像你期望的那样工作，需要做很多事情。******

# haskell - 数据声明的类型类约束

> ID：12770278
> 
> 赞同：21
> 
> 时间：2012-10-07T15:47:38.870
> 
> 标签：haskell, types, typeclass

[显然，在数据声明[src]](https://stackoverflow.com/questions/2354707/in-haskell-is-there-num-a-infinity-a?rq=1#comment2333396_2354747)，[[src]](http://www.haskell.org/haskellwiki/Data_declaration_with_constraint)上放置类型类约束是一个坏主意。

我个人并没有遇到过将类型限制在我创建的数据类型中的愿望，但对我来说，为什么语言设计者“决定允许这是一个坏主意”对我来说并不明显。这是为什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-07T16:05:38.240

> 我个人并没有遇到过将类型限制在我创建的数据类型中的愿望，但对我来说，为什么语言设计者“决定允许这是一个坏主意”对我来说并不明显。这是为什么？

因为它具有误导性，并且与实际有用的东西完全相反。

特别是，它*实际上并没有*按照您可能期望的方式限制数据类型中的类型。它*所做的是对**数据构造函数本身*设置类约束，这意味着在构造值时需要满足实例......但仅此而已。

因此，例如，您不能简单地定义具有`Ord`约束的二叉搜索树，然后知道任何树都有可排序的元素；查找和插入函数本身仍然需要一个`Ord`约束。您所要阻止的只是构建一个“包含”某些无序类型的值的空树。就模式匹配而言，对包含的类型完全没有约束。

另一方面，Haskell 的工作人员并不认为明智的版本（人们倾向于假设提供的数据类型上下文）是一个坏主意！事实上，对[使用 GADT 语法声明](http://www.haskell.org/ghc/docs/latest/html/users_guide/data-type-extensions.html#gadt-style)的数据类型（广义代数数据类型，在 GHC 中使用`GADTs`语言 pragma 启用）的类约束确实以明显的方式工作——你需要一个约束来*构造*值，并且有问题的实例也存储在 GADT 中，因此您不需要约束来处理值，并且 GADT 构造函数上的模式匹配允许您使用它捕获的实例。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-07T17:03:17.727

在数据类型上添加类型类约束实际上并不是一个坏主意 - 它非常有用，并且不会破坏您的其他代码。

坏处在于人们经常期望他们可以使用数据类型来原谅他们对使用数据类型的函数施加约束，但事实并非如此。（您可能会争辩说隐式约束可能会导致问题。）

对数据类型施加约束实际上是将其置于提及受约束类型的所有构造函数上。就像带有约束的普通函数一样，如果使用构造函数，则必须添加约束。我认为这是健康和光明正大的。

它*确实*确保您不能将数据放入您的数据类型，除非您可以用它做某些事情。它很有用。你不会通过使用一个编程失礼来创建一个编程失礼，这不是一个坏习惯，它不像他们想要的那么可爱。

“允许的坏主意”可能是因为 GADT 确实是他们想要的。
如果 GADT 最早出现，他们就不会这样做。

我认为两者兼而有之并不是一件坏事。如果你想要一个状态操作函数，你可以使用一个永久显式传递的参数，或者你可以使用一个 monad 并使其隐式。如果您想要对数据进行约束，您可以在数据声明中使用永久显式约束，或者在 GADT 中使用隐式约束。GADT 和 monad 更复杂，但它不会使显式参数或数据类型约束出错。

# android - 默认 HTTP 请求在 Android 4.0.4 上不起作用

> ID：12770286
> 
> 赞同：0
> 
> 时间：2012-10-07T15:49:10.690
> 
> 标签：android

我正在使用以下代码在 Android 应用程序中执行 HTTP 请求：

```
 try 
    {
        HttpPost post = new HttpPost(<URL>);
        HttpClient client = new DefaultHttpClient();
        HttpResponse response = client.execute(post);
        HttpEntity entity = response.getEntity();
        String responseText = EntityUtils.toString(entity);

        parseResponce(responseText);
    } 
    catch (Exception e) 
    {
        Log.e("http post error : ", e.getMessage());
    } 
```

该请求适用于 android 2.3，但我没有在 Android 4.0.4 中收到响应。为什么不？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:55:56.587

看看这篇[**博文**](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)。

问题很可能是您在主 UI 线程上执行了可能代价高昂的操作。无法知道 HTTP 请求可能需要多长时间，因此您应该使用`AsyncTask`例如 .

这适用于 Gingerbread 但不适用于 ICS 的原因是因为 Android 4.0 对 UI 线程的滥用更加严格（如果滥用它，它甚至会导致应用程序崩溃）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T15:52:24.313

我猜您遇到了麻烦，因为您在 UI 线程上执行网络操作。尝试使用 AsyncTask 或 Java 线程框架。

# powershell - 如何在Powershell中设置schedule.service“无论用户是否登录都运行”？

> ID：12770293
> 
> 赞同：2
> 
> 时间：2012-10-07T15:49:46.467
> 
> 标签：powershell, scheduled-tasks

我需要使用带有“无论用户是否登录都运行”的 Powershell 创建一个计划任务。

我使用以下代码创建了一个任务，我检查了settings、principal、triggers和action的成员，但没有找到我需要的设置。

```
$service = new-object -com("Schedule.Service")
$service.connect($servername)
$rootFolder = $service.Getfolder("\")
$taskDefinition = $service.NewTask(0) 
$settings = $taskDefinition.Settings
$principal =  $taskDefinition.Principal
$triggers = $taskDefinition.Triggers
$Action = $taskDefinition.Actions.Create( 0)
$rootFolder.RegisterTaskDefinition( $taksName, $taskDefinition, 6, $taskRunAsuser , $taskRunasUserPwd , 0) 
```

有谁知道这是怎么做到的吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T23:03:14.613

它是`RegisterTaskDefinition()`方法中的最后一个参数...将其从 0 更改为 1。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa382577(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa382577(v=vs.85).aspx)

# string - 以固定顺序对选定部分进行排序 - 空间不受限制

> ID：12770294
> 
> 赞同：0
> 
> 时间：2012-10-07T15:50:00.053
> 
> 标签：string, algorithm, sorting, data-structures

我有一个为烟雾测试程序编写的 DSL。在程序运行结束时，另一个程序会拾取它并生成 PDF 报告。（选择DSL主要是为了在不同格式之间切换）

在标题页之后，将显示测试套件结果的摘要。所以，我在那里放了一个占位符。

```
add table:summary header="Summary" columns: 2 
```

然后，在每个测试用例的末尾，我在该表中插入一行，如下所示：

```
add row table:summary values: "Entitlements Test, PASS" 
```

由于表声明和行是分散的，我想在 DSL 解析器运行它之前将它们全部分组，DSL 解析器会立即对每一行执行操作。

有没有更好的方法将行与表分组并按照程序编写的顺序（时间）。

我已经打破了几天的头，但找不到比这些蹩脚的想法更好的方法：

（如果我想在报告中引入更多表格，我所有的解决方案都很糟糕）

1.  将文件作为字符串列表加载到内存中。将指针放在第一个表索引上，进一步循环（通过整个列表）并在表声明的下一个索引中插入行，将列表的其余部分向下推 - 每行 0(n) :-( 在整个列表之后已经遍历完，寻找下一个表指针，重复这个过程，如果列表已经到了末尾，没有碰到另一个表，我们就完成了。我想平衡树比这里的列表更好。

2.  在“添加表”之前添加一个前缀，例如“t1”，行为“t1r1”、“t1r2”，并在解析器运行之前对 DSL 进行预处理。

3.  选择所有以“添加表”和“添加行”开头的行，将其存储在有序列表中。对于每个表，过滤表的相关行，做固定顺序比较。[https://discursive.atlassian.net/wiki/display/CJCOOK/Fixed+Order+Comparison](https://discursive.atlassian.net/wiki/display/CJCOOK/Fixed+Order+Comparison)（我还没有看到它在内部做了什么）。

整个文件最多不会运行超过几千行，并且报告过程本身就是一个专用过程。因此，空间不应成为限制因素。

整个 DSL 是这样的：

```
add header: "Smoke Testing Report for ..... (app name)"
add subheader: "on .... (date)"
add table:summary header="Summary" columns: 2
add title : "Login page"
add screenshot : "C:/projects/SmokingCPOII/geb-reports/Into_Login_page.png"
newpage
...
...
add title : "Entitlements Before Submit"
add screenshot : "C:/projects/SmokingCPOII/geb-reports/Entitlements Before Submit.png"
newpage
add title : "End"
add screenshot : "C:/projects/SmokingCPOII/geb-reports/end.png"
newpage
...
...
add row table:summary values: "Entitlements Test, Pass" 
...
...
add row table:summary values: "Another Test, Pass"
...
...
add row table:summary values: "Yet Another Test, Fail"
... 
```

（由于该程序尚未向任何人展示，我可以随意更改 DSL 以我想要的方式。但是，如果我们可以使 DSL 尽可能具有人类可读性，那就太好了）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T19:21:12.773

我不确定我是否正确理解了您的要求，但我想出了这个简单的概念验证，这对我来说似乎相当快。请注意，它不是用 Java 编写的 :(

```
 awk '/^add row table:/{printf "%06d|%s\n", hash[$3], $0; next}
      /^add table:/{hash[$2]=NR}
                   {printf "%06d|%s\n", NR, $0}' data |
 sort -sn |
 cut -f2 -d'|' 
```

“算法”很简单：保留一个从表名到行号的哈希表。每次看到新的表定义时，将当前行号插入到哈希表中。对于除行之外的每一行`add row`，输出行号作为该行的前缀；对于`add row`行，在哈希表中查找表名并使用它而不是行号。然后使用稳定排序对输出进行排序。[注 1 和 2]

我用这个数据文件测试了它，它有两个表：

```
add header: "Smoke Testing Report for ..... (app name)"
add subheader: "on .... (date)"
add table:summary header="Summary" columns: 2
add title : "Login page"
add table:other header="Other" columns: 1
add screenshot : "C:/projects/SmokingCPOII/geb-reports/Into_Login_page.png"
newpage
... 1
... 2
add title : "Entitlements Before Submit"
add screenshot : "C:/projects/SmokingCPOII/geb-reports/Entitlements Before Submit.png"
newpage
add title : "End"
add screenshot : "C:/projects/SmokingCPOII/geb-reports/end.png"
newpage
... 3
add row table:other values: "Other 1"
... 4
add row table:summary values: "Entitlements Test, Pass" 
... 5
... 6
add row table:other values: "Other before 2"
add row table:other values: "Other 2"
add row table:other values: "Other after 2"
... 6a
add row table:summary values: "Another Test, Pass"
... 7
... 8
add row table:summary values: "Yet Another Test, Fail" 
```

它产生了：

```
add header: "Smoke Testing Report for ..... (app name)"
add subheader: "on .... (date)"
add table:summary header="Summary" columns: 2
add row table:summary values: "Entitlements Test, Pass" 
add row table:summary values: "Another Test, Pass"
add row table:summary values: "Yet Another Test, Fail"
add title : "Login page"
add table:other header="Other" columns: 1
add row table:other values: "Other 1"
add row table:other values: "Other before 2"
add row table:other values: "Other 2"
add row table:other values: "Other after 2"
add screenshot : "C:/projects/SmokingCPOII/geb-reports/Into_Login_page.png"
newpage
... 1
... 2
add title : "Entitlements Before Submit"
add screenshot : "C:/projects/SmokingCPOII/geb-reports/Entitlements Before Submit.png"
newpage
add title : "End"
add screenshot : "C:/projects/SmokingCPOII/geb-reports/end.png"
newpage
... 3
... 4
... 5
... 6
... 6a
... 7
... 8 
```

* * *

注意 1：当遇到添加行时，最好检查以确保表名存在。

注意 2：可以同时保留`add row`哈希表中的行号和行数，每次看到一个新行时都会更新计数，在这种情况下，您不必担心稳定排序，虽然我认为找到稳定的排序不是问题，所以我会避免复杂化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:47:26.503

最后，我想我找到了一种使用 O(n) 空间方法的 O(n) 方式

创建一个空列表来保存排序值（sortedList）和一个空映射来存储表声明的位置

```
 1) Loop through each line of the file  
    2) If the line of the file is a table declaration, populate it into a tableMap with key as tablename and value as line number
    2a) Add the line to the sorted list
    3) If the line of the file is a row declaration, take the line number of the table (in the tableMap) and insert the row line in the next index (in the sorted list)
    3a) Increment the line number value for the table in the tableMap
    4) If this is any other line, just add it to the sorted list 
```

# ios - 设置权利文件 - 使用无效权利对可执行文件进行签名

> ID：12770298
> 
> 赞同：1
> 
> 时间：2012-10-07T15:50:34.857
> 
> 标签：ios, icloud, ios-provisioning, provisioning-profile, entitlements

签`"Use Entitlements File"`入 Xcode 后，当我尝试在手机上运行我的应用程序时，我收到以下错误：

```
The executable was signed with invalid entitlements.

The entitlements specified in your application’s Code Signing Entitlements
file do not match those specified in your provisioning profile. 
```

我正在尝试让 iCloud 正常工作，但似乎我在第 1 步失败了。我可以在模拟器中运行，但不能在我通过管理器自动配置的设备中运行。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T14:59:51.333

首先，您需要为您的应用程序 ID 提供特定的配置，以匹配其捆绑包 ID。即使只是用于开发，通用的 Team Provisioning 也无法测试 iCloud。

如果 App ID 是在未启用 iCloud 的情况下发布的，并在之后更新，则相关的 Provisioning 也必须更新。

通常，从 Xcode 的管理器提供更新无法带来正确的更新。在这种情况下，我建议您尝试直接从 iOS 开发者网站下载更新的配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-22T06:52:30.547

在我的例子中，我在我的 iOS 项目中添加了应用程序间功能，Xcode 自动建议在供应门户的应用程序 ID（捆绑包 ID）中添加此权限，我这样做了。在此之后，我认为它已修复，因为 Xcode 在应用程序间音频部分下显示所有刻度线，如下所示

1.  将“Inter-App-Audio”权限添加到您的 APP ID
2.  将“Inter-App-Audio”权利添加到您的权利文件中
3.  链接 AudioToolbox.framework。

实际上它并没有修复，我必须生成另一个启用了跨应用程序的分发证书，只有当我使用该分发证书签名时，我才能安装该应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:11:57.790

您需要在您的钥匙串中拥有开发人员证书和私钥，并且已创建的配置文件必须与此证书匹配。

# ruby-on-rails - 在 rspec/capybara 集成测试中，如何将 N 个（顺序）步骤实现为 N 个“it...do”示例？

> ID：12770301
> 
> 赞同：4
> 
> 时间：2012-10-07T15:50:41.500
> 
> 标签：ruby-on-rails, rspec, integration-testing, capybara

对于消息传递应用程序，我们有一些相当长的集成测试。现在，要运行给定场景，必须按特定顺序执行 20 或 30 个步骤，因为步骤 N 依赖于步骤 N-1 期间创建的数据。

因此，它们目前被组织在一个“它……做”的例子下：

```
describe WidgetController do
  describe "long opt-in opt-out scenario" do
    it "can complete the full sequence" do
      # create an account factory with trait account_type
      # create manager factory for the account
      # 5 people factories opt-in to that account
      # 1 person then opts out
      # a manager creates and sends a broadcast
      # the one opt-out does not get the message
      # the four opt-ins get the message
      # verify the format of the message 
```

每个步骤都有一个或两个断言来验证该步骤做了正确的事情。因此，目前我们在一个`it...do`示例中有 40 多个断言，这完全掩盖了实际测试的内容。

我们*可以*在每个步骤中插入一条`puts`语句来将描述推送到输出，但是如果我们的 N 步骤可以像 N rspec 示例一样处理肯定会更好。

有没有办法将 N 个顺序集成测试步骤组织为 N 个单独`it...do`的示例，以便 (a) 它们按顺序运行，并且 (b) 在步骤之间保持状态，以及 (c)（理想情况下）允许我们继续使用随机种子顺序我们运行的其他测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-27T12:04:56.270

我会将测试与准备测试分开以使其更清洁。这意味着在您的示例中，这是一项长期测试：

```
 # create an account factory with trait account_type
  # create manager factory for the account
  # 5 people factories opt-in to that account
  # 1 person then opts out
  # a manager creates and sends a broadcast
  --> no asserts until now, because that is test preparation 
```

您可以将其放入`before(:all)`然后进行单独的测试：

```
 before(:all) do
     # no asserts here, just the steps to do it
     # create an account factory with trait account_type
     # create manager factory for the account
     # 5 people factories opt-in to that account
     # 1 person then opts out
     # a manager creates and sends a broadcast

     # so in the end you got:
     @people = ...
     @manager = ...
     @opt-ins = ...
     @opt-out = ...
     @broadcast = ...
 end

 it "should not send the message to the opt-out" do
     # the one opt-out does not get the message
 end

 it "should send the message to the four opt-ins" do
     # the four opt-ins get the message
 end

 it "should have the right message format" do
     # verify the format of the message
 end 
```

此外，您还应该测试`before(:all)`单独测试中的步骤：

```
it "should be able to create an account with account_type" do
     # create an account factory with trait account_type
     # assert it worked
end

it "should be able to create a manager for an account" do
     # create an account factory with trait account_type
     # no assertion that it worked (that is tested before)

     # create manager factory for the account
     # assert manager got correctly created
end

it "should be able to opt-in to accounts" do
     # create an account factory with trait account_type
     # no assertion that it worked (that is tested before)

     # 5 people factories opt-in to that account
     # assert that it worked
end

it "should be able to opt-in to accounts" do
     # create an account factory with trait account_type
     # 5 people factories opt-in to that account

     # 1 person then opts out
     # assert that it worked
end 
```

有一个小的代码重复，但这使测试更简单，更清晰易读，这就是我要这样做的原因。

最后，要组织您的测试，请使用`shared_context`. 因此，如果您需要在不同的测试/文件中准备相同的东西，请将它们包含为`shared_context`：

```
# spec/contexts/big_message_broadcast.rb
shared_context "big message broadcast" do
    before(:all) do
         # no asserts here, just the steps to do it
         # create an account factory with trait account_type
         # create manager factory for the account
         # 5 people factories opt-in to that account
         # 1 person then opts out
         # a manager creates and sends a broadcast

         # so in the end you got:
         @people = ...
         @manager = ...
         @opt-ins = ...
         @opt-out = ...
         @broadcast = ...
     end
end

# spec/.../some_spec.rb
describe "long opt-in opt-out scenario" do
     include_context 'big message broadcast'
     it "should not send the message to the opt-out" do
         ...
     end
     ...
end 
```

这样你就可以简单地使用`include_context 'big message broadcast'`它来准备任何你喜欢的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-30T22:19:57.837

您可能想尝试使用[**Capybara Test Helpers**](https://capybara-test-helpers.netlify.app/)，这是一个封装和模块化集成测试的库。

通过将不同的步骤封装到单独的测试辅助方法中并给它们起描述性的名称，测试应该变得[更容易阅读](https://github.com/ElMassimo/capybara_test_helpers/blob/master/examples/rails_app/spec/system/cities_spec.rb#L24-L26)。

另一个优点是，一旦您将流程拆分为不同的方法，您只需[启用它](https://capybara-test-helpers.netlify.app/guide/advanced/debugging)即可获得增量输出。

![输出](../Images/8bdffdfc28056187e861f9b1aec1c804.png)

# python - Uwsgi 失败：Py_Initialize: Unable to get the locale encoding

> ID：12770302
> 
> 赞同：4
> 
> 时间：2012-10-07T15:50:46.060
> 
> 标签：python, django, uwsgi

我已经用 NGIX 和 django 配置了 uWSGI。

Uwsgi 失败并显示消息：

```
Fatal Python error: Py_Initialize: Unable to get the locale encoding
ImportError: No module named encodings 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T15:50:46.060

发现问题。我已经为 python 和 python3 安装了 uwsgi 插件。使用了 Python3 插件，而我系统的默认解释器是 python 2.6。

当我卸载 uwsgi python3 插件问题消失了。`plugins`您还可以通过设置选项来指定用于特定应用程序的插件。

# jquery - 不显眼的验证不断打破 MVC4

> ID：12770305
> 
> 赞同：5
> 
> 时间：2012-10-07T15:50:58.820
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4, unobtrusive-validation

我一直有一个奇怪的问题让我发疯。

在它运行良好之后，它突然出现以下错误：

```
Validation type names in unobtrusive client validation rules must be unique. The following     
validation type was seen more than once: required 
```

此错误首先在我在 Area/Admin/WebSites 中的一个控制器上开始。但是，一旦我的 auth cookie 过期，我就会在我的登录页面以及 EditFor(m=>m.UserName) 行上得到它。我梳理了我的代码，在任何可能远程命名相同的模型上的任何地方寻找重复的必需属性，但无济于事。

我什至进入了我的 LoginViewModel，从 UserName 中删除了 [Required]。错误移至 EditFor(m=>m.Password)。我也从 Password 中删除了Required，错误移动了RememberMe 行，但该成员甚至根本没有Required 属性。事实上，我在任何地方的任何其他课程中都没有其他任何东西，甚至远程命名为 RememberMe。

好吧，我放弃了，开始从头开始重建网站项目（不是解决方案的其余部分），但最终还是得到了同样的结果。

出于绝望，我从头开始重建整个解决方案，只复制 *.cs 文件并手动重新加载所有引用，认为某处存在重复引用。

一旦我到了再次构建 MVC4 项目的地步，我就分阶段进行，看看我是否能弄清楚发生了什么。它做得很好，加载并且我可以登录等，直到我开始添加区域。起初我只是将 Areas 文件夹直接复制到项目中（所有命名空间名称都相同，所以应该没问题）。但果然我开始以正确的方式得到这个错误。

好的，所以我开始以与最初创建控制器相反的顺序删除控制器。在我完全删除“区域”文件夹之前，该站点从未恢复正常。

对此进行测试，一旦我在项目中创建了一个区域文件夹，它就会中断。如果我使用 GUI 创建新区域，情况也是如此。

好的，回到绘图板。从头开始重新创建 MVC4 项目，这次是在解决方案之外，并且此时仅提取了对我的解决方案至关重要的 2 个关键 NuGet 包：Ninject.MVC3 和 Mvc3ControlsKit（来自 nuget 的用于 3 和 4 的包）。好吧，一切终于开始运作良好。此时，我的 Jquery 是 1.7.2 版本，带有 MVC4 附带的默认 Jquery UI。

在某些时候，我遇到了 jquery 对话框未关闭的问题，因此我安装了 JQuery 1.8.2 和来自 NuGet 的最新 JQuery UI。一切正常，直到我在我的管理区域中添加一个完全空白的控制器并且再次弹出此错误。

好的，再次回到绘图板......我分阶段重建它，在每个点进行测试。这次不安装最新的 JQuery 好东西。一切又开始正常工作。添加了一个新控制器，然后添加了两个。好的，制作此版本的有效副本并将其放在一边。将 Jquery 和 Jquery UI 更新到最新版本。在该区域添加一个新控制器，它仍然可以继续工作，令我非常沮丧。

我的实体都在使用 Fluent API 来配置我的实体，根本没有 DataAnnotatian 属性。有任何想法吗？我一直在等待它再次破裂。

**编辑：**

这是我刚刚发现的更多信息。我的登录部分视图中的这行代码发生了错误。我的模型是

```
public class LoginViewModel 
{
    [Required]
    [Display(Name = "User Name")]
    public string UserName { get; set; }

    [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [Display(Name = "Remember me?")]
    public bool RememberMe { get; set; }

    /// <summary>
    /// Role
    /// </summary>
    public string Role { get; set; }

} 
```

在视图中调用此行时出现错误：

```
@Html.TextBoxFor(m => m.UserName) 
```

此时，Ninject 接管并从 Ninject.Web.Mvc.Validation.NinjectDataAnnotationsModelValidatorProvider 类中的以下方法返回后立即发生上述不显眼的验证错误。此外，我已确认此方法已正确识别所需的验证并注入它们。此方法中没有发生异常，但之后发生了异常。

```
protected override IEnumerable<ModelValidator> GetValidators(ModelMetadata metadata, ControllerContext context, IEnumerable<Attribute> attributes)
    {
        var validators = base.GetValidators(metadata, context, attributes);
        foreach (var modelValidator in validators.OfType<DataAnnotationsModelValidator>())
        {
            var attribute = this.getAttributeMethodInfo.Invoke(modelValidator, new object[0]);
            this.kernel.Inject(attribute);
        }

        return validators;
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-09-30T12:36:21.063

解决方案（如果正在使用 Ninject）是解除绑定。

kernel.Unbind<ModelValidatorProvider>();

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T12:41:58.993

发生该错误是因为您尝试在项目中使用混合验证解决方案，并且两个提供商正在尝试为字段添加不显眼的必需验证，因此会引发重复问题。

确保您没有同时使用数据注释和流利的验证来对相同的属性执行相同的验证（如您的情况所要求的）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T00:08:44.277

对于这个问题，这不一定是每个人都满意的答案，但我通过将我的 DI 切换到 Unity 解决了我的问题。我已经确定，是的，这是因为，正如马克所说，这可能是由于混合验证。我在我的代码中使用 DataAnnotation；可能是 Ninject 在内部使用 Fluent Validation，但我知道的不够多，无法确定，也没有精力继续这个追求，因为我找到了一个让自己满意的答案。

我喜欢 Ninject，但在我的情况下，最新版本的 Unity 实际上同样易于使用，因为我所要做的就是添加一个文件 (bootstrapper.cs) 并从启动事件中调用 BootStrapper.BuildUnityContainer()。所以，我现在会坚持这个解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-07T07:50:14.213

我在使用流利验证的 MVC4 项目中遇到了同样的错误。我的错误是我使用了 .NotNull() 和 .NotEmpty( 对于同一个字段)：

```
RuleFor(i => i.SomeValue).NotNull().NotEmpty(); 
```

删除最后一个 .NotEmpty() 解决了这个问题。

# c++ - 无法打开二进制文件

> ID：12770308
> 
> 赞同：0
> 
> 时间：2012-10-07T15:51:12.147
> 
> 标签：c++, file-io

3 文件 I/O 流是全局声明的（在所有函数之外）

```
ifstream fin;
ofstream fout;
fstream file; 
```

这是发生问题的两个功能。由于某种原因，无法打开文件“quizquestions.dat”。由于该语句 exit(1); 正在执行，程序正在终止。问题编号未正确分配。对象“通用”是我的类问题的对象，它存储问题。代码被编译并且没有错误。

```
void questionnumber()
{
    int file_size=0;
    fin.open("quizquestions.dat",ios::in|ios::binary);
    fin.seekg(0,ios::end);
    file_size = file.tellg();
    if(file_size==0)
        universal.assignquestion(1);
    fin.close();
    int next_question = (file_size/sizeof(question)) + 1;
    universal.assignquestion(next_question);
}
void addquestion()
{
    ch='y';
    do
    {
        cout<<"Adding question now\n";
        cout<<"Please\n";
        universal.createquestion();
        questionnumber();
        fout.open("quizquestions.dat",ios::app|ios::binary);
        if(!fout)
            exit(1);
        fout.write((char*)&universal,sizeof(question));
        fout.close();
        cout<<"Your question is added\nYour question details are as follows"<<endl;
        universal.dispquestion();
        cout<<"Do you want to add more questions?(Y/N)\n";
        cin>>ch; cin.ignore();
    }
    while(ch=='y'||ch=='Y');
    if(ch!='y'||ch!='Y')
        dispsetting();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T16:22:14.667

尝试使用 fout.open(ios::app | ios:binary | ios::out);

# android - ActionBarSherlock 不将 R 导出到库

> ID：12770311
> 
> 赞同：0
> 
> 时间：2012-10-07T15:51:17.713
> 
> 标签：android, eclipse, intellij-idea, actionbarsherlock, android-4.2-jelly-bean

我已经用 Eclipse 将 ABS 构建到 JAR 库中，并尝试将它与 IntelliJ IDEA 一起使用。所有源代码都很好地导出，但不是资源 - 库中没有 R.java。最小 SDK 为 10，目标 - 16。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:04:38.237

AFAIK 你不能从 jar 文件中访问资源，你必须将资源单独添加到你的项目中。

# javascript - twitter bootstrap popover 显示但看起来很奇怪-rails

> ID：12770316
> 
> 赞同：2
> 
> 时间：2012-10-07T15:52:00.240
> 
> 标签：javascript, css, ruby-on-rails-3, twitter-bootstrap, popover

嗨，我正在使用 seyhunak / twitter-bootstrap-rails gem 的 twitter bootstrap popover 功能。

在我看来，我有以下代码：

```
<ul class="nav nav-pills subnav">
  <li>
    <a class="label-with-popover" data-content="popover content" data-title="popover title">Home Valuations:</a>
  </li>
</ul> 
```

我的 page.js.coffe 中的以下内容

```
jQuery ->
$('.label-with-popover').popover() 
```

弹出窗口出现但看起来像这样：

![Bootstrap 弹出框显示奇怪，有额外的垂直线穿过它](../Images/f4bac2da794c1fe28ba46eee8c53749f.png)

Bootstrap 弹出框显示奇怪，并带有额外的垂直线：有谁知道我该如何解决这个问题？

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T19:33:17.137

Bootstrap CSS 和您为项目编写的 CSS 之间存在大量冲突。将来，您应该考虑为您自己的通用类（如 ）使用命名空间`.arrow`，否则您的 CSS 将干扰使用此类通用类名的第三方库（如 Bootstrap）。

这是对您的小提琴的编辑：http: [//jsfiddle.net/5rT9t/1/](http://jsfiddle.net/5rT9t/1/)

我删除了on 的`margin`声明，on`.content`的`padding`值`.arrow`，并且，严格来说，为了演示，添加了一个容器 div 来抵消弹出框，这样你就可以看到整个事情。

# dns - 使用基于 DNS 的系统来解锁被阻止的 URL？

> ID：12770323
> 
> 赞同：2
> 
> 时间：2012-10-07T15:52:36.557
> 
> 标签：dns, youtube, ip

好的，我知道这可能是一个愚蠢的问题。

我期待着在我的国家解除对 Youtube 的封锁。我很确定它是一个简单的地址/url 块。我目前必须使用降低连接速度的代理。我尝试使用 Youtube 的 IP 打开它，但 Youtube 的 IP 实际上打开了 Google.com，所以它没有用。

我还在考虑在我的一个子域上创建一个 DNS 条目，它可能以某种方式指向 Youtube 的 URL，但这可能是不可能的，因为我根本不知道 DNS 系统是如何工作的。所以一些猜测可能会有所帮助。我不确定指向 Youtube 的其他一些隐藏 URL 是否存在。所以他们也可能会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T16:29:31.487

可能使用 VPN 连接到某些不阻止流量的提供商会有所帮助吗？例如： http: [//privateinternetaccess.com](http://privateinternetaccess.com)

# ios - CoreData 像在 sql 或 oracle 中一样查看

> ID：12770324
> 
> 赞同：0
> 
> 时间：2012-10-07T15:52:39.563
> 
> 标签：ios, core-data

我有一个核心数据模型，其中我有具有特定数据的对象，都在同一个实体中。对于我的 tableView 控制器，我想将具有相同日期的所有对象合并到一个对象中，例如 sql 或 oracle 中的视图。fetchedResultController 应该获取这些合并的对象并显示在 tableView 中。

这可能吗？每个人都有一个可行的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T16:22:12.287

我认为你不能这样做。您可以为每个模型简单地添加协议。例如

```
@protocol CellDisplayProtocol {
  - (NSString *)dateForShow;
} 
```

将此协议添加到每个模型并实现。模型将返回必要的数据；然后在“cellForRowAtIndex”中，您可以使用协议方法“dateForShow”来显示“日期”

不是合并，而是将所有请求结果放到一个数组中。

# php - Wordpress：如何按名称获取书签？

> ID：12770325
> 
> 赞同：0
> 
> 时间：2012-10-07T15:52:44.923
> 
> 标签：php, wordpress, hyperlink, bookmarks

我知道如何通过书签 ID 在 wordpress 中获取书签。

```
<?php $bookmark = get_bookmark(8); ?>
<a href="<?php echo $bookmark->link_url; ?>" target="_new">link</a> 
```

我怎样才能通过它的名字而不是它的 id 来获得它？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:07:18.283

除了`$wpdb`直接使用 SQL 查询之外，您还可以使用`search`-option [`get_bookmarks`](http://codex.wordpress.org/Function_Reference/get_bookmarks)：

```
$bookmarks = get_bookmarks(array('search' => 'link_name name')); 
```

但它不仅搜索 link_name 字段，还搜索其他字段：

> 像搜索字符串一样搜索 link_url、link_name 或 link_description

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:30:49.953

```
 <?php 

           $links = get_bookmarks( array('category' => "136"));
            foreach ( $links as $link ) {
            $linkname = $link->link_name;
            if ( substr($linkname, 0, 1) == "C"){
            echo '<ul><li><a title="'.$link->link_description.'" href="'.$link->link_url.'" target="_blank"></li></ul>';
            echo $link->link_name.'</a> <br/> ';}
            }

           ?> 
```

# java - Android Java - ArrayList 小写

> ID：12770335
> 
> 赞同：-3
> 
> 时间：2012-10-07T15:54:02.437
> 
> 标签：java, android

我在 ArrayList 中有一个字符串，我想在代码中的下一行使用它之前将其转换为小写。该字符串称为“结果”，并且在 ArrayList 方法中不接受 .inLowercase。我怎样才能将结果转换为小写，我试过这个没有运气解释：

```
result = result.toLowerCase(); 
```

我也试过这个：

```
Set<String> results2 = new results.toLowerCase(); 
```

不走运，是的，我是菜鸟.. =？

任何帮助都会很棒。先感谢您。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-07T16:21:55.083

这有效：

```
 String[] stringsArray = strings.toArray(new String[0]);
    for (int i=0; i<stringsArray.length; ++i)
    {
        stringsArray[i] = stringsArray[i].toLowerCase();
    }
    strings.clear();
    strings.addAll(Arrays.asList(stringsArray)); 
```

谢谢大家的帮助。特别是stackoverflow的人。=]

# algorithm - 如何计算给定字符串中对称字符串的最长长度

> ID：12770338
> 
> 赞同：1
> 
> 时间：2012-10-07T15:54:31.750
> 
> 标签：algorithm

> **可能重复：**
> [编写一个函数，返回给定字符串中最长的回文](https://stackoverflow.com/questions/1115001/write-a-function-that-returns-the-longest-palindrome-in-a-given-string)

例如，给定的字符串是“google”，那么最长的对称字符串是“goog”，因此答案应该是4。有什么快速的算法来解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T16:03:31.630

最长（常见）回文字符串搜索类似于最长子序列问题。

试试[这个](http://www.leetcode.com/2011/11/longest-palindromic-substring-part-i.html)n[这个](http://www.leetcode.com/2011/11/longest-palindromic-substring-part-ii.html)来详细了解它。

# javascript - 动态打开 Javascript 中定义的 radwindow

> ID：12770342
> 
> 赞同：3
> 
> 时间：2012-10-07T15:55:02.637
> 
> 标签：javascript, asp.net, radwindow

**目标：-**从服务器端，我需要在 IF 条件下自动打开一个 radwindow（在 aspx 页面的 JavaScript 中定义）。

**使用的代码：-**

在 aspx 页面中，我将 radwindow 定义为：-

```
<telerik:RadWindowManager Skin="WBDA" ID="AssetPreviewManager" Modal="true" 
EnableEmbeddedSkins="false" runat="server"  DestroyOnClose="true" Behavior="Close" 
style="z-index:8000">
    <Windows>   
        <telerik:RadWindow ID="DisclaimerAlertWindow" runat="server" Width="720px"    Height="220px" 
Modal="true" visibleStatusbar="false" VisibleTitlebar="false" keepInScreenBounds="true" title="Sourav">                                            
      </telerik:RadWindow>  
   </Windows>  
</telerik:RadWindowManager> 
```

在 JavaScript 中，定义了一个用于打开 radwindow 的函数：-

```
function openRadWindow() 
     { 
        var oWnd = radopen('DisclaimerAlert.aspx, 'DisclaimerAlertWindow'); 
        oWnd.set_title('Access Denied !');  
        oWnd.Center(); 
        return false; 
     } 
```

所以在aspx页面的服务器端，在页面加载事件中，检查了一个IF条件，然后我调用'openRadWindow（）'函数为： -

```
protected void Page_Load(object sender, EventArgs e)
{
if (fieldValue == "False") 
{ 
 string xyz = "<script type='text/javascript' lang='Javascript'>openRadWindow();</script>"; 
 ClientScript.RegisterStartupScript(this.GetType(), "Window", xyz); 
}
} 
```

**问题：-**

但是在运行它时，这些 JavaScript 错误即将出现：-

1.  对象不支持此属性或方法。
2.  'undefined' 为 null 或不是对象

请帮助如何实现我的目标。我完全被困住了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-14T09:45:25.180

您好，我想与您分享我仅在 Javascript 代码中创建 RadWindow 对话框的解决方案。

我们需要实现两种方法：一种用于初始化 RadWindow 对话框，最后一种用于接收关闭 RadWindow 后返回的参数。您可以在第二步中做您想做的事（例如回发，...）

这是我的代码：

初始化 RadWindow 对话框：

```
 function openMyDialog(url, args) {
    var manageWindow = GetRadWindowManager();
    if (manageWindow) {
        var radWindow = manageWindow.open(url, "<your_dialog_name>");
        if (radWindow) {
            radWindow.set_initialBehaviors(Telerik.Web.UI.WindowBehaviors.None);
            radWindow.set_behaviors(Telerik.Web.UI.WindowBehaviors.Move + Telerik.Web.UI.WindowBehaviors.Close + Telerik.Web.UI.WindowBehaviors.Resize);
            radWindow.setActive(true);
            radWindow.SetModal(true);
            radWindow.center();
            radWindow.set_visibleStatusbar(false);
            radWindow.set_keepInScreenBounds(true);
            radWindow.set_minWidth(640);
            radWindow.set_minHeight(480);
            radWindow.setSize(640, 480);
            radWindow.set_destroyOnClose(true);
            radWindow.add_close(closeMyDialog);//after closing the RadWindow, closeMyDialog will be called
            radWindow.argument = args;//you can pass the value from parent page to RadWindow dialog as this line
        }
    }
} 
```

关闭 RadWindow 对话框：

```
function closeMoveProjectDialog(sender, args) {
    var objArgs = args.get_argument();
    //objArgs variable stored the values returned from the RadWindow
    //you can use it for your purpose
} 
```

这个怎么称呼？您可以将 open 方法放入您期望的方法中。在我这边，我有一个如下所示的方法，我会这样调用 RadWindow：

```
function ShowForeignKeyFrontEditSingle(param1, param2){
    var url = "ForeignKeyFrontEditSingle.aspx";
    var objArgs = new Array();
    objArgs[0] = param1;
    objArgs[1] = param2;

    openMyDialog(url, objArgs);
    return;
} 
```

当然，你必须声明一个 RadWindowManager 控件

```
function GetRadWindowManager() {
    return $find("<%=your_radwindow_manager_control.ClientID%>");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T14:11:32.793

看看这里，它解释了如何使用 ScriptManager.RegisterStartupScript 方法：[http://www.telerik.com/help/aspnet-ajax/window-troubleshooting-javascript-from-server-side.html。](http://www.telerik.com/help/aspnet-ajax/window-troubleshooting-javascript-from-server-side.html)请注意 ScriptManager 的方法。还要查看 Sys.Application.Load 事件以防止您的代码执行得太早。

# android-layout - 如何在 axml 文件中指定我自己的 ViewGroup(Layout) 的属性？

> ID：12770346
> 
> 赞同：0
> 
> 时间：2012-10-07T15:55:25.773
> 
> 标签：android-layout, xamarin.android, android-xml, xamarin

我正在尝试将[Ravi Tamada](http://www.androidhive.info/2011/12/android-dashboard-design-tutorial/)的博客条目改编为 Mono for Android。

但在第 6 步，我停了下来。我该如何指定

```
<!-- Your package folder -->
<com.androidhive.dashboard.DashboardLayout ... 
```

属性，在 fragment_layout.xml 文件中？

我尝试在[Xamarin](http://support.xamarin.com/customer/portal/articles/532644-monodroid-how-to-use-custom-attributes-inside-a-layout-axml-file-)解决方案中指定一个包名称或在 java 表单中指定我的 VS2010 命名空间（MySolution.MyProject.MyFolder.DashboardLayout -> mysolution.myproject.myfolder.DashboardLayout），但结果是相同的错误：

设计模式如下：“无法加载布局：com.android.layoutlib.bridge.mockview 无法转换为 android.view.viewgroup”

问题是，我如何使用我的 DashboardLayout.cs (ViewGroup) 类作为属性，如 Ravi Tamada 的 java 示例。(6\. 步骤)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:40:38.190

不幸的是，这是 Mono for Android/the Designer 中的一个错误，并且已经在 Bugzilla 上提交：[https ://bugzilla.xamarin.com/show_bug.cgi?id=7680](https://bugzilla.xamarin.com/show_bug.cgi?id=7680)

希望这将很快得到修复，您可以自行抄送该错误，以便在任何更改时进行更新。

# java - 从非 UI 线程访问 UI 线程

> ID：12770352
> 
> 赞同：2
> 
> 时间：2012-10-07T15:56:11.640
> 
> 标签：java, swt, eclipse-rcp, jface

我正在尝试将剪贴板的内容复制到文本框，但我收到“无效线程访问”消息。

我在剪贴板上使用了一个监听器，如果有一些更改，它会通知我。

我创建了一个新线程来包装侦听器，但它似乎无法正常工作。

这是代码：

```
 public class ClipboardDialog extends TitleAreaDialog {

    // Local attributs
    private Text mTextClipboardcontent;

    public ClipboardDialog (Shell parentShell) {

        super(parentShell);

    }

    @Override
    protected Control createDialogArea(Composite parent) {

        // Creating display and controls

        setTitle("ClipBoard content");
        Composite area = (Composite) super.createDialogArea(parent);
        Composite container = new Composite(area, SWT.NONE);
        container.setLayout(new FormLayout());
        GridData gd_container = new GridData(GridData.FILL_HORIZONTAL);
        // gd_container.grabExcessVerticalSpace = true;
        gd_container.horizontalAlignment = SWT.LEFT;
        gd_container.verticalAlignment = SWT.TOP;
        container.setLayoutData(gd_container);

        // Group control
        Group grpInputData = new Group(container, SWT.NONE);
        FormData fd_grpInputData = new FormData();
        fd_grpInputData.bottom = new FormAttachment(0, 303);
        fd_grpInputData.right = new FormAttachment(0, 467);
        fd_grpInputData.top = new FormAttachment(0, 5);
        fd_grpInputData.left = new FormAttachment(0, 5);
        grpInputData.setLayoutData(fd_grpInputData);
        grpInputData.setText("Input Data");
        GridLayout gl_grpInputData = new GridLayout(4, false);
        gl_grpInputData.marginLeft = 4;
        gl_grpInputData.marginHeight = 0;
        gl_grpInputData.marginWidth = 2;
        gl_grpInputData.verticalSpacing = 10;
        gl_grpInputData.horizontalSpacing = 10;
        grpInputData.setLayout(gl_grpInputData);
        new Label(grpInputData, SWT.NONE);
        new Label(grpInputData, SWT.NONE);
        new Label(grpInputData, SWT.NONE);
        new Label(grpInputData, SWT.NONE);
        new Label(grpInputData, SWT.NONE);

        // Input control
        mTextClipboardcontent = new Text(grpInputData, SWT.BORDER);
        GridData gdContent = new GridData(SWT.LEFT, SWT.TOP, false, false, 1,
                1);
        gdContent.heightHint = 18;
        gdContent.widthHint = 250;
        mTextClipboardcontent.setLayoutData(gdContent);
        mTextClipboardcontent.setBounds(0, 0, 76, 21);
        mTextClipboardcontent.setTextLimit(8);

        new Thread(new Runnable() {
            public void run() {
                while (true) {
                    try {
                        Thread.sleep(1000);
                    } catch (Exception e) {
                    }
                    Display.getDefault().syncExec(new Runnable() {
                        public void run() {

                            Toolkit.getDefaultToolkit().getSystemClipboard()
                                    .addFlavorListener(new FlavorListener() {

                                        @Override
                                        public void flavorsChanged(FlavorEvent e) {

                                            String result = "";
                                            Clipboard clipboard = Toolkit
                                                    .getDefaultToolkit()
                                                    .getSystemClipboard();

                                            Transferable contents = clipboard
                                                    .getContents(null);
                                            boolean hasTransferableText = (contents != null)
                                                    && contents
                                                            .isDataFlavorSupported(DataFlavor.stringFlavor);

                                            if (hasTransferableText) {

                                                try {

                                                    // Getting the content of
                                                    // the ClipBoard
                                                    result = (String) contents
                                                            .getTransferData(DataFlavor.stringFlavor);

                                                    mTextContent.settext(result);
                                                } catch (UnsupportedFlavorException ex) {

                                                    // Loggin the exception
                                                    Log.LogError(
                                                            ex.getClass()
                                                                    .getCanonicalName(),
                                                            ex.getMessage());

                                                } catch (IOException ex) {

                                                    // Loggin the exception
                                                    Log.LogError(
                                                            ex.getClass()
                                                                    .getCanonicalName(),
                                                            ex.getMessage());
                                                }

                                            }
                                        }
                                    });

                        }
                    });
                }
            }
        }).start();

        return area;
    }

    /**
     * Create contents of the button bar.
     * 
     * @param parent
     */
    @Override
    protected void createButtonsForButtonBar(Composite parent) {
        Button mBtnOK = createButton(parent, IDialogConstants.OK_ID,
                IDialogConstants.OK_LABEL, true);
        mBtnOK.setEnabled(false);
        createButton(parent, IDialogConstants.CANCEL_ID,
                IDialogConstants.CANCEL_LABEL, false);
    }

    /**
     * Return the initial size of the dialog.
     */
    @Override
    protected Point getInitialSize() {
        return new Point(479, 400);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T15:57:54.490

您的风味侦听器在不是 UI 线程的线程中调用。

您需要使用（或，如您所愿）方法在`Runnable`传递给您的方法中执行其代码：`Display``asyncExec``syncExec`

```
Toolkit.getDefaultToolkit().getSystemClipboard().addFlavorListener(
    new FlavorListener() {

    @Override
     public void flavorsChanged(FlavorEvent e) {
         Display.getDefault().asyncExec(new Runnable(){
            public void run(){
              // do things on the UI thread
              String result = "";
              Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();
              Transferable contents = clipboard.getContents(null);
              ...
            }
         }
     }); 
```

runnable 将在 UI 线程上执行，从而避免您遇到的错误。

请注意，您可能不需要在 UI 线程中执行此操作：

```
 Toolkit.getDefaultToolkit().getSystemClipboard()
                                    .addFlavorListener( 
```

# css - Chrome 在慢速网站上强制侧边栏关闭

> ID：12770355
> 
> 赞同：-3
> 
> 时间：2012-10-07T15:56:22.217
> 
> 标签：css, performance, google-chrome, webkit

我开发了一个网站：[http ://dannalab.com](http://dannalab.com) *，*它运行良好。但是现在在 Chrome 中，侧边栏被推到了页面的下方？

客户还声称，由于使用了 Google Web 字体，该网站的加载时间非常长——对我来说似乎非常奇怪，有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:05:17.010

### 在这里找到问题。请*更新**CSS*：_

```
.side {
    padding: 25px 0 25px 10px;
} 
```

是的，给`float: left;`上面一个也有效。

### 解释

两侧的填充大于给定的左侧宽度。所以，它正在破裂并下降。如果减少填充，它将解决问题。

### 供参考：`style.css` **`Line: 236`**

### 截屏：

![铬预览](../Images/1974c209d9b66ede30d44a59dc302859.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T16:12:46.390

添加`float: left;`到`.side`您的 CSS

# clojure - 是否有一个 Clojure 函数接受一个映射并返回一系列交替的键和值？

> ID：12770359
> 
> 赞同：4
> 
> 时间：2012-10-07T15:57:13.803
> 
> 标签：clojure, destructuring

给定一个 map `{:a 1 :b [2,3]}`，是否有一个内置函数可以返回 sequence `(:a 1 :b [2,3])`。

用例是将选项映射应用于对参数列表的其余部分进行映射解构绑定的函数。[这是 core.cache 中的一个示例](https://github.com/clojure/core.cache/blob/10cc84973a7b97ada8fb56e9859ce101a477bde5/src/main/clojure/clojure/core/cache.clj#L545-564)。这是一个人为的例子来说明：

```
(defn make-car [& {:as options}] (assoc options :car true))
(make-car :color "red" :speed "fast")
; => {:car true, :speed "fast", :color "red"} 
```

现在，如果我们想单独管理选项并将`apply`它们管理到函数中，我们就会遇到问题：

```
(def options {:color "red" :speed "fast"})
(apply make-car options)
; => {:car true, [:speed "fast"] [:color "red"]} 
```

...因为`seq`地图的当然是其键值对的序列。这是我想出的最好的：

```
(apply make-car (interleave (keys options) (vals options)))
; => {:car true, :speed "fast", :color "red"} 
```

这太可怕了。我知道我可以创建自己的函数来执行此操作，但我很惊讶我没有找到内置的东西。如果没有内置的东西，那么我可能想避免在库代码中像这样解构参数列表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T16:37:53.200

这个怎么样：

```
(reduce concat {:a 1 :b [2,3]})
(:a 1 :b [2 3]) 
```

**根据 amalloy 的评论进行更新**。**Apply 效率更高（至少在 1.4 中），并且达到了相同的结果！**

 **```
(apply concat {:a 1 :b [2,3]})
(:a 1 :b [2 3]) 
```**

# ios6 - iPhone5 迁移：标签栏和内容视图之间的黑条

> ID：12770364
> 
> 赞同：0
> 
> 时间：2012-10-07T15:58:13.320
> 
> 标签：ios6, iphone-5

我尝试将应用程序迁移到 iPhone5/iOS6。我已经成功迁移了一些带有基本推荐（-568h@2x）的应用程序。

但是对于这个应用程序，底部工具栏和屏幕中间之间会出现一个黑条（参见附图）。

![黑条](../Images/968015fb069a9bc1c4531d2935635d3c.png)

通常，黑条应该用tableview填充......

当然，我已经在 Interface Builder 中正确设置了 tableview 约束...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:52:04.370

我修复了 pb ......不是直接的 iPhone5 问题，而是我的应用程序的 1 个组件对新维度的错误使用...... :(

# algorithm - 记忆和路径数组

> ID：12770370
> 
> 赞同：1
> 
> 时间：2012-10-07T15:58:57.163
> 
> 标签：algorithm, path, sum, memoization

我遇到的问题，我设法递归解决，但我希望有一个更优化的解决方案，可以使用记忆，但我不够熟练，不知道它应该如何在这种情况下工作。

问题：

有一个带有随机正整数的 2d 数组，并且给你随机的移动量。您从左上角开始移动，您可以进行的唯一移动是：左右下

您需要在最后一行结束并在途中收集尽可能多的东西。您不能重新访问某个职位。

记忆是关于存储值并在此基础上构建未来的结果，但是由于可以采取的路径很多，我该如何使用它呢？我应该使用它甚至是记忆还是我猜错了:)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:37:22.040

这基本上是一个动态规划问题。您实际上不必在每一步都考虑所有可能的路径，因为路径的细节不会影响未来的决策。对于每个单元格，您需要知道如果您朝特定方向移动并采取特定数量的移动，则可以收集的最大数量。没有其他任何东西会影响您的决定。

```
def bestAmount(x,y,direction,n_moves):
  # If this position is off the grid, then this isn't a valid state
  if x<0 or x>=width or y>=height:
    return None
  if n_moves==0:
    # We came to the last move.
    if y!=height-1:
      # If we're not at the bottom row then this isn't a valid path.
      return None
    # Otherwise, the final cell value is part of our total.
    return cellValue(x,y)
  if direction=='down':
    # If we came down to get to this position, then the next move
    # can be either  left, right, or down
    left = bestAmount(x-1,y,'left',n_moves-1)
    right = bestAmount(x+1,y,'right',n_moves-1)
    down = bestAmount(x,y+1,'down',n_moves-1)
    return max(left,right,down)+cellValue(x,y)
  if direction=='left':
    # If we moved left to get to this position, then
    # we can't go right, since we would be visiting the same position again.
    left = bestAmount(x-1,y,'left',n_moves-1)
    down = bestAmount(x,y+1,'down',n_moves-1)
    return max(left,down)+cellValue(x,y)
  if direction=='right':
    # same logic as for left, but opposite.
    right = bestAmount(x+1,y,'right',n_moves-1)
    down = bestAmount(x,y+1,'down',n_moves-1)
    return max(right,down)+cellValue(x,y)

def solve(n_moves):
  # Start by pretending we entered the starting cell by going down
  return bestAmount(0,0,'down',n_moves) 
```

如果 bestAmount 被记忆，那么你会得到一个相当有效的解决方案，因为可能性的数量是相对有限的。

Treating it as a dynamic programming problem will get you an even more efficient solution though.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-07T16:08:56.473

我想问题的描述有问题。起点在左上角，唯一允许的动作是：右下角。如果这样，也可以做memoization，可以用0代表右，1代表下，那么每条路径都可以用二进制字符串表示，然后可以用数组dp[int(string)]来记忆值。

# javascript - 如何检查javascript中的数组是否相等？

> ID：12770373
> 
> 赞同：10
> 
> 时间：2012-10-07T15:59:19.030
> 
> 标签：javascript, arrays, comparison

查看此代码示例[或转到 jsfiddle](http://jsfiddle.net/rdaPZ/)

```
function printRelation(a, b, out) {
    var text;
    if (a === b) {
        text = "a === b";
    } else if (a == b) {
        text = "a == b";
    } else {
        text = "a != b";
    }
    $('#' + out).text(text);
}

var a = [0, 0, 2], b = a;
printRelation(a, b, 'out1');
a = [0, 0, 2];
b = [0, 0, 2];
printRelation(a, b, 'out2'); 
```

我本来希望这两个测试都能输出`a === b`，但只有第一个可以。第二个输出`a != b`。谁能解释这种行为？如何有效地比较javascript中的数组？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-07T16:05:19.390

您可以使用 Underscore.js 库的 isEqual 方法。

[http://underscorejs.org/#isEqual](http://underscorejs.org/#isEqual)

> 在两个对象之间执行优化的深度比较，以确定它们是否应该被视为相等。

```
var moe   = {name : 'moe', luckyNumbers : [13, 27, 34]};
var clone = {name : 'moe', luckyNumbers : [13, 27, 34]};
moe == clone;
=> false
_.isEqual(moe, clone);
=> true 
```

* * *

## 更新

Lodash 的灵感来自下划线，但现在是更好的解决方案

[https://lodash.com/docs/#isEqual](https://lodash.com/docs/#isEqual)

> 在两个对象之间执行优化的深度比较，以确定它们是否应该被视为相等。

```
var object = { 'a': 1 };
var other = { 'a': 1 };

_.isEqual(object, other);
// => true

object === other;
// => false 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-07T16:10:36.523

使用[lodash](https://lodash.com/)。

```
_.isEqual([1,2],[1,2]) 
```

也适用于对象。

```
_.isEqual({a:1}, {a:1}) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-07T16:00:37.800

数组是javascript中的对象。并且不能`==`像比较字符串或数字时通常使用的那样比较对象。

还有很多其他方法可以比较数组，我最喜欢的是使用 JSON：

```
if ( JSON.stringify(a) == JSON.stringify(b) ) {
    // equal 
```

请注意，像在编写时那样将预先存在的对象分配给变量`b = a`只是复制引用。它们都指向同一个数组。

您必须做`b = a.slice()`才能获得真正的副本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-07T16:00:28.050

像您编写的 JavaScript 数组比较只是简单的对象引用比较。它们不是逐个元素的“深度”比较。

您可以编写自己的比较函数，以检查长度是否相同且元素是否相同，无论是否按顺序，都符合您的需要。*编辑*正如其他人指出的那样，有几个库包含数组比较函数。如果您找到一个符合您对“平等”的定义（并非不可能），并且您不介意考虑将该库合并到您的架构中，那可能是一个好主意。

# assembly - 为什么他们在 x86-64 中使用数字作为寄存器名称？

> ID：12770378
> 
> 赞同：3
> 
> 时间：2012-10-07T16:00:36.653
> 
> 标签：assembly, x86-64, cpu-registers, instruction-set

`rax`AFAIK x86-64 在从 Intel x86 ( ,`rcx`等)派生的寄存器中添加了许多通用寄存器，称为`r8`- `r15`。

他们为什么这样命名新的寄存器？为什么不遵循现有的命名约定并称它们为`rfx`，`rgx`...？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-07T19:17:35.050

对 CPU 寄存器进行编号是常态，几乎所有处理器都这样做。然而，8086 处理器很古老，早在 1976 年他们的晶体管预算就非常有限。实现一个只有 20,000 个有源晶体管的 16 位处理器是一项相当艰巨的任务。他们减少的一种方法是为寄存器提供专用功能。那时给它们起名字而不是数字是有意义的，暗示它们的用法。另一个影响是它旨在提供与 8080 处理器的一定程度的兼容性，它还具有具有专用功能的命名寄存器。

完全相反的设计是摩托罗拉 68000，三年后设计的采用更先进的工艺技术，允许双倍的晶体管预算。一个非常正交的设计，（几乎）每个寄存器都可以在任何指令中自由使用。并且与早期设计不兼容。它有编号的寄存器（D0-D7 和 A0-A7）。

x86 架构的扩展再次使用编号寄存器，如 R8 到 R15、MM0 到 MM7、XMM0-15、YMM0-15 等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-07-20T03:37:13.610

> 为什么不遵循现有的命名约定

**因为低 8 位名称不是任意序列或约定，所以它们是根据特定目的命名的。r8-r15 没有任何特定用途，[几乎没有](https://stackoverflow.com/questions/36529449/why-are-rbp-and-rsp-called-general-purpose-registers/51347294#51347294)隐含用途或特殊性**。所有最初的 8 个寄存器都至少有一条指令隐式使用该寄存器。有关名称的含义，请参见[https://www.swansontec.com/sregisters.html 。](https://www.swansontec.com/sregisters.html)（EDX=data 可能是一个反义词，但 A 代表累加器和 C 代表计数器显然不是巧合）。

AMD64 是在 2000 年左右设计的，旨在尽可能正交，因此它是一个更好的编译器目标（当值在哪个寄存器中无关紧要时，编译器会更容易）。

早在 2000 年就已经确立，在没有什么特别之处的情况下，有编号的寄存器是正常的；所有 RISC ISA 和许多最近的 CISC ISA 都这样做。（见@Hans的回答）

早期的 x86 扩展（尤其是 186 / 386）通过添加一个不需要 EAX/AX的多操作数使 ISA 比 8086 更加正交[`imul r,r/m`，`imul r, r/m, imm`](http://felixcloutier.com/x86/IMUL.html)`movsx`作为非 EAX 版本`cbw`（以及一条指令中的 8->32） ，尤其是 32 位寻址模式，允许任何寄存器用于任何内容，而不仅仅是`[bx|bp] + [si|di] + disp0/8/16`. 但是没有添加新的寄存器，并且在添加更灵活的方式时没有删除隐式使用，因此在现代 x86 中，名称只是对隐式使用的提醒，而不是您*必须*使用每个寄存器的用途。

* * *

**Dave Christie（AMD 的 AMD64 CPU 架构师）** [在 2000-sep-15 的 x86-64.org 邮件列表上发布了此内容](http://web.archive.org/web/20140413211300/http://www.x86-64.org/pipermail/discuss/2000-September/000283.html)，以回复有关重命名旧寄存器 R0..R7 或命名高位寄存器 UAX / 的讨论……

> **弄清楚如何最好地命名寄存器实际上是进行寄存器扩展最困难的部分之一**。保留 AX、BX 等低八位命名法的主要动机正是 Honza 所建议的 [*在线程的较早消息中*] - 大多数这些寄存器都有各种特殊用途，经验丰富的 x86 程序员非常熟悉，并且实际上体现在助记符上（A=accumulator, C=Count, SP=Stack Pointer, SI=Source Index, etc），帮助新手记住这些特殊用途。
> 
> 这种特殊情况功能的一些工件反映在高位寄存器中，但仅适用于指令编码^(1——)没有反映任何特殊功能，因此使用 UAX 等确实会产生误导。我们最终命名他们 R8-R15，承认有些人可能更愿意将较低的集合视为 R0-R7，但在我们的文档中从不使用这样的名称，以避免混淆。
> 
> 汇编器可以自由定义这样的别名，尽管正如 Alex 指出的那样，我们认为如果同时允许两组名称，它会增加混淆和错误的机会。因此，如果定义了此类别名，我建议以允许程序员仅启用一组或另一组的方式完成。

（我添加的脚注：高位寄存器的特殊情况是在寻址模式编码中：R13 就像 RBP，不能是没有位移的基数。R12 就像 RSP 并且需要一个 SIB 字节。但与 RSP 不同的是，它可以是索引。请参阅我关于[为什么 rbp 和 rsp 称为通用寄存器？](https://stackoverflow.com/questions/36529449/why-are-rbp-and-rsp-called-general-purpose-registers/51347294#51347294)）的答案的底部

x86-64.org 邮件列表存档在 gcc 和 (Linux) 内核开发人员以及 AMD64 架构师之间进行了一些有趣的讨论。如果您曾经想知道 x86-64 System V 调用约定是如何设计的，以及为什么它会传递前几个参数`rdi, rsi, rdx, rcx`，那么 Jan (Honza) Hubicka 是基于（动态）指令计数和（静态) SPECint 的代码大小，使用当时的 gcc 构建，可能喜欢内联`rep movs`小副本。请参阅[为什么 Windows64 使用与 x86-64 上的所有其他操作系统不同的调用约定？](https://stackoverflow.com/questions/4429398/why-does-windows64-use-a-different-calling-convention-from-all-other-oses-on-x86/35619528#35619528)用于邮件列表存档链接和更多详细信息。

* * *

**在那次讨论中没有人建议使用诸如`rfx`之类的字母。**

这本来是一种字母汤，一个单独的命名方案使得区分新旧寄存器非常容易。这让您可以看到指令何时需要 REX 前缀（代码大小越小越好）。eg`mov eax, edx`比 . 短 1 个字节`mov eax, r8d`。

而且，REX 前缀意味着您无法访问 AH/CH/DH/BH，因此如果您使用这些字节注册，您必须跟踪您在做什么。`movzx r8d, bl`（例如，您可以使用/ `movzx ecx, bh`/从 qword 解压缩字节`shr rbx, 16`，但不能`movzx r9d, bh`（REX.B 用于高 reg）或`movsx rcx, bh`（REX.W 用于 64 位目标。）

易于查看/记住哪些 regs 是新的对内核开发人员也很有帮助，例如，在来自 32 位用户空间的内核入口点中，有价值的用户空间状态仅在 eax..esi 中，而且很容易要记住 r8-r15 是 32 位代码无法触及的“新”寄存器。

**这在现在看来似乎微不足道，但是当 ISA 是新的时，所有的 asm 程序员都必须学习它。AMD 的架构师致力于 AMD64 的命名方案，IMO 做得很好。**

* * *

有关的：

*   [Intel 32 位和 64 位寄存器名称中的 E 和 R 前缀代表什么？](https://stackoverflow.com/questions/43933379/what-do-the-e-and-r-prefixes-stand-for-in-the-names-of-intel-32-bit-and-64-bit-r)
*   [为什么前四个 x86 GPR 的命名顺序如此不直观？](https://retrocomputing.stackexchange.com/questions/5121/why-are-first-four-x86-gprs-named-in-such-unintuitive-order)关于逆向计算：设计 8086 以方便 8080 asm 的源代码移植如何影响寄存器集的设计，
    以及[x86 的开端：英特尔 8080 与英特尔 8086？](https://retrocomputing.stackexchange.com/questions/6500/the-start-of-x86-intel-8080-vs-intel-8086/6504#6504)解释说`lahf`/`sahf`存在是为了更有效的 8080 兼容性。
*   [原始 x86 寄存器名称的来源](https://www.swansontec.com/sregisters.html)，例如 SI = 源索引。
*   我对[为什么 rbp 和 rsp 被称为通用寄存器的回答？](https://stackoverflow.com/questions/36529449/why-are-rbp-and-rsp-called-general-purpose-registers/51347294#51347294)每个 x86-64 整数寄存器的隐式使用和特殊性的（非详尽的）列表，包括寻址模式。（有趣的事实：RBX 在编译器生成的代码中为数不多的隐式使用之一是`cmpxchg16b`.）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-07-20T05:34:14.117

> 为什么不遵循现有的命名约定并将它们称为 rfx、rgx ...？

除了给出的答案：您假设 x86 CPU 的寄存器被命名为 ABCD-... 是不正确的：

8086 是在 M68000 之前推出的，几乎所有在 M68000 之前的 CPU 的寄存器名称都是按功能命名的。

8086 也是如此：

*   R0 = **A** X =**累加器**
*   R1 = **C** X =**计数器**
*   R2 = **D** X =**数据**
*   R3 = **B** X = (内存)**基础**
*   ...

另请注意，寄存器的名称不是AX-BX-CX-DX，而是AX-CX-DX-BX！

功能说明：

*   **累加器**：8 位 CPU 无法对任何寄存器（如`add dl, bl`）执行任何操作。相反，“ `A`”寄存器是操作的隐式“左”操作数：Z80 指令“ `add 30`”将`add al, 30`在 x86 语法中写为“”。`ax`旨在用于这种情况。并且某些操作 ( `mul`) 仍然隐式使用了`ax`寄存器。
*   **Counter** : 该寄存器用于`loop`和`rep`- 所以它用于计数。
*   **Base**：`bx`寄存器可用于寻址内存（例如`mov ax, [bx+40]`），而 x86 CPU 无法使用寄存器`ax`，`cx`或`dx`寻址内存（与 32 位变体不同`eax`，`ecx`并且`edx`- 但 8086 没有 32 位寄存器）。所以`bx`可能会在内存中保存一些数据结构的基地址，您可以访问该结构中的数据。

# compiler-construction - 破坏编译器

> ID：12770381
> 
> 赞同：-1
> 
> 时间：2012-10-07T16:00:53.330
> 
> 标签：compiler-construction, coding-style

我是否有可能编写破坏编译器的代码？是否意味着不良的编程实践会导致我最终可能会损害编译器并且我假设我编写的代码不是某种专门设计用于执行此操作的病毒？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:18:36.887

一般来说，编译器由静态代码组成。每次运行程序时，静态代码都会从头开始重新运行。因此，只要您无权访问它，就无法破坏编译器。

有一些编程语言可以让您使用编译器进行扩展。但是即使您可以扩展语言，编译器也可能会在每次运行时重新启动。此外，您不太可能以这种方式触发任何有害的事情。

存在编译器错误，它们可能会被触发。但通常这只会导致构建失败。

现在，如果您有一个`Makefile`，您可以更改用户有权访问的任何内容。因此，构建应用程序可能会引发不必要的副作用。安装脚本当然最有可能影响系统，因为它们通常以提升的权限运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T16:11:53.630

不。至少不是偶然的（当你提到“糟糕的编程实践”时，我假设你在谈论这个）

通常，无论您做什么都不会影响编译器二进制文件，因此即使您设法破坏内存，当编译器重新启动时，它也会完全“修复”。

这条规则的一个主要例外是，如果您真的更改了编译器二进制文件（例如，使用文件 I/O API 来重写可执行文件），但众所周知，这是很难做到的。

破坏编译器并不是那么容易。您可能必须在编译器中找到一个安全漏洞，然后利用它来更改结果。很难偶然做到，结果更难得到一个工作的可执行文件。

如果有人想强制编译器生成病毒，有更简单的方法可以做到这一点：

*   实际编写病毒代码并正常编译它。在这种情况下，编译器完全按照应有的方式工作，因为病毒源代码已正确转换为病毒二进制文件。
*   有意直接更改编译器二进制文件。

如果您担心从 Internet 下载代码并编译它可能会导致病毒，那么这种担心可能是有道理的。然而，正如我之前提到的，与产生/传播病毒的替代方法相比，正确利用编译器非常困难。无论哪种方式，出于实际目的，检查源代码应该足以消除这种担忧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T16:09:00.810

不，这是不可能的，除非编译器中有一个非常奇怪且不太可能由此类代码触发的错误。

# iphone - 如何在 UITableView 中配置特定单元格？

> ID：12770384
> 
> 赞同：0
> 
> 时间：2012-10-07T16:01:39.337
> 
> 标签：iphone, arrays, uitableview, configuration, cells

我的表格视图中有许多不同的单元格，它们通过数组填充。然后我在“cellForRowAtIndex”中配置单元格以使它们看起来正确。例如...

```
cell.textLabel.font = [UIFont fontWithName:@"STHeitiSC-Medium" size:18.0]; 
```

但是，这会影响表格视图中的每个单元格，我希望为特定单元格提供特定的配置和属性。有谁知道如何做到这一点？

谢谢！

更新：

只是想我会提到我最终发现这很有帮助： [Changing specific cells in uitableview](https://stackoverflow.com/questions/7750795/changing-specific-cells-in-uitableview)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:16:05.610

该方法`tableView:cellForRowAtIndexPath:`有一个`indexPath`参数（类型`NSIndexPath`）。当您调用时，`[indexPath row]`您将获得当前正在加载的行的索引。我想您可以使用此值为特定行设置正确的字体？

# android - Apple 的 Bonjour 协议是否适用于蜂窝连接？

> ID：12770388
> 
> 赞同：1
> 
> 时间：2012-10-07T16:01:50.517
> 
> 标签：android, ios, bluetooth, nfc, bonjour

所以这里有问题：

1.  Apple 的 Bonjour 甚至可以在蜂窝网络（3G、4G、LTE）上运行吗？
2.  如果是这样，发现的本地性如何？在同一个手机信号塔中发现所有内容？同一个供应商？整个互联网？

另外，顺便提一下，Android（库、操作系统等）上是否有任何 Bonjour 支持。

注意：我真的在寻找一种进行本地发现的方法，但是 iOS 没有可以与某些机器人一起使用的公共蓝牙 API（如果我错了，请纠正我，我真的希望我是）。我还阅读了有关通过蓝牙的 Bonjour 的信息，但我找不到任何有关它的资源。另外，NFC会是一种选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:37:08.613

要回答您的前两个问题：

1.  不; 理论上，同一子网上的其他订阅者可以看到彼此的服务，但 AFAIK 没有规定通过蜂窝网络发送多播数据包。即使有，网络提供商也可能会对其进行过滤以减少带宽使用。

2.  Bonjour 服务通常对同一链路本地网络（即同一子网）上的任何其他设备可见，假设路由器不过滤多播数据包。大多数国内路由器中继它们，但一些大型[例如大学和公司]网络放弃它们，再次减少对带宽的需求。

您可以使用[jMDNS](http://jmdns.sourceforge.net/)在 Android 上进行 Bonjour 服务广告/发现，它非常成熟（或者您甚至[可以自己滚动](http://datatracker.ietf.org/doc/draft-cheshire-dnsext-multicastdns/)，这并不难 :)

至于蓝牙和NFC，我不确定；听起来您需要为您宣传/消费的任何服务管理一些单点注册/协调。

# c# - C# 多线程工作然后等到全部完成

> ID：12770391
> 
> 赞同：2
> 
> 时间：2012-10-07T16:01:59.837
> 
> 标签：c#, multithreading

我正在研究小型 SSHClient。我有一个连接到不同计算机的客户端列表。我有一个要在这些计算机上运行的脚本。我想在不同的线程中并行运行它。我在这里受到启发： [Stackoverflow - 线程](https://stackoverflow.com/questions/2528907/c-sharp-spawn-multiple-threads-for-work-then-wait-until-all-finished)

这是我的一段代码：

```
 int toProcess, count = 0;
        ManualResetEvent resetEvent = new ManualResetEvent(false);
        toProcess = count = clients.Count;
        for (int i = 0; i < count; i++)
        {
                new Thread(delegate()
                {
                    var cmd = clients[i].RunCommand("./script.sh");
                    res += cmd.Result;
                    if (Interlocked.Decrement(ref toProcess) == 0)
                        resetEvent.Set();
                }).Start();
        }
        resetEvent.WaitOne();

        //do something 
```

对我来说，这段代码看起来不错。但有时（实际上是在大多数情况下）会发生在程序正确退出 for 循环后，它会正确到达行`resetEvent.WaitOne();`但之后，而不是等待所有线程完成并继续执行其余代码，它再次进入 new Thread(delegate()... 部分代码，因为变量 i 已经是 2（如果客户端列表中有两个客户端），我收到一个错误：

> 指数超出范围。必须是非负数且小于集合的大小。

我想问一下，尽管 for 循环完成了，它怎么可能创建另一个线程。以及如何避免这种情况？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T16:43:48.693

在我看来，这很混乱。我建议`Parallel.For`改用：

```
 int toProcess, count = 0;
 toProcess = count = clients.Count;
 object locker = new object();
 Parallel.For(0, count, i =>
 {
     var cmd = clients[i].RunCommand("./script.sh");
     lock(locker) res += cmd.Result;
 }); 
```

请参阅此链接：[Parallel.For](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.for.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T17:08:50.283

您可以使用并行 linq 查询并通过[Sum](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.sum.aspx)方法聚合其结果：

```
var totalResult = (from i in Enumerable.Range(0, client.Count).AsParallel()
                   let cmd = clients[i].RunCommand("./script.sh")
                   select cmd.Result).Sum(); 
```

使用[AsParallel](http://msdn.microsoft.com/en-us/library/ee835374.aspx)方法，我们创建尽可能多的线程，使用 Sum 方法，我们运行 linq 查询并获取每个结果以对它们求和

# javascript - javascript检查json是否为null

> ID：12770393
> 
> 赞同：8
> 
> 时间：2012-10-07T16:02:19.383
> 
> 标签：javascript, json

我使用以下 javascript。它写得很好，直到它得到一个没有值的结果。在控制台日志中它显示了这个

> 未捕获的类型错误：无法读取 null 的属性“文本”

但我下面的脚本似乎不起作用

```
 var checkCaption = photo.caption.text;
            if (checkCaption == null) {
                caption = 'meh';
            } else {
                caption = photo.caption.text;
            } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-07T16:06:31.393

在您的示例中，`photo.caption`为空，因此`photo.caption.text`在检查完成之前，您的代码会在调用中中断。

```
var caption;

if(photo.caption != null) { // Covers 'undefined' as well
  caption = photo.caption.text;
} else {
  caption = "meh";
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-05T01:31:58.513

在我的情况下，我使用 JSON.stringify 来检查我是否收到了来自 REST 服务器的 {} (null) 响应：

```
 if (JSON.stringify(response.data)=='{}') {
      //the response is null
 }
 else {
      //the response of JSON is not null
 } 
```

检查响应是否为空对我来说效果很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-16T13:32:36.510

对我来说，检查 json 对象的长度解决了这个问题 -

```
 if Object.keys(jsonobj).length == 0){
     // JSON object is null
    }
   else {
     // JSON object has data 
    } 
```

# node.js - 在 express 3.0 中使用 mustache.js 中的函数

> ID：12770395
> 
> 赞同：0
> 
> 时间：2012-10-07T16:02:32.083
> 
> 标签：node.js, express, mustache

我是 mustache.js 的新手，在 node.js 的 express 3.0 中使用它，我想使用辅助函数来格式化模板中的时间。

在 app.js 中：

```
app.locals({
  helper: {
    friendly_time: require('./libs/util').friendly_time
  }
}); 
```

friendly_time 是一个函数`function friendly_time(date){ ... }`，date 是一个`Date`对象。

在 index.hjs 中：

```
{{#articles}}
  <div class="org-articles">
    <ul class="org-articles-list">
      <li class="org-articles-item">
        <a class ="org-article-title" href="/o/{{title}}">
        {{title}}
        </a>&nbsp;-&nbsp;
        <span class="org-article-mtime">
          {{#helper.friendly_time}}
            {{mtime}}
          {{/helper.friendly_time}}
        </span>
      </li>
    </ul>
  </div>
{{/articles}} 
```

`articles`是一个包含对象的数组，例如：

```
{
    title: 'title',                           // a string
    mtime: new Date() // a js Date object
} 
```

然后进程抛出错误：

```
TypeError: Object {{mtime}} has no method 'getFullYear' 
```

我知道`articles[i].mtime`被视为一个字符串`{{mtime}}`，这会导致错误。但我不知道这有多正确。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T16:31:02.000

我认为您需要使用三个大括号，这样`mustache`就不会尝试清理输入数据。虽然我不肯定它对 Date 对象的作用。

```
{{#helper.friendly_time}}
    {{{mtime}}}
{{/helper.friendly_time}} 
```

另一种选择是更新`friendlyTime`，以便它也可以接受字符串并将其转换为日期对象，然后再尝试调用`getFullYear`.

```
function friendly_time(date){
    if(!date.getFullYear) {
        date = new Date(date);
    }

    ...
} 
```

# ios - 做一个iOS浏览器，这个菜单怎么叫？

> ID：12770397
> 
> 赞同：2
> 
> 时间：2012-10-07T16:02:47.777
> 
> 标签：ios, xcode, uiwebview, menu, xcode4.5

我正在 Xcode 4.5 中制作 iOS 网络浏览器，但我希望其中一个菜单看起来像这样。这个菜单怎么叫，我怎么做？图片在这里：

![在此处输入图像描述](../Images/4c50aa705c926795272214850b49673d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T16:10:05.667

那是一个 UIActionSheet。

你可以在这里阅读更多：http: [//developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UIActionSheet_Class/Reference/Reference.html](http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UIActionSheet_Class/Reference/Reference.html)

这是一个很好的教程：[http ://eureka.ykyuen.info/2010/04/14/iphone-uiactionsheet-example/](http://eureka.ykyuen.info/2010/04/14/iphone-uiactionsheet-example/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:48:53.310

您可以尝试新的开源[ShareKit 2.0](https://github.com/ShareKit/ShareKit)。

信息位于[https://github.com/ShareKit/ShareKit.git](https://github.com/ShareKit/ShareKit.git)

# xcode4 - Xcode 4：如何自定义文件模板和项目模板？

> ID：12770398
> 
> 赞同：3
> 
> 时间：2012-10-07T16:02:50.163
> 
> 标签：xcode4

在 Xcode 3 中，我们（通过反复试验）确定可以将系统模板复制到一个新位置（三个可能的位置，因为 Apple 一直在更改它），并对其进行自定义。

* * *

注意：在写这个问题时，我发现 StackOverflow 上关于这个主题的大多数答案都是不正确的 :(。Apple 更改了位置，大多数答案都给出了旧位置，它们不再起作用了。

* * *

在 Xcode 4.3 中，Apple 再次打破了这一切，现在文件模板不能被旧方法更改。通过反复试验，我发现您可以创建新的文件模板（见下文），但无法替换 Apple 现有的文件模板。

我们如何解决这个问题？Apple 的新文件模板简直令人震惊——它们插入虚假的“版权”行，甚至不遵循 Apple 自己的文档标准，更不用说其他任何人的 :(。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T16:32:04.670

这只是对该问题的部分答案，但对于其他任何人（如我）努力找出“正确”方式的人来说，这里有一个部分有效的解决方法。

今天，使用 Xcode 4.5.0，以下工作：

自定义文件/项目模板：

1.  取消隐藏您的库文件夹（如果您不知道如何操作，请使用谷歌，或者从终端执行此操作）
2.  创建一个文件夹：（`~/Library/Developer/Xcode/Templates`父文件夹应该已经存在 - Xcode4 自动创建它）
3.  找到您的 Xcode 4 副本，然后右键单击“显示包内容”
4.  在那里导航，直到找到“模板”子文件夹
    1.  有两个文件夹，一个用于 Mac，另一个用于 iPhone
    2.  麦克位置：`[Xcode4.app]/Contents/Developer/Library/Xcode/Templates`
    3.  手机位置：`[Xcode4.app]/Contents/Developer/Platforms/iPhoneOS.Platform/Developer/Library/Xcode/Templates`
5.  将内容复制/粘贴到您创建的“模板”文件夹中
6.  关键：重命名“文件模板”的每个子文件夹，否则苹果将忽略/删除您的模板

注意：在上面的第 2 步中，您还可以在以下位置创建该文件夹：

`~/Library/Application Support/Shared/Xcode/Templates`

...但这对我来说永远不起作用，并且新安装的 Xcode 4.5 不存在父文件夹，所以我怀疑 Apple 正在逐步淘汰它？（因为他们拒绝记录它，我只是在猜测）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T07:15:11.223

似乎项目模板可以在`~/Library/Developer/Xcode/Templates/Application/Project Templates`.

来源：[https ://github.com/AFNetworking/Xcode-Project-Templates](https://github.com/AFNetworking/Xcode-Project-Templates)

# visual-c++ - 新安装 Visual Studio 2012 时缺少头文件

> ID：12770400
> 
> 赞同：11
> 
> 时间：2012-10-07T16:02:56.920
> 
> 标签：visual-c++, visual-studio-2012

我刚刚安装了 Visual Studio 2012 并尝试在其上运行我的 C++ 项目。由于缺少“SDKDDKVer.h”、“windows.h”等，编译失败。

[我从Windows Software Development Kit (SDK) for Windows 8](http://msdn.microsoft.com/en-us/windows/hardware/hh852363.aspx)安装了 windows 8 sdk ，但是在使用默认组件（包括 windows 头文件）成功运行安装程序后，我在 C:\Program Files 下找不到任何包含文件夹（ x86)\Microsoft SDKs\Windows\v8.0 或 C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0A。我运行了 SDK 安装程序两次 + 尝试修复，但仍然找不到 Windows 头文件的任何痕迹。

有没有人遇到过类似的事情？

我错过了什么？我的操作系统是win7 x64。我在安装 VS2012 之前卸载了 VS2010。

谢谢，

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-07T16:59:50.780

这是[VS2012 使用 VS2010 的配置引起的错误](http://connect.microsoft.com/VisualStudio/feedback/details/762015/include-and-libraries-directories-not-setup-correctly-for-c-if-vs2010-already-installed)。

您必须手动修复包含库以解决此问题（通过属性管理器）。

所需的实质性修改是：

1.  添加`$(WindowsSDK_IncludePath)`到包含路径

2.  添加`$(WindowsSDK_LibraryPath_x86)`或添加`$(WindowsSDK_LibraryPath_x64)` 到库路径，具体取决于您的构建是针对 x84 还是 x64。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T19:55:14.460

当您将 VS2010 项目升级到 VS2012 时，也存在同样的问题。

对我来说，手动修复包含目录（请参阅上一个答案中的步骤 1）解决了这个问题。

# objective-c - 核心图：条形图的 x 轴上的自定义标签

> ID：12770403
> 
> 赞同：4
> 
> 时间：2012-10-07T16:03:02.673
> 
> 标签：objective-c, ios, charts, core-plot

我正在使用 Core Plot**条形图**来绘制公司增长率。我希望将公司的股票代码作为**x 轴上的标签，以**它们各自的条形为中心。不幸的是，我花了很多时间寻找一种正确居中 x 标签的方法，但使用我的代码没有成功。如何使 x 轴标签正确居中？

我的图表设置如下：

```
CPTBarPlot *barPlot     = [CPTBarPlot tubularBarPlotWithColor:[CPTColor blueColor] horizontalBars:NO];

barPlot.baseValue       = CPTDecimalFromInt(0);
barPlot.barOffset       = CPTDecimalFromFloat(0.5f);
barPlot.barWidth        = CPTDecimalFromFloat(0.5f);

double xAxisStart = 0;
double xAxisLength = self.companies.count;

double yAxisStart = 0;
double yAxisLength = 0.5;

CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;
plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(xAxisStart) length:CPTDecimalFromDouble(xAxisLength + 1.0)] ;
plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(yAxisStart) length:CPTDecimalFromDouble(yAxisLength)] ;

barPlot.plotRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(+0.0) length:CPTDecimalFromDouble(xAxisLength)] ; 
```

在下面的代码片段中，我尝试使用自定义标签，但没有成功，如下面的示例图表所示。

```
xAxis.labelingPolicy = CPTAxisLabelingPolicyNone;

NSMutableArray *customLabels = [[NSMutableArray alloc]init];

[self.companies enumerateObjectsUsingBlock:^(IBCompany *company, NSUInteger idx, BOOL *stop) {
    NSString *labelText = company.contrSymbol;
    CPTAxisLabel *label = [[CPTAxisLabel alloc] initWithText:labelText textStyle:xAxis.labelTextStyle];
    label.tickLocation = CPTDecimalFromDouble(idx + 0.5);
    label.offset = xAxis.labelOffset + xAxis.majorTickLength;
    label.rotation    = M_PI * 2;
    [customLabels addObject:label];
    }];
  xAxis.axisLabels = [NSSet setWithArray:customLabels]; 
```

![标签位置不正确的条形图](../Images/42bb76ec41c66bf967c08c3d6ea7231e.png)

请注意，我的条形图索引以**1**开头：

```
-(NSArray *)numbersForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndexRange:(NSRange)indexRange
    {
    if ( [plot.identifier isEqual:plotIdentifier] ) {;

    if ( fieldEnum == CPTScatterPlotFieldX ) {
        NSMutableArray *indexArray = [[NSMutableArray alloc] init];

        [self.companies enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
            [indexArray addObject:[NSDecimalNumber numberWithInt: idx + 1]];
        }];
        return [indexArray copy];
    }
    else if ( fieldEnum == CPTScatterPlotFieldY ) {
        // ..
    }
}
else return nil; // should be considered as ERROR 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T20:11:49.250

1.  您应该养成在数据源中为正确的绘图类型使用字段标识符的习惯。对于条形图，您应该使用`CPTBarPlotFieldBarLocation`and `CPTBarPlotFieldBarTip`。在这种情况下没有区别，但对于其他情节类型并不总是如此。例如，水平条形图的 x 和 y 坐标是相反的。

2.  数据源始终返回相同的数据集。您需要检查`indexRange`参数并仅返回请求的范围。

3.  x 轴的绘图范围介于 0 和 4 之间。标签位于 0.5、1.5 和 2.5 处。这`plotRange`就是弄乱条形间距的原因。将其设置为默认值`nil`，您应该获得所需的外观。从[plotRange 文档](http://core-plot.googlecode.com/hg/documentation/html/iOS/interface_c_p_t_bar_plot.html#a91e6813045c340ad81e62949c1f19b18)：

> 如果提供了绘图范围，则条形将在整个绘图范围内均匀分布。如果 plotRange 为 nil，则条形位置由 Cocoa 绑定或条形图数据源提供。如果绑定或数据源均未提供位置，则第一个条将放置在零 (0) 处，随后的条将位于连续的正整数坐标处。

# php - 将带有序列化的表单数据发送到 php 页面：$_POST 不获取数据

> ID：12770408
> 
> 赞同：0
> 
> 时间：2012-10-07T16:03:40.140
> 
> 标签：php, ajax, forms, post, serialization

我对这个问题感到疯狂。我尝试使用 ajax 以一种无需重新加载所有网页的方式从表单发送数据（我的网页包含一些用于生成产生流量的索引菜单的查询）；我创建了 sendForm 方法，它处理表单数据并将其传递给 php 页面进行处理。这是js代码：

```
function sendForm(){
    var http = false;
    http = new XMLHttpRequest();
    var ser = $(":input").serialize();
    http.open("POST", "http://localhost/redir.php" ,true);
    http.onreadystatechange= handleResponse();
    http.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
    http.setRequestHeader("Content-length", ser.length);
    http.setRequestHeader("Connection", "close");   
    http.send(ser);
    return true;        
} 
```

我的表单数据包含可变数量的输入，因为 for 循环中有一些 php 代码。

```
<form name="form" id="form" class="table table-hover"  method="post"> 

<?php while(.....))  { ?>
<tr style="line-height:40px">
<td><?php echo $home;?></td>

<td><?php echo $vis;?></td>                             
<td><input type="text" name="goal_h[]" class="input-mini" 
    <?php if ($sq[16] == "2"){ ?>  
    readonly value="<?php echo $goal_h;?>" 
    <?php }else if ($sq[16] == "3"){
    ?>  readonly value="-" 
    <?php }  else echo "value=\"-\""; 
    ?>  id="goal_h<?php echo $i?>[]" maxlength="2" size="2" />  
    <input type="hidden" name="id_sub" value="<?php echo $id_sub;?>" />
    <input type="hidden" name="id" id="id" value="<?php echo $id_d;?>" />
    <input type="hidden" name="data_gg" value="<?php echo $data_gg;?>" />
    <input type="hidden" name="n_gg" value="<?php echo $n_gg;?>" />
    <input type="hidden" name="id_p_home[]" id="idphome<?php echo $i?>" value="<?php echo $tmp_id_p;?>" /> 
    <input type="hidden" name="id_p_vis[]"  id="idpvis<?php echo $i?>" value="<?php echo $sq[10];?>" />
</td>
<td>
    <input type="text" name="goal_v[]" class="input-mini" <?php if ($sq[16] == "2"){ ?>  readonly value="<?php echo $goal_v;?>" <?php }else if ($sq[16] == "3"){ ?>  readonly value="-" <?php }  else echo "value=\"-\""; ?> id="goal_v<?php echo $i?>[]" maxlength="2" </td>   
<td><input type="checkbox" <?php if ($sq[16] == "2"){ ?> checked <?php } ?> id="sosp<?PHP echo $i?>" name="sosp[]" value="<?PHP echo $i?>"  onclick="cambiaStato(<?php echo $i?>);"/></td>
<td><input type="checkbox" <?php if ($sq[16] == "3"){ ?> checked <?php } ?> id="nd<?PHP echo $i?>" name="nd[]" value="<?PHP echo $i?>" onclick="cambiaStato(<?php echo $i?>);"/>
</td>
</tr>   
<tr style="line-height:40px">
<td><input type="submit" id="submit" name="submit" value="AGGIORNA IL PUNTEGGIO" onclick="sendForm()"   /></td>
<td colspan="5"></td>
</tr>     
    <?php } ?>
</form> 
```

如果我不使用 ajax 并仅使用 action=name_of_file.php，则此代码有效，但是当我尝试使用 sendForm() 方法时，在 redir.php 文件中我丢失了 $_POST 变量。

```
$home_id_p=$_POST['id_p_home'];
$vis_id_p=$_POST['id_p_vis'];
$goal_home=$_POST['goal_h'];
$goal_vis= $_POST['goal_v'];    
$sosp= (isset($_POST['sosp'])) ? $_POST['sosp'] : "99";
$nd= (isset($_POST['nd'])) ? $_POST['nd'] : "99"; 
```

然后我需要在 $home_id_p 上循环。

我也尝试了没有 serialize() 和 serializeArray() ： var ser = $(":input").serializeArray(); 但是有了这个我无法发送它，因为我收到一个错误“无效参数”

http.send(ser)

任何想法？

谢谢

# git - Git：将对象添加到存储库数据库的权限不足

> ID：12770410
> 
> 赞同：9
> 
> 时间：2012-10-07T16:04:12.753
> 
> 标签：git, ubuntu

每次我制作“git push origin master”时，我都有 git 错误：“将对象添加到存储库数据库的权限不足”。
我尝试了这里描述的解决方案：http: [//parizek.com/2011/05/git-insufficient-permission-for-adding-an-object-to-repository-database-objects/](http://parizek.com/2011/05/git-insufficient-permission-for-adding-an-object-to-repository-database-objects/)但它只在下次之前有效......
有什么永久的解决办法吗？

```
$ git push origin master
Counting objects: 5, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 1.19 KiB, done.
Total 3 (delta 2), reused 0 (delta 0)
error: insufficient permission for adding an object to repository database ./objects
fatal: failed to write object
error: unpack failed: unpack-objects abnormal exit
To ssh://user@git.code.sf.net/p/project/code
 ! [remote rejected] master -> master (n/a (unpacker error))
error: failed to push some refs to 'ssh://user@git.code.sf.net/p/project/code'

$ git config core.sharedRepository true

$ git push origin master
Counting objects: 5, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 1.19 KiB, done.
Total 3 (delta 2), reused 0 (delta 0)
error: insufficient permission for adding an object to repository database ./objects
fatal: failed to write object
error: unpack failed: unpack-objects abnormal exit
To ssh://user@git.code.sf.net/p/project/code
 ! [remote rejected] master -> master (n/a (unpacker error))
error: failed to push some refs to 'ssh://user@git.code.sf.net/p/project/code'

$ sudo chmod -R g+ws *
$ sudo chgrp -R andrey *
$ git push origin master
Counting objects: 5, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 1.19 KiB, done.
Total 3 (delta 2), reused 0 (delta 0)
remote: <Repository /git/p/project/code.git> refresh queued.
To ssh://user@git.code.sf.net/p/project/code
   acd82d2..f401c90  master -> master 
```

这是我使用的 Ubuntu：12.04.1，和 git：1.7.9.5

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T19:10:11.160

如“[推送到 GitHub 时出错 - 将对象添加到存储库数据库的权限不足](https://stackoverflow.com/questions/1918524/error-pushing-to-github-insufficient-permission-for-adding-an-object-to-reposi)”中所述，除了 git config 设置之外，您还需要：

*   首先`umask`为您的所有回购设置：（`umask 002`所以在您的服务器端）
*   然后将 git 组设置`rw`为您的解决方案中提到的，仍然在服务器端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-25T17:34:41.470

这通常发生在有人在嘘根时承诺使用 git。在该过程中创建的 .git/* 文件受到保护，不会受到外部更改的影响。

```
chmod -R 777 .git 
```

是一个快速修复。

# java - Facebook for Phonegap Java 错误 - 缺少超类

> ID：12770413
> 
> 赞同：-1
> 
> 时间：2012-10-07T16:04:31.130
> 
> 标签：java, android, facebook, cordova, phonegap-plugins

我正在使用 PhoneGap 2.1 版并尝试合并 facebook-phonegap 插件（[https://github.com/davejohnson/phonegap-plugin-facebook-connect](https://github.com/davejohnson/phonegap-plugin-facebook-connect)）

我按照分步教程进行操作，但最终遇到了这 3 个错误：http: [//i.imgur.com/Wlgkz.png](http://i.imgur.com/Wlgkz.png)

有什么想法可以解决它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:28:37.090

好的，所以解决 tis 的方法是升级到更高的 JDK 版本或删除 @Override 注释 :) 如果你不做every-Java dev，那么简单但令人沮丧

# c# - 使用位图设置 ApplicationBarIconButton 图标

> ID：12770416
> 
> 赞同：0
> 
> 时间：2012-10-07T16:04:40.500
> 
> 标签：c#, windows-phone-7, xaml

> **可能重复：**
> [如何从 C# 更改 ApplicationBar 上的图像？](https://stackoverflow.com/questions/6181367/how-to-change-the-image-on-the-applicationbar-from-c)

是否可以使用位图（或）设置`ApplicationBarIconButton`图标`ImageSource`？

（如果我“即时”生成图像以在 Windows Phone 7 的标准日历中的“今天”按钮上制作像图标一样的图标）

# mvvm - 通过 mvvm 将复选框列表绑定到 kendo ui 中的下拉列表

> ID：12770417
> 
> 赞同：1
> 
> 时间：2012-10-07T16:04:59.580
> 
> 标签：mvvm, kendo-ui

我的视图中有一个下拉列表，我想要在我的视图中。我想要在更改我的下拉列表时，一个 java 脚本模板绑定下拉列表。我写这个但不工作恳求帮助我。

```
 var  roles=[{
        code:1,
        roleName: "Admin",
        access: [ 
            { id: 1, description: "create", selected: true}, 
            {id: 2, description: "delete", selected: false}, 
            { id: 3, description: "update", selected: false}
        ]
    } ,{
        code:2,
        roleName: "user",
        access: [ 
            { id: 1, description: "create", selected: true}, 
            {id: 2, description: "delete", selected: true}, 
            { id: 3, description: "update", selected: false}
        ]
    }];
var viewModel = kendo.observable({
    Roles:roles,
    role:"Admin",
    accessRole:null    
});

kendo.bind($("#example"), viewModel); 
```

这是我的视图代码

```
<div id="example">
     Current Role&nbsp;&nbsp;&nbsp;:<span data-bind="text: role"></span>
    <br>
    <select type="text" id="RoleName" data-bind="source: Roles, value:role"  data-text-field="roleName">

   <select/>

        <ul data-template="row-template" data-bind="source: accessRole.access"></ul>

</div>

<script id="row-template" type="text/x-kendo-template">
    <li>
        <input type="checkbox" data-bind="checked: selected" />
        <label data-bind="text: description" />
    </li>
</script>
​ 
```

这是在线代码： http: [//jsfiddle.net/shahr0oz/K4X3T/19/](http://jsfiddle.net/shahr0oz/K4X3T/19/) ​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T19:36:53.477

我得到它。

```
<div id="example">
     Current Role&nbsp;&nbsp;&nbsp;:<span data-bind="text: role.roleName"></span>
    <br>
    <select type="text" data-bind="source: Roles,value:role}"  data-text-field="roleName">

   <select/>

        <ul data-template="row-template" data-bind="source:role.access"></ul>

</div>

<script id="row-template" type="text/x-kendo-template">
    <li>
        <input type="checkbox" data-bind="checked: selected" />
        <label data-bind="text: description" />
    </li>
</script>

​    var  roles=[{
        code:1,
        roleName: "Admin",
        access: [ 
            { id: 1, description: "create", selected: true}, 
            {id: 2, description: "delete", selected: true}, 
            { id: 3, description: "update", selected: false}
        ]
    } ,{
        code:2,
        roleName: "user",
        access: [ 
            { id: 1, description: "create", selected: false}, 
            {id: 2, description: "delete", selected: false}, 
            { id: 3, description: "update", selected: false}
        ]
    }];
var viewModel = kendo.observable({
    Roles:roles,
    role:roles[0]
});

kendo.bind($("#example"), viewModel); 
```

[http://jsfiddle.net/shahr0oz/psEVy/](http://jsfiddle.net/shahr0oz/psEVy/)

# c# - 窗口内的透明矩形

> ID：12770432
> 
> 赞同：0
> 
> 时间：2012-10-07T16:06:34.563
> 
> 标签：c#, wpf, transparency

我有最上面的全屏窗口

```
AllowsTransparency="True" WindowStyle="None" Topmost="True" WindowState="Maximized" Left="0" Top="0"
OpacityMask="#2B000000" Background="Black" Cursor="Cross" 
```

当用户按住 LMB 并移动鼠标时，我正在绘制矩形（它是选择，就像我的问题[Easest way to select screen region 中](https://stackoverflow.com/questions/12733669/easiest-way-to-select-screen-region)的屏幕截图一样）。

我想让矩形完全透明，以查看窗口后面的内容。但我不能让它比父窗口更透明。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T17:39:38.420

尝试类似下面的操作，并在某些鼠标事件处理程序中动态更改第二个 RectangleGeometry (selectRect) 的大小和位置。也许还可以将第一个 RectangleGeometry 的大小调整为您的屏幕大小。

```
<Window x:Class="TransparentRectangle.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            WindowStyle="None" WindowState="Maximized"
            AllowsTransparency="True" Background="Transparent">
    <Grid>
        <Path Fill="Black" Opacity="0.5">
            <Path.Data>
                <CombinedGeometry GeometryCombineMode="Exclude">
                    <CombinedGeometry.Geometry1>
                        <RectangleGeometry x:Name="screenRect" Rect="0,0,2000,2000"/>
                    </CombinedGeometry.Geometry1>
                    <CombinedGeometry.Geometry2>
                        <RectangleGeometry x:Name="selectRect" Rect="100,100,200,100"/>
                    </CombinedGeometry.Geometry2>
                </CombinedGeometry>
            </Path.Data>
        </Path>
    </Grid>
</Window> 
```

然而，一个问题可能是您不会在 CombinedGeometry 的排除部分中获得任何鼠标事件。为避免这种情况，您可以将鼠标处理程序附加到窗口（而不是路径）并为其提供*几乎*透明的背景。

```
<Window ... Background="#01000000" MouseMove=... etc>
    ...
</Window> 
```

编辑：一个更简单的解决方案可能是边框。您可以独立调整 BorderThickness 的四个分量。

```
<Grid ...>
    <Border BorderBrush="Black" Opacity="0.5" BorderThickness="100,100,200,400"/>
</Grid> 
```

# php - 选择并列出孩子和父母

> ID：12770436
> 
> 赞同：1
> 
> 时间：2012-10-07T16:07:01.543
> 
> 标签：php, mysql, sql, select

我需要以下复杂任务的 SQL 查询...

我需要从名为`parent_id`. 如果一行有 0`parent_id`表示它是一个类别（它也有`type`表示`cat`类别的列），如果一行有 1 或更多`parent_id`表示它是一个规则。`parent_id`规则的，是类别`rule_id`的。

包含一些数据的表结构： ![phpMyAdmin 表数据](../Images/49c1bef1bc95c66a7ea37e3245803818.png)

我需要以某种方式选择每个类别都有其子项。从图中我们可以得到：

```
Sample Category 1
   Sample rule 1
Sample Category 2 
```

我尝试了一些从这里找到的查询，但没有一个有效。

这是我最后尝试的：

```
'SELECT *
FROM ' . RULES_TABLE . ' AS parent
    LEFT JOIN ' . RULES_TABLE . ' AS child 
    ON child.parent_id = parent.rule_id 
WHERE parent.parent_id = 0
     AND parent.public = 1
ORDER BY parent.cat_position, child.rule_position'; 
```

它仅返回*示例规则 1*。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T16:23:24.467

试试这个小提琴[http://sqlfiddle.com/#!2/0a9c5/16](http://sqlfiddle.com/#!2/0a9c5/16)，下面的 sql 代码

```
SELECT c.rule_id, c.rule_title, GROUP_CONCAT(r.rule_title)
FROM RULES_TABLE AS c
LEFT JOIN RULES_TABLE AS r
    ON r.parent_id = c.rule_id
WHERE c.parent_id IS NULL AND c.public = 1
GROUP BY c.rule_id
ORDER BY c.cat_position, c.rule_position; 
```

故意省略代码的 php 化以保持语法突出显示，这似乎无论如何都不起作用

如果超过允许的最大 group_concat 大小，您可以增加它或使用以下版本，并在 php 中进行更多处理：

```
SELECT c.rule_id, c.rule_title, r.rule_title as r_rule_title
FROM RULES_TABLE AS c
LEFT JOIN RULES_TABLE AS r
    ON r.parent_id = c.rule_id
WHERE c.parent_id IS NULL AND c.public = 1
ORDER BY c.cat_position, c.rule_position; 
```

并且在 php 中，仅提供骨架代码，填写实际值，假设您使用 pdo 并且您的 pdostatement var 命名为`$query`：

```
$old_rule_id = null;
$rrt = array(); // will contain all r.rule_titles for a give c.rule_id
while( ($i = $query->fetch(PDO::FETCH_OBJ)) !== false ) {
    if( $old_rule_id != $i->rule_id ) {
        if( count($rrt) ) {
            echo ... all the data for previous rule from $rrt ...
            echo ... end of previous element ...
            $rrt = array(); // empty it to collect new data
        }
        echo ... start of current element use data from $i->rule_id and $i->rule_title ...
        $old_rule_id = $rule_id;
    }
    $rrt[] = $i->r_rule_title;
}
// the following is the same if from inside the while, minus reinitialization of $rrt;
if( count($rrt) ) {
    echo ... all the data for previous rule from $rrt ...
    echo ... end of previous element ...
} 
```

用有效代码替换...之间的东西

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-07T16:35:30.917

使用 FOR XML EXPLICIT，您可以获得分层列表。

试试这个：

```
SELECT 
 1 Tag,
 null Parent,
 '' [root!1!name],
 null [category!2!id],
 null [category!2!name],
 null [rule!3!id],
 null [rule!3!name]

UNION ALL 

SELECT DISTINCT 
 2 Tag,
 1 Parent,
 null,
 rule_id [category!2!id],
 rule_title [category!2!name],
 null [rule!3!id],
 null [rule!3!name]
FROM rules
WHERE parent_id = 0 and rule_type = 'cat'

UNION ALL 

SELECT  
 3 Tag,
 2 Parent,
 null,
 parent_id [category!2!id],
 null [category!2!name],
 rule_id [rule!3!id],
 rule_title [rule!3!name]
FROM rules
WHERE parent_id > 0 and rule_type = 'rule'

FOR XML EXPLICIT 
```

有关详细信息，请访问[http://msdn.microsoft.com/en-us/library/ms189068.aspx](http://msdn.microsoft.com/en-us/library/ms189068.aspx)

# uitableview - UITableView 出队未按预期工作

> ID：12770439
> 
> 赞同：0
> 
> 时间：2012-10-07T16:07:35.630
> 
> 标签：uitableview

当我向下滚动列表时，所有行都在那里，但它们会不断添加更多子视图，它们出现在可见框架上的次数越多

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *reuse = @"RuleCell";

UITableViewCell* cell = [tableView dequeueReusableCellWithIdentifier:reuse];

if (cell == nil){
    cell = [[UITableViewCell alloc] initWithStyle: UITableViewCellStyleDefault reuseIdentifier:reuse];
}
NSUInteger row = indexPath.row;
[self createCell: cell onRow: row];
return cell;
}

 - (void) createCell: (UITableViewCell*)cell onRow: (NSUInteger)row
{
UIImageView* bgImage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"cell_background_spade_active.png"]];
cell.backgroundView = bgImage;
cell.textLabel.hidden = YES;

UILabel* titleLabel = [[UILabel alloc] initWithFrame: CGRectMake(100, CGRectGetHeight(cell.frame) / 2, 200, 50)];
titleLabel.text = [[self.ruleList objectAtIndex: row] objectForKey: TitleKey];
titleLabel.backgroundColor = [UIColor clearColor];
[cell.contentView addSubview: titleLabel];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:13:47.483

我认为您需要执行`createCell:`仅在`if (cell == nil){`代码段中的几乎所有逻辑。应该在您当前调用`createCell:`的地方执行的部分只是获取对的引用`titleLabel`并设置其文本值。

为了澄清，这是我建议的修改类型（未经测试，但应该给出正确的想法）：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *reuse = @"RuleCell";

    UITableViewCell* cell = [tableView dequeueReusableCellWithIdentifier:reuse];

    if (cell == nil){
        cell = [[UITableViewCell alloc] initWithStyle: UITableViewCellStyleDefault reuseIdentifier:reuse];
        [self setUpCell: cell];
    }
    NSUInteger row = indexPath.row;
    UILabel *titleLabel = (UILabel *)[cell.contentView viewWithTag:42];
    titleLabel.text = [[self.ruleList objectAtIndex: row] objectForKey: TitleKey];
    return cell;
}

- (void) setUpCell: (UITableViewCell*)cell
{
    UIImageView* bgImage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"cell_background_spade_active.png"]];
    cell.backgroundView = bgImage;
    cell.textLabel.hidden = YES;

    UILabel* titleLabel = [[UILabel alloc] initWithFrame: CGRectMake(100, CGRectGetHeight(cell.frame) / 2, 200, 50)];
    titleLabel.tag = 42;
    titleLabel.backgroundColor = [UIColor clearColor];
    [cell.contentView addSubview: titleLabel];
} 
```

# android - Eclipse Juno - 无法附加 Android API 文档存档文件

> ID：12770442
> 
> 赞同：3
> 
> 时间：2012-10-07T16:07:50.607
> 
> 标签：android, eclipse

我正在尝试在我的 Eclipse Juno 中附加 Android API 文档存档文件 (docs-15_r02.zip)，如下面的快照所示（使用**Project -> Properties**）：

![附上文件](../Images/d8227471db3e0a05eb27d37497a894d5.png)

如果单击**Open in Browser** ，文档页面会从存档文件中成功打开。

当我单击**确定**时，遇到以下错误：

> 关联源时出错。有关详细信息，请参阅错误日志。

存档文档不会附加，也就是说，文档将从在线资源中获取。如果我重新启动 Eclipse，则会显示以下错误消息：

![重启eclipse后](../Images/4ee964b94209f476f5879fd878ed9c69.png)

如果我尝试单击、右键单击或展开我的 eclipse 项目（java 或 android），则会显示以下错误消息并且我无法使用 android 项目。现在，我必须再次重新创建 eclipse 工作区才能使用 eclipse。

> 在“初始化 Java 工具”期间发生内部错误。java.lang.NullPointerExcption

注意：我使用的是 Android 4.0.3，API 版本 15。但是，我可以使用类似的技术附加 JAVA API 文档。我多次尝试此过程来清理我的 Eclipse 工作区，但同样的问题一次又一次地被复制。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:44:56.430

只需转到您需要此 api 的项目...并将 zip 文件复制到项目资源管理器中的 Android 依赖项中。它可能有效...

对不起，如果没有。

# c# - Interop Excel C#：在 Windows Server 2008 中保存图表工作表

> ID：12770443
> 
> 赞同：1
> 
> 时间：2012-10-07T16:08:11.247
> 
> 标签：c#, interop, com-interop, office-interop, excel-interop

我正在处理一个文档 ( `ppt, pptx, xls, xlsx, doc, docx and pdf`) 拆分器，总的来说，我让它工作了。现在我面临最后一个问题，事情是在我的计算机上一切正常（windows 7 64b + office 2007），但我`xlsx`的服务器（windows server 2008 64b + office 2007）有一个问题。

问题是，与此同时，我正在拆分具有图表的 xlsx（它与 xls 一起使用），我可以从每张工作表中创建新文件，但来自图表的工作表。

```
Excel.Workbook newWork = workbooks.Add();
work.Sheets[counter].Copy(newWork.Sheets[1]);

foreach (Excel.Worksheet newSheet in newWork.Worksheets)
{
    if (newSheet.Index > 1)
    {
        newSheet.Delete();
    }
}
newWork.SaveAs(
    currentName, Microsoft.Office.Interop.Excel.XlFileFormat.xlWorkbookDefault, 
    Type.Missing, Type.Missing, false, false,
    Microsoft.Office.Interop.Excel.XlSaveAsAccessMode.xlNoChange,
    Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing);

newWork.Close();
Marshal.ReleaseComObject(newWork); 
```

newWork.SaveAs 正在抛出**ComException: Document not saved**。如果我手动完成这项工作（我的意思是，如果我打开 xlsx 文件然后将图表移动/复制到新工作簿），它会起作用。此外，如果我删除该属性`excelApp.DisplayAlerts = false;`，它会卡在“另存为”对话框中（如果我尝试通过选择目标文件夹手动完成该过程，则会一遍又一遍地弹出“另存为”弹出窗口）。

任何想法？

# blackberry - 构建请求失败并显示消息：[ERROR] RAPC 异常发生

> ID：12770444
> 
> 赞同：0
> 
> 时间：2012-10-07T16:08:12.980
> 
> 标签：blackberry, blackberry-webworks

我在 blackberry Webworks SDK 中打包并启动我的应用程序，我得到了这个大的红色错误：

> 构建请求失败并显示消息：[ERROR] RAPC 异常发生

这意味着什么？

我的包裹设置：

*   **SDK 路径**：C:\Program Files (x86)\Research In Motion\BlackBerry WebWorks SDK 2.3.1.5

*   **项目根**目录：C:\xampp\htdocs\apps\HelloWorld

*   **档案名称**：HelloWorld

*   **输出文件夹**：C:\Users\ejobity\Documents\Blackberry Development\projects\apps\HelloWorld

*   **模拟器**：9930-7.0.0.318

MS DOS 说

> 错误：java 编译器失败：C:\Program Files (x86)\Java\jdk1.7.0_0 7\bin\javac.exe @C:\Users\ejobity\AppData\Local\Temp\rapc_6eb ...
> 
> 2012-10-07 15:53:53 GET /ripple/build_status/8442 200 出：[错误]
> RAPC 异常发生
> 
> 完成构建错误响应 - {"code":1,"msg":"[ERROR] \t\tRAPC 异常发生\n","data":null}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T13:31:39.180

我不得不从 JDK 1.7 更改为 JDK 1.6 并像管理员一样运行 CMD。

如果您卸载 JDK 1.7，之后又安装了 JDK 1.6，则必须卸载 BlackBerry WebWorks 并重新安装。这是因为 WebWorks 有自己的 JDK 和 JRE 路径，如果不重新安装，这些新路径不会更新，还会继续出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:18:54.477

我注意到您使用的是 JDK 1.7。您应该使用 1.6（并确保它是 32 位版本，而不是 64 位版本）。

这是[JDK 1.6的链接](http://www.oracle.com/technetwork/java/javase/downloads/jdk6u35-downloads-1836443.html)

# ios - (kal) 日历/tableview 视图层次结构在标签栏中中断

> ID：12770446
> 
> 赞同：0
> 
> 时间：2012-10-07T16:08:39.470
> 
> 标签：ios, xcode, uiview, uistoryboard

我正在使用[Kal](https://github.com/klazuka/Kal)，但无法正常显示。

现在，在情节提要中，我有一个带有标签 1 的主视图的子视图：

![视图层级](../Images/1bbaa2008d00548c0ce2b85482f448c2.png)

我将该子视图安装到导航栏和标签栏之间的空间：

![在此处输入图像描述](../Images/e959c217769ba3762a40ac1c929532a0.png)

问题是日历/表格视图（Kal）在该子视图中没有正确显示：

![在此处输入图像描述](../Images/3780c78d191bbe41549979f946fe0692.png)

首先是月份上方的那个灰色小条（可能是 Kal 的 iPhone 信息栏间距？）。然后日历底部的 tableview 表现得好像它延伸到标签栏下方很远。也就是说，单元格不会正确滚动，从底部向上窥视的标记为 11:58 的单元格可以看出。（我已经尽可能地滚动它。）

这是我为 Kal 日历/tableview 设置代表和加载视图的地方：

```
- (void) viewDidLoad 
{    
    NSLog(@"DateTimeViewController - viewDidLoad");

    [super viewDidLoad];

    self.calendar = [[KalViewController alloc] init];

    self.calendar.delegate = self;
    self.calendar.dataSource = self;

    [[self.view viewWithTag:1] addSubview:self.calendar.view];

    NSLog(@"selected date = %@",self.calendar.selectedDate);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T09:55:02.970

我遇到了完全相同的问题，我去`KalViewController.m`了`loadView`

并以这种方式更改了代码：

```
//  KalView *kalView = [[KalView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame] delegate:self logic:logic];
int width = [[UIScreen mainScreen] applicationFrame].size.width;
int height = [[UIScreen mainScreen] applicationFrame].size.height-93;
KalView *kalView = [[KalView alloc] initWithFrame:CGRectMake(0, 0, width, height) delegate:self logic:logic]; 
```

这解决了“标题”边距和表格视图大小的问题。只需使用高度值即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T16:53:52.643

在 CGRectMake 中使用你的 'y' 值来获得所需的帧。尝试这个

```
KalViewController *kalView = [[KalViewController alloc] initWithFrame:CGRectMake(0,-20,100,320)];
self.calender = kalView; 
```

CGRectMake(< *x 位置*> , < *y 位置*> , <*所需高度*> , <*所需宽度*>)

# javascript - 使用 get set "exited with code 1" 编译 TypeScript 错误代码

> ID：12770447
> 
> 赞同：13
> 
> 时间：2012-10-07T16:08:41.417
> 
> 标签：javascript, typescript

```
get topLeft()      { return this._topLeft;             }

set topLeft(value) {  this._topLeft = value; Recalc(); } 
```

上面的代码可以在 TypeScript Play 中找到，但是在从 Visual Studio 2012 编译时收到构建错误`error "exited with code 1"`

有人尝试在 TypeScript 中获取、设置并成功构建吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-07T17:07:06.453

您需要以 ECMAScript v5 为目标，`-target ES5`即将参数传递给编译器。这需要在项目文件目标配置中进行设置。

我不知道VS是否有任何用于编辑目标配置的内置机制，所以我只能告诉你如何手动完成。只需打开您的`.csproj`项目文件，查找`Target`TypeScript 编译器命令所在的节点，然后添加`-target ES5`参数。

在我的配置中，它看起来像这样：

```
<Target Name="BeforeBuild">
    <Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\0.8.0.0\tsc&quot; -target ES5 @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" />
</Target> 
```

**更新**

从 0.8.1.0 版本开始，移除了硬编码的版本依赖项，并添加了对源映射的支持，因此`Target`默认情况下节点现在看起来像这样：

```
<Target Name="BeforeBuild">
    <Message Text="Compiling TypeScript files" />
    <Message Text="Executing tsc$(TypeScriptSourceMap) @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" />
    <Exec Command="tsc$(TypeScriptSourceMap) @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" />
</Target> 
```

注入`target`参数仍然很容易，只需将其放在`tsc`or之后`$(TypeScriptSourceMap)`：

```
<Message Text="Executing tsc --target ES5 $(TypeScriptSourceMap) @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" />
<Exec Command="tsc --target ES5 $(TypeScriptSourceMap) @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" /> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-04T12:17:35.060

从 0.8.2 开始又有了变化。一些常见的 TypeScript 构建内容已从您的 .csproj 移至外部构建文件。像这样：

```
<Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)\TypeScript\Microsoft.TypeScript.targets" /> 
```

您的 .csproj 仍然可以通过将它们作为元素包含在构建中来在 TypeScript 构建上设置一些参数。这些元素之一是 ES 版本。该模板为我创建了两组，一组用于调试，一组用于发布：

```
 <PropertyGroup Condition="'$(Configuration)' == 'Debug'">
    <TypeScriptTarget>ES3</TypeScriptTarget>
    <TypeScriptIncludeComments>true</TypeScriptIncludeComments>
    <TypeScriptSourceMap>true</TypeScriptSourceMap>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Configuration)' == 'Release'">
    <TypeScriptTarget>ES3</TypeScriptTarget>
    <TypeScriptIncludeComments>false</TypeScriptIncludeComments>
    <TypeScriptSourceMap>false</TypeScriptSourceMap>
  </PropertyGroup> 
```

为了获得想要的效果，只需将 ES3 更改为 ES5

要更深入地了解这最终如何作为对 TypeScript 编译器的调用的一部分，请查看 Microsoft.TypeScript.targets 文件。

祝你好运，

# hibernate - 用于初始化惰性实体的标准 JPA 方法

> ID：12770450
> 
> 赞同：10
> 
> 时间：2012-10-07T16:09:00.067
> 
> 标签：hibernate, jpa, initialization

我正在使用 JPA（Hibernate 作为我的 JPA 提供程序）。我真的想避免休眠细节并使用 JPA 规范。我有一个初始化惰性实体的函数。不幸的是，它使用了 Hibernate 特定的功能。这是我的功能：

```
private T initializeAndUnproxy(T entity) {
        if (entity == null) {
            throw new 
               NullPointerException("Entity passed for initialization is null");
        }

        Hibernate.initialize(entity);
        if (entity instanceof HibernateProxy) {
            entity = (T) ((HibernateProxy) entity).getHibernateLazyInitializer().getImplementation();
        }
        return entity;
    } 
```

是否有任何纯 JPA 方法来初始化实体？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T18:50:17.613

似乎没有初始化实体的标准方法。

有一种标准方法可以检查实体是否已初始化（完全加载），这是通过[PersistenceUnitUtil](http://docs.oracle.com/javaee/6/api/javax/persistence/PersistenceUnitUtil.html)（另请参阅[如何测试延迟加载的 JPA 集合是否已初始化？](https://stackoverflow.com/questions/4306463/how-to-test-whether-lazy-loaded-jpa-collection-is-initialized)）

只要实体仍处于附加状态，您就可以访问其属性以强制初始化。这不是很整洁，但在某种程度上确实有效。不利的一面是，根据属性的确切性质（例如，具有许多元素的集合），您可能会向数据库发起数十、数百甚至数千个查询。

在许多情况下，您最好预先指定需要初始化的内容，而不是强制以编程方式初始化（​​未知）实体。[我在这里](http://jdevelopment.nl/fetching-arbitrary-object-graphs-jpa-2)写了一篇关于这个的文章。

但是，如果您真的需要通过对某个标准框架方法的一次调用来完全初始化实体，那么不幸的是似乎没有办法，您现在必须坚持使用 Hibernate 特定代码。

# android - 如何设置特定的文本视图以开始，以及如何始终显示文本视图的内容？

> ID：12770454
> 
> 赞同：0
> 
> 时间：2012-10-07T16:09:32.197
> 
> 标签：android, android-layout, textview, focus, visibility

我有一个带有两个文本视图的小程序，当应用程序启动时，第二个被聚焦（我想要第一个），每当我在其中输入一些内容然后聚焦其他内容时，输入数据将不会显示 - 文本视图将为空白但它并没有真正消失，因为您可以将鼠标悬停在它上面再次看到它。

我该如何设置这些东西？

/// 这是我的 main.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <AutoCompleteTextView
        android:id="@+id/artisttext"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:text="Artist.." 
        android:hint="Artist..">

        <requestFocus />
    </AutoCompleteTextView>
        <AutoCompleteTextView
        android:id="@+id/tracktext"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:text="Track.."
        android:hint="Track.."> >

        <requestFocus />
    </AutoCompleteTextView>

        <Button
            android:id="@+id/artistEnter"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Get similar artists" />

        <Button
            android:id="@+id/songEnter"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Get similar tracks" />

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T16:29:33.560

我发现了如何设置焦点，但不是将焦点从一个 tetview 转移到另一个的问题，失去焦点的那个也设置为不可见的文本，直到它再次获得焦点。为什么是这样？

# java - 如何使用 org.w3c.dom.Document 将数据发布到 javascript

> ID：12770455
> 
> 赞同：1
> 
> 时间：2012-10-07T16:09:42.003
> 
> 标签：java, javascript, android, jsoup, domdocument

我使用 JSoup 来发布数据和调用 javascript 函数，但现在我想更改它，因为它会减慢我的应用程序的速度。

这是我目前的实现：

`doc = Jsoup.connect(SRC).data("__EVENTTARGET", name).data("__EVENTARGUMENT", "").data(name, value) .data("__VIEWSTATE", doc.select("input#__VIEWSTATE").attr("value")).data("__LASTFOCUS", "").post();`

现在我想用`org.w3c.dom.Document`它来做同样的事情。我怎么能在这里做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:42:59.123

我自己找到了解决方案：

```
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("__EVENTTARGET", eventTarget));
nameValuePairs.add(new BasicNameValuePair("__EVENTARGUMENT", "1"));
nameValuePairs.add(new BasicNameValuePair("__VIEWSTATE", doc.select("input#__VIEWSTATE").attr("value")));
nameValuePairs.add(new BasicNameValuePair("__LASTFOCUS", ""));
post.setEntity(new UrlEncodedFormEntity(nameValuePairs));
// Execute HTTP Post Request
response = client.execute(post); 
```

# java - 如果在 Windows 系统上的 java 中已知名称的 pid，如何获取正在运行的进程的路径？

> ID：12770456
> 
> 赞同：0
> 
> 时间：2012-10-07T16:09:49.390
> 
> 标签：java, process, kill

我正在编写一个程序来杀死和启动通过局域网连接的另一台计算机中的进程。我能够成功终止该进程。我使用 tasklist 列出进程并使用 taskkill 杀死它。要再次启动被杀死的程序，必须获得进程的路径。

有没有办法在java中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:04:34.387

我认为不可能通过它的路径来杀死一个进程，但你总是可以通过它的进程名称或 ID 来杀死它。

这是我用来杀死进程的方法，例如firefox.exe。

1.  创建一个VB脚本如下，

    ```
    sub killProcess(strProcessName)
        set colProcesses = GetObject("winmgmts:\\.\root\cimv2").ExecQuery("Select * from Win32_Process Where Name='" & strProcessName & "'")
        if colProcesses.count <> 0 then
            for each objProcess in colProcesses
                objProcess.Terminate()
            next
        end if
    end sub

    killProcess "firefox.exe" 
    ```

2.  现在为了通过 Java 运行上面的脚本，使用 Process API 如下，

    ```
    Process pr = Runtime.getRuntime().exec(path_to_vbscript_file, null, null);   
    pr.waitFor(); 
    ```

# jquery - jQuery：选择一个包含冒号的href

> ID：12770457
> 
> 赞同：1
> 
> 时间：2012-10-07T16:09:55.460
> 
> 标签：jquery

我的锚链接应该是动画的，这样它们就不会立即跳转到链接，而是以流畅的方式滚动。这应该在两个方向上都起作用，即当单击包含`footnote`和`reversefootnote`类的链接时。

## 结构

HTML

```
<p>
  Some text.
  <a href="#fn:1" id="fnref:1" title="see footnote" class="footnote">[1]</a>
</p>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>
        A footnote.
        <a href="#fnref:1" title="return to article" class="reversefootnote">&nbsp;?</a>
      </p>
    </li>
  </ol>
</div> 
```

jQuery

```
$("a[href*='#fn\\:']").click(function(event) {
    event.preventDefault();
    var href = $(this).attr("href");
    var $el = $(href);

    $("html, body").animate({"scrollTop": $el.offset().top}, 500);
}); 
```

## 问题

只有当我在`href`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:22:49.007

您不需要在该模式匹配中转义冒号....

但冒号应该在选择器中转义：

```
var $el = $(href.replace(':', '\\:')); 
```

并且第一个选择器应该改变：

```
$("a[href*='#fn\\:']").click(function(event) {...}); 
```

# android - 在项目中组织Android代码的标准方法是什么

> ID：12770459
> 
> 赞同：16
> 
> 时间：2012-10-07T16:10:00.810
> 
> 标签：android, architecture, model, project, setup-project

我是 android 新手，我想知道在 android 项目中编写代码的正确方法是什么，或者我们应该在我们的项目示例 n-tire、MVC 或其他中使用哪种架构或模型？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T16:25:29.880

查看此主题： [组织大型 Android 项目的技巧？](https://stackoverflow.com/questions/5623301/tips-on-organizing-larger-android-projects)

还有这个： [Android 上的 MVC 模式](https://stackoverflow.com/questions/2925054/mvc-pattern-in-android)

还有这个： [Android上使用了哪些设计模式？](https://stackoverflow.com/questions/4916209/which-design-patterns-are-used-on-android?lq=1)

还有这个： [Android MVVM 设计模式示例](https://stackoverflow.com/questions/4972927/android-mvvm-design-pattern-examples?lq=1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T16:25:02.527

以任何对您最有意义的方式组织它。没有 100% 正确的方式来组织一个 Android 项目......这取决于许多因素（即项目的大小）。

如果您想了解 Google 如何组织他们的项目，请查看[**Google I/O 2012**](http://code.google.com/p/iosched/source/browse/#git%2Fandroid%2Fsrc%2Fcom%2Fgoogle%2Fandroid%2Fapps%2Fiosched)源代码。特别是，检查`iosched.util`包......它提供了多种在项目中重用代码的方法（主要是使用静态实用程序帮助方法）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-07T16:30:39.677

这实际上是一个有争议的问题，但我会给我两便士。

考虑到 Android 是一个便携式系统，您需要考虑到您的应用程序不会有无限的电力，并且它必须与系统上运行的其他应用程序共享电力，这里的电力是指电池寿命，考虑到大量的 Android设备在 CPU 和 RAM 方面实际上非常健康，但是即使现在大多数设备都有更多 RAM，但该 RAM 仍与其他应用程序共享，因此应谨慎使用。

也就是说，从长远来看，任何更喜欢分层和抽象而不是简单地“完成工作”的精心设计的、高度工程化的解决方案都可能会受到影响，最重要的是您的应用程序执行的指令越少，应用程序使用的内存越少，它会很有效率。

为了对您的问题给出更实际的答案，我首先要确保您对核心 Android 组件（例如内容提供程序、服务、广播接收器、意图和处理程序等）感到满意，然后从那里开始工作。

很抱歉没有给出更具体的答案，但我希望能有所帮助。

# python - pyinstaller 的问题

> ID：12770460
> 
> 赞同：0
> 
> 时间：2012-10-07T16:10:01.947
> 
> 标签：python, xml, python-2.7, pyinstaller

我已经创建了一个工作的 GUI 程序（使用 tkinter），但是当我尝试使用 pyinstaller 编译它时（py2exe 仅适用于 python 2.6，我使用 2.7 作为程序），它不起作用。我有 2 个文件：program.py 和 data.xml。该程序使用 xml 文档来检索信息并将其显示到窗口中。找遍了，好像没有人遇到过类似的问题，pyinstaller的文档也没用。我使用的命令是

```
python pyinstaller.py -w -mdata.xml -nProgram program.py 
```

它似乎使规范文件正常，但在构建时生成带有大量回溯的错误：

```
pyinstaller.utils.winmanifest.invalidManifestError: Invalid root element <items> - has to be one of <assembly>, <assemblyBinding>, <configuration>, <dependentAssembly> 
```

并退出构建过程。这是我第一次尝试为项目构建可执行文件，所以我在这里有点摸不着头脑。是我忘记做某事了，还是我只是在 pyinstaller 的程序中发现了一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T23:44:20.757

通常我不会回答我自己的问题，但我已经解决了这个问题，我认为其他人应该知道这一点。创建程序并使用 xml 时，必须将根标记（第一个）作为`<assembly>`. 不知道为什么，但是当我这样做时它会起作用。`--hidden-import=Module`另外，如果您将任何内容导入程序，请不要忘记使用该命令。

# database - 使用 VBA 检查时间？

> ID：12770462
> 
> 赞同：2
> 
> 时间：2012-10-07T16:10:06.920
> 
> 标签：database, vba, ms-access

我需要能够判断 4 小时前首次输入记录的时间，所以现在我将 datetime 字段的默认值设置为 Now()，有没有办法说：

如果 datetime > now() + 4 小时？

谢谢，

鲍勃·P

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T16:13:26.693

查看在线帮助主题`DateAdd()`：

```
If YourDateTimeValue > DateAdd("h", 4, Now()) Then 
```

# ruby-on-rails - Bootstrap 输入了多个值。叉子？

> ID：12770467
> 
> 赞同：0
> 
> 时间：2012-10-07T16:10:36.060
> 
> 标签：ruby-on-rails, autocomplete, twitter-bootstrap

我在这里读到[https://github.com/twitter/bootstrap/pull/2007](https://github.com/twitter/bootstrap/pull/2007)，它打开了一个拉取请求，用于在 Typeahead 中添加对多个选择的支持。不太懂github，pull requests 很好，不知道哪里可以找到这个更新的js文件？我在 Rails 工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T16:52:34.890

包含您要查找的代码的存储库是[https://github.com/codeimpossible/bootstrap](https://github.com/codeimpossible/bootstrap)

### 拉取请求如何工作

拉取请求由某人（在这种情况下`codeimpossible`）发送给分叉存储库的原始所有者。这意味着 codeimpossible 有一个版本的引导存储库[https://github.com/codeimpossible/bootstrap](https://github.com/codeimpossible/bootstrap)而 twitter 的原始原始存储库是[https://github.com/twitter/bootstrap](https://github.com/twitter/bootstrap)。

通过拉取请求，他要求他们将他的更改合并回他们的存储库（以及后续新版本的 twitter bootstrap。如果拉取请求成功（按照该页面上的评论线程到最后！）您最终将获得代码来自推特存储库。

但是，在这种情况下，拉取请求未被接受，您只能在[https://github.com/codeimpossible/bootstrap上找到代码](https://github.com/codeimpossible/bootstrap)

# c# - 功能区上的 CheckBox 和 ToggleButton 有什么区别？

> ID：12770470
> 
> 赞同：3
> 
> 时间：2012-10-07T16:10:54.217
> 
> 标签：c#, ribbon

据我所知，a`CheckBox`和`ToggleButton`- 功能区上的视觉外观之间只有一个区别。虽然第一个将被选中/取消选中，但后者会发光或不发光。

此外，当添加到菜单时，即使是切换按钮控件也会呈现为复选框！在那种情况下，根本没有区别。

1.  功能是相同的：一个`bool`.
2.  可扩展性是相同的：两者都可以被继承并重新制作成三态控件。
3.  可编程性是相同的：两者都具有相同的事件处理委托签名。

我错过了什么吗？在这种情况下 - 什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T16:18:35.813

这种二分法在其他地方已经存在很长时间了。是的，在功能上它们总是相同的。这可能取决于使用它们的具体情况。例如，如果我查看 Word，则文档视图是切换按钮：

![在此处输入图像描述](../Images/a14468e370e8dd39df4b595626163c33.png)

而可以单独显示的各种东西（例如标尺、网格等）是复选框：

![在此处输入图像描述](../Images/75879f9bbbe6f098513f96d162eb1b2f.png)

在这种情况下，切换按钮似乎用作单选按钮。此外，切换按钮使当前状态比复选框更明显，因此如果切换选项比周围的其他选项更重要，那么使用它可能是有意义的。

我会说选择一种你正在使用的风格和你使用它时的标准，并始终如一地这样做。

# php - Code Igniter CRUD 应用程序：缩略图图像未上传。接收数据库错误，因为 NULL

> ID：12770471
> 
> 赞同：1
> 
> 时间：2012-10-07T16:10:56.550
> 
> 标签：php, codeigniter, codeigniter-2

制作一个将接受一堆文本数据和图像上传的表单。

将新项目添加到两个表时不断收到此错误：

> 错误号：1048
> 
> 列“id_path”不能为空
> 
> 插入`thumbnails`( `id_path`, `id_data_row`) 值 (NULL, 17)
> 
> 文件名：C:\wamp\www\project\system\database\DB_driver.php
> 
> 行号：330

我想要做的是将文本数据（标题、文本、价格等内容）添加到一个表（**数据**）中，然后上传一张图片并添加其完整的上传路径（作为**缩略图**表中的主键）和插入文本数据行的 id（将其与**缩略图**表中的缩略图链接）到**缩略图**表中。

由于某种原因，它一直将 NULL 作为缩略图表的完整上传路径传递。

**crud.php**（控制器）：

```
function add()
        {
            //Set validation properties
            $this->_set_fields();

            //Set common properties
            $data['title'] = 'Add new data row';
            $data['message'] = '';
            $data['action'] = site_url('crud/addDataRow');
            $data['link_back'] = anchor('crud/index', 'Back to list', array('class' => 'back'));

            //Load the view
            $this->load->view('templates/header', $data);
            $this->load->view('pages/crud_edit', $data);
            $this->load->view('templates/footer');
        }

        function addDataRow()
        {
            //Set common properties
            $data['title'] = 'Add new data row';
            $data['action'] = site_url('crud/addDataRow');
            $data['link_back'] = anchor('crud/index/', 'Back to list', array('class' => 'back'));

            //Set validation properties
            $this->_set_fields();
            $this->_set_rules();

            //Run validation
            if($this->form_validation->run() == FALSE)
            {
                $data['message'] = '';
            }
            else
            {
                //Save the data
                $full_file_path = null;
                $config['allowed_types'] = 'gif|jpg|png';
                $config['max_size'] = '100';
                $config['max_width']  = '1024';
                $config['max_height']  = '768';
                $path_to_uploads='./uploads';
                $config['upload_path'] = $path_to_uploads;
                $this->load->library('upload', $config);
                //add this
                $this->upload->initialize($config);
                if (!$this->upload->do_upload()){
                    $error = $this->upload->display_errors();
                    echo "<script>alert($error);</script>";
                }else{
                    $upload_data=$this->upload->data();
                    $file_name=$upload_data['file_name'];
                    $full_file_path = $path_to_uploads.'/'.$file_name;
                }

                $data_row = array(
                    'title' => $this->input->post('title'),
                    'text' => $this->input->post('text'),
                    'price' => $this->input->post('price'),
                    'status' => $this->input->post('status'),
                    'type' => $this->input->post('type')
                );

                $id = $this->crud_model->save($data_row);

                $thumbnail_row = array(
                    'id_path' => $full_file_path,
                    'id_data_row' => $id
                );

                $this->crud_model->save_thumbnail($thumbnail_row);

                //Set form input name="id"
                $this->form_validation->id = $id;

                //Set user message
                $data['message'] = '<div class="success">New data row added!</div>';
            }

            $this->load->view('templates/header', $data);
            $this->load->view('pages/crud_edit', $data);
            $this->load->view('templates/footer');
        } 
```

**crud_model.php**（模型）：

```
//Add new data row
        function save($data)
        {

            $this->db->insert($this->tbl_data, $data);
            return $this->db->insert_id();
        }

        //Add the thumbnail upload path and id of the row in data table to link them
        function save_thumbnail($data)
        {
            $this->db->insert($this->tbl_thumbnails, $data);
            return $this->db->insert_id();
        } 
```

**编辑（html表单代码）：**

**crud_edit.php （用于****添加**新项目或**更新**现有项目的html 表单代码）：

```
<div id="contentColumn">
    <h1><?php echo $title; ?></h1>
    <?php echo $message; ?>
    <form method="post" action="<?php echo $action; ?>" multipart="multipart">
        <div class="data">
            <table>
                <tr>
                    <td width="30%">ID</td>
                    <td>
                        <input type="text" name="id" disabled="disabled" class="text" value="<?php echo set_value('id'); ?>"/>
                        <input type="hidden" name="id" value="<?php echo set_value('id',$this->form_data->id); ?>"/>
                    </td>
                </tr>
                <tr>
                    <td valign="top">Title<span style="color:red;">*</span></td>
                    <td>
                        <input type="text" name="title" class="text" value="<?php echo set_value('title',$this->form_data->title); ?>"/>
                        <?php echo form_error('title'); ?>
                    </td>
                </tr>
                <tr>
                    <td valign="top">Text<span style="color:red;">*</span></td>
                    <td>
                        <textarea name="text" class="text">
                            <?php echo set_value('text',$this->form_data->text); ?>
                        </textarea>
                        <?php echo form_error('text'); ?>
                    </td>
                </tr>
                <tr>
                    <td valign="top">Price<span style="color:red;">*</span></td>
                    <td>
                        <input type="text" name="price" class="text" value="<?php echo set_value('price',$this->form_data->price); ?>"/>
                        <?php echo form_error('price'); ?>
                    </td>
                </tr>
                <tr>
                    <td valign="top">Thumbnail<span style="color:red;">*</span></td>
                    <td>
                        <?php echo form_upload(array('name'=>'thumb', 'type'=>'file', 'accept'=>'image/*'))?>
                        <!--<input type="file" name="thumb" size="20" />-->
                        <?php echo form_error('thumb'); ?>
                    </td>
                </tr>
                <!--
                <tr>
                    <td valign="top">Images<span style="color:red;">*</span></td>
                    <td>
                        <input type="text" name="images" class="text" value="<?php echo set_value('images',$this->form_data->images); ?>"/>
                        <?php echo form_upload(array('name'=>'images', 'type'=>'file', 'multiple'=>'multiple', 'accept'=>'image/*'))?>
                        <?php echo form_error('images'); ?>
                    </td>
                </tr>
                -->
                <tr>
                    <td valign="top">Status</td>
                    <td>
                        <input type="text" name="status" class="text" value="<?php echo set_value('status',$this->form_data->status); ?>"/>
                        <?php echo form_error('status'); ?>
                    </td>
                </tr>
                <tr>
                    <td valign="top">Type<span style="color:red;">*</span></td>
                    <td>
                        <input type="text" name="type" class="text" value="<?php echo set_value('type',$this->form_data->type); ?>"/>
                        <?php echo form_error('type'); ?>
                    </td>
                </tr>
                <tr>
                    <td>&nbsp;</td>
                    <td><input type="submit" value="Save" /></td>
                </tr>
            </table>
        </div>
    </form>
    <br />
    <?php echo $link_back; ?>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:25:25.030

```
if (!$this->upload->do_upload()){
                $error = $this->upload->display_errors();
                echo "<script>alert($error);</script>";
            }else{
                $upload_data=$this->upload->data();
                $file_name=$upload_data['file_name'];
                $full_file_path = $path_to_uploads.'/'.$file_name;
                $thumbnail_row = array(
                'id_path' => $full_file_path,
                'id_data_row' => $id
            );
                $this->crud_model->save_thumbnail($thumbnail_row);
            } 
```

我的猜测是上传失败，因为无论上传失败，您都在尝试保存 full_file_path 的值将为空。顺便说一句，只保存文件名并将路径放在你的显示代码中。保存路径使得将这些文件移动到另一个位置变得非常头疼

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T17:20:28.267

更改php代码如下

```
$image1=$this->input->post('thumb');
if (!$this->upload->do_upload($image1)){ 
```

# c++ - 不能使用函数变量？错误表达式必须具有类类型

> ID：12770475
> 
> 赞同：0
> 
> 时间：2012-10-07T16:11:11.403
> 
> 标签：c++

嘿，我想在故事情节中使用函数 wolves 变量，我正在尝试这样做：

```
"\nYou awake on a beach to the sound of"<< Wolves().name; " starving and blood hungry," 
        "\nThere is a Rock on the ground.  You pick it up";
        inventory.push_back("Rock"); 
```

但是 Wolves().name; 标题中提到的错误。为什么我不能这样做？

下面是 Wolves 函数的代码：

```
void Wolves()
{
    string name = "Wolves";
    int health = 20;
    hitPoints() +1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:15:56.027

您不能从 C++ 中的函数外部访问函数中定义的变量，但可以将其更改为类：

```
class Wolves {
  public:
    string name;
    // ...

    Wolves(); // Constructor
    //...
} 
```

要访问它，您可以使用

```
Wolves wolve;
wolve.name = "whateverName"; // or set it in the constructor
cout << wolve.name << endl; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T16:21:09.050

您在那里所做的是在函数中创建局部变量。一旦函数退出，它们就不再存在。你想要做的是创建一个 Wolves 类并创建公共成员变量来做你想做的事。例如，

```
class Wolves {
    public:
        string name;
        int health;

        Wolves(string name, int a);
} 
```

然后在主函数上，

```
Wolves w("Bob", 20);
cout << "The name is: " << w.name << endl; 
```

将输出“名字是：鲍勃”

除非您通过引用传递值，否则 void 函数实际上不会做任何事情。如果你想通过 void 函数改变对象，你应该做类似的事情

```
void Wolves(Wolves & wolfToChange)
{
    wolfToChange.name = "Bob";
} 
```

这将直接改变对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T16:14:34.270

您在名为 的函数中将“name”声明为局部变量`Wolves()`，但您所引用的代码期望该函数`Wolves()`返回一个具有可访问成员的对象`name`。这就是编译器抱怨的原因。

您编写代码的方式表明 Wolves 应该是一个类或结构，而不是一个函数。

# cocoa - mfmailcomposeviewcontroller 在 iOS 6 上崩溃

> ID：12770476
> 
> 赞同：0
> 
> 时间：2012-10-07T16:11:12.087
> 
> 标签：cocoa, ios6

通常，当我像这样使用 mfmailcomposeviewcontroller 时：

```
if ([MFMailComposeViewController canSendMail])
{

        MFMailComposeViewController *mcvc = [[MFMailComposeViewController alloc] init];
        mcvc.mailComposeDelegate = self;

        [mcvc setSubject:@"Check out these diamonds!"];

        [self presentModalViewController:mcvc animated:YES];
        [mcvc release];
} 
```

我现在在 iOS 6 上收到此错误：

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException',
reason: 'Could not load NIB in bundle: 'NSBundle </Users/ericshorr/Library/Application Support/iPhone Simulator/6.0/Applications/7904C2AD-23E1-4211-B5FA-A1F03CB3A875/SDE Group Diamonds.app> (loaded)' with name 'MFMailComposeInternalViewController'' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:21:20.933

因为您需要在 iPad 中设置一个邮件帐户才能在 iOS 6 中发送邮件。在“设置”中转到“*邮件”、“通讯录”、“日历*”，然后添加一个邮件帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T10:50:22.337

我最近遇到了一个类似的问题，我在 UIViewController 中添加了一个类别，这样我就可以覆盖 init 并将一个额外的修饰符附加到 nib 名称。像这样...

```
self = [self initWithNibName:[nibName stringByAppendingString:@"_modifier"] bundle:nil]; 
```

尽管 UIViewController 类别没有在尝试启动 MFMailComposeViewController 的类中#imported，但它是在作为子视图控制器添加的不同类的标头中导入的。因此，MFMailComposeViewController 试图找到一个名称为：MFMailComposeInternalViewController_modifier 的 NIB。

事后看来似乎很明显，但这是一场噩梦，所以我想我会在这里添加它作为可能的解决方案，对于遇到类似情况的其他人。

# java - 处理程序的动态设置

> ID：12770479
> 
> 赞同：2
> 
> 时间：2012-10-07T16:11:45.950
> 
> 标签：java, save, settings

我正在为游戏编写设置管理器。

本质上，我正在显示只能通过控制台而不是通过游戏菜单访问的该游戏的设置。

设置或命令具有不同的值。

例如：

`dota_player_units_auto_attack`有一个布尔参数，0 或 1

while`dota_health_per_vertical_marker`有一个整数参数（默认为 250）

**我应该如何处理/保存这些设置/命令？**

我的第一个想法是使用设置名称作为键和布尔值作为值的 HashMap，但这不适用于整数部分。我应该只在 Integer 中定义 value 并检查 1 和 0 吗？

我很想只使用`HashMap`动态值。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:50:20.440

I would advise you to use `XML` as store of data. For temporary data store you cat use something like:

`HashMap<String, TypeAndValuePare> = ...;`

Where `TypeAndValuePare` is:

`class TypeAndValuePare { int typeId; Object value; }`

Or just use `HashMap<String, Object>` check the type by `instanceof`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T17:58:55.100

Java 有一个[Properties](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html)类，它对于实现这样的设置非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T17:09:19.657

我建议将设置存储在一个单独的类中，如下所示。

```
public class SettingsManager{

 private boolean dota_player_units_auto_attack;
 private int dota_health_per_vertical_marker;

} 
```

并让 getter 读取值，并让 setter 或构造函数参数设置值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T17:23:32.527

如果您想为配置保持简单的结构，我的建议是您不应该将`boolean`其视为与整数不同的结构。每个配置都有自己的整数值，该应用程序应该正确响应。在您的情况下，如果变量`dota_player_units_auto_attack`的值为 1，则如果不是，则执行某些操作。然后没有。

请参阅用于其他配置属性的相同逻辑。这就是为什么如果您实施一些创新，拥有此类文件的一致结构将在未来受益。

我认为基本规则 KISS（保持简单愚蠢）在这里有它最好的应用。

在您的问题的未来，您可以有一个枚举，并提供一个可能的选项，该选项提供应用程序在无法获得任何其他值时应该使用的默认值。这肯定会增加您的代码可读性和可靠性。

# python - python“导入媒体”不起作用，但有“media.py”

> ID：12770480
> 
> 赞同：2
> 
> 时间：2012-10-07T16:11:49.600
> 
> 标签：python

我读了一本书来学习python编程，它显示了代码：

```
import media 
```

所以我`gwpy-code.zip`从链接[http://pragprog.com/titles/gwpy/source_code](http://pragprog.com/titles/gwpy/source_code)下载并安装了`PyGraphics-2.0.win32.exe`. 在路上`C:\Python27\Lib\site-packages\pygraphics`真的有`media.py`！但为什么`import media`没有工作？（ps：我也在`C:\Python27\Scripts\easy_install nose`DOS盒子里试过这个，还是不行……）最好的问候：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T16:16:43.120

尝试：

```
from pygraphics import media 
```

如果您还不熟悉在 Python 中导入模块，那么简要介绍一下[可能](http://docs.python.org/reference/simple_stmts.html#grammar-token-import_stmt)会很有用。

```
>>> import sys
>>> print sys.path 
```

如果您尝试上面的代码，您将在系统路径上看到一堆目录。`C:\Python27\Lib\site-packages\`应该是其中之一。

要导入位于系统路径上的文件，您可以使用`import filename`(for filename.py)。如果文件位于子目录中，例如`dir1/dir2/filename.py`，则可以使用 导入`import dir1.dir2.filename`。

注意：如果目录包含名为`__init__.py`. 可以导入的文件称为“模块”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T16:16:33.147

你需要做：

```
from pygraphics import media 
```

原因是 Python 在`site-packages`目录中查找包。该文件`media.py`位于文件夹中（因此位于包中）`pygraphics`，因此您无法直接访问它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T00:33:21.680

在导入媒体之前，您必须导入 ampy。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T16:19:16.960

你可能不得不说

```
from pygraphics import media 
```

# joomla - 寻求在 Joomla 中实施 HighCharts 的指导

> ID：12770484
> 
> 赞同：0
> 
> 时间：2012-10-07T16:12:08.293
> 
> 标签：joomla, highcharts

我们想在我们的自定义 Joomla 模块中实现 HighCharts。由于它是一个 Javascript 库，我们是否将其附加到视图中作为对脚本文件的引用？我还阅读了有关 HighCharts 的 PHP 包装器的信息。是否建议使用它而不是直接的 Javascript 库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T19:24:25.533

要将 Javascript 文件嵌入到 Joomla 模块中，您需要使用以下代码：

```
$document =& JFactory::getDocument();
$document->addScript(JURI::root() . "modules/mod_your_module/file.js");
$document->addScript(JURI::root() . "modules/mod_your_module/file2.js");
... 
```

如果您需要编写自定义 Javascript，那么您需要这样编写：

```
$js = 'alert("alert message");';
$document->addScriptDeclaration($js); 
```

希望这可以帮助。

# java - 在/调试我继承的一个巨大的 Java Swing 应用程序时获得线索

> ID：12770485
> 
> 赞同：1
> 
> 时间：2012-10-07T16:12:21.917
> 
> 标签：java, swing, debugging, user-interface

我的任务是在 Java/Swing 应用程序中实现新的最终用户功能。实施的任务相对容易和直接。麻烦的是要修改现有的应用程序。

它由几十个类组成，这些类经常突破 2000 行，有时甚至达到 10000 行。文档不存在，阅读所有源代码以了解它的大图是不可行的。

该应用程序本身基本上是一个用于绘制图表（例如流程图）的 GUI 工具，并且是开源的（如果有帮助，我可以发布指向源代码的链接）。

到目前为止，我已经设法将源代码导入 Eclipse 项目并使用 SwingExplorer 插件来识别一些 GUI 组件。

应用程序中最“有趣”的部分是绘制图表的画布。它被实现为一个继承自 JComponent 的类（大约 9700 行长）。在 SwingExplorer 中无法选择显示图表的部分：整个画布仅被识别为上述类的单个实例。因此，我猜测这个庞大的单个类负责处理图表的所有用户交互和 AWT 绘图操作，并仅返回某种图像缓冲区来显示（但这是一个巨大的猜测）。

我的修改涉及在画布上绘制图表时对图表进行计算。因此它将是一个新类，它将在创建图表的特定元素期间接收和处理广播的事件，然后对它们进行一些计算。

我的主要问题是：如何调试事件流？如何在绘制图表时遵循执行流程，查看生成、处理了哪些事件，并了解正在绘制的对象在内存中的位置？

我知道这个问题可能看起来太笼统了，但我真的一无所知，正在寻找一个起点。

提前感谢您花时间阅读;）问候，马可

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T17:11:57.857

在 NetBeans 中，我使用`File > New Project > Java Project with Existing Sources`来允许轻松导航。大多数 IDE 都有类似的功能。

*   使用`Run > Generate Javadoc`；即使没有注释，`Overview`、`Index`和`Use`链接`Tree`也可能有用。

*   在调试器中设置断点并用于`Window > Debugging > Call Stack`回答诸如“我是如何到达这里的。

*   以集成`Profile > Profile Project`模式运行代码，查看原理执行线程。

# c# - 一种链接到类，方法，尤其是 C# 注释中特定代码行的方法

> ID：12770486
> 
> 赞同：14
> 
> 时间：2012-10-07T16:12:31.910
> 
> 标签：c#, visual-studio-2010, c#-4.0, hyperlink, comments

我想使用指向目标的代码中的链接来构建某种文档。目标可以是一个`Class`或一个`Method`或一个特定的代码行。（**指向特定的代码行是最重要的**）
我想到了 VS2010 的扩展或特定的注释标记。
有没有办法制作这种链接？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-15T12:57:17.603

Xml 注释 + 沙堡可能是您需要的。您可以使用引用指定的类或方法

```
<see cref=".."/> 
```

和参考参数使用

```
<paramref name=".."/> 
```

但是，没有直接的方法来引用某些代码行，但是您可以通过使用来引用某些#region

```
<code source="$sourcefile$" region="$regionname$"/> 
```

请参考：[XML 注释指南](http://www.ewoodruff.us/Downloads/XMLDocsGuide.pdf)第 20 页。

请注意，您引用的代码将直接显示在适当的位置，而不是链接。它并不完美，但我希望它有所帮助。

# html - 当 iPhone 使用 PhoneGap 2.1.0 和 iOS 6 锁定时，HTML 5 音频 MP3 文件不播放

> ID：12770487
> 
> 赞同：7
> 
> 时间：2012-10-07T16:12:36.567
> 
> 标签：html, audio, cordova, mp3, ios6

我有一个 PhoneGap 应用程序，它是在 PhoneGap 1.8.1 下编写的，它在 iOS 5.1 下运行良好。

我需要更改应用程序，因此下载了最新的 Xcode 4.5 和 iOS 6 SDK。但是当我构建应用程序并将其部署到我的 iPhone 4s 时，当手机锁定时，HTML 5 音频将无法播放。

我尝试升级应用程序以使用 PhoneGap 2.1.0，但是当手机被锁定时，应用程序仍然不会播放音频。（这是来自我的服务器的 mp3 文件流。）

在模拟器中一切正常，但在我运行 iOS 6 的 iPhone 4s 上不起作用。

我已将必需的后台模式设置为应用程序播放音频并且应用程序不在后台运行 = 是。它曾经在 iOS 5.1 下工作，但在 iOS 6 下不工作。我也尝试修改`sound.m`一些推荐的文件。即使我在 iOS 5.1 下不需要这样做

我尝试了一堆我在互联网上找到的示例，但似乎没有一个在 iOS 6 中有效。并允许 HTML 5 音频在手机锁定的情况下流式传输。

当 iPhone 在 PhoneGap 1.8.1 或 2.1 下的 iOS 6 中锁定时，我需要做什么才能播放 HTML 5 音频？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T06:25:02.850

不`Application does not run in background = Yes`强制应用程序终止而不是在后台运行？

这不是你想要的相反吗？也许尝试删除该键并将`UIBackgroundModes`设置保留为`audio`？

**编辑**：

看来，从 iOS 6 开始，您的应用程序必须将 设置`AVAudioSessionCategory`为`AVAudioSessionCategoryPlayback`能够在后台播放音频。当您使用 PhoneGap/Cordova Media API 时，PhoneGap/Cordova 会执行此操作，但在使用 HTML5 音频时，它永远不会被设置。

我使用我的[ExampleHTML5AudioStreaming](https://github.com/devgeeks/ExampleHTML5AudioStreaming)项目进行了测试，并在文件中添加了`UIBackgroundModes`-> `audio`only 但明确地将其设置为`AVAudioSessionCategory`（在 下）。`AVAudioSessionCategoryPlayback``AppDelegate.m``ProjectName/Classes`

我首先在 AppDelegate 中导入了 AVFoundation：

```
#import <AVFoundation/AVFoundation.h> 
```

然后我将以下内容添加到`application:(UIApplication*)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions`

```
AVAudioSession *audioSession = [AVAudioSession sharedInstance];
BOOL ok;
NSError *setCategoryError = nil;
ok = [audioSession setCategory:AVAudioSessionCategoryPlayback
                           error:&setCategoryError]; 
```

根据这个答案：[https ://stackoverflow.com/a/12414719/878602](https://stackoverflow.com/a/12414719/878602)

然后按预期在后台播放音频。

看起来没有为此向 Cordova 提交错误。我看看能不能寄一份。

# antlr3 - antlr - C 目标：如何使用向量

> ID：12770488
> 
> 赞同：0
> 
> 时间：2012-10-07T16:12:37.107
> 
> 标签：antlr3

我正在使用 antlr v3.4 C 目标，这是我将数据添加到向量中的方法：

```
options
{
     language = 'C';
}

scope Common_Param_Vec {
   pANTLR3_VECTOR common_params;   
}

bus 
   @init
   {  
      printf("In bus init");
      $Common_Param_Vec::common_params = antlr3VectorNew(10);
      printf("In bus init 2");
      $Common_Param_Vec::common_params->factoryMade = false;
   }
   :  common_param+   
      EOF 
   ; 
```

程序在“”行崩溃`$Common_Param_Vec::common_params = antlr3VectorNew(10);`，语句太简单了，我不知道可能出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:17:29.050

改为指针..

`pANTLR3_VECTOR *common_params;`

# javascript - 样式化文件字段 ruby on rails

> ID：12770498
> 
> 赞同：1
> 
> 时间：2012-10-07T16:13:30.007
> 
> 标签：javascript, jquery, ruby-on-rails, ruby

好的，所以我一直试图弄清楚如何为 rails 设置文件字段的样式几个小时，但一无所获。我想使用 css 和 js 设置我的文件字段的样式，但到目前为止我无法在 rails 中设置它的样式。我已经在下面列出了我到目前为止所拥有的内容。

**形式**

```
 <div class="field uploader blue">
    <%= f.text_field :photo, class: "filename", readonly: "readonly" %>
    <%= f.file_field :photo %>
  </div> 
```

**Javascript**

```
jQuery("input[type=file]").change(function(){$(this).parents(".uploader").find(".filename").val(jQuery(this).val());});
jQuery("input[type=file]").each(function(){
    if(jQuery(this).val()==""){jQuery(this).parents(".uploader").find(".filename").val("No file selected...");}
}); 
```

使用**html**而不是 rails工作

```
<div class="uploader blue">
  <input type="text" class="filename" readonly="readonly"/>
  <input type="button" name="file" class="button" value="Browse..."/>
  <input type="file" size="30"/>
</div> 
```

Rails 中的文件字段是否有任何帮助程序，或者我可以使用帮助程序拆分上传和输入按钮，以便我可以像获取 html 代码一样获取代码？

# nginx - 安装乘客和 nginx 时找不到 C 编译器 gcc

> ID：12770501
> 
> 赞同：10
> 
> 时间：2012-10-07T16:13:33.230
> 
> 标签：nginx, gcc, centos, sh, passenger

我正在尝试在我的 VPS 上安装Passenger 和 Nginx。

我按照[这些说明](http://library.linode.com/frameworks/ruby-on-rails-nginx/centos-5)将所有来源的所有链接替换为当前版本。

但是当我为 Nginx 运行 Phusion Passenger 安装程序时，gcc 编译器出现了问题：

```
Compiling and installing Nginx...
# sh ./configure --prefix='/opt/nginx' --with-http_ssl_module --with-http_gzip_static_module --with-cc-opt='-Wno-error' --add-module='/usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.17/ext/nginx'
checking for OS
 + Linux 2.6.32-220.el6.x86_64 x86_64
checking for C compiler ... not found

./configure: error: C compiler gcc is not found 
```

我该怎么办？

*OBS：我的 VPS 适用于 CentOS 6.2 x64*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-02T15:12:34.217

有同样的问题，下面的命令解决了；（在 ubuntu 服务器上）

```
sudo apt-get install linux-kernel-headers
sudo apt-get install build-essential 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-21T13:57:38.297

如果您确实安装了 gcc，则问题源于 /tmp 被安装为 noexec。该错误并不完全有帮助，但如果您将 /tmp 重新安装为 exec，您可以正确安装乘客。

```
mount -o remount,rw,exec,nosuid /tmp 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-02-02T14:35:28.600

得到同样的错误。刚刚安装 gcc 并开始工作：

> 百胜安装 gcc

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-02-04T00:55:56.640

同样的问题，我发现我无法运行命令，因为 root 必须使用

```
 sudo 
```

它就像魅力一样

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-03-23T21:06:30.067

如果适用，请确保您使用 sudo。

例子：

```
sudo ./configure ... 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-24T07:18:05.650

一个快速的 hack（我为此付出了很多努力，最后安装了预构建的）是安装 Nginx 的预构建包，而不是从源代码编译它。

对于 RHEL/CentOS，创建名为 /etc/yum.repos.d/nginx.repo 的文件，其内容如下：

```
[nginx]
name=nginx repo
baseurl=http://nginx.org/packages/OS/OSRELEASE/$basearch/
gpgcheck=0
enabled=1 
```

在上面`baseurl`将“OS”替换为“centos”，将“OSRELEASE”替换为“6”。

最后执行`yum install nginx`

参考[https://nginx.org/en/linux_packages.html#stable](https://nginx.org/en/linux_packages.html#stable)

# iphone - CVOpenGLESTextureCacheCreateTextureFromImage 而不是 glReadPixels

> ID：12770504
> 
> 赞同：1
> 
> 时间：2012-10-07T16:14:06.100
> 
> 标签：iphone, objective-c, opengl-es-2.0, glreadpixels

整整 3 天，我一直在尝试提高基于 glReadPixels 的 AVAssetWriter 的性能。我已经浏览了 Apple 的 RosyWriter 和 Camera Ripple 代码以及 Brad Larson 的 GPUImage，但我仍然摸不着头脑。我也一直在尝试使用这些链接中的实现：

[使用 ios-5-texture-cache-api 渲染到纹理](http://allmybrain.com/2011/12/08/rendering-to-a-texture-with-ios-5-texture-cache-api/)

[iphone-opengl-es-2-0 中的更快替代 glreadpixels](https://stackoverflow.com/questions/9550297/faster-alternative-to-glreadpixels-in-iphone-opengl-es-2-0)

......还有更多，但无论我尝试什么，我都无法让它发挥作用。视频最终没有被处理，或者出现黑色，或者我收到各种错误。我不会在这里介绍所有内容。

为了简化我的问题，我想我会专注于从屏幕上的 openGL 预览 FBO 中获取快照。如果我能得到这个工作的一个单一实现，我应该能够解决剩下的问题。我尝试了上面第一个链接的实现，看起来像这样：

```
CVOpenGLESTextureCacheCreate(kCFAllocatorDefault, NULL, [glView context], 
                           NULL, &texCacheRef);

CFDictionaryRef empty = CFDictionaryCreate(kCFAllocatorDefault,
                           NULL,
                           NULL,
                           0,
                           &kCFTypeDictionaryKeyCallBacks,
                           &kCFTypeDictionaryValueCallBacks);

CFMutableDictionaryRef attrs = CFDictionaryCreateMutable(kCFAllocatorDefault,
                                  1,
                                  &kCFTypeDictionaryKeyCallBacks,
                                  &kCFTypeDictionaryValueCallBacks);

CFDictionarySetValue(attrs,
                     kCVPixelBufferIOSurfacePropertiesKey,
                     empty);

CVPixelBufferRef renderTarget = NULL;
CVPixelBufferCreate(kCFAllocatorDefault,
                    width,
                    height,
                    kCVPixelFormatType_32BGRA,
                    attrs,
                    &renderTarget);

CVOpenGLESTextureRef renderTexture;
CVOpenGLESTextureCacheCreateTextureFromImage (kCFAllocatorDefault,
                                              texCacheRef,
                                              renderTarget,
                                              NULL,
                                              GL_TEXTURE_2D,
                                              GL_RGBA,
                                              width,
                                              height,
                                              GL_BGRA,
                                              GL_UNSIGNED_BYTE,
                                              0,
                                              &renderTexture);

CFRelease(attrs);
CFRelease(empty);
glBindTexture(CVOpenGLESTextureGetTarget(renderTexture), CVOpenGLESTextureGetName(renderTexture));
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

GLuint renderFrameBuffer;
glGenRenderbuffers(1, &renderFrameBuffer);
glBindFramebuffer(GL_FRAMEBUFFER, renderFrameBuffer);
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0,
                       GL_TEXTURE_2D, CVOpenGLESTextureGetName(renderTexture), 0);

//Is this really how I pull pixels off my context?
CVPixelBufferLockBaseAddress(renderTarget, 0);
buffer = (GLubyte *)CVPixelBufferGetBaseAddress(renderTarget);
CVPixelBufferUnlockBaseAddress(renderTarget, 0); 
```

这里到底应该发生什么？我的缓冲区最终是一堆零，所以我想我需要做一些额外的事情来从上下文中提取像素？...或者我错过了什么？

我想要实现的只是与我今天使用的更快的等价物：

```
int pixelsCount = w * h;
buffer = (GLubyte *) malloc(pixelsCount * 4);
glReadPixels(0, 0, w, h, GL_RGBA, GL_UNSIGNED_BYTE, buffer); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:43:27.177

正如布拉德指出的那样，我误解了这个概念并且没有进行任何实际渲染。当我添加它时工作正常。

# php - 从 HTML 中删除标签

> ID：12770505
> 
> 赞同：1
> 
> 时间：2012-10-07T16:14:07.863
> 
> 标签：php, html, str-replace

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T16:16:34.167

您可以使用[`strip_tags()`](http://php.net/manual/de/function.strip-tags.php).

```
strip_tags('<h1><a href="http://www.google.com/">Google</a>& Yahoo</h1>', '<h1>'); 
```

结果将是`<h1>Google & Yahoo</h1>`。如果你真的想要结果`<h1>& Yahoo</h1>`，你可以这样做：

```
preg_replace("@<a[^>]*?>.*?</a>@si", '', '<h1><a href="http://www.google.com/">Google</a>& Yahoo</h1>'); 
```

# php - Joomla PHP 文件

> ID：12770509
> 
> 赞同：0
> 
> 时间：2012-10-07T16:14:34.523
> 
> 标签：php, joomla, upload, joomla1.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T18:58:44.193

我们首先需要创建一个基本的 Joomla 模块结构，正如您将在默认的 Joomla 模块中看到的那样，例如“登录”。鉴于您只提供了您正在使用的文件和文件夹的屏幕截图，我只能提供给您。

所以第一个链接是这样的：

[http://docs.joomla.org/Creating_a_simple_module](http://docs.joomla.org/Creating_a_simple_module)

它向您展示了如何创建一个简单的模块，然后在 Google 上搜索其他教程。

此外，如果您不想创建自己的模块，您可以随时使用[Joomla Extensions Directory](http://extensions.joomla.org/)中的预制模块。

# javascript - JavaScript：查找 iframe 主体的尺寸

> ID：12770510
> 
> 赞同：0
> 
> 时间：2012-10-07T16:14:45.877
> 
> 标签：javascript, dom

我有一个在 iframe 中嵌入另一个页面的网页。我想要外部文档中的 JavaScript 函数来获取 iframe 中文档的大小（以像素为单位）。

我一直在探索 DOM 以及我能找到的与 iframe 本身相关的唯一属性，`width`并`height`给出**iframe 本身**的高度，该高度小于其中的文档。

例如

```
<iframe src="tall_page.php" id="my_iframe" style="height: 101px"></iframe>

...

var i = document .getElementById ("my_iframe");
i = i .contentDocument .body;
alert (i .offsetHeight); // or scrollHeight or clientHeight 
```

以上将给出“101”。我所追求的值是整个内容文档的大小，而不是框架 - 而不仅仅是`<body>`: 如果 CSS 给出`html{padding:x}`了例如，我希望它被引入。

我如何获得这个值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T16:34:07.537

使用 jQuery 这应该可以工作：

```
var height = $("my_iframe").height();
var width = $("my_iframe").width(); 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T18:00:00.587

我使用 contentWindow 对象让它工作。

我认为这里的想法是获取您在 iframe 中设置的元素的宽度/高度。在我的示例中，我使用 css 将 iframe 主体设置为 3000px，然后让它工作。

*请记住，由于您正在访问 iframe 的数据，因此您需要遵守同源策略*

这是我的例子：

**iframe.html**

```
<!DOCTYPE html>
<html lang='en'>
    <head>
        <title>My Iframe</title>
    </head>
    <body id='mybody' style='width:3000px;'>
        Hello!
    </body>
</html> 
```

**索引.html**

```
<!DOCTYPE html>

<html lang='en'>
    <head>
        <title>My Test</title>
        <script>
            window.onload = function() {
                var f = document.getElementById('myiframe');
                console.dir(f.contentWindow.document.getElementById('mybody').clientWidth);
            }
        </script>
    </head>
    <body>
        <iframe id='myiframe' src='iframe.html' height='480' width='640'>
        </iframe>
    </body>
</html> 
```

希望有帮助。

# android - android显示字符串

> ID：12770512
> 
> 赞同：0
> 
> 时间：2012-10-07T16:14:54.890
> 
> 标签：android, xml, string

我正在尝试将字符串从一个活动传递到另一个活动。我检索到这样的信息：

```
Intent openReadMail = getIntent();
String readfrom = openReadMail.getStringExtra("from"); 
```

现在我想在屏幕上显示这个字符串。我这个 xml TextView 元素：

```
 <TextView
        android:id="@+id/from"
        android:layout_width="match_parent"/> 
```

但我无法将字符串转换为文本视图，有没有更好的方法呢？谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T16:17:09.417

您必须为 TextView 创建一个变量，然后设置文本。

```
TextView fromtxt = (TextView) findViewById(R.Id.from);

Fromtxt.setText(readfrom); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T16:17:16.473

您需要使用您读入的字符串设置 TextView 的文本。

```
TextView tv = (TextView)findViewById(R.id.from);
tv.setText(readFrom); 
```

# iphone - iPhone iOS6 是否可以在手机锁定时运行加速度计（2012 年）？

> ID：12770513
> 
> 赞同：2
> 
> 时间：2012-10-07T16:15:07.360
> 
> 标签：iphone, ios6, accelerometer

我一直在浏览应用商店，发现了 2 个商业上成功的应用示例，它们吹嘘**能够在手机锁定**（按下电源按钮）的情况下运行基于加速度计的算法。这些应用程序是“睡眠周期警报”和“智能闹钟”

我从 2010 年和 2011 年看到了很多 Q 和 A，它们说当用户锁定设备时无法继续使用加速度计。然而，我看到至少有两个应用程序具有此功能。这就是我要问的原因 -**截至 2012 年 10 月是否存在一些新的 API 或解决方法，允许应用程序开发人员在按下手机电源按钮（手机锁定/睡眠）的情况下运行加速度计？还是只有最畅销的应用程序才能使用的秘密 API？**

谢谢您的意见！我知道有很多这样的问题，但我正在寻找 2012 年的最新信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T16:36:25.320

首先，没有秘密 api 只适用于最畅销的应用程序。Nad 我认为当手机处于睡眠模式或锁定时，可能有一种变通方法来获取加速度计的数据。

此链接可能会为您提供解决方案的方法，请查看

[屏幕锁定时启用 iPhone 加速度计](https://stackoverflow.com/questions/2529422/enable-iphone-accelerometer-while-screen-is-locked)

# php - php - 按字母顺序排列的订单列表

> ID：12770514
> 
> 赞同：-1
> 
> 时间：2012-10-07T16:15:08.587
> 
> 标签：php, sql

我有一个php代码：

```
function display_categories_list($categories_list) {

    $display .= '<ul data-role="listview" data-theme="d" >';
    for($i=0; $i<count($categories_list); $i++) {
        $display .= '<li><a href="javascript:" class="displayStoresListByCategoryBtn" id="'.$categories_list[$i]['id'].'">';
        $display .= '<h3>'.$categories_list[$i]['name'].'</h3>';
        $display .= '<span class="ui-li-count"><font color="red"><small>'.$categories_list[$i]['nb'].'</small></font></span>';
        $display .= '</a></li>';
    }
    $display .= '</ul>';

    return $display;
} 
```

我无法访问 sql 查询，我想用“名称字母 ASC”对我的结果进行排序。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:37:30.597

```
$categories_list[0]['name'] = "Bob";
$categories_list[0]['id'] = 1;
$categories_list[1]['name'] = "Carol";
$categories_list[1]['id'] = 2;
$categories_list[2]['name'] = "Ted";
$categories_list[2]['id'] = 3;
$categories_list[3]['name'] = "Alice";
$categories_list[3]['id'] = 4;

// Obtain a list of columns
foreach ($categories_list as $key => $row) {
    $tmp[$key]  = $row['name'];
}

array_multisort($tmp, SORT_ASC, $categories_list);

print_r($categories_list); 
```

给出：

```
Array
(
    [0] => Array
        (
            [name] => Alice
            [id] => 4
        )

    [1] => Array
        (
            [name] => Bob
            [id] => 1
        )

    [2] => Array
        (
            [name] => Carol
            [id] => 2
        )

    [3] => Array
        (
            [name] => Ted
            [id] => 3
        )

) 
```

[http://php.net/manual/en/function.array-multisort.php](http://php.net/manual/en/function.array-multisort.php)

# c# - 为什么找不到我的扩展方法？

> ID：12770518
> 
> 赞同：0
> 
> 时间：2012-10-07T16:15:45.840
> 
> 标签：c#, methods

我想向字符串添加一个方法，将空格字符转换为下划线（扩展方法），我部署了代码，但为什么它不起作用？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            string name = "moslem";
            string.SpaceToUnderScore(name);
        }

        public static string SpaceToUnderScore(this string source)
        {
            string result = null;
            char[] cArray = source.ToArray();
            foreach (char c in cArray)
            {
                if (char.IsWhiteSpace(c))
                {
                    result += "_";
                }
                else
                {
                    result += c;
                }
            }
            return result;
        }
    }
} 
```

为什么它不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T16:23:34.180

首先将您的扩展方法放入静态类，然后调用为`name.SpaceToUnderScore()`

```
var newstr = "a string".SpaceToUnderScore();

public static class SomeExtensions
{
    public static string SpaceToUnderScore(this string source)
    {
        return new string(source.Select(c => char.IsWhiteSpace(c) ? '_' : c).ToArray());
        //or
        //return String.Join("",source.Select(c => char.IsWhiteSpace(c) ? '_' : c));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T16:18:12.233

扩展方法应该写在静态类中。

例子

```
public static class StringExtension
{
    public static string SpaceToUnderScore(this string source)
    {
        string result = null;
        char[] cArray = source.ToArray();
        foreach (char c in cArray)
        {
            if (char.IsWhiteSpace(c))
            {
                result += "_";
            }
            else
            {
                result += c;
            }
        }
        return result;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T16:21:30.080

在不更改扩展方法中的代码的情况下，将扩展方法添加到静态类：

```
public static class MyExtensions // Name this class to whatever you want, but make sure it's static.
{
    public static string SpaceToUnderScore(this string source)
    {
        string result = null;
        char[] cArray = source.ToArray();
        foreach (char c in cArray)
        {
            if (char.IsWhiteSpace(c))
            {
                result += "_";
            }
            else
            {
                result += c;
            }
        }
        return result;
    }
} 
```

然后像这样调用它：

```
string name = "moslem";
string underscoreName = name.SpaceToUnderScore(); // Omit the name parameter (prefixed with this) when called like this on the string instance. 

// This would work to:
string underscoreName = MyExtentions.SpaceToUnderScore(name); 
```

如果您没有找到扩展方法，请确保您使用的是静态类的命名空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T16:21:52.063

```
public static class MyStringExtenstionClass
{

    public static string SpaceToUnderScore(this string source)
    {
        string result = null;
        char[] cArray = source.ToArray();
        foreach (char c in cArray)
        {
            if (char.IsWhiteSpace(c))
            {
                result += "_";
            }
            else
            {
                result += c;
            }
        }
        return result;
    }
} 
```

像这样

```
 string name = "John Doe";
 name = name.SpaceToUnderScore(); //no argument and called on instance of string 
```

# python - 从文件中读取并将值作为sql中的参数传递

> ID：12770521
> 
> 赞同：1
> 
> 时间：2012-10-07T16:16:08.497
> 
> 标签：python, mysql

当我输入

```
SELECT word from xyz WHERE number = '+12340008933'; 
```

进入 phpmyadmin 并运行它，我得到一个有效的查询输出。

但是，当我从文件中读取数字时，它不会返回任何内容。例如

```
base_dir = "/home/jayjay/Desktop/scripts/"

filehandle = open(base_dir+"inputFile.txt",'r')
for number in filehandle.readlines():
    sql = "SELECT word from xyz WHERE number = '%s';"%number
    cursor.execute(sql)
    rows = cursor.fetchall()
    for row in rows:
        print row[0] 
```

这不返回任何内容。一点也不。我已经从 Unix2dos 转换了输入文件，反之亦然，假设输入文件可能有问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T17:30:53.953

您应该使用参数化的 SQL 语句而不是字符串替换，这很容易导致 SQL 注入。此外，您可能需要去除从文件中读取的值周围的任何空格。尝试以下操作：

```
base_dir = "/home/jayjay/Desktop/scripts/"

filehandle = open(base_dir+"inputFile.txt",'r')
for number in filehandle.readlines():
    sql = "SELECT word from xyz WHERE number = %s"
    cursor.execute(sql, (number.strip(),))
    rows = cursor.fetchall()
    for row in rows:
        print row[0] 
```

# java - 在类中实现一个类

> ID：12770526
> 
> 赞同：1
> 
> 时间：2012-10-07T16:16:31.707
> 
> 标签：java, swing, error-handling, jsr296, jform

我正在尝试在 JAVA 的一个类中实现一个类，就像这样

```
package test;
import java.awt.event.*;
import javax.swing.*;
/**
 *
 * @author jackandjill
 */
public class Summingup extends JFrame {

    /**
     * Creates new form Summingup
     */
    public Summingup() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        input1_tb = new javax.swing.JTextField();
        calculate_btn = new javax.swing.JButton();
        result_lbl = new javax.swing.JLabel();
        input2_tb = new javax.swing.JTextField();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jLabel1.setText("Input 1");

        jLabel2.setText("Input 2");

        calculate_btn.setText("SUM");

        result_lbl.setText("RESULT DISPLAYED HERE!");

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(jLabel1)
                        .addGap(18, 18, 18)
                        .addComponent(input1_tb))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(jLabel2)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGap(18, 18, 18)
                                .addComponent(result_lbl))
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGap(18, 18, 18)
                                .addComponent(input2_tb)))))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(calculate_btn)
                .addContainerGap())
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(1, 1, 1)
                        .addComponent(calculate_btn, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel1)
                            .addComponent(input1_tb, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel2)
                            .addComponent(input2_tb, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 20, Short.MAX_VALUE)
                .addComponent(result_lbl)
                .addContainerGap())
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(Summingup.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(Summingup.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(Summingup.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(Summingup.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new Summingup().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JButton calculate_btn;
    private javax.swing.JTextField input1_tb;
    private javax.swing.JTextField input2_tb;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JLabel result_lbl;
    // End of variables declaration
}

class InvalidValueException implements ActionListener
{
    public void actionPerformed(ActionEvent ae)
    {
         try
       {
           if(ae.getSource() ==calculate_btn)
           {
               String input_1 = input1_tb.getText();
                String input_2 = input2_tb.getText();

                checkBlanklnput(input_1,input_2);

                validateInput(Integer.parseInt(input_1),Integer.parseInt(input_2));

                result_lbl.setText(calculate(Integer.parseInt(input_1),Integer.parseInt(input_2)));

           }
       }

       catch (NumberFormatException excep)
       {
        result_lbl.setText("Invalid number");
       }
       catch (InvalidInputException excep)
       {
         result_lbl.setText(excep.getMessage());
       }
       catch (BlankInputException excep)
       {
         result_lbl.setText(excep.getMessage());
       }

    }

    public void checkBlanklnput(String input1,String input2) throws BlanklnputException 
    {
        if (input1.length() == 0 ||input2.length() == 0) throw new BlanklnputException();
    }

    public void validateInput(int input1 , int input2) throws InvalidInputException
    {

        if (input1 + input2 > 100 )
        throw new InvalidInputException();
    }

    public String calculate(int input1, int input2)
    {
        String res = "";
        while (true) 
        {
            res = Integer.toString(input1 + input2);
            break;
        }
        return res;

    }

}

class InvalidInputException extends Exception {

public InvalidInputException() {

super("Invalid number");

}
}
class BlankInputException extends Exception {

public BlankInputException() {

super("Input cannot be blank");

} 
 } 
```

所以这个类也抛出了很多异常并捕获它们。但唯一的问题是在*InvalidValueException*类中无法识别 JForm 控件。不知道如何将这些控件打开到此类。

我面临的另一个问题是我的 validateInput 正在检查最大总和，但我想检查是否在文本框中输入了除数字以外的任何字母。

这就是我的 GUI 的样子

![在此处输入图像描述](../Images/cfc1dd5680dbbcc68aaac3358a430f5e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T23:00:05.287

[您可以将您的实现与此处](https://stackoverflow.com/a/8703807/230513)显示的工作示例进行比较。它用于`JFormattedTextField`强制数字输入，以及用于更新总和的`PropertyChangeListener`& 。`FocusListener`

![图片](../Images/da198202c73172eee03f84bd2053d010.png)

顺便说一句，您应该在过度依赖 GUI 编辑器之前研究[布局。](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)另请参阅[*嵌套类*](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)。

附录：`BlankInputException`拼写错误，您的（奇怪的名字）`ActionListener`未被使用。您应该能够使用自定义代码属性对其进行初始化。

```
calculate_btn.addActionListener(new InvalidValueException()); 
```

# php - Joomla 2.5 - 如何在博客类别布局中隐藏特色文章？

> ID：12770527
> 
> 赞同：3
> 
> 时间：2012-10-07T16:16:31.237
> 
> 标签：php, joomla2.5

在主页上，我有一个文章滑块模块，它显示“A”类别的特色文章。

在同一页面上，在滑块下方，我想在博客类别布局中显示类别“A”中的非特色文章。问题是，在 Joomla 设置（菜单类型：博客类别）中，我没有找到任何隐藏精选文章的选项。

我也没有找到外部组件，所以我想做一个 joomla core hack。我只是不知道，应该修改哪个 php 文件...我已经查看了 /templates/ *mytemplate* /html/com_content，但这些文件是用于显示文章，而不是用于查询本身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:16:24.513

为此，我使用了 Eike 的 mod_placehere 模块。这是一个非常有用的模块，它适用于最新的 Joomla 2.5

# php - Jquery - 每次单击 div 时使用 $_GET 变量提取新数据

> ID：12770531
> 
> 赞同：0
> 
> 时间：2012-10-07T16:16:41.607
> 
> 标签：php, jquery, ajax

我会尽力解释这一点，因为我有点摸索，因为这是我第一次做这样的事情。

在页面的开头，我调用了一个返回 3 个配方的函数，然后创建变量并为每个变量分配一个配方 ID：

```
$meal = builder::buildMealPlan(1200,0,0,0,3);

$id1 = $meal[0][id];
$id2 = $meal[1][id];
$id3 = $meal[2][id]; 
```

所以我现在知道函数选择的 3 个配方的 id，然后我在 3 个 div 中显示这 3 个配方：

```
<div id="meal1"><h2><? print_r($meal[0]); ?></h2></div>
<div id="meal2"><h2><? print_r($meal[1]); ?></h2></div>
<div id="meal3"><h2><? print_r($meal[2]); ?></h2></div> 
```

当点击这些 div 中的任何一个时，这意味着您不喜欢该食谱并想要一个不同的食谱，它会调用一个带有 4 个参数（id1、id2、id3、clicked）的页面，基本上告诉它当前显示为的 3 个食谱以及单击了哪个，因此我可以找到具有 2 个相同 id 的食谱的另一种组合，以及新的：

```
$(document).ready(function(){
$("#meal1").click(function(){
  $.get("testing-01.php?id1=<?echo $id1;?  >&id2=<?echo $id2;?>&id3=<?echo $id3;?>&clicked=1", function(result){
    $("#meal1").html(result);
}); 
```

});

这很好用，选择了正确的配方并使用新配方刷新了 div，但是我现在的问题是，如果您再次单击任何 div，它会一遍又一遍地使用相同的配方刷新，因为我的 php 变量（ $id1, $id2, $id3) 总是相同的值，因为页面永远不会重新加载。

我的问题：如何使用 onclick 事件的结果设置 javascript 变量？现在点击事件将 div 替换为以下数据：

```
$.get("testing-01.php?id1=<?echo $id1;?  >&id2=<?echo $id2;?>&id3=<?echo $id3;?>&clicked=1 
```

但是，每次单击 div 时，我都需要以某种方式用新值更新我在上述语句中发送的变量。

如果你读到这里，谢谢，如果我遗漏了重要/明显的东西，请告诉我，我会添加它。

编辑：好的，我现在可以输出 JSON 了：

```
 {"mealnumber":1,"id":"69","title":"Protein Packed Meatloaf","description":"This meatloaf is packed with protein to help your muscles grow.","cookingtime":"00:25 ","preptime":"00:10 ","servings":"4.00","rating":"0.000","calories_ps":"205.00","carbohydrate_ps":"7.70","protein_ps":"20.55","fat_ps":"9.64"} 
```

我的 JS 代码试图表明我至少正确地阅读了它：

```
 $(document).ready(function(){
 $("#meal1").click(function(){

     $.getJSON("testing-01.php?id1="+id1+"&id2="+id2+"&id3="+id3+"&clicked=1",      function(data) {
        $.each(data.items, function(i, item) {
        console.log(item.id);
        alert(item.id);
        });
    });
    }); 
```

});

但是，当我单击 div 时，没有任何记录或警报...我在这里遗漏了一些明显的东西吗？我可以在控制台中看到它正在调用正确的页面，如果我复制并粘贴 URL，我会得到上面粘贴的 json 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:34:14.367

我不确定我是否了解您所需要的一切，但我想您需要在 get 方法中更改这 3 个 ID。

您可以制作一些存储 3 个 id 的简单 javascript 对象，并在成功 ajax 上重写它...购买您需要更好的响应，然后只是 html...尝试 json...

```
 $(document).ready(function(){
    $("#meal1").click(function(){
      $.get("testing-01.php?id1="+SomeJavascriptObject.id1"&id2="+SomeJavascriptObject.id2"&id3="+SomeJavascriptObject.id3"&clicked=1", function(result){

       SomeJavascriptObject.id1 =result.returnedID1;
 SomeJavascriptObject.id2 = result.returnedID2;
 SomeJavascriptObject.id3 = result.returnedID3;
        $("#meal1").html(result.html);
    }); 
```

[也许这可以帮助你。](https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript)

# c - 如何在 C 中逼近无限级数中的 e

> ID：12770533
> 
> 赞同：0
> 
> 时间：2012-10-07T16:16:45.913
> 
> 标签：c, math, loops, recursion, infinite

所以我正在尝试解决这个问题：

![问题](../Images/82fa8d70d77b4c8bab511d90e373ad2a.png)

但是，我不完全确定从哪里开始或我到底在寻找什么。

此外，有人告诉我，我应该期望给程序输入，例如：零 (0)、非常小 (0.00001) 和不那么小 (0.1)。

我得到了这个：[http](http://en.wikipedia.org/wiki/E_%28mathematical_constant%29) ://en.wikipedia.org/wiki/E_%28mathematical_constant%29作为参考，但是该公式看起来与问题中的公式不完全相同。

最后，有人告诉我程序的输入是一个小数 Epsilon。例如，您可以假设 0.00001f。

您不断添加无限级数，直到当前项的值低于 Epsilon。

但总而言之，我不知道这意味着什么。我有点理解维基上的方程式。但是，我不确定从哪里开始给出问题。看看它，有没有人知道我应该在 C 中使用什么样的公式，什么是“E”以及它在这里发挥作用（即在公式中，我知道它应该是用户输入）。

**到目前为止的代码**

```
#include <stdio.h>
#include <math.h>

//Program that takes in multiple dates and determines the earliest one
int main(void)
{
    float e = 0;
    float s = 0;
    float ct = 1;
    float ot= 1;
    int n = 0;
    float i = 0;
    float den = 0;
    int count = 0;

    printf("Enter a value for E: ");
    scanf("%f", &e);

    printf("The value of e is: %f", e);

    for(n = 0; ct > e; n++)
    {
        count++;
            printf("The value of the current term is: %f", ct);

        printf("In here %d\n", count);

        den = 0;

        for(i = n; i > 0; i--)
        {
            den *= i;
        }

        //If the old term is one (meaning the very first term), then just set that to the current term
        if (ot= 1)
        {
            ct = ot - (1.0/den);
        }
        //If n is even, add the term as per the rules of the formula
        else if (n%2 == 0)
        {
            ct = ot + (1.0/den);
            ot = ct;
        }
        //Else if n is odd, subtract the term as per the rules of the formula
        else
        {
            ct = ot - (1.0/den);
            ot = ct;
        }

        //If the current term becomes less than epsilon (the user input), printout the value and break from the loop
        if (ct < epsilon)
        {
            printf("%f is less than %f",ct ,e);
            break;
        }
    }

    return 0;
} 
```

**电流输出**

```
Enter a value for E: .00001
The value of e is: 0.000010
The value of the current term is: 1.000000
In here 1
-1.#INF00 is less than 0.000010 
```

因此，根据每个人的评论，并使用维基百科中的第 4 个“错位”方程式，就像我被告知的那样，这就是我想出的代码。我脑海中的逻辑似乎与大家所说的一致。但是输出根本不是我想要实现的。有没有人通过查看这段代码知道我可能做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T01:56:29.113

`Σ`表示总和，因此您的等式意味着计算从 n=0 开始并趋向无穷大的项的总和：

![在此处输入图像描述](../Images/23b9930ff323c8b7431bb00898213829.png)

该符号`n!`表示“阶乘”，它是数字 1 到 n 的乘积：

![在此处输入图像描述](../Images/feb8414b041a44b4575ce9a26c23ff6b.png)

计算的每次迭代都更准确地代表了实际值。 `ε`是一个误差项，表示迭代的变化小于 ε 量。

要开始计算交互，您需要一些起始条件：

```
unsigned int n = 0; // Iteration.  Start with n=0;
double fact = 1;    // 0! = 1\.  Keep running product of iteration numbers for factorial.
double sum = 0;     // Starting summation.  Keep a running sum of terms.
double last;        // Sum of previous iteration for computing e
double e;           // epsilon value for deciding when done. 
```

那么算法很简单：

1.  存储之前的总和。
2.  计算下一个总和。
3.  更新 n 并计算下一个阶乘。
4.  检查新旧迭代的差异是否超过 epsilon。

编码：

```
do {
    last = sum;
    sum += 1/fact;
    fact *= ++n;
} while(sum-last >= e); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T22:16:35.850

好吧，实际上这个程序与 Deitel 在学习 C 语言中给出的程序非常相似，现在说到重点（错误不能为 0，因为 e 是一个无理数，因此无法精确计算）我这里有一个可能对你非常有用的代码。

```
#include <stdio.h>

/* Function Prototypes*/
long double eulerCalculator( float error, signed long int *iterations );
signed long int factorial( int j );

/* The main body of the program */
int main( void ) 
{
    /*Variable declaration*/
    float error;
    signed long int iterations = 1;

    printf( "Max Epsilon admited: " );
    scanf( "%f", &error );
    printf( "\n The Euler calculated is: %f\n", eulerCalculator( error, &iterations ) ); 
    printf( "\n The last calculated fraction is: %f\n", factorial( iterations ) );
    return 1;
}

long double eulerCalculator( float error, signed long int *iterations ) 
{
    /* We declare the variables*/
    long double n, ecalc;

    /* We initialize result and e constant*/
    ecalc = 1; 

    /* While the error is higher than than the calcualted different keep the loop */
    do {

        n = ( ( long double ) ( 1.0 / factorial( *iterations ) ) );
        ecalc += n;
        ++*iterations;

    } while ( error < n );

    return ecalc;
}

signed long int factorial( signed long int j )
{
    signed long int b = j - 1;

    for (; b > 1; b--){
        j *= b;
    }

    return j;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T16:22:25.503

该求和符号为您提供了一个线索：您需要一个循环。

是什么`0!`？1，当然。因此，您的 e 起始值为 1。

接下来，您将为 n 编写一个从 1 到某个较大值的循环（无穷大可能建议使用 while 循环），在其中计算每个连续项，查看其大小是否超过您的 epsilon，并将其添加到 e 的总和中。

当您的条件小于您的 epsilon 时，停止循环。

现在不要担心用户输入。让你的功能正常工作。硬编码一个 epsilon，看看当你改变它时会发生什么。保留最后一位的输入。

你需要一个好的阶乘函数。（不正确 - 感谢 Mat 提醒我。）

你问过常数 e 是从哪里来的吗？系列呢？该级数是指数函数的泰勒级数展开。查看任何介绍微积分的文本。常数 e 是指数为 1 的简单指数函数。

我有一个不错的 Java 版本在这里工作，但我不会发布它。它看起来就像 C 函数一样，所以我不想放弃它。

更新：既然你已经展示了你的，我会告诉你我的：

```
package cruft;

/**
 * MathConstant uses infinite series to calculate constants (e.g. Euler)
 * @author Michael
 * @link
 * @since 10/7/12 12:24 PM
 */
public class MathConstant {

    public static void main(String[] args) {
        double epsilon = 1.0e-25;
        System.out.println(String.format("e = %40.35f", e(epsilon)));
    }

    // value should be 2.71828182845904523536028747135266249775724709369995
    //          e =    2.718281828459045
    public static double e(double epsilon) {
        double euler = 1.0;
        double term = 1.0;
        int n = 1;
        while (term > epsilon) {
            term /= n++;
            euler += term;
        }
        return euler;
    }
} 
```

但是如果你需要一个阶乘函数，我会推荐一个表格、记忆和伽玛函数，而不是天真的学生实现。如果您不知道这些是什么，请谷歌搜索。祝你好运。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-07T16:23:58.227

您需要编写一个开始的 C 程序。互联网上有很多资源，包括如何从 argc 和 argv 变量获取用户输入。如果未输入，您似乎将 0.00001f 用于 epsilon。（在尝试让程序接受输入之前，使用它来让程序工作。）

为了计算系列，您将使用一个循环和一些变量：sum、current_term 和 n。在每次循环迭代中，使用 n 计算 current_term，递增 n，检查当前项是否小于 epsilon，如果不是，则将 current_term 添加到总和中。

这里要避免的大陷阱是错误地计算整数除法。例如，您将希望避免使用 1/n 之类的表达式。如果要使用这样的表达式，请改用 1.0/n。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-23T13:31:03.370

编写一个 MAIN 函数和一个 FUNCTION 来计算以下系列的近似和。

```
 (n!)/(2n+1)!  (from n=1 to infinity) 
```

在 MAIN 函数中：

*   从标准输入中读取 DOUBLE（所需精度）类型的变量 EPSILON。EPSILON 是一个极小的正数，小于或等于 10^(-6)。
*   EPSILON 值将作为参数传递给 FUNCTION。

在功能内：

*   在 do-while 循环中：
    *   继续累加项直到 |Sn+1 - Sn| < 爱普生。
    *   Sn 是前 n 项的总和。
    *   Sn+1 是前 (n+1) 项的总和。当达到所需的精度 EPSILON 时，打印 SUM 和添加到总和的 TERMS 数。

一次用不同的 EPSILON 值（从 10^(-6) 到 10^(-12)）测试程序。

# html - 有人可以解决这个问题吗？（基本 HTML）

> ID：12770537
> 
> 赞同：0
> 
> 时间：2012-10-07T16:17:29.743
> 
> 标签：html

我正在使用此代码将嵌入式 .swf 文件链接到 iframe 内的另一个页面：

```
<div onmousedown="window.location.href='http://www.pagewhichopens.com'" height=26 width=100>
    <object height=26 width=100>
        <param name="movie" value="http://www.bcd.com/embeddedfile.swf">
        <param name="wmode" value="transparent" />
        <embed wmode=transparent allowfullscreen="true" allowscriptaccess="always" src="http://www.bcd.com/embeddedfile.swf" height=26 width=100></embed>
    </object>
</div> 
```

但是当我点击 swf 时，另一个页面只在我不想要的 iframe 内打开，我希望它在整个浏览器中打开......这可以通过插入 target="_parent" 来完成，但是我应该在哪里放吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T16:28:37.260

用于`top.location`设置顶部框架或`parent.location`直接父级的位置。`window`指当前上下文（在框架内）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-07T16:18:46.197

要在新选项卡中打开一些链接，请使用`target="_blank"`来实现此目的

# asp.net - 如何在 asp.net 中设置另一个页面的 cookie？

> ID：12770545
> 
> 赞同：0
> 
> 时间：2012-10-07T16:18:14.920
> 
> 标签：asp.net, cookies, setcookie, cookiestore

我的项目有问题。我的尝试是使用我的网站以编程方式登录`HttpWebRequest`网站。之后，我使用`CookieContainer`收集所有返回的 cookie，并使用它们从该网站上抓取数据。

一切运行良好。

现在我想将 cookie 设置到浏览器，以便其他用户也可以使用 cookie。我应该怎么做才能保存`CookieContainer`到浏览器？

# mysql - 求关于mysql 5.6 memcache集成的说明

> ID：12770547
> 
> 赞同：3
> 
> 时间：2012-10-07T16:18:22.590
> 
> 标签：mysql, nosql, memcached

我很难清楚地了解 MySQL 5.6 引入了 w/r/t memcache 什么。

据我了解，memcache 本身本质上是一个巨大的、共享的、驻留内存的哈希表，由服务器**memcached**管理。特别是，它对持久数据存储一无所知，并且在这方面不提供任何服务。它只知道**键**和**值**（如 Perl 哈希）。

我*认为*mySQL 5.6 引入的是**NoSQL API**，由此 mySQL 客户端可以通过密钥*从 mySQL 服务器*请求数据，而不是通过 SELECT 语句。（同样，他们可以使用 key=value 对执行更新）。MySQL 使用**memcached**将这些缓存在内存中以提高性能，但也负责处理诸如在缓存过期之前将更新写回数据库等事情。

换句话说，**memcached**的使用是 mySQL 5.6 NoSQL 特性的一个实现细节，并不是应用程序员需要注意的事情。

我欢迎对我的理解进行任何更正或放大。

谢谢，章

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T00:27:12.910

我认为这很简单（来自官方文档）：

我不同意你的最后一句话，应用程序程序员必须真正了解 memcache 插件，因为将它安装在 MySQL 服务器上意味着他可以决定（也许他将被迫）通过 memcached 语言接口或通过SQL接口

为了更好地理解这个插件对应用程序设计的影响，您应该知道 MySQL 使用 3 个配置表来进行适当的 memcached 管理；了解“cache_policies”的工作原理将为您的一些疑问提供一些帮助：

> 表 cache_policies 指定是使用 InnoDB 作为 memcached 的数据存储（innodb_only），还是使用传统的 memcached 引擎作为 backstore（仅缓存），或两者兼而有之（缓存）。在最后一种情况下，如果 memcached 在内存中找不到键，它会在 InnoDB 表中搜索值。

这是链接：[innodb-memcached-internals](http://dev.mysql.com/doc/refman/5.6/en/innodb-memcached-internals.html)

上面的这句话意味着，根据您对特定键值的决定，您将有不同的应用场景：

1.  innodb_only -> 表示可以通过sql接口或memcached接口查询数据，这里是一些memcached语言接口示例的链接[memcached-interfaces](http://dev.mysql.com/doc/refman/5.0/en/ha-memcached-interfaces.html)

    1.  cache-only -> 表示您应该只通过 memchached 接口查询数据
    2.  缓存 -> 表示你可以同时使用这两个接口（注意存储机制略有变化）

当然，后一种配置决定与您的特定需求密切相关

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T00:55:40.903

恐怕我并没有给你一个完整的答案，因为我也在努力寻找我需要的细节，然后再玩弄它。

话虽如此，但我设法发现您似乎遗漏了一个重要点，即通过新插件访问 InnoDB 存储引擎，您实际上完全绕过了 SQL 并避免了随之而来的所有开销。

这当然使它本质上是一个键/值存储，更类似于大多数 NoSQL 数据库，并具有与之相关的所有缺点。即没有加入等...

然而，对于这些天的许多应用程序而言，这正是我们想要的。我遇到的现实世界中只有少数几个性能提及，但似乎都指出这个实现明显优于 MongoDB 和其他类似的 NoSQL 解决方案（我不知道其中有多少真相），甚至一个（相对于深度）比较声称在商用服务器上高达 700k qps（相比之下，在经过良好调整的 MySQL 设置上约为 100k），如果属实，这令人难以置信。

资源在这里：

[http://yoshinorimatsunobu.blogspot.co.uk/search/label/handlersocket](http://yoshinorimatsunobu.blogspot.co.uk/search/label/handlersocket)

无论如何，对不起，我不能再帮忙了，但至少它值得深思！

# php - 用于列出 s3 文件夹的 aws sdk php

> ID：12770548
> 
> 赞同：7
> 
> 时间：2012-10-07T16:18:22.840
> 
> 标签：php, amazon-s3, amazon-web-services

我知道的几件事。文件夹不是 S3 的概念，它们只是一个零字节对象，其键名使用“/”作为前缀。假设为简单起见，我们称它们为文件夹和文件会使我的问题更容易表达。

可以使用前缀 ="root/" 执行 s3->get_object_list(..) 并获取所有文件/文件夹。我的问题是这个。

给定文件夹和子文件夹的列表，例如

```
root/  
root/folder1/  
root/folder1/file1.txt  
root/folder2/ 
root/folder3/file2.txt 
```

我怎样才能只列出文件夹。我希望阻止列出所有文件（即使作为响应，它们也不需要返回）但是 php 中的 get_object_list 当前不支持 commonPrefixes 参考：[http](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/#m=AmazonS3/get_object_list) ://docs.amazonwebservices.com/AWSSDKforPHP/latest/#m=AmazonS3/get_object_list 甚至虽然文档这么说，但代码显然没有，并且使用分隔符实际上只会返回根文件夹中的文件（前缀）

我想知道是否有人使用任何基于响应或请求的技术来帮助解决这种情况。

我已经尝试过所有我能想到的前缀、分隔符和标记的组合。PCRE 不太好，但我确信我可以使用我只有一层深文件夹，但我不知道如何为这种情况构建一个。由于我的请求不起作用，我继续接受所有文件和文件夹的响应，并希望在 php 中对其进行排序......或者我想

我在回复中尝试过：dirname() - 没有用会遗漏一些文件夹（空文件夹），确保我可以删除数组中的重复项，但存在丢失文件夹的问题 pathinfo() - 与 dirname() 的行为方式相同，假设所有路径都以文件名结尾。glob - 不走运，和上面一样。

由于我已经在这上面浪费了半天时间，我希望有人已经处理了这个问题并愿意分享：

注意：我在 python 和 boto 中这样做没有问题。但这不是 python，我必须在 PHP 中为此项目执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T21:48:07.953

你混淆`get_object_list()`了`list_objects()`. 请参阅：[https ://forums.aws.amazon.com/thread.jspa?threadID=106277&tstart=0](https://forums.aws.amazon.com/thread.jspa?threadID=106277&tstart=0)

# php - Twitter最新的OAuth系统冲突

> ID：12770549
> 
> 赞同：0
> 
> 时间：2012-10-07T16:18:24.543
> 
> 标签：php, twitter, twitter-oauth, bit.ly

我有一个网站..以前当我在我的博客中上传新帖子时..它会自动发布到 Twitter。但是由于新版本的 OAuth 系统..它不再起作用了...有人可以帮我弄清楚要更改的内容吗？

我的代码是：

```
'Twitter'=>array(
    'enabled' => true, //set to false to shut off twitter integration
    'username' => 'blogspott', //your twitter.com username
    'password' => 'W3Sw9OpW6HvZYl', //your twitter.com pasword
    'consumer_key' => 'TdQS15VHBdZNIrQ7RPqVQ',
    'consumer_secret' => 'B2Xe5h3lHXVXUgoCAxgAIdJDTeBf6AywRoGiTwB7I',
    'oauth_token' => '283508422-FkiIyZq2tpx1PQOyBLyWyomXY9OdMKxxSKGcg9d3',
    'oauth_token_secret' => '548kxcZCvhytdRkJ405QeWONvMyXNEpSZszIMEYU4W4',
    'tweet'=>'#%POST% for just %URL-TO-POST% %LINK%',

    // Bit.ly / URL Shortening
    // Within your Tweets, auto-append short URLs i.e., bit.ly/s8dJksm, to save on space. 
    // Sign up for an API account at http://bit.ly, and place the information
    // for that account in the box below
    'short_url'=>array(
        'append_short_url'=>false,  
        'short_url_provider'=>'bit.ly',   // current option: bit.ly only (default), more soon!
        'bitly'=>array(
            'login' => 'o_78ocugrkqtf',
            'api_key' => 'R_734dbe3be47605c405f4e19ec35eb617'
        ),
    )
), 
```

我在这里使用了正确的键..我已经仔细检查过了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T22:38:26.503

Twitter 最近没有更改其 OAuth 系统。它不关心有争议的 Twitter API 1.1。因此，请确认您正在按照 Twitter 的要求执行此操作，并且您没有使用已弃用的端点（Twitter 最近删除了其中一些端点）。

# git - 我的拉取请求已合并，下一步该怎么做？

> ID：12770550
> 
> 赞同：117
> 
> 时间：2012-10-07T16:18:24.683
> 
> 标签：git, github

我最近参与了一个来自 GitHub 的项目。我做了以下事情：

分叉原始存储库，将其克隆到我的本地计算机，创建一个分支以修复现有错误，修复该分支中的错误，将该分支推送到我的存储库，向存储库的作者发送拉取请求以将我的**修复**分支合并到它的主分支。

这是我第一次提交别人的代码，所以我不知道该怎么做。现在我的拉取请求已被作者合并到原始仓库/项目中。

**接下来我该怎么办？**我应该删除分支吗？我应该合并分支吗？还要别的吗？

* * *

### 附加信息：

原始项目只有一个分支。

我还有一个上游集，可以从原始存储库中获取最新更新。*（我是这样做的）*：

```
git remote add upstream https://path/to/original/repo.git 
```

我得到这样的更新：

```
git fetch upstream 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-10-07T19:18:03.483

What to do next is: going on contributing new features or fixing other bugs in their own dedicated branches (pushed only to your fork).

Meaning your fork stays, but the branches within your fork can come and go.

You can also remove the fork if you are not planning to contribute further, but it [will remove the corresponding entry in 'Repositories you contribute to'](https://stackoverflow.com/a/28005723/6309).

It is easier to:

*   delete your `fix` branch (actually, **[it is now deleted for you](https://stackoverflow.com/a/15970467/6309)**) on your fork (and in your local cloned repo: see "[Delete a Git branch both locally and remotely](https://stackoverflow.com/a/23961231/6309)")
*   `git pull upstream master` (if `master` was the branch in which your fix has been integrated: the merge will be a fast-forward one): no rebase needed at this point.
*   recreate a fix branch on top of your updated local `master` (now with the latest from `upstream master`).

* * *

However, never forget one step before submitting any *future* pull request:

**rebase first your current branch (`fix`) from upstream destination branch**

(`upstream` being the original repo you have forked: see "[What is the difference between origin and upstream in github](https://stackoverflow.com/questions/9257533/what-is-the-difference-between-origin-and-upstream-in-github/9257901#9257901)")

Before submitting anything back to the original repo ("upstream"), you need to make sure your work is based on top of the *latest* from said original repo (or the pull-request won't result in a fast-forward merge once applied back on `upstream` repo).
See, for instance, "[Workflow for managing pull requests on shared repos in github](https://stackoverflow.com/questions/4475435/workflow-for-managing-pull-requests-on-shared-repos-in-github/4475588#4475588)".

In other words, `upstream` can evolve (have new commits pushed on it) while you are busy fixing stuff. You need to replay your fixes on top of that latest work from upstream to make sure your commits are still compatible with the latest of `upstream`.

* * *

The [OP Santosh Kumar](https://stackoverflow.com/users/939986/santosh-kumar) asks [in the comments](https://stackoverflow.com/questions/12770550/my-pull-request-has-been-merged-what-to-do-next/12772000#comment17294754_12772000):

> I have pulled and merged from `upstream` to master, now what?

If you haven't made any new fixes since your recent pull request, see above (delete and recreate an new branch `fix` on top of your updated `master`).

If you have done any more work since your pull request, I wouldn't merge from `upstream` if I want to make a *new* pull request: I would pull *and rebase*:

```
git pull --rebase upstream master 
```

That way, all my new local work is replayed on top of the most recent `upstream` `master` commits (fetched in my local repo), supposing that `master` is the target branch that will integrate my future pull request.

Then I can push my local work to '`origin`', which is my fork on GitHub of `upstream`.
And from my fork on GitHub, I can safely make a pull request, knowing that it will only add new commits to `upstream` without needing any merge resolution: merging those new commits in `upstream` repo will mean a simple fast-forward merge.

* * *

A `git pull --rebase` without specifying the branch on top of which you want to rebase your (currently checked out) `fix` branch wouldn't work:

> That (`git pull --rebase`) says:

```
You asked to pull from the remote '`upstream`', but did not specify a branch. 
```

> Should I append master at last? And what will this do?, will it delete my `fix` branch?

Yes, you can specify the branch which will be the target of the pull request, for instance '`master`'.
That will not delete your `fix` branch, but will replay it on top of upstream `master` fetched in your repo.

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-07T16:25:44.783

首先，祝贺你对 Github 上的一个项目做出了第一次贡献。

通常的 Github 工作流程是为您解决的每个问题创建一个新分支。这样，主线存储库的维护者可以决定合并哪个解决方案以及拒绝哪个解决方案。分支在上游合并后，将不再需要该分支，通常可以将其删除。

# c# - 处理客户端/服务器消息？

> ID：12770555
> 
> 赞同：1
> 
> 时间：2012-10-07T16:18:41.180
> 
> 标签：c#, .net-4.0, client-server, ooad

从我的客户端/服务器接收序列化数据，一旦数据被反序列化，它就会进入一个命令处理程序，`receivedData.Action`其中`ClientMessage`：

```
Command._handlers[receivedData.Action].Handle(receivedData.Profile); 
```

命令处理程序将处理客户端消息并返回应给予客户端的响应。

我有一个客户端消息的枚举，如下所示：

```
public enum ClientMessage
{
    INIT = 1,
    NEW_PROFILE,
    UPDATE_PROFILE_EMAIL,
    UPDATE_PROFILE_PASSWORD,
    UPDATE_PROFILE_PHONE,
    UPDATE_PROFILE_DATE,
    UPDATE_PROFILE_SECRET_ANSWER,
    UPDATE_PROFILE_POSTAL_CODE,
    UPDATE_SUCCESS,
    PING,
    PONG,
    QUIT
} 
```

我遇到的困难是如何编写所有动作，例如：

*   我应该为客户端发送的内容和服务器应回复的内容分别设置一个枚举吗？
*   或者我应该有一个包含所有消息的枚举并按照要求进行操作？
*   或者我应该如何定义消息并处理它？

这是我的服务器/客户端当前所做的，只是为了让您更好地查看：

1.  服务器启动
2.  客户端连接
3.  客户端向服务器发送身份验证
4.  服务器验证客户端并发送连接的批准消息
5.  客户端将从那里开始向服务器发送和更新配置文件

这只是一个大致的例子。

包处理程序

```
public interface IPacketHandler
{
    MyCommunicationData Handle(ProfileData profile);
} 
```

命令

```
public class Command
{
    public static Dictionary<ClientMessage, IPacketHandler> _handlers = new Dictionary<ClientMessage, IPacketHandler>()
    {
        {ClientMessage.INIT, new Init()},
        {ClientMessage.NEW_PROFILE, new NewProfile()},
        {ClientMessage.UPDATE_PROFILE_EMAIL, new UpdateEmail()},
        {ClientMessage.UPDATE_PROFILE_PASSWORD, new UpdatePassword()},
        {ClientMessage.UPDATE_PROFILE_PHONE, new UpdatePhone()},
        {ClientMessage.UPDATE_PROFILE_DATE, new UpdateDate()},
        {ClientMessage.UPDATE_PROFILE_SECRET_ANSWER, new UpdateSecretAnswer()},
        {ClientMessage.UPDATE_PROFILE_POSTAL_CODE, new UpdatePostalCode()},
        {ClientMessage.UPDATE_SUCCESS, new Success()},
        {ClientMessage.PING, new Ping()},
        {ClientMessage.PONG, new Pong()},
        {ClientMessage.QUIT, new Quit()},
    };
} 
```

初始化示例

```
public class Init : IPacketHandler
{
    public MyCommunicationData Handle(ProfileData profile)
    {
        // Some verification to auth the client here 
        // bla bla
        // return response
        return new MyCommunicationData() { Action = ClientMessage.CONNECTED };
    }
} 
```

PS：如果我的标题已关闭并且您有更好的建议，请告诉我，或者您是否可以继续更新它，我不确定如何用英语描述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:34:32.423

如果您的问题是关于如何按照我的理解设计类和交互，那么我会 - 它完全取决于您的应用程序的具体情况 - 将这个大枚举类型分成单独的、更小的那些更能描述它们所做的事情，以及您的意图，例如，`ProfileAction`，等等。然后`ActionResult`，`PingStatus`当您使用这些枚举时，请确保您获得编译器时检查您是否正确执行它，否则，您正在做的几乎就像只是传递字符串。

它还与 OO 设计中坚持单一职责原则有关：对象应该具有单一职责。你现在的枚举有不止一个责任。

对于这些问题，我发现了解 .NET 框架的作用很有帮助：例如查看[Ping 类](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.ping.aspx)以及它如何使用 PingStatus 枚举和其他枚举。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T22:47:13.623

不确定我是否会使用枚举。它们在一小段代码中很棒，作为传达的价值暴露出来，它们远不及伟大。

对我来说，每条消息我都会有一个不同的类，而不是一条具有上帝属性的消息。

# mysql - 优化 sql 查询以删除行

> ID：12770558
> 
> 赞同：0
> 
> 时间：2012-10-07T16:18:49.130
> 
> 标签：mysql, sql, database, activerecord

我有一张看起来有点像这样的桌子：-

```
A      B        C         D 
1      2        0         2012-10-05 18:37:00
1      3        0         2012-10-05 20:37:00
1      4        1         2012-04-07 18:37:00
2      1        1         2012-10-05 18:12:40
2      2        0         2012-10-04 18:37:00
2      3        0         2011-10-05 12:37:00 
```

ColA 和 ColB 唯一标识一行。但是，它不是主键。ColC 可以是 0 或 1。 ColD 是一个日期时间字段。我只需要从该表中保留 10 行（或更少），其中 colC 为 0 和 10 行（或更少）， colC 为 1，以获得最大总数。行数为 20。这 10 行（每行）是最近的行，即最近的 10 行（基于 colD 值）的 colC 值为 0。同样，保留的（最多）10 行 ColC 值为 1，应该是前 10 行 ColC 值为 1。

目前，我正在触发 4 个查询以实现此目的。我针对 colC 值分别为 0 和 1 触发一个查询，以获取第 11 行（或更少）的时间戳。然后对于获得的每个值，我触发另一个查询以删除所有“旧”行。

我可以触发一个查询来实现这一目标吗？如果不是，那么对此的最佳解决方案是什么？

PS：- 我在我的应用程序中使用活动记录，并且必须相应地修改查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T18:32:06.440

这将起作用（请参阅[http://sqlfiddle.com/#!2/161af/1](http://sqlfiddle.com/#!2/161af/1)）：

```
delete from t
where not exists (select 1
                  from ((select A, B
                         from t
                         where C = 0
                         order by D desc
                         limit 10
                        ) union all
                        (select A, B
                         from t
                         where C = 1
                         order by D desc
                         limit 10
                        )
                       ) a
                  where a.A = t.A and a.B = t.B
                 ) 
```

这将创建您要保留的 20 个值的列表，并删除其余值。

如果性能是一个问题，我可能建议您将 20 行放在一个单独的表中，截断原始表，然后将它们插入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T18:13:33.083

这应该适合你：

```
DELETE
  ex
FROM
  ex
INNER JOIN
(
  SELECT
    C, MIN(D) D
  FROM
  (
    (
      SELECT
        C, D
      FROM
        ex
      WHERE
        C = 0
      ORDER BY
        D DESC
      LIMIT 10
    ) UNION (
      SELECT
        C, D
      FROM
        ex
      WHERE
        C = 1
      ORDER BY
        D DESC
      LIMIT 10
    )
  ) d1
  GROUP BY
    C
  ORDER BY
    C
) d2 ON d2.C = ex.C
WHERE
  ex.D < d2.D 
```

运行上述查询后，

```
SELECT 
  C,
  COUNT(*),
  MIN(D),
  MAX(D)
FROM 
  ex
GROUP BY
  C
ORDER BY
  C 
```

返回：

```
C   cnt MIN(D)                  MAX(D)
0   10  10/5/2012 2:14:53 AM    10/5/2012 7:21:23 PM
1   10  10/2/2012 1:41:21 PM    10/5/2012 2:57:34 PM 
```

有关工作示例，请参阅[SQL Fiddle 。](http://sqlfiddle.com/#!2/c26c5/2)

请注意，如果您要删除超过 50% 的数据，您可能会发现将`SELECT`要保留到新表中的记录更好，然后`RENAME`将此表保留到现有表中。

这是一个例子：

```
DROP TABLE IF EXISTS ex_old;
DROP TABLE IF EXISTS ex_new;
CREATE TABLE ex_new LIKE ex;

INSERT INTO
    ex_new
SELECT
    ex.*
FROM
    ex
INNER JOIN
(
  SELECT
    C, MIN(D) D
  FROM
  (
    (
      SELECT
        C, D
      FROM
        ex
      WHERE
        C = 0
      ORDER BY
        D DESC
      LIMIT 10
    ) UNION (
      SELECT
        C, D
      FROM
        ex
      WHERE
        C = 1
      ORDER BY
        D DESC
      LIMIT 10
    )
  ) d1
  GROUP BY
    C
  ORDER BY
    C
) d2 ON d2.C = ex.C
WHERE
  ex.D >= d2.D;

RENAME TABLE ex TO ex_old, ex_new TO ex; 
```

# c# - 如何使用 txt 文件作为命令行参数？

> ID：12770561
> 
> 赞同：3
> 
> 时间：2012-10-07T16:19:22.517
> 
> 标签：c#, console, command-line-arguments

我有一个这样的 .txt 文件：
6 4
1 2
2 3
3 4
4 5
1 2 4 5

如何在 C# 中将其用作命令行参数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T16:25:37.807

如果您打算给您的程序数据`program.exe < data.txt`，这称为*从标准输入读取*。您可以通过 .NET 的[Console.OpenStandardInput](http://msdn.microsoft.com/en-us/library/tx55zca2.aspx)使用

```
new StreamReader(Console.OpenStandardInput()) 
```

* * *

或者，如果您希望程序运行`program.exe data.txt`，请从

```
void Main(string[] args)
{
    File.ReadLines(args[0])
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T16:21:31.253

您可以在命令行中接受文件名（连同路径）并在应用程序中打开文件，逐行读取并处理所有行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-24T10:17:40.027

转到`Solution Explorer`> `Right click on project file`> `Select Properties from context menu`。这将打开项目的属性窗口。现在转到`Debug tab`>转到`Start options section`右窗格中。将完整的文件路径放在`Command line arguments`文本框中，如下所示：

```
< "D:\Rasik\input01.txt" 
```

[![在此处输入图像描述](../Images/dbe71f18b4bbd98acca4fcd314ee9916.png)](https://i.stack.imgur.com/f5tvL.png)

然后您可以像往常一样编写代码，您将开始从文件中获取输入：

```
class Program
{        
    static void Main(string[] args)
    {
        var textInFirstLineOfFile = Console.ReadLine();
    }
} 
```

# drupal - 2 个菜单 - 主菜单、二级菜单和面包屑

> ID：12770564
> 
> 赞同：0
> 
> 时间：2012-10-07T16:19:41.013
> 
> 标签：drupal, menu, drupal-7, breadcrumbs

关于 Drupal 7 中菜单的一些问题，我一直在寻找解决方案，但似乎找不到其他人有类似问题。

使用 Bartik 主题：

我有 2 个菜单 - 一个是主菜单，允许我将子项设置为页面。我有一个二级菜单，我不想出现在主菜单中，但我确实想让它有孩子。当我添加页面时，我无法在下拉菜单中选择我的二级菜单来允许我的二级链接有子链接。我什至不能选择我的二级菜单作为选项。

以下是我的问题：

*   我可以在不安装模块的情况下允许我的二级菜单有子菜单吗？
*   我可以更改设置以允许我在创建页面时选择辅助菜单而不是主菜单（不安装模块）？

```
<主菜单>
    链接 1
    链接 2
        -- 子链接 1
        -- 子链接 2
<二级菜单>
    链接 1
    链接 2
        -- 子链接 1
        -- 子链接 2

```

*   我可以在不安装模块的情况下允许我的二级菜单页面有面包屑吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T20:40:53.100

所有菜单都具有相同的基本功能，所以是的，您可以将节点添加到二级菜单。

要使您的二级菜单可用，您需要更改要与此菜单一起使用的每种内容类型的设置。

转到管理 > 结构 > 内容类型

单击“编辑”，转到“菜单设置”选项卡，然后在此处启用菜单。

现在，当您创建或编辑该类型的节点时，您应该会看到该菜单可用。

# entity-framework - 实体框架超时

> ID：12770566
> 
> 赞同：1
> 
> 时间：2012-10-07T16:20:00.873
> 
> 标签：entity-framework, linq-to-sql

在过去的几天里，我一直在试图弄清楚如何优化以下查询，但运气不佳。现在我的测试数据库返回大约 300 条记录，嵌套数据很少，但运行需要 4-5 秒，并且 LINQ 生成的 SQL 非常长（太长，无法包含在此处）。任何建议将不胜感激。

总结这个查询，我试图返回一个具有当前状态的客户列表的有点扁平的“快照”。一方包含一个或多个具有角色的客户端（ASPNET 角色提供程序），日志返回一方中所有客户端的最后 1 个日志条目，任务和 LastLoginDate 也是如此，因此 OrderBy 和 FirstOrDefault 函数。

```
Guid userID = 'some user ID'
var parties = Parties.Where(p => p.BrokerID == userID).Select(p => new
{
ID = p.ID,
Title = p.Title,
Goal = p.Goal,
Groups = p.Groups,
IsBuyer = p.Clients.Any(c => c.RolesInUser.Any(r => r.Role.LoweredName == "buyer")),
IsSeller = p.Clients.Any(c => c.RolesInUser.Any(r => r.Role.LoweredName == "seller")),
Journal = p.Clients.SelectMany(c => c.Journals).OrderByDescending(j => j.OccuredOn).Select(j=> new 
    { 
        ID = j.ID,
        Title = j.Title,
        OccurredOn = j.OccuredOn,
        SubCatTitle = j.JournalSubcategory.Title
    }).FirstOrDefault(),
LastLoginDate = p.Clients.OrderByDescending(c=>c.LastLoginDate).Select(c=>c.LastLoginDate).FirstOrDefault(),
MarketingPlanCount = p.Clients.SelectMany(c => c.MarketingPlans).Count(),
Task = p.Tasks.Where(t=>t.DueDate != null && t.DueDate > DateTime.Now).OrderBy(t=>t.DueDate).Select(t=> new 
    {
        ID = t.TaskID,
        DueDate = t.DueDate,
        Title = t.Title
    }).FirstOrDefault(),
Clients = p.Clients.Select(c => new
    {
        ID = c.ID,
        FirstName = c.FirstName,
        MiddleName = c.MiddleName,
        LastName = c.LastName,
        Email = c.Email,
        LastLogin = c.LastLoginDate
    })
}).OrderBy(p => p.Title).ToList() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T18:28:18.213

我认为发布 SQL 可以为我们提供一些线索，因为在投影之前或之后出现 OrderBy 的顺序之类的小事情可能会产生很大的不同。

但无论如何，尝试在单独的查询中提取客户端，这可能会简化您的查询。然后在投影之前**包括**其他表，如 Journal 和 Tasks，看看这对您的查询有何影响：

```
    //不确定确切的查询是什么，并使用 ToList() 进行投影
    var clients = GetClientsForParty();

    varparty =partys.Include("Journal").Include("Tasks")
          .Where(p=>p.BrokerID == userID).Select(p => {

    ……
    //然后使用内存中的客户端
    IsBuyer = clients.Any(c => c.RolesInUser.Any(r => r.Role.LoweredName == "buyer")),
    ...
    }
    )

```

在所有情况下，安装[EF 分析器](http://efprof.com/)并查看您的查询是如何受到影响的。英孚可以安静地令人惊讶。就像把 OrderBy 放在投影之前一样，所有这些 FirstOrDefault 或 SingleOrDefault 都一样，它们都可以产生很大的影响。

回到基础，如果你在 LoweredRoleName 上搜索，那么确保它被索引以便查询快速（即使这可能是无用的，因为 EF 可能最终没有使用覆盖索引，因为它正在查询所以许多其他列）。

此外，由于这是查看数据的查询（您不会更改数据），因此请不要忘记关闭实体跟踪，这也会给您带来一些性能提升。

最后，不要忘记你总是可以直接编写你的 SQL 查询并投影到你的 ViewModel 而不是匿名类型（无论如何我认为这是一个很好的做法），所以创建一个名为 PartyViewModel 的类，其中包含你所追求的扁平化视图，并将其与您手工制作的 SQL 一起使用

```
//使用您编写的优化 SQL 查询，甚至调用存储过程
db.Database.SQLQuery("select * from .... join .... on");

```

我正在写[一篇](http://kabarosblog.com/2012/09/30/optimizing-entity-framework-01/)关于 EF 的这些问题的博文。这篇文章还没有完成，但总而言之，只要耐心等待，使用其中一些技巧并观察它们的效果（并衡量它），你就会达到你想要的。

# c# - 在网络服务器启动时启动长时间运行的进程？

> ID：12770567
> 
> 赞同：0
> 
> 时间：2012-10-07T16:20:00.897
> 
> 标签：c#, asp.net, asp.net-mvc, web-applications, web

我已经离开 Web 开发 6/7 年了，我完全不知道如何做事。我正在阅读一些关于 HTML5 之类的教程，但我希望能在这里得到帮助。

我正在尝试构建一个（POC）网站，该网站将让“服务器”监视它正在运行的应用程序，并且当某个应用程序运行时更改托管页面的内容。我不希望模型是PageLoad->Application Check，我宁愿有ServerStart->ApplicationHook->Callback->Model->PageLoad->CheckModel之类的东西，所以在服务器启动时会放置一个钩子并且钩子的回调会更新页面用来更新的模型。虽然这种架构可能不是最好的方法，但总的来说，我只是在寻找一种方法来让一个长时间运行的进程在服务器启动时启动。最终，我会将其移至 Windows 服务，该服务在进行更改时调用 Web 服务，但对于 POC，我宁愿远离多个应用程序交互，

因此，如果您构建的页面依赖于服务器上的事件，并且需要能够与服务器上的应用程序单独交互到单个页面，但该页面需要能够将信息“发布”回该应用程序你会怎么做？

我的解释有点过头了，所以我希望在某个时候我的问题能清楚地表达出来！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:25:54.470

也许还有其他选择，但我认为这种设置的唯一选择是 Windows 服务。如果您需要从其他组件与其通信，请让它使用套接字或在已知端口上侦听 HTTP 请求。从 Web 应用程序中执行您所描述的操作并非不可能，但肯定会非常困难，因为它是 Web 服务器（应用程序池可执行文件）控制过程中发生的事情，而不是您的代码。在 Windows 服务中，您可以掌控一切。

**编辑：**这是[一篇](http://msdn.microsoft.com/en-us/library/bb332338.aspx)关于托管 Web 服务的不同选项的文章 - 在我看来，使用 Windows 服务确实是您的最佳选择。您可能可以使用 WCF 服务，但您必须与服务器上的本地应用程序通信，而这部分可能更容易使用 Windows 服务来完成。

# android - 可能两次定义相同的属性？

> ID：12770569
> 
> 赞同：0
> 
> 时间：2012-10-07T16:20:28.893
> 
> 标签：android

我刚开始使用 Android 并正在制作启动画面。我试图将默认背景颜色更改为灰色，但显然我不能两次使用相同的属性。如何添加背景图像并更改背景颜色？谢谢。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@drawable/reddit_alien" 
    android:background="@color/grey"
    >
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T16:24:59.520

一种方法是使用 2 种布局。外部具有颜色背景，内部具有图像作为背景。

或者，您可以使用 xml 中的图层列表可绘制资源文件，该文件将一个图层定义为背景颜色，将另一个图层定义为背景图像。见这里：http: [//developer.android.com/guide/topics/resources/drawable-resource.html#LayerList](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T16:22:50.113

不，不可能两次声明相同的属性。她将它们图像作为背景或颜色。如果要设置颜色和背景图像，则创建两个视图。将底视图背景设置为彩色或图像，将顶视图背景设置为彩色或图像。

# apache-flex - set 或 init 函数不会在 addElement() 函数之前设置内部组件的“可见性”

> ID：12770575
> 
> 赞同：0
> 
> 时间：2012-10-07T16:21:33.017
> 
> 标签：apache-flex, flex4.5

我在使用 Flex 4.6 时遇到了一个非常奇怪的错误，其中包含一段非常简单的代码。

```
for ( var j=0 ; j< chip_num; j++)
{

isoChip = new IsoChip();

//isoChip.type=(IsoChip.YELLOW_CHIP); //<<<<<<<<<DOESNOT WORK HERE
isoChip.scaleX = isoChip.scaleY=1//0.45 ; 
isoChip.x= i + 10 * i + 5 ;

isoChip.y= y_num;

addElement(isoChip);

isoChip.type=(IsoChip.YELLOW_CHIP);  //<<<<<<<<<<<<<<WORKS HERE ONLY

y_num = y_num - 2.5 //IsoChip.height ; 

} 
```

拥有这个组件：IsoChip.mxml 组件

```
 <?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
         xmlns:s="library://ns.adobe.com/flex/spark" 
         xmlns:mx="library://ns.adobe.com/flex/mx" width="23" height="20" initialize="init()">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[

            public static const BLUE_CHIP:String = "blueChip" ;
            public static const BLACK_CHIP:String = "blackChip" ;
            public static const YELLOW_CHIP:String = "yellowChip" ;

            public function init(type_val_str="blueChip") 
            {
                blueChip.visible= false; 
                blackChip.visible =false ;
                yellowChip.visible = false ;

                //type = type_val_str  ;

            }

            function set type(type_val_str:String)
            {

                switch( type_val_str)
                {
                    case  IsoChip.BLUE_CHIP:
                        trace(">",IsoChip.BLUE_CHIP)
                        blueChip.visible = true; 
                        blackChip.visible = false ; 
                        yellowChip.visible = false ; 

                    break; 

                    case  IsoChip.BLACK_CHIP:

                        trace(">",IsoChip.BLACK_CHIP)

                        blueChip.visible = false ; 
                        blackChip.visible = true ; 
                        yellowChip.visible = false ;

                    break;

                    case  IsoChip.YELLOW_CHIP:

                        trace(">",IsoChip.YELLOW_CHIP)
                        blueChip.visible = false; 
                        blackChip.visible = false ; 
                        yellowChip.visible = true; 

                    break; 

                }

            }

        ]]>
    </fx:Script>

    <s:SWFLoader id="blueChip" x="0" y="0"  width="23" height="20" source="../swf/blue-iso-chip.swf"/>
    <s:SWFLoader id="yellowChip" x="-16" y="5"  width="23" height="20" source="../swf/yellow-iso-chip.swf"/>
    <s:SWFLoader id="blackChip" x="4" y="9" width="23" height="20" source="../swf/black-iso-chip.swf"/>
</s:Group> 
```

真的是bug吗。还是我做错了什么？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T17:35:55.600

我建议在这里使用状态而不是可见性。

因此，在您的组中声明 3 个状态：

```
<s:states>
    <s:State name="blue" />
    <s:State name="black" />
    <s:State name="yellow" />
</s:states> 
```

然后为每个 SWFLoader 应用每个状态：

```
<s:SWFLoader id="blueChip" includeIn="blue" ... />
<s:SWFLoader id="blackChip" includeIn="black" ... />
<s:SWFLoader id="yellowChip" includeIn="yellow" ... /> 
```

最后，在 ActionScript 代码中根据条件更改状态：

```
switch( type_val_str) {
    case  IsoChip.BLUE_CHIP:
        currentState = "blue";
    break; 

    case  IsoChip.BLACK_CHIP:
        currentState = "black";
    break;

    case  IsoChip.YELLOW_CHIP:
        currentState = "yellow";
    break; 
} 
```

# php - 在php奇怪的输出中循环explode()

> ID：12770576
> 
> 赞同：1
> 
> 时间：2012-10-07T16:21:37.680
> 
> 标签：php, arrays, explode

尝试在 PHP 中循环以逗号分隔的列表时，我得到了一个非常奇怪的结果。

它有时只输出其中的几个，而且似乎没有合乎逻辑的理由来解释为什么它不循环遍历所有这些，而且我终其一生都无法弄清楚到底是什么原因造成的。

我的代码是：

```
 //pids = &pids=1,2,3,6,7,9
    $pids = $_GET['pids'];
    $photoIdArray = explode(",", $pids);

    for($i = 0; $i <= count($photoIdArray); $i++) {

        foreach($photoIdArray as $j){
            if($i == $j){

                echo "{$j}";

            }
        }

    }

    // result = 1236 
```

这只是为了测试，所以我没有检查输入以防止漏洞利用，目前还没有。

任何帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T16:23:29.453

结合 2 个循环`for`，`foreach`对于这样的事情来说太过分了

尝试仅使用`foreach`

```
$pids = "1,2,3,6,7,9";
$photoIdArray = explode(",", $pids);
foreach($photoIdArray as $value)
{
    echo $value;
} 
```

输出

```
 123679 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T16:29:41.127

这是因为您正在遍历您的值并检查 $i 是否与该值相同。你应该检查

```
if ($photoIdArray[$i] == $j) { 
```

代替

```
if ($i == $j) { 
```

这就是它不起作用的原因，但你还是应该使用巴巴的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T16:31:49.303

我同意 Dusan, Baba & Co. 的观点，但要回答实际问题：

这里没有什么奇怪的事情发生。i 从 0 循环到 6（尽管数组只有索引 0..5），然后将 i 与数组的 VALUES 进行比较，范围从 1 到 9。当然，只有值 1 到 6 匹配，因为我从不超过6。

编辑： Asad 和 Sietse 更快。

# c - 打开文件时出错

> ID：12770578
> 
> 赞同：1
> 
> 时间：2012-10-07T16:21:47.893
> 
> 标签：c, file, directory, fopen

# 解决。问题 -

讲师上传了一个名为 file.txt 的文本文件，这导致了一个文件“file.txt.txt”......我现在感到沮丧和愚蠢。

* * *

### 原来的问题

我在使用 Windows 7 上的 Visual Studio 2012 尝试使用 fopen 打开文本文件时遇到问题。我不太确定这个 file.txt 应该在哪个目录中，所以我尝试将它与 .vcxproj 文件和 .exe 文件放在 VS 创建的 Debug 目录中。

没有成功，我尝试在 fopen 函数中包含文件的完整路径。

这段代码编译得很好，但是当我运行它时，我收到一条错误消息“没有这样的文件或目录”

我做错了什么，我该如何解决？我在这里真的很困惑，非常欢迎任何帮助！提前致谢。

下面的代码：

```
int main(void)
{

    FILE *fp;

    fp = fopen("C:\\Directory\\file.txt", "r"); 

    if (fp == NULL)
    {
        perror("Error opening file\n");
    }

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:25:27.383

您应该包含正确的标题`fopen()`，即

```
#include <stdio.h> 
```

确保文件名中的所有反斜杠也确实被转义（加倍）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T16:27:46.527

你在这个地方真的有任何文件吗？“C:\Directory\file.txt”我猜你没有。

我尝试了代码，它对我来说运行得很好。最初我遇到了同样的错误，那是因为文件不存在。一旦我把文件放在那里，一切都按预期完美运行。

请再次检查文件是否存在。

# java - 如何将非重复值从一个数组复制到另一个？

> ID：12770584
> 
> 赞同：1
> 
> 时间：2012-10-07T16:22:27.990
> 
> 标签：java, arrays, loops, if-statement, duplicates

我正在使用第一个数组来存储所有数字的数据库，其中一些数字是重复的。

我已经通过这个数组来查看哪些项目是重复的，并将重复项目的索引添加到第二个数组。

现在，我必须遍历第一个数组并将除重复值之外的所有值添加到第三个数组（假设我们知道哪些字段是重复的）。

但是如何正确地做到这一点？我不能让它停止将第一个数组中的每个项目添加到第三个数组。

假设我不能使用 HashSet()。

这样做的目的是演示如何将一个数组移动到另一个数组，并在 O(N) 时间复杂度中删除重复。

```
Input numbers: 00, 11, 11, 22, 33, 44, 55, 55, 66, 77, 88, 99
Output which index are duplicated: 1, 2, 6, 7
Output I get: 00, 11, 11, 22, 33, 44, 55, 55, 66, 77, 88, 99 (same as the input) 
```

代码：

```
 public void dups() 
   {
       int[] b = new int[100];
       int[] c = new int[100];

       int k = 0;
       int n = 0;
       int p = 0;

       for (int i = 0; i < nElems; i++)
           for (int j = 0; j < nElems; j++)
               if(a[j].equals(a[i]) && j != i)
                   b[k++] = i;

       for (int l = 0; l < k; l++)
           System.out.print(b[l] + " ");

       for (int m = 0; m < nElems; m++)
           if (m != b[p + 2])
               c[m] = (Integer) a[n++];

       System.out.print("\n");

       for (int o = 0; o < nElems; o++)
           System.out.print(c[o] + " ");
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T16:25:22.830

可以用更简单的方式完成：

```
Set<Integer> uniqueSet = new HashSet<Integer>();
uniqueSet.addAll(list);
//not uniqueSet contains only unique elements from the list. 
```

它起作用的原因是[Set](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)不能包含重复项。因此，在将元素添加到 Set 时，它会忽略那些重复的元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T16:26:14.780

您可以使用 HashSet 而不是 Array 来存储所有数字数据库。之后使用 Collections.toArray() 获取您想要的数组。

我看到问题已被编辑，我们不想再使用 HashSet。无论如何，您的问题已经在这里得到解答，[算法：从数组中删除重复整数的有效方法](https://stackoverflow.com/questions/1532819/algorithm-efficient-way-to-remove-duplicate-integers-from-an-array)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T16:47:50.667

您可以标记所有之前已经看到的，而不是标记所有重复项。

代替：

```
for (int i = 0; i < nElems; i++)
  for (int j = 0; j < nElems; j++)
    if(a[j].equals(a[i]) && j != i)
      b[k++] = i; 
```

使用类似的东西：

```
for (int i = 0; i < nElems; i++)
  for (int j = i+1; j < nElems; j++)
    if(a[j].equals(a[i]))
      b[k++] = j; 
```

然后你应该看到：

```
Output which index are duplicated: 2, 7 
```

这应该更容易使用。

这是一个可行的解决方案-尽管我不会这样做：

```
public class Test {
  Integer[] a = {00, 11, 11, 22, 33, 44, 55, 55, 66, 77, 88, 99};
  int nElems = a.length;

  public void dups() {
    int[] b = new int[100];
    int[] c = new int[100];

    int k = 0;
    int n = 0;
    int p = 0;

    for (int i = 0; i < nElems; i++) {
      for (int j = i + 1; j < nElems; j++) {
        if (a[j].equals(a[i])) {
          b[k++] = j;
        }
      }
    }

    for (int l = 0; l < k; l++) {
      System.out.print(b[l] + " ");
    }
    for (int m = 0; m < nElems; m++) {
      if (m != b[p]) {
        c[n++] = a[m];
      } else {
        p += 1;
      }
    }

    System.out.print("\n");

    for (int o = 0; o < nElems - k; o++) {
      System.out.print(c[o] + " ");
    }
  }

  public static void main(String args[]) {
    new Test().dups();
  }
} 
```

打印：

```
2 7 
0 11 22 33 44 55 66 77 88 99 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T16:48:09.347

我不知道这是否是你要找的。但它会删除重复项。试一试，

```
int[] b = { 00, 11, 11, 22, 33, 44, 55, 55, 66, 77, 88, 99 };
    List<Integer> noDups = new ArrayList<Integer>();

    Boolean dupliceExists;
    for (int i = 0; i < b.length; i++) {
        dupliceExists = Boolean.FALSE;
        for (Integer integ : noDups) {
            if (Integer.valueOf(b[i]).equals(integ)) {
                dupliceExists = Boolean.TRUE;
                              //Get index if you need the index of duplicate from here
            }
        }
        if (!dupliceExists) {
            noDups.add(b[i]);
        }
    }

    for (int i = 0; i < noDups.size(); i++) {
        System.out.println(noDups.get(i));
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-26T16:31:11.437

我将编写代码以将非重复元素从一个数组复制到另一个数组。

```
/*
 * print number of occurance of a number in an array beside it
 * 
 * */
class SpoorNumberOfOccuranceInArray{
  public static void main(String[] args){
    int[] arr={65,30,30,65,65,70,70,70,80};    
    int[] tempArr=new int[arr.length];//making size compatible to source Array. 
    int count=0;       
    for(int i=0;i<arr.length;i++){
      int temp=arr[i];
      for(int j=0;j<tempArr.length;j++){
        if(temp==tempArr[j]){   //Comparing the Availability of duplicate elements in the second Array.---------       
           break;           
        }        
        else{    //Inserting if value is not in the second Array.---------------               
          if( tempArr[j]==0){             
             tempArr[j]=temp;
              break;
            }//end if         
        }//end else
      }//end if    
    }//end for
    for(int i=0;i<tempArr.length;i++){
      for(int j=0;j<arr.length;j++){
        if(tempArr[i]==arr[j])
         count++;
      }
      System.out.println(tempArr[i]+" "+count); 
      count=0;
    }   
  }
} 
```

# sql - 通过 SQL 语句手动插入到表中，但 key 是自动递增的

> ID：12770585
> 
> 赞同：14
> 
> 时间：2012-10-07T16:22:33.680
> 
> 标签：sql, sql-server, database, sql-server-2008

假设我有一个用户表，`id`列是主键并自动递增。

我想尝试通过以下语句手动添加用户：

```
INSERT INTO table_name (id, username, password)  
VALUES (?, Mike, Mike); 
```

但我不想指定`?`值，只想添加到下一行。

谢谢大家，我忘记将 id 列设置为自动递增。现在可以了。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-07T16:24:23.593

所以只是不要使用它......这样做......

并确保使用单引号插入`strings`

```
INSERT INTO table_name (username, password)
VALUES ('Mike', 'Mike'); 
```

正如您所说，您的字段是`auto incremented`，SQL会自动将`id`字段的值增加1

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-07T16:27:56.650

如果要手动将值插入到自动递增的列中，可以使用 sql 的 IDENTITY_INSERT。例如

```
SET IDENTITY_INSERT MyTable ON
insert into MyTable(id, name) values (1,'asdf');
insert into MyTable(id, name) values (3,'htgfds');
insert into MyTable(id, name) values (123,'dsfg');
SET IDENTITY_INSERT MyTable OFF 
```

你可以在这里阅读更多 [IDENTITY_INSERT](http://msdn.microsoft.com/en-us/library/ms188059.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T16:25:18.893

如果 id 是一个自动递增的值，只需将该列排除在插入之外，它将填充自动递增的值。例如来自 BOL [http://msdn.microsoft.com/en-us/library/aa933196(v=SQL.80).aspx](http://msdn.microsoft.com/en-us/library/aa933196%28v=SQL.80%29.aspx)

```
CREATE TABLE new_employees
(
 id_num int IDENTITY(1,1),
 fname varchar (20),
 minit char(1),
 lname varchar(30)
)

INSERT new_employees
   (fname, minit, lname)
VALUES
   ('Karin', 'F', 'Josephs')

INSERT new_employees
   (fname, minit, lname)
VALUES
   ('Pirkko', 'O', 'Koskitalo') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-07T16:30:09.677

这应该为您完成工作：

```
INSERT INTO table_name (username, password)
VALUES('username_u','password_p'); 
```

自动增量值将由 SQL 自动添加。

# python - 用于删除数据存储中的数据的 while 循环

> ID：12770586
> 
> 赞同：4
> 
> 时间：2012-10-07T16:22:35.253
> 
> 标签：python, google-app-engine, exception, while-loop

[我已尝试根据我的需要在此处](https://stackoverflow.com/questions/108822/)的答案中清理和修改代码，我只想从模型中删除`Reservations`在 get as 中表示的日期之前的数据记录`yy,mm,dd`。

如果我正确地预测了`cleanTable/2012/10/5`针对路由的操作，`('/cleanTable/([\d]+)/([\d]+)/([\d]+)', CleanTable)`那么我的代码最多只会删除 50 (10*nlimit) 个数据记录。

顺便说一句，原始代码的作者（他可能不再订阅 SO）声称他完成此代码的主要技巧是“在 html 中包含重定向而不是使用 self.redirect”。

我对之类的东西不熟悉`raise Exception`，但我的直觉是在 for 循环中添加一个`raise Exception`or`raise StopIteration`在它变成一个 while 循环之后。但我不清楚引发 StopIteration 异常是否真的会导致迭代停止，或者是否需要更多。另外，我不知道如何修改，以便 html 在提前退出时顺利结束。

```
class CleanTable(BaseHandler):

    def get(self, yy,mm,dd):
        nlimit=5
        iyy=int(yy)
        imm=int(mm)
        idd=int(dd)
        param=date(iyy,imm,idd)
        q=Reservations.all(keys_only=True)
        q.filter("date < ", dt(iyy,imm,idd))
        results = q.fetch(nlimit)
        self.response.headers['Content-Type'] = 'text/plain'
        self.response.out.write("""
          <html>
          <meta HTTP-EQUIV="REFRESH" content="url=http://yourapp.appspot.com/cleanTable">
            <body>""")

        try:
            for i in range(10):
                db.delete(results)
                results = q.fetch(nlimit, len(results))
                for r in results:
                    logging.info("r.name: %s" % r.name)
                self.response.out.write("<p> "+str(nlimit)+" removed</p>")
                self.response.out.write("""
                </body>
              </html>""")

        except Exception, inst:
            logging.info("inst: %s" % inst)
            self.response.out.write(str(inst)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:49:00.877

这不是清理模型的最佳方法。更好的方法是获取实体的所有键并创建[任务队列](https://developers.google.com/appengine/docs/python/taskqueue/)。每个队列都会得到一批需要修改的实体的键。

另一种方法也是创建一个[cron 作业](https://developers.google.com/appengine/docs/python/config/cron)，该作业将查询 x 个最旧的修改实体，修复它们，然后将它们存储回来。

最后，如果您的实体数量如此庞大，您还可以考虑使用[Backends](https://developers.google.com/appengine/docs/python/backends/)。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T13:13:48.993

这是我的更新例程，它已经转换了 500.000 个实体。确保在后端实例上运行它（您可以将队列定位到后端实例）。请注意，我使用的是游标，这是您可以始终如一地遍历数据的唯一方法（永远不要使用偏移量！）。

```
Queue queue = QueueFactory.getQueue("grinderQueue");
    queue.add(TaskOptions.Builder.withPayload(new DeferredTask() { //lets generate
        private static final long serialVersionUID = 1L;
        @Override
        public void run() { 
             String cursor = null;
             boolean done = false;
             Date now = new Date(1346763868L * 1000L); // 09/04/2012 

             while(!done) {
                 DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();

                 Query query = new Query("Venue");
                 query.setFilter(new FilterPredicate("timeOfLastUpdate", Query.FilterOperator.LESS_THAN,now));
                 PreparedQuery pq = datastore.prepare(query);
                 FetchOptions fetchOptions = FetchOptions.Builder.withLimit(1000);
                 if(cursor != null)
                     fetchOptions.startCursor(Cursor.fromWebSafeString(cursor));

                 QueryResultList<Entity> results = pq.asQueryResultList(fetchOptions);              

                 List<Entity> updates = new ArrayList<Entity>();
                 List<Entity> oldVenueUpdates = new ArrayList<Entity>();
                 int tuples = 0;
                 for(Entity en : results) {
                    tuples++;
                    try { 
                        if(en.getProperty(Venue.VENUE_KEY) == null)
                            continue;
                        Entity newVenue = new Entity("CPVenue",(String)en.getProperty(Venue.VENUE_KEY));                
                        newVenue.setPropertiesFrom(en);
                        newVenue.removeProperty("timeOfLastVenueScoreCalculation");
                        newVenue.removeProperty("actionsSinceLastVenueScoreCalculation");
                        newVenue.removeProperty("venueImageUrl");
                        newVenue.removeProperty("foursquareId");

                        newVenue.setProperty("geoCell", GeoCellCalculator.calcCellId(Double.valueOf((String)en.getProperty("lng")), Double.valueOf((String)en.getProperty("lat")),8)); 
                        newVenue.setProperty(Venue.TIME_SINCE_LAST_UPDATE, new Date());
                        updates.add(newVenue);

                        Venue v = new Venue(newVenue);

                        //Set timestamp on Venue
                        en.setProperty("timeOfLastUpdate", now);
                        oldVenueUpdates.add(en);

                    }catch(Exception e) {
                        logger.log(Level.WARNING,"",e);             
                    }
                 }
                done = tuples == 0;
                tuples = 0;
                if(results.getCursor() != null)
                    cursor = results.getCursor().toWebSafeString();
                else
                    done = true;

                System.out.println("Venue Conversion LOOP updates.. " + updates.size() + " cursor " + cursor);
                datastore.put(updates);
                datastore.put(oldVenueUpdates);
             }
             System.out.println("Venue Conversion DONE");
        }})); 
```

# twitter-bootstrap - 查看 Bootstrap 网格的简单方法？

> ID：12770591
> 
> 赞同：30
> 
> 时间：2012-10-07T16:23:06.823
> 
> 标签：twitter-bootstrap

我正在使用 Bootstrap 玩一个简单的 HTML 页面，我希望有一种方法来可视化列，例如将它们“置于”实际内容的“下方”作为不同的阴影，例如[Frameless](http://framelessgrid.com/)中的那个。有没有办法让这个功能变得简单？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-11-04T23:32:29.700

更新了 Sherbrow 对 Bootstrap 3 的回答：

```
div[class="row"] {
    outline: 1px dotted rgba(0, 0, 0, 0.25);
}

div[class^="col-"] {
    background-color: rgba(255, 0, 0, 0.2);
    outline: 1px dotted rgba(0, 0, 0, 0.5);
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-07T17:09:16.820

您可以使用一些 CSS`background`来查看网格：

```
[class*="span"] { background: #EEF; }
[class*="span"] [class*="span"] { background: #FEE; } 
```

[演示 1 (jsfiddle)](http://jsfiddle.net/Sherbrow/eq953/)

正如 Pavlo 所建议的，您还可以使用半透明颜色，这将根据嵌套（[`rgba`浏览器支持](https://developer.mozilla.org/en-US/docs/CSS/color_value#Browser_Compatibility)）为您提供不同的色调：

```
[class^="span"] { background-color: rgba(255, 0, 0, 0.3); } 
```

[演示 2 (jsfiddle)](http://jsfiddle.net/rtRn2/)

`.row`网格的任何元素也是如此。

*注意：在这种情况下，选择`*=`或`^=`无关紧要，请参阅[此（w3.org）](http://www.w3.org/TR/selectors/#attribute-substrings)了解更多信息*

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-06-06T04:24:05.457

如果您使用的是 Firefox、Chrome、Safari 或其他 webkit 浏览器，请转到下面的页面并通过将它拖到您的书签中来“安装”书签。

然后，您可以通过单击小书签并选择框架来使用基础或引导程序查看任何页面的网格。

[http://alefeuvre.github.io/foundation-grid-displayer/](http://alefeuvre.github.io/foundation-grid-displayer/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-07-20T04:37:07.683

如果你使用 Chrome，你可以试试这个扩展[Bootstrap Grid Overlay](https://chrome.google.com/webstore/detail/bootstrap-grid-overlay/mnlklmelflkheijccafopdohgclfefcg)

我已经将它与 bootstrap v4 一起使用，可以很好地显示列。

[![在此处输入图像描述](../Images/edf79335d7c3207bbb54ed6776c506a0.png)](https://i.stack.imgur.com/i0pLm.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-06T01:19:50.093

如果需要，我会从控制台 使用一些**简单的 jQuery/javascript函数。**~~它只适用于 12 格，但你会很聪明。您不得关闭叠加层或单击链接。只需重新加载页面。~~

```
function bootstrap_overlay() {

  var docHeight = $(document).height();
  var grid = 12, 
  columns = document.createDocumentFragment(), 
  div = document.createElement('div');

  div.className ='span1';
  while (grid--) {
    columns.appendChild(div.cloneNode(true));
  }
  var overlay = $('<div id="overlay"></div>');
      overlay.height(docHeight)
          .css({
           "opacity" : 0.4,
           "position": "absolute",
           "top": 0,
           "left": 0,
           "width": "100%",
           "z-index": 5000
          })          
          .append('<div class="container"><div class="row"></div></div>')
          .click(function(){ $(this).remove(); })
          .find('.row').append(columns);
   $("body").append(overlay);
   $("#overlay .span1").css({
       "opacity" : 0.4,
       "background-color": "red"
    }).height(docHeight);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-17T17:50:30.340

由于同一页面上的不同容器可以有不同的列，因此解决方案必须支持可视化。仅显示彩色叠加层在视觉上并不明显。一个简单的解决方案是在要可视化的每个部分的顶部添加临时列元素，例如以下代码段：

```
<div class='col-xs-1 alert alert-info'>1</div>
<div class='col-xs-1 alert alert-success'>2</div>
<div class='col-xs-1 alert alert-warning'>3</div>
<div class='col-xs-1 alert alert-danger'>4</div>
<div class='col-xs-1 alert alert-info'>5</div>
<div class='col-xs-1 alert alert-success'>6</div>
<div class='col-xs-1 alert alert-warning'>7</div>
<div class='col-xs-1 alert alert-danger'>8</div>
<div class='col-xs-1 alert alert-info'>9</div>
<div class='col-xs-1 alert alert-success'>10</div>
<div class='col-xs-1 alert alert-warning'>11</div>
<div class='col-xs-1 alert alert-danger'>12</div> 
```

演示：[https ://jsfiddle.net/7zea43o8/7/](https://jsfiddle.net/7zea43o8/7/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-05T16:43:29.650

Bootstrap 3 具有不同的类名 ( `span*`> `col-*-*`)，并使用填充在列之间创建装订线（间距），因此只需将 a`background-color`放入列中就不会显示装订线。

对于 Bootstrap 3，您可以添加`background-clip: content-box`仅在内容区域内显示背景颜色...

```
 .row [class*='col-'] {
      background-color: #ffeeee;
      background-clip: content-box;
      min-height: 20px;
} 
```

[http://codeply.com/go/pejyqLlrBF](http://codeply.com/go/pejyqLlrBF)

# jquery - jQuery UI Slider 的 CSS 向上和向下按钮

> ID：12770592
> 
> 赞同：1
> 
> 时间：2012-10-07T16:23:15.020
> 
> 标签：jquery, css, jquery-ui-slider

CSS，我的另一个明显弱点，正在杀死我。

[这篇文章的](https://stackoverflow.com/questions/12732974/attach-jquery-ui-slider-to-side-of-div-as-divs-scrollbar)海报很慷慨地向我展示了如何将滑块附加到 div，但我认为我需要向上和向下按钮，因为我的滚动条可能有很多步骤。

我不会让自己感到尴尬或让你厌烦我所有的迭代，这些迭代都是完全错误的。

有人可以告诉我如何在垂直滑块的顶部和底部附加一个 jQuery UI 图标，使其看起来像一个滚动条，以便它与上面帖子中提供的 CSS 一起工作？这是对我不起作用的CSS。

提前谢谢了！

**编辑**

很好的答案，非常感谢。有没有办法防止滑块渗入按钮？我会尽快把支票寄出去。

没关系。刚刚弄清楚顶部和底部的真正作用。

**定论**

两种解决方案都有效，我能够轻松调整顶部和底部的出血。

由于向后兼容，我给 Abody97 打了勾，所以我想听起来 tomaroo 将来会更正确。太糟糕的堆栈不允许多个复选框:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:31:52.017

这是我的尝试：[小链接](http://jsfiddle.net/P3dAp/)。

我基本上做了什么：首先，我稍微修改了 HTML：

```
<div id="vertical-slider">
<div class = "up">/\</div>
<div class = "down">\/</div>
</div> 
```

将此添加到 CSS 中：

```
#vertical-slider {
    position: relative; /*necessary for the buttons' positioning to work*/
}
.up {
    position: absolute;
    top: 0; /*up there*/
    left: 0; /*on the left*/
}
.down {
    position: absolute;
    bottom: 0; /*down there*/
    left: 0; /*on the left*/
}
.up, .down {
    width: 100%; /*take up all the width inside the slider*/
    background: rgb(0, 162, 232); /*prettiness*/
    color: white; /*prettiness, too*/
    z-index: 1000; /*make sure they're not covered*/
} 
```

请注意，您必须自己处理点击，但这应该让您了解如何实现视觉布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T16:40:20.910

您可以使用 CSS`:before`和`:after`伪选择器：

[例子](http://jsfiddle.net/2Fpxv/)

您需要使用`top`和`z-index`属性来获得所需的外观。

```
#vertical-slider:before{
    content: url('/slidertop.png');
    position: absolute;
    top: -8px;
    z-index: 1;
}
#vertical-slider:after{
    content: url('/sliderbottom.png');
    position: absolute;
    top: 192px;
    z-index: 1;
} 
```

# jquery - 在没有唯一 ID/容器的情况下单击查看一组更多 div

> ID：12770595
> 
> 赞同：0
> 
> 时间：2012-10-07T16:23:30.433
> 
> 标签：jquery, class, html, view, onclick

这是我想出的一个非常原始的解决方案：http: [//jsfiddle.net/pjD2n/1/](http://jsfiddle.net/pjD2n/1/)

正如您在 HTML 注释中看到的那样，问题是即使在显示所有 div 之后它也会扩展。我认为操纵 div 的显示值可能是更有效的解决方案。这样做的问题是，它们没有唯一的 ID……此外，某些 div 在默认情况下最初必须是可见的。

感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T16:51:16.793

使用[http://api.jquery.com/lt-selector/](http://api.jquery.com/lt-selector/)按索引顺序寻址 div... 还使用 show() 和 hide() 函数

# android - 将cookies发送到下一个活动android

> ID：12770598
> 
> 赞同：1
> 
> 时间：2012-10-07T16:24:07.090
> 
> 标签：android, cookies, android-activity

我使用 httpclient 和 cookiestore 来保持我的会话，现在我想在下一个活动中使用相同的会话，我使用的是 api 8，所以我不能使用 cookiemanager。是否可以？如果我能以某种方式发送 cookie 列表，例如：

```
Intent i = new Intent(this, Login.class);
i.putExtra("domain", domain);
//need to get the following list across
List<Cookie> cookies = cookieStore.getCookies();
//i.putMyDamnCookies("cookies",cookies);
startActivity(i); 
```

知道我怎么能做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T16:29:22.790

是的，您可以将 a 发送`List`到另一个活动，但首先您需要将其转换为`ArrayList`或`String[]`数组的实例。

看看这个线程：
[Passing a List to another Activity in Android](https://stackoverflow.com/questions/6087198/passing-a-list-to-another-activity-in-android)
[How to put a List in intent](https://stackoverflow.com/questions/6541088/how-to-put-a-list-in-intent)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T16:38:31.980

将您的列表存储为字符串数组，并将其传递给下一个活动，如下所示：

```
String[] cookieArray = new String[cookies.size()];
            //copy your List of Strings into the Array 
            int i=0;
            for(Cookie c : cookies ){
                cookieArray[i]=c.toString();
                i++;
             }
            //then pass it in your intent
            Intent intent = new Intent(this, Login.class);
            intent.putExtra("cookieArray", cookieArray);
            startActivity(i); 
```

然后在你的下一个活动中，从意图中检索 cookie 数组并将 cookie 转换回来，如下所示：

```
List<Cookie> cookies = new List<Cookies>();
for(int i=0;i<cookieArray.size;i++)
{
cookies.add(new HttpCookie(cookieArray[i]));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T16:25:24.757

当然 - 只需从 HTTP 标头中读取 cookie，然后将其存储起来，但对您来说很方便。

我认为这可能有点矫枉过正，但这里有一个使用 Android 2.2 附带的 Apache HTTP 客户端的示例：

*   [如何在 Android 上使用 cookie 发出 http 请求？](https://stackoverflow.com/questions/678630/how-do-i-make-an-http-request-using-cookies-on-android)

也看这里（从第 1 级开始可用）：

*   [http://developer.android.com/reference/org/apache/http/cookie/package-summary.html](http://developer.android.com/reference/org/apache/http/cookie/package-summary.html)

# c++ - 将 int 放入现有缓冲区

> ID：12770601
> 
> 赞同：1
> 
> 时间：2012-10-07T16:24:17.660
> 
> 标签：c++, int, buffer

我在下面有一个代码，但我无法放入`int`我的`buffer`.

```
unsigned char  buffer[1024];
buffer[0] = 0x44;
u_long fd = htonl(VERSION);
memcpy(buffer+1, &fd, 4); 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:02:57.520

您正在正确地将值放入缓冲区，但之后您没有正确检查它。 `ntohl(buffer[1])`正在自行检索缓冲区第二个槽内的 1 字节`unsigned char`值，然后在将其传递给时将其扩展为 4 字节值`ntohl()`。您需要做的是检索`unsigned long`占用缓冲区的第二个、第三个、第四个和第五个插槽的 4 字节值并按原样使用它：

```
ntohl(*reinterpret_cast<u_long*>(buffer+1)); 
```

或者：

```
u_long version;
memcpy(&version, buffer+1, 4);
ntohl(version); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T16:34:51.080

`ntohl(buffer[1]);`的值 将被采用 `buffer[1]`（一个字符）并将被转换为`long`。这将导致在一个小端机器上采用`&buffer[1]`明显为 0 的值，对于小于 2 ^(24)（无符号）的值，正如您之前`ntohl`所说的那样，它颠倒了字节顺序.

如果您真的有兴趣查看缓冲区，请尝试

```
int *f =(int*) (&buffer[1]);
printf("\n %u \n", ntohl(*f));//Also *f but then you have to paste it in calculator to see allignment 
```

# c++ - Eclipse - 在 C++ 项目中重新设置断点时出错

> ID：12770604
> 
> 赞同：0
> 
> 时间：2012-10-07T16:24:42.320
> 
> 标签：c++, eclipse, gdb, eclipse-cdt, eclipse-juno

我正在使用带有 CDT 插件的 Eclipse Juno，但我也尝试过在 Indigo 中，这个问题也发生在那里。我在 Ubuntu 12.04 上。

我使用以下代码创建了一个新的 C++ 项目。我在第二行设置了一个断点。

```
#include <iostream>

using namespace std;

int main() {
    cout << "Hello world" << endl;
    cout << "Hi there" << endl; // I've set a breakpoint here using eclipse
} 
```

我的 Makefile 就是这个

```
CXX := g++
CXXFLAGS := -g -c
LDFLAGS := -g -std=c++11
OBJ_FILES := main.o

.PHONY: all clean

all: $(OBJ_FILES)
    $(CXX) $(LDFLAGS) $(OBJ_FILES) -o proj2

main.o: main.cpp
    $(CXX) $(CXXFLAGS) main.cpp -o main.o 

clean:
    rm -rf *.o proj2 
```

当我在 Eclipse 中以调试模式运行它时，一切正常，但是当它运行时，gdb 会吐出以下消息：

```
Error in re-setting breakpoint 1: Function "/home/gulshan/Code/EECS281Workspace/Project 2/main.cpp:7" not defined. 
```

可能值得注意的是，在这种情况下，我没有选中 eclipse 让您在启动时中断的选项，但是当该选项被选中时，它能够在第一行中断而没有任何问题。

这是怎么回事？这是 GDB 跟踪以防万一。

```
707,811 2-environment-cd "/home/gulshan/Code/EECS281Workspace/Project 2"
707,811 2^done
707,812 (gdb) 
707,812 3-gdb-set breakpoint pending on
707,813 3^done
707,813 (gdb) 
707,814 4-gdb-set detach-on-fork on
707,814 4^done
707,814 (gdb) 
707,815 5-enable-pretty-printing
707,815 5^done
707,815 (gdb) 
707,815 6-gdb-set python print-stack none
707,816 6^done
707,816 (gdb) 
707,816 7-gdb-set print object on
707,817 7^done
707,817 (gdb) 
707,818 8-gdb-set print sevenbit-strings on
707,818 8^done
707,818 (gdb) 
707,818 9-gdb-set host-charset UTF-8
707,818 9^done
707,819 (gdb) 
707,819 10-gdb-set target-charset UTF-8
707,819 10^done
707,819 (gdb) 
707,820 11-gdb-set target-wide-charset UTF-32
707,820 11^done
707,820 (gdb) 
707,820 12source .gdbinit
707,821 &"source .gdbinit\n"
707,821 &".gdbinit: No such file or directory.\n"
707,821 12^error,msg=".gdbinit: No such file or directory."
707,821 (gdb) 
707,822 13-gdb-set target-async off
707,822 13^done
707,822 (gdb) 
707,823 14-gdb-set auto-solib-add on
707,823 14^done
707,824 (gdb) 
707,827 15-file-exec-and-symbols --thread-group i1 "/home/gulshan/Code/EECS281Workspace/Project 2/pr\
oj2"
707,828 15^done
707,828 (gdb) 
707,834 16-break-insert --thread-group i1 -f "\"/home/gulshan/Code/EECS281Workspace/Project 2/main.c\
pp\":7"
707,836 16^done,bkpt={number="1",type="breakpoint",disp="keep",enabled="y",addr="0x00000000004007d4"\
,func="main()",file="main.cpp",fullname="/home/gulshan/Code/EECS281Workspace/Project 2/main.cpp",lin\
e="7",times="0",original-location="/home/gulshan/Code/EECS281Workspace/Project 2/main.cpp:7"}
707,837 (gdb) 
707,843 17-inferior-tty-set --thread-group i1 /dev/pts/2
707,844 17^done
707,844 (gdb) 
707,847 18-exec-run --thread-group i1
707,848 =thread-group-started,id="i1",pid="22982"
707,848 =thread-created,id="1",group-id="i1"
707,848 18^running
707,848 *running,thread-id="all"
707,848 (gdb) 
707,849 19-list-thread-groups --available
707,851 =library-loaded,id="/lib64/ld-linux-x86-64.so.2",target-name="/lib64/ld-linux-x86-64.so.2",h\
ost-name="/lib64/ld-linux-x86-64.so.2",symbols-loaded="0",thread-group="i1"
707,870 &"Error in re-setting breakpoint 1: Function \"/home/gulshan/Code/EECS281Workspace/Project 2\
/main.cpp:7\" not defined.\n"
707,872 =breakpoint-modified,bkpt={number="1",type="breakpoint",disp="keep",enabled="n",addr="<PENDI\
NG>",pending="/home/gulshan/Code/EECS281Workspace/Project 2/main.cpp:7",times="0",original-location=\
"/home/gulshan/Code/EECS281Workspace/Project 2/main.cpp:7"}
707,873 =library-loaded,id="/usr/lib/x86_64-linux-gnu/libstdc++.so.6",target-name="/usr/lib/x86_64-l\
inux-gnu/libstdc++.so.6",host-name="/usr/lib/x86_64-linux-gnu/libstdc++.so.6",symbols-loaded="0",thr\
ead-group="i1"
707,874 =library-loaded,id="/lib/x86_64-linux-gnu/libc.so.6",target-name="/lib/x86_64-linux-gnu/libc\
.so.6",host-name="/lib/x86_64-linux-gnu/libc.so.6",symbols-loaded="0",thread-group="i1"
707,874 =library-loaded,id="/lib/x86_64-linux-gnu/libm.so.6",target-name="/lib/x86_64-linux-gnu/libm\
.so.6",host-name="/lib/x86_64-linux-gnu/libm.so.6",symbols-loaded="0",thread-group="i1"
707,874 =library-loaded,id="/lib/x86_64-linux-gnu/libgcc_s.so.1",target-name="/lib/x86_64-linux-gnu/\
libgcc_s.so.1",host-name="/lib/x86_64-linux-gnu/libgcc_s.so.1",symbols-loaded="0",thread-group="i1"
708,269 =thread-exited,id="1",group-id="i1"
708,270 =thread-group-exited,id="i1",exit-code="0"
708,270 *stopped,reason="exited-normally"
708,270 (gdb) 
708,278 20-gdb-exit
708,278 21-data-evaluate-expression $_exitcode
708,291 19^error,msg="Quit"
708,291 (gdb) 
708,292 20^exit
708,292 22-break-delete --thread-group i1 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T20:55:56.257

看起来 GDB 7.4 中存在使用带空格的路径设置断点的问题：http: [//sourceware.org/bugzilla/show_bug.cgi ?id=13798](http://sourceware.org/bugzilla/show_bug.cgi?id=13798)

我已经删除了包含文件的路径中的所有空格，它现在可以工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T08:09:03.913

如果您在调试会话期间修改了代码，也可能发生这种情况。只需运行/“删除所有断点”即可解决问题。

# python - markup.py 如何在标签中使用 ':'

> ID：12770607
> 
> 赞同：3
> 
> 时间：2012-10-07T16:25:07.057
> 
> 标签：python, xml

**代码**：

```
import markup
url_= ('href1.com','href2.com')
mycxml=markup.page(mode='xml', case='given')
mycxml.init(encoding='utf-8')
mycxml.Collection.open()
mycxml.Items(url_)
mycxml.collection.close()
print mycxml 
```

**输出**：

```
<?xml version='1.0' encoding='utf-8' ?>
<Collection>
<Items>href1.com</Items>
<Items>href2.com</Items>
</collection> 
```

我想要一行像`<Collection xmlns:p="somelines">`而不是`<Collection>`，但`:`不允许我编译它。我怎样才能“逃脱”它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T16:42:38.547

我不知道 markup.py 是否有内置的东西来处理这个问题，但是很容易强制 python 使用以下`**`语法接受它：

```
import markup
url_= ('href1.com','href2.com')
mycxml=markup.page(mode='xml', case='given')
mycxml.init(encoding='utf-8')
mycxml.Collection(**{'xmlns:p': 'somelines'})
mycxml.Items(url_)
mycxml.collection.close()
print mycxml 
```

输出：

```
<?xml version='1.0' encoding='utf-8' ?>
<Collection xmlns:p="somelines">
<Items>href1.com</Items>
<Items>href2.com</Items>
</collection> 
```

# javascript - 以编程方式开启用于 html5 中的可编辑部分

> ID：12770615
> 
> 赞同：3
> 
> 时间：2012-10-07T16:25:27.180
> 
> 标签：javascript, html

我正在开发一个 HTML5/javascript/php 项目，我有一个设置为可编辑的项目。

我知道用户可以按下`ctrl + b`使文本变为粗体，但我也想让用户能够单击网页上的相应按钮来执行相同的操作。

即，当用户键入它将是普通文本时，他们单击网页上的粗体按钮并将其附加`<strong>`到该部分的 html 中，并且他们现在键入的任何内容都将被保留，直到他们再次按下该按钮然后附加`</strong>`.

但是，在我追加的那一刻，`<strong>`它似乎会自动添加`</strong>`，我想阻止这种情况发生。我是否以正确的方式解决这个问题，或者有更好的方法可以实现这一目标。

下面是我尝试使用的 javascript

```
function enableDisableBold(section)
{
    var boldEnabled = $("#boldEnabled").val();
    var content = $("#" + section).html();
    var newContent;
    if (boldEnabled == "true")
    {
        $("#btnBold").removeClass("formatButtonsActivated");
        $("#boldEnabled").val("false");
        //newContent = content + "</strong>";
        //$("#" + section).html(newContent);
    }
    else
    {
        $("#btnBold").addClass("formatButtonsActivated");
        $("#boldEnabled").val("true");
        newContent = content + "<strong>";
        $("#" + section).html(newContent.replace("</strong>", ""));
    }

    alert($("#" + section).html());
} 
```

感谢您的任何帮助，您可以提供。

**更新** 我刚刚遇到了另一个解决方案，它可以实现我想要实现的目标，但是有一个小问题。在函数调用结束时，我执行以下代码。

var article = document.getElementById(section); 文章.focus(); document.execCommand("粗体", false, null);

问题是这在 Internet Explorer 中运行良好，但在 Chrome 中是我遇到问题的地方。当我将焦点设置回`<section>`标签时，它会将光标放回文本的开头。我在某处读到`onfocus="this.value = this.value;"`了控制权，但这无济于事。

我试图找到一种将光标放回字符末尾的方法，但实际上我需要将光标放回原来的位置。这是可以做的事情吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:50:38.843

创建一个强大的元素并将您的内容附加到它

```
$('<strong />').append(content); 
```

# java - java.lang.UnsupportedClassVersionError

> ID：12770622
> 
> 赞同：54
> 
> 时间：2012-10-07T16:26:09.710
> 
> 标签：java, unsupported-class-version

当我运行一个 java 程序时，我收到了这个错误。你能否建议我们为什么会收到这个错误：

```
Exception in thread "main" java.lang.UnsupportedClassVersionError: 
    GenerateInvoice (Unsupported major.minor version 49.0)
        at java.lang.ClassLoader.defineClass0(Native Method)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:539)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:123)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:251)
        at java.net.URLClassLoader.access$100(URLClassLoader.java:55)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:194)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:187)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:289)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:274)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:235)
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:302) 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-10-07T16:26:54.580

此类是使用比用于执行的 JDK 更新的 JDK 编译的。

最简单的方法是在执行程序的计算机上安装更新的 JRE。如果您认为您安装了最近的一个，请检查 JAVA_HOME 和 PATH 环境变量。

版本 49 是 java 1.5。这意味着该类是使用（或用于）一个还旧的 JDK 编译的。您可能尝试使用 JDK 1.4 执行该类。您确实应该使用更新的版本（1.6 或 1.7，请参阅[java version history](http://en.wikipedia.org/wiki/Java_version_history)）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T17:36:12.790

另一种选择是删除所有类并重建。拥有构建文件是控制编译、打包和部署等整个过程的理想解决方案。您还可以指定源/目标版本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T16:30:36.837

该代码很可能是使用较新的 JDK 编译的（不使用[交叉编译选项](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html#crosscomp-options)），并且正在较早的 JRE 上运行。虽然升级 JRE 是一种解决方案，但最好使用交叉编译选项来确保代码将在任何 JRE 上运行，该 JRE 是应用程序的最低版本。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-11-01T04:14:30.143

**这是一台全新的 linux Mint xfce 机器**

我已经为此奋斗了大约一个星期。我正在尝试在 Netbeans IDE 上学习 Java，因此我很自然地直接从 Oracle 获得了组合文件。这是 JDK 和 Netbeans IDE 的一个包，位于此处的一个 tar 文件中。

位于 **[http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)** 文件名 **JDK 8u25 和 NetBeans 8.0.1**

在安装它们之后（或者我认为）我会制作/编译一个简单的程序，比如“hello world”，它会输出一个你可以在终端中运行的 jar 文件。**请记住，该程序在 Netbeans IDE 中运行。**

我最终会遇到这个错误：java.lang.UnsupportedClassVersionError：

即使我从 oracle 网站运行该文件，我仍然拥有旧版本的 Java 运行时，它不兼容运行我的 jar 文件，该文件是用新的 java 运行时编译的。

在弄乱了从设置路径到编辑 .bashrc 没有任何补救措施的大部分内容之后。

我遇到了一个对我来说也很简单的解决方案。我遇到了一些自动安装 java 并在你的系统上配置它的东西，它适用于最新的 1.8。*

其中一个步骤是添加 PPA，起初并不确定这一点，但似乎没问题，因为它对我有用

* * *

**sudo add-apt-repository ppa:webupd8team/java**

**sudo apt-get 更新**

**sudo apt-get install oracle-java8-installer**

* * *

domenic@domenic-AO532h ~ $ java -version java version "1.8.0_25" Java(TM) SE Runtime Environment (build 1.8.0_25-b17) Java HotSpot(TM) Server VM (build 25.25-b02，混合模式)

我认为它也配置了浏览器 java。

我希望这对其他人有帮助。

# javascript - 使用 Mechanize for Python 模拟简单的 javascript (location.href=)

> ID：12770625
> 
> 赞同：1
> 
> 时间：2012-10-07T16:26:26.980
> 
> 标签：javascript, python, mechanize

简短：如何执行/模拟 javascript 重定向

```
location.href="http://www.site2.com/"; 
```

与 python 机械化？

我制作了一个带有 mechanize 模块的 python 脚本，它在页面中查找链接并遵循它。

问题出在一个特定的网站上，当我这样做时

```
br.follow_link("http://www.address1.com") 
```

他将我重定向到这个简单的页面：

```
<script language="JavaScript">{                                                                                         
    location.href="http://www.site2.com/";                                                                                           
    self.focus();                                                                                                                   
    }</script> 
```

现在，如果我这样做：

```
br = mechanize.Browser(factory=mechanize.RobustFactory())

... #other code

br.follow_link("http://www.address1.com") 
for link in br.links():   
br.follow_link(link)
print link 
```

它不打印任何东西，这意味着该页面中没有链接。

但是如果我手动解析页面并执行：

```
br.open("http://www.site2.com") 
```

Site2 无法识别我来自“www.address1.com”，并且该脚本无法正常工作！

抱歉，如果这只是一个新手问题，请提前感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T23:19:12.713

尝试添加

```
br.set_handle_referer(True) 
```

在构造函数调用之后。

我向您推荐以下选项：

```
br.set_handle_equiv(True)
br.set_handle_gzip(True)
br.set_handle_redirect(True)
br.set_handle_referer(True)
br.set_handle_robots(False) 
```

# magento - 导航 Magento 文档时遇到问题

> ID：12770627
> 
> 赞同：2
> 
> 时间：2012-10-07T16:27:03.167
> 
> 标签：magento, phpdoc

我是 Magento 的新手，文档，主要是 phpDocs，很难导航。例如，

```
$attributeSet = Mage::getModel('eav/entity_attribute_set')->load($id); 
```

在[Class Mage_Eav_Model_Entity_Attribute_Set](http://docs.magentocommerce.com/Mage_Eav/Mage_Eav_Model_Entity_Attribute_Set.html)的 php 文档中， 无论是在继承的方法中还是在其他方法中，都没有提到方法 getAttributeSetName()，但它仍然有效。

```
$attributeSet = Mage::getModel('eav/entity_attribute_set')->load($id);
echo $attributeSet->getAttributeSetName(); 
```

所以我想我有几个问题。

1.  有人可以向我解释为什么文档是这样的吗？
2.  在 phpDocs 中哪里可以找到神秘的 getAttributeSetName() 方法？

我的理论是，有一些我不理解的继承或设计模式实现正在进行，也许有人可以为我解释一下。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T18:15:02.597

如果你真的想炒你的脑袋，看看源代码，`Mage_Eav_Model_Entity_Attribute_Set`并沿着继承链一路回溯。您不会在`getAttributeSetName`任何地方找到定义的方法。

继承自的所有 Magento 对象都`Varien_Object`可以在其上设置任意数据成员。试试这个。

```
$attributeSet = Mage::getModel('eav/entity_attribute_set')->load($id);
$attributeSet->setFooBazBar('Value');
var_dump($attributeSet->getFooBazBar());
var_dump($attributeSet->getData('foo_baz_bar'));
var_dump($attributeSet->setData('foo_baz_bar','New Value'));
var_dump($attributeSet->getFooBazBar()); 
```

您还可以使用获取所有数据成员

```
var_dump($attributeSet->getData()); 
```

但要小心转储这些，因为如果有一个具有循环引用的数据对象并且您没有使用 xDebug 之类的东西，那么 PHP 将适合尝试显示该对象。

Magento 将数据属性存储在一个特殊的`_data`数组属性中。`getData`您可以使用和获取/设置此数组中的值`setData`。Magento 还实现了魔法获取和设置方法，所以当你说类似

```
$object->getFooBazBar(); 
```

该方法`getFooBazBar`被转换为数据属性`foo_baz_bar`。然后`getData`使用此属性调用。了解情况有点棘手，但是一旦了解，您就会开始了解使用这种模式可以节省多少时间。

当然，这样做的一个副作用是，不可能通过查看它的类文件来推断任何对象可能具有的数据属性，因此这些方法没有 phpDocs。

# javascript - 使用 jquery 获取子节点内的文本

> ID：12770628
> 
> 赞同：2
> 
> 时间：2012-10-07T16:27:11.310
> 
> 标签：javascript, jquery, dom

我有以下html页面结构：

```
<div class="result-row clearfix">
    <span>Name1</span>
    <span>city1</span>
    <span>phone1</span>
    <span>details1</span>
</div>
<div class="result-row clearfix">
    <span>Name2</span>
    <span>city2</span>
    <span>phone2</span>
    <span>details2</span>
</div>
... 
... many such similar divs 
```

我从用户那里得到了简单的输入字段

```
<label for="name">Name</label> <br />
<input type="text" name="name" autocomplete="off" /> <br />

<label for="city">City</label> <br />
<input type="text" name="city" autocomplete="off" /> <br /> 
```

在它的模糊事件中，我想让所有没有要搜索的文本的 div 不可见，只显示匹配的 div（即在 span 标签中包含文本的 div）。

我无法使用 jquery 检索和匹配它。我尝试了以下方法：

```
var nodes = $(".result-row");
console.log("Nodes length: "+nodes.length);  // Displays the correct number of child nodes

for(var i=0;i < nodes.length; i++) {
    var cur = nodes[i];
    console.log(cur);  // Displays '#text' in browser js console log.
    console.log(cur.childNodes[0]);  // Gives undefined. Expecting to get the 1st span tag here.
} 
```

### 编辑

我需要显示具有匹配文本的跨度的行。已经更新了一点html，请参考更新的问题。

我能够将完整的数据作为所有跨度组合的文本获取。有没有办法在特定的 div 中获取跨度数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T16:38:50.627

您可以使用`:contains`选择器：

```
var $row = $('.result-row');
$('input[type=text]').blur(function() {
    var val = this.value;
    $row.hide();
    $row.has('span:contains("'+val+'")').show()
}) 
```

[http://jsfiddle.net/x3VtX/](http://jsfiddle.net/x3VtX/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T16:34:58.163

nodes[i] 是一个 jquery 对象，我猜它没有 childNodes 属性..所以你应该使用 nodes[i].get(0).childNodes 代替......

# php - 如何在不使用 try/catch 的情况下自动将值应用于 PHP 中的类变量

> ID：12770629
> 
> 赞同：1
> 
> 时间：2012-10-07T16:27:17.403
> 
> 标签：php, arrays, class, variables, scope

> **可能重复：**
> [PHP - 使用数组参数初始化对象成员](https://stackoverflow.com/questions/10789334/php-initialize-object-members-with-array-parameter)

我正在寻找一种方法让我的类将关联数组中的数据应用到它自己的成员变量中。但是，如果这些变量不存在，则该过程不应引发任何错误。

请注意：我不是在寻找 extract() 函数的作用，就是我误解了它的行为。

例子：

```
class customer {

    public $firstName;
    public $lastName;
    public $email;

    public function apply($data){
        /* here i want to be able to iterate through $data and set the class
           variables according to the keys, but without causing problems 
           (and without creating the variable in the class) if it does not exist
           (yet)) */
    }

}

$c=new customer();
$c->apply(array(
    'firstName' => 'Max',
    'lastName'  => 'Earthman',
    'email'     => 'max@earthman.com'
)); 
```

希望描述正确。

请询问是否有任何不清楚的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T16:29:09.327

你可以做这样的事情

```
class customer {
    public $firstName;
    public $lastName;
    public $email;

    public function apply($data) {
        $var = get_class_vars(__CLASS__);
        foreach ( $data as $key => $value ) {
            if (array_key_exists($key, $var)) {
                $this->$key = $value;
            }
        }
    }
}

$c = new customer();
$c->apply(array('firstName' => 'Max','lastName' => 'Earthman','email' => 'max@earthman.com',"aaa" => "bbb"));
var_dump($c); 
```

输出

```
object(customer)[1]
  public 'firstName' => string 'Max' (length=3)
  public 'lastName' => string 'Earthman' (length=8)
  public 'email' => string 'max@earthman.com' (length=16) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T16:39:07.847

```
//Works for private as of 5.3.0 
//Will also return statics though.

public function apply($data){
   foreach($data  as $key => $val) {
      if(property_exists('customer',$key)) {
         $this->$key = $val;
      }
   } 
} 
```

如果这是来自数据库，则有函数可以直接返回对象，而不必将关联的数组应用于类。只是一个想法。

# android - 闹钟不显示

> ID：12770630
> 
> 赞同：0
> 
> 时间：2012-10-07T16:27:21.137
> 
> 标签：android, alarm

当我单击我的一个片段内的按钮时，我试图设置一个测试警报。但是警报却没有出现。

```
public class AlarmReceiver extends BroadcastReceiver {

        @Override
        public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub

            Toast.makeText(context, "OnReceive alarm test", Toast.LENGTH_SHORT).show();
        }
    }

//Button is inside a Fragment
Button SetAlarmButton = (Button)(v.findViewById(R.id.SetAlarmButton));       
        SetAlarmButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                try{
                    Calendar alarm = Calendar.getInstance();

                    alarm.set(Calendar.HOUR_OF_DAY, 18);
                    alarm.set(Calendar.MINUTE, 00);
                    long alarmMillis = alarm.getTimeInMillis();
                    Intent intent = new Intent(view.getContext(), AlarmReceiver.class);
                    PendingIntent pendingIntent = PendingIntent.getBroadcast(view.getContext(), 192837, intent, 
                                                              PendingIntent.FLAG_UPDATE_CURRENT);
                    AlarmManager am = (AlarmManager) view.getContext().getSystemService(view.getContext().ALARM_SERVICE);
                    am.set(AlarmManager.RTC_WAKEUP, alarmMillis , pendingIntent);

                }catch(Throwable e){AlertDialog.Builder builder = new AlertDialog.Builder(view.getContext());
                    StringWriter sw = new StringWriter();
                    PrintWriter pw = new PrintWriter(sw);
                    e.printStackTrace(pw);
                    sw.toString();  
                    builder.setMessage(sw.toString());
                    AlertDialog alert = builder.create();
                    alert.show();
                }
        }}); 
```

我知道我需要修改我的清单并添加类似的东西，但我不知道如何以及在哪里

```
<receiver android:name="AlarmReceiver">
            ....
        </receiver> 
```

我的清单

```
<?xml version="1.0" encoding="UTF-8"?>
<manifest android:versionCode="1" android:versionName="1.0"
    package="com.test.alarm" xmlns:android="http://schemas.android.com/apk/res/android">
    <uses-sdk android:minSdkVersion="4" android:targetSdkVersion="15"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/> 
    <application android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" android:theme="@style/AppTheme">
        <activity android:label="@string/title_activity_main" android:name=".Main">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
        <activity 
            android:name=".First_Start"
        />    
        <activity
            android:name=".Preferences"
            android:label="Settings">
        </activity>
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T16:40:40.767

查看 AlarmManager 的文档：http: [//developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

您设置的闹钟与时钟应用程序内置的闹钟功能无关。

系统使用警报来允许应用程序在将来响应某些事件。您基本上告诉系统您希望您的应用程序在一段时间内被唤醒，并且您定义警报响起时调用的 Activity。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T16:46:29.827

```
Intent i = new Intent(AlarmClock.ACTION_SET_ALARM);
i.putExtra(AlarmClock.EXTRA_MESSAGE, "New Alarm");
i.putExtra(AlarmClock.EXTRA_HOUR, hours);
i.putExtra(AlarmClock.EXTRA_MINUTES, mins);
startActivity(i); 
```

但是有了这个我无法指定我想要设置闹钟的日期

# python - 在不应该的时候，integrate.odeint 给出了两个截然不同的答案

> ID：12770634
> 
> 赞同：0
> 
> 时间：2012-10-07T16:28:09.007
> 
> 标签：python, scipy, ode

我有以下python MWE（代码解释如下）

```
#!/usr/bin/python
from scipy import integrate
from math import *
import numpy
import matplotlib.pyplot as plt

def base_equations(y,t,center):
    return [5*exp(-(t-center)**2/3),-5*exp(-(t-center)**2/3)]

def eqexec1(y,t):
    return base_equations(y,t,30)

def eqexec2(y,t):
    return base_equations(y,t,60)

inits=[0.5, 0.5]

trange=numpy.arange(0,100,0.1)
print trange

y1=integrate.odeint(eqexec1,inits, trange, full_output=0, printmessg=1)
y2=integrate.odeint(eqexec2,inits, trange, full_output=0, printmessg=1)
plt.plot(trange,y1,trange,y2)
plt.legend(["y1a","y1b","y2a","y2b"])
plt.xlabel("Time")
plt.show() 
```

正如你所看到的，我正在整合一组方程 ( `base_equations`)，它们本质上是一个高斯脉冲。我用`odeint`数值求解脉冲的两个中心点（30 和 60）的这些方程。

对于第一个中心点 (t=30)，方程 y1 产生预期的行为：脉冲是可见的。

对于第二个中心点 (t=60)，方程 y2 产生了意想不到的行为：根本看不到脉冲！

工作和不工作之间的切换发生在 47 和 48 之间。

图形输出如下。预期的输出是 y2a 和 y2b 行将显示 60 左右的显着变化，但事实并非如此。

![当应该有两个高斯脉冲时，图像显示单个高斯脉冲。](../Images/665989d7bf9adfb711f826f1c73117d7.png)

关于可能发生的事情有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T16:36:02.500

积分器在导数消失的初始区域增加其步长，并且步长变得如此之大，以至于它跨过高斯峰而看不到它。

您可以告诉积分器不要过多地增加步长：

```
y2 = integrate.odeint(eqexec2,inits, trange, full_output=0, printmessg=1,hmax=1.0) 
```

# javascript - 相对于网页浏览量或点击量，我怎样才能让网站的图片变大？

> ID：12770639
> 
> 赞同：1
> 
> 时间：2012-10-07T16:28:47.093
> 
> 标签：javascript, html, responsive-design, pageviews, image-size

### 场景：

我有一个非常基本的 html 网站，其中包含一系列并排的图像。这些图像还链接到相应的文章，当光标悬停在每个图像上时，页面中心会生成链接文章的大型描述。

### 目标：

1.  我希望图像的大小相对于图像链接文章收到的网页浏览量增加一些百分比。文章获得的点击次数越多，图片链接就越大。
2.  同时，图像（其纵横比/尺寸不同）将自动重新排序，或随机移动，以响应方式最适合页面。

非常感谢任何想法、想法或意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:42:59.810

我认为最好的起点是 flex-box，你可以在[这里](http://www.html5rocks.com/en/tutorials/flexbox/quick/)了解它。

这里的重要方面是（来自同一来源，上面）：

box-flex 值：0 | 任何整数 此子项的灵活性比率。如果一个孩子有 1 并且它的兄弟有 2，那么父盒子中的任何额外空间都将被兄弟消耗两倍。它默认为 0，这是不灵活的。

因此，您可以设置它以使某些框比其他框占用更多空间，依此类推。尽管您显然需要为此做一些数学运算。

# qt - QProcess::waitForReadyRead 用于标准错误？

> ID：12770640
> 
> 赞同：0
> 
> 时间：2012-10-07T16:28:50.067
> 
> 标签：qt, qprocess

`QProcess::waitForReadyRead`当进程的标准错误中有数据时返回，还是只在标准输出上等待？如何在不使用信号和插槽的情况下等待 stderr 上的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T16:49:40.493

[QProcess::setReadChannel()](http://qt-project.org/doc/qt-4.8/qprocess.html#setReadChannel)

将控制您是否监控标准错误或标准输出，所以如果您调用：

```
myProcess->setReadChannel( QProcess::StandardError ); 
```

然后`waitForReadyRead`只会作用于stderr。

参见：[QProcess::setProcessChannelMode](http://qt-project.org/doc/qt-4.8/qprocess.html#setProcessChannelMode)

# android - android-maven-plugin：部署不删除 SharedPreferences 的方法

> ID：12770641
> 
> 赞同：6
> 
> 时间：2012-10-07T16:28:51.953
> 
> 标签：android, sharedpreferences, proguard

我构建了一个使用 android-maven-plugin 设置的 android 项目。当我执行 android:deploy 并运行程序时，SharedPreferences 总是被初始化。

有没有办法在不删除 SharedPreferences 存储的情况下将我的项目部署到 AVD？

附言

我使用 Intellij IDEA 并注意到它的[原生 android 运行/调试支持](http://www.jetbrains.com/idea/webhelp/running-and-debugging-android-applications.html)不会删除 SharedPreferences。但是，在我的项目中添加[scala 支持](https://github.com/rohansingh/android-scala-test)后，IDE 在我运行应用程序时报告“方法太多：112423；最大值为 65536”错误。可能是由于缺乏 proguard 预处理。如果有办法在运行具有 Intellij IDEA android 支持的 android 应用程序之前应用 proguard，这将是一个同样有效的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:19:50.157

我认为您的应用在重新安装之前已被卸载 - 这会导致您丢失 SharedPreferences 值。这可以通过 Android Maven 插件参数[undeployBeforeDeploy](http://jayway.github.io/maven-android-plugin/deploy-mojo.html#undeployBeforeDeploy)来控制。

我刚刚尝试使用[android-quickstart](http://stand.spree.de/wiki_details_maven_archetypes)原型创建一个 Maven 项目，发现它自动将以下行添加到我的 POM 中：

```
<undeployBeforeDeploy>true</undeployBeforeDeploy> 
```

尝试将其设置为 false 并重试。

如果您将其设置为 true，它会在您运行时在控制台中打印此行`mvn android:deploy`：

```
[INFO] Successfully uninstalled [package] from [device] 
```

# android - 分发/安装使用开发人员密钥签名的应用程序是否有任何“问题”？

> ID：12770644
> 
> 赞同：1
> 
> 时间：2012-10-07T16:29:28.313
> 
> 标签：android, apk

[这个](https://stackoverflow.com/q/10280278/398802) 关于 SO 的问题表明差异在于某些文件。我的问题是，如果我分发未签名的 apk 文件（在 /bin 文件夹中找到的那个），它有什么不同。在市场上发布时，我们必须创建一个密钥库并导出签名的应用程序，但是如果我不完成整个过程而只是发送或分发使用调试密钥签名的 apk（例如用于同行评审）怎么办。

编辑：我不想将未签名的应用程序投放市场，只是在少数设备上进行检查。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T16:51:21.037

> 分发/安装使用开发人员密钥签名的应用程序是否有任何“问题”？

开发者密钥的最长生命周期为一年。之后，APK 将不再可用。而且，由于在创建密钥时设置了一年的生命周期（当您第一次运行 Android SDK 构建工具时，或者当您重新生成密钥时），可以想象，您的 APK 将不再工作，例如，明天.

此外，使用开发人员密钥安装您的应用程序的人稍后需要卸载它才能安装您的生产签名 APK，因此请确保他们理解这一点。

此外，默认情况下，每个开发人员都有自己的开发人员密钥，因此我建议您与您的开发团队中的哪个成员正在创建 APK 以供公司外部使用保持一致。

否则，我想不出将此类 APK 用于测试目的、进行中的客户端预览等有什么特殊问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T16:37:45.433

还有两个不同版本的*签名*apk。

默认情况下，您的 IDE 将使用*调试*密钥对您的 apk 进行签名，如果用户选中“设置”中的“用于开发”框，则允许用户将其安装在他们的设备上。

为了发布到市场，您必须使用*发布*密钥对其进行签名，这允许用户在不启用其他设置的情况下安装它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T16:32:44.573

您不能发布未签名的 .apk。Android 开发者控制台不会让你这样做。

# c++ - 作为参数传递给 C++ 中的类时的内存丢失

> ID：12770648
> 
> 赞同：1
> 
> 时间：2012-10-07T16:29:39.880
> 
> 标签：c++, arrays, class, visual-c++, arguments

我用一个模板定义了一个类，该模板定义了一个通用数组类型 T 元素个数 N。我有另一个类，它有一个该数组的实例作为成员。当我尝试使用 setString 函数时，我传递的数组从 15 个元素任意变为 4 个元素。

```
// testClassArraySize.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include <stdio.h>
#include <iostream>
#include <istream>
#include <ostream>
using namespace std;

template<class T, int N>
class CArray {
public:
    T arr[N];
    CArray(void) {/*arr=(T *)malloc(sizeof(T)*N);*/
        if (arr == NULL) {
            cout << "allocation error\n";
        }
    }
    ;
    //CArray (int n) {arr=new T [n]; if(arr==NULL){exit(0); cout<<"allocation error\n";}};
    CArray operator=(const T *);
    T operator[](const int i) {
        return arr[i];
    }
    ;
};

template<class T, int N>
CArray<T, N> CArray<T, N>::operator=(const T *srce) {
    size_t x = sizeof(arr);
    size_t y = sizeof(srce);
    for (int j = 0; j < sizeof(arr); j++) {
        if (j > sizeof(srce)) {
            arr[j] = 0;
            break;
        }
        arr[j] = srce[j];
    }
    return *this;
}

class myTestClass {
private:
    CArray<char, 15> myString;
public:
    myTestClass setString(char set[15]) {
        myString = set;
        size_t x = sizeof(set);
        return *this;
    }
    ;
};

int main() {
    myTestClass myObject;
    myObject.setString("helloWorld");
    return 0;
} 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T16:37:27.690

这有几个问题，但你可能会看到的一个是线

```
CArray<T, N> CArray<T, N>::operator= (const T *srce) 
```

注意：`const T* source`是指针，因此`sizeof(srce)`是指针的大小。我猜你使用的是32位系统？

`sizeof`为您提供对象的大小（即“存储区域”）。对于数组，这是整个数组的大小（以字节为单位）。`sizeof( int[10] ) == sizeof(int) * 10`. 指针本身就是一个对象，其大小取决于 C++ 实现（操作系统、编译器等）。在 32 位系统上，它通常是 4 字节。`sizeof( char* )`因此是 4 字节，而不是您传递给函数的数组的长度，`sizeof( (char*)(char[10]) )`仍然是 4 字节，而不是 10。

您可能会看到的另一个问题（但只能通过调试/跟踪）是`setString(char set[15])`已解决为`setString(char* set)`. 因此`x = sizeof(set)`解析到`x = sizeof(char*)`通常是 4。

您将“helloWorld”传递给`setString`，它需要一个~~15 项的 char 数组~~`char*`；我会说这不是一个好主意，因为“helloWorld”有类型`char const[10]`（注意`const`）。获取 15 字符数组的正确语法是`char (&set)[15]`.

如果你添加一个模板成员函数，你可以更优雅地做到这一点：

```
// in class CArray
template < std::size_t length >
CArray& operator= (const T (&srce)[length]);    // note I return a reference, so no copying 
```

这样，您将获得数组大小作为模板参数。注意：由于我`const T`在赋值操作中使用了此处，因此您还需要在`setString`.

```
template < class T, int N >
template < std::size_t srce_length >
CArray < T, N >& CArray < T, N > :: operator= (const T (&srce)[srce_length])
{
    for (int j = 0; j < N; j++) {    // N is the own length
        if (j >= srce_length) {    // note the >= instead of >, and srce_length instead of sizeof
            arr[j] = 0;
            break;
        }
        arr[j] = srce[j];
    }
    return *this;
} 
```

# schema.org - 带有自定义文本的 Schema.org AggregateOffer（例如“每个主菜”）

> ID：12770651
> 
> 赞同：2
> 
> 时间：2012-10-07T16:29:42.230
> 
> 标签：schema.org

[`AggregateOffer`](http://schema.org/AggregateOffer)我需要使用 schema.org或[`Offer`](http://schema.org/Offer)从 schema.org编写的“每个主菜”或“每晚” 。

如果您单击“评论”，[Google 的结构化数据测试工具会显示一个示例。](https://www.google.com/webmasters/tools/richsnippets)Urbanspoon 使用文本“每个主菜”来概述与价格的关系，但它们不适用于 schema.org。有人知道如何使用 schema.org 处理这个问题吗？

# c++ - linux上mysql连接器c++的问题

> ID：12770658
> 
> 赞同：0
> 
> 时间：2012-10-07T16:30:51.120
> 
> 标签：c++, mysql-connector

说我的IP地址是`127.0.0.1:8081`用户名`root`和密码`root`

我想通过 C++ 连接到 mysql

这是通过浏览器工作的`127.0.0.1:8081/phpmyadmin/`，我可以在其中输入我的密码和用户名并选择一个服务器，例如我选择服务器`C`

按照网页上的示例进行操作，我无法连接到服务器并出现以下错误

```
driver = get_driver_instance();
  con = driver->connect("tcp://127.0.0.1:3306", "root", "root");
  /* Connect to the MySQL test database */
  con->setSchema("test");

# ERR: Lost connection to MySQL server at 'reading initial communication packet', system error: 0 (MySQL error code: 2013, SQLState: HY000 )
success 
```

我究竟做错了什么？我也应该指定服务器吗？

**编辑：** 网站给我的唯一信息是

```
 Server: C via TCP/IP
    Server version: 5.1.63-0ubuntu0.11.10.1
    Protocol version: 10
    User: root@website.com
    MySQL charset: UTF-8 Unicode (utf8) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:33:38.163

如果我没看错的话，你有一个响应点 3306 的 http 服务器，而不是 mysql。您应该找出您的 mysql 正在侦听的端口。也许，您可以在`phpmyadmin`setup for server中找到它`C`。

但总的来说，这听起来像是一个奇怪的设置，而且你或多或少都做错了。

# php - 如何在同一个 MySQL 输出中包含一个 BETWEEN 输出和一个异常记录？

> ID：12770662
> 
> 赞同：0
> 
> 时间：2012-10-07T16:31:04.913
> 
> 标签：php, mysql

我正在使用 PHP 在 MySQL 中工作。我正在从一个包含邮政编码和每个邮政编码的纬度/经度的表中查询邮政编码。第二个表包含该邮政编码的邮政编码和平均收入。用户提供一个邮政编码（我们称之为基本邮政编码），它会返回一个 15 英里半径的邮政编码。通过网页，用户可以查询在 PHP 中使用 BETWEEN for MySQL 的一系列收入。

我的问题是，根据用户选择的范围，他们的基本邮政编码可能不会一直出现，因为它超出了收入范围。发生这种情况时，用户会感到困惑，因为排序后的输出不包括他们的基本邮政编码。我希望能够包含基本邮政编码，就好像没有指定收入范围一样。

如何包含范围数据（使用 BETWEEN）并包含基本邮政编码的数据，以便它仍然利用 MySQL 的输出排序。谢谢！

更新：这是邮政编码 90210 的工作查询。如您所见，它不会像我希望的那样返回 90210，因为 BETWEEN 因为它不在收入范围内（平均 agi）：

```
mysql> SELECT zip, city, state, avg_agi, ( 3959 * acos( cos( radians(34.088808) ) * cos(    radians( lat ) ) * cos( radians( lng ) - radians(-118.40612) ) + sin( radians(34.088808) ) * sin( radians( lat ) ) ) ) AS distance FROM zip_codes, avgagi where zip=zipcode and avg_agi BETWEEN 100000 and 200000 HAVING distance < 5 ORDER BY distance LIMIT 0 , 10000;
+-------+----------------+-------+---------+------------------+
| zip   | city           | state | avg_agi | distance         |
+-------+----------------+-------+---------+------------------+
| 90069 | West Hollywood | CA    |  121753 | 1.42816585190112 |
| 90211 | Beverly Hills  | CA    |  164538 | 2.06804933097035 |
| 90024 | Los Angeles    | CA    |  187134 | 2.47751318825072 |
| 90025 | Los Angeles    | CA    |  130983 | 3.76591348160737 |
| 91604 | Studio City    | CA    |  103328 |  3.8634176735557 |
| 90064 | Los Angeles    | CA    |  130769 | 3.95933331921038 |
| 90068 | Los Angeles    | CA    |  100370 | 4.52908379278674 |
+-------+----------------+-------+---------+------------------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T16:38:47.270

WHERE（x 和 y 之间的数据）或（zip = z）

不应该工作吗？

# iphone - Iphone AddressBook Framework - 人物属性

> ID：12770666
> 
> 赞同：1
> 
> 时间：2012-10-07T16:31:25.617
> 
> 标签：iphone, ios, xcode

我试图找出 iPhone 地址簿中完整的“个人记录”默认具有哪些属性。

它必须隐藏在 API 中的某个位置

[https://developer.apple.com/library/content/documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Introduction.html#//apple_ref/doc/uid/TP40007744](https://developer.apple.com/library/content/documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Introduction.html#//apple_ref/doc/uid/TP40007744)

[https://developer.apple.com/documentation/addressbook#//apple_ref/doc/uid/TP40007210](https://developer.apple.com/documentation/addressbook#//apple_ref/doc/uid/TP40007210)

但到目前为止我还没有找到一份清单。

有任何人的属性列表：姓名、名字、电子邮件、电话和可能的“隐藏”字段，如创建的条目

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T10:05:48.713

```
NSAutoreleasePool* pool  = [[NSAutoreleasePool alloc] init];

ABAddressBookRef addressBook = ABAddressBookCreate();

NSArray *array= (NSArray *)ABAddressBookCopyArrayOfAllPeople(addressBook);

for (id persion in array) 
{
    ABRecordRef record = (ABRecordRef)persion;

    NSString* firstName=(NSString *)ABRecordCopyValue(record, kABPersonFirstNameProperty);
    NSString* lastName=(NSString *)ABRecordCopyValue(record, kABPersonLastNameProperty);

    //do something

    [firstName release];
    [lastName release];

    ABMultiValueRef mulPhone = (ABMultiValueRef) ABRecordCopyValue(record, kABPersonPhoneProperty) ;
    int count = ABMultiValueGetCount(mulPhone);
    for(CFIndex i=0 ; i < count ; i++)
    {
        NSString* phoneLabel = (NSString*) ABMultiValueCopyLabelAtIndex(mulPhone, i) ;        
        NSString* cellPhone =(NSString*) ABMultiValueCopyValueAtIndex(mulPhone, i) ;

        //do something

        [phoneLabel release] ;
        [cellPhone release];
    }
    CFRelease(mulPhone) ;

    ABMultiValueRef mulAddress =(ABMultiValueRef) ABRecordCopyValue(record, kABPersonAddressProperty) ;
    count = ABMultiValueGetCount(mulAddress);
    for(CFIndex i=0 ; i< count ; i++)
    {
        NSString* addressLabel = (NSString*) ABMultiValueCopyLabelAtIndex(mulAddress, i) ;

        CFDictionaryRef dict = (CFDictionaryRef)ABMultiValueCopyValueAtIndex(mulAddress, i);

        NSString* homeStreet  = (NSString*)CFDictionaryGetValue(dict, kABPersonAddressStreetKey);
        NSString* homeCity    = (NSString*)CFDictionaryGetValue(dict, kABPersonAddressCityKey);
        NSString* homeCountry = (NSString*)CFDictionaryGetValue(dict, kABPersonAddressCountryKey);

       //do something
        CFRelease(dict) ;

        [addressLabel release];
    }
    CFRelease(mulAddress) ;

    NSString* company  = (NSString*)ABRecordCopyValue(record, kABPersonOrganizationProperty);
    if (company) {
 //do something
    }
    [company release];

    ABMultiValueRef mulEmail = (ABMultiValueRef)ABRecordCopyValue(record, kABPersonEmailProperty) ;
    count = ABMultiValueGetCount(mulEmail);
    for(CFIndex i=0 ; i<  count; i++)
    {
        NSString* emailLabel = (NSString*)ABMultiValueCopyLabelAtIndex(mulEmail, i) ;
        NSString* email = (NSString*) ABMultiValueCopyValueAtIndex(mulEmail, i) ;

        //do something
        [emailLabel release];
        [email release];

    }
    CFRelease(mulEmail) ;

}
[array release];
CFRelease(addressBook);

[pool release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-16T11:56:43.700

Person 的默认属性：[https ://developer.apple.com/documentation/addressbook/address_book_objective_c_constants/default_person_properties](https://developer.apple.com/documentation/addressbook/address_book_objective_c_constants/default_person_properties)

> **kABFirstNameProperty**：名字。
> 
> **kABLastNameProperty**：姓氏。
> 
> **kABFirstNamePhoneticProperty**：名字的语音表示。
> 
> **kABLastNamePhoneticProperty**：姓氏的语音表示。
> 
> **kABNicknameProperty**：昵称。
> 
> **kABMaidenNameProperty** : 娘家姓。
> 
> **kABBirthdayProperty**：出生日期。
> 
> **kABBirthdayComponentsProperty**：作为日期组件的出生日期。
> 
> **kABOrganizationProperty**：公司名称。
> 
> **kABJobTitleProperty**：职位。
> 
> **kABHomePageProperty**：主页。
> 
> **kABURLsProperty**：网页。
> 
> **kABCalendarURIsProperty**：日历 URI。
> 
> **kABEmailProperty**：电子邮件地址。
> 
> **kABAddressProperty**：街道地址。
> 
> **kABOtherDatesProperty** : 与人相关的日期。
> 
> **kABOtherDateComponentsProperty**：与人关联的日期，作为日期组件。
> 
> **kABRelatedNamesProperty**：与人相关的人的姓名。
> 
> **kABDepartmentProperty**：部门名称。
> 
> **kABPersonFlags**：指定地址簿应用程序中记录的名称排序和配置的属性。请参阅[人员标志](https://developer.apple.com/documentation/addressbook/abperson/person_flags)。
> 
> **kABhoneProperty**：通用电话号码。
> 
> **kABInstantMessageProperty**：即时消息 ID。
> 
> **kABNoteProperty**：注释。
> 
> **kABSocialProfileProperty**：社交网络配置文件。
> 
> **kABMiddleNameProperty**：中间名。
> 
> **kABMiddleNamePhoneticProperty**：中间名的语音表示。
> 
> **kABTitleProperty** : 头衔，例如“先生”、“夫人”、“将军”、“红衣主教”或“勋爵”。</p>
> 
> **kABSuffixProperty**：后缀，例如“Sr.”、“Jr.”、“III.”或“Esq.”</p>

而且因为一个人是一个记录，它也有：[https ://developer.apple.com/documentation/addressbook/address_book_objective_c_constants/default_record_properties](https://developer.apple.com/documentation/addressbook/address_book_objective_c_constants/default_record_properties)

> **kABUIDProperty**：此记录的唯一 ID。无论记录发生多大变化，它都保证永远不会改变。如果您需要存储对记录的引用，请使用此值。
> 
> **kABCreationDateProperty**：首次保存记录的日期。
> 
> **kABModificationDateProperty**：上次保存记录的日期。

注意，[`properties()`](https://developer.apple.com/documentation/addressbook/abperson/1458494-properties)应该返回一个人的所有属性的列表。

# java - 按位旋转是否比当前 Intel CPU 上的移位慢？

> ID：12770667
> 
> 赞同：2
> 
> 时间：2012-10-07T16:31:27.320
> 
> 标签：java, assembly, rotation, bit-shift

我很好奇是否`java.lang.Integer.rotateLeft`通过使用旋转指令进行优化并为其编写基准。结果尚无定论：它比两班倒快得多，但比单班倒慢一点。所以我用 C++ 重写了它并得到了大致相同的结果。通过编译时，`g++ -S -Wall -O3`我可以看到[生成的汇编器](https://dl.dropbox.com/u/4971686/published/maaartin/so/RotationBenchmark.s)中的指令。我的 CPU 是 Intel Core i5。

[基准](https://dl.dropbox.com/u/4971686/published/maaartin/so/RotationBenchmark.cc)很长，肯定不是最好的代码，但我不认为它被破坏了。或者是吗？根据文档，轮换需要一个周期，就像轮班一样。任何人都可以解释结果吗？

```
rotations:  6860
shift:      5100 
```

* * *

前两个答案是错误的。gcc 和 java 的 JIT 都知道旋转指令并使用它们。关于 gcc 参见上面的链接，关于 java 参见我的[java benchmark](https://dl.dropbox.com/u/4971686/published/maaartin/so/MgLongRotationBenchmark.java) and its results

```
benchmark   ns linear runtime
   Rotate 3.48 ====================
NonRotate 5.05 ==============================
    Shift 2.16 ============ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T16:50:48.967

我不知道 gcc 和 java jit 能够识别一系列 SHIFT 和 OR 运算符可以简化为 ROTATE 指令，非常有趣。

g++ 编译器展开您的循环、使用`SHIFT immediate`和`ROTATE immediate`指令（因为您按常量值移位和旋转）。

这是在 TimeShift 循环展开案例中重复的六个指令序列：

```
movq    %rax, %rbx
salq    $13, %rbx
leaq    (%rbp,%rbx), %rbx
movq    %rdi, %rbp
sarq    $27, %rbp
xorq    %rbx, %rdx 
```

这是在 TimeRotate 循环展开案例中重复的六个指令序列：

```
movq    %rdx, %rbx
rorq    $45, %rbx
leaq    (%rbp,%rbx), %rbx
movq    %r8, %rbp
rorq    $49, %rbp
xorq    %rbx, %r9 
```

它们的区别主要在于salq/sarq for`SHIFT`和rorq for的使用，`ROTATE`所以你想知道为什么时间不同是正确的。

答案深藏在 Sandy Bridge（您的 Core i5 处理器）的微架构中，可在[INTEL® 64 和 IA-32 处理器架构优化参考手册](http://www.intel.com/content/dam/doc/manual/64-ia-32-architectures-optimization-manual.pdf) 中找到最新的是`Order Number: 248966-026 April 2012`

`SHIFT`无论您使用操作`by 1`码还是`by immediate`. 它可以从`Port 0`或分派，`Port 1`因此具有 0.5 个周期的吞吐量 - 处理器`SHIFT immediate`每个周期可以分派和退出两条指令。如果需要条件标志的结果（它们不在 gcc 生成的代码中），则该`ROTATE`指令需要三个微操作，如果不需要，则需要两个微操作（因此在您的情况下需要两个微操作）。然而，该`ROTATE`指令只能被分派`Port 1`，因此具有 1 个周期的吞吐量——处理器每个周期只能分派和退出一个`ROTATE immediate`。

我已经复制了下面的相关图片和部分。

**3.5.1.5 按位旋转**

按位旋转可以在 CL 寄存器中指定的计数、立即数和 1 位之间进行选择。通常，立即循环和寄存器循环指令比循环旋转 1 位要慢。循环 1 指令具有与移位相同的延迟。 *汇编/编译器编码规则 35。（ML 影响，L 通用性）避免通过寄存器旋转或通过立即指令旋转。如果可能，请用 ROTATE by 1 指令替换。* 在英特尔微架构代号 Sandy Bridge 中，立即数的 ROL/ROR 具有 1 个周期的吞吐量，使用相同寄存器作为源和目标的立即数常量的 SHLD/SHRD 具有 1 个周期的延迟和 0.5 个周期的吞吐量。“ROL/ROR reg, imm8”指令有两个微操作，循环寄存器结果的延迟为 1 个周期，标志的延迟为 2 个周期（如果使用）。在 Intel 微架构代号 Ivy Bridge 中，立即数大于 1 的“ROL/ROR reg, imm8”指令是一个在使用溢出标志结果时具有一个周期延迟的微操作。当立即数为 1 时，后续指令对 ROL/ROR 溢出标志结果的依赖会看到 ROL/ROR 指令有两个周期的延迟。

**2.4.4.2 执行单元和发布端口**

在每个周期，内核可以将微操作发送到四个发布端口中的一个或多个。在微架构层面，存储操作进一步分为两部分：存储数据和存储地址操作。图 2-6 显示了将 μop 分派到执行单元以及加载和存储操作的四个端口。一些端口每个时钟可以调度两个微操作。这些执行单元被标记为双速。

**端口 0。**在周期的前半部分，端口 0 可以调度一个浮点移动 µop（浮点堆栈移动、浮点交换或浮点存储数据）或一个算术逻辑单元 (ALU) µop （算术、逻辑、分支或存储数据）。在周期的后半部分，它可以调度一个类似的 ALU µop。

**端口 1。**在周期的前半部分，端口 1 可以调度一个浮点执行（除移动之外的所有浮点运算、所有 SIMD 运算）μop 或一个正常速度整数（乘法、移位和旋转）μop 或一个 ALU（算术）微操作。在周期的后半部分，它可以调度一个类似的 ALU µop。

**端口 2。**此端口支持每个周期调度一个加载操作。

**端口 3。**此端口支持每个周期调度一个存储地址操作。

每个周期的总问题带宽范围为 0 到 6 µops。每个管道包含几个执行单元。µops 被分派到对应于正确操作类型的管道。例如，整数算术逻辑单元和浮点执行单元（加法器、乘法器和除法器）可以共享一个流水线。

![图 2-11。 乱序核心中的执行单元和端口](../Images/40a11570fd311268539626ebbb4dab72.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-07T19:32:31.163

根据这个[基准](http://users.atw.hu/instlatx64/GenuineIntel0020652_Clarkdale_InstLatX86.txt)，移位和轮换在您的 CPU 上具有相同的延迟，但轮换的吞吐量较低（列为“T”的结果是倒数吞吐量，这更容易与延迟进行比较）。这可能正是您所看到的那种结果 - 较低的吞吐量有点妨碍，但您并没有完全使执行单元饱和，因此它没有显示出 2 差异的全部因素。对自己进行测试*并不容易*，尤其是当您必须与编译器对抗以使其发出您想要的指令时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T19:20:18.900

When you are looking at micro-benchmarks, you have to consider that the JIT will optimise common patterns e.g. shift, it recognises more efficiently than uncommon patterns e.g. rotate (or ones it does not recognise) This can means that two operations which should take the same amount of time can perform quite differently because one is more heavily optimised than the other. e.g. with more loop unrolling or dead code removal.

Even simple instructions can interact to produce different and unexpected results. In other words you cannot look at a single instruction and assume it tell you very much about how it will perform when more instructions are used. Context is important at such a low level.

I suggest you try comparing these operations in a realistic program and I suspect you will have great difficulty finding a measurable difference.

# mongodb - 按与 MongoDB 的相关性排序

> ID：12770673
> 
> 赞同：6
> 
> 时间：2012-10-07T16:32:03.917
> 
> 标签：mongodb, sorting

我有以下形式的文件集合：

```
{ _id: ObjectId(...)
, title: "foo"
, tags: ["bar", "baz", "qux"] 
} 
```

查询应该找到所有带有这些标签的文档。我目前使用这个查询：

```
{ "tags": { "$in": ["bar", "hello"] } } 
```

它有效；返回所有标记为“bar”或“hello”的文档。

但是，我想按相关性排序，即*匹配的标签*越多，文档应该出现在结果中的时间越早。例如，`["bar", "hello", "baz"]`在结果中标记的文档应该高于`["bar", "baz", "boo"]`为查询标记的文档`["bar", "hello"]`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-07T21:28:57.903

MapReduce 并在客户端执行它会太慢 - 您应该使用聚合框架（MongoDB 2.2 中的新功能）。

它可能看起来像这样：

```
db.collection.aggregate([
   { $match : { "tags": { "$in": ["bar", "hello"] } } },
   { $unwind : "$tags" },
   { $match : { "tags": { "$in": ["bar", "hello"] } } },
   { $group : { _id: "$title", numRelTags: { $sum:1 } } },
   { $sort : { numRelTags : -1 } }
   //  optionally
   , { $limit : 10 }
]) 
```

请注意，第一个和第三个管道成员看起来相同，这是有意和需要的。以下是这些步骤的作用：

1.  仅传递其中包含标签“bar”或“hello”的文档。
2.  展开标签数组（意味着每个标签元素拆分为一个文档
3.  只传递“bar”或“hello”的标签（即丢弃其余的标签）
4.  按标题分组（也可以是“$_id”或原始文档的任何其他组合加起来它有多少标签（“bar”和“hello”）
5.  按相关标签数量降序排序
6.  （可选）将返回的集合限制为前 10 个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T19:02:25.343

你可能会使用 MapReduce 来做类似的事情。您将在 Map 步骤中处理每个文档，确定有多少标签与查询匹配，并分配一个分数。然后您可以根据该分数进行排序。

[http://www.mongodb.org/display/DOCS/MapReduce](http://www.mongodb.org/display/DOCS/MapReduce)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T19:40:59.390

查询后应该做一些复杂的事情。通过 db.eval 的服务器端（如果您的客户端支持此）或只是客户端。这是您正在寻找的示例。

它将检索具有您指定的标签的所有帖子，然后根据匹配的数量对它们进行排序。

删除 db.eva( 部分并将其翻译成您的客户端用来查询以获得客户端效果的语言（

```
db.eval(function () {
    var tags = ["a","b","c"];
    return db.posts.find({tags:{$in:tags}}).toArray().sort(function(a,b){

        var matches_a = 0;
        var matches_b = 0;
        a.tags.forEach(function (tag) {
            for (t in tags) {
                if (tag == t) {
                    matches_a++;
                } else {
                    matches_b++;
                }
            }
        });

        b.tags.forEach(function(tag) {
            for (t in tags) {
                if (tag == t) {
                    matches_b++;
                } else {
                    matches_a++;
                }
            }
        });
        return matches_a - matches_b;
    });
}); 
```

# node.js - 无法让 Mongoose.js 子文档数组填充

> ID：12770682
> 
> 赞同：16
> 
> 时间：2012-10-07T16:32:56.443
> 
> 标签：node.js, mongodb, mongoose

我在连接到 mongodb 的 node.js 服务器上使用 mongoose.js，我有一个如下所示的 mongoose 模型

```
SubSchema = new Schema({
    _member:     {type: ObjectId, ref: 'Member'},
    members:     [{type: ObjectId, ref: 'Member'}],
    created:     { type: Date, default: Date.now }
});
mongoose.model('SubModel', SubSchema);

MainSchema = new Schema({
    _member:     {type: ObjectId, ref: 'Member'},
    subs:        [SubSchema],
    members:     [{type: ObjectId, ref: 'Member'}],
    created:     { type: Date, default: Date.now }
});
var MainModel mongoose.model('MainModel', MainSchema); 
```

我用这样的命令拉

```
var q = MainModel.find({})
                 .sort('created', -1)
                 .limit(25)
                 .populate("_member")
                 .populate("subs._member")
                 .populate("subs.members");

q.execFind(function(err, mains){
    //mains[0].subs[0].members - will always be empty why?
}); 
```

我的问题是我无法让 subs.members 数组填充甚至加载，它只是一直显示为一个空数组。

我试过 .populate("subs.members") 无济于事，即使 subs._member 加载得很好

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-01-24T14:28:00.367

试试这个

```
 SubSchema = new Schema({
        _member:     {type: ObjectId, ref: 'Member'},
        members:     [{type: ObjectId, ref: 'Member'}],
        created:     { type: Date, default: Date.now }
    });
    var SubModel = mongoose.model('SubModel', SubSchema);//add

    MainSchema = new Schema({
        _member:     {type: ObjectId, ref: 'Member'},
        subs:        [SubSchema],
        members:     [{type: ObjectId, ref: 'Member'}],
        created:     { type: Date, default: Date.now }
    });

    var MainModel = mongoose.model('MainModel', MainSchema);

    MainModel.find({})
             .sort('created', -1)
             .limit(25)
             .populate("_member")
             .populate("subs._member")
             .exec(function(err, mains){

                 //add
                 SubModel.populate(mains,{
                     path:'subs.members'
                 },function(err,mains){
                    //mains[0].subs[0].members - is not empty
                 });
             }); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-23T01:22:40.013

@leesei：我无法评论您的帖子（代表太少），所以我将其作为单独的答案。

在 mongoose 3.6 subdoc 中仍然无法正常工作，问题[github.com/LearnBoost/mongoose/issues/1381](https://github.com/LearnBoost/mongoose/issues/1381)已在 7 个月前关闭，并使用以下解决方案作为解决方法。我不得不稍微更改它以将填充的子文档合并回主文档。

`Story`必须明确指定子文档的模型：

```
Person.findById(user1._id).populate("stories")
    .exec(function(err, doc {
         Story.populate(doc.stories, {path: 'creator'}, function (err, stories) {
             doc.stories = stories;
             return doc;
         })
}) 
```

在上面的解决方案中，这有效：

```
Story.populate(doc.stories, {path: 'creator'}, callback) 
```

但这仍然行不通：

```
Story.populate(doc, {path: 'stories.creator'}, callback) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-19T04:12:55.677

跟进@JohnnyHK 的帖子，您可以指定暂时使用的模型`populate()`：

[https ://github.com/LearnBoost/mongoose/issues/1377#issuecomment-15920370](https://github.com/LearnBoost/mongoose/issues/1377#issuecomment-15920370)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-17T19:16:53.113

我有几个嵌套层深的子文档，并且提供的选项都不适合我。我发现了这个神奇的 Mongoose 插件，它可以无缝地进行深度填充。您只需使用您希望使用 populate 的相同语法，但它确实有效。

[https://github.com/buunguyen/mongoose-deep-populate](https://github.com/buunguyen/mongoose-deep-populate)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-08T19:50:07.353

我有一些看起来略有不同但使用数组项填充文档的东西。我想知道是否是导致问题的对象。

```
var mongoose = require('mongoose');
var Schema = mongoose.Schema, ObjectID = Schema.ObjectId;

var SubSchema = new Schema({
    testsub: String,       
    created: { type: Date, default: Date.now }
});

var MainSchema = new Schema({
    test: String
    subs: [SubSchema],
    created: { type: Date, default: Date.now }
});

mongoose.model('MainSchema', MainSchema, mainschema);

var query = MainSchema.find({}); 
```

# c# - 如何从隔离存储中删除图像

> ID：12770684
> 
> 赞同：1
> 
> 时间：2012-10-07T16:33:07.180
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, windows-phone, isolatedstorage

我有一个列表框，它绑定到从隔离存储中获取的图像，这是我获取这些图像的方式...

```
 foreach (string fileName in fileStorage.GetFileNames("images//*.*"))
            {
                if (fileName == null)
                    break;
                string filepath = System.IO.Path.Combine("images", fileName);
                using (IsolatedStorageFileStream imageStream = fileStorage.OpenFile(filepath, FileMode.Open, FileAccess.Read))
                {
                    var imageSource = PictureDecoder.DecodeJpeg(imageStream);
                    BitmapImage bitmapImage = new BitmapImage();
                    bitmapImage.SetSource(imageStream);
                    vltBitmapImage.Add(bitmapImage);

                }
            }
          this.vaultbox.ItemsSource = vltBitmapImage; 
```

现在我想删除选定的图像（可以选择多个）

```
 if (vaultbox.SelectedItems.Count != 0)
        {
            MessageBoxResult m = MessageBox.Show("Files will be deleted forever", "Are you sure?", MessageBoxButton.OKCancel);
            if (m == MessageBoxResult.Cancel)
                vaultbox.SelectedIndex = -1;
            else if(m==MessageBoxResult.OK)
            {
                foreach (BitmapImage item in vaultbox.SelectedItems)
                {
                    //what should i do here?
                }
            }
        }
        else
            MessageBox.Show("No file selected"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T16:45:22.117

您必须存储连接图像文件名。

例如：

```
public class ImageToName
{
   public BitmapImage Image {get;set;}
   public string FileName {get;set;}
} 
```

列表将更改为：

```
List<ImageToName> vltBitmapImage = new List<ImageToName>(); 
```

并以这种方式填写列表：

```
 //read file
 var imageSource = PictureDecoder.DecodeJpeg(imageStream);
 BitmapImage bitmapImage = new BitmapImage();
 bitmapImage.SetSource(imageStream);
 var item = new ImageToName {Image = bitmapImage , Name = fileName };
 vltBitmapImage.Add(item); 
```

并且您需要更改`ListBox`声明

```
 <ListBox.ItemTemplate>
   <DataTemplate>
   <Image Source={Binding Image}/>
   </DataTemplate>
 </ListBox.ItemTemplate> 
```

因此，您将能够从选定的项目中获取文件名。

# ruby-on-rails - 如何判断我的 Rails 应用程序的特定部分是否占用了我的 Heroku dyno？

> ID：12770688
> 
> 赞同：0
> 
> 时间：2012-10-07T16:33:24.683
> 
> 标签：ruby-on-rails, heroku, carrierwave

我刚刚实现`carrierwave_direct`了将我的应用程序中的文件直接上传到 S3，目的是避免占用我的 Heroku dyno，每个[https://devcenter.heroku.com/articles/s3](https://devcenter.heroku.com/articles/s3)。

我如何确认我已经完成了我打算做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:41:29.390

从您的 Heroku 帐户注册免费的 New Relic 插件，它提供了一些出色的分析工具。然后上传一个大文件并检查 New Relic 以确保它不会占用您的测功机。

# php - $_SERVER['document_root'] 返回 /htdocs 而不是 /public_html

> ID：12770692
> 
> 赞同：4
> 
> 时间：2012-10-07T16:33:55.380
> 
> 标签：php, hosting

我正在寻找切换到一个新主机，他们提供了这个漂亮的小“临时 url”来在你切换之前测试你的文件。一切都很好，花花公子。所以我复制了我所有的文件。在每一页的顶部，我都有`require`来自服务器的另一个文件存储在`public_html/includes/head.php`. 现在无论出于何种原因， $_SERVER['document_root'] var 正在返回 /public_html/htdocs/includes/head.php （服务器上不存在）而不是 /public_html/includes/head.php （确实存在） . 产生的错误如下：

```
Warning: require_once(/home/secure31/public_html/htdocs/includes/head.php) 
[function.require-once]: failed to open stream: Permission denied in 
/home/stephe80/public_html/index.php on line 6 
```

有罪代码：

```
require_once($_SERVER['DOCUMENT_ROOT'] . '/includes/head.php'); 
```

我倾向于认为这是与他们的临时 url 设置相关的错误，但我不想通过我的 DNS 传输并发现我的所有文件都已损坏。我可以将它们更改为绝对路径，但我很好奇我是否遗漏了什么。任何见解将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T17:02:50.617

我建议使用[`__FILE__`](http://php.net/manual/en/language.constants.predefined.php)常量并从那里计算出你的 htdocs 文件夹。它比依赖 $_SERVER 超全局更可靠，因为这实际上因服务器而异。

示例（您将在根文件夹中的 index.php 中调用）：

```
$htdocs = str_replace(basename(__FILE__), __FILE__, '');
define('ROOT_FOLDER', $htdocs);
require_once(ROOT_FOLDER . '/includes/head.php'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:07:23.163

为了将来参考（如果有人有类似的问题），事实证明问题出在他们的测试服务器上。我用我的代码原样启动它（我知道有风险），结果一切都很好。

# java - 当我单击 << 按钮时；它给出了 ArrayIndexOutOfBounds 异常

> ID：12770693
> 
> 赞同：0
> 
> 时间：2012-10-07T16:34:04.307
> 
> 标签：java, arrays, jtable, defaulttablemodel

我希望在从 jtable2 中选择内容并单击 >> 时将其粘贴到 jtable3 上，然后单击 << Jtable3 中的选定行被删除，但是当我单击 << 按钮时；它给出了一个索引错误；我希望在 jtabel3 中单击 << btton thar 行消失，但它给出了 aaray out of index 错误

```
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;
import javax.xml.bind.annotation.XmlElement.DEFAULT;

public class chk2 extends javax.swing.JFrame {

    int km1 = 0;
    DefaultTableModel dt;

    /** Creates new form chk2 */
    public chk2() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The
     * content of this method is always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {
        jScrollPane1 = new javax.swing.JScrollPane();
        jTable1 = new javax.swing.JTable();
        jScrollPane2 = new javax.swing.JScrollPane();
        jTable2 = new javax.swing.JTable();
        jButton1 = new javax.swing.JButton();
        jButton2 = new javax.swing.JButton();
        jScrollPane3 = new javax.swing.JScrollPane();
        jTable3 = new javax.swing.JTable();
        jTable1.setModel(new javax.swing.table.DefaultTableModel(new Object[][]{
                    {null, null, null, null}, {null, null, null, null},
                    {null, null, null, null}, {null, null, null, null}},
                new String[]{"Title 1", "Title 2", "Title 3", "Title 4"}));
        jScrollPane1.setViewportView(jTable1);
        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        jTable2.setModel(new javax.swing.table.DefaultTableModel(new Object[][]{
                    {"dfs"}, {"dsfds"}, {"sdfs"}, {"sfds"}, {"sfds"}, {"sfds"},
                    {"sf"}, {"sf"}, {"fssf"}, {null}, {null}, {null}, {null},
                    {null}, {null}, {null}, {null}, {null}, {null}, {null},
                    {null}, {null}, {null}, {null}, {null}, {null}, {null},
                    {null}, {null}, {null}, {null}, {null}, {null}, {null},
                    {null}, {null}, {null}, {null}, {null}, {null}, {null},
                    {null}, {null}, {null}, {null}, {null}, {null}, {null},
                    {null}, {null}, {null}, {null}, {null}, {null}, {null},
                    {null}, {null}, {null}, {null}, {null}, {null}, {null},
                    {null}, {null}, {null}, {null}, {null}, {null}, {null},
                    {null}, {null}, {null}, {null}, {null}, {null}, {null},
                    {null}, {null}, {null}, {null}, {null}, {null}, {null},
                    {null}, {null}, {null}, {null}, {null}, {null}, {null},
                    {null}, {null}, {null}, {null}, {null}, {null}, {null},
                    {null}, {null}, {null}, {null}, {null}, {null}, {null},
                    {null}, {null}, {null}, {null}, {null}, {null}, {null},
                    {null}, {null}, {null}, {null}, {null}, {null}, {null},
                    {null}, {null}, {null}, {null}, {null}, {null}, {null},
                    {null}, {null}, {null}, {null}, {null}, {null}, {null},
                    {null}, {null}}, new String[]{"Title 1"}));
        jScrollPane2.setViewportView(jTable2);

        jButton1.setText(">>");
        jButton1.addActionListener(new java.awt.event.ActionListener() {

            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });
        jButton2.setText("<<");
        jButton2.addActionListener(new java.awt.event.ActionListener() {

            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton2ActionPerformed(evt);
            }
        });
        dt = (new javax.swing.table.DefaultTableModel(new Object[][]{
                    {null, null, null, null, null}}, new String[]{
                    "Exercise_Name", "Exercise_Type", "Sets", "Repitition", "Time"}) {

            Class[] types = new Class[]{java.lang.String.class,
                java.lang.String.class, java.lang.Integer.class,
                java.lang.Integer.class, java.lang.String.class};

            public Class getColumnClass(int columnIndex) {
                return types[columnIndex];
            }

            public boolean isCellEditable(int r, int c) {
                if (c == 0 || c == 1) {
                    return false;
                } else {
                    return true;
                }
            }
        });
        jTable3.setModel(dt);
        jScrollPane3.setViewportView(jTable3);
        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(layout.createParallelGroup(
                javax.swing.GroupLayout.Alignment.LEADING).addGroup(
                layout.createSequentialGroup().addContainerGap().addComponent(jScrollPane2,
                javax.swing.GroupLayout.PREFERRED_SIZE, 109,
                javax.swing.GroupLayout.PREFERRED_SIZE).addPreferredGap(
                javax.swing.LayoutStyle.ComponentPlacement.RELATED).addGroup(
                layout.createParallelGroup(
                javax.swing.GroupLayout.Alignment.LEADING).addComponent(jButton1).addComponent(jButton2)).addPreferredGap(
                javax.swing.LayoutStyle.ComponentPlacement.RELATED).addComponent(jScrollPane3,
                javax.swing.GroupLayout.PREFERRED_SIZE, 375,
                javax.swing.GroupLayout.PREFERRED_SIZE).addContainerGap()));
        layout.setVerticalGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addGroup(
                layout.createSequentialGroup().addGroup(
                layout.createParallelGroup(
                javax.swing.GroupLayout.Alignment.LEADING).addGroup(
                layout.createSequentialGroup().addContainerGap().addComponent(
                jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 275,
                javax.swing.GroupLayout.PREFERRED_SIZE)).addGroup(
                layout.createSequentialGroup().addGap(65, 65, 65).addComponent(jButton1).addPreferredGap(
                javax.swing.LayoutStyle.ComponentPlacement.UNRELATED).addComponent(jButton2)).addGroup(
                layout.createSequentialGroup().addGap(34, 34, 34).addComponent(
                jScrollPane3, javax.swing.GroupLayout.PREFERRED_SIZE, 275,
                javax.swing.GroupLayout.PREFERRED_SIZE))).addContainerGap(258, Short.MAX_VALUE)));
        pack();
    }// </editor-fold>

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
        if (jTable2.getSelectedRowCount() == 0) {
            JOptionPane.showMessageDialog(null, "Select The Exercise");
        } else {
            int[] b = jTable2.getSelectedRows();
            for (int i = 0; i < b.length; i++) {
                dt.addRow(new Object[]{"", "", "", "", ""});
                jTable3.setValueAt(jTable2.getValueAt(b[i], 0).toString(), km1, 0);
                km1++;
            }
        }// TODO add your handling code here:
    }

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
        if (jTable2.getSelectedRowCount() == 0) {
            JOptionPane.showMessageDialog(null, "Select The row to be deleted");
        } else {
            int[] b = jTable2.getSelectedRows();
            for (int i = 0; i < b.length; i++) {
                dt.removeRow(b[i] - i);
            }
            km1--;
        } // TODO add your handling code here:
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new chk2().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JTable jTable1;
    private javax.swing.JTable jTable2;
    private javax.swing.JTable jTable3;
    // End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:42:19.147

我的猜测是：

```
for (int i = 0; i < b.length; i++)
    dt.removeRow(b[i] - i);
    km1--; 
```

应该：

```
Arrays.sort(b);
for (int b.length - 1; i >= 0; --i) {
    dt.removeRow(b[i]);
    km1--;
} 
```

也就是说，缺少排序。诀窍 b[i] - i 是“太聪明了”。

# iphone - 无法从服务器发送推送通知

> ID：12770698
> 
> 赞同：0
> 
> 时间：2012-10-07T16:34:15.213
> 
> 标签：iphone, asp.net, push-notification, moonapns

我正在开发一个使用来自 asp.net 后端的推送通知的 iPhone 应用程序。我已经使用月球 apns 发送通知。当我在本地主机上执行代码时，我能够发送通知，但是当我尝试在服务器上运行相同的代码时，它不会发送通知。

我正在使用以下代码发送通知：

```
string message = string.Format("{0} has sent you a text chirp", username);
    var payload1 = new NotificationPayload(token, message, int.Parse(badgeNumber), "default");
    payload1.AddCustom("MessageType", "MessageTypeText");
    payload1.AddCustom("Sender", toFbID);
    payload1.AddCustom("AlertMessage", message);
    payload1.AddCustom("MessageID", msgid);

    var p = new List<NotificationPayload> { payload1 };

    var push = new PushNotification(true, "aps_development.p12", "chrip");

    var rejected = push.SendToApple(p);
    foreach (var item in rejected)
    {
        contxt.Response.Write(item);
    } 
```

## 编辑

刚刚更新了 .p12 密钥的路径，密钥也在 .net 文件所在的文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:21:05.213

尝试查看 PushSharp。[https://github.com/Redth/PushSharp](https://github.com/Redth/PushSharp)

有一篇关于如何正确设置发送推送通知的 wiki 文章，当然库本身也使这一切变得更容易:)

# c++ - 使用结构的简单“标识符'xxx'未定义”

> ID：12770701
> 
> 赞同：1
> 
> 时间：2012-10-07T16:34:33.717
> 
> 标签：c++, struct, identifier

我几乎没有开始一个新项目，由于这个错误，我无法简单地打印一批结构数据。代码如下：

头文件：

```
#ifndef EuropeanOption_HPP
#define EuropeanOption_HPP

#include <iostream>
#include <string>

using namespace std;    

struct EquityParms
{
    double T; // years until expiry
    double K; // strike price
    double sig; // vol
    double r; // risk free rate
    double S; // current equity price
};

class EuropeanOption
{
private:
    void init(const struct EquityParms data); // initialize EquityParms 

public:

};

#ifndef EUROPEANOPTION_CPP
#include "EuropeanOption.cpp"
#endif

#endif 
```

源文件：

```
#ifndef EUROPEANOPTION_CPP
#define EUROPEANOPTION_CPP

#include "EuropeanOption_H.hpp"

void EuropeanOption::init(const struct EquityParms data)
{
    cout << "Years until expiry: \t" << data.T << endl;
    cout << "Strike price: \t" << data.K << endl;
    cout << "Volatility: \t" << data.sig << endl;
    cout << "Risk-free rate: \t" << data.r << endl;
    cout << "Current equity price: \t" << data.S << endl;
}

#endif 
```

测试文件：

```
#include "EuropeanOption_H.hpp"

int main()
{

    struct EquityParms batch1 = {0.25, 65, 0.30, 0.08, 60};
    struct EquityParms batch2 = {1, 100, 0.2, 0.0, 100};
    struct EquityParms batch3 = {1, 10, 0.5, 0.12, 5};
    struct EquityParms batch4 = {30, 100, 0.30, 0.08, 100};

    init(batch1); // error on this line, "identifier init is undefined"

    return 0;
} 
```

如果我尝试构建，编译器错误是：“test.cpp(22): error C3861: 'init': identifier not found”

这实际上是我代码的 100%。我的#include 在那里。我尝试简单地将其命名为更独特的名称，但无济于事。我不明白...你能看看我的错误是什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T16:38:45.733

首先，`init`是一个类的方法`EuropeanOption`，所以你可以从这样的对象中调用它。第二个事实是这个方法是`private`不可能在类外调用的。第三，您必须使用构造函数来创建对象。阅读一些 c++ 书籍以了解它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T16:44:25.247

`init()`是一个类的成员（而且它是`private`无论如何都无法访问的）。 `main()`不是该类的成员。全局范围内也没有任何`init()`功能。这就是编译器抱怨`init()`未定义的原因——确实如此。的范围内没有定义的`init()`函数`main()`。

# .net - 更新 xml 列的命名空间

> ID：12770702
> 
> 赞同：0
> 
> 时间：2012-10-07T16:34:33.757
> 
> 标签：.net, sql-server, xml

重构后我发现它需要更改现有数据的命名空间。每个数据库行包含具有以下数据的列：

```
<Bla xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.contoso.com/ooo/entities/v1">
   <Titles>
      <smth sourceId="19" targetId="2">
         <smth2>New</smth2>
      </smth>
   </Titles>
</Bla> 
```

如何将值更新`xmlns="http://schemas.contoso.com/ooo/entities/v1"`为`xmlns="http://schemas.contoso.com/ooo/common/v1"`

实际的例外是`InvalidOperationException`（不期望命名空间）。mb 可以更改数据读取器的反序列化，但是...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T18:45:28.480

```
update MyTable
set MyColumn = 
Convert(xml,
    REPLACE(
        Convert(nvarchar(max), MyColumn),
        'http://schemas.contoso.com/ooo/entities/v1',
        'http://schemas.contoso.com/ooo/common/v1')
    ) 
```

# zend-framework - Zend_Form : 在 value=0 的复选框上填充问题

> ID：12770703
> 
> 赞同：0
> 
> 时间：2012-10-07T16:34:44.247
> 
> 标签：zend-framework, checkbox, zend-form, populate, zend-filter

我不明白为什么这个带有 value=0 的复选框被选中，`populate()`而没有关于这个复选框的数据被传递......

我的表单元素：

```
$this->addElement('multiCheckbox', 'etoiles', array(
    'filters'    => array('Int'),
    'separator' => '',
    'label_placement' => 'prepend',
    'label_class' => 'caseacocher',
    'decorators'  => $decorator_chain,
));

$listeEtoiles = array(
    '0' =>'Sans étoiles',
    '1' => '1 étoile"',
    '2' => '2 étoiles',
    '3' => '3 étoiles',
    '4' => '4 étoiles',
    '5' => '5 étoiles',
) ;
$this->getElement('etoiles')->addMultiOptions($listeEtoiles) ; 
```

我如何将表单填充到我的控制器中：

```
$this->view->searchForm->populate($this->getRequest()->getPost()) ; 
```

倾倒时我得到的`$this->getRequest()->getPost('etoiles')`：`NULL`

我的复选框得到了什么：

```
<input id="etoiles-0" type="checkbox" checked="checked" value="0" name="etoiles[]"> 
```

我不明白。怎么可能选中这个复选框，而没有关于`etoiles[]`??的数据？我刚刚发现我的“Int”过滤器与它有关。我应该删除它吗？如果我想保留这个 Int 过滤器怎么办？

没有验证器。我应该添加一些吗？InArray 验证器呢？我的 values 数组使用字符串索引，因为我认为 $_POST 数据是作为字符串传递的。这是一个错误吗？

任何评论或帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:51:38.813

这可能是 string`'0'`和 int之间的混淆`0`（未检查单选表单元素）和`null`PHP 的一个怪癖。

特别是当您将输入值过滤为 int 时，而您的 values 数组使用字符串索引（您是否有理由不使用默认`InArray`验证器？）

此外，我看到`FormRadio`助手使用`in_array($opt_value, $value)`没有严格参数来确定选中的属性。

# mysql - MySQL没有插入反斜杠

> ID：12770704
> 
> 赞同：22
> 
> 时间：2012-10-07T16:34:47.290
> 
> 标签：mysql, sql

在 MySQL 中，当我尝试在表中插入反斜杠时，它不接受它并给我没有反斜杠的内容。

`id`设置为自动递增：

**代码：**

```
INSERT INTO gender (sex, date) VALUES (
'male are allowed \ female are not allowed', "2012-10-06") 
```

如何插入文字反斜杠？

**关于转义序列的注意事项：**

```
Escape  Sequence    Character Represented by Sequence

\0     An ASCII NUL (0x00) character.
\'     A single quote (“'”) character.
\"     A double quote (“"”) character.
\b     A backspace character.
\n     A newline (linefeed) character.
\r     A carriage return character.
\t     A tab character.
\Z     ASCII 26 (Control+Z). See note following the table.
\\     A backslash (“\”) character.
\%     A “%” character. See note following the table.
\_     A “_” character. See note following the table. 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-07T16:35:26.103

您需要转义反斜杠：

```
INSERT INTO gender
(sex, date) VALUES (
'male are allowed \\ female are not allowed',
"2012-10-06") 
```

[参考（包含您必须为 mysql 转义的所有字符的列表）](http://dev.mysql.com/doc/refman/5.0/en/string-literals.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-17T04:58:10.823

## 处理mysql load data infile工具中的反斜杠和所有控制字符：

**第 1 步，创建您的表：**

```
mysql> create table penguin (id int primary key, chucknorris VARCHAR(4000));
Query OK, 0 rows affected (0.01 sec) 
```

**第 2 步，创建要导入的文件并将这些数据放入其中。**

```
1   spacealiens are on route
2   scramble the nimitz\
3   \its species 8472
4   \\\\\\\\\\\\\\\\\\
5   Bonus characters:!@#$%^&*()_+=-[]\|}{;'":/.?>,< anything but tab 
```

**第 3 步，插入表格：**

```
mysql> load data local infile '/home/el/foo/textfile.txt' into table penguin 
       fields terminated by '\t' lines terminated by '\n' 
       (@col1, @col2) set id=@col1, chucknorris=@col2;
Query OK, 4 rows affected, 1 warning (0.00 sec)
Records: 4  Deleted: 0  Skipped: 0  Warnings: 1 
```

**第 4 步，当然，它会导致这个奇怪的输出：**

```
mysql> select * from penguin;
+----+-----------------------------------------------------------------+
| id | chucknorris                                                     |
+----+-----------------------------------------------------------------+
|  1 | spacealiens are on route                                        |
|  2 | scramble the nimitz                                             |
|  3 |                                                                 |
|  4 | \\\\\\\\\                                                       |
|  5 | Bonus characters:!@#$%^&*()_+=-[]|}{;'":/.?>,< anything but tab |
+----+-----------------------------------------------------------------+ 
```

**第五步，分析警告：**

```
mysql> show warnings;
+---------+------+--------------------------------------------------------+
| Level   | Code | Message                                                |
+---------+------+------------------------------------- ------------------+
| Warning | 1262 | Row 2 was truncated; it contained more data than there |
|         |      | were input columns                                     |
+---------+------+--------------------------------------------------------+
1 row in set (0.00 sec) 
```

**第 6 步，想一想到底出了什么问题：**

左侧的反斜杠`nimitz`导致 mysql 加载数据解析器将第 2 行的结尾与第 3 行的开头连接起来。然后它撞到一个制表符并将 'scramble the nimitz\n3 放入第 2 行。

第 3 行的其余部分被跳过，因为多余的单词`its species 8472`不适合任何地方，它会产生您在上面看到的警告。

第 4 行有 18 个反斜杠，所以没有问题，并且显示为 9 个反斜杠，因为每个反斜杠都被转义了。如果有一个奇数，第 2 行的错误就会发生在第 4 行。

第 5 行的奖励字符正常通过。除了制表符之外，一切都是允许的。

**第7步，重置表企鹅：**

```
mysql> delete from penguin; 
```

**`fields escaped by`第 8 步，使用以下子句加载到您的表中：**

```
mysql> load data local infile '/home/el/foo/textfile.txt' into table penguin 
       fields terminated by '\t' escaped by '\b' 
       lines terminated by '\n' (@col1, @col2) set id=@col1, 
       chucknorris=@col2;

Query OK, 5 rows affected (0.00 sec)
Records: 5  Deleted: 0  Skipped: 0  Warnings: 0 
```

**第 9 步，从您的表格中选择，解释结果：**

```
mysql> select * from penguin;
+----+------------------------------------------------------------------+
| id | chucknorris                                                      |
+----+------------------------------------------------------------------+
|  1 | spacealiens are on route                                         |
|  2 | scramble the nimitz\                                             |
|  3 | \its species 8472                                                |
|  4 | \\\\\\\\\\\\\\\\\\                                               |
|  5 | Bonus characters:!@#$%^&*()_+=-[]\|}{;'":/.?>,< anything but tab |
+----+------------------------------------------------------------------+
5 rows in set (0.00 sec) 
```

现在一切都如我们所料。第 2 行末尾的反斜杠不会转义换行符。第 3 行之前的反斜杠`i`没有任何作用。第 4 行的 18 个反斜杠没有被转义。并且奖金字符通过确定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-07T10:14:03.950

您可以使用此代码：

```
$yourVariable = addcslashes($_POST["your param"],"\\"); 
```

例如，在我的网络表单中，我想插入本地目录：

```
$localAddress = addcslashes($_POST["localAddress"],"\\"); 
```

# grails - 删除实体时从 M:N 关系中删除关联

> ID：12770709
> 
> 赞同：0
> 
> 时间：2012-10-07T16:35:01.923
> 
> 标签：grails, many-to-many, grails-orm

在我的域中，我有一个多对多的关系。问题是 GORM 强迫我定义所有者实体，但我不认为任何一方都“拥有”关系。

```
class User {    
    String username
    String password

    static hasMany = [organizations: Organization]
    static belongsTo = Organization

    static constraints = {
    }
}

class Organization {
    String name;

    static hasMany = [members: User]
} 
```

在这种情况下，我显然不允许删除某个组织中的用户（因为组织“拥有”关系）。我希望能够删除这两个实体，并且在删除时只需删除关系（来自 user_organization 表的行）。是否有可能或者我必须自己编写这个逻辑（如果是这样，实现这个的最佳方法是什么）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:23:16.380

无论谁是“所有者”，您都可以删除关系的双方。只需应用适当的`belongsTo`级联，因此您不必这样做。

在您的示例中，如果要删除用户，则首先必须删除该关系。因此，为了删除用户，您需要执行以下操作：

```
organization.removeFromMembers(user)
user.delete() 
```

如果你删除一个组织，因为它是“所有者”，你就不需要使用`removeFrom*`.

# ruby-on-rails - 从咖啡中调用 ruby 代码：slim 标签

> ID：12770710
> 
> 赞同：0
> 
> 时间：2012-10-07T16:35:22.767
> 
> 标签：ruby-on-rails, ruby, coffeescript, slim-lang

> **可能重复：**
> [如何在 Slim 模板中访问 CoffeeScript 引擎中的实例变量](https://stackoverflow.com/questions/8108511/how-to-access-instance-variables-in-coffeescript-engine-inside-a-slim-template)

如何在我的咖啡标签中使用 Ruby 代码？

`#{}`调用 Ruby 代码是一种纤细的结构，但它在咖啡标签中不起作用，因为在 CoffeeScript 中使用 `#' 开始注释。

```
coffee:
     window.awesomeIcons.currentUser = #{raw current_user.to_json} #Doesn't work 
```

该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T18:33:43.687

简而言之 - 这是不可能的（至少不是直接的）。在 Slim 的问题跟踪器上查看[这个问题。](https://github.com/stonean/slim/issues/179)这是@minad（Slim 的开发者之一）的相关内容：

> 这是不可能实现的，因为咖啡脚本是在编译时转换的。你只能嵌入普通的javascript。为了避免混淆，我们没有在咖啡过滤器中实现插值。

我建议使用[gon gem](https://github.com/gazay/gon)从 Rails 控制器中公开一个 JavaScript 变量，而不是稍后在 Coffee 过滤器中直接访问。

# facebook - 如何创建一个未过期的 Facebook 页面令牌，如删除 offline_access 权限文档中所述

> ID：12770720
> 
> 赞同：1
> 
> 时间：2012-10-07T16:36:15.683
> 
> 标签：facebook, facebook-graph-api, access-token

我正在尝试创建一个不会过期的页面令牌，我可以在我的网站上使用它来在我的 Facebook 页面上发布帖子。根据本文档中的场景 5，我应该能够做到这一点：

[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

我的问题是，当我生成页面令牌时，它们会在 1 小时内过期。

我正在做的是在我登录时使用此代码显示我的用户访问令牌。我认为这与graph api explorer提供的令牌相同，但我不确定。

```
require '../src/facebook.php';

$facebook = new Facebook(array(
  'appId'  => 'app_id',
  'secret' => 'app_secret',
));   

$user = $facebook->getUser();

if ($user) {
  try {
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }   
}     

if ($user) {
  $logoutUrl = $facebook->getLogoutUrl( array(

                'scope'         => 'read_stream,publish_stream,publish_actions,manage_pages,email,user_checkins',
                ));
} else {
  $loginUrl = $facebook->getLoginUrl();
}
echo $loginUrl;

$me = $facebook->api('/me');

?>
<!doctype html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
  <head>
    <title>php-sdk</title>
  </head>
  <body>
    <h1>php-sdk</h1>

    <?php if ($user): ?>
      <a href="<?php echo $logoutUrl; ?>">Logout</a>
    <?php else: ?>
      <div>
        Login using OAuth 2.0 handled by the PHP SDK:
        <a href="<?php echo $loginUrl; ?>">Login with Facebook</a>
      </div>
    <?php endif ?>

    <h3>PHP Session</h3>
    <pre><?php print_r($_SESSION); ?></pre>

    <?php if ($user): ?>
      <h3>You</h3>
      <img src="https://graph.facebook.com/<?php echo $user; ?>/picture">

      <h3>Your User Object (/me)</h3>
      <pre><?php print_r($user_profile); ?></pre>
    <?php else: ?>
      <strong><em>You are not Connected.</em></strong>
    <?php endif ?>

  </body>
</html> 
```

然后我在此图形 api 命令中使用该令牌：

```
https://graph.facebook.com/me/accounts?access_token=<access_token> 
```

这给了我所有页面和应用程序以及它们各自的页面/应用程序令牌的列表。

然后，我获取我想要使用的页面令牌并使用 Facebook 访问令牌调试器进行检查，它显示它的有效期为 1 小时。因此，我使用以下命令尝试将其换成 60 天令牌，如我发布的第一个 URL 中所述：

```
https://graph.facebook.com/oauth/access_token?client_id=client_id&client_secret=client_secret&grant_type=fb_exchange_token&fb_exchange_token=access_token 
```

该命令只是给我错误：“消息”：“发生未知错误。”，“类型”：“OAuthException”，“代码”：1。

然后我想可能是因为我的用户访问令牌寿命不长，它不会生成寿命长的页面令牌。所以我使用我的用户令牌和相同的命令来扩展它，它只是返回相同的令牌，但到期时间没有延长。

谁能提供一些关于我做错了什么以及如何创建这个不会过期的页面令牌的见解？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T16:53:07.353

再次仔细阅读说明 - 根据您的描述，您是：

*   获取短用户令牌
*   从 /me/accounts 获取短页面令牌
*   试图扩展短页令牌

你应该做的是：

*   获取简短的用户令牌（如果是客户端身份验证）
*   将其交换为长用户令牌（或者，如果您使用服务器端 oauth 流程，您将已经拥有长用户令牌）
*   使用长用户令牌检索（长）页面访问令牌

# android - Android相机预览失真/尺寸问题

> ID：12770724
> 
> 赞同：6
> 
> 时间：2012-10-07T16:36:46.547
> 
> 标签：android, android-layout, android-camera

我有一个应用程序，其中照片的预览尺寸小于手机屏幕。我已经阅读了很多关于如何解决此问题的帖子/想法，但我的预览仍然失真。

理想情况下，我可以保持预览区域设置它的状态并“拉伸并重新居中”预览，这样照片的边缘就不会显示在屏幕上。

据我所知，我得到了照片的高度和宽度以及照片的高度和宽度的所有正确值，但我不确定在哪里或如何调整拉伸因子。现在，640x480（或任何尺寸）的照片被塞进了较小的预览区域。

这是我正在使用的代码：

```
class Preview extends SurfaceView implements SurfaceHolder.Callback {

    SurfaceHolder mHolder;
    public Camera camera;
    boolean writingFile = false;
    Size theBiggest=null;
    Size screenSize=null;
    Float cameraRatio=null;

    Preview(Context context) {
        super(context);

        // Install a SurfaceHolder.Callback so we get notified when the
        // underlying surface is created and destroyed.
        mHolder = getHolder();
        mHolder.addCallback(this);
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    //
    // surfaceCreate is called the first time the Camera Tab is loaded
    //
    public void surfaceCreated(SurfaceHolder holder) {
        // The Surface has been created, acquire the camera and tell it where to draw.
        camera = Camera.open();
        camera.setDisplayOrientation(90);

        // Get For Photo Size
        Parameters camparams = camera.getParameters();

        // Find the Largest Possible Photo Size
        List<Size> sizes = camparams.getSupportedPictureSizes();
        int maxWidth = 0;
        int maxHeight = 0;
        for (Size s : sizes) {

            if (s.width > maxWidth || s.height > maxHeight) {
                    maxWidth = s.width;
                    maxHeight = s.height;
                    theBiggest = s;
            }
        }

        // Set Photo Size
        camparams.setPictureSize(theBiggest.width, theBiggest.height);
        camera.setParameters(camparams);

    } // end surfaceCreate()

    public void surfaceDestroyed(SurfaceHolder holder) {
        // Surface will be destroyed when we return, so stop the preview.
        // Because the CameraDevice object is not a shared resource, it's very
        // important to release it when the activity is paused.
        camera.setPreviewCallback(null);
        camera.stopPreview();
        camera.release();
        camera = null;
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {

        // Now that the size is known, set up the camera parameters and begin
        // the preview.
        camera.setDisplayOrientation(90);
        Camera.Parameters parameters = camera.getParameters();
        Camera.Size size = getBestPreviewSize(w, h);    
        parameters.setPreviewSize(size.width, size.height); // preview size
        camera.setParameters(parameters);
        camera.startPreview();  
    }

    private Camera.Size getBestPreviewSize(int width, int height)
    {

                // Get For Photo Size
        Camera.Parameters camparams = camera.getParameters();

        // Find the Largest Possible Preview Sizes
        List<Size> sizes = camparams.getSupportedPreviewSizes();
        Camera.Size result=null;
        for (Size s : sizes) {

            if (s.width <= width && s.height <= height) {
                       if (result == null) {
                        result = s;
                       } else {
                        int resultArea=result.width*result.height; 
                        int newArea=s.width*s.height;

                        if (newArea>resultArea) {
                                            result=s;
                        }
                           } // end else (result=null)
                } // end if (width<width&&height<height)
        } // end for

            return result;

    } // end function

} 
```

这是我的布局 xml 文件

```
 <FrameLayout android:layout_weight="1" 
                    android:id="@+id/preview" 
                    android:fitsSystemWindows="true" 
                    android:layout_height="0dp" 
                    android:layout_width="wrap_content">
    </FrameLayout>

    <Button android:text="Take Photo"               
                android:id="@+id/buttonClick" 
            android:layout_height="wrap_content"
            android:layout_width="200dp" 
            android:layout_gravity="center"
            android:textSize="12sp">
    </Button> 
```

# facebook - 如何使用 Facebook api 搜索用户

> ID：12770732
> 
> 赞同：-1
> 
> 时间：2012-10-07T16:37:49.873
> 
> 标签：facebook, facebook-graph-api, facebook-fql

正如标题所说，我想使用 Facebook Api（Graph Api 或 FQL，没关系，甚至 REST）搜索用户。例如：我想搜索“Britney Spears”并且我想获取所有具有该名称的用户（例如 %search%）。结果应该像[http://www.facebook.com/search/results.php?q=britney%20spears&init=quick&tas=0.8058435615324403&type=users](http://www.facebook.com/search/results.php?q=britney%20spears&init=quick&tas=0.8058435615324403&type=users)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:34:32.167

您可以将 Graph API 中的搜索 API 用于特定用户，如下所示：

人：[https ://graph.facebook.com/search?q=USER_NAME&type=user](https://graph.facebook.com/search?q=USER_NAME&type=user)

如果要搜索用户列表，可以这样做：

```
SELECT uid, username, name, pic_square FROM user WHERE contains("Joe Biden") 
```

请参阅[官方用户表文档](https://developers.facebook.com/docs/reference/fql/user/)以查看您可以查询的所有字段

但是 CONTAINS() 函数被认为是神秘的，Facebook 上还没有人澄清它。它可能在某些情况下有效，而在其他情况下可能无效。

请参阅线程：[FQL 中 CONTAINS() 的文档？](https://stackoverflow.com/questions/12630401/documentation-for-contains-in-fql)

我想最终的答案是你不能像网站那样复制 facebook 搜索功能（搜索给定名称的所有用户）。您只能搜索与正在使用您的应用的当前登录用户相关的用户，因为这些是 facebook 希望开发人员构建的社交应用类型。他们希望您构建的应用程序通过利用他们的朋友和亲戚的社交图为他们的用户提供价值。我想开发人员不需要进行站点明智的搜索，因此（还）没有 API 可以做到这一点。

# cakephp - CakePHP 有很多

> ID：12770734
> 
> 赞同：0
> 
> 时间：2012-10-07T16:38:22.043
> 
> 标签：cakephp

我有一个 User 模型和一个 Notes 模型。

用户模型：

```
class User extends AppModel {
var $name = 'User';
var $hasMany = array(
'Note' 
    );
 } 
```

用户控制器：

```
public function notesview()
  {
  $allnotes = $this->User->Note->find('all', array('order'=>'Note.created DESC'));
  } 
```

查看元素：

```
$allnotes = $this->requestAction(array('controller'=>'Users', 'action'=>'notesview'));
foreach($allnotes as $viewnotes):
{
    echo $viewnotes['Note']['notes']; 
    echo "<br>";
    echo $viewnotes['Note']['created'];
    echo "<br>";
    echo $viewnotes['User']['name'];

}
endforeach; 
```

现在在元素中您可以看到“ echo $viewnotes['User']['name']; ”。我希望在此元素中检索 User 模型中的 Name 字段，但出现以下错误：

```
Notice (8): Undefined index: User [APP\View\Elements\notes.ctp, line 39] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:46:48.873

您的 Note 模型中是否设置了 belongsTo 关系？

因此，例如，您将拥有：

```
<?php
class Note extends AppModel {
    public $belongsTo = array('User');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T16:48:00.887

注意是否属于用户？

```
class Note extends AppModel {
    public $name = 'Note';
    public $belongsTo = array('User');
} 
```

# c++ - std::initializer_list 替代方案

> ID：12770743
> 
> 赞同：0
> 
> 时间：2012-10-07T16:39:08.733
> 
> 标签：c++, templates, c++11, variadic-templates

我正在尝试初始化我的自定义矢量对象，但没有使用`std::initializer_list`. 我正在做这样的事情：

```
template <typename T, std::size_t N>
struct vector
{
  template<std::size_t I = 0, typename ...Tp>
  typename std::enable_if<I == sizeof...(Tp), void>::type
  unpack_tuple(std::tuple<Tp...> const& t)
  {
  }

  template<std::size_t I = 0, typename ...Tp>
  typename std::enable_if<I != sizeof...(Tp), void>::type
  unpack_tuple(std::tuple<Tp...> const& t)
  {
    store[I] = std::get<I>(t);

    unpack_tuple<I + 1, Tp...>(t);
  }

  template<typename ...U>
  vector(U&&... args,
    typename std::enable_if<std::is_scalar<U...>::value, void>::type* = 0)
  {
    unpack_tuple(std::forward_as_tuple(std::forward<U>(args)...));
  }

  T store[N];
}; 
```

但是编译器不会理解构造函数，除非我删除了`std::enable_if`我需要的参数（因为我不想要非标量参数）。是否存在解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T18:04:39.357

> `std::is_scalar<U...>::value`

问题在于`is_scalar`只接受一个类型参数的事实。您需要编写一个组合多个布尔值的包装器。我还想知道如果您只想要标量类型，为什么要使用完美转发 - 只需按值传递它们。这样，您也不必担心`U`在传递左值时被推断为引用。

```
#include <type_traits>

template<bool B>
using bool_ = std::integral_constant<bool, B>;

template<class Head, class... Tail>
struct all_of
  : bool_<Head::value && all_of<Tail...>::value>{};

template<class Head>
struct all_of<Head> : bool_<Head::value>{};

template<class C, class T = void>
using EnableIf = typename std::enable_if<C::value, T>::type;

// constructor
template<typename... U>
vector(U... args, EnableIf<all_of<std::is_scalar<U>...>>::type* = 0)
{
  unpack_tuple(std::tie(args...)); // tie makes a tuple of references
} 
```

上面的代码应该可以工作。但是，作为建议，如果您*不*想要某样东西，`static_assert`那就不要得到它，也不要为此滥用 SFINAE。:) SFINAE 应该只在重载的上下文中使用。

```
// constructor
template<typename... U>
vector(U... args)
{
  static_assert(all_of<std::is_scalar<U>...>::value, "vector only accepts scalar types");
  unpack_tuple(std::tie(args...)); // tie makes a tuple of references
} 
```

* * *

对于您的实际问题，我推荐了一种更好的方法来解包元组（或一般的可变参数，甚至是数组），使用[索引技巧](http://loungecpp.wikidot.com/tips-and-tricks%3aindices)：

```
template<unsigned...> struct indices{};
template<unsigned N, unsigned... Is> struct indices_gen : indices_gen<N-1, N-1, Is...>{};
template<unsigned... Is> struct indices_gen<0, Is...> : indices<Is...>{};

template<unsigned... Is, class... U>
void unpack_args(indices<Is...>, U... args){
  [](...){}((store[Is] = args, 0)...);
}

template<class... U>
vector(U... args){
  static_assert(all_of<std::is_scalar<U>...>::value, "vector only accepts scalar types");
  unpack_args(indices_gen<sizeof...(U)>(), args...);
} 
```

这段代码所做的是“滥用”可变参数拆包机制。首先，我们生成一组索引`[0 .. sizeof...(U)-1]`，然后将这个列表与`args`. 我们将此扩展放在可变参数（非模板）函数参数列表中，因为包扩展只能发生在特定位置，这就是其中之一。另一种可能性是作为本地数组：

```
template<unsigned... Is, class... U>
void unpack_args(indices<Is...>, U... args){
  int a[] = {(store[Is] = args, 0)...};
  (void)a; // suppress unused variable warnings
} 
```

# ios - 图像视图下带有标题的 UIButton

> ID：12770751
> 
> 赞同：5
> 
> 时间：2012-10-07T16:40:30.160
> 
> 标签：ios, image, text, uibutton, uiedgeinsets

我想用 imageView 下的标题以编程方式创建一个 UIButton。

按钮大小：170 * 120 图片大小：50 * 50 标题大小：取决于文字。

我知道我必须使用，但我不知道如何：

```
[_button setTitleEdgeInsets:UIEdgeInsetsMake(0.f, 0.f, 0.f, 0.f)];
[_button setImageEdgeInsets:UIEdgeInsetsMake(0.f, 0.f, 0.f, 0.f)]; 
```

我想我应该计算标题的大小，然后使用 EdgeInsets。

谢谢你。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-07T17:04:22.053

希望这可以帮到你。

```
@interface UIButton (UIButtonExt)  

- (void)centerImageAndTitle:(float)space;  
- (void)centerImageAndTitle;  

@end  

@implementation UIButton (UIButtonExt)  

- (void)centerImageAndTitle:(float)spacing  
{      
    // get the size of the elements here for readability  
    CGSize imageSize = self.imageView.frame.size;  
    CGSize titleSize = self.titleLabel.frame.size;  

    // get the height they will take up as a unit  
    CGFloat totalHeight = (imageSize.height + titleSize.height + spacing);  

    // raise the image and push it right to center it  
    self.imageEdgeInsets = UIEdgeInsetsMake(- (totalHeight - imageSize.height), 0.0, 0.0, - titleSize.width);  

    // lower the text and push it left to center it  
    self.titleEdgeInsets = UIEdgeInsetsMake(0.0, - imageSize.width, - (totalHeight - titleSize.height),0.0);      
}  

- (void)centerImageAndTitle  
{  
    const int DEFAULT_SPACING = 6.0f;  
    [self centerImageAndTitle:DEFAULT_SPACING];  
}  

@end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-04T22:55:58.767

最终稳定的解决方案是使用框架，而不是`EdgeInset`这样的解决方案：

```
@interface UIButton (UIButtonExt)
(void)centerImageAndTitleEx;
@end

@implementation UIButton (UIButtonExt)

(void)centerImageAndTitleEx
{
CGRect frame = self.imageView.frame;

frame = CGRectMake(truncf((self.bounds.size.width - frame.size.width) / 2), 10.0f, frame.size.width, frame.size.height);

self.imageView.frame = frame;

frame = self.titleLabel.frame;

frame = CGRectMake(truncf((self.bounds.size.width - frame.size.width) / 2), self.bounds.size.height - frame.size.height - 5.0, frame.size.width, frame.size.height);

self.titleLabel.frame = frame;
}

@end 
```

# jquery-animate - jQuery Animate Toggle - 动画仅适用于第二次点击

> ID：12770754
> 
> 赞同：0
> 
> 时间：2012-10-07T16:41:00.077
> 
> 标签：jquery-animate, hide, slide, jquery

**任务：**我想创建一个简单的**共享按钮**，单击该按钮会延伸到共享部分*（F、T、G、P）*。

我没有让该部分滑出**共享按钮**——*我真正非常想要*的——但设法让一个单独的`ul`元素从右侧滑出。

动画工作......*直到*我`ul`最初通过设置隐藏`$('.networks').hide();`

这些部分仅在单击后显示，但现在在第一次单击后它只是“弹出打开”而忽略了配置的滑出。至少单击一次后，滑动只能在两个方向*（打开和关闭）上起作用。*

我**[在 Codepen.io](http://codepen.io/pattulus/full/ufbsJ)**和**[jsFiddle](http://jsfiddle.net/pattulus/Ez4rx/)**上传了一个示例。

* * *

**旁注：**演示的行为有点奇怪，因为它们*似乎*只显示了一个幻灯片效果。我们开始使用的滑出式效果器总是看起来像弹出一样 - 事实并非如此，它在第二次点击后工作，所以你必须集中注意力才能看到​​它（在普通浏览器上它*明显*效果更好） .

* * *

**PS：**如果你帮我把这张幻灯片从“分享”按钮中取出，可以加分。请注意，我只有基本的 Javascript 知识（* duck and run *）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:07:27.787

看看这个小提琴[链接](http://codepen.io/anon/pen/GKemc)。

我将按钮的显示属性更改为 inline-block 而不是 inline。内联显示的元素不能有宽度，我认为这就是 jQuery 无法为元素宽度设置动画的原因。我还设置了环绕 ul 而不是 ul 的动画。

编辑：制作了从按钮滑出的东西的快速模型。将一些 css 更改为列表元素本身而不是 a 元素，只需通过 css 工作，我认为它看起来没问题。编辑忘记链接：[link](http://codepen.io/anon/pen/ljfxF)

# c# - 如何减少应用程序中的闪烁？

> ID：12770755
> 
> 赞同：2
> 
> 时间：2012-10-07T16:41:03.857
> 
> 标签：c#, winforms, paint, flicker

我开发了一个使用主窗体和 TabControl 的 WinForms 应用程序。选项卡控件上有几个选项卡，它们使用库中的控件。我最近注意到，在调整应用程序的大小时，整个应用程序会疯狂地闪烁。

**我尝试了什么？**

我尝试将以下代码添加到表单和其中一个控件的 _load 事件中。然后我通过选项卡切换到该控件并尝试调整大小但没有区别，闪烁仍然非常糟糕。

```
DoubleBuffered = true; 
```

**编辑 1**

我在一个选项卡上也有 WPF 控件。我很好奇这是否也会导致闪烁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T21:24:05.530

有几种方法可以解决这个问题：

**对于表单调整大小事件（onResizeBegin & on ResizeEnd），使用以下代码：**

```
protected override void OnResizeBegin(EventArgs e) 
 {
    SuspendLayout();
    base.OnResizeBegin(e);
 }

protected override void OnResizeEnd(EventArgs e) 
 {
    ResumeLayout();
    base.OnResizeEnd(e);
 } 
```

**- 以构造函数的形式使用此代码**：

```
this.SetStyle( ControlStyles.AllPaintingInWmPaint, true );
this.SetStyle( ControlStyles.UserPaint, true );
this.SetStyle( ControlStyles.OptimizedDoubleBuffer, true );
this.SetStyle( ControlStyles.ResizeRedraw, true ); 
```

# java - 当我中断线程时，有什么方法可以在睡眠后执行立即语句

> ID：12770756
> 
> 赞同：1
> 
> 时间：2012-10-07T16:41:20.810
> 
> 标签：java, multithreading

请查看以下带有注释的代码段：

```
try {
  Thread.sleep(20000); // Foo thread sleeps for 20 seconds
  System.out.println("After the sleep statement");
} catch(Exception exc) {
    exc.printStackTrace();
  }

// It has been 12 seconds since the thread went to sleep and....I interrupt

Foo.interrupt(); // exception gets thrown and the code in the catch block gets executed 
```

有什么办法可以在 sleep 语句之后执行下一条语句？我想在某个时间唤醒线程并希望它继续工作。有什么想法/方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T20:25:14.663

[The Java Tutorials](http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html)中有一段措辞很好的段落

> 中断是对线程的指示，它应该停止正在做的事情并做其他事情。由程序员决定线程如何响应中断，但线程终止是很常见的。这是本课强调的用法。

可靠地停止和启动线程是设计并发应用程序的重要部分。即使您*可以*重新利用中断来做任何您想做的事情，但如果您将中断用于最常见的目的——请求线程退出，那么您的代码将更可靠，更容易为其他人维护。如果用户决定在 20 秒超时结束之前关闭应用程序，这可能是您想要做的事情。

那么如何解决最初的问题——允许一个线程向另一个线程指示该开始工作了。下面的类显示了如何使用 CountDownLatch 来解决这个问题。

新福：

```
class Foo extends Thread
{

   CountDownLatch latch = new CountDownLatch(1);

   @Override
   public void run()
   {
      try
      {
         boolean early = latch.await(20, TimeUnit.SECONDS);
         System.out.println("Doing work " + (early ? "right away" : "after delay"));
         // do real work here...
      }
      catch (InterruptedException e)
      {
         System.out.println("Interrupt detected. Exiting thread...");
      }
   }

   public void goAhead()
   {
      latch.countDown();
   }
} 
```

我们去掉了“Sleep”，将其替换为调用latch 对象的await 方法。要使 foo 工作，请调用：

```
foo.goAhead();  // prints out "Doing work right away" 
```

这会导致锁存器倒计时。对“await”的调用将立即退出，不会抛出异常并返回 true。

要关闭 foo，请使用：

```
foo.interrupt();  // prints out "Interrupt detected..." 
```

这将导致 await 像 sleep 一样抛出 InterruptedException。

或者什么都不做。对 await 的调用在 20 秒后超时，不会抛出异常并返回 false。Foo 打印出“延迟后工作”

这种设计的一个长期优势是，当您“工作”时，您可能需要调用其他阻塞方法。中断仍然可以用来中断它们中的任何一个，并帮助您可靠地关闭线程以响应意外事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T16:43:27.350

不确定这是否是您想要的？

```
try {
  Thread.sleep(20000); // Foo thread sleeps for 20 seconds
  System.out.println("After the sleep statement");
} catch(InterruptedException exc) {
    System.out.println("Sleep was interrupted");
} catch(Exception exc) {
    exc.printStackTrace();
} 
```

`sleep()``InterruptedException`中断时抛出。因此，仅当管理睡眠配置为 20 秒时才会在调用时`"Sleep was interrupted"`打印。`interrupt()``"After the sleep statement"``sleep()`

如果您不在乎是`sleep()`正常返回还是抛出并继续工作，请用 empty 包装它`try-catch`：

```
public void interruptibleSleep(long millis) {
    try {
      Thread.sleep(millis);
    } catch(InterruptedException exc) {}
} 
```

然后代替`Thread.sleep(20000)`调用`interruptibleSleep(20000)`：

```
interruptibleSleep(20000);
System.out.println("After the sleep statement"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T16:55:09.597

我想你很困惑。这是发生的事情

```
public void run() { 
  // This executes as soon as the thread is run
  try {
     // We decide to sleep for UPTO 20 seconds
     Thread.sleep(20000); 

     // Code here executes ONLY if we managed to sleep for 20 seconds without 
     // interruption

  } catch(InterruptedException exc) {
     // Code here executes ONLY if we were interrupted
  } catch(Exception exc) {
     // This shouldn't ever execute in theory
  }

  // Code here ALWAYS executes after the sleeping (and ONE of the two blocks) 
  // whether or not it was interrupted.
} 
```

# vb.net - 循环通过控件（vb.net）

> ID：12770759
> 
> 赞同：0
> 
> 时间：2012-10-07T16:41:44.027
> 
> 标签：vb.net, loops, combobox

（VB.NET的理解：中级）

我在 10 个选项卡上有 60 个组合框。

我想将项目添加到组合框中，如下所示，

组合框 1 到 30 应该有项目 "a","b","c"

组合框 31 到 60 应该有项目“d”、“e”、“f”

我尝试使用以下内容，

```
Dim cntrl as New Control
    For Each cntrl InMe.Controls            
       If (TypeOf cntrl Is ComboBox) Then                
       Combobox.Items.Add("a")            
       Combobox.Items.Add("b")
       Combobox.Items.Add("c")                        
       End If        
    Next cntrl 
```

但是如何将项目添加到上面提到的特定组合框？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:23:34.523

有很多方法可以做到这一点。例如：创建 2 个控件列表，并将必须具有项目“a”、“b”、“c”的所有组合框添加到第一个列表，并将所有其他组合框添加到第二个列表。然后枚举then并添加相应的项。

```
Dim abcCombos As List(Of ComboBox)
Dim defCombos As List(Of ComboBox)

Private Sub Form1_Load(ByVal sender As Object, _
    ByVal e As System.EventArgs) Handles MyBase.Load

    abcCombos = New List(Of ComboBox)(New ComboBox() _
                  {ComboBox1, ComboBox2, ComboBox3})
    defCombos = New List(Of ComboBox)(New ComboBox() _
                  {ComboBox31, ComboBox32, ComboBox33})

End Sub

Private Sub PopulateABC()
    For Each cb as ComboBox in abcCombos
       cb.Items.Add("a")            
       cb.Items.Add("b")
       cb.Items.Add("c") 
    Next
End Sub

Private Sub PopulateDEF()
    For Each cb as ComboBox in defCombos
       cb.Items.Add("d")            
       cb.Items.Add("e")
       cb.Items.Add("f") 
    Next
End Sub 
```

# java - 模拟器运行缓慢

> ID：12770769
> 
> 赞同：3
> 
> 时间：2012-10-07T16:43:37.880
> 
> 标签：java, android, eclipse

最近开始学习安卓编程。我安装了 Eclipse 和 Android SDK。一切都很顺利，但是每次我运行一个有错误的项目时，模拟器和Eclipse开始运行非常困难，我经常不得不关闭Eclips和模拟器。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T16:48:23.800

我之前回答过这个问题，但它也可能对你有帮助。我更喜欢使用[Bluestacks Player](http://bluestacks.com/)。它运行Android 2.3.4，非常流畅和快速。有时甚至比普通设备更快。唯一的缩减是，您可以只在 API 级别 10 上测试应用程序，并且只在一个屏幕尺寸上，但它非常适合测试它是否工作。只需`adb`通过运行连接播放器

```
adb connect 127.0.0.1 
```

编译后立即安装。非常令人印象深刻，考虑到我的计算机硬件相当普通（双核，4 GB RAM）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T16:48:35.160

以下是我的建议：

1.  快速谷歌搜索“如何使 Android 模拟器运行得更快”（或类似的东西），因为你绝对不是第一个问这个问题的人。

2.  购买便宜的物理设备进行测试。它会让你的生活轻松很多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T16:48:55.917

您不必关闭模拟器即可迭代您的开发周期。这应该为您加快速度。您还可以启用模拟器快照，以便下次模拟器快速启动。（但是，它确实会减慢关闭模拟器的速度）。

但是，另一件事是，如果您的机器功率不足或没有足够的 RAM，它可能会出现抖动。Eclipse 和 Android 模拟器确实需要相当多的内存。理想情况下，您应该在启动 Eclipse 之前至少有 500MB 的可用内存（1GB 会更好）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T19:16:45.827

根据我的经验，当您总是在模拟器上安装和重新安装应用程序进行测试时，它会被堵塞并开始滞后。解决方案：从虚拟设备管理器中删除您创建的 AVD。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-25T05:19:27.180

我希望这能帮到您。

`Goto to your BIOS settings. Enable your Virtualization technology in your settings..`

它解决了我的问题...

# java - java.lang.OutOfMemoryError：Java 堆空间和 HashMap

> ID：12770780
> 
> 赞同：0
> 
> 时间：2012-10-07T16:45:25.707
> 
> 标签：java, recursion, hashmap, out-of-memory

抱歉再次发布此代码。以前的问题是我遇到了堆栈溢出错误，该错误通过使用 long 而不是 int 得到了修复。但是对于较大的 n 值，我在线程“main”java.lang.OutOfMemoryError: Java heap space 中遇到异常。问题：

```
Given a positive integer n, prints out the sum of the lengths of the Syracuse 
sequence starting in the range of 1 to n inclusive. So, for example, the call:
lengths(3)
will return the the combined length of the sequences:
1
2 1
3 10 5 16 8 4 2 1 
which is the value: 11\. lengths must throw an IllegalArgumentException if 
its input value is less than one. 
```

我的代码：

```
 import java.util.*;

  public class Test {

HashMap<Long,Integer> syraSumHashTable = new HashMap<Long,Integer>();

public Test(){

}

public int lengths(long n)throws IllegalArgumentException{

    int sum =0;

    if(n < 1){
        throw new IllegalArgumentException("Error!! Invalid Input!");
    }   

    else{

        for(int i=1;i<=n;i++){
            sum+=getStoreValue(i);
        }
        return sum;

    }

}

private int getStoreValue(long index){
    int result = 0;

    if(!syraSumHashTable.containsKey(index)){
        syraSumHashTable.put(index, printSyra(index,1));
    }

    result = (Integer)syraSumHashTable.get(index);

     return result;

}

public static int printSyra(long num, int count) {
    if (num == 1) {
        return count;
    }
    if(num%2==0){

        return printSyra(num/2, ++count);
    }

    else{

        return printSyra((num*3)+1, ++count) ;

    }
}

} 
```

由于我必须将前面的数字相加，因此我将在线程“main”java.lang.OutOfMemoryError: Java heap space for a huge value of n 中结束异常。我知道哈希表应该有助于加快计算速度。如果我的递归方法 printSyra 遇到了我在使用 HashMap 之前计算过的元素，我如何确保它可以提前返回该值。

驱动程序代码：

```
public static void main(String[] args) {
    // TODO Auto-generated method stub
    Test t1 = new Test();
    System.out.println(t1.lengths(90090249));

    //System.out.println(t1.lengths(3));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T18:16:47.950

您需要使用迭代方法而不是递归。该递归方法将对线程的堆栈跟踪产生压力。

```
public static int printSyra(long num, int count) {
    if (num == 1) {
        return count;
    }

    while (true) {
            if (num == 1) break; else if (num%2 == 0) {num /= 2; count++;) else {num = (num*3) + 1; count++;} 
    }
    return count;
} 
```

# c# - 将 Visual Studio C# 项目转换为安装文件

> ID：12770784
> 
> 赞同：2
> 
> 时间：2012-10-07T16:46:11.907
> 
> 标签：c#, .net, installation

我有一个使用 Visual Studio 2010 Ultimate 用 C# 编写的程序，我希望能够将该程序部署到安装文件或安装程序文件中。

我需要安装文件，这样我就可以在任何 Windows 机器上运行和安装我的程序，就像任何其他软件一样。

我该如何以这种方式构建/部署项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T16:51:48.093

如果要创建 MSI 安装包，可以使用[Setup Project](http://msdn.microsoft.com/en-us/library/19x10e5c%28v=vs.100%29.aspx)来完成。有关如何为不同场景创建/配置项目的各种演练，请参阅[此概述。](http://msdn.microsoft.com/en-us/library/206sadcd%28v=vs.100%29.aspx)

安装项目适用于简单的安装方案，但不适合更高级的任务。如果您的需求超出了设置项目的能力，您可以查看[WiX](http://wixtoolset.org/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T16:56:12.187

或者，您可能想看看[NSIS](http://nsis.sf.net) - 它对初学者来说更容易，并且有很多很棒的教程和示例。

对于 MSI 安装包的最终控制和生成，您可能想看看[WiX](http://wix.sf.net) - 它具有比 Visual Studio 的安装项目更强大的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T17:00:53.197

另一种方法是使用 Visual Studio 2010 的本机工具：[ClickOnce](http://msdn.microsoft.com/en-us/library/31kztyey.aspx)

# asp.net-mvc - 当我尝试提交表单时，MVC 4 模型为空

> ID：12770785
> 
> 赞同：2
> 
> 时间：2012-10-07T16:46:20.767
> 
> 标签：asp.net-mvc

我在一个视图上有两个表单，在一个控制器中执行两个单独的操作方法。

第一个表单 (frmRefresh) 负责获取数据并将其显示在表单上，​​以便用户可以选择某些复选框。提交后，数据会在 ViewModel 中正常返回，并正确显示在表单上。11 条模板记录和 3 条担保人记录在表格上显示为复选框。

第二个表单（frmProcess）负责获取表单上的数据（从上面的第一个帖子返回）。用户在屏幕上进行选择并根据控制器中的某些逻辑对其进行处理。我在模型中有 List 对象，并且由于对象复杂，我不认为我可以使用 FormCollection 来处理数据。基本上，它们是复选框的集合。我真的需要使用应该在模型中提交的数据，因为控制器中处理了该数据。

提交第二个表单时，我意识到除非我将它们放在隐藏字段中（因为它们在单独的表单中），否则将无法使用 loanid 和 ddl --- 这很好。我很难理解的是，当我提交第二个表单（frmProcess）时，为什么模型视图活页夹不从表单中获取数据，将其放入模型中并将其提交给我的 GeneratePDF 操作方法。？

第一，我真的需要一些帮助来理解为什么会发生这种情况，第二，我真的需要一个解决方案，将我的模型数据从表单带到操作方法并进行处理。正如您在控制器中看到的，在代码的末尾，我枚举了 ViewModel 中的模板来处理数据。

请帮忙，因为我在工作中完全被困在这个问题上，他们依赖于我。我只是不明白为什么模型绑定器不获取表单上的值并将其提交给操作方法进行处理。看来我遗漏了一些东西以允许数据在提交时返回模型。

以下是我的相关代码： ViedwModel

```
public partial class ViewModelTemplate_Guarantors 
    { 
        public int SelectedTemplateId { get; set; } 
        public IEnumerable<PDFTemplate> Templates { get; set; } 

        public int SelectedGuarantorId { get; set; } 
        public IEnumerable<tGuarantor> Guarantors { get; set; } 

        public string LoanId { get; set; } 
        public string SelectedDeptText { get; set; } 
        public string SelectedDeptValue { get; set; } 
        public string LoanType { get; set; } 

        public bool ShowTemps { get; set; } 
        public string Error { get; set; } 
        public string ErrorT { get; set; } 
        public string ErrorG { get; set; } 
        public bool ShowGeneratePDFBtn { get; set; } 
    } 
```

看法

```
@model PDFConverterModel.ViewModels.ViewModelTemplate_Guarantors  
@{ 
    ViewBag.Title = "BHG :: PDF Generator"; 
} 
<h2>@ViewBag.Message</h2> 

<div> 

    <table style="width: 1000px"> 
        <tr> 
            <td colspan="5"> 
                <img alt="BHG Logo" src="~/Images/logo.gif" /> 
            </td> 
        </tr> 

        @using (Html.BeginForm("Refresh", "Home", FormMethod.Post, new { id = "frmRefresh" }))        {             <tr> 
                <td> 
                @*@(Html.Kendo().NumericTextBox<int>() 
                        .Name("txtLoanID") 
                        .Placeholder("Enter numeric value") 
                )*@ 

                @Html.LabelFor(model => model.LoanId) 
                @Html.TextBoxFor(model => model.LoanId) 
                @Html.ValidationMessageFor(model => model.LoanId) 
            </tr> 
            <tr> 
                <td>@Html.LabelFor(model => model.LoanType) 
                    @Html.TextBox("SBA", "SBA") 
                    @Html.ValidationMessageFor(model => model.LoanType) 
                    @*@Html.TextBoxFor(model => model.LoanType)*@ 
                </td> 
                <td> 
                    <label for="ddlDept">Department:</label> 
                    @(Html.Kendo().DropDownListFor(model => model.SelectedDeptText) 
                            .Name("ddlDept") 
                            .DataTextField("DepartmentName") 
                            .DataValueField("DepartmentID") 
                            .Events(e => e.Change("Refresh")) 
                            .DataSource(source => 
                            { 
                                source.Read(read => 
                                { 
                                    read.Action("GetDepartments", "Home"); 
                                }); 
                            }) 
                    ) 
                    @Html.ValidationMessageFor(model => model.SelectedDeptText) 
                </td> 
            </tr> 
            <tr> 
                <td colspan="3"> 
                    <input type="submit" id="btnRefresh" value='Refresh' /> 
                </td> 
            </tr> 
        }  
        @using (Html.BeginForm("GeneratePDF", "Home", FormMethod.Post, new { id = "frmProcess" }))        {             if (Model.ShowGeneratePDFBtn == true) 
            { 
                if (Model.ErrorT != string.Empty) 
                { 
            <tr> 
                <td colspan="5"> 
                    <u><b>@Html.Label("Templates:")</b></u> 

                </td> 
            </tr> 
            <tr> 
                @foreach (var item in Model.Templates) 
                { 
                    <td> 
                        @Html.CheckBoxFor(model => item.IsChecked) 
                        @Html.DisplayFor(model => item.TemplateName) 
                    </td> 
                } 
            </tr> 
                } 
                else 
                { 
                    Model.Error = Model.ErrorT; 
                } 

                if (Model.ErrorG != string.Empty) 
                { 
            <tr> 
                <td colspan="5"> 
                    <u><b>@Html.Label("Guarantors:")</b></u> 
                </td> 
            </tr> 
            <tr> 
                @foreach (var item in Model.Guarantors) 
                { 
                    <td> 
                        @Html.CheckBoxFor(model => item.isChecked) 
                        @Html.DisplayFor(model => item.GuarantorFirstName)&nbsp;@Html.DisplayFor(model => item.GuarantorLastName) 
                    </td> 
                } 
            </tr> 
                } 
                else 
                { 
                    Model.Error = Model.ErrorG; 
                } 
            <tr> 
                <td> 
                    <input type="submit" id="btnGeneratePDF" value='Generate PDF' /> 
                </td> 
            </tr> 
            <tr> 
                <td colspan="5"> 
                    @Model.Error 
                </td> 
            </tr> 
            } 
      }     </table> 

</div> 

<script type="text/javascript"> 

    $('btnRefresh').on('click', '#btnRefresh', function () { 
        Refresh(); 
    }); 

    function Refresh() { 

        var LoanID = $("#LoanID").val(); 

        if (LoanID != "") { 
            document.forms["frmTemps"].submit(); 
        } 
    } 
</script> 
```

控制器

```
 public ActionResult Index(ViewModelTemplate_Guarantors model)

     { 
                ViewBag.Error = ""; 
                model.ShowGeneratePDFBtn = false; 
                return View("Index", model); 
            } 

// used for the first form "frmRefresh"         [HttpPost] public ActionResult Refresh(ViewModelTemplate_Guarantors model)         { 
            try 
            { 
                model.Error = string.Empty; 

                bool dbHasRows = db.ChkLoanFields(Convert.ToInt32(model.LoanId)); 

                if (!dbHasRows) 
                { 
                    model.ShowGeneratePDFBtn = false; 
                    model.Error = "Details not available for this LoanId."; 
                    return View("Index",model); 
                } 
                else 
                { 
                    int TemplateCnt = 0; 
                    int GuarantorCnt = 0; 
                    //todo - modify 2nd & 3rd parms instead of hardcoding 
                    ViewModelTemplate_Guarantors tg = db.SelectViewModelTemplate_Guarantors(Convert.ToInt32(model.LoanId), "All", "All", out TemplateCnt, out GuarantorCnt); 

                    if (TemplateCnt > 0) 
                        model.Templates = tg.Templates; 
                    else  
                       model.ErrorT = "Templates not available for this LoanType."; 

                    if (GuarantorCnt > 0) 
                        model.Guarantors = tg.Guarantors; 
                    else 
                        model.ErrorG = "Guarantors not available for this LoanId."; 

                    model.ShowGeneratePDFBtn = true; 
   // right before the return here, the model is full of data.  return View("Index", model);                  } 
            } 
            catch (Exception ex) 
            { 
                throw ex; 
            } 
        }  [HttpPost]   // when I check the data here (via submission from the "frmProcess" form, the model is completely empty, null, etc... WHY???? // i NEED the model data here to perform processing in this action method.  public ActionResult GeneratePDF(ViewModelTemplate_Guarantors model)         { 
            try 
            { 
                int FolderNo, GuarantorNum = 0; 
                string Folder, LoanFolder = String.Empty; 
                string FormId, FormName, GuarantorName = String.Empty; 

                int LoanId = Convert.ToInt32(model.LoanId); 
                LoanFolder = LoanId.ToString().PadLeft(8, '0'); 

                //To calculate FolderId based on LoanId 
                if ((LoanId > 0) && (LoanId < 99000)) 
                { 
                    FolderNo = ((int)(LoanId / 10000) * 10000); 
                } 
                else 
                { 
                    FolderNo = ((int)(LoanId / 1000) * 1000); 
                } 

                Folder = ((int)FolderNo).ToString(); 
                Folder = Folder.PadLeft(8, '0'); 

                //todo - 2nd parm SelectedValue of dept  
                List<sSRPTFundexDocCodes1_Test_Result> sSRPTFundexDocCodes1 = db.GetFormValues(Convert.ToInt32(model.LoanId), (model.SelectedDeptValue)); 

                if (sSRPTFundexDocCodes1 != null) 
                { 
                   foreach (PDFTemplate template in model.Templates)                     { 
                       if (template.IsChecked == true)                         { 
```

发布后模板名称未显示在模型中。这很好用......值（复选框和相应的名称显示在表单上。

但是，当发布 GeneratePDF 按钮时，我在模型中看到的只是复选框是否被选中（这很棒）。在使用了以下许多语句之后：（ValueFor、DisplayFor、LabelFor、EditorFor 等），返回的模板名称的值是空白的。我需要与复选框对应的模板名称。

@Html.ValueFor(model => Model.Templates[i].TemplateName)

我怎样才能做到这一点？提前谢谢...下面是我更新的代码。

```
ViewModel public partial class ViewModelTemplate_Guarantors 
    { 
        public ViewModelTemplate_Guarantors() 
        { 
            Templates = new List<PDFTemplate>();  
            Guarantors = new List<tGuarantor>();  
        }  

        public int SelectedTemplateId { get; set; } 
        public List<PDFTemplate> Templates { get; set; } 

        public int SelectedGuarantorId { get; set; } 
        public List<tGuarantor> Guarantors { get; set; } 

        public string LoanId { get; set; } 
        public string SelectedDeptText { get; set; } 
        public string SelectedDeptValue { get; set; } 
        public string LoanType { get; set; } 

        public string Error { get; set; } 
        public string ErrorT { get; set; } 
        public string ErrorG { get; set; } 
        public bool ShowGeneratePDFBtn { get; set; } 
    } 
```

视图的相关部分：

```
if (Model.ShowGeneratePDFBtn == true) 
            { 
                if (Model.ErrorT == string.Empty) 
                { 
            <tr> 
                <td colspan="5"> 
                    <u><b>@Html.Label("Templates:")</b></u> 
                </td> 
            </tr> 
            <tr> 
                @for (int i = 0; i < Model.Templates.Count; i++) 
                {   
                    <td> 
                        @Html.CheckBoxFor(model => Model.Templates[i].IsChecked) 
                        @Html.ValueFor(model => Model.Templates[i].TemplateName)                     </td>  
                } 

            </tr> 
                } 
                else 
                { 
            <tr> 
                <td> 
                    <b>@Html.DisplayFor(model => Model.ErrorT)</b> 
                </td> 
            </tr> 
                } 

                if (Model.ErrorG == string.Empty) 
                { 
            <tr> 
                <td colspan="5"> 
                    <u><b>@Html.Label("Guarantors:")</b></u> 
                </td> 
            </tr> 
            <tr> 
                @for (int i = 0; i < Model.Guarantors.Count; i++) 
                {  
                    <td> 
                        @Html.CheckBoxFor(model => Model.Guarantors[i].isChecked) 
                        @Html.ValueFor(model => Model.Guarantors[i].GuarantorFirstName)&nbsp;@Html.ValueFor(model => Model.Guarantors[i].GuarantorLastName)                     </td>  
                } 

            </tr> 
                } 
                else 
                { 
            <tr> 
                <td> 
                    <b>@Html.DisplayFor(model => Model.ErrorG)</b> 
                </td> 
            </tr> 
                } 
            }    
            <tr> 
                <td colspan="3"> 
                    <input type="submit" name="submitbutton" id="btnRefresh" value='Refresh' /> 
                </td> 
                @if (Model.ShowGeneratePDFBtn == true) 
                { 
                    <td> 
                        <input type="submit" name="submitbutton" id="btnGeneratePDF" value='Generate PDF' /> 
                    </td> 
                } 
            </tr> 
            <tr> 
                <td colspan="5"> 
                    @Model.Error 
                </td> 
            </tr> 
```

控制器：

```
public ActionResult ProcessForm(string submitbutton, ViewModelTemplate_Guarantors model, FormCollection collection) 
```

基本上，它再次工作正常。当表单使用 Generate PDF 按钮发布时，我得到每个复选框的选中值，但不是模型中模板的名称。

**我在这里错过了什么吗？？？**

我提交之前的表格基本上如下所示。这是我在进入 ActionResult 后作为我的模型中的 TemplateID 缺少的复选框 (Form4) 的名称。

```
public ActionResult ProcessForm(string submitbutton, ViewModelTemplate_Guarantors model, FormCollection collection) 
```

复选框（选中） Form4

```
@for (int i = 0; i < Model.Templates.Count; i++)
                {  
                    <td>
                        @Html.CheckBoxFor(model => Model.Templates[i].IsChecked)
                        @Html.DisplayFor(model => Model.Templates[i].TemplateName)
                    </td> 
                } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T19:29:21.237

正如我在评论中提到的。模型绑定器无法绑定到 IEnumerable。

您的模型应如下所示：

```
public partial class ViewModelTemplate_Guarantors 
{ 
    public ViewModelTemplate_Guarantors() {
        Templates = new List<PDFTemplate>(); // These are important, the model binder
        Guarantors = new List<tGuarantor>(); // will not instantiate nested classes
    }
    public int SelectedTemplateId { get; set; } 
    public List<PDFTemplate> Templates { get; set; } 

    public int SelectedGuarantorId { get; set; } 
    public List<tGuarantor> Guarantors { get; set; } 

    ...
} 
```

此外，您的视图应如下所示：

```
...

@for(int i = 0; i < Model.Templates.Count; i++) // should really use label, not display
{ 
    <td> 
        @Html.CheckBoxFor(model => Model.Templates[i].IsChecked) 
        @Html.DisplayFor(model => Model.Templates[i].TemplateName)
    </td>
} 

...

@for(int i = 0; i < Model.Guarantors.Count; i++)
{
    <td> 
        @Html.CheckBoxFor(model => Model.Guarantors[i].isChecked)
        @Html.DisplayFor(model => Model.Gurantors[i].GuarantorFirstName)&nbsp;@Html.DisplayFor(model => Model.Guarantors[i].GuarantorLastName)
    </td>
}

... 
```

尽管更好的选择是使用 EditorTemplate 而不是这样做：

```
...
@Html.EditorFor(m => m.Templates)
...
@Html.EditorFor(m => m.Guarantors)
... 
```

然后在 ~/Views/Shared 中创建一个名为 EditorTemplates 的文件夹，然后创建两个名为`Templates.cshtml`和`Guarantors.cshtml`.

在这些文件中，您可以这样做：

```
@model PDFTemplate
<td> 
    @Html.CheckBoxFor(model => model.IsChecked) 
    @Html.DisplayFor(model => model.TemplateName) 
</td> 
```

和

```
@model Guarantors
<td> 
    @Html.CheckBoxFor(model => model.isChecked) 
    @Html.DisplayFor(model => model.GuarantorFirstName)&nbsp;@Html.DisplayFor(model => model.GuarantorLastName) 
</td> 
```

编辑器模板将自动迭代集合，并说明正确的命名格式，以使模型绑定器理解它是一个集合。

# svg - Graphviz dot - HTML 表格中的斜体文本是非斜体的

> ID：12770786
> 
> 赞同：4
> 
> 时间：2012-10-07T16:46:21.637
> 
> 标签：svg, graphviz, dot, italic

我正在使用`dot`版本 2.26.3

以下`.dot`内容：

```
digraph html {
results [shape=none, margin=0, label=<
    <TABLE BORDER="0" CELLBORDER="1" CELLSPACING="0" CELLPADDING="4">
    <TR>
    <TD>Title</TD>
    </TR>
    <TR>
    <TD><I>Description.</I></TD>
    </TR>
    </TABLE>
>];
} 
```

[..根据文档](http://www.graphviz.org/doc/info/shapes.html#html "文档")生成 SVG 时，应生成非斜体“标题”和斜体“描述” 。

`dot -Tsvg filename.dot -o output/filename.svg`

但是，如您所见，描述是非斜体的：

![在此处输入图像描述](../Images/054c2f4ed1d8352757473f24666ac2dd.png)

知道为什么吗？

## 更新

由于各种原因，我无法安装最新版本。最后，我使用斜体字体进行了补救。同样，您可以使用强字体作为粗体的等效字体。

`<TD><FONT FACE="Times-Roman">Standard.</FONT></TD>`

`<TD><FONT FACE="Times-Italic">In italics.</FONT></TD>`

`<TD><FONT FACE="Times-Bold">In bold.</FONT></TD>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T17:22:59.637

这就是原因 - 从您提供的文档的链接：

> 粗体、斜体、下划线、下标和上标（`<B>`、`<I>`、`<U>`、`<SUB>`; 和`<SUP`>）的字体标记仅在**2011 年 10 月 14 日之后**的版本中可用，目前仅可通过 cairo 和 svg 渲染器使用

然而，2.26.3 版似乎是从2010 年**1 月开始**的——至少在检查ubuntu或[windows的](http://www.graphviz.org/pub/graphviz/stable/windows/)[下载](http://www.graphviz.org/pub/graphviz/stable/ubuntu/ub9.04/x86_64/)日期时是这样。

我建议升级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T17:31:39.680

我已经`2.28`安装了版本，并且我的本地文档 ( `C:\Program Files\Graphviz 2.28\share\graphviz\doc\html\info\shapes.html#html`) 没有提及该部分下的*任何* `<I>`标签。似乎这些标签在产生输出时仍然有效，但该支持（显然）已从功能中删除或从未添加到功能中，并且现在（显然）不支持任何输出。`<B>``HTML-Like Labels``png``svg`

# delphi - Delphi IDE 菜单集成 - INTAServices

> ID：12770787
> 
> 赞同：1
> 
> 时间：2012-10-07T16:46:22.853
> 
> 标签：delphi, components, delphi-xe2, vcl

我使用 INTAServices40 在 Delphi 中成功安装了我的菜单项，但问题是 - 下次 Delphi 启动时菜单丢失？！实际上，安装了两个菜单项；帮助菜单下的一个总是显示（IOTAWizardMenu），但工具菜单下的一个（测试菜单项）在下次 Delphi 启动时丢失。如何解决这个问题？

```
unit TESTMENU;

interface    
uses
   ToolsAPI, Classes, Windows, vcl.Menus, vcl.dialogs;    
type
   TCustomMenuItem = class(TNotifierObject, IOTAWizard, IOTAMenuWizard)
     function GetIDString: string;
     function GetName: string;
     function GetState: TWizardState;
     // Launch the AddIn
     procedure Execute;
     function GetMenuText: string;
   end;

   TCustomMenuHandler = class(TObject)
    // Handle custom menu
     procedure HandleClick(Sender: TObject);
   end;

procedure Register;

implementation    
var
  mnuitem: TMenuItem;
  CustomMenuHandler: TCustomMenuHandler;

procedure TCustomMenuItem.Execute;
begin
  ShowMessage('IOTAWizardMenu based menu item');
end;

function TCustomMenuItem.GetIDString: string;
begin
  Result := 'TMS.MenuSample';
end;

function TCustomMenuItem.GetMenuText: string;
begin
  Result := 'IOTAWizardMenu';
end;

function TCustomMenuItem.GetName: string;
begin
  Result := 'TMSMenuSample';
end;

function TCustomMenuItem.GetState: TWizardState;
begin
  Result := [wsEnabled];
end;

procedure TCustomMenuHandler.HandleClick(Sender: TObject);
begin
  ShowMessage('INTAServices40.MainMenu based menu item');
end;   

procedure AddIDEMenu;
var
  NTAServices: INTAServices40;    
begin
  NTAServices := BorlandIDEServices as INTAServices40;

  // avoid inserting twice
  if NTAServices.MainMenu.Items[9].Find('TEST') = nil then
  begin
    CustomMenuHandler := TCustomMenuHandler.Create;

    mnuitem := TMenuItem.Create(nil);
    mnuitem.Caption := 'TEST';
    mnuitem.OnClick := CustomMenuHandler.HandleClick;
    NTAServices.MainMenu.Items[9].Add(mnuitem)
  end;
end;

procedure RemoveIDEMenu;
var
  NTAServices: INTAServices40;
begin
  if Assigned(mnuitem) then
  begin
    NTAServices := BorlandIDEServices as INTAServices40;
    NTAServices.MainMenu.Items[9].Remove(mnuitem);
    mnuitem.Free;
    if Assigned(CustomMenuHandler) then
      CustomMenuHandler.Free;
  end;
end;

procedure Register;
begin
  AddIDEMenu;
  RegisterPackageWizard(TCustomMenuItem.Create);
end;

initialization
  mnuitem := nil;    
  CustomMenuHandler := nil;    
finalization
  RemoveIDEMenu;
end. 
```

所以，我的第一个问题是如何在每次 Delphi 启动时显示菜单项 TEST。另外，我想在菜单项 TEST 旁边添加图标。有什么方向吗？

谢谢

**编辑：** 我刚刚发现我的包裹延迟加载。看网上的人说 ForceDemandLoadState(dlDisable) 应该被调用。但是，这对我也没有帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:54:49.663

`NTAServices.MainMenu.Items[9]`当 IDE 加载它的包时，可能会在不同的时间返回不同的东西，还有一些菜单项，其子项在运行时由 IDE 管理（例如，窗口菜单）。

您可以按名称查找帮助菜单项组件：

```
procedure AddIDEMenu;
var
  HelpMenu: TComponent;
begin
  HelpMenu := Application.MainForm.FindComponent('HelpMenu');
  if (HelpMenu is TMenuItem) and (TMenuItem(HelpMenu).Find('TEST') = nil) then
  begin
    CustomMenuHandler := TCustomMenuHandler.Create;

    mnuitem := TMenuItem.Create(nil);
    mnuitem.Caption := 'TEST';
    mnuitem.OnClick := CustomMenuHandler.HandleClick;

    TMenuItem(HelpMenu).Add(mnuitem);
  end;
end;

procedure RemoveIDEMenu;
var
  HelpMenu: TComponent;
begin
  if Assigned(mnuitem) then
  begin
    HelpMenu := Application.MainForm.FindComponent('HelpMenu');
    if HelpMenu is TMenuItem then
      TMenuItem(HelpMenu).Remove(mnuitem);
    mnuitem.Free;
    CustomMenuHandler.Free;
  end;
end; 
```

# asp.net-mvc - 如何对菜单元素进行排序以及如何为这些元素添加 URL？

> ID：12770788
> 
> 赞同：0
> 
> 时间：2012-10-07T16:46:23.203
> 
> 标签：asp.net-mvc, menu, documentation, navigation, orchardcms

Orchard 1.5.1 入门，我按照此处提供的教程进行操作：

[http://docs.orchardproject.net/Documentation/Navigation-and-menus](http://docs.orchardproject.net/Documentation/Navigation-and-menus)

发现教程中的界面与1.5.1版本的界面不同，我找不到如何对菜单元素进行排序或如何为这些元素添加URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T19:45:46.257

自 1.5 版以来，导航发生了变化：

[http://docs.orchardproject.net/Documentation/Orchard-1-5-Release-Notes#Navigationmodule](http://docs.orchardproject.net/Documentation/Orchard-1-5-Release-Notes#Navigationmodule)

您可以通过拖放对项目进行排序……</p>

# c++ - C++ 记录器性能和可移植性

> ID：12770790
> 
> 赞同：3
> 
> 时间：2012-10-07T16:46:31.463
> 
> 标签：c++, logging, log4cxx, log4cplus, glog

我正在编写一个 C++ 应用程序，我必须在将来部署到服务器（可能作为 node.js C++ 模块）。
我真的需要一个在开发过程中帮助我的日志库。现在我正在使用 log4cxx，但我需要代码是可移植的，所以我更喜欢在项目中包含一个源文件。我还需要一个执行 C++ 记录器，在打开和关闭日志记录的两种情况下都不会减慢应用程序的速度。谁能帮我做这个选择？我的选择是：

1.  **Log4cplus**：简单易用，易于扩展。但是*性能*呢？
2.  **Google-Glog**：最容易使用而且非常非常快。但是我需要编译它并且它使用系统标志，我想知道当我将它与node.js一起使用时是否有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T02:26:42.367

据我所知，log4cxx 使用 Apache 运行时作为其基础，因此可移植性不是 log4cxx 的问题。它还提供用于优化日志记录的宏。您还有其他原因要从 log4cxx 转移吗？

# c - 程序在学校机器上正确链接，但不是在个人机器上：未定义对日志的引用

> ID：12770791
> 
> 赞同：0
> 
> 时间：2012-10-07T16:46:31.697
> 
> 标签：c, gcc, linker

我可以 ssh 到我的学校 Ubuntu 11.04 服务器，我必须在其中提交我的代码，这个链接很好：

```
ME@SCHOOL:~/309/project2$ make
gcc -lm treesort.c -o treesort
ME@SCHOOL:~/309/project2$ 
```

我的本地机器运行的是 Ubuntu 12.04，这是相同代码的编译器输出，但使用的是 NetBeans 生成文件：

```
gcc -lm    -o dist/Release/GNU-Linux-x86/treesort build/Release/GNU-Linux-x86/sortFns.o build/Release/GNU-Linux-x86/treesort.o  
build/Release/GNU-Linux-x86/treesort.o: In function `processargs':
treesort.c:(.text+0x144): undefined reference to `log'
collect2: ld returned 1 exit status 
```

在我的本地机器上使用与第一个示例相同的代码和 makefile 的命令行：

```
ME@MYCOMPUTER:~/Documents/CSCI/309/project2$ make
gcc -lm treesort.c -o treesort
/tmp/ccY5GqF1.o: In function `processargs':
treesort.c:(.text+0x2b5): undefined reference to `log'
collect2: ld returned 1 exit status
make: *** [all] Error 1
ME@MYCOMPUTER:~/Documents/CSCI/309/project2$ 
```

这真的很烦人，我不明白为什么它在服务器上工作而不是在我的本地机器上工作。我发现了这个[问题](https://stackoverflow.com/questions/8207464/linking-math-library-in-gcc-4-6-1-ubuntu-11-10)，但它没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:56:38.957

放在`-lm`链接行的末尾。链接行上的源、对象和（存档）库的顺序很[重要](http://webpages.charter.net/ppluzhnikov/linker.html)，而您的顺序是*错误*的。

如果放在`-lm`链接行的末尾没有帮助，那么您在系统的某个地方调用了一些*伪造*的库`libm.{a,so}`，您应该弄清楚它来自哪里，然后摆脱它。

您可以找出`libm`您的链接器正在查找哪个`gcc -Wl,-t ...`

# jquery - 在客户端调用 Jquery 基本函数

> ID：12770795
> 
> 赞同：0
> 
> 时间：2012-10-07T16:47:31.557
> 
> 标签：jquery, asp.net, function, events

我想在我的一个控件asp.net的客户端事件上调用一个简单的函数；

但我没有成功地做到这一点。

我是 jquery 的新手...

```
<script type="text/javascript">
    function UploadStart() {
        var FileName = $('#ctl00_MainPlaceHolder_AsyncFileUpload_ctl00').attr('value');
        $('#txtLink').attr('value', FileName);
        $('#<%=BtnUpload.ClientID %>').css('display', 'none');
    }

</script> 
```

aspx：

```
 </td>
        <td>
            <input type="text" id="txtLink" style="width:200px;" class="EngTextBox" />
        </td>
        <td id="UploadControls" style="width:215px; text-align:center;">
            <input type="button" id="BtnBrowseFile" class="BtnBack" value="انتخاب فایل" />
            <asp:Button Text="آپلود" ID="BtnUpload" CssClass="BtnBack" runat="server" OnClick="BtnUpload_Click" />
            <asp:AsyncFileUpload ID="AsyncFileUpload" runat="server" OnUploadedComplete="Upload_Completed" OnClientUploadStarted="UploadStart();" />
            </td>
    </tr> 
```

OnClientUploadStarted 事件必须做一些 jquery 滴答声...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:27:34.397

我解决了

'();' 是我的问题！:D

称呼 ：

OnClientUploadStarted="UploadStart"

但为什么 ？！！！

# python - 序列化数据并从不受信任的来源安全地解包

> ID：12770796
> 
> 赞同：7
> 
> 时间：2012-10-07T16:47:40.830
> 
> 标签：python, yaml, urllib2, pyramid, pickle

我使用 Pyramid 作为回合制视频游戏数据传输的基础。客户端使用 POST 数据来展示他们的动作，并使用 GET 来检索序列化的游戏板数据。游戏数据有时可能涉及字符串，但几乎总是两个整数和两个元组：

```
gamedata = (userid, gamenumber, (sourcex, sourcey), (destx, desty)) 
```

我的一般客户端框架是 Pickle ，转换为 base 64，使用 urlencode，然后提交 POST。然后服务器接收 POST，解压缩单项字典，解码 base64，然后解压缩数据对象。

我想使用 Pickle，因为我可以使用类和值。将游戏数据作为 POST 字段提交只能给我字符串。

然而，Pickle 被认为是不安全的。所以，我转向了 pyYAML，它具有相同的目的。使用`yaml.safe_load(data)`，我可以在不暴露安全漏洞的情况下序列化数据。但是，safe_load 非常安全，我什至不能反序列化无害的元组或列表，即使它们只包含整数。

这里有中间立场吗？有没有一种方法可以序列化 python 结构而不同时允许执行任意代码？

我的第一个想法是为我的发送和接收函数编写一个包装器，在值名称中使用下划线来重新创建元组，例如发送会将字典值转换`source : (x, y)`为`source_0 : x, source_1: y`. 我的第二个想法是，这不是一个非常明智的发展方式。

**编辑：**这是我使用 JSON 的实现......它似乎不如 YAML 或 Pickle 强大，但我仍然担心可能存在安全漏洞。

在我进行实验时，客户端的构造更加明显：

```
import urllib, json, base64

arbitrarydata = { 'id':14, 'gn':25, 'sourcecoord':(10,12), 'destcoord':(8,14)}

jsondata = json.dumps(arbitrarydata)
b64data = base64.urlsafe_b64encode(jsondata)
transmitstring = urllib.urlencode( [ ('data', b64data) ] )
urllib.urlopen('http://127.0.0.1:9000/post', transmitstring).read() 
```

Pyramid Server 可以检索数据对象：

```
json.loads(base64.urlsafe_b64decode(request.POST['data'].encode('ascii'))) 
```

在不相关的说明中，我很想听听关于在这种方法中使用 POST 数据的可接受性的其他意见，我的游戏客户端目前绝不是基于浏览器的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T16:52:50.443

怎么样[`json`](http://docs.python.org/library/json.html)？该库是标准 Python 库的一部分，它允许序列化大多数通用数据而无需执行任意代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T16:53:32.640

为什么不[`colander`](http://docs.pylonsproject.org/projects/colander/en/latest/)用于您的序列化和反序列化？Colander 将对象模式转换为简单的数据结构，反之亦然，您可以使用 JSON 来发送和接收此信息。

例如：

```
import colander

class Item(colander.MappingSchema):
    thing = colander.SchemaNode(colander.String(),
                                validator=colander.OneOf(['foo', 'bar']))
    flag = colander.SchemaNode(colander.Boolean())
    language = colander.SchemaNode(colander.String()
                                   validator=colander.OneOf(supported_languages)

class Items(colander.SequenceSchema):
    item = Item() 
```

上述设置定义了项目对象列表，但您也可以轻松定义游戏特定对象。

反序列化变为：

```
 items = Items().deserialize(json.loads(jsondata)) 
```

序列化是：

```
 json.dumps(Items().serialize(items)) 
```

除了让您往返 python 对象外，它还验证序列化数据以确保它适合您的模式并且没有被弄乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-29T12:01:08.297

我没有看到 raw`JSON`在这里提供答案，因为我相信这个问题特别提到了酸洗**类**和值。我不相信使用直接`JSON`可以序列化和反序列化python类，而`pickle`可以。

我对几乎所有服务器到服务器的通信都使用`pickle`基于 - 的序列化方法，但总是包含非常严格的身份验证机制（例如 RSA 密钥对匹配）。但是，这意味着我只处理可信来源。

如果您绝对需要使用不受信任的来源，我至少会尝试添加（很像@MartijnPieters 建议的）一个模式来验证您的交易。我认为没有一种好方法可以处理来自不受信任来源的任意腌制数据。您必须使用一些反汇编程序解析字节字符串，然后只允许受信任的模式（或阻止不受信任的模式）。我不知道有什么可以做到这一点`pickle`。

但是，如果您的类“足够简单”……您也许可以使用`JSONEncoder`，它本质上将您的 python 类转换为`JSON`可以序列化的东西……从而验证……

[如何使类 JSON 可序列化](https://stackoverflow.com/questions/3768895/python-how-to-make-a-class-json-serializable)

但是，影响是您必须从`JSONEncoder`.

# c# - 由于 C#-Dll 的异常，ASP .NET MVC 应用程序中的会话被终止？

> ID：12770799
> 
> 赞同：0
> 
> 时间：2012-10-07T16:47:50.820
> 
> 标签：c#, asp.net-mvc-2, dll, exception-handling, session-variables

在我的 ASP .NET MVC 应用程序中，我调用了 ac#-DLL 的函数。有时 DLL 会引发异常。在我的代码中，异常被捕获和处理。但是，在那之后，发出相应请求的用户的会话似乎超时了。

来自 Dll 的异常是否会导致 ASP .NET MVC 清除会话，无论是否处理它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T16:57:14.837

不，异常通常不会导致会话被清除。

当然，DLL 可以在传播异常之前显式清除会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T18:14:47.533

好的，我发现了错误：在我的控制器执行期间，我在我的应用程序的 bin 文件夹中的一个文件中写入了一些统计信息......这就是会话变量被清除的原因。

所以，实际上它与异常无关。

# android - Android 回到活动或重新创建

> ID：12770801
> 
> 赞同：0
> 
> 时间：2012-10-07T16:47:58.363
> 
> 标签：android, button, android-activity, notifications, back

我正在开发媒体播放器应用程序，当歌曲开始在服务中播放时，我会显示通知。

基本上我在我的第一个活动中显示一个列表视图（来自艺术家选项卡、专辑选项卡等的任何一个），并且在单击一个项目时，将显示播放器屏幕。

我必须在我的播放器活动中实现一个后退按钮，我想我只需要点击它来完成（）。

但是，如果我以前的活动被破坏并且我正在通过待处理的意图（通过通知），如果我现在调用完成（），那么活动就会被简单地破坏。在这种情况下，我想重新创建以前的活动。

**例子 ：**

显示专辑 > 播放器屏幕，歌曲开始使用状态栏通知。

假设我现在按下并销毁所有活动。

单击通知>再次显示播放器..如果我现在按回，则专辑活动应以类似方式显示在艺术家选项卡中。

**到目前为止，我只是在做：**

```
 btnBack.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            finish();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T18:44:21.467

我想你可以通过相应地设置意图标志来实现你所需要的。我发现对这些标志的最佳介绍如下

[Android 活动和任务系列 - 意图标志](http://blog.akquinet.de/2010/04/15/android-activites-and-tasks-series-intent-flags/)

这对我来说仍然是一个令人困惑的主题，但本文提供的 Android 应用程序对于快速检查不同标志的作用非常有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T17:55:40.170

我认为你必须在服务中设置更多关于歌曲的信息，比如专辑，当你在歌曲活动中按下时，你应该检查服务并从服务和初始化专辑活动中返回它

# sml - 当您在 SML 中将运算符定义为数据类型时，它们是否充当运算符的函数？

> ID：12770805
> 
> 赞同：1
> 
> 时间：2012-10-07T16:48:33.763
> 
> 标签：sml, smlnj

当您在 SML 中将运算符定义为数据类型时，它们是否充当运算符的函数？

像`datatype egexp= egadd of egexp*egexp`

egadd 是作为运算符还是函数？我的意思是将表达式 a+b 写为 egadd(a)(b) 还是 (a)egadd(b)？

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T09:57:41.613

您本质上是在询问中缀语法。这实际上与函数与构造函数无关，两者都可以是中缀或（默认情况下）非修复：

```
fun f (x, y) = ...
val a = f (1, 2)
infix f
val b = 1 f 2

datatype t = C of int * int
val c = C (1, 2)
infix C
val d = 1 C 2 
```

这统一适用于字母数字和符号标识符：

```
fun ++ (x, y) = ...
val a = ++ (1, 2)
infix ++
val b = 1 ++ 2

datatype t = && of int * int
val c = && (1, 2)
infix &&
val d = 1 && 2 
```

也就是说，SML 中的“函数”和“运算符”之间没有区别。您只有 nonfix vs infix 标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T20:27:27.043

你也不写。它作用于“函数”（实际上，作为值构造函数），采用您指定的类型。

也就是说，由于您指定了`egadd`需要一个`egexp * egexp`，它需要一个 2 的元组`egexps`，即：`egadd (a, b)`，其中`a`和`b`是类型的值`egexp`。

`infix`如果需要，您可以使用或使其像任何其他函数一样中缀`infixr`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:09:44.780

`egadd`是一个“构造函数”。`egexp`是一种*代数数据类型*，并且`egadd`是它的构造函数之一。SML 中的构造函数可以没有参数，也可以只有一个参数（多个“组件”可以打包到 1 个元组参数中）。作为带参数的构造函数，`egadd`它也是一个函数，它接受该参数类型 ( `egexp*egexp`) 的参数并返回（“构造”）代数数据类型的值`egexp`。例如，正如@SebastianPaaskeTørho 提到的，如果`a`和`b`是 type 的值`egexp`，则`egadd (a, b)`构造一个新的 type 值`egexp`。

# .htaccess - htaccess 从 domain.com/index.php?page=about 重定向到 domain.com/about

> ID：12770808
> 
> 赞同：1
> 
> 时间：2012-10-07T16:48:48.277
> 
> 标签：.htaccess, query-string

我已经升级了一个旧网站，并希望将所有旧页面重定向到新页面。旧网站使用索引页面和查询字符串来提供相关内容。

这是新的 htaccess 文件。有问题的问题是让重定向工作。另外，如果您可以简化此文件：

```
Options +FollowSymLinks
Options +Indexes
RewriteEngine on
RewriteBase /

RewriteCond %{HTTP_HOST} ^www.domain.co.uk$ [NC]
RewriteRule ^(.*)$ http://domain.co.uk/$1 [R=301,L]

#if its not a directory
RewriteCond %{REQUEST_FILENAME} !-d
#and it has a trailing slash then redirect to URL without slash
RewriteRule ^(.+)/$ /$1 [L,R=301]

#this removes php extention
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^\.]+)$ $1.php [NC,L] 

# stops you accessing url with.php
RewriteCond %{THE_REQUEST} ^[A-Z]+\ /([^.?\ ]+)\.php
RewriteRule ^([^.]+)\.php(/.+)?$ /$1%{PATH_INFO} [R=301]

RewriteRule ^news/([^/]*)/([^/]*)$ /news?id=$1&title=$2 [L]

Redirect 301 index?page=about http://domain.co.uk/about

ErrorDocument 404 http://domain.co.uk/404 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:37:29.757

将 domain.com/index.php?page=about 重定向到 domain.com/about 的适当规则如下

```
RewriteRule ^index\.php$ %{QUERY_STRING} [C]
RewriteRule page=(.*) /$1? [R=301,L] 
```

# android - Android代码 - 任何方式将文本输入框覆盖为小写？

> ID：12770812
> 
> 赞同：3
> 
> 时间：2012-10-07T16:49:19.450
> 
> 标签：android

我有一个特定的情况，我在首选项中使用 EditTextPreference 来允许用户输入单词/名称作为首选项。当应用程序打开文本输入框时，我需要它为小写字母，似乎默认为首字母大写。

```
<EditTextPreference
        android:title="Your Name"
        android:key="yname"
        android:capitalize="none" <-- DOES NOT WORK..
        android:summary="name:"
        android:defaultValue="george"
         >
    </EditTextPreference> 
```

当这个应用程序使用偏好代码并且用户选择项目时，它会打开文本输入框，第一个字母上带有大写锁定......呃！哈哈 ！

我可以在输入文本框中的第一个字母默认使用大写字母时简单地使用@Override 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T17:06:00.720

似乎`android:inputType="text"`应该清除所有大写标志：

[http://developer.android.com/reference/android/widget/TextView.html#attr_android:inputType](http://developer.android.com/reference/android/widget/TextView.html#attr_android:inputType)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T17:02:29.823

您可以在首选项类中使用以下内容。

```
 public class TaskPreferences extends PreferenceActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      addPreferencesFromResource(R.xml.task_preferences);

      EditTextPreference xx = (EditTextPreference) findPreference(getString(R.string.your_pref_key));;
      xx.getEditText().setKeyListener(TextKeyListener.getInstance(false, TextKeyListener.Capitalize.NONE));
    }
} 
```

# ruby-on-rails - 在表格中保存图形的坐标，然后以随机顺序删除它们？最好的方法来做到这一点？

> ID：12770815
> 
> 赞同：1
> 
> 时间：2012-10-07T16:49:39.253
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个情况，它是这样的：

我需要像在数学图中使用的那样打印出坐标。所以 (0,0) (0,1) (0,2) 等等。因此，如果长度指定为 10，宽度指定为 20，则图形区域将是从 (0,0) 到 (10,20) 的所有点。

我希望将这些值存储在一个表中，以便可以按**顺序**打印出来。

稍后，有些**值将被删除**，因此假设删除的值是 (4,5) (4,6) (4,7)，然后之前创建的主表不应该包含这些值. 而且我需要能够打印出带有剩余值的新表。

到目前为止，我只完成了询问长度和宽度值的编码。

我应该如何继续剩下的事情？如果您需要任何澄清或问题太令人困惑，请发表评论，我会尽力使其变得更好。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:04:46.197

根据您的需要，有几种方法可以做到这一点。

简单的方法是使用这样的数组数组：

```
a = Array.new(11) {Array.new(21) {0}} 
```

这将创建一个像 a[0][0] 到 a[10][20] 的数组，每个项目都初始化为 0。

要删除一个项目，请将其设置为 nil：

```
a[4][5] = nil 
```

打印数组时，跳过任何 nil 值：

```
for x in 0..10
  for y in 0..20
    next if a[x][y]==nil
    puts a[x][y]
  end
end 
```

如果您的图表非常大，请阅读“稀疏矩阵”，这是 Excel 之类的工具如何使用更少的 RAM 来存储许多单元格的空白单元格：

[http://en.wikipedia.org/wiki/Sparse_matrix](http://en.wikipedia.org/wiki/Sparse_matrix)

# xml - 在 WinRT 项目中使用 XSD 文件

> ID：12770817
> 
> 赞同：1
> 
> 时间：2012-10-07T16:50:11.063
> 
> 标签：xml, xsd, windows-runtime, xsd.exe, windows-store-apps

我正在尝试在 WinRT (Windows Store/Metro) 项目中使用一些现有的 C# 代码。

此代码依赖于使用 XSD 生成的一些 xml 文件。

不幸的是，旧的 XmlDocument 类似乎在 WinRT 中不可用......有一些替代方案，但它们似乎并不完全相同 - 所以我需要为 WinRT 生成一些新文件。

有没有办法将 XSD 文件导入 WinRT 项目，以便生成所有数据类和枚举并且可以在 Metro 项目中使用？

我环顾四周，没有发现任何特别有用的东西 - 例如只是[http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/88d9b73b-5faa-4204-9d06-dc121e709943](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/88d9b73b-5faa-4204-9d06-dc121e709943)。

我尝试将一些 XSD 文件导入 WinRT 项目 - 但这些似乎没有生成任何东西。

我真的必须将生成的 xsd 文件从 .Net 移植到 WinRT 吗？:(

我正在导入的模式非常大，并且我有很多使用 XSD 方法的现有代码 - 所以我真的想避免必须手动对所有这些代码进行一次性移植，除非我真的必须这样做。 ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-04T12:37:26.847

好的，这个问题已经很老了，但如果其他人遇到和我一样的问题/问题，这里有一个（不是完全免费的）解决方案：

1.  下载 xsd2code 插件 ( [https://xsd2code.codeplex.com/](https://xsd2code.codeplex.com/) ) / 或使用 VS 工具下载器
2.  注册 15 天试用（您也可以购买）
3.  在项目中导入 .xsd 文件
4.  右键单击它们（一个接一个）并选择“运行 xs2code”
5.  （这是很棒的东西！）作为目标框架选择 WinRT
6.  生成代码并快乐！

可悲的是，我只发现了这个工具（只有 15 天的免费试用期），它能够做到这一点（为 WinRT / UWP / WinPhone 生成代码）

# mouseevent - JXMapViewer2 鼠标和按键事件

> ID：12770819
> 
> 赞同：1
> 
> 时间：2012-10-07T16:50:22.873
> 
> 标签：mouseevent, keyboard-events

已成功设法将 JXMapViewer2 mapKit 作为小部件添加到表单中。地图似乎工作正常，缩放按钮也是如此，但它似乎没有任何（至少激活）支持键盘或鼠标事件。似乎也没有任何关于如何（以及在​​何处）解决此问题的文档。有任何想法吗？

PS：在 GUI 向导的帮助下，使用 NetBeans 7.2 设置项目。

# iphone - 在 cocos2d 2.1 项目中实现 Game Center

> ID：12770825
> 
> 赞同：0
> 
> 时间：2012-10-07T16:51:37.960
> 
> 标签：iphone, ios, cocos2d-iphone, game-center

我正在玩 Game Center 和 cocos2d，因为我想了解如何在游戏中实现 Game Center。我想要的只是显示排行榜和成就。我已经按照本教程[在 cocos2d 游戏中集成 Gamecenter](https://stackoverflow.com/questions/6278085/integrate-gamecenter-in-cocos2d-game/6290129#6290129)并且我的成就运行良好，Game Center 一开始就认出我，排行榜无法显示我的分数（我已经阅读了它需要很长时间，但我等了超过 1 天依然没有）。

今天我把我的cocos2d从1.0升级到2.1 beta，因为我想支持iphone 5，我看到Helloworld例子已经和Game Center集成了！

任何人都可以展示一些示例项目或教程如何实现排行榜和成就并在没有 GKHelper 的情况下使用 Game Center 识别当前玩家，只需清理 Game Kit 吗？我不想使用 GKHelper 因为有很多功能而且我不需要它，老实说我也不太了解它。

先感谢您 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T14:32:49.373

Cocos2d 没有 Game Center 集成。除了打开排行榜和成就视图之外，它什么也不做。cocos2d 模板甚至不登录本地播放器。这个最小的 Game Center 示例仅用于展示如何在 cocos2d 应用程序中附加视图。那是 Game Center 和 cocos2d 相遇的唯一领域，关于 Game Center 的所有其他方面都是通用的，即它适用于任何应用程序，无论是否有 cocos2d。

对于一个相当完整的 Game Center 集成，我敢打赌你必须了解并使用至少 50% 的 GKHelper 功能，如果你想要多人游戏的话。为了理解这些方法，我推荐阅读[Game Center Programming Guide](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/Introduction/Introduction.html)。

# ruby-on-rails - Heroku 找不到数据表图像

> ID：12770827
> 
> 赞同：0
> 
> 时间：2012-10-07T16:52:09.473
> 
> 标签：ruby-on-rails, heroku, datatables, asset-pipeline

当我将 Rails 3.1.0 应用程序推送到 heroku 时，无法找到某些图像。这似乎只是 dataTables 插件的问题。日志显示以下内容：

```
heroku[router]: GET my-app.herokuapp.com/assets/dataTables/back_disabled.png dyno=web.1 queue=0 wait=0ms service=238ms status=404 bytes=728 
```

我正在使用 jquery-ui-rails 和 jquery-datatables-rails gems。这是我的 Gemfile 的摘录：

```
# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails', "3.1.4"
  gem 'coffee-rails', "~> 3.1.0"
  gem 'uglifier'
  gem 'jquery-ui-rails'
  gem 'jquery-datatables-rails', github: 'rweng/jquery-datatables-rails'
end

gem 'jquery-rails' 
```

一切都在本地主机上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:25:47.893

似乎 DataTables 资产不是由资产管道编译的。您应该尝试将 gem 添加到资产组**之外**，以便它也可以在生产中加载，然后应该可以访问资产以提供服务。

# android - Android 将图像发布到 Facebook 墙而不是画廊相册

> ID：12770832
> 
> 赞同：1
> 
> 时间：2012-10-07T16:52:42.597
> 
> 标签：android, facebook, image, share

我已经成功地将我的应用程序和 Facebook SDK 连接起来，并且可以将照片发布到相册。

问题是，我的全局变量中有“活动图像 url”，我使用以下代码将其发布到 Facebook：

```
Onclick...
case R.id.tab1_PublishFace:
         Bundle params = new Bundle();
         params.putString("method", "photos.upload");
         Bitmap bi = BitmapFactory.decodeFile(Globals.INSTANCE.activeSetting.f_image_path);
         ByteArrayOutputStream baos = new ByteArrayOutputStream();
         bi.compress(Bitmap.CompressFormat.JPEG, 100, baos);
         imgData = baos.toByteArray();
         params.putByteArray("picture", imgData);
         Globals.INSTANCE.mAsyncRunner.request(null, params, "POST",new SampleUploadListener(), null);
         break; 
```

现在，这里发生的事情是，我的照片被上传到默认相册（命名为 app 被命名），并且任何人都看不到它，即使我已经在 Facebook 设置中手动更改为对某些人可见。除此之外，我在 Facebook 上的图片不会自动放入相册，而是要求我批准它们。

这是我如何连接到 Facebook 并将令牌和会话信息保存在 SharedPreferences 中的代码：

```
 Globals.INSTANCE.facebook.authorize(getSherlockActivity(), new String[] {"publish_actions"}, new DialogListener() {
                    public void onFacebookError(FacebookError e) {
                        // TODO Auto-generated method stub
                        showToast("FacebookError");
                    }

                    public void onError(DialogError e) {
                        // TODO Auto-generated method stub
                        showToast("FacebookError");
                    }

                    public void onComplete(Bundle values) {
                        // TODO Auto-generated method stub
                        ImageView img = (ImageView) getSherlockActivity().findViewById(R.id.imageView1);
                        TextView txt = (TextView) getSherlockActivity().findViewById(R.id.textView1);
                        txt.setText("Log Out from Facebook");
                        txt.setTag(faceLoggedIn);
                        showToast("Succesfully Loged To FB. Click Again to Logout");
                        SharedPreferences.Editor editor = mPrefs.edit();
                        editor.putString("access_token", Globals.INSTANCE.facebook.getAccessToken());
                        editor.putLong("access_expires", Globals.INSTANCE.facebook.getAccessExpires());
                        editor.commit();
                    }

                    public void onCancel() {
                        // TODO Auto-generated method stub
                        showToast("Canceled");
                    }
                }); 
```

我正在查看[https://github.com/fbsamples/ios-android-wishlist](https://github.com/fbsamples/ios-android-wishlist)示例，我没有看到任何特殊权限设置，并且当我编译该示例时，我的照片会正确发布并且没有批准需要。

我错过了什么，是 Facebook 应用程序设置，还是我的代码中的某些内容？

我希望将图像添加到相册中，但要在发布时发布在我的墙上。

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:22:37.467

当您看到在 facebook 上上传图片时，您会将其发布到名为“Wall Photos”的特定相册中。

这应该工作：

```
Bundle params = new Bundle();
params.putByteArray("source", imageBytes);
params.putString("message", "A wall picture");
facebook.request("me/feed", params, "POST"); 
```

如果这不起作用，那么您必须先获取登录用户的“墙照片”相册 ID，然后执行以下操作：

```
Bundle params = new Bundle();
params.putByteArray("source", imageBytes);
params.putString("message", "A wall picture");
facebook.request("ALBUM_ID/photos", params, "POST"); 
```

见线程：

[从 android 将图片贴到墙上](https://stackoverflow.com/questions/10160449/post-a-picture-to-the-wall-from-android)

# php - 如何在没有 setinterval 或 load 函数的情况下从 mysql 获取记录并检查更新

> ID：12770839
> 
> 赞同：1
> 
> 时间：2012-10-07T16:54:16.057
> 
> 标签：php, mysql

我有一个我正在开发的网站，就像社交网络一样，但它是简单的 php、jquery 和 html 代码。我已经使用 jquery 加载函数和间隔更新了我的网站。此加载函数以 3 秒的间隔更新用户。我需要其他东西来从 mysql 获取记录并一次又一次地更新它们，因为墙贴、喜欢和不喜欢、删除和 time ago 运行良好，但是当谈到评论时，这很奇怪，因为 3 秒后，在 textarea 中输入的评论由于此加载功能，用户会消失。我喜欢这个功能，但我认为它不适合这类工作。所以，我需要一个简单的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:19:38.083

最近我发现了这个插件：[https](https://github.com/paulirish/jquery-idletimer) ://github.com/paulirish/jquery-idletimer来检测用户何时空闲，也许您可​​以根据此更新您的信息。

# java - 单击JButton时更改标签的文本java

> ID：12770840
> 
> 赞同：1
> 
> 时间：2012-10-07T16:54:35.760
> 
> 标签：java, arrays, swing, jlabel

单击 Jbutton 时，我尝试更改 JLabel 上的文本，但我无法弄清楚为什么单击按钮时它会将文本变为空。我正在尝试从数据库中检索数据。

这是我的标签

```
labelDisplay = new JLabel[7];

for(int z = 0; z<7; z++){
    labelDisplay[z] = new JLabel("d");
    labelDisplay[z].setForeground(new Color(230,230,230));
    if( z%2==0)
        labelDisplay[z].setBounds(130,65,160,25);
    else
        labelDisplay[z].setBounds(130,30,160,25);
} 
```

我确定我的检索日期课程正在工作，我对其进行了测试。这是我的actionListener：

```
 public class ButtonHandler implements ActionListener
        {
            public void actionPerformed(ActionEvent e)
            {
                if(e.getSource() == extendB)
                {
                    ExtensionForm extend = new ExtensionForm();
                    extend.setVisible(true);
                }
                else if(e.getSource()== searchB)
                {
                    //get text from the textField
                    String guest = guestIDTF.getText();
                    //parse the string to integer for retrieving of date
                    int id = Integer.parseInt(guest);
                    GuestsInfo guestInfo = new GuestsInfo(id);
                    Room roomInfo = new Room(id);
                    searchB.setText(""+id);
                    System.out.println(""+guestInfo.getFirstName());
                    labelDisplay[1].setText(""+id);
                    String labels[] = {guestInfo.getFirstName()+" "+guestInfo.getLastName(),
                            ""+roomInfo.getRoomNo(),roomInfo.getRoomType(),guestInfo.getTime(),"11:00",
                            ""+guestInfo.getDeposit(),"30"};
                    labels = new String[7];
                    for(int z = 0; z<labels.length; z++){
                        labelDisplay[z].setText(labels[z]);
                    }

                }
        }
    } 
```

我确实为标签文本设置了一个初始值，正如您从我的代码中看到的那样，它是字母“d”，但是当我单击按钮时它变为空。那里的访问器方法确实有效，这就是为什么我怀疑错误来自我的动作监听器。请帮帮我

我编辑构造函数，它应该是 id 而不是 1。

这是按钮的 actionListener 的代码

```
ButtonHandler bh = new ButtonHandler();
searchB = new JButton("search");
searchB.setBounds(190,30,75,25);
searchB.addActionListener(bh); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T16:58:50.827

```
 labelDisplay[1].setText(""+id);

 String labels[] = {guestInfo.getFirstName()+" "+guestInfo.getLastName(),
      ""+roomInfo.getRoomNo(),roomInfo.getRoomType(), guestInfo.getTime(),
      "11:00", ""+guestInfo.getDeposit(),"30"};

 labels = new String[7];

 for(int z = 0; z<labels.length; z++){
      labelDisplay[z].setText(labels[z]);
 } 
```

您永远不会将标签设置为有效的东西。消除`labels = new String[7];`

应该检查代码很好抱歉！

# php - 在 PHP 中使用 DOM 从文档中检索一行 HTML

> ID：12770842
> 
> 赞同：0
> 
> 时间：2012-10-07T16:54:47.523
> 
> 标签：php, dom

> **可能重复：**
> [获取 A 元素的 href 属性](https://stackoverflow.com/questions/3820666/grabbing-the-href-attribute-of-an-a-element)

我目前正在尝试为特定元素解析网页，该元素将采用以下格式：

```
<div id="main-id">
    <div id="sub-id-1" onclick="some onclick"> 
    <span class="big-class" style="some style">
    </span>
    <div id="sub-id-2">&#160;</div>
</div> 
```

我试图从中提取的主要部分是整个`<span class="big-class" style="some style">`标签，因为我需要从元素中提取样式并将其存储到字符串中。为此，我尝试使用以下代码：

```
$dom = new DOMDocument();
$dom->validateOnParse = true;
$dom->loadHTML($html);

$belement = $dom->getElementById("main-id");
echo $belement->nodeValue; 
```

但是，这只是返回字符`Â`，这是字符代码`&#160`的用途。

我不确定要搜索什么才能完成此操作，我什至不确定是否使用 DOM 拉动整个 HTML 行（？）。有什么办法可以使用 DOM 来返回这个 span 元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:04:00.837

`nodeValue`将为您的标签返回 innerHTML。因此，在这种情况下，它正确地返回`Â`. 您可以检查[PHP Xpath ：获取所有包含 needle 的 href 值](https://stackoverflow.com/questions/2392393/php-xpath-get-all-href-values-that-contain-needle/2392438#2392438)以进行类似讨论。你可以这样做：

```
$html = <<< HTML
<div id="main-id">
    <div id="sub-id-1" onclick="some onclick"> 
    <span class="big-class" style="some style">
    </span>
    <div id="sub-id-2">&#160;</div>
</div>
HTML;

$xml  = simplexml_load_string($html);
$span_elem = $xml->xpath('//span[@class="big-class"]'); 
```

# php - $.ajax 成功 - 如果总是返回 false

> ID：12770843
> 
> 赞同：0
> 
> 时间：2012-10-07T16:55:06.883
> 
> 标签：php, jquery, ajax

我在`$.ajax`这里的通话中有一个奇怪的错误：

```
//CHECK USERNAME
$('#username').focusout(function() {
    var id = $(this).attr('id');
    var username = ($(this).val());
    $(this).removeClass('hint').removeClass('hint_validated');
    if (!$(this).val() || !regexUser($(this).val())){
        //INVALID
        $('#'+id+'_hint').hide().addClass('hint').show().html(usernameInvalid);
    }else{
        //VALID -> CHECK USERNAME FROM DB IF CONFIG = TRUE
        if (checkUsername == true){
            //LOADING FROM DB
            $('#'+id+'_hint').hide().addClass('hint_check').show().html(usernameCheck);
            $.ajax({
                cache: false,
                type: 'POST',
                url: 'classes/ajax_check.php', //all that does currently is echo "USERNAMEVALID"
                data: {username: username},
                success: function(response){
                    if (response == "USERNAMEVALID") {
                        $('#'+id+'_hint').hide().removeClass('hint_check').addClass('hint_validated').show().html(usernameValid);
                    }else{
                        alert("ERROR");
                    };                      
                },
                error: function(){
                    $('#'+id+'_hint').hide().removeClass('hint_check').addClass('hint').show().html(usernameError);
                }
            });
        }else{
            $('#'+id+'_hint').hide().addClass('hint_validated').show().html(usernameValid);
        }
    }
}); 
```

成功函数被调用，但 IF 子句总是抛出 FALSE。为什么？

如果成功功能只是`alert (response);`它实际上会发出警报`USERNAMEVALID`

我以前使用过这些功能，但在这里找不到错误...感谢您的阅读，感谢您的帮助。

欢呼

Primus

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T16:59:44.587

检查空行。看到有区别：

```
alert("Hi\n");
alert("Hi"); 
```

你看到的一样，但事实并非如此。尝试这个：

```
alert(encodeURI("Hi\n"));
alert(encodeURI("Hi")); 
```

在哪里，它以这种方式发出警报：

```
Hi%0A
Hi 
```

PS：如果您使用的是IE以外的其他浏览器，请`console.log()`使用`alert()`. 这样您就可以检查正在打印的内容和未打印的内容！

### 小提琴：http: [//jsfiddle.net/XaT6S/](http://jsfiddle.net/XaT6S/)

# c++ - 使用递归的中序和前序遍历 - 二叉搜索树 C++

> ID：12770845
> 
> 赞同：1
> 
> 时间：2012-10-07T16:55:10.407
> 
> 标签：c++, binary-search-tree, tree-traversal

所以我需要使用递归实现二叉搜索树的成员函数、前序和中序遍历。我在实现这三个方面都遇到了麻烦，因为它们的输出错误。遍历应该将它遇到的数据值添加到给定的链表中。

我的成员函数只打印出树的正确节点。我附上了我的代码，如果有人能给我一些关于错误所在的位置以及为什么输出没有打印出它应该是的内容的指示，那就太棒了。提前致谢！！！

**我目前得到的输出：**

```
size of test BinaryTree: 11  
member true for 8  
member true for 38  
member true for 39  
member true for 45  
pre order: [8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 38, 38, 38, 38, 38, 38, 38, 38, 39, 39, 45, 45]  
in order: [8, 8, 8, 8, 38, 38, 38] 
```

**我想要的输出：**

```
size of test BinaryTree: 11  
member true for 1  
member true for 3  
member true for 4  
member true for 7  
member true for 8  
member true for 16  
member true for 31  
member true for 33  
member true for 38  
member true for 39  
member true for 45  
pre order: [8, 4, 3, 1, 7, 38, 31, 16, 33, 39, 45]  
in order: [1, 3, 4, 7, 8, 16, 31, 33, 38, 39, 45] 
```

我的代码：

```
bool BinaryTreeNode::member(Data * newData) {
   if (newData->compareTo(this->nodeData) == 0) {
           return true;
    }
   else if (newData->compareTo(this->nodeData) == -1) {
         if (left == NULL)
             return false;
        else
             return left->member(newData);
}
   else if (newData->compareTo(this->nodeData) == 1) {
        if (right == NULL)
           return false;
        else
           return right->member(newData);
}
return false;
    }        

    void BinaryTreeNode::preorderTraversal(LinkedList * result) const {
    result->insert(nodeData);
        if (left != NULL) left->preorderTraversal(result);
    result->insert(nodeData);
    if (right != NULL) right->preorderTraversal(result);
        }

    void BinaryTreeNode::inorderTraversal(LinkedList * result) const {
    if (left != NULL) {
         left->inorderTraversal(result);
         result->insert(nodeData);
    }
    if (right != NULL) {
         right->inorderTraversal(result);
    }
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T17:16:56.563

预购：

```
do stuff with the node // pre means before
recurse left
recurse right 
```

为了：

```
recurse left
do stuff with the node // in means inside
recurse right 
```

后购：

```
recurse left
recurse right
do stuff with the node // post means after 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T17:16:19.967

好吧，如果存在左子树，您的 inorder 只会将实际的节点数据插入结果中。数据插入应该是无条件的：

```
if (left != NULL) left->inorderTraversal(result);
result->insert(nodeData);
if (right != NULL) right->inorderTraversal(result); 
```

您的预购会插入数据两次，但其他方面看起来还不错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T08:39:22.077

```
#include<conio.h>
#include<iostream>
using namespace std;
  struct node
  {
         int data;
         node *left,*right;       
  };
         void add(node **root)
         {
              node *temp,*save,*r;
              temp=*root;
              int num;
              cout<<"Enter node in BST\t";
              cin>>num;
              if(*root==NULL)
              {
                            cout<<"Root:"<<num<<"\n";
                            temp=new node;
                            temp->data=num;
                            temp->left=NULL;
                            temp->right=NULL;
                            *root=temp;              
              }
              else
              {
                            temp=*root;
                            while(temp!=NULL)
                            {
                                   if(temp->data>num)
                                   {
                                          save=temp;
                                          temp=temp->left;                 
                                   }                 
                                   else
                                   {
                                          save=temp;
                                          temp=temp->right;    
                                   }
                            }    
                            if(save->data>num)
                            {
                                   r=new node;
                                   r->data=num;
                                   r->left=NULL;
                                   r->right=NULL;
                                   save->left=r;
                                   temp=r;                  
                            }
                            else
                            {
                                   r=new node;
                                   r->data=num;
                                   r->left=NULL;
                                   r->right=NULL;
                                   save->right=r;
                                   temp=r;    
                            }
              }
         }
         void pre(node **root)
         {
              node *temp,*save;
              node *stack[100],*r;
              int top;
              temp=*root;
              if(*root==NULL)
              {
                           cout<<"=> No node in BST\n\n";
                           return;             
              }
              else
              {
                  while(temp!=NULL)
                  {
                       cout<<temp->data<<"\n";
                       if(temp->right!=NULL)
                       {
                              stack[++top]=temp->right;           
                       }    
                     if(temp->left!=NULL)
                     {
                             temp=temp->left;        
                     }
                     else
                     {
                             temp=stack[top];
                             top--;
                             delete stack;    
                     }
                  }
              }
         }
         //Below all is using recursion
int preorder(node *root)
{
if(root==NULL)
{
              return 0;               
}
 cout<<root->data<<"\n";
 preorder(root->left);
 preorder(root->right);
}
int inorder(node *root)
{
if(root==NULL)
{
              return 0;               
}
 inorder(root->left);
 cout<<root->data<<"\n";
 inorder(root->right);
}
int postorder(node *root)
{
if(root==NULL)
{
              return 0;               
}
 postorder(root->left);
 postorder(root->right);
  cout<<root->data<<"\n";
}
int main()
{
int n;
node *p=NULL;
cout<<"Binary search tree\n";
while(n!=6)
{
        cout<<"Select: 1.Insert node in BST\n\t2.Pre-order traversal\n\t3.Pre-order    \n\t4.Inorder\n\t5.Postorder\n\t6.Exit\t";
        cin>>n;
        switch(n)
        {
                 case 1:add(&p);break;
                 case 2:pre(&p);break;
                 case 3:preorder(p);break;
                 case 4:inorder(p);break;
                 case 5:postorder(p);break;
                 case 6:cout<<"Program ends\n";break;
                 default:printf("=> Wrong option selected,Try again\n \n");break;         
        }        
}
getch();
return 0;     
} 
```

# objective-c - 为什么 iOS 不通知我的应用程序有关音频会话中断的信息？

> ID：12770846
> 
> 赞同：2
> 
> 时间：2012-10-07T16:55:32.070
> 
> 标签：objective-c, ios, avaudiosession

*我正在使用 AVPlayer 播放来自不同来源（包括 iPod 音乐库）的声音。由于 AVPlayer 是更底层的 AVAudioPlayer，我必须自己处理中断。使用 AVAudioPlayer 不是一种选择！*

在 Apple 开发人员文档中，他们提到`AVAudioSessionInterruptionNotification`使用`AudioSessionInitialize`. 但这样做时，我**只在中断结束时收到通知**，但由于[他们的文件](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Cookbook/Cookbook.html#//apple_ref/doc/uid/TP40007875-CH6-SW7)，我的应用程序**应该能够同时处理两者**。

我正在使用以下代码来初始化我的音频会话：（简化版，删除了不重要的行）

```
AudioSessionInitialize(NULL, NULL, ARInterruptionListenerCallback, nil);
UInt32 sessionCategory = kAudioSessionCategory_MediaPlayback;
AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(sessionCategory), &sessionCategory);
AudioSessionSetActive(true); 
```

下面是监听器的样子：

```
void ARInterruptionListenerCallback(void *inUserData, UInt32 interruptionState) {
    if (interruptionState == kAudioSessionBeginInterruption) {
        // Here is the code which is never called...
    }
    else if (interruptionState == kAudioSessionEndInterruption) {
        // But this case will be executed!
    }
} 
```

顺便提一句。我期待当有电话或类似的中断时执行此代码。我是否误解了 Apple 所说的中断？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T10:14:19.900

iOS 6 中有一个错误。似乎从未为开始中断调用中断代码 - 这包括旧的弃用方法（使用 AVAudioSession 委托）和新的通知方法。

我自己和其他一些人已经向 Apple 提出了一个高度严重的错误请求，所以我建议你也这样做 ( [bugreport.apple.com](http://bugreport.apple.com) ) 以引起他们的注意。

我不确定您使用中断的目的是什么，但我正在使用它来允许音频在必要时在中断后恢复，并更新界面中的播放/暂停按钮。我不得不改变我的方法来观看 AVPlayer 速率属性来切换播放/暂停按钮，并且不允许音频在中断后恢复。

**编辑：**看到[这个线程](https://stackoverflow.com/questions/11676836/avaudiosessiondelegate-called-at-endinterruption-but-begininterruption-not-call/12736557#12736557)

# delphi - 系统调用级别不正确

> ID：12770847
> 
> 赞同：0
> 
> 时间：2012-10-07T16:55:40.183
> 
> 标签：delphi, winapi, shfileoperation

我正在使用 SHFileOperation 将文件删除到回收站。但有时我收到“系统调用级别不正确”错误。它不是每次或每个文件都发生。只是随机时间的一些随机文件。有人知道原因吗？谢谢。

**更新**：这是我正在使用的代码：

```
function DeleteToRecycleBin(const ADir : WideString) : Integer;
var
  op : SHFILEOPSTRUCTW;
begin
  ZeroMemory(@op, sizeof(op));
  op.pFrom := PWideChar(ADir + #0#0);
  op.wFunc := FO_DELETE;
  op.fFlags := FOF_SILENT or FOF_NOCONFIRMATION or FOF_NOERRORUI or FOF_ALLOWUNDO;
  Result := SHFileOperationW(op); 
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T17:23:46.223

您收到错误代码 124 (0x7C)。Win32 错误代码 124 是`ERROR_INVALID_LEVEL`. 但是，如果您阅读[的文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762164.aspx)，`SHFileOperation()`它的一些错误代码早于 Win32，因此与相同的 Win32 错误代码具有不同的含义。错误代码 124 是这些值之一。在 的上下文中`SHFileOperation()`，错误 124 实际上意味着：

> DE_INVALIDFILES 0x7C
> 
> 源或目标或两者中的路径无效。

**更新**：试试这个：

```
function DeleteToRecycleBin(const ADir : WideString) : Integer;
var
  op : SHFILEOPSTRUCTW;
  sFrom: WideString;
begin
  // +1 to copy the source string's null terminator.
  // the resulting string will have its own null
  // terminator, effectively creating a double
  // null terminated string...
  SetString(sFrom, PWideChar(ADir), Length(ADir)+1);

  ZeroMemory(@op, sizeof(op));
  op.pFrom := PWideChar(sFrom);
  op.wFunc := FO_DELETE;
  op.fFlags := FOF_SILENT or FOF_NOCONFIRMATION or FOF_NOERRORUI or FOF_ALLOWUNDO;

  Result := SHFileOperationW(op); 
end; 
```

# jquery - 使用 JQuery 自动滚动到窗口部分的用户界面

> ID：12770858
> 
> 赞同：-1
> 
> 时间：2012-10-07T16:57:20.677
> 
> 标签：jquery, scroll

我创建了一个非常适合 Android Tab 2 屏幕的 HTML 5 应用程序页面。每个部分都是视口的大小。它从上到下滚动，共有 5 个部分。

如果用户发现自己位于两个部分之间，我想使用 Jquery 让浏览器自动滚动到该部分的顶部。

我在这里看到了一个我想做的例子：http: [//www.twenty8twelve.com/](http://www.twenty8twelve.com/)

看看如果你在一个部分中向下 30 个像素（或其他），一秒钟后，该区域（部分）如何动画到该部分的顶部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:09:46.433

他们正在使用一些自定义的 jScroll mojo 来完成效果。我建议使用像这样的简单插件来模拟这种行为。

效果示例：http: [//nick-jonas.github.com/windows/](http://nick-jonas.github.com/windows/)

github 仓库：[https ://github.com/nick-jonas/nick-jonas.github.com/tree/master/windows](https://github.com/nick-jonas/nick-jonas.github.com/tree/master/windows)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-27T17:21:02.163

您可以使用我创建的 fullpage.js 库来执行此操作，该库使用`autoScrolling:false`创建普通滚动而不是自动滚动的选项。

[在线示例](http://alvarotrigo.com/fullPage/examples/normalScroll.html)

默认情况下 fullpage.js 使用`fitToSection:true`将创建您正在寻找的效果的选项。

此外，您将能够使用一些其他功能，例如在 URL 中使用可链接的锚点、回调、菜单、导航项目符号等。

# ruby-on-rails-3 - 使用 id 以外的字段进行 Rails 路由

> ID：12770859
> 
> 赞同：1
> 
> 时间：2012-10-07T16:57:36.667
> 
> 标签：ruby-on-rails-3, rails-routing

我想使用类似于来自 bit.ly 的短 url 的短 url。目前`resources :clips`，我不想在路线中访问 c​​lips/:id，而是想从 Clips 模型上的 url_hash 字段访问它。我是否必须手动列出执行此操作的路线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T17:20:55.643

我会使用 slugged gem：

[https://github.com/Sutto/slugged](https://github.com/Sutto/slugged)

或（更流行）：friendly_id

[https://github.com/norman/friendly_id](https://github.com/norman/friendly_id)

# javascript - location.href 更改的通用加载动画

> ID：12770864
> 
> 赞同：0
> 
> 时间：2012-10-07T16:58:38.347
> 
> 标签：javascript, ajax, animation, hook, loading

我们在 iFrame 中显示的客户网站非常慢（约 7 秒）。我们只能提供客户将包含的 JavaScript 文件，但他不会做更多的事情。

我是否可以挂钩所有事件（提交的表单、单击的链接）并显示一个漂亮的加载动画，直到页面完全加载？

或者我可以普遍 ajax-ify 他的网站吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:40:08.093

一旦您的页面被卸载并且另一个页面开始加载，来自原始页面的代码不再可用或正在运行，因此它无法执行任何操作，并且原始页面中的内容已被清除，因此无法显示任何内容.

在同样的情况下，下一页正在加载，它的代码还没有运行。

因此，您不能使用普通页面 javascript 在整个加载新页面的过程中运行某些内容。要执行此类操作，您要么必须使用在一个框架中显示进度的框架，而在另一个框架中加载内容，或者可能使用浏览器插件。

您可以知道何时通过`beforeunload`事件卸载页面，但是一旦下一页开始加载，分配给该页面的任何代码都将不再运行，并且当前文档将被清除。

# html - 使用标签处理表单的 HTML

> ID：12770865
> 
> 赞同：0
> 
> 时间：2012-10-07T16:58:44.683
> 
> 标签：html

> **可能重复：** [如何最好地使链接提交表单](https://stackoverflow.com/questions/313478/how-best-to-make-a-link-submit-a-form)

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="POST">
....
<a class="button" href=""><span>Buy Now</a>
</form> 
```

在上面的代码中，如何使用`<a>`标签来处理表单？我不想使用提交按钮，因为我的大多数 css 代码只识别该属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T17:00:20.033

您可以使用 javascript 提交表单

```
document.forms["myform"].submit(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T17:00:48.403

像这样使用jquery：

```
<form id="myForm" action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="POST">
....
<a class="button" onclick="$('#myForm').submit();" href="#"><span>Buy Now</a>
</form> 
```

你必须为此包含 jquery

或纯javascript：

```
<form id="myForm" action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="POST">
....
<a class="button" onclick="document.forms["myForm"].submit();" href="#"><span>Buy Now</a>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T16:59:57.110

您可以在 JavaScript 的帮助下触发提交。

```
document.getelementById("btn_submit_link").onclick = function () {
     document.forms["name-of-form"].submit();
} 
```

请注意，链接应该有一个`id`属性，在这种情况下是`btn_submit_link`.

# php - Jquery：从 iframe 加载上传结果

> ID：12770868
> 
> 赞同：0
> 
> 时间：2012-10-07T16:59:07.350
> 
> 标签：php, ajax, jquery, iframe

这是我的表格

**HTML**

```
<div id="contactus">
     <form action="carrer_.php" method="POST" ENCTYPE="multipart/form-data" class="contactUs" id="send_cv" target="carrer_iframe">
        <label> Name
          <input type="text" name="name"  />
        </label>

        <label> Email
          <input type="text"  name="email" />
        </label>

        <label> Mobile
          <input type="text" class="mobile" name="mobile" />
        </label>

        <label> Cv
           <input type="file" id="cv" name="file" />
        </label>

        <label> Other Info
          <textarea name="message" cols="1" rows="1"></textarea>
        </label>
        <input type="submit" value="send" />
      </form>
      <div id="iframe_result"></div>
      <iframe name="carrer_iframe" id="carrer_iframe" src="carrer_.php" style="width;0;height:0;display:none;" ></iframe>
    </div> 
```

**JS**

```
 $('#send_cv').submit( function(){
        $("#carrer_iframe").contents().html("") ;
        $("#iframe_result").load(function(){
                alert( 1 ) ;
                response = $("#carrer_iframe").contents().find("body:last").text();
                alert( response ) ;
                $("#iframe_result").html(response).show();
            });
  } ) ; 
```

提交表格后（什么都没发生？？？）

**我如何从隐藏的 iframe 中获取结果并提醒它 && 或者我的错误是什么**

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:58:34.520

似乎没有什么可以阻止表单正常提交。尝试从提交函数传递事件并调用[.preventDefault](http://api.jquery.com/event.preventDefault/)。

```
$('#send_cv').submit( function(event){
        // Preventing the default form submission action
        event.preventDefault();
        $("#carrer_iframe").contents().html("") ;
        $("#iframe_result").load(function(){
                alert( 1 ) ;
                response = $("#carrer_iframe").contents().find("body:last").text();
                alert( response ) ;
                $("#iframe_result").html(response).show();
            });
  } ) ; 
```

**编辑：**

据我所知 .show() 只影响显示属性。因此将 wdith/height 设置为 0 将意味着 iframe 永远不会显示。

# mysql - 从大于 1 的数字向 sql 表中插入一行，并在后续行中递增列的所有内容

> ID：12770869
> 
> 赞同：0
> 
> 时间：2012-10-07T16:59:10.207
> 
> 标签：mysql, sql

我对sql很陌生。我正在使用带有开源 cms 的 mysql db。我想在其中存储所有语言环境名称的区域表中插入一行。我想在位置 3561 处插入一行，并为以下所有行增加 zone id 的值。你能帮我吗？

此外，如果您知道任何可以推荐的好的教程资源，或者是一个不错的在线参考资料（请免费提供 - 我很敏感），那么我将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:53:59.660

谢谢你的帮助。我从 opencart 论坛收到了一个答案，似乎有一个 php 函数可以在管理员中实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T18:20:45.643

你不想这样做。`zone_id`应该是区域表中的 id，除了标识表中的行之外没有其他用途。通常，这些是自动递增的 id，只需将前一个最大的 id 加 1。

您可以插入、删除和修改区域表中的行。id 将始终引用同一行。这有助于确保关系完整性。因此，您可以使用 id 来引用表中的一行，而不是使用其他可能会更新的特性。

如果由于某种原因，您需要输出具有顺序 id 的表中的行，那么在大多数数据库中都有方法可以做到这一点，包括 MySQL。

# c# - 如何使datagridview列固定

> ID：12770870
> 
> 赞同：0
> 
> 时间：2012-10-07T16:59:12.783
> 
> 标签：c#, c#-4.0, datagridview

我是.net 的新手。我会尽力解释问题。正如您在图像中看到的那样，列正在调整我不希望发生的大小。我尝试提供`readonly`财产，但这不起作用。

![在此处输入图像描述](../Images/142f59a7ab9fd565fface38ff2fca9a3.png)

**我不希望这发生**

![在此处输入图像描述](../Images/36328818cce39086492b47e2e0bddb77.png)

还请提供一些建议以防止用户更改列宽。

好吧，这可能是一个非常小的问题。

请帮助
提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T17:08:46.390

有一整套属性可以准确地调节这一点。

在代码中：

```
dataGridView1.AllowUserToResizeColumns = false;

dataGridView1.Columns[0].AutoSizeMode = DataGridViewAutoSizeColumnMode.None; 
```

您也可以在“属性”窗口中找到它们。注意`Columns (Collection) [...]`项目。

# html - 对齐表格行中的图像和文本

> ID：12770873
> 
> 赞同：0
> 
> 时间：2012-10-07T16:59:27.087
> 
> 标签：html, css, html-table, alignment, vertical-alignment

我有一张这样的桌子：

```
<table>
<tbody>
<tr>
<td valign="middle;"><img src="icon.jpg" style="vertical-align: middle;" />title</td>
<td valign="middle;">detail</td>
</tr>
</tbody>
</table> 
```

我希望图像、标题和细节连续对齐，所以我将 valign 应用于 3 个元素。但它不能很好地工作，因为图像只能与标题对齐，而图像+标题不能与细节对齐。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:03:11.773

从属性`;`值中删除`valign`

# php - 为 capthca 创建一个不可读的 PHP 页面

> ID：12770875
> 
> 赞同：1
> 
> 时间：2012-10-07T16:59:40.597
> 
> 标签：php, javascript, security, .htaccess, captcha

我正在为我的注册表单使用酷验证码。这是我在代码中使用的验证码生成的图片代码：

```
<img src="captcha.php" id="captcha" /> 
```

任何人都可以直接进入“captcha.php”页面查看图片。所以我的问题是，无论如何要禁用在浏览器中直接访问或直接查看 Captcha.php 吗？我只希望 Captcha.php 只能用于查看 img 源内部，而不是浏览器直接查看。在 php 或 htaccess 文件中有什么可做的吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:11:54.227

没有有效的方法来阻止这种情况，因为有解决方案甚至可以在图像中呈现 URL。在这种情况下，即使您努力阻止验证码，使用渲染的 URL 图像（例如在 Linux 上保存缓冲区 xvfb）也足以让验证码使用 X、Y 坐标切割此图像。顺便说一句......另一种解决方案，如验证引用者或ajax请求，可以使用[https://addons.mozilla.org/en-US/firefox/addon/hackbar/等工具绕过](https://addons.mozilla.org/en-US/firefox/addon/hackbar/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T17:12:15.223

您当然可以`.htaccess`以与防止图像盗链相同的方式 使用

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} !^$   
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?yourdomain.com [NC]
RewriteRule ^hellothere/captcha\.php$ - [NC,F,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T17:26:58.837

要停止对任何 PHP 脚本的直接访问，**请在脚本顶部添加此行**

```
if (!defined('BASEPATH')) exit('No direct script access allowed'); 
```

允许 AJAX 请求：

```
if (!defined('BASEPATH') &&
strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) != 'xmlhttprequest')
exit('No direct acess allowed...'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T12:42:07.840

据我了解，答案是否定的；至少不是以任何安全的方式。对于服务器来说，调用页面的浏览器几乎没有任何区别，因为它是`src`您的`<img>`标签，或者只是有人在浏览器中输入了 url。

我也不确定你想避免什么样的问题。有人在没有页面的情况下看到您的验证码有什么问题（如果他们真的想......）。

一些想法是让它更难看到它不是形式：

*   检查 HTTP_REFERER。请注意，一些病毒扫描程序和 Internet 安全程序包也会杀死 HTTP_REFERER 标头，因此这些人将永远无法看到您的验证码。
*   检查顶部 op captcha.php 中的某些 URL 参数（例如，仅当它是 captcha.php?secret=123456789 时才允许访问）。在您的 form.php 页面中，您知道秘密，其他人不会（理论上）。您可以随时间更改密码：( `$secret = md5($salt . strftime("%Y%m%d%H%M"));`)，然后在 captcha.php 中检查密码是本分钟还是最后一分钟的密码 ( `$now = time(); $_REQUEST["secret"] == strftime("%Y%m%d%H%M", $now) || $_REQUEST["secret"] == strftime("%Y%m%d%H%M", $now - 60)`)
*   在 form.php 的每个请求上生成一个新的随机秘密，并在 captcha.php 中检查它（一旦生成秘密，您将需要 memcached（或类似的）来存储秘密，然后在使用后将其删除）。
*   执行 form.php 时，设置`$SESSION["captcha_ok"] = 1;`和在 captcha.php 中执行`if (!$SESSION["captcha_ok"]) {show_error();} else {$SESSION["captcha_ok"]=0; etc....`

但是再一次，这些方法实际上都不会真正阻止那些真正想要在没有表单的情况下查看您的验证码的人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-02T07:24:35.927

```
<html>
<head>

</head>
<body>
<?php
session_start();
$no=rand(0,567890);
$_SESSION['imgno']=$no;
?>
<img src="load.php?sc=<?php echo $no; ?>" width="300px" height="300px" />
</body>
</html> 
```

**加载.php**

```
<?php
session_start();
header('Content-Type: image/jpeg');
if(isset($_SESSION['imgno']))
{

    readfile("student1.jpg");
    unset($_SESSION['imgno']);
}
else
{
    readfile("thumbs.gif");
}

?> 
```

# assembly - 我的堆栈没有返回影响计算的正确值

> ID：12770882
> 
> 赞同：0
> 
> 时间：2012-10-07T17:00:01.510
> 
> 标签：assembly

我目前正在编写一个汇编程序来递归计算数字的阶乘。通过调试器，我看到了发生了什么。所以例如3阶乘。

```
public  f              ; make sure function name is exported
f:
  push    ebp          ; push frame pointer
  mov     ebp, esp     ; update ebp
  push    edi
  mov     ecx, [ebp+8] ; gettting my parameter at p0
  mov     edi, ecx     ; making a copy
  cmp     edi, 1       ; check if n is greater than 0
  jle     finished
  dec     ecx          ; subtrack 1 frm parameter
  push    ecx          ; passing new value of n to parameter p0
  mov     eax, 0
  call    f
  mul     edi          ; multiplying n * n-1
  jmp     finished2

finished:   
  mov    eax, 1
finished2:  
  pop    edi
  mov    esp, ebp
  pop    ebp
  ret 
```

所以可以说我有 3 作为我的输入，我应该有类似的东西

```
eax * 3(ecx)
eax * 2(ecx) 
```

但我注意到在击中基本情况后返回的路上.. 值 2 放置在正确的位置，但值 3 永远不会进入正确的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:35:20.243

使用调试器时，我会使用 info reg（在 gdb 下）来确保寄存器是否具有正确的值

```
_开始：
推 4 美元，
人口 %ebx

调用 f

F：
        movl %esp,%ebp
        movl 8(%ebp), %eax
        cmpl $1, %eax  
        完成
        decl %eax      
        pushl %eax    
        调用阶乘  
        人口 %ebx                   
        包括%ebx
        imul %ebx, %eax
结束：
movl %ebp, %esp
流行 %ebp
ret

```

# sql - 在 ms-access 中计算值的总和

> ID：12770883
> 
> 赞同：-3
> 
> 时间：2012-10-07T17:00:09.440
> 
> 标签：sql, database, vba, ms-access

我创建了一个查询来计算表中所有利润值的总和，我试图将其输出到数据库主窗体上的文本框，我只是错误#NAME？。

有没有人尝试过这个，我有什么重要的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T17:13:56.490

我们需要查看一些代码/设计细节以了解您的文本框为何会出现该`#Name`错误。

如果没有这些细节，我只建议您考虑使用`DSum()`表达式而不是查询来加载文本框。And`DSum()`有点像`SELECT`查询，但只返回一个值而不是结果集。

```
DSum("YourNumericField", "YourTable") 
```

检查 Dsum 联机帮助主题以获取更多详细信息。如果您只想对表中的一部分行求和，您可能会发现可选的*Criteria*参数很有用（如`WHERE`语句中的子句）。`SELECT`

```
DSum("YourNumericField", "YourTable", "account_status = 'ACTIVE'") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T03:51:01.590

如果您有创建查询来计算称为“querySum”的总和。在表单属性表上，确保**选择类型**更改为 FORM，转到**Data**并选择“querySum”作为**记录源**。

然后，单击文本框，转到属性表并选择**Data > Control Source**。因此，您可以从查询到文本框中选择列。

否则，如果您想使用 VBA。你可以这样做

```
DSum("NumericField", "YourTable") 
```

或有条件

```
DSum("NumericField", "YourTable", "type = 'Payment'") 
```

# iphone - 在 iPad 上使用 iPhone 应用程序的 UIGetScreenImage

> ID：12770887
> 
> 赞同：2
> 
> 时间：2012-10-07T17:00:30.603
> 
> 标签：iphone, ipad, screenshot, compatibility

我的应用程序使用 UIGetscreenImage () 方法截取屏幕截图，使用 iPhone 模拟器或 iPhone 可以正常工作。

现在我想在我的 iPad 上使用我的应用程序，它也是针对 iPhone 的。这样做，屏幕截图将只出现在 iPad 显示屏的右上角，大小与 iPhone 显示屏相当。

将应用程序目标更改为 iPad 可以解决问题，但会破坏整个 UI，因此这是一个相当糟糕的解决方案。

你知道解决问题的其他方法吗？

使用 UIGetScreenImage 方法没有问题，因为它不是针对 AppStore 的，而且我喜欢屏幕截图中包含的状态栏的优势。但如果他们没有其他方法可以修复它，我也可以使用另一种方法来制作屏幕截图。

谢谢你的帮助:)

# objective-c - cocos2d的HUD教程

> ID：12770890
> 
> 赞同：0
> 
> 时间：2012-10-07T17:01:10.737
> 
> 标签：objective-c, xcode, cocos2d-iphone

我试过按照本教程（http://www.raywenderlich.com/4666/how-to-create-a-hud-layer-with-cocos2d）但是你可能会说我没有使用本教程与他们相同，但设置几乎相同。我相信我已经一步一步地遵循了它。但是我得到了错误（箭头显示的位置：<----）'未知类型名称'settingsMenu''和'预期类型'分别：

主菜单.h：

```
//  mainMenu.h

#import <Foundation/Foundation.h>
#import "cocos2d.h"
#import "Constants.h"
#import "SceneManager.h"
#import "settingsMenu.h"

@interface mainMenu : CCLayer {  
    settingsMenu * _settings; <----
}

@property (nonatomic, assign) BOOL iPad;

+ (id)scene;
- (id)initWithsettingsMenu:(settingsMenu *)settings; <----

@end 
```

主菜单.m：

```
//  mainMenu.m

#import "mainMenu.h"  
#import "gameData.h"
#import "gameDataParser.h"
#import "SimpleAudioEngine.h"
#import "settingsMenu.h"

@implementation mainMenu

@synthesize iPad;

+ (id)scene {
    CCScene *scene = [CCScene node];
    settingsMenu *settings = [settingsMenu node];
    [scene addChild:settings z:1];
     mainMenu *menuLayer = [[[mainMenu alloc] initWithsettingsMenu:settings] autorelease];
     [scene addChild:menuLayer];

    return scene;
} 
```

设置菜单.h：

```
//  settingsMenu.h

#import <Foundation/Foundation.h>
#import "cocos2d.h"
#import "Constants.h"
#import "SceneManager.h"

@interface settingsMenu: CCLayer {
    CCMenuItem *_musicOn;
    CCMenuItem *_musicOff;
    CCMenuItem *_invertControlsOn;
    CCMenuItem *_invertControlsOff;
}

@property (nonatomic, assign) BOOL iPad;
@property (nonatomic, assign) BOOL settings;

@end 
```

设置菜单.m：

```
//  settingsMenu.m

#import "settingsMenu.h"
#import "gameData.h"
#import "gameDataParser.h"
#import "SimpleAudioEngine.h"
#import "mainMenu.h"

@implementation settingsMenu

- (id)init{
    if( (self=[super init])) {

        // Determine Screen Size
        CGSize screenSize = [CCDirector sharedDirector].winSize;

        self.iPad = UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad;

        if (self.iPad){
            CCSprite *background = [CCSprite spriteWithFile:@"settingsiPad.png"];
            background.position = ccp(screenSize.width/2, screenSize.height/2);
            [self addChild:background];
        }

        else if (screenSize.height > 490){
            CCSprite *background = [CCSprite spriteWithFile:@"settingsiPhoneFive.png"];
            background.position = ccp(screenSize.width/2, screenSize.height/2);
            [self addChild:background];
        }

        else{
             CCSprite *background = [CCSprite spriteWithFile:@"settingsiPhone.png"];
             background.position = ccp(screenSize.width/2, screenSize.height/2);
            [self addChild:background];
        }
     [self addButtons];

    }
    return self;
} 
```

谢谢你的时间！我认为没有必要发布更多代码，但如果还有其他可能导致此问题的地方，请告诉我，我会发布代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:28:24.063

gameLayer .h：（我去掉了大部分不必要的东西）

```
//  GameLayer.h

#import <Foundation/Foundation.h>
#import "cocos2d.h"

@interface GameLayer : CCLayer {
    CCLayer *HudLayer;
}
@property (nonatomic, retain) CCLayer *HudLayer;

+(id)scene;
@end 
```

然后在 .m 你

```
@synthesize HudLayer; 
```

然后在`init`,

```
//HUD Layer setup

        HudLayer = [[[CCLayer alloc] init] autorelease];
        [self addChild:HudLayer];
             //add stuff in the HUD here...

        CCMenuItem *Mainmenu = [[[CCMenuItemFont itemWithString:@"Main Menu" target:self selector:@selector(MainMenu:)] retain]autorelease];

        Mainmenu.position = ccp(size.width /2-Mainmenu.rect.size.width,size.height /2-Mainmenu.rect.size.height);
        CCMenu *Hudmenu = [CCMenu menuWithItems: Mainmenu, nil];
        [HudLayer addChild:Hudmenu];
    //End HUD Layer setup 
```

# python - 这个 python (django) 行中的“r”是什么意思？

> ID：12770897
> 
> 赞同：2
> 
> 时间：2012-10-07T17:02:16.547
> 
> 标签：python, django

> **可能重复：**
> [在 Python 中，字符串文字前面带有“r”是什么意思？](https://stackoverflow.com/questions/4780088/in-python-what-does-preceding-a-string-literal-with-r-mean)

我正在阅读 DjangoProject.com 网站上的 Django 教程。我来到了需要通过修改 urls.py 文件来配置 url 路由的部分。

这是我的问题；下面行中第一个字符串参数中的`r`before 是什么意思？`'^admin/'`

```
urlpatterns = patterns('',
    url(r'^admin/', include(admin.site.urls)),
) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T17:02:38.770

它是一个[原始的 python 字符串文字](http://docs.python.org/reference/lexical_analysis.html#string-literals)；`\n`不解释任何或其他字符转义。

由于您经常在正则表达式中使用反斜杠（它们有自己的含义），因此通常的做法是使用原始字符串文字来定义此类表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T17:03:23.873

这意味着将此字符串视为文字。通常你会看到像'\'这样的字符需要转义，使用'r'可以防止需要显式写入。

# php - javascript错误控制台说xml不能是整个程序

> ID：12770900
> 
> 赞同：0
> 
> 时间：2012-10-07T17:02:39.520
> 
> 标签：php, html, mysql

萤火虫在代码末尾指向“？>”并说 XML 不能是整个程序，我搜索了足够多的关于这个错误但都在谈论 js 和 ajax。但我的代码只有 html，我找不到任何错误在这里..

```
<?php 

    $con = mysql_connect('localhost','root','*****');
    if (!$con)
            {
                    die("OOPS!Could not connect to server".mysql_error());
            }
    mysql_select_db('EVENTS',$con) or die('Could not connect'.mysql_error());
            echo "<table>"; 
                    echo "<tr>";
                    echo "<td>"."Time"."</td>" ;
                    $i=0; $j=0;
                    while($i < 7)
                    { $today = mktime(0,0,0,date('d')+$i,date('m'),date('Y'));
                    echo "<td>".date('d/m/Y' , $today)."<br />".date('D',$today)." </td>";
                    $i++;
                    }
                    echo "</tr>";
                    while ($j < 10)
                    {       $i= 0 ; $time = 8+ $j;
                            echo "<tr>";
                            while ( $i < 7)
                            {
                            $today = mktime(0,0,0,date('d')+$i,date('m'),date('Y'));
                            $row1 = mysql_query ("SELECT DESCRIPTION FROM EVENTS WHERE TIME='$time' AND DATE='$today'") or die() ;
                            $row2 = mysql_query ("SELECT NAME FROM EVENTS WHERE TIME='$time' AND DATE='$today'") or die() ;
                            $result1 = mysql_result($row1,$con) or "---";
                            $result2 = mysql_result($row2,$con) or "-";
                            echo "<td>".$result1."BY".$result2."</td>" ;
                            $i++;
                            } echo"</tr>"; $j++;
                    }
            echo "</table>"; mysql_close($con);
     ?> 
```

这是 Quentin 要求的发送到浏览器的代码，似乎没有什么不同。

```
 <?php 

$con = mysql_connect('localhost','root','*****');
if (!$con)
            {
                    die("OOPS!Could not connect to server".mysql_error());
            }
mysql_select_db('EVENTS',$con) or die('Could not connect'.mysql_error());
    echo "<table>"; 
        echo "<tr>";
        echo "<td>"."Time"."</td>" ;
        $i=0; $j=0;
        while($i < 7)
        { $today = mktime(0,0,0,date('d')+i,date('m'),date('Y'));
        echo "<td>".date('d/m/Y' , $today)."<br />".date('D',$today)." </td>";
        i++;
        }
        echo "</tr>";
        while ($j < 10)
        {   $i= 0 ; $time = 8+ $j;
            echo "<tr>"
            while ( $i < 7)
            {
            $today = mktime(0,0,0,date('d')+i,date('m'),date('Y'));
            $row1 = mysql_query ("SELECT DESCRIPTION FROM EVENTS WHERE TIME='$time' AND DATE='$today'") or die() ;
            $row2 = mysql_query ("SELECT NAME FROM EVENTS WHERE TIME='$time' AND DATE='$today'") or die() ;
            $result1 = mysql_result($row1,$con) or "---";
            $result2 = mysql_result($row2,$con) or "-";
            echo "<td>".$result1."BY".$result2."</td>" ;
            i++;
            } echo"</tr>"; j++;
        }
    echo "</table>"; mysql_close($con);
      ?> 
```

在浏览器中打开的 .html 页面显示如下：

"; echo ""; echo ""."时间"."" ; $i=0; $j=0; while($i < 7) { $today = mktime(0,0,0,date('d ')+i,date('m'),date('Y')); echo "".date('d/m/Y' , $today)." “.date('D',$today)。” "; i++; } echo ""; while ($j < 10) { $i= 0 ; $time = 8+ $j; echo "" while ( $i < 7) { $today = mktime(0,0, 0,date('d')+i,date('m'),date('Y')); $row1 = mysql_query ("SELECT DESCRIPTION FROM EVENTS WHERE TIME='$time' AND DATE='$today' ") 或 die() ; $row2 = mysql_query ("SELECT NAME FROM EVENTS WHERE TIME='$time' AND DATE='$today'") 或 die() ; $result1 = mysql_result($row1,$con) 或“---”；$result2 = mysql_result($row2,$con) 或“-”；回显“”。$result1."BY".$result2."" ; 我++；} 回声""; j++; } 回声“”；mysql_close($con); ?>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T17:30:49.390

您正在为客户端提供 PHP，而不是通过服务器上的 PHP 解释器运行它。

您需要确保：

1.  您正在通过服务器访问文件（而不是从本地文件访问它）
2.  服务器已[安装 PHP](http://uk3.php.net/manual/en/install.php)
3.  该文件被服务器识别为应该由 PHP 处理的文件（这通常通过给它一个`.php`文件扩展名来完成）

# python - Python中的Randint错误？

> ID：12770913
> 
> 赞同：0
> 
> 时间：2012-10-07T17:04:41.453
> 
> 标签：python, rsa

我正在编写 RSA 算法的代码作为一个项目。对于熟悉这个加密系统的人来说，下面的函数计算 phi(n) 的值。但是，当我运行它时，会出现此错误：

```
 Traceback (most recent call last):
  File "C:\Python27\RSA.py", line 127, in <module>
    phi_n()
  File "C:\Python27\RSA.py", line 30, in phi_n
    prime_f = prime_list[random.randint(0,length)]
  File "C:\Python27\lib\random.py", line 241, in randint
    return self.randrange(a, b+1)
  File "C:\Python27\lib\random.py", line 217, in randrange
    raise ValueError, "empty range for randrange() (%d,%d, %d)" % (istart, istop, width)
ValueError: empty range for randrange() (0,0, 0) 
```

我不完全理解为什么会出现这个错误。这是我的 phi_n 函数代码：

```
def phi_n():  
    global prime_list
    length = len(prime_list) - 1
    prime_f = prime_list[random.randint(0,length)]
    prime_s = prime_list[random.randint(0,length)]
    global pq
    n = prime_f * prime_s
    global phi_n
    phi_n = (prime_f -1) * (prime_s -1)
    return phi_n 
```

评论将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T17:07:06.693

问题是`prime_list`空的，因此`length`将等于`-1`导致`random.randint(0, -1)`由于明显原因而无效的调用。

# javascript - 如何编写使用 jQuery 的 JavaScript 文件？

> ID：12770915
> 
> 赞同：-2
> 
> 时间：2012-10-07T17:05:02.627
> 
> 标签：javascript, jquery

我是 JavaScript 和 JQuery 的新手。我了解基本的 C++，我喜欢包含头文件并从头文件中运行函数以保持代码整洁。

如果我创建一个新的 JavaScript 文件，我如何确定我可以在那些外部 JavaScript 文件中使用 jQuery？

**编辑：**我有`jquery.js'。 **编辑：**我的问题很糟糕。我花了一段时间才明白我最初的意思。如何将 Jquery 与外部 JavaScript 文件一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T17:09:37.207

第一件事：将`jquery.js`文件移动到您的 HTML 文件所在的同一目录（或您知道相对目录的位置）。

在`<head>`HTML 文件的一部分中，添加以下内容：

```
<script src = "jquery.js" type = "text/javascript"></script> 
```

同样，您可能需要将`src`上面的路径更改为正确的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T17:13:07.610

您需要使用 html 标记从托管源或计算机上某处引用 jquery。看一下脚本标签。我希望它能回答你的问题。您可以访问[http://docs.jquery.com/Tutorials:How_jQuery_Works](http://docs.jquery.com/Tutorials:How_jQuery_Works)获取更多提示

```
 <!DOCTYPE html>
 <html lang="en">
  <head>
  <meta charset="utf-8">
 <title>jQuery demo</title>
 </head>
 <body>
 <a href="http://jquery.com/">jQuery</a>
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
 <script>
  $(document).ready(function(){
   $("a").click(function(event){
     alert("As you can see, the link no longer took you to jquery.com");
     event.preventDefault();
   });
 });
  </script>
  </body>
 </html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T17:14:18.753

您可以在html 页面的标签中包含您`jquery.js`的标签，如下所示：`<head>`

```
<script type="text/javascript" src="js/jquery.js"></script> 
```

我假设`js`是维护 JavaScript 文件的文件夹。

现在您可以在标签内的相同 HTML 中创建自定义函数，如下所示：

```
 <script language="javascript">
      $(function(){
            //your function implementation
          });
      </script> 
```

或者创建一个新的自定义 JS 文件`custom.js`，将您的 JavaScript 函数放在那里并将这个文件也包含在`<head>`as

```
<script type="text/javascript" src="js/custom.js"></script> 
```

我希望这有帮助！

# java - 如何配置 JMeter 以命中本地 ActiveMQ 服务器上的特定队列？

> ID：12770917
> 
> 赞同：2
> 
> 时间：2012-10-07T17:05:36.220
> 
> 标签：java, activemq, jmeter

我有一个特定的基于 XML 的消息格式：

```
<myMessage>
    <!-- A whole bunch of stuff -->
</myMessage> 
```

如何配置 JMeter：

![在此处输入图像描述](../Images/b2d28062433b3621162c5c55ff444ad0.png)

...发送，比如说，10K `<myMessage>`s 到`all-messages`本地运行的 ActiveMQ 服务器上的队列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T20:07:26.867

您可以阅读以下内容：

*   [http://jmeter.apache.org/usermanual/build-jms-topic-test-plan.html](http://jmeter.apache.org/usermanual/build-jms-topic-test-plan.html)

您有不同的消息来源选项：

*   使用位于文件夹中的文件中的随机文件

*   使用 textarea 放置消息，此消息将包含从 CSV 加载的一些变量

笔记：

*   代理功能仅存在于 HTTP 协议中

*   您的屏幕截图很奇怪，我在 JMeter 中没有这些选项。此外，您应该升级到 JMeter 的最新版本（2.7 或 2.8），因为它包含许多关于 JMS 的修复。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-07T18:03:47.953

应该有一个选项来“记录”作为 JMeter 中的代理的流量。设置好代理后（将您的流量重定向到您的服务器并记录您的 XML 有效负载），您可以使用所需的更改重播宏，甚至可以从文件中读取不同的输入...祝您好运。

# php - 创建一个文件夹，并在其中创建一个带有 php 的子文件夹

> ID：12770921
> 
> 赞同：0
> 
> 时间：2012-10-07T17:06:34.410
> 
> 标签：php, subdirectory

我现在已经尝试了很多次，但我找不到解决方案！

我的问题：

我希望用户能够上传文件夹“user_images”中的图像（该文件夹已存在于服务器上）。php 脚本应在“user_images”中创建一个特定的用户子文件夹。像这样->“user_images/user_65/(imagesGoHere)”

我试过这样，但它不起作用->

```
$userid = $_SESSION['user_id'];
$folder = "user_".$userid;
$upload_dir = "user_images/.$folder";           
$upload_path = $upload_dir; 

if(!is_dir($upload_dir)){
mkdir($upload_dir, 0777);
chmod($upload_dir, 0777);
} 
```

如果有人可以帮助我，那就太好了！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:09:44.150

您需要在那里指定第三个参数，一个布尔值：

```
mkdir($upload_dir, 0777, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T17:10:42.667

PHP 只能在其在父目录中具有权限的情况下才能创建目录。作为警告，为每个用户创建一个文件夹并不是一个特别可扩展的解决方案。

它不应该是递归的，创建后的 chmodding 是没有意义的，因为 mkdir 已经这样做了。

# uiviewcontroller - 如何隐藏密码 UIAlert 后面的内容？Xcode

> ID：12770926
> 
> 赞同：1
> 
> 时间：2012-10-07T17:06:50.650
> 
> 标签：uiviewcontroller, hide, uialertview

启动应用程序时我会`UIAlert`提示输入密码，但我想在需要密码时隐藏视图控制器中的内容，特别是在`applicationDidBecomeActive`. 有没有简单的方法来做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:02:10.270

您可以通过在顶部放置一个对象（例如 UIImageView 甚至是简单的 UILabel）并在需要密码时将其 alpha 设置为 1.0 来实现。您甚至可以考虑应用 UIAnimation 来实现淡入/淡出效果，以获得更好的用户体验：

```
-(void)setupLabelForContentHiding{
    CGRect rect = labelEmpty.frame; //UILabel
    rect.origin.y = 0;
    rect.origin.x = 0;
    rect.size.width = self.view.frame.size.width;
    rect.size.height = self.view.frame.size.height;    
    labelEmpty.frame = rect;
    labelEmpty.alpha=0.0;
}

-(IBAction) hideContent:(id)sender{
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.25];
    [UIView setAnimationDelay:0.0];

    labelEmpty.alpha = 1.0;

    [UIView commitAnimations];
} 
```

# java - 包和类范围规则？

> ID：12770936
> 
> 赞同：2
> 
> 时间：2012-10-07T17:07:48.300
> 
> 标签：java, scope, packages

我正在编写一个分为包的Java程序。如何授予其中定义的范围内的类及其子范围的权限。

例如，我有 3 个包 app.A、app.A.Sub、app.B。在packge AI中有类GlobalA。
我希望只有包 app.A 和 app.A.Sub 能够使用 GlobalA，但 app.B 不能使用它。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T17:09:12.503

java包中绝对没有层次结构。只有名字。

所以包装`a.suba`和`a`没有特殊关系。您无法赋予“子包”特殊权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T17:10:37.690

[访问修饰符](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)规则

```
 Modifier    Class   Package     Subclass    World
    public      Y   Y   Y   Y
    protected   Y   Y   Y   N
    no modifier Y   Y   N   N
    private     Y   N   N   N 
```

根据上述规则，您希望 GlobalA 成为默认（无修饰符）访问。这将阻止 B 和不在 packageA 内的任何东西看到它。现在应该知道，当您声明一个 .java 文件时，您确实需要一个公共修饰符附加到与 .java 文件同名的 Object 上。即公共类 Foo 驻留在 Foo.java

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T17:17:37.410

由于`SubA`和`B`都是 的“外来”包`A`，并且由于访问修饰符允许或禁止的所有内容都以类似的方式适用于所有“外来”包，因此在我看来，在逻辑上不可能通过简单地使用访问修饰符来区分`SubA`和区分。`B`

使用反射可能是可能的，但我认为这不值得。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T17:17:45.583

Java并没有真正使用语言中的子包模型；这只是组织相关代码的一种便捷方式。也就是说，如果您有 packages `a`，`a.b`并且`b`（在您的术语中，`a.b`是 的“子包” `a`），那么您无法使用 package 中的类的访问修饰符以不同方式影响包中`a`的代码。就 Java 而言，对.`a.b``b``a.b``b``a`

# c# - MVC 从选择中下拉

> ID：12770938
> 
> 赞同：0
> 
> 时间：2012-10-07T17:07:53.237
> 
> 标签：c#, asp.net, asp.net-mvc

```
<select name="BasicInfo.Month">
    <option value="na">Month</option>
    <option value="1">January</option>
    <option value="2">February</option>
    <option value="3">March</option>
    <option value="4">April</option>
    <option value="5">May</option>
    <option value="6">June</option>
    <option value="7">July</option>
    <option value="8">August</option>
    <option value="9">September</option>
    <option value="10">October</option>
    <option value="11">November</option>
    <option value="12">December</option>
</select> 
```

我有从某个地方复制的这段代码，我需要创建一个下拉列表 MVC 样式，以便我可以标记选定的样式等。如何将其转换为 MVC 使用的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T17:22:08.393

在您的视图模型中，您可以添加以下属性：

```
public IEnumerable<SelectListItem> Months
{
    get 
    {
        return DateTimeFormatInfo
               .InvariantInfo
               .MonthNames
               .Select((month, index) => new SelectListItem
               {
                   Value = (index + 1).ToString(),
                   Text = month
               });
    }
} 
```

在您看来，指向该`Months`属性。

```
<%= Html.DropDownListFor(Model.Months) %> 
```

这种方法的优点是，如果您更改应用程序的语言设置，月份名称将被翻译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T17:16:52.427

以最简单的形式：

```
@Html.DropDownListFor(m => m.BasicInfo.Month, new List<SelectListItem>
{
    new SelectListItem { Text = "Month", Value = "na" },
    new SelectListItem { Text = "January", Value = "1" },
    new SelectListItem { Text = "February", Value = "2" },
    new SelectListItem { Text = "March", Value = "3" },
    new SelectListItem { Text = "April", Value = "4" },
    new SelectListItem { Text = "May", Value = "5" },
    new SelectListItem { Text = "June", Value = "6" },
    new SelectListItem { Text = "July", Value = "7" },
    new SelectListItem { Text = "August", Value = "8" },
    new SelectListItem { Text = "September", Value = "9" },
    new SelectListItem { Text = "October", Value = "10" },
    new SelectListItem { Text = "November", Value = "11" },
    new SelectListItem { Text = "December", Value = "12" }
}) 
```

如果您真的想要，您可以使用 DateTime 对象自动创建列表。这样，您还可以获得特定于文化的月份名称。

您的模型将是：

```
public class MyModel
{
    public BasicInfoModel BasicInfo { get; set; }
}
public class BasicInfoModel
{
    public string Month { get; set; }
} 
```

# javascript - jQuery 获取 html I have, for example, the following in my page: Is there any way to get the html object in jquery? 问问题 问问题 2012-10-07T17:08:15.133 611 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have, for example, the following in my page: Is there any way to get the html object in jquery? As with any element with an id: jQuery('#obj1') Or to get all object elements: jQuery('object') javascriptjquery 4 2 回答 2 This answer is useful 4 与任何具有 id 的元素一样：jQuery('#obj1') 或获取所有对象元素：jQuery('object') 于 2012-10-07T17:11:50.110 回答 This answer is useful 3 "jQuery get html" It seems like you're asking how to get the HTML rendering of the element. If so, do this: var markup = $("#obj1")[0].outerHTML; Or using .prop(): var markup = $("#obj1").prop("outerHTML"); Or without jQuery: var markup = document.getElementById("obj1").outerHTML; 于 2012-10-07T17:17:37.780 回答 Related 3 java - 期末考试回顾 1 javascript - 通过 JavaScript 发送 Facebook 聊天消息 2 c# - LINQ 和 Enumerable.Where (IEnumerable , 功能 ) 重载方法 1 python - 如何在 google appengine / python 上为模型批量分配属性？ 4 php - php标头方法不重定向 1 c# - 在 RichTextBox 中查找鼠标光标位置的坐标 1 java - 更改图像视图正在旧图像上绘制 2 rest - REST API URI 设计 1 vim - Vim：为什么我不能映射到 钥匙？ 2 jquery - 淘汰赛选项文本绑定 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12770941
> 
> 赞同：0
> 
> 时间：
> 
> 标签：javascript, jquery

I have, for example, the following `<object>` in my page:

```
<object id="obj1" data="URL"></object> 
```

Is there any way to get the html object in jquery?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T17:11:50.110

与任何具有 id 的元素一样：`jQuery('#obj1')`

或获取所有对象元素：`jQuery('object')`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T17:17:37.780

> "*jQuery get html"*

It seems like you're asking how to get the HTML rendering of the element.

If so, do this:

```
var markup = $("#obj1")[0].outerHTML; 
```

* * *

Or using `.prop()`:

```
var markup = $("#obj1").prop("outerHTML"); 
```

* * *

Or without jQuery:

```
var markup = document.getElementById("obj1").outerHTML; 
```

# windows - 100% 可移植的 IDE（即*完全*在笔式驱动器上工作）和 C++ 编译器 (Windows)

> ID：12770942
> 
> 赞同：-1
> 
> 时间：2012-10-07T17:08:16.007
> 
> 标签：windows, ide, portability, portable-applications

> **可能重复：**
> [便携式编程 IDE](https://stackoverflow.com/questions/531162/portable-programming-ide)

（[来自 /r/programming @reddit 的交叉帖子](http://www.reddit.com/r/learnprogramming/comments/113det/100_portable_that_is_works_fully_on_a_pen_drive_c/)）

它不需要是一个成熟的 IDE，编译器就可以（尽管语法高亮会很棒||类似于 Sublime Text）。

由于我通常只在 Linux 中编程，因此我想尝试使用 windows.h 进行编程。（不过，这似乎是一个凌乱的 API。）我猜编译器会包含它？

如果没有像样的编译器/IDE，我将不得不进行 Web 编程，但经过这么长时间，它会很累。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:22:17.877

编译器 - MinGW GCC。它可能是可移植的，只需要从批处理文件设置环境。

IDE（你是说编辑器吗？） -带有[Colorer 插件](http://colorer.sourceforge.net/farplugin.html)（至少）和[ConEmu](https://superuser.com/questions/tagged/conemu)用于选项卡等的[Far Manager 。](https://superuser.com/q/436218/139371)恕我直言，它对开发人员来说是最好的，当然，Far 是控制台应用程序。Far 3.x 是完全可移植的（设置存储在 sqlite db 中）。ConEmu 也可能是可移植的（创建 ConEmu.xml 文件）。是的，我是 ConEmu 的作者；）

# ios - CoreData：第一次加载 NSManagedObject 时未访问自定义属性访问器

> ID：12770944
> 
> 赞同：2
> 
> 时间：2012-10-07T17:08:26.820
> 
> 标签：ios, core-data, nsmanagedobject

**最终目标**：我有一个由叶子组成的对象图，连接到其他叶子。我需要遍历对象图并返回所有那些没有枯萎的叶子，或者 1）没有子叶子或 2）所有子叶子都枯萎了。

**情况**：我有一个 NSFetchedResultsController 和表格视图，我想在其中显示结果。

**我尝试过**的：我开始尝试在 NSFetchRequest 上使用 NSPredicate，但意识到我无法看到哪个可以递归地遍历叶子的子叶子及其所有子叶子等...

因此，我向 Leaf 对象添加了一个名为“isFarthestNonWiltedLeaf”的属性，并在 Leaf 上的一个类别内创建了一个自定义 get-accessor：

```
- (NSNumber*) isFarthestNonWiltedLeaf
{
    [self willAccessValueForKey:@"isFarthestNonWiltedLeaf"];
    NSNumber *returnValue = @([self.wilted boolValue] == NO && [[self allSubLeavesAreWilted] boolValue]);
    [self didAccessValueForKey:@"isFarthestNonWiltedLeaf"];

    return returnValue;
}

- (NSNumber*) allSubLeavesAreWilted
{
    for(Leaf *aLeaf in self.subLeaves)
    {
        if([aLeaf.wilted boolValue] == NO || ![[aLeaf allSubLeavesAreWilted] boolValue])
            return @NO;
    }
    return @YES;
} 
```

然后，在 NSFetchedResultsController 的获取请求中，我设置了以下谓词：

```
[fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"isFarthestNonWiltedLeaf == YES"]]; 
```

这在我第一次打开应用程序并开始在不同的视图中添加叶子和子叶子时效果很好。但是，下次我打开应用程序时，自定义访问器方法在第一次出现表格视图时没有被访问！我必须去每个叶子并检查/取消选中它的“枯萎”状态，然后让 NSFetchedResultsController 刷新那个单一的叶子......此时它确实调用了自定义 isFarthestNonWiltedLeaf 访问器并且叶子正确地出现在列表中。我必须为每个叶子执行此操作，才能正确更新整个 tableview。

**所以我的问题是......我如何让 NSFetchRequest / NSFetchedResultsController 每次都使用 Leaf 对象的自定义 get 访问器？谢谢你。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T19:40:02.933

好吧，我将不得不回答我自己的问题......我玩了更多，我发现了这个问题，尽管我仍然不确定它的“原因”。

我意识到 CoreData 中有很多缓存正在进行，所以即使我在 NSFetchedResultsController 上将 cacheName 设置为 nil，我还是觉得那里有一些问题。此外，似乎在没有调用 get 访问器的情况下访问了原始属性。

换句话说，原语需要被保存。所以我在计算值后立即**在 get 访问器中添加了以下几行：**

```
[self setPrimitiveValue:returnValue forKey:@"isFarthestNonWiltedLeaf"]; 
```

起初我还添加了 KVO 通知代码（willChangeValueForKey 和 didChangeValueForKey），但这使得应用程序完全没有响应，出于某种原因......这似乎是一些周期性引用问题。

**所以最终的代码是这样的：**

```
- (NSNumber*) isFarthestNonWiltedLeaf
{
    [self willAccessValueForKey:@"isFarthestNonWiltedLeaf"];
    NSNumber *returnValue = @([self.wilted boolValue] == NO && [[self allSubLeavesAreWilted] boolValue]);
    [self didAccessValueForKey:@"isFarthestNonWiltedLeaf"];

    [self setPrimitiveValue:returnValue forKey:@"isFarthestNonWiltedLeaf"];

    return returnValue;
}

- (NSNumber*) allSubLeavesAreWilted
{
    for(Leaf *aLeaf in self.subLeaves)
    {
        if([aLeaf.wilted boolValue] == NO || ![[aLeaf allSubLeavesAreWilted] boolValue])
            return @NO;
    }
    return @YES;
} 
```

...使用 NSPredicate 如下：

```
[fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"isFarthestNonWiltedLeaf == YES"]]; 
```

# python - Flask request.remote_addr 在 webfaction 上是错误的并且没有显示真实的用户 IP

> ID：12770950
> 
> 赞同：32
> 
> 时间：2012-10-07T17:09:15.073
> 
> 标签：python, flask, webfaction

我刚刚在 Webfaction 上部署了一个 Flask 应用程序，我注意到它`request.remote_addr`总是`127.0.0.1`. 这当然没有多大用处。

如何在 Flask on Webfaction 中获取用户的真实 IP 地址？

谢谢！

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-10-07T18:12:32.757

如果 Flask 前面有代理，那么这样的事情会得到 Flask 中的真实 IP：

```
if request.headers.getlist("X-Forwarded-For"):
   ip = request.headers.getlist("X-Forwarded-For")[0]
else:
   ip = request.remote_addr 
```

**更新：** Eli 在他的评论中提到了非常好的观点。如果您只是简单地使用它，可能会出现一些安全问题。阅读[Eli 的帖子](http://esd.io/blog/flask-apps-heroku-real-ip-spoofing.html)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-06-28T17:11:59.813

# Werkzeug 中间件

Flask 的文档非常具体地[介绍了推荐的反向代理服务器设置](http://flask.pocoo.org/docs/1.0/deploying/wsgi-standalone/#proxy-setups)：

> 如果您使用 HTTP [反向] 代理后面的这些 [WSGI] 服务器之一部署应用程序，则需要重写一些标头才能使应用程序 [正确] 工作。WSGI 环境中的两个有问题的值通常是`REMOTE_ADDR`和`HTTP_HOST`... Werkzeug 提供了一个修复程序，可以解决一些常见的设置，但您可能希望为特定设置编写自己的 WSGI 中间件。

还有关于安全考虑：

> 请记住，在非代理设置中使用此类中间件是一个安全问题，因为它会盲目信任可能由恶意客户端伪造的传入标头。

将`request.remote_addr`返回客户端 IP 地址的建议代码（安装中间件）是：

```
from werkzeug.contrib.fixers import ProxyFix
app.wsgi_app = ProxyFix(app.wsgi_app, num_proxies=1) 
```

请注意默认`num_proxies`情况`1`下。它是*应用程序前面的代理服务器数量*。

实际代码如下（`werkzeug==0.14.1`撰写本文时最新）：

```
def get_remote_addr(self, forwarded_for):
    if len(forwarded_for) >= self.num_proxies:
        return forwarded_for[-self.num_proxies] 
```

# 网络派系

Webfaction 关于[访问`REMOTE_ADDR`](https://docs.webfaction.com/software/django/troubleshooting.html#accessing-remote-addr)的文档说：

> ... IP 地址可用作`HTTP_X_FORWARDED_FOR`标头中逗号分隔列表中的第一个 IP 地址。

他们没有说当客户端请求已经包含`X-Forwarded-For`标头时他们会做什么，但按照常识，我会假设他们会替换它。因此对于 Webfaction`num_proxies`应该设置为`0`.

# Nginx

Nginx 更明确的是[`$proxy_add_x_forwarded_for`](http://nginx.org/en/docs/http/ngx_http_proxy_module.html#var_proxy_add_x_forwarded_for)：

> “X-Forwarded-For”客户端请求标头字段，`$remote_addr`附加变量，用逗号分隔。如果客户端请求标头中不存在“X-Forwarded-For”字段，则该`$proxy_add_x_forwarded_for`变量等于该`$remote_addr`变量。

对于应用程序前面的 Nginx`num_proxies`应该保留默认值`1`。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-09-03T17:38:51.310

重写伊格纳斯的答案：

```
headers_list = request.headers.getlist("X-Forwarded-For")
user_ip = headers_list[0] if headers_list else request.remote_addr 
```

记得阅读[Eli](http://esd.io/blog/flask-apps-heroku-real-ip-spoofing.html)关于欺骗注意事项的帖子。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-04-24T23:14:15.070

您可以使用`request.access_route`访问 ip 列表：

```
if len(request.access_route) > 1:
    return request.access_route[-1]
else:
    return request.access_route[0] 
```

更新：

你可以这样写：

```
 return request.access_route[-1] 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-07T17:12:48.550

问题是 Flask 前面可能有某种代理。在这种情况下，“真实”IP 地址通常可以在`request.headers['X-Forwarded-For']`.

# php - 在php邮件功能中得到奇怪的结果

> ID：12770959
> 
> 赞同：0
> 
> 时间：2012-10-07T17:09:53.033
> 
> 标签：php, email, header

我正在使用此功能通过电子邮件发送带有消息的附件

```
function sendemail($to, $from, $subject, $filename, $attachment_name) {

    $random_hash = md5(date('r', time()));

    $headers = "From: $from\r\nReply-To: $from";

    $headers .= "\r\nContent-Type: multipart/mixed; boundary=\"PHP-mixed-" . $random_hash . "\"";

    $attachment = chunk_split(base64_encode(file_get_contents($filename)));

    $output = "
--PHP-mixed-$random_hash
Content-Type: multipart/alternative; boundary='\"PHP-alt-$random_hash\"'

Hello World!
This is the simple text version of the email message.

--PHP-alt-$random_hash
Content-Type: text/html; charset=\"UTF8\"
Content-Transfer-Encoding: 7bit

<h2>Hello World!</h2>
<p>This is the <b>HTML</b> version of the email message.</p>

--PHP-alt-$random_hash--

--PHP-mixed-$random_hash
Content-Type: application/zip; name=$attachment_name
Content-Transfer-Encoding: base64
Content-Disposition: attachment

$attachment
--PHP-mixed-$random_hash--";

    if (@mail($to, $subject, $output, $headers)) {
        echo 'good';
    } else {
        echo 'bad';
    }
} 
```

但这是我收到的实际消息的屏幕截图：![在此处输入图像描述](../Images/5410937d1d8426b4b9f4b5c3ca2698cf.png)

我该如何摆脱

```
--PHP-alt-a08184c8a852c31ac8c508fe6ca357d8
Content-Type: text/html; charset="UTF8"
Content-Transfer-Encoding: 7bit 
```

在电子邮件中并实际将其用作元

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T17:53:27.160

# 公共变量

```
$to = 'to@localhost.com';
$from = 'from@localhost.com';
$subject = 'Subject 123';
$body = '<b>Hello World</b>';
$filename = 'index.rar'; 
```

# 你的代码

```
function sendemail($to, $from, $subject, $body, $filename) {
    $random_hash = md5(date('r', time()));
    $headers = "From: $from\r\nReply-To: $from";
    $headers .= "\r\nContent-Type: multipart/mixed; boundary=\"PHP-mixed-" . $random_hash . "\"";
    $attachment = chunk_split(base64_encode(file_get_contents($filename)));
    $output = "
--PHP-mixed-$random_hash
Content-Type: multipart/alternative; boundary='\"PHP-alt-$random_hash\"'

" . strip_tags($body) . "

--PHP-alt-$random_hash
Content-Type: text/html; charset=\"UTF8\"
Content-Transfer-Encoding: 7bit

" . $body . "

--PHP-alt-$random_hash--

--PHP-mixed-$random_hash
Content-Type: application/zip; name=" . basename($filename) . "
Content-Transfer-Encoding: base64
Content-Disposition: attachment

$attachment
--PHP-mixed-$random_hash--";
    return mail($to, $subject, $output, $headers);
}
sendemail($to, $from, $subject, $body, $filename); 
```

# 您发送的电子邮件

```
Date: Sun, 07 Oct 2012 19:54:06 +0200
Subject: Subject 123
To: to@localhost.com
X-PHP-Originating-Script: 0:index.php
From: from@localhost.com
Reply-To: from@localhost.com
Content-Type: multipart/mixed; boundary="PHP-mixed-488d21ec53bdcff8cfe3f5ab49010354"

--PHP-mixed-488d21ec53bdcff8cfe3f5ab49010354
Content-Type: multipart/alternative; boundary='"PHP-alt-488d21ec53bdcff8cfe3f5ab49010354"'

Hello World

--PHP-alt-488d21ec53bdcff8cfe3f5ab49010354
Content-Type: text/html; charset="UTF8"
Content-Transfer-Encoding: 7bit

<b>Hello World</b>

--PHP-alt-488d21ec53bdcff8cfe3f5ab49010354--

--PHP-mixed-488d21ec53bdcff8cfe3f5ab49010354
Content-Type: application/zip; name=index.rar
Content-Transfer-Encoding: base64
Content-Disposition: attachment

UmFyIRoHAM+QcwAADQAAAAAAAABUw3QgkC4AGQMAAIkGAAACwova3OadR0EdMwkAIAAAAGluZGV4
LnBocACwSVdsDYFRDMy9FBW9ipX8O1CJPYlHGddFJLQKBVTwEqiwR41JrY3sjYPpHuwtgI/7ngWy
N7r3N1xxyQLUHvPGN5085nRx/nM5zOrdzc3F8vvx2H0Svy7+9BHA4UhhMvmihcJNNJMVm6xkHDQt
zBR62LkxJdKY68ovAto6/Ixawy0NxWg9u+fZpb7bfToLwVa9Gg9uIceZAbZI2zkyk6qE02RBc+dJ
eIV0cvWWP+xbMgrhYZ0vphkoeFDBTXnZImQrNvIjuJTxX//R8XNj+dJRlQOfV5eHxeNbrHI9nU3w
4+LlJCfTHyp/hewtz6qtQQkjHETspVepfpeHMpzocmamNNMkbCfwcJGOkQGN1hZPXWKxa6wsFusa
6XcY/B+sB+t9Y+TrcfGV8ASJ7yieGYgmUQncho6RXNBg1Rb5BolmKETa5ABL9QT0TdEfwJLDnaxS
amVrdkXgkqifXTWhzRHTnlIdcWaFEUqTA0CDqI9gYplSgj6bPw9Frm5eZpbVq0fu2aLwUu1rA02m
G6/EFXAszhAH0cLSZAYWM6yebyOBshPaRlX8cykM47UQlFZg9ZcEfml0SrkoBpqwi7I7RPa2OOcJ
sQjPfsTYstmqzwPNqkUKyrYVW4U0yAHEjZSiXqq4q47+9WQ7s83SJOupHakJwBfqMQRAMe/HFyef
S7EdCiFDtdr2qwaCHD34McBqyFYz3YxQu/vf74XHKGhnQwX2G/ul2lpWbnDsascUw7ou1bEsg+yA
sshYFVN9iylLU1s+3amLTSuNu9MQ2aaNjYRZYiirft3X10rhr86L/5L9anEUfXNBpHKbnQSoNsvT
BkM3DBjq8XNT95XxcZCSHxfqwMr5eB0DnXC+8BbFW1v34ydPunaalVC5CitTPtR+fbcTZV6pBClH
lJZJq99yV1W9uBi1riDlCl2iHMgnOJd+XNbnFJW3NJY1XsekkVQLr2rfBQODjgNWwFZI4/2zi1ZK
Z19pZqfjee5gTAX8IuVxcsKeY648vgvUPfVr4aR4o9IGM/sr+njZkhRJjeFXiNzBKi0Oqki25qBB
c9AfpMQ9ewBABwA=

--PHP-mixed-488d21ec53bdcff8cfe3f5ab49010354-- 
```

# SWIFT代码

```
require_once('swift/lib/swift_required.php');
$transport = Swift_MailTransport::newInstance();
$mailer = Swift_Mailer::newInstance($transport);
$message = Swift_Message::newInstance($subject)
    ->setFrom(array($from))
    ->setTo(array($to))
    ->setEncoder(Swift_Encoding::get7BitEncoding())
    ->setBody($body, 'text/html')
    ->addPart(strip_tags($body), 'text/plain')
    ->attach(Swift_Attachment::fromPath($filename))
;
$mailer->send($message); 
```

# 斯威夫特发送电子邮件

```
Subject: Subject 123
To: to@localhost.com
X-PHP-Originating-Script: 0:SimpleMailInvoker.php
Message-ID: <1349632162.5071c0a2972db@localhost>
Date: Sun, 07 Oct 2012 19:49:22 +0200
From: from@localhost.com
MIME-Version: 1.0
Content-Type: multipart/mixed;
 boundary="_=_swift_v4_13496321625071c0a297e85_=_"

--_=_swift_v4_13496321625071c0a297e85_=_
Content-Type: multipart/alternative;
 boundary="_=_swift_v4_13496321625071c0a298e1b_=_"

--_=_swift_v4_13496321625071c0a298e1b_=_
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Hello World

--_=_swift_v4_13496321625071c0a298e1b_=_
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: 7bit

<b>Hello World</b>

--_=_swift_v4_13496321625071c0a298e1b_=_--

--_=_swift_v4_13496321625071c0a297e85_=_
Content-Type: application/x-rar-compressed; name=index.rar
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename=index.rar

UmFyIRoHAM+QcwAADQAAAAAAAABUw3QgkC4AGQMAAIkGAAACwova3OadR0EdMwkAIAAAAGluZGV4
LnBocACwSVdsDYFRDMy9FBW9ipX8O1CJPYlHGddFJLQKBVTwEqiwR41JrY3sjYPpHuwtgI/7ngWy
N7r3N1xxyQLUHvPGN5085nRx/nM5zOrdzc3F8vvx2H0Svy7+9BHA4UhhMvmihcJNNJMVm6xkHDQt
zBR62LkxJdKY68ovAto6/Ixawy0NxWg9u+fZpb7bfToLwVa9Gg9uIceZAbZI2zkyk6qE02RBc+dJ
eIV0cvWWP+xbMgrhYZ0vphkoeFDBTXnZImQrNvIjuJTxX//R8XNj+dJRlQOfV5eHxeNbrHI9nU3w
4+LlJCfTHyp/hewtz6qtQQkjHETspVepfpeHMpzocmamNNMkbCfwcJGOkQGN1hZPXWKxa6wsFusa
6XcY/B+sB+t9Y+TrcfGV8ASJ7yieGYgmUQncho6RXNBg1Rb5BolmKETa5ABL9QT0TdEfwJLDnaxS
amVrdkXgkqifXTWhzRHTnlIdcWaFEUqTA0CDqI9gYplSgj6bPw9Frm5eZpbVq0fu2aLwUu1rA02m
G6/EFXAszhAH0cLSZAYWM6yebyOBshPaRlX8cykM47UQlFZg9ZcEfml0SrkoBpqwi7I7RPa2OOcJ
sQjPfsTYstmqzwPNqkUKyrYVW4U0yAHEjZSiXqq4q47+9WQ7s83SJOupHakJwBfqMQRAMe/HFyef
S7EdCiFDtdr2qwaCHD34McBqyFYz3YxQu/vf74XHKGhnQwX2G/ul2lpWbnDsascUw7ou1bEsg+yA
sshYFVN9iylLU1s+3amLTSuNu9MQ2aaNjYRZYiirft3X10rhr86L/5L9anEUfXNBpHKbnQSoNsvT
BkM3DBjq8XNT95XxcZCSHxfqwMr5eB0DnXC+8BbFW1v34ydPunaalVC5CitTPtR+fbcTZV6pBClH
lJZJq99yV1W9uBi1riDlCl2iHMgnOJd+XNbnFJW3NJY1XsekkVQLr2rfBQODjgNWwFZI4/2zi1ZK
Z19pZqfjee5gTAX8IuVxcsKeY648vgvUPfVr4aR4o9IGM/sr+njZkhRJjeFXiNzBKi0Oqki25qBB
c9AfpMQ9ewBABwA=

--_=_swift_v4_13496321625071c0a297e85_=_-- 
```

* * *

查找电子邮件之间的差异**或使用[SWIFTmailer](http://swiftmailer.org/)**。

# ios - 使用 MPMoviePlayerController 播放受 Windows 身份验证保护的 mp4 视频（url）

> ID：12770960
> 
> 赞同：1
> 
> 时间：2012-10-07T17:10:24.990
> 
> 标签：ios, xcode, authentication

我有一个受 Windows 身份验证保护的 .mp4 视频（url）。我想使用 MPMoviePlayerController 播放。

我已经实现了一些代码，我确定我已经接近了！

所以，我正在尝试使用 NSURLConnection 来“解锁”mp4 url​​。它可以工作，但是当我尝试使用 initWithContentURL 访问相同的 url 时，它不起作用。（它不能“看到”我之前输入的信息。

所以，问题是；如何永久锁定文件夹/url，或者如何为 MPMoviePlayerController 提供 NSURLConnection 而不是 NSURL。

1-所以，这是我采取的步骤：

```
- (void)viewDidLoad{
    [super viewDidLoad];
    //[self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL       URLWithString:@"http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4"]]];
    [self tryConnection];
} 
```

2--> 我正在尝试访问受保护的 URL（这是有效的）

```
- (void) tryConnection{
    NSURLRequest* request = [[NSURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://www.abcd.com/_develop/video/01.mp4"]];
    NSURLConnection* connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
                         //[request release];
                         //[connection release];
} 
```

3-这是正确调用的

```
- (BOOL)connection:(NSURLConnection*)conn  canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace*)protectionSpace {  
    if([[protectionSpace authenticationMethod] isEqualToString:NSURLAuthenticationMethodNTLM])  
        return YES;  

    // Explicitly reject ServerTrust. This is occasionally sent by IIS.  
    if([[protectionSpace authenticationMethod] isEqualToString:NSURLAuthenticationMethodServerTrust])  
        return NO;  

    return NO;  
} 
```

4-这是正确调用的

```
- (void)connection:(NSURLConnection*)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge*)challenge{
    NSLog(@"didReceiveAuthenticationChallenge");
        if ([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodNTLM])
            [[challenge sender] useCredential:[NSURLCredential  
                                          credentialWithUser:@"1234"  
                                          password:@"5678"  
                                          persistence:NSURLCredentialPersistenceNone] forAuthenticationChallenge:challenge]; 

} 
```

4-这是正确调用的。从这里开始，太好了，因为我知道该 url 是 Unlock。那么...如何使用 MPMoviePlayer 播放它？

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response;{
    NSLog(@"received response via nsurlconnection");
    [self moviePlayerGO];
} 
```

4-保持黑色... :(

```
-(void)moviePlayerGO{
    NSURL *movieURL = [NSURL URLWithString:@"http://www.abcd.com/_develop/video/01.mp4"];
    //NSURL *movieURL = [NSURL URLWithString:@"http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4"];
    moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:movieURL];
    moviePlayer.controlStyle = MPMovieControlStyleFullscreen;
    moviePlayer.shouldAutoplay = YES;
    [[moviePlayer view] setFrame: CGRectMake(0.0, 0.0, 350.0, 250.0)]; // 2X the native resolution
    [self.view addSubview: [moviePlayer view]];
} 
```

# ruby-on-rails - 我怎样才能更干净地重写这组路线？

> ID：12770962
> 
> 赞同：0
> 
> 时间：2012-10-07T17:10:40.517
> 
> 标签：ruby-on-rails, routes

我觉得我应该知道这一点，我确信这可以更干净地完成，但我不太确定最好的方法。

像这样的一组路由如何以更 DRY 的方式编写？

```
# Artists
match "/:id/remixes", :to => "artists#remixes", :as => "artist_remixes"
match "/:id/originals", :to => "artists#originals", :as => "artist_originals"
match "/:id/popular", :to => "artists#popular", :as => "artist_popular"
match "/:id/mashups", :to => "artists#mashups", :as => "artist_mashups"
match "/:id/covers", :to => "artists#covers", :as => "artist_covers"
match "/:id/productions", :to => "artists#productions", :as => "artist_productions"
match "/:id/features", :to => "artists#features", :as => "artist_features" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:17:48.093

我会尝试做 1 条路线并将 list_type 作为参数传递。

就像是

```
resources: artists do
  resources list_types
end 
```

我会尽量避免对可能做类似事情的一堆方法采取单独的行动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T17:47:32.633

那应该这样做：

```
resources :artists, path: '/' do
  member do
    get 'remixes'
    get 'originals'
    get 'popular'
    get 'mashups'
    get 'covers'
    get 'features'
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T17:13:46.957

啊，应该考虑一下（今天宿醉）：

```
[:remixes_of, :remixes_by, :originals, :popular, :mashups, :covers, :productions, :features].each do |role|
  match ":id/#{role}", to: "artists\##{role}", as: "artist_#{role}"
end 
```

# windows - WH_MOUSE_LL 钩子，避免得到无用的 WM_MOUSEMOVE 事件

> ID：12770963
> 
> 赞同：0
> 
> 时间：2012-10-07T17:10:42.027
> 
> 标签：windows, winapi, windows-messages, setwindowshookex

有没有办法，即使是肮脏的黑客，也可以避免在挂钩中接收`WM_MOUSEMOVE`事件？`WH_MOUSE_LL`我只对轮子旋转和按钮感兴趣。`WM_MOUSEMOVE`在我的场景中，接收的性能成本是不可接受的。

我不能使用`WH_MOUSE`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:33:06.427

没有办法告诉钩子不接收特定消息。当您钩住鼠标时，尤其是低级钩子，您会收到鼠标所做的一切。

# php - Zend Framework 2 中的服务定位器

> ID：12770966
> 
> 赞同：12
> 
> 时间：2012-10-07T17:11:07.177
> 
> 标签：php, zend-framework2

在控制器中，我创建并使用我的模型，所以

```
public function getAlbumTable()
{
    if (!$this->albumTable) {
        $sm = $this->getServiceLocator();
        $this->albumTable = $sm->get('Album\Model\AlbumTable');
    }
    return $this->albumTable;
} 
```

如何在我的项目的另一个地方使用这个全局服务定位器，例如，在另一个模型中，而不仅仅是在任何控制器中？

与数据库的连接的配置在文件中定义：my_project/config/autoload/global.php

谢谢你。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-07T18:13:23.507

Zend MVC 会将 ServiceLocator 实例注入到实现 Zend\ServiceManager\ServiceLocatorAwareInterface 的类中。模型表的简单实现如下所示：

```
<?php
use Zend\Db\TableGateway\AbstractTableGateway;
use Zend\ServiceManager\ServiceLocatorAwareInterface;
use Zend\ServiceManager\ServiceLocatorInterface;

class UserTable extends AbstractTableGateway implements ServiceLocatorAwareInterface {
  protected $serviceLocator;

  public function setServiceLocator(ServiceLocatorInterface $serviceLocator) {
    $this->serviceLocator = $serviceLocator;
  }

  public function getServiceLocator() {
    return $this->serviceLocator;
  }

  // now instance of Service Locator is ready to use
  public function someMethod() {
    $table = $this->serviceLocator->get('Album\Model\AlbumTable');
    //...
  }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-09T05:52:18.417

决定了。所以。为了解决模型类的任务，必须实现接口ServiceLocatorAwareInterface。因此注入 ServiceManager 将自动发生在您的模型中。请参见前面的示例。

对于您的应用程序的表单和其他对象，此处建议的合适方法[http://michaelgallego.fr/blog/?p=205](http://michaelgallego.fr/blog/?p=205)您可以创建一个基类表单扩展 BaseForm 并实现 ServiceManagerAwareInterface，您将在应用程序中继承其表单.

```
namespace Common\Form;

use Zend\Form\Form as BaseForm;
use Zend\ServiceManager\ServiceManager;
use Zend\ServiceManager\ServiceManagerAwareInterface;

class Form extends BaseForm implements ServiceManagerAwareInterface
{
    /**
     * @var ServiceManager
     */
    protected $serviceManager;

    /**
     * Init the form
     */
    public function init()
    {
    }

    /**
     * @param ServiceManager $serviceManager
     * @return Form
     */
    public function setServiceManager(ServiceManager $serviceManager)
    {
        $this->serviceManager = $serviceManager;

        // Call the init function of the form once the service manager is set
        $this->init();

        return $this;
    }
} 
```

要在 service_manager 部分的文件 module.config.php 中自动注入 ServiceManager 的对象，您需要编写

```
'invokables' => array(
    'Album\Form\AlbumForm' => 'Album\Form\AlbumForm',
), 
```

然后在您的控制器中，您可以创建一个表单

```
$form = $this->getServiceLocator()->get('Album\Form\AlbumForm'); 
```

该表单将包含一个对象 ServiceManager，它将允许其他依赖项。

感谢你的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-02T08:51:42.253

`getServicelocator()`犯错误。所以它需要另一种方式。并扩展`AbstractTableGateway`或`ServiceLocatorAwareInterface`有错误。

工厂实现将帮助 Controller 获取对象。

*用户示例代码将类似于专辑。

1) 工厂类 (RegisterControllerFactory.php) * 在控制器中复制函数 createUser

```
namespace Users\Controller\Factory;

use Users\Controller\RegisterController;

use Zend\ServiceManager\FactoryInterface;
use Zend\ServiceManager\ServiceLocatorInterface;
use Zend\ServiceManager\Exception\ServiceNotCreatedException;

class RegisterControllerFactory   
{

    public function __invoke($serviceLocator)
    {  
    $sm = $serviceLocator;
    $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');

    $resultSetPrototype = new \Zend\Db\ResultSet\ResultSet();
    $resultSetPrototype->setArrayObjectPrototype(new \Users\Model\User);
    $tableGateway       = new \Zend\Db\TableGateway\TableGateway('user' /* table name  */, $dbAdapter, null, $resultSetPrototype);

    $user = new \Users\Model\User();  
    $userTable = new \Users\Model\UserTable($tableGateway);

    $controller = new RegisterController($userTable, $serviceLocator );
    return $controller;

   }
} 
```

2）控制器（RegisterController）命名空间用户\控制器；

```
use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;

use Users\Form\RegisterForm;
use Users\Form\RegisterFilter;

use Users\Model\User;
use Users\Model\UserTable;

use Zend\ServiceManager\ServiceLocatorInterface;

class RegisterController extends AbstractActionController
{
    protected $userTable;
    protected $serviceManager;

    public function __construct(UserTable $userTable, ServiceLocatorInterface     $serviceManager)
{
    $this->userTable = $userTable;
    $this->serviceManager = $serviceManager;
}

public function indexAction()
{
    $form = new RegisterForm();
    $viewModel  = new ViewModel(array('form' => $form)); 
    return $viewModel; 
}

public function processAction()
{
    if (!$this->request->isPost()) {
        return $this->redirect()->toRoute(NULL , array( 
                    'controller' => 'register', 
                    'action' =>  'index' 
                ));
    }

    $post = $this->request->getPost();

    $form = new RegisterForm();
    $inputFilter = new RegisterFilter();
    $form->setInputFilter($inputFilter);

    $form->setData($post);
    if (!$form->isValid()) {
        $model = new ViewModel(array(
            'error' => true,
            'form'  => $form,
        ));
        $model->setTemplate('users/register/index');
        return $model;
    }

    // Create user
    $this->createUser($form->getData());

    return $this->redirect()->toRoute(NULL , array( 
                    'controller' => 'register', 
                    'action' =>  'confirm' 
                ));
}

public function confirmAction()
{
    $viewModel  = new ViewModel(); 
    return $viewModel; 
}

protected function createUser(array $data)
{  /*able to delete or modify */
    $sm = $this->serviceManager;
    $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');

    $resultSetPrototype = new \Zend\Db\ResultSet\ResultSet();
    $resultSetPrototype->setArrayObjectPrototype(new \Users\Model\User);
    $tableGateway       = new \Zend\Db\TableGateway\TableGateway('user' /* table name  */, $dbAdapter, null, $resultSetPrototype);

    $user = new User();
    $user->exchangeArray($data);

    $userTable = new UserTable($tableGateway);
    $userTable->saveUser($user);

    return true;
    }
} 
```

3) 模块.config.php

```
return array(   
    'controllers' => array(
    'invokables' => array(
        'Users\Controller\Index' => 'Users\Controller\IndexController', 
        'Users\Controller\login' => 'Users\Controller\LoginController', 
        //delete 'Users\Controller\Register'
    ),
    'factories' => array(
            'Users\Controller\Register' =>     'Users\Controller\Factory\RegisterControllerFactory',
   ),       
), 
```

# html - HTML 将参数从 url 传递到嵌入 flash 对象

> ID：12770968
> 
> 赞同：0
> 
> 时间：2012-10-07T17:11:11.613
> 
> 标签：html, flash, url, parameters

我想从 url 示例中获取 FilePath 参数： [http ://www.example.com/index.html?FilePath=LetsGo](http://www.example.com/index.html?FilePath=LetsGo)

浏览它会将它传递给 html flash 播放器脚本（“LetsGo”将播放而不是“autoload”）：

```
<html>
<body><.......
<object classid="123456...." codebase="http://123457" id="test" height="300" align="middle" width="300">
    <param name="allowFullScreen" value="true">
    <param name="movie" value="123.swf">
    <param name="FlashVars" value="MP3=autoload.mp3&amp;JPG=autoload.jpg&amp;repeats=200">
    <embed src="123.swf" allowfullscreen="true" name="MP3JPG" flashvars="MP3=autoload.mp3&amp;JPG=autoload.jpg&amp;repeats=200" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" height="300" align="middle" width="300">
</object><......
</html> 
```

我怎样才能正确地做到这一点？

非常感谢，

本茨。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:45:10.490

获取 URL 参数的一种优雅方法是使用 jQuery URL Parser，您可以在此处获取此实用程序。

```
<html>
  <head>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://raw.github.com/allmarkedup/jQuery-URL-Parser/master/purl.js"></script>

    <script>
      $(document).ready(function(){
        var filePath = $.url().param('FilePath');    

        //cool!
        alert(filePath);

        var flashObjectHtml = "<object classid='clsid:d27...' codebase='http://...' id='test' height='300' align='middle' width='300'> \
          <param name='allowFullScreen' value='true'> \
          <param name='movie' value='123.swf'> \
          <param name='FlashVars' value='MP3=" + filePath + "&amp;JPG=autoload.jpg&amp;repeats=200'> \
          <embed src='123.swf' allowfullscreen='true' name='MP3JPG' flashvars='MP3=" + filePath + "&amp;JPG=autoload.jpg&amp;repeats=200' \
          type='application/x-shockwave-flash' pluginspage='http://www.macromedia.com/go/getflashplayer' height='300' \
          align='middle' width='300'> \
        </object>";

        $('#flash_wrapper').html(flashObjectHtml);

      });
    </script>
  </head>
  <body>
    <div id="flash_wrapper"></div>
  </body>
 </html> 
```

**编辑**

复制上面的脚本，保存并在浏览器中这样调用它：

```
[the_path_where_you_saved_this_file]/some_name.htm?FilePath=some_path 
```

**重要的一点**：这些 URL 参数区分大小写，所以 FilePath != filepath != filePath

# php - 为什么 php/mysql 会转换这个字符？

> ID：12770970
> 
> 赞同：-1
> 
> 时间：2012-10-07T17:11:35.007
> 
> 标签：php, mysql, utf-8, character-encoding

我有一个包含 utf8_unicode_ci 字符串的数据库。一些例子是“Zìzhìqū”和“Shěng”。

当我运行此代码时：

```
 $result = mysql_query ("SELECT foo FROM bar");

$rows = Array ();

while ($row = mysql_fetch_row ($result))
    array_push ($rows, $row [0]);

mysql_free_result ($result); 
```

该`$rows`数组包含预期的“Zìzhìqū”，但“Shěng”已变为“Sh?ng”。当我将字符串写入文件时，我可以看到流氓问号是一个普通的 ASCII 0x3f。

怎么回事？

我正在使用 PHP 5.3.10-1ubuntu3.4 和 mysql Ver 14.14 Distrib 5.5.24。知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:14:44.037

[http://cameronyule.com/2008/07/configuring-mysql-to-use-utf-8/](http://cameronyule.com/2008/07/configuring-mysql-to-use-utf-8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T17:15:33.147

您是否将PHP 和 MySQL 之间*连接*的字符编码设置为UTF-8？不这样做将导致`?`被替换为 UTF-8 字符。

```
SET NAMES 'utf8' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T17:25:05.257

请将您的数据库保存在`DEFAULT CHARSET=utf8`和`COLLATE=utf8_unicode_ci`

然后

```
header("Content-type: text/html; charset=utf-8");
//mysql connection
mysql_query("SET NAMES utf8"); 
```

# asp.net-mvc - 在 asp.net mvc 4 中使用 LinkedIn OAuth 的“登录失败”

> ID：12770971
> 
> 赞同：4
> 
> 时间：2012-10-07T17:11:35.477
> 
> 标签：asp.net-mvc, linkedin

我正在查看 asp.net mvc 4 附带的默认 OAuth 实现。这绝对令人印象深刻，因为我所要做的就是在 AuthConfig.cs 中添加这一行：

```
OAuthWebSecurity.RegisterLinkedInClient("_key_", "_secret_"); 
```

启用上面，确实提供了LinkedIn链接来登录。我被提示输入一次密码，但输入后我得到：

> “登录失败。使用服务登录失败。”

，并且自从没有再次提示输入密码以来一直得到这个。

我不清楚这是由于我输入的初始凭据错误，还是我设置密钥的方式。

此外，我在我的应用程序中的任何地方都看不到实际的控制器代码，所以即使我的登录成功，也不清楚我如何从链接中获取信息......即历史记录。

很高兴这种集成有多容易，但我倾向于[更手动地实现它？](https://stackoverflow.com/questions/11438511/login-with-linkedin)

但是我不禁想知道上述实现可能也有效。

**更新**

我已经追踪到这个电话的问题：

```
public ActionResult ExternalLogin(string provider, string returnUrl) {
    return new ExternalLoginResult(provider, Url.Action("ExternalLoginCallback", new { ReturnUrl = returnUrl }));
} 
```

回调返回***“401 Unauthorized”*** .. 即使凭据是正确的。从我可以在其他帖子中收集到的信息来看，这可能是由于 OAuth 库的标题格式不正确？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T18:40:01.027

我有同样的问题，看起来这是一个错误。

请参阅此帖子的“Paul Roa”评论：

[http://blogs.msdn.com/b/webdev/archive/2012/08/15/oauth-openid-support-for-webforms-mvc-and-webpages.aspx?PageIndex=2](http://blogs.msdn.com/b/webdev/archive/2012/08/15/oauth-openid-support-for-webforms-mvc-and-webpages.aspx?PageIndex=2)

然后是他的解决方案（对我有用），在这里：

[http://blog.mrroa.com/post/30454808112/asp-net-custom-linkedin-oauth-provider](http://blog.mrroa.com/post/30454808112/asp-net-custom-linkedin-oauth-provider)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T21:51:34.923

我有同样的问题。

我使用 NuGet 更新了所有 OAuth 包，现在一切正常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-23T09:32:58.977

似乎 OAuth 在 vs2012 中带有错误。这是解释错误原因的教程。[http://www.devcurry.com/2013/01/connect-to-linkedin-using-oauth-in.html](http://www.devcurry.com/2013/01/connect-to-linkedin-using-oauth-in.html)

我还必须更新 Nuget 才能更新 DotNetOpenAuth.Core 包。更新后，它按预期工作。希望有人觉得这很有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-07T19:09:06.970

听起来像是糟糕的凭据，对我来说效果很好。遗憾的是，该模板不允许更改密码或删除帐户，但您可以删除 LinkedIn 连接，然后从您的 LinkedIn 登录创建一个新帐户以重试。

至于他们使用和扩展它的实现，我还没有开始研究。计划这样做，因为如果它看起来不错，我也在考虑使用它。

# objective-c - 检测按下了哪个键

> ID：12770980
> 
> 赞同：-1
> 
> 时间：2012-10-07T17:12:17.537
> 
> 标签：objective-c, cocoa, detect, keydown

我如何知道在 Cocoa 应用程序中按下了哪个键（我知道每个键都有一个关联的数字）？就我而言，我想将密钥记录到控制台。

这是我的代码：

```
- (BOOL)acceptsFirstResponder {
return YES;
}

-(void)keyUp:(NSEvent*)event {
NSLog(@"Key %@", event);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T17:16:46.647

使用[`NSEvent`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSEvent_Class/Reference/Reference.html)方法[`keyCode`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSEvent_Class/Reference/Reference.html#//apple_ref/occ/instm/NSEvent/keyCode)，[`characters`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSEvent_Class/Reference/Reference.html#//apple_ref/occ/instm/NSEvent/characters)或[`charactersIgnoringModifiers`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSEvent_Class/Reference/Reference.html#//apple_ref/occ/instm/NSEvent/charactersIgnoringModifiers)。

```
- (void)keyUp:(NSEvent *)event {
    NSLog(@"Characters: %@", [event characters]);
    NSLog(@"KeyCode: %hu", [event keyCode]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T17:15:57.080

`NSEvent`具有[`keyCode`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSEvent_Class/Reference/Reference.html#//apple_ref/occ/cl/NSEvent)返回您正在寻找的内容的方法。

# android - 如何在Android中找到每行的字符数或字符串元素

> ID：12770981
> 
> 赞同：1
> 
> 时间：2012-10-07T17:12:25.300
> 
> 标签：android, string, textview, character, line

我有一个 TextView，它的字符串很大，编译时使用多行。我试图弄清楚如何找到每行中字符串元素或字符的数量。

TextView 的 XML

```
 <TextView
        android:id="@+id/textViewSentenceP"
        android:layout_gravity="center"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.00"
        android:gravity="center"
        android:singleLine="false"
        android:padding="25dip" 
        android:scrollHorizontally="false"
        android:textColor="#FFFFFFFF"
        android:maxLines = "5"
        android:scrollbars = "vertical"
        android:textSize="12sp" /> 
```

我的代码完美运行我只需要知道如何找到每行中的元素数量。此外，如果找不到，那么如果我可以确定哪个元素位于文本行的末尾或哪个元素开始下一行文本，这也是一个很好的答案。谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T02:11:38.023

没关系我明白了！！

使用 getLineStart 方法解决了问题！对于任何与我有类似问题的人，请尝试此代码，也许它会对您有所帮助！注意：getLineStart() 将按顺序读取每一行中的所有字符，包括空格，直到到达该特定行。

```
 int curLine = tv.getLayout().getLineStart(0);
     int nextLine = tv.getLayout().getLineStart(1);
     int difference = nextLine-curLine; 
```

差异的值将是 curLine 上有多少个字符（包括空格）

# mapping - 如何将整数数据库类型映射到 java 布尔值？

> ID：12770983
> 
> 赞同：0
> 
> 时间：2012-10-07T17:12:33.427
> 
> 标签：mapping, jdo, datanucleus

我已经在应用它，它就像数据库中的整数值一样`0`，java 布尔变量变为 false，反之亦然。但我想知道是否可以反过来映射`0`for`true`和`1`for `false`。

这让我想到，我之前已经将 java 映射`enum`到整数，这在文档中得到了很好的解释，我想知道 Datanucleus 是否足够灵活，可以在持久化值或加载值时将任何数据库类型映射到任何 java 类型。例如，将低于指定值的数据库数据库映射到 java boolean`false`并将超过该值的数据库映射到 java boolean `true`。或者将字符串映射为整数（字符串长度可能）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-08T13:31:27.163

也许您只是使用标准 JDO 元数据并定义“jdbc-type”，然后看看会发生什么。我不会认为支持所有可能的组合是可行的（实际上其中许多只是愚蠢的）。

# java - java在二维矩阵中移动

> ID：12770985
> 
> 赞同：1
> 
> 时间：2012-10-07T17:12:43.227
> 
> 标签：java, multidimensional-array

我有一个二维数组 int matrix[numNodes][numArcs]。这是一个发生矩阵。

现在，如果我们想添加一个弧，我们必须检查这些节点是否存在并且弧不存在。这部分效果很好。我需要做的以下事情是找到一个空列来添加弧。所以矩阵一开始就全是零。所以它很简单，你搜索每一列，直到你找到一列全是零。听起来很简单，但它现在可以工作了。这部分代码如下：

```
 outerloop:
    for (int i = 0; i < numArcs; i++){
        for (int j = 0; j < numNodes; j++){
            if (matriz[j][i] != 0)
                break;
                //It finds a number != 0 so it should move to the next column 

            //If it gets here, the whole column was full of zeros
            column = i; 
            key = true;
            break outerloop;
        }
    } 
```

我使用密钥知道我找到了该列，因为如果我没有找到它，因为矩阵已满，我需要复制它。那是与此问题无关的另一个问题。

现在，我试图找出问题所在，我注意到以下几点：它只检查这些位置：

```
01
02
03
03 
```

正如您所看到的，它只是检查每列的第一个位置，而不是一路向下。对我来说这毫无意义。在我的示例中，NumNode 是 10，所以它应该一直向下。

编辑：我的确切示例矩阵是这样的：

```
 -1  -1 -1 0 0 0 ....
  0   1  0 0 0 ...
  0   0  1 0 0 ..... 
```

因此，当它到达第四列时，它会读取零并返回空列。我添加的下一个 n 弧也是如此。我添加的以下弧不再触及第一行。谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:18:09.517

```
for (int i = 0; i < numArcs; i++){
    for (int j = 0; j < numNodes; j++){
        if (matriz[j][i] != 0)
            break;
            //It finds a number != 0 so it should move to the next column 

        //If it gets here, the whole column was full of zeros
        column = i; 
        key = true;
        break outerloop;
    }
} 
```

如果在内部循环中，您第一次没有中断怎么办..您将存储`i`到列中而不检查该列的其他行..

您可以更好地使用布尔标志变量来检查您想要的内容。

```
 int[][] matrix = new int[5][4];
    boolean columnEmpty = true;
    int column = 0;
    boolean key = false;

    matrix[0][0] = -1;
    matrix[0][1] = -1;
    matrix[1][1] = 1;
    matrix[1][2] = -1;
    matrix[2][2] = -1;

    outerloop: for (int i = 0; i < 5; i++){
            columnEmpty = true;
            for (int j = 0; j < 4; j++){
                if (matrix[j][i] != 0) {
                   columnEmpty = false;
                   break;
                }

            }
            if (columnEmpty) {
                // If we are here.. then flag was never set to `true`. 
                // So, all the rows for that column was Zero..
                column = i; 
                key = true;
                break outerloop;
            }

        }

    System.out.println("Column : " + column); 
```

# php - 高流量 - 设置相同 memcached 密钥的多个请求？

> ID：12770987
> 
> 赞同：1
> 
> 时间：2012-10-07T17:13:04.950
> 
> 标签：php, memcached, key, high-traffic

我正在设置 memcached。我有几个关于高流量和更新/设置密钥的最佳实践的问题。我正在创建一个在线游戏，其中以 10,50,100 的增量为用户分配积分。

用途：将用户“游戏统计信息”存储在密钥中，并每 5 分钟左右运行一次 cron 作业，以永久更新数据存储中的统计信息。这样，“游戏”就可以运行，而无需去数据库获取值、点。

将使用预热脚本来提取和填充用户统计信息的键

问题：
1）在交通繁忙的道路上是否会出现问题并试图写信给该用户点关键？

2）在内存缓存中增加值的最佳实践？

这是我现在使用的粗略想法

```
$newval = $memcache->get( $key ); 
$memcache->set($key, $newval+10, false, 1000) or die ("Failed to save data at the server"); 
```

3）在内存缓存中存储用户游戏统计数据的建议？任何投入将不胜感激。

谢谢你们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T17:20:49.853

在增加存储在 Memcache 中的值时，使用[Memcache 的增量函数](http://www.php.net/manual/en/memcached.increment.php)来避免潜在的竞争条件。

如果您需要做除递增之外的其他数学运算（例如重置为零），请使用[compare 和 swap (cas)](http://www.php.net/manual/en/memcached.cas.php)。

# java - Tomcat 不返回图片资源

> ID：12770989
> 
> 赞同：0
> 
> 时间：2012-10-07T17:13:09.453
> 
> 标签：java, tomcat, tomcat6

我正在使用eclipse并使用eclipse中的tomcat6运行我的jsp/servlet。我的 servlet 为我创建了一个图像，我将其存储到我的 webapps 的目录中。但是当我尝试从我的 JSP 访问此图像时，它返回我该资源不可用。

有什么问题？

Servlet 将图像存储在“myapp/images/saved.png”中

![在此处输入图像描述](../Images/7aa56481fcfa9db2eb8d084a2de48501.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T17:56:52.010

您需要将`images`目录移动到`WebContent`目录中。这将使它工作。

# html - window.mozIndexedDB 在 Firefox 15 中为空

> ID：12770991
> 
> 赞同：4
> 
> 时间：2012-10-07T17:13:34.680
> 
> 标签：html, firefox, indexeddb

我正在尝试在[https://developer.mozilla.org/en-US/docs/IndexedDB/Using_IndexedDB上运行“使用 IndexedDB”示例代码](https://developer.mozilla.org/en-US/docs/IndexedDB/Using_IndexedDB)

走出大门，我偶然发现了第一行代码： `window.indexedDB = window.indexedDB || window.webkitIndexedDB || window.mozIndexedDB;`

使用 Firebug，我看到`window.indexedDB`FF 15 未定义预期，window.webkitIndexedDB 未按预期定义（FF 不是 webkit），但`window.mozIndexedDB`为空但未定义。如果它为 null，则告诉我它存在但没有有效值/未初始化。

这适用于 OSX 10.6.8 和 Ubuntu 12.04 上的 Firefox 15.0.1。有人能告诉我为什么我看不到/使用`window.mozIndexedDB`吗？难道我做错了什么？

为了完整起见，这是我的 JavaScript 文件：

```
window.indexedDB = window.indexedDB || window.webkitIndexedDB || window.mozIndexedDB;

var request = window.indexedDB.open("MyTestDatabase", 3);
var db;

request.onerror = function (event) {
    alert("Oops, request.onerror");
};

request.onsuccess = function (event) {
    // Do something with request.result!
    alert("Made it to request.onsuccess");

    db = request.result;
};

// This event is only implemented in recent browsers
request.onupgradeneeded = function (event) {
    alert("Made it to request.onupgradeneeded");
};

db.onerror = function (event) {
    alert("Database error (db.onerror): " + event.target.errorCode);
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:15:08.950

我最初的 HTML5 应用程序使用 jQuery Mobile 和 REST WS。在开发中，我会直接从文件系统运行它，它工作正常。为了与同事分享，我让它在 Apache httpd 后面运行。

在添加 IndexedDB 时，我试图通过浏览器查看文件系统中的文件来进行测试。它不起作用，这就是导致我回到第一方并尝试运行来自 Mozilla 的示例代码的原因。

看起来 IndexedDB 需要一个域，即使它是本地主机。我只是将我的代码放在 public_html 下并通过 httpd/localhost 查看它，它运行良好。

# c++ - 敌人攻击玩家的方法

> ID：12770995
> 
> 赞同：0
> 
> 时间：2012-10-07T17:14:16.733
> 
> 标签：c++, text-based

嘿，在我的基于文本的冒险游戏中。我有这堂课：

```
class wolves
{
    public:
    string name;
    int health;
private:
    string attack;
    //wolves(string name,int health); // Constructor
    //hitPoints() +1;
}; 
```

我有一种随机计算生命值的方法。我不知道如何使用类创建函数。或者如何在类中使用 hitpoints 函数。

任何人都可以帮忙吗？

```
hitpoints()

int hitPoints()
{
    srand(time(0)); // seed random number generator based on current time
int randomNumber= rand(); // generate random number
int hitPoints = (randomNumber% 20) + 1; // get a number between 1 and 20
return hitPoints;
}
int fatigue()
{
    srand(time(0)); // seed random number generator based on current time
int randomNumber= rand(); // generate random number
int fatigue = (randomNumber% 5) + 1; // get a number between 1 and 5
return fatigue;
}
int Encounter()
{

    srand(time(0)); // seed random number generator based on current time
    int randomNumber= rand(); // generate random number
    int encounter = (randomNumber% 3); // get a number between 1 and 5
    cin >> encounter;
        switch(encounter)
        {
        case 1:
            Wolves();
            menu = false;
            break;
        case 2:
            Soldier();
            break;
        case 3:
            CaveBear();
            break;
        }
        cout << encounter;

    return encounter;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T17:18:49.450

要定义类成员函数，请使用范围运算符`::`将名称限定为类名：

```
int wolves::hitpoints()
{
    return health;
} 
```

这也适用于结构和命名空间内的函数。

当然，函数需要先在类体内声明：

```
class wolves
{
public:
    string name;
    //wolves(string name,int health); // Constructor
    int hitPoints();
private:
    int health;
    string attack;
}; 
```

此外，对于非常短的函数，在类定义中内联定义它们通常更有意义：

```
class wolves
{
public:
    string name;
    //wolves(string name,int health); // Constructor
    int hitPoints() { return health; }
private:
    int health;
    string attack;
}; 
```

# c# - C# 顶级项目

> ID：12770998
> 
> 赞同：1
> 
> 时间：2012-10-07T17:15:13.380
> 
> 标签：c#

我是 C# 新手，所以请原谅我对此事的无知。

在 C++ 中，您可以定义函数（不在类中的方法）。

你能在 C# 中做同样的事情吗，我不是指 lambda 或匿名函数。我指的是与 C++ 相同的方式。

前任。

`public void f() { }`——不在课堂上。

这也引出了我的第二个问题，您可以在 C# 中定义的唯一顶级项目是什么。

谢谢 ：-）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T17:21:14.100

**答案1：**

在 C# 中方法必须包含在 class/struct 中，这基本上是**Encapsulation**的概念，即

> 绑定数据和函数，将在一个实体中对这些数据进行操作。

**答案 2：**

您可以定义**struct**、**enum**、**Interface**、**Delegate**以及其他顶级项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T17:24:23.533

不，您不能拥有不在类中的函数。C# 要求所有函数都在一个类中（例如方法）。不过，您可以拥有静态函数，这些函数可以调用而无需实例化对象的实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T17:34:26.783

您的第一个问题的答案是否定的，您可能会在这里找到原因： [为什么 C# 不实现“顶级”方法？](http://blogs.msdn.com/b/ericlippert/archive/2009/06/22/why-doesn-t-c-implement-top-level-methods.aspx)

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T17:22:18.637

`struct`、`class`、`enum`和`delegate`-`interface`是 C# 中的顶级项。

[C# 语言规范](http://download.microsoft.com/download/0/B/D/0BDA894F-2CCD-4C2C-B5A7-4EB1171962E5/CSharp%20Language%20Specification.htm)了解详细信息。