# StackOverflow 问答 12785000-12785999

# java - Jetty 服务器上的 Log4j2 和 Flume

> ID：12785000
> 
> 赞同：1
> 
> 时间：2012-10-08T15:41:35.360
> 
> 标签：java, maven, jetty, flume, log4j2

我正在尝试使用 Log4J2 和 Flume-ng 对分布式系统进行集中式日志记录。系统中的其中一台服务器运行 Jetty，我用它来为系统执行 Web 服务（servlet）。当我在这个项目中包含 Log4J2 和 Flume-ng 的 Maven 依赖项时，它会破坏 Jetty 并且它不会正确启动/绑定。如果我删除下面列表中的依赖项（log4j-flume-ng），那么 Jetty 将正常运行，给我以下输出：

```
2012-10-08 16:36:33.457::INFO:  Logging to STDERR via org.mortbay.log.StdErrLog
2012-10-08 16:36:34.285 INFO net.spy.memcached.MemcachedConnection:  Added {QA sa=gs-adhoc1-test.jrs-software.co.uk/10.1.1.161:11211, #Rops=0, #Wops=0, #iq=0, topRop=null, topWop=null, toWrite=0, interested=0} to connect queue
2012-10-08 16:36:34.290 INFO net.spy.memcached.MemcachedConnection:  Connection state changed for sun.nio.ch.SelectionKeyImpl@31ac05
2012-10-08 16:36:34.272::INFO:  jetty-7.0.0.pre5
2012-10-08 16:36:34.322::INFO:  Started SelectChannelConnector@0.0.0.0:5000 
```

但是有了这种依赖关系，它就会出现（只是 Memcached 输出）：

```
2012-10-08 16:36:34.285 INFO net.spy.memcached.MemcachedConnection:  Added {QA sa=gs-adhoc1-test.jrs-software.co.uk/10.1.1.161:11211, #Rops=0, #Wops=0, #iq=0, topRop=null, topWop=null, toWrite=0, interested=0} to connect queue
2012-10-08 16:36:34.290 INFO net.spy.memcached.MemcachedConnection:  Connection state changed for sun.nio.ch.SelectionKeyImpl@31ac05 
```

Maven POM中的依赖如下：

```
<dependencies>
    <dependency>
        <groupId>io.netty</groupId>
        <artifactId>netty</artifactId>
        <version>3.5.4.Final</version>
        <scope>compile</scope>
    </dependency>

    <dependency>
        <groupId>org.mortbay.jetty</groupId>
        <artifactId>jetty</artifactId>
        <version>7.0.0.pre5</version>       
    </dependency>

    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>3.0-alpha-1</version>
        <scope>compile</scope>
    </dependency>

    <dependency>
        <groupId>net.sf.json-lib</groupId>
        <artifactId>json-lib</artifactId>
        <version>2.3</version>
        <classifier>jdk15</classifier>
        <exclusions>
            <exclusion>
                <groupId>commons-logging</groupId>
                <artifactId>commons-logging</artifactId>
            </exclusion>
        </exclusions>
    </dependency>

    <dependency>
        <groupId>net.sf.ezmorph</groupId>
        <artifactId>ezmorph</artifactId>
        <version>1.0.6</version>
    </dependency>  

    <dependency>
        <groupId>couchdb4j</groupId>
        <artifactId>couchdb4j</artifactId>
        <version>0.5.0-i386-1</version>
    </dependency>

    <dependency>
        <groupId>org.json</groupId>
        <artifactId>json</artifactId>
        <version>20090211</version>
    </dependency>

    <dependency>
        <groupId>com.google.code.simple-spring-memcached</groupId>
        <artifactId>spymemcached</artifactId>
        <version>2.8.1</version>
    </dependency>

    <dependency>
        <groupId>org.apache.logging.log4j</groupId>
        <artifactId>log4j-api</artifactId>
        <version>2.0-beta1</version>
    </dependency>

    <dependency>
        <groupId>org.apache.logging.log4j</groupId>
        <artifactId>log4j-core</artifactId>
        <version>2.0-beta1</version>
    </dependency>

    <dependency>
        <groupId>org.apache.logging.log4j</groupId>
        <artifactId>log4j-flume-ng</artifactId>
        <version>2.0-alpha2</version>       
    </dependency>
</dependencies> 
```

我不知道如何开始解决这个问题。我已经设法让 Flume 与我的其他服务器一起工作没有问题，但似乎 Jetty 不会有它。有人可以提供任何建议以使其正常工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:15:58.927

我最近在我的项目中使用了 jetty-6.1.26 和 log4j2。似乎您错过了 log4j2-jcl 来桥接其他包的 commons-logging，而不是排除它。没有它我无法开始我的项目。您需要定义**commons-logging.properties**以使用 Log4j2 实现，并确保它首先出现在您的类路径中。

```
org.apache.commons.logging.Log=org.apache.commons.logging.impl.Log4JLogger 
```

log4j2 仍然是 beta2 并且在 commons-logging 中有一个已知的错误，我发现它在 beta3 中已修复，但不确定何时发布。

# android - 验证Android apk没有被重新打包？

> ID：12785001
> 
> 赞同：21
> 
> 时间：2012-10-08T15:41:44.813
> 
> 标签：android, security, checksum

希望提高我的 Android 应用程序的安全性，以标记 .apk 是否已被提取、修改、重新打包和退出。这是来自 Zdnet 的文章，指出了问题[link1](http://www.zdnet.com/android-malwares-dirty-secret-repackaging-of-legit-apps-7000000886/)。

令人担忧的是，如果该应用程序成为黑客的目标，他们可能会添加恶意代码并上传到备用应用程序商店并欺骗用户下载它。

所以我正在考虑使用代码来验证 apk 或签名证书的校验和？

我很欣赏可以重新打包应用程序代码并删除任何安全代码，但这确实增加了重新打包它的难度，也许足以让他们尝试另一个应用程序。

[更新]我知道 Google Play 商店许可模块提供了类似的功能，但我正在为非付费应用和其他/非市场寻找一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-05T08:39:14.803

我最终使用了[Dexguard](http://www.saikoa.com/dexguard)（Android 付费混淆器）。它提供了一个执行 apk 验证的模块。它易于实施，并提供比一般保护更好的保护。

这是进行检查的代码：

```
dexguard.util.TamperDetection.checkApk(context) 
```

主要问题是在哪里存储 apk 的校验和以进行验证，因为它可以被替换。dexguard 方法是在本地检查它，但使用类/字符串加密和 api 隐藏等其他功能会掩盖此调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T16:09:09.543

以下是一些可以帮助您的文章。

[在运行时检索 APK 签名](https://stackoverflow.com/questions/8682731/retrieve-the-apk-signature-at-runtime-for-android)。
[自我检查 APK 签名。](https://stackoverflow.com/questions/9949459/self-checking-an-apks-signature)
[如何检查 APK 签名。](http://lulachronicles.blogspot.in/2009/11/how-to-check-signature-in-apk-files-or.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T15:46:30.833

使用 Google 许可服务它将与 Play 商店连接，以确保用户每隔几天购买一次应用程序。（你可以设置金额） 也看看 ProGuard。它将所有的类、方法和变量名从你的代码中剥离出来，一旦反编译就很难理解。

# linux - 使用 node.js 远程监控系统状态

> ID：12785005
> 
> 赞同：2
> 
> 时间：2012-10-08T15:41:57.990
> 
> 标签：linux, node.js, monitoring

我们在 node.js 中实现了一个监控解决方案，它对数据库完整性和 API 正常运行时间进行了一些基本检查。我们想扩展这个系统来收集我们 Linux 服务器的基本系统统计数据，比如 CPU 和磁盘使用情况。其中一些服务器位于我们无法控制的防火墙后面，只打开了一些非常基本的端口（ssh、ftp、http、https）。

如何在 node.js 中收集这些服务器的系统信息。是否有通过（安全的）RESTful API 公开这些信息的监控系统？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T20:23:10.420

我用这个用 javascript 编写的 ssh 客户端取得了很大的成功： [https ://github.com/mscdex/ssh2](https://github.com/mscdex/ssh2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:58:37.880

因此，有大量可用的解决方案用于监控系统统计信息：Nagios、Zabbix、Scout、Cacti。甚至还有一些托管的，例如 ServerDensity。

所有这些系统都应该涵盖顶级统计数据：CPU、RAM、磁盘 IO 和网络。它们都有一个插件基础设施，因此您可以发送自定义统计信息（API 正常运行时间、数据库可用性）并将它们与常规统计信息一起发送。

如果您在某个地方的云基础架构上运行，其中许多都提供“开箱即用”的信息，通常在您的帐户仪表板中（请参阅 Joyent 或 Azure 之类的人）。

这里的大问题是*“你还需要什么”*？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-31T14:33:45.123

使用 Nagios 的 NRPE 作为您要监控的盒子的客户端。它的设置相当简单，并且它的 API 已记录在案。[http://exchange.nagios.org/directory/Addons/Monitoring-Agents/NRPE--2D-Nagios-Remote-Plugin-Executor/details](http://exchange.nagios.org/directory/Addons/Monitoring-Agents/NRPE--2D-Nagios-Remote-Plugin-Executor/details)

# ruby - 正则表达式和字符串

> ID：12785007
> 
> 赞同：2
> 
> 时间：2012-10-08T15:42:01.950
> 
> 标签：ruby, regex

用下面的表达式：

```
words = string.scan(/\b\S+\b/i) 
```

我正在尝试使用单词边界和不区分大小写来扫描字符串，所以如果我有：

```
string = "A ball a Ball" 
```

然后当我有这个`each`块时：

```
words.each { |word| result[word] += 1 } 
```

我期待这样的事情：

```
{"a"=>2, "ball"=>2} 
```

但相反，我得到的是：

```
{"A"=>1, "ball"=>1, "a"=>1, "Ball"=>1} 
```

在这件事不起作用之后，我尝试创建一个新的正则表达式，例如：

```
Regexp.new(Regexp.escape(string), "i") 
```

但后来我不知道如何使用它*或*从这里继续前进。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T15:46:12.533

正则表达式以不区分大小写的模式匹配单词，但它不会以任何方式更改匹配的文本。因此，您将在块中收到原始形式的文本。计数时尝试将字符串转换为小写。

```
string = "A ball a Ball" 
words = string.scan(/\b\S+\b/i) # => ["A", "ball", "a", "Ball"]

result = Hash.new(0)
words.each { |word| result[word.downcase] += 1 } 
result # => {"a"=>2, "ball"=>2} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T15:46:54.553

正则表达式很好；您的问题是当您使用哈希增加计数器时。哈希键区分大小写，因此在递增时必须更改大小写：

```
words.each { |word| result[word.upcase] += 1 } 
```

# knockout.js - KnockoutJs，无法获得正确的值

> ID：12785010
> 
> 赞同：0
> 
> 时间：2012-10-08T15:42:43.667
> 
> 标签：knockout.js, knockout-2.0

我将我的代码上传到 jsFiddle，你可以在那里测试它。

[http://jsfiddle.net/2RPsw/1/](http://jsfiddle.net/2RPsw/1/)

这是问题所在，而不是获得全名，它显示了函数的源代码。如果我使用 ko.computed，它将起作用。我在下面所做的也应该没问题。有人可以向我解释为什么它显示源代码，而不是价值。

```
 <p>First name: <input data-bind="value: firstName" /></p>
            <p>Last name: <input data-bind="value: lastName" /></p>
            <p>Full name: <span data-bind="text: fullName"></span></p>? 
```

KO代码：

```
function AppViewModel() {

    self = this;

    self.firstName = ko.observable("Bert");
    self.lastName = ko.observable("Bertington");
    self.fullName = function(){
        return  self.firstName() + " " + self.lastName();

    };
}

// Activates knockout.js
ko.applyBindings(new AppViewModel());? 
```

**更新：**

回答中医的问题。为什么我不想使用 ko.computed。并不是我不想使用它，只是因为我很困惑，不知道什么时候使用它。例如

以下代码来自淘汰赛第一个教程。它不使用 ko.computegd，但它可以工作。

[http://learn.knockoutjs.com/#/?tutorial=intro](http://learn.knockoutjs.com/#/?tutorial=intro)

```
self.capName = function(){
    var curVal = self.lastName();
    self.lastName(curVal.toUpperCase());
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T15:44:58.040

您应该使用 ko.computed：

```
 self.fullName = ko.computed(function(){
        return  self.firstName() + " " + self.lastName();

 },this); 
```

这将确保无论何时您的值`firstName`或`lastName`更改更改都会反映在您的 ko.computed 函数中，并且您不必手动更新跨度的值。

如需进一步解释，您可以阅读以下内容：

[http://knockoutjs.com/documentation/computedObservables.html](http://knockoutjs.com/documentation/computedObservables.html)

此链接上或多或少给出了相同的示例。

如果您不想使用 ko.computed，请参阅此链接：http: [//jsfiddle.net/2RPsw/10/](http://jsfiddle.net/2RPsw/10/)

# html - 渲染不同字体的最佳方式

> ID：12785011
> 
> 赞同：0
> 
> 时间：2012-10-08T15:42:49.693
> 
> 标签：html, css, fonts

我正在寻找在网站内实现字体的最佳实践，但我仍然没有找到真正的答案。

在论坛和博客上，很多人说使用`@font-face`是最好的方法，其他使用**Typekit**或**Cufon**。

 **我不喜欢这三个选项。

**Font-face**使我的字体呈颗粒状。

**Typekit**不是免费软件，也没有我想要使用的所有字体。

**Cufon**使用帆布。

还有其他实现字体的方法吗？

有没有办法在没有颗粒的情况下渲染它？

* * *

截图：

**苹果电脑** ![在此处输入图像描述](../Images/eb1c0d4be200c734a59ceddbed35626d.png)

**视窗** ![在此处输入图像描述](../Images/5cfff896673927f1713cfb8a7bee5edb.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T17:31:44.840

字体渲染取决于操作系统、操作系统中的某些字体特定设置、浏览器和字体本身。字体为屏幕使用（提示，...）准备得越好，它看起来就越好。他们不是“这样做，它总是很好的方式”，有太多的因素在起作用。在上面的图像中，您尝试渲染非常细的字体，这总是有问题的，特别是如果字体被错误地暗示和/或设置为小尺寸。TypeKit 和 google webfonts 等服务的优势在于它们为您提供屏幕优化字体，因此如果您对字体本身不熟悉，您应该更喜欢一些准备好的字体，或者如果字体太糟糕，请自行优化字体。

祝你好运……</p>

**编辑：**

一旦我忘记在windows上启用某种字体渲染选项，我认为它在某个地方：`leftclick computer > properties > performance`，但我不确定到底在哪里，我不再使用windows来找到它，但开始是在»leftclick计算机>属性« 它是关于字体的“抗锯齿”。勾选方框后，它看起来好多了。在这种情况下，它也是一种细字体……</p>

问候……</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:54:32.383

你所说的“粒状”到底是什么意思？我只在旧版本的 Internet Explorer 中看到过，并且有用于字体平滑的 CSS 属性。

使用 TypeKit uses `@font-face`，它只是以不同的方式加载。你也试过谷歌的网络字体吗？

这是一篇关于最佳使用方法的精彩文章：http: [//paulirish.com/2009/bulletproof-font-face-implementation-syntax/](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/)

```
@font-face {
  font-family: 'Graublau Web';
  src: url('GraublauWeb.eot?') format('eot'), 
       url('GraublauWeb.woff') format('woff'), 
       url('GraublauWeb.ttf') format('truetype');
} 
```**

# android - 如何解析json数组中的数组

> ID：12785012
> 
> 赞同：0
> 
> 时间：2012-10-08T15:42:55.100
> 
> 标签：android

我正在解析 json，但在我的 jsonarray 中我有另一个数组，这个数组值没有标签。（属性名称。）这是我的代码。我可以解析其他值，但不能解析图库数组。如何在 onitemclick 方法中解析图库数组的值？谢谢。

我的 json 链接： http://kilimmobilya.com.tr/mobileservices/default.aspx?i= [yeniUrunler](http://kilimmobilya.com.tr/mobileservices/default.aspx?i=yeniUrunler)

我的json：

```
{
    "veri": [
        {
            "id": "1436",
            "tarih": "08.10.2012",
            "baslik": "Ares Plazma TV \u00dcnitesi",
            "kImaj": "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Plazma-Unitesi/210x120/Ares-Plazma-VS1-00.jpg",
            "kisaAciklama": "",
            "icerik": "",
            "fiyat": "799",
            "Gallery": [
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Plazma-Unitesi/630x360/Ares-Plazma-VS1-00.jpg",
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Plazma-Unitesi/630x360/Ares-Plazma-VS1-01.jpg",
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Plazma-Unitesi/630x360/Ares-Plazma-VS1-02.jpg",
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Plazma-Unitesi/630x360/Ares-Plazma-VS2-00.jpg",
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Plazma-Unitesi/630x360/Ares-Plazma-VS2-01.jpg"
            ]
        },
        {
            "id": "1434",
            "tarih": "08.10.2012",
            "baslik": "Ares Yatak Odas\u0131",
            "kImaj": "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Yatak-Odasi/210x120/Ares-Yatak-Odasi-Takim-00.jpg",
            "kisaAciklama": "",
            "icerik": "",
            "fiyat": "5690",
            "Gallery": [
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Yatak-Odasi/630x360/Ares-Yatak-Odasi-Takim-00.jpg",
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Yatak-Odasi/630x360/Ares-Yatak-Odasi-Takim-00-1.jpg",
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Yatak-Odasi/630x360/Ares-Yatak-Odasi-Takim-01.jpg",
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Yatak-Odasi/630x360/Ares-Yatak-Odasi-Takim-02.jpg",
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Yatak-Odasi/630x360/Ares-Yatak-Odasi-Takim-03.jpg",
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Yatak-Odasi/630x360/Ares-Yatak-Odasi-Takim-04.jpg",
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Yatak-Odasi/630x360/Ares-Yatak-Odasi-Takim-05.jpg",
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Yatak-Odasi/630x360/Ares-Yatak-Odasi-Takim-06.jpg",
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Yatak-Odasi/630x360/Ares-Yatak-Odasi-Takim-07.jpg",
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Yatak-Odasi/630x360/Ares-Yatak-Odasi-Takim-08.jpg",
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Yatak-Odasi/630x360/Ares-Yatak-Odasi-Takim-09.jpg",
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Yatak-Odasi/630x360/Ares-Yatak-Odasi-Takim-10.jpg",
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Yatak-Odasi/630x360/Ares-Yatak-Odasi-Takim-11.jpg",
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Yatak-Odasi/630x360/Ares-Yatak-Odasi-Takim-12.jpg",
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Yatak-Odasi/630x360/Ares-Yatak-Odasi-Takim-13.jpg",
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Yatak-Odasi/630x360/Ares-Yatak-Odasi-Takim-14.jpg",
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Yatak-Odasi/630x360/Ares-Yatak-Odasi-Takim-15.jpg",
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Yatak-Odasi/630x360/Ares-Yatak-Odasi-Takim-16.jpg",
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Yatak-Odasi/630x360/Ares-Yatak-Odasi-Takim-17.jpg",
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Yatak-Odasi/630x360/Ares-Yatak-Odasi-Takim-18.jpg",
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Yatak-Odasi/630x360/Ares-Yatak-Odasi-Takim-19.jpg",
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Yatak-Odasi/630x360/Ares-Yatak-Odasi-Takim-20.jpg",
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Yatak-Odasi/630x360/Ares-Yatak-Odasi-Takim-21.jpg",
                "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Yatak-Odasi/630x360/Ares-Yatak-Odasi-Takim-22.jpg"
            ]
        }
package com.eticaret.hakan;
import java.lang.reflect.Array;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import com.eticaret.hakan.R;

import android.R.string;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.ProgressDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.res.Resources;
import android.graphics.drawable.ColorDrawable;
import android.graphics.drawable.Drawable;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.view.WindowManager;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.Button;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class Yeniurunler extends Activity implements OnItemClickListener,OnClickListener {
    int gelencatid;
    Button altkampanya,altkatalog,altbayi,altiletisim;
    private static final String rssFeed = "http://kilimmobilya.com.tr/mobileservices/default.aspx?i=yeniUrunler";
    private static final String link="http://salih.arti-sanat.com/e-ticaret/s3.jpg";

    private static final String TAG_PRODUCTS = "veri";
    private static final String TAG_PID = "id";
    private static final String TAG_PNAME = "baslik";
    private static final String TAG_PPRICE = "tarih";
    private static final String TAG_PDESCRIPTION = "kisaAciklama";
    private static final String TAG_CREATEDAT = "tarih";

    private static final String TAG_LINK = "kImaj";
    private static final String TAG_GALLERY="Gallery";

    List<Item> arrayOfList;
    ListView listView;
    KampanyaRowAdapter objAdapter;
    JSONArray jsonArray;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
          requestWindowFeature(Window.FEATURE_NO_TITLE);
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.yeniurunler);
        altkampanya=(Button) findViewById(R.id.altkampanyalar);
        altkatalog=(Button) findViewById(R.id.altkataloglar);
        altbayi=(Button) findViewById(R.id.altbayilerimiz);
        altiletisim=(Button) findViewById(R.id.altiletisim);
        altkampanya.setOnClickListener(this);
        altkatalog.setOnClickListener(this);
        altbayi.setOnClickListener(this);
        altiletisim.setOnClickListener(this);
        listView = (ListView) findViewById(R.id.listview);
        listView.setDivider(new ColorDrawable(0x90000000)); 
        listView.setDividerHeight(1);
        listView.setOnItemClickListener(this);

        arrayOfList = new ArrayList<Item>();

        if (Utils.isNetworkAvailable(Yeniurunler.this)) {
            new MyTask().execute(rssFeed);
        } else {
            showToast("Ağ bağlantısı yok!!!");
        }

    }

    // My AsyncTask start...

    class MyTask extends AsyncTask<String, Void, String> {

        ProgressDialog pDialog;

        @Override
        protected void onPreExecute() {
            super.onPreExecute();

            pDialog = new ProgressDialog(Yeniurunler.this);
            pDialog.setMessage("Yükleniyor...");
            pDialog.setCancelable(false);
            pDialog.show();
        }

        @Override
        protected String doInBackground(String... params) {
            return Utils.getJSONString(params[0]);
        }

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);

            if (null != pDialog && pDialog.isShowing()) {
                pDialog.dismiss();
            }

            if (null == result || result.length() == 0) {
                showToast("Ürün Bulunamadı");
                Yeniurunler.this.finish();
            } else {

                try {
                    JSONObject mainJson = new JSONObject(result);
                    jsonArray = mainJson.getJSONArray(TAG_PRODUCTS);
                    for (int i = 0; i < jsonArray.length(); i++) {
                        JSONObject objJson = jsonArray.getJSONObject(i);

                        Item objItem = new Item();

                        objItem.setName(objJson.getString(TAG_PNAME));
                        objItem.setCity(objJson.getString(TAG_PDESCRIPTION));
                        objItem.setLink(objJson.getString(TAG_LINK));

                        //objItem.setLink(link);

                        arrayOfList.add(objItem);

                    }

                } catch (JSONException e) {
                    e.printStackTrace();
                }
                // check data...

                /*
                 * for (int i = 0; i < arrayOfList.size(); i++) { Item item =
                 * arrayOfList.get(i); System.out.println(item.getId());
                 * 
                 * System.out.println(item.getId());
                 * System.out.println(item.getName());
                 * System.out.println(item.getCity());
                 * System.out.println(item.getGender());
                 * System.out.println(item.getAge());
                 * System.out.println(item.getBirthdate()); }
                 */

                Collections.sort(arrayOfList, new Comparator<Item>() {

                    public int compare(Item lhs, Item rhs) {
                        return (lhs.getAge() - rhs.getAge());
                    }
                });
                setAdapterToListview();

            }

        }
    }

    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {

                Intent a = new Intent(getApplicationContext(), YeniUrunDetay.class);
                // starting new activity and expecting some response back

                startActivity(a);

        // sending pid to next activity

        }

    public void setAdapterToListview() {
        objAdapter = new KampanyaRowAdapter(Yeniurunler.this, R.layout.kampanyarow,
                arrayOfList);
        listView.setAdapter(objAdapter);
    }

    public void showToast(String msg) {
        Toast.makeText(Yeniurunler.this, msg, Toast.LENGTH_LONG).show();
    }

    public void onClick(View v) {
        // TODO Auto-generated method stub
switch (v.getId()) {

        case R.id.altkampanyalar:
            Intent goAltkampanya= new Intent(this, Kampanyalar.class);
            startActivity(goAltkampanya);

            break;
        case R.id.altkataloglar:
            Intent goAltkatalog = new Intent(this, Kataloglar.class);
            startActivity(goAltkatalog);

            break;
        case R.id.altbayilerimiz:
            Intent goBAyi= new Intent(this, Bayiler.class);
            startActivity(goBAyi);

            break;
        case R.id.altiletisim:
            Intent goAltiletisim= new Intent(this, Iletisim.class);
            startActivity(goAltiletisim);

            break;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:28:59.730

这是你的 POJO

```
public class Veri {
    private long id;
    private String date;
    private String baslik;
    private String kImagj;
    private String kisaAciklama;
    private String icerik;
    private String fiyat;
    private List<String> gallery;

    // Constructors, getters and setters…
} 
```

这是要解析的代码

```
private List<Veri> parseJson(String json) {
    List<Veri> veriList = new ArrayList<Veri>();

    List<String> galleryImages = new ArrayList<String>();
    try {
        JSONObject jsonObject = new JSONObject(json);
        JSONArray veriArray = jsonObject.getJSONArray("veri");
        int nVeri = veriArray.length();
        for (int i = 0; i < nVeri; i++) {
            JSONObject veriObject = veriArray.getJSONObject(i);
            long id = Long.valueOf(veriObject.getString("id"));
            String date = veriObject.getString("tarih");
            String baslik = veriObject.getString("baslik");
            String kImaj = veriObject.getString("kImaj");
            String kisaAciklama = veriObject.getString("kisaAciklama");
            String icerik = veriObject.getString("icerik");
            String fiyat = veriObject.getString("fiyat");
            JSONArray galleryImageArray = veriObject.getJSONArray("Gallery");

            int nImages = galleryImageArray.length();
            for(int j = 0; j < nImages; i++) {
                galleryImages.add(galleryImageArray.getString(j));
            }

            Veri veri = new Veri();
            veri.setId(id);
            veri.setDate(date);
            veri.setBaslik(baslik);
            veri.setKImagj(kImaj);
            veri.setKisaAciklama(kisaAciklama);
            veri.setFiyat(fiyat);
            veri.setGallery(galleryImages);

            veriList.add(veri);
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }
    return veriList;
} 
```

这可能会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:21:45.773

您可以通过相应地定义对象来使用 Gson。对于Arrays，自然不会有字段名，所以可以解析成List。

这是一个使用此 url [http://kilimmobilya.com.tr/mobileservices/default.aspx?i=yeniUrunler响应的示例](http://kilimmobilya.com.tr/mobileservices/default.aspx?i=yeniUrunler)

响应数组中的 JsonObject 是；

```
{
id: "1436",
tarih: "08.10.2012",
baslik: "Ares Plazma TV Ünitesi",
kImaj: "http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Plazma-Unitesi/210x120/Ares-Plazma-VS1-00.jpg",
kisaAciklama: "",
icerik: "",
fiyat: "799",
Gallery: [
"http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Plazma-Unitesi/630x360/Ares-Plazma-VS1-00.jpg",
"http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Plazma-Unitesi/630x360/Ares-Plazma-VS1-01.jpg",
"http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Plazma-Unitesi/630x360/Ares-Plazma-VS1-02.jpg",
"http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Plazma-Unitesi/630x360/Ares-Plazma-VS2-00.jpg",
"http://www.kilimmobilya.com.tr/urunler/PANEL-GRUP/Ares-Plazma-Unitesi/630x360/Ares-Plazma-VS2-01.jpg"
]
}, 
```

创建一个Java对象；

```
public class Urun implements Serializable {

    private static final long serialVersionUID = 1L;

    @Expose public String id;
    @Expose public String tarih;
    @Expose public String baslik;
    @Expose public String kImaj;
    @Expose public String kisaAciklama;
    @Expose public String icerik;
    @Expose public String fiyat;
    @Expose public List<String> Gallery;// notice this is a List of String

} 
```

然后您可以轻松地将 JsonObject 解析为已定义的类。使用 Gson 的示例

```
Urun urun = (new Gson()).fromJson(jsonObj, Urun.class); 
```

希望这可以帮助...

# java-me - 版权不可用诺基亚位置 API（OVI 地图）

> ID：12785016
> 
> 赞同：2
> 
> 时间：2012-10-08T15:43:09.180
> 
> 标签：java-me, samsung-mobile, nokia-s40, here-api

我制作了一个简单的 J2ME 应用程序，使用 Location API 在我的应用程序上显示地图，当我在诺基亚手机上运行它时，它运行良好，但是当我尝试在三星手机上运行它时，我得到了那个错误

版权不可用

任何人都可以帮忙，我正在使用本教程中的代码

[http://www.developer.nokia.com/Community/Wiki/How_to_calculate_and_show_a_route_with_Java_ME_Location_API](http://www.developer.nokia.com/Community/Wiki/How_to_calculate_and_show_a_route_with_Java_ME_Location_API)

它在诺基亚 C2 中运行良好，但不适用于任何三星手机并产生先前的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:57:42.010

适用于 Java的[诺基亚 Maps API](http://developer.here.net/java)旨在在任何 Java ME 设备上运行，而不是使其特定于诺基亚手机。鉴于 Java ME 手机种类繁多，您很可能遇到了某种无法预料的兼容性问题。（很明显，大部分测试都是在诺基亚手机上进行的）

“**版权不可用”**消息完整说明：

> 尝试下载版权时出错。请检查您的互联网设置。

**通过 http**下载版权信息是初始化 a 时要做的第一件事`MapCanvas`，因为诺基亚本身有义务在地图数据从第三方购买的地图上显示版权。

我的猜测是，您正在测试的三星设备未正确配置为连接到 Internet（可能没有 SIM 卡？），或者三星固件将下载版权的 URL 误解为无效。

使用 Sun WTK 也观察到了 URL 被误解的问题，解决方法（如下所示）是使用托管在中国的地图服务器用于不兼容的 SDK，因为 URL 的格式略有不同，并且设备通常更宽容。

```
// Due to an issue with the hostnames that are used it is not possible to use
// international maps at this stage on the WTK emulators. Most devices and the 
// Nokia emulators do not suffer from this limitation.
if ("SunMicrosystems_wtk".equals(
    System.getProperty("microedition.platform"))) {
            ApplicationContext.getInstance().setChina(true);
} 
```

显然，您需要使用正确的值来`System.getProperty("microedition.platform")`使其工作。

# c# - 列表 更改时触发事件

> ID：12785019
> 
> 赞同：16
> 
> 时间：2012-10-08T15:43:17.987
> 
> 标签：c#, .net

我创建了一个继承**List的 Class** **EventList**，它在每次添加、插入或删除某些内容时触发一个事件：

 **```
public class EventList<T> : List<T>
{
    public event ListChangedEventDelegate ListChanged;
    public delegate void ListChangedEventDelegate();

    public new void Add(T item)
    {
        base.Add(item);
        if (ListChanged != null
            && ListChanged.GetInvocationList().Any())
        {
            ListChanged();
        }
    }
    ...
} 
```

目前，我将它用作这样的属性：

```
public EventList List
{
    get { return m_List; }
    set
    {
        m_List.ListChanged -= List_ListChanged;

        m_List = value;

        m_List.ListChanged += List_ListChanged;
        List_ListChanged();
    }
} 
```

现在我的问题是，如果一个新对象被引用或阻止它，我可以以某种方式处理它，所以我不必在设置器中进行事件连接吗？

当然，我可以将属性更改为“私有集”，但我也希望能够将类用作变量。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-08T15:56:53.720

您很少在类中创建集合类的新实例。实例化一次并清除它，而不是创建一个新列表。（并使用 ObservableCollection，因为它已经继承了[INotifyCollectionChanged](http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged.aspx)接口）

```
private readonly ObservableCollection<T> list;
public ctor() {
    list = new ObservableCollection<T>();
    list.CollectionChanged += listChanged;
}

public ObservableCollection<T> List { get { return list; } }

public void Clear() { list.Clear(); }

private void listChanged(object sender, NotifyCollectionChangedEventArgs args) {
   // list changed
} 
```

这样，您只需连接一次事件，并且可以通过调用 clear 方法来“重置”它，而不是检查属性的 set 访问器中的前一个列表是否为 null 或相等。

* * *

通过 C#6 中的更改，您可以从没有支持字段的构造函数分配 get 属性（支持字段是隐式的）

所以上面的代码可以简化为

```
public ctor() {
    List = new ObservableCollection<T>();
    List.CollectionChanged += OnListChanged;
}

public ObservableCollection<T> List { get; }

public void Clear()
{
    List.Clear();
}

private void OnListChanged(object sender, NotifyCollectionChangedEventArgs args)
{
   // react to list changed
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-08T15:48:24.820

ObservableCollection 是一个带有 CollectionChanged 事件的列表

[ObservableCollection.CollectionChanged 事件](http://msdn.microsoft.com/en-us/library/ms653375.aspx)

有关如何连接事件处理程序，请参阅 Patrick 的回答。+1

不确定您在寻找什么，但我将它用于一个集合，其中包含一个在添加、删除和更改时触发的事件。

```
public class ObservableCollection<T>: INotifyPropertyChanged
{
    private BindingList<T> ts = new BindingList<T>();

    public event PropertyChangedEventHandler PropertyChanged;

    // This method is called by the Set accessor of each property. 
    // The CallerMemberName attribute that is applied to the optional propertyName 
    // parameter causes the property name of the caller to be substituted as an argument. 
    private void NotifyPropertyChanged( String propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    public BindingList<T> Ts
    {
        get { return ts; }
        set
        {
            if (value != ts)
            {
                Ts = value;
                if (Ts != null)
                {
                    ts.ListChanged += delegate(object sender, ListChangedEventArgs args)
                    {
                        OnListChanged(this);
                    };
                }
                NotifyPropertyChanged("Ts");
            }
        }
    }

    private static void OnListChanged(ObservableCollection<T> vm)
    {
        // this will fire on add, remove, and change
        // if want to prevent an insert this in not the right spot for that 
        // the OPs use of word prevent is not clear 
        // -1 don't be a hater
        vm.NotifyPropertyChanged("Ts");
    }

    public ObservableCollection()
    {
        ts.ListChanged += delegate(object sender, ListChangedEventArgs args)
        {
            OnListChanged(this);
        };
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-08T16:01:46.560

如果您不想或无法转换为可观察集合，请尝试以下操作：

```
public class EventList<T> : IList<T> /* NOTE: Changed your List<T> to IList<T> */
{
  private List<T> list; // initialize this in your constructor.
  public event ListChangedEventDelegate ListChanged;
  public delegate void ListChangedEventDelegate();

  private void notify()
  {
      if (ListChanged != null
          && ListChanged.GetInvocationList().Any())
      {
        ListChanged();
      }
  }

  public new void Add(T item)
  {
      list.Add(item);
      notify();
  }

  public List<T> Items {
    get { return list; } 
    set {
      list = value; 
      notify();
    }
  }
  ...
} 
```

现在，对于您的财产，您应该能够将代码简化为：

```
public EventList List
{
  get { return m_List.Items; }
  set
  {
      //m_List.ListChanged -= List_ListChanged;

      m_List.Items = value;

      //m_List.ListChanged += List_ListChanged;
      //List_ListChanged();
  }
} 
```

为什么？在 EventList.Items 中设置任何内容都会调用您的私人`notify()`例程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-19T13:05:48.653

当有人从 IList.add(object) 调用通用方法时，我有一个解决方案。以便您也收到通知。

```
using System;
using System.Collections;
using System.Collections.Generic;

namespace YourNamespace
{
    public class ObjectDoesNotMatchTargetBaseTypeException : Exception
    {
        public ObjectDoesNotMatchTargetBaseTypeException(Type targetType, object actualObject)
            : base(string.Format("Expected base type ({0}) does not match actual objects type ({1}).",
                targetType, actualObject.GetType()))
        {
        }
    }

    /// <summary>
    /// Allows you to react, when items were added or removed to a generic List.
    /// </summary>
    public abstract class NoisyList<TItemType> : List<TItemType>, IList
    {
        #region Public Methods
        /******************************************/
        int IList.Add(object item)
        {
            CheckTargetType(item);
            Add((TItemType)item);
            return Count - 1;
        }

        void IList.Remove(object item)
        {
            CheckTargetType(item);
            Remove((TItemType)item);
        }

        public new void Add(TItemType item)
        {
            base.Add(item);
            OnItemAdded(item);
        }

        public new bool Remove(TItemType item)
        {
            var result = base.Remove(item);
            OnItemRemoved(item);
            return result;
        }
        #endregion

        # region Private Methods
        /******************************************/
        private static void CheckTargetType(object item)
        {
            var targetType = typeof(TItemType);
            if (item.GetType().IsSubclassOf(targetType))
                throw new ObjectDoesNotMatchTargetBaseTypeException(targetType, item);
        }
        #endregion

        #region Abstract Methods
        /******************************************/
        protected abstract void OnItemAdded(TItemType addedItem);

        protected abstract void OnItemRemoved(TItemType removedItem);
        #endregion
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-03T13:48:03.260

如果 ObservableCollection 不是您的解决方案，您可以尝试：

**A) 实现一个自定义 EventArgs，它在触发事件时将包含新的 Count 属性。**

```
public class ChangeListCountEventArgs : EventArgs
{
    public int NewCount
    {
        get;
        set;
    }

    public ChangeListCountEventArgs(int newCount)
    {
        NewCount = newCount;
    }
} 
```

**B）实现一个从 List 继承的自定义 List 并根据您的需要重新定义 Count 属性和构造函数：**

```
public class CustomList<T> : List<T>
{
    public event EventHandler<ChangeListCountEventArgs> ListCountChanged;

    public new int Count
    {
        get
        {
            ListCountChanged?.Invoke(this, new ChangeListCountEventArgs(base.Count));
            return base.Count;
        }
    }

    public CustomList()
    { }

    public CustomList(List<T> list) : base(list)
    { }

    public CustomList(CustomList<T> list) : base(list)
    { }
} 
```

**C) 最后订阅您的活动：**

```
var myList = new CustomList<YourObject>();
myList.ListCountChanged += (obj, e) => 
{
    // get the count thanks to e.NewCount
}; 
```**

# vb.net - 文本框日期到数据库

> ID：12785021
> 
> 赞同：0
> 
> 时间：2012-10-08T15:43:21.190
> 
> 标签：vb.net, .net-3.5, asp.net-3.5

我有以下代码在 .net 1.1 网站上运行良好：

```
objSQLCommand.Parameters.Add(New SqlParameter("@date", SqlDbType.DateTime, 8))
objSQLCommand.Parameters("@date").Value = txtDate.Text 
```

这在 .net 3.5 服务器上不起作用。

我收到一条消息，说它无法将字符串转换为日期时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:44:49.293

试试这个，

```
objSQLCommand.Parameters("@date").Value = Convert.ToDate(txtDate.Text) 
```

后续问题，您的文本框中日期的格式是什么？也许你可以利用**[`TryParse`](http://msdn.microsoft.com/en-us/library/9h21f14e.aspx#Y0)**或[**`ParseExact`**](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)也。

```
Dim provider As CultureInfo = CultureInfo.InvariantCulture
Dim dateString as String = txtDate.Text '08/10/2012
Dim format As String = "d" 
objSQLCommand.Parameters("@date").Value = Date.ParseExact(dateString, format, provider) 
```

# c# - MSTest 爬取网站的动态方法

> ID：12785022
> 
> 赞同：1
> 
> 时间：2012-10-08T15:43:22.407
> 
> 标签：c#, mstest, dynamicmethod

我正在尝试创建一个 MSTest 来抓取网站。我希望它是动态的，所以我可以将它投入到我们任何网站的构建中。这基本上是在推送到暂存环境之前进行测试的一个步骤。它检查断开的链接和丢失的资源。我们的单元测试目前在 MSTest 中完成。我们正在使用 Bamboo 进行自动化构建和测试。它有一个很好的结果格式。我希望能够将每个项目视为带有详细信息的测试。这本身就很容易。我拥有抓取网站所需的所有代码。

如何动态创建具有属性 TestMethod 的方法并将其包含在测试中？眼下，我要找的四类资源都有一个测试方法，所以有四种测试方法。我想测试每个独特项目的方法。

我一直在研究 DynamicMethod，但我认为这不会让我到达我想去的地方。

# php - 按日期对 PHP 数组进行排序

> ID：12785023
> 
> 赞同：1
> 
> 时间：2012-10-08T15:43:30.277
> 
> 标签：php, arrays

我有一堆文件在一个数组中

```
im(month)(day)(year)

im01012007

im01022006

im01022012

im01032011

im01042010

im01042012

im01052009

im01052011

im01062012

im01072008

im01072011 
```

ETC..

有没有办法对数组进行排序，使其按年、月、日排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:53:38.663

就在这里。首先将其转换为合理的格式。

我建议`DateTime`在 PHP 程序中使用 PHP 的类并将所有日期保存为 DateTime 对象。

如果您不想这样做，这里有一个按原样对它们进行排序的功能。

```
usort($myDates, function($a, $b) {
    $aBits = array_chunk($a,2);
    $bBits = array_chunk($a,2);
    $aDate = $aBits[3].$aBits[4].$aBits[2].$aBits[1];
    $bDate = $aBits[3].$aBits[4].$aBits[2].$aBits[1];
    return ($aDate < $bDate) ? -1 : 1;
}); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:53:38.673

使用`substr()`并将您的字符串分成部分（日，月，年）。然后你可以对它们进行排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T16:00:54.520

你可以尝试使用`usort`

```
$string = "im01012007.jpg,im01022006.jpg,im01022012.jpg,im01032011.jpg,im01042010.jpg,im01042012.jpg,im01052009.jpg,im01052011.jpg,im01062012.jpg,im01072008.jpg,im01072011.jpg";
$array = explode(",", $string); // rebulding your array ;

var_dump($array);

usort($array, function ($a, $b) {
    $a = DateTime::createFromFormat("mdY", substr(pathinfo($a, PATHINFO_FILENAME), 2));
    $b = DateTime::createFromFormat("mdY", substr(pathinfo($b, PATHINFO_FILENAME), 2));
    return ($a == $b) ? 0 : (($a < $b) ? - 1 : 1);
});

var_dump($array); 
```

输出

前

```
array
  0 => string 'im01012007.jpg' (length=14)
  1 => string 'im01022006.jpg' (length=14)
  2 => string 'im01022012.jpg' (length=14)
  3 => string 'im01032011.jpg' (length=14)
  4 => string 'im01042010.jpg' (length=14)
  5 => string 'im01042012.jpg' (length=14)
  6 => string 'im01052009.jpg' (length=14)
  7 => string 'im01052011.jpg' (length=14)
  8 => string 'im01062012.jpg' (length=14)
  9 => string 'im01072008.jpg' (length=14)
  10 => string 'im01072011.jpg' (length=14) 
```

后

```
array
  0 => string 'im01022006.jpg' (length=14)
  1 => string 'im01012007.jpg' (length=14)
  2 => string 'im01072008.jpg' (length=14)
  3 => string 'im01052009.jpg' (length=14)
  4 => string 'im01042010.jpg' (length=14)
  5 => string 'im01032011.jpg' (length=14)
  6 => string 'im01052011.jpg' (length=14)
  7 => string 'im01072011.jpg' (length=14)
  8 => string 'im01022012.jpg' (length=14)
  9 => string 'im01042012.jpg' (length=14)
  10 => string 'im01062012.jpg' (length=14) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T15:54:14.133

没有内置函数可以开箱即用，我会像这样使用 usort：

```
usort($files, function($a, $b) {
    return strcmp(preg_replace('/^.*(\d{2})(\d{2})(\d{4})$/', '$3$1$2', $a), preg_replace('/^.*(\d{2})(\d{2})(\d{4})$/', '$3$1$2', $b));
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-08T15:55:25.463

这将按最旧到最新排序。用于`krsort`从最新到最旧排序。

```
$files = array();
if ($handle = opendir('/path/to/files')) {
    while (false !== ($entry = readdir($handle))) {
        if ($entry != "." && $entry != "..") {
            $y = substr($entry, 6, 4);
            $m = substr($entry, 2, 2);
            $d = substr($entry, 4, 2);
            $files[$y . $m . $d] = $entry;
        }
    }
    closedir($handle);
}
ksort($files); 
```

我使用这些 PHP 手册条目来编写此解决方案：

*   [读目录](http://php.net/manual/en/function.readdir.php)
*   [排序](http://php.net/manual/en/function.ksort.php)
*   [子串](http://php.net/manual/en/function.substr.php)

# spring-mvc - 如何使用带有spring框架的iframe在网页中显示pdf文件？

> ID：12785029
> 
> 赞同：0
> 
> 时间：2012-10-08T15:43:52.433
> 
> 标签：spring-mvc

我想使用带有 spring 框架的 iframe 在网页中显示 pdf 文件。我必须在我的网页中显示 pdf 文件，而不是下载选项。请任何人都可以帮助我。

提前致谢..

我的java代码：

```
Employee employee = employeeManager.getObjectOrNull(
            Employee .class, id);
    File file = new File(dir,
            employee .getFileName());
    org.apache.commons.io.FileUtils.writeByteArrayToFile(file,
            employee .getfile());

    if (employee != null) {
        ControllerUtils.openFile(dir,
                response, employee.getFileName());
        String contentType = Utils.getContentType(employee 
                .getFileName());
        response.setContentType(contentType);
        response.setHeader("Cache-Control", "private, max-age=5"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T04:30:06.360

I've got the solution. I used `embed` tag. My HTML code:

```
<embed width="900px" height="500px" name="plugin" src="/content/downloadPdf" type="application/pdf"> 
```

My java code

```
 response.setContentType("application/pdf");
        response.setHeader("Cache-Control", "private, max-age=5");

        response.setHeader("Pragma", "");
        if (file.length>0) {
            response.setContentLength(file.length);
        }
        ServletOutputStream ouputStream = response.getOutputStream();
        InputStream is = new ByteArrayInputStream(file);
        try {
            int b;
            while ((b = is.read()) != -1) {
                ouputStream.write(b);
            }
        } finally {
            ouputStream.flush();
            ouputStream.close();
            is.close();
        } 
```

# ruby-on-rails - 在模型 rails 3.2 内渲染一个部分

> ID：12785030
> 
> 赞同：1
> 
> 时间：2012-10-08T15:43:59.543
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我了解网络上的建议永远不会在模型中渲染，对于这种情况，我需要这样做

```
 class Order
    def canceled_order_message(order)
            admin = User.find_or_create_by(email: "myemail")
            message = Message.new(subject: I18n.t(".buyer_has_canceled_the_order"), 
                      body: "#{render_to_string :partial => 'users/messages/templates/sent_by_admin/canceled_order', :locals => {:order => order}}")
            message.send_message
            message.save
    end
 end 
```

我需要在消息正文属性中渲染：

```
render_to_string :partial => 'users/messages/templates/sent_by_admin/canceled_order 
```

我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:55:29.677

请在此处查看我的答案：

[用于 nil 的未定义方法“fragment_for”：NilClass 渲染部分带有缓存](https://stackoverflow.com/questions/12685782/undefined-method-fragment-for-for-nilnilclass-on-render-partial-with-cache/12686110#12686110)

我认为这可能很有用。

PS可怕的想法，请重新考虑你的架构。

# wso2 - 通过 WSO2 ESB 对代理 SOAP API 的 REST 调用

> ID：12785031
> 
> 赞同：0
> 
> 时间：2012-10-08T15:43:59.990
> 
> 标签：wso2, wso2esb

我真的很难理解 WSO2 ESB 是如何工作的。文档——尤其是图形工具的文档——非常缺乏。我希望有人能指出我正确的道路。

我有一个带有 RPC/Encoded WSDL 的 SOAP API。我能够成功地将它设置为基于 WSDL 的代理，并且在 ESB 管理面板中对其进行测试的工具表明它工作得很好——我能够恢复会话等。

我开始设置一个 API 来处理 REST 请求并将它们转发到 SOAP API。为了测试这一点，我从我们的 login() 函数开始。您可以在下面 API 的源代码视图中将其视为资源：

```
<api xmlns="http://ws.apache.org/ns/synapse" name="VRRestAPI" context="/vrrest">
   <resource methods="GET" uri-template="/session/{username}/{password}">
      <inSequence>
         <log level="full"/>
         <payloadFactory>
            <format>
               <m0:login xmlns:m0="http://services.samples">
                  <m0:request>
                     <m0:username>$1</m0:username>
                     <m0:password>$2</m0:password>
                  </m0:request>
               </m0:login>
            </format>
            <args>
               <arg xmlns:ns="http://org.apache.synapse/xsd" expression="get-property('uri.var.username')"/>
               <arg xmlns:ns="http://org.apache.synapse/xsd" expression="get-property('uri.var.password')"/>
            </args>
         </payloadFactory>
      </inSequence>
      <outSequence>
         <log level="full"/>
         <send/>
      </outSequence>
   </resource>
</api> 
```

它保存得很好，并说 API 现在正在运行。所以我尝试使用 curl 调用它：

```
curl -v http://10.0.6.223:8280/vrrest/session/user@emailaddress.com/password 
```

并获得以下信息：

```
* About to connect() to 10.0.6.223 port 8280 (#0)
*   Trying 10.0.6.223... connected
* Connected to 10.0.6.223 (10.0.6.223) port 8280 (#0)
> GET /vrrest/session/user@emailaddress.com/password HTTP/1.1
> User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8r zlib/1.2.3
> Host: 10.0.6.223:8280
> Accept: */*
> 
< HTTP/1.1 202 Accepted
< Date: Fri, 05 Oct 2012 21:06:54 GMT
< Server: Synapse-HttpComponents-NIO
< Transfer-Encoding: chunked
< 
* Connection #0 to host 10.0.6.223 left intact
* Closing connection #0 
```

我期望看到的是我的 SOAP 端点的 login() 方法的输出的 POX 表示。我什至没有得到这么多的错误。没有日志向我显示有关调解或任何内容的任何详细信息。我很迷茫，即将放弃。关于我接下来应该尝试什么的任何提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T18:54:40.753

我认为您在“inSequence”末尾缺少“发送”......基本上您不会在任何地方发送您精心制作的消息:-)。请参阅：[http](http://synapse.apache.org/userguide/samples/sample800.html) ://synapse.apache.org/userguide/samples/sample800.html 。

# java - 关于如何在java中停止任务的建议

> ID：12785033
> 
> 赞同：1
> 
> 时间：2012-10-08T15:44:06.543
> 
> 标签：java, multithreading, spring

我不是多线程专家，只是初学者，所以请尝试理解我对这个主题的理解不足。

我有一些使用[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)异步执行它们的任务，它是用这个 bean 创建的：

```
<bean id="executorService" class="java.util.concurrent.Executors"
    factory-method="newFixedThreadPool">
    <constructor-arg value="10" />
</bean> 
```

我正在提交这样的任务：

```
Future<String> resultHandler = executorService.submit(new WorkerClass()); 
```

让我们想象一下我将同时运行 2 个任务的场景， task`A`和 task `B`。

如何在`B`不影响任务的情况下停止任务`A`？

保存到哪里是明智的，这意味着我应该创建某种`HashMap`东西来存储我的 Future 对象并通过一些键检索它们并对其进行`cancel(true)`操作，或者更有经验的人如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:10:49.460

尝试

```
Future<String> resultHandlerB = executorService.submit(new WorkerClass());
...
boolean canceled=resultHandlerB.cancel(true); 
```

# asp.net - ReportViewer 错误 - 请求失败，HTTP 状态为 401：未经授权

> ID：12785034
> 
> 赞同：4
> 
> 时间：2012-10-08T15:44:07.110
> 
> 标签：asp.net, reporting-services, reportviewer, report-viewer2010

我正在使用 Visual Studio 2010 SP1、.Net 4.0、SSRS 2008 R2、Windows XP Professional

以下是我在开发机器上尝试使用 Visual Studio 2010（调试模式）运行报告时遇到的错误。

> 请求失败，HTTP 状态为 401：未授权。

web.config 有设置：

```
<authentication mode="Windows" />
<identity impersonate="true" /> 
```

我有：

*   为`WindowsImpersonationCredentials : IReportServerCredentials`.
*   在运行报告之前检查了 ServerReport.ReportServerCredentials，它具有登录到机器的用户 ID，但是 ServerReport.ReportServerCredentials。ImpersonateUser 在运行报表之前为空。
*   Web 应用程序和 SSRS 在同一台开发机器上。
*   将注册表中的 DisableloopCheck 更改为 1 - 没有任何区别。

当我直接从报告管理器运行报告时，报告工作正常。相同的代码在服务器上运行良好但不是我的本地机器（调试模式）。

无法弄清楚幕后到底发生了什么。任何帮助将非常感激。

# mobile - 纹波模拟器替代品

> ID：12785038
> 
> 赞同：3
> 
> 时间：2012-10-08T15:44:34.390
> 
> 标签：mobile, cordova, ripple

Ripple Emulator（Chrome 浏览器插件）有什么替代品吗？我也对其他浏览器的插件感兴趣。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T02:25:41.673

我认为 Ripple 是最好的选择，但我也知道 Opera 拥有自己的移动模拟器产品：

[http://www.opera.com/developer/tools/mobile/](http://www.opera.com/developer/tools/mobile/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-25T13:14:24.083

我相信 Chrome 中的内置模拟器现在比 Ripple 好得多。

您实际上并不需要为此而使用 3rd 方扩展。

这是 Chrome v49 中模拟器的快照：

[![在此处输入图像描述](../Images/ae10ae35113faf2b54c87cb0deb916f5.png)](https://i.stack.imgur.com/EZsGP.png)

了解更多：[设备模式和移动仿真 | 铬合金](https://developers.google.com/web/tools/chrome-devtools/iterate/device-mode/)

# python - sqlite 跟踪 ID - 在 seq 中查找缺失的整数

> ID：12785041
> 
> 赞同：1
> 
> 时间：2012-10-08T15:44:46.183
> 
> 标签：python, sqlite

首先，我什至不确定我是否问对了问题，对此感到抱歉。SQL 对我来说是新的。我有一个我在 SQLITE 中创建的表，如下所示：

```
CREATE TABLE ENTRIES "(ID INTEGER PRIMARY KEY AUTOINCREMENT,DATA BLOB NOT NULL)" 
```

如果我只添加条目，这一切都很好。如果我创建条目，它们会增加。假设我添加了 7 个条目。现在我删除 3 个条目：

```
DELETE FROM NODES WHERE ID = 3
DELETE FROM NODES WHERE ID = 4
DELETE FROM NODES WHERE ID = 5 
```

我现在拥有的条目是：

```
1,2,6,7. 
```

下次我添加一个条目时，它将具有`ID=8`.

所以，我的问题是：

如何获取接下来的 3 个条目，以获取 ID 3、4、5，然后只有 4 个条目会得到 8？我意识到这类似于[SQL：find missing IDs in a table](https://stackoverflow.com/questions/1389605/sql-find-missing-ids-in-a-table)，它可能也是一个通用编程（不仅仅是 SQL）问题。所以，我很高兴看到一些 Python 和 SQLite 解决方案。

谢谢，奥兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:11:19.977

你不能。出于数据库完整性的原因，SQLite 永远不会重复使用已删除的 ID。假设您有第二个表，它有一个引用第一个表的外键。如果由于某种原因，删除了相应的行而不删除引用它的行（使用主 ID），它将指向错误的行。

示例：如果您删除了人员记录而没有删除购买，则在您重新分配旧 ID 后，购买记录将指向错误的人员。

```
 ─────────────────────     ────────────────────
     Table 1 – customers       Table 2 – purchase
    ─────────────────────     ────────────────────

     *ID     <───────┐        *ID
      Name           │         Item
      Address        └───────  Customer
      Phone                    Price 
```

这就是为什么几乎所有的数据库引擎都会严格递增地分配主 ID。它们是数据库内部的，你通常不应该碰它们。如果您需要分配自己的 ID，只需添加一个单独的列（在此之前请三思而后行）。

如果要跟踪行数，可以这样查询：`SELECT Count(*) FROM table_name`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:47:27.633

我不认为这是自动递增字段的工作方式。SQLite 保留最后使用的整数的计数器。如果您想在 id 之后获取接下来的 3 行，它永远不会“填充”已删除的值：

`SELECT * FROM NODES WHERE ID > 2 LIMIT 3;`

这将为您提供 ID 大于 2 的接下来的三行

此外，您可以创建一个已删除的标志或其他东西吗？所以这些行实际上永远不会从您的数据库中删除。

# c# - 确保类是线程安全的，只有属性（任何专门用于此的 .NET 4.0 技术？）

> ID：12785043
> 
> 赞同：1
> 
> 时间：2012-10-08T15:44:51.393
> 
> 标签：c#, .net, multithreading, c#-4.0, thread-safety

我有一个具有两个属性和两个方法的类。比如下面这个。（请忽略数据类型或返回类型，这只是一个典型场景）

```
// The methods could be invoked by multiple threads
    public class Stock
    { 

    private static int FaceValue {get; set;}
    private static int Percent (get; set;}

    //    method that updates the two properties
    Public void UpdateStock()
    {
      FaceValue += 1;
      Percent = FaceValue * 100;
    }

    //   method that reads the two properties
    public int[] GetStockQuote()
    {
        return new int[] { FaceValue, Percent};
    }

    } 
```

我需要确保这个类是线程安全的。我可以在这两种方法中使用 lock(obj) 作为一种使其成为线程安全的技术，但考虑到以下几点，使它成为线程安全的最佳技术是什么：

1.  只有两个属性被读取/更新。因此，不确定锁定在方法内部是否是一种好技术。

2.  如果我只是让属性线程安全而不是方法或类就足够了吗？

3.  另外，有没有办法使整个类线程安全而不是单个方法或属性？.Net 4.0 中的任何推荐锁定技术？

只是想知道我是否正在考虑这项权利，或者考虑到这些，我是否过于复杂了。非常感谢提前帮助我弄清楚这一点。

玛尼

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T15:51:52.463

一般来说， a`lock`可能是这里最简单的方法。

一个可能更好的选择是使这个类*不可变*。如果你这样做了，一旦创建了类就不能更改类中的值，那么在读取值时就不必担心了，因为它们无法被修改。

在这种情况下，可以通过使用一个接受两个值的构造函数来完成，并将其更改`UpdateStock`为更像：

```
public Stock GetUpdatedStock()
{
     // Create a new instance here...
     return new Stock(this.FaceValue + DateTime.Now.MilliSecond, this.FaceValue * 100);
} 
```

* * *

编辑：

现在您已将 FaceValue 和 Percent 设为*静态*，您将需要同步。A`lock`可能是这里最简单的选项。

使用*单个 value*，您可能会使用[Interlocked 类](http://msdn.microsoft.com/en-us/library/system.threading.interlocked.aspx)以原子方式处理更新，但无法对两个值进行原子更新*，这可能是正确完成线程安全所必需的。在这种情况下，通过 a 同步`lock`将解决您的问题。

*注意：如果您将两个值都放在一个类中并交换整个类实例，则可以在没有锁的情况下完成此操作 - 但这*可能*[`Interlocked.CompareExchange`](http://msdn.microsoft.com/en-us/library/bb297966.aspx)比它的价值要麻烦得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:17:14.653

没有使线程安全的灵丹妙药解决方案，每个场景都需要自己的解决方案。最明显的是使用 a `lock`，但在您的示例中，您可以简化和使用`Interlocked`该类，并让它成为原子操作：

```
public class Stock
{ 

    private static int FaceValue {get; set;}

    Public void UpdateStock()
    {
       //only a single property to update now
       Interlocked.Increment(FaceValue);
    }

    //   method that reads the two properties
    public int[] GetStockQuote()
    {
        var currVal = FaceValue;
        return new int[] { currVal, currVal * 100 };
    }

} 
```

请参阅MSDN 上的[互锁](http://msdn.microsoft.com/en-us/library/5kczs5b5.aspx)。

# java - 找不到自动发现服务

> ID：12785050
> 
> 赞同：5
> 
> 时间：2012-10-08T15:45:15.693
> 
> 标签：java, exchange-server, exchangewebservices, ewsjavaapi

我正在使用 EWS Java API 1.1 访问 Exchange 2010 帐户，如下所示：

```
ExchangeService service = new ExchangeService();
ExchangeCredentials credentials = new WebCredentials(email,
    password);
service.setCredentials(credentials);
service.autodiscoverUrl("adamb@fabrikam.com");
Folder inbox = Folder.bind(service, WellKnownFolderName.Inbox);
System.out.println("messages: " + inbox.getTotalCount()); 
```

我收到以下异常：

```
08/10/2012 05:11:35 م org.apache.commons.httpclient.HttpMethodDirector executeWithRetry
INFO: I/O exception (java.net.ConnectException) caught when processing request: Connection timed out: connect
08/10/2012 05:11:35 م org.apache.commons.httpclient.HttpMethodDirector executeWithRetry
INFO: Retrying request
08/10/2012 05:11:56 م org.apache.commons.httpclient.HttpMethodDirector executeWithRetry
INFO: I/O exception (java.net.ConnectException) caught when processing request: Connection timed out: connect
08/10/2012 05:11:56 م org.apache.commons.httpclient.HttpMethodDirector executeWithRetry
INFO: Retrying request
08/10/2012 05:12:17 م org.apache.commons.httpclient.HttpMethodDirector executeWithRetry
INFO: I/O exception (java.net.ConnectException) caught when processing request: Connection timed out: connect
08/10/2012 05:12:17 م org.apache.commons.httpclient.HttpMethodDirector executeWithRetry
INFO: Retrying request
microsoft.exchange.webservices.data.AutodiscoverLocalException: The Autodiscover service couldn't be located.
    at microsoft.exchange.webservices.data.AutodiscoverService.internalGetLegacyUserSettings(Unknown Source)
    at microsoft.exchange.webservices.data.AutodiscoverService.getLegacyUserSettings(Unknown Source)
    at microsoft.exchange.webservices.data.AutodiscoverService.internalGetLegacyUserSettings(Unknown Source)
    at microsoft.exchange.webservices.data.AutodiscoverService.getUserSettings(Unknown Source)
    at microsoft.exchange.webservices.data.ExchangeService.getAutodiscoverUrl(Unknown Source)
    at microsoft.exchange.webservices.data.ExchangeService.autodiscoverUrl(Unknown Source)
    at microsoft.exchange.webservices.data.ExchangeService.autodiscoverUrl(Unknown Source)
    at main.java.TestMail.main(TestMail.java:22) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T11:06:00.210

删除自动发现后它工作正常：

```
service.autodiscoverUrl("adamb@fabrikam.com"); 
```

并手动设置如下：

```
service.setUrl(new java.net.URI(
                    "https://myhostname/EWS/Exchange.asmx")); 
```

# java - java.lang.NoClassDefFoundError：无法初始化类 com.sun.xml.internal.ws.fault.SOAPFaultBuilder

> ID：12785052
> 
> 赞同：5
> 
> 时间：2012-10-08T15:45:18.793
> 
> 标签：java, soap, jboss, jax-ws

我正在使用带有 Java 6u29 的 JBoss 4。我使用 wsimport 为一个肥皂网络服务生成了一些类。除了一件事，一切都很好。

每当 web 服务以肥皂错误响应时，我都会收到此异常：

```
java.lang.NoClassDefFoundError: Could not initialize class com.sun.xml.internal.ws.fault.SOAPFaultBuilder 
```

该类包含在 JRE 中。我不知道为什么找不到这个类。我在谷歌上搜索但没有成功。您知道什么可能导致此错误吗？

# html - 如何检查 IE 是否为内联 css

> ID：12785053
> 
> 赞同：1
> 
> 时间：2012-10-08T15:45:27.000
> 
> 标签：html, internet-explorer

嗨，简单的问题真的。

我有一个搜索框功能，在所有浏览器中，按钮位置有点低，所以我在底部添加了 5px。然而，对于 IE，它 5px 太高了。所以我已经看到并尝试了以下内容。`<![if !IE]>bottom:5px;<![endif]>`

这显然是行不通的。我正在尝试/想要在“内联 CSS”中执行此操作

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:54:39.330

如果您不想运行 IE 样式表，则可以在`<head>`标签中使用条件注释来添加样式。

```
 <!--[if IE]>
       <style>
           .your_class {
               bottom: 5px;
           }
       </style>
    <![endif]-->
</head> 
```

我会自己运行一个 IE 样式表，但如果你不想这样做，那么你可以这样做。

阅读条件评论 - [http://css-tricks.com/how-to-create-an-ie-only-stylesheet/](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-08T16:00:01.590

```
#searchbar {
position: relative;
bottom:5px;
^bottom:5px;
_bottom:5px;
float: left;
} 
```

这适用于 ie 以上 6 的所有版本。只需输入 -- ^bottom:5px; -- 在此之上 -- _bottom:5px; -- .... 这会成功的。

# objective-c - 当广告消失时，iAdSuite 错误会留下空白

> ID：12785055
> 
> 赞同：5
> 
> 时间：2012-10-08T15:45:36.500
> 
> 标签：objective-c, ios, xcode

我正在尝试将 iAdSuite 选项卡栏视图实现合并到我的应用程序中，但我在套件和我的应用程序中看到了同样的问题。当广告出现时，我的内容视图的大小得到了正确调整，并且广告正确显示。当广告然后消失时，它会留下它所在的空白区域。但是，我已经确认我的内容视图确实被调整回原来的高度，并且它被拉低到原来的边界。您只是看不到广告所在的部分。我已经确保每个视图都有一个 layoutIfNeeded 并且几乎所有我能想到的都无济于事。有什么想法吗？

![在此处输入图像描述](../Images/f622364b96df4fcd7a47a2481774ea6d.png)

编辑：我已经弄清楚了问题所在。Apple 的示例显然会在每次调用 showBannerView: 时将 _bannerView 添加到 self.view，但从不删除视图。这仍然没有完全意义，因为横幅视图正在移出屏幕，但删除它确实解决了空白问题。我的解决方案如下，但如果有人有更优雅的方式，请告诉我。

```
- (void)layoutAnimated:(BOOL)animated {

    if (UIInterfaceOrientationIsPortrait(self.interfaceOrientation)) {
        _bannerView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;
    } else {
        _bannerView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierLandscape;
    }

    CGRect contentFrame = self.view.bounds;
    contentFrame.origin = CGPointMake(0.0, 0.0);
    CGRect bannerFrame = _bannerView.frame;
    if (_bannerView.bannerLoaded) {
        contentFrame.size.height -= _bannerView.frame.size.height;
        bannerFrame.origin.y = contentFrame.size.height;
    } else {
        bannerFrame.origin.y = contentFrame.size.height;
    }

    [UIView animateWithDuration:animated ? 0.25 : 0.0 animations:^{
        _contentView.frame = contentFrame;
        [_contentView layoutIfNeeded];
        _bannerView.frame = bannerFrame;
    }
                     completion:^(BOOL finished) {
                         if (!_bannerView.bannerLoaded) {
                             [_bannerView removeFromSuperview];
                             _bannerView=nil;
                         }
                     }];
}

- (void)showBannerView:(ADBannerView *)bannerView animated:(BOOL)animated
{
    _bannerView = bannerView;
    if (![self.view.subviews containsObject:_bannerView])
        [self.view addSubview:_bannerView];
    [self layoutAnimated:animated];
}

- (void)hideBannerView:(ADBannerView *)bannerView animated:(BOOL)animated
{
    [self layoutAnimated:animated];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T05:53:51.527

我有同样的问题。在 hideBannerView 委托方法中从超级视图中删除横幅视图似乎已经解决了它。

```
- (void)hideBannerView:(ADBannerView *)bannerView animated:(BOOL)animated
{
    [self layoutAnimated:animated];
    [_bannerView removeFromSuperview];
    _bannerView = nil;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T00:54:26.827

感谢您提出这个问题和答案，我正在用这个拉头发。我像这样更改了该死的代码，现在隐藏动画起作用了。我想知道为什么苹果发布错误的示例代码......

```
- (void)layoutAnimated:(BOOL)animated hide:(BOOL)hide
{
    if (UIInterfaceOrientationIsPortrait(self.interfaceOrientation)) {
        _bannerView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;
    } else {
        _bannerView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierLandscape;
    }

    CGRect contentFrame = self.view.bounds;

    CGRect bannerFrame = _bannerView.frame;
    if (!hide) {
        contentFrame.size.height -= _bannerView.frame.size.height;
        bannerFrame.origin.y = contentFrame.size.height;
    } else {
        contentFrame.size.height += _bannerView.frame.size.height;
        bannerFrame.origin.y = contentFrame.size.height;
    }

    [UIView animateWithDuration:animated ? 0.25 : 0.0 animations:^{
        _contentView.frame = contentFrame;
        [_contentView layoutIfNeeded];
        _bannerView.frame = bannerFrame;
    } completion:^(BOOL finished) {
        if (hide) {
            [_bannerView removeFromSuperview];
            _bannerView=nil;
        }
    }];
}

- (void)showBannerView:(ADBannerView *)bannerView animated:(BOOL)animated
{
    _bannerView = bannerView;
    [self.view addSubview:_bannerView];
    [self layoutAnimated:animated hide:NO];
}

- (void)hideBannerView:(ADBannerView *)bannerView animated:(BOOL)animated
{
    [self layoutAnimated:animated hide:YES];

} 
```

# wpf - 如何在 WPF ListView 的禁用行中启用单元格

> ID：12785057
> 
> 赞同：0
> 
> 时间：2012-10-08T15:45:36.793
> 
> 标签：wpf, listview, wpf-controls

我有一个 WPF ListView，其视图设置为 GridView。列表中的行有时会被禁用，但我需要始终启用一列单元格。我们在“URL”列中显示了一个链接，即使该行被禁用，用户也需要能够单击该链接。目前，如果该行被禁用，则链接也被禁用。

我目前在 XAML 中有这个：

```
 <ListView.View>
            <GridView>

                <GridViewColumn Header="Name">
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock
                                Text="{Binding Item.Name}"/>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>

                <GridViewColumn Header="Description">
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock
                                Text="{Binding Item.Description}"/>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>
                <GridViewColumn Header="URL">                       
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                         <Label>
                                <Hyperlink 
                                    Command="{Binding ViewModel.OpenInstructionsCommand}">
                                    <TextBlock Text="View"  />
                                </Hyperlink>
                            </Label>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>

            </GridView>
        </ListView.View> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T17:08:21.070

虽然不能保证对所有控件类型都没有副作用，但可以扩展您希望保持启用状态的控件以忽略从父控件传播的 IsEnabled 属性。有关更多解释的示例，请参阅[Cedric Dussud 在此处的帖子](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/3bf5e186-845c-4b63-acd9-17d294a30f77)。

在这种情况下，您的代码可能如下所示：

```
internal class EnabledHyperlink : Hyperlink
{
    static EnabledHyperlink()
    {
        IsEnabledProperty.OverrideMetadata(typeof (EnabledHyperlink),
            new UIPropertyMetadata(true,
                IsEnabledPropertyChanged,
                CoerceIsEnabled));
    }

    private static void IsEnabledPropertyChanged(DependencyObject source, DependencyPropertyChangedEventArgs args)
    {
    }

    private static object CoerceIsEnabled(DependencyObject source, object value)
    {
        return value;
    }
} 
```

# c++ - 如何并行化使用 boost？

> ID：12785060
> 
> 赞同：1
> 
> 时间：2012-10-08T15:45:46.790
> 
> 标签：c++, multithreading, boost

为了优化我正在制作的一些库的执行，我必须并行化一些计算。不幸的是，我不能为此使用 openmp，所以我正在尝试使用 boost::thread 做一些类似的替代方案。有人知道这样的实现吗？我在线程之间共享变量时遇到特殊问题（将变量定义为openmp的“共享”和“私有”）。有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T16:07:04.567

据我所知，除了 OpenMP 之外，您必须明确地执行此操作。

例如，如果我们在 OpenMP 中有一个并行循环

```
int i;
size_t length = 10000;
int someArray[] = new int[length];

#pragma omp parallel private(i)
{

    #pragma omp for schedule(dynamic, 8)
    for (i = 0; i < length; ++i) {

        someArray[i] = i*i;

    }
} 
```

您必须将逻辑分解为可以处理问题的子范围的“通用”循环，然后显式安排线程。然后每个线程将处理整个问题的一部分。通过这种方式，您可以显式声明“私有”变量——进入 subProblem 函数的变量。

```
void subProblem(int* someArray, size_t startIndex, size_t subLength) {
    size_t end = startIndex+subLength;

    for (size_t i = startIndex; i < end; ++i) {
        someArray[i] = i*i;         
    }
}

void algorithm() {

    size_t i;
    size_t length = 10000;
    int someArray[] = new int[length];
    int numThreads = 4; // how to subdivide
    int thread = 0;

    // a vector of all threads working on the problem
    std::vector<boost::thread> threadVector;

    for(thread = 0; thread < numThreads; ++thread) {
        // size of subproblem
        size_t subLength = length / numThreads;
        size_t startIndex = subLength*thread;

        // use move semantics to create a thread in the vector
        // requires c++11\. If you can't use c++11,
        // perhaps look at boost::move?
        threadVector.emplace(boost::bind(subProblem, someArray, startIndex, subLength));            
    }
    // threads are now working on subproblems

    // now go through the thread vector and join with the threads.
    // left as an exercise :P

} 
```

以上是许多调度算法之一——它只是将问题分成与线程一样多的块。

OpenMP 方式更复杂——它将问题分成许多小块（在我的示例中为 8 个），然后使用工作窃取调度将这些块提供给线程池中的线程。实现 OpenMP 方式的困难在于您需要等待工作的“持久”线程（线程池）。希望这是有道理的。

一种更简单的方法是在每次迭代中执行异步（为每次迭代安排一项工作）。如果每次迭代都非常昂贵并且需要很长时间，这可以工作。但是，如果它是具有多次迭代的小块工作，则大部分开销将用于调度和线程创建，从而使并行化变得无用。

总之，根据您的问题，有*很多*方法可以安排工作，您可以自行决定哪种方法最适合您的问题。

**TL;DR：** 如果您提供“子范围”功能，请尝试为您安排的 Intel Threading Building Blocks（或 Microsoft PPL）：

[http://cache-www.intel.com/cd/00/00/30/11/301132_301132.pdf#page=14](http://cache-www.intel.com/cd/00/00/30/11/301132_301132.pdf#page=14)

# android - 数组越界错误

> ID：12785061
> 
> 赞同：0
> 
> 时间：2012-10-08T15:45:47.753
> 
> 标签：android, base64, sharedpreferences, password-encryption, javax.crypto

我正在尝试使用 Base64 对我的 sharedPreferences 用户名和密码进行编码，但是在 eclipse 模拟器中运行我的程序时，我收到一条错误消息，提示“数组越界”。我不确定这个错误是什么意思以及如何纠正它。

日志猫：

```
10-06 13:51:24.005: E/AndroidRuntime(4272): FATAL EXCEPTION: main
10-06 13:51:24.005: E/AndroidRuntime(4272): java.lang.ArrayIndexOutOfBoundsException: length=3; index=3
10-06 13:51:24.005: E/AndroidRuntime(4272):     at com.SharedPreferences.Login.SharedPrefLoginActivity.onClick(SharedPrefLoginActivity.java:84)
10-06 13:51:24.005: E/AndroidRuntime(4272):     at android.view.View.performClick(View.java:3511)
10-06 13:51:24.005: E/AndroidRuntime(4272):     at android.view.View$PerformClick.run(View.java:14105)
10-06 13:51:24.005: E/AndroidRuntime(4272):     at android.os.Handler.handleCallback(Handler.java:605)
10-06 13:51:24.005: E/AndroidRuntime(4272):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-06 13:51:24.005: E/AndroidRuntime(4272):     at android.os.Looper.loop(Looper.java:137)
10-06 13:51:24.005: E/AndroidRuntime(4272):     at android.app.ActivityThread.main(ActivityThread.java:4424)
10-06 13:51:24.005: E/AndroidRuntime(4272):     at java.lang.reflect.Method.invokeNative(Native Method)
10-06 13:51:24.005: E/AndroidRuntime(4272):     at java.lang.reflect.Method.invoke(Method.java:511)
10-06 13:51:24.005: E/AndroidRuntime(4272):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-06 13:51:24.005: E/AndroidRuntime(4272):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-06 13:51:24.005: E/AndroidRuntime(4272):     at dalvik.system.NativeStart.main(Native Method) 
```

这是我的注册活动，它应该采用 EditText 字符串、编码并保存到 sharedpreferences xml。

```
 public void onClick(View arg0) {
    user=rName.getText().toString().trim();
    pass=rPwd.getText().toString().trim();

    if(arg0==regBttn){     
       if((user.length()!=0))
        {
         if((pass.length()!=0))
            {

        sp=getSharedPreferences("AccessApp",MODE_WORLD_WRITEABLE);
        Editor myEditor=sp.edit();

        try {
            myEditor.putString("USERNAME_KEY", user);
            byte[ ] superSecretKeyBytes = Base64.decode(user);
            byte[] key = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6 };
            for (int i = 0; i < pass.length(); i++) {
                key[i] = superSecretKeyBytes[i];
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }   
        try {
            myEditor.putString("PASSWORD_KEY", pass);
            byte[ ] superSecretKeyBytes = Base64.decode(pass);
            byte[] key = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6 };
            for (int i = 0; i < pass.length(); i++) {
                key[i] = superSecretKeyBytes[i];
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        myEditor.commit();
        Toast.makeText(this, "Registration is successfull",10000).show();
        i=new Intent(this,AccessApp.class);
        startActivity(i);
        }
        else
         {
          Toast.makeText(this, "Please Enter password", 10000).show();  
         }
         }
        else{
            Toast.makeText(this,"Please Enter Username",10000).show();
         }
        }

    else if(arg0==rtnBttn){
        AlertDialog.Builder builder=new AlertDialog.Builder(this);
         builder.setTitle("Exit");
         builder.setMessage("Do you want to exit");
         builder.setCancelable(false);
         builder.setPositiveButton("Yes",new DialogInterface.OnClickListener() {

  public void onClick(DialogInterface dialog, int which) {
  // TODO Auto-generated method stub
  finish();
  }
  });
    builder.setNegativeButton("No", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface arg0, int arg1) {
               arg0.cancel();
            }
        });
    AlertDialog alert=builder.create();
    alert.show();

    }
}
public String encrypt(String toencrypt, byte key[]) throws Exception {
    SecretKeySpec secret = new SecretKeySpec(key, "AES");
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.ENCRYPT_MODE, secret);
    byte[] encryptedbytes = cipher.doFinal(toencrypt.getBytes());
    String encrypted = Base64.encodeBytes(encryptedbytes);
    return encrypted;

}
} 
```

更正：

```
 The below corrections were applied.
 (int i = 0; i < superSecretKeyBytes.length && i < key.length; i++)

 Issue:
  Array error has cleared but EditText string is still saved in clear text.? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:50:15.647

解码 USERNAME_KEY 时，看起来您引用 pass.length 而不是 user.length 作为 for 循环中的停止条件，即第一个实例：

```
for (int i = 0; i < pass.length(); i++) { 
```

应该：

```
for (int i = 0; i < user.length(); i++) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:52:14.343

pass.length() （实际上它是 pass.length() - 1，从技术上讲）大于 key[] 和 superSecretKeyBytes[] 数组中分配的位置/位置。因此，您最终会尝试访问不存在的数组中的位置，从而产生 Out of Bounds 错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T15:53:15.587

为什么在循环内不使用`pass`长度时在循环条件下使用长度？你确定`superSecretKeyBytes.length == pass.length()`吗？（可能不等于，您正在从 Base64 解码）

写这个更安全：

```
for (int i = 0; i < superSecretKeyBytes.length; i++) {
    key[i] = superSecretKeyBytes[i];
} 
```

代替：

```
for (int i = 0; i < pass.length(); i++) {
    key[i] = superSecretKeyBytes[i];
} 
```

`OutOfBoundsException`此外，您的`key`阵列在哪里得不到保证？更喜欢在循环中检查这个：

```
for (int i = 0; i < superSecretKeyBytes.length && i < key.length; i++) {
    key[i] = superSecretKeyBytes[i];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T15:54:15.740

我认为你正在摆脱你的钥匙阵列。您应该检查：

```
pass.length() <= key.length 
```

希望这可以帮助

# ms-access - 从访问中的不同查询调用一个查询

> ID：12785062
> 
> 赞同：-1
> 
> 时间：2012-10-08T15:45:53.740
> 
> 标签：ms-access

假设我有 3 个查询：

*   查询1
*   查询2
*   查询3

我想通过运行单个查询 QueryRunAll 来运行它们。如何在 QueryRunAll 中运行 Query1、Query2 和 Query3？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:52:29.740

由于`Query1`、`Query2`和`Query3`都是`INSERT`查询，因此您可以从单个查询 、 运行它们的唯一方法`QueryRunAll`是使用用户定义的函数。

如果您将从`QueryRunAll`Access 会话内部运行，则可以将其用作其 SQL：

```
SELECT Runall() AS successful; 
```

但是，如果您打算`QueryRunAll`从 Access 会话外部运行，则它不能使用 UDF，因此您将无法让一个查询运行 3 个操作查询。

```
Public Function Runall() As String
    Dim blnReturn As Boolean
    Dim db As DAO.Database
    Dim strMsg As String

On Error GoTo ErrorHandler

    Set db = CurrentDb
    db.Execute "Query1", dbFailOnError
    db.Execute "Query2", dbFailOnError
    db.Execute "Query3", dbFailOnError
    blnReturn = True
    Set db = Nothing

ExitHere:
    Set db = Nothing
    Runall = blnReturn
    Exit Function

ErrorHandler:
    ' do more here if desired
    GoTo ExitHere
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:23:51.047

MS Access（*至少 2003 年*）确实允许以下查询语法，这将允许您一起运行多个查询：

```
SELECT Query1.col1, Query2.col2, Query3.col1
FROM Query1, Query2, Query3 
```

或为`INSERT`

```
INSERT INTO yourtable (col1, col2,...)
SELECT Query1.col1, Query2.col2
FROM Query1, Query2, Query3 
```

# jquery - 将 jQuery serializeArray 表单传递给 WCF

> ID：12785065
> 
> 赞同：0
> 
> 时间：2012-10-08T15:46:08.023
> 
> 标签：jquery, json, wcf

我希望传递一个 serializeArray 表单，本质上是：

```
$.each($('#myform').serializeArray(), function () {
    json[this.name] = this.value;
});
var param = "{\"form\":" + JSON.stringify(json) + "}"; 
```

到 WCF 服务。我的目标是传递`param`给 WCF 方法，然后他们解析 param 中的所有内容，或者传递的内容。我很难创建一类对象类型，因为形式可以改变。对此的任何帮助都很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:09:53.827

我会查看[json.org](http://json.org/)的解析器。我使用 Json.NET

[这](http://james.newtonking.com/projects/json/help/)是我认为您正在谈论的示例：

```
string json = @"{
   'CPU': 'Intel',
   'PSU': '500W',
   'Drives': [
     'DVD read/writer'
     /*(broken)*/,
     '500 gigabyte hard drive',
     '200 gigabype hard drive'
   ]
}";

JsonTextReader reader = new JsonTextReader(new StringReader(json));
while (reader.Read())
{
  if (reader.Value != null)
    Console.WriteLine("Token: {0}, Value: {1}", reader.TokenType, reader.Value);
  else
    Console.WriteLine("Token: {0}", reader.TokenType);
} 
```

这将遍历 JSON 对象中的所有内容并输出`Token`和`Value`. 在这种情况下，您将得到：

```
Token: StartObject
Token: PropertyName, Value: CPU
Token: String, Value: Intel
Token: PropertyName, Value: PSU
Token: String, Value: 500W
Token: PropertyName, Value: Drives
Token: StartArray
Token: String, Value: DVD read/writer
Token: Comment, Value: (broken)
Token: String, Value: 500 gigabyte hard drive
Token: String, Value: 200 gigabype hard drive
Token: EndArray
Token: EndObject 
```

# asp.net - 如何为现有站点创建项目？

> ID：12785068
> 
> 赞同：0
> 
> 时间：2012-10-08T15:46:25.107
> 
> 标签：asp.net, visual-studio

我有一个没有项目文件的网络应用程序。有没有办法创建一个空白项目文件，将所有现有文件包含在其中，而不修改现有的 web.config？

# c# - 在sql server中比较同一张表中的两行

> ID：12785072
> 
> 赞同：0
> 
> 时间：2012-10-08T15:46:36.777
> 
> 标签：c#, sql, database, sql-server-2008

我看过类似的答案，但这是我正在寻找的，因为我没有从以前回答的问题中找到任何答案：

这是我的场景：我有一个表格`[res_user]`，`username, password, key_pin`其中保存了用户名、加密密码和 4 位密码或密钥。

我正在用 C# 制作一个应用程序，它允许经理登录并从应用程序本身对数据库进行更改。

首先提示管理员使用用户名、密码和他们提供的 key_pin 登录。该 pin 将加密和解密进出数据库的密码。

现在我有一个用户名`[manager]`和一个加密密码已经保存在数据库中`key_pin`。

如何确保登录的经理是正确的，这意味着我如何从 C# 应用程序比较数据库中的用户名和加密密码。

这些是我认为我将在应用程序本身中实现的步骤（在 c# 中使用 SQL 语法）：

1.  加密密码，

2.  使用登录用户名获取数据库中保存的加密，以及

3.  **比较**向应用返回是或否的加密以进行访问控制。

允许 5 次尝试登录。

这是我做的第一和第二部分：

```
try
{
   using (SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["STRING"].ConnectionString))
   {
     using (SqlCommand cmd = new SqlCommand("dbo.Res_User", con))
     {
       cmd.CommandText = "INSERT INTO Res_User(username, password, key_pin) SELECT '" + username + "' , dbo.fnEncDecRc4('" + pin + "','" + password + "'), '" + pin + "'";
       con.Open();
       cmd.ExecuteNonQuery();

       MessageBox.Show("Added", "Information", MessageBoxButtons.OK);

       cmd.CommandText = "SELECT password FROM Res_User WHERE username = @username";
       cmd.Parameters.AddWithValue("@username", username);
       cmd.ExecuteNonQuery();

       using (SqlDataReader reader = cmd.ExecuteReader())
       {
           if (reader.HasRows)
           {
               while (reader.Read())
               {
                    MessageBox.Show(reader["password"].ToString(), "Information", MessageBoxButtons.OK);
               }
           }
       } 
```

我该如何去做第三部分？

只有有人可以帮我比较保存的编码。密码和登录密码。我在第一部分中所做的密码。

如果需要更多信息，请告诉我。

谢谢你。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:59:55.843

当您在服务器上进行验证时，您可以尝试重新加密服务器上的密码和 pin。这样你就可以调用你的加密函数，然后进行比较，如果你有结果，你就知道输入了正确的密码。修改你的代码，它看起来像：

```
try
{
   using (SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["STRING"].ConnectionString))
   {
     using (SqlCommand cmd = new SqlCommand("dbo.Res_User", con))
     {
       cmd.CommandText = "INSERT INTO Res_User(username, password, key_pin) SELECT '" + username + "' , dbo.fnEncDecRc4('" + pin + "','" + password + "'), '" + pin + "'";
       con.Open();
       cmd.ExecuteNonQuery();

       MessageBox.Show("Added", "Information", MessageBoxButtons.OK);

       cmd.CommandText = "SELECT password FROM Res_User WHERE username = @username AND key_pin = @pin AND password = dbo.fnEncDecRc4(@pin, @password)";
       cmd.Parameters.AddWithValue("@username", username);
       cmd.Parameters.AddWithValue("@pin", pin);
       cmd.Parameters.AddWithValue("@password", password);
       cmd.ExecuteNonQuery();

       using (SqlDataReader reader = cmd.ExecuteReader())
       {
           if (reader.HasRows)
           {
               //successfully validated.
           }
       } 
```

# java - 从其他程序为我的 java 应用程序获取信息

> ID：12785073
> 
> 赞同：-1
> 
> 时间：2012-10-08T15:46:38.837
> 
> 标签：java

我需要我的 java 应用程序能够从其他程序（.exe 程序）获取一些信息（表、字符串等）。我不知道其他程序正在使用的编程语言。我知道这里有一个人在工作中使用 delphi 完成了它，但我需要一个 java 应用程序。我正在做一些研究，我发现了 JNA，这是要走的路吗？在他的应用程序文件夹中，我找到了以下 .dll：**apigid32、asycfilt、Comcat、msstkprp、Msvbvm60、Oleaut32、Olepro32、Vb6stkit。**. 这些dll中的任何一个都在他的delphi应用程序和程序之间进行通信吗？

泰为你的帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-08T16:06:26.517

最好的选择（在本地）是让其他程序将字符串、表、数组等输出到文件中（我推荐 .txt 文件以便于阅读）并让 Java 从文件中加载它们

前任。代码（Java）导入语句：

```
import java.io.* 
```

将字符串写入文件所需的代码：

```
BufferedWriter outStream= new BufferedWriter(new FileWriter("test.txt", true));
outStream.newLine();
outStream.write(outputString);
outStream.close(); 
```

# c - fread 和 fwrite 有不同的结果

> ID：12785075
> 
> 赞同：1
> 
> 时间：2012-10-08T15:46:48.693
> 
> 标签：c, fwrite, fread

我正在使用 fread 从文件中读取，然后使用 fwrite 写入另一个文件。但是新文件的内容与旧文件的内容略有不同（新文件的字符更多），您知道是什么原因造成的以及如何解决吗？

读书

```
file= fopen(locationHolder[x], "r");    
chunkToSend.chunkcontent.data = malloc(20000);
chunkToSend.chunkcontent.len = fread(chunkToSend.chunkcontent.data , 1, 20000, file); 
```

来写

```
file =  fopen(filelocation, "w"); 
fwrite(responseChunk->chunkcontent.data, 1, responseChunk->chunkcontent.len, file); 
```

这是我正在阅读的文件：

```
†+ƒCÃÅ«*u`‘Ÿ‘Ž÷-U‰ÎVøÈ  ýÇ}‡3²SûYè³…öeŠ
5êèMØ“—­~K¾ëb–Ü†º[ö¿äWÔM)
ø˜i ¯’#\×b!¥^b€÷ûƒãq.]…©\.u7Ã˜¨øöÔv´cgÒD–o_ÊûG}^ªmÞŸ}ÛåŒ}?Ž…WíëH
?Íƒ>—”*î`ÔÿïÖtàNÕ$Cú¾@Ž›¿Žíohy5ÅE5qØ²9¡_Sé›‰+þ¦¥²‘*Jíf†
#¸«vÌÏ  s¼üEÃe+vLrF¯Gå3šú¦Ì×Mçó
<f¥#ÇyEBŠ1iÉŒ6pZa›MSÅîl:ôšËÄ§   
Jþ}ÜÍÃÑ1˜´+$fÌ†\Ø$±)sæâ¼üõÅ‘Ï™Àd–ÚDM*Ì
R¯èÕ¼£C†}—
¸mÝ¼ž„ª1øL5E‰_ð7âHö:´¡`¼E[Ö<BJüR’½Ê€“%8p
LÄ] ¡û2ì––û}ðCÓîŽBáæeÎøëåZ§ "
[Òºèf¯Œÿ»'L"g‚æ°C«G§¸IŸ‰ˆÚ‘_´G’.ÂÝp¯K%RÕlÍâ3÷À+\9rØ‚/Ë±V¨?Ù}Ü¨›`l½î~RŽbŒ—w˜[£¦2™¾RÿÁeÎPbeö‘¿±¤N#Oåãº&
Êc9OËbÿÊ3ÚVâ›©²TPdx»ÉbèÁW8×MAà¥ó]D
å™QØè’¿=Ÿ±­$BºÀŒdž\3âZ³‰×…×‰…¹dØ¾íÂÂÎA^Ç¦èÕ`±³ï
<µ¡QGÙY—-p÷›AÂ+pžD‘©ûÊÄÉ÷¢y×çÃt…ˆæîYiGÇÊAðÁô¡4YWoâ=ÊÁ+¤·•Ï)ùïéÚTVî±0ME¡{Èÿ‚.G°Ágª¯‚É9&­ê¡ÑUIÃÄ¤b†§JâY&_SæþJãi›©'È›XA’M[dY&²AbîAëfG½€oN(oM+CzíµÚ 
```

这是我写的文件：

```
†+ƒCÃÅ«*u`‘Ÿ‘Ž÷-U‰ÎVøÈ  ýÇ}‡3²SûYè³…öeŠ
5êèMØ“—­~K¾ëb–Ü†º[ö¿äWÔM)
ø˜i ¯’#\×b!¥^b€÷ûƒãq.]…©\.u7Ã˜¨øöÔv´cgÒD–o_ÊûG}^ªmÞŸ}O…ªœ¦ÛåŒ}?Ž…WíëH
?Íƒ>—”*î`ÔÿïÖtàNÕköR,E·$Cú¾@Ž›¿Žíohy5ÅE5qØ²9¡_Sé›‰+þ¦¥²‘*Jíf†
#¸«vÌÏ  s¼üEÃe+vLrßÞ¾"ò1%áoÌû/êF¯Gå3šú¦Ì×Mçó
<f¥#ÇyEBŠ1iÉŒ6pZa›MSÅîl:ôšËÄ§   
Jþ}ÜÍÃÑ1˜´+$fÌ†\Ø$±)sæâ¼üõÅ‘Ï™Àd–ÚDM*Ì
R¯èÕ¼£C†}—
¸mÝ¼ž„ª1øL5E‰_ð7âHö:´¡`¼E[Ö<BJüR’½Ê€“%8p
LÄ] ¡û2ì––û}ðCÓîŽBáæeÎøëåZ§ "
[Òºèf¯Œÿ»'L"g‚æ°C«G§¸IŸ‰ˆÚ‘_´G’.§b[•’KÛ0I¼û´)•Á
é_“Ä*ÂÝp¯K%RÕlÍâ3÷À+\9rØ‚/Ë±V¨?Ù}Ü¨›`l½î~RŽbŒ—w˜[£¦2™¾RÿÁeÎPbeö‘¿±¤N#Oåãº&
Êc9OËbÿÊ3ÚVâ›©²TPdx»ÉbèÁW8×MAà¥ó]D
å™QØè’¿=Ÿ±­$BºÀŒdž\3âZ³‰×…×‰…¹dØ¾íÂÂÎA^Ç¦èÕ`±³ï
<µ¡QGÙY—-p÷›AÂ+pžD‘©ûÊÄÉ÷¢y×çÃt…ˆæîYiGÇÊAðÁô¡4YWoâ=ÊåÓñš‰Ö_”]Â½ÅÛô8ª<‡·gœ¡C`øm¼Á+¤·•Ï)ùïéÚTVî±0ME¡{Èÿ‚.G°Ágª¯‚É9&­©pöïMâF³°Ä}à–+iä0;ˆ7Y|Å4u¹SFŸwê¡ÑUIÃÄ¤b†§JâY&_SæþJãi›©'È›XA’M[dY&²AbîAë[‚þ%\6¿ÿ=î…Èq‚ÌÉ$é“o
àƒž“ªÔ~ºÐ¹ÿÔ_löfG½€oN(o§ƒþ7Í
Âý0«F\!¡Ä¹\ÙoÑ,¼W™´CC#mà] 
```

**--------没关系，找出问题所在。如果你在window和linux上打开同一个文件，它们看起来还是不一样的。我在 windows 上打开旧文件，同时打开新文件 linux.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T16:17:12.410

如果您想在 Windows 系统上以二进制文件的形式读取和写入文件，则需要在打开它们进行读取时指定：

```
file=fopen("source", "rb"); 
```

和写作：

```
file=fopen("target", "wb"); 
```

另外，不要忘记在使用文件句柄之前检查打开是否成功。( `file != NULL`)

# javascript - 从另一个 JS 文件加载带有 document.write 的库

> ID：12785080
> 
> 赞同：0
> 
> 时间：2012-10-08T15:47:03.630
> 
> 标签：javascript, jquery, html, prototype

我有一个旧的验证表单，它取决于prototype.js 库。

不幸的是，我不能在页面上包含对prototype.js 库的引用。我不控制该表单的代码。

在编辑需要它的页面之外，我将如何解决加载这个问题？也就是说，我需要从我控制的另一个 JavaScript 库中加载该**库**。让我解释。

带有表单的每个页面都有这个包含脚本：

```
<script src="http://domain/validationScript.js"
    type="text/javascript"></script> 
```

**在脚本中，我正在考虑做这样的事情......**

```
document.write(unescape(
    "%3Cscript src='//ajax.googleapis.com/ajax/libs/prototype/1.6.1/prototype.js' type='text/javascript'%3E%3C/script%3E"
  )); 
```

但它不会`prototype.js`在脚本之前加载。

我究竟做错了什么？

* * *

好的，很明显 DOM 序列有一个竞争条件，我不能在将包含写入页面的脚本中使用加载的脚本。

但是，如何从脚本加载库，该脚本本身需要执行它正在加载的库中的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:01:52.540

您正在 DOM 中生成一个新的脚本元素，下一个可以添加的元素。

此点位于当前脚本元素之后。

当前脚本元素中的任何代码都不能使用它，因为在当前元素的执行完成之前不会加载它。

由于您使用的是 jQuery，因此您可以使用[`getScript()`](http://api.jquery.com/jQuery.getScript/)，它允许您传递回调方法。将任何依赖于动态加载脚本的代码移到回调中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-08T15:54:19.800

您应该将脚本添加到 dom 的头部：

```
var headID = document.getElementsByTagName("head")[0];         
var newScript = document.createElement('script');
newScript.type = 'text/javascript';
newScript.src = 'http://ajax.googleapis.com/ajax/libs/prototype/1.6.1/prototype.js';
headID.appendChild(newScript); 
```

# java - 如何在 MacOS 上嗅探 Java 小程序 HTTP 流量？

> ID：12785083
> 
> 赞同：0
> 
> 时间：2012-10-08T15:47:18.620
> 
> 标签：java, macos, http, networking, utilities

是否有任何实用程序/浏览器插件来嗅探 java applet http 流量，除了`tcpdump`？我希望有结构良好的代表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:51:05.013

试试[Wireshark——](http://www.wireshark.org/download.html)它有非常结构化的数据视图和强大的查询功能。

# c# - NHibernate：（流利）基于访问已映射集合属性的 Getter 映射/查询

> ID：12785084
> 
> 赞同：0
> 
> 时间：2012-10-08T15:47:19.537
> 
> 标签：c#, nhibernate, orm, fluent-nhibernate, mapping

我不知道如何正确表达这一点。我正在使用一个预先存在的域，其中某些实体可以包含版本化的子项。孩子负责他们自己的版本号，但最终，这个版本号只在附加的父实体的上下文中才有意义。

```
public class Blog
{
    public virtual IList<VersionedItem> VersionedItems { get; set; }
    public virtual CurrentVersionedItem {
        get {
            return VersionedItems.OrderByDescending(x => x.Version).FirstOrDefault();
        }

    }
}

public class VersionedItem
{
    public virtual Blog { get;set; }
    public virtual int Version { get; set; }
    public virtual string Content { get; set; }
    public virtual int SomeNumber { get; set; }
} 
```

以及我想要实现的目标：

```
var blogs = Session.Query<Blog>(x=> x.CurrentVersionedItem.SomeNumber == 5) 
```

虽然 NHibernate 的 IQueryable 提供者很宽容，但我不会吃任何东西。有没有办法定义正确解析“CurrentVersionedItem”属性的（流利的）映射？

我也知道 CurrentVersionedItem 在这种情况下可能会返回 null 的事实（如果它首先起作用）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:24:28.377

你为什么不这样做：

```
var item = session.Query<VersionedItem>().FirstOrDefault(q => q.SomeNumber == 5);
Blog blog;
if (item != null)
    blog = item.Blog; 
```

# c# - 带有部分视图的 MVC3 Ajax 表单验证不起作用

> ID：12785086
> 
> 赞同：4
> 
> 时间：2012-10-08T15:47:23.780
> 
> 标签：c#, javascript, asp.net-mvc, asp.net-mvc-3, razor

我有一个奇怪的问题，即局部视图（由 Ajax.ActionLink 呈现）内的不显眼的验证不起作用。

这是部分视图：

```
@model MyWeb.Models.PersonSkill
@using (Ajax.BeginForm("EditSkill", null, new AjaxOptions { UpdateTargetId = "skills" }, new { id = "EditSkillForm" }))
{
@Html.HiddenFor(model => model.Id)
<div class="editor-label">
@Html.LabelFor(model => model.Name)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.Name)
    @Html.ValidationMessageFor(model => model.Name)
</div>

<div class="editor-label">
    @Html.LabelFor(model => model.YearsOfExperience)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.YearsOfExperience)
    @Html.ValidationMessageFor(model => model.YearsOfExperience)
</div>

<p>
    <input type="submit" value="Save"/>
</p>
} 
```

这被称为：

```
@Ajax.ActionLink("Edit", "LoadEditSkill", new { id = item.Id }, new AjaxOptions() { UpdateTargetId = "editSkillDialog" }, new { @class = "editSkill" }) 
```

视图渲染得很好。它将数据回传到服务器，但它只是不验证。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T16:57:40.720

非常感谢**Joe Tuskan**为我指明了正确的方向。

我通过在通话中添加 OnSuccess 订阅者解决了这个问题：

```
@Ajax.ActionLink("Edit", "LoadEditSkill", new { id = item.Id }, new AjaxOptions() { UpdateTargetId = "editSkillDialog", OnSuccess = "onSuccess" }, new { @class = "editSkill" }) 
```

[并像这里](https://stackoverflow.com/questions/8927933/unobtrusive-validation-doesnt-work-with-ajax-beginform)解释的那样添加调用 parse() ：

```
var onSuccess = function () {
    // enable unobtrusive validation for the contents
    // that was injected into the <div id="result"></div> node
    $.validator.unobtrusive.parse($("#editSkillDialog"));
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:50:52.423

始终确保您包含必要的参考资料

jquery.validate.min.js 和 jquery.validate.unobtrusive.min.js，当然还有主要的 jquery 库，这通常是最常见的问题，正如我在您的 cshtml 中看到的那样，它们也不存在于您的页面中。

# java - 重新分配后仅接收少量 UDP 数据包。（安卓模拟器）

> ID：12785090
> 
> 赞同：3
> 
> 时间：2012-10-08T15:47:36.723
> 
> 标签：java, android, udp, emulation

我编写了一个桌面 java 程序来与我试图访问的服务器通信并让它工作。我可以发送和接收UDP数据包。我知道将我所做的事情移植到 android 上。几天来，我一直在搞乱 Android Emulator，遇到了接收 UDP 数据包的问题。如果我启动我的应用程序，连接到服务器，然后重新分配我正在使用的端口，我会收到大约 130 个数据包，然后什么都没有......我使用 WireShark 来确保服务器仍在发送数据包并且它是。Android 的模拟器上是否有类似[IP 洪水检测的功能？](http://www.dreamincode.net/forums/topic/283600-udp-connection-problem/)

编辑：

拼写

*   服务器连接到我的开发计算机所连接的交换机。
*   服务器正在响应我从桌面应用程序发送的数据包。
*   服务器正在将数据包发送到开发计算机的 IP 地址。
*   我正在使用的 redir 命令是“redir add udp:port:port”

*   当我发出 redir 命令时，我得到了 ~130 个数据包，其发件人地址为“10.0.2.2”

*   我试过“adb forward udp:port udp:port”并得到“无法绑定到套接字”
*   模拟器外部的服务器IP是“10.10.0.100”

编辑

*   服务器不在模拟器或其他安卓设备上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:45:15.483

我用类似的设置做了一个测试，得到了相同的行为。

aprox 后每秒发送一个 UDP 数据包。130个数据包，模拟器中运行的接收器停止接收数据包，我确认数据包一直在发送。

我使用 SDK 10 和 SDK 15 在模拟器中进行了上述测试，两者都在英特尔加速执行管理器中运行。

它看起来像模拟器重定向功能中的一个错误，或者如您所建议的，某种类型的网络洪水预防。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T14:11:03.890

我买了一个 Nexus 7，运行了我一直在开发的这个应用程序，可以接收 3000 多个数据包。看起来它与模拟器有关。

# javascript - 淘汰赛 - 导出带有格式的 html 表格

> ID：12785094
> 
> 赞同：1
> 
> 时间：2012-10-08T15:47:50.333
> 
> 标签：javascript, knockout.js, export-to-excel

如何导出使用 Knockout 生成的保持格式的表格？

我正在使用这个解决方案（[How to export html table to excel using javascript](https://stackoverflow.com/questions/6566831/how-to-export-html-table-to-excel-using-javascript)），但它不包括格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:06:22.480

正如我在评论中提到的，[excelbuilderjs.com](http://excelbuilderjs.com)可能适合您。有几个明显的缺点 - 一个是您不能简单地将 HTML 表格转换为带有颜色等的 excel 电子表格。它确实需要设置。但是，在我工作的地方，我们有一个相当标准的配色方案和一组格式化程序，它们已被翻译成一组独立的指令，然后包含在我们需要构建电子表格的任何地方。

基于 Knockout 的几个简单示例，您可能只使用相同的数据源循环并分配给 EB - 然后只需分配数字格式和日期格式，就像您为实际的 excel 电子表格（即 $#,##0.00对于基本货币，m/d/yyyy 为基本日期）。

旁注 - 显然我的一些文档没有弥补。 [http://excelbuilderjs.com/cookbook/formatting.html](http://excelbuilderjs.com/cookbook/formatting.html)是您可以获取有关格式化的一些基本信息的地方。

# php - 将数组传递给php中的函数

> ID：12785095
> 
> 赞同：-1
> 
> 时间：2012-10-08T15:47:50.783
> 
> 标签：php, function

我有一个由此查询创建的数组：

```
$run=0;
$result = $conn->query("SELECT distinct isbn13 from inventory 
                        WHERE quantity>0 and isbn13 like '978%' limit $run, 20");

while($image = $result->fetch_assoc())
{
    $isbn[$x] = $image['isbn13'];  
    $x++;
} //end while 
```

我需要将它传递给这个函数：

```
$parsed_xml = ProductId_xml($isbn); 
```

我知道 $isbn 中有信息，因为我使用了 print_r($isbn); 并看到了阵列。但是，当我在函数 (var_dump($searchterm); die;) 中执行相同操作时，我得到 NULL。这是函数的一部分：

```
count=0;

function ProductId_xml($searchTerm) {
    var_dump($searchTerm); die;

    $params = array(
        'AWSAccessKeyId' => AWS_ACCESS_KEY_ID,
        'Action' => "GetMatchingProductForId",
        'SellerId' => MERCHANT_ID,
        'SignatureMethod' => "HmacSHA256",
        'SignatureVersion' => "2",
        'Timestamp'=> gmdate("Y-m-d\TH:i:s.\\0\\0\\0\\Z", time()),
        'Version'=> "2011-10-01",
        'MarketplaceId' => MARKETPLACE_ID,
        'IdType' => "ISBN",
    );

    $id=array(explode(',',$searchTerm));

    foreach ($id as $newId)
    {
        $count .= $count +1;    
        $params += array('IdList.Id.'.$count => $newId);
    } //end of foreach 
```

如何将信息放入我的函数中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:50:37.397

PHP 的变量名区分大小写，因此`$searchterm`是`$searchTerm`不同的变量。

尝试`var_dump($searchTerm); die;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:51:09.693

传入变量`$searchTerm`应该是一个关联数组。你不需要爆炸它。您应该能够通过说`$searchTerm['key']`或使用 foreach 循环来访问信息。

```
foreach ($searchTerm as $key=>$val) { 
    $params['IdList.Id.'.$key] = $val;
} //end of foreach 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T15:53:46.130

问题在这里：

```
function ProductId_xml($searchTerm) {
    var_dump($searchterm); die; 
```

**$searchTerm**与**$searchterm**不同。尝试：

```
var_dump($searchTerm); die; 
```

它应该工作

# javascript - javascript - （对象）未定义

> ID：12785096
> 
> 赞同：0
> 
> 时间：2012-10-08T15:47:53.627
> 
> 标签：javascript

我有一个类（SiteLoader），它的一个属性是另一个类（LocalStorage_Helper）。

我正在测试我制作的小型 API，但出现“未定义 LocalStorage_Helper”错误，我不知道为什么。

这是使用 LocalStorage_Helper 的类和使用该对象的部分：

```
/// <reference path="localSotrageHelper.js" /> // -- refrence to the js file

function SiteLoder(_storageName) {
  this.theList = new Array();
  this.storageHelper = new LocalStorage_Helper(_storageName); --HERE is where i get the error
}

//Add_theList_ToStorage
SiteLoder.prototype.Add_theList_ToStorage = function () {
  this.storageHelper.AddItem(this.theList);
}

//Get_theList_FromStorage
SiteLoder.prototype.Get_theList_FromStorage = function () {
  this.theList = this.storageHelper.GetItem();
} 
```

我在 html 文件上像这样使用 SiteLoader：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title></title>
  <script src="SiteLoader.js" type="text/javascript"></script>
  <script>
    var Loader = new SiteLoder("sites"); // Error is thrown when i open the html

    function setStoregeTest() {
      Loader.PupolateListFrom_UL("list");
      Loader.Add_theList_ToStorage();
    }

    function showStoregeTest() {
      Loader.Get_theList_FromStorage();
      Loader.WriteListTo_UL("list");
    }
  </script>
</head>
<body>
  <ul id="list" contenteditable="true">
  <li></li>
  </ul>
  <input type="button" value="set" onclick="setStoregeTest()" />
  <input type="button" value="get" onclick="showStoregeTest()" />
</body>
</html> 
```

*   为什么我会收到错误消息？
*   我需要以不同的方式启动 LocalStorage_Helper 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:50:54.903

您没有在 html 标记中包含 LocalStorage_Helper.js。

```
<head>
    <title></title>
    <script src="LocalStorage_Helper.js" type="text/javascript"></script>
    <script src="SiteLoader.js" type="text/javascript"></script> 
```

# c - C和gcc错误数组下标高于数组边界

> ID：12785097
> 
> 赞同：9
> 
> 时间：2012-10-08T15:48:05.157
> 
> 标签：c

我必须处理一个 lib 的结构：

```
typedef struct {
   uint8_t   response_type;
   uint8_t   error_code;
   uint16_t sequence;
   uint32_t resource_id;
   uint16_t minor_code;
   uint8_t major_code;
   uint8_t pad0;
   uint32_t pad[5];
   uint32_t full_sequence;
} a_structure; 
```

我的问题来自我不太了解的结构的 pad[5] 成员。我认为这个成员可以用作函数中的另一个成员，如下所示：

```
uint8_t get_response_type( a_structure * my_struct)
{
   return my_struct->response_type;
} 
```

但是这个功能：

```
uint32_t get_pad_5( a_structure * my_struct)
{
   return my_struct->pad[5];
} 
```

在 gcc 中生成警告

> 错误数组下标高于数组边界

有人可以解释一下这是什么意思吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-08T16:12:49.113

结构字段`pad`被定义为“5 个数组`uint32_t`”。您必须将变量定义与使用变量不同。因此，既然`pad`定义了，`pad[5]`就意味着“获取`pad`数组的第五个（从 0 开始计数）元素”。但是数组中没有这样的元素`pad`，因为这个数组可用的最高索引是 4。

此外，您似乎想返回指向该数组第一个元素的指针，而不是第五个元素。所以你必须这样重写你的函数：

```
uint32_t * get_pad_5( a_structure * my_struct)
{
    return my_struct->pad;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T15:49:41.427

当您创建一个包含 5 个成员的数组时，它们的索引为 0-4，如果您尝试访问 5，则超出范围

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T15:52:37.820

C 中的数组是从零开始的。

```
my_struct->pad[0]; // the first pad
my_struct->pad[4]; // the fifth pad 
```

该警告意味着您正在尝试访问数组外的元素。索引`5`表示第六个元素，数组只有 5 个元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T15:50:01.720

一个由 5 个元素组成的数组具有索引`0`、`1`、`2`、`3`和`4`。索引`5`超出范围。通常，N 个元素的数组具有从`0`到`N-1`包含的有效索引。

# validation - 这个类是不是一个值对象？

> ID：12785098
> 
> 赞同：0
> 
> 时间：2012-10-08T15:48:13.687
> 
> 标签：validation, domain-driven-design

我已经定义了诸如 Email、Url、Alphabet、Number 和 ... 之类的类，只是为了集中每个对象所需的验证逻辑，例如：

```
public class Email
{
    private string value;
    private bool isValid;

    const string RegexPattern = @"^(?("")("".+?""@)|(([0-9a-zA-Z]((\.(?!\.))|[-!#\$%&'\*\+/=\?\^`\{\}\|~\w])*)(?<=[0-9a-zA-Z])@))(?(\[)(\[(\d{1,3}\.){3}\d{1,3}\])|(([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,6}))$";

        public Email(string address, int minLength = 8, int maxLength = 50)
        {
            value = address;

            isValid = Validator.IsValid(address,RegexPattern,minLength,maxLength);
        }

        public string Address
        {
            get
            {
                return value;
            }
        }

        public bool IsValid
        {
            get
            {
                return isValid;
            }
        }

} 
```

这可以称为价值对象吗？如果不是它缺少的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:52:05.540

该实现是我期望值对象的实现。它是不可变的（尽管您可能想`readonly`在字段上添加修饰符）并且似乎没有自己的身份。

您需要根据域考虑它是否确实是一个值对象 - 这就是您决定这是否应该是一个值对象的方式。

# blackberry - 在黑莓中触摸未占用的屏幕位置会触发专注的现场听众？

> ID：12785103
> 
> 赞同：2
> 
> 时间：2012-10-08T15:48:37.220
> 
> 标签：blackberry, java-me, touch

我正在 9900 上开发一个应用程序，其中轨迹球和触摸屏都可用。
在我的应用程序中，我有一个包含两个按钮的屏幕，奇怪的行为是：
如果我***使用轨迹球***将焦点设置到第二个按钮，然后我触摸屏幕中的任何空白位置，第二个按钮的更改侦听器被开除 ？**如果用户错误地单击空白区域并且没有触摸第二个按钮，我不希望发生任何事情，该怎么做？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:16:05.297

我解决了它，对于那些感兴趣的人，您可以在您的图像按钮类中使用此代码：

```
private boolean isTouchOutside;

protected boolean touchEvent(TouchEvent message) {
    isTouchOutside = message.getX(1) < 0 || message.getX(1) > getWidth() || message.getY(1) < 0 || message.getY(1) > getHeight();
    return super.touchEvent(message); 
}

protected boolean navigationClick(int status, int time) {
    if(! isTouchOutside)
        fieldChangeNotify(0);
    return true;
} 
```

# jquery - jquery ui droppable drop element on doc ready

> ID：12785104
> 
> 赞同：0
> 
> 时间：2012-10-08T15:48:37.447
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, jquery-ui-droppable

我有可放置的#selector 和 li。在 $(document).ready(); 我想将#selector 放到第二个 li.... 在完美世界中，代码如下所示：

```
$(document).ready(function(){
    $('#selector').dropInto($('ul li').eq(1));
}); 
```

但不幸的是，这个世界并不完美，这就是我们有堆栈溢出的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:23:17.667

好的，通过将放置代码放入一个单独的函数（我以前见过的答案）解决了这个问题，但诀窍是传入我正在模拟放置的对象。这是一些示例代码：

```
function codeExecutedOnDrop(element){
    element.addClass('blah').fadeIn();
}

$('ul li').droppable({
    drop: function() {
        codeExecutedOnDrop($(this));
    }
});

$(document).ready(function(){
    codeExecuteOnDrop($('ul li').eq(1));
}); 
```

感谢 Nelson 和 Wardy 的帮助！

# php - php在include之前设置变量并在之后回显它

> ID：12785106
> 
> 赞同：0
> 
> 时间：2012-10-08T15:48:43.110
> 
> 标签：php, oop, class, include, echo

我有一个管理类：

```
<?php
    Class Admin extends Controller{

        function __construct() {
            parent::__construct();
        }

            function getPage(){
                $num = 5;
                $this->view->load('test');
            }

    }
?> 
```

扩展控制器类：

```
<?php

class Controller{

    function __construct() {
        $this->view = new View();
    }

}

?> 
```

查看类：

```
<?php
Class View{

    function __construct() {

    }

    public function load($file){
        include($_SERVER["DOCUMENT_ROOT"].'/main/views/'.$file.'.php');
    }

}
?> 
```

所以在`test.php`文件中我尝试`echo $num;`但我什么也没得到......

如果我尝试

```
$num = 5;
include($_SERVER["DOCUMENT_ROOT"].'/main/views/test.php'); 
```

**它回响了 5**

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:03:18.397

您可以将关联数组`load`作为可选参数传递给函数，然后使用`extract`该数组在范围内设置变量。

```
public function load($file, $data = array()){
    extract($data);

    include($_SERVER["DOCUMENT_ROOT"].'/main/views/'.$file.'.php');
} 
```

或者

```
public function load($file, $data = array()){
    foreach ($data as $key => $val)
        ${$key} = $val;

    include($_SERVER["DOCUMENT_ROOT"].'/main/views/'.$file.'.php');
} 
```

正如我个人的经验所示，第二种方法稍快一些。

在功能`getPage()`上，您需要做的就是：

```
$this->view->load('test', array('num' => 5)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:15:21.033

您的 $num 范围已本地化为函数 getPage 并且永远不会将其作为对象的一部分。您可以修改该函数，创建一个函数 getPage() 以返回 $num 并从 test.php 中回显它，或者您可以这样重写代码：

```
<?php
        Class Admin extends Controller{

            function __construct() {
                parent::__construct();
            }

            public $num = 5;

            function getPage(){
                    $this->load->view('test');
                }

        }

    class Controller{

        function __construct() {
            $this->view = new View();
        }

    }

    Class View{

        function __construct() {

        }

        public function load($file){
            echo "I shall skip the file include";
        }

    }

    $test = new Admin();
    echo $test->num;

    ?> 
```

你可能想看看这个：[http ://www.php.net/manual/en/language.oop5.visibility.php](http://www.php.net/manual/en/language.oop5.visibility.php)

它将让您了解将来可以实施哪些可见性选项。

# ruby - 如何在 Sinatra 应用程序（+unicorn）中存储/访问/更新线程安全变量？

> ID：12785108
> 
> 赞同：0
> 
> 时间：2012-10-08T15:48:56.917
> 
> 标签：ruby, thread-safety, sinatra

我想在我的 sinatra 应用程序中以线程安全的方式存储和更新枚举。我用独角兽。我尝试了以下方法：

```
#!/usr/bin/ruby

require 'sinatra'

$locked = false
$num = 0
class App < Sinatra::Base
  before do
    while $locked do end
    $locked = true
  end

  after do
    $locked = false
  end

  get "/wait" do
    sleep 10
    $num += 1
    erb :display
  end

  get "/winner" do
    $num += 1
    erb :display
  end
end 
```

该视图仅显示 $num ;)

我用独角兽（4 个工人）启动了这个应用程序，并`http://localhost:8080/winner`用我的浏览器访问了。我点击了几次刷新，但应用程序没有显示预期的行为（1,2,3,4,5,...）而是显示随机数（1,1,2,1,2,3, 2,3,2,3,4,...)

那么我如何获得这个线程安全的呢？：D（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:07:22.593

您的问题不在于线程安全（尽管这里有轻微的竞争条件 - 使用互斥锁而不是您的 $locked 变量），因为每个独角兽工作者都是一个单独的进程。

这些进程中的每一个都有一组单独的全局变量，因此无论您为每个进程添加多少同步，您编写的代码基本上都无法工作。

解决这个问题的常用方法是将数字存储在一些共享数据存储中，例如 mysql、mongo、redis 甚至 memcached 等数据库。其中最后 3 个具有特定的原子创建或增量操作，但您也可以在关系数据库中执行此操作。

# ruby-on-rails - Rails CSV 附件在浏览器中打开而不是下载

> ID：12785112
> 
> 赞同：1
> 
> 时间：2012-10-08T15:49:26.450
> 
> 标签：ruby-on-rails, file, csv, attachment

在我的 rails 3 应用程序中，我提供了一个 CSV 模板供用户下载。无需下载它，只需在新选项卡中打开文本。这是代码：

```
<a href="/templates/myFile.csv" target="_blank">click here</a> 
```

这以前对我有用，我不确定会发生什么改变来破坏它。与此类似的其他问题建议添加`target='_blank'`或更改标题，但我没有太多运气这样做。

我不认为它应该有所作为，但这个链接是在一个模态的里面，他的身体来自这里：

```
<div class="modal hide" id="helpModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <%= modal_header "Help" %>
   <div class="modal-body">
    <%= render 'help' %>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T16:49:58.557

您可以使用 send_file 方法：

```
def download_file(file_path)
   send_file(file_path, :type => 'text/csv', :disposition => "attachment")
end 
```

您可以将此方法添加到控制器和路由中，然后在您的视图中使用它：

```
link_to "Download", download_file_path('some_file.csv') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:02:41.107

target="_blank" 将在新选项卡中打开文件。但这取决于浏览器设置是否打开选项卡中的文件或询问是否要下载文件。

# macos - XCode 4.2 安装时出错

> ID：12785118
> 
> 赞同：0
> 
> 时间：2012-10-08T15:49:47.050
> 
> 标签：macos, xcode4

ALL，我有一台带有 Snow Leopard 的 Mac。为了编译和测试我的程序，我从原始的 Snow Leopard 安装 CD 安装了 XCode。版本是 3.2。但是，我的客户有带有 XCode 4.2 的 Snow Leopard，并且程序没有编译，所以我决定删除旧的 XCode 并安装 4.2。

我下载了 XCode 4.2，然后发布了以下内容：

```
sudo /Developer/Library/uninstall-devtools --mode=all
rm -rf /Develop 
```

然后我尝试安装 XCode 4.2，但出现错误：

发生未知的安装错误。安装程序遇到导致安装失败的错误。请联系软件制造商寻求帮助。

有人知道我该如何解决吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T07:05:21.667

找到[了这个](https://superuser.com/questions/410573/cant-install-xcode-on-os-x-snow-leopard)帖子，它也为我修复了它。XCode 安装没有问题。

# c++ - 在远程服务器上执行命令行命令

> ID：12785119
> 
> 赞同：0
> 
> 时间：2012-10-08T15:49:48.527
> 
> 标签：c++, linux, ubuntu-12.04, iptables

我有一台运行 HAProxy 的服务器，并且想更改该服务器上的 iptables 以便对我的应用服务器进行一些维护。最简单的方法是什么？有没有办法可以从 C++ 在远程机器上执行系统命令？或者我是否需要在 HAProxy 机器上运行一个程序才能更改该机器的 iptables？对此的任何指导都会非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:58:31.073

```
ssh <hostname> "iptables <parameters>" from linux

plink <hostname> "iptables <parameters>" from Windows 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:41:10.963

试试盐。它通过代理通过 ssl 执行远程命令。它真的很好用。

Saltstack.org

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T16:04:19.343

使用 libssh 或如前所述在代码中执行命令。

# facebook - 禁用时间线上的照片分组

> ID：12785120
> 
> 赞同：11
> 
> 时间：2012-10-08T15:49:50.647
> 
> 标签：facebook, facebook-graph-api

有谁知道 Facebook 何时在时间轴上将同一相册中的照片分组？是否有可能阻止它这样做？如果您每天（通过 API）发布一到两张图片，并带有指向其他网站的反向链接，并且 Facebook 将这些内容分组，那么其中一个链接可能永远不会被其他人看到。据我所知，没有其他方法可以在时间轴上发布带有链接的大照片。所以：

*   发布一张图片后多久可以发布另一张图片以使其不被分组到其他人的提要中？
*   有什么方法可以通过 API 克服分组问题？
*   有没有其他方法可以发布带有描述和链接的大图片（目前，我将它们作为照片发布到特定相册中）？

谢谢你的想法

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T03:32:26.667

这个问题对于通过 API 处理图片的开发者来说是非常有趣的。我在这里看到了两种取消组合照片帖子的方法。

## 1次

您可以通过在上传照片之前等待确切的时间来解决您的问题，即使这是一种卑鄙的方式。对于页面或用户，照片将按相册分组：

*   在**时间线上**，正好**10 小时**后（需要 2 张以上的照片），
*   在**新闻提要**上，正好**1 小时**后。

它实际上使用`modified`'s`Album`参数来知道新照片是否将与最后一组分组。该日期在相册页面上可见：

> 未命名专辑 34 分钟前更新

*注意：这是 Facebook 的行为和算法，无法通过 API 克服。另外，我们不能修改`modified`参数的值。*

## 2\. 用户生成的照片

有东西可以解决你的问题。它被称为**用户生成的照片**，它适用于**[Open Graph](https://developers.facebook.com/docs/concepts/opengraph/)**。

> 您可以允许您的用户为单个操作上传单张照片或多张用户生成的照片。

在这种情况下，您的照片将在新闻提要和时间轴上以大尺寸显示，并且不会再分组。您仍然可以添加带有链接的描述。此外，它会宣传您的应用程序，因为它表明您的应用程序的名称。

读数：

*   [概念：用户生成的照片](https://developers.facebook.com/docs/technical-guides/opengraph/user-generated-photos/)
*   [如何上传单个用户生成的照片](https://developers.facebook.com/docs/technical-guides/opengraph/upload_single_user_generated_photo/)
*   [如何上传多张用户生成的照片](https://developers.facebook.com/docs/technical-guides/opengraph/upload_multiple_user_generated_photos/)（也可能有用）

顺便说一句，这就是[Instagram](http://instagram.com/)用来在 Facebook 上分享照片的方式。一个很好的榜样……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-02T09:07:43.610

我最近发现的一种方法是在另一张专辑中发布一张图片（您尚未发布过的一张），然后将其移动到正确的专辑中。当您将其发布到您的时间轴上时，它不会与其他图片组合在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T01:39:42.847

这不是一种“阻止”分组操作的方法，而是一种让您的照片在新闻提要中看到更大的方法，并能够在其下单独发表您的评论等。

如果您转到您在 Facebook 上发布的每张照片，您可以点击“分享”

这会将其分享给您的时间线（或者如果您愿意，也可以分享给其他人），并将其作为状态更新。这意味着图片在新闻提要中会很大

** 我一次分享了一些我闪烁的照片，但我遇到了同样的问题，它们分组在人们经常会错过的小方块中。所以我基本上再次分享了它们。它们作为单独的照片出现在新闻提要中。

您可能还需要注意，它们可能会在您的时间线上加倍，如果您只希望它们显示一次，则需要隐藏您在时间线上发布的第一个，因为这是出现在小方块（分组），很可能每个人都错过了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T13:40:12.060

我一直在寻找 Stéphane 答案的替代方法，因为我需要上传不符合用户生成照片标准的图片。此外，我的 Web App 可能需要与不同的 Facebook 应用程序通信，这意味着为每个应用程序创建自定义操作，非常麻烦。

我发现禁用照片分组的解决方案是找到“时间轴照片”相册的ID并将图片上传到其中。我已经对其进行了测试，到目前为止它似乎还没有将它们分组。

我希望这对那些可能正在寻找不涉及用户生成照片的替代方案的人有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-21T16:25:42.857

使用相册不是解决此问题的正确工具，自然会导致任务失败。

如果您的目标是在时间轴上添加新图片，让我们每天都说，但要使用相册分组......对于共享描述标签等，只需按照以下步骤操作：

1.  把照片贴在时间线上...
2.  选择图片并手动将其移动到相册。

# c++ - 访问opencv矩阵CV_32S元素

> ID：12785121
> 
> 赞同：15
> 
> 时间：2012-10-08T15:49:53.057
> 
> 标签：c++, opencv, matrix

如果我有一个类型的矩阵`CV_32SC1`，我应该在函数中使用什么类型名`Mat::at`？

例如

```
Mat X;  // for example eye matrix of size 10,10,and type CV_32SC1
X.at<??????>(1,1)=5; 
```

如何找到其他矩阵类型的类型名？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-09T07:07:20.547

OpenCV 中矩阵类型名的一般规则是：

```
 CV_<bit_depth>(S|U|F)C<number_of_channels>

S = Signed integer
U = Unsigned integer
F = Float 
```

因此，根据您拥有的前一个字母（S，U，F）中的哪一个，您将铸造`<int>`,`<unsigned integer>`或`<float>`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T16:11:22.703

CV_32SC1 是有符号 32 位整数的 1 通道，那么我认为`X.at<int>()`应该这样做。

Mat 已经“知道”如何寻址像素，该类型只是将位转换为表达式评估所需的 C++ 值。

我在[这里](https://docs.opencv.org/2.4/modules/core/doc/basic_structures.html)找到了一些关于符号的解释。

# java - 如果存在 Axis2 库，Netbeans 生成的 JAX-WS 客户端将不起作用

> ID：12785126
> 
> 赞同：1
> 
> 时间：2012-10-08T15:50:03.047
> 
> 标签：java, jax-ws, axis2

我使用 Netbeans 生成了一个 JAX-WS Web 服务客户端，一切正常，除非我将 Axis2 库添加到项目中，UsernameToken 将从soap 标头中删除并且soap 消息看起来略有不同。我对 Java Web 服务很陌生，所以我真的很想了解发生了什么以及如何解决这个问题。我需要 Axis2 库的原因是我正在将一个客户端添加到一个具有许多 Axis2 客户端的大型项目中。

存在 Axis2 库时生成的 SOAP：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
    <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" />
</soapenv:Header>
<soapenv:Body>
    <ns2:AddOrUpdate xmlns:ns2="http://tempuri.org/" xmlns="http://schemas.datacontract.org/2004/07/Service.DataTransferObjects" xmlns:ns4="http://schemas.microsoft.com/2003/10/Serialization/" xmlns:ns3="http://schemas.datacontract.org/2004/07/Service.ServiceUtils">
    <ns2:employee />
    </ns2:AddOrUpdate>
</soapenv:Body> 
```

生成的没有 Axis2 库的 SOAP：

```
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
<S:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
    <wsse:UsernameToken>
        <wsse:Username>username</wsse:Username>
        <wsse:Password>password1</wsse:Password>
    </wsse:UsernameToken>
    </wsse:Security>
</S:Header>
<S:Body>
<AddOrUpdate xmlns="http://tempuri.org/" xmlns:ns2="http://schemas.datacontract.org/2004/07/Service.DataTransferObjects" xmlns:ns3="http://schemas.datacontract.org/2004/07/Service.ServiceUtils" xmlns:ns4="http://schemas.microsoft.com/2003/10/Serialization/">
    <employee/>
</AddOrUpdate>
</S:Body> 
```

# java - 在 != 机器上使用时创建连接的 Java RMI 异常

> ID：12785129
> 
> 赞同：1
> 
> 时间：2012-10-08T15:50:23.843
> 
> 标签：java, callback, rmi

几个小时以来，我一直在努力解决 RMI 问题。它现在是一个非常愚蠢的例子，只有当我在同一台计算机上启动客户端和服务器时才有效。一旦我在 != 机器上启动客户端 ^ 服务器，当服务器尝试调用回调时，我会得到一个异常：

```
Exception creating connection to: 192.168.244.1; nested exception is: 
java.net.SocketException: Network is unreachable
at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:632)
at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:216)
at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:202)
at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:128) 
```

顺便说一句，由于我在 10.0.0.x 子网上，这没有任何意义，这个 IP 来自哪里？

该代码由两个类组成，Server 和 Client，实现了两个 {Server|Client} 接口。我从 RMIRegistry 获取服务器对象并调用登录方法没有问题。我可以通过服务器端的断点看到代码已执行，但是一旦涉及回调指令，它就会失败。例外是客户端顺便说一句。

我尝试在两台机器上禁用防火墙，但均未成功。我怀疑问题来自异常发送给我的 ip，但我不知道它来自哪里。

这是以下代码：（Client.java）

```
public class Client extends UnicastRemoteObject implements ClientInterface {

    public static void main(String[] args) {
        try {
            new Client();
        } catch (RemoteException e) {
            e.printStackTrace();
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (NotBoundException e) {
            e.printStackTrace();
        }
    }

    public Client() throws RemoteException, MalformedURLException, NotBoundException {
        ServerInterface s = null;
        s = (ServerInterface) Naming.lookup("rmi://10.0.0.48/server");
        s.login(this);
    }

    @Override
    public void talk() throws RemoteException {
        System.out.println("Talkiiiing");
    }
} 
```

(客户端接口.java)

```
public interface ClientInterface extends Remote {
    void talk() throws RemoteException;;
} 
```

(服务器.java)

```
public class Server extends UnicastRemoteObject implements ServerInterface {

    public Server() throws RemoteException, MalformedURLException {
        LocateRegistry.createRegistry(1099);
        if (System.getSecurityManager() == null)
            System.setSecurityManager(new RMISecurityManager());
        Naming.rebind("rmi://localhost:1099/server", this);
    }

    public static void main(String[] args) {
        try {
            new Server();
        } catch (RemoteException e) {
            e.printStackTrace();
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }
    }

    @Override
    public void login(ClientInterface clientInterface) throws RemoteException {
        clientInterface.talk();
    }
} 
```

最后是（ServerInterface.java）

```
public interface ServerInterface extends Remote {
    void login(ClientInterface clientInterface)  throws RemoteException;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T00:17:01.420

这是经典的 java.rmi.server.hostname 问题。请参阅[RMI FAQ 中的 A.1 项](http://docs.oracle.com/javase/6/docs/technotes/guides/rmi/faq.html#domain)。您需要将服务器 JVM 上的 java.rmi.server.hostname 设置为您希望客户端在连接时使用的地址。问题是由错误配置的 DNS 引起的：也许你可以在那里修复它：如果可以的话更好。'localhost' 应解析为 127.0.0.1，您的主机名应解析为您的真实 IP 地址。

# iphone - 如何在核心数据中导入数据库模式

> ID：12785131
> 
> 赞同：0
> 
> 时间：2012-10-08T15:50:27.680
> 
> 标签：iphone, core-data

我想在我的核心数据中导入数据库模式，我是一个基于视图的应用程序和手动添加的核心数据。

我创建了一个新的数据模型，现在我想导入我在 .sql 文件中获得的数据库架构，是否可以导入该架构或者我需要手动创建所有表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:23:55.233

请注意，Core Data 是一个对象图持久性框架，而不是数据库*本身*。这可能是微妙的区别，但当您考虑尝试做您所提议的事情时，这是一个重要的区别。

虽然 Core Data 可以由 sqlite 存储支持，但在大多数情况下，实现细节是不透明的。在任何情况下，您都无法将您的反向移植`sql`到 Core Data 模型。

我的建议是让您决定 Core Data 是否适合您，在这种情况下，您应该通过在模型构建器工具中创建实体和关系来使用它，**或者**，如果您热衷于保留数据库模式，那么查看原始 sqlite 周围的 Cocoa 包装器，例如 Gus Mueller 的[FMDB](https://github.com/ccgus/fmdb)

看看[核心数据编程指南](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/cdProgrammingGuide.html#//apple_ref/doc/uid/TP30001200-SW1)。常见问题解答中有此 Q/A：

> 如何将现有的 SQLite 数据库与 Core Data 一起使用？
> 
> **你没有。**尽管 Core Data 支持 SQLite 作为其持久存储类型之一，但数据库格式是私有的。您不能使用原生 SQLite API 创建 SQLite 数据库并将其直接与 Core Data 一起使用（也不应该使用原生 SQLite API 操作现有的 Core Data SQLite 存储）。如果您有现有的 SQLite 数据库，则需要将其导入核心数据存储（请参阅“高效导入数据”）。

# python - Python 从 Apache 获取 URL

> ID：12785133
> 
> 赞同：0
> 
> 时间：2012-10-08T15:50:32.063
> 
> 标签：python, apache, python-2.7

我使用 Apache2 作为我的网络服务器，使用 mod_python 作为它的“解释器”。如何获取当前的 url 参数？例如：/cgi-bin/test.py?set=12

我想根据 URL 中发布的值进行操作。我查看了`urlparse`图书馆，但这需要 URL，我还没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:01:06.217

```
def index():  
    return "Python works!"

def command(command):  
    return "this is a command %s!" %command 
```

正常调用页面时索引返回字符串

test.py/command?command=foo 将返回 foo

# symfony - 教义：左连接分页

> ID：12785143
> 
> 赞同：15
> 
> 时间：2012-10-08T15:51:08.093
> 
> 标签：symfony, doctrine-orm, pagination

我想用至少 2 个左连接对复杂请求进行分页，但是我正在使用的分页包 (KnpPaginationBundle) 无法告诉 Doctrine 如何计算结果（[分页过程需要](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/tutorials/pagination.html)），并继续拥有这个例外。

`Cannot count query which selects two FROM components, cannot make distinction`

这是使用 Doctrine QueryBuilder 构建的示例请求。

```
public function findGroupsByUser(User $user, $listFilter, $getQuery = false, $order = 'ASC')
{
    $query = $this->createQueryBuilder('r')
        ->select('r as main,g')
        ->select('r as main,g, count(gg) as members')
        ->leftjoin('r.group', 'g')
        ->innerjoin('MyBundle:GroupMemberRel', 'gg', 'WITH', 'r.group = gg.group')
        ->addGroupBy('g.groupId')
        ->add('orderBy', 'g.name ' . $order);
   if ($getQuery == true) {
        return $query;
    }

    return $query->getQuery()->getResult();
} 
```

然后我把这个请求给 knp_paginator 服务，然后我得到了异常

```
 $groupQuery = $this->em->getRepository('MyBundle:GroupMemberRel')->findGroupsByUser($user, $listFilter, true);
    $paginator = $this->container->get('knp_paginator');
    /* @var $groups Knp\Component\Pager\Pagination\PaginationInterface */
    $groups = $paginator->paginate(
        $groupQuery, $this->container->get('request')->query->get('page', 1), 10 /* limit per page */
    ); 
```

关于如何对复杂请求进行分页的任何想法，我很确定这个用例很常见，不想在分页后补充我的结果。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-07-26T14:09:00.363

对于任何寻找这个答案的人，有一个很好的解决方案： [https ://github.com/KnpLabs/KnpPaginatorBundle/blob/master/Resources/doc/manual_counting.md](https://github.com/KnpLabs/KnpPaginatorBundle/blob/master/Resources/doc/manual_counting.md)

```
$paginator = new Paginator;

// determine the count of the entire result set
$count = $entityManager
    ->createQuery('SELECT COUNT(c) FROM Entity\CompositeKey c')
    ->getSingleScalarResult();

// create a query to be used with the paginator, and specify a hint
$query = $entityManager
     ->createQuery('SELECT c FROM Entity\CompositeKey c')
     ->setHint(
        'knp_paginator.count', 
        $count
    );

// paginate, and set "disctinct" option to false
$pagination = $paginator->paginate(
    $query, 
    1, 
    10, 
    array(
        'distinct' => false,
    )
); 
```

基本上，您正在做的是创建自己的“计数”查询并指示 knp 分页器使用它。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-05-20T21:52:33.320

很难理解原始问题中的实体，但我遇到了同样的问题，确实可以解决。

假设您有这样的实体：

```
 class User
  {
    // ...
    /**
     * @ORM\OneToMany(targetEntity="Registration", mappedBy="user")
     */
    private $registrations;
    // ...
  } 
```

重要的是它与另一个实体具有一对多的关系，并且无论出于何种原因，您都希望能够通过 QueryBuilder 加入该关系（例如，您可能希望在`HAVING`查询中添加一个子句以选择仅具有一个或多个这些其他实体的那些实体）。

您的原始代码可能如下所示：

```
 $qb = $this->createQueryBuilder();

  $query = $qb
    ->select('u')
    ->add('from', '\YourBundle\ORM\Model\User u')
    ->leftJoin('\YourBundle\ORM\Model\Registration', 'r', 'WITH', 'u.id = r.user')
    ->groupBy('u.id')
    ->having($qb->expr()->gte($qb->expr()->count('u.registrations'), '1')
    ->getQuery(); 
```

这将引发异常：`Cannot count query which selects two FROM components, cannot make distinction`

要解决此问题，请重写查询，以便 QueryBuilder 仅具有一个“来自”组件——正如异常所指示的那样——通过移动内联连接。像这样：

```
 $qb = $this->createQueryBuilder();

  $query = $qb
    ->select('u')
    ->add('from', '\YourBundle\ORM\Model\User u LEFT JOIN u.registrations r')
    ->groupBy('u.id')
    ->having($qb->expr()->gte($qb->expr()->count('r'), '1')
    ->getQuery(); 
```

应该可以与 Doctrine 的 Paginator 类一起正常工作，而无需其他捆绑包。还要注意连接的简写语法；使用 Doctrine，您没有看到明确指定连接实体（尽管您可以），因为映射已经知道它是什么。

希望这对某人有所帮助，关于这个问题的内容不多。[您可以在此处查看@halfer 的评论，](https://stackoverflow.com/questions/14030475/left-join-with-pagerfanta-doctrine?lq=1#comment19380724_14030475)了解有关内部如何处理此问题的更多信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-26T19:00:37.287

更新`doctrine/dbal`到版本`2.5`为我解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-06T10:46:01.063

如果您没有按照上述答案中提供的方式使用常规映射实体，则连接将在结果集中创建其他组件。这意味着该集合不能被计算，因为它不是一个标量结果。

因此，关键是将您的结果集保留在一个组件中，这将允许生成和计算标量结果。

您可以在运行时将常规字段转换为实体映射。即使您随机加入其他实体，这也允许您编写仅返回一个组件的查询。“其他实体”成为主实体的子实体，而不是附加的根实体或结果的额外组件。

下面的示例显示了一对一的映射。我没有尝试过更复杂的映射，但我的成功表明它应该是可能的。注册实体有一个名为 user 的字段，其中包含用户 ID，但它不是映射实体，只是一个普通字段。

（这已从一个工作示例修改但未按原样测试 - 所以视为伪代码）

```
 $queryBuilder // The query builder already has the other entities added.
        ->innerJoin('r.user', 'user')
    ;

    $mapping['fieldName'] = 'user';
    $mapping['targetEntity'] = '\YourBundle\ORM\Model\User';
    $mapping['sourceEntity'] = '\YourBundle\ORM\Model\Registration';
    $mapping['sourceToTargetKeyColumns'] = array('user' => 'id');
    $mapping['targetToSourceKeyColumns'] = array('id' => 'user');
    $mapping['fetch'] = 2;
    $mapping['joinColumns'] = array(
        array(
            'name' => 'user',
            'unique' => false,
            'nullable' => false,
            'onDelete' => null,
            'columnDefinition' => null,
            'referencedColumnName' => 'id',
        )
    );
    $mapping['mappedBy'] = 'user';
    $mapping['inversedBy'] = null; // User doesn't have to link to registrations
    $mapping['orphanRemoval'] = false;
    $mapping['isOwningSide'] = true;
    $mapping['type'] = ClassMetadataInfo::MANY_TO_ONE;

    $vm = $this->em->getClassMetadata('YourBundle:Registration');

    $vm->associationMappings["user"] = $mapping; 
```

注意：我使用的是 PagerFanta 而不是 KNP - 但问题在于 Doctrine，所以我希望这将在任何地方工作。

# iphone - 我可以在我的 AppDelegate 中接收震动事件吗？

> ID：12785146
> 
> 赞同：3
> 
> 时间：2012-10-08T15:51:15.520
> 
> 标签：iphone, ios, uiapplicationdelegate, uiresponder

应用程序委托是一个 UIResponder 子类（从 Xcode 4.2 开始），因此它应该能够接收触摸和运动事件。我在我的 AppDelegate 类中添加了这个，但它不起作用：

```
-(BOOL)canBecomeFirstResponder
{
    return YES;
}

- (void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event {
    if (motion == UIEventSubtypeMotionShake) {
        NSLog(@"shake");
    }
} 
```

它当然可以在视图控制器中工作，但我想检测应用程序范围内的抖动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-01T00:15:52.550

做这个：

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    [self becomeFirstResponder];

}
- (void)motionBegan:(UIEventSubtype)motion withEvent:(UIEvent *)event {

    NSLog(@"motionBegan");

}

-(BOOL)canBecomeFirstResponder {
return YES;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-05T09:11:49.513

我扩展了 UIApplication 类并添加了对 main 的类引用：MyApplication.h

```
@interface MyApplication : UIApplication

@end 
```

我的应用程序.m

```
@implementation MyApplication

- (void) sendEvent:(UIEvent *)event
{
    if( event && (event.subtype==UIEventSubtypeMotionShake))
    {
        AppDelegate *objAppDelegate = (AppDelegate *)[UIApplication sharedApplication].delegate;

        [objAppDelegate doWhatEver];
        [super sendEvent:event];
    }
    else
    {
        [super sendEvent:event];
    }
}

@end 
```

以及 main.m 中的最后一步

```
int main(int argc, char *argv[])
{
return UIApplicationMain(argc, argv, NSStringFromClass([MyApplication class]), NSStringFromClass([AppDelegate class]));
} 
```

这适用于所有情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:51:12.970

据我所知，它应该需要成为接收事件的第一响应者。如果你的应用有 UINavigationController 或 UITabController，也许你可以尝试在那里接收它。

# internet-explorer - Lotus Notes 8.5.3 中的托管浏览器是 IE7？

> ID：12785147
> 
> 赞同：1
> 
> 时间：2012-10-08T15:51:24.093
> 
> 标签：internet-explorer, lotus-notes, composite-component, xulrunner

我在复合应用程序中使用 Lotus Notes 中的托管浏览器。即使我的机器上安装了 IE 9，托管浏览器使用的默认 webbrowser 似乎是

Mozilla/4.0（兼容；MSIE 7.0；Windows NT 6.1；WOW64；Trident/5.0；SLCC2；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；Media Center PC 6.0；.NET4。 0C)

有没有办法将其更改为更现代的浏览器或 XULRunner？

![在此处输入图像描述](../Images/5d631f1a27747616357d4b983e3233ef.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:39:14.293

不，它是兼容模式下的 IE9：

[http://blogs.msdn.com/b/ie/archive/2010/03/23/introducing-ie9-s-user-agent-string.aspx](http://blogs.msdn.com/b/ie/archive/2010/03/23/introducing-ie9-s-user-agent-string.aspx)

不同之处在于 Trident-String（Trident 5.0 表示 IE9）。

您可能希望在您的网站内设置 X-UA-COMPATIBLE 标志。

# ruby - 无法为 New Relic Infrastructure Agent 加载已安装的 gem

> ID：12785156
> 
> 赞同：0
> 
> 时间：2012-10-08T15:52:12.017
> 
> 标签：ruby, rubygems, gem, newrelic

我`New Relic Infrastructure Agent`在 Ubuntu 12.04 LTS 上安装，例如

```
sudo gem install newrelic_ia 
```

然后我执行`newrelic_ia --install -a`，它说

```
Unable to load required gem newrelic_rpm
Try `gem install newrelic_rpm` 
```

但是使用`gem server`它告诉我...

宝石服务器

```
There are 3 gems installed:
newrelic_ia, newrelic_rpm, rubygems. 
```

有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:09:37.120

可能不是您正在寻找的答案，但是：newrelic_ia 不受 New Relic 的正式支持。如果您正在寻找服务器指标（CPU、磁盘、网络等），您可以使用他们的免费[服务器监控](http://newrelic.com/features/server-monitoring)代理。

# jquery - 单击禁用标签时发出警报

> ID：12785158
> 
> 赞同：0
> 
> 时间：2012-10-08T15:52:14.937
> 
> 标签：jquery

我禁用任何输入并使用以下代码进行选择：

```
 var elements = ['#lbl1' ,'#lbl2','#lbl3','#lbl4','#lbl5','#lbl6','#lbl7'];
 jQuery.each(elements, function(element) {
     $(elements[element]).attr('disabled', true);   
 }); 
```

现在，如果用户单击用户的禁用标签警报，我想：

```
var elements = ['#lbl1' ,'#lbl2','#lbl3','#lbl4','#lbl5','#lbl6','#lbl7'];
 jQuery.each(elements, function(element) {
   $(elements[element]).click(function{
   if ( $(elements[element]).attr() == 'disabled')  alert('DISABLED');  
   });
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:55:26.107

您缺少 click 函数的开/关括号：

```
 $(elements[element]).click(function() { 
```

为什么不将这两个功能结合起来呢？

```
var elements = ['#lbl1' ,'#lbl2','#lbl3','#lbl4','#lbl5','#lbl6','#lbl7'];
 jQuery.each(elements, function(element) {
     $(elements[element]).attr('disabled', true).click(function(){
        alert('DISABLED');
     });
 }); 
```

因为您将绑定到点击函数链接到设置属性函数的末尾，所以您不需要多次运行每个循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:54:29.083

我不认为像**click 这样的鼠标事件适用于 Disabled Elements**。

如果你想要代码，可以这样写……但它不会在禁用元素上触发。

检查**true**而不是 disabled..

```
 $(function() {
    $('[id^="lbl"]').attr('disabled', true);

    $('[id^="lbl"]').on('click', function(){
        if( $(this).attr('disabled') === true){
              alert('DISABLED');
          }
    });
  }); 
```

您不需要在 $.each 循环内分配点击事件。

您可以使用**id^=lbl**直接分配事件，它检查 id 以 lbl 开头的所有元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T15:55:09.910

如果您在要禁用的所有元素上放置一个类，这将容易得多。然后，您可以将其变成单线。

```
$(".disabled-element").prop("disabled", true); 
```

要检查标签是否被禁用，您也不需要循环：

```
$(".disabled-element").click(function() {
    if ($(this).prop("disabled")) {
        alert("disabled");
    }
}); 
```

请注意，尽管`disabled`表单元素在大多数浏览器中不会引发点击事件，但标签应该没问题。

# git - 让 Git 跟踪重命名和编辑的文件

> ID：12785160
> 
> 赞同：16
> 
> 时间：2012-10-08T15:52:30.653
> 
> 标签：git, version-control, git-merge, file-rename

[以前](https://stackoverflow.com/questions/1430749/getting-git-to-acknowledge-previously-moved-files) [有人](https://stackoverflow.com/questions/2314652/is-it-possible-to-move-rename-files-in-git-and-maintain-their-history#comment2282717_2314757) [问](https://stackoverflow.com/questions/2641146/handling-file-renames-in-git)过有关在 Git 中重命名文件的问题，但我无法解决我的具体问题。

我已经移动和编辑了多个文件（我没有使用`git mv`- 不幸的是现在为时已晚）。现在我想要它，所以当我的同事从我的存储库中提取，对这些相同的文件进行了自己的编辑（不移动它们）时，它成功地将我的更改与他在文件的新位置中的更改合并。要成功合并，Git 显然需要知道这些是相同的文件。

Git 是否足够聪明，可以自己解决这个问题？似乎很难相信。如果是这样，我如何确定 Git 会拾取特定的文件移动 - 即使内容已更改？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-08T16:16:22.177

Git 实际上并不跟踪存储库中的重命名，它使用差异启发式来确定您是否将文件重命名为另一个文件。也就是说，如果你`git mv`一个文件然后完全替换了内容，它*不*被认为是重命名，你*不需要*使用`git mv`它来检测重命名。

例如：

```
% mv d.txt e.txt
% git rm d.txt
rm 'd.txt'
% git add e.txt
% git commit -m"rename without git mv"
[master f70ae76] rename without git mv
 1 file changed, 0 insertions(+), 0 deletions(-)
 rename d.txt => e.txt (100%)
% git diff --summary --find-renames HEAD~1 HEAD
 rename d.txt => e.txt (100%) 
```

同样，`git mv`并不意味着文件会被重命名，它仍然会使用 diff 算法：

```
% git mv e.txt f.txt
% echo "Completely replacing f.txt" > f.txt
% git add f.txt
% git commit -m"git mv doesn't help here"
[master 068d19c] git mv doesn't help here
 2 files changed, 1 insertion(+), 14 deletions(-)
 delete mode 100644 e.txt
 create mode 100644 f.txt
% git diff --summary --find-renames HEAD~1 HEAD
 delete mode 100644 e.txt
 create mode 100644 f.txt 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-08T16:15:50.360

默认情况下，只要文件在两次提交之间被删除，git 就会检查重命名——不需要手动告诉它。如果您确实移动了一个文件（使用 git mv，而不是手动删除它并再次添加它）它会忽略提示。出于性能原因，启发式算法不会一直运行——如果您将一个文件移开，然后添加一个具有原始名称的新文件，则可能无法检测到该移动。

请注意，从逻辑上讲，git 仅存储每个修订版中存在的树：它不*存储*有关修订版之间所做更改的任何跟踪信息。

如果您想查看检测到的内容，可以使用`-M`( `--find-renames`) 开关`git diff`来显示重命名。此开关还打开启发式，如果您有一个不会触发它们的提交，这很有用。

这种基于启发式的方法是保持提交小且独立的一个很好的理由（如果您需要另一个），因为这使 git 的工作更容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-13T13:00:22.560

`git diff`没有发现我重命名了文件*并*更改了它们的内容。我的场景是我有文件 A、B、C，并插入了一个新的 B，所以旧的 B 现在是 C，旧的 C 现在是 D。`git diff`告诉我 B 和 C 现在完全不同了！

我使用的解决方案既繁琐又手动，但确实完成了工作。

1.  尽我所能重命名文件。即B到Bnew，C到B，D到C。
2.  做了差异，检查没有错误。
3.  承诺。
4.  用于`git mv`将文件重新命名为新名称。B 到 C，C 到 D。
5.  承诺。
6.  其他是否重命名，并将它们作为新文件提交。即Bnew to B。

# amazon-ec2 - Amazon EC2 保留实例能否与 AWS Elastic Beanstalk 中的自动扩展一起使用？

> ID：12785161
> 
> 赞同：24
> 
> 时间：2012-10-08T15:52:32.830
> 
> 标签：amazon-ec2, amazon-elastic-beanstalk

据我了解，AWS Elastic Beanstalk 将允许您设置自动扩展，这意味着您可以在一夜之间使用微实例，并在白天自动扩展。如果您这样做，您还能利用预留的 EC2 实例定价吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-11T12:51:35.943

## 更新（2013 年 9 月）

AWS 刚刚宣布支持[Modify EC2 Reserved Instance Reservations](http://aws.typepad.com/aws/2013/09/new-modify-ec2-reserved-instance-reservations.html)，这消除了以前的两个限制（我已经相应地更新了我的初始答案）：

> 今天，当您的需求发生变化时，我们赋予您修改预留实例 (RI) 的权力，从而使预留实例模型更加灵活。现在，只要您位于同一区域内，您就可以在可用区之间移动您的 RI。如果您的 AWS 账户启用了 EC2-Classic，您还可以在 EC2-Classic 和 EC2-VPC 之间移动您的 RI。您现在可以根据您的需求和架构的变化对您的预留实例进行调整。

* * *

## 初始答案（更新）

> 如果您这样做，您还能利用预留的 EC2 实例定价吗？

当然，[Amazon EC2](http://aws.amazon.com/ec2/)预留实例的计费和使用是透明处理的，即 AWS 只需应用您的预留实例定价，只要您的预留实例按类型、区域和可用区与您正在运行的实例匹配，请参阅以下常见问题了解详细信息：

*   [如何控制以预留实例费率计费的实例？](http://aws.amazon.com/ec2/faqs/#How_do_I_control_which_instances_are_billed_at_the_Reserved_Instance_rate)
    RunInstances 命令不区分按需实例和预留实例。在计算您的账单时，我们的系统会自动优化哪些实例以较低的预留实例费率收费，以确保您始终支付最低金额。

请注意有关如何匹配此虚拟池中的实例的限制，例如：

*   [我为特定实例类型（即高 CPU 超大型实例）购买的预留实例能否应用于我正在运行的不同实例类型（即标准大型实例）？](http://aws.amazon.com/ec2/faqs/#Can_a_Reserved_Instance_be_used_for_any_instance_type)
    不可以。每个预留实例都与特定的实例类型相关联，并且只能在预留实例期限内应用于该实例类型。

*   [我可以将预留实例从一个区域移动到另一个区域吗？](http://aws.amazon.com/ec2/faqs/#Can_I_move_a_Reserved_Instance_from_one_region_to_another)
    不可以。每个预留实例都与特定区域相关联，该区域在预留实例的生命周期内是固定的，并且无法更改。

*   [Do I need to specify an Availability Zone when I launch my instances in order to take advantage of my Reserved Instances?](http://aws.amazon.com/ec2/faqs/#Do_I_need_to_specify_an_Availability_Zone_when_I_launch_my_instances)
    Yes. When you purchase a Reserved Instance you specify the Availability Zone in which you want to reserve that instance. In order to use that Reserved Instance, you need to ensure that you launch your instance in that same Availability Zone. [...]

The latter is easily overlooked when starting instances without explicitly specifying an availability zone, which will yield a random one in turn.

# java - 使用 Maven 构建时包不存在错误

> ID：12785166
> 
> 赞同：2
> 
> 时间：2012-10-08T15:52:58.583
> 
> 标签：java, maven, dependency-management

我正在尝试为我正在分叉的项目构建一个 pom.xml。原来的项目使用了我不能使用的pom层次结构，所以我需要写一个新的pom.xml。

现在，我得到一个恼人的包 xxx 不存在，例如 org.apache.commons.logging，但在我的 pomxml 中，我得到了依赖项：

```
<dependencyManagement>
  <dependencies>
    ...
    <dependency>
      <groupId>commons-logging</groupId>
      <artifactId>commons-logging</artifactId>
      <version>1.1.1</version>
    </dependency>
    ...
  <dependencies>
<dependencyManagement> 
```

显然，Maven 在导入方面失败了，例如：

```
import org.apache.commons.logging.Log; 
```

我的 pom.xml 没有任何父级。我正在使用带有 Java 5 的 Maven 2。有什么线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T16:05:28.833

上面的dependencyManagement 条目告诉maven：每次项目声明这样的依赖项时：

```
<dependencies>
 ...
<dependency>
  <groupId>commons-logging</groupId>
  <artifactId>commons-logging</artifactId>
  <!-- notice there is no version -->
</dependency> 
```

使用版本形式dependencyManagement：1.1.1。

在你的主 pom 中拥有 dependencyManagement 非常有用，这样从这个 pom 继承的所有项目都将始终使用相同的版本。在这个地方更改它会导致所有继承项目在下次构建时使用另一个版本。

将 dependencyMangement 保留在主 pom 中，在项目中添加*不带版本*的依赖项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T15:55:32.697

`<dependencyManagement>`如果您没有 pom 层次结构，则不需要`<dependencies>`. 去除周围`<dependencyManagement>`。

# jquery - 使用 jquery 地址（ajax）淡入和淡出内容

> ID：12785167
> 
> 赞同：1
> 
> 时间：2012-10-08T15:53:03.150
> 
> 标签：jquery, ajax, jquery-address

一旦加载了新内容，我将如何让已经加载的内容淡出，然后这个新内容淡入。

我正在使用 jquery 地址来尝试实现这一点，如果使用另一个插件更容易/更好，请建议一个:-)

我的代码如下：

```
 function loadURL(url) {
        console.log("loadURL: " + url);
        $("#content").load(url);
    }

    $.address.init(function(event) {
        console.log("init: " + $('[rel=address:' + event.value + ']').attr('href'));
    }).change(function(event) {
        $("#content").load($('[rel=address:' + event.value + ']').attr('href'));
        console.log("change");
    })

    $('a').click(function(){
        loadURL($(this).attr('href'));
        $("#content").hide();
        $("#content").fadeIn();
    }); 
```

我确实尝试过并认为我可以创建一个加载器 div，我会在顶部淡入而不是淡出内容，但我真的不知道该去哪里。

目前内容淡入，一旦你点击另一个链接，它就会变成新内容，也会淡入，但我不知道在新内容淡入之前如何让它淡出。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T19:33:10.943

听起来[这个小提琴](http://jsfiddle.net/qPVMZ/)就是你要找的。我使用[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)

```
$('#b').click(function(){
    $.ajax({

      //i had to create another test fiddle to overcome the 'same origin' issues
      url: 'http://fiddle.jshell.net/K6YPD/show/',
      success: function(data) {             

          //we have the data now
          $('#content').fadeOut(1500, function() {
            //this is a callback once the element has finished hiding

              //populate the div with whatever was returned from the ajax call
              $('#content').html(stripHTML(data));
              //fade in with new content
              $("#content").fadeIn(1500);
          });
      }
    });
}); 
```

# asp.net - 可以使用文件上传控件上传文件但无法访问文件

> ID：12785169
> 
> 赞同：0
> 
> 时间：2012-10-08T15:53:06.057
> 
> 标签：asp.net

我可以上传文件（下面的源文件已上传我用 rdp 检查过。）但我无法在浏览器（.docx）中访问它：找不到文件或目录。我应该怎么办

```
protected void Button1_Click(object sender, EventArgs e)
{
    if (FileUpload1.HasFile)
    {
        try
        {
            string filename = Path.GetFileName(FileUpload1.FileName);
            FileUpload1.SaveAs(Server.MapPath("~/") + filename);
            Label1.Text = "Upload status: File uploaded!";
        }
        catch (Exception ex)
        {
            Label1.Text = "Upload status: The file could not be uploaded. The following error occured: " + ex.Message;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:02:58.220

通过 FTP 或 RDP 登录服务器以确定该文件确实存在。

如果该文件实际存在于服务器上，请检查 IIS。它可能尚未配置为提供 .docx 文件。

如果服务器上不存在该文件，那么您很可能有上传问题，很可能是权限问题。您正在尝试将文件写入网站的根目录。即使设置了权限以允许这样做，这也不是一个好主意。

如果是上传问题，请在根目录下创建一个子目录，并授予运行网站的用户对该子目录的修改/写入权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:55:22.233

确保配置为应用程序池身份的用户在您尝试上传到的位置具有写入权限。在这种情况下，它看起来像是站点根目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T16:03:43.660

> 我可以上传文件（以下来源）这意味着您可以写入文件路径。
> 
> 我无法在浏览器中访问它您是否从浏览器中指定了正确的文件路径？你的客户端电脑上安装了word吗？

出于安全原因，您应该将文件放在根路径之外。然后给它相对文件路径名：“../../filename.docx”，并给路径写和读权限。

# android - NFC - p2p 模式场景

> ID：12785170
> 
> 赞同：1
> 
> 时间：2012-10-08T15:53:06.800
> 
> 标签：android, nfc

据我了解，使用最新的 Android SDK，手机可以充当 NFC 阅读器读取的“标签”。

我想实现以下场景：

*   手机被放置在 NFC 读卡器旁边
*   NFC阅读器收集一个GUID（基本上我想通过NFC读取一些数据，这些数据可以用来唯一地识别手机/所有者，没什么特别的）
*   然后将该 GUID 与时间戳一起推送到数据库

以这种方式收集的数据可以通过网页浏览。

1) 这是 NFC 可能/有效的使用场景吗？

2) 需要什么样的设备来完成这项工作？（我确实有一部支持 NFC 的手机）

*   我对阅读器特别感兴趣（最好使用基于 USB 的廉价解决方案）——它需要能够从中获取数据（以便以后可以将其插入数据库）。有什么推荐的吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:47:29.720

这有点取决于您所说的“充当“标签”的电话”是什么意思。您无法在商业设备上真正进行卡模拟。您可以使用有根手机和最新版本的 CyanogenMod，但有[一定的限制](http://nelenkov.blogspot.jp/2012/10/emulating-pki-smart-card-with-cm91.html)。手机通过官方 SDK 主动发送数据的唯一方法是通过 Android Beam 在 P2P 模式下交换 NDEF 消息。如果这对您有用，只要您可以让您的主机端程序接收并处理这些（您需要找到 SNEP 或 Google 专有的“NDEF 推送”协议的实现），整个系统就可以工作。这适用于两部 Android 手机开箱即用，对于外部阅读器，您将不得不做更多的工作。

[这](http://www.acs.com.hk/index.php?pid=product&id=ACR122U)是一个便宜且相对常见的阅读器，带有适用于多个平台的驱动程序。它确实有一些时间问题，但应该适用于大多数目的。

# ssis - 如何使用 SSIS 在现有 Excel 工作表的 2 行之间插入新行

> ID：12785183
> 
> 赞同：1
> 
> 时间：2012-10-08T15:53:43.607
> 
> 标签：ssis

我在 Visual Studio 2010 中创建了一个 SSIS 包，用于从 MS SQL 数据库中提取数据并将数据插入到我创建的电子表格模板中。我试图让它开始在 A3 处写入输出，但由于我有 B11:C13 中的数据摘要，它总是开始在 A14 中写入。

我也尝试设置 OpenRowset 参数，但由于下面有我希望它启动的数据，它不起作用。

是否可以使用包含的摘要数据做我想做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T10:20:00.820

一种解决方法：第一个是首先将您的数据转储到工作表中，然后在 B11:C13 中插入​​您的摘要。或者您可以使用 SSIS 脚本添加此摘要以使用 OLE 技术驱动 excel 它允许您从 SSIS 制作流程。下面的代码片段插入 A6：B6 单元格：

```
using System;
using System.Drawing;
using System.Windows.Forms;
using Excel = Microsoft.Office.Interop.Excel; 

namespace WindowsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            try
            {
                System.Data.OleDb.OleDbConnection MyConnection ;
                System.Data.OleDb.OleDbCommand myCommand = new System.Data.OleDb.OleDbCommand();
                string sql = null;
                MyConnection = new System.Data.OleDb.OleDbConnection("provider=Microsoft.Jet.OLEDB.4.0;Data Source='c:\\csharp.net-informations.xls';Extended Properties=Excel 8.0;");
                MyConnection.Open();
                myCommand.Connection = MyConnection;
                sql = "Insert into [Sheet1$] (id,name) values('5','e')";
                myCommand.CommandText = sql;
                myCommand.ExecuteNonQuery();
                MyConnection.Close();
            }
            catch (Exception ex)
            {
                MessageBox.Show (ex.ToString());
            }
        }
   }
} 
```

此摘要也可以从宏中添加（因此您必须在 excel 文件中转储数据后运行它），但这并不有趣，因为它将您的应用程序拆分为 SSIS 和 Excel 宏不太好... ;-)

# javascript - Greasemonkey：在两个元素之间寻找一个字符串

> ID：12785185
> 
> 赞同：-2
> 
> 时间：2012-10-08T15:53:47.347
> 
> 标签：javascript, greasemonkey, string-matching

`<h2>`我正在编写一个 Greasemonkey 脚本，它应该做一件简单的事情：如果元素（页面上总是只有一个）和`<h3>`元素的第一次出现（可以是其中几个或根本没有）之间存在某个字符串，然后......（我已经完成了这部分）。

对于有条件的帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:05:28.613

```
var masterString = document.body.innerHTML;
var start = masterString.indexOf('<h2>'); 
var end = masterString.indexOf('<h3>'); // Will find the position of first occurance of h3 - if any

if (end <0)
// there is no h3
else {
  var searchMe = masterString.substr(start,end);  // now this is the portion of your HTML body that you want to look for a string match
  var numberOfOccurances = searchMe.match(/yourString/g);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T21:36:49.617

现在我恰好熟悉 Mikhail 正在编写的代码。

基本结构是

```
<div>
<div>
<h2>Something</h2>
<td>We want to search for the string here</td>
<td>We want to search for the string here</td>
</div>

<div>
<h3>Something else</h3>
<td>May contain the same string, but we are only interested if it contains in previous div .</td>
<td>May contain the same string, but we are only interested if it contains in previous div .</td>
</div>
</div> 
```

该字符串不是 h2 的子项，因此我认为 getElementsByTagName 不会起作用。不幸的是，实际上有数百个具有相同类 ID 的 div 层。在这种特殊情况下，标题是代码中唯一的唯一细节。所以在我看来，最好的方法是先找到 h2，去它的父级并将文本存储为字符串。然后在文本中搜索字符串。像这样的...

```
<script>
var searcharea = jQuery('h2').parent('div').text();
var searchstring = "superstring";
if( searcharea.indexOf( searchstring ) != -1 )
    alert("exchange alert to your own things");
</script> 
```

至于h3，它可能存在也可能不存在，但由于它不是兄弟，所以这并不重要。:) 感谢大家抽出宝贵时间回答我们的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T15:56:10.793

你试过`getElementsByTagName`吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T16:02:12.233

```
//get all the H2 elements
var h2 = document.getElementsByTagName("h2");

//Just in case there are more than one...
for(var i = 0; i < h2.length; i++){
 //check for the certain string
 if(h2[i].textContent == "SOME TEXT"){
  //get the first h3 element and do something...
  var h3 = document.getElementsBtTagName("h3")[0]; //first occurrence of H3
  //DO SOMETHING
} 
```

[https://developer.mozilla.org/en-US/docs/DOM/Node.textContent](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent)

[https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName](https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName)

# excel - DataValidation 过滤器表

> ID：12785186
> 
> 赞同：0
> 
> 时间：2012-10-08T15:53:47.737
> 
> 标签：excel, excel-2010, validation, vba

我有一种情况，定义的表结构会根据控件类型发生变化（例如，它是产品品牌）。在该表中，需要使用两列/字段来填充同一工作表上的两个数据验证单元格。这些单元格位于表格上方，“理想情况下”将用于根据填充数据验证单元格的数据过滤表格的信息。

### 数据验证列表方法逻辑：

```
 Dim str As String
  str = Join(UniqueValues(ws,srcrng), ",")
  Dim val As Excel.Validation
  Set val = range(destrng).Validation
  val.Delete
  val.Add xlValidateList, xlValidAlertStop, xlBetween, str 
```

*   **ws**：@srcrng 所在的工作表
*   **srcrng**：从中提取唯一值的范围
*   **destrng**：数据验证将附加到的范围。这将被控制为只有一个单元格，如果有超过 1 行和 1 列，则会出错。

上面的方法被封装在一个传递两个参数的方法`Table1[Column1]`和`DataValidationCell1`VBA中。

只是为了避免任何问题，这里是方法`UniqueValues`逻辑：

```
Function UniqueValues(ws As Worksheet, col As String) As Variant

   Dim rng As range: Set rng = ws.range(col)
   Dim dict As New Scripting.Dictionary

   If Not (rng Is Nothing) Then
      Dim cell As range, val As String

      For Each cell In rng.Cells
         val = CStr(cell.Value)
         If InStr(1, val, ",") Then
            val = Replace(val, ",", Chr(130))  <-- Handles the fact i have commas in the field
         End If

         If Not dict.Exists(val) Then
            dict.Add val, val
         End If

      Next cell
   End If

   'Return value as Variant Array
   UniqueValues = dict.Items
End Function 
```

### 问题：

1.  我如何解释数据验证更改？
2.  我可以使用数据验证来过滤表吗？
3.  由于数据透视表不是一个合理的选项，由于信息的性质，如果数据验证过滤在功能上不可行，我还有什么选择？

在 #3 上，如果可能的话，我不想放置下拉列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:21:43.327

数据验证是一种限制可以在单元格（或一系列单元格）中输入哪种数据的方法[http://office.microsoft.com/en-us/excel-help/apply-data-validation-to -细胞-HP010072600.aspx](http://office.microsoft.com/en-us/excel-help/apply-data-validation-to-cells-HP010072600.aspx)

因此，您的问题并非特定于数据验证。您的问题似乎是关于根据表格顶部两个单元格中输入的值过滤表格（恰好应用了数据验证）。我对么？如果是这样：每次更改这些数据验证单元格时，您都需要运行宏。您可以使用 Sub Worksheet_Change(ByVal Target As Range) 自动执行此操作，或者您可以有一个“更新过滤器”按钮，它会稍微不那么“酷”。无论哪种方式，您只需要在一个宏中链接这两个单元格，并让它们根据这两个单元格的值更新表格上的过滤器。

这是一个宏的示例，它可以执行我所描述的操作：

```
Sub Worksheet_Change(ByVal Target As Range) 

    ActiveSheet.AutoFilterMode = False 
    Range("A3:H20").AutoFilter 
    Range("A3:H20").AutoFilter Field:=2, Criteria1:=Range("A1").Text 

End Sub 
```

这来自：[http ://www.ozgrid.com/forum/showthread.php?t=85547](http://www.ozgrid.com/forum/showthread.php?t=85547)

希望这可以帮助。祝你好运。

# kobold2d - 你如何使用 isWidescreenEnabled()？

> ID：12785187
> 
> 赞同：0
> 
> 时间：2012-10-08T15:53:51.157
> 
> 标签：kobold2d

在[Kobold2D v2.0.4 的发行说明中](http://kobold2d.com/display/KKDOC/Kobold2D+Release+Notes)，它说：

> 添加了 C 函数 isWidescreenEnabled() 以报告应用程序是否在宽屏“启用”的宽屏设备上运行（即当项目中包含 Default-568h@2x.png 时）

除了安装 Xcode 4.5 和 Kobold2D v2.0.4 以及在项目中包含 Default-568h@2x.png 之外，我还需要做什么才能使用 isWidescreenEnabled 功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:06:17.047

您不需要使用 isWidescreenEnabled()。您可以只使用 winSize 并查找 568 的高度（对于纵向 UI；对于横向 UI，查找 568 的宽度）。这是一些示例代码（用于纵向 UI）：

```
CGSize screenSize = [CCDirector sharedDirector].winSize;
if (screenSize.height == 568) {
  // You have a device with a 4" retina display; do something special
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:52:47.423

您可以像这样使用 isWideScreenEnabled：

```
if (isWideScreenEnabled())
{
    // widescreen-specific code here ...
} 
```

它不需要 Xcode 4.5 或 Default-568h@2x.png。它基于[this question](https://stackoverflow.com/questions/12446990/how-to-detect-iphone-5-widescreen-devices)中的答案和评论。

# android - Android 删除碎片

> ID：12785188
> 
> 赞同：2
> 
> 时间：2012-10-08T15:53:53.040
> 
> 标签：android

如何分离或删除 FragmentTransaction？谁能告诉我如何分离它的例子。我试过分离和删除。它仍然无法正常工作。请帮我。请注意，我在代码中使用了 asynctask。

```
 @Override
        public void onActivityCreated(Bundle savedInstanceState) {

                new loadListView().execute();

            super.onActivityCreated(savedInstanceState);
        }

        public class loadListView extends AsyncTask<Integer, String, String> {

            @Override
            protected void onPreExecute() {
                super.onPreExecute();
            }

            @Override
            protected String doInBackground(Integer... args) {
                ............
                }   

            @Override
            protected void onPostExecute(String args) {

                if (getActivity() != null) {
                adapter=new MainPageLazyAdapter(getActivity(), menuItems);
                setListAdapter(adapter);

             }
        }

        @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {

    FragmentManager fragmentManager = getFragmentManager();
        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
        fragmentTransaction.add(android.R.id.content, this);
        fragmentTransaction.attach(this);
        fragmentTransaction.commit();
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {

        FragmentManager fragmentManager = getFragmentManager();
        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
        fragmentTransaction.detach(this);
        fragmentTransaction.commit();

    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {

    }

} 
```

日志猫：

```
10-09 14:49:42.305: E/AndroidRuntime(5731): FATAL EXCEPTION: main
10-09 14:49:42.305: E/AndroidRuntime(5731): java.lang.RuntimeException: Unable to start activity ComponentInfo{in.wptrafficanalyzer.actionbarsherlocknavtab/in.wptrafficanalyzer.actionbarsherlocknavtab.MainActivity}: java.lang.NullPointerException
10-09 14:49:42.305: E/AndroidRuntime(5731):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
10-09 14:49:42.305: E/AndroidRuntime(5731):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
10-09 14:49:42.305: E/AndroidRuntime(5731):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
10-09 14:49:42.305: E/AndroidRuntime(5731):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
10-09 14:49:42.305: E/AndroidRuntime(5731):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-09 14:49:42.305: E/AndroidRuntime(5731):     at android.os.Looper.loop(Looper.java:137)
10-09 14:49:42.305: E/AndroidRuntime(5731):     at android.app.ActivityThread.main(ActivityThread.java:4512)
10-09 14:49:42.305: E/AndroidRuntime(5731):     at java.lang.reflect.Method.invokeNative(Native Method)
10-09 14:49:42.305: E/AndroidRuntime(5731):     at java.lang.reflect.Method.invoke(Method.java:511)
10-09 14:49:42.305: E/AndroidRuntime(5731):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:982)
10-09 14:49:42.305: E/AndroidRuntime(5731):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:749)
10-09 14:49:42.305: E/AndroidRuntime(5731):     at dalvik.system.NativeStart.main(Native Method)
10-09 14:49:42.305: E/AndroidRuntime(5731): Caused by: java.lang.NullPointerException
10-09 14:49:42.305: E/AndroidRuntime(5731):     at in.wptrafficanalyzer.actionbarsherlocknavtab.AndroidFragment.onTabSelected(AndroidFragment.java:170)
10-09 14:49:42.305: E/AndroidRuntime(5731):     at com.actionbarsherlock.internal.app.ActionBarWrapper$TabWrapper.onTabSelected(ActionBarWrapper.java:344)
10-09 14:49:42.305: E/AndroidRuntime(5731):     at com.android.internal.app.ActionBarImpl.selectTab(ActionBarImpl.java:512)
10-09 14:49:42.305: E/AndroidRuntime(5731):     at com.android.internal.app.ActionBarImpl.addTab(ActionBarImpl.java:441)
10-09 14:49:42.305: E/AndroidRuntime(5731):     at com.android.internal.app.ActionBarImpl.addTab(ActionBarImpl.java:427)
10-09 14:49:42.305: E/AndroidRuntime(5731):     at com.actionbarsherlock.internal.app.ActionBarWrapper.addTab(ActionBarWrapper.java:377)
10-09 14:49:42.305: E/AndroidRuntime(5731):     at in.wptrafficanalyzer.actionbarsherlocknavtab.MainActivity.onCreate(MainActivity.java:24)
10-09 14:49:42.305: E/AndroidRuntime(5731):     at android.app.Activity.performCreate(Activity.java:4465)
10-09 14:49:42.305: E/AndroidRuntime(5731):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
10-09 14:49:42.305: E/AndroidRuntime(5731):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
10-09 14:49:42.305: E/AndroidRuntime(5731):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:06:01.963

***这是错误的，请参阅我的更新。***

添加或删除片段后，您需要调用[commit() 。](http://developer.android.com/reference/android/app/FragmentTransaction.html#commit%28%29)`FragmentTransaction`

例子：

```
FragmentManager fragmentManager = getFragmentManager();
FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
fragmentTransaction.add(android.R.id.content, yourFragment);
fragmentTransaction.commit(); 
```

* * *

## **更新**

根据文档，您不必提交事务，系统会为您完成：http: [//developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html)

这是一个运行良好的简约示例。您的活动必须扩展`SherlockFragmentActivity`（或`FragmentActivity`）。活动实施`TabListener`。

**主要活动：**

```
public class MainActivity extends SherlockFragmentActivity implements TabListener
{
    private ActionBar.Tab homeTab;
    private ActionBar.Tab tagsTab;
    private FragOne fragOne;
    private FragTwo fragTwo;

    @Override
    public void onCreate(Bundle b)
    {
        super.onCreate(b);

        ActionBar bar = getSupportActionBar();
        bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        homeTab = bar.newTab().setText("Home");
        tagsTab = bar.newTab().setText("Tags");

        homeTab.setTabListener(this);
        tagsTab.setTabListener(this);

        fragOne = FragOne.getInstance();
        fragTwo = FragTwo.getInstance();

        bar.addTab(homeTab);
        bar.addTab(tagsTab);
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        if (tab == homeTab)
            ft.replace(android.R.id.content, fragOne);
        else
            ft.replace(android.R.id.content, fragTwo);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {}

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {}
} 
```

**FragOne**（另一个片段，，`FragTwo`只是一个不同的布局）：

```
public class FragOne extends SherlockFragment
{
    private static FragOne instance;

    public static FragOne getInstance()
    {
        if (instance == null)
            instance = new FragOne();
        return instance;
    }

    private FragOne() {}

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        return inflater.inflate(R.layout.frag_one_layout, container, false);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-14T05:06:00.750

```
private void removeFragments()
{
    List<Fragment> fragments = getSupportFragmentManager().getFragments();
    if (fragments != null) {
        android.support.v4.app.FragmentTransaction fragmentTransaction  = getSupportFragmentManager().beginTransaction();
        for (Fragment fragment : fragments) {
            if (fragment instanceof Fragment) {
                fragmentTransaction.remove(fragment);
            }
        }
        fragmentTransaction.commitAllowingStateLoss();
    }
} 
```

# struts2 - Struts 2+ guice + EJB 3.0 加速数据库

> ID：12785189
> 
> 赞同：1
> 
> 时间：2012-10-08T15:54:03.267
> 
> 标签：struts2, ejb, guice

我正在使用带有 Google guice 框架的 struts 2 来注入服务和 EJB。问题是当执行具有多个数据库查询的操作时，应用程序会变慢。另一方面，我尝试使用普通的 java 类（没有“@inject”）来进行查询，我得到了 600% 的加速。我想保留 EJB 结构。

我使用 Jprofiler 来检测瓶颈，问题出在 BCELStubBase.invoke() 中。Invoke 比调用内部的查询多五倍。

有什么解决办法吗？

# php - 如何在 ZF2 / ZF3 url view helper 中添加查询参数

> ID：12785190
> 
> 赞同：21
> 
> 时间：2012-10-08T15:54:11.440
> 
> 标签：php, zend-framework2, zend-framework3, zend-framework-routing

我正在尝试使用路由创建带有查询字符串的 url，如下所示：

```
$this->url('users') -> /users
$this->url('users', ['sort' => 'desc']) -> /users?sort=desc 
```

但是，这似乎不起作用（第二个助手实际上输出`/users`）。根据这个[非官方的、过时的文档](https://unofficial-zf2.readthedocs.org/en/wrap/modules/zend.mvc.routing.html)，曾经有一种方法可以通过附加`/query`到路由名称来做到这一点，但是这会产生一个找不到路由的异常。

这可以使用当前的 url 助手来完成吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-03-14T23:50:52.630

从 2.1.4 版开始，您遇到用户错误

> 自 ZF 2.1.4 起不推荐使用查询路由；改用 HTTP 路由器组装方法的“查询”选项

使用示例：

```
$name    = 'index/article';
$params  = ['article_id' => $articleId];
$options = [
        'query' => ['param' => 'value'], 
    ];
$this->url($name, $params, $options); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-05-22T16:10:13.497

这可以使用当前的 URL 视图帮助器 yes 来完成。

```
$this->url('users', [], array('query' => array('sort' => 'desc'))) 
```

您不需要设置查询字符串子路由。只要您为“用户”设置了路由，您就可以在控制器中查找“排序”参数并在需要的地方使用。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-08T18:22:59.093

您可以像这样为您的用户路由创建子路由：

```
'users' => array(
    'type' => 'Literal',
    'options' => array(
        'route' => '/users',
        'defaults' => array(
            '__NAMESPACE__' => 'User\Controller',
            'controller' => 'Index',
            'action' => 'list',
        ),
    ),
    'may_terminate' => true,
    'child_routes'  => array(
        'query' => array(
            'type' => 'Query',
        ),
    ),
), 
```

然后你就可以组装了`$this->url('users/query', array('sort' => 'desc'))`。

不要忘记设置`may_terminate`为`true`！

# xaml - WinRT 中的强调色

> ID：12785206
> 
> 赞同：0
> 
> 时间：2012-10-08T15:54:53.903
> 
> 标签：xaml, c#-4.0, windows-runtime, winrt-xaml

是否可以在 WinRT 应用程序中获取用户的强调色？因为我想在我的应用程序中使用它来稍微个性化应用程序。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:08:34.460

不幸的是还没有，这有点奇怪，因为你可以在 WP7 中使用画笔和其他东西，但他们可能会在未来提供它。更多细节可在[此处](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/c13fa638-e4c3-446c-a317-66c2736d6a75)找到。此外，将来您可能会快速搜索类似这样的内容，以避免只用几句话就可以快速找到答案。祝你的应用好运！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-31T12:35:01.097

您可以使用

```
<Grid Background="{ThemeResource SystemControlBackgroundAccentBrush}" /> 
```

来源：[C# Detect Accent Color Changes WinRT XAML](https://stackoverflow.com/questions/32626470/c-sharp-detect-accent-colour-changes-winrt-xaml)

# url-rewriting - 使用带有许多单独 URL 的 nginx 重写

> ID：12785207
> 
> 赞同：1
> 
> 时间：2012-10-08T15:54:58.610
> 
> 标签：url-rewriting, nginx, rewrite

我需要在 nginx 上重写大量的 URL（大约 250 个）。

从：`http://xyzwiki.de/wiki/index.php?title=Article1`

至：`http://wiki.zyx.de/wiki/AlternativeNameForArcticle1`

显然，源确实使用经典 url 以及个别文章的其他名称，我有一个包含所有源和目的地的表。

我尝试使用基本的重定向示例，但是我没有让它工作。我认为原因可能是源 URL 使用 URL 参数 - 但我没有找到解决方案。

所以我需要一个映射，告诉 nginx 一堆源 URL 和它们各自的重写目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:49:49.497

就个人而言，我将使用[auto_prepend_file](http://www.php.net/manual/en/ini.core.php#ini.auto-prepend-file)工具在 php 中处理这个问题。

有了这个，如果保存在服务器上的某个地方并且 auto_prepend_file 设置为加载它，下面的代码块将为每个 php 调用运行。

```
if ($_SERVER['SCRIPT_NAME'] == '/index.php') {
    // only proceed if this is the root index.php file 
    $title = $_GET['title'];
    $urlMap = array (
            'article1' => 'alternative1',
            'article2' => 'alternative2',
            'article3' => 'alternative3',
            ...
            'article250' => 'alternative250'
    );

    if (array_key_exists($title, $urlMap)) {
        // redirect to alternative url
        header("HTTP/1.1 301 Moved Permanently");
        header("Location: http://wiki.zyx.de/wiki/" . $urlMap[$title]);
        exit;
    } else {
        // unset vars and continue otherwise
        unset($title);
        unset($urlMap); 
    }
} 
```

# java - jfreeChart 回归线实时日轴

> ID：12785208
> 
> 赞同：0
> 
> 时间：2012-10-08T15:55:00.407
> 
> 标签：java, date, graph, jfreechart

我试图在每半秒出现的一些数据上绘制一条回归线。我目前正在实时绘制数据没问题。线程正在读取数据，并且主线程正在处理刷新图形。数据是 y 轴上的值和 x 轴上的“Day”（jfreeChart 对象“Day”）。

如果数据点的数量大于 1，我已经在线程侦听器中设置它来计算系数，然后在这种情况下将 dataSet 添加到 mainPlot。所以这是在线程监听器中

```
if (++count > 1){
        double[] coefficients = Regression.getOLSRegression(TimeSeriesCollection, 0);
        mainPlot.setDataset(1, regressionData);
} 
```

这是在线程侦听器之外，在图的设置旁边。数据，通知来自 timeSeriesCollection。It 确实有点情节，但将所有数据都保留在 1970 年，这意味着其余数据（发生在 2012 年）集中在右侧。

```
Function2D curve = new LineFunction2D(coefficients[0], coefficients[1]);
XYDataset regressionData = DatasetUtilities.sampleFunction2D(curve,
        2.0, 11.0, 100, "Fitted Regression Line");
XYLineAndShapeRenderer renderer2 = new XYLineAndShapeRenderer(true, 
        false);
renderer2.setSeriesPaint(0, Color.blue);
mainPlot.setRenderer(1, renderer2); 
```

问题是如何让它理解 TimeSeries x 轴数据是“Day”对象并将其绘制在图表上的正确位置。有没有人设法做到这一点？当我“直接绘制数据”时，即不尝试对其进行回归，它只是绘制精美的折线图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T22:40:36.657

我将 TimeSeries Chart 用于数据和回归线。所以这两个图表都是由`ChartFactory.createTimeSeriesChart(...)`

# ios - iOS opencv洪水填充错误

> ID：12785221
> 
> 赞同：2
> 
> 时间：2012-10-08T15:55:49.440
> 
> 标签：ios, opencv, uiimage, objective-c++, flood-fill

我正在尝试将我的 C++ opencv 应用程序移植到 iO，但我总是收到此错误：

```
OpenCV Error: Unsupported format or combination of formats () in cvFloodFill, file /Users/user/slave/ios_framework/src/opencv/modules/imgproc/src/floodfill.cpp, line 618
libc++abi.dylib: terminate called throwing an exception 
```

这是我的代码：

```
- (cv::MatND)calc_Hist
{

    using namespace cv;
    UIImage *temp = [UIImage imageNamed:@"file.png"];
    Mat src = [self cvMatFromUIImage:temp];
    Mat hsv;
    Mat mask;
    MatND hist;
    int lo = 151; int up = 170;
    cv::Point seed = cv::Point( 1029, 270 );
    int newMaskVal = 255;
    Scalar newVal = Scalar( 120, 120, 120 );
    int connectivity = 8;

    int h_bins = 30; int s_bins = 32;
    int histSize[] = { h_bins, s_bins };
    float h_range[] = { 0, 179 };
    float s_range[] = { 0, 255 };
    const float* ranges[] = { h_range, s_range };
    int channels[] = { 0, 1 };

    cvtColor(src, hsv, CV_BGR2HSV);
    int flags = connectivity + (newMaskVal << 8 ) + cv::FLOODFILL_FIXED_RANGE + cv::FLOODFILL_MASK_ONLY;
    cv::Mat mask2 = cv::Mat::zeros( src.rows + 2, src.cols + 2, CV_8UC1 );

    UIImage *imgs = [self UIImageFromCVMat:hsv];
    [_viewer setImage:imgs];

    floodFill( src, mask2, seed, newVal, 0, cv::Scalar( lo, lo, lo ), cv::Scalar( up, up, up), flags );

    mask = mask2( cv::Range( 1, mask2.rows - 1 ), cv::Range( 1, mask2.cols - 1 ) );
    calcHist( &hsv, 1, channels, mask, hist, 2, histSize, ranges, true, false );
    normalize( hist, hist, 0, 255, cv::NORM_MINMAX, -1, cv::Mat() );
    return hist;

} 
```

这个功能在我的 Mac 上运行良好，所以我首先认为图像没有正确转换，但是如果我在 UIImageView 中显示它，它会显示图像。

这是转换方法

```
- (cv::Mat)cvMatFromUIImage:(UIImage *)image
{
    CGColorSpaceRef colorSpace = CGImageGetColorSpace(image.CGImage);
    CGFloat cols = image.size.width;
    CGFloat rows = image.size.height;

    cv::Mat cvMat(rows, cols, CV_8UC4); // 8 bits per component, 4 channels

    CGContextRef contextRef = CGBitmapContextCreate(cvMat.data,                 // Pointer to  data
                                                    cols,                       // Width of bitmap
                                                    rows,                       // Height of bitmap
                                                    8,                          // Bits per component
                                                    cvMat.step[0],              // Bytes per row
                                                    colorSpace,                 // Colorspace
                                                    kCGImageAlphaNoneSkipLast |
                                                    kCGBitmapByteOrderDefault); // Bitmap info flags

    CGContextDrawImage(contextRef, CGRectMake(0, 0, cols, rows), image.CGImage);
    CGContextRelease(contextRef);
    CGColorSpaceRelease(colorSpace);

    return cvMat;
} 
```

与“正常”框架相比，iOS 框架是否以任何方式减少？我用谷歌搜索但我没有找到任何可以解决我的问题的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-09T13:18:52.440

我在Android上遇到了完全相同的问题。就我而言，“问题”是我只是将 BGRA 与 BGR 混为一谈。在我的例子中，floodfill 的输入/输出矩阵应该有 3 个通道，但我不小心给出了一个有 4 个通道的矩阵（BGRA）。我想同样的问题也发生在你身上。

它发生在我身上，因为我从 Android OpenCV SDK 的教程代码“混合处理 2”开始。有一个误导性的名称（第 4 个频道就消失了）：

```
Mat& mRgb = *(Mat*)addrRgba; 
```

我必须将 4 通道矩阵转换为 3 通道矩阵，然后 Floodfill 工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:59:11.660

当函数遇到该函数无法处理的矩阵类型时会发生错误。使用 src.type() 检查 floodFill 的输入矩阵类型。根据 OpenCV 手册

> 图像——输入/输出 1 或 3 通道、8 位或浮点图像。它由函数修改，除非设置了 FLOODFILL_MASK_ONLY 标志（在函数的第二个变体中；见下文）

# java - ORM - 混合休眠与内存数据

> ID：12785222
> 
> 赞同：1
> 
> 时间：2012-10-08T15:56:07.947
> 
> 标签：java, hibernate, orm

我有两个 java 类，A 和 B，其中 A 持有对 B 的引用：

```
public class A {
   private long id;
   private B b;
   ...
}

public class B {
   private long id;
   ...
} 
```

在我的数据库中，仅存储 A 的实例以及引用的 B 的 ID：

```
$ select * from tableA;
id  | bid | ...
---------------
1   | 42  |
2   | 42  |
3   | 43  |
... 
```

但是，B*并不*存储在数据库中，而是可以通过服务层 ServiceB 的一些实现来访问：

```
public interface ServiceB {
   public B getB(long bid);
} 
```

如何使用 Hibernate 对其进行建模？我最好使用基于 XML 的 HBM 配置。我还想避免在 A 持有出价中添加一个临时字段（如果可能的话）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:01:55.670

引入 a`Repository`并基于 A & B 构建一个新的 Object。`Repository`使用 Hibernate`A`检索和使用 Service 检索`B`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:56:49.930

我在此处发布找到的解决方案以供参考。

您必须创建一个自定义休眠`UserType`模式，用于类中`bid`字段的映射`A`。实施`UserType`已经在互联网上得到很好的解释，这里不是重点。可以说是`nullSafeGet()`通过从服务层加载对应的B，将数据库id转换为B实例的操作；反过来，`nullSafeSet()`将 B 实例转换为其内部 id 以存储到数据库中。

根据所使用的注入框架（Guice、Spring、自定义解决方案...），可以通过多种方式将此自定义用户类型链接到服务层，但应该不是问题。

您需要`UserType`为每个引用的类自定义`B`。在从公共基类派生的多个引用类的情况下，使用泛型可能很有用，它留给读者作为练习。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T19:39:52.547

您需要开发一个新的 org.hibernate.persister.entity.EntityPersister。这基本上就是 Hibernate OGM（使用 NoSQL 支持的 Hibernate+JPA）所做的，如果您需要有关如何完成它的参考。您将继续为关系实体使用标准持久化器，并为非关系实体使用您的自定义持久化器。

# jquery - 数据表显示不正确

> ID：12785234
> 
> 赞同：0
> 
> 时间：2012-10-08T15:57:33.773
> 
> 标签：jquery, jquery-datatables

我正在使用此代码来显示表格。

```
tablacambios = $('#tablacambios').dataTable( {
                    "bJQueryUI": true,  
                    "sScrollY": "150px",
                    "bPaginate": false
                } ) 
```

但是当表有很少的记录时不能正确显示。页脚如下所示。

[我在这里](http://www.subirimagenes.com/imagen-datatable-8043680.html)放了一个截图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:01:33.423

尝试将此添加到您的选项中：

```
"bScrollCollapse": true, 
```

# python - 嵌套字典

> ID：12785235
> 
> 赞同：7
> 
> 时间：2012-10-08T15:57:35.427
> 
> 标签：python, dictionary

我正在研究一些类似 FASTA 的序列（不是 FASTA，但我已经定义了一些与 PISCES 服务器中一些剔除的 PDB 类似的东西）。

我有个问题。我有少量称为 的序列`nCatSeq`，其中有 MULTIPLE `nBasinSeq`。我浏览了一个大的 PDB 文件，我想在字典中提取每个`nCatSeq`对应的`nBasinSeq`没有冗余的文件。下面给出了执行此操作的代码片段。

```
nCatSeq=item[1][n]+item[1][n+1]+item[1][n+2]+item[1][n+3]
nBasinSeq=item[2][n]+item[2][n+1]+item[2][n+2]+item[2][n+3]
if nCatSeq not in potBasin:
    potBasin[nCatSeq]=nBasinSeq
else:   
    if nBasinSeq not in potBasin[nCatSeq]:
        potBasin[nCatSeq]=potBasin[nCatSeq],nBasinSeq
    else:
        pass 
```

我得到以下作为一个 nCatSeq 的答案，

```
'4241': ((('VUVV', 'DDRV'), 'DDVG'), 'VUVV') 
```

然而，我想要的是：

> “4241”：（“VUVV”、“DDRV”、“DDVG”、“VUVV”）

由于以下命令，我不想要所有额外的括号

```
potBasin[nCatSeq]=potBasin[nCatSeq],nBasinSeq 
```

（见上面的代码片段）

有没有办法做到这一点 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T16:07:06.103

问题是用逗号“附加”一个元素，每次都会创建一个新的元组。为了解决这个问题，您使用列表和`append`：

```
nCatSeq=item[1][n]+item[1][n+1]+item[1][n+2]+item[1][n+3]
nBasinSeq=item[2][n]+item[2][n+1]+item[2][n+2]+item[2][n+3]
if nCatSeq not in potBasin:
    potBasin[nCatSeq]=[nBasinSeq]
elif nBasinSeq not in potBasin[nCatSeq]:
        potBasin[nCatSeq].append(nBasinSeq) 
```

* * *

更好的是，不要将 potBasin 制作成普通字典，而是将其替换为`defaultdict`. 然后代码可以简化为：

```
# init stuff
from collections import defaultdict
potBasin = defaultdict(list)

# inside loop
nCatSeq=item[1][n]+item[1][n+1]+item[1][n+2]+item[1][n+3]
nBasinSeq=item[2][n]+item[2][n+1]+item[2][n+2]+item[2][n+3]
potBasin[nCatSeq].append(nBasinSeq) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:08:59.793

您可以将它们添加为元组：

```
if nCatSeq not in potBasin:
    potBasin[nCatSeq] = (nBasinSeq,)
else:
    if nBasinSeq not in potBasin[nCatSeq]:
        potBasin[nCatSeq] = potBasin[nCatSeq] + (nBasinSeq,) 
```

这样，而不是：

```
(('VUVV', 'DDRV'), 'DDVG')
# you will get
('VUVV', 'DDRV', 'DDVG') # == ('VUVV', 'DDRV')+ ('DDVG',) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T16:09:53.303

您的问题归结为展平嵌套列表并消除冗余条目：

```
def flatten(nested, answer=None):
    if answer is None:
        answer = []
    if nested == []:
        return answer
    else:
        n = nested[0]
        if is instance(n, tuple):
            return flatten(nested[1:], nested(n[0], answer))
        else:
            return flatten(nested[1:], answer+n[0]) 
```

因此，使用您的嵌套字典：

```
for k in nested_dict:
    nested_dict[k] = tuple(flatten(nested_dict[k])) 
```

如果要消除重复条目：

```
for k in nested_dict:
    nested_dict[k] = tuple(set(flatten(nested_dict[k]))) 
```

希望这可以帮助

# java - BufferedReader skipping each second line

> ID：12785236
> 
> 赞同：0
> 
> 时间：2012-10-08T15:57:45.030
> 
> 标签：java, csv, bufferedreader

Reading from a CSV and it skips every second line. I have two CSV files, one for users, one for properties - the key ID is user.

```
 String userName;
    static String breakLine = "\n--------------------\n";
        /**
        * Method to create a new user in a CSV File
        * @param sFileName
        * @param user
        */
   static void writeToCsvFile(String sFileName, User user)
   {
    try
    {
        FileWriter writer = new FileWriter(sFileName, true);

        writer.append(user.displayUserName()); // get username from userinput
        writer.append(","); // tabs to next record

        writer.append(user.getPassword()); //gets password from userinput
        writer.append(","); //tabs to next record
        writer.append("\n");

        writer.flush();
        writer.close();
        System.out.print("\nUser Successfully Created\n");
    }
    catch(IOException e)
    {
         e.printStackTrace();
    } 

   }

   /**
    * Class to read User information from specified CSV file
    * @param sFileName
    * @param user
    * @throws FileNotFoundException
    */
   static boolean readFromCsvFile(String sFileName, User user) throws FileNotFoundException
   {
       String thisLine;
       BufferedReader reader = new BufferedReader(new FileReader(sFileName));

        try
        {

        //  thisLine = reader.readLine();
          //System.out.print(thisLine);

           while((thisLine = reader.readLine()) != null)
                {
                    String userDetails[] = thisLine.split(",");

                    if ((user.displayUserName().equals(userDetails[0])))
                    {
                        System.out.print("\nUser <-" + user.displayUserName() + " -> exists! Logging In\n\n");
                        return true;
                    }

                    else if ((thisLine = reader.readLine()) == null)
                    {
                        System.out.print("\nNo User Details Matching Those Entered Exist. Please Register or Recheck Details.");
                        return false;
                    }
               }

        }
        catch(IOException e)
        {
            System.out.print("\nUser does not exist\n"); 
            e.printStackTrace();
            return false;
        } 

        finally{
            try
            {   reader.close();
            }catch (IOException e){}}
        return false;
            }

   static void writeToPropertyFile(String sFileName, Property property)
   {

    try
    {
        FileWriter writer = new FileWriter(sFileName, true);

        writer.append(property.getUser()); // get username from userinput
        writer.append(","); // tabs to next record

        writer.append(property.getAddress()); //gets address from userinput
        writer.append(","); //tabs to next record

        writer.append(property.getValue()); //gets property value from userinput
        writer.append(","); //tabs to next record

        writer.append(property.getLocation()); //gets property type from userinput
        writer.append(","); //tabs to next record

        writer.append(property.getResidenceStatus()); //gets residence status from userinput
        writer.append(","); //tabs to next record

        writer.append(property.getPaymentStatus()); //gets payment status from userinput
        writer.append(","); //tabs to next record

        writer.append(property.totalTax(property.privateResidence));
        writer.append(",");

        writer.append("\n");

        writer.flush();
        writer.close();
        System.out.print("\nProperty Successfully Saved to " + property.getUser() + "\n");
    }
    catch(IOException e)
    {
         e.printStackTrace();
    } 

   }

/**
 * Method to read and print all properties belonging to a user
 * @param sFileName
 * @param property
 * @param userName
 * @throws FileNotFoundException
 */
static void readFromPropertyFile(String sFileName, String userName) throws FileNotFoundException
{

       String thisLine;
       BufferedReader reader = new BufferedReader(new FileReader(sFileName));

        try
        {
            //thisLine = reader.readLine(); //skips first line in CSV

           while((thisLine = reader.readLine()) != null)
                {

                    String propertyDetails[] = thisLine.split(",");

                    if (propertyDetails[0].equals(userName))
                    {
                    System.out.print("\nUser: " + propertyDetails[0] + "\nAddress: " + propertyDetails[1] + "\nEst. Value: " + propertyDetails[2]
                            + "\nLocation Cat: " + propertyDetails[3] + "\nPrivate Residence: " + propertyDetails[4] + "\nTax Paid: " + propertyDetails[5] +  "\nTax Due: " + propertyDetails[6] + breakLine);

                    }

                    else if ((thisLine = reader.readLine()) == null)
                        System.out.print("\nNo Further Properties Found For This User\n");

               }

        }
        catch(IOException e)
        {
            System.out.print("\nProperties do not exist\n"); 
            e.printStackTrace();
        } 

        finally{
            try
            {   reader.close();
            }catch (IOException e){}}
            }

} 
```

I was running it with the following users

```
Chris,password
Michelle,password
Zach,password
etc (on seperate lines, seperated by appending \n at the end of the input stage) 
```

Every odd numbered one was working and detecting that the user was logged in, each second one is skipping. I read up and I don't think I have a .nextLine() running skipping as in this link but I only starting using CSVs and BufferedReader on Friday!

[BufferedReader readLine skipping every second line](https://stackoverflow.com/questions/7200462/bufferedreader-readline-skipping-every-second-line)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T15:59:25.567

Its skipping every second line because you are reading two lines in every iteration and only using the odd ones.

I suggest instead using

```
while ((thisLine = reader.readLine()) != null) { // only read once per loop.
    String propertyDetails[] = thisLine.split(",");
    if (propertyDetails[0].equals(userName)) {
        System.out.print("\nUser: " + propertyDetails[0] + "\nAddress: " + propertyDetails[1] + "\nEst. Value: " + propertyDetails[2]
                + "\nLocation Cat: " + propertyDetails[3] + "\nPrivate Residence: " + propertyDetails[4] + "\nTax Paid: " + propertyDetails[5] + "\nTax Due: " + propertyDetails[6] + breakLine);

    }
}
// out side the loop.
System.out.print("\nNo Further Properties Found For This User\n"); 
```

# javascript - Setting true/false to if/or statement not working

> ID：12785237
> 
> 赞同：0
> 
> 时间：2012-10-08T15:57:50.763
> 
> 标签：javascript, if-statement

Hey all i have the following js code to validate a textbox:

```
function submitContactUs() {
   var canSubmit = true;

   if (($('#cf_name_txt').val() == "") || ($('#cf_name_txt').val().substr(0, 1) == "*") || ($('#cf_name_txt').length == 1)) {
    if (!$('#cf_name_txt').next('img').length) { //image not there yet
        $('#cf_name_txt').after(theErrorIcon + " id=\"errIcon_cfname\" />");
        $('#errIcon_cfname').vibrate(conf);
        canSubmit = false;
        console.log('false name');
    }
   } else {
    $('#errIcon_cfname').remove();
        console.log('true name');
   }

   if (canSubmit) {
        alert(canSubmit);
        //$("#sendDataContactus").click();
   } 
```

When i first click the button to fire off that function i get the correct **false** but once i hit the button again (without changing anything) it for some reason comes back as being **true**??? Does anyone see anything wrong with the js to cause it to do that?

The values i get from the **first button press is**:

```
false name 
```

The value i get from the **second button press is**:

```
messagebox saying true 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T16:00:43.197

当您第二次单击时，您已经有了`img`标签，因此您的变量不会重置`canSubmit = false;`

将变量分配移到创建错误代码块之外，如下所示：

```
 if (($('#cf_name_txt').val() == "") || ($('#cf_name_txt').val().substr(0, 1) == "*") || ($('#cf_name_txt').length == 1)) {

    canSubmit = false;
    ... 
```

# java - Java Thread Ping Pong example

> ID：12785238
> 
> 赞同：3
> 
> 时间：2012-10-08T15:57:53.617
> 
> 标签：java, multithreading, concurrency

I'm trying to understand thread basics, and as a first example I create two thread that write a String on the stdout. As I know the scheduler allows to execute the threads using a round robin schedule. Thats why I got:

> PING PING pong pong pong PING PING PING pong pong

Now I want to use a shared variable, so every thread will know if its your turn:

```
public class PingPongThread extends Thread {
private String msg;
private static String turn;

public PingPongThread(String msg){
    this.msg = msg;
}
@Override
public void run() {
    while(true) {
        playTurn();
    }

}
public synchronized void playTurn(){
    if (!msg.equals(turn)){
        turn=msg;
        System.out.println(msg);
    }
}
} 
```

Main class:

```
public class ThreadTest {
    public static void main(String[] args) {
        PingPongThread thread1 = new PingPongThread("PING");
        PingPongThread thread2 = new PingPongThread("pong");
        thread1.start();
        thread2.start();
    }
} 
```

I synchronized the "turn manager" but I still get something like:

> PING PING pong pong pong PING PING PING pong pong

**Can someone explains what I am missing, and Why I'm not getting Ping pong... ping pong**. Thanks!

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-08T18:07:16.850

在与 Brian Agnew 的讨论结束时，我提交了这段代码，用于`java.util.concurrent.Phaser`协调你的乒乓球线程：

```
static final Phaser p = new Phaser(1);
public static void main(String[] args) {
  t("ping");
  t("pong");
}
private static void t(final String msg) {
  new Thread() { public void run() {
    while (true) {
      System.out.println(msg);
      p.awaitAdvance(p.arrive()+1);
    }
  }}.start();
} 
```

此解决方案与您尝试编写的解决方案之间的主要区别在于您的解决方案忙于检查标志，从而浪费 CPU 时间（和能源！）。正确的方法是使用阻塞方法使线程进入睡眠状态，直到它收到相关事件的通知。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-08T17:51:09.870

这一行：

```
public synchronized void playTurn(){
    //code
} 
```

在行为上等同于

```
public void playTurn() {
    synchronized(this) {
         //code
    }
} 
```

这就是为什么没有发生同步的原因，因为正如 Brian Agnew 指出的那样，线程正在两个不同的对象（thread1、thread2）上同步，每个对象都在它自己的实例上导致没有有效的同步。

如果您将使用轮变量进行同步，例如：

```
private static String turn = ""; // must initialize or you ll get an NPE

public void playTurn() {
    synchronized(turn) {
         //...
         turn = msg; // (1)
         //...
    }
} 
```

那么情况会好很多（运行多次验证），但也没有 100% 同步。在开始时（大多数情况下）你会得到双乒乓球和双乒乓球，之后它们看起来是同步的，但你仍然可以获得双乒乓球/乒乓球。

同步块锁定*值*（参见这个[很好的答案](https://stackoverflow.com/questions/3984987/locking-on-strings)）而不是对该*值的引用*。（见编辑）

因此，让我们看一下一种可能的情况：

```
thread1 locks on ""
thread2 blocks on ""
thread1 changes the value of turn variable to "PING" - thread2 can continue since "" is no longer locked 
```

为了验证我是否尝试过

```
try {
    Thread.currentThread().sleep(1000); // try with 10, 100 also multiple times
 } 
 catch (InterruptedException ex) {} 
```

之前和之后

```
turn = msg; 
```

它看起来是同步的？！但是，如果你把

```
 try {
    Thread.yield();
    Thread.currentThread().sleep(1000); //  also  try multiple times
 } 
 catch (InterruptedException ex) {} 
```

几秒钟后，您会看到双乒乓球/乒乓球。[Thread.yield()](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#yield())本质上意味着“我已经完成了处理器，让其他线程工作”。这显然是我的操作系统上的系统线程调度程序实现。

因此，要正确同步，我们必须删除行

```
 turn = msg; 
```

这样线程可以始终在相同的值上同步 - 不是真的:) 正如上面给出的[好答案](https://stackoverflow.com/questions/3984987/locking-on-strings)中所解释的- 字符串（不可变对象）作为锁是危险的 - 因为如果你在程序中的 100 个位置创建字符串“A”，所有 100 references(variables) 将指向内存中相同的“A”-因此您可能会*过度同步*。

所以，要回答你原来的问题，修改你的代码是这样的：

```
 public void playTurn() {
    synchronized(PingPongThread.class) {
         //code
    }
} 
```

并且并行 PingPong 示例将 100% 正确实施（参见 EDIT^2）。

上面的代码等价于：

```
 public static synchronized void playTurn() {
     //code
 } 
```

PingPongThread.class 是一个[Class 对象](http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html)，例如，在每个实例上，您都可以调用[getClass()](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#getClass())，它总是只有一个实例。

你也可以这样做

```
 public static Object lock = new Object();

 public void playTurn() {
    synchronized(lock) {
         //code
    }
} 
```

此外，阅读和编​​程示例（必要时多次运行）本[教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/)。

编辑：

要在[技术上正确](http://docs.oracle.com/javase/specs/jls/se5.0/html/memory.html#56318)：

同步方法与在此上锁定的同步语句相同。让我们将同步语句的参数称为“lock”——正如 Marko 所指出的，“lock”是一个变量，用于存储对类的对象/实例的引用。引用规范：

> 同步语句计算对对象的引用；然后它尝试在该对象的监视器上执行锁定操作。

因此，同步并不是基于*值*——对象/类实例，而是基于与该实例/值*关联的对象监视器。*因为

> Java 中的每个对象都与一个监视器相关联。

效果保持不变。

编辑^2：

跟进评论评论：“并行 PingPong 示例将 100% 正确实现” - 意思是，实现了所需的行为（没有错误）。

恕我直言，如果结果正确，则解决方案是正确的。有很多解决问题的方法，所以下一个标准是解决方案的简单/优雅 - 移相器解决方案是更好的方法，因为正如马尔科在一些评论中所说的那样，使用移相器出错的可能性要小得多对象而不是使用同步机制 - 这可以从这篇文章中的所有（非）解决方案变体中看出。值得注意的是代码大小和整体清晰度的比较。

总而言之，只要这种[结构](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)适用于所讨论的问题，就应该使用它们。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-08T16:04:22.407

的每个实例都在其自身而*不是*共享资源上`PingPongThread`同步。为了控制消息传递，您需要在共享资源上同步（例如您的变量？）*`turn`*

 *但是我不认为这真的会奏效。我认为您应该检查`wait()`并`notify()`执行此操作（如果您想了解线程原语）。请参阅[此](http://www.crazysquirrel.com/computing/java/concurrency/ping-pong.jspx)示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-21T08:17:22.417

我的解决方案是这样的：

```
public class InfinitePingPong extends Thread  {

    private static final Object lock= new Object();

private String toPrintOut;

    public InfinitePingPong(String s){
        this.toPrintOut = s;
    }

    public void run(){
        while (true){
            synchronized(lock){
                System.out.println(this.toPrintOut +" -->"+this.getId()); 
                lock.notifyAll();

                try {
                    lock.wait();
                } catch (InterruptedException e) {}
            }
        }
    }

    public static void main(String[] args) throws InterruptedException {

        InfinitePingPong a = new InfinitePingPong("ping");
        InfinitePingPong b = new InfinitePingPong("pong");

        a.start();
        b.start();

        b.wait();

        try {
            a.join();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-15T14:32:39.990

这是一个用 Java 编写的乒乓球程序。Ping 和 Pong 是独立的线程。每个线程既是消费者又是生产者。当每个线程运行时，它会做两件事

1.  产生允许对方（作为消费者）运行的消息
2.  使用导致自身挂起的消息。

该代码基于 Oracles ProducerConsumerExample。请注意，Ping 和 Pong 类的代码和行为几乎相同。OP 代码中的线程仅使用对象监视器的“互斥”部分（正如上面 Brian Agnew 所建议的那样）。他们从不调用等待。因此它们只相互排斥，但从不调用 java 运行时来允许另一个线程运行。

```
/*
 * Copyright (c) 1995, 2008, Oracle and/or its affiliates. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *
 *   - Redistributions of source code must retain the above copyright
 *     notice, this list of conditions and the following disclaimer.
 *
 *   - Redistributions in binary form must reproduce the above copyright
 *     notice, this list of conditions and the following disclaimer in the
 *     documentation and/or other materials provided with the distribution.
 *
 *   - Neither the name of Oracle or the names of its
 *     contributors may be used to endorse or promote products derived
 *     from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
 * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

 * based on oracle example on sync-wait-notify
 * cf. https://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html
 * run with java ProducerConsumerExample
 * 
 *
 */ 

public class ProducerConsumerExample {
    public static void main(String[] args) {
        Drop drop = new Drop();
    DropCtoP dropCtoP = new DropCtoP();
    (new Thread(new Ping(drop,dropCtoP))).start();
        (new Thread(new Pong(drop,dropCtoP))).start();
    }
}

public class Pong implements Runnable {
    private Drop drop;
    private DropCtoP dropCtoP;
    private int count=0;

    public Pong(Drop drop,DropCtoP dropCtoP) {
        this.drop = drop;
        this.dropCtoP = dropCtoP;
    }

    public void run() {
        String message;
        for (;;) {
        count++;
            message = drop.take();
            System.out.format("Pong running - : %s - ran num times %d %n", message,count);
            dropCtoP.put("Run ping token");
        }
    }
}

public class Ping implements Runnable {
    private Drop drop;
    private DropCtoP dropCtoP;
    private int count=0;

    public Ping(Drop drop,DropCtoP dropCtoP) {
        this.drop = drop;
        this.dropCtoP = dropCtoP;
    }

    public void run() {

        String message;
        for (;;) {
      count++;
      drop.put("Run pong token");
      message = dropCtoP.take();
      System.out.format("PING running - : %s- ran num times %d %n", message,count);
        }

    }
}

public class DropCtoP {
    // Message sent from producer
    // to consumer.
    private String message;
    // True if consumer should wait
    // for producer to send message,
    // false if producer should wait for
    // consumer to retrieve message.
    private boolean empty2 = true;

    public synchronized String take() {
        // Wait until message is
        // available.
        while (empty2) {
            try {
                wait();
            } catch (InterruptedException e) {}
        }
        // Toggle status.
        empty2 = true;
        // Notify producer that
        // status has changed.
        notifyAll();
        return message;
    }

    public synchronized void put(String message) {
        // Wait until message has
        // been retrieved.
        while (!empty2) {
            try { 
                wait();
            } catch (InterruptedException e) {}
        }
        // Toggle status.
        empty2 = false;
        // Store message.
        this.message = message;
        // Notify consumer that status
        // has changed.
        notifyAll();
    }    
}

public class Drop {
    // Message sent from producer
    // to consumer.
    private String message;
    // True if consumer should wait
    // for producer to send message,
    // false if producer should wait for
    // consumer to retrieve message.
    private boolean empty = true;

    public synchronized String take() {
        // Wait until message is
        // available.
        while (empty) {
            try {
                wait();
            } catch (InterruptedException e) {}
        }
        // Toggle status.
        empty = true;
        // Notify producer that
        // status has changed.
        notifyAll();
        return message;
    }

    public synchronized void put(String message) {
        // Wait until message has
        // been retrieved.
        while (!empty) {
            try { 
                wait();
            } catch (InterruptedException e) {}
        }
        // Toggle status.
        empty = false;
        // Store message.
        this.message = message;
        // Notify consumer that status
        // has changed.
        notifyAll();
    }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-04T15:24:01.970

一种选择是使用 SynchronousQueue 。

```
import java.util.concurrent.SynchronousQueue;

public class PingPongPattern {

    private SynchronousQueue<Integer> q = new SynchronousQueue<Integer>();
    private Thread t1 = new Thread() {

        @Override
        public void run() {
            while (true) {

                // TODO Auto-generated method stub
                super.run();
                try {

                    System.out.println("Ping");
                    q.put(1);
                    q.put(2);
                } catch (Exception e) {

                }
            }
        }

    };

    private Thread t2 = new Thread() {

        @Override
        public void run() {

            while (true) {
                // TODO Auto-generated method stub
                super.run();
                try {
                    q.take();
                    System.out.println("Pong");
                    q.take();

                } catch (Exception e) {

                }

            }

        }

    };

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        PingPongPattern p = new PingPongPattern();
        p.t1.start();
        p.t2.start();
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-18T10:14:57.740

可能的实现之一：

```
public class PingPongDemo {

    private static final int THREADS = 2;

    private static int nextIndex = 0;

    private static String getMessage(int index) {
        return index % 2 == 0 ? "ping" : "pong";
    }

    public static void main(String[] args) throws Throwable {
        var lock = new ReentrantLock();

        var conditions = new Condition[THREADS];
        for (int i = 0; i < conditions.length; i++) {
            conditions[i] = lock.newCondition();
        }

        for (int i = 0; i < THREADS; i++) {
            var index = i;

            new Thread(() -> {
                lock.lock();
                try {
                    while (true) {
                        System.out.println(getMessage(index));
                        try {
                            Thread.sleep(1000);
                        } catch (InterruptedException e) {
                            throw new RuntimeException(e);
                        }

                        nextIndex = (nextIndex + 1) % THREADS;

                        conditions[nextIndex].signal();

                        while (nextIndex != index) {
                            conditions[index].awaitUninterruptibly();
                        }
                    }
                } finally {
                    lock.unlock();
                }
            }).start();

            if (index < THREADS - 1) {
                lock.lock();
                try {
                    while (nextIndex != (index + 1)) {
                        conditions[index + 1].awaitUninterruptibly();
                    }
                } finally {
                    lock.unlock();
                }
            }
        }
    }

} 
```

在这里，我们有效地进行循环输出。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-15T13:28:57.910

这是一个使用`Semaphore`对象来完成同步的版本：

```
import java.util.concurrent.*;

public class Main {
    @FunctionalInterface
    public interface QuadFunction<T, U, V, W, R> {
        public R apply(T t, U u, V v, W w);
    }

    public static void main(String[] args) {
        ExecutorService svc = Executors.newFixedThreadPool(2);

        Runtime.getRuntime().addShutdownHook(new Thread(() -> {
            System.out.println("Terminating...");
            svc.shutdownNow();
            try { svc.awaitTermination(Long.MAX_VALUE, TimeUnit.NANOSECONDS); }
            catch(InterruptedException e) {};
        }));

        var sem1 = new Semaphore(1);
        var sem2 = new Semaphore(0);

        QuadFunction<String, String, Semaphore, Semaphore, Runnable> fun =
            (name, action, s1, s2) ->
                (Runnable) () -> {
                    try {
                        while (true) {
                            s1.acquire();
                            System.out.format("%s %s\n", name, action);
                            Thread.sleep(500);
                            s2.release(1);
                        }
                    } catch (InterruptedException e) {}
                    s2.release(1);
                    System.out.format("==> %s shutdown\n", name);
                };

        svc.execute(fun.apply("T1", "ping", sem1, sem2));
        svc.execute(fun.apply("T2", "pong", sem2, sem1));
    }
} 
```*

# jquery - Difference between handling $("form").submit or an click event?

> ID：12785241
> 
> 赞同：13
> 
> 时间：2012-10-08T15:58:05.877
> 
> 标签：jquery, forms, submit

Say I have the following HTML:

```
<form>
    ...some form fields...
    <input type="submit" id="submitButton" value="Submit" />
</form> 
```

And I have a javascript method `validate` that checks the form fields for various invalid scenarios, returning `true` if all is well or `false` if there's something wrong.

Is there any real difference in jQuery between doing this:

```
$("form").submit(function() {
    return validate();
}); 
```

...or doing this:

```
$("#submitButton").click(function(){
    return validate();
}); 
```

And are there any advantages/disadvantages between the two?

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-08T16:02:11.747

仅当用户实际单击提交按钮时才会调用单击回调。但是在某些情况下，您会通过 javascript 自动提交表单，在这种情况下，在提交回调时不会触发点击回调。我建议始终将提交用于表单的验证和内在操作，同时将单击回调用于动画或与单击按钮的操作相关的其他内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T16:02:20.987

点击事件更早触发，提交事件在点击事件之后触发。

提交：

*   如果某些数据错误（小型和旧浏览器），可能为时已晚无法阻止事件
*   在提交命令上也触发

点击：

*   压倒性的事件，几乎所有东西都与点击绑定。表现？
*   不会在提交命令上触发

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T16:02:08.427

第一种方法的优点是，如果您的表单是通过多个按钮提交或完成不同的操作，那么仅将验证放在提交按钮上意味着如果通过其他方法提交，表单可能处于无效状态。

最好的方法是对表单提交进行验证，因为这样，无论表单如何提交（通过按钮单击，以编程方式从其他地方），验证仍然会被触发。

# spring - Spring drop down not rendering options

> ID：12785242
> 
> 赞同：0
> 
> 时间：2012-10-08T15:58:08.700
> 
> 标签：spring, spring-mvc

In a simple Spring 3 MVC app I have a few drop downs that don't show any options.

The jsp form snippet is:

```
<form:form method="POST" commandName="carSelection">
        <form:errors path="*" cssClass="errorblock" element="div" />
        <table>
            <tr>
                <td>Car Make :</td>
                <td><form:select path="makes" multiple="false">
                      <form:options items="${makes}"/>
                    </form:select>
                                </td>
                <td><form:errors path="makes" cssClass="error" /></td>
            </tr>

            <tr>
                <td>Car Make (SimpleList):</td>
                <td><form:select path="simpleModels" multiple="false">
                      <form:options items="${simpleModels}"/>
                    </form:select>
                                </td>
                <td><form:errors path="makes" cssClass="error" /></td>
            </tr>
            <tr>
                <td>Car Model :</td>
                <td>
                    <form:select path="models" items="${models}" multiple="false">
                        <form:option value="NONE" label="--- Select ---" />
                        <form:options items="${models}" itemValue="modelId" itemLabel="modelName"/>
                    </form:select>
                </td>
                <td><form:errors path="models" cssClass="error" /></td>
            </tr>

        </table>
    </form:form> 
```

And the Controller class I have the following:

```
@Controller
@RequestMapping("/car")
public class CarController {

    /**
     * Initialise the car selection form
     * @param model
     * @return
     * @throws Exception
     */
    @RequestMapping(value = "/carSelectionForm")
    public ModelAndView loginForm() throws Exception {
        ModelAndView mav = new ModelAndView();
        CarSelection cs = new CarSelection();
        List<CarMake> makes = new ArrayList<CarMake>(5);
        makes.add(new CarMake(1, "Ford"));
        makes.add(new CarMake(2, "Fiat"));
        makes.add(new CarMake(3, "Renualt"));
        makes.add(new CarMake(4, "Kia"));
        makes.add(new CarMake(5, "Ferrari"));
        cs.setMakes(makes);

        List<String> simpleList = new ArrayList<String>(5);
        simpleList.add("Ford");
        simpleList.add("Fiat");
        simpleList.add("Renualt");
        simpleList.add("Kia");
        simpleList.add("Ferrari");
        cs.setSimpleModels(simpleList);

        mav.setViewName("carSelectionForm");
        mav.addObject("carSelection", cs);
        return mav;
    }   
} 
```

The option for 'NONE' does render and is the only option that shows. Am I missing something basic?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:23:18.850

您需要在`options`属性中设置正确的列表`items`。

```
<form:select path="makes" multiple="false">
   <form:options items="${carSelection.makes}"/>
</form:select>

<form:select path="simpleModels" multiple="false">
  <form:options items="${carSelection.simpleModels}"/>
</form:select> 
```

但我没有 3\. 在控制器中下拉的项目

# multithreading - Asynchronous image downloader for blackberry

> ID：12785245
> 
> 赞同：1
> 
> 时间：2012-10-08T15:58:22.827
> 
> 标签：multithreading, blackberry, asynchronous, java-me

I have a need of creating a image gallery. The images are saved in the remote server. The Blackberry client need to download and render it to the UI (Gallery View).

I have used "UniversalImageDownloaer" library for android. But now for I am looking for any such freeware/open source lib that will help me to serve my purpose for BlackBerry. Can Anyone help me guiding me to a resource.

I need to look into the following things

1.  Async image download
2.  Gallery view
3.  Image caching

**Edit-1** From my earlier experience, I understand that Blackberry has the restriction for creating maximum of 250 (Many be 5+/-) number of threads at run time. And per application it is restricted to 17 number of threads. So I must look into the thread pool and thread safety for my requirements.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:02:54.090

我不知道任何用于延迟加载 BB 的库。您可以尝试将该库移植到黑莓或 DIY。让我们看看你是如何做到这一点的：

1.  您可以编写一个消费者线程，该线程将一次下载一个图像（在黑莓中，并行下载不会有太大的性能改进）。这个消费者可以从堆栈中获取 URL。UI（屏幕、列表）会在每次需要图像时向消费者提交请求。该请求只是将资源 URL 传递给使用者，以便将其放在堆栈的顶部。同时，GUI 应显示默认图像或加载消息。Java中有很多关于如何以线程安全的方式设计消费者-生产者方案的好书和手册，但这超出了这个答案的范围。
2.  从 OS 5.0 开始，您拥有[PictureScrollField](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/extension/component/PictureScrollField.html)类，该类允许您显示一行滚动图像，并且可以在一定程度上进行自定义。我认为 SDK 的示例文件夹中有一个示例演示应用程序。
3.  如果在程序执行期间可能对同一图像进行多个请求，则缓存是一种有趣的增强功能。您可以将它们保存在消费者堆栈的 RAM 中，甚至可以将它们保存到 SDCard 中的文件夹中。然后消费者将首先在缓存中查找，只有在它不存在的情况下才会启动远程下载。

# ios - UICollectionViewController and Search

> ID：12785246
> 
> 赞同：1
> 
> 时间：2012-10-08T15:58:27.447
> 
> 标签：ios, uicollectionview, uisearchdisplaycontroller

Is it possible to have a UICollectionViewController or a UISearchDisplayController where the search display view looks like the UICollectionViewController?

# ios - 寻找简单的代码来通过来自 m3u 的 HTTP 播放流音频

> ID：12785252
> 
> 赞同：1
> 
> 时间：2012-10-08T15:58:44.020
> 
> 标签：ios, audio-streaming

我正在寻找 iOS 的示例代码（我猜是使用 AVMediaPlayer 或 AVPlayer）从 URL 播放流音频（我们当前的服务器 URL 是[http://server.local:8008/ourradio.aac.m3u](http://server.local:8008/ourradio.aac.m3u)）。

当应用程序处于后台模式时，也应播放音频流。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T16:02:57.500

M3U 是一种播放列表格式。它是一个纯文本文件，包含音乐文件的位置，尤其是 MP3 文件。阅读[有关 M3U 的维基百科文章](http://en.wikipedia.org/wiki/M3U)。如果您真的想要在 iPhone 上播放每个 MP3，请使用它：

```
AVPlayer *musicPlayer = [AVPlayer playerWithURL:musicLinkFromM3uFile];
[musicPlayer play]; 
```

其中`musicLinkFromM3uFile`是从 m3u 文件中读取的 MP3 文件的位置。

**编辑：**为了能够继续在后台播放，您需要使用 category 设置音频会话`kAudioSessionCategory_MediaPlayback`。为此，将以下代码行添加到应用程序委托中的 applicationDidLoad 中：

```
UInt32 sessionCategory = kAudioSessionCategory_MediaPlayback;
AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(sessionCategory), &sessionCategory); 
```

您还需要`UIBackgroundModes`在 Info.plist 中设置为`audio`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T16:36:21.053

```
NSString *urlAddress = @"http://www.mysite.com/test.mp3";
urlStream = [NSURL URLWithString:urlAddress];   
self.player = [AVPlayer playerWithURL:urlStream];   
[player play]; 
```

# clearcase - 将新文件提交到 RTC 源代码管理时，我应该忽略 .copyarea.db 文件吗？

> ID：12785256
> 
> 赞同：1
> 
> 时间：2012-10-08T15:59:16.203
> 
> 标签：clearcase, rtc

我正在将一个 clearcase 源代码控制项目转移到 RTC 源代码控制中。

我认为我不应该提交以下文件

```
.copyarea.db 
```

因为这是一个明确的特定文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T16:18:12.203

是的，您可以忽略它：它仅适用于 CCRC（ClearCase Remote Client）Web 视图，在 Jazz 视图中无用。

更准确地说，来自 IBM 技术说明“[关于`.copyarea.dat`和`.copyarea.db`文件](http://www-01.ibm.com/support/docview.wss?uid=swg21119280)”：

> 每个 CCRC 或 CCWeb 视图根目录（从 VOB 下载文件到本地视图工作区的目录树）包含一个`.copyarea.dat`和一个`.copyarea.db`文件。
> 
> *   **`.COPYAREA.DAT`**：
>     该`.copyarea.dat`文件**用于检测是否对加载的文件进行了更改，以确定它们是否处于劫持状态**。
>     .copyarea.dat 文件存储如下信息：
>     
>     
>     *   创建视图的时间
>     *   视图最初连接到的 http 服务器
>     *   视图的操作系统平台
>     *   CCRC 远程视图标签
> *   **`.COPYAREA.DB`**：
>     该`.copyarea.db`文件在 CCRC 或 CCWeb 视图的每个目录中创建，其中包含**在视图中加载的文件列表以及有关文件的元数据**。
>     如果此文件丢失或损坏，您会注意到所有或部分加载的文件似乎被劫持。

同样，对于 RTC jazz 视图，您不需要这些信息。

# java - 带有 timepicker 和 SystemClock.elapsedRealtime() 的奇数值；

> ID：12785261
> 
> 赞同：0
> 
> 时间：2012-10-08T15:59:36.940
> 
> 标签：java, android

我`TimePicker`在我的应用程序中有一个可以选择播放歌曲的时间量，我在让剩余时间正确显示时遇到问题`CountDownTimer`，当然一切都在几毫秒内发生在幕后，我认为我做正确的转换，但我在屏幕上看到的只是完全错误的值。

当我只是使用 3600000(1hour) 作为第一个参数进行测试 CountDownTimer 时，一切正常，但是当我将 timepicker 设置为 0 并将分钟设置为 1 时，就像我只想要 1 分钟的播放一样，它显示 12 小时，看起来像是随机的分钟和秒槽中的值。`tp.getCurrentHour();`设置为零时返回零`tp.getCurrentMinute();`并按预期返回一，这部分似乎发生了一些事情，但还不能弄清楚：

游戏时间 = (小时 * (60 * 60 * 1000)) + (分钟 * (60 * 1000)); starttime = SystemClock.elapsedRealtime();

为什么`tv2.setText("totaltest "+startime+playtime);`显示值 6000046929803？？？这显然是错误的……

这是其余的代码：

```
 TimePicker tp =(TimePicker)findViewById(R.id.timePicker1);

                    public void onClick(View v) {
                                    // TODO Auto-generated method stub
                                    long hour = tp.getCurrentHour();
                                    long min = tp.getCurrentMinute();
                                    playtime = (hour * (60 * 60 * 1000)) + (min * (60 * 1000));
                                    startime = SystemClock.elapsedRealtime();
tv2.setText("totaltest "+startime+playtime);
            timer = new CountDownTimer(startime+playtime,1000){

                                @Override
                                public void onFinish() {
                                    tv.setText("finished");
                                }

                                //@SuppressLint("ParserError")
                                @Override
                                public void onTick(long millisUntilFinished) {

                                    String display = DateUtils.formatElapsedTime(millisUntilFinished/1000);

                                    tv.setText(display);

                                }

                            }.start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:33:20.327

尝试：

```
String display = DateUtils.formatElapsedTime(millisUntilFinished/1000); 
```

这会为您完成转换。

和：

```
timer = new CountDownTimer(playtime,1000){ 
```

因为 CounterDownTimer 期望运行的毫秒数。

# java - How to export a complete JTable component in pdf at a specific coordinate

> ID：12785264
> 
> 赞同：5
> 
> 时间：2012-10-08T15:59:48.423
> 
> 标签：java, swing, pdf, jtable, itext

In my project I have to print JTable components in a pdf with all the customizations(like borders,colors etc). For this requirement I searched a little bit and found one code to print JTable in pdfs. But after printing I found that table's border for 1st row and 1st columns are missing plus I didn't find a way to print at some specific coordinate. Please look at the specific code below:-

```
package com.jpmorgan.dqreport;

import java.awt.BorderLayout;
import java.awt.Graphics2D;
import java.awt.Shape;
import java.io.FileOutputStream;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTable;

import com.lowagie.text.Document;
import com.lowagie.text.PageSize;
import com.lowagie.text.pdf.PdfContentByte;
import com.lowagie.text.pdf.PdfWriter;

public class JTable2Pdf extends JFrame {
  private JTable table;

  public JTable2Pdf() {
    getContentPane().setLayout(new BorderLayout());
    createTable();
  }
  private void createTable() {
      Object[][] data = {
                {"Kathy", "Smith",
                 "SnowboardingXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX", new Integer(5), new Boolean(false)},
                {"John", "Doe",
                 "Rowing", new Integer(3), new Boolean(true)},
                {"Sue", "Black",
                 "Knitting", new Integer(2), new Boolean(false)},
                {"Jane", "White",
                 "Speed reading", new Integer(20), new Boolean(true)},
                {"Joe", "Brown",
                 "Pool", new Integer(10), new Boolean(false)}
                };
      String[] columnNames = {"First Name",
              "Last Name",
              "Sport",
              "# of Years",
              "Vegetarian"};

    table = new JTable(data, columnNames);

    JPanel tPanel = new JPanel(new BorderLayout());
    tPanel.add(table.getTableHeader(), BorderLayout.NORTH);
    tPanel.add(table, BorderLayout.CENTER);

    getContentPane().add(tPanel, BorderLayout.CENTER);
  }
  private void print() {
    Document document = new Document(PageSize.A4.rotate());
    try {
      PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream("C:\\jTable.pdf"));

      document.open();
      PdfContentByte cb = writer.getDirectContent();

      cb.saveState();
      Graphics2D g2 = cb.createGraphics(500, 500);

      Shape oldClip = g2.getClip();
      g2.clipRect(10, 0, 500, 500);

      table.print(g2);
      g2.setClip(oldClip);

      g2.dispose();
      cb.restoreState();
    } catch (Exception e) {
      System.err.println(e.getMessage());
    }
    document.close();
  }
  public static void main(String[] args) {
    JTable2Pdf frame = new JTable2Pdf();
    frame.pack();
    frame.setVisible(true);
    frame.print();
  }
} 
```

Please suggest someway to print the entire JTable at a specific coordinate.

Thanks

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T16:09:43.797

众所周知， A`JTable`很难正确渲染图像（或者我猜是打印）。请参阅[此线程](https://stackoverflow.com/questions/7369814/why-does-the-jtable-header-not-appear-in-the-image)，其中一些大师提供技巧。

仔细查看该线程的屏幕截图表明，默认的 Metal 表在最左侧没有边框。

![](../Images/74dacb4fee2f496125c907bd3e4f40f3.png)

不过，Nimbus PLAF 中的桌子确实如此。

![](../Images/6fe1ca5d25c922b09a986ac200bcd904.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T11:35:07.943

嗨，我通过添加如下解决了代码：-

```
cb.saveState();

PdfTemplate pdfTemplate = cb.createTemplate(table.getWidth(), table.getHeight());
Graphics2D g2 = pdfTemplate.createGraphics(table.getWidth(), table.getHeight());
/*g2.setColor(Color.BLACK);
g2.drawRect(x-2, y-2, table.getWidth()+2, table.getHeight()+2);*/
table.print(g2);
System.out.println("x="+x + "," + "y=" + y);
cb.addTemplate(pdfTemplate, x, y);
g2.dispose();
cb.restoreState(); 
```

# c - Problem in udp socket programing in c

> ID：12785266
> 
> 赞同：0
> 
> 时间：2012-10-08T15:37:44.123
> 
> 标签：c, sockets

I complile the following C code of UDP client after I run './udpclient localhost 9191' in terminal.I put "Enter Text= " as Hello, but it is showing error in sendto as below:

```
Enter text: hello 
hello
 : error in sendto()guest-1SDRJ2@md-K42F:~/Desktop$ 
```

"

Note: I open 1st the server port as below in other terminal ./server 9191. I beleive there is no error in server code. The udp client is not passing message to server. If I don't use thread , the message is passing .But I have to do it by thread.

UDP client Code:

```
/* simple UDP echo client */

#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <netdb.h>
#include <stdio.h>
#include <pthread.h>

#define STRLEN 1024

static void *readdata(void *);
static void *writedata(void *);
  int sockfd, n, slen;
struct sockaddr_in servaddr;
char sendline[STRLEN], recvline[STRLEN];

int main(int argc, char *argv[]) {
  pthread_t  readid,writeid;

  struct sockaddr_in servaddr;
  struct hostent *h;

  if(argc != 3) {
    printf("Usage: %s <proxy server ip> <port>\n", argv[0]);
    exit(0);
  }

  /* create hostent structure from  user entered host name*/
  if ( (h = gethostbyname(argv[1])) == NULL) {
    printf("\n%s: error in gethostbyname()", argv[0]);
    exit(0);
  }

  /* create server address structure */
  bzero(&servaddr, sizeof(servaddr)); /* initialize it */
  servaddr.sin_family = AF_INET;
  memcpy((char *) &servaddr.sin_addr.s_addr, h->h_addr_list[0], h->h_length);
  servaddr.sin_port = htons(atoi(argv[2])); /* get the port number from argv[2]*/

  /* create a UDP socket: SOCK_DGRAM */
  if ( (sockfd = socket(AF_INET,SOCK_DGRAM, 0)) < 0) {
    printf("\n%s: error in socket()", argv[0]);
    exit(0);
  }

  pthread_create(&readid,NULL,&readdata,NULL);
  pthread_create(&writeid,NULL,&writedata,NULL);

  while(1)
  {
  };

  close(sockfd);
}

static void * writedata(void *arg)
 {
 /* get user input */
  printf("\nEnter text: ");

  do {
      if (fgets(sendline, STRLEN, stdin) == NULL) {
        printf("\n%s: error in fgets()");
        exit(0);
      }
      /* send a text */
      if (sendto(sockfd, sendline, sizeof(sendline), 0, (struct sockaddr *) &servaddr, sizeof(servaddr)) < 0) {
          printf("\n%s: error in sendto()");
          exit(0);
      }
     }while(1);
}

static void * readdata(void *arg)
{
  /* wait for echo */
  slen = sizeof(servaddr);
  if ( (n = recvfrom(sockfd, recvline, STRLEN, 0, (struct sockaddr *) &servaddr, &slen)) < 0) {
      printf("\n%s: error in recvfrom()");
      exit(0);
  }

  /* null terminate the string */
  recvline[n] = 0;

  fputs(recvline, stdout);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:18:36.370

问题是您对and调用使​​用相同的`sockaddr`struct ( `servaddr`) 。首先发生，因此它清除以准备写入接收到的打包的源地址（一旦它接收到 - 该线程仍然在内核中阻塞等待数据包）。然后，当调用发生时，是全零，所以它立即返回 EINVAL。`sendto``revfrom``recvfrom``servaddr``sendto``sockaddr`

`sockaddr`您可能会因为参数是 OUTPUT 而不是输入这一事实感到困惑`recvfrom`——它填充了接收到的数据包的源地址（可能来自任何地方）。如果您只想接收来自特定位置（服务器？）的数据包，则需要在`recvfrom`返回后检查地址，如果数据包来自其他地方，则将其扔掉，`recvfrom`再次循环返回。

# html - Pure css gradient

> ID：12785268
> 
> 赞同：0
> 
> 时间：2012-10-08T16:00:03.310
> 
> 标签：html, css, yui-pure-css

Does anyone know how I could plot a gradient like in the image below with pure CSS.

It doesn't have to work in IE. I can get it to work but I can't seem to be able to taper off the gradient on both sides left and right like the image shows. Any ideas would be grateful. Again this is using straight css to do this.

![Gradient example](../Images/6d88b7e8c5e4aa68cd38bdd1aa2e30b1.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T16:01:28.587

这个网站非常适合做 CSS 渐变：

[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

您甚至可以导入图像或 CSS。

一个例子是：

```
background: #1e5799;
background: -moz-linear-gradient(top,  #1e5799 0%, #7db9e8 100%);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#1e5799), color-stop(100%,#7db9e8));
background: -webkit-linear-gradient(top,  #1e5799 0%,#7db9e8 100%);
background: -o-linear-gradient(top,  #1e5799 0%,#7db9e8 100%);
background: -ms-linear-gradient(top,  #1e5799 0%,#7db9e8 100%);
background: linear-gradient(to bottom,  #1e5799 0%,#7db9e8 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1e5799', endColorstr='#7db9e8',GradientType=0 ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T21:03:01.223

这是一项非常复杂的任务。他们将一个 div 放在前面的 div 后面。后面是他们创建阴影的地方，然后他们对其进行变换和定位以实现该效果。这是执行此技术的指南（在一个角落有它，但您可以稍微调整一下并获得该效果）...我相信也有特定的指南可以实现您想要的确切效果，但他们似乎正在逃避我这一天的搜索技巧。

[http://www.red-team-design.com/how-to-create-slick-effects-with-css3-box-shadow](http://www.red-team-design.com/how-to-create-slick-effects-with-css3-box-shadow)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T16:23:33.613

为什么需要渐变？阴影效果如何。

[例子](http://nicolasgallagher.com/css-drop-shadows-without-images/demo/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-20T21:28:00.167

使用**纯 CSS**，您可以使用**radial-gradient**。

假设你有一个 div 来模拟那个阴影，它有 300px 的宽度和 100px 的高度，那么，你可以通过以下方式实现：

```
background: radial-gradient(70% 10%,gray 20%, white 60%);
background-position: 0px -54px;
background-size: 100% 110%; 
```

这是示例 -->[在此处输入链接描述](http://jsfiddle.net/FacuCode/284gL5v8/)

# c++ - What's going on with my memory?

> ID：12785274
> 
> 赞同：0
> 
> 时间：2012-10-08T16:00:41.473
> 
> 标签：c++, memory-management, memory-leaks

I have a function that allocated a buffer for the size of a file with

```
char *buffer = new char[size_of_file]; 
```

The i loop over the buffer and copy some of the pointers into a subbuffer to work with smaller units of it.

```
char *subbuffer = new char[size+1];

for (int i =0; i < size; i++) {
  subbuffer[i] = (buffer + cursor)[i];
} 
```

Next I call a function and pass it this subbuffer, and arbitrary cursor for a location in the subbuffer, and the size of text to be abstracted.

```
 wchar_t* FileReader::getStringForSizeAndCursor(int32_t size, int cursor, char *buffer) {

  int wlen = size/2;

  #if MARKUP_SIZEOFWCHAR == 4 // sizeof(wchar_t) == 4
  uint32_t *dest = new uint32_t[wlen+1];
  #else
  uint16_t *dest = new uint16_t[wlen+1];
  #endif

  char *bcpy = new char[size];
  memcpy(bcpy, (buffer + cursor), size+2);

  unsigned char *ptr = (unsigned char *)bcpy; //need to be careful not to read outside the buffer

  for(int i=0; i<wlen; i++) {
      dest[i] = (ptr[0] << 8) + ptr[1];
      ptr += 2;
  }
  //cout << "size:: " << size << " wlen:: " << wlen << " c:: " << c << "\n";

  dest[wlen] = ('\0' << 8) + '\0';
  return (wchar_t *)dest;
} 
```

I store this in a value as the property of a struct whilst looping through the file.

My issue seems to be when I free subbuffer, and start reading the title properties of my structs by looping over an array of struct pointers, my app segfaults. GDB tells me it finished normally though, but a bunch of records that I cout are missing.

I suspect this has to do with function scope of something. I thought the memcpy in getStringForSizeAndCursor would fix the segfault since it's copying bytes outside of subbuffer before I free. Right now I would expect those to then be cleaned up by my struct deconstructor, but either things are deconstructing before I expect or some memory is still pointing to the original subbuffer, if I let subbuffer leak I get back the data I expected, but this is not a solution.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:32:47.887

我可以在您的问题代码中看到的唯一明确错误是 bcpy 的分配太小，您在其中分配了一个大小的缓冲区`size`并立即将字节复制`size+2`到缓冲区。由于您没有在代码中使用额外的 2 个字节，因此只需在副本中删除 +2。

除此之外，我只能看到一件可疑的事情，你在做；

```
char *subbuffer = new char[size+1]; 
```

并将字节复制`size`到缓冲区。分配提示您正在为零终止分配额外的内存，但它根本不应该存在（没有 +1）或者您应该分配 2 个字节（因为您的函数提示双字节字符集。无论哪种方式，我看不到你零终止它，所以将它用作零终止字符串可能会中断。

@Grizzly 在评论中也有一点，为字符串和 wstrings 分配和处理内存可能是您可以“卸载”到 STL 并获得良好结果的东西。

# c# - 使用 2 legged oauthentication 上传文档

> ID：12785281
> 
> 赞同：1
> 
> 时间：2012-10-08T16:01:26.690
> 
> 标签：c#, asp.net, oauth, google-docs-api

我正在使用**.NET Google Document List API**并发现自己被困在某个地方。

我想使用**2 Legged OAuthentication**上传文档，因为我已经在 Google Marketplace 中注册了我的应用程序，然后将其安装到我的域中。

现在我正在使用 2 腿 OAuthentication 与存储在谷歌中的数据进行交互并且工作正常。

```
RequestSettings settings = new RequestSettings(APPLICATION_NAME, CONSUMER_KEY, CONSUMER_SECRET, currentUser, DOMAIN); 
```

下面是我的代码，它不起作用并给出**401 未经授权**的错误：

```
GOAuthRequestFactory requestFactory = new GOAuthRequestFactory("cl", APPLICATION_NAME);
requestFactory.ConsumerKey = CONSUMER_KEY;
requestFactory.ConsumerSecret = CONSUMER_SECRET;
DocumentsService service = new DocumentsService(APPLICATION_NAME);
service.RequestFactory = requestFactory;
service.UploadFile(fileNameWithPath, fileName, contentType, false); 
```

# asp.net - .net 菜单控件 SelectedItem 在主页上始终为空

> ID：12785286
> 
> 赞同：1
> 
> 时间：2012-10-08T16:01:36.627
> 
> 标签：asp.net, .net, menu, webforms

我正在使用从以下站点地图生成的 .net webforms 菜单控件：

```
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" >
    <siteMapNode url="" title="NavigationWrapper"  description="">
        <siteMapNode url="/" title="Home"  description="" />
        <siteMapNode url="/search" title="Search"  description="" />
        <siteMapNode url="/contact" title="Contact"  description="" />     
    </siteMapNode>
</siteMap> 
```

当我单击主页链接时，菜单控件的 SelectedItem 属性始终为空，但单击其他​​两个链接时它工作正常。我似乎无法弄清楚为什么！

我似乎可以解决这个问题的唯一方法是为我的主页创建一个 www.abc.com/home 链接，但我不想这样做。

非常感谢任何帮助！

编辑：

路由集合如下：

```
 routes.MapPageRoute("Home", "", "~/Default.aspx");
        routes.MapPageRoute("Search", "search", "~/SearchByMap.aspx");
        routes.MapPageRoute("contact", "contact", "~/Contact.aspx"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:10:22.470

尝试这个：

```
<siteMapNode url="~/" title="Home"  description="">
        <siteMapNode url="/search" title="Search"  description="" />
        <siteMapNode url="/contact" title="Contact"  description="" />     
</siteMapNode> 
```

将此添加到您的路线集合中：

```
public static void RegisterRoutes(RouteCollection routeCollection)
{
    routeCollection.MapPageRoute("Home", "", "~/Default.aspx");
} 
```

# c++ - C ++访问向量内的对元素

> ID：12785287
> 
> 赞同：7
> 
> 时间：2012-10-08T16:01:39.863
> 
> 标签：c++, vector, containers

我有一个向量，每个元素都是一对。我对语法感到困惑。有人可以告诉我如何遍历每个向量，然后依次遍历 pair 的每个元素来访问该类。

```
 std::vector<std::pair<MyClass *, MyClass *>> VectorOfPairs; 
```

另外，请注意，我将在函数之间传递值，因此在我的代码的某些地方，VectorOfPairs 将由 *VectorOfPairs 指针传递。

感谢你的帮助。谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-08T16:04:55.150

这应该可以工作（假设你有一个兼容 C++11 的编译器）

```
for ( auto it = VectorOfPairs.begin(); it != VectorOfPairs.end(); it++ )
{
   // To get hold of the class pointers:
   auto pClass1 = it->first;
   auto pClass2 = it->second;
} 
```

如果你没有，`auto`你将不得不使用`std::vector<std::pair<MyClass *, MyClass *>>::iterator`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-08T16:04:33.543

这是一个示例。请注意，我使用 typedef 为那个又长又丑的类型名取别名：

```
typedef std::vector<std::pair<MyClass*, MyClass*> > MyClassPairs;

for( MyClassPairs::iterator it = VectorOfPairs.begin(); it != VectorOfPairs.end(); ++it )
{
  MyClass* p_a = it->first;
  MyClass* p_b = it->second;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-08T16:08:48.483

如果您有一个符合 C++11 的编译器，那么另一个选择是使用基于范围的`for`循环

```
for( auto const& v : VectorOfPairs ) {
  // v is a reference to a vector element
  v.first->foo();
  v.second->bar();
} 
```

# ruby-on-rails - Pow 服务器：通过 myapp.dev.com 域为本地 Rails 应用程序提供服务

> ID：12785304
> 
> 赞同：2
> 
> 时间：2012-10-08T16:02:37.943
> 
> 标签：ruby-on-rails, macos, rack-pow

Pow 服务器在我的本地机器（OS X Lion）上与 .dev 域一起正常工作。所以 myapp.dev 一切都很好。

我现在想让它为 myapp.dev.com（以及 myapp.dev.fr 和 myapp.dev.XX）提供服务，因此 myapp 将提供本地化版本，这是通过顶级域请求内部确定的：。 com 表示英语，fr 表示法语……等等。

到目前为止我所做的：将 .powconfig 设置为

```
export POW_DOMAINS=dev,dev.com,dev.fr
export POW_EXT_DOMAINS=dev.com,dev.fr 
```

然后，当然，卸载并重新安装 pow。

到目前为止，调用 myapp.dev.com 时我得到的只是常规的 apache 视图。pow 不满足我的请求...而是将其发送到 apache，而 apache 仅显示我的服务器根目录中的所有文件夹...

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T07:43:45.127

我的解决方案：

...就那么简单...

1.  按照这个维基[https://github.com/37signals/pow/wiki/Running-Pow-with-Apache](https://github.com/37signals/pow/wiki/Running-Pow-with-Apache)（第 3 步是重要的）

2.  然后当然创建/修改 .powconfig 以包含这一行

    ```
    export POW_DOMAINS=dev,dev.com,dev.fr 
    ```

3.  最后通过卸载并重新安装它让 pow “意识到”这个新设置

    ```
    curl get.pow.cx/uninstall.sh | sh
    curl get.pow.cx | sh 
    ```

    最后一步：重启 apache

    ```
    sudo apachectl restart 
    ```

# css - 具有两个具有相同 ID 的 Html 元素的页面将如何影响 Google 索引？

> ID：12785307
> 
> 赞同：0
> 
> 时间：2012-10-08T16:02:56.157
> 
> 标签：css, caching, seo, indexing, web-crawler

我有以下代码：

```
<div id="myContent"> 
    An image, or another div with some text... Lore ipsum ... 
</div>
<div id="myContent">
    Other divs images... and other content... 
</div> 
```

我知道 html 元素的 id 必须是唯一的。我知道[W3C](http://www.w3schools.com/tags/att_global_id.asp)属性描述，但我的客户希望保留 DIV，而不将 id 更改为类或不将第二个 id 更改为具有唯一名称。

我在徘徊，这种不寻常的编写html代码的方式会影响谷歌抓取页面的方式吗？谷歌是否将其作为任何常规页面编入索引，还是因为这个问题而跳过内容或降低排名？

我找不到关于谷歌如何解决这个问题的官方文档，我担心这会影响到我需要修复的十几个页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:12:47.907

违反唯一 ID*不一定*会给网络蜘蛛带来问题，但它可能会阻止您的标记验证，并且还会对任何依赖于 ID 属性的“只能有一个”性质的事物产生影响，例如 CSS选择器或 Javascript。

你的客户被误导了。你是专家。拉排名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:00:15.693

对于某些页面，Google 会在搜索结果中显示锚链接，以便访问者可以直接跳转到页面的某个部分。

如果您客户的页面是 Google 认为有用的网站之一，那么这是不可能的，因为`id`显然您需要不同的 s。

但是，Google 可能只会为具有某种 ToC 的页面（如 Wikipedia）添加这些链接。所以这无论如何都不适用于您的网站，因为您将无法跳转到这两个`div`元素。

# facebook - 无法编辑标签，如何添加 FB 命名空间

> ID：12785312
> 
> 赞同：1
> 
> 时间：2012-10-08T16:03:12.797
> 
> 标签：facebook, namespaces, facebook-like

我希望这是问这个问题的正确地方。如果不能，请告诉我在哪里可以得到这个问题的答案。我到处搜索，一无所获。

我正在帮助一个朋友建立一个网站，她正在使用 XSitePro 博客软件。XSP 不允许您编辑标签，但我们需要将 FB 命名空间添加到她的页面。

如果无法更改 html 标签，有什么办法可以添加它？

谢谢，特里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:07:34.583

您可以通过脚本将命名空间添加到文档中。就像是：

```
document.documentElement.setAttribute("xmlns:fb", "http://www.facebook.com/2008/fbml"); 
```

# javascript - 从任务管理器中杀死 IE 进程时清除 localStorage

> ID：12785315
> 
> 赞同：0
> 
> 时间：2012-10-08T16:03:47.533
> 
> 标签：javascript, html

我正在使用 HTML5 localStorage 来跟踪我的应用程序会话。下面是我的代码示例。

```
 if(typeof(Storage)!=="undefined")
             {
                if(sessionStorage.lastname=="Smith")
                {
                    alert( "your Session is still active");

                }
                else{
                sessionStorage.lastname="Smith";
                   alert( "Last name: " + sessionStorage.lastname);
                }
                }
              else
                {
                alert( "Sorry, your browser does not support web storage...");
                } 
```

上面的代码效果很好。但是当我从任务管理> 杀死 IE 进程关闭我的 IE 浏览器，并在新浏览器中再次打开我的应用程序时，我看到我的旧 localStorage 值仍然存在，它不会删除我以前会话的 localStorage。

当用户从 TaskManager 中杀死浏览器时，如何删除 localStorage？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:36:30.433

当浏览器通过任务管理器被杀死时，javascript 进程随后被杀死。当 javascript 被杀死时，它不会触发您可以采取行动的事件。

[http://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/232931/is-it-possible-detect-browser-process-termination#](http://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/232931/is-it-possible-detect-browser-process-termination#)

# raphael - 让 d3.js 与 raphael.js 一起工作

> ID：12785324
> 
> 赞同：6
> 
> 时间：2012-10-08T16:04:26.410
> 
> 标签：raphael, d3.js

我最近使用 d3.js 实现了一些数据可视化，我现在正试图让它适用于 Internet Explorer 浏览器 7 及更高版本。让它工作的常见建议是将 d3.js 与 raphael.js 结合起来，raphael.js 是一个跨浏览器图形库。

似乎已经有一些此类库的实现，例如 [r2d3.js](https://github.com/mhemesath/r2d3/) : d34raphael.js :

我试图了解这些现有实现是否已经具有 d3 的数据绑定能力和力布局的物理实现来实现像这个 d3 示例这样简单的东西：http: [//bl.ocks.org/1095795](http://bl.ocks.org/1095795)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T08:47:54.473

我也一直在研究这个问题，并提出了一些选择。

*   [Chrome Frame](https://developers.google.com/chrome/chrome-frame/) - 一个浏览器插件，实际上在下面使用 chrome，这意味着 SVG 可以正常工作。如果您能够将插件部署到浏览器，这很好，但对于真正的商业环境，这可能是不可能的。

*   [SVG Web](http://code.google.com/p/svgweb/) - 目标是将 SVG 带到所有浏览器。它看起来是一个相当大的项目，有谷歌的意见。但是，尽管我对这些问题知之甚少，但这并不适用于 D3。

*   [D34Raphael](http://webmonarch.github.com/d34raphael/) - 你提到了这个，我又发现它不能开箱即用。在 GitHub 上查看该项目，几个月来没有任何提交活动，并且有一些拉取请求“首先尝试获得对事件绑定所需的 .on() 的支持”。如果它不支持事件，那对您来说是个问题吗？我一般会远离这个。

*   [R2D3](https://github.com/mhemesath/r2d3/) - 你提到的另一个。我从 D3 网站上获取了 Sankey 示例，并且必须进行一些更改才能使其正常工作。我无法工作的主要事情（拖动事件，组 - 虽然可以使用替代方案）。花了大约一天的时间让示例在 IE8 中运行，我相信它处于可用状态。GitHub 上的项目也更加活跃，开发人员正在提交、投入工作并非常积极地参与讨论等。这得到了我的投票。

# jquery - 返回时触发jquery函数

> ID：12785325
> 
> 赞同：2
> 
> 时间：2012-10-08T16:04:30.933
> 
> 标签：jquery

我有一个简单的表单，当按下提交按钮时，它会触发一个查询数据库并返回一些基本文本的 jquery AJAX 请求。

它工作正常，但我想要做的是让输入按钮也提交表单，这看起来很容易，但它不适合我。

下面是表格：

```
 <form method="post" action="" name="statusform" id="statusform">
        <fieldset id="quote_reference">
            <legend>Check Quote Status:</legend>
            <div id="enter_ref_div">
                <br />
                <br />
                <br />
                <br />                  
                <label for="reference" accesskey="R">Your Reference Number:</label>
                <input name="ref" id="ref" type="text" size="5" value="" /> <br /><br />
                <button type="button" id="checkStatus" class="calc_btn">Check Status</button><div id="loader"><img class="loader_gif" src="assets/ajax-loader.gif" /></div>
            </div>
        </fieldset>
        <fieldset id="quote_status_div">
            <legend>Your Quote Status:</legend>     
            <div id="status_result"></div>
        </fieldset>
    </form> 
```

下面是按下按钮时触发的 jquery 函数，效果很好

```
$('#checkStatus').click(function() {

    var refNo = $("#ref").val();

    $('#loader').fadeIn('fast');

    $.ajax({
        type: "POST",
        url: "functions/functions.php",
        data: "ref_no="+ refNo,
        success: function(data){
            $('#loader').fadeOut('fast');
            $('#quote_reference').slideUp('fast');
            $('#status_result').html(data);
            $('#quote_status_div').slideDown('fast'); 
        }
    });     

}); 
```

现在我要做的就是在按下的返回/输入键上模仿上述功能。下面是我正在尝试的代码：

```
$(document).keypress(function(event){

var keycode = (event.keyCode ? event.keyCode : event.which);

    if(keycode == '13'){

        var refNo = $("#ref").val();

        $('#loader').fadeIn('fast');

        $.ajax({
            type: "POST",
            url: "functions/functions.php",
            data: "ref_no="+ refNo,
            success: function(data){
                $('#loader').fadeOut('fast');
                $('#quote_reference').slideUp('fast');
                $('#status_result').html(data);
                $('#quote_status_div').slideDown('fast'); 
            }
        });     
    } 
```

});

我在互联网上找到的所有信息都告诉我这应该有效。你能帮我解释一下吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:09:02.733

更改按钮以提交并使用提交方法。

```
$('#checkStatus').submit(function() {
  // do ajax call here
  // ...
  return false;
})) 
```

不要忘记：`return false`阻止发送

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:11:31.610

试试这个方法..当你按下回车时触发点击事件..不需要再次编写代码..

```
$(document).keypress(function(event){
   event.preventDefault();
   var keycode = (event.keyCode ? event.keyCode : event.which);
    if(keycode == '13'){

       $('#checkStatus').click();
    }
}); 
```

发出警报并检查按下回车键时是否看到该警报。检查控制台部分中的任何错误。

还尝试使用 .on() 将事件附加到您的元素..

```
$(document).on('keypress' ,function(event){

$('#checkStatus').on('click' , function() { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T16:13:40.023

您需要做的一件事是调用 event.PreventDefault() 如果您想阻止表单正常提交，请在检查它是否是 enter 键后调用。

# java - 将 Web 应用程序与第三方应用程序集成

> ID：12785330
> 
> 赞同：2
> 
> 时间：2012-10-08T16:04:50.150
> 
> 标签：java, spring-mvc, eai

我正在开发一个集成解决方案，我的 Web 应用程序必须与第三方应用程序进行通信。Web 应用程序只能通过调用具有特定参数的可执行文件来调用第三方应用程序的服务。然后，第三方应用程序以文件形式生成结果，这些文件存储在安装它的服务器上。这些文件将由 Web 应用程序使用和处理。Web 应用程序和第三方应用程序不一定在同一台服务器上。Web 应用程序是使用 Spring 框架构建的。

目前，我正在尝试寻找应该用于执行此集成的最佳方法和最佳实践。由于我是这个领域的新手，我不知道我应该使用哪些确切的术语来搜索。我也不知道描述 Web 应用程序与此类第三方应用程序集成的这种设置的确切术语。

我需要一些关于要搜索什么样的信息以及在搜索过程中使用什么术语的指导。这对我来说很重要，因为我还需要记录整个搜索过程以及基于当前方法和最佳实践的解决方案。

提前非常感谢！

阿斯玛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:03:54.967

您应该能够使用 Spring Web-Service 客户端 API，请参阅下面的链接帮助您找到一种方法。

[http://static.springsource.org/spring-ws/site/reference/html/client.html](http://static.springsource.org/spring-ws/site/reference/html/client.html)

[需要 Spring Web Service 客户端教程或示例](https://stackoverflow.com/questions/2391428/spring-web-service-client-tutorial-or-example-required)

# grails - 带有 h2 数据库的 grails 应用程序的 JdbcSQLException？

> ID：12785332
> 
> 赞同：0
> 
> 时间：2012-10-08T16:04:58.890
> 
> 标签：grails, jdbc, h2

每当我尝试将我的应用程序部署到服务器时，我都会收到 JdbcSQLException，尽管在本地运行正常。我不知道这个错误是什么，似乎无法在谷歌上找到答案。

抛出错误的代码：

```
class ResultService {

    def recentStoryRuns() {
        StoryRun.list(sort: "batch.dateCreated", order: "desc")
    }
} 
```

完整的堆栈跟踪：

```
org.h2.jdbc.JdbcSQLException: Table "STORY_RUN" not found; SQL statement:
select this_.id as id3_1_, this_.version as version3_1_, this_.batch_id as batch3_3_1_, this_.batch_iteration as batch4_3_1_, this_.browser_string as browser5_3_1_, this_.easybresult_id as easybres6_3_1_, this_.failed_scenarios as failed7_3_1_, this_.last_parse_error as last8_3_1_, this_.passed_scenarios as passed9_3_1_, this_.result_parsed_story_status as result10_3_1_, this_.status as status3_1_, this_.story as story3_1_, this_.total_scenarios as total13_3_1_, this_.xml as xml3_1_, storyrunba1_.id as id2_0_, storyrunba1_.version as version2_0_, storyrunba1_.batch_id as batch3_2_0_, storyrunba1_.browsers_string as browsers4_2_0_, storyrunba1_.date_created as date5_2_0_, storyrunba1_.iterations as iterations2_0_, storyrunba1_.site_profile as site7_2_0_, storyrunba1_.stories_string as stories8_2_0_ from story_run this_ inner join story_run_batch storyrunba1_ on this_.batch_id=storyrunba1_.id order by storyrunba1_.date_created desc [42102-164]
        at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
        at org.h2.message.DbException.get(DbException.java:169)
        at org.h2.message.DbException.get(DbException.java:146)
        at org.h2.command.Parser.readTableOrView(Parser.java:4753)
        at org.h2.command.Parser.readTableFilter(Parser.java:1080)
        at org.h2.command.Parser.parseSelectSimpleFromPart(Parser.java:1686)
        at org.h2.command.Parser.parseSelectSimple(Parser.java:1793)
        at org.h2.command.Parser.parseSelectSub(Parser.java:1680)
        at org.h2.command.Parser.parseSelectUnion(Parser.java:1523)
        at org.h2.command.Parser.parseSelect(Parser.java:1511)
        at org.h2.command.Parser.parsePrepared(Parser.java:405)
        at org.h2.command.Parser.parse(Parser.java:279)
        at org.h2.command.Parser.parse(Parser.java:251)
        at org.h2.command.Parser.prepareCommand(Parser.java:217)
        at org.h2.engine.Session.prepareLocal(Session.java:415)
        at org.h2.engine.Session.prepareCommand(Session.java:364)
        at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1121)
        at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:71)
        at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:267)
        at org.apache.commons.dbcp.DelegatingConnection.prepareStatement(DelegatingConnection.java:281)
        at org.apache.commons.dbcp.PoolingDataSource$PoolGuardConnectionWrapper.prepareStatement(PoolingDataSource.java:313)
        at kindlingtests.ResultService.recentStoryRuns(ResultService.groovy:6)
        at kindlingtests.HomeService.results(HomeService.groovy:19)
        at kindlingtests.ModelFields$_closure1.doCall(ModelFields.groovy:13)
        at kindlingtests.ModelFields.<init>(ModelFields.groovy:12)
        at kindlingtests.HomeService.setControllerModelFields(HomeService.groovy:9)
        at kindlingtests.HomeService.setControllerModelFields(HomeService.groovy:8)
        at kindlingtests.HomeController.index(HomeController.groovy:14)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:680) 
```

[编辑]

根据要求，我的 DataSource.groovy：

```
dataSource {
    pooled = true
    driverClassName = "org.h2.Driver"
    username = "sa"
    password = ""
}
hibernate {
    cache.use_second_level_cache = true
    cache.use_query_cache = true
    cache.region.factory_class = 'net.sf.ehcache.hibernate.EhCacheRegionFactory'
}
// environment specific settings
environments {
    development {
        dataSource {
            dbCreate = "create-drop" // one of 'create', 'create-drop', 'update', 'validate', ''
            url = "jdbc:h2:mem:devDb;MVCC=TRUE"
        }
    }
    test {
        dataSource {
            dbCreate = "update"
            url = "jdbc:h2:mem:testDb;MVCC=TRUE"
        }
    }
    production {
        dataSource {
            dbCreate = "update"
            url = "jdbc:h2:mem:prodDb;MVCC=TRUE"
            pooled = true
            properties {
               maxActive = -1
               minEvictableIdleTimeMillis=1800000
               timeBetweenEvictionRunsMillis=1800000
               numTestsPerEvictionRun=3
               testOnBorrow=true
               testWhileIdle=true
               testOnReturn=true
               validationQuery="SELECT 1"
            }
        }
    }
} 
```

# .net - 为什么 SQL Compact 3.5 SP2 程序集标有 AssemblyVersion 3.5.1.0？

> ID：12785334
> 
> 赞同：0
> 
> 时间：2012-10-08T16:05:25.247
> 
> 标签：.net, sql-server-ce, .net-assembly, servicepacks, assemblyversionattribute

将 SQL Compact 3.5 SP1 升级到 3.5 SP2 后，我注意到程序集版本是相同的：

```
....
AssemblyVersion("3.5.1.0")]
....
SatelliteContractVersion("3.5.1.0")]
.... 
```

乍一看，唯一的区别是修改日期（SP1 为 2008 年 6 月，SP2 为 2010 年 2 月）。

为什么微软不会用 3.5.2.0 汇编版本标记 SP2？

我应该如何使用 SP2 重建项目，以便在运行我的应用程序的设备池上**需要更新版本的 SQLCE 3.5 SP2？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:59:23.043

表示程序集的`AssemblyVersion`接口。对于纯粹的缺陷修复，预计（通常）不会改变。

在这种情况下，文件（可能还有产品）版本会改变：接口没有改变，但这是更新的。

# android - 如何在活动中添加活动？

> ID：12785335
> 
> 赞同：0
> 
> 时间：2012-10-08T16:05:25.197
> 
> 标签：android, android-layout

![在此处输入图像描述](../Images/035d48578e8865db14f19e97039285ba.png)

我正在尝试为nexus 7制作一个应用程序。单击按钮时如何在红色区域显示多个活动？Btn_A 调用活动 A Btn_B 调用活动 B Btn_C 调用活动 C Btn_D 调用活动 D 我真的需要一个例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T16:07:41.120

在这种情况下，您应该使用[片段。](http://developer.android.com/guide/components/fragments.html)

[您可以在API 演示](http://developer.android.com/tools/samples/index.html)中找到一些有用的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T06:14:27.180

选项卡活动是该场景的最佳选择。请阅读以下链接以了解标签活动。

[http://www.androidhive.info/2011/08/android-tab-layout-tutorial/](http://www.androidhive.info/2011/08/android-tab-layout-tutorial/)

# c++ - 使用 MSVC 将 C 源文件编译为 C++

> ID：12785346
> 
> 赞同：1
> 
> 时间：2012-10-08T16:06:05.587
> 
> 标签：c++, visual-c++, compilation

我正在做 C++ 项目。由于一些错误，我建议设置`Properties`> `C/C++`> `Advanced`>`Compile As` **并检查** `Compile as C++ Code(/TP)`.

我的项目包括扩展名为“C”的iniparser.c。我想知道的是我的新设置（C++）是否会影响我的项目的编译，因为它包含一个 .c 文件（iniparser.c）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:14:23.073

您的问题似乎与此问题可能重复：

[使用 C++ 编译器编译 C 代码会出现什么问题？](https://stackoverflow.com/questions/861517/what-issues-can-i-expect-compiling-c-code-with-a-c-compiler)

在不了解问题细节的情况下，使用 C++ 编译器编译 C 代码时必须考虑许多问题。有关详细信息，请参阅此链接：http: [//david.tribble.com/text/cdiffs.htm](http://david.tribble.com/text/cdiffs.htm)

# javascript - 如何在没有提交事件的情况下显示 setCustomValidity 消息/工具提示

> ID：12785347
> 
> 赞同：37
> 
> 时间：2012-10-08T16:06:11.277
> 
> 标签：javascript, forms, html, validation, tooltip

我正在使用表单基本验证来检查电子邮件的格式是否正确，然后由 Ajax 发送数据，并在其中检查电子邮件地址是否已在使用中，以及用户是否选择了国家/州或在选择框中保留了默认值。

但是要完成 HTML5 表单验证，需要提交事件，如果它通过了基本表单验证，则单击提交时会执行 Ajax 操作，但是当结果出现时，我想使用相同的浏览器工具提示来实现界面一致性（而且我就像他们的样子）。

那么有没有办法让它们出现，我无法找到它们是否有一些特殊事件或类似触发提交事件但立即停止它的东西。现在该字段只有一个红色边缘，并且在将鼠标悬停在它上面时会出现错误消息，而工具提示会在再次单击提交按钮时显示。

同样对于没有本机工具提示的浏览器（在我的情况下是 Safari），我使用的是 Webshims Lib，它的作用与 Chrome 和 Firefox 中的完全相同。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2014-01-30T13:39:40.763

我认为`.checkValidity()`可以解决问题，但它不会触发 UI。（[犬](https://caniuse.com/#search=checkValidity)）

这听起来像[`.reportValidity()`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/reportValidity)你想要的。（[犬](https://caniuse.com/#search=reportValidity)）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-13T18:22:59.740

您可以在此链接中找到答案：[如何在不通过 jQuery 提交的情况下强制进行 html5 表单验证](https://stackoverflow.com/questions/11866910/how-to-force-a-html5-form-validation-without-submitting-it-via-javascript-jquery)

基本上，您会找到一个提交按钮并单击它：

```
// force form validation
document.getElementById("submitbutton").click() 
```

您还可以在检查电子邮件地址是否正在使用后更改验证消息，然后如上所述强制表单验证：

```
document.getElementById("email").setCustomValidity("This email is already registered!");
document.getElementById("submitbutton").click() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-03T11:14:53.820

它实际上非常简单——在表单中添加一个隐藏的输入元素：

```
<input type="hidden" id="myFormCheck" required="true" value=""/> 
```

调用`myInputField.setCustomValidity(message)`您要在其上创建自定义工具提示的输入元素，然后调用您的`form.click();`

表单有效性过程运行并在该元素上显示消息弹出窗口，但由于隐藏元素，表单不会提交，因此您无需捕获和取消提交事件。

当您完成并真正准备好时，在隐藏元素上设置一个值，表单将正常提交。

通过这种方式，您可以使用表单工具提示来检查可用的用户名，或通过 HTTP 请求匹配任何值等。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-10-31T19:21:03.750

用于`HTMLFormElement.reportValidity()`.
用 IE11 和 Edge 测试。但是当使用 IE11 在下面的 StackOverflow 沙箱中运行时，不会显示验证消息。

```
function reportValidityPolyfill() {
  const button = createInvisibleSubmitButton();
  this.appendChild(button);
  this.addEventListener("submit", submitEventHandler);
  var isValid = false;
  button.click();
  this.removeEventListener("submit", submitEventHandler);
  this.removeChild(button);
  return isValid;

  function createInvisibleSubmitButton() {
    const button = document.createElement("button");
    button.type = "submit";
    button.style.display = "none";
    return button;
  }

  function submitEventHandler(event) {
    event.preventDefault();
    isValid = true;
  }
}

if (!HTMLFormElement.prototype.reportValidity) {
  HTMLFormElement.prototype.reportValidity = reportValidityPolyfill;
  console.log("ReportValidity polyfill installed.");
} else {
  console.log("ReportValidity polyfill skipped.");
}
```

```
input {
  outline: 1px solid #0f0;
}

input:invalid {
  outline: 1px solid #f00;
}
```

```
<form id="form1">
  Enter a number from 1 to 5: <input type="number" min="1" max="5" required>
</form>
<br>
<div onclick="console.log('Validity: ' + document.getElementById('form1').reportValidity())">
  Click here to call reportValidity()
</div>
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-06-15T09:43:35.580

正如大多数人所说，您必须使用`input.setCustomValidity("message")`.

这里的问题是您无法在`submit`事件中检查该验证，因为您需要进行 ajax 调用然后`setCustomValidity`异步设置。

所以基本上你必须使用`change`输入字段的事件并对每次更改进行 ajax 调用。或者删除提交按钮并使用`click`普通按钮的事件，检查ajax调用中的唯一电子邮件，然后通过javascript调用提交。

查看使用 jQuery 的最后一个选项的示例：

```
<form action="/sign-in" id="form">
    <input type="email" id="email" required/>
    <button id="submit">Submit</button>
</form> 
```

```
// we capture the click instead the submit
$("#submit").on("click",function(){
    var $elem = $("#email");
    var email = $elem.val();

    //the ajax call returns true if the email exists
    $.get( "ajax/checkUniqueEmail", function(data) {
        if(data === "true"){
            $elem.setCustomValidity("This email already exists.");
        }else{
            $elem.setCustomValidity("")
        }
        //then we submit the form
        $("#form").submit();
    });
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-19T10:16:35.493

签出此链接（[在 HTML 5 页面中使用 setCustomValidity 提供自定义验证消息](http://sanalksankar.blogspot.sg/2010/12/custom-validation-message.html)）。

在上面的链接中，他使用“输入”类型是数字，并且在输入上他调用了验证函数。让我知道这就是你要找的东西。

```
<input type="number" required="true" value="50" min="18" max="60" step="1" oninput="validate(this)"> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-08-28T18:00:05.903

[这是一个很好的实时示例](https://codepen.io/anon/pen/oeaqWY)，可以自定义验证/提供对表单输入的反馈。

基本的 javascript 看起来像：

```
function checkPasscode() {
    var passcode_input = document.querySelector("#passcode");

    if (passcode_input.value != "Ivy") {
        passcode_input.setCustomValidity("Wrong. It's 'Ivy'.");
    } else {
        passcode_input.setCustomValidity(""); // be sure to leave this empty!
        alert("Correct!");
    }
} 
```

HTML：

```
<form>
    <label for="passcode">Enter Passcode:</label>
    <input id="passcode" 
           type="password" 
           placeholder="Your passcode" 
           oninput="checkPasscode();"
           required/>
    <button type="submit">Submit</button>
</form> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-15T08:12:35.670

如果条件为 false，您可以将 setCustomValidity 与元素一起使用（您可以在任何事件处理程序中执行此操作，例如 keypress 或 click ）。如果输入无效，请提交。这将触发浏览器的消息工具提示。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-07T10:29:20.527

setCustomValidity() 可以解决我的更改密码，确认密码输入。

但问题是当我们设置 setCustomValidity('Passwords do not match) 时，它并不清楚附加到表单提交事件。

我刚刚在密码确认输入按键事件中将 setCustomValidity('') 添加到空白。

这个对我有用。

```
 $(document).ready(function() {
            const confirm = document.querySelector('input[name=password2]');
            $('#pass2').on('keyup', function(){
                confirm.setCustomValidity('');
            })
            $("#reset-pw-form").on('submit', function(e) {
                e.preventDefault();
                if($('#pass1').val() != $('#pass2').val())  {
                    confirm.setCustomValidity('Passwords do not match');
                    confirm.reportValidity();
                    return false;
                } 
```

}

# javascript - 如何在其回调范围之外获取 indexedDb 请求的结果

> ID：12785350
> 
> 赞同：4
> 
> 时间：2012-10-08T16:06:21.667
> 
> 标签：javascript, html, indexeddb

我有一个带有输入框的表单，我想使用 IndexedDb objectStore 中的值自动完成，这适用于两个过度定位的输入框。我对一个简单的数组工作得很好，但我想让它与来自 objectStore 的值一起工作。为此，我必须将可用的值从事务中取出，以便我可以在自动完成功能中循环它们。

1-如何将事务中的结果转换为其余代码中可用的对象？

2- 我的循环语法是否可以“results.value.name.length”（名称是我的 objectStore 索引）与结果对象一起使用？

通过游标获取 IndexedDb 对象：

```
var results = [];

var openDbRequest = indexedDB.open(DB_NAME);

openDbRequest.onsuccess = function (e) {
    var db = e.target.result;
    var tran2 = db.transaction("store");
    tran2.objectStore("store").openCursor().onsuccess = function(e) {
        var cursor = e.target.result;
        if (cursor) {
            results = cursor;
            cursor.continue();  
        };
    };                                      
}; 
```

自动完成功能

```
var auto = "";
var auto_disp = "";

function getName(results) {
    var input = document.forms['myform'].name.value;
    var len = input.length;
    if (input.length) {
        for (i=0; i<results.value.name.length; i++){            
            if (results.value.name[i].substr(0,len).toLowerCase() == input.toLowerCase()){
                auto_disp = input + results.value.name[i].substr(len);
                auto = results.value.name[i];
                break;
            }
        }
    }
document.forms['myform'].auto_name.value = auto_disp;
}

function setName() {
 document.forms['myform'].name.value = auto;
 hideAuto();
}

function hideAuto() {
 document.forms['myform'].auto_name.value = "";
} 
```

HTML 表单：

```
<div style="position: absolute; top: 0; left: 0; width: 200px; z-index: 1;">
 <input type="text" name="name" style="background-color: #fff; border: 1px solid #999; width: 200px; padding: 2px" disabled />
</div>

<div style="position: absolute; top: 0; left: 0; width: 200px; z-index: 2;">
 <input autocomplete="off" type="text" name="auto_name" style="background: none; color:#39f; border: 1px solid #999; width: 200px; padding: 2px" onfocus="getName()"onkeyup="getName()" onkeydown="if (event.keyCode == 13) {setName();};"/>
</div> 
```

更新：尝试了不同的链接，现在我得到了光标，但循环有问题，我没有得到自动完成。

```
openDbRequest.onsuccess = function (e) {
    var db = e.target.result;

    var tran2 = db.transaction("store");
    tran2.objectStore("store").openCursor().onsuccess = function(e) {

        var cursor = e.target.result;
        if (cursor) { 
            var input = document.forms['myform'].country.value; //the inputted value
            var len = input.length;
            if (input.length) {
                for (i=0; i<cursor.length; i++){            
                    if (cursor.value.nome[i].substr(0,len).toLowerCase() == input.toLowerCase()){
                        auto_disp = input + cursor.value.nome[i].substr(len);
                        auto = cursor.value.nome[i];
                        break;                              
                    }
                }   
            }
            document.forms['myform'].auto_name.value = auto_disp;
            cursor.continue();  
        }   
    };
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T05:14:47.263

如果您想在事务范围之外使用它，只需将其添加到变量中即可

```
var results = [];
var openDbRequest = indexedDB.open(DB_NAME);
openDbRequest.onsuccess = function (e) {
    var db = e.target.result;
    var tran2 = db.transaction("store");
    tran2.objectStore("store").openCursor().onsuccess = function(e) {
         var cursor = e.target.result;
         if (cursor) {
              results.push(cursor.value) 
              cursor.continue();
         };
    };
}; 
```

在此之后，您将遍历结果对象，一旦检索到所有数据，事务范围将关闭。

# objective-c - 客观 c 类类型检查

> ID：12785357
> 
> 赞同：1
> 
> 时间：2012-10-08T16:06:46.833
> 
> 标签：objective-c, class

我使用 MagicalRecord（这是 NSManagedObject 的一个类别）来获取我的模型。然后我使用通用表视图控制器显示它们，该控制器根据类名显示我的数据。

问题是，当我想获取这些数据时，我使用这样的东西：

```
Class type = NSClassFromString(modelName);
NSArray *model = [type MR_findAll]; 
```

这个编译和运行完美，除了 xcode 显示一个讨厌的错误：“不知道 MR_findALL 的类方法”。

我可以对 NSManagedObject 执行类似“Class cast”的操作，这样错误就会消失吗？我想让它保持动态，我不想为我的所有模型定义一个条件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T03:07:46.250

问题不在于静态类型检查。`Class`，如`id`，禁用静态类型检查。

问题出在别的地方：在 Objective-C 中，为了使用`[... ...]`语法发送消息，编译器必须首先在*某处*看到这种方法的声明。编译器需要声明的原因是编译器必须在后台编译消息调度到 a`objc_msgSend`或调用。`objc_msgSend_stret`哪一个取决于方法的返回类型。因此，它必须知道方法的类型（来自声明）才能编译对它的调用。

请注意，我说的是“某处”，因为“某处”可能与您使用它的位置完全无关。您可以声明一个虚拟协议，其中包含同一消息的声明，该协议*从未在任何地方使用过*，它将达到声明的目的。或者您可以声明一个包含它的类别。任何。这对你来说可能看起来相当不可思议。但是，如果您将@HotLicks 的解决方案与协议一起使用，并删除演员表，它仍然不会有警告，因为是否使用协议并不重要——这是与此处相关的声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:53:12.490

定义一个包含`MR_findAll`. 在进行调用之前将您的对象转换为该协议。

`[(id<FindAllProtocol>)type MR_findAll]`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-08T16:16:19.323

尝试将您的类型变量转换为 id，这是一种动态类型。

# c++ - 用于优化 QtCreator 编译器的配置

> ID：12785364
> 
> 赞同：15
> 
> 时间：2012-10-08T16:07:03.873
> 
> 标签：c++, qt, g++, qt-creator, compiler-optimization

我在 Windows 7 中使用 QtCreator。

我想将其配置为使用`-O3`c++ 编译器的第三级优化 ()。

我怎样才能这样做以加快我的代码速度以及需要进行哪些更改？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-12T22:30:27.007

尝试将下一行添加到您的 .pro 文件中：

```
# remove possible other optimization flags
QMAKE_CXXFLAGS_RELEASE -= -O
QMAKE_CXXFLAGS_RELEASE -= -O1
QMAKE_CXXFLAGS_RELEASE -= -O2 

# add the desired -O3 if not present
QMAKE_CXXFLAGS_RELEASE *= -O3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T16:52:09.840

如果您想要较小的应用程序大小，请将这些行添加到您的 .pro 文件中

`QMAKE_CXXFLAGS += -Os -mpreferred-stack-boundary=2 -finline-small-functions -momit-leaf-frame-pointer`

如果您想要更快的应用程序，请考虑使用 -O2 而不是 -Os

请参阅[此](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)以获取更多选项

# php - 通过 php 和 MySQL 的链接发送 id

> ID：12785372
> 
> 赞同：1
> 
> 时间：2012-10-08T16:07:28.050
> 
> 标签：php, html, mysql

我有一个包含项目的表格，每个项目都有一个供用户删除和恢复它的选项。并且有一个特殊的 php 文件'delete.php'。

```
print "<td>";
if ($row['deleted'] == 'y') {
print "<a href='delete.php?id=2'>Undeleted</a> ";
                     }
if ($row['deleted'] == 'n') {
print "<a href='delete.php?id=1'>Deleted</a> "; //'$_GET['id']'
}
print "</td>" 
```

我的问题是如何获取用户单击的项目的 ID 并将其发送到“delete.php”？所以而不是

```
"<a href='delete.php?**id=2**'>Undeleted</a> "; 
```

应该有类似的东西：

```
 "<a href='delete.php?**$_GET['id']'**'>Undeleted</a> "; 
```

或者

```
 "<a href='delete.php?**<?php $_GET['id'] ?>**'>Undeleted</a> "; 
```

但在第二个示例中，php 中的 php 没有意义。我想我可能只是不知道正确的语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:09:30.950

怎么了

```
echo "<a href='delete.php?id=$_GET[id]'>Undeleted</a>"; 
```

?

或者，用更现代的术语来说：

```
echo <<<EOL
<a href="delete.php?id={$_GET['id']}">Undeleted</a>
EOL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:11:02.613

如果您只想将 id 发送到 delete.php，只需保持您的 HTML 部分原样：

```
print "<td>";
if ($row['deleted'] == 'y') {
   print "<a href='delete.php?id=2'>Undeleted</a> ";
                 }
if ($row['deleted'] == 'n') {
   print "<a href='delete.php?id=1'>Deleted</a> "; //'$_GET['id']'
}
print "</td>" 
```

在 delete.php 中，访问 id 为：

```
 $id = $_GET['id'] 
```

如果您想告诉 delete.php 是删除还是恢复该项目，您可能需要向 URL 添加另一个参数，例如 delete.php?id=1&action=d 或 delete.php?id=1&action=u

现在，如果您的 id 来自上述文件的 GET 参数，例如 file.php?id=1，您将必须像访问它 -

```
print "<a href='delete.php?id={$_GET[id]}'>Undeleted</a> "; 
```

确保在查询中使用此 id 值之前对其进行清理和转义。

# c# - 显示 WPF 控件而不是 MessageBox

> ID：12785373
> 
> 赞同：0
> 
> 时间：2012-10-08T16:07:34.663
> 
> 标签：c#, wpf, winforms

我为 WinForm 创建了一个模式，当用户单击“保存”按钮时会显示该模式。我不想显示 MessageBox，而是想知道是否可以合并我创建的 WPF 控件？这是我的代码。

```
Form frmModal = new Form();
frmModal.BackColor = Color.Black;
frmModal.WindowState = FormWindowState.Maximized;
frmModal.FormBorderStyle = System.Windows.Forms.FormBorderStyle.None;
frmModal.Opacity = 0.6;
frmModal.Show(); //--> want to replace with WPF control
MessageBox.Show("Hello");
frmModal.Close();
frmModal.Dispose(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:11:14.597

是的，您需要打开一个新的表单窗口，该窗口使用 winform [ElementHost 控件](http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.elementhost.aspx)来显示 WPF 控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:55:26.027

是的，您可以使用自定义的 WPF 控件代替 MessageBox，您可以通过参考这篇 CodeProject 文章了解如何做到这一点以了解详细信息：[A Customizable WPF MessageBox](http://www.codeproject.com/Articles/201894/A-Customizable-WPF-MessageBox)

希望这是您正在寻找的。

# ios - 如何让 Xcode Iphone Simulator 将 SQLite 数据库保存到本地文件？

> ID：12785374
> 
> 赞同：3
> 
> 时间：2012-10-08T16:07:37.230
> 
> 标签：ios, xcode, cordova, ios-simulator

我正在使用 CSS、HTML、Javascript 和 PhoneGap 构建我的第一个 iPhone 应用程序。我想使用 SQLite 作为数据库，所以我使用以下教程作为灵感：

[http://coenraets.org/blog/2011/10/sample-app-using-the-phonegap-database-api/](http://coenraets.org/blog/2011/10/sample-app-using-the-phonegap-database-api/)

以下代码确定天气以使用数据库中的数据，或者先用数据填充数据库：

```
function onDeviceReady() {

    db = window.openDatabase("EmployeeDirectoryDB", "1.0", "PhoneGap Demo", 200000);
    if (dbCreated)
        db.transaction(getEmployees, transaction_error);
    else
        db.transaction(populateDB, transaction_error, populateDB_success);
} 
```

经过调试，我发现每次运行应用程序时，它都会填充数据库，所以

```
if (dbCreated) 
```

从不执行。

我想看看 SQLlite 文件，所以我使用 SQLite 数据库浏览器来定位它，但没有运气。从以下问题：

[如何查看在 iphone 应用程序中运行的 sqlite 文件中的数据？](https://stackoverflow.com/questions/4644158/how-to-view-the-data-in-sqlite-fle-running-in-iphone-application/4644189#4644189)

我可以看到该文件应该位于此文件夹中的某个位置：

```
user/Library/Application Support/iPhone Simulator/ 
```

但该`iPhone Simulator`文件夹不存在。

如何让模拟器将数据库保存到本地文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T16:20:25.003

每次在模拟器上运行应用程序时，它都会在 iphone 模拟器文件夹中创建一个文件夹。确保您的 Library 文件夹可见并且您使用的是正确的路径。

要使库文件夹可见，您可以在终端上运行以下命令：

> chflags nohidden ~/库

这是我的 iphone 模拟器文件夹用作参考的路径：

/用户/alexandreoliveira/图书馆/应用程序支持/iPhone模拟器

另一件需要注意的事情，通常 sqlite 数据库保存在文档文件夹中：

> 用户/alexandreoliveira/Library/Application Support/iPhone Simulator/5.1/Applications/some-weird-numbers/Documents/

# javascript - 根据索引数组从对象中提取特定的 javascript 值

> ID：12785377
> 
> 赞同：8
> 
> 时间：2012-10-08T16:07:41.197
> 
> 标签：javascript, underscore.js

给定一个像这样的嵌套对象：

```
var cars = {
    "bentley": {
        "suppliers": [
            {
            "location": "England",
            "name": "Sheffield Mines"}
        ]
        // ...
    }
}; 
```

和这样的数组`["bentley", "suppliers", "0", "name"]`，是否有一个现有的函数可以采摘最深的元素，即`pluck_innards(cars, ['bentley', "suppliers", "0", "name"])`返回“谢菲尔德矿山”。

换句话说，是否有一个函数（我将命名`deep_pluck`）

```
deep_pluck(cars, ['bentley', 'suppliers', '0', 'name']) 
         === cars['bentley']['suppliers']['0']['name'] 
```

在我看来，这很简单，但很常见，可能已经在 J​​avascript 实用程序库之一中完成，例如[jQuery](http://jquery.com/)或[lo-dash](http://lodash.com/) /underscore - 但我还没有看到它。

我的想法是微不足道的，大致如下：

```
function deep_pluck(array, identities) {
    var this_id = identities.shift();
    if (identities.length > 0) {
        return deep_pluck(array[this_id], identities);
    }
    return array[this_id];
} 
```

我已经[在 jsFiddle 上](http://jsfiddle.net/bmh_ca/VF2ja/)发布了。

如果该函数足够聪明，可以识别何时需要数组中的数字索引，那当然会有所帮助。我不确定还有哪些其他警告可能是一个问题。

对于我认为已经巧妙解决的问题，这是一个相当长的问题，但我想发布这个，因为我想看看有什么解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:20:46.300

如果您将数组索引作为 number 传递，我认为您不会遇到问题`0`。

这是您的函数的替代版本，没有递归：

```
function deep_pluck(object, identities) {
    var result = object;
    for(var i = 0; i < identities.length; i++) {
        result = result[identities[i]];
    }
    return result;
} 
```

这里的工作示例：http: [//jsfiddle.net/AmH2w/1/](http://jsfiddle.net/AmH2w/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T02:23:46.617

虽然不是一个通用库，但[CasperJS](http://casperjs.org/)似乎具有这种[`utils.getPropertyPath`](http://casperjs.org/api.html#utils.getPropertyPath)功能。

```
/**
 * Retrieves the value of an Object foreign property using a dot-separated
 * path string.
 *
 * Beware, this function doesn't handle object key names containing a dot.
 *
 * @param  Object  obj   The source object
 * @param  String  path  Dot separated path, eg. "x.y.z"
 */
function getPropertyPath(obj, path) {
    if (!isObject(obj) || !isString(path)) {
        return undefined;
    }
    var value = obj;
    path.split('.').forEach(function(property) {
        if (typeof value === "object" && property in value) {
            value = value[property];
        } else {
            value = undefined;
        }
    });
    return value;
} 
```

### 编辑：

从那以后，我遇到了几次解决这个问题的实现，包括：

1.  Ben Alman的[getObject](http://benalman.com/projects/jquery-getobject-plugin/)插件（在[Github](https://github.com/cowboy/jquery-getobject)上）。
2.  我滚动的一个 - 见[要点](https://gist.github.com/brianmhunt/5512916)

### 编辑 (2014)

我还要注意相对较新的[`lodash.deep`](https://github.com/marklagendijk/lodash.deep).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-19T15:21:08.763

dotty.get(obj, pathspec) 执行此操作，接受数组或点分字符串作为路径规范。

[Dotty](https://github.com/deoxxa/dotty)是开源的，也有一个 exists 方法和一个 putter。

该方法是递归的，与您的想法非常相似，除了 dotty 包含对 null/undefined 对象的测试，因此它不会在尝试访问不存在的元素时抛出异常。

来自文档的[dotty.get() 源](http://deoxxa.github.io/dotty/docs/)发布在下面：

```
var get = module.exports.get = function get(object, path) {
  if (typeof path === "string") {
    path = path.split(".");
  }

  if (!(path instanceof Array) || path.length === 0) {
    return;
  }

  path = path.slice();

  var key = path.shift();

  if (typeof object !== "object" || object === null) {
    return;
  }

  if (path.length === 0) {
    return object[key];
  }

  if (path.length) {
    return get(object[key], path);
  }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-14T12:21:42.380

这是一个简短的 ES6 实现，使用`reduce`：

```
function get(obj, keyPath) {
    return keyPath
        .split(".")
        .reduce((prev, curr) => prev[curr], obj);
} 
```

用法：

```
get(cars, "bentley.suppliers.0.name") // -> "Sheffield Mines" 
```

# jquery - 如果小于，Jquery 高度会自动检测并更改

> ID：12785380
> 
> 赞同：0
> 
> 时间：2012-10-08T16:08:00.027
> 
> 标签：jquery, height, document

我已经编写了以下 jquery 来更改高度，`#dash-nav`如果它小于`#dash-content-wrap`. 它用于仪表板上的基本垂直导航。

```
if ($('#dash-nav').height() < $('#dash-content-wrap').height()) {
    $("#dash-nav").height( $("#dash-content-wrap").height() );
} 
```

该代码在[jsFiddle中](http://jsfiddle.net/ycvNd/4/)*完全*按预期工作，**但**在我的实时站点上没有。

 *我尝试使用以下两种方法加载脚本，但都没有任何区别：

*   `(window).load`
*   `(document).ready`

*任何想法和帮助，非常感谢！谢谢*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:21:46.197

您的 jsfiddle 链接要求输入用户名和密码（基本身份验证）。`$(document).ready(function(){...})`应该可以正常工作，因为它仅在 DOM 元素完全加载后才会触发

请让你的css类是正确的。我的猜测是，如果你可能有 float:left inside `dash-nav`，高度可能不会给出正确的值。你可以试试看能否`clear:both`解决问题。这只是我的猜测。

也尝试这样做：

```
window.setTimeout(function(){
    components();
},1000); 
```

在里面`$(document).ready()`给出1000毫秒的延迟。

以上代码仅用于调试目的。您不应该使用它，而是尝试解决*真正的*问题，但它至少应该让您知道问题是不是加载`dash-nav`或其他问题。

**编辑：**为了澄清我在说什么，请参阅这个 jsfiddle 链接：http: [//jsfiddle.net/kfdbz/3/](http://jsfiddle.net/kfdbz/3/)

除非你取消注释：`<div style="clear:both"></div>`你会得到一个高度`0`*

# javascript - 带有颜色插件过渡的jQuery .animate（）在Firefox中闪烁

> ID：12785382
> 
> 赞同：2
> 
> 时间：2012-10-08T16:08:26.563
> 
> 标签：javascript, jquery, firefox, colors, flicker

我正在尝试创建一个菜单，该菜单在单击项目时会将链接更改为文本（从所选项目中删除超链接功能）并将颜色从“常规链接”平滑地更改为“选定”颜色。我的代码在任何地方都可以使用，除了较新版本的 Firefox。FF 导致过渡闪烁。

我的菜单是在页面加载时动态创建的。一个名为“createInitial()”的函数负责此操作：

```
 function createInitial(){

        // BLA-BLA-BLA SOME CODE

        //construct menu
        for(i=0; i<pages.length; i++){ //for every item of pages[] array
            $dashLink = $("<a>");
            $dashLink.html(pages[i].title);
            $dashLink.attr("href", "javascript:void(0)");
            $dashLink.attr("id", "dashLink" + i); //create a link for a particular page (with matching ID field)
            $dashLink.click(menuHandler);

            $dashText = $("<span>");
            $dashText.html(pages[i].title);
            $dashText.attr("id", "dashText" + i); //create a text (to be used instead of a link, while on a page) for a particular page
            $dashText.css("display", "none");

            $("#menu").append("[ ", $dashLink, $dashText, " ] "); //add links and texts to same bracket space in the menu
        }
        //

        //creates default text instead of a link
        $("#dashLink" + currentPage).css("display", "none");
        $("#dashText" + currentPage).css("display", "inline");
        //

        // BLA-BLA-BLA SOME CODE

    } 
```

此功能仅在页面加载时执行一次。之后，函数“changeHeading()”负责改变菜单中的所有项目：

```
 function changeHeader(page){ //change a page
        //stop all previous animation
        $("#heading").stop();
        $("#content").stop()
        $("#menu a").stop(true);
        $("#menu span").stop(true);
        //

        //change current page to new, store current page id
        tempPage = currentPage;
        currentPage = page;
        //

        //record current changing menu items color state
        currentPageLinkTextColor = $("#dashText" + tempPage).css("color"); // starting point for current page menu text item
        nextPageLinkColor = $("#dashLink" + page).css("color"); //starting point for clicked page menu link item
        //

        //show current page menu item as link and start chaging to link color
        $("#dashLink" + tempPage).css("color", currentPageLinkTextColor);
        $("#dashText" + tempPage).hide();
        $("#dashLink" + tempPage).show();
        $("#dashLink" + tempPage).animate({color: linkColor}, transitionTime*2);
        //

        //show next page menu item as text and start changing to text color
        $("#dashText" + page).css("color", nextPageLinkColor);
        $("#dashLink" + page).hide();
        $("#dashText" + page).show();
        $("#dashText" + page).animate({color: linkTextColor}, transitionTime*2);
        //

        $("#menu a").animate({color: linkColor}, transitionTime*2); //change all menu links to link color

        //changes title
        $("#heading").fadeOut(transitionTime, function() { //fade out / fade in title
            $("#heading").html(pages[page].title)
            $("#heading").fadeIn(transitionTime)
        });
        //
    } 
```

这段代码在任何地方都能完美运行（即使在 IE 中），除了较新版本的 Firefox（不确定，但可能只在 Windows 上）。我已经在 Linux Mint 上测试了 Firefox 12，它就像一个魅力。但是，在 Windows 上使用 Firefox 15 进行测试时 - 过渡闪烁严重！我发现了几个线程，人们遇到了类似的问题，但其中大多数对于 FF15 来说太旧了。这是我尝试过的几个链接： - [Firefox 中的 jQuery SlideDown 闪烁](https://stackoverflow.com/questions/2897162/jquery-slidedown-flickering-in-firefox) - [jquery animate (height) 导致 Firefox 中的背景图像闪烁](https://stackoverflow.com/questions/2183508/jquery-animate-height-causes-background-image-flickering-in-firefox) - [http://voidcast.wordpress.com/2011/03/29/jquery-flicker-问题-on-firefox-with-fadeout-and-fadein/](http://voidcast.wordpress.com/2011/03/29/jquery-flicker-problem-on-firefox-with-fadeout-and-fadein/)

没有任何帮助......不幸的是。有谁知道可能是什么问题？谢谢！

# javascript - AngularJS 资源未设置 Content-Type

> ID：12785386
> 
> 赞同：6
> 
> 时间：2012-10-08T16:08:41.367
> 
> 标签：javascript, angularjs

我正在尝试编写一个 AngularJS 资源模块，它将一些数据发布到服务器。默认内容类型似乎是“application/xml”。我正在尝试将内容类型覆盖为“application/x-www-form-urlencoded”。当做一个正常的 $http.post() 我可以设置内容类型，当我签入 Firebug 时，我可以看到它设置正确。当我使用资源的 POST 方法时，我无法更改默认的内容类型。我认为我是按照[文档](http://docs.angularjs.org/api/ngResource.%24resource)描述的方式来做的。

[http://jsfiddle.net/vBsUH/3/](http://jsfiddle.net/vBsUH/3/)

```
var myApp = angular.module('myApp',['myResource']);

angular.module('myResource', ['ngResource']).factory('myResource', function($resource){
   return $resource('/echo/json',{},{
      add:{ method:'POST', params:{ foo:'1' }, headers:{'Content-Type':'application/x-www-form-urlencoded'} }
   });
});

function MyCtrl($scope,$http,myResource) {
   $scope.click = function() {

      //This will make an ajax call with a content-type of application/xml    
      myResource.add();

      //this will make an ajax call with a content-type of application/x-www-form-urlencoded
      $http.post('/echo/json','foo=1',{'headers':{'Content-Type':'application/x-www-form-urlencoded'}});

   }
}​ 
```

任何关于如何让 AngularJS 资源以不同的内容类型发布的想法或示例将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T05:48:22.220

杰克，昨天我为类似的问题提供了一些信息：[https ://stackoverflow.com/a/12876784/1367284](https://stackoverflow.com/a/12876784/1367284)

在下面粘贴该响应：

虽然开发文档（截至 10 月 12 日）表明可以在 $resource 中覆盖标头，但它尚未发布（v1.0.2 或 v1.1.0）。但是，该功能位于 v1.0.x 和 master 分支中。为了获得该功能，您现在可以考虑从 v1.0.x 分支构建。

如何构建：[http ://docs.angularjs.org/#H1_4](http://docs.angularjs.org/#H1_4)

或者，您可以从快照构建中提取： http: [//code.angularjs.org/snapshot/](http://code.angularjs.org/snapshot/)

看起来这个功能将在下一个版本中。

# jsf-2 - 编辑器和就地问题

> ID：12785393
> 
> 赞同：0
> 
> 时间：2012-10-08T16:09:04.083
> 
> 标签：jsf-2, primefaces

我对编辑器（即富文本编辑器）就地存在问题。

1.  当用户使用编辑器（富文本编辑器）存储 html 文本时，文本会在就地标签中进行转义。如何在就地将转义设置为 false，以便它不会转义 html。这首先是富文本编辑器的重点。

2.  第二个问题是当我尝试保存编辑器时。下次点击就地标签时，编辑器（富文本编辑器）消失了。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:26:33.553

1.  [富文本编辑器](http://en.wikipedia.org/wiki/Online_rich-text_editor)的重点是它为用户提供了简单的工具来格式化他们的文本，而无需*直接*标记。这就是您的标记被转义的原因。您需要的组件是[primefaces](http://fractalsoft.net/primeext-showcase-mojarra/views/codeMirror.jsf) -extensions 中的 codeMirror，它是一个用于 javascript、html 等的简单代码编辑器界面。

2.  我能够重现这种行为。您应该查看[primefaces 错误跟踪器](http://code.google.com/p/primefaces/issues/list)并报告此问题。

# actionscript-3 - Actionscript 获取多个 HGroup 中控件的值

> ID：12785394
> 
> 赞同：0
> 
> 时间：2012-10-08T16:09:06.377
> 
> 标签：actionscript-3

我有一个灵活的移动应用程序，它基于问题列表生成一组控件，具体取决于所需的响应类型，这是输入表单。

结构是

```
Group
-----Hgroup
-----------Question1, CheckBox, TextInput
-----Hgroup
-----------Question2, CheckBox, TextInput
-----Hgroup
-----------Question3, CheckBox, TextInput
-----Hgroup
-----------Question4, CheckBox, TextInput
end group 
```

如何遍历 Actionscript 中的组，进入 HGroup 并返回该示例中的复选框和 textInput 的值？

我有很多例子说明如何确定容器中的控件类型，而不是如何检索值。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:14:13.573

要循环和类型检查，请使用：

```
for (var i:int; i < hGroup.numElements; i++) {
    var child:DisplayObject = hGroup.getElementAt(i);

    if (child is TextInput) {
        var textInput:TextInput = child as TextInput;
        // do your stuff
    }
    else if (child is CheckBox) {
        var checkBox:CheckBox = child as CheckBox;
        // do your stuff
    }
} 
```

# double - CPU中的openCL双精度

> ID：12785395
> 
> 赞同：1
> 
> 时间：2012-10-08T16:09:09.027
> 
> 标签：double, opencl, cpu

您好，所以我在 GPU 上以双精度运行了几个 openCL 内核，定义如下：

```
#ifndef GPU_AMD
#pragma OPENCL EXTENSION cl_khr_fp64: enable
#else
#pragma OPENCL EXTENSION cl_amd_fp64 : enable
#endif 
```

现在我想以双精度但在 CPU 上运行相同的 openCL 内核，我想知道我是否需要像上面这样的扩展？还是在 cpu 中使用 double 之前我必须启用另一个 openCL 扩展？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:50:22.733

您应该能够使用`cl_khr_fp64`扩展程序。该`cl_amd_fp64`扩展实际上只是`cl_khr_fp64`AMD GPU 扩展的一个子集。

如今，一些 AMD GPU 实际上会支持完整的`cl_khr_fp64`扩展，因此请检查（可能与 CLInfo 一起）看看这是否可能。

有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/9114039/differences-between-cl-khr-fp64-and-cl-amd-fp64)。

# string - 连接文本以形成要在表中使用的列名

> ID：12785400
> 
> 赞同：2
> 
> 时间：2012-10-08T16:09:24.983
> 
> 标签：string, r, histogram

我正在尝试使用循环来创建直方图，其中列名引用由于循环而通过更改列名的字符串而发生变化。我想得到`column1`, `column2`, `column3`,的四个直方图`column4`。（在我的实际示例中，这些列未命名为第 1 列，但我希望它清楚）。

```
For (i in 1:4){
  hist( paste("dataset$column" +i )  , main ="title") 
} 
```

当我尝试使用粘贴时，我得到了`x`必须是数字的错误，但是如果我尝试只使用一个作为检查

```
hist( dataset$column1), main = "title") 
```

它工作正常，所以它不是数据本身。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:19:43.233

您可以使用`apply`

```
set.seed(001)
DF <- data.frame(column1=rnorm(100), 
                 column2=rnorm(100),
                 column3=rnorm(100),
                 column4=rnorm(100))

apply(DF, 2, hist)  # It produces one hist for each column 
```

使用`for`循环

```
for(i in 1:ncol(DF)){
  hist(DF[, paste('column', i, sep='')],
       main=paste('Histogram', i))

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T17:20:05.340

我通常`lapply()`在这些情况下使用。这是一个例子，我也习惯于`gsub()`对名称进行一些修饰。

```
set.seed(001)
DF <- data.frame(Funky.Name.1 = rnorm(100),
                 Funky.Name.2 = rnorm(100),
                 Whoo.Whoo = rnorm(100),
                 Yee.Haw = rnorm(100))
lapply(names(DF), 
       function(x) hist(DF[, x], main = gsub("\\.", " ", x), xlab="Value")) 
```

### 演示

`par(mfrow = c(2, 2))`这样我们就可以在一个按行填充的 2x2 网格中绘制四个图。

```
# par(mfrow = c(2, 2)) # 2x2 layout of all four Histograms
# lapply(names(DF), 
#        function(x) hist(DF[, x], main = gsub("\\.", " ", x), xlab="Value"))
# When you're done: dev.off() 
```

结果：

![在此处输入图像描述](../Images/a3824bfcd136a0b06cbe726f35c2beaa.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T16:14:46.123

1.  我非常怀疑这一点：

    ```
    hist( dataset$column1), main = "title") 
    ```

    工作 - 你有一个额外的支架。

2.  如果你这样做：

    ```
     paste("dataset$column" +i ) 
    ```

    你会得到一个字符串“dataset$column1”等。相反，你需要选择你想要的列：

    ```
     for (i in 1:4) {
        hist(dataset[,i]  , main ="title") 
     } 
    ```

    选择第 1、2、3 和 4 列。

3.  或者你可以有：

    ```
     for (i in 1:4) {
        hist(dataset[[paste0("column",i)]]  , main ="title") 
     } 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T16:45:52.713

`for`函数没有大写。并且 " `+`" 运算符不适用于字符值。而且您不能以您尝试的方式将数字附加到列名“stems”，但您可以计算“”运算符的参数，`[[`这就是“ `$`”运算符的真正含义。这可能取决于“数据集”的列名实际上是什么：

```
for (i in 1:4) {
  hist( dataset[[ paste0("column", i ) ]]  , main ="title") 
} 
```

# ios - 应用商店上的 iOS 应用程序在两天后变得无法使用

> ID：12785402
> 
> 赞同：0
> 
> 时间：2012-10-08T16:09:34.990
> 
> 标签：ios, iphone, debugging

我最近批准在 iTunes 商店销售的一款应用在使用两天后收到反馈，称其完全崩溃。该应用程序按预期工作，并且看似（由于它被接受分发）没有任何明显的错误，这些错误可能会导致 Apple 测试人员可能会发现这种奇怪的行为。基本上在使用几天后，该应用程序以完全黑屏的屏幕启动并且无法使用。

在搜索 Google 时，我似乎找不到任何有关此问题的信息，并且不知道从哪里开始尝试解决此问题。

任何类似问题的想法或链接都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:43:05.843

如果这是一个常见问题，您应该开始在应用程序的 iTunes Connect 中看到崩溃日志，这将是我开始诊断此问题的地方。没有任何类型的崩溃日志或类似数据，我们只能在这里推测原因。——布拉德·拉森

# bash - 使用`tail -f`时文件被截断时清除屏幕

> ID：12785404
> 
> 赞同：10
> 
> 时间：2012-10-08T16:09:43.723
> 
> 标签：bash, tail, gnu-coreutils

我`tail -f`用来打印不断变化的文件的内容。当文件被截断时，它显示如下：

```
blah (old)..
blah more (old)..
tail: file.out: file truncated
blah..
blah more.. 
```

当我过于频繁地更改文件时，这可能会变得混乱，以至于很难看到文件的开始/结束位置。有没有办法在文件被截断时以某种方式`clear`显示屏幕，使其显示为这样？

```
tail: file.out: file truncated
blah..
blah more.. 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-31T22:28:29.703

我知道这是旧的，但另一个（可能更简单）的解决方案是：

`watch -n 1 cat myfile.txt`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-08T16:29:24.603

您可以使用`perl`单线过滤输出`tail -f`

例如

```
tail -f myfile.txt 2>&1 | perl -ne 'if (/file truncated/) {system 'clear'; print} else {print}' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T16:33:52.320

tailf myfile.txt

这是命令 tailf 而不是 tail -f

使用此命令，屏幕上不会返回截断的文件

# c# - 由于WebClient的uploadData不编码数据，那么添加一个“Content-Type”，“multipart/form-data”头会有什么效果

> ID：12785411
> 
> 赞同：5
> 
> 时间：2012-10-08T16:10:12.047
> 
> 标签：c#, http, multipartform-data

C# 的[uploadData](http://msdn.microsoft.com/en-us/library/ms144223.aspx)方法不对正在发送的数据进行编码。因此，如果我使用这种方法发送一个文件（在将其转换为字节之后），并且接收方正在寻找一个`multiform/form-data`帖子，那么它显然不会工作。将添加一个标题，如：

```
WebClient c = new WebClient();
c.Headers.Add("Content-Type", "multipart/form-data"); 
```

让它发送加密为多格式的数据，或者数据仍然没有加密（因此无法被期望多格式数据的服务器解析）？

请注意，我不能使用`WebClient's` `uploadFile`，因为我无权在客户端获取文件路径位置（我只有一个流，可以转换为字节）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T16:31:14.527

`UploadFile`如果您希望 WebClient 安全，为什么不通过 h​​ttps 使用它？这将自动处理添加`multipart/form-data`.

使用示例`UploadFile`

[http://msdn.microsoft.com/en-us/library/36s52zhs.aspx](http://msdn.microsoft.com/en-us/library/36s52zhs.aspx)

还有一件事，编码和加密是两件不同的事情。

**编辑：**

如果您在 WebClient 项目中使用 WebClient，您可能应该将您的问题标记为 Silverlight。无论如何，SL 中的 WebClient 类没有任何 UploadData 方法。有关更多信息，请参见：

[http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.95%29.aspx)

无论如何，这是您问题的有效解决方案：

在您的按钮单击中，有以下代码：

```
OpenFileDialog dialog = new OpenFileDialog();
            bool? retVal = dialog.ShowDialog();
            if (retVal.HasValue && retVal == true)
            {
                using (Stream stream = dialog.File.OpenRead())
                {
                    MemoryStream memoryStream = new MemoryStream();
                    stream.CopyTo(memoryStream);
                    WebClient webClient = new WebClient();
                    webClient.Headers["Content-type"] = "multipart/form-data; boundary=---------------------------" + _boundaryNo;
                    webClient.OpenWriteAsync(new Uri("http://localhost:1463/Home/File", UriKind.Absolute), "POST", new { Stream = memoryStream, FileName = dialog.File.Name });
                    webClient.OpenWriteCompleted += new OpenWriteCompletedEventHandler(webClient_OpenWriteCompleted);
                }
            } 
```

和事件本身：

```
void webClient_OpenWriteCompleted(object sender, OpenWriteCompletedEventArgs e)
        {
            if (e.Error == null)
            {
                Stream responseStream = e.Result as Stream;                
                dynamic obj = e.UserState;
                MemoryStream memoryStream = obj.Stream as MemoryStream;
                string fileName = obj.FileName;
                if (responseStream != null && memoryStream != null)
                {
                    string headerTemplate = string.Format("-----------------------------{0}\r\n", _boundaryNo);

                    memoryStream.Position = 0;
                    byte[] byteArr = memoryStream.ToArray();
                    string data = headerTemplate + string.Format("Content-Disposition: form-data; name=\"pic\"; filename=\"{0}\"\r\nContent-Type: application/octet-stream\r\n\r\n", fileName);
                    byte[] header = Encoding.UTF8.GetBytes(data);
                    responseStream.Write(header, 0, header.Length);

                    responseStream.Write(byteArr, 0, byteArr.Length);
                    header = Encoding.UTF8.GetBytes("\r\n");
                    responseStream.Write(byteArr, 0, byteArr.Length);

                    byte[] trailer = System.Text.Encoding.UTF8.GetBytes(string.Format("-----------------------------{0}--\r\n", _boundaryNo));
                    responseStream.Write(trailer, 0, trailer.Length);                    
                }
                memoryStream.Close();
                responseStream.Close();
            }
        } 
```

其中 _boundaryNo 是`private string _boundaryNo = DateTime.Now.Ticks.ToString("x");`

我让它与 Asp.Net MVC 4 和 Silverlight 5 一起工作。

祝你好运 ：）

# android - 广播接收器未收到意图

> ID：12785412
> 
> 赞同：5
> 
> 时间：2012-10-08T16:10:19.333
> 
> 标签：android, android-intent, broadcastreceiver

我有两个可以完全控制的应用程序。两者都使用相同的证书签名，并且都使用完全相同的意图过滤器。一个从片段发送广播，另一个假设接收它并做某事。然而，这不起作用：

```
Strings.FILTER_INIT_REGISTER = "com.app.FILTER_INIT_REGISTER"

Intent intent = new Intent(Strings.FILTER_INIT_REGISTER);
getActivity().sendBroadcast(intent); 
```

我已经在包含 ReportingReceiver 类的应用程序的清单应用程序标记中注册了接收器：

```
<receiver             
    android:name=".receivers.ReportingReceiver"
    android:exported="true"
    >
        <intent-filter>
            <action android:name="com.app.FILTER_INIT_REGISTER" />
            <category android:name="android.intent.category.DEFAULT" />                
        </intent-filter>
</receiver> 
```

好奇为什么 ReportingReceiver 类没有收到意图调用？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-10T22:34:29.430

如果您的应用程序只有一个服务和接收器，那么这在 Android 3.1 及更高版本中将不起作用。原因是系统不会向处于**STOPPED STATE**的应用程序发送广播 Intent 。应用程序在首次安装时处于**STOPPED 状态。**当用户第一次手动启动应用程序时，它会从**STOPPED 状态中移除。**如果用户强制应用程序停止使用应用程序管理器工具，则返回到**STOPPED 状态。**

由于您的应用程序没有活动，因此用户无法“启动”它。因此它永远不会脱离停止状态。

请参阅[http://developer.android.com/about/versions/android-3.1.html#launchcontrols](http://developer.android.com/about/versions/android-3.1.html#launchcontrols)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-14T12:04:05.803

正如 Android Addict 在他对 David Wasser 回答的评论中所说的那样......有一种方法可以解决这种行为。

只需将以下标志添加到调用意图。这将确保您也可以从“停止”的应用程序中访问广播接收器。

[http://developer.android.com/reference/android/content/Intent.html#FLAG_INCLUDE_STOPPED_PACKAGES](http://developer.android.com/reference/android/content/Intent.html#FLAG_INCLUDE_STOPPED_PACKAGES)

您可以在此处阅读有关此 Android 3.1 更改的更多信息

[http://developer.android.com/about/versions/android-3.1.html#launchcontrols](http://developer.android.com/about/versions/android-3.1.html#launchcontrols)

和这里

[http://code.google.com/p/android/issues/detail?id=18225](http://code.google.com/p/android/issues/detail?id=18225)

# javascript - 单线程 Javascript 中的 AJAX 实现

> ID：12785415
> 
> 赞同：7
> 
> 时间：2012-10-08T16:10:44.730
> 
> 标签：javascript, ajax, multithreading, browser, asynchronous

如果 Javascript 不是多线程的，AJAX 请求如何异步？

实现浏览器是特定的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T16:17:21.073

浏览器执行模型基于“事件循环”的概念。只有一个线程服务于事件（稍微过于简单化）。当事件发生时，将按顺序调用处理程序。

Ajax 只是一种导致某些事件的机制。设置 HTTP 请求是同步的，但只是设置而已。浏览器通过在发生时触发事件来响应表示从服务器返回数据的网络通信。

现代浏览器有些复杂，因为每个窗口可能有自己的进程（或其他一些系统级“线程”结构，一般来说）。此外，新的“网络工作者”功能允许单独的类似线程的隔间同时运行。

# php - PHP 以 0 字节下载

> ID：12785416
> 
> 赞同：0
> 
> 时间：2012-10-08T16:10:45.713
> 
> 标签：php, download

我在比根目录高一级的目录中有 ZIP 文件（以防止盗链等...）。这是代码：

```
<?php
    $filename = $_GET['id'];
    if(!$filename){
        header("Location: index.html");
    } else {
      function send_download($filename){
        $file_path = '../../../../downloads/' . $filename . '.zip';
        $file_size=@filesize($file_path);
        header("Content-Type: application/x-zip-compressed");
        header("Content-disposition: attachment; filename=$filename");
        header("Content-Length: $file_size");
        readfile($file_path);
        exit;
    } 
    send_download($filename);
    }
    ?> 
```

所有 ZIP 文件都很好，但在“a”标签上使用此方法会导致下载文件大小为 0 字节！:(

关于为什么的任何想法？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:39:55.333

是的，经过一番谷歌搜索和一些血汗和泪水，我终于找到了解决方案！

```
<?php 
    $filename = $_GET['id'];
    header('Content-type: application/zip'); 
    header("Content-Disposition: attachment; filename=" . $filename); 
    header("Expires: 0"); 
    header("Cache-Control: must-revalidate, post-check=0, pre-check=0"); 
    readfile('../../downloads/' . $filename . ".zip"); 
    exit;  
?> 
```

非常感谢所有对此有所了解的人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:14:11.313

您可以尝试将其更改`Content-type`为以下内容：

```
Content-type: application/x-zip; 
```

在你这样做之前，检查文件是否存在。

```
<?php
    $filename = $_GET['id'];
    if(!$filename){
        header("Location: index.html");
    } else{
    function send_download($filename){
    $file_path = '../../../../downloads/' . $filename . '.zip';
    if (file_exists($file_path))
    {
    $file_size=@filesize($file_path);
    header("Content-Type: application/x-zip-compressed");
    header("Content-disposition: attachment; filename=$filename");
    header("Content-Length: $file_size");
    readfile($file_path);
    exit;
    } 
    send_download($filename);
    }
    else
    die("Error 404!");
    }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:14:36.240

这是文件大小的代码：

```
<?php 
    $filename = $_GET['id'];
    $file = "../../downloads/" . $filename . ".zip";
    header('Content-type: application/zip'); 
    header("Content-Disposition: attachment; filename=" . $file); 
    header("Expires: 0"); 
    header("Cache-Control: must-revalidate, post-check=0, pre-check=0"); 
    header("Content-length: " . filesize($file));
    readfile($file); 
    //echo filesize($file);
    exit;  
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T16:48:26.803

1.  header("位置：[http://www.fqdn.tld/file.ext](http://www.fqdn.tld/file.ext) ");

2.  基于 _GET["id"] > 0 且不为 null，您创建了一个之后直接使用的函数，因此您只是添加了更多代码行，而无需任何目的。

3.  我看到你已经添加了一个“@”符号，正如人们之前评论的那样，但是，你开始解决这个问题的唯一方法是：

    *   删除 @ 符号，因为你永远不应该使用它，这是非常糟糕的做法，你应该满足代码中的所有异常，它是一个非常好的程序员。（PHP 中的脚本）

    *   错误报告（E_ALL）；

    *   将点 b) 放在它自己的行上，但在 <?php 之后 - 这样我们就可以看到完整的错误列表。

4.  您的代码很好，您遇到的问题是权限，确保 apache 可以访问您的“文件”存储库，您能够检查文件是否存在的事实表明存在轻微权限并且文件存在，即 0 字节是返回建议在 Apache 级别拒绝读取权限。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-24T13:27:04.593

只有一个错误我们都在下面做检查。

> 读取文件（$文件）；//$file 应该是相对的而不是绝对的。而已。

谢谢，

阿尼鲁德·苏德。

# ruby-on-rails - Git 没有跟踪我的一些文件，生产端的旧图像，git status 中没有任何未跟踪的内容

> ID：12785418
> 
> 赞同：0
> 
> 时间：2012-10-08T16:10:50.370
> 
> 标签：ruby-on-rails, deployment, nginx, capistrano

我有一个奇怪的问题，我的 git push origin master 和 cap 部署它没有更新到生产服务器上的最新代码和图像。我仍然有很久以前在本地更新过的旧图像，但更改仍未反映。

*   有没有办法重置远程 git repo 并将本地的最新版本上传到它？

*   或其他调试方式， git status 显示*没有*未跟踪的文件，所以我真的不知道哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:56:10.973

检查你的`.gitignore`文件，你可以在那里忽略这些文件或整个文件夹。

检查文件夹中的`deploy.rb`多阶段部署文件`/deploy`以确保您使用的是正确的分支（主）

当您更新映像、提交、推送到远程时，`cap production deploy:pending`您是否看到您的提交在此处列为待处理部署？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:07:54.943

结果证明这是 cap deploy 的 SSH 超时，我没有注意到。导致并非所有提交都上传，因此看不到我最新提交的更改。必须在服务器上升级 ssh 超时。

# c++ - C++ 变量丢失

> ID：12785424
> 
> 赞同：0
> 
> 时间：2012-10-08T16:11:17.233
> 
> 标签：c++, pointers, mfc, scope

我有一个 CEdit，我想用它来提取数据。

```
wchar_t *temp = (wchar_t*)dialog.editbox.GetBuffer(0);
dialog.editbox.ReleaseBuffer(); 
```

现在我想将此文本保存在这样的对象指针中：

```
selectedShape->setText(temp); 
```

这项工作很完美，但只要你在方法的范围内，因为当我稍后保存文件时，文本不再在对象中。

有谁知道我可以如何保存这个`wchar_t*`以备后用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:22:31.443

正如@Prætorian 所说，您的代码似乎缺少使用`CString`您正在获取缓冲区的类的步骤。

[http://msdn.microsoft.com/en-us/library/aa314880(v=vs.60).aspx](http://msdn.microsoft.com/en-us/library/aa314880(v=vs.60).aspx)

如果可能，请避免使用动态内存解决方案。相反，将您`temp`的值传递为将管理其自己的内存的 CString 对象。常用的 Window`setText`函数采用字符串指针（CString 可以隐式转换为），并将复制底层字符串数据。如果您编写自己的对象，请按值将 CString 对象作为成员。

*（我将在这里添加我通常的“90 年代被称为，他们想要他们的框架回来”免责声明。 [试试 Qt](http://qt.digia.com/product/developer-tools/)。）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:17:31.900

`temp`指针指向超出范围的数据，因此您需要动态分配内存来存储该值。像这样的东西应该工作：

```
// Updated to use wstring, thanks praetorian
std::wstring tempStr((wchar_t*)dialog.editbox.GetBuffer(0)); 
```

或者：

```
int length = /*figure out the length here*/;
wchar_t *temp = new wchar_t[length];
memcpy(temp, dialog.editbox.GetBuffer(0), length*sizeof(wchar_t));
// dont forget to delete it like this: delete [] temp; 
```

# java - setOnItemClickListener 自定义 Listview

> ID：12785426
> 
> 赞同：0
> 
> 时间：2012-10-08T16:11:19.777
> 
> 标签：java, android, android-listview

我正在学习在 android 中编程，我一直坚持这一点......有人应该知道如何使列表中的项目可点击？我将通过传递 id 参数来创建一个新视图...

非常感谢你。

这是我的实际代码：

```
public class ListaLugares extends ListActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_lista_lugares);
    ArrayList<Lugar> Lugares = getItems();
    setListAdapter(new LugarAdapter(this, R.layout.lista_item, Lugares));
}

public ArrayList<Lugar> getItems() {
    DatabaseHandler db = new DatabaseHandler(this);
    ArrayList<Lugar> listaLugares = db.getAllLugares2();
    db.close();
    return listaLugares;
}

private class LugarAdapter extends ArrayAdapter<Lugar> {

    private ArrayList<Lugar> items;

    public LugarAdapter(Context context, int textViewResourceId, ArrayList<Lugar> items) {
        super(context, textViewResourceId, items);
        this.items = items;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.lista_item, null);
        }
        Lugar lugar = items.get(position);
        if (lugar != null) {
            TextView tnombre = (TextView) v.findViewById(R.id.nombre);
            TextView tdescripcion = (TextView) v.findViewById(R.id.descripcion);
            if (tnombre != null) {
                tnombre.setText(lugar.getNombre());
            }
            if (tdescripcion != null) {
                tdescripcion.setText(lugar.getDescripcion());
            }
        }
        return v;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T16:41:34.790

例如，您可以在类中覆盖 onListItemClick，例如，您可以调用其他一些活动：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    Bundle positionBundle = new Bundle();
    positionBundle.putInt("position", position);
    Intent i = new Intent(this, MyOtherActivity.class);
    i.putExtras(positionBundle);
    startActivity(i);
} 
```

# android - Android 不访问平板 电脑视图的 xhdpi 文件夹

> ID：12785428
> 
> 赞同：0
> 
> 时间：2012-10-08T16:11:24.257
> 
> 标签：android, xml, drawable, tablet, hdpi

我的 res 文件夹中有`hdpi`和`xhdpi`文件夹。但是，android 使用`hdpi`xml 文件来`1280 X 800`解析平板电脑。可能是因为我的 xml 文件访问了`drawable-hdpi`文件夹中但不在`drawable-xhdpi`文件夹中的资源吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T16:20:42.810

我认为您对 DPI 和屏幕尺寸感到困惑，而这两者的分辨率并没有提供。您可以使用具有非常高分辨率的小屏幕 XHDPI 设备（例如 Galaxy S3）或具有非常大屏幕的 MDPI 或 LDPI 设备（例如当您在电视上使用 Android 时）。

一般来说，每像素点数 = 分辨率 / 屏幕尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:14:59.023

并非所有 android 设备都由制造商设置为正确的密度，无论您认为自己拥有什么分辨率，它实际上都是一个大杂烩，android 操作系统仍然可以将设备视为比您想象的更低或不同的密度

如果 android 操作系统认为您的设备是 HDPI，那么它将访问 HDPI drawables

# php - 带 $ 的 stristr

> ID：12785430
> 
> 赞同：2
> 
> 时间：2012-10-08T16:11:41.643
> 
> 标签：php

我无法让*stristr*函数恢复为真，我相信这是因为我的搜索中有一个 $ 字符。

当我做： `var_dump($nopricecart);`

完整的 $nopricecart 值在哪里`<span class="pricedisplay">$0</span>`，我得到：

> 字符串（41）“$0”

但是当我这样做时：

```
if(stristr($nopricecart , "$0")){
   echo "*";
   } else { 
   echo $nopricecart;
} 
```

我总是得到 $nopricecart 的变量，即使它是 $0。

从我的 if 函数中删除 $ 效果很好，但这不适用于我的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T16:13:49.637

应该放弃它：您的`string(41)`字符串中似乎有很多不可打印的字符。找出它们的来源并删除它们，您的代码应该可以工作。

# android - 我的 android 模拟器屏幕无法识别 layout-land

> ID：12785435
> 
> 赞同：0
> 
> 时间：2012-10-08T16:12:13.840
> 
> 标签：android, android-layout

我创建了布局文件夹的副本并将其重命名为 layout-land。在日食中；屏幕以横向模式显示。

但是当我尝试使用 CTRL+F11 在模拟器中旋转屏幕时；然后它会旋转屏幕而不是在横向模式下显示。

如何解决此问题，以便模拟器以横向模式显示屏幕？有人可以帮帮我吗 ？？

我还更改了布局中的背景颜色；但是模拟器也无法识别颜色..我认为它根本无法识别我的布局。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:40:14.677

我将添加此链接作为问题的答案（对于遇到此问题的任何人）：

[http://code.google.com/p/android/issues/detail?id=13189](http://code.google.com/p/android/issues/detail?id=13189)

[Android 2.3 模拟器方向更改](https://stackoverflow.com/questions/4584376/android-2-3-emulator-orientation-changes)

[为什么姜饼模拟器方向卡在应用程序中？](https://stackoverflow.com/questions/4469519/why-does-the-gingerbread-emulator-orientation-gets-stuck-in-apps)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:37:04.740

Android 2.3 中有一个错误，因此我无法旋转屏幕。但是当我在 Android 4.1 中尝试时，它可以工作。

# list - 使用“nub”功能需要什么？

> ID：12785444
> 
> 赞同：2
> 
> 时间：2012-10-08T16:12:58.053
> 
> 标签：list, haskell

在 Data.list 中设置：

* * *

**“设置”操作**

```
nub :: Eq a => [a] -> [a] 
```

*O(n^2)。nub 函数从列表中删除重复的元素。特别是，它只保留每个元素的第一次出现。（名称 nub 的意思是“本质”。）它是 nubBy 的一个特例，它允许程序员提供他们自己的相等性测试。*

* * *

我不能直接使用这个功能。如何使用功能块？我必须导入一些东西吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-08T16:15:01.667

`nub`不在[Prelude](http://hackage.haskell.org/package/base/docs/Prelude.html)中，在[Data.List](http://hackage.haskell.org/package/base/docs/Data-List.html)中。

```
import Data.List 
```

* * *

**编辑：**我看到你已经接受了我的回答。我还看到 Satvik 发布了更好的答案。我会解释的。

如果你的母语不是英语，我会告诉你有一句话：

> 给一个人一条鱼，他会吃一天。教一个人钓鱼，他会吃一辈子。

*   我的回答是给鱼的答案：它回答了您的直接问题，但对您将来可能遇到的类似问题没有任何帮助。在哪个模块`when`？在哪个模块`on`？等等。
*   Satvik 的答案是教人钓鱼的答案：它告诉你如何自己回答你的问题。它使您不仅可以回答您当前的问题，还可以回答您将来遇到的类似问题。你最好学会如何回答自己的问题，因为这样你的问题会很快得到回答。（对我们其他人来说，这样的努力就更少了。）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-08T16:17:08.270

如有疑问，请尝试[hoogle](http://www.haskell.org/hoogle/?hoogle=nub)。它会告诉您该功能存在于哪个包中以及您需要导入什么模块等。您还可以按类型搜索功能。

# sql - 更新连接不更新与等效选择相同的行数

> ID：12785446
> 
> 赞同：2
> 
> 时间：2012-10-08T16:13:14.643
> 
> 标签：sql, tsql, join, sql-update

当我运行这个 SELECT 语句时，我收到 642 行......

```
SELECT *
FROM _DevLoadIn a
JOIN ArticleCompanyList b ON b.Company = a.Name 
```

当我运行这个 UPDATE 语句时，只有 630 行被更新......

```
UPDATE b
SET b.BGCompanyId = a.RelatedId
FROM _DevLoadIn a
JOIN ArticleCompanyList b ON b.Company = a.Name 
```

JOIN 是相同的，那么受影响的行数怎么会不同呢？两个语句都执行没有错误。我不明白这怎么可能。任何人都可以提供任何见解吗？我是否遗漏了有关更新/加入如何工作的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T16:16:04.043

最好的猜测是，对于 B 的每个值，A 中都有更多匹配项。因此，该`select`语句返回 A 的连接副本 - 但`update`仅更新该行一次。

换句话说，您选择的附加值是 B（不是 A）的表示形式。

---- 更新后的问题编辑 -----

您确定您正在更新正确的值吗？确保正确的表（A 或 B）位于更新语句的左侧。看来您已经编辑了您的问题并切换了最初发布的内容。然而，理论仍然相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:16:49.427

如果 b.BGCompanyId 已经等于 a.RelatedId，它将不会显示为已更新。

您可以通过修改原始查询来验证这一点，如下所示：

`SELECT *
FROM _DevLoadIn a
JOIN ArticleCompanyList b ON b.Company = a.Name
WHERE b.BGCompanyID != a.RelatedId`

# ruby - 无法在 Ubuntu 上 gem 安装 ruby -augeas

> ID：12785447
> 
> 赞同：0
> 
> 时间：2012-10-08T16:13:16.187
> 
> 标签：ruby, gem, puppet, augeas

我正在尝试在 Ubuntu 上安装 augeas。

```
 sudo gem install ruby-augeas 
```

这给了我错误：

```
 Building native extensions.  This could take a while...
    ERROR:  Error installing ruby-augeas:
            ERROR: Failed to build gem native extension.

            /usr/bin/ruby1.9.1 extconf.rb
    *** extconf.rb failed ***
    Could not create Makefile due to some reason, probably lack of
    necessary libraries and/or headers.  Check the mkmf.log file for more
    details.  You may need configuration options.

    Provided configuration options:
            --with-opt-dir
            --without-opt-dir
            --with-opt-include
            --without-opt-include=${opt-dir}/include
            --with-opt-lib
            --without-opt-lib=${opt-dir}/lib
            --with-make-prog
            --without-make-prog
            --srcdir=.
            --curdir
            --ruby=/usr/bin/ruby1.9.1
            --with-augeas-config
            --without-augeas-config
            --with-pkg-config
            --without-pkg-config
    extconf.rb:27:in `<main>': augeas-devel not installed (RuntimeError) 
```

我有

```
sudo apt-get install ruby1.8-dev ruby1.9.1-dev augeas-tools libaugeas-dev 
```

顺便说一句，`mkmf.log`文件在哪里？

我应该如何安装augeas？我需要使用 gem 安装它，因为它将用于 Puppet 的 Ruby 版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T23:30:51.563

你至少需要 build-essential 包来编译原生扩展。还要确保你已经预编译了所有的 ruby​​ 基础库（或在 rvm 中）。

尝试安装 rvm 本身，它会在安装后为您提供所需软件包的列表。

# knockout.js - 如果长度问题淘汰赛

> ID：12785448
> 
> 赞同：3
> 
> 时间：2012-10-08T16:13:27.573
> 
> 标签：knockout.js

我对淘汰赛有点陌生，我无法让`if`数据绑定工作......

html:

```
<div data-bind="if: items.length">
    <h1>List</h1>

    <ul data-bind="foreach: items">
        <li data-bind="text: $data">
            &nbsp;
        </li>
    </ul>
</div> 
```

javascript:

```
model =
    items: ko.observableArray(["A", "B", "C"])

ko.applyBindings(model) 
```

沙箱：http: [//jsfiddle.net/gibatronic/EXwrR/](http://jsfiddle.net/gibatronic/EXwrR/)

为什么`if: items.length`不起作用？淘汰赛[文档](http://knockoutjs.com/documentation/if-binding.html)说它接受这种测试。我通过将数据绑定更改为`if: console.log(items.length)`. 我是否必须进行可观察并手动管理？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-08T16:17:12.967

只需更改代码以使用`items().length`而不是`items.length`

```
<div data-bind="if: items().length">
    <h1>List</h1>
.. 
```

`length` *是对底层数组进行操作的原生 JavaScript 数组函数。*

* * *

查看[Knockout.js 文档](http://knockoutjs.com/documentation/observableArrays.html)。在那里你可以找到很多有用的信息。
*从文档：*

> *您可以通过调用observableArray*作为不带参数的函数来获取底层 JavaScript 数组 ，就像任何其他 observable 一样。

# web-services - 生成 HTML 模板，将它们转换为 PDF，然后通过 Web 服务返回给客户端

> ID：12785449
> 
> 赞同：0
> 
> 时间：2012-10-08T16:13:27.720
> 
> 标签：web-services, pdf-generation, html-rendering

因此，我需要能够从 Web 服务返回由数百个 HTML 模板组成的 PDF 以用于打印目的。这似乎是一项艰巨的任务，而且我对这个领域的任何技术都不熟悉（除了使用模板库呈现 HTML）。

我的想法是从数据库中提取必要的数据，遍历它并生成所有的 html，使用一些库创建一个大的 pdf，然后将其发送回用户。这将是不可能的吗？有没有人有做这样的事情的经验并且可以推荐一种替代方法？

感谢您的建议。

# javascript - 如何动态实现 Highcharts

> ID：12785450
> 
> 赞同：-1
> 
> 时间：2012-10-08T16:13:29.670
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何在javascript中动态地将项目添加到数组中](https://stackoverflow.com/questions/10632180/how-to-add-items-to-an-array-dynamically-in-javascript)

从数据库中获取数据后，我想将其传递给系列：highchart。下面是数据。

```
series: [

    // { name: '53411',  data:[8151.74,15105.39]},
    // { name: '53473',  data:[18703.18,6692.23]},
    // { name: '500606', data:[-866.78,1311.01]},
    // { name: '500613', data:[27621.01,68468.79]},
    // { name: '500614', data:[73.3,80.47]}

] 
```

但我希望这是动态创建的，为此我所做的也在下面：

```
var seriesData = '';
for (var i = 0; i < data.length; i++) {
    if (i == data.length - 1) {
        seriesData += "{ name:'" + seriesProviderName[i] + "', data:[" + providerist[i] + "," + providersec[i] + "]}";
    }
    else {
        seriesData += "{ name:'" + seriesProviderName[i] + "', data:[" + providerist[i] + "," + providersec[i] + "]},";
    } 
```

之后我将这个 seriesData 传递给`Series: [seriesData]`但它不会打印图表。因为它是一个字符串，它在开头和结尾包含双引号，我在萤火虫中看到过它，我不知道如何摆脱它。例如，“seriedData”这是在萤火虫中。

```
 "{ name: '53411', data:  [8151.74,15105.39]},
   { name: '53473', data:  [18703.18,6692.23]},
   { name: '500606', data: [-866.78,1311.01]},
   { name: '500613', data: [27621.01,68468.79]},
   { name: '500614', data: [73.3,80.47]}
  " 
```

我想删除这些双引号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:21:09.340

您可以使用`eval()`or`JSON.parse()`或`jQuery.parseJSON()`（如果您使用 jQuery，这可能是安全性和兼容性的最佳选择）将您的字符串对象转换为 JSON 对象，然后可以将其传递给 highcharts。

或者，如评论中所述，您可以首先通过执行将对象创建为数组，例如`series[0]['name']=53411;`

编辑：`stringify()`走向另一个方向......大脑放屁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:44:54.387

有一个关于如何使用 Ajax 加载 highcharts 的示例：http:
[//jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/line-阿贾克斯/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/line-ajax/)

# matrix - 如何在道场商店中存储矩阵

> ID：12785456
> 
> 赞同：0
> 
> 时间：2012-10-08T16:13:51.240
> 
> 标签：matrix, indexeddb, dojo

我的问题是特定于 dojo 商店的，但我认为问题与 html5 indexedDB 类似。

我处理存储在矩阵中的数据集，例如体育联赛的结果。每个项目如下所示：

```
host:"Team3", visitor:"Team8", result:"3-1", season:"2012" 
```

我的问题是 dojo 存储（或 indexedDB）需要一个密钥。就我而言，我没有，因为没有一个属性是特定于该项目的。

处理这个问题的最佳方法是什么？我考虑了两种选择，但我不喜欢它们：

1.  为每个项目添加一个 id 属性（例如增量数字）
2.  在我的数据中创建层次结构，例如：

    {host:"Team1", 结果:[ {visitor:"Team2",result:"1-1",season:"2012"}, {visitor:"Team3",result:"1-2",season:" 2012"}, ...]

在这两种情况下，结构都更重，没有任何好处（除了符合规格）。有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T05:20:24.610

我只能为 indexeddb 说话，但如果你不需要关心一个键并且你需要一个。在这种情况下，我会选择没有键路径的 autoIncrement 键。在这种情况下，您将拥有一个密钥，并且此密钥不会添加到您的对象中。如果您需要密钥，请将密钥路径设置为 Id。这样，Id 属性将使用 autoIncrement 键添加到您的对象中。

# verilog - 我可以在 verilog 中给部分选择有意义的名称吗？

> ID：12785462
> 
> 赞同：3
> 
> 时间：2012-10-08T16:14:28.650
> 
> 标签：verilog

假设我有一个 8 位标志寄存器：

```
reg [7:0] flags; 
```

虽然在我的代码中我可以将它的一部分称为`flags[0]`,`flags[3]`等`flags[7:4]`，但我更希望能够按照`flags.Z`, `flags.C`, `flags.STATE`.

目前，我发现这很接近：

```
`define Z [0]
`define N [1]
`define C [2]
`define V [3]
`define STATE [7:4]
reg [7:0] flags; 
```

这意味着我可以分配和评估`flags`Z`,`flags`C`和`flags`STATE`.

然而，用单字母定义污染全局命名空间似乎是个坏主意，特别是因为`notflags`N`编译器会接受。这仍然可以接受吗？

有没有更简单的方法来做到这一点？我知道 SystemVerilog 有结构，但我仅限于 verilog 2001。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T17:16:03.697

我同意你应该避免 global `define`。我只会`reg`为每个字段使用一个单独的字段，然后将它们组装为`wire`：

```
reg Z, N, C, V;
reg [3:0] STATE;
wire [7:0] flags = {STATE, V, C, N, Z}; 
```

您只能分配给 each `reg`，但您可以使用 the`reg`或`wire`for eval。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T17:13:07.673

好问题。据我所知，Verilog-2001 中没有什么可以提供太多帮助。也许其他人会有更好的答案。

我可以理解您试图通过 `defines 达到什么目的，但我认为使用参数不太容易出错。那么您也不必担心会污染命名空间。当然，对于单个位字段，这确实最有效（就可读性而言）。

例如

```
localparam Z = 0;
localparam N = 1;
localparam C = 2;
localparam V = 3;
localparam STATE_MSB = 7;
localparam STATE_LSB = 4;

... flags[Z] ...
... flags[STATE_MSB:STATE_LSB] ... 
```

您可能还想考虑可以用函数做什么。

# sql - SQL Server 2005/2008 中是否有任何方法可以将列重置为其默认值？

> ID：12785467
> 
> 赞同：1
> 
> 时间：2012-10-08T16:14:39.763
> 
> 标签：sql, sql-server, stored-procedures

一些使用我们软件的人已经开始进行数据库服务器移动，而不是按照我们的正常步骤来容纳我们软件`nulls = 0`在所有数据库中的遗留部分。因此，由于他们忽略了使用我们的协议，所以我们留下了很多垃圾空数据，并且很多查询`fieldname = 0`都失败了，因为`fieldname is null`它是真的。

那么，如何构建一个存储过程以将所有空值（实际上不应该有空值）恢复为 SQL Server 数据库中的默认值？

我几乎没有执行存储过程的经验，并且在存储过程中绝对没有 Oracle DB 之外的经验，所以请解释一下代码在做什么，如果你可以用代码示例回答这个问题，并且如果不可能在多个表上运行过程，那很好也知道，在这种情况下，我只需编写一个实用程序来完成它（尽管我已经看到该实用程序需要 9 年才能运行）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T16:29:01.643

您的标题说将字段设置为空，但您的问题说不应该有空值。不过....您可以使用 DEFAULT 关键字将字段设置为其默认值：

```
Update MyTable set MyField = DEFAULT Where <something> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T16:35:46.117

这将列出表中所有可为空的列：

```
select tab.name, col.name 
from sys.columns col join sys.tables tab on col.object_id = tab.object_id
where tab.type = 'U' and col.is_nullable = 1 
```

您可能会使用游标来遍历每个，执行一些动态 SQL 来更新列定义。但是，如果您在每一列中都有不同的数据类型，那可能会变得非常糟糕——它们都一样吗？

或者，您可以更新所有 SP 查询以使用：

```
ISNULL(fieldname, 0) = 0 
```

从那一侧消除 NULL 问题 - 这将匹配 NULL - 或 - 零。

编辑：

好的，假设您要更新所有 INT、TINYINT、BIGINT 和 BIT 列，这个脚本***应该***可以做到。使用风险自负！备份数据库并将其还原为副本并在那里进行测试。然后，取消注释 WHERE 子句中的表过滤器以首先在单个表上进行测试。EXEC 会被注释，只有在您对它进行筛选后才能取消注释。

该脚本将执行以下操作：

1.  将每个 NULL INT、TINYINT、BIGINT 和 BIT 更新为零（假）
2.  将每个 INT、TINYINT、BIGINT 和 BIT 列更改为 NOT NULL
3.  将每个 INT、TINYINT、BIGINT 和 BIT 列的默认约束添加为零 (false)。

请注意，如果您在列上已有默认约束，则 3 将失败。如果您不需要默认值（即您为每个 INSERT 显式插入一个值），请将其删除。

```
DECLARE @table VARCHAR(MAX), @col VARCHAR(MAX), @type VARCHAR(MAX)
DECLARE @q_update VARCHAR(MAX), @q_alter VARCHAR(MAX), @q_default VARCHAR(MAX)

DECLARE c CURSOR FOR

    select tab.name, col.name, typ.name
    from sys.columns col
          join sys.types typ on col.system_type_id = typ.system_type_id
          join sys.tables tab on col.object_id = tab.object_id

    where tab.type = 'U' and col.is_nullable = 1 and typ.name IN ('int', 'tinyint', 'bigint', 'bit')
    --tab.name = 'sometable'

OPEN c
FETCH NEXT FROM c INTO @table, @col, @type
WHILE @@FETCH_STATUS = 0
BEGIN
    PRINT 'UPDATING ' + @table + '.' + @col + ' (' + @type + ')';

    SET @q_update = 'UPDATE [' + @table + '] SET [' + @col + '] = 0 WHERE [' + @col + '] IS NULL';
    PRINT @q_update;
    --EXEC(@q_update);

    PRINT '';

    SET @q_alter = 'ALTER TABLE [' + @table + '] ALTER COLUMN [' + @col + '] ' + @type + ' NOT NULL';
    PRINT @q_alter;
    --EXEC(@q_alter);

    PRINT '';

    SET @q_default = 'ALTER TABLE [' + @table + '] ADD CONSTRAINT ' + @table + '_' + @col + '_DF DEFAULT 0 FOR [' + @col + ']'
    PRINT @q_default;
    --EXEC(@q_default);

    PRINT '----';

    FETCH NEXT FROM c INTO @table, @col, @type
END
CLOSE c
DEALLOCATE c 
```

注意：为了清楚起见，我使用了游标。如果您真的不想使用它们，请随意查看@JamesCurtis[链接。](https://stackoverflow.com/questions/12748730/join-based-on-tables-that-vary-by-row/12748875#12748875)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T17:01:26.607

这是一个可以完成您需要的代码示例。

**大量免责声明**。此代码会将具有默认值的每个可空列重置为其*默认**值*。你几乎肯定会想要限制它的范围。

 *```
-- Routine which finds all NULLABLE columns with default values
-- and sets them back to their defaults.

-- DISCLAIMER.  If in any doubt, comment the EXEC out and copy and paste
-- the contents of @sql into a query window, and inspect before running.

-- Soon to hold executable SQL
DECLARE @sql VARCHAR(Max)

-- Use the INFORMATION_SCHEMA to find all qualifying columns, building
-- up a string consisting of a series of simple update statements
--
-- Warning:  My definition of qualifying may differ from yours.
-- Check your WHERE clause. 
--
-- Doity concatenatin' ahoy, Captain!
SELECT
    @sql = 
    CASE WHEN
        @sql IS NULL
    THEN
        'UPDATE ' + TABLE_NAME + ' SET ' + COLUMN_NAME + ' = DEFAULT;'  
    ELSE 
        @sql + 'UPDATE ' + TABLE_NAME + ' SET ' + COLUMN_NAME + ' = DEFAULT;'   
    END
FROM
    INFORMATION_SCHEMA.COLUMNS
WHERE 
    COLUMN_DEFAULT IS NOT NULL
AND IS_NULLABLE = 'YES'
--  Add extra conditions for granularity!!!!

-- Execute sql
EXEC (@sql); 
```*

# java - 如何在 Android 中显示 sdcard 中的 doc 文件列表？

> ID：12785468
> 
> 赞同：-1
> 
> 时间：2012-10-08T16:14:41.717
> 
> 标签：java, android

单击android中的按钮后如何显示文档文件，如何通过在Android中单击打开该文档？

是否可以在不使用应用程序的情况下显示文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:44:21.913

这将帮助您将 sdcard/dir 中的所有 .doc 文件添加到 arraylist 之后，只需将此数据填充到 ListView 或您想要的任何位置

```
 ArrayList<String> wordFiles = new ArrayList<String>();
        String currentFile;
        String path = "dir//"; 
        File sd = Environment.getExternalStorageDirectory();
        File folder = new File(sd,path);
        File[] listOfFiles = folder.listFiles(); 
        for (int i = 0; listOfFiles!=null &&i< listOfFiles.length; i++) 
        {

            if (listOfFiles[i].isFile()) 
            {
                currentFile = listOfFiles[i].getName();
                if (currentFile .endsWith(".doc"))
                {   
                    //currentFile =currentFile.replace(".doc", "");
                    wordFiles .add(currentFile);

                }
            }
        } 
```

并打开 .doc （用户必须有一个可以处理 .docs 文件的应用程序）试试这个：

```
 File sd = Environment.getExternalStorageDirectory();
    File file = new File(sd, "dir//file.doc");
    Intent intent = new Intent();
    String type = "application/msword";
    intent.setDataAndType(Uri.fromFile(file), type);
    startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T08:54:33.727

在这里，我尝试了递归文件列表，它列出了 sdcard 和 sdcard 的内部文件夹中的所有单词文件。可能它会为你工作。

```
package com.fileex;

import java.io.File;
import java.io.FilenameFilter;
import java.util.ArrayList;
import java.util.List;
import java.util.Locale;

import android.app.ListActivity;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.Toast;
import android.widget.AdapterView.OnItemClickListener;

public class WordListActivity extends ListActivity {
    ArrayAdapter<String> adapter;
    int clickCounter = 0;
    ArrayList<String> listItems = new ArrayList<String>();
    ArrayList<String> listItems2 = new ArrayList<String>();
    private File[] wordfile;
    String[] wordlist, wordlist2;
    Button back, home;
    EditText edtsearch;
    ListView lv;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.doculist);

        edtsearch = (EditText) findViewById(R.id.edt_searchdoc);
        back = (Button) findViewById(R.id.btnbackdocu);
        back.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                finish();

            }
        });
        home = (Button) findViewById(R.id.btnhomedocu);
        home.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent i = new Intent(WordListActivity.this, Home.class);
                i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(i);

            }
        });

        File sdcard = Environment.getExternalStorageDirectory();

        wordfile = sdcard.listFiles();

        for (int i = 0; i < wordfile.length; i++) {

            if (wordfile[i].isDirectory()) {
                walkdir(wordfile[i]);
            } else {
                if (wordfile[i].getAbsolutePath().endsWith(".doc")) {

                    listItems.add(wordfile[i].getName());
                    listItems2.add(wordfile[i].getAbsolutePath());

                }
            }
        }

        wordlist = new String[listItems.size()];
        wordlist = listItems.toArray(wordlist);
        wordlist2 = new String[listItems2.size()];
        wordlist2 = listItems2.toArray(wordlist2);

        adapter = new ArrayAdapter<String>(this, R.layout.listitemsimple,
                R.id.txtsimpleitem, wordlist);
        lv = getListView();
        registerForContextMenu(lv);

        lv.setAdapter(adapter);

        edtsearch.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence cs, int arg1, int arg2,
                    int arg3) {

                String text = edtsearch.getText().toString()
                        .toLowerCase(Locale.getDefault());
                WordListActivity.this.adapter.getFilter().filter(text);

            }

            @Override
            public void beforeTextChanged(CharSequence arg0, int arg1,
                    int arg2, int arg3) {
                // TODO Auto-generated method stub

            }

            @Override
            public void afterTextChanged(Editable arg0) {
                // TODO Auto-generated method stub

            }

        });

        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                // TODO Auto-generated method stub
                Toast.makeText(WordListActivity.this,
                        "Filepath::::" + wordlist2[arg2], 5000).show();
                File stringtofile = new File(wordlist2[arg2]);
                PackageManager packageManager = getPackageManager();
                Intent testIntent = new Intent(Intent.ACTION_VIEW);
                testIntent.setType("application/msword");
                List list = packageManager.queryIntentActivities(testIntent,
                        PackageManager.MATCH_DEFAULT_ONLY);
                if (list.size() > 0 && stringtofile.isFile()) {
                    Intent intent = new Intent();
                    intent.setAction(Intent.ACTION_VIEW);
                    Uri uri = Uri.fromFile(stringtofile.getAbsoluteFile());
                    intent.setDataAndType(uri, "application/msword");
                    startActivity(intent);

                }
            }
        });

    }

    public void walkdir(File dir) {
        String pdfPattern = ".doc";

        File listFile[] = dir.listFiles();

        if (listFile != null) {
            for (int i = 0; i < listFile.length; i++) {

                if (listFile[i].isDirectory()) {
                    walkdir(listFile[i]);
                } else {
                    if (listFile[i].getAbsolutePath().endsWith(pdfPattern)) {
                        // Do what ever u want
                        listItems.add(listFile[i].getName());
                        listItems2.add(listFile[i].getAbsolutePath());
                        System.out.println(listFile[i]);

                    }
                }
            }
        }
    }

} 
```

# objective-c - 使用底层 SQLite DB 时 [NSManagedObjectContext save] 是原子提交吗？

> ID：12785470
> 
> 赞同：4
> 
> 时间：2012-10-08T16:14:48.100
> 
> 标签：objective-c, ios, macos, sqlite, core-data

或者可能是 Core Data 将保存操作拆分为几个连续的原子步骤？对于我的工作，我必须确保在崩溃后重新访问数据库时，要么所有内容都已保存，要么我已回滚到保存操作之前的状态。我不能有一些修改过的 NSObject 被保存但有些没有的情况。

注意：我正在使用以下 SQLite pragma 选项（我需要任何其他选项来确保原子性吗？）：

```
[pragmaOptions setObject:@"FULL" forKey:@"synchronous"];
[pragmaOptions setObject:@"1" forKey:@"fullfsync"];
[pragmaOptions setObject:@"WAL" forKey:@"journal_mode"]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T23:32:17.870

是的，Core Data`-save`是事务性的。要么一切都得救了，要么什么都没有。无论您使用哪家商店，情况都是如此。

# iphone - 为我自己的 SMS 编写器/阅读器拦截 iphone SMS 消息

> ID：12785473
> 
> 赞同：1
> 
> 时间：2012-10-08T16:15:00.963
> 
> 标签：iphone, objective-c, sms

我正在研究大学的最后一年项目，我正在探索所有可能的选择。我正在考虑使用 iphone 进行 SMS 加密。我认为可以通过我为 iphone 制作的任何程序发送 SMS 消息，但如果我确实制作了所述程序，它是否能够拦截加密消息？而不是那些发往标准短信程序的短信？

我问这个是因为我知道 Apple 对他们的产品非常严格，上次我检查使用另一个文本程序的唯一方法是越狱 iphone，我并不热衷于这样做。

谢谢你的时间

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T16:24:58.573

如果不越狱和摆弄私有 API，这是不可能的，而且这违反了 Apple 的政策。即使越狱，这也不是微不足道的。

# ruby-on-rails - Pow 和 rbenv 出错 - “无法加载此类文件 - 捆绑程序/设置”

> ID：12785478
> 
> 赞同：5
> 
> 时间：2012-10-08T16:15:06.280
> 
> 标签：ruby-on-rails, rbenv, rack-pow

[我知道 Pow 的疑难解答wiki](https://github.com/37signals/pow/wiki/Troubleshooting)页面上有一个条目，但我进行了更改，但它仍然给出了相同的错误。

如果您从下面的错误消息中注意到，它似乎至少尝试使用来自 rbenv 的正确版本的 ruby​​，但仍然有相同的错误

```
LoadError: cannot load such file -- bundler/setup
~/.rbenv/versions/1.9.3-p125/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
~/.rbenv/versions/1.9.3-p125/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require' 
```

我还查看了故障排除页面上提到的[问题](https://github.com/37signals/pow/issues/202)中的所有评论，这些解决方案都不适合我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T16:04:34.890

通常，您需要一个`~/.powconfig`文件：

```
export PATH=$(rbenv root)/shims:$(rbenv root)/bin:$PATH 
```

请参阅[问题讨论](https://github.com/37signals/pow/issues/202#issuecomment-2640707)和[pow 指南](https://github.com/37signals/pow/wiki/Troubleshooting)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-22T13:28:43.643

1) 猫 ~/.powconfig

`export PATH=/Users/alvin/.rbenv/shims:$PATH`

2) 重启

`touch ~/.pow/restart.txt`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-27T17:48:46.607

我使用 rbenv 遇到了这个错误，只需卸载并重新安装 pow 即可修复它：

`curl get.pow.cx/uninstall.sh | sh`

和

`curl get.pow.cx | sh`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-11T13:48:21.227

只是为了完整性。

我遇到了类似的问题，[这里](https://stackoverflow.com/questions/17691695/pow-not-working-with-ruby-2-0-using-rbenv)的答案为我解决了这个问题。

我必须删除`~/.ruby-version`它才能为我工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-24T08:29:39.160

我正在使用 rbenv，并且遇到了这个问题，正如[这个答案](https://stackoverflow.com/a/7270860/1450420)所建议的那样，应用程序的 ENV 中的 Ruby 版本与 Pow 中的不同。

[我使用RBENV_VERSION](https://github.com/sstephenson/rbenv#choosing-the-ruby-version)环境变量设置了 Ruby 版本，由于某种原因，Pow 没有使用它。这是通过在我的项目目录中创建一个`.ruby-version`文件来解决的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T19:19:39.107

我想到了。出于某种原因，我有两个 .rbenv 垫片目录。一进`~/.rbenv/shims`一进`~/Developer/.rbenv/shims`。

通过更改我`~/.powconfig`以将开发人员目录添加到我的路径，pow 可以正常运行该应用程序。

# django - 'ImageFieldFile' 对象只有在图片已经上传之后才没有属性'content_type'，然后不会更改或删除

> ID：12785479
> 
> 赞同：3
> 
> 时间：2012-10-08T16:15:06.933
> 
> 标签：django, django-forms, django-models, django-profiles

我正在开发一个同时使用 django 注册和 django 配置文件的项目。我有一个允许用户编辑/创建个人资料的表格，其中包括上传照片。在以下情况下一切正常：创建或编辑配置文件并且从未上传过图像；编辑/创建个人资料并上传图像；上传图像后，只要更改或删除先前上传的图像，就可以编辑配置文件...我遇到的问题是是否存在现有的个人资料图像，并且用户尝试编辑他的/她的个人资料，而不对当前图像进行任何更改（即删除或替换它）。在这种情况下，我收到错误“ImageFieldFile”对象没有属性“content_type”。关于为什么会发生这种情况的任何想法。我已经尝试过在堆栈溢出中找到的其他答案的变体，但无法让它们中的任何一个像他们所说的那样工作。我目前拥有的是我所做的更改之一的变体：

```
class UserProfileForm(ModelForm):
    def __init__(self, *args, **kwargs):
        super(UserProfileForm, self).__init__(*args, **kwargs)
        try:
            self.fields['email'].initial = self.instance.user.email
        except User.DoesNotExist:
            pass

    email = forms.EmailField(label="Primary email", help_text='')

    class Meta:
        model = UserAccountProfile
            exclude = ('user', 'broadcaster', 'type')
            widgets = {
            ...
        }

    def save(self, *args, **kwargs):
        u = self.instance.user
        u.email = self.cleaned_data['email']
        u.save()
        profile = super(UserProfileForm, self).save(*args,**kwargs)
        return profile

    def clean_avatar(self):
        avatar = self.cleaned_data['avatar']            

        if avatar:
            w, h = get_image_dimensions(avatar)
            max_width = max_height = 500
            if w >= max_width or h >= max_height:
                raise forms.ValidationError(u'Please use an image that is %s x %s pixels or less.' % (max_width, max_height))

            main, sub = avatar.content_type.split('/')
            if not (main == 'image' and sub in ['jpeg', 'pjpeg', 'gif', 'png']):
                raise forms.ValidationError(u'Please use a JPEG, GIF or PNG image.')

            if len(avatar) > (50 * 1024):
                raise forms.ValidationError(u'Avatar file size may not exceed 50k.')

        else:
            pass

        return avatar 
```

感谢您的任何帮助或建议。

这是完整的回溯：

```
Traceback:
File "C:\Python27\lib\site-packages\django\core\handlers\base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "C:\Python27\lib\site-packages\django\contrib\auth\decorators.py" in _wrapped_view
  20\.                 return view_func(request, *args, **kwargs)
File "C:\Python27\lib\site-packages\profiles\views.py" in edit_profile
  197\.         if form.is_valid():
File "C:\Python27\lib\site-packages\django\forms\forms.py" in is_valid
  124\.         return self.is_bound and not bool(self.errors)
File "C:\Python27\lib\site-packages\django\forms\forms.py" in _get_errors
  115\.             self.full_clean()
File "C:\Python27\lib\site-packages\django\forms\forms.py" in full_clean
  270\.         self._clean_fields()
File "C:\Python27\lib\site-packages\django\forms\forms.py" in _clean_fields
  290\.                     value = getattr(self, 'clean_%s' % name)()
File "C:\Documents and Settings\user\projects\xlftv\lftv\userprofiles\forms.py" in clean_avatar
  146\.          main, sub = avatar.content_type.split('/')

Exception Type: AttributeError at /instructor_profiles/edit
Exception Value: 'ImageFieldFile' object has no attribute 'content_type' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-04-18T11:59:29.293

上传文件时，根据文件大小，它将是`InMemoryUploadedFile`类的实例或作为`TemporaryUploadedFile`类的子类的`UploadedFile`类。

并且图像模型字段被保存为`django.db.models.fields.files.ImageFieldFile`对象。

因此，当再次提交表单而不修改图像字段时，该字段将是`django.db.models.fields.files.ImageFieldFile`上传文件实例的`django.core.files.uploadedfile.UploadedFile`实例。`content_type`因此，在访问属性之前检查表单字段的类型。

```
from django.core.files.uploadedfile import UploadedFile
from django.db.models.fields.files import ImageFieldFile

def clean_avatar(self):
    avatar = self.cleaned_data['avatar']            

    if avatar and isinstance(avatar, UploadedFile):
        w, h = get_image_dimensions(avatar)
        max_width = max_height = 500
        if w >= max_width or h >= max_height:
            raise forms.ValidationError(u'Please use an image that is %s x %s pixels or less.' % (max_width, max_height))

        main, sub = avatar.content_type.split('/')
        if not (main == 'image' and sub in ['jpeg', 'pjpeg', 'gif', 'png']):
            raise forms.ValidationError(u'Please use a JPEG, GIF or PNG image.')

        if len(avatar) > (50 * 1024):
            raise forms.ValidationError(u'Avatar file size may not exceed 50k.')

    elif avatar and isinstance(avatar, ImageFieldFile):
        # something
        pass

    else:
        pass

    return avatar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:53:05.583

因此，如果您查看回溯中的最后一点，您会发现您的错误来自这一行`main, sub = avatar.content_type.split('/')`，这似乎来自您的`clean_avatar`方法。看起来你正试图确保它是一个图像......我不得不想象还有另一种方法可以做到这一点。

看起来最坏的情况，您应该能够解析`avatar.name`以检查文件扩展名（请参阅[https://docs.djangoproject.com/en/dev/ref/files/file/#django.core.files.File](https://docs.djangoproject.com/en/dev/ref/files/file/#django.core.files.File)）

顺便说一句，获取`content_type`实例的方法是`ContentType.get_for_model(avatar)`.

# xml - 解析复杂的 XML 字符串 (RXML)

> ID：12785490
> 
> 赞同：0
> 
> 时间：2012-10-08T16:16:18.900
> 
> 标签：xml, xcode, parsing

这是我简化的 XML 字符串：

```
<rss>
 <channel>
  <item>
   <title>ITEM TITLE</title>
   <description>
    &lt;i&gt;Att1 &lt;/i&gt;10, &lt;i&gt;Att2 &lt;/i&gt;20, &lt;i&gt;Att3 &lt;/i&gt;30
   </description>
  </item>
  <item>
  ...
  </item>
  ...
 </channel>
</rss> 
```

使用这个 RXML 代码，我可以解析整个 <description> 标签：

```
RXMLElement *rxmlRoot = [RXMLElement elementFromURL:[NSURL URLWithString:@"MY_XML_URL]];
    RXMLElement *firstLevel = [rxmlRoot child:@"channel"];
    NSArray *secondLevel = [firstLevel children:@"item"];
    [rxmlRoot iterateElements:secondLevel usingBlock:^(RXMLElement *appElement) {
        NSString *description = [appElement child:@"description"].text; 
```

它的完美！解析后的*描述字符串为：“<i>Att1</i> 10, <i>Att2</i> 20, <i>Att3</i> 30”

但我想解析 Att1、Att2 和 Att3 的单独值；我需要在同一个标​​签中推断出 10、20 和 30 的单个值。这是可能的？有一种方法可以使用 RXML 或 XCode 的另一个 xml 解析器吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:49:37.603

我过去曾对结果运行正则表达式以摆脱这种情况。

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"< i>Att[0-9]< /i>"
                                                                       options:NSRegularExpressionCaseInsensitive
                                                                         error:nil];

[regex replaceMatchesInString:description
                      options:0
                        range:NSMakeRange(0, description.length)
                 withTemplate:@""]; 
```

如果您的数据格式不同，还有一些库可以去除 html 标签。

# android - 从代码执行网站按钮的点击事件

> ID：12785492
> 
> 赞同：2
> 
> 时间：2012-10-08T16:16:23.173
> 
> 标签：android, webview, onclick

在尝试了整个下午和几个网站来回答我的问题但无法做到之后，我放弃了，我把所有的希望都寄托在了这个问题上，现在对你有吸引力。

我想创建一个按下按钮的应用程序，它运行网站按钮的点击事件。

我会问你一个带有按钮和 TextView 的应用程序的完整代码示例，按下按钮它会开始在 Google 上搜索 TextView 中的文本。

抱歉英语不好，这是意大利语的谷歌翻译；）

感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:31:41.903

```
<html>
    <form method="get" action="http://www.google.co.uk/search">
        <input name="q"/>
        <input type="submit"/>
    </form>
</html> 
```

我唯一能想到的就是你要的吗？

# php - 网址重写不起作用

> ID：12785493
> 
> 赞同：-2
> 
> 时间：2012-10-08T16:16:24.917
> 
> 标签：php, url-rewriting

我有类似的东西

```
header('Location:index.php?login_error='.urlencode($error)); 
```

我想成功

```
header('Location:error/'.urlencode($error)); 
```

使用重写。我使用的规则是

```
RewriteRule ^error/([a-zA-Z]+)$ index.php?login_error=$1 [QSA] 
```

但它不工作可以有人请指导。任何帮助将不胜感激。

.htaccess 文件

```
RewriteEngine On

RewriteRule ^login/?$ index.php [NC,L]
RewriteRule ^home/?$ home.php [NC,L]
RewriteRule ^logout/?$ logout.php [NC,L]
RewriteRule ^error/([a-zA-Z]+)$ index.php?login_error=$1 [QSA] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:00:19.553

OP 报告一切正常，但似乎`a-zA-Z`URL 中的正则表达式不止于此，因此只需简单地重写为

```
RewriteRule ^error/([^/]+)$ index.php?login_error=$1 [QSA] 
```

做了魔术。

`[^/]+`在正则表达式中的意思是“任何不是斜线重复1次或多次的字符”

# xna - 将 XNA 游戏内容发布为游戏内容参考

> ID：12785494
> 
> 赞同：1
> 
> 时间：2012-10-08T16:16:30.933
> 
> 标签：xna, xna-4.0

我正在制作拥有自己内容的游戏引擎（游戏库）。游戏引擎是一些参考（.dll），可以包含在基本的xna游戏中，并为游戏提供一套工具。问题是引擎有一些效果必须包含在内容参考中。我的问题是如何将内容构建为 dll / 游戏内容项目而不是文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:02:24.730

这只是基于我对 XNA 的轶事经验的猜测。内容管道作为 Visual Studio 构建过程的扩展运行，可将您的资产转换为 .xnb 文件。在引用具有自己的内容引用的游戏库的情况下，您不能依赖正在构建的内容，因为您实际上并没有从您的游戏项目构建游戏库。

您可能必须打开包含游戏库及其关联内容项目的项目，构建该项目，然后将游戏库 .dll 及其关联内容复制到项目中引用游戏库的正确位置。

或者，您可以将游戏库项目及其内容项目作为游戏项目的一部分。这可能允许构建过程构建两个内容项目。

对不起，我还没有真正尝试过，所以我只是在猜测。

# php - 在 Wordpress 中创建用户后触发操作

> ID：12785496
> 
> 赞同：2
> 
> 时间：2012-10-08T16:16:34.713
> 
> 标签：php, wordpress

在 Wordpress 网站中，我需要在每次创建用户时创建自定义帖子。在这篇文章中，我将让管理员向用户添加私人文件。我需要触发一个在创建用户后插入自定义帖子的函数。这是功能：

```
function user_after_creation( $user_id ){
    $user = get_user_by( 'id', $user_id );
    $post_setup = array(
        'post_type'     => 'private_user_page',
        'post_title'    => $user->user_login,
        'post_name'     => $user->user_login,
        'post_status'   => 'publish',
        'post_excerpt'  => ''
    );
    wp_insert_post( $post_setup );
} 
```

好吧，我在想这样的事情：

```
add_action( 'user_register', 'user_after_creation', 10, 1 ); 
```

为了触发动作，其他人建议：

```
do_action( 'user_register', user_after_creation( $wpdb->insert_id ) ); 
```

但我不确定该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T16:36:26.837

看看[`user_register`](http://codex.wordpress.org/Plugin_API/Action_Reference/user_register)。它在第一次注册/创建用户帐户并传递用户 ID 时调用。应该能满足你的需求。

# windows - 如何在 Win32 上用 MinGW 编译 tcsh？

> ID：12785504
> 
> 赞同：1
> 
> 时间：2012-10-08T16:17:05.523
> 
> 标签：windows, mingw, tcsh

我现在在 Windows 上，但我没有安装 VisualStudio，我只有 MinGW（MinGW 发行版），如何用 MinGW 编译 tcsh？

# sql - -U 处的 SQL 截断表错误

> ID：12785510
> 
> 赞同：0
> 
> 时间：2012-10-08T16:17:19.567
> 
> 标签：sql, sql-server-2008, truncate

我想运行以下命令，但在“U”前面的“-”处出现错误

`sqlcmd -U foo -P Bar -S server -D db -Q "use db truncate table Table1"`

谢谢您的帮助

编辑：

`TRUNCATE TABLE table1`

不起作用，因为它说我没有权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:27:27.397

指定了我的桌子的位置

`TRUNCATE TABLE server.db.table1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:11:33.770

您的语法是正确的-除了`-D`应该是正确`-d`的-但是您没有发布确切的错误，因此尚不完全清楚出了什么问题。但是，我认为您可能正在 Management Studio 中执行 sqlcmd 命令；这样做会给我这个错误：

> 消息 102，级别 15，状态 1，第 1 行 'U' 附近的语法不正确。

但是 sqlcmd.exe 是一个命令行工具，所以你应该从命令提示符而不是 SSMS 执行它（请注意， SSMS 中的[SQLCMD 模式](http://msdn.microsoft.com/en-us/library/aa833281%28v=vs.90%29.aspx)与从命令行运行 sqlcmd.exe 不是一回事）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-30T20:21:49.490

sqlcmd -U foo -P 吧

应该是 sqlcmd -Ufoo -PBar 没有空格。

# linux - 为什么我的交易品种没有用 EXPORT_SYMBOL 导出？

> ID：12785512
> 
> 赞同：1
> 
> 时间：2012-10-08T16:17:25.790
> 
> 标签：linux, kernel, driver

我正在制作一个简单的内核对象。但不知何故，变量没有用 EXPORT_SYMBIL 宏导出。来源是：

```
#include <linux/module.h>
#include <linux/init.h>

MODULE_LICENSE("Dual BSD/GPL");

int hello_int __attribute__ ((__unused__));
EXPORT_SYMBOL(hello_int);

static int hello_init(void)
{
        printk(KERN_ALERT "driver loaded\n");
        return 0;
}

static void hello_exit(void)
{
        printk(KERN_ALERT "driver unloaded\n");
}

module_init(hello_init);
module_exit(hello_exit); 
```

但。

```
# insmod hello.ko
# cat /proc/kallsyms | grep hello

d9fb0000 t hello_exit   [hello]
d9fb000c t hello_init   [hello]
d9fb0000 t cleanup_module       [hello]
d9fb000c t init_module  [hello]
d9f6374e t br_hello_timer_expired       [bridge]
d9f64027 t show_hello_timer     [bridge]
d9f640fb t store_hello_time     [bridge]
d9f64264 t set_hello_time       [bridge]
d9f641ee t show_hello_time      [bridge] 
```

没有 hello_int 存在。但可以肯定的是，

```
# cat Module.symvers

0x8ed8de1a      hello_int       /home/ken/myprojects/hello/hello        EXPORT_SYMBOL 
```

为什么？有事吗？

```
# uname -a
Linux debian-6-0-6-i386 2.6.32-5-686 #1 SMP Sun Sep 23 09:49:36 UTC 2012 i686 GNU/Linux 
```

这是Makefile：

```
obj-m := hello.o

all:
        make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules

clean:
        make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:20:45.733

你的问题是内核配置没有[`CONFIG_KALLSYMS_ALL`](http://cateee.net/lkddb/web-lkddb/KALLSYMS_ALL.html)设置，导致它只导出函数而不是变量。我发现很难[跟踪与 this 相关的情况](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=660288)，但看起来在某个时候该标志已在其中一个内核更新中启用。

# apache-flex - 无法找到指定的基类 mx.core.WindowedApplication

> ID：12785516
> 
> 赞同：1
> 
> 时间：2012-10-08T16:17:47.243
> 
> 标签：apache-flex, air

在编译 mxml 文件时，我收到以下错误。 **无法找到指定的基类 mx.core.WindowedApplication**

它适用于`<mx:Apllication>`但它不适用于windowedApplication

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:37:41.203

好吧，您的 Flex SDK / AIR 安装没有任何问题，您可能正在使用：mxmlc 当您应该使用时：amxmlc

第一个命令“mxmlc”是将 MXML 编译为 SWF，而第二个命令“amxmlc”是将 MXML 编译为 AIR App 平台。

希望这可以帮助！

# ios-simulator - iOS 模拟器上的应用内购买导致 .../usr/libexec/lsd 崩溃

> ID：12785519
> 
> 赞同：5
> 
> 时间：2012-10-08T16:18:01.480
> 
> 标签：ios-simulator, in-app-purchase, ios6

在模拟器中测试应用内购买时，出现以下崩溃：

```
Path:            /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/usr/libexec/lsd
Parent Process:  launchd [166]

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_BAD_ACCESS (SIGBUS)
Exception Codes: KERN_PROTECTION_FAILURE at 0x0000000000000030

VM Regions Near 0x975c08c:
    MALLOC_SMALL           0000000002000000-0000000004000000 [ 32.0M] rw-/rwx SM=PRV  
--> 
    __TEXT                 000000008fed8000-000000008ff0b000 [  204K] r-x/rwx SM=COW  /usr/lib/dyld

Application Specific Information:
objc_msgSend() selector name: release
iPhone Simulator 358.4, iPhone OS 6.0 (iPhone/10A403)

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libobjc.A.dylib                 0x0073509b objc_msgSend + 15
1   CoreFoundation                  0x0098841c CFRelease + 108
2   MobileCoreServices              0x003f3fac _LSServer_CopyVendorIdentifier + 1320
3   MobileCoreServices              0x0040d912 _LSPluginServer_GetVendorIdentifierForAppIdentifier + 311
4   MobileCoreServices              0x004120bb _XGetVendorIdentifierForAppIdentifier + 238
5   MobileCoreServices              0x0041224d LSPlugin_server + 119
6   MobileCoreServices              0x0041e6e8 serverCallback + 154
7   CoreFoundation                  0x00981c93 __CFMachPortPerform + 131
8   CoreFoundation                  0x00981bf5 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
9   CoreFoundation                  0x00981962 __CFRunLoopDoSource1 + 146
10  CoreFoundation                  0x009b2bb6 __CFRunLoopRun + 2118
11  CoreFoundation                  0x009b1f44 CFRunLoopRunSpecific + 276
12  CoreFoundation                  0x009bdf91 CFRunLoopRun + 129
13  MobileCoreServices              0x0041e638 _LSServerMain + 360
14  lsd                             0x00001aa6 0x1000 + 2726
15  lsd                             0x00001a41 0x1000 + 2625

Thread 1:: Dispatch queue: com.apple.libdispatch-manager
0   libsystem_kernel.dylib          0x96f2b926 kevent64 + 10
1   libdispatch.dylib               0x01102c2b _dispatch_mgr_invoke + 863
2   libdispatch.dylib               0x011028cc _dispatch_mgr_thread + 61

Thread 2:
0   libsystem_kernel.dylib          0x96f2b02e __workq_kernreturn + 10
1   libsystem_c.dylib               0x9ae3fccf _pthread_wqthread + 773
2   libsystem_c.dylib               0x9ae416fe start_wqthread + 30

Thread 0 crashed with X86 Thread State (32-bit):
  eax: 0x8fef2b02  ebx: 0x009883be  ecx: 0x0073c2c4  edx: 0x0975c084
  edi: 0x8fef2b02  esi: 0x00187d83  ebp: 0xbfffe758  esp: 0xbfffe6f8
   ss: 0x00000023  efl: 0x00010282  eip: 0x0073509b   cs: 0x0000001b
   ds: 0x00000023   es: 0x00000023   fs: 0x00000000   gs: 0x0000000f 
```

模拟器继续运行，但应用内购买不会在模拟器上的任何地方进行。手机上的相同代码运行正常。

这个问题是升级到 Xcode 4.5.1 后的新问题。它曾经在以前的版本中运行良好。

有人遇到这个问题或知道解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T00:12:56.097

直接来自 iOS 6.0 SDK 发行说明：

> 对于此版本，iOS 模拟器不支持测试应用内购买。请使用设备测试使用此功能的应用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:39:00.143

确认 StoreKit 调用导致 lsd 错误。

这是我的解决方案，它使我所有的 lsd 错误都消失了：

```
#import <TargetConditionals.h>
- (Result *) whateverStoreKitCallingFunction
{
#if TARGET_IPHONE_SIMULATOR
    return nil;    
#else // TARGET_IPHONE_SIMULATOR
    // Do whatever normal storekit calls
    return "whatever";
#endif // TARGET_IPHONE_SIMULATOR
} 
```

# java - 正则表达式不会捕获文本文档中的第一个单词。是因为之前什么都没有吗？

> ID：12785522
> 
> 赞同：3
> 
> 时间：2012-10-08T16:18:30.583
> 
> 标签：java, regex

**我正在使用一个 3rd 方应用程序，它使用 java 的正则表达式来捕获匹配项。遗憾的是，在运行正则表达式搜索之前，我无法实现任何会在 html 文档开头添加内容的 java 代码，因为应用程序中不允许这样做。它有很多值得使用的功能，而不是传统的方式，否则我会那样做。**

这个 HTML 文档实际上只有`<br>`标签，但无论`<br>`用于指定新段落的标签如何，每个句子后总是有一个空格。

由于 html 标签，我开始使用它，在我注意到它没有捕获第一个单词之前：

```
[\s](.*?)[.!?]\s 
```

之后我尝试了一个单词边界，但没有成功，但随后它开始在每场比赛中抓取“br>”：

```
[\b](.*?)[.!?]\s 
```

这样，它就可以捕获从空格或单词边界到完成句子的标点符号，然后是空格的所有内容。

**这适用于整个文档中的每个其他句子，除了它在所有不同文档上每次都丢弃文档的第一个单词。**可能是因为在第一个词之前什么都不存在？

**这是从一开始**的一些示例文本：

```
The troll who who lived under the bridge was quite sad. He couldn't help from 
trolling without making others mad. He had no friends because of this, but he
could never stop. It made his constantly feel alone. No other soul would comfort
him. <br> 
```

这总是返回这样的句子：

```
troll who who lived under the bridge was quite sad
He couldn't help from trolling without making others mad
He had no friends because of this, but he could never stop
etc... 
```

如您所见，第一句话中缺少第一个。

**它总是放弃第一个单词，因为它之前不存在任何东西（至少这是我假设的）。**

**我怎样才能让它工作？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:07:08.250

这是我在 PHP 中测试的一种解决方案（但它不应该使用 Java 中不可用的正则表达式功能）。

```
/\b([^<>]*?)[.!?]\s/ 
```

由于您说字符串中包含的唯一 HTML 标记是`<br>`您可以简单地说句子只能包含既不是`<`也不是的字符`>`。为此，我简单地替换`.*?`为`[^<>]*?`（这是一个否定字符类）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:29:23.497

您正在指定一个正则表达式，它**需要**在每个单词 ( `[\b\s] ...`) 之前有一个单词边界。因此，对于任何不以单词边界开头的文本，正则表达式将不匹配第一个单词。
尝试`"\\s+|\\w+|\\p{Punct}+"`改用它，它将为您提供单独的空格组 (1)、字母和/或数字组 (2) 和标点符号组 (3) 的匹配项。

使用以下代码进行测试：

```
Pattern p = Pattern.compile("\\s+|\\w+|\\p{Punct}+");
Matcher m = p.matcher("Hello world! How are you?");

int i=0;
while(m.find()){
  System.out.printf("[%02d] - %s",i,m.group());
  i++;
} 
```

返回：

```
[00] - Hello
[01] -  
[02] - world
[03] - !
[04] -  
[05] - How
[06] -  
[07] - are
[08] -  
[09] - you
[10] - ? 
```

* * *

**更新：**

从文本中提取句子很困难，因为单词（较低级别）使用一些相同的边界。

根据您的具体句子，您可能能够成功地制作基于正则表达式的解决方案，但如果不使用 Java、C 或其他“控制台”语言，您可能无法处理所有可能的句子格式。

例如，您当前的代码不会处理以`:`,`;`或`%`;结尾的句子。但是可以使用正则表达式来实现解决方案。

但是有些情况仅靠正则表达式无法处理；特别是像`"\"I'll quit being a troll!\" - The troll said."`.

# c++ - 忽略无效的转换错误，GCC

> ID：12785523
> 
> 赞同：3
> 
> 时间：2012-10-08T16:18:34.613
> 
> 标签：c++, qt, gcc

我已经在 Windows 上使用 MinGW 进行了一段时间的项目，现在我正在尝试在 Mac 上编译它（使用 GCC）。我正在使用Qt，但这与问题没有太大关系。

为什么 GCC 这么正式，让我什么都投？我必须经历并施放所有不匹配的东西，这太荒谬了。

例如，它会抛出错误：

```
main.cpp: error: invalid conversion from 'const char*' to 'char*' 
```

使用此代码：

```
const char *a = "a";
char *b = a; 
```

是否有任何标志可以传递给 GCC 编译器或任何预处理器指令来告诉它忽略这些？谢谢。

**编辑：**让我重新措辞。为什么这适用于 MinGW 而不是 GCC，我可以让它在 GCC 上运行吗？

**编辑 2：** MinGW - [http://i.imgur.com/zGvf6.png](http://i.imgur.com/zGvf6.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T16:24:38.550

这并不是说 gcc 是迂腐的。`const char*`是指向 的指针，它与指向`const char`的 非常不同。对于后者你可以修改指针的内容，对于前者你不能。允许这种转换是隐式的会引起严重的错误，因为使用非 const 指针修改内容是微不足道的，即使内容应该是不可修改的。`char*``char``a`

从理论上讲，您可以抛弃 constness：

```
char* b = const_cast<char*>(a); 
```

这告诉编译器你知道你正在做的事情是不安全的，但是如果发生了可怕的事情（你试图修改 a 的数据`const char*`）你将承担全部责任，因为你**明确**告诉它在那个位置忽略 const 是好的. 类似的事情应该很少做，并且只有在验证它是好的之后。

查找 gcc 和 mingw 在编译时实际上接受了隐式`-fpermissive`转换（这会将其降级为警告）。但是使用这种不安全的功能是一个**非常糟糕的主意**，所以我的建议是尽可能远离这些邪恶的诱惑。而不是降低错误阈值，我宁愿建议像`-Wall`,`-Wextra`甚至可能使编译`-pedantic`器`-Werror`尽可能挑剔的选项。这样做在编程时可能会很痛苦，但可以轻松地为您节省数小时的调试时间（`-Werror`当然，没有警告策略）。

`char*`与您的问题没有直接关系，但由于您使用的是 c++：当您可以使用时，为什么需要`std::string`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:27:21.517

没有选项可以忽略此转换，因为 a 是 cont char*，这意味着 a 指向的值不应更改，因此从 const char* 到 char* 的强制转换被认为是不安全的，因为 b 可以更改 a 指向的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-10T12:59:16.710

这不应该**在**任何编译器中工作。但是，一些旧版本的编译器、C 标准和其他差异可能会导致该错误不会被发出（或只是一个警告）。我相信 GCC 可以配置为允许这样做，但我不会查看它是如何完成的，因为对该数据的任何进一步写入访问都会导致未定义的行为。相反，您应该修复您的代码。您需要在什么场景中使用它？

# python - Python设置相邻字母的组合

> ID：12785524
> 
> 赞同：3
> 
> 时间：2012-10-08T16:18:39.673
> 
> 标签：python, permutation, combinations

我有一个字母序列，并希望通过切断某个字母周围的字母来找到所有可能的字母组合。

C 是我这里的特殊字母，X 可以是任何东西，所以有一个序列：

```
XCXX 
```

所以所有可能的组合都是：

```
XCXX
XCX
XC
CXX
CX
C 
```

是否有一个 python 函数，或者我应该从头开始编写它？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T16:32:24.270

我会像这样从头开始编写代码：

```
def cuts(s,i): 
   return [ s[a:b] for a in range(i+1) for b in range(i+1,len(s)+1)] 
```

哪里`s`是字符串，`i`是你的“特殊字母”的索引`s`。例子：

```
>>> cuts('XCXX', 1)
['XC', 'XCX', 'XCXX', 'C', 'CX', 'CXX'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T16:24:36.763

尝试计算您的特殊元素之前和之后的元素数量`C`。然后你的组合由这两个数字唯一定义，你可以使用字符串切片来获得一个特定的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T16:34:29.737

不，但是您可以将其作为单线。

```
data = "XCXX"
cIndex = data.index("C")
permutations = [data[i:j+1] for i in range(cIndex+1) 
        for j in range(cIndex, len(data))] 
```

# .net - 如何在主报表和子报表之间链接参数

> ID：12785525
> 
> 赞同：0
> 
> 时间：2012-10-08T16:18:41.910
> 
> 标签：.net, crystal-reports

我正在使用 Crystal Reports for Net 4.0。

我的主报告和我的子报告基于两个不同的存储过程。它们都使用相同的参数 SubmissionControlId。SubmissionControlId 的值不会传回主报告，只传给子报告。我想链接这些值，以便在调用子报告存储过程时也使用在主报告中传递给 SubmissionControlId 的任何值。

我无法使语法正确。我想我需要使用共享变量，但我不确定如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:32:18.713

您可以仅在主报告中使用参数**SubmissionControlId**，并从子报告中删除相同的参数。

现在右键单击子报表并选择**更改子报表链接**，该链接显示一个对话框，您可以在其中配置主报表与子报表之间的链接。

链接完成后，您也可以在子报告中找到的主报告中看到相同的参数。在子报表记录选择公式中，您可以找到基于主报表参数选择的记录。

希望这可以帮助。尝试并返回结果。

# java - 添加和实体以使用 @ManyToMany 设置而无需恢复整个设置

> ID：12785526
> 
> 赞同：0
> 
> 时间：2012-10-08T16:18:46.700
> 
> 标签：java, spring, hibernate, jpa

我有一个对象，它有一个使用 ManyToMany 映射的集合。该集合可以是相当大的数十万个整体。当我想向集合中添加成员时，JPA 会在添加新条目之前撤回集合中的每个对象。

```
@ManyToMany(fetch=FetchType.LAZY)
@JoinTable(name = "ROOM_USER",
            joinColumns = @JoinColumn(name = "ROOM_ID"),
            inverseJoinColumns = @JoinColumn(name = "USER_ID"))
private Set<User> members; 
```

稍后在服务类中，我想将用户添加到集合中，如下所示

```
 room.addMember(user); 
```

由于关系被声明为惰性，因此当我在房间上调用 addMember 时，代理会获取成员集。这里的问题是当集合变大时，检索成员集合需要相当长的时间。在这种情况下，索引工作正常，我检查了 mysql 中的查询，问题很简单，它提取了大量数据，而我真正想要的只是将行添加到 ROOM_USER 连接表中。

JPA 是否定义了一种将成员添加到集合而不拉回整个集合的方法？

其他一些注意事项我正在使用 Spring 框架和 Hibernate 来实现 JPA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-11T13:40:35.030

我想出的解决方案是创建另一个表示连接的对象，称为 UserRoom。然后我创建了一个相应的服务，允许我直接向该表添加行。

```
 @Entity
    @Table("USER_ROOM")
    public class UserRoom {

         @Id
         private Long id;

         @ManyToOne(fetch=FetchType.EAGER)
     @JoinColumn(name="USER_ID")
         private User user;

         @ManyToOne(fetch=FetchType.EAGER)
     @JoinColumn(name="ROOM_ID") 
         private Room room;
} 
```

希望这对将来的某些人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:34:36.817

最简洁的答案是不。访问集合后，惰性集合映射将立即初始化。没有规定访问集合的子集。

一般来说，非常大的集合不是这种关联的好候选者，这正是您所看到的原因。

但是，有一些非 JPA 扩展允许额外的惰性映射，即每个条目的初始化。这里有更多内容[。](https://sites.google.com/a/pintailconsultingllc.com/java/hibernate-extra-lazy-collection-fetching)

# objective-c - 如何用很少的颜色画画

> ID：12785527
> 
> 赞同：0
> 
> 时间：2012-10-08T16:18:49.037
> 
> 标签：objective-c, colors, charts, draw, drawrect

他我正在制作简单的饼图，我在绘制它时遇到了问题。我想改变每张饼图的颜色，但是当方法 drawRect: 被调用时，我的饼图是单色的。如何正确制作？

```
for (int i = 0; i < [values count]; i++) {
    CGContextSetRGBFillColor(ctx, 0.2*i, 0.2*i, 0.2*i, 1);

    [bezierPath moveToPoint:chartCenter];

    startAngle = endAngle;

    endAngle = startAngle + [self degreesToRadians:[values[i] floatValue]*step];
    NSLog(@"%.2f, %.2f", startAngle, endAngle);

    [bezierPath addArcWithCenter:chartCenter radius:radius startAngle:startAngle endAngle:endAngle clockwise:1];
    [bezierPath addLineToPoint:chartCenter];

    [bezierPath fill];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:14:35.487

我不是 100% 确定，但我认为你必须使用`-[UIColor setFill]`来设置贝塞尔路径的填充颜色，例如

```
UIColor *color = [UIColor colorWithWhite:0.2*i alpha:1.0];
[UIColor setFill]; 
```

您可能还应该为每个图表段开始一个新的贝塞尔路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:22:54.770

好的，我的代码工作正常。我的绘图方法有一些错误，我创建的是圆而不是弧。非常遗憾。

问题出在这种方法中：

-(float)degreesToRadians:(float)degrees{ 返回度数 * M_PI / 180; }

我使用`M_1_PI`而不是，`M_PI`我的弧是圆圈。

# iphone - iOS6中控制MKMapView的动画速度

> ID：12785529
> 
> 赞同：8
> 
> 时间：2012-10-08T16:18:58.250
> 
> 标签：iphone, ios, animation, mkmapview, ios6

我正在尝试在地图视图上跟随汽车。

这段代码应该以相同的速度为汽车和地图设置动画，以便注释视图始终出现在中心：

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationCurve:UIViewAnimationCurveLinear];
[UIView setAnimationDuration: 1.0];
[UIView setAnimationBeginsFromCurrentState:YES];

[car setCoordinate:coord];
[mapView setCenterCoordinate:coord];

[UIView commitAnimations]; 
```

**它在 iOS 5 中运行良好。在 iOS 6 中，地图不再动画，但汽车确实动画。**

我试过`[mapView setCenterCoordinate:co animated:YES]`了，但后来我无法控制动画速度。它将始终以默认持续时间（0.2 秒）进行动画处理。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T14:19:40.500

我今天遇到了同样的问题。我认为问题不依赖于 MKMapView，而是 ios6 管理动画的（新）方式。

似乎在 ios6 中，如果动画在前一个动画完成之前发生（取决于运行循环），则旧动画会被新动画打断。我认为只有在使用“beginsFromCurrentState”选项或属性（取决于您是否使用基于块的动画）时才会发生这种情况（由新的）。

可以肯定的是，我认为您应该尝试使用基于块的动画来查看您的动画是否真的被另一个动画打断了。

此代码必须与您的代码等效，并允许您查看动画是否已被中断或取消（如果“完成”为假）：

```
[UIView animateWithDuration:1.0 delay:0.0f options:(UIViewAnimationOptionCurveLinear | UIViewAnimationOptionBeginFromCurrentState) animations:^{

    [car setCoordinate:coord];
    [mapView setCenterCoordinate:coord];

} completion:^(BOOL finished){
    NSLog(@"has not been interrupted : %d", finished);
}]; 
```

（在 iOS < 6 中，"finished" 应该是真的......）

就我而言，我的动画似乎被以下 UIViewController 的方法打断了，这些方法是由系统在动画块中执行的，打断了我的动画链：

```
- (void)viewWillAppear:(BOOL)animated;
- (void)viewDidAppear:(BOOL)animated; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-02T14:22:45.447

我发现标准 UIView AnimationWithDuration 如果格式如下：

```
// create a region with a center coordinate and a degree span
let center = CLLocationCoordinate2D(latitude: 42.3601, longitude: -71.0689)
let span = MKCoordinateSpanMake(1.0, 1.0)
let region = MKCoordinateRegion(center: center, span: span)

UIView.animateWithDuration(3.0,
             delay: 0.0,
           options: .CurveEaseInOut | .AllowUserInteraction,
        animations: {
                    self.mapView.setRegion(region, animated: true);
        },
        completion: { finished in
                    println("completed 3 second animation to new region")
        }) 
```

希望这也对你有用！:)

（注意：有人向我指出，此响应是针对 iOS7/8 的，而问题是针对 iOS6 的。）

* * *

而且，这个简单的方法实际上可以正常工作......

```
 let c = mkMap.userLocation.coordinate
    let r = CLLocationDistance( 1500 )
    let cr = MKCoordinateRegionMakeWithDistance( c, r, r )

    UIView.animate(withDuration: 1.4, animations: { [weak self] in

        self?.mkMap.setRegion( cr, animated: true)
    }) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-18T15:55:06.920

在以下方法中使用这些方法时，似乎无法控制 iOS 6 中的动画速度`MKMapView`：

```
- (void)setRegion:(MKCoordinateRegion)region animated:(BOOL)animated;
- (void)setCenterCoordinate:(CLLocationCoordinate2D)coordinate animated:(BOOL)animated;
- (void)setVisibleMapRect:(MKMapRect)mapRect animated:(BOOL)animate;
- (void)setVisibleMapRect:(MKMapRect)mapRect edgePadding:(UIEdgeInsets)insets animated:(BOOL)animate; 
```

但是我发现了一个具有持续时间参数的私有方法。因此，我通过子类化 MKMapView 并覆盖私有方法（仅存在于 iOS6 中）解决了我的问题：

**MyMapView.h**

```
#import <MapKit/MapKit.h>

@interface MyMapView : MKMapView

@property(nonatomic) BOOL overridesAnimationDuration;
@property(nonatomic) NSTimeInterval mapAnimationDuration;

@end 
```

**我的地图视图.m**

```
@interface MKMapView (Private)
- (void)_setZoomScale:(float)scale centerMapPoint:(CLLocationCoordinate2D)center duration:(double)d animationType:(int)animType;
@end

@implementation MyMapView
- (void)_setZoomScale:(float)scale centerMapPoint:(CLLocationCoordinate2D)center duration:(double)d animationType:(int)animType
{
    if (_overridesAnimationDuration) {
        d = _mapAnimationDuration;
    }
    [super _setZoomScale:scale centerMapPoint:center duration:d animationType:animType];
}    
@end 
```

我添加了 2 个允许您覆盖默认动画时间的属性。要在区域更改之前将其设置`overridesAnimationDuration`为 YES，请设置`mapAnimationDuration`为所需的持续时间并`overridesAnimationDuration`在代表呼叫中切换为 NO `mapView:regionWillChangeAnimated:`。

请注意，这可能不适用于未来的 iOS 版本，因为它是私有 API。Apple 可以删除或更改此方法。

# spring - jstl：如何知道变量？它有一些范围吗？

> ID：12785531
> 
> 赞同：0
> 
> 时间：2012-10-08T16:19:25.290
> 
> 标签：spring, jsp, jstl, jsp-tags

我只想将 jstl:core 与 SpringMVC 一起使用。

我的控制器包含类似：

```
private Map<UUID, ProductBean> products = new ConcurrentHashMap<UUID, ProductBean>(); 
```

…………

```
@RequestMapping(value="/createproduct/{pbid}", method=RequestMethod.GET)
public String getProduct(HttpServletRequest req, Model model, @PathVariable("pbid") UUID pbid) {
    if(!products.containsKey(pbid)){
        ProductBean tmp=new ProductBean();
        products.put(pbid, tmp);
        //model.addAttribute("product",tmp);
        System.err.println("============empty now===============\n");
    }else{
        ProductBean tmp=products.get(pbid);
        System.err.println(pbid.toString());
        System.err.println(tmp.getMpf().printFileNameList());
    }
    req.getSession().setAttribute("pbId", pbid);
    model.addAttribute("pbId", pbid);
    return "production/createproduct";
} 
```

我想要简单地使用 jstl，例如：

```
 <c:choose>

                <c:when test="${products.get(pbId).getMpf().size()==0}">

                    <p>No pictures uploaded</p>
                </c:when>
                <c:otherwise>

                    <ul id="products">
                                            ......
                    </ul>
                </c:otherwise>
    </c:choose> 
```

但是程序永远不会去第一个分支

我在我的jsp中添加了 <%@ page import="java.util.*" language="java" %> 包，但它似乎不起作用。我遵循[http://www.springbyexample.org/examples/spring-web-flow-subflow-webapp-jsp-example.html](http://www.springbyexample.org/examples/spring-web-flow-subflow-webapp-jsp-example.html)中的示例。似乎他们也有变量没有像 ${persons} 那样在 jsp 中声明。我希望 products 变量可以同时使用控制器和 jsp 视图部分。我需要做什么？我应该在哪里申报？我需要在我的jsp中包含其他包吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:28:03.027

看起来您的控制器已注释掉以下行：

```
//model.addAttribute("product",tmp); 
```

JSP 正在模型中寻找一个名为 的对象`products`。这是通过 引用某些内容时的默认范围`${products}`。由于您的控制器从不添加具有此名称的对象，因此它会失败`c:when`.

此外，要访问 JSTL 中的列表元素，请使用以下表示法：

```
${products[4]} 
```

请参阅[如何使用 JSTL 选择集合的第一个元素？](https://stackoverflow.com/questions/1000876/how-to-select-the-first-element-of-a-set-with-jstl)有关这方面的更多详细信息。

此外，您不应该使用`.getXxx()`任何一种。假设您的对象符合[Javabean 规范](http://www.oracle.com/technetwork/java/javase/documentation/spec-136004.html)，您引用的项目名称如下：

```
${products[4].mpf} 
```

# bash - “找不到命令”消息也被重定向

> ID：12785533
> 
> 赞同：1
> 
> 时间：2012-10-08T16:19:32.720
> 
> 标签：bash, shell

```
$ foobar
sh: foobar: not found
$ foobar 2>/dev/null
$ 
```

我正在尝试仅重定向 foobar 的 stderr（如果 foobar 存在并且可以运行），但 shell 的错误消息也被重定向。这发生在 bash、ksh 和 sh 中，但不在 csh 中。我不熟悉 bourne shell 源代码，但我猜这是因为 shell 首先分叉，然后重定向，然后尝试 exec()，当 exec() 失败时，它会向已经重定向的 stderr 发送错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:21:55.427

如果 foobar 是一些可执行文件，请尝试：-

```
$ ./foobar
sh: foobar: not found
$ ./foobar 2>/dev/null #alternatively you can use full path.
$ 
```

# android - 从 URL 打开活动，然后在活动中使用该 URL

> ID：12785534
> 
> 赞同：2
> 
> 时间：2012-10-08T16:19:36.510
> 
> 标签：android, url, android-intent, android-activity

我基本上希望用户点击一个 URL（在浏览器或电子邮件客户端内），然后这个动作来启动一个活动（应用程序）。根据我的阅读，可以使用意图过滤器来完成。我还需要在我的活动中使用该 URL，因为它对于使用该应用程序的每个用户都是唯一的。我不确定如何完成最后一部分，因此我将不胜感激。谢谢你。

# msbuild - 从 MSBuild 中的文件中读取单个值

> ID：12785535
> 
> 赞同：5
> 
> 时间：2012-10-08T16:19:40.237
> 
> 标签：msbuild, version

我正在尝试从 MSBuild 中的文件中读取版本号：

```
<ItemGroup>
    <VersionFile Include="Properties\VERSION" />
</ItemGroup>
<Target Name="BeforeBuild">
    <ReadLinesFromFile File="@(VersionFile)">
        <Output TaskParameter="Lines" ItemName="VersionNumber" />
    </ReadLinesFromFile>
</Target> 
```

我只需要这个文件的第一行。如何将该值与 中的另一个字符串连接起来`WriteLinesToFile`？这不起作用：

```
<WriteLinesToFile
    File="$(AssemblyVersionFile)"
    Lines="[assembly: AssemblyVersion(&quot;@(VersionNumber)&quot;)]" /> 
```

我收到一个错误：

> 错误 MSB4012：无法在此上下文中使用表达式“[assembly: AssemblyVersion("@(VersionNumber)")]”。项目列表不能与需要项目列表的其他字符串连接。使用分号分隔多个项目列表。`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T16:53:17.223

我对 MSBuild 不太熟悉，但将[ReadLinesFromFile](http://msdn.microsoft.com/en-us/library/ms164299.aspx)`Output`更改为属性并使用在[WriteLinesToFile](http://msdn.microsoft.com/en-us/library/ms164305.aspx)中访问它似乎有效：`$`

```
<Target Name="BeforeBuild">
    <ReadLinesFromFile File="@(VersionFile)">
        <Output TaskParameter="Lines" PropertyName="VersionNumber" />
    </ReadLinesFromFile>
    <WriteLinesToFile
        File="output.txt"
        Lines="[assembly: AssemblyVersion(&quot;$(VersionNumber)&quot;)]" />
</Target> 
```

# iphone - 想要放大图片的位置

> ID：12785538
> 
> 赞同：0
> 
> 时间：2012-10-08T16:19:45.127
> 
> 标签：iphone, objective-c, ios, ipad, uiscrollview

在我的 iPad 应用程序中，我想缩放图像，并且，如果有人滚动缩放图像进行查看，我想在另一个带有方形框架的图像视图中显示该人看到的图像部分，就像下面的图像一样红框。

我知道我可以获得滚动和缩放值，但我怎样才能获得位置？

![在此处输入图像描述](../Images/0c8393281f3e7463ba4ece8576819a08.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:43:31.207

我不知道您如何缩放它，但更好的方法是使用

1.  UIScrollView
2.  将图像视图添加到它
3.  使用滚动视图的委托方法，如
    *   (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
    *   (void)scrollViewDidZoom:(UIScrollView *)scrollView
    *   (void)scrollViewDidEndZooming:(UIScrollView *)scrollView withView:(UIView *)view atScale:(float)scale

您可以通过 ScrollView.contentOffset.x 和 y 获得缩放区域。然后使用 UIGraphic 绘制矩形它会是这样的

```
GRect rect // original frame
UIGraphicsBeginImageContext(rect.size);
CGContextRef context = UIGraphicsGetCurrentContext(); 
```

请参阅以下链接以绘制矩形：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html)

完成绘制矩形后，您可以通过以下功能获得矩形图像

```
IImage *image = UIGraphicsGetImageFromCurrentImageContext();
//show above image in another imageview 
```

# asp.net - 如何在 IIS 7.5 中配置 alwaysAllowedQueryStrings

> ID：12785539
> 
> 赞同：1
> 
> 时间：2012-10-08T16:19:44.593
> 
> 标签：asp.net, configuration, web-config, iis-7.5

现在我在我开发的网站上有问题。如果用户在 URL 的末尾键入一个点序列（超过 2 个），他将从 IIS 获得默认的 404 响应。但我希望这种情况由 ASP.Net 代码处理。我正在尝试将我的 IIS 配置为允许此序列，但我没有成功。我不明白我做错了什么。为此，我在 web.config 文件中添加下一行（这里我使用 3 个点仅用于测试）：

```
<system.webServer>
...
            <security>
            <requestFiltering>
              <alwaysAllowedQueryStrings>
                  <add queryString="\..." />
              </alwaysAllowedQueryStrings>
            </requestFiltering>
        </security>
  </system.webServer> 
```

在 Visual Studio 节点中，由蓝色波浪线标记为无效的**alwaysAllowedQueryStrings 。**VS 显示以下消息：“元素 'requestFiltering' 有一个无效的子元素 'alwaysAllowedQueryStrings'。预期的可能元素列表：'fileExtensions、requestLimits、verbs、hiddenSegments、denyUrlSequences'”。所以似乎 IIS 或 VS 不知道这种类型的节点。但下一个链接：
[http](http://www.iis.net/configreference/system.webserver/security/requestfiltering/alwaysallowedquerystrings) ://www.iis.net/configreference/system.webserver/security/requestfiltering/alwaysallowedquerystrings 说“alwaysAllowedQueryStrings”是 IIS 7.5 的默认功能，在服务器上我有 IIS 7.5.7600.16385。

我试图重新安装 IIS 的请求过滤功能，但不幸的是没有任何改变。

请分享您的想法，为什么它对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:40:06.890

我认为你走错了路。虽然“/Page.someextension”可能是对 Web 服务器上资源的有效请求，但“/Page.someextension”。可能不是，因为这是对名为“Page.someextension”的不同文件的不同请求。

这与查询字符串无关。

如果您想接受“/Page.someextension”之类的请求。并用“Page.someextension”处理它，也许[URL Rewrite](http://www.iis.net/learn/extensions/url-rewrite-module/using-the-url-rewrite-module)会做你需要的。

# javascript - 使用 jQuery 从 JSON 中获取值

> ID：12785540
> 
> 赞同：1
> 
> 时间：2012-10-08T16:19:45.067
> 
> 标签：javascript, jquery, json

我得到以下字符串：

```
[{"Key":1,"Value":"correct"},{"Key":2,"Value":"incorrect"},{"Key":3,"Value":"incorrect"},{"Key":4,"Value":"correct"},{"Key":5,"Value":"incorrect"}] 
```

我想根据该 TR 的 ID 在 JSON 中是否具有“正确”或“不正确”的值来更改我的 TR 的背景颜色。

如何从 JSON 中获取单个项目的值？我试过了：

```
 success: function (result) {
                // update with results
                //alert(JSON.stringify(result));
                //$('#myDiv').html(JSON.stringify(result));

                // non of these work
                alert(result[0]);
                alert(result[key]);
            }, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:22:22.007

您可以使用它`$.each()`来迭代对象数组。

```
$.each(result, function(i, item) {
    alert(item.Key);
}); 
```

在对 , 的回调中`$.each()`，`item`将引用正在迭代的 Array 中的当前项。

然后，您只需使用普通的属性访问来获取属性的值`Key`。

* * *

当然你也可以使用传统的`for`语句来循环数组。

```
for (var i = 0; i < result.length; i++) {
    var item = result[i];
    alert(item.Key);
} 
```

* * *

所有这些都假设您的响应具有正确的`Content-Type`设置，或者您已经`dataType:"json"`给予`$.ajax()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:26:53.083

您可以将 JSON 格式转换为 Object，在您的情况下它将是数组，因此您可以使用 forEach 检查您想要的内容。

试试这个

```
var obj= JSON.parse( '[{"Key":1,"Value":"correct"},{"Key":2,"Value":"incorrect"},{"Key":3,"Value":"incorrect"},{"Key":4,"Value":"correct"},{"Key":5,"Value":"incorrect"}]' );

obj.forEach(function(i){alert(i.Key);alert(i.Value) }) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T16:30:12.653

看看这个：[http](http://goessner.net/articles/JsonPath/.I) ://goessner.net/articles/JsonPath/ 。我没有使用它，但看起来像是从 Json 结构中获取值的好方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T16:21:35.533

确保在 Ajax 请求中指定 .. **dataType:'json'**

尝试

```
alert(result[0]["key"]);  // For the first 
```

//

```
$.each(result , function(i) {
    console.log( 'Key is - ' + result[i]["Key"] + ' -- Value is - ' + result[i]["Value"]);
}); 
```

[检查 FIDDLE](http://jsfiddle.net/sushanth009/RXqAm/395/) </p>

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T16:23:38.077

您没有指定，但假设 JSON 字符串是您的 ajax 代码作为响应接收的内容，那么您实际上是在重新对该文本进行 JSON 处理，因此它变成了一个双编码字符串。

jquery 可以为您自动解码回本机结构，如果您说您期望 json 作为响应，例如

```
$.ajax({
   dataType: 'json',
   etc...
}); 
```

那么你就会有

```
alert(result[0]['key']); 
```

或者

```
data = jquery.parseJSON(result);
alert(data[0]['key']); 
```

# c# - 在 C# 中合并 xml 文件

> ID：12785547
> 
> 赞同：1
> 
> 时间：2012-10-08T16:20:18.170
> 
> 标签：c#, xml, merge

我想合并一些 xml 文件。目标 xml 与源文件略有不同。目标文件包含一个附加的根元素。

例如。

目标xml：

```
<?xml version="1.0" encoding="utf-8"?>
<customer ID="A0001" name="customername">
.....
.....
</customer> 
```

源代码：

```
<?xml version="1.0" encoding="utf-8"?>
<order number="00001">
    <.....>
    <.....>
    <.....>
</order> 
```

每个源 xml 文件都需要在`<customer ...>`和之间插入`</customer>`

源文件可能非常大（例如 2 Gb）。

我可以使用根元素编写目标 xml 文件并使用 XmlTextReader 读取源文件和

```
string myOrder = textReader.ReadOuterXml();
                        writer.WriteRaw(myOrder ); 
```

结果（每个订单都是不同的 xml 文件）

```
<?xml version="1.0" encoding="utf-8"?>
<customer ID="A0001" name="customername">
    <order number="00001">
        <.....>
        <.....>
        <.....>
    </order>
    <order number="00002">
        <.....>
        <.....>
        <.....>
    </order>
    <order number="00003">
        <.....>
        <.....>
        <.....>
    </order>
</customer> 
```

但我担心使用 ReadOuterXml() 的大文件内存不足。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:41:14.800

听起来在这种特殊情况下，假设所有文件都真正使用 UTF-8，您基本上可以作弊。.NET 4 使这变得特别容易：

```
public void MergeFiles(string outputPath, string prefix, string suffix,
                       IEnumerable<string> files)
{
    File.WriteAllText(outputPath, prefix);
    var lines = files.SelectMany(file => File.ReadLines(file).Skip(1));
    File.AppendAllLines(outputPath, lines);
    File.AppendAllText(outputPath, suffix);
} 
```

这并不*像*它可能的那样有效，因为它会打开输出文件三次 - 但它写得尽可能简单。请注意，`lines`这里是惰性的——这*不会*将源文件完全读入内存；它会一次读取一行。

它确实*依赖*于以 XML 声明开头并采用 UTF-8 格式的每个文件。您可以使用更强大的流媒体方法，但如果您对源格式有信心，这非常简单......

编辑：示例用法：

```
string prefix = "<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n"
              + "<customer ID=\"A0001\" name=\"customername\">";
MergeFiles("output.xml", prefix, "</customer>", sourceFiles); 
```

# hibernate - 休眠验证器 @ScriptAssert 未调用

> ID：12785549
> 
> 赞同：2
> 
> 时间：2012-10-08T16:20:21.250
> 
> 标签：hibernate, validation

我正在尝试使用 @ScriptAssert 执行跨字段验证。但它从未被执行。我不知道为什么。我的代码与此类似：

```
@ScriptAssert(lang = "javascript", script = "_this.passVerify.equals(_this.pass)")
public class MyBean {
 @Size(min=6, max=50)
 private String pass;
 private String passVerify;
} 
```

我已经尝试过疯狂的事情，比如下一个代码期望收到某种错误，但注意到发生了：

```
@ScriptAssert(lang = "ANYTHING", script = "SARASA")
public class MyBean {
 @Size(min=6, max=50)
 private String pass;
 private String passVerify;
} 
```

我已经尝试使用 HV 4.1.0 Final，现在使用 hv 4.3.0 Final。谢谢。是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-03T07:38:57.817

您是否对这个 bean 进行了验证？如果您使用的是 Spring MVC，则验证代码应如下所示：

```
@RequestMapping(
    method = RequestMethod.POST,
    value = "/a/b"
)
public String save(@Validated final MyBean myBean, final BindingResult result) {
    if (result.hasErrors()) {
        // do something
    }
    ...
} 
```

我希望这会有所帮助。

# mongodb - Mongo MapReduce 选择最新日期

> ID：12785550
> 
> 赞同：4
> 
> 时间：2012-10-08T16:20:22.963
> 
> 标签：mongodb, mapreduce

我似乎无法让我的 MapReduce reduce 函数正常工作。这是我的地图功能：

```
function Map() {
    day = Date.UTC(this.TimeStamp.getFullYear(), this.TimeStamp.getMonth(),this.TimeStamp.getDate());   

    emit(
        {
            search_dt: new Date(day),
            user_id: this.UserId
        },                  
        {
            timestamp: this.TimeStamp
        }   
    ); 

} 
```

这是我的减少功能：

```
function Reduce(key, values) {

    var result = [timestamp:0];

    values.forEach(function(value){
        if (!value.timestamp)
            continue;
        if (result.timestamp < value.timestamp)
            result.timestamp = value.timestamp; 
    }); 
    return result;

} 
```

我想检索分组对象的最新日期。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T06:58:58.027

您是否考虑过使用以下任一方法？

在集合中找到 MAX **timeStampField**：

```
db.collectionName.ensureIndex( { "timeStampField": -1 } );
db.collectionName.find({},{"timeStampField":1}).sort({timeStampField:-1}).limit(1); 
```

或者：

查找集合中每个**user_id**的 MAX **timeStampField**（如果数据库未分片）：

 **```
db.collectionName.group(
  {  key: { "user_id" : 1 }
   , initial: { maxTimeStamp   : new Timestamp()  }
   , cond:    { timeStampField : {$exists : true}, timeStampField : {$gt: new Timestamp()} }
   , reduce:  function(doc,out) { 
                  if (out.maxTimeStamp < doc.timeStampField) { 
                      out.maxTimeStamp = doc.timeStampField; 
                  }
              }
  }
); 
```**

# iphone - 当它是文件的所有者时，为什么我不能在 Interface Builder 中编辑 UIViewController 的属性？

> ID：12785555
> 
> 赞同：2
> 
> 时间：2012-10-08T16:20:37.287
> 
> 标签：iphone, ios, xcode, xcode4, interface-builder

我创建了一个新的“标签栏应用程序”项目，它给了我一个 FirstViewController.xib 和 SecondViewController.xib。

在`AppDelegate`标签栏控制器中配置如下：

```
UIViewController *viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
UIViewController *viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, viewController2, nil];
self.window.rootViewController = self.tabBarController; 
```

这显然会从 nib 文件加载一个实例`UIViewController`，不是吗？但是当我打开 SecondViewController.xib 时，我看到的唯一根级对象是视图控制器的视图。这对我来说没有意义，因为我相信整个`UIViewController`实例实际上是从那个笔尖出来的。

剩下的在哪里？为什么我看不到`UIViewController`标题等属性？当我单击 Files Owner 时，Identity 选项卡显示“SecondViewController”，因此 Files Owner 肯定是一个`UIViewController`，但它似乎没有存档在 nib 中。实际上，该实例似乎是通过编程方式创建的，而 nib 似乎只归档视图。

令人困惑，因为 nib 文件的名称是 SecondViewController.xib。有人可以澄清吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:30:37.250

当一个对象是“nib 文件所有者”时，这意味着它在加载 nib 之前已经被实例化（不一定是“初始化”）。当您加载笔尖时，它不会创建所有者，它只是将插座连接到所有者。

我同意，您无法使用 IB 中的“属性”面板在通过 initWithNibName 初始化的视图控制器上设置属性的初始值，这令人困惑。

但是，我相信您可以通过文件所有者的 IB 中的用户定义的运行时属性面板在文件所有者上设置属性值（仅限 XCode 4.2+，iOS5+）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:30:26.180

您只能查看/更改对象部分*中的一些*属性`Object`。

通常，对象部分中的对象被设置为`IBoutlet`文件所有者（`UIViewController`在你的情况下），如果你将一个拖到`UIViewController`对象部分，你也可以编辑它，但是在谈论文件所有者时，你可以设置它的变量/属性/methods 并且只有那些变量/属性/方法是`IBOutlets`或`IBAction`。

如果你想设置它的标题等，你必须通过代码手动完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T16:31:16.577

实际上，SecondViewController 的实例来自 SecondViewController.h。当您使用 initWithNibName:@"SecondViewController" 时，它会加载 nib 及其属性，但如果您想更改这些对象中的任何一个，您需要使用界面构建器将它们连接到 SecondViewController。

重现您的问题，我可以获得具有以下视图的 SecondViewController.xib：

视图标签 - 第二视图文本视图

如果您查看 SecondViewController.m，您可以看到它在方法中更改了标题

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"Second", @"Second");
        self.tabBarItem.image = [UIImage imageNamed:@"second"];
    }
    return self;
} 
```

# ios - ios - 加密/解密 NSString

> ID：12785556
> 
> 赞同：1
> 
> 时间：2012-10-08T16:20:39.513
> 
> 标签：ios, encryption

> **可能重复：**
> [iPhone 上 NSString 的 AES 加密](https://stackoverflow.com/questions/1400246/aes-encryption-for-an-nsstring-on-the-iphone)

`NSString`使用自定义密钥加密或解密的最佳方法是什么？

有什么好的图书馆吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T17:41:24.380

看看这个问题：

[iPhone 上 NSString 的 AES 加密](https://stackoverflow.com/questions/1400246/aes-encryption-for-an-nsstring-on-the-iphone)

看看这个库：

[https://github.com/dev5tec/FBEncryptor](https://github.com/dev5tec/FBEncryptor)

然而，关于这个库的一个注释：它使用了一些不好的做法。因此，如果安全性对您很重要，我建议您多阅读一些内容，然后选择另一个进行加密的代码（或自己编写）。

# javascript - iframe url 操作并添加为查询字符串

> ID：12785560
> 
> 赞同：1
> 
> 时间：2012-10-08T16:20:50.913
> 
> 标签：javascript, html, asp.net-mvc, perl, iframe

我有一个在 perl 中运行的遗留应用程序。我用一个 default.aspx 开发了一个 MVC 应用程序。在 default.aspx 中，我放置了一个母版页和一个 iframe 来打开旧版应用程序 url。我想要做的是每次，iframe 尝试导航到下一页（我的意思是，在 iframe 内），我想在我的 default.aspx 中捕获 url 并将查询字符串添加到 iframe 的 src

例子：

在旧版应用程序中，第一页是 http://iframe.com/index.cgi。单击 index.cgi 中的链接，它转到 http://iframe.com/product.cgi

在我的 MVC 应用程序中，我将在 iframe 中打开“http://iframe.com/index.cgi?MyQueryString”。当我们点击 index.cgi 中的链接时，根据旧版应用程序，它将尝试移动到 http://iframe.com/product.cgi。但我想让它“http://iframe.com/product.cgi?MyQueryString”

* * *

知道如何实现这一目标吗？

PS 我不允许更改旧版 perl 应用程序中的任何内容。我所能做的应该只在 Default.aspx 中完成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:41:07.823

我唯一能想到的就是做这样的事情：

```
<iframe id="perlIframe" src="http://yourPerlURLhere" onload="recordMe(this)"></iframe>​ 
```

然后，您每次`iframe`加载新页面时都可以像这样抓取`src`或排序：`location.href`

```
function recordMe(a){    
    console.log(a.src); 
```

或者

```
 console.log(a.location.href); 
```

但是，如果这两个页面不在同一个域中，您最终会遇到一些“同源”问题。

# javascript - 触发嵌套的 javascript 函数

> ID：12785565
> 
> 赞同：2
> 
> 时间：2012-10-08T16:21:12.813
> 
> 标签：javascript, jquery

我对javascript比较陌生，我整天都在努力解决一个问题——我希望有人能指出我正确的方向。

我有一个做幻灯片的 PHP 脚本。我有 NEXT 和 PREVIOUS 按钮，其中包含指向另一个 javascript 函数的动态链接。我希望找到一种用键盘上的箭头键触发它们的方法。

到目前为止，我已经找到了一种让箭头键启动特定 URL 的方法，但我现在有点挣扎。由于隐藏和显示页面上的 DIV，目标 URL 会发生变化。所以我认为我需要执行以下操作之一：

稍后在页面主体中使用 PHP 变量中构造的 URL 触发此代码 - 无需刷新页面：

```
<script type="text/javascript">

$(document).keydown(function(e){

 //e.which is set by jQuery for those browsers that do not normally support e.keyCode.
 var keyCode = e.keyCode || e.which;

if (keyCode == 37)
 {
 window.location = 'http://www.domain.com/previous-image.jpg';
 return false;
 }

 if (keyCode == 39)
 {
 window.location = 'http://www.domain.com/next-image.jpg';
 return false;
 }

});

</script> 
```

...或者我需要找到一种方法来触发特定名称的 DIV 中的链接 - 但前提是 DIV 没有隐藏。

任何指针将不胜感激。

编辑：2012 年 10 月 10 日

感谢大家到目前为止的帮助。我现在明白了一点，也许我可以更清楚地了解我想要实现的目标。

我有一个包含 5 个 DIV 的页面 - 其中 4 个是隐藏的。除了其中显示的图像之外，每个都是相同的，我使用以下代码隐藏或显示各种 DIV：http: [//jsfiddle.net/edzpgt/ZhjRc/12/](http://jsfiddle.net/edzpgt/ZhjRc/12/)

我需要使用箭头键来导航页面，所以我将为此添加一些 Jquery，因为我们已经讨论过：http: [//jsfiddle.net/edzpgt/b2bWz/3/](http://jsfiddle.net/edzpgt/b2bWz/3/)

我想我有两个问题： 1\. 我不确定我的语法是否正确，以确保我只使用可见 DIV 中的箭头键链接。2\. 我认为我没有正确设置或使用下一个/上一个页码变量，以便将正确的目标 URL 传递给 Jquery。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:33:00.627

1）你不需要处理`e.keyCode || e.which`. jQuery 会为您做到这一点。只需使用`e.which`

2）最好在处理程序之外创建两个函数，以便您可以从其他地方调用它们：

```
function previousLocation() {
    window.location = 'http://www.domain.com/previous-image.jpg';
}

function nextLocation() {
    window.location = 'http://www.domain.com/next-image.jpg';
}

$(document).keydown(function (e) {
    var keyCode = e.which;

    if (keyCode == 37) {
        previousLocation();
        return false;
    }

    if (keyCode == 39) {
        nextLocation();
        return false;
    }

}); 
```

3）但如果你真的需要触发 - 这里的例子：

```
$(document).keydown(function (e) {
    var keyCode = e.which;

    function previousLocation() {
        window.location = 'http://www.domain.com/previous-image.jpg';
    }

    function nextLocation() {
        window.location = 'http://www.domain.com/next-image.jpg';
    }

    $(document).bind('goprev', previousLocation);
    $(document).bind('gonext', nextLocation);

    if (keyCode == 37) {
        previousLocation(); // no problems here
        return false;
    }

    if (keyCode == 39) {
        nextLocation(); // no problems here
        return false;
    }

});

// external call example
$(document).trigger('goprev');
$(document).trigger('gonext'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:28:53.137

jQuery 有一个不错的[`.trigger()`](http://api.jquery.com/trigger/)功能，可能对您有用。

```
if (keyCode == 37)
 {
 $("#next").trigger("click");
 return false;
 }

 if (keyCode == 39)
 {
 $("#prev").trigger("click");
 return false;
 } 
```

您需要用有效的选择器替换下一个`#next`和`#previous`上一个链接。如果没有 HTML，我将它们用作占位符。

**[例子：](http://jsfiddle.net/KUTmp/)**

**HTML**

```
​&lt;a href="#" rel="next">next</a>
<a href="#" rel="prev">prev</a>​ 
```

**jQuery**

```
 $(document).keydown(function(e){
      //e.which is set by jQuery for those browsers that do not normally support e.keyCode.
      var keyCode = e.keyCode || e.which;

      if (keyCode == 37)
      {
       $("a[rel='prev']").trigger("click");
       return false;
      }
     else if (keyCode == 39)
     {
       $("a[rel='next']").trigger("click");
       return false;
     }
   });
   $("a[rel='next']").click(function(){
      alert("next");
   });

   $("a[rel='prev']").click(function(){
      alert("prev");
   }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T16:29:53.390

会有两个`a`标签。一个用于下一个，另一个用于上一个。所以首先你必须找到那些。假设他们有 ids`nextSlide`和`prevSlide`,

```
<a id="prevSlide" href="http://www.domain.com/previous-image.jpg">Previous</a>
<a id="nextSlide" href="http://www.domain.com/next-image.jpg">Next</a> 
```

你已经重写了你的代码，如下所示

```
$(document).keydown(function(e){

 //e.which is set by jQuery for those browsers that do not normally support e.keyCode.
 var keyCode = e.keyCode || e.which;

if (keyCode == 37)
 {
 window.location  = $("#prevSlide").attr("href");
 return false;
 }

 if (keyCode == 39)
 {
 window.location  = $("#nextSlide").attr("href");
 return false;
 }

}); 
```

# apache-flex - 如何将 Outlook 联系人导入 flex Web 应用程序？

> ID：12785571
> 
> 赞同：0
> 
> 时间：2012-10-08T16:21:38.070
> 
> 标签：apache-flex, outlook, contacts

正如问题所说，我有一个 flex Web 应用程序，我希望有一个按钮，可以从用户 MS Outlook 导入联系人。

基本上，此功能是必需的，因此用户不必再次输入所有数据。

我看到这个 stackoverflow 帖子： [Outlook 和 Python](https://stackoverflow.com/questions/11537808/fetching-outlook-contacts-with-python) for Python/Outlook 并[在此处输入](https://stackoverflow.com/questions/5336975/import-contacts-from-outlook-with-js)Javascript 和 Outlook 的链接描述。

这篇博文展示了如何导入[电子名片 Flex 和电子名片](http://creative-geeks.com/blog/2010/06/13/import-vcards-into-your-web-application/)，但我希望有更直接的东西。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:02:40.630

使用 Flex Web 应用程序时，您不能任意访问用户的机器本地数据（如访问文件、检索目录列表等），因为它受到 Flash 安全策略的限制。

在您的情况下，我看到了 3 个解决方案：

*   让用户明确选择每个 vCard 文件，在这种情况下，Flash 将允许这样做；
*   或使用 Adob​​e AIR。AIR 可以在没有打开文件对话框的情况下访问本地文件；
*   使用 HTTPService 或类似的东西通过网络加载 vCard 文件。

# python - 计数之字形序列

> ID：12785573
> 
> 赞同：0
> 
> 时间：2012-10-08T16:21:44.667
> 
> 标签：python, dynamic-programming, combinatorics

之字形序列是一个序列，其中每个元素都小于或大于它的邻居：`1 3 2`并且`2 1 2`是之字形，`1 2 3`而`1 2 2`不是。

给定两个数字 n，k 找出可以从数字 1..k 生成多少个大小为 n 的序列

示例：n = 3 k = 3 答案：10

121、212、131、313、232、323、132、231、312、213（不需要生成，只是为了清楚）

我来到了这个解决方案。请告诉我是否可以做得更好。

```
import sys

ZAG = {}
ZIG = {}

def zag(n, i):
    result = 0

    for j in xrange(1, i):    
        if (n - 1, j) not in ZIG:
            ZIG[(n - 1, j)] = zig(n - 1, j)
        result += ZIG[(n - 1, j)]

    return result    

def zig(n, i):
    result = 0

    for j in xrange(i + 1, MAX_NUMBER + 1):
        if (n - 1, j) not in ZAG:
            ZAG[(n - 1, j)] = zag(n - 1, j)
        result += ZAG[(n - 1, j)]

    return result

def count(n): 
    if n == 1:
        return MAX_NUMBER

    result = 0

    for i in xrange(1, MAX_NUMBER + 1):
        ZIG[(1, i)] = 1
        ZAG[(1, i)] = 1

    for i in xrange(1, MAX_NUMBER + 1):
        result += 2*zag(n, i)

    return result

def main(argv):
    global MAX_NUMBER
    MAX_NUMBER = int(argv[1])
    print count(int(argv[0]))

if __name__ == "__main__":
    main(sys.argv[1:]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:38:30.340

如果您通过递归调用 Zig（值小于最后一个数字）和 Zag（值大于最后一个数字）迭代可能性来生成序列，它会变得更好一些，并且您可以让它变得更好（计算方面，不是内存方面）通过将已解决的子问题存储在静态表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:49:55.993

整个序列中的顺序是按照前两个元素的顺序给出的。排序有两种类型：up-down-up-... 和 down-up-down-... 两种排序的序列数量相同，因为一个排序的序列可以通过交换每个数字`x`与`k+1-x`。

让`U_k(n)`是 长度 的第一顺序的序列数`n`。让`U_k(n, f)`是 长度 为 第一 顺序 和 第一 数字 的序列`n`数`f`。类似的定义`D_k(n)`和`D_k(n, f)`。

那么长度`n`（对于`n>1`）的序列数是：

```
U_k(n) + D_k(n) = 2*U_k(n) = 2*( sum U_k(n, f) for f in 1 ... k ). 
```

同样的论点给出：

```
U_k(n, f) = sum D_k(n-1, s) for s = f+1 ... k
          = sum U_k(n-1, s) for s = 1 ... k-f
U_k(1, f) = 1 
```

**编辑：**

实现稍微简单一些。`M(n,k)`返回第 n 行（从后面），并`C(n,k)`计算序列数。

```
def M(n, k):
    if n == 1: return [1]*k
    m = M(n-1, k)
    return [sum(m[:i]) for i in xrange(k)][::-1]

def C(n, k):
    if n < 1: return 0
    if n == 1: return k
    return 2*sum(M(n,k)) 
```

# floating-point - 32位微控制器的复杂数学

> ID：12785579
> 
> 赞同：-1
> 
> 时间：2012-10-08T16:21:59.967
> 
> 标签：floating-point, microcontroller

任何人都可以帮助我在软件中计算 32 位微控制器的复杂计算。我正在使用发光体 LM3S9D96，需要以浮点数计算日志（以 10 为底）和功率，例如 (170)^0.75。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:55:22.590

这个 Cortex M3 芯片不太适合这种数学运算，因为它没有浮点硬件支持。`log`您的编译器工具链将具有and的库实现`pow`，这将起作用，但需要许多周期。

如果您真的需要更高的速度，您可以将您的算法转换为使用定点数学。或者，如果您有大量可用内存且输入范围有限，则可以使用表查找。

# javascript - 无法访问 Tomcat 7 中的 Web 应用程序资源

> ID：12785580
> 
> 赞同：0
> 
> 时间：2012-10-08T16:22:00.173
> 
> 标签：javascript, spring-mvc, spring-security, tomcat7, javascriptmvc

我正在使用 SpringMVC 和 JavascriptMVC 制作一个示例 Web 应用程序，部署了 Tomcat 7。我在我的应用程序中加入了 Spring 安全性和 Spring MVC 我从 Mkyong [http://www.mkyong.com/spring-security的这篇文章中获得了帮助/spring-security-form-login-using-database/](http://www.mkyong.com/spring-security/spring-security-form-login-using-database/) 现在我的应用程序在tomcat上部署时运行良好，但现在我想在我的应用程序中添加客户端MVC，即JavascriptMVC，我想添加脚本资源，如js文件在我的应用程序中。

这是我的应用程序的流程，用户使用启动应用程序

"//localhost:8080/SpringMVC(application name)/welcome (/welcome 被控制器重定向到 hello.jsp 页面)"

这显示了登录页面，一旦写入用户凭据，他就会进入 hello.jsp 页面。在这个页面中，我添加了我的 JacascriptMVC 代码并在标签中引用了一个 js 文件，该应用程序在我的浏览器本地运行良好，但是当我将它部署到 tomcat 上时，它说资源不可访问 404 错误并且只显示基本的 html，并且不能访问 js 和 css 文件。

我尝试了很多方法来访问资源，比如

`<script src='./WebContent/javascriptmvc/steal/steal.production.js'/>`

`<script src='WebContent/javascriptmvc/steal/steal.production.js'/>`

`<script src='/WebContent/javascriptmvc/steal/steal.production.js'/>`
但都给出了同样的错误。

我的war文件的应用程序目录结构

```
-SpringMVC
  -WEB-INF
    -pages
    -hello.jsp
    -login.jsp 
  -META-INF
  -WebContent
    -javscriptmvc
      -steal
         -steal.production.js 
```

任何帮助将不胜感激。法赫德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:58:59.227

您的 Spring MVC 调度程序 servlet 必须在`/`右侧注册 -

```
<servlet>
    <servlet-name>mvc-dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

如果是这样，也将 a 添加`<mvc:default-servlet-handler />`到您的上下文中，这会将对静态资源的调用分派到容器的默认 servlet，而不是 Spring 尝试处理它

此外，使用这样的绝对路径引用您的资源：

```
<script src='${pageContext.request.contextPath}/WebContent/javascriptmvc/steal/steal.production.js'/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:56:56.970

我得到了问题的解决感谢回复的家伙......我在我的 servlet xml 文件中添加了这段代码，

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"        
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xmlns:util="http://www.springframework.org/schema/util"   
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:oxm="http://www.springframework.org/schema/oxm"
       xsi:schemaLocation="http://www.springframework.org/schema/oxm    
    http://www.springframework.org/schema/oxm/spring-oxm-3.0.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/util
    http://www.springframework.org/schema/util/spring-util-3.0.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd">
<context:component-scan base-package="com.mkyong.common.controller" />
<mvc:annotation-driven />
<mvc:resources mapping="/resources/**" location="/resources/" /> 
```

然后在jsp文件中我添加了这个来加载js文件

`<script type='text/javascript' src="${pageContext.request.contextPath}/resources/javascriptmvc/steal/steal.production.js"></script>`

我也稍微改变了目录结构

```
-webapps
    -WEB-INF
        -web.xml
        -mvc-dispatcher0servlet.xml
        -pages
            -hello.jsp
    -resources
        -javscriptmvc
            -steal
                -steal.production.js 
```

# sublimetext2 - 将 .ts 语言文件添加到 Sublime Text 以支持额外的语法着色

> ID：12785583
> 
> 赞同：14
> 
> 时间：2012-10-08T16:22:02.147
> 
> 标签：sublimetext2, typescript

我正在尝试添加由 MSFT[提供的 Typescript 语法高亮支持。](http://blogs.msdn.com/b/interoperability/archive/2012/10/01/sublime-text-vi-emacs-typescript-enabled.aspx)但是，我不知道如何处理下载的 .zip 以使 Sublime 识别`.ts`文件。我尝试将它添加到`Installed Packages/Typescript`，或者只是`Installed Packages`，但这没有奏效。（我还尝试提取`.tmlanguage`文件并将其放入`Installed Packages/Typescript`.

这样做的正确方法是什么？（我在 Mac OS X 10.8 上使用 Sublime text 2.0.1。）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-08T21:53:00.347

在 Mac 上为 Sublime Text 添加 TypeScript 语法高亮支持：

1.  解压下载的文件。它包含一个名为 typescript.tmlanguage 的文件
2.  在 sublime Package 文件夹中创建一个名为 TypeScript 的子文件夹。（Mac 上 Sublime Text 2 的 Packages 文件夹的路径是：
    `/Users/{user}/Library/Application Support/Sublime Text 2/Packages)`
3.  将 typescript.tmlanguage 拖放到新创建的 TypeScript 文件夹中。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-12-16T13:51:40.730

对我来说，这些方法都没有真正发挥应有的作用。

相反，我必须点击（在 Mac 上并使用 Sublime Text 2）**Cmd+Shift+P**，然后输入**Package Control:Install Package**，然后按 Enter。您可能会在左下角看到它加载。

从那里搜索脚本（在我的例子中是 TypeScript），选择它并按 Enter 键。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-08T16:31:50.750

如果你访问[Sublime Text](http://docs.sublimetext.info)网站，那里有说明。要使其在 Windows 中工作，您必须在以下位置创建 Typescript 文件夹：

> C:\Users\\AppData\Roaming\Sublime Text 2\Packages\TypeScript

并将 typescript.tmlanguage 文件复制到该文件夹​​中。Claudijo[为 Mac OS X 用户](https://stackoverflow.com/a/12790025/61654)提供了一个等价的答案。

# jquery - IE 的 jquery datepicker 样式问题（Ruby on Rails 3）

> ID：12785587
> 
> 赞同：1
> 
> 时间：2012-10-08T16:22:28.290
> 
> 标签：jquery, css, ruby-on-rails-3, datepicker

我将 RoR 3.1 与 jQuery 1.7 一起使用。对于我的大多数页面，我使用日期选择器库样式来删除日历对象（即天数）：

```
.ui-datepicker-calendar {
 **display: none;**
}

.ui-datepicker{
margin-left: 138px;
z-index: 1000;
margin-top: -30px;
position: relative;
} 
```

这位于`application.css.scss`. 现在，对于我的两个页面，我需要显示日历对象。我适用于 FF 和 Chrome 的解决方案是将样式放在`head`相关页面的部分中：

```
<style type="text/css">
.ui-datepicker-calendar {
**display: block;**
}
</style> 
```

但是，这不适用于 IE 8 和 9，而是 IE 从`application.css.scss`. 任何特定于 IE 的解决方法，更好的是，它适用于跨浏览器？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:17:06.867

找到了使用 javascript/jquery 的解决方法。请参阅[jQuery datepicker - 在初始化后更改 .ui-datepicker-calendar 的显示](https://stackoverflow.com/questions/10371690/jquery-datepicker-change-display-of-ui-datepicker-calendar-after-init?rq=1)

本质上，我强制 IE 在显示日期选择器之前加载另一个类。

# ios - Dave Johnson Facebook（PH 2.1.0 错误）

> ID：12785591
> 
> 赞同：0
> 
> 时间：2012-10-08T16:22:49.380
> 
> 标签：ios, xcode, facebook, cordova

这个[插件](https://github.com/davejohnson/phonegap-plugin-facebook-connect)可以与 phonegap 2.1.0 一起使用吗？我之前已经在 1.8.1 上成功安装了这个，但是我正在使用 2.1.0 进行一个项目，但它似乎不起作用。它给了我一个弹出的js错误：

“Cordova 变量不存在。检查您是否正确包含了 cordova.js”

这可能只是一个毫无意义的错误。但是当我单击“登录”时，它会将我带到 facebook 应用程序窗口并告诉我应用程序包 ID 尚未包含在内。我已将捆绑 ID 添加到索引页面的底部和 info.plist 文件中。

有什么想法我可能做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T02:41:57.753

您可能在 App Dashboard 设置中缺少捆绑 ID 条目。因此，请访问[http://developers.facebook.com/apps](http://developers.facebook.com/apps)并输入与您的 Xcode 项目匹配的捆绑 ID。

PhoneGap 有一个 Cordova 2.1.0 / Facebook 3.1 分支，您也可以试用： [https ://github.com/davejohnson/phonegap-plugin-facebook-connect/tree/pg2.1-ios3.1](https://github.com/davejohnson/phonegap-plugin-facebook-connect/tree/pg2.1-ios3.1)

# php - 使用图像滑块重叠搜索区域

> ID：12785592
> 
> 赞同：0
> 
> 时间：2012-10-08T16:22:55.033
> 
> 标签：php, jquery, wordpress

我正在使用图像滑块 - NivoSlider，由于某种原因，通常与图像略微重叠的搜索区域现在位于图像后面。我想知道是否有人对如何改变这一点有一些想法？

注意：我试过使用 z-index，它只是让图像滑块完全消失，因为它前面有东西。

[http://www.web-want.com/estate/](http://www.web-want.com/estate/) - 你可以在这里看到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:26:27.447

### 修复了您的问题。使用这个 CSS：

```
#main_home {position: relative; z-index: 1;}
#search_area {position: relative; z-index: 5;} 
```

将此添加到末尾`style.css` 或仅在以下行中更新：`470`.

### 截屏：

![Z指数问题](../Images/2e99381299994a149405e66254afb7a7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:26:29.447

你确定z-index吗？我已经添加;

```
position: relative;
z-index: 2000; 
```

到 style.css 第 470 行中的 #search_area 并将其整理出来。我不确定哪个最小的 z-index 会做到这一点，我只是选择了 2000 作为一个大数字，但它正在工作。

# javascript - 脚本不适用于引用组件的第二个实例

> ID：12785593
> 
> 赞同：0
> 
> 时间：2012-10-08T16:22:56.780
> 
> 标签：javascript, jquery, instance, repeat

我有一个脚本用于在无序列表 (LI) 中旋转图像。如果页面上只有一个引用类的实例，则脚本可以正常工作。但是，如果我有 2 个旋转组件实例，则第二个实例不会响应。

我*认为*解决方案是让脚本继续运行，直到第二个旋转器得到它，但我不确定。我尝试了几次修改，但没有成功。当前脚本如下：

```
function theRotator() {
    //Set the opacity of all images to 0
    $('div.rotator ul li').css({opacity: 0.0});

    // Remove images that only show in main-content
    $('div.rotator ul li.page-only').remove();

    //Get the first image and display it (gets set to full opacity)
    $('div.rotator ul li:first').css({opacity: 1.0});

    //Call the rotator function to run the slideshow, 6000 = change to next image after 6 seconds
    setInterval('rotate()',4000);
}

function rotate() { 
    //Get the first image
    var current = ($('div.rotator ul li.show')?  $('div.rotator ul li.show') : $('div.rotator ul li:first'));

    if ( current.length == 0 ) current = $('div.rotator ul li:first');

    //Get next image, when it reaches the end, rotate it back to the first image
    var next = ((current.next().length) ? ((current.next().hasClass('show')) ? $('div.rotator ul li:first') :current.next()) : $('div.rotator ul li:first'));

    //Un-comment the 3 lines below to get the images in random order

    //var sibs = current.siblings();
    //var rndNum = Math.floor(Math.random() * sibs.length );
    //var next = $( sibs[ rndNum ] );

    //Set the fade in effect for the next image, the show class has higher z-index
    next.css({opacity: 0.0})
    .addClass('show')
    .animate({opacity: 1.0}, 500);

    //Hide the current image
    current.animate({opacity: 0.0}, 1000)
    .removeClass('show');

};
setTimeout(function(){
    $(document).ready(function() {      
        //Load the slideshow
        theRotator();
        $('div.rotator').fadeIn(500);
        $('div.rotator ul li').fadeIn(500); // tweek for IE
    });
}, 500); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:25:23.163

您可能需要`:first`在选择器中替换为`:first-child`. [`:first`](http://api.jquery.com/first-selector/)行为类似于`.first()`并仅选择一个元素，而`:first-child`行为类似于其 CSS 等效项。

# mplayer - 如何检查mplayer是否播放文件？

> ID：12785594
> 
> 赞同：3
> 
> 时间：2012-10-08T16:23:03.373
> 
> 标签：mplayer, playing

我正在尝试检查 mplayer 是否正在播放 mp3 文件。我目前使用 python 中的这一行

```
strace -p " + str(mplayer.pid) + " 2>&1 | head -n 200 | grep 'read(3' 
```

那是因为我知道mplayer在从3号描述符读取文件时会进行系统调用。但是，无论我分析多少行，都没有一个读取操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:46:36.680

我只知道一种确定 MPlayer 是否正在播放的可靠方法，那就是将它作为从属设备运行并连续读取它的 ASCII 管道。

观察该管道中出现的文本`media data not found`，`Failed to open`或者`STARTING PLAYBACK`以及进程是否已退出（播放完毕）。

# objective-c - ipad缩略图中图像之间的空间

> ID：12785596
> 
> 赞同：0
> 
> 时间：2012-10-08T16:23:15.050
> 
> 标签：objective-c, ios, xcode, ipad, uiscrollview

我为 ipad 创建带有滚动视图的缩略图照片，代码如下：

```
// load all the images from bundle and add them to the scroll view
NSUInteger i;
for (i = 1; i <= kNumImages; i++)
{
    NSString *imageName = [NSString stringWithFormat:@"image%d.jpg", i];
    UIImage *image = [UIImage imageNamed:imageName];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];

}

 - (void)layoutScrollImages
{
UIImageView *view = nil;
NSArray *subviews = [scrollView1 subviews];

// reposition all image subviews in a horizontal serial fashion
CGFloat curXLoc = 0;
for (view in subviews)
{
    if ([view isKindOfClass:[UIImageView class]] && view.tag > 0)
    {
        CGRect frame = view.frame;
        frame.origin = CGPointMake(curXLoc, 0);
        view.frame = frame;

        curXLoc += (kScrollObjWidth);
    }
}

} 
```

现在我在 UIScrollView 中有所有图像，它们彼此相邻，我希望每个图像之间有一些空间，就像这张图片

![在此处输入图像描述](../Images/3e04e5f2c40652f77e1eea0583911407.png)

你能给我一些提示，我怎样才能在这些图像之间添加空间？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:33:20.140

改用 UICollectionView。更容易实现你想要的，也会更好地工作。

它甚至具有每个单元格之间空间的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:28:32.673

尝试这个：

```
curXLoc += (kScrollObjWidth) + kDifferenceBetweenImages; 
```

并相应地定义 kDifferenceBetweenIMages。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T17:46:38.613

试试这个：

```
CGRect frame = view.frame;
frame.origin = CGPointMake(curXLoc, 0);
frame.size.height = //put height;
frame.size.width = //put width;
frame.origin.y = //put y;
view.frame = frame;
curXLoc += (kScrollObjWidth) + 15; 
```

# javascript - ExtJS、Flask 和 AJAX：跨域请求

> ID：12785597
> 
> 赞同：3
> 
> 时间：2012-10-08T16:23:15.597
> 
> 标签：javascript, python, ajax, extjs, flask

我正在使用**ExtJS**（客户端）和**Flask （服务器）开发一个****RESTful**应用程序：客户端和服务器通过协议链接。

 ****当我尝试向服务器发出**AJAX**请求时，问题就来了，如下所示：

```
Ext.Ajax.request ({
    url: 'http://localhost:5000/user/update/' + userId ,
    method: 'POST' ,
    xmlData: xmlUser ,
    disableCaching: false ,
    headers: {
        'Content-Type': 'application/xml'
    } ,
    success: function (res) {
        // something here
    } ,
    failure: function (res) {
        // something here
    }
}); 
```

通过上述请求，客户端正在尝试更新用户信息。 **不幸的是，这是一个跨域请求（[详情](https://stackoverflow.com/questions/1077218/are-different-ports-on-the-same-server-considered-cross-domain-ajax-wise)）。**

服务器按如下方式处理该请求：

```
@app.route ("/user/update/<user_id>", methods=['GET', 'POST'])
def user_update (user_id):
  return user_id 
```

我在浏览器控制台上看到的是一个`OPTIONS`请求，而不是`POST`. 然后，我尝试在 80 端口上启动 Flask 应用程序，但这显然是不可能的：

```
app.run (host="127.0.0.1", port=80) 
```

总之，如果客户端不能执行任何 AJAX 请求，我不明白客户端如何与服务器交互。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T17:36:05.487

这是带有 Flask 的 CORS 的出色装饰器。

[http://flask.pocoo.org/snippets/56/](http://flask.pocoo.org/snippets/56/)

如果链接失效，这是后代的代码：

```
from datetime import timedelta
from flask import make_response, request, current_app
from functools import update_wrapper

def crossdomain(origin=None, methods=None, headers=None,
                max_age=21600, attach_to_all=True,
                automatic_options=True):
    if methods is not None:
        methods = ', '.join(sorted(x.upper() for x in methods))
    if headers is not None and not isinstance(headers, basestring):
        headers = ', '.join(x.upper() for x in headers)
    if not isinstance(origin, basestring):
        origin = ', '.join(origin)
    if isinstance(max_age, timedelta):
        max_age = max_age.total_seconds()

    def get_methods():
        if methods is not None:
            return methods

        options_resp = current_app.make_default_options_response()
        return options_resp.headers['allow']

    def decorator(f):
        def wrapped_function(*args, **kwargs):
            if automatic_options and request.method == 'OPTIONS':
                resp = current_app.make_default_options_response()
            else:
                resp = make_response(f(*args, **kwargs))
            if not attach_to_all and request.method != 'OPTIONS':
                return resp

            h = resp.headers

            h['Access-Control-Allow-Origin'] = origin
            h['Access-Control-Allow-Methods'] = get_methods()
            h['Access-Control-Max-Age'] = str(max_age)
            if headers is not None:
                h['Access-Control-Allow-Headers'] = headers
            return resp

        f.provide_automatic_options = False
        return update_wrapper(wrapped_function, f)
    return decorator 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:31:48.180

您可以使用 CORS 解决问题

[http://en.wikipedia.org/wiki/Cross-origin_resource_sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-11T13:21:56.457

[Flask-CORS](https://github.com/wcdolphin/flask-cors)模块使得执行跨域请求变得**非常简单：**

```
app = Flask(__name__)
cors = CORS(app, resources={r"/api/*": {"origins": "*"}}) 
```

另见：[https ://pypi.python.org/pypi/Flask-Cors](https://pypi.python.org/pypi/Flask-Cors)****

# json - 字符串 linq 到实体错误 - json

> ID：12785598
> 
> 赞同：0
> 
> 时间：2012-10-08T16:23:17.607
> 
> 标签：json, asp.net-mvc-3, linq, entity-framework

我正在尝试使用信息窗口在谷歌地图上映射各种标记。在我尝试通过控制器传递字符串之前，一切正常。

我收到以下错误：

> “LINQ to Entities 无法识别 'System.String GetMainPhoto(Int32)' 方法，并且该方法无法转换为存储表达式。”

我读过这主要是因为 ToString 方法或其他一些方法无效使用造成的。但是，我不确定在这种情况下如何纠正这个错误。

基本上，我有一个 db - PropertyPhoto 保存图片的文件名。GetMainPhoto 基本上查找所有行并返回主图片文件名。

```
public string GetMainPhoto(int id)
        {
            return db.PropertyPhotos.Single(p => p.PropertyId == id && p.MainPic == true).PhotoLocation;

        } 
```

控制器如下：

```
public ActionResult Map()
        {
            if (Request.IsAjaxRequest())
            {
                var properties = websiteRepository.FindAllProperties();

                var jsonProperties = from property in properties
                                     select new JsonProperty
                                     {
                                         PropertyId = property.PropertyId,
                                         NoOfBedroom = property.NoOfBedrooms,
                                         Price = property.Price,
                                         Address1 = property.PropertyAddress.Address1,
                                         MainPicSrc = websiteRepository.GetMainPhoto(property.PropertyId),
                                         Latitude = property.PropertyAddress.Latitude,
                                         Longitude = property.PropertyAddress.Longitude
                                     };

                return Json(jsonProperties.ToList(), JsonRequestBehavior.AllowGet);
            }
            else 
            {
                return View();
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:26:40.000

尝试`.ToList()`在投影到匿名类型之前先调用来热切加载数据，否则 EF 不知道如何将`websiteRepository.GetMainPhoto`调用转换为 SQL：

```
var properties = websiteRepository.FindAllProperties().ToList(); 
```

不过要小心。通过这样做，您可能会遇到[*SELECT N+1 问题*](https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem)，因为对于初始结果集中的每个元素，您将发送一个 SQL 查询来获取`MainPicSrc`属性。

更好的方法是[`join`](http://code.msdn.microsoft.com/LINQ-Join-Operators-dabef4e9)直接由数据库执行此操作而不使用`websiteRepository.GetMainPhoto`调用。

# java - 适用于所有项目的 Jenkins/Cloudbees 嵌入式墙视图

> ID：12785602
> 
> 赞同：0
> 
> 时间：2012-10-08T16:23:33.943
> 
> 标签：java, continuous-integration, jenkins, hudson, cloudbees

我需要 Jenkins（更精确的 Cloudbess）项目的静态墙视图：

1.  生成静态 html/图像
2.  展开文件夹并显示每个构建的信息，包括文件夹中的项目
3.  对于每个构建，我需要最后构建信息：构建 ID、状态和构建时间
4.  在理想情况下，将用作必须刷新 Cloudbees/Jenkins 统计信息的独立网页（即包含对 Cloudbess 帐户的身份验证等）。

任何想法都将不胜感激（请不要让我手动编写所有内容或提供相对简单的 API 指南）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:42:08.730

您请求的所有数据都可以通过 jenkins REST API 获得。有关详细信息，请参阅[http://your.jenkins/api](http://your.jenkins/api)，并在[https://wiki.jenkins-ci.org/display/JENKINS/Remote+access+API](https://wiki.jenkins-ci.org/display/JENKINS/Remote+access+API)了解有关使用此 API 并进行足够深度和过滤的一些技巧。

# android - 在 Intellij 中设置 Android/Maven 库项目

> ID：12785603
> 
> 赞同：3
> 
> 时间：2012-10-08T16:23:35.703
> 
> 标签：android, maven, intellij-idea

从我通过的 3 个问题中可以看出，我的项目设置存在重大问题。我收到很多非常具体的错误，似乎没有人能回答它们。我变得非常沮丧。所以我打算尝试一种新的方法。我将描述我希望如何设置我的项目，如果有人能给我一些简短的步骤，我将非常感激。在搞砸了大约一个星期之后，我相信我有一些知识，但 maven 似乎很难理解。

我正在编写一个将用于 2 个项目的库。我想使用的主要库是 roboguice、robolectric 和 jackson（json 库）。我想有一种方法来测试库，但我不确定这是否应该在不同的模块中。Robolectric 似乎建议它应该在同一个模块中。我不确定我应该如何在其他 2 个项目中使用这个库。我一直在查看这个[http://code.google.com/p/maven-android-plugin/wiki/ApkLib](http://code.google.com/p/maven-android-plugin/wiki/ApkLib)但不幸的是，该网站几乎没有告诉我应该如何创建 apklib。

如果可能的话，我还希望其他 2 个项目依赖于该库并自动构建它。

我一直在使用这个网站来创建 maven 项目[http://stand.spree.de/wiki_details_maven_archetypes](http://stand.spree.de/wiki_details_maven_archetypes)

但是我一直在一个又一个问题中遇到问题。如果有人能指出我正确的方向，我将非常感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T18:23:58.850

即使 maven 对我来说（几乎）是一个陌生的国家，我在建立一个 maven 项目并使用 intellij 与它进行交互方面取得了一些成功。我想使用它，因为它看起来是让 robolectric 与 intellij 一起工作的最简单方法。

我写了一篇博文，你可以在[这里找到](http://mytechaddiction.blogspot.it/2012/07/intellij-robolectric-and-android.html)

你需要的是：

*   Maven android sdk 部署程序[https://github.com/mosabua/maven-android-sdk-deployer](https://github.com/mosabua/maven-android-sdk-deployer)
*   Maven android 插件[http://code.google.com/p/maven-android-plugin/wiki/GettingStarted](http://code.google.com/p/maven-android-plugin/wiki/GettingStarted)（使用 android 原型就可以了）

如果要构建 apk lib 而不是 apk，只需在包装标签中指定*apklib*

PS：我前段时间也看到了[这个](http://code.google.com/p/android-maven-robolectric-roboguice-example/)，但没有尝试过。

# wcf - WCF 发现和数据服务 V3

> ID：12785605
> 
> 赞同：0
> 
> 时间：2012-10-08T16:23:41.790
> 
> 标签：wcf, wcf-data-services, service-discovery, wcf-data-services-client, wcf-discovery

我想为我的 Data Services v3 公开发现端点（TCP 和 UDP），并使服务可以从客户端发现并在另一个应用程序中发现它们。发现的要点是在客户端获取服务端点地址。

我试图调整 Microsoft 为*WCF Discovery*提供的示例，但到目前为止我未能实现我的目标。我在*服务器端创建了一个自定义**数据服务主机工厂*：

 *```
public class CustomDataServiceHostFactory : System.Data.Services.DataServiceHostFactory
{
    protected override System.ServiceModel.ServiceHost CreateServiceHost(Type serviceType, Uri[] baseAddresses)
    {
        var serviceHost = base.CreateServiceHost(serviceType, baseAddresses);

        EndpointDiscoveryBehavior endpointDiscoveryBehavior = new EndpointDiscoveryBehavior();

        // Create XML metadata to add to the service endpoint
        XElement endpointMetadata = new XElement(
            "Root",
            new XElement("Information", "This endpoint is Data Service v3!"),
            new XElement("Time", System.DateTime.Now.ToString("MM/dd/yyyy HH:mm")));

        // Add the XML metadata to the endpoint discovery behavior.
        endpointDiscoveryBehavior.Extensions.Add(endpointMetadata);

        //may be this is not the safest way to set the behaviour
        foreach (var endpoint in serviceHost.Description.Endpoints)
        {
            endpoint.Behaviors.Add(endpointDiscoveryBehavior);
        }

        // Make the service discoverable over UDP multicast
        serviceHost.Description.Behaviors.Add(new ServiceDiscoveryBehavior());
        serviceHost.AddServiceEndpoint(new UdpDiscoveryEndpoint());

        return serviceHost;
    }
} 
```

在*客户端*，我尝试了以下代码：

```
DiscoveryClient discoveryClient = new DiscoveryClient(new UdpDiscoveryEndpoint());

// Find service endpoints    
// ServiceReference.DataModel is the generated class for the Data Service client proxy       
FindCriteria findCriteria = new FindCriteria(typeof(ServiceReference.DataModel));
findCriteria.Duration = TimeSpan.FromSeconds(30);

FindResponse findResponse = discoveryClient.Find(findCriteria);

// Check to see if endpoints were found & print the XML metadata in them.
if (findResponse.Endpoints.Count > 0)
{
    foreach (XElement xElement in findResponse.Endpoints[0].Extensions)
    {
        Console.WriteLine("Printing Metadata from ServiceEndpoint:");
        Console.WriteLine("Endpoint Information: " + xElement.Element("Information").Value);
        Console.WriteLine("Endpoint Started at Time: " + xElement.Element("Time").Value);
        Console.WriteLine();
    }
} 
```

不幸的是，这不起作用。我得到*InvalidOperationException*：

> 尝试获取 DataModel 的合同类型，但该类型不是 ServiceContract，也不继承 ServiceContract。

如果我朝着正确的方向前进，我需要一种方法来表达发现*的服务合同的类型*。太糟糕了，我不确定它是否会像正常的 WCF 发现一样工作......

请分享您的想法甚至更好的工作解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T14:13:44.963

我认为异常消息很清楚。对于服务发现，您尝试使用数据模型的类型，而您必须使用 WCF 服务实现的类型 - 这是不同的事情。

基本上 DataServicesV3 服务适配器使用您的数据模型并将其公开为具有自己的服务合同的 WCF 服务。查看 DataServiceV3 类型声明，看到它正在实现一些接口，我只是不记得名称，在这个接口声明中你会发现 [ServiceContract] 和 [ServiceOperation] 属性。这是 DataServiceV3 所有祖先的服务合同。他们使用相同的合同。这是我还没有设法解决的另一个问题——如果它们共享相同的合同，如何使 WS-Discovery 与 DataServices 一起工作。你最好这样挖。*

# java - 导入 Android 平台类的问题

> ID：12785607
> 
> 赞同：11
> 
> 时间：2012-10-08T16:23:49.863
> 
> 标签：java, android, eclipse, import, classpath

我是安卓新手。似乎有太多的问题只是让 eclipse 和 SDK 设置到它应该在的地方。我一直在研究 Android Developer 网站上的一个示例，但它抛出了一个错误：

> import android.support 无法解决

我正在尝试导入以下内容：

```
import android.support.v4.app.NavUtils; 
```

我安装了三个最新的 SDK 平台版本，还安装了 rev.10 支持库。android.jar 文件是否指向错误的文件夹？我找到了我要导入的文件夹/文件，但我想知道它们是否在正确的位置。

> C:\Program Files (x86)\Android\android-sdk\sources\android-16\android\support

自从我安装了所有东西后，我没有移动任何东西，所以我很困惑为什么大多数其他东西都会导入，但缺少支持类。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-08T17:02:09.973

> 但它给我一个错误说“导入android.support无法解决”

该`android.support.*`系列包中的所有内容都来自 Android Support 包（我认为您称之为“rev. 10 support library”。

> 我安装了三个最新的 SDK 平台版本并安装了 rev.10 支持库

Android 支持包不仅需要下载到你的开发机器上，还需要添加到你的项目中。如果您使用的是 Eclipse，请在 Package Explorer 中右键单击您的项目，然后选择 Android Tools > Add Support Library 以将其添加到您的项目中。如果您不使用 Eclipse，请`android-support-v4.jar`在您的 SDK 安装中找到该文件并将其复制到您的项目`libs/`目录中。

# c++ - 在 C++ 中消除 std::isalpha() 的歧义

> ID：12785609
> 
> 赞同：3
> 
> 时间：2012-10-08T16:23:59.837
> 
> 标签：c++, std, sfml

所以我目前正在编写一个接受用户文本输入的程序的一部分。我想忽略所有不是字母的输入字符，所以我认为 std::isalpha() 将是一个很好的方法。不幸的是，据我所知，有两个 std::isalpha() 函数，因此需要将通用函数与特定于语言环境的函数消除歧义：

```
(int(*)(int))std::isalpha() 
```

如果我不消除歧义，std::isalpha 在读取大写字母时似乎返回 true，但在读取小写字母时返回 false（如果我直接打印返回值，它会为非 alpha 字符返回 0，对于大写字符返回 1，并且2 用于小写字符）。所以我需要这样做。

我以前在另一个程序中这样做过，但由于某种原因，在这个项目中，我有时会收到“ISO C++ forbids”错误。注意，只是有时。这是有问题的代码区域（它一起出现，中间没有任何东西）：

```
std::cout << "Is alpha? " << (int(*)(int))std::isalpha((char)Event.text.unicode) << "\n";

if ( (int(*)(int))std::isalpha((char)Event.text.unicode) == true)
{
    std::cout << "Is alpha!\n";
    //...snip...
} 
```

第一个实例，我将返回值发送到 std::cout，工作正常 - 我没有收到任何错误，我得到了预期值（0 表示非 alpha，1 表示 alpha），如果这是我唯一的地方尝试消除歧义，程序编译并运行良好。

然而，第二个实例抛出了这个：

```
error: ISO C++ forbids comparison between pointer and integer 
```

并且只有在我删除 (int(*)(int)) 片段时才编译，此时会出现不良行为。有人可以在这里启发我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T16:35:10.433

您正在将调用*的返回值*转换为，然后将该指针与. 将指针与布尔值进行比较没有多大意义，并且会出现错误。`std::alpha()``int(*)(int)``true`

现在，没有演员表，你比较`int`返回的`std::alpha()`to `true`。`bool`是整数类型，为了比较两种不同的整数类型，首先将值转换为相同的类型。在这种情况下，它们都被转换为`int`. `true`变为`1`，如果`std::isalpha()`返回`2`，则比较以 结束`2 != 1`。

如果您想将结果`std::alpha()`与 a进行比较`bool`，您应该将返回的结果转换为`bool`，或者干脆忽略比较并使用类似的东西`if (std::isalpha(c)) {...}`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T16:39:54.300

无需消除歧义，因为正常通话中没有歧义。

此外，当您从 获取函数声明时不需要使用`std::`前缀`<ctype.h>`，在 C++11 之后是您最好使用的头文件（即，不是`<cctype>`）——就此而言，在 C++11 之前也是如此，但 C ++11 成功了。

第三，您不应该将结果与`true`.

但是，您需要将`char`参数强制转换为`unsigned char`，以免您得到除 7 位 ASCII 之外的任何东西的未定义行为。

例如这样做：

```
bool isAlpha( char const c )
{
    typedef unsigned char UChar;
    return !!isalpha( UChar( c ) );
} 
```

# c# - 多边形三角剖分c#

> ID：12785615
> 
> 赞同：6
> 
> 时间：2012-10-08T16:24:25.703
> 
> 标签：c#, polygon, triangulation, delaunay

我需要计算多边形的三角形。多边形可以包含孔。而 Req 是一种有效的方式。所以我认为我需要约束德劳内三角测量。

我必须在 c# 中做到这一点，只需要计算而不是绘图什么的。

[poly2tri](http://code.google.com/p/poly2tri/)看起来不错，但 idk 它对我不起作用：S

无论如何我需要帮助。我如何计算这些三角形？（如果你最好的报价是[poly2tri](http://code.google.com/p/poly2tri/)，我可以解释我的问题）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T07:09:45.083

Delaunay 不是为此而设计的，而是使用[耳夹](http://www.geometrictools.com/Documentation/TriangulationByEarClipping.pdf)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:27:10.100

我想我在[github:gist](https://gist.github.com/3855122)上的简单解决方案（但它相当陈旧，可能不是最优的）。

# java - 从依赖项目中过滤 Spring XML 文件

> ID：12785618
> 
> 赞同：1
> 
> 时间：2012-10-08T16:24:43.793
> 
> 标签：java, spring, maven

我有一个项目 MyProject，它依赖于另一个项目 BaseProject 中的配置。在 BaseProject 中，我依赖于许多不同的项目，如 ErrorLogging、PerformanceLogging 等......我希望能够构建顶级项目（MyProject）并让它过滤那些项目中的所有 spring xml 文件作为依赖项。我没有运气。我可以看到豆子，但它们没有被过滤。一些 bean 正在使用它们自己的 pom 中定义的默认过滤器进行过滤，但没有使用来自 MyProject 的过滤器。

MyProject - 这包含过滤器文件并从其他项目导入配置。

BaseProject - 定义了需要过滤的 spring bean。

ErrorLogging - 定义了需要过滤的 spring bean。

当我从 MyProject 运行一个包时，所有 spring 文件都被正确地提取到 jar 文件中，但它们仍然包含属性占位符值 ${error.logging.host} 例如...... MyProject 中的 bean 被正确过滤。替代方法是在 MyProject 中定义 bean，但是其中大约有 10 个项目使用 BaseProject 并且它是 bean，我不想在 10 个单独的项目中重新定义它们。

如果有人能对这个问题有所了解，那就太好了。谢谢

编辑 ：

为了更清楚地说明这一点，我在项目 ErrorLogging 中有一个名为 errors-config.xml 的 spring beans xml 定义，它定义了用于连接数据库的 beans。这只是有连接详细信息的占位符，应该由 MyProject 内部的 filter.properties 文件提供。

errors-config.xml 作为资源导入到位于 BaseProject 内部的 baseproject-config.xml。基础项目及其配置文件被导入 MyProject。

然后我使用 Maven 构建 MyProject，我希望将 errors-config.xml 中的属性占位符替换为 MyProject 中 filter.properties 中的值。MyProject 可以成功过滤它自己的文件，但不能过滤 ErrorsLogging 项目的文件。ErrorsLogging 似乎从它自己的 src/main/resources 文件夹而不是 MyProject 文件夹中提取过滤器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:06:00.720

您可以使用`PropertyOverrideConfigurer`来覆盖初始属性。例如，如果您有以下数据源定义`errors-config.xml`：

```
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource">
    <property name="driverClass" value="${hibernate.driverClassName}" />
    <property name="jdbcUrl" value="${hibernate.url}" />
    <property name="user" value="${hibernate.username}" />
    <property name="password" value="${hibernate.password}" />
</bean> 
```

`MyProject`您可以在上下文中覆盖数据库连接属性，如下所示：

```
<bean id="propertyOverideConfigurer" class="org.springframework.beans.factory.config.PropertyOverrideConfigurer">
    <property name="locations">
        <list>
            <value>filter.properties</value>
        </list>
    </property>
</bean> 
```

在`filter.properties`文件中，您需要指定要覆盖的 bean 名称和属性：

```
datasource.driverClass = oracle.jdbc.driver.OracleDriver
datasource.jdbcUrl = jdbc:oracle:thin:@localhost:1521:xe
datasource.user = username
datasource.password = password 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T17:07:56.480

您可以通过解包所有依赖项，再次过滤和打包来实现这一点，整个过程取决于您的项目结构，对于基本配置，这可能就足够了：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <executions>
        <execution>
            <id>unpack-dependencies</id>
            <!--unpack all the dependencies to the target of this project-->        
            <phase>initialize</phase>
            <inherited>false</inherited>
            <goals>
                <goal>unpack-dependencies</goal>
            </goals>
            <configuration>
                <includeGroupIds>${pom.groupId}</includeGroupIds>
                <overWrite>true</overWrite>
                <outputDirectory>${project.build.directory}/${artifactId}</outputDirectory>
                <includes>**/*.properties,**/*.xml</includes>
            </configuration>
        </execution>
    </executions>
</plugin>
<plugin>
    <artifactId>maven-assembly-plugin</artifactId>
    <configuration>
        <descriptors>
            <descriptor>${config.maven.plattform.resources}/assembly/zip.xml</descriptor>
        </descriptors>
    </configuration>
    <executions>
        <execution>
            <id>zip</id>
            <phase>package</phase>
            <inherited>true</inherited>
            <goals>
                <goal>assembly</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

只要您正确定义了对资源的正确过滤（稍后会发生并且还使用 maven-resources-plugin），这应该可以工作。

# jquery - 如果输入值为空，我需要什么 jQuery 来隐藏 div 类？

> ID：12785622
> 
> 赞同：0
> 
> 时间：2012-10-08T16:25:03.780
> 
> 标签：jquery, html, hide

在我的选项面板中，我有一个部分，用户可以在其中输入他们的 Twitter 用户名。目前，如果该字段的值为空，则 Twitter 图标会在我的网站上消失，这很好，因为这意味着 div 类已成功隐藏。但是，当我在字段中输入用户名时，div 类仍然保持隐藏状态。

这是我目前拥有的 jQuery：

```
<script type="text/javascript">
$(document).ready(function() {
if($('mytheme_twitter:empty')){$('.twitter').hide();}   
});
</script> 
```

我认为它必须缺少一些东西。我需要添加另一个功能吗？如果是这样，我应该把它放在哪里？我有点 jQuery 菜鸟。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T16:27:00.473

首先**:empty**是这个用例的错误选择器。

> :empty 选择所有没有子元素的元素（包括文本节点

更改逻辑以检查输入的值是否为空。

```
if($('.mytheme_twitter').val() === '' ){$('.twitter').hide();} 
```

您需要编写一个**更改事件**来处理这种情况..

```
$('mytheme_twitter') has to be   $('#mytheme_twitter')  If ID OR $('.mytheme_twitter') If Class 
```

//

```
 <script type="text/javascript">
    $(document).ready(function() {

        if($('.mytheme_twitter').val() == '' ){$('.twitter').hide();}  

        $('.mytheme_twitter').on('change' , function() {

             if( this.value != ''){

                   $('.twitter').show(); 
              }
              else{
                   $('.twitter').hide(); 
             }
        });
      });
    </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:34:34.730

我会做这样的事情：

```
<script type="text/javascript">
    $(document).ready(function () {
        var twitter = $(".twitterTextBox").val();
        if(twitter == "") {
            $(".twitterIcon").hide();
        } else {
            $(".twitterIcon").show();
        }
    });
</script> 
```

这仅在页面加载时检查输入。如果您希望 Twitter 图标在他们在文本框中输入内容后显示，那么您必须添加一个事件侦听器，例如`onkeyup`.

希望这可以帮助。

# visual-studio - Visual Studio 安装项目“PackageAs”“非常松散”

> ID：12785624
> 
> 赞同：1
> 
> 时间：2012-10-08T16:25:17.510
> 
> 标签：visual-studio, setup-project

我们希望创建一个安装项目，该项目将允许采用 pick-n-mix 方法，每个本地客户端安装都包含文件。

基本上，我们有一个核心 setup.exe，我们只想构建一次，其中包含大部分产品。但是对于每个客户，都有一个适合他们解决方案的自定义 DLL。自定义 DLL 在运行时由软件动态加载，并且运行良好。问题出在设置中。

当然我们可以 1) 也为每个客户端编写一个单独的自定义 Setup.exe 2) 保留一个 setup.exe 并在每次我们想为客户进行构建时对其进行自定义

但这两种方法都有问题。

由于过于复杂而无法深入探讨的原因，以下方法将是最安全和最直接的方法：

1.  维护单个设置项目
2.  将所有自定义 DLL 添加到安装项目，但将它们设置为**PackageAs=Loose**（以及**Vital=False**）
3.  然后，每次我们想向客户推出安装文件时，我们都会发送安装文件减去所有自定义 DLL，除了他自己的

我们的问题是，当您在客户端上运行 setup.exe 时，这种方法会失效。一切都很好，只是 setup.exe*仍然知道*您已从该客户的文件系统中悄悄删除的所有 DLL。如果安装程序没有找到它期望找到的所有文件，安装程序就会开始大喊：

![在此处输入图像描述](../Images/acb0e48e0ea2afc5fbc41a08197d946e.png)

实际上，这不是问题，因为您可以点击**继续**，然后一切正常。

*除了*实际上这**是**一个问题，因为如果您向百事可乐销售（我们不是，但说我们是），您有点不希望安装程序抱怨它在安装的中间。

**我们几乎希望PackageAs**字段的附加设置为**Extremely Loose**，以便安装程序知道即使找不到文件也不必担心。

 **在我们现有的方法中是否有无需学习第三方安装程序的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:35:18.580

听起来您的可选组件应该创建为[合并模块](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369820%28v=vs.85%29.aspx)，然后您需要创建一个仅包含某些模块的特定安装程序。听起来您有一些不希望向其他客户公开的特定于客户的库。当然，这意味着您需要为每个客户端构建一个版本，但这是可以自动化的。**

# excel - 将结果从 MATLAB 中逐行提取到 Excel

> ID：12785628
> 
> 赞同：0
> 
> 时间：2012-10-08T16:25:26.330
> 
> 标签：excel, matlab

我对 64 个元素 ( `for p=1:64 function end`) 进行计算，并在 Excel 文件中提取结果值。

有没有办法逐行排列每个元素的结果值（第一个元素的值应该出现在第一行，第二个元素的值应该出现在第二行等等）？我用过`P=reshape(A,[],16)`，但 Matlab 将值从右向左推混合它们。

例如，如果我为计算设置循环`p=1:1`并使用`P=reshape(A,[],16)`结果是：

```
 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 
```

*   如果我设置`p=1:2`结果变为：
    对于元素1：1 3 5 7 9 11 13 15 **17** 19 21 23 25 27 29 31
    对于元素2：2 4 6 8 10 12 14 16 **18** 20 22 24 26 28 30 32

（元素 2 的值为：17 18 19 20 21 22 23 24 25 ... 32）

*   结果`p=1:2`应该是：
    对于元素 1：1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16
    对于元素 **2：17** ***18*** 19 20 21 22 23 24 25 26 27 28 29 30 31 32
    对于元素 3： 33 34 35 等...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:22:43.150

尝试这个：

```
P=reshape(A,16,[])' 
```

这是你需要的吗？

# webgl - 评估基于 WebGl 的 API 的策略是什么？

> ID：12785629
> 
> 赞同：0
> 
> 时间：2012-10-08T16:25:28.843
> 
> 标签：webgl

由于 webGL 有很多高级 API、库和框架可用于开发 3D Web 应用程序，我想选择最好的（抱歉这有点简单）在 Web 上实现特定模型（不是面向游戏的）。我很困惑如何处理我的工作，我想用于评估的标准是：

可拾取的对象，易于定义的几何图形和相应的纹理，多相机渲染，可以合并 GSLS 实现，可用的缓冲区类型。

由于时间限制，我无法通过在每个框架中开发每个演示应用程序来试验和判断自己的框架。是否有任何特定的方式来阅读提到所有这些的可用 API 的文档。此外，问题是每个框架都说它们在某些方面是好的，以及如何克服这个问题以证明网络世界中所有可用框架中的单一框架是合理的。

一个建议就足够了我的研究......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:24:00.930

如果您手头有 Maya，那么 www.inka3d.com 在定义几何和纹理方面很容易（因为您使用 Maya 和您最喜欢的图像编辑器来完成）并且您可以获得可挑选的对象。对于着色器，您不能使用 glsl，但必须使用 Maya 基于节点的着色器编辑器。

# perl - 哈希输出的 Perl 哈希

> ID：12785630
> 
> 赞同：0
> 
> 时间：2012-10-08T16:25:36.280
> 
> 标签：perl, hash

我正在读一个文件。我想要一个散列，它给我一行的第一个数字作为该行其余部分的所有数字到 1 的散列的键。

我相信我正确地添加了哈希，因为 Dumper 打印正确。但是， print "$first $secondID\n" 没有给我任何输出。

```
while (<FILE>) {

    chomp $_;

    if (/(\d+)\t(.+)/) {

        $firstNum = $1;
        @seconds  = split(/\,/,$2);

        foreach $following (@seconds) {

            $Pairs->{$firstNum}{$following} = 1;
        }

        foreach $first (sort {$a <=> $b} keys %Pairs) {

            print "$first\n";
            %second = {$Pairs{$first}};

            foreach $secondID (sort {$a <=> $b} keys %second) {

                print "$first $secondID\n";
            }
        }
        print Dumper($Pairs);
    }
    else {

        print "ERROR\n";
    }
} 
```

稍后，给定一对数字，我想查看 $Pairs{$num1}{$num2} 是否已定义。我会写吗

```
if(defined $Pairs{$num1}{$num2}) 
```

或者我应该先检查第一个键。然后检查第二个键

```
if (defined $Pairs{$num1}) {

    $temp = $Pairs{$num1};
    if (defined $temp{$num2}) {

        print "true\n;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:21:11.833

你有几个错误。首先，您似乎不确定您是在使用`%Pairs`还是`$Pairs`存储您的哈希，其次您有`%second = {$Pairs{$first}}`，它试图为哈希分配一个哈希引用`%second`。想必你想要`my %second = %{ $Pairs{$first} }`。

您应该*始终* `use strict`在所有 Perl 程序的开头，并`use warnings`在第一次使用时声明所有变量使用`my`. 这将提醒您注意可能很容易忽略的简单错误，并且会显示您在此程序中使用`%Pairs`和`$Pairs`，以及您尝试将单个值（哈希引用）分配给哈希。

与其复制整个散列，不如将它的引用保存在`$seconds`. 然后你可以在下面的`for`循环中取消引用它。

有经验的 Perl 程序员也会感谢您为局部 ( ) 变量使用小写加下划线`my`，并为包名和类名保留大写字母。

该程序按您的预期工作，并期望文件名作为命令行参数：

```
use strict;
use warnings;

my %pairs;

while (<>) {

  unless ( /(\d+)\s+(.+)/ ) {
    print "ERROR\n";
    next;
  }

  my $first_num = $1;
  my @seconds = split /,/, $2;

  foreach my $following (@seconds) {
    $pairs{$first_num}{$following} = 1;
  }

  foreach my $first (sort { $a <=> $b } keys %pairs) {
    print "$first\n";
    my $second = $pairs{$first};
    foreach my $second_id (sort { $a <=> $b } keys %$second) {
      print "$first $second_id\n";
    }
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:17:40.247

利用：

```
%second = %{$Pairs->{$first}}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T17:11:44.863

```
my %hash;
while ( <> ) {
  my @numbers = split /\D+/;
  my $key     = shift @numbers;
  @{$hash{$key}}{ @numbers } = ( 1 ) x @numbers;
}

# test it this way...
if ( $hash{ $num1 }{ $num2 } ) { 

} 
```

# java - mac osx 中的 Java 7 路径

> ID：12785632
> 
> 赞同：18
> 
> 时间：2012-10-08T16:25:58.567
> 
> 标签：java, macos, installation

java 7 安装在哪里？

[http://download.oracle.com/otn-pub/java/jdk/7u7-b10/jdk-7u7-macosx-x64.dmg](http://download.oracle.com/otn-pub/java/jdk/7u7-b10/jdk-7u7-macosx-x64.dmg)

```
JDK 7 Update 07.pkg 
```

我从Oracle下载了安装程序，安装成功。但我在 /System/Library 中找不到它

```
/System/Library/Java/JavaVirtualMachines] $ ls
1.6.0.jdk 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-08T16:26:54.763

是下`/Library`，不是下`/System/Library`。

# java - 用java提升框架

> ID：12785633
> 
> 赞同：1
> 
> 时间：2012-10-08T16:26:05.720
> 
> 标签：java, scala, jakarta-ee, lift

我正在构建一个需要高性能的 Web 应用程序。我打算使用 Java EE，但在研究之后，有很多关于 Java EE 应用程序的负面评论。

我在考虑Lift框架，但是好像Lift只支持Scala，我只懂Java。Lift 真的支持 Java 吗？（我找不到任何使用 Lift 和 java 的项目示例）。我下载了一个 Lift 框架项目应用程序，其中有一个引导文件，我们可以创建一个相同的引导文件，但用于 Java 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:37:24.570

我很确定 Lift 只是 Scala。如果您正在寻找高性能和 Java，那么您应该查看[Play 框架](http://www.playframework.org/)，因为它还具有不需要部署 Servlet 容器的好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T16:54:18.853

Lift 框架仅适用于 Scala。我想指出，根据我的经验，从 Java 到 Scala 的过渡并不难，现在我知道了，有许多语言特性可以让我更轻松、更快速地进行开发。您可以查看本指南以在语言之间进行转换：[http](http://www.scala-lang.org/node/960) ://www.scala-lang.org/node/960 ，看看它是否适合您。根据经验，我真的很喜欢使用 Lift 框架，因为它提供了很多性能和功能。文档有点缺乏，但社区很棒，如果你遇到困难可以弥补这一点。

至于 Java EE 有负面评论，那就有点含糊了。Java EE 规范包括从 Servlet 到 JSF 和 EJB 的所有内容。您几乎可以在任何 Web 框架（包括 Lift）中找到部分规范，而其他部分则更专业。例如，JSF 有很多开销，但试图简化很多典型的应用程序生命周期。EJB 类似地尝试通过对象关系管理 (ORM) 来简化持久层。

大多数框架都可以实现高性能站点，但其中很多将取决于您如何开发它。此外，因为框架支持它并不意味着您需要使用特定的组件。Spring (http://www.springsource.org/) 是许多人在高性能站点上使用的框架，并且具有令人难以置信的可配置性（支持 EJB 和 JSF，但您不需要使用它）。此外，Wicket (http://wicket.apache.org/) 是一个 Java 框架，它提供与 Lift 类似的感觉，您可能会感兴趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T05:02:05.963

我现在只使用 Lift 一年，并且从来没有真正对它是否会从 java 运行感兴趣（无论如何我想学习新的有效概念）。所以，我并不完全了解这个主题。但我可以肯定的是，Liftweb 几乎在所有地方都有 Java 方法来支持 Java。所以，你可以构建你的应用程序，如果不是完全用 java ，那么它的大部分。证明链接如下： [http://main.scala-tools.org/mvnsites/liftweb-2.4-M4/net/liftweb/actor/LiftActorJ.html](http://main.scala-tools.org/mvnsites/liftweb-2.4-M4/net/liftweb/actor/LiftActorJ.html) 通过添加 java 可接受的方法名称等来添加对 java 的支持的类。这些类的末尾通常有一个“J”字母。

无论如何，我建议也尝试一下 Scala——它很棒。即使你只使用 java —— 你可能还是会习惯 Scala，因为有时你可能想阅读源代码。

# php - 自动完成不起作用

> ID：12785634
> 
> 赞同：0
> 
> 时间：2012-10-08T16:26:24.667
> 
> 标签：php, jquery, ajax, autocomplete

这是我使用自动完成的代码，当我使用单个文件时可以正常工作，例如 aci.php 。（正常工作）

```
<?php
include_once('AFactory.class.php');
$db=new AFactory();
$db->getDBO();
if(isset($_POST['queryString'])) 
{
        $sql = "SELECT `name` FROM `liste_kala` WHERE `name` LIKE '%{$_POST['queryString']}%' LIMIT 0 , 30";
        $result=$db->setQuery($sql);
        $query=$db->setQuery($sql);
        $result=$db->loadAssoc($query); 
        // echo '<pre>';print_r($result);echo '</pre>';
        if($result) 
        {
            foreach ($result as $value) echo '<li onClick="fill(\''.$value['name'].'\');">'.$value['name'].'</li>';
        } 
}
?> 
```

但是我将该代码粘贴到 action.php 文件中，我可以检查 post 方法的操作，但不能以这种方式工作：JQUERY 方法：

```
function lookup(inputString) {
    if(inputString.length == 0) {
        // Hide the suggestion box.
        $('#suggestions').hide();
    } else {
        $.post("aci.php", {queryString: ""+inputString+"" , postaction:'autocomplete' }, function(data){
            if(data.length >0) {
                $('#suggestions').show();
                $('#autoSuggestionsList').html(data);
            }
        });
    }
} 
```

动作.PHP

```
<?php
include_once('AFactory.class.php');
$db=new AFactory();
$db->getDBO();
$action=$_POST['queryString'];
switch ($action)
{
    case 'autocomplete':
        if(isset($_POST['queryString'])) 
        {
                $sql = "SELECT `name` FROM `liste_kala` WHERE `name` LIKE '%{$_POST['queryString']}%' LIMIT 0 , 30";
                $result=$db->setQuery($sql);
                $query=$db->setQuery($sql);
                $result=$db->loadAssoc($query); 
                // echo '<pre>';print_r($result);echo '</pre>';
                if($result) 
                {
                    foreach ($result as $value) echo '<li onClick="fill(\''.$value['name'].'\');">'.$value['name'].'</li>';
                } 
        }
            break;

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:06:21.293

```
$action=$_POST['queryString']; 
```

应该：

```
$action=$_POST['postaction']; 
```

# windows - Windows 7中打开串口的命令

> ID：12785638
> 
> 赞同：10
> 
> 时间：2012-10-08T16:26:30.253
> 
> 标签：windows, batch-file, cmd, windows-7, serial-port

是否有用于打开串行端口的 Windows 命令，例如通过 Windows 7 中的命令提示符进行 COM3？例如：

```
OPEN "COM6" AS #1 
```

我不能使用 pyserial 或任何其他未随 Windows 7 分发的实用程序。

**首选解决方案** [在 Windows 7 上的 QBasic 中打开 COM 端口](https://stackoverflow.com/questions/19317679/opening-a-com-port-in-qbasic-on-windows-7/19860784)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-09T13:53:00.633

也许您可以使用Powershell？它包含在Win7中...

代码取自这里[http://blogs.msdn.com/b/powershell/archive/2006/08/31/writing-and-reading-info-from-serial-ports.aspx](http://blogs.msdn.com/b/powershell/archive/2006/08/31/writing-and-reading-info-from-serial-ports.aspx)

**写入串行端口**

```
PS> [System.IO.Ports.SerialPort]::getportnames()
COM3
PS> $port= new-Object System.IO.Ports.SerialPort COM3,9600,None,8,one
PS> $port.open()
PS> $port.WriteLine("Hello world")
PS> $port.Close() 
```

**从串行端口读取**

```
PS> $port= new-Object System.IO.Ports.SerialPort COM3,9600,None,8,one
PS> $port.Open()
PS> $port.ReadLine() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-03T10:02:06.133

要将文件的内容发送到串行端口：

```
copy file.bin com1 /b 
```

向串口发送几个字符：

```
echo hello > com1 
```

# android - 我们如何在 android 的弹出窗口中添加 ExpandableListView？

> ID：12785646
> 
> 赞同：2
> 
> 时间：2012-10-08T16:26:56.913
> 
> 标签：android, popupwindow

我正在创建一个示例 android 应用程序，其中当应用程序处于横向模式时，ExpandableListView 显示在左侧。但是，当应用程序以纵向模式运行时，ExpandableListView 必须在单击 showpopup 按钮时显示为 PopupWindow。我们如何在 Android 的 PopupWindow 中添加 ExpandableListView？

我对 popupwindow 和 ExpandableListView 做了一些初步研究。这是我尝试过的代码（用于纵向模式）

```
public class LoginActivity extends Activity
{

private Button                     btnShowPopUp;
private PopupWindow                mpopup;

ExpandableListAdapter              adapter;

private ExpandListAdapter          ExpAdapter;
private ArrayList<ExpandListGroup>  ExpListItems;
private ExpandableListView         ExpandList;

@Override
public void onCreate (Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_login);
    try
    {
        btnShowPopUp = (Button) findViewById(R.id.btnShowPopUp);

        btnShowPopUp.setOnClickListener(new OnClickListener()
        {
            public void onClick (View arg0)
            {
                    PopupwithExpndLst();
                //PopupwithBtn();

            }
        });
    }
    catch (Exception ex)
    {
        Log.i("Test", "Error is " + ex.getMessage());
    }

}

public void PopupwithExpndLst ()
{
    try
    {
         View popUpView = getLayoutInflater().inflate(R.layout.explist, null); // inflating popup layout

        mpopup = new PopupWindow(popUpView, LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT, true); // Creation of popup
        mpopup.setAnimationStyle(android.R.style.Animation_Dialog);
        mpopup.showAtLocation(popUpView, Gravity.BOTTOM, 0, 0); // Displaying popup

        ExpandList = (ExpandableListView) findViewById(R.id.lstExpList);
        adapter = new MyExpandableListAdapter(this);
        ExpandList.setAdapter(adapter);

    }
    catch (Exception ex)
    {
        Log.i("Test", "Error is " + ex.getMessage());
    }
}

public void PopupwithBtn ()
{
    View popUpView = getLayoutInflater().inflate(R.layout.popup, null); // inflating popup layout
    mpopup = new PopupWindow(popUpView, LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT, true); // Creation of popup
    mpopup.setAnimationStyle(android.R.style.Animation_Dialog);
    mpopup.showAtLocation(popUpView, Gravity.BOTTOM, 0, 0); // Displaying popup

    ExpandList = (ExpandableListView) findViewById(R.id.lstExpList);
    adapter = new MyExpandableListAdapter(this);
    ExpandList.setAdapter(adapter);

    Button btnOk = (Button) popUpView.findViewById(R.id.btnOk);
    btnOk.setOnClickListener(new OnClickListener()
    {
        public void onClick (View v)
        {
            mpopup.dismiss(); // dismissing the popup
        }
    });

    Button btnCancel = (Button) popUpView.findViewById(R.id.btnCancel);
    btnCancel.setOnClickListener(new OnClickListener()
    {
        public void onClick (View v)
        {
            mpopup.dismiss(); // dismissing the popup
        }
    });
}

public ArrayList<ExpandListGroup> SetStandardGroups ()
{
    ArrayList<ExpandListGroup> list = new ArrayList<ExpandListGroup>();
    ArrayList<ExpandListChild> list2 = new ArrayList<ExpandListChild>();
    ExpandListGroup gru1 = new ExpandListGroup();
    gru1.setName("Comedy");
    ExpandListChild ch1_1 = new ExpandListChild();
    ch1_1.setName("A movie");
    ch1_1.setTag(null);
    list2.add(ch1_1);
    ExpandListChild ch1_2 = new ExpandListChild();
    ch1_2.setName("An other movie");
    ch1_2.setTag(null);
    list2.add(ch1_2);
    ExpandListChild ch1_3 = new ExpandListChild();
    ch1_3.setName("And an other movie");
    ch1_3.setTag(null);
    list2.add(ch1_3);
    gru1.setItems(list2);
    list2 = new ArrayList<ExpandListChild>();

    ExpandListGroup gru2 = new ExpandListGroup();
    gru2.setName("Action");
    ExpandListChild ch2_1 = new ExpandListChild();
    ch2_1.setName("A movie");
    ch2_1.setTag(null);
    list2.add(ch2_1);
    ExpandListChild ch2_2 = new ExpandListChild();
    ch2_2.setName("An other movie");
    ch2_2.setTag(null);
    list2.add(ch2_2);
    ExpandListChild ch2_3 = new ExpandListChild();
    ch2_3.setName("And an other movie");
    ch2_3.setTag(null);
    list2.add(ch2_3);
    gru2.setItems(list2);
    list.add(gru1);
    list.add(gru2);

    return list;
}

@Override
public boolean onCreateOptionsMenu (Menu menu)
{
    getMenuInflater().inflate(R.menu.activity_login, menu);
    return true;
} 
```

}

我的 ActivityLogin.xml 是

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:orientation="vertical" >

<Button
    android:id="@+id/btnShowPopUp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="ShowPopUp" >
</Button>

</LinearLayout> 
```

我的 explist.xml 是

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="#90FFFFFF"
android:orientation="vertical" >

<TextView
    android:id="@+id/txtEmpty"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:text="No items" />

<ExpandableListView
    android:id="@+id/lstExpList"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:groupIndicator="@null" /> 
```

popup.xml 是

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="#90FFFFFF"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:text="PopUp Window"
    android:textColor="#000000"
    android:textStyle="bold" >
</TextView>

<Button
    android:id="@+id/btnOk"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Ok" >
</Button>

<Button
    android:id="@+id/btnCancel"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Cancel" >
</Button> 
```

我的 ExpendableListAdapter.java 是

```
 public class ExpandListAdapter extends BaseExpandableListAdapter
    {

private Context                    context;
private ArrayList<ExpandListGroup>  groups;

public ExpandListAdapter(Context context, ArrayList<ExpandListGroup> groups)
{
    try
    {

        this.context = context;
        this.groups = groups;

    }
    catch (Exception ex)
    {
        Log.i("Test", "Error is " + ex.getMessage());
    }
}

public void addItem (ExpandListChild item, ExpandListGroup group)
{
    if (!groups.contains(group))
    {
        groups.add(group);
    }
    int index = groups.indexOf(group);
    ArrayList<ExpandListChild> ch = groups.get(index).getItems();
    ch.add(item);
    groups.get(index).setItems(ch);
}

public Object getChild (int groupPosition, int childPosition)
{
    ArrayList<ExpandListChild> chList = groups.get(groupPosition).getItems();
    return chList.get(childPosition);
}

public long getChildId (int groupPosition, int childPosition)
{

    return childPosition;
}

public View getChildView (int groupPosition, int childPosition, boolean isLastChild, View view, ViewGroup parent)
{
    ExpandListChild child = (ExpandListChild) getChild(groupPosition, childPosition);
    if (view == null)
    {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(context.LAYOUT_INFLATER_SERVICE);

        view = inflater.inflate(R.layout.expandlist_child_item, null);
    }
    TextView tv = (TextView) view.findViewById(R.id.tvChild);
    tv.setText(child.getName().toString());
    tv.setTag(child.getTag());

    return view;
}

public int getChildrenCount (int groupPosition)
{
    // TODO Auto-generated method stub
    ArrayList<ExpandListChild> chList = groups.get(groupPosition).getItems();
    return chList.size();
}

public Object getGroup (int groupPosition)
{
    // TODO Auto-generated method stub

    return groups.get(groupPosition);
}

public int getGroupCount ()
{
    // TODO Auto-generated method stub
    return groups.size();
}

public long getGroupId (int groupPosition)
{
    // TODO Auto-generated method stub
    return groupPosition;
}

public View getGroupView (int groupPosition, boolean isLastChild, View view, ViewGroup parent)
{
    // TODO Auto-generated method stub
    ExpandListGroup group = (ExpandListGroup) getGroup(groupPosition);
    if (view == null)
    {
        LayoutInflater inf = (LayoutInflater) context.getSystemService(context.LAYOUT_INFLATER_SERVICE);
        view = inf.inflate(R.layout.expamdlist_group_item, null);

    }
    TextView tv = (TextView) view.findViewById(R.id.tvGroup);
    tv.setText(group.getName());
    return view;
}

public boolean hasStableIds ()
{
    // TODO Auto-generated method stub
    return true;
}

public boolean isChildSelectable (int groupPosition, int childPosition)
{
    // TODO Auto-generated method stub
    return true;
} 
```

}

在 LoginActivity 类中，如果我在 btnShowpopup 的 onclick 方法中使用 PopupwithBtn() 函数，则弹出窗口按预期工作，但是当我使用 PopupwithExpndLst() 时。

在 PopupwithExpndLst() 方法中，当我尝试为可消耗列表设置适配器时，它显示空指针异常。请帮我解决问题。

在此先感谢 Bimzee

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:53:19.260

好的，我刚刚发现了问题

我一定用过

```
 (ExpandableListView) mpopup.getContentView().findViewById(R.id.lstExpList) 
```

代替

```
 (ExpandableListView)findViewById(R.id.lstExpList) 
```

在 PopupwithExpndLst() 方法中

希望这对某人有帮助

谢谢

# javascript - 使用 Javascript 的 HTML5 视频播放器

> ID：12785654
> 
> 赞同：3
> 
> 时间：2012-10-08T16:27:28.317
> 
> 标签：javascript, html, video, playlist

我正在尝试为 HTML5 视频播放列表构建客户端解决方案，我无法在该项目中使用 AJAX 或 XML，这给我带来了一些问题。

基本上，我在一个视频中加载了一个视频标签，然后是一个名为“播放列表”的无序列表，其中包含我的所有视频。我让它工作，以便它可以在一个页面中播放 Mov 或 Ogv 作为播放列表，但我无法在列表中获得后备工作。我有点卡住了，我读过浏览器嗅探是旧的做法，但无法提出解决方案。任何帮助将不胜感激！

到目前为止，这是我的代码-

```
**HTML**
    <!-- /playlist -->

<div class="span2">
     <ul id="playlist">
        <li class="active">
            <a href="disc_content/video/retro_photography_effects/film_burn.mov"/><img src="images/video/image1.jpg" style="margin-bottom:21px;"></a>
            <a href="http://www.advancedphotoshop.co.uk/discs/101/ogvs/holga.ogv"><img src="images/video/image1.jpg" style="margin-bottom:21px;"></a>
        </li>

        <li>
            <a href="disc_content/video/retro_photography_effects/holga.mov" /><img src="images/video/image2.jpg" style="margin-bottom:21px;"></a>
            <a href="http://www.advancedphotoshop.co.uk/discs/101/ogvs/holga.ogv"></a>
        </li>

        <li>
            <a href="disc_content/video/retro_photography_effects/holga.mov" /><img src="images/video/image2.jpg" style="margin-bottom:21px;"></a>
            <a href="http://www.advancedphotoshop.co.uk/discs/101/ogvs/holga.ogv"></a>
        </li>

        <li>
            <a href="disc_content/video/retro_photography_effects/holga.mov" /><img src="images/video/image2.jpg" style="margin-bottom:21px;"></a>
            <a href="http://www.advancedphotoshop.co.uk/discs/101/ogvs/holga.ogv"></a>
        </li>   
    </ul>
</div>

    <!-- /playlist -->

    <!-- /video -->

<div class="span9">
    <video id="video" width="960" height="600" controls="controls"  autoplay="autoplay">
        <source type="video/mp4" src="disc_content/video/retro_photography_effects/holga.mov" />
        <source type="video/ogg" src="http://www.advancedphotoshop.co.uk/discs/101/ogvs/holga.ogv" />
        <a href="http://windows.microsoft.com/en-US/internet-explorer/downloads/ie"> <img src="images/generic/vid_holder.png" alt="html5 video error" width="640" height="360" /></a>
        <p> Your video tag is not supported</p>
    </video>                      
</div>        

    <!-- /video -->

**Javascript**
<!-- Video Playlist START -->

var video;
var playlist;
var tracks;
var current;

init();
function init(){
    current = 0;
    video = $('#video');
    playlist = $('#playlist');
    tracks = playlist.find('li a');
    len = tracks.length - 1;
    video[0].volume = .60;
    video[0].play();
    playlist.find('a').click(function(e){
        e.preventDefault();
        link = $(this);
        current = link.parent().index();
        run(link, video[0]);
    });
    video[0].addEventListener('ended',function(e){
        current++;
        if(current == len){
            current = 0;
            link = playlist.find('a')[0];
        }else{
            link = playlist.find('a')[current];    
        }
        run($(link),video[0]);
    });
}
function run(link, player){
        player.src = link.attr('href');
        par = link.parent();
        par.addClass('active').siblings().removeClass('active');
        video[0].load();
        video[0].play();
}

<!-- Video Playlist END --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:23:49.047

```
**HTML**
<!-- /playlist -->

<div class="span2">
 <ul id="playlist">
    <li class="active">
        <a href="disc_content/video/retro_photography_effects/film_burn.mov" rel="http://www.advancedphotoshop.co.uk/discs/101/ogvs/holga.ogv"/><img src="images/video/image1.jpg" style="margin-bottom:21px;"></a>
    </li>

    <li>
        <a href="disc_content/video/retro_photography_effects/holga.mov" rel="http://www.advancedphotoshop.co.uk/discs/101/ogvs/holga.ogv" /><img src="images/video/image2.jpg" style="margin-bottom:21px;"></a>
    </li>

    <li>
        <a href="disc_content/video/retro_photography_effects/holga.mov" rel="http://www.advancedphotoshop.co.uk/discs/101/ogvs/holga.ogv" /><img src="images/video/image2.jpg" style="margin-bottom:21px;"></a>
    </li>

    <li>
        <a href="disc_content/video/retro_photography_effects/holga2.mov" rel="http://www.advancedphotoshop.co.uk/discs/102/ogvs/holga.ogv" /><img src="images/video/image2.jpg" style="margin-bottom:21px;"></a>
    </li>   
</ul>
</div>
<!-- /playlist -->
<!-- /video -->div class="span9">
<video id="video" width="960" height="600" controls="controls"  autoplay="autoplay">
    <source type="video/mp4" src="disc_content/video/retro_photography_effects/holga.mov" />
    <source type="video/ogg" src="http://www.advancedphotoshop.co.uk/discs/101/ogvs/holga.ogv" />
    <a href="http://windows.microsoft.com/en-US/internet-explorer/downloads/ie"> <img src="images/generic/vid_holder.png" alt="html5 video error" width="640" height="360" /></a>
    <p> Your video tag is not supported</p>
</video>                      
</div>      
<!-- /video -->

//Javascript
function run(link, player){
    $(player).children().eq(0).attr("src",link.attr('href'));
    $(player).children().eq(1).attr("src",link.attr('rel'));
    par = link.parent();
    par.addClass('active').siblings().removeClass('active');
    video[0].load();
    video[0].play();
 } 
```

我稍微更改了您的 HTML，然后更改了“run()”函数以替换两个源标记。

# matlab - matlab输出中“e”的含义

> ID：12785655
> 
> 赞同：3
> 
> 时间：2012-10-08T16:27:38.847
> 
> 标签：matlab, notation

在 matlab 中，尤其是在测试神经网络时，我们会看到一种特殊类型的输出。例如，`3.332e-23`或`5.e-235`。在输出的上下文中“e”的含义是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-08T17:02:00.247

它是科学记数法，在哪里`e`是 的简写`*10^`。

[您可以使用format](http://www.mathworks.co.uk/help/matlab/ref/format.html;jsessionid=14f065cda4d9d1215ad62442cacb#inputarg_Style)命令在控制台中更改输出类型。例如 。. .

```
>> x = 1.123456e5

x =

   1.1235e+05

>> format long
>> x

x =

     1.123456000000000e+05

>> format longG
>> x

x =

                  112345.6

>> format hex
>> x

x =

   40fb6d999999999a 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-08T16:55:20.123

是[科学记数法](http://en.wikipedia.org/wiki/Scientific_notation#E_notation)。*AeB*表示*A x 10 ^B*。

# jquery - 如果我添加 jQuery mobile，按钮在 Phonegap 中的 iOS 上不起作用

> ID：12785657
> 
> 赞同：0
> 
> 时间：2012-10-08T16:27:46.557
> 
> 标签：jquery, ios, cordova

我使用本机代码和 Phonegap 2.1 构建了一个混合应用程序。该应用程序有 4 个 Javascript 屏幕。最后一个 Javascript 屏幕具有使用导航控制器打开本机编码屏幕的按钮。我使用`jQuery`了各种不同类型的按钮和 Javascript 按钮。如果我不使用`jQuery`手机，它可以工作。

但是，如果我将`jQuery`移动文件包含到 javascript 文件中，所有不同的按钮将不再起作用。奇怪的是，如果我删除了`jQuery`第二个 javascript 屏幕和第三个 javascript 屏幕中的包含，则`jQuery`第 4 个 javascript 屏幕中的移动按钮可以正常工作并且看起来很棒，但是第二个 javascript 屏幕和第三个 javascript 屏幕没有`jQuery`移动并且看起来现在很糟糕。

似乎 phonegap 缓存了`jQuery`移动文件，这在 html 页面中是不可能的。我在 javascript 方面有一个滚动视图，但我读到，与滚动视图结合的错误单击按钮是固定的，我在没有滚动视图的情况下对其进行了测试，并且遇到了同样的问题。我还删除了我拥有的 childbrowser，但也没有结果。

我之前用 Phonegap 1.9 测试过，但我也有同样的问题。我用几个浏览器测试了它，它工作正常。感谢阅读并感谢您的帮助。我现在有点绝望。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:37:20.577

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />      
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />

<script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>

<link rel="stylesheet" href="css/reset.css" type="text/css" media="screen" title="reset"/>
<link rel="stylesheet" id="layout" href="css/tiles.css" type="text/css" media="screen" title="reset" />
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" title="reset" />

<script type="text/javascript" charset="utf-8" src="cordova-2.1.0.js"></script>
<script src="js/storage.js" type="text/javascript"></script>

<link rel="stylesheet" href="js/jm/jquery.mobile-1.2.0.min.css" />
<script src="js/jm/jquery.mobile-1.2.0.min.js"></script>` 
```

这是第二个屏幕的标题。我将所有标题都组织成相同的。如果我删除包含 jquery.mobile.js 的最后一行，那么我稍后打开 2 个屏幕的 html 页面中的按钮将起作用。
这样我触发我的按钮

```
<a data-role="button" href="javascript:callNativePlugin();" value="Go to Player jQuery Button" data-theme="x" class="btnClose">Go to Player jQuery Button</a> 
```

但是使用了几种组合来调用该函数，但没有任何效果。
这样我调用原生函数：

```
function callNativePlugin()
{
var returnSuccess = "success";
alert('call Native Function');
HelloPlugin.callNativeFunction( nativePluginResultHandler, nativePluginErrorHandler, returnSuccess );
}

function nativePluginResultHandler (result)
{
alert("SUCCESS: \r\n"+result );
}

function nativePluginErrorHandler (error)
{
alert("ERROR: \r\n"+error );
} 
```

如果问题发生，则不会调用警报。

# grails - 如何在域中导入服务？

> ID：12785661
> 
> 赞同：1
> 
> 时间：2012-10-08T16:28:05.560
> 
> 标签：grails

如何在域中导入服务？

它有一个字段，我需要用协议填写一个字段。该协议是自动生成的，并为这一代创建了一个服务excluvivamente。

在方法“AfterInsert”的字段中插入了对该服务的调用，该服务会自动填充该字段。

我启动了一些对象的创建，这些对象需要使用此协议填充到您的字段中。但是发生了一个错误，这显然是由于在“域”中使用了“服务”。有人可以帮我吗？

```
class Post {

    static transient postService

    String conteudo
    Date dataCriacao = new Date()
    String protocolo

    static constraints = {

        dataCriacao(nullable:false, blank:false)
        conteudo nullable:false, blank: false 
        protocolo nullable: true, blank: true 

    }

    static mapping = {  
        conteudo type: 'text'
        sort dataCriacao:"desc"   
    }

    def afterInsert(){
        if(!this.protocolo){                   
            registraProtocolo()
        }
    }

    protected void registraProtocolo() {
       postService.teste(this)
    }
}

Error: ERROR hibernate.AssertionFailure  - an assertion failure occured (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session)
Message: null id in com.app.post.Post entry (don't flush the Session after an exception occurs)
    Line | Method
->>  105 | doCall             in org.grails.datastore.gorm.GormStaticApi$_methodMissing_closure2

Message: null id in com.app.post.Post entry (don't flush the Session after an exception occurs)
    Line | Method
->>  105 | doCall             in org.grails.datastore.gorm.GormStaticApi$_methodMissing_closure2
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|     27 | recInsertProtocolo in com.app.post.PostService
|     83 | teste . . . . . .  in     ''
|    117 | registraProtocolo  in com.app.post.Post 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T17:49:19.087

不应该是静态的`postService`，应该是简单的

```
transient postService 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T12:40:17.790

问题解决了！这是一个逻辑问题。该服务自动设置为“transational = true”，使用 AfterInsert 错误是由于该服务的此功能而发生的。但是如果你使用闭包'withNewSession'，这个问题就解决了，一旦新会话满足'transational'的要求，就可以改变对象的属性。刚得到我的域是这样的：

```
AfterInsert def () {

     if (! this.protocolo) {

             Post.withNewSession
             {

                  registraProtocolo ()

             }

     }

 }

 protected void registraProtocolo () {
    postService.teste (this)
 } 
```

**谢谢大家的帮助**

[对于那些想要在这个解决方案中帮助我的 JIRA 获得更多信息的人（阅读评论）](http://jira.grails.org/browse/GRAILS-4851)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T04:45:49.507

```
class Post {

    def postService

    ...
} 
```

参考： http: [//grails.org/doc/2.1.0/guide/single.html#dependencyInjectionServices](http://grails.org/doc/2.1.0/guide/single.html#dependencyInjectionServices)

# jquery - AngularJS 自定义标签插入 AJAX 响应

> ID：12785662
> 
> 赞同：0
> 
> 时间：2012-10-08T16:28:17.320
> 
> 标签：jquery, angularjs

使用 AngularJS 和 jQuery 我希望使用我自己的标签，如下所示：

```
<div ng-app="myApp" ng-controller="myCtrl">
  <mytag foo="bar" baz="qux">
  <mytag alpha="beta" gamma="delta">
</div> 
```

并将每个都替换为从这些 GET 方法调用返回的 HTML 响应：

```
$.get("http://www.example.com/service?foo=bar&baz=qux");

$.get("http://www.example.com/service?alpha=beta&gamma=delta"); 
```

我似乎在任何地方都找不到类似的例子，所以我在这里寻求帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T22:14:49.317

像这样的东西？[http://plnkr.co/edit/qAZVhm](http://plnkr.co/edit/qAZVhm)

我认为这样做不是一个好主意，因为将标准 html 属性与您自己的属性区分开来并非易事。

您对元素有什么期望：`<mytag foo="bar" class="error">`例如？您希望`class`属性对样式起作用吗？还是ajax路径定义？

# c++ - 我可以在 C++ 中从 const char * 数组进行零拷贝 std::string 分配吗？

> ID：12785666
> 
> 赞同：4
> 
> 时间：2012-10-08T16:28:41.110
> 
> 标签：c++, performance, stdstring, zero-copy

对我的应用程序的分析表明，它在字符串分配上花费了近 5% 的 CPU 时间。在很多很多地方，我正在从 64MB 字符缓冲区制作 C++ std::string 对象。问题是，缓冲区在程序运行期间永远不会改变。我对`std::string(const char *buf,size_t buflen)`调用的分析是正在复制字符串，因为缓冲区可能会在字符串生成后发生变化。这不是这里的问题。有没有办法解决这个问题？

编辑：我正在处理二进制数据，所以我不能只是传递`char *s`. 此外，我会因为总是扫描 NULL 而产生大量开销，而这是`std::string`避免的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T16:40:07.733

如果字符串不会改变，并且如果保证它的生命周期比你要使用的字符串长，那么不要使用`std::string`.

相反，考虑一个简单的 C 字符串包装器，如建议的[`string_ref<T>`](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3334.html).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T15:29:48.477

二进制数据？停止使用 std::string 并使用`std::vector<char>`. 但这不会解决您复制它的问题。根据您的描述，如果这个巨大的 64MB 缓冲区永远不会改变，那么您真的不应该使用 std::string 或`std::vector<char>`，两者都不是一个好主意。你真的应该传递一个 const char* 指针（const uint8_t* 会更描述二进制数据，但在幕后它是一样的，忽略符号问题）。传递指针和它的 size_t 长度，或者用另一个“结束”指针传递指针。如果您不喜欢传递单独的离散变量（指针和缓冲区的长度），请创建一个结构来描述缓冲区并让每个人都使用它们：

```
struct binbuf_desc {
    uint8_t* addr;
    size_t len;
    binbuf_desc(addr,len) : addr(addr), len(len) {}
} 
```

`binbuf_desc`您始终可以通过使用对象来引用您的 64MB 缓冲区（或任何其他大小的缓冲区） 。请注意， binbuf_desc 对象不拥有缓冲区（或缓冲区的副本），它们只是它的描述符，因此您可以将它们传递到任何地方，而不必担心 binbuf_desc 会制作不必要的缓冲区副本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T16:38:40.767

没有便携式解决方案。如果您告诉我们您正在使用什么工具链，那么有人可能知道特定于您的库实现的技巧。但在大多数情况下，`std::string`析构函数（和赋值运算符）将释放字符串内容，而您不能释放字符串文字。（这不是不可能有例外，实际上小字符串优化是跳过释放的常见情况，但这些是实现细节。）

更好的方法是`std::string`在您不需要/想要动态分配时不使用。 `const char*`在现代 C++ 中仍然可以正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-29T18:58:38.620

从 C++17 开始，`std::string_view`可能是你的方式。它既可以从一个裸 C 字符串（有或没有长度）初始化，也可以从一个`std::string`

但是，data() 方法返回一个以零结尾的字符串没有任何限制。

如果您需要这种“根据请求进行零终止”的行为，可以`str_view`使用 Adam Sawicki 等看起来令人满意的替代方法（[https://github.com/sawickiap/str_view](https://github.com/sawickiap/str_view)）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T16:47:36.490

似乎使用`const char *`而不是对`std::string`你来说是最好的方法。但是您还应该考虑如何使用字符串。可能会发生从 char 指针到`std::string`对象的隐式转换。例如，这可能发生在函数调用期间。

# xml - T-SQL：在 xml 节点解析中错误分配了 scope_identity()

> ID：12785667
> 
> 赞同：1
> 
> 时间：2012-10-08T16:28:43.357
> 
> 标签：xml, tsql, sql-server-2008-r2, xquery, scope-identity

技术人员——我正在粉碎一个 Xml 对象，在为正确节点拾取正确元素时没有任何问题，但是当我真正需要它时，我需要正确更新一个保持单个值的详细标识符要做的是用它刚刚写入的值刷新该值。我喜欢当前粉碎过程的效率——所以我不想因为想出一个愚蠢的解决方案而失去它。请就如何解决此逻辑的最佳方法向我提供建议。

这是正在发生的事情：

```
 -- Given:
  -- @OrderXml  is an incoming, populated order containg the header, 
                -- subheaders and    detail records

  -- This logic succeeds
  -- step #1: write the header  row in the header table 
  insert into [order].OrderHeader
  ( col.cone,
    col.ctwo)
  select
   Order.detail.value('(cone/text())[1]','varchar(2)'),
   Order.detail.value('(ctwo/text()) [1]','varchar(2)')
    from @OrderXml.nodes('/Order') as Order(detail)

  select @OrderId = scope_identity()

  -- This logic succeeds
  -- step #2: write the subheader rows in the subheader table

 insert into [order].OrderSubHeader
(col.OrderId,
 col.xone,
 col.xtwo)
select
@OrderId,        -- this works, because no matter how many subheader rows
                -- get generated, the same order id needs to be associated with it.

OrderSub.detail.value('(xone/text())[1]','varchar(2)'),
OrderSub.detail.value('(xtwo/text()) [1]','varchar(2)')
from @OrderXml.nodes('/Order/SubHeader'') as OrderSub(detail)

SELECT @OrderSubId = SCOPE_IDENTITY()

-- This logic FAILS
-- step #3: write the detail rows in the detail table

insert into [order].OrderDetail
(col.OrderId,
 col.OrderSubId,  
 col.yone,
 col.ytwo)
  select
   @OrderId,        -- this is correct
   @OrderSubId,     -- this is WRONG when there are multiples
   OrderDet.detail.value('(yone/text())[1]','varchar(2)'),
   OrderDet.detail.value('(ytwo/text()) [1]','varchar(2)')
  from @OrderXml.nodes('/Order/SubHeader/Detail'') as OrderDet(detail) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:28:47.650

查看[OUTPUT 子句](http://technet.microsoft.com/en-us/library/ms177564%28v=sql.105%29.aspx)。在插入 OrderSubHeader 时，除了要插入 OrderDetail 表的任何其他值之外，您还可以捕获 insert.OrderSubID。然后使用捕获的数据（在临时表或表变量中）插入 OrderDetail。

# typescript - OpenLayers 和 TypeScript？

> ID：12785670
> 
> 赞同：5
> 
> 时间：2012-10-08T16:28:56.437
> 
> 标签：typescript, openlayers, openlayers-3

我想知道是否有人知道 OpenLayers 是否有任何现有的 TypeScript 定义文件（或者它们是否已经在制作中）。

我尝试自己解析 OpenLayers 源文件并使用文档注释来构建 TypeScript 定义文件，但要真正完成这项工作，我需要一个完整的 JavaScript 解析器，它也理解 OpenLayers 中的文档语法（它使用 NaturalDocs，[http://naturaldocs .org](http://naturaldocs.org)），我开始认为手动翻译信息比编写这样的解析器更容易:(。

那么现在有没有人有类似的项目或知道如何完成生成这些 TypeScript 定义文件的任务？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-22T23:57:46.553

今天我把OL 3.1.1的定义上传到了Github： [https](https://github.com/3x0dv5/ol3-typescript-definitions) ://github.com/3x0dv5/ol3-typescript-definitions 随意使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:39:06.323

我还没有看到任何关于 OpenLayers.d.ts 文件的提及，但是这里跟踪的定义文件列表越来越[多](http://typescript.codeplex.com/discussions/398150)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:21:05.567

还没有定义文件。我也考虑过创建一个，但只是通过环境变量声明来使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-14T14:58:24.303

这不是一个真正的答案，但你看过闭包吗？ [https://github.com/teppeis/closure-ts](https://github.com/teppeis/closure-ts) 看起来很有希望，但是，我无法转换任何 ol3 js 文件。我会尝试更深入地挖掘并让你知道。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-24T12:38:25.350

这是 Openlayers 的 TypeScript 定义文件的链接。

[OpenLayers 定义文件](https://www.github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/openlayers)

# android - 在 android Samsung GALAXY 2.3.6 上与linkedIn-j 兼容

> ID：12785671
> 
> 赞同：0
> 
> 时间：2012-10-08T16:28:57.733
> 
> 标签：android, linkedin-j

我正在尝试在我的设备三星 Galaxy S（android 版本 2.3.6）上使用linkedin-j 或/和 scribe_1.3 集成linkedin，我想知道它是否兼容。

我的应用程序总是崩溃：

令牌 liToken = oAuthService.getRequestToken(callback); 服务器失败错误。

但后来我证明在模拟器 2.3.3 上运行我的应用程序并且它运行完美

为什么？不兼容？？

请我需要知道是否可以在我的应用程序上集成linkedIn。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T07:11:00.153

I have used this api for linkedIn. It helps me to post status and get contacts. Faced lot of issues with linkedin-j

[http://code.google.com/p/socialauth-android/](http://code.google.com/p/socialauth-android/)

# c++ - c++中对象属性的内存分配

> ID：12785675
> 
> 赞同：1
> 
> 时间：2012-10-08T16:29:03.463
> 
> 标签：c++, memory-management

```
class A {
  public:
    int i;
};

int main() {
  A *obj = new A();
  return 0;
} 
```

在下面的代码中，当创建 A 的对象时，它是在堆中创建的，但是创建的 obj 中 i 的内存在哪里？它是在堆或堆栈上创建的还是有不同的行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T16:31:32.710

~~照原样，您的代码不会编译——`new`返回一个指针，并且您试图将它分配给一个对象而不是一个指针（也许更习惯于 Java？）~~

假设您解决了这个问题：

```
A *obj = new A(); 
```

 ~~指向的整个对象`obj`都分配在堆上。这包括`i`. `obj`它本身是一个指针，它被分配了`auto`存储空间（即通常在堆栈上）。

顺便说一句，无论如何你都想这样做是相当不寻常的。大多数时候，您只需定义一个对象（例如，`A obj;`），如果涉及任何堆分配，该对象将管理它（包括在对象超出范围时清理存储）。~~

# php - 使用应用访问令牌访问状态消息（与“朋友”共享）？

> ID：12785676
> 
> 赞同：0
> 
> 时间：2012-10-08T16:29:04.153
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk, facebook-access-token

是否可以通过 App_Token 与朋友共享状态？

我正在尝试获取它们，但我只获取公共的。我已经授予了获取 user_status、friends_status、user_about_me、publish_stream 和 read_stream 的权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:36:10.113

不，应用程序访问令牌只能访问公共数据 - 要访问用户的私人数据，您需要使用来自该用户（或其能够查看内容的朋友之一）的用户访问令牌

# java - 来自数组定位的基于 Java tile 的地图

> ID：12785678
> 
> 赞同：0
> 
> 时间：2012-10-08T16:29:11.907
> 
> 标签：java, map, tile

我不明白为什么我的代码会产生如下所示的内容。我希望瓷砖在窗口中对齐。窗口大小在主类中设置：

```
this.getContentPane().setPreferredSize(new Dimension(WINDOW_X, WINDOW_Y)); 
```

这是我的地图课。

```
public class Map1 {

int mapx = 19;
int mapy = 19;

int tileWidth = 600 / (mapx + 1);
int tileHeight = 500 / (mapy + 1);

int[][] map =      {{1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
                    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                    {1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1}};

public void drawLevel(Graphics g){
    g.setColor(Color.GREEN);

    for (int x = 0; x <= mapx; x++){

        for (int y = 0; y <= mapy; y++){

            int L = x * tileWidth;
            int U = y * tileHeight;
            int R =  tileWidth;
            int D =  tileHeight;

            if (map[y][x] == 1){
                //g.fillRect((x * tileWidth), (y * tileHeight), (x + tileWidth), (y + tileHeight));
                g.fillRect(L, U, R, D);
            }

            }

        }

    }

} 
```

[http://www.flickr.com/photos/88246499@N05/8067438151/](http://www.flickr.com/photos/88246499@N05/8067438151/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:48:06.357

在您的嵌套 for 循环中，`drawLevel`您使用变量`y`来索引瓦片地图的 x 坐标，并`x`索引 y 坐标。当您定义`L`并且`U`因为您与瓷砖的错误尺寸相乘时，就会出现问题。因为在你的循环里面`x`是一个沿着你必须写的高度的度量`int U = x*tileHeight;`和`int L = y*tileWidth`.

我在下面的代码中交换了两个 for 循环，所以`x`和`y`具有共同的含义。

```
for (int y = 0; y <= mapy; y++){
    for (int x = 0; x <= mapx; x++){
        int L = x * tileWidth;
        int U = y * tileHeight;
        int R =  tileWidth;
        int D =  tileHeight;
        if (map[x][y] == 1){
            g.fillRect(L, U, R, D);
        }
    }

} 
```

我希望这能解决你的问题。

# foursquare - 托管 Foursquare 场地的空列表

> ID：12785680
> 
> 赞同：0
> 
> 时间：2012-10-08T16:29:39.300
> 
> 标签：foursquare

我们在通过 Foursquare API检索**托管场所时遇到问题。**

我在托管位置列表中看不到我的家庭位置。

我们使用这个 api 调用：“https://api.foursquare.com/v2/venues/managed ? **oauth_token** =' + token”，但它总是返回一个空列表。

可以使用此 api 调用检索家庭位置，还是有特殊的 api 方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:44:13.403

您的主场场地不是托管场地。托管场所特指已被其所有者认领的企业，场所/托管端点返回已以这种方式认领的场所。无法使用 API 来确定用户的家。

# c# - 取消签名所有事件监听器，C# 代码示例

> ID：12785684
> 
> 赞同：2
> 
> 时间：2012-10-08T16:29:54.967
> 
> 标签：c#, event-handling

我有一个 C# 类，它引入了一种新的自定义事件类型，并允许用户向它添加或删除侦听器。我还实现了一个在调度期间撤销所有事件侦听器的方法；

```
 public event EventHandler DataCommited;

    private void DetatchListeners()
    {
        if (DataCommited != null)
        {
            foreach (EventHandler eh in DataCommited.GetInvocationList())
            {
                DataCommited -= eh;
            }
        }
    } 
```

可以实现一个将 DataCommited 事件作为参数的方法。因此，我可以使用一种方法取消对一组事件的签名。我尝试了很多方法来实现它，但不幸的是没能做到。我想知道这是否真的可能以及如何。谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:34:02.027

> 可以实现一个将 DataCommited 事件作为参数的方法。

嗯，不是真的。你可以拿一个`EventInfo`，但仅此而已。重要的是要理解这个声明：

```
public event EventHandler DataCommited; 
```

实际上创造了*两*件事：

*   一个事件，其他类中的代码可以订阅和取消订阅
*   一个类型的字段`EventHandler`，您可以使用它来调用处理程序，或单独获取每个处理程序。

您当前代码的一个更简单的实现就是这样：

```
public event EventHandler DataCommited;

private void DetatchListeners()
{
    DataCommitted = null;
} 
```

毕竟，取消订阅类似字段的事件只会更改字段的值。

但是，如果您有`EventInfo`，您不知道该事件是如何实现的。它*可能*由一个字段直接支持 - 它可能不是......没有一般的方法可以为当前的处理程序询问事件，或设置新的处理程序列表。您可以直接对事件执行的*所有操作就是订阅和取消订阅。*

*如果*只使用类似字段的事件，则可以使用反射来查找字段的名称并将值设置为 null。但一般情况下你不能这样做。

有关更多信息，请参阅我[关于代表和事件](http://csharpindepth.com/Articles/Chapter2/Events.aspx)的文章。

# asp.net - 像在 iframe 中一样加载动态 html

> ID：12785685
> 
> 赞同：0
> 
> 时间：2012-10-08T16:29:59.003
> 
> 标签：asp.net

我有一个 ASP.net 4.0 站点。用户可以将整个 html 页面保存到后端数据库中。我想要做的是将动态内容加载到内容区域中现有页面上的 div 中，并且有几件事要发生：

我不希望任何 css 影响 div 之外的任何内容，当第一次尝试加载一些格式不正确的 html 时，会将图像和其他 div 移动到内容区域之外。

很多这些 html 页面对图像和链接使用“基本”标签，我希望在 div 中尊重基本标签。

我有一个我要尝试的解决方案，它只是使用 iframe 并将其 url 设置为另一个将动态 html 完全加载到它自己的页面中的子页面。我只是想知道是否有更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:38:22.480

根据我的评论，如果您要存储相关页面的整个 HTML（包括`<!DOCTYPE>`、等） `<head>`，`<body>`那么是的，使用 an`iFrame`是（在我看来）最好的选择。

几乎不可能阻止“父页面”的继承样式影响“注入”HTML。

但是，这样做的主要缺点是您几乎无法控制确保 iFrame 中的 HTML 以正确的大小显示。一种选择是使用客户端 javacript（或 jQuery）来处理 HTML 的渲染大小并相应地调整 iFrame 控件的高度/宽度......但我认为你可能无法让它有效地工作。

# android - 如何在android中关闭AlertDialog

> ID：12785687
> 
> 赞同：2
> 
> 时间：2012-10-08T16:30:18.240
> 
> 标签：android

我正在开发一个示例 android 应用程序，它在警报对话框中显示数字（1 到 5），并且数字在一秒钟后发生变化。现在我想在 5 秒后关闭 AlertDialog。我如何关闭警报对话框。你可以查看我到目前为止开发的代码。请在这方面帮助我。我将非常感谢帮助。

```
 timeView = new TextView(this);

    AlertDialog.Builder builder = new AlertDialog.Builder(this);

            builder.setView(timeView);
            builder.setTitle("Time"); 
            builder.setCancelable(false);
            builder.show();

timeView.postDelayed(new Runnable()
        {
            public void run()

            {

                switch(timeSecond)
                {

                     case 0:timeView.setText("5"); 
                     timeSecond++;
                     break;

                     case 1:timeView.setText("4"); 
                     timeSecond++;
                     break;

                     case 2:timeView.setText("3"); 
                     timeSecond++;
                     break;

                     case 3:timeView.setText("2"); 
                     timeSecond++;
                     break;

                     case 4:timeView.setText("1"); 
                     timeSecond++;
                     break;

                }
                if(timeSecond!=5)
                {
                    timeView.postDelayed(this,1000);

                }

                else
                {
                    //Here I want to close the Alert Dialog

                }

            }
        }, 1000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:33:06.780

```
final AlertDialog dialog = builder.show();
....
dialog.dismiss() 
```

将关闭对话框。

**编辑**：对于上面的代码，我建议替代方案：

```
 if (!conditionTrue) {
        AlertDialog.Builder builder = new AlertDialog.Builder(this);

        builder.setTitle("Hello"); 
        builder.setMessage("Hello Android");
        builder.setCancelable(false);
        builder.show();
    } 
```

如果您想关闭它，则无需显示对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:56:07.223

您不能将其分配给参考并对其调用驳回吗？

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);

builder.setTitle("Hello"); 
builder.setMessage("Hello Android");
builder.setCancelable(false);
AlertDialog dialog = builder.show();
...
if(conditionTrue)
{
    //Here close the Alert Dialog
    dialog.dismiss()
} 
```

# ruby-on-rails - Rails：友谊加入表澄清

> ID：12785688
> 
> 赞同：0
> 
> 时间：2012-10-08T16:30:21.373
> 
> 标签：ruby-on-rails

我目前正在做我的第一个项目，并试图在我的应用程序中添加“交友”功能。但是，我在理解友谊模型的概念时遇到了一点麻烦，因为我的数据库中似乎不存在的属性似乎只是工作。

下面列出了我的模型和数据库列。我知道这是一个连接表，但是在用户模型中`friends`，如果它们不存在于表中，它们来自`requested_friends`哪里？是因为它是一个虚拟连接表，所以我可以添加我需要的任何列而无需迁移它们？`pending friends``friendships`

`@user.pending_friends.each`此外，即使我的表中不存在该列，本教程最终也会这样做`users`。我对这部分很困惑。

目前我正在阅读这个简短的教程：[http ://railsforum.com/viewtopic.php?id=16760](http://railsforum.com/viewtopic.php?id=16760)

这是我的文件：

用户模型

```
class User < ActiveRecord::Base
...
...
has_many :friendships, :dependent => :destroy
has_many :friends, :through => :friendships, :conditions => "status = 'accepted'"
has_many :requested_friends, :through => :friendships, :source => :friend, :conditions => "status = 'requested'", :order => :created_at
has_many :pending_friends, :through => :friendships, :source => :friend, :conditions => "status = 'pending", :order => :created_at 
```

结尾

友谊模型

```
class Friendship < ActiveRecord::Base
  attr_accessible :friend_id

  belongs_to :user
  belongs_to :friend, :class_name => "User"
end 
```

图式

```
create_table "friendships", :force => true do |t|
  t.integer  "user_id"
  t.integer  "friend_id"
  t.datetime "created_at", :null => false
  t.datetime "updated_at", :null => false
end

create_table "users", :force => true do |t|
  t.string   "name"
  t.string   "email"
  t.datetime "created_at",      :null => false
  t.datetime "updated_at",      :null => false
  t.string   "password_digest"
  t.string   "remember_token"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:51:55.277

您可能忘记了迁移，因为您的架构中没有`status`列。您所指的关联与友谊表中*存在*`friend_id`的键绑定。最后 2 个关联只是使用为. 请看[这里](http://guides.rubyonrails.org/association_basics.html#has_many-source)。如果这是您的意思，我猜这样的关联可以在没有实际属性的情况下工作，您只是在这里没有获得功能，所有 3 个最后的关联都将返回相同的值。*`belongs_to :friend``condition:`*

# ajax - XMLHTTP 请求未达到 xmlhttp.readyState == 4 && xmlhttp.status == 200 状态

> ID：12785690
> 
> 赞同：2
> 
> 时间：2012-10-08T16:30:26.793
> 
> 标签：ajax, xmlhttprequest

对于我的 Ajax 调用，我创建了一个 xmlhttp 对象。当我“打开”它时，我猜它确实打开了，但它永远不会进入`xmlhttp.readyState == 4 && xmlhttp.status == 200`状态。我尝试使用运行隐藏页面`window.open`，它没有显示错误。

以前我确实在另一个页面上使用了 AJAX，它工作得很好。我确实认为该`xmlhttp`请求确实打开了，因为`document.getElementById('Approval' + id).innerHTML = 'Loading...';`确实有效，但它根本没有进入`xmlhttp.readyState == 4 && xmlhttp.status == 200`状态。

相反，在它显示“正在加载...”后不久，我将其设计为显示（这是不正常的，因为隐藏页面发送通常需要很长时间的电子邮件），它显示了以前的文本。我以前没有遇到过这种情况。

下面是我的代码

```
var xmlhttp;

            if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            }
            else {// code for IE6, IE5
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            }

            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {

                    document.getElementById('Approval' + id).innerHTML = xmlhttp.responseText;
                    //alert(xmlhttp.responseText);
                }

                else {

                    document.getElementById('Approval' + id).innerHTML = 'Loading...';
                }
            }

            xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            xmlhttp.setRequestHeader("Content-length", data.length);
            xmlhttp.setRequestHeader("Connection", "close");
            xmlhttp.open("GET", "AJAX%20pages/UploadDecisionAbsenceRequest.aspx?decision=" + decision + '&position=' + position + '&id=' + id, true);
            xmlhttp.send();

            //window.open("AJAX%20pages/UploadDecisionAbsenceRequest.aspx?decision=" + decision + '&position=' + position + '&id=' + id,'','width=200, height = 100'); 
```

同样在我尝试了解 xmlhttp 请求的状态之后，通过编写这行代码：

```
document.getElementById('Approval' + id).innerHTML = "Now (readystate) " + xmlhttp.readystate + " and status " + xmlhttp.status; 
```

我得到的只是现在（就绪状态）未定义和状态 0，从那里它没有进一步发展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:43:47.050

```
xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded"); 
```

在打开请求之前不能使用。之后还要检查天气 data.length 是否正确。

利用

```
 xmlhttp.open("GET", "AJAX%20pages/UploadDecisionAbsenceRequest.aspx?decision=" + decision + '&position=' + position + '&id=' + id, true);
  xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            xmlhttp.setRequestHeader("Content-length", data.length);
            xmlhttp.setRequestHeader("Connection", "close");

            xmlhttp.send(); 
```

**[演示](http://jsfiddle.net/tU8JH/1/)**

# c++ - 编译时的 C++ constexpr

> ID：12785691
> 
> 赞同：5
> 
> 时间：2012-10-08T16:30:27.503
> 
> 标签：c++, templates, c++11, constexpr

我是否认为这个函数应该只在编译时评估，或者它是否有运行时成本？

```
template <typename T>
size_t constexpr CompID() {
    return typeid(T).hash_code();
}

struct Foo {};

int main(int argc, const char * argv[]) {
    size_t foo = CompID<Foo>();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T16:33:22.357

constexpr 函数允许在编译时评估函数，但不需要这样做，所以你的答案是“也许”。这取决于编译器的优化设置。

> ### §7.1.5[dcl.constexpr]/7
> 
> 对函数的调用在所有方面都`constexpr`与对等价的非函数的调用产生相同的结果，只是对函数的调用可以出现在常量表达式中。`constexpr``constexpr`

如果您希望没有运行时成本，您可以通过将其分配给 constexpr 变量来强制编译时评估，例如

```
constexpr auto foo = CompID<Foo>(); 
```

另请注意，`type_info.hash_code()` **不能在编译时评估**（它不是 constexpr 函数，§18.7.1[type.info]/7）。所以你的代码实际上是错误的。

# html - 将高度设置为自动

> ID：12785692
> 
> 赞同：1
> 
> 时间：2012-10-08T16:30:31.517
> 
> 标签：html, css

我有一个名为“post-wrap”的 div。我将此 div 的高度设置为自动。但是，由于某种原因，添加内容时我无法让它增长。我究竟做错了什么？跟花车有关系吗？

[http://jsfiddle.net/h8gSV/](http://jsfiddle.net/h8gSV/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:33:00.213

您的父元素`post-top`的高度固定为 50px。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:35:42.640

您已将高度设置为`#post-top`，它包含所有其他元素。因此，您的身高始终为`50px`. 是的，您需要清除浮动：

```
#post-top {
    width: 580px;
    overflow: hidden;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T16:36:11.337

您需要将 clearfix 类添加到`#post-wrap`并删除`height:50px`from `#post-user`。

小提琴：http: [//jsfiddle.net/kboucher/rH4h5/](http://jsfiddle.net/kboucher/rH4h5/)

# java - 使用 MVC 的 Java 点击计数器

> ID：12785696
> 
> 赞同：5
> 
> 时间：2012-10-08T16:30:43.933
> 
> 标签：java, model-view-controller

我正在尝试编写一个非常简单的 Java 示例来学习 MVC。它是一个 JButton，单击时会增加一个计数器并显示到目前为止的单击次数。

我将模型、视图和控制器分解为单独的类，并认为我走在正确的道路上，但是当我单击按钮时，显示计数器的 JLabel 继续保持在 0。

有人可以快速查看一下为什么应该显示点击次数的 JLabel 始终保持为 0 吗？

谢谢

```
View

package mvc;  
import javax.swing.JButton;  
import javax.swing.JLabel;  
import javax.swing.JTextArea;  
import javax.swing.SwingUtilities;  
import javax.swing.WindowConstants;  

public class View extends javax.swing.JFrame {  
    private JButton jButton1;  
    private JLabel jLabel1;  
    private Controller c;   
    private Model m;  

    /**
    * Auto-generated main method to display this JFrame
    */
    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                Controller c = new Controller();    

                Model m = new Model();

                View inst = new View(c,m);
                inst.setLocationRelativeTo(null);
                inst.setVisible(true);
            }
        });
    }

    public View(Controller c, Model m) {
        super();
        this.c = c;     
        this.m = m;
        initGUI();
    }

    private void initGUI() {
        try {
            setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
            getContentPane().setLayout(null);
            {
                jButton1 = new JButton();
                getContentPane().add(jButton1, "Center");
                jButton1.setText("Click");
                jButton1.setBounds(314, 180, 101, 34);
                jButton1.addActionListener(c);
            }
            {
                jLabel1 = new JLabel();
                getContentPane().add(getJLabel1());
                jLabel1.setText("Click Count = " + c.getClickCount());
                jLabel1.setBounds(439, 183, 91, 27);

            }
            pack();
            this.setSize(818, 414);
        } catch (Exception e) {
            //add your error handling code here
            e.printStackTrace();
        }
    }

    public JLabel getJLabel1() {
        return jLabel1;
    }   
}

End View

Controller class

package mvc;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class Controller implements ActionListener 
{   
    Model m;
    View v;

    public Controller()
    {
        m = new Model();        
        v = new View(this, m);
    }

    @Override
    public void actionPerformed(ActionEvent arg0) 
    {
        if (arg0.getSource() == "Click")
        {
            m.addClick();
            v.getJLabel1().setText("Click count = " + getClickCount());
        }

    }

    public int getClickCount()
    {
        return m.getClicks();
    }
}

End Controller class

Model class

package mvc;

public class Model 
{
    private int clicks;

    public Model()
    {
        clicks = 0;
    }

    public void addClick()
    {
        clicks++;
    }

    public int getClicks()
    {
        return clicks;
    }
}

End Model class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:38:43.740

```
if (arg0.getSource() == "Click") 
```

`==`不适用于字符串（或对象）相等比较。`equals`方法是你应该使用的。

此外，我认为您对[`public String getActionCommand()`](http://docs.oracle.com/javase/6/docs/api/java/awt/event/ActionEvent.html#getActionCommand%28%29)方法感兴趣，而不是[`public Object getSource()`](http://docs.oracle.com/javase/6/docs/api/java/util/EventObject.html#getSource%28%29).

一个小测试

```
JButton btn = new JButton();
btn.setText("Click");       
btn.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        System.out.println(e.getSource());
        System.out.println(e.getActionCommand());
    }
});
btn.doClick(); 
```

和输出

```
javax.swing.JButton[,0,0,0x0,invalid,alignmentX=0.0,alignmentY=0.5,border=javax.swing.plaf.BorderUIResource$CompoundBorderUIResource@1f5b0afd,flags=296,maximumSize=,minimumSize=,preferredSize=, defaultIcon=,disabledIcon=,disabledSelectedIcon=,margin=javax.swing.plaf.InsetsUIResource[top=2,left=14,bottom=2,right=14],paintBorder=true,paintFocus=true,pressedIcon=,rolloverEnabled=true ,rolloverIcon=,rolloverSelectedIcon=,selectedIcon=,text=点击,defaultCapable=true]
点击

```

应该说明原因。

**更新**

尝试

```
if (arg0.getActionCommand().equals("Click")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:39:20.150

我现在明白为什么了。您创建了两个不同的模型对象。一个在控制器中，一个在 Main() 中 - 它是哪一个？

另一个建议.. 创建一个 MainController 类。这应该有你的 Main 方法。您的主要方法创建另一个控制器负责创建您的视图和模型。将此控制器用作桥接器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T15:14:43.263

您可以尝试在视图类上访问您的按钮：

公共 JButton getButton(){

返回 jbutton1;

}

公共无效 setButton（JButton 按钮）{

this.jbutton1 = 按钮；

}

并在您的控制器类中访问您的按钮，如下所示：

if(arg0.getSource() == v.getButton()){

...

}

我一直这样做，我从来没有任何错误......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T17:29:04.260

该数字始终保持为零，因为您正在更新错误的`View`. 在您的`Controller`班级中，您创建另一个未显示的实例。

```
v = new View(this, m); 
```

您可以通过添加一个 setter 来传入您的主实例：

```
class Controller implements ActionListener {
    Model m;
    View v;

    public Controller() {
        m = new Model();
    }

    public void setView(View v) {
        this.v = v;
    }
    ... 
```

`ActionEvent.getSource()`返回组件引用，但`jButton1`不公开可见。要解决此问题，您可以为按钮添加 getter 或使用 action 命令：

```
if (arg0.getActionCommand().equals("Click")) { 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T16:38:34.567

有几个问题：

*   该视图显示的实际数据通常来自模型而不是控制器。

    因此，您在视图中的代码
    `jLabel1.setText("Click Count = " + c.getClickCount());`
    应更改为
    `jLabel1.setText("Click Count = " + m.getClickCount());`

*   在控制器内部，您创建了模式和视图的新实例，在 main() 方法中，您再次创建了控制器和视图的新实例。所以本质上，Controller 类正在处理不同的视图和模型对象。

一般来说，但它不是一个石刻标准：

*   视图有一个模型，它不引用控制器
*   模型是独立的，不引用视图或控制器
*   控制器既有视图又有模型。

# visual-studio - 在 Visual Studio 9 2008 上使用 Cuda 安装 OpenCv 2.4.2：构建错误

> ID：12785697
> 
> 赞同：2
> 
> 时间：2012-10-08T16:30:50.907
> 
> 标签：visual-studio, opencv, cuda

我一直在尝试在 Visual Studio 9 2008 上安装启用了 cuda 的 OpenCv 2.4.2。

这些是以下规格：

OpenCv 版本：2.4.2
操作系统：Windows 7 64 位
Cmake 版本：2.8.9
显卡：NVIDIA GeForce GTX 550 Ti
Cuda 版本：4.2

[我从OpenCV](http://sourceforge.net/projects/opencvlibrary/files/opencv-win/2.4.2/OpenCV-2.4.2.exe/download)下载了 opencv并正确遵循了所有说明。

这是 CMake 配置的结果：

> GUI:
> QT 4.x: 否 Win32 UI: 是
> OpenGL 支持: 否
> 
> 媒体 I/O:
> ZLib: build (ver 1.2.6)
> JPEG: build (ver 62)
> PNG: build (ver 1.5.9)
> TIFF: build ( ver 42 - 4.0.1)
> JPEG 2000: build (ver 1.900.1)
> OpenEXR: NO
> Video I/O:
> FFMPEG: YES (prebuilt binaries)
> codec: YES(ver 53.61.100
> format: YES (ver 53.32.100
> util:是（版本 51.35.100）
> swscale：是（版本 2.1.100）
> gentoo-style：是
> OpenNI：否
> OpenNI PrimeSensor 模块：否
> PvAPI：否
> DirectShow：是
> XIMEA：否
> 
> 其他第三方库 使用 IPP：否
> 使用 TBB：否
> 使用 Cuda：是（4.2 版）
> 使用 Eigen：否
> 
> NVIDIA CUDA: (ver 4.2)
> Use CUFFT: YES
> Use CUBLAS: NO
> NVIDIA GPU arch: 11 12 13 20 21 30
> NVIDIA PTX archs: 11 12 13 20 21 30
> NVIDIA GPU features: 11 12 13 20 20 30 20
> 
> Python:
> 解释器:没有
> 文档：
> 构建文档：没有
> 狮身人面像：没有PdfLaTeX
> 编译器：没有
> 测试和示例：
> 测试：是的
> 性能测试：是的
> 示例：没有
> 安装路径：C:/opencv/Builds/install
> cvconfig.h 位于：C:/opencv/构建
> ------------------------------------------------- ----------------
> 配置完成
> 生成完成

现在，如果我构建解决方案，构建失败，它会给我一个错误。这些是其中许多错误中的一些错误：

> 错误 8 致命错误 LNK1104：无法打开文件 '....\lib\Debug\opencv_gpu242d.lib' opencv_stitching
> 错误 9 致命错误 LNK1104：无法打开文件 '....\lib\Debug\opencv_gpu242d.lib' opencv_videostab
> 错误 10致命错误 LNK1104：无法打开文件 '....\lib\Debug\opencv_gpu242d.lib' opencv_test_stitching
> 错误 13 致命错误 LNK1104：无法打开文件 '....\lib\Debug\opencv_gpu242d.lib' opencv_perf_stitching

请帮我解决一下这个。

在此先感谢，
希尔帕

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:05:05.147

我不知道问题是什么。我尝试在另一台计算机上安装相同的，它就像一个魅力。所以我重新安装了操作系统，它工作了！！

# android - Android 设置多个闹钟

> ID：12785702
> 
> 赞同：43
> 
> 时间：2012-10-08T16:31:25.960
> 
> 标签：android, android-alarms

我正在尝试实现一个需要同时发出警报（或警报）的 Android 应用程序。

我已经搜索过了，但我找到的最近的是固定数量的警报设置，我猜这个例子不起作用。

我想知道是否存在动态设置多个警报的方法，例如警报数组，然后以特定时间戳触发这些警报。

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-10-09T00:17:32.347

如果要设置多个警报（重复或单个），则只需`PendingIntent`使用不同的`requestCode`. 如果`requestCode`相同，则新警报将覆盖旧警报。

这是创建多个单个警报并将它们保存在`ArrayList`. 我将`PendingIntent`' 保留在数组中，因为这是取消警报所需的。

```
// context variable contains your `Context`
AlarmManager mgrAlarm = (AlarmManager) context.getSystemService(ALARM_SERVICE);
ArrayList<PendingIntent> intentArray = new ArrayList<PendingIntent>();

for(i = 0; i < 10; ++i)
{
   Intent intent = new Intent(context, OnAlarmReceiver.class);
   // Loop counter `i` is used as a `requestCode`
   PendingIntent pendingIntent = PendingIntent.getBroadcast(context, i, intent, 0);
   // Single alarms in 1, 2, ..., 10 minutes (in `i` minutes)
   mgrAlarm.set(AlarmManager.ELAPSED_REALTIME_WAKEUP, 
                SystemClock.elapsedRealtime() + 60000 * i, 
                pendingIntent); 

   intentArray.add(pendingIntent);
} 
```

另外，请参阅这个问题：[如何在 android 中一次设置多个警报？](https://stackoverflow.com/questions/7252623/how-to-set-more-than-one-alarms-at-a-time-in-android).

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-08T16:58:42.947

您可以设置闹钟的重复次数：

在这种情况下：

```
public void AddAlarm(int requestCode,MutableDateTime dueDate,int repeat) {
        Intent intent = new Intent(context, AlarmReceiver.class);
        intent.putExtra(Constants.RECORD_ID, requestCode);
        intent.putExtra("REPEAT", repeat);
        PendingIntent operation = PendingIntent.getBroadcast(context, requestCode, intent,  PendingIntent.FLAG_ONE_SHOT );
        MutableDateTime due = dueDate.toMutableDateTime();
        switch(repeat){
        case NO_REPEAT:
            due.addMinutes(0);
            break;
        case DAILY:

            due.addDays(1); 
            break;
        case WEEKLY:
            due.addWeeks(1);
            break;
        case MONTHLY:
            due.addMonths(1);
            break;
        case MONTHLY_2:
            due.addWeeks(5);            
            break;
        case YEARLY:
            due.addYears(1);
            break;
        }
        due.add(-(dueDate.getMillis()));
        due.setSecondOfMinute(0);
        dueDate.setSecondOfMinute(0);
        alarm.cancel(operation);
        alarm.set(AlarmManager.RTC_WAKEUP, dueDate.getMillis(), operation);
        alarm.setRepeating(AlarmManager.RTC_WAKEUP, dueDate.getMillis(), due.getMillis(), operation);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-04T09:11:33.247

为了动态设置多个警报，我使用的方法是创建一个警报。然后在我的警报设置类中，初始化一个静态整数（用作请求代码），每当我单击主活动中的“添加警报”按钮时，它都会从我的主活动中递增。例如

**MainActivity.java**

```
public class MainActivity extends AppCompatActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

public void addAlarmClick(View v) {
    AlarmActivity.broadcastCode++;
    startActivity(new Intent(this, AlarmActivity.class));
}
} 
```

**报警活动.java**

```
public class AlarmActivity extends AppCompatActivity {`

public static int broadcastCode=0;
/*some code here*/
Intent myIntent = new Intent(AlarmActivity.this, AlarmReceiver.class);
pendingIntent = PendingIntent.getBroadcast(AlarmActivity.this,
                            broadcastCode, myIntent, 0); 
```

我希望这将有所帮助。

# sql - 报表服务百分比计算

> ID：12785704
> 
> 赞同：0
> 
> 时间：2012-10-08T16:31:32.723
> 
> 标签：sql, reporting-services

我正在尝试在 SQL Reporting Services 中编写一个表达式，该表达式评估 2 个字段并计算出其中一个字段的百分比值。

基本上：

```
Fields!Value.Value (numeric value) + Fields!StandardDuty.Value (% value) 
```

这方面的一个例子是（如果键入计算器）

```
39792.82(Fields!Value.Value ) + 2.7%(Fields!StandardDuty.Value )  = 1074.40614 
```

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:44:43.573

我认为你只需要像这样创建你的表达式：

```
=Fields!yourFirstColumn.Value*(Fields!yourSecondColumn.Value/100) 
```

我刚刚使用您在上面提供并返回的值对此进行了测试`1074.40614`

# html - CSS空列但仍显示

> ID：12785705
> 
> 赞同：0
> 
> 时间：2012-10-08T16:31:32.677
> 
> 标签：html, css

我正在尝试在我的模板中创建一个系统，如果我将内容放在“侧边栏”中，那么侧边栏将显示并且主窗口内容将被适当地移动。如果侧边栏中没有内容，则不会显示。

```
 <div id="newcontainer">
    <div id="content">               
        <div id="sidebar-left">
        {% block left_sidebar %}
        {% endblock%}
        </div>
        <div id="sidebar-right">
        {% block right_sidebar %}
        {% endblock%}            
        </div>
        <div id="col-main">
        {% block content %}
        {% endblock%}
        </div>
    </div>
</div> 
```

这是我在其他用户的帮助下所取得的进展： **[JSFIDDLE LINK](http://jsfiddle.net/aBbtN/42/)**

但是，如您所见，我没有在左列中放置任何内容，但仍然显示填充！这是我不想要的，当侧边栏中没有内容时，我希望它完全消失。我有什么选择？我不想将填充放在中心框上，因为当没有侧边栏时，我会留下中心框上的填充。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:35:03.070

给定一个相当现代的浏览器，您可以使用`:empty`伪选择器来定位那些空元素：

```
#sidebar-left:empty,
#sidebar-right:empty {
    padding: 0;
    border-width: 0;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/aBbtN/48/)。

你也可以，如果你用一个元素（在这种情况下是右列，用 a `p`）将文本包装在列中，以便它可以用 CSS 定位，你可以使用`margin`而不是`padding`：

```
#sidebar-left p,
#sidebar-right p {
    margin: 0 10px;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/aBbtN/55/)。

此外，如果您将更多样式移动到子元素，您也可以处理可见边框（尽管这会导致父元素似乎不是其完整的、指定的高度）：

```
#sidebar-left p,
#sidebar-right p {
    padding: 0 10px;
    background-color: grey;
    border: 0 solid #000;
}

#sidebar-right p {
    border-left-width: 1px;
}

#sidebar-left p {
    border-right-width: 1px;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/aBbtN/56/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:24:17.997

你的问题是你设置了一个高度。如果你改变`height: 80px;`它`max-height: 50px;`会解决你的问题

或者，如果允许，您可以不使用高度

# javascript - “3D”放大Javascript？

> ID：12785706
> 
> 赞同：2
> 
> 时间：2012-10-08T16:31:39.453
> 
> 标签：javascript, html, 3d

是否有任何网站/教程可以仅使用**Javascript**而**没有 CSS3 过渡来模拟**[本网站](http://sawyerhollenshead.com/writing/14/3d-zooming-using-css-transforms/)的缩放效果？我需要在 IE7+ 上复制效果。

 ****演示站点：http: [//labs.sawyerhollenshead.com/lab/css-3d-transform/](http://labs.sawyerhollenshead.com/lab/css-3d-transform/)

或者，应该采取什么方法/步骤来复制它？如果有的话，我应该研究什么算法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T01:57:23.163

完成一些工作后，您可以[在此处尝试使用 Zoomooz Link。](https://jaukia.github.io/zoomooz/)

它没有原生的 IE7 支持，但如果你聪明的话，你可能会弄乱代码并让它工作。让一个古老的浏览器 IE7 去做它创建后发明的事情有点牵强。但如果你想要它足够糟糕......****

# c# - C#中的XML反序列化数组

> ID：12785710
> 
> 赞同：2
> 
> 时间：2012-10-08T16:31:56.337
> 
> 标签：c#, xml, serialization

我已经尝试了所有无法反序列化此 XML 文档的方法。

```
<items>
    <item>
        <id>00175565</id>
        <descr>KJAAM-EMC 16x(2+1)x0,5 T500</descr>
        <unit>st</unit>
        <vat>25</vat>
        <inprice>374</inprice>
        <isstock>0</isstock>
        <stock>0</stock>
        <paccount/>
        <ean>00175565</ean>
        <type>1</type>
        <producer/>
        <producer_itemno>00175565</producer_itemno>
        <package_height/>
        <package_depth/>
        <package_width/>
        <package_weight/>
        <stock_place/>
        <stock_warning/>
        <note/>
        <bulky>0</bulky>
        <omit>0</omit>
        <available>0</available>
        <account>3041</account>
        <constracct>3231</constracct>
        <exportacct>3315</exportacct>
        <eurevacct>3318</eurevacct>
        <euvatacct>3316</euvatacct>
        <supplierno/>
        <show_in_webshop>0</show_in_webshop>
        <price>
              <list-a>
                    <from-0>486.2</from-0>
              </list-a>
        </price>
    </item>
</items> 
```

这就是我反序列化它的方式

```
[Serializable()]
public class item
{
    [System.Xml.Serialization.XmlElement("id")]
    public string ID { get; set; }

    [System.Xml.Serialization.XmlElement("descr")]
    public string Descr { get; set; }

    [System.Xml.Serialization.XmlElement("unit")]
    public string Unit { get; set; }

    [System.Xml.Serialization.XmlElement("vat")]
    public string Vat { get; set; }

    [System.Xml.Serialization.XmlElement("inprice")]
    public string Inprice { get; set; }

    [System.Xml.Serialization.XmlElement("isstock")]
    public string Isstock { get; set; }

    [System.Xml.Serialization.XmlElement("stock")]
    public string Stock { get; set; }

    [System.Xml.Serialization.XmlElement("paccount")]
    public string Paccount { get; set; }

    [System.Xml.Serialization.XmlElement("ean")]
    public string Ean { get; set; }

    [System.Xml.Serialization.XmlElement("type")]
    public string Type { get; set; }

    [System.Xml.Serialization.XmlElement("producer")]
    public string Producer { get; set; }

    [System.Xml.Serialization.XmlElement("producer_itemno")]
    public string Producer_itemno { get; set; }

    [System.Xml.Serialization.XmlElement("package_height")]
    public string Package_height { get; set; }

    [System.Xml.Serialization.XmlElement("package_depth")]
    public string Package_depth { get; set; }

    [System.Xml.Serialization.XmlElement("package_width")]
    public string Package_width { get; set; }

    [System.Xml.Serialization.XmlElement("package_weight")]
    public string Package_weight { get; set; }

    [System.Xml.Serialization.XmlElement("stock_place")]
    public string Stock_place { get; set; }

    [System.Xml.Serialization.XmlElement("stock_warning")]
    public string Stock_warning { get; set; }

    [System.Xml.Serialization.XmlElement("note")]
    public string Note { get; set; }

    [System.Xml.Serialization.XmlElement("bulky")]
    public string Bulky { get; set; }

    [System.Xml.Serialization.XmlElement("omit")]
    public string Omit { get; set; }

    [System.Xml.Serialization.XmlElement("available")]
    public string Available { get; set; }

    [System.Xml.Serialization.XmlElement("account")]
    public string Account { get; set; }

    [System.Xml.Serialization.XmlElement("constracct")]
    public string Constracct { get; set; }

    [System.Xml.Serialization.XmlElement("exportacct")]
    public string Exportacct { get; set; }

    [System.Xml.Serialization.XmlElement("eurevacct")]
    public string Eurevacct { get; set; }

    [System.Xml.Serialization.XmlElement("euvatacct")]
    public string Euvatacct { get; set; }

    [System.Xml.Serialization.XmlElement("supplierno")]
    public string Supplierno { get; set; }

    [System.Xml.Serialization.XmlElement("show_in_webshop")]
    public string Show_in_webshop { get; set; }

    [XmlArray("price")]
    [XmlArrayItem("list-a")]
    public List<string> price { get; set; }
}

[XmlRoot("items")]
public class items
{
    [XmlElement("item")]
    public item[] item { get; set; }
} 
```

问题是我得到了第一组项目的一行。但是当我删除

```
 [XmlArray("price")]
    [XmlArrayItem("list-a")]
    public List<string> price { get; set; } 
```

它给了我所有的行。我已经尝试了很多东西，并查看了其他一些与此相同的已发布问题，但我无法让它发挥作用。

我从中得到一些东西的唯一方法是使用上面的代码。

我非常感谢我能得到的所有帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T16:52:28.377

试试这个。这是工作。我已经测试过了：

```
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
[System.Xml.Serialization.XmlRootAttribute(Namespace = "", IsNullable = false)]
public partial class items
{
    public itemsItem item { get; set; }
}

[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class itemsItem
{
    public uint id { get; set; }
    public string descr { get; set; }

    public string unit { get; set; }

    public byte vat { get; set; }

    public ushort inprice { get; set; }

    public byte isstock { get; set; }

    public byte stock { get; set; }

    public object paccount { get; set; }

    public uint ean { get; set; }

    public byte type { get; set; }

    public object producer { get; set; }

    public uint producer_itemno { get; set; }

    public object package_height { get; set; }

    public object package_depth { get; set; }

    public object package_width { get; set; }

    public object package_weight { get; set; }

    public object stock_place { get; set; }

    public object stock_warning { get; set; }

    public object note { get; set; }

    public byte bulky { get; set; }

    public byte omit { get; set; }

    public byte available { get; set; }

    public ushort account { get; set; }

    public ushort constracct { get; set; }

    public ushort exportacct { get; set; }

    public ushort eurevacct { get; set; }

    public ushort euvatacct { get; set; }

    public object supplierno { get; set; }

    public byte show_in_webshop { get; set; }

    public itemsItemPrice price { get; set; }

}

[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class itemsItemPrice
{
    [System.Xml.Serialization.XmlElementAttribute("list-a")]
    public itemsItemPriceLista lista { get; set; }
}

[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class itemsItemPriceLista
{

    private decimal from0Field;

    [System.Xml.Serialization.XmlElementAttribute("from-0")]
    public decimal from0 { get; set; }

} 
```

和反序列化代码：

```
string xml = @"<items>
            <item>
                <id>00175565</id>
                <descr>KJAAM-EMC 16x(2+1)x0,5 T500</descr>
                <unit>st</unit>
                <vat>25</vat>
                <inprice>374</inprice>
                <isstock>0</isstock>
                <stock>0</stock>
                <paccount/>
                <ean>00175565</ean>
                <type>1</type>
                <producer/>
                <producer_itemno>00175565</producer_itemno>
                <package_height/>
                <package_depth/>
                <package_width/>
                <package_weight/>
                <stock_place/>
                <stock_warning/>
                <note/>
                <bulky>0</bulky>
                <omit>0</omit>
                <available>0</available>
                <account>3041</account>
                <constracct>3231</constracct>
                <exportacct>3315</exportacct>
                <eurevacct>3318</eurevacct>
                <euvatacct>3316</euvatacct>
                <supplierno/>
                <show_in_webshop>0</show_in_webshop>
                <price>
                      <list-a>
                            <from-0>486.2</from-0>
                      </list-a>
                </price>
            </item>
        </items>
";

            XmlSerializer serializer = new XmlSerializer(typeof(items));
            using (StringReader stringReader = new StringReader(xml))
            {
                using (XmlTextReader textReader = new XmlTextReader(stringReader))
                {
                   items items =  (items)serializer.Deserialize(textReader);
                }
            } 
```

**编辑：**

```
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
[System.Xml.Serialization.XmlRootAttribute(Namespace = "", IsNullable = false)]
public partial class items
{
    [XmlElementAttribute("item")]
    public itemsItem[] item { get; set; }
} 
```

**希望最终编辑:)**

根据您的 .xml，试试这个。它适用于：[http](http://www.kbbs.se/get_item.xml) ://www.kbbs.se/get_item.xml我已经测试过了。

```
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
[System.Xml.Serialization.XmlRootAttribute(Namespace = "", IsNullable = false)]
public partial class items
{

    [System.Xml.Serialization.XmlElementAttribute("item")]
    public itemsItem[] item {get; set;}    
}

[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class itemsItem
{

    public string id{get; set;} 

    public string descr{get; set;} 

    public string unit{get; set;} 

    public string vat{get; set;} 

    public decimal inprice{get; set;} 

    public byte isstock{get; set;} 

    public sbyte stock{get; set;} 

    public object paccount{get; set;} 

    public string ean{get; set;} 

    public byte type{get; set;} 

    public string producer{get; set;} 

    public string producer_itemno{get; set;} 

    public object package_height{get; set;} 

    public object package_depth{get; set;} 

    public object package_width{get; set;} 

    public object package_weight{get; set;} 

    public object stock_place{get; set;} 

    public string stock_warning{get; set;} 

    public object note{get; set;} 

    public byte bulky{get; set;} 

    public byte omit{get; set;} 

    public sbyte available{get; set;} 

    public ushort account{get; set;} 

    public ushort constracct{get; set;} 

    public ushort exportacct{get; set;} 

    public ushort eurevacct{get; set;} 

    public ushort euvatacct{get; set;} 

    public object supplierno{get; set;} 

    public byte show_in_webshop{get; set;} 

    public itemsItemPrice price{get; set;} 

}

[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class itemsItemPrice
{   
    [System.Xml.Serialization.XmlElementAttribute("list-")]
    public itemsItemPriceList list{get; set;} 

    [System.Xml.Serialization.XmlElementAttribute("list-a")]
    public itemsItemPriceLista lista{get; set;} 

    [System.Xml.Serialization.XmlElementAttribute("list-w")]
    public itemsItemPriceListw listw { get; set; } 

}

[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class itemsItemPriceList
{   
    [System.Xml.Serialization.XmlElementAttribute("from-")]
    public object from{get; set;} 

}

[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class itemsItemPriceLista
{
    [System.Xml.Serialization.XmlElementAttribute("from-0")]
    public decimal from0{get; set;} 

}

[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class itemsItemPriceListw
{
    [System.Xml.Serialization.XmlElementAttribute("from-0")]
    public byte from0{get; set;} 

} 
```

祝你好运 ：）

# c# - 在 TabControl 中设置 DataContext

> ID：12785712
> 
> 赞同：1
> 
> 时间：2012-10-08T16:31:57.560
> 
> 标签：c#, wpf, mvvm, tabcontrol, datacontext

我有一个 TabControl，它绑定到一个可观察的员工集合，就像这样

```
<TabControl ItemsSource="{Binding Employees}">
            <TabControl.ContentTemplate>
                <DataTemplate>
                    <views:EmployeeView/>
                </DataTemplate>
            </TabControl.ContentTemplate>
        </TabControl> 
```

我已将我的 DataTemplate 设置为我的员工视图。假设我的员工集合中有两名员工。我得到了正确的标签出现。在我的 EmployeeView 中，我有一个复选框。如果我不绑定此复选框，则会在所有选项卡上进行检查。我不确定我是否在关注为什么会发生这种情况。我想我的问题是如何在 EmployeeView 上设置 DataContext 以便 tabcontrols 选项卡可以独立运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:58:38.037

问题可能是当它`TabControl`被数据绑定时，它“虚拟化”它的 TabItems，在选择更改时卸载然后重新加载和重新绑定它们的内容。

因此，您可以尝试`IsChecked`将 CheckBox 中的绑定`View`到其属性`ViewModel`，或者使用以下行为禁用`TabItem`虚拟化：http: [//www.codeproject.com/Articles/460989/WPF-TabControl-Turning -Off-Tab-Virtualization](http://www.codeproject.com/Articles/460989/WPF-TabControl-Turning-Off-Tab-Virtualization)

我最近自己使用了上述行为，因为我对 TabControl 的默认数据绑定行为有类似的问题。

# django - Django 用户配置文件查询

> ID：12785715
> 
> 赞同：0
> 
> 时间：2012-10-08T16:32:07.717
> 
> 标签：django, django-profiles

几个小时以来，我一直在努力查看这段代码有什么问题。我正在处理的项目呼吁用户注册到站点（由[Django 注册插件](https://bitbucket.org/ubernostrum/django-registration)处理。）一旦注册，用户将能够将他们的公司（姓名、地址、电话等）添加到站点作为清单。所以公司有自己的模式。我正在使用 Django 个人资料在 Django 个人资料页面上显示用户信息和公司信息。[Profiles 也建立在Django Profiles 插件](https://bitbucket.org/ubernostrum/django-profiles)之上。

```
url(r'^accounts/', include('registration.urls')),    
url(r'^admin_export/', include("admin_export.urls")),   
url(r'^profiles/edit', 'profiles.views.edit_profile'),
url(r'^profiles/create', 'profiles.views.create_profile'),
url(r'^profiles/', include('profiles.urls')),
url(r'^profiles/(?P<username>\w+)/$', 'profiles.views.profile_detail',name='UserProfileView'),
url(r'^comments/', include('django.contrib.comments.urls'))

#models.py

class UserProfile(models.Model):
    user = models.ForeignKey(User,unique=True)
    #email = models.CharField(max_length=200, blank=True, null=True)
    # Other fields here
    #company = models.ForeignKey(Company,blank=True,null=True)    
    #office = models.CharField(max_length=200, blank=True, null=True)    
    def __unicode__(self):
        return self.user.username

class Company(models.Model):
    userprofile = models.ForeignKey(UserProfile, null=True, blank=True)
    comp_name = models.CharField(max_length=200,blank=True,null=True)
    comp_address = models.CharField(max_length=200,blank=True, null=True)
    comp_email = models.CharField(max_length=200,blank=True, null=True)
    comp_zip = models.IntegerField(blank=True, null=True)
    comp_phone = models.IntegerField(blank=True, null=True)
    comp_city = models.CharField(max_length=200,blank=True, null=True)
    #comp_state = models.USStateField(blank=True, null=True
    comp_state = models.CharField(blank=True, max_length=2)
    compwebsite = models.URLField(max_length=200, blank=True, null=True)
    twitterurl = models.URLField(max_length=200, blank=True, null=True)
    facebookurl = models.URLField(max_length=200, blank=True, null=True)
    def __unicode__(self):
        return self.comp_name

class ProfileForm(ModelForm):
    class Meta:
        model=UserProfile
        exclude=('user',)

#views.py
def UserProfileView(request, username):
    context_dict = {}
    usercompany =  get_object_or_404(Company, user=userprofile)
    context_dict = {'usercompany': usercompany}
    return render_to_response('profile_detail.html', context_dict, RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:39:57.573

`userprofile`在您的views.py中引用它时实际上不可用，因此它应该引发`NameError`

如果我理解正确，实现此目的的方法是：

```
#views.py
def UserProfileView(request):
    context_dict = {}
    usercompany =  get_object_or_404(Company, userprofile__user=request.user)
    context_dict = {'usercompany': usercompany}
    return render_to_response('profile_detail.html', context_dict, RequestContext(request)) 
```

# ruby-on-rails - Capybara 在控制器中选择了错误的格式

> ID：12785720
> 
> 赞同：3
> 
> 时间：2012-10-08T16:32:30.913
> 
> 标签：ruby-on-rails, rspec, ruby-on-rails-3.2, capybara

我是 Rails 和 TDD 的新手。我目前正在使用 Capybara 和 RSpec 测试我的页面。

我在主页 (root_path) 上有一个**表单，它通过 post 提交给 Linkage 控制器：**

```
<%= form_for @link, url: linkages_path, method: :post,  remote: true do |f| %>
    <%= f.labels/text_fields... %>
    <%= f.submit "Add Link" %>
<%  end %> 
```

它进入**Linkages 控制器**的创建操作，理想情况下应该使用 AJAX (format.js) 更改 root_path 的数据：

```
 def create
    @link = Link.new(params[:link])
    if @link.save and current_user.linkages.build(link_id: @link.id).save
      flash.now[:success] = "Link to \"#{@link.content}\" was successfully added!"
      respond_to do |format|
        format.html { redirect root_path }
        format.js do
            @user_linkage = current_user.linkages
            render 'users/user_linkage.js.erb'
        end
      end
    else
      flash.now[:error] = "..."
      error...
    end
  end 
```

现在成功了，它应该渲染 js 文件 users/user_linkage.js.erb，就是这个（它只是改变了 root_path 中的 userLinkage div）：

```
$('#flash').html("<%= escape_javascript(raw(flash_display)) %>");
$('#userLinkage').html("<%= escape_javascript(render partial: 'users/user_linkage_items',
                                             locals: {user_linkage: @user_linkage }) %>"); 
```

它在 Chrome/Firefox/IE/Opera 中完美运行。但是，当我在**Capybara**（如下）中为其编写测试时，它失败了，因为它重定向回 root_path（format.html），而不是渲染 format.js 块中指定的页面（更改 root_path 中的数据）。

```
describe "test" do

    let(:link){'some link'}
    let(:text){'some text'}

    before do
        visit root_path
        fill_in 'Text', with: link
        fill_in 'Link', with: text
    end

    it "should work" do

        expect do
            click_button 'Add Link'
        end.to change(Link, :count).by(1)
        sleep(5)
        should have_content(text)                 # works until here (root_path has same info)
        should have_selector('div.alert-success') # fails on this line(flash message)
    end
end 
```

所以我知道 Capybara 只能做 GET 请求，而我的表单是在 POST 中，但对于用户模拟，这些东西应该是无关紧要的（？）。

如果我将成功的格式从 format.html/format.js 更改为以下内容：

```
 respond_to do |format|
    format.all do
        @user_linkage = current_user.linkages
        render 'users/user_linkage.js.erb'
    end
  end 
```

，然后 Capybara 最终为我呈现正确的页面，但如果我调用`save_and_open_page` 它，那么我会看到所有转义的 javascript 和错误呈现的 HTML，所以我无法测试类似`have_selector()`.

我的问题是为什么会这样？是因为 Capybara 使用 GET 而不是 POST 并且即使单击链接也不一定会在控制器内部调用正确的格式？

PS 使用 format.js（排序）切换 format.html 并不能解决问题 - format.html 被调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:45:02.490

AFAIK Capybara 适合 POST。`:js => true`如果您使用的是 capybara-webkit，请添加。在您的 js 中，您需要`.html_safe`：

```
$('#userLinkage').html("<%= escape_javascript(render partial: 'users/user_linkage_items',
                                         locals: {user_linkage: @user_linkage }).html_safe %>"); 
```

还有这个：

```
current_user.linkages.build(link_id: @link.id).save 
```

可以改为：

```
current_user.linkages.create(link_id: @link.id) 
```

还要遵循一些恒定的缩进方案（常用2个空格）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-24T01:19:27.973

您需要添加`js: true`到您的测试中。

```
it "should work", js: true do 
```

# c++ - Visual Studio 2012 中的虚假可变参数

> ID：12785721
> 
> 赞同：2
> 
> 时间：2012-10-08T16:32:34.460
> 
> 标签：c++, c++11, visual-studio-2012, variadic-templates

我正在尝试创建一个带有可变数量参数的构造函数，并且我非常希望保持类型安全。我四处搜索并不断找到术语“Faux variadics”（示例：http: [//msdn.microsoft.com/en-us/library/hh567368.aspx](http://msdn.microsoft.com/en-us/library/hh567368.aspx)）但是我无法找到如何使用这些的任何示例虚假可变参数，我想避免直接在源文件中查找 std::tuple。

那么有谁知道这些Faux variadics的一个相对简单的例子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T16:47:12.140

您可以使用 boost 预处理器库来执行此操作：

*   [http://www.boostpro.com/mplbook/preprocessor.html](http://www.boostpro.com/mplbook/preprocessor.html)

使用 BOOST_PP_REPEAT 的简单示例：

```
#include <boost/preprocessor/repetition.hpp>
#include <boost/preprocessor/arithmetic/sub.hpp>
#include <boost/preprocessor/punctuation/comma_if.hpp>

#define TINY_print(z, n, data) data

#define TINY_size(z, n, unused)                                 \
  template <BOOST_PP_ENUM_PARAMS(n, class T)>                   \
  struct tiny_size<                                             \
      BOOST_PP_ENUM_PARAMS(n,T)                                 \
      BOOST_PP_COMMA_IF(n)                                      \
      BOOST_PP_ENUM(                                            \
          BOOST_PP_SUB(TINY_MAX_SIZE,n), TINY_print, none)      \
  >                                                             \
    : mpl::int_<n> {};

BOOST_PP_REPEAT(TINY_MAX_SIZE, TINY_size, ~)

#undef TINY_size
#undef TINY_print 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:49:32.467

现在您还可以使用 November CTP 并尝试他们的可变参数模板实现。

# gwt - 侦听 ListGrid 行上的 Click 事件

> ID：12785723
> 
> 赞同：1
> 
> 时间：2012-10-08T16:32:44.540
> 
> 标签：gwt, smartgwt

是否可以在 ListGrid 的一行上监听 click 事件？如果是，我该如何进行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T06:12:56.777

@Manu 或者，您可以执行以下操作：

```
listGrid.addRecordClickHandler(new RecordClickHandler() {
        @Override
        public void onRecordClick(RecordClickEvent event) {
            // your code
        }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:32:44.540

```
ListGridField[] listGridFields = listGrid.getFields();
for (ListGridField listGridField : listGridFields) {

  listGridField.addRecordClickHandler(new RecordClickHandler() {

    @Override
    public void onRecordClick(RecordClickEvent event) {
      evaluator.recordClicked(event.getRecord());
    }
  });

} 
```

有更好的方法吗？

# javascript - 使用小书签修改当前页面，并访问 iFrame

> ID：12785724
> 
> 赞同：1
> 
> 时间：2012-10-08T16:32:46.633
> 
> 标签：javascript, bookmarklet

我一直在制作一个小书签，以对网页进行微小的更改，供我在浏览网站时个人使用。我有动态加载 jquery 的小书签（如果需要），并且可以毫无问题地访问和修改页面。

此页面有几个嵌套的 iFrame，我要修改的 html 位于一个 iFrame 中，该 iFrame 的域与原始页面不同。所以我得到：

`Unsafe JavaScript attempt to access frame with URL`

浏览器使用最上面的页面作为我的脚本的起点，这很有趣，因为它的起点是一个书签。是否有可能绕过这个限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:10:52.013

仅使用小书签无法解决此限制。当您执行一个小书签时，它会在当前（顶部）页面的上下文中执行。尽管该限制被称为“同源策略”，但原点是指执行代码的上下文，而不是代码的来源。当您执行一个书签时，代码来自书签，但它在当前页面内执行。

为了实现您的目标，您必须创建一个用户脚本或创建一个插件/扩展。如果您在 Chrome 中安装 Greasemonkey 和本机，则 Firefox 支持用户脚本。

# jquery - jquery.post 不适用于对象文字

> ID：12785732
> 
> 赞同：0
> 
> 时间：2012-10-08T16:33:15.283
> 
> 标签：jquery, slim

与我做的[$.post API](http://api.jquery.com/jQuery.post/)类似：

```
$.post('http://...', POST_BODY, function(data) {...});

POST_BODY                            GIVES ME
{name:'test'}                        Empty response
{'name':'test'}                      Empty response
{"name":"test"}                      Empty response
'{"name":"test"}'                    stdClass Object([name] => test)
JSON.stringify({"name":"test"})      stdClass Object([name] => test) 
```

例如

```
$.post('http://...', {name:'test'}, function(data) {...}); 
```

我的 php 休息功能：

```
function postContact(...) {
    $request = Slim::getInstance()->request();
    $body= json_decode($request->getBody());
    print_r($body);
} 
```

为什么我不能使用 jQuery API 中描述的对象文字？是我的服务器端还是客户端出错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T16:44:15.250

你理解错了。传递对象字面量将导致 jQuery 将对象的每个属性作为键并将所有值转换为字符串并将其转换为具有形式的 post 参数`key1=val1&key2=val2`。当然，这不是 JSON，因此会`json_decode`默默地失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T16:44:06.297

jQuery 实际上并没有将“对象文字”发布到您的 PHP 脚本中。它被转换为查询字符串，并作为 POST 数据发送，就像您正常发布表单一样。

你不需要`json_decode`任何东西，你只需要读取`$_POST`数组并获取它的值。

您的最后两个示例有效，因为您将 JSON 字符串作为 POST 正文发送，但您的其他示例将标准查询字符串作为 POST 正文发送。

# c# - 在不删除当前正在运行的应用程序的情况下设置鼠标挂钩？

> ID：12785735
> 
> 赞同：0
> 
> 时间：2012-10-08T16:33:29.593
> 
> 标签：c#, dllimport, mouse-hook

我有一个在运行时打开 GUI 的程序。然后我想使用 dllimports 设置一个鼠标钩，但为了让它工作，我必须在同一个类中调用一个新的 Application.Run()。不幸的是，这删除了原来的 GUI。有什么办法可以在原始消息循环上运行鼠标钩？我在这里有点迷路了。

以下是代码的几个关键部分：

```
//main

public static GUI GUIref;

static void Main()
{
     Application.EnableVisualStyles();
     Application.SetCompatibleTextRenderingDefault(false);
     Application.Run(GUIref = new GUI());
} 
```

.

```
//Initializing constructor    

    public partial class GUI : Form
    {
        public GUI()
        {
            InitializeComponent();
            keyReceive kR = new keyReceive();
            mouseReceive mR = new mouseReceive();
        }
    } 
```

.

```
//mousehook class:

    public class mouseReceive : Form
    {
        private static LowLevelMouseProc _proc = HookCallback;
        private static IntPtr _hookID = IntPtr.Zero;
        public mouseReceive()
        {
            _hookID = SetHook(_proc);
            //***This is where I have been putting Application.Run() to make the mousehook work***
            UnhookWindowsHookEx(_hookID);
        }

        private static IntPtr SetHook(LowLevelMouseProc proc)
        {
            using (Process curProcess = Process.GetCurrentProcess())
            using (ProcessModule curModule = curProcess.MainModule)
            {
                return SetWindowsHookEx(WH_MOUSE_LL, proc,
                    GetModuleHandle(curModule.ModuleName), 0);
            }
        }

        private delegate IntPtr LowLevelMouseProc(int nCode, IntPtr wParam, IntPtr lParam);

        private static IntPtr HookCallback(
            int nCode, IntPtr wParam, IntPtr lParam)
        {

            if (nCode >= 0 &&
                MouseMessages.WM_LBUTTONDOWN == (MouseMessages)wParam)
            {
                MessageBox.Show("");

            }
            return CallNextHookEx(_hookID, nCode, wParam, lParam);
        }

        private const int WH_MOUSE_LL = 14;

        private enum MouseMessages
        {
            WM_LBUTTONDOWN = 0x0201
        }

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr SetWindowsHookEx(int idHook,
            LowLevelMouseProc lpfn, IntPtr hMod, uint dwThreadId);

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        private static extern bool UnhookWindowsHookEx(IntPtr hhk);

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr CallNextHookEx(IntPtr hhk, int nCode,
            IntPtr wParam, IntPtr lParam);

        [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr GetModuleHandle(string lpModuleName);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T18:30:19.267

在 mouseReceive 构造函数中，您正在设置挂钩，然后立即取消挂钩。如果将 Application.Run() 插入注释所在的位置，则会阻塞线程，直到新窗口关闭，因此钩子不会解开并且可以工作。真正的解决方法是从构造函数中删除 UnhookWindowsHookEx(_hookID) 并将其放入 IDisposable 模式。

旁注：如果您尝试实例化多个 mouseReceive 类的实例，您也可能会遇到问题，因为它具有 _proc 和 _hookID 的静态成员。

# xslt - XSLT 多级分组：使用 Muenchian 方法的 xsl:for-each-group

> ID：12785736
> 
> 赞同：1
> 
> 时间：2012-10-08T16:33:43.540
> 
> 标签：xslt, xslt-2.0, xslt-grouping, muenchian-grouping

我试图理解 XSLT 中的分组。我有一个 XML 文档，其中包含调查问卷的答案，由受访者（“pid”）列出。我想按问题对所有受访者的答案进行分组，以便我可以创建图表等。这是基本的 XML 结构：

```
<survey>
    <answers>
        <pid xml:id="p1">
            <category key="#c1">
                <head>Category Heading</head>
                ... 
                <question key="#q1.4">
                    <answer key="#a2"/>
                    <answer key="#a3"/>
                    <answer key="#a4"/>
                </question
                ...
            </category
            ...
        </pid> 
        <pid xml:id="p2">
            <category key="#c1">
                <head>Category Heading</head>
                ... 
                <question key="#q1.4"> 
                    <answer key="#a2"/>
                    <answer key="#a3"/>
                    <answer key="#a4"/>
                </question
                ...
            </category
            ...
        </pid>   
        <pid xml:id="p3">
            <category key="#c1">
                <head>Category Heading</head>
                ... 
                <question key="#q1.4"> 
                    <answer key="#a2"/>                   
                </question
                ...
            </category
            ...
        </pid>   
        <pid xml:id="p4">
            <category key="#c1">
                <head>Category Heading</head>
             ... 
            <question key="#q1.4">
                <answer key="#a1"/>                                                             
            </question
            ...
            </category
            ...
        </pid>   
    </answers>
</survey> 
```

我还想计算受访者中每个答案的出现次数。我尝试单独使用 XSLT 2.0 `for-each-group`，但无法让它按照我想要的方式工作。我最终将它与 Muenchian (XSLT 1.0) 分组技术结合起来，并最终让它发挥作用。但是，我仍然不明白它是如何工作的。这是我用来对`<answer>`元素进行分组的 XSLT 位：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xd="http://www.oxygenxml.com/ns/doc/xsl"
    exclude-result-prefixes="#all"
    version="2.0">
    <xsl:output encoding="iso-8859-1" method="text"
        omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>     

    <xsl:key name="answerKey" match="answer" use="@key"/>
    <xsl:key name="answerKey3" match="answer" use="concat(generate-id(..),' ',@key)"/>

    <xsl:template match="/">
    ...
        <xsl:for-each-group select="/survey/answers/pid/category/question" group-by="@key">          
            <xsl:variable name="qKey" select="@key"/>
            <xsl:variable name="x" select="generate-id(.)"/>  
            <xsl:text>
            </xsl:text>
            <xsl:value-of select="substring-after(@key,'#')"/>                                            
            <xsl:for-each-group select="//answer[count(.|key('answerKey3',concat($x,' ',@key))[1])=1][parent::question[@key=$qKey]]" group-by="@key">
            <xsl:text>
            </xsl:text>    
                <xsl:variable name="aID" select="substring-after(@key,'#')"/>                               
                <!-- <xsl:value-of select="key('questionKey2',parent::question/@key)/Answers/Answer[@xml:id=$aID]"/> -->                
                <xsl:value-of select="substring-after(@key,'#')"/>                        
                <xsl:text>,</xsl:text>                                                       
                <xsl:value-of select="count(key('answerKey',@key)[ancestor::question[@key=$qKey]])"/>                 
            </xsl:for-each-group>  
            <xsl:text>
            </xsl:text>
        </xsl:for-each-group>
    </xsl:template>
</xsl:stylesheet> 
```

使用此代码，我可以输出以逗号分隔的答案列表和按问题分组的答案计数，例如：

```
q1.4
a1,1
a2,3
a3,2
a4,2 
```

谁能解释这是如何工作的，尤其是`for-each-group`使用 Muenchian XPath 对我的`<answer>`元素进行分组的第二个（嵌套）？

有没有更简单的方法来达到同样的效果？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:37:14.963

这可以在不需要 muenchian 分组的情况下稍微简化（尽管如此可爱）。

你已经正确地开始了，通过他们的@key对问题进行分组。

```
<xsl:for-each-group select="/survey/answers/pid/category/question" group-by="@key"> 
```

但是，对于每个问题，您需要查看该特定问题的所有答案，并将它们分组。在这种情况下，您可以使用一个键来对给定问题的所有答案进行分组

```
<xsl:key name="answerKey" match="answer" use="../@key"/> 
```

然后，要按@key 对答案进行分组，在给定的问题中，您仍然可以使用**xsl:for-each-group**

```
<xsl:for-each-group select="key('answerKey', current-grouping-key())" group-by="@key"> 
```

即获取问题的所有答案，并按@key 属性对它们进行分组。此实例中的 current-grouping-key() 包含当前问题的 @key 属性。

最后，直接给出分组答案的总数

```
<xsl:value-of 
  select="concat(current-grouping-key(), ',', count(current-group()), '&#10;')" /> 
```

这是完整的 XSLT

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xd="http://www.oxygenxml.com/ns/doc/xsl" exclude-result-prefixes="#all" version="2.0">
   <xsl:output encoding="iso-8859-1" method="text" omit-xml-declaration="yes" indent="yes"/>
   <xsl:strip-space elements="*"/>
   <xsl:key name="answerKey" match="answer" use="../@key"/>

   <xsl:template match="/"> 
      <xsl:for-each-group select="survey/answers/pid/category/question" group-by="@key">
         <xsl:value-of select="concat(current-grouping-key(), '&#10;')" />
         <xsl:for-each-group select="key('answerKey', current-grouping-key())" group-by="@key">
            <xsl:sort select="@key" />
            <xsl:value-of select="concat(current-grouping-key(), ',', count(current-group()), '&#10;')" />
         </xsl:for-each-group>
      </xsl:for-each-group>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
#q1.4
#a1,1
#a2,3
#a3,2
#a4,2 
```

# ios - 文本文件 -> json -> ios 数组

> ID：12785739
> 
> 赞同：0
> 
> 时间：2012-10-08T16:34:06.687
> 
> 标签：ios, json, bash

我有一个格式如下的文件：

```
/Users/devplayerx/Sandbox/pics/images/001012DG-161.JPG
  pixelWidth: 1600 
  pixelHeight: 1050 
filename: 001012DG-161.JPG

/Users/devplayerx/Sandbox/pics/images/001019DG-151 COPY.JPG
  pixelWidth: 1600 
  pixelHeight: 1050 
filename: 001019DG-151 COPY.JPG 
```

并希望最终拥有一个以文件名作为键的 iOS 字典，以及以 pixelWidth 和 pixelHeight 作为值的字典或数组。我正在考虑将我的文本文件转换为 JSON 文件，然后使用 NSJSONSerialization 对其进行解析，但我不确定如何将我的文本文件转换为 JSON。另外，我想从文本文件中删除完整路径，因为它不是必需的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:39:26.337

这是一个似乎可以完成这项工作的 perl 脚本：

```
#!/usr/bin/perl
use strict;
use warnings;

open FILE,"< yourfile.txt" or die "I/O error : $!\n";
my $w = 0;
my $h = 0;
my $f = "";

print "{\n";
while (my $line = <FILE>)
{
    if ($f)
    {
        print ",\n";
        $f = "";
    }
    if ($line =~ /pixelWidth: ([0-9]+)/)
    {
        $w = $1;
    }
    if ($line =~ /pixelHeight: ([0-9]+)/)
    {
        $h = $1;
    }
    if ($line =~ /filename: (.*)$/)
    {
        $f = $1;

        print "\t\"$f\" : [ $w, $h ]"
    }
}
print "\n}\n";
close FILE; 
```

请注意，我不是 perl 专家，因此也许可以对其进行改进，但在您的输入文件上使用它似乎会产生您预期的 JSON，如下所示：

```
prompt$ perl scr.pl
{
    "001012DG-161.JPG" : [ 1600, 1050 ],
    "001019DG-151 COPY.JPG" : [ 1600, 1050 ]
} 
```

* * *

请注意，一旦您拥有 JSON 文件，您可以选择使用该`plutil`工具将其转换为 PLIST 文件。例如`perl scr.pl | plutil -convert binary1 -o yourfile.plist -`将从（我上面的脚本）`yourfile.plist`生成的 JSON创建。然后，您可以使用NSDictionary 在一行中`perl scr.pl`轻松地在代码中读取此文件，并直接访问您的数据。`[NSDictionary dictionaryWithContentsOfFile:pathToYourFilePlist]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:40:15.470

json 对象可能如下所示：

`{ picture: { path : "thePath", pixelWidth: 1600, pixelHeight: 1050, filename : "name" }}`

然后，我将通过获取行并将它们放入列表中进行转换，循环遍历列表并最终使用上述对象表示法将所有内容吐出到另一个文本文件中。

您需要什么语言来编写工具以将其转换为 json？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T16:45:20.617

您可以使用 NSInputStream 来读取文本文件，在每次迭代中，您都可以按照自己的方式构建字典。

之后只需使用 NSJSONSerialization。

# php - php longblob 到 img

> ID：12785740
> 
> 赞同：3
> 
> 时间：2012-10-08T16:34:15.027
> 
> 标签：php, database

我有一个调用数据库类的函数，并要求提供图像列表。这是下面的功能。

```
//Hämtar en array av filer från disk.
public function GetFiles()
{   

    $sql = "SELECT pic FROM pictures";
    $stmt = $this->database->Prepare($sql);

    $fileList = $this->database->GetAll($stmt);
    echo $fileList;
    if($fileList)
    {
        return $fileList;
    }
    return false;
} 
```

这是 GetFiles 调用的我的数据库类方法。

```
public function GetAll($sqlQuery) {

        if ($sqlQuery === FALSE)
        {
            throw new \Exception($this->mysqli->error);
        }
        //execute the statement
        if ($sqlQuery->execute() == FALSE)
        {
            throw new \Exception($this->mysqli->error);
        }
        $ret = 0;
        if ($sqlQuery->bind_result($ret) == FALSE)
        {
            throw new \Exception($this->mysqli->error);
        }

        $data = array();
        while ($sqlQuery->fetch())
        {
            $data[] = $ret;
            echo $ret;
        }

        $sqlQuery->close();

        return $data;
    } 
```

GetFiles 函数返回值随后由另一个函数处理

```
public function FileList($fileList)
{
    if(count($fileList) == 0)
    {
        return "<p class='error'> There are no files in array</p>";
    }

    $list = '';
    $list .= "<div class='list'>";
    $list .= "<h2>Uploaded images</h2>";
    foreach ($fileList as $file) {

        $list .= "<img src=".$file." />";
    }
    $list .= "</div>";
    return $list;
} 
```

但是我的数据库只是将longblob作为很多carachters返回，我如何让longblob显示为图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T16:37:54.863

您需要对其进行 base64 编码并通过数据 URI 传递它，例如

```
<img src="data:image/jpeg;base64,<?php echo base64_encode($file) ?>" /> 
```

但是，如果您要提供“大”图片，这将导致页面非常臃肿，绝对无法缓存图像数据以节省用户以后的下载流量。您最好使用明确的图像服务脚本，例如

```
<img src="getimage.php?imageID=XXX" /> 
```

然后在该脚本中有你的数据库代码：

```
$blob = get_image_data($_GET[xxx]);
header('Content-type: image/jpeg');
echo $blob; 
```

像这样的问题就是为什么从数据库中提供图像通常是个坏主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:36:57.077

如果您将其作为网页的一部分嵌入，那么您应该使用[`data`URI 方案](http://en.wikipedia.org/wiki/Data_URI_scheme)。

最好让`<img>`标签指向一个 PHP 文件，该文件设置正确的`Content-Type`标题并转储图像数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T16:39:24.050

我建议您将图像保存到文件系统并从那里加载，原因如下：

*   它在数据库上很昂贵，并且数据库更难扩展
*   它使用许多系统资源来完成一项次要任务
*   Internet Explorer，尤其是 IE8，会给超过 34k 长的 src 报错

查看 CDN 选项。

如果你坚持

```
$list  = sprintf("<img src=\"data:image/jpeg;base64,%s\" />",base64_encode($file)); 
```

# c - 输出中的模运算

> ID：12785742
> 
> 赞同：4
> 
> 时间：2012-10-08T16:34:27.157
> 
> 标签：c, algorithm, discrete-mathematics, number-theory

在大多数假定程序输出非常大的编码竞赛中，通常指示将输出除以 10000007（或在这种情况下为素数）。取素数的意义是什么，因为在许多情况下，我发现与 100004 相同的数字（即不是素数）..？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T17:28:28.560

使用素数有两个原因。一个原因是整数模素数形成一个数学域。领域中的算术以多种方式起作用，例如整数算术。这使得一个字段在某些竞赛问题中很有用，否则在某些情况下使用的序列可能会崩溃。某些算术可能会产生零、其他微不足道的结果或比期望更简单的结果，因为涉及的数字发生在模数的一个因子上，导致发生一些减少或消除。

另一个原因是迫使程序员处理一定大小的整数的算术运算。如果使用复合数，则可以使用其他技术，而不是求助于大整数的算术。

例如，假设我们想知道 13 ²以 35 为模，但我们只有一个非常小的处理器，无法处理三位数字，因此它无法计算 13 ² = 169。

嗯，35 = 5•7，并且 13 与 3 模 5 和 6 模 7 一致。我们可以计算这些余数的平方，而不是计算 13 的平方，这告诉我们 13 ²与 3 ² = 9 = 4 模 5 并且等于 6 ² = 36 = 1 模 7。组合这些残基需要一些额外的知识（[扩展欧几里得算法](http://en.wikipedia.org/wiki/Extended_Euclidean_algorithm)）。对于这些特定的数字，我们可以将 5 的余数乘以 21，并将 7 的余数乘以 15，得到 4·21+1·15 = 99。减少模 35 得到 29，这就是答案（13 的余数²模 35)。

如果模数是素数，则这种算术规避是不可用的。素数模数本质上需要对数的算术使用直到模数的平方（或耗时的解决方法），但复合模数将允许对较小的数使用算术，最多只有模数的两倍。

# joomla1.5 - 如何解决 Joomla 和 JCE 编辑器的授权错误？

> ID：12785744
> 
> 赞同：1
> 
> 时间：2012-10-08T16:34:33.350
> 
> 标签：joomla1.5

我使用前端登录来编辑我的网站；作为一名编辑，我使用效果很好的 JCE 编辑器。

对于插入图像，我通常使用此选项，并且效果很好。

![选项](../Images/bc66a4cfa3001698db626d13d3915a4a.png)

但是最近当我点击这个图标时，我看到了这个错误：

> 你无权查看该资源。

我该如何解决这个问题？

# c# - ASP.NET控件可以在WinForms中使用吗？

> ID：12785746
> 
> 赞同：1
> 
> 时间：2012-10-08T16:34:35.020
> 
> 标签：c#, asp.net, winforms

这可能是一个愚蠢的问题，但我不得不问。

我发现了这个优秀的（主要是免费的）控件套件（Ext.NET），我想知道是否可以在 WinForms 中使用它。

如果可以，它是通常可行的还是会是一场噩梦？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T16:36:40.870

不，这是不可能的。ASP.NET 控件的生命周期和环境与普通桌面控件有很大不同，并且无法互换它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:37:02.557

不，任何直接的解决方案都不可能，Asp.net 控件将使用`System.Web.UI control`而 Window `System.Windows.Forms Controls`。

# c++ - 插入返回迭代器

> ID：12785749
> 
> 赞同：1
> 
> 时间：2012-10-08T16:35:02.497
> 
> 标签：c++, insert, iterator, const-iterator

我正在实施`class graph`。类似于`stl`，我认为插入函数的签名应该是

`pair<iterator,bool> insert ( const value_type& x );`

对于我的班级，我已经实现了`iterator`和`const_iterator`. 我是否应该定义 2 个 i（重载）`insert`函数：一个将返回`pair<iterator,bool>`，第二个将返回`pair<const_iterator,bool>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:46:01.270

不，没有必要。`insert`无论如何，您不能调用`const`集合。

# flex4.5 - 无法从 url 获取图像并在 flex 中设置为图像视图

> ID：12785751
> 
> 赞同：0
> 
> 时间：2012-10-08T16:35:07.827
> 
> 标签：flex4.5, e4x, yahoo-api

任何人都可以帮助我，我想从 yahoo weather rss 获取图像并设置我的 flex 组件的来源，我现在可以从 yahoo weather rss 获取其他数据但仍然无法获取图像请帮助我我有其他数据这种方式[无法从 yahoo-weather-rss-in-flex 获取数据](https://stackoverflow.com/questions/12759201/could-not-be-able-to-use-yahoo-weather-api-in-flex-mobile-app)

请给我一些提示以获取该图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T05:40:55.847

好的，今天我终于从 yahoo 天气 api 或 rss 提要中了解了如何设置图像，而不是获取图像。因此，我尝试获取条件代码并将自己的图像设置在我的资产文件夹中，如下所示：

```
 var codeOfCondition:XMLList = result_weather_data_xml.descendants().attribute("code"); 
```

然后尝试：

```
if(codeOfCondition == 0){image.source = "assets/CORRESPONDING_IMAGE_TO_CODE";// for all conditions there should be corresponding image} 
```

这为我解决了问题，可能还有其他方法可以做到这一点，但这是我的方法，谢谢。

# android - 如何授权我的 Android 应用在后台任务中将数据上传到 Google BigQuery？

> ID：12785752
> 
> 赞同：1
> 
> 时间：2012-10-08T16:35:08.313
> 
> 标签：android, google-bigquery

我想在后台任务中从我的 Android 应用程序将数据上传到 Google BigQuery。我想，我可以用 Java 库做一个[插入工作。](https://developers.google.com/bigquery/docs/reference/v2/jobs/insert)但是[授权页面](https://developers.google.com/bigquery/docs/authorization#installed-applications)说：

> 在授权流程中，应用程序会将用户重定向到 Google 托管的网页，以请求访问 BigQuery API。

但这不是我想要的。我想在后台上传数据。而且我不想授权 Android 应用程序用户，我想授权应用程序。

可以使用 Google BigQuery 存储我的 Android 应用收集的大数据吗？以及如何授权我的应用对抗 Google？

我希望你能理解我的问题并给我一个提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T19:16:00.660

*回复：“可以使用 Google BigQuery 来存储我的 Android 应用收集的大数据吗？”*

是的。BigQuery 一次可以加载大量数据（最多 1 Tb），[每个项目最多可以运行 10,000 个加载作业](https://developers.google.com/bigquery/docs/quota-policy#import)，但本质上，将数据加载到 BigQuery 是一个批处理过程。所以：

**方法 1：** 创建一个基于 Web 的应用程序，通过 RESTful API 从您的 Android 应用程序收集数据。然后，每隔一段时间（每天？每小时？），将新收集的数据移动到 Google Cloud Storage 中。最后，启动 BigQuery 提取作业，将最近收集的数据从 Google Cloud Storage 提取到 BigQuery。

构建第一部分的一种方法是使用 App Engine Datastore 从您的 Android 应用程序收集数据。可以使用[新的 Datastore Admin 备份到 BigQuery 功能](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine/UuAJtwj8la8)将收集的数据加载到 BigQuery 中进行分析。

**方法 2：** 您可以使用 Android 的 AccountManager 类（[请参阅此处的教程](http://developer.android.com/training/id-auth/authenticate.html)）授权对 BigQuery API 的访问，然后使用直接 POST 请求（[使用多部分 mime 请求](https://developers.google.com/bigquery/docs/import#localimport)）将数据添加到 BigQuery 表。此流程要求 Android 应用用户在使用应用时授权访问 BigQuery API。

# python - 是否有现成的 HTTP 服务器用于调试目的？

> ID：12785758
> 
> 赞同：6
> 
> 时间：2012-10-08T16:35:22.620
> 
> 标签：python, http, network-protocols

今天我发现自己需要一个简单的 HTTP 服务器，它可以记录/打印出它所知道的关于请求的所有内容，并以一些虚拟回复（用于调试）进行响应。令人惊讶的是，我找不到任何阅读工具来使用它——我错过了什么吗？

Python 的 SimpleHTTPServer 模块看起来很有前途，也许有一种非常快速的方法可以使用它转储整个请求？

我需要它在本地运行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T16:53:49.300

从谷歌上的一些快速搜索看来，最简单的方法是子类化 SimpleHttpServer 并记录你想看到的任何内容。

这[看起来](http://georgik.sinusgear.com/2011/01/07/how-to-dump-post-request-with-python/)很容易

```
class ServerHandler(SimpleHTTPServer.SimpleHTTPRequestHandler):

    def do_GET(self):
        logging.error(self.headers)
        # whatever else you would like to log here
        SimpleHTTPServer.SimpleHTTPRequestHandler.do_GET(self)

Handler = ServerHandler

httpd = SocketServer.TCPServer(("", PORT), Handler)

print "serving at port", PORT
httpd.serve_forever() 
```

此外，您可以拥有`do_GET`并`do_POST`返回您想要的任何“虚拟”回复。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-24T15:25:52.663

```
ruby -r sinatra -e "get('/') { puts params.inspect }" 
```

文档：[http ://www.sinatrarb.com](http://www.sinatrarb.com)

Ruby 简单而灵活，它允许您快速模拟任何回复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-29T15:54:42.650

[Turq](https://pypi.org/project/turq/)适用于这种目的。它是用 Python 编写的，使用简单但广泛、灵活，甚至还有一个 GUI。Turq 的开发者是这样描述它的：

> Turq 是一个小型 HTTP 服务器，可以使用基于 Python 的语言编写脚本。使用它来设置以您选择的状态、标头和正文响应的模拟 HTTP 资源。Turq 专为快速交互式测试而设计，但也可用于自动化场景。

它也有[很好的文档](https://turq.readthedocs.io/en/stable/)。

警告：虽然 Turq 非常有用，但它的作者已经停止维护它，而是推荐[mitmproxy](https://mitmproxy.org)；mitmproxy 也有一个 Python API。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-07-07T08:46:45.100

嗨，看看 github 上的 ReturnToSender，它是一个在本地运行的模拟 http 服务器。不是网络托管的。使用您的模拟数据响应 http 客户端并显示客户端请求详细信息。

[https://github.com/stephenhealey86/ReturnToSender](https://github.com/stephenhealey86/ReturnToSender)

支持 GET、POST、PUT、PATCH、DELETE 请求类型和 JSON、TEXT、JavaScript、XML、HTML 内容类型。

# mootools - 如何为 TypeScript 声明 Function 的绑定方法

> ID：12785762
> 
> 赞同：1
> 
> 时间：2012-10-08T16:35:44.913
> 
> 标签：mootools, typescript

我正在尝试将 Mootools 与 TypeScript 一起使用。Mootools 和一些现代浏览器支持 .bind 方法，它是多态的。

如何在 *.d.ts 文件中正确声明此功能，以便能够使用 [1,2].map(this.foo.bind(this)); 之类的构造 ?

我知道我可以通过使用 lambdas 来*避免*这种结构，但有时我不想这样做。

也许有一个 mootools.d.ts 文件我可以下载而不是自己重新发明它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:03:34.800

TypeScript 的 lib.d.ts 已经在 Function 接口中定义了绑定函数的签名，如下所示：

```
bind(thisArg: any, ...argArray: any[]): Function; 
```

在泛型被添加到语言中之前，我认为没有更好的方法可以做到这一点。

不过目前，如果您想使用 bind 并且结果函数的接收者需要一个特定的签名，您将不得不将函数转换回该签名：

```
var bfn : (p: number) => string;
bfn = <(p: number) => string> fn.bind(ctx); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:48:48.443

[此处](http://typescript.codeplex.com/discussions/398150)跟踪的定义文件列表越来越多。

至于在 TypeScript 中生成预先绑定到其 this 指针的方法，我建议了两种方法。[1）我在这个线程](http://typescript.codeplex.com/discussions/397774)的末尾定义了一个简单的基类。[和 2)这里](http://typescript.codeplex.com/discussions/398391)有一个更高级的 mixin & 属性系统。

# android - 通过 HTTP 在 listView 中获取和设置图像

> ID：12785763
> 
> 赞同：1
> 
> 时间：2012-10-08T16:35:58.583
> 
> 标签：android, eclipse, http, listview

我正在制作一个通过互联网将图像加载到 ListView 的应用程序。它建立在 sdk 15 上，最少 8 个。如果我在版本 8 的模拟器上运行它，一切正常，但如果我在任何 sdk 为 11 及以上的东西上运行它，应用程序无法在 ListView 中设置图像然后它只显示一个空列表。Logcat 对此没有提供任何信息。

我没有成功找到解决此问题的文章，但我认为它最可能是 HTTP 假设从互联网获取图像的东西，但我不明白为什么它们不适用于较新的安卓版本。

我的代码看起来像这样。

编辑更新代码：

```
public class MainActivity extends Activity {

static ArrayList<Tumblr> tumblrs;
ListView listView;
TextView footer;
int offset = 0;
ProgressDialog pDialog;
View v;
String responseBody;
HttpResponse r;
HttpEntity e;
String searchUrl;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);

    if (android.os.Build.VERSION.SDK_INT > 9) {
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
                .permitAll().build();
        StrictMode.setThreadPolicy(policy);
    }

    final ConnectivityManager conMgr = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    final NetworkInfo activeNetwork = conMgr.getActiveNetworkInfo();
    if (activeNetwork != null && activeNetwork.isConnected()) {

        setContentView(R.layout.main);

        try {
            tumblrs = getTumblrs();
            listView = (ListView) findViewById(R.id.list);
            View v = getLayoutInflater().inflate(R.layout.footer_layout,
                    null);
            footer = (TextView) v.findViewById(R.id.tvFoot);
            listView.addFooterView(v);
            listView.setAdapter(new UserItemAdapter(this, R.layout.listitem));

        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (JSONException e) {
            e.printStackTrace();
        }
        new GetChicks().execute();
        footer.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                new loadMoreListView().execute();
            }
        });

    } else {
        setContentView(R.layout.nonet);

    }

}

public class UserItemAdapter extends ArrayAdapter<Tumblr> {

    public UserItemAdapter(Context context, int imageViewResourceId) {
        super(context, imageViewResourceId, tumblrs);

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        v = convertView;
        if (v == null) {

            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.listitem, null);

        }

        Tumblr tumblr = tumblrs.get(position);
        if (tumblr != null) {

            ImageView image = (ImageView) v.findViewById(R.id.avatar);

            if (image != null) {
                image.setImageBitmap(GetImage_usingURl(urls[position]));

            }
        }

        return v;
    }
}

String[] urls = new String[] { "url1", "url2", "url2" };

public Bitmap GetImage_usingURl(String BitmapUrl) {
    try {
        Log.d("Image Download State", " Open Stream For : " + BitmapUrl);
        InputStream in = new java.net.URL(BitmapUrl).openStream();
        Log.d("Image Download State", " Start Decode");

        return BitmapFactory.decodeStream(in);

    } catch (Exception e) {
        Log.e("Error", "" + e.getMessage());
        return null;
    }
}

public ArrayList<Tumblr> getTumblrs() throws ClientProtocolException,
        IOException, JSONException {
    searchUrl = "http://api.tumblr.com/v2/blog/factsandchicks.com/posts?api_key=rTZsymOWtMudbb5tql2U20qQ5ooYLPYVNnL3COPpO2qBHDxJUu&limit=2&offset=0";

    ArrayList<Tumblr> tumblrs = new ArrayList<Tumblr>();
    return tumblrs;
}

private class GetChicks extends AsyncTask<Void, Void, Void> {

    @Override
    protected void onPreExecute() {
        // Showing progress dialog before sending http request
        pDialog = new ProgressDialog(MainActivity.this);
        pDialog.setMessage("Chicks coming up..");
        pDialog.setIndeterminate(true);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    @Override
    protected Void doInBackground(Void... unused) {
        // TODO Auto-generated method stub

        HttpParams params = new BasicHttpParams();
        params.setParameter(CoreProtocolPNames.PROTOCOL_VERSION,
                HttpVersion.HTTP_1_1);
        HttpClient client = new DefaultHttpClient(params);
        HttpGet get = new HttpGet(searchUrl);

        HttpResponse r = null;
        try {
            r = client.execute(get);
            int status = r.getStatusLine().getStatusCode();
            if (status == 200) {
                e = r.getEntity();
                responseBody = EntityUtils.toString(e);
            }
        } catch (ClientProtocolException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        JSONObject jsonObject;
        try {
            jsonObject = new JSONObject(responseBody);

            JSONArray posts = jsonObject.getJSONObject("response")
                    .getJSONArray("posts");

            for (int i = 0; i < posts.length(); i++) {
                JSONArray photos = posts.getJSONObject(i).getJSONArray(
                        "photos");
                for (int j = 0; j < photos.length(); j++) {
                    JSONObject photo = photos.getJSONObject(j);
                    String url = photo.getJSONArray("alt_sizes")
                            .getJSONObject(0).getString("url");

                    Tumblr tumblr = new Tumblr(url);
                    tumblrs.add(tumblr);

                }
            }

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    }

    protected void onPostExecute(Void unused) {
        // Setting new scroll position
        listView.setSelectionFromTop(0, 0);
        pDialog.dismiss();

    }

}

public class Tumblr {

    public String image_url;

    public Tumblr(String url) {

        this.image_url = url;

    }
}

private class loadMoreListView extends AsyncTask<Void, Void, Void> {

    @Override
    protected void onPreExecute() {
        // Showing progress dialog before sending http request
        pDialog = new ProgressDialog(MainActivity.this);
        pDialog.setMessage("More chicks coming up..");
        pDialog.setIndeterminate(true);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    @Override
    protected Void doInBackground(Void... unused) {
        // TODO Auto-generated method stub

        // increment current page
        offset += 2;

        // Next page request
        tumblrs.clear();
        String searchUrl = "http://api.tumblr.com/v2/blog/factsandchicks.com/posts?api_key=rTZsymOWtMudbb5tql2U20qQ5ooYLPYVNnL3COPpO2qBHDxJUu&limit=2&offset="
                + offset;
        HttpParams params = new BasicHttpParams();
        params.setParameter(CoreProtocolPNames.PROTOCOL_VERSION,
                HttpVersion.HTTP_1_1);
        HttpClient client = new DefaultHttpClient();
        HttpGet get = new HttpGet(searchUrl);

        HttpResponse r = null;
        try {
            r = client.execute(get);
            int status = r.getStatusLine().getStatusCode();
            if (status == 200) {
                HttpEntity e = r.getEntity();
                responseBody = EntityUtils.toString(e);
            }
        } catch (ClientProtocolException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        JSONObject jsonObject;
        try {
            jsonObject = new JSONObject(responseBody);

            JSONArray posts = jsonObject.getJSONObject("response")
                    .getJSONArray("posts");

            for (int i = 0; i < posts.length(); i++) {
                JSONArray photos = posts.getJSONObject(i).getJSONArray(
                        "photos");
                for (int j = 0; j < photos.length(); j++) {
                    JSONObject photo = photos.getJSONObject(j);
                    String url = photo.getJSONArray("alt_sizes")
                            .getJSONObject(0).getString("url");

                    Tumblr tumblr = new Tumblr(url);
                    tumblrs.add(tumblr);

                }
            }

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    }

    protected void onPostExecute(Void unused) {
        // Setting new scroll position
        listView.setSelectionFromTop(0, 0);
        pDialog.dismiss();

    }

}

@Override
public boolean onCreateOptionsMenu(android.view.Menu menu) {
    // TODO Auto-generated method stub
    super.onCreateOptionsMenu(menu);
    MenuInflater blowUp = getMenuInflater();
    blowUp.inflate(R.menu.cool_menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    switch (item.getItemId()) {
    case R.id.aboutUs:
        Intent i = new Intent("com.example.example.ABOUT");
        startActivity(i);

        break;
    case R.id.refresh:
        Intent f = new Intent(MainActivity.this, MainActivity.class);
        startActivity(f);
        finish();
        break;
    case R.id.exit:
        finish();
        break;
    }
    return false;
}

 } 
```

日志

```
 10-09 13:21:57.923: D/Image Download State(888):  Open Stream For : url1
 10-09 13:21:57.923: E/Error(888): Protocol not found: url1
 10-09 13:21:58.013: D/Image Download State(888):  Open Stream For : url2
 10-09 13:21:58.033: E/Error(888): Protocol not found: url2
 10-09 13:21:58.113: D/Image Download State(888):  Open Stream For : url1
 10-09 13:21:58.123: E/Error(888): Protocol not found: url1
 10-09 13:21:58.153: D/Image Download State(888):  Open Stream For : url2
 10-09 13:21:58.153: E/Error(888): Protocol not found: url2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:46:42.123

对于来自互联网的图像试试这个可以帮助你：

如果您想在创建适配器时下载。

```
String[] urls=new String[]{"url1","url2","url2"}

public Bitmap GetImage_usingURl(String url){
  try {
                Log.d("Image Download State", " Open Stream For : "
                        + url);
                InputStream in = new java.net.URL(url).openStream();
                Log.d("Image Download State", " Start Decode");

               return BitmapFactory.decodeStream(in);

                 } catch (Exception e) {
                Log.e("Error", e.getMessage());
                 return null;
                e.printStackTrace();
            }
} 
```

当您创建 Adapet 时，只需使用：

```
image.setImageBitmap(GetImage_usingURl(urls[position]); 
```

* * *

**对您的项目来说重要**的事情当您使用 HTTP 时，您必须获取政策，它仅适用于 API 9 或更高版本，因此我首先检查 VERSION.SDK_INT。

```
if (android.os.Build.VERSION.SDK_INT > 9) {
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
                .permitAll().build();
        StrictMode.setThreadPolicy(policy);
    } 
```

如果您不设置**StrictMode**，您的程序可能会崩溃。

## 在一切之前设置此代码。

您的错误：在 getView 中您尝试检查**img!=null**但您现在忘记了它的创建并且它已经为空，因此编译器永远不会进入并设置您的图像，这是第一件事。

# mysql - MySQL 自动更新日期字段

> ID：12785764
> 
> 赞同：1
> 
> 时间：2012-10-08T16:36:04.027
> 
> 标签：mysql, jdbc, prepared-statement

我正在开发一个摇摆应用程序，在测试期间我遇到了一些更新数据的问题。

我有一张名为“剂量”的表格：

```
create table Dose (id_dose int auto_increment primary key ,
        id_cmd varchar(50),
        t_inj TimeStamp,
        a_inj int,
        id_e_d int,
        id_dose_inc varchar(50),
        poid int ,
        Constraint fkk_et_doses foreign key (id_e_d) references Etat_dose (id_e_d),
        Constraint fkk_et_cmds foreign key (id_cmd) references Commande (id_cmd)ON DELETE CASCADE); 
```

**id_e_d**字段对**etat_dose**表中的id_e_d 的引用：

```
create table Etat_dose (id_e_d int primary key,
                    libele varchar(50)); 
```

当我将数据插入其中时，一切正常，为此我使用查询：

```
Methodes.UpdateData("insert into Dose(id_cmd,t_inj,a_inj,id_e_d,id_dose_inc,poid)  values (?,?,?,?,?,?)", dose, 6); 
```

但是当我更新**id_e_d**时，剂量表中的**T_inj**会自动更改为系统日期。例如 ：

在我插入之前：

```
insert into doses values(1,'CMFDG121031-1',' 2012-10-02 10:30:55',400,1,'CMFDG121031-1-1',30) 
```

当我编辑它时，我得到：

```
mysql> select * from dose where id_dose=1;
    +---------+---------------+---------------------+-------+--------+-----------------+------+
    | id_dose | id_cmd        | t_inj               | a_inj | id_e_d | id_dose_inc      | poid 
    +---------+---------------+---------------------+-------+--------+-----------------+------+
    |       1 | CMFDG121031-1 | 2012-10-02 10:30:55 |   400 |      1 | CMFDG121031-1-1 |   30 |
    +---------+---------------+---------------------+-------+--------+------------------------- 
```

在我执行的更新中：

```
update dose set id_e_d=2 where id_dose=1 
```

我得到：

```
 mysql> select * from dose where id_dose=1;
    +---------+---------------+---------------------+-------+--------+-----------------+------+
    | id_dose | id_cmd        | t_inj               | a_inj | id_e_d | id_dose_inc      | poid 
    +---------+---------------+---------------------+-------+--------+-----------------+------+
    |       1 | CMFDG121031-1 | 2012-10-08 16:15:11 |   400 |      2 | CMFDG121031-1-1 |   30 |
    +---------+---------------+---------------------+-------+--------+------------------------- 
```

如您所见，**T_inj**的值已自动更改。我能做些什么来追踪这个错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T16:41:54.003

如[自动初始化和更新中所述`TIMESTAMP`](http://dev.mysql.com/doc/en/timestamp-initialization.html)：

> 数据类型提供自动初始化和更新到当前`TIMESTAMP`日期和时间（即当前时间戳）。您可以选择是否使用这些属性以及应该在哪一列中使用它们：
> 
> `[ deletia ]`
> 
> *   如果该列是自动更新的，则当该行中任何其他列的值从其当前值更改时，它会自动更新为当前时间戳。如果所有其他列都设置为其当前值，则该列保持不变。为了防止该列在其他列更改时更新，请将其显式设置为其当前值。要在其他列未更改的情况下更新该列，请将其显式设置为应具有的值（例如，将其设置为`CURRENT_TIMESTAMP`）。
> 
> `[ deletia ]`
> 
> 以下规则描述了使用当前时间戳为默认值和自动更新值定义表中的第一个 TIMESTAMP 列的可能性，对于一个但不是另一个，或者两者都不是：
> 
> `[ deletia ]`
> 
> *   如果有`DEFAULT`子句但没有`ON UPDATE CURRENT_TIMESTAMP`子句，则该列具有给定的默认值，并且不会自动更新为当前时间戳。
>     
>     
>     
>     默认值取决于`DEFAULT`子句是指定`CURRENT_TIMESTAMP`还是常量值。使用`CURRENT_TIMESTAMP`时，默认为当前时间戳。
>     
>     
>     
>     ```
>     创建表 t1 (
>       ts TIMESTAMP 默认 CURRENT_TIMESTAMP
>     );
>     ```
>     
>     
>     
>     对于常量，默认值是给定值。在这种情况下，该列根本没有自动属性。
>     
>     
>     
>     ```
>     创建表 t1 (
>       ts 时间戳默认 0
>     );
>     ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:42:19.813

这是表格第一`timestamp`列的默认行为。请参阅 MySQL 文档：[TIMESTAMP 的自动初始化和更新](http://dev.mysql.com/doc/refman/5.5/en/timestamp-initialization.html)

你可以改变它：

```
ALTER TABLE Dose 
  MODIFY COLUMN t_inj TIMESTAMP NULL
           DEFAULT CURRENT_TIMESTAMP ; 
```

或者：

```
ALTER TABLE Dose 
  MODIFY COLUMN t_inj TIMESTAMP NULL
           DEFAULT NULL ; 
```

# javascript - 如何检查正确加载的 facebook sdk

> ID：12785770
> 
> 赞同：2
> 
> 时间：2012-10-08T16:36:26.533
> 
> 标签：javascript, facebook, facebook-likebox

我有一个与 facebook like-box 集成的网站，它运行良好（请检查下面的代码）

## 正文后的脚本

```
<body>
<div id="fb-root"></div>
<script type="text/javascript">
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script> 
```

## 侧边栏内

```
<div class="fb-like-box" data-href="http://www.facebook.com/javatips.net" data-width="304" data-show-faces="true" data-stream="false" data-header="false"></div> 
```

问题是启用了某些网络代理，这将阻止 facebook like-box 并显示“找不到页面”消息。为了删除此消息，我需要检查是否正确加载了like-box（Facebook SDK），仅当正确加载like-box（Facebook SDK）时才应显示fb-like-box div任何想法将不胜感激.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:44:45.767

通过样式表隐藏带有类`.fb-like-box`的元素，并在 SDK 触发的 fbAsyncInit 事件中再次显示它们。

# html - 如何使用

> ID：12785773
> 
> 赞同：-1
> 
> 时间：2012-10-08T16:36:33.213
> 
> 标签：html, css

我试过这个：

代码：

```
<div class="center">
    <div class="mainmenuoption">Home</div>
    <div class="mainmenuoption">About Us</div>
    <div class="mainmenuoption">Experiences</div>
    <div class="mainmenuoption">Get Involved</div>
    <div class="mainmenuoption">Support Us</div>
    <div class="mainmenuoption">Contact Us</div>
</div> 
```

CSS：

```
div.center
{
    display: block;   
    margin-left: auto;   
    margin-right: auto;
}

div.mainmenuoption
{
    float: left;
    font: normal normal bold 100% "Trebuchet MS", "Lucida Sans Unicode", "Lucida Grande", "Lucida Sans", Arial, sans-serif;
    width: 100px;
    color: #FFFF00;
    text-align: center;
    vertical-align: middle;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:38:50.703

将内部`div`s 设置为`display: inline-block`，将外部 div 设置为`text-align: center`，它应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:41:34.237

给`display: inline-block;`inner `div`s 和 a`text-align: center;`给 parent `div`。

```
<div class="center">
    <div class="mainmenuoption">Home</div>
    <div class="mainmenuoption">About Us</div>
    <div class="mainmenuoption">Experiences</div>
    <div class="mainmenuoption">Get Involved</div>
    <div class="mainmenuoption">Support Us</div>
    <div class="mainmenuoption">Contact Us</div>
</div> 
```

### CSS：

```
div.center
{
    text-align: center;
}

div.mainmenuoption
{
    font: normal normal bold 100% "Trebuchet MS", "Lucida Sans Unicode", "Lucida Grande", "Lucida Sans", Arial, sans-serif;
    width: 100px;
    color: #FFFF00;
    text-align: center;
    vertical-align: middle;
    display: inline-block;
} 
```

### 演示：http: [//jsfiddle.net/8Y8YW/](http://jsfiddle.net/8Y8YW/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T16:41:39.533

如果您想**将菜单**（类`.center`）居中，则可以使用

```
.center 
{
     width:600px;   // what ever width you want
     margin: auto 0;
} 
```

或者您想**将菜单项**使用居中`text-align: center`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T16:42:25.220

如果您在 div.center 中设置宽度，它应该可以工作！我在以下位置发布了一个示例：http: [//jsfiddle.net/EFXXs/2/](http://jsfiddle.net/EFXXs/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T16:42:32.427

除非您在您的设备上设置明确的宽度，`div`否则它将扩展以占用可用宽度。既然你似乎知道你想要它有多宽，这将起作用：

```
div.center {
    width: 600px;
    margin: 0 auto;
} 
```

如果`div`可能是可变宽度，请`display: inline-block`按照宇智波斑的建议使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T16:38:27.263

为您的声明添加宽度`div.center`或添加`text-align: center`到您的`div.center`声明中。

# java - 在使用 playframework 2 应用程序时，我应该将所有视图对象放在包模型中吗？

> ID：12785776
> 
> 赞同：1
> 
> 时间：2012-10-08T16:36:46.320
> 
> 标签：java, playframework-2.0

我正在使用 playframework2 应用程序进行一些测试，我注意到如果我不将我的对象放在模型文件夹中，我将不允许在我的视图中使用它们。

例如，假设我将一个类 SimpleObject 放在一个简单的包名中。

**简单对象类：**

```
public class SimpleObject {

    public SimpleObject(){}

    public SimpleObject(String name){
        this.name = name;
    }

    private String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

} 
```

在我的**应用程序**控制器中，我使用新的 SimpleObject 渲染视图：

```
public static Result doSomeAction() {
    SimpleObject simpleObject = new SimpleObject("test");       
    return ok(test.render(simpleObject));
} 
```

在我的**test.scala.html 中**：

```
@(simpleObject: SimpleObject)
@main("Here is the result:") {
    @{simpleObject.getName()}
} 
```

这会导致错误：

```
not found: type SimpleObject 
```

如果我将 SimpleObject 移动到包模型中，它会编译并工作。

在我的另一个应用程序中，我实现了 Elasticsearch 模块。在那里我收到一个我想在我的视图中循环的 IndexResult。我得到与 SimpleObject 相同的错误。

所以我在这里的问题有点建筑学。处理这个问题的“play 2 way”是什么？我应该实现视图对象和构建器，将 IndexResult 对象放入并创建视图对象吗？或者有没有办法告诉我的应用程序也扫描其他包？或许还有别的思路？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T16:41:01.030

您可以尝试在视图中使用导入，即：

```
@import simple._ 
```

或者您可以尝试在模型的子文件夹/包中组织您的模型/类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:40:35.933

正如**乔丹**所写`import`的那样，如果它不在`controllers`, `models`, 中`views`（默认情况下是导入的），则您必须将其放入您的包中...

其他可能性是在声明中指定确切的包：

```
@(simpleObject: my.own.package.which.isnt.in.models.or.controllers.SimpleObject)
@main("Here is the result:") {
    @{simpleObject.getName()}
} 
```

# wiki - Wiki 外部链接的克里奥尔语语法

> ID：12785777
> 
> 赞同：1
> 
> 时间：2012-10-08T16:36:49.107
> 
> 标签：wiki, creole

想知道是否有任何克里奥尔语法可以在新窗口上显示外部链接。

链接的基本语法：
**HTML**
`<a href="http://www.wikicreole.org/">http://www.wikicreole.org/</a>`

**克里奥尔语**
`[[http://www.wikicreole.org/]]`

**那这个呢？**
**HTML**
`<a href="link" target="_blank">link</a>`
**CREOLE**
???

注意：有**target=_blank**。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:18:56.460

[WikiCreole 备忘单](http://wikicreole.org/wiki/Home)指出`[[URL|description]]`，但我在 GitHub wiki（使用 Creole 语言）上使用它：`[[This is an example|http://example.com]]`

# php - 我最新的 wordpress 帖子没有出现在我选择的类别中

> ID：12785778
> 
> 赞同：1
> 
> 时间：2012-10-08T16:36:50.267
> 
> 标签：php, wordpress, post, article

我已经在测试 url 上发布了一个网站，除了我设置显示某个类别的帖子但最近的帖子没有出现的一个页面之外，一切正常，如果我在该类别下发布另一篇文章，它会推倒数第二个一个在页面上，但仍然没有显示我最近发布的一个..请帮助..

[http://www.scriptposter.com/new/category/gallery/](http://www.scriptposter.com/new/category/gallery/)

它在主页上拉它虽然很好，

主页 [http://www.scriptposter.com/new/](http://www.scriptposter.com/new/)

这是我正在使用的代码：

```
<?php while ( have_posts() ) : the_post() ?>
<div class="secondColumn">
<div class="blogFeatureWorkImage">"><?php the_post_thumbnail('small-thumb'); ?></div>
</div>
<div class="thirdColumn2">
<div class="blogFeatureWorkContent">
<h1 class="articleTitle"><span class="yellow">"><?php the_title();?></span></h1>
<p><?php the_content();?></p>
</div>
</div>
<div class="clear"></div>
<?php endwhile; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T03:44:36.730

假设您提供的代码来自图库类别页面，这可能是查询帖子方式的问题。默认情况下，它应该按照您的方式工作，但您可以尝试在图库页面上硬编码一个新查询，[如下所示](http://codex.wordpress.org/Function_Reference/query_posts#All_Posts_in_a_Category)。

尝试将其直接放在`while`语句之前以进行故障排除：

```
<?php 
query_posts( array ( 'category_name' => 'gallery', 'posts_per_page' => -1 ) ); 
?> 
```

# c# - SQLite：插入身份列

> ID：12785780
> 
> 赞同：2
> 
> 时间：2012-10-08T16:36:53.257
> 
> 标签：c#, sql, sqlite

我是 SQLite 新手，我正在尝试运行以下代码：

```
using (var cn = new SQLiteConnection("Data Source=:memory:;Version=3;")) {
    cn.Open();

    var cmd = cn.CreateCommand();
    cmd.CommandText = "CREATE TABLE [ContentItems] ([Id] [int] IDENTITY(1,1) NOT NULL, [Title] [nvarchar](100) NOT NULL, CONSTRAINT [PK_ContentItems] PRIMARY KEY ([Id]))";
    cmd.ExecuteNonQuery();

    var cmd2 = cn.CreateCommand();
    cmd2.CommandText = "INSERT INTO [ContentItems] (Title) VALUES ('Test 1')";
    cmd2.ExecuteNonQuery();
} 
```

但这给出了错误：

> 由于违反约束而中止 ContentItems.Id 可能不为 NULL

我浏览了文档，但根据我过去的 SQL 经验，我看不出为什么这不起作用。我会很感激帮助。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T16:45:37.257

SQLite 使用 AUTOINCREMENT 关键字创建您认为的 IDENTITY 列。在您的示例中，ID 列不是使用 AUTOINCREMENT 创建的，并且由于它被声明为 NOT NULL，因此您必须提供一个值。

您所追求的 CREATE 语句是：

```
 CREATE TABLE [ContentItems] (
    [Id] INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 
    [Title] TEXT NOT NULL, 
    CONSTRAINT [PK_ContentItems] PRIMARY KEY ([Id])
 ) 
```

请注意，SQLite 使用 TEXT 数据类型（尽管它将包含“CHAR”的任何内容映射到该数据类型）并且不需要或不遵守最大字段长度。

# c# - c# 中的 .AddNew vba 等效项

> ID：12785791
> 
> 赞同：0
> 
> 时间：2012-10-08T16:37:39.590
> 
> 标签：c#, sql, ms-access, vba

**AddNew 函数 VBA 是否类似于 Insert into 子句 c#？**

**VBA**

```
Set RsTrt = New ADODB.Recordset
RsTrt.Open "Select  * from TblSysRecordTrt ORDER BY trtName,Trtdate DESC", aaDbConnect(), adOpenStatic, adLockOptimistic
      Function AddTrt(StrName As String, strdesc As String, DtTrt As Date, StrUser As String) As Boolean
    On Error GoTo ErrAdd
    With RsTrt
        .AddNew
            .Fields("trtName") = StrName
            .Fields("trtDesc") = strdesc
            .Fields("TrtDate") = DtTrt
            .Fields("TrtUser") = aaUser()

        .Update
    End With
        AddTrt = True
    FinAdd:
        Exit Function
    ErrAdd:

        AddTrt = False
        Resume FinAdd
    End Function 
```

**C＃**

```
public static bool AddTrt(string StrName, string strdesc,DateTime DtTrt , string StrUser)
    {

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:59:11.437

它是“相似的”，因为最终结果是相同的。它记录在这里：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms677536 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms677536(v=vs.85).aspx)

当使用`AddNew`可更新`RecordSet`然后调用`Update`会导致 ADODB 对象将 INSERT 命令发送回服务器 - 所以它只是在代码中抽象出原始 SQL 语句的一种方式。

在 C#/.NET 中也有类似的方法，但`ADODB.RecordSet`该类已过时 - 最接近的类比是`System.Data.DataTable`and `DataSet`，最新的智慧是使用实体框架而不是弱类型`DataTable`类。

# jquery - 通过 Jquery Form Validator 单击提交后如何重定向页面

> ID：12785794
> 
> 赞同：2
> 
> 时间：2012-10-08T16:37:46.023
> 
> 标签：jquery, forms, validation, redirect, submit

我正在使用[Jquery Form Validator](http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/)来验证我的网站的注册表单，虽然它确实验证成功，但它会在我单击提交时刷新页面，而不是直接重定向到另一个页面。这是我所拥有的：

```
<script>    
    $(document).ready(function() {

        $("#formID").validationEngine({
            submitHandler: function(form){
            window.location="report.html"
            }

    });

        function validate2fields(){
        if($("#addressl1").val() =="" ||  $("#addressl2").val() == ""){
            return false;
        }else{
            return true;
        }
    } 
    });

    </script> 
```

我正在使用一个简单的“提交”按钮，我尝试将链接添加到按钮中，但这根本不起作用。这里是：

```
<input type="submit" value="Submit" id="submit"> 
```

我是这方面的初学者，所以如果我使用了错误的术语，我深表歉意。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:46:36.023

使用`window.location.replace("url")`代替`window.location="report.html".`

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-20T07:27:03.240

如果要使用 window.location.replace("report.html") 或 window.location="report.html"，首先将按钮类型更改为 'button' 即，

```
<input type="button" value="Submit" id="submit"> 
```

对于提交按钮，“window.location”将不起作用。

否则使用此方法

```
$("#form").attr("action","report.html");
$("#form").attr("method", "post");
$("#form").submit(); 
```

在这种方法中，按钮类型也应该是“按钮”，而不是“提交”。

# magento - Magento 新产品小部件图像调整大小

> ID：12785797
> 
> 赞同：0
> 
> 时间：2012-10-08T16:38:12.400
> 
> 标签：magento, widget, grid, product

我正在使用自定义模板运行 magento。过去一周我一直在尝试将新产品小部件（无论是网格还是列表）的图像尺寸放大为 232 像素宽和 280 像素长。我已经成功地在 app/design/frontend/base/default/template/catalog/product/widget/new/content 找到了 new_grid.phtml 和 new_list.phtml 文件。我还将图像尺寸从我认为的 85 像素宽度和 85 像素长度更改为我想要的 232 像素宽度 x 280 像素长度。而不是放大图像的框架和图像本身，图像似乎被放大了，但框架在 85px 85px 处保持不变。因此，您只能在 85 x 85 像素的图像框架内看到图像的一小部分。我所说的小部件是您可以从 CMS 页面插入的新产品小部件。我正在运行 magento 社区版 1.7

这是 new_grid.phtml 的代码片段。任何帮助表示赞赏。谢谢

```
<div class="widget-products">
<?php $_columnCount = $this->getColumnCount(); ?>
    <?php $i=0; foreach ($_products->getItems() as $_product): ?>
    <?php if ($i++%$_columnCount==0): ?>
    <ul class="products-grid">
    <?php endif ?>
        <li class="item<?php if(($i-1)%$_columnCount==0): ?> first<?php elseif($i%$_columnCount==0): ?> last<?php endif; ?>">
            <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($_product->getName(), null, true) ?>" class="product-image"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(232,280) ?>" width="232" height="280" alt="<?php echo $this->stripTags($_product->getName(), null, true) ?>" /></a>
            <h3 class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($_product->getName(), null, true) ?>)"><?php echo $this->helper('catalog/output')->productAttribute($_product, $_product->getName() , 'name') ?></a></h3>
            <?php echo $this->getReviewsSummaryHtml($_product, 'short') ?>
            <?php echo $this->getPriceHtml($_product, true, '-widget-new-grid') ?>
            <div class="actions">
                <?php if ($_product->isSaleable()): ?>
                    <button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button>
                <?php else: ?>
                    <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
                <?php endif; ?>
                <ul class="add-to-links">
                    <?php if ($this->helper('wishlist')->isAllow()) : ?>
                        <li><a href="<?php echo $this->getAddToWishlistUrl($_product) ?>" class="link-wishlist"><?php echo $this->__('Add to Wishlist') ?></a></li>
                    <?php endif; ?>
                    <?php if($_compareUrl=$this->getAddToCompareUrl($_product)): ?>
                        <li><span class="separator">|</span> <a href="<?php echo $_compareUrl ?>" class="link-compare"><?php echo $this->__('Add to Compare') ?></a></li>
                    <?php endif; ?>
                </ul>
            </div>
        </li>
    <?php if ($i%$_columnCount==0 || $i==count($_products)): ?>
    </ul>
    <?php endif ?>
    <?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-03T18:24:43.260

对于像我一样遇到这种情况的任何人...

通过更改 new.phtml 中的网格列表更正了我的问题：

```
<ul class="products-grid"> 
```

至：

```
<ul class="products-grid products-grid--max-<?php echo $_columnCount; ?>-col"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:52:31.190

这几乎可以肯定是一个 CSS 问题。

您似乎在这里正确调整了图像的大小：

```
<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(232,280) ?> 
```

为确保您的新模板在布局中得到处理，您可以在系统/配置/开发人员选项卡中启用模板提示。

假设你做对了，它很可能会在 css 中重置为 85px。

来自**widgets.css**

```
.widget-new-products .products-grid .product-image,
.widget-new-products .products-list .product-image { width:85px; height:85px; } 
```

我强烈建议您在您最喜欢的浏览器的检查工具中四处寻找，以确定究竟是什么规则覆盖了您的服务器端更改。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-11T07:10:01.557

您可以使用 CSS For Image 将高度和宽度设置为您想要的值，无需更新模板，例如

```
<Your Image class/id>{
width:50%;
max-width:100%;
} 
```

2）或者你可以使用js作为

```
jQuery("document").ready(function() {
    jQuery(".product-image img").attr({ width: "100%", height: "auto" });
}); 
```

# c - openGL 3.1 中的三角形，但 3.2 中没有

> ID：12785801
> 
> 赞同：1
> 
> 时间：2012-10-08T16:38:32.790
> 
> 标签：c, opengl, opengl-3

任何人都知道为什么这段代码在 openGL 3.1 中显示一个三角形而在 3.2 中没有？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <GL/glew.h>
#include <GL/glfw.h>

GLuint myVBO;

void onDraw() {
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );
    glEnableVertexAttribArray(0);
    glBindBuffer(GL_ARRAY_BUFFER, myVBO);
    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, (void*)0);
    glDrawArrays(GL_TRIANGLES, 0, 3);
    glDisableVertexAttribArray(0);
    glfwSwapBuffers();
}

void loadData() {
    static const GLfloat g_vertex_buffer_data[] = {
       -1.0f, -1.0f, 0.0f,
       1.0f, -1.0f, 0.0f,
       0.0f,  1.0f, 0.0f,
    };
    glGenBuffers(1, &myVBO);
    glBindBuffer(GL_ARRAY_BUFFER, myVBO);
    glBufferData(GL_ARRAY_BUFFER, sizeof(g_vertex_buffer_data), g_vertex_buffer_data, GL_STATIC_DRAW);
}

void createWindow() {
    int w=800,h=600;
    if(glfwInit() != GL_TRUE){
        return;
    }
    glfwOpenWindowHint(GLFW_FSAA_SAMPLES, 4);
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MAJOR, 3);
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MINOR, 2); //change to 1 to see the triangle
    //glfwOpenWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);

    if(!glfwOpenWindow(w,h,5,6,5,0,8,0,GLFW_WINDOW)){
        glfwTerminate();
        return;
    }
    if(glewInit() != GLEW_OK){
        return;
    }
    printf("Version: %s\n", glGetString(GL_VERSION));
    printf("Error: %d\n", glGetError());
}
int main() {
    createWindow();
    loadData();
    while(1){onDraw();}
    return 0;
} 
```

基于[http://www.opengl-tutorial.org/](http://www.opengl-tutorial.org/)上的前 2 个教程 我的输出是

```
Version: 3.2.0 NVIDIA 295.49
Error: 1280 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:11:55.910

尝试专门询问兼容性配置文件：

```
glfwOpenWindowHint( GLFW_OPENGL_PROFILE, GLFW_OPENGL_COMPAT_PROFILE ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:25:51.850

您必须提供完整的着色器工作集，即至少一个顶点着色器和一个片段着色器。

# c# - 如何插入 Windows Phone 页面以透视项目？

> ID：12785810
> 
> 赞同：0
> 
> 时间：2012-10-08T16:39:02.617
> 
> 标签：c#, windows-phone-7, xaml, user-controls

我的控制有问题`Pivot`。如何将带有内容的 xaml 页面插入到`Pivot`项目中？甚至可能吗？

当我将所有内容存储在一个文件中时，很难控制我自己的应用程序布局。

我想要这样的东西：

*   主页上应该是带有项目的枢轴控件。
*   这些项目的内容应该在单独的 xaml 文件中（页面之间没有依赖关系）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:14:17.173

将正确的命名空间添加到页面：

```
xmlns:view="clr-namespace:YourApp.Controls" 
```

并在枢轴：

```
<Pivot>
   <PivotItem Name="first">
     <view:FirstUserControl DataContext="{Binding YourViewModel}"/>
   </PivotItem>
</Pivot> 
```

在视图命名空间中，您需要创建一个[User Control](http://www.codeproject.com/Articles/32825/How-to-Creating-a-WPF-User-Control-using-it-in-a-W)。该链接是关于 WPF 但在 WP7 中有相同的系统。

此外，您可以从 PivotItem创建[自定义控件。](http://www.windowsphonegeek.com/articles/Creating-a-WP7-Custom-Control-in-7-Steps)

# php - 从ajax返回的ResponseText不等于php文本

> ID：12785811
> 
> 赞同：0
> 
> 时间：2012-10-08T16:39:11.230
> 
> 标签：php, javascript, ajax, logic, responsetext

继承人的问题。我有一个 ajax 函数，它只是检查用户输入的电子邮件是否已被使用。

它使用的 php 脚本根据结果发送回“true”或“false”字符串。当我得到响应文本或下面函数中的“数据”变量时，看看它的 == 是否为“真”，它永远不会通过并且总是评估为假。

> 这很奇怪，因为当我在屏幕上打印出数据变量时，它应该显示为“true”，但在 if 语句中它只是不显示为等于“true”。不知道这里发生了什么。

阿贾克斯功能：

```
function check_email() {
  var email = document.sign_up_form.email_first.value;
  document.getElementById("email1").innerHTML = ' <img src="loading.gif" width="15">';
 $.ajax({
        type: "GET",
        url: "java_check_email.php",
        data: "email="+email,
        success: function(data){
              if(data == "true"){
              document.getElementById("email1").innerHTML = ' <img src="check.png" width="15">';
              document.getElementById("email4").innerHTML = '';  
              }
              else {
              document.getElementById("email1").innerHTML = ' <img src="xmark.png" width="15">';
              document.getElementById("email4").innerHTML = 'Email is already in use<br>';    
              }
     }
}); 
```

}

更新：

PHP 脚本看起来像这样

```
 <?php
include('functions.php');

$email = $_GET['email'];

$query_check = "removed for obvious reasons...";

$result_check = mysql_query($query_check);

if(mysql_num_rows($result_check) == 0){
echo 'true';
}
else{
echo 'false';
}

?> 
```

此外，在收到 ajax 响应时调用 console.log(data) 后，我在 js 控制台中得到了“true”值.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:04:38.393

对于调试，请尝试

```
if (data.replace(/\s+/g, '') == "true") { 
```

`<?php ?>`...我的钱在标签外的空白处。请注意，如果这解决了问题，则不应考虑解决方案 - 真正的解决方案是从 PHP 脚本中删除额外的空格。

`<`开始标签的应该`<?php`是文件中的第一个字符。例如：

```
          这个空行会直接输出
    <?php
^^^^ 这个空格会直接输出

```

另请注意，结束`?>`标记通常是不必要的（在这种情况下似乎是这样），完全省略它可以帮助避免此类问题。

如果你想向 JS 返回一个布尔值，你应该简单地回显`1`或`0`，所以你可以在接收的 Javascript 中这样做：

```
if (data) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-30T10:05:10.027

我知道这很旧，但我遇到了完全相同的问题，无法解决。我很确定这不是空白问题，但我能够以不同的方式解决它。也许这不是最好的方式（我仍然想知道为什么它不能以通常的方式工作），但我所做的是回显一个 0（代表错误）和一个 1（代表正确）

然后我将数据解析为一个整数，所以我的代码如下所示：

```
function(data){
        var result = parseInt(data);
        if (result === 1){
             $('#loginresult').html('OK');
        } else {
            $('#loginresult').html('NOT OK');
        } 
```

我希望我可以帮助任何人解决这个问题（但一个好的解决方案会更好）

# silverlight - Silverlight 5 Toolkit XNA 示例似乎不起作用

> ID：12785812
> 
> 赞同：0
> 
> 时间：2012-10-08T16:39:12.560
> 
> 标签：silverlight, xna, toolkit

我正在尝试在 Silverlight 5 工具包包上运行 XNA 示例。该示例打开浏览器，其中包含 HTML 文件夹内容，而不是 Xap 本身。单击 HTML 也不会打开 XAP。我必须通过手动将其添加到 .contentproj 文件来解决示例中的编译问题。

```
<PlatformTarget Condition=" '$(PlatformTarget)' == '' ">x86</PlatformTarget> 
```

我的问题是，我的配置有问题吗？我应该怎么做才能确保我没有部署问题？有没有人遇到过这个问题？

更新：我将默认浏览器设置为 IE，我得到 GraphicsDevice = null 因为这个原因 RenderModeReason = GPUAccelerationDisabled 我启用了它，并进入 silverlight 配置以允许驱动程序加速，我得到 SecurityBlocked

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:49:00.267

我必须启用 ElevatedTrust 并仅在 OOB 上运行它并且它有效。但是如果我不能在浏览器中运行它似乎毫无意义。

# java - 关于 Eclipse 的插件来表示 Eclipse 中其他表上的表引用

> ID：12785816
> 
> 赞同：0
> 
> 时间：2012-10-08T16:39:23.880
> 
> 标签：java, database, eclipse, db2

我正在开发一个 java 项目，它在 db2 中有它的数据库，我通过一个公共 ip 连接到数据库，我使用 eclipse 本身的数据库视图透视图，并在 eclipse 数据库资源管理器本身中查看表条目，但我正在寻找一个eclipse 中的插件，这样当我单击特定表时，将以图形形式显示它引用表的屏幕截图，该屏幕截图也显示它在其他表中的引用..!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:04:56.907

您可以使用 IBM Data Studio，它是一个基于 Eclipse 的应用程序，带有许多插件，包括您想要的插件。[您可以从http://www-01.ibm.com/software/data/db2/express/download.html](http://www-01.ibm.com/software/data/db2/express/download.html)免费下载它（获取免费工具 > Data Studio 完整客户端）这是一个非常好的使用 DB2 的工具来自 Eclipse。

# asp.net - ASP.Net 页面无法在 IIS 8 上加载

> ID：12785817
> 
> 赞同：0
> 
> 时间：2012-10-08T16:39:34.270
> 
> 标签：asp.net, iis-8, windows-server-2012

我正在 Windows Server 2012 上进行应用程序测试，以检查我们的 Web 应用程序（在 .Net 4 中）的兼容性，并且在加载任何 ASPX 页面时遇到问题。我曾多次尝试从服务器管理器中卸载并重新安装所有 .Net、IIS 和 ASP.Net 角色。我还发现它`aspnet_regiis`不再适用于 Server 2012，它只是给出了使用角色/功能页面的消息。我很茫然，还有其他人尝试过 IIS 8 吗？

我收到以下消息：

```
HTTP Error 404.3 - Not Found

The page you are requesting cannot be served because of the extension configuration. If the page is a script, add a handler. If the file should be downloaded, add a MIME map.

Most likely causes:
•It is possible that a handler mapping is missing. By default, the static file handler processes all content.
•The feature you are trying to use may not be installed.
•The appropriate MIME map is not enabled for the Web site or application. (Warning: Do not create a MIME map for content that users should not download, such as .ASPX pages or .config files.)
•If ASP.NET is not installed.

Things you can try:
•In system.webServer/handlers: ◦Ensure that the expected handler for the current page is mapped.
    ◦Pay extra attention to preconditions (for example, runtimeVersion, pipelineMode, bitness) and compare them to the settings for your application pool.
    ◦Pay extra attention to typographical errors in the expected handler line.

•Please verify that the feature you are trying to use is installed.
• Verify that the MIME map is enabled or add the MIME map for the Web site using the command-line tool appcmd.exe. 
    1.To set a MIME type, use the following syntax: %SystemRoot%\windows\system32\inetsrv\appcmd set config /section:staticContent /+[fileExtension='string',mimeType='string']
    2.The variable fileExtension string is the file name extension and the variable mimeType string is the file type description.
    3.For example, to add a MIME map for a file which has the extension ".xyz": appcmd set config /section:staticContent /+[fileExtension='.xyz',mimeType='text/plain']
    Warning: Ensure that this MIME mapping is needed for your Web server before adding it to the list. Configuration files such as .CONFIG or dynamic scripting pages such as .ASP or .ASPX, should not be downloaded directly and should always be processed through a handler. Other files such as database files or those used to store configuration, like .XML or .MDF, are sometimes used to store configuration information. Determine if clients can download these file types before enabling them. 
 •Install ASP.NET.
 •Create a tracing rule to track failed requests for this HTTP status code. For more information about creating a tracing rule for failed requests, click here. 

 Detailed Error Information:

 Module
    StaticFileModule 

 Notification
    ExecuteRequestHandler 

 Handler
    StaticFile 

 Error Code
    0x80070032 

 Requested URL
    http://localhost:80/login.aspx 

 Physical Path
    C:\Inetpub\WEBSITE\login.aspx 

 Logon Method
    Anonymous 

 Logon User
    Anonymous 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:29:54.320

好吧，在过去几天解决了这个问题之后，我将 VM 重置为我在完成操作系统安装后立即拍摄的基本快照。我按照我在第一次运行中记录的完全相同的步骤安装 IIS 和应用程序开发功能，然后安装了我的应用程序，现在它可以工作了。我不知道它为什么或如何在以前没有的地方工作，但至少它现在正在工作。

# ruby-on-rails - Rails，将对象传递给邮件程序

> ID：12785819
> 
> 赞同：5
> 
> 时间：2012-10-08T16:39:46.110
> 
> 标签：ruby-on-rails, mailer

我有一个关于 Rails 中邮件程序的理论问题。我听说过两次将资源直接传递给邮件程序并不被认为是好的做法。最好只传递一个 id 来加载对象。例如，在这个问题的公认答案中就是这样说的：[Rails: Absolutely stumped with delayed_job。在任何地方都没有收到论据](https://stackoverflow.com/questions/4337879/rails-absolutely-stumped-with-delayed-job-not-receiving-arguments-anywhere)

但如果是这样，这个禁令的原因是什么？我不能将链接问题视为详尽的解释。谢谢你的建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T18:36:10.597

原因很简单：在您被命令发送邮件和真正的邮件程序代码执行之间，您的对象发生更改的可能性超过 0%。想象一下，您正在使用的对象将在进程中被删除，但由于您在执行时没有加载对象，它将尝试使用不再存在的对象实例。我想你现在明白了这个问题。

# c - 在结构的动态数组上使用 realloc 时出现段错误

> ID：12785820
> 
> 赞同：1
> 
> 时间：2012-10-08T16:39:48.310
> 
> 标签：c, segmentation-fault, realloc

我的一大段代码有问题，所以我尽可能地减少它，事实上我找到了解决问题的方法，但我几乎可以肯定有更好的解决方案，这就是为什么我寻求帮助。

这是错误的代码：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct{
  int a;
}my_struct;

void tab_add(my_struct** tab, int i){
  *tab = (my_struct*)realloc(*tab, i+1); // Here's the realloc

  printf("Adding struct number %d\n", i);
  tab[i]->a = i*8; // Problem here, when accessing tab[i] the second time
  printf("Struct added\n");
}

int main(void){
  my_struct* tab = NULL;

  tab_add(&tab, 0);
  tab_add(&tab, 1);
  tab_add(&tab, 2);

  return 0;
} 
```

输出是：

> 添加结构编号 0
> 结构添加
> 添加结构编号 1
> zsh: 分段错误 ./main

现在，这是一个解决问题的代码（但它创建了一个无用的变量......）：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct{
  int a;
}my_struct;

void tab_add(my_struct** tab, int i){
  *tab = (my_struct*)realloc(*tab, i+1);

  printf("Adding struct number %d\n", i);
  my_struct st; // Useless variable created
  st.a = i*8;
  (*tab)[i] = st;
  printf("Struct added\n");
}

int main(void){
  my_struct* tab = NULL;

  tab_add(&tab, 0);
  tab_add(&tab, 1);
  tab_add(&tab, 2);

  return 0;
} 
```

它的输出是正确的：

> 添加结构编号 0
> 添加
> 结构 添加结构编号 1
> 添加
> 结构 添加结构编号 2 添加
> 结构

谢谢阅读 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:44:15.877

你应该使用

```
(*tab)[i].a = i*8; 
```

访问该字段`a`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:45:07.510

请参阅[realloc](http://linux.die.net/man/3/realloc)手册页。第二个参数是您要分配的数据大小；我认为您正在传递一个数组索引。

理想情况下，代码应采用以下形式

```
my_struct* tmp = realloc(*tab, sizeof(my_struct) * (i+1));
if (tmp == NULL) {
    /* error handling goes here */
else {
    *tab = tmp;
} 
```

以应对 realloc 失败并返回 NULL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T16:46:31.253

就像做这个分配一样简单：

```
(*tab)[i].a = i*8; 
```

如果你想摆脱圣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T16:57:11.990

不确定您要在这里实现什么。根据 realloc 文档，如果可能，它会尝试增加分配空间的大小，如果不是，它就像 free 和 malloc 一样。因此，在您的情况下，每次如果您尝试为结构分配空间，它将是相同的。但是根据代码，它第一次是 0 字节，它会尝试释放（分配的内存是空的，段错误也是如此）。

另外，您所说的修复似乎不是修复。它仍然会在以后的某个时候死去。因为堆栈在第一次调用时就已经损坏了。

# javascript - 进行连续ajax调用的正确方法是什么？

> ID：12785821
> 
> 赞同：8
> 
> 时间：2012-10-08T16:39:48.673
> 
> 标签：javascript, jquery, asp.net, ajax, iis

我有一些这样的代码可以每 30 秒实时更新我页面上的图表：

```
var counter = 30;

$(function() {
    prepare();
    update();
});

function update() {
    $("#timer").html("Refreshing in " + counter + " seconds...");
    counter--;

    if (counter == 0) {
        counter = 30;
        prepare();
    }

    setTimeout(update, 1000);
}

function prepare() {
    $.ajax({
        type: "POST",
        url: "Service.asmx/GetPlotData",
        contentType: "application/json; charset=utf-8",
        success: OnSuccess, // this function plots the new data
        error: OnError
    });
} 
```

这似乎工作正常，除非在连续进行 ajax 调用 16-20 小时后，我从服务器收到一个错误：

> 超时已过。在从池中获取连接之前超时时间已过。这可能是因为所有池连接都在使用中并且达到了最大池大小。

我启动了调试控制台，这就是我观察到的：

## AJAX 调用被正确触发

![在此处输入图像描述](../Images/d6ce2b556d9d0ef22355053cfcb46770.png)

## 在 16-20 小时之前，有一些延迟增加的情况（这是`Timeout`第一次看到错误的地方）

![在此处输入图像描述](../Images/0740a82bed55d56d6de63ce8328e7e17.png)

## 最后，代码设法遇到了一些瓶颈。每次通话和前端中断都会增加延迟。下面的蓝色箭头返回任何数据后没有调用。相反，它会引发超时错误。

![在此处输入图像描述](../Images/c2c5a29e48766a7c47157264638d5e68.png)

我确信我做的事情根本上是错误的。关于如何解决这个问题的任何想法？

## 编辑：服务器端代码

我的连接字符串：

```
Data Source={0};Initial Catalog={1};Integrated Security=True;MultipleActiveResultSets=true 
```

提取记录的代码：

```
try
{
    string ConString = Constants.connString;
    con = new SqlConnection(ConString);

    cmd = new SqlCommand(sql, con);
    con.Open();
    dr = cmd.ExecuteReader();

    while (dr.Read())
    {
        // Add the records into an object
    }

}
catch (Exception x)
{
     // Send back some error text.
     // This is what is giving out the Timeout error
}
finally
{
    con.Close();
} 
```

除非我遗漏了什么，否则我会在使用 获取记录后关闭连接，`con.Close()`或者我还需要做什么？

# 编辑2：更改上述代码如下。它是否正确？

```
try
{
    string ConString = Constants.connString;

    using (con = new SqlConnection(ConString))
    {
        cmd = new SqlCommand(sql, con);
        con.Open();
        dr = cmd.ExecuteReader();

        while (dr.Read())
        {
            // Add rows to object
        }
    }

}
catch (Exception x)
{
    // Handle error
}
finally
{
    con.Close();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T16:47:31.607

它看起来像与数据库的连接过多的服务器端问题。你是如何连接到数据库的？使用后是否关闭连接？尝试在多次连接后关闭连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:57:05.240

“我从服务器收到错误”让我认为这是服务器端资源泄漏。如果您并行运行两个浏览器选项卡，或者并行运行两个浏览器，或者两个具有自己的浏览器的主机并行访问服务器，会发生什么？

您的浏览器是否会随着时间的推移而增加？

如果您可以访问服务器端日志，那也是一个深入研究的点。

**编辑**

看到服务器代码后，您可能还想关闭阅读器以确保安全；如果这导致泄漏，我会感到惊讶，但你永远不知道。我更熟悉 Java，这可能会导致泄漏，具体取决于所使用的底层驱动程序。

```
dr.Close();
con.Close(); 
```

# c# - C# 中的快速排序算法有什么问题？

> ID：12785824
> 
> 赞同：0
> 
> 时间：2012-10-08T16:39:54.883
> 
> 标签：c#, algorithm, quicksort

可悲的是，我也遇到了快速排序的问题。我已经和其他学生讨论过，并尝试了标准的故障排除方法。但我找不到我做错了什么......

```
static int partition(int[] A)
    {
        int pivot, i, j;
        i = 0;
        j = A.Length;
        pivot = A[i];

        do
        {
            do
            {
                i++;
            }
            while (A[i] < pivot || i < j);
            do
            {
                j--;
            }
            while (A[j] > pivot);

            swap(ref A[i], ref A[j]);
        }
        while (i < j);

        if (i <= j)
        {
            swap(ref A[i], ref A[j]);
            swap(ref A[0], ref A[j]);
        }

        return j;
    }

    static void swap(ref int a, ref int b)
    {
        int aCopy = a;
        a = b;
        b = aCopy;
    }

    static int[] QuickSort(int[] A)
    {
        int s;
        int left = 0;
        int right = A.Length;
        int[] B, C;

        if (A.Length == 0 || A.Length == 1)
            return A;
        else
        {
            s = partition(A);
            B = new int[s];
            C = new int[right - s];

            for (int i = left; i < s; i++)
            {
                B[i - left] = A[i];
            }
            for (int i = s; i < right; i++)
            {
                C[i - s] = A[i];
            }

            QuickSort(B);
            QuickSort(C);
            return A;
        }
    } 
```

调试器不断给我一个带有 j 变量的“IndexOutOfRangeException”。我试过调整

```
while (A[i] < pivot || i < j); 
```

部分。但这并没有做任何事情（好吧，它导致了一次 StackOverflowException）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T16:42:09.057

你有`j = A.Length`，但它确实应该是`j = A.Length - 1`（基于你正在使用的循环）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:54:52.417

您始终将第一项包含在枢轴下方而不检查值，然后您将包括所有其他值，即使它们高于枢轴，只是因为`i < j`，当您在条件之间使用“或”运算符（`||`）时。

这个：

```
do
{
  i++;
}
while (A[i] < pivot || i < j); 
```

应该：

```
while (i < j && A[i] < pivot);
{
  i++;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T17:53:33.177

嗯，错误太多了，比如你正在交换你已经交换过的元素等等。这是您的解决方案，您的方法不会出错，其中还包括以前的答案和评论中所说的内容。编码不错！

```
 static int partition(int[] A)
    {
        int pivot, i, j;
        i = 0;
        j = A.Length-1;
        pivot = A[0];

        while (i < j)
        {
            while (A[i] < pivot && i < j)
            {
                i++;
            }

            while (A[j] > pivot && j > i)
            {
                j--;
            }
            swap(ref A[i], ref A[j]);
        }

        return j;
    }

    static void swap(ref int a, ref int b)
    {
        int aCopy = a;
        a = b;
        b = aCopy;
    }

    static int[] QuickSort(int[] A)
    {
        int s;
        int left = 0;
        int right = A.Length;
        int[] B, C;

        if (A.Length == 0 || A.Length == 1)
            return A;
        else
        {
            s = partition(A);
            B = new int[s];
            C = new int[right - s - 1];

            for (int i = left; i < s; i++)
            {
                B[i - left] = A[i];
            }
            for (int i = s + 1; i < right; i++)
            {
                C[i - s - 1] = A[i];
            }

            B = QuickSort(B);
            C = QuickSort(C);
            for(int i = 0; i < s;i++)
                A[i] = B[i - left];
            for (int i = s + 1; i < right; i++)
            {
                A[i] = C[i - s - 1];
            }
            return A;
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T16:54:28.750

我注意到即使段长为 2 或 3 个元素，您仍在尝试使用快速排序。我认为当您将输入数组的大小减少到少于 4 个元素时，您需要使用另一种排序技术。请记住，快速排序要求您将输入数组分解为一个“枢轴”元素和 2 个单独的数组，一个数组的所有元素都小于枢轴，另一个数组的所有元素都大于枢轴。为此，输入数组必须至少有 3 个元素。这可能是您问题的根源。

这是一个使用这种技术的通用快速排序......

```
public delegate int CompareDlg<T>(T thisOne, T otherOne);

public class QuickSort<T> 
{
    #region private variable to sort inplace
    readonly private IList<T> itms;
    private CompareDlg<T> cmp;
    #endregion private variable to sort inplace

    #region properties
    public CompareDlg<T> Comparer
    {
        set { cmp = value; }
        get { return cmp; }
    }
    #endregion properties

    #region ctor
    private QuickSort() { } //     Hide parameterless constructor
    /// <summary>
    /// Constructor, requires generic List of Ts 
    /// where T must implement CompareTo() method...
    /// </summary>
    /// <param name="list">List of T elements to sort</param>
    public QuickSort(IList<T> list) : this(list, null) { }
    /// <summary>
    /// Constructor, requires generic List of Ts 
    /// where T must implement CompareTo() method,
    /// And Compare method to use when sorting,
    /// (Overrides default CompareTo() implemented by T) ...
    /// </summary>
    /// <param name="list">List of T elements to sort</param>
    /// <param name="compareDelegate">Method to use to compare elements</param>
    public QuickSort(IList<T> list, CompareDlg<T> compareDelegate)
        : this()
    {
        if (list.Count == 0) throw new InvalidOperationException(
            "Empty List passed to QuickSort.");
        var first = default(T);
        if (typeof(T).IsClass)
        {
            foreach (var t in list)
                if (!((first = t).Equals(default(T))))
                    break;

            if (first.Equals(default(T)))
                throw new InvalidOperationException(
                    "List passed to QuickSort contains all nulls.");
        }
        if (compareDelegate == null && !(first is IComparable<T>))
            throw new InvalidOperationException(string.Format(
                "Type {0} does not implement IComparable<{0}>. " +
                "Generic Type T must either implement IComparable " +
                "or a comparison delegate must be provided.", typeof(T)));
        itms = list;
        cmp += compareDelegate ?? CompareDefault;
    }
    #endregion ctor

    #region public sort method
    public static void Sort(IList<T> itms) { (new QuickSort<T>(itms)).Sort(); }
    public void Sort(bool asc) { Sort(0, itms.Count - 1, asc); }
    public static void Sort(IList<T> itms, CompareDlg<T> compareDelegate)
    { (new QuickSort<T>(itms, compareDelegate)).Sort(); }
    public void Sort() { Sort(0, itms.Count - 1, true); }
    /// <summary>
    /// Executes QuickSort algorithm
    /// </summary>
    /// <param name="L">Index of left-hand boundary of partition to sort</param>
    /// <param name="R">Index of right-hand boundary of partition to sort</param>
    /// <param name="asc"></param>
    private void Sort(int L, int R, bool asc)
    {
        // Call iSort (insertion-sort) 
        if (R - L < 4) iSort(L, R);
        //for partitions smaller than 4 elements
        else
        {
            int i = (L + R) / 2, j = R - 1;
            // Next three lines to set upper and lower bounds
            if (Comparer(itms[L], itms[i]) > 0 == asc) Swap(L, i);
            if (Comparer(itms[L], itms[R]) > 0 == asc) Swap(L, R);
            if (Comparer(itms[i], itms[R]) > 0 == asc) Swap(i, R);
            Swap(i, j);
            // --------------------------------------------
            var p = itms[j]; // p = itms[j] is pivot element
            i = L;
            while (true)
            {
                while (Comparer(itms[++i], p) < 0 == asc) { }
                while (Comparer(itms[--j], p) > 0 == asc) { }
                if (j < i) break;
                Swap(i, j);
            }
            Swap(i, R - 1);
            Sort(L, i, asc);     // Sort  Left partition
            Sort(i + 1, R, asc); // Sort Right partition
        }
    }
    private static int CompareDefault(T thisOne, T otherOne)
    {
        if(!(thisOne is IComparable<T>)) 
            throw new InvalidCastException(
                "Type must implement IComparable<T>");
        return (thisOne as IComparable<T>).CompareTo(otherOne);
    }
    #endregion public sort method

    #region private Helper methods
    private void Swap(int L, int R)
    {
        var t = itms[L];
        itms[L] = itms[R];
        itms[R] = t;
    }
    private void iSort(int L, int R)
    {
        for (var i = L; i <= R; i++)
        {
            var t = itms[i];
            var j = i;
            while ((j > L) && Comparer(itms[j - 1], t) > 0)
            {
                itms[j] = itms[j - 1];
                j--;
            }
            itms[j] = t;
        }
    }
    #endregion private Helper methods
} 
```

# css - IE 8 和 div 上缺少背景（再次）

> ID：12785829
> 
> 赞同：-1
> 
> 时间：2012-10-08T16:40:12.693
> 
> 标签：css, internet-explorer-8, background-color

这是我的项目：

[由于垃圾邮件机器人而不得不删除网址]

为了快速浏览，这是我的 div 的 CSS：

```
#leftCol { width: 431px; height: 552px; background: #67b8b9; /* Fallback */ background: rgba(100,179,180,0.88); float: left; display: block; border-radius: 0px 24px 0px 0px; behavior: url('PIE-1/PIE.htc'); zoom: 1; } 
```

左栏有一个透明的纯色背景和一个圆角。除了某些版本的 IE 8 外，它在任何地方看起来都很好。在我的 IE 8 (Win XP SP2) 上它很好，降低了透明度，只显示了纯色。

今天一位同事向我展示了他们 IE 8 中的页面，背景颜色完全消失了，我可以通过 Adob​​e Browserlab 重新创建她查看页面的结果，所以它是“东西”，但我不知道是什么。

为 IE 8 尝试了一个单独的 CSS 表，我没有 height:100%、overflow:hidden 或任何其他 IE 已知会阻塞的属性。所以请告诉我我错过了什么。如果有帮助，它在 IE 7 中看起来也不错。事实上，如果我能让 IE 8 表现得像 IE 7，我会很高兴的。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:28:02.880

似乎我能找到的唯一解决方法是使用以下元标记强制 IE8 像 IE7 一样呈现

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7, IE=EmulateIE9" /> 
```

并不能真正解决问题，因为 IE8 应该能够处理它。天哪，你以前听过多少次？

PS 该标签告诉 IE 8 像 IE 7 一样呈现，但让 IE 9 单独呈现为 IE 9。

# python - 在 Python 中包装一个将自定义文件读入二维数组的 C 程序

> ID：12785834
> 
> 赞同：0
> 
> 时间：2012-10-08T16:40:43.037
> 
> 标签：python, c, numpy, swig, cython

我有一个独立的 c 程序，它采用 char* 文件名，打开文件，读取并将其解码为二维数组。在读取文件之前，我们不知道数组的长度。程序 mallocs 内存。

在给定文件名的情况下，我想要一个返回 2d numpy 整数数组的 python 扩展：

> > > a = readFile("theFileName.dat")

一旦返回数组，我想让 python 管理内存。

1.  在 numpy.i 中，是否定义了一个可以与 %apply 一起使用的指令
2.  cython 更适合这个吗？
3.  其他建议？

复制数据是可以的，因为文件不是很大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:16:58.547

[`SIP`](http://pypi.python.org/pypi/SIP)（[这里](http://www.riverbankcomputing.com/static/Docs/sip4/introduction.html)也是）可用于为 C 库创建 Python 绑定。

但这可能有点矫枉过正。在 Python 本身中读取/解码您的 .dat 文件可能会更容易。

# python - 如何从python中的二面角计算笛卡尔坐标

> ID：12785836
> 
> 赞同：2
> 
> 时间：2012-10-08T16:40:48.527
> 
> 标签：python, numpy, scipy, coordinates, coordinate-transformation

我在笛卡尔空间中有一组点。我可以使用 python 和 numpy 计算由四个点（a、b、c、d）的给定子集合定义的二面角。以下是我的功能：

```
def getDihedral(a,b,c,d):
 v1 = getNormedVector(a, b)
 v2 = getNormedVector(b, c)
 v3 = getNormedVector(c, d)
 v1v2 = numpy.cross(v1,v2)
 v2v3 = numpy.cross(v2,v3)
 return getAngle(v1v2,v2v3)

def getNormedVector(a,b):
 return (b-a)/numpy.linalg.norm(b-a)

def getAngle(a,b):
 return numpy.rad2deg(numpy.arccos(numpy.dot(a/numpy.linalg.norm(a),b.T/numpy.linalg.norm(b))))[0,0] 
```

我只想旋转一个二面角，如何使用带有 numpy 和 scipy 的 python 计算子集合的新坐标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:28:15.290

如果您可以计算二面角，我假设您可以获得要围绕其旋转点子集的轴。鉴于此，您可以通过在 vpython 中以您想要的角度围绕该轴旋转所有点来轻松做到这一点 - 请参阅[此示例](http://www.vpython.org/contents/docs/visual/vector.html)（转到“旋转矢量”）。否则，您需要编写[适当的方程式](http://en.wikipedia.org/wiki/Euler%E2%80%93Rodrigues_parameters)（在[此线程](https://stackoverflow.com/questions/6802577/python-rotation-of-3d-vector)中详细说明）。

# ios - 来自 Google 的 Apple Maps 转换

> ID：12785837
> 
> 赞同：2
> 
> 时间：2012-10-08T16:40:57.623
> 
> 标签：ios, google-maps

6 个月前，我们为客户构建了一个应用程序，该应用程序生成地图然后在特定位置放置图钉。这些图钉代表客户过去的项目位置...这一切都是使用 Mapkit 和 Google 地图完成的...我假设问题出在哪里？

现在，当应用程序打开时，屏幕是黑色的，大约 20 秒后应用程序将崩溃......当我们在 xcode 中将应用程序构建到设备时，它不会生成任何错误代码，所以我不知道该怎么做才能修复它?

我可以直接构建到设备并且苹果地图加载缓慢..但是当我断开xcode并尝试打开应用程序时它永远不会出现并且崩溃我知道苹果地图报告了很多问题......我假设是什么导致了这个问题......问题是我还能使用谷歌地图吗？还是我在 Apple 地图上遗漏了什么？

这是控制台中生成的内容

> 45 iPad backboardd[51]：完成崩溃报告。10 月 8 日 12:15:45 iPad com.apple.launchd[1] (UIKitApplication:com.Virtusventures.Mapin[0x696][2833]) : (UIKitApplication:com.Virtusventures.Mapin[0x696]) 退出：杀死：10 月 9 日8 12:15:45 iPad backboardd [51]：应用程序'UIKitApplication：com.Virtusventures.Mapin [0x696]'异常退出，信号9：杀死：9 Oct 8 12:15:45 iPad ReportCrash [2834]：libMobileGestalt copySystemVersionDictionaryValue：无法从系统版本字典中查找 ReleaseType 10 月 8 日 12:15:45 iPad ReportCrash[2834]：使用 uid：0 gid 将 crashreport 保存到 /var/mobile/Library/Logs/CrashReporter/Mapin_2012-10-08-121544_iPad.plist： 0，synthetic_euid：501 egid：0 Oct 8 12:15:55 iPad locationd[40]：位置图标现在应该处于“非活动”状态 完成崩溃报告。10 月 8 日 12:15:45 iPad com.apple.launchd[1] (UIKitApplication:com.Virtusventures.Mapin[0x696][2833]) : (UIKitApplication:com.Virtusventures.Mapin[0x696]) 退出：杀死：10 月 9 日8 12:15:45 iPad backboardd [51]：应用程序'UIKitApplication：com.Virtusventures.Mapin [0x696]'异常退出，信号9：杀死：9 Oct 8 12:15:45 iPad ReportCrash [2834]：libMobileGestalt copySystemVersionDictionaryValue：无法从系统版本字典中查找 ReleaseType 10 月 8 日 12:15:45 iPad ReportCrash[2834]：使用 uid：0 gid 将 crashreport 保存到 /var/mobile/Library/Logs/CrashReporter/Mapin_2012-10-08-121544_iPad.plist： 0，synthetic_euid：501 egid：0 Oct 8 12:15:55 iPad locationd[40]：位置图标现在应该处于“非活动”状态 完成崩溃报告。10 月 8 日 12:15:45 iPad com.apple.launchd[1] (UIKitApplication:com.Virtusventures.Mapin[0x696][2833]) : (UIKitApplication:com.Virtusventures.Mapin[0x696]) 退出：杀死：10 月 9 日8 12:15:45 iPad backboardd [51]：应用程序'UIKitApplication：com.Virtusventures.Mapin [0x696]'异常退出，信号9：杀死：9 Oct 8 12:15:45 iPad ReportCrash [2834]：libMobileGestalt copySystemVersionDictionaryValue：无法从系统版本字典中查找 ReleaseType 10 月 8 日 12:15:45 iPad ReportCrash[2834]：使用 uid：0 gid 将 crashreport 保存到 /var/mobile/Library/Logs/CrashReporter/Mapin_2012-10-08-121544_iPad.plist： 0，synthetic_euid：501 egid：0 Oct 8 12:15:55 iPad locationd[40]：位置图标现在应该处于“非活动”状态

这是当我没有构建到设备并且只是尝试打开应用程序时显示的内容

> 10 月 8 日 12:38:48 ipad geod[1066]：/SourceCache/GeoServices/GeoServices-457.9/GEOResourceManifestServerLocalProxy.m:1072 连接错误：错误域 = NSURLErrorDomain 代码 = -1001“请求超时。” UserInfo=0x1ed36780 {NSErrorFailingURLStringKey=http://gspa21.ls.apple.com/config/prod-resources-lodpi-18, NSErrorFailingURLKey=http://gspa21.ls.apple.com/config/prod-resources-lodpi- 18、NSLocalizedDescription=请求超时。，NSUnderlyingError=0x1ed3d450“请求超时。”}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:47:13.073

您的应用程序未及时启动，并被看门狗计时器杀死。

从您的日志中：

> Mapin 未能及时启动 10 月 8 日 12:15:44 iPad backboardd[51]：强制 Mapin[2833] 崩溃报告...

您可能需要将冗长的启动任务移至后台线程。

# c++ - C++ 测试示例中可能存在的逻辑缺陷

> ID：12785839
> 
> 赞同：3
> 
> 时间：2012-10-08T16:41:06.437
> 
> 标签：c++, memory, memory-management, memory-leaks

在我的大学里，有一个用 C++ 进行的实用编程测试——我遇到了一个例子，我不确定所讨论的任务是否有效并且是否可以正确完成。

**（简单）任务：**

*   完成 的析构函数`Person`，以便`name`再次释放分配的

*   在 main 函数中，替换`//???`为释放先前分配的内存所需的语句

起初，这些任务对我来说似乎微不足道：对于析构函数，只需编写`delete[] name`并在 main 函数中使用`delete[] friends`. 大概这也是这个例子的作者想要我们做的。

**然而：**

此代码示例中似乎存在缺陷，导致内存泄漏以及多次调用析构函数。

person 类没有赋值`operator =`，这意味着由于现有的 Person 对象如`maria`被分配到 main 函数中的数组中的槽`friends`，内部分配`name`的 s 不会被复制。所以现在两个对象共享同一个内部`char*`指针！此外，指向`Person`先前驻留在所述数组槽中的名称的指针永久丢失，导致不可避免的内存泄漏。

正如`delete[] friends;`所谓的 - 数组中的对象被销毁 - 导致它们的析构函数被调用并释放它们的`name`成员。但是，当程序结束时，范围内的本地 Person 对象`main`被破坏 - 当然它们的`name`成员仍然指向之前已经释放的内存。

**实际问题：**

*   这个测试示例有缺陷，还是我遗漏了什么？
*   如果完全坚持执行给定的任务（仅更改析构函数的实现，并在主函数的注释部分插入新代码），是否可以解决上面列出的问题？

..

```
#include <iostream>
using namespace std;

int strlen(const char *str) {
    if (str==0) return 0;
    int i=0;
    for (; str[i]; ++i);
    return i;
}

void strcpy(const char *src, char *dest) {
    if (src==0 || dest==0) return;
    int i=0;
    for (; src[i]; ++i) dest[i]=src[i];
    dest[i]=’\0’;
}

class Person {
    char *name;
public:
    Person(const char *str = "Susi") {
        name = new char[strlen(str)+1];
        strcpy(str,name);
    }

    Person(const Person &p) {
        name = new char[strlen(p.name)+1];
        strcpy(p.name,name);
    }

    ~Person() {
        //...
    }

    void change() {
        name[4]='e';
    }

    ostream &print(ostream &o) const {
        o<<name;
        return o;
    }
};

int main() {
    Person maria("Maria"), peter("Peter"), franz("Franz"), luisa("Luisa");
    Person mary(maria);
    Person luise;
    Person p(luise);

    Person *friends= new Person[7];
    friends[0]=maria;
    friends[1]=peter;
    friends[2]=franz;
    friends[3]=luisa;
    friends[4]=mary;
    friends[5]=luise;
    friends[6]=p;
    friends[5]=luisa;
    friends[3].change();
    friends[4].change();

    for (int i=0; i<7; ++i) {
    friends[i].print(cout);
    cout<<endl;
    }

    //???
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T16:51:52.060

你是绝对正确的。您*可以*通过仅在指定位置进行更改来修复它，但是它们将相当极端：

`//...`将析构函数内部替换为：

```
 delete[] name;
}

Person& operator=(const Person& other)
{
    if (this != &other) {
        delete[] name;  // not completely exception-safe!
        name = new char[strlen(other.name)+1];
        strcpy(other.name,name);
    }
    return *this; 
```

**另一个严重的问题是使用重新`strcpy`排序参数的新定义重新定义标准函数 ()。**

（另请参阅：SQL 注入攻击，这也会导致现有的语法元素对、频繁的引号和括号与插入的语法元素重新配对）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T16:52:18.627

1.  是的，测试示例有缺陷，可能是有意识的。类`Person`肯定需要赋值运算符，记住[三法则](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)。
2.  不，这是不可能的。默认编译器生成的赋值运算符将泄漏`friends`数组中的对象分配的内存，并双重删除自动`Person`对象分配的内存。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-08T16:58:04.563

对于每一个新的，都应该有一个 delete[]。

# linux - 使用正则表达式

> ID：12785841
> 
> 赞同：-1
> 
> 时间：2012-10-08T16:41:16.017
> 
> 标签：linux, shell

**我有一些问题：**

1- 在文件 tu.txt 中，我怎样才能找到所有只包含大写字母的单词，例如 GFDY

2- 我怎样才能找到只有第一个字母大写的多词术语，例如皇家城堡

我更喜欢使用 grep。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:55:23.537

1)
`grep -w "[[:upper:]]\{1,\}" tu.txt`

其中`[:upper:]`menas`[A-Z]`和`{1,}`表示至少有一个来自[AZ] 的符号的词。

2）“条款”是什么意思？请澄清你的逻辑..

# java - 尝试使用 POI 写入空单元格时的空指针

> ID：12785842
> 
> 赞同：0
> 
> 时间：2012-10-08T16:41:17.833
> 
> 标签：java, apache-poi

我正在尝试编写现有的 Excel 工作表。但是，当我运行以下代码时，我得到了 NPE。如果目标单元格有值，则代码可以正常工作。但是当它是一个空单元格时，它会给出 NPE。

```
FileInputStream myInput = new FileInputStream(fileName);
            POIFSFileSystem myFileSystem = new POIFSFileSystem(myInput);
            Workbook myWorkBook = new HSSFWorkbook(myFileSystem);
            Sheet mySheet = myWorkBook.getSheetAt(0);
            myRow = mySheet.getRow(20);
            myCell = myRow.getCell(0);
            //myCell = myRow.createCell(0);
            myCell.setCellValue("praveen");
            FileOutputStream myOutput = new FileOutputStream(fileName);
            myWorkBook.write(myOutput);
            myOutput.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:55:16.390

从[公共 HSSFRow getRow(int rowIndex)的 javadoc](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFSheet.html#getRow%28int%29)

> 返回基于 0 的逻辑行（非物理行）。**如果您要求未定义的行，您会得到一个 null**。也就是说，第 4 行代表一张纸上的第五行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-11T11:59:11.527

我发现了同样的问题并解决了。我想分享我的解决方案，它可以在未来帮助开发人员。

当单元格中没有文本或为空时，POI api 行对象会将其视为“NULL”。这就是您在处理该单元格时获得 NPE 的原因。

现在它为 NULL，所以首先我们必须初始化它并首先在那里创建一个新单元格，然后我们可以进一步处理。

所以，这里有一些可以帮助的锻炼。

1.  在那里创建新单元格。在你的情况下，它会像

    `myRow.createCell(0).setCellValue("Your Value !!")`

希望会有用！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T07:04:11.113

//可能对你有帮助。

```
Iterator iterator = mySheet .rowIterator();
 if(iterator.hasNext()){
        Row myRow= mySheet.getRow(20);
        Cell myCell = myRow.getCell(0);
        myCell.setCellValue("praveen");
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T17:01:42.467

如果在该行中抛出 NPE，则意味着您要搜索的特定行未定义。除了检查整体结构之外，您还应该通过在获取行之前添加一些检查来进行一些防御性编程，方法是验证您搜索的索引是否介于最小和最大索引之间。

```
//assuming a cellIndex int parameter, the code should look like
myRow = mySheet.getRow(20);
if(myRow.getFirstRowNum() < cellIndex && cellIndex < myRow.getLastRowNum())
    myCell = myRow.getCell(0);
else
    //Throw an exception, log something, skip the operation or create a new row. 
```

# c# - DependencyProperties 未按预期在 UserControl 中触发回调

> ID：12785846
> 
> 赞同：5
> 
> 时间：2012-10-08T16:41:37.560
> 
> 标签：c#, wpf, binding, user-controls, dependency-properties

我有一个非常简单的示例，说明`DependencyProperty`我已在 UserControl 上注册，但它并没有按预期工作。

我将此属性绑定到 MainWindow 中的 DP（称为测试），它似乎`OnPropertyChanged`每次更改时都会触发事件，但是`DependencyProperty`在我的 UserControl 中，作为此绑定的目标，似乎仅在第一次此属性时才收到通知改变了。

这是我在代码中尝试做的事情：

我的用户控件：

```
public partial class UserControl1 : UserControl
{
    public static readonly DependencyProperty ShowCategoriesProperty = 
        DependencyProperty.Register("ShowCategories", typeof(bool), typeof(UserControl1), new FrameworkPropertyMetadata(false, OnShowsCategoriesChanged));

    public UserControl1()
    {
        InitializeComponent();
    }

    public bool ShowCategories
    {
        get
        {
            return (bool)GetValue(ShowCategoriesProperty);
        }
        set
        {
            SetValue(ShowCategoriesProperty, value);
        }
    }

    private static void OnShowsCategoriesChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        //this callback is only ever hit once when I expect 3 hits...

        ((UserControl1)d).ShowCategories = (bool)e.NewValue;
    }
} 
```

主窗口.xaml.cs

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    public MainWindow()
    {
        InitializeComponent();

        Test = true;  //this call changes default value of our DP and OnShowsCategoriesChanged is called correctly in my UserControl

        Test = false;  //these following calls do nothing!! (here is where my issue is)
        Test = true;
    }

    private bool test;
    public bool Test
    {
        get { return test; }
        set
        {
            test = value;
            OnPropertyChanged("Test");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    protected void OnPropertyChanged(string property)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

主窗口.xaml

```
<Window x:Class="Binding.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:uc="clr-namespace:Binding"
    DataContext="{Binding RelativeSource={RelativeSource Self}}"        
    Title="MainWindow" Height="350" Width="525">
  <Grid>
    <uc:UserControl1 ShowCategories="{Binding Test}" />
  </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T16:59:04.520

问题是您将`ShowCategories`值设置为自身：

```
((UserControl1)d).ShowCategories = (bool)e.NewValue; 
```

该行没有用，因为 的值`ShowCategories`已经被修改。这就是为什么你首先在属性更改回调中。乍一看，这可以看作是一个无操作：毕竟，您只是将一个属性值设置为其当前值，这在 WPF 中不会引发任何更改。

但是，由于绑定不是双向的，因此更改属性值会**覆盖**绑定。这就是为什么不再引发回调的原因。只需删除回调中的分配，您就完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:01:15.370

使绑定模式为`TwoWay`.

# mysql - 使用 LIKE 运算符连接两个表

> ID：12785853
> 
> 赞同：0
> 
> 时间：2012-10-08T16:42:00.807
> 
> 标签：mysql, sql

我正在尝试基于两个相似的值加入两个表。到目前为止我有这个，但我一使用`%`.

```
SELECT downloads.d_key, payer_email
FROM    paypal_log
INNER JOIN
        downloads
ON      downloads.d_key LIKE "%" + paypal_log.custom + "%" 
```

将`downloads.d_key`在`paypal_log.custom`.

对此表示赞赏的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:46:42.730

尝试

```
SELECT 'one' + 'two' FROM DUAL 
```

看看你得到了什么。你会想要使用

```
LIKE concat('%', paypal_log.custom, '%') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:46:50.093

MySQL 连接运算符是`||`. 您还可以使用以下`CONCAT()`功能：

```
SELECT downloads.d_key, payer_email
FROM    paypal_log
INNER JOIN
        downloads
ON      downloads.d_key LIKE '%' || paypal_log.custom || '%' ; 
```

正如其他人指出的那样，您可能正在做一些非常非常错误的事情。

# python - Python：未解释的转义字符

> ID：12785857
> 
> 赞同：6
> 
> 时间：2012-10-08T16:42:22.693
> 
> 标签：python, windows, macos, escaping, character

出于某种原因，当我在代码中编写转义字符时，转义字符永远不会被解释。我以前在 Windows 工作，现在改用 Mac，这与我有什么关系吗？在我在 Windows 中工作之前，我从来没有遇到过这个问题。我试过搜索，但没有找到任何关于此的内容。预先感谢您的帮助！

这是我的意思的一个例子：

```
print 'Hello \nWorld' 
```

从这里你会期望得到：

```
>> Hello 
>> World 
```

但是 IDLE 会准确地打印出来：

```
>> 'Hello \nWorld' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T16:42:57.940

您不是在打印字符串，而是在打印字符串文字；它是字符串表示：

```
>>> 'Hello\nWorld'
'Hello\nWorld'
>>> print 'Hello\nWorld'
Hello
World
>>> print repr('Hello\nWorld')
'Hello\nWorld' 
```

每当您在 Python 交互式解释器（或 IDLE）中回显变量时，解释器都会将值回显给您：

```
>>> var = 'Hello\nWorld'
>>> var
'Hello\nWorld' 
```

但是，打印值会输出到相同的位置，但完全是一个不同的操作：

```
>>> print var
Hello
World 
```

例如，如果我要调用一个打印的函数，*并且*该函数返回一个值，您会看到两者都回显到屏幕上：

```
>>> function foo():
...     print 'Hello\nWorld'
...     return 'Goodbye\nWorld'
...
>>> foo()
Hello
World
'Goodbye\nWorld' 
```

在上面的例子中，`Hello`and`World`被函数打印出来，but`'Goodbye\nWorld'`是函数的返回值，解释器以它的表示形式帮助我回显。

# soap - SOAP 服务器应用程序没有在 Zend 2.0 中运行，而在 Zend 1.7 上完美运行

> ID：12785859
> 
> 赞同：1
> 
> 时间：2012-10-08T16:42:24.850
> 
> 标签：soap, zend-framework2

有人对这个问题有任何想法，或者有人可以向我指出 Zend 2.0 中构建的示例 SOAP 服务器应用程序代码。

# javascript - 段落中单词的正则表达式

> ID：12785860
> 
> 赞同：0
> 
> 时间：2012-10-08T16:42:25.500
> 
> 标签：javascript, jquery, regex, dojo

正则表达式写的一段，我想在其中搜索一个词。

我尝试使用 .search 但我没有得到正确的答案，例如：-

科学（来自拉丁语 scientia，意为“知识”）是一项系统性的事业，它以关于宇宙的可测试解释和预测的形式构建和组织知识。 [1] 在更古老且密切相关的含义中（例如，在亚里士多德中找到）

***在上面的句子中，如果我必须找到“知识”这个词。我可以使用什么正则表达式。***

实际上我已经在道场中制作了一个表格：-

名称：*文本区* 地址：*文本区* 电话。no : *number txt 区域*

提交按钮

现在当我点击提交按钮时。姓名地址和电话号码。字段应自动填写如下字母：-

亲爱的[姓名]，

这是为了通知你，等等等等。您可以联系以下签名人。[电话号码] ,[地址]

1.  我已经做了表格。现在我正在尝试匹配标签的内部 html 和括号中的单词。如果它是相同的，那么值必须在字母中得到 stroed。请帮助提出更好的想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:00:42.090

看到这个：

[http://jsfiddle.net/2hNwL/1/](http://jsfiddle.net/2hNwL/1/)

但正如奥利指出的那样，这是毫无意义的。考虑到您可能想要替换字符串知识，我也使用了替换功能：

```
var str = 'Science (from Latin scientia, meaning "knowledge") is a systematic enterprise that builds and organizes knowledge in the form of testable explanations and predictions about the universe.[1] In an older and closely related meaning (found, for example, in Aristotle)';

var match = str.match(/knowledge/gi);

if(match != null)
{
    for(var i = 0; i < match.length; i++)
        alert(match[i]);

    var replacedString = str.replace(/knowledge/gi,'egdelwonk');
    alert(replacedString);
} 
```

根据您的编辑，请参阅我的新 jsfiddle：http: [//jsfiddle.net/kPRDH/](http://jsfiddle.net/kPRDH/)

```
var str = 'Dear [name] ,This is to inform you that blah blah blah blah. you can contact the undersigned. [tele no] ,[address]';

str = str.replace(/\[name\]/g,'TCM');
str = str.replace(/\[tele no\]/g,'9999999999');
str = str.replace(/\[address\]/g,'221B Bakers Street');

alert(str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:58:30.557

以下正则表达式：

```
/knowledge/ig 
```

无论如何，我认为您不需要 RegEx：

```
string.indexOf('knowledge'); // Will give you the first index of the word 
```

# javascript - 如何检查从 DOM 中检索到的元素是否仍然存在于 DOM 中

> ID：12785861
> 
> 赞同：5
> 
> 时间：2012-10-08T16:42:28.793
> 
> 标签：javascript, jquery

假设我有一个 DOM 元素，作为事件的参数，例如单击。

```
$(document).click(function() {
    myElement = $(this);
}); 
```

以后如何检查 myElement 是否仍在 DOM 中？我不能使用 .length 或任何其他类似的东西，因为此时它仍然引用保存的元素和 DOM 的状态，对吧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T16:50:44.183

您可以检查元素父级：

```
function isInDom(obj) {
    var root = obj.parents('html')[0] 
    return !!(root && root === document.documentElement);
}

if(isInDom(myElement)) {
     ...
} 
```

这是工作小提琴：http: [//jsfiddle.net/vnxhQ/7/](http://jsfiddle.net/vnxhQ/7/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-08-14T17:52:02.843

您可能正在寻找[`Node.isConnected`](https://developer.mozilla.org/en-US/docs/Web/API/Node/isConnected).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T17:15:54.650

到目前为止我看到的唯一可靠的方法是检查元素是否在里面`document.getElementsByTagName('*')`

```
function isInDoc(element)
{
  var elements=document.getElementsByTagName(element.tagName);
  for(var i=0;i<elements.length;++i)
  {
    if(elements[i]===element)return true;
  }
  return false;
} 
```

演示：http: [**//jsfiddle.net/doktormolle/hX8eN/**](http://jsfiddle.net/doktormolle/hX8eN/)

* * *

**`<edit>`**

[**所有主流浏览器似乎都支持Node.contains()**](https://developer.mozilla.org/en-US/docs/DOM/Node.contains)，所以我最后建议这样做：

```
if(document.documentElement.contains(myElement)) 
```

演示：http: [**//jsfiddle.net/doktormolle/LZUx3/**](http://jsfiddle.net/doktormolle/LZUx3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T16:58:43.853

为了测试某个元素是否还存在于 DOM 中，需要再次爬取 DOM：

```
// store it in some shared scope
var myElement;
$(document).click(function() {
    myElement = $(this);
});

// sometime later...
if ($('#' + myElement.attr('id')).length > 0) {
    // it still exists
} else {
    // it no longer exists
} 
```

但是，您单击的元素必须都具有`id`s 才能正常工作。可以使用类或任何其他选择器来代替。

编辑：有关如何为任何给定 DOM 元素获取唯一选择器的想法，请参阅[此问题。](https://stackoverflow.com/questions/5706837/get-unique-selector-of-element-in-jquery)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T17:00:41.763

这是假设您将设置可能的“可点击”元素的 id

```
var idRef;
$(document).on('click', function() {
    idRef = this.id;    
}); 
```

之后..

```
var exists = document.getElementById(idRef).length > 0; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T17:07:15.193

您可以`.selector`使用 jQuery 对象的未记录属性来查看元素是否仍在 DOM 中，**条件**是它使用唯一 ID。很明显

[http://jsfiddle.net/mblase75/CC2Vn/](http://jsfiddle.net/mblase75/CC2Vn/)

```
$two = $('#two');
console.log($($two.selector).length); // 1
$two.remove();
console.log($($two.selector).length); // 0 
```

有关如何获取 jQuery 对象的选择器的更多信息，请参阅[此问题，该选择器可能会或可能不会唯一地描述它包含的 DOM 元素。](https://stackoverflow.com/questions/2420970/how-can-i-get-selector-from-jquery-object)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-08T17:56:39.633

只是为了添加一些东西：

这确实是 Inferpse 的回答，针对 Dr.Molle 创建另一个可能包含从一般 DOM 树中删除的元素（或者，当然，该元素一开始从未在 DOM 中）中删除的元素的极端案例进行了微调。 Inferspe 的回答是，它需要一个 jQuery 包装的对象，而不是元素本身。

```
function isInDom(jqobj) {
    var someBody = jqobj.parents('body');
    return someBody.length > 0 && someBody.get(0) === document.body;
}
​ 
```

我必须承认我很难弄清楚如何尝试打破这一点。

编辑：哦，是的...... jsFiddle：http: [//jsfiddle.net/vnxhQ/5/](http://jsfiddle.net/vnxhQ/5/)

编辑二：当然，如果我们不是在谈论链接或脚本元素（任何可能进入`head`，而不是`body`，我想这可能会正常工作：-/

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-28T10:06:15.957

实现 Inferpse 功能的更好方法可能是扩展 jQuery：

```
jQuery.fn.extend({
    isInDom: function() {
        var root = this.eq(0).parents('html')[0];
        return !!(root && root === document.documentElement);
    }
}) 
```

用法：

```
$("div").isInDom() //returns true if your dom contains a div
$("<div />").isInDom() //returns false
$().isInDom() //returns false 
```

# c++ - 为什么我在 typedef auto 时出现错误？

> ID：12785862
> 
> 赞同：1
> 
> 时间：2012-10-08T16:42:30.470
> 
> 标签：c++, c++11

我以为这会奏效。

```
typedef auto var; 
```

但我得到了错误：

> `error: typedef declared 'auto'`

相反，它适用于任何其他关键字：

```
typedef int num; 
```

为什么我会收到错误消息？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-08T16:46:09.757

简单地说，这不是允许使用`auto`. `typedef`定义类型的别名。 `auto`不是类型；在变量声明中使用时，它是初始化程序类型的替代。如果你能够`typedef auto var;`，那么`var`就不会是*一个类型*的别名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:47:21.787

auto 是类型修饰符而不是类型，因此不能进行类型定义

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-30T08:37:55.897

你不能这样做，因为 auto 不是真正的类型。如果你想使用`var`而不是`auto`then 你可以这样做：

```
#define var auto 
```

但是这样做会导致问题，因为在那之后`var`代码中的每一行都会被替换为`auto`. 包括包含的文件。例如

```
int var= 0; 
```

会变成

```
int auto= 0; 
```

这将破坏编译。

因此，如果您要走这条路，请记住在定义之前包含所有头文件。

# php - 在 PHP 中选择 MySQL 的问题

> ID：12785863
> 
> 赞同：0
> 
> 时间：2012-10-08T16:42:30.897
> 
> 标签：php, mysql

我收到了这个错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 6 行的 'and idcat = 00 OR idcat = 11 OR idcat = 4 OR idcat = 8 OR idcat = 10 OR idcat ' 附近使用正确的语法

我试图在 PHP 上做这个查询

```
SELECT *,
        MATCH (name,description) AGAINST ('key') AS relevancia
  FROM offer
  WHERE
      MATCH (name,description)
          and idcat = 00
          OR idcat = 11
          OR idcat = 4
          OR idcat = 8
          OR idcat = 10
          OR idcat = 5
          OR idcat = 7
          OR idcat = 1
          OR idcat = 2
          OR idcat = 3
          OR idcat = 6
          OR idcat = 9
      AGAINST ('key')
  ORDER BY discount DESC
  LIMIT 0, 15 
```

但是，如果我尝试直接在 phpmyadmin 上执行此查询，它就可以正常工作。所以我不知道如果它是相同的咨询为什么不能在 PHP 上工作。

顺便原谅我糟糕的英语。

**编辑：**

这是php的consulation

```
$sql2 = "SELECT *, 
MATCH (name,description) 
AGAINST ('$search')
AS relevancia 
FROM offer 
WHERE MATCH (name,description) AGAINST ('$search')  
and  $wheres $order $limit";

echo $sql2;
mysql_query("".$sql2."")  or die (mysql_error()); 
```

$sql2 上的 php 结果

```
SELECT *, MATCH (name,description) AGAINST ('key') AS relevancia 
FROM offer 
WHERE MATCH (name,description) AGAINST ('key') 
and idcat IN(00, 11, 4, 8, 10, 5, 7, 1, 2, 3, 6, 9) 
ORDER BY discount DESC LIMIT 0, 3 
```

php-mysql中的错误

```
You have an error in your SQL syntax; 
check the manual that corresponds to your MySQL server version for the right syntax to
use near
'idcat IN(00, 11, 4, 8, 10, 5, 7, 1, 2, 3, 6, 9) ORDER BY discount DESC' at line 5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:57:54.473

你不能 用你的条件拆分子句。[`MATCH (*col1*,*col2*,...) AGAINST (*expr* [*search_modifier*])`](http://dev.mysql.com/doc/en/fulltext-search.html#function_match)`idcat`

先完成一个，*然后再*与另一个结合。也就是说，要么：

```
... WHERE MATCH (name,description) AGAINST ('key') AND idcat IN ( 00, 11, ... ) 
```

或者：

```
... WHERE idcat IN ( 00, 11, ... ) AND MATCH (name,description) AGAINST ('key') 
```

*注意*：我使用 MySQL 的[`IN`](http://dev.mysql.com/doc/en/comparison-operators.html#function_in)运算符作为`(idcat = 00 OR idcat = 11 OR ...)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:46:35.163

尝试这个：

```
SELECT *, concat (name, relevance) AS relevancia 
FROM offer 
WHERE MATCH (name,description) AGAINST  ('key') 
and (idcat = '00' 
OR (idcat > 0 
and idcat<=11))
ORDER BY discount DESC LIMIT 0, 15 
```

# actionscript-3 - AS3 - 使用补间、帧间隙的碰撞检测

> ID：12785867
> 
> 赞同：2
> 
> 时间：2012-10-08T16:42:50.297
> 
> 标签：actionscript-3, tween

事情是这样的：我有一个使用 Tweens 弹跳的球，我想检测球和平台之间的碰撞（仅当球落下时）。

但是，我的解决方案是在一个循环中测试碰撞`ENTER_FRAME`，所以当球的速度很高时，在 ax 帧，球在平台上方，在 x+1 帧，球在平台下方，所以我的循环永远不会检测到碰撞（因为球和平台从来没有真正碰撞过）。

这是我的球的跳跃方法：

```
public function jump():void
{
    TweenLite.killTweensOf(this);
    TweenLite.to(this, jumpSpeed, {y:250, ease:Cubic.easeOut});
    TweenLite.to(this, jumpSpeed, {delay:jumpSpeed, y:stage.stageHeight-this.height, ease:Cubic.easeIn, onComplete:jump});
} 
```

这是我的`ENTER_FRAME`循环中执行的内容：

```
for each (var platform:Platform in platforms) 
{
    if (ball.hitTestObject(platform) &&  ballPreviousY < ball.y)
        ball.jump();
}
ballPreviousY = ball.y; 
```

我已经开始研究使用物理引擎 Box2D 的解决方案，但我想知道是否有更简单的解决方案来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T06:42:15.703

这是碰撞检测中的一个常见问题——小而快的物体穿过薄薄的障碍物。您正在寻找的是**扫描测试**

> 除了测试两个静态形状之间的交叉点之外，我们还可以通过沿其轨迹扫描原始形状并测试这些扫描形状之间的重叠来创建新形状。

来自[N Tutorial A - Fast Moving Objects](http://www.metanetsoftware.com/technique/tutorialA.html#section5)，（如果您对碰撞算法的更多细节感兴趣，我建议您阅读他们所有的东西）。

例如，如果您有一个 1px x 1px 的正方形，并且它沿 x 轴以每帧 5px 的速度移动，您需要扭曲您的正方形，使其变为 6px x 1px 的矩形以进行碰撞测试。捕捉下一帧会碰到的任何东西，但没有更多。

圆有点困难，因为当你拉伸它们时，它们会变成椭圆（更难检查碰撞）。如果您想走椭圆路线，请参阅[此答案。](https://stackoverflow.com/questions/2945337/how-to-detect-if-an-ellipse-intersectscollides-with-a-circle)

# android - EditText 未显示在自定义 FragmentDialog 中

> ID：12785868
> 
> 赞同：0
> 
> 时间：2012-10-08T16:42:50.797
> 
> 标签：android, android-layout, dialog, android-fragments

我正在尝试以编程方式显示一个简单的提示对话框片段。我已经扩展`SherlockFragmentActivity`，并在其中编写了自定义`SherlockDialogFragment`实现。

（我正在使用 ActionbarSherlock 库，但我认为问题与它无关，并且使用常规的 ActionBar 和 Fragments 也可以观察到）。

这是`oncreateDialog`自定义 FragmentActivity 类中的重写方法：

```
 @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {

        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

        //Skipped section. Setting positive, negative buttons, title, message on builder.

        efPsw = new EditText(getActivity());

        // Hacky margin stuff (yeah, I know it's dirty)
        DisplayMetrics displaymetrics = new DisplayMetrics();
        getActivity().getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
        int smallestSide = Math.min(displaymetrics.heightPixels, displaymetrics.widthPixels);
        int margin = (int)(0.5 * ((double) smallestSide));  
        efPsw.setTransformationMethod(PasswordTransformationMethod.getInstance());          

        FrameLayout fl = new FrameLayout(getActivity());            
        FrameLayout.LayoutParams layoutParams = new FrameLayout.LayoutParams(
                FrameLayout.LayoutParams.MATCH_PARENT, FrameLayout.LayoutParams.WRAP_CONTENT);          
        layoutParams.setMargins(margin, 0, margin, 0);          

        fl.addView(efPsw, layoutParams);                
        builder.setView(fl);

        return builder.create();            
    } 
```

当我显示片段时，内部框架布局没有显示（看起来像一个不可见的矩形，随着每个键入的字符的高度增加）。我不确定我在这里做错了什么，但肯定有问题，因为如果我将编辑文本放入`setView`一切正常（但没有边距）。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:07:44.150

看起来您正在将边距设为最小边的一半，在纵向模式下，这将使您的边距成为整个屏幕。我将从减少保证金开始。

您可以使用 setLayoutParams() 方法将边距直接应用于 EditText。这将消除 FrameLayout。

# php - 如何从 js 代码中获取字符串值

> ID：12785870
> 
> 赞同：1
> 
> 时间：2012-10-08T16:42:54.177
> 
> 标签：php, javascript, preg-match, urldecode

我想获取字符串值，然后再使用`urldecode()`.

Javascript

```
document.write(unescape('%46%43%20%42%72%61%73%6f%76%20%76%73%2e%20%43%53%4d%53%20%49%61%73%69')); 
```

PHP

```
$string = "document.write(unescape('%46%43%20%42%72%61%73%6f%76%20%76%73%2e%20%43%53%4d%53%20%49%61%73%69'));";

preg_match('/document.write(unescape(\'.*\'));/', $string,$matches);
var_dump($matches); 
```

但是这个回报`array(0) { }`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:51:56.357

你可以试试

```
$string = "document.write(unescape('%46%43%20%42%72%61%73%6f%76%20%76%73%2e%20%43%53%4d%53%20%49%61%73%69'));";
preg_match('/document.write\(unescape\(\'(.*)\'\)\);/', $string,$matches);
var_dump($matches[1]); 
```

输出

```
string '%46%43%20%42%72%61%73%6f%76%20%76%73%2e%20%43%53%4d%53%20%49%61%73%69' (length=69) 
```

# java - Java GUI：石头剪刀布游戏

> ID：12785872
> 
> 赞同：0
> 
> 时间：2012-10-08T16:43:00.470
> 
> 标签：java, user-interface, if-statement, jlist

我目前正在学习Java中的GUI开发，并且我应该制作一个石头，纸，剪刀游戏。到目前为止，我已经制作了 GUI 本身（一个丑陋的 GUI，但仍然是一个 GUI），但我不知道如何将您所做的选择“连接”到 if 和 else 中。这是我到目前为止所拥有的：

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class Oppgave extends JFrame implements ActionListener{

public JLabel title;
public JButton button;
public JList liste;
public JList liste2;

public Oppgave(){
    super("A game");
    setLayout(new BorderLayout());

    title = new JLabel("Rock, scissor, paper!");
    add(title, BorderLayout.NORTH);
    title.setHorizontalAlignment(SwingConstants.CENTER);

    String[] choice = {"Rock","scissor","paper"};
    liste = new JList(choice);
    liste.setSelectionMode(DefaultListSelectionModel.SINGLE_SELECTION);
    add(liste, BorderLayout.WEST);

    liste2 = new JList(choice);
    liste2.setSelectionMode(DefaultListSelectionModel.SINGLE_SELECTION);
    add(liste2, BorderLayout.EAST);

    button = new JButton("Play");
    add(button, BorderLayout.SOUTH);

    button.addActionListener(this);
}

    public void actionPerformed(ActionEvent e){
    if(e.getSource().equals(button)){
        JOptionPane.showMessageDialog(null, "Player 1 chose: "+liste.getSelectedValue());
        JOptionPane.showMessageDialog(null, "Player 2 chose: "+liste2.getSelectedValue());
    }

    }
} 
```

所以现在我想做 if 和 else 的，比如如果玩家 1 选择了摇滚，然后检查玩家 2 选择了什么并显示获胜者。

如何在 if/else 语句中使用 JLists 中的选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T17:15:50.387

这是我对您应该尝试做的事情的理解：

```
String player1Choice = liste.getSelectedValue()
String player2Choice = liste2.getSelectedValue()

if (player1Choice.equals(player2Choice)
    System.out.println("Draw"); // Or whatever you want to output to, could be another jLabel
else if(player1Choice.equals(rock) && player2Choice.equals(paper))
    System.out.println("Player 2 wins.");

// And just keep adding on here..... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T17:24:32.470

所以你有输出但不知道该怎么做？您可能想要使用的示例代码：

```
String p1 = "";
String p2 = "";
if(liste1.getSelectedValue().equals("rock"))
{
    p1 = "rock";
}
if(liste1.getSelectedValue().equals("paper"))
{
    p1 = "paper";
}
if(liste1.getSelectedValue().equals("scissors"))
{
    p1 = "scissors";
} 
```

重复播放器 2，使用名为 p2 的字符串。然后：

```
Boolean player2win = false;
Boolean player1win = false;
Boolean tie = false;
if(p1.equals(p2))
{
    tie = true;
}
if(p1.equals("rock") && p2.equals("scissors"))
{
    player1win = true;
}
if(p1.equals("paper") && p2.equals("rock"))
{
    player1win = true;
}
if(p1.equals("scissors") && p2.equals("paper"))
{
    player1win = true;
}
else
{
    player2win = true;
} 
```

那应该工作

# iis - IIS 站点未使用应用程序池 IIS 7 + 中指定的标识

> ID：12785873
> 
> 赞同：0
> 
> 时间：2012-10-08T16:42:59.947
> 
> 标签：iis, identity, pool

我有一个来自 Visual Studio 的 Web 应用程序，它使用本地 IIS 服务器运行。它是一个 MVC 3 应用程序。我在我的 IIS（win 7 pro）中设置了应用程序池，以使用服务帐户作为应用程序身份。当我浏览该站点时，我收到了站点上某个功能的权限错误，如果它使用服务帐户，我将不会得到。这已通过在开发服务器上使用与应用程序池标识相同的服务帐户进行测试。应用程序执行没有错误。我的本地安全策略中是否存在阻止使用服务帐户的内容？
服务帐户也是 IIS_IUSRS 组的成员。
这是一项网络服务。

# jquery - gmap3中的地理围栏

> ID：12785876
> 
> 赞同：0
> 
> 时间：2012-10-08T16:43:08.630
> 
> 标签：jquery, google-maps, jquery-gmap3

我想在 gmap3 中添加地理围栏。我认为最基本的方法是绘制一个圆圈并在添加标记时检查标记是否在圆圈的范围内。

我加了一个圈

```
var fence = $('#dispatcher').gmap3(
  { action: 'addCircle',
    circle:{
      options:{
        center: [53.99212, -1.541812],
        radius : 3000,
        fillColor : "#FFAF9F",
        strokeColor : "#FF512F" 
      }
    }
  }
); 
```

知道我将如何获得检查的界限吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:59:16.387

也许使用

```
circle.getBounds(); 
```

它在此处列出[Google maps V3 API](https://developers.google.com/maps/documentation/javascript/reference#Circle)，然后使用[contains(latLng:LatLng)](https://developers.google.com/maps/documentation/javascript/reference#LatLngBounds)

# python - Python，导入文件中的init方法

> ID：12785878
> 
> 赞同：0
> 
> 时间：2012-10-08T16:43:27.000
> 
> 标签：python, import, module

我对从另一个文件导入方法有点困惑。

我正在编写一个从[`python-automata`](http://code.google.com/p/python-automata/). 我已经下载了该文件，并在我的`../Python/`目录中`DFA.py`存储了该文件`myfile.py`。

在`myfile.py`我上面写了这个：

```
import DFA 
```

当我按照[python 教程](http://docs.python.org/tutorial/modules.html)中的内容进行操作时，我假设`myfile.py`我可以使用`DFA.py`. 该文件有一个名为的方法`__init__`，它接受 5 个参数并初始化一个`DFA`. 然后我把它写在`myfile.py`：

```
DFA.__init__(states, alphabet, delta(states, alphabet), start, accepts) 
```

其中状态、字母表、增量、开始和接受是我在 myfile.py 中初始化的所有基本列表/函数。

但是当我尝试运行 myfile.py 时，我得到了这个错误：

```
Traceback (most recent call last):
  File "myfile.py", line 21, in <module>
    DFA.__init__(states, alphabet, delta(states, alphabet), start, accepts)
TypeError: module.__init__() takes at most 2 arguments (5 given) 
```

我不确定为什么它说它需要 2 个参数，当`DFA.py`它定义为接受 5 个参数时。在`DFA.py`中，我看到：

```
class DFA:
    def __init__(self, states, alphabet, delta, start, accepts):
    ... 
```

这似乎是我之前遇到的类似错误（请参阅[Python 导入问题](https://stackoverflow.com/questions/6756569/python-import-issue)和[Python 类和 __init__ 方法](https://stackoverflow.com/questions/6831685/python-classes-and-init-method)），但我认为我不需要在这里处理继承。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T16:45:52.597

```
from DFA import DFA

a = DFA(states, alphabet, delta(states, alphabet), start, accepts) 
```

编辑：命名`__xx__`的方法并不意味着直接调用。

一些阅读：[http ://docs.python.org/tutorial/classes.html](http://docs.python.org/tutorial/classes.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T16:45:55.047

您正在`DFA`作为模块导入，但您想在其中导入*类*。尝试：

```
from DFA import DFA 
```

`__init__`然后，您可以通过调用类的构造函数来隐式调用`DFA`：

```
DFA(states, alphabet, delta(states, alphabet), start, accepts)     
# ^ this calls __init__ on DFA 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T16:45:57.117

当您输入 时`DFA.__init__()`，您正在调用`__init__`整个模块的方法（我什至不知道它被定义为什么）。你应该使用`DFA.DFA.__init__()`，它指的是类中的`__init__`方法，或者使用：`DFA``DFA.py`

```
from DFA import *
DFA.__init__() 
```

# ruby - 如何从 Ruby 1.9 调用/要求 Ruby 1.8 Lib

> ID：12785880
> 
> 赞同：0
> 
> 时间：2012-10-08T16:43:30.790
> 
> 标签：ruby, ruby-1.9, ruby-1.8

我正在使用 Ruby 1.8 lib `kakasi-ruby`，但它似乎只能针对 Ruby 1.8 进行编译（https://github.com/hogelog/kakasi-ruby/issues/2）

我的应用程序是 Ruby 1.9.3，所以我需要`kakasi-ruby`从 Ruby 1.9.3 调用。

我应该怎么做？

我是否必须使用 Ruby 1.8 打开一个子进程，并等待它完成以获取进程返回值？

编辑： [https ://github.com/hogelog/kakasi-ruby](https://github.com/hogelog/kakasi-ruby)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:30:06.717

找到了 3 条可能的路径：

*   回购中似乎有一个[1.9 的分支。](https://github.com/hogelog/kakasi-ruby/tree/1.9)也许尝试编译它？
*   否则，您最快的选择可能是回到 1.8，具体取决于它是什么类型的应用程序。
*   使用 1.8 调用可能会起作用，但是因为该库似乎是对某些 C 代码的绑定，您也可以直接调用该代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:28:05.423

顺便说一句，这是 Ruby 1.9 中的用法

```
plee@sos:~/Japanese$ irb
1.9.3p194 :001 > require 'kakasi'
 => true 
1.9.3p194 :002 > src="前原誠司経済財政相は４日、朝日新聞などのインタビューに対し"
 => "前原誠司経済財政相は４日、朝日新聞などのインタビューに対し" 
1.9.3p194 :003 > src=src.encode("EUC-JP", "UTF-8")
 => "\x{C1B0}\x{B8B6}\x{C0BF}\x{BBCA}\x{B7D0}\x{BAD1}\x{BAE2}\x{C0AF}\x{C1EA}\x{A4CF}\x{A3B4}\x{C6FC}\x{A1A2}\x{C4AB}\x{C6FC}\x{BFB7}\x{CAB9}\x{A4CA}\x{A4C9}\x{A4CE}\x{A5A4}\x{A5F3}\x{A5BF}\x{A5D3}\x{A5E5}\x{A1BC}\x{A4CB}\x{C2D0}\x{A4B7}" 
1.9.3p194 :004 > dst=Kakasi.kakasi("-w", src)
 => "\xC1\xB0\xB8\xB6 \xC0\xBF\xBB\xCA \xB7\xD0\xBA\xD1 \xBA\xE2\xC0\xAF \xC1\xEA \xA4\xCF \xA3\xB4 \xC6\xFC \xA1\xA2 \xC4\xAB\xC6\xFC\xBF\xB7\xCA\xB9 \xA4\xCA\xA4\xC9\xA4\xCE \xA5\xA4\xA5\xF3\xA5\xBF\xA5\xD3\xA5\xE5\xA1\xBC \xA4\xCB \xC2\xD0\xA4\xB7" 
1.9.3p194 :005 > dst.force_encoding("EUC-JP")
 => "\x{C1B0}\x{B8B6} \x{C0BF}\x{BBCA} \x{B7D0}\x{BAD1} \x{BAE2}\x{C0AF} \x{C1EA} \x{A4CF} \x{A3B4} \x{C6FC} \x{A1A2} \x{C4AB}\x{C6FC}\x{BFB7}\x{CAB9} \x{A4CA}\x{A4C9}\x{A4CE} \x{A5A4}\x{A5F3}\x{A5BF}\x{A5D3}\x{A5E5}\x{A1BC} \x{A4CB} \x{C2D0}\x{A4B7}" 
1.9.3p194 :006 > dst=dst.encode("UTF-8", "EUC-JP")
 => "前原 誠司 経済 財政 相 は ４ 日 、 朝日新聞 などの インタビュー に 対し" 
1.9.3p194 :007 > 
```

# amazon-s3 - Amazon S3 中的数据传出指的是什么？

> ID：12785881
> 
> 赞同：3
> 
> 时间：2012-10-08T16:43:34.253
> 
> 标签：amazon-s3

我无法理解[Amazon S3 成本](http://aws.amazon.com/s3/#pricing)`Data Transfer Out pricing`的一部分

他们的[常见问题解答谈论](http://aws.amazon.com/s3/faqs/#How_much_does_Amazon_S3_cost)如何计算它，但我无法理解**数据传出**和*请求** 定价之间的区别..

不`Data transfer out`一样`requests`吗？该页面还谈到`Data transfer In`对欧盟免费，然后继续解释费用`Put requests`

* * *

抱歉这个离题问题，我查看了关于 SuperUser、Programmers、ServerFault 和 WebMasters 的常见问题解答——它们看起来都不是这个问题的好地方（如果我要问一个离题的问题，我想我至少会选择一个我愿意犯错的地方）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T16:59:57.287

是传输的`Data transfer out`字节数，而 是`requests`指不同请求的数量。您通常每次下载都发出一个请求，但之后您可以传输几兆字节。

# php - 为嵌套对象扩展 json_encode

> ID：12785882
> 
> 赞同：2
> 
> 时间：2012-10-08T16:43:35.280
> 
> 标签：php, object, json

我正在使用**PHP 5.2.x**并希望仅使用私有成员对我的自定义 PHP 类的对象进行编码。其中一个私有成员是另一个自定义类的对象数组。

我尝试了[https://stackoverflow.com/a/7005915/17716](https://stackoverflow.com/a/7005915/17716)中概述的解决方案，但这显然不能递归工作。我能看到的唯一解决方案是以某种方式扩展 json_encode 方法，以便调用 json_encode 方法的类版本而不是默认方法。

供参考，代码如下：

```
Class A {
    private $x;
    private $y;
    private $z;
    private $xy;
    private $yz;
    private $zx;

    public function f1() {
        ...
    }

    public function f2() {
        ...
    }
    .
    .
    .
    public function getJSONEncode() {
         return json_encode(get_object_vars($this));
    }
}

class B {

    private $p; //This finally stores objects of class A
    private $q;
    private $r;

    public function __construct() {
            $this->p = array();
    }

    public function fn1() {
        ...
    }

    public function fn2() {
        ...
    }

    .
    .
    .

    public function getJSONEncode() {
         return json_encode(get_object_vars($this));
    }

}

class C {

    private $arr;

    public function __construct() {
            $this->arr = array();
    }

    public function fillData($data) {
        $obj = new B();
        //create objects of class B and fill in values for all variables
        array_push($this->arr, $obj)
    }

    public function returnData() {
          echo $this->arr[0]->getJSONEncode(); //Edited to add

    }

} 
```

实现这种嵌套 json 编码的最佳方法是什么？

编辑添加：

执行 returnData 方法时得到的输出是：

```
{"p":[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],"q":"Lorem Ipsum","r":"Dolor Sit Amet"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:55:23.183

虽然我相信你最好为你的每个类编写一个适当的导出/编码函数*（它会从私有和公共值构造一个公共对象只是为了编码 - 你可能非常聪明并使用 php 的[反射](http://php.net/manual/en/book.reflection.php "反射")能力）* - 相反- 您可以使用以下代码：

```
/// example class B
class TestB {
  private $value = 123;
}

/// example class A
class TestA {
  private $prop;
  public function __construct(){
    $this->prop = new TestB();
  }
}

function json_encode_private($obj){
  /// export the variable to find the privates
  $exp = var_export($obj, true);
  /// get rid of the __set_state that only works 5.1+
  $exp = preg_replace('/[a-z0-9_]+\:\:__set_state\(/i','((object)', $exp);
  /// rebuild the object
  eval('$enc = json_encode('.$exp.');');
  /// return the encoded value
  return $enc;
}

echo json_encode_private(new TestA());

/// {"prop":{"value":123}} 
```

所以上面应该可以工作，但我不建议`eval`在 php 中的任何地方使用 - 只是因为我总是在远处安静地听到警铃:)

## **更新**

只是想到了什么可能会使它更安全一些，而不是使用`eval`你可以使用`create_function`的东西来限制它的一些创造能力，或者至少限制这些能力的范围......

```
function json_encode_private($obj){
  $exp = var_export($obj, true);
  $exp = preg_replace('/[a-z0-9_]+\:\:__set_state\(/i','((object)', $exp);
  $enc = create_function('','return json_encode('.$exp.');');
  return $enc();
} 
```

## **更新 2**

有机会尝试另一种将具有私有属性的对象转换为具有公共属性的对象的方法 - 仅使用一个简单的函数*（并且没有 eval）*。以下内容需要在您使用的任何版本的 PHP 上进行测试，因为它的行为 - 再次 - 可能不可靠......由于转换后的私有属性中的奇怪前缀*（参见代码中的注释）*。`\0`*`Class Name`*`\0`

 **有关这种奇怪的前缀行为的更多信息：http:
[//uk3.php.net/language.types.array.php#language.types.array.casting](http://uk3.php.net/language.types.array.php#language.types.array.casting)*

无论如何，所以使用测试类：

```
class RandomClass {
  private $var = 123;
  private $obj;
  public function __construct(){
    $this->obj = (object) null;
    $this->obj->time = time();
  }
} 
```

我们可以使用以下函数将其转换为公共对象：

```
function private_to_public( $a ){
  /// grab our class, convert our object to array, build our return obj
  $c = get_class( $a ); $b = (array) $a; $d = (object) null;
  /// step each property in the array and move over to the object
  /// usually this would be as simple as casting to an object, however
  /// my version of php (5.3) seems to do strange things to private 
  /// properties when casting to an array... hence the code below:
  foreach( $b as $k => $v ){
    /// for some reason private methods are prefixed with a \0 character
    /// and then the classname, followed by \0 before the actual key value. 
    /// This must be some kind of internal protection causing private  
    /// properties to be ignored. \0 is used by some languges to terminate  
    /// strings (not php though, as far as i'm aware).
    if ( ord($k{0}) === 0 ) {
      /// trim off the prefixed weirdnesss..?!
      $e = substr($k, 1 + strlen($c) + 1);
      /// unset the $k var first because it will remember the \0 even 
      /// if other values are assigned to it later on....?!
      unset($k); $k = $e;
    }
    /// so if we have a key, either public or private - set our value on
    /// the destination object.
    if ( $k !== '' && $k !== NULL && $k !== FALSE )  {
      $d->{$k} = $v;
    }
  }
  return $d;
} 
```

所以如果我们把它们放在一起：

```
$a = new RandomClass();

echo json_encode( private_to_public( $a ) );

/// {"var":123,"obj":{"time":1349777323}} 
```

[同样，您最好/最可靠的选择是为每个类定制您的转换方法，或者使用Class Reflection](http://php.net/manual/en/book.reflection.php "类反射")创建某种通用解决方案，但后者比 StackOverflow 答案更复杂，更复杂......至少与我有多少空闲时间；）

## **更多信息**

当尝试从任何地方访问对象时，上面的代码将起作用，实现它的原因是因为我的第一次尝试显然是使用以下内容：

```
echo json_encode( get_object_vars($a) );

/// you will get {} which isn't what you expect 
```

似乎如果你想`get_object_vars`使用它，你必须从可以访问所有属性的上下文中使用它，即从你公开的类内部：

```
public function getAllProperties(){
  return get_object_vars( $this );
} 
```

所以，想象一下我们将上面的内容添加到 RandomClass 定义中：

```
echo json_encode( $a->getAllProperties() );

/// you will get {"var":123,"obj":{"time":1349777323}} 
```

这是可行的，因为类的成员可以访问类的所有公共或私有属性……正如我所说，以这种方式工作要优越得多；优越，但并非总是可能的。*

# android - 使用 ACTION_REQUEST_DISCOVERABLE 的蓝牙适配器

> ID：12785888
> 
> 赞同：0
> 
> 时间：2012-10-08T16:43:58.637
> 
> 标签：android, android-activity, bluetooth, discovery

我正在尝试使用 BluetoothAdapter`ACTION_REQUEST_DISCOVERABLE`来根据以下内容向其他用户发现我的手机：

```
 testIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);
     startActivity(testIntent); 
```

我得到了蓝牙权限请求对话框，但由于某种原因，我在我的活动中看不到它。我只有在退出该程序时才能看到它。我想覆盖该对话框中的菜单。

我可以这样做吗，如果可以，我该如何改变它？为什么我不能在我参与的活动中看到它？

# java - 当用户单击Struts2 jquery网格的删除按钮时，卡在获取特定行的id

> ID：12785891
> 
> 赞同：1
> 
> 时间：2012-10-08T16:44:06.670
> 
> 标签：java, struts2, jqgrid, struts2-jquery

我正在使用 Jquery Grid 在 struts 2 中开发一个小型应用程序，用于显示数据结果。

当我单击编辑按钮时，特定的行 ID 即将到来。但是当我单击删除按钮删除该行时，它的 id 不会出现。使用选定的行（Struts2 Jquery Grid）执行删除操作时如何获取行的ID？

请帮我解决这个问题。

## myJspFile.jsp

```
 <%@ page contentType="text/html; charset=UTF-8"%>
            <%@ taglib prefix="s" uri="/struts-tags"%>
            <%@ taglib prefix="sj" uri="/struts-jquery-tags"%>

            <%@ taglib prefix="sjg" uri="/struts-jquery-grid-tags"%>
            <jsp:include page="../../loginCheck.jsp" />
            <html>
            <head>
            <title>Hello World</title> 
            <style type="text/css">
            @import
            url(<%=request.getContextPath()%>/css/style1.css);
            </style> 
             <sj:head jqueryui="true" jquerytheme="le-frog"/>
            </head>
            <body> 
                <div id="setpage"> <s:url id="editurl" action="nedit"/>
                    <s:url id="editurl" action="nedit"/>
                    <s:url  id="remoteurl" action="ntable"/> 
                  <sjg:grid
                    id="gridtable"
                    caption="Subject Setup Navigator"
                    dataType="json"
                    href="%{remoteurl}"
                    pager="true"
                    rowList="10,20,100"
                     rowNum="5"
                    navigator="true"
                    width="999"
                    navigatorSearchOptions="{sopt:['eq','ne','lt','gt']}"
                    navigatorAddOptions="{height:280,reloadAfterSubmit:true}"
                    navigatorEditOptions="{height:280,reloadAfterSubmit:false}"
                    navigatorEdit="false"
                    navigatorView="false"
                    navigatorDelete="true"
                    navigatorDeleteOptions="{height:280,reloadAfterSubmit:true}"
                    gridModel="gridModel" 
                    editurl="%{editurl}"
                    editinline="true"
                    onSelectRowTopics="rowselect"

                >
                       <sjg:gridColumn name="subjectId" index="subjectId" title="SubjectId" formatter="integer" sortable="false" key="true"    hidden="true"   />
                       <sjg:gridColumn name="subjectName" index="subjectName" title="Subject Name" sortable="true" search="true"
                                        editable="true"
                                        edittype="text" />
                    </sjg:grid> 
                <br/>

                </div>
            </body>
            </html> 
```

## MyActionClass.java

```
 /*
             * To change this template, choose Tools | Templates
             * and open the template in the editor.
             */
            package v.esoft.actions.subjectdetails; 
            import com.opensymphony.xwork2.ActionSupport; 
            import java.text.SimpleDateFormat; 
            import com.opensymphony.xwork2.ModelDriven; 
            import v.esoft.dao.SubjectdetailsDAO.SubjectdetailsDAO; 
            import v.esoft.pojos.Subjectdetails;

            public class SubjectdetailsEditAction   extends ActionSupport  implements ModelDriven<Subjectdetails>
            {
                private static final long serialVersionUID = -6659925652584240539L; 
               private String oper; 
                int subjectId;
                 Subjectdetails subject=new Subjectdetails();
               SimpleDateFormat formatter1 = new SimpleDateFormat("yyyy-MM-dd"); 
               SubjectdetailsDAO dao=new SubjectdetailsDAO();       

               @Override
               public Subjectdetails getModel()
            {   
                  return subject;
               }

              public String execute() throws Exception
                {    
                  System.out.println(subject.getSubjectId());
                  if(oper.equalsIgnoreCase("add"))
                    {
                      System.out.println ("inside action");
                      dao.saveOrUpdateSubject(subject);  
                    }
                    else if (oper.equalsIgnoreCase("edit"))
                    { 
                         dao.saveOrUpdateSubject(subject);  
                    }
                    else if (oper.equalsIgnoreCase("del"))
                    {
                        System.out.println("subjectId");
                        System.out.println(subject.getSubjectId());
                    //  dao.deleteSubject(subjectId);
                    }
                    return SUCCESS;
                } 
              //---------------
                public String getOper() {
                    return oper;
                }

                public void setOper(String oper) {
                    this.oper = oper;
                }

                public Subjectdetails getSubject() {
                    return subject;
                }

                public void setSubject(Subjectdetails subject) {
                    this.subject = subject;
                }
                public int getSubjectId() {
                    return subjectId;
                }
                public void setSubjectId(int subjectId) {
                    this.subjectId = subjectId;
                }

            } 
```

## Subjectdetails.java [我的pojo]

```
 package v.esoft.pojos;

            // Generated Oct 6, 2012 1:58:21 PM by Hibernate Tools 3.4.0.CR1

            import java.util.Date;

            /**
             * Subjectdetails generated by hbm2java
             */
            public class Subjectdetails implements java.io.Serializable {

                private int subjectId;
                private String subjectName;
                private Integer createrId;
                private Date createdDate;
                private Integer updateId;
                private Date updatedDate;

                public Subjectdetails() {
                }

                public Subjectdetails(int subjectId) {
                    this.subjectId = subjectId;
                }

                public Subjectdetails(int subjectId, String subjectName, Integer createrId,
                        Date createdDate, Integer updateId, Date updatedDate) {
                    this.subjectId = subjectId;
                    this.subjectName = subjectName;
                    this.createrId = createrId;
                    this.createdDate = createdDate;
                    this.updateId = updateId;
                    this.updatedDate = updatedDate;
                } 

                public int getSubjectId() {
                    return this.subjectId;
                }

                public void setSubjectId(int subjectId) {
                    this.subjectId = subjectId;
                }

                public String getSubjectName() {
                    return this.subjectName;
                }

                public void setSubjectName(String subjectName) {
                    this.subjectName = subjectName;
                }

                public Integer getCreaterId() {
                    return this.createrId;
                }

                public void setCreaterId(Integer createrId) {
                    this.createrId = createrId;
                }

                public Date getCreatedDate() {
                    return this.createdDate;
                }

                public void setCreatedDate(Date createdDate) {
                    this.createdDate = createdDate;
                }

                public Integer getUpdateId() {
                    return this.updateId;
                }

                public void setUpdateId(Integer updateId) {
                    this.updateId = updateId;
                }

                public Date getUpdatedDate() {
                    return this.updatedDate;
                }

                public void setUpdatedDate(Date updatedDate) {
                    this.updatedDate = updatedDate;
                }

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:59:27.830

使用 `id`而不是`subjectId`作为主键。并再次创建您的 sql 表和 pojo。然后它将起作用。

# objective-c - iOS6中的TableView角半径不同

> ID：12785892
> 
> 赞同：3
> 
> 时间：2012-10-08T16:44:12.527
> 
> 标签：objective-c, ios, uitableview, ios6

我有一个带有分组 UITableView 的简单应用程序。在每个单元格的最左侧，我有一个缩略图，并手动创建了顶部和底部图像，以使曲线与分组表视图的角相匹配。

这在 iOS6 之前一直运行良好。看起来半径略有不同，这给我留下了空隙。

这样我就可以让它在 iOS5 和 6 之间保持一致，有没有办法改变拐角半径？我试过改变 cell.backgroundView.layer.cornerRadius 但它没有区别。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T19:13:59.187

你试过把这个放在cornerRadius之后吗？

```
cell.backgroundView.clipsToBounds = YES; 
```

> 将此值设置为 YES 会导致子视图被裁剪到接收器的边界。如果设置为 NO，其帧超出接收器可见边界的子视图不会被剪裁。默认值为 NO。 [UIView 类参考](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html)

# javascript - 在 Netbeans 中使用 YUI 压缩器

> ID：12785895
> 
> 赞同：2
> 
> 时间：2012-10-08T16:44:20.367
> 
> 标签：javascript, css, netbeans, minify

是否可以使用 Netbeans for php 自动使用[YUI 压缩器](http://developer.yahoo.com/yui/compressor/)并部署到 FTP 服务器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T16:46:26.373

也许您可以在 Netbeans 中使用 ANT，就像在 Eclipse 中一样。 [自动化 Eclipse “Yui Compressor...”](https://stackoverflow.com/questions/9279023/automate-eclipse-yui-compressor/9280382#9280382)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-14T10:30:23.023

例如，如果您正在使用 PHP 项目，您可以在按下 F6（运行）时执行一个脚本，该脚本会为您完成这项工作。它在项目属性配置中的设置。

请参阅此链接： [http ://webartisan.se/yui-compressor-netbeans/](http://webartisan.se/yui-compressor-netbeans/)

# ios - NSData 不接受转义/UTF8 编码的 URL

> ID：12785900
> 
> 赞同：0
> 
> 时间：2012-10-08T16:44:23.767
> 
> 标签：ios, nsurl

我正在尝试创建一个包含主包中文件内容的 NSData 对象。

```
NSString *chordPath = [[NSBundle mainBundle] pathForResource:chordName ofType:@"png"];

NSURL *chordURL = [NSURL URLWithString:[chordPath stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
NSData *chordImageData = [NSData dataWithContentsOfURL:chordURL];
UIImage *chordImage = [UIImage imageWithData:chordImageData]; 
```

在使用之前，`stringByAddingPercentEscapesUsingEncoding`我得到了一个 nil URL，所以我继续通过重新编码字符串来修复它。现在我得到了一个有效的 URL，但该`chordImageData`对象对我来说是 nil。该文件肯定包含在我的主包中（因为我能够获得开始的 URL）所以我想知道出了什么问题。

编辑：

运行这个：

`NSData *chordImageData = [NSData dataWithContentsOfURL:chordURL options:NSDataReadingMapped error:&dataCreationError];`

给我这个错误：

```
po dataCreationError
Error Domain=NSCocoaErrorDomain Code=256 "The operation couldn’t be completed. (Cocoa error 256.)" UserInfo=0x7530a00 
```

环顾谷歌，似乎该 URL 仍未正确编码。有人知道确保编码有效的额外步骤吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:56:31.613

尝试使用 fileURLWithPath:，如下所示：

```
NSString *chordPath = [[NSBundle mainBundle] pathForResource:chordName ofType:@"png"];

NSURL *chordURL = [NSURL fileURLWithPath: chordPath];
NSData *chordImageData = [NSData dataWithContentsOfURL:chordURL];
UIImage *chordImage = [UIImage imageWithData:chordImageData]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:57:35.087

应该没有必要进行百分比转义。您遇到问题的原因是您使用`URLWithString:`的是“非文件”URL。

您应该使用[`+fileURLWithPath:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html#//apple_ref/doc/uid/20000301-BAJBGFBJ)基于文件的 URL：

```
NSString *chordPath = [[NSBundle mainBundle] pathForResource:chordName ofType:@"png"];

NSURL *chordURL = [NSURL fileURLWithPath:chordPath];
NSData *chordImageData = [NSData dataWithContentsOfURL:chordURL];
UIImage *chordImage = [UIImage imageWithData:chordImageData]; 
```

# php - 无法更改 zend 中的会话变量 .. 方法错误吗？

> ID：12785901
> 
> 赞同：0
> 
> 时间：2012-10-08T16:44:27.277
> 
> 标签：php, ajax, zend-framework

以下是我到目前为止所遵循的步骤：

首先，我已经为我的会话初始化了命名空间

```
$guest_events = new Zend_Session_Namespace('guest_events'); 
```

然后在会话中添加一个数组

```
$guest_events-> events = array(); 
```

然后我在数组中添加了一些事件。

看起来像：

```
Array
(
    [amount_0] => 1
    [event_id_0] => 69
    [event_title_0] => Sunday Collection
    [amount_1] => 11
    [event_id_1] => 78
    [event_title_1] => Test event

) 
```

现在在我的另一个控制器中，当我尝试通过 ajax 实现编辑量功能时：

```
$event_id = $this-> getRequest()-> getParam('event_id');
        $edit_amount = $this-> getRequest()-> getParam('edit_amount');
        $event_title = $this-> getRequest() -> getParam('event_title');
$guest_events = new Zend_Session_Namespace('guest_events');
$event_array = $guest_events-> events;
for ($i = 0; $i < 5; $i ++)
        {
          if (array_key_exists('event_id_'.$i, $event_array))
          {     

                if ($event_array['event_id_'.$i]==$event_id && $event_array['event_title_'.$i]==$event_title)
                {   
                     // unset the amount and replace with new one 
                    unset($guest_events-> events-> amount_0);
                    $guest_events-> events-> amount_0 = $edit_amount;
                }
          }
        } 
```

我已经尝试了一切，但会话变量保持不变..谁能告诉为什么？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:59:14.713

如果元素`events`是对象中的数组`Zend_Session_Namespace`，那么您应该像这样设置它：

```
$guest_events-> events['amount_0'] = $edit_amount; 
```

而不是喜欢：

```
$guest_events-> events-> amount_0 = $edit_amount; 
```

另外，由于您处于找到正确数值的循环中，我认为它实际上应该是：

```
$guest_events-> events['amount_' . $i] = $edit_amount; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:19:45.160

我发现了问题..它没有进入内部if循环..即：

```
if ($event_array['event_id_'.$i]==$event_id && $event_array['event_title_'.$i]==$event_title)
                {   
                     // unset the amount and replace with new one 
                    unset($guest_events-> events-> amount_0);
                    $guest_events-> events-> amount_0 = $edit_amount;
                } 
```

仍然无法弄清楚为什么会这样：/

# java - 在 MongoDB 中将结果集转换为用户定义的数据结构

> ID：12785904
> 
> 赞同：1
> 
> 时间：2012-10-08T16:44:35.813
> 
> 标签：java, mongodb

MongoDB 数据库以自己的数据结构返回数据。例如，在以下示例中，数据以`cursor`. 我的问题是“如何将此数据结构转换为用户定义的数据结构（例如，Java 列表、结构）？”

```
BasicDBObject query = new BasicDBObject();

        query.put("i", 71);

        cursor = coll.find(query);

        try {
            while(cursor.hasNext()) {
                System.out.println(cursor.next());
            }
        } finally {
            cursor.close();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:50:19.693

Morphia 是为 mongodb 进行对象映射的库：[http](http://code.google.com/p/morphia/) ://code.google.com/p/morphia/ 。

# google-app-engine - 访问 GAE 任务队列（拉取队列）时出现错误（401 未授权）

> ID：12785907
> 
> 赞同：0
> 
> 时间：2012-10-08T16:44:50.110
> 
> 标签：google-app-engine, queue, task, pull, task-queue

我在尝试访问拉取任务队列时遇到此错误。直到上周五（10 月 5 日），它一直运行良好。今天（10 月 8 日）它不起作用。

我从具有以下 2 个导入证书的 Websphere Application Server v7 运行它：accounts.googleapis.com:443 和 www.googleapis.com:443。

我正在使用以下版本的任务队列 API：

```
<dependency>
    <groupId>com.google.apis</groupId>
    <artifactId>google-api-services-taskqueue</artifactId>
   <version>**v1beta1-1.2.0-beta**</version>
</dependency> 
```

你能帮我吗？

```
Error Message: com.google.api.client.http.HttpResponseException: 401 Unauthorized
Error Code: 500
Target Servlet: Spring MVC Dispatcher Servlet
Error Stack: 
com.google.api.client.http.HttpResponseException: 401 Unauthorized
     at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:708) 
     at com.google.api.services.taskqueue.Taskqueue$RemoteRequest.execute(Taskqueue.java:698) 
     at com.google.api.services.taskqueue.Taskqueue$Tasks$Lease.executeUnparsed(Taskqueue.java:297) 
     at com.google.api.services.taskqueue.Taskqueue$Tasks$Lease.execute(Taskqueue.java:282) 
     at br.com.sulamerica.susis.sync.queue.client.impl.GaeTaskQueuePuller.getLeasedTasks(GaeTaskQueuePuller.java:117) 
     at br.com.sulamerica.susis.sync.services.BuscarPropostaGAEServicesImpl.buscaPropostaFilaGAEService(BuscarPropostaGAEServicesImpl.java:82) 
     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:45) 
     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37) 
     at java.lang.reflect.Method.invoke(Method.java:599) 
     at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309) 
     at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183) 
     at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150) 
     at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:50) 
     at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) 
     at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110) 
     at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) 
     at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:89) 
     at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) 
     at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202) 
     at $Proxy158.buscaPropostaFilaGAEService(Unknown Source) 
     at br.com.sulamerica.susis.sync.web.controller.PropostaController.buscaPropostasFilaGAE(PropostaController.java:34) 
     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:45) 
     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37) 
     at java.lang.reflect.Method.invoke(Method.java:599) 
     at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176) 
     at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426) 
     at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414) 
     at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790) 
     at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719) 
     at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644) 
     at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549) 
     at javax.servlet.http.HttpServlet.service(HttpServlet.java:718) 
     at javax.servlet.http.HttpServlet.service(HttpServlet.java:831) 
     at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657) 
     at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:939) 
     at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502) 
     at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179) 
     at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3935) 
     at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:276) 
     at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:931) 
     at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1583) 
     at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186) 
     at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452) 
     at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511) 
     at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305) 
     at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:276) 
     at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214) 
     at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113) 
     at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165) 
     at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217) 
     at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161) 
     at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138) 
     at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204) 
     at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775) 
     at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905) 
     at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1604) 
```

此致！

法比奥·佩鲁奇

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:30:17.717

请在问题跟踪器 [http://code.google.com/p/googleappengine/issues/list](http://code.google.com/p/googleappengine/issues/list)中发布错误， 并包含应用程序 ID 和您的 queue.xml 副本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T06:21:21.570

你用什么做凭据？如果它是 OAuth 令牌，令牌是否可能已过期？

尼克·凡尔纳

# php - js：将base64字符串发送到php服务器页面

> ID：12785914
> 
> 赞同：1
> 
> 时间：2012-10-08T16:45:19.973
> 
> 标签：php, javascript, json, file-upload, base64

我在向服务器发送 base64 图像字符串（嵌入在 json 对象中）时遇到问题。

这是JS代码：

```
var sMimeType;
var id_g;
var tipo_g;
var lang_g;

function fileLoaded(frEvnt){
    var sFBody = frEvnt.target.result;
    var sBodyBase64 = btoa(sFBody);
    var myobj = {my_id: id_g, my_tipo: tipo_g, my_lang:lang_g, img_mime_type: sMimeType, img_base64 :sBodyBase64};
    //$("#error").html(JSON.stringify(myobj));
    $.ajax({
      url: "up_img.php",
      data: JSON.stringify(myobj),
      type: 'POST',
      success:function(a) {/*window.location = tipo_g+".php?l="+lang_g*/alert(a);},
      error:function() {$("#error").html("error")}
    });

}
function Upload(id,tipo){
    lang = document[id].l.value;
    var oFile = document[id].img.files[0];
    id_g = id;
    tipo_g = tipo;
    lang_g = lang;
    if(oFile){
        var oFReader = new FileReader();
        oFReader.onload = fileLoaded;
        sMimeType = oFile.type;
          oFReader.readAsBinaryString(oFile);
    }

} 
```

这是`up_img.php`

```
require_once('dbconn.php');
require_once('../utility/sec.php');

$json = json_decode(file_get_contents("php://input"),true);

$id = "";
$id = $json['my_id'];
$lang = "";
$lang = $json['my_lang'];
$tipo = "";
$tipo = $json['my_tipo'];
$img_mime = "";
$img_mime = $json['img_mime_type'];
$img_base64 = "";
$img_base64 = base64_decode($json['img_base64']);
$event = new event($tipo,$lang);

$event->upload_img($img_base64,$img_mime,$id); 
```

这里是`$event->upload_img($img_base64,$img_mime,$id);`

```
public function upload_img($img,$mime,$id){
        if($this->check_img($id)){
            //$img = str_replace('data:image/png;base64,', '', $img);
            switch($mime){
                case "image/png": case "image/jpeg": case "image/jpg": case "image/gif": case "image/tiff":{
                    $img = str_replace(' ', '+', $img);
                    $data = $img;
                    $ext = explode('/',$mime);
                    $file = $this->get_folder_picture() . md5($id) . '.' . $ext[1];
                    $success = file_put_contents($file, $data);
                    if($success)
                    {
                         $newconn = new event($this->getTipo(),$this->getLang());
                         $newconn->open_conn();
                         $query = sprintf("insert into images (`Id`,`Ext`) values (%d,'%s')",
                            $id,$ext[1]);
                         $q = mysql_query($query,$newconn->getLink());
                         echo mysql_error($newconn->getLink());
                         $newconn->close_conn();

                    }else
                        echo 'Unable to save the file.';
                    break;
                }
                default:{
                    echo "not a valid image. image type accepted are jpge,jpg,png,tiff and gif: u gave ".$mime; 
                    break;
                }

            }

        }else{
            print "image error";    
        }
    } 
```

问题是，一旦我可视化存储在服务器中的图像（图像的路径`<img src=\"$img\" alt='' title='' class='box_img' name='img_view' />`在哪里`$img`），我就会看到类似这样的东西 ![在此处输入图像描述](../Images/c7d368dfccc35707ceaa10ff11457438.png)

但我的原始图像看起来像这样 ![在此处输入图像描述](../Images/74d11b4e9251fb6d92e36924fe8feb53.png)

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T16:48:59.287

找到了解决方案！刚刚删除了该行

```
$img = str_replace(' ', '+', $img); 
```

现在图像看起来一样！！！！

# .net - 为什么 System.Drawing.Drawing2D.Matrix 派生自 MarshalByRefObject？

> ID：12785924
> 
> 赞同：0
> 
> 时间：2012-10-08T16:46:09.820
> 
> 标签：.net, matrix, marshalbyrefobject, drawing2d

为什么从轻量级结构[`Matrix`](http://msdn.microsoft.com/en-us/library/w8s1ct0z.aspx)派生出重量级类？[`MarshalByRefObject`](http://msdn.microsoft.com/en-us/library/system.marshalbyrefobject.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T16:56:32.857

该类实际上是由[GDI+ Flat API操作的非托管结构](http://msdn.microsoft.com/en-us/library/windows/desktop/ms534044%28v=vs.85%29.aspx)[`Matrix`的](http://msdn.microsoft.com/en-us/library/system.drawing.drawing2d.matrix.aspx)包装器。

也就是说，[`System.Drawing`命名空间中的类通常从](http://msdn.microsoft.com/en-us/library/system.drawing.aspx)[`MarshalByRefObject`类](http://msdn.microsoft.com/en-us/library/system.marshalbyrefobject.aspx)派生以方便[`IDisposable`实现](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)，并在 Remoting 中使用时跨应用程序域边界进行自动编组。

这很有可能是因为大多数[GDI 函数](http://msdn.microsoft.com/en-us/library/windows/hardware/ff566543%28v=vs.85%29.aspx)（Windows 窗体控件所依赖的大多数 API）将使用 GDI 矩阵进行转换；使用轻量级、完全托管的代码结构将需要在每次调用方法时跨托管/非托管边界转换该结构。

与仅对调用和句柄进行编组的成本相比，与每当您想对矩阵进行操作时调用和整个结构的成本相比，出于性能原因，可能决定对调用进行编组更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:59:15.057

由于通常的原因，它是一个非托管对象。它也有一个终结器，以防你忘记处理。

GDI+ 的核心是原生 api。C++ 程序的相应头文件是`<gdiplus.h>`，您可以在 Windows SDK 包含目录中找到它。本机 Matrix 类的 MSDN 库文章在[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms534475%28v=vs.85%29.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T16:50:32.607

根据该方法的 MSDN 文档：

> 调用 Dispose 允许将此 Matrix 对象使用的资源重新分配用于其他目的。

通过反射器快速查看显示此代码：

```
private void Dispose(bool disposing)
{
  if (!(this.nativeMatrix != IntPtr.Zero))
    return;
  SafeNativeMethods.Gdip.GdipDeleteMatrix(new HandleRef((object) this, this.nativeMatrix));
  this.nativeMatrix = IntPtr.Zero;
} 
```

# javascript - requirejs按顺序加载东西

> ID：12785930
> 
> 赞同：2
> 
> 时间：2012-10-08T16:46:28.617
> 
> 标签：javascript, requirejs

我对requirejs 2.0感到困惑。在我使用 !order 标签之前，但现在 javascript 没有按顺序加载（除非我运行优化）。显然 orderjs 支持已被删除

如果我有 5 个脚本，并且我需要按顺序加载前三个脚本，我将如何将其与 `shim`?

在我做之前

```
require([
    "order!libraries/file1",
    "order!libraries/file2",
    "order!includes/file3",
    "libraries/file4",
    "libraries/file5"
],
function(){
console.log("All done. Everything loaded. Now we can start the app");
}); 
```

我现在如何将其翻译为requirejs 2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:33:10.130

```
require.config({
  paths: {
    file1: 'libraries/file1',
    file2: 'libraries/file2',
    file3: 'libraries/file3',
    file4: 'libraries/file4',
    file5: 'libraries/file5'
  },
  shim: {
    'file2': ['file1'],
    'file3': ['file2']
  }
});

require([
    "file1",
    "file2",
    "file3",
    "file4",
    "file5"
],
function(){
  console.log("All done. Everything loaded. Now we can start the app");
}); 
```

# java - App Engine Exception，如何在 Android 中捕获

> ID：12785943
> 
> 赞同：1
> 
> 时间：2012-10-08T16:47:19.440
> 
> 标签：java, android, google-app-engine

我正在尝试将 App Engine 与 Google Endpoints 一起使用，但我看到了一个奇怪的行为。如果我通过以下方式抛出异常：

```
throw new Exception("MyException"); 
```

`AsyncTask`然后，如果我在负责与 Endpoint 连接的 android 端捕获它，我根本无法从中获取消息。如果我打电话`e.getMessage()`，我会得到类似的东西：

```
503 Service Unavailable
[ code: "503",
...
message: "MyException"
] 
```

这有点奇怪。有人遇到过这种行为吗？如何在 App Engine 上正确抛出异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T18:14:30.117

你所看到的是正常的和预期的。

App Engine 仅向您的 Android 客户端提供 HTTP 请求。异常不会通过 HTTP 请求“抛出”，您只会得到 HTTP 响应。您必须在 Google App Engine 端捕获异常，并将其转换为适当的 HTTP 错误响应（如果您没有捕获它，默认处理程序会为您提供 503 响应，如您所见）。

在 Android 端，您必须检查错误结果。

# asp.net - 如何访问 ASP.Net 中的自定义文本框属性？

> ID：12785946
> 
> 赞同：5
> 
> 时间：2012-10-08T16:47:28.533
> 
> 标签：asp.net, html, textbox

我正在使用/滥用 CSS 类和自定义 html 属性来为一组文本框提供默认数据。代码前端如下所示（当字段为空白时，使用一些支持的 javascript 来处理检查/设置默认数据）：

`<asp:TextBox ID="TXT_LenderName" class='defaultText' data-default='Institution Name' runat="server"></asp:TextBox>`

这行得通。

我正在研究处理此表单的代码隐藏。我希望能够将 的值`TXT_LenderName.Text`与`data-default`属性的值进行比较，但我一直无法找到获取自定义 html 属性值的方法。建议？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T16:53:09.063

这是经过测试和工作的

```
string customAttrDataDefault = TXT_LenderName.Attributes["data-default"];
txtpassword.Attributes.Add("value","Password value"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T16:51:51.187

试试这个：

```
TXT_LenderName.Attributes["AttributeName"]= value;//here get or set the value. 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-08T16:52:10.267

如果控件（如 TextBox 控件）继承自 System.Web.UI.WebControls.Control 类，则它应该具有 Attributes 属性，该属性是控件属性的名称值对集合。

# visual-studio-2010 - 使用 MSTest 调试时检测到 ReleaseHandleFailed

> ID：12785953
> 
> 赞同：0
> 
> 时间：2012-10-08T16:48:10.377
> 
> 标签：visual-studio-2010, mstest, visual-studio-debugging

当我在调试模式下运行我的单元测试时，我得到一个经常性的异常，如下所示：

![在此处输入图像描述](../Images/cca11c943321a23a62ed756d3e1ef6fd.png)

我单击“继续”，然后测试继续进行，没有任何问题。我要调试的每个测试都必须执行大约 10 到 15 次。如果我简单地运行测试，我不会有任何异常。

无论如何测试都很好，我在经常性异常上单击“继续”，测试优雅地结束。

该异常没有堆栈跟踪。我能得到的所有信息都在那个屏幕截图中。即使我选择“将 MDA 消息复制到剪贴板”，它也与屏幕截图中显示的相同。

该测试首先使用实体​​框架代码，并且每次都删除和创建数据库。

可能是什么问题呢？我没有使用任何类型的加密，但测试连接到 SqlServer 并对其进行一些操作。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:35:36.987

我必须禁用警告：http: [//msdn.microsoft.com/en-us/library/d21c150d.aspx](http://msdn.microsoft.com/en-us/library/d21c150d.aspx)

但我想知道发生了什么。

干杯。

# xaml - GridView（XAML）组中的包装/浮动项目“浮动：左”在最上面的项目上

> ID：12785954
> 
> 赞同：6
> 
> 时间：2012-10-08T16:48:11.217
> 
> 标签：xaml, windows-8

如何根据下图编写在 GridView (XAML-Win8) 组中流动项目的代码？

我目前有一个`TemplateSelector`为第一项选择不同（更大）模板的自定义，但此处指定的流程：

```
<GroupStyle.Panel>
    <ItemsPanelTemplate>
        <q42:WrapPanel Orientation="Horizontal" Width="440" Margin="0,0,80,0"/>
        <!-- also tried VariableSizedWrapGrid -->
    </ItemsPanelTemplate>
</GroupStyle.Panel> 
```

类似地包装项目 1 到 3，但随后将项目 4 放在项目 6 的位置，而不填写项目 4 和 5。

问题变成了；如何编写类似于 css 的代码：

```
.item  { display: inline-block; }
.item1 { float: left; } 
```

，这会使项目像我想要的那样流动？

![我希望流程看起来像什么](../Images/9fcbaa44481343018f6a5eacb5f2708e.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T18:31:27.657

Andreas Hammar 将我与一个可行的解决方案联系起来：

![它看起来像什么](../Images/456bba0ec6de9a4d3e76c9a49df70af6.png)

```
using System.Collections.Generic;
using Application1.Data;
using Windows.Foundation;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;

namespace Application1
{
    public class MyGridView : GridView
    {
        int _rowVal;
        int _colVal;
        readonly List<Size> _sequence;

        public MyGridView()
        {
            _sequence = new List<Size>
                {
                    LayoutSizes.PrimaryItem,
                    LayoutSizes.SecondarySmallItem,
                    LayoutSizes.SecondarySmallItem,
                    LayoutSizes.OtherSmallItem,
                    LayoutSizes.OtherSmallItem, // 5 
                    LayoutSizes.OtherSmallItem,
                    LayoutSizes.SecondaryTallItem, // 7
                    LayoutSizes.OtherSmallItem,
                    LayoutSizes.SecondarySmallItem, // 9
                    LayoutSizes.OtherSmallItem,
                    LayoutSizes.SecondarySmallItem, // 11
                    LayoutSizes.SecondarySmallItem,
                    LayoutSizes.OtherSmallItem,
                    LayoutSizes.OtherSmallItem
                };
        }

        protected override void PrepareContainerForItemOverride(DependencyObject element, object item)
        {
            base.PrepareContainerForItemOverride(element, item);
            var dataItem = item as SampleDataItem;
            var index = -1;

            if (dataItem != null)
            {
                index = dataItem.Group.Items.IndexOf(dataItem);
            }

            if (index >= 0 && index < _sequence.Count)
            {
                _colVal = (int) _sequence[index].Width;
                _rowVal = (int) _sequence[index].Height;
            }
            else
            {
                _colVal = (int) LayoutSizes.OtherSmallItem.Width;
                _rowVal = (int) LayoutSizes.OtherSmallItem.Height;
            }

            VariableSizedWrapGrid.SetRowSpan(element as UIElement, _rowVal);
            VariableSizedWrapGrid.SetColumnSpan(element as UIElement, _colVal);
        }
    }

    public static class LayoutSizes
    {
        public static Size PrimaryItem = new Size(6, 2);
        public static Size SecondarySmallItem = new Size(3, 1);
        public static Size SecondaryTallItem = new Size(2, 2);
        public static Size OtherSmallItem = new Size(2, 1);
    }
} 
```

```
 <local:MyGridView.ItemsPanel>
        <ItemsPanelTemplate>                        
            <VirtualizingStackPanel Orientation="Horizontal"/>
        </ItemsPanelTemplate>
    </local:MyGridView.ItemsPanel>
    <local:MyGridView.GroupStyle>
        <GroupStyle>
            <GroupStyle.HeaderTemplate>
                <DataTemplate>
                    <Grid Margin="1,0,0,6">
                        <Button
                            AutomationProperties.Name="Group Title"
                            Content="{Binding Title}"
                            Click="Header_Click"
                            Style="{StaticResource TextButtonStyle}"/>
                    </Grid>
                </DataTemplate>
            </GroupStyle.HeaderTemplate>
            <GroupStyle.Panel>
                <ItemsPanelTemplate>
                    <VariableSizedWrapGrid ItemWidth="80" ItemHeight="160" Orientation="Vertical" Margin="0,0,80,0" MaximumRowsOrColumns="3"/>
                </ItemsPanelTemplate>
            </GroupStyle.Panel>
        </GroupStyle>
    </local:MyGridView.GroupStyle>
</local:MyGridView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T06:54:48.273

我认为这可以通过 VSWG 来完成。我已经到了一半，但还没有时间完成它......

首先，您需要设置附加的道具 VariableSizedWrapGrid.RowSpan 和 ColSpan - 并且必须通过继承 VSWG 在项目容器上设置：http: [//blogs.u2u.be/diederik/post/2012/03/07/数据绑定到-VariableSizedWrapGrid-in-Windows-8-Metro.aspx](http://blogs.u2u.be/diederik/post/2012/03/07/Databinding-to-the-VariableSizedWrapGrid-in-Windows-8-Metro.aspx)

在您的情况下，第一项为 2x2，其余为 1x1。

单元格大小的测量是在第一个元素上完成的，除非您明确指定 ItemHeight 等。所以你必须以某种方式完成这个:) [http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/569e048a-9f5e-4fb3-870a-380de5906e80](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/569e048a-9f5e-4fb3-870a-380de5906e80) *WG 支持单一尺寸的项目，所有项目都以相同的尺寸显示。VSWG 允许可变大小的项目，但允许的项目大小是基本单元大小的整数倍。WG 和 VSWG 在布局单元中工作。布局单元格的大小由 ItemHeight 和 ItemWidth 属性决定。如果未设置这些属性，则将第一项的大小用作像元大小，然后以该大小测量 WG 的后续项；对于 VSWG，该项目是根据 RowSpan 和 ColumnSpan 属性以单元格大小的整数乘积来衡量的。如果您不希望该项目在列表中排在第一位，您似乎必须设置 VSWG 的高度和宽度以适应最大项目的大小。* --> 这是我没有解决的部分。

最后是水平方向。

祝你好运！

# php - 如何通过单击国家地图图像的一部分来进行 PHP MySQL 搜索

> ID：12785956
> 
> 赞同：1
> 
> 时间：2012-10-08T16:48:16.523
> 
> 标签：php, mysql, search

我正在制作一个网站的搜索功能，其中有一张澳大利亚地图的图像，分为不同的省份。当用户点击特定省份时，它应该显示该地区可用的车辆。我不熟悉可以实现这一点的最合适的技术。

有任何想法吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:50:43.963

您可能希望使用 HTML 图像映射并将图像映射上的每个区域链接到页面，例如：`region.php?regionId=5`

看看：[http ://www.w3schools.com/tags/tag_map.asp](http://www.w3schools.com/tags/tag_map.asp)

有几个免费工具可以帮助您在地图上绘制区域，从而为您生成 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:13:27.300

您可以在 Dreamweaver 中创建图像映射。

[http://help.adobe.com/en_US/dreamweaver/cs/using/WScbb6b82af5544594822510a94ae8d65-7c15a.html](http://help.adobe.com/en_US/dreamweaver/cs/using/WScbb6b82af5544594822510a94ae8d65-7c15a.html)

或使用这样的在线。

[http://www.image-maps.com/](http://www.image-maps.com/)

然后，您可以使用 href 标记将变量传递给 php 页面

href="map.php?regionID=5"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T17:03:05.477

我建议您使用 SVG 格式的地图。如今，所有现代浏览器都支持它。这样您就可以以精确的形式绘制省份，甚至在必要时对其进行缩放。每个省都可以绘制为单个 SVG 路径。

[SVG 支持](http://www.w3.org/TR/SVG/script.html)的功能之一是脚本和事件，包括点击。除此之外，像往常一样，所有逻辑都可以从 PHP 页面生成器“传递”到 JavaScript 事件处理程序中，因此您将获得带有适当参数的 AJAX 请求。

# c++ - 良好的 C++ 驱动程序安装和控制代码

> ID：12785958
> 
> 赞同：0
> 
> 时间：2012-10-08T16:48:29.570
> 
> 标签：c++, kernel, driver

我有一个内核驱动程序 (.sys)，我可以在哪里找到可以用来安装和控制这个驱动程序的好源代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:05:16.037

这是我几年前为安装 NDIS 驱动程序编写的一些代码。它已经在 XP 上进行了测试和使用，但我不确定是否有任何更新的东西。安装不同类型的驱动程序主要需要更改组和依赖项。

```
#define Win32_LEAN_AND_MEAN
#include <windows.h>

void install_NDIS_driver(char const *path, char const *name ) {
// This uses the name as both the driver name and the display name.

    SC_HANDLE manager = OpenSCManager(NULL, NULL, SC_MANAGER_CREATE_SERVICE);
    SC_HANDLE service = CreateService(manager, 
        name,                       // driver name
        name,                       // driver display name
        GENERIC_EXECUTE,            // allow ourselves to start the service.
        SERVICE_KERNEL_DRIVER,      // type of driver.
        SERVICE_SYSTEM_START,       // starts after boot drivers.
        SERVICE_ERROR_NORMAL,       // log any problems, but don't crash if it can't be loaded.
        path,                       // path to binary file.
        "NDIS",                     // group to which this driver belongs.
        NULL,                       
        "NDIS\0",                   // driver we depend upon.
        NULL,                       // run from the default LocalSystem account.
        NULL);                      // don't need a password for LocalSystem .
    // The driver is now installed in the machine.  We'll try to start it dynamically.

    StartService(service, 0, NULL); // no arguments - drivers get their "stuff" from the registry.

    CloseServiceHandle(service);    // We're done with the service handle
    CloseServiceHandle(manager);    // and with the service manager.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:58:47.090

您可以使用[Windows 服务控制器](http://technet.microsoft.com/en-us/library/cc754599%28v=ws.10%29.aspx)来注册和控制内核模式驱动程序。

1.  使用带有 type=kernel 和 binPath 的“sc create”指向您的 .sys 文件来创建服务
2.  使用“sc start”和“sc stop”来控制驱动

# php - PHP会话根据链接开始和结束？

> ID：12785961
> 
> 赞同：-3
> 
> 时间：2012-10-08T16:48:49.520
> 
> 标签：php, mysql

我在页面上有日期、日期和时间等链接。如果有人点击“日期”，我想开始一个会话。然后以同样的方式单击“日”，上一个会话停止并创建一个新会话。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T23:43:22.850

我不确定您*为什么*要为此使用会话，但是是的-使用 AJAX 是可能的。

您定义了两个链接，我们称它们为 start 和 stop 例如：

```
<a id="start">Start</a>
<a id="stop">Stop</a> 
```

然后，您使用 Javascript（此示例将使用[jQuery 库](http://jquery.com/)）向后端处理程序发出请求，该处理程序将适当地调用`session_start()`或`session_stop()`。如果以后必须对其进行某些工作，您可以（可选地）在用户停止会话时对其进行序列化。

首先是一个 AJAX 请求的例子。在页面中，您要建立事件以调用通用函数来发出异步请求以启动或结束用户会话。我们通过创建一个匿名函数来做到这一点，该函数将在 DOM 准备好后运行：

```
<script>
$(document).ready(function() { 
    // Make the request to start or stop a session
    function asyncSessionMolester(uri, val) {
    $.ajax({
        url: uri
        type: 'post',
        dataType: "json",
        cache: false,
        data: {
            'action':session,
            'value':val
        },
        success: function(remoteResponse, textStatus) {
           alert('Session now in mode ' + toggle);
           // do other stuff you want to do on success
        },
        error: function(xhr, desc, err) {
            // There is a lot more data in xhr, this just shows what the server
            // wrote to the browser in the console for debugging.
            // Handle failure here
            console.log(xhr.textResponse);
        }
    });

    // now, our events:

    $('#start').click(function() { 
        asyncSessionMolestor('/ajax.php', 'start');
    }); 

    $('#stop').click(function() {
        asyncSessionMolestor('/ajax.php', 'stop');
    });
});
</script> 
```

现在，您需要创建一些 PHP`/ajax.php`并执行以下操作：

*   如果会话已建立，请确保用户有权请求它
*   检查`HTTP_X_REQUESTED_WITH`标头，如果不存在，则有人通过浏览器直接访问它（如果是，则退出）
*   检查您的 POST 数据中的`action`和`value`。如果行动是`session`那么`switch()`的价值。如果`start`，则开始会话。如果`stop`然后停止会话。
*   发回 JSON 响应，您可以在 ajax 调用中检查该响应

如果您需要保存会话以供以后分析或工作电话`serialize($_SESSION)`，甚至`json_encode($_SESSION)`在销毁它之前。

注意事项：

*   您*必须*正确处理成功。用户需要知道他们不再有会话。也许是成功的重定向。您还应该正确处理故障。我只举了一个粗略的例子。

*   在启动会话之前，您*不得在启动会话的代码中打印任何内容。*

*   您可能不想像现在这样使用会话，但您询问是否可能，并且确实如此。

*   代码未经测试，仅作为示例给出。

*   此示例中未显示任何安全性。至少你需要某种 CSRF 保护，当然还要清理你的输入。

**编辑**

如果您希望根据状态启动/停止相同的链接，您可以设置一个变量来跟踪它，例如：

```
<script>
$(document).ready(function() { 
    var state = false;

    ... ajax stuff as above

    $('#date').click(function() { 
       switch(state) {
           case true:
              // We successfully created or recreated a session
              asyncSessionMolester('/ajax.php', 'stop');
              break;
           case false:
              // User has not yet created a session
              asyncSessionMolester('/ajax.php', 'start');
              break;
       }
    });
});
</script> 
```

您将只有一个链接，其 ID 为`date`. 只要确保 AJAX 函数是更新`state`变量的函数，这取决于调用的成功与否。请记住，它是异步的——您可能希望阻止用户点击快乐。

这应该会让你朝着你想去的方向前进，或者可能说明为什么这可能不是一个好主意。但是，这是实现它的一种方法。

# ruby-on-rails - 需要不断运行的 if/than 语句在哪里？

> ID：12785962
> 
> 赞同：0
> 
> 时间：2012-10-08T16:48:53.520
> 
> 标签：ruby-on-rails, twilio

现在我正在构建一个呼叫跟踪应用程序来学习 rails 和 twilio。该应用程序有2个相关模型；计划模型有_许多用户。计划表也有值 max_minutes。

我希望它做到这一点，以便当特定用户超过他们的 max_minutes 时，他们的子帐户被禁用，我还可以警告他们在视图中升级。

为此，这是我在 User 类中创建的参数

```
 def at_max_minutes?
    time_to_bill=0
    start_time = Time.now - ( 30 * 24 * 60 * 60) #30 days
    @subaccount = Twilio::REST::Client.new(@user.twilio_account_sid, @user.twilio_auth_token)
    @subaccount.calls.list({:page => 0, :page_size => 1000, :start_time => ">#{start_time.strftime("%Y-%m-%d")}"}).each do |call|
      time_to_bill += (call.duration.to_f/60).ceil
    end

    time_to_bill >= self.plan.max_minutes 

  end 
```

这允许我在视图中运行 if/else 语句来敦促他们升级。但是，**我还想在哪里做一个 if/else 语句，如果 at_max_minutes？比用户的 twilio 子帐户被禁用，否则，它被启用。**

我不确定我会把它放在哪里。

它看起来像这样

```
 @client = Twilio::REST::Client.new(@user.twilio_account_sid, @user.twilio_auth_token)
  @account = @client.account
  if at_max_minutes?
    @account = @account.create({:status => 'suspended'})
  else
    @account = @account.create({:status => 'active'})
  end 
```

但是，我不确定我会将这段代码放在哪里，以便它一直处于活动状态。

您将如何实现此代码以使功能正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:56:03.173

如果您希望它“一直处于活动状态”，您将不得不为此检查执行某种预定的后台作业。我推荐[resque](https://github.com/defunkt/resque)和[resque-scheduler](https://github.com/bvandenbos/resque-scheduler)，这是一个非常好的 Rails 调度解决方案。基本上你要做的是做一个工作，它执行你指定的第二个代码块，并让它定期运行（可能每 2 小时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:55:44.307

与其不断计算 at_max_minutes? 中使用的总分钟数，为什么不跟踪用户的已用分钟数，并在转换时将状态设置为“暂停”（当已用分钟数超过 max_minutes 时）。然后您的视图和调用代码只需要检查状态（您可能还希望将状态直接存储在用户身上，以将 API 调用保存到 Twilio）。

添加到用户模型：

```
 used_minutes 
```

每次通话结束时，更新分钟数：

```
def on_call_end( call )
  self.used_minutes += call.duration_in_minutes # this assumes Twilio gives you a callback and has the length of the call)
  save!
end 
```

向用户添加 after_save：

```
after_save :check_minutes_usage

def check_minutes_usage
  if used_minutes >= plan.max_minutes
    @account = @account.create({:status => 'suspended'})
  else
    @account = @account.create({:status => 'active'})
  end
end 
```

# python - 如何将 m2crypto 库导入 python

> ID：12785963
> 
> 赞同：2
> 
> 时间：2012-10-08T16:48:57.477
> 
> 标签：python, m2crypto

我需要与`m2crypto`图书馆合作。如何将其导入到我的`.py`文件中？我使用 Eclipse。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T16:55:48.760

通常只要做`import m2crypto`就足够了

你可能需要`easy_install m2crypto`先或什至`pip install m2crypto`

如果您在 Windows 上，您可能需要 Visual Studio DLL 来编译它

# linux - Makefile 没有重建依赖项？

> ID：12785964
> 
> 赞同：2
> 
> 时间：2012-10-08T16:48:58.620
> 
> 标签：linux, makefile, dependencies, redhat

公平警告：我在使用 makefile 方面有点新手，所以这*可能*是显而易见的。我要做的是使用 make 来运行第三方代码生成工具，当且仅当该生成工具的源文件（称为 .abc 文件）发生更改时。[我在http://www.cmcrossroads.com/ask-mr-make/6795-rebuilding-when-a-files-checksum-changes](http://www.cmcrossroads.com/ask-mr-make/6795-rebuilding-when-a-files-checksum-changes)引用了这个例子，它展示了如何构建 MD5，我稍微调整了这个想法：

文件：abc.mk

```
target = all
files    := $(wildcard Abc/*.abc)
bltfiles := $files $(addsuffix .built,$files)

all: $bltfiles

%.built: %.abc %.abc.md5
    @echo "Building $*"
    @ #Command that generates code from a .abc file
    @touch $@

%.md5: FORCE
    @echo "Checking $* for changes..."
    @ #Command to update the .md5 file, if the sum of the .abc file is different

FORCE: 
```

我打算让每个 .abc 文件有两个辅助文件： .abc.built & .abc.md5 。.built 文件只是最后一次构建的虚拟目标和时间戳，因为生成工具生成的代码不能轻易定义为目标。.md5 文件包含 .abc 文件最后已知内容的哈希值。仅当文件的哈希更改时才应更新它。

但是，.built 文件仅在不存在时才会创建。.md5 规则根本不会运行，即使 .abc 文件具有较新的时间戳，.built 规则也不会重新构建。难道我做错了什么？

**更新：** 为了后代，这是我要工作的版本：

文件：abc.mk

```
# Call this makefile as: make all --file=abc.mk

# Default Target
target = all

COMP_ABC_FILES := $(wildcard Abc/*.abc)
COMP_BLT_FILES := $(COMP_ABC_FILES) $(addsuffix .built, $(COMP_ABC_FILES) )

# This line is needed to keep make from deleting intermediary output files:
.SECONDARY: 

# Targets:
.PHONY: all
all: $(COMP_BLT_FILES)

Abc/%.abc.built: Abc/%.abc Abc/%.abc.md5
    @echo "Building $*"
    @ #Command that generates code from a .abc file
    @touch $@

%.md5: FORCE
    @echo "Checking $* for changes..."
    @$(if $(filter-out $(shell cat $@ 2>/dev/null),$(shell md5sum $*)),md5sum $* > $@)

# Empty rule to force re-build of files:
FORCE:

clean:
    @echo "Cleaning .built & .md5 files..."
    @rm Abc/*.built
    @rm Abc/*.md5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:58:57.287

在三个地方修复你的makefile：

```
target = all
files    := $(wildcard Abc/*.abc)
bltfiles := $(files) $(patsubst %.abc,%.built,$(files))

all: $(bltfiles)

#Abc/%.abc.built: Abc/%.abc Abc/%.abc.md5
%.built: %.abc %.abc.md5
    @echo "Building $*"
    @ #Command that generates code from a .abc file
    @touch $@

%.md5: FORCE
    @echo "Checking $* for changes..."
    @ #Command to update the .md5 file, if the sum of the .abc file is different

FORCE: 
```

注意变化：

1.  `bltfiles := $(files) $(patsubst %.abc,%.built,$(files))`

    结果是“Abc/a.built Abc/b.built”而不是“Abc/a.abc.built Abc/b.abc.built”，考虑到规则的`%.built`定义方式，这是必需的

2.  `all: $(bltfiles)`

    如上所述，with `$(files)`, '$bltfiles' 需要是`$(bltfiles)`，否则 make 会将其解释为`$(f)iles`and `$(b)ltfiles`。

***提示***：这里有一个为 makefile 提供语法高亮的编辑器很好

* * *

### 演示

```
mkdir -pv Abc; touch Abc/{a,b,c,d,e,f,g}.abc
make -Bs -f abc.mk 
```

输出像

```
Checking Abc/e.abc for changes...
Building Abc/e
Checking Abc/g.abc for changes...
Building Abc/g
Checking Abc/b.abc for changes...
Building Abc/b
Checking Abc/f.abc for changes...
Building Abc/f
Checking Abc/a.abc for changes...
Building Abc/a
Checking Abc/c.abc for changes...
Building Abc/c
Checking Abc/d.abc for changes...
Building Abc/d 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:03:46.340

由于 sehe 已修复但未解释：Makefile 语法与 shell 语法不同。默认情况下（由于历史遗失的原因）make 变量只有一个字符长。如果你想要一个更长的变量名，你必须把它放在括号中，这样它才能正确解析。`$files`例如，写入实际上扩展了字符串“iles”，因为 make 只解析和扩展了“f”变量（为空）的值。

是的，这很奇怪。但这是 make 工作的方式。始终将变量放在括号中。

# php - 使用 GET 语句将详细信息传递给 iframe

> ID：12785967
> 
> 赞同：0
> 
> 时间：2012-10-08T16:49:09.487
> 
> 标签：php, mysql

在一个页面上，我有一个社区列表...在单击社区时，我将变量发送到下一页。我可以使用 Get 语句显示有关该项目的各种详细信息。

IE：

`communityname =$_GET['communityname']`在我的 sql 语句中。遇到的问题是在同一页面上的 iframe 上显示与该评论相关的评论。我尝试 `GET (communityname =$_GET['communityname']`在记录集中使用相同的 sql，但似乎没有得到任何传递的变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:13:01.987

您还需要将该变量传递给 iframe src ...

所以 iframe 的 src 应该是

```
<iframe src="localhost/Yheeps/Community/updates.php?communityname=<?php print $_REQUEST['communityname']; ?>"></iframe> 
```

**编辑：**我已更改 src 以满足您的需求......我认为这足以让您解决它。但是，如果您显示更多代码，我可能会更精确。

# java - Java对象序列化问题

> ID：12785968
> 
> 赞同：0
> 
> 时间：2012-10-08T16:49:12.080
> 
> 标签：java, jsp, deserialization

我有一些输入要添加到序列化对象中。

现在，当我读取序列化对象时，我想检查它是否存在......如果不循环直到它有一个值。

我如何修改反序列化函数来处理它。

填充我的可序列化对象基本上存在延迟。因此，与此同时，如果我要读取该对象，它将是空的。我想检查仅当其中有数据时才读取。如果不是，它应该等到它有一些数据

```
public String _displayResults(){
String  SomeData = "";
try {
    FileInputStream fis = new FileInputStream("SomeDataobj");
    ObjectInputStream ois = new ObjectInputStream(fis);
    SomeData = (String)ois.readObject();
    ois.close();
}
catch(Exception e) {
    System.out.println("Exception during deserialization: ");
}
return SomeData;
} 
```

我尝试了什么：

添加等待条件为 2 秒 10 次...有没有更清洁的方法。

```
 while ( ois.readObject().toString().equalsIgnoreCase("") && i <10){
        Thread.sleep(2000);
        i++;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:13:54.070

Java 提供了一个名为 Externalizable 的 API，它允许您自定义（反）序列化。Serialiazable 是标记接口，表示可以将对象写入输出流。Externalizable 提供了两个方法 readExternal() 和 writeExternal() ，您可以在其中覆盖行为。

您的问题对您想要实现的目标不是很清楚，所以我不确定以上信息是否对您有帮助

# java - 运行终止线程java android

> ID：12785971
> 
> 赞同：2
> 
> 时间：2012-10-08T16:49:35.600
> 
> 标签：java, android, multithreading

> **可能的重复：**
> [终止的线程复兴](https://stackoverflow.com/questions/5411509/terminated-thread-revival)

```
 Thread threadWait = new Thread()
    {
        @Override
        public void run() {
            try {
                sleep(10000);
                sync = false;
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }               
    }; 
```

我在这里调用这个线程：

```
 threadWait.start();
        while(sync){
        //do something
        } 
```

当 threadWait 完成时，状态为 TERMINATED。我如何才能再次启动线程？任何想法？谢谢大家！

解决方案：

```
Runnable runWait = new Runnable(){
    public void run(){
        try {
            Thread.sleep(10000);
            sync = false;
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
}; 
```

和..

```
Thread first = new Thread(runWait);
            first.start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:51:57.620

您不能`Thread`多次启动同一个对象。只需新建`Thread`并启动它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:52:15.257

> 我如何才能再次启动线程？

你不能。任何线程只能运行一次。当然，您可以根据需要创建一个新`Thread`线程`Runnable`，然后启动第二个线程......

```
Runnable runnable = new Runnable() {
    // Code as before
};
Thread first = new Thread(runnable);
first.start();
... Maybe the first thread dies...
Thread second = new Thread(runnable);
second.start(); 
```

# opengl - opengl 球体裁剪

> ID：12785974
> 
> 赞同：0
> 
> 时间：2012-10-08T16:50:06.883
> 
> 标签：opengl, glut, clipping

我一直在试验我教科书中的程序，这些程序涉及使用 glOrtho 剪切二维多边形，然后在 gluPerspective 中创建 glutWireSpheres。我的目标是用平面剪裁半个球体，但是我在剪裁 3D 对象时遇到了麻烦。我创建了一个切换按钮来显示被剪裁和未剪裁的球体，但是，我相信该按钮显示球体以椭圆运动移动。

这是我创建球体的绘图场景

```
 double eqn0[4] = {1, 0, 0.0, -60}; // Data for clipping plane 0.

   // Choose window.
   glutSetWindow(id2);
   gluLookAt(0.0, 3.0, 12.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0); 

   glClear(GL_COLOR_BUFFER_BIT);

    glClipPlane(GL_CLIP_PLANE0, eqn0); // Specify clipping plane 0.

   if (isClip0) glEnable(GL_CLIP_PLANE0); // Clip points s.t. z > 0.25.
   else glDisable(GL_CLIP_PLANE0);

   glPushMatrix();
   glColor3f(1.0, 0.0, 0.0);
   glutWireSphere(1.0, 10, 10);
   glPopMatrix();

   glFlush(); 
```

这是我的切换

```
case '0':
         if (isClip0 == 0) isClip0 = 1;
         else isClip0 = 0;
         glutPostRedisplay();
         break; 
```

有人可以帮我找到正确的方向来剪裁 3-D 对象吗？因为这适用于二维多边形，但是当我尝试将其应用于球体时，切换按钮甚至不像切换按钮。

* * *

编辑：完整代码：

```
#include <cmath>
#include <iostream>

#ifdef __APPLE__
#  include <GLUT/glut.h>
#else
#  include <GL/glut.h>
#endif

#define PI 3.14159265

using namespace std;

// Globals.
static int id1, id2; // Window identifiers.
static int isClip0 = 0; // Is clipping plane 0 enabled?
static int isClip1 = 0; // Is clipping plane 1 enabled?
static int isClip3 = 0; // Is clipping plane 0 enabled?
static int isClip4 = 0; // Is clipping plane 1 enabled?

// Drawing routine for first window.
void drawScene1(void)
{
   // Choose window.
   glutSetWindow(id1);

   glClear(GL_COLOR_BUFFER_BIT);

   // A red square.
   glColor3f(1.0, 0.0, 0.0);    
   glBegin(GL_POLYGON);
      glVertex3f(10.0, 10.0, 0.0);
      glVertex3f(40.0, 10.0, 0.0);
      glVertex3f(40.0, 40.0, 0.0);
      glVertex3f(10.0, 40.0, 0.0);
   glEnd();

   glFlush();
}

// Drawing routine for second window.
void drawScene2(void)
{

   double eqn0[4] = {1, 0, 0.0, -1000}; // Data for clipping plane 0.

   // Choose window.
   glutSetWindow(id2);

   gluLookAt(0.0, 3.0, 12.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0); 

   glClear(GL_COLOR_BUFFER_BIT);

    glClipPlane(GL_CLIP_PLANE0, eqn0); // Specify clipping plane 0.

   if (isClip0) glEnable(GL_CLIP_PLANE0); // Clip points s.t. z > 0.25.
   else glDisable(GL_CLIP_PLANE0);

   glPushMatrix();
   glColor3f(1.0, 0.0, 0.0);
   glutWireSphere(1.0, 10, 10);
   glPopMatrix();

   glFlush();
}

// Initialization routine for first window.
void setup1(void) 
{
   // Black background.
   glClearColor(0.0, 0.0, 0.0, 0.0);
}

// Initialization routine for second window.
void setup2(void) 
{
   // Green background.
   glClearColor(1.0, 1.0, 1.0, 0.0);
}

// Reshape routine for first window.
void resize1(int w, int h)
{
   glViewport(0, 0, (GLsizei) w, (GLsizei) h);
   glMatrixMode(GL_PROJECTION);
   glLoadIdentity();

   // Non-square aspect ratio squashes the square.
   glOrtho(0.0, 50.0, 0.0, 100.0, -1.0, 1.0);

   glMatrixMode(GL_MODELVIEW);
   glLoadIdentity();
}

// Reshape routine for second window.
void resize2(int w, int h)
{
   glViewport (0, 0, (GLsizei)w, (GLsizei)h);
   glMatrixMode (GL_PROJECTION);
   glLoadIdentity();
   gluPerspective(60.0, (float)w/(float)h, 1.0, 50.0);
   glMatrixMode(GL_MODELVIEW);
   glLoadIdentity();

}

// Keyboard input processing routine shared by both windows.
void keyInput(unsigned char key, int x, int y)
{
   switch(key) 
   {
      case 27:
         exit(0);
         break;
        case '0':
         if (isClip0 == 0) isClip0 = 1;
         else isClip0 = 0;
         glutPostRedisplay();
         break;
      default:
         break;
   }
}

// Main routine.
int main(int argc, char **argv) 
{
   glutInit(&argc, argv);
   glutInitDisplayMode (GLUT_SINGLE | GLUT_RGB);

   // First top-level window definition.
   glutInitWindowSize(250, 500); 
   glutInitWindowPosition(100, 100);

   // Create the first window and return id.
   id1 = glutCreateWindow("windows.cpp - window 1"); 

   // Initialization, display, and other routines of the first window. 
   setup1();
   glutDisplayFunc(drawScene1); 
   glutReshapeFunc(resize1);
   glutKeyboardFunc(keyInput); // Routine is shared by both windows.

   // Second top-level window definition.
   glutInitWindowSize(250, 500); 
   glutInitWindowPosition(400, 100);

   // Create the second window and return id.
   id2 = glutCreateWindow("windows.cpp - window 2"); 

   // Initialization, display, and other routines of the second window. 
   setup2(); 
   glutDisplayFunc(drawScene2); 
   glutReshapeFunc(resize2);
   glutKeyboardFunc(keyInput); // Routine is shared by both windows.

   glutMainLoop();

   return 0;   
} 
```

球体在drawScene2中处理

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:24:17.337

因此，在 gluLookAt() 之前添加一个 glLoadIdentity() 之后，这些动作就会消失（正如我已经建议的......）。当设置一个有用的剪裁平面方程时，剪裁也会按预期工作。当您围绕对象空间中心定义半径为 1 的球体时，设置

```
 GLdouble eqn0[4] = {1, 0, 0.0, 0.5}; 
```

将导致球体在 x=-0.5 处被剪裁，因此它的 3/4 仍然可见，正如人们所期望的那样。

# objective-c - 从数组中读取字符串然后更改字符串并输出新结果

> ID：12785977
> 
> 赞同：0
> 
> 时间：2012-10-08T16:50:14.040
> 
> 标签：objective-c, cocoa, nsmutablearray

我试图在我的数组中获取一个字符串，将字符串中的第 n 个字母更改为？，然后在文本字段中打印结果。问题是我的 NSMutableArray 被存储到 UIPickerView 中，我认为最好从 PickerView 读取字符串，然后更改第 n 个字符并打印结果。我正在努力解决如何从选择器中获取字符串并更改第 n 个字母。

```
 - (UIView *)viewForRow:(NSInteger)row forComponent:(NSInteger)component
    {
    if (row == 0 ) {
     NSString *originalStringTwo = @"%@", *arrayDictionary;
    NSRange two = [originalStringTwo rangeOfString:@"2"];
    NSString *newStringTwo = [originalStringTwo stringByReplacingCharactersInRange:two        withString:@"?"];

    _resultLabel.text = newStringTwo;
    }

    if (row == 1 ) {
    NSString *originalStringThree = @"%@", *arrayDictionary;
    NSRange three = [originalStringThree rangeOfString:@"3"];
    NSString *newStringThree = [originalStringThreestringByReplacingCharactersInRange:three withString:@"?"];

    _resultLabel.text = newStringThree;
    }

    if ( row == 2 ) {
    NSString *originalStringFour = @"%@", *arrayDictionary;
    NSRange four = [originalStringFour rangeOfString:@"4"];
    NSString *newStringFour = [originalStringFour stringByReplacingCharactersInRange:four withString:@"?"];

   _resultLabel.text = newStringFour;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:55:33.040

这不是您创建`NSRange`. 改为使用`NSMakeRange`。

```
// Range from index 1 with length 1, eg. 2nd character:
NSRange two = NSMakeRange(2, 1);
NSString *newStringTwo = [originalStringTwo stringByReplacingCharactersInRange:two
                          withString:@"?"]; 
```

请注意，从 GUI 元素（用户输入除外）中获取任何数据绝不是一个好主意。如果文本字段应用自定义格式怎么办？

您应该将数据保存在数组中并使用它。

# java - 在运行时修改抽象方法的返回值

> ID：12785983
> 
> 赞同：1
> 
> 时间：2012-10-08T16:50:37.617
> 
> 标签：java, abstract

是否可以在运行时修改抽象方法的返回值？

例如：

```
public abstract class Task {
    public abstract boolean validate();

    public void setValidate(boolean b) {
        /* modify the return value of 'validate' method */
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:51:20.127

为什么不只是有一个`boolean`字段`Task`，`validate`返回该字段的值，并`setValidate`更改该值？

```
public abstract class Task {
  private boolean isValid;
  public boolean validate() { return isValid; }
  public void setValidate(boolean b) { isValid = b; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:47:20.027

唉，如果你能（很容易，无论如何）。但是，如果您可以修改抽象类和子类，则有一种解决方法。让子类`protected`改为实现一个方法，然后让你的方法在验证之前`validate()`检查值。`validate`您可能还应该创建`validate()`一个最终方法，就像我在示例中所做的那样，以便子类无法将其更改为*不*检查变量。当然，这取决于你。

这是解决方法的代码：

```
public abstract class Task {

    private boolean validate = true;

    public final boolean validate() {
        // Assumes that no validation means validation always passes
        return validate ? validateImpl() : true;
    }

    protected abstract boolean validateImpl();

    public void setValidate(boolean validate) {
        this.validate = validate;
    }
} 
```

# jquery - jquery 滑块 - 在图像之间滑动，将不透明度从 100 设置为 0

> ID：12785987
> 
> 赞同：0
> 
> 时间：2012-10-08T16:50:51.233
> 
> 标签：jquery

我正在尝试使用 jquery 滑块从 1-100 滑动并将 4 个图像的不透明度设置在彼此之上。

到目前为止，这是我的代码：http: [//jsfiddle.net/AtaMQ/](http://jsfiddle.net/AtaMQ/)目前已损坏

我想我可以更新这条线`$('.node:lt(' + step + ')').opacity(ui.value -10);`以降低顶部图像的不透明度 -10 沿着滑动条的每一步，但这不起作用。

我应该使用透明度，还是这也不正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:00:05.530

试试[这个](http://jsfiddle.net/AtaMQ/1/)。您需要使用`.css('opacity',value)`，因为没有`.opacity()`方法，并且值应该是介于零和一之间的数字。

```
$('#slider').slider({
    min: 0,
    range: "max",
    max: 1,
    step: 0.01,
    slide: function(event, ui) {
        $('.node').removeClass('highlight');
        var step = Math.floor(ui.value + .5);
        $('.node').css('opacity', 1-ui.value); // from 1 to 0 instead of 0 to 1
    }
}); 
```

# ios - 如何从 Foursquare API 获取所有“托管”场所的列表

> ID：12785990
> 
> 赞同：0
> 
> 时间：2012-10-08T16:51:15.483
> 
> 标签：ios, foursquare

我目前正在使用 Foursquare API 来查询场地列表。

但是，我需要查询一些“管理”的特定场所。（托管是指所有者拥有 Foursquare 帐户并使用 Foursquare 开展业务的场所）

但是，我无法使用“https://developer.foursquare.com/docs/venues/managed”中的方式来获取结果，因为它仅适用于当前用户。

我检查了场地搜索响应，发现有一个名为“已验证”的值（https://developer.foursquare.com/docs/responses/venue）。这意味着“管理”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:40:57.663

“已验证”属性表示场地已被其所有者认领。有关更多信息，请参阅[https://developer.foursquare.com/docs/responses/venue](https://developer.foursquare.com/docs/responses/venue)。

# database - 跨 resque worker 的持久数据库连接

> ID：12785992
> 
> 赞同：0
> 
> 时间：2012-10-08T16:51:22.870
> 
> 标签：database, postgresql, sinatra, resque

我正在设置一个 sinatra 应用程序，它会产生 resque 工作人员以在数据库上执行插入操作。

我不希望每个工作人员都必须打开和关闭新连接。

如何让每个工作人员在不打开自己的连接的情况下在数据库上执行插入？或者打开连接是一件安全的事情，可以快速并行地进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:53:43.370

我已经成功地使用`https://github.com/samgranieri/resque-jobs-per-fork`gem 让每个工作人员处理多个工作，这提高了效率，而不是让每个工作人员设置和拆除。`resque-jobs-per-fork`是一种持久连接的迂回方式。

# javascript - 使用 Javascript 获取动态创建的文本框的值时返回错误值

> ID：12785993
> 
> 赞同：0
> 
> 时间：2012-10-08T16:51:22.987
> 
> 标签：javascript, html

我已经使用 JavaScript 向我的 ASP.NET 表动态添加了一些行，我的行包含文本框（实际上是跨度），它是我的文本框 HTML，它被添加到我的表中：

```
 var spanCount = document.createElement("span");
           spanCount.innerHTML = "<input style=\"width:30px\" type=\"text\" name=\"count\" value=1>"; 
```

后来我更改了这个文本框的默认值（默认值为 1），我想使用 JavaScript 获取这个动态创建的文本框的当前值，我使用下面的代码来获取它的值，但我总是得到 1（默认值），我想要这个文本框的当前值：

```
alert(document.getElementById('<%=tblFoodList.ClientID %>').rows[1].cells[3].firstChild.innerHTML); 
```

但我得到以下 HTML（我可以解析它的值）：

```
<input style="width:30px" name="count" value="1" type="text" 
```

如您所见，value="1"，但我已经更改了值，有什么方法可以获取此跨度的当前值（或 HTML）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:03:37.860

您应该使用`.value`而不是`.innerHTML`获取输入的文本值。

假设您的结构：

```
alert(document.getElementById('<%=tblFoodList.ClientID%>') // this is your table
  .rows[1] // second row
  .cells[3] // third column
  .firstChild // the span you created
  .firstChild // the input
  .value // the value of the input
); 
```

# java - Xuggler 直播延迟和高 CPU 使用率

> ID：12785995
> 
> 赞同：2
> 
> 时间：2012-10-08T16:51:32.503
> 
> 标签：java, performance, delay, xuggler

我目前正在使用 Xuggler 接收 AR.Drone 的视频流。流格式为 H.264 720p。我可以使用以下代码解码和显示视频，但处理器使用率非常高（双核 2ghz 为 100%），并且流中存在巨大的延迟，并且不断增加。

```
 final IMediaReader reader = ToolFactory.makeReader("http://192.168.1.1:5555");
        reader.setBufferedImageTypeToGenerate(BufferedImage.TYPE_3BYTE_BGR);

        MediaListenerAdapter adapter = new MediaListenerAdapter()
        {
            public void onVideoPicture(IVideoPictureEvent e)
            {
                currentframe = e.getImage();
                //Draw frame
            }

            public void onOpenCoder(IOpenCoderEvent e) {
                videostreamopened = true;
            }
        };

        reader.addListener(adapter);

        while (!stop) {
            try {
                reader.readPacket();
            } catch(RuntimeException re) {
                // Errors happen relatively often
            }
        } 
```

使用 Xuggler 示例应用程序不能解决任何问题，所以我认为我的方法是正确的。此外，当我将分辨率降低到 360p 时，流是实时的，一切正常。有谁知道这种性能问题是否正常或我必须做些什么来避免这种情况？我对此*很*陌生，我一直无法找到信息，所以有人有建议吗？

顺便说一句，我尝试更改比特率但没有成功。呼叫`reader.getContainer().getStream(0).getStreamCoder().setBitRate(bitrate);`似乎被忽略了...

提前致谢！

**更新：** 我得到了很多这样的错误：

```
9593 [Thread-7] ERROR org.ffmpeg - [h264 @ 0x7f12d40e53c0] mmco: unref short failure
39593 [Thread-7] ERROR org.ffmpeg - [h264 @ 0x7f12d40e53c0] number of reference frames (0+2) exceeds max (1; probably corrupt input), discarding one
39593 [Thread-15] ERROR org.ffmpeg - [h264 @ 0x7f12d40e53c0] reference overflow
39593 [Thread-15] ERROR org.ffmpeg - [h264 @ 0x7f12d40e53c0] decode_slice_header error 
```

**更新 2：**更改编解码器可以解决上述错误，但性能仍然很差。