# StackOverflow 问答 13934000-13934999

# simulator - Blackberry 10 Alpha 模拟器卡在 MacBook 上

> ID：13934000
> 
> 赞同：0
> 
> 时间：2012-12-18T13:24:19.497
> 
> 标签：simulator, alpha, blackberry-10

我尝试运行 BB10 Alpha Simulator，它在 `starting service: screen`. 我等了大约 1 小时，但什么也没发生。如果我尝试在安全模式下运行它，它可以工作，但真的很慢！

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T06:18:29.267

BB 10 模拟器的性能真的取决于你的系统显卡。但是一旦模拟器启动永远不要关闭虚拟机总是暂停以快速启动模拟器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:17:41.940

我朗姆酒 MAC OS X 10.7.5、VMware 5.0.2，并运行 GOLD SDK 模拟器。但我想我找到了答案。我的显卡性能真的很低。它以安全模式启动，因为视频加速被禁用！

# node.js - 在 ember.js 中处理安全性

> ID：13934001
> 
> 赞同：3
> 
> 时间：2012-12-18T13:24:23.353
> 
> 标签：node.js, knockout.js, ember.js

我想开始在客户端使用 ember.js 与服务器端的 node.js 构建一些严肃的应用程序。我知道在客户端处理安全性是一件坏事（这是连接用户的角色？他是管理员还是普通用户？），所以我想在服务器端维护安全逻辑，但我想知道如何使用诸如 ember/knockout 之类的框架正确处理它......让服务器创建令牌，这些令牌将为每次后续调用传递，还是有其他方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T18:19:30.817

通常，您会有一个用户登录的 url（REST 或“经典”网页），并且在响应中服务器会发回一个 cookie。

从那时起，浏览器将始终将该 cookie 发送回原始域。

您的服务器将有一些中间件来检查此 cookie 在每个请求上是否有效，并使用 HTTP 401 代码允许请求通过或拒绝请求。

您的客户端 javascript 代码必须处理此 401 响应错误，并且在此处理程序中，您将显示/重定向到适当的 ui 以登录用户（返回）。

这意味着您不必传递特殊的令牌，您的 cookie 就是令牌，并在请求和响应 HTTP 标头中传递。

# c++ - 使用用户提示的输入文件显示时，输出控制台立即关闭

> ID：13934005
> 
> 赞同：-3
> 
> 时间：2012-12-18T13:24:27.450
> 
> 标签：c++, io, ifstream

> **可能重复：**
> [如何阻止 C++ 控制台应用程序立即退出？](https://stackoverflow.com/questions/2529617/how-to-stop-c-console-application-from-exiting-immediately)

我正在使用 fstream 从用户那里收集输入文件。不幸的是，控制台仅短暂显示。

```
string filename;
cout << "input file" << endl ;

getline(cin,filename);

ifstream inputfile;
inputfile.open(filename);

char file_character ;
int counter = 0;

while (inputfile>> file_character) {

    inputfile.get(file_character);
    cout << file_character;

    //not what I'm totally doing but instead a quick example
    if (file_character == 'a')
    {
        counter++;
    }
}
cout << counter << endl;
inputfile.close();
return 0; 
```

我需要读取输入文件中的每个字母并对每个字符进行多次检查。为什么我的控制台无法保持打开状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:37:02.670

您可以尝试从控制台启动程序。或者，您可以在退出之前暂停程序`main`：例如，您可以等待用户输入字符，或设置几秒钟的时间延迟。

顺便说一句，您的程序中有一个错误。`while (inputfile >> file_character)`已经将字符读入变量，所以当你`inputfile.get(file_character)`再次阅读时，你会丢失一半的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:27:43.090

使用 Windows，控制台在程序退出时关闭。

在程序末尾追加`system("Pause");`，它会提示在退出之前按下一个键。

一个通用的解决方案（适用于任何系统）是从用户那里读取一个字符来`std::getchar();`代替 windows 独占`system("pause");`

# android - 操作栏下的进度条

> ID：13934010
> 
> 赞同：79
> 
> 时间：2012-12-18T13:24:56.670
> 
> 标签：android, android-actionbar, android-progressbar

**问题总结：**如何在 Chrome 应用程序上进行`ProgressBar`集成？`ActionBar`

**详细信息：**查看 Chrome 的此屏幕截图：

![适用于 Android 的 Chrome 屏幕截图](../Images/e7c652a6b536d6ae8e9d59af2ba70565.png)

我想像这样创建一个操作栏。就在操作栏下方，有一个根据页面加载填充的进度条。我从许多应用程序（例如 Feedly）中看到了这个示例，但我无法创建自己的实现。我尝试使用 Android 自己的 API 来创建它：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    //Request Permission to display the Progress Bar...
    this.requestWindowFeature(Window.FEATURE_PROGRESS);
            this.setWindowContentView(R.layout.activity_main)
    super.onCreate(savedInstanceState);

    this.setProgressBarIndeterminate(true);
} 
```

但是这段代码只会导致 ProgressBar 显示**在**Action Bar 上，如下所示：

![我的应用截图](../Images/1eac7215031ff96131cdb4b0661d5cb5.png)

那么，我怎样才能让我的 ProgressBar 出现在 Action Bar 下，就像在 Chrome 应用程序上一样？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2014-06-08T03:13:32.263

我对上面接受的答案并不完全满意，所以我自己做了一些额外的研究。

我相信他们使用的技巧是他们在调用的视图层次结构中检索顶部视图并在其中`DecorView`添加进度条。这样，进度条会同时显示在操作栏和内容区域上。请注意，SD 的答案将进度条放入内容区域并从实际内容中“窃取”空间，这可能会导致意外结果。

此实现的示例**屏幕截图**：

![进度条](../Images/87d6c640e80eec032c03a1bbe91e4b3c.png)

![进度条不确定](../Images/a564363b9ce562396c8c57658a93f3dd.png)

## 代码

只需将此代码放入`onCreate`某些活动的方法中，它应该可以工作：

```
// create new ProgressBar and style it
final ProgressBar progressBar = new ProgressBar(this, null, android.R.attr.progressBarStyleHorizontal);
progressBar.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, 24));
progressBar.setProgress(65);

// retrieve the top view of our application
final FrameLayout decorView = (FrameLayout) getWindow().getDecorView();
decorView.addView(progressBar);

// Here we try to position the ProgressBar to the correct position by looking
// at the position where content area starts. But during creating time, sizes 
// of the components are not set yet, so we have to wait until the components
// has been laid out
// Also note that doing progressBar.setY(136) will not work, because of different
// screen densities and different sizes of actionBar
ViewTreeObserver observer = progressBar.getViewTreeObserver();
observer.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
    @Override
    public void onGlobalLayout() {
        View contentView = decorView.findViewById(android.R.id.content);
        progressBar.setY(contentView.getY() - 10);

        ViewTreeObserver observer = progressBar.getViewTreeObserver();
        observer.removeOnGlobalLayoutListener(this);
    }
}); 
```

您可以使用 LayoutParams 的 height 参数将 progressBar 设置得更宽或更窄，但您可能需要调整`-10`偏移量。

## 造型

不幸的是，您可以看到进度条丑陋的灰色背景。要删除它，只需按 id 搜索背景并尝试隐藏它是行不通的。要删除背景，我必须创建与系统版本相同的 drawble 并删除背景项。

TL;DR：创建文件`progress_horizontal_holo_no_background_light.xml`并粘贴此可绘制对象：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:id="@android:id/secondaryProgress">
        <scale android:scaleWidth="100%"
               android:drawable="@drawable/progress_secondary_holo_light" />
    </item>

    <item android:id="@android:id/progress">
        <scale android:scaleWidth="100%"
               android:drawable="@drawable/progress_primary_holo_light" />
    </item>

</layer-list> 
```

将适当的 .png 可绘制对象复制`sdk/platforms/android-xx/data/res/drawable-xxx/`到您的项目中，然后在您可以添加的代码中：

```
progressBar.setProgressDrawable(getResources().getDrawable(R.drawable.progress_horizontal_holo_no_background_light)); 
```

### 额外：不确定的进度条

KitKat 之前版本的不确定进度条非常丑陋和滞后。您可以下载名为`ButteryProgressBar`. 只需在谷歌上搜索它（我不能再发布任何链接，因为我是新来的：[），将类添加到您的项目中，您可以简单地用这段代码替换以前的 ProgressBar 并获得清晰的不确定进度条：

```
final ButteryProgressBar progressBar = new ButteryProgressBar(this);
progressBar.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, 24)); 
```

您可能还需要简化此代码：

```
final TypedArray ta = c.obtainStyledAttributes(attrs, R.styleable.ButteryProgressBar);
try {
    mBarColor = ta.getColor(R.styleable.ButteryProgressBar_barColor,
            c.getResources().getColor(android.R.color.holo_blue_light));
    mSolidBarHeight = ta.getDimensionPixelSize(
            R.styleable.ButteryProgressBar_barHeight,
            Math.round(DEFAULT_BAR_HEIGHT_DP * mDensity));
    mSolidBarDetentWidth = ta.getDimensionPixelSize(
            R.styleable.ButteryProgressBar_detentWidth,
            Math.round(DEFAULT_DETENT_WIDTH_DP * mDensity));
} finally {
    ta.recycle();
} 
```

到这段代码：

```
mBarColor = c.getResources().getColor(android.R.color.holo_blue_light);
mSolidBarHeight = Math.round(DEFAULT_BAR_HEIGHT_DP * mDensity);
mSolidBarDetentWidth = Math.round(DEFAULT_DETENT_WIDTH_DP * mDensity); 
```

希望我有所帮助:)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-25T18:19:53.050

从以下类扩展活动以在每个类的顶部（在 ActionBar 下方）有一个 ProgressBar，以及一个`getProgressBar()`方法：

父类：

```
public abstract class ProgressActivity extends Activity {
    private ProgressBar mProgressBar;

    @Override
    public void setContentView(View view) {
        init().addView(view);
    }

    @Override
    public void setContentView(int layoutResID) {
        getLayoutInflater().inflate(layoutResID,init(),true);
    }

    @Override
    public void setContentView(View view, ViewGroup.LayoutParams params) {
        init().addView(view,params);
    }

    private ViewGroup init(){
        super.setContentView(R.layout.progress);
        mProgressBar = (ProgressBar) findViewById(R.id.activity_bar);
        return (ViewGroup) findViewById(R.id.activity_frame);
    }

    protected ProgressBar getProgressBar(){
        return mProgressBar;
    }
} 
```

布局（progress.xml）：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:orientation="vertical"
    android:layout_width="match_parent" android:layout_height="match_parent">
<ProgressBar android:id="@+id/activity_bar"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="-8dp"
    style="@android:style/Widget.DeviceDefault.ProgressBar.Horizontal"
    />
  <FrameLayout android:id="@+id/activity_frame"
      android:layout_width="match_parent"
      android:layout_height="fill_parent"
      />
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-02-20T17:30:35.320

这是现在可以使用[SwipeRefreshLayout](https://developer.android.com/reference/android/support/v4/widget/SwipeRefreshLayout.html)获得的本机行为。

你可以用 a 包裹你的可滚动视图，`SwipeRefreshLayout`然后你只需要监听*onRefresh*事件：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    swipeLayout = (SwipeRefreshLayout) findViewById(R.id.swipe_container);
    swipeLayout.setOnRefreshListener(this);
    swipeLayout.setColorScheme(android.R.color.holo_blue_bright, 
            android.R.color.holo_green_light, 
            android.R.color.holo_orange_light, 
            android.R.color.holo_red_light);
}

@Override public void onRefresh() {
    new Handler().postDelayed(new Runnable() {
        @Override public void run() {
            swipeLayout.setRefreshing(false);
        }
    }, 5000);
} 
```

可以在[此博客](http://antonioleiva.com/swiperefreshlayout/)中找到一个不错且简单的教程。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-07-26T17:20:54.690

我已经从这个线程以及 StackOverflow 上的其他线程编译了代码，并创建了一个可用于实现 ButteryProgessbar 以及“下拉刷新”的项目。[https://github.com/pauldmps/Gmail-like-Pull-Down-to-Refresh](https://github.com/pauldmps/Gmail-like-Pull-Down-to-Refresh)

随意在您的应用程序中使用代码。

非常感谢你们。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-05-12T12:47:04.920

请使用以下代码。只需在进度条中使用一种默认样式`style="?android:attr/progressBarStyleHorizontal"`

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    >
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" />
    <ProgressBar 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        style="?android:attr/progressBarStyleHorizontal"
        android:indeterminate="true"

        />

</RelativeLayout> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-06T20:23:28.407

好吧，我为我的一个宠物应用程序做了类似的事情，但不确定这是唯一的方法还是最好的方法，但它确实有效。

首先，使用叠加操作栏，然后将背景可绘制对象设置为“null”，以便叠加操作栏是透明的。

现在在您的活动布局中，将根视图的上边距设置为“操作栏高度”您可以这样做。

```
<RelativeLayout
    ...
    android:layout_marginTop="?android:attr/actionBarSize" /> 
```

现在该操作不会隐藏您的任何活动内容。

您现在要做的下一件事是 - 在根视图顶部添加一个标题视图，其高度与操作栏相同。为其设置背景颜色。现在这将是您的操作栏的颜色，并且由于操作栏在此标题视图的顶部完美对齐。

现在，您可以轻松地在标题视图中放置一个进度条，并将其与标题视图的底部对齐。对用户来说，这看起来好像进度条在操作栏本身上，就像 chrome ..

# iphone - Iphone 应用程序：需要 2-3 秒来旋转大图像

> ID：13934012
> 
> 赞同：0
> 
> 时间：2012-12-18T13:24:56.823
> 
> 标签：iphone, objective-c, ios, uiimagepickercontroller, uiimageorientation

我正在使用这种方法来解决从相机捕获的图像的方向问题（默认情况下图像向左旋转 90 度）。但是对于高分辨率图像，这需要大约 2-3 秒的旋转时间。

```
@implementation UIImage (fixOrientation)

- (UIImage *)fixOrientation {

    // No-op if the orientation is already correct
    if (self.imageOrientation == UIImageOrientationUp) return self;

    // We need to calculate the proper transformation to make the image upright.
    // We do it in 2 steps: Rotate if Left/Right/Down, and then flip if Mirrored.
    CGAffineTransform transform = CGAffineTransformIdentity;

    switch (self.imageOrientation) {
        case UIImageOrientationDown:
        case UIImageOrientationDownMirrored:
            transform = CGAffineTransformTranslate(transform, self.size.width, self.size.height);
            transform = CGAffineTransformRotate(transform, M_PI);
            break;

        case UIImageOrientationLeft:
        case UIImageOrientationLeftMirrored:
            transform = CGAffineTransformTranslate(transform, self.size.width, 0);
            transform = CGAffineTransformRotate(transform, M_PI_2);
            break;

        case UIImageOrientationRight:
        case UIImageOrientationRightMirrored:
            transform = CGAffineTransformTranslate(transform, 0, self.size.height);
            transform = CGAffineTransformRotate(transform, -M_PI_2);
            break;
        case UIImageOrientationUp:
        case UIImageOrientationUpMirrored:
            break;
    }

    switch (self.imageOrientation) {
        case UIImageOrientationUpMirrored:
        case UIImageOrientationDownMirrored:
            transform = CGAffineTransformTranslate(transform, self.size.width, 0);
            transform = CGAffineTransformScale(transform, -1, 1);
            break;

        case UIImageOrientationLeftMirrored:
        case UIImageOrientationRightMirrored:
            transform = CGAffineTransformTranslate(transform, self.size.height, 0);
            transform = CGAffineTransformScale(transform, -1, 1);
            break;
        case UIImageOrientationUp:
        case UIImageOrientationDown:
        case UIImageOrientationLeft:
        case UIImageOrientationRight:
            break;
    }

    // Now we draw the underlying CGImage into a new context, applying the transform
    // calculated above.
    CGContextRef ctx = CGBitmapContextCreate(NULL, self.size.width, self.size.height,
                                             CGImageGetBitsPerComponent(self.CGImage), 0,
                                             CGImageGetColorSpace(self.CGImage),
                                             CGImageGetBitmapInfo(self.CGImage));
    CGContextConcatCTM(ctx, transform);
    switch (self.imageOrientation) {
        case UIImageOrientationLeft:
        case UIImageOrientationLeftMirrored:
        case UIImageOrientationRight:
        case UIImageOrientationRightMirrored:
            // Grr...
            CGContextDrawImage(ctx, CGRectMake(0,0,self.size.height,self.size.width), self.CGImage);
            break;

        default:
            CGContextDrawImage(ctx, CGRectMake(0,0,self.size.width,self.size.height), self.CGImage);
            break;
    }

    // And now we just create a new UIImage from the drawing context
    CGImageRef cgimg = CGBitmapContextCreateImage(ctx);
    UIImage *img = [UIImage imageWithCGImage:cgimg];
    CGContextRelease(ctx);
    CGImageRelease(cgimg);
    return img;
}

@end 
```

那么我该如何解决这个时间延迟问题。

谢谢， Laxmilal Menaria

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:30:25.430

试试这个代码..

```
 [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1.0];///set delay time here
    CGAffineTransform transform = CGAffineTransformMakeRotation(-3.14);
    transform = CGAffineTransformRotate(transform, -3.14);
    pictureView.transform = transform;
    [UIView commitAnimations]; 
```

可能是你从这段代码中得到的想法..

希望这可以帮助你...

# .net - 如何更改 Microsoft 图表控件的最小值和最大值？

> ID：13934016
> 
> 赞同：1
> 
> 时间：2012-12-18T13:25:00.850
> 
> 标签：.net, winforms, charts, mschart, microsoft-chart-controls

我所有的值都在 1.5 和 1.6 之间，但图表控件绘制图表以适应从 0 到 2 的值。结果图表看起来很丑陋且难以阅读：

![在此处输入图像描述](../Images/7c7b11fc95f718afc9b5e14c223854ad.png)

如何让它显示得更充分？我还没有找到任何负责设置域的属性。如果我可以将控件配置为自动计算最小值和最大值，但手动设置它们总比没有好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:43:07.140

您可以尝试通过设置以下属性`ChartAreas`

```
Chart1.ChartAreas[0].AxisY.Minimum = 1.5;
Chart1.ChartAreas[0].AxisY.Maximum = 1.6; 
```

# sql-server-2008 - bcp.exe 输出中的不可打印字符

> ID：13934017
> 
> 赞同：0
> 
> 时间：2012-12-18T13:25:00.757
> 
> 标签：sql-server-2008, csv, bcp

我想要的是使用批处理作业转储三个 MSSQL Server 表。我四处搜索，发现 bcp 强烈推荐用于此类工作。查看文档，似乎我想要转储整个表，因为我想要所有数据，而不是子集。

我正在使用以下命令从第一个表中提取数据。

`bcp glmaster out d:\ftp_root\data_xfer\glmaster.txt -n -d mu_live -t"," -S munis -U <user> -P <pwd>`

使用 -n 或 -n 和 -C 的各种组合，并且 .csv 文件中出现虚假的、不可打印的字符，例如带有元音变音或倒置的 ay，镜像反转的“L”。除了这些字符之外，还有实际数据，它们似乎位于每列的末尾。

从 SQL Server 表中提取干净的 .csv 数据以便可以从批处理作业运行的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T20:42:34.453

数据可能已经很干净了：您使用的本机格式`-n`是仅用于 bcp.exe 的[二进制格式](http://msdn.microsoft.com/en-us/library/ms191232.aspx)，因此某些字符不可读也就不足为奇了。

如果您希望脚本与其他工具一起使用，那么根据[文档](http://msdn.microsoft.com/en-us/library/ms190919.aspx)，字符格式将是更好的选择，即`-c`如果您没有 Unicode 数据，或者`-w`如果您有。

# xml - 从 XML 文档中的标签获取属性

> ID：13934018
> 
> 赞同：1
> 
> 时间：2012-12-18T13:25:04.053
> 
> 标签：xml, xml-parsing, tags

我有一个包含此内容的 XML 文件

```
<?xml version="1.0" encoding="utf-8" ?>

<Bill_Spec DN="s" DP="68734">
<cash_Share CS="1391/01/01" CL="1391/01/31" CB="1000" CI="200" CD="100" CX="50" CC="40" CT="1046"/>
<insur_Share IS="1391/02/01" IL="1391/02/31" IB="2500" II="120" IT="2380"  />
</Bill_Spec> 
```

我写了这段代码，但我想像变量一样单独获取属性

```
require('XMLParser.class.php');

$xml = new XMLParser;

$output = $xml->parse('Iranpars.xml');

print_r($output); 
```

如何从这些标签（如 DN 或 CS）中获取所有属性？

# ruby-on-rails-3.2 - 如何编辑发动机场数据库.yml 文件？

> ID：13934020
> 
> 赞同：0
> 
> 时间：2012-12-18T13:25:06.183
> 
> 标签：ruby-on-rails-3.2, engineyard

我的应用程序登台环境在文件中使用`mysql`适配器。`database.yml`但是我在我的 gemfile 中包含`mysql2`了 gem，因此我遇到了`msql`适配器错误。文件是这样的？

```
staging:
  adapter:   mysql
  database:  myapp
  username:  xyz
  password:  IiVTKgcJCt
  host:      ec2-50-16-127-64.compute-1.amazonaws.com
  reconnect: true 
```

我怎样才能将适配器更改为`mysql2`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T20:33:32.560

在正常情况下，您的 database.yml 将由 Engine Yard 自动设置为使用正确的适配器。如果这没有发生，您可能有导致此问题的配置问题。如果您仍然对此感到担忧，我建议您向我们的支持团队开一张票，以便我们进一步为您提供帮助。[https://support.cloud.engineyard.com](https://support.cloud.engineyard.com)

谢谢，

泰勒

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T19:08:16.437

我遇到了类似的情况，最后上传了一个自定义说明书来写出 database.yml 文件。我使用了在谷歌上找到的这个例子：

[https://gist.github.com/1989695](https://gist.github.com/1989695)

# asp.net - 编译时的 Asp.net js/css 分组

> ID：13934021
> 
> 赞同：1
> 
> 时间：2012-12-18T13:25:08.617
> 
> 标签：asp.net, performance

我想创建一组添加到给定aspx页面中的所有js文件，并将guid（由所有内容的哈希形成）作为文件名保存在某个文件夹中，并将内容作为所有js文件的组合和压缩内容。

目前我在运行时做，但在第一次有一些性能影响，当我使用 httpHandler 来提供这个文件时，性能也会受到影响。我需要在运行时使用 httpHander，因为我们正在使用多个 Web 服务器，并且分组文件可能不存在于其他 Web 服务器中。目前，除了将文件写入磁盘外，我们还存储在 db（公共位置）中，以便其他网络服务器可以访问它。

由于性能原因，我们想在编译时做。意思是，在编译时我想知道在运行时将添加哪些所有脚本，我将在磁盘上创建组合的 js 并用一个静态标签替换所有这些标签。因此，它将被 IIS 有效地切断。请建议如何实现这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:37:15.953

这应该会有所帮助。向您的项目添加构建命令以编译 JS

[http://mitchlabrador.com/2009/12/09/how-to-minimize-and-combine-your-javascript-on-compile-using-visual-studio/](http://mitchlabrador.com/2009/12/09/how-to-minimize-and-combine-your-javascript-on-compile-using-visual-studio/)

# javascript - toString 或 to parseInt javascript

> ID：13934027
> 
> 赞同：4
> 
> 时间：2012-12-18T13:25:29.343
> 
> 标签：javascript, casting, tostring, parseint

所以今天我遇到了这个场景。我有一个整数和一个需要比较的字符串。为了比较两者，我要么必须 toString() 整数，要么将字符串解析为 int。

这是我的问题，我应该选择哪一个，两者的性能有什么不同吗？（即使是最小的）有经验法则吗？

这是一个代码示例：

```
var intI = 1;
var stringS = '1';

if (intI.toString() == stringS)
console.log('are equal');

//Or
if (intI == parseInt(stringS))
console.log('are equal'); 
```

最好将 Integer 声明为我知道的字符串（因为它不用于计算）。但它在网站上随处使用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-18T13:27:45.763

这取决于您想要的语义而不是性能。字符串“001”是否应该等于数值`1`？如果答案是“是”，您应该将值转换为数字。如果不是，那么您应该将其作为字符串进行比较。

除非您有一个正在执行数百万次此类操作的应用程序，否则不要担心此类琐碎事情的性能。

另请注意，`parseInt()`不关心一串数字末尾是否有尾随垃圾。那是

```
parseInt("123skidoo", 10) === 123 
```

是`true`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T13:30:12.637

> 两者的性能有什么区别吗？

不引人注目。但是，这两种方法之间存在行为差异，`parseInt`也可以将诸如`001`or`1xyz`之类的字符串转换为 number `1`。你想要那个吗？如果没有，你应该 toString 整数。

顺便说一句，如果你只使用[`==`operator](http://es5.github.com/#x11.9.1)，字符串将被隐式[`ToNumber`编辑。](http://es5.github.com/#x9.3.1)这不允许仅以某些数字开头的字符串 (as `1xyz`)，但任何与 so 等价的数字表示形式，`1`例如`1.0`or `001`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T13:29:53.123

实际上，在这种情况下，您不必转换任何内容。当您将整数与字符串进行比较时，Javascript 引擎会自动将一个整数转换为另一个。您可以通过`javascript:alert(1 == '1');`在 Web 浏览器导航栏中输入来进行尝试。它将返回“真”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T13:30:28.067

您不需要进行任何显式转换，因为默认情况下 javascript 会为您处理它。它还取决于您要比较的语义。我认为我们不应该担心在这种微不足道的情况下的表现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T15:29:07.333

尝试这个

```
var intI = 1;
var stringS = '1'; 
```

将 intI 转换为字符串只需使用以下内容。

```
var intI = 1+"";//now check the type of intI, it would be string 
```

# function - Matlab GUI 复用功能块

> ID：13934030
> 
> 赞同：4
> 
> 时间：2012-12-18T13:25:32.750
> 
> 标签：function, matlab, matlab-guide

我在 GUIDE 中制作了一个带有两个可编辑文本框和四个静态文本框的 Matlab GUI 用户在两个可编辑文本框（`e1`和`e2`）中输入值，并根据这些值计算应在静态文本框中显示的值（`s1`, `s2`,`s3`和`s4`)。

`e1`它对和的每个值变化执行此操作`e2`

更改值时计算值的代码`e1`如下所示。

```
% --- Executes on key press with focus on e1 and none of its controls.
function e1_KeyPressFcn(hObject, eventdata, handles)
% hObject    handle to e1 (see GCBO)
% eventdata  structure with the following fields (see UICONTROL)
%   Key: name of the key that was pressed, in lower case
%   Character: character interpretation of the key(s) that was pressed
%   Modifier: name(s) of the modifier key(s) (i.e., control, shift) pressed
% handles    structure with handles and user data (see GUIDATA)

% Start of BLOCK
% Get values from e1 and e2 and calculate other values
handles.levels = str2num(get(handles.e1, 'String'));
handles.edgelength = str2num(get(handles.e2, 'String'));
handles.cellnum = (handles.levels^3 + 3*handles.levels^2 + 2*handles.levels)/6;
handles.vertnum = ((handles.levels+1)^3 + 3*(handles.levels+1)^2 + 2*(handles.levels+1))/6;

% Set values of s1, s2, s3 and s4
set(handles.s1, 'String', num2str(handles.cellnum));
set(handles.s2, 'String', num2str(handles.vertnum));
set(handles.s3, 'String', num2str(0.433*handles.edgelength^2));
set(handles.s4, 'String', ...
    num2str(2*handles.cellnum*str2num(get(handles.s3, 'String'))));
% End of BLOCK 
```

是否可以引用此代码块（包含在 BLOCK 中）以便`function e2_KeyPressFcn`也可以使用它？现在我只需将部分复制粘贴到，`function e2_KeyPressFcn`但这似乎不是很优雅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:53:24.490

为你的代码块创建一个辅助函数怎么样？

我在想一些事情：

```
function e1_KeyPressFcn(hObject, eventdata, handles)
    handles = helper_block_func(handles);

function e2_KeyPressFcn(hObject, eventdata, handles)
    handles = helper_block_func(handles);

function hout = helper_block_func(hin)
    hout = hin;

    % # Get values from e1 and e2 and calculate other values
    hout.levels = str2num(get(hout.e1, 'String'));
    hout.edgelength = str2num(get(hout.e2, 'String'));
    hout.cellnum = (hout.levels ^ 3 + 3 * hout.levels ^ 2 + 2 * hout.levels) / 6;
    hout.vertnum = ((hout.levels + 1) ^ 3 + 3 * (hout.levels + 1) ^ 2 ...
        + 2 * (hout.levels + 1)) / 6

    % # Set values of s1, s2, s3 and s4
    set(hout.s1, 'String', num2str(hout.cellnum));
    set(hout.s2, 'String', num2str(hout.vertnum));
    set(hout.s3, 'String', num2str(0.433 * hout.edgelength ^ 2));
    set(hout.s4, 'String', ...
        num2str(2 * hout.cellnum * str2num(get(hout.s3, 'String')))); 
```

# salesforce - 如何在模态弹出 jquery 中调用 visualforce 页面？

> ID：13934039
> 
> 赞同：2
> 
> 时间：2012-12-18T13:26:04.483
> 
> 标签：salesforce, visualforce

我创建了一个带有标签的visualforce页面。单击它时，我想在模式弹出查询中打开另一个 visualforce 页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T01:41:36.133

也许您可以在呈现模式弹出窗口的 DIV 标记中放置一个 IFRAME，然后在该 iframe 中呈现您的第二个 Visualforce 页面？这可能是我的第一个倾向。

# ios - iCloud 同步应用文档文件夹

> ID：13934043
> 
> 赞同：4
> 
> 时间：2012-12-18T13:26:13.773
> 
> 标签：ios, icloud

我有一个基本上是 PDF 阅读器的应用程序。导入 PDF 文件时，它们会保存到应用程序文档文件夹中。

我的问题是将这些文件同步到 iCloud 以在其他设备上备份或使用的最佳方法是什么？

我一直在阅读一些内容，`UIDocument`但我正在努力研究如何将它与 PDF 一起使用，因为大多数教程只是`NSString`以一个示例为例。

任何帮助将不胜感激谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T15:42:06.153

您可以压缩所有文件，并且可以将其与`iCloud`. [这](https://stackoverflow.com/questions/8047217/how-can-i-use-icloud-to-synchronize-a-zip-file-between-my-apps)是您正在寻找的答案，[这](http://www.raywenderlich.com/6015/beginning-icloud-in-ios-5-tutorial-part-1)是`iCloud`. 如果您查看答案并按照教程进行操作，那么您肯定可以使其工作。

# java - 使用 Javapns 的 Apple 推送通知服务

> ID：13934049
> 
> 赞同：2
> 
> 时间：2012-12-18T13:26:39.430
> 
> 标签：java, ios, apple-push-notifications

我正在使用以下代码向 Apple Notification Server 发送通知。

```
import javapns.Push;
import javapns.communication.exceptions.CommunicationException;
import javapns.communication.exceptions.KeystoreException;

public class APN 
{
   public static void main(String[] args) {
        try {
            Push.alert("Hello World!", "keystore.p12", "mypassword", false, "myDeviceIdentifier");
        } 
        catch (CommunicationException e) {
           e.printStackTrace();
        } 
        catch (KeystoreException e) {
            e.printStackTrace();
        }
   }
} 
```

我已经包含了文档中指定的所有 jars `Javapns`。
但是，当我执行此代码时，它会引发以下异常。

```
log4j:WARN No appenders could be found for logger (javapns.notification.Payload).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
javapns.communication.exceptions.CommunicationException: Communication exception:
java.net.ConnectException: Operation timed out
at javapns.communication.ConnectionToAppleServer.getSSLSocket(ConnectionToAppleServer.java:158)
at javapns.notification.PushNotificationManager.initializeConnection(PushNotificationManager.java:106)
at javapns.Push.sendPayload(Push.java:171)
at javapns.Push.alert(Push.java:47)
at com.mydomain.myapp.APN.main(APN.java:12)
Caused by: java.net.ConnectException: Operation timed out
at java.net.PlainSocketImpl.socketConnect(Native Method)
at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:432)
at java.net.Socket.connect(Socket.java:529)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:570)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.<init>(SSLSocketImpl.java:371)
at com.sun.net.ssl.internal.ssl.SSLSocketFactoryImpl.createSocket(SSLSocketFactoryImpl.java:71)
at javapns.communication.ConnectionToAppleServer.getSSLSocket(ConnectionToAppleServer.java:155)
... 4 more 
```

我已经创建了 .p12 证书，并且获得了 64 个字长的设备标识符。

请给我建议解决方案。
任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T00:18:58.077

关键信息是：

java.net.ConnectException：操作超时

您确定运行此代码的服务器可以在您指定的端口上连接到苹果 apn 服务器吗？

提示：使用 telnet 进行验证。

# bash - 从 bash 检测与 Firefox 中用户的交互

> ID：13934050
> 
> 赞同：1
> 
> 时间：2012-12-18T13:26:44.470
> 
> 标签：bash, firefox

如果我使用 Firefox 超过给定时间，我想停止它，所以我希望能够检测交互式活动，并且我想从 bash scritp 管理它......这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:24:58.320

您想检测用户是否**主动**使用 firefox 一段时间“t > X mins”？如果它只是闲置，则不算数？

用 bash 检测是不可能的，除非你对 tcpdump 进行一些智能解析。

但是，您可以为此创建一个 firefox 插件。[互联网上有](https://www.google.com/search?q=create%20firefox%20addon)很多帮助。您可以[将此插件](https://addons.mozilla.org/en-us/firefox/addon/timetracker/)作为参考。

编辑：对不起，我认为这应该是[可能的](https://unix.stackexchange.com/questions/16131/how-do-i-find-the-x-window-id-under-the-mouse-pointer-in-bash)。

# c# - 关于c#中的树控件

> ID：13934053
> 
> 赞同：0
> 
> 时间：2012-12-18T13:26:57.537
> 
> 标签：c#, view, tree, treeview

这是我从数据库中检索数据并在树控件中显示的代码

```
String empid = ValueBox1.Text;
string constr = System.Configuration.ConfigurationManager.ConnectionStrings["EmployeeDatabase"].ConnectionString;
SqlConnection con = new SqlConnection(constr);
con.Open();
SqlCommand cmd = new SqlCommand("ReportingManagers", con);
cmd.CommandType = CommandType.StoredProcedure;
cmd.Parameters.Add("@EmpID",SqlDbType.Int,0).Value =  empid;

SqlDataReader dr = cmd.ExecuteReader();
while (dr.Read())
{
                //Here "Node" Means It Will Add Nodes As All Root Nodes...
                TreeView1.Nodes.Add(dr.GetValue(0).ToString());
 }
 dr.Close(); 
```

我在这一行收到错误：

```
 TreeView1.Nodes.Add(dr.GetValue(0).ToString()); 
```

> 错误：“System.Web.UI.WebControls.TreeNodeCollection.Add(System.Web.UI.WebControls.TreeNode)”的最佳重载方法匹配有一些无效参数。
> 
> 错误：参数 1：无法从“字符串”转换为“System.Web.UI.WebControls.TreeNode”

请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:24:27.120

您收到的错误消息非常不言自明。在下面的行中，它希望将 TreeNode 对象添加到集合中。

```
TreeView1.Nodes.Add(dr.GetValue(0).ToString()); 
```

尝试这个：

```
TreeView1.Nodes.Add(new TreeNode(dr.GetValue(0).ToString())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:24:53.313

您需要创建 TreeNode 类的新实例，而不是尝试直接添加 String 值。

有关示例，请参阅此链接[http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.nodes.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.nodes.aspx)

# jquery-ui - Jquery完成功能不起作用

> ID：13934059
> 
> 赞同：1
> 
> 时间：2012-12-18T13:27:17.400
> 
> 标签：jquery-ui

我对 jQuery 和 AJAX 技术非常陌生。我正在尝试创建一个表单，该表单将在数据库中插入值而不刷新页面。大多数代码都按预期工作。但是其中有两种情况没有按预期工作。

1.  我正在通过复选框获取值。当我只选择一个复选框时，它可以工作，但是当我选择多个复选框时，数据库中存储的值作为数组。
2.  一旦表单数据成功提交但它不起作用，我想显示一条消息。

请在下面找到相同的相应代码。

查询：

```
$('#add').click(function(){
    var domain_type = $('#domain').val();
    var domain_zone = $('#domain_zone').val();
    var client_name = $('#client_name').val();
    //var language[] = "";
    var lang = new Array();
    if(language==1){
        //alert("You select one language"); 
        valid = true;
        lang = "English";
    }else{
        //alert("You select multiple language");

        var i =0;
        $.each($('input[name=lang]:checked'), function(){
            lang.push($(this).val());
        });             
        var count = lang.length;
        if(count ==1){
            alert("You need to select two languages");
            var valid = false;
        }else if(count>2){
            alert("You can select only two languages");
            var valid = false;
        }else{
            valid = true;   
        }
    }

        var formMsge = $('#formStatus');
        $('#formStatus').html('<img src="./img/loader.gif"> Please wait while adding the data in database.');
        $.ajax({
            type: "POST",
            url: "./test/test.php",
            data: {domain_type:domain_type, domain_zone:domain_zone, client_name:client_name, 'lang[]':lang},
            success:function(conf){
                $('#formStatus').ajaxComplete(
                    function(event,request){
                        if(conf=="OK"){
                            $('#formSuccess').show();
                            $('#addClient').hide();
                        }else{
                            $('#formError').show();
                            $('#forError').text("Please try again");
                        }
                    }
                );
            }                   
        });

    return false;
}); 
```

测试.php：

```
include('../../classes/access_user/all.class.inc.php');
echo $workstream->addClient() 
```

;

php类文件：

```

`public function addClient(){
        $domain_type = isset($_POST['domain_type'])?$_POST['domain_type']:'';
        $domain_zone = isset($_POST['domain_zone'])?$_POST['domain_zone']:'';
        $client_name = isset($_POST['client_name'])?$_POST['client_name']:'';
        $lang = isset($_POST['lang'])?$_POST['lang']:'';
        $add_by = 'Robindra Singha';
        $add_on = date("Y-m-d");

        if(isset($domain_type) || isset($domain_zone) || isset($client_name) || isset($lang)){
            $sql = "INSERT INTO client_list (domain_type_id, client_name, domain_zone, language, add_on, add_by, last_update_on, last_update_by) VALUES('$domain_type','$client_name','$domain_zone','$lang','$add_on','$add_by','$add_on','$add_by')";
            $res = mysql_query($sql) or die(mysql_error());
            if(mysql_inserted_id() != 0){
                $msg = "OK";
            }else{
                $msg = "System face an issue while adding client details!";
            }
        }else{
            $msg = "System face an issue while adding client details, please try again!";
        }   
        return $msg;
    }` 

在上面的代码中，我的问题是当我选择多个复选框时复选框值无法通过，其次，一旦表单成功提交，我将无法显示任何文本。除了这两个问题，我的代码能够成功插入信息。如果有人指导我正确完成工作，我会很高兴。预先感谢您的支持。

注意：我无法在粘贴此处添加 HTML 文件，它显示为普通文本。请建议。

```

# java - 通过编码列出所有实现接口

> ID：13934060
> 
> 赞同：-3
> 
> 时间：2012-12-18T13:27:24.103
> 
> 标签：java, interface

是否可以按任何类列出所有已实现的接口。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T13:29:41.347

```
if (myObject instanceof InterfaceName) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:45:50.307

使用**反射**，你可以实现这一点，使用下面的代码，它会列出你的类实现的所有接口，并在你的java文件中`MyClass`导入包。`java.lang.reflect.Type`

```
 MyClass s = new MyClass();
    Type[] ifaces = s.getClass().getInterfaces();
    for(int i=0;i<ifaces.length;i++)
    System.out.print (ifaces[i]); 
```

# android - 阻止通知 PendingIntent 启动 Activity 已经启动？

> ID：13934061
> 
> 赞同：6
> 
> 时间：2012-12-18T13:27:25.043
> 
> 标签：android

该服务创建一个持久性`Notification`并在单击时启动主要活动 via `PendingIntent`。这是代码。

```
Intent notificationIntent = new Intent(getApplicationContext(), ViewPagerActivity.class);
PendingIntent pendingIntent = PendingIntent.getActivity(StreamingService.this, 0, notificationIntent, 0); 
```

但是，如果在我按下通知时**启动主要活动**，它将**再次**启动，然后再次启动......

最后，我有同样的活动，一个在另一个之上。我可以通过按后退按钮看到这一点，这将杀死主要活动一次，然后让我回到同一个活动，直到我关闭最后一个活动。

我怎样才能防止这种情况发生？可以`PendingIntent`检测到瞄准活动正在运行，因此它不会再次创建相同的活动，而是启动正在运行的活动？

PS。如果不能很好地解释这一点，我深表歉意。如果是这种情况，请告诉我，我会重新表述问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T17:29:07.490

我也找到了这个解决方案。将此属性添加到`Manifest`

```
 <activity android:name=".MyActivity"
              android:label="@string/app_name"
              android:launchMode="singleTop"      // <-- THIS LINE
            > 
```

对于每个`Activity`您需要此功能的人。到目前为止，它完全没有错误。

哪种解决方案更好？如果没有的话，我的更容易。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-18T13:33:28.953

根据您要实现的确切行为，您可以将这些标志之一作为 getActivity() 的最后一个参数传递：

*   [FLAG_ACTIVITY_REORDER_TO_FRONT](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_REORDER_TO_FRONT)
*   [FLAG_ACTIVITY_SINGLE_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_SINGLE_TOP)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-10T09:34:49.603

尝试在 REQUEST_CODE 中使用另一个值。**不要**在 REQUEST_CODE 中使用默认值 0。

或者您的 pendingIntent 将重新启动您的活动。

如果要使用正常的活动周期，请在创建 PendingIntent 时输入请求值。

```
PendingIntent resultPendingIntent = PendingIntent.getActivity(
        context, REQUEST_CODE,
        resultIntent,
        PendingIntent.FLAG_UPDATE_CURRENT); 
```

# sql-server - 如何为表的每一行运行动态sql？

> ID：13934062
> 
> 赞同：0
> 
> 时间：2012-12-18T13:27:29.867
> 
> 标签：sql-server, tsql, function, dynamic-sql, sp-executesql

我有一个表，其中包含一个名为`WhereClause`

```
DECLARE @UserGroups TABLE (WhereClause nvarchar(1000), totalCount int) 
```

该表已填充了一些值，`WhereClause`但没有为`totalCount`列填充。

一个例子`WhereClause`是“FirstName 为空”。

基本上对于表中的每一行，我需要从另一个表（用户）计算 COUNT(*) 并在`totalCount`上表中设置。

以下不起作用：

```
SELECT UG.WhereClause, U.TotalCount
FROM @UserGroups as UG
OUTER APPLY (SELECT COUNT(*) as 'TotalCount' FROM [Users] WHERE UG.WhereClause)
) U 
```

我尝试创建一个 sql 函数并在函数中调用 exec sp_executesql 但它不受支持。

```
CREATE FUNCTION [dbo].[fn_UserGroupCount]
(   
    @whereClause as NVARCHAR(1000)
)
RETURNS @returnValue TABLE (TotalCount INT)
AS
BEGIN
    DECLARE @stmt nvarchar(1500)

    SET @stmt = 'SELECT COUNT(*) FROM [dbo].[Users]
    WHERE '  + @whereClause

    Exec sp_executesql @stmt

RETURN
END

SELECT * FROM [dbo].[fn_UserGroupCount]('Subject is null') 
```

`@UserGroups`如前所述，如何填充我的表格？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:46:18.090

试试这个，你必须使用动态 SQL 的临时表才能访问它（`@UserGroups`不起作用所以我用它替换了它`#UserGroups`）：

```
CREATE TABLE #UserGroups (WhereClause nvarchar(1000), totalCount int)
INSERT #UserGroups VALUES ('FirstName IS NULL', NULL)
INSERT #UserGroups VALUES ('FirstName IS NOT NULL', NULL)

DECLARE @sql VARCHAR(8000) = STUFF(
(
SELECT  ';UPDATE #UserGroups SET totalCount = (SELECT COUNT(*) FROM [Users] WHERE ' + WhereClause + ') WHERE WhereClause = ''' + WhereClause + ''''
FROM    #UserGroups
FOR XML PATH('')
), 1, 1, '')

PRINT @sql
EXEC(@sql)

SELECT  *
FROM    #UserGroups

DROP TABLE #UserGroups 
```

但是，如果`WhereClause`包含引号，可能会出现问题，例如`FirstName LIKE 'Joe'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:10:16.703

我会使用游标来构建一个包含更新语句的字符串，其中包含内置的 @whereclause 中的 select count(*)。然后您可以执行它来执行更新。请参阅下面的 SQLFiddle：

**已更新**现在适用于 where 子句中包含单引号以及 where 子句中的撇号的地方

[SQL小提琴](http://sqlfiddle.com/#!3/b1691/1)

**MS SQL Server 2008 架构设置**：

```
create table users
(
  userid int primary key identity,
  name varchar(50),
  subject varchar(50) null
);

INSERT INTO users (name, subject)
VALUES
    ('Fred', 'Maths'),
    ('Bill', null),
    ('Helen', 'English'),
    ('O''Keefe', 'Maths'); 
```

**查询 1**：

```
DECLARE @WhereClause nvarchar(1000)
DECLARE @stmt nvarchar(1500) = ''

CREATE TABLE #UserGroups (WhereClause nvarchar(1000), totalCount int)
INSERT #UserGroups VALUES ('Subject IS NULL', NULL)
INSERT #UserGroups VALUES ('Subject IS NOT NULL', NULL)
INSERT #UserGroups VALUES ('Subject =''Maths''', NULL)
INSERT #UserGroups VALUES ('name =''O''''Keefe''', NULL)

DECLARE cur CURSOR FOR
  SELECT WhereClause FROM #UserGroups

OPEN cur

FETCH cur  INTO @WhereClause

WHILE @@FETCH_STATUS = 0
BEGIN

  SELECT @stmt = @stmt + 
      'UPDATE #UserGroups ' +
      'SET totalCount = ' +
      '(SELECT COUNT(*) FROM users WHERE ' + @WhereClause + ') ' +
      'WHERE WhereClause = ''' + REPLACE(@WhereClause, '''', '''''') + ''';' 
  FETCH cur  INTO @WhereClause
END

CLOSE cur
DEALLOCATE cur

--select @stmt
exec(@stmt)

SELECT *
FROM #UserGroups

DROP TABLE #UserGroups 
```

**[结果](http://sqlfiddle.com/#!3/b1691/1/0)**：

```
|         WHERECLAUSE | TOTALCOUNT |
------------------------------------
|     Subject IS NULL |          1 |
| Subject IS NOT NULL |          3 |
|    Subject ='Maths' |          2 |
|    name ='O''Keefe' |          1 | 
```

# .net - 使用 Visual Studio 2012 尽可能轻松地安装 Windows 服务？

> ID：13934063
> 
> 赞同：1
> 
> 时间：2012-12-18T13:27:36.990
> 
> 标签：.net, windows-services, visual-studio-2012, windows-installer, installation

我创建了一个 Windows 服务，我使用 bat 文件进行安装，如下所示：

```
@ECHO OFF

REM The following directory is for .NET 4.0
set DOTNETFX2=%SystemRoot%\Microsoft.NET\Framework\v4.0.30319
set PATH=%PATH%;%DOTNETFX2%

echo Installing IEPPAMS Win Service...
echo ---------------------------------------------------
C:\Windows\Microsoft.NET\Framework\v4.0.30319\InstallUtil "%~dp0MyApp.WindowsService.exe"
echo ---------------------------------------------------
pause
echo Done. 
```

这很好用，但现在我需要一种方法让这部分对最终用户来说更简单。据我所知，MSI 不再可能在 Visual Studio 2012 中创建？

将使用相同的安装程序包安装多个服务，但名称和基础地址不同（名称和基础地址在 Windows 服务的 app.config 中设置）因此即使在安装程序包完成后 app.config 仍可编辑，这一点很重要。

如果服务的名称可以在设置中设置，但不是最多设置，那就更好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:35:31.687

使用 WiX 创建一个安装程序包，并让它在安装过程中运行您的批处理脚本。

[http://wix.codeplex.com/](http://wix.codeplex.com/)

[http://visualstudiogallery.msdn.microsoft.com/5f43f268-7752-48c7-90e8-ae5b6f136b3f](http://visualstudiogallery.msdn.microsoft.com/5f43f268-7752-48c7-90e8-ae5b6f136b3f)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-02T19:54:58.700

你可以试试 InstallShield 限量版 [http://learn.flexerasoftware.com/content/IS-EVAL-InstallShield-Limited-Edition-Visual-Studio](http://learn.flexerasoftware.com/content/IS-EVAL-InstallShield-Limited-Edition-Visual-Studio)

您只需注册即可免费下载。

# php - 在文件夹中上传文件的替代方法

> ID：13934064
> 
> 赞同：2
> 
> 时间：2012-12-18T13:27:37.463
> 
> 标签：php, cloud, cloud-storage

实际上这是关于一个云存储网络应用程序

一个网络应用程序，用户有自己的私人文件夹，我希望他们也应该有自己的文件夹。最好的方法是告诉上传者上传的文件必须在用户所在的特定文件夹中。

所以我想的是，每当创建一个文件夹并打开一个存储文件夹名称的会话时，就会启动并发送到上传器以这种方式上传的上传器。

```
For eg $_SESSION['folder-name']='x'

$upload_dir= "/$_SESSION['username']/$_SESSION['folder-name']/" 
```

每个用户都有特定的私人目录，他们可以在其中上传文件。所以不可能操纵会话在错误的用户目录中上传。

既然现在我认为这种方式是最好的方式，那么我可以从 stackoverflow 社区获得任何替代方案吗？如果是，请描述

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:06:05.583

由于您的用户名是唯一的，我想那么我似乎是合法的。但是让我们看看这个场景：

一个用户被删除，另一个用户使用相同的用户名注册......

**编辑**

这取决于 fs 和许多其他因素。例如，这将是可访问的 url 吗？

一个合法的替代方案可能是：

由于您设置的用户名似乎是唯一的，因此您可以首先对其进行 md5（快速），然后如果您希望它更短且可访问 url，则将其消化为十六进制。这将为您提供大量可以转换为文件夹的用户名。

不好的是，您无法通过文件夹名称找到用户。如果你有这个想法

而已。

# typescript - 我可以在 TypeScript lambda 中访问另一个 this 吗？

> ID：13934070
> 
> 赞同：33
> 
> 时间：2012-12-18T13:27:53.733
> 
> 标签：typescript

在打字稿中，我可以这样写：

```
$('#something').fadeOut(400, (): void => {
    this.invokeAnotherMethod();
}); 
```

编译后，TypeScript 会自动确保 this 指向我的类而不是封闭的函数：

```
var _this = this;
$('#something').fadeOut(400, function() {
    _this.invokeAnotherMethod();
}); 
```

但是，当我需要访问真实的 this 而不是外部的 _this 时呢？是否有语法来引用它？例如，我如何编写可以编译为以下内容的代码：

```
var _this = this;
$('#something').fadeOut(400, function() {
    $(this).data('specialhide', true);
    _this.invokeAnotherMethod();
}); 
```

可能吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-18T13:38:52.717

您需要避免使用粗箭头语法来执行此操作，因为您不想保留`this`.

```
var _me = this;
$('#something').fadeOut(400, function () {
    _me.invokeAnotherMethod();
    $(this).data('specialhide', true);
}); 
```

在此示例中，我使用`_me`而不是`_this`避免与 TypeScript 生成的变量发生任何冲突。我也避免了`self`，以避免与`window.self`（感谢 RockResolve）混淆。

## 为什么！

ECMAScript 6 规范具有箭头函数定义 - 这是 TypeScript 语言从这里获得此功能的地方。当 TypeScript 将来以 ECMAScript 6 为目标时，它将保留在语法中 - 因此它们无法在不破坏未来兼容性`() =>`的情况下使其同时适用于两种上下文。`this`

即使您可以想象他们如何更改 TypeScript 编译器以使其在 ECMAScript 3 或 5 中都`_this`可用`this`，但它实际上会在版本 6 中成为一个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-21T21:11:43.657

我想出了一个出路，如我在回答中所述： [如何使用回调函数在 TypeScript 中保留词法范围](https://stackoverflow.com/questions/14471975/how-can-i-preserve-lexical-scope-in-typescript-with-a-callback-function/22569517#22569517)

这是实现史蒂夫芬顿在回答中所做的关闭的更好方法。我更喜欢它，因为方法签名记录了用法。

基本上，使用这样的方法：

```
fadeOutLambda(outerThis: YourClass): {(d: number, i: number): number}{
    return function(d: number, i: number){
        // Put your "fadeOut" logic here
        // refer to "this" to mean the dynamically scoped "this"
        // refer to "outerThis" to refer to the class instance
        alert(outerThis); // lexically scoped class instance
        alert(this); // dynamically scoped context caller
        return 999;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-31T04:50:05.067

让我提供另一个不使用 lambda 的解决方案。您可以将主 this 作为属性附加（在此示例中称为*我）。*

```
class MyClass
{
    constructor()
    {
        var button: HTMLElement = document.getElementById("buttonID");
        (button as any).me = this;
        button.onclick = this.buttonClick;
    }

    private buttonClick(e): boolean
    {
        var me: MyClass = (this as any).me;

        // Implementation using this (the button) and me (the class)

        return false;
    }
} 
```

# javascript - 如何用 JavaScript 的内置函数替换这个 JQuery Ajax 调用？

> ID：13934071
> 
> 赞同：3
> 
> 时间：2012-12-18T13:28:04.233
> 
> 标签：javascript, jquery, ajax, http-post

> **可能重复：**
> [没有框架的 javascript ajax 请求](https://stackoverflow.com/questions/5907781/javascript-ajax-request-without-framework)

如何在不使用 JQuery 或任何其他库但仅使用 JavaScript 内置函数的情况下进行下面的 JQuery Ajax 调用？

```
var input = '{
    "age":100,
    "name":"foo",
    "messages":["msg 1","msg 2","msg 3"],
    "favoriteColor" : "blue",
    "petName" : "Godzilla",
    "IQ" : "QuiteLow"
}';
var endpointAddress = "http://your.server.com/app/service.svc";
var url = endpointAddress + "/FindPerson";
$.ajax({
    type: 'POST',
    url: url,
    contentType: 'application/json',
    data: input,
    success: function(result) {
        alert(JSON.stringify(result));
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:51:17.597

jQuery 很好地规范了 ajax 调用浏览器之间的所有小怪癖和细微差别。

我建议找到一个独立的 ajax 库，它可以做同样的事情，但没有 jQuery 带来的所有额外开销。这里有几个：

*   [要求韦斯特](https://github.com/ded/Reqwest)
*   [费尔马塔](https://github.com/natevw/fermata)
*   [Ajax](https://github.com/ForbesLindesay/ajax)（受 jquery/zepto 启发）
*   [微阿贾克斯](http://code.google.com/p/microajax/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T13:36:49.313

试试这个[例子](http://www.w3schools.com/ajax/tryit.asp?filename=tryajax_first)

**首先，您必须创建对象`window.XMLHttpRequest`或 ActiveXObject（对于 IE）**

```
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  } 
```

**然后你可以发送请求**

```
xmlhttp.open("GET","ajax_info.txt",true);
xmlhttp.send(); 
```

**终于可以得到回应了**

```
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    }
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T13:40:45.087

下面的代码完成了您的 jQuery 版本所做的一切：

*   使用 JSON 作为 postdata 的 POST 请求
*   设置 JSON 内容类型标头
*   提醒字符串化的响应

代码：

```
 var httpRequest;

  function makeRequest(url, input) {
    if (window.XMLHttpRequest) { // Mozilla, Safari, ...
      httpRequest = new XMLHttpRequest();
    } else if (window.ActiveXObject) { // IE
      try {
        httpRequest = new ActiveXObject("Msxml2.XMLHTTP");
      } 
      catch (e) {
        try {
          httpRequest = new ActiveXObject("Microsoft.XMLHTTP");
        } 
        catch (e) {}
      }
    }

    if (!httpRequest) {
      alert('Giving up :( Cannot create an XMLHTTP instance');
      return false;
    }
    httpRequest.onreadystatechange = function(){
        if (httpRequest.readyState === 4) {
          if (httpRequest.status === 200) {
            alert(JSON.stringify(httpRequest.responseText));
          }
        }
    };

    httpRequest.open('POST', url);
    httpRequest.setRequestHeader('Content-Type', 'application/json');
    httpRequest.send(input);
  }

var input = '{
    "age":100,
    "name":"foo",
    "messages":["msg 1","msg 2","msg 3"],
    "favoriteColor" : "blue",
    "petName" : "Godzilla",
    "IQ" : "QuiteLow"
}';
var endpointAddress = "http://your.server.com/app/service.svc";
var url = endpointAddress + "/FindPerson";
makeRequest(url, input); 
```

部分取自[MDN](https://developer.mozilla.org/en-US/docs/AJAX/Getting_Started)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T13:40:37.200

看看**谷歌**[在这里](http://www.w3schools.com/ajax/ajax_xmlhttprequest_create.asp)的第一个答案。

# java - 尝试使用 JConsole 连接到 RaspberryPi jvm

> ID：13934075
> 
> 赞同：2
> 
> 时间：2012-12-18T13:28:27.527
> 
> 标签：java, linux, raspberry-pi

下午好。

我使用 Oracle 的说明（在 Raspberry Pi 上使用 Java SE Embedded 入门，Bill Courington 和 Gary Collins）在我的 Raspberry Pi ejre1.7.0_10 上安装了 Java SE Embedded。我可以通过 ssh 进入 raspi 并在其上运行 Java 程序。我现在在 raspi 上使用 jmxremote 参数启动 JVM，然后在 Linux 主机上启动 JConsole

```
 #!/bin/bash
 ./bin/java -Dcom.sun.management.jmxremote.port=9999 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false -jar /home/pi/test/test.jar 
```

测试无限期地打印出整数，直到达到机器的限制。

我不知道正确的端口号。这是唯一的问题吗？

这是从 Jim Connors 的网络广播 Java SE Embedded Development Made Easy 中提取的，它以我的插头计算机问题为特色。为什么 JConsole 不能与 Raspberry Pi 远程工作 (JMX)？我希望有人尝试过这个。如果你能帮忙，谢谢。

乔治

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T06:49:21.417

我遇到过同样的问题。帮助我的是使用 -debug 启动 jconole。然后我收到了一条信息更丰富的错误消息（该消息显示一个奇怪的 ip 地址为 127.0.1.1 的错误）。在此帮助下，我将此系统属性添加到我在 pi 上的应用程序中：

-Djava.rmi.server.hostname=

然后我成功地将 jconsole 连接到 pi。

干杯，奥斯卡

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-15T17:12:35.367

我用

```
-Djava.rmi.server.hostname=192.168.0.173 -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=9004 -Dcom.sun.management.jmxremote.local.only=false -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false 
```

# sharepoint-2010 - SharePoint 2010：将默认搜索框移动到页脚

> ID：13934076
> 
> 赞同：0
> 
> 时间：2012-12-18T13:28:27.677
> 
> 标签：sharepoint-2010, search-box

在不使用 SharePoint Designer 或 Visual Studio 的情况下，是否可以将默认搜索框移动到页面的页脚或特定的自定义 div 标记？我发现 CSS 可以让我将其移动到页面顶部，但是在尝试将其移动到页脚时效果不佳。

这是将其移至页面顶部的 CSS： .s4-search { TOP: 10px; 右：400 像素！重要的; 位置：固定；}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:50:53.063

有一个名为 SRSB 的 div 类，您可以使用它来重新定位项目。通过使用 CSS 和使用绝对位置或类似方法，或者您可以使用 jQuery 重新定位或将其移动到页面上的不同 div。请参阅[div id 和 div 类之间的区别](https://stackoverflow.com/questions/544010/css-div-id-vs-div-class)以使用 CSS 和 ID 以及移动元素[http://api.jquery.com/category/manipulation/](http://api.jquery.com/category/manipulation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T21:13:24.197

如果您可以通过浏览器访问母版页库，则可以编辑母版页以移动 PlaceHolderSearchArea 内容占位符。

1.  转到您网站的主页。
2.  站点操作 > 站点设置
3.  在站点设置页面上，单击图库下的“母版页和页面布局”。
4.  下载您的母版页（可能是 v4.master）。
5.  找到 [asp:ContentPlaceHolder id="PlaceHolderSearchArea"] 标签。将此移动到页面上您想要的位置。
6.  保存并上传回母版页和页面布局库。签入、发布和批准。

我强烈建议您不要编辑开箱即用的母版页（如 v4.master），而是复制它以创建自定义母版页。我不会在这里详细介绍这些细节。

# android - 单击后更改菜单标题。

> ID：13934078
> 
> 赞同：0
> 
> 时间：2012-12-18T13:28:43.373
> 
> 标签：android, menu

我创建了一个菜单，我可以访问它。没有问题。但是单击菜单后我需要更改菜单项的名称

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:30:56.650

```
public boolean onOptionsItemSelected(MenuItem item){
        switch(item.getItemId()){
        case 1:
item.setTitle("your char");
}} 
```

# html - 如何识别 HTML ID 的最大长度？

> ID：13934080
> 
> 赞同：-2
> 
> 时间：2012-12-18T13:28:49.663
> 
> 标签：html

> **可能重复：**
> [HTML id 的实际最大长度是多少？](https://stackoverflow.com/questions/584184/what-is-a-practical-maximum-length-for-html-id)

我们在 html 标签中使用的 id 的最大长度是多少？（例如）像这样我们给它作为id名称多久？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:44:10.180

你可以放**1000万个字符**，`ID`但很难记住。

**5000 万**使浏览器与`This script is taking a long time to complete`消息一起挂起。

**1亿**它会杀死你浏览器的标签。

# json - 如何使用自定义验证器验证 .Net 中的双精度值？

> ID：13934084
> 
> 赞同：1
> 
> 时间：2012-12-18T13:28:56.297
> 
> 标签：json, validation, asp.net-web-api, customvalidator, custom-validators

我正在开发一个 ASP.Net web api 项目，我想根据我从客户端获得的 JSON 请求来验证我的服务器数据模型。在我的服务器模型类中，我有一个 double 值，我从客户端发送值作为“12,14”。我编写了一个自定义验证类，它由 .Net 的 ValidationAttribute 类实现，我正在使用 IsValid(Object value) 方法来验证这个用户输入。

因此，当我将输入作为“12,14”发送时，.Net 通过认为“，”是组分隔符，自动将此“12,14”转换为“1214”。但在这种情况下，“，”不是组分隔符，因为这是挪威文化格式（“no”文化）的有效双数。

```
public class Client : IClient
{

    public string ClientId { get; set; }
    public int EngagementId { get; set; }
    [MyCustomDoubleType]
    public double MyValue{ get; set; } //Notice that this is my double value to be validated.
} 
```

这是我为验证“MyValue”而编写的自定义验证器

```
public class MyCustomDoubleTypeAttribute : ValidationAttribute
{

    public override bool IsValid(object value) //When I send "12,14" from client, the value gets assigned to this value is "1214". .Net thinks "," is a group separator and removes it.
    {
        string doubleValue = value.ToString();
        try
        {
            Thread.CurrentThread.CurrentCulture = new CultureInfo("no");
            double convertedDouble = double.Parse(doubleValue);
            string convertedString = convertedDouble.ToString(Thread.CurrentThread.CurrentCulture);
            if (convertedString.Equals(doubleValue))
            {
                return true;
            }
            return false;
        }
        catch (FormatException formatException)
        {
            return false;
        }
    }

    public override string FormatErrorMessage(string name)
    {
        return string.Format(CultureInfo.CurrentCulture,
                             ErrorMessageString,
                             name);
    }
} 
```

所以这是我的问题。我想要的是在客户端输入 IsValid(Object value) 方法的输入参数时获取值。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:52:15.993

您也许可以使用自定义模型绑定器。我知道您可以在常规 MVC 站点上使用它，因此我假设可以在 Web API 上使用相同或相似的代码。[在Phil Haack 的网站上](http://haacked.com/archive/2011/03/19/fixing-binding-to-decimals.aspx)有一个使用自定义绑定器解析双精度值的好例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T03:29:05.513

罪魁祸首可能是 Json.NET，它为您将 12,14 转换为 1214。您应该考虑编写一个对此更加谨慎的自定义转换器。

您应该能够在网络上找到编写自己的转换器的说明。这是一个例子：

[如何在 JSON.NET 中实现自定义 JsonConverter 以反序列化基类对象列表？](https://stackoverflow.com/questions/8030538/how-to-implement-custom-jsonconverter-in-json-net-to-deserialize-a-list-of-base)

# c++ - std::find 在旧数组上

> ID：13934085
> 
> 赞同：15
> 
> 时间：2012-12-18T13:29:01.050
> 
> 标签：c++, stl

我如何`std::find`在旧阵列上进行而不**从现有旧阵列****制作新的`std::vector`/`std::array`**？

例如：

```
int ar[N];

if ( std::find(ar, ar + N, value) != &ar[N] ){ /**/ } 
```

`&ar[N]`什么都没有找到时检查情况的有效值吗？我可以确定我使用`&ar[N]`类似的方法做得对`std::vector::end()`吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-18T13:32:05.770

如果您使用的是 c++11，则可以使用：

```
int arr[N];
if (std::end(arr) == std::find(std::begin(arr), std::end(arr), value))
{
    // ...
} 
```

对于 c++98，您可以使用：

```
int arr[N];
int *begin = arr;
int *end = begin + N;

if (end == std::find(begin, end, value))
{
    // ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T13:31:48.023

你的总体思路很好。但`ar[N]`不是为您“保留”。取消引用未分配的变量将导致未定义的行为。您想将`std::find`结果与进行比较`ar + N`，这不涉及取消引用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-18T13:31:39.227

> &ar[N] 是在没有找到任何东西时检查情况的有效值吗？

您可以使用`ar+N`代替`&ar[N]`，因为`ar +N`它是安全的，但`&ar[N]`属于未定义行为的区域（实际上对此存在长期争论）。

从语义上讲，第二个参数*实际上是范围的* **结尾，因此当范围内***没有*找到任何内容时，将返回作为第二个参数传递的任何内容。在您的情况下，`ar + N`是第二个参数，它也表示范围的*结束*。所以你可以这样写：

```
if ( std::find(ar, ar + N, value) != (ar + N) )
{ 
       //value found
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-18T13:32:26.057

不，`ar[N]`在数组末尾取消引用一个元素，所以这是非法的。

请记住，这`ar[N]`相当于`*(ar + N)`- 所以它显然是一个取消引用。

去吧`ar + N`。在数组末尾有一个指针 1 是合法的，取消引用它是非法的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-16T05:41:12.513

无需使用 std::begin 或 std::end()

```
int ar[N];

if ( std::find(ar, ar + N, value) != ar+N ){ /**/ } 
```

# css - 超级鱼菜单样式问题

> ID：13934087
> 
> 赞同：1
> 
> 时间：2012-12-18T13:29:05.720
> 
> 标签：css, superfish

我试图在我的 Wordpress 主题中设计我的超级鱼菜单。我试图消除悬停时下拉菜单之间的差距。

从图片中可以看出，有一个小间隙。

我已尝试编辑以下代码，我认为该代码适用于相关部分。但是，当应用负边距时，它会使选项重叠，如图所示。

![在此处输入图像描述](../Images/0f79e7563b8a8817d01c1c39b62f877e.png)

我目前正在编辑以下代码：-

```
.sf-menu li li {
background:     #193030;
} 
```

但是放置一个margin-top：-10px；产生这个： -

![在此处输入图像描述](../Images/c5b2a9ace9d6135b58bd4537cb0cca33.png)

感谢您的帮助和建议。

谢谢

**编辑**

请查看 superfish 的完整 CSS :)

```
/*** ESSENTIAL STYLES ***/
.sf-menu, .sf-menu * {
margin:         0;
padding:        0;
list-style:     none;
}
.sf-menu {
line-height:    1.0;
}
.sf-menu ul {
position:       absolute;
top:            -999em;
width:          10em; /* left offset of submenus need to match (see below)     */
}
.sf-menu ul li {
width:          100%;
}
.sf-menu li:hover {
visibility:     inherit; /* fixes IE7 'sticky bug' */
}
.sf-menu li {
float:          left;
position:       relative;
}
.sf-menu a {
    display:        block;
position:       relative;
}
.sf-menu li:hover ul,
.sf-menu li.sfHover ul {
left:           0;
top:            2.5em; /* match top ul list item height */
z-index:        99;
}
ul.sf-menu li:hover li ul,
ul.sf-menu li.sfHover li ul {
top:            -999em;
}
ul.sf-menu li li:hover ul,
ul.sf-menu li li.sfHover ul {
left:           10em; /* match ul width */
top:            -10;
}
ul.sf-menu li li:hover li ul,
ul.sf-menu li li.sfHover li ul {
top:            -999em;
}
ul.sf-menu li li li:hover ul,
ul.sf-menu li li li.sfHover ul {
left:           10em; /* match ul width */
top:            0;
}

/*** DEMO SKIN ***/
.sf-menu {
float:          left;
margin-bottom:  1em;
}
.sf-menu a {
border-right:   1px solid #193030;  
padding:        .75em 1em;
text-decoration:none;
font: 11.5px Open Sans;
text-transform: uppercase;
color: #fff;
}
.sf-menu a, .sf-menu a:visited  { /* visited pseudo selector so IE6 applies text colour*/
color:          #fff;
}
.sf-menu li {
background:     transparent;
}
.sf-menu li a {color: #fff;}

.sf-menu li li {
background:     #193030;
margin-top: -0px;
}
.sf-menu li li a:hover {background-color: #0a1c1c;}
.sf-menu li li li {
background:     #9AAEDB;
}
.sf-menu li:hover, .sf-menu li.sfHover,
.sf-menu a:focus, .sf-menu a:hover, .sf-menu a:active {
background:     #193030;
outline:        0;
}

/*** arrows **/
.sf-menu a.sf-with-ul {
padding-right:  2.25em;
min-width:      1px; /* trigger IE7 hasLayout so spans position accurately     */
}
.sf-sub-indicator {
position:       absolute;
display:        block;
right:          .75em;
top:            1.5em; /* IE6 only */
width:          10px;
height:         10px;
text-indent:    -999em;
overflow:       hidden;
background:     url('images/arrows-ffffff.png') no-repeat -10px -100px; /* 8-bit indexed alpha png. IE6 gets solid image only */
}
a > .sf-sub-indicator {  /* give all except IE6 the correct values */
top:            1.0em;
background-position: 0 -100px; /* use translucent arrow for modern browsers*/
}
/* apply hovers to modern browsers */
a:focus > .sf-sub-indicator,
a:hover > .sf-sub-indicator,
a:active > .sf-sub-indicator,
li:hover > a > .sf-sub-indicator,
li.sfHover > a > .sf-sub-indicator {
background-position: -10px -100px; /* arrow hovers for modern browsers*/
}

/* point right for anchors in subs */
.sf-menu ul .sf-sub-indicator { background-position:  -10px 0; }
.sf-menu ul a > .sf-sub-indicator { background-position:  0 0; }
/* apply hovers to modern browsers */
.sf-menu ul a:focus > .sf-sub-indicator,
.sf-menu ul a:hover > .sf-sub-indicator,
.sf-menu ul a:active > .sf-sub-indicator,
.sf-menu ul li:hover > a > .sf-sub-indicator,
.sf-menu ul li.sfHover > a > .sf-sub-indicator {
background-position: -10px 0; /* arrow hovers for modern browsers*/
}

/*** shadows for all but IE6 ***/
.sf-shadow ul {
background: url('../images/shadow.png') no-repeat bottom right;
padding: 0 8px 9px 0;
-moz-border-radius-bottomleft: 17px;
-moz-border-radius-topright: 17px;
-webkit-border-top-right-radius: 17px;
-webkit-border-bottom-left-radius: 17px;
}
.sf-shadow ul.sf-shadow-off {
background: transparent;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:49:39.147

多亏了[可爱的弗洛里安，这个问题现在已经解决了。](https://chat.stackoverflow.com/transcript/message/6767168#6767168)

我需要修改

```
.sf-menu li.sfHover ul {
    left:           0;
    top:            2.1em; /* match top ul list item height */
    z-index:        99;
} 
```

这说明了 UL 离顶部有多远。

我希望这些知识也对其他人有所帮助。

# google-apps-script - 需要增加 URLFetch.Fetch(url) 的 Timeout

> ID：13934091
> 
> 赞同：3
> 
> 时间：2012-12-18T13:29:20.223
> 
> 标签：google-apps-script, urlfetch

我有一个 Keynote API，用于提供周至今、月至今和年初至今性能指标的指标。由于服务器端计算，本周至今响应迅速，月至今有时会超时，而年初至今总是超时。

有什么方法可以增加我的 Google 脚本的超时时间？

```
var prods = Utilities.jsonParse(UrlFetchApp.fetch(json_api_url).getContentText()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T15:25:29.987

有一些方法可以让 Google Apps 脚本在执行重复操作时处理超时，但它们不适用于这种情况。你有一个只需要很长时间的单一操作。

您无法增加 google 脚本的超时值。

# jquery - 使用 jQuery 和 sqlite 填充层次结构数据

> ID：13934094
> 
> 赞同：1
> 
> 时间：2012-12-18T13:29:31.220
> 
> 标签：jquery, html, sqlite, cordova, jquery-mobile

我在表 parents_relations 中有一些数据。我试图在一个数组（arrayCollect）中填充所有 id 都在树结构内。
我的主要问题是如何在所有事件查询完成后触发 endd() 函数。
Deferreds有可能吗？

桌子

```
persons table
persons_id  | Name 
---------------------
1       |   Name1       
2       |   Name2       
3       |   Name3   
4       |   Name4   
5       |   Name5   
6       |   Name6   
7       |   Name7   
8       |   Name8   
9       |   Name9   
10      |   Name10  
11      |   Name11  
12      |   Name12
13      |   Name13
14      |   Name14
15      |   Name15

parents_relations table
p_r_id  | contacts_id | parent_contacts_id
-----------------------------------------
1       |   11      |   3
2       |   11      |   4
3       |   3       |   1
4       |   3       |   2
5       |   9       |   3
6       |   9       |   4
7       |   8       |   1
8       |   8       |   2
9       |   5       |   1
10      |   5       |   2
11      |   4       |   14
12      |   4       |   15 
```

推迟开始

```
var startItem = {
        p_r_id: '',
        contacts_id: '',
        parent_contacts_id: '11'
    };

    var arrayCollect = [];
    var temp = [];
    temp.push(startItem);
    $.when(builder(temp))
        .done(function(dt){
              endd();
            console.log(arrayCollect);
    }); 
```

这是递归函数

```
 builder = function ( items) {
    var deferB     = $.Deferred();
    deferArr.push(deferB);

    if (items.length > 0) {
        $.each(items, function (index, persn) {
                arrayCollect.push(persn);
                $.when(sqlGet_Parents(persn.parent_contacts_id, li)

                ).done(function(ret) {
                    deferB.resolve(ret);
                    builder(ret)
                }).fail(function(){ 
                    alert("$.when(html5db.webdb.sqlGet_Parents.... failed!"); 
                });
        });
    } else { 
        deferB.resolve();
    } 
    return deferB.promise();
} 
```

这是查询功能

```
sqlGet_Parents = function(idd) {
    var deferB     = $.Deferred();
    var selectOk = function (transaction, results) {
        var arrids = [];
        for (var i = 0; i < results.rows.length; i++) {
            arrids.push(results.rows.item(i));
        }
        deferB.resolve(arrids);
    },
    selectFail = function() {
        var arrr = [];
        deferB.reject(arrr);
    };
    var db = html5db.webdb.db;
    db.transaction(function(tx){
        tx.executeSql('SELECT * from parents_relations WHERE contacts_id = ? ',
        [idd],
        selectOk,
        selectFail
        );
    });
    return deferB.promise();
}

function endd(){ 
   console.log(arrayCollect);
   alert('Finaly!!!');
} 
```

# c - PIC18F2550 记忆游戏 PIC C18 编程 LED 熄灭

> ID：13934096
> 
> 赞同：0
> 
> 时间：2012-12-18T13:29:37.153
> 
> 标签：c, memory, puzzle, pic, pic18

我正在使用 MPLAB C18 编译器为 PIC18F2550 编写用于控制记忆游戏的 c 代码。用户将通过按下相应的按钮重复一系列闪烁的 LED。有点像老式的西蒙游戏，但序列只发生了一次。

到目前为止，我一直在苦苦挣扎，我只设法打开了一些 LED，但这些按钮只会关闭 LED 片刻，然后它们会再次亮起。

到目前为止，这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <p18f2550.h>
#include <delays.h>

//#pragma config WDT = OFF //Disable watchdog timer

// LED Configuration
#define LED_PIN_0 LATAbits.LATA0 //RA0
#define LED_PIN_1 LATAbits.LATA1 //RA1
#define LED_PIN_2 LATAbits.LATA2 //RA2
#define LED_PIN_3 LATAbits.LATA3 //RA3
#define LED_PIN_4 LATAbits.LATA4 //RA4
#define LED_PIN_5 LATAbits.LATA5 //RA5
#define LED_PIN_6 LATAbits.LATA6 //RA6

// Push Button Configuration
#define PUSH_BUTTON_0 PORTBbits.RB0 //RB0
#define PUSH_BUTTON_1 PORTBbits.RB1 //RB1
#define PUSH_BUTTON_2 PORTBbits.RB2 //RB2
#define PUSH_BUTTON_3 PORTBbits.RB3 //RB3
#define PUSH_BUTTON_4 PORTBbits.RB4 //RB4
#define PUSH_BUTTON_5 PORTBbits.RB5 //RB5
#define PUSH_BUTTON_6 PORTBbits.RB6 //RB6

// Global Variables
int led_array[7] ; // array storing the pin outs
int button_array[7] ;

void main()
{
int i;
ADCON1 = 0b11111111;
TRISA = 0; // sets the LED pins to output
TRISB = 1; // sets pushbutton pins to input

PORTA = 0;
PORTB = 0;

//sequence
led_array[0] = 1 ;
led_array[1] = 0 ;
led_array[2] = 1 ;
led_array[3] = 0 ;
led_array[4] = 1 ;
led_array[5] = 1 ;
led_array[6] = 0 ;

// Configure the LEDs
LED_PIN_0 = led_array[0] ;
LED_PIN_1 = led_array[1] ;
LED_PIN_2 = led_array[2] ;
LED_PIN_3 = led_array[3] ;
LED_PIN_4 = led_array[4] ;
LED_PIN_5 = led_array[5] ;
LED_PIN_6 = led_array[6] ;

// Configure the push button array
PUSH_BUTTON_0 = button_array[0] ;
PUSH_BUTTON_1 = button_array[1] ;
PUSH_BUTTON_2 = button_array[2] ;
PUSH_BUTTON_3 = button_array[3] ;
PUSH_BUTTON_4 = button_array[4] ;
PUSH_BUTTON_5 = button_array[5] ;
PUSH_BUTTON_6 = button_array[6] ;

if ( PUSH_BUTTON_0 == 1 )
{
led_array[0] = 0;
}
if ( PUSH_BUTTON_1 == 1 )
{
led_array[1] = 1;
}
if ( PUSH_BUTTON_2 == 1 )
{
led_array[2] = 0;
}
if ( PUSH_BUTTON_3 == 1 )
{
led_array[3] = 1;
}
if ( PUSH_BUTTON_4 == 1 )
{
led_array[4] = 0;
}
if ( PUSH_BUTTON_5 == 1 )
{
led_array[5] = 0;
}
if ( PUSH_BUTTON_6 == 1 )
{
led_array[6] = 1;
}

} 
```

任何帮助是极大的赞赏！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:04:39.177

你需要一个封闭的while循环来保持你的程序执行。没有它，您的代码将执行，并且随着程序计数器返回到代码的开头，芯片将基本上重置。这就是为什么您的 LED 会短暂关闭的原因，因为您的代码会从头开始执行，并且它们都重新打开。

# c# - 当背景不透明时，装饰器中的文字消失

> ID：13934097
> 
> 赞同：1
> 
> 时间：2012-12-18T13:29:37.513
> 
> 标签：c#, wpf, xaml, background, adorner

我有一些带有一些数据的网格。如果文本太大，装饰器将显示其中的文本并充当工具提示（长篇大论，为什么我不再使用工具提示，但你们大多数人都会知道为什么......）。装饰器是一个带有边框和文本块的网格。

问题是，行的背景可以改变（例如红色）。当发生这种情况并且我将鼠标悬停在大文本上时，装饰器会出现，但没有显示文本。根据代码（调试模式），文本被加载到文本块中。

由于某种原因，当背景不正常时，不会呈现文本（意思是：它不透明）。

有谁知道如何解决这一问题？

**编辑：**经过一些测试，它似乎与位于 Adorner 中的 BorderBackground 有关。

# python - Dajaxice & Dajax DEBUG=False

> ID：13934098
> 
> 赞同：0
> 
> 时间：2012-12-18T13:29:39.050
> 
> 标签：python, dajaxice, dajax

如何关闭 Dajaxproject 警报“出现问题”？有时我的 dajax 函数返回空数据，因此 html 中的变量为无。它确实适合我，但是会显示 dajax 警报。我听说有 DAJAXICE_EXCEPTION 但我不知道如何正确使用它。当网站一般完成时，你会做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T18:06:50.400

This is purely speculative, and I haven't tested this myself, but I think the place you want to look is in line 87 of dajaxice.core.js:

```
valid_http_responses: function(){
    return {200: null, 301: null, 302: null, 304: null}
} 
```

The section which throws errors is in line 51:

```
 if(this.responseText == Dajaxice.EXCEPTION || !(this.status in Dajaxice.valid_http_responses())){
            error_callback();
    } 
```

So maybe changing `valid_http_responses` to:

```
valid_http_responses: function(){
    return {200: null, 204: null, 301: null, 302: null, 304: null}
} 
```

From Wikipedia:

```
204 No Content:
    The server successfully processed the request, but is not returning any content 
```

Maybe that will fix your issue?

# git - 将两个 repos 与 gitolite 合并

> ID：13934104
> 
> 赞同：2
> 
> 时间：2012-12-18T13:30:07.520
> 
> 标签：git, gitolite

我需要使用 Gitolite 合并两个存储库，我记得在某处看到了一些说明，但找不到它们。

组合（合并）应该在 Gitolite 中还是在另一台机器上完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:39:22.407

Gitolite 只是一个[授权层](http://sitaramc.github.com/gitolite/auth.html)。
它只是`git pull/push/clone`根据身份验证和 VREF（更新挂钩）允许或拒绝命令。

您可以使用 git 命令在本地合并两个 repo（请参阅“[如何合并两个 git 存储库？](https://stackoverflow.com/questions/1425892/how-do-you-merge-two-git-repositories) ”），然后推送到您的 Gitolite 服务器。

如果需要，Gitolite 将仅用于声明第三个 repo 以获得合并结果（除非您直接修改两个 repo 之一）

# c++ - 在 MATLAB MEX 库中使用 boost，与 MATLAB 的版本不同

> ID：13934107
> 
> 赞同：11
> 
> 时间：2012-12-18T13:30:09.787
> 
> 标签：c++, matlab, boost, mex

我们正在创建许多使用我们的通信库的 MATLAB MEX 文件。这个通信库大量使用 Boost。现在，MATLAB 在内部也使用了 boost，这意味着在标准设置中，我们不能使用与 MATLAB 附带的不同的 boost 版本，否则一切都会随之而来。

问题是，我们的 matlab 参考版本（boost 1.40）附带的 boost 版本已经很老了，并且有一些错误。我们非常想使用更新的版本。

我看到的唯一解决方案是创建一个自定义版本的 boost ，它位于不同的命名空间中。然后，名称修饰应防止命名冲突。这个解决方案有点棘手，因为 boost 还导出了一些“C”符号，并且有许多宏都需要更改。

是否有不需要创建自定义增强版本的推荐解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T08:48:25.687

一种解决方案是通过编写一个本身不依赖于 boost 的小型加载程序 mex 文件来更改 matlab 打开插件的方式，称之为*foo.mexglx*

mexFunction 调用就是这样做的

```
void mexFunction (int nlhs, mxArray * plhs[], int nrhs, mxArray * prhs[])
{
  gMexEntry (nlhs, plhs, nrhs, prhs);
} 
```

其中 gMexEntry 变量是一个函数指针，声明为

```
typedef void (*entryfunc_t)(int, mxArray**, int, const mxArray**);
entryfunc_t gMexEntry; 
```

并在加载模块时由静态构造函数填充（为简洁起见，忽略所有错误检查）。

```
fh = dlopen ('bar.mexglx', RTLD_NOW | RTLD_DEEPBIND );
void * p = dlsym (fh, "mexFunction");
gMexEntry = reinterpret_cast<entryfunc_t> (p); 
```

事件链是，当 Matlab 调用您的函数时，没有 boost 依赖的瘦包装器将使用 dlopen 的**RTLD_DEEPBIND**选项打开具有 boost 依赖的函数，*这会将符号的查找范围放置在此库中（使用您的版本升压）领先于全球范围*（使用Matlab的旧升压）。然后实际的 mexFunction 调用将转发到 bar。

如果您正确执行 cmdline 链接，使用 'ldd' 您应该会看到 ' *foo.mexglx* ' 不依赖于 boost，而 ' *bar.mexglx* ' 具有所有通常的依赖关系。

几个月来我一直在大量使用这种技术，没有明显的失败迹象。我仍然有点担心我不明白的事情可能会出错，但目前这是我唯一的解决方案（除了编写一个完整的进程外执行引擎来复制 mxArray 接口和与管道通信，或静态链接所有内容，这对我的情况不实用）

# sql - TO_DATE 为不同的格式掩码返回不同的日期？

> ID：13934111
> 
> 赞同：4
> 
> 时间：2012-12-18T13:30:21.427
> 
> 标签：sql, oracle, to-date

我正在查询以下 sql。请帮我。

```
 select to_date(sysdate, 'DD MONTH YYYY') , to_date(sysdate, 'yyyy/mm/dd hh24:mi:ss')
 from dual where 
 to_date(sysdate, 'DD MONTH YYYY') < to_date(sysdate, 'yyyy/mm/dd'); 
```

1) to_date(sysdate, 'DD MONTH YYYY') 这将给出没有时间的 Date 对象（可能时间是 00:00）。
我对么 ？如果不是，我将如何只获得没有时间的 Date 对象？
2) 从上面的查询看来 to_date(sysdate, 'yyyy/mm/dd') 大于 to_date(sysdate, 'DD MONTH YYYY')。为什么 ？？

**更新**

* * *

1) 我在上面的 URL 中的目的是找出 to_date 函数只会返回日期（或连同时间），尽管格式 'DD MONTH YYYY' 没有提到时间字符（hh:mm..）。
2）从我得到的回复中，虽然我们没有提到时间字符，但 to_date 将始终返回带时间的日期。
3) 最后只得到 DATE 我们应该使用 trunc() / to_date(to_char(sysdate,'mm-dd-yyyy'),'mm-dd-yyyy')

检查以下

```
select to_char(trunc(sysdate), 'yyyy/mm/dd hh24:mi:ss'), 
to_char(to_date(to_char(sysdate, 'yyyy-MM-dd'),'yyyy/mm/dd hh24:mi:ss'),'yyyy/mm/dd hh24:mi:ss') 
from dual; 
```

-->hh24 :24 对于获取 00:00 格式很重要。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T13:41:17.083

你刚刚开枪打中了自己的脚。它称为隐式数据类型转换。

没有`TO_DATE(date)`（这是您要求的），因此 oracle 已将您的查询转换为将`TO_DATE(TO_CHAR(sysdate), 'DD MONTH YYYY')`在哪里`TO_CHAR(sysdate)`获取默认 NLS 格式掩码。根据您的默认掩码（请参阅 NLS_SESSION_PARAMETERS），您的第一个可能已解析为 0012 年，第二个可能已解析为 0018 年。所以 0012 小于 0018。

如果你想截断 sysdate，那么就做`trunc(sysdate)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-31T09:43:25.417

如果您想在选择 SYSDATE 时查看时间部分。您可以在发出 SELECT 语句之前设置 NLS_DATE_FORMAT。

```
ALTER SESSION SET NLS_DATE_FORMAT = 'yyyy-mm-dd hh24:mi:ss'; 
```

在 IDE（今天，PLSQL Developer、SQL Developer 等）中，可以永久设置**NLS_DATE_FORMAT以供您执行的每个 select 语句使用。**在这种情况下，您不需要在 SELECT 之前运行**ALTER SESSION命令。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T13:46:51.023

广告。1.在我的测试环境中，我得到了日期：

```
select to_date('15 Maj 1998', 'DD MONTH YYYY') from dual; 
```

结果（波兰语设置）：

```
1998-05-15 00:00:00 
```

广告。2\. 为什么`sysdate`打电话的时候用`to_date`？此函数需要以给定格式描述日期时间的字符串。在我的环境中，这样的调用失败了。您可能有其他 NLS 设置，因此`sysdate`可以转换为字符串，这样的字符串会给您带来奇怪的结果。使用字符串，而不是`sysdate`.

# ms-access-2003 - 基于表单的 MS-Access 过滤报告

> ID：13934114
> 
> 赞同：1
> 
> 时间：2012-12-18T13:30:27.180
> 
> 标签：ms-access-2003

需要帮助了解 DoCmd.OpenReport 函数背后的上下文。我在一个表单上有一个按钮，它生成了一个包含我的数据库表中的所有记录的报告。我希望仅根据表单中显示的信息生成报告。我已经使用向导将命令按钮添加到我的表单以生成摘要报告，这里是自动 VBA。

```
Private Sub GenRpt_Click()
On Error GoTo Err_GenRpt_Click
Dim stDocName As String
Dim FrmId As String
stDocName = "Summary v2"
DoCmd.OpenReport stDocName, acPreview
Exit_GenRpt_Click:
Exit Sub
Err_GenRpt_Click:
MsgBox Err.Description
Resume Exit_GenRpt_Click
End Sub 
```

我知道我应该在 DoCmd.OpenReport 之后将某种条件语句插入代码中，但无法弄清楚如何从表单中传递用户 ID 以过滤报告。我的表单有一个包含 UserID 的文本框“Text31”，我的报告有一个与结果对应的文本框“tstUserID”。如何在我的 cmd 按钮单击之前将报告结果限制为仅显示在“Text31”中的用户 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:39:49.647

就像是*：

```
DoCmd.OpenReport stDocName, acPreview,,"UserID=" & Me.Text31 
```

其中 UserID 是报表记录源中包含的数字字段的名称。

如果字段是文本数据类型，则需要引号：

```
DoCmd.OpenReport stDocName, acPreview,,"UserID='" & Me.Text31 & "'" 
```

userID 似乎不太可能包含内部引号，因此上述内容应该足够安全，如果可能的话，您需要像这样转义：

```
DoCmd.OpenReport stDocName, acPreview,,"UserID='" _
    & Replace(Me.Text31,"'","''") & "'" 
```

您正在添加 WHERE 条件，它采用与查询中的 WHERE 语句非常相似的形式。

* * *

* [Openreport 的语法如下](http://msdn.microsoft.com/en-us/library/office/bb238032%28v=office.12%29.aspx)：

```
DoCmd.OpenReport(ReportName, View, FilterName, _
    WhereCondition, WindowMode, OpenArgs) 
```

# ruby-on-rails - 用于在 Ubuntu 上开发的 Ruby On Rails IDE

> ID：13934117
> 
> 赞同：1
> 
> 时间：2012-12-18T13:30:33.963
> 
> 标签：ruby-on-rails, ruby, ubuntu, ide

目前有许多 IDE 可用于 Ruby on Rails 应用程序开发。在阅读了我目前应该为 ubuntu 使用哪个 IDE 之后，我有些困惑。这些文章比现在早一年了，它提供了要使用的 IDE 信息。在工作中，我正在使用目前运行良好的 eclipse IDE。但是在家里，我在想是否有更好的使用方式，现在更友好，更易于开发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:33:12.000

假设您不熟悉诸如 emac 或 vim 之类的古老编辑器。你可以试试 Sublime Text 2

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T13:52:20.163

我会投票支持带有与 rails 完美配合的插件的 vim：

1- vim-rails ：这对于 Rails 项目来说真的很棒。允许您在视图、控制器和模型之间快速导航。在 vim 本身中使用 rake 和 rails 生成器。[https://github.com/tpope/vim-rails](https://github.com/tpope/vim-rails)

2- NERDTree：用于文件夹和文件。[https://github.com/scrooloose/nerdtree](https://github.com/scrooloose/nerdtree)

3- Fugitive 如果你使用 git，这是一个非常棒的插件。[https://github.com/tpope/vim-fugitive](https://github.com/tpope/vim-fugitive)

vim 的美妙之处在于你可以随意定制它。您可以添加 ruby​​ 自动完成和丰富的 ctags (http://ctags.sourceforge.net/) 以在功能之间快速导航。

Vim 有一个陡峭的学习曲线，但是一旦你习惯了它，它就会带来巨大的好处。Vimcasts 是一个很好的学习资源。[http://vimcasts.org/](http://vimcasts.org/)

# java - 使用 JavaAPIForKML 写入 KML 文件的问题

> ID：13934125
> 
> 赞同：2
> 
> 时间：2012-12-18T13:31:07.347
> 
> 标签：java, jaxb, eclipse-rcp, kml, jak

我试图从文本文件生成 KML 文件。当我尝试编组内存文件时，出现以下异常。有什么线索吗？

```
javax.xml.bind.PropertyException: name: com.sun.xml.bind.namespacePrefixMapper value: de.micromata.opengis.kml.v_2_2_0.Kml$NameSpaceBeautyfier@1cfa4b2
    at javax.xml.bind.helpers.AbstractMarshallerImpl.setProperty(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.MarshallerImpl.setProperty(Unknown Source)
    at de.micromata.opengis.kml.v_2_2_0.Kml.createMarshaller(Kml.java:642)
    at de.micromata.opengis.kml.v_2_2_0.Kml.marshal(Kml.java:682)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at sun.reflect.misc.Trampoline.invoke(Unknown Source)
    at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at sun.reflect.misc.MethodUtil.invoke(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:58:22.857

When using the `com.sun.xml.bind.namespacePrefixMapper` you need to ensure that you have the [**JAXB RI**](http://jaxb.java.net/) (or [**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php) on your class path.

The JDK contains a package renamed version of the JAXB RI so you could try the following property name instead:

```
com.sun.xml.internal.bind.namespacePrefixMapper 
```

**For More Information**

*   [http://blog.bdoughan.com/2011/11/jaxb-and-namespace-prefixes.html](http://blog.bdoughan.com/2011/11/jaxb-and-namespace-prefixes.html)

# sql - 此用于创建表的查询适用于开发，但不适用于实时

> ID：13934126
> 
> 赞同：0
> 
> 时间：2012-12-18T13:31:12.987
> 
> 标签：sql, sql-server-2005, windows-server-2003, sql-server-2012

```
USE [DatabaseName]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[TableName](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [URL] [varchar](max) NOT NULL,
    [User] [varchar](1000) NOT NULL,
    [Time] [datetime] NOT NULL,
 CONSTRAINT [PK_TableName] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
SET ANSI_PADDING OFF 
```

它适用于 SQL Server 2005 的开发环境，但不适用于 SQL Server 2012 并出现此错误，

> 消息 170，级别 15，状态 1，第 3 行第 3 行：“max”附近的语法不正确。

编辑

2012 实际上是 2000，但网络管理员做了一些事情，以便我可以使用 2012 管理工具工作室连接到它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:44:17.853

此错误的原因是当用户试图运行与以前版本的 SQL Server 不兼容的查询或过程或逻辑时。当 SQL Server 2000 升级到 SQL Server 2005 或 SQL Server 2008 时，数据库对象兼容性也应该升级到下一个版本。当数据库兼容性设置为以前的版本并尝试使用较新版本的程序时，它们将抛出上述错误。

**修复/解决方法/解决方案：**

使用以下命令更改数据库兼容级别。

```
EXEC sp_dbcmptlevel 'DatabaseName', 90 
```

# android - Android：将位图保存到库

> ID：13934129
> 
> 赞同：1
> 
> 时间：2012-12-18T13:31:22.483
> 
> 标签：android, bitmap, save

我创建了一个循环遍历两个位图并将像素数据存储到二维数组（compare1[][] & compare2[][]）的应用程序。

我相信我的代码在某种程度上是有效的。看起来它保存了位图，但是当我后来去画廊时它不在那里。任何想法将不胜感激；这是我的代码示例：

```
public void getPixels(int[][] compare2,int[][]compare1, int x) 
{
    Bitmap difference = Bitmap.createBitmap(width, height, Config.ARGB_8888);

    for(int i = 0; i<width-1; i++)
    {
        for(int j=0; j<height-1; j++)
        {

            int mColor = BIT.get(x).getPixel(i, j);

            int alpha = Color.alpha(mColor);
            int red = Color.red(mColor);                
            int green = Color.green(mColor);
            int blue = Color.blue(mColor);

            int xAvg = ((red+green+blue)/3);

            compare2[i][j] = xAvg;
            if ((compare1[i][j] - compare2[i][j]) < 50)
            {
                difference.setPixel(i, j, -16777216);
                //System.out.println("No Significant Change");

            }
            else
            {
                difference.setPixel(i, j, -1);
                //System.out.println("Change");
            }

        }

    }       
    try {
            String path = Environment.getExternalStorageDirectory().toString();
            OutputStream fOut = null;
            File file = new File(path,"Test.jpg");
            fOut = new FileOutputStream(file);

            difference.compress(Bitmap.CompressFormat.JPEG, 80, fOut);

            fOut.flush();
            fOut.close();
            fOut = null;

    } catch (Exception e) {
           e.printStackTrace();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:10:08.020

保存图像后，您需要调用 MediaScanner 以使图像出现在图库中：

```
Intent intent = new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://" + Environment.getExternalStorageDirectory());
sendBroadcast(intent); 
```

详细教程：[触发媒体扫描仪。](http://viralpatel.net/blogs/android-trigger-media-scanner-api/)

SO上的相关问题：[如何更新android媒体数据库](https://stackoverflow.com/questions/5250515/how-to-update-the-android-media-database)

# ios - 在模态 segue (ViewController) 中显示 UINavigationController？

> ID：13934131
> 
> 赞同：1
> 
> 时间：2012-12-18T13:31:27.567
> 
> 标签：ios, rotation, modal-dialog, modalviewcontroller

我现在已经被这个问题困住了超过 2 周！在我的项目中，我有 1 个 ViewController(slide) 我想同时启用横向和纵向。其余的所有控制器/视图(幻灯片)我只想启用纵向模式。

棘手的部分是，我所指的“ViewController”同时连接到 NavigationControllers 和 TabBarControllers。请参阅下面的方案，其中我要启用横向/纵向的 ViewController 被命名为：***ReferredViewController。***

**TabBarController ----> NavigationController ----> FristViewController --(push event)--> *ReferredViewController***

到目前为止，我已经尝试为 NavigationControllers 和 TabBarControllers创建一个***CATEGORY 。***但是由于我的 NavigationControllers 和 TabBarControllers 放置在项目的最开始，这将为整个项目设置规则。我的 ReferredViewController 放置在项目“故事板”的末尾或中间。我也尝试通过代码为单个 ReferredViewController 设置规则，但没有成功。

我最好的方法是将 FirstViewController 和 ReferredViewController 之间的事件从“推送”更改为“模态”。然后，ReferredViewController 可以同时旋转纵向/横向，并且项目的其余部分被锁定为纵向。但是，您可能知道所有导航（NavigationBar）都将丢失，用户将卡在该单张幻灯片上。

因此，我尝试在*ReferredViewController.m 文件中使用以下代码示例启用 NavigationBar：*

```
ShowTaskViewController *detailViewController = [[ShowTaskViewController alloc] init];
UINavigationController *navController = [[UINavigationController alloc]     initWithRootViewController:detailViewController];

navController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self.navigationController presentModalViewController:navController animated:YES  completion:nil];
[navController release];
[detailViewController release]; 
```

但是ofc什么也没发生，我又回到了原点：O。FML！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:10:14.680

在这一行：

```
[self.navigationController presentModalViewController:navController 
                                             animated:YES  
                                           completion:nil]; 
```

您正在合并两个 UIViewController 实例方法：

```
- (void)presentViewController:(UIViewController *)viewControllerToPresent 
                     animated:(BOOL)flag 
                   completion:(void (^)(void))completion

- (void)presentModalViewController:(UIViewController *)modalViewController 
                          animated:(BOOL)animated 
```

其中第一个现在是标准，第二个方法在 ios6 中已弃用。

此外，呈现视图控制器应该是自我（ReferredViewController），而不是自我的导航控制器。

您呈现的视图控制器可以自行关闭

```
 [[self presentingViewController] dismissViewControllerAnimated:YES 
                                                     completion:(void (^)(void))completion]; 
```

但是看看 fibnochi 的答案，这可能是您实现结果的更好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:43:53.970

你必须覆盖 UITaBarController 因为它是你的基本视图控制器。我已经为我的导航控制器做了这个。告诉我这是否有帮助。

```
@interface UINavigationController (Autorotation)

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation;
- (BOOL) shouldAutorotate;
- (NSUInteger) supportedInterfaceOrientations;
@end

@implementation UINavigationController (Autorotation)

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{

if ([self.visibleViewController isKindOfClass:[MWPhotoBrowser class]] || [self.visibleViewController isKindOfClass:[ZoomPictureViewController class]]) {
    return YES;
}
return  (toInterfaceOrientation == UIInterfaceOrientationPortrait);
}

-(BOOL) shouldAutorotate{
    return YES;
}

-(NSUInteger) supportedInterfaceOrientations{

    if ([self.visibleViewController isKindOfClass:[MWPhotoBrowser class]] ||     [self.visibleViewController isKindOfClass:[ZoomPictureViewController class]]) {
    return UIInterfaceOrientationMaskAll;
}

return UIInterfaceOrientationMaskPortrait;
 } 
```

# excel - 如何在 Excel 中从左/右箭头更改日期字符串？

> ID：13934138
> 
> 赞同：1
> 
> 时间：2012-12-18T13:31:47.097
> 
> 标签：excel, vba

在 Excel 2010 中，我有一个日期“01-01-2012”和一个左右箭头。

我需要应用宏或其他东西，以便日期中的天数会相应减少/增加。如何才能做到这一点？

示例：“01-03-2012”，当按下右箭头时，日期应更改为“02-03-2012”，下一次为“03-03-2012”等等..从[01-31 ] 注意，月份和年份永远不会改变。

我做了一个宏，可以改变我在录制宏时输入的固定日期的日期，但这还不够好。我需要它来添加/减去。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:00:09.880

我将日期为“theDate”的单元格命名为。Sub for`SubtractDay`几乎相同，`DateAdd`函数的第二个参数是-1。

```
Sub AddDay()

Dim theDate As Date
Dim newDate As Date

theDate = Sheet1.Range("theDate")

newDate = DateAdd("d", 1, theDate))

Sheet1.Range("theDate") = newDate

End Sub 
```

请注意，这是一个快速的 VBA Sub，因为这不是我的“强项”，但它会工作......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T13:57:57.473

这绝对可以通过 VBA 宏来完成。

在 Developer Tab -> Visual Basic 下，双击存在问题的单元格所在的工作表，然后执行以下事件：

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)

End Sub 
```

参数 Target 将包含选定的单元格（检查箭头之一是否是选定的单元格），然后相应地减少/增加日期值。

# htdocs - 在 htdocs 中找不到 htaccess 文件

> ID：13934145
> 
> 赞同：0
> 
> 时间：2012-12-18T13:32:05.427
> 
> 标签：htdocs

htaccess 文件存储在 htdocs 文件夹中的位置。我尝试在我的开发服务器中找到它，但我没有找到它。

每当我尝试输入无效的 url 时，它都会重定向到网站的主页。我无法找到设置的存储位置。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:34:51.417

根据您使用的操作系统，Linux 会将`.htaccess`文件识别为隐藏的 Windows 不会。

该`.htaccess`文件**可能**位于您的网络服务器的根文件夹中（例如 htdocs）。但它不需要默认存在。如果默认情况下不在那里，您可以自己创建一个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:37:45.167

您是否试图通过 Filezilla 与 FTP 连接来查找服务器机器。

如果 filezilla 意味着您看不到 htdocs 文件，那么您可以连接 Winscp 意味着您可以找到 .htaccess 文件

# mysql - 如果表中的任何值不为空，则仅显示此非空值。否则仅显示具有 null 的值

> ID：13934146
> 
> 赞同：0
> 
> 时间：2012-12-18T13:32:17.140
> 
> 标签：mysql, sql

我有桌子。

```
id    field1    field2
1     1000      500
2     1001      500
3     1002      500
4     1003      500
5     1004      500
6     1005      500
7     1006      500
8     1004      (null)
9     1003      (null)
10    1002      (null) 
```

如何进行mysql查询：

如果任何 field2 不为 null，则显示 field2 不为 null 的所有内容（id 从 1 到 7）。

如果所有 field2 为空（没有 id 从 1 到 7 的表），则显示所有 field2 其中 field2 为空（id 从 8 到 10）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:36:31.570

如果您想检索所有`field2`不是的记录，请`NULL`使用此

```
SELECT id FROM table_name WHERE field2 <> NULL; 
```

如果你想要反向使用这个

```
SELECT id FROM table_name WHERE field2 IS NULL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:05:00.783

尝试这个。

```
SELECT t.id,t.field1,t.field2
FROM t
WHERE id in (select id from t where field2 is not null)
or (select sum(ifnull(field2,0)) from t)=0 
```

如果至少有 1 个非空字段 2，它将返回字段 2 不为空的行。如果所有 field2 都为 null，它将返回所有行。

不确定这是否是您需要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T13:41:31.373

也许你的意思是`field1`如果`field2`IS NULL的值显示值

```
SELECT COALESCE(field2, field1) fieldValue
FROM   tableName 
```

*   [合并](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T13:55:30.903

```
SELECT *
FROM tab
WHERE NOT EXISTS ( SELECT id 
                   FROM tab 
                   WHERE field2 IS NOT NULL LIMIT 1) 
AND field2 IS NULL
OR field2 IS NOT NULL 
```

只是为了澄清

OP 正在寻找一个声明

有这个数据

```
id    field1    field2
6     1005      500
7     1006      500
8     1004      (null)
9     1003      (null) 
```

结果是

```
id    field1    field2
6     1005      500
7     1006      500 
```

有这个数据

```
id    field1    field2
8     1004      (null)
9     1003      (null) 
```

结果是

```
id    field1    field2
8     1004      (null)
9     1003      (null) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T14:00:45.570

也许你想要这样的东西

```
DECLARE @NullFields int;
set @NullFields=0;
select @NullFields= count(*) from tab Where field2 IS NOT NULL
if @NullFields == 0
    SELECT id FROM table_name WHERE field2 <> NULL;
else
    SELECT id FROM table_name; 
```

如果所有字段 2 都为空，那么我们选择全部。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T20:12:52.820

我知道您已经找到了可行的解决方案，但我也喜欢这种方法：

```
SELECT your_table.*
FROM your_table
WHERE
  field2 is not null =
  exists (select null from your_table where field2 is not null) 
```

`Exists (...)`如果至少有一条记录`field2`不为空，则返回 true。因此，如果存在这样的记录，则取所有行，`field2 is not null = true`这意味着取所有`field2`不为空的记录。

如果这样的记录不存在，则取所有行，`field2 is not null = false`这意味着取所有`field2`为空的记录。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-18T13:56:36.123

这个怎么样。**注意：**这是`tsql`>> `@@rowcount`

```
--If `Any NOT null` you want to select `NOT null`
Select id,field1,field2 From T1 Where field2 IS NOT null

if (@@rowcount =0) --If `All null` you want to select `null`
    Select id,field1,field2 From T1 -- no need for Where field2 IS null 
```

# php - 使用 Capifony 部署我的 Symfony2 应用程序已经开始破坏实时版本的缓存

> ID：13934155
> 
> 赞同：3
> 
> 时间：2012-12-18T13:32:43.677
> 
> 标签：php, deployment, symfony, capifony

这可能是一个小众问题，但我希望有人能提供帮助。直到昨天，当我试图将一些更改推送到生产环境时，这一直运行良好，但从那时起，最后 3 次部署都暂时破坏了现场。这是日志中的异常之一：

```
[2012-12-18 12:12:16] request.CRITICAL: Exception thrown when handling an exception (InvalidArgumentException: The directory "/path/to/app/releases/20121217134758/app/cache/prod/jms_diextra/metadata" is not writable.) [] []
[2012-12-18 12:12:18] request.CRITICAL: InvalidArgumentException: The directory "/path/to/app/releases/20121217134758/app/cache/prod/jms_diextra/metadata" is not writable. (uncaught exception) at /path/to/app/releases/20121217134758/vendor/jms/metadata/src/Metadata/Cache/FileCache.php line 17 [] [] 
```

我不明白为什么**以前版本**的缓存目录（部署前的当前版本）应该受到影响！这是我的部署中发生的地方：

```
--> Updating code base with remote_cache strategy
--> Creating cache directory...........................✔
--> Creating symlinks for shared directories...........✔
--> Creating symlinks for shared files.................✔
--> Normalizing asset timestamps.......................✔
Do you want to copy last release vendor dir then do composer install ?: (y/N)
y
--> Copying vendors from previous release..............✔
--> Downloading Composer...............................✔
--> Updating Composer dependencies..................... BREAK HAPPENS HERE OR SOON BEFORE 
```

如您所见，我的缓存目录甚至没有在部署之间共享：

```
# in deploy.rb

set :shared_files,      ["app/config/parameters.yml"]
set :shared_children, [app_path + "/logs", web_path + "/uploads", web_path + "/videos", app_path + "/spool"] 
```

值得庆幸的是，我在第一次之后就做好了准备，并且有一个 ssh 控制台坐在那里`sudo chmod -R 0777 app/cache/ app/logs/`准备好被解雇，但这并不是一个永久的解决方案。

**注意：**我目前正在将缓存/日志目录的权限作为自定义部署后挂钩处理：

```
# in deploy.rb

after "deploy:finalize_update" do
  # Ensure htaccess points to app.php and not app_dev.php
  run "sed -i 's/app_dev/app/' #{latest_release}/#{web_path}/.htaccess"

  # Use a unique APC prefix to guarantee there are no clashes
  run "sed -i 's/_VERSION/_#{release_name}/' #{latest_release}/#{web_path}/app.php"

  # Set permissions of all 'writable_dirs' using sudo
  pretty_print "--> Setting permissions"
  dirs = []
  writable_dirs.each do |link|
    if shared_children && shared_children.include?(link)
      absolute_link = shared_path + "/" + link
    else
      absolute_link = latest_release + "/" + link
    end
    dirs << absolute_link
  end
  sudo sprintf("chmod -R 0777 %s", dirs.join(' '))
end 
```

## 更新

在我最近的部署中，我注意到异常在稍后开始发生，因此它与依赖项无关。我怀疑造成这种情况的原因可能是执行 cron 调用当前版本的控制台，然后显然会影响缓存。这是有道理的，因为我最近才设置了 cron。

但我不确定如何解决这个问题。查看文档中的[设置权限](http://symfony.com/doc/current/book/installation.html#configuration-and-setup)部分，似乎有几个选项。我什么都不知道，`setfacl`所以我担心会破坏一些东西。使用该`umask`选项是个好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:52:38.820

`umask`正如我在更新中提到的那样，我最终选择了这个选项。虽然，我认为这是由控制台引起的问题，但我只取消了`umask(1000);`-not或. 自从进行此更改以来，我进行的几次部署都没有出现问题，所以我想它已经成功了。`app/console``web/app.php``web/app_dev.php`

# c# - C# 中的 AS3“RSAKey”等效项

> ID：13934159
> 
> 赞同：-10
> 
> 时间：2012-12-18T13:32:50.917
> 
> 标签：c#, actionscript-3

首先对不起我的英语不好。

我必须使用与 RSAKey 类似的类，来自 C# 中的[hurlan](http://www.adventeer.com/map/_RSA/RSAKey.as)，但我找不到类似的东西，而且我真的不明白这个类到底是做什么的。

您是否知道与此等效的方法（以 BouncyCastle 中的示例为例），或者您能解释一下它的确切作用吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:55:54.413

[在此处](http://en.wikipedia.org/wiki/RSA_%28algorithm%29)阅读有关 RSA的更多信息。它是一种公钥加密协议。（阅读[什么是公钥加密？](http://en.wikipedia.org/wiki/Private_key)）

在 C# 中，您必须使用：

*   使用 .Net 4.5：[System.Security.Cryptography.RSACryptoServiceProvider](http://msdn.microsoft.com/fr-fr/library/system.security.cryptography.rsacryptoserviceprovider.aspx)
*   使用 WinRT：[AsymmetricKeyAlgorithmProvider](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.cryptography.core.asymmetrickeyalgorithmprovider.aspx)

希望这可以帮助

# objective-c - 是否可以在 2 `UICollectionView` 之间移动对象

> ID：13934162
> 
> 赞同：2
> 
> 时间：2012-12-18T13:32:57.123
> 
> 标签：objective-c, uicollectionview

我正在合作 `UICollectionView`，我有 2 个收藏。我需要通过拖动将对象从第一个移动到第二个。我的项目基于[LXReorderableCollectionViewFlowLayout](https://github.com/lxcid/LXReorderableCollectionViewFlowLayout)。

是否可以通过拖动在 2 之间移动对象 `UICollectionView`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:46:53.380

是的！（有一个警告）

您需要替换委托方法 willMoveToIndexPath 并进行一些修改：

```
 - (void)collectionView:(UICollectionView *)theCollectionView layout:(UICollectionViewLayout *)theLayout itemAtIndexPath:(NSIndexPath *)theFromIndexPath willMoveToIndexPath:(NSIndexPath *)theToIndexPath
{

/*  code removed from example code
id theFromItem = [self.deck objectAtIndex:theFromIndexPath.item];
[self.deck removeObjectAtIndex:theFromIndexPath.item];
[self.deck insertObject:theFromItem atIndex:theToIndexPath.item];
 */

NSLog(@"From: %d %d    To: %d %d", theFromIndexPath.section, theFromIndexPath.row, theToIndexPath.section, theToIndexPath.row);

    NSMutableArray *fromSectionArray = mySectionArray[theFromIndexPath.section];
NSMutableArray *toSectionArray = mySectionArray[theToIndexPath.section];
id theFromItem = fromSectionArray.myItemArray[theFromIndexPath.item];
[fromSectionArray.myItemsArray removeObjectAtIndex:theFromIndexPath.item];
[toSectionArray.myItemsArray insertObject:theFromItem atIndex:theToIndexPath.item]; 
```

}

我只是在这里写代码（它可能有错误），但我想你明白我在做什么的要点。我只是为部分添加一层，而不是假设“从”和“到”项目来自同一部分。

警告：此代码有效，但如果该部分最初没有项目，我会遇到问题。

希望这可以帮助。

# gnuplot - Gnuplot 中非数值数据的 x 范围

> ID：13934163
> 
> 赞同：4
> 
> 时间：2012-12-18T13:33:00.557
> 
> 标签：gnuplot

运行以下脚本时，我收到一条错误消息：

```
set terminal postscript enhanced color
set output '| ps2pdf - histogram_categorie.pdf'
set auto x
set key off
set yrange [0:20]
set style fill solid border -1
set boxwidth 5
unset border
unset ytic
set xtics nomirror
plot "categorie.dat" using 1:2 ti col with boxes 
```

我得到的错误信息是

```
smeik:plots nvcleemp$ gnuplot categorie.gnuplot 

plot "categorie.dat" using 1:2 ti col with boxes
                                            ^
"categorie.gnuplot", line 13: x range is invalid 
```

该文件的内容`categorie.dat`是

```
categorie   aantal
poussin  13
pupil  9
miniem  15
cadet  15
junior  6
senior  5
veteraan  8 
```

我知道问题是我没有定义 x 范围。我怎样才能让他使用第一列作为 x 范围的值？还是我需要将行号作为 x 范围并让他使用第一列作为标签？我正在使用 Gnuplot 4.4。

我最终试图得到一个看起来与我之前制作的情节相同的情节。那个工作正常，但在 x 轴上有数字数据。

```
set terminal postscript enhanced color
set output '| ps2pdf - histogram_geboorte.pdf'
set auto x
set key off
set yrange [0:40]
set xrange [1935:2005]
set style fill solid border -1
set boxwidth 5
unset border
unset ytic
set xtics nomirror
plot "geboorte.dat" using 1:2 ti col with boxes,\
     "geboorte.dat" using 1:($2+2):2 with labels 
```

文件的内容`geboorte.dat`是

```
decennium aantal
1940  2
1950  1
1960  3
1970  2
1980  3
1990  29
2000  30 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T14:04:49.480

该`boxes`样式要求 x 值是数字。这很简单，我们可以给它一个伪列 0，它本质上是脚本的行号：

```
plot "categorie.dat" using (column(0)):2 ti col with boxes 
```

现在您可能希望以某种方式在绘图的第一列中获取信息。我假设您希望这些字符串成为 x-tics：

```
plot "categorie.dat" using (column(0)):2:xtic(1) ti col with boxes 
```

*注意这里，这可能不适用于您当前的`boxwidth`设置。您可能要考虑`set boxwidth 1`或`plot ... with (5*column(0)):2:xtic(1) ...`。

**编辑**- 以您在上面发布的数据文件，我已经测试了上述两个更改以使 boxwidth 正确，并且两者似乎都有效。

# c# - System.Data.Spatial DbGeography.Distance 单位？

> ID：13934169
> 
> 赞同：31
> 
> 时间：2012-12-18T13:33:28.740
> 
> 标签：c#, gps, entity-framework-5, spatial

当使用距离的单位测量两个位置之间的距离时，距离 `DbGeography.Distance(otherLocation)`的单位是什么？

即使是 msdn 信息和 intellisense 也无法指定距离的单位。

有谁知道？

[编辑] 我正在使用 srid 4326。大多数示例似乎都在使用它。据我所知，4326 似乎是弧度，这让我完全一无所知。弧度用于测量角度/度数，那么这在现实中意味着什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-18T14:15:07.503

几篇文章似乎同意在 4326 中使用米作为距离单位。

WGS 84 也以米为单位，这可能就是使用米的原因。

[http://blogs.msdn.com/b/adonet/archive/2011/06/30/walkthrough-spatial-june-ctp.aspx](http://blogs.msdn.com/b/adonet/archive/2011/06/30/walkthrough-spatial-june-ctp.aspx) [http://www.jasonfollas.com/blog/archive/2011/07/20 /entity-framework-spatial-first-look.aspx](http://blogs.msdn.com/b/adonet/archive/2011/06/30/walkthrough-spatial-june-ctp.aspx) [http://blog.simplecode.eu/post/DistancesWithDbGeographyAndDbGeometry](http://blog.simplecode.eu/post/DistancesWithDbGeographyAndDbGeometry)

# sql - SQL PLUS 触发编译错误

> ID：13934170
> 
> 赞同：0
> 
> 时间：2012-12-18T13:33:36.660
> 
> 标签：sql, oracle, plsql

我正在尝试创建一个触发器来计算每个插入命令的派生属性。但是我收到编译错误，我不知道问题出在哪里。

```
CREATE OR REPLACE TRIGGER NewTrigger 
BEFORE INSERT 
ON Dates FOR EACH ROW 
 BEGIN 
   SET :NEW.difference := :NEW.date1 - :NEW.date2; 
 END; 
```

显示错误向我显示以下信息：

```
LINE/COL ERROR
-------- -----------------------------------------------------------------
1/7  PL/SQL: SQL Statement ignored
1/11     PL/SQL: ORA-00922: missing or invalid option 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:28:11.863

这不是触发器，而是数据类型。如果从另一个日期减去一个日期，结果是一个间隔，而不是另一个日期：

```
CREATE TABLE dates (date1 DATE, date2 DATE, datediff DATE, numdiff NUMBER);
INSERT INTO dates (date1, date2) VALUES (sysdate, sysdate-1);

UPDATE dates SET numdiff = date1 - date2;
1 rows updated

UPDATE dates SET datediff = date1 - date2;
SQL Error: ORA-00932: inconsistent datatypes: expected DATE got DATE JULIAN 
```

因此，如果触发器将间隔存储在一个数字中，它会编译：

```
CREATE OR REPLACE TRIGGER newtriggernum
  BEFORE INSERT ON dates FOR EACH ROW
BEGIN
  :new.numdiff := :new.date1 - :new.date2;
END;
/
TRIGGER NEWTRIGGERNUM compiled 
```

如果它将间隔存储在日期中，则不会：

```
CREATE OR REPLACE TRIGGER newtriggerdate
  BEFORE INSERT ON dates FOR EACH ROW
BEGIN
  :new.datediff := :new.date1 - :new.date2;
END;
/
Error(2,11): PL/SQL: ORA-00922: missing or invalid option 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:42:57.907

```
CREATE OR REPLACE TRIGGER NewTrigger
BEFORE INSERT ON Dates FOR EACH ROW
BEGIN 
    :NEW.difference := :NEW.date1 - :NEW.date2;
End;
/ 
```

# objective-c - 数组中的对象

> ID：13934176
> 
> 赞同：1
> 
> 时间：2012-12-18T13:33:57.563
> 
> 标签：objective-c, xcode, arrays, object

如何创建相同对象的多个实例并以有效的方式在数组中调用它们？我知道 for 循环，但不熟悉 Objective-C 语法。这是我目前拥有的：

视图控制器.h

```
NSArray *wArray;
NSInteger w0, w1, w2, w3, w4, w5, w6, w7 , w8, w9, w10, w11, w12, w13, w14, w15, w16, w17, w18, w19, w20, w21, w22, w23, w24, w25, w26, w27, w28;

@property NSArray *wArray;
@property NSInteger w0, w1, w2, w3, w4, w5, w6, w7, w8, w9, w10, w11, w12, w13, w14, w15, w16, w17, w18, w19, w20, w21, w22, w23, w24, w25, w26, w27, w28;
@end 
```

视图控制器.m

```
@synthesize w0, w1, w2, w3, w4, w5, w6, w7 , w8, w9, w10, w11, w12, w13, w14, w15, w16, w17, w18, w19, w20, w21, w22, w23, w24, w25, w26, w27, w28, wArray;

wArray = [NSArray arrayWithObjects: w0, w1, w2, w3, w4, w5, w6, w7 , w8, w9, w10, w11, w12, w13, w14, w15, w16, w17, w18, w19, w20, w21, w22, w23, w24, w25, w26, w27, w28, nil]; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:36:09.220

创建一个 NSMutableArray 并使用：

```
 for(int i = 0; i < 20; i++) {
        [array addObject:someObject];
    } 
```

如果你想存储整数，你可以使用：

```
NSNumber *someObject = [NSNumber numberWithInteger:1]; 
```

然后，您可以通过以下方式访问这些对象：

```
[array objectAtIndex:1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:37:27.490

为什么不使用`int`as数组

```
int num[29]; //NSInteger and int are the same 
```

并以

```
num[0] = 15;
num[1] = 19;
...
...
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T13:38:17.857

```
for(int i = 0; i < 20; i++)
 {
    [yourarray addObject:[NSString stringWithFormat:@"w%d",i]];
 } 
```

# html - 输入类型“数字”如果太高会改变值 - 但为什么呢？

> ID：13934177
> 
> 赞同：2
> 
> 时间：2012-12-18T13:34:16.590
> 
> 标签：html, input, numbers

我有一个类型编号的输入字段：

```
<input type="number" id="cardNumber" /> 
```

当键入“1234567891234567”作为值时，最后 2 位数字发生变化，新值变为：“1234567891234570”

我想这是因为限制，但有人知道限制是什么吗？也许一些官方规格说明了这一点？

如果有人在解决方案中发现此问题，手机将如下所示：

```
Android: <input type="tel" id="cardNumber" />
IOS: <input type="text" id="cardNumber" pattern='[0-9]*' /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:47:27.457

如果有限制，我不完全确定限制是多少。我在[w3schools 示例](http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_input_type_number)中自己尝试过，它似乎会返回数字，只要它适合文本框，所以它似乎更依赖于文本框的大小而不是实际的类型数字属性。

`max`尽管您正在寻找设置一个或值输入类型编号，但您的情况似乎`min`恰好具有该属性作为您可以设置的属性。我希望这回答了你的问题。

# c# - 线程安全的单例将在哪个上下文中运行？

> ID：13934187
> 
> 赞同：1
> 
> 时间：2012-12-18T13:34:44.643
> 
> 标签：c#, multithreading, singleton

如果使用从多个线程访问的单例，并且单例本身是线程安全的，那么访问单例时哪个线程会阻塞？

例如认为有一个主线程 A 。A 首先访问了单例 S。然后执行其他操作。

稍后线程 B 访问单例 S。

如果 B 访问 S，单例是否仍然在线程 A 的上下文中，并且还会阻塞线程 A 或仅阻塞线程 B（以及其他试图实际访问它的线程？）

```
-> accesses
A->S {}
A->X {}
B->S {
...
C-S 
} - will B only block C or also A? 
```

* * *

回答问题：线程安全单例（精简）：

```
private static volatile Singleton instance;
    private static object _sync = new Object();

    private Singleton() {
        // dosomething...
    }

    public static Singleton Instance
    {
        get
        {
            if (instance == null)
            {
                lock (_sync)
                {
                    if (instance == null)
                        instance = new Singleton();
                }
            }

            return instance;
        }
    } 
```

（并导致锁定方法）

这个问题主要针对以下几点：我知道锁会阻止多个线程访问同一代码区域。我的问题具体到以下几点：

如果产生Singleton的作用域的原始线程没有持有锁，那么如果另一个线程访问该锁，它是否也会被阻塞，因为在该作用域中创建了Singleton Instance？单例只会在原始线程的范围内运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:47:11.600

通常，单例的线程安全意味着互斥。也就是说，如果一个线程需要使用单例，它必须获取一个锁/令牌，做它需要做的，然后释放这个令牌。在它持有令牌的整个过程中，没有其他线程能够获取它。任何尝试的线程都将被阻塞并放入 FIFO 队列，并在持有者释放令牌后立即接收令牌。这确保了一次只有一个线程访问受保护的资源（在这种情况下为单例对象）。

这是典型的场景；您的里程可能会有所不同。

在相关的说明中，大多数人[认为 Singleton 是一个坏主意](https://stackoverflow.com/questions/1448393/singleton-design-pattern-pitfalls)。

C# 的同步机制在 makc 链接的教程的第 2 部分中进行了介绍，这非常好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:49:39.817

线程安全通常意味着一次只有一个线程可以访问它。关键部分周围的锁定将意味着尝试运行该代码段的多个线程将被阻止，并且一次只有一个线程可以继续并访问它。

让我们在您的问题中假设该类在类级别同步，然后当 A 在 S 上调用方法时，任何其他尝试同时调用 S 的线程*都*必须等到 A 完成。

一旦 A 完成运行 S，则可以重新调度所有等待线程，其中一个将获得锁并运行 S（阻塞任何剩余的等待线程）。

同时...A 可以在其他人访问 S 时继续运行 X（除非他们共享相同的锁）。

将锁——特别是本例中的互斥锁——视为一个令牌，只有持有该令牌的线程才能运行它所保护的代码。完成后，它会丢弃令牌，并且拾取它的下一个线程可以继续。

通常，您的同步是在比整个类更细粒度的级别上完成的，例如在特定方法或方法中的特定代码块上。这避免了线程在它们实际上都可以访问互不影响的不同方法时浪费时间等待。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T13:55:02.807

这将取决于您的单例或任何其他对象的*线程安全程度。*

例如，如果您使用`Monitor`or `Mutex`，则只有一个线程可以通过这些线程同步方法之一访问受保护的代码块。假设一个线程试图进入一个同步代码块，而另一个线程获得了锁：那么第二个线程将等待第一个线程释放锁。

另一方面，如果您使用 a `Semaphore`，您将定义有多少线程可以通过受保护的代码块。假设同时`Semaphore`允许 8 个线程。如果可能的第 9 个线程尝试进入受保护的代码块，它将等待直到`Semaphore`通知有一个或多个可用于排队线程的插槽。

在使用多线程时同步对象有不同的策略。

检查此 MSDN 文章：

*   [http://msdn.microsoft.com/en-us/library/ms173178(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/ms173178(v=vs.110).aspx)

# 更新

我已经在您更新的问题正文中检查了您的代码。

**明确地说：是的。任何线程，即使是主线程，都将被阻塞，直到获得锁的线程释放它**

想象一下，情况并非如此：一些线程规则适用于除主线程之外的任何线程。这将是一个拥有非同步代码区域的机会。

`lock`语句编译成类似 a `Monitor.Enter`and的东西`Monitor.Exit`。这意味着被*锁定的对象*获得了当前线程的排他锁。

# 更新 2

取自一些OP评论：

> 你能解释一下为什么吗？我的意思是，如果主线程此时对单例不做任何事情，那么线程不会尝试获取该锁？

哎呀！我觉得你忘记了线程是如何工作的！

当您使用线程同步方法（例如`Monitor`（`lock`关键字在`Monitor`幕后使用 a ））保护代码区域时，您将阻塞任何试图进入受保护/同步对象的线程，而不是*阻塞任何工作线程，直到`Monitor`释放 lock*。

假设有两个线程*A*和*B*，并且您有以下代码：

```
lock(_syncObject)
{
    // Do some stuff
} 
```

线程*A*穿过同步代码区域，而*B*是后台工作人员，正在做一些其他不会穿过受保护区域的事情。**在这种情况下，*B*不会被阻止**。

换句话说：当您同步对某个区域的线程访问时，您正在保护一个对象。`lock`（或`Mutex`，`AutoResetEvent`或其他）不等同于诸如假设的东西`Thread.SleepAll()`。如果*任何*线程启动并工作并且没有人通过同步对象访问，则不会阻塞任何线程。

# iphone - 如何在 iPhone 5 中打开现有应用程序

> ID：13934197
> 
> 赞同：1
> 
> 时间：2012-12-18T13:35:09.210
> 
> 标签：iphone, objective-c, ios, ios6

当我在 iPhone 5 中运行一个已经开发（在 iPhone 4S 中工作）的应用程序而没有 4 英寸屏幕的启动图像时，用户界面正在中断。即，它没有显示信箱视图（屏幕顶部和底部都有黑色补丁的视图），而是仅在底部显示一些白色补丁，并将整个 UI 移到顶部。我知道与启动图像相关的问题，但没有它至少应该显示信箱类型的视图。但这甚至行不通。可能知道可能是什么原因？

# mysql - 如何在多个表中选择值？

> ID：13934202
> 
> 赞同：0
> 
> 时间：2012-12-18T13:35:29.720
> 
> 标签：mysql, sql, database, join, count

我有以下数据库结构：

```
car
+----------+------------+----------------+-----------------+
| car_id   | car_name   | car_model_id   | car_factory_id  |
+----------+------------+----------------+-----------------+

car_model
+---------------+----------------+
| car_model_id  | car_model_name |
+---------------+----------------+

factory
+-------------+---------------+-------------------+
| factory_id  | factory_name  | factory_location  |
+-------------+---------------+-------------------+

factory_location
+----------------------+------------------------+
| factory_location_id  | factory_location_name  |
+----------------------+------------------------+ 
```

我想：

*   列出所有工厂
*   计算每个工厂生产的汽车数量
*   按 car_model 分组

输出应该是这样的：

```
| factory_id | car_model_id = 1 | car_model_id = 2 | car_model_id = ... |
+------------+------------------+------------------+--------------------+
| 1          |        145       |       3307       |         ...        |
+------------+------------------+------------------+--------------------+
| 2          |       32798      |        345       |         ...        |
+------------+------------------+------------------+--------------------+
| 3          |         0        |        10        |         ...        |
+------------+------------------+------------------+--------------------+
| ...        |        ...       |        ...       |         ...        |
+------------+------------------+------------------+--------------------+ 
```

我最接近的尝试是这个请求，但这仍然不是我想要的：
`SELECT COUNT(car_id) FROM car GROUP BY car_factory_id AND car_model_id`

我的 RDBMS 是 MySQL 5.1。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:46:28.980

您通常不能通过 rows 的值参数化列数，使用 sql 数据库查询您想要的内容的惯用方法是获得如下内容：

```
factory_id | car_model_id | count
1          | 1            | 145
1          | 2            | 3307
...
4          | 1            | 3245
4          | 2            | 38 
```

在这种情况下，你会这样做：

```
SELECT factory_id, car_model_id, COUNT(*) FROM factory
INNER JOIN car ON factory_id = car_factory_id GROUP BY factory_id, car_model_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:35:10.440

试试这个， ;）

```
SELECT  a.factory_name , c.car_model_name,
        COUNT(b.car_factory_id) totalCount
FROM    factory a
        LEFT JOIN car b
            ON a.factory_id = b.car_factory_id
        LEFT JOIN car_model c
            ON b.car_model_id = c.car_model_id
GROUP BY a.factory_name , c.car_model_name
ORDER BY factory_name ASC 
```

# php - 如何将日期过滤器添加到mysql。Joomla

> ID：13934208
> 
> 赞同：1
> 
> 时间：2012-12-18T13:35:52.637
> 
> 标签：php, mysql, joomla

```
<?php
        $database = & JFactory::getDBO();
        $query = "SELECT asset_id FROM #__content WHERE state = 1";
        $database->setQuery( $query );
        $count_at = $database->loadObjectList();
        $count_nbr = count($count_at);
?> 
```

所以`$count_nbr`返回所有创建和发布的文章，但我需要添加“今天”过滤器。如果某些大师可以请... 需要 2 种类型的过滤器：“1 天”和“一周”...

更新：添加`$date = date (Y-m-d);`amd 修改字符串`SELECT asset_id FROM #__content WHERE state = 1 AND publish_up = $date;`无助于导致 mysql Ymd H:i:s 中的 publish_up，我需要忽略时间戳...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:49:00.990

要获得今天发表的文章：

```
$today = date('Y-m-d');
$query = "SELECT asset_id FROM #__content WHERE state = 1 AND DATE_FORMAT(publish_up, '%Y-%m-%d') = '$today'";
... 
```

这使用 MySQL[`DATE_FORMAT()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html)函数将发布的日期格式化为`Y-m-d`格式化，以便您可以比较它。

要获得本周发表的文章，请使用以下[`YEARWEEK()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_yearweek)功能：

```
$query = "SELECT asset_id FROM #__content WHERE state = 1 AND YEARWEEK(publish_up) = YEARWEEK(NOW())"; 
```

# php - 自定义实时搜索任务的最佳解决方案

> ID：13934209
> 
> 赞同：1
> 
> 时间：2012-12-18T13:35:56.693
> 
> 标签：php, search

我将向网站添加简单的实时搜索（在输入框中输入文本时的提示）。

主要任务：

*   用于搜索的 39k 纯文本行（每行约 500 行，总大小为 4Mb）
*   1k 在线用户可以同时在输入框中输入内容
*   在某些情况下，2k-3k 结果可以匹配用户请求

我担心以下问题：

*   数据库VS文本文件？
*   是否有与我的旨在减少数据库/服务器内存负载的任务相关的一般规则或最佳实践？（缓存/索引/等）
*   Sphinx/Solr 是否适合此类任务？

任何链接/建议都将非常有帮助。

谢谢

PS这可能是最好的解决方案吗？[PHP在txt文件中搜索并回显整行](https://stackoverflow.com/questions/3686177/php-to-search-within-txt-file-and-echo-the-whole-line)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:04:45.093

将您的数据放入数据库中（`SQLite`应该可以，但您也可以使用更强大的 RDBMS，例如`MySQL`or `Postgres`），并在将要搜索的列上放置索引。

只做绝对最小值，这意味着您不应该使用框架、ORM 等。它们只会减慢您的代码速度。

创建一个 PHP 文件，获取搜索文本并`SELECT`使用原生 PHP 驱动程序（例如`SQLite`、或类似驱动程序`MySQLi`）进行查询。`PDO`

另外，考虑一下搜索框将如何工作。您可以阻止许多请求，例如设置最小字符限制（仅搜索一两个字符没有意义），在发送请求之间设置短暂延迟（这样您就不会发送从未使用过的请求），等等。

是否使用 Solr 等扩展取决于您的具体情况。如果您有大量数据和大量请求，那么也许您应该调查一下。但是，如果可以使用简单的解决方案来解决问题，那么您可能应该先尝试一下，然后再使其变得更复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:10:03.717

过去，我使用[Zend 搜索 Lucene](http://framework.zend.com/manual/1.12/en/zend.search.lucene.html)取得了巨大成功。

它是一个完全用 PHP 5 编写的通用文本搜索引擎。它管理您的资源的索引并且速度非常快（根据我的经验）。它支持多种查询类型、搜索字段、搜索排名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T14:11:47.110

我已经多次实施“实时搜索”，总是使用 AJAX 来查询数据库（MySQL），并且还没有/观察到任何速度或大负载问题。

无论如何，我看到了一个使用 Solr 的实现，但不能建议它是更快还是消耗更少的资源。

它完全取决于服务器将运行的硬件，IMO。正如我在某处写的那样，我看到一个服务器的文件系统非常慢，因此在读取和解析 txt 文件（或使用 Solr）时实现实时搜索可能比查询数据库时慢。另一方面，您可以通过慢速数据库连接（随着更多并发连接变得更慢）托管在较差的共享虚拟主机上，因此这不是最佳解决方案。

我的建议：将 MySQL 与 AJAX 一起使用（查看[这个 jquery 插件](http://www.htmlblog.us/jquery-autocomplete)或[这篇文章](http://www.jensbits.com/2010/03/29/jquery-ui-autocomplete-widget-with-php-and-mysql/)），在搜索的列上设置适当的`INDEX`es，如果发现速度很慢，您仍然可以移动到 txt 文件。

# php - 用jquery更改php变量值

> ID：13934211
> 
> 赞同：0
> 
> 时间：2012-12-18T13:36:02.940
> 
> 标签：php

我有以下问题。我正在构建一个表单，用户可以在其中从选择选项中选择一个值，并且我想将该值保存到一个 php 变量中。表单和所有内容都在同一个 php 文件中。反正有没有用jquery实现类似的东西？

我不想提交表单，只是为了更改 php 变量的值。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:47:51.047

当用户收到 HTML 表单时，您的脚本不再运行，因为请求结束。因此，没有可以设置的变量。

但是，您可以通过 jQuery.ajax() 使用您的选择字段的值发送一个新请求。如何处理这个请求，很大程度上取决于你想用用户提供的值做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:40:58.063

我认为你不能。您可以对 PHP 进行 ajax 调用，但这将在后台再次加载相同的页面。这不会使用当前加载页面的 php 变量。

也许您可以向我们提供一些示例代码，以便更好地了解您尝试实现的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T13:47:14.490

不，不提交表格是不可能的。您可以通过 DOM 使用 JS 在页面上操作任何元素，从而形成元素的值，并且当提交表单时，它们成为服务器端的 PHP 变量。PHP 变量只能在服务器端更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T13:51:42.700

*PHP*是一种**服务器端**语言，而*Javascript*只是一种**客户端**语言。除非您进行**[AJAX](http://www.w3schools.com/ajax/default.asp)**（*[jQuery 版本](http://api.jquery.com/jQuery.ajax/)*）调用或**表单提交**，否则您的*Javascript*将永远不会与*PHP*通信。

# java-me - j2me（2d）中的赛车游戏

> ID：13934218
> 
> 赞同：2
> 
> 时间：2012-12-18T13:36:38.240
> 
> 标签：java-me

我正在开发顶视图的赛车游戏。道路是笔直的，几乎没有弯道。如何倾斜道路以转弯。

在 j2me 中没有任何方法可以旋转图像。我参考并尝试 [了以下链接](http://www.developer.nokia.com/Community/Discussion/showthread.php?206189-J2me-Image-Rotation&p=764607&viewfull=1#post764607)。但是在设备响应时间很慢..

![在此处输入图像描述](../Images/df9ccfb3e31e9ae641bf668779c1bcf5.png)

![在此处输入图像描述](../Images/4271bd8094eaa0770aa3e310d13c9d62.png)

如何让这个游戏玩......任何参考或链接？

# android - 无法测试 admob API 引发 Ad failed 错误

> ID：13934219
> 
> 赞同：0
> 
> 时间：2012-12-18T13:36:41.940
> 
> 标签：android, admob

当我尝试测试 Admob api 时，我的 logcat 中出现以下错误。

```
 Ad failed: com.google.ads.AdView{40db6b18 V.E..... ......I. 0,0-480,610 #7f070001 app:id/adView}Ad request successful, but no ad returned due to lack of ad inventory. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:15:49.233

您的 Logcat 正在展示（由于缺少广告库存而没有返回广告）。这显然意味着当时 admob 没有向您的应用程序提供任何广告。

这可能是因为填充率。当 AdMod 没有可用的广告时，您可以使用 AdSense 来帮助回填广告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:53:15.337

Admob 可以返回空白广告（取决于定位、用户偏好等），admob 中的填充率低于 100%，我对您的建议 - 创建一些“自家广告”，当您的广告为空白时会返回。

*或者简单地添加一些测试广告，因为我记得你可以在 admob 中找到这样的功能。

# c - 为什么这个 Linux 编程 C 示例代码会失败？

> ID：13934220
> 
> 赞同：0
> 
> 时间：2012-12-18T13:36:43.190
> 
> 标签：c, ubuntu

我正在尝试运行 Advanced Linux Programming 一书（清单 3.4，第 51 页）中的示例：

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <unistd.h>

/* Spawn a child process running a new program. PROGRAM is the name
 of the program to run; the path will be searched for this program.
 ARG_LIST is a NULL-terminated list of character strings to be
 passed as the program’s argument list. Returns the process ID of
 the spawned process. */
int spawn(char* program, char** arg_list) {
    pid_t child_pid;
    /* Duplicate this process. */
    child_pid = fork();
    if (child_pid != 0)
        /* This is the parent process. */
        return child_pid;
    else {
        /* Now execute PROGRAM, searching for it in the path. */
        execvp(program, arg_list);
        /* The execvp function returns only if an error occurs. */
        fprintf(stderr, "an error occurred in execvp\n");
        abort();
    }
    return 0;
}

int main() {
    /* The argument list to pass to the "ls” command. */
    char* arg_list[] = { "ls", /* argv[0], the name of the program. */
    "-l", "/", NULL /* The argument list must end with a NULL. */
    };
    /* Spawn a child process running the "ls” command. Ignore the
     returned child process ID. */
    spawn(" ls", arg_list);
    printf("done with main program\n");
    return 0;
} 
```

我得到了：

```
an error occurred in execvp
done with main program 
```

知道这里有什么问题吗？（使用 Ubuntu 10.10）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T21:36:26.553

根据汤姆的要求：

问题似乎是命名命令的字符串中的（额外）空格。

请记住，您没有调用**bash** (shell) 解释器并为其提供字符串命令。您正在“命名”一个命令，在这方面它类似于命名文件，在与可用命令（文件）进行比较时会考虑所有字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T13:40:58.507

快速猜测，无需验证：您可能必须提供 ls 命令的完整路径，例如 /bin/ls

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T13:46:08.763

您传递给 spawn 函数的“程序”参数不正确。由 execvp 的手册页指定：

这些函数的初始参数是要执行的文件的名称。

这里你要执行的文件是 /bin/ls

# asp.net - asp.net 文件上传 在页面加载时重置与服务器的连接

> ID：13934221
> 
> 赞同：4
> 
> 时间：2012-12-18T13:36:43.793
> 
> 标签：asp.net, large-file-upload

当我尝试上传 32MB 的文件时，Firefox 在页面上显示以下错误。

“ 连接已重置。与服务器的连接在页面加载时已重置。”

我试过跟随。解决方案 -

1\. 在`<system.web>`

```
<httpRuntime maxRequestLength="2000000000" executionTimeout="999999"/> 
```

2\. 在`<system.webserver>`

```
 <security>
  <requestFiltering>
          <requestLimits maxAllowedContentLength="2000000000" />
  </requestFiltering>
 </security> 
```

和

```
<compilation defaultLanguage="c#" debug="false" /> 
```

但仍然得到同样的错误。我认为问题与“executionTimeout”有关。应用程序没有为请求设置此超时。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T08:09:57.017

终于问题解决了......我们需要将两个标签都保存在配置文件中。IE

```
<httpRuntime maxRequestLength="2000000000" executionTimeout="999999"/> 
```

和

```
<security>
    <requestFiltering>
        <requestLimits maxAllowedContentLength="2000000000" />
    </requestFiltering>
</security> 
```

实际上，我正在评论一行并与另一行进行测试。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T13:47:21.633

第一：注意`maxRequestLength`以 KB 为单位，而`maxAllowedContentLength`以**字节**
为单位 所以你只允许 1MB...增加你的`maxAllowedContentLength`，例如：

```
<requestLimits maxAllowedContentLength="2000000000" /> 
```

第二：尝试更高的执行时间，例如`executionTimeout="999999"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T10:05:19.067

我已经解决了这个问题并 `<httpRuntime maxRequestLength="2097151" executionTimeout="999999"/>`在 web.config 文件中设置了： inside 标签。

如果`maxRequestLength="2000000000"`不支持，则使用范围 0-2097151

希望这可以帮助。

# asp.net-mvc - Kendo UI - Ajax MVC - JSON 始终为空

> ID：13934230
> 
> 赞同：0
> 
> 时间：2012-12-18T13:37:06.617
> 
> 标签：asp.net-mvc, json, jquery, kendo-ui

我有一个启用了排序功能的剑道网格。我想使用 jQuery 进行 ajax 回发，将排序信息发送到操作方法以执行某些操作。

```
var datasource = $(".data-table").data("kendoGrid").dataSource;
$.ajax({
    type: 'POST',
    url: '@Url.Action("ExportToPDf", "MyController")',
    dataType: 'json',
    data: { sort: datasource._sort } 
}); 
```

我可以看到`debugger`正确的值被获取并传入了 ajax 的 data 属性。我使用 FireBug 确认在 POST 操作期间传递了这些值。

```
public ActionResult ExportToPDf(List<SortDescription> sort)
{
    //Will be doing some action
    return null;
}

public class SortDescription
{   
    public string dir { get; set; }
    public string field { get; set; }
} 
```

POST 操作期间来自 Firebug 的示例数据

```
sort[0][dir]    asc
sort[0][field]  EmployeeRef 
```

当我在操作方法中保留断点时，**我能够在列表中获取一项，但属性似乎为空。**

谁能指导我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:38:50.217

尝试这样的事情：

```
$.ajax({
    url: '@Url.Action("ExportToPDf", "MyController")',
    type: 'POST',
    dataType: 'json',
    contentType: 'application/json; charset=utf-8',
    data: JSON.stringify({sort: datasource._sort })
 }) 
```

# php - 如何在数组内回显字符串？

> ID：13934231
> 
> 赞同：2
> 
> 时间：2012-12-18T13:37:09.103
> 
> 标签：php, arrays, for-loop, echo

这是我使用循环将数据加载到数组中的代码：我想用文字回显数据，但我收到错误“注意：数组到字符串的转换...”

```
for ($i = 0 ; $i < 4 ; $i++)  { 
    $options[] = $row3= mysqli_fetch_array($result3);                
}
echo $options[0]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:42:29.610

这全都是关于：

```
$options[] = $row3= mysqli_fetch_array($result3); 
```

mysqli_fetch_array($result3) 返回一个数组。所以 $row3 是一个数组，而 $options[] 是一个数组。因此，当您打印时，`$options[0]`您正在打印一个数组。

用户`print_r($options[0]);`打印完整的数组。

你也可以使用：

```
echo $options[0]['idoptions'], $options[0]['options']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:42:52.183

`mysqli_fetch_array`返回一个数组，所以`$row3`和`$options[n]`是数组，因此“注意：数组到字符串的转换...”

`$options[0][0]`将是结果集中第一行的第一个元素，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T13:43:36.870

写吧

```
for ($i = 0 ; $i < 4 ; $i++)  { 
    $options[i] = $row3= mysqli_fetch_array($result3);   
   }
print_r($options) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T13:44:26.747

[mysqli_result_array()](http://php.net/manual/en/mysqli-result.fetch-array.php)：

> `NULL`如果结果集中没有更多行，则返回对应于获取的行的字符串数组。

数组的每个索引都`$options`包含一个数组。所以如果你想要`echo`这个数组的某个特定索引，那么首先`print_r($options);`要查看每个索引的子索引`$options`。

# android - 本地服务如何在 MainThread 中运行而不影响 UI 操作

> ID：13934233
> 
> 赞同：0
> 
> 时间：2012-12-18T13:37:11.857
> 
> 标签：android, android-service

我落后于基本的 android 概念，根据文档服务在 MainThread 中运行。和 Activity(UI) 也在同一个线程中运行。android 应用程序中的 MainThread 以何种方式并行运行两个组件代码（服务和活动）。android 如何将其作为本地服务处理不是一个单独的过程。请给我详细的解释或任何具体的链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T15:46:29.870

您会注意到大多数（如果不是所有）您编写的“主 UI 线程”方法都是回调——它们不运行任何单个主循环，而是在需要时调用以执行复杂任务（即：更改 UI） . 显然有一个 android 主循环正在监听和触发这些方法。

同一个 android 主循环有时也会运行`Services`和`Handler`编码。

因此，基本简单`Services`不应启动扩展的工作循环，因为这会阻止焦点回到 UI 方法。

最后，如果 UI 方法（或`Service`或`Handler`）开始做大量工作，android 主循环将触发应用程序无响应 (ANR) 以终止应用程序。

# c# - 使用 .Take() 方法到实体的 Linq 非常慢

> ID：13934236
> 
> 赞同：6
> 
> 时间：2012-12-18T13:37:19.697
> 
> 标签：c#, asp.net, linq, entity-framework

我有一个包含 200,000 条记录的表格，我只使用前 10 条记录，`.Take()`但获取数据大约需要 10 秒。

我的问题是：该`.Take()`方法是否从数据库中获取所有数据并在客户端过滤前 10 名？

这是我的代码：

```
mylist = (from mytable in db.spdata().OrderByDescending(f => f.Weight)
                                    group feed by mytable.id into g
                                    select g.FirstOrDefault()).Take(10).ToList(); 
```

`spdata()`是一个从存储过程导入的函数。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T13:42:13.320

存储过程可能会向客户端返回大量数据，这非常慢。您不能远程查询到存储过程。使用视图或表值函数可以做到这一点。

无法在查询中使用存储过程。您只能自己执行它。

您的意图可能是`Take(10)`在服务器上执行。为此，您需要切换到内联查询、视图或 TVF。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-18T13:41:54.983

扩展方法`Take`不会从数据库*中*获取所有结果。这不是如何`Take`工作的。

但是，您的`db.spdata()`调用可能会获取所有行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T13:50:03.920

我不是 100% 确定，但我记得当您使用 EF DataContext 调用 SP 时，您会得到一个 IEnumerable 结果...

有几个是为了优化性能：

*   将搜索条件 s 作为 SP 参数传递，并在存储过程中进行过滤。

或者，如果您在 SP 中有一个非常简单的查询，您没有声明任何变量并且您只是加入一些表，那么：

*   创建一个索引视图，在其中指定您需要的查询并在其上调用 Take 方法。
    这会给你什么？您可以映射到创建的视图，EF 现在将返回 IQueryable 结果而不是 IEnumerable。这将优化 sql 命令，而不是接收所有数据，然后获取您需要的 10 个元素，将形成一个仅检索 10 个元素的 sql 命令。

我还建议您了解 IEnumerable 与 IQueryable 之间的区别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T14:05:09.133

确实如此，因为您在分组之前对数据进行了排序，而这在 SQL 中是不可能的。

您应该使用聚合从每个组中获取最高权重，然后对权重进行排序以获得最大的十个：

```
mylist = (
  from mytable in db.spdata()
  group feed by mytable.id into g
  select g.Max(f => f.Weight)
).OrderByDescending(w => w).Take(10).ToList(); 
```

# windows - 根据大小将文件平等地分组到“n”个组中

> ID：13934238
> 
> 赞同：0
> 
> 时间：2012-12-18T13:37:25.557
> 
> 标签：windows, cmd

我正在使用以下命令根据名称生成文件列表...

```
dir [folder_location] /b >[output_file_name.txt] 
```

如何将它们分组为“n”组，以使每个组的总大小相似......？

**[更新]**例如：有 1000 个文件我必须给 100 个人重新编辑。我希望他们每个人都能获得大约相同数量的文本进行编辑。这样，没有人倒霉的太多，而另一个幸运的人太少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T21:35:31.567

查看 的[`/o:s`](http://ss64.com/nt/dir.html)选项[`dir`](http://ss64.com/nt/dir.html)。要将文件组合在一起，您必须使用[`for /f`](http://ss64.com/nt/for_f.html)循环对信息进行一些解析，使用 检查文件的大小输出`%%~zA`，并在该点创建分色。

这是一个示例，它将输出`filepath = size`，不包括目录，并从大到小排序。

```
for /f "usebackq delims=" %%A in (`dir /b /o:-s /a:-d`) do echo.%%~dpnA = %%~zA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T21:42:12.450

**第一次尝试按大小范围对文件进行分组**
*（事实证明这不是 OP 想要的）*

这是一种方法。您可以根据需要调整组定义。重要的是，组限制按数字降序排列，最后一组必须为 0。

```
@echo off
setlocal
set "folder=test"
set "out=fileGroups.txt"
(
  pushd "%folder%"
  for /f "eol=: delims=" %%F in ('dir /b /a-d /os "*"') do (
    set "class="
    for %%A in (
      "100000  [>= 100,000]      "
      "10000   [10,000 - 99,999] "
      "1000    [1,000 - 9,999]   "
      "100     [100 - 999]       "
      "0       [< 100]           "
    ) do for /f "tokens=1*" %%B in (%%A) do (
      if not defined class if %%~zF geq %%B (
        echo %%C %%~nxF
        set class=1
      )
    )
  )
  popd
)>"%out%"
type "%out%" 
```

**第二次尝试将文件分成总文件长度大致相等的 n 组**
*（这是 OP 所要求的）*

通过在行号上使用模（余数）运算符将所有文件分配给一个组很简单。这些文件可以简单地按大小排序，但是第一组总是会得到*n*的任何组中最小的文件，最后一组会得到最大的。这些团体是不公平的。

假设文件大小是随机分布的，那么需要的是轮换哪个组对于任何特定的*n*组最小和最大。这个解决方案非常简单，只需一点数学。

以下代码将数字 1 到 25 分配给 5 个不同组之一，将数字写入组文件。每组的总和为 65。

```
@echo off
setlocal enableDelayedExpansion
del group*.txt
for /l %%N in (1 1 25) do (
  set /a "group=((%%N-1)+(%%N-1)/5)%%5+1"
  echo %%N >>group!group!.txt
) 
```

最终答案只是将上述内容应用于按大小排序的文件列表。这些名称通过 FINDSTR 管道传输，为每个文件分配一个“行号”。由于列表按文件大小排序，因此“行号”的排序与文件大小相同。

```
@echo off
setlocal disableDelayedExpansion
set "inFolder=test"
set "outFolder=groups"
set "groups=5"
pushd "%inFolder%"
2>nul del "%outFolder%\group*.txt"
for /f "tokens=1* delims=:" %%A in ('dir /b /a-d /os "*"^|findstr /n "^"') do (
  set "file=%%B"
  set /a "group=((%%A-1)+(%%A-1)/groups)%%groups+1"
  setlocal enableDelayedExpansion
  >>"!outFolder!\group!group!.txt" echo !file!
  endlocal
)
popd 
```

# javascript - 有没有办法将一些 HTTP 服务器事件引导到单个 javascript 函数中？

> ID：13934240
> 
> 赞同：2
> 
> 时间：2012-12-18T13:37:27.773
> 
> 标签：javascript, html, httpexception

我有一个 C# 网络服务器，它为基于浏览器的客户端提供一些 html/js/css 和图像。

我使用 javascript 动态创建页面，填充图像和 div，同时从 websocket C# 服务器接收消息。

有时，我从 websocket 收到一条消息，并尝试访问 web 服务器中可能受保护的资源。

我为此有一些自定义的 http 服务器事件（例如 406），否则[浏览器会弹出一个对话框，用于摘要身份验证登录](https://stackoverflow.com/questions/7159551/is-it-possible-to-use-digest-authentication-with-a-xmlhttprequest/13915068#13915068 "摘要认证很无聊！")。

我想知道是否有办法将所有 406 事件引导到同一个函数中，比如说

```
RegisterHttpEventHandler(406,myFunction); 
```

我想我可以将任何请求/动态负载包装在 try 和 catch 中，尽管我喜欢一种更简洁的方法。

**编辑**

这是我到目前为止实现的工作流的一个示例，并且工作正常。

```
// Websocket definition
var conn = new WebSocket('ws://' + addressIP);
// Websocket receiver callback

conn.onmessage = function (event) {
        // my messages are json-formatted
        var mObj = JSON.parse(event.data);
        // check if we have something nice
        if(mObj.message == "I have got a nice image for you"){
        showImageInANiceDiv(mObj.ImageUrl);
        }
    };

// Dynamic load image
function showImageInANiceDiv(imgUrl )
{
    var imgHtml = wrapUrlInErrorHandler(imgUrl);
    $("#imageBox").html(imgHtml);
}    

// function to wrap everything in an error handler
function wrapUrlInErrorHandler(Url)
{
    return '<img src="' + Url + '" onerror="errorHandler(\''+ Url +'\');"/>';
}

// function to handle errors
function errorHandler(imgUrl)
{
     console.log("this guy triggered an error : "  + imgUrl);
}

// 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:51:10.363

> onerror 并没有告诉我失败的原因，所以我必须制作一个 XHR 才能找到它。这是小事

你可以先试试XHR。如果失败，您知道发生了什么，如果成功，您可以显示缓存中的图像（另请参见[此处](https://stackoverflow.com/a/13920097/1048572)）。当然你也可以让它为特殊状态代码调用一些全局定义的自定义钩子——但是你需要手动调用它，没有预定义的全局事件源。

> 我想要一个类似 document.onerror 处理程序的东西，以避免每次我必须在页面中放置图像时使用 wrapUrlInErrorHandler 函数

这不可能。事件`error`（[MDN](https://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference/error)，[MSDN](http://msdn.microsoft.com/en-us/library/ie/cc197053(v=vs.85).aspx)）不会冒泡，它直接触发并且仅在`<img>`元素上触发。`wrapUrlInErrorHandler`但是，如果您不使用内联事件属性，而是使用[（传统的）高级事件处理](http://quirksmode.org/js/events_tradmod.html)，您可以绕过这个丑陋的问题：

```
function showImageInANiceDiv(imgUrl) {
    var img = new Image();
    img.src = imgUrl;
    img.onerror = errorHandler; // here
    $("#imageBox").empty().append(img);
}
// function to handle errors
function errorHandler(event) {
     var img = event.srcElement; // or use the "this" keyword
     console.log("this guy triggered an "+event.type+": "  + img.src);
} 
```

# oracle - 使用 LOOP 和 SELECT 插入

> ID：13934243
> 
> 赞同：4
> 
> 时间：2012-12-18T13:37:44.363
> 
> 标签：oracle, plsql, oracle11g

我正在尝试使用 INSERT/SELECT 组合从其他表中插入数据。我还需要插入带有特定计算的增量。但是，我无法弄清楚为什么它不起作用。

我有这样的表（temp_business_area）：

```
 ----------
 | bname  |
 ----------
 | London |
 | Sydney |
 | Kiev   |
 ---------- 
```

我想在枚举表中有这个：

```
 -----------------------------------------------------------------
 | identifier    | language_id |   code | data   | company_limit |
 ----------------------------------------------------------------|
 | BUSINESS_UNIT |    0        |   100  | London | 126           |
 | BUSINESS_UNIT |    0        |   200  | Sydney | 126           |
 | BUSINESS_UNIT |    0        |   300  | Kiev   | 126           |
 ----------------------------------------------------------------- 
```

但我得到的是：

```
-----------------------------------------------------------------
 | identifier    | language_id |   code | data   | company_limit |
 ----------------------------------------------------------------|
 | BUSINESS_UNIT |    0        |   100  | London | 126           |
 | BUSINESS_UNIT |    0        |   100  | Sydney | 126           |
 | BUSINESS_UNIT |    0        |   100  | Kiev   | 126           |
 | BUSINESS_UNIT |    0        |   200  | London | 126           |
 | BUSINESS_UNIT |    0        |   200  | Sydney | 126           |
 | BUSINESS_UNIT |    0        |   200  | Kiev   | 126           |
 | BUSINESS_UNIT |    0        |   300  | London | 126           |
 | BUSINESS_UNIT |    0        |   300  | Sydney | 126           |
 | BUSINESS_UNIT |    0        |   300  | Kiev   | 126           |
 ----------------------------------------------------------------- 
```

这是我的循环。

```
BEGIN 
    FOR x IN 1 .. 3 LOOP
         INSERT INTO enum (identifier, language_id, code, data, company_limit)
         SELECT 'BUSINESS_UNIT', 0, x*100, bname, 126 FROM temp_business_area;
    END LOOP;
END; 
```

我不知道我在哪里犯错。帮助？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-18T13:43:16.030

您正在为 中的*每一*行执行三个插入操作`temp_business_area`，这就是您最终得到 9 行的原因。

根据您对要实现的目标的描述，您根本不需要循环。

只需使用一个插入：

```
INSERT INTO enum (identifier, language_id, code, data, company_limit)
SELECT 'BUSINESS_UNIT', 
        0,  
        row_number() over (order by null) * 100, 
        bname, 126 
FROM temp_business_area; 
```

SELECT 语句将返回 3 行，每一行都将插入到`enum`表中。该`row_number()`函数将为每一行（1,2,3）返回一个递增值，乘以 100 将产生您想要的代码。

**编辑**
（在大卫的评论之后）：

窗口函数的使用确实给语句增加了一点开销。如果不需要对编号进行额外控制，则使用`ROWNUM`instead 会更有效（尽管只对三行无关紧要）。

```
INSERT INTO enum (identifier, language_id, code, data, company_limit)
SELECT 'BUSINESS_UNIT', 
        0,  
        rownum * 100, 
        bname, 126 
FROM temp_business_area; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-19T09:53:00.700

您可以使用其他两种变体：

```
declare

i integer := 1;

BEGIN 

    FOR x IN (select distinct bname from temp_business_area) LOOP

         INSERT INTO enum (identifier, language_id, code, data, company_limit)
         SELECT 'BUSINESS_UNIT', 0, i*100, x.bname, 126 FROM temp_business_area;

         i := i + 1;

    END LOOP;
END; 
```

变体 2

```
BEGIN 

        FOR x IN 1..3 LOOP

             INSERT INTO enum (identifier, language_id, code, data, company_limit)
             SELECT distinct 'BUSINESS_UNIT', 0, x*100, bname, 126 FROM temp_business_area WHERE rownum = x;

        END LOOP;
    END; 
```

# pipe - tar 可以将 b.tar 附加到从标准输入获取 a.tar 的 a.tar 上吗？

> ID：13934254
> 
> 赞同：5
> 
> 时间：2012-12-18T13:38:42.030
> 
> 标签：pipe, stdin, archive, tar

这是 git-archive-all 样式脚本的一部分，它将从 git 项目及其所有子模块生成单个 tarball。

子模块档案必须单独生成并附加到超级项目的档案中。但我想将它们即时附加到超级项目存档中，如下所示：

```
git archive --format=tar ... > super.tar
# pseudo git foreach submodule ; do
  (cd $submodule && git archive --format=tar ...) | tar -Af super.tar
# done 
```

但是 super.tar 是未修改的。并且`tar -Af super.tar -`无效。

我*可以*分两个阶段完成，但我希望我只是愚蠢，不知道如何工作。

下面分两步完成：

```
git archive --format=tar ... > super.tar
# pseudo git foreach submodule ; do
  (cd $submodule && git archive --format=tar ...) > $submodule.tar
  tar -Af super.tar $submodule.tar && rm -f $submodule.tar
# done 
```

# wpf - Unity Container Resolve 在后台线程中

> ID：13934261
> 
> 赞同：2
> 
> 时间：2012-12-18T13:39:14.857
> 
> 标签：wpf, silverlight, prism, unity-container, backgroundworker

我在后台线程中有一个来自 PRISM 的事件订阅。登录后，我加载了几个与应用程序相关的数据。我也尝试从 Unity Container 中解析 MainMenu。

```
MainMenu mainMenu = container.Resolve<MainMenu>(); 
```

这将以异常结束。必须从 STA 线程调用它，因为这些操作与 GUI 相关。这似乎完全可以理解，但是

1.  如果我使用 Dispatcher 没有异常，但它会阻塞 UI 线程，那不是我想要的。
2.  使用另一个 BackgroundWorker 或 Task Factory 不会解决问题，因为它仍在后台线程中。

那么如何在后台线程中加载与 GUI 相关的内容呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:57:26.123

尝试使用`STA`ApartmentState 创建一个线程：

```
Thread uiThread = new Thread(() =>
{
    mainMenu = container.Resolve<MainMenu>();

    // Allow the main UI thread to proceed 
    System.Windows.Threading.Dispatcher.Run();     
});               
uiThread.SetApartmentState(ApartmentState.STA);
uiThread.IsBackground = true;
uiThread.Start(); 
```

# android - Facebook android SDK 3.0 - .getInnerJSONObject() 处的 NullPointerException

> ID：13934264
> 
> 赞同：3
> 
> 时间：2012-12-18T13:39:24.013
> 
> 标签：android, nullpointerexception, facebook-android-sdk

我正在使用适用于 Android 的 Facebook SDK 3.0（最终版本）。当我尝试在已登录用户的提要上发布新状态时，我有时（并非总是）`NullPointerException`得到一个。`.getInnerJSONObject()`以下是我在里面使用的代码`new Request.Callback(){}`：

```
public void onCompleted(Response response) {
                JSONObject graphResponse = response
                                           .getGraphObject()
                                           .getInnerJSONObject();
                String postId = null;
                try {
                    postId = graphResponse.getString("id");
                } catch (JSONException e) {
                    Log.d("", "JSON error "+ e.getMessage());
                }
                FacebookRequestError error = response.getError();
                if (error != null) {
                    Toast.makeText(SessionLoginSampleActivity.this, error.getErrorMessage(), Toast.LENGTH_SHORT).show();
                } else {
                    Toast.makeText(SessionLoginSampleActivity.this, "Post successful " + postId, Toast.LENGTH_LONG).show();
                }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T20:21:45.560

如果请求中有错误，则 response.getGraphObject() 返回 null。

使用 Response 的代码应始终检查 response.getError() 在访问 getGraphObject() 之前是否返回 null。

Response 的构造函数有 3 个：一个接受 GraphObject，一个接受 GraphObjectList，一个接受 FacebookRequestError，所有字段都是 final。因此，在任何 Response 对象上，其中只有一个可以是非空的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T05:52:14.000

我经历过这一点，只是为了分享我所拥有的，也许提供的 url 或链接无效，这就是它给出 nullpointerexception 的原因。希望这会帮助其他可以遇到这种情况的人。

# sql - 在 SQL Server 中更改列的数据类型

> ID：13934265
> 
> 赞同：0
> 
> 时间：2012-12-18T13:39:25.397
> 
> 标签：sql, sql-server-2008, indexing, constraints, sql-drop

我必须更改 SQL Server 中列的数据类型。那么在做的时候有哪些限制呢？

我知道我必须删除索引和其他约束？

我必须删除非空检查吗？

在更改数据类型之前，我还需要检查哪些其他事项？

我需要删除约束并更改表，然后再次添加约束。

这是正确的方法吗？

```
DROP INDEX UX_1_COMPUTATION ON  dbo.Computation 

ALTER TABLE dbo.Computation
ALTER COLUMN ComputationID NVARCHAR(25) 

CREATE UNIQUE INDEX UX_1_COMPUTATION ON dbo.Computation (ComputationID); 
```

这里`UX_1_COMPUTATION`是唯一索引名，`Computation`是表名， `ComputationID`是列名。

这个对吗 ？

`Update`

因此，如果有`composite index`一个涉及多个列的地方，我该如何处理？这些索引包含主键列和非主键列。

当我尝试执行以下语句时

```
DROP INDEX UX_2_COMPUTATION ON  dbo.Computation 

ALTER TABLE dbo.Computation
ALTER COLUMN ComputationID NVARCHAR(25) 

CREATE UNIQUE INDEX UX_2_COMPUTATION ON dbo.Computation (ComputationID , ComputeGuid); 
```

它抛出以下异常

> SQL 删除索引 UX_2_COMPUTATION

```
 ON dbo.Computation

        ALTER TABLE dbo.Computation

        ALTER COLUMN ComputationID  NVARCHAR(10) Not Null

        CREATE INDEX UX_2_COMPUTATION 

        ON dbo.Computation (ComputationID , ComputeGuid): The object 

'PK_Computation' is dependent on column 'ComputationID '.:

      Caused By: Error executing SQL DROP INDEX UX_2_COMPUTATION 

        ON dbo.Computation

        ALTER TABLE dbo.Computation

        ALTER COLUMN ComputationID  NVARCHAR(10) Not Null

        CREATE INDEX UX_2_COMPUTATION 

        ON dbo.Computation (ComputationID , ComputeGuid): The object 

'PK_Computation' is dependent on column 'ComputationID '.:

      Caused By: The object 'PK_Computation' is dependent on column 'ComputationID '. 
```

谢谢，

-山姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:59:21.987

您当前的语句会将列更改为可为空的`NVARCHAR(25)`列 - 这是您想要的吗？

如果您想确定您的专栏将是`NON NULL`，您必须明确说明：

```
ALTER TABLE dbo.Computation
ALTER COLUMN ComputationID NVARCHAR(25) NOT NULL 
```

# java - 反序列化对象列表java

> ID：13934266
> 
> 赞同：0
> 
> 时间：2012-12-18T13:39:29.590
> 
> 标签：java, serialization, deserialization

尝试反序列化对象列表时遇到一些问题。我已将对象列表序列化为 .dat 文件。如果我想稍后从该文件中检索数据，当我尝试反序列化该列表时，我不会得到所需的结果。这是代码。

序列化：

```
MyFile mf = new MyFile("2012-12-18.dat");
             mf.Open();
             FileOutputStream fos = mf.GetOS();

             Iterator<Element> currencies = cube.select("Rate").iterator();
             ISerializare[] lista = new ISerializare[31];
             int i=0;
             while (currencies.hasNext()){
                    MyCurrency newCurrency=new MyCurrency();
                    Element newElement=currencies.next();
                    newCurrency.setSymbol(newElement.attr("currency"));
                    newCurrency.setValue(Double.parseDouble(newElement.text()));
                    lista[i] = newCurrency;
                    System.out.println(newCurrency.toString());
                    i++;
             }
             DataOutputStream dos = new DataOutputStream(fos);

             for(int j=0;j<i;j++){
                 lista[j].ObjectSerialization(dos);
             }
             dos.close();
public class MyFile {

    File fisier;
    String name;

    public MyFile(String n){
        name = n;
    }

    public void Open(){
        fisier = new File(name);
    }

    public FileOutputStream GetOS() throws IOException{
        return new FileOutputStream(fisier);
    }

    public FileInputStream GetIS() throws IOException{
        return new FileInputStream(fisier);
    }
}

MyFile mf = new MyFile("2012-12-18.dat");
     mf.Open();    
     FileInputStream fis = mf.GetIS();
     DataInputStream dis = new DataInputStream(fis);

     for(ISerialization element:list){
         element.ObjectDeserialization(dis);
         System.out.println(element.toString()); 
```

这是 MyCurency 类：

```
 public class MyCurrency implements ISerialization
{
private String symbol;
private double value;
public String getSymbol() {
    return symbol;
}
public void setSymbol(String symbol) {
    this.symbol = symbol;
}
public double getValue() {
    return value;
}
public void setValue(double value) {
    this.value = value;
}
public String toString(){
    return symbol +" = "+value + " RON";
}
@Override
public void ObjectSerialization(DataOutputStream dos) throws IOException {
    dos.writeDouble(value);
}
@Override
public void ObjectDeserialization(DataInputStream dis) throws IOException {
    value = dis.readDouble();
} 
```

你能告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:43:55.497

> 你能告诉我有什么问题吗？

有很多事情可能是错误的。由于您不具体，我将不得不发挥我的想象力。

方法名称不遵循 Java 编码约定，这使它们不易阅读。使用代码格式化程序会有所帮助。

最明显的问题是您只编写`value`字段，这意味着您`symbol`将`null`在反序列化它之后。

还

```
System.out.println(element.toString()); 
```

是相同的

```
System.out.println(element); 
```

和

```
return symbol +" = "+value + " RON"; 
```

没有价值格式，所以它可能会打印 YEN 100.0 或 USD 100.0，而它应该是 YEN 100 和 USD 100.00，而且为什么最后有“RON”并不明显。

* * *

如果它有帮助，我会这样写

```
Collection<Element> currencies = cube.select("Rate");

// write out
File mf = new File("2012-12-18.dat");
DataOutputStream dos = new DataOutputStream(
        new BufferedOutputStream(new FileOutputStream(mf)));
dos.writeInt(currencies.size()); // so you know how many to read.
for (Element currency : currencies) {
    MyMoney newCurrency = new MyMoney(currency);
    newCurrency.writeTo(dos);
}
dos.close();

// read in
DataInputStream dis = new DataInputStream(
        new BufferedInputStream(new FileInputStream(mf)));
int count = dis.readInt();
List<MyMoney> myMoneys = new ArrayList<>();
for (int i = 0; i < count; i++)
    myMoneys.add(new MyMoney(dis));
dis.close();

public class MyMoney {
    private final String symbol; // this is a currency
    private final BigDecimal value;

    public MyMoney(Element element) {
        this(element.attr("currency"), new BigDecimal(element.text()));
    }

    public MyMoney(DataInputStream dis) throws IOException {
        symbol = dis.readUTF();
        value = new BigDecimal(dis.readUTF());
    }

    public MyMoney(String symbol, BigDecimal value) {
        this.symbol = symbol;
        this.value = value;
    }

    public String getSymbol() {
        return symbol;
    }

    public BigDecimal getValue() {
        return value;
    }

    public String toString() {
        return symbol + " " + value;
    }

    public void writeTo(DataOutputStream dos) throws IOException {
        dos.writeUTF(symbol);
        dos.writeUTF(value.toString());
    }
} 
```

# ruby-on-rails - ruby on rails，会话过期通知

> ID：13934267
> 
> 赞同：2
> 
> 时间：2012-12-18T13:39:30.470
> 
> 标签：ruby-on-rails, ruby, session

我正在使用 ruby​​ 1.9.3 和 rails 3.2。

我的实际会话处理如下所示：

**会话助手**

```
 def sign_in(user)
            cookies[:remember_token] = {value: user.remember_token, expires: 20.minutes.from_now.utc}
            self.current_user = user
    end

    def sign_out
            self.current_user = nil
            cookies.delete(:remember_token)
    end

    def signed_in?
            if current_user.nil?
                    return false
            else
                    cookies[:remember_token] = {value: current_user.remember_token, expires: 20.minutes.from_now.utc}
            end

    def current_user=(user)
            @current_user = user
    end

    def current_user
            @current_user ||= User.find_by_remember_token(cookies[:remember_token])

    end 
```

**应用控制器**

```
class ApplicationController < ActionController::Base
  before_filter :check_signin
  protect_from_forgery
  include SessionsHelper

  def check_signin
        unless signed_in?
        redirect_to signin_path
        end
  end
end 
```

如果会话已过期，我想通知用户@登录页面。如何检查会话是否过期？请给出一个代码示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:24:07.577

由于您的 cookie 将在 20 分钟后过期，因此您无法区分新用户和会话已过期的用户。一个快速而肮脏的解决方案是测试谷歌分析 cookie 的存在，以了解用户是否有过期的会话。

```
def check_signin
  unless signed_in?
    flash[:notice] = "Your session has expired" if cookie['_utma']
    redirect_to signin_path
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:18:44.067

@sailor 解决方案是正确的，但您不应该使用“_utma”cookie。我宁愿创建一个新的！

# python - 在 tkinter 上显示带有 GUI 的 pdf 页面

> ID：13934268
> 
> 赞同：1
> 
> 时间：2012-12-18T13:39:33.047
> 
> 标签：python, python-2.7, tkinter, pypdf

我正在使用 pyPdf 裁剪 pdf 页面。我唯一想念的是这个脚本的 GUI。我拿起 tkinter 模块来做 GUI，但我找不到是否可以使用 tkinter 创建的 GUI 显示 pdf 页面。

有什么想法吗 ？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:12:26.953

Tkinter 不支持显示 pdf。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:57:53.200

我曾经尝试过做同样的事情，并且我设法在 wxPython 中使用一个可以做到这一点的小部件来做到这一点。然而，在 Qt 上，我没有设法做这样的事情，我怀疑你也可以使用 Tkinter。

我得到的最接近的是转换为图像并显示图像：请参阅[此问题](https://stackoverflow.com/questions/2002055/converting-pdf-to-images-automatically)。

**注意：**我说的是 wxPython 和 Qt，但我想同样的原则也适用于 Tkinter。

# visual-studio-2012 - 是否可以将特定于解决方案的工具添加到 Visual Studio 2012

> ID：13934273
> 
> 赞同：3
> 
> 时间：2012-12-18T13:39:51.360
> 
> 标签：visual-studio-2012, extensibility

您能否对 VS2012 中的 .SLN/.CSPROJ 文件做一些事情，以便在解决方案资源管理器中右键单击解决方案/项目时，上下文菜单上会出现一个运行您指定的工具的新项目？

我知道您可以将自定义条目添加到“工具”菜单，但在这种情况下，这些工具特定于该特定解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-25T13:32:19.133

您可以从加载项将按钮添加到`Solution`上下文菜单，如下所示：

```
Microsoft.VisualStudio.CommandBars.CommandBar menuBarCommandBar = ((Microsoft.VisualStudio.CommandBars.CommandBars)_applicationObject.CommandBars)["Solution"];

try
{
    //Add a command to the Commands collection:
    Command command = commands.AddNamedCommand2(_addInInstance, "MyAddinMenuBar", "MyAddinMenuBar", "Executes the command for MyAddinMenuBar", true, 59, ref contextGUIDS, (int)vsCommandStatus.vsCommandStatusSupported + (int)vsCommandStatus.vsCommandStatusEnabled, (int)vsCommandStyle.vsCommandStylePictAndText, vsCommandControlType.vsCommandControlTypeButton);

    //Add a control for the command to the solution context menu:
    if (command != null)
    {
        command.AddControl(menuBarCommandBar, 1);
    }
}
catch (System.ArgumentException)
{
    //  safely ignore the exception.
} 
```

不同解决方案的工具规范应由您的加载项在内部处理。您可以提取解决方案的完整路径（来自`_applicationObject.Solution.FullName`）以及包含项目的属性（来自 `_applicationObject.Solution.Projects`）。

如果您使用的是，`VSPackage`您应该定义一个`vsct`文件来添加命令和菜单项。

# c# - 从 UI 调度任务的问题 .continuewith 任务

> ID：13934274
> 
> 赞同：4
> 
> 时间：2012-12-18T13:39:52.310
> 
> 标签：c#, task

我的应用程序使用以下代码安排了一个长时间运行的任务：

```
Task.Factory.StartNew<bool>((a) => WorkTask1(),
        TaskCreationOptions.LongRunning | TaskCreationOptions.AttachedToParent)
    .ContinueWith(antecedent => WorkCompletedTask1(antecedent.Result),
        TaskScheduler.FromCurrentSynchronizationContext()); 
```

WorkCompletedTask1 已按预期安排并在 UI 上显示结果。根据 WorkTask1 的结果，WorkCompletedTask1 可以使用以下语句安排其他任务：

```
Task.Factory.StartNew<bool>((a) => WorkTask2(),
        TaskCreationOptions.LongRunning | TaskCreationOptions.AttachedToParent)
    .ContinueWith(antecedent => WorkCompletedTask2(antecedent.Result),
        TaskScheduler.FromCurrentSynchronizationContext()); 
```

WorkTask2 没有按预期在单独的线程上运行；它在 UI 线程上运行，该线程被阻塞直到 WorkTask2 完成。我认为 TaskCreationOptions.LongRunning 会保证一个单独的线程。

关于为什么这不起作用的任何建议？我可以从 UI 和非 UI 任务安排添加任务，而不是从 UI 中的 .continuewith 任务安排。

**损坏的示例项目代码**

在窗体上带有`button1`按钮的空 Windows 窗体项目中，此代码无法按预期工作（Windows 7 VS2010 Express Net 4.0）。T2 和 T3 在 UI 线程中运行，而不是工作线程。将 listBox1 添加到您的 button1 表单并尝试以下操作：

```
private delegate void DelegateSendMsg(String msg);
private DelegateSendMsg m_DelegateSendMsg;
private TaskScheduler uiSched;
private Process thisProcess;
private string
    thisProcessName,
    thisProcessId,
    uiThreadName,
    nonuiStatus = "Non-UI",
    uiStatus = "UI";

private void Form1_Load(object sender, EventArgs e)
{
    thisProcess = Process.GetCurrentProcess();
    thisProcessName = thisProcess.ProcessName;
    thisProcessId = thisProcess.Id.ToString();
    uiThreadName = CurrentThread;
    m_DelegateSendMsg = this.SendMsg;
    uiSched = TaskScheduler.FromCurrentSynchronizationContext();
    SendMsg("UI thread name is " + CurrentThread);
}

//create the name of the current task
public string CurrentThread
{
    get
    {
        string threadId = null;
        if (String.IsNullOrEmpty(Thread.CurrentThread.Name))
            threadId = thisProcess.Id.ToString() + "=" + thisProcessName;
        else
            threadId = thisProcessId
                + "=" + thisProcessName
                + "/" + Thread.CurrentThread.Name;
        threadId += ":" + Thread.CurrentThread.ManagedThreadId + " ";
        return threadId;
    }
}

//validate if the function is running in the expected UI state or not
public bool MeetsUIExpectations(string functionName, string expectedStatus)
{
    bool rc = true;
    string currentThreadName = CurrentThread;
    string text = 
        "Function " + functionName + " running in thread " + currentThreadName;
    if ((currentThreadName == uiThreadName) & expectedStatus == uiStatus)
        text += ": UI status as expected";
    else if ((currentThreadName != uiThreadName) & expectedStatus == nonuiStatus)
        text += ": non-UI status as expected";
    else
    {
        text += ": UI status is NOT as expected!"
            + "  Expected: " + expectedStatus
            + "; running in thread" + currentThreadName;
        rc = false;
    }
    SendMsg(text);
    return rc;
}

//display a single text message
private void SendMsg(String msg)
{   
    if (this.InvokeRequired)
        try { this.Invoke(m_DelegateSendMsg, "UI context switch: " + msg); }
        catch (Exception) { }
    else
    {
        listBox1.Items.Add(msg);
        listBox1.TopIndex = listBox1.Items.Count - 1;
    }
}

private void button1_Click(object sender, EventArgs e)
{
    Task.Factory.StartNew<bool>((a) =>
        T1(), TaskScheduler.Default,
            TaskCreationOptions.LongRunning | TaskCreationOptions.AttachedToParent)
        .ContinueWith(antecedent => T1Completed(antecedent.Result), uiSched);
}

private bool T1()
{
    //get the name of the currently running function and validate UI status
    var currentMethod = System.Reflection.MethodInfo.GetCurrentMethod();
    MeetsUIExpectations(currentMethod.ToString(), nonuiStatus);

    int i = 0;
    while (i < Int32.MaxValue) i++;
    return true;
}

private void T1Completed(bool successful)
{
    var currentMethod = System.Reflection.MethodInfo.GetCurrentMethod();
    MeetsUIExpectations(currentMethod.ToString(), uiStatus);
    if (successful)
    {
        Task.Factory.StartNew<bool>((a) =>
            T2(), TaskScheduler.Default,
                TaskCreationOptions.LongRunning | TaskCreationOptions.AttachedToParent)
            .ContinueWith(antecedent => T2Completed(antecedent.Result), uiSched);
    }
}

private bool T2()
{
    var currentMethod = System.Reflection.MethodInfo.GetCurrentMethod();
    MeetsUIExpectations(currentMethod.ToString(), nonuiStatus);
    int i = 0;
    while (i < Int32.MaxValue) i++;
    return true;
}

private void T2Completed(bool successful)
{
    var currentMethod = System.Reflection.MethodInfo.GetCurrentMethod();
    MeetsUIExpectations(currentMethod.ToString(), uiStatus);
    Task.Factory.StartNew<bool>((a) =>
        T3(), TaskScheduler.Default,
            TaskCreationOptions.LongRunning | TaskCreationOptions.AttachedToParent)
        .ContinueWith(antecedent => T3Completed(antecedent.Result), uiSched);
}

private bool T3()
{
    var currentMethod = System.Reflection.MethodInfo.GetCurrentMethod();
    MeetsUIExpectations(currentMethod.ToString(), nonuiStatus);
    int i = 0;
    while (i < Int32.MaxValue) i++;
    return true;
}

private void T3Completed(bool successful)
{
    //get the name of the currently running function and validate UI status
    var currentMethod = System.Reflection.MethodInfo.GetCurrentMethod();
    MeetsUIExpectations(currentMethod.ToString(), uiStatus);
    SendMsg("All functions completed");
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T14:55:07.717

在 .NET 4.0 中，您必须`TaskScheduler.Default`显式传递。您为此选择了错误的重载（见下文）。

**一些一般的东西**

在 UI 线程的延续中，`TaskScheduler`仍然是由方法返回的*UI 线程。*`FromCurrentSynchronizationContext`因此，除非您**明确****传递**`Tasks`，否则您启动的所有新功能也都安排在 UI 线程上：**`TaskScheduler`**

这是一个代码示例：

```
Task.Factory.StartNew(foo => {}, TaskScheduler.Default) 
```

随意使用`TaskScheduler`您需要的任何内容，但您需要明确说明。

**获得正确的过载**

有很多重载`StartNew<T>`。在下面的代码中，您选择了错误的代码，这导致`TaskScheduler.Default`充当`state`（传递`a`给的值`T3`）而不是*实际的调度程序*：

```
var options = TaskCreationOptions.LongRunning
    | TaskCreationOptions.AttachedToParent;

// overload with Func<bool>, CancellationToken, options and TaskScheduler
Task.Factory.StartNew<bool>(() => T2(), new CancellationToken(),
    options, TaskScheduler.Default);

// overload with Func<object, bool> with state and options
// scheduler acts as state here instead of actual scheduler, and
// is therefore just passed as (a) to T3 (state is an object, thus
// can also be a TaskScheduler instance)
Task.Factory.StartNew<bool>((a) => T3(),
    TaskScheduler.Default, // state, not scheduler
    options); 
```

显然这样你不会得到你想要的调度，而是上面描述的*默认行为*。

**.NET 4.5 的附加信息**

在 .NET 4.5 中，[`TaskContinuationOptions.HideScheduler`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskcontinuationoptions.aspx)需要更改此行为。有关新选项的更多详细信息，请参阅[Stephen Toub](http://blogs.msdn.com/b/pfxteam/archive/2012/09/22/new-taskcreationoptions-and-taskcontinuationoptions-in-net-4-5.aspx)的 .NET 4.5 中的 New TaskCreationOptions 和 TaskContinuationOptions，让我引用其中的代码示例：

```
// code sample copied from blog post stated above
Task.Factory.StartNew(() => 
{ 
    // #2 long-running work, so offloaded to non-UI thread 
}).ContinueWith(t => 
{ 
    // #3 back on the UI thread 
    Task.Factory.StartNew(() => 
    { 
        // #4 compute-intensive work we want offloaded to non-UI thread (bug!) 
    }); 
}, CancellationToken.None,
TaskContinuationOptions.HideScheduler, // <-- new option stated in text
TaskScheduler.FromCurrentSynchronizationContext()); 
```

**工作示例项目代码**

在窗体上带有`button1`按钮的空 Windows 窗体项目中，此代码按预期工作（Windows 7、.NET 4.0）：

```
private void button1_Click(object sender, EventArgs e)
{
    var uiSched = TaskScheduler.FromCurrentSynchronizationContext();

    button1.Enabled = false;

    // this HardWork-task is not blocking, as we have
    // TaskScheduler.Default as the default scheduler
    Task.Factory.StartNew(HardWork)
        .ContinueWith(t =>
        {
            button1.Enabled = true;

            // this HardWork-task will block, as we are on the
            // UI thread scheduler
            Task.Factory.StartNew(HardWork)
                .ContinueWith(t2 =>
                {
                    button1.Enabled = false;

                    // this one will not, as we pass TaskScheduler.Default
                    // explicitly
                    Task.Factory.StartNew(HardWork,
                        new CancellationToken(),
                        TaskCreationOptions.None,
                        TaskScheduler.Default).ContinueWith(t3 =>
                        {
                            button1.Enabled = true;
                        }, uiSched);  // come back to UI thread to alter button1
                }, uiSched); // come back to UI thread to alter button1
        }, uiSched); // come back on UI thread to alter button1
}

public void HardWork()
{
    int i = 0;
    while(i < Int32.MaxValue) i++;
} 
```

# ios - 我可以在横向模式和纵向模式下将界面生成器用于我的字段的不同位置吗？

> ID：13934276
> 
> 赞同：1
> 
> 时间：2012-12-18T13:39:54.427
> 
> 标签：ios, interface-builder

我可以在横向模式和纵向模式下将界面生成器用于我的字段的不同位置吗？（完全不同，所以我不能只使用布局属性）？

还是代码是唯一的方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:44:49.560

如果纵向和横向模式共享的字段相同，我会说去代码。如果在每种模式下都有不同的对象不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:46:23.410

你可以使用`willRotateToInterfaceOrientation`方法。当您更改设备方向时，它会调用..

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
{
  return YES;
}

-(void)willRotateToInterfaceOrientation: (UIInterfaceOrientation)orientation duration:(NSTimeInterval)duration
 {
    if (UIInterfaceOrientationIsPortrait(self.interfaceOrientation)) 
    {

      [label setFrame:CGRectMake(20, 52, 728, 617)];

    }
     else

    {

    [label setFrame:CGRectMake(20, 52, 728, 617)];

    }

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T13:47:59.003

您可以在界面生成器中保留两个 UIView，当用户旋转设备时，您可以根据方向隐藏一个并显示另一个。你能试试下面的代码行吗？

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation {
    if(([self.navigationController.visibleViewController interfaceOrientation] == UIDeviceOrientationLandscapeLeft) || ([self.navigationController.visibleViewController interfaceOrientation] == UIDeviceOrientationLandscapeRight)){
        self.viewLandscape.hidden = NO;
        self.viewPortrait.hidden = YES;
    }
    else {
        self.viewLandscape.hidden = YES;
        self.viewPortrait.hidden = NO;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T13:52:40.217

以下是您可以使用的方法。最佳方法在顶部
**1。**最好使用自动布局来调整视图。
**2.**自动布局 + 代码
**3.**仅代码。
**4.**您可以为您的 xib 创建两个视图，一个用于横向，一个用于纵向。并根据方向显示和隐藏。但是在这种情况下，您需要将所有纵向视图与横向视图（文本等属性）同步，反之亦然。这很容易维护，但是您必须为同步每个视图的属性而格外头疼。

# bash - SSH heredoc：bash 提示符

> ID：13934280
> 
> 赞同：16
> 
> 时间：2012-12-18T13:40:07.347
> 
> 标签：bash, shell, ssh

我正在尝试编写一个通过 SSH 连接到服务器的 shell 脚本，然后提示用户输入文件/文件夹。

```
ssh $SERVER <<EOF
cd downloads/
read -e -p "Enter the path to the file: " FILEPATH
echo $FILEPATH
eval FILEPATH="$FILEPATH"

echo "Downloading $FILEPATH to $CLIENT"
EOF 
```

我在 SSH 之后使用 heredoc 而不是双引号来执行这些命令，因为我的 shell 脚本相当大，我不想转义每个双引号。

当我使用双引号时，提示运行良好。但是，现在我使用的是heredoc，提示不再有效。

我能做些什么来获得使用heredoc的提示？如果没有，有什么方法可以让我布局我的脚本，这样提示就可以正常工作，而无需将所有内容都用双引号括起来并转义，如下所示：

```
ssh $SERVER "
cd downloads/
read -e -p \"Enter the path to the file: \" FILEPATH
echo $FILEPATH
eval FILEPATH=\"$FILEPATH\"

echo \"Downloading $FILEPATH to $CLIENT\"
exit
" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T14:03:23.827

如果您不需要来自客户端的任何变量，为什么不尝试 - 并且`ssh -t`可能有用。

```
export CLIENT=me 

CMDS=$(cat <<CMD 
cd downloads/ 
read -e -p "Enter the path to the file: " FILEPATH 
echo \$FILEPATH 
eval FILEPATH="\$FILEPATH" 

echo "Downloading \$FILEPATH to $CLIENT" 
CMD 
) 

ssh localhost -t "$CMDS" 
```

请注意，如果双引号的唯一问题是转义，并且您不打算在`'`脚本中使用单引号，那么您可以这样做：

```
ssh -t $SERVER '
# your script, unescaped.
# if you want access to a locally defined variable,
echo "CLIENT is '$CLIENT'."
' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-07-07T20:56:28.300

要使其与heredoc一起使用，调用`bash`或您想在远程服务器上使用的任何shell就足够了。像这样：

```
ssh $SERVER bash <<EOF
cd downloads/
read -e -p "Enter the path to the file: " FILEPATH
echo $FILEPATH
eval FILEPATH="$FILEPATH"

echo "Downloading $FILEPATH to $CLIENT"
EOF 
```

请注意，您可能想要转义`$`on `FILEPATH`，因为目前这将由本地 shell 而不是远程 shell 进行插值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-18T13:46:42.677

这有效，主机上的选项卡完成工作。

```
var=$(cat<<EOF
read -e -p Path pname;
echo \$pname;
hostname;
echo \$pname;
cd \$pname;
pwd;
touch THIS ;
exit;
EOF
)

ssh -t NODE $var 
```

对我来说，这会在提示的目录中创建文件 THIS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T13:55:53.630

这个似乎有效：

```
T=$(tty) ; bash <<XXX
echo Hi "$T"
read p <$T
echo p: \$p
echo Bye
XXX 
```

# ms-access - 为第二个表中的列选择带有条件的查询

> ID：13934281
> 
> 赞同：0
> 
> 时间：2012-12-18T13:40:12.920
> 
> 标签：ms-access, vba

我有 2 个具有相同架构的表（THour_IN 和 THour_OUT）： THour_IN 的列：名称|日期|HourIN THour_OUT 的列：名称|日期|HourOUT 我进行查询：

```
SELECT THour_IN.Name, THour_IN.date, THour_IN.HourIN, THour_OUT.HourOUT FROM THour_IN LEFT JOIN THour_OUT ON (Hour_IN.Name = THour_OUT.Name) AND (Hour_IN.date = THour_OUT.date); 
```

但这在我的情况下是不正确的，因为我在表格中有多个具有相同日期的行。结果是：

```
Name   date       HourIN    HourOUT
AAA 24/11/2013  17:33:06    20:33:27
AAA 24/11/2013  17:33:06    16:36:06
AAA 24/11/2013  07:33:27    20:33:27
AAA 24/11/2013  07:33:27    16:36:06
BBB 18/11/2013              16:36:06
BBB 19/11/2013  07:33:30    
BBB 21/11/2013  07:29:24    08:33:22
BBB 22/11/2013  07:33:30    16:34:53 
```

日期应为 24/11/2013 First HourIN(07:33:27) with First HourOUT (16:36:06), Second HourIN (17:33:06) with Second HourOUT (20:33:06) Any想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:10:05.063

构建线段，然后与线段相交。

```
SELECT
  P1.Name, P1.date, P1.HourIN, P1.HourOUT
FROM (
  SELECT
    I.Name, I.date, I.HourIN, O.HourOUT
  FROM
    THour_IN AS I
    LEFT JOIN THour_OUT AS O
      ON (I.Name = O.Name) AND (I.date = O.date)
        AND I.HourIN < H.HourOUT
) AS P1
INNER JOIN (
  SELECT
    I.Name, I.date, I.HourIN, O.HourOUT
  FROM
    THour_IN AS I
    LEFT JOIN THour_OUT AS O
      ON (I.Name = O.Name) AND (I.date = O.date)
        AND I.HourIN < H.HourOUT
) AS P2
  ON P1.name = P2.name AND P1.date = P2.date
    AND P1.HourIN <> P2.HourIN and P1.HourOUT <> P2.HourOUT
    AND P1.HourOUT > P2.HourIN
    AND (P1.HourIN = P2.HourIN AND P1.HourOUT < P2.HourOUT
          OR P1.HourIN > P2.HourIN AND P1.HourOUT = P2.HourOUT) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:04:56.247

你可以使用这样的东西：

```
SELECT
  t.Name, 
  t.Date, 
  t.HourIN, (
     SELECT Top 1 HourOut 
     FROM THourOUT o 
     WHERE o.Name=t.Name AND o.Date=t.date And o.HourOUT>t.HourIN 
     ORDER BY o.HourOUT,o.ID ) AS HrOut
FROM THourIN AS t
ORDER BY t.Date, t.HourIN; 
```

请注意，我在 OUT 表中添加了一个 ID，以确保 top 1 不会返回重复项。

这是插入缺失值的示例。它取决于包含从 0 或 1 到最大缺失值数量的整数的 Numbers 表。数字表在许多方面都很有用。

```
INSERT INTO thourin
            (name,
             [date])
SELECT q.name,
       q.DATE
FROM   (SELECT Outs.name,
               Outs.DATE,
               Outs.countofout,
               Ins.countofin
        FROM   (SELECT o.name,
                       o.DATE,
                       Count(o.name) AS CountOfOut
                FROM   thourout o
                GROUP  BY o.name,
                          o.DATE) AS Outs
               LEFT JOIN (SELECT t.name,
                                 t.DATE,
                                 Count(t.name) AS CountOfIn
                          FROM   thourin t
                          GROUP  BY t.name,
                                    t.DATE) AS Ins
                      ON ( Outs.name = Ins.name )
                         AND ( Outs.DATE = Ins.DATE )
        WHERE  (( ( Ins.countofin ) <> [countofout]
                   OR ( Ins.countofin ) IS NULL ))) AS q,
       numbers AS n
WHERE  (( ( n.counter ) > 0
          AND ( n.counter ) <= [countofout] - [countofin] )) 
```

# session - 如何将@Scope("prototype") 用于服务层？

> ID：13934283
> 
> 赞同：0
> 
> 时间：2012-12-18T13:40:23.917
> 
> 标签：session, spring-mvc

我想使用`@Scope("prototype")`不同的会话，因为实际上我对会话有问题！如果第一个用户使用会话，那么另一个用户找不到他应该找到的东西！

我不知道我能做什么！所以我有我的 applicationContexte 和我的 dao 层，一切正常，但会话没有！我使用`spring mvc`作为框架来实现 mvc 架构。请问您有什么建议吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T11:16:31.907

您可以使用@Scope("session")。这将 bean 定义限定为 HTTP 会话，并且仅在 ApplicationContext 的上下文中有效：

```
@Controller
@Scope("session")
@SessionAttributes("theAttribute")
public class MyController {

     private MyClass theAttribute;

     ...
} 
```

有了这个属性依赖于会话，每个用户都有一个新的属性实例

# javascript - navigator.mimeTypes 结构

> ID：13934287
> 
> 赞同：1
> 
> 时间：2012-12-18T13:40:40.390
> 
> 标签：javascript

我很好奇它是如何工作的这个结构。当我从 Javascript 访问 navigator.mimetypes 时，我正在访问一个对象。

```
>>> typeof(navigator.mimeTypes)
"object" 
```

该对象具有对象列表。

navigator.mimeTypes[Object_0, Object_1, Object_2, ...]

```
>>> typeof(navigator.mimeTypes[0])
"object" 
```

例如，我可以检索第一个对象：

> > > navigator.mimeTypes[0]

```
MimeType { constructor=MimeType, enabledPlugin=Plugin, type="application/x-vnd.google.update3webcontrol.3"} 
```

谁能解释我为什么这是有效的？

```
>>> navigator.mimeTypes["application/x-shockwave-flash"]

MimeType { constructor=MimeType, type="application/x-shockwave-flash", description="",more...} 
```

我的意思是为什么我能够通过 ["application/x-shockwave-flash"] 找到指定的对象？？

javascript 对我来说将是一个新世界:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T13:50:22.023

`navigator.mimeTypes`返回一个对象`MimeTypeArray`，它不是传统的 JavaScript 数组，而是一个具有类似 Array 属性的对象，您可以通过索引或名称访问它的属性。

编辑：当您使用时，`navigator.mimeTypes['someType']`您将其视为`MimeTypeArray`哈希映射，它已`someType`映射到`MimeType`数组中的对象，该对象也具有`type`与键相同的值的属性。这是 DOM 中的一个奇怪对象（技术上不是 JavaScript），您通常不会看到很多这样的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-17T19:41:52.853

```
function GetMimeTypes() {
    var message = "";
    // Internet Explorer supports the mimeTypes collection, but it is always empty
    if (navigator.mimeTypes && navigator.mimeTypes.length > 0) {
        var mimes = navigator.mimeTypes;
        for (var i=0; i < mimes.length; i++) {
            message += "<b>" + mimes[i].type + "</b> : " + mimes[i].description + "<br />";
        }
    }
    else {
        message = "Your browser does not support this example!";
    }
    var info = document.getElementById ("login_info");
    info.innerHTML = message;
}
GetMimeTypes(); 
```

# mongodb - 带有spring数据mongodb的mongodb动态模式

> ID：13934290
> 
> 赞同：5
> 
> 时间：2012-12-18T13:40:49.193
> 
> 标签：mongodb, spring-data-mongodb

我正在尝试将配置存储在 MongoDB 中。我希望文档模式是动态的，以便在集合中存储不同类型的配置。配置可能不仅仅包含简单的字符串键值对。在使用 spring-data-mongodb 时，我看到我需要定义一个通常映射到 mongodb 的类。因此，当我需要向集合添加更多配置时，我需要对类进行更改。我真的不想这样做，因为我希望能够在不更改代码的情况下修改配置（最好不要重新启动长时间运行的应用程序）。此外，我最终存储的是应该由不同服务使用的配置，所以我真的不能有一个定义明确的模式。相反，我希望服务从存储中提取配置（即提供密钥，获取值）。这让我怀疑 spring-data-mongodb 在哪里是这种用例的正确选择。我的用例有什么明显的解决方案或替代方案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T16:31:38.957

显而易见的解决方案是只使用 MongoDB 的 Java 驱动程序。Java 驱动程序具有 BSON 规范的实现，您可以使用 BSON/JSON 对象而不是类。

# c++ - 如何重构此类模板以最小化样板代码？

> ID：13934294
> 
> 赞同：1
> 
> 时间：2012-12-18T13:40:57.840
> 
> 标签：c++, templates, c++11, refactoring

我最近开始使用[boost mirror](http://kifri.fri.uniza.sk/~chochlik/mirror-lib/html/)进行 ORM 反射，这样我就可以最大限度地减少与 DB 相关的样板代码的数量。

下面列出了我遇到的一种模式。

由于`Bar`' 的代码即使对于 ' 看起来也一样`Baz`，所以我想知道，*是否有可能进一步折叠此代码？*

如果`getValues()`接口看起来一样就好了，但是同样的实现也可以存在`Foo`。

```
#include <iostream>

template< typename T >
struct Foo
{
    static std::ostream& GetValues_Worker( std::ostream& os, T const& t )
    {
        // do boost mirror reflection stuff here
        return os;
    }
};

struct Bar : 
    public Foo<Bar>
{
    // REFACTOR IF POSSIBLE:  this code will always look the same - even for Baz
    std::ostream& 
    getValues( std::ostream& os ) const
    {
        return GetValues_Worker( os, *this );
    }
};

struct Baz : 
    public Foo<Baz>
{
    // REFACTOR IF POSSIBLE:  looks the same as Bar
    std::ostream& 
    getValues( std::ostream& os ) const
    {
        return GetValues_Worker( os, *this );
    }
};

int main( int argc, char* argv[] )
{
    Bar b;
    std::cerr << b.getValues( std::cerr ) << std::endl;
} 
```

**回答**

事实证明，ecatmur 下面的答案在大多数情况下都有效。在我的具体情况下，我将他的解决方案改编为我的真实代码，它适用于 4 个案例中的 2 个。在这两种失败的情况下，它有点超出了我上面给出的米老鼠示例的范围。我可以在 SO 中找到的最接近的解释解释了我得到的编译时错误可能是[这篇文章](https://stackoverflow.com/questions/13347530/error-cannot-bind-stdbasic-ostreamchar-lvalue-to-stdbasic-ostreamchar)。问题的症结似乎与我的**Worker 代码**中发生的事情有关。在这两个失败的案例中，我正在根据我从运行时反射返回的结果对子类成员进行输出流式处理，结果是**boost mirror**。我认为这是一个**不可演绎的情况**. 我仍然不明白为什么这两个失败案例中的解决方案完全有效（为什么使用虚拟方法形式的访问者可以解决这个问题）。无论如何，我偶然发现了这种方法，并试图进一步减少代码（在这 4 种情况下），但在其中两种情况下，如果不遇到**不可演绎的上下文**问题，我就无法真正减少代码了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T13:44:27.517

`Bar::getValues`可以移动到`Foo<Bar>`使用 CRTP 向下转换：

```
template< typename T >
struct Foo
{
    static std::ostream& GetValues_Worker( std::ostream& os, T const& t )
    {
        // do boost mirror reflection stuff here
        return os;
    }

    std::ostream& getValues( std::ostream& os ) const
    {
        return GetValues_Worker( os, *static_cast<T const *>(this) );
    }
}; 
```

此时你不妨将这两种方法结合起来：

```
template< typename T >
struct Foo
{
    std::ostream& getValues( std::ostream& os ) const
    {
        T const &t = *static_cast<T const *>(this);
        // do boost mirror reflection stuff here
        return os;
    }
}; 
```

# c# - wpf中的AutoCompleteStringCollection

> ID：13934300
> 
> 赞同：1
> 
> 时间：2012-12-18T13:41:17.647
> 
> 标签：c#, wpf, textbox, autocompletebox

我只想在 .net 4.0 wpf windows 应用程序中执行以下操作。

```
var source = new AutoCompleteStringCollection();
source.AddRange(Contract_Extracter.GlobalVariables.customerList);
textBoxClientID.AutoCompleteCustomSource = source;
textBoxClientID.AutoCompleteMode = AutoCompleteMode.SuggestAppend;
textBoxClientID.AutoCompleteSource = AutoCompleteSource.CustomSource; 
```

我收到以下错误，

1.  找不到类型或命名空间名称 AutoCompleteStringCollection（您是否缺少 using 指令或程序集引用？）

2.  System.Windows.Controls.TextBox 不包含 AutoCompleteCustomSource 的定义，并且找不到接受“System.Windows.Controls.TextBox”类型的第一个参数的扩展方法 AutoCompleteCustomSource（您是否缺少 using 指令或程序集引用？）

3.名称AutoCompleteSource在当前上下文中不存在

我已经添加了使用 System.Windows 和参考。这里有什么问题？我应该参考哪些程序集？

谢谢

# php - 使用 PHP 在 MYSQL 数据库上更新图像信息的问题

> ID：13934301
> 
> 赞同：0
> 
> 时间：2012-12-18T13:41:22.700
> 
> 标签：php, mysql, phpmyadmin

我的代码有问题。我无法更新我的图像。

这是我的完整代码：

### 索引.php

```
//this link will post my data to next page
<a href="updatepage.php?code=<?php echo $row['name']; ?>">update</a> 
```

### 更新页面.php

```
 //this page will get all data that want to update...
 <?php
 include("config.php");
 $name=$_GET['code'];
 $sql1  = "select * from imagename where name='$name'";
 $result = mysql_query($sql1) or die(mysql_error());
 $row=mysql_fetch_array($result);?>
<form name="form1" method="post" action="processupdatepage.php"  class="formposition" enctype="multipart/form-data" >
  <table>
   <tr><td>
    <input type="hidden" name="id" value="<?php echo $row['id']; ?>" /></td></tr>
   <tr><td width="98">Image</td><td width="288">
  //This is where I have problem, I can't get my image value but other data value work very well.....
    <input type="file" name="image" value="<?php echo $row['image'];?>" /></td></tr><br/> 
   <tr><td>nane</td><td><input type="text" name="name" value="<?php echo $row['name']; ?>"/></td></tr><br/>       
   <tr><td></td> <td colspan="2">
    <input type="submit" name="submit" value="Save" />  </td></tr>
  </table>
</form> 
```

好的。现在这是我的流程文件：

### 进程更新页面.php

```
<?php
include("config.php");
$id=$_POST['id'];
$image=$_FILES['image']['name'];
$name=$_POST['name'];
$target = "images/"; 
$target = $target . basename( $_FILES['image']['name']);
$query = "UPDATE imagename SET name='$name', image='$image' WHERE id='$id'";
$bb = mysql_query($query) or die(mysql_error());
if($bb)
{
//Writes the photo to the server 
    if(move_uploaded_file($_FILES['image']['tmp_name'], $target)) 
    {  
      $sql001="UPDATE imagename SET image='$image' WHERE image='$image'";
    mysql_query($sql001);
    } else { } 
    header("Location:index.php");
}
else
{
    echo "Could not be updated";
}
?> 
```

我可以更新但必须选择图像。如果我没有选择图像，我在数据库中的图像字段将为空，但其他数据更新正常...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:06:37.077

我认为问题出在这里：

```
<input type="file" name="image" value="<?php echo $row['image'];?>" /> 
```

您可以通过单击浏览按钮上传图像。那么你想这样做呢？如果要显示已上传的图像，可以使用：

```
$img_path = 'get image path from database entry';
<img src= "<?php echo $img_path; ?>"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:07:20.823

这是上传图片的完整代码，它已经过测试并且可以工作，但是您需要有一个名为“upload”的目录（此代码不会创建文件夹）。

建议仅将图像路径存储在数据库中。

```
<?php
if(isset($_POST['submit'])){
    if ((($_FILES["file"]["type"] == "image/gif")
    || ($_FILES["file"]["type"] == "image/jpeg")
    || ($_FILES["file"]["type"] == "image/png")
    || ($_FILES["file"]["type"] == "image/pjpeg"))
    && ($_FILES["file"]["size"] < 200000))
    {
        if ($_FILES["file"]["error"] > 0)
        {
            echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
        }
        else
        {
            if (file_exists("upload/" . $_FILES["file"]["name"])){
                echo $_FILES["file"]["name"] . " already exists. ";
            }
            else{
                move_uploaded_file($_FILES["file"]["tmp_name"], "upload/" . $_FILES["file"]["name"]);
                echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
                    // HERE YOU CAN WRITE YOU INSERT INTO MYSQL CODE
                    //SOMETHING LIKE THIS:
                    $path = 'assets/article_images/'.$article_id.'/'.$_FILES["image_file"]["name"];
                    $statement1 = "INSERT INTO image_article (article_id, image_path) values ('$article_id', '$path') ";
                    $query_result = mysql_query($statement1) or die($statement1."mysql error<br/><br/>".mysql_error());
                    if($query_result==1){
                        echo 'Image uploaded';
                    }
            }
        }
    }
    else
    {
    echo "Invalid file";
    }
}

?>

<html>
<body>

<form action="index.php" method="post"
enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file" id="file"><br>
<input type="submit" name="submit" value="Submit">
</form>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T13:54:33.737

an 的值`<input type="file">`不能以编程方式更改。只有通过触发其弹出选择文件对话框的默认行为。

我从您的示例代码中看到的是，您希望将值直接关联到文件表单控件元素，因为它是从数据库中检索的。那么为什么要保存相同的回来。尽管如此，如果你想这样做，你可以使用一个隐藏元素的值，这将被保存。但是，如果您不希望用户更改它，请不要将其呈现到表单中并将其从您的更新查询中排除，这样它将保持不变。

此外，您可以在处理帖子时添加一些逻辑，如果未选择任何文件，则将“图像”字段保留在更新查询之外。

# .net - EF 5 和 MiniProfiler 问题

> ID：13934308
> 
> 赞同：1
> 
> 时间：2012-12-18T13:41:55.623
> 
> 标签：.net, linq, entity-framework, mvc-mini-profiler

我对 EF5 和 mini profiler 有一个奇怪的问题。基本上，我使用博客/帖子示例创建了一个非常简单的项目。

如果我执行一个 linq 命令（例如，debug.writeline mycontext.Blogs.Count()）它第一次工作，但第二次我得到：

无法将“StackExchange.Profiling.Data.EFProfiledDbConnection”类型的对象转换为“System.Data.SqlClient.SqlConnection”类型。

解决此问题的唯一方法是重建应用程序。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:00:27.823

将我的初始化更改为 MiniProfilerEF.Initialize_EF42() 并将其移动到我的 App_Start 的顶部对其进行了排序

# java - 坚持@PostConstruct：javax.persistence.TransactionRequiredException

> ID：13934309
> 
> 赞同：0
> 
> 时间：2012-12-18T13:41:57.450
> 
> 标签：java, jpa

在 @PostConstruct 中持久化对象时，我的 Entitymanager 没有事务。我不知道为什么以及如何解决这个问题，有人可以帮助我吗？

PS。如果您需要任何其他数据，请询问

**测试机管理器**

```
@Singleton
public class TestmachineManager {
    @PersistenceContext
    private EntityManager em;

    private TimerTask handler = new TimerTask() {
        @Override
        public void run() {
            DayPlanning planning = getPlanning();
            Order order = planning.getNextInLine();
            if(order instanceof Order) {
                em.merge(planning);
                List<String> tests = new ArrayList();
                for(Test test : order.getTests()) {
                    tests.add(test.getName());
                }

                TestmachineSender.orderTests(order.getId(), order.getDomain(), tests);
                timer.schedule(checker, safetycheckAt());
            }
            else {
                timer.schedule(handler, postponeTo());
            }
        }
    };

    @PostConstruct
    public void init() {
        if(getPlanning().hasActiveTest()) {
            handler.run();
        }
    }

    private DayPlanning getPlanning() {
        LocalDate today = new LocalDate(
                Calendar.getInstance().getTime());

        try {
            CriteriaBuilder cb = em.getCriteriaBuilder();
            CriteriaQuery<DayPlanning> query = cb.createQuery(DayPlanning.class);
            Root dayPlanning = query.from(DayPlanning.class);
            Predicate predicateDate = cb.equal(dayPlanning.get("dateOfPlanning"), today.toDate());

            query.select(dayPlanning).where(predicateDate);
            return em.createQuery(query).getSingleResult();
        } catch(NoResultException ex) {
            DayPlanning newPlanning = new DayPlanning(today);
            em.persist(newPlanning);
            return newPlanning;
        }
    }
} 
```

**堆栈跟踪**

```
Caused by: javax.persistence.TransactionRequiredException
    at com.sun.enterprise.container.common.impl.EntityManagerWrapper.doTxRequiredCheck(EntityManagerWrapper.java:163)
    at com.sun.enterprise.container.common.impl.EntityManagerWrapper.doTransactionScopedTxCheck(EntityManagerWrapper.java:145)
    at com.sun.enterprise.container.common.impl.EntityManagerWrapper.persist(EntityManagerWrapper.java:263)
    at TestmachineManager.getPlanning(TestmachineManager.java:130)
    at TestmachineManager.init(TestmachineManager.java:78) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:59:11.153

您在 @PostConstruct 中有一个用于 Singleton bean 的事务。您丢失交易的那一刻是您使用`timer.schedule(checker, safetycheckAt());`or启动新计时器的时候`timer.schedule(handler, postponeTo());`。我认为您正在使用的计时器对象实际上是`java.util.Timer`在查看签名。

您应该尝试使用 EJB TimerService 资源。例如：

```
@Resource
private TimerService timerService;

@Timeout
public void run() {
    DayPlanning planning = getPlanning();
    Order order = planning.getNextInLine();
    if(order instanceof Order) {
        em.merge(planning);
        List<String> tests = new ArrayList();
        for(Test test : order.getTests()) {
            tests.add(test.getName());
        }

        TestmachineSender.orderTests(order.getId(), order.getDomain(), tests);

        // if the checker handler doesn't need to run transactionally you could leave it like it was before
        timer.schedule(checker, safetycheckAt());
        // otherwise you could create a checker EJB that uses @Timeout in the same manner or @Scheduled from EJB3.1
    } else {
        // postpone timer
        timerService.createTimer(postponeTo(), "postponed timer information");    
    }
}

@PostConstruct
public void init() {
    if(getPlanning().hasActiveTest()) {
        timerService.createTimer(computeDelay(), "timer information");
        // or you could use the other create methods of the timerService, those that fits your needs better
    }
} 
```

我没有测试代码，它只是粗略的代码。希望能帮助到你。

# c# - 检测用户是否输入假名的服务或策略？

> ID：13934311
> 
> 赞同：2
> 
> 时间：2012-12-18T13:42:06.217
> 
> 标签：c#, java, php, python, api

我正在搜索服务/策略以检测表单中输入的名称何时是垃圾邮件，例如：asdasdasd、ksfhaiodsfh、wpoeiruopwieru、zcpoiqwqwea。疯狂的键盘输入。

我正在尝试 akismet 不是专门用于名称（http://kemayo.wordpress.com/2005/12/02/akismet-py/）。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:43:48.493

一种策略是使用带有奇怪名称的黑名单和/或带有正常名称的白名单来拒绝/接受名称。但可能很难找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T13:58:07.350

您可以寻找不寻常的字符组合，例如许多连续的元音/辅音，并查看您的注册并创建一个以假名重复出现的模式（如 asd）列表

我会避免自动阻止这些输入，而是将它们标记为检查

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T13:51:00.057

要求一个真实的电子邮件并发送信息以在那里连接。然后从帐户中获取信息。

无论如何，没有任何方法是真正安全的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-16T19:34:34.413

如果速度不是问题，请下载前 100k 最常用名称的列表，将它们放入 O(1) 查找数据结构中，查看输入是否存在，如果没有，您始终可以将输入与使用字符串相似度算法的条目。尽管如果这样做，您可能希望按起始字母进行存储，以防止必须对整个列表执行该计算。

# oracle - Oracle 表单生成器触发器

> ID：13934313
> 
> 赞同：0
> 
> 时间：2012-12-18T13:42:10.037
> 
> 标签：oracle, formbuilder

我想添加到我的块文本项中，在其中显示我的所有记录的计数：

代码是：

```
BEGIN
    GO_ITEM('KIEKKAT');
    SELECT COUNT(*)
  INTO :KATEGORIJA.KIEKKAT
  FROM  KATEGORIJA;
  END; 
```

只有当我选择触发“WHEN-MOUSE-CLICK”时，这个词才可以，但所有其他项目都不会显示数据。如果我选择其他触发器，则所有项目都不显示任何内容。我希望这个文本项将始终显示记录计数。请告诉我，怎么做，如果正确，我会使用哪个触发器设置我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:12:33.307

在块级别的 POST-SELECT 触发器上尝试它。

从文档中：

**描述**

Post-Select 触发器在查询处理的默认选择阶段之后或成功执行 On-Select 触发器之后触发。它在通过提取处理实际检索到任何记录之前触发。

**使用说明：**

使用 Post-Select 触发器根据查询处理的 Select 阶段的结果执行操作，例如基于与查询条件匹配的记录数的操作。

编辑。

看看这个 [https://forums.oracle.com/forums/thread.jspa?threadID=883340](https://forums.oracle.com/forums/thread.jspa?threadID=883340)

您可以从块属性中获取数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T03:44:52.750

为此，我会考虑使用摘要项目 - 特别是如果您已经有一个基于 KATEGORIJA 表的块。

您添加一个基于该块中的 COUNT 的项目：将**Calculation Mode**设置为 Summary，**Summary Function**设置为 Count，并将**Summarized Block**设置为该块。将块上的**查询所有记录**属性设置为 True。

# intellij-idea - 如何让/out目录出现在项目中（不能包含）？

> ID：13934317
> 
> 赞同：4
> 
> 时间：2012-12-18T13:42:19.390
> 
> 标签：intellij-idea

我正在使用 IDEA 12。我无法将`/out`目录包含到我的项目中。

我尝试`Project Structure -> Modules -> MyModule -> Sources`了然后单击`Exclude`，但没有任何反应。`/out`目录仍然被**排除在外**并**显示为红色**。

这是一个错误还是我做错了？

截屏

![](../Images/9b0501c031bf243270ce3a54ebbc2b81.png)

我无法取消选择排除以包含文件夹。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T11:42:00.890

“路径”选项卡上的“排除输出路径”选项与**模块**输出路径相关。文件 | 中指定的**项目**输出 项目结构 | 项目 | 始终排除“项目编译器输出”。如果你真的需要包含它，你可以执行以下操作：

1.  切换到所有模块的“路径”选项卡上的“使用模块编译输出路径”选项。
2.  在左侧列表中选择“项目”项并清除“项目编译器输出”字段。
3.  重新打开项目。

之后，“out”目录应该在“Project View”中可见。但是，我建议您手动排除“源”选项卡中的实际模块输出子目录。否则 IDEA 可能会在每次编译后重新扫描和重新索引编译器生成的输出文件，这可能会导致性能问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:24:45.633

它看起来像 Android 特定的错误，我创建了一个新问题，请投票：

*   [IDEA-97776](http://youtrack.jetbrains.com/issue/IDEA-97776)无论“排除文件夹”和“排除输出路径”设置如何，输出都从项目视图中排除

# unix - 避免使用“set -f”重复 Unix PATH

> ID：13934322
> 
> 赞同：1
> 
> 时间：2012-12-18T13:42:36.830
> 
> 标签：unix, path, set

我见过一个修改 Unix $PATH 的脚本，为了避免重复项目，它使用了以下技术：

```
set path = ($path:q /some/new/path)
set path = ($path:q /another/directory)
set -f path = ($path:q) 
```

不明白怎么操作...

“-f”标志的文档说：

> 禁用文件名生成

这对我来说没有任何意义。这个奇怪的“：q”是什么？

谢谢！

**编辑**：

这个[超级用户问题](https://superuser.com/questions/234497/c-shell-environment-variable-error-bad-modifier-in)帮助我理解了“：q”是一个修饰符。*tcsh man*解释说：

> 当 `:q' 修饰符应用于替换时，变量将扩展为多个单词，每个单词用空格分隔并引用以防止以后的命令或文件名替换

**第二次编辑：**

实际上，似乎只有“-f”才能发挥作用：

```
~$ set days = (Sunday Monday Tuesday Monday Sunday)
~$ echo $days
Sunday Monday Tuesday Monday Sunday
~$ set -f days = ($days)
~$ echo $days
Sunday Monday Tuesday 
```

不过，我不明白“禁用文件名生成”的结果如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:07:59.187

如果我们遇到包含`*`,`?`等的文件名，通常需要禁用文件名生成`{}`。在处理这些文件时应小心，以免我们将文件名作为通配符模式处理。创建一个名为 stack* as 的文件`vim stack*`，稍后我们不应该删除此文件，因为所有其他以开头的文件`stack`也会被删除。删除文件的另一种方法是使用引用为`rm "stack*"`. 如果需要，可以`set +f`在 shell 中启用文件名生成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T21:24:36.257

您的困惑源于您正在阅读`ksh`手册，但您正在使用`tcsh`外壳。 `Tcsh`语法与更常见的 POSIX shell 语法有很大不同。

该命令`set`是内置在 shell 中的，因此当您在其中运行时`set`，`tcsh`您会得到一个完全不同的命令来`set`运行`ksh`.

来自[`man tcsh`](http://man.cx/tcsh%281%29)：

> ```
>  set [-r] [-f|-l] name=(wordlist) ... (+)
>            ...
>            If -f or -l are specified,  set only unique words keeping their
>            order.   -f  prefers the first occurrence of a word, and -l the
>            last. 
> ```

# google-calendar-api - Google Calendar Api 未返回目录联系人的与会者姓名

> ID：13934334
> 
> 赞同：1
> 
> 时间：2012-12-18T13:43:10.340
> 
> 标签：google-calendar-api, google-api-php-client

我构建了一个网络应用程序，该应用程序使用与我自己的 Google 帐户相关联的服务帐户。我们使用 Google Apps，因此我的 Google 帐户是域的一部分。我们有一个共享联系人的服务器，因此我们所有的客户都可以作为每个人的联系人。在我的通讯录中，这个组被称为“目录”。

该应用程序使用 Google Api PHP 客户端从 Google 日历中检索事件。它还检索与会者，包括这些与会者的所有详细信息。但如果与会者不在我们的域内，它只会检索电子邮件地址。我还想获得该与会者的姓名。

这些名字在我的目录组中的联系人中。当我创建一个活动并邀请客人时，我可以检索这些联系人，它会显示姓名和邮件地址。但是当通过 API 检索与会者时，它不会显示这些名称。

这是 API 的限制吗？有解决方案吗？

我不想将 Contacts api 与非服务帐户一起使用，因为我不想每次都授予权限。据我所知，无法将 Contacts api 与服务帐户一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T22:09:04.503

您是正确的，服务帐户不能与联系人 API 一起使用，但是您不必每次使用它时都对其进行授权。您可以使用两条腿的 OAuth 1.0a 而不是 2.0 提供域范围的委派。请参阅[https://developers.google.com/google-apps/contacts/v3/index#authorizing_requests_to_the_+wzxhzdk8+_service](https://developers.google.com/google-apps/contacts/v3/index#authorizing_requests_to_the_+wzxhzdk8+_service)和[https://developers.google.com/accounts/docs/OAuth#GoogleAppsOAuth](https://developers.google.com/accounts/docs/OAuth#GoogleAppsOAuth)。

根据您的设置，您还可以将三足 OAuth 2.0 流用于单个管理员帐户并保存刷新令牌。这将允许您重新使用该授权，而无需再次明确许可。

# asp.net-mvc-3 - 序列在 MVC3 Web 应用程序中不包含任何元素

> ID：13934340
> 
> 赞同：2
> 
> 时间：2012-12-18T13:43:27.627
> 
> 标签：asp.net-mvc-3, linq, sequence

因此，使用下拉菜单选择用户名，然后单击“查看”，它将显示该用户之前预订的所有假期。

从这里用户可以单击“新建”，这会将他们带到一个新建页面。我不必从另一个下拉列表中重新选择他们的名字，而是跨越 currentuserID 并将第二个下拉列表替换为用户 ID。

使用 2 个单独的下拉菜单，一切正常，用户可以预订假期等...但是现在（在我更改第二个下拉菜单以保存 ID 值之后）我从控制器中的 listHoliday 方法中收到错误消息：

**错误：用户代码未处理 InvalidOperationException。序列不包含任何元素。**

```
var dbPerson1 = (from p in db.People
                             where p.Id == PersonId
                             select p).Single(); 
```

* * *

谁能建议该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:48:31.257

这意味着您正在执行的 linq 查询不返回任何结果，到 .Single() 会引发异常。

尝试

```
var dbPerson1 = (from p in db.People
                         where p.Id == PersonId
                         select p).FirstOrDefault(); // or use SingleOrDefault() if People are unique

if (dbPerson1==null) 
{
    throw new HolidayAllocationException("Person not found");
}
else
{
    // person found
    if (dbPerson.HolidaysRemaining > 0) 
    {
        AllocateHoliday(); // or whatever you need to do
    }
    else 
    {
        throw new NoHolidayLeftException(); 
    }
 } 
```

`dbPerson1`如果查询没有返回任何内容，则将为 null。

希望有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T13:51:07.427

[当您收到 LINQ 错误“序列不包含元素”时，这通常是因为您使用的是 First() 或 Single() 命令，而不是 FirstOrDefault() 和 SingleOrDefault()。](http://msmvps.com/blogs/kevinmcneish/archive/2009/12/17/fixing-linq-error-sequence-contains-no-elements.aspx)

# php - 如何在 php 主页中显示 vbulletin 帖子？

> ID：13934342
> 
> 赞同：0
> 
> 时间：2012-12-18T13:43:32.183
> 
> 标签：php, vbulletin

我想在我的 php 主页中显示我的 vbulletin 帖子

例子：

标题用户名，日期描述链接（详情）

> 标题
> 用户名，日期
> 描述
> 详细信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:47:43.090

VBulletin 有一个漂亮的 API 从那里开始： [vB API](https://members.vbulletin.com/api/)

# php - jquery-ui 自动完成不正确显示 utf-8

> ID：13934343
> 
> 赞同：0
> 
> 时间：2012-12-18T13:43:35.553
> 
> 标签：php, jquery, jquery-ui, character-encoding, mysqli

我在 jquery ui 自动完成中显示数据时遇到了一些问题，当我显示文本时，它不是 utf-8 编码的，尽管我的数据库和页面使用的是 utf-8。

此外，当我尝试以任何其他方式显示它时，它会以正确的编码正常显示。

**jquery ui 脚本。**

```
<script type="text/javascript" charset="utf-8">
$(function() {
    function log( message ) {
        $( "<div>" ).text( message ).prependTo( "#log" );
        $( "#log" ).scrollTop( 0 );
    }

    $( "#items" ).autocomplete({
        source: "getSurgestedItems.php",
        minLength: 2,
        select: function( event, ui ) {
            log( ui.item ?
                "Selected: " + ui.item.value + " aka " + ui.item.id :
                "Nothing selected, input was " + this.value );
        }
    }).data("autocomplete")._renderItem = function(ul, item){
        return $("<li>")
            .data("item.autocomplete", item)
            .append("<a>" + item.value + "<br>" + item.desc + "</a>")
            .appendTo(ul);
    };
});
</script> 
```

**获取项目的 php 脚本。**

```
while ($row = $result->fetch_assoc()) {
$i++;
if(!$first){
    $json .=',';
}
else{
    $first = false;
}

$name = addslashes($row['name']);
$desc = mb_substr(addslashes($row['description']), 0, 60, 'UTF-8');

$desc .= '...';

$json .='{"value" : "'.$name.'",
        "desc" : "'.$desc.'"}';
}
$json .=']';

echo $json; 
```

现在就像我说的那样，我试图以我能想到的各种方式显示数据，而且只有自动完成功能才会显示错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:22:53.137

SaschaM78 评论让我找到了正确的方向，在研究 json_encode 时，我发现它只适用于 utf-8，这导致我尝试使用**mb_convert_encoding**将每个字符串编码为 utf-8 ，这解决了我的问题，现在工作正常。

**新的php代码。**

```
$json = array();

while ($row = $result->fetch_assoc()) {

$name = mb_convert_encoding($row['name'], 'UTF-8');
$desc = mb_convert_encoding(substr($row['description'], 0, 60), 'UTF-8');

$desc .= '...';

$json[] = array('value' => $name, 'desc' => $desc); 
}

echo json_encode($json); 
```

# jquery-ui - 素面，在jquery中用另一个组件替换一个组件

> ID：13934351
> 
> 赞同：0
> 
> 时间：2012-12-18T13:44:02.633
> 
> 标签：jquery-ui, jsf, primefaces

我已经完成了作业[https://stackoverflow.com/search?q=jsf+jquery](https://stackoverflow.com/search?q=jsf+jquery)

我在 SelectOneMenu [http://www.primefaces.org/showcase-labs/ui/selectOneMenu.jsf中使用素面](http://www.primefaces.org/showcase-labs/ui/selectOneMenu.jsf)

我想集成 Chosen [http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)因为它能够在单选时允许取消选择。

什么是集成它们的正确方法我使用了类似于[jquery 和 jsf](https://stackoverflow.com/questions/3363085/jquery-with-jsf)的 aroach没有成功。

但我想用 Chosen 代替 SelectOneMenu

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:52:46.157

“取消选择单选”是什么意思？

查看示例第 19 行：http: [//www.primefaces.org/showcase-labs/ui/selectOneMenu.jsf](http://www.primefaces.org/showcase-labs/ui/selectOneMenu.jsf)

这允许取消选择。如果 id 为“”，请确保您的转换器返回 null

```
 <h:outputText value="Pojo: " />  
    <p:selectOneMenu value="#{autoCompleteBean.selectedPlayer1}" effect="fade" converter="player">  
        <f:selectItem itemLabel="Select One" itemValue="" />  
        <f:selectItems value="#{autoCompleteBean.players}" var="player" itemLabel="#{player.name}" itemValue="#{player}"/>  
    </p:selectOneMenu> 
```

# ios - UIImagePickerController iphone5 方向横向模式

> ID：13934352
> 
> 赞同：0
> 
> 时间：2012-12-18T13:44:03.457
> 
> 标签：ios, ios6, uiimagepickercontroller, iphone-5

我将其分类`UIImagePickerController`并实现为`@implementation`

```
- (BOOL)shouldAutorotate 
```

它工作正常，但问题是：

以横向模式拍摄时，显示以纵向模式显示，拍摄后，拍摄的图像正确显示（横向模式）

为什么显示方向会发生变化

我的代码在这里列出：

```
@interface NonRotateUIImagePickerViewController:UIImagePickerController

- (BOOL)shouldAutorotate;

@end

@implementation NonRotateUIImagePickerViewController

- (BOOL)shouldAutorotate {
    return NO;
}

@end 
```

前：

[https://skydrive.live.com/?cid=eb7f2f7c40e359ee#cid=EB7F2F7C40E359EE&id=EB7F2F7C40E359EE!493](https://skydrive.live.com/?cid=eb7f2f7c40e359ee#cid=EB7F2F7C40E359EE&id=EB7F2F7C40E359EE!493)

之后： [https ://skydrive.live.com/?cid=eb7f2f7c40e359ee#cid=EB7F2F7C40E359EE&id=EB7F2F7C40E359EE!492](https://skydrive.live.com/?cid=eb7f2f7c40e359ee#cid=EB7F2F7C40E359EE&id=EB7F2F7C40E359EE!492)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:49:54.393

您应该考虑视图父级的自动旋转属性。

这是因为如果它们被设置为自动旋转，所有的孩子也会旋转。

# c++ - 应用程序无法使用 libcurl C++ Windows 7 VS 2010 启动 (0xc0150002)

> ID：13934357
> 
> 赞同：4
> 
> 时间：2012-12-18T13:44:20.637
> 
> 标签：c++, visual-studio-2010, libcurl

> **可能重复：**
> [应用程序未能正确初始化 (0xc0150002)](https://stackoverflow.com/questions/3537429/the-application-failed-to-initialize-properly-0xc0150002)

大家好，所以我按照下面的指南让我的 Visual Studio 2010 与 libcurl 和 Windows 7 一起工作。

[链接 1](http://theetrain.ca/tech/installing-curl-using-visual-studio-2010-beginners-guide/) [链接 2](http://quantcorner.wordpress.com/2012/04/08/using-libcurl-with-visual-c-2010/)

但是我面临上述错误：

```
The application was unable to start (0xc0150002) 
```

我仔细按照以下步骤操作：

答：设置

```
Create Empty Project & add in source file provided by libcurl (simple.c) 
```

B：链接你的图书馆

```
You may try pressing F7, but it won’t work. You need to set up your
linker and what-not. On the toolbar, go to Project>Properties

Go to Configuration Properties>VC++ Directories>Include Directories
and go to <Edit> (click on the drop-down arrow to the right)

Create a new line and browse for your cURL directory. Browse for
cURL>include>curl and then click “OK”

Next, create a new line for Library Directories and navigate for
cURL>lib>Debug and then click “OK”

Lastly, under Configuration Properties>Linker>Input, edit the
Additional Dependencies and create a new line

Browse for cURL>lib>Debug>curllib.lib and paste its source link into
your Additional Dependencies dialogue box 
```

C：尝试示例代码

```
During run-time, however, there will be errors due to missing DLL files. 
This can be easily fixed by copying and pasting curllib.dll, libeay32.dll, openldap.dll,
and ssleay32.dll from the cURL directory and into your project folder. 
```

所以......按照说明操作后，我得到了那个错误。任何想法？:) 我见过类似的问题，但没有明确说明的答案。

**调试输出：**

```
'dummy.exe': Loaded 'C:\Users\lyon\Documents\Visual Studio 2010\Projects\dummy\Release\dummy.exe', Symbols loaded.
'dummy.exe': Loaded 'C:\Windows\SysWOW64\ntdll.dll', Cannot find or open the PDB file
'dummy.exe': Loaded 'C:\Windows\SysWOW64\kernel32.dll', Cannot find or open the PDB file
'dummy.exe': Loaded 'C:\Windows\SysWOW64\KernelBase.dll', Cannot find or open the PDB file
'dummy.exe': Loaded 'C:\Users\lyon\Documents\Visual Studio 2010\Projects\dummy\dummy\curllib.dll', Binary was not built with debug information.
The program '[3740] dummy.exe: Native' has exited with code -1072365566 (0xc0150002). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:05:17.713

使用 Dependency Walker 成功了。

[http://www.dependencywalker.com/](http://www.dependencywalker.com/)

它帮助我查明了错误的确切位置，即 libcurl.dll

我做了一点谷歌搜索，发现...

**64位解决方案**

我所要做的就是将 libcurl.dll 复制到 C:/Windows/SYSWOW64 注意：您必须使用从下载的软件包中下载的 libcurl.dll，否则您会因为版本不同而出错

# r - 导出没有 NA 值的 FFDF

> ID：13934362
> 
> 赞同：2
> 
> 时间：2012-12-18T13:44:32.523
> 
> 标签：r

我需要共享已作为 ffdf 对象导入 R 的数据集。 **我的目标是能够轻松地将我的 ffdf 数据集导出为 CSV 格式，而不必担心只会增加输出文件大小的 NA 值。**

如果我使用的是简单的数据框，我会使用以下语法：

```
write.csv(df, "C:/path/data.csv", row.names=FALSE, na="") 
```

但是 write.csv.ffdf 函数似乎没有将“na”作为参数。谁能告诉我正确的语法，这样我就不必对输出文件进行后处理来删除 NA 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T20:23:03.803

我认为您对`write.csv.ffdf`.

```
require(ff)  
# What follows is a minor modification of the first example in the `write.* help page.

> x <- data.frame(log=rep(c(FALSE, TRUE), length.out=26), int=c(NA, 2:26), 
                  dbl=c(1:25,NA) + 0.1, fac=factor(c(letters[2:26], NA)),
                  ord=c(NA, ordered(LETTERS[2:26])), dct=Sys.time()+1:26, 
                  dat=seq(as.Date("1910/1/1"), length.out=26, by=1))
>  ffx <- as.ffdf(x)
> write.csv(ffx, na="")
"","log","int","dbl","fac","ord","dct","dat"
"1",FALSE,,1.1,"b",,2012-12-18 12:18:23,1910-01-01
"2",TRUE,2,2.1,"c",1,2012-12-18 12:18:24,1910-01-02
"3",FALSE,3,3.1,"d",2,2012-12-18 12:18:25,1910-01-03
"4",TRUE,4,4.1,"e",3,2012-12-18 12:18:26,1910-01-04
"5",FALSE,5,5.1,"f",4,2012-12-18 12:18:27,1910-01-05
"6",TRUE,6,6.1,"g",5,2012-12-18 12:18:28,1910-01-06
"7",FALSE,7,7.1,"h",6,2012-12-18 12:18:29,1910-01-07
"8",TRUE,8,8.1,"i",7,2012-12-18 12:18:30,1910-01-08
"9",FALSE,9,9.1,"j",8,2012-12-18 12:18:31,1910-01-09
"10",TRUE,10,10.1,"k",9,2012-12-18 12:18:32,1910-01-10
"11",FALSE,11,11.1,"l",10,2012-12-18 12:18:33,1910-01-11
"12",TRUE,12,12.1,"m",11,2012-12-18 12:18:34,1910-01-12
"13",FALSE,13,13.1,"n",12,2012-12-18 12:18:35,1910-01-13
"14",TRUE,14,14.1,"o",13,2012-12-18 12:18:36,1910-01-14
"15",FALSE,15,15.1,"p",14,2012-12-18 12:18:37,1910-01-15
"16",TRUE,16,16.1,"q",15,2012-12-18 12:18:38,1910-01-16
"17",FALSE,17,17.1,"r",16,2012-12-18 12:18:39,1910-01-17
"18",TRUE,18,18.1,"s",17,2012-12-18 12:18:40,1910-01-18
"19",FALSE,19,19.1,"t",18,2012-12-18 12:18:41,1910-01-19
"20",TRUE,20,20.1,"u",19,2012-12-18 12:18:42,1910-01-20
"21",FALSE,21,21.1,"v",20,2012-12-18 12:18:43,1910-01-21
"22",TRUE,22,22.1,"w",21,2012-12-18 12:18:44,1910-01-22
"23",FALSE,23,23.1,"x",22,2012-12-18 12:18:45,1910-01-23
"24",TRUE,24,24.1,"y",23,2012-12-18 12:18:46,1910-01-24
"25",FALSE,25,25.1,"z",24,2012-12-18 12:18:47,1910-01-25
"26",TRUE,26,,,25,2012-12-18 12:18:48,1910-01-26 
```

如果您的目标是在写入操作期间最小化 RAM 占用，那么首先查看：

```
getOption("ffbatchbytes") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T17:37:22.497

`write.csv.ffdf`没有`na`参数，但`write.table.ffdf`将`na`参数传递给`write.table1`它包装的函数。也可以使用`sep=","`，你很高兴。

这甚至适用于大的 ff 变量。

# iphone - 从iphone的网格视图中删除图像后如何刷新网格视图

> ID：13934379
> 
> 赞同：0
> 
> 时间：2012-12-18T13:45:27.280
> 
> 标签：iphone, objective-c, ios, xcode

我已将图像保存在 @"/Documents/MyApp%d.png 中，并且我有一个 NSMutableArray，我在其中设置了整数值。例如，我的 NSMutableArray 包含 (2,3,5,6,7,12,14,16)现在在网格中它将向我显示 MyApp2、MyApp3、MyApp5 等等（来自数组）。这是我的网格视图 ![在此处输入图像描述](../Images/7428c53becb359c973fabbb1e589af12.png)

假设我单击了 gridview 的第三个索引，即 MyApp5，然后它在 swipeView 中打开。像这样 ![在此处输入图像描述](../Images/6b20fabbcf21153666968d866ee25a83.png)

当我单击删除图标时，它将删除此图像。请记住，我在 nsmutablearray 中有 (2,3,5,6,7,12,14,16)。当我删除此图像时，我的值更改为（2、3、6、7、12、14、16），这意味着它已成功删除，但是当我再次返回网格视图时，它显示如下。 ![在此处输入图像描述](../Images/42fc67f4c3181b546a52f38d3b27576f.png)

我不知道我错在哪里。但是当我返回并再次返回网格视图时，它将正确显示所有图像。

我正在将此代码用于 gridView[链接](https://github.com/tanin47/UIGridView)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:57:44.630

尝试获取如下的 cellIdentifier；（定义int reloader）然后，当您需要重新加载tableview时，尝试增加reloader。我在下面写了我的 reloadData 函数，你可以使用它。

```
-(NSString *) getCellIdentifier:(NSInteger)index sectionindex:(NSInteger)section{
    return [[[NSString stringWithFormat:@"%i",section] stringByAppendingFormat:@"%i" , index] stringByAppendingFormat:@"%i", reloader];
}

- (UITableViewCell *)tableView:(UITableView *)_tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *cellIdentifier = [self getCellIdentifier:indexPath.row sectionindex:indexPath.section];
    cell= [tableView dequeueReusableCellWithIdentifier:cellIdentifier]
    if (cell == nil) {
        cell = [[Cell alloc] init];
    }

    cell.label.text = [NSString stringWithFormat:@"(%d,%d)", rowIndex, columnIndex];

    return cell;
}

-(void) reloadData{
    reloader++;
    [tableView reloadData];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:22:53.453

该`UIGridView`项目中的 是`UITableView`. 您是否尝试向其发送`reloadData`消息？

此外，Apple 保留了`UI`前缀（以及所有其他两个字母的前缀）。`UIGridView`使用并非来自 Apple的类是危险的。

# c# - 为什么 App_Code/BLL 中的类无法在页面中访问？

> ID：13934387
> 
> 赞同：-1
> 
> 时间：2012-12-18T13:46:22.103
> 
> 标签：c#, asp.net

嗨，我在文件夹 App_Code/BLL/Countries.cs 中有一个类，这是一个公共类。但是当我尝试访问 ASP.NET 页面中的类时，例如：

```
Countries MyCountries = new Countries(); 
```

其显示错误：

“找不到类型或命名空间名称‘Countries’（您是否缺少 using 指令或程序集引用？）”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:52:52.897

好的，您的国家/地区课程看起来像这样

```
namespace  BGridNDynamicPage1
{
   public class Countries()
   {

      ......
   }
} 
```

你上面的代码将是这样的：

```
using System.Web;
etc.
namespace BGridNDynamicPage
    {
       public class something() : Page
       {

          Countries MyCountries = new Countries();
       }
    } 
```

也改变你的第二节课：

```
using  BGridNDynamicPage1;
using System.Web;
etc.

 namespace BGridNDynamicPage 
        {
           public class something() : Page
           {

              Countries MyCountries = new Countries();
           }
        } 
```

请参阅[http://msdn.microsoft.com/en-us/library/sf0df423.aspx](http://msdn.microsoft.com/en-us/library/sf0df423.aspx)

# java - 每个 JSTL，var 包含方括号

> ID：13934394
> 
> 赞同：1
> 
> 时间：2012-12-18T13:46:37.840
> 
> 标签：java, foreach, set, jstl

我有一个`HashSet`字符串，它是用以下代码制作的：

```
Set<String> scripts = new HashSet<>();
String contextPath = request.getContextPath();
scripts.add(contextPath + "/resources/scripts/jquery.cycle2.js");
scripts.add(contextPath + "/resources/scripts/jquery.cycle2.center.js");
scripts.add(contextPath + "/resources/scripts/slideshow.js");
request.setAttribute("scripts", scripts); 
```

现在在一个 JSP 页面中，使用 JSTL，我执行了一个普通的 forEach 循环：

```
<c:if test="${not empty scripts}">
    <c:forEach var="script" items="${scripts}" >
        <script type="text/javascript"
                src="${script}">
                          </script> 
    </c:forEach>
</c:if> 
```

加载页面时，这会导致：

```
<script type="text/javascript"
        src="[/InfoKiosk/resources/scripts/jquery.cycle2.center.js">
                          </script> 

<script type="text/javascript"
        src=" /InfoKiosk/resources/scripts/jquery.cycle2.js">
                          </script> 

<script type="text/javascript"
        src=" /InfoKiosk/resources/scripts/slideshow.js]">
                          </script> 
```

请注意出现在第一个脚本源之前和最后一个之后的**方括号**(`[`和)。`]`他们来自哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:23:09.050

出于某种原因，它正在调用`toString()`你的集合。然后，这会将您的集合变为`[script1, script2, script3]`，调用`foreach`此字符串拆分逗号，创建我们看到的效果。

当我替换为时，我可以准确地看到您所看到
`request.setAttribute("scripts", scripts);`
的
`request.setAttribute("scripts", scripts.toString());`

如果没有这个，我无法重现你所看到的，但是我正在运行 java 6。

不是答案，而是我希望的有用见解！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:32:51.920

The problem occured because the `scripts` variable was set in a JSP through an attribute for a custom tag, like this:

```
<t:genericpage scripts="${scripts}">
.... 
```

Of course, this converted the collection to a string by calling its `toString()` method. We have solved it in a different way, by setting the request attribute in the servlet.

# php - Symfony2 通知：Sonata Admin 中的数组到字符串转换

> ID：13934406
> 
> 赞同：1
> 
> 时间：2012-12-18T13:47:24.127
> 
> 标签：php, symfony, twig, symfony-2.1, sonata-admin

我在**Symfony 2.1.3上使用****Sonata 管理员**。现在尝试使用谷歌地图添加文本输入。

 **在函数中添加了一行`configureFormFields()`：

```
->add('coordinates', 'contentbundle_coordinates_map', array('required' => false,'attr'=>array('class'=>'mapCoordinate'))) 
```

在服务中注册并为此创建模板：

```
{% block contentbundle_coordinates_map_widget %}
    <script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=true"></script>
    <script type="text/javascript" src="{{ asset('js/add.scripts.js') }}"></script>
    <input type="text" {{ block('widget_attributes') }} {% if value is not empty %}value="{{ value }}" {% endif %}/>
    <div id="add_map" class="map" style="width:500px;height:300px;"></div>
{% endblock %} 
```

可以在管理内容添加页面中使用地图查看我的字段，但是当我想提交数据时：

```
Notice: Array to string conversion in D:\my_vendor_folder\doctrine\dbal\lib\Doctrine\DBAL\Statement.php line 103 
```

如果我将**contentbundle_coordinates_map**更改为**null**：

```
->add('coordinates', null, array('required' => false,'attr'=>array('class'=>'mapCoordinate'))) 
```

一切正常。

哪里有问题？

**更新**

表单类型类：

```
namespace Map\ContentBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;

class CoordinatesMapType extends AbstractType
{
    /**
     * {@inheritdoc}
     */
    public function getName()
    {
        return 'contentbundle_coordinates_map';
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:48:36.540

您应该始终`getParent`为自定义表单类型定义方法，以便继承该特定类型的逻辑。有关类型列表，请参见[此处](http://symfony.com/doc/current/reference/forms/types.html)。

在这种情况下，您的自定义类型似乎应该返回文本，因此将以下内容添加到`CoordinatesMapType`：

```
public function getParent()
{
    return 'text';
} 
```

作为替代方案，如果您只需要自定义表单字段的呈现，那么您甚至不需要创建自己的自定义表单类型。请参阅[如何自定义单个字段](http://symfony.com/doc/2.0/cookbook/form/form_customization.html#how-to-customize-an-individual-field)。我认为这只有在您手动为表单命名时才有可能。（假设它的名字是“内容”）

```
{# This is in the view where you're rendering the form #}

{% form_theme form _self %}

{% block _content_coordinates_widget %}
    <div class="text_widget">
        <script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=true"></script>
        <script type="text/javascript" src="{{ asset('js/add.scripts.js') }}"></script>
        <input type="text" {{ block('widget_attributes') }} {% if value is not empty %}value="{{ value }}" {% endif %}/>
        <div id="add_map" class="map" style="width:500px;height:300px;"></div>
    </div>
{% endblock %} 
```

在这种情况下，您将类型指定为`null`，如第二个示例中所示：

```
->add('coordinates', null, array('required' => false,'attr'=>array('class'=>'mapCoordinate'))) 
```**

# javascript - 如何使用 google feed API 异步填充 sigma.js 图形？

> ID：13934407
> 
> 赞同：0
> 
> 时间：2012-12-18T13:47:23.707
> 
> 标签：javascript, asynchronous, rss, visualization, google-feed-api

我想使用 javascript 库 Sigmajs 将我的 wordpress 和 github 活动表示为图形网络。我正在使用谷歌提要 api 来获取所有活动的 RSS 提要，并将它们翻译成图上的节点和边。

但是 feed api 异步返回 rss 结果。据我所知，sigmajs 本身并不支持这一点，所以我得到了未定义的引用。此时它只有大约 20-30 个节点。一些可能的解决方案是：

1.  强制 google feed api 同步返回结果。（不知道怎么做，但我假设它与适当的关闭有关？）

2.  为每个提要结果创建 sigma 实例，并将所有图形对象推送到单个实例中。（不确定它是否可能，并且库没有足够的文档来尝试）

3.  每次返回结果时触发一个事件，以确保 sigma 一次只处理一个。（再次，不知道如何去做）

非常感谢任何指导。谢谢。

这是我迄今为止的工作[http://fraseraddison.com](http://fraseraddison.com) 更多示例和来源[http://sigmajs.org/](http://sigmajs.org/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:42:15.117

我采用的解决方案是触发自定义事件。由于 javascript 的同步事件处理队列，似乎可以正常工作。

```
function getFeed()
{
    return function callback(result) 
    {
        if (!result.error)
        {
            console.log("Feed retrieved.");
            fireFeed(result.feed);
        }
        else 
            console.log("Feed retrieval failed!");
    }
}

function fireFeed(feed)
{
    //console.log(feed);
    var event = new CustomEvent(
    "newFeed",
    {
        detail: {
            message: feed
        },
        bubbles: true,
        cancelable: true
    }
    );
    document.dispatchEvent(event);
}

document.addEventListener('newFeed', function(e)
        {
            var feed = e.detail.message;
            console.log('feed triggered');
            //console.log(feed);
            buildFeed(feed);
        },true); 
```

# java - Netbeans 和 glassfish HTTP 错误 404

> ID：13934412
> 
> 赞同：0
> 
> 时间：2012-12-18T13:47:37.500
> 
> 标签：java, netbeans, glassfish, http-status-code-404

我需要你的帮助。我已经为网络应用程序制作了源代码，但是当我单击“添加”提交按钮时出现此错误，并且在其他提交按钮上出现相同的错误。我的源代码是：

filoptwxoinfo.jsp：

```
 <%-- 
    Document   : index
    Created on : 17 Δεκ 2012, 6:39:05 μμ
    Author     : Editor
--%>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Πληροφορίες Φιλοπτώχου</title>
    </head>
    <body>
        <table border="1">
        <td><a href="filoptwxoinfo.jsp">Μέλη Φιλοπτώχου</a></td>
        <td><a href="./FullFiloptwxo.jsp">Σύνολο Φιλοπτώχου</a></td>
    </table>
    </br>

    <form action=".FiloptwxoServlet" method="POST">
        <table>
            <tr>
                <td>Α.Φ.Μ. :</td>
                <td><input type="text" name="afm" value="${filoptwxo.afm}"/></td>
            </tr>

            <tr>
                <td>Όνομα :</td>
                <td><input type="text" name="name" value="${filoptwxo.name}"/></td>
            </tr>

            <tr> 
                <td>Επώνυμο:</td>
                <td><input type="text" name="lastname" value="${filoptwxo.lastname}"/></td>
            </tr>

            <tr>
                <td>Πατρώνυμο:</td>
                <td><input type="text" name="fathername" value="${filoptwxo.fathername}"/></td>
            </tr>

            <tr>
                <td>Διεύθυνση Οικείας:</td>
                <td><input type="text" name="address" value="${filoptwxo.address}"/></td>
            </tr>

            <tr>
                <td>Τηλέφωνο:</td>
                <td><input type="text" name="number" value="${filoptwxo.number}"/></td>
            </tr>

            <tr>  
                <td>Μέλη Οικογενείας:</td>
                <td><input type="text" name="numberop" value="${filoptwxo.numberop}"/></td>
            </tr>

            <tr>
                <td colspan="2"><input type="Submit" name="operation" value="Add" />
                                <input type="Submit" name="operation" value="Edit" />
                                <input type="Submit" name="operation" value="Delete" />
                                <input type="Submit" name="operation" value="Search" />

                        </tr>
                </table>
        </form>

    </body>
</html> 
```

Fullfiloptwxo.jsp：

```
 <%-- 
        Document   : FullFiloptwxo
        Created on : Dec 17, 2012, 6:47:52 PM
        Author     : Editor
    --%>

    <%@page contentType="text/html" pageEncoding="UTF-8"%>
    <%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"  %>
    <!DOCTYPE html>
    <html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <title>Λίστα Μελών Φιλοπτώχου</title>
        </head>
        <body>
             <table border="1">
            <td><a href="filoptwxoinfo.jsp">Μέλη Φιλοπτώχου</a></td>
            <td><a href="./FullFiloptwxo.jsp">Σύνολο Φιλοπτώχου</a></td>
        </table>
        <br />
            <h3> Λίστα Μελών </h3>

            <table border="1">
                <th> Α.Φ.Μ. </th>
                <th> Όνομα </th> 
                <th> Επώνυμο </th>
                <th> Πατρώνυμο </th>
                <th> Διεύθυνση Οικείας </th>
                <th> Τηλέφωνο </th>
                <th> Μέλη Οικογενείας </th>
                <c:forEach items="${requestScope.list}" var="Filoptwxo">  
                    <tr>
                        <td><a href=".GetFiloptwxo?afm=${filoptwxo.afm}">${filoptwxo.afm}</a></td>
                        <td>${filoptwxo.name}</td>
                        <td>${filoptwxo.lastname}</td>
                        <td>${filoptwxo.fathername}</td>
                        <td>${filoptwxo.address}</td> 
                        <td>${filoptwxo.phone}</td>
                        <td>${filoptwxo.numberop}</td>
                    </tr>
                </c:forEach>

            </table>    
        </body>
    </html> 
```

Filoptwxo.java：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package model;

/**
 * @author Editor
 */
public class Filoptwxo {
    private String afm;
    private String name;
    private String lastname;
    private String address;
    private String fathername;
    private String numberop;
    private String phone;

    public String getAfm() {
        return afm;
    }

    public void setAfm(String afm) {
        this.afm = afm;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getLastname() {
        return lastname;
    }

    public void setLastname(String lastname) {
        this.lastname = lastname;
    }

    public String getFathername() {
        return fathername;
    }

    public void setFathername(String fathername) {
        this.fathername = fathername;
    }

     public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    } 

    public String getPhone() {
        return phone;
    }

    public void setPhone(String phone) {
        this.phone = phone;
    }

     public String getNumberop() {
        return numberop;
    }

    public void setNumberop(String numberop) {
        this.numberop = numberop;
    }

    public Filoptwxo(String afm, String name, String lastname, String fathername, String address, String phone, String numberop ){
        this.afm = afm;
        this.name = name;
        this.lastname = lastname;
        this.fathername = fathername;
        this.address = address;
        this.numberop = numberop;
        this.phone = phone;
    }
    public Filoptwxo(){}
} 
```

FiloptwxoDAO.java：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package model.ejb;

import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import javax.annotation.Resource;
import javax.ejb.Stateless;
import javax.sql.DataSource;
import model.Filoptwxo;

/**
 * @author Editor
 */
@Stateless
public class FiloptwxoDAO { 
    @Resource(name="jdbc/filoptwxoDB")
    private DataSource ds;

    public void addFiloptwxo (Filoptwxo filoptwxo) {
        String sql = "INSERT INTO FILOPTWXO VALUES('"+ filoptwxo.getAfm() +"', '"+ filoptwxo.getName() +"', '"+ filoptwxo.getLastname() +"', '"+ filoptwxo.getFathername() +"', '"+ filoptwxo.getAddress() +"', '"+ filoptwxo.getPhone() +"', '"+ filoptwxo.getNumberop() +"')";
        executeModifyQuery(sql);
    }

    public void editFiloptwxo (Filoptwxo filoptwxo) {
        String sql = "UPDATE FILOPTWXO SET NAME='" + filoptwxo.getName() +"', ADDRESS" + filoptwxo.getAddress() +"', LASTNAME" + filoptwxo.getLastname() +"', FATHERNAME" + filoptwxo.getFathername() +"', PHONE" + filoptwxo.getPhone() +"', NUMBEROP" + filoptwxo.getNumberop() +"' WHERE AFM='"+ filoptwxo.getAfm() +"'";
        executeModifyQuery(sql);
    }

    public void deleteFiloptwxo(Filoptwxo filoptwxo) {
        String sql = "DELETE FROM STUDENT WHERE AFM= '"+ filoptwxo.getAfm() + "'";
        executeModifyQuery(sql);
    }

      public Filoptwxo getFiloptwxo(String afm) {
        Filoptwxo filoptwxo = new Filoptwxo();
        String sql = "SELECT * FROM FILOPTWXO WHERE AFM='"+ afm+"'";
        System.out.println(sql);
        ResultSet rs = executeFetchQuery(sql);
        try {
            if (rs.next()){
               filoptwxo.setAfm(rs.getString("AFM"));
               filoptwxo.setName(rs.getString("NAME"));
               filoptwxo.setLastname(rs.getString("LASTNAME"));
               filoptwxo.setFathername(rs.getString("FATHERNAME"));
               filoptwxo.setAddress(rs.getString("ADDRESS"));
               filoptwxo.setPhone(rs.getString("PHONE"));
               filoptwxo.setNumberop(rs.getString("NUMBEROP"));
            }
        } catch (Exception ex) {
            System.err.println("GS" + ex.getMessage());
        }
        return filoptwxo;
    }

    public ArrayList<Filoptwxo> getFullFiloptwxo() {
        ArrayList<Filoptwxo> list = new ArrayList<Filoptwxo>();
        String sql = "SELECT * FROM FILOPTWXO";
        ResultSet rs = executeFetchQuery(sql);
        try {
            while(rs.next()) {
               Filoptwxo filoptwxo = new Filoptwxo();
               filoptwxo.setAfm(rs.getString("AFM"));
               filoptwxo.setName(rs.getString("NAME"));
               filoptwxo.setLastname(rs.getString("LASTNAME"));
               filoptwxo.setFathername(rs.getString("FATHERNAME"));
               filoptwxo.setAddress(rs.getString("ADDRESS"));
               filoptwxo.setPhone(rs.getString("PHONE"));
               filoptwxo.setNumberop(rs.getString("NUMBEROP"));
               list.add(filoptwxo);
            }
        } catch (SQLException ex) {
            System.err.println(ex.getMessage());
        }
        return list;
    }

    public void executeModifyQuery(String sql)  {
        try {
            Connection conn = ds.getConnection();
            conn.createStatement().execute(sql);
            conn.close();
        } catch (Exception e) {
            System.err.println(e.getMessage());
        }
    }  

     public ResultSet executeFetchQuery(String sql)  {
         ResultSet rs = null;
         try {
            Connection conn = ds.getConnection();
            rs = conn.createStatement().executeQuery(sql);
            conn.close();
        } catch (Exception e) {
            System.err.println(e.getMessage());
        }
        return rs;
    }

} 
```

FiloptwxoServlet.java：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package controller;

import java.io.IOException;
import javax.ejb.EJB;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import model.Filoptwxo;
import model.ejb.FiloptwxoDAO;

/**
 * @author Editor
 */
@WebServlet(name = "FiloptwxoServlet", urlPatterns = {"/FiloptwxoServlet"})
public class FiloptwxoServlet extends HttpServlet {
    @EJB private FiloptwxoDAO filoptwxoDAO;

    /**
     * Processes requests for both HTTP
     * <code>GET</code> and
     * <code>POST</code> methods.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

    String afm = request.getParameter ("afm");
    String name = request.getParameter ("name");
    String lastname = request.getParameter ("lastname");
    String fathername = request.getParameter ("fathername");
    String address = request.getParameter ("address");
    String phone = request.getParameter ("phone");
    String numberop = request.getParameter ("numberop");
    String operation = request.getParameter ("operation");

    Filoptwxo filoptwxo = new Filoptwxo(afm, name, lastname, fathername, address, phone, numberop);

    if (operation.equalsIgnoreCase("Add")) {
        filoptwxoDAO.addFiloptwxo(filoptwxo);
        request.setAttribute("filoptwxo", filoptwxo);
    } else if (operation.equalsIgnoreCase("Edit")) {
        filoptwxoDAO.editFiloptwxo(filoptwxo);
        Filoptwxo searchedFiloptwxo = filoptwxoDAO.getFiloptwxo(afm);
        request.setAttribute("filoptwxo", searchedFiloptwxo);       

    } else if (operation.equalsIgnoreCase("Delete")) {
        filoptwxoDAO.deleteFiloptwxo(filoptwxo);
    } else if (operation.equalsIgnoreCase("Search")) {
        Filoptwxo searchedFiloptwxo = filoptwxoDAO.getFiloptwxo(afm);
        request.setAttribute("filoptwxo", searchedFiloptwxo);
    }
    request.getRequestDispatcher("filoptwxoinfo.jsp").forward(request, response);    
 }

    // <editor-fold defaultstate="collapsed" desc="HttpServlet methods. Click on the + sign on the left to edit the code.">
    /**
     * Handles the HTTP
     * <code>GET</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    /**
     * Handles the HTTP
     * <code>POST</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    /**
     * Returns a short description of the servlet.
     *
     * @return a String containing servlet description
     */
    @Override
    public String getServletInfo() {
        return "Short description";
    }// </editor-fold>
} 
```

FullFiloptwxo.java：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package controller;

import java.io.IOException;
import java.util.ArrayList;
import javax.ejb.EJB;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import model.Filoptwxo;
import model.ejb.FiloptwxoDAO;

/**
 * @author Editor
 */
@WebServlet(name = "FullFiloptwxo", urlPatterns = {"/FullFiloptwxo"})
public class FullFiloptwxo extends HttpServlet {
    @EJB private FiloptwxoDAO filoptwxoDAO;
    /**
     * Processes requests for both HTTP
     * <code>GET</code> and
     * <code>POST</code> methods.
     * 
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

       ArrayList<Filoptwxo> list = filoptwxoDAO.getFullFiloptwxo();
       request.setAttribute("list", list);
       request.getRequestDispatcher("FullFiloptwxo.jsp").forward(request, response);
    }

    // <editor-fold defaultstate="collapsed" desc="HttpServlet methods. Click on the + sign on the left to edit the code.">
    /**
     * Handles the HTTP
     * <code>GET</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    /**
     * Handles the HTTP
     * <code>POST</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    /**
     * Returns a short description of the servlet.
     *
     * @return a String containing servlet description
     */
    @Override
    public String getServletInfo() {
        return "Short description";
    }// </editor-fold>
} 
```

获取Filoptwxo.java：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package controller;

import java.io.IOException;
import javax.ejb.EJB;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import model.Filoptwxo;
import model.ejb.FiloptwxoDAO;

/**
 * @author Editor
 */
@WebServlet(name = "GetFiloptwxo", urlPatterns = {"/GetFiloptwxo"})
public class GetFiloptwxo extends HttpServlet {
    @EJB private FiloptwxoDAO filoptwxoDAO;
    /**
     * Processes requests for both HTTP 
     * <code>GET</code> and
     * <code>POST</code> methods.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
       String afm = request.getParameter("afm");
       Filoptwxo filoptwxo = filoptwxoDAO.getFiloptwxo(afm);
       request.setAttribute("filoptwxo", filoptwxo);
       request.getRequestDispatcher("filoptwxoinfo.jsp").forward(request, response);
    }

    // <editor-fold defaultstate="collapsed" desc="HttpServlet methods. Click on the + sign on the left to edit the code.">
    /**
     * Handles the HTTP
     * <code>GET</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    /**
     * Handles the HTTP
     * <code>POST</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    /**
     * Returns a short description of the servlet.
     *
     * @return a String containing servlet description
     */
    @Override
    public String getServletInfo() {
        return "Short description";
    }// </editor-fold>
} 
```

网络-xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>filoptwxoinfo.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

这是我使用的源代码，但我遇到了 HTTP ERROR 404 的问题，我不知道我还必须做什么......我现在正试图找到一个解决方案 2 天，所以这就是我写的原因整个代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T21:49:59.600

您应该按照定义的方式调用 servlet：

```
@WebServlet(name = "FiloptwxoServlet", urlPatterns = {"/FiloptwxoServlet"}) 
```

错误的

```
 <form action=".FiloptwxoServlet" method="POST"> 
```

好的

```
 <form action="FiloptwxoServlet" method="POST"> 
```

将所有链接更改为 .jsp 文件（在所有 .java 文件中）

**“filoptwxoinfo.jsp”**到
**“/WEB-INF/filoptwxoinfo.jsp”**

HTML 的 action 属性可以指向 servlet URL，method="post" 将触发 servlet 的 doPost() 方法，您可以在其中自由控制 HTTP 请求和响应。将所有逻辑放入 doPost() 方法中。

*   不要从 doGet() 方法调用 doPost() 方法。
*   不要让他们都调用一些其他常用方法，如 **processRequest()**或其他东西。（就像你在代码中所做的那样）这是完全错误的。

**FiloptwxoServlet.java**：

```
[...]
@WebServlet("/FiloptwxoServlet")

[...]

public class FiloptwxoServlet extends HttpServlet {
[...]

@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

[...]  
request.getRequestDispatcher("/WEB-INF/filoptwxoinfo.jsp").forward(request, response);
} 
```

有关更多信息，请查看此处[stackoverflow：how-to-call-servlet-through-a-jsp-page](https://stackoverflow.com/questions/5649722/how-to-call-servlet-through-a-jsp-page)和
[servlets/info](https://stackoverflow.com/tags/servlets/info)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T21:55:32.810

`form action=".FiloptwxoServlet"`前面有句号。

# mysql - mysql订单字符串作为数字

> ID：13934418
> 
> 赞同：4
> 
> 时间：2012-12-18T13:48:03.747
> 
> 标签：mysql, string, numbers

我已经搜索了几天以在 mysql 中将字符串排序为数字。

我的行看起来像这样：

订单列

```
1.1.2
1.1.100
1.1.1 
```

在 mysql 中按此列升序排序将产生：

```
1.1.1
1.1.100
1.1.2 
```

我有兴趣获得以下结果：

```
1.1.1
1.1.2
1.1.100 
```

有没有办法使用 SQL 产生这个结果？

我的专栏的其他可能值：

```
28.1999.1.1
1
1.1.154.20
100.1.1.1.1.15 
```

谢谢，我感谢大家的时间。

编辑： [存储树数据的快速关系方法（例如文章的线程评论）](https://stackoverflow.com/questions/846201/fast-relational-method-of-storing-tree-data-for-instance-threaded-comments-on-a) 看看第一个答案，Ayman Hourieh 的答案。我正在尝试使该解决方案发挥作用。我的网站每篇文章的评论不超过 10k，所以我找到了这样的解决方法：

```
000001
000002
000002.000001
000002.000001.000001
000002.000002
000002.000003
000003 
```

基本上，将零放在我的评论计数器之前，这样字符串比较就不会失败。但这仅适用于 99999 条评论。我可以添加更多的零，比如说 10 个零，这将适用于 999999999 条评论，但我希望有一个更优雅的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T13:53:13.417

如果字符串不是太长，你可以这样做

```
ORDER BY cast(replace(your_column_name,'.','') as unsigned); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T15:04:51.333

您将无法有效地执行此操作，因为***这会错过所有索引***，但如果它是一次性的，这将起作用。遗憾的是，由于 MySQL 无法一次替换多个字符（据我所知），它看起来很糟糕。

```
SELECT value FROM TEST ORDER BY 
   REPLACE(
    REPLACE(
      REPLACE(
        REPLACE(
          REPLACE(
            REPLACE(
              REPLACE(
                REPLACE(
                  REPLACE(value, 
                    '1', '0'),
                  '2', '0'), 
                '3', '0'), 
              '4', '0'), 
            '5', '0'), 
          '6', '0'), 
        '7', '0'), 
      '8', '0'), 
    '9', '0'),value; 
```

它基本上会用 0 替换所有数字并首先按该顺序排序。由于`.`在 0 之前排序，它将正确地按数字组排序。完成后，只需按值排序，因为具有相同数字组的任何值都应按正确顺序排序。

为了提高效率，您可以将替换的值作为列存储在数据库中，以便对其进行索引。

[SQLfiddle 演示在这里](http://www.sqlfiddle.com/#!2/d4345/1)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T14:01:06.773

```
SELECT INET_ATON('10.0.5.9'); 
```

试试你的这个功能:)

也许这不是替代方案，因为它仅适用于 IP 地址类型。而且您确实拥有比 IP 地址更多的部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T14:38:14.807

这不会很有效并且可以清理，但这是如何做到这一点的一个想法。它依赖于一个名为 integers 的表，该表有一个名为 i 的列，其中包含 10 行，值为 0 到 9。

```
SELECT somefield    , SUM(POW(100, occurrences - anInteger) * somefield_split) OrderField
FROM
    (SELECT id,anInteger,  somefield, SUBSTRING_INDEX(SUBSTRING_INDEX(somefield, ".", anInteger), ".", -1) AS somefield_split, LENGTH(somefield) - LENGTH(REPLACE(somefield, '.', '')) + 1 AS occurrences
    FROM splittertest, (SELECT a.i*10+b.i AS anInteger FROM integers a, integers b) Sub1
    HAVING occurrences >= anInteger) Sub2
GROUP BY somefield
ORDER BY somefield, OrderField 
```

想法是子选择获取从 0 到 99 的数字范围，并基于此将字符串从点分隔值中拆分出来。它获取特定字符串中的点数。然后，它将字符串的每个位乘以 100 的部分总数减去该部分的数量的幂，并在此基础上求和。

所以 5.10.15 分为 5、10 和 15。有 3 个部分，所以第一个部分乘以 100 的 (3 - 0) 次方，第二个部分乘以 100 的 (2 - 0) 次方，等等.

如果点数不同（即点数越多的点总是越大），这确实会产生奇怪的结果，但这可以通过在计算功率时使用任何线上的最大点数而不是数字来解决在那条特定线上的点。

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T14:03:13.453

如果您按最后一位数字组排序，那么

```
SELECT CAST(MID(order_column, 
CHAR_LENGTH(order_column) - 
LOCATE('.',REVERSE(order_column))+2) AS DECIMAL) AS order_column_as_number
FROM thetable 
ORDER BY order_column_as_number 
```

似乎工作。

如果有没有 '.' 的字符串，则根本不起作用 在它们中，如果您还想按其他组订购，则必须提取更多零件进行订购，但如果您真的希望仅在 sql 中完成，这可能是一个开始。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T14:06:08.153

确保这些数字的列`INT`不是 varchar。

如果您使用 varchar 您的列将按第一个有 1 的人排序，依此类推...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-18T14:00:04.353

你可以使用下面的sql

```
SELECT REPLACE(column_name,'.','') AS column_name1 FROM table_name ORDER BY column_name1; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-18T13:51:34.347

创建一个与此列相等的新列，字符串替换为“。” 用''（什么都没有）。将此新字段存储为数字。在您的查询中按此字段排序。

如果您无法向表中添加新列，您可以在 PHP 等中处理此列，以达到相同的效果，例如在网站上显示。

```
http://php.net/manual/en/function.str-replace.php 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-05-21T13:55:34.107

这是我对最多 4 位小数的数字的解决方案：

```
SELECT myCol, SUBSTRING_INDEX(myCol, ',', 1) * 10000 + LEFT(CONCAT(SUBSTRING_INDEX(myCol, ',', -1), '0000'), 4) as toOrder 
FROM `myTable`
ORDER BY toOrder DESC 
```

您可以这样设置 8 位小数：

```
SELECT myCol, SUBSTRING_INDEX(myCol, ',', 1) * 100000000 + LEFT(CONCAT(SUBSTRING_INDEX(myCol, ',', -1), '00000000'), 8) as toOrder 
FROM `myTable`
ORDER BY toOrder DESC 
```

ETC...

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-08-03T02:23:04.437

首先按[INSTR](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_instr)排序，然后通过替换“。”进行排序。

```
SELECT content_id FROM TEST ORDER BY INSTR(`content_id`, '.'), replace(`content_id`,'.','') 
```

[SQLfiddle](http://www.sqlfiddle.com/#!9/971bd7/1)

# android - 致命信号 11 (SIGSEGV) 在 0x00000020 (code=1) 后应用程序崩溃 - Android

> ID：13934419
> 
> 赞同：4
> 
> 时间：2012-12-18T13:48:05.217
> 
> 标签：android, opencv, video-capture

我正在使用一个 android 应用程序。在我的应用程序中，我使用 opencv 原生相机捕获图像。当我打开相机捕捉图像时，应用程序崩溃了。显示“致命信号 11 (SIGSEGV) at 0x00000020 (code=1)”的日志文件。我不知道为什么它崩溃了。谁能告诉我可能是什么问题？此代码在模拟器中运行。但是当我在设备中使用它时它崩溃了。我正在使用 opencv 人脸检测示例。代码片段如下，

```
 /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        Log.i(TAG, "onCreate");
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);

        Log.i(TAG, "Trying to load OpenCV library");
        if (!OpenCVLoader.initAsync(OpenCVLoader.OPENCV_VERSION_2_4_2, this, mOpenCVCallBack))
        {
            Log.e(TAG, "Cannot connect to OpenCV Manager");
        }
    }

private BaseLoaderCallback  mOpenCVCallBack = new BaseLoaderCallback(this) {
        @Override
        public void onManagerConnected(int status) {
            switch (status) {
                case LoaderCallbackInterface.SUCCESS:
                {
                    Log.i(TAG, "OpenCV loaded successfully");

                    // Load native libs after OpenCV initialization
                    System.loadLibrary("detection_based_tracker");

                    // Create and set View
                    mView = new FdView(mAppContext);
                    mView.setDetectorType(mDetectorType);
                    mView.setMinFaceSize(0.2f);
                    setContentView(mView);
                    // Check native OpenCV camera
                    if( !mView.openCamera() ) {
                        AlertDialog ad = new AlertDialog.Builder(mAppContext).create();
                        ad.setCancelable(false); // This blocks the 'BACK' button
                        ad.setMessage("Fatal error: can't open camera!");
                        ad.setButton("OK", new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int which) {
                            dialog.dismiss();
                            finish();
                            }
                        });
                        ad.show();
                    }
                } break;
                default:
                {
                    super.onManagerConnected(status);
                } break;
            }
        }
    };
   public FdView(Context context) {
        super(context);

        try {
            InputStream is = context.getResources().openRawResource(R.raw.lbpcascade_frontalface);
            File cascadeDir = context.getDir("cascade", Context.MODE_PRIVATE);
            mCascadeFile = new File(cascadeDir, "lbpcascade_frontalface.xml");
            FileOutputStream os = new FileOutputStream(mCascadeFile);

            byte[] buffer = new byte[4096];
            int bytesRead;
            while ((bytesRead = is.read(buffer)) != -1) {
                os.write(buffer, 0, bytesRead);
            }
            is.close();
            os.close();

            mJavaDetector = new CascadeClassifier(mCascadeFile.getAbsolutePath());
            if (mJavaDetector.empty()) {
                Log.e(TAG, "Failed to load cascade classifier");
                mJavaDetector = null;
            } else
                Log.i(TAG, "Loaded cascade classifier from " + mCascadeFile.getAbsolutePath());

            mNativeDetector = new DetectionBasedTracker(mCascadeFile.getAbsolutePath(), 0);

            cascadeDir.delete();

        } catch (IOException e) {
            e.printStackTrace();
            Log.e(TAG, "Failed to load cascade. Exception thrown: " + e);
        }
    }
    @Override
protected Bitmap processFrame(VideoCapture capture) {
    capture.retrieve(mRgba, Highgui.CV_CAP_ANDROID_COLOR_FRAME_RGBA);
    capture.retrieve(mGray, Highgui.CV_CAP_ANDROID_GREY_FRAME);

    if (mAbsoluteFaceSize == 0)
    {
        int height = mGray.rows();
        if (Math.round(height * mRelativeFaceSize) > 0);
        {
            mAbsoluteFaceSize = Math.round(height * mRelativeFaceSize);
        }
        mNativeDetector.setMinFaceSize(mAbsoluteFaceSize);
    }

    MatOfRect faces = new MatOfRect();

    if (mDetectorType == JAVA_DETECTOR)
    {
        if (mJavaDetector != null)
            mJavaDetector.detectMultiScale(mGray, faces, 1.1, 2, 2 // TODO: objdetect.CV_HAAR_SCALE_IMAGE
                    , new Size(mAbsoluteFaceSize, mAbsoluteFaceSize), new Size());
    }
    else if (mDetectorType == NATIVE_DETECTOR)
    {
        if (mNativeDetector != null)
            mNativeDetector.detect(mGray, faces);
    }
    else
    {
        Log.e(TAG, "Detection method is not selected!");
    }

    Rect[] facesArray = faces.toArray();
    for (int i = 0; i < facesArray.length; i++)
        Core.rectangle(mRgba, facesArray[i].tl(), facesArray[i].br(), FACE_RECT_COLOR, 3);

    Bitmap bmp = Bitmap.createBitmap(mRgba.cols(), mRgba.rows(), Bitmap.Config.ARGB_8888);

    try {
        Utils.matToBitmap(mRgba, bmp);
    } catch(Exception e) {
        Log.e(TAG, "Utils.matToBitmap() throws an exception: " + e.getMessage());
        bmp.recycle();
        bmp = null;
    }

    return bmp;
} 
```

日志如下。

```
I/dalvikvm-heap(  688): Grow heap (frag case) to 7.827MB for 1228816-byte allocation
D/dalvikvm(  688): GC_CONCURRENT freed <1K, 12% free 7852K/8839K, paused 2ms+2ms
D/dalvikvm(  688): GC_FOR_ALLOC freed 1200K, 25% free 6652K/8839K, paused 24ms
I/dalvikvm-heap(  688): Grow heap (frag case) to 7.827MB for 1228816-byte allocation
F/libc    (  688): Fatal signal 11 (SIGSEGV) at 0x00000020 (code=1)
I/DEBUG   (   83): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
I/DEBUG   (   83): Build fingerprint: 'softwinners/crane_q7/crane-q7:4.0.3/IML74K/20120709:eng/test-keys'
I/DEBUG   (   83): pid: 688, tid: 690  >>> com.user.mailconf <<<
I/DEBUG   (   83): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 00000020
I/DEBUG   (   83):  r0 00000000  r1 000106e0  r2 000106e0  r3 40a091e8
I/DEBUG   (   83):  r4 50a090f8  r5 408d3c58  r6 00000000  r7 000106e0
I/DEBUG   (   83):  r8 50a09000  r9 000106e0  10 50a09100  fp 4085f394
I/DEBUG   (   83):  ip 0000001f  sp 100ffdd0  lr 4084efc4  pc 4085efac  cpsr 80000010
I/DEBUG   (   83):  d0  0000000000000000  d1  0000000000000000
I/DEBUG   (   83):  d2  0000000000000000  d3  0000000000000000
I/DEBUG   (   83):  d4  0000000000000000  d5  0000000000000000
I/DEBUG   (   83):  d6  0000000000000000  d7  0000000000000000
I/DEBUG   (   83):  d8  0000000000000000  d9  0000000000000000
I/DEBUG   (   83):  d10 0000000000000000  d11 0000000000000000
I/DEBUG   (   83):  d12 0000000000000000  d13 0000000000000000
I/DEBUG   (   83):  d14 0000000000000000  d15 0000000000000000
I/DEBUG   (   83):  d16 0000000000000000  d17 991f1f1f991f1f1f
I/DEBUG   (   83):  d18 0707070703030303  d19 0000000000000000
I/DEBUG   (   83):  d20 0100010001000100  d21 0100010001000100
I/DEBUG   (   83):  d22 0000000000000000  d23 0000000000000000
I/DEBUG   (   83):  d24 0000000000000000  d25 0000000000000000
I/DEBUG   (   83):  d26 0067006700670067  d27 0067006700670067
I/DEBUG   (   83):  d28 0067006700670067  d29 0067006700670067
I/DEBUG   (   83):  d30 00308000002b4000  d31 003b40000035c000
I/DEBUG   (   83):  scr 80000012
I/DEBUG   (   83): 
I/DEBUG   (   83):          #00  pc 00042fac  /system/lib/libdvm.so
I/DEBUG   (   83):          #01  pc 00032fc0  /system/lib/libdvm.so (_Z21dvmHeapBitmapScanWalkP10HeapBitmapPFvP6ObjectPvS3_ES3_)
I/DEBUG   (   83):          #02  pc 000433c4  /system/lib/libdvm.so (_Z24dvmHeapScanMarkedObjectsv)
I/DEBUG   (   83):          #03  pc 00033694  /system/lib/libdvm.so (_Z25dvmCollectGarbageInternalPK6GcSpec)
I/DEBUG   (   83):          #04  pc 0007ba40  /system/lib/libdvm.so
I/DEBUG   (   83):          #05  pc 0005f656  /system/lib/libdvm.so
I/DEBUG   (   83):          #06  pc 00012be4  /system/lib/libc.so (__thread_entry)
I/DEBUG   (   83):          #07  pc 00012738  /system/lib/libc.so (pthread_create)
I/DEBUG   (   83): 
I/DEBUG   (   83): code around pc:
I/DEBUG   (   83): 4085ef8c e1a04000 e59f01e0 e1a07001 e79f5000  .@.......p...P..
I/DEBUG   (   83): 4085ef9c e5940000 e59530b0 e1500003 0a00003a  .....0....P.:...
I/DEBUG   (   83): 4085efac e590c020 e31c0101 0a000011 ebfffeb9   ...............
I/DEBUG   (   83): 4085efbc e5940000 e5903020 e3130202 08bd81f0  .... 0..........
I/DEBUG   (   83): 4085efcc e594e008 e2846010 e35e0000 08bd81f0  .....`....^.....
I/DEBUG   (   83): 
I/DEBUG   (   83): code around lr:
I/DEBUG   (   83): 4084efa4 e0888404 e16fcf16 e58d3004 e1a0100a  ......o..0......
I/DEBUG   (   83): 4084efb4 e1a02009 e1c66c33 e088018c e12fff3b  . ..3l......;./.
I/DEBUG   (   83): 4084efc4 e3560000 e59d3004 1afffff5 e5971010  ..V..0..........
I/DEBUG   (   83): 4084efd4 e597800c e068e001 e1a0142e e2844001  ......h......@..
I/DEBUG   (   83): 4084efe4 e2855c01 e1510004 2affffe7 e28dd00c  .\....Q....*....
I/DEBUG   (   83): 
I/DEBUG   (   83): stack:
I/DEBUG   (   83):     100ffd90  00000000  
I/DEBUG   (   83):     100ffd94  408cef90  /system/lib/libdvm.so
I/DEBUG   (   83):     100ffd98  000106e0  [heap]
I/DEBUG   (   83):     100ffd9c  40fdc538  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (   83):     100ffda0  000106e0  [heap]
I/DEBUG   (   83):     100ffda4  41165c10  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (   83):     100ffda8  00000000  
I/DEBUG   (   83):     100ffdac  80000000  
I/DEBUG   (   83):     100ffdb0  40a0a0b8  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (   83):     100ffdb4  4085ef28  /system/lib/libdvm.so
I/DEBUG   (   83):     100ffdb8  41165bf0  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (   83):     100ffdbc  408d3c58  /system/lib/libdvm.so
I/DEBUG   (   83):     100ffdc0  4116c158  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (   83):     100ffdc4  408d3c58  /system/lib/libdvm.so
I/DEBUG   (   83):     100ffdc8  df0027ad  
I/DEBUG   (   83):     100ffdcc  00000000  
I/DEBUG   (   83): #00 100ffdd0  00100000  [heap]
I/DEBUG   (   83):     100ffdd4  10000100  
I/DEBUG   (   83):     100ffdd8  00000000  
I/DEBUG   (   83):     100ffddc  0001079c  [heap]
I/DEBUG   (   83):     100ffde0  50a09000  
I/DEBUG   (   83):     100ffde4  4084efc4  /system/lib/libdvm.so
I/DEBUG   (   83): #01 100ffde8  408d3c58  /system/lib/libdvm.so
I/DEBUG   (   83):     100ffdec  80000000  
I/DEBUG   (   83):     100ffdf0  ffffffff  
I/DEBUG   (   83):     100ffdf4  000106c8  [heap]
I/DEBUG   (   83):     100ffdf8  000106e0  [heap]
I/DEBUG   (   83):     100ffdfc  408cef90  /system/lib/libdvm.so
I/DEBUG   (   83):     100ffe00  fffffe4c  
I/DEBUG   (   83):     100ffe04  7fffffff  
I/DEBUG   (   83):     100ffe08  00000000  
I/DEBUG   (   83):     100ffe0c  0008b5db  [heap]
I/DEBUG   (   83):     100ffe10  408d3c58  /system/lib/libdvm.so
I/DEBUG   (   83):     100ffe14  4085f3c8  /system/lib/libdvm.so
I/DEBUG   (  992): debuggerd: Jul  9 2012 16:58:08
I/ActivityManager(  144): Process com.user.mailconf (pid 688) has died.
W/ActivityManager(  144): Force removing ActivityRecord{412fd3f8 com.user.mailconf/org.opencv.samples.fd.FdActivity}: app died, no saved state
D/V4L2CameraDevice(   87): stopDevice
D/CallbackNotifier(   87): storeMetaDataInBuffers, false
I/WindowManager(  144): WIN DEATH: Window{41274608 com.user.mailconf/org.opencv.samples.fd.FdActivity paused=false}
W/WindowManager(  144): Force-removing child win Window{4133c958 SurfaceView paused=false} from container Window{41274608 com.user.mailconf/org.opencv.samples.fd.FdActivity paused=false}
D/Zygote  (   85): Process 688 terminated by signal (11)
I/WindowManager(  144): MediaPlayer.is not PlayingVideo
W/WindowManager(  144): Failed looking up window
W/WindowManager(  144): java.lang.IllegalArgumentException: Requested window android.os.BinderProxy@4119ca18 does not exist
W/WindowManager(  144):     at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:7156)
W/WindowManager(  144):     at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:7147)
W/WindowManager(  144):     at com.android.server.wm.WindowState$DeathRecipient.binderDied(WindowState.java:1529)
W/WindowManager(  144):     at android.os.BinderProxy.sendDeathNotice(Binder.java:417)
W/WindowManager(  144):     at dalvik.system.NativeStart.run(Native Method)
I/WindowManager(  144): WIN DEATH: null
V/TabletStatusBar(  210): setLightsOn(true)
D/V4L2CameraDevice(   87): cedarx_hardware_exit ok
W/CameraService(   87): native_window_api_disconnect failed: Broken pipe (-32), api: 6
I/CameraService(   87): Destroying camera 0
D/CallbackNotifier(   87): storeMetaDataInBuffers, false
W/AudioFlinger(   87): session id 7 not found for pid 87
W/AudioFlinger(   87): session id 8 not found for pid 87
D/dalvikvm(  337): GC_FOR_ALLOC freed 162K, 35% free 7073K/10823K, paused 26ms
W/InputManagerService(  144): Got RemoteException sending setActive(false) notification to pid 688 uid 10038
D/dalvikvm(  337): GC_FOR_ALLOC freed 267K, 35% free 7128K/10823K, paused 24ms
I/WindowManager(  144): MediaPlayer.is not PlayingVideo
I/wpa_supplicant(  455): [CTRL_IFACE]SIGNAL_POLL
D/dalvikvm(  337): GC_CONCURRENT freed <1K, 31% free 7536K/10823K, paused 3ms+5ms
D/dalvikvm(  337): GC_FOR_ALLOC freed 654K, 33% free 7322K/10823K, paused 26ms
I/dalvikvm-heap(  337): Grow heap (frag case) to 8.533MB for 1286224-byte allocation
D/dalvikvm(  337): GC_FOR_ALLOC freed 2K, 21% free 8575K/10823K, paused 24ms
D/dalvikvm(  337): GC_CONCURRENT freed 60K, 18% free 8964K/10823K, paused 2ms+4ms
D/dalvikvm(  337): GC_CONCURRENT freed 2240K, 28% free 7843K/10823K, paused 2ms+3ms
I/WindowManager(  144): MediaPlayer.is not PlayingVideo
I/WindowManager(  144): MediaPlayer.is not PlayingVideo
I/wpa_supplicant(  455): [CTRL_IFACE]SIGNAL_POLL
I/ActivityManager(  144): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.user.mailconf/.activity.Accounts} from pid 337
D/ViewRootImpl(  144): pckname = com.user.mailconf
D/dalvikvm(  993): Late-enabling CheckJNI
I/ActivityManager(  144): Start proc com.user.mailconf for activity com.user.mailconf/.activity.Accounts: pid=993 uid=10038 gids={3003, 1015, 1006}
I/dalvikvm(  993): Turning on JNI app bug workarounds for target SDK version 8...
D/OpenGLRenderer(  337): Flushing caches (mode 1)
D/dalvikvm(   85): GC_EXPLICIT freed 37K, 7% free 5611K/6019K, paused 3ms+37ms
D/OpenGLRenderer(  337): Flushing caches (mode 0)
D/dalvikvm(   85): GC_EXPLICIT freed <1K, 7% free 5611K/6019K, paused 3ms+10ms
D/dalvikvm(   85): GC_EXPLICIT freed <1K, 7% free 5611K/6019K, paused 7ms+4ms
I/ActivityThread(  993): Pub com.user.mailconf.messageprovider: com.user.mailconf.provider.MessageProvider
I/HubMail (  993): Loading preferences from DB into Storage
D/dalvikvm(  993): GC_CONCURRENT freed 169K, 6% free 5929K/6279K, paused 2ms+9ms
I/HubMail (  993): Preferences load took 45ms
I/wpa_supplicant(  455): [CTRL_IFACE]SIGNAL_POLL 
```

# sencha-touch - Store 需要在其自身或其代理上定义模型

> ID：13934421
> 
> 赞同：3
> 
> 时间：2012-12-18T13:48:09.367
> 
> 标签：sencha-touch, sencha-touch-2

当我在控制台窗口中执行此操作时：

```
var s = new Ext.data.Store('MyApp.store.Genders'); 
```

我收到以下错误：

**除非您通过元数据定义模型，否则商店需要在其自身或其代理上定义模型**

但是我的商店实际上定义了一个模型：

```
Ext.define('MyApp.store.Genders', {
    extend: 'Ext.data.Store',

    requires: [
        'MyApp.model.Lookup',        
        'Ext.data.proxy.Rest'
    ],

    config: {
        autoLoad: true,
        model: 'MyApp.model.Lookup',
        storeId: 'GenderStore',
        proxy: {
            type: 'rest',            
            url : '/api/lookup/genders',
            reader: {
                type: 'json'
            }
        }
    }    
}); 
```

为什么这不能正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:57:48.263

请问您为什么要创建一个新的商店对象？当您使用`Ext.define`时，从技术上讲，您已经在 Sencha 中创建了一个可用于存储所有数据的 Store 对象。为什么需要创建

`var s =`

基本上，当您创建`Ext.define('StoreName',{params_with_Model})`存储对象时，您创建了一个名为 StoreName 的关联模型。但是，您还没有将其注册为 xtype，您可以稍后再制作对象（实际上我什至不确定您是否可以这样做）。

但是，当您在 Sencha 中创建新变量 s 时，您并没有创建存储类型为“StoreName”的对象。相反，您尝试创建具有相同名称的第二个商店。这与第一个完全无关，因此 Sencha 希望您提供模型和数据，就像您通常在`Ext.define`.

# ios - 网站在 iOS6 中正常呈现，但在 iOS5 iPad 模拟器中呈现两倍大小

> ID：13934422
> 
> 赞同：0
> 
> 时间：2012-12-18T13:48:26.180
> 
> 标签：ios, ipad, ios-simulator, mobile-safari, media-queries

我无法通过谷歌搜索到 iOS5 上的 Safari 将网站呈现为与 iOS6 上的 Safari 相当的**两倍大小。**但是，这正是我使用**iOS Simulator**可以看到的。

我有 MacOS 10.7。我目前正在测试 iPad2，但似乎我在 iPhone4 上遇到了同样的问题。

*   有没有人遇到过这样的问题？

*   我怎样才能防止这种情况？

*   我可以使用媒体查询检测 iOS5 和 iOS6 吗？

我把我所有的 CSS 代码放在这里，但是它太大了，这不能包含答案：

```
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed,
figure, figcaption, footer, header, hgroup,
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure,
footer, header, hgroup, menu, nav, section {
    display: block;
}
body {
    line-height: 1;
    display: block;
}
ol, ul {
    list-style: none;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
}

/* -- Main CSS -- */

html, body {
    height: 100%;
    font-size: 16px;
}

body.IE {
    font-family: Verdana,Arial,sans-serif;
}

body.notIE {
    font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
}

.container {
    background: rgb(255,255,255);
    background: -moz-linear-gradient(top,  rgba(255,255,255,1) 0%, rgba(238,238,238,1) 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,1)), color-stop(100%,rgba(238,238,238,1)));
    background: -webkit-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(238,238,238,1) 100%);
    background: -o-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(238,238,238,1) 100%);
    background: -ms-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(238,238,238,1) 100%);
    background: linear-gradient(to bottom,  rgba(255,255,255,1) 0%,rgba(238,238,238,1) 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#eeeeee',GradientType=0 );
}

.container::before, .container::after {
    display: table;
    line-height: 0;
    content: "";
}

.calendar_holder {
    margin: 2em auto;
    height: 100%;
    width: 960px;
}

.calendar {
    height: 640px;
    position: relative;
    border: 2px solid #CCC;
    border-radius: 1em;
    box-shadow: 0 2px 2px #999, 0 0 1.88em 1.88em #CCC;
}

.calendar h1 {
    cursor: default;
    padding: 0 1em;
    text-align: center;
    line-height: 2em;
    color: rgba(255, 255, 255, 0.95);
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.5);
    text-transform: capitalize;
    background-color: rgba(0, 0, 0, 0.1);
    border-top-left-radius: inherit;
    border-top-right-radius: inherit;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    font-size: 2.75em;
    font-weight: bold;
    text-rendering: optimizelegibility;
}

.calendar p {
    padding: 1em;
    text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);
}

.calendar p.winner {
    font-size: 1.5em;
}

.calendar p.winner strong {
    color: #2C86C2;
}

.day {
    background: -moz-linear-gradient(-45deg,  rgba(255,255,255,0.1) 50%, rgba(255,255,255,0.25) 100%);
    background: -webkit-gradient(linear, left top, right bottom, color-stop(50%,rgba(255,255,255,0.1)), color-stop(100%,rgba(255,255,255,0.25)));
    background: -webkit-linear-gradient(-45deg,  rgba(255,255,255,0.1) 50%,rgba(255,255,255,0.25) 100%);
    background: -o-linear-gradient(-45deg,  rgba(255,255,255,0.1) 50%,rgba(255,255,255,0.25) 100%);
    background: -ms-linear-gradient(-45deg,  rgba(255,255,255,0.1) 50%,rgba(255,255,255,0.25) 100%);
    background: linear-gradient(135deg,  rgba(255,255,255,0.1) 50%,rgba(255,255,255,0.25) 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1affffff', endColorstr='#40ffffff',GradientType=1 );
    border-radius: 0.25em;
    border: 1px solid rgba(0, 0, 0, 0.5);
    box-shadow: 0 1px 1px 0 rgba(50, 50, 50, 0.5), 0 0 1px 1px rgba(150, 150, 150, 0.25) inset;
    color: rgba(255, 255, 255, 0.95);
    text-align: center;
    text-shadow: 0 0 0.188em rgba(0, 0, 0, 0.5), 0 0 1px rgba(0, 0, 0, 0.5), 1px 1px 0 rgba(0, 0, 0, 0.5), -1px -1px 0 rgba(0, 0, 0, 0.5), -1px 1px 0 rgba(0, 0, 0, 0.5), 1px -1px 0 rgba(0, 0, 0, 0.5);
    text-transform: uppercase;
    padding: 0.188em;
    position: relative; /* to keep transforms working */
    overflow: hidden;   /* to keep transforms working */
    width: 100% !important;
    height: 100% !important;
}

.day time {
    background: -moz-linear-gradient(45deg,  rgba(255,255,255,0.25) 0%, rgba(255,255,255,0) 20%);
    background: -webkit-gradient(linear, left bottom, right top, color-stop(0%,rgba(255,255,255,0.25)), color-stop(20%,rgba(255,255,255,0)));
    background: -webkit-linear-gradient(45deg,  rgba(255,255,255,0.25) 0%,rgba(255,255,255,0) 20%);
    background: -o-linear-gradient(45deg,  rgba(255,255,255,0.25) 0%,rgba(255,255,255,0) 20%);
    background: -ms-linear-gradient(45deg,  rgba(255,255,255,0.25) 0%,rgba(255,255,255,0) 20%);
    background: linear-gradient(45deg,  rgba(255,255,255,0.25) 0%,rgba(255,255,255,0) 20%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#40ffffff', endColorstr='#00ffffff',GradientType=1 );
    width: 100%;
    height: 100%;
    display: block;
    border-radius: 0.25em;
    border: 1px solid rgba(255, 255, 255, 0.1);
    position: relative;
}

.day_holder .day time .date_day {
    font-size: 4em;
    line-height: 1.1em;
}

.day_holder .day time .date_month {
    font-size: 90%;
}

.day_holder {
    border-radius: 0.25em;
    position: absolute;
    -webkit-filter: sepia(25%);
    background: none!important;
    text-decoration: none!important;
}

.day_holder .day:hover {
    background: none;
}

.day_holder .day div {
    -webkit-transition: bottom 0.25s ease;
    -moz-transition: bottom 0.25s ease-in-out;
    transition: bottom 0.25s ease-in-out;
    content: 'Click to win!';
    font-size: 0.65em;
    line-height: 2em;
    position: absolute;
    width: 95%;
    bottom: -2.7em;
}

.day_holder:hover .day div {
    bottom: 0;
}

.question_pane {
    position: absolute;
    background-color: rgba(255, 255, 255, 0.5);
    top: 6.35em;
    max-height: 86%;
    width: 40%;
    margin: 0 5%;
    min-height: 40%;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    box-shadow: 0 1px 1px 0 rgba(0, 0, 0, 0.75);
    overflow-x: hidden;
}

.prize_pane,.sponsor_pane {
    position: absolute;
    right: 6.05%;
    width: 43.95%;
}

.prize_pane {
    max-height: 57.75%;
    top: 5.625em;
    box-shadow: 0 1px 1px 0 rgba(0, 0, 0, 0.75);
    border-bottom-left-radius: 1em;
    border-bottom-right-radius: 1em;
}

.sponsor_pane {
    bottom: 2em;
}

.sponsor_pane h2 {
    display: none;
}

.calendar h2 {
    color: rgba(255, 255, 255, 0.95);
    font-size: 1.15em;
    background-color: rgba(255, 255, 255, 0.25);
    width: 100%;
    line-height: 2em;
    padding: 0 0.5em;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.5);
}

.prize_pane img {
    border: 1px solid rgba(0, 0, 0, 0.5);
    border-bottom-left-radius: 1em;
    border-bottom-right-radius: 1em;
}

.sponsor_pane img {

}

.calendar img {
    vertical-align: middle;
}

form {
    padding: 0.5em 1em;
}

fieldset legend, fieldset strong {
    line-height: 2em;
    text-shadow: 0 1px 1px rgba(255, 255, 255, 0.5);
    font-weight: bold;
    color: rgba(0, 0, 0, 0.85);
}

form ul, form ol {
    display: inline-block;
    margin: 1em 0 0 0;
}

form li {
    float: left;
    width: 100%;
    line-height: 2em;
    height: 2em;
    margin-top: 0.5em;
}

form ol {
    font-size: 0.9em;
    margin: 0;
}

form ol li {
    line-height: 1em;
    height: 1em;
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.9);
    color: #FF6838;
}

form ul.answers {
    margin: 0;
    font-size: 0.9em;
    max-height: 4.5em;
    overflow-x: hidden;
}

form ul.answers li {
    margin: 0;
    line-height: 1.5em;
    min-height: 1.5em;
    position: relative;
    height: auto;
}

form input[type="radio"] {
    float: left;
    height: auto;
    width: auto;
    margin: 0.05em 1em;
}

form label {
    width: 40%;
    float: left;
    line-height: 2em;
    text-shadow: 0 0 1px rgba(0, 0, 0, 0.5), 1px 1px 0 rgba(0, 0, 0, 0.5), -1px -1px 0 rgba(0, 0, 0, 0.5), -1px 1px 0 rgba(0, 0, 0, 0.5), 1px -1px 0 rgba(0, 0, 0, 0.5);
    color: white;
}

form ul.answers label {
    line-height: 1.5em;
    width: 1.094px;
}

form input {
    width: 45%;
    float: right;
    line-height: 1em;
    height: 75%;
    margin: 0;
    border-radius: 1em;
    border: 1px solid rgba(0, 0, 0, 0.5);
    background-color: rgba(255, 255, 255, 0.95);
    box-shadow: 0 0 1px 1px rgba(0, 0, 0, 0.5);
    padding: 0.1em 0.75em;
}

form input:focus {
    outline: none;
}

form input[type="checkbox"] {
    width: auto;
    float: left;
    height: auto;
    margin: 0.6em 1em;
}

form input[type="submit"],.btn-success {
    box-shadow: 0 1px 1px 1px rgba(0, 0, 0, 0.75);
    background: -moz-linear-gradient(top,  rgba(0,0,0,0) 0%, rgba(0,0,0,0.65) 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(0,0,0,0)), color-stop(100%,rgba(0,0,0,0.65)));
    background: -webkit-linear-gradient(top,  rgba(0,0,0,0) 0%,rgba(0,0,0,0.65) 100%);
    background: -o-linear-gradient(top,  rgba(0,0,0,0) 0%,rgba(0,0,0,0.65) 100%);
    background: -ms-linear-gradient(top,  rgba(0,0,0,0) 0%,rgba(0,0,0,0.65) 100%);
    background: linear-gradient(to bottom,  rgba(0,0,0,0) 0%,rgba(0,0,0,0.65) 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00000000', endColorstr='#a6000000',GradientType=0 );
    background-color: #71C502;
    border: 0;
    border-radius: 1em;
    color: rgba(255, 255, 255, 0.95);
    cursor: pointer;
    display: inline-block;
    font-family: arial;
    font-weight: bold;
    height: auto;
    padding: 0.5em 1em;
    text-shadow: none;
    text-decoration: none;
    width: auto;
}

form input[type="submit"]:hover, .btn-success:hover {
    background-color: #84BB49;
}

.btn-success {
    margin: 0.5em 0;
}

form hr {
    margin: 1em 0;
    display: inline-block;
    width: 100%;
    border: 0;
    background-color: rgba(255, 255, 255, 0.25);
    height: 1px;
}

.backlink {
    position: absolute;
    top: 5em;
    left: -1.4em;
}

.backlink a {
    text-decoration: none;
    color: black;
    background-color: rgba(255, 255, 255, 0.8);
    font-family: arial;
    font-weight: bold;
    font-size: 1.5em;
    border-radius: 100%;
    width: 1.5em;
    height: 1.5em;
    display: block;
    text-align: center;
    line-height: 1.6em;
    border: 3px solid rgba(0, 0, 0, 0.75);
    text-indent: -0.1em;
}

.backlink a:hover {
    background-color: rgba(255, 255, 255, 1);
}

/* ----------------- ALL MOBILE ----------------------- */

@media (max-width : 1025px) {

    .container, .calendar_holder, .calendar {
        height: 100%;
        width: 100%;
    }

    .container {
        background: rgb(253,255,255);
        background: -moz-linear-gradient(top,  rgba(253,255,255,1) 0%, rgba(196,196,196,1) 100%);
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(253,255,255,1)), color-stop(100%,rgba(196,196,196,1)));
        background: -webkit-linear-gradient(top,  rgba(253,255,255,1) 0%,rgba(196,196,196,1) 100%);
        background: -o-linear-gradient(top,  rgba(253,255,255,1) 0%,rgba(196,196,196,1) 100%);
        background: -ms-linear-gradient(top,  rgba(253,255,255,1) 0%,rgba(196,196,196,1) 100%);
        background: linear-gradient(to bottom,  rgba(253,255,255,1) 0%,rgba(196,196,196,1) 100%);
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fdffff', endColorstr='#c4c4c4',GradientType=0 );
    }

    .calendar_holder {
        -webkit-overflow-scrolling: touch;
        overflow-y: scroll;
        margin: 0;
    }

    .calendar {
        border: 0;
        border-radius: 0;
        box-shadow: none;
        background-size: cover!important;
        background-attachment: fixed!important;
        background-repeat: no-repeat!important;
        background-position: center center!important;
    }

    .calendar h1 {
        font-size: 1.25em;
        margin: 0;
    }

    form .rememberMe {
        width: 80%;
    }

    .prize_pane {
        max-height: none;
        border-radius: 0;
        box-shadow: none;
    }
    .prize_pane img {
        border: 0;
    }

    .question_pane, .prize_pane, .sponsor_pane {
        position: static;
        width: 90%;
        margin: 1em 5%;
    }
    .backlink {
        position: fixed;
        left: 0.5em;
        bottom: 1em;
    }

    .day_holder {
        width: 4em!important;
        height: 4em!important;
    }

    .day_holder {
        -webkit-filter: none;
        float: left;
        position: relative;
        top: auto!important;
        left: auto!important;
        margin: 0.721em;
        background-image: none!important;
    }

    .day {
        background-color: rgba(0, 0, 0, 0.25);
    }

    .day_holder .day time .date_day {
        font-size: 2.5em;
    }

    .day_holder .day time .date_month {
        font-size: 0.65em;
        text-shadow: 0 1px 0 rgba(0, 0, 0, 0.75);
    }
    .day_holder .day div {
        display: none;
    }

    .clearfix {
        height: 2em;
        float: left;
        clear: both;
        width: 100%;
    }

    .calendar form ul.answers {
        max-height: none;
        overflow-x: visible;
    }

    .calendar form input[type="radio"] {
        width: 5%;
        margin: 0.5em 2% 0.5em 0;
    }

    .calendar form ul.answers label {
        width: 90%;
    }
}

/* These lines are used for scaling */

/* iPad Retina ----------- */
@media (device-height : 2048px) and (device-width : 1536px) and (-webkit-min-device-pixel-ratio: 2) and (orientation : portrait) {
    .calendar {
        font-size: 100%;
    }
}

/* iPad Retina ----------- */
@media (device-height : 2048px) and (device-width : 1536px) and (-webkit-min-device-pixel-ratio: 2) and (orientation : landscape) {
    .calendar {
        font-size: 100%;
    }
}

/* iPad ----------- */
@media (device-height : 1024px) and (device-width : 768px) and (orientation : portrait) {
    .calendar {
        font-size: 174%;
    }
}

/* iPad ----------- */
@media (device-height : 1024px) and (device-width : 768px) and (orientation : landscape) {
    .calendar {
        font-size: 167%;
    }
}

/* iPhone 5 on iOS5 ----------- */
@media (device-height : 1136px) and (device-width : 640px) and (orientation : portrait) and (-webkit-min-device-pixel-ratio: 2)  {
    .calendar {
        font-size: 91%;
    }
}

/* iPhone 5 on iOS5 ----------- */
@media (device-height : 1136px) and (device-width : 640px) and (orientation : landscape) and (-webkit-min-device-pixel-ratio: 2)  {
    .calendar {
        font-size: 37%;
        width: 340px;
    }
}

/* iPhone 4 ----------- */
@media (device-height : 960px) and (device-width : 640px) and (orientation : portrait) {
    .calendar {
        font-size: 74%;
    }
}

/* iPhone 4 ----------- */
@media (device-height : 960px) and (device-width : 640px) and (orientation : landscape) {
    .calendar {
        font-size: 147.2%;
    }
}

/* iPhone 1-3 ----------- */
@media (device-height : 480px) and (device-width : 320px) and (orientation : portrait) {
    .calendar {
        font-size: 74%;
    }
}

/* iPhone 1-3 ----------- */
@media (device-height : 480px) and (device-width : 320px) and (orientation : landscape) {
    .calendar {
        font-size: 108%;
    }
}

/* iPod ----------- */
@media (device-height : 320px) and (device-width : 240px) and (orientation : portrait) {
    .calendar {
        font-size: 51%;
    }
}

/* iPod ----------- */
@media (device-height : 320px) and (device-width : 240px) and (orientation : landscape) {
    .calendar {
        font-size: 62%;
    }
}

/* hi-res smartphone (Galaxy S3) -----------  todo  BECAUSE WE DONT SUPPORT G3, I COMMENT THIS OUT
@media (min-device-width : 40em) and (device-width : 72em) and (orientation : landscape) {
    .calendar {
        font-size: 100%;
    }
}

@media (min-device-width : 40em) and (device-width : 72em) and (orientation : portrait) {
    .calendar {
        font-size: 100%;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:28:16.123

很确定这是一个元标记问题。

试试这个，它适用于大多数设备：

```
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"> 
```

# c# - VS2012中代码分析窗口的API？

> ID：13934423
> 
> 赞同：0
> 
> 时间：2012-12-18T13:48:29.693
> 
> 标签：c#, visual-studio-2012, visual-studio-extensions

在 Visual Studio 2012 中是否有任何 api 可以到达**代码分析**输出工具窗口？我在文档或 ILSpy 搜索中找不到任何内容。

我想从中读取数据。

这是一个带有图像的页面：[http ://codemlia.com/blog/post/2012/09/15/code-analysis-ca0053-building-vs-2010-projects-in-vs-2012.aspx](http://codemlia.com/blog/post/2012/09/15/code-analysis-ca0053-building-vs-2010-projects-in-vs-2012.aspx)

# regex - Notepad++ 多行正则表达式

> ID：13934430
> 
> 赞同：22
> 
> 时间：2012-12-18T13:49:02.680
> 
> 标签：regex, notepad++

我在这里链接了数百个类型的文件：http: [//pastebin.com/fGgLfZf8](http://pastebin.com/fGgLfZf8)

但我想删除所有占据多于一行的评论，例如。

```
<!--- MPU ---> 
```

应该保持不变，而

```
<!--
************
blablabla
************
--> 
```

应该被删除。

我知道 Notepad++ 功能不仅可以使用正则表达式查找文档，而且我正在尝试使用它，但我遇到了一些困难。首先，我正在尝试这个正则表达式：

```
<\!\-\-(.*?)\-\-> 
```

在这里进行了测试：[http](http://www.regextester.com/) ://www.regextester.com/至少部分有效（因为它突出显示了仅在线发表的评论）但是如果我将这个正则表达式复制并粘贴到 Notepad++ 上，它将只匹配单行评论=\

有人知道如何在 Notepad++ 中做到这一点吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-18T14:03:59.287

在“搜索模式”中的“正则表达式”选择旁边有一个“匹配换行符”复选框（根据@glatapoui，应该注意这仅适用于 Notepad++ v6，不适用于以前的版本）。

![在此处输入图像描述](../Images/5df0442b12fcee018c3121ca8fdecab2.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T19:43:33.337

此表达式`<!--.+?(?<=[\*\r\n])-->`也仅在 Notepad++ 中匹配多行注释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-31T20:07:38.227

捕获多行文本的另一种方法是使用表达式：

```
<!---([\S\s]+?)---> 
```

\S+ 匹配所有无空格符号，
\s+ 匹配所有空格符号（包括 \r \n \t）。

它适用于记事本++，也许，否则也......

**编辑：** 乍一看，我没有注意到问题是只捕获并删除多行注释，不包括单行注释。我找到了两次迭代的方法。首先，我们需要在文本之后查找并替换为空

```
<!—-(?:(?!.*—->)[\s\S]+?—->|) 
```

这将捕获所有多行注释和单行注释的前缀。然后我们需要带回我们丢失的单行前缀：

```
Find:
(.+—->)

Replace:
<!—-\1 
```

它将修复单行注释。“--->”的组合不能出现xml代码否则注释结束。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T14:14:09.797

`<!--[*a-zA-Z\r\n]*-->`

这个似乎只在记事本++中采用多行注释

编辑：小错误：空格是这个问题。你可以试试 `<!--[\r\n]{1}[* a-zA-Z\r\n]*-->`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-09T11:43:55.627

如果它是单个文档，一个简单的*技巧是将行尾转换为 Unix 。*

菜单：`[Edit] -> [EOL Conversion] -> [Unix]`

然后只需使用简单的**\n**来检测表达式中的换行符。

这样您就不必更改从某些在线正则表达式构建器构造/复制的表达式。

**注意**：不要忘记将行尾切换回 Windows，以防万一。

# c - C编译器断言：如何在表达式固定的地方动态使用它们？

> ID：13934431
> 
> 赞同：5
> 
> 时间：2012-12-18T13:49:03.677
> 
> 标签：c, compiler-construction, assert

我的代码广泛使用这样的编译器断言来在构建时标记错误而不是运行时，并通过在运行时不执行断言来提高性能。

```
#define COMPILER_ASSERT(EXPR)    switch (0) {case 0: case (EXPR):;} 
```

都好。我想扩展它以在以下情况下使用编译器断言。假设我有一个从 100 个位置调用的宏，其中 99 个传递一个固定值，其中 1 个传递一个变量。我如何编码宏以使其成为 99 个位置的编译器断言和最后一个位置的运行时断言。

如果我能保证 MY_FUNCTION() 总是以固定值调用，我可以这样编码。

```
void my_function(int x)
{
  //do something
}

#define MY_FUNCTION(X) \
  COMPILER_ASSERT(X != 0); \
  my_function(X)

//These can all take advantage of a compiler assert.
MY_FUNCTION(1);
MY_FUNCTION(SOME_HASH_DEFINE);
MY_FUNCTION(sizeof(SOME_STRUCTURE));
//This can't (this is a contrived example - actual code is complex).
int some_variable = 1;
MY_FUNCTION(some_variable); 
```

所以，如果我不能保证 X 是固定的，但想利用每次调用 MY_FUNCTION() 的优势，我该如何编码呢？就像是：

```
#define MY_FUNCTION(X) \
  if (X is a fixed value) COMPILER_ASSERT(X != 0); \
  else assert(X != 0); \ 
  my_function(X) 
```

重新编码对 MY_FUNCTION() 的调用以仅传递固定值对我来说不是一个选择。是的，我可以定义 MY_FUNCTION_FIXED_X 和 MY_FUNCTION_VARIABLE_X 但这会将所有这些都暴露给调用代码。

谢谢你的帮助。尼克B

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:38:54.340

如果您的 C 编译器支持可变长度数组，您可以编写如下内容：

```
#define GENERIC_ASSERT(EXPR) \
  ((EXPR) ? (void) 0 : assert((EXPR)), (void) sizeof(char[(EXPR) ? 1 : -1])) 
```

如果`EXPR`是一个错误值的编译时间常数，这将减少为：

```
(assert((EXPR)), (void) sizeof(char[-1])) 
```

这是一个编译错误（它涉及一个负长度数组）。

如果`EXPR`是一个真值编译时间常数，我们得到：

```
((void) 0), (void) 1) 
```

如果使用真值编译时间常数调用，Clang 和 gcc 都能够将断言减少到零。

if`EXPR`有一个运行时值，`sizeof`如果调用的表达式将导致运行时错误（例如中止），因此`assert`首先通过使用逗号运算符对 进行排序。

不幸的是，在编译时常量的情况下，gcc 输出的错误消息并不是特别有启发性：

```
prog.c:5: error: size of array ‘type name’ is negative 
```

在 Clang 中要好一些：

```
error: array size is negative
  GENERIC_ASSERT(2 + 2 == 5);
  ^~~~~~~~~~~~~~~~~~~~~~~~~~
note: expanded from:
  ((EXPR) ? (void) 0 : assert((EXPR)), (void) sizeof(char[(EXPR) ? 1 : -1]))
                                                          ^~~~~~~~~~~~~~~ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:41:30.457

这个怎么样 ：

```
#define MY_FUNCTION(X) \
  do{ \
if (X>=1 && X<=20) {\
COMPILER_ASSERT(X != 0); \
my_function(X);\
}\ // end if block
  // you can use break here too
  else myfunction2(X,__FILE__,__LINE__); \ // this will be the runtime assert
 }while (0);

void myfunction2(int x, const char * file, const int line)
{ 
// print here information
exit(-1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:46:03.343

在 P99 我有这个用于静态断言的宏

```
# if p99_has_feature(c_static_assert)
#  define static_assert _Static_assert
# else
#  define static_assert(EXPR, DIAGSTR)                            \
extern char const p00_compiletime_assert[                         \
 sizeof((void const*[3*(!!(EXPR)) - 1]){                          \
    &p00_compiletime_assert,                                      \
   "static assertion failed: " P99_STRINGIFY(EXPR) ", " DIAGSTR}) \
]
extern char const p00_compiletime_assert[sizeof(void const*[2])];
# endif
#endif 
```

这样做的好处是您几乎可以在任何地方使用它，至少在 C99 中可以使用声明。（C99 允许混合声明和声明）所以这可以在任何类型的功能块内使用，或者在提供`EXPR`编译时整数常量的文件范围内使用。

# asp.net-mvc - Asp.net mvc 4 部署错误

> ID：13934432
> 
> 赞同：4
> 
> 时间：2012-12-18T13:49:09.247
> 
> 标签：asp.net-mvc, deployment

我在 mvc 4 中开发了一个 Web 应用程序。在开发机器上一切都很好，但是在实时服务器上它给了我以下错误。

无法加载文件或程序集

> 'System.Web.Http, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 或其依赖项之一。该模块应包含程序集清单。

我尝试了以下解决方案：

*   将 dll 文件从我的本地驱动器复制到 bin 文件夹
*   检查我的主机是否启用了 asp.net 4
*   已检查 web.config 文件是否已正确配置。

这是确切的屏幕跟踪。请注意，最后一行显示了 .net 版本 4 和 asp.net 版本 4，所以我认为这不是问题。请指导我。

```
Could not load file or assembly 'System.Web.Http, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The module was expected to contain an assembly manifest.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.BadImageFormatException: Could not load file or assembly 'System.Web.Http, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The module was expected to contain an assembly manifest.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Assembly Load Trace: The following information can be helpful to determine why the assembly 'System.Web.Http, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' could not be loaded.

WRN: Assembly binding logging is turned OFF.
To enable assembly bind failure logging, set the registry value [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) to 1.
Note: There is some performance penalty associated with assembly bind failure logging.
To turn this feature off, remove the registry value [HKLM\Software\Microsoft\Fusion!EnableLog].

Stack Trace: 

[BadImageFormatException: Could not load file or assembly 'System.Web.Http, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The module was expected to contain an assembly manifest.]
   innovationtimes.MvcApplication.Application_Start() +0

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272 
```

这是整个 web.config 文件

```
 <?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0"/>
    <add key="webpages:Enabled" value="false"/>
    <add key="PreserveLoginUrl" value="true"/>
    <add key="ClientValidationEnabled" value="true"/>
    <add key="UnobtrusiveJavaScriptEnabled" value="true"/>
  </appSettings>
  <connectionStrings>
    <!--<add name="DataContext" providerName="System.Data.SqlClient" connectionString="Data Source=pc1\SQLEXPRESS;Initial Catalog=itdb;User Id=sa;Password=12345;"/>-->

  </connectionStrings>
  <system.web>
    <customErrors mode="Off"></customErrors>
    <compilation debug="true" targetFramework="4.0"/>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers"/>
        <add namespace="System.Web.Mvc"/>
        <add namespace="System.Web.Mvc.Ajax"/>
        <add namespace="System.Web.Mvc.Html"/>
        <add namespace="System.Web.Routing"/>
        <add namespace="System.Web.WebPages"/>
      </namespaces>
    </pages>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules runAllManagedModulesForAllRequests="true"/>
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit"/>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit"/>
      <remove name="ExtensionlessUrlHandler-Integrated-4.0"/>
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0"/>
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0"/>
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0"/>
    </handlers>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T10:18:21.290

我终于设法完成了。希望它也能帮助那些有类似问题的人。

罪魁祸首是发布向导。我使用发布工具发布了我的项目。但是，当我上传已发布的项目时，它根本无法正常工作并显示 system.web.http 程序集已损坏。

我是如何解决的-

我从项目的 bin 文件夹中上传了 system.web.http dll，以覆盖发布向导的 dll。

进一步提示我输入其他 dll，我对所有这些 dll 都做了同样的操作。

当我用我的 bin 文件夹中的一个替换所有错误的 dll 后，该应用程序就开始工作了。

我不确定这是否是 Visual Studio 发布向导的错误。如果有人对此问题有更好的了解，请在此处发布以寻求其他人的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T06:10:27.003

我有同样的问题。不知何故，发布向导不喜欢发布模式。在发布模式下，它一直无法部署 system.web.http.dll，然后也无法进行 razor 组装。当我在发布向导设置中更改为调试模式时，它终于起作用了。当然，这并不能使它成为一个解决方案——只是在调试模式下发布的一个令人讨厌的工作。或者，使用 VS 发布向导以外的其他发布方式。

# c# - Autofac 的编译时支持

> ID：13934433
> 
> 赞同：1
> 
> 时间：2012-12-18T13:49:13.037
> 
> 标签：c#, .net, castle-windsor, autofac, strong-typing

我们为我们的项目调查 DI 容器。现在我们在 Autofac 和 Castle Windsor 之间进行选择。有一点对我们来说非常重要：Autofac 的强类型注册。

例子：

```
public interface ITestAutofac
{        
}

public class NotDerivedFrom
{        
} 
```

对于温莎，我可以写这样的东西-

```
var cont = new WindsorContainer();

cont.Register(Component
    .For<ITestAutofac>().ImplementedBy<NotDerivedFrom>()); 
```

它会在编译时失败。Resharper 可以很容易地在这方面提供帮助。

对于 Autofac，我可以这样写 -

```
builder.Register(c => new NotDerivedFrom()).As<ITestAutofac>();

var form = container.Resolve<ICustomForm>(); 
```

它会在运行时失败。

如何通过编译时检查在 Autofac 中注册类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T14:14:16.260

```
builder.Register<NotDerivedFrom>().As<ITestAutofac>() 
```

使用 Autofac，这将在运行时失败，但是当您调用时会发生这种情况，`builder.Build()`当您考虑这一点时，这并不是很糟糕。我同意，它没有编译时支持那么好，但你可以找到一个调用`builder.Build()`. 不要忘记大多数 DI 配置错误无论如何都不会被编译器捕获，您需要您的容器、[可验证的配置](https://simpleinjector.codeplex.com/wikipage?title=How-to#Verifying_Configuration)和一些单元测试来查找所有配置错误。

> 如何通过编译时检查在 Autofac 中注册类型？

如果您愿意，您可以编写一个简单的扩展方法来添加编译时检查：

```
public static void Register<TService, TImplementation>(
    this ContainerBuilder builder)
    // Note the generic type constraints here
    where TImplementation: class, TService
    where TService: class
{
    builder.Register<TImplementation>().As<TService>();
} 
```

这使您可以按如下方式进行原始注册：

```
build.Register<ITestAutofac, NotDerivedFrom>(); 
```

这将在编译时失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-01T09:55:01.547

基于史蒂文的回答，我更新了扩展方法以返回`IRegistrationBuilder`以使人们能够继续使用注册（设置范围等）：

```
public static class ContainerBuilderExtensions
{
  public static IRegistrationBuilder<TImplementation, ConcreteReflectionActivatorData, SingleRegistrationStyle>
    RegisterType<TService, TImplementation>(this ContainerBuilder builder)
    where TImplementation : class, TService
    where TService : class
  {
    return builder.RegisterType<TImplementation>().As<TService>();
  }
} 
```

示例用法：

```
var builder = new ContainerBuilder();
builder.RegisterType<IMyFactory, MyFactory>().SingleInstance();
var container = builder.Build(); 
```

# jpa - JPA 2.0 hobernate 4+ @OneToMany 单向集

> ID：13934436
> 
> 赞同：0
> 
> 时间：2012-12-18T13:49:20.333
> 
> 标签：jpa, insert-update, one-to-many, hibernate-4.x

我阅读了很多关于@OneToMany 的主题和论坛，但不幸的是，这些都无济于事。

例如，我们有这样的实体：

```
@Entity
@Table(name = "MANAGER")
public class Manager{

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "MAN_ID")
    private long id;

    @OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
    @JoinColumn(name = "MAN_ID", updatable=true)     
    private Set<Workers> workers;

    @OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
    @JoinColumn(name = "MAN_ID", updatable=true)   
    private Set<Helpers> helpers;

...
}

@Entity
@Table(name = "WORKERS")
public class Workers{

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "ID")
    private long id;

...
}

@Entity
@Table(name = "HELPERS")
public class Helpers{

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "ID")
    private long id;

...
} 
```

现在我试图保存第一次 Manager 对象（两个集合都不为空）

```
Session session = getSession();
Transaction tx = session.beginTransaction();
session.save(holder);
tx.commit(); 
```

作为回报，我看到 hibernate 如何尝试插入，但没有更新工人和助手。当我从 DB 取回 Manager 时，两个列表都是空的（null）。我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:59:22.063

看起来我错过了可为空的

```
@JoinColumn(name = "MAN_ID", nullable = false) 
```

# mercurial - 推荐的方式来协调多个依赖的 mercurial 存储库的版本？

> ID：13934437
> 
> 赞同：6
> 
> 时间：2012-12-18T13:49:22.297
> 
> 标签：mercurial, versioning, tortoisehg, bitbucket

好吧，经过数小时的阅读和反复试验，它终于击中了我。Mercurial 并不想做 SubRepos……至少不是 TortoiseHg 和 Bitbucket。如果我弄错了，并且您不希望对类似于“当然可以，您没有阅读官方文档”的粗鲁回应投反对票，那么请通过 TortoiseHg 提供一个简单的示例来执行此操作这将成功推送到 Bitbucket。也许是一个利用 mercurial、bitbucket 和 subrepos 的开源项目？

综上所述，如果我们将类库保存在单独的存储库中，并且推荐的方法是不使用子存储库（“作为最后手段”），**那么为所有依赖的 mercurial 存储库捕获版本的推荐方法是什么，我可以快速将所有依赖库跳转到正确的版本以进行错误修复等**。

我怀疑我会使用标签来标记版本。那么，推荐的方法是手动转到所有库并使用通用版本标记标记每个存储库，然后手动恢复到所有程序集的该标记？

请避免使用有关工作流管理复杂性的所有技术术语。在 SO 上有大量关于此的精彩阅读。我希望有一个带有几个 DLL 类库的简单的单个主 exe 项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:58:38.350

感谢@SteveKaye，我有一个可行的解决方案。当使用 TortoiseHg 来“添加子存储库”时，TortoiseHg 正在像这样格式化 .hgsub 文件

```
subrepo = subrepo 
```

而不是像他的例子

```
subrepo = ../subrepo 
```

如果有人想评论为什么需要相对“../”，那就太好了。我的目录结构如下：

```
MainRepo/
         .hgsub
         SubRepo/
         SubRepo2/ 
```

如果“../SubRepo”是相对于 .hgsub 的，../ 不是上一个目录然后查找名为 SubRepo 的文件夹吗？哦，好吧，我可以符合:)或者如果../得到纠正

有史蒂夫的例子​​帮助我了解了什么。

# php - 创建要以 zip 格式下载的数组

> ID：13934438
> 
> 赞同：0
> 
> 时间：2012-12-18T13:49:36.103
> 
> 标签：php, arrays

我正在尝试将图像 url 写入一个数组，该数组将写入一个 zip 并强制下载

当我编写以下数组时

```
$images= array(
    'http://distilleryimage10.s3.amazonaws.com/de532c02488c11e2b62722000a1fbc10_7.jpg',
    'http://distilleryimage10.s3.amazonaws.com/8b9b59e848fb11e2b39e22000a9d0df1_7.jpg'
); 
```

连同此问题底部的大脚本一起，zip 下载正常。

但是当我使用以下

```
foreach ($response['data'] as $data) {
    $images[] = $data['images']['standard_resolution']['url'];
} 
```

zip 下载但有一个弹出窗口说 zip 无效。创建数组的 foreach 只写入 url。

**下载压缩包的代码**

```
# create new zip opbject
$zip = new ZipArchive();

# create a temp file & open it
$tmp_file = tempnam('.','');
$zip->open($tmp_file, ZipArchive::CREATE);

    # loop through each file
    foreach($images as $image){
        # download file
        $download_file = file_get_contents($image);
        #add it to the zip
        $zip->addFromString(basename($image),$download_file);   
    }

    # close zip
    $zip->close();

    # send the file to the browser as a download

    header('Content-disposition: attachment; filename=download.zip');
    header('Content-type: application/zip');
    readfile($tmp_file); 
```

如果有人可以提供帮助，我将不胜感激，因为我对此非常困惑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:39:23.657

数组不是我的事，但我认为：

```
# loop through each file
foreach($images as $key=>$value){
    # download file
    $download_file = file_get_contents($value);
    #add it to the zip
    $zip->addFromString(basename($value),$download_file);   
} 
```

# rest - 文件夹或文件夹集合

> ID：13934449
> 
> 赞同：0
> 
> 时间：2012-12-18T13:50:32.803
> 
> 标签：rest, architecture

让我们想象一下，我们有一个 REST 服务，用于对文件夹结构进行建模......我将如何请求：

1) 特定文件夹

2）另一个文件夹下的文件夹列表

如我所见，我可以创建两个不同的端点：

```
http://../folder?id=folderid (Accept: application/vnd.mycompany.folder+json) 
```

返回一个文件夹

```
http://../folders?parentid=folderid (Accept: application/vnd.mycompany.folder+json) 
```

返回文件夹集合

或者在接受类型上选择：

```
http://../folders?id=folderid (Accept: application/vnd.mycompany.folder+json) 
```

返回一个文件夹。

```
http://../folders?parentid=folderid (Accept: application/vnd.mycompany.folders+json) 
```

返回文件夹的集合。

或者总是只返回一个集合

首选方法是什么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:59:37.883

顶级文件夹列表

```
GET http://../folders/ 
```

文件夹的内容

```
GET http://../folders/folder-a/

GET http://../folders/folder-a/folder-b/ 
```

如果内容是文件夹，它也指向上面的URL，如果内容是文件，它会指向：

```
GET http://../files/folder-a/file-a/ 
```

如果你想添加一个文件，你会使用...

```
PUT http://../files/folder-a/file-b/ 
```

并期望在随后的 GET 中找到该地址的文件。或者，您可以：

```
POST http://../files/folder-a/ 
```

如果您使用的是 POST 模型而不是 PUT 模型，它将返回您发布的文件的 URL。

要删除文件，您将使用...

```
DELETE http://../files/folder-a/file-b/ 
```

如果您想更详细地解释任何内容，请告诉我。

# java - 如何在 Web 应用程序中使用 Spring 自动装配注解

> ID：13934451
> 
> 赞同：2
> 
> 时间：2012-12-18T13:50:34.867
> 
> 标签：java, spring

刚接触Spring，由于项目需要，我冲进去了。在将 Spring 用作 Java 应用程序时，我成功地使用了 Spring 的大部分功能，但在 Web 应用程序中没有得到想要的结果。

我正在尝试在 applicationContext.xml 中初始化我的数据源：

```
<context:annotation-config />
<context:component-scan base-package="learn.spring.webapp.dao" />

<bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="org.postgresql.Driver" />
    <property name="url" value="jdbc:postgresql://localhost:5432/postgres" />
    <property name="username" value="postgres" />
    <property name="password" value="postgres" />
</bean>

<bean id="template" class="org.springframework.jdbc.core.JdbcTemplate"
    autowire="constructor" /> 
```

网页.xml：

```
 <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>WEB-INF/spring/applicationContext.xml</param-value>
  </context-param>

  <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener> 
```

我成功地在我的应用程序中初始化了 Spring，但未能在我的 dao 类中自动装配 jdbctemplate。

```
package learn.spring.webapp.dao;

import learn.spring.webapp.model.Manga;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.stereotype.Component;

@Component
public class MangaDao {
    @Autowired
    private JdbcTemplate jdbcTemplate;

    public void insert(Manga manga){
        String sql = "insert into manga_list values (?,?)";
        jdbcTemplate.update(sql,
                new Object[]{manga.getName(), manga.getAuthor()}); //Null Pointer exception
    }
} 
```

我想在我的 dao 包中自动装配`template`bean 。`JdbcTemplate`当我`NullPointerException`尝试使用`JdbcTemplate`. `MangaDao`正在从 servlet 调用。我想我可能没有正确使用自动装配的注释。请指教。

编辑：

调用 DAO 的 servlet 代码是：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        MangaDao md=new MangaDao();
        Manga manga=new Manga();
        manga.setName("Bleach");
        manga.setAuthor("Kubo Tite");
        md.insert(manga);
    } 
```

而stackTrace如下：

```
SEVERE: Servlet.service() for servlet TesterServlet threw exception
java.lang.NullPointerException
        at learn.spring.webapp.dao.MangaDao.insert(MangaDao.java:16)
        at learn.spring.webapp.controller.TesterServlet.doGet(TesterServlet.java:33)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
        at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T15:01:41.367

我想你的servlet中的代码是这样的：

```
Manga manga = new Manga();
manga.setName(request.getParameter("name"));
manga.setAuthor(request.getParameter("author"));
MangaDao dao = new MangaDao();
dao.insert(manga); // here you get exception; 
```

但是只有当你得到 bean fron 上下文时，自动装配才有效。

```
MangaDao dao = appContext.getBean(MangaDao.class);
dao.insert(manga); // should be ok; 
```

那么在哪里可以获得appContext。您应该从文件中加载它并存储以供将来使用。ContextLoaderListener 为您完成了这项工作的一部分。然后您只需将其存储在静态变量中，例如：

```
@Component
public class AppContext implements ApplicationContextAware {
    private static MangaDao mangaDao = null;
    public static MangaDao getMangaDao() {
        if(mangaDao == null){
            throw new ApplicationContextException("context not initialized");
        }
        return mangaDao;
    }

    @Override
    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {
        mangaDao = applicationContext.getBean(MangaDao.class);
    }
} 
```

确保类`AppContext`进入包中，用 定义`context:component-scan`，它会`learn.spring.webapp.dao`在你的情况下

我强烈建议您使用交易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T14:14:04.103

要回答您更新的帖子：

您必须使用在上下文中创建的 bean，而不是创建新实例。尝试自动装配新组件，然后使用它，而不是在控制器中创建新组件。

```
@Autowired MangaDao mangaDao;
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    Manga manga=new Manga();
    manga.setName("Bleach");
    manga.setAuthor("Kubo Tite");
    mangaDao.insert(manga);
} 
```

在回答您的原始帖子时：

看起来您只是在组件扫描中缺少正确的包名称。您的 @Component 注释类在 learn.spring.webapp.model 包中，您的扫描没有到达它。尝试在注释扫描中使用更通用的包：

```
<context:component-scan base-package="learn.spring.webapp" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-04T05:35:04.817

在我使用“SpringBeanAutowiringSupport”抽象类之前，我得到了相同的“null”异常。您应该像这样使用这个抽象类扩展该类：

```
public class SomeClass extends SpringBeanAutowiringSupport {} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T13:28:25.597

我建议使用`spring-mvc`而不是原始 Servlet。

用`spring-mvc`你定义控制器而不是 Servlet。根据您的代码，Spring 控制器可能如下所示：

```
@Controller 
public class MangaController {

    @Autowired
    private MangaDao dao;

    @RequestMapping(value = "/manga/insert", method = RequestMethod.GET)
    public void doGet() {
        Manga manga = new Manga();
        manga.setName("Bleach");
        manga.setAuthor("Kubo Tite");
        dao.insert(manga);
    }
} 
```

因为控制器由 Spring 管理，所有必需的依赖项都将被注入并准备好供您的代码使用 - 消除`NullPointerException`.

在您的`applicationContext.xml`中，您必须在组件扫描中包含控制器包并启用 mvc 功能：

```
<mvc:annotation-driven /> 
```

我强烈建议阅读[这篇](http://blog.springsource.org/2011/01/04/green-beans-getting-started-with-spring-mvc/)关于`spring-mvc`. 它涵盖了所有必需的步骤以及您需要的 Spring 依赖项。

我还建议您查看[Spring Reference 文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/)，如您所见，它非常全面！

# asp.net-mvc - 使用 MySQL 设置 ASP.NET MVC 3：模型的 db 仍然是 SQL Server Express

> ID：13934452
> 
> 赞同：0
> 
> 时间：2012-12-18T13:50:42.403
> 
> 标签：asp.net-mvc, entity-framework, asp.net-membership, mysql-connector

我在 VS 2010 中创建了一个新项目 MVC 3.0。默认情况下，数据库是 SQL Server Express。

我创建了一个基本模型：

```
public class Movie
{
    public int ID { get; set; }
    public String Movie { get; set; }
}

public class MovieDBContext : DbContext
{
    public DbSet<Movie> Movies { get; set; }
} 
```

现在我已经按照这个[答案用mysql设置了MVC项目](https://stackoverflow.com/a/2518321)

在数据库 (MySQL) 中，自动创建了一些表（my_aspnet_applications、my_aspnet_membership、my_aspnet_profiles、my_aspnet_roles、my_aspnet_schemaversion、my_aspnet_sessioncleanup、my_aspnet_sessions、my_aspnet_users、my_aspnet_usersinroles）。

但是我的表`Movie`没有创建。它仍在 SQL Server Express 中。但我不明白为什么会这样，我`web.config`只有 MySQL 配置：

```
<configuration>
  <connectionStrings>
    <add name="MySqlMembershipConnection"
          connectionString="Data Source=[myserver];
                            userid=[myuser];
                            password=[mypassword];
                            database=Movies;"
          providerName="MySql.Data.MySqlClient"/>
  </connectionStrings>

  <appSettings>
    <add key="webpages:Version" value="1.0.0.0" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>

  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
    </compilation>

    <membership defaultProvider="MySqlMembershipProvider">
      <providers>
        <clear/>
        <add name="MySqlMembershipProvider"
             type="MySql.Web.Security.MySQLMembershipProvider, MySql.Web, 
                 Version=6.6.4.0, Culture=neutral, 
                 PublicKeyToken=c5687fc88969c44d"
             connectionStringName="MySqlMembershipConnection"
             enablePasswordRetrieval="false"
             enablePasswordReset="true"
             requiresQuestionAndAnswer="false"
             requiresUniqueEmail="true"
             passwordFormat="Hashed"
             maxInvalidPasswordAttempts="5"
             minRequiredPasswordLength="6"
             minRequiredNonalphanumericCharacters="0"
             passwordAttemptWindow="10"
             applicationName="/"
             autogenerateschema="true"/>
      </providers>
    </membership>

    <authentication mode="Windows" />

    <authorization>
      <deny users="?" />
    </authorization>

    <profile>
      <providers>
        <clear/>
        <add type="MySql.Web.Security.MySQLProfileProvider, MySql.Web, 
                 Version=6.6.4.0, Culture=neutral, 
                 PublicKeyToken=c5687fc88969c44d"
             name="MySqlProfileProvider"
             applicationName="/"
             connectionStringName="MySqlMembershipConnection"
             autogenerateschema="true"/>
      </providers>
    </profile>

    <roleManager enabled="true" defaultProvider="MySqlRoleProvider">
      <providers>
        <clear />
        <add connectionStringName="MySqlMembershipConnection"
             applicationName="/"
             name="MySqlRoleProvider"
             type="MySql.Web.Security.MySQLRoleProvider, MySql.Web, 
                 Version=6.6.4.0, Culture=neutral, 
                 PublicKeyToken=c5687fc88969c44d"
             autogenerateschema="true"/>
      </providers>
    </roleManager>

    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages"/>
      </namespaces>
    </pages>
  </system.web>

  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:56:30.023

添加一个名为`MovieDB`指向您的 MySql 数据库的连接字符串。或者使用[`DbContext`](http://msdn.microsoft.com/en-us/library/gg679467%28v=vs.103%29.aspx)接受连接字符串名称的构造函数，传递`MySqlMembershipConnection`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:57:29.507

尝试将连接字符串从“MySqlMembershipConnection”重命名为“MovieDB”。确保更新您的所有会员资料以反映新名称。

这个答案中有一些很好的信息：[https ://stackoverflow.com/a/4924678/139694](https://stackoverflow.com/a/4924678/139694)

# c# - XmlReader.create() 第二次后不返回

> ID：13934461
> 
> 赞同：0
> 
> 时间：2012-12-18T13:51:24.187
> 
> 标签：c#, .net, xml, xmlreader

当我调用一个函数并将一个`Stream`对象传递给她以供创建`XmlReader`对象使用时，我遇到了一个奇怪的情况。

这个函数第一次运行良好，但是如果我再次给她打电话，然后在代码中给她相同的流，我得到了一些异常，这是`XmlReader.create()`返回 None 而不是再次获得`XmlReader`对象分配的结果，这是为什么呢？
我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:10:04.883

如果您要读取相同的流两次，则可能需要重置读取之间的位置：

```
streamInstance.Position = 0; 
```

# c++ - C++ 编译器是否识别 2 的幂？

> ID：13934462
> 
> 赞同：3
> 
> 时间：2012-12-18T13:51:27.307
> 
> 标签：c++, assembly, hash

我正在构建一个自定义哈希，我根据公式将字符串中的所有字母相加：

```
string[0] * 65536 + string[1] * 32768 + string[2] * 16384 + ... 
```

我遇到了一个问题，是否应该将这些数字定义为 int 数组中的常量，如下所示：

```
const int MULTIPLICATION[] = {
    65536,
    32768,
    16384,
    8192,
    4096,
    2048,
    1024,
    512,
    256,
    128,
    64,
    32,
    16,
    8,
    4,
    2,
    1
} 
```

或者，也许我应该在计算哈希本身时生成这些数字（同时可能由于它们尚未生成而损失一些速度）？我需要数百万次计算这个哈希值，我希望编译器理解的主要内容是，而不是正常的 MUL 操作

```
MOV EBX, 8
MUL EBX 
```

它会做

```
SHL EAX, 3 
```

编译器是否理解如果我乘以 2 的幂来移位而不是通常的乘法？

另一个问题，我很确定当你用 c++ number *= 2; 编写时它确实会移位。但只是为了澄清，是吗？

* * *

谢谢，我发现了如何在调试器中查看反汇编。是的，如果您像这样使用编译器，编译器确实知道移位

```
number *= 65536 
```

但是，如果你这样做，它会做正常的乘法

```
number1 = 65536
number *= number1; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T13:53:11.103

尝试一下！

你用的是什么编译器？您可以告诉大多数编译器在编译后将中间文件留在原处，或者只编译（而不是汇编），这样您就可以实际查看它生成的汇编代码。

你可以在[我的另一个问题上](https://stackoverflow.com/questions/12135518/is-faster-than/12135533#12135533)看到这正是我所做的。

例如，在 gcc 中，该`-S`标志表示“仅编译”。并`-masm=intel`生成更具可读性的程序集，IMO。

* * *

**编辑**

综上所述，我认为以下是您正在寻找的算法（未经测试）：

```
// Rotate right by n bits
#define ROR(a, n)   ((a >> n) | (a << (sizeof(a)*8-n)))

int custom_hash(const char* str, int len) {
    int hash = 0;
    int mult = 0x10000;  // 65536, but more obvious

    for (int i=0; i<len; i++) {
        hash += str[i] * mult;
        mult = ROR(mult, 1);    
    }

    return mult;
} 
```

首先，你没有指定当你有超过 16 个字符时会发生什么（乘数是多少？）所以在这个实现中，我使用了按位旋转。x86 具有[按位旋转指令](http://en.wikibooks.org/wiki/X86_Assembly/Shift_and_Rotate#Rotate_Instructions)（`ror`分别`rol`用于向右和向左旋转）。但是，C 没有提供表达旋转操作的方法。所以我定义了`ROR`为你旋转的宏。（理解它的工作原理留给读者作为练习！）

在我的循环中，我像您一样在 0x10000 (65536) 处开始乘法器。循环的每次迭代，我将乘数向右旋转一位。这实际上将它除以 2，直到达到 1，然后它变为 0x80000000。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T13:54:58.833

答案取决于您的编译器、硬件架构以及可能的其他因素。

用移位代替这种乘法是最好的做法，这甚至不是先验的。我认为通常应该让编译器进行指令级优化。

也就是说，让我们看看我的编译器做了什么:)

```
int i, j;

int main() {
  j = i * 8;
} 
```

使用`gcc 4.7.2`with编译的`-O3`结果是

```
_main:
LFB0:
        movq    _i@GOTPCREL(%rip), %rax
        movl    (%rax), %edx
        movq    _j@GOTPCREL(%rip), %rax
        sall    $3, %edx                  ;<<<<<<<<<< THE SHIFT INSTRUCTION
        movl    %edx, (%rax)
        ret 
```

所以，在我的环境中，答案显然是“是”。

至于你的另一个问题，不要预先计算`MULTIPLICATION`。为了得到系数

```
string[0] * 65536 + string[1] * 32768 + string[2] * 16384 + ... 
```

只需从`coeff = 65536`每次迭代开始并将其向右移动一位：

```
coeff >>= 1; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T14:12:07.240

为什么不直接使用 C++ 中内置的移位运算符？

```
(string[0] << 16) + (string[1] << 15) + (string[2] << 14) + ... 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-18T14:12:25.270

您可以使用**模板元编程**，它确保在编译时计算 2 的幂，而与编译器无关：

```
template<unsigned int SHIFT>
struct PowerOf2
{
  static const size_t value = 1 << SHIFT;
}; 
```

为方便使用宏如下：

```
#define CONSTRUCT(I) (string[I] * PowerOf2<16 - I>::value) 
```

现在使用，

```
CONSTRUCT(0) 
```

相当于：

```
string[0] * 65536 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-18T14:20:06.337

您可以通过不断地乘以 2 来累积它。

```
int doubleRunningTotalAndAdd(int runningTotal, unsigned char c)
{
    runningTotal *= 2;
    runningTotal += c;
    return runningTotal;
}

string s = "hello";

int total = accumulate(s.rbegin(), s.rend(), 0, doubleRunningTotalAndAdd); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T14:03:24.920

没有规则；编译器将生成将给出正确结果的代码。*当*这是最快的解决方案时，我知道的所有编译器*都会*使用移位和加减的组合。我曾在整数乘法比移位快的系统上工作过。我还在一个系统上工作，其中编译器生成的代码比 for更好，尽管机器没有硬件乘法。*`h * 127``(h << 7) - h`*

 *如果您希望将数字作为 const 数组的初始值设定项，那么显而易见的答案是使用其他程序生成它们，然后插入生成的文本。*

# java - 如何在 Maven 插件中获取任意属性的值？

> ID：13934464
> 
> 赞同：0
> 
> 时间：2012-12-18T13:51:29.760
> 
> 标签：java, maven, maven-3

我想从我的插件中获取 Maven 项目属性的值。我在运行时（而不是在编译时）获得的属性的名称，它没有在 中定义`<properties>`，因此不能使用 Plexus 注入。否则我该怎么做？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-20T23:43:08.650

在您的插件中，如果您有一个带有以下注释的字段：

```
@Parameter( property="my.cli.property", defaultValue="${project.name}" )
private String commandLineParam; 
```

这将`<name/>`默认填充项目，但允许人们从命令行使用`-Dmy.cli.property=value`. 如果您不想允许从命令行覆盖，您可以省略`property`此`@Parameter`注释的参数。如果您没有要使用的默认值，而是希望用户每次都从命令行提供自己的值，则可以不使用该`defaultValue`参数。如果需要某个值，您可以将`required`参数设置为`true`。

有关更多信息，请参阅：[Maven 插件注释](http://maven.apache.org/plugin-tools/maven-plugin-tools-annotations/index.html)。

有关此操作的示例，请参阅：[安装文件 mojo 中的参数声明](https://github.com/apache/maven-plugins/blob/trunk/maven-install-plugin/src/main/java/org/apache/maven/plugin/install/InstallFileMojo.java#L68%20Install-File%20Mojo%20Parameters)

# java - 无法使用 AbstractExcelView 导出 Excel 工作表

> ID：13934465
> 
> 赞同：3
> 
> 时间：2012-12-18T13:51:30.717
> 
> 标签：java, spring, spring-mvc

这是我的 ExcelController.java

```
public ModelAndView generateExcel(HttpServletRequest request,
        HttpServletResponse response) {

    // Created List called 'employeeList'
    model.put("employeeList", employeeList);

    return new ModelAndView("CreateExcel","employeeList",employeeList);
} 
```

这是我的 ExcelRevenueReportView.java

```
protected void buildExcelDocument(Map<String, Object> model,
        HSSFWorkbook workBook, HttpServletRequest request, HttpServletResponse response)
        throws Exception {
    @SuppressWarnings("unchecked")
    List<Employee> employeeList = (List<Employee>) model.get("employeeList");
    HSSFSheet sheet = workBook.createSheet("Employee List");

    HSSFRow header = sheet.createRow(0);
    header.createCell((short) 0).setCellValue("Employee");

    int rowNum = 1;
    for (Object employee : employeeList) {
        //create the row data
        HSSFRow row = sheet.createRow(rowNum++);
        System.out.println(row);
        row.createCell((short) 0).setCellValue(1);
            }
} 
```

我的 servlet.xml

```
<bean id="multipartResolver"
    class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
</bean>
<bean
    class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping" />

<bean class="com.sort.process.ExcelController" />

<bean class="org.springframework.web.servlet.view.XmlViewResolver">
    <property name="location">
        <value>/WEB-INF/spring-excel-views.xml</value>
    </property>
</bean> 
```

我的 spring-excel-views.xml

```
<context:component-scan base-package="com.sort.process" />
<context:property-placeholder location="conf/log4j.properties" />

<bean id="ExcelRevenueSummary"
    class="com.sort.process.ExcelRevenueReportView">
</bean> 
```

我跟着[这个教程](http://www.mkyong.com/spring-mvc/spring-mvc-export-data-to-excel-file-via-abstractexcelview/)。

在上面的项目中，我知道我没有调用`buildExcelDocument()`，这可能是没有生成 excel 表的原因，我不确定是否应该在某个地方调用它。
最终，我无法通过这种方式生成 excel 表。
任何人都可以找出错误吗？
或任何其他可能的建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T11:31:01.277

我建议您对基于注释的控制器配置使用更轻量级的方法。在这种情况下，只需在您的控制器中放置以下代码：

```
@RequestMapping("list/excell")
public View listExcell() {
    return new AbstractExcelView() {
        @Override
        protected void buildExcelDocument(Map<String, Object> model, HSSFWorkbook workbook,
                HttpServletRequest request, HttpServletResponse response) throws Exception {
            HSSFSheet sheet = workbook.createSheet("List of employees");

            setText(getCell(sheet, 0, 0), "Id");
            setText(getCell(sheet, 0, 1), "First name");
            setText(getCell(sheet, 0, 2), "Last name");
            setText(getCell(sheet, 0, 3), "Active");
            setText(getCell(sheet, 0, 4), "Salary");

            List<Employee> employees = dao.listEmployees();
            for (int i = 0; i < employees.size(); i++) {
                Employee employee = employees.get(i);
                setText(getCell(sheet, i + 1, 0), String.valueOf(employee.getId()));
                setText(getCell(sheet, i + 1, 1), employee.getFirstName());
                setText(getCell(sheet, i + 1, 2), employee.getLastName());
                setText(getCell(sheet, i + 1, 3), String.valueOf(employee.isActive()));
                setText(getCell(sheet, i + 1, 4), String.valueOf(employee.getSalary()));
            }
        }
    };
} 
```

您代码中的问题是，在您的控制器中，您使用名为“CreateExcel”的视图，但在您的配置中，您将视图命名为“ExcelRevenueSummary”。

如果您需要一个完整的工作示例 - 您可以在[此处](https://github.com/isopov/haf/blob/master/src/main/java/com/sopovs/moradanen/haf/controller/employee/EmployeeController.java)找到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-14T09:42:56.260

这是工作示例[Excel Export Spring MVC](http://www.codejava.net/frameworks/spring/spring-mvc-with-excel-view-example-apache-poi-and-jexcelapi)。如果您特定于扩展，那么您可以在代码中添加以下行。

```
response.setContentType("application/vnd.ms-excel");
response.setHeader("Content-disposition", "attachment; filename=BusinessSegment.xls"); 
```

现在这将在 Excel 中导出您的数据，扩展名为 .xls。

# c++ - 相当于 gprof/callgrind 的分析库

> ID：13934467
> 
> 赞同：3
> 
> 时间：2012-12-18T13:51:34.533
> 
> 标签：c++, c, profiling, gprof, callgrind

我正在寻找具有分析功能的 C/C++ 库，例如`gprof`、 或`callgrind`.

更准确地说，我希望它的输出与`callgrind`发布的内容相同，以便将其传递给第三方工具，例如 KCacheGrind。

我们的想法是能够基于这个库设计一个方面，并将其插入我们团队正在开发的几个应用程序中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:31:52.487

[gperftools](https://code.google.com/p/gperftools/)的[CPU 分析器](http://gperftools.googlecode.com/svn/trunk/doc/cpuprofile.html)可以使用任一或典型的动态链接附加到任意可执行文件。它可以以 callgrind 兼容的格式输出数据。`LD_PRELOAD`

假设您想要分析一个可执行文件`a.out`。首先将其与`-lprofiler`. 然后用`CPUPROFILE`env 运行它。指向将存储分析数据的文件名的变量。callgrind 格式的数据可以使用`pprof`.

```
CPUPROFILE=a.out.prof ./a.out
pprof --callgrind a.out a.out.prof 
```

有趣的是，`CPUPROFILE`未定义的可执行文件表现正常。因此，无需重新编译或重新链接应用程序即可轻松启用此分析器。

如果由于任何原因您无法更改可执行文件的链接方式，您仍然可以通过`LD_PRELOAD`以下方式定义来分析它。

```
LD_PRELOAD=/path/to/libprofiler.so CPUPROFILE=a.out.prof ./a.out 
```

# javascript - 如何通过javascript在div内显示视频（在外部播放器中）？

> ID：13934471
> 
> 赞同：1
> 
> 时间：2012-12-18T13:51:41.150
> 
> 标签：javascript

我正在使用外部播放器来显示视频。但是当我将它附加到一个 div 中时，它只显示 [object Object] 我已经通过这个函数在 javascript 中提取了视频：

```
<script type="text/javascript">function loadArchiveInPlayer(vdo) {
var s12 = new SWFObject('http://jetpitch.com/hdflvplayer/hdplayer.swf','player','513','285','9');
    s12.addParam('allowfullscreen','true');
    s12.addParam('allowscriptaccess','always');
    s12.addParam('wmode','transparent');
    s12.addVariable('file',vdo);    enter code here
    s12.addVariable('Preview','<?php echo SITEROOT; ?>/images/video-load-img.jpg');
    s12.write('mediaspace');

    //document.getElementById("newimg1").appendChild(s12);

    return s12;
} </script> 
```

返回视频后，显示如下：

```
<script type="text/javascript"> var s22 = loadArchiveInPlayer(vdo);
document.getElementById('newimg1').innerHTML = s22; </script> 
```

但是 div "newimg1" dosent 显示视频。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:17:22.293

线

```
s12.write('mediaspace'); 
```

将 Flash 播放器嵌入到您的网站 DOM 中。它将 flash 对象添加到带有`id="mediaspace"`. 只需确保您的文档中有一个具有此类 ID 的 div。

# sql-server - SQL Server 中的默认锁定粒度是多少？

> ID：13934472
> 
> 赞同：6
> 
> 时间：2012-12-18T13:51:51.047
> 
> 标签：sql-server, sql-server-2008, locking, granularity, database-locking

我已经彻底阅读[了有关表提示的 MSDN](http://msdn.microsoft.com/en-us/library/ms187373.aspx)，但我似乎没有找到默认的锁定粒度。假设我有以下查询：

```
SELECT TOP (1) * FROM MyTable WITH (UPDLOCK, READPAST) ORDER BY SomeColumn ASC; 
```

你看，我指定了`UPDLOCK`和`READPAST`提示，但没有指定任何粒度提示，例如`TABLOCK`or `ROWLOCK`。

默认使用哪个粒度锁定级别？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-18T14:09:43.510

没有“默认”。粒度（行、页、（分区 | 对象））是根据对象的允许选项（allow_page_locks/allow_row_locks）、有关操作意图的信息（探测、扫描、插入）、行集的估计大小和其他因素的数量（隔离级别，文件组是否只读等）。在大多数情况下，您将获得单例操作的行级粒度和扫描的页级粒度。您发布的查询可能会以页面级粒度进行，因为是扫描。

# vba - MS Access VBA 对象需要错误

> ID：13934473
> 
> 赞同：5
> 
> 时间：2012-12-18T13:51:51.853
> 
> 标签：vba, ms-access

```
Dim maker as String
Set Maker = Forms![A]![B] 
```

我似乎无法让它工作。每次运行时，它都会给我一个“需要对象”错误。这包含在一个更大的模块中，但这是它唯一给我带来问题的方面。

基本上，我希望“maker”等同于表单 A 上名为 B 的文本框的内容。

有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T13:53:43.333

除非您正在分配对象，否则不要使用 Set：

```
Dim maker as String
Maker = Forms![A]![B] 
```

对于一个对象：

```
Dim maker as Form
Set Maker = Forms![A] 
```

# iphone - 在 UIWebView 中获取当前 url

> ID：13934475
> 
> 赞同：2
> 
> 时间：2012-12-18T13:51:55.430
> 
> 标签：iphone, ios, uiwebview

当我单击调用此方法的链接时，我正在使用`UIWebView`并加载`NSURL` 该页面中有 4 个链接。这很好

```
-(BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType 
{ 
} 
```

移至下一页后，我`UINavigationBar`显示了`back button`

```
 -(void)backButtonClicked
{
if ( myWebView.loading) 
{
    [myWebView goBack];
       } 
} 
```

这将我带回主页，但如果我再次单击相同的链接，则不会调用委托方法。这是为什么？每次单击链接时，我都需要获取当前网址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:45:09.193

你可以试试这个：

```
NSString *currentURL = [webView stringByEvaluatingJavaScriptFromString:@"window.location"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T12:54:07.270

在委托中尝试这个...

```
- (void)webViewDidFinishLoad:(UIWebView *)webView 
{
    NSLog(@"Webview url: %@",webView.request.URL.absoluteString);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:19:41.083

您必须将所有打开的 URL 存储在一个数组中，并在返回按钮时检查点击的链接是否与最后一个对象的数组中存储的链接相同，然后重新加载 Web 视图。

# java - 如何在服务器java上存储多个文件

> ID：13934476
> 
> 赞同：0
> 
> 时间：2012-12-18T13:51:56.980
> 
> 标签：java, sockets, client-server

我正在使用客户端服务器应用程序`java`我`sockets` 已经实现了基本的客户端和服务器，客户端可以将图片发送到服务器并且服务器存储它们但我不知道如何存储多个文件。目前我使用以下代码存储从客户端收到的文件

```
while(true)
    {
        Socket connectionSocket = serverSocket.accept();
        try (DataInputStream receivedFromClient = new DataInputStream(connectionSocket.getInputStream());
                FileOutputStream saveToServer = new FileOutputStream("files/file.jpg"))
        {    
            int i;
            while ((i = receivedFromClient.read()) > -1)
            {
                saveToServer.write(i);
            }
        }
    } 
```

这就是我保存一个文件的方式，并且该文件会被服务器接收到的任何新文件覆盖。我想存储客户端发送的多个文件，我该怎么做？另外，我将如何设置收到的文件的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:55:48.283

将文件名参数添加到此代码块所在的方法，以允许您传递文件名。或者如果合适的话，使用静态计数器自动增加文件名。

问题是您每次都使用相同的文件名，因为它在这里是硬编码的：

```
FileOutputStream saveToServer = new FileOutputStream("files/file.jpg")) 
```

相反，您传递给 FileOutputStream 的字符串应该是可变的，例如。

```
FileOutputStream saveToServer = new FileOutputStream(yourStringVariable)) 
```

# iphone - 我可以自定义 UIDatePicker 吗？

> ID：13934477
> 
> 赞同：0
> 
> 时间：2012-12-18T13:52:01.193
> 
> 标签：iphone, ios, ipad, uidatepicker

> **可能重复：**
> [如何自定义 UIDatePicker](https://stackoverflow.com/questions/3022218/how-to-customize-the-uidatepicker)

我需要自定义 UIDatePicker，因为我们确实支持各种日期格式，如
`dd-MM-yyyy`, `dd-MM-yyyy HH:mm:ss`, `dd-MM`.

例如，在“日期和时间”选择器模式下，选择器中没有年份部分的滚轮。因此，提供的选择器模式是不够的。

有没有办法为所需的格式自定义日期选择器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:01:44.090

绝对地！[根据UIDatePicker 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDatePicker_Class/Reference/UIDatePicker.html)，您不能这样做，`UIDatePicker`因为它只支持 4 种日期格式；但是您可以使用.`UIPickerView`

您将需要实现`UIPickerViewDelegate`方法并为它们提供数据源，就像使用`UITableView`:

```
- (NSInteger)numberOfComponentsInPickerView: (UIPickerView*)thePickerView {
   return /* # of columns you need */;
}

- (NSInteger)pickerView:(UIPickerView *)thePickerView numberOfRowsInComponent:(NSInteger)component
{
   return /* # of rows per component */;
}

- (NSString *)pickerView:(UIPickerView *)thePickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
   return /* date source/string/title for the row */;
} 
```

参考：[这里](http://divya-ioscoder.blogspot.com.au/2012/04/uipicker-iphone-sdk-populated-with-year.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T13:58:11.003

A支持[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDatePicker_Class/Reference/UIDatePicker.html)中详述`UIDatePicker`的四个常量。您不能提供自定义日期格式。但是，根据您的应用程序和要求，您可以只使用标准选择器视图：我已经这样做了，我只需要显示月份列表。`datePickerMode`

# emacs - 禁用与 ELPA 存储库的连接

> ID：13934482
> 
> 赞同：0
> 
> 时间：2012-12-18T13:52:07.980
> 
> 标签：emacs, elpa

是否可以在启动时禁用与 ELPA 存储库的连接？

我有

```
(when (>= emacs-major-version 24)
  (require 'package)
  (package-initialize)
  (add-to-list 'package-archives '("marmalade" . "http://marmalade-repo.org/packages/") t)) 
```

在我的 init.el 中，每次我启动 emacs 时，它都会连接到存储库。我宁愿不时手动执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-08T07:07:19.977

使用`package-spec.el`包使连接发生。

# spring-security - 如何使用 Spring Security 将用户重定向回我的 SSO 服务？

> ID：13934488
> 
> 赞同：0
> 
> 时间：2012-12-18T13:52:21.387
> 
> 标签：spring-security, single-sign-on

我的应用程序旨在使用 SSO 服务进行身份验证。该场景类似于 Spring 文档中的 Siteminder 场景。用户来自已通过身份验证的 SSO。

但是，如果用户访问应用程序并且尚未通过身份验证，我想将用户重定向到 SSO 登录表单。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:58:09.530

使用自定义过滤器也是我过去完成此操作的方式。要添加的一件事是，如果用户未通过身份验证，表单登录可以已经重定向到您的 sso 页面。

```
<http use-expressions="true">
    <intercept-url pattern="/**" access="isFullyAuthenticated()"/>
    <form-login login-page="${ssoPage}" authentication-failure-url="${ssoPage}"/>
    <custom-filter ref="jeePreAuthenticatedFilter"  position="PRE_AUTH_FILTER"/>
    <logout invalidate-session="true" logout-success-url="/logout.jsp" delete-cookies="MYSubject"/>
</http>

<!-- J2EE pre-authentication -->
<beans:bean id="jeePreAuthenticatedFilter" class="com.example.MyCustomFilter">
    <beans:property name="authenticationManager" ref="authenticationManager" />
</beans:bean>

<beans:bean id="authenticationProvider" class="org.springframework.security.web.authentication.preauth.PreAuthenticatedAuthenticationProvider">
    <beans:property name="preAuthenticatedUserDetailsService"  ref="preAuthenticatedUserDetailsService"/>
</beans:bean>
<beans:bean id="preAuthenticatedUserDetailsService" class="com.example.MyCustomUserDetailsService">

</beans:bean>
<authentication-manager alias="authenticationManager">
    <authentication-provider ref="authenticationProvider" />
</authentication-manager> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:29:37.343

```
class Http403Redirect extends Http403ForbiddenEntryPoint {

    Logger log = LoggerFactory.getLogger(Http403Redirect.class)

    @Override
    public void commence(HttpServletRequest arg0, HttpServletResponse arg1, AuthenticationException arg2) 
        throws IOException ,ServletException {
        arg1.setStatus(403)
        arg1.sendRedirect("http://www.google.com/")
    }
} 
```

在我的 servlet 安全 xml 配置中：

```
<beans:bean id="http403EntryPoint" class="com.opentext.infofusion.security.otds.Http403Redirect" />

<http use-expressions="true" auto-config="false" entry-point-ref="http403EntryPoint">
    <intercept-url pattern="/**" access="hasRole('user')" />
    <custom-filter ref="otdsFilter" position="PRE_AUTH_FILTER"/>
</http> 
```

这似乎可以解决问题。

# java - 将 Java 连接到 PhpMyAdmin 演示服务器？

> ID：13934489
> 
> 赞同：-1
> 
> 时间：2012-12-18T13:52:33.533
> 
> 标签：java, jdbc, phpmyadmin

如何使用 Jdbc Sql Driver 连接 Java 以连接到 DEMO SERVER PHPMYADMIN (MYSQL) SERVER

[http://demo.phpmyadmin.net/](http://demo.phpmyadmin.net/) 77.78.110.71

我可以连接到我的本地 phpmyadmin 服务器，但不能通过 Internet。我也有一个 bluehost phpmyadmin 服务器，但它也给出了同样的错误

问题是我如何制作网址

```
 String dbUrl = "jdbc:mysql://127.0.0.1:3306/iftekhar"; 
```

//这有效

```
 String dbUrl = "jdbc:mysql://77.78.110.71:3306/Iftekhar"; 
```

//这不是..是的，我先在那里做了一个 Db(Iftekhar)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:00:09.273

只是几件事：

1.  您是否尝试过查看是否可以在 3306 端口上连接到 77.78.110.71？可能你只是有网络问题。
2.  第二种情况下的数据库名称是大写的，对吗？
3.  如果 77.78.110.71 是运行 pypmyadmin 的服务器，这并不意味着 mysql 服务器运行在同一台服务器上。

# java - 在某些情况下，直接访问 String 的后备数组是否合理？

> ID：13934494
> 
> 赞同：4
> 
> 时间：2012-12-18T13:52:50.743
> 
> 标签：java, arrays, string, reflection

我正在优化文本处理软件，其中经常使用以下类：

```
class Sentence {

  private final char[] textArray;
  private final String textString; 

  public Sentence(String text) {
     this.textArray = text.toCharArray();
     this.textString = text;
  }

  public String getString() {
     return textString;
  }

  public char[] getArray() {
     return textArray;
  } 
} 
```

如您所见，存在一些冗余：textString 的支持数组始终等于 textArray，但两者都被存储。

我希望通过摆脱 textArray 字段来减少此类的内存​​占用。

有一个问题：这个类在代码库中被广泛使用，因此我无法摆脱 getArray() 方法。我的解决方案是去掉 textArray 字段，让 getArray() 方法通过反射返回 textSting 的支持数组。

结果将是这样的：

```
class Sentence {

  private final String textString; 

  public Sentence(String text) {
       this.textString = text;
  }

  public String getString() {
     return textString;
  }

  public char[] getArray() {
     return getBackingArrayUsingReflection(textString);
  } 
} 
```

这似乎是一个可行的解决方案，但我怀疑 String 的后备数组是私有的是有原因的。这种方法有哪些潜在问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T13:54:39.747

将会发生的一件事是，您正在致力于 JDK 的一种特定实现。例如，Java 7 Update 6 完全修改了对`char[]`. 这就是为什么只有当你的代码是非常短暂的，基本上是一次性的代码时才应该容忍这种方法。

如果您只是阅读`char[]`，并且正在为 OpenJDK Java 7 Update 6 编写代码，则不会引入任何错误。

另一方面，全世界 95% 的 Java 程序员可能会对反映`String`内部结构的代码摇头表示怀疑，所以要小心 :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T13:57:18.057

根据`java.lang.String`（Java 7 Update 5 和更早版本）的版本，它使用一个后备数组，以及该`count`数组中实际字符串的开始索引和长度 ( )。在 Java 的这些实现中，后备数组可以（基本上）比实际字符串长，并且字符串不一定从数组的开头开始。

例如，当您使用 时`substring`，后备数组可能与原始字符串的后备数组相同，只是开始索引和字符数不同。因此，使用反射返回的后备数组`String`并非在所有情况下都有效（或者：它会导致不正确/意外的行为）。

参见例如[http://www.docjar.com/html/api/java/lang/String.java.html](http://www.docjar.com/html/api/java/lang/String.java.html) `String substring(int beginIndex, int endIndex)`第 1950 行（及以下），它调用第`String(int offset, int count, char value[])`645 行（及以下）的构造函数。这里的`char[]`直接用作后备数组，offset和count分别用作数组的偏移量和字符串的长度：

```
public String substring(int beginIndex, int endIndex) {
    if (beginIndex < 0) {
        throw new StringIndexOutOfBoundsException(beginIndex);
    }
    if (endIndex > count) {
        throw new StringIndexOutOfBoundsException(endIndex);
    }
    if (beginIndex > endIndex) {
        throw new StringIndexOutOfBoundsException(endIndex - beginIndex);
    }
    return ((beginIndex == 0) && (endIndex == count)) ? this :
        new String(offset + beginIndex, endIndex - beginIndex, value);
}

// Package private constructor which shares value array for speed.
String(int offset, int count, char value[]) {
    this.value = value;
    this.offset = offset;
    this.count = count;
} 
```

正如 Marko Topolnik 所指出的[，Java 7 的更新版本](http://mail.openjdk.java.net/pipermail/core-libs-dev/2012-May/010257.html)不再是这种情况。您不应该依赖 Java 的实现细节（特别是因为它可以在版本之间发生重大变化 - 如所示）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T14:08:53.820

为了娱乐和游戏，请运行以下单元测试：

```
public class StringTest {
    private String text;

    public StringTest() {
        super();
    }

    public char[] getBackingArray() {
        if (text == null) {
            return null;
        }

        try {
            final Field valueField = text.getClass().getDeclaredField("value");
            valueField.setAccessible(true);
            final char[] data = (char[]) valueField.get(text);
            return data;
        } catch (final Exception e) {
            e.printStackTrace();
        }

        return null;
    }

    public String getText() {
        return text;
    }

    public void setText(String text) {
        this.text = text;
    }

    @Test
    public void testStringFunManipulation() {
        final StringTest test = new StringTest();
        test.setText("Hello World");
        Assert.assertNotNull(test);
        System.out.println("Original String: " + test);
        System.out
                .println("Original String Hash: " + test.getText().hashCode());

        char[] data = test.getBackingArray();
        Assert.assertNotNull(data);
        System.out.println("Backing Array: " + data);

        data[0] = 'J';
        System.out.println("Modified String: " + test);
        System.out
                .println("Modified String Hash: " + test.getText().hashCode());
        System.out.println("Modified String Hash Should be: "
                + "Jello World".hashCode());
    }

    @Override
    public String toString() {
        return text != null ? text.toString() : "";
    }
} 
```

它应该给你一个答案，为什么公开类的内部私有值***可能***是一个坏主意。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T13:59:51.127

如果您希望它更快，请使用`String.charAt(i)`它将被内联并避免任何与更改 inetrnals 相关的问题。如果您想避免从 StringBuilder 创建 String，您可以使用 CharSequence，因为它们都支持此接口。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T13:58:02.457

`getArray`您可以按如下方式更改实现：

```
public char[] getArray() 
{
    return this.textString.toCharArray();
} 
```

# jquery - 使用 jQuery 查找选中的复选框

> ID：13934501
> 
> 赞同：0
> 
> 时间：2012-12-18T13:53:16.660
> 
> 标签：jquery

我有这个结构：

```
<div id="fields" class="grid">
    <div>...<div>
    <div id="some_id_1" class="itemSortable">
        <input ...>
        <input ...>
        <div>
            <input id="selected" name="selected" type="checkbox" value="true">
            <input name="selected" type="hidden" value="false">
            ...
        </div>
    <div id="some_id_2" class="itemSortable">
        <input ...>
        <input ...>
        <div>
            <input id="selected" name="selected" type="checkbox" value="true">
            <input name="selected" type="hidden" value="false">
            ...
        </div>
     ...
    <div id="some_id_n" class="itemSortable">
        <input ...>
        <input ...>
        <div>
            <input id="selected" name="selected" type="checkbox" value="true">
            <input name="selected" type="hidden" value="false">
            ...
        </div>
</div> 
```

我没有使用 jQuery 的经验，所以我被卡住了。`some_id_x`有人可以帮助使用 jQuery 脚本来获取选定复选框的所有 id 数组（例如）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:56:09.417

要获取所选复选框`id`的最近父级的 s 数组，请尝试以下操作：`.itemSortable`

```
var idArray = $('#fields').find(':checked').map(function() {
    return $(this).closest('.itemSortable').prop('id');
}).get(); 
```

您似乎有很多重复的`id`属性，但这意味着您的 HTML 无效并且会导致代码出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:00:07.220

首先你自己得到复选框：

```
$(':input:checked'); 
```

然后你找到他们各自的父母：

```
$(':input:checked').parents('.itemSortable'); 
```

要获取每个 id，请使用`.each()`迭代结果列表：

```
var ids = [];
$(':input:checked').parents('.itemSortable').each(function() {
    ids.push(this.id);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T13:55:20.587

css id 仅适用于页面上的 1 个元素，请使用类。

`$('.someClass:checked').serialize()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T13:56:23.713

使用**:checked 选择器**

[http://api.jquery.com/selected-selector/](http://api.jquery.com/selected-selector/)上的详细信息

例子：

```
$(function()
{
    var idArray = new Array(); $('#fields').find(':checked').each(function() 
   {
       idArray.push(this.id);
   });

   console.log(idArray);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T14:19:18.277

为了检索类型检查（复选框）的检查输入，请使用`":checked"`选择器。这个例子可以解释我的观点：

html:

```
<div id="fields" class="grid">
        <div id="some_id_1" class="itemSortable">
            <div>
                <input id="selected" name="selected" type="checkbox" value="true" checked="checked"/>
            </div>
        </div>
        <div id="some_id_2" class="itemSortable">
            <div>
                <input id="selected" name="selected" type="checkbox" value="true" checked="checked"/>
            </div>
         </div>
        <div id="some_id_n" class="itemSortable">
            <div>
                <input id="selected" name="selected" type="checkbox" value="true"/>
            </div>
        </div>
    </div> 
```

javascript/jQuery:

```
$(document).ready(function () {
            alert($("#fields :checked").length);
        }); 
```

这个例子将提醒第二个；id 元素中选中复选框的计数`"fields"`。

PS：

*   我希望这是你所要求的。
*   要检查类型复选框的输入，请使用该属性`checked="checked"`

# java - jsf- 带有输入参数的验证器

> ID：13934503
> 
> 赞同：2
> 
> 时间：2012-12-18T13:53:17.590
> 
> 标签：java, jsf, jsf-2

这是我的 .xhtml 页面的一部分：

```
<h:inputText id="kartNumIn"  value="#{controller.mitarbeiter.kartenNummer}">
                <f:attribute name="foo" value="controller.mitarbeiter.id" />
                <f:validator validatorId="kartVal" binding="#{kartVal}" disabled="#{!controller.noUpdate}"/>
            </h:inputText> 
```

这是我的验证方法（）：

```
@Override
    public void validate(FacesContext context, UIComponent component, Object value) throws ValidatorException {

        int id=(Integer) component.getAttributes().get("foo"); //always 0
        int temp = (Integer) value;

        if (!(value instanceof Integer)) {
            throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR, "Eingabefehler", "FEHLER:Bitte geben Sie eine Zahl ein!"));
        }

       System.out.print("Input"+value+"Aktuelle"+component.getAttributes().get("foo").toString());

        if (getAlleKartennummern().contains(temp) && temp!=id) {
            throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR, "Kartennummerfehler", "FEHLER:Kartennumer bereits vergeben!"));
        }
    } 
```

对于我的验证器，我需要第二个值。在这里我需要`mitarbeiter.id`！因为`component.getAttributes().get("foo")`我总是为空....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-26T10:29:34.780

我认为 OP 不再对这个问题感兴趣，但如果其他人发现这个问题：

```
int id=(Integer) component.getAttributes().get("foo"); 
```

当你得到一个字符串时不会工作。有点奇怪，你写的是你总是为空。你应该得到一个：

```
java.lang.String cannot be cast to java.lang.Integer 
```

如果是这种情况，请尝试：

```
int id = Integer.parseInt((String) component.getAttributes().get("foo")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T14:01:02.090

在属性中你需要设置表达式的值

```
<f:attribute name="foo" value="controller.mitarbeiter.id" /> 
```

它应该是

```
<f:attribute name="foo" value="#{controller.mitarbeiter.id}" /> 
```

# linker - 链接选项被忽略

> ID：13934507
> 
> 赞同：1
> 
> 时间：2012-12-18T13:53:33.133
> 
> 标签：linker, visual-studio-2012

为什么 vs2012 中的命令行版本的链接器会声称？

```
 [lib] LINK : warning LNK4044: unrecognized option '/OPT:REF'; ignored
  [lib] LINK : warning LNK4044: unrecognized option '/OPT:ICF'; ignored 
```

它们似乎没有被弃用？链接选项是否必须遵循任何新顺序？

# python - 使用 pygtk 寻找子部件

> ID：13934508
> 
> 赞同：0
> 
> 时间：2012-12-18T13:53:40.793
> 
> 标签：python, pygtk

让我们解释一下环境。

我正在使用 pygtk 构建一个 GUI。在我的代码的某个时刻，我创建了一个 gtk.ScrolledWindow 并为其设置了一个名称（此处为代码）：

```
top_swin = gtk.ScrolledWindow()
top_swin.set_name('script-desc-swin') 
```

稍后在代码的其他部分，我需要寻找这个小部件，所以我尝试了这个：

```
self.gui.get_object('script-desc-swin') 
```

self.gui 是一个 gtk.Builder 对象，它是从使用 Glade 创建的 XML 文件构建的。此行返回无，所以我认为可能是 get_object() 只能用于查找在 GLADE 文件上定义的对象（请注意，滚动窗口是在代码中以编程方式创建的，而不是 Glade）。然后我尝试了 gtk.Buildable.get_internal_child() 方法，但这次我在使用它时遇到了问题，因为文档说第一个参数是 gtk.Builder（所以我传递了我的 self.gui），但后来我得到了这个：

```
 swin = gtk.Buildable.get_internal_child(self.gui, 'script-desc-swin')
TypeError: descriptor 'get_internal_child' requires a 'gtk.Buildable' object but received a 'gtk.Builder' 
```

所以我尝试调用 get_internal_child ，就好像它是 gtk.Builder 的一种方法（尽管我首先检查了文档并意识到 gtk.Builder 没有实现 gtk.Buildable ......无论如何我试过了）：

```
 swin = self.gui.get_internal_child('script-desc-swin')
AttributeError: 'gtk.Builder' object has no attribute 'get_internal_child' 
```

我当然明白了，正如我所说的 gtk.Builder (self.gui) 没有实现 gtk.Buildable。

在所有这些混乱之后，我不知道如何查找滚动窗口（或任何其他小部件），所以我正在做的是寻找在 XML 文件中指定的小部件（换句话说，使用 Glade 创建），然后我得到它的孩子并重复这个过程。这就像“OMFG！多么糟糕的代码！” 所以即使我的应用程序正在运行，我真的很想改变那个丑陋的代码：

```
box = self.gui.get_object('MAIN_VIEW_BOX')
hpaned = box.get_children()[1]
hpaned2 = hpaned.get_child2()
swin = hpaned2.get_child1() 
```

一个包含 hpaned 的框，其中包含作为第二个孩子的另一个 hpaned，其中包含作为第一个孩子的滚动窗口。

几乎可以肯定答案会很简单...... :-s

感谢！

# python - 如何获得正在运行的 Python 脚本列表？

> ID：13934511
> 
> 赞同：1
> 
> 时间：2012-12-18T13:53:53.170
> 
> 标签：python, python-2.7

我希望用所有当前正在执行的 python 脚本的文件路径填充一个列表 - 这怎么能在 Python 中完成？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:12:20.907

该[`psutil`](http://code.google.com/p/psutil/)库是与处理流程相关的每个问题的正确答案（如果您想要拥有与平台无关的东西，甚至更多）。

特别是你对[这个](http://code.google.com/p/psutil/wiki/Documentation#Processes)允许你列出所有进程的函数感兴趣，然后你可以使用`Process.name`//获取python进程的`exe`cm `cmdline`​​dlines列表进行过滤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T14:15:51.067

我[找到了一个不错的实用程序](http://code.google.com/p/psutil/)，可以帮助你。以前从未亲自使用过。

使用 pip 安装：

```
pip install psutil 
```

玩转：

```
import psutil

for p in psutil.get_process_list():
    if 'python' in p.name:
        print p.cmdline 
```

`cmdline`应该给你 python 解释器开始使用的参数。这可能会为您提供一些案例。

# .net - .net 中的堆栈和堆内存分配

> ID：13934514
> 
> 赞同：4
> 
> 时间：2012-12-18T13:54:24.897
> 
> 标签：.net, heap-memory, value-type, reference-type, stack-memory

我一直在阅读有关此主题的不同文章/页面，终于来到了[这篇文章](http://www.c-sharpcorner.com/UploadFile/rmcochran/csharp_memory01122006130034PM/csharp_memory.aspx)，这让我感到困惑！

在文章中，它提到，`Value Types always go where they were declared`作者的意思是，值类型可以驻留在堆栈或堆中，取决于它们的声明方式/位置。

让我放一段代码片段让自己更清楚：

```
public class Test
{
    int testInt;
    string testString;
}

int anInt;
string aString;
Test testObj;
testObj = new Test(); 
```

执行这些代码行后，内存分配将如下所示：

![在此处输入图像描述](../Images/8b4c52a1f6321b74e5285689a0577c90.png)

该结构`testInt`存储在堆中，因为它是在`Test`类中声明的。

记住这个例子，让我们看一个简单的 Form.cs 代码，后面我声明一个整数。

```
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        public int anotherInt;
    }
} 
```

**我的困惑部分：**

在这种情况下，`anotherInt`分配到哪里？堆栈还是堆？从表面上看，我认为大多数答案都是“堆栈”。但是，这个变量不是在一个名为的类中声明的`Form1`吗？那么，根据上面的第一个代码片段，它不应该进入堆吗？如果是，那么在什么情况下将结构分配给堆栈？仅当它在方法内声明时？但是，一个方法难道不是属于一个类，它又应该存储在一个堆中吗？

很多问题我都知道！但只是想知道发生了什么。我希望我的问题很清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:49:30.170

在您的示例`anotherInt`中将分配给堆。这是因为`anotherInt`是 的一个字段`Form1`，它是一个堆分配的对象。堆栈与线程相关联，并且仅包含当前执行代码所需的引用/对象。因此，要回答有关课程下方法的问题，您在那里并不完全正确。

虽然方法属于一个类，但它们是可执行的代码块，而不是与类直接关联的内存块（就是这样`anotherInt`）。检查此类分配的最佳方法之一是使用 WinDbg 之类的内存调试器并实际检查您的线程堆栈与堆。这将使您最清楚地了解特定结构的实际分配位置。

在极其简化的意义上：堆栈 = 当前执行代码堆栈所需的地址，堆 = 其他所有内容。但是最后的 Jon B 出现在他与 Eric 博客的链接上。你真的不需要知道你的对象分配在哪里。

编辑：包括[博客链接。](http://blogs.msdn.com/b/ericlippert/archive/2009/04/27/the-stack-is-an-implementation-detail.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T15:57:02.373

在您的示例`anotherInt`中，将与实例的其余部分一起位于堆上`Form1`（当然，假设您创建了一个）。

要创建局部 int，必须在方法或属性中声明变量。例如

```
void Foo()
{
    int localInt = 42;
} 
```

现在，仅仅因为在方法中声明了值类型并不一定意味着它会进入堆栈。例如，捕获的变量的处理方式不同。

# jquery - 修复 jQuery 投资组合过滤器的问题

> ID：13934516
> 
> 赞同：0
> 
> 时间：2012-12-18T13:54:29.247
> 
> 标签：jquery, filter, portfolio

我一直在研究我的在线作品集，试图创建一个可过滤的部分。基本上，我试图得到以下结果：

单击过滤器部分中的标签应显示适当的作品，隐藏其余作品

我不确定如何实现这一点，并且我不想使用 jQueru 插件。我的代码的最后两行工作正常，但其他地方有问题。

```
$('.filters li').click(function() {

    if ($(this).attr('id') == '#all') {
    $('#works ul li').animate({
        opacity : '0'
    });
    }
    else {
        $(this).trigger('show');
        $(this).trigger('hide');
    }

    $('.filters li').removeClass('current');
    $(this).addClass('current');
}); 
```

这是HTML代码：

```
<ul class="filters">
<li id="all">Tous</li>
<li id="webdesign">Web Design</li> 
```

```
<section id="works">
<ul>
    <li class="webdesign">
    <span class="details">
        <h4>title</h4>
        <p>skills</p>
    </span>
    <img src="http://placekitten.com/365/240" alt="">
    </li>
    <li class="wordpress">
    <span class="details">
        <h4>title</h4>
        <p>skills</p>
    </span>
    <img src="http://placekitten.com/365/240" alt="">
    </li>
</ul>
</section> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:07:08.480

首先声明我们的变量，并将我们的选择器缓存到两个元素：

```
var filtr = $("#filters"), 
    works = $("#works li"), 
    curnt = "current",
    clsID = ""; 
```

接下来我们设置*事件委托*，这意味着我们只绑定一个事件，但我们利用冒泡的行为来监听通过单击嵌套`li`元素启动的事件：

```
filtr.on("click", "li", applyFilter); 
```

最后，我们声明处理程序的行为。在这种情况下，我们捕获`id`单击的列表项（如果不存在 id，则捕获“全部”），并使用它来过滤`#works`元素中的列表项：

```
function applyFilter () {
    clsID = this.id || "all";
    clsID === "all"
        ? works.removeClass(curnt).show()
        : works.not("." + clsID).removeClass(curnt).hide()
               .siblings().addClass(curnt).show();
}​​ 
```

小提琴：http: [//jsfiddle.net/mrU4Y/10/](http://jsfiddle.net/mrU4Y/10/)

# ruby - 拖放前有暂停的对象

> ID：13934519
> 
> 赞同：4
> 
> 时间：2012-12-18T13:54:37.347
> 
> 标签：ruby, watir, watir-webdriver

我正在使用 watir 进行自动化测试，本质上这个项目是一个任务管理器。

任务下降到一周中的一天，但需要短暂暂停才能将任务悬停在该特定日期上，以便其被 javascript 识别。

目前这只是firefox的一个问题，chrome很好。

所以我的问题是，你可以拖放但在拖放之前将元素保持在一个区域上吗？

目前正在使用此功能：

```
 dragTask.drag_and_drop_on dropTask 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T16:42:16.603

前段时间与 Watir-WebDriver 有同样的问题，最初是猴子修补 Selenium ActionBuilder。是这样的：

```
require 'watir-webdriver'

module Selenium
  module WebDriver
    class ActionBuilder

      def hold(timeout)
        @devices.merge!(:self => self) unless @devices[:self]
        @actions << [:self, :sleep, timeout]
        self
      end

    end # ActionBuilder
  end # WebDriver
end # Selenium

begin
  browser = Watir::Browser.new
  browser.goto "data:text/html,#{DATA.read}"
  button_1 = browser.button(id: "button1")
  button_2 = browser.button(id: "button2")
  browser.driver.action.
                 click_and_hold(button_1.wd).
                 move_to(button_2.wd).
                 hold(3).
                 release.
                 perform
ensure
  browser.close
end

__END__

<html>
  <button id="button1">Button 1</button>
  <button id="button2">Button 2</button>
</html> 
```

# api - Google Checkout API 是否支持 SNI？

> ID：13934525
> 
> 赞同：1
> 
> 时间：2012-12-18T13:55:03.697
> 
> 标签：api, google-checkout, sni

在我煞费苦心地在我的服务器上设置 SNI（服务器名称识别）之前。我想知道 google checkout callback api 是否支持 SNI。我读了一些报告说不是，但那是一年多以前的事了。

# string-formatting - Jqplot yxes 最小值

> ID：13934526
> 
> 赞同：1
> 
> 时间：2012-12-18T13:55:05.800
> 
> 标签：string-formatting, jqplot, format-string

每当我在 Y 轴上将最小值设置为 0 时，我的刻度都会变为十进制数。上面的代码在 Y 轴上显示了 80、90、100 等数字：

```
 yaxis:{
     autoscale: true,
     formatString: "%d"
 } 
```

设置选项时`min`，刻度显示为 80.00、90.00、100.00。

```
yaxis:{
     autoscale: true,
     min: 0,
     formatString: "%d"
 } 
```

添加选项时如何避免更改字符串格式`min`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:50:53.790

尝试添加

```
tickInterval: x 
```

例如：

```
yaxis:{
 autoscale: true,
 min: 0,
 formatString: "%d"
 tickInterval: 10
} 
```

# winforms - 如何在 web 浏览器控件的 html 页面中设置 html 输入文件元素的值？

> ID：13934532
> 
> 赞同：0
> 
> 时间：2012-12-18T13:55:50.950
> 
> 标签：winforms, c#-4.0, file-upload, webbrowser-control

如何在web浏览器控件的html页面中设置html输入文件元素的值？

例如：

对于 html 输入元素，

```
<input type="text" name="userName" maxlength="10" value="" id="Login_userName"> 
```

我们在 C# 中有如下代码，用于设置输入类型文本的值：

```
//Assigning value to a textbox control
wbEfile.Document.GetElementById("Login_userName").SetAttribute("value", access.pannumber.ToString()); 
```

现在，我的问题是如何为类型文件的 html 输入元素设置值（如下所示）？

```
<input type="file" name="uploadFile" value="" id="UploadReturn_uploadFile"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:02:57.977

你不能这样做。输入 type="file" 具有安全性，因此您不能直接从 JavaScript 访问文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:10:42.733

```
 HtmlElement ele = webBrowser1.Document.GetElementById("Login_userName");
 if (ele != null)
    ele.InnerText = access.pannumber.ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-09T07:00:15.053

为将来的参考提供较晚的答案。如果目标是为元素提供文件名以`<input type="file"/>`用于 UI 测试自动化目的，[那么](https://stackoverflow.com/a/18691219/1768303)可以这样做。

# google-bigquery - 如何在不使用文件的情况下以编程方式将数据加载到大查询表中？

> ID：13934534
> 
> 赞同：0
> 
> 时间：2012-12-18T13:55:53.453
> 
> 标签：google-bigquery

是否可以在 BigQuery 表中启动加载作业并将要加载的数据指定为字符串或流。我只能找到指向 Google Cloud Storage Files 的 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:24:32.427

目前无法将单个记录直接流式传输到 BigQuery - 数据加载基于源文件的批处理操作。

可以直接将数据发送到 API 端点（[通过 POST 请求](https://developers.google.com/bigquery/docs/import?hl=en#localimport)），而无需先将其暂存在 Google Cloud Storage 中。但是，出于各种原因，我建议使用 Google Cloud 存储，包括更好地加载非常大的文件的可靠性，以及在我们的云中存档您的源数据。

# ios - 是否有可能构建一个提供除 UI 之外的所有内容的 iOS 框架？

> ID：13934535
> 
> 赞同：0
> 
> 时间：2012-12-18T13:56:01.513
> 
> 标签：ios, frameworks, target

摘要：我想构建三个技术上相同但设计完全不同的应用程序。

* * *

我想构建具有自定义界面、CoreData 模型和一些自定义外观（UITableViewCell / UIView）的 iOS 应用程序。

因为我需要构建三个类似的应用程序，所以我想构建一个框架，其中包含模型和一些我可以在所有这些应用程序中重用的控制行为。如果发现错误，我只需要在框架中修复它并重新编译每个应用程序。

用户交互和视图顺序都是一样的，但三个应用程序的设计应该是独立的（例如不同的 UITableViewCells 具有不同的高度，按钮的排列，...）。

不同的目标不是一个选项，因为我不想只交换一些背景图像而是真正的个人布局。此外，不同的目标将需要许多 if/else if/... 块，如果我创建第四个目标，这会使代码看起来很丑陋并且失控。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:01:16.367

这不是一个非常有用的建议，但我们在我使用 Titanium Studios 和 Alloy MVC 框架的地方执行此操作。寿，我假设你想编写完整的原生 iOS 代码，而不是 Titanium JS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:03:25.627

您正在寻找的方法类似于[Model-View-ViewModel](http://en.m.wikipedia.org/wiki/Model_View_ViewModel)，并且在桌面开发人员中越来越流行。您创建一个后端框架，它要么是跨平台的，要么是有必要的，只封装逻辑，然后围绕该框架设计一个应用程序。如果你没有进入目标，接下来的合乎逻辑的步骤将是单独的项目。

# c# - 您如何使用 Tasks 衍生出大量“一劳永逸”的作品？

> ID：13934539
> 
> 赞同：6
> 
> 时间：2012-12-18T13:56:11.773
> 
> 标签：c#, .net, task-parallel-library

我有一个要向其引入[TPL](http://msdn.microsoft.com/en-us/library/dd460717.aspx)功能的 Windows 应用程序。场景是我有一个类，该类的`Process`方法具有`MailMessage`传递给它的 s 集合以及当前 IMAP 连接（使用 AE.Net.Mail）。

我想将尽可能多的线程分拆给`Execute`另一个类中的一个方法，该方法采用单个`MailMessage`项目，然后分拆`MailMessage`到数据库，然后使用 IMAP 连接`MailMessage`从服务器中删除。

我不太担心跟踪流程 - 我正在处理大量电子邮件，并且不担心我在写入数据库或删除时遇到一些错误。我只需要应用程序尽快通过大量 MailMessages。

我一直在玩，`Task<MailMessage>.Factory.StartNew`但我真的不知道我在做什么。我似乎无法启动它......这是我尝试过的：

```
Task test = Task.Factory.StartNew(() =>
{
  foreach (var mailMessage in _mms)
  {
    new ProcessMessage().Execute(mailMessage, imapConn);
  }

}); 
```

我很确定我不应该在 lamda 表达式中有一个循环，当我运行它时它似乎没有进入`ProcessMessage.Execute`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T14:03:04.293

现在您正在将 foreach 循环作为单独的任务执行，但您可能希望将每个迭代作为单独的任务执行。您应该尝试 Parallel.ForEach：

```
 Parallel.ForEach(_mms, mailMessage =>
            {
                new ProcessMessage().Execute(mailMessage, imapConn);
            }); 
```

这将并行执行迭代，这似乎是您想要做的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T14:00:16.590

你绝对不应该在你的 lamdba 表达式中有一个循环。尝试这个：

```
_mms.ForEach(mms => {
    Task.Factory.StartNew(() => ProcessMessage().Execute(mailMessage, imapConn))
}); 
```

如果您不担心跟踪结果或不需要保存任务实例的任何内容，例如 Task test = .... 您可以使用`Task.Factory.StartNew()`这种方式在新线程中启动方法执行只需为您要处理的每条邮件消息启动一个新任务，并让线程池为我们处理事情。

此外，`Task<MailMessage>.Factory.StartNew`将用于在另一个返回 MailMessage 的线程中设置方法调用，因此如果您正在调用 void 方法，则无需执行此操作。`Task<object>`语法总是指您使用新任务启动的方法的返回类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T15:49:14.803

> 当我运行它时，它似乎没有进入`ProcessMessage.Execute`.

那么您的代码肯定有其他问题，您的代码当然应该可以工作。如果您不想（或不能）并行化代码，则在 lambda 中使用循环可能是完全合适的。

如果您确实想要并行化它（从您的问题中并不清楚），您可以使用例如`Parallel.ForEach()`为此进行了优化的示例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T14:00:33.077

这应该在单独的线程中执行每个执行（所以你知道你现在在做什么:)）

```
 foreach (var mailMessage in _mms)
  {
     ThreadPool.QueueUserWorkItem(delegate
     {
        new ProcessMessage().Execute(mailMessage, imapConn);
     });
  } 
```

或者

```
 foreach (var mailMessage in _mms)
  {
      new Thread(delegate() { new ProcessMessage().Execute(mailMessage, imapConn); }).Start();
  } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-18T14:06:24.207

另一种选择是在集合上使用[`.AsParallel()`和：`.ForAll()`](http://msdn.microsoft.com/en-us/library/dd383744.aspx)

```
_mms.AsParallel()
    .ForAll(mm => ProcessMessage().Execute(mm, imapConn)); 
```

# java - 如果应用程序在 GC 中，如何可靠地获取 JVM 核心转储？

> ID：13934547
> 
> 赞同：3
> 
> 时间：2012-12-18T13:56:28.993
> 
> 标签：java, linux, coredump

我试图在我的 java 应用程序中找到内存泄漏的原因。我需要为处于**长**GC 周期中的进程获取堆转储。Jmap 在这种情况下不起作用，因为应用程序被挂起并且因为堆非常大。

不幸的是，jmap 在我使用的核心转储中抛出了 UnknownOopException。我想在 GC 期间进行核心转储是不正确的。有什么方法可以在正确进行核心转储时暂停 java 进程？

还是我完全错了并且由于其他问题而损坏了核心转储？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:05:41.473

在执行 GC 时不能进行堆转储。您需要在 GC 之前或之后进行堆转储。如果您想知道为什么要花这么长时间，那么确定哪个 pahse 需要这么长时间是很有用的。要查看此添加`-verbosegc` 这将指示是否需要很长时间才能到达安全点、复制对象、扫描永久空间、检查引用或其他内容。

这可能需要一些时间，因为您有很多对象要清理。作为一种猜测，最坏的情况下每 2 GB 堆对象可能需要 1 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:04:13.133

您需要做的是在堆接近满以致 GC 锁定应用程序*之前进行堆转储。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:06:01.523

根据我的经验，OutOfMemory 异常或长 GC 周期并不一定表示内存泄漏。

为了搜索内存泄漏，需要间隔一段时间进行 2 个单独的堆转储（我使用过 jvisualvm，现在一个版本与 JDK 捆绑在一起）并分析它们。提示：检查对象的保留大小会有所帮助。

根据您的应用程序所做的事情以及如果没有出现明显的内存泄漏，调整 JVM GC 选项是您最好的选择。寻找世代比率，新对象被终身使用后的世代等。

希望这个对你有帮助。

# c++ - 使用 C++ 回调围绕 C++ 类编写 C 包装器

> ID：13934550
> 
> 赞同：7
> 
> 时间：2012-12-18T13:56:38.160
> 
> 标签：c++, c, callback, wrapper

我需要用 C 包装一个 C++ 库。这个 C++ 库定义了回调函数。例如：

```
 // from C++ library

    typedef X CallbackFn(Y y); // X and Y are classes

    class Z
    {
    public:
            void addCallback( CallbackFn* fn ) { callbackFn = fn; }
    private:
            CallbackFn* callbackFn;
    }; 
```

在 C 包装器中，我可以定义新的 C 回调，它调用 C++ 回调。像这样的东西：

```
 // in C wrapper

    extern "C" {

    typedef int CallbackFnC(int n, ... );

    CallbackFnC *callbackFnC;

    int addCallback(void* handle, CallbackFnC* fn) // handle is pointer to Z instance
    {
        callbackFnC = fn;
        ((Z*)handle)->addCallback(callbackFnCPP);
    }

    }

    X callbackFnCPP(Y y)
    {
        int rtn = callbackFnC(y.n, ...);
        return X(rtn);
    } 
```

我假设我可以将 Y 的相关成员映射到 C 回调函数的参数，并且我可以充分地从 C 返回构造返回类型 X。

这行得通吗？没有办法定义新的 C 回调？

新的 C 回调应该在内部，`extern "C"`而定义的 C++ 回调实例应该在外部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:28:54.983

是的，用 C 回调和 C++ 包装函数替换 C++ 回调将起作用（有一些警告），不，如果 C++ 回调坚持传递/返回类或引用（与 C 也支持的原始类型相反），那么包装方法是唯一可能的解决方案。

使用包装函数的主要警告是，包装函数需要某种方法来找到要调用的正确 C 函数。使用全局是一种简单的解决方案，但现在您仅限于整个程序的一个回调（无论您拥有多少 Z 对象）。更灵活的解决方案将取决于 C++ 回调的设计，范围从简单（注册时，您可以提供将提供给回调的任意用户数据）到非常困难。

# objective-c - Category 对实现协议的类有什么影响？

> ID：13934557
> 
> 赞同：0
> 
> 时间：2012-12-18T13:57:00.170
> 
> 标签：objective-c

对于我当前的项目，我有一些协议，并在实现该协议的类上声明了一个类别：

```
@interface MyClass (ImplementingMyProtocol) <MyProtocol>

@end

@implementation

// Implementation of protocol

@end 
```

我认为如何解释这个方案有两种可能性：

1.  该类别仅适用于`MyClass`符合 的子类`MyProtocol`。
2.  类别适用于具有按类别`MyClass`实施效果的所有实例。`MyProtocol`

这两种可能性中的哪一种实际上适用？我不知道编译器如何解释这个声明，也没有找到关于该主题的任何帮助或文档。我想我知道如何处理这两个选项，但是要这样做，我需要知道编译器解释我的代码的方式实际上是哪一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:11:55.133

上面的效果是，xcode 知道 Class MyClass DOES 打算实现给定的协议 MyProtocol 它也将在运行时符合它

* * *

协议只是“元信息”——它不是运行时需要的......运行时只知道嘿我有这个类，嘿我应该在它上面调用这个方法

它不检查是否符合某些协议

* * *

**协议仅用于**IDE 的类型检查（它可以给你警告），你可以在运行时询问一个类，但 objC 没有

* * *

**所以他们根本不需要执行**：D

# java - 为什么在线程上使用计时器，反之亦然？

> ID：13934562
> 
> 赞同：0
> 
> 时间：2012-12-18T13:57:25.807
> 
> 标签：java, timer

我已经阅读了一大堆答案，这些答案之前在 Stackoverflow 上被其他人询问过，但我似乎仍然找不到满意的答案。我需要持续运行的方法。那么，我应该通过线程、计时器或两者的混合来运行所有内容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:00:34.640

这取决于。

当一个动作应该在特定的时间间隔或特定的时间点执行时，最好使用计时器。

当时间无关紧要，但任务应该在程序继续运行时尽快完成时，您应该使用线程。

您不会使用计时器来等待文件传输完成，而用户可以继续使用程序的其余部分。

但是您不会使用每 5 分钟自动保存文档的线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:06:07.700

即使是普通的 java 程序（没有任何线程）也使用线程的概念，尽管我们没有意识到，因为只有一个线程。因此，当您想以异步方式运行更长的时间时，线程很有帮助。

所以你可以使用**Timers、Executors 甚至直接 Threads**。定时器或执行器只是线程的抽象。

# regex - 使用批处理文件为关键字的每个实例创建一个换行符

> ID：13934565
> 
> 赞同：2
> 
> 时间：2012-12-18T13:57:32.077
> 
> 标签：regex, windows, command-line, batch-file

我发现了一个系统上的 0-day Java 漏洞利用，它让我想到了在每个用户配置文件中查看 Java .idx 文件以查找可能指向活动 0-day 威胁的可疑 URL。

我从这个开始：

```
for /d %%A in ("C:\Documents and Settings\*") do (
findstr /S "http://" "%%A\Application Data\Sun\Java\Deployment\cache\6.0\*" >> C:\temp\javaurls.txt) 
```

这会生成一个完整的 URL 文件，但它们与大量控制信息和其他无趣的东西混在一起。我想做的是为每个找到的“http://”小写实例创建一个换行符。任何人都知道如何在批处理文件中使用命令行来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:12:27.733

我知道“只需使用其他工具！” 答案可能很烦人。但是，Windows 批处理文件/命令行实用程序非常糟糕，我认为如果您必须经常做这类事情，那么值得研究其他选项。除非您喜欢找出[未记录的、非标准的、损坏的正则表达式](https://stackoverflow.com/questions/8844868/what-are-the-undocumented-features-and-limitations-of-the-windows-findstr-comman)，[并且即使是最基本的功能也需要 hacky 解决方案](https://stackoverflow.com/questions/6060046/windows-batch-files-multiple-if-conditions)，也就是说。

一些选项：

*   [Perl](http://strawberryperl.com/)
*   [适用于 Windows](http://gnuwin32.sourceforge.net/packages/grep.htm)的 Grep（与 findstr 等效得多）
*   [Cygwin](http://www.cygwin.com/)（用于 Windows 的整个类似于 Linux 的 shell 环境；包括 grep）。

这是您可以添加到批处理文件中的单行 Perl 以在每个之前添加换行符`http://`：

```
perl -pi.bak -e "s|(http://)|\n$1|g" C:\temp\javaurls.txt 
```

但是，如果我从头开始，我会在 Perl 中完成整个事情，而不是使用批处理文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:31:34.503

我一般同意其他人表达的观点 - 批处理在处理文本方面很糟糕。使用另一种语言或工具对您的任务来说是一个好主意。

但它可以用批处理来完成:-)

简单地在每个之前插入一个换行符`html://`并不难

```
@echo off
setlocal disableDelayedExpansion
:: The first FOR loop loads a quoted linefeed into %%L
:: The blank line within the IN() clause is critical. Do not remove.
for %%L in (^"^

^") do (
  for /d %%A in ("C:\Documents and Settings\*") do (
    for /f "eol=: delims=" %%B in (
      'findstr /S "http://" "%%A\Application Data\Sun\Java\Deployment\cache\6.0\*"'
    ) do (
      set "line=%%B"
      setlocal enableDelayedExpansion
      echo(!line:http://=%%~Lhttp://!
      endlocal
    )
  )
) >c:\temp\javaurls.txt 
```

但是只保留以开头的结果行，`http://`并在地址成为真正的痛苦之前保留每个文件的名称。

```
@echo off
setlocal disableDelayedExpansion
:: The first FOR loop loads a quoted linefeed into %%L
:: The blank line within the IN() clause is critical. Do not remove.
for %%L in (^"^

^") do (
  for /d %%A in ("C:\Documents and Settings\*") do (
    for /f "tokens=1* delims=:" %%B in (
      'findstr /S "http://" "%%A\Application Data\Sun\Java\Deployment\cache\6.0\*"'
    ) do (
      set "line=%%C"
      setlocal enableDelayedExpansion
      set "line=!line:http://=%%~Lhttp://!"
      for /f "delims=" %%D in (
        '"cmd /v:on /c echo(^!line^!|findstr http://"'
      ) do (
        if "!!" equ "" endlocal
        echo %%B: %%D
      )
    )
  )
) >c:\temp\javaurls.txt
exit /b 
```

# jquery-ui - IE 上的cropzoom js 库问题

> ID：13934567
> 
> 赞同：1
> 
> 时间：2012-12-18T13:57:44.967
> 
> 标签：jquery-ui, jquery

我正在使用 jquery 库对左图像进行裁剪，并使用 jquery ui 对右图像进行拖动和调整大小。

这是网址： [http ://hollywoodlacewigs.netsmartz.us/demo/](http://hollywoodlacewigs.netsmartz.us/demo/)

它适用于除 IE 之外的所有浏览器。单击“上传”按钮的左侧位置以上传图像。

```
<link href="css/jquery-ui-1.7.2.custom.css" rel="Stylesheet" type="text/css" /> 
<link href="css/jquery.cropzoom.css" rel="Stylesheet" type="text/css" /> 
<script type="text/javascript" src="js/jquery-1.6.2.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.14.custom.min.js"></script>
<script type="text/javascript" src="js/jquery.cropzoom.js"></script>
<script type="text/javascript" src="js/script.js"></script> 
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" />
<!--[if IE 6]><link rel="stylesheet" href="css/style.ie6.css" type="text/css" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="css/style.ie7.css" type="text/css" media="screen" /><![endif]-->
<script type="text/javascript" src="js/jquery.form.js"></script>    <!-- for ajax submit form-->
<script src="js/jquery.ui.touch-punch.js"></script> <!-- for touch devices-->
<link rel="stylesheet" href="css/jquery.Jcrop.css" type="text/css" />   
<script> 
// Upload image to resize into 173X205 and display in #output div
$(document).ready(function() { 
    $('#UploadForm').change('submit', function(e) {
        e.preventDefault();
        $('#SubmitButton').attr('disabled', ''); // disable upload button
        $('#left-pic').hide();
        $('#output').show();                    
        // show ajax loader till image resizes//
        $("#output").html('<img style="margin:45px 0px 0px 35px; " src="images/mixer/ajax-loader.gif" alt="Please Wait"/>');
        $(this).ajaxSubmit({
            target: '#output',
            success:  afterSuccess //call function after success
        });
    }); 
}); 
function afterSuccess(){ 
    $('#UploadForm').resetForm();  // reset form        
    $('#SubmitButton').removeAttr('disabled'); //enable submit button   
    // make image control buttons active ///
    $("#rt").attr('src','images/icons/rotate-counterclockwise.png');
    $("#lt").attr('src','images/icons/rotate-clockwise.png');
    $("#up").attr('src','images/icons/zoomin.png');
    $("#down").attr('src','images/icons/zoomout.png');
    $("#ninety").attr('src','images/icons/resize.png');
    $("#restore2").attr('src','images/icons/reset.png');
    $(".mix-face").attr('class','mix-face-active');

    // set img src to var and display in left img box with controls
    var imgsrc = $("#cropbox").attr('src');
    var cropzoom2 = $('#output').cropzoom({
            width:173,
            height:208,
            bgColor: '#FFF',
            enableRotation:true,
            enableZoom:true,
            zoomSteps:10,
            rotationSteps:5,
            expose:{
            slidersOrientation: 'horizontal',
            zoomElement: '#zoom',
            rotationElement: '#rot',
            elementMovement:'#movement'
        },
        // white square box to select image area//
        selector:{        
            centered:true,
            borderColor:'#FFF',
            borderColorHover:'#FFF'           
        },
        // image controls.. further controls can be defined or check cropzoom.js file for more controls..
        image:{
            source:imgsrc,
            width:173,
            height:208,
            minZoom:100,
            maxZoom:200,
            startZoom:100,
            useStartZoomAsMinZoom:true,
            snapToContainer:true
        }
    });
    // Restore image on left and right 
    $('#restore2').click(function(){
        cropzoom2.restore();
        $('#cutimage').remove();
        $('#composedimage').val('');
    });
    // crop button will crop the selected area of image and convert to vignette effect 
    $('#crop2').click(function(){ 
        cropzoom2.send('resize_and_crop.php','POST',{},function(rta){
            $('#cutimage').remove();
            var img = '<img width="85" height="95" src="'+rta+'" id="cutimage" style="top:55px;left:40px; border:2px solid #FFF;  position:absolute;"  />';
            $('#x3').val('40');
            $('#y3').val('55');
            $('#containment-wrapper').append(img);
            $('#composedimage').val(rta);
            CutAndResizeImg();
        });
    });
}
function CutAndResizeImg(){
    $(".btn_email_me_my_wig_pic").attr('class','btn_email_me_my_wig_pic-active');
    // image resizable on right image containment area.
    $('#cutimage').resizable({
        containment: $('#containment-wrapper'),
        stop: function(event, ui) {
            var w = $(this).width();
            var h = $(this).height();
            $('#w').val(w);
            $('#h').val(h);
            console.log('StopEvent fired')
            console.log('Width:'+w);
            console.log('Height:'+h)    
        }
    }),
    // image draggable on right image containment area.
    $('#cutimage').parent().draggable({
        containment: $('#containment-wrapper'),
        cursor: "move", 
        stop: function(){
            var finalOffset = $(this).offset();
            var parentFinalOffset = $(this).parent().offset();
            var finalxPos = finalOffset.left -(parentFinalOffset.left+2);
            var finalyPos = finalOffset.top- (parentFinalOffset.top+2);
            $('#x3').val(finalxPos);
            $('#y3').val(finalyPos);
        }
    });
    // show pop up window
    $('#click').click( function(){
        loadPopupBox();
    });
    // hide pop up window
    $('#popupBoxClose').click( function() {         
        unloadPopupBox();
    });
    // To Unload the Popupbox
    function unloadPopupBox() { 
        $('#popup_box').fadeOut("slow");
        $("#mixer-content").css({ 
            "opacity": "1"  
        }); 
        //window.location.reload();
    }   
    // To Load the Popupbox
    function loadPopupBox() {   
        $('#popup_box').fadeIn("slow");
        var winH = $(window).height();
        var winW = $(window).width();            
        $('#popup_box').css({
            'top' : ((winH / 2) - ($('#popup_box').height() / 2)) + 'px',
            'left' : ((winW / 2) - ($('#popup_box').width() / 2)) + 'px'
        });
        $('#mixer-content').css({
            'opacity':'.5'
        })
    }
}
    // test email validation or send email 
    function checkemail(email) {        
        var regex = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
        if(!regex.test(email)){
        $('#emailmsg').html('<div id="emailerror">Please enter valid email address.</div>');
            return false;
        } else {
            $('#processemail').submit('submit', function(e) {
                e.preventDefault();         
                $(this).ajaxSubmit({
                    //target: '#output2',
                    success:  emailsuccess              
                });             
            }); 
        }
    }
    // send thankyou message after successfull image sent as attachment to the assignee..
    function emailsuccess(){
        $('#processemail').resetForm();
        $('#processemail').hide();
        $('#msgheading').hide();
        $('#emailmsg').html('<div id="emailsuccess"><p>Email sent successfully!</p><p>&nbsp;</p><img src="images/icons/btn-thanku.png" id="closethank" /></div>');
        $("#closethank").click( function(){
            $('#popup_box').fadeOut("slow");        
            window.location.reload();           
        }); 
    }
</script>  
<div id="mixer-content">    
    <div class="pic-area">
        <p>&nbsp;</p>
        <p>&nbsp;</p>
        <p>&nbsp;</p>
        <!-- Image control buttons -->
        <ul>
            <li><img id="rt" alt="Rotate Left" title="Rotate Left" src="images/icons/rotate-counterclockwise_d.png" width="41" height="35" /></li>
            <li><img id="lt" alt="Rotate Right" title="Rotate Right" src="images/icons/rotate-clockwise_d.png" width="41" height="35" /></li>
            <li><img id="up" alt="Zoom In" title="Zoom In" src="images/icons/zoomin_d.png" width="41" height="35"  /></li>
            <li><img id="down" alt="Zoom Out" title="Zoom Out" src="images/icons/zoomout_d.png" width="41" height="35" /></li>
            <li><img id="ninety" title="Rotate 90&deg;" alt="Rotate 90&deg;" src="images/icons/resize_d.png" width="41" height="35"  /></li>
            <li><img id="restore2" title="Reset Image" alt="Reset Image" src="images/icons/reset_d.png" width="41" height="35"  /></li>
        </ul>
        <!-- Left Default Image  -->
        <a class="left-pic" id="left-pic"><img  src="images/mixer/img_pic01.jpg" width="173" height="208" alt="" /></a>
        <!-- After uploading, image is displayed here resized.. -->
        <div id="output" style="float:left; width:173px; border:1px solid #9E999A; display:none; height:208px;"></div>
        <div class="icon-area"><a class="mix-face"  id="crop2"></a></div>
        <!-- cropped image is displayed over the below image for composition.-->
        <form name="finalForm" action="" method="post">     
            <div id="containment-wrapper" style="position:relative;">       
            <img src="images/mixer/1.jpg" width="173" height="208" alt="" style="position:absolute;"/>
            </div>
            <a class="btn_email_me_my_wig_pic" id="click"></a>
            <input type="submit" style="display:none;">     
        </form>
        <!--Upload form button-->
        <div id='uploadForm' style='float:left; margin-left:2px;'>
            <form action="processupload.php" method="post" enctype="multipart/form-data" id="UploadForm">           
                <label class="filebutton">
                    <img src="images/mixer/btn_upload_your_pic.png" />
                    <span><input type="file" id="image" name="image"></span>
                </label>                
            </form>
        </div>  
        <!--Below are zoom and rotation controls which is hidden but we are using these values on button click events -->
        <div style="display:none;" id="zoom"></div> 
        <div style="display:none;" id="rot"></div> 
    </div>  
</div>
<!-- poup box displayed ..-->
<div id="popup_box">    
    <a id="popupBoxClose"><img src="images/mixer/close-button.png" /></a>
    <div id="msgheading">EMAIL ME MY WIG PICTURE</div>
    <div id="emailmsg"></div>
    <form name="processemail" id="processemail" action="processemail.php" method="post">
        <input type="hidden" name="composedimage" id="composedimage" >
        <input type="hidden" id="x3" name="x3" />
        <input type="hidden" id="y3" name="y3" />   
        <input type="hidden" id="w" name="w" />
        <input type="hidden" id="h" name="h" />
        <div style="margin:25px;">      
            Email : <input name="email" id="email" />
            <input id="emailsubmit" type="image" src="images/mixer/btn_send.png"  name="sendemail" onClick="return checkemail(document.getElementById('email').value)" />
        </div>  
    </form>     
</div> 
```

# fonts - 该网站如何将字体渲染得如此出色？

> ID：13934569
> 
> 赞同：4
> 
> 时间：2012-12-18T13:57:47.537
> 
> 标签：fonts, rendering

[http://www.addthis.com/](http://www.addthis.com/)

顶部的大字体看起来很漂亮。即使在窗户上。我注意到他们没有为页面上的其他字体做这件事……是 Flash 内容还是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:41:38.470

使用 Firebug 或 Chrome 检查工具，您可以看到 h2 标记（页眉）的样式定义为：

```
h2 {
font-family: "HelveticaNeueBold","HelveticaNeue-Bold","Helvetica Neue",Helvetica,"open sans",arial,sans-serif;
font-size: 36px;
font-style: normal;
font-weight: 700;
line-height: 1.2em;
word-wrap: break-word;
color: black;
letter-spacing: -0.04em;
}
.hp-banner-b h2 {
margin: 0 0 5px 0;
font-size: 4.2em;
letter-spacing: -0.02em;
text-shadow: 0 2px black;
} 
```

对于它下面的子标题：

```
.helv, .bigtext {
font-family: "Open Sans",Helvetica,arial,sans-serif;
font-style: normal;
font-weight: 300;
letter-spacing: -.05em;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-18T14:15:39.157

如果您说的是“1400 万个网站不会错”。渲染，一个简单的方法是复制标题：

HTML：

```
 <div class="title"><h1>%%My title%%<span>%%My title%%</span></h1></div> 
```

然后你必须把你的假跨度标题放在真正的 h1 标题下。

CSS：

```
.title h1 {
    position: relative;
    margin-top: 0px;
    color: white;
}

.title h1 span {
    position: absolute;
    top: -1px;
    left: -1px;
    color: black;
} 
```

我认为您可以通过这种方式进行渲染。

**编辑**：也许是更好的方法 - 你可以使用[text-shadow CSS3 属性](http://www.w3schools.com/cssref/css3_pr_text-shadow.asp)

# php - 在页眉/页脚中使用 FPDF 的 WriteHTML()

> ID：13934572
> 
> 赞同：0
> 
> 时间：2012-12-18T13:58:00.643
> 
> 标签：php, fpdf

我正在尝试使用 writeHTML 脚本（此处： [http](http://www.fpdf.org/en/script/script41.php) ://www.fpdf.org/en/script/script41.php ）以及教程 6 中的页眉和页脚（此处：[http://www.fpdf .org/en/tutorial/tuto2.htm](http://www.fpdf.org/en/tutorial/tuto2.htm)）。

我的代码如下所示：

```
<?php
require_once('WriteHTML.php');

class PDF extends FPDF
{
     // Page footer
     function Footer()
     {

     $this->SetY(-30);
     $this->SetFont('Arial','I',8);     
     $this->Cell(0,10,'Page '.$this->PageNo(),0,0,'C');
     $html = '<p>some HTML</p>';

     $this->WriteHTML($html);
     }

     // Some more functions... header, PrintChapter etc... 
}

$pdf = new PDF();
$pdf->SetTitle($title);
$pdf->AddPage();
$pdf->PrintChapter(1,'A RUNAWAY REEF','test.txt'); // print text file content
$pdf->Output();
?> 
```

我收到以下错误：

`Call to undefined method PDF::WriteHTML() in /path/to/test2.php on line 15`

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:00:31.780

您需要扩展，而`PDF_HTML`不是`FPDF`作为`WriteHTML`.`PDF_HTML`

如果你想让继承工作，你总是需要扩展你想使用的类。假设你想扩展`PDF_Index`，你仍然需要`WriteHTML`在某个地方继承。

也许

```
PDF extends PDF_Index 
```

和

```
PDF_Index extends PDF_HTML 
```

或者，

```
PDF_HTML extends PDF_Index 
```

但是你需要在链中使其工作。

如果您不将两者都放在继承链中，那么您将不会使用您不使用的分支中的可用功能。

```
 ---> PDF_HTML
     /
FPDF ----> PDF_Index ----> PDF 
```

PDF_HTML 中的功能将不适用于 PDF

# javascript - javascript中是否有替代技术来关闭？

> ID：13934581
> 
> 赞同：0
> 
> 时间：2012-12-18T13:58:25.433
> 
> 标签：javascript, closures

在下面的代码中，我使用闭包来“保存”“this”引用并将其传递给回调。但我想知道，是否有替代技术来完成同样的事情？

```
function App()
{   
    this.number = 75;
}

App.prototype.xmlHandler = function(self)
{
    if (this.number == 99) //true at run-time
        console.log("this.number == 99 is true");
    else
        console.log("this.number == 99 is false");

    if (self.number == app.number) //true at run-time
        console.log("self.number == app.number is true");
    else
        console.log("self.number == app.number is false");
};

App.prototype.loadXML = function(url, handler)
{
    var self = this;
    var req = new XMLHttpRequest();
    req.number = 99;
    req.addEventListener("load", function(){handler.call(req, self);}, false);
    req.open('GET', url, true);
    req.send();
};

App.prototype.init = function()
{
    this.loadXML('resources.xml', this.xmlHandler);
};

var app = new App();
app.init(); 
```

在 xmlHandler 方法下，本质上有两个不同的“this”（一个 [this] 用于 req 对象，另一个 [self] 用于 app 对象）。那么，是否有替代技术可以在一个屋檐下获得两个不同的“this”值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:51:34.330

有一些实用函数可以创建一个闭包，但没有冗长。

在这种特殊情况下，您可以使用 ES5[`Function.bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)方法（旧版浏览器可以轻松使用 shims）：

```
App.prototype.loadXML = function(url, handler) {
    var req = new XMLHttpRequest();
    req.number = 99;
    req.addEventListener("load", handler.bind(this, req), false);
    req.open('GET', url, true);
    req.send();
}; 
```

结果将是`handler`（等于`this.xmlHandler`）将被调用，`this`仍然等于其原始值（即`App`对象）并`req`作为第一个参数。

严格来说，这与您当前的定义相反`xmlHandler`，但恕我直言，`this`引用`App`对象而不是将其作为参数传递更合乎逻辑。然后将编写该函数：

```
App.prototype.xmlHandler = function(req, evt) {
    if (req.number == ...) {
        ...
    }
    ...
} 
```

请注意`evt`参数是如何可用的 - 传入的参数`.bind`被*添加*到浏览器提供的任何参数之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:20:01.957

实际上，您可以使其工作的唯一方法是使用闭包。

也就是说，查看您的代码，我认为根本不`.loadXML()`应该真正关心上下文：

```
App.prototype.loadXML = function(url, handler)
{
    var req = new XMLHttpRequest();
    req.number = 99;
    req.addEventListener("load", handler, false);
    req.open('GET', url, true);
    req.send();
}; 
```

这会清理函数，以便您真正想做的事情可以在内部表达`.init()`：

```
App.prototype.init = function()
{
    var self = this;

    this.loadXML('resources.xml', function(evt) {
        // this refers to the XMLHttpRequest
        // self refers to the current App instance
        self.xmlHandler(this);
    });
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:05:57.467

一般来说，除了闭包没有其他选择。

对于`this`绑定，如果您只需要其中一个，可以使用[`.bind()`Function 方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)（ES5.1 原生，易于移植）。对于“两个不同的'this'值”，您可能需要编写一个类似的函数，将第二个上下文作为参数传递，但闭包比恕我直言更简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T15:42:49.993

这可能不是您想要的。无论如何，这是共享“这个”。对象“内在”并没有保留其对象性，因为它已成为“外在”的一种方法，但它是共享的。

如果您正在寻找比我在这里写的更具体的东西，请告诉我。

```
<html>
<head>
</head>
<body>
<p id="result1"></p>
<p id="result2"></p>
</body>
<script>

var outer = function(val, obj){

    this['inner'] = obj['inner'];
            this.val = val;
    this.inner('result1')
    this.val2 = 'not 2';
    this.inner('result2');
};
var inner = function(id){
    this.val2 = this.val2 || 2;
    document.getElementById(id).innerHTML = 'this.val='+this.val+'this.val2='+this.val2;

};

new outer('thing', {'inner': inner});
</script>
</html> 
```

# jquery - 当数据库有多组时，如何在一个页面中设置一组数据？使用移动jQuery

> ID：13934584
> 
> 赞同：0
> 
> 时间：2012-12-18T13:58:41.133
> 
> 标签：jquery, mobile

我在 Mobile Jquery 上有这个项目，并在 iPad 上的 Safari 浏览器上运行。这是一个电子评估系统，学生可以在其中进行测验。此测验的问题将在一页上打印出来，然后通过单击“下一步”按钮跟随下一个问题。数据库中没有固定数量的问题，因此需要循环。发布标记的答案也是另一个关键问题。

任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:27:46.577

加载下一页所需要做的就是一个模板 jquery mobile 会识别。

```
<div data-role="page">
  <div data-role="header"><a href="/url/to/next/question">next</a></div>
  <div data-role="content">
    //put your question and answer here
  </div>
</div> 
```

在最后一页，您需要收集所有答案并使用 ajax 发布它们。您可以通过为所有答案提供一个类来轻松做到这一点`answer`，jqm 保留您过去页面的缓存副本以加快访问速度，您可以使用它。如果这不起作用，您可能必须在单击下一步时将答案保存到数组或对象中并对其进行序列化。

```
$.ajax({
  type: "POST",
  data: $('.answer').serialize(),
  url: "/post/answer/url"
}); 
```

# ruby-on-rails - 如何使用 Ajax 一次重新渲染超过 2 个部分

> ID：13934586
> 
> 赞同：0
> 
> 时间：2012-12-18T13:58:50.083
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery

我有一个rails应用，它由上面的导航、主要内容和侧边菜单三个部分构成。

我已经在我的主要内容中实现了关注取消关注按钮。
到目前为止，它与 Ajax 完美配合。

基本上，如果我按下跟随按钮，将调用 users_controller.rb 中的跟随动作并更改跟随标志，然后调用 follow.js 将跟随按钮重新渲染为部分。
除此之外，在侧面菜单中，它有 current_user 关注的人数。
此数字也应在执行后续操作后立即刷新。

一次刷新 2 个以上的局部。我该如何存档？

控制器/users_controller.rb

```
....

  def follow
    @user = User.find(params[:id])
    current_user.follow(@user)
    respond_to do |format|
      format.js {render :action=>"follow.js"}
    end
  end

  def unfollow
    @user = User.find(params[:id])
    current_user.stop_following(@user)
    respond_to do |format|
      format.js {render :action=>"unfollow.js"}
    end
  end

... 
```

意见/用户/follow.js.erb

```
$('.follow_user[data-user-id="<%=@user.id%>"]').html('<%= escape_javascript(render :partial => "users/follow_user", :locals => {:user => @user}) %>'); 
```

意见/用户/取消关注.js.erb

```
$('.follow_user[data-user-id="<%=@user.id%>"]').html('<%= escape_javascript(render :partial => "users/follow_user", :locals => {:user => @user}) %>'); 
```

视图/布局/_menu.html.erb

```
 <% if user_signed_in? %>
                  <li><%= link_to(following_user_path(current_user.username)) do %>
                  <i class="icon-heart"></i>Following
                  <%= '(' + current_user.all_following.count.to_s + ')' if current_user.all_following.count > 0 %>
                  <% end %>
                  </li>    

                  <li><%= link_to(followed_user_path(current_user.username)) do %>
                  <i class="icon-heart"></i>Followed by
                  <%= '(' + current_user.followers.count.to_s + ')' if current_user.followers.count > 0 %>
                  <% end %>
                  </li>
              <% else %>
                  <li><%= link_to sanitize('<i class="icon-heart"></i> ') + "Following", following_user_path %></li>                                            
                  <li><%= link_to sanitize('<i class="icon-heart"></i> ') + "Followed by", followed_user_path %></li>                                           

              <% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:10:55.140

您可以创建一个新操作，`render_to_string`将这两个部分都格式化为 json 对象：

`{
div_id_1: "<ul....." ,
div_id_2: "<div...."
}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:44:25.107

```
# dedicate partial _following_number.html.erb
<span id="following_number">
  <% if user.followers.count > 0 %>
    <%= '(' + user.followers.count.to_s + ')' %>
  <% end %>
</span>

# update layout with partial:

<li><%= link_to(followed_user_path(current_user.username)) do %>
<i class="icon-heart"></i>Followed by
  <%= render :partial => "following_number", :user => current_user %>
<% end %>

# follow.js.erb && unfollow.js.erb:
...
$(document).find("#following_number").replaceWith('<%= escape_javascript(render("following_number", :user => @user, :formats => [:html])) %>') 
```

使用助手更优雅：

```
def following_number(user)
  user.followers.count > 0 ? "(#{user.followers.count})" : nil
end

# then put spans to layout:
<span id="following_number"><%= following_number(current_user) %></span>

# and js:
$(document).find("#following_number").html('<%= escape_javascript(following_number(@user)) %>') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:11:08.973

一种简单的方法是从 rails 返回 a`.js`并让您的视图执行此脚本，该脚本将具有更新/替换视图的操作。

例如，这只是呈现三个部分，然后使用 jQuery 替换视图中的内容。假设该操作是`my_action`这样的，您将在您的中放置以下代码`my_action.js.erb`：

```
$("#content_1").html("<%= escape_javascript(render('partial_1'))%>");
$("#content_2").html("<%= escape_javascript(render('partial_2'))%>");
$("#content_3").html("<%= escape_javascript(render('partial_3'))%>"); 
```

此示例可以按照您想要或需要的方式进行扩展。您还可以为模型渲染 json 并调用函数在视图中更新它们。

# objective-c - 沿弧线变换路径

> ID：13934588
> 
> 赞同：4
> 
> 时间：2012-12-18T13:58:54.283
> 
> 标签：objective-c, xcode, path, core-animation, transformation

我试图沿着弧线变换路径。

我的项目在 osX 10.8.2 上运行，绘画是通过 CALayers 中的 CoreAnimation 完成的。

我的项目中有一个波形，它将由路径绘制。大约有 200 个采样点镜像到底部。这些每秒绘制 60 次并更新为歌曲位置。

请忽略白线，它只是一个旋转指示器。

![情况](../Images/136dda856fa3669ed7c7e5f5f86b3ac9.png)

我想要实现的是沿着弧线绘制波形。“上”应该指向中间。它不需要一路走来。波形应沿绿色圆圈绘制。请看下面提供的草图。

![我想达到什么](../Images/c97f0a3bfec8b61a8963ca0e3473928b.png)

我不确定如何以高效的方式实现这一目标。每秒有很多点需要坐标校正。

我试着想出一些我自己的想法：

1）有可能为路径添加线性变换，我认为这对我没有帮助。我唯一能想到的就是添加一个点，通过变换旋转路径，添加另一个点，旋转等等。但我认为这会很慢

2）将路径绘制成图像并弯曲它肯定会导致图像伪影。

3）也许最好的想法是预先计算弧上的样本点，然后将向量保存到中心。获取波形的 y 坐标，将它们放在样本点上，然后将它们沿矢量移动到中心。

但也许我只是没有看到某种简单的解决方案来解决这个问题。非常感谢您的帮助，非常欢迎新的想法。先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T01:29:08.833

恕我直言，最有效的方法（就 CPU 使用而言）是使用某种形式的预先计算的方法，该方法会考虑到显示器的分辨率。

**巧妙的预计算值**

我会进行数学转换（从线性到极坐标）并结合两个事实：

1.  无需进行广泛的数学计算
2.  无需渲染距离太近的两个点

我没有现成的算法供您使用，但您可以使用预先计算的 sin 或 cos 表，并将数据范围与显示大小相匹配，以便使用整数。

例如，假设我们有一些从 0 到 1E6 的数据，我们需要在 100 像素高度的矩形中显示每个点的 sin 值。我们可以使用预先计算的 sin 表并使用整数。这样显示一个点的 sin 值会快得多。这个概念可以被细化以获得更好的结果。此外，还有一些方法可以只保留曲线的重要点，以便显示的曲线实际上看起来像原始曲线（请参阅维基百科上的**Ramer-Douglas-Peucker 算法**）。但我发现快速显示不断变化的数据效率低下。

**使用多核渲染**

1.  您可以使用多个核心计算曲线的不同区域（可能很棘手）
2.  或者您可以使用多个核心进行预计算，并使用一个核心来完成这项工作。

# mysql - SQL中对列的操作

> ID：13934598
> 
> 赞同：2
> 
> 时间：2012-12-18T13:59:35.953
> 
> 标签：mysql, sql

我在 SQL 数据库中有一个表，其中一列包含字符“C”或“P”。我想定义一个新列，如果此字符为“C”，则值为 1，否则为零。

亲切的问候，丹尼尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:00:50.860

如果您想通过投影定义，请尝试

```
SELECT columnName, IF(columnName = 'C', 1, 0) newValue
FROM tableName 
```

作为 建议的替代方案`Michael Berkowski`，

```
SELECT columnName, (columnName = 'C') newValue
FROM tableName 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T14:01:53.207

```
SELECT
    your_fields,
    IF(your_column = 'C', 1, 0) AS new_field
FROM your_table 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T14:02:06.500

你想让它成为一个永久的专栏吗？如果是这样，请在表中创建一个默认值为 0 的新列。然后发出更新语句，如下所示：

```
UPDATE tableName SET newColumn = 1 WHERE oldColumn = 'C'; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-18T14:07:47.803

```
ALTER MY_TABLE ADD NEW_COLUMN INT
UPDATE MY_TABLE SET NEW_COLUMN=1 WHERE OTHER_COLUMN='C'
UPDATE MY_TABLE SET NEW_COLUMN=0 WHERE OTHER_COLUMN='P' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T14:08:58.133

```
INSERT
WHEN Col_name1='c' THEN
INTO your_Table (Col_name2)
VALUES (1)
WHEN Col_name1='P' THEN
INTO your_table (Col_name2)
VALUES (0);
SELECT * FROM your_Table; 
```

它会起作用的。

# c# - 从我的 ASP.net MVC 应用程序启动和停止 Windows 服务

> ID：13934611
> 
> 赞同：1
> 
> 时间：2012-12-18T14:00:19.393
> 
> 标签：c#, model-view-controller, windows-services

我在asp.net MVC 3.0中有一个MVC应用程序，我需要启动和停止一个服务，它只是文件处理服务，由我们制作，我添加了2个按钮来切换服务状态，启动和停止但出现异常，无法打开我的服务，

有人知道如何处理吗？也欢迎使用示例代码，我已经在网络配置中尝试了身份以及我的用户 ID 和密码，但它对我不起作用:(,

大佬们请帮帮我..

# scala - Scala 中的 Guice 和 Akka Actor

> ID：13934613
> 
> 赞同：1
> 
> 时间：2012-12-18T14:00:24.743
> 
> 标签：scala, dependency-injection, guice, akka, guice-3

我想减少绑定这些 akka 演员所需的样板文件。

目前，我的代码如下所示：

```
bind(classOf[ActorRef]).
  annotatedWith(Names.named("mines")).
  toProvider(new TypeLiteral[ActorProvider[MyActor]]() {}).
  asEagerSingleton() 
```

我也希望它看起来像：

```
bindActor[MyActor].withName("mines") 
```

我试图子类化`AbstractModule`以挤压这个概念，但无济于事。

相关代码：

```
class ActorProvider[T <: Actor] @Inject() ( val key:Key[T], val injector:Injector, val system: ActorSystem ) extends Provider[ActorRef] {
  def get = {
    system.actorOf(Props(injector.getInstance(key)))
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:58:47.083

查看[https://github.com/codingwell/scala-guice/](https://github.com/codingwell/scala-guice/)。这是一个基于它的示例。它允许

```
bindActor[MyActor].withName("mines") 
```

请记住，您绑定的是非泛型 ActorRef 而不是 Actor 本身。这将为@Named("foo") ActorRef 创建一个绑定。你永远不应该直接使用 Actor。

您无法在提供程序中获取密钥。提供者不会像您尝试使用密钥或注入点那样进行任何上下文注入。你可以做的是为每个actor绑定创建一个不同的提供者实例，然后用 ActorSystem 注入它。或者，您也可以更改 API 以包含参与者系统实例。

```
trait AkkaModule extends AbstractModule {
  // should be:
  // this: AbstractModule =>
  // see http://lampsvn.epfl.ch/trac/scala/ticket/3564
  import ScalaModule._

  private def binderAccess = super.binder // shouldn't need super

  def bindActor[T <: Actor](implicit m: Manifest[T]) = new ActorBindingBuilder {
    //Hack, no easy way to exclude the bind method that gets added to classes inheriting ScalaModule
    //So we experamentally figured out how many calls up is the source, so we use that
    //Commit 52c2e92f8f6131e4a9ea473f58be3e32cd172ce6 has better class exclusion
    val mybinder = binderAccess.withSource((new Throwable).getStackTrace()(3))
    val self = (mybinder bind classOf[ActorRef]).asInstanceOf[AnnotatedBindingBuilder[ActorRef]]
  }

}

object AkkaModule {

  class ActorProvider(val name: String) extends Provider[ActorRef] {
    @Inject var system: ActorSystem = _
    def get = {
      system.actorFor(system.name + "/user/" + name)
    }
  }

  trait ActorBindingBuilder {
    val mybinder: Binder
    val self: AnnotatedBindingBuilder[ActorRef]

    def withName(name: String) = {
      val provider = new ActorProvider(name)
      self.annotatedWith(Names.named(name)).toProvider(provider)
      mybinder.requestInjection(provider)
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:11:03.137

像这样利用 scala 类型 Manifest 的东西可能会起作用 [http://www.scala-lang.org/api/current/scala/reflect/Manifest.html](http://www.scala-lang.org/api/current/scala/reflect/Manifest.html) 其中 Foo 类似于 ActorRef 而 Bla 类似于 MyActor：

* * *

```
scala> import com.google.inject
import com.google.inject

scala> val binder:inject.Binder = null
binder: com.google.inject.Binder = null

scala> class Foo {}
defined class Foo

scala> class Bla extends Foo {}
defined class Bla

scala> def bind[T <: Foo:Manifest] = binder.bind( classOf[Foo] ).toProvider( new
 inject.TypeLiteral[inject.Provider[T]](){} ).asEagerSingleton
bind: [T <: Foo](implicit evidence$1: Manifest[T])Unit 
```

* * *

也许将其与隐式转换结合起来，将 Binder 转换为 MyBinder： [http ://daily-scala.blogspot.com/2009/08/implicit-methods.html](http://daily-scala.blogspot.com/2009/08/implicit-methods.html)

* * *

```
class MyBinder {
    def bindActor[T <: ActorRef:Manifest]( nameToBind:String ):Unit = ...
}

object MyBinder {
    implicit def binderToMyBinder( ...
} 
```

* * *

祝你好运！

# java - Java 将 Arraylist 转换为 JsonElement

> ID：13934619
> 
> 赞同：4
> 
> 时间：2012-12-18T14:00:41.987
> 
> 标签：java, ajax, json, gson

我想使用这种方法：

> ```
> json.add("myText", getList(id)); 
> ```

函数 getList(id) 返回一个数组列表，但方法 json.add 想要一个 JsonElement。

那么，如何在 JsonElement 中转换数组列表？

我对此进行了测试，但它不起作用：

> ```
> json.add("myText", (JsonElement)getList(id)); 
> ```

我也测试了这个：

> JsonElement jelement = 新的 JsonElement() {
> 
> ```
>  private ArrayList<String> list= new ArrayList<String>();
> 
>  public ArrayList<String> getList(){ 
>      return this.list;
>  } 
> ```
> 
> };

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T15:05:16.173

com.google.gson 具有序列化 ArrayList（或任何集合）的方法。序列化后，您可以使用 JSONParser 解析字符串：

```
JSONParser.parse(gson.toJson(getList(id))); 
```

参考：[https ://sites.google.com/site/gson/gson-user-guide#TOC-Array-Examples](https://sites.google.com/site/gson/gson-user-guide#TOC-Array-Examples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:13:23.290

你不能转换它，我也看不到用 API 方法转换它的方法。我认为您需要创建自己的方法将列表转换为数组。

例如

```
private JsonElement convertToJsonElement(List<Object> list) 
```

然后像这样调用它：

```
json.add("myText", convertToJsonElement(getList(id))); 
```

或者，如果您有权访问该`getList`方法，则可以将其更改为返回 JsonElement

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:03:05.390

我认为我们需要退后一步，了解您要做什么。

我假设您想在“myText”和其他对象数组之间创建映射。

为此，您只需调用 Gson.toJson(map) ，其中 map 将键 myText 和值保存为 List 或数组。换句话说：

```
Map<String, List<Object>> mapJson = new LinkedHashMap<String, List<Object>>();
mapJson.put("myText", getList(id));

String outputJson = Gson.toJson(mapJson); 
```

如果这不是您想要的，我恳请您解释您的目标，以便我们可以帮助您以 Gson 支持的方式而不是您想要的方式来实现它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-15T09:42:29.370

为了`JsonElement`摆脱 a `List`，您可以使用`JsonTree`：

```
List<String> myList = new ArrayList<>();
jsonObject.add("myList", gson.toJsonTree(myList)); 
```

# sql - 默认在sql日期时间列中插入空/空值

> ID：13934621
> 
> 赞同：16
> 
> 时间：2012-12-18T14:00:50.030
> 
> 标签：sql

如何在 SQL Server 中创建一个默认 DateTime 为空的表，而不是`1900-01-01 00:00:00.000`我得到的？

我的意思是，如果没有插入值，则默认值应该是 null、空等。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-18T14:03:41.553

> 如果没有插入值，默认值应该是null，empty

在表定义中，使该`datetime`列允许为空，而不是定义`NOT NULL`：

```
...
DateTimeColumn DateTime,
... 
```

> 我已经允许空变量了。

`NULL`然后，只需在此列中插入：

```
INSERT INTO Table(name, datetimeColumn, ...)
VALUES('foo bar', NULL, ..); 
```

或者，您可以使用[DEFAULT](http://msdn.microsoft.com/en-us/library/aa175912%28v=sql.80%29.aspx)约束：

```
...
DateTimeColumn DateTime DEFAULT NULL,
... 
```

然后你可以在语句中完全忽略它`INSERT`，它将与`NULL`值一起插入：

```
INSERT INTO Table(name, ...)
VALUES('foo bar', ..); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-15T21:10:38.097

即使您的列可以为空，插入一个空字符串也会将该值设置为 1900-01-01 00:00:00.000。让你插入真正的空值而不是字符串，那么数据库将存储一个空值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:03:24.550

1.  像这样定义它`your_field DATETIME NULL DEFAULT NULL`
2.  不要插入空白字符串，插入 NULL`INSERT INTO x(your_field)VALUES(NULL)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-27T21:40:39.890

Ozi，当你创建一个新的 datetime 对象时，如 datetime foo = new datetime(); foo 在构建参数化查询时使用时间 datetime.minvalue() 构建，您可以检查输入的值是否等于 datetime.minvalue()

- 只是一个侧面的想法。看来你有工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-28T13:30:08.670

今天早上我遇到了同样的问题。对于 DATE 或 DATETIME 字段，似乎无法插入空值。我通过首先检查一个空值（mydate =“”）来解决这个问题，如果它是空的，则在插入之前设置 mydate =“NULL”。

DATE 和 DATETIME 字段的行为方式与 VARCHAR 字段不同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-08T19:36:17.643

你可以这样使用：

```
string Log_In_Val = (Convert.ToString(attenObj.Log_In) == "" ? "Null" + "," : "'" + Convert.ToString(attenObj.Log_In) + "',"); 
```

# c# - 我可以将任意数量的命名参数传递给 C# 中的函数吗？

> ID：13934628
> 
> 赞同：8
> 
> 时间：2012-12-18T14:01:13.667
> 
> 标签：c#, function, named-parameters

`**kwargs`C# 中是否有某种相当于 Python 的东西？我希望能够将可变数量的命名参数传递给函数，然后将它们作为类似于字典的内部函数获取并循环它们。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-18T14:24:48.217

C# 中没有任何东西可以让您像这样传递任意命名参数。

您可以通过添加一个参数来接近`Dictionary<string, object>`，这可以让您执行类似但需要构造函数的操作，“参数名称”是字符串和一些额外的大括号：

```
static void Method(int normalParam, Dictionary<string, object> kwargs = null)
{
   ...
}

Method(5, new Dictionary<String, object>{{ "One", 1 }, { "Two", 2 }}); 
```

[你可以通过使用`ObjectToDictionaryRegistry`here](http://blog.andreloker.de/post/2008/05/03/Anonymous-type-to-dictionary-using-DynamicMethod.aspx)来接近，它允许你传入一个匿名对象，不需要你命名字典类型，将参数名称作为字符串传递或添加相当多的大括号：

```
static void Method(int normalParam, object kwargs = null)
{
    Dictionary<string, object> args = ObjectToDictionaryRegistry(kwargs);
    ...
}

Method(5, new { One = 1, Two = 2 }); 
```

但是，这涉及动态代码生成，因此会降低性能。

就语法而言，我怀疑你永远能够摆脱这需要的 `new { ... }' 包装器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T14:08:55.973

如果您特别想要一系列`KeyValuePairs`而不是值数组，您可以执行以下操作：

```
public class Foo
{
    public Foo(params KeyValuePair<object, object>[] myArgs)
    {
        var argsDict = myArgs.ToDictionary(k=>k.Key, v=>v.Value);
        // do something with argsDict
    }
} 
```

`myArgs`将是您可以迭代或转换为字典的数组，`KeyValuePair<object, object>`如上所示。`KeyValuePair<>`不过请注意，如果您使用相同的键传递多个 s ，则转换为字典可能会失败。在转换为字典之前，您可能需要提前进行一些检查。

你可以这样称呼它：

```
KeyValuePair<object, object> myKvp1 = new KeyValuePair<object, object>(someKey1, someValue1);
KeyValuePair<object, object> myKvp2 = new KeyValuePair<object, object>(someKey2, someValue2);
KeyValuePair<object, object> myKvp3 = new KeyValuePair<object, object>(someKey3, someValue3);

Foo foo = new Foo(myKvp1, myKvp2, myKvp3); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T14:12:41.887

是的。我相信，在 C# 4.0 中添加了使用可选参数和命名参数的能力。

[http://msdn.microsoft.com/en-us/library/dd264739(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dd264739(v=vs.100).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T14:02:54.120

```
void paramsExample(object arg1, object arg2, params object[] argsRest)
{
    foreach (object arg in argsRest)
    { /* .... */ }
} 
```

像这样称呼它，

```
paramsExample(1, 0.0f, "a string", 0.0m, new UserDefinedType()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T14:10:43.120

您可以使用参数列表作为函数的最终参数，如下所示：

```
void paramsExample(object arg1, object arg2, params object[] argsRest) {
    foreach (object arg in argsRest)
    { /* .... */ }
} 
```

可以使用任意数量的任意类型的参数调用该方法。

```
paramsExample(1, 0.0f, "a string", 0.0m, new UserDefinedType()); 
```

这是一个强类型参数，所以如果我想使用字符串列表，我可以这样做：

```
 public string Concat(string separator, params string[] strings) {
      string result = "";
      for (int i = 0; i < strings.Length; i++) {
          if (i > 0)
              result += separator;
          result += strings[i];
      }    
      return result;
 } 
```

调用：

```
MessageBox.Show(Concat("+", "Anders", "Eric", "Scott", "Duncan") + " = great team"); 
```

在此处查看更多信息：http: [//blogs.msdn.com/b/csharpfaq/archive/2004/05/13/how-do-i-write-a-method-that-accepts-a-variable-number- of-parameters.aspx](http://blogs.msdn.com/b/csharpfaq/archive/2004/05/13/how-do-i-write-a-method-that-accepts-a-variable-number-of-parameters.aspx)

# jquery - jquery ui sortable IE边框问题

> ID：13934632
> 
> 赞同：1
> 
> 时间：2012-12-18T14:01:39.843
> 
> 标签：jquery, html, css, jquery-ui, jquery-ui-sortable

我在对表格行进行排序时发现了奇怪的 IE 行为。如果在表格元素上应用了以下 css 样式

```
table {
    border-collapse: collapse;
} 
```

所有表格单元格的边框都消失了。

[小提琴示例](http://jsfiddle.net/hetBV/1/)

我也在 Chrome 和 FF 中检查过，但这个问题只发生在 IE 中。

也许可以在拖动的行上应用其他样式以在 IE 中显示边框？

# android - ActionBar Sherlock 覆盖所有屏幕

> ID：13934633
> 
> 赞同：0
> 
> 时间：2012-12-18T14:01:41.733
> 
> 标签：android, android-actionbar, actionbarsherlock

我刚刚在我的 Android 应用程序中实现了 Sherlock 的 ActionBar。

问题是：从图片中可以看出，我在 MainActivity 中加载的 Google Maps API v2 SupportMapFragment 完全被 actionBar 覆盖。我已经做了一些测试：加载一个不同的片段，例如一个简单的 SherlockListFragment，但结果是完全一样的，并且不要设置 setListNavigationCallbacks（因为问题可能是我的自定义 SpinnerAdapter）但 actionBar 总是涵盖所有屏幕，即使里面没有任何文字。

图片： [https ://www.dropbox.com/s/y0lnekjttdzv2xa/2012-12-18_14-45-43.png](https://www.dropbox.com/s/y0lnekjttdzv2xa/2012-12-18_14-45-43.png)

我的应用程序中的一些代码：

主.java

```
public class Main extends SherlockFragmentActivity implements ActionBar.OnNavigationListener 
{
private static final String STATE_SELECTED_NAVIGATION_ITEM = "selected_navigation_item";
private FragmentMappa fMappa;
private FragmentLinee fLinee;
private FragmentAtmInforma fAtm;

@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    fMappa = new FragmentMappa();
    fLinee = new FragmentLinee();
    fAtm = new FragmentAtmInforma();
    setContentView(R.layout.activity_main);

    int IdFixedHeader = -1;
    Utils.ImpostaActionBar(IdFixedHeader, this);

    getSupportFragmentManager().addOnBackStackChangedListener(getListener());
    getSupportFragmentManager().beginTransaction().replace(R.id.MainContainer, fMappa).commit();
    new downloadUtils().execute(0, this, true);
} 
```

实用程序.java

```
public static void ImpostaActionBar(int IdFixedHeader, SherlockFragmentActivity Act, String StrFixHead) {
    // Set up the action bar to show a dropdown list.
    ActionBar actionBar = Act.getSupportActionBar();
    actionBar.setDisplayShowTitleEnabled(false);
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    ArrayList<VoceListaMenuNav> Voci = new ArrayList<VoceListaMenuNav>();
    Voci.add(new VoceListaMenuNav(Act.getString(R.string.title_mappa), R.drawable.btn_show_map));
    Voci.add(new VoceListaMenuNav(Act.getString(R.string.title_linee), R.drawable.btn_compass_tilt));   
    Voci.add(new VoceListaMenuNav(Act.getString(R.string.title_percorso), R.drawable.fer));
    Voci.add(new VoceListaMenuNav(Act.getString(R.string.title_preferiti), R.drawable.btn_show_map));
    Voci.add(new VoceListaMenuNav(Act.getString(R.string.title_AtmInforma), R.drawable.btn_show_map));
    // Set up the dropdown list navigation in the action bar.
    actionBar.setListNavigationCallbacks(new AdapterListaMenuNav(Act.getSupportActionBar().getThemedContext(), Voci, IdFixedHeader, StrFixHead), (OnNavigationListener) Act);
    actionBar.setSelectedNavigationItem(IdFixedHeader);
} 
```

样式.xml

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
<style name="AppTheme" parent="Theme.Sherlock.Light.DarkActionBar">
    <!-- All customizations that are NOT specific to a particular API-level can go here. -->
    <item name="android:windowActionBarOverlay">true</item>
    <item name="android:windowActionModeOverlay">true</item>
    <item name="android:actionBarStyle">@style/ActionBar</item>
</style>

<color name="GrigioSemiTrasp">#af000000</color>

    <style name="ActionBar" parent="Widget.Sherlock.Light.Spinner.DropDown.ActionBar">
    <item name="android:background">@color/GrigioSemiTrasp</item>
</style>
</resources> 
```

我的自定义适配器：

```
public class AdapterListaMenuNav extends BaseAdapter
{
@Override
public View getView(int arg0, View arg1, ViewGroup parent) {
    View rowView = arg1;
    if (rowView == null)
    {
      rowView = inflater.inflate(R.layout.list_item_menu_nav_top, null);
      ViewHolderListaGenerica viewHolder = new ViewHolderListaGenerica();
      viewHolder.Titolo = (TextView) rowView.findViewById(R.id.ListaMenuNavTitolo);
      rowView.setTag(viewHolder);
    }
    if (FixedHeader == -1)
    {
        ViewHolderListaGenerica holder = (ViewHolderListaGenerica)rowView.getTag();
        VoceListaMenuNav f = LisVoci.get(arg0);
        holder.Titolo.setText(f.Titolo);
        return rowView;
    }
    else
    {
        ViewHolderListaGenerica holder = (ViewHolderListaGenerica)rowView.getTag();
        VoceListaMenuNav f = LisVoci.get(FixedHeader);
        holder.Titolo.setText(f.Titolo);
        return rowView;
    }
}

Context Ctx;
ArrayList<VoceListaMenuNav> LisVoci;
LayoutInflater inflater;
int FixedHeader;

public AdapterListaMenuNav(Context Cont, ArrayList<VoceListaMenuNav> ListaVoci, int IdFixedHeader, String StrFxHeader)
{
    LisVoci = ListaVoci;
    inflater = (LayoutInflater)Cont.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    Ctx = Cont;
    FixedHeader = IdFixedHeader;
}

@Override
public int getCount() {
    return LisVoci.size();
}

@Override
public Object getItem(int arg0) {
    return null;
}

@Override
public long getItemId(int arg0) {
    return 0;
}

@Override
public View getDropDownView(int arg0, View arg1, ViewGroup arg2) {
    View rowView = arg1;
    if (rowView == null)
    {
      rowView = inflater.inflate(R.layout.list_item_menu_nav, null);
      ViewHolderListaGenerica viewHolder = new ViewHolderListaGenerica();
      viewHolder.Titolo = (TextView) rowView.findViewById(R.id.ListaMenuNavTitolo);
      viewHolder.Immagine = (ImageView) rowView.findViewById(R.id.ListaMenuNavImage);
      rowView.setTag(viewHolder);
    }

    ViewHolderListaGenerica holder = (ViewHolderListaGenerica)rowView.getTag();
    VoceListaMenuNav f = LisVoci.get(arg0);
    holder.Titolo.setText(f.Titolo);
    holder.Immagine.setImageResource(f.IdImage);
    return rowView;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:25:29.077

我努力寻找任何东西，终于可以回答自己了。问题出在 ABS 样式继承自什么。正确的代码是：

```
<style name="ActionBar" parent="Widget.Sherlock.Light.ActionBar">
....
</style> 
```

# asp.net - 使用存储过程更新表信息

> ID：13934635
> 
> 赞同：-2
> 
> 时间：2012-12-18T14:01:44.493
> 
> 标签：asp.net, sql-server, visual-studio, stored-procedures

我有一个带有资产列表的数据库及其从表“tbl_info”中提取的信息，并且解决方案在 sql 中签出，但是在提交后它不会更新表。我不知道我错在哪里。我对存储过程和不错的 w/sql 相当陌生。

这是我的代码。

```
CREATE PROCEDURE [update_TBL_INFO_4]
(@ASSET_NUMBER  [nvarchar],
 @PORT_NUMBER   [nvarchar],
 @MACHINE_NAME  [nvarchar],
 @TYPE  [nvarchar],
 @BRANCH    [nvarchar],
 @BUILDING_NUMBER   [nvarchar],
 @FLOOR     [nvarchar],
 @ROOM_NUMBER   [nvarchar],
 @TELEPHONE_NUMBER  [nvarchar],
 @USERS     [nvarchar],
 @SERIAL    [nvarchar])

AS 
BEGIN
UPDATE [datasystems].[dbo].[TBL_INFO] 

SET  [ASSET_NUMBER]  = @ASSET_NUMBER,
 [PORT_NUMBER]   = @PORT_NUMBER,
 [MACHINE_NAME]  = @MACHINE_NAME,
 [TYPE]  = @TYPE,
 [BRANCH]    = @BRANCH,
 [BUILDING_NUMBER]   = @BUILDING_NUMBER,
 [FLOOR]     = @FLOOR,
 [ROOM_NUMBER]   = @ROOM_NUMBER,
 [TELEPHONE_NUMBER]  = @TELEPHONE_NUMBER,
 [USERS]     = @USERS,
 [SERIAL]    = @SERIAL 

WHERE 
( [ASSET_NUMBER]     = @ASSET_NUMBER AND
 [PORT_NUMBER]   = @PORT_NUMBER AND
 [MACHINE_NAME]  = @MACHINE_NAME AND
 [TYPE]  = @TYPE AND
 [BRANCH]    = @BRANCH AND
 [BUILDING_NUMBER]   = @BUILDING_NUMBER AND
 [FLOOR]     = @FLOOR AND
 [ROOM_NUMBER]   = @ROOM_NUMBER AND
 [TELEPHONE_NUMBER]  = @TELEPHONE_NUMBER AND
 [USERS]     = @USERS AND
 [SERIAL]    = @SERIAL)
END
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:04:35.717

由于您的`WHERE`子句检查*所有*参数，如果它们中的任何一个不同（即，当您传入更新的值时），`WHERE`则不会找到任何匹配的记录。

如果您定义了主键，请在`WHERE`子句中使用它并更新其余部分。否则，您可能还需要传入旧值以找到合适的匹配项。

**更新：**

主键为`ASSET_NUMBER`时，您需要更新不是主键的字段，并在`WHERE`子句中单独使用主键，如下所示：

```
UPDATE 
    [datasystems].[dbo].[TBL_INFO] 
SET  
    [PORT_NUMBER] = @PORT_NUMBER,
    [MACHINE_NAME] = @MACHINE_NAME,
    [TYPE] = @TYPE,
    [BRANCH] = @BRANCH,
    [BUILDING_NUMBER] = @BUILDING_NUMBER,
    [FLOOR] = @FLOOR,
    [ROOM_NUMBER] = @ROOM_NUMBER,
    [TELEPHONE_NUMBER] = @TELEPHONE_NUMBER,
    [USERS] = @USERS,
    [SERIAL] = @SERIAL 
WHERE 
    [ASSET_NUMBER] = @ASSET_NUMBER 
```

# knockout.js - foreach 绑定中的淘汰无线电组仅以一种方式工作

> ID：13934641
> 
> 赞同：0
> 
> 时间：2012-12-18T14:02:52.270
> 
> 标签：knockout.js

我正在使用 Knockout JavaScript 库 v2.2.0rc。

我想知道是否可以执行以下操作。

我的模板看起来像这样

```
<script type="text/html" id="@Html.UniqueId("WorkflowRulesDisplay_template")">
<div data-bind ="foreach: items">
    <fieldset>
        <legend>
            <span data-bind="text: StName"/>
        </legend>
        <dl class="row">
            <dt class="label">
                <label>Member Type:</label>
            </dt>
            <dd class="field">
                <div><input type="radio" value = "User" data-bind="attr :{name:'@Html.UniqueId("wf_usr_radio_grp_")' + StId, checked: CheckedUsr}"/>User</div>
                <div><input type="radio" value = "Group" data-bind="attr :{name:'@Html.UniqueId("wf_usr_radio_grp_")' + StId, checked: CheckedGrp}" />Group</div>
            </dd>
        </dl>
        <dl class="row">
            <dt class="label">
                <label>Description:</label>
            </dt>
            <dd class="field">
                <textarea rows ="5" cols="20" class ="textbox simple-text" data-bind="value: Description"></textarea>
            </dd>
        </dl>
    </fieldset>
</div> 
```

我的视图模型和初始化代码如下所示：

```
this._items = ko.observableArray(workflow.data('workflow_list_data'));
var viewModel = { items: this._items};
ko.applyBindingsToNode(this._containerElem.get(0), { template: { name:workflow.attr('id').replace('_workflow_control', '_template') } }, viewModel); 
```

workflow.data('workflow_list_data') 在哪里

```
data.Select(x => new { StName = x.StatusType != null ? x.StatusType.Name : string.Empty, StId = x.SuccessorStatusId, CheckedGrp = !x.GroupId.HasValue, CheckedUsr = !x.UserId.HasValue, x.UserId, x.GroupId, x.Description }); 
```

，所以客户端，我有这个：[Object{StName="lala", StId=123, CheckedGrp=false, CheckedUsr=true, Description="lala"}....{...}]

一切都很好，但广播组。更改所选按钮永远不会更改视图模型。我试过检查和属性值绑定 - 都一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:52:54.093

问题是，`CheckedUsr`并且`CheckedGroup`不是可观察的。
代替

```
this._items = ko.observableArray(workflow.data('workflow_list_data')); 
```

尝试

```
this._items = ko.mapping.fromJS(workflow.data);
// not sure what worflow.data is at this point? 
```

这应该从您的数据创建一个 observableArray，其属性设置为`ko.observable`

# iphone - 在 UIView 上具有透明度的 GPUImage 视频

> ID：13934643
> 
> 赞同：5
> 
> 时间：2012-12-18T14:02:56.800
> 
> 标签：iphone, ios, transparent, video-processing, gpuimage

我正在开发一个 iOS 项目，该项目使用 AV-Out 在第二个屏幕上的 1280x720 窗口中显示内容。

我有一个`MPMoviePlayerController`'s 视图作为背景，并在不同的其他元素（如`UIImages`和）之上`UILabels`。背景电影循环播放。

现在我想用另一个具有透明度的全屏动画覆盖整个视图，包括所有可见元素，这样只有底层视图的一部分是可见的。

我首先尝试了一个 png 动画`UIImageView`。我惊讶地发现它实际上可以在 iPhone5 上运行，但是当然 png 的大小太大了，以至于它使用了太多的内存，并且它在 iPhone4s 以下的所有东西上都会崩溃。所以我需要另一种方式。

我想出了如何使用 AVFoundation 同时播放第二部电影。到目前为止，一切都很好。现在我可以播放覆盖视频，但当然它还不是透明的。

我还了解到，通过该`GPUImage`库，我可以使用它`GPUImageChromaKeyBlendFilter`来过滤视频中的颜色以使其透明，然后将其与另一个视频结合起来。

我还不明白的是在我的情况下实现它以获得我想要的结果的最佳方法。

我可以使用顶部视频下方的整个视图层次结构作为第一个输入，`GPUImageChromaKeyBlendFilter`并使用绿屏风格的视频作为第二个输入，并以 720p 实时显示结果吗？我该怎么做？

`GPUImageChromaKeyFilter`还是使用并过滤绿屏风格的视频，并在所有其他视图之上的视图中播放它会更好吗？那么这个视频的背景会是透明的吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-24T05:28:09.960

您需要使用 AVFoundation.framework 构建自定义播放器，然后使用带有 alpha 通道的视频。AVFoundation 框架允许更强大的视频处理，而没有 MPMedia 框架的许多限制。构建自定义播放器并不像人们想象的那么难。我在这里写了一个教程：[http ://www.sdkboy.com/?p=66](http://www.sdkboy.com/?p=66)

另一种方式..........

框架中的 SimpleVideoFileFilter 示例展示了如何加载电影、对其进行过滤并将其编码回磁盘。修改它以执行色度键控给出以下内容：

```
NSURL *sampleURL = [[NSBundle mainBundle] URLForResource:@"sample" withExtension:@"m4v"];
movieFile = [[GPUImageMovie alloc] initWithURL:sampleURL];

filter = [[GPUImageChromaKeyBlendFilter alloc] init];
[filter setColorToReplaceRed:0.0 green:0.0 blue:1.0];
[filter setThresholdSensitivity:0.4];

[movieFile addTarget:filter];

UIImage *inputImage = [UIImage imageNamed:@"background.jpg"];
sourcePicture = [[GPUImagePicture alloc] initWithImage:inputImage smoothlyScaleOutput:YES];
[sourcePicture addTarget:filter];

NSString *pathToMovie = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/Movie.m4v"];
NSURL *movieURL = [NSURL fileURLWithPath:pathToMovie];
movieWriter = [[GPUImageMovieWriter alloc] initWithMovieURL:movieURL size:CGSizeMake(480.0, 640.0)];
[filter addTarget:movieWriter];

[movieWriter startRecording];
[movieFile startProcessing];

[movieWriter setCompletionBlock:^{
    [filter removeTarget:movieWriter];
    [movieWriter finishRecording];
}]; 
```

上面的代码将从应用程序的名为 sample.m4v 的资源中加载电影，将其输入到色度键过滤器中，该过滤器设置为纯蓝色，灵敏度为 0.4，附加背景图像以用于色度键控，然后然后将所有内容发送到电影编码器，该编码器将 Movie.m4v 写入应用程序的 /Documents 目录。

您可以调整阈值和特定的蓝色色调以满足您的需求，并根据需要将输入图像替换为另一部电影或其他来源。此过程也可以应用于来自 iOS 设备摄像头的实时视频，如果您愿意，可以将结果显示到屏幕上。

在运行 iOS 5.0 的 iPhone 4 上，640x480 帧视频的色度键控需要 1.8 毫秒 (500+ FPS)，720p 帧 (15 FPS) 需要 65 毫秒。较新的基于 A5 的设备比这些操作快 6-10 倍，因此它们可以毫不费力地处理 1080p 视频。我使用 iOS 5.0 的快速纹理缓存进行帧上传和检索，这可以加速该操作系统版本超过 4.x 的处理。

我对此的一个警告是，我还没有完全在我的电影编码中录制音频，但我现在正在努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T05:37:00.897

框架中的 SimpleVideoFileFilter 示例展示了如何加载电影、对其进行过滤并将其编码回磁盘。修改它以执行色度键控给出以下内容：

```
NSURL *sampleURL = [[NSBundle mainBundle] URLForResource:@"sample" withExtension:@"m4v"];
movieFile = [[GPUImageMovie alloc] initWithURL:sampleURL];

filter = [[GPUImageChromaKeyBlendFilter alloc] init];
[filter setColorToReplaceRed:0.0 green:0.0 blue:1.0];
[filter setThresholdSensitivity:0.4];

[movieFile addTarget:filter];

UIImage *inputImage = [UIImage imageNamed:@"background.jpg"];
sourcePicture = [[GPUImagePicture alloc] initWithImage:inputImage smoothlyScaleOutput:YES];
[sourcePicture addTarget:filter];

NSString *pathToMovie = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/Movie.m4v"];
NSURL *movieURL = [NSURL fileURLWithPath:pathToMovie];
movieWriter = [[GPUImageMovieWriter alloc] initWithMovieURL:movieURL size:CGSizeMake(480.0, 640.0)];
[filter addTarget:movieWriter];

[movieWriter startRecording];
[movieFile startProcessing];

[movieWriter setCompletionBlock:^{
    [filter removeTarget:movieWriter];
    [movieWriter finishRecording];
}]; 
```

上面的代码将从应用程序的名为 sample.m4v 的资源中加载电影，将其输入到色度键过滤器中，该过滤器设置为纯蓝色，灵敏度为 0.4，附加背景图像以用于色度键控，然后然后将所有内容发送到电影编码器，该编码器将 Movie.m4v 写入应用程序的 /Documents 目录。

您可以调整阈值和特定的蓝色色调以满足您的需求，并根据需要将输入图像替换为另一部电影或其他来源。此过程也可以应用于来自 iOS 设备摄像头的实时视频，如果您愿意，可以将结果显示到屏幕上。

在运行 iOS 5.0 的 iPhone 4 上，640x480 帧视频的色度键控需要 1.8 毫秒 (500+ FPS)，720p 帧 (15 FPS) 需要 65 毫秒。较新的基于 A5 的设备比这些操作快 6-10 倍，因此它们可以毫不费力地处理 1080p 视频。我使用 iOS 5.0 的快速纹理缓存进行帧上传和检索，这可以加速该操作系统版本超过 4.x 的处理。

我对此的一个警告是，我还没有完全在我的电影编码中录制音频，但我现在正在努力。

# c# - 与 Fluent NHibernate 的一对一或零关系

> ID：13934651
> 
> 赞同：1
> 
> 时间：2012-12-18T14:03:09.520
> 
> 标签：c#, nhibernate, fluent-nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

给定两个表：

```
 ___________
|Table1     |
|-----------|
|Id         |
|___________|
 ___________
|Table2     |
|-----------|
|Id         |
|Table1_Id  |
|___________| 
```

不必存在 Table2 记录的地方（即关系是*One{Table1}-to-OneOrZero{Table2}*）。

我需要能够使用映射到 Table1 的父类从两个表中保存和检索数据。

实体如下：

```
public class Table1
{
   int Id {get; set;}
   Table2 Table2 {get; set;}
}
public class Table2
{
   int Id {get; set;}
} 
```

...我创建了如下映射：

```
public class Table1Map
{
   this.Id(x => x.Id);
   HasOne(x => x.Table2).Cascade.All();
}

public class Table2Map
{
   this.Id(x => x.Id);
} 
```

...这适用于读取但不写入数据，因为它尝试将 NULL 插入`Table2.Table1_Id`列而不是从`Table1.Id`属性中获取。

有没有办法让插入工作而不必创建双向引用，即没有`Table1`属性 on `Table2 class`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:30:22.163

我最近在 SO 中遇到了这个问题。就关系而言，正如@Hacked 已经提到的那样，它不能是 HasOne，因为它们不共享一个公共主键。考虑使用 HasMany （不太确定），单向关系的缺失部分是`Not.KeyUpdate`

```
public class Table1Map
{
   this.Id(x => x.Id);
   HasMany(x => x.Table2)
   .Not.KeyUpdate() <--here
   .Cascade.All();   
} 
```

以下是参考链接

[单向一对多关系的 NHibernate 配置](https://stackoverflow.com/questions/4466153/nhibernate-configuration-for-uni-directional-one-to-many-relation/7601312#7601312)

[NHibernate 在插入后仍然会更新](https://stackoverflow.com/questions/11468668/nhibernate-still-issues-update-after-insert/11576097#11576097)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-18T14:07:15.640

通常，您只需使用`References`而不是`HasOne`. 看[，我认为您的意思是多对一，先生](http://www.jagregory.com/writings/i-think-you-mean-a-many-to-one-sir/)。

文章总结：`HasOne`，或者说一对一的关系，专门针对两个表共享一个主键的关系。

# javascript - 根据 W3C CR（显示：flex 等），当前的 CSS 灵活框布局模块是否有任何 polyfill？

> ID：13934654
> 
> 赞同：26
> 
> 时间：2012-12-18T14:03:14.647
> 
> 标签：javascript, css, flexbox

[Flexiejs.com](http://flexiejs.com/)有 CSS 弹性盒子的浏览器 polyfill，但它基于该主题的早期草案，与当前的 W3C 候选推荐[CSS 弹性盒子布局模块](http://www.w3.org/TR/css3-flexbox/)不兼容。CR 中定义的弹性盒是否有任何填充物，至少是部分填充物？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-10-03T12:21:43.240

## 2014年更新的答案

简而言之：在撰写本文时（2014 年 10 月），还没有实现 W3C 候选推荐的 javascript polyfill。

有 2 个 javascript polyfill 实现：

1.  `Flexie.js`自 2012 年中期以来几乎没有任何更新 -[请参阅贡献图](https://github.com/doctyper/flexie/graphs/contributors)- 并且*仅*支持**2009 Flexbox 模型**，这意味着一组有限的属性。

2.  `Reflexie.js`[在撰写本文时（2014 年 10 月）仍然没有受到影响，正如作者在项目主页上所说的那样，](https://github.com/doctyper/reflexie/tree/develop)`Ilya Streltsyn`正如另一个答案的评论中指出的那样，“它仍然'Sooooo not ready for prime-time'” 。最新提交于 2012 年 11 月 1 日...

**资源**

*   [Github 上的 Flexie.js](https://github.com/doctyper/flexie)
*   [Github 上的 Reflexie.js](https://github.com/doctyper/reflexie/tree/develop)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-09T11:56:03.420

目前没有实现 W3C 候选推荐的 polyfill。

flexie.js 的作者前段时间提到他正在努力更新 flexie.js，但从那时起就没有任何发布过。所以很难说它是否或何时会真正实现。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-15T05:24:30.397

Chris Coyier 提供了一个很棒的资源：

[http://css-tricks.com/using-flexbox/](http://css-tricks.com/using-flexbox/)

问题是 flexbox 使用了三个草稿。Chris Coyier 的文章介绍了所有三个版本以及如何将它们交错以实现跨浏览器支持。我摘录了下面的相关内容。

对于`display:flex`：

```
display: -webkit-box;      /* OLD - iOS 6-, Safari 3.1-6 */
display: -moz-box;         /* OLD - Firefox 19- (buggy but mostly works) */
display: -ms-flexbox;      /* TWEENER - IE 10 */
display: -webkit-flex;     /* NEW - Chrome */
display: flex; 
```

对于`flex:1`：

```
-webkit-box-flex: 1;      /* OLD - iOS 6-, Safari 3.1-6 */
-moz-box-flex: 1;         /* OLD - Firefox 19- */
width: 20%;               /* For old syntax, otherwise collapses. */
-webkit-flex: 1;          /* Chrome */
-ms-flex: 1;              /* IE 10 */
flex: 1;                  /* NEW, Spec - Opera 12.1, Firefox 20+ */ 
```

对于`order:1`：

```
-webkit-box-ordinal-group: 1;  
-moz-box-ordinal-group: 1;     
-ms-flex-order: 1;     
-webkit-order: 1;  
order: 1; 
```

他声称支持：

*   铬任何
*   火狐任何
*   Safari 任何
*   歌剧 12.1+
*   IE 10+
*   iOS 任何
*   安卓任何

我认为其余的 flexbox 属性没有经过修改，因此您可以只使用“标准”前缀集（`-ms`, `-moz`, `-webkit`, 无前缀）。

# java - LDAP 与 MYSQL .. JA-SIG CAS 与 LDAP 与 CAS 与 MySQL

> ID：13934661
> 
> 赞同：0
> 
> 时间：2012-12-18T14:03:29.353
> 
> 标签：java, spring, spring-security, ldap, cas

LDAP 与 MYSQL .. JA-SIG CAS 与 LDAP 与 CAS 与 MySQL。

现在我们在 LDAP 中有用户 ID、密码和角色，并且正在使用 CAS 和 Spring Secuirty。我的公司正在寻求从 LDAP 中删除数据并将其放入 MySQL。我很想听听关于为什么我们应该继续使用 LDAP 的评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:26:00.617

LDAP 是一种目录服务。它存在的主要目的是作为安全信息的存储库。尝试在 MySQL 中存储相同类型的信息基本上意味着复制 LDAP 已经提供的许多功能。通常，您会看到公司从自定义数据库解决方案迁移*到*目录服务——而不是相反。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:10:52.467

更多的系统，尤其是遗留系统，尤其是在 Unix 上的系统，可以轻松地使用 LDAP 作为他们的凭证存储。如果您使用或计划使用这些系统中的任何一个，您可以获得单一事实来源的好处，并为您的用户提供跨这些系统的共享凭证（即相同的用户名/密码）。

在这方面与 SQL 系统的接口并不普遍。

# iphone - 为模拟器构建 OpenEars 时出现重复符号错误

> ID：13934666
> 
> 赞同：1
> 
> 时间：2012-12-18T14:03:45.517
> 
> 标签：iphone, ios, speech-to-text, openears

我在一个 iPhone 应用程序中工作，我已经使用 OpenEars Framework 在 iPhone 中开发语音到文本的转换。最后我运行应用程序，我得到这样的错误：

```
 Duplicate symbol _cmu_syl_boundary in /Users/govindarajk/Desktop/VoiceCue/
      VoiceCue/Framework/OpenEars.framework/OpenEars(OpenEars) and 
      /Users/govindarajk/Library/Developer/Xcode/DerivedData/
      VoiceCue-kiterlaofyegpferrereruumjpbrhzeich/Build/Intermediates
      /VoiceCue.build/Debug-iphonesimulator/VoiceCue.build/Objects-normal/
      i386/cmu_lex.o for architecture i386 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:09:23.980

检查你可能有重复的框架，当一个框架被添加两次或一些其他更高或更低版本的框架已经添加到项目中时会发生此错误，希望对你有所帮助

# c# - 在 ASP.net MVC 4 中使用部分视图

> ID：13934671
> 
> 赞同：77
> 
> 时间：2012-12-18T14:04:14.067
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4, partial-views

我最近开始使用 ASP.net MVC (4)，但我无法解决我遇到的这个问题。我敢肯定，当您知道时，这很容易。

我实际上是在尝试在我的索引视图中执行以下操作：

1.  在索引视图中列出类型为“Note”的数据库中的当前项目（这很容易）
2.  在同一个索引视图中创建新项目（不是那么容易）。

所以我想我需要一个局部视图，并且我创建了如下（_CreateNote.cshtml）：

```
@model QuickNotes.Models.Note
@using (Html.BeginForm()) {
@Html.ValidationSummary(true)

<fieldset>
    <legend>Note</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.Content)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Content)
        @Html.ValidationMessageFor(model => model.Content)
    </div>
    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
} 
```

在我原来的索引视图（Index.cshtml）中，我试图呈现这个局部视图：

```
@model IEnumerable<QuickNotes.Models.Note>

@{
    ViewBag.Title = "Personal notes";
}

<h2>Personal notes</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>

<table>
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Content)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model) {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Content)
            </td>
            <td>
                @Html.ActionLink("Edit", "Edit", new { id=item.ID }) |
                @Html.ActionLink("Details", "Details", new { id=item.ID }) |
                @Html.ActionLink("Delete", "Delete", new { id=item.ID })
            </td>
        </tr>
    }
</table>

<div>
    @Html.Partial("_CreateNote")
</div> 
```

（使用：@Html.Partial("_CreateNote")）但是。这似乎不起作用，因为我收到以下错误消息：

```
Line 35: 
Line 36: <div>
Line 37:     @Html.Partial("_CreateNote");
Line 38: </div>

Source File: c:\Dropbox\Projects\workspace .NET MVC\QuickNotes\QuickNotes\Views\Notes\Index.cshtml    Line: 37 

Stack Trace: 

[InvalidOperationException: The model item passed into the dictionary is of type 'System.Data.Entity.DbSet`1[QuickNotes.Models.Note]', but this dictionary requires a model item of type 'QuickNotes.Models.Note'.]
   System.Web.Mvc.ViewDataDictionary`1.SetModel(Object value) +405487 
```

我的 NotesController 看起来像这样：

```
public ActionResult Index()
{

    var model = _db.Notes;

    return View(model);
}

//
// GET: /Notes/Create

public ActionResult Create()
{
    return View();
}

//
// GET: /Notes/_CreateNote - Partial view
public ViewResult _CreateNote()
{
    return View("_CreateNote");
} 
```

我认为这与索引视图以不同方式使用模型这一事实有关，如在@model IEnumerable 中，但无论我如何更改它，使用 RenderPartial、RenderAction、将 ActionResult 更改为 ViewResult 等，我都无法得到它工作。

任何提示将非常感谢！如果您需要更多信息，请告诉我。如果需要，我很乐意压缩整个项目。

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-12-18T14:08:49.733

将加载局部视图的代码更改为：

```
@Html.Partial("_CreateNote", new QuickNotes.Models.Note()) 
```

这是因为局部视图需要一个注释，但正在传递父视图的模型，即 IEnumerable

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-12-18T14:09:25.260

您将相同的模型传递给局部视图，就像传递给主视图一样，它们是不同的类型。该模型是`DbSet`s的一个`Note`，您需要传入一个`Note`.

您可以通过添加一个参数来做到这一点，我猜这是因为它的创建表单将是一个新的`Note`

```
@Html.Partial("_CreateNote", new QuickNotes.Models.Note()) 
```

# asp.net-mvc-3 - SignalR Hub's Groups dont work with long polling

> ID：13934676
> 
> 赞同：1
> 
> 时间：2012-12-18T14:04:33.927
> 
> 标签：asp.net-mvc-3, .net-4.0, signalr, signalr-hub

I have a Web App(.NET 4.0 ASP.NET MVC3) which uses SignalR(1.0.0 alpha 2) with Hubs and Persistent Connections.

With the Hubs I use groups to send push notifications to some clients.

The problem is that when the server is accessed remotely it defaults to long pooling and only the persistent connections work. With hubs the event happens on the server but my callback is not called at the client. It works locally, though it uses SSE.

What I found is that the combination of Grouping the clients and the long pooling transport is causing the problem. I will try to debug SignalR as long as I get VS2012.

To prove this I just got this [chat example](https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs) modified so a hard-coded group was used and long pooling was forced - it does not work, neither on my machine (IISExpress) nor on a server (IIS 7.5). The chat works as long as you use a different transport OR do

```
context.Clients.All.addMessage(message); 
```

instead of

```
context.Clients.Group(groupName).addMessage(message); 
```

[Here](http://tranzit.dir.bg/load.php?id=Q4r6N8xPMXjiMlr21440095) is a sample project.

Is that a bug in SignalR or I'm missing something?

Any ideas why on my deployment server SignalR would fall back to long polling on port 80 but use SSE if my site is configured on a different port?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T14:40:44.070

You need to enable Auto-Rejoining groups.

Stick this in your startup code:

GlobalHost.HubPipeline.EnableAutoRejoiningGroups();

# php - 数组从不等于变量的 2 个字段中推送 1 个值

> ID：13934688
> 
> 赞同：0
> 
> 时间：2012-12-18T14:05:08.577
> 
> 标签：php, mysql, sql

我有一个返回朋友列表的函数，唯一的问题是我想从 wallfriends.mem_id_from 或 wallfriends.mem_id_to 进行数组推送，具体取决于哪个不是 $user_id。

或者

我可以在 SQL 中完成所有操作吗？

有人知道我会怎么做吗？提前感谢您的帮助。

```
function returnFreinds($user_id)
{
    $recget = mysql_query("
    SELECT * FROM wallusers 
    INNER JOIN wallfriends ON wallusers.mem_id = ".( $user_id == "wallfriends.mem_id_to"?"wallfriends.mem_id_from":"wallfriends.mem_id_to")."
    WHERE ((wallfriends.mem_id_from =".$user_id.") OR (wallfriends.mem_id_to =".$user_id.")) AND wallfriends.confirm=1
    ");

    $friends_list = array();

    if (@mysql_num_rows($recget))
    {
        while ($named = @mysql_fetch_array($recget))
        {
            array_push($friends_list, $named['mem_id']);
        }

        $matches = implode(',', $friends_list);
    }
    else 
        $matches = 0;
    return $matches;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:24:42.943

根据我从您的问题中了解到的情况，您可以以`push`与构建 SQL 查询时相同的方式区分 at ing，可能类似于

```
while ($named = mysql_fetch_array($recget))
{
    array_push($friends_list,
               empty($named['mem_id_to']) ? $named['mem_id_from'] : $named['mem_id_to']
    );
} 
```

此外，建议不要抑制`@`操作员的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:30:15.367

不确定我的问题是否正确，但是如何拆分查询？

```
( SELECT * FROM wallusers 
  INNER JOIN wallfriends ON wallusers.mem_id = wallfriends.mem_id_from
  WHERE wallfriends.mem_id_to = ". $user_id .")
  AND wallfriends.confirm = 1 )
UNION
( SELECT * FROM wallusers 
  INNER JOIN wallfriends ON wallusers.mem_id = wallfriends.mem_id_to
  WHERE wallfriends.mem_id_from = ". $user_id. ")
  AND wallfriends.confirm = 1 ) 
```

# php - curl api没有响应任何东西

> ID：13934689
> 
> 赞同：1
> 
> 时间：2012-12-18T14:05:12.397
> 
> 标签：php, api, curl

我正在尝试为以下 API 编写 PHP 代码：

```
curl -u ********* -d email=tester@gmail.com \
--data-urlencode msg="First message from domain API" \
--data-urlencode url="http://www.domain.com/welcome" \
https://api.domain.com/1/send 
```

### PHP代码：

```
<?php
$url = "https://api.domain.com/1/send ";

$ch = curl_init();    

curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 

curl_setopt($ch, CURLOPT_URL, $url); 

curl_setopt($ch, CURLOPT_FAILONERROR, 1);

curl_setopt($ch, CURLOPT_USERPWD, "*********"); 

curl_setopt($ch, CURLOPT_POST, 1); // set POST method

curl_setopt($ch, CURLOPT_POSTFIELDS, "email=test@outlook.com&msg=hi%url=http://yahoo.com/"); // add POST fields

$result = curl_exec($ch); 

curl_close($ch); 

echo $result;       

?> 
```

我在处理上述 API 时做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:14:16.503

尝试这个：

```
curl_setopt($ch, CURLOPT_POSTFIELDS, urlencode("email=test@outlook.com&msg=hi&url=http://yahoo.com/")); 
```

可能还有其他错误（我无法轻松测试您的代码），但这应该会有所帮助。请注意，除了添加`urlencode`功能外，我还将 a 更改`%`为 a`&`

[这个问题也可能对你有所帮助。](https://stackoverflow.com/questions/5224790/curl-post-format-for-curlopt-postfields)

# c++ - C ++重载运算符<错误

> ID：13934690
> 
> 赞同：2
> 
> 时间：2012-12-18T14:05:30.260
> 
> 标签：c++, operator-overloading, constants

为什么我不`const`输入函数时会收到错误消息`bool operator<(const Node& otherNode) //const`？

```
stl_algo.h:91: error: passing 'const Node' as 'this' argument of 'bool Node::operator<(const Node&)' discards qualifiers 
```

所有重载的运算符都应该是常量吗？

```
class Node {
public:
    double coordinate;

    bool operator==(const Node& other) const{
        return coordinate == other.coordinate;
    }

    bool operator<(const Node& other) const{
        return coordinate < other.coordinate;
    }
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T14:06:45.463

不是所有的运营商，但`==`绝对`<`应该做`const`，是的。它们在逻辑上不会修改任何一个被比较的对象。

该错误可能来自从一个调用非`const`方法`const`，例如：

```
bool isSmaller(const Node& other) const
{
   return *this < other;
} 
```

在这种情况下，由于方法`isSmaller`is `const`，`this`隐含地是一个`const`对象，因此`operator <`也必须是`const`才能使该上下文中的调用有效。

从错误消息中，似乎`Node::operator <`正在`const`从一个函数调用一个对象`stl_algo.h`- 排序/排序函数、散列函数等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:11:15.600

比较运算符，例如`<`, `>`, `<=`, `>=`, `==`,`!=`应该`const`在一般情况下对对象进行操作，因为如果任何被比较的对象都可以通过比较来更改是没有意义的。但是您可以将比较声明为非成员函数，以确保两个操作数之间的对称性。

```
class Node {
public:
    double coordinate;
};
inline operator<(const Node& lhs, const Node& rhs)
{
  return lhs.coordinate < rhs.coordinate;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:15:02.183

您是否尝试删除该方法的 const 修饰符？此外，正如@LuchianGrigore 所建议的，您可以使用`this`关键字：

```
bool operator< (const Node& other) {
    return this.coordinate < other.coordinate;
} 
```

# c# - WPF/C# 不要阻塞 UI

> ID：13934697
> 
> 赞同：3
> 
> 时间：2012-12-18T14:06:00.143
> 
> 标签：c#, .net, wpf, backgroundworker, ui-thread

我有一个现有的 WPF 应用程序，它有几个部分。每个部分都是一个用户控件，它实现了一个接口。

该接口指定了两种方法：`void LoadData([...])`和`bool UnloadData()`。

这些方法是由 UI 线程调用的，所以如果很耗时，我们需要在 backgroundworker 中完成我们的工作。

没有问题，`LoadData`因为我们可以异步更新 UI。问题在于 UnloadData()。

如果我们真的可以离开当前视图，这应该会返回。

这是根据数据的当前状态计算的（已保存/已修改/无效）：

*   保存返回真，
*   无效询问您是要留下来保存一些正确的数据还是离开而不保存
*   修改后告诉您可以取消更改（返回 true），继续编辑（返回 false），或者保存当前数据（返回 true）

问题在于“修改->保存”。这是一种耗时的方法，因此为了尊重应用程序的理念，我们应该在后台线程中运行它（带有繁忙指示器）。

但是如果我们只是启动线程并进入下一部分，它会返回“true”给方法调用，我们将直接启动下一个视图。

就我而言，在保存本地数据之前加载下一个视图可能是个问题。

所以：

有没有办法在返回“true”之前等待后台线程完成，而不阻塞 UI？

```
public bool UnloadData(){
   if(...){
      LaunchMyTimeConsumingMethodWithBackgroundWorker();
      return true;//Only when my time consuming method ends
   }
   //[...]
} 
```

**重要编辑** 也许我不够清楚：我知道如何使用 BackgroundWorker 或 TPL。我的问题是父类（调用 UnloadData() 的类是我无法编辑的类（由于多种原因：它位于另一个不会重新加载的 DLL 中，它已经与 70 多个 userControls 一起使用，全部分开项目（dll），通过反射加载。

这不是我的选择，我觉得不好，但我现在必须处理它。我主要是在寻找让我的方法等待我的方法返回的方法。我不确定这是否可能。但我正在寻找一种解决方法，它可以让我节省数周的工作时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T14:12:50.870

好的，现在我很兴奋，因为我想我可能自己发现了一些东西......

所以，你要做的是：创建一个 DispatcherFrame，将该帧推送到 Dispatcher，然后在 RunWorkerCompleted 中将 Frame 的 Continue 设置为 false。

这是到目前为止的代码：

```
public void Function()
{
    BackgroundWorker worker = new BackgroundWorker();
    worker.DoWork += TimeConsumingFunction;
    var frame = new DispatcherFrame();
    worker.RunWorkerCompleted += (sender, args) =>
                                     {
                                         frame.Continue = false;
                                     };
    worker.RunWorkerAsync();
    Dispatcher.PushFrame(frame);
}

private void TimeConsumingFunction(object sender, DoWorkEventArgs doWorkEventArgs)
{
    Console.WriteLine("Entering");
    for (int i = 0; i < 3; i++)
    {
        Thread.Sleep(1000);
    }
    Console.WriteLine("Exiting");
}

private void ButtonBase_OnClick(object sender, RoutedEventArgs e)
{
    Function();
    Console.WriteLine("Returns");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T14:50:55.010

您应该实现 bool 类型的依赖属性“IsBusy”，在启动 BackgoundWorker 之前将其设置为 TRUE，然后在工作完成时设置为 FALSE。

在 UI 上，您可以绑定到该属性，无论您希望在处理期间禁用什么功能（例如用于加载下一个视图的按钮等）；或者可能显示“取消”按钮。

您不应该“等待”操作完成，您可以在 BackgroundWorker 将设置的附加变量中检索结果：

```
 BackgroundWorker _bw;
    bool _returnValue = false;

    private void button_Click(object sender, RoutedEventArgs e)
    {  // if starting the processing by clicking a button
        _bw = new BackgroundWorker();

        IsBusy = true;

        _bw.DoWork += new DoWorkEventHandler(_bw_DoWork);

        _bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(_bw_RunWorkerCompleted);

        _bw.RunWorkerAsync();
    }

    void _bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        IsBusy = false;

        // retrieve the result of the operation in the _returnValue variable
    }

    void _bw_DoWork(object sender, DoWorkEventArgs e)
    {
        _returnValue = UnloadData();
    }

    private bool UnloadData()
    {
        if (...)
        {
            LaunchTimeConsumingMethod();
            return true;
        }
        else
            return false;

        //etc ...
    }

    public bool IsBusy
    {
        get { return (bool)GetValue(IsBusyProperty); }
        set { SetValue(IsBusyProperty, value); }
    }

    // Using a DependencyProperty as the backing store for IsBusy.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty IsBusyProperty =
        DependencyProperty.Register( ... ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T15:07:50.723

您可以尝试使用 .NET 4.5 的新“[等待](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)”功能。

await 关键字允许您等待[Task](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)对象的完成，而不会阻塞 UI。

试试这个修改：

```
public async bool UnloadData()
{
    if(...)
    {
        await Task.Factory.StartNew(() => 
            {
                LaunchMyTimeConsumingMethod();
            });
        return true;//Only when my time consuming method ends
    }
    //[...]
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T15:06:42.357

将 UnloadData 视为异步操作，让 async/await 功能处理同步完成和需要异步完成的情况：

```
public async Task<bool> UnloadData(){
    if(...){
        // The await keyword will segment your method execution and post the continuation in the UI thread
        // The Task.Factory.StartNew will run the time consuming method in the ThreadPool
        await Task.Factory.StartNew(()=>LaunchMyTimeConsumingMethodWithBackgroundWorker());
        // The return statement is the continuation and will run in the UI thread after the consuming method is executed
        return true;
    }
    // If it came down this path, the execution is synchronous and is completely run in the UI thread       
    return false;
}

private async void button_Click(object sender, RoutedEventArgs e)
{
        // Put here your logic to prevent user interaction during the operation's execution.
        // Ex: this.mainPanel.IsEnabled = false;
        // Or: this.modalPanel.Visibility = Visible;
        // etc

        try
        {
            bool result = await this.UnloadData();
            // Do whatever with the result
        }
        finally
        {
            // Reenable the user interaction
            // Ex: this.mainPanel.IsEnabled = true;
        }
} 
```

**编辑**

如果您无法修改 UnloadData，则只需在 ThreadPool 上执行它，正如@BTownTKD 所述：

```
 private async void button_Click(object sender, RoutedEventArgs e)
{
        // Put here your logic to prevent user interaction during the operation's execution.
        // Ex: this.mainPanel.IsEnabled = false;
        // Or: this.modalPanel.Visibility = Visible;
        // etc

        try
        {

            // The await keyword will segment your method execution and post the continuation in the UI thread
            // The Task.Factory.StartNew will run the time consuming method in the ThreadPool, whether it takes the long or the short path
            bool result = await The Task.Factory.StartNew(()=>this.UnloadData());
            // Do whatever with the result
        }
        finally
        {
            // Reenable the user interaction
            // Ex: this.mainPanel.IsEnabled = true;
        }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T14:13:15.257

如果您的框架版本是 4.0，您可能应该使用 TPL：

```
var uiScheduler = TaskScheduler.FromCurrentSynchronizationContext(); // this will work only if you're running this code from UI thread, for example, by clicking a button
Task.Factory.StartNew(() => UnloadData()).ContinueWith(t => /*update ui using t.Result here*/, uiScheduler); 
```

希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T14:14:20.310

你必须实现一个回调函数（RunWorkerCompleted），它在后台工作完成时调用。

在此处查看示例：http: [//msdn.microsoft.com/en-us/library/cc221403 (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc221403(v=vs.95).aspx)

# excel - 弹出日历所需的 vba 编程支持

> ID：13934705
> 
> 赞同：1
> 
> 时间：2012-12-18T14:06:25.370
> 
> 标签：excel, calendar, userform, vba

我没有使用 vba 的经验，非常感谢您在实施弹出式日历用户表单方面的帮助。此链接将引导您到我试图在我的工作簿中引入的日历的来源：

[http://www.ozgrid.com/forum/showthread.php?t=142603](http://www.ozgrid.com/forum/showthread.php?t=142603)

我已将类模块、用户表单和模块复制到我的工作簿中。当我启动宏时，这会打开一个用户表单，我可以在其中选择日历上希望的日期。我想念的是能够将日历中选择的日期发送到我工作簿中的特定单元格。如果有人能指导我编写几行代码，将用户表单中选择的日期发送到我工作簿中的特定单元格，我将不胜感激！同样，我对此很陌生，所以如果我的解释中有任何不清楚的地方，请告诉我。我在这方面花了很多时间，所以非常感谢任何支持！对你来说可能只需要几分钟，但对我来说意义重大！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:41:06.067

试试这个[帖子](http://fontstuff.com/vba/vbatut07.htm)。似乎可以提供更好的使用指南`datepicker control`。但是，它显示了制作插件的编码。

因此，对你来说最基本的方法是，

*   添加表单
*   添加日期选择器控件
*   那里的代码

根据这篇[文章](http://www.vbaexpress.com/kb/getarticle.php?kb_id=21)。

**但请记住 Excel/Access 中的日历控件有时会因为[我的帖子中提到的这个原因](https://stackoverflow.com/questions/13409653/how-to-add-date-picker-to-vba-userform/13427901#13427901)**而消失。

如果您打算使用`date picker`控件，这里是将值从表单传递到您想要的任何地方的代码；）

```
Private Sub myDtPicker_Change()
Dim dtDateSelected as Date
   dtDateSelected = myDtPicker.Value
   '-- do anything else
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:11:30.057

该类将选定的日期写入文本框。选择日期后，您可以使用文本框的值来设置单元格的值。

```
Private Sub UserForm_Initialize()
    Set clsCal = New clsCalendar           'Initialize the Class'
    Set clsCal.Form(Me.TextBoxDate) = Me   'Tells the class to write the Selected date'
                                           '  into the textbox "Me.TextBoxDate"'
End Sub 
```

因此，在该示例中，每当您选择日期时，该类都会自动将所选日期存储在文本框中。

选择日期后，您可以使用以下代码将值添加到单元格：

```
 Range("A1").value=TextBoxDate.Value 
```

# c# - 如何分离 MemoryCache 上的对象引用

> ID：13934710
> 
> 赞同：15
> 
> 时间：2012-12-18T14:06:46.697
> 
> 标签：c#, memorycache

我目前正在尝试`MemoryCache`.Net 4 中的新功能，以在我们的一个应用程序中缓存一些数据。我遇到的问题是对象已更新，并且缓存似乎保留了更改，例如

```
public IEnumerable<SomeObject> GetFromDatabase(){
    const string _cacheKeyGetDisplayTree = "SomeKey"; 
    ObjectCache _cache = MemoryCache.Default;
    var objectInCache = _cache.Get(_cacheKeyGetDisplayTree) as IEnumerable<SomeObject>;
    if (objectInCache != null)
        return objectInCache.ToList();

    // Do something to get the items
    _cache.Add(_cacheKeyGetDisplayTree, categories, new DateTimeOffset(DateTime.UtcNow.AddHours(1)));

    return categories.ToList();
}

public IEnumerable<SomeObject> GetWithIndentation(){
    var categories = GetFromDatabase();

    foreach (var c in categories)
    {
        c.Name = "-" + c.Name;
    }

    return categories;
} 
```

如果我`GetWithIndentation()`先调用然后再调用，`GetFromDatabase()`我希望它返回原始列表，`SomeObject`而是返回修改后的项目（名称前有“-”）。

我以为`ToList()`破坏了参考，但它似乎仍然保留了更改。我敢肯定这很明显，但谁能发现我哪里出错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-14T11:14:01.830

我创建了一个 ReadonlyMemoryCache 类来解决这个问题。它继承自 .NET 4.0 MemoryCache，但对象以只读方式（按值）存储且无法修改。我在使用二进制序列化存储之前对对象进行深度复制。

```
using System;
using System.Collections.Generic;
using System.Collections.Specialized;
using System.IO;
using System.Runtime.Caching;
using System.Runtime.Serialization.Formatters.Binary;
using System.Threading.Tasks;

namespace ReadOnlyCache
{
    class Program
    {

        static void Main()
        {
            Start();
            Console.ReadLine();
        }

        private static async void Start() {
            while (true)
            {
                TestMemoryCache();
                await Task.Delay(TimeSpan.FromSeconds(1));
            }
        }

        private static void TestMemoryCache() {
            List<Item> items = null;
            string cacheIdentifier = "items";

            var cache = ReadonlyMemoryCache.Default;

            //change to MemoryCache to understand the problem
            //var cache = MemoryCache.Default;

            if (cache.Contains(cacheIdentifier))
            {
                items = cache.Get(cacheIdentifier) as List<Item>;
                Console.WriteLine("Got {0} items from cache: {1}", items.Count, string.Join(", ", items));

                //modify after getting from cache, cached items will remain unchanged
                items[0].Value = DateTime.Now.Millisecond.ToString();

            }
            if (items == null)
            {
                items = new List<Item>() { new Item() { Value = "Steve" }, new Item() { Value = "Lisa" }, new Item() { Value = "Bob" } };
                Console.WriteLine("Reading {0} items from disk and caching", items.Count);

                //cache for x seconds
                var policy = new CacheItemPolicy() { AbsoluteExpiration = new DateTimeOffset(DateTime.Now.AddSeconds(5)) };
                cache.Add(cacheIdentifier, items, policy);

                //modify after writing to cache, cached items will remain unchanged
                items[1].Value = DateTime.Now.Millisecond.ToString();
            }
        }
    }

    //cached items must be serializable

    [Serializable]
    class Item {
        public string Value { get; set; }
        public override string ToString() { return Value; }
    }

    /// <summary>
    /// Readonly version of MemoryCache. Objects will always be returned in-value, via a deep copy.
    /// Objects requrements: [Serializable] and sometimes have a deserialization constructor (see http://stackoverflow.com/a/5017346/2440) 
    /// </summary>
    public class ReadonlyMemoryCache : MemoryCache
    {

        public ReadonlyMemoryCache(string name, NameValueCollection config = null) : base(name, config) {
        }

        private static ReadonlyMemoryCache def = new ReadonlyMemoryCache("readonlydefault");

        public new static ReadonlyMemoryCache Default {
            get
            {
                if (def == null)
                    def = new ReadonlyMemoryCache("readonlydefault");
                return def;
            }
        }

        //we must run deepcopy when adding, otherwise items can be changed after the add() but before the get()

        public new bool Add(CacheItem item, CacheItemPolicy policy)
        {
            return base.Add(item.DeepCopy(), policy);
        }

        public new object AddOrGetExisting(string key, object value, DateTimeOffset absoluteExpiration, string regionName = null)
        {
            return base.AddOrGetExisting(key, value.DeepCopy(), absoluteExpiration, regionName);
        }

        public new CacheItem AddOrGetExisting(CacheItem item, CacheItemPolicy policy)
        {
            return base.AddOrGetExisting(item.DeepCopy(), policy);
        }

        public new object AddOrGetExisting(string key, object value, CacheItemPolicy policy, string regionName = null)
        {
            return base.AddOrGetExisting(key, value.DeepCopy(), policy, regionName);
        }

        //methods from ObjectCache

        public new bool Add(string key, object value, DateTimeOffset absoluteExpiration, string regionName = null)
        {
            return base.Add(key, value.DeepCopy(), absoluteExpiration, regionName);
        }

        public new bool Add(string key, object value, CacheItemPolicy policy, string regionName = null)
        {
            return base.Add(key, value.DeepCopy(), policy, regionName);
        }

        //for unknown reasons, we also need deepcopy when GETTING values, even though we run deepcopy on all (??) set methods.

        public new object Get(string key, string regionName = null)
        {
            var item = base.Get(key, regionName);
            return item.DeepCopy();
        }

        public new CacheItem GetCacheItem(string key, string regionName = null)
        {
            var item = base.GetCacheItem(key, regionName);
            return item.DeepCopy();
        }

    }

    public static class DeepCopyExtentionMethods
    {
        /// <summary>
        /// Creates a deep copy of an object. Must be [Serializable] and sometimes have a deserialization constructor (see http://stackoverflow.com/a/5017346/2440) 
        /// </summary>
        public static T DeepCopy<T>(this T obj)
        {
            using (var ms = new MemoryStream())
            {
                var formatter = new BinaryFormatter();
                formatter.Serialize(ms, obj);
                ms.Position = 0;

                return (T)formatter.Deserialize(ms);
            }
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:45:10.380

在内存中，缓存对象存储在与缓存客户端进程相同的进程空间中。当缓存客户端请求缓存对象时，客户端会收到对本地缓存对象的引用，而不是副本。

获得对象的干净副本的唯一方法是实现自定义克隆机制（ICloneable、序列化、自动映射......）。使用该副本，您将能够在不更改父对象的情况下更改新对象。

根据您的用例，通常不建议更新缓存中的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-12T11:31:16.407

如果您再次反序列化和序列化并获取缓存对象“按值”，则可以更轻松。

您可以使用 Newtonsoft lib 执行此操作（只需从 NuGet 获取）

```
var cacheObj = HttpRuntime.Cache.Get(CACHEKEY);
var json = JsonConvert.SerializeObject(cacheObj);
var byValueObj = JsonConvert.DeserializeObject<List<string>>(json);
return byValueObj; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-18T04:41:39.363

序列化/反序列化将解决问题，但同时它破坏了在内存中拥有对象的提议。缓存的作用是提供对存储对象的快速访问，我们在这里增加了反序列化开销。由于需要反序列化，我建议将缓存作为服务，例如 redis 缓存，它将是集中的，因此您不必为每个工作进程拥有内存对象的副本，并且反序列化无论如何都已完成。

在这种情况下，您选择快速序列化/反序列化选项的关键是。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-18T15:05:49.493

为什么不直接存储为 json 或字符串？这些不是通过引用传递的，当您从缓存中取出时，您将获得一个新副本:) 我在这里受到挑战，因为这就是我正在做的 atm！

# autohotkey - 使 AutoHotKey 忽略 Alt 作为菜单键

> ID：13934711
> 
> 赞同：11
> 
> 时间：2012-12-18T14:06:48.607
> 
> 标签：autohotkey

我正在尝试使用 autohotkey 在 PC（Windows）键盘上模拟 Mac 键盘的元素。我的肌肉记忆力达到了用于复制和粘贴等简单任务的 Command 键，所以我想将左侧的 alt+字母组合键重新映射到适当的 ctrl+字母。

```
<!c::Send ^c 
```

大部分时间它工作正常，除了部分时间在 IE 和 Office 应用程序中。按下左 Alt 时，它与 office 功能区/菜单一起拧紧（即菜单栏显示在 IE 中，或者功能区字母开始出现在 Office 2010 中），并且触发的 ctrl+字母组合没有到达目的地。

我已经阅读了 AHK 常见问题解答 + 论坛，尝试了几个带有 UP 和 $ 热键修饰符的选项，但它没有解决问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-04T07:30:51.663

这可以防止左侧 Alt 键激活大多数应用程序的菜单栏（在 Windows 7 和 AutoHotkey 1.1.11.01 下）：

```
~LAlt Up:: return 
```

它不适用于 Internet Explorer，但我不经常使用 IE。:)

顺便说一句，我还通过以下方式杀死了烦人的开始菜单弹出窗口：

```
~LWin Up:: return
~RWin Up:: return 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T14:48:46.913

利用

```
LAlt::LCtrl 
```

把它放到一个ahk文件中编译它并以管理员权限运行.exe

右键->以管理员身份运行

我在 Windows 7 上对其进行了测试，它工作正常，LAlt 不再在任何地方触发，它完全被 LCtrl 取代。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T20:33:10.647

刚刚在 Win-7 上检查了这个，它可以工作，即使是 IE。

```
00 00 00 00 00 00 00 00 03 00 00 00 1d 00 38 00 38 00 1d 00 00 00 00 00 00 
```

这是 SwapCtrlAlt.reg 文本。

```
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Keyboard Layout]
"Scancode Map"=hex:00,00,00,00,00,00,00,00,03,00,00,00,1d,00,38,00,38,00,1d,00,\
  00,00,00,00,00 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T15:45:16.500

听起来您需要通配符修饰符。如果您的热键与另一个键一起按下，这将使它如此。映射仍然有效。尝试以下方法：

```
*LAlt::LCtrl 
```

这将使任何+Key 组合`Alt`触发。`Ctrl``Alt`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T21:20:29.813

利用

```
LAlt::LCtrl 
```

这将替换`LAlt`为`LCtrl`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T03:42:34.727

您也可以交换两个按钮。

就像是：

```
LAlt::LCtrl
LCtrl::LAlt 
```

在我所做的有限测试中，它可以工作，但您可能需要重新学习一些窗口快捷键。它基本上只是交换两个按钮。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-18T20:58:22.917

恐怕 IE 的行为与大多数其他应用程序不同。您可以尝试以下说明。这不是 autoHotKey，而是 regedit 更改。顺便说一句，我检查了 ScanCodes 是否可以工作（SC38 用于 LAlt），但 IE 仍然忽略了这一点。

不确定这是否适用于 Vista/Win7/8，但值得一看。

[http://www.designcodeexecute.com/2006/11/04/swap-alt-and-ctrl-keys-in-windows-xp/](http://www.designcodeexecute.com/2006/11/04/swap-alt-and-ctrl-keys-in-windows-xp/)

# php - 为什么 cookie 中的 UUID/GUID 与我的代码中的不同？

> ID：13934713
> 
> 赞同：0
> 
> 时间：2012-12-18T14:07:00.207
> 
> 标签：php, mysql, cookies, guid, uuid

> **可能重复：**
> [在 setcookie() 之后立即访问 $_COOKIE](https://stackoverflow.com/questions/3230133/accessing-cookie-immediately-after-setcookie)

这类似于提到的问题，但是不仅反映了引用的问题，还反映了为什么从 mySQL 获取 b15 时会附加/删除。

如前所述，我对 PHP 有点陌生，所以我可能遗漏了一些非常基本的东西......

```
//Get a GUID from the database
$sql = "SELECT UUID(); ";
$result = mysql_query($sql, $con);
$row = mysql_fetch_row($result);
$mem_GUID = $row[0];
//... a heap of other work...
// Insert record into table
$cookie_UID = "SuperVal";
setcookie($cookie_UID, $mem_GUID);
echo "Test Cookies:" . $_COOKIE[$cookie_UID] . PHP_EOL;
...
<body>
<h2>Cookies</h2>
<?php print_r($_COOKIE); ?>
</body> 
```

当我查看 phpMyAdmin 中的数据时，GUID 值的末尾都有一个“b15”，而存储的 cookie 值没有……而且调试代码中报告的值也不是数学发送到数据库。

这是一个例子：

```
aa56f654-4918-11e2-beb2-00089bc30b15 - reported in browser
f5c9dfec-4919-11e2-beb2-00089bc30    - reportd in phpMyAdmin 
```

任何帮助都会很棒，因为我希望使用密钥在本地存储在 cookie 中，然后在用户单击注册参考以确认会员资格时读取。

干杯，

# html - 检测 HTML 文件中的视频容器

> ID：13934722
> 
> 赞同：0
> 
> 时间：2012-12-18T14:07:49.373
> 
> 标签：html, video-streaming, html-parsing

我有一个 HTML 文件（例如在 youtube 上），我想检测播放视频的“容器”。我不知道我是否使用了正确的终端。如果您需要任何进一步的解释，请发表评论。我希望在这个“容器”中找到一些元信息。另外我想知道，如何检测我打开的 HTML 页面是否托管了播放视频的“容器”。

# icons - actionbarsherlock 中的图标填充

> ID：13934726
> 
> 赞同：0
> 
> 时间：2012-12-18T14:08:07.830
> 
> 标签：icons, actionbarsherlock, padding

我在我的应用程序中使用了 actionbarsherlock，但它上面的图标没有按我想要的方式显示。如何更改图标的填充？我希望图像到达顶部底部和左侧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:45:45.350

我和你有同样的问题，我在[这里找到了答案](https://stackoverflow.com/a/14360503/807434)

> 只需制作一个可绘制的 XML 并将其放在资源文件夹“可绘制”中（无需任何密度或其他配置）。

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list
    xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:drawable="@drawable/my_logo"
        android:right="10dp"/>

</layer-list> 
```

> 最后一步是在清单中（或在活动中的 Actionbar 对象上）将此新的可绘制对象设置为徽标

# android - Android MediaPlayer 从 InputStream 中读取

> ID：13934727
> 
> 赞同：4
> 
> 时间：2012-12-18T14:08:11.433
> 
> 标签：android, android-mediaplayer

我需要为 Android 实现一个视频 DASH 客户端。

目前我没有找到任何解决方案，除了`InputStream`在临时文件中写入然后读取文件。当然，这种解决方案根本没有效率。我想用 an`OutputStream`作为`FileDescriptor`数据源。`FileDescriptor`但是如果不创建现有文件，我就无法使用有效的...

由于 DASH 协议，客户端负责获取所有（小）段，所以我真的需要找到一种直接从内存中读取媒体的方法。也许唯一的解决方案是使用 JNI，但我真的不知道如何。

要恢复，我愿意接受每一个建议。唯一的限制是：

*   起初我有一个`InputStream`
*   这里可以是任何中间操作，但尽可能高效
*   获取一个有效的输入来提供一个`MediaPlayer`

这似乎很基本，但我找不到任何方法来实现这一点。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T05:13:15.483

Derzu 是正确的，本地代理可以做到这一点。[在这里](https://stackoverflow.com/questions/12701249/getting-access-to-media-player-cache)查看我的答案。随意问任何问题。

# java - 中断java中的线程

> ID：13934728
> 
> 赞同：2
> 
> 时间：2012-12-18T14:08:12.060
> 
> 标签：java, multithreading, interrupt, future

我找到了这个解决方案来了解线程是否被中断。

```
public class OurThread extends Thread(){
    private volatile boolean stop = false;
    public void run(){
        while (!stop) {
             //Do your actions
        }
     }
 } 
```

但是我的 run 方法只执行一次，所以把它放在一个 while 循环中是没有意义的。我发现的另一种方法是检查 Thread.isInterrupted() 标志，然后终止线程。我的 run() 方法很长，所以我必须多次检查这种情况，这会使我的代码变脏。

我必须将它应用到四个不同的过程中，所以我试图找到一个更简单、更清洁的解决方案。我希望是否有类似的东西：

```
try{//my code}
catch(interrumption) 
```

问题是，由于我的线程被使用future.cancel（）打断了，所以我的run（）代码中没有抛出中断，所以我也不能这样做。

有什么建议吗？现在，如果线程已被取消，我会在代码之间检查很多次。谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T14:12:45.523

首先，不要扩展 Thread，你应该实现 Runnable 或 Callable。

其次，您可以添加一个方法，例如

```
static void checkInterrupt() {
    if(Thread.currentThread().isInterrupted()) 
         throw new IllegalStateException("Interrupted");
} 
```

并将其放在四个地方。这不会添加太多代码，也不会像不会停止的任务那样丑陋。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:22:19.493

您的任务（可运行或可调用）不能被中断，除非它具有响应中断的内置机制。这也取决于您的设计；比如，当确切的任务预计会被中断时。通常我们会在任务达到安全状态时进行。

因此，您检查是否收到中​​断，然后做出适当的响应。要重用代码，您可以使用@Peter 建议的方法。

# sql-server - 如何处理来自某些服务器可能处于非活动状态的多个服务器的查询

> ID：13934729
> 
> 赞同：0
> 
> 时间：2012-12-18T14:08:18.303
> 
> 标签：sql-server, timeout

我有一个存储过程，它遍历服务器列表并查询它们的主数据库。当这些服务器之一关闭时，存储过程查询超时。如何跳过对任何非活动服务器的查询，或者，如何捕获服务器超时并继续对剩余的活动服务器进行查询？我确实有一个带有 IsActive 列的服务器表，但是当服务器出现故障时，该值不会自动更改。目前，要查询的服务器列表基于表中的这个 IsActive 列。另一种解决方案可能是找到一种在服务器出现故障时自动更改 IsActive 列的方法，但我不知道该怎么做。有什么想法吗？

编辑：我在 SQL Server 2008 中做这一切

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:17:22.280

不要*从*引擎内部（链接服务器）执行此操作。

从外部进程查询。并行启动查询，并设置[连接超时](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.connecttimeout.aspx)。您的“查询”将立即获取所有信息，并且您只需等待*所有已关闭的服务器*，大致是您设置的超时时间，而不是*为每个已*关闭的服务器等待一次。我建议不要对连接进行“测试”，因为尝试连接**就是**测试。例如，如果您要遍历服务器并调用`sp_testlinkedserver`每个服务器，那么您最终可能会等待*更多*时间，因为测试仍然是序列化的，并且它们与尝试连接所花费的时间相同（这就是测试*所做*的，它会尝试连接）。

一个更好的解决方案是使用可靠的传输和异步消息传递，例如。[服务经纪人](http://msdn.microsoft.com/en-us/library/bb522893.aspx)。由于 programmign 模型是异步的，但消息传递是可靠的，因此无论服务器是否关闭，您都会在稍后重新上线时获得您想要的结果。

# ajax - ajaxAPI 中的 Shopify JSONP 问题

> ID：13934731
> 
> 赞同：1
> 
> 时间：2012-12-18T14:08:18.987
> 
> 标签：ajax, jsonp, shopify, defects

我从 shopify ajaxapi for jsonp 得到了一些奇怪的响应。

如果您卷曲 Shopify ajax api 位置

```
http://storename.domain.com/cart.json?callback=handler 
```

你会得到一个 jsonp 响应。但是有些东西在浏览器中破坏了相同的请求。

它似乎与压缩有关？以下是每个浏览器在尝试按照文档调用 jsonp 时的一些响应。

*   Firefox：您尝试查看的页面无法显示，因为它使用了无效或不受支持的压缩形式。
*   Internet Explorer：Internet Explorer 无法显示网页
*   Chrome/Safari/Webkit：无法解码原始数据，或失败（chrome）

尝试通过 jquery 使用：

```
$.getJSON('http://storename.domain.com/cart.json?callback=?', function(data) { ... });
// Results in a failed request, viewable network request panels of dev tools 
```

以下是 cURL 的一些输出，包括响应标头：

```
$ curl -i http://storename.domain.com/cart.json?callback=CALLBACK_FUNC

HTTP/1.1 200 OK
Server: nginx
Date: Tue, 18 Dec 2012 13:48:29 GMT
Content-Type: application/javascript; charset=utf-8
Transfer-Encoding: chunked
Connection: keep-alive
Status: 200 OK
ETag: cachable:864076445587123764313132415008994143575
Cache-Control: max-age=0, private, must-revalidate
X-Alternate-Cache-Key: cachable:11795444887523410552615529412743919200
X-Cache: hit, server
X-Request-Id: a0c33a55230fe42bce79b462f6fe450d
X-UA-Compatible: IE=Edge,chrome=1
Set-Cookie: _session_id=b6ace1d7b0dbedd37f7787d10e173131; path=/; HttpOnly
X-Runtime: 0.033811
P3P: CP="NOI DSP COR NID ADMa OPTa OUR NOR"

CALLBACK_FUNC({"token":null,"note":null,"attributes":{},"total_price":0,...}) 
```

此处也未回答相关： [https ://stackoverflow.com/questions/13750841/shopify-ajax-api-jsonp-supported](https://stackoverflow.com/questions/13750841/shopify-ajax-api-jsonp-supported)

谢谢

# java - 将 Jpanel 上的绘图另存为图像

> ID：13934734
> 
> 赞同：1
> 
> 时间：2012-12-18T14:08:28.253
> 
> 标签：java, image, swing, applet

我正在使用 java socket 开发一个绘图程序。多个用户可以绘制并将其保存为 jpeg。目前我的保存图像功能只保存一个空白画布。它不能保存绘制的坐标。

我在下面分享我的部分代码。=)

我没有为我的 Canvas 类使用 paint 或 paintComponent，因为使用 java 套接字时我遇到了发送坐标错误。相反，我正在使用 massDraw()。

```
 class Canvas extends JPanel {
    private int x, y;
    private float x2, y2;

    public Canvas() {
        super();
        this.setBackground(Color.white);
    }

    public void massDraw(int px, int py, int x, int y, int red, int green,
            int blue, int size) {
        Graphics g = canvas.getGraphics();
        Graphics2D g2d = (Graphics2D) g;
        g2d.setRenderingHints(myBrush);

        g2d.setStroke(new BasicStroke(size, BasicStroke.CAP_ROUND,
                BasicStroke.JOIN_BEVEL));
        g2d.setColor(new Color(red, green, blue));
        g.drawLine(px, py, x, y);

    }

}// end Canvas class 
```

SaveJpegOP 类

```
class saveJpegOP implements ActionListener {

    public void actionPerformed(ActionEvent e) {
        // Ask for file name
        String str = JOptionPane
                .showInputDialog(null, "Enter File Name : ");
        // save as jpeg
           BufferedImage bufImage = new BufferedImage(canvas.getSize().width, canvas.getSize().height,BufferedImage.TYPE_INT_RGB);  
           canvas.paint(bufImage.createGraphics());  

        try {
            ImageIO.write(bufImage, "jpg", new File(str + ".jpg"));
        } catch (IOException ex) {
            ex.printStackTrace();
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:18:35.120

空白画布被保存，因为从未调用过，尤其是在调用in`massDraw()`时不会调用它。`canvas.paint(bufImage.createGraphics())``saveJpegOP`

`paint()`基本上会**重绘整个组件**，并且由于您决定不覆盖它（或`paintComponent()`），`drawMass()`因此永远不会调用它并绘制空画布。

因此，您需要使用适当的参数覆盖`paintComponent()`和调用。`massDraw()`例如，参数值可以较早地设置为`Canvas`类中的属性。

# java - Java和J2ME计算比

> ID：13934736
> 
> 赞同：0
> 
> 时间：2012-12-18T14:08:30.560
> 
> 标签：java, java-me, double, decimal

大家好，我需要一些帮助来计算和显示比率结果。

**所以这是我正在处理的示例代码：**

```
 double a = 11;
    double b = 2508;
    double total1;
    double total2;

    total1 = a / b;

    System.out.println(total1); 
```

现在我得到的结果是 0.0043859649122807015 。但是，我只需要小数点后三位的“0.004”，并且要计算比率，我需要将“0.004”四舍五入为 1，那么我该怎么做呢？

**阶段2**

```
 double a = 11;
    double b = 2508;
    double total1;
    double total2;

    total1 = a / b;

    System.out.println(total1);

    total2 = 1/total1; //1 is equal a rounded 0.004 then devided by 0.004

    System.out.println(total2); 
```

但我不得不手动输入 1 来进行计算。有没有办法从第一次计算中存储总数 1？总计1 = a/b；. 所以我可以回叫它做一个“total2 =”A rounded 1 of 0.004”/total1;

最后打印出结果是250。

**小公式**

```
11/2508 = 0.004

0.004 = 1 

1/0.004= 250

1:250 
```

我曾尝试在 j2me 上使用小数格式，但它不支持它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:15:18.080

你需要一个数字格式化程序

[http://docs.oracle.com/javase/tutorial/java/data/numberformat.html](http://docs.oracle.com/javase/tutorial/java/data/numberformat.html)

```
System.out.format("%.3f%n", pi);     // -->  "3.142" 
```

也只是翻转你的公式。

2508/11 = 228

所以 1:228 比 1:250 更准确

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:23:54.447

您应该使用`Math.round()`和`Math.log10()`。

`log10`确定小数点的位置，具有`log10=0`for `1`。

所以，首先你计算小数点位置：

```
Math.log10(total1); 
```

这会给

```
-2.357934847000454 
```

用它来圆它`Math.round()`会给

```
-2 
```

这是您在计算中使用的数字。

最终代码是

```
 double a = 11;
    double b = 2508;
    double total1;
    double total2;

    total1 = a / b;

    System.out.println(total1);

    // determining point location
    long l = Math.round(Math.log10(total1));

    System.out.println(l);

    // moving point right
    total1 = total1 * Math.pow(10, -l+1);

    System.out.println(total1);

    // rounding
    total1 = Math.round(total1);

    System.out.println(total1);

    // moving point back
    total1 = total1 / Math.pow(10, -l+1);

    System.out.println(total1);

    total2 = 1/total1; //1 is equal a rounded 0.004 then devided by 0.004

    System.out.println(total2); 
```

**附言**

您还可以从中学到一些东西：[如何将浮点数转换为人类可读的分数？](https://stackoverflow.com/questions/95727/how-to-convert-floats-to-human-readable-fractions)

# android - 在特定设备上将视频附加到彩信意图失败

> ID：13934739
> 
> 赞同：0
> 
> 时间：2012-12-18T14:08:46.620
> 
> 标签：android, video, mms

我在通过 mms 意图附加视频文件（总是小于 100KB）时遇到问题。虽然这在 karbonn A21 (ICS 4.0.4) 上运行良好，但附件在 HTC one V (ICS 4.0.3) 和 lg-p920 (2.2.2) 上失败。我得到了“无法将视频附加到消息”之类的祝酒词

这是我的代码

```
Uri uri = Uri.fromFile(videoFile);

Intent sendIntent = new Intent(Intent.ACTION_SEND);
sendIntent.setType("video/3gp");
sendIntent.setClassName("com.android.mms", "com.android.mms.ui.ComposeMessageActivity");
sendIntent.putExtra("sms_body", "some text here");
sendIntent.putExtra(Intent.EXTRA_STREAM, uri);
startActivity(sendIntent); 
```

关于我能做什么的任何提示/线索/指针都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-19T04:01:40.187

这个问题是因为在视频/图像中需要添加到厨房：

读入代码

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/2.3.3_r1/com/android/mms/ui/ComposeMessageActivity.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/2.3.3_r1/com/android/mms/ui/ComposeMessageActivity.java)

关注 addAttachment 部分，我看到了

```
 String path = c.getString(c.getColumnIndexOrThrow(Images.Media.DATA));
    mSrc = path.substring(path.lastIndexOf('/') + 1);
    mContentType = c.getString(c.getColumnIndexOrThrow(
    mages.Media.MIME_TYPE));
    if (TextUtils.isEmpty(mContentType)) {
    throw new MmsException("Type of media is unknown.");
    }) 
```

我们看到消息抛出不清楚并引起误解。

要解决这个问题，您需要将文件添加到画廊，将 URI 从 contentResolver.insert 获取到 Intent，并使用键 Intent.EXTRA_STREAM

我在使用彩信时的另一个经验，默认的Activity类用于在设备和制造商之间发送彩信更改，因此setClass com.android.mms.ui.ComposeMessageActivity 并不总是正确的，它可能会导致ActivityNotFoundException。当它发生时，您必须调用 setPackge("com.android.mms") 并删除 setClass 调用。希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T06:44:44.347

到目前为止，我的方法是让用户通过 gmail、youtube 等分享视频，以及通过 mms 分享的选项

```
ContentValues content = new ContentValues(4);
content.put(Video.VideoColumns.TITLE, "Cool Video");
content.put(Video.VideoColumns.DATE_ADDED,
            System.currentTimeMillis() / 1000);
content.put(Video.Media.MIME_TYPE, "video/3gp");
content.put(MediaStore.Video.Media.DATA, videoFile.getAbsolutePath());

ContentResolver resolver = parentActivity.get().getContentResolver();

//I use two URI's. One for the intent with mms(MMSUri) and the   
//other(ShareURi) is for sharing video with other social apps like
//gmail, youtube, facebook etc. 
Uri ShareUri = resolver.insert(MediaStore.Video.Media.EXTERNAL_CONTENT_URI,content);
Uri MMSUri = Uri.fromFile(videoFile);

List<ResolveInfo> resInfo = getPackageManager().queryIntentActivities(sendIntent, 0);
if(!resInfo.isEmpty())
{
    for (ResolveInfo resolveInfo : resInfo) 
    {
        String packageName = resolveInfo.activityInfo.packageName;
        Intent targetIntent = new Intent(Intent.ACTION_SEND);
        targetIntent.setType("video/3gp");
        targetIntent.setPackage(packageName);

        if(packageName.contains("mms"))
        {
             targetIntent.putExtra("sms_body", "Some text here");
             targetIntent.putExtra(Intent.EXTRA_STREAM, MMSUri);
        }
        else
        {
            targetIntent.putExtra(Intent.EXTRA_SUBJECT, "I can has videos?");
            targetIntent.putExtra(Intent.EXTRA_TITLE, "Some title here");
            targetIntent.putExtra(Intent.EXTRA_TEXT,"You have gots to watch this");
            targetIntent.putExtra(Intent.EXTRA_STREAM, ShareUri);
        }
        targetedIntents.add(targetIntent);
    }           

    Intent chooserIntent = Intent.createChooser(targetedIntents.remove(0), "Select app to share");
    chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, targetedIntents.toArray(new Parcelable[]{}));

    startActivity(chooserIntent);
    return;
}

Toast.makeToast(this, "No intents found for this action", Toast.LENGTH_SHORT, Gravity.CENTER).show(); 
```

我尝试填充我自己的目标意图，`Intent.createChooser`因为只知道这些意图在附加/上传我的视频时起作用

**编辑：**我不会接受我自己的答案是正确的。我最乐观的是那里有更好的

# delphi - Delphi：如何确定以 kbps 为单位的下载速度？

> ID：13934746
> 
> 赞同：3
> 
> 时间：2012-12-18T14:08:58.850
> 
> 标签：delphi, delphi-xe2, wininet

我用wininet的一些功能下载文件：

```
 Url := source_file;

 destinationfilename := destination_file;
 hInet := InternetOpen(PChar(application.title), INTERNET_OPEN_TYPE_PRECONFIG,
   nil, nil, 0);
 hFile := InternetOpenURL(hInet, PChar(Url), nil, 0,
   INTERNET_FLAG_NO_CACHE_WRITE, 0);

 if Assigned(hFile) then
 begin
   AssignFile(localFile, destinationfilename);
   Rewrite(localFile, 1);
   repeat
     InternetReadFile(hFile, @Buffer, SizeOf(Buffer), bytesRead);
     BlockWrite(localFile, Buffer, bytesRead);
     current_size := current_size + bytesRead;
   until (bytesRead = 0) OR (terminated = True);
   CloseFile(localFile);
   InternetCloseHandle(hFile);
 end;
 InternetCloseHandle(hInet); 
```

我试图确定下载速度，但得到一些奇怪的值：

```
 ...
   repeat
     QueryPerformanceFrequency(iCounterPerSec);
     QueryPerformanceCounter(T1);

     InternetReadFile(hFile, @Buffer, SizeOf(Buffer), bytesRead);
     BlockWrite(localFile, Buffer, bytesRead);
     current_size := current_size + bytesRead;
     QueryPerformanceCounter(T2);

     _speed := round((bytesRead / 1024) / ((T2 - T1) / iCounterPerSec));

     download_speed := inttostr(_speed) + ' kbps';
   until (bytesRead = 0) OR (terminated = True);
   ... 
```

所以问题是我如何确定以 kbps 为单位的下载速度？提前感谢您的回答！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T15:14:34.197

除了缩写*kbps*是千位而不是千字节之外，您的代码对我来说看起来不错。您有传输的千字节数，您有传输时间，然后将这两个值相除。

这些数字会随着时间而波动。为了使数字平滑，您可能希望使用[移动平均](http://mathworld.wolfram.com/MovingAverage.html)线。

有多种因素会影响您的测量。例如，有多个有效缓冲层。如果 Delphi 文件缓冲区很大，那么一些对 的调用`BlockWrite`将简单地将内存从`Buffer`为 维护的内部缓冲区中复制`localFile`，而其他调用将包括将缓冲区刷新到磁盘。同样，操作系统可能有文件缓冲区，有时只会被写入。因此，您不仅要测量下载速度，还要测量磁盘 I/O 速度。增加 的大小`Buffer`将减少影响，因为您更有可能在每次迭代时耗尽文件缓冲区。移动平均线将抵消由累积和刷新缓冲区引入的变化。

服务器或您与服务器之间的某些路由器可能会限制速度，这可以解释为什么即使存在其他并发网络流量，您似乎也能获得相同的测量结果。

# uiviewcontroller - 从堆栈中删除 ViewController

> ID：13934748
> 
> 赞同：3
> 
> 时间：2012-12-18T14:09:05.433
> 
> 标签：uiviewcontroller, xamarin.ios, stack, mvvmcross

在我们的应用程序中，我们有一个登录`ViewController A`。在用户登录时，会自动调用请求导航以导航到下一个`ViewController B`. 但是，完成此操作后，我们希望`ViewController A`从堆栈中删除登录，这样用户就不能“返回”到登录视图，而是返回`ViewController`登录前的前一个视图。

我们考虑过在加载`ViewController A`时从堆栈中删除`ViewController B`，但是有更好的方法吗？

在我们设置的应用程序的 Android 版本中`history=no`（如果我没记错的话），然后它就可以工作了。

在 MonoTouch 和 MvvmCross 中是否有类似的方法来实现这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T12:21:28.703

我最终从导航控制器中删除了不需要的视图控制器。在`ViewDidDisappear()`我的登录中，`ViewController`我执行了以下操作：

```
public override void ViewDidDisappear (bool animated)
{
    if (this.NavigationController != null) {
        var controllers = this.NavigationController.ViewControllers;
        var newcontrollers = new UIViewController[controllers.Length - 1];
        int index = 0;
        foreach (var item in controllers) {
            if (item != this) {
                newcontrollers [index] = item;
                index++;
            }

        }
        this.NavigationController.ViewControllers = newcontrollers;
    }
    base.ViewDidDisappear(animated);
} 
```

这样，`ViewController`当从视图中删除不需要的内容时，我就可以删除它。我不完全相信这是否是正确的方法，但它工作得相当好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:43:34.630

这是一个很常见的场景......以至于我们在 MvvmCross 中包含了两种机制来允许这种情况......

1.  `ClearTop`所有 ViewModel 导航中可用的参数。
2.  在`RequestRemoveBackStep()`所有 ViewModel 中调用 - 尽管目前尚未在 iOS 中实现 - 抱歉。
3.  如果这还不够，那么第三种技术可能是使用自定义演示器来帮助您的显示逻辑。

* * *

### 要使用： 1.`ClearTop`所有 ViewModel 导航中都可用的参数。

要使用它，只需在导航时包含 ClearTop 标志。

这是一个布尔标志 - 所以要使用它只需更改：

```
this.RequestNavigate<ChildViewModel>(new {arg1 = val1}); 
```

到

```
this.RequestNavigate<ChildViewModel>(new {arg1 = val1}, true); 
```

`ClearBackStack`对于标准的简单导航控制器演示器，这将在显示新视图之前最终调用：

```
 public override void ClearBackStack()
    {
        if (_masterNavigationController == null)
            return;

        _masterNavigationController.PopToRootViewController (true);
        _masterNavigationController = null;
    } 
```

来自[https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Touch/Views/Presenters/MvxTouchViewPresenter.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Touch/Views/Presenters/MvxTouchViewPresenter.cs)

如果您没有使用标准导航控制器 - 例如，如果您有一个选项卡式、模式、弹出式或拆分视图显示，那么您将需要实现自己的演示逻辑来处理这个问题。

* * *

### 你不能： 2\. `RequestRemoveBackStep()`.

遗憾的是，在 iOS 的通用级别上实现这一点有点尴尬 - 所以目前该方法是：

```
 public bool RequestRemoveBackStep()
    {
#warning What to do with ios back stack?
        // not supported on iOS really
        return false;
    } 
```

来自[https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Touch/Views/MvxTouchViewDispatcher.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Touch/Views/MvxTouchViewDispatcher.cs)

对不起！我对此提出了一个错误 - [https://github.com/slodge/MvvmCross/issues/80](https://github.com/slodge/MvvmCross/issues/80)

* * *

### 3\. 你总是可以... 定制想法

如果您需要为您的 iOS 应用程序实现自定义功能，最好的方法是通过某种自定义 Presenter 逻辑来实现。

有很多方法可以做到这一点。

一个例子是：

*   对于需要清除前一个视图的任何视图或视图模型，您可以使用`[Special]`属性装饰视图或视图模型
*   在您的应用程序`Show`的自定义`Presenter`中，您可以观察该属性并在当时执行特殊行为

    ```
    public override void Show(MvxShowViewModelRequest request)
    {
        if (request.ViewModelType.GetCustomAttributes(typeof(SpecialAttribute), true).Any())
        {
            // do custom behaviour here - e.g. pop current view controller
        }

        base.Show(request);
    } 
    ```

显然其他机制可能是可用的 - 在这个阶段它只是 C# 和 UIKit 代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:29:03.740

我不知道 mvvm 但你可以简单地弹出没有动画的视图控制器（AC A），然后用动画推送新的视图控制器（AC B）

从 AC A 内部：

```
NavigationController.PopViewControllerAnimated(false);
NavigationController.PushViewController(new ACb(), true); 
```

# c# - 2D头像的难点

> ID：13934749
> 
> 赞同：0
> 
> 时间：2012-12-18T14:09:08.127
> 
> 标签：c#, xna

我尝试了本教程，但收到多条错误消息。

[http://what-when-how.com/xna-game-studio-4-0-programmingdeveloping-for-windows-phone-7-and-xbox-360/2d-avatars-using-render-targets-xna-游戏工作室 4-0 编程/](http://what-when-how.com/xna-game-studio-4-0-programmingdeveloping-for-windows-phone-7-and-xbox-360/2d-avatars-using-render-targets-xna-game-studio-4-0-programming/)

我只想画一个 2D 头像。

当前上下文中不存在名称“world” 当前上下文中不存在
名称“view” 当前上下文中不存在
名称“projection” 当前上下文中不存在名称“avatarRenderer” 该名称当前上下文中不存在“avatarAnimation”
如何修复错误？

```
public class Game1 : Microsoft.Xna.Framework.Game
{
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;
    RenderTarget2D renderTarget;

    public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
    }

    protected override void Initialize()
    {
        base.Initialize();
    }

    protected override void LoadContent()
    {  
        spriteBatch = new SpriteBatch(GraphicsDevice);
        renderTarget = new RenderTarget2D(GraphicsDevice, 512, 512, false, SurfaceFormat.Color, DepthFormat.Depth16);
        projection = Matrix.CreatePerspectiveFieldOfView(MathHelper.PiOver4, 1, 0.01f, 200.0f);

    }

    protected override void Update(GameTime gameTime)
    {

        base.Update(gameTime);
    }

    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.SetRenderTarget(renderTarget);
        GraphicsDevice.Clear(Color.Transparent);
        avatarRenderer.World = world;
        avatarRenderer.View = view;
        avatarRenderer.Projection = projection;
        avatarRenderer.Draw(avatarAnimation);
        GraphicsDevice.SetRenderTarget(null);
        GraphicsDevice.Clear(Color.CornflowerBlue);

        spriteBatch.Begin(SpriteSortMode.Deferred, BlendState.NonPremultiplied);
        spriteBatch.Draw(renderTarget, Vector2.Zero, Color.White);
        spriteBatch.End();

        base.Draw(gameTime);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:26:27.060

本教程应该添加到已经绘制 Avatar 的基础教程中。例如[这个](http://msdn.microsoft.com/en-us/library/dd940232.aspx)。

`world`,`view`和`projection`是要使用的变换矩阵。是`avatarRenderer`您可以从`AvatarDescription`.

# php - uploadify - 在页面上显示上传的图片

> ID：13934750
> 
> 赞同：0
> 
> 时间：2012-12-18T14:09:09.363
> 
> 标签：php, javascript, ajax, uploadify

我正在构建一个网站（在 php 中），它使用 uploadify 来允许用户上传投资组合图像。

我已经 uploadify 工作正常，但我只是想知道上传图片后在页面上显示上传图片的最佳方式。是否可以不刷新页面？

我在下面粘贴了我的上传代码：

```
<script>
    <?php $timestamp = time();?>
        var counter = 1;
        $(function() {
            $('#file_upload').uploadifive({ 
            onUploadComplete: function(event, queueID, fileObj, reponse, data) {
                //alert(counter);
                counter = counter +1 ;
                     },
                'buttonText'   : 'Upload Images...',
                'uploadLimit'  : 12,
                'uploadScript' : '/includes/uploadifive.php',
                'checkScript'  : '/includes/check-exists.php',
                'auto'         : true,
                'method'       : 'post',
                formData     : { 
                    'page_id' : '<? echo $pageDetails->row['page_id'] ?>',
                    'counter'    : counter,
                    'timestamp'  : '<? echo $timestamp;?>',
                    'token'      : '<? echo md5('unique_salt' . $timestamp);?>'
                 },

            });
        });
        </script> 
```

我不太确定如何从 uploadify 获取文件名

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:14:10.560

当然，您可以`img`通过 DOM 向页面动态添加元素：

```
var img = document.createElement('img');
img.src = "/path/to/the/new/img.png";
document.getElementById("somecontainer").appendChild(img); 
```

[实例](http://jsbin.com/ipivat/1)| [来源](http://jsbin.com/ipivat/1/edit)

您可能需要对服务器进行 ajax 调用以获取新图像的路径，除非这从您的应用程序逻辑中自然而然地消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:46:24.313

在我使用的版本中有一个功能

```
onUploadSuccess : function(file,data,response){
} 
```

然后我可以通过 file.name 获取文件名；因此，在您的代码中可能是 fileObj，您可以尝试 fileObj.name 来获取您上传的文件的名称。

# jquery - 绑定滑动点击事件jquery

> ID：13934755
> 
> 赞同：0
> 
> 时间：2012-12-18T14:09:34.650
> 
> 标签：jquery, click, swipe

我试图达到与单击计算机上的人相同的效果，但也可以通过在 ipad/iphone 上滑动来实现。这是目前我的功能的样子（这是用于图像滑块）

```
// Set the previous and next buttons
$('#suprflickrLB .lbImage .lbLeft').bind('click').click(function()  {
   $('#suprflickrLB').setLightboxData( 'prev', 'fade' );
   return false;
});
$('#suprflickrLB .lbImage .lbRight').bind('click').click(function() {
   $('#suprflickrLB').setLightboxData( 'next', 'fade' );
   return false;
}); 
```

我基本上希望人们能够在屏幕上“滑动”他们的手指，并且如果有意义的话，会发生与“点击”相同的过渡。我已经尝试了一些 jquery 插件来实现这个概念，但我对 jquery 不是很流利，所以我似乎无法让它工作。

如果我添加了 jquery 移动库，我可以做类似的事情吗

```
$('#suprflickrLB .lbImage .lbLeft').bind('click').click(function() {
  $('#suprflickrLB').setLightboxData( 'prev', 'fade' );
  return false;
});

$('#suprflickrLB .lbImage .lbRight').bind('click').click(function()  {
   $('#suprflickrLB').setLightboxData( 'next', 'fade' );
   return false;
});

// Set previous and next buttons for swiping
$('#suprflickrLB .lbImage .lbRight').bind('swipe').swipe(function() {
   $('#suprflickrLB').setLightboxData( 'next', 'fade' );
   return false;
});
$('#suprflickrLB .lbImage .lbLeft').bind('swipe').swipe(function() {
  $('#suprflickrLB').setLightboxData( 'prev', 'fade' );
  return false;
}); 
```

建议？先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:59:25.013

我不认为“swipe”是一个正确的事件，使用“swipeleft”或“swiperight”。

# python - 每天只运行 10k 个请求，第二天再运行 10k 个，依此类推

> ID：13934760
> 
> 赞同：-2
> 
> 时间：2012-12-18T14:09:52.763
> 
> 标签：python, api

我只是在做一些从一些 api 中获取一些数据的程序。我使用 yql 访问 yahoo geo 的东西以匹配一些 geonames id。例如：

```
def get_woeid(geonames_id):
  y = yql.Public()
  query = 'select * from geo.concordance where \
          namespace="geonames" and text="' + geonames_id + '"'
  result = y.execute(query)
  for row in result.rows:
      print row.get('woeid') 
```

此函数从数据库中获取 geonames_id，并请求将该 id 与来自 yahoo geo 的 woeid（地球上的 id）匹配。

问题是这个 api 东西每天只允许 10k 请求，所以我必须使用一些逻辑来获取 10k 请求并“等待”，第二天它将继续下一个 10k .. 我可以开始循环所有数据如果有 10k 个请求，那么做一些等待或睡眠直到第二天，然后做剩下的，但我认为这应该做得更好，但我真的不知道怎么做。

希望有人可以在这里提供帮助。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:54:59.650

好的，我会变成这样的。我将在每次查询后保存 id，并编写一个脚本来过滤缺少 woeid 的对象并查询它们（但不超过 10k），并每天使用 kronos 运行脚本。

谢谢大家 ：）

# html - .htaccess 阻止除我的 ip 之外的所有内容

> ID：13934768
> 
> 赞同：14
> 
> 时间：2012-12-18T14:10:09.427
> 
> 标签：html, apache, .htaccess

我正在尝试快速进行 htaccess 以阻止除我的 ip 之外的所有内容。

我有这个

```
 order deny, allow
    deny from all
    allow from "MY IP" 
```

“我的IP”是我的IP

我看不到我的 ip - 这是正确的方法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-18T17:53:29.427

最有效的方法是使用为该任务设计的指令将自己列入白名单。

```
Order Allow,Deny
Allow from 123.456.789.123 
```

其中 123.456.789.123 是您的静态 IP 地址。

使用“Order Allow,Deny”指令时，请求必须匹配 Allow 或 Deny，如果都不满足，则拒绝请求。

[http://httpd.apache.org/docs/2.2/mod/mod_authz_host.html#order](http://httpd.apache.org/docs/2.2/mod/mod_authz_host.html#order)

或者你可以像这样使用 mod_rewrite 来做到这一点。

```
RewriteEngine On
RewriteCond %{REMOTE_ADDR} !^123\.456\.789\.123$
RewriteRule .* - [F] 
```

请注意，如果您已经将规则放在此规则之上，则“RewriteEngine On”将是多余的。因此，如果是这种情况，您可以在这里丢弃它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-18T14:13:37.190

你有正确的语法：

```
order deny,allow
deny from all
allow from 127.0.0.1 
```

（注意：IP 地址周围没有引号）

如果在您认为您应该有权访问时被拒绝，您可能需要仔细检查您使用的 IP 地址是否正确。

例如，检查[http://www.whatsmyip.org/](http://www.whatsmyip.org/) - 也许你和服务器之间有一些东西，比如正在接收的代理，而不是你自己的 IP 地址。

# android - Android 应用程序在调试模式下工作，但在安装时不工作

> ID：13934769
> 
> 赞同：1
> 
> 时间：2012-12-18T14:10:12.950
> 
> 标签：android, proguard

我是 Android 开发新手，遇到了一个奇怪的问题。我正在尝试从 AsyncTask 中提取和显示日历事件。这在调试模式下工作，但如果我尝试通过 apk 安装应用程序，应用程序会因以下错误而崩溃：

```
12-18 08:57:16.768: E/AndroidRuntime(8642): FATAL EXCEPTION: AsyncTask #2
12-18 08:57:16.768: E/AndroidRuntime(8642): java.lang.RuntimeException: An error     occured while executing doInBackground()
12-18 08:57:16.768: E/AndroidRuntime(8642):     at     android.os.AsyncTask$3.done(AsyncTask.java:299)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at     java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at java.lang.Thread.run(Thread.java:856)
12-18 08:57:16.768: E/AndroidRuntime(8642): Caused by:     java.lang.IllegalArgumentException: unable to create new instance of class com.a.b.b.a.a.b     because it has no accessible default constructor
12-18 08:57:16.768: E/AndroidRuntime(8642):     at com.a.b.a.e.aa.a(Unknown Source)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at com.a.b.a.e.aa.a(Unknown Source)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at com.a.b.a.e.i.b(Unknown Source)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at com.a.b.a.d.g.a(Unknown Source)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at com.a.b.a.d.g.a(Unknown Source)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at com.a.b.a.d.g.a(Unknown Source)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at com.a.b.a.d.g.a(Unknown Source)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at com.a.b.a.d.g.a(Unknown Source)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at com.a.b.a.d.g.a(Unknown Source)                    12-18 08:57:16.768: E/AndroidRuntime(8642):   at com.a.b.a.d.g.a(Unknown Source)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at com.a.b.a.d.g.a(Unknown Source)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at com.a.b.a.d.f.a(Unknown Source)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at com.a.b.a.d.f.a(Unknown Source)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at com.a.b.a.c.t.a(Unknown Source)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at com.a.b.a.b.d.c.d(Unknown     Source)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at com.promevo.bookit.a.f(Unknown     Source)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at com.promevo.bookit.a.a(Unknown     Source)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at com.promevo.bookit.f.a(Unknown     Source)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at     com.promevo.bookit.f.doInBackground(Unknown Source)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at     android.os.AsyncTask$2.call(AsyncTask.java:287)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at     java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
12-18 08:57:16.768: E/AndroidRuntime(8642):     ... 5 more
12-18 08:57:16.768: E/AndroidRuntime(8642): Caused by: java.lang.InstantiationException: can't instantiate class com.a.b.b.a.a.b; no empty constructor
12-18 08:57:16.768: E/AndroidRuntime(8642):     at     java.lang.Class.newInstanceImpl(Native Method)
12-18 08:57:16.768: E/AndroidRuntime(8642):     at     java.lang.Class.newInstance(Class.java:1319) 
```

我正在打的电话：

```
Events feed = client.events().list(CalendarSampleActivity.getCalId()).setTimeMin(startPass)
        .setTimeMax(endPass).setSingleEvents(true).execute(); 
```

有人有想法么？提前致谢。

好的，经过一些故障排除后，使用 Proguard 时似乎出现了问题。如果我从我的 project.properties 文件中删除这一行，我的应用程序现在可以工作：

```
proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt:proguard-google-api-client.txt 
```

任何人都知道为什么这会有所作为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:25:56.557

在此处阅读有关 Proguard 和 Android 的信息：http: [//developer.android.com/tools/help/proguard.html](http://developer.android.com/tools/help/proguard.html)

由于您收到“无法访问的默认构造函数”异常，因此 Proguard 很可能已从包中删除了此构造函数，因为它找不到此构造函数的用户（Proguard 从包中删除了不可访问或未使用的代码以使其更小） . 您将不得不告诉 Proguard 将某些代码保留在包中，即使它显然没有被使用。

另一种选择是为发布版本禁用 Proguard。

# c# - 如何使用全名创建 CultureInfo 实例或将全名转换为 CultureInfo 代码？

> ID：13934774
> 
> 赞同：3
> 
> 时间：2012-12-18T14:10:36.583
> 
> 标签：c#

无论如何要使用完整的显示名称创建cultureInfo 对象的实例：

```
CultureInfo userCulture = new CultureInfo("Japanese (Japan)"); 
```

或将完整的显示名称转换为文化代码：

```
toCultureCode("Japanese (Japan)"); 
```

会回来 `"ja-JP"`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:15:23.713

没有内置的方法可以通过它的英文名称来获取文化，所以你可以写一个：

```
public static CultureInfo getCultureByEnglishName(String englishName)
{
    // create an array of CultureInfo to hold all the cultures found, 
    // these include the users local culture, and all the
    // cultures installed with the .Net Framework
    CultureInfo[] cultures = CultureInfo.GetCultures(CultureTypes.AllCultures & ~CultureTypes.NeutralCultures);
    // get culture by it's english name 
    var culture = cultures.FirstOrDefault(c => 
        c.EnglishName.Equals(englishName, StringComparison.InvariantCultureIgnoreCase));
    return culture;
} 
```

[**演示**](http://ideone.com/2DK70n)

`toCultureCode`是`ToString`：_

```
String name = "Japanese (Japan)";
CultureInfo japanCulture = getCultureByEnglishName(name);
Console.Write(japanCulture.ToString()); // -> "ja-JP" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T14:19:41.097

您可以使用 Linq

```
using System.Linq;

CultureInfo culture = CultureInfo.GetCultures(CultureTypes.AllCultures).FirstOrDefault(c => c.DisplayName == "Japanese (Japan)"); 
```

# delphi - 透明度和运行时主题

> ID：13934782
> 
> 赞同：1
> 
> 时间：2012-12-18T14:10:54.923
> 
> 标签：delphi, themes, transparency, c++builder-xe2

当为整个项目禁用运行时主题时，将使用黑色背景绘制透明图像。禁用运行时主题时是否可以在按钮上绘制透明图像？我使用的按钮来自 TMS 组件包，它的类名是`TAdvToolButton`. 我需要禁用主题，因为我想完全控制应用程序的外观。这是一个重要的要求。请尝试解释透明度和主题之间的联系，因为我看不到它。我认为这是两个不同的东西。

# iphone - 如何计算具有相同类型子对象的自定义对象的深度？

> ID：13934787
> 
> 赞同：1
> 
> 时间：2012-12-18T14:11:07.647
> 
> 标签：iphone, objective-c, ios, tree

我有一个名为 CEKnot 的对象，它有一个名为 subknots 的属性，它是一个类似 CEKnot 对象的数组。现在我想计算这棵树的深度。这不是二叉树，因为子结可以超过两个。这是我尝试过的代码..

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    CEProjectDTO* project = [self.tblViewDatasource objectAtIndex:indexPath.row];

    CEServiceSession *serviceSession = [CEServiceSession new];

    [CEProgressHUD showWithTitle:@"Loading..."];

    [serviceSession.projectPhaseService getProjectPhasesWithProjectID:project.i3D onFinish:^(NSArray * phaseList){
        self.phaseDTOList = phaseList;
        NSLog(@"Count is %d",[self.phaseDTOList count]);
        [CEProgressHUD hide];
    }onError:^(NSString *title, NSString *message) {
        [CEProgressHUD hide];
        [CEAlertViewHelper showOKAlertViewWithTitle:title message:message];
    }];
    self.mindMapLevelObjectCount = nil;
    self.mindMapLevelObjectCount = [[NSMutableDictionary alloc] init];
    self.level  = 1;

    self.numberOfKnotsOnThisLevel = 0;

    CEProjectToKnotConverter* converter = [CEProjectToKnotConverter new];
    CEProjectKnot* baseKnot = [converter convertProject:project withPhases:self.phaseDTOList];

    self.numberOfKnotsOnThisLevel = self.numberOfKnotsOnThisLevel + [baseKnot.subKnots count];
    [self.mindMapLevelObjectCount setObject:[NSNumber numberWithInt:self.numberOfKnotsOnThisLevel] forKey:[NSString stringWithFormat:@"%d",self.level]];
    self.numberOfKnotsOnThisLevel = 0;

    self.level  = 2;

    [self calculateMindMapLevels:baseKnot];

    NSLog(@"MIND MAP LEVEL OBJE %@", self.mindMapLevelObjectCount);

    CEMindMapViewController *mindMapViewController = [[CEViewControllerManager sharedInstance] createViewController:[CEMindMapViewController class]];
    mindMapViewController.baseKnot = baseKnot;
    [self presentModalViewController:mindMapViewController animated:YES];

}
-(void)calculateMindMapLevels:(CEKnot*)projectKnot{

    for (CEKnot* subKnot in projectKnot.subKnots) {
        self.numberOfKnotsOnThisLevel = self.numberOfKnotsOnThisLevel + [subKnot.subKnots count];
        NSLog(@"Level %d total of nots %d  project not subknot %d", self.level,self.numberOfKnotsOnThisLevel, [subKnot.subKnots count]);
    }
        [self.mindMapLevelObjectCount setObject:[NSNumber numberWithInt:self.numberOfKnotsOnThisLevel] forKey:[NSString stringWithFormat:@"%d",self.level]];

    for (CEKnot* subKnot in projectKnot.subKnots) {
        [self calculateMindMapLevels:subKnot];
        self.numberOfKnotsOnThisLevel = 0;
    }
    self.level = _level +1;

} 
```

我没有正确获得深度并尝试了多种算法但无法正确获得深度。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:40:29.917

只要您的树不存储其深度，您就必须获取每个结的级别并返回最高值。

一种递归的未经测试的方法

```
int numberOfLevels(CEKnot *knot, int parentLevel) {
  int ownLevel = parentLevel+1;
  int highestLevel = ownLevel;
  for (CEKnot* subKnot in knot) {
    int subLevel = numberOfLevels(subKnot, ownLevel);
    highestLevel = MAX(highestLevel, subLevel);
  }
  return highestLevel;
} 
```

# iphone - 在 Xcode 中找不到 -lstdc++ 的库

> ID：13934790
> 
> 赞同：1
> 
> 时间：2012-12-18T14:11:16.850
> 
> 标签：iphone, objective-c, ios, xcode, opencv

我在我的应用程序中使用 openCV2.framework。它在模拟器中运行良好，但不适用于 iOS 设备。它得到以下错误

```
ld: library not found for -lstdc++
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我还添加了其他链接标志...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:30:10.937

尝试使用 libc++ 而不是 stdc++。(lib)std++ 采用 GPLv3，因此 Apple 正在推动 libc/c++。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-19T13:47:36.403

我正在回答我自己的问题。我通过添加 go to Target -> BuildSettings ->search Path -> library Searchpath 解决了这个问题

给出添加动态库**Path**的正确路径。

现在它可以工作了

# c# - 为什么我的代码在获取我的 xml 结束之前执行？

> ID：13934793
> 
> 赞同：0
> 
> 时间：2012-12-18T14:11:28.097
> 
> 标签：c#, windows-8, open-graph-beta

我正在开发 Windows 8 Metro 应用程序，并且正在开发 VS Ultimate。

我成功地在网页上获取了 XML，我想用 LINQ to XML 解析它。当我使用本地 xml 文件执行此操作时，它可以工作，但是当我使用我下载的那个时，它就不行了。我试图通过打印我得到的 xml 来调试它，它是正确的。我认为这是因为我们使用异步方法来获取 xml，解析在提取结束之前开始。有人对我有解决方案吗？我在网上查了很多，但没有什么真正有帮助的。编码 ：

```
XDocument loadedData = new XDocument();
List<Data> listeData = new List<Data>();

var httpResponse = await new HttpClient().GetAsync("http://api.allocine.fr/rest/v3/search?partner=YW5kcm9pZC12M3M&filter=movie,person&count=1&page=1&q=avatar&format=xml");
string sourceCode = await httpResponse.Content.ReadAsStringAsync();
XDocument doc = XDocument.Parse(sourceCode);
listeData = (from query in doc.Descendants("movie")
       select new Data {
              OriginalTitle = (string) query.Element("originalTitle"),
                    Title = (string) query.Element("title"),
                    ProductionYear = (string) query.Element("productionYear"),
                    Cover = (string) query.Element("cover"),
                                        Resume = (string) query.Element("resume")
                    }).ToList();
var group1 = new SampleDataGroup("Group-1", "Tous Mes Films", "", "Assets/icone_groupe_all_movies.jpg",
                                             "Films sur le DD");
foreach (Data dataList in listeData) {
          group1.Items.Add(new SampleDataItem("Group-1-Item-1", dataList.Title, "", dataList.Cover, "",
                                                    dataList.Resume, group1));
}
this.AllGroups.Add(group1); 
```

十分感谢大家 ！

# windows-phone-7 - WP7 HubTile 上的透明图像背景

> ID：13934794
> 
> 赞同：0
> 
> 时间：2012-12-18T14:11:31.407
> 
> 标签：windows-phone-7, silverlight-toolkit

我有一组带有用户选择图像的 HubTiles。如果选择了具有透明度的图像，则 HubTile 的背景颜色 (PhoneAccentBrush) 会显示出来。有没有办法在不改变动画背景的情况下将照片背景设置为透明？（虽然如果标题显示在透明背景上，这是可以接受的，但我仍然希望反面使用强调色。）

我已经对 HubTile 的样式进行了一些搜索，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:26:46.563

显然，在互联网上找到答案的最快方法是将您的问题发布到 SO。我在发布后不到两分钟就发现了这个。

Konstantinos Kyriakopoulos 有一篇[博客文章](http://studentguru.gr/b/kokyri/archive/2011/12/03/hubtiles-with-transparent-images.aspx)，其中包含我正在寻找的模板样式。我无法将图像背景设置为透明，但我可以将其设置为 PhoneBackgroundBrush，效果也一样。

具体来说，我在 TitlePanel Grid 中设置了边框的背景。

# javascript - 在“从选择中请求 JavaScript AST”期间发生内部错误

> ID：13934796
> 
> 赞同：8
> 
> 时间：2012-12-18T14:11:35.783
> 
> 标签：javascript, eclipse, ide

在 Eclipse 中编辑 JavaScript 文件时，我遇到了独特的错误/警报弹出窗口，每次我将光标放在该行时都会弹出此错误。

JS：当光标放在包含 return 语句的行的末尾时出现 NullPointerException。

```
foo.bar = function(x) {
    if (xyz) {
      return fn(x);«error»
    }

    return fn(x);«error»

    return (fn(x));«error»

    return new fn(x);«ok»

    return x;«sometimes»

    return "";«error» 

    return x+"x";«error» 

    return this.x;«error»

    return fn(
        x);«error»

    return new fn(
        x);«ok»

    return;«error»  
}; 
```

*   «» — 光标位置
*   «ok» — 没有错误
*   «error» — 触发错误
*   «有时» - 我的代码在这种情况下永远不会触发异常，但我没有看到模式。

如果光标位于返回行的末尾，则会发生此异常：

```
An internal error occurred during: "Requesting JavaScript AST from selection".
java.lang.NullPointerException 
```

Eclipse 错误是：

```
'Requesting JavaScript AST from Selection' has encountered a problem. 
An internal error occured during "Requesting JavaScript AST from selection". 
java.lang.NullPointerException 
```

是否有可用于解决问题的解决方案或变通方法？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-20T13:25:03.387

**最简单的解决方案：**

*   关闭切换标记事件（-`Alt`或工具栏上的画笔图标，它会方便地显示您当前的状态）。`Shift``O`

    *   它只是禁用突出显示其他出现的任何变量的功能，等等。

**官方解决方案：**

*   [您可以在此处](https://bugs.eclipse.org/bugs/show_bug.cgi?id=342461)跟踪官方错误。

*   [此处](https://bugs.eclipse.org/bugs/show_bug.cgi?id=359005)发布了一个补丁，您可以尝试一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-16T20:54:22.817

在文本编辑器中打开 JavaScript 文件会有所帮助。您可能希望将 js 文件的默认默认文件关联更改为文本编辑器。

# python - supervisord 日志不显示我的输出

> ID：13934801
> 
> 赞同：28
> 
> 时间：2012-12-18T14:11:51.523
> 
> 标签：python, logging, supervisord

我有一个 [program:x] 正在运行，它会打印 / sys.stdout.writes 很多东西。[supervisord] 的 AUTO childlogdir 或 [program:x] 的 stdout_logfile 中都没有出现我错过了什么吗？

如何捕获从 [program:x] 打印或标准输出的所有内容？

在我的程序中，我明确地做了这两件事，

```
print "something"
sys.stdout.write("something") 
```

相关的 supervisord.conf 文件

```
[supervisord]
childlogdir = %(here)s/../logs/supervisord/
logfile = %(here)s/../logs/supervisord/supervisord.log
logfile_maxbytes = 100MB
logfile_backups = 10
loglevel = info
pidfile = %(here)s/../logs/supervisord/supervisord.pid
umask = 022
nodaemon = false
nocleanup = false

[program:x]
directory = %(here)s/../
command = python file.py
autostart=true
autorestart=true
redirect_stderr=true  
stdout_logfile = /appropriate-path/to/access.log 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-19T15:54:01.290

Python 输出被缓冲。在您中设置[环境变量`PYTHONUNBUFFERED=1`](https://docs.python.org/3/using/cmdline.html#envvar-PYTHONUNBUFFERED)`supervisord.conf`将禁用缓冲并更快地显示日志消息：

```
[program:x]
environment = PYTHONUNBUFFERED=1 
```

或将[`-u`命令行开关](https://docs.python.org/3/using/cmdline.html#cmdoption-u)添加到`python`命令：

```
[program:x]
command = python -u file.py 
```

或者，您可以显式刷新`sys.stdout`处理程序：

```
sys.stdout.flush() 
```

在 python 3.3 及更高版本上，您可以添加`flush=True`参数以让函数为您执行此操作：

```
print(something, flush=True) 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-07-31T04:19:52.070

你可以像这样运行你的程序：

```
python -u file.py 
```

这将产生无缓冲的输出

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-13T12:05:50.867

如果您有基于 python 的脚本，但您不能或不想更改为定期刷新输出，那么您可以使用Expect 包中的[unbuffer](https://linux.die.net/man/1/unbuffer)。

对于 docker 容器中的 Django 应用程序，我最近使用它（从 supervisord 运行的 shell 脚本）：

```
unbuffer python -u manage.py runserver 0.0.0.0:11000 2>&1 >> /var/log/django.log 
```

# html - 文本字段中的字体颜色更改

> ID：13934805
> 
> 赞同：0
> 
> 时间：2012-12-18T14:12:03.130
> 
> 标签：html, css

我为文本框做了一些 CSS 样式。

```
<div style="margin:10px">
<input type="text" value="Username" class="textbox3" onfocus="if(this.value=='Username')this.value=''" onblur="if(this.value=='')this.value='Username'">
</div>​​​​​​ 
```

和 CSS

```
.textbox3{
    color:#202020;
    padding:0 5px 0 10px;
    font-family: 'Source Sans Pro', sans-serif;
    height:30px;
    font-size:13px;
    margin:0;
    outline:none;
    border:1px solid #dbdbdb;
    border-radius:3px;
    width: 150px;
}
.textbox3:focus{
    color:#202020;
    border:1px solid #4e8abf;
}
.textbox3:focus, .textbox3{
 -o-transition:.5s;
  -ms-transition:.5s;
  -moz-transition:.5s;
  -webkit-transition:.5s;
  transition:.5s;
}​ 
```

jsfiddle：http: [//jsfiddle.net/AWmUg/](http://jsfiddle.net/AWmUg/)

但文本的默认颜色是深灰色。我想将此默认文本“用户名”的颜色更改为更浅的颜色，例如#cdcdcd，当我们键入任何其他文本时，它应该是深灰色。我怎样才能得到这个结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:18:17.567

改用 HTML5 新`placeholder`属性，并使用专有样式为占位符设置不同的颜色，并使用不同的颜色打开和关闭焦点

[**演示**](http://jsfiddle.net/9QW3w/)

HTML

```
<input type="text" placeholder="Demo" /> 
```

CSS

```
input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {
  color: #ff0000;
}

input:-moz-placeholder, textarea:-moz-placeholder {
  color: #ff0000;
}

input:-ms-input-placeholder {
  color: #ff0000;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:16:41.190

`placeholder`您可以使用 HTML5属性实现类似的效果：

```
<input type="text" placeholder="Username"/> 
```

在这个小提琴中看到它的实际效果：jsfiddle.net/3PLRA

关于这个属性有很多资源，包括如果浏览器不支持 HTML5 ，如何提供[JS 回退机制。](http://www.morethannothing.co.uk/2010/01/placeholder-text-in-html5-a-js-fallback/)

例如，为了设置`placeholder`属性样式，请查看[使用 CSS 更改输入的 HTML5 占位符颜色](https://stackoverflow.com/q/2610497/851811)。

```
.textbox3::-webkit-input-placeholder {
    color:    #F00;
}
.textbox3:-moz-placeholder {
    color:    #F00;
}
.textbox3:-ms-input-placeholder {
    color:    #F00;
} 
```

[在这个小提琴中看](http://jsfiddle.net/nqcqE/)一个例子

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:16:40.380

使用 HTML5，您可以使用该`placeholder`属性

有关详细信息，请参阅[http://www.w3schools.com/tags/att_input_placeholder.asp](http://www.w3schools.com/tags/att_input_placeholder.asp)。

支持 HTML5 的浏览器将为您执行此操作。

# iphone - 将preferredInterfaceOrientationForPresentation 用于在viewController 更改时触发

> ID：13934807
> 
> 赞同：7
> 
> 时间：2012-12-18T14:12:14.520
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uiinterfaceorientation

我`MSNavigationPaneViewController` [从这里](https://github.com/monospacecollective/MSNavigationPaneViewController)使用并且有轮换工作。我已经覆盖了我的根目录中的旋转方法`UINavigationController`

```
-(BOOL)shouldAutorotate
{
    return YES;
}
-(NSUInteger)supportedInterfaceOrientations
{
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    if (appDelegate.topViewController != nil) {
        return [appDelegate.topViewController supportedInterfaceOrientations];
    } else {
        return UIInterfaceOrientationMaskPortrait;
    }
}
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    if (appDelegate.topViewController != nil) {
        return [appDelegate.topViewController preferredInterfaceOrientationForPresentation];
    } else {
        return UIInterfaceOrientationPortrait;
    }
} 
```

`MSNavigationPaneViewController`我用 using推动它，`presentViewController: animated:completion:`并且我有旋转工作，因此某些视图可以有不同的方向。问题是，每个具有不同方向的视图都需要用户倾斜手机来改变方向，在该点锁定正确的方向。我已经做了大量的阅读以使其正常工作，似乎我需要`preferredInterfaceOrientationForPresentation`在加载每个视图之前触发，但它没有触发。我认为它没有触发，因为`MSNavigationPaneViewController`没有使用`presentViewController`. 这是用于`MSNavigationPaneViewController`更改视图的代码

```
- (void)setPaneViewController:(UIViewController *)paneViewController
{
    if (_paneViewController == nil) {

        paneViewController.view.frame = _paneView.bounds;
        _paneViewController = paneViewController;
        [self addChildViewController:_paneViewController];
        [_paneView addSubview:_paneViewController.view];
        [_paneViewController didMoveToParentViewController:self];

    } else if (_paneViewController != paneViewController) {

        paneViewController.view.frame = _paneView.bounds;
        [_paneViewController willMoveToParentViewController:nil];
        [self addChildViewController:paneViewController];

        void(^transitionCompletion)(BOOL finished) = ^(BOOL finished) {
            [_paneViewController removeFromParentViewController];
            [paneViewController didMoveToParentViewController:self];
            _paneViewController = paneViewController;
        };

        [self transitionFromViewController:_paneViewController
                          toViewController:paneViewController
                                  duration:0
                                   options:UIViewAnimationOptionTransitionNone
                                animations:nil
                                completion:transitionCompletion];
    }
} 
```

看起来它只是切换 viewController 并因此不调用`preferredInterfaceOrientationForPresentation`

有什么方法可以强制`preferredInterfaceOrientationForPresentation`被调用，或者通过隐藏视图诱骗它被调用？

谢谢

编辑 - -

我完全理解新的轮换系统在 iOS6 中是如何工作的，并且它是由根来管理的。但是，如果下一个视图使用正确的方法之一，`preferredInterfaceOrientationForPresentation`似乎只会被调用。`presented`如果窗口刚刚切换，则不会。所以我确实需要一种方法来欺骗这个被调用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T21:21:10.627

您可以通过重置其 rootViewController 来欺骗窗口以重新评估其支持的界面方向。

```
UIApplication *app = [UIApplication sharedApplication];
UIWindow *window = [[app windows] objectAtIndex:0];
UIViewController *root = window.rootViewController;
window.rootViewController = nil;
window.rootViewController = root; 
```

您需要确保在执行此代码时，根视图控制器的 -supportedInterfaceOrientations 返回正确的掩码（对应于您希望如何强制方向）。

请注意，此 hack 可能会导致屏幕快速闪烁并干扰任何正在进行的动画。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-19T01:52:44.287

`preferredInterfaceOrientationForPresentation`不会在`UINavigationController`.

您将不得不子类化`UINavigationController`，然后自己实现此功能。您只想委托给`topViewController`.

供参考查看：[http ://code.shabz.co/post/32051014482/ios-6-supportedorientations-with-uinavigationcontroller](http://code.shabz.co/post/32051014482/ios-6-supportedorientations-with-uinavigationcontroller)

我还发现了一个子类的这个实现`UINavigationController`：[https ://gist.github.com/3842178](https://gist.github.com/3842178)

# ios - Facebook 应用程序邀请代表团混合

> ID：13934815
> 
> 赞同：1
> 
> 时间：2012-12-18T14:12:41.483
> 
> 标签：ios, facebook, facebook-app-requests

我正在从我的 iOS 应用程序发送 Facebook 应用程序邀请，并尝试使用块实现成功/失败流程。

我创建了一个类来包装我与 Facebook SDK 的通信，它公开了一个发送邀请方法。

在该方法中，我有以下代码：

```
[self.facebook dialog:@"apprequests"
            andParams:params
          andDelegate:self]; 
```

如[文档](https://developers.facebook.com/docs/howtos/send-requests-using-ios-sdk/)中所述。

我的包装类符合 FBDialogDelegate 协议，并且我实现了 5 个委托方法：

```
dialog:(FBDialog *)dialog didFailWithError:(NSError *)error, 
dialogCompleteWithUrl:(NSURL *)url, 
dialogDidComplete:(FBDialog *)dialog, 
dialogDidNotCompleteWithUrl:(NSURL *)url 
dialogDidNotComplete:(FBDialog *)dialog 
```

问题是无论用户取消对话还是发送请求，唯一被调用的方法是 dialogCompleteWithUrl:(NSURL *)url 方法。谁能解释一下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:11:11.603

这似乎是一个已被多次[报告](https://developers.facebook.com/bugs/409121355796785/)的[悬而未决](https://developers.facebook.com/bugs/399320530104874/)的问题。当用户按下取消按钮时调用 didComplete 的事实*确实是*一个有效的操作，因此调用 didComplete 是设计使然。文档可能已过时，我们有修复它的任务，但在我们的开发人员网站上报告文档错误将使您能够跟踪进度。

 *因此，要回答您的问题，如果用户按下“x”按钮，它应该调用 didNotComplete。用户按下发送或取消将调用 didComplete，因为它是这样设计的。

但是，[此人为 FBDialog 提出了一个很好的解决方法](https://stackoverflow.com/a/8520889/931354)，您可能可以在其中执行类似的操作，例如在成功时检查 URL 的值与在用户按下取消时检查 URL 的值，并进行 if 检查来检查这种情况。

希望这可以帮助。*

# java - 在java中读取日志文件

> ID：13934818
> 
> 赞同：5
> 
> 时间：2012-12-18T14:12:50.637
> 
> 标签：java, fileinputstream, logfile

是否可以使用 java 读取日志文件（abc.log）？

我想要我的日志文件中的特定字符串。

假设这是我的日志文件的内容。我只想要时间戳（例如：05:08:37）并在控制台打印它。

```
2012-12-16 05:08:37,905 [Thread-1] INFO  com.submit.SubmitService - Wait time 500

2012-12-16 05:08:38,444 [Thread-1] INFO  com.submit.SubmitService - NO OF  RECORDS TILL NOW 3755    TOTAL TIME -- << 539

2012-12-16 05:08:38,668 [Thread-1] INFO  com.submit.SubmitService - Active Connection:: -69076

2012-12-16 05:08:38,670 [Thread-1] INFO  com.submit.SubmitService - Active Connection:: -65764 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T14:16:27.303

您可以将“日志文件”作为普通文件读取。

然后，您可以使用例如[正则表达式](http://www.vogella.com/articles/JavaRegularExpressions/article.html)来获取您需要的字符串部分：

```
try{
   FileInputStream fstream = new FileInputStream("abc.log");
   BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
   String strLine;
   /* read log line by line */
   while ((strLine = br.readLine()) != null)   {
     /* parse strLine to obtain what you want */
     System.out.println (strLine);
   }
   fstream.close();
} catch (Exception e) {
     System.err.println("Error: " + e.getMessage());
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-07-30T21:42:34.360

```
import java.io.File;import java.io.FileNotFoundException;importjava.util.Scanner;
import java.sql.*;  

public class ReadingEntireFileWithoutLoop {

    public static void main(String[] args) throws FileNotFoundException {

        File file = new File("X:\\access.log");

        Scanner sc = new Scanner(file);
        sc.useDelimiter(",|\r\n");
        System.out.println(sc.next());
        while(sc.hasNext()){
            System.out.println(sc.next());
            }
            // closing the scanner stream
            sc.close();
    } 
```

# java - 带有 RETURN_GENERATED_KEYS 的 PreparedStatement 不能返回生成的密钥？

> ID：13934819
> 
> 赞同：0
> 
> 时间：2012-12-18T14:12:59.080
> 
> 标签：java, mysql, jdbc

一些环境信息：

1.  mysql-connector-java-5.1.22-bin.jar；
2.  mysql标准版5.5；
3.  JDK 1.6；
4.  Netbeans IDE；
5.  视窗XP；

我的Java代码如下：

```
MySQLConnection conn = (MySQLConnection)DriverManager.getConnection("jdbc:mysql://localhost:3306/db", "root", "");
String sql = "INSERT INTO `table_name` (`col1`,`col2`,...`colN`) VALUES (value1,value2,...,valueN)";
Statement stmt = conn.createStatement();
int rows = stmt.executeUpdate(sql, Statement.RETURN_GENERATED_KEYS);

ResultSet rs = stmt.getGeneratedKeys();
if (rs != null && rs.next()) {
    int id = rs.getInt(1);
} 
```

该表有一个名为“id”的主键列，具有 auto_increment 属性。执行后，表中插入了一条记录。但是 rs.next() 返回 false 并且我无法获取自动生成的主键值。

请问有什么线索吗？

# .htaccess - 隐藏 URL 参数 ASPX / 重写 url

> ID：13934820
> 
> 赞同：0
> 
> 时间：2012-12-18T14:13:07.113
> 
> 标签：.htaccess, url-rewriting

我有一些长网址，例如：
.../shop/stuk--amp-rosetter/rosetter.aspx?mode=1&nav=1910050@@SHOP5#.UNB4R2_8IQk

我想将其重写为：
.../shop/stuk--amp-rosetter/rosetter

但仍然允许 javascript 读取/使用 . 这可能吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-18T14:38:47.393

那么你可以使用 ISAPI_Rewrite 3。

# excel - 用于过滤列的 VBA

> ID：13934821
> 
> 赞同：4
> 
> 时间：2012-12-18T14:13:11.610
> 
> 标签：excel, foreach, vba

我有一个类似数据库的大表格，第一行包含标题。我想要基于列值的该表的行子集。两个问题：

1）VBA-wise 我想遍历列，当所有必要列的值都匹配时，将整行复制到新工作表中。

2) 行的子集基于列表。我刚刚读到我可以将 Autofilter 与数组一起使用。是否可以从列中输入此数组，而不是在 VBA 代码中手动输入？我使用的列表包含 200 个不同的字符串，并且会定期更新。

其中 CritList 是字符串列表。我仍然需要弄清楚如何，但现在我离开了办公室，所以明天更多。

**EDIT1**感谢@DougGlancy；自动过滤现在有效。这是他漂亮的代码（我只添加了数组过滤器）。

**EDIT2**包括一个更精细的数组过滤器，其中*NameList*是我要过滤的列表。现在一切正常！

```
Sub FilterAndCopy()
Dim LastRow As Long

Dim vName As Variant
Dim rngName As Range
Set rngName = Sheets("Sheet3").Range("NameList")

vName = rngName.Value

Sheets("Sheet2").UsedRange.Offset(0).ClearContents
With Worksheets("Sheet1")
    .Range("A:E").AutoFilter

    'Array filter from NameList
    .Range("A:J").AutoFilter Field:=3, Criteria1:=Application.Transpose(vName), _
                                Operator:=xlFilterValues

    .Range("A:E").AutoFilter field:=2, Criteria1:="=String1" _
                                  , Operator:=xlOr, Criteria2:="=string2"
    .Range("A:E").AutoFilter field:=3, Criteria1:=">0", _
    .Range("A:E").AutoFilter field:=5, Criteria1:="Number"

    LastRow = .Range("A" & .Rows.Count).End(xlUp).Row
    .Range("A1:A" & LastRow).SpecialCells(xlCellTypeVisible).EntireRow.Copy _
            Destination:=Sheets("Sheet2").Range("A1")

End With
End Sub 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-18T15:31:08.400

这是一种不同的方法。它的核心是通过打开宏记录器并根据您的规范过滤列来创建的。然后有一些代码来复制结果。它将比循环遍历每一行和每一列运行得更快：

```
Sub FilterAndCopy()
Dim LastRow As Long

Sheets("Sheet2").UsedRange.Offset(0).ClearContents
With Worksheets("Sheet1")
    .Range("$A:$E").AutoFilter
    .Range("$A:$E").AutoFilter field:=1, Criteria1:="#N/A"
    .Range("$A:$E").AutoFilter field:=2, Criteria1:="=String1", Operator:=xlOr, Criteria2:="=string2"
    .Range("$A:$E").AutoFilter field:=3, Criteria1:=">0"
    .Range("$A:$E").AutoFilter field:=5, Criteria1:="Number"
    LastRow = .Range("A" & .Rows.Count).End(xlUp).Row
    .Range("A1:A" & LastRow).SpecialCells(xlCellTypeVisible).EntireRow.Copy _
            Destination:=Sheets("Sheet2").Range("A1")
End With
End Sub 
```

附带说明一下，您的代码有比必要更多的循环和计数器变量。您不需要遍历列，只需遍历行。然后，您将检查该行中感兴趣的各个单元格，就像您所做的那样。

# android - 在 CAB 中如何更改溢出按钮？

> ID：13934825
> 
> 赞同：1
> 
> 时间：2012-12-18T14:13:22.087
> 
> 标签：android, android-actionbar, contextual-action-bar

我有 2 种不同的操作栏背景。一亮一暗。One for the default title and another for the CAB (when some of the elements are selected/activated).

在这些不同的状态下，我希望有 2 个不同的溢出。我尝试了选择器，但在 CAB 模式下找不到要表示的状态。

**知道如何提供不同的溢出按钮吗？**

*   更一般地说，我可以从哪里开始探索操作栏，这样我就可以自己找到答案，而不是在 inet 上到处寻找零碎的东西？我希望 Google/Android 能够提供一个起点。我想我只是没有找到它。

# android - 使用哪个布局/视图/类来实现滑块？

> ID：13934827
> 
> 赞同：0
> 
> 时间：2012-12-18T14:13:23.137
> 
> 标签：android, android-layout, android-sliding

这是我希望实现的..

滑块之*类的东西*...

> 说我的应用程序是一个游戏，每个屏幕上都有 4x4 的关卡按钮阵列，总共有 3 个屏幕......
> 
> 用户应该能够从右向左滑动手指，并且滑块应该“滑动”到下一个 4x4 级别...

就像我们打开应用程序时手机的功能一样`homescreen`。
如果用户`swipes`的手指*从右到左*并且左侧没有关卡，则滑块应该弹回......

所以......我要问的是**使用哪个布局/视图/类来实现这样的滑块**？

另外，请告诉我如何实现这样一个在选项卡之间切换的滑块（每个选项卡都包含不同的布局）..我希望我让自己清楚......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:20:51.480

据我了解，您可以使用：

*   画廊并为每一行创建自己的视图
*   ViewPager -[就像在 android 市场中一样（在视图之间滑动）](http://android-developers.blogspot.ru/2011/08/horizontal-view-swiping-with-viewpager.html)

所有这些方法都使用适配器和侦听器 - 您可以在互联网上找到很多示例。我认为在您的情况下 viewPager 更有用，因为据我所知，您希望拥有许多不同的视图。

# iphone - 声音没有在iphone的真实设备中播放

> ID：13934828
> 
> 赞同：1
> 
> 时间：2012-12-18T14:13:24.060
> 
> 标签：iphone

我是 iphone 编程新手。任何人都可以告诉我，下面的代码是用于播放录制的声音，但它不能在设备中播放声音。任何人都可以告诉我这段代码有什么错误。

```
if(soundID)
{
    AudioServicesDisposeSystemSoundID(soundID);
}

//Get a URL for the sound file
NSURL *filePath = [NSURL fileURLWithPath:audiopath isDirectory:NO];
NSLog(@"%@",filePath);
//Use audio sevices to create the sound
AudioServicesCreateSystemSoundID((__bridge  CFURLRef)filePath, &soundID);

//Use audio services to play the sound
AudioServicesPlaySystemSound(soundID); 
```

在上面的代码中，音频路径是语音录制的路径。实际上在数据库路径中是这样存储的

```
/Users/User/Library/Application Support/iPhone Simulator/5.0/Applications/C974262E-7658-45EE-8E8C-290B780E7C3E/Documents/2012-12-18 13:50:56 +0000.caf 
```

在此之后，我正在检索路径显示如下：

```
file://localhost/Users/User/Library/Application%20Support/iPhone%20Simulator/5.0/Applications/C974262E-7658-45EE-8E8C-290B780E7C3E/Documents/2012-12-18%2013:50:56%20+0000.caf 
```

这段代码有什么错误？请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:11:36.453

`NSURL* musicFile = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"你的音频文件名" ofType:@"wav"]];

AVAudioPlayer *click = [[AVAudioPlayer alloc] initWithContentsOfURL:musicFile error:nil];

[点击播放]；`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:15:56.900

名称与上一个不匹配有一个额外的空间，在 ios上**编码**

a) 2012-12-18 13:50:56 +0000.caf
b) 2012-12-18 13:50:56%20+0000.caf

# jquery - jQuery img 滑块不起作用

> ID：13934831
> 
> 赞同：0
> 
> 时间：2012-12-18T14:13:31.730
> 
> 标签：jquery, image

我的 jquery img 滑块有问题......我根本无法让它显示出来......关于我做错了什么的任何想法......我将 div myslideshow 放在了内容 div 中。

当我在 firebug 中查看源代码时，例如我可以看到标记在那里并且图片正在正确链接 - 滑块只是不会启动..

这是 HTML 标记、插件脚本和 CSS

```
<div id="myslideshow">
                <ul class="bjqs">
                <li><img src="img/slidepic1.png" height="330" width="986" alt="slide1"/></li>
                <li><img src="img/slidepic2.png" height="330" width="986" alt="slide2"/></li>
                <li><img src="img/slidepic3.png" height="330" width="986" alt="slide3"/></li>
                <li><img src="img/slidepic4.png" height="330" width="986" alt="slide4"/></li>
                </ul>
            </div>

!-- Load jQuery og plug-in  til slider galleriet-->
<script type="text/javascript" src="js/vendor/jquery-1.8.1.js"></script>
    <script type="text/javascript" src="js/basic-jquery-slider.js"></script>

     <!--  funktionen for selve animationen mm. -->
    <script type="text/javascript">
      $(document).ready(function() {

        $('#myslideshow').bjqs({
          'width' : 970,
          'height' : 520,
      'animationDuration' : 1200,
    'showMarkers' : false,
    'centerControls' :true,
    'useCaptions' : false,
    'keyboardNav' : false,
    'showControls' : false,
        });

      });
    </script>

/* Basic jQuery Slider essential styles */

ul.bjqs{
    position:relative;
    list-style:none;
    padding:0;
    margin:0;
    overflow:hidden;
    display:none;
}
.bjqs-slide li{
    display:none;
    position:absolute;
}

ul.bjqs-controls li a{
  display:block;
  padding:5px 10px;
  position:absolute;
  background:#fff;
  color:#fd0100;
  text-decoration:none;
  text-transform:uppercase;
}

a.bjqs-prev{
  left:0;
}

a.bjqs-next{
  right:0;
}

 p.bjqs-caption{
  background:rgba(0,0,0,0.7);
  color:#fff;
  text-align:center;
}

 ol.bjqs-markers{
  position:absolute;
  bottom:-50px;
}

 ol.bjqs-markers li{
  float:left;
  margin:0 3px;
}

 ol.bjqs-markers li a{
  display:block;
  height:10px;
  width:10px;
  border:4px solid #fff;
  overflow:hidden;
  text-indent:-9999px;
  background:#000;
  border-radius:10px;
  box-shadow:0 0 50px rgba(0,0,0,0.5);
}

ol.bjqs-markers li.active-marker a{
  background:#fd0100;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:02:39.377

Firebug 无法检测到您页面上的任何 javascript。但我看到有对您的 jquery 和脚本的引用。

# c++ - Make：没有规则制作头文件？

> ID：13934841
> 
> 赞同：5
> 
> 时间：2012-12-18T14:13:52.137
> 
> 标签：c++, header, makefile

我正在尝试使用名为 BigInt 的库制作一个项目。我的文件结构是：

```
/Users/wen/Projects/challenge/fibonacci3/fibonacci3.cpp
/Users/wen/Projects/challenge/fibonacci3/Makefile
/Users/wen/Projects/include/bigint/<.cc files and .hh files>
/Users/wen/Projects/include/bigint/Makefile 
```

Fibonacci3 Makefile 是

```
LD_FLAGS = 
CC_FLAGS = 

# Include libraries

include /Users/wen/Projects/include/bigint/Makefile

# Build object files

%.o: %.cc %.cpp $(library-cpp)
    g++ -c -o $@ $(CC_FLAGS)

# Link object files

fibonacci3: fibonacci3.o $(library-objects)
    g++ -o $@ $(LD_FLAGS) 
```

并且 bigint Makefile 是（缩短的）

```
# Mention default target.
all:

# Implicit rule to compile C++ files.  Modify to your taste.
%.o: %.cc
    g++ -c -O2 -Wall -Wextra -pedantic $<

# Components of the library.

library-cpp = \
    BigUnsigned.cc \
    BigInteger.cc \
    BigIntegerAlgorithms.cc \
    BigUnsignedInABase.cc \
    BigIntegerUtils.cc \

library-objects = \
    BigUnsigned.o \
    BigInteger.o \
    BigIntegerAlgorithms.o \
    BigUnsignedInABase.o \
    BigIntegerUtils.o \

library-headers = \
    NumberlikeArray.hh \
    BigUnsigned.hh \
    BigInteger.hh \
    BigIntegerAlgorithms.hh \
    BigUnsignedInABase.hh \
    BigIntegerLibrary.hh \ 
```

但是，`make`报告它找不到**头**文件的规则？

```
make: *** No rule to make target `NumberlikeArray.hh', needed by `BigUnsigned.o'.  Stop.
[Finished in 0.0s with exit code 2] 
```

这里发生了什么？标题应该被包含，而不是编译，那么为什么 make 要求一个呢？

提前致谢！

# 解决方案：

不包括 makefile，而是在我自己的 makefile 中编译源代码。有效！再次感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T14:28:30.650

该`make`程序希望所有文件都在当前目录中。由于您将第二个 makefile 包含到当前 makefile 中，因此其中的所有文件也都相对于当前目录。您必须确保包含的 makefile 中的文件包含正确的路径。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T14:16:16.010

Make 在找不到依赖项时会出现此错误；然后它会尝试构建该依赖项，但不知道创建此头文件的规则。

您可能打错了头文件的名称。

# richfaces - javax.faces.FacesException：javax.faces.FacesException：javax.el.PropertyNotFoundException：

> ID：13934844
> 
> 赞同：0
> 
> 时间：2012-12-18T14:14:03.243
> 
> 标签：richfaces, ajax4jsf, propertynotfoundexception

当我尝试访问我的应用程序（使用 JSF、RichFaces、a4j 框架）时，出现以下错误。

```
SEVERE: Error Rendering View[/index.xhtml]
javax.faces.FacesException: javax.faces.FacesException: javax.el.PropertyNotFoundException: /facelets/home.xhtml @448,82 rendered="#{contact.visible}": ELResolver cannot handle a null base Object with identifier 'contact'
at javax.faces.component.UIComponent.invokeOnComponent(UIComponent.java:672)
at javax.faces.component.UIComponentBase.invokeOnComponent(UIComponentBase.java:680)
at javax.faces.component.UIComponent.invokeOnComponent(UIComponent.java:678)
at javax.faces.component.UIComponentBase.invokeOnComponent(UIComponentBase.java:680)
at javax.faces.component.UIComponent.invokeOnComponent(UIComponent.java:678)
at javax.faces.component.UIComponentBase.invokeOnComponent(UIComponentBase.java:680)
at javax.faces.component.UIComponent.invokeOnComponent(UIComponent.java:678)
at javax.faces.component.UIComponentBase.invokeOnComponent(UIComponentBase.java:680)
at javax.faces.component.UIComponent.invokeOnComponent(UIComponent.java:678)
at javax.faces.component.UIComponentBase.invokeOnComponent(UIComponentBase.java:680)
at org.ajax4jsf.component.AjaxViewRoot.encodeChildren(AjaxViewRoot.java:543)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:883)
at com.sun.facelets.FaceletViewHandler.renderView(FaceletViewHandler.java:578)
at org.springframework.faces.webflow.FlowViewHandler.renderView(FlowViewHandler.java:99)
at org.ajax4jsf.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:100)
at org.ajax4jsf.application.AjaxViewHandler.renderView(AjaxViewHandler.java:176)
at org.springframework.faces.webflow.FlowViewHandler.renderView(FlowViewHandler.java:99)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:108)
at com.sun.faces.lifecycle.LifecycleImpl.phase(LifecycleImpl.java:266)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:159)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:245) 
```

下面是“home.xhtml”页面的一部分

```
 <h:dataTable id="contactsTable"
 value="#{agentBean.personalDetails.contactList}"
      var="contact" border="0" width="90%">
     <h:column>
     <a4j:region id="ContactTypeRegion">
     <h:selectOneMenu id="contactType"
     value="#{contact.contactType}"
required="#{param['contactValidation'] != '0'}"
requiredMessage="#{user.ContactTypeRequired}">
<f:selectItems
value="#{contact.contactTypeList}" />
<a4j:support event="onchange"
focus="contactCode"
action="#{contact.enableContactNumber}"
reRender="ContactCodePanel,ContactNumPanel,EntensionPanel" />
</h:selectOneMenu>
</a4j:region>
<a4j:outputPanel id="ContactCodePanel">
<rich:spacer height="1" width="2" />
<h:inputText id="contactCode"
label="Contact Code"
value="#{contact.contactCountryCode}"
style="width:10%" class="txtBox"
required="#{param['contactValidation'] != '0'}"
requiredMessage="#{user.ContactCodeRequired}"
maxlength="3">
<f:validator
validatorId="NumericValidator" />
<f:validateLength minimum="3" maximum="3" />
<rich:toolTip for="ContactCodePanel"
value="Area Code" direction="bottom-left"
styleClass="tooltip" />
<rich:ajaxValidator event="onblur" />
</h:inputText>
                                        <rich:spacer height="1" width="2" />
<h:outputText value="-" />
</a4j:outputPanel>
<rich:spacer height="1" width="2" /> 
```

以下是我收到上述错误的要点

```
<a4j:commandLink id="removeContact1"
value="#{contact.remove}"
rendered="#{contact.visible}"
reRender="contactsTable"
action="#{agentBean.personalDetails.removeContact}">
<a4j:actionparam name="contactValidation"
value="0" />
</a4j:commandLink>
</h:column>
</h:dataTable> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:17:09.413

似乎**contactList**（从datatable中的**agentBean.personalDetails.contactList**引用）包含一个空条目

因此无法评估以下表达式

```
rendered="#{contact.visible}" 
```

# vb.net - VB.Net File.Exists() 返回 True 但 Excel 无法打开

> ID：13934846
> 
> 赞同：1
> 
> 时间：2012-12-18T14:14:06.317
> 
> 标签：vb.net, excel-2010

我用 . 检查文件是否存在`File.Exists(filePath)`。然后我尝试在 Excel 中使用`Excel.Workbooks.OpenText(filePath)`. 但 Excel 抱怨该文件不存在。有没有搞错？

上下文是我正在使用另一个应用程序来处理给定文件并生成一个 .out 文件，然后我将其转换为 Excel 工作簿。

```
'' At this point, filePath is a .txt file.
Dim args As String = String.Format("""{0}""", filePath)
...
Dim exe As String = Config.ExtractEXE

Dim i As New ProcessStartInfo(exe)
i.Arguments = args

Dim p As Process = Process.Start(i)
p.WaitForExit()
...
'' filePath now becomes the .out file.
'' Then eventually, I get around to checking:
'If Not File.Exists(filePath) Then
'   MsgBox("Please ensure...")
'   Exit Sub
'End If
'' In response to an answer, I no longer check for the existence of the file, but
'' instead try to open the file.

Private Function fileIsReady(filePath As String) As Boolean
  Try
    Using fs As FileStream = File.OpenRead(filePath)
      Return True
    End Using
  Catch
    Return False
  End Try
End Function

Do Until fileIsReady(filePath)
  '' Wait.
Loop

ExcelFile.Convert(filePath...)
'' Wherein I make the call to:
Excel.Workbooks.OpenText(filePath...)
'' Which fails because filePath can't be found. 
```

是否存在延迟问题，例如 .Net 在其他应用程序可以访问文件之前识别文件的存在？我只是不明白为什么`File.Exists()`可以告诉我文件在那里，然后 Excel 找不到它。

据我所知，唯一可能打开文件的应用程序是我调用来进行处理的应用程序。但是该应用程序应该在完成时`p.WaitForExit()`完成文件，对吗？

我不得不将此应用程序部署为一个已知的错误，这真的很糟糕。用户有一个简单的解决方法；但仍然 - 这个错误不应该。希望你能帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:23:09.243

1.  文件是否存在并不是您能否打开它的唯一因素。您还需要查看文件系统权限和锁定。
2.  File.Exists 可能会欺骗您（如果您传递目录路径或发生任何错误，即使文件确实存在，它也会返回 false）
3.  `if (File.Exists(...))`文件系统是易变的，即使在一行和尝试在下一行打开文件之间的短暂时间内，情况也会发生变化。

总之：[你几乎不应该使用 file.exists()。](https://stackoverflow.com/a/265958/3043)几乎任何时候你都想这样做，只要尝试打开文件并确保你有一个好的异常处理程序。

# android - 具有两个具有相同列名的表的 Android 内容提供程序

> ID：13934857
> 
> 赞同：0
> 
> 时间：2012-12-18T14:14:52.140
> 
> 标签：android, android-contentprovider

我正在编写一个带有几个表的 Android 内容提供程序。假设我们有一张名为 testData 的表和一张名为 testDataInspector 的表。在 testData 中有一个名为 createdDate 的列，在 testDataInspector 中有另一个名为 createdDate 的列。我发现在内容提供程序中，当已经存在 testData.createdDate 时，SDK 找不到名为 testDataInspector.createdDate 的列。我发现我需要在列名中添加表名的前缀，以便区分表之间的不同列名。当我想查询 testDataInspector 的 contentProvider 时，它不会在不同的表中找到两个同名的列名。我有正确的 URI，并且正确使用了 URI 匹配器。我的插入工作正常。

例子 ：

（用于表 testData）

```
int creatorId = c.getColumnIndex(TestDataMetaData.CREATOR_ID_COLUMN_NAME);
int createdDate = c.getColumnIndex(TestDataMetaData.CREATED_DATE_COLUMN_NAME); 
```

（用于表 testDataInspector）

```
int formName = c.getColumnIndex(TestDataInspectorMetaData.FORM_NAME_COLUMN_NAME);
int data = c.getColumnIndex(TestDataInspectorMetaData.DATA_COLUMN_NAME);
int creatorId = c.getColumnIndex(TestDataInspectorMetaData.CREATOR_ID_COLUMN_NAME);
int createdDate = c.getColumnIndex(TestDataInspectorMetaData.TESTDATA_CREATED_DATE_COLUMN_NAME); 
```

有没有其他人遇到过这个？我想知道它是否与 SQLite 内部的指针有关。在任何高于 2.2 的 SDK 版本中编译应用程序时，我发现这是正确的。我意识到 ContentProviders 主要用于，但必须是一次一张表的规则。

我的另一个问题是否与列在 ContentProvider 本身的 ProjectionMap 中的别名方式有关。我过去曾与内容提供商合作过，但通常它们只有一张桌子。与我过去习惯的相比，我目前正在进行的项目需要一个相当广泛的数据库。对这个问题的任何帮助都会有所帮助，因为我找到了解决方法并且不能花时间玩为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:38:21.730

好的，这是我的错误。我道歉。这确实与内容提供者中的投影图有关。我没有为哈希映射中的列名添加正确的别名。对于制造任何问题，我深表歉意。为了引用 c，我在开发一个简单的客户端应用程序来访问内容提供者时，在 Activity 中进行了托管查询。

# python - 在 form.ModelForm 中覆盖/禁用 CharField 的 max_length 验证

> ID：13934858
> 
> 赞同：0
> 
> 时间：2012-12-18T14:14:53.967
> 
> 标签：python, django, django-models, django-validation

假设我在 models.py 中定义了这个模型：

```
[ . . . ]
class Robot(models.Model):
    ROBOT_CATEGORIES = (
    [ . . . ]
    )   
    name = models.CharField(max_length=30)
    version = models.ForeignKey('Version')
    category = models.CharField(max_length=10, choices=ROBOT_CATEGORIES)
    comments = models.CharField(max_length=2000, blank=True)

    def __unicode__(self):
        return "ROBOT %s [%s]" % (self.name, self.version)
    class Meta:
        unique_together = ('name', 'version',) 
```

我想为这个模型添加管理功能。用户可以输入不同机器人名称的逗号分隔列表，并`save_model`负责将它们保存为不同的对象。为此，我想自己进行*所有*验证。所以这里是管理员代码：

```
class RobotForm(forms.ModelForm):
    name = forms.CharField()
    comments = forms.CharField(widget=forms.Textarea, required=False)

    def clean_name(self):
        # custom validation here
        [ . . . ]
        return data

    def clean(self):
        cleaned_data = super(RobotForm, self).clean()
        # custom validation here
        [ . . . ]
        return cleaned_data

    class Meta:
        model = Robot

class RobotAdmin(admin.ModelAdmin):
    form = RobotForm
    list_display = ('name','version','category','comments')

    def save_model(self, request, obj, form, change):
        # custom save method
        obj.save()

admin.site.register(Robot, RobotAdmin); 
```

一切正常，除了`max_length`我在模型中为`Robot.name`. 在“添加”表单中，如果“名称”字段中的列表长度超过 30 个字符，则会闪烁错误。我在方法中验证了每个名字的长度`clean_name`，并希望在表单字段中禁用 max_length 验证。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:27:58.763

在您覆盖的 clean 方法中，从 clean_data 中删除错误，如下所示：

[覆盖一个 django 表单元素上的数据验证](https://stackoverflow.com/questions/4340287/override-data-validation-on-one-django-form-element)

# c# - 访问路径....被拒绝

> ID：13934866
> 
> 赞同：5
> 
> 时间：2012-12-18T14:15:21.497
> 
> 标签：c#, access-denied

我使用 VS2008 安装项目创建了一个 .msi。我的应用程序经常在应用程序目录 (C:\Program Files\MyApp\MyFile.txt) 的 .txt 文件中写入一些值。在 Win7 中安装后，它会引发异常“访问路径......被拒绝”。

但是每当我以管理员身份运行它时，都不会发生此类异常。这是我的[sscce](http://sscce.org)

```
string FilePath=Application.StartupPath + @"\AppSettings\CurrentUserName.inf";
using (StreamWriter writer=new StreamWriter(FilePath,false))
{
    writer.Write(txtLoginName.Text.Trim());
}
MainForm.ProcessLogIn();
this.DialogResult = DialogResult.OK; 
```

我不知道如何解决这个问题。有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T14:19:18.057

将您的文件移出 Program Files 目录。在 Win7 中对于普通用户是只读的。

您可以在 ProgramData 目录中移动文件。
您的安装程序应该在那里为您的应用程序创建一个目录。
然后在您的代码中，您可以使用这些代码行检索正确的完整路径名

```
string dataPath = Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData));
string appFile = Path.Combine(dataPath, "MyAppDir", "MyFile.txt"); 
```

通常（在Win7上）这会导致这样的路径

```
c:\programdata\MyAppDir\MyFile.txt 
```

但是使用[SpecialFolder](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder%28v=vs.100%29.aspx)枚举，您可以保证使用可用于读写应用程序的文件夹，而不取决于当前的操作系统。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-18T14:20:55.983

解决此问题的唯一方法是不写入该文件夹。按照惯例，您不允许写入该文件夹，不幸的是，旧版本的 Windows 不会让您这样做。

相反，您可以使用它[`Environment.SpecialFolder`](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)来帮助您找到需要去的地方：

```
// your application data for just that User running the app
var perUserAppData = Environment.GetFolderPath(
    Environment.SpecialFolder.ApplicationData);

// your application data for ALL users running the app
var allUsersAppData = Environment.GetFolderPath(
    Environment.SpecialFolder.CommonApplicationData);

// better!
var path = Path.Combine(perUserAppData, @"MyApp\MyFile.txt"); 
```

基本上，Windows 7 告诉您，您将不得不停止在人行道上行驶并按预期使用街道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:20:19.617

作为短期修复，您可以使用 ICACLS 授予对文件的写访问权限。注意：不是整个目录。

作为长期修复，如果您以非特权用户身份运行，则不应写入程序目录，而应写入 %LOCALAPPDATA% 或 %APPDATA% 之类的位置。

# mysql - JSF输入的汉字编码

> ID：13934868
> 
> 赞同：1
> 
> 时间：2012-12-18T14:15:25.760
> 
> 标签：mysql, hibernate, jsf, character-encoding

我在尝试通过 JSF 和 Hibernate 将中文字符串输入并保存到 MySQL 时遇到问题。

实际上，我使用“System.out.print”并检测到出现乱码，在 JSF 输入字段中输入我（我）之后但在保存到数据库之前。以下是部分代码：index.xhtml

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        <h:form>
            <h:panelGrid columns="2">
                <h:outputText value="Input"/>
                <h:inputText value="#{showBean.input}" />
            </h:panelGrid>
            <h:commandLink action="#{showBean.show()}" value="Show"/>

        </h:form>
    </h:body>
</html> 
```

ShowBean.java

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
@ManagedBean
@SessionScoped
public class showBean {
    String input;
    public showBean() {
        input = null;
    }

    public String getInput() {
        return input;
    }

    public void setInput(String input) {
        System.out.println("set input " + input);
        this.input = input;
    }

    public String show(){
        System.out.println("show input " + input);
        return "";
    }
} 
```

控制台输出是：set input ???è??è???????è??è?????? 显示输入 ???è??è?????è??è??????

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T20:25:21.967

如果您确实在使用 Facelets（默认使用 UTF-8）并且没有使用 PrimeFaces ajax（[已知会混淆请求正文编码](https://stackoverflow.com/questions/9634230/typing-chinese-with-primefaces-peditor-component)），那么您的问题有两个原因：

1.  MySQL JDBC 驱动程序字符编码未设置为 UTF-8。这导致数据库中出现乱码。

2.  Eclipse 控制台字符编码未设置为 UTF-8。这导致`System.out`.

解决方案是：

1.  向 JDBC 连接添加`useUnicode=yes`和参数。`characterEncoding=UTF-8`您可以将其指定为 JDBC URL 中的查询字符串

    ```
    jdbc:mysql://hostname:3306/db_name?useUnicode=yes&characterEncoding=UTF-8 
    ```

    或作为 JDBC 数据源中的连接属性，与您指定用户名、密码等的方式完全相同。

2.  *通过Window > Preferences > General > Workspace > Text File Encoding*告诉 Eclipse 使用 UTF-8 作为控制台编码：

    ![在此处输入图像描述](../Images/49374664d24ff24e71693b791710e3fa.png)

### 也可以看看：

*   [Unicode - 如何让字符正确？](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-09T09:15:35.753

如果您使用 glassfish，只需将以下代码添加到 glassfish-web.xml

```
<glassfish-web-app>
   <parameter-encoding default-charset="UTF-8" />
</glassfish-web-app> 
```

# sql-server-2008 - Variable has unexpected NULL value in dynamic SQL

> ID：13934869
> 
> 赞同：0
> 
> 时间：2012-12-18T14:15:25.910
> 
> 标签：sql-server-2008, dynamic-sql

I have searched high and low, without finding an answer. So I hope that you guys n girls can help me on my way:

I cant figure out why @old_comment is NULL when I use it in "SET @new_comment...", but it returns a fine value when I use it in the outputparameter "SET @commentOldOUT..."

```
 CREATE PROCEDURE [dbo].[SP_NY_KOMMENTAR]
    @tabel NVARCHAR(100),
    @id INT,
    @comment NVARCHAR(1000) = NULL,
    @commentOldOUT NVARCHAR(1000) = NULL OUTPUT
AS
BEGIN
    SET NOCOUNT ON;

    DECLARE @user NVARCHAR(30);
    DECLARE @date NVARCHAR(10);
    DECLARE @new_id VARCHAR(100);
    DECLARE @new_comment NVARCHAR(MAX);
    DECLARE @old_comment NVARCHAR(MAX);
    DECLARE @old_comm NVARCHAR(MAX);
    DECLARE @old NVARCHAR(MAX);
    DECLARE @q2 NVARCHAR(MAX);

    SET @new_id = (SELECT CAST(@id AS VARCHAR(100)));
    SET @user = (SELECT ORIGINAL_LOGIN());
    SET @date = (SELECT CONVERT(DATE,GETDATE()));
    SET @old = 'SELECT comment FROM '+ @tabel +' WHERE id = ' + @ny_id;

    EXEC sp_executesql 
        @query = @old, 
        @params = N'@old_comm NVARCHAR(MAX) OUTPUT', 
        @old_com =  @old_comm OUTPUT;

    SET @old_comment = (SELECT @old_comm);

    SET @commentOldOUT = @old_comment;                          

    SET @new_comment = COALESCE(@old_comment + CHAR(13),'') + '[' + @user + ' ' + @date + '] ' + @comment;

    SET @q2 = N'UPDATE ' + @tabel + ' SET comment = ''' + @new_comment + ''' WHERE id = ' + @ny_id;
    EXEC (@q2);
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:42:35.010

Sorry, I tried your query but for me it works fine! Have you tried to "debug" your query? You can see the value of every variable when in debug. (The green arrow in SQL Server 2008)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:23:22.893

I'm guessing that you didn't pass a value explicitly for the `@comment` parameter? If so, the problem would be here:

`SET @new_comment = COALESCE(@old_comment + CHAR(13),'') + '[' + @user + ' ' + @date + '] ' + @comment;`

The parameter `@comment` has a default value of `NULL` and concatenating anything with `NULL` results in `NULL`. That would explain why `@old_comment`, `@user` and `@date` all have values, but when it put it all together then `@new_comment` is `NULL`. This would be a better default value:

`@comment NVARCHAR(1000) = '',`

And your code as written is a bit messy, I assume that `@old_comment` and `@commentOldOUT` are only for debugging purposes? I don't see why you don't use `@old_comm` directly.

Finally, if you're working with dynamic SQL then I strongly recommend adding [a debugging parameter](https://stackoverflow.com/questions/10739306/setting-variables-in-sql-functions-probs/10739598#10739598) to print out your SQL strings easily. It's a very useful troubleshooting tool, especially if you don't have SSMS available.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:30:36.243

Well I can now see that I did several things wrong, below is the new, and now working, stored procedure:

```
 CREATE PROCEDURE [dbo].[SP_NY_KOMMENTAR]
    @tabel NVARCHAR(100),
    @id INT,
    @comment NVARCHAR(1000) = NULL
AS
IF @comment IS NOT NULL 
    BEGIN
        SET NOCOUNT ON;
        DECLARE @user NVARCHAR(30);
        DECLARE @date NVARCHAR(10);
        DECLARE @SQLSelect nvarchar(500);
        DECLARE @ParmSelect nvarchar(500);
        DECLARE @old_comment NVARCHAR(MAX);
        DECLARE @old_commentOUT NVARCHAR(MAX);
        DECLARE @new_comment NVARCHAR(MAX);
        DECLARE @SQLUpdate nvarchar(500);
        DECLARE @ParmUpdate nvarchar(500);

        SET @user = (SELECT ORIGINAL_LOGIN());
        SET @date = (SELECT CONVERT(DATE,GETDATE()));
        SET @SQLSelect = N'SELECT @old_commentOUT = kommentar FROM ' + QUOTENAME(@tabel) + ' WHERE id = @id';
        SET @ParmSelect = N'@id INT, @old_commentOUT NVARCHAR(MAX) OUTPUT';

        EXEC sp_executesql 
            @SQLSelect,
            @ParmSelect,
            @id = @id,
            @old_commentOUT = @old_comment OUTPUT;

        SET @old_comment = (SELECT @old_comment);
        SET @new_comment = COALESCE(@old_comment + CHAR(13) + CHAR(10),'') + '[' + @user + ' ' + @date + '] ' + @comment;

        SET @SQLUpdate = N'UPDATE ' + QUOTENAME(@tabel) + ' SET kommentar = @new_comment WHERE id = @id';
        SET @ParmUpdate = N'@id INT, @new_comment NVARCHAR(MAX)';
        EXEC sp_executesql 
            @SQLUpdate, 
            @ParmUpdate,
            @id = @id,
            @new_comment = @new_comment;
    END 
```

For example I weren't using parameterbinding correct, after that I tried to bind tabelnames as a parameter...

# r - 在R中返回适当滞后和迭代的除值的函数

> ID：13934871
> 
> 赞同：1
> 
> 时间：2012-12-18T14:15:35.057
> 
> 标签：r, divide

我有一个时间序列数据，我想使用一个函数来返回适当滞后和迭代的除值。

数据：

```
ID   Temperature value
1   -1.1923333
2   -0.2123333
3   -0.593
4   -0.7393333
5   -0.731
6   -0.4976667
7   -0.773
8   -0.6843333
9   -0.371
10  0.754
11  1.798
12  3.023
13  3.8233333
14  4.2456667
15  4.599
16  5.078
17  4.9133333
18  3.5393333
19  2.0886667
20  1.8236667
21  1.2633333
22  0.6843333
23  0.7953333
24  0.6883333 
```

该功能应该像这样工作：

新值：23ID=value(24)/value(23)、22ID=value(23)/value(22)、21ID=value(22)/value(21) 等等。

预期成绩：

```
ID  New Temperature value
1   0.17    
2   2.79    
3   1.24    
4   0.98    
5   0.68    
6   1.55    
7   0.885   
8   0.54    
9   -2.03   
10  2.38    
11  1.68    
12  1.264   
13  1.11    
14  1.083   
15  1.104   
16  0.967   
17  0.72    
18  0.59    
19  0.873   
20  0.69    
21  0.541   
22  1.16    
23  0.86    
24  NAN 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:07:30.093

要将向量`x`的每个元素除以其后继元素，请使用：

```
x[-1] / x[-length(x)] 
```

这将返回一个长度为 的向量`length(x) - 1`。如果您真的需要最后的`NaN`值，请通过`c(x[-1] / x[-length(x)], NaN)`.

# hashalgorithm - 这两个哈希的哈希算法是什么？

> ID：13934875
> 
> 赞同：0
> 
> 时间：2012-12-18T14:15:39.953
> 
> 标签：hashalgorithm

有人有一个想法，这两个哈希使用了哪种哈希算法：

*   `$S$DjzC6BKx24dNLU4UPyiCGXo6bJ3rDYbQdf/waPOwE9X36592NiFi`
*   `$S$DDLj98cyEH3azm0QvZq4E59PuczniTbfXiftWf5ED2qtcZYW5MTm`

它看起来有点咸，但我无法确定盐是否是盐`$S$`，`$S$D`因为我只知道这两个。没有子字符串的这些哈希的长度`$S$`将是 52。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:45:00.203

*   如果是加盐的，就不容易发现盐了。
*   这些可能是 Base64 编码的。这意味着 3 个字母编码 2 个字节。因为除了前缀 之外，我们还有 51 个字母`$S$D`，所以它可以被 3 整除。这就是 34 字节或 136 位。
*   136 位可能是 128 位加上 8 位 CRC 的散列函数。问题是：那里只有一个 128 个哈希函数。但我会选择 md5，因为它很常用。

# validation - Yii 验证：一些错误没有显示

> ID：13934876
> 
> 赞同：3
> 
> 时间：2012-12-18T14:15:40.217
> 
> 标签：validation, yii, yii-validation

**这是我的规则方法：**

```
public function rules() { 
  $newRules = array( 
    array('password_verification, valid_from, valid_until', 'required'),                
    array('password_verification', 'length', 'min'=>6, 'max'=>32), 
    array('password_verification', 'compare', 'compareAttribute'=>'password'), 
    array('username, email', 'length', 'min'=>3,'max'=>255),
    array('password', 'length','min'=>6, 'max'=>32), array('username, email', 'unique'), 
    array('email', 'email'), array('id, type, username, password, email, valid_from, valid_until', 'safe'), 
  ); 
  return array_merge($newRules,parent::rules()); 
} 
```

**这是我的观点（很难的领域）：**

```
<div class="row">
  <?php echo $form->labelEx($user,'password_verification',array('label'=>'Verification mot de passe','class'=>'forsys-label')); ?>
  <?php echo $form->passwordField($user,'password_verification',array('size'=>30,'maxlength'=>32)); ?>
  <?php echo $form->error($user,'password_verification') ?>
</div>

<div class="row">
   <?php echo $form->labelEx($user,'valid_from',array('label'=>'Valide depuis le','class'=>'forsys-label')); ?>
   <?php echo $form->dateField($user,'valid_from'); ?>
   <?php echo $form->error($user,'valid_from'); ?>
</div>
<div class="row">
   <?php echo $form->labelEx($user,'valid_until',array('label'=>"Valide jusqu'au",'class'=>'forsys-label')); ?>
   <?php echo $form->dateField($user,'valid_until'); ?>
   <?php echo $form->error($user,'valid_until'); ?>
</div> 
```

**一些信息：**

*   enableClientValidation 和 enableAjaxValidation 都为 true
*   datefield 是一种服装方法。这不是问题的来源（一位同事使用它的方式与我使用它的方式相同，但没有这个问题）。

**我的问题：**

对于“valid_until”和“valid_from”，错误不会显示在 HTML 上。如果我让“password_verification”为空，当我改变焦点时会出现错误（因为 ajaxValidation onChange），但如果我让“valid_until”或“valid_from”为空，则不会出现错误。

但是这些错误被 Yii 注意到了，如果我检查 ajax 请求响应，我可以在 firebug 中看到它们。

**因此，如果所有字段都为空，则不会因为 3 个错误而在 DB 中创建任何内容，但只会显示一个（password_validation）。**

如果任何人有想法，欢迎您:)

对不起我的大概英语

感谢您阅读我，祝您有美好的一天。

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:23:07.497

您在最后一条规则中将这些属性标记为“安全”。大概就是这个原因吧。删除该规则或为其添加一个场景（通常属性在“搜索”场景中被声明为安全 - 例如，将“on”=>“搜索”元素添加到该规则）。

# php - jQuery 的工具提示问题

> ID：13934881
> 
> 赞同：1
> 
> 时间：2012-12-18T14:16:00.687
> 
> 标签：php, javascript

我有这个代码

```
<?php
if(!empty($auction['Auc']['beginner'])){
?>   

<a href="#" id="trigger_beginner"><?= $html->image('badge/beginner_icon.png', array('width'=>"30", 'height'=>"30", 'border'=>"0", 'alt'=>"Beginner auction", 'title'=>"Beginner auc"))?></a>
<div class="tooltip">
    <label>Beginner</label>
    <label>For an explanation <a href="/pages/auct#beginner">please click here</a></label>
</div>
<script>
$(function() {
    $("#trigger_beginner").tooltip();
});
</script>

<?php
}
?> 
```

问题是当我有两次拍卖类型相同的拍卖时，例如在这种情况下像初学者一样，那么工具提示仅适用于一次拍卖。我希望它在所有类似的拍卖中显示工具提示..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:17:54.667

更改您的代码以使用它：

```
<?php if(!empty($auction['Auc']['beginner'])){?>   
   <a href="#" class="trigger_beginner"><?= $html->image('badge/beginner_icon.png', array('width'=>"30", 'height'=>"30", 'border'=>"0", 'alt'=>"Beginner auction", 'title'=>"Beginner auc"))?></a>
   <div class="tooltip">
       <label>Beginner </label>
       <label>For an explanation <a href="/pages/auct#beginner">please click here</a></label>
   </div>
   <script>
       $(function() {
            $(".trigger_beginner").tooltip();
       });
   </script>
<?php } ?> 
```

ID 必须是唯一的，因此您需要使用不同的 ID 或类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:18:00.747

元素的 ID 应该是唯一的。没有两个元素应该具有相同的 ID。您应该使用`CSS`class 作为您的 jquery 选择器

```
$(function() {
    $(".yourCssClassName").tooltip();
}); 
```

假设你所有的拍卖品都有这个类`yourCssClassName`

# python - pow(a,e,n) 不适用于输入 pow(1,3,3)

> ID：13934883
> 
> 赞同：0
> 
> 时间：2012-12-18T14:16:11.267
> 
> 标签：python, pow, sage

为什么我在使用这些参数时会收到此错误消息（pow（1,3,3））？：

```
sage: pow(1,3,3)                                    
3
3/2
3/2
---------------------------------------------------------------------------
ZeroDivisionError                         Traceback (most recent call last)

/home/kai/<ipython console> in <module>()

/home/kai/<ipython console> in pow(a, e, n)

/usr/lib/sagemath/local/lib/python2.7/site-packages/sage/rings/rational.so in sage.rings.rational.Rational.__mod__ (sage/rings/rational.c:19891)()

/usr/lib/sagemath/local/lib/python2.7/site-packages/sage/rings/integer.so in sage.rings.integer.Integer.inverse_mod (sage/rings/integer.c:32726)()

ZeroDivisionError: Inverse does not exist. 
```

战俘（）：

```
def pow(a,e,n):
....:     num = 1
....:     while e >= 1:
....:         print(e)
....:         if (e%2) == 1:
....:             num = (num*a) % n  
....:         e = e/2
....:         print(e)
....:         a = (a*a) % n
....:     return num
....: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:26:29.380

您实现的模幂平方算法应该使用整数。

`e = e/2`返回一个 Rational `3/2`。

您应该将其转换为整数`e = (e/2).floor()`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-18T14:20:05.497

```
a = (a*a) % n 
```

a = 1*1 % 1 a -> 0 这意味着你的情况是 0，所以在这里

```
num = (num*a) % n 
```

你将有 0 % 3。

编辑：可以在 python 中做 3/2 % 3 吗？

# ms-access - 在 Access 的组合框中自动选择一个值

> ID：13934886
> 
> 赞同：0
> 
> 时间：2012-12-18T14:16:29.007
> 
> 标签：ms-access, combobox, listbox

我有一个访问程序来处理库存。

有一个包含值的列表框，我试图在单击时使用列表框中的值更新组合框。组合框中有特定的值，列表框中只会有这些值。

到目前为止，我有这个：

```
Me.cboLocation.TabIndex = index 
```

但它不起作用。我在 ifelse 语句中设置了索引值，具体取决于来自列表框的文本。

```
if Me.lstItems.Column(5) = "Cage" then
    index = 0
elseif Me.lstItems.Column(5) = "Cabnet" then
    index = 1
... 
```

关于我如何实现这一目标的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:28:19.277

我想通了，我将代码更改为：

```
Me.cboLocation = Me.lstItems.Column(5) 
```

取出 if 块。我注意到我将列数设置为 4，所以它没有获得第 5 个值。

# asp.net-mvc - 实体框架 where 由 string[] 引起的异常

> ID：13934893
> 
> 赞同：2
> 
> 时间：2012-12-18T14:16:42.297
> 
> 标签：asp.net-mvc, entity-framework

我在“Where”中使用实体框架遇到了一个奇怪的场景，我可以在其中搜索字符串但不是字符串，它是数组的一部分：

这有效：

```
string line = sr.ReadLine();
string[] row = line.Split(';');
string code = row[0];
TableObject to = db.TableObject.Where(e => e.property == code).FirstOrDefault(); 
```

但是，如果我尝试通过省略步骤字符串`code = row[0]`并执行以下操作来简化代码：

```
string line = sr.ReadLine();
string[] row = line.Split(';');
TableObject to = db.TableObject.Where(e => e.property == (string) row[0]).FirstOrDefault(); 
```

我得到以下异常：

```
System.NotSupportedException: The LINQ expression node type 'ArrayIndex' is not supported in LINQ to Entities. 
```

我发现异常抱怨看到的数组很奇怪，因为我专门将`row[0]`数组转换为`(string)`.

`.ToString()`也没有解决问题。

我知道这没什么大不了的，但我很好奇为什么会这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:21:45.810

Entity Framework 尝试将完整的表达式`e => e.property == (string) row[0]`转换为 SQL`WHERE`语句。它只是不知道要翻译`(string) row[0]`成什么 SQL 表达式。

每个 LINQ 提供程序只能处理一组特定指令。EF LINQ 提供程序不支持评估数组的索引。它只能使用原语。这就是为什么您必须从 lambda 之外的数组中提取字符串的原因。

# visual-c++ - 使用 CMake、C++ 和 Visual Studio 2012 进行分析

> ID：13934895
> 
> 赞同：9
> 
> 时间：2012-12-18T14:17:03.967
> 
> 标签：visual-c++, visual-studio-2012, profiling, cmake, visual-c++-2012

我正在使用 CMake 2.8.10.1 为 Visual Studio 2012 Ultimate（64 位）生成项目文件。生成的解决方案包含一个库、一些测试和一些可执行文件。

我想介绍一些应用程序。当我选择“ANALYZE”->“Start Performance Analysis”时，我遇到错误消息“ *No launchable projects are available for profiling* ”。如何分析 CMake 生成的解决方案？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-02T04:48:05.020

看来我找到了修复它的方法。你需要在你的项目下添加win32配置。然后探查器会将您的项目视为可启动的。例如，对于发布配置，您应该添加以下内容

```
<ProjectConfiguration Include="Release|Win32">
      <Configuration>Release</Configuration>
      <Platform>Win32</Platform>
</ProjectConfiguration> 
```

在下面

```
<ItemGroup Label="ProjectConfigurations"> 
```

使用菜单：

*   构建 -> 配置管理器
*   转到要配置的项目行
*   在平台栏注意它只会有一个`x64`条目
*   使用下拉菜单`<New...>`并选择`Win32``New platform:`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-25T11:24:34.547

这是 Visual Studio 中一个可笑的错误。QMake 也受此困扰。

[https://connect.microsoft.com/VisualStudio/feedback/details/823467/performance-wizard-doesnt-show-any-projects-to-profile-if-there-is-no-win32-configuration](https://connect.microsoft.com/VisualStudio/feedback/details/823467/performance-wizard-doesnt-show-any-projects-to-profile-if-there-is-no-win32-configuration)

# symfony - 所有 symfony2 应用程序中的全局变量

> ID：13934896
> 
> 赞同：0
> 
> 时间：2012-12-18T14:17:03.650
> 
> 标签：symfony, global-variables

我正在使用 symfony2 为大学的项目工作，两天前我遇到了一个问题，我不知道如何解决。

我需要一个在各种用户（各种用户会话）之间共享的全局变量，但我不知道我必须在哪里声明它。

我想当用户 A 更改此变量时，用户 B 可以读取更新的此变量。

可能这是不可能的，但我是 symfon2 的新手，我不确定。

对不起，如果我在编辑中有任何错误，但我现在正在学习英语:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:42:28.520

您可以将该变量写入文件或缓存（例如 apc-cache）。缓存将在所有请求之间共享，但是，它有生命周期。

# bash - 在子 shell 中使用 tail 和 while/break 不会退出循环

> ID：13934897
> 
> 赞同：1
> 
> 时间：2012-12-18T14:17:12.093
> 
> 标签：bash, shell, ksh

我一直面临着一个非常特殊的 shell 脚本问题。

这是场景

Script1（在后台生成）--> Script2

Script2 有以下代码

```
function check_log()
{
    logfile=$1
    tail -5f ${logfile} | while read line
    do
      echo $line
      if echo $line|grep "${triggerword}";then
        echo "Logout completion detected"
        start_leaks_detection
        triggerwordfound=true
        echo "Leaks detection complete"
      fi
      if $triggerwordfound;then
        echo "Trigger word found and processing complete.Exiting"
        break
      fi

    done
        echo "Outside loop"
        exit 0

}

check_log "/tmp/somefile.log" "Logout detected" 
```

现在，while 循环的中断在这里没有帮助。我可以看到“检测到注销完成”以及“泄漏检测完成”在标准输出上回显，但不是字符串“外部循环”

我假设这与`tail -f`创建子外壳有关。我想要做的是，退出该子外壳并退出 Script2 以将控制权返回给 Script1。

有人可以说明如何做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:13:36.877

而不是管道进入你的while循环，而是使用这种格式：

```
while read line
do
   # put loop body here
done < <(tail -5f ${logfile}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:54:38.000

试试这个，虽然它不太一样（它不会在启动时跳过日志文件的开头）：

```
triggerwordfound=
while [ -z "$triggerwordfound" ]; do
    while read line; do
        echo $line
        if echo $line|grep "${triggerword}";then
            echo "Logout completion detected"
            start_leaks_detection
            triggerwordfound=true
            echo "Leaks detection complete"
        fi
    done
done < "$logfile"
echo "Outside loop" 
```

双循环有效地做同样的事情`tail -f`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T21:22:51.763

您的函数在某种意义上是有效的，但是在找到触发词*之后*将另一行写入文件之前，您不会注意到它这样做了。这是因为`tail -5 -f`通常可以在一次调用中将文件的最后五行全部写入管道，并在一次`write()`调用中继续写入新行，因此在尝试`SIGPIPE`写入管道*之后*`while`才会发送信号循环已退出。

因此，如果您的文件定期增长，那么应该没有问题，但如果您的文件在写入触发字后立即停止增长更为常见，那么您的观察程序脚本也将挂起，直到写入任何新输出到文件。

即`SIGPIPE`当管道关闭时不会立即发送，即使其中缓冲了未读取的数据，但只有在`write()`管道上尝试后续操作时才会发送。

这可以很简单地证明。该命令不会退出（假设文件的尾部小于管道大小的缓冲区），直到您手动中断它，或者您再向文件写入一个字节：

```
tail -f some_large_file | read one 
```

但是，如果您强制 tail 对管道进行多次写入并确保读取器在最终写入之前退出，那么一切都会按预期工作：

```
tail -c 1000000 some_large_file | read one 
```

不幸的是，在给定的系统上发现管道缓冲区的大小并不总是那么容易，也不总是可能只在文件中的数据已经超过管道缓冲区的价值时才开始读取文件，并且触发词已经在文件中，并且从文件末尾开始至少有一个管道缓冲区的大小字节。

不幸的是`tail -F`（这可能是您应该使用的，而不是`-f`）也不会尝试每 5 秒写入零字节，否则这可能会以更有效的方式解决您的问题。

此外，如果您要坚持使用`tail`，那么`-1`可能就足够了，至少对于检测任何*未来*事件而言。

顺便说一句，这里有一个稍微改进的实现，仍然使用，`tail`因为我认为这可能是你最好的选择（你总是可以在日志中添加一个周期性的标记行`cron`或类似的（大多数`syslogd`实现也有一个内置的*标记*功能）来保证你的功能将在标记周期内返回）：

```
check_log ()
{
        tail -1 -F "$1" | while read line; do
                case "$line" in
                *"${2:-SOMETHING_IMPOSSIBLE_THAT_CANNOT_MATCH}"*)
                        echo "Found trigger word"
                        break
                        ;;
                esac
        done
} 
```

将`echo`语句替换为读取触发短语时需要执行的任何处理。

# php - 使用单选按钮和复选框过滤 HTML 表格

> ID：13934900
> 
> 赞同：1
> 
> 时间：2012-12-18T14:17:24.183
> 
> 标签：php, html, mysql

我不知道这是否可能，尽管我确信这是可能的，只是超出了我的能力范围。

我想使用浏览器中的一组按钮过滤从 SQL 查询生成的表，即具有用于确定任务是否已完成的复选框，以及用于时间范围的单选按钮（例如，过去 24 小时、本周至今、日期范围等..)。所有这些都无需不断刷新页面。

有人能指出我正确的方向吗，我不是要求有人为我做这件事，但我是自学的，需要一些指导。任何帮助表示赞赏。

这些是我想使用的过滤器：

```
 <form  id="filters">
            <input type="checkbox" id="live" name="filter_live" value="Live" /> <label for="live">Outstanding</label>
            <input type="checkbox" id="completed" name="filter_completed" value="completed" /> <label for="completed">Complete</label>
            |
            <input type="radio" id="last24" name="filter_radio" checked="checked" onchange="return hide_range(this.checked);"/><label for="last24">Last 24hrs</label>
            <input type="radio" id="WTD" name="filter_radio" onchange="return hide_range(this.checked);"/><label for="WTD">WTD</label>
            <input type="radio" id="last_week" name="filter_radio" onchange="return hide_range(this.checked);"/><label for="last_week">Last Week</label>
            <input type="radio" id="range" name="filter_radio" onchange="return show_range(this.checked);" /><label for="range">Range</label>
                <div id="date_range" style="display: none;">
                    <br />
            <label for="from">From: </label><input type="text" id="from" name="from"/>
            <label for="to">To: </label><input type="text" id="to" name="to" />
            <input type="button" value="Go" />

                </div>
        </form> 
```

我想在下表中使用它们：

```
 <table class="general">
        <tr>
            <th colspan='8'>Current Tasks</th>
        </tr>
            <tr>
                <th>Created</th>
                <th>Updated</th>
                <th>Location</th>
                <th>Task</th>
                <th>Priority</th>
                <th>Status</th>
                <th>Completed</th>
                <th>Action</th>
            </tr>
<?php
    while($row = mysql_fetch_array($eng_result)) :  ?>

            <tr>
<form action="Eng_update.php" method="post">

 <td><?php if($row['Created'] == NULL){echo "";}else{ echo date("d/m/y",  $row['created_ts']);} ?></td>
<td><?php if($row['LastModified']==NULL){echo "";} else {echo date("d/m/y", $row['Last_Modified_ts']);} ?></td>
<td><?php echo $row['Location'] ?><input type="hidden" name ="eng_loc[]" value="<?php echo $row['Location']; ?>" /></td>
<td><?php echo $row['Task'] ?><input type="hidden" name="eng_task[]" value="<?php echo $row['Task']; ?>" /></td>
<td><?php echo $row['Priority'] ?><input type="hidden" name="eng_priority[]" value="<?php echo $row['Priority']; ?>"</td>
<td><?php echo $row['Status'] ?><input type="hidden" name="eng_status[]" value="<?php echo $row['Status']; ?>"</td>
<td>
    <?php if($row['Completed']==1){echo "yes";} else {echo "no";}?>
    <input type="hidden" name="eng_task_complete[]" value="<?php echo $row['Completed'];?>"
</td>
    <td>
        <input type="hidden" name="update_id[]" value="<?php echo $row['ID']; ?>" />
        <input type="submit" value="Update" onClick="return checkAction('Do you wish to update the status of this task?')"/>

    </td>
</form>
            </tr>
<?php endwhile; ?>

    </table> 
```

感谢您花时间看:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T14:23:14.790

有一个名为 DataTables 的 jquery 插件（如果您熟悉 JQuery，使用起来会轻而易举）：[http ://datatables.net/](http://datatables.net/)

它具有许多用于对数据进行排序/过滤的功能，甚至可以选择动态加载数据（通过 AJAX）。

我想你想要这样的功能：http: [//datatables.net/release-datatables/examples/api/multi_filter.html](http://datatables.net/release-datatables/examples/api/multi_filter.html)

编辑：对于日期范围，创建自定义排序函数，此处回答了类似的问题：[http ://www.datatables.net/forums/discussion/7218/sort-column-by-numerical-range/p1](http://www.datatables.net/forums/discussion/7218/sort-column-by-numerical-range/p1)

# xml - XQuery：使用谷歌地图 API 从经度/纬度获取地址/城镇？

> ID：13934902
> 
> 赞同：1
> 
> 时间：2012-12-18T14:17:28.837
> 
> 标签：xml, api, maps, xquery

我知道我可以通过将 [A] 和 [B] 替换为纬度和经度，从该 URL 获取返回地理信息的 XML 文件。

> http://maps.googleapis.com/maps/api/geocode/xml?latlng=[A],[B]&sensor=true

现在我想知道的是如何从我的 .xqy 文件中调用这个 URL 并简单地获取 XML 文件中地址和城镇属性的值。任何的想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:13:59.600

您可以使用 expath HTTP 客户端来查询此 API：

```
import module namespace http = "http://expath.org/ns/http-client";

http:send-request(<http:request method="get" href="http://maps.googleapis.com/maps/api/geocode/xml?latlng=[A],[B]&amp;sensor=true" />) 
```

[您可以在http://www.zorba-xquery.com/html/demo#SYTRRzV6oopDKuEs3hxUdj4lUts=](http://www.zorba-xquery.com/html/demo#SYTRRzV6oopDKuEs3hxUdj4lUts=)现场试用此示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:30:13.317

尝试使用带有反向地理编码的地理编码服务 API。

[https://developers.google.com/maps/documentation/javascript/geocoding#ReverseGeocoding](https://developers.google.com/maps/documentation/javascript/geocoding#ReverseGeocoding)

# c# - 尝试使用 Windows Auth 访问 WCF Rest 服务时的 HttpClient 奇怪行为

> ID：13934903
> 
> 赞同：2
> 
> 时间：2012-12-18T14:17:32.600
> 
> 标签：c#, .net, wcf, http, rest

我正在使用 WCF REST 服务（.Net 4.0）创建一个客户端-服务器应用程序，我在那里看到了非常奇怪的错误。要访问我使用 HttpClient 类的服务，代码如下所示：

```
public TResponse Post<TRequest, TResponse>(Uri uri, TRequest request)
    using (HttpClient client = new HttpClient())
    {                
        client.TransportSettings.Credentials = CredentialCache.DefaultCredentials;
        client.TransportSettings.ConnectionTimeout = TimeSpan.FromSeconds(200);

        using (HttpResponseMessage response = client.Post(uri, HttpContentExtensions.CreateDataContract(request, null)))
        {
            response.EnsureStatusIsSuccessful();
            return response.Content.ReadAsDataContract<TResponse>();
        }
    }
} 
```

我在 IIS7 上托管我的服务，并且当启用匿名身份验证时一切正常，但是当我打开 Windows 身份验证时，一些随机请求（平均 10 个）因 400-Bad 请求状态而失败，并且错误消息是：Bad Request - Invalid动词。HTTP 错误 400。请求动词无效。

会是什么呢？

还有一点更新：如果打开 fiddler，一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-11T17:15:09.377

我在这里遇到了同样的事情。真是一个谜。我不明白为什么让提琴手运行会消除问题。

我最终发现这个问题是由添加到帖子中的“expect continue”标题引起的。我删除了它，帖子成功而不是 400 错误请求。

这是一个很好的条目：http: [//blogs.msdn.com/b/jaskis/archive/2009/04/19/asmx-post-request-fails-with-http-400-error-when-content-length -size-increases.aspx](http://blogs.msdn.com/b/jaskis/archive/2009/04/19/asmx-post-request-fails-with-http-400-error-when-content-length-size-increases.aspx)

就我而言，这是 apache HTTP Client v4.0 所以，

```
 httpClient.getParams().setBooleanParameter(
            CoreProtocolPNames.USE_EXPECT_CONTINUE, false); 
```

成功了。

# java - 运行 JUNIT 测试用例时出错

> ID：13934907
> 
> 赞同：0
> 
> 时间：2012-12-18T14:17:51.023
> 
> 标签：java, junit, testcase

嗨，当我尝试执行我的 JUNIT 测试用例时，我收到以下错误。如果有人可以帮助我解决这个问题，那将是非常有帮助的。

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'commonValuesBackingBean' defined in class path resource [resources/ffms-storevisit-spring.xml]: Cannot resolve reference to bean 'cycleBackingBean' while setting bean property 'cycleBackingBean'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'cycleBackingBean' defined in class path resource [resources/ffms-storevisit-spring.xml]: Cannot resolve reference to bean 'cycleManager' while setting bean property 'cycleManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'cycleManager' defined in class path resource [resources/ffms-storevisit-spring.xml]: Cannot resolve reference to bean 'cycleBO' while setting bean property 'cycleBO'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'cycleBO' defined in class path resource [resources/ffms-storevisit-spring.xml]: Cannot resolve reference to bean 'cycleDAO' while setting bean property 'cycleDAO'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'cycleDAO' defined in class path resource [resources/ffms-storevisit-spring.xml]: Cannot resolve reference to bean 'sqlMapClient' while setting bean property 'sqlMapClient'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sqlMapClient' defined in class path resource [resources/ffms-common-spring.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: com.ibatis.sqlmap.engine.builder.xml.SqlMapConfigParser.parse(Ljava/io/InputStream;Ljava/util/Properties;)Lcom/ibatis/sqlmap/client/SqlMapClient;
      at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:275) 
```

急切地等待答复。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T00:30:35.780

正如您所说，您`ibatis-sqlmap`的 CLASSPATH 中有 jar。然后尝试打开它（它是 zip 文件）并检查是否有`com/ibatis/sqlmap/engine/builder/xml/SqlMapConfigParser.class`文件。

如果它不存在，则意味着您的 jar 已损坏或已修改。如果它在那里，那么你的 CLASSPATH 是错误的。

# servlets - 如何将 servlet 映射到 /*，它会因无限循环而失败，并最终导致 StackOverflowError

> ID：13934909
> 
> 赞同：3
> 
> 时间：2012-12-18T14:17:51.770
> 
> 标签：servlets, mapping, infinite-loop

我想将我的 servlet 映射到`/*`，但它因无限循环而失败。

```
<servlet>
    <servlet-name>helloServlet</servlet-name>
    <servlet-class>my.HelloServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>helloServlet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

java代码是：

```
public class HelloServlet extends HttpServlet {

    public void doGet(HttpServletRequest request, HttpServletResponse response){
        request.getRequestDispatcher("/WEB-INF/jsps/hello.jsp").forward(request, response);
    }

} 
```

如果我映射到`/hello`，一切正常。

当`HelloServlet`映射到 时`/*`，它也将被调用`RequestDispatcher#forward()`并导致无限循环。

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T14:29:56.127

这是不可能的。JSP 实际上应该调用容器的内置函数`JspServlet`。但是`/*`由 webapp 定义的映射具有更高的优先级。

您需要将 servlet 映射到更具体的 URL 模式`/pages/*`，例如创建一个 servlet 过滤器，将非静态请求转发到该 servlet。是的，非静态请求（图像/CSS/JS 文件）也包含在 中`/*`，但它们根本不应该由 servlet 处理。

假设您在`/resources`文件夹中拥有所有静态资源，则应执行以下操作：

```
<filter>
    <filter-name>filter</filter-name>
    <filter-class>com.example.Filter</filter-class>
</filter>
<filter-mapping>
    <filter-name>filter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<servlet>
    <servlet-name>controller</servlet-name>
    <servlet-class>com.example.Controller</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>controller</servlet-name>
    <url-pattern>/pages/*</url-pattern>
</servlet-mapping> 
```

在过滤器中使用以下内容`doFilter()`：

```
HttpServletRequest req = (HttpServletRequest) request;
String path = req.getRequestURI().substring(req.getContextPath().length());

if (path.startsWith("/resources")) {
    chain.doFilter(request, response); // Goes to container's own default servlet.
} else {
    request.getRequestDispatcher("/pages" + uri).forward(request, response); // Goes to controller servlet.
} 
```

这完全透明地发生，无需对 URL 进行任何更改`/pages`。转发到 JSP 不会触发过滤器或 servlet。默认情况下，过滤器不会启动转发，并且 JSP 转发路径不再匹配控制器 servlet 的 URL 模式。

或者，如果您有自己的默认 servlet 实现，那么您可以将 servlet 映射到`/`并让它委托给默认 servlet，如果该请求不适用于前端控制器请求。这就是 Spring MVC 在幕后所做的。然而，创建一个默认 servlet 并不是一项简单的任务，因为它应该能够响应条件请求、缓存请求、流请求、恢复请求、目录列表请求等等。

### 也可以看看：

*   [servlet 映射 url 模式中 / 和 /* 之间的区别](https://stackoverflow.com/questions/4140448/servlet-mapping-vs)
*   [在 /* 上映射全局前端控制器 servlet 时如何访问静态资源](https://stackoverflow.com/questions/870150/how-to-access-static-resources-when-using-default-servlet)
*   [设计模式基于 Web 的应用程序](https://stackoverflow.com/questions/3541077/design-patterns-web-based-applications)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-18T14:25:10.167

[当在 JSF 中的映射中使用 FORWARD 时，这可能与进入无限循环的 Servlet 过滤器](https://stackoverflow.com/questions/4905709/servlet-filter-going-in-infinite-loop-when-forward-used-in-mapping-in-jsf)重复

否则应该检查您的 JSP 包含的内容，可能是它请求可能导致此行为的 css 或图像文件。也建议尝试不使用通配符。

# vb.net - 如何使用 vb.net 获取特定的谷歌搜索结果？到列表框

> ID：13934910
> 
> 赞同：0
> 
> 时间：2012-12-18T14:17:52.217
> 
> 标签：vb.net, string, search

我知道如何让 vb 程序进入 Google。我什至知道如何导航，但我不知道如何操纵结果。

基本上我希望程序从谷歌获取搜索结果并将它们输出到列表框。因此，如果用户搜索汉堡，则搜索结果将输出到列表框。有谁知道如何做到这一点？

到目前为止，这是我的代码：

```
Public Class Form1

Dim look, retrieve As String

Private Sub Search_Click(sender As Object, e As EventArgs) Handles Search.Click
look = InputBox("What are you looking for?")
look = look.Replace(" ", "+")
Dim G1 As String = "http://www.google.co.uk/#hl=en&tbo=d&output=search&sclient=psy-ab&q="
WebBrowser1.Navigate(G1 + look)

retrieve = InputBox("What links do you want to retrieve?")

End Sub

End Class 
```

我知道使用 google api 更容易，但速度也慢很多。我过去曾使用过该 API，并且遇到过性能问题。我刚刚在另一个线程中看到了如何下载网站的源代码；很快。我只是不知道如何从下载的源中获取网址。这里有人对字符串操作有好处吗？

到目前为止的代码：

```
sourcecode = ((New Net.WebClient).DownloadString(G1 + look)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:06:17.490

如果您研究 XPATH 并且不反对使用开源第三方工具，那么 HTML Agility Pack（[Cose 示例](http://htmlagilitypack.codeplex.com/wikipage?title=Examples "代码示例")）应该是解析 html 的好工具。

另一种可能很痛苦的选择是将源 html 字符串转换为有效的 xml 文档，然后使用 VB 的 xml 名称空间对其进行解析。我在用于解析 youtube 播放列表的应用程序中完成了此操作。这种方法的问题是在将其转换为 xml 文档之前需要对 html 字符串进行一些手动清理。

最后，您可以尝试仅使用字符串方法来消化 html 字符串，但这很容易出错，并且在很大程度上取决于文档的结构。

无论如何，一旦你有了解析 html 的方法，目前在 Google 搜索结果中就有一个 ID 为“搜索”的 div。从纯字符串的角度来看，您可以在源字符串中搜索它，如下所示：

```
dim searchTerm as string = "<div id=""search"""
dim searchLoc as integer = 0
searchLoc = sourceCode.indexOf(searchTerm) 
```

一旦您知道搜索结果部分的开始位置，您就可以先开始搜索`"<li class=""g"""`标记，然后再搜索其中的标记`"<h3 class=""r"""`。在里面`h3`是结果文本的位置。你会想消费到第一个`</h3>`并`</li>`分别获得令牌。

一旦你有了这个文本，你需要通过搜索它并删除 html 标签来清理它。您可以通过循环遍历关键字符的索引来轻松编写一个算法来仅使用链接文本。

重点是将其逐步分解成更小的部分，然后消化更小的部分。无论您如何处理它，您都将这样做。然而，使用某种解析器并利用 XPATH 选择器表达式的强大功能将比手动生成标记更容易。

纯字符串方式将是尝试完成此任务的最困难也是最慢的方式。我强烈建议您尝试使用某种形式的 HTML 解析器来解决此问题，否则您可能会在获得可行的解决方案之前发疯。

最后一点，您似乎在表单上使用了 webbrowser 控件。您可以使用此控件及其相关类来解析它检索到的页面的 html。我以前做过这个，它不是最有效的网页抓取方式，但它可以很容易。在[HTMLDocument](http://msdn.microsoft.com/en-us/library/system.windows.forms.htmldocument.aspx)类中查找涉及此控件返回对象的方法。

# ios - 点击不显示嵌入在 monkeytalk 中的日期选择器的文本字段

> ID：13934919
> 
> 赞同：1
> 
> 时间：2012-12-18T14:18:27.373
> 
> 标签：ios, objective-c

我正在尝试自动化我们的 iOS 应用程序，其中日期选择器组件将在点击文本字段（输入组件）时显示。

在使用 Monkey Talk 进行录制时，它会同时记录对文本字段的点击和日期选择器组件中的日期选择。

回放时，脚本成功完成（如monkeytalk控制台所示），但点击文本字段操作不显示日期选择器。

# c# - 在 FlipView 的 KeyDown 事件中处理箭头键

> ID：13934924
> 
> 赞同：2
> 
> 时间：2012-12-18T14:18:48.743
> 
> 标签：c#, .net, xaml, windows-runtime, windows-store-apps

我在我的 Windows Store 应用程序中使用了一个 FlipView，它显示了一个项目列表。FlipView 应该在水平轴上翻转其项目（有效）。此外，这些项目位于 ScrollViewer 中，并且通常高于显示的高度，因此有一个垂直滚动条。

我希望用户能够使用向上/向下箭头键滚动，但使用左右箭头键进行翻转。

现在，所有箭头键都会触发翻转。

我尝试了很多事情，使用行为，注册到 KeyDown 事件，但箭头键没有触发 KeyDown 事件。

我也尝试在 CoreWindow.KeyDown 事件中注册，但事件到达那里已经处理，所以我不能做任何事情来阻止翻转视图翻转。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:35:23.217

您可以通过将其 IsTabStop 属性设置为 false 来更改 FlipViewItems 行为；

```
 <Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <Grid.Resources>
        <Style TargetType="FlipViewItem">
            <Setter Property="IsTabStop" Value="False"/>
        </Style>
    </Grid.Resources>

    <FlipView x:Name="FlippOut">
    ... 
```

这将隐式地将 FlipViewItem 的样式设置为不是制表符。这样，您的滚动查看器将获得所有制表位。然后，您可以在 ScrollViewer 上使用 AddHandler 来捕获其 KeyDown 事件，如果它是左或右，则翻转翻转视图。

不过要提醒一句，在 FlipViewItem 上更改此属性似乎确实会使 FlipView 在某些情况下闪烁，例如当您手动将 SelectedIndex 设置为某个值时（不确定在这种情况下是否会出现问题）。我刚刚在 MSDN 论坛上发布了关于闪烁的帖子，仍在等待回复，看看这是否是他们的错误或其他问题：[http ://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/ ffd5fe5d-de6e-4f22-82b7-e7cd82d488ad](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/ffd5fe5d-de6e-4f22-82b7-e7cd82d488ad)

可能值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:25:14.290

看起来您将无法使用标准键事件。

试试这个：在您的 XAML 中，在 FlipView 之后放置一个 Grid。所以你会有

```
<FlipView>...</FlipView>
<Grid KeyUp="grid_KeyUp" /> 
```

在这种情况下，如果您可以捕获它，请将事件设置为已处理，这样它就不会冒泡到 FlipView。然后，您可以使用此事件处理程序（或滚动它）通过处理适当的键来手动导航翻转视图。

# haskell - Haskell 似乎工作正常，但不是

> ID：13934925
> 
> 赞同：2
> 
> 时间：2012-12-18T14:18:50.933
> 
> 标签：haskell

这是我对 Rabin Karp 算法的实现。似乎它基本上适用于所有事情。例如：

拉宾卡普“安德鲁”“画”=真

拉宾卡普“安德鲁”阿兹“=假

所以这很好，但是，当我这样做时出于某种奇怪的原因”

拉宾卡普“你好”“嗨”

它返回真。它似乎只发生在这两个词上，我还没有遇到任何其他组合。将不胜感激任何反馈，为什么它会发生。

```
import Data.Char

hash :: String -> Int
hash [] = -1
hash (x:xs) = (ord x + (hash xs))

rabinKarp :: String -> String -> Bool
rabinKarp [] _ = False
rabinKarp mainString patternString =
    let
     hashPattern = hash patternString
     hashMain = hash (take (length patternString) mainString)
    in if hashPattern == hashMain
    then True
    else rabinKarp (drop 1 mainString) patternString 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-18T14:21:30.207

```
Prelude> fromEnum 'h' + fromEnum 'i'
209
Prelude> fromEnum 'e' + fromEnum 'l'
209 
```

你有一个哈希冲突。所有散列函数都存在散列冲突的可能性，但是像序数之和这样简单的函数有相当多的冲突。

当您有匹配的哈希时，您仍然需要比较字符串以检查您是否真的有匹配或冲突。

# cordova - Phonegap - 以度数和磁场为单位的设备方向

> ID：13934926
> 
> 赞同：8
> 
> 时间：2012-12-18T14:18:57.543
> 
> 标签：cordova, phonegap-plugins

谁能告诉我是否有可能通过 Phonegap 以度数（手机相对于地面的角度）获得 Android 设备方向？另外，是否也可以得到磁场？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-18T14:25:44.503

[PhoneGap 文档](http://docs.phonegap.com/en/2.2.0/cordova_compass_compass.md.html#Compass)

> 指南针是一种传感器，可检测设备指向的方向或航向。它以 0 到 359.99 度为单位测量航向。
> 
> 指南针航向信息通过使用 compassSuccess 回调函数的 CompassHeading 对象返回。

```
function onSuccess(heading) {
    alert('Heading: ' + heading.magneticHeading);
};

function onError(error) {
    alert('CompassError: ' + error.code);
};

navigator.compass.getCurrentHeading(onSuccess, onError); 
```

如果您想访问手机的 x、y 或 z 轴的旋转度数，您可以简单地使用纯 HTML5。这是一篇很棒的文章：[这最终：使用设备方向](http://www.html5rocks.com/en/tutorials/device/orientation/)

代码示例：

```
 window.addEventListener('deviceorientation', function(eventData) {
// gamma is the left-to-right tilt in degrees, where right is positive
var tiltLR = eventData.gamma;

// beta is the front-to-back tilt in degrees, where front is positive
var tiltFB = eventData.beta;

// alpha is the compass direction the device is facing in degrees
var dir = eventData.alpha

// deviceorientation does not provide this data
var motUD = null;

// call our orientation event handler
deviceOrientationHandler(tiltLR, tiltFB, dir, motUD);
}, false); 
```

![例子](../Images/bf8e8fb49b0456e45f7632e9978a13c3.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:25:30.667

可以使用 html5 确定设备方向

访问[这里](http://www.html5rocks.com/en/tutorials/device/orientation/)了解更多详情。

由于我们可以通过 html5/phonegap 使用加速度计，我们可以从中获取方向角度和所有此类数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:27:24.777

据我所知，在phonegap android中你可以获得[加速度计](http://docs.phonegap.com/en/1.0.0/phonegap_accelerometer_accelerometer.md.html)数据

和 [罗盘](http://docs.phonegap.com/en/1.0.0/phonegap_compass_compass.md.html#Compass)数据

# actionscript-3 - 无法通过操作脚本正确调整图像大小

> ID：13934928
> 
> 赞同：0
> 
> 时间：2012-12-18T14:19:01.380
> 
> 标签：actionscript-3, mobile, image-resizing

嗨，当我单击缩略图时，我正在尝试添加图像。我知道我必须使用侦听器（Event.COMPLETE ？），但是当我旋转平板电脑时，图像没有正确调整大小。

我认为问题在于我无法在 addImage1() 函数中调整图像大小，因为图像尚未加载，但我无法在侦听器函数中使用 newImg.width 来重置图像宽度。

非常感激任何的帮助。代码如下：-)

```
 <?xml version="1.0" encoding="utf-8"?>
    <s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" title="ZOOM Pictues with Tap"
    resize="view1_resizeHandler(event)">

<s:layout>
      <s:VerticalLayout/>
    </s:layout>
    <fx:Declarations>
      <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

     <fx:Script>
    <![CDATA[

    import mx.events.FlexEvent;
    import mx.events.ResizeEvent;

    public var hasImageBeenAdded:Boolean = false;
    private var imageLastWidth:Number;
    private var imageLastHeight:Number;
    private var zoomFactor:Number;
    private var imageNumber:Number;

    private var rhsKeepWidth:int;
    private var rhsKeepHeight:int;
    private var rhsKeep:Boolean = false;

    protected function view1_resizeHandler(event:ResizeEvent):void
    {

      if(rhsKeepWidth > rhsKeepHeight) // Was Landscape is now Portrait
      {
        var tmpWidth2:int = rhsKeepWidth;
        var tmpHeight2:int = rhsKeepHeight;
        rhsKeepWidth = tmpHeight2-lhs.width;
        rhsKeepHeight = tmpWidth2+lhs.width;                
      }
      else //Was Portrait is now Landscape
      {
        var tmpWidth1:int = rhsKeepWidth;
        var tmpHeight1:int = rhsKeepHeight;
        rhsKeepWidth = tmpHeight1-lhs.width;
        rhsKeepHeight = tmpWidth1+lhs.width;
      } 
      addImage1();
    }

    protected function removeAllImages():void
    {       
      var totalElements : int = rhs.numElements;
      for(var i:int=totalElements-1;i>=0;i--)
      {
        rhs.removeElementAt(i);
      }
    }

    private function onImageLoaded(e:Event):void
    {
      var zoomFactor1:Number;
      var zoomFactor2:Number;

      imageLastWidth = e.target.sourceWidth;
      imageLastHeight = e.target.sourceHeight;

      if(rhsKeep != true) //Need to set the rhs VGroup dimensions
      {
        rhs.width = hGroup1.width-lhs.width;
        rhs.height = hGroup1.height;
        rhsKeep = true;
        rhsKeepWidth = rhs.width;
        rhsKeepHeight = rhs.height;
      }

      zoomFactor1 = rhsKeepWidth/imageLastWidth;
      zoomFactor2 = rhsKeepHeight/imageLastHeight;

      if(zoomFactor1 < zoomFactor2)
      {
        zoomFactor = zoomFactor1;
      }
      else
      {
        zoomFactor = zoomFactor2;
      }
      trace("zoomFactor=" + zoomFactor);
    }

    public function addImage1():void
    {
      var i:int;
      var newImg:Image = new Image();
      removeAllImages();
      newImg.source = "images/1.jpg";
      newImg.x = 0;
      newImg.y = 0;
      newImg.addEventListener(Event.COMPLETE,onImageLoaded);
      rhs.addElementAt(newImg,0);
      hasImageBeenAdded = true;
      imageNumber = 1;
      trace("Image Width= " + newImg.width);
      newImg.scaleX = newImg.scaleY = zoomFactor;
    }

    ]]>
     </fx:Script>

    <s:HGroup id="hGroup1" width="100%" height="100%">      
      <s:Scroller id="scrollerL"  height="100%">
        <s:VGroup id="lhs" width="15%" height="100%" gap="10" 
        horizontalAlign="center" verticalAlign="top">
          <s:Image width="100" height="100" source="thumbs/1.jpg" click="addImage1()"/>
      </s:VGroup>
      </s:Scroller>

      <s:Scroller id="scroller1" height="100%" width="100%">
        <s:VGroup id="rhs" height="100%">
        </s:VGroup>
      </s:Scroller>
     </s:HGroup>

    </s:View> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:34:36.427

关于设备方向，您应该使用：

```
trace(Stage.deviceOrientation);
trace(Stage.orientation); 
```

它们是只读字符串，输出有关设备和屏幕方向的信息。您可以手动设置舞台的方向：

```
Stage.setOrientation(StageOrientation.DEFAULT); 
```

* * *

关于图像加载，您需要 Event.COMPLETE 的 eventListener 并且您还应该将内容转换为 Image：

```
var loader:Loader = new Loader();
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, function(event:Event):void {
    trace("Image loaded");
    // Handle code here
    // Use: (loader.content as Image)
});
loader.load(new URLRequest("images/1.jpg")); 
```

# c# - 您可以从另一个程序编译 C++ 文件以生成汇编程序输出吗？

> ID：13934935
> 
> 赞同：0
> 
> 时间：2012-12-18T14:19:24.827
> 
> 标签：c#, compilation, external-process

假设计算机上安装了编译器（G++ 或 VC++），有没有办法从 C# 编译 C++ 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:22:47.170

您应该能够使用您在命令行中进行的相同编译器调用并使用[`Process`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)该类重新创建它。MSDN 页面有如何使用的示例`Process`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:22:14.287

是的，您只需使用正确的参数调用 c++ 编译器。然而，有一些定制的工具可以做这个 Make 和 msbuild 例如，所以我怀疑一个新工具会更好地为你服务。

# extjs4 - 如何使用按钮刷新视口的中心区域

> ID：13934945
> 
> 赞同：0
> 
> 时间：2012-12-18T14:20:15.370
> 
> 标签：extjs4, extjs-mvc

西部区域有刷新中心区域的按钮。但它没有用。任何人都可以帮助我。

我使用视口作为框架。我是 ExtJS 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:25:16.003

如果您提供一些有助于解决您的问题的代码。

如果要更新图表，请获取图表的 id 并使用数据更新图表。如果您想通过删除现有组件来添加完全不同的组件，您可以采取多种方式。以下是其中之一。

```
var center = Ext.getCmp('centerRegionId'); 
center.removeAll();
center.add({xtype:panel});//new component 
```

# c# - 检测是否以提升的权限运行？（包括域管理员帐户）

> ID：13934946
> 
> 赞同：2
> 
> 时间：2012-12-18T14:20:18.323
> 
> 标签：c#, uac, detection, elevated-privileges

扩展这个问题：[检测是否以管理员身份运行有或没有提升的权限？](https://stackoverflow.com/questions/1220213/detect-if-running-with-elevated-privileges)

如果“以管理员身份运行”的帐户是本地管理员，则投票最多的[答案](https://stackoverflow.com/a/4497572/120591)有效，但如果您使用域管理员帐户，则变量 isProcessAdmin 返回 false。相比之下，UAC 在提升权限时接受域管理员作为有效帐户（在 c:\windows\ 中创建文件夹，以管理员身份运行等）...我如何修改 UACHelper.IsProcessElevated 所以它也考虑到这种情况?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T14:38:31.293

您需要将[域值传递给 IsInRole](http://msdn.microsoft.com/en-us/library/86wd8zba.aspx)：

```
// DOMAINNAME\Domain Admins RID: 0x200
bool isElevated = principal.IsInRole(WindowsBuiltInRole.Administrator)
               || principal.IsInRole(0x200); 
```

# android - 在按钮单击时将搜索栏不确定设置为真

> ID：13934948
> 
> 赞同：0
> 
> 时间：2012-12-18T14:20:27.033
> 
> 标签：android, seekbar

我有一个 SeekBar：

```
SeekBar seekBar = (SeekBar) findViewById(R.id.seekBar1); 
```

我在 xml 中有一个自定义的不确定可绘制集：

```
android:indeterminateDrawable="@drawable/progress_indeterminate_horizontal" 
```

从代码

```
seekBar.setIndeterminate(true); 
```

有效，但是当我想在按钮单击时将不确定设置为 true 时不起作用 - 搜索栏变黑。

```
 Button startIndeterminateMode = (Button) findViewById(R.id.startIndeterminateMode);
        startIndeterminateMode.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {

                seeekBar.setIndeterminate(true);

            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:15:05.557

I am not sure if seekbar supports indeterminate mode, You should rather have seekbar and Progressbar in a single layout and make them `visible` and `GONE` alternatively depending upon onClick

# android - 旋转设备后不显示带有 setRetainInstanceState(true) 的 DialogFragment

> ID：13934951
> 
> 赞同：15
> 
> 时间：2012-12-18T14:20:47.627
> 
> 标签：android

我有一个关于 DialogFragment 的问题。我正在尝试制作一个对话框，在设备旋转后保持其状态。这个对话框有一堆对诸如适配器和其他较重对象之类的东西的引用，我需要在旋转时保持它，如果可能的话，不必将每个引用都设为 Parcelable 或 Serializable 以便我使用 onSaveInstanceState 来保存和恢复它们重新创建原始活动。

我注意到 DialogFragment 上有一个名为 setRetainInstance(boolean) 的方法，它允许您在重新创建活动时保留对话框片段实例。但是，当我现在旋转设备时，对话框不再显示。我知道我可以从活动的 FragmentManager 中获取它，但我找不到让它再次可见的方法。对此有何建议？

谢谢，米海

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-24T02:14:00.123

您需要做的事情很少：

1.  使用实例工厂方法来启动 DialogFragment 实例，如下所示：

    ```
    public static MyDialogFragment newInstance(MyModel model) {
        MyDialogFragment myDialogFragment = new MyDialogFragment();
        Bundle bundle = new Bundle();
        bundle.putSerializable("MODEL", model);
        myDialogFragment .setArguments(bundle);
        return myDialogFragment;
    } 
    ```

2.  通过将 setRetainInstance(true) 放在 onCreate 中，在重新创建原始活动后，将保留在片段中声明的所有引用

    ```
    @Override
    public void onCreate(Bundle icicle) {
        this.setCancelable(true);
        setRetainInstance(true);
        super.onCreate(icicle);

    } 
    ```

3.  通过这样做避免旋转消失

    ```
    @Override
    public void onDestroyView() {
        if (getDialog() != null && getRetainInstance())
            getDialog().setDismissMessage(null);
        super.onDestroyView(); 
    ```

    }

4.  通过使用获取您的对象

    ```
    (MyModel) getArguments().getSerializable("MODEL") 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-31T11:21:48.387

只要您执行以下操作，就应该自动保留对话框片段：

1.  如果您调用 Activity onSaveInstanceState()，**请确保调用超级函数！！！！**. 就我而言，这是关键。还要确保你在 Fragment 中做同样的事情。
2.  如果使用`setRetainInstance`，则需要手动存储值。否则，在大多数情况下，您应该不必担心。如果你正在做一些更复杂的事情，你可能需要`setRetainInstance(true)`，否则忽略它。
3.  有些人抱怨支持库中的一个错误，即在不应该发送关闭消息时发送。最新的支持库似乎已经解决了这个问题，所以你不必担心这个问题。

# asp.net - c#如何获取httpResponse.BinaryWrite处理的流

> ID：13934952
> 
> 赞同：5
> 
> 时间：2012-12-18T14:20:48.390
> 
> 标签：asp.net, httpresponse, nmock

我有以下方法在 HttpResponse 对象中写入流。

```
public HttpResponse ShowPDF(Stream stream)
    {
        MemoryStream memoryStream = (MemoryStream) stream;

        httpResponse.Clear();
        httpResponse.Buffer = true;
        httpResponse.ContentType = "application/pdf";
        httpResponse.BinaryWrite(memoryStream.ToArray());
        httpResponse.End();

        return httpResponse;

    } 
```

为了测试它，我需要恢复处理过的流。有没有办法从 httpResponse 对象中读取流？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:15:31.363

I have two ideas... one to mock the HttpResponse, and the other is to simulate a web server.

**1\. Mocking HttpResponse**

I wrote this before I knew which mocking framework you used. Here's how you could test your method using TypeMock.

This assumes that you pass your httpResponse variable to the method, changing the method as follows:

```
public void ShowPDF(Stream stream, HttpResponse httpResponse) 
```

Of course you would change this to passing it to a property on your Page object instead, if it is a member of your Page class.

And here's an example of how you could test using a fake HttpResponse:

```
internal void TestPDF()
{
    FileStream fileStream = new FileStream("C:\\deleteme\\The Mischievous Nerd's Guide to World Domination.pdf", FileMode.Open);
    MemoryStream memoryStream = new MemoryStream();
    try
    {
        memoryStream.SetLength(fileStream.Length);
        fileStream.Read(memoryStream.GetBuffer(), 0, (int)fileStream.Length);

        memoryStream.Flush();
        fileStream.Close();

        byte[] buffer = null;

        var fakeHttpResponse = Isolate.Fake.Instance<HttpResponse>(Members.ReturnRecursiveFakes);
        Isolate.WhenCalled(() => fakeHttpResponse.BinaryWrite(null)).DoInstead((context) => { buffer = (byte[])context.Parameters[0]; });

        ShowPDF(memoryStream, fakeHttpResponse);

        if (buffer == null)
            throw new Exception("It didn't write!");
    }
    finally
    {
        memoryStream.Close();
    }        
} 
```

**2\. Simulate a Web Server**

Perhaps you can do this by simulating a web server. It might sound crazy, but it doesn't look like it's that much code. Here are a couple of links about running Web Forms outside of IIS.

[Can I run a ASPX and grep the result without making HTTP request?](https://stackoverflow.com/questions/2394724/can-i-run-a-aspx-and-grep-the-result-without-making-http-request)

[http://msdn.microsoft.com/en-us/magazine/cc163879.aspx](http://msdn.microsoft.com/en-us/magazine/cc163879.aspx)

# windows - 来自另一个进程的 MiniDumpWriteDump

> ID：13934957
> 
> 赞同：3
> 
> 时间：2012-12-18T14:21:10.430
> 
> 标签：windows, visual-c++, unhandled-exception, minidump

我想使用 MiniDumpWriteDump 为我的应用程序生成崩溃日志。Microsoft 建议从另一个进程执行转储，这是我正在尝试做的。我遇到的问题是将`PEXCEPTION_INFORMATION`结构从父进程传递给子进程。问题是父进程拥有这个结构的内存，我需要把它交给孩子。我找到了这篇文章

[在进程外使用 MiniDumpWriteDump 时如何获取异常信息？](https://stackoverflow.com/questions/13590980/how-do-i-get-at-the-exception-information-when-using-minidumpwritedump-out-of-pr)

并且接受的答案说*“指针在看门狗进程的上下文中无效并不重要。”* 这让我相信我可以简单地将`PEXCEPTION_INFORMATION`我的未处理异常过滤器接收到的指针传递给子进程，Windows 会从父进程中读取它。这没有发生，所以我真的不知道该怎么做，此时子进程崩溃，大概是因为 Windows 试图访问这个内存，就好像它属于孩子一样。我显然在这里遗漏了一些东西，但我不确定是什么。我使用管道将数据发送到子进程，上述问题的答案说使用内存映射文件有效，但我不确定为什么，或者我是否正确理解了答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-18T07:24:41.250

调试要转储的进程。

```
typedef struct _EXCEPTION_POINTERS {
    PEXCEPTION_RECORD ExceptionRecord;
    PCONTEXT ContextRecord;
} EXCEPTION_POINTERS, *PEXCEPTION_POINTERS; 
```

ExceptionRecord 可以通过 WaitforDebugEventEx 从 EXCEPTION_DEBUG_EVENT 中获取。

ContextRecord 可以通过 OpenThread 和 GetThreadContext 以及来自 DebugEvent 的 threadid 获取

# python - 数据分箱：不规则多边形到规则网格

> ID：13934959
> 
> 赞同：13
> 
> 时间：2012-12-18T14:21:14.490
> 
> 标签：python, numpy, scipy, gis, postgis

我有数千个以表格格式存储的多边形（给定它们的 4 个角坐标），它们代表地球的小区域。此外，每个多边形都有一个数据值。该文件看起来像这样：

```
lat1,  lat2,  lat3,  lat4,  lon1,   lon2,   lon3,   lon4,   data
57.27, 57.72, 57.68, 58.1,  151.58, 152.06, 150.27, 150.72, 13.45
56.96, 57.41, 57.36, 57.79, 151.24, 151.72, 149.95, 150.39, 56.24
57.33, 57.75, 57.69, 58.1,  150.06, 150.51, 148.82, 149.23, 24.52
56.65, 57.09, 57.05, 57.47, 150.91, 151.38, 149.63, 150.06, 38.24
57.01, 57.44, 57.38, 57.78, 149.74, 150.18, 148.5,  148.91, 84.25
... 
```

许多多边形相交或重叠。现在我想创建一个 *m 矩阵，范围从 -90° 到 90° 纬度和 -180° 到 180° 经度，例如 0.25°x0.25° 以存储（面积加权）平均数据落在每个像素内的所有多边形的值。

因此，规则网格中的一个像素应获得一个或多个多边形的平均值（如果没有多边形与像素重叠，则没有）。每个多边形应根据其在该像素内的面积分数对该平均值做出贡献。

基本上，规则网格和多边形看起来像这样：

![在此处输入图像描述](../Images/11cf7565abb26d75aab3f5d36e67cae9.png)

如果您查看像素 2，您会看到该像素内有两个多边形。因此，考虑到它们的面积分数，我必须取两个多边形的平均数据值。然后应将结果存储在常规网格像素中。

我环顾网络，到目前为止还没有找到令人满意的方法。因为我在日常工作中使用 Python/Numpy，所以我想坚持下去。这可能吗？这个包看起来很有前途，但我不知道从哪里开始......将所有内容移植到[postgis](http://pypi.python.org/pypi/Shapely)数据库是一项非常艰巨的工作，我想我的方式会有很多障碍。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T17:29:01.853

有很多方法可以做到这一点，但是，Shapely 可以提供帮助。看来您的多边形是四边形的，但我将绘制的方法并不依赖于此。除了shapely.geometry中的[box()](http://toblerity.github.com/shapely/manual.html#shapely.geometry.box)和[Polygon()](http://toblerity.github.com/shapely/manual.html#Polygon)之外，您不需要任何其他东西。

对于每个像素，通过将像素边界与每个多边形的最小边界框进行比较，找到与其*大致*重叠的多边形。

```
from shapely.geometry import box, Polygon

for pixel in pixels:
    # say the pixel has llx, lly, urx, ury values.
    pixel_shape = box(llx, lly, urx, ury)

    for polygon in approximately_overlapping:
        # say the polygon has a ``value`` and a 2-D array of coordinates 
        # [[x0,y0],...] named ``xy``.
        polygon_shape = Polygon(xy)
        pixel_value += polygon_shape.intersection(pixel_shape).area * value 
```

如果像素和多边形不相交，则它们相交的面积将为 0，并且该多边形对该像素的贡献消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T15:52:25.783

我在最初的问题中添加了一些内容，但到目前为止这是一个可行的解决方案。你有什么想法可以加快速度吗？它仍然很慢。作为输入，我有超过 100000 个多边形，meshgrid 有 720*1440 个网格单元。这也是我更改顺序的原因，因为有很多没有相交多边形的网格单元。此外，当只有一个多边形与网格单元相交时，网格单元接收多边形的整个数据值。此外，由于我必须存储“后处理”部分的面积分数和数据值，因此我将可能的交叉点数设置为 10。

```
from shapely.geometry import box, Polygon
import h5py
import numpy as np

f = h5py.File('data.he5','r')
geo = f['geo'][:] #10 columns: 4xlat, lat center, 4xlon, lon center 
product = f['product'][:]
f.close()

#prepare the regular meshgrid
delta = 0.25
darea = delta**-2
llx, lly = np.meshgrid( np.arange(-180, 180, delta), np.arange(-90, 90, delta) )
urx, ury = np.meshgrid( np.arange(-179.75, 180.25, delta), np.arange(-89.75, 90.25, delta) )
lly = np.flipud(lly)
ury = np.flipud(ury)
llx = llx.flatten()
lly = lly.flatten()
urx = urx.flatten()
ury = ury.flatten()

#initialize the data structures
data = np.zeros(len(llx),'f2')+np.nan
counter = np.zeros(len(llx),'f2')
fraction = np.zeros( (len(llx),10),'f2')
value = np.zeros( (len(llx),10),'f2')

#go through all polygons
for ii in np.arange(1000):#len(hcho)):

    percent = (float(ii)/float(len(hcho)))*100
    print("Polygon: %i (%0.3f %%)" % (ii, percent))

    xy = [ [geo[ii,5],geo[ii,0]], [geo[ii,7],geo[ii,2]], [geo[ii,8],geo[ii,3]], [geo[ii,6],geo[ii,1]] ]
    polygon_shape = Polygon(xy)

    # only go through grid cells which might intersect with the polygon    
    minx = np.min( geo[ii,5:9] )
    miny = np.min( geo[ii,:3] )
    maxx = np.max( geo[ii,5:9] )
    maxy = np.max( geo[ii,:3] )
    mask = np.argwhere( (lly>=miny) & (lly<=maxy) & (llx>=minx) & (llx<=maxx) )
    if mask.size:
        cc = 0
        for mm in mask:
            cc = int(counter[mm])
            pixel_shape = box(llx[mm], lly[mm], urx[mm], ury[mm])
            fraction[mm,cc] = polygon_shape.intersection(pixel_shape).area * darea
            value[mm,cc] = hcho[ii]
            counter[mm] += 1

print("post-processing")
mask = np.argwhere(counter>0)
for mm in mask:
    for cc in np.arange(counter[mm]):
        maxfraction = np.sum(fraction[mm,:])
        value[mm,cc] = (fraction[mm,cc]/maxfraction) * value[mm,cc]
    data[mm] = np.mean(value[mm,:int(counter[mm])])

data = data.reshape( 720, 1440 ) 
```

# jira - JIRA 数据库值插件自定义 sql

> ID：13934960
> 
> 赞同：2
> 
> 时间：2012-12-18T14:21:15.517
> 
> 标签：jira

该`jira-database-values-plugin-10290.properties`文件是：

```
# The database connection parameters

database.driver=net.sourceforge.jtds.jdbc.Driver
database.user=...
database.password=...
database.connection.url=jdbc:jtds:sqlserver://localhost:1433/jiradb

# Cache Timeout (= 15 minutes by default). The actual db is queried only once and then the results are kept in the cache for the given timeout. Uncomment the line below to change it.
#cache.timeout=900000

# The SQL Query that will be executed on the database

sql.query=select start_date from date_table where personel like (select reporter from jiraissue where pkey like '${jira.project.key}' )

# The column number (starting from 0) that contains the primary key of the returned data.
primarykey.column.number=0
# The pattern that should be used to render the data in view mode. Use {column_number} as placeholders. You can use HTML, but make sure you close your tags properly!
rendering.viewpattern={0}
# The pattern that should be used to render the data in edit mode. Use {column_number} as placeholders.
rendering.editpattern={0}
# The pattern that should be used to render the data in searcher. Use {column_number} as placeholders.
rendering.searchpattern={0} 
```

当我如下提及特定项目密钥（例如 JRA-621 ）时，它可以正常工作..

```
sql.query=select start_date from date_table where personel like (select reporter from jiraissue where pkey like 'JRA-621' ) 
```

但是当我想调用当前项目键值时，如下所示，它不起作用:(

```
sql.query=select start_date from date_table where personel like (select reporter from jiraissue where pkey like '${jira.project.key}' ) 
```

我的表达有什么问题？

```
id    personel    start_date   end_date
==    ========    ==========   ========
0     u.name      2012-05-05   NULL
1     u.name2     2012-04-02   NULL
... 
```

谢谢

# java - Java/WAS 8.5 中关于套接字绑定的自由配置文件中令人愤怒的 heisenbug

> ID：13934961
> 
> 赞同：2
> 
> 时间：2012-12-18T14:21:17.150
> 
> 标签：java, websphere, websphere-liberty, strace

我在 Java 6/Websphere 8.5 上遇到套接字绑定错误（Liberty 配置文件，Websphere 的精简可用版本）。当再次立即杀死并启动应用程序服务器时，我得到：

> [错误] CWWKO0221E: TCP 通道 defaultHttpEndpoint 初始化未成功。主机 * 和端口 9988 的套接字绑定未成功。该端口可能已在使用中。

这是因为 Java 或 WAS 都没有正确释放 IPv6 套接字。

但是，这是一个障碍：当我通过`strace`（使用 -f 选项来跟踪子进程）运行 WLP 时，**不会**发生绑定错误。

到底是怎么回事？为什么我不能通过这个捕捉到这个`strace`？

我可以通过指定来解决这个问题`soReuseAddress`，但这里让我担心的是为什么/如何通过`strace`（即不依赖愚蠢的运气）来捕捉这个问题以及为什么它不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T14:34:32.620

您可能会发现将[`soReuseAddr`](https://stackoverflow.com/questions/775638/using-so-reuseaddr-what-happens-to-previously-open-socket)选项添加到您的`httpEndpoint`配置会有所帮助，尤其是在 Linux 平台上。例如，

```
<httpEndpoint id="defaultHttpEndpoint"
             host="*"
             httpPort="9080">
      <tcpOptions soReuseAddr="true" />
 </httpEndpoint> 
```

尽管服务器进行了最佳尝试，但操作系统可能需要一段时间才能释放端口，这对于 Liberty 尤其明显，因为它往往会快速反弹。

# c# - 包装 DLL - 了解导入失败的原因

> ID：13934962
> 
> 赞同：1
> 
> 时间：2012-12-18T14:21:22.817
> 
> 标签：c#, c++, dll, dllimport

**背景**

我有一个嵌入式系统，它运行一个最初用 C++ 编写并在 Visual Studio 中编译的应用程序，这会产生一个可执行文件和 30 多个 DLL。这些库无法在 VS 对象浏览器或 P/Invoke Interop Assistant 等其他工具中浏览。

在 Dependency Walker 中加载一些 DLL 表明它们都缺少依赖关系树深处的一些依赖项（*cdfview.dll*、*dwmapi.dll*、*w32topl.dll*，...），但根据[这个问题](https://stackoverflow.com/questions/173433/how-to-fix-dwmapi-dll-delay-load-dependency-under-winxp)，这可能不是问题。

我有**一些**源代码文件和**所有**已编译的 DLL。应用程序当前运行没有问题，表明没有真正的依赖问题。

我正在尝试调用一些库函数并最终使用 C# 制作包装器，但即使是最简单的函数也无法成功导入和调用。我总是收到以下错误：

> 无法加载 DLL 'dllName.dll'：动态链接库 (DLL) 初始化例程失败。（HRESULT 异常：0x8007045A）

**示例代码 [编辑]**

从 C++ 源代码头文件中，我有以下声明：

```
#define OB_API __declspec(dllexport) __cdecl 

typedef unsigned long DWORD;  // From windef.h
typedef DWORD OBSTATUS;

OBSTATUS OB_API TestObj(void); 
```

在 C++ 源代码文件中给出了以下定义（似乎总是返回**true**）：

```
BOOL WINAPI DllMain(HANDLE  /* hModule */, 
                      DWORD   ul_reason_for_call, 
                      LPVOID  /* lpReserved */
                      )
{
    switch (ul_reason_for_call)
    {
    case DLL_PROCESS_ATTACH:
    case DLL_PROCESS_DETACH:
    case DLL_THREAD_ATTACH:
    case DLL_THREAD_DETACH:
        break;
    }
    return TRUE;
} 
```

在我的 C# 应用程序类中，我添加了以下声明：

```
[DllImport(@"dllName.dll", CallingConvention=CallingConvention.Cdecl)
public static extern ulong TestObj(); 
```

DLL 和 C# 应用程序二进制文件位于同一目录中。

**问题**

通过研究错误，似乎有很多原因可能会引发此特定异常，我想知道如何进一步解决此类问题。

有没有办法获得有关初始化例程失败原因的更详细信息？

*（注意：目标系统运行的是 .NET framework 2.0）*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T14:36:01.570

您正在加载的 DLL 包含一个 DllMain() 函数。这很常见，这样的函数会初始化 DLL 的状态。Windows 确保在加载 DLL 时调用此函数，它会在您第一次调用该 DLL 导出的函数时自动发生。

问题是，该函数返回 FALSE 表示它无法正确初始化 DLL。当然，这并没有给出关于它*为什么*返回 FALSE 的全部信息。Windows 只能生成错误 1114，ERROR_DLL_INIT_FAILED。如果 DLL 本身不输出任何诊断信息，那么您只能调试代码。从项目+属性开始，调试选项卡，勾选“启用非托管代码调试”选项。

手指交叉，您在“输出”窗口中看到一条消息。赔率不是很好。如果您没有 DLL 的源代码，那么您将需要 DLL 的供应商或作者的帮助。给他一份像这样失败的测试项目的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-12T02:30:32.653

也许原因是需要安装旧的 Net Framework 版本，如 2.0、3.0、3.5，....它对我有用：D

# java - Quartz 2.0.2 - 安排重复事件

> ID：13934968
> 
> 赞同：0
> 
> 时间：2012-12-18T14:21:47.263
> 
> 标签：java, jakarta-ee, quartz-scheduler

我迷失在石英 2.0 的定义中。我想安排`SimpleTrigger`哪个

*   从 2012 年 12 月 20 日开始，直到 2017 年 12 月 31 日
*   每三天举行一次
*   将在下午 5 点发生。

    ```
     Date start = 12/20/2012;
         Date endDate = 12/31/2017;
         SimpleTrigger trigger = newTrigger()
                    .withIdentity("trigger3", "group1")
                    .startAt(startDate) 
                    .withSchedule(simpleSchedule()
                    .withIntervalInHours(3 * 24)                   
                    .build(); 
    ```

如何添加下午 5 点`endDate`的出现和参数`TriggerBuilder`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T19:36:21.957

试试这个：

```
Date start = 12/20/2012;
Date endDate = 12/31/2017;
SimpleTrigger trigger = newTrigger()
    .withIdentity("trigger3", "group1")
    .startAt(startDate) 
    .withSchedule(cronSchedule("* * 17 0/3 * *").build())
    .endAt(endDate)
    .build; 
```

我自己没有对此进行测试，但这应该可以工作，或者至少可能需要一些调整。

# reactiveui - ReactiveUI 4.2.1 NuGet 包

> ID：13934973
> 
> 赞同：1
> 
> 时间：2012-12-18T14:21:57.707
> 
> 标签：reactiveui

我正在尝试将 ReactiveUI NuGet 包添加到一个新的 VS2012 C# WPF .NET 4.5 项目中，但 NuGet 包管理器报告了一个问题“无法解决依赖关系 'Microsoft.Bcl.Async.NotBeta'”。ReactiveUI NuGet 包中的依赖项是否错误，或者是否已删除 Microsoft.Bcl.Async.NotBeta 包？我可以成功安装 Rx-Main，它显然不依赖于这个 Async.NotBeta 包。

这是包管理器控制台的确切错误：

```
PM> install-package reactiveui
Attempting to resolve dependency 'reactiveui-core (= 4.2.1)'.
Attempting to resolve dependency 'Rx-Main (= 2.0.21114)'.
Attempting to resolve dependency 'Rx-Interfaces (= 2.0.21114)'.
Attempting to resolve dependency 'Rx-Core (= 2.0.21114)'.
Attempting to resolve dependency 'Rx-Linq (= 2.0.21114)'.
Attempting to resolve dependency 'Rx-PlatformServices (= 2.0.21114)'.
Attempting to resolve dependency 'Microsoft.Bcl.Async.NotBeta (= 1.0)'.
install-package : Unable to resolve dependency 'Microsoft.Bcl.Async.NotBeta (= 1.0)'.
At line:1 char:1
+ install-package reactiveui
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [Install-Package], InvalidOperationException
    + FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T21:26:59.777

升级到 4.2.2 版本，已经修复，见[这个 Github issue](https://github.com/reactiveui/ReactiveUI/issues/143)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T20:34:26.850

我有同样的问题，试试这个。1- 关闭 VS2012 2- 删除本地包文件夹 3- 打开 VS2012 4- 尝试将 ReactiveUI 添加到特定项目。

我将我的存储库路径移动到与整个团队共享的更高级别。

# java - “一种类型的所有对象都相等”模式的代码重用

> ID：13934975
> 
> 赞同：2
> 
> 时间：2012-12-18T14:22:09.063
> 
> 标签：java, equals, code-reuse, boilerplate

我有许多类都覆盖了它们的 equals 和 hashCode 方法，如下所示：

```
final class MyClass {
  public void statelessMethod() {
    // ...
  }

  @Override
  public boolean equals(Object obj) {
    return obj instanceof MyClass;
  }

  @Override
  public int hashCode() {
    return MyClass.class.hashCode();
  }
} 
```

这个想法是，虽然类没有任何状态，但`new MyClass().equals(new MyClass())`应该始终是正确的。

我正在寻找的是一些我可以编写（或重用）的代码模式或实用程序类，它们将尽可能多地删除样板文件。

*背景*

我正在使用这种模式来定义 Guice 模块，这样如果多个模块依赖于 UtilModule（例如），我最终不会遇到由相同类型的多个绑定引起的错误。

*额外背景*

这种模式是从 Guice Servlets InternalServletModule 复制而来的，它使用它来允许您在注入器配置中指定多个 ServletModule 模块，而无需复制作为该类的一部分提供的绑定。

**实际使用示例回答部分评论**

```
final class UtilModule extends AbstractModule {
  public void configure() {
    // bindings and things
  }

  @Override
  public boolean equals(Object obj) {
    return obj instanceof UtilModule;
  }

  @Override
  public int hashCode() {
    return UtilModule.class.hashCode();
  }
} 
```

**取决于 UtilModule 的多个模块的示例（来自评论）**

```
class Module1 extends AbstractModule {
  @Override
  protected void configure() {
    bind(SomeClass.class).to(SomeClassImpl.class);
    install(new UtilModule()); // needed by SomeClassImpl
  }
}

class Module2 extends AbstractModule {
  @Override
  protected void configure() {
    bind(MyService.class).in(Singleton.class);
    install(new UtilModule()); // needed by MyService
  }
}

class Main {
  public static void main(String[] args) {
    Injector injector = Guice.createInjector(
        new Module1(),
        new Module2());
    // ...
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:27:04.577

你的类都可以扩展一个实现equals和hashCode的通用基类。在这种情况下，您必须将引用替换`MyClass`为`this.getClass()`。

此外，`instanceof`这不是您想要的，因为当 obj 属于扩展当前类的类时，它也会返回 true。这不仅不太可能是您想要的，而且还会违反 equals 的约定，因为当您将基类的实例与扩展类的实例进行比较时，调用 equals 方法会很重要（派生的是 instanceof base，但 base 不是 instanceof 派生的）。

您的基类中的实现如下所示：

```
@Override
public boolean equals(Object obj) {
   this.getClass().equals(obj.getClass())
}

@Override
public int hashCode() {
  return this.getClass().hashCode();
} 
```

在不相关的说明中：当对象没有内部状态时，为什么不使用[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)？

# azure - 多租户环境 - 多个成员资格提供商，每个租户 1 个数据库，一个单一应用程序

> ID：13934977
> 
> 赞同：6
> 
> 时间：2012-12-18T14:22:14.563
> 
> 标签：azure, asp.net-membership, azure-sql-database, multi-tenant

我已经搜索过，找不到任何符合我的场景的东西......

多租户环境 - 多个成员资格提供程序，每个租户 1 个数据库，Azure 上的一个应用程序...

问题很简单：

可以像这样配置 Asp.net 会员提供程序吗？关于如何做的任何线索？

现在你们知道了这个问题，让我们进入细节......

这个堆栈应该在 Azure 上运行，带有用于持久数据的 SQL Azure，以及 ASP.net 成员资格、MVC4、EF5 和一些令人眼花缭乱的东西......

挑战在于：

1.  创建在 Azure 中运行单个应用程序的多租户环境（工作角色和 Web 角色，但不是特定于租户或面向租户）；

2.  数据库一对一隔离（每个租户一个数据库）；

3.  在每个数据库中运行一个 Asp.net Membership，用于对每个租户创建的用户进行身份验证和授权；

4.  一个主数据库，保存共享数据和一个主 Asp.net 成员资格，只有管理员用户（主站点管理员和租户管理员）登录...

重要的是，所有数据库都具有完全相同的结构，除了主要的......

不知道是否有帮助，但堆栈还包括 MVC4、EF5（DB First 方法）；

其实我在考虑使用MVC路由机制来收集租户标识，然后设置一个特定的Db Context，所有操作都应该应用到这里；

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T17:23:14.583

默认情况下，asp.net 成员资格不适合多租户环境，因为它不支持用于标识给定用户的成员资格和角色详细信息的租户标识符的概念。您可以选择使用自定义成员资格提供程序，也可以使用联合或 SSO，并将应用程序角色映射到用户在使用应用程序时引入的 SSO 角色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T00:44:31.147

您应该能够在运行时配置 ASP.NET 成员数据库连接字符串。 [该线程](http://forums.asp.net/p/997608/2209437.aspx)有一些选项，包括自定义成员资格提供程序或在请求生命周期的早期通过 Global.asax.cs 更改值。

# performance - “所有 cpu 的总挂钟时间”的好名字是什么？

> ID：13934979
> 
> 赞同：0
> 
> 时间：2012-12-18T14:22:34.797
> 
> 标签：performance, time

> 计算机科学中只有两个难点：缓存失效和命名。
> 
> ——菲尔·卡尔顿

我的应用程序正在报告 CPU 时间，人们有理由想知道这是多少时间，因此他们可以计算 CPU 利用率百分比。我的问题是，挂钟时间乘以 CPU 数量的名称是什么？

如果将系统的总用户、系统、空闲等时间相加，则得到总挂钟时间乘以 CPU 数量。这有什么好名字？根据 Wikipedia，[CPU 时间](http://en.wikipedia.org/wiki/CPU_time)为：

> CPU时间（或CPU使用率，处理时间）是中央处理单元（CPU）用于处理计算机程序指令的时间量，而不是等待输入/输出（I / O ) 操作。

“总时间”仅表示挂钟时间，并不意味着超过 10 秒的跨度，四 CPU 系统将具有 40 秒的“总时间”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:30:02.830

`Total Wall Clock Time of all CPUs`

为事物命名**很难**，为什么一旦找到它就浪费一个好名字？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:26:00.993

总时间：40 秒中的 15 秒。

# ruby-on-rails - 在侧边栏中添加表单

> ID：13934980
> 
> 赞同：3
> 
> 时间：2012-12-18T14:22:44.587
> 
> 标签：ruby-on-rails, activeadmin

在我的 ActiveAdmin 应用程序中，我需要在侧边栏中有一个表单（仅适用于 show 方法），它将显示一个（目前）日期选择器。一旦用户点击日期选择器，整个页面应该重新加载考虑到选择的日期（在显示控制器内）。

关于如何在侧边栏中添加这个简单表单的任何想法？

**编辑**

我尝试了以下方法，但我不确定表单如何针对当前模型以外的专用控制器。

```
sidebar :history, :only => :show do
  form do |f|
    f.input :start_date, :as => :datepicker
  end
end 
```

侧边栏中的表单如何针对当前模型之外的另一个控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:47:13.743

我想你有一个表演控制器，并不意味着表演动作。

将视图变成一个叫做“whatever”的部分（我称之为）

所以，你的whatever.erb.html 看起来像这样

```
<%= render "whatever" %> 
```

如果你使用[Jquery Ui datepicker](http://jqueryui.com/datepicker/)，你可以添加一个 onSelect 函数

```
$(".date").datepicker({ 
            dateFormat: "yy-mm-dd", 
            onSelect: function() {
            $('#range_form').submit();          
            }
       }).attr( 'readOnly' , 'true' ) 
```

如果您想要一个范围，请在视图中添加一个带有两个日期字段的表单标签，否则您只需添加一个

```
<%= form_tag('/range', :id => "range_form", :remote => true) do -%>
   <%= text_field_tag 'from', Date.now.strftime("%Y-%m-%d"),:class => "date"%>
   <%= text_field_tag 'to', Date.now.strftime("%Y-%m-%d"), :class => "date"%>
<% end %> 
```

为此，您必须在您的 routes.rb 中添加一条路线

```
match "/range/" => "show#todo_range", :as => :range 
```

在您的节目控制器中

```
def range
    time_range = ((Date.parse(params[:from]).midnight..Date.parse(params[:to]).midnight)
    @whatever = Whatever.where(:date => time_range)
end 
```

然后添加一个js视图来处理回调

```
$(".maindiv").empty().append(<%=j(render @whatever)%>) 
```

我没有测试过这个确切的代码，所以要注意拼写错误。

如果我需要编辑，祝你好运并发表评论

# javascript - 如何使 iframe 中的按钮触发父窗口中特定对象的功能？

> ID：13934981
> 
> 赞同：0
> 
> 时间：2012-12-18T14:22:44.547
> 
> 标签：javascript, jquery

我有以下 2 个 html 文件，INDEX.HTML 和 FRAME.HTML，它们显示在 INDEX.HTML 上的 iframe 中。当我单击 button1 时，我收到警报“action1: your value 1”。单击 button2 会显示警报“action1: your value 2”。

我的问题是，如何在 button3 上进行 onclick 以触发绑定到 button1 的 myfunction 对象上的 action2？这应该给我警报“action2：你的值 1”。

索引.HTML：

```
 <a id="button1" href="#">BUTTON 1</a>
    <a id="button2" href="#">BUTTON 2</a>

    <iframe id="frameforbutton3" src="frame.html"></iframe>

    <script type="text/javascript">
        //<![CDATA[
        $.fn.myfunction = function(value) {
            $(this).click(function() {
                action1();
                return false;
            });
            var action1 = function() {
                alert("action1: " + value);
            }
            var action2 = function() {
                alert("action2: " + value);
            }
        }
        $(function() {
            $("#button1").myfunction("your value 1");
            $("#button2").myfunction("your value 2");
        });
        //]]>
    </script> 
```

框架.HTML：

```
 <a id="button3" href="#">BUTTON 3</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:31:39.840

您不能从框架内访问父框架的元素，反之亦然。您*可以*做的是在父级中有一个由子级调用的函数。在父级中添加：

```
function clickButton(num) {
    $("#button" + num).click();
} 
```

...然后从孩子（frame.html）调用：

```
window.parent.clickButton(1); 
```

...或 2，取决于您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:50:32.067

您可以通过以下方式访问 iframe 内的元素：

```
var button3 = $('iframe#frameforbutton3').contents().find("#button3"); 
```

然后你可以添加一个 evenlistener ：

```
button3.myfunction("your value 3"); 
```

或直接：

```
$('iframe#frameforbutton3').contents().find("#button3").myfunction("your value 3"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T08:04:00.767

好的，我找到了一个似乎可以按预期工作的解决方案。无论我将 myfunction 绑定到页面上的多少元素，全局变量和/或函数的数量都将保持不变。正是我想要达到的目标。这是我的修改。

索引.HTML：

```
 <a id="button1" href="#">BUTTON 1</a>
    <a id="button2" href="#">BUTTON 2</a>

    <iframe id="frameforbutton3" src="frame.html"></iframe>

    <script type="text/javascript">
        //<![CDATA[
        var buttons = {};
        $.fn.myfunction = function(value) {
            var button = $(this);
            buttons[button.attr('id')] = myfunctionimpl(button, value);
        }
        var myfunctionimpl = function(button, value) {
            button.click(function() {
                action1();
                return false;
            });
            var action1 = function() {
                alert("action1: " + value);
            }
            var action2 = function() {
                alert("action2: " + value);
            }
            return {
                action2: action2
            }
        }
        $(function() {
            $("#button1").myfunction("your value 1");
            $("#button2").myfunction("your value 2");
        });
        //]]>
    </script> 
```

框架.HTML：

```
 <a id="button3" href="#" onclick="window.parent.buttons['button1'].action2(); return false;">BUTTON 3</a> 
```

单击 button3 会显示警报“action2: your value 1”。

# android - Android：是否可以在启动它的同一活动中使用从相机拍摄的照片？

> ID：13934986
> 
> 赞同：2
> 
> 时间：2012-12-18T14:22:52.630
> 
> 标签：android, android-activity, android-camera, android-view

我目前有一个活动，它在其布局中添加一个相机预览（它扩展了surfaceview），然后使用它从用户那里获取一张照片。然后我将那张照片传递给一个新的活动。我想知道是否可以只拍照然后在同一个活动中打开它？我想我会删除相机预览，然后弹出一个新视图并将拍摄的照片添加到其中？不确定这是否是要走的路。我只是觉得很烦人，我需要通过将照片保存到 SD 卡等来将照片传递给下一个活动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T14:57:08.303

为此目的使用两个活动有一些优点：

*   后退按钮允许用户在不满意时再次拍照。点击后退可能是他们做的第一件事，他们不希望后退两个逻辑步骤。我认为从设计的角度来看这是非常重要的，当使用两个活动时你可以免费获得它。
*   自动删除查看图片时不需要的所有相机控件
*   您可以在 XML 中而不是在代码中声明所有 UI

但是，您可以使用两个片段而不是活动，以获得以上奖励并避免将图像保存到文件中。一个片段用于相机预览。另一个用于显示图片。

在`onPictureTaken()`回调中，用于`decodeByteArray(data, 0, data.length)`获取`Bitmap`. 将其传递给“相机”片段。创建一个`FragmentTransaction`隐藏“相机”片段并显示“显示”片段。将事务添加到 BackStack 并提交。

请务必正确关闭相机`Framgent.onPause()`。

# google-chrome - Windows 8 桌面上的 Chrome 浏览器：触摸支持错误

> ID：13934987
> 
> 赞同：5
> 
> 时间：2012-12-18T14:22:57.373
> 
> 标签：google-chrome, windows-8, touch

Windows 8 桌面上的 Chrome 浏览器（版本 23.0.1271.97）被错误地识别为支持触摸事件。实际上它是一个桌面，也就是说，它不支持触摸事件。

参见例如 Modernizr Touch 测试： http: [//modernizr.github.com/Modernizr/touch.html](http://modernizr.github.com/Modernizr/touch.html)

有人遇到过这个问题吗？有解决方案或解决方法吗？

# mysql - SQL 删除与级联

> ID：13934992
> 
> 赞同：3
> 
> 时间：2012-12-18T14:23:13.147
> 
> 标签：mysql, sql, sql-delete, cascading-deletes, multi-table-delete

我正在创建一个联系人管理系统，记录公司的联系方式、联系人、活动、公司提交的提案和捐赠。

一家公司可以有许多联系人，可以在许多活动中提交许多提案，并且可以为许多活动捐款。公司不需要有联系人，不需要提交任何提案，也不需要捐赠。我已经成功地使用 INSERT、UPDATE 和 SELECT 进行了查询，但没有使用 DELETE。现在我正在使用这个查询来删除一家公司及其所有相关数据：

```
DELETE organizations.*, contactdetails.*, proposalorg.*, donationorg.*
FROM organizations, contactdetails, proposalorg, donationorg 
WHERE idOrg='$id' AND  
contactdetails.company_id=organizations.idOrg AND 
proposalorg.company_id=organizations.idOrg AND 
donationorg.company_id=organizations.idOrg 
```

我知道如果此查询有任何错误，它不会删除公司。我已阅读 DELETE CASCADE 作为更好的选择，但我不知道该怎么做。如果有人对如何做到这一点有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:34:53.387

要使用级联删除，您需要在表之间具有外键约束。您将在定义外键时设置级联删除规则，如下所示：

```
ALTER TABLE contactdetails ADD
CONSTRAINT FK_contactdetails_company_id FOREIGN KEY (company_id) 
REFERENCES organizations (idOrg)
ON DELETE CASCADE 
```

这将告诉数据库，当从组织表中删除一行时，如果 contactdetails 中有任何行引用它，那么这些行也应该被删除。

至于这是否是一个好主意 - 这是一个见仁见智的问题。就个人而言，我不喜欢使用它们，因为它很容易意外删除大量您可能不打算删除的数据。但我敢肯定，其他人会不同意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:33:43.343

您将“on delete cascade”与外键约束一起使用。外键约束通常放在外部 id 上，这些是您用来连接多个表的 id。

当您将外键约束与级联一起使用时，您只从主表中删除并且不使用表连接，就像在您的示例中一样。

你能展示你的表结构定义的重要部分吗？

见[http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)

# python - SQLite 外键示例

> ID：13934994
> 
> 赞同：20
> 
> 时间：2012-12-18T14:23:16.703
> 
> 标签：python, sql, sqlite, insert, foreign-keys

我不是 sql / sqlite 方面的专家。假设我们有两个表：

```
CREATE TABLE child (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT,
);

CREATE TABLE MyTableB(
  dog TEXT, 
  FOREIGN KEY(dogList) REFERENCES child(id)
); 
```

将如何插入？我的 createTable 操作是否正确？我想拥有：一个孩子可以养多只狗 一只狗可以养更多的孩子

### 编辑

**如果我想要所有孩子并为每个孩子提供与该孩子相关的狗的列表怎么办？**

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-12-18T16:02:08.570

# 多对多

为了支持拥有零个或多个狗的孩子和属于零个或多个孩子的狗，您的数据库表结构需要支持**多对多**关系。这需要三个表：

```
CREATE TABLE child (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT
);

CREATE TABLE dog (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    dog TEXT
);

CREATE TABLE child_dog {
    child_id INTEGER,
    dog_id INTEGER,
    FOREIGN KEY(child_id) REFERENCES child(id),
    FOREIGN KEY(dog_id) REFERENCES dog(id)
}; 
```

# 如何插入

对三个表中的每一个的插入必须是单独的 SQL 语句，但可以发生在同一事务的上下文中。插入 child_dog 表（称为**映射表**）必须在插入 child 和 dog 表之后发生。这有两个相关的原因：

1.  您需要知道孩子和狗的标识符才能插入到此表中。
2.  由于外键约束，如果引用的子项和/或狗在数据库或事务中不存在，则插入 child_dog 表将失败。

下面是一些用于插入的示例 SQL 语句：

```
INSERT INTO child VALUES(NULL, 'bobby');
SELECT last_insert_rowid(); -- gives the id of bobby, assume 2 for this example
INSERT INTO dog VALUES(NULL, 'spot');
SELECT last_insert_rowid(); -- gives the id of spot, assume 4 for this example
INSERT INTO child_dog VALUES(2, 4); 
```

# 在 Python 中插入

虽然你的问题没有提到 python，但是这个问题上有一个 python 标签，所以我假设你想知道如何在 python 中做到这一点。python 中的 sqlite3 模块提供了一个不错的小快捷方式，使您不必显式运行“last_insert_rowid()”函数。

```
# Import the sqlite3 module
import sqlite3
# Create a connection and cursor to your database
conn = sqlite3.connect('example.db')
c = conn.cursor()
# Insert bobby
c.execute("""INSERT INTO child VALUES(NULL, 'bobby')""")
# The python module puts the last row id inserted into a variable on the cursor
bobby_id = c.lastrowid
# Insert spot
c.execute("""INSERT INTO dog VALUES(NULL, 'spot')""")
spot_id = c.lastrowid
# Insert the mapping
c.execute("""INSERT INTO child_dog VALUES(?, ?)""", (bobby_id, spot_id));
# Commit
conn.commit()
conn.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:25:51.290

你需要为此准备三个表。这是`Many-to-Many`关系的一个例子。

```
Child
- ChildID (PK)
- Name

Dog
- DogID   (PK)
- DogName

Child_Dog
- ChildID (FK)   
- DogID   (FK) 
```

# sql - 单列上没有重复的 Oracle sql 联合

> ID：13934995
> 
> 赞同：3
> 
> 时间：2012-12-18T14:23:17.997
> 
> 标签：sql, oracle

在 Oracle 中，是否可以`union`在单列而不是整行上执行重复条件？

我有表`A`，`B`有 2 列：`item_name, price`. 我想创建一个视图`item_names`，它肯定会在表格`A`中查看是否`item_name`存在，如果存在，则使用`price`in `A`，如果不去`B`并使用`price`in `B`，那么`union`其余的`item_name`in`B`尚未添加到视图。

例如，

```
 Table A                Table B
 ----------------       ----------------
 item_name price        item_name price
 ----------------       ----------------
 shoe      10           shoe      8
 socks     2            socks     4
 shirt     5            t-shirt   3
 gloves    1            glasses   15
                        pants     7 
```

`shoe`如果有的话，我`socks`想使用`table A`'s 价格，如果没有，我想使用`table B`. 所以最后，我的观点应该是这样的：

```
 View
 -----------------------
 item_name price source
 -----------------------       
 shoe      10    A
 socks     2     A
 t-shirt   3     B
 glasses   15    B
 pants     7     B 
```

我试过了

```
 select * from A a
 where item_name in ('shoe', 'socks')
 union
 select * from B b
 where b.item_name not in 
     (select item_name from A
      where item_name in ('shoe', 'socks')) 
```

我不喜欢，因为查询`select * from A where item_name in ('shoe', 'socks')`是重复的。有没有更好/更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T14:26:57.320

我认为您正在寻找加入：

```
select coalesce(a.item_name, b.item_name) as item_name,
       coalesce(a.price, b.price) as price,
       (case when a.price is not null then 'A' else 'B' end) as source
from a full outer join
     b
     on a.item_name = b.item_name 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T14:41:20.943

由于您使用的是 Oracle，我可能会建议以下内容，它会成功

```
select NVL(A.ITEM_NAME,B.ITEM_NAME) AS ITEM_NAME, 
NVL(A.PRICE,B.PRICE) AS PRICE 
FROM A as a RIGHT JOIN B as b ON A.ITEM_NAME=B.ITEM_NAME 
```

要了解它的工作原理，只需在不使用 NVL 的情况下尝试一下，得到的右连接结果

```
A_item  A_price     B_item  B_price
shoe    10          shoe    8
socks   2           socks   4
(null)  (null)      glasses 15
(null)  (null)      t-shirt 3
(null)  (null)      pants   7 
```

由于您不想要表 A 中的空值，请使用[NVL](http://en.wikipedia.org/wiki/NVL)

NVL 在 mysql/mssql 等中也有等价的功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:31:13.407

尝试这个，

```
 create view viewname as (
    select coalesce(a.item_name, b.item_name) as item_name,
       coalesce(a.price, b.price) as price,
       (case when a.item_name=b.item_name then 'A' else 'B' end) as source
from tablea a right outer join
     tableb b
     on a.item_name = b.item_name) 
```

稍微改变了戈登的回答

# c++ - 在 C++ 中使用 Boost 正则表达式在具有特定特征的方括号之间获取答案

> ID：13934998
> 
> 赞同：1
> 
> 时间：2012-12-18T14:23:38.157
> 
> 标签：c++, regex, boost, boost-regex

我有一个这样的字符串：

```
This is a link [[abcd 1234|xyz 1234]]  [[India]] [[abcd 1234|xyz 1234]] 
```

我想得到：

```
This is a link abcd 1234 [[India]] abcd 1234 
```

我想使用具有 | 的方括号 把以前的东西拿出来| 并将其替换为整个双方括号，而不是替换任何没有 | 的双方括号 使用 Boost 正则表达式。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:33:54.907

只需使用前瞻，`(?!pattern)`

```
#include <iostream>
#include <string>
#include <boost/regex.hpp>

int main()
{
    std::string str = "This is a link [[abcd 1234|xyz 1234]]  [[India]] [[abcd 1234|xyz 1234]]";
    boost::regex re("\\[\\[(((?!\\]\\]).)+)\\|.*?]]");
    std::cout << boost::regex_replace(str, re, "$1") << '\n';
} 
```

演示： http: [//liveworkspace.org/code/2Mu5cN](http://liveworkspace.org/code/2Mu5cN)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:36:32.720

```
"\\[\\[(.*?)\|.*?]]" 
```

`[[`这将匹配分隔符之间`]]`的文本`|`。是和`$1`之间的文本。`[[``|`

# c# - 如何在 C# 中使用例外

> ID：13934999
> 
> 赞同：-5
> 
> 时间：2012-12-18T14:23:41.890
> 
> 标签：c#, linq

我有以下内容，可以满足我想要的 2 个数据表中字段的相等性

```
var matched = from s in sendTable.AsEnumerable()
                     join r in recvTable.AsEnumerable() on
                     new { BUS = s.Field<int>("BUS"), 
                           IDENT = s.Field<int>("IDENT"), 
                           STATION = s.Field<int>("STATION"), 
                           REF1 = s.Field<string>("REF1"), 
                           REF2 = s.Field<string>("REF2"),
                           REF3 = s.Field<string>("REF3"),
                           REF4 = s.Field<string>("REF4"),
                           REF5 = s.Field<string>("REF5"),
                           REF6 = s.Field<string>("REF6"),
                           REF7 = s.Field<string>("REF7"),
                           REF8 = s.Field<string>("REF8") } equals
                      new { BUS = r.Field<int>("BUS"), 
                           IDENT = r.Field<int>("IDENT"), 
                           STATION = r.Field<int>("STATION"), 
                           REF1 = r.Field<string>("REF1"), 
                           REF2 = r.Field<string>("REF2"),
                           REF3 = r.Field<string>("REF3"),
                           REF4 = r.Field<string>("REF4"),
                           REF5 = r.Field<string>("REF5"),
                           REF6 = r.Field<string>("REF6"),
                           REF7 = r.Field<string>("REF7"),
                           REF8 = r.Field<string>("REF8") } 
                     select new { Send = s, Receive = r }; 
```

我现在想要的是不等式，我该如何使用除了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:30:03.303

您可以[`Enumerable.Except`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.except.aspx)在这些字段上使用：

```
var sendIdentityFields = from s in sendTable.AsEnumerable()
                         select new
                         {
                             BUS = s.Field<int>("BUS"),
                             IDENT = s.Field<int>("IDENT"),
                             STATION = s.Field<int>("STATION"),
                             REF1 = s.Field<string>("REF1"),
                             REF2 = s.Field<string>("REF2"),
                             REF3 = s.Field<string>("REF3"),
                             REF4 = s.Field<string>("REF4"),
                             REF5 = s.Field<string>("REF5"),
                             REF6 = s.Field<string>("REF6"),
                             REF7 = s.Field<string>("REF7"),
                             REF8 = s.Field<string>("REF8")
                         };
var receivedIdentityFields = from r in sendTable.AsEnumerable()
                         select new
                         {
                             BUS = r.Field<int>("BUS"),
                             IDENT = r.Field<int>("IDENT"),
                             STATION = r.Field<int>("STATION"),
                             REF1 = r.Field<string>("REF1"),
                             REF2 = r.Field<string>("REF2"),
                             REF3 = r.Field<string>("REF3"),
                             REF4 = r.Field<string>("REF4"),
                             REF5 = r.Field<string>("REF5"),
                             REF6 = r.Field<string>("REF6"),
                             REF7 = r.Field<string>("REF7"),
                             REF8 = r.Field<string>("REF8")
                         };
var sendButNotReceived = sendIdentityFields.Except(receivedIdentityFields); 
```

当然，这只会选择带有这些字段的匿名类型，而不是`DataRows`. 如果您需要选择其中的`DataRows`一个，则`sendTable`需要将它们与此结果连接到相同的字段中。