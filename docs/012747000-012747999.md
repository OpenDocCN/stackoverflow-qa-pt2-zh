# StackOverflow 问答 12747000-12747999

# java - 在ajax之前执行actionListener？

> ID：12747000
> 
> 赞同：0
> 
> 时间：2012-10-05T13:11:29.833
> 
> 标签：java, ajax, jsf

如何在 ajax 请求之前执行 actionListener？

```
<h:commandButton actionListener=.. action=..>
<f:ajax render="test">
</h:commandButton> 
```

执行顺序是：

```
test
actionListener
action 
```

我可以更改什么以便在 f:ajax 之前执行 actionListener 方法？

* * *

完整示例：

```
<h:form>
    <h:commandButton value="test" actionListener="#{bean.toggleProgress}" action="#{bean.do()}" > 
        <f:ajax execute="@form" render="progress" />
    </h:commandButton>

    <h:panelGroup id="progress" >
        <h:outputText rendered="#{bean.progress}" />
    </h:panelGroup> 
</h:form>

class Bean {

    private progress = false;

    public boolean isProgress() {
        System.out.println("in: ajax")
        return progress;
    }

    public toggleProgress(ActionEvent e) {
        System.out.println("in: actionListener")
        progress = true;
    }

    public void do() {
        System.out.println("in: action")
    }
} 
```

系统输出是：

```
in: ajax
in: actionListener
in: action 
```

# internet-explorer - IEFrame.dll 错误标头

> ID：12747001
> 
> 赞同：0
> 
> 时间：2012-10-05T13:11:32.330
> 
> 标签：internet-explorer

我在 IE9上的此[网站上的呼叫按钮上收到 IEFrame.dll 错误和设计错误。](http://asprayni.com/)它也可能在 IE7,8 上执行，我不确定。

无论如何，什么是 IEFrame.dll 错误，我该如何解决？功能和设计都可以在 Firefox、Chrome 等上完美运行。

提前谢谢了，

菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-22T09:17:30.283

这可能有点晚了。但是我一直在为 https 页面上的这个错误而苦苦挣扎。 ![在此处输入图像描述](../Images/4b130b9526d85239ccef2bd672de7a4d.png)

看起来这是一个 microsft 已确认此错误，我们需要更新一些安全设置。这将很有用[http://support.microsoft.com/kb/2601307/en-us](http://support.microsoft.com/kb/2601307/en-us)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T22:24:27.277

我发现它通常来自 Intranet，我已经在这个帮助下修复了 - -

[http://networkingstudy.net/forums/index.php/topic,1126](http://networkingstudy.net/forums/index.php/topic,1126)

# c# - Windows 电话日历

> ID：12747005
> 
> 赞同：1
> 
> 时间：2012-10-05T13:11:46.417
> 
> 标签：c#, windows-phone-7

在我的 Windows Phone 应用程序中，我需要在系统日历中添加一些日期。有可能吗？我该如何实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:42:28.767

在当前版本的 Mango 中，您[对日历只有只读权限](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh286421%28v=vs.92%29.aspx)，因此无法直接添加。

[您可以尝试使用 Live SDK写入用户的 Hotmail 日历](http://msdn.microsoft.com/en-us/library/live/hh826523.aspx)（可能适合也可能不适合您的项目）。如果在他们的日历部分使用相同的真实帐户，您的约会就会出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-06T22:03:47.940

您始终可以将 3d 派对工具用作具有 windows phone 7 用户界面的应用程序的 Telerik，然后使用他们的自定义控件。 [http://www.telerik.com/](http://www.telerik.com/)

# macos - Firefox Mac - 强制本地 HTML 文件在新选项卡而不是新窗口中打开

> ID：12747006
> 
> 赞同：2
> 
> 时间：2012-10-05T13:11:46.200
> 
> 标签：macos, firefox

如果我在本地开发一个站点并尝试通过双击它或将它拖到 Firefox 停靠图标上来打开位于我硬盘上的 HTML 文件，它会在一个新窗口中打开。如果您同时处理多个文件，这显然会很烦人。有什么方法可以强制所有文件在新选项卡而不是新选项卡中打开？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:15:59.520

可以在此处的 Firefox 首选项中设置此选项[http://support.mozilla.org/en-US/kb/tab-preferences-and-settings](http://support.mozilla.org/en-US/kb/tab-preferences-and-settings)

您还应该检查`browser.link.open_newwindow`并确保将其设置为默认值 2 - [http://kb.mozillazine.org/Browser.link.open_newwindow.restriction](http://kb.mozillazine.org/Browser.link.open_newwindow.restriction)

# dns - 使用 Route53 作为私有 DNS

> ID：12747020
> 
> 赞同：3
> 
> 时间：2012-10-05T13:12:50.303
> 
> 标签：dns, amazon-ec2, amazon-web-services, amazon-route53

我想将 Route53 用作私有 DNS，以便将主机映射到 AWS 私有 IP 地址。我们用于测试的托管区域未在任何注册商 (company-test.com.) 中声明。

ActiveMQ 服务器 url 是 activemq.company-test.com，它映射到 AMQ 服务器的（A 记录）私有 IP 地址。此 url 只能由同一 aws 帐户拥有的其他 ec2 访问。

我的问题是如何配置 ec2 实例，以便它们可以访问 ActiveMQ 服务器而无需购买新域 company-test.com ？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:50:05.463

您可以为您的 ActiveMQ 实例分配一个[弹性 IP 。](http://aws.amazon.com/articles/1346)

> 弹性 IP 地址是为动态云计算设计的静态 IP 地址。弹性 IP 地址与您的账户相关联，而不是与特定实例相关联，您可以控制该地址，直到您选择明确释放它。但是，与传统的静态 IP 地址不同，弹性 IP 地址允许您通过以编程方式将您的公共 IP 地址重新映射到与您的账户关联的任何实例来屏蔽实例或可用区故障。

另一种选择是设置一个[虚拟私有云](http://aws.amazon.com/vpc/)(VPC)，并在那里启动您的 ActiveMQ 实例。您的私有 IP 地址不会在重新启动时更改。VPC 的另一个特点是使用[弹性网络接口](http://aws.typepad.com/aws/2011/12/new-elastic-network-interfaces-in-the-virtual-private-cloud.html)(ENI)。如果需要，您可以在不同实例之间移动接口。

# windows - 如何从 WPF 应用程序执行 CMD 中的命令？

> ID：12747025
> 
> 赞同：0
> 
> 时间：2012-10-05T13:12:54.813
> 
> 标签：windows, cmd

我需要一个小程序的帮助，我只想启动一个 CMD，然后运行如下命令：`dir`

所以我做了以下事情：

```
Process.Start("cmd", "dir"); 
```

问题是，这`dir`不是在 cmd 中执行的。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:17:39.037

尝试

```
Process.Start("cmd", "/c dir"); 
```

或者

```
Process.Start("cmd", "/k dir"); 
```

保持命令窗口打开。

# python - PyQt 和 py2exe 或 cx_freeze：AttributeError

> ID：12747033
> 
> 赞同：0
> 
> 时间：2012-10-05T13:13:36.437
> 
> 标签：python, pyqt4, py2exe, cx-freeze

在这里，我在 Win7 x64 上运行 Python 2.7.3 (x64)、PyQt 4.9.5-1 (x64)。我想将一个简单的 PyQt 脚本转换为一个 exe 文件。
这是我的python脚本：

```
#!/usr/bin/env python

import sys
from PyQt4 import Qt

a = Qt.QApplication(sys.argv)

def sayHello():
    print "Hello, World!"

hellobutton = Qt.QPushButton("Say 'Hello world!'",None)

a.connect(hellobutton, Qt.SIGNAL("clicked()"), sayHello)

hellobutton.show()
a.exec_() 
```

从命令行运行它按预期工作。我为 py2exe 使用 setup.py：

```
from distutils.core import setup
import py2exe
setup(console=['pyqt-example.py']) 
```

但是，如果我尝试使用 py2exe 0.6.9 将其转换为 exe 文件，则`python setup.py py2exe`在运行 exe 文件时会出现此错误：

```
Traceback (most recent call last):
  File "pyqt-example.py", line 6, in <module>
    a = Qt.QApplication(sys.argv)
AttributeError: 'module' object has no attribute 'QApplication' 
```

我还尝试了 cx_freeze 4.3 和`\Python27\Scripts\cxfreeze pyqt-example.py --target-dir dist`. 这导致：

```
Traceback (most recent call last):
  File "C:\Python27\lib\site-packages\cx_Freeze\initscripts\Console.py", line 27, in <module>
    exec code in m.__dict__
  File "pyqt-example.py", line 6, in <module>
    a = Qt.QApplication(sys.argv)
AttributeError: 'module' object has no attribute 'QApplication' 
```

所以我假设我错过了通知这两个工具一些 Qt 组件的位置。我到底错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:08:21.383

感谢Avaris，您的提示是正确的。避免使用模块 Qt 就是答案。这是运行良好的脚本：

```
#!/usr/bin/env python

import sys
from PyQt4 import QtGui,QtCore

a = QtGui.QApplication(sys.argv)

def sayHello():
    print "Hello, World!"

hellobutton = QtGui.QPushButton("Say 'Hello world!'",None)

a.connect(hellobutton, QtCore.SIGNAL("clicked()"), sayHello)

hellobutton.show()
a.exec_() 
```

之后，我必须这样调用 cx_freeze: `cxfreeze pyqt-example.py --include-modules atexit --target-dir dist`。它有效！

# objective-c - 设置 RestKit 时出错

> ID：12747039
> 
> 赞同：0
> 
> 时间：2012-10-05T13:13:53.360
> 
> 标签：objective-c, ios, restkit

我的 JSON 具有以下结构：

```
{
"<Person>k__BackingField" =     {
    "_email" = "name@domain.com";
    "_emailUpdate" = 1;
    "_firstName" = "First";
    "_lastName" = "Last";
};
"<SharedKey>k__BackingField" = "some-long-random-string";
} 
```

我正在使用 restkit 作为这个人登录。它创建帖子，并正确获得该响应。我的映射设置如下：

```
+(void)ConfigureAPI
{
[super ConfigureAPI];
// Initialize RestKit
[RKObjectManager managerWithBaseURLString: @"www.api_root.com/";
Class<RKParser> parser = [[RKParserRegistry sharedRegistry] parserClassForMIMEType:@"application/json"];
[[RKParserRegistry sharedRegistry] setParserClass:parser forMIMEType:@"text/plain"];

RKObjectMapping *mapping;

// Person
mapping = [RKObjectMapping mappingForClass:[Person class]];
[mapping mapKeyPath:@"_email" toAttribute:@"email"];
[mapping mapKeyPath:@"_emailUpdate" toAttribute:@"emailUpdate"];
[mapping mapKeyPath:@"_firstName" toAttribute:@"firstName"];
[mapping mapKeyPath:@"_lastName" toAttribute:@"lastName"];
[[RKObjectManager sharedManager].mappingProvider setMapping:mapping forKeyPath:@"<Person>k__BackingField"];
} 
```

当我运行应用程序并调用获取 JSON 响应的函数时，我收到以下错误：

```
Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<__NSCFString 0x7b41800> valueForUndefinedKey:]: this class is not key value coding-compliant for the key <Person>k__BackingField.' 
```

有人知道我为什么会得到这个吗？一切似乎都设置正确

**编辑**

如果有帮助，这就是我处理响应的方式：

```
 // when you get the response...
    request.onDidLoadResponse = ^(RKResponse *response){
        RKObjectMapper *mapper = [RKObjectMapper mapperWithObject:[response bodyAsString] mappingProvider:[RKObjectManager sharedManager].mappingProvider];

        Person *person = nil;
        RKObjectMappingResult *mappingResult = [mapper performMapping];
        person = [mappingResult asObject];
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T16:05:49.233

在将响应字符串传递给 RKObjectMapper 之前，您不会将响应字符串转换为 JSON 对象。您传入的响应的字符串值没有响应，`valueForKey:`这解释了您得到的异常。您可以轻松地将其转换为如下对象：

```
request.onDidLoadResponse = ^(RKResponse *response){

    NSError *error;
    id jsonObject = [response parsedBody:&error];

    if(error)
        NSLog(@"Error parsing JSON: %@", error.localizedDescription);
    else {
        RKObjectMapper *mapper = [RKObjectMapper mapperWithObject:jsonObject mappingProvider:[RKObjectManager sharedManager].mappingProvider];

        Person *person = nil;
        RKObjectMappingResult *mappingResult = [mapper performMapping];
        person = [mappingResult asObject];
    }
}; 
```

# c++ - C ++：在超出范围之前调用析构函数？

> ID：12747041
> 
> 赞同：6
> 
> 时间：2012-10-05T13:13:57.030
> 
> 标签：c++, destructor

我在子例程结束时为类调用析构函数时遇到问题，即使它应该在子例程范围之外定义。

这是显示我的问题的最小代码：

```
#include <iostream>
using namespace std;

class Foo {
private:

    double *array;

public:

Foo(int N) {
   array = new double[N];
   for (int i=0; i<N; i++) {
       array[i]=0;
   }
}

~Foo() {
   delete[] array;
}
};

void subroutine(Foo x) {
   cout << "Hello!" << endl;
}

int main() {
   Foo bar(10);
   subroutine(bar);
   subroutine(bar);
} 
```

现在对象栏的析构函数在第一个子例程完成后被调用，即使它的范围应该是整个 main() 函数？这意味着当我调用第二个子例程时，再次调用析构函数并且我得到了内存泄漏。

我发现我可以通过在子例程中通过引用调用来解决这个问题，但我对这个修复不是很满意，因为我不明白为什么它一开始就不起作用。任何人都可以为我阐明这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-05T13:15:23.110

您将按`Foo`值传递给`subroutine`函数。这意味着它有自己的副本，在退出其范围时会被销毁。

```
void subroutine(Foo x) {
   // x is a new Foo here. It will get destroyed on exiting scope,
   // resulting in a destructor call
} 
```

您的主要问题是您没有实现复制构造函数，因此不会复制动态分配的数组（只有指向它的指针）。因此，当您复制`Foo`对象时，每个副本都引用同一个数组。每个副本都会试图摧毁它。

您应该遵循[三个规则](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)并实现一个赋值运算符和一个复制构造函数，它们对数组进行“深度复制”，这样每个`Foo`对象都拥有自己的数组。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T13:17:12.920

您正在将 bar 按值传递给子例程，因此正在创建一个副本。为了避免复制通过引用传递它：

```
void subroutine(Foo& x)
{
    cout << "Hello!" << endl;
} 
```

您可以通过像这样声明复制构造函数和复制赋值运算符私有来防止意外复制您的类：

```
class Foo {
private:

    double *array;

    Foo(const Foo&);
    Foo& operator=(const foo&);

public:
    ...
}; 
```

然后你会得到一个编译错误。如果您确实需要能够复制您的类，那么您实际上需要实现这些功能来执行“深度复制”（或者更好地使用`std::vector<float>`并让它为您管理内存，包括安全复制）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T13:16:07.777

当您调用时，`void subroutine(Foo x) {`您的对象`bar`被复制（因此在函数完成后调用析构函数）。

尝试使用: `void subroutine(Foo &x) {`，它应该可以正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T13:16:03.940

您遇到的问题是您按值传递对象：

```
void subroutine(Foo x) { 
```

这是创建一个临时对象并在每次调用它时调用对象的复制构造函数/析构函数。

# escaping - 如何处理markdown中的特殊字符？

> ID：12747043
> 
> 赞同：14
> 
> 时间：2012-10-05T13:13:58.213
> 
> 标签：escaping, markdown, diacritics, multimarkdown

我刚刚发现 Markdown 和 MultiMarkdown，到目前为止我很喜欢它。但是，特殊字符在导出到 HTML 时没有正确转义，并在浏览器中显示为垃圾。

例子：

```
How does Markdown handle special characters?
============================================

For example, German is full of ä, ö, ü and ß. 
```

被转换为

```
<h1 id="howdoesmarkdownhandlespecialcharacters">How does Markdown handle special characters?</h1>

<p>For example, German is full of ä, ö, ü and ß.</p> 
```

由于我必须用德语写很多东西，所以不能手动输入转义序列。如何使用正确转义的特殊字符获得 HTML 输出？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-28T12:09:16.680

我不知道这种情况是否适用于您，但这里是：

我对挪威字母“æ”、“ø”和“å”也有同样的需求。我使用 FireFox 和附加组件“Markdown Viewer”来查看 Markdown 文档。

如果文档以普通方式保存，在 Markdown Viewer 中查看挪威语文档会呈现乱码。

使用西方（Windows 1252）编码保存文档可以使文本很好（我也尝试过使用您的德语字母）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T10:13:10.343

据我所知，这是不可能的（尽管我很乐意被证明是错误的）。我最近一直在使用 Markdown 语法在 Doxygen 中生成文档，并且不得不用 替换所有 ° 符号`&deg;`，这是一种耻辱，因为它违背了 Markdown 的理念，即使文本文件与生成的输出一样可读。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-05-22T08:39:29.263

您想要的是告诉浏览器使用 UTF-8 编码，在这种情况下，那些“特殊”字符将正确显示。UTF-8 可以通过在页面部分添加`<meta charset="UTF-8">`标签来强制执行。`<head>`

```
<!DOCTYPE html>
<html>

<head>
<meta charset="UTF-8">
<title>Title of the document</title>
</head>

<body>
<h1 id="howdoesmarkdownhandlespecialcharacters">How does Markdown handle special characters?</h1>
<p>For example, German is full of ä, ö, ü and ß.</p>
</body>
</html> 
```

字符集信息是

*   要么由您的降价直接引入到 html 转换器：例如，当调用包含 OP 的原始降价代码的
    `pandoc -o index.html index.md --standalone`
    where时，pandoc 就是这样做的，`index.md`
*   或者您可以`<meta charset="UTF-8">`在生成`*.html`文件后手动输入标签，
*   或者，您使用的降价到 html 转换器可能会提供`<meta>`在该部分中注入内容（在我们的例子中是标签）的选项`<head>`。在这种情况下`pandoc`，将是选项`-H`aka `--include-in-header`，尽管这是不必要的，因为`pandoc`默认情况下指定 UTF-8 字符集。

# css - css - 缩小父 div 以适应一个孩子的宽度并限制另一个孩子的宽度

> ID：12747045
> 
> 赞同：18
> 
> 时间：2012-10-05T13:14:02.890
> 
> 标签：css

比如说，一个父 div 有两个子 div，一个包含文本，另一个包含已知（但可变）宽度和高度的图像。

我想

*   第一个子（包含图像）div的宽度要缩小以适应图像的宽度（我可以这样做）
*   父 div（未指定宽度）缩小以适合包含图像的 div 的宽度（这也可以）
*   包含文本的第二个子 div（也具有未指定的宽度）以匹配父 div 的宽度，而与它包含的文本数量无关（这是它变得棘手的地方）。

我有一个工作版本，可以做我想要的*，直到*第二个孩子中的文本数量推动父 div 的宽度比图像的宽度更宽。

这是我的代码：

CSS：

```
#container{border:1px solid #f00;display:inline-block;}
#child1{border:1px solid #0f0;}
#child2{border:1px solid #00f;}
img {border:1px solid #000;} 
```

html:

```
<div id="container">
<div id="child1"><img src="//www.google.com/logos/2012/Teachers_Day_Alt-2012-hp.jpg" width="300" height="116"></div>
<div id="child2">Lorem ipsum dolor sit amet.</div>
</div> 
```

这是一个jsfiddle：http: [//jsfiddle.net/BmbAS/1/](http://jsfiddle.net/BmbAS/1/)

您可以通过单击“延长/缩短文本”链接来增加文本数量来查看问题所在

**tldr - 我希望所有 div 的宽度相同，等于图像的宽度**

附言。只需要现代浏览器解决方案

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-05T13:21:46.313

请参阅您的 jsFiddle 的[此编辑版本](http://jsfiddle.net/glee/qs8GJ/)。

这是添加到 CSS 中的内容：

```
#container {
    display: table-cell;
}
#child1 {
    display: table-row;
    width: 1px;
}
#child2 {
    display: table-cell;
    width: 1px;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-05-26T12:52:12.767

@Chris 提供的[答案](https://stackoverflow.com/a/12747183/6543935)使我得到以下很好的解决方案，我需要将容器 div 仅适合第一个子元素（并让其余子元素自动适应容器的宽度）：

```
div.container {
    width: fit-content;
    max-width: 100%;
    margin: 16px auto;
    display: table;
}

div.inner-primary {
    display: block;
}

div.inner-rest {
    margin-top: 8px;
    display: table-caption;
    caption-side: bottom;
}
```

```
<div class="container">
  <div class="inner-primary"><div style="width:200px; border:1px dotted #ccc; border-radius:4px; padding: 4px;">This is the main element that drives the width of the container.</div></div>
  <div class="inner-rest">This is the first of the rest divs that fit automatically to the container...</div>
  <div class="inner-rest">This is the second element...</div>
</div>
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-05T13:28:32.520

如果您愿意使用一点 javascript（本示例中为 jQuery），您可以将文本 div 的宽度设置为图像 div 的宽度。

尝试`$("#child2").css({'width': $('#child1').width()});`在你的小提琴中添加到 JS 的末尾，或者在这里查看 fork：http: [//jsfiddle.net/VXEMu/](http://jsfiddle.net/VXEMu/)

# regex - 正则表达式使用通配符删除页脚

> ID：12747048
> 
> 赞同：-1
> 
> 时间：2012-10-05T13:14:13.033
> 
> 标签：regex

好的 - 这远远超出了我对正则表达式的有限了解。我们收到来自银行实体的固定文本文件格式的报告。不幸的是，他们的系统会导出带有数据文件的页眉，在我们结束处理之前必须将其删除。页眉以相同的文本开始和结束，但内容会发生变化（日期和页码）。一个典型的看起来像：

```
00007xxxxx     LAST1,FIRST1            111111       20120930
ABCD                    EXPORT RPT          10/04/12 at 10/04/12 16:20   Seq 1501   Page    16

MRK014 Report Date: 10/04/12

Acct#          Name                   SH. Balance       QTR (YYYYMMDD)
----------------------------------------------------------------------------------------------------
00007xxxxx     LAST2,FIRST2            222222       20120930 
```

所以每个标题都以“ABCD”开头（实际上是银行的名称，为了隐私，这里只是删除了）并以 -------------------- 行结束。

我需要把它归结为两行的客户数据（00007xxxxx - 这些帐号每人都会改变）。

所以我需要从“ABCD”到“---”的末尾进行选择以删除该文本块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:30:41.753

为确保您删除报告的正确部分，我将使用更复杂的正则表达式模式。

使用正则表达式模式

```
(?<=[\n\r])ABCD\s+EXPORT\s+RPT\s[^-]+[\n\r]\-+[\n\r]+ 
```

并用空字符串替换每个匹配项。

但是，如果您的环境不支持正则表达式lookbehind，那么您必须使用模式：

```
([\n\r])ABCD\s+EXPORT\s+RPT\s[^-]+[\n\r]\-+[\n\r]+ 
```

并用第一组替换每个匹配项。

例如在***JavaScript***中它将是：

```
str.replace(/([\n\r])ABCD\s+EXPORT\s+RPT\s[^-]+[\n\r]\-+[\n\r]+/g, "$1") 
```

[在此处](http://jsfiddle.net/sfWDW/)测试此代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:29:17.703

试试这个正则表达式..这是一个Java代码..您可以在您的语言中使用给定的模式..

```
str = str.replaceAll("ABCD((.*?)[\n\r])+(\\-*)", ""); 
```

其中`str`包含您的上述数据.. 行由`\n`我假设..

# ruby-on-rails - Rails 多态到嵌套多态质量分配安全错误

> ID：12747049
> 
> 赞同：2
> 
> 时间：2012-10-05T13:14:18.557
> 
> 标签：ruby-on-rails, polymorphism, nested-attributes

Rails 新手，这个问题困扰了我一段时间。所有关于多态关联的教程似乎只有两个层次，而且从来没有嵌套在多态模型中的多态模型。真的需要帮助。

我有一个具有帖子、评论和链接模型的应用程序。评论和链接都是多态的，因为我想将链接 url 添加到评论和帖子，以及对其他事物的评论，类似于 facebook 的工作方式。我想嵌套链接模型，以便可以作为一种形式发送。发布和链接有效，但评论和链接出现 MassAssignmentSecurity 错误。

错误

```
ActiveModel::MassAssignmentSecurity::Error in CommentsController#create
Can't mass-assign protected attributes: link 
```

请求参数：

```
{"utf8"=>"✓",
 "authenticity_token"=>"

J1JfIINrtvax77M3JcbDDWvHFpyGG1ciK1DisGOLu6M=",
 "comment"=>{"content"=>"z",
 "link"=>{"link_url"=>"z"}},
 "commit"=>"Add comment",
 "forum_post_id"=>"16"} 
```

路线

```
resources :forum_posts do
  resources :comments
  resources :links
end

resources :comments do
  resources :links
end 
```

论坛_帖子模型

```
class ForumPost < ActiveRecord::Base
  attr_accessible :content, :links_attributes, :comments_attributes , :link_url

  has_many :links, :as => :linkable
  has_many :comments, :as => :commentable

  accepts_nested_attributes_for :links, :allow_destroy => true  #, :reject_if => lambda { |t| t[:link].nil?}
end 
```

评论模型

```
class Comment < ActiveRecord::Base
  attr_accessible :commentable_id, :commentable_type, :content,:links_attributes, :link_url

  belongs_to :commentable, :polymorphic => true

  has_many :links, :as => :linkable

  accepts_nested_attributes_for :links, :allow_destroy => true  #, :reject_if => lambda { |t| t[:link].nil?}
end 
```

链接模型

```
class Link < ActiveRecord::Base
  attr_accessible :description, :image_url, :link_url, :linkable_id, :linkable_type, :title, :link_id

  belongs_to  :linkable, :polymorphic => true
end 
```

论坛_帖子控制器

```
class ForumPostsController < ApplicationController
...............
def new
    @forum_post = ForumPost.new
    @link = @forum_post.links.build

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @forum_post }
    end
  end
........
end 
```

评论控制器

```
class CommentsController < ApplicationController

  def find_commentable
    params.each do |name, value|
      if name =~ /(.+)_id$/
        return $1.classify.constantize.find(value)
      end
    end
    nil
  end

  def index
    @commentable = find_commentable
    @comments = @commentable.comments
  end

  def create
    @commentable = find_commentable
    @comment = @commentable.comments.build(params[:comment])
    @comment.links.build
    if @comment.save
      flash[:notice] = "Successfully saved comment."
      redirect_to :id => nil
    else
      render :action => 'new'
    end
  end

end 
```

链接控制器

```
class LinksController < ApplicationController

    def find_linkable
    params.each do |name, value|
      if name =~ /(.+)_id$/
        return $1.classify.constantize.find(value)
      end
    end
    nil
  end

  def index
  @linkable = find_linkable
    @links = @linkable.links
  end

  def create
    @linkable = find_linkable
    @link = @linkable.link.build(params[:link])
    if @link.save
      flash[:notice] = "Successfully saved link."
      redirect_to :id => nil
    else
      render :action => 'new'
    end
  end
end 
```

评论部分视图

```
<h2>Comments</h2>

<% if commentable.comments.empty? %>
  No comments to display.
<% else %>
  <% for comment in commentable.comments %>
    <%= comment.content %>
  <% end %>
<% end %>

<% :link_url %>

<h2>New Comment</h2>
<%= form_for [@commentable, Comment.new] do |f| %>
  <div class="field">
    <%= f.label :content %><br />
    <%= f.text_area :content, :rows => 5 %>
  </div>

  <%= f.fields_for [@linkable, Link.new]  do |link| %>
   <%= render :partial => 'links/link', :locals => { :f => link } %>
  <% end%>

  <div class="actions">
    <%= submit_tag "Add comment" %>
  </div>
<% end %> 
```

链接部分视图

```
<h2>Link Previews</h2>

<div class="field">
  <%= f.label :link_url %><br />
  <%= f.text_field :link_url, :id => "url_field" %>
</div> 
```

# java - 序列化draw2d LayeredPane

> ID：12747050
> 
> 赞同：0
> 
> 时间：2012-10-05T13:14:19.540
> 
> 标签：java, serialization, draw2d

我需要一些有关 draw2d 分层窗格序列化的帮助。我阅读了有关序列化的内容，发现只有实现`Serializable`接口的类才能序列化，并且它的所有字段本身都是可序列化的，或者是瞬态的。

我有一个非常复杂的图表需要序列化，但不知道如何进行？我发现 LayeredPane 类只包含一个 List 类型的字段。在任何情况下，任何人都可以帮助如何编写，比如递归方法或其他东西，以使 LayeredPane 对象可序列化？

@mKorbel 我面临的问题的示例场景很难给出，因为它是一个非常大的应用程序的一部分。不过，我已经编造了一个案例，这可能会让您对问题有所了解：

```
public class Editor extends org.eclipse.ui.part.EditorPart {
    org.eclipse.draw2d.FreeformLayer objectsLayer;
    org.eclipse.draw2d.ConnectionLayer connectionLayer;
    public void createPartControl(Composite parent) {
        org.eclipse.draw2d.FigureCanvas canvas = new org.eclipse.draw2d.FigureCanvas(composite);

        org.eclipse.draw2d.LayeredPane pane = new org.eclipse.draw2d.LayeredPane();

        objectsLayer = new org.eclipse.draw2d.FreeformLayer();
        connectionLayer = org.eclipse.draw2d.ConnectionLayer();

        pane.add(objectsLayer);
        pane.add(connectionLayer);

        canvas.setContents(pane);

        addFigures();
        addConnections();
    }

    private void addFigures() {
        // Adds Objects, i.e.,  org.eclipse.draw2d.Figure Objects, to the objectLayer
        // which turn contains, 1 or more org.eclipse.draw2d.Panel Objects, 
        // with variable number of org.eclipse.draw2d.Label objects
    }

    private void addConnections() {
        // Adds org.eclipse.draw2d.PolylineConnection objects to the connectionLayer
        // between objects in the objectLayer
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:30:31.287

您必须扩展 LayeredPane 类，通过实现该接口使其可序列化，并提供一种从模型重建该 LayeredPane 的整个结构和属性的方法。

```
public class SerializableLayeredPanne extends LayeredPanne implements Serializable {

    private static final long serialVersionUID = 1L;

    /** 
     * the model you are able to FULLY restore layered pane and all its children from,
     * it MUST be serializable 
     */
    private final Serializable model;

    SerializableLayeredPanne(Serializable model) {
        this.model  = model;
    }

    public void init() {
        // set font, color etc.
        // add children
    }

    private void readObject(ObjectInputStream in) throws IOException, ClassNotFoundException {
        in.defaultReadObject();
        init();
    }

} 
```

因此，您必须添加一个包含从头开始构建图形树所需的所有信息的可序列化模型。

# git - 管理 GIT 分叉

> ID：12747052
> 
> 赞同：0
> 
> 时间：2012-10-05T13:14:29.163
> 
> 标签：git, version-control, project-management, git-fork

来自 Git 新手的另一个菜鸟问题。

我有一个 git repo，有两个开发人员在两个不同的分支上工作。要求是每个人都应该能够独立工作，并且在进行一些更改后，两者都会创建一个拉取请求，我会将他们的工作合并到主仓库中。发生这种情况后，两者都将从主仓库中提取更改（通过将其添加为远程）并继续处理最新代码。

我的问题-

1.  这是一个很好的方法吗？
2.  我应该为每个开发人员创建分支并要求他们在自己的分支中提交，然后合并到 master 中吗？（对我来说看起来像是开销）
3.  如果两个开发人员都想访问彼此的代码怎么办（他们可以将其他分支添加为远程存储库，然后互相玩其他代码，然后再尝试推送到主存储库中吗？我认为这可能会产生冲突并且是一种不好的做法。 . 是吗？）
         **Main repo**
            / \
    **sub1** <--> **sub2**
    如果 sub1 添加 sub2 作为远程 repo 并拉入更改，然后尝试为 Main repo 创建拉取请求，会出现冲突和其他问题，对吗？
4.  在这种情况下管理代码的任何其他方式？

奖励：如何限制某些可能临时工作的自由职业者/其他开发人员访问完整代码库？（更多的是从管理的角度而不是代码）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:15:19.373

1.  您的图表中描述的关系是完全正确且正确的方法。

2.  在问题 2 中，尽管您缺少 git 的分布式特性。我将尝试描述一个最简单的例子：每个开发人员都应该有一个带有 master 分支的 repo 克隆。当他们开发时，首选的方法是在所谓的功能或主题分支中进行开发。即专门用于特定功能或错误修复或其他的分支。这允许并行开发不同的功能。但是这些分支不需要在主线上共享，它们可以而且应该保持在本地（尽管如果需要将它们推送到主线并没有什么坏处）现在如果他们想在不影响您的主线的情况下交换代码，他们可以添加彼此作为远程仓库并根据需要跟踪彼此的分支。那么当它'

另一种方法是在主线上有一个集成分支。这可能是主分支，也可能是为该单一目的维护的单独分支。当开发人员准备好某些部分时，开发人员将其本地存储库切换到集成分支，拉取最新更改并合并/重新设置他的主题分支，然后将其推回主线

1.  在上述方案中，开发人员只能访问已提交的代码。但当然，如果他们正在处理同一段代码，冲突是可能的。他们必须解决这些问题，这是任何 VCS 中的正常工作流程。这里唯一的建议是确保您不会被冲突的规模所淹没，因此您应该使用以下基本策略：

a) 更频繁地提交 b) 提交单个功能单元的较小块，不要提交数百个文件。c) 更频繁地整合

奖励：您不能限制对 repo 的一部分的访问，因此请使用面向组件的方法并将内容拆分为不同的 repo。这不仅可以实现精细的访问管理，还可以减少集成的数量（因为不是整个代码库都受到影响，而是每次提交都受到影响），另外它可能会强制执行更好的设计。

# php - 给定条件的 PHP 正则表达式

> ID：12747056
> 
> 赞同：-6
> 
> 时间：2012-10-05T13:14:39.977
> 
> 标签：php, regex

> **可能重复：**
> [php regex，从 text/html 中提取电话号码](https://stackoverflow.com/questions/5112520/php-regex-extract-phone-number-from-text-html)

我有以下要求。有一个电话号码字段。

*   它的长度应该在 8 到 10 之间
*   它只能包含 _ 和空格
*   第一个和最后一个元素应该是数字
*   _ 和空格应在 2 位数字之间

我可以编写一个正则表达式来使用 php 验证上述内容吗？

有效条目示例：231_901 347 无效条目示例：_123 567、345__123

另外，如果可能的话，请您写下 preg_match 表达式。

这是我尝试过的代码：

```
$subject = "_012_345 69";
$pattern = '/[\d]{1}.[\d\s_]{5,10}.[\d]{1}$/';
$matches = preg_match($pattern, $subject);
echo($matches); 
```

它应该返回 0，但它返回 1。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T13:19:01.683

```
^(?=.{8,10}$)\d+(?:[ _]\d+)*$ 
```

**解释：**

```
^              # Start of string
 (?=.{8,10}$)  # Assert length 8-10
 \d+           # One or more digits
 (?:           # followed by
  [ _]         #  one space or underscore
  \d+          #  one or more digits
 )*            # zero or more times.           
$              # End of string 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:23:22.153

使用正则表达式模式

```
^(?=.{8,10}$)(?=\d)(?=.*\d$)(?:\d|(?<=\d)[\s_](?=\d))+$ 
```

* * *

***说明>>***

```
^ 
```

如果是行/字符串则开始

```
(?=.{8,10}$) 
```

字符串大小为 8-10 个字符

```
(?=\d) 
```

第一个字符是数字

```
(?=.*\d$) 
```

最后一个字符是数字

```
(?:\d|(?<=\d)[\s_](?=\d))+ 
```

允许的字符是 (a) 数字或 (b) 数字之间的空格或下划线

```
$ 
```

行尾/字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:05:55.283

据我了解，这符合您的所有要求：

```
^(?:\d[ _]*){7,9}\d$ 
```

至于你得到的那些误报，你只是离开了开始锚（`^`）。但即使添加了锚点，它也匹配了类似的东西

```
1_________2 
```

和

```
01234567890123 
```

我假设这些是无效的，因为您的意思是必须有八到十*位数字*，而不是总长度应该是八到十位。

# json - 休息服务岗位参数

> ID：12747058
> 
> 赞同：1
> 
> 时间：2012-10-05T13:14:49.587
> 
> 标签：json, http, rest, post, service

我有休息服务，我将向其发布数据。是在发布数据中使用http表单元素发布数据更好，还是将所有数据发布在一个json字符串中然后在服务器端解析字符串更好。有什么理由选择一种方式而不是另一种方式？

提前致谢。我试图确保我们在架构上以最好的方式编码。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:30:31.967

我认为这取决于您的数据。如果您的数据非常平坦，键和简单值之间存在一一对应关系，那么表单样式提交可能是最合适的。如果您有更复杂的嵌套数据或某种数组，我会使用 json 方法。我不认为这两个选项或多或少是 RESTful。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T14:47:47.213

表单元素是要走的路。如果您在帖子中使用 json，那么您需要将结构传达给客户。这通常是在带外完成的（我从未见过它在带内完成，但我可能错了），这会在客户端和服务器之间产生耦合。

当您使用表单时，带内表单会向客户端传达发布数据应该是什么。当数据需求发生变化时，表单也会发生变化，客户端可以（可能）进行相应的调整。

例如，假设您在您的媒体类型中定义了以下名词：`email`、`password`、`first-name`、等`last-name`，`date-of-birth`并且您有一个需要`email`和的用户创建表单，`password`稍后（通过另一个表单）填充其他用户可选的数据。后来决定您希望用户在创建帐户时提供他们的姓名，因此您更新了表单，使其成为 requires `email`、和`password``first-name``last-name`. 由于客户端已经熟悉这些名词（并且知道每个名词属于什么数据），因此编写良好的客户端将与更新后的表单兼容。如果只是发布 json 数据，客户端将无法工作，因为他们不知道所需的 json 数据已更改（除非您更改媒体类型，在这种情况下，无论如何您都会破坏它们）。

现在这种方法仅适用于在您的媒体类型中定义的名词。如果您要添加一个新名词，那么您只能将其设为可选（现有客户端仍然可以使用，新客户端可以利用新名词）或者如果您需要使其成为必需，那么您需要创建一个新的媒体类型，只有新的（或更新的）客户端才能使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T13:22:39.107

我认为您必须使用第一个解决方案，因为它更接近 RESTful 架构。此外，这个解决方案是一个标准，因此您不需要做额外的事情来编码/解码 POST 参数。

# c# - 是否可以在不使用任何实际电子邮件帐户的情况下以编程方式发送电子邮件

> ID：12747065
> 
> 赞同：12
> 
> 时间：2012-10-05T13:15:30.050
> 
> 标签：c#, .net, windows-phone-7, email

我正在考虑在我的游戏中实现“报告错误/建议”选项，但我不太确定如何才能让它发挥作用。我没有自己的服务器或任何东西，所以我不能只发送用户写到那里的文本。

我想出的唯一方法是客户会写一条消息，然后我会将其发送到我可以阅读它们的电子邮件帐户。但是，我不希望用户需要通过他们的个人帐户发送报告。我不太确定如何实现这一点，谷歌搜索也没有提出任何好的建议。

我没有做过很多网络工作，所以如果您能逐步解释（甚至可能在代码中）该过程，我将不胜感激。

我正在使用 C#，并且正在为 Windows Phone 7 编写游戏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-05T13:28:46.243

是的，绝对有可能做到这一点。从相对底层的角度来看，您需要：

1.  为您要发送到的电子邮件帐户解析 MX（邮件交换器）服务器。
2.  打开一个到 MX 服务器的套接字。
3.  发送适当的[SMTP 命令](http://en.wikipedia.org/wiki/Smtp)以将电子邮件传递到您的收件人帐户。您基本上可以自由地将“发件人”地址设置为您想要的任何任意东西。

SMTP 是一种非常简单/对人类友好的协议，因此手动完成所有这些工作并不是一项巨大的努力。同时，有一些[预构建的库](https://stackoverflow.com/questions/3440730/iphone-smtp-client-library)可以为您处理所有这些（可能除了收件人的 MX 服务器的解析）。

请注意，以这种方式发送的电子邮件更有可能被过滤为垃圾邮件（通常是因为发件人的 IP/主机名与您决定使用的外发电子邮件地址上的任何域都不匹配）。

另请注意，由于您可以将“发件人”地址设置为任何内容，因此您可以选择询问用户是否要提供他们的实际联系地址，如果他们愿意，您可以将其设为“发件人”地址，以便您可以如有必要，请实际与他们联系。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T13:27:35.467

您根本不需要使用电子邮件。[考虑使用像sentry](https://getsentry.com)或[airbrake](https://airbrake.io/pages/home)这样的错误报告服务。

这些服务有您嵌入到程序中的客户端；它会自动记录您的错误，包括任何调试信息/堆栈跟踪；并在您的应用程序报告问题时通过电子邮件通知您。

通常您将应用程序的 API 集成到您自己的错误处理机制中。在发生错误时，客户端将捕获您的调试信息，您可以弹出一个模式询问用户诸如“发生此错误时您在做什么？”之类的信息，将其保存为错误响应的一部分，然后发送回服务。

由于该应用程序通过 HTTP 运行，因此您不需要打开任何特殊端口。这比让用户向您发送带有“它不起作用！！”的电子邮件更容易、更有帮助，而且您不必处理电子邮件发送的难题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T19:05:15.343

我最近写了一篇关于此的文章：[使用 C# 发送电子邮件](http://comfirm.se/send-email-with-csharp-dotnet/)

你基本上有两个选择，要么使用 SMTP 客户端发送，这意味着你必须有一个 SMTP 服务器并且能够连接到端口 25（如果你不使用外部 SMTP，那么你必须自己管理）。或者，您可以使用外部电子邮件提供商，例如：

*   [阿尔法邮件](http://comfirm.se/alpha-mail/)
*   发送网格
*   山魈

如果您使用 AlphaMail，您可以通过以下方式发送电子邮件：

```
IEmailService emailService = new AlphaMailEmailService()
    .SetServiceUrl("http://api.amail.io/v1/")
    .SetApiToken("YOUR-ACCOUNT-API-TOKEN-HERE");

var person = new Person()
{
    Id = 1234,
    UserName = "jdoe78",
    FirstName = "John",
    LastName = "Doe",
    DateOfBirth = 1978
};

var response = emailService.Queue(new EmailMessagePayload()
    .SetProjectId(12345) // ID of AlphaMail project (determines options, template, etc)
    .SetSender(new EmailContact("support@company.com", "from@example.com"))
    .SetReceiver(new EmailContact("Joe E. Receiver", "to@example.org"))
    .SetBodyObject(person) // Any serializable object
); 
```

与仅构建 HTML 并使用 SMTP 客户端发送它的另一件事是，使用 AlphaMail，您可以直接在 GUI 中编辑您的代码之外的电子邮件。您还可以使用 AlphaMail 的模板语言[Comlang](http://docs.amail.io/?section=comlang&client_env=comlang)轻松创建高度动态的模板。

```
<html>
    <body>
        <b>Name:</b> <# payload.FirstName " " payload.LastName #><br>
        <b>Date of Birth:</b> <# payload.DateOfBirth #><br>

        <# if (payload.Id != null) { #>
            <a href="http://company.com/sign-up">Sign Up Free!</a>
        <# } else { #>
            <a href="http://company.com/login?username=<# urlencode(payload.UserName) #>">Sign In</a>
        <# } #>
    </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T19:53:34.373

实现此目的的另一种方法是托管 WCF 服务，该服务接收您的消息并存储在 db 或 /sends 电子邮件中。这样做的一个缺点是您需要一个 Web 服务器来执行此操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T13:31:50.077

所以这是我的想法，你为什么不把电子邮件发送给你……就像你一样？

```
using System.Net;
using System.Net.Mail;

var fromAddress = new MailAddress("from@gmail.com", "From Name"); //Both the email addresses would be yours
var toAddress = new MailAddress("to@example.com", "To Name"); //Both the email addresses would be yours
const string fromPassword = "fromPassword";
const string subject = "There name or whatever";
const string body = "Errors ect....";

var smtp = new SmtpClient
           {
               Host = "smtp.gmail.com",
               Port = 587,
               EnableSsl = true,
               DeliveryMethod = SmtpDeliveryMethod.Network,
               UseDefaultCredentials = false,
               Credentials = new NetworkCredential(fromAddress.Address, fromPassword)
           };
using (var message = new MailMessage(fromAddress, toAddress)
                     {
                         Subject = subject,
                         Body = body
                     })
{
    smtp.Send(message);
} 
```

来自[这里的代码](https://stackoverflow.com/questions/32260/sending-email-in-net-through-gmail)

他们所看到的只是提交按钮，因此他们不会拥有您的所有个人用户名/密码，而且您应该设置一个虚拟帐户以将它们发送到，即使它只是将它们转发到您的真实电子邮件帐户。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-05T13:39:36.457

尝试以下代码，这可能会对您有所帮助：

```
Dim objCDOMail
Set objCDOMail = Server.CreateObject("CDONTS.NewMail")
objCDOMail.From = "sender@domain.com" 
objCDOMail.To = "receiver@domain.com" 
objCDOMail.Subject = "Test Mail Script" 
objCDOMail.BodyFormat = 0 
objCDOMail.MailFormat = 0 
objCDOMail.Body = "Testing Mail from Test Script" 
objCDOMail.Importance = 1 
objCDOMail.Send 
Set objCDOMail = Nothing 
```

# php - 警告：array_key_exists() 期望参数 2 是数组，给定的布尔值

> ID：12747066
> 
> 赞同：3
> 
> 时间：2012-10-05T13:15:37.930
> 
> 标签：php

我有下面的一段代码，它检查给定的键是否存在于数组中。但是在执行此代码时，我收到此错误：

> “警告：array_key_exists() 期望参数 2 是数组，给定的布尔值”。我是 PHP 新手，不知道是什么导致了这个错误。

### 代码

```
$structure = imap_fetchstructure($connection, $id, FT_UID);

if (array_key_exists('parts', $structure))
{

}; 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-05T13:21:35.597

为了防止有人将布尔值或空值传递给函数，您可以`$structure`在使用它之前添加一个简单的检查以查看它是否是一个数组：

```
 if (is_array($structure) && array_key_exists('parts', $structure))
    {
       //...magic stuff here 
    } 
```

'为什么'您的原始代码被破坏的简单答案是 imap_fetchstructure() 没有找到请求的消息并返回 a `false`、`null`或`0`。文档[http://php.net/manual/en/function.imap-fetchstructure.php](http://php.net/manual/en/function.imap-fetchstructure.php)没有说明失败时返回的内容，但很容易猜到。大多数返回对象但无法完成的 php 函数在失败时返回 null 或 false（当我说失败时，我并不是指错误或异常，只是无法执行或找到您要求的任何内容）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T13:17:57.793

I'm guessing `imap_fetchstructure()` is returning false, meaning the function fails to complete your desired task. To debug, see what `print_r($structure);` outputs.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T13:26:23.723

PHP 文档说它将返回一个对象，但是如果您查看 PHP 源代码，您会看到它实际上在失败时返回 FALSE，并且只有在一切成功时才返回一个对象。

[https://github.com/php/php-src/blob/master/ext/imap/php_imap.c#L2280](https://github.com/php/php-src/blob/master/ext/imap/php_imap.c#L2280)

# asp.net - 在 ASMX WebService 请求中使用声明令牌

> ID：12747071
> 
> 赞同：1
> 
> 时间：2012-10-05T13:15:44.330
> 
> 标签：asp.net, soap, asmx, claims-based-identity, adfs

我有一个 ASP.Net Web 应用程序，它使用基于声明的身份验证进行保护，目前 IP 是 Azure ACS，它又调用我的域的 ADFS（但理论上它可以是许多不同的类型，例如谷歌、Facebook 等。 ）。

Web 应用程序公开了一个端点，该端点`Service.asmx`也使用声明身份验证进行保护。

我发现[这篇博文](http://leandrob.com/2012/02/request-a-token-from-adfs-using-ws-trust-from-ios-objective-c-iphone-ipad-android-java-node-js-or-any-platform-or-language/)向我展示了如何调用 IP 并返回包含我的声明的请求安全令牌响应。

获得此令牌后，如何在随后对服务的 Web 服务调用中使用此请求安全令牌响应？

这可以使用通过在 VS / wsdl.exe 中添加 Web 引用生成的代理类来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:39:14.347

不，ASMX 没有这个能力。它是一项遗留技术，不应用于新开发。

# c++ - 在 boost::variant 中存储容器

> ID：12747078
> 
> 赞同：2
> 
> 时间：2012-10-05T13:16:07.663
> 
> 标签：c++, boost, std

这里的最后一行：

```
typedef boost::variant<std::vector<int>, std::vector<float>> C; 

class A: public boost::static_visitor<>
{
public:
    void operator()(const std::vector<int>& value) const
    {
    }

    void operator()(const std::vector<float>& value) const
    {
    }
};

C container(std::vector<float>());
boost::apply_visitor(A(), container ); 
```

给我错误：

```
c:\boost_1_49_0\boost\variant\detail\apply_visitor_unary.hpp(60): error C2228: left of '.apply_visitor' must have class/struct/union
1>          type is 'boost::variant<T0_,T1> (__cdecl &)'
1>          with
1>          [
1>              T0_=std::vector<int>,
1>              T1=std::vector<float>
1>          ]
1>          c:\visual studio 2010\projects\db\xxx\main.cpp(255) : see reference to function template instantiation 'void boost::apply_visitor<A,C(std::vector<_Ty> (__cdecl *)(void))>(Visitor &,Visitable (__cdecl &))' being compiled
1>          with
1>          [
1>              _Ty=float,
1>              Visitor=A,
1>              Visitable=C (std::vector<float> (__cdecl *)(void)) 
```

这里有什么问题？你认为有一个容器类型 C 有这样的定义吗？

我在整个代码中使用以下类型：

```
typedef boost::variant<int, float, ...> Type; 
```

你认为使用这个容器定义会更明智吗：

```
typedef std::vector<Type> C; // mixed container 
```

为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T13:20:18.973

你的问题是这个

```
C container(std::vector<float>()); 
```

是一个函数声明（这是[最令人头疼的 parse](http://en.wikipedia.org/wiki/Most_vexing_parse)）（一个`container`将函数返回`std::vector<float>`作为其唯一参数并返回的函数`C`）。简单修复：额外的括号：

```
C container((std::vector<float>())); 
```

您在其中使用容器的事实`variant`与问题无关。也会发生同样的情况`boost::variant<int, float>`。

# c# - 编码的分号如何在我的查询字符串中结束？

> ID：12747081
> 
> 赞同：3
> 
> 时间：2012-10-05T13:16:16.493
> 
> 标签：c#, asp.net, iframe, query-string

我在我的代码隐藏中设置 iframe 的 src，如下所示：

```
iframe.Attributes.Add("src", string.Format("/page.aspx?a={0}&b={1}", aVal, bVal); 
```

我意识到在 page.aspx 上很少出现以下情况：

```
Request.QueryString["b"] == null 
```

我开始记录一些请求数据，并且在每天访问该页面的数千次中，数据通常如下所示：

```
Request.Url: http://www.mydomain.com/page.aspx?a=1&b=2
Request.Referrer: http://www.mydomain.com/referrer/
Request.Querystring: a=1&b=2 
```

每天大约六次，数据将如下所示：

```
Request.Url: http://www.mydomain.com/page.aspx?a=1&b=2
Request.Referrer: http://www.mydomain.com/referrer/
Request.QueryString: a=1&%3bb=2 
```

您会注意到除了 URL 编码的分号 %3b 出现在查询字符串中之外，所有内容都完全相同。引荐来源网址告诉我 page.aspx 正在被正确访问，并且没有被用户手动输入到浏览器中。此页面也位于仅限会员的安全区域，我确认随机用户会发生这种情况以获取随机内容。我无法重现这一点 - 如果我转到 Request.Url 值，%3b 永远不会出现在查询字符串中，如果我转到 Request.Referrer 值以与客户相同的方式访问内容，%3b 永远不会出现在查询字符串。Request.Referrer 值是加载 page.aspx 的唯一页面。

任何想法 %3b 如何可能进入查询字符串？

# android - 将安卓应用程序与电脑上的应用程序连接起来

> ID：12747083
> 
> 赞同：0
> 
> 时间：2012-10-05T13:16:18.693
> 
> 标签：android, bluetooth, usb

我目前正在尝试编写一个 android 应用程序，该应用程序通过 USB 或蓝牙连接到在 pc 上运行的应用程序（即使 windows 是首选的 linux 也可以）。现在我不确定这可能有多远。据我了解 USB Android API，我不能真正使用 USB 与另一个应用程序交谈。似乎只有原始文件交换是可能的。在我看来，蓝牙的想法似乎更可行。我会为 PC 编写一个蓝牙服务器，并通过一个通过 Android API 编写的蓝牙客户端连接到它。关键是，窗户可以做到吗？有没有人看到我正在寻找的任何例子？我只能找到 USB 的所有内容，这不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:49:44.730

有一些 android 应用程序允许您使用手机的触摸屏，就像触摸板一样，可用于通过蓝牙或 wifi 连接控制您的 PC 或笔记本电脑，就像您使用笔记本电脑的触摸板一样。PremoteDroid、RemoteDroid、Gmote 等。仅举几例（或者我猜只有这些可用！）。

但要做到这一点，您还需要开发一个服务器应用程序，该应用程序将在您希望控制的设备上运行并帮助您在手机和设备之间建立连接。我使用过 PremoteDroid 和 RemoteDroid，它们都可以在运行 Windows 7 的笔记本电脑上运行良好。您甚至可以添加键盘功能。

PremoteDroid 在这里公开可用：[http ://code.google.com/p/premotedroid/](http://code.google.com/p/premotedroid/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T19:32:58.913

我的 Mac 上有一个蓝牙服务器应用程序，用于测试我正在编写的 Android 应用程序。该应用程序最终将用于与具有微控制器和蓝牙调制解调器的设备进行通信，但我需要一种在没有该设备的情况下测试该应用程序的方法。服务器应用程序是用 Java 编写的，所以我认为它应该可以在 PC 上运行（几乎可以肯定在 Linux 上）。

我很高兴与您分享代码——我在 Internet 的某个地方找到了它（尽管我现在似乎无法弄清楚在哪里）并根据需要对其进行了修改。它使用 BlueCove 库，并且只有大约 60 行，包括几个导入（以及我注释掉但没有删除的代码：）。我的 Mac 上还有一个蓝牙客户端程序，因为我的应用程序也有服务器功能。

我从来没有尝试过使用 USB 做这样的事情。

# java - 在 Android 中加载/保存属性文件最方便的方法是什么？

> ID：12747086
> 
> 赞同：0
> 
> 时间：2012-10-05T13:16:35.323
> 
> 标签：java, android

我正在考虑使用`Properties`API 中内置的功能，然后我发现了`AssetManager`. 在Android中加载/保存属性文件有一些非常简单的方法吗？一种不涉及弄乱输入/输出流的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:22:45.437

我认为共享首选项适用于小数据。 [http://developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:22:12.683

你见过 SharedPreferences 吗？[http://developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

# c# - 调用 SaveChanges 后更新同一实体会导致 EF5 异常

> ID：12747087
> 
> 赞同：0
> 
> 时间：2012-10-05T13:16:40.053
> 
> 标签：c#, entity-framework, entity-framework-5

我有一个需要保存两次的实体。第一次是设置ID。需要填写此 ID 以计算签名并将该签名存储回实体。

请参阅以下代码：

```
var newEntity = new MyEntity 
    { 
        \\ set values 
    };

using (var db = MyContainer.CreateContainer())
{
    db.MyEntity.Add(newEntity);
    // Call SaveChanges() to set the ID.
    db.SaveChanges();

    // I need to do some calculation on the entity
    myEntity.Signature = CalculateSignature(myEntity);
    db.SaveChanges(); // <--- This causes the exception
} 
```

这段代码会导致 InvalidOperationException，即`The relationship between the two objects cannot be defined because they are attached to different ObjectContext objects.`

我不明白，我不允许我两次保存同一个实体吗？我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:20:38.643

我猜这也`CalculateSignature`创造了一个背景。看看[实体框架多对象上下文](https://stackoverflow.com/questions/5693843/entity-framework-multiple-object-contexts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:20:17.613

这通常发生在您没有在对象之间使用共享上下文的情况下。

您是否加载带有上下文的记录，然后将其传递到存储库？

您是否有一个存储库，然后创建一个新的上下文来保存而不是使用父上下文？

我建议研究一种设计模式，例如“工作单元”模式，在该模式中，您对所有查询都使用共享的 DbContext。

[http://blogs.msdn.com/b/adonet/archive/2009/06/16/using-repository-and-unit-of-work-patterns-with-entity-framework-4-0.aspx](http://blogs.msdn.com/b/adonet/archive/2009/06/16/using-repository-and-unit-of-work-patterns-with-entity-framework-4-0.aspx)

# javascript - 如何通过在下拉列表中双击提交值？

> ID：12747088
> 
> 赞同：1
> 
> 时间：2012-10-05T13:16:40.970
> 
> 标签：javascript, greasemonkey, html-select, double-click

我正在寻找一种使用 Greasemonkey在下拉列表（[自动调整大小）中单击两次来提交值的方法。](https://stackoverflow.com/questions/12661892/how-to-automatically-set-the-size-of-a-drop-down-list)

目标 HTML：

```
<form method="post">
  <select size="3" name="z_pos_id">
    <option value="2463">Option A</option>
    <option value="2609">Option B</option>
    <option value="3013">Option C</option>
  </select>
  <input type="submit" value="Button">
</form> 
```

目前我单击选项以选择它，然后单击按钮提交值（按 Enter 也可以）。

但是对于 Greasemonkey 脚本，我想单击选项以选择它，然后再次单击所选选项以提交它。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:21:41.897

处理双击***左键***而不干扰中心和右键单击（太多）的一种方法是：

1.  跟踪事件触发`<option>`时是否选择了。`mousedown`
2.  确保稍后触发鼠标单击事件时它仍处于选中状态。
3.  如果这两个条件都为真，则提交包含表单。

为了大大简化代码，这次使用 jQuery。[**请参阅 jsFiddle 的实际代码**。](http://jsfiddle.net/hQjWQ/)

一个**完整的脚本**看起来像这样：

```
// ==UserScript==
// @name     _Activate double-click on select, submits form
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change introduced
    in GM 1.0\.   It restores the sandbox.
*/

$("select[name=z_pos_id] option").bind ("mousedown click", handleOptionClicks);

function handleOptionClicks (zEvent) {
    _self                   = handleOptionClicks;
    _self.optionWasSelected = _self.optionWasSelected || false;

    if (zEvent.type == "mousedown") {
        _self.optionWasSelected = zEvent.target.selected;
    }
    else {//zEvent.type == "click"
        if (zEvent.target.selected  &&  _self.optionWasSelected) {
            //-- Double-click, so submit form:
            $(this).parents ("form").submit ();
        }
    }
} 
```

* * *

* * *

* * *

**更新：**这是一个也可以在 Chrome 上运行的版本（需要使用脚本注入）。
这假设目标页面还没有 jQuery：

```
// ==UserScript==
// @name     _Activate double-click on select, submits form
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @grant    none
// ==/UserScript==

function GM_main ($) {
    $("select[name=z_pos_id] option").bind ("mousedown click", handleOptionClicks);

    function handleOptionClicks (zEvent) {
        _self                   = handleOptionClicks;
        _self.optionWasSelected = _self.optionWasSelected || false;

        if (zEvent.type == "mousedown") {
            _self.optionWasSelected = zEvent.target.selected;
        }
        else {//zEvent.type == "click"
            if (zEvent.target.selected  &&  _self.optionWasSelected) {
                //-- Double-click, so submit form:
                $(this).parents ("form").submit ();
            }
        }
    }
}

add_jQuery (GM_main, "1.7.2");

function add_jQuery (callbackFn, jqVersion) {
    jqVersion       = jqVersion || "1.7.2";
    var D           = document;
    var targ        = D.getElementsByTagName ('head')[0] || D.body || D.documentElement;
    var scriptNode  = D.createElement ('script');
    scriptNode.src  = 'http://ajax.googleapis.com/ajax/libs/jquery/'
                    + jqVersion
                    + '/jquery.min.js'
                    ;
    scriptNode.addEventListener ("load", function () {
        var scriptNode          = D.createElement ("script");
        scriptNode.textContent  =
            'var gm_jQuery  = jQuery.noConflict (true);\n'
            + '(' + callbackFn.toString () + ')(gm_jQuery);'
        ;
        targ.appendChild (scriptNode);
    }, false);
    targ.appendChild (scriptNode);
} 
```

# mongodb - 进行大型更新时，MongoDB 似乎停滞不前

> ID：12747089
> 
> 赞同：1
> 
> 时间：2012-10-05T13:16:42.733
> 
> 标签：mongodb, pymongo

我正在尝试遍历特定集合中的所有文档并更新文档（基于文档中已有的信息）。我开始使用 pymongo 在 python 中执行此操作，但它似乎需要永远，所以我决定将它移动到 db 盒并在 javascript 中运行它，但它似乎仍然停滞不前。我只是在谈论一场政变，一千份文件。我似乎注意到的是：

开始任务，前 500 个对象会立即更新，片刻之后，接下来是 200 个，再过一点，再有 100 个，然后它开始越来越慢。

如果我从我的代码中删除更新调用，它会很好地通过循环，所以显然我的更新似乎冻结了一些东西。

这是我正在运行的js：

```
mydb = db.getSisterDB(DB_NAME);

var cursor = mydb.user.find({is_registered:true}).limit(3000);
while (cursor.hasNext()) {
    var u = cursor.next();
    /* fix property on user doc */
    mydb.user.update({ _id: u._id }, u);
    print(cursor.objsLeftInBatch());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:39:19.577

我的猜测是前 500 个对象适合某个缓存，因此它们会在内存中更新并稍后写入磁盘。但是在 500 次写入操作后缓存已满，因此后续写入必须等到之前的更改已写入磁盘。

您的代码从数据库中读取整个文档，对其进行一些更改，然后将整个文档发送回数据库。这意味着需要覆盖整个文档。这并不奇怪，这很慢。

您应该在更新命令中使用[$set 运算符](http://www.mongodb.org/display/DOCS/Updating#Updating-%24set)来仅更新那些实际更改的字段。

当您设法更新数据库上的文档而不将它们读入您的应用程序时，在性能方面会更好。你没有写出你对这些文件做了什么以及在什么条件下。当它不是那么复杂时，这可能是可能的。

# cloud-foundry - 是否可以通过 Cloud Foundry 中的 App manifest.yml 添加 ENV Var？

> ID：12747090
> 
> 赞同：1
> 
> 时间：2012-10-05T13:16:46.233
> 
> 标签：cloud-foundry

这个问题似乎很清楚。我无法获得这方面的信息。

例如，我可以使用的方式是：

```
$ vmc push myapp --no-start
$ vmc env-add myapp MYVAR=var 
$ vmc start myapp 
```

那么，可以在我的 manifest.yml 中配置它，以哪种方式？

我会设置 NODE_ENV="production"

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:50:53.087

使用最新的 VMC（gem install vmc --pre, mkdir ~/.vmc/use-ng），在清单中将其与名称、实例等应用程序属性一起添加：

```
env:
  NODE_ENV: production 
```

不确定旧版 VMC，抱歉。

# visual-studio - Visual Studio/SQL：我可以拥有特定于配置文件的部署后脚本吗？

> ID：12747092
> 
> 赞同：1
> 
> 时间：2012-10-05T13:16:58.130
> 
> 标签：visual-studio, database-project

我目前有一个 SQL Server 数据库项目，并且有两个用于两个不同客户端的配置文件。

一件事是我们对每个客户端的数据库规则略有不同，我想做的是在部署后脚本中自动创建这些规则。

我希望通过某种方式获得“if 配置文件”，其中针对一个配置文件或另一个配置文件执行特定命令，但我看不到任何有关如何执行此操作的信息。有没有办法，或者有没有人有另一种方法可以在数据库解决方案中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T15:15:16.090

假设您的客户可以安全地看到彼此的数据，这应该可以工作。如果不是，您可能必须向它们发送单独的脚本以在发布后运行。

创建一个将在您发布代码时使用的变量（例如“DeployType”）并在您的部署后脚本中使用类似这样的内容：

```
IF ( '$(DeployType)' = 'ClientA')
BEGIN
PRINT 'Running Post-Deploy Scripts for Client A'

:r .\ClientA.sql

END
IF ( '$(DeployType)' = 'ClientB')
BEGIN
PRINT 'Running Post-Deploy Scripts for Client B'

:r .\ClientB.sql

END

:r .\Common.sql 
```

# java - 在 Java 中实现定期刷新的 Cache

> ID：12747093
> 
> 赞同：9
> 
> 时间：2012-10-05T13:17:00.927
> 
> 标签：java, caching, bulkinsert, bulk

我的用例是在持久数据库中存储的数据上维护内存缓存。

我使用这些数据来填充 UI 上的条目列表/地图。在任何给定时间，UI 上显示的数据都应尽可能更新（这可以通过缓存的刷新频率来完成）。

常规缓存实现与此特定缓存之间的主要区别在于，它需要定期批量刷新所有元素，因此与 LRU 类型的缓存有很大不同。

我需要在 Java 中完成这个实现，如果有任何现有的框架可以用来围绕它们构建它，那就太好了。

我已经探索过 Google Guava 缓存库，但它更适合于每次刷新而不是批量刷新。没有简单的 API 可以对整个缓存进行刷新。

任何帮助将不胜感激。

此外，如果可以增量地进行刷新，那就太好了，因为刷新整个缓存时出现的唯一限制是，如果缓存的大小非常大，那么内存堆应该至少是缓存大小的两倍。缓存以加载新条目并用新条目替换旧映射。如果缓存是增量的或有分块刷新（以相等的大小刷新），那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T14:05:08.817

[EHCache](http://ehcache.org/)是一个功能非常齐全的 java 缓存库。我想他们有一些对你有用的东西。

为了对缓存进行增量重新加载（这适用于大多数缓存），只需遍历当前加载的条目并强制刷新它们。（您可以在后台调度程序上运行此任务）。

作为强制重新加载整个缓存的替代方案，EHCache 能够为条目指定“生存时间”，因此如果条目太陈旧，将自动重新加载条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:22:34.720

只需继承这个类，并根据需要实现 loadDataFromDB 和 updateData 以获得增量更新

```
import org.apache.log4j.Logger;
import java.util.List;
import java.util.concurrent.Semaphore;

public abstract class Updatable<T>
{
    protected volatile long lastRefreshed = 0;
    private final int REFRESH_FREQUENCY_MILLISECONDS = 300000; // 5 minutes
    private Thread updateThread;
    private final Semaphore updateInProgress = new Semaphore(1);

    protected static final Logger log = Logger.getLogger(Updatable.class);

    public void forceRefresh()
    {
        try
        {
            updateInProgress.acquire();
        }
        catch (InterruptedException e)
        {
            log.warn("forceRefresh Interrupted");
        }

        try
        {
            loadAllData();
        }
        catch (Exception e)
        {
            log.error("Exception while updating data from DB", e);
        }
        finally
            {
            updateInProgress.release();
        }

    }

    protected void checkRefresh()
    {
        if (lastRefreshed + REFRESH_FREQUENCY_MILLISECONDS <     System.currentTimeMillis())
            startUpdateThread();
    }

    private void startUpdateThread()
    {
        if (updateInProgress.tryAcquire())
        {
            updateThread = new Thread(new Runnable()
            {
                public void run()
                {
                    try
                    {
                        loadAllData();
                    }
                    catch (Exception e)
                    {
                        log.error("Exception while updating data from DB", e);
                    }
                    finally
                    {
                        updateInProgress.release();
                    }
                }
            });

            updateThread.start();
        }
    }

    /**
     * implement this function to load the data from DB
     *
     * @return
     */
    protected abstract List<T> loadFromDB();

    /**
     * Implement this function to hotswap the data in memory after it was loaded from DB
     *
     * @param data
     */
    protected abstract void updateData(List<T> data);

    private void loadAllData()
    {
        List<T> l = loadFromDB();
        updateData(l);
        lastRefreshed = System.currentTimeMillis();
    }

    public void invalidateCache()
    {
         lastRefreshed = 0;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-27T06:11:39.797

必须检查的一件事是需要定期刷新吗？一旦从缓存中获取数据，您就可以应用刷新逻辑，这将消除对任何异步刷新的需要，并将消除维护任何旧缓存副本的需要。这个 IMO 是刷新缓存数据的最简单和最好的方法，因为它不涉及任何额外的开销。

```
 T getData(){
      // check if the last access time + refresh interval >= currenttime if so then    refresh cache
     // return data
    } 
```

这将确保数据根据刷新间隔进行刷新，并且不需要任何异步刷新。

# extjs - Assigning values to a model dynamically

> ID：12747097
> 
> 赞同：1
> 
> 时间：2012-10-05T13:17:15.437
> 
> 标签：extjs, extjs4, extjs4.1

I gave it a try but it did not worked.

I am having two grids and a button. Initially the second grid will remain empty and the first grid will have some records.. When I select a few records in the first grid and click on the button, then the second grid should get populated with the only the selected rows of first grid.

Here is my code:

```
Ext.QuickTips.init();

var getLocalStore = function() {
    return Ext.create('Ext.data.ArrayStore', {
        model: 'Company',
        data: Ext.grid.dummyData
    });
};

var getSelectedStore = function() {
    return Ext.create('Ext.data.ArrayStore', {
        model: 'Company'
    });
};

var sm = Ext.create('Ext.selection.CheckboxModel');

var grid1 = Ext.create('Ext.grid.Panel', {
    id: 'grid1',
    store: getSelectedStore(),
    columns: [
        {text: "Company", width: 200, dataIndex: 'company'},
        {text: "Price", renderer: Ext.util.Format.usMoney, dataIndex: 'price'},
        {text: "Change", dataIndex: 'change'},
        {text: "% Change", dataIndex: 'pctChange'},
        {text: "Last Updated", width: 135, renderer: Ext.util.Format.dateRenderer('m/d/Y'), dataIndex: 'lastChange'}
    ],
    columnLines: true,
    width: 600,
    height: 300,
    frame: true,
    title: 'Framed with Checkbox Selection and Horizontal Scrolling',
    iconCls: 'icon-grid',
    renderTo: 'grid1'
});

var grid2 = Ext.create('Ext.grid.Panel', {
    id: 'grid2',
    store: getLocalStore(),
    selModel: sm,
    columns: [
        {text: "Company", width: 200, dataIndex: 'company'},
        {text: "Price", renderer: Ext.util.Format.usMoney, dataIndex: 'price'},
        {text: "Change", dataIndex: 'change'},
        {text: "% Change", dataIndex: 'pctChange'},
        {text: "Last Updated", width: 135, renderer: Ext.util.Format.dateRenderer('m/d/Y'), dataIndex: 'lastChange'}
    ],
    columnLines: true,
    width: 600,
    height: 300,
    frame: true,
    title: 'Framed with Checkbox Selection and Horizontal Scrolling',
    iconCls: 'icon-grid',
    renderTo: 'grid'
});  

Ext.widget('button', {
text: 'Click Me',   
renderTo: 'btn',
listeners: {
    click: function(this1, evnt, eOpts ){               
        var records = sm.getSelection();
        getSelectedStore().loadData(records,true);
        grid1.getView().refresh();
        /*Ext.each(records, function (record) {
            alert(record.get('company'));
        });*/
    }
}
}); 
```

Please let me what's going wrong.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:15:18.400

首先，您要定义函数`getSelectedStore`并在调用时`getLocalStore`返回*新的存储实例。*这样，在您的点击处理程序中，您每次都会抓取一个空商店！丢失功能位，只需像这样设置变量：

```
var storeToSelectFrom = Ext.create('Ext.data.ArrayStore', {
    model: 'Company',
    data: someDataToChooseFrom
});

var storeToPutTo = Ext.create('Ext.data.ArrayStore', {
    model: 'Company'
}); 
```

然后，使用这些变量作为存储来定义您的网格：

```
var grid1 = Ext.create('Ext.grid.Panel',{
    store: storeToSelectFrom,
    selType: 'checkboxmodel'
    // rest of your configs
});

var grid2 = Ext.create('Ext.grid.Panel',{
    store: storeToPutTo
    // rest of your configs
}); 
```

然后，使用单击处理程序创建按钮：

```
Ext.widget('button', {
    handler: function (button, event) {
        var selected = grid1.getSelectionModel().getSelection();
        grid2.getStore().add(selected);
    }
    // rest of your configs
}); 
```

# php - MySQL query with complex ORDER BY

> ID：12747110
> 
> 赞同：4
> 
> 时间：2012-10-05T13:17:56.897
> 
> 标签：php, mysql

I have the following query:

```
SELECT id, title, adcontent, adtargetURL, locationpage, 
locationarg, locationid, displayorder, visible, schedstart, 
schedstop, created, modified, createdby, modifiedby
FROM ads            
ORDER BY locationpage, locationarg, locationid, title 
```

I need to order the fields the following way:

*   sort by locationpage with any fields with a value of 'all' first, then the rest in ascending order
*   then by locationarg with any NULL or empty string values first, then the rest in asc
*   then by locationid with any NULL or 0 values first, the rest in asc
*   and within those, sort by displayorder of '1' first, then NULL, then '2'
*   and lastly, by title in ASC if any of those manage to all be the same

What should my ORDER BY look like to achieve this?

Here's what I have so far: (updated from below)

```
ORDER BY locationpage='all', 
         locationpage ASC, 
         locationarg ASC, 
         locationid ASC, 
         displayorder='1', 
         ISNULL(displayorder), 
         displayorder='2', 
         title ASC 
```

...but this isn't working!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:30:21.083

您最好的选择是使用一个计算字段，该字段将根据您的规则生成订单 ID。我稍后会添加一个示例。

```
select
case
  when locationpage = "all" then 10
  when ISNULL(locationarg)  then 20
  ....
  else 50 
end as OrderID,
id, 
title, 
....

FROM ads            

ORDER BY OrderID DSEC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:35:21.023

给这个bash：

```
select id, title, adcontent, adtargetURL, locationpage, locationarg, locationid, displayorder, visible, schedstart, schedstop, created, modified, createdby, modifiedby 
from ads
order by case when locationpage='all' then 0 else 1 end, 
         locationpage, 
         case when locationarg is null or locationarg='' then 0 else 1 end,
         locationarg ASC, 
         case when locationid is null OR locationid='0' then 0 else 1 end, 
         locationid, 
         case when displayorder =1 then 0 when displayorder is null then 1 when displayorder = 2 then 2 else 3 end,
         title; 
```

# git - 克隆没有提交的存储库

> ID：12747112
> 
> 赞同：1
> 
> 时间：2012-10-05T13:18:03.013
> 
> 标签：git, github

我想克隆 GitHub 的特定存储库，但是，没有提交，分支，换句话说：克隆主分支，仅此而已。

我知道我可以克隆存储库，然后只复制除 .git 文件夹之外的所有文件，但想知道这是否可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:23:14.523

你可能想要类似的东西

```
git clone -b master --single-branch --depth 1 elsewhere.git here 
```

或许

```
git archive --remote somewhere.git master | tar -xvf - -C /where/i/want/to/put/it 
```

# php - listener cycle callbacks

> ID：12747113
> 
> 赞同：-2
> 
> 时间：2012-10-05T13:18:04.527
> 
> 标签：php, symfony, doctrine

hello i hace problem this code :

ListenerCrud.php

```
<?php

namespace mio\mioBundle;

use Doctrine\ORM\Event\PreUpdateEventArgs;
use Doctrine\ORM\EntityManager;
use mio\mioBundle\Entity\Log;
use Symfony\Component\HttpFoundation\Response;

class ListenerCrud{

    public function preUpdate(PreUpdateEventArgs $eventArgs){

        if ($eventArgs->getEntity() instanceof Usuario){
        $entity = $eventArgs->getEntity();
        $entityManager = $eventArgs->getEntityManager();
        $log = new Log();
        $entityManager->persist($log);
        $entityManager->flush();
        }
    }
}
?> 
```

config.yml :

```
listenercrud:
    class: mio\mioBundle\ListenerCrud
    tags:
        - { name: doctrine.event_listener, event: preUpdate} 
```

but no create log in database. help me please.thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:51:29.520

在这种情况下 $entityManager->persist() 不起作用，因为他不能在 preUpdate 事件中被调用。 [http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/events.html#preupdate](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/events.html#preupdate)

也许您可以使用 postUpdate 事件 [http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/events.html#postupdate-postremove-postpersist](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/events.html#postupdate-postremove-postpersist)

# c++ - C++ launching program without console opening

> ID：12747115
> 
> 赞同：5
> 
> 时间：2012-10-05T13:18:08.433
> 
> 标签：c++, console, wallpaper

I have been working on an application to set the desktop background basing of another application I found here: [http://www.optimumx.com/downloads.html#SetWallpaper](http://www.optimumx.com/downloads.html#SetWallpaper). The idea is to set the background to a wallpaper every 10 minutes, so it launches the SetWallpaper.exe with the command 'SetWallpaper.exe /D:S Wallpaper.jpg' but when I launch my application it creates a console window that doesn't automatically close and when I manually close it, it kills the exe.

```
#include <windows.h>
int main() {
int i = 1;
int j = 3;
// refresh = time until refresh in minutes
int refresh = 10;
// 1000 milliseconds = 1 second
int second = 1000;
int minute = 60;
int time = second * minute * refresh;
while (i < j) {
system("cmd /c start /b SetWallpaper.exe /D:S Wallpaper.jpg");
Sleep(time);
}
return 0;
} 
```

I tried using 'sleep.exe' that comes with MinGW Msys but that creates a new process each team, eventually hogging all the processes.

Thanks in advance!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T13:19:53.097

您遇到的第一个问题是您已将程序创建为带有`main`方法的控制台应用程序。相反，将其创建为`Win32 Project`带有`WinMain`入口点的。这将直接调用而不创建控制台窗口。

**编辑：** Ferruccio 的回答解决了第二个问题，因为您正在调用另一个控制台应用程序，这也将导致创建控制台窗口。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T14:48:18.880

你正在努力解决它。在程序中更改 Windows 壁纸相当简单：

```
#include <windows.h>

SystemParametersInfo(SPI_SETDESKWALLPAPER, 0, (PVOID) "path/to/wallpaper.jpg", SPIF_UPDATEINIFILE); 
```

无论如何，如果您坚持要启动外部程序来做到这一点。使用[CreateProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)。`dwCreationFlags`通过将参数设置为 ，它能够在没有可见窗口的情况下启动控制台模式应用程序`CREATE_NO_WINDOW`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T18:05:25.983

设置`ShowWindow`为`false`并且不要忘记 `FreeConsole` 在最后。

```
#include <windows.h>

int main(void)
{

   ShowWindow(FindWindowA("ConsoleWindowClass", NULL), false);

   // put your code here

   system("cmd /c start /b SetWallpaper.exe /D:S Wallpaper.jpg");

   FreeConsole();

   return 0;
} 
```

正如 Ferruccio 所说，您可以使用`SetTimer`和`SystemParametersInfo`定期触发更改。

```
#define STRICT 1 
#include <windows.h>
#include <iostream.h>

VOID CALLBACK TimerProc(HWND hWnd, UINT nMsg, UINT nIDEvent, DWORD dwTime) 
{

  LPWSTR wallpaper_file = L"C:\\Wallpapers\\wallpaper.png";
  int return_value = SystemParametersInfo(SPI_SETDESKWALLPAPER, 0, wallpaper_file, SPIF_UPDATEINIFILE);

  cout << "Programmatically change the desktop wallpaper periodically: " << dwTime << '\n';
  cout.flush();
}

int main(int argc, char *argv[], char *envp[]) 
{
    int Counter=0;
    MSG Msg;

    UINT TimerId = SetTimer(NULL, 0, 2000, &TimerProc); //2000 milliseconds = change every 2 seconds

    cout << "TimerId: " << TimerId << '\n';
   if (!TimerId)
    return 16;

   while (GetMessage(&Msg, NULL, 0, 0)) 
   {
        ++Counter;
        if (Msg.message == WM_TIMER)
        cout << "Counter: " << Counter << "; timer message\n";
        else
        cout << "Counter: " << Counter << "; message: " << Msg.message << '\n';
        DispatchMessage(&Msg);
    }

   KillTimer(NULL, TimerId);
return 0;
} 
```

# c# - Optional argument followed by Params

> ID：12747117
> 
> 赞同：14
> 
> 时间：2012-10-05T13:18:13.140
> 
> 标签：c#, params, optional-parameters

So I see that it's possible to have a method signature where the first parameter provides a default value and the second parameter is a params collection.

What I can't see is a way to actually use the default value of the first argument.

Is it at all possible?

Example method:

`void WaitAllTasks(string message = "Running Task.WaitAll", params Task[] tasks);`

I initially tried omitting the message parameter when calling the method and also tried using named parameters, which doesn't work with params.

It compiles, but is it possible to use it?

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-05T13:22:21.017

我可以找到三种调用方法的方法，而无需为第一个参数指定值：

```
using System;

class Test
{
    static void PrintValues(string title = "Default",
                            params int[] values)
    {
        Console.WriteLine("{0}: {1}", title, 
                          string.Join(", ", values));
    }

    static void Main()
    {
        // Explicitly specify the argument name and build the array
        PrintValues(values: new int[] { 10, 20 });
        // Explicitly specify the argument name and provide a single value
        PrintValues(values: 10);
        // No arguments: default the title, empty array
        PrintValues();
    }
} 
```

我还没有找到一种在不显式构建数组的情况下指定多个值的方法......

# qt - Handle Unsupported Content QML Webview

> ID：12747121
> 
> 赞同：0
> 
> 时间：2012-10-05T13:18:42.607
> 
> 标签：qt, qml

How to handle unsupported content in QML Webview Component ?

# php - PHP Twitter API Issues Moved to Grid Hosting

> ID：12747123
> 
> 赞同：0
> 
> 时间：2012-10-05T13:18:48.720
> 
> 标签：php, api, twitter, grid, hosting

Hello everyone I wonder if someone could help me with this issue I have been using the Twitter API class for over a year now fine. Last week I moved to a grid hosting plan from shared hosting now everytime I use the API get the following errors.

```
Uncaught exception 'EpiOAuthException' in /home/content/98/3412598/html/twitter/EpiOAuth.php:434 Stack trace: 
#0 /home/content/98/3412598/html/twitter/EpiOAuth.php(404): EpiOAuthException::raise(Object(EpiCurlManager), false) 
#1 /home/content/98/3412598/html/twitter/EpiOAuth.php(45): EpiOAuthResponse->__get('oauth_token') 
#2 /home/content/98/3412598/html/twitter/ufollowme.php(13): EpiOAuth->getAuthenticateUrl() #3 {main} thrown in /home/content/98/3412598/html/twitter/EpiOAuth.php on line 434 
```

I am using this library [http://code.google.com/p/php-twitter/downloads/detail?name=php-twitter-1.1.zip&can=2&q=](http://code.google.com/p/php-twitter/downloads/detail?name=php-twitter-1.1.zip&can=2&q=)

and here is the simpletest code which I have used all along.

```
include 'EpiCurl.php';
include 'EpiOAuth.php';
include 'EpiTwitter.php';
$consumer_key = 'REMOVED';
$consumer_secret = 'REMOVED';
$token = 'REMOVED';
$secret= 'REMOVED';
$twitterObj = new EpiTwitter($consumer_key, $consumer_secret, $token, $secret);
$twitterObjUnAuth = new EpiTwitter($consumer_key, $consumer_secret);
?>

<h1>Single test to verify everything works ok</h1>

<h2><a href="javascript:void(0);" onclick="viewSource();">View the source of this file</a></h2>
<div id="source" style="display:none; padding:5px; border: dotted 1px #bbb; background-color:#ddd;">
<?php highlight_file(__FILE__); ?>
</div>

<hr>

<h2>Generate the authorization link</h2>
<?php echo $twitterObjUnAuth->getAuthenticateUrl(); ?>

<hr>

<h2>Verify credentials</h2>
<?php
  $creds = $twitterObj->get('/account/verify_credentials.json');
?>
<pre>
<?php print_r($creds->response); ?>
</pre>

<hr>

<h2>Post status</h2>
<?php
  $status = $twitterObj->post('/statuses/update.json', array('status' => 'This a simple test from twitter-async at ' . date('m-d-Y h:i:s')));
?>
<pre>
<?php print_r($status->response); ?>
</pre>

<script> function viewSource() { document.getElementById('source').style.display=document.getElementById('source').style.display=='block'?'none':'block'; } </script> 
```

Any help welcomed. Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:25:31.540

如果其他人需要回答 EPIOAUTH.php 文件上的删除行 171-172，请找到修复人员。

```
 // if(isset($_SERVER ['SERVER_ADDR']) && !empty($_SERVER['SERVER_ADDR']) && $_SERVER['SERVER_ADDR'] != '127.0.0.1')
    //  curl_setopt($ch, CURLOPT_INTERFACE, $_SERVER ['SERVER_ADDR']); 
```

# django - Django block request

> ID：12747125
> 
> 赞同：0
> 
> 时间：2012-10-05T13:18:55.137
> 
> 标签：django

I have a problem with my website. there it is :

No problem in this case :

*   User A do a request.
*   Django server update data...
*   Object 1 is updated.
*   Object 2 is updated.
*   Object 3 is updated.
*   Django render the result.
*   User A do a request.

Problem apear in this case :

*   User A do a request.
*   Django server update data...
*   Object 1 is updated.
*   Object 2 is updated.
*   **User A do another request !**
*   **User A do another request !**
*   Django render the result.

the problem is that if the user makes a request while the server has not finished working, the server stop the process and data are no longer good.

I think i have to block client side (by displaying a loading message for exemple) but i want to be sur the user **cant** make a request on the server if another treatemment still working.

thanks for your time.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:41:26.323

这听起来你有一个长时间运行的进程，用户厌倦了等待，点击浏览器中的“停止”；另一种情况是 - 用户打开另一个选项卡并再次发送相同的请求。

解决这个问题的几种方法。

1.  如果请求中断，请使用[事务中间件](https://docs.djangoproject.com/en/dev/topics/db/transactions/?from=olddocs)来防止您的数据库对象被损坏。

2.  使用像[celery](http://docs.celeryproject.org/en/master/index.html)这样的任务队列。在第一次请求时，将您的任务卸载到队列/代理。向用户发送一条消息，表明他们的请求已被接受处理。现在用户可以自由地发送重复请求。如果是这样，您可以检查队列的状态并拒绝重复的请求。

# c# - PathTooLongException C# 4.5

> ID：12747132
> 
> 赞同：5
> 
> 时间：2012-10-05T13:19:13.230
> 
> 标签：c#, exception, visual-studio-2012, io, pathtoolongexception

我无法复制某些文件夹 260+ 个字符（例如：F:\NNNNNNNNNNNNNNNN\NNNNNNNNNN\ROOT\$RECYCLE.BIN\S-1-5-21-3299053755-4209892151-505108915-1000\$RMSL3U8\NNNNNNNNN NNNNNNNN\ NNNNNNNNNNN\NNNNNNNNNN\NNNNNNNNNN\publish\Application Files\TNNNNNNNNNNNN_1_0_0_0\NNNNNNNNNNNN.exe.manifest) 使用标准 DrectoryInfo.Create(); 添加 \?\ 或 \?\UNC\（如“\\?\UNC\”）只会引发另一个 ArgumentException。我究竟做错了什么？如果不使用 Directory.SetCurrentDirectory() 我还能做什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T13:31:58.913

其实你需要从c#调用win32。我们已经做到了

```
using System;
using System.IO;
using System.Runtime.InteropServices;
using Microsoft.Win32.SafeHandles;

public static class LongPath
{
    static class Win32Native
    {
        [StructLayout(LayoutKind.Sequential)]
        public class SECURITY_ATTRIBUTES
        {
            public int nLength;
            public IntPtr pSecurityDescriptor;
            public int bInheritHandle;
        }

        [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        public static extern bool CreateDirectory(string lpPathName, SECURITY_ATTRIBUTES lpSecurityAttributes);

        [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        public static extern SafeFileHandle CreateFile(string lpFileName, int dwDesiredAccess, FileShare dwShareMode, SECURITY_ATTRIBUTES securityAttrs, FileMode dwCreationDisposition, int dwFlagsAndAttributes, IntPtr hTemplateFile);
    }

    public static bool CreateDirectory(string path)
    {
        return Win32Native.CreateDirectory(String.Concat(@"\\?\", path), null);
    }

    public static FileStream Open(string path, FileMode mode, FileAccess access)
    {
        SafeFileHandle handle = Win32Native.CreateFile(String.Concat(@"\\?\", path), (int)0x10000000, FileShare.None, null, mode, (int)0x00000080, IntPtr.Zero);
        if (handle.IsInvalid)
        {
            throw new System.ComponentModel.Win32Exception();
        }
        return new FileStream(handle, access);
    }
} 
```

示例代码：

```
string path = @"c:\".PadRight(255, 'a');
LongPath.CreateDirectory(path);

path = String.Concat(path, @"\", "".PadRight(255, 'a'));
LongPath.CreateDirectory(path);

string filename = Path.Combine(path, "test.txt");

FileStream fs = LongPath.Open(filename, FileMode.CreateNew, FileAccess.Write);

using (StreamWriter sw = new StreamWriter(fs))
{
    sw.WriteLine("abc");
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-16T06:01:34.367

Microsoft TechNet 上有一个很棒的库来解决长文件名问题，它叫做**[Delimon.Win32.IO 库 (V4.0)](http://gallery.technet.microsoft.com/DelimonWin32IO-Library-V40-7ff6b16c)**，它有自己的 System.IO 中的关键方法版本

例如，您将替换：

```
System.IO.Directory.GetFiles 
```

和

```
Delimon.Win32.IO.Directory.GetFiles 
```

这将让您处理长文件和文件夹。

从网站：

> Delimon.Win32.IO 取代了 System.IO 的基本文件功能，并支持多达 32,767 个字符的文件和文件夹名称。
> 
> 这个库是在 .NET Framework 4.0 上编写的，可以在 x86 和 x64 系统上使用。标准 System.IO 命名空间的文件和文件夹限制可以处理文件名中包含 260 个字符和文件夹名称中包含 240 个字符的文件（MAX_PATH 通常配置为 260 个字符）。通常，您会在使用标准 .NET 库时遇到 System.IO.PathTooLongException 错误。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-05T13:23:18.527

是的，使用标准 API 会给您这种限制（255 个字符 IIRC）。

在 .NET 中，您可以使用[AlphaFS 项目](http://alphafs.codeplex.com/)，该项目允许您使用非常长的路径（使用“\\?\”样式）并模仿 System.IO 命名空间。

您可能可以像使用 System.IO 一样使用这个库，例如：AlphaFS.Win32.Filesystem。**File.Copy()**而不是 System.IO。**文件.复制（）**

如果您不想或不能使用 AlphaFS，则必须调用 Win32 API

# c# - Utility/tool to extract function list to CSV file

> ID：12747137
> 
> 赞同：1
> 
> 时间：2012-10-05T13:19:27.003
> 
> 标签：c#, powershell

I have set of .cs files. I want to extract the list of functions from those files.

I want to export the list into a CSV file with the following columns.

FileName FunctionName

Is there any inbuilt tool/utility to do that? or any other quick way (might be using powershell)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:25:03.440

PS中没有内置函数，你需要使用RegEx。如果您已经编译了 Assembly，您可以使用 Get-Member 或反射。

在大多数情况下，这个 RE 可能就足够了：

```
^[ \t]*(public|protected|private|static).*\([^;]*$ 
```

但它可以改进，例如看到[这个](https://stackoverflow.com/questions/7593136/regular-expressions-to-find-c-sharp-class-and-method-names)。对于可以帮助您查看[此](https://stackoverflow.com/questions/996758/do-you-know-any-alternative-to-ndepend-for-architects)帖子的 3thd 方工具。

# html - Rendering raw html with Redcarpet and Markdown

> ID：12747142
> 
> 赞同：4
> 
> 时间：2012-10-05T13:19:36.013
> 
> 标签：html, ruby-on-rails, escaping, markdown, redcarpet

I'm using [Redcarpet](https://github.com/vmg/redcarpet) as a Markdown renderer and I would like to be able to display html or any text with < and > without it to be parsed.

Here is an illustration of what should happen:

The user types

```
I *want* to write <code> 
```

The source of this comment when sent back by the server should be

```
I <em>want</em> to write &lt;code&gt; 
```

Problem is since the renderer outputs escaped html when parsing the Markdown, I get:

```
I &lt;em&gt;want&lt;/em&gt; to write &lt;code&gt; 
```

Therefore I can't distinguish between the html that people send to the server and the html that is generated by the Redcarpet renderer. If I do a `.html_safe` on this, my markdown will be interpreted but the user-inputted html too, which shouldn't.

Any idea on how to fix this? Note that the idea would be to display (but not parse) user-inputted html even if the user didn't use the backticks ` as expected with markdown.

Here is the relevant bit of code :

```
# this is our markdown helper used in our views
def markdown(text, options=nil)
    options = [:no_intra_emphasis => true, ...]

    renderer = MarkdownRenderer.new(:filter_html => false, ...)

    markdown = Redcarpet::Markdown.new(renderer, *options)
    markdown.render(text).html_safe
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-20T14:39:22.577

如果我理解正确，您只需要`<code>`普通文本而不是 HTML 元素。

为此，您需要使用反斜杠转义`<`and ：`>`

```
I *want* to write \<code\> 
```

# scala - 这个 FizzBu zz scala 实现的解释

> ID：12747147
> 
> 赞同：1
> 
> 时间：2012-10-05T13:19:44.773
> 
> 标签：scala, fizzbuzz

FizzBu​​zz 的以下 scala 实现如何工作？

这是我的想法，但我不确定我是否走在正确的轨道上： 使用`=>`这是一个高阶函数吗，如果是这样，它只是返回一个字符串 `i`是一个包含任何一个的字符串`"FizzBuzz"`，`"Fizz"`或者`"Buzz"`

```
package fizzbuzz

object FizzBuzz {
  def main(args : Array[String]) {
    (1 until 100).map(_ match {                
      case i : Int if ((i % 3) == 0 && (i % 5) == 0) => "FizzBuzz"
      case i : Int if ((i % 3) == 0) => "Fizz"
      case i : Int if ((i % 5) == 0) => "Buzz"
      case i : Int => i.toString
    }).foreach(println _)
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:23:46.363

> => 的使用是不是高阶函数

不，`=>`这里是匹配案例语法的一部分。它将给定案例的模式与案例主体分开，即语法是与给定值匹配的模式，并且`case pattern => body`是在匹配时应该执行的代码。`pattern``body``pattern`

该代码通过迭代从 1 到 100 的数字（通过使用 map）并将每个数字与`match`块中的模式匹配来工作。这些模式使用模式保护来检查每个数字是否可以被 3、5 或两者（或两者都不能）整除。结果是一个字符串序列。然后代码使用 迭代该序列`foreach`并使用 打印每个项目`println`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-14T01:11:26.607

```
(1 to 100) map { n => (n % 3 == 0, n % 5 == 0, n) } map {
case (true, true, n) => "FizzBuzz"
case (true, false, n) => "Fizz"
case (false, true, n) => "Buzz"
case (false, false, n) => n
} foreach (println)

(1 to 100) foreach { n =>
  println( (n % 3 == 0, n % 5 == 0) match {
    case (true, true) => "FizzBuzz"
    case (true, false) => "Fizz"
    case (false, true) => "Buzz"
    case (false, false) => n
  } )
} 
```

# jquery - 修复 IE 中不带 'px 或 %' 的行内样式的宽度

> ID：12747148
> 
> 赞同：1
> 
> 时间：2012-10-05T13:19:48.533
> 
> 标签：jquery, css, internet-explorer

我必须修复没有“px 或 %”的内联样式的宽度。 **我不能修改页面中的html和css，只能修改脚本。** 我想读取宽度（仅使用 javascript）来修复丢失的单位度量。

问题仅在 IE 9 上。在 chrome、FF、safari 中，我可以使用下面的代码来测量宽度。

使用 jQuery 1.8.2

```
/*script in head */
$(function() {
       var style = $("#test").attr("style"); 
       alert(style);
       //in IE it prints only color:red;border:1px solid red;
});

/* html in body */
<div id="test" style="width:20;color:red;border:1px solid red;">
    Content ...
</div> 
```

关于tis问题（IE问题）的一个例子-> [http://jsfiddle.net/2QJ96/1/](http://jsfiddle.net/2QJ96/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:27:04.080

您可以通过读取宽度

```
$('#test').css('width'); 
```

此外，您的 HTML 需要修改：

```
/* html in body */
<div id="test" style="width:20px; color:red; border:1px solid red;">
    Content ...
</div> 
```

# javascript - jQuery 方法，可选参数的顺序

> ID：12747152
> 
> 赞同：3
> 
> 时间：2012-10-05T13:19:57.277
> 
> 标签：javascript, jquery

我只是玩了一下[animate()](http://api.jquery.com/animate/)方法。

> .animate（属性[，持续时间] [，缓动] [，完成]）

我知道我不必将所有参数传递给 javascript 中的函数。但我想知道的是jquery如何计算出`function(){ }`指的是回调函数，它实际上是第4个参数，而不是缓动字符串（即第3个）？

```
$('div').animate({ height: '10px' }, 100, function(){ }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:23:39.500

有简单的测试来检查类型：

从[源代码](http://code.jquery.com/jquery-latest.js)（`animate`调用`speed`）：

```
jQuery.speed = function( speed, easing, fn ) {
    var opt = speed && typeof speed === "object" ? jQuery.extend( {}, speed ) : {
        complete: fn || !fn && easing ||
            jQuery.isFunction( speed ) && speed,
        duration: speed,
        easing: fn && easing || easing && !jQuery.isFunction( easing ) && easing
    };

...

isFunction: function( obj ) {
        return jQuery.type(obj) === "function";
    },

...

type: function( obj ) {
        return obj == null ?
            String( obj ) :
            class2type[ core_toString.call(obj) ] || "object";
    },

...

core_toString = Object.prototype.toString

...

jQuery.each("Boolean Number String Function Array Date RegExp Object".split(" "), function(i, name) {
    class2type[ "[object " + name + "]" ] = name.toLowerCase();
}); 
```

所以基本上它检查的`Object.prototype.toString.call(fn)`是`"[object Function]"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:22:23.353

jQuery查看参数的**类型**发现，*easing*参数是**string**类型，而*complete*参数是**function**类型。

请参阅[.animate()](http://api.jquery.com/animate/)的 api，了解每个参数的类型。

例子：

```
function test(first, second, third) {
   if (typeof third == 'string') {
       //third is the easing function
   } else if (typeof third == 'function') {
       //third is the callback function
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T13:22:46.903

检查参数的*typeof*和*arguments.length*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T13:23:17.767

可以检查参数的类型。

像：

```
if (typeof easing == 'function') {
  complete= easing;
  easing = 'some default value'; 
} else {
  // ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T13:23:09.730

我的猜测是使用 typeof() 来查看参数是否是一个函数，但如果你真的想知道，请查看它们的来源：[https ://github.com/jquery/jquery](https://github.com/jquery/jquery)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-05T13:23:41.867

大概：

```
function test(){};
typeof test // 'function' 
```

# powershell - C# 中的 Powershell 和权限

> ID：12747154
> 
> 赞同：0
> 
> 时间：2012-10-05T13:20:05.977
> 
> 标签：powershell, windows-services, localsystem

我正在从作为 SYSTEM 帐户运行的 Windows 服务运行 PowerShell 脚本。为了增加权限，我让用户选择一个用户，我稍后会使用 LogonUser 方法模拟整个线程。

这样我就可以访问网络驱动器，并且当我尝试在 PowerShell 中打印当前用户时也可以。

但是我有一个不起作用的情况：

一个示例是用户尝试加载 Exchange 管理单元并运行 cmdlet：Get-MailboxPermission

然后他得到错误：“Get-MailboxPermission”一词未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。术语“Get-MailboxPermission”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。

我猜这是权限问题，我想知道是否还有其他需要更改为 RunSpace 等以获得增加的权限？还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:19:46.900

哪个 PowerShell 版本？

看起来您没有添加交换管理单元。尝试在之前运行此命令：

```
Add-PSSnapin Microsoft.Exchange.Management.PowerShell.Admin 
```

或者，通过代码，在运行空间初始化中，使用以下代码：

```
RunspaceConfiguration rsConfig = RunspaceConfiguration.Create();
PSSnapInException snapInException = null;
PSSnapInInfo info = rsConfig.AddPSSnapIn("Microsoft.Exchange.Management.PowerShell.Admin", out snapInException);
Runspace myRunSpace = RunspaceFactory.CreateRunspace(rsConfig);
myRunSpace.Open(rsConfig); 
```

阅读本文了解更多信息： http: [//msdn.microsoft.com/en-us/library/exchange/bb332449 (v=exchg.80).aspx](http://msdn.microsoft.com/en-us/library/exchange/bb332449(v=exchg.80).aspx)

# android - 如何在 Android 中使用 Intent 连接到已知的 WiFi？

> ID：12747157
> 
> 赞同：6
> 
> 时间：2012-10-05T13:20:12.263
> 
> 标签：android, android-intent, wifi, connect

我有这样的事情：

```
wifiNetworks = (ArrayList<ScanResult>) mWifiManager.getScanResults(); 
```

现在我可以简单地获取 wifi SSID：

```
wifiNetworks.get(0).SSID 
```

我不知道网络是 WEP，WPA，是否有密码，所以我只想创建一个 Intent，将 SSID 或 ScanResult 放在那里并将其发送到设置或任何地方，以便让用户输入密码和连接到该网络。是否可以？如果没有，获取有关网络类型的信息并以编程方式连接到它的最简单方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T13:36:19.780

查看此链接：[如何以编程方式连接到 Android 中的特定 Wi-Fi 网络？](https://stackoverflow.com/questions/8818290/how-to-connect-to-a-specific-wifi-network-in-android-programmatically).

ScanResult 拥有您需要了解的有关网络的所有信息。

```
wifiNetworks.get(0).capabilities 
```

给出一个字符串。

```
capabilities format = [security-key-group cipher]<[security]> 
```

只需使用“-”作为分隔符分隔这 3 个值并获得安全性。

```
security can have the following values:

OPEN
WEP
WPA
WPA2 
```

如果 security = "WEP" 则密钥和组密码为空。

# jquery - Rails - 让字段以取决于选择的形式出现

> ID：12747162
> 
> 赞同：0
> 
> 时间：2012-10-05T13:20:26.350
> 
> 标签：jquery, ruby-on-rails, forms, select

当用户从下拉列表中选择一个选项时，我试图在表单中显示一个字段 - 即，如果他们从下拉列表中选择“其他”，则下拉列表下方会出现一个字段，显示“请指定”。我似乎根本无法让它工作——“请指定”字段始终可见。我哪里错了？谢谢！

```
<script>
$(function(){
    $("#pref-select").change(function(){
        if ($("#pref-select").val()=="Other"){
            $("#other-pref").show();
        } else {
            $("#other-pref").hide();
        }
    })
})
</script>

<div class="field">
  <%= f.label :pref %><br />
  <%= f.select :pref, ["", "1", "2", "Other"], {:id => "pref-select"} %>
</div>
<div class="field" id="other-pref">
  <%= f.label :other_preference %><br />
  <%= f.text_area :other_pref %>
</div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T13:35:55.957

你可以这样做：http: [//jsfiddle.net/vooboo13/RK97r/1/](http://jsfiddle.net/vooboo13/RK97r/1/)

你给你不想显示css值的字段 display:none;

然后，您使用 jQuery 来监视某个值并在它是该值时显示它。

HTML：

选择“法币”，见证奇迹发生

```
<form action="" id="cars">
    <select name="cars" id="car_selector">
        <option value="volvo">Volvo</option>
        <option value="saab">Saab</option>
        <option value="fiat">Fiat</option>
        <option value="audi">Audi</option>
    </select>
    <p>&nbsp;</p>
    <label class="hidden_option">Why would you DO that?</label>
    <input type="text" name="reason" class="hidden_option" />
</form> 
```

JS：

```
$(document).ready(function(){
    $("#car_selector").change(function(){
        if($("#car_selector").val() == "fiat"){
          $(".hidden_option").fadeIn('fast');   
        }            
    });        
}); 
```

CSS：

```
.hidden_option{
 display: none;   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-27T15:15:23.197

我从未尝试过，但您听说过[相关字段-rails](https://github.com/vollnhals/dependent-fields-rails) gem吗？

# html - CSS Box-Shadow div 覆盖

> ID：12747163
> 
> 赞同：4
> 
> 时间：2012-10-05T13:20:27.613
> 
> 标签：html, overlay, z-index, css

我有一个盒子阴影的问题，被另一个 div 遮住了。

这是我的代码：

HTML-

```
<div id="wrap">
        <div id="header">
            <div id="nav"></div>
        </div>  
        <div id="main_content"></div>
        <div id="footer"></div>
    </div> 
```

CSS-

```
body{
    margin:0;
}
#wrap{
    margin:0 auto;

    width:84%;
}
#header{    
    background-image:url(img/header_pattern.png);
    background-repeat:repeat;

    margin:0 auto;

    width:100%;
    height:170px;

    box-shadow:5px 5px 5px black;
    z-index:1;
}
#main_content{
    background-image:url(img/main_pattern.png);
    background-repeat:repeat;

    width:100%;
    min-height:700px;
    height:100%;
    z-index:2;

} 
```

截屏-

[http://i.stack.imgur.com/TfDyi.png](http://i.stack.imgur.com/TfDyi.png)

我怎样才能使阴影不会“堆叠在”（在z轴上），因此被`#main_content`div遮挡，但仍然在我的内部`#wrap`？

谢谢。

不，我不只是不想`#main_content`推倒。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T13:24:32.013

只需添加：

```
position: relative; 
```

至`#header{`

**示例：http:**
[//jsfiddle.net/kJajC/](http://jsfiddle.net/kJajC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:30:17.337

如果您想在 z 轴上使用`z-index`.

请注意，如果您实际上不想更改其在 x/y 平面上的位置，则只需指定它`position:relative;`没有任何`top`、或x/y 偏移`bottom`，它将位于 x/y 平面上无论如何，它都会被静态放置。`left``right`

从[MDN 添加 z-index](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/Adding_z-index)：

> 警告！z-index 仅在元素被定位时才有效。

我发现他们的系列文章[Understanding CSS z-index](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index)对这些东西很有帮助。

# raphael - 放大特定国家 n raphael.js

> ID：12747167
> 
> 赞同：0
> 
> 时间：2012-10-05T13:20:52.690
> 
> 标签：raphael

1.  . 我对 raphael.js 很陌生。我已经用鼠标完成了一张欧洲地图，我可以在鼠标悬停时改变颜色。但我只想在点击 ts 时缩放特定国家。它必须像缩放
    点击的国家一样国家的具体点

    ```
     script type="text/javascript" charset="utf-8"> 
               $(document).ready(function() {
                var rsr = Raphael('map', '631', '686');
                var attr = {
                           fill: "#C0C0C0",
                           stroke: "#666",
                           "stroke-width": 1,
                           "stroke-linejoin": "round"
                       };
                   var world = {};
                   world.Portugal = rsr.path("56,0.133-1.32,0.527c-0.661,1.321-0.264,2.906-0.925,4.228c-0.528,1.057-3.698,5.415-3.434,6.868
    c0.132,0.526,1.056-0.529,1.584-0.529c0.792-0.132,1.585,0.133,2.377,0c0.396,0,0.792-0.396,1.188-0.264
    c2.113,0.527,8.981,5.019,9.906,4.887c0.396,0,4.49-1.981,4.754-2.113C57.876,621.536,58.537,621.536,59.197,621.536L59.197,621.536
    z").attr(attr);;
                   world.Spain = rsr.path(" M194.57,552.728c0.924,0.396,1.981,0.63.434,4.754c-,0,0.792,0    
    c0.661,0.133,1.453,0.133,1.849,0.528c0.66,0.528,0.264,1.717,0.924,2.113v0.132C190.74,552.066,190.476,553.916,194.57,552.728
    L194.57,552.728z").attr(attr);
           var current = null;
                    for(var country in world) {
                     (function (st, country) {
                       country = country.toLowerCase();
                         st[0].style.cursor = "pointer";
                         st[0].onmouseover = function () { 
                             st.animate({fill:"#808080", stroke: "#ccc"}, 500);
                         };
                         st[0].onmouseout = function () {
                             st.animate({fill: "#C0C0C0", stroke: "#666"}, 500);
                             st.toFront();
                             R.safari();
                         };
                         st[0].onclick = function () {
                          st.animate({width: "500px"}, 'slow');//THS DOES NOT WORk
                         };
                     })(world[country], country);
                   }
                 }); 
    ```

    谁能帮我怎么做？？？请

    ```
    .. 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:22:59.690

您正在尝试设置路径实际上不具备的“宽度”属性。要走的路是将'transform'属性设置为[here](https://stackoverflow.com/questions/9866684/raphael-js-scale-an-element-over-time?rq=1)。您可能还必须设置缩放原点，因为您要缩放的路径不以零为中心（参见[Raphael center of scale in transform method](https://stackoverflow.com/questions/9867975/raphael-center-of-scale-in-transform-method)）。

# ruby - 获取用于登录 Watir 的浏览器？

> ID：12747169
> 
> 赞同：2
> 
> 时间：2012-10-05T13:20:55.863
> 
> 标签：ruby, watir

我想显示在一系列测试中使用的是哪个浏览器，即浏览器是 Chrome 还是 Firefox。

我有：

```
def initialize(browser)
  @browser = browser
  $log.info("\n"+"#{browser}"+" Browser initialized") 
end 
```

它返回 Watir：

```
<Watir::Browser:0x24553a5d286c4da2 url="https://url" title="page name"> 
```

有什么想法可以让它返回浏览器名称吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T13:13:10.983

Watir API 中还有一个方法，它也适用于 watir-classic：

```
browser.name # => chrome 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T14:00:08.477

您可以通过直接访问底层 selenium-webdriver 功能来做到这一点：

```
browser.driver.capabilities[:browser_name]
#=> 'chrome' 
```

更简单的解决方案是（来自[http://watirwebdriver.com/determining-which-browser/](http://watirwebdriver.com/determining-which-browser/)）：

```
browser.driver.browser
#=> :chrome 
```

# android - EditText 在 Simpleadapter 上搜索过滤器？

> ID：12747170
> 
> 赞同：0
> 
> 时间：2012-10-05T13:20:57.520
> 
> 标签：android

所以我有一个`SimpleAdapter`设置，我想在`editText`它上面添加一个，你可以输入你的搜索查询并实时更新列表。

我知道我已经可以`setTextFilterEnabled(true)`强制弹出键盘了。当您按下 an 并完成它时，我将简单地这样`editText`做。

我遇到的问题是当你搜索时弹出的字母框真的很难看而且太大了。它实际上占据了屏幕的 1/4，覆盖了您的搜索结果。有没有办法自定义这个？在这种情况下，有没有办法使用`editText`for a`simpleAdapter`以便我可以完全移除该框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:10:13.580

虽然 Tobias 的回答很有见地，但它没有回答我的问题，而且对于我需要做的事情来说相当复杂。我没有每次都清除和重新加载列表，而是选择在数组适配器中使用过滤器来自动完成所有这些操作：

[这是帮助我做到这一点的文章](http://www.mokasocial.com/2010/07/arrayadapte-filtering-and-you/)，它非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:30:53.050

您必须`addTextChangedListener`添加`TextWatcher`.

```
Boolean[] isPresent;

ed = (EditText) findViewById(R.id.editText1);
    ed.addTextChangedListener(new TextWatcher() {

            @Override
            public void afterTextChanged(Editable arg0) {
                // TODO Auto-generated method stub

            }

            @Override
            public void beforeTextChanged(CharSequence arg0, int arg1,
                    int arg2, int arg3) {

            }

            @Override
            public void onTextChanged(CharSequence arg0, int arg1, int arg2,
                    int arg3) {

                textLength = ed.getText().length();
                list.clear();
                isPresent = initIsPresentArray();

                for (int i = 0; i < tempList.length; i++) {
                    for (int j = 0; j < (tempList[i].length() - (textLength - 1)); j++) {
                        if (textLength <= tempList[i].length()) {
                            if (isPresent[i] == false) {
                                if (ed.getText()
                                        .toString()
                                        .equalsIgnoreCase(
                                                (String) tempList[i]
                                                        .subSequence(
                                                                j,
                                                                (j + textLength)))) {
                                    list.add(tempCaseList.get(i));
                                    isPresent[i] = true;
                                }
                            }
                        }
                    }
                    if (list.size() == 0) {
                        error.setText(getResources().getString(R.string.notFound));
                    } else {
                        error.setText("");
                    }

                    lv.setAdapter(new CustomAdapter(History.this, list));
                }
            }
        }); 
```

和方法 initIsPresentArray()

```
 public Boolean[] initIsPresentArray() {
            Boolean[] isPresent = new Boolean[tempCaseList.size()];
            for (int i = 0; i < isPresent.length; i++) {
                isPresent[i] = false;
            }
            return isPresent;
        } 
```

如您所见，我不直接对`ArrayList`包含信息进行操作，而是使用此方法将其复制`ArrayList`到一个临时的`ArrayList`

```
public ArrayList<Case> createTempList(ArrayList<Case> listOfCases) {

    ArrayList<Case> temporaryList = new ArrayList<Case>();

    for (Case c : listOfCases) {
        temporaryList.add(c);
    }

    return temporaryList;
} 
```

如果有不清楚的地方，只需添加评论！

# graphics - HLSL 运算符/函数循环计数

> ID：12747176
> 
> 赞同：4
> 
> 时间：2012-10-05T13:21:10.470
> 
> 标签：graphics, directx, hlsl

我正在建模一些要在 GPU 上运行的算法。是否有关于各种内在函数和计算在现代硬件上需要多少个周期的参考或其他内容？（nvidia 5xx+ 系列，amd 6xxx+ 系列）我似乎无法找到任何官方消息，尽管在他们的文档中提到了标准化、平方根和其他功能的成本增加。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T07:22:04.073

不幸的是，您正在寻找的周期盘点文档要么不存在，要么（如果存在）它可能不会像您期望的那样有用。您是正确的，一些更复杂的 GPU 指令比更简单的指令需要更多的时间来执行，但循环计数仅在指令执行时间是主要性能瓶颈时才重要；GPU 的设计使得这种情况很少发生。

GPU 着色器程序实现如此高性能的方式是并行运行许多（可能是数千个）着色器线程。每个着色器线程在被换出到不同的线程之前通常只执行一条指令。在完美条件下，有足够多的线程在运行，其中一些*始终*准备好执行下一条指令，因此 GPU 永远不必停止；这隐藏了单个线程执行的任何操作的延迟。如果 GPU 在每个周期都在做有用的工作，那么就好像*每个*着色器指令都在一个周期内执行。在这种情况下，让你的程序更快的唯一方法是让它更短（更少的指令=更少的工作周期）。

在更现实的情况下，当没有足够的工作来保持 GPU 完全加载时，瓶颈几乎可以保证是内存访问而不是 ALU 操作。在最坏的情况下，单个纹理提取可能需要数千个周期才能返回；对于像这样不可预测的停顿，通常不必担心 sqrt() 是否比 dot() 花费更多的周期。

因此，最大化 GPU 性能的关键不是使用更快的指令。这是关于最大化占用率——也就是说，确保有足够的工作来保持 GPU 足够忙以隐藏指令/内存延迟。它是关于您的内存访问要聪明，以尽量减少到 DRAM 的痛苦往返。有时，如果你*真的很*幸运，那就是使用更少的指令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T12:44:19.900

[http://books.google.ee/books?id=5FAWBK9g-wAC&lpg=PA274&ots=UWQi5qznrv&dq=instruction%20slot%20cost%20hlsl&pg=PA210#v=onepage&q=table%20a-8&f=false](http://books.google.ee/books?id=5FAWBK9g-wAC&lpg=PA274&ots=UWQi5qznrv&dq=instruction%20slot%20cost%20hlsl&pg=PA210#v=onepage&q=table%20a-8&f=false)

this is the closest thing i've found so far, it is outdated(sm3) but i guess better than nothing.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-06T10:47:59.757

运算符/函数有循环吗？我知道汇编指令有循环，这是低级的时间测量，主要取决于 CPU。因为运算符和函数都是高级编程的东西。所以我认为他们没有这样的衡量标准。

# php - 对数组进行排序以找到匹配项

> ID：12747186
> 
> 赞同：0
> 
> 时间：2012-10-05T13:21:53.850
> 
> 标签：php, arrays

我有两个这样的数组

```
Array
(
    [0] => MYU_MP1
    [1] => 4cc00e5f580f00c2e54193fde7129608
    [2] => da8bbfdb40be0dc2b3312ca1037f994a
    [3] => d4cfaa8db24c4b81db506189360b6b99
)
Array
(
    [0] => MYU_SC1
    [1] => MYU_SC2
    [2] => MYU_SF1
    [3] => MYU_SC3
    [4] => MYU_AD1
    [5] => MYU_AD2
    [6] => MYU_AD3
    [7] => MYU_AD4
    [8] => MYU_RC1
    [9] => MYU_RC2
    [10] => MYU_RC3
    [11] => MYU_RC4
    [12] => MYU_RC5
    [13] => MYU_RC6
    [14] => MYU_RC7
    [15] => MYU_RC8
) 
```

第一个别名为“deliverable”，另一个别名为“non_deliverable”，第三个数组

```
Array
(
    [d8df18561040f3d9bd9868f5c5aaa7c2] => Array
        (
            [rowid] => d8df18561040f3d9bd9868f5c5aaa7c2
            [id] => MYU_SC1
            [qty] => 1
            [price] => 500
            [name] => WAEC Scratch Card
            [service_image] => assets/img/waec.jpg
            [service_category] => scratch_cards
            [subtotal] => 500
        ) 
```

第三个数组别名为“cart_items”

```
 [f68964856a61092d9a2566d024a0ba28] => Array
        (
            [rowid] => f68964856a61092d9a2566d024a0ba28
            [id] => MYU_MP1
            [qty] => 1
            [price] => 210000
            [name] => Apple iPhone 5 16gb
            [service_image] => 
            [service_category] => mobile-phones
            [subtotal] => 210000
        ) 
```

)

我编写了一个函数，它应该遍历第三个数组以确定第三个数组的“id”元素是否是第一个或第二个数组的成员

```
//sort through cart items
    foreach ($cart_items as $key => $item) {
        if(in_array($item['id'], $deliverables) && in_array($item['id'], $non_deliverables)) {
            $deliverable = TRUE;
            $non_deliverable = TRUE;
        }

        if(in_array($item['id'], $deliverables) && !in_array($item['id'], $non_deliverables)) {
            $deliverable = TRUE;
        }

        if(in_array($item['id'], $non_deliverables) && !in_array($item['id'], $deliverables)) {
            $non_deliverable = TRUE;
        }

        if($deliverable && $non_deliverable)
            $type = "both";
        if($non_deliverable)
            $type = "non-deliverable";
        if($deliverable)
            $type = "deliverable";
    }
    return $type; 
```

但是，当第三个数组在第一个和第二个数组中都有匹配项时，该函数返回“可交付”。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:27:28.693

```
function somefunction()
        foreach ($cart_items as $key => $item) {
            $deliverable = in_array($item['id'], $deliverables);
            $non_deliverable = in_array($item['id'], $non_deliverables);

            $type = "none";
            if ($deliverable && $non_deliverable) {
                $type = "both";
            } elseif ($deliverable && !$non_deliverable) {
                $type = "deliverable";
            } elseif (!$deliverable && $non_deliverable) {
                $type = "non-deliverable";
            }
        }
        return $type;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:25:23.003

您的排序顺序错误。$deliverable 和 $non_deliverable 的检查应该是最后一个。或者，您可以使用 if-else-if-else 结构。

# c# - pictureBox1_MouseClick 事件：Arrays/Squares（生命游戏）

> ID：12747189
> 
> 赞同：0
> 
> 时间：2012-10-05T13:22:01.150
> 
> 标签：c#

我正在通过编写 LIFE 游戏来试验和学习 C#。目前我有一个`pictureBox`和一个`drawGrid`创建网格覆盖的函数。为了点击里面的每个单元格，`pictureBox`我已经实现了一个属性`pictureBox1_MouseClick`，其中有一个 if 决策逻辑来知道是否选择了一个单元格。我遇到的问题是当我快速单击方块时出现错误：`System.IndexOutOfRangeException`指向`fill_in[x, y] = !fill_in[x, y];`.

如何提高`pictureBox1_MouseClick`事件的点击准确性，以免出现该错误？

具体错误：

`life.exe 中发生了“System.IndexOutOfRangeException”类型的未处理异常

附加信息：索引超出了数组的范围。`

**代码**

```
namespace life
{
    public partial class Form1 : Form
    {

        Graphics paper;
        bool[,] fill_in = new bool[450, 450];
    int cellSize = 10;

 private void drawGrid()
        {
            int numOfCells = 100;        
            Pen p = new Pen(Color.Blue);
            paper.Clear(Color.White);

            for (int i = 0; i < numOfCells; i++)
            {   
                // Vertical Lines
                paper.DrawLine(p, i * cellSize, 0, i * cellSize, numOfCells * cellSize);
                // Horizontal Lines
                paper.DrawLine(p, 0, i * cellSize, numOfCells * cellSize, i * cellSize);
            }
        }

 private void pictureBox1_MouseClick(object sender, MouseEventArgs e)
        {
            int x = cellSize * (e.X / cellSize);
            int y = cellSize * (e.Y / cellSize);

            // Reverse the value of fill_in[i, j] - if it was false, change to true,
            // and if true change to false
            fill_in[x, y] = !fill_in[x, y];

            if (fill_in[x, y])
            {
                // Fill grid square with the filled color
                paper.FillRectangle(Brushes.Red, x, y, 10, 10);
            }
            else
            {
                // Fill grid square with unfilled color 
                paper.FillRectangle(Brushes.White, x, y, 10, 10);          
            }

        }

     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:52:03.967

请确保您的计算返回所需的值：

```
int x = cellSize * (e.X / cellSize);
int y = cellSize * (e.Y / cellSize); 
```

在这种情况下，x 和 y 可以超出数组的边界。示例：cellsize * (450 / cellsize) 等于 450，这会导致错误，因为允许的索引范围从 0 到 449。

编辑：

要解决此问题（这是一个***非常肮脏且临时的修复***），请按如下方式更改您的代码：

```
int x = cellSize * (e.X / cellSize);
int y = cellSize * (e.Y / cellSize);

x = x >= 450 ? 450 - 1 : x;
y = y >= 450 ? 450 - 1 : y; 
```

更可取且实际上更智能的解决方案是简单地将表格的大小调整为与 eX 和 eY 的范围完全相同

希望这会有所帮助，Piotr

# ruby - ruby 数组交集性能问题

> ID：12747191
> 
> 赞同：3
> 
> 时间：2012-10-05T13:22:08.957
> 
> 标签：ruby, arrays

我需要将 n 数组与数百万个元素（数据库 ID）相交。这段代码完美无缺，但速度很慢（数组很大）。我该如何改进它？

```
[[1,2,3,4],[2,4,6,8],[4,5,8]].inject([]){|c,v| c = v if c.size==0; c = c&v if c.size>0; c } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T13:26:10.123

```
[1,2,3,4] & [2,4,6,8] & [4,5,8] #=> [4] 
```

[交集方法](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-26)使用哈希，所以它应该很快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T13:25:31.770

Ruby 提供了一个交集运算符。

我可以建议你试试这个：

```
> [[1,2,3,4],[2,4,6,8],[4,5,8]].reduce{ |accum, arr| accum & arr }
=> [4] 
```

**编辑：**

这可以写得更简洁一些，但它会受到可读性的影响。

```
[[1,2,3,4],[2,4,6,8],[4,5,8]].reduce(:&) 
```

# c# - 把窗户带到前面

> ID：12747194
> 
> 赞同：2
> 
> 时间：2012-10-05T13:22:16.617
> 
> 标签：c#, .net, winforms

> **可能重复：**
> [从最小化恢复 WindowState](https://stackoverflow.com/questions/354445/restore-windowstate-from-minimized)

我有通常隐藏在托盘栏中的窗口。

然后我想显示它是否隐藏，并带到前面。

如果它已经打开，我只想把它带到前面。

如果它被最小化到任务栏，那么我想扩展它并放在前面。

现在我的 show 方法中有这个：

```
this.Show();
this.Activate();
this.ShowInTaskbar = true;
this.TopMost = true;
this.Focus(); 
```

但如果它被最小化，它不会扩大。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:26:21.303

尝试添加`this.WindowState = FormWindowState.Maximized`

有关 FormWindowState 枚举的完整详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/system.windows.forms.formwindowstate.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T13:40:37.923

```
if (this.WindowState == FormWindowState.Minimized)
    this.WindowState = FormWindowState.Normal;    

this.Show();
this.Activate();
this.ShowInTaskbar = true;
this.TopMost = true;
this.Focus(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T13:26:36.763

如果它被最小化，您将不得不使用[WindowState](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.windowstate.aspx)属性来恢复窗口。

```
 this.WindowState = FormWindowState.Maximized; // To maximize
 this.WindowState = FormWindowState.Normal; // To restore 
```

# c - 使用 -std=gnu99 和内联函数时的编译错误

> ID：12747198
> 
> 赞同：14
> 
> 时间：2012-10-05T13:22:30.510
> 
> 标签：c, gcc

以下代码：

```
#include <stdio.h>
inline int myfunc (int x) {
    return x+3;
}

int main () {

    printf("%d", myfunc(2));
    return 0;
} 
```

使用标志时不编译`-std=gnu99`（我正在使用 gcc 编译）。这是它抛出的错误：

```
gcc -std=gnu99 -c main.c -o main.o
gcc -std=gnu99 main.o -o main
main.o: In function `main':
main.c:(.text+0x15): undefined reference to `myfunc'
collect2: ld returned 1 exit status
make: *** [main] Error 1 
```

`-std=gnu99`省略时编译没有问题。有谁知道为什么使用链接器会抱怨`-std=gnu99`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T15:11:52.880

在 C99 中，您需要为您的内联函数指定一个声明，例如

```
int myfunc(int); 
```

`-finline-functions`或允许编译器通过指定或来实际内联函数`-O3`。

引用 C99 标准：

> 任何具有内部链接的函数都可以是内联函数。对于具有外部链接的函数，适用以下限制： 如果函数使用内联函数说明符声明，则它也应在同一翻译单元中定义。如果翻译单元中函数的所有文件范围声明都包含不带 extern 的内联函数说明符，则该翻译单元中的定义是内联定义。内联定义不为函数提供外部定义，也不禁止在另一个翻译单元中进行外部定义。内联定义提供了外部定义的替代方案，翻译器可以使用它来实现对同一翻译单元中函数的任何调用。 **未指定对函数的调用是使用内联定义还是外部定义。**

所以编译器可以自由地使用`myfunc`- 如果你不提供它就不存在的外部定义，因此链接器错误。为什么它更喜欢选择一个不存在的外部定义？`-finline-functions`因为您通过不使用或包含此标志的优化级别来禁止内联。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T13:40:41.030

这是`gnu_inline`打嗝。使用`-std=gnu99 -fgnu89-inline`.

有关详细信息，请参阅[函数属性](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)（项`gnu_inline`）。

相关段落：

> 在 C 中，如果函数既不是外部函数也不是静态函数，则该函数被编译为独立函数，并在可能的情况下被内联。
> 
> 这就是 GCC 传统上处理内联声明函数的方式。由于 ISO C99 为 inline 指定了不同的语义，因此该函数属性被提供为一种转换度量，并作为其自身的有用特性。此属性在 GCC 4.1.3 及更高版本中可用。如果定义了预处理器宏**GNUC_GNU_INLINE**或**GNUC_STDC_INLINE**中的任何一个，它就可用。请参阅内联函数与宏一样快。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T13:30:35.410

你应该在定义它之前声明'myfunc'。例如，可以使用 -std=gnu99 选项编译此代码：

```
#include <stdio.h>

int myfunc(int);

inline int myfunc (int x) {
    return x+3;
}

int main () {

    printf("%d", myfunc(2));
    return 0;
} 
```

**更新**

实际上，关于 C 标准的 inline 关键字只是对 C 编译器的一个建议。但是编译器可以选择不内联。因此，它可以按照自己的方式行事。

在您的示例中，您可以使用我上面显示的函数声明 - 或者您可以添加**优化标志“-O3”**（在 linux gcc 上测试）及以上 - 在这种情况下，您的源代码将在没有额外声明的情况下编译。

**更新**

在这里您可以找到更深入的解释：[https ://blogs.oracle.com/dew/entry/c99_inline_function](https://blogs.oracle.com/dew/entry/c99_inline_function)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T13:41:53.557

显然你需要指定你正在使用并且你想采用内联函数

> > ```
> > -fgnu89-inline 
> > ```
> > 
> > 选项 -fgnu89-inline 告诉 GCC 在 C99 模式下对“内联”函数使用传统的 GNU 语义。此选项被 GCC 版本 4.1.3 接受并忽略，但不包括 4.3。在 GCC 4.3 及更高版本中，它改变了 GCC 在 C99 模式下的行为。使用这个选项大致相当于将“gnu_inline”函数属性添加到所有内联函数。
> > 
> > 选项 -fno-gnu89-inline 明确告诉 GCC 在 C99 或 gnu99 模式下使用 C99 语义来表示“内联”（即，它指定默认行为）。GCC 4.3 首次支持此选项。C89 或 gnu89 模式不支持此选项。
> > 
> > 预处理器宏`__GNUC_GNU_INLINE__`和`__GNUC_STDC_INLINE__`可用于检查哪些语义对“内联”函数有效。
> 
> 来源： http: [//linux.die.net/man/1/gcc](http://linux.die.net/man/1/gcc)

所以要编译你的代码，你至少需要这个：

```
gcc source.c -std=gnu99 -fgnu89-inline 
```

# c# - 数据网格视图选择多个单元格

> ID：12747205
> 
> 赞同：0
> 
> 时间：2012-10-05T13:22:51.013
> 
> 标签：c#, visual-studio-2010

我可以从数据网格视图中选择一个单元格，但我想看看我是否可以一次选择多个单元格并使用该数据。使用 C# 创建图表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:27:19.813

您可以尝试选择 DataRow，它`DataRow`包含 `Cells` 属性

```
 var cells = DataGridView.Rows[index].Cells; 
```

代码示例

```
 public DataControlFieldCell GetCellByName(GridViewRow Row, String CellName)
    {
        foreach (DataControlFieldCell Cell in Row.Cells)
        {
            if (Cell.ContainingField.ToString() == CellName)
                return Cell;
        }
        return null;
    } 
```

为了允许多选，您定义`DataGridView.MultiSelect`属性

链接：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.multiselect.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.multiselect.aspx)

你也可以使用

```
DataGridName.SelectionMode = DataGridViewSelectionMode.CellSelect 
```

链接：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.selectionmode.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.selectionmode.aspx)

# timer - 获取系统服务以在每月的某一天运行

> ID：12747206
> 
> 赞同：0
> 
> 时间：2012-10-05T13:22:53.447
> 
> 标签：timer

我有一个项目，它创建一个批处理服务来运行在我的主项目中创建的作业。我的问题是 System.Timers.Timer 无法安排过去 28.4 天，并且间隔不能改变。我的批处理服务有大约 9 个操作员，其中一些每隔几分钟执行一次，一些每天、每周和每月执行一次。

除了每月的部分，我的一切都在工作，我们希望在每月的第三个星期四执行它。我已经知道如何在第三个星期四 gt，所以这不是问题。问题是我不能超过 28.4 天，而且每个月间隔都会改变。我研究过 System.Threading，但据我所知，我不能将它用于不同间隔的多个作业。

任何人都有解决方案或需要我研究的东西，这可能会引导我朝着正确的方向前进？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:28:49.030

您可能需要重新考虑您的设计，以更短的时间间隔（天、小时甚至分钟）启动计时器，以检查它是否已达到某个预先存储的日期/时间。

您上面建议的问题是，如果您重新启动服务或重新启动盒子，您将失去计时器。

所以... 对于每月运行，将计时器设置为 24 小时。存储下次它应该在某处（数据库、文件系统、注册表）运行作业的时间，并在每次计时器事件触发并运行需要运行的内容时检查它。

# javascript - Javascript - 更改 div 的 css 以使其可见？

> ID：12747210
> 
> 赞同：0
> 
> 时间：2012-10-05T13:22:59.733
> 
> 标签：javascript, css

使用 CSS，我将一个名为“tidy”的 DIV 设置为不可见且宽度为 0px。

```
<div id='tidy'>Test div I am hidden</div> 
```

我试图只使用 javascript 来保持页面光亮，所以不能使用 jquery。

如何创建一个链接，单击该链接将使 div 再次可见并将宽度设置为 xxxpx？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:28:09.710

使用显示样式进行隐藏且不占用页面空间：

```
var node = document.getElementById("tidy");

function hideTidy() {
    node.style.display = "none";
}

function showTidy() {
    node.style.display = "";
} 
```

添加简单切换：

```
var tidyVisible = true;

function toggleTidy() {
    (tidyVisible ? hideTidy : showTidy)();
    tidyVisible = !tidyVisible;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:26:53.603

假设您有这样的链接：

```
<a href="#" id="tidy_toggle">click to display hidden element</a> 
```

你可以像这样使用它：

```
var toggler = document.getElementById('tidy_toggle');
var tidy = document.getElementById('tidy');
toggler.onclick = function(event) {
    event.preventDefault();
    tidy.style.display = 'block';
    tidy.style.width = 'xxxpx';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T13:27:56.300

[在此处](http://jsfiddle.net/fcQGh/)查看演示

```
function makevisible() {
     var tidy = document.getElementById("tidy");
     tidy.style.display= 'block';
     tidy.style.width = '100px';    
}  ​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T13:26:45.767

```
document.getElementById('tidy').style.visibility = 'visible'; 
```

# mysql - 包含相关数据的非常大的表。什么 DBMS 是最佳的，以及如何对其建模？

> ID：12747211
> 
> 赞同：0
> 
> 时间：2012-10-05T13:23:03.253
> 
> 标签：mysql, mongodb, hadoop, cassandra, scalability

我有一个脚本将每个用户的职位发布的相关因素插入到表格中。该表现在有 9300 万行，并且在未来会呈指数级增长。该表只有三个字段：job_id、user_id 和相关性。目前大约有 6500 名用户和大约 45,000 个工作岗位。我需要重新考虑数据建模吗？

这种设置的最佳 DBMS 是什么？

我需要能够按相关性排序并轻松执行类似的操作 `SELECT relevance FROM jobpostrelevance WHERE job_id = 1 AND user_id = 2`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:37:42.870

根据我的经验，如果您正在寻找最佳性能的写作，您可以尝试 MongoDB 或 Cassandra，两者都非常好。尽管您的问题似乎适合键值数据库（例如 Cassandra）。

但我会根据“您的硬件”回答您的问题：

**如果整个数据库（将）适合内存**，我会选择**MongoDB**，因为你会得到更好的结果。模型：一个文档（MongoDB 是面向文档的），每个“列”作为一个属性。

**如果整个数据库不适合内存**，我毫不怀疑：**Cassandra**是最好的选择。如果 MongoDB 不能将全部数据保存在内存中，它的性能会变得更差（您可以在[http://www.cubrid.org/blog/dev-platform/nosql-benchmarking/](http://www.cubrid.org/blog/dev-platform/nosql-benchmarking/)中阅读）。模型：一个 ColumnFamily，每个属性都有 1 个列。

使用 Cassandra，您将能够使用 Hadoop（在其上使用 Pig / Hive）对数据进行排序（我尝试过），但我不知道您是否可以将 MongoDB“连接”到 Hadoop。我的建议：MongoDB 有一个非常好的文档（10gen），而 Cassandra 的文档不如 MongoDB。但如果您需要 Cassandra 文档，您可以访问 datastax 文档：[http ://www.datastax.com/docs/1.1/index](http://www.datastax.com/docs/1.1/index)

# ajax - 无法通过ajax调用发送文件

> ID：12747215
> 
> 赞同：0
> 
> 时间：2012-10-05T13:23:16.717
> 
> 标签：ajax, forms, upload

我正在尝试通过 ajax _call 将文件表单视图发送到服务器。这是我的表格：

```
<form  id="fileForm" name="fileForm" enctype="multipart/form-data">
      <div class="row" >
        <div class="span8" >
            <label><strong>Please attach a file</strong></label>
            <input style="margin-bottom:0" type="file" name="attach" id="attach" />
            <button type="submit" class="btn btn-primary" onclick="do_upload()" ><i class="icon-camera icon-white"></i>Send</button> 
        </div>
    </div>
</form> 
```

这是 do_upload （在同一个文件中）：

```
<script type="text/javascript">
function do_upload() 
    {
      var uploaded_file= $('#attach').val();
      alert(uploaded_file); //prints the name of the  uploaded file
      $.ajax({
            type:'POST',
            url : '<?php echo site_url()."/public/hours/do_upload/"; ?>', //the path to my controller
            data : uploaded_file,
            cache: false,
            contentType: 'multipart/form-data',
            processData :false , 
            success:function(data){
                alert(' sucessful ajax call ');//is printed
                   }
                });     
            }

</script> 
```

最后在公共/时间（这是我的控制器），我有：

```
function do_upload () {
    $config= array ('upload_path'=>'./uploads/','allowed_types'=>'pdf|gif|jpg|jpeg|docx',  'max_size'=>2048);

    //loading upload
    $this->load->library('upload', $config);

    if ( ! $this->upload->do_upload('attach'))
          { $data = array('error' => $this->upload->display_errors());
            var_dump($data);
            exit;

           }
         else
         {  $data = array('upload_data' => $this->upload->data('attach'));
            var_dump($data);
            exit;
         }
       } 
```

这是 var_dump($data) 的结果：

```
array(1) {
  ["error"]=>
  string(43) "<p>You did not select a file to upload.</p>"
} 
```

萤火虫显示此错误：

```
Form contains a file input, but is missing method=POST and enctype=multipart/form-data on the form.  The file will not be sent. 
```

有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T11:58:27.517

尝试 type="button" 或使用`<div class="btn btn-primary" onclick="do_upload()">..</div>`on

```
<button type="submit" class="btn btn-primary" onclick="do_upload()" ><i class="icon-camera icon-white"></i>Send</button> 
```

它对我有用..

# php - 使用正则表达式的 PHP 函数 getAllBetweenStr

> ID：12747219
> 
> 赞同：-2
> 
> 时间：2012-10-05T13:23:24.053
> 
> 标签：php, arrays, regex, string, substring

> **可能重复：**
> [获取两个字符串 PHP 之间的内容](https://stackoverflow.com/questions/1445506/get-content-between-two-strings-php)

我正在尝试创建一个 php 函数，该函数将返回两个子字符串之间所有出现的文本的数组。我对正则表达式毫无用处，会觉得这很方便，我敢肯定那里已经有一个非常好的，但我找不到。

```
 function getAllBetweenStr($input, $start, $end)
    {
         //DO STUFF

         //RETURN ARRAY
    }

$inputStr ="<a href='http://formaco4/en/abc' class='currentLink' hreflang='en'>abc1/a>
<a href='http://formaco4/en/abc/b1'  hreflang='en'>abc2</a>
<a href='http://formaco4/en/abc/b2'  hreflang='en'>abc3</a>
<a href='http://formaco4/en/abc/b3'  hreflang='en'>abc4</a>";

$linkStr = array();
$linkStr = getAllBetweenStr($inputStr, "http://formaco4/en/'", "'  hreflang") 
```

返回数组将是这样的 Array([0] => "abc/b1", [1] => "abc/b2", ... , [n] => "gingers/rule")

如果有帮助，我已经有了这个功能：

```
 function getBetweenStr($string, $start, $end)
    {
        $string = " ".$string;
        $ini = strpos($string,$start);
        if ($ini == 0) return "";
        $ini += strlen($start);    
        $len = strpos($string,$end,$ini) - $ini;
        return substr($string,$ini,$len);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:32:18.163

我相信这样的事情会起作用 - 它用于`preg_match_all`捕获两者`$start`和`$end`字符串之间的任何内容。

```
function getBetweenStr($string, $start, $end)
{
    preg_match_all( '/' . preg_quote( $start, '/') . '(.*?)' . preg_quote( $end, '/') . '/', $string, $matches);
    return $matches[1];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:50:40.953

```
<?php

function getAllBetweenStr($string, $start, $end)
    {
        $array_to_return = array();
        for($i=0; $i<count(explode($start,$string))-1; $i++) {
        $str_0 = explode($start,$string);
        $str_1 = explode($end, $str_0[1]);
        $array_to_return[$i] = $str_1[0];
        }
        return $array_to_return;
    }

$inputStr ="<a href='http://formaco4/en/abc' class='currentLink' hreflang='en'>abc1</a>
<a href='http://formaco4/en/abc/b1'  hreflang='en'>abc2</a>
<a href='http://formaco4/en/abc/b2'  hreflang='en'>abc3</a>
<a href='http://formaco4/en/abc/b3'  hreflang='en'>abc4</a>";
$linkStr = getAllBetweenStr($inputStr, "hreflang='en'>", "</a>");
print_r ($linkStr);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T13:32:18.250

我的不使用 preg_match 函数。希望你会发现这很有用

试试这个，我还为你提供了更好的功能（：：

```
function stribet($inputstr, $delimiterLeft, $delimiterRight) {
    $posLeft = stripos($inputstr, $delimiterLeft) + strlen($delimiterLeft);
    $posRight = stripos($inputstr, $delimiterRight, $posLeft);
    return substr($inputstr, $posLeft, $posRight - $posLeft);
}

$links = array("<a href='http://formaco4/en/abc' class='currentLink' hreflang='en'>abc1/a>", "<a href='http://formaco4/en/abc/b1'  hreflang='en'>abc2</a>");

foreach ($links as $linkstr){
$linkstr = stribet($linkstr, "http://formaco4/en/'", "'  hreflang='");
//echo $linkstr;
$data[] = $linkstr;
}

print_r($data); 
```

如果您只想坚持使用普通的字符串函数，请尝试爆炸`<a` 然后使用 foreach 循环来获取您的数据。

就像是

```
$inputStr ="<a href='http://formaco4/en/abc' class='currentLink' hreflang='en'>abc1/a>
<a href='http://formaco4/en/abc/b1'  hreflang='en'>abc2</a>
<a href='http://formaco4/en/abc/b2'  hreflang='en'>abc3</a>
<a href='http://formaco4/en/abc/b3'  hreflang='en'>abc4</a>";
$inputArray = explode ("<a", $inputStr);
  foreach ($inputArray as $linkstr){
    $linkstr = stribet($linkstr, "http://formaco4/en/'", "'  hreflang='");
    //echo $linkstr;
    $data[] = $linkstr;
    }

    print_r($data); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T13:32:21.573

学习正则表达式真的很值得。它们非常强大和有用：

```
preg_match_all('|'.preg_quote($start).'(.*?)'.preg_quote($end).'|', $input, $linkStr); 
```

在您的示例中，这将构建一个正则表达式：

```
|http:\/\/formaco4\/en\/\(.*?)  hreflang| 
```

parens () 告诉它捕获字符串的那部分。这 ”。*？” 在括号内指示它捕获所有字符，直到后面的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T13:34:05.800

试试这个（未经测试）：

```
function find_occurencies($start, $search, $end)
{
    $start = stripslashes($start);
    $end = stripslashes($end);
    $search = stripslashes($search);

    $pattern = '%'. $start . '([\s\w]+)?' . $end . '%';
    preg_match_all($pattern, $search, $matches);

    // Print the matches (should)
    echo '<pre>';
    print_r($matches);
    echo '</pre>';
} 
```

希望它有效。

# xcode - 离开公司的其他帐户阻止了 XCode 更新

> ID：12747227
> 
> 赞同：9
> 
> 时间：2012-10-05T13:23:51.520
> 
> 标签：xcode, app-store, itunes

我想从 appstore 更新我的 xcode，当我尝试时，我收到一条消息：“**您有可用于其他帐户的更新。登录到 XXXX@gmail.com 以更新该帐户的应用程序。** ”

我之前使用同事的 Apple ID 在我的 Mac 上安装了 xcode，现在我无法访问他的帐户，因为他在离开组织后更改了密码。

我尝试谷歌并找到了一些stackoverflow建议，例如sportlight的索引机制。建议我将Macintosh HD添加到Spotlight首选项的Privacy选项卡并关闭它。几分钟后删除之前添加的Macintosh，发现Spotlight重新索引了所有内容。在遵循所有建议后，我以相同的信息结束。

有人可以帮我用我的苹果 ID 更新我的 xcode。我知道如果我删除 xcode（重新安装），那么可以用我的苹果 ID 这样做，我不愿意这样做。

PLz帮助..Tnx提前。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T23:52:58.077

这个[答案](https://apple.stackexchange.com/a/73078/1383)可能会帮助你。看起来你可以告诉 XCode 忘记谁下载了应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T09:44:02.333

请按照以下步骤操作 :: 1\. 打开系统偏好设置 > Spotlight

1.  在隐私选项卡下。将您的 Macintosh HD（或任何主硬盘名称）添加到列表中。

2.  关闭窗口。等待几秒钟。然后返回 Spotlight 设置并删除您刚刚添加的条目。

3.  聚光灯索引现在应该开始完全重新索引。（一个点将在任务栏中的 Spotlight 图标内淡入/淡出）

4.  等待它完成，然后启动 Mac App Store。您现在应该在“更新”选项卡中看到更新。

这对我有用。如果您在评论部分遇到任何问题，请分享。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T23:18:36.693

我怀疑 iTunes 存在一些问题，因为我过去肯定使用相同的 Apple ID 进行了更新。我尝试了所有可能的 Apple ID（只有 2 个），但我仍然收到我必须使用正确的 Apple ID 登录的消息。

只好删除 xcode 并从头开始重新安装。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-23T11:50:11.727

这是它的简单答案...使用终端应用程序转到 /Users/Your_User_Name/Library/Caches/ 并删除其中的所有文件。重新启动您的Mac，然后尝试。

# .net - 我必须在服务器上安装 .NET 吗？

> ID：12747233
> 
> 赞同：2
> 
> 时间：2012-10-05T13:24:27.107
> 
> 标签：.net, console-application

我创建了一个控制台应用程序，并希望它在我们的服务器上运行。但我收到以下消息：

要运行此应用程序，您首先必须安装以下 .NET Framework 版本之一：.NETFramework, Version=4.5

我真的必须在我的服务器上安装 .NET 吗？难道所有必要的东西都不能作为 .dll 或其他东西包含在应用程序中吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T13:27:14.973

您必须安装 .NET Framework。您不能将其“包含在 dll 或其他内容中”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T13:27:34.873

> 难道所有必要的东西都不能作为 .dll 或其他东西包含在应用程序中吗？

不。

> 我真的必须在我的服务器上安装 .NET 吗？

是的，你必须。

您当然可以简单地针对已经存在的框架版本 - 例如，完全有可能已经安装了 .NET 2.0，并且您的项目完全有可能在不更改的情况下为 .NET 2.0 编译（只需更改项目属性中的目标框架）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T13:27:38.053

> **是**的，您必须在要运行已开发应用程序的机器上安装 .Net Framework。

检查此[如何使用 Visual Studio .NET 创建安装程序包](http://support.microsoft.com/kb/307353)，只需将您的项目输出和 .Net 框架作为先决条件。

只是`.Net Framework`和您的控制台应用程序输出您创建的 exe 或 .dll。.Net Framework 安装程序会自动安装所有事物/环境以在服务器上运行您的应用程序。

@Mark 提出了一个很好的观点，即您可以针对您的服务器操作系统默认包含的框架版本。检查[**哪个版本的 .NET Framework 包含在哪个版本的操作系统中**？](http://www.msigeek.com/2390/what-version-of-the-net-framework-is-included-in-which-version-of-the-os)并选择适当版本的目标框架，然后您无需在服务器上安装.Net Framework

参考： [Visual Studio Windows 应用程序设置项目](http://www.codeproject.com/Articles/12548/Visual-Studio-Windows-Application-Setup-Project)
[https://stackoverflow.com/questions/1164495/windows-7-default-net-framework](https://stackoverflow.com/questions/1164495/windows-7-default-net-framework)

# r - 复制列表以创建列表列表

> ID：12747234
> 
> 赞同：15
> 
> 时间：2012-10-05T13:24:28.607
> 
> 标签：r, list, nested-lists

我正在尝试使用以下（嵌套）结构创建一个列表：

```
l <- list()
for(i in seq(5)) l[[i]] <- list(a=NA,b=NA)
> str(l)
List of 5
 $ :List of 2
  ..$ a: logi NA
  ..$ b: logi NA
 $ :List of 2
  ..$ a: logi NA
  ..$ b: logi NA
 $ :List of 2
  ..$ a: logi NA
  ..$ b: logi NA
 $ :List of 2
  ..$ a: logi NA
  ..$ b: logi NA
 $ :List of 2
  ..$ a: logi NA
  ..$ b: logi NA 
```

我想通过`rep`或类似的方式来做到这一点，因为我正在创建一大堆空白列表，稍后我会填写。（我知道我可以通过引用它的下一个索引来扩展列表，但是索引两深时不起作用）。

我认为这`rep`对这个有用，但似乎没有。 `?rep`给出以下示例：

```
fred <- list(happy = 1:10, name = "squash")
rep(fred, 5) 
```

返回：

```
> str(rep(fred, 5))
List of 10
 $ happy: int [1:10] 1 2 3 4 5 6 7 8 9 10
 $ name : chr "squash"
 $ happy: int [1:10] 1 2 3 4 5 6 7 8 9 10
 $ name : chr "squash"
 $ happy: int [1:10] 1 2 3 4 5 6 7 8 9 10
 $ name : chr "squash"
 $ happy: int [1:10] 1 2 3 4 5 6 7 8 9 10
 $ name : chr "squash"
 $ happy: int [1:10] 1 2 3 4 5 6 7 8 9 10
 $ name : chr "squash" 
```

换句话说，它使列表变平。

我也试过`list( rep(fred,5) )`同样失败。

如何复制列表列表？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-05T13:39:05.220

我认为这与代表行为有关，您想在代表之前嵌套：

```
rep(list(fred),5) 
```

`str`输出：

```
List of 5
 $ :List of 2
  ..$ happy: int [1:10] 1 2 3 4 5 6 7 8 9 10
  ..$ name : chr "squash"
 $ :List of 2
  ..$ happy: int [1:10] 1 2 3 4 5 6 7 8 9 10
  ..$ name : chr "squash"
 $ :List of 2
  ..$ happy: int [1:10] 1 2 3 4 5 6 7 8 9 10
  ..$ name : chr "squash"
 $ :List of 2
  ..$ happy: int [1:10] 1 2 3 4 5 6 7 8 9 10
  ..$ name : chr "squash"
 $ :List of 2
  ..$ happy: int [1:10] 1 2 3 4 5 6 7 8 9 10
  ..$ name : chr "squash" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T13:42:15.580

您可以使用`replicate`：

```
l <- replicate(5, list(a=NA,b=NA), simplify=FALSE) 
```

# jquery - 为什么 CORS AJAX 响应中的响应标头为空？

> ID：12747236
> 
> 赞同：3
> 
> 时间：2012-10-05T13:24:31.810
> 
> 标签：jquery, playframework, playframework-1.x, response-headers

使用 jsonp 向外部 Play! 发出 AJAX 请求 Heroku 1.2.4 应用，返回数据成功，返回null on `getResponseHeaders()`。

这是我的代码：

```
var ajaxresult;
    ajaxresult = $.ajax({
    'complete': function (jqXHR, status) {            
        console.log('Complete!');
        console.log(status);
        console.log("on compelte: " + jqXHR.getAllResponseHeaders());
    },
    'dataType': "jsonp",
    'error': function (jqXHR, status, error) {
        console.log('Error!');
        console.log(status);
        console.log(error);
        console.log("on error: " + jqXHR.getAllResponseHeaders());
    },
    'success': function (data, status, jqXHR) {
        console.log('Success!');
        console.log(status);
        console.log(data);
        console.log("on success: " + ajaxresult.getAllResponseHeaders());
        console.log("on success(2): " + jqXHR.getAllResponseHeaders());
    },
    'type': 'GET',
    'url': url + "findAllSpecials"
}); 
```

如果我转储 jqXHR 的内容，我会得到：

```
"readyState: 4","setRequestHeader: function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this}","getAllResponseHeaders: function(){return s===2?n:null}","getResponseHeader: function(a){var c;if(s===2){if(!o){o={};while(c=bG.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c}","overrideMimeType: function(a){s||(d.mimeType=a);return this}","abort: function(a){a=a||\"abort\",p&&p.abort(a),w(0,a);return this}","done: function(){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}","fail: function(){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}","progress: function(){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}","state: function(){return e}","isResolved: function(){return!!i}","isRejected: function(){return!!i}","then: function(a,b,c){i.done(a).fail(b).progress(c);return this}","always: function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this}","pipe: function(a,b,c){return f.Deferred(function(d){f.each({done:[a,\"resolve\"],fail:[b,\"reject\"],progress:[c,\"notify\"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+\"With\"](this===i?d:this,[g])}):i[a](d[e])})}).promise()}","promise: function(a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}","success: function(){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}","error: function(){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}","complete: function(){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}","statusCode: function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this}","status: 200","statusText: success"] 
```

在 Opera 和 Firefox 中看到的响应标头是：

```
HTTP/1.1 200 OK
Cache-Control: no-cache
Content-Type: text/plain; charset=utf-8
Server: Play! Framework;1.2.4;prod
Set-Cookie: PLAY_FLASH=;Expires=Fri, 5-Oct-12 12:47:15 GMT;Path=/
Set-Cookie: PLAY_ERRORS=;Expires=Fri, 5-Oct-12 12:47:15 GMT;Path=/
Set-Cookie: PLAY_SESSION=...
Content-Length: 1290
Connection: keep-alive 
```

`getAllReponseHeaders()`为什么当浏览器可以看到标题时使用返回 null ？跨域请求是否会阻止将响应标头发送到 AJAX 响应？

欢迎所有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T13:39:59.100

恐怕大多数浏览器（Mozilla，Safari，Chrome）尚不支持`Access-Control-Expose-Headers`，因此您`getAllReponseHeaders()`将无法使用..

它在 Mozilla firefox 论坛中作为一个错误提出。但最近他们有一个修复这里是你可以查看的链接[这个](https://bugs.webkit.org/show_bug.cgi?id=41210)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T20:33:44.683

您的服务器应返回`Access-Control-Expose-Headers`带有可读取的标头白名单的标头，如此处所[定义](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS#Access-Control-Expose-Headers)。

我能够将此标头与 Firefox 18 和 Chrome 24 一起使用。我认为浏览器支持在这里不是问题，至少根据[这个站点](http://caniuse.com/#feat=cors)。

请务必在 GET（或 POST、PUT、DELETE）的响应中返回此标头，而不仅仅是使用“预检”请求中的 OPTIONS 方法。

# android - 使用自定义 AsynchTask 获取“HistoryRecord 的活动空闲超时”

> ID：12747237
> 
> 赞同：1
> 
> 时间：2012-10-05T13:24:35.983
> 
> 标签：android

我使用自定义异步任务：

```
public class AbstractDialogTask extends AbstractTask {

@Override
protected void onPreExecute() {
    super.onPreExecute();
    startWaitingScreen();
}

@Override
protected void onPostExecute(Integer result) {
    super.onPostExecute(result);
    stopWaitingScreen(result);
}

private void startWaitingScreen() {
    //show waiting activity
}

private void stopWaitingScreen(Integer result) {
    //finish waiting activity
} 
```

}

并且在执行操作时，将显示活动对话框。

但有时我会得到：

```
Launch timeout has expired, giving up wake lock!
Activity idle timeout for HistoryRecord{  WaitingActivity} 
```

而且我的等待活动没有关闭。

什么会导致这种行为？

# google-drive-api - Google Drive：文件大小为空

> ID：12747239
> 
> 赞同：6
> 
> 时间：2012-10-05T13:24:55.940
> 
> 标签：google-drive-api

当我尝试通过 Google Drive 上的 getFileSize() 获取文件大小时，结果为空。我知道当文件未存储在驱动器上但文件存储在驱动器上时结果可能为空（downloadUrl 不同于空）。

```
 Drive lService = new Builder(new NetHttpTransport(), new JacksonFactory(), lCredential).setApplicationName("TODO").build();
    FileList files = lService.files().list().execute();

    List<FileDTO> lResult = new ArrayList<FileDTO>();
    for (File lFile : files.getItems()) {
        DriveFileDTO lFileDTO = new DriveFileDTO();
        lFileDTO.setName(lFile.getTitle());
        lFileDTO.setMimeType(lFile.getMimeType());
        lFileDTO.setSize(lFile.getFileSize()); // <-- FileSize = NULL

        lFileDTO.setUrl(lFile.getDownloadUrl());

        lResult.add(lFileDTO);
    } 
```

你能帮助我吗？

谢谢！前！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-12T10:14:21.747

来自 Google Drive 的文件列表的默认请求将包括文件大小，但仅适用于文件大小不是隐式 null 的文件。例如，文件夹和 Google 电子表格（只是链接）将为空。

这可以通过 Drive API exlporer 进行验证。只需在字段编辑器中请求文件大小和 mimtype。对于所提到的文件类型，即使请求了文件大小，键值对也不会包含在响应中——但对于其他类型，将返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T23:49:03.483

请尝试使用 OAuth 2.0 Playground 重现该问题：

[https://developers.google.com/oauthplayground](https://developers.google.com/oauthplayground)

通过使用 OAuth Playground，我们可以发送原始请求并检查 API 中是否存在问题。我尝试自己复制它并且它工作正常。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-29T17:36:16.077

调用`getHeaders().GetContentLength()`HttpResponse 类（代码假定`myurl`是您的 url）：

```
HttpResponse resp = service.getRequestFactory().buildGetRequest(new GenericUrl(myurl)).execute();
Log.v("abc","file size is : " + resp.getHeaders().getContentLength()); 
```

# html - 为 HTML 表单的左右边框设置两个图像

> ID：12747240
> 
> 赞同：1
> 
> 时间：2012-10-05T13:25:05.030
> 
> 标签：html, image, css

我有一个 HTML 表单。我有两张图片；一种是模糊的阴影向左移动，另一种是阴影向右移动。现在，我想将这两个图像分别用作表单左侧和右侧的边框图像。

是否可以通过 HTML/CSS 实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:28:54.553

为什么不使用[CSS3 阴影](http://www.css3.info/preview/box-shadow/)呢？

您可以通过多种方式对其进行自定义。也许它适合您的需求，并且添加阴影似乎比让访问者下载图像更干净。

# iphone - 现在是否正式支持指向 iOS 设置的深层链接？

> ID：12747241
> 
> 赞同：1
> 
> 时间：2012-10-05T13:25:08.123
> 
> 标签：iphone, ios, ipad, ios5, ios6

前段时间有人说可以将用户发送到 iOS 的设置应用程序中的特定页面。然后我在 Stack Overflow 上遇到了这个[问题](https://stackoverflow.com/questions/9041526/in-app-link-to-settings-location-services-in-ios-5)，有人说 Apple 在 iOS 5.1 中删除了这个很棒的功能，我简直不敢相信。

他们只是用其他东西替换了这个 URL 方案吗？还是没有官方方法可以将用户发送到特定的设置页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:31:19.860

据我所知，在 iOS 6 中仍然没有官方支持的方式来做到这一点。对不起。我认为Apple希望保留在不破坏应用程序的情况下更改设置的权利。

# mysql - Mysql 错误：您的 SQL 语法有错误，请查看与您的 MySQL 服务器版本对应的手册以获取正确的语法

> ID：12747251
> 
> 赞同：-1
> 
> 时间：2012-10-05T13:25:31.100
> 
> 标签：mysql, syntax

如果有人可以提供帮助，会出现此错误吗？

```
Mysql Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'active = 1' at line 1 Query: SELECT title FROM cms_resorts WHERE ID = 3AND active = 1 
```

这是代码：

```
<?php  
$courseRecords = $db->records('SELECT ID,title FROM '.$dbprefix.'resorts WHERE active = 1 ORDER BY sorting DESC');
for($i=0,$max=count($courseRecords);$i<$max;$i++){

$selected='';
if($validate->value('booking_resort')==$courseRecords[$i]->ID){
    $selected='selected="selected"';
} ?>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T13:27:22.267

虽然您的示例代码没有显示它，但 SQL 错误在`WHERE`子句中有以下内容：

```
WHERE ID = 3AND active = 1 
```

`3`和之间没有空格`AND`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:30:12.680

代码和错误不相互响应。

代码似乎是正确的（我假设您不是`$dbprefix`从客户端获取的？）。

错误出现在您仅从`title`表中选择的地方 - 这里您需要在 ID 值之后添加一个额外的空格：

```
ID = 3AND active = 1 
```

应该成为

```
ID = 3 AND active = 1 
```

# php - 将变量惰性化到 SQLite 查询中

> ID：12747252
> 
> 赞同：-1
> 
> 时间：2012-10-05T13:25:44.750
> 
> 标签：php, sqlite

我是 SQLite 和 PHP 的新手，很抱歉这个新手问题。

如果我在这里对值使用固定数字，它不会引发错误，但这会..？

```
if (isset($_POST['l'])) { 
$query ='INSERT INTO clickmap (x, y, location) ' .
'VALUES (' . $_POST['x'] . ',' . $_POST['y'] . ',' . $_POST['l'] . ') '; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:28:38.553

您的串联是错误的，我对此一无所知，您可以试试这个：

```
if (isset($_POST['l'])) { 
    $query = "INSERT INTO clickmap (x, y, location) VALUES ('".$_POST['x']."', '".$_POST['y']."', '".$_POST['l']."')";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:29:08.313

不要将 POST 变量直接放入查询中，这是不安全的（参见：[http](http://en.wikipedia.org/wiki/SQL_injection) ://en.wikipedia.org/wiki/SQL_injection ）

所以做这样的事情：

```
if (isset($_POST['l']))
{
    $x = mysql_real_escape_string($_POST['x']);
    $y = mysql_real_escape_string($_POST['y']);
    $l = mysql_real_escape_string($_POST['l']);
    $query = "INSERT INTO `clickmap` (`x`, `y`, `location`) VALUES ('$x', '$y', '$l')";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T13:28:27.387

将您的查询包装成双引号，或将双引号放在您的 $_POST 引用中。`$query = "INSERT INTO ...";`

# encryption - 将 NSString 转换为 NSData

> ID：12747254
> 
> 赞同：0
> 
> 时间：2012-10-05T13:25:56.777
> 
> 标签：encryption, casting, nsstring, nsdata, nsstringencoding

有没有办法将 NSString 存储在维护**相同**数据的 NSData 中？

*示例（这很好，但这不是我需要的）：*

```
NSString *tmpString = @"Hello World!";
NSData *nsdataString = [tmpString dataUsingEncoding:NSUTF8StringEncoding]; 
```

*我需要这样的东西（显然失败）：*

```
NSData nsdataString = @"Hello World!"; 
```

简而言之：我需要像使用 NSData 一样使用 NSData **（就像使用强制转换运算符一样）**。这种方法对于预加载加密的核心数据 sqlite 数据库（在 NSString 中）非常有用，并且仅当用户访问持久存储的字段时才解密。要解密我使用：

```
NSData *decryptedData = [encryptedData AES256DecryptWithKey:keyString]; 
```

*其中 encryptedData 是一个 NSData，而 keyString 是一个 NSString。*

**非常感谢大家！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T21:43:46.907

简短的回答：没有。

NSData 对象是原始 1 和 0 序列的包装器。NSString 对象是未公开的编码中 Unicode 字符数组的包装器。

根据用于编写 NSData 的字符串编码，它可以表示许多不同的字符串。例如：代表相同字符的 little-endian UTF16 和 big-endian UTF16 字符串看起来会有所不同，并且尝试将 UTF-8 字符串解析为 UTF-16 会给您带来乱码。

这就是为什么在将 NSData 视为字符串之前必须将其转换为 NSString 的原因：因为在指定编码之前，它不是字符串；它只是原始的一和零。

从您的问题中我不确定您为什么要这样做，但是您可以使用 C 字符串（而不是 NSString）来完成您需要做的事情，您可以使用 NSData 的 -bytes 方法获得它。但是，如果你想在任何时候得到一个有用的字符串，你仍然需要记住编码。

# c - 如何在C中绘制Unicode刻度？

> ID：12747255
> 
> 赞同：2
> 
> 时间：2012-10-05T13:25:58.743
> 
> 标签：c, unicode, command-line, printf, solaris

我正在开发一个打印到命令行的测试框架，而不是“通过”/“失败”，我想打印刻度（复选标记）表示通过，交叉表示失败。[我在这个wingdings 字符集](http://www.alanwood.net/demos/wingdings.html)的底部找到了这些符号，并且我已经在[Mocha](http://visionmedia.github.com/mocha/)（一个javascript单元测试框架）中看到了这些确切的符号

我可以使用简单的从 C 打印它们`printf`吗？示例将是粉碎，谢谢！

ps：我用*nix

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T13:30:40.353

这取决于您的平台，以及终端（接收`printf()`输出并将其呈现为可读文本的程序）是否支持 Unicode。

如果它正在运行，例如 UTF-8，您可以打印[字符的](http://www.fileformat.info/info/unicode/char/2713/index.htm)UTF-8 序列：

```
/* This prints a ✓. */
printf("\xE2\x9C\x93\n"); 
```

# c# - DataGridView 设置列单元格 Combobox

> ID：12747256
> 
> 赞同：16
> 
> 时间：2012-10-05T13:26:02.293
> 
> 标签：c#, datagridview, datagridviewcombobox

我在 Datagridview 中有这样的表：

```
 Name   Money
 -------------
 Hi      100   //here Combobox with member {10,30,80,100} to choose
 Ki      30    //here Combobox with member {10,30,80,100} to choose 
```

我想从组合框中更改列“金钱”值

我试过这个但不知道进一步：

```
DataTable dt = new DataTable();
dt.Columns.Add("Name", typeof(String));
dt.Columns.Add("Money", typeof(String));
dt.Rows.Add(new object[] { "Hi", 100});
dt.Rows.Add(new object[] { "Ki", 30});

DataGridViewComboBoxColumn column = new DataGridViewComboBoxColumn();
var list11 = new List<string>() { "10", "30", "80", "100" };
column.DataSource = list11;
column.ValueMember = "Money";
dataGridView1.Columns.Add(column); 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-05T13:40:47.247

尝试这个

```
dataGridView1.AutoGenerateColumns = false;

DataTable dt = new DataTable();
dt.Columns.Add("Name", typeof(String));
dt.Columns.Add("Money", typeof(String));
dt.Rows.Add(new object[] { "Hi", 100 });
dt.Rows.Add(new object[] { "Ki", 30 });

DataGridViewComboBoxColumn money = new DataGridViewComboBoxColumn();
var list11 = new List<string>() { "10", "30", "80", "100" };
money.DataSource = list11;
money.HeaderText = "Money";
money.DataPropertyName = "Money";

DataGridViewTextBoxColumn name = new DataGridViewTextBoxColumn();
name.HeaderText = "Name";
name.DataPropertyName = "Name";

dataGridView1.DataSource = dt;
dataGridView1.Columns.AddRange(name, money); 
```

只需使用`DataPropertyName`而不是`ValueMember`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T13:38:32.160

你快完成了。

只有两个小问题：

1.  在您的表中，您将“金钱”值作为整数添加到行中，而在您的列中，它们被定义为字符串
2.  首先添加你的表格广告DataGridView DataSource，然后设置列DataPropertyName

完整代码如下：

```
var table = new DataTable();
table.Columns.Add("Name", typeof(string));
table.Columns.Add("Money", typeof(string));
table.Rows.Add("Hi", "100");
table.Rows.Add("Ki", "30");

var column = new DataGridViewComboBoxColumn();
column.DataSource = new List<string>() { "10", "30", "80", "100" };            

dataGridView1.Columns.Add(column);
dataGridView1.DataSource = table; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T13:37:00.607

您可以尝试以下方法：

```
DataGridViewComboBoxColumn column = new DataGridViewComboBoxColumn();
column.Name = "Money";
column.DataSource = new string[] { "10", "30", "80", "100" };
dataGridView1.Columns.Add(column);

for (int row = 0; row < dataGridView1.Columns.Count; row++)
{
   DataGridViewComboBoxCell cell = 
       (DataGridViewComboBoxCell)(dataGridView1.Rows[row].Cells["Money"]);
   cell.DataSource = new string[] { "80", "100" };
} 
```

或这个：

```
foreach (DataGridViewRow row in dataGridView1.Rows)
{
    DataGridViewComboBoxCell cell = (DataGridViewComboBoxCell)(row.Cells["Money"]);
    cell.DataSource = new string[] { "10", "30" };
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T13:37:30.150

您可以替换为

```
dt.Columns.Add("Money", typeof(List<string>)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-09T00:15:17.933

在设计器中设置网格时，请注意 ComboBox 列的索引。在此示例中为 1。Money 列的索引为 1。网格已经有一个成员，它是 DataGridViewComboBoxColumn。当您初始化包含控件的表单时，获取并初始化它。像这样：

```
DataGridViewComboBoxColumn cbc = (DataGridViewComboBoxColumn)dataGridView1.Columns[1];
cbc.Items.Add("10");
cbc.Items.Add("30");
cbc.Items.Add("80");
cbc.Items.Add("100"); 
```

填充网格时，将文本值插入该单元格。当用户单击单元格时，将出现下拉列表，他们将能够更改值。

真的，如果您只想拥有一个包含这些值的下拉列表，您可以直接在设计器中通过修改 Items 集合来完成。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-16T07:32:17.997

我知道已经晚了，但试试这个：

```
 DataTable dt = new DataTable();
            dt.Columns.Add("Name", typeof(String));
            dt.Columns.Add("Money", typeof(String));
            dt.Rows.Add(new object[] { "Hi", 100 });
            dt.Rows.Add(new object[] { "Ki", 30 });

            DataTable dt2 = new DataTable();
            dt2.Columns.Add("Money", typeof(String));
            dt2.Columns.Add("Meaning", typeof(String));
            dt2.Rows.Add(new object[] { "30" ,"Name 1" });
            dt2.Rows.Add(new object[] { "100", "Name 2" });
            dt2.Rows.Add(new object[] { "80", "Name 3" });
            dt2.Rows.Add(new object[] { "90", "Name4" });

            DataGridViewComboBoxColumn money = new DataGridViewComboBoxColumn();

            money.DataSource = dt2;
            money.HeaderText = "Money";
            money.DataPropertyName = "Money";
            money.DisplayMember = "Meaning";
            money.ValueMember = "Money";

            DataGridViewTextBoxColumn name = new DataGridViewTextBoxColumn();
            name.HeaderText = "Name";
            name.DataPropertyName = "Name";

            DGV.Columns.Add(money);
            DGV.Columns.Add(name);
            DGV.DataSource = dt; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-20T08:07:10.153

您可以像这样在**Visual Studio 设计**器中非常轻松地做到这一点：

1.  选择（左键单击）数据网格视图 (DGV)
2.  在 DGV 的属性中，单击链接**“编辑列”。**将打开一个对话框。
3.  **在“选定列”**列表中选择要更改为组合框的列
4.  在对话框的右侧，在**“未绑定列属性”的**“设计”部分中，找到`ColumnType`属性
5.  `ColumnType`将属性值更改为`DataGridViewComboBoxColumn`
6.  在“数据”部分下，单击“项目”右侧的 3 个点，然后在字符串集合编辑器中输入要添加的值
7.  单击确定保存更改。

运行应用程序。现在，您在第 6 步中输入的值出现在下拉框中。

[![在此处输入图像描述](../Images/aa4446e0c53a1dfd32eaa264ccd0b512.png)](https://i.stack.imgur.com/GE3ll.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-14T22:37:35.327

```
((DataGridViewComboBoxColumn)dgvFacturas.Columns["estatus"]).DataSource = estatustemp.ToList();
((DataGridViewComboBoxColumn)dgvFacturas.Columns["estatus"]).ValueMember = "Key";
((DataGridViewComboBoxColumn)dgvFacturas.Columns["estatus"]).DisplayMember = "Value"; 
```

# erlang - Riak mapreduce函数map_object_value在erlang pb客户端上返回空结果

> ID：12747259
> 
> 赞同：0
> 
> 时间：2012-10-05T13:26:13.750
> 
> 标签：erlang, mapreduce, riak

我在我的项目中使用 riak erlang 客户端，并且今天将 riak 和客户端库从 master 更新（客户端到 1.3.1，服务器到 1.2.0）。除了使用 map-reduce 返回空来获取多个实体之外，一切正常。`{ok, [...,{<stage_number>,<stage result>},...]}`我得到的不是通常的结果`{ok,[]}`。与客户端回滚，一切正常。但是，如果我将旧客户端与新 riak 一起使用，我在服务器日志中会出现很多错误。

这是一个代码示例，其中 BK 是对列表，`{Bucket, Key}`每对都与现有实体相关：

```
{ok, [{0,Result}]}=riakc_pb_socket:mapred(Pid, BK,[{map, {modfun, riak_kv_mapreduce, map_object_value},undefined, true}]) 
```

如何更改该行代码以使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T02:50:38.247

对我来说它工作正常：

```
(app@blinkov)10> riakc_pb_socket:mapred(Pid, BK,[{map, {modfun, riak_kv_mapreduce, map_object_value},undefined, true}]).
  {ok,[{0, 
      [<<131,108,0,0,0,16,104,2,100,0,9,112,111,115,116,95,116,
         101,120,116,109,0,0,...>>,
       <<131,108,0,0,0,16,104,2,100,0,9,112,111,115,116,95,
         116,101,120,116,109,0,...>>]}]} 
```

还有 1.3.1 和 1.2.0 各自的版本。

# objective-c - NSString 不会将自身添加到 NSMutableArray

> ID：12747260
> 
> 赞同：0
> 
> 时间：2012-10-05T13:26:19.493
> 
> 标签：objective-c, xml, nsmutablearray

我正在尝试将 NSString 添加到 NSMutableArray （仅包含 NSStrings）。我没有收到任何错误，但是当我查询数组时`count`，它返回零，表明它没有添加值。这是我的代码（它得到了一些 XML，这绝对是 100% 工作的）：

```
// get an array of genres for this game
NSArray *genreList = [self getAllItems:@"//genre" fileName:[NSURL URLWithString:queryURL]];
int numberOfGenres = [genreList count];
NSLog(@"This game has %u genres", numberOfGenres); 
```

此 NSLog 正确报告 XML 结果中的条目数，通常在 1-5 之间。

```
// put the genre names from that array into the current game's object
if (numberOfGenres > 0) {
    for (int i = 0; i < numberOfGenres; i++) {
        NSString *currentGenreName = [NSString stringWithString:[[genreList objectAtIndex:i] objectForKey:@"name"]];
        [currentGame.gameGenres addObject: currentGenreName];
        NSLog(@"I added a genre to %@, called %@.", currentGame.gameName, currentGenreName);
    }
} 
```

此 NSLog 还正确报告了游戏的标题，以及 XML 树中的标题。

```
// save current game to game list
NSLog(@"I'm about to save %@ to the array, with its %u genres", currentGame.gameName, [currentGame.gameGenres count]);
[_listOfGamesReturnedFromSearch addObject:currentGame]; 
```

最后一个 NSLog 总是将流派的数量报告为零。如果我`_listOfGamesReturnedFromSearch`稍后查询该数组，它会很好地保存其他属性（名称），但类型计数为零——由于某种原因它没有保存它们。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:30:09.627

这是未分配和初始化数组的典型症状 - 因此它保持存在`nil`并忽略所有发送的消息。分配初始化它，它会工作。

# java - struts2 - 如何有效地接受分块上传的文件，并保持分块顺序

> ID：12747264
> 
> 赞同：1
> 
> 时间：2012-10-05T13:26:34.453
> 
> 标签：java, file-upload, struts2, struts

代码正在传输一个`C#`大的图像文件，将其分成块，并且它还将**块顺序**作为每个请求中的请求参数发送。我希望在 Struts2 动作中接收文件。我看到的大多数示例都`Apache Commons File Upload`用于接收上传的文件，但它假设文件是`<http type="file"/>`​​作为多部分请求传输的。甚至流式 API 也假设了这一点。

目前，我正在考虑将每个请求的块存储在从块**orderNumber**参数接收到的索引处的数组中。收到所有块后，我会将文件写入系统。但它有一些问题。我将不得不跨多个请求维护数组的状态，并且动作类是`stateless`. 另外，我如何发现特定的块是最后一个？（我可以使用最后一个块发送请求参数，但如果有其他更清洁的方式）

编辑 - 图像类型可以不同，EOF 标记始终是一个常量查询字符串参数，图像总是分成固定大小的块（缓冲区为 1024 字节，可以更改），除了最后一个。可以更改 C# 程序。使用 C# 代码的用户已经登录，并且可以同时传输不同的文件。崩溃后恢复不是必需的。

实际上，C#程序只是一个`Silverlight`插件，用于方便**拖放**文件，并将它们发送到服务器（**仅适用于IE**，因为IE不支持拖放文件）

# java - 使用变量来存储值还是直接从对象中获取值？

> ID：12747266
> 
> 赞同：5
> 
> 时间：2012-10-05T13:26:39.560
> 
> 标签：java, variables, memory, resources

场景是我需要至少访问一个值两次。即我正在使用记录器来跟踪应用程序中发生的事情。我想记录对象的名称，该函数正在运行，然后用相同的名称做一些事情（即检查它是否包含一些字符串或将其放入数组中）。

将名称存储在变量中：

```
foo(Bar bar){
    String name = bar.getName();
    logger.info("I am working with "+name);
    this.doSomethingWith(name);
} 
```

或者调用 getName() 两次：

```
foo(Bar bar){
    logger.info("I am working with "+bar.getName());
    this.doSomethingWith(bar.getName());
} 
```

我了解，在第一种情况下，我将创建一个新字符串，为其分配一个值，然后检索该值两次。这样我使用了更多的内存资源，对吗？

在第二种情况下，我是否两次访问对象栏，然后两次访问它的名称。我想这不是 DRY 方法。但另一方面，我并没有在记忆中重复自己，对吗？

哪种方法更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:33:02.383

在第一个示例中，您没有使用更多内存，因为`String`它是一个不可变对象。因此，对 String 的任何引用都只是指向内存中同一对象的指针。

后一个选项还存在一些线程安全问题，其中`getName()`调用之间的结果可能会发生变化。尽管可能不太可能，但您可能需要考虑这一点。

考虑到这一点，我会推荐第一个选项，即使它更“健谈”。

注意：也有可能`getName()`是由计算生成的，在这种情况下，您实际上最终会使用第二种方法比第一种方法使用更多的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:31:24.310

您`Bar`应该不可变的类（对于大多数情况）。对于不可变类，这些方法是相同的，因此您可以选择任何您喜欢的方法。

只有在`Bar`可变的情况下才会出现任何真正的问题，因此 的值`bar.name`可以在 2 次读取之间变化。但是这种情况下将使用`Bar`作为域对象（它似乎是）毫无意义。您可以通过`bar`在`foo()`. 然后，再次，一旦您拥有 original 的本地副本`bar`，您可以选择您更喜欢的任何方式。

所以，这是品味问题。是的，在第一种情况下，您*可能会*浪费一点点内存用于本地引用，但最有可能的是，JVM 会对其进行优化，使其看起来像字节码级别的第二种方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T13:32:48.850

就个人而言，我更喜欢第二种方法。事实上，我通常只在必要时创建临时变量。

Martin Fowler ( [http://en.wikipedia.org/wiki/Martin_Fowler](http://en.wikipedia.org/wiki/Martin_Fowler) ) 也遵循此指南。他在我读过的书中提到了这一点：

[http://www.amazon.fr/Refactoring-Improving-Design-Existing-Code/dp/0201485672](http://www.amazon.fr/Refactoring-Improving-Design-Existing-Code/dp/0201485672)

关于这个主题的书的免费摘录在这里：

[http://sourcemaking.com/refactoring/replace-temp-with-query](http://sourcemaking.com/refactoring/replace-temp-with-query)

有些人会争辩说删除临时变量可能会导致性能问题。

正如马丁·福勒所说：

> 在这种情况下，您可能会担心性能。与其他性能问题一样，暂时让它滑动。十有八九，没关系。当它确实重要时，您将在优化期间解决问题。随着您的代码得到更好的分解，您通常会发现更强大的优化，而如果不进行重构，您可能会错过这些优化。如果情况变得更糟，很容易恢复温度。

但无论如何，这是一个品味问题。有些人发现第一种方法更具可读性，而另一些人则认为第二种方法更具可读性。我真的更喜欢第二个，因为我讨厌临时变量添加没有实际值的行:)

# ruby-on-rails - 无法使用 Clockwork 启动 clock.rb 模块 - 来自 activesupport 的未定义方法

> ID：12747267
> 
> 赞同：4
> 
> 时间：2012-10-05T13:26:44.110
> 
> 标签：ruby-on-rails, ruby

我有一个需要做一些后台工作的网络应用程序。我有一个`clock.rb`文件，其中包含：

```
require 'clockwork'
include Clockwork

require './config/boot'
require './config/environment'

every(5.seconds, 'ticking.get') { Resque.enqueue(TickingJob) }
[...rest of the code irrelevant...] 
```

当我尝试使用 启动文件时`clockwork app/clock.rb`，出现以下错误：

```
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/yaml.rb:56:in `<top (required)>':
It seems your ruby installation is missing psych (for YAML output).
To eliminate this warning, please install libyaml and reinstall your ruby.
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.0/lib/active_support/configurable.rb:31:in `config': undefined method `inheritable_copy' for #<Hash:0x000000012b3f08> (NoMethodError)
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.0/lib/active_support/configurable.rb:86:in `config'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.0/lib/active_support/configurable.rb:59:in `default_per_page='
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/kaminari-0.13.0/lib/kaminari/config.rb:35:in `block in <module:Kaminari>'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/kaminari-0.13.0/lib/kaminari/config.rb:9:in `configure'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/kaminari-0.13.0/lib/kaminari/config.rb:34:in `<module:Kaminari>'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/kaminari-0.13.0/lib/kaminari/config.rb:3:in `<top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/kaminari-0.13.0/lib/kaminari.rb:38:in `require'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/kaminari-0.13.0/lib/kaminari.rb:38:in `load_kaminari!'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/kaminari-0.13.0/lib/kaminari.rb:47:in `hook!'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/kaminari-0.13.0/lib/kaminari.rb:60:in `load!'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/kaminari-0.13.0/lib/kaminari.rb:73:in `<top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `require'
    from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
    from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `each'
    from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `block in require'
    from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `each'
    from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `require'
    from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.1/lib/bundler.rb:128:in `require'
    from /home/raph/public/[...]/config/application.rb:7:in `<top (required)>'
    from /home/raph/public/[...]/config/environment.rb:2:in `require'
    from /home/raph/public/[...]/config/environment.rb:2:in `<top (required)>'
    from /home/raph/public/[...]/app/clock.rb:5:in `require'
    from /home/raph/public/[...]/app/clock.rb:5:in `<top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/clockwork-0.4.0/bin/clockwork:12:in `require'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/clockwork-0.4.0/bin/clockwork:12:in `<top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/clockwork:19:in `load'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/clockwork:19:in `<main>'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>' 
```

关于“psych”的第一个错误似乎无关紧要（我每次都得到它，并且我确实重新安装了`libyaml`）。至于第二个，我不知道。模块的代码`activesupport`不好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T19:41:34.063

您需要将`include Clockwork`行移至以下`require`行：

```
require 'clockwork'    
require './config/boot'
require './config/environment'

include Clockwork

every(5.seconds, 'ticking.get') { Resque.enqueue(TickingJob) }
[...rest of the code irrelevant...] 
```

# java - 为 ViewPart 设置输入

> ID：12747269
> 
> 赞同：1
> 
> 时间：2012-10-05T13:26:45.990
> 
> 标签：java, swt, eclipse-rcp, jface

我想知道是否有任何机制可以将输入设置为`ViewPart`.

例如：我的应用程序具有搜索功能。当我点击搜索时，我想在`ViewPart`包含表格的表格中显示我的结果。如何设置此表的输入，如何将结果传输到 ViewPart？我目前`org.eclipse.ui.IWorkbenchPage.showView(String, String, int)`用于显示`ViewPart`.

我目前正在使用一个名为 ViewUtil 的 Util 类，它带有 showView(String id) 和 showViewWithParameter(String id, Object parameter) 等静态方法。第二种方法显示视图，并将参数保存在 ViewUtil 类的 Map 中。createPartControl(Composite) 方法从此映射中获取参数并将输入设置到表中。它有效，但我真的不喜欢它。

还有一个问题是调用org.eclipse.ui.IWorkbenchPage.showView(String, String, int)方法的时候，如果ViewPart已经显示出来了，就不会调用createPartControl(Composite)方法，所以表格的输入是没有设置。

我确定有更好的方法，但我找不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:07:14.207

看起来它被列为[Eclipse BugTracker](https://bugs.eclipse.org/bugs/show_bug.cgi?id=82621)中的一个错误。

* * *

我还发现了一些可能对其他人有帮助的东西。不幸的是，对我来说这是不行的，因为你只能使用 String 属性。看看`org.eclipse.ui.IWorkbenchPart3`。它有一个包含字符串属性的映射和注册的可能性`propertyChangedListeners`。

* * *

我还为搜索结果视图找到了一个特定的解决方案。将`org.eclipse.search.searchResultViewPages`扩展添加到您的插件 xml 就可以解决问题。然后，您需要实现一个`ISearchResultPage`显示结果并具有需要实现的`com.porsche.dps.main.SearchResultPage1.setInput(ISearchResult, Object)`方法和搜索结果对象的`ISearchResult`。

# android - 奇怪的 Android 启动器图标问题

> ID：12747270
> 
> 赞同：3
> 
> 时间：2012-10-05T13:26:48.137
> 
> 标签：android, icons, android-manifest, launcher

我在使用 Android 版本的 XHDPI 设备上遇到了一个奇怪的问题。4.1

我已经在 AndroidManifest.xml 中声明了应用程序图标，并将我需要的每个大小的图标（同名）放在 drawable-xhdpi、drawble-hdpi 和 drawable-mdpi 文件夹中。

当我在 mdpi（如 Galaxy Ace）设备和 hdpi（如 Nexus One、Galaxy Ace II 和 Android 版本 2.2 的模拟器）上启动应用程序时，它将显示我设置的正确图标。

但是图标会出错，我的意思是当我尝试在 Galaxy Nexus (4.1) 和 Emulator(4.1) 上启动它时，它会显示绿色 Android 图标。

![奇怪的图标](../Images/2c60757de2a2a413b7442131a94eeaec.png)

我尝试关闭并重新打开 Eclipse，尝试清理并重建项目，并且我确信每个可绘制文件夹中的图标都可以访问（可以打开和查看）。

这是 AndroidManifest.xml： 注意：ic_launcher 是图标的名称。我用我的替换默认图标。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.xxx.xxx"
    android:installLocation="preferExternal"
    android:versionCode="3"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.CAMERA" />

    <uses-feature android:name="android.hardware.camera" />

    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Light.NoTitleBar.Fullscreen" >
        <activity
            android:name="A"
            android:label="@string/a"
            android:screenOrientation="portrait" >
            <intent-filter android:label="@string/app_name" >
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="B"
            android:launchMode="singleTask"
            android:screenOrientation="portrait" android:label="@string/app_name">
        </activity>
        <activity
            android:name="C"
            android:label="@string/c"
            android:screenOrientation="portrait" android:launchMode="singleTask">
        </activity>
        <activity
            android:name="D"
            android:permission="android.permission.CAMERA"
            android:screenOrientation="landscape" android:label="@string/app_name">
        </activity>
        <activity
            android:name="E"
            android:screenOrientation="portrait" android:label="@string/app_name">
        </activity>
        <activity android:name="F" android:label="@string/app_name"></activity>
    </application>

</manifest> 
```

所有这些设备都保持无根并坚持使用原始库存系统。

我检查了几乎所有 SO 的类似问题，例如：

[Android 启动器图标不起作用](https://stackoverflow.com/questions/7546351/android-launcher-icon-not-working)

[应用启动器图标错误](https://stackoverflow.com/questions/12022579/app-launcher-icon-is-wrong)

[我的应用程序中的 ic_launcher 图标错误](https://stackoverflow.com/questions/12157668/wrong-ic-launcher-icon-in-my-app)

但仍然没有运气。

有人对此有任何想法吗？Android中的错误？

提前致谢

# ruby-on-rails-3 - 如何使用 sunspot solr 使用 group by 子句搜索两个或多个字段

> ID：12747274
> 
> 赞同：1
> 
> 时间：2012-10-05T13:27:02.633
> 
> 标签：ruby-on-rails-3, sunspot, mysql2, sunspot-rails

请任何人告诉我是否可以使用太阳黑子 solr 在相关字段上设置条件。我有四个模型。即品牌、部门、类别和product_details。品牌表包含 id、name 和已验证（标志）。部门包含id、name。类别包含 id 和 name。product_details 包含 name、price、image_url、discount、brand_id、department id 和 category_id。

品牌.rb

```
class Brand < ActiveRecord::Base
  has_many :product_details, :dependent=>:destroy
end 
```

部门.rb

```
class Brand < ActiveRecord::Base
  has_many :product_details, :dependent=>:destroy
end 
```

类别.rb

```
class Category < ActiveRecord::Base
  has_many :product_details, :dependent=>:destroy
end 
```

product_detail.rb

```
class ProductDetail < ActiveRecord::Base
  set_primary_key :id
  belongs_to :department
  belongs_to :category
  belongs_to :brand
  searchable do
    text :name
    text :brand do
      brand.name
    end
    integer :department_id
    integer :category_id
    integer :brand_id
    string :department_id_str do
      department_id.to_s
    end
    string :category_id_str do
      category_id.to_s
    end
    string :brand_id_str do
      brand_id.to_s
    end
  end
end 
```

product_details_controller.rb

```
def index
    @idproducts=ProductDetail.search do
        group :category_id_str, :brand_id_str, :department_id_str
    end
end 
```

在 product_details/index.html.erb

```
<% @idproducts.group(:category_id_str,:brand_id_str,:department_id_str).groups.each do |group| %>
    <% group.results.each do |result| %>
        <%= debug(result)%>
    <% end %>
<% end %> 
```

对于上面的代码，我得到错误数量的参数（3 for 1）错误

```
<% @idproducts.group([:category_id_str,:brand_id_str,:department_id_str]).groups.each do |group| %>
    <% group.results.each do |result| %>
        <%= debug(result)%>
    <% end %>
<% end %> 
```

对于上面的代码，#<Array:0x8a14ebc> 错误得到未定义的方法`to_sym'。

我观察到控制器中的多列分组是成功的。但是我要显示结果。请任何人告诉我如何显示多列分组结果。

请帮助我解决了上述问题。

# java - 如何知道这个 Java 的 string.replaceAll 是否被执行？

> ID：12747276
> 
> 赞同：1
> 
> 时间：2012-10-05T13:27:04.253
> 
> 标签：java, replaceall

如果我有一些字符串，例如：

```
String s = "This is a string"; 
```

现在我执行此操作：

```
s = s.replaceAll("This","What"); 
```

它的工作原理是 s = "What is a string"

很好，但现在如果表达式不匹配：

```
s = s.replaceAll("junk","What"); 
```

s 仍然是以前的样子，即`s = "This is a string";`

* * *

我想知道，在不等同于这些字符串的情况下，有没有办法知道 s.replaceAll 是否真的执行了某些操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T13:32:41.220

你试试可以吗

```
if(s.contains("junk")) 
  s.replaceAll("junk", "What"); 
else 
  //you know it hasn't executed! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:33:52.913

你是在问是否有除了 using 之外的其他方法`s.equals(...)`，那么答案是否定的。

javadoc 没有说明`replaceAll`如果没有更改任何字符将返回目标对象，因此即使这样做也应该被视为实现细节；ie如果您关心可移植性，`==` **则不应将**其用作捷径。

* * *

当然，您可以测试匹配正则表达式是否与原始字符串匹配，并使用它来确定是否会执行替换。但是，即使您知道发生了替换，也不能告诉您替换操作是否实际更改了字符串。（并且确定这很难......如果您需要考虑替换字符串包含组引用的情况。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T13:34:19.590

由于在屏幕后面`replaceAll`使用`Pattern.compile(regex).matcher(str).replaceAll(repl)`，您可以使用一些`Matcher`方法来确定是否会发生任何替换。但这实际上取决于您希望如何使用它。你为什么不想一开始就比较字符串？

# log-shipping - 无法在日志传送中检索主 ID 的备份设置

> ID：12747282
> 
> 赞同：1
> 
> 时间：2012-10-05T13:27:20.787
> 
> 标签：log-shipping

我正在运行 Windows Server 2008 R2 的两个亚马逊 ec2 实例之间进行日志传送。

sql server版本为sql server 2008 R2标准版

两个实例都在同一个域中，我可以访问实例之间的共享文件夹。

sql server 服务帐号、agent 服务帐号都在域帐号下运行。

当我激活日志传送（在辅助服务器中使用待机模式恢复）时，初始备份会在辅助服务器上恢复。

之后备份操作失败，我收到以下错误消息。

> ***错误：无法检索主 ID 'xxxxxx-xxxx-xxxx-xxxx-4d772cd7337e'的备份设置。（Microsoft.SqlServer.Management.LogShipping）
> 
> * * *
> 
> *** 错误：无法连接到服务器 IP-0A7653F2.(Microsoft.SqlServer.ConnectionInfo) ***
> 
> **错误：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。***** *****
> 
>  ****服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）（.Net SqlClient 数据提供者）** **** ----- 事务日志备份结束 ----- *** ****

 **** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T14:22:48.060

我能够解决这个问题。错误的原因是默认服务器名称（IP-0A7653F2）已更改为服务器实例的名称（在将实例添加到域控制器时已更改）。在设置日志传送时，设置使用默认值服务器名称，而不是更新的服务器名称。因此，在设置日志传送后，我编辑了设置并将服务器名称 ** IP-0A7653F2 ** 更改为当前实例名称，并且它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-13T14:42:41.257

我也通过以下错误消息偶然发现了同样的问题。我将其发布在这里，以便下次遇到相同问题时更容易找到。

```
*** Error: Could not retrieve restore settings.(Microsoft.SqlServer.Management.LogShipping) ***
*** Error: Failed to connect to server WIN-XXXXXXXXXX.(Microsoft.SqlServer.ConnectionInfo) ***
2019-06-13 10:23:14.90  *** Error: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)(.Net SqlClient Data Provider) *** 
```

解决方案是更改 SQL 代理命令中的服务器名称：

1.  查找 LS* SQL Server 代理作业。每一个人，
2.  编辑步骤
3.  更改服务器名称

此外，为了使将来的设置工作而无需摆弄这些步骤，请[告诉 SQL Server 新名称](https://docs.microsoft.com/en-us/sql/database-engine/install-windows/rename-a-computer-that-hosts-a-stand-alone-instance-of-sql-server?view=sql-server-2017)：

```
sp_dropserver <old_name>;  
GO  
sp_addserver <new_name>, local;  
GO 
```***

# database-design - 数据库设计多表 VS 通用表？

> ID：12747285
> 
> 赞同：2
> 
> 时间：2012-10-05T13:27:31.033
> 
> 标签：database-design, database-schema

我们的数据库设计有问题。我们不得不将我们的客户联系信息模式分解为单独的表： `Phone table,Email table, Fax table`等等，然后我们在主表和不同的联系表`many-to-many`之间建立了关系。`customer`

例如，如果客户在不同地点工作并与其他客户共享不同位的联系信息，则客户可以拥有许多电话号码。我正在尝试在创建一个通用表以保存所有形式的联系人数据和查找`contacts_types`具有标签值的字段（如`personal, email,work email,home phone ,cell phone, work phone , home fax ,work fax,work website etc`.

你会建议哪种设计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:21:05.923

作为从事数据库工作多年的人，请创建单独的表。首先，最终您可能需要不同的字段（我知道我们的电话表和电子邮件表具有不同的结构）。其次，您描述的模型是[EAV 模型](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)，它通常是性能和数据完整性的糟糕选择（很难强制执行您需要的所有 FK）。

我永远不会使用 EAV 表，除非它非常多变（比如所有可能的医学测试的细节）以至于我别无选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:38:04.113

要设计这样的数据库，您需要与表创建多对多关系。你会需要

联系人
1 --- * 电话 * --- 1 电话类型
1 --- * 电子邮件 * --- 1 电子邮件类型

如果您需要与其他联系人共享电话或电子邮件，则：

联系人
* --- * 电话 * --- 1 个电话类型
* --- * 电子邮件 * --- 1 个电子邮件类型

这是基本的数据库设计。我建议你阅读一些例子来给你更多的想法。

编辑：我找到了一个简单的图表来帮助：http: [//imar.spaanjaars.com/Images/Articles/N-LayerDesign/DatabaseDiagram.jpg](http://imar.spaanjaars.com/Images/Articles/N-LayerDesign/DatabaseDiagram.jpg)

完整的示例在“设计 - 收集要求”部分 [http://imar.spaanjaars.com/416/building-layered-web-applications-with-microsoft-aspnet-20-part-1](http://imar.spaanjaars.com/416/building-layered-web-applications-with-microsoft-aspnet-20-part-1)

如果需要参考表，您可以添加 PhoneType（家庭传真、工作传真、家庭电话等）或 EmailType（家庭、工作）表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T18:04:20.990

一个人可以有零个或多个地址，一个地址可以被零个或多个人使用。地址分配会随着时间而改变。

这是正确的答案：

```
Party -< PartyAddress >- Address

PartyAddress{
  partyId
  addressId
  fromDate
  toDate (nullable)
  label -> [work, home, fax, ...]
  extension (nullable)
}

TelephoneNumber : Address
EmailAddress : Address
WebSite : Address
MailingAddress : Address 
```

为销售订单处理抽象地址很有用。这样，您可以根据需要将订单发送到电子邮件地址。还可以轻松“列出与此联系人的所有通信方式”

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-05T15:47:06.747

看起来你需要一个“联系人”表：

```
contact id
customer id
first name
surname
... other fields which would have only one value per contact 
```

还有一个电话桌

```
contact id
phone number
phone type (home, office, mobile, fax) 
```

大概这个表的主键是电话号码，因为这应该是唯一的（问题是人们输入了错误的电话号码）

我认为每个联系人只有一个电子邮件地址 - 而我有三个地址，一个用于工作，一个用于家庭，一个用于垃圾邮件。在工作情况下，我只会给我的工作电子邮件，所以这是存储在“联系人”表中的电子邮件。

此架构允许您为每个客户多个联系人，每个联系人多个电话号码。

# android - APV PDF 查看器：如何为 Android NDK x86 平台构建？

> ID：12747286
> 
> 赞同：1
> 
> 时间：2012-10-05T13:27:30.440
> 
> 标签：android, android-ndk, x86, arm, android-x86

APV PDF 查看器[链接](http://code.google.com/p/apv/)

是否可以为 Android NDK x86 Build构建此“APV PDF Viewer [[apv-0.3.3dev01.tar.gz] ”代码？](http://code.google.com/p/apv/downloads/detail?name=apv-0.3.3dev01.tar.gz&can=2&q=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:54:47.977

这里需要两个文件更改：

[1] 文件：apv-0.3.3dev01.tar\pdfview\jni\Application.mk

```
 APP_MODULES := pdf fitz fitzdraw jpeg pdfview2 jbig2dec openjpeg
    APP_OPTIM := release
    APP_ABI := armeabi-v7a armeabi
        Change to APP_ABI := x86 
```

[2] 文件：apv-0.3.3dev01.tar\pdfview\jni\mupdf\draw\Android.mk

```
 LOCAL_CFLAGS := -O3 -DARCH_ARM
        Change to  LOCAL_CFLAGS := -O3   [  remove " -DARCH_ARM " ] 
```

注释 ：

“-DARCH_ARM”选项用于 ARM 处理器功率优化。

*   在此选项下，代码将尝试使用针对 ARM 架构的特殊优化指令，这些指令不适用于 x86 处理器指令集]

# r - 修改函数以删除 R 函数中的全局变量？

> ID：12747291
> 
> 赞同：0
> 
> 时间：2012-10-05T13:27:40.817
> 
> 标签：r

```
word <- c('abc noboby@stat.berkeley.edu','text with no email','first me@mything.com also you@yourspace.com')
pattern <- '[-A-Za-z0-9_.%]+@[-A-Za-z0-9_.%]+\\.[A-Za-z]+'

getmail<-function(pattern,word){
mail<<-c()
sapply(word,function(x){
out<-gregexpr(pattern,x)
for (i in 1:length(out[[1]])){
if (out[[1]][i]>0)
mail<<-union(mail,substr(x,start=out[[1]][i],stop=out[[1]][i]+attr(out[[1]],"match.length")[i]-1))
}})
return(mail)
}

getmail(pattern,word)

[1] "noboby@stat.berkeley.edu" "me@mything.com"           "you@yourspace.com"       
ls()
[1] "getmail" "mail"    "pattern" "word" 
```

该函数得到结果，但我觉得如果`mail`我运行 getmail(pattern,word) 后命名空间中没有全局变量会更好，我该如何修改它？不要删除 sapply 函数，按照我的方式做，只是不要让`mail`在命名空间中。

我知道我可以用更简单的方式得到结果，但我想了解更多关于函数的知识。

```
mail<-c()
out<-gregexpr(pattern,word)
for (i in 1:length(out)){
  for (j in 1:length(out[[i]])){
    if (out[[i]][j]>0)
    mail<-union(mail,substr(word[i],start=out[[i]][j],stop=out[[i]][j]+attr(out[[i]],"match.length")[j]-1))}}
mail
[1] "noboby@stat.berkeley.edu" "me@mything.com"           "you@yourspace.com" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:09:44.127

我可能会利用矢量化并跳过大部分循环：

```
> m <- gregexpr(pattern,word)
> lapply(seq_along(word),
         function(i){substring(word[i],m[[i]],m[[i]] + attr(m[[i]],"match.length"))})
[[1]]
[1] "noboby@stat.berkeley.edu"

[[2]]
[1] ""

[[3]]
[1] "me@mything.com "   "you@yourspace.com" 
```

这让你基本上只有两条线。是的，您需要过滤掉空字符串，并可能修剪一些空白，但我认为这更干净一些。

# c# - 无法向 Castle Windsor 注册 MvcMailer

> ID：12747292
> 
> 赞同：2
> 
> 时间：2012-10-05T13:27:41.357
> 
> 标签：c#, asp.net-mvc-4, castle-windsor, mvcmailer

我正在尝试将[MvcMailer](https://github.com/smsohan/MvcMailer)集成到 ASP.NET MVC 4 应用程序中。

我从 NuGet 安装了该软件包，并使用该`Scaffold`命令生成了一个邮件程序，没有任何问题。我最终得到了一个包含`UserMailer`and的新文件夹Mailers `IUserMailer`，以及.`UserMailer``Views`

现在，我想在每次用户注册时发送一封电子邮件。所有关于用户的操作都由 my 处理`AccountController`，所以我只是想我会改变它的构造函数来接受`IUserMailer`.

不过，温莎城堡抱怨道。它表示无法创建组件 AccountController，因为它依赖于等待满足的 IUserMailer。

我试图用它注册

```
container.Register(Classes.FromThisAssembly()
                .BasedOn<IUserMailer>()
                .LifestyleTransient()); 
```

但温莎仍然抛出同样的异常。

我什至尝试过注册它

```
container.Register(Component.For<IUserMailer>()); 
```

将错误更改为“IUserMailer 是抽象的。因此，无法将其实例化为服务 IUserMailer 的实现。您是否忘记代理它？”

我不知道如何让这个东西工作。任何人都可以帮忙吗？

[这条评论](https://github.com/smsohan/MvcMailer/issues/35#issuecomment-7429490)说 MvcMailer 与 Castle Windsor 不兼容，这会有些遗憾。如果是这种情况，有没有办法解决这个问题？

这可能是一个愚蠢的问题，我几乎没有温莎的经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T07:15:45.550

迄今：

```
container.Register(Component.For<IUserMailer>().ImplementedBy<UserMailer>().Named("MailerService").LifeStyle.Transient); 
```

...对我有用，尽管有报道称您偶尔会收到空引用异常（好像 WhatMailer 没有被 Windsor 容器实例化）。我还没有遇到过这种情况，但如果我遇到了，我将不得不远离容器，塞住我的鼻子，并在适用的控制器中重新安装邮件。如果您正在测试所述控制器，请从您的链接参考：

> 我在我的测试设置中手动重新分配我的控制器的邮件程序，如下所示：
> 
> 目标 = 新控制器（...） { MailService = MailServiceMock.Object };

虽然看起来@Neil 也有一个[很好的解决方案](https://stackoverflow.com/a/16645691/9344)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-20T08:44:25.960

我刚刚让 MVCMailer 与城堡温莎 3.2 一起工作

对于我的解决方案，我的所有安装程序都有一个单独的 IOC 项目。在所有项目共享的核心项目中，我创建了一个空界面`IMailer`

```
public interface IMailer
{
} 
```

然后在你搭建一个邮件继承之后`IMailer`

```
public interface IAccountMailer : IMailer
{
     ...
} 
```

这应该允许您像这样一般地将所有邮件注册到城堡温莎。

```
container.Register(
    Classes.FromAssemblyNamed("MyDllName")
        .BasedOn<IMailer>().WithService.FromInterface()
        .LifestylePerWebRequest()
        ); 
```

然后你可以在你的控制器中做这样的事情

```
public class EmailController : ApiController
{
    private readonly IAccountMailer accountMailer;

    public EmailController(IAccountMailer accountMailer)
    {
        this.accountMailer = accountMailer;
    }
} 
```

只要你有你的城堡温莎创建你的 MVC 和 API 控制器，它应该能够创建你的邮件。

# ruby-on-rails - 使用 /private/etc/hosts 更改本地主机站点

> ID：12747302
> 
> 赞同：0
> 
> 时间：2012-10-05T13:28:31.600
> 
> 标签：ruby-on-rails, macos, browser, localhost, osx-mountain-lion

我有一个与 facebook 交互的应用程序。这意味着我无法在 localhost:3000 上进行测试。为了解决这个问题，我更改了 /private/etc/hosts 文件，使其看起来像这样：

```
127.0.0.1       localhost
127.0.0.1       dev.example.com 
```

这在我的旧电脑上运行良好，但在我的新电脑上却不行。现在，为了让事情正常工作，当我在浏览器中查看应用程序时，我必须附加端口号。

```
dev.example.com:3000 
```

我猜这是较新的操作系统（山狮）的问题，但我不确定。

无论如何配置我的主机文件，以便我在浏览器中时不需要附加端口号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:18:47.780

不; hosts 文件只控制域名如何转换为 IP 地址，而不是端口号部分。

HTTP 的默认端口是端口 80。如果您的 Mac 还没有在端口 80 上运行任何东西，您可以告诉 rails 使用该端口，如下所示：

```
rails server -p 80 
```

这一变化不太可能与升级到 Mountain Lion 相关；如果您的配置或应用程序过去在没有端口号的情况下可以在浏览器中工作，则可能会发生其他关于您的配置或应用程序的更改。

# java - 使用 JAR 加载 log4j.properties

> ID：12747304
> 
> 赞同：17
> 
> 时间：2012-10-05T13:28:35.510
> 
> 标签：java, jar, log4j

我有一个带有以下清单的 jar 文件

```
Manifest-Version: 1.0  
Created-By: 1.7.0_07 (Oracle Corporation)  
Main-Class: test.Main  
Class-Path: ./log4j.properties lib/log4j-1.2.17.jar 
```

我按如下方式运行课程

```
java -jar test.jar 
```

这是我的文件夹

```
lib
log4j.properties
test.jar 
```

为什么我看不到 log4j 属性文件？这就是我所看到的

```
log4j:WARN No appenders could be found for logger (test.Main).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 
```

谢谢

解决方案：将清单中的类路径更改为此

```
Class-Path: . lib/log4j-1.2.17.jar 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-05T13:36:19.647

您还可以使用参数启动 JVM：

```
-Dlog4j.configuration=file:"./your/properties/path/log4j.properties" 
```

指定外部日志属性的任意位置。我在一个特定的项目中经常使用它。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-05T13:31:36.387

属性文件不在类路径中，您必须提供它并从代码中调用它，如此处[所示](http://www.javabeat.net/2008/07/baisc-steps-to-configure-log4j-using-xml-and-properties-file/)。

编辑：使用您的目录结构，您可以这样称呼它：

```
PropertyConfigurator.configure("log4j.properties"); 
```

编辑2：

此外，您必须为其提供附加程序：

```
log4j.rootLogger=DEBUG, Appender1
log4j.logger.[logger-name]=level, Appender1
log4j.appender.Appender1=org.apache.log4j.ConsoleAppender
log4j.appender.Appender1.layout=org.apache.log4j.PatternLayout
log4j.appender.Appender1.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n 
```

如果您想更好地控制日志记录，请删除第一行（root looger）并将第二行放在最顶层包而不是 [logger-name] 的位置，以便该包中的所有类都可以使用日志记录。

您可以定义多个附加程序并以这种方式将它们分配给不同的类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-20T23:43:02.120

`PropertyConfigurator.configure(ABC.class.getResourceAsStream("log4j.properties"))`我工作正常，但基本上你需要将 Log4j 属性文件放在源代码文件夹（Java 类旁边）中。

或者你可以尝试放在外面并在`getResourceAsStream("resources/log4j.properties")`方法中给出正确的路径

# mysql - 如何编辑我的 MySQL 表，以便从父级删除行不需要对子表行进行级联删除？

> ID：12747307
> 
> 赞同：0
> 
> 时间：2012-10-05T13:28:39.540
> 
> 标签：mysql

我的问题是：我应该如何编辑下表：

```
CREATE TABLE users(
id int UNSIGNED AUTO_INCREMENT PRIMARY KEY,
name varchar(20) NOT NULL,
surname varchar(20) NOT NULL,
faculty varchar(35) NOT NULL,
username varchar(20) NOT NULL UNIQUE,
password varchar(20) NOT NULL,
is_admin boolean NOT NULL DEFAULT 0,
account_limit int UNSIGNED,
created_at datetime
) CHARACTER SET utf8 COLLATE utf8_general_ci;

CREATE TABLE test_results(
id int UNSIGNED AUTO_INCREMENT PRIMARY KEY, 
test_id int UNSIGNED NOT NULL,
test_person_id int UNSIGNED NOT NULL,
score float UNSIGNED NOT NULL,
standard_deviation float UNSIGNED NOT NULL,
average_answer_time float UNSIGNED NOT NULL, 
removed boolean NOT NULL DEFAULT 0,
created_at datetime,
FOREIGN KEY (test_id) REFERENCES test_tasks(id) ON UPDATE CASCADE, FOREIGN KEY (test_person_id) REFERENCES test_persons(id) ON UPDATE CASCADE) CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

因此，如果我从用户表中删除一行，如果 test_results 中的一行具有引用用户表行的外键，我不会在 test_results 表中得到任何约束错误等？

更新：对不起，我在提出问题时犹豫了：

这是我所有的桌子：

```
CREATE TABLE users(
id int UNSIGNED AUTO_INCREMENT PRIMARY KEY,
name varchar(20) NOT NULL,
surname varchar(20) NOT NULL,
faculty varchar(35) NOT NULL,
username varchar(20) NOT NULL UNIQUE,
password varchar(20) NOT NULL,
is_admin boolean NOT NULL DEFAULT 0,
account_limit int UNSIGNED,
created_at datetime
) CHARACTER SET utf8 COLLATE utf8_general_ci;

CREATE TABLE test_groups(
id int UNSIGNED AUTO_INCREMENT PRIMARY KEY,
user_id int UNSIGNED NOT NULL,
name varchar(60) NOT NULL, 
password varchar(20) NOT NULL,
tests varchar(60),
created_at datetime,
FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE ON UPDATE CASCADE
) CHARACTER SET utf8 COLLATE utf8_general_ci;

CREATE TABLE test_persons(
id int UNSIGNED AUTO_INCREMENT PRIMARY KEY,
group_id int UNSIGNED NOT NULL,
username varchar(45) NOT NULL UNIQUE,
tries int UNSIGNED NOT NULL,
created_at datetime,
FOREIGN KEY (group_id) REFERENCES test_groups(id) ON DELETE CASCADE ON UPDATE CASCADE
) CHARACTER SET utf8 COLLATE utf8_general_ci;

CREATE TABLE test_tasks(
id int UNSIGNED AUTO_INCREMENT PRIMARY KEY,
user_id int UNSIGNED NOT NULL,
name varchar(45) NOT NULL,
type varchar(20) NOT NULL,
description text NOT NULL,
question_time int UNSIGNED DEFAULT 500,
answer_time int UNSIGNED DEFAULT 3000,
random_questions boolean NOT NULL DEFAULT 1,
questions varchar(150),
created_at datetime,
FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE ON UPDATE CASCADE) CHARACTER SET utf8 COLLATE utf8_general_ci;

CREATE TABLE test_results(
id int UNSIGNED AUTO_INCREMENT PRIMARY KEY, 
test_id int UNSIGNED NOT NULL,
test_person_id int UNSIGNED NOT NULL,
score float UNSIGNED NOT NULL,
standard_deviation float UNSIGNED NOT NULL,
average_answer_time float UNSIGNED NOT NULL, 
removed boolean NOT NULL DEFAULT 0,
created_at datetime,
FOREIGN KEY (test_id) REFERENCES test_tasks(id) ON UPDATE CASCADE, FOREIGN KEY (test_person_id) REFERENCES test_persons(id) ON UPDATE CASCADE) CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

现在如果我尝试从用户表中删除一行我得到约束错误，为什么？我是 mysql 新手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:30:54.327

写

```
ALTER TABLE `test_results`
ADD CONSTRAINT `tbl_userplan_ibfk_1` 
FOREIGN KEY (`test_person_id`) REFERENCES `test_persons(id)`  
ON DELETE CASCADE ON UPDATE CASCADE 
```

和外键以**@David W**在评论中描述的方式工作

# jquery - 带有实时图形的 jQuery 和 Flot 堆叠线

> ID：12747309
> 
> 赞同：0
> 
> 时间：2012-10-05T13:28:42.553
> 
> 标签：jquery, json, stack, real-time, flot

当我在由 JSON 文件提供的基于线的实时图表上执行堆栈选项时，我会显示图例，但我会松开图表上的线条。

没有堆叠也没有线。有没有人遇到过这个？

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Real Time Chart</title>
<link href="layout.css" rel="stylesheet" type="text/css">
<script language="javascript" type="text/javascript" src="../excanvas.min.js"></script>
<script language="javascript" type="text/javascript" src="../jquery-1.8.1.js"></script>
<script language="javascript" type="text/javascript" src="../jquery.flot.js"></script>
<script language="javascript" type="text/javascript" src="../jquery.flot.stack.js"></script>
<script language="javascript" type="text/javascript" src="../jquery.flot.axislabels.js"></script>
</head>
<body>
<h1>Test</h1>
<table>
    <tr>
        <td>
            <div id="controlm" style="width:1200px;height:600px; margin:0 auto;"></div>
        </td>
        <td>
            <p id="Legend" style="width:200px;margin-left:10px"></p>
        </td>
    </tr>
</table>
<script type="text/javascript">

$(function () {

    // variables setup
    var data = [];  
    var controlm = $("#controlm");
    var stack = 0, bars = true, lines = true, steps = false;
    var options = {
        series: {stack: stack,
                shadowSize: 0,
                lines: {show: lines, fill: false, steps: steps}
                },
        xaxis: { mode: "time", timeformat: "%Hh%M", axisLabel: 'Tijdlijn', position: 'bottom', axisLabelPadding: 10},
        yaxis: { mode: "number", tickSize: 100, max: 1000, axisLabel: "Aantal Jobs", position: 'left', axisLabelPadding: 10},
        grid: { hoverable: true, clickable: true, backgroundColor: { colors: ["#FFFFFF", "#999999"] }, markings: [{lineWidth:4, yaxis: {from: 3500, to: 3500}, color: "#000000"}]},
        legend: {container: $("#Legend"), show: true, backgroundOpacity:0}
    };

    function showTooltip(x, y, contents) {
        $('<div id="tooltip">' + contents + '</div>').css( {
            position: 'absolute',
            display: 'none',
            top: y + 15,
            left: x + 15,
            border: '1px solid #088A29',
            padding: '2px',
            'background-color': '#A9F5BC',
            opacity: 1
        }).appendTo("body").fadeIn(0);
    }

    var previousPoint = null;
    $("#controlm").bind("plothover", function (event, pos, item) {
        $("#x").text(pos.x.toFixed(2));
        $("#y").text(pos.y.toFixed(2));

            if (item) {
                if (previousPoint != item.dataIndex) {
                    previousPoint = item.dataIndex;

                    $("#tooltip").remove();
                    var x = item.datapoint[0].toFixed(2),
                        y = item.datapoint[1].toFixed(2);
                    var tooltipdate = new Date(parseInt(x));
                    var year = tooltipdate.getFullYear();
                    var month = (tooltipdate.getMonth() + 1);
                    if (month < 10) {month = "0" + month};                      
                    var day = tooltipdate.getDate();
                    if (day < 10) {day = "0" + day};
                    var hour = tooltipdate.getUTCHours();
                    if (hour < 10) {hour = "0" + hour};
                    var min =  tooltipdate.getMinutes();
                    if (min < 10) {min = "0" + min};
                    var content = day + "/" + month + "/" + year + " " + hour + ":" + min;
                    showTooltip(item.pageX, item.pageY,"<b>" + content + "</b><br />" + 
                                item.series.label);

                }
            }
            else {
                $("#tooltip").remove();
                previousPoint = null;            
            }
    });

    function fetchData() {

        $.ajax({
            // usually, we'll just call the same URL, a script
            // connected to a database, but in this case we only
            // have static example files so we need to modify the
            // URL
            url: "test/blabla.txt",
            method: 'GET',
            dataType: 'json',
            success: onDataReceived

        });

        function onDataReceived(series) {

            data = [series];
            //fill array
            $.each(series, function(key) {//, val) {
                data.push(series[key]);
            });

            $.plot(controlm, data, options);

        }           

        return data

    }

plot = $.plot(controlm, fetchData(), options);

function update() {
    plot.setData([fetchData()]);
    plot.draw();

    setTimeout(update, 120000);
}

update();
});
</script>

 </body>
</html> 
```

JSON数据的一部分：

```
[ { "label": "Totaal Jobs QOS : 41", "data": [[1349364129000,42],[1349364427000,42],[1349364727000,42],[1349365026000,42],[1349365327000,42],[1349365628000,42],[1349365927000,42],[1349366225000,42],[1349366532000,42],[1349366826000,42],[1349367126000,42],[1349367428000,42],[1349367728000,42],[1349368026000,42],[1349368324000,42],[1349368626000,42],[1349368926000,42],[1349369226000,42],[1349369527000,42],[1349369826000,42],[1349370126000,42],[1349370424000,42],[1349370726000,42],[1349371026000,42],[1349371325000,42],[1349371626000,42],[1349371926000,42],[1349372226000,42],[1349372526000,42],[1349372827000,42],[1349373127000,42],[1349373426000,42],[1349377412000,42],[1349377685000,42],[1349377984000,42],[1349378286000,42],[1349378588000,42],[1349378885000,42],[1349379187000,46],[1349379484000,50],[1349379785000,50],[1349380085000,50],[1349380391000,50],[1349380682000,50],[1349380989000,50],[1349381289000,50],[1349381583000,50],[1349381885000,50],[1349382186000,50],[1349382488000,50],[1349382782000,50],[1349383085000,50],[1349383382000,50],[1349383686000,50],[1349383986000,50],[1349384283000,50],[1349384589000,50],[1349384883000,50],[1349385186000,50],[1349385486000,50],[1349385789000,50],[1349386089000,50],[1349386389000,50],[1349386689000,50],[1349386989000,50],[1349387286000,50],[1349387589000,50],[1349387888000,50],[1349388189000,50],[1349388486000,50],[1349388789000,50],[1349389086000,50],[1349389385000,50],[1349389689000,50],[1349389989000,50],[1349390289000,50],[1349390589000,50],[1349390887000,50],[1349391189000,50],[1349391486000,50],[1349391789000,50],[1349392087000,50],[1349392386000,50],[1349392685000,50],[1349392990000,50],[1349393285000,50],[1349393589000,50],[1349393887000,50],[1349394184000,50],[1349394485000,50],[1349394789000,50],[1349395083000,50],[1349395384000,50],[1349395688000,50],[1349395985000,50],[1349396283000,50],[1349396590000,50],[1349396886000,50],[1349397187000,50],[1349397484000,50],[1349397784000,50],[1349398085000,50],[1349398390000,50],[1349398686000,50],[1349398984000,50],[1349399290000,50],[1349399589000,50],[1349399887000,50],[1349400186000,50],[1349400485000,50],[1349400787000,50],[1349401084000,50],[1349401385000,50],[1349401687000,50],[1349401990000,50],[1349402286000,50],[1349402589000,50],[1349402890000,50],[1349403189000,50],[1349403484000,50],[1349403784000,50],[1349404087000,50],[1349404384000,50],[1349404689000,50],[1349404990000,50],[1349405286000,50],[1349405586000,50],[1349405889000,50],[1349406189000,50],[1349406485000,50],[1349406786000,50],[1349407087000,50],[1349407389000,50],[1349407684000,50],[1349407987000,50],[1349408291000,50],[1349408589000,50],[1349408886000,50],[1349409185000,50],[1349409487000,50],[1349409786000,50],[1349410086000,50],[1349410389000,50],[1349410687000,50],[1349410984000,50],[1349411284000,50],[1349411590000,50],[1349411890000,50],[1349412189000,50],[1349412487000,50],[1349412785000,50],[1349413086000,50],[1349413387000,50],[1349413687000,50],[1349413989000,50],[1349414286000,50],[1349414590000,50],[1349414886000,50],[1349415186000,50],[1349415484000,50],[1349415784000,50],[1349416087000,50],[1349416389000,50],[1349416689000,50],[1349416986000,50],[1349417289000,50],[1349417584000,50],[1349417884000,50],[1349418186000,50],[1349418486000,50],[1349418785000,50],[1349419090000,50],[1349419389000,50],[1349419689000,50],[1349419989000,50],[1349420286000,50],[1349420586000,50],[1349420890000,50],[1349421186000,50],[1349421486000,50],[1349421784000,50],[1349422086000,50],[1349422384000,50],[1349422686000,50],[1349422989000,50],[1349423285000,50],[1349423584000,50],[1349424449000,38],[1349424726000,38],[1349425030000,38],[1349425330000,38],[1349425629000,38],[1349425926000,38],[1349426225000,38],[1349426526000,38],[1349426829000,38],[1349427124000,38],[1349427427000,38],[1349427727000,38],[1349428029000,38],[1349428327000,38],[1349428630000,38],[1349428930000,38],[1349428951000,38],[1349429526000,38],[1349429825000,38],[1349430123000,38],[1349430424000,38],[1349430725000,38],[1349431029000,38],[1349431329000,38],[1349431624000,38],[1349431927000,38],[1349432226000,38],[1349432525000,38],[1349432830000,38],[1349433125000,38],[1349433424000,38],[1349433726000,38],[1349434024000,38],[1349434324000,38],[1349434624000,38],[1349434924000,39],[1349435230000,39],[1349435526000,39],[1349435826000,39],[1349436127000,39],[1349436426000,39],[1349436727000,39],[1349437024000,39],[1349437326000,39],[1349437629000,39],[1349437929000,41],[1349438226000,41],[1349438527000,41],[1349438827000,41],[1349439127000,41],[1349439428000,41],[1349439728000,41],[1349440024000,41],[1349440324000,41],[1349440630000,41],[1349440927000,41],[1349441229000,41],[1349441524000,41],[1349441827000,41],[1349442127000,41],[1349442430000,41],[1349442726000,41],[1349443027000,41],[1349443326000,41],[1349443627000,41],[1349443925000,41],[1349444230000,41],[1349444527000,41],[1349444826000,41],[1349445126000,41],[1349445427000,41],[1349445726000,41],[1349446030000,41],[1349446324000,41],[1349446630000,41],[1349446927000,41],[1349447227000,41],[1349447527000,41],[1349447824000,41],[1349448126000,41],[1349448426000,41],[1349448727000,41],[1349449027000,41],[1349449329000,41],[1349449627000,41],[1349449926000,41],[1349450226000,41]] }, { "label": "Totaal Jobs QXS : 1", "data": [[1349364129000,1],[1349364427000,1],[1349364727000,1],[1349365026000,1],[1349365327000,1],[1349365628000,1],[1349365927000,1],[1349366225000,1],[1349366532000,1],[1349366826000,1],[1349367126000,1],[1349367428000,1],[1349367728000,1],[1349368026000,1],[1349368324000,1],[1349368626000,1],[1349368926000,1],[1349369226000,1],[1349369527000,1],[1349369826000,1],[1349370126000,1],[1349370424000,1],[1349370726000,1],[1349371026000,1],[1349371325000,1],[1349371626000,1],[1349371926000,1],[1349372226000,1],[1349372526000,1],[1349372827000,1],[1349373127000,1],[1349373426000,1],[1349377412000,1],[1349377685000,1],[1349377984000,1],[1349378286000,1],[1349378588000,1],[1349378885000,1],[1349379187000,1],[1349379484000,1],[1349379785000,1],[1349380085000,1],[1349380391000,1],[1349380682000,1],[1349380989000,1],[1349381289000,1],[1349381583000,1],[1349381885000,1],[1349382186000,1],[1349382488000,1],[1349382782000,1],[1349383085000,1],[1349383382000,1],[1349383686000,1],[1349383986000,1],[1349384283000,1],[1349384589000,1],[1349384883000,1],[1349385186000,1],[1349385486000,1],[1349385789000,1],[1349386089000,1],[1349386389000,1],[1349386689000,1],[1349386989000,1],[1349387286000,1],[1349387589000,1],[1349387888000,1],[1349388189000,1],[1349388486000,1],[1349388789000,1],[1349389086000,1],[1349389385000,1],[1349389689000,1],[1349389989000,1],[1349390289000,1],[1349390589000,1],[1349390887000,1],[1349391189000,1],[1349391486000,1],[1349391789000,1],[1349392087000,1],[1349392386000,1],[1349392685000,1],[1349392990000,1],[1349393285000,1],[1349393589000,1],[1349393887000,1],[1349394184000,1],[1349394485000,1],[1349394789000,1],[1349395083000,1],[1349395384000,1],[1349395688000,1],[1349395985000,1],[1349396283000,1],[1349396590000,1],[1349396886000,1],[1349397187000,1],[1349397484000,1],[1349397784000,1],[1349398085000,1],[1349398390000,1],[1349398686000,1],[1349398984000,1],[1349399290000,1],[1349399589000,1],[1349399887000,1],[1349400186000,1],[1349400485000,1],[1349400787000,1],[1349401084000,1],[1349401385000,1],[1349401687000,1],[1349401990000,1],[1349402286000,1],[1349402589000,1],[1349402890000,1],[1349403189000,1],[1349403484000,1],[1349403784000,1],[1349404087000,1],[1349404384000,1],[1349404689000,1],[1349404990000,1],[1349405286000,1],[1349405586000,1],[1349405889000,1],[1349406189000,1],[1349406485000,1],[1349406786000,1],[1349407087000,1],[1349407389000,1],[1349407684000,1],[1349407987000,1],[1349408291000,1],[1349408589000,1],[1349408886000,1],[1349409185000,1],[1349409487000,1],[1349409786000,1],[1349410086000,1],[1349410389000,1],[1349410687000,1],[1349410984000,1],[1349411284000,1],[1349411590000,1],[1349411890000,1],[1349412189000,1],[1349412487000,1],[1349412785000,1],[1349413086000,1],[1349413387000,1],[1349413687000,1],[1349413989000,1],[1349414286000,1],[1349414590000,1],[1349414886000,1],[1349415186000,1],[1349415484000,1],[1349415784000,1],[1349416087000,1],[1349416389000,1],[1349416689000,1],[1349416986000,1],[1349417289000,1],[1349417584000,1],[1349417884000,1],[1349418186000,1],[1349418486000,1],[1349418785000,1],[1349419090000,1],[1349419389000,1],[1349419689000,1],[1349419989000,1],[1349420286000,1],[1349420586000,1],[1349420890000,1],[1349421186000,1],[1349421486000,1],[1349421784000,1],[1349422086000,1],[1349422384000,1],[1349422686000,1],[1349422989000,1],[1349423285000,1],[1349423584000,1],[1349449329000,1],[1349449627000,1],[1349449926000,1],[1349450226000,1]] }, { "label": "Totaal Jobs SDM : 34", "data": [[1349449329000,34],[1349449627000,34],[1349449926000,34],[1349450226000,34]] }, { "label": "Totaal Jobs SIS : 1", "data": [[1349364129000,1],[1349364427000,1],[1349364727000,1],[1349365026000,1],[1349365327000,1],[1349365628000,1],[1349365927000,1],[1349366225000,1],[1349366532000,1],[1349366826000,1],[1349367126000,1],[1349367428000,1],[1349367728000,1],[1349368026000,1],[1349368324000,1],[1349368626000,1],[1349368926000,1],[1349369226000,1],[1349369527000,1],[1349369826000,1],[1349370126000,1],[1349370424000,1],[1349370726000,1],[1349371026000,1],[1349371325000,1],[1349371626000,1],[1349371926000,1],[1349372226000,1],[1349372526000,1],[1349372827000,1],[1349373127000,1],[1349373426000,1],[1349377412000,1],[1349377685000,1],[1349377984000,1],[1349378286000,1],[1349378588000,1],[1349378885000,1],[1349379187000,1],[1349379484000,1],[1349379785000,1],[1349380085000,1],[1349380391000,1],[1349380682000,1],[1349380989000,1],[1349381289000,1],[1349381583000,1],[1349381885000,1],[1349382186000,1],[1349382488000,1],[1349382782000,1],[1349383085000,1],[1349383382000,1],[1349383686000,1],[1349383986000,1],[1349384283000,1],[1349384589000,1],[1349384883000,1],[1349385186000,1],[1349385486000,1],[1349385789000,1],[1349386089000,1],[1349386389000,1],[1349386689000,1],[1349386989000,1],[1349387286000,1],[1349387589000,1],[1349387888000,1],[1349388189000,1],[1349388486000,1],[1349388789000,1],[1349389086000,1],[1349389385000,1],[1349389689000,1],[1349389989000,1],[1349390289000,1],[1349390589000,1],[1349390887000,1],[1349391189000,1],[1349391486000,1],[1349391789000,1],[1349392087000,1],[1349392386000,1],[1349392685000,1],[1349392990000,1],[1349393285000,1],[1349393589000,1],[1349393887000,1],[1349394184000,1],[1349394485000,1],[1349394789000,1],[1349395083000,1],[1349395384000,1],[1349395688000,1],[1349395985000,1],[1349396283000,1],[1349396590000,1],[1349396886000,1],[1349397187000,1],[1349397484000,1],[1349397784000,1],[1349398085000,1],[1349398390000,1],[1349398686000,1],[1349398984000,1],[1349399290000,1],[1349399589000,1],[1349399887000,1],[1349400186000,1],[1349400485000,1],[1349400787000,1],[1349401084000,1],[1349401385000,1],[1349401687000,1],[1349401990000,1],[1349402286000,1],[1349402589000,1],[1349402890000,1],[1349403189000,1],[1349403484000,1],[1349403784000,1],[1349404087000,1],[1349404384000,1],[1349404689000,1],[1349404990000,1],[1349405286000,1],[1349405586000,1],[1349405889000,1],[1349406189000,1],[1349406485000,1],[1349406786000,1],[1349407087000,1],[1349407389000,1],[1349407684000,1],[1349407987000,1],[1349408291000,1],[1349408589000,1],[1349408886000,1],[1349409185000,1],[1349409487000,1],[1349409786000,1],[1349410086000,1],[1349410389000,1],[1349410687000,1],[1349410984000,1],[1349411284000,1],[1349411590000,1],[1349411890000,1],[1349412189000,1],[1349412487000,1],[1349412785000,1],[1349413086000,1],[1349413387000,1],[1349413687000,1],[1349413989000,1],[1349414286000,1],[1349414590000,1],[1349414886000,1],[1349415186000,1],[1349415484000,1],[1349415784000,1],[1349416087000,1],[1349416389000,1],[1349416689000,1],[1349416986000,1],[1349417289000,1],[1349417584000,1],[1349417884000,1],[1349418186000,1],[1349418486000,1],[1349418785000,1],[1349419090000,1],[1349419389000,1],[1349419689000,1],[1349419989000,1],[1349420286000,1],[1349420586000,1],[1349420890000,1],[1349421186000,1],[1349421486000,1],[1349421784000,1],[1349422086000,1],[1349422384000,1],[1349422686000,1],[1349422989000,1],[1349423285000,1],[1349423584000,1],[1349424449000,1],[1349424726000,1],[1349425030000,1],[1349425330000,1],[1349425629000,1],[1349425926000,1],[1349426225000,1],[1349426526000,1],[1349426829000,1],[1349427124000,1],[1349427427000,1],[1349427727000,1],[1349428029000,1],[1349428327000,1],[1349428630000,1],[1349428930000,1],[1349428951000,1],[1349429526000,1],[1349429825000,1],[1349430123000,1],[1349430424000,1],[1349430725000,1],[1349431029000,1],[1349431329000,1],[1349431624000,1],[1349431927000,1],[1349432226000,1],[1349432525000,1],[1349432830000,1],[1349433125000,1],[1349433424000,1],[1349433726000,1],[1349434024000,1],[1349434324000,1],[1349434624000,1],[1349434924000,1],[1349435230000,1],[1349435526000,1],[1349435826000,1],[1349436127000,1],[1349436426000,1],[1349436727000,1],[1349437024000,1],[1349437326000,1],[1349437629000,1],[1349437929000,1],[1349438226000,1],[1349438527000,1],[1349438827000,1],[1349439127000,1],[1349439428000,1],[1349439728000,1],[1349440024000,1],[1349440324000,1],[1349440630000,1],[1349440927000,1],[1349441229000,1],[1349441524000,1],[1349441827000,1],[1349442127000,1],[1349442430000,1],[1349442726000,1],[1349443027000,1],[1349443326000,1],[1349443627000,1],[1349443925000,1],[1349444230000,1],[1349444527000,1],[1349444826000,1],[1349445126000,1],[1349445427000,1],[1349445726000,1],[1349446030000,1],[1349446324000,1],[1349446630000,1],[1349446927000,1],[1349447227000,1],[1349447527000,1],[1349447824000,1],[1349448126000,1],[1349448426000,1],[1349448727000,1],[1349449027000,1],[1349449329000,1],[1349449627000,1],[1349449926000,1],[1349450226000,1]] }, { "label": "Totaal Jobs SOS : 44", "data": [[1349364129000,45],[1349364427000,45],[1349364727000,45],[1349365026000,45],[1349365327000,45],[1349365628000,45],[1349365927000,45],[1349366225000,45],[1349366532000,45],[1349366826000,45],[1349367126000,45],[1349367428000,45],[1349367728000,45],[1349368026000,45],[1349368324000,45],[1349368626000,45],[1349368926000,45],[1349369226000,45],[1349369527000,45],[1349369826000,45],[1349370126000,45],[1349370424000,45],[1349370726000,45],[1349371026000,45],[1349371325000,45],[1349371626000,45],[1349371926000,45],[1349372226000,45],[1349372526000,45],[1349372827000,45],[1349373127000,45],[1349373426000,45],[1349377412000,45],[1349377685000,45],[1349377984000,45],[1349378286000,45],[1349378588000,45],[1349378885000,45],[1349379187000,45],[1349379484000,45],[1349379785000,45],[1349380085000,45],[1349380391000,45],[1349380682000,45],[1349380989000,45],[1349381289000,45],[1349381583000,45],[1349381885000,45],[1349382186000,45],[1349382488000,45],[1349382782000,45],[1349383085000,45],[1349383382000,45],[1349383686000,45],[1349383986000,45],[1349384283000,45],[1349384589000,45],[1349384883000,45],[1349385186000,45],[1349385486000,45],[1349385789000,45],[1349386089000,45],[1349386389000,45],[1349386689000,45],[1349386989000,45],[1349387286000,45],[1349387589000,45],[1349387888000,45],[1349388189000,45],[1349388486000,45],[1349388789000,45],[1349389086000,45],[1349389385000,45],[1349389689000,45],[1349389989000,45],[1349390289000,45],[1349390589000,45],[1349390887000,45],[1349391189000,45],[1349391486000,45],[1349391789000,45],[1349392087000,45],[1349392386000,45],[1349392685000,45],[1349392990000,45],[1349393285000,45],[1349393589000,45],[1349393887000,45],[1349394184000,45],[1349394485000,45],[1349394789000,45],[1349395083000,45],[1349395384000,45],[1349395688000,45],[1349395985000,45],[1349396283000,45],[1349396590000,45],[1349396886000,45],[1349397187000,45],[1349397484000,45],[1349397784000,45],[1349398085000,45],[1349398390000,45],[1349398686000,45],[1349398984000,45],[1349399290000,45],[1349399589000,45],[1349399887000,45],[1349400186000,45],[1349400485000,45],[1349400787000,45],[1349401084000,45],[1349401385000,45],[1349401687000,45],[1349401990000,45],[1349402286000,45],[1349402589000,45],[1349402890000,45],[1349403189000,45],[1349403484000,45],[1349403784000,45],[1349404087000,45],[1349404384000,45],[1349404689000,45],[1349404990000,45],[1349405286000,45],[1349405586000,45],[1349405889000,45],[1349406189000,45],[1349406485000,45],[1349406786000,45],[1349407087000,45],[1349407389000,45],[1349407684000,45],[1349407987000,45],[1349408291000,45],[1349408589000,45],[1349408886000,45],[1349409185000,45],[1349409487000,45],[1349409786000,45],[1349410086000,45],[1349410389000,45],[1349410687000,45],[1349410984000,45],[1349411284000,45],[1349411590000,45],[1349411890000,45],[1349412189000,45],[1349412487000,45],[1349412785000,45],[1349413086000,45],[1349413387000,45],[1349413687000,45],[1349413989000,45],[1349414286000,45],[1349414590000,45],[1349414886000,45],[1349415186000,45],[1349415484000,45],[1349415784000,45],[1349416087000,45],[1349416389000,45],[1349416689000,45],[1349416986000,45],[1349417289000,45],[1349417584000,45],[1349417884000,45],[1349418186000,45],[1349418486000,45],[1349418785000,45],[1349419090000,45],[1349419389000,45],[1349419689000,45],[1349419989000,45],[1349420286000,45],[1349420586000,45],[1349420890000,45],[1349421186000,45],[1349421486000,45],[1349421784000,45],[1349422086000,45],[1349422384000,45],[1349422686000,45],[1349422989000,45],[1349423285000,45],[1349423584000,45],[1349424449000,44],[1349424726000,44],[1349425030000,44],[1349425330000,44],[1349425629000,44],[1349425926000,44],[1349426225000,44],[1349426526000,44],[1349426829000,44],[1349427124000,44],[1349427427000,44],[1349427727000,44],[1349428029000,44],[1349428327000,44],[1349428630000,44],[1349428930000,44],[1349428951000,44],[1349429526000,44],[1349429825000,44],[1349430123000,44],[1349430424000,44],[1349430725000,44],[1349431029000,44],[1349431329000,44],[1349431624000,44],[1349431927000,44],[1349432226000,44],[1349432525000,44],[1349432830000,44],[1349433125000,44],[1349433424000,44],[1349433726000,44],[1349434024000,44],[1349434324000,44],[1349434624000,44],[1349434924000,44],[1349435230000,44],[1349435526000,44],[1349435826000,44],[1349436127000,44],[1349436426000,44],[1349436727000,44],[1349437024000,44],[1349437326000,44],[1349437629000,44],[1349437929000,44],[1349438226000,44],[1349438527000,44],[1349438827000,44],[1349439127000,44],[1349439428000,44],[1349439728000,44],[1349440024000,44],[1349440324000,44],[1349440630000,44],[1349440927000,44],[1349441229000,44],[1349441524000,44],[1349441827000,44],[1349442127000,44],[1349442430000,44],[1349442726000,44],[1349443027000,44],[1349443326000,44],[1349443627000,44],[1349443925000,44],[1349444230000,44],[1349444527000,44],[1349444826000,44],[1349445126000,44],[1349445427000,44],[1349445726000,44],[1349446030000,44],[1349446324000,44],[1349446630000,44],[1349446927000,44],[1349447227000,44],[1349447527000,44],[1349447824000,44],[1349448126000,44],[1349448426000,44],[1349448727000,44],[1349449027000,44],[1349449329000,44],[1349449627000,44],[1349449926000,44],[1349450226000,44]] }] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:40:11.383

您提供给 Flot 的数据格式不正确。
更改“数据 = [系列];” 到“数据= []；”

使用堆叠插件时，确保基于时间的数据系列对齐（所有系列的开始/结束日期相同）。如果不是，则可能不会显示所有数据点。

为了使代码更干净，您也可以这样做：

```
 function updateData() {
        $.ajax({
            // usually, we'll just call the same URL, a script
            // connected to a database, but in this case we only
            // have static example files so we need to modify the
            // URL
            url: "blabla.txt",
            method: 'GET',
            dataType: 'json',
            success: onDataReceived

        });

        function onDataReceived(series) {
            plot.setData(series);
            plot.setupGrid();
            plot.draw();
        }           
    }

var plot = $.plot(controlm, [], options);

setInterval(updateData, 120000);
updateData(); 
```

# ruby-on-rails - CanCan、Rails 和协作

> ID：12747313
> 
> 赞同：1
> 
> 时间：2012-10-05T13:28:58.920
> 
> 标签：ruby-on-rails, ruby, authorization, cancan

我有一个 Ruby on Rails 应用程序，其中包含`users`,`articles`和`collaborations`. 以下是关系：

```
User has_many :articles
User has_many :collaborations

Article belongs_to :users
Article has_many :collaborations

# Collaboration has collaboration.id collaboration.user_id and collaboration.article_id.
Collaboration belongs_to :users
Collaboration belongs_to :articles 
```

通过协作，我成功地访问了用户和文章，因此我认为我的应用程序中的所有内容都已正确设置。好的，关于问题。

我正在使用[CanCan](https://github.com/ryanb/cancan)的角色`:admin`。基本上我只希望`:admin`能够创建帖子和协作，并且我也可以正常工作。问题是......我如何将该角色写入我的`ability.rb`文件，以便非管理员用户仍然可以在他们参与协作的文章上进行协作？”

1.  用户 A（管理员）创建文章 X
2.  用户 A 与用户 B 在文章 X 上创建协作
3.  用户 B 登录但只能编辑和更新文章 X

我应该怎么写`ability.rb`。就像我想说以下内容一样：“不是管理员的用户可以在他们参与该文章的协作时管理文章。”

对不起，我还没有喝咖啡：）。这是我的`ability.rb`。

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user
    if user.role == "admin"
      can :manage, :all
    else
      can :read, Article
      # this is where I want to say: can :manage if part of collaboration for article 
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T23:45:45.780

以下是您的能力类中可能对您有用的逻辑：

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user
    case
    when user.admin?
      can :manage, :all
    when user.registered?
      can :read, Article
      can :manage, Article, :collaborations => { :user_id => user.id }
    else # user.guest?
      can :read, Article
    end
  end
end 
```

CanCan 允许您指定关联的条件；在这里，我们在 上传递关联的`:user_id`条件。`:collaborations``Article`

添加到用户的其他方法：

```
class User < ActiveRecord::Base

  ROLES = [
    ADMIN = 'admin'
  ]

  def admin?
    role == ADMIN
  end

  def registered?
    persisted?
  end

end 
```

为确保它正常工作，以下是使用 RSpec、FactoryGirl 和 CanCan 匹配器编写测试的方法：

```
require 'spec_helper'
require "cancan/matchers"

describe Ability do
  subject { Ability.new(user) }

  context "admin" do
    let(:user) { create(:admin) }

    it { should be_able_to(:manage, :all) }
  end

  context "user" do
    let(:user) { create(:user) }

    it { should be_able_to(:read, Article) }

    it "cannot manage articles without collaborations" do
      article = create(:article)
      should_not be_able_to(:manage, article)
    end

    it "cannot manage articles only others collaborated on" do
      article = create(:article)
      article.collaborations.create { |c| c.user = create(:user) }
      should_not be_able_to(:manage, article)
    end

    it "can manage article with collobaration" do
      article = create(:article)
      article.collaborations.create { |c| c.user = user }
      should be_able_to(:manage, article)
    end
  end

  context "guest" do
    let(:user) { User.new }

    it { should be_able_to(:read, Article) }
    it { should_not be_able_to(:manage, Article) }
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:08:38.873

您可以在您的能力.rb 文件中尝试这样的事情。只需在您的用户表中定义角色并在您的模型文件中使用 is 作为枚举

> ：角色，[“管理员”，“访客”，“其他”]

```
if user.role == "Admin"
      if user.role == "admin"
            can :manage, :all
      else
           can :read, Article
      end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T13:41:17.357

尝试

```
can :manage, Article, :collaborations => {:user_id => user.id} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T07:32:25.653

试试下面的方法。

定义初始化（用户）

```
user ||= User.new
if user.admin?
    can :manage :all
elsif user.registered?
    can :manage, Article, :collaborations=>{:user_id=>user.id}
    can :read,  Article
else
    can :read,  Article
end 
```

结尾

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T13:51:22.580

这是 CanCan 的作者提供的视频指南，可能会阐明 gem 的正确用法。

[http://railscasts.com/episodes/192-authorization-with-cancan](http://railscasts.com/episodes/192-authorization-with-cancan)

不要忘记在设置所有权限以授权当前用户在控制器中执行的操作之后。更多文档在[github 上](https://github.com/ryanb/cancan)。

大约一年前我使用了 CanCan，它很容易用命令设置`load_and_authorize_resource`

```
Class ArticlesController > ApplicationController
  load_and_authorize_resource #authorize all actions based on ability.rb

  def index
    ## manual authorization ##
    @articles = Article.all
    authorize! :read, @articles #Manually authorize this action. You dont need this if you put load_and_authorize_resource on top. 
    ## end manual authorization ##
  end

  def show 
    #@article = Article.find(params[:id]) #already loaded and authorized through load_and_authorize_resource
  end

end 
```

享受咖啡。

# opengl-es - OpenGL ES：使天空盒看起来很逼真

> ID：12747314
> 
> 赞同：0
> 
> 时间：2012-10-05T13:29:05.723
> 
> 标签：opengl-es

我在使用天空盒时遇到问题。一切都很好，但是当相机在中间（或其他任何地方）时，我们真的感觉就像在一个立方体中，正面包含一部分地面，而不是底面，我们真的感觉到两者之间的 90° 角他们。有什么想法可以改进吗？

注意。我已经编辑了图像，所以颜色是相同的，并且取消了任何灯光效果

**于 10 月 10 日编辑**

我现在要做的是（混合 OpenGL 和伪代码）

```
glMatrixMode(GL_PROJECTION)
glEnable(GL_DEPH_TEST)
glMatrixMode(GL_MODELVIEW);
Define_skybox (set vertices/texture coords; bind them on triangles)
glEnable(GL_DEPH_TEST)
glEnable(GL_LIGHTING)
glEnable(GL_TEXTURE_2D)
glEnable(GL_BLEND)
glMatrixMode(GL_PROJECTION)
glLoadIdentity();
glFrustumf(xmin, xmax, ymin, ymax, m_near, m_far) 
     with : m_fov = 90.0f; m_near = 0.1f; ymax = m_near * tan(m_fov * PI / 360); ymin = -ymax; xmax = ymax; xmin = -xmax;
glMatrixMode(GL_MODELVIEW)
glLoadIdentity();
Create 3 vect (center, eye, up) with spherical coordinate for my camera rotation
    eye(0;0;0), up (0; 1; 0), 
    center is calculated from rotation angle & spherical coordiantes
modelviewmatrix = glulookat(eye, center, up);
glLoadMatrix(modelviewmatrix); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:31:59.997

你在立方体方面的优势在哪里？摄像机必须位于立方体的正中心，并且立方体的面使用具有 90° FOV 的平面中心透视投影进行渲染。如果你以这种方式创建你的天空盒，它不应该“感觉”像一个立方体。

### 由于评论而更新

绘制天空盒时的主要操作（伪代码）

```
render_scene_with_skybox():
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glDepthMask(GL_FALSE) # disable depth writes
    glDisable(GL_DEPTH_TEST)

    set_projection()
    set_modelview(orientation=camera.orientation, location=(0,0,0))

    draw_skybox() # the skybox spans from -1 to 1 in either direction

    # those should be really on-demand
    glEnable(GL_DEPTH_TEST)
    glDepthMask(GL_TRUE)

    set_modelview(orientation=camera.orientation, location=camera.location)
    draw_scene() 
```

# flash - AS2：在removeMovieClip()后计算MovieClip新中心的偏移量

> ID：12747317
> 
> 赞同：0
> 
> 时间：2012-10-05T13:29:12.230
> 
> 标签：flash, actionscript, actionscript-2, movieclip

我有一个`MovieClip`包含影片剪辑。MovieClip 的注册点直接位于它的中心。

然后我删除了某些 MovieClip 的孩子，我想计算这个 MovieClip 的**真实中心点**现在在哪里，但注册点保持不变。

我可以得到 MovieClip 的高度和宽度，但是如果不知道 MovieClip 现在与它的注册点偏移多远，这是没有用的。

我有一个下面的图表，它应该有助于更好地解释这种情况：

![图表](../Images/940dd34effd0b9611951d7688f2d67cc.png)

我将如何计算这个偏移量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:51:17.663

您需要使用以下`getBounds()`方法：

```
var bounds = mc.getBounds(this); //Assuming this = mc._parent
var centerX = bounds.xMin + ((bounds.xMax - bounds.xMin) / 2);
var centerY = bounds.yMin + ((bounds.yMax - bounds.yMin) / 2); 
```

来源：[getBounds API 参考页面](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/2/help.html?content=00001274.html)

# python - Scipy 标签膨胀

> ID：12747319
> 
> 赞同：3
> 
> 时间：2012-10-05T13:29:36.013
> 
> 标签：python, numpy, scipy

与我关于[侵蚀 scipy label array 的](https://stackoverflow.com/q/8580518/512652)问题类似，我正在尝试扩大标签区域。

棘手的部分是防止不同地区“相互入侵”。

从开始`A`，我怎样才能得到类似的东西`B`？

```
A = array([[0, 0, 0, 0, 0, 0, 0, 0],
           [0, 1, 1, 2, 2, 0, 0, 0],
           [0, 1, 1, 2, 2, 0, 3, 3],
           [0, 0, 0, 0, 0, 0, 3, 3],
           [0, 0, 0, 0, 0, 0, 3, 3],
           [0, 0, 0, 0, 0, 0, 0, 0],
           [0, 0, 0, 0, 0, 0, 0, 0],
           [0, 0, 0, 0, 0, 0, 0, 0]])

B = array([[1, 1, 1, 2, 2, 2, 0, 0],
           [1, 1, 1, 2, 2, 2, 3, 3],
           [1, 1, 1, 2, 2, 2, 3, 3],
           [1, 1, 1, 2, 2, 3, 3, 3],
           [0, 0, 0, 0, 0, 3, 3, 3],
           [0, 0, 0, 0, 0, 3, 3, 3],
           [0, 0, 0, 0, 0, 0, 0, 0],
           [0, 0, 0, 0, 0, 0, 0, 0]]) 
```

有些情况是模棱两可的，我不太确定它应该如何表现，但我认为我所追求的很清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T21:25:08.873

一种选择是仅使用最大过滤器，然后重置任何“入侵”的区域。

举个例子：

```
import numpy as np
import scipy.ndimage as ndimage

A = np.array([[0, 0, 0, 0, 0, 0, 0, 0],
              [0, 1, 1, 2, 2, 0, 0, 0],
              [0, 1, 1, 2, 2, 0, 3, 3],
              [0, 0, 0, 0, 0, 0, 3, 3],
              [0, 0, 0, 0, 0, 0, 3, 3],
              [0, 0, 0, 0, 0, 0, 0, 0],
              [0, 0, 0, 0, 0, 0, 0, 0],
              [0, 0, 0, 0, 0, 0, 0, 0]])

B = ndimage.maximum_filter(A, 3)
B[A != 0] = A[A != 0]

print B 
```

这产生：

```
[[1 1 2 2 2 2 0 0]
 [1 1 1 2 2 3 3 3]
 [1 1 1 2 2 3 3 3]
 [1 1 2 2 2 3 3 3]
 [0 0 0 0 0 3 3 3]
 [0 0 0 0 0 3 3 3]
 [0 0 0 0 0 0 0 0]
 [0 0 0 0 0 0 0 0]] 
```

在扩张的区域中，最大的数字总是“获胜”。无论如何，这是一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-07T14:16:11.607

另一种选择是使用[2D 最近邻插值](https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.NearestNDInterpolator.html)来扩大标签区域并填充所有零值。

```
import numpy as np
from scipy import interpolate as it
from scipy import ndimage as nd

A = np.array([[0, 0, 0, 0, 0, 0, 0, 0],
              [0, 1, 1, 2, 2, 0, 0, 0],
              [0, 1, 1, 2, 2, 0, 3, 3],
              [0, 0, 0, 0, 0, 0, 3, 3],
              [0, 0, 0, 0, 0, 0, 3, 3],
              [0, 0, 0, 0, 0, 0, 0, 0],
              [0, 0, 0, 0, 0, 0, 0, 0],
              [0, 0, 0, 0, 0, 0, 0, 0]])
mask = ~(A == 0)
xy = np.where(mask)
interp = it.NearestNDInterpolator(np.transpose(xy), A[xy])
B = interp(*np.indices(A.shape))
print(B) 
```

这产生：

```
[[1 1 1 2 2 2 3 3]
 [1 1 1 2 2 2 3 3]
 [1 1 1 2 2 2 3 3]
 [1 1 1 2 2 3 3 3]
 [1 1 1 2 2 3 3 3]
 [1 1 1 2 3 3 3 3]
 [1 1 1 3 3 3 3 3]
 [1 1 1 3 3 3 3 3]] 
```

然后，使用[二元扩张](https://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.binary_dilation.html)，您可以设置希望标签区域使用迭代扩张的像素数。在我们的例子中是 1 个像素，所以`iterations=1`

```
C = nd.binary_dilation(mask, structure=np.ones((3,3)), iterations=1).astype(A.dtype)
D = C * B

print(D) 
```

这产生：

```
[[1 1 1 2 2 2 0 0]
 [1 1 1 2 2 2 3 3]
 [1 1 1 2 2 2 3 3]
 [1 1 1 2 2 3 3 3]
 [0 0 0 0 0 3 3 3] 
 [0 0 0 0 0 3 3 3]
 [0 0 0 0 0 0 0 0]
 [0 0 0 0 0 0 0 0]] 
```

# google-app-engine - appengine：如何在具有祖先的实体中按键查询实体？

> ID：12747321
> 
> 赞同：1
> 
> 时间：2012-10-05T13:29:42.940
> 
> 标签：google-app-engine, google-cloud-datastore

我在 Google AppEngine 上的应用程序有问题，尤其是数据存储区。故事有点长。我的数据模型如下所示：

1.  用户可以创建实体。每个实体都具有以下属性：#1)。自动生成的密钥。#2）。创造者。#3）。一个号码。
2.  在应用程序中，我正在执行以下查询：a)。按创建者查询实体（#2）。乙）。按数字属性（#3）查询实体。C）。通过 id(#1) 查询实体。

我正在使用低级数据存储 API。现在，这是我尝试过的几种有问题的方法：

[方法 1]：使用 Datastore，如果我使实体成为无父实体（没有祖先），那么一切都很好，尤其是查询“c”可以通过 Datastore.get(k) 轻松实现。

方法 1 的问题：由于数据存储“最终一致”，因此对于查询“a”，结果始终不会更新到最新。如果用户创建了一个实体，然后列出了他创建的所有实体，那么新创建的实体总是会丢失。它仅在几秒钟后通过刷新出现...尝试使用 memcache，但无济于事（或者我没有找到好方法？）。

为了克服上述问题，我改变了数据结构。这里是【方法二】：在创建每个实体时，根据创建者创建一个key，并将新实体作为key的子实体。因此，用户创建的所有实体都是具有祖先的实体。因此查询“a”可以及时工作，查询“b”似乎也可以工作。

Approach2 的新问题：对于查询'c'，它总是什么都不返回。这是我的查询'c'。他们都找不到实体，总是：

方法 1：
实体 en = datastore.get(k)

方法2：

```
DatastoreService ds = DatastoreServiceFactory.getDatastoreService();
Query q = new Query(kind)
    .setFilter(FilterOperator.EQUAL.of(Entity.KEY_RESERVED_PROPERTY, k));
Entity en = ds.prepare(q).asSingleEntity(); 
```

另一种尝试： 方法 3：将所有实体分组在一个祖先之下。这克服了 Approach1 中的问题，并且可以使用祖先过滤器进行查询，因此可以检索结果。

方法 3 的问题：这种结构将所有实体组合为一个实体组。根据 Google 数据存储规范，写入操作每秒最多可发生 5 次。这是我不想达到的极限......

我觉得这种数据模型真的很常见。有没有合适的方法来构建数据？任何帮助表示赞赏。谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:41:38.297

由于您问题的格式，我不太确定您在问什么，但是...

当您通过 ID 查询时，您还必须包含父键。密钥包括父母数据和子数据，如果您只使用子数据，那么它不会返回您要查找的内容，因为这不是“名称”。完整路径（祖先/子）是它的名称。

因此，将父项包含在您正在构建的密钥中，然后获取它。

```
key = parent, parent_ID, child, child_ID 
```

作为

```
key = child, ID 
```

如果它有父级，则无法使用，因为密钥不完整并且无法返回您想要的数据。

# prolog - Prolog查询无限搜索

> ID：12747324
> 
> 赞同：2
> 
> 时间：2012-10-05T13:29:50.880
> 
> 标签：prolog, stack-overflow, nfa

我是 Prolog 的初学者，我想问一个关于 Prolog 的问题。

我的程序基于非确定性有限状态自动机。

起始状态为**S0**，最终状态为**S3**。

图是

![在此处输入图像描述](../Images/68880199830ac229a9a2a09b0e7022b7.png)

所以如果有一个字符串`[a,a,b,b,c,c]`它应该像

```
start(s0).
edge(a, s0, s0).
edge(a, s0, s1).
edge(b, s1, s1).
edge(b, s1, s2).
edge(c, s2, s2).
edge(c, s2, s3).
final(s3). 
```

有一个谓词`accepts(Ls)`if（有`Ls`一个字符串列表）

```
accepts(Ls) :- start(A), goesTo(Ls, A, B), final(B). 
```

并假设 NFA 从状态**Si**到状态**Sj**并且在它们之间存在状态**Sk**，`goesTo`谓词定义为

```
goesTo(Ls, Si, Sj) :- edge (L, Si, Sk), goesTo(Ls, Sk, Sj). 
```

但是，如果查询（从到的`accepts(Ls)`任意字符串列表），教程问题说它几乎肯定会进入无限搜索并且会发生堆栈溢出。`a``c`

但是，我不明白为什么查询会进入无限搜索并导致堆栈溢出。如果你能给我一个理由，那就太好了！

***（编辑：）***确切的报价是：

> “一个典型的 Prolog 用户可能希望他/她的 goTo 规则是这样的，即查询接受（X）会生成被上述 NFA 接受的连续字符串。几乎可以肯定，鉴于给定 NFA 的上述表示，Prolog 系统将进入无限搜索并发生堆栈溢出。说明为什么会这样。（如果您要避免此问题，请说明您如何设法避免它）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:49:07.320

这是您的 NFA 的定义：

```
start(s0). 
edge(a, s0, s0). 
edge(a, s0, s1). 
edge(b, s1, s1). 
edge(b, s1, s2).
edge(c, s2, s2). 
edge(c, s2, s3).
final(s3). 
```

它与您可能测试其接受的任何输入字符串没有任何联系。注意每行末尾的点 - 这些是定义 NFA 的 Prolog 谓词。

`accepts/1`使用*任何* **具体**的输入字符串运行您的将导致有限递归。这里的搜索空间是有限的，它肯定会被耗尽——只要你`accepts/1`用有限长度的完全实例化的字符串调用。

现在，如果您要尝试**生成**所有可能的~~路径~~可接受的字符串，那么您将有无限递归，因为有无限数量的可接受的字符串：

```
a,b,c
a,a,b,c
a,a,a,b,c
a,a,a,a,b,c
..... 
```

都是这个自动机可以接受的字符串。

您的谓词定义都错过了最后一个点顺便说一句。而且`goesTo`不太对。必须改为：

```
goesTo([], S, S).
goesTo([L1|Ls], S1, Sn) :- edge(L1, S1, S2), goesTo(Ls, S2, Sn).
accepts(Ls) :- start(A), goesTo(Ls, A, B), final(B). 
```

还要注意，谓词名称和左括号之间不能有空格。

* * *

所以现在OP已经澄清了他们的问题。这是，

> *为什么尝试生成所有可能的可接受字符串几乎肯定会进入非生产性循环*？

该调用`accepts(X)`确实进入了无限递归，因为要尝试的新节点的生成从头开始重新启动，因此在内部，`a`尝试了无限增长的 s 字符串：

```
a
a,a
a,a,a
a,a,a,a
.... 
```

仅仅因为`edge(a,s0,s0)`是`edge`数据库中的第一个事实，并且调用`edge/3`位于`goesTo/3`谓词定义中的第一个位置。Prolog 的搜索策略是从左到右的。

通过像这样重新安排目标，我们可以从完全非生产性行为（Prolog 只是挂在一个无限循环中）到生产性行为：

```
start(s0). 
edge(a, s0, s1). 
edge(b, s1, s2).
edge(c, s2, s3).
edge(a, s0, s0). 
edge(b, s1, s1). 
edge(c, s2, s2). 
final(s3). 
```

现在，

```
12 ?- accepts(X).

X = [a, b, c] ;
X = [a, b, c, c] ;
X = [a, b, c, c, c] ;
X = [a, b, c, c, c, c] ;
X = [a, b, c, c, c, c, c] ;
X = [a, b, c, c, c, c, c, c] ;
X = [a, b, c, c, c, c, c, c, c] 
```

不幸的是，可以看出这一代人倾向于`c`. 如何让它“公平”......让我们把它留给另一个问题，好吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T05:55:43.030

因为它是其他人所说的循环。

ps 任务已经延长到这个星期四，所以不用惊慌[还] 是的，我知道你在做什么任务

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T16:49:43.583

由于 Prolog 采用的搜索策略，程序会循环。它尝试使用*[深度优先](http://en.wikipedia.org/wiki/Depth-first_search)*策略来解决探索解决方案空间的查询，即空间有效但不完整。

现在应该清楚，由于图中的这些循环，在您的情况下解决方案空间*是无限的。*从初始状态到最终状态有无限的路径。

[迭代深化](http://it.wikipedia.org/wiki/Iterative_deepening)应该是枚举路径更简单的方法，在Prolog中很容易实现。另一种可能性是实施*[广度优先](http://en.wikipedia.org/wiki/Breadth-first_search)*搜索。

# php - 数组操作

> ID：12747325
> 
> 赞同：1
> 
> 时间：2012-10-05T13:29:52.337
> 
> 标签：php, arrays, string, explode

我有这个字符串（仅作为示例）：

```
$string='cat-cat.png-0,dog-dog.jpg-0,phone-nokia.png-1,horse-xyz.png-0'; 
```

以及重新制作此字符串的代码

```
$string=explode(",", $string);
$i = 0;
$ile=count($string);
while ($i < $ile) {
    $a = explode("-", $string[$i]);
    if($a[2]==0) $animal .= $a[0].' '.$a[1];
    elseif($a[2]==1) $thing .= $a[0].' '.$a[1];
    $i++;
} 
```

我需要搜索这个数组并分组： $animal 和 $thing 我知道为什么这段代码不起作用，但我不知道这样做。请帮帮我 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:06:43.590

你可以试试

```
$string = 'cat-cat.png-0,dog-dog.jpg-0,phone-nokia.png-1,horse-xyz.png-0';
$array = explode(",", $string);
$list = array();

foreach ( $array as $info ) {
    list($prifix, $name, $id) = explode("-", $info);
    $list[$id][] = $prifix . "-" . $name;
}

var_dump($list); 
```

输出

```
array
  0 => 
    array
      0 => string 'cat-cat.png' (length=11)
      1 => string 'dog-dog.jpg' (length=11)
      2 => string 'horse-xyz.png' (length=13)
  1 => 
    array
      0 => string 'phone-nokia.png' (length=15) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:34:59.933

这应该完成任务：

```
$string = 'cat-cat.png-0,dog-dog.jpg-0,phone-nokia.png-1,horse-xyz.png-0';
$array  = explode(',', $string);
$animal = array();
$thing  = array();
foreach ($array as $item)
{
    $a = explode('-', $item);
    if( $a[2] == 1 )
    {
        $thing[] = $a[0] . ' ' . $a[1];
    }
    else
    {
        $animal[] = $a[0] . ' ' . $a[1];
    }
} 
```

然后，如果您需要将这些数组作为字符串，则可以从那里内爆这些数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T13:36:25.343

如果您举例说明代码应该输出什么，或者您希望实现的结果数组，它可能会有所帮助。

如果您完全坚持输入字符串格式，那么您可以使用正则表达式来使其更加健壮。就像是：

/([^,]*)-(\d+)/

将匹配文件名和类型，假设类型始终是数字。

例如：

```
preg_match_all("/([^,]*)-(\d+)/", "cat-cat.png-0,dog-dog.jpg-0,phone-nokia.png-1,horse-xyz.png-0", $matches); var_dump($matches);
$items = array();
foreach ($matches[2] as $key=>$type) {
    if (empty($items[$type])) {
        $items[$type] = array();
    }
    $items[$type][] = $matches[1][$key];
}
var_dump($items); 
```

理想情况下，您希望添加更多错误检查，例如检查匹配是否按预期返回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T14:08:51.610

您也可以通过`preg_match`在图像名称包含其他字符（如额外`-`或数字）的情况下使用来实现它，以下是示例：

```
$string = 'cat-cat.png-0,dog-snoopy-dog.jpg-0,phone-nokia-6310.png-1,rabbit-bugs-bunny-eating-carrot.png-0,ignore-me';

$tmp = explode(',', $string);

$animals = $things = array();

foreach($tmp as $value)
{
    preg_match('/(?P<name>[A-Za-z]+)-(?P<file>[A-Za-z0-9\.-]+)-(?P<number>\d+)/', $value, $matches);

    if($matches)
    {
        switch($matches['number'])
        {
            case '0':
                array_push($animals, sprintf('%s %s', $matches['name'], $matches['file']));
                break;
            case '1':
                array_push($things, sprintf('%s %s', $matches['name'], $matches['file']));
                break;
        }
    }
} 
```

结果：

```
array (size=3)
  0 => string 'cat cat.png' (length=11)
  1 => string 'dog snoopy-dog.jpg' (length=18)
  2 => string 'rabbit bugs-bunny-eating-carrot.png' (length=35)
array (size=1)
  0 => string 'phone nokia-6310.png' (length=20) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T14:14:00.273

试试下面的代码

```
// Remove all things and all numbers with preceding hyphens
$animal = trim(preg_replace('/([a-zA-Z\-\.]+\-1,?)|(\-\d+)/', '', $string), ',');
// gives 'cat-cat.png,dog-dog.jpg,horse-xyz.png'

// Remove all animals and all numbers with preceding hyphens
$thing = trim(preg_replace('/([a-zA-Z\-\.]+\-0,?)|(\-\d+)/', '', $string), ',');
// gives 'phone-nokia.png' 
```

# android - Android 中的“硬件加速”错误

> ID：12747326
> 
> 赞同：1
> 
> 时间：2012-10-05T13:29:51.073
> 
> 标签：android, android-manifest, hardware-acceleration

当我在 AndroidManifest.xml 中使用“hardwareAccelerated”时，会显示这种类型的错误消息。请帮助我，为什么会产生这种类型的错误。

```
error: No resource identifier found for attribute 'hardwareAccelerated' in package 'android' 
```

# c# - 将数据与 UI 层分离？

> ID：12747327
> 
> 赞同：0
> 
> 时间：2012-10-05T13:30:02.557
> 
> 标签：c#, winforms, design-patterns, .net-4.0, data-access-layer

我想完全`data layer`分开`UI Layer`。这是我的例子，我有一些客户需要为同一份报告提供不同的数据，我不想`UI`接触. 基本上，the会调用一些“事物”，而那个“事物”会调用 the ，然后会根据用户检索数据并将其传递回“事物”，而“事物”会将数据传递回.`Data Layer``Data Layer``UI``UI``Data layer``data layer``UI`

我不知道这个“东西”应该是什么？

我听说过一些术语，比如模型，使用对象映射器，但不确定这些是否相关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:35:48.040

您正在寻找的模式是 MVC - Model-Controller-View。您需要的“东西”是控制器。通常代码是这样组织的

*   调用控制器来获取报告
*   is 访问数据层（或模型）并获取一个填充了数据的对象（可以是强类型对象，也可以是地图）
*   控制器调用视图，将数据对象传递给它并获取渲染结果
*   控制器将渲染结果返回给客户端。

这应该足以让你开始。

[维基百科中的 MVC 模式](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:50:36.103

您正在谈论一种通用架构：UI --> 业务逻辑层 (BLL) --> 数据访问层(DLL)。现在，BLL 和 DAL 可以包含在您的 .exe 中（您使用 WinForms 标记了您的问题），或者可以成为服务层/层的一部分，这很常见。

拥有定义每一层（BLL 和 DLL）的接口通常是一种很好的做法。这将允许您在不影响其使用者（通常）的情况下更改层的实现，为您提供关注点分离，并促进测试。

BLL 将包含您的逻辑，DAL 将管理您的数据源。您提到了一个模型，它通常指的是 DAL 通过 BLL 返回的对象。将其视为您的 Person 模型或 Order 模型。由于您的标签是 Winforms，您可能需要研究 MVP 模式。

# c# - 使用 StructureToPtr 将 C# 结构编组为 C++

> ID：12747330
> 
> 赞同：2
> 
> 时间：2012-10-05T13:30:09.617
> 
> 标签：c#, c++, interop, c++-cli

我有 C# 类：

```
namespace Models
{
    [StructLayout(LayoutKind.Explicit, Size = 120, CharSet = CharSet.Unicode)]
    public struct DynamicState
    {
        [FieldOffset(0)]
        public double[] Position;

        [FieldOffset(24)]
        public double[] Velocity;

        [FieldOffset(48)]
        public double[] Acceleration;

        [FieldOffset(72)]
        public double[] Attitude;

        [FieldOffset(96)]
        public double[] AngularVelocity;
    }
} 
```

和 C++/CLI 方法：

```
Models::DynamicState SomeClassClr::DoSomething(Models::DynamicState ds)
{
    int struct_size = Marshal::SizeOf(ds);
    System::IntPtr ptr = Marshal::AllocHGlobal(struct_size);
    DynamicStateStruct ds_struct;
    struct_size = sizeof(ds_struct);

    Marshal::StructureToPtr(ds, ptr, false);
    ds_struct = *(DynamicStateStruct*)ptr.ToPointer();

    Models::DynamicState returnVal;
    mpSomeClass->doSomething(ds_struct);

    return returnVal;
} 
```

其中 DynamicStateStruct 是本机 C++ 类：

```
struct DynamicStateStruct
{
    double mPosition[3];
    double mVelocity[3];
    double mAcceleration[3];
    double mAttitude[3];
    double mAngularVelocity[3];
}; 
```

当我在本机 C++ 中恢复 struct ( `ds_struct`) 时，我没有得到正确的值，我缺少什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:54:59.207

尝试以下变体：

```
public struct DynamicState
{
    [MarshalAs (UnmanagedType.ByValArray, SizeConst=3)]
    public double[] Position;

    [MarshalAs (UnmanagedType.ByValArray, SizeConst=3)]
    public double[] Velocity;

    [MarshalAs (UnmanagedType.ByValArray, SizeConst=3)]
    public double[] Acceleration;

    [MarshalAs (UnmanagedType.ByValArray, SizeConst=3)]
    public double[] Attitude;

    [MarshalAs (UnmanagedType.ByValArray, SizeConst=3)]
    public double[] AngularVelocity;
} 
```

另一种选择是使用不安全代码中可用的固定数组：

```
public unsafe struct DynamicState
{
    public fixed double Position[3];

    public fixed double Velocity[3];

    public fixed double Acceleration[3];

    public fixed double Attitude[3];

    public fixed double AngularVelocity[3];
} 
```

PS 一个很好的.Net互操作指南可以在这里找到：[http ://www.mono-project.com/Interop_with_Native_Libraries](http://www.mono-project.com/Interop_with_Native_Libraries)

# c# - 通用项目的 wpf 铸造

> ID：12747332
> 
> 赞同：2
> 
> 时间：2012-10-05T13:30:14.740
> 
> 标签：c#, wpf, xaml, mvvm

我有一个当前如下所示的视图模型。TCm 类型是领域模型类型，即TelephoneNumber。并且有子类PcmDetailVms（即TelephoneNumberPcmDetailVm）。我想将这些属性用于处理特定 TCm（即 TelephoneNumber）的 DataGrid。

虽然将其子类化并进行转换并不可怕，但我想知道是否有任何内置的 xaml 功能可以进行转换。或者如果使用转换器会更惯用？

干杯，
贝里尔

# 查看模型

```
public class PcmShellVm<TCm> : ... where TCm : ContactMechanism
{
    public ObservableCollection<PcmDetailVm> DetailVms { get; protected set; }

    public PcmDetailVm SelectedVm {
        get { return _collectionView.CurrentItem as PcmDetailVm; } 
        set { _collectionView.MoveCurrentTo(value); }
    }
} 
```

# 子类虚拟机

```
public class TelecomNumberPcmShellVm : PcmShellVm<TelecomNumber>
{
    ...

    public IEnumerable<TelecomPcmDetailVm> CastedDetailVms { get { return DetailVms.Cast<TelecomPcmDetailVm>(); } }

    public TelecomPcmDetailVm CastedSelectedVm 
    {
        get { return (TelecomPcmDetailVm) SelectedVm; } 
        set { SelectedVm = value; }
    }
} 
```

# 编辑

所以安德烈对我上面没有问得很清楚的问题有正确的答案。我错误地认为我需要在 xaml 中的某个地方投射我的项目，就像我需要在代码中做的那样。

但是，绑定引擎必须使用反射来按名称发现属性，因此不需要强制转换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:42:19.407

我不确定我是否正确理解了这个问题，但我认为每种类型的特定 DataTemplates 都是一个想法。

看法 ：

```
<Window x:Class="WpfApplication18.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
        xmlns:WpfApplication18="clr-namespace:WpfApplication18"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.Resources>
            <DataTemplate DataType="{x:Type WpfApplication18:PersonsVM}">
                <DataGrid ItemsSource="{Binding Items}" AutoGenerateColumns="False">
                    <DataGrid.Columns>
                        <DataGridTextColumn Binding="{Binding FirstName}" Header="First name"/>
                        <DataGridTextColumn Binding="{Binding LastName}" Header="Last name"/>
                    </DataGrid.Columns>
                </DataGrid>
            </DataTemplate>
            <DataTemplate DataType="{x:Type WpfApplication18:SpecificPersonsVM}">
                <DataGrid ItemsSource="{Binding Items}" AutoGenerateColumns="False">
                    <DataGrid.Columns>
                        <DataGridTextColumn Binding="{Binding LastName}" Header="Last name"/>
                        <DataGridTextColumn Binding="{Binding FirstName}" Header="First name"/>
                        <DataGridTextColumn Binding="{Binding Age}" Header="Age"/>
                    </DataGrid.Columns>
                </DataGrid>
            </DataTemplate>
        </Grid.Resources>

        <ContentControl Content="{Binding}"/>
    </Grid>
</Window> 
```

视图模型：

```
using System.Collections.ObjectModel;

namespace WpfApplication18
{
    public class PersonVM
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
    }

    public class SpecificPersonVM : PersonVM
    {
        public byte Age { get; set; }
    }

    public class PersonsVM
    {
        public ObservableCollection<PersonVM> Items { get; private set; }

        public PersonsVM()
        {
            Items = new ObservableCollection<PersonVM>();
        }
    }

    public class SpecificPersonsVM
    {
        public ObservableCollection<SpecificPersonVM> Items { get; private set; }

        public SpecificPersonsVM()
        {
            Items = new ObservableCollection<SpecificPersonVM>();
        }
    }
} 
```

安装代码（后面的代码，是的......）

```
namespace WpfApplication18
{
    public partial class MainWindow
    {
        public MainWindow()
        {
            InitializeComponent();

            //SetupPersonsVM();
            SetupSpecificPersonsVM();
        }

        private void SetupSpecificPersonsVM()
        {
            var vm = new SpecificPersonsVM();
            vm.Items.Add(new SpecificPersonVM { FirstName = "Johny", LastName = "Bravo", Age = 17 });
            vm.Items.Add(new SpecificPersonVM { FirstName = "Dude", LastName = "Gray", Age = 22 });
            vm.Items.Add(new SpecificPersonVM { FirstName = "Scott", LastName = "Thomas", Age = 34 });
            DataContext = vm;
        }

        private void SetupPersonsVM()
        {
            var vm = new PersonsVM();
            vm.Items.Add(new PersonVM { FirstName = "John", LastName = "Scott" });
            vm.Items.Add(new PersonVM { FirstName = "Matthew", LastName = "Johnson" });
            DataContext = vm;
        }
    }
} 
```

您可以为不同的虚拟机提供视图服务，它会基于此呈现不同的东西。在我的示例中，两种 VM 类型都有一个 DataGrid，但它可能更加不同。

# mysql - MySQL用户创建日期、修改日期

> ID：12747335
> 
> 赞同：1
> 
> 时间：2012-10-05T13:30:24.287
> 
> 标签：mysql, database, mysqladmin

我有一个问题要问所有 MySQL 专家：是否可以查看 MySQL 中创建用户的时间？假设我创建了一个名为“monty”的用户：

`CREATE USER 'monty'@'localhost' [...]`

我如何查看创建此用户的时间？还有一种方法可以检查该用户的详细信息如何被修改？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:32:58.670

不，没有办法做到这一点。你唯一能做的就是分析 MySQL Server 的二进制日志；但在内部，它既不存储用户创建日期也不存储修改日期/详细信息。

如果您正在创建新软件或向现有软件添加功能，您可能会考虑仅通过存储过程创建/修改用户，而在相同的存储过程中，您可以记录参数、当前日期和您想要的所有其他内容。

# windows - 向下推送通知

> ID：12747342
> 
> 赞同：1
> 
> 时间：2012-10-05T13:30:48.703
> 
> 标签：windows, windows-phone-7

我已经使用通知发布了应用程序，并且从今天（也许明天）开始它停止工作，我无法使用以下方法创建新链接（用于新应用程序）：

```
pushChannel = New HttpNotificationChannel(channelName)

' Register for all the events before attempting to open the channel.
AddHandler pushChannel.ChannelUriUpdated, AddressOf PushChannel_ChannelUriUpdated
AddHandler pushChannel.ErrorOccurred, AddressOf PushChannel_ErrorOccurred

pushChannel.Open()

' Bind this new channel for Tile events.
If Not pushChannel.IsShellToastBound Then
    pushChannel.BindToShellToast()
End If
If Not pushChannel.IsShellTileBound Then
    pushChannel.BindToShellTile()
End If 
```

服务器宕机了吗？我不使用任何证书。有必要吗？

它返回“超时”以发送通知或打开新频道！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T07:48:43.810

我不知道您是否有足够的使用量来解决这个问题，但是您每个订阅每天只能推送 500 条通知。如果你想解决这个问题，你需要设置一个经过身份验证的 Web 服务。有关更多信息，请参阅这些：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402558(v=vs.92](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402558(v=vs.92) )。

和

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff941099(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff941099(v=vs.92).aspx)

# ruby - Ruby Imap OpenSSL::SSL::SSLError：读取服务器证书 B：证书验证失败

> ID：12747348
> 
> 赞同：2
> 
> 时间：2012-10-05T13:30:54.857
> 
> 标签：ruby, openssl, imap, redmine

我正在尝试使用 IMAP，但它不起作用。我对“https”进行了同样的尝试，它奏效了。

* * *

```
require 'net/imap' 
=> true
irb(main):002:0> Net::IMAP.new("xxx", 993, true).login("redmine", "redmine")
OpenSSL::SSL::SSLError: SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed
    from /usr/local/lib/ruby/1.9.1/net/imap.rb:1439:in `connect'
    from /usr/local/lib/ruby/1.9.1/net/imap.rb:1439:in `start_tls_session'
    from /usr/local/lib/ruby/1.9.1/net/imap.rb:1036:in `initialize'
    from (irb):2:in `new'
    from (irb):2
    from /usr/local/bin/irb:12:in `<main>'
irb(main):003:0> 
```

* * *

```
ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-linux]
gem -v 1.8.24 
```

这类似于：[https ://www.chiliproject.org/boards/1/topics/2076](https://www.chiliproject.org/boards/1/topics/2076)

* * *

```
openssl s_client -connect klevas.mif.vu.lt:imaps 
```

显示证书已过期。但是，在 Ruby 和 Gem 相同的另一个系统上，IMAP 连接有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-08T13:50:52.063

如果我们在这里讨论 redmine，以下内容很有帮助。

在第 29 行的 lib/redmine/imap.rb 中有一个调用

```
imap = Net::IMAP.new(host, port, ssl) 
```

根据从/usr/lib/ruby/1.9.1/net/imap.rb了解到的信息

```
 def initialize(host, port_or_options = {},
               usessl = false, certs = nil, verify = true) 
```

我把它改成

```
imap = Net::IMAP.new(host, port, ssl, nil, false) 
```

错误消失了

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-19T16:57:57.220

试试这个： imap = Net::IMAP.new('xxx', {:ssl => {:verify_mode => 0 }})

# javascript - 使用 documentFragment 解析 HTML 而不发送 HTTP 请求

> ID：12747350
> 
> 赞同：4
> 
> 时间：2012-10-05T13:31:12.743
> 
> 标签：javascript, html, dom, html-parsing

我想解析一个字符串并从中生成 DOM 树。我决定使用`documentFragment`API，到目前为止我这样做了：

```
var htmlString ="Some really really complicated html string that only can be parsed by a real browser!";
var fragment = document.createDocumentFragment('div');
var tempDiv = document.createElement('div');
fragment.appendChild(tempDiv);
tempDiv.innerHTML = htmlString;
console.log(tempDiv); 
```

但问题是这个脚本会导致我的浏览器（特别是 Chrome）发送实际的 HTTP 请求！我是什么意思？以此为例：

```
var htmlString ='<img src="somewhere/odd/on/the/internet" alt="alt?" />';
var fragment = document.createDocumentFragment('div');
var tempDiv = document.createElement('div');
fragment.appendChild(tempDiv);
tempDiv.innerHTML = htmlString;
console.log(tempDiv); 
```

这导致：

![铬错误](../Images/4ae349cbe160d181f7c151f049d7bd8d.png)

有什么解决方法吗？或任何其他更好的想法来解析 HTML-String？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:52:30.147

好吧，您将元素附加到页面，当然浏览器将获取内容。

您可以研究使用[DOMParser](https://developer.mozilla.org/en-US/docs/DOM/DOMParser)

```
var htmlString ='<img src="somewhere/odd/on/the/internet" alt="alt?" />';
var parser = new DOMParser();
var doc = parser.parseFromString(htmlString , "text/html"); 
```

[MDN 文档页面](https://developer.mozilla.org/en-US/docs/DOM/DOMParser#DOMParser_HTML_extension_for_other_browsers)上有代码来支持不支持它的浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:48:29.007

我在stackoverflow上找到了我的问题的答案，[这个答案](https://stackoverflow.com/a/7539198/1055628)。答案由一段代码组成，该代码使用本机浏览器功能解析 HTML，但在不发送 HTTP 请求的半沙盒环境中。希望它也可以帮助其他人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T18:06:58.717

我对已接受答案的链接答案采取了一种修改方法，因为我不喜欢创建 iframe、通过一组正则表达式处理字符串，然后将其放入 DOM 的想法。

我需要预处理来自 ajax 请求的一些 HTML（这个特定的 HTML 具有具有相对路径的图像，并且发出 ajax 请求的页面与 HTML 不在同一目录中）并将资源的路径改为绝对路径。

我的代码看起来像这样：

```
var dataSrcStr = data.replace(/src=/g,'data-src=');
var myContainer = document.getElementById('mycontainer');
myContainer.innerHTML = dataSrcStr;
var imgs = myContainer.querySelectorAll('img');
for(i=0,ii=imgs.length;i<ii;i++){
  imgs[i].src = 'prepended/path/to/img/'+imgs[i].data-src;
  delete imgs[i]['data-src'];
} 
```

显然，如果其中包含一些明文`src=`，您将替换它，但对于我的内容而言，情况并非如此，因为我也控制它。

这为我提供了比链接答案或使用 DOMParser 更快的解决方案，同时仍向 DOM 添加元素以便能够以编程方式访问元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-14T18:52:11.793

试试这个。也适用于复杂的 html。您的浏览器可以显示的任何内容都可以解析。

```
var htmlString = "...";
var newDoc = document.implementation.createHTMLDocument('newDoc');      
newDoc.documentElement.innerHTML = htmlString; 
```

# magento - Magento 1.7 - 发票修改

> ID：12747351
> 
> 赞同：1
> 
> 时间：2012-10-05T13:31:19.150
> 
> 标签：magento, magento-1.7

我一直在寻找几乎所有`app/code/mage`文件，试图找出可以从发票中删除客户电话号码的位置。

我认为我得到的最接近的方法是删除`app/code/mage/customer/etc/`目录中 config.xml 文件中的一些代码，或者`/app/code/mage/directory/model/country.php`我在其中所做的任何更改都没有做任何事情（我知道我应该避免对核心进行更改，但它在开发站点上我只是想看看在哪里改变它）。

我尝试在每次更改后清除缓存。

任何帮助将不胜感激。

附言。我正在使用 Magento 1.7.0.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T14:00:42.617

要删除电话 # 转到管理 -> 系统 -> 配置 -> 客户配置 -> 地址模板

# php - 将回显数组的结果添加到另一个数组

> ID：12747356
> 
> 赞同：1
> 
> 时间：2012-10-05T13:31:21.933
> 
> 标签：php, arrays

我正在尝试向数组中添加一些额外的东西，但在某处迷路了，我有以下代码.....

```
<?php
    foreach ($search_values as $key => $value)
    {
    echo "'";
    echo $key;
    echo "'";
    echo " => ";
    echo "'";
    echo $value;
    echo "'";
    echo " , ";
    }
?> 
```

这会产生以下......

```
'beds' => '2' ,
'property_type' => 'for-rent' ,
'zipcode' => 'se19' , 
```

然后我有以下代码生成地图....

```
<?php
    if ( function_exists( 'pronamic_google_maps_mashup' ) ) {
    pronamic_google_maps_mashup(
    array(
    'post_type' => 'listings' ,
    'posts_per_page' => -1
    )
    );
    }
?> 
```

我需要以某种方式将回显第一个数组的结果添加到这个数组中，有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:34:31.307

不，您不需要将回显结果添加到数组中——您只需将数组值添加到另一个数组中。这可以用[`array_merge()`](http://www.php.net/manual/en/function.array-merge.php);

```
pronamic_google_maps_mashup(
  // Merge your new array values with $search_values and the output of array_merge()
  // becomes the argument to panoramic_google_maps_mashup()...
  array_merge(array(
   'post_type' => 'listings' ,
   'posts_per_page' => -1
  ), $search_values)
); 
```

不要根据它们在屏幕上的打印方式来考虑数组内容，因为这会导致您走错路。PHP 有[许多数组函数](http://php.net/manual/en/ref.array.php)来完成各种任务。

要了解最终数组的外观，请使用以下命令对其进行调试`var_dump()`：

```
var_dump(
  array_merge(array(
       'post_type' => 'listings' ,
       'posts_per_page' => -1
      ), $search_values)
    )
); 
```

# qt - 如何确定 Qt 中的默认纸张大小（取决于国家/地区）

> ID：12747358
> 
> 赞同：1
> 
> 时间：2012-10-05T13:31:24.147
> 
> 标签：qt, printing, internationalization, locale

在（基于 Qt 的）C++ 应用程序中确定默认纸张大小的好方法是什么？

虽然 QLocale 提供有关日期格式、测量系统等的信息，但我找不到任何方法从那里检索默认纸张大小。

例如，在美国，他们通常使用“Letter”，而在德国，我们通常使用“DIN A4”。

Qt 文档建议为此目的使用翻译文件（参见[Localize 部分](http://qt-project.org/doc/qt-4.8/internationalization.html)）。但是，据我了解，应该保持显示语言（由翻译文件指定）独立于系统区域设置，以便人们可以选择独立于系统区域设置的显示语言，如果他们愿意的话。

有什么想法吗？

# php - 调用操作错误

> ID：12747360
> 
> 赞同：0
> 
> 时间：2012-10-05T13:31:28.513
> 
> 标签：php

我在 php 脚本中有以下函数，

```
public function createPorductstatushistory($item) {

    $stmt = mysqli_prepare($this->connection, "INSERT INTO $this->tablename (timeStamp, ProductDetail_idProduct, ProductStatus_idStatus) VALUES (?, ?, ?)");
    $this->throwExceptionOnError();

    mysqli_stmt_bind_param
    ($stmt, 'sii', 
    $item->timeStamp->toString('YYYY-MM-dd HH:mm:ss'), 
    $item->ProductDetail_idProduct, 
    $item->ProductStatus_idStatus);
    $this->throwExceptionOnError();

    mysqli_stmt_execute($stmt);     
    $this->throwExceptionOnError();

    $autoid = mysqli_stmt_insert_id($stmt);

    mysqli_stmt_free_result($stmt);     
    mysqli_close($this->connection);

    return $autoid;
} 
```

但是，每次我转到“$item->timeStamp->toString('YYYY-MM-dd HH:mm:ss')”部分时。弹出以下错误。

> 调用操作时出错。检查您的操作输入或服务器代码，然后再次尝试调用该操作。
> 
> 原因：注意：试图在第 125 行获取 C:\xampp\htdocs\fypweee_admin\FYPadminSideV3-debug\services\PorductstatushistoryService.php 中非对象的属性
> 
> 致命错误：在第 125 行调用 C:\xampp\htdocs\fypweee_admin\FYPadminSideV3-debug\services\PorductstatushistoryService.php 中非对象的成员函数 toString()

这是否意味着 `timeStamp`var 需要采用 'YYYY-MM-dd HH:mm:ss' 的格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:42:37.323

你的`$item`对象有一个属性`timeStamp`。您假设 的`timeStamp`属性`$item`是一个对象。但是错误告诉你那`timeStamp`不是一个对象。

这可能意味着您永远不会将对象的实例设置为`timeStamp`.

例子：

```
class TimeStamp
{
    time = '13:00';
}

class Item
{
    public $timeStamp;
}

$item = new Item();
$item->timeStamp->time; 
```

这将导致这样的错误。您需要初始化`TimeStamp`并将其分配给您的`$timeStamp`变量。

```
class TimeStamp
{
    time = '13:00';
}

class Item
{
    public $timeStamp;

    public Item()
    {
        $this->$timeStamp = new TimeStamp();
    }
}

$item = new Item();
$item->timeStamp->time; 
```

现在这应该可以工作，因为`TimeStamp`在构造函数中初始化并分配给`$timeStamp`变量。

所以请重新检查您的代码并确保您需要的所有内容都已实例化

# android - 在 Android 上的 OpenGL ES 1.0 中绘制平滑的彩色四边形

> ID：12747361
> 
> 赞同：2
> 
> 时间：2012-10-05T13:31:32.953
> 
> 标签：android, opengl-es

我正在尝试在 OpenGL ES 中渲染一个平滑的彩色矩形。由于无法直接绘制四边形，因此我使用了两个三角形。使用平滑的阴影，结果与第 5 课中的图片一样：[INsanity Design OpenGL 端口](http://insanitydesign.com/wp/projects/nehe-android-ports/)。

注意对角线。结果取决于三角形如何构成四边形。我想[在这里](http://www.naturewizard.com/tutorial0103.html)得到这个结果（向下滚动到底部）。

是否有可能获得颜色平滑的四边形？

# java - 序列化父子对象

> ID：12747367
> 
> 赞同：0
> 
> 时间：2012-10-05T13:31:42.977
> 
> 标签：java, json, rest, serialization, spring-mvc

我有一个使用 spring-mvc 构建的 REST 服务：

```
<bean class="org.springframework.web.servlet.view.json.MappingJacksonJsonView">
    <property name="contentType" value="text/plain"/>
</bean>
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">  
    <property name="messageConverters">  
        <util:list id="beanList">  
            <bean id="jsonMessageConverter" class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"/>  
        </util:list>  
    </property>  
</bean> 
```

为了避免序列化中的循环引用，我将对象注释如下：

```
class Parent implements Serializable {
    int parent_id;
    @JsonManagedReference
    private List<Child> children; 
}

class Child implements Serializable {
    int child_id;
    @JsonBackReference
    private Parent parent;
} 
```

我的 REST 服务公开了两个分别获取父级和子级的“方法”：

```
@RequestMapping(value = "/parent/{id}", method = RequestMethod.GET)
@ResponseBody public Parent getParent(@PathVariable int id , Model model) {
    Parent parent = myManager.getParent(id);
    return parent;
}

@RequestMapping(value = "/child/{id}", method = RequestMethod.GET)
@ResponseBody public Child getChild(@PathVariable int id , Model model) {
    Child child = myManager.getChild(id);
    return parent;
} 
```

第一个方法 getParent 按预期工作并返回一个包含所有子级的父级，但第二个方法 getChild 返回一个子级，该子级**没有**任何对其父级的引用。

```
json for parent: {"parent_id": 1, "children": [{"child_id":1},{"child_id":2}]}    
json for child: {"child_id":1} 
```

所以我的问题是，如何设置序列化，以便 getChild 返回对其父对象的某种引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:49:16.163

我通过升级到 Jackson 2.0 和 Spring 3.1.2（增加了对 jackson 2.0 的支持）解决了这个问题。

我现在这样注释类：

```
@JsonIdentityInfo(generator=ObjectIdGenerators.IntSequenceGenerator.class, property = "@parentId")
class Parent implements Serializable {
    int parent_id;
    private List<Child> children; 
}

@JsonIdentityInfo(generator=ObjectIdGenerators.IntSequenceGenerator.class, property = "@childId")
class Child implements Serializable {
    int child_id;
    private Parent parent;
} 
```

并更新了要使用的 servlet-context`MappingJackson2JsonView`和`MappingJackson2HttpMessageConverter`

对父或子的第一个引用包含有关对象的所有信息，而任何后续引用将仅打印 id（@childId 或 @parentId）

# c# - 我必须使用什么 c# 工具来管理小型数据库？

> ID：12747369
> 
> 赞同：0
> 
> 时间：2012-10-05T13:31:43.507
> 
> 标签：c#, database

我需要一个允许用户创建小型数据库（查找表、公式、常量）并稍后从中提取信息的工具。我从数据库中获得的信息（值）将被插入到我工作所需的 xml 文件中。数据库的大小会很小，但我现在不知道，所以我需要一种方法让用户输入它。我在 C# 中有什么简单的工具可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:34:34.457

使用[SQLite](http://www.sqlite.org/)。
SQLite 是一个实现自包含、无服务器、零配置、事务性 SQL 数据库引擎的软件库。SQLite 是世界上部署最广泛的 SQL 数据库引擎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:35:43.297

我建议查看[NoSQL](http://en.wikipedia.org/wiki/NoSQL)数据库。也许是[MongoDB之类的东西，或者可能是](http://en.wikipedia.org/wiki/MongoDB)[RavenDB](http://ravendb.net/)之类的嵌入式数据库。如果您不确定用户数据可能采用何种结构，NoSQL 可能对您有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T13:38:33.907

我想你想要某种数据库管理器？如果你这样做，那么它取决于数据库系统。

例如，如果您想管理 MySQL 数据库，您应该查看[MySQL 数据库的 .Net 连接器](http://dev.mysql.com/downloads/connector/net/) 据我所知，.Net 中支持 SQLite，因此您不需要任何外部库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T13:42:50.957

使用[`SqlServerCe`](http://msdn.microsoft.com/en-us/library/aa226134.aspx). 它是一个应用内数据库，一次只能从一个应用程序访问。

# php - AJAX 页面加载表行 | 苹果浏览器

> ID：12747371
> 
> 赞同：0
> 
> 时间：2012-10-05T13:31:47.470
> 
> 标签：php, javascript, ajax, safari

我正在开发一个小网络应用程序，用于简单地处理、存储和交换不同的数据。

当页面加载时，我使用 PHP 创建了一个 javascript 数组，并使用 window.unload 函数遍历这个数组。

数组的每个元素都包含一个联系人 ID，循环从另一个 PHP 脚本获取显示数据（例如姓名、地址）的相应行，并将其附加到包装器 div：

```
for (var i = 0; i < contIDs.length; i++) {
    var row = document.createElement("div");
    row.className = "rowDiv";
    row.innerHTML = HTTPRequest("getRow.php?id=" + contIDs[i]);

    document.getElementById("rowsWrapper").appendChild(row);
} 
```

在 FireFox 中，页面加载并按预期逐行弹出。只有 Safari 会加载页面，然后加载一段时间，然后所有行都会同时弹出到 DOM 中。

谁能想象我做错了什么，或者任何人都可以给我提示如何实现那种“加载动画”？

谢谢你，亲切的问候——朱利安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:41:36.893

据我了解，您使用的 for 循环将在每次迭代时调用一个单独的 HTTPRequest ......在某些情况下，这可能会导致我假设的挂起时间（如果我错了，请纠正我，我仍然是学生：P）。如果您正在调用 PHP 文件，为什么不使用 AJAX 调用来使用 JSON 将整个数组发送到 PHP

前任：

```
JSON.stringify(array) 
```

然后在 PHP 中解码数组

```
$array = json_decode($_POST['jsondata']); 
```

然后，您可以一次发回整个列表......除非您希望在虚构的“跳过”时间创建它，否则您始终可以使用间隔。

参考：[传递 Javascript 数组 -> PHP](https://stackoverflow.com/questions/5035547/pass-javascript-array-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:21:01.253

实际上这只是我的 HTTPRequest 函数的问题。我可以通过添加一个新参数，一个回调函数来解决这个问题。

因此，当状态码为 200 且就绪状态为 4 时，我将在我的 HTTPRequest 中调用回调。

不过谢谢

# javascript - 第三方 js 脚本可以写 cookie 吗？

> ID：12747379
> 
> 赞同：7
> 
> 时间：2012-10-05T13:32:02.400
> 
> 标签：javascript, cookies

第三方脚本是否可以将 cookie 写入用户的计算机？

例如，如果`affiliate.example.org`包括：

```
<script type="text/javascript" src="http://me.example.com/cookiemonster.js"></script> 
```

我想为附属公司提供一个脚本，希望能在他们客户的机器上写一个 cookie；理想情况下，我们希望自己控制脚​​本。然而，在尝试这个之前，我只是想我会看看它是否可能。

当然，另一种选择是我们为会员提供实际脚本，以便直接放到他们的网站上。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T13:38:14.440

是的，第三方脚本可以编写 cookie，它们看起来属于页面本身的域。

如果您使用 Google Analytics 检查任何站点的 cookie，您可以看到这一点 - 内容来自第三方 (Google)，但`_utm`前缀 cookie 将位于托管站点的域中。

要编写第三方 cookie（即 cookie 在第三方的域中），需要在从该第三方下载的标题中发送 cookie，而不是由 JS 代码编写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:34:14.847

当你测试它时发生了什么？

（是的，如果浏览器/用户允许，它将记录一个 cookie - 但 cookie 的域由加载脚本的域确定）。

# asp.net - 在小型网站中实现登录系统的最佳方法是什么

> ID：12747387
> 
> 赞同：0
> 
> 时间：2012-10-05T13:32:20.580
> 
> 标签：asp.net

在小型网站中实现登录系统的最佳方法是什么？

我查看了 ASP.NET 中的[Membership](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)，但对于我需要的东西来说看起来很复杂。

关于如何解决这个问题的任何建议？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:33:41.713

您不必完全使用会员资格。但是，您可以使用 ASP.NET Forms 身份验证，只需根据数据库、文件或其他任何内容对用户进行身份验证。

微软在这里提供了一个例子 - [http://support.microsoft.com/kb/301240](http://support.microsoft.com/kb/301240)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:37:53.627

您应该使用 asp.net 成员资格和表单身份验证签出示例程序。

如果您想拥有自己的实现，请创建一个用户表来存储用户 ID/名称和密码（加密-加盐）。当用户尝试登录时，再次检查此数据库并查看用户提供的用户凭据是否存在记录。如果是，请在 Session 变量中设置他的相关凭据（以供将来在他的用户会话中使用）并将他发送到相关页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T13:38:33.550

我建议您不要构建自己的身份验证/成员资格框架，除非您有充分的理由这样做。

如果成员资格框架不能提供您需要的一切，它确实允许扩展。

我认为在寻找替代方案之前了解会员提供者是值得的，因为它非常简单。但是，根据您的要求，您可以使用[DotNetOpenAuth](http://www.dotnetopenauth.net/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T15:02:42.323

有多小（用户）？@Lloyd 的答案的一个更简单的选择（您应该根据“小”的意思考虑这个选项）：

在 web.config 本身中定义它们：

```
<authentication mode="Forms">
  <forms name=".myWebSite">
    <credentials passwordFormat="MD5">
      <user name="user1" password="the_MD5Hash_of_user1_password"/>
      <user name="user2" password="the_MD5Hash_of_user2_password"/>
    </credentials>
  </forms>
</authentication> 
```

您可以选择`passwordFormat`=`CLEAR`或`SHA1`并分别提供明文或 Sha1 哈希`password`值。

# php - 循环 POST 字段并设置为变量 PHP

> ID：12747392
> 
> 赞同：0
> 
> 时间：2012-10-05T13:32:28.530
> 
> 标签：php, mysql, loops

我有一些通过网络表单提交的帖子字段：

```
$_POST['first_name'];
$_POST['last_name'];
$_POST['house_number'];
$_POST['postcode']; 
```

ETC

我想为每一个添加以下代码结构：

```
if (isset($_POST['first_name'])) {
    $first_name = mysql_prep($_POST['first_name']);
} 
```

我如何使用循环来实现这一点，以避免重复自己多次？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T13:34:18.607

您可以使用 PHP 的[`extract()`](http://php.net/extract)函数为您执行此操作。

```
extract($_POST);
// you now have a variable for every key in $_POST 
```

如果您只想要某个键列表，而不是完整数组，您还可以使用[`variable-variables`](http://php.net/manual/en/language.variables.variable.php)（带有两个前导的变量`$`，例如`$$var`）：

```
$keysToExtract = array('first_name', 'last_name');
foreach ($keysToExtract as $key) {
    $$key = $_POST[$key];
}
// you now have $first_name and $last_name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T13:35:10.790

使用[array_map() PHP 函数](http://php.net/manual/en/function.array-map.php)对所有数组元素应用一些操作。

之后，`extract($_POST)`如果您想接收名称如`$_POST`数组键的变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T13:35:57.420

尝试使用 foreach：

```
foreach( $_POST as $key => $value ) {
    $$key = mysql_prep( $value );
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T13:37:19.913

怎么样

```
foreach ($_POST as $key => $value){
$$key = mysql_prep($value);    
} 
```

$$ 正在设置一个变量变量

# xml - 为什么 Clearcase Explorer 不能区分我的 XML 文件？

> ID：12747393
> 
> 赞同：10
> 
> 时间：2012-10-05T13:32:29.587
> 
> 标签：xml, clearcase

我在 Clearcase 中有一种情况，我右键单击以查找结帐，然后右键单击任何 xml。当我选择“与以前的版本比较”时，它只会弹出一个“XML Diff Merge - Comparing”窗口，该窗口在我的任务栏中保持最小化。

奇怪的是，Java 文件没有这个问题，只有 XML 文件。有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-27T11:12:41.803

我们遇到了同样的问题。如何修复它：打开`regedit.exe`并删除整个分支 `HKEY_CURRENT_USER\Software\Atria\ClearCase\CurrentVersion\XML Diff Merge`。

重启`ClearCase Explorer`。

先前删除的记录`key/branch`将使用默认值重新创建。

然后合并窗口再次可见。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T13:52:36.150

XML 文件由不同的[类型管理器管理](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/type_manager.htm)。这就解释了文本文件 ( ) 和 xml
文件之间的区别。`.java`

根据大小、结构或编码，ClearCase xml diff 工具可能会挂起（或崩溃）

如“[任何方式使用带有 cleartool/clearcase 的自定义 diff 工具？](https://stackoverflow.com/questions/375398/any-way-to-use-a-custom-diff-tool-with-cleartool-clearcase/375437#375437) ”中详述，xml 文件 ( [`xmldiffmrg`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/xmldiffmrg.htm)) 的 diff 工具已声明（并且[可以在 中更改](http://www-01.ibm.com/support/docview.wss?uid=swg21256807)）“ `C:\program files\rational\ClearCase\lib\mgrs\map`”

```
text_file_delta   compare          ..\..\bin\cleardiff.exe
text_file_delta   xcompare         ..\..\bin\cleardiffmrg.exe
_xml2             compare          ..\..\bin\xmldiff.exe
_xml2             xcompare         ..\..\bin\xmldiffmrg.exe 
```

在您的情况下，我怀疑差异有效，窗口打开，*但*在屏幕之外：

![清除差异](../Images/854ca831ee963ca2b4024d219b240374.png)

检查您的注册表`HKEY_CURRENT_USER\Software\Atria\ClearCase\CurrentVersion\`：您可以找到一个专门用于 cleardiff 的部分，其中包含您可以重置的屏幕坐标。

* * *

更简单地说，[OP Phil Cote](https://stackoverflow.com/users/547350/phil-cote) [评论](https://stackoverflow.com/questions/12747393/why-wont-clearcase-explorer-diff-my-xml-files/12747786#comment18036710_12747786)：

> 你是对的，它出现在窗外。
> 注册表被证明是不必要的。
> **我做了一个右键单击“移动”，使十字箭头出现。然后我按了一个箭头键，窗口就在我的鼠标光标处弹出**。
> 我猜这是迄今为止我从未知道的那些愚蠢的初学者 Windows 技巧之一。

您可以在“ [Windows 7 右键单击​​菜单中的 ALT-SPACE 等工具栏？](https://superuser.com/questions/360169/windows-7-rightclick-menu-from-toolbar-like-alt-space) ”中详细了解该过程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-03T22:57:07.970

只是想补充一点，我必须在任务栏中Shift-右键单击“XML Diff”任务才能移动/最大化窗口。单独右键单击不提供这些选项。

# c# - 获取通用列表的类型

> ID：12747397
> 
> 赞同：0
> 
> 时间：2012-10-05T13:32:54.723
> 
> 标签：c#, generics

在下面列出的代码中，我需要确定 TSource 的类型。解析的参数可以是，例如 IList，或只有 Car 等。在方法 Model.Map<> 中，我需要解析泛型类型的类型。当解析的参数是单个对象（汽车、船...）时，一切正常。问题是何时解析集合。因此，我需要涵盖参数为集合的情况。

```
public class Convert<TSource, TDestination>
{
    public static TDestination ToModel(TSource source)
    {
        Model.Map<TSource, TDestination>();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T13:35:09.997

您可以尝试使用 - 基于`GetGenericArguments`

```
var type = source.GetType().GetGenericArguments()[0]; 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/system.type.getgenericarguments.aspx](http://msdn.microsoft.com/fr-fr/library/system.type.getgenericarguments.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:35:30.793

尝试[System.Type.GetGenericArguments](http://msdn.microsoft.com/en-us/library/system.type.getgenericarguments.aspx)

# php - Facebook opengraph 未在用户时间轴中发布

> ID：12747400
> 
> 赞同：1
> 
> 时间：2012-10-05T13:32:58.423
> 
> 标签：php, facebook, facebook-opengraph

使用我正在尝试发布的开放图`username shared an event on Appname`。在我的 Facebook 帐户墙上。

它已成功发布在股票行情和活动中，但未在时间轴中发布。

以下是我用于共享目的的 php 代码

```
$params = array('Objectname'=>'object_url');
$facebook->api( '/'.$fb_user_id.'/AppNamespace:Actiontypename','post', $params ); 
```

使用开放图在时间线上添加什么共享

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:20:04.137

Facebook 使用所谓的“GraphRank”来确定是否在用户的时间线上显示已发布的操作或聚合。

计算如下：

> GraphRank = 亲和力 * 权重 * 交互次数 * 时间

*   亲和度（分数）：这是查看用户和操作创建者之间的关系。

*   权重：如果两个用户经常相互交互，则打开图表中的相应操作的评分高于没有相同兴趣且在 Facebook 上没有密切联系的用户。

*   交互：用户与应用程序交互的频率以及朋友对社交渠道中的活动的反应如何（如果没有人点击已发布的操作，则对 GraphRank 不利）。

*   时间：如果一个应用程序被不规律地使用或只使用一次，从长远来看，动作会受到较少的关注，并且在时间轴上的呈现也会不那么显眼。

见这篇文章： http: [//www.insidefacebook.com/2011/12/27/edgerank-and-graph-rank-defined/](http://www.insidefacebook.com/2011/12/27/edgerank-and-graph-rank-defined/)

为了在时间轴上查看您发布的操作，只需尝试与您的应用程序进行密集交互，即通过发布更多故事（和一些测试用户的故事一样）。

# ios5 - AVQueuePlayer 的键值观察器

> ID：12747407
> 
> 赞同：0
> 
> 时间：2012-10-05T13:33:31.680
> 
> 标签：ios5, avplayer, avqueueplayer

我在 AVQueuePlayer 中播放音频，并在 UIImage 上通过 MPMediaPickerController 播放相关专辑插图。我用来自 MPMediaPickerController 的 URL 填充数组，然后创建提供 AVQueuePlayer 的 AVPlayerItems（带有 URL 的初始化）数组。当队列中的下一首歌曲开始时，我希望专辑封面相应地更改。鉴于我目前的设置，是否可以接收 AVPlayerItemDidPlayToEndTimeNotification 来实现这个目标？在 Apple 文档和网络搜索之间，我没有找到任何可以确认能够在队列中获取歌曲结束通知的内容。这就是症结所在。

非常感谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T11:33:50.717

将[Key-Value Observing](https://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)与*NSKeyValueObservingOptionNew*一起使用，并监听 AVQueuePlayer 的*currentItem*属性。每当它发生变化时，您都会收到通知，您将能够提取 AVPlayerItem 并通过它的*资产*属性识别它。

# sql - SSIS 中一个源文件的多级父子记录

> ID：12747409
> 
> 赞同：0
> 
> 时间：2012-10-05T13:33:40.270
> 
> 标签：sql, sql-server, ssis

我有一个包含多级父子关系记录的源文件。例子：

```
ID  ParentID    Name
A1  NULL        Sam
B1  NULL        Sri
A2  A1      Nick
B2  B1      Sree
A3  A2      Nish
A4  A3      Raj 
```

解释：

```
A1 --> A2 --> A3 --> A4

A1 --> Parent of A2
A2 -->Parent of A3
A3 --> Parent of A4

B1-->B2

B1 --> Parent of B2 
```

现在我必须将这些记录加载到目标表中，如下所示的标识列。

```
ID  ParentID     Name
1   NULL        Sam
2   NULL        Sri
3   1       Nick
4   2       Sree
5   3       Nish
6   5       Raj 
```

现在的事情是，没有固定的水平（这种关系有多深）。

```
-   Is there any way to load in one go all records ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:33:14.127

您可以向目标表添加其他列吗？

如果是这样：

1.  添加两列`SourceId`并`SourceParentId`做你的`Destination`表
2.  在数据流存储`NULL`在目标`ParentID`和`ID`和`ParentID`源中`SourceId`，`SourceParentId`分别在和。在此步骤之后，您的目标表应类似于：

    ```
    ID ParentID 名称 SourceId SourceParentId
    1 空 山姆 A1 空
    2 NULL 斯里 B1 NULL
    3 NULL 尼克 A2 A1
    4 NULL Sree A2 A1
    5 NULL 尼什 A3 A2
    6 空拉吉 A4 A3

    ```

3.  在`Execute SQL Task`目标上执行以下 SQL：

    ```
     update dest set [ParentID] = src.ID
    from [dbo].[Destination] dest inner join [dbo].[Destination] src 
    on dest.[SourceParentId] = src.[SourceId] 
    ```

    这将更新您的`ParentID`.

# windows-8 - 日期时间格式化程序

> ID：12747413
> 
> 赞同：2
> 
> 时间：2012-10-05T13:33:58.197
> 
> 标签：windows-8, globalization, winjs

如果我运行以下命令：

```
var newdate = new Date();
var dt = new Windows.Globalization.DateTimeFormatting.DateTimeFormatter("shortdate");
var date = dt.format(newdate); 
```

我得到了类似 2012 年 10 月 14 日这样的东西，这很好，但是如果我将它放入 WinJS.xhr 的 url 中，它会将其更改为 ?10?/?4?/?2012

服务调用示例代码

```
var urlAddress ="http://www.communitymegaphone.com/ws/CMEventDS.svc/GetEventsByDistance?Lat='" + mapCenter.latitude + "'&Lon='" + mapCenter.longitude + "'&Dist=" + eventsByDistance + "&$filter=(starttime%20gt%20datetime'" + date  + "')&$orderby=starttime%20asc&$format=json";

WinJS.xhr({
        type: "GET",
        url: urlAddress
    }).then(processSuccess, processError); 
```

如果我使用普通的旧 javascript datetime 一切正常。

我错过了某个地方的设置吗？我还尝试将 url 的编码更改为不同的格式，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:52:03.817

DateTimeFormatter 专门面向用户。创建 url 时，您不再是面向用户的，而是面向后端的。您需要为此使用标准日期格式（如 iso 8601），而不是根据用户语言进行调整的日期格式。问号标识的字符是从左到右和从右到左的标记，确保字符串即使在嵌入的内容中也能正确显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:14:47.397

当您构建这样的 URL 时，需要将日期表示为字符串。

我不确定为什么格式化程序没有返回正确的字符串，但这样的事情有时表明输入和输出之间的编码不匹配。

我会说坚持使用 JavaScript datetime 可能是这里的方法，除非您出于某种特定原因确实需要 DateTimeFormatter。

# python - pyPandas：默认列名

> ID：12747417
> 
> 赞同：3
> 
> 时间：2012-10-05T13:34:16.767
> 
> 标签：python, dataframe, pandas

如果读取具有默认列名的文件，之后如何调用它们？ `df[1]`似乎几乎所有时间都在工作。但是，它在编写如下条件时会抱怨类型：

```
In [60]: cond = ((df[1] != node) & (df[2] != deco))
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
/home/ferreirafm/work/colab/SNP/rawdata/<ipython-input-60-513a433bfeb5> in <module>()
----> 1 cond = ((df[1] != node) & (df[2] != deco))

/usr/lib64/python2.7/site-packages/pandas/core/series.pyc in wrapper(self, other)
140             if np.isscalar(res):
141                 raise TypeError('Could not compare %s type with Series'
--> 142                                 % type(other))
143             return Series(na_op(values, other),
144                           index=self.index, name=self.name)

TypeError: Could not compare <type 'str'> type with Series 
```

按默认名称处理数据框列更适合我的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:08:53.253

我是pandas master，这里读取文件后的默认列名肯定不是0,1,2,..注意可以使用df.icol()按位置选择列。这样，如果已设置列名或使用默认列名，则没有依赖性。

```
In [93]: data = """\
1,2,3
4,5,6
"""

In [94]: df = pd.read_csv(StringIO(data), header=None)

In [95]: df
Out[95]:
   X0  X1  X2
0   1   2   3
1   4   5   6

In [96]: df.icol(0)
Out[96]:
0    1
1    4
Name: X0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T13:04:14.360

您似乎将一系列标量值与字符串进行比较：

```
In [73]: node = 'a'

In [74]: deco = 'b'

In [75]: data = [(10, 'a', 1), (11, 'b', 2), (12, 'c', 3)]

In [76]: df = pd.DataFrame(data)

In [77]: df
Out[77]: 
    0  1  2
0  10  a  1
1  11  b  2
2  12  c  3

In [78]: cond = ((df[1] != node) & (df[2] != deco))
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-78-0afad3702859> in <module>()
----> 1 cond = ((df[1] != node) & (df[2] != deco))

/home/.../python2.7/site-packages/pandas/core/series.pyc in wrapper(self, other)
    140             if np.isscalar(res):
    141                 raise TypeError('Could not compare %s type with Series'
--> 142                                 % type(other))
    143             return Series(na_op(values, other),
    144                           index=self.index, name=self.name)

TypeError: Could not compare <type 'str'> type with Series 
```

请注意，pandas 可以处理一系列字符串和数字，但比较字符串和数字并没有真正意义，因此错误消息很有用。然而 pandas 可能应该给出更详细的错误信息。

如果您对第 2 列的条件是一个数字，它将起作用：

```
In [79]: deco = 3

In [80]: cond = ((df[1] != node) & (df[2] != deco))

In [81]: df[cond]
Out[81]: 
    0  1  2
1  11  b  2 
```

**一些评论：**

也许你的一些困惑是由于熊猫的设计决定：

如果您从文件中读取数据`read_csv`，则结果数据框的默认列名设置为`X.1`（`X.N`对于版本 >= 0.9 为`X1`to `XN`），它们是字符串。

`0`如果您从现有数组或列表或列名默认为`N`并且是整数的东西创建数据框。

```
In [23]: df = pd.read_csv(StringIO(data), header=None)

In [24]: df.columns
Out[24]: Index([X.1, X.2, X.3], dtype=object)

In [25]: df.columns[0]
Out[25]: 'X.1'

In [26]: type(df.columns[0])
Out[26]: str

In [27]: df = pd.DataFrame(randn(2,3))

In [30]: df.columns
Out[30]: Int64Index([0, 1, 2])

In [31]: df.columns[0]
Out[31]: 0

In [32]: type(df.columns[0])
Out[32]: numpy.int64 
```

我开了[一张票](https://github.com/pydata/pandas/issues/2034)来讨论这个问题。

所以你的

```
In [60]: cond = ((df[1] != node) & (df[2] != deco)) 
```

如果 and 的类型与`df[1]`and`df[2]`的类型相同，则应该适用于从数组或其他东西创建的数据框。`node``deco`

如果你读过的文件`read_csv`比

```
In [60]: cond = ((df['X.2'] != node) & (df['X.3'] != deco)) 
```

应该适用于<0.9的版本，而应该是

```
In [60]: cond = ((df['X2'] != node) & (df['X3'] != deco)) 
```

版本 >= 0.9。

# amazon-s3 - Google 不会在 s3 上读取我的 robots.txt

> ID：12747422
> 
> 赞同：3
> 
> 时间：2012-10-05T13:34:23.517
> 
> 标签：amazon-s3, web-crawler, robots.txt, googlebot

由于谷歌正在抓取我们的静态内容（存储在 s3 上），我们在（存储桶的）根目录中创建了一个 robots.txt .. 如下

```
User-agent: *
Disallow: / 
```

现在，因为我们想从谷歌搜索中删除现有内容..我们在谷歌网站管理员 a/c 中添加了存储桶..并请求删除目录

现在的问题是 google 不会识别或读取 robots.txt（这需要将来阻止 google block）。我们在网站管理员工具中收到此消息

* * *

**此站点不位于域的顶层。robots.txt 文件仅在位于最高级别目录时才有效，并且适用于域内的所有目录。适用于您网站（如果存在）的 robots.txt 文件位于[http://s3.amazonaws.com/robots.txt](http://s3.amazonaws.com/robots.txt)。此页面提供有关该文件的信息。**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-06T02:12:10.427

Which URL did you give Google for your bucket? You need to use the *DNS-style* `{bucket}.s3.amazonaws.com`, instead of the *path-style* `s3.amazonaws.com/{bucket}`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-05T16:52:35.313

当我尝试查看您的 robots.txt 时收到拒绝访问错误，您确定 Google 可以看到您的 robots 文件吗？

此外，您可以在 Google上实时[查看您的 robots.txt，并准确确认 Google 在查看您的 robots.txt 时所看到的内容（如果他们甚至可以看到的话）。](http://www.ghacks.net/2007/05/20/check-your-robotstxt-at-google/)

# c# - 将委托作为方法指针传递

> ID：12747424
> 
> 赞同：1
> 
> 时间：2012-10-05T13:34:27.000
> 
> 标签：c#, c++-cli

我正在尝试将委托传递给 c++ 方法代码：

```
#pragma unmanaged
void login(char *uname, void (*cb)() )
{
  if ( strcmp(uname, "test")==0)
  {
      printf("Correct!\n");
      cb();
  }
  else
  {
      printf("False\n");
  }
}
#pragma managed
public ref class log
{
    public: delegate void successdelg();
    public: static void logme(String ^s, successdelg ^success)
    {
        login( (char*)(void*)Marshal::StringToHGlobalAnsi(s), success );
    }
}; 
```

但我收到此错误：“错误 C2664：'login'：无法将参数 2 从 'log::successdelg ^' 转换为 'void (__cdecl *)(void)'”

通常我可以通过将没有任何委托的方法传递给我的 c++ 函数来跳过这个错误，但我将它用作引用我的 c# 项目的库，它将方法从我的 c# 应用程序传递给 c++ dll。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:58:49.847

使用 Marshal.GetFunctionPointerForDelegate 方法。使用回调函数时，始终保持传递给此方法的委托实例处于活动状态，因为此函数调用不会为此委托添加引用计数器。

# c++ - 如何使用 mouse_event 在 Windows 登录屏幕中移动鼠标光标？

> ID：12747430
> 
> 赞同：0
> 
> 时间：2012-10-05T13:34:50.620
> 
> 标签：c++, winapi, vb6

有同样的问题：

[SetCursorPos 和 GetCursorPos 在登录屏幕上不起作用？](https://stackoverflow.com/questions/1964149/setcursorpos-and-getcursorpos-not-working-at-login-screen)

已解决的答案是

> 替代解决方案：可以（但非常棘手）使用 mouse_event（在登录屏幕上工作）而不是 SetCursorPos。我现在没有时间发布代码，但如果被问到我可能会更新这个答案......

那么，有人知道如何`mouse_event`在 Windows 登录屏幕中使用鼠标光标移动吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:45:15.037

你可以这样做：

```
mouse_event(MOUSEEVENTF_MOVE | MOUSEEVENTF_ABSOLUTE, 20000, 20000, 0, 0); 
```

注意 0 到 65535 范围内的 dx 和 dy 参数，而不是实际的屏幕坐标。我想如果你愿意，你可以转换它们。`MOUSEEVENTF_ABSOLUTE`此外，如果您想相对于它的最后一个位置移动指针，您可以省略标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:40:33.400

我发现可以使用 WinIo 发送鼠标和键盘事件，它是驱动程序级别的，所以可以在 windows 登录屏幕中使用。

# java - Selenium 2 - 如何在隐式等待时检查元素是否不存在？

> ID：12747444
> 
> 赞同：6
> 
> 时间：2012-10-05T13:35:37.683
> 
> 标签：java, selenium-webdriver

如果您使用以下代码检查缺失的元素：

```
// ...
driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
try {
    driver.findElement(By.cssSelector("td.name"));
} catch (NoSuchElementException e) {

    // here you go, element not found

} 
```

你得到了正确的结果，但运行时间总是 30 秒，因为`findElement`方法阻塞了隐式等待。

有没有办法避免这种行为，同时保持隐式等待？

**`<EDIT>`**测试将由非开发人员通过 Selenium IDE 生成，因此我需要一个使他们的工作尽可能简单的解决方案（即保持隐式等待！）。**`</EDIT>`**

谢谢，

马可

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T10:17:12.130

即使元素不再存在，上述方法也会等待提供的时间量。我编写了自己的方法来等待元素可见且不存在。他们为我工作。他们来了：

```
public void waitUntilElementExists(By by, int waitSeconds,
        int noOfRetries) {
    getDriver().manage().timeouts().implicitlyWait(waitSeconds, TimeUnit.SECONDS);
    boolean foundElement = false;
    for (int i = 0; i < noOfRetries; i++)
        try {
            getDriver().findElement(by);
            foundElement = true;
            break;
        } catch (Exception e) {
        }
    assertTrue("The searched element was not found after " + noOfRetries * waitSeconds + " seconds!", foundElement);
}

public void waitUntilElementDoesntExist(By by, int waitSeconds,
        int noOfRetries) {
    getDriver().manage().timeouts().implicitlyWait(waitSeconds, TimeUnit.SECONDS);
    boolean elementDisappeared = false;
    for (int i = 0; i < noOfRetries; i++)
        try {
            getDriver().findElement(by);
            waitABit(1000 * waitSeconds);
        } catch (Exception e) {
            elementDisappeared = true;
            break;
        }
    assertTrue("The searched element did not disappear after " + noOfRetries * waitSeconds + " seconds!", elementDisappeared);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T03:59:29.443

我没有设置超时，而是使用 2.25 中引入的 fluentWait。

```
public void waitForElement(WebDriver driver, final String xpath)
{
 //Set up fluentWait to wait for 35 seconds polling every 1
 Wait<WebDriver> fluentWait = new FluentWait<WebDriver>(driver)
     .withTimeout(35, TimeUnit.SECONDS)
     .pollingEvery(1, TimeUnit.SECONDS)
     .ignoring(NoSuchElementException.class);

 WebElement element;

 //Look for element, if not found start fluentWait
 try
 {
     element = driver.findElement(By.xpath(xpath));
 }
 catch (WebDriverException e)
 {
     logger.info("[getElementByXpath] Element not initially found. Starting fluentWait ["+xpath+"]");

     try
     {
         element = fluentWait.until(new Function<WebDriver, WebElement>() {
             public WebElement apply(WebDriver d) {

                 return d.findElement(By.xpath(xpath));
             }
         });
     }
     catch (WebDriverException f)
     {
         logger.info("[getElementByXpath] FluentWait findElement threw exception:\n\n" + f +"\n\n");

         throw new WebDriverException("Unable to find element ["+xpath+"]");
     }
 }

 //Once we've found the element wait for element to become visible
 fluentWait.until(ExpectedConditions.visibilityOf(element));
} 
```

如果您要将您的方法转换为类似的方法，您将能够删除`driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);`允许您立即“不”查找元素的选项。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T14:30:06.223

您也许可以使用 xpath 选择器来做到这一点。在它之前找到你知道应该在那里的元素，然后使用“following-sibling”来获取下一个元素。就像是：

```
//td.previous/following-sibling::td 
```

然后检查它是否没有返回“名称”。当然，这只有在有另一个“td”元素的情况下才有效。

就我个人而言，我很想放弃隐式等待，只在需要时使用等待。

```
private WebElement cssWait( final String css )
{
    return new WebDriverWait( driver, 30 ).until( new ExpectedCondition< WebElement >()
    {
        @Override
        public WebElement apply( WebDriver d )
        {
            return d.findElement( By.cssSelector( css ) );
        }
    } );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-06T20:40:11.280

你不能。 `implicit`等待时间将优先于显式等待。如果您的`implicit`时间是 30 秒，那么您运行的任何查找将至少需要 30 秒，以防元素不存在。您可以做的是操纵`implicit`框架上的等待时间，但不确定如何与 IDE 配合使用，我从未使用过它。

我创建了一个返回`boolean`结果的自定义方法。输入是**WebDriver (CSS, xpath, etc)**支持的任何**By 定位器**。或者，您可以根据需要对其进行修改。

 **它有助于使我的代码更简洁、更快速。我希望它也能帮助其他人。

默认`pooling`值为 500 毫，但可以在`wait`对象上更改。

```
public boolean isElementNotPresent(final By locator) {
        boolean result = false;
        // use your custom timeout here
        long timeout = ConfigurationProvider.getWebDriverWaitTimeout();

        // log4j used
        msg = "isElementNotPresent: " + locator;
        LOG.info(msg);

        Wait<WebDriver> wait = new FluentWait<WebDriver>(
                getDriver()).withTimeout(timeout, TimeUnit.SECONDS);

        try {
            result = wait.until(new Function<WebDriver, Boolean>() {
                @Override
                public Boolean apply(WebDriver driver) {
                    return driver.findElements(locator).size() == 0;
                }
            });
        } catch (TimeoutException e) {
            msg = String.format("Element remained visible after %.2f seconds",
            ((float) timeout / 1000));
            LOG.debug(msg);
        } catch (Exception e) {
            msg = "Exception at isElementNotPresent()\n" + e.getMessage();
            // I use jUnit to fail my test
            Assert.fail(msg);
        }

        return result;
    }; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-24T00:24:25.050

您必须暂时更新 ImplicitWait，并在完成后将其重置。

这是我们处理这种情况的方式 - 保存当前默认值，暂时更新 ImplicitWait，然后再改回默认值。
这是基于 Mozilla 的建议，这就是他们如何处理您期望某些东西*不*存在的情况： [https ://blog.mozilla.org/webqa/2012/07/12/webdrivers-implicit-wait-and-删除元素/](https://blog.mozilla.org/webqa/2012/07/12/webdrivers-implicit-wait-and-deleting-elements/)

```
public bool ElementExists(By by, int waitMilliseconds)
{
        var defaultWebDriverTimeout = 30000;// Get default timeout that you're using
        WebDriver.Manage().Timeouts().ImplicitlyWait(TimeSpan.FromMilliseconds(waitMilliseconds));

        try
        {
            WebDriver.FindElement(by); //Note could be FindElements instead, but this is quicker
            return true;
        }
        catch (NoSuchElementException)
        {
            return false;
        }
        finally
        {
            WebDriver.Manage().Timeouts().ImplicitlyWait(TimeSpan.FromMilliseconds(defaultWebDriverTimeout));
        }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-30T09:45:47.280

你需要一个这样的函数，它使用`findElements`，而不是`findElement`：

```
public static ExpectedCondition<Boolean> elementCountIs(final By sel, final int count) {
    return new ExpectedCondition<Boolean>() {
        public Boolean apply(WebDriver driver) {
            return driver.findElements(sel).size() == count;
        }
    };
} 
```

`FluentWait`然后您可以按照 Falkenfighter 的描述设置一个对象，并且：

```
fluentWait.until(elementCountIs(By.cssSelector("td.name"), 0); 
```**

# python - Python按顺序打印数组

> ID：12747453
> 
> 赞同：0
> 
> 时间：2012-10-05T13:36:15.170
> 
> 标签：python

从以下数组中，我如何获得所述的输出

```
arr=["harry","sally","tom"]

harry
harry
harry
sally
sally
tom

sally
sally
sally
tom
tom
harry

tom
tom
tom
harry
harry
sally 
```

我试过什么

```
>>> for i in range(len(arr)):
...     print arr[i] * 3
...     print arr[i+1]*2
...     print arr[i-1] 
... 

Traceback (most recent call last):
File "<stdin>", line 3, in <module>
IndexError: list index out of range 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:38:52.317

使用模运算符环绕到列表的开头，或者将列表加倍但使用原始长度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T13:44:10.910

```
>>> for i in range(len(arr)):
        print arr[i % len(arr)] * 3
        print arr[(i+1) % len(arr)] * 2
        print arr[(i+2) % len(arr)] * 1 
```

# google-app-engine - 带有ajax的谷歌应用引擎中的自动完成文本框

> ID：12747458
> 
> 赞同：0
> 
> 时间：2012-10-05T13:36:23.020
> 
> 标签：google-app-engine

您好，我正在使用 goolge 应用程序引擎中的 ajax，我正在尝试制作自动完成文本框。

```
 HTML CODE
    <input id="search_form">

    Ajax function is ,
    $('#search_form').autocomplete(/search)

    And class search is,

    class search(webapp2.RequestHandler):
    def get(self):
        data = ['A','B','C', 'D']
        data = json.dumps(data)         
        self.response.out.write(data) 
```

我不熟悉ajax，这段代码有什么问题？这段代码有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T09:29:00.563

我认为你需要

```
def get(self):
  data = ['A','B','C', 'D']
  data = json.dumps(data)         
  self.response.headers.add_header('content-type', 'application/json', charset='utf-8')
  return self.response.out.write(data) 
```

# android - 从 RSS 提要中获取图像

> ID：12747460
> 
> 赞同：0
> 
> 时间：2012-10-05T13:36:32.917
> 
> 标签：android, xml, rss

我正在尝试解析这个 RSS 提要，现在我可以得到一切，但我唯一的问题是图像。

如何在另一个 XML 标记中提取图像？

```
 <?xml version="1.0" encoding="utf-8"?>
  <!-- generator="Joomla! 1.5 - Open Source Content Management" -->
  <?xml-stylesheet href="/plugins/system/plg_jausersetting/style.css" type="text/css"?>
  <?xml-stylesheet href="/media/system/css/modal.css" type="text/css"?>
  <?xml-stylesheet href="/components/com_jcomments/tpl/default/style.css?v=12" type="text/css"?>
  <rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
<channel>
    <title>Accueil</title>
    <description>Annuaire, guide de voyage et magazine culturel en Tunisie : Maisons d'hôtes, hôtels de charmes, gites, restaurants, boutiques, idées cadeaux, musées, monuments, marinas, golf, thalasso ou Spa? Trouvez toutes les bonnes adresses, itinéraires conseillées, cityguide ainsi que l’agenda culturel sur mille-et-une-tunisie.com</description>
    <link>http://www.mille-et-une-tunisie.com/component/content/frontpage.html</link>
    <lastBuildDate>Fri, 05 Oct 2012 10:47:59 +0000</lastBuildDate>
    <generator>Joomla! 1.5 - Open Source Content Management</generator>
    <language>fr-fr</language>
    <item>
        <title>Sehl Zargouni: &quot;Le contrôle est effectué par l’ONTT mais dans les prochains mois, il se fera conjointement avec notre association &quot; </title>
        <link>http://www.mille-et-une-tunisie.com/accueil/rencontres/3761-sehl-zargouni-qle-controle-est-effectue-par-lontt-mais-dans-les-prochains-mois-il-se-fera-conjointement-avec-notre-association-q-.html</link>
        <guid>http://www.mille-et-une-tunisie.com/accueil/rencontres/3761-sehl-zargouni-qle-controle-est-effectue-par-lontt-mais-dans-les-prochains-mois-il-se-fera-conjointement-avec-notre-association-q-.html</guid>
        <description><![CDATA[<p style="text-align: justify;"><img src="http://www.mille-et-une-tunisie.com/images/stories/Mille-et-une-Tunisie/1001-Accueil/Rencontres/LogoEdhiafa.jpg" border="0" width="541" height="400" style="float: left;" />Il y a un peu moins d’un an l’association Edhiafa réunissant les  propriétaires de maisons d’hôtes, gîtes et hôtel de charme du pays  recevait son agrément officiel de création. Son président Sehl Zargouni  nous parle de cette première année d’existence</p>
  ]]>
</channel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-15T07:31:31.933

好的 - 我也有这个问题！

试试这个 ：

首先制作一个字符串变量，如：

```
 String cdata =""; 
```

然后创建这个：

```
 public final String getElementValue2( Node elem ) {  
 Node child;  
 if( elem != null){  
     if (elem.hasChildNodes()){  
         for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){   
             if(child.getNodeType() == Node.CDATA_SECTION_NODE){ 
                 CDATASection cdata = (CDATASection)child;
                 cdata =cdata.getData().toString();
             }  
         }  
     }  
 } 
```

之后使用此功能：

```
 public String getValue2(Element item, String str)
 {  
         //NodeList n = item.getElementsByTagName(str);  
         //String ses = this.getElementValue1(n.item(0));  
         //String mim =ses.replaceAll("(?s)\\<.*?\\>", "\n");  
         return cda.replaceAll("<p>","").replaceAll("</p>",""); 
 } 
```

# numpy - 将数组从高分辨率重新采样到低分辨率

> ID：12747464
> 
> 赞同：1
> 
> 时间：2012-10-05T13:36:51.873
> 
> 标签：numpy, matplotlib, python-2.7, scipy

我有一个问题，我无法使用 scipy 正确解决。我想重新采样和排列，以便降低分辨率（从高到低）但是，这就是问题所在，新的阵列形状不是旧阵列形状的一个因素。例如：

```
 lat = scipy.mgrid[-14.0:14+0.25:0.25]
 lon = scipy.mgrid[100.0:300+0.25:0.25]
 z = rand((lat.shape[0],lon.shape[0]))
 new_res = 0.70135 
```

现在我有一个空间分辨率为 0.25 的数组 z，我想将其减少到 new_res。任何想法如何使用 scipy 或手动完成？更复杂的情况是数组 z 中经常存在不良数据，即 z[0.20] 可能为 nan。

感谢您的帮助和想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:46:29.143

一个快速的方法是使用[`scipy.ndimage.interpolation.map_coordinates`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.interpolation.map_coordinates.html#scipy.ndimage.interpolation.map_coordinates).

```
lat = scipy.mgrid[-14.0:14+0.25:0.25]
lon = scipy.mgrid[100.0:300+0.25:0.25]
z = tile(lon,(len(lat),1))
new_res = 0.70135

new_lat = scipy.mgrid[-14.0:14+0.25:new_res]
new_lon = scipy.mgrid[100.0:300+0.25:new_res]
X,Y = meshgrid(((new_lat-np.min(lat))/(np.max(lat)-np.min(lat)))*lat.shape[0],((new_lon-np.min(lon))/(np.max(lon)-np.min(lon)))*lon.shape[0])
pts = np.asarray(zip(X.ravel(),Y.ravel())).T
new_z = scipy.ndimage.interpolation.map_coordinates(z,pts).reshape(len(new_lon),len(new_lat)).T 
```

调用中的所有混乱`meshgrid`都是转换实际单位 -> 数组单位。我不确定这将如何处理`NaN`，我怀疑您必须先清理数据或`NaN`在重新采样时接受增长区域。

本[教程](http://docs.scipy.org/doc/scipy/reference/tutorial/interpolate.html)也可能有用。

# jquery - 我可以结合这些事件吗？

> ID：12747465
> 
> 赞同：0
> 
> 时间：2012-10-05T13:36:52.120
> 
> 标签：jquery, jquery-ui

我基本上有2个事件。顶部从 jQuery 自动完成中选择选择并将其输出到 div *searchresultdata*。第二个从 #*search_input* 获取内容并将其输出到*searchresultdata*

```
var devices = [
    "ActionScript",
    "AppleScript",
    "Asp",
    "BASIC",
    "C",
    "C++",
    "Clojure",
    "COBOL",
    "ColdFusion",
    "Erlang",
    "Fortran",
    "Groovy",
    "Haskell",
    "Java",
    "JavaScript",
    "Lisp",
    "Perl",
    "PHP",
    "Python",
    "Ruby",
    "Scala",
    "Scheme"
    ];

$("#search_input").autocomplete({
    source: devices,
    select: function(e, i) {

        var search_input = i.item.value;
        document.getElementById('searchresultdata').innerHTML = search_input;
    }
});

//Append div with contents from function sendSelected
$("#search_input").on("keyup change", function() {
    var search_input = $(this).val();
    if (search_input.length > 1 || search_input == '*') {
        document.getElementById('searchresultdata').innerHTML = "Everything";
    }

    document.getElementById('searchresultdata').innerHTML = search_input;
}); 
```

有关现场示例，请参见：http: [//jsfiddle.net/k2SMb/4/](http://jsfiddle.net/k2SMb/4/)

无论如何我可以将它组合成一个使其更整洁吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:45:55.407

您可以通过将两个事件链接在一起来使其更整洁，然后您可以使用 jQuery 的 $('#id_selector')，最后当您只需要一次时，不必费心写入变量。结果：

```
$("#search_input").autocomplete({
    source: devices,
    select: function(e, i) {
        $('#searchresultdata').text(i.item.value);
    }
}).on("keyup change", function() {
    var search_input = $(this).val();
    if (search_input.length > 1 || search_input == '*') {
        $('#searchresultdata').text("Everything")
    }
    $('#searchresultdata').text(search_input);
});​ 
```

# java - 递归地Uzip文件夹-android

> ID：12747468
> 
> 赞同：2
> 
> 时间：2012-10-05T13:36:57.783
> 
> 标签：java, android, zip, unzip

我试图解压缩一个压缩文件（该文件包含许多子文件夹和文件）。

```
I am not able to create sub-folders while unzipping the file. 
```

每次我收到一个错误说：

```
No such file or directory. 
```

我对此进行了很多搜索，例如：

1.  [Android - 解压缩文件夹？](https://stackoverflow.com/questions/5028421/android-unzip-a-folder)
2.  [http://www.roseindia.net/tutorial/java/corejava/zip/ZipIsDirectory.html](http://www.roseindia.net/tutorial/java/corejava/zip/ZipIsDirectory.html)
3.  [在 Android 应用程序中解压缩 sd 卡上的压缩文件](https://stackoverflow.com/questions/7697466/unzip-a-zipped-file-on-sd-card-in-android-application)
4.  [如何在Java中递归解压缩文件？](https://stackoverflow.com/questions/981578/how-to-unzip-files-recursively-in-java)

但是，没有任何帮助。

以下是我尝试过的：

```
public class UnZipper {

    private static final String TAG = "UnZip";
    private String mFileName, mDestinationPath;

    public UnZipper(String fileName, String destinationPath) {
        mFileName = fileName;
        mDestinationPath = destinationPath;
    }

    public String getFileName() {
        return mFileName;
    }

    public String getDestinationPath() {
        return mDestinationPath;
    }

    // shrikant
    public void unzip() {
        String fullPath = mFileName;
        Log.d(TAG, "unzipping " + mFileName + " to " + mDestinationPath);
        doInBackground(fullPath, mDestinationPath);
    }

    // shrikant: I have changed return type from Boolean to boolean.
    protected boolean doInBackground(String filePath, String destinationPath) {

        File archive = new File(filePath);
        boolean returnValue = false;
        try {
            ZipFile zipfile = new ZipFile(archive);

            for (Enumeration e = zipfile.entries(); e.hasMoreElements();) {

                ZipEntry entry = (ZipEntry) e.nextElement();
                try {
                    unzipEntry(zipfile, entry, destinationPath);
                    Log.d("Unzipped", entry.getName());
                    returnValue = true;
                } catch (Exception ex) {
                    Log.e(TAG,
                            "Error while extracting file: " + entry
                                    + ex.getMessage());
                }
            }
        } catch (Exception e) {
            Log.e(TAG, "Error while extracting file " + archive, e);
            // return false;
        }
        return returnValue;
    }

    // shrikant: I have changed return type from void to boolean.
    /**
     * Unzips the zipped file into outputDir path.
     * 
     * @param zipfile
     * @param entry
     * @param outputDir
     * @throws IOException
     */
    private void unzipEntry(ZipFile zipfile, ZipEntry entry, String outputDir)
            throws IOException {
        Log.d("CURRENT ZIP", entry.getName());
        String _dir = null, fileName = null;
        if (entry.getName().contains("\\")) {

            _dir = entry.getName().substring(0, entry.getName().indexOf('\\'));
            createDir(new File(outputDir, _dir));
            fileName = entry.getName().substring(entry.getName().indexOf('\\'));
        }

        // Change by Prashant : To Remove "/" from file Name Date : 5/01/2011
        if (fileName.toString().startsWith("\\")) {
            fileName = fileName.substring(1); // End
        }

        if (_dir != "")
            outputDir = outputDir + "/" + _dir;

        File outputFile = new File(outputDir, fileName);
        if (!outputFile.getParentFile().exists()) {
            createDir(outputFile.getParentFile());
        }
        Log.d("OUTPUT FILE", outputDir + fileName);
        Log.v(TAG, "Extracting: " + entry);

        Log.d("FOUND inside unzipEntry()", entry.getName());

        BufferedInputStream inputStream = new BufferedInputStream(
                zipfile.getInputStream(entry));

// **here I am getting error.**

        BufferedOutputStream outputStream = new BufferedOutputStream(
                new FileOutputStream(outputFile));

// **above line.**

        try {
            copy(inputStream, outputStream);
        } finally {
            outputStream.close();
            inputStream.close();
        }

    }

    private void createDir(File dir) {
        if (dir.exists()) {
            return;
        }
        Log.v(TAG, "Creating dir " + dir.getName());
        if (!dir.mkdirs()) {
            throw new RuntimeException("Cannot create dir " + dir);
        }
    }

    private void copy(BufferedInputStream input, BufferedOutputStream output)
            throws IOException {
        byte[] buffer = new byte[4096];
        int size;
        while ((size = input.read(buffer)) != -1)
            output.write(buffer, 0, size);
    }

} 
```

**我的问题是**：（请看代码）

当我打电话`unzipEntry()`时，当它遇到一个子文件夹时，它会传递类似“ `/data/abc.ext`”的东西，但是我的文件系统不包含任何名为“ **data** ”的文件夹，我什至尝试创建它，但没有成功。

> 那么如何创建从压缩文件到目标路径的子文件夹？

我什至尝试过方法：

```
if(entry.isDirectory) {
// create directory
} 
```

但这不会被调用，因为`unzipEntry()`（请查看`for() loop`）直接传递子文件夹下的文件。

请帮助我。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T15:53:27.620

哦好！我已经解决了.. :)

我编写了以下函数，如果需要，它将递归地创建子文件夹。

这是一个久经考验的功能，可以成功解压缩任何文件。

```
 /**
     * Unzips the file (recursively creates sub-folder if exists.)
     * 
     * @param tempFileName
     *            The zip file.
     * @param destinationPath
     *            The destination path where unzipped file will be saved.
     */
    public void unzipFile(String tempFileName, String destinationPath) {
        try {

            int index = destinationPath.lastIndexOf("\\");
            String fileString = destinationPath.substring(index);

            File extFile = new File("/mnt/sdcard/courses1", fileString);
            if(!extFile.exists()) {
                createDir(extFile);
            }

            byte[] buffer = new byte[1024];

            FileInputStream fin = new FileInputStream(tempFileName);
            ZipInputStream zin = new ZipInputStream(fin);
            ZipEntry zipentry = null;
            if (!(zin.available() == 0)) {
                byte[] startBuffer = new byte[8];

                while ((zipentry = zin.getNextEntry()) != null) {
                    String zipName = zipentry.getName();
                    if (zipName.startsWith("/")) {
                        zipName = zipentry.getName();
                    } else if (zipName.startsWith("\\")) {
                        zipName = zipentry.getName();
                    } else {
                        zipName = "/" + zipentry.getName();
                    }

                    String fileName = destinationPath + zipName;
                    fileName = fileName.replace("\\", "/");
                    fileName = fileName.replace("//", "/");

                    if (zipentry.isDirectory()) {
                        createDir(new File(fileName));
                        continue;
                    }

                    String name = zipentry.getName();
                    int start, end = 0;
                    while (true) {

                        start = name.indexOf('\\', end);
                        end = name.indexOf('\\', start + 1);
                        if (start > 0)
                            "check".toString();
                        if (end > start && end > -1 && start > -1) {
                            String dir = name.substring(1, end);

                            createDir(new File(destinationPath + '/' + dir));
                            // name = name.substring(end);
                        } else
                            break;
                    }

                    File file = new File(fileName);

                    FileOutputStream tempDexOut = new FileOutputStream(file);
                    int BytesRead = 0;

                    if (zipentry != null) {
                        if (zin != null) {
                            while ((BytesRead = zin.read(buffer)) != -1) {
                                tempDexOut.write(buffer, 0, BytesRead);
                            }
                            tempDexOut.close();
                        }
                    }
                }
            }

        } catch (Exception e) {
            Log.e("Exception", e.getMessage());
        }
    } 
```

我希望它可以帮助某人。:)

谢谢你。

# javascript - JavaScript删除特殊字符字符串不起作用

> ID：12747470
> 
> 赞同：0
> 
> 时间：2012-10-05T13:37:08.387
> 
> 标签：javascript, jsp, special-characters, analytics

我正在尝试删除可能出现在我的 Google Analytics 标记中的特殊字符，因为特殊字符似乎会导致某些版本的 IE 中的脚本错误。我有这个功能：

```
 function removeSplChars(inStr) {
                inStr = inStr.replace(/[^a-zA-Z0-9 ]/g, "");
                return inStr;
                } 
```

并且有当前有效的GA代码：

```
 <script type="text/javascript">
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', '<c:out value="${profileId}"/>']);
                <c:choose>
                <c:when test="${(lastCmdName eq 'CategoryDisplay') or (lastCmdName eq 'ProductDisplay')}" >
                _gaq.push(['_setCustomVar',
                2, // This custom var is set to slot #2.
                '<c:choose><c:when test="${WCParam.source eq 'search'}">Search</c:when><c:otherwise><c:out value="${topCat}" /></c:otherwise></c:choose>', // The top-level name for your online content categories.
                '<c:choose><c:when test="${WCParam.source eq 'search'}">Search <c:out value="${WCParam.searchTerm}" /></c:when><c:otherwise><c:out value="${topCat}" />|<c:out value="${subCatA}" />|<c:out value="${subCatB}" />|<c:out value="${subCatC}" /></c:otherwise></c:choose>', // Records value of breadcrumb name
                3 // Sets the scope to page-level.
                ]); 
                </c:when>
                <c:otherwise>
                </c:otherwise>
                </c:choose>
                 _gaq.push(['_trackPageview']);
                (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
                </script> 
```

但是当我将该函数放在代码中时，我仍然看到 Chrome 调试器中出现了特殊字符。例如，当我打开一个包含名为“Matt's”的产品的页面时，它会显示为 Matt's。我想要的是马茨。我们还有其他带有 & 和其他特殊字符的产品名称，所以我只想允许 Az 和数字（大写/没有大写都可以）

任何意见，将不胜感激。我查看了关于 SO 的以下帖子，但到目前为止还没有找到任何可以帮助我完成这项工作的内容：

[如何处理 (® ´ © ¿ ¡ ° À ) javascript 中的特殊字符？](https://stackoverflow.com/questions/3004487/how-to-handle-special-characters-in-javascript)
[javascript regexp remove all special characters](https://stackoverflow.com/questions/4374822/javascript-regexp-remove-all-special-characters)
[使用 JavaScript 从字符串中删除除空格以外的所有特殊字符](https://stackoverflow.com/questions/6555182/remove-all-special-characters-except-space-from-a-string-using-javascript)

我是 JSP 和 JavaScript 的新手，所以我确定我没有将代码放在正确的位置，或者我可能需要在页面上添加其他内容？我尝试将 removeSplChars 函数放在 () 中或添加一个 ; 没有运气。不幸的是，我必须在工作中学习这一点，所以我必须专注于完成我被赋予的任务，而不是花时间真正理解语言的逻辑/语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:46:03.870

问题不在于函数本身，它来自其他地方。证明：http: [//jsfiddle.net/wDaCw/](http://jsfiddle.net/wDaCw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:19:53.730

在评论中，我要求您向我们展示`removeSplChars`调用函数的代码，令我惊讶的是，您告诉我您没有在任何地方调用它。好吧，这回答了为什么什么都没有改变的问题。如果您不使用要更改的数据调用该函数，则不会发生任何更改。

我试图了解您的问题是什么，因为它不应该是一个问题......然后我仔细查看了您的代码并发现了这一点：

```
'<c:choose><c:when test="${WCParam.source eq 'search'}">Search <c:out value="${WCParam.searchTerm}" /></c:when><c:otherwise><c:out value="${topCat}" />|<c:out value="${subCatA}" />|<c:out value="${subCatB}" />|<c:out value="${subCatC}" /></c:otherwise></c:choose>' 
```

您应该注意到，颜色编码使单词`search`的颜色与字符串的其余部分不同。这是因为您已经用单引号开始字符串，因此字符串将在下一个单引号处结束。

我注意到您正在使用我不熟悉的 JSP。我查了一下，发现这些标签在发送到客户端之前由您的服务器解析，并替换为一些文本。

由于您遇到像单引号这样的*特殊字符的问题，因此问题很明显：***您的标签输出的字符串没有转义为 javascript 字符串的一部分。**我认为所有可能的 Unicode 字符中唯一有问题的字符是双引号 (u+0022)、单引号 (u+0027) 和反斜杠 (u+005c)，因为它们必须用反斜杠 (如`\"`,`\'`和`\\`)转义

现在，您如何在 JSP 中做到这一点？我不知道，但我知道你不是第一个遇到这个问题的人。我快速搜索给了我[这个页面](http://www.coderanch.com/t/528521/JSP/java/Passing-JSTL-variable-special-characters)，他们建议如下：

```
<spring:message code="${escapedString}" javaScriptEscape="true"/> 
```

现在，正如我所说，我不熟悉 JSP，所以我只是猜测。尝试替换您的所有用法，`<c:out value="xxx"/>`如下所示：

```
<c:out value="${WCParam.searchTerm}" /> 
```

有了这个：

```
<spring:message code="${WCParam.searchTerm}" javaScriptEscape="true"/> 
```

如果这不起作用，请查看[此答案](https://stackoverflow.com/a/2110375/36866)。

# php - 在 PHP 中确定服务器日志的位置

> ID：12747472
> 
> 赞同：1
> 
> 时间：2012-10-05T13:37:12.800
> 
> 标签：php, apache, logging

简而言之，`phpinfo()`打印：

```
Environment
...
APACHE_LOG_DIR  /var/log/apache2
... 
```

`$_ENV`是空的。

`getenv('APACHE_LOG_DIR')`返回`/var/log`。

我想要的是 phpinfo() 返回的值。如何获取 Apache 日志的实际位置？更具体地说，我想要一个可以通过`error_log`in 创建新文件的目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:42:48.447

`variables_order`决定创建哪个超全局，如手册[中所述](http://au.php.net/manual/en/ini.core.php#ini.variables-order)。`E`必须存在才能被`$_ENV`创建。

# sql - 将表与自身进行比较

> ID：12747474
> 
> 赞同：0
> 
> 时间：2012-10-05T13:37:17.067
> 
> 标签：sql

我正在尝试将同一张表与其自身进行比较，以将一个员工的位置与另一个进行比较。我希望能够选择一名员工是否仅在另一名员工的某个位置。

表看起来像这样

```
StaffNo  LocoNo
1          1
1          2
1          3
3          2
3          3
3          4
4          1
4          2
5          2
5          3
6          1
6          2 
```

说比较员工 1 和 4

结果将是

```
StaffNo  LocoNo
1          3 
```

我尝试过内部连接和 EXCEPT，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:43:19.553

内连接仅在连接的双方都匹配时返回结果。当您正在寻找差异时，您需要一个外部连接。像这样。

```
select 
    COALESCE(t1.staffid, t2.staffid) as staff,
    COALESCE(t1.locationid, t2.locationid) as location 
from
    (select * from table where staffid=1) t1
        full outer join
    (select * from table where staffid=4) t2    
        on t1.locationid = t2.locationid
where t1.locationid is null 
or t2.locationid is null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:52:41.253

使用 MINUS / UNION ALL 的另一个解决方案：

```
with 
  v_1 as (select locono from from table where staffid=1),
  v_2 as (select locono from from table where staffid=2)
select * from (
(select 1 staffid, locono from v_1
 minus
 select 1 staffid, locono from v_2
)
union all
(
select 2 staffid, locono from v_2
 minus
 select 2 staffid, locono from v_1
)) order by staffid, locono 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T16:16:10.037

```
SELECT StaffNo
     , LocoNo
  FROM Tbl A
 WHERE NOT EXISTS
      (SELECT 1
         FROM Tbl B
        WHERE A.StaffNo <> B.StaffNo
          AND A.LocoNo = B.LocoNo) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T13:51:11.893

```
select staffno,locono from tbl where staffno in (1,4) and locono in
((select locono from tbl where staffno = 1
except
select locono from tbl where staffno = 4)
union 
(select locono from tbl where staffno = 4
except
select locono from tbl where staffno = 1)) 
```

# sql - 左连接产生额外的子查询

> ID：12747476
> 
> 赞同：3
> 
> 时间：2012-10-05T13:37:18.513
> 
> 标签：sql, sql-server, linq, linq-to-sql, left-join

`GroupJoin`我使用标准的//方法编写了一个在 LINQ 中执行左连接的方法`SelectMany`：`DefaultIfEmpty`

```
public static IQueryable<TResult> LeftJoin<TLeft, TRight, TKey, TResult>(
    this IQueryable<TLeft> left,
    IEnumerable<TRight> right,
    Expression<Func<TLeft, TKey>> leftKeySelector,
    Expression<Func<TRight, TKey>> rightKeySelector,
    Expression<Func<TLeft, TRight, TResult>> resultSelector)
{
    var paramL = Expression.Parameter(typeof(TLeft), "l");
    var paramR = Expression.Parameter(typeof(TRight), "r");
    var paramRs = Expression.Parameter(typeof(IEnumerable<TRight>), "rs");

    var expr = Expression.Lambda<Func<TLeft, IEnumerable<TRight>, IEnumerable<TResult>>>(
       Expression.Call(
           typeof(Enumerable),
           "Select",
           new [] { typeof(TRight), typeof(TResult) },
           Expression.Call(typeof(Enumerable), "DefaultIfEmpty", new[] { typeof(TRight) }, paramRs),
           Expression.Lambda<Func<TRight, TResult>>(
               Expression.Invoke(resultSelector, paramL, paramR),
               paramR)),
       paramL,
       paramRs
   );

    return left
        .GroupJoin(
            right,
            leftKeySelector,
            rightKeySelector,
            expr)
        .SelectMany(x => x);
} 
```

我因此对其进行了测试：

```
var q = myDB.PurchaseOrderHeaders
    .LeftJoin(
        myDB.PurchaseOrderLines,
        po => po.PurchaseOrderGUID,
        line => line.PurchaseOrderGUID,
        (po, line) => new { PO = po, Line = line }
    );

var e = q.AsEnumerable(); 
```

我期望 SQL 是这样的：

```
SELECT [t0].[PurchaseOrderGUID], ..., [t1].[PurchaseOrderLineGUID], ...
FROM [dbo].[PurchaseOrderHeader] AS [t0]
LEFT OUTER JOIN [dbo].[PurchaseOrderLine] AS [t1]
    ON [t0].[PurchaseOrderGUID] = [t1].[PurchaseOrderGUID] 
```

但是得到了这个：

```
SELECT [t0].[PurchaseOrderGUID], ..., [t2].[test], [t2].[PurchaseOrderLineGUID], ...
FROM [dbo].[PurchaseOrderHeader] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[PurchaseOrderLineGUID], ...
    FROM [dbo].[PurchaseOrderLine] AS [t1]
    ) AS [t2] ON [t0].[PurchaseOrderGUID] = [t2].[PurchaseOrderGUID] 
```

不同之处在于带有 的子查询`SELECT 1 as [test]`。为什么会产生这个？它可能对性能产生任何重大影响吗？如果是这样，我可以修改查询以消除它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:25:42.780

（免责声明：我对 LINQ 不太了解。以下内容基于我对 SQL 的了解，以及对 LINQ 试图做什么的有根据的推断。）

> 为什么会产生这个？

我认为 的目的`1 AS [test]`是为 LINQ 提供一种清晰、简单、一致且明确的方式来区分“没有匹配的记录`PurchaseOrderLine`”和“有一个匹配的记录`PurchaseOrderLine`”。您可能认为您可以通过检查`PurchaseOrderLineGUID`和其他字段来区分这些，这在您的情况下可能是正确的；但在一般情况下，如果`LEFT JOIN`成功加入记录，但从该记录中选择的所有字段均为空，会发生什么情况？（在您的情况下，这是不可能的，因为`PurchaseOrderLineGUID`（我假设）是不可为空的，但是 LINQ 知道吗？尽管如此，即使不知道哪些表列不可为空，人类查询编写者也可以避免`[t2].[PurchaseOrderGuid] AS [test]`在顶级字段列表中使用子查询，因为`ON``[t2].[PurchaseOrderGuid]`子句防止匹配成功时为空的可能性；但我不确定这对 LINQ 有多明显。）

> 它可能对性能产生任何重大影响吗？

不*应该*有；因为`1 AS [test]`没有在任何可能真正影响查询语义的地方使用（例如，在`WHERE`or `ON`or `GROUP BY`or`HAVING`子句中），SQL Server 应该能够执行“谓词下推”以（在某种意义上）将`ON`条件移动到子查询中，并执行`PurchaseOrderHeader`和之间的常规索引哈希连接`PurchaseOrderLine`以确定它需要哪些记录。`1 AS [test]`只有在组装结果集时才会为实际选择的记录`PurchaseOrderLine`添加 。

（我这么说部分是因为我知道 SQL Server 擅长谓词下推——[即使在极少数情况下这被证明是一件坏事](http://blogs.msdn.com/b/dfurman/archive/2009/12/02/query-performance-scalar-udfs-and-predicate-pushdown.aspx)——部分是因为，如上所述，LINQ*可以避免*在这种情况。我想 LINQ 团队知道他们在做什么，如果他们认为子查询可能会降低性能，我猜 LINQ 会更加努力地确定给定案例是否真的需要子查询。因为 LINQ不打扰，大概是因为没关系。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:41:26.360

[LinqKit](http://www.albahari.com/nutshell/linqkit.aspx)有助于解决这些问题。以下扩展创建了不错的 sql。

```
public static IQueryable<TResult> LeftJoin<TOuter, TInner, TKey, TResult>(
    this IQueryable<TOuter> outer,
    IQueryable<TInner> inner,
    Expression<Func<TOuter, TKey>> outerKeySelector,
    Expression<Func<TInner, TKey>> innerKeySelector,
    Expression<Func<TOuter, TInner, TResult>> result) {

    return outer.GroupJoin(
            inner, 
            outerKeySelector, 
            innerKeySelector, 
            (a, b) => new { a, b }).AsExpandable()
        .SelectMany(
            z => z.b.DefaultIfEmpty(), 
            (z, b) => result.Invoke(z.a, b));
} 
```

# c++ - 会话密钥 - MSDN - Microsoft

> ID：12747481
> 
> 赞同：0
> 
> 时间：2012-10-05T13:37:33.633
> 
> 标签：c++, encryption, msdn

我正在开发一个应用程序，该应用程序通过使用会话密钥对其进行加密`CryptEncrypt()`和使用会话密钥来保护文件，从[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa387699%28v=vs.85%29.aspx) 中我无法找出它正在谈论的会话。这是否意味着如果其他人将我的加密文件带到另一台机器（或在同一台机器上但不同的用户）即使他有密码也无法解密它？

任何人都可以帮助我澄清他的观点。

在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:43:38.423

> 这是否意味着如果其他人将我的加密文件带到另一台机器（或在同一台机器上但不同的用户）即使他有密码也无法解密它？

不，

通过生成与密码短语匹配的哈希来生成加密和解密的会话密钥是很常见的：

```
// Hash in the password data. 
if(!CryptHashData( m_hHash, (BYTE *) m_strPassphrase.c_str(), (DWORD) m_strPassphrase.length(), 0)) 
{
    //  ...
}

// Derive a session key from the hash object. 
if(!CryptDeriveKey( m_hCryptProv, ENCRYPT_ALGORITHM, m_hHash, KEYLENGTH, &m_hKey))
{ 
    //...
} 
```

`m_hKey`现在可以用于加密/解密。

```
CryptEncrypt( m_hKey, NULL, bEOF, 0, m_pBlockBuffer, &dwCount, m_dwBufferLen) 
```

或者 ..

```
CryptDecrypt( m_hKey, 0, bEOF, 0, m_pBlockBuffer, &dwCount) 
```

# javascript - 计算正确和错误的答案

> ID：12747482
> 
> 赞同：5
> 
> 时间：2012-10-05T13:37:41.557
> 
> 标签：javascript, jquery

编辑-我现在有一个正确答案的工作计数器，并且对错误答案做了完全相同的操作，但无法使其正常工作。它不会超过一个 - [http://jsfiddle.net/smilburn/Dxxmh/33/](http://jsfiddle.net/smilburn/Dxxmh/33/)

我正在为儿童创建一个拼写游戏，其中空格在网格中突出显示，并通过单击网格侧面的相应字母给出正确拼写单词的线索。

如果你得到正确的单词，网格中的空间会随着“wordglow2”的使用而消失。如果你弄错了，它会用“wordglow4”发红光。

在我的拼写游戏中，我想计算单词的对错尝试次数，然后在最后显示出来。

我在 HTML 中创建了一个名为“counter”的 div，它应该显示正确的答案，但是在 1 个正确答案之后它不会继续计数。

这是脚本

```
var completeLetters = $('.wordglow2').length;
var threeLetter = (completeLetters / 3);
var rightWords = $(threeLetter).length;
    $('.counter').text(rightWords).show();

        if (threeLetter == 3) {
            $('table').fadeOut(2000);

            } 
```

我试图创建一个名为“rightWord”的变量，它采用“threeLetter”的长度，然后通过计数器显示它。它计数到 1 然后停止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:22:40.750

```
var threeLetter = (completeLetters / 3); 
```

`threeLetter`是数字

```
var rightWords = $(threeLetter).length; 
```

在这里你试图选择号码

这个游戏包含错误，它使我的浏览器崩溃，但计数在这个演示中工作：http: [//jsfiddle.net/Dxxmh/29/](http://jsfiddle.net/Dxxmh/29/)

# java - JAXB 将 XML 子项解析为 null，仅在对象中设置属性

> ID：12747484
> 
> 赞同：1
> 
> 时间：2012-10-05T13:37:50.697
> 
> 标签：java, xml, jaxb

我有信息作为`XML`文件。要使用它们，我想通过将 XML 解析为对象`JAXB`。
我唯一的问题是所有子笔记都在 parsing 之后`null`。只有属性被解析。

根类：

```
package xml;

import java.util.Date;
import java.util.List;

import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

import xml.messstrecke.ZEBMessstrecke;

@XmlRootElement(name = "RohdatenTP2Netz", namespace = "http://www.BASt.de/ZEB/Rohdaten/Version_3_0")
public class RohdatenTP2Netz
{
    //Attributes
    private String merkmal;
    private String typ;
    private Date erstelldatum;
    private String bemerkung;

    //List of Childs
    private List<ZEBMessstrecke> zebMessstrecken;

    public @XmlAttribute(name = "Merkmal", required = true) String getMerkmal()
    {
        return merkmal;
    }
    public void setMerkmal(String merkmal)
    {
        this.merkmal = merkmal;
    }
    public @XmlAttribute(name = "Typ", required = true) String getTyp()
    {
        return typ;
    }
    public void setTyp(String typ)
    {
        this.typ = typ;
    }
    public @XmlAttribute(name = "Erstelldatum", required = true) Date getErstelldatum()
    {
        return erstelldatum;
    }
    public void setErstelldatum(Date erstelldatum)
    {
        this.erstelldatum = erstelldatum;
    }
    public @XmlAttribute(name = "Bemerkung", required = true) String getBemerkung()
    {
        return bemerkung;
    }
    public void setBemerkung(String bemerkung)
    {
        this.bemerkung = bemerkung;
    }
    public @XmlElement(required = true, type = ZEBMessstrecke.class) List<ZEBMessstrecke> getZebMessstrecken()
    {
        return zebMessstrecken;
    }
    public void setZebMessstrecken(List<ZEBMessstrecke> zebMessstrecken)
    {
        this.zebMessstrecken = zebMessstrecken;
    }
} 
```

ZEBMessstrecke 的子类：

```
package xml.messstrecke;

import java.util.List;

import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

import xml.messstrecke.datenstrom.Datenstrom;

@XmlRootElement(namespace="http://www.BASt.de/ZEB/Rohdaten/Version_3_0")
public class ZEBMessstrecke
{
    //Attribute
    private String mnr;
    private String mra;

    //KindElemente
    private ZEBHeader header;
    private List<Datenstrom> datenstroeme;

    public @XmlAttribute(name = "mnr", required = true) String getMnr()
    {
        return mnr;
    }
    public void setMnr(String mnr)
    {
        this.mnr = mnr;
    }
    public @XmlAttribute(name = "mra", required = true) String getMra()
    {
        return mra;
    }
    public void setMra(String mra)
    {
        this.mra = mra;
    }
    public @XmlElement(name = "ZEBHeader", required = true) ZEBHeader getHeader()
    {
        return header;
    }
    public void setHeader(ZEBHeader header)
    {
        this.header = header;
    }
    public @XmlElement(name = "Datenstrom", required = true) List<Datenstrom> getDatenstroeme()
    {
        return datenstroeme;
    }
    public void setDatenstroeme(List<Datenstrom> datenstroeme)
    {
        this.datenstroeme = datenstroeme;
    }
} 
```

xml文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<RohdatenTP2Netz Merkmal="Griffigkeit" Typ="Netzorientiert" Erstelldatum="2012-09-28" xmlns="http://www.BASt.de/ZEB/Rohdaten/Version_3_0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" Bemerkung="">
    <ZEBMessstrecke mnr="357/11" mra="0.4">
        <ZEBHeader>
            <Bildparameter Datentraeger="LISt__BSt_12_001">
                <Messpunktabstand_Bilder>1 Wert pro 10 Meter</Messpunktabstand_Bilder>
                <Kamera Nr="1" Name="Frontkamera" PixelH="720" PixelV="576" Bildformat="jpg" RootVerzeichnis="Kamera_01\B 096_"/>
            </Bildparameter>
            <Zusatzparameter/>
            <MapInfoStrassennetz Pfad_und_Basisname="ZEB2012B_1400_GRUNDDATEN_V_1_0_0">
                <DAT>X</DAT>
                <ID>X</ID>
                <MAP>X</MAP>
                <TAB>X</TAB>
            </MapInfoStrassennetz>
            <ZEBAdministration Jahr="2012" Strassenklasse="B" ZENDI="140000" Anlass="Zwischentermin2" Dateiversion="1"/>
            <Messparameter Messsystem="SKM" KfzKennz="MW-LI 21" Messgeraetebauer="BfW Traunstein" Messsystembetreiber="LISt GmbH Rochlitz" Messprinzip="schraeggestelltes Rad" Fahrer="Schmidt" Operator="Pusch" Positionsbestimmungsverfahren="DGPS">
                <Messpunktabstand_Messgeschwindigkeit>1 Wert pro 1 Meter</Messpunktabstand_Messgeschwindigkeit>
                <Messpunktabstand_Fahrbahntemperatur>1 Wert pro 1 Meter</Messpunktabstand_Fahrbahntemperatur>
                <Messpunktabstand_Reifentemperatur>1 Wert pro 1 Meter</Messpunktabstand_Reifentemperatur>
                <Messpunktabstand_Lufttemperatur>1 Wert pro 1 Meter</Messpunktabstand_Lufttemperatur>
                <Messpunktabstand_Wassertemperatur>1 Wert pro 1 Meter</Messpunktabstand_Wassertemperatur>
                <Messpunktabstand_Seitenkraftbeiwert>1 Wert pro 1 Meter</Messpunktabstand_Seitenkraftbeiwert>
                <Messpunktabstand_Seitenabstand>1 Wert pro 1 Meter</Messpunktabstand_Seitenabstand>
                <Messlinie>rechte Rollspur</Messlinie>
            </Messparameter>
        </ZEBHeader>
        <Datenstrom LfdM="511" Datum="2012-05-31" Uhr="11:19:57" G="0" Bemerkung="" mrl="0" />
        <Datenstrom LfdM="525" Datum="2012-05-31" Uhr="11:19:58" G="0" Bemerkung="" mrl="0" />
    </ZEBMessstrecke>
</RohdatenTP2Netz> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:27:31.870

您需要利用包级别`@XmlSchema`注释来为每个包中的类指定命名空间限定。

**xml/包信息.java**

```
@XmlSchema( 
    namespace = "http://www.BASt.de/ZEB/Rohdaten/Version_3_0", 
    elementFormDefault = XmlNsForm.QUALIFIED) 
package xml;

import javax.xml.bind.annotation.XmlNsForm;
import javax.xml.bind.annotation.XmlSchema; 
```

**xml/messstrecke/package-info.java**

```
@XmlSchema( 
    namespace = "http://www.BASt.de/ZEB/Rohdaten/Version_3_0", 
    elementFormDefault = XmlNsForm.QUALIFIED) 
package xml.messstrecke;

import javax.xml.bind.annotation.XmlNsForm;
import javax.xml.bind.annotation.XmlSchema; 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/08/jaxb-namespaces.html](http://blog.bdoughan.com/2010/08/jaxb-namespaces.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:45:40.707

反而 ：

```
public @XmlElement(required = true, type = ZEBMessstrecke.class) List<ZEBMessstrecke> getZebMessstrecken() 
```

你应该使用：

```
@XmlList 
@XmlElement(required = true, type = ZEBMessstrecke.class)
public List<ZEBMessstrecke> getZebMessstrecken() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T13:51:29.180

您的`@XmlElement`注释在一个名为的方法上`getZebMessstrecken`，因此它将寻找一个名为的元素`zebMessstrecken`，而不是`ZEBMessstrecke`。您需要明确元素名称，即

```
@XmlElement(name = "ZEBMessstrecke", required = true) 
```

此外，JAXB 映射元素的常用方法`maxOccurs="unbounded"`是只生成 getter，而不是 setter，并让 getter 在第一次被调用时返回一个空列表。模式是调用者将从`List`getter 中获取，然后直接将元素添加到此列表中。所以尝试类似：

```
@XmlElement(name = "ZEBMessstrecke", required = true)
public List<ZEBMessstrecke> getZebMessstrecken() {
  if(zebMessstrecken == null) {
    zebMessstrecken = new ArrayList<ZEBMessstrecke>();
  }
  return zebMessstrecken;
}

// no setZebmessstrecken method 
```

您不需要它，`type`因为它可以从方法返回类型中推断出来。

编辑：另外，检查您在类的`@XmlType`注释上是否有正确的命名空间`ZEBMessstrecke`。

# java - Java 聊天 - 从服务器监听的线程

> ID：12747487
> 
> 赞同：1
> 
> 时间：2012-10-05T13:37:56.500
> 
> 标签：java, multithreading, sockets

我正在尝试创建一个简单的聊天，它使用线程来监听传入的消息。我有一个主类，它为目前只发送一条消息的服务器打开一个套接字。我在收听传入消息时遇到问题，我无法弄清楚我做错了什么。

这是主类，对不起所有的 GUI 代码，它让它很长。

```
package def;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.PrintWriter;
import java.net.Socket;
import java.net.UnknownHostException;

import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.UIManager;
import javax.swing.border.EmptyBorder;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;

public class GUI extends JFrame {

    private JPanel contentPane;
    private JTextField textField;

    private static JMenuBar menuBar;
    private JMenu fileMenu;
    private JMenuItem openMenu;
    private JMenuItem exitMenu;

    private Socket socket;
    private ObjectOutputStream oos;
    private ObjectInputStream ois;

    private String ipAddress;

    private JTextArea textArea;
    private String fromServer = "";

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");
                } catch (Exception e) {
                    e.printStackTrace();
                }
                try {
                    GUI frame = new GUI();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    public GUI() throws IOException {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 450, 325);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new BorderLayout(0, 0));
        setContentPane(contentPane);

        textArea = new JTextArea();
        contentPane.add(textArea, BorderLayout.NORTH);
        textArea.setPreferredSize(new Dimension(0, 230));
        textArea.setEditable(false);

        textField = new JTextField();
        textField.addKeyListener(new KeyAdapter() {
            @Override
            public void keyPressed(KeyEvent arg0) {
                if(arg0.getKeyCode() ==java.awt.event.KeyEvent.VK_ENTER){
                    // TODO
                }
            }
        });
        contentPane.add(textField, BorderLayout.SOUTH);
        textField.setColumns(10);

        // Create menu item
        menuBar = new JMenuBar();
        fileMenu = new JMenu("File");
        openMenu = new JMenuItem("Open chat");
        openMenu.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                ipAddress = JOptionPane.showInputDialog("Ange IP-address: ");
                try {
                    openSocket(ipAddress);
                } catch (UnknownHostException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        });

        exitMenu = new JMenuItem("Exit");
        exitMenu.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                System.exit(0);
            }
        });
        fileMenu.add(openMenu);
        fileMenu.add(exitMenu);
        menuBar.add(fileMenu);

        setJMenuBar(menuBar); //Add the menubar
        setVisible(true);
    }

    //Open a socket to the server
    private void openSocket(String ipAddress) throws UnknownHostException, IOException {
        socket = new Socket(ipAddress, 1337);
        new ListenIncoming(socket, this).start();
        System.out.println("Socket and thread started!");
    }

    public void setMessage(String message){
        textArea.setText(message);
    }
} 
```

菜单中的“打开聊天”按钮有一个动作监听器，它运行方法 openSocket()。在代码底部的这个方法中，我打开一个套接字并启动一个新的 ListenIncoming 线程。

这是线程代码：

```
 import java.io.IOException;
import java.io.ObjectInputStream;
import java.net.Socket;

public class ListenIncoming extends Thread{

    private Socket socket;
    private ObjectInputStream ois;
    private GUI gui;

    public ListenIncoming(Socket socket, GUI gui){
        this.socket = socket;
        this.gui = gui;
    }

    @Override
    public void run() {
        try {
            ois = new ObjectInputStream(socket.getInputStream());
        } catch (IOException e1) {
            e1.printStackTrace();
        }

        //A loop that runs forever
        while(true){
            try {
                String fromServer = ois.readObject().toString();
                System.out.println(fromServer);
                gui.setMessage(fromServer);
            } catch (IOException e) {
                e.printStackTrace();
            } catch (ClassNotFoundException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

这是发送一条消息的服务器。我希望收到“已连接”消息，但我什么也没得到，没有错误也没有异常。我不知道我的代码哪里错了。

```
public class Server {

    private static Scanner in;
    private static String toSend;

    public static void main(String[] args) throws IOException {
        toSend = "";
        int port = 1337;
        in = new Scanner(System.in);

        ServerSocket serverSocket = null;
        try {
            serverSocket = new ServerSocket(port);
        } catch (IOException e) {
            System.err.println("Could not listen on port: " + port);
            System.exit(1);
        }

        Socket clientSocket = null;
        try {
            clientSocket = serverSocket.accept();
        } catch (IOException e) {
            System.err.println("Could not connect.");
            System.exit(1);
        }

        ObjectOutputStream oos = new ObjectOutputStream(clientSocket.getOutputStream());
        ObjectInputStream ois = new ObjectInputStream(clientSocket.getInputStream());
        String input, output;

        output = "Connected!\n";
        oos.writeObject(output);
        System.out.println("This code is reached?");

        oos.close();
        ois.close();
        clientSocket.close();
        serverSocket.close();
    }
} 
```

当我运行程序时，我从 GUI 类中获得了打印输出，尽管我没有从 Server 类中获得调试输出。我正在使用 Eclipse，但是这两个类不应该能够写入控制台吗？为什么我从来没有达到那个代码？问题似乎出在服务器端，但是在尝试读取时不会在客户端产生一些错误吗？

感谢您提供的所有提示和意见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:17:54.623

首先运行服务器类..然后运行你的 GUI 类（客户端）

在控制台上打印以确认服务器已启动 -

```
System.out.println("Server started: " + serverSocket); 
```

以下

```
serverSocket = new ServerSocket(port); 
```

下面的行将等待客户端连接到服务器。

```
 socket = server.accept(); 
```

除非您无法获取服务器消息。

# javascript - 是否有任何模拟器可以在 Windows 7 上触发 JavaScript 中的手势事件？

> ID：12747493
> 
> 赞同：3
> 
> 时间：2012-10-05T13:38:15.957
> 
> 标签：javascript, google-chrome, multi-touch

我已经`Emulate Touch Events`在 Chrome 的开发者工具中启用了该选项来测试触摸事件，它工作正常，但是当我`pinch in`和`pinch out`chrome 页面没有触发`gesturestart`并且`gesturechange`我正在使用[这个](http://multitouchvista.codeplex.com/)驱动程序时，`multi touch`它适用于图像、浏览器放大和缩放出去。

在这里我做错了什么或者 chrome 不支持多点触控事件？或者有什么方法可以模拟这个`gestures`事件吗？

注意：我的 chrome 版本是 22.0.1229.79 m

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:23:10.513

您可以尝试下载 Android SDK，然后从手机模拟器访问您的网站（您可以选择要使用的 Android 版本）。然后，您可以导航到您的网页（如果您在 localhost:8080 上提供它，例如使用简单的 Web 服务器），并将其与模拟器一起使用。您可以使用鼠标单击/拖动来模拟 Android 模拟器上的触摸事件，这些事件应该继承并模拟`gestures`事件。

# c# - DBML 文件的更改是否将用户会话清除为 web.config？

> ID：12747500
> 
> 赞同：0
> 
> 时间：2012-10-05T13:38:37.857
> 
> 标签：c#, asp.net, iis, linq-to-sql

DBML 文件的更改是否会像 web.config 那样清除用户会话？

实时更改 dbml 文件可能会导致什么后果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:13:50.023

应用程序的配置定义的上下文和会话 dbml 之间没有关系

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:39:39.090

我认为在生产中更改 DBML 文件不会有任何作用。

从 DBML 文件生成的代码是 C# 代码中实际使用的代码……而不是 DMBL 文件本身。

保存 DBML 文件后，Visual Studio 会创建代码中使用的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T08:41:06.393

答案是**否定**的。

当我在 App_Code 中进行更改时，会出现重新启动应用程序的问题。在我的情况下，dbml 文件位于该文件夹中。有趣的是，有时当我进行更改时它会重新启动，有时它不会重新启动。例如修改一些文件很好，但删除空文件夹会触发重启。

请记住不要丢失您可以使用状态服务器的所有用户会话。

# c# - 找出一个表达式是否包含一个“孤独的”ParameterExpression

> ID：12747504
> 
> 赞同：7
> 
> 时间：2012-10-05T13:38:54.517
> 
> 标签：c#, expression

是否有一种简单的方法可以确定表达式是否包含未进一步包装的 ParameterExpression，例如 MemberExpression。

例子：

`x => x.Method() ? x : null`<= 1 次出现 x 没有任何进一步的评估

`x => x.Method() ? x.Property : null`<= 0 次出现 x 没有任何进一步的评估

简单地说，我的用例是我知道方法（无参数）和属性值，并想知道这是否足以评估表达式而无需从存储中获取整个“对象”。

编辑：我的例子可能是为了简化。还有更多的表达式类型需要处理（例如 UnaryExpression）。

`x => ((Cast) x).Property`<= 0 次出现 x 没有任何进一步的评估

我正在寻找以下问题的答案：

给定一个表达式，如果我知道输入参数的所有方法返回值和属性值，但不知道参数值本身，我可以评估表达式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:03:03.710

如果您使用的是 .NET 4 或更高版本，则可以使用[`ExpressionVisitor`](http://msdn.microsoft.com/en-us/library/system.linq.expressions.expressionvisitor.aspx)此功能。

我不太确定你如何定义“孤独参数”，但如果你想排除参数的*直接*方法调用、成员访问和索引器访问，你可以使用这样的东西（未经测试）：

像这样使用它：

```
new MyExpressionVisitor().GetNumLonelyParameterExpressions(myExpression.Body) 
```

* * *

```
public class MyExpressionVisitor : ExpressionVisitor
{
    private int numLonelyParameterExpressions;

    public int GetNumLonelyParameterExpressions(Expression expression)
    {
        numLonelyParameterExpressions = 0;
        Visit(expression);
        return numLonelyParameterExpressions;
    }

    protected override Expression VisitParameter(ParameterExpression node)
    {
        // Every time we encounter a lonely parameter, increment.
        numLonelyParameterExpressions++;
        return base.VisitParameter(node);
    }

    protected override Expression VisitMethodCall(MethodCallExpression node)
    {
        // Don't visit parameters that have methods called on them.
         var expr = (node.Object is ParameterExpression)
            ? Expression.Default(node.Object.Type)
            : node.Object;

        // We need to make sure the arguments are visited though.
        return base.VisitMethodCall(node.Update(expr, node.Arguments));
    }

    protected override Expression VisitMember(MemberExpression node)
    {
          // Don't visit parameters with member accesses on them.
          if (node.Expression is ParameterExpression)
              return Expression.Default(node.Type);

          return base.VisitMember(node);
    }

    protected override Expression VisitIndex(IndexExpression node)
    {
         // Same idea here.
         var expr = (node.Object is ParameterExpression)
             ? Expression.Default(node.Object.Type)
             : node.Object;

         return base.VisitIndex(node.Update(expr, node.Arguments));
    }
} 
```

# html - IE9 空白 css 和对齐

> ID：12747511
> 
> 赞同：3
> 
> 时间：2012-10-05T13:39:22.603
> 
> 标签：html, css, internet-explorer-9, vertical-alignment, html-table

我遇到的问题是我需要在 TD 文本上保留空白，同时仍然垂直对齐 TD 中的文本。启用时`white-space: pre-wrap`，文本在 TD 内底部对齐。如果我禁用该标签，那么 IE 会在每个字母之间去掉一个空格。

```
<td width="10%" class="someClass" style="white-space: pre-wrap;">    
    hh    ee  lll oooo
</td> 
```

这是用于那个的CSS

```
.someClass {
  text-align: left;
  text-indent: 0px;
  padding-top: 1px;
  padding-bottom: 2px;
  font-size: 1em;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:48:14.560

如果您将文本包装在 pre 标签中，则应保留您的间距

```
<td width="10%" class="someClass" style="white-space: pre-wrap;">    
    <pre>hh    ee  lll oooo</pre>
</td>​ 
```

小提琴：http: [//jsfiddle.net/BLSully/hb4aU/2/](http://jsfiddle.net/BLSully/hb4aU/2/)

# ios - 如何在没有气泡包装的情况下测试 ios 版本

> ID：12747513
> 
> 赞同：3
> 
> 时间：2012-10-05T13:39:34.780
> 
> 标签：ios, rubymotion

我想通过使用在 ios6 上打开地图，`MKMapItem`但我也想使用谷歌地图为旧 ios 版本回退......

我不知道在没有 BubbleWrap 的情况下在 ruby​​mtion 上执行此操作导致`Device.ios_version`返回错误

我想在 iOS6 上这样做：

```
address_dictionnary = ({kABPersonAddressStreetKey: @party.place.street, kABPersonAddressCityKey: @party.place.city,kABPersonAddressZIPKey: @party.place.postal_code})
place = MKPlacemark.alloc.initWithCoordinate(@coords, addressDictionary: address_dictionnary)
mapItem = MKMapItem.alloc.initWithPlacemark(place)
mapItem.name = "#{@party.name}"
options = ({
   MKLaunchOptionsDirectionsModeKey: MKLaunchOptionsDirectionsModeDriving
})
mapItem.openInMapsWithLaunchOptions(options) 
```

这在旧版本上：

```
url = "http://maps.google.com/maps?saddr=#{@party.place.location[1]},#{@party.place.location[0]}&daddr=#{@party.place.location[1]},#{@party.place.location[0]}"
App::open_url(url) 
```

谢谢你的帮助

* * *

然后当我做正确的测试时：当我做测试并在 IOS 5.1 上运行它时，我有这个错误

```
dyld: Symbol not found: _MKLaunchOptionsDirectionsModeDriving 
```

这是我的代码：

```
if Utils.older_than_ios6?
  url = "http://maps.google.com/maps?saddr=#{@party.place.location[1]},#{@party.place.location[0]}&daddr=#{@party.place.location[1]},#{@party.place.location[0]}"
  App::open_url(url)
else
  address_dictionnary = ({kABPersonAddressStreetKey: @party.place.street, kABPersonAddressCityKey: @party.place.city,kABPersonAddressZIPKey: @party.place.postal_code})
  place = MKPlacemark.alloc.initWithCoordinate(@coords, addressDictionary: address_dictionnary)
  mapItem = MKMapItem.alloc.initWithPlacemark(place)
  mapItem.name = "#{@party.name}"
  options = ({
     MKLaunchOptionsDirectionsModeKey: MKLaunchOptionsDirectionsModeDriving
  })
  mapItem.openInMapsWithLaunchOptions(options)
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T13:49:26.337

通过检查源代码`Device.ios_version`，您可以看到它返回`UIDevice.currentDevice.systemVersion`。所以这应该可以解决问题！

# c - 在 Cygwin/MinGW 中安装/编译 - 如何设置包含“路径”？（符号链接？）

> ID：12747515
> 
> 赞同：6
> 
> 时间：2012-10-05T13:39:35.677
> 
> 标签：c, windows-7, makefile, cygwin, mingw

我一直在尝试使用 Cygwin 和 MinGW 在 Windows 7 中安装/编译 C 库。但是，我在以下期间遇到了这样的错误`make`：

```
sys/resource.h: No such file or directory
sys/times.h: No such file or directory 
```

我以前认为这可能是特定库的问题，并在这里询问：[Various questions installed igraph in Visual Studio 2010 and Cygwin/MinGW ("sys/time.h not found")](https://stackoverflow.com/questions/12737397/sys-time-h-not-found-error-when-installing-igraph-in-cygwin-and-mingw)，但在遇到不同库的相同错误后，我认为问题出在我的头上。

**试图**

`cygwin/usr/include/sys/times.h`并且`cygwin/usr/include/sys/resource.h`存在。在获得有关符号链接的建议后，我曾经`ln -s /usr/include/sys sys`确保它`sys/times.h`有效。

我去看`make`了特定库（igraph）的输出。它说它进入了一个“src”文件夹。所以，我去了 src 文件夹并做了同样的事情：`ln -s /usr/include/sys sys`并确保它`sys/times.h`也在 src 文件夹中工作。

但是，我仍然得到：

```
fatal error: sys/times.h: No such file or directory 
```

**问题**

如何设置“路径”`make`以在 /usr/include/sys 文件夹中查找“sys/times.h”或其他文件？我在这里想念什么？

附言

请多多包涵，因为我通常是 Windows 用户，不熟悉 Linux 术语。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T10:09:30.113

经过多方调查，问题原来是这样的：

1.  MinGW 没有 sys/times.h。
2.  Cygwin 有，但我的 Cyqwin 使用的是我的 python 目录中的 gcc，这是 MinGW 的 gcc。

这是在尝试解决此处的另一个问题时发现的：

[无法在 Cygwin 中使用 #include <sys/times.h> 编译 C 代码](https://stackoverflow.com/questions/12749529/cannot-compile-c-code-with-include-sys-times-h-in-cygwin)

所以事实证明，我的问题与包含路径或制作符号链接无关，而是 gcc 版本/类型错误。这个事实让我无法理解，因为我正在运行 Cygwin 的全新安装，并且不知道它会在我的 Python 文件夹中自动使用 MinGW 的 gcc。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:51:26.527

见[http://mail.kde.org/pipermail/kde-windows/2006-May/000194.html](http://mail.kde.org/pipermail/kde-windows/2006-May/000194.html) ，正如他们所说，即使将times.h放在那里，mingw也可能无法实现其功能

运行 ./configure 时，我得到了这个（很难注意到） [![](../Images/835862d5715399e39a6a26eb0182d14a.png)](https://i.stack.imgur.com/VUJDM.png)

所以首先尝试复制 times.h 然后使用 ./configure 看看这个错误是否不存在

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T05:27:02.140

**使用 minGW 构建 libigraph 而没有“sys/times.h”**

这对于所有构建“igraph”并且不想用“cygwin”而是用“mingw”创建它可能很有趣。

在我的“msys / mingw”环境中，我的“源代码”在“C:\msys\1.0\src”目录中。
igraph 目录 == **C:\msys\1.0\src\igraph-0.6**

*   运行 c:\msys\1.0\msys.bat
*   cd 到顶部根**cd /**
*   cd to igraph **cd usr/src/igraph-0.6**
    **注意：****C:\msys\1.0\**中没有**usr**文件夹。注意不要创建**usr**文件夹！
*****   输入**./configure**现在 msys shell 看起来像****

 ******管理员@drserver-p /usr/src/igraph-0.6**
**$ ./configure**

*   点击“输入”

这需要一段时间。

**文件的变化。**

*   转到 igraph-0.6\src
*   使用 Notepadd++ 或其他编辑器打开**“Makefile”**
    转到第 832 行或搜索**libf2c_la_CFLAGS =**在 libf2c_la_CFLAGS =之后
    放置**-DUSE_CLOCK** **=**
    现在看起来像**libf2c_la_CFLAGS = -DUSE_CLOCK -DSkip_f2c_Undefs ...。**
*   打开**igraph-0.6\src\f2c\uninit.c**
*   转到第 182 行或搜索**_control87(EM_DENORMAL**
    注释此行**/* _control87(EM_DENORMAL ..... */**
*   打开**igraph-0.6\src\f2c\s_paus.c**
    转到第 84 行或搜索**pause();**
    注释这一行**/* pause(); */**

*   输入**make**现在 msys shell 看起来像

**管理员@drserver-p /usr/src/igraph-0.6**
**$ make**

*   点击“输入”

如果有效，大约需要 1 小时！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-10T10:37:48.317

你应该检查你的makefile，CFLAGS/CPPFLAGS 有-DWIN32 -D_WINDOWS for windows。换句话说，你永远不应该访问 windows 上的 sys/times 代码分支。****

# ios - NSInvalidArgumentException：无法识别的选择器发送到实例

> ID：12747520
> 
> 赞同：1
> 
> 时间：2012-10-05T13:39:53.503
> 
> 标签：ios, variables, compiler-errors, iboutlet

当我运行我的应用程序时，我收到此错误：

```
 Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-
     [UIRoundedRectButton copyWithZone:]: unrecognized selector sent to instance
     0xcc86970' 
```

为什么我会收到这样的错误？我仔细检查了 IBOutlets 和所有 IBAction 的所有连接。这是我的代码：

菜单视图控制器.h

```
 @interface MenuViewController : UIViewController
<UITableViewDelegate, UITableViewDataSource>{

}

@property (nonatomic, copy) IBOutlet UITableView * tableView;
@property (nonatomic,copy) IBOutlet UILabel *labelTitle;
@property (nonatomic, copy) IBOutlet UIButton *buttonHome;
@property (nonatomic, copy) IBOutlet UIButton *buttonMap;
@property (nonatomic, copy) IBOutlet UIButton *buttonFavorites;

 -(IBAction) pressedHome:(id)sender;
-(IBAction) pressedMap: (id)sender;
-(IBAction) pressedFavorites: (id)sender;

 @end 
```

在 MenuViewController.m

```
 -(IBAction) pressedHome:(id)sender{

     MenuViewController * menu =[[MenuViewController alloc]initWithNibName:@"MenuViewController" bundle:nil];
   [self.navigationController pushViewController:menu animated:YES];

    }

  -(IBAction) pressedMap: (id)sender{

       MapViewController * map =[[MapViewController alloc]initWithNibName:@"MapViewController" bundle:nil];
       [self.navigationController pushViewController:map animated:YES];
   }

  -(IBAction) pressedFavorites: (id)sender{

        FavoritesViewController * favorites =[[FavoritesViewController alloc]initWithNibName:@"FavoritesViewController" bundle:nil];
       [self.navigationController pushViewController:favorites animated:YES];
   } 
```

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T13:50:25.043

删除`copy`. 发生这种情况是因为 UIButton（和其他 UIControls）不符合`NSCopying`协议，因此复制它们的调用失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:48:25.997

删除`copy`以下属性

```
@property (nonatomic) IBOutlet UITableView * tableView;
@property (nonatomic) IBOutlet UILabel *labelTitle;
@property (nonatomic) IBOutlet UIButton *buttonHome;
@property (nonatomic) IBOutlet UIButton *buttonMap;
@property (nonatomic) IBOutlet UIButton *buttonFavorites; 
```

# asp.net-mvc - 如何记录从 OutputCache 中删除项目的原因和时间

> ID：12747521
> 
> 赞同：3
> 
> 时间：2012-10-05T13:39:55.170
> 
> 标签：asp.net-mvc, asp.net-mvc-4, outputcache

我有一个使用输出缓存的操作

在操作呈现的视图上，我显示当前时间以检查输出是否来自缓存：

```
 <!-- CacheCheck <%= DateTime.Now.ToString()%>--> 
```

我意识到当网站受到一些压力时，只要在 web.config 中指定，页面就不会被缓存。有没有办法可以检查为什么缓存的内容被删除？我通常使用类似的东西：

```
 HttpRuntime.Cache.Add(manufacturersCacheKey, manufacturers, null, DateTime.MaxValue, TimeSpan.FromDays(10), CacheItemPriority.Default, new CacheItemRemovedCallback(this.RemovedCallback));

public void RemovedCallback(String cacheKey, Object cacheValue, CacheItemRemovedReason reason)
{
    _log.InfoFormat("RemovedCallback Cache Bereich {0} Grund: {1}", cacheKey, reason);
} 
```

但是我找不到通过输出缓存来做到这一点的方法。

这是我的代码：

```
[OutputCache(CacheProfile = "HomeCaching")]
public ActionResult Index(HomeViewModel model) 
```

它在 web.config 中设置如下：

```
<caching>
  <outputCacheSettings>
    <outputCacheProfiles>
      <clear />
      <add name="HomeCaching" enabled="false" duration="120" varyByCustom="homecaching" location="Server" />
    </outputCacheProfiles>
  </outputCacheSettings>
</caching> 
```

varyByCustom 方法是这样工作的：

```
 public override string GetVaryByCustomString(HttpContext context, string arg)
    {
        if (arg.ToLower() == "homecaching")
        {
            string rval = "";
            HttpCookie cookieBrowserOverride = context.Request.Cookies.Get(".ASPXBrowserOverride");
            if (context.Request.Browser.IsMobileDevice && cookieBrowserOverride == null
                || !context.Request.Browser.IsMobileDevice && cookieBrowserOverride != null
                )
            {
                rval = "mobile-";
            }
             rval += context.Request.Url.ToString();
             HttpCookie cookieASPXAUTH = context.Request.Cookies.Get(".ASPXAUTH");
             if (cookieASPXAUTH != null)
            {
                if (cookieASPXAUTH.Value.Length > 0)
                {
                    rval = rval + "auth";
                }
            }
            if (rval.Length > 0)
            {
                return rval;
            }
            return "";
        }
        return base.GetVaryByCustomString(context, arg);
    } 
```

# php - CakePHP 分页路由

> ID：12747523
> 
> 赞同：0
> 
> 时间：2012-10-05T13:39:58.307
> 
> 标签：php, cakephp, pagination

我的应用程序中有以下两条路由用于分页：

```
Router::connect('/news', array(
    'controller' => 'posts', 'action' => 'index','page' => 1
));

Router::connect('/news/page/:page*', 
    array('controller' => 'posts', 'action' => 'index'), 
    array('named' => array('page' => '[\d]+'))
); 
```

想法是第 1`/news`页是第 2 页是`/news/page/2`

它只是显示第一页......任何想法是什么问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:49:59.240

首先，如果您的操作接受普通参数，则不需要使用命名参数：

```
public function index($page = 1) {} // defaults to page 1 
```

开箱即用，这将使以下 URL 工作：

```
/news ---------> NewsController::index(null); // defaults to page 1
/news/index/1 -> NewsController::index(1);
/news/index/2 -> NewsController::index(2);
etc. 
```

现在只需添加一个路由来映射`/news/page/*`到`index`动作而不是`page`动作：

```
Router::connect('/news/page/*', array('controller' => 'news', 'action' => 'index')); 
```

结果：

```
/news/page/2 -> NewsController::index(2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:43:44.813

CakePHP 有一个内置的 PaginationComponent 用于获取数据，还有一个 PaginationHelper 用于视图中的分页链接。

[http://book.cakephp.org/2.0/en/core-libraries/components/pagination.html](http://book.cakephp.org/2.0/en/core-libraries/components/pagination.html) http://book.cakephp.org/2.0/en/core-libraries/helpers/paginator.html#PaginatorHelper

您无需为分页设置路线。

好的，如果您想要自定义路由，请将其更改为：

```
 Router::connect('/events', array('controller' => 'events', 'action' => 'index','page' => 1));
    Router::connect('/events/page/:page', array('controller' => 'events', 'action' => 'index'), array('page' => '[\d]+'));

    //find your data in params
    $this->request->params['page']; 
```

# visual-studio-2010 - VS2010 和 VS2012 “Script Documents” 部分从未出现，我无法调试 JavaScript

> ID：12747525
> 
> 赞同：4
> 
> 时间：2012-10-05T13:40:03.327
> 
> 标签：visual-studio-2010, debugging, visual-studio-2012, visual-studio-debugging, debug-symbols

工具：

Windows 7、Visual Studio 2010 和 2012、IE 9、ASP.NET 4.0、MVC4

直到几天前，我还能够使用解决方案资源管理器中的脚本文档部分进行调试。现在，开始调试 (F5) 时不会出现 Scripts Documents 部分。

**我确实将IE设置为默认浏览器。**

**使用“调试器；” 没有效果。**

**配置设置为“活动（调试）”。**

**Silverlight 调试已关闭。**

**我已经“修复”了 Visual Studio 2010 的诞生。**

我不知道如何纠正这种令人沮丧的情况。我做了什么让 VS 众神不悦？

感谢您的任何建议！

阿诺德

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T17:21:15.077

这个修复工作让我恢复了 Script Documents 节点：

1.  在解决方案资源管理器中的网站项目中，右键单击任何“ol .aspx”页面，然后单击“浏览方式...”
2.  选择另一个浏览器（Chrome、Firefox）并单击“设为默认值”并关闭窗口
3.  通过调试器启动您的网站。完成后，停止调试器。
4.  重复步骤 1 和 2，但在步骤 2 中选择 Internet Explorer 作为“设置为默认值”
5.  重复步骤 3，它应该可以工作。这将使您的 javascript 调试恢复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-05T19:49:38.690

当我从 ie10 降级到 ie9 以匹配这里的用户社区时，我最初遇到了同样的情况。

删除元标记对我没有任何影响。那里并不奇怪。

感谢 User1503081 的建议，我终于通过修复安装 VS2012 Update 3 解决了这个问题。会直接给 User1503081 道具，但我的“声誉点”没有加起来。:-(

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-18T04:03:35.987

我尝试了上述答案（至少那些相关的答案），但在重新运行 VS2012 更新 2 时找到了解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T13:49:05.303

对于任何可能面临同样问题的人，我想我已经弄清楚了。我花了几天几夜在这上面扯头发，还有我的日常职责。不幸的是，我无法完成“真正的”工作，因为我在追求工具的陌生性。

我在_Layout.cshtml中有以下行：

![在此处输入图像描述](../Images/bd63299543dbdd68f842288fc968c6b7.png)

**当我删除该行时，脚本文档重新出现。**

我将把它标记为“已解决”，但是，如果其他人可以提供软件行为的原因，我想理解。

谢谢，

阿诺德

# c# - .NET 2.0/3.5 应用程序无法连接到强制连接到 TLS 1.1 的 Ubuntu 12.04 上的 Web 服务

> ID：12747526
> 
> 赞同：1
> 
> 时间：2012-10-05T13:40:05.107
> 
> 标签：c#, https, mono, openssl, ubuntu-12.04

我有一个使用[Ubuntu 12.04](http://en.wikipedia.org/wiki/List_of_Ubuntu_releases#Ubuntu_12.04_LTS_.28Precise_Pangolin.29)（Precise Pangolin）和[Mono](http://en.wikipedia.org/wiki/Mono_%28software%29)成功引用并调用本地开发服务器上的 Web 服务的 C# 2.0 编写和编译的客户端应用程序，但从未进行更新。调用类似的 URL

```
https://192.168.1.22/service.asmx 
```

然后，我使用相同的配置将此 Web 服务上传到[Amazon EC2](http://en.wikipedia.org/wiki/Amazon_Elastic_Compute_Cloud)上的生产服务器，但更新的是 Ubuntu 12.04。在客户端应用程序中，只需将 URL 更改为`https://myserver.com/service.asmx`.

但是我的客户端应用程序无法连接。调试消息显示为：

> 从传输流接收到意外的 EOF 或 0 字节。

我可以在网络浏览器上打开网络服务描述页面，这意味着网络服务工作正常。

我花了一个小时试图解决这个问题，但没有运气。最后我发现了两台服务器之间的区别。

在浏览器中，本地服务器的 SSL 连接使用 TLS 1.0，而 EC2 服务器的 SSL 连接使用 TLS 1.1。我搜索了一下，发现 .NET Framework 2.0 只支持 TLS 1.0 之类的。

我找不到如何在 Apache 2 中禁用 TLS 1.1。

我不知道这是否是Ubuntu 12.04 或 Mono 或 .NET 上的[OpenSSL中的错误。](http://en.wikipedia.org/wiki/OpenSSL)我仍在努力寻找解决方案。

# java - 移动 Hibernate 工具以构建时间

> ID：12747527
> 
> 赞同：17
> 
> 时间：2012-10-05T13:40:07.133
> 
> 标签：java, performance, hibernate, jpa, orm

我有一个包含大约 3000 个实体的应用程序（我知道它很多，但我无法更改它）。当应用程序加载时，Hibernate 需要一分钟来完成所有检测和 SessionFactory 设置工作。
我想知道是否可以将 Hibernate 配置为在构建期间对原始类进行检测。
这样我可以避免 3000 个额外生成的代理类和应用程序启动的巨大开销。
我在 Hibernate 构建时检测`org.hibernate.tool.instrument.javassist.InstrumentTask`（
任何有关如何将代理生成移动到构建时间的信息将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T16:12:35.380

是的你可以。Hibernate 代码中有一个 Ant 任务：`org.hibernate.tool.instrument.javassist.InstrumentTask`.

```
<target name="instrument" depends="compile">
    <taskdef name="instrument" classname="org.hibernate.tool.instrument.javassist.InstrumentTask">
        <classpath refid="<some-ant-path-including-hibernate-core-jar>"/>
        <classpath path="<your-classes-path>"/>
    </taskdef>

    <instrument verbose="true">
        <fileset dir="<your-classes>">
            <include name="*.class"/>
        </fileset>
    </instrument>
</target> 
```

我也见过一些基于 Maven 的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-06T19:50:17.930

从 Hibernate 4.2.8 开始，您可以使用 hibernate-enhance-maven-plugin：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.hibernate.orm.tooling</groupId>
            <artifactId>hibernate-enhance-maven-plugin</artifactId>
            <executions>
                <execution>
                    <phase>process-test-resources</phase>
                    <goals>
                        <goal>enhance</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-22T14:34:27.990

在互联网上找到了解决方案。迅速尝试了它，它似乎工作。希望我不会迟到。。

这个想法是使用 maven-antrun-plugin。你需要在 build/plugins 部分的 pom.xml 中有这个。

在下面的示例中，不要忘记： - 将 ${hibernate.version} 和 ${javassist.version} 替换为您正在使用的版本。- 修改包含规则以使 InstrumentTask 仅在您的实体上运行

```
<plugin>
            <artifactId>maven-antrun-plugin</artifactId>
            <executions>
                <execution>
                    <id>Instrument domain classes</id>
                    <configuration>
                        <tasks>
                            <taskdef name="instrument"
                                     classname="org.hibernate.tool.instrument.javassist.InstrumentTask">
                                <classpath>
                                    <path refid="maven.dependency.classpath"/>
                                    <path refid="maven.plugin.classpath"/>
                                </classpath>
                            </taskdef>
                            <instrument verbose="true">
                                <fileset dir="${project.build.outputDirectory}">
                                    <include name="**/model/**/*.class"/>
                                </fileset>
                            </instrument>
                        </tasks>
                    </configuration>
                    <phase>process-classes</phase>
                    <goals>
                        <goal>run</goal>
                    </goals>
                </execution>
            </executions>
            <dependencies>
                <dependency>
                    <groupId>org.hibernate</groupId>
                    <artifactId>hibernate-core</artifactId>
                    <version>${hibernate.version}</version>
                </dependency>

                <dependency>
                    <groupId>javassist</groupId>
                    <artifactId>javassist</artifactId>
                    <version>${javassist.version}</version>
                </dependency>
            </dependencies>
        </plugin> 
```

# python - 只能通过串口读取一个字节

> ID：12747528
> 
> 赞同：5
> 
> 时间：2012-10-05T13:40:14.953
> 
> 标签：python, c, windows, linux, serial-port

我的机器上有一个 C/Python 设置，我正在对串行通信进行一些测试，出于某种原因，我从不读取超过 1 个字节。

我的设置：我有一台 Windows 7 机器，在虚拟机中运行 OpenSUSE。我有 2 个 USB-RS232 转换器和它们之间的适配器（所以它是从一个 USB 端口到另一个的循环）。

在 Windows 端，我能够让它们通过 Python 到 Python 和 C 到 Python 相互通信。一旦我使用 Linux VM，我就可以从 C (Linux) 到 Python (Windows) 获取数据，但是当我反过来做时，我只能得到 1 个字节。我认为我打开文件或在 Linux C 代码上执行读取的方式有问题，但我不确定可能是什么问题。

Python 代码（使用 PySerial）：

```
>>> import serial
>>> ser = serial.Serial(3)
>>> ser
Serial<id=0x2491780, open=True>(port='COM4', baudrate=9600, bytesize=8, 
parity='N', stopbits=1, timeout=None, xonxoff=False, rtscts=False, dsrdtr=False)
>>> ser.read(5)
'Hello'
>>> ser.write("hi you")
6L 
```

C代码：

```
#include <stdio.h>
#include <string.h>
#include <unistd.h>
#include <fcntl.h>
#include <errno.h>
#include <termios.h>

int open_port()
{
    int fd;
    fd = open("/dev/ttyUSB0", O_RDWR | O_NOCTTY | O_NDELAY);
    if(fd < 0)
      perror("open_port: Unable to open /dev/ttyUSB0 - ");
    else
      fcntl(fd, F_SETFL, 0);
    return fd;
}

int swrite(int fd, char * str)
{
    int n;
    n = write(fd, str, strlen(str));
    if (n<0)
        printf("write() of %d bytes failed\n", strlen(str));
    return n;
}

int main()
{
    int fd, databytes;
    char buf[100] = {0};
    struct termios options;

    fd = open_port();

    //Set the baud rate to 9600 to match
    tcgetattr(fd, &options);
    cfsetispeed(&options, B9600);
    cfsetospeed(&options, B9600);
    tcsetattr(fd, TCSANOW, &options);
    tcgetattr(fd, &options);

    databytes = swrite(fd, "Hello");
    if(databytes > 0)
      printf("Wrote %d bytes\n", databytes);

    databytes = read(fd, buf, 100);
    if(databytes < 0)
      printf("Error! No bytes read\n");
    else
      printf("We read %d bytes, message: %s\n", databytes, buf);

    close(fd);

    return 0;
} 
```

我回来了：

```
mike@linux-4puc:~> gcc serial_com.c
mike@linux-4puc:~> ./a.out 
Wrote 5 bytes
We read 1 bytes, message: h 
```

所以 Linux->Windows 写入工作正常，python 显示正确的“Hello”字符串，但由于某种原因，我在 Windows->Linux 方面只得到一个字节。

有人看出有什么不对吗？

**编辑：**
根据我得到的反馈，我尝试了对代码的两个调整。听起来我不能保证所有数据都在那里，所以我试过了：

1) 睡觉

```
 if(databytes > 0)
      printf("Wrote %d bytes\n", databytes);
    sleep(15);                 // Hack one to get the data there in time, worked
    databytes = read(fd, buf, 100); 
```

2）一个while循环

```
while(1){  // Hack two to catch the data that wasn't read the first time. Failed
           // this only saw 'h' like before then sat waiting on the read()
  databytes = read(fd, buf, 100);
  if(databytes < 0)
    printf("Error! No bytes read\n");
  else
    printf("We read %d bytes, message: %s\n", databytes, buf);
} 
```

似乎循环不起作用，所以未读取的数据会被丢弃吗？ **/编辑**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T13:45:12.173

来自[read(2) 手册](http://linux.die.net/man/2/read)；

> 成功时，返回读取的字节数（零表示文件结束），文件位置提前该数字。**如果此数字小于请求的字节数，则不是错误；例如，这可能会发生，因为现在实际可用的字节数较少（可能是因为我们接近文件结尾，或者因为我们正在从管道或终端读取）**

换句话说，由于您在写入后立即从套接字读取并且您的计算机比串行端口快得多，*因此很可能只有一个字符可供读取*并且`read(2)`仅返回该字符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T13:44:47.847

[阅读](http://linux.die.net/man/2/read)的手册页说

> ...尝试读取最多 count 个字节...

您的代码看起来假设完整的缓冲区将始终由单个`read`;返回。它对通过多次调用返回的数据有效。

检查`read`返回 -1`errno == EINTR`并在此之后重试也是一个好习惯（`TEMP_FAILURE_RETRY`如果在 GNU 系统上运行，则使用）。 `read`如果被信号中断，可能会返回瞬态错误。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-05T14:06:59.553

正如其他人所回答的那样，C read() 函数通过仅返回一个字节来履行其合同。

C read() 和 Python read() 函数完全不同。

PySerial 说，关于 read()，

> 从串口读取 size 字节。如果设置了超时，它可能会根据请求返回更少的字符。如果没有超时，它将阻塞，直到读取请求的字节数。

虽然 C API 没有做出这样的保证。它将返回缓冲区中可用的任何字符（即使是 0，如果那里还没有任何字符）。

如果您希望 C 端的行为与 Python 端一样，则需要使用不同的函数。像这样的东西：

```
int read_exact_chars(int fildes, char *buf, size_t nbyte)
{
    ssize_t chars_read;
    int chars_left = nbyte;
    while (chars_left) {
        chars_read = read(fildes, buf, chars_left)
        if (chars_read == -1) {
            /* An error occurred; bail out early. The caller will see that
               we read fewer bytes than requested, and can check errno
             */
            break;
        } else {
            buf += chars_read;
            chars_left -= chars_read;
        }
    }
    /* return the actual number of characters read */
    return nbyte - chars_left;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-17T20:12:08.420

得到了一些好的答案并对此进行了煽动（周围都是+1！），虽然所有答案都得出了正确的结论（关于阅读没有得到数据），但没有一个输入实际上“解决”了我遇到的问题。

这是我最终如何让它工作的方法：

结构中的设置要了`termios`我的命。当我设置**一些**标志时，我并没有设置所有标志。所以这：

```
tcgetattr(fd, &options);
cfsetispeed(&options, B9600);
cfsetospeed(&options, B9600);
tcsetattr(fd, TCSANOW, &options); 
```

改为：

```
tcgetattr(fd, &options);
cfsetispeed(&options, B19200);
cfsetospeed(&options, B19200);
options.c_iflag = 0; // Disable Input flags
options.c_lflag = 0; // Disable Local mode flags
options.c_oflag = 0; // Disable Output flags
options.c_cflag = (options.c_cflag & ~CSIZE) | CS8; //Data bits per character (8)
options.c_cc[VMIN] = 50;  // Wait for 50 characters or
options.c_cc[VTIME] = 50; // Wait for 5 seconds
options.c_cflag |= (CLOCAL | CREAD | HUPCL);   // Ignore modem status lines, 
                                               // enable receiver, 
                                               // and hang up on last close
options.c_cflag &= ~(PARENB | PARODD); //Clearing even and odd parity
options.c_cflag &= ~CSTOPB;            //Clear double stop bits
tcsetattr(fd, TCSANOW, &options); 
```

通过这些更改，我现在可以在我用 Python 编写的 C Linux 代码中获取数据。

我使用这两个来源获得了很多关于`termios`结构选项的“事实”：

1.  [标志说明](http://www.qnx.com/developers/docs/6.3.2/neutrino/lib_ref/t/termios.html)
2.  [快速概览](http://www.unixguide.net/unix/programming/3.6.2.shtml)

# c# - 如何获取目录中每个pdf文档中的页数

> ID：12747533
> 
> 赞同：0
> 
> 时间：2012-10-05T13:40:36.463
> 
> 标签：c#, linq, c#-4.0, pdf, c#-3.0

> **可能重复：**
> [使用 C# (.NET 2.0) 确定 PDF 文件中的页数](https://stackoverflow.com/questions/320281/determine-number-of-pages-in-a-pdf-file-using-c-sharp-net-2-0)

我使用以下代码来获取目录中 pdf 文件的数量。

```
 var extensions = new HashSet<string>(StringComparer.OrdinalIgnoreCase) 
    {
        ".pdf", 
    };
    var baseDir = BatchFolderPath;
    var pdfFilesCount = Directory.EnumerateFiles(baseDir)
                                 .Count(filename =>
                                        extensions.Contains(Path.GetExtension(filename))); 
```

我不知道如何获取目录中每个 pdf 文档中的页数。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T13:48:00.537

类似的问题已经[在这里](https://stackoverflow.com/questions/320281/determine-number-of-pages-in-a-pdf-file-using-c-sharp-net-2-0)被问过 Stack Overflow 。希望能帮助到你。

**编辑：**
这是您可以找到指定目录中存在的每个 pdf 文件的页数的方法：

```
using System;
using iTextSharp.text.pdf;
using System.IO;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            int PgCount = 0;
            string[] PdfFiles = Directory.GetFiles(@"C:\MyFolder\", "*.pdf");
            Console.WriteLine("{0} PDF Files in directory", PdfFiles.Length.ToString());
            for (int i = 0; i < PdfFiles.Length; i++)
            {
                PgCount = GetNumberOfPages(PdfFiles[i]);
                Console.WriteLine("{0} File has {1} pages", PdfFiles[i], PgCount.ToString());
            }
            Console.ReadLine();
        }

        static int GetNumberOfPages(String FilePath)
        {
            PdfReader pdfReader = new PdfReader(FilePath); 
            return pdfReader.NumberOfPages; 
        }
    }
} 
```

您必须从[此处](http://sourceforge.net/projects/itextsharp/)下载 itextsharp.dll并将其包含在参考资料中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:45:25.903

有几个库可以处理来自 c# 的 pdf。考虑

1.  [iTextSharp](http://itextpdf.com/)
2.  [报告网](http://report.sourceforge.net/)
3.  [夏普PDF](http://sharppdf.sourceforge.net/)
4.  [PDFsharp](http://www.pdfsharp.com/PDFsharp/)
5.  [PDFjet 开源版](http://pdfjet.com/os/edition.html)

# c# - 通过 slug 获取内容项的正确方法

> ID：12747534
> 
> 赞同：2
> 
> 时间：2012-10-05T13:40:38.990
> 
> 标签：c#, .net, nhibernate, orchardcms

我需要通过它的 url 获取内容项，现在我正在使用以下代码：

```
 var item =
     Services.ContentManager.Query<AutoroutePart, AutoroutePartRecord>().Where(
         x => x.DisplayAlias == url)
         .List()
         .FirstOrDefault(); 
```

但它看起来不像“正确”的方式。什么是更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:43:50.220

虽然它看起来不是很好，但这是完全正确的方法。该`Where`子句直接转换为 SQL，因此您最终会得到一个很好的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T10:48:00.990

[是的，我在文化选择器](http://gallery.orchardproject.net/List/Modules/Orchard.Module.Orchard.CulturePicker)模块中的做法完全相同。

顺便说一句，据我所知，`ToLower()`目前在 Orchard 中使用的 NHibernate 2.x 的 LINQ 提供程序不支持该方法。

# ruby-on-rails - Rails 应用程序的 RESTfull 客户端

> ID：12747537
> 
> 赞同：0
> 
> 时间：2012-10-05T13:40:41.657
> 
> 标签：ruby-on-rails, rest, sinatra

我想用 ruby​​ 开发一个可以与 Rails 服务通信的 REST 客户端。是否有任何框架可以让我轻松上手，而无需从头开始重新编码。我正在寻找类似“sinatra”的东西，但对于客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:42:06.423

试试 RestClient gem。这几乎是你所要求的。当然，它是一个库，而不是一个框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T13:19:35.870

就像 Satya 所说，[rest-client](https://github.com/archiloque/rest-client)非常好。但是由于您特别提到了 sinatra 作为参考点，我认为[法拉第](https://github.com/technoweenie/faraday)值得一看。

# android - Android 将数据存储到缓存中的时间是多少？或者，存储的最大数据大小是多少？

> ID：12747538
> 
> 赞同：0
> 
> 时间：2012-10-05T13:40:43.907
> 
> 标签：android, image, caching

现在，我正在使用以下方法来加载图像：

 **```
public static Drawable loadCachedImage(String strUrl) {
    try {
        URL url = new URL(strUrl);
        URLConnection connection = url.openConnection();
        connection.setUseCaches(true);
        Object response = connection.getContent();
        if (response instanceof Bitmap) {
            Bitmap bitmap = (Bitmap)response;
            return new BitmapDrawable(bitmap);
        } else {
            InputStream is = (InputStream) connection.getContent();
            return Drawable.createFromStream(is, "src name");
        }
    } catch (Exception e) {}
    return null;
} 
```*  *AFAIK，它使用 Android 的默认缓存。所以，我想知道它存储给定应用程序信息的时间（或存储的最大数据大小）。是设置配置吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:53:21.843

缓存范围取决于您的默认缓存存储，因为我们知道市场上有许多其他应用程序可以清除您的缓存以用于其他用途。`Settings->Application->Manage application->your app` 或者，如果用户可以在此显示应用程序的总大小中手动清除缓存。**

# c++ - 如何在不同的目标平台上以编程方式智能注册 32 位 COM/DLL 组件？

> ID：12747542
> 
> 赞同：1
> 
> 时间：2012-10-05T13:40:49.587
> 
> 标签：c++, windows, com, 64-bit

我曾经使用以下函数在 Window XP 和 Windows 7 等 32 位 Windows 平台上注册我的 32 位 COM/DLL 组件。它工作正常。但在 64 位 Windows 7 上运行时，该功能无法注册成功。结果如预期！

```
int RegisterComponent(LPCTSTR lpszDllName)
{   
    // Load the library
    HINSTANCE hLib = LoadLibrary(lpszDllName);

    if (hLib == NULL)
    {  
       return -2;            
    }

    typedef HRESULT (CALLBACK *HCRET)(void);
    HCRET lpfnDllRegisterServer;

    // Find the entry point
    lpfnDllRegisterServer = (HCRET)GetProcAddress(hLib, "DllRegisterServer");

    if (lpfnDllRegisterServer == NULL)
    {  
       return -3;            
    }

    // Call the function by function pointer..
    if (FAILED((*lpfnDllRegisterServer)()))            
    {   
       //DLL Registration failed..
       return -4;            
    }

    FreeLibrary(hLib);

    return 0;
} 
```

我可以使用以下命令手动注册 32 位 COM 组件：C:\Windows\SysWOW64>regsvr32

如何在不同的目标平台（例如，X86 和 X64）上以编程方式智能地注册 32 位 COM/DLL 组件？

```
int RegisterComponent(LPCTSTR lpszDllName)
{  
    if ( IsWow64() )
    {  
       ...
    }
    else
    {  
       ... 
    }

    return 0;
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T14:16:15.983

32 位 DLL 可以加载到 32 位进程中，64 位 DLL 可以加载到 64 位进程中。您的代码（连续）可以是 32 位或 64 位。也就是说，如果不启动正确的位数进程，就无法注册不同位数的 DLL。

你有选择：

1.  做 regsvr32 做的事情。让您的代码同时包含 32 位和 64 位二进制文​​件，一旦您检测到 DLL 的错误位数，请运行子辅助进程来处理该 DLL。

2.  只需让 regsvr32 为您完成，`CreateProcess`“regsvr32 the-DLL /s”它就会进行注册，或者启动另一个自己的孩子来注册不同的位数。

3.  （琐碎）让安装程序进行注册，并且那些已经知道如何处理位数。

# php - 打印 SimpleXMLElement 对象

> ID：12747543
> 
> 赞同：-2
> 
> 时间：2012-10-05T13:40:51.970
> 
> 标签：php, simplexml, printf

我有一个这样的 SimpleXMLElement：

```
SimpleXMLElement Object ( [trailer] => SimpleXMLElement Object (
[title] => This is the title
[link] => http://example.com
[trailer_id] => 60373
[embed] => SimpleXMLElement Object ( ) ) ) 
```

我已经用谷歌搜索了两个小时，但找不到如何**打印 "trailer_id"**。有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:42:39.097

它们是对象，请尝试：

```
echo $xml->trailer->trailer_id; 
```

# c# - 我可以将 SMS Storage 映射到本地文件夹吗？

> ID：12747545
> 
> 赞同：1
> 
> 时间：2012-10-05T13:40:54.657
> 
> 标签：c#, serial-port, gsm, at-command

我可以将本地文件夹映射到 SMS 存储吗？

我正在使用 .NET（串行端口通信）

我知道我可以使用 AT+CPMS= "MT" 等指定 SMS 的存储。

但我希望所有短信都直接进入我的系统，而不是通过 GSM 调制解调器。

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T12:02:56.277

据我所知，它**是否**。为此目的，更好的方法是-

1) 使用 . 继续读取任何传入消息的端口`port.DataReceived event`。

2）您可以使用*正则表达式*将端口上存在的数据与消息格式匹配。如果匹配，则将此消息附加到本地驱动器中的文件中。（*StreamWriter*对此很有用）。

3) 要查看您的调制解调器或 SIM 卡内存没有被新消息填满，请在存储后立即删除已读消息。这样，您将始终有空间接收新的传入消息。

4）一旦你在你的应用程序中设置了这个功能，你最终会得到存储在文件（本地内存）中而不是存储在调制解调器中的消息。

# iphone - iPhone中与此查询相关的正确方法是什么？

> ID：12747548
> 
> 赞同：-1
> 
> 时间：2012-10-05T13:41:11.240
> 
> 标签：iphone, objective-c, ios, uiimageview, uibutton

我想实现一个测验类型的应用程序，其中问题有两种类型。

1) 具有 1 个问题和 4 个选项的 MCQ 类型（其中一个是答案）。

2）它将显示两个图像并点击原始图像和虚拟图像之间的差异（可能是它有4个（或任何随机数）差异）。

这两种类型的问题都是随机显示的。现在问题出在类型 2 问题中，两个图像都是动态加载的，那么如果图像将动态显示，**我该如何设置`UIButton`原始图像和虚拟图像之间差异的虚拟图像？**因为每次的图像都不一样。

我可以将像素设置`database`为`ImageId`这两个图像之间的区别在哪里？ **或者**它有其他替代解决方案而不是这个？

如果与任何文档或任何链接相关，请帮助我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:47:36.697

2种方法

*   您可以使用按钮类型自定义设置图像视图上方的按钮（使用相同的框架）而不添加图像，您将有一个空白按钮并使用其触摸事件来达到目的
*   使用手势识别器，您可以在图像视图本身上设置触摸事件

使用[Asyncimageview](https://github.com/nicklockwood/AsyncImageView)异步加载图片

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:49:41.487

Bittu，对于每个图像，您应该存储：

1.  图像 ID
2.  图像差异（位置/像素）并将其映射到 Image-ID

因此，当您动态显示图像时，获取差异（存储在数据库中，映射到其图像 ID）并使用它来检查用户是否正确点击/触摸了差异。

# java - Android 定位时间到日期

> ID：12747549
> 
> 赞同：2
> 
> 时间：2012-10-05T13:41:14.277
> 
> 标签：java, android, date, time

我正在使用 Location 类和 getTime() 方法来获取 Android 中的当前时间。然后我将该长号码发送到其他设备。该设备接收长数字并应在消息框中显示数据，但我不知道如何将其转换为 DD:MM:YY 和一天中的时间（或者实际上是人类可读的任何内容）。我该怎么做呢？我不能使用当前格式，它必须是普通用户可以阅读的内容。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T13:47:17.273

假设您不想使用[Joda Time](http://joda-time.sf.net)（对于 Android 应用程序可能有点大），您可能应该使用`DateFormat`如下`SimpleDateFormat`：

```
// See notes below
DateFormat format = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss");
Date date = new Date(location.getTime());
String formatted = format.format(date); 
```

但是，您应该考虑一些文化问题：

*   如果您认为默认设置可能不适合您，您可能希望*显式设置区域设置*
*   而不是硬编码格式，您可能想要使用`DateFormat.getDateTimeInstance()`
*   您应该考虑您感兴趣的时区；大概是用户的时区，这应该是`DateFormat`您创建的任何时区的默认值，但也许还有其他东西......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T13:48:03.310

你这样做

```
long longD// as you receive in long format

Date d = new Date(longD);

SimpleDateFormat sdf = new SimpleDateFormat("dd:MM:yy");

String sDate = sdf.format(d); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T13:48:53.453

从这里： http: [//developer.android.com/reference/android/location/Location.html#getTime%28%29](http://developer.android.com/reference/android/location/Location.html#getTime%28%29)您可以看到 getTime 方法从 1970 年 1 月 1 日开始以毫秒为单位返回时间。

这可能有助于如何获得所需的日期格式：[Getting "unixtime" in Java](https://stackoverflow.com/questions/732034/getting-unixtime-in-java)

# microsoft-metro - Metro Style App HTML/JS 写入本地文件

> ID：12747550
> 
> 赞同：1
> 
> 时间：2012-10-05T13:41:15.420
> 
> 标签：microsoft-metro, winjs, windows-store-apps

我已经为 Windows Store 构建了一个应用程序，它使用 Windows.Storage.FileIO（createFileAsync、readTextAsync 和 writeTextAsync）写入本地文件。

我的计划是将该文件用作一个简单的数据库（数据只是 JSON 格式的用户信息）。这是一个坏主意吗？

以这种方式编写的文件是否真的持久（或者在更新应用程序时它们被删除）？用户自己可以删除它们（例如通过删除 cookie/临时 Internet 文件等）吗？

我只是想知道“Metro”环境如何处理应用程序本地写入磁盘的文件......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-05T14:12:51.780

这是否是一个“坏主意”的问题是相当主观的，所以可能不是合适的场所。

但是，就 Windows 应用商店应用程序如何处理您存储的文件而言，如果您使用 Windows.Storage.ApplicationData.current.localFolder 创建和/或编辑文件，这些文件将一直可用，直到用户卸载应用程序。如果您将应用程序的更新推送到商店，并且用户下载并安装更新，则文件将保留在用户的计算机上，除非您以编程方式显式修改它们。

在我构建的两个应用程序中，我利用 localFolder 来存储应用程序数据的 JSON 表示，以便我可以最大限度地缩短启动时间，并在应用程序启动后在后台刷新数据并将其初始 UI 呈现给用户.

这是我的代码（可能会进行一些优化）的样子：

```
appData.current.localFolder.createFileAsync("leaderboard.txt", 
    Windows.Storage.CreationCollisionOption.openIfExists)
.then(function (file) {
    leaderboardFile = file;
    return Windows.Storage.FileIO.readTextAsync(file)
})
.then(function (fileContents) {
    cachedLeaderboard = fileContents;
    if (!cachedLeaderboard || isRefresh) {
        return WinJS.xhr(xhrOptions)
    }
    else {
        cachedLeaderboard = JSON.parse(cachedLeaderboard);
        List = new WinJS.Binding.List(cachedLeaderboard);
        completed(List);
    }
})
.then(function (result) {
    if (result) {
       var items = JSON.parse(result.responseText).d;
       localLeaderboard = items;
       return Windows.Storage.FileIO.writeTextAsync(leaderboardFile, 
           JSON.stringify(localLeaderboard))
    }
})
.then(function () {
    if (!localLeaderboard)
    localLeaderboard = cachedLeaderboard;
    List = new WinJS.Binding.List(localLeaderboard);
    completed(List);
}) 
```

基本上，代码会检查leaderboard.txt文件是否存在（或者调用是否是数据的刷新），如果不存在，则进行XHR调用以获取数据，然后创建一个绑定列表并将其传回给调用者包裹在一个承诺中（承诺代码未显示）。如果文件存在，并且请求不是刷新，我只需解析文本文件并从中创建绑定列表。

希望有帮助！

# ruby-on-rails - 如何使用 Rails 在选择框选项中搜索并删除重复的选项？

> ID：12747553
> 
> 赞同：0
> 
> 时间：2012-10-05T13:41:25.630
> 
> 标签：ruby-on-rails, drop-down-menu, form-helpers

我有这样的任务：当用户编辑他的对象时 - 列表中的第一个选项将是对象的值。

我正在使用以下代码生成我的选择列表：

```
 <%= f.select :category, options_for_select([
      "#{@website.category}",
      "Banking",
      "Computers",
      "Coupons",
      "Directory",
      "Fashion",
      "Finance",
      "Gifts",
      "Maps",
      "Media",
      "Mobile",
      "News",
      "Tickets",
      "Tech blog",
      "Tech website",
      "Trains",
      "Travel",
      "Transportation - general",
       "Recipes",
      "Another... "])%> 
```

谁能建议怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:47:23.733

请参阅此处有关[options_for_select的文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_for_select)

您可以将选择框的默认值（或选定值）设置为第二个参数。在你的情况下，它会像：

```
<%= f.select :category, options_for_select([
  "Banking",
  "Computers",
  "Coupons",
  "Directory",
  "Fashion",
  "Finance",
  "Gifts",
  "Maps",
  "Media",
  "Mobile",
  "News",
  "Tickets",
  "Tech blog",
  "Tech website",
  "Trains",
  "Travel",
  "Transportation - general",
   "Recipes",
  "Another... "], @website.category)%> 
```

希望这可以帮助！

# php - 使用 SQL Server Driver 通过 PDO 连接到 SQL Server

> ID：12747554
> 
> 赞同：33
> 
> 时间：2012-10-05T13:41:27.493
> 
> 标签：php, sql-server, windows, pdo

我正在尝试使用 PDO 和[Microsoft 提供的驱动程序](http://www.microsoft.com/en-us/download/details.aspx?id=20098)连接到现有的 SQL Server 数据库。

我见过使用 odbc、dblib、mssql 等的示例，但是我相信这些驱动程序的连接字符串应该使用“sqlsrv”？

有没有很好的例子说明如何正确地做到这一点？如果我应该通过其他方法执行此操作，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-10-05T14:31:14.777

嗯，关于 PDO 最好的部分是它很容易访问任何数据库。如果您已经安装了这些驱动程序，您应该能够：

```
$db = new PDO("sqlsrv:Server=YouAddress;Database=YourDatabase", "Username", "Password"); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-06-28T22:49:07.217

请注意，根据我的经验以及其他（[PHP - 为什么新的 SQLSRV 驱动程序比旧的 mssql 驱动程序慢？](https://stackoverflow.com/questions/11825949/php-why-is-new-sqlsrv-driver-slower-than-the-old-mssql-driver)），使用 PDO_SQLSRV 比通过 PDO_ODBC 慢得多。

如果您想使用更快的 PDO_ODBC，您可以使用：

```
//use any of these or check exact MSSQL ODBC drivername in "ODBC Data Source Administrator"
$mssqldriver = '{SQL Server}'; 
$mssqldriver = '{SQL Server Native Client 11.0}';
$mssqldriver = '{ODBC Driver 11 for SQL Server}';

$hostname='127.0.0.1';
$dbname='test';
$username='user';
$password='pw';
$dbDB = new PDO("odbc:Driver=$mssqldriver;Server=$hostname;Database=$dbname", $username, $password); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-05T14:31:03.407

想通了。很简单：

```
 new PDO("sqlsrv:server=[sqlservername];Database=[sqlserverdbname]",  "[username]", "[password]"); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-03-25T01:07:26.343

这对我有用，在这种情况下是远程连接：注意：端口对我很重要

```
$dsn = "sqlsrv:Server=server.dyndns.biz,1433;Database=DBNAME";
$conn = new PDO($dsn, "root", "P4sw0rd");
$conn->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

$sql = "SELECT * FROM Table";

foreach ($conn->query($sql) as $row) {
    print_r($row);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-05-19T10:57:30.493

```
$servername = "";
$username = "";
$password = "";
$database = "";
$port = "1433";
try {
    $conn = new PDO("sqlsrv:server=$servername,$port;Database=$database;ConnectionPooling=0", $username, $password,
        array(
            PDO::ATTR_PERSISTENT => true,
            PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION
        )
    );
} catch (PDOException $e) {
    echo ("Error connecting to SQL Server: " . $e->getMessage());
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-29T05:45:43.660

```
try
{

    $conn = new PDO("sqlsrv:Server=$server_name;Database=$db_name;ConnectionPooling=0", "", "");
    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

}
catch(PDOException $e)
{

    $e->getMessage();

} 
```

# regex - 提取两个相似字符串之间的行

> ID：12747558
> 
> 赞同：2
> 
> 时间：2012-10-05T13:41:41.200
> 
> 标签：regex, string, perl, match

我想提取一个给定和一个或多或少随机字符串之间的行。该文件如下所示：

```
\\\\\
\\\\\     start 
\\\\\   
lines
to 
extract
\\\\\
\\\\\     <any string> (must not be start but could be sta*) 
\\\\\ 
```

直到现在，在没有明确知道第二个字符串的情况下，我无法在这两者之间找到界限。通过使用 \w 或 [a-zA-Z] 将第二个字符定义为任何可能的字符，perl 似乎两次匹配第一行，因此只打印“ ----- start ”作为结果。

到目前为止，它看起来像这样：

```
open(FILE,'<','file.txt') or die "Could not open: $!";
while(<FILE>){
  print $_ if (/^\\{5}     start$/ .. /^\\{5}     [a-zA-Z]/);
} 
```

输出是：

```
\\\\\     start 
```

希望有一些想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:01:00.713

使用`...`而不是`..`防止匹配两个表达式。

# maven - 使用重叠组的 TestNG 测试不适用于 Maven 中的 excludeGroups

> ID：12747564
> 
> 赞同：1
> 
> 时间：2012-10-05T13:41:56.340
> 
> 标签：maven, testng

我试图将测试分成组，例如，“FULL”执行组和较轻的“SMOKE”组。我想在主 pom 中有一个默认配置文件，它只运行 SMOKE 组，然后让 CI 服务器激活一个单独的 FULL 组来执行所有测试。

但是，我在让 maven/testng 仅执行 SMOKE 集时遇到了问题。当我将 FULL 组添加到 excludeGroups 时，不会执行任何测试。

我对 maven-surefire-plugin 的有效 pom 是这样的：

```
<plugin>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.6</version>
    <executions>
      <execution>
        <id>default-test</id>
        <phase>test</phase>
        <goals>
          <goal>test</goal>
        </goals>
        <configuration>
          <groups>USER</groups>
          <excludedGroups>FULL</excludedGroups>
        </configuration>
      </execution>
    </executions>
    <configuration>
      <groups>USER</groups>
      <excludedGroups>FULL</excludedGroups>
    </configuration>
  </plugin> 
```

我的测试类是这样注释的：

```
@Test(groups = { "FULL", "SMOKE" }, enabled=true)
public void testOne() { }

@Test(groups = { "FULL" }, enabled=true)
public void testTwo() { } 
```

每个班级为 SMOKE 测试组选择一个具有代表性的测试。我试图省略 excludeGroups 标记，并且只将组标记设置为 SMOKE，但随后所有测试都会执行。

任何有助于我理解 testng 组层次结构的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:09:34.327

首先，当您在 excludeGroups 中给出 FULL 时，预期行为不会运行任何测试，因为它排除了所有拥有它的测试用例。如果你只想运行 SMOKE，你只需要按如下方式分组给 SMOKE。

```
<plugin>
          <artifactId>maven-surefire-plugin</artifactId>
          <version>2.6</version>
          <executions>
              <execution>
                  <id>default-test</id>
                  <phase>test</phase>
                  <goals>
                      <goal>test</goal>
                  </goals>
              </execution>
          </executions>
          <configuration>
              <groups>SMOKE</groups>
          </configuration>
      </plugin> 
```

上面的配置对我来说工作正常。

下面的配置只运行 testTwo()。

```
<configuration>
              <groups>FULL</groups>
              <excludedGroups>SMOKE</excludedGroups>
          </configuration> 
```

测试用例被明确排除在外的唯一情况（我能想到的）是当其他一些测试用例依赖（testng 'depends'）这个测试并且包含该依赖测试用例以供执行时。

# c# - C# 和 MySQL - 字符串替换

> ID：12747565
> 
> 赞同：2
> 
> 时间：2012-10-05T13:41:57.253
> 
> 标签：c#, mysql

这主要是我尝试阅读 C#（我知道 Python、PHP 和 Javascript，但我是 C# 新手）

它也可能是我试图在这里解释的 MySQL。

我有这段代码：

```
 sql_query = "insert into peer_review_info " +
          " (review_id, emp_id, comments_positive, comments_negative )" +
          " values(?review_id, ?employeeid, ?strength, ?weakness) ";
    myCommand = new MySqlCommand(sql_query, connection);            
    Trace.Write("strength = ", strength );
    Trace.Write("areaofimprovement = ", areaofimprovement);
    myCommand.Parameters.Add(new MySqlParameter("?review_id", ViewState["review_id"].ToString()));
    myCommand.Parameters.Add(new MySqlParameter("?employeeid", ViewState["employeeid"].ToString()));
    myCommand.Parameters.Add(new MySqlParameter("?strength", strength));
    myCommand.Parameters.Add(new MySqlParameter("?weakness", areaofimprovement)); 
```

我想知道`?`sql_query value 部分中的含义是什么（这是确定变量的 C# 方式，还是我不知道 MySQL 语法的东西）。

我还想知道我对本节的理解是否正确——它或多或少只是一个 SQL 插入语句，然后是相关变量的定义。我说得对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T13:44:26.573

与 C# 无关，它们只是查询的命名参数。就像您在编写 PHP 时在 PDO/MySQLi 中使用（阅读：应该使用）一样。

另请注意，这不是字符串替换，它是一个准备好的语句，允许将参数传递给它。您可以将准备好的语句想象成一个预定义参数的方法调用，而不是将一长串数据（对潜在的注入开放）写入数据库以直接执行。

# java - 如何提交强制门户表单？

> ID：12747569
> 
> 赞同：-1
> 
> 时间：2012-10-05T13:42:13.787
> 
> 标签：java, android, html, http, webview

每次我在大学并且连接到 WIFI 时，它都会打开一个 html 页面并询问我的用户名和密码。

这就是为什么，我产生了制作一个应用程序的想法，该应用程序可以保存我的用户名和密码，并将它们发送到每次我连接到我大学的 wifi 时都会打开的那个 html 页面。这就是我节省时间的方式，当然我想在我的大学网站上发布该应用程序。

所以我想从我的 TextBoxes 中检索用户名和密码并将它们发送到 html 并让我的应用程序进行连接，而不是我每次都输入身份验证。

知道怎么做吗？我应该使用 WebView 吗？或者如果我不使用 WebView 会更好，因为它会无形地连接并使用诸如 Httprequest 之类的东西......我不熟悉这些。

解决方案：

5年前，我是个菜鸟。两种方法：

1）只需通过右键单击 chrome 并检查元素来查看表单提交值的位置。

2）使用fiddler拦截http请求，然后你就可以知道它在哪里发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:53:28.727

你不能在你的android应用程序中发出某种http请求，将你的用户名和密码作为post请求发送。

在纸上它应该有效，实际上我不知道。这取决于我认为处理表单的页面。

但我认为任何与这个想法相似的东西都应该/可以工作。我还在学习安卓。xD

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:04:39.120

根据您大学网站的安全性，您可以先查看该网站的源代码，看看它是否使用表单以及它需要发布哪些变量。然后你在你的应用程序中实现一个 HttpPost 来发布这些变量。

如果网站更改了网站上的密钥或使用了一些 cookie 或类似的东西，那么它会变得有点困难。然后，您可能必须使用 WebView。它有一些方法可以让你将 javascript 发布到 webview。然后你照常做

```
getElementById('IDofField').value = your username/password 
```

然后做

```
getElementById('IDofForm').submit(); 
```

查看 android 开发者网站以获取[有关使用 webviews 的指南](http://developer.android.com/guide/webapps/webview.html)

# c# - NHibernate 每组前 N 行

> ID：12747573
> 
> 赞同：2
> 
> 时间：2012-10-05T13:42:33.657
> 
> 标签：c#, nhibernate, queryover

这是我的域：

```
public class ForumTheme
{
    public virtual String Name { get;set; }
}

public class ForumTopic
{
    public virtual IList<ForumTheme> Themes { get;set; }
}

public class ForumMessage
{
    public virtual IList<ForumTopic> Topics { get;set; }

    public virtual DateTime DatePosted { get; set; }
} 
```

我想要得到的是：

论坛主题列表以及每个论坛主题的最新论坛消息中的前 5 个

可以在 NHibernate 中做到这一点吗？

**更新**

这是另一种可能的情况。

**域名**

该域描述了一个典型的分层博客/新闻站点。

```
public class Channel
{
    public virtual Int32 Id { get; set; }
    public virtual String Name { get; set; }

    public virtual IList<Category> Categories { get; set; }
}

public class Category
{
    public virtual IList<Article> Articles { get; set; }
}

public class Article
{
    public virtual String Name { get; set; }
    public virtual DateTime PublishDate { get; set; }
    public virtual Boolean IsActive { get; set; }
} 
```

所以一个频道有很多类别，一个类别有很多文章。

我在这里要做的是为每个频道抓取 TOP N 文章（忽略它们来自不同类别的事实）。这些文章将显示在我的门户网站的登录页面上。

在应用程序中，我使用仅包含实际数据库数据子集的 ViewModel。这是我的复合 ViewModel

**DTO**

```
public class ChannelDto
{
    public Int32 Id { get; set; }

    public String Name { get; set; }

    public List<ArticleDto> Articles { get; set; }

    public class ArticleDto
    {
        public String Name { get; set; }
    }
} 
```

获取频道的查询非常简单（我们只显示那些有活跃文章的频道）：

```
Category categoryAlias = null;
Article articleAlias = null;
ChannelDto.ArticleDto articleDtoAlias = null;

List<ChannelDto> channels = _session.QueryOver<Channel>()
                                    .Inner.JoinAlias(x => x.Categories, () => categoryAlias)
                                    .Inner.JoinAlias(x => categoryAlias.Articles, () => articleAlias)
                                    .Where(x => articleAlias.IsActive)
                                    .SelectList(list => list
                                        .Select(x => x.Id)
                                        .Select(x => x.Name)
                                    )
                                    .List<Object[]>
                                    .Select(x => new ChannelDto
                                    {
                                        Id = (Int32) x[0],
                                        Name = (String) x[1]
                                    })
                                    .ToList(); 
```

上面的查询给了我活跃文章的频道列表。现在我将自己获取文章：

```
foreach(var channel in channels)
{
    channel.Articles = _session.QueryOver<Channel>()
                               .Inner.JoinAlias(x => x.Categories, () => categoryAlias)
                               .Inner.JoinAlias(x => categoryAlias.Articles, () => articleAlias)
                               .Where(x => x.Id == channel.Id)
                               .OrderBy(x => articleAlias.PublishDate).Desc
                               .SelectList(list => list
                                   .Select(x => articleAlias.Name).WithAlias(() => articleDtoAlias.Name)
                               )
                               .Take(5)
                               .List<Object[]>
                               .Select(x => new ChannelDto.ArticleDto
                               {
                                   Name = (String) x[0]
                               })
                               .ToList();
} 
```

但是上面的 2 个查询会遇到 SELECT + 1 的问题。我觉得使用期货我可以使用较少的往返行程来做到这一点。我对NHibernate还不是很熟悉。是否有可能通过一次往返和水合 DTO 获得所有东西？在 QueryOver 中使用类似 ROW_NUMBER() OVER (PARTITION BY....) 的东西？我不想使用 HQL 或原始 SQL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T08:54:38.553

使用 2 次往返

```
var themes = session.Query<ForumTheme>().Select(t => new ThemeDto(t.Name)).List();

var topMessages = new List<IEnumerable<string>>(themse.Count);

foreach(var theme in themes)
{
    var query = from message in session.Query<ForumMessage>()
                from topic in message.Topics
                from t in topic.Themes
                where t.Name == theme.Name
                orderby message.DatePosted desc
                select message;
    topMessages.Add(query.Take(5).ToFuture());
}

for(int i = 0;i < topMessages.Count; i++)
{
    themes.TopMessages = topMessages[i].ToList();
}

return themes; 
```

对于您的第二种情况

```
foreach(var channel in channels)
{
    channel.Articles = _session
        .QueryOver<Channel>()
        .Inner.JoinAlias(x => x.Categories, () => categoryAlias)
        .Inner.JoinAlias(x => categoryAlias.Articles, () => articleAlias)
        .Where(x => x.Id == channel.Id)
        .OrderBy(x => articleAlias.PublishDate).Desc
        .SelectList(list => list
            .Select(x => articleAlias.Name).WithAlias(() => articleDtoAlias.Name)
        )
        .TransformUsing(Transformers.AliasToBean<ChannelDto.ArticleDto>());
}

// execute all subqueries at once through iterating one
channels[0].Articles.Any(); 
```

# asp.net-mvc - CKEditor在商业网站中的使用

> ID：12747574
> 
> 赞同：0
> 
> 时间：2012-10-05T13:42:36.433
> 
> 标签：asp.net-mvc, ckeditor

是的，我以前见过这个问题，但我从来没有找到一个明确的答案，所以我会再试一次。

我将在下面解释为什么我还没有答案。

**我可以在我正在构建的网站上免费使用 CKeditor。**

本站是一个开放的网站，所有人都可以注册，由我搭建，供第三方使用。

如果您想将其与网络上的其他内容进行比较：我正在为 facebook 家伙构建 facebook。facebook 网站对所有人开放，他们从中获利。

现在我（试图）阅读了 CKEditor 的许可证，但他们似乎都关心我修改源代码，以及我是否正在重新分发源代码，以及如果我对源代码的修改公开可用等。 ETC。

关键是：我不关心源代码。如果我使用 facebook 示例：如果我在我正在构建的 facebook 网站中使用 html 编辑器，以便成员可以在他们的个人资料描述中使用 html，我不关心 html 编辑器的源代码，我不分发源代码，我没有重新分发源代码，我没有编辑源代码等，我只使用 facebook 站点中的控件，因此我将二进制文件部署到服务器，仅此而已。

如果我可以再做一个比较：我像使用所有 .Net 二进制文件一样使用它：将它部署到服务器，成员“使用”二进制文件中的代码，因为我的代码使用了二进制文件，但仅此而已，并且源代码保持不变。此外，我不打算重新分发 .Net 二进制文件、扩展它们、使它们可供其他人使用.. CKEditor 的使用也是如此。

我确实读过还有一个商业许可证，即“copyleft”。我不知道他们在说什么，我从未在我的 VS2010、Word、Avast、Resharper 等许可证上看到“copyleft”。

谁能给我一个线索？

编辑：我认为您也可以将其与 Jquery 用法进行比较。

我在我的网站上使用 Jquery，但只使用二进制文件（可以这么说）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:24:11.597

截至目前，CKEditor共有[三个 Copyleft 许可证](http://ckeditor.com/license)。他们是

1.  [GPL](http://www.gnu.org/licenses/gpl.html)
2.  [LGPL](http://www.gnu.org/licenses/lgpl.html)
3.  [MPL](http://www.mozilla.org/MPL/MPL-1.1.html)

[CopyLeft 许可证](http://www.gnu.org/copyleft/)状态的 GNU 定义

> Copyleft 是一种使程序（或其他作品）免费的通用方法，并且要求该程序的所有修改和扩展版本也是免费的。

这实质上意味着您不能编辑 CKEditor 的源代码，然后将其作为您自己的价格典当。您一定会以这种方式永远免费重新分发它；无论您更改了多少原始源代码。

从我从你的帖子中读到的内容，我敢说你肯定可以在你的网站上使用 CKEditor 的免费版本。

# python - Python：分配问题

> ID：12747576
> 
> 赞同：0
> 
> 时间：2012-10-05T13:42:37.637
> 
> 标签：python, function, variable-assignment, runtime-error

我有一个我开发`/var/tmp`并工作的脚本......当我出于某种原因移动到所需的目录时，它返回以下错误：

```
Traceback (most recent call last):
  File "tail.py", line 104, in <module>
    test=isItAlive(line)
  File "tail.py", line 55, in isItAlive
    return test
UnboundLocalError: local variable 'test' referenced before assignment 
```

它抱怨的功能是：

```
def isItAlive(text):
        with open(valcsv) as f:
                searches = [x.split(',')[1] for x in f.read().splitlines()]
                for search in searches:
                #       print search
                        if not search in text:
                                test="TOBEADDED"
                        else:
                                test=search
                                break
                return test
        f.close() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T13:44:08.003

您的`searches`值是空的，因此`for`循环永远不会为`test`.

`test`在函数开始时初始化：

```
def isItAlive(text):
    test = None 
```

并找出为什么你的`valcsv`文件是空的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T13:44:35.497

如果`searches`是一个空列表，整个循环将被跳过并且`test`永远不会被初始化。你需要`test = None`在循环之前声明或类似的东西。

# asp.net - 第三方图表 api 不在 Https 中工作

> ID：12747581
> 
> 赞同：0
> 
> 时间：2012-10-05T13:43:03.173
> 
> 标签：asp.net, wcf, c#-4.0, azure

我正在使用第三方 Chart `API` [Simile](http://www.simile-widgets.org/timeline/)来显示图表。这在我使用之前可以正常工作`HTTP`，但是自从我移至`HTTPS`：此图表 API 加载失败，

没有为 HTTPS 通信呈现图表，但同样适用于 HTTP ???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:17:09.507

您是否使用“托管”时间线 API？我的意思是参考：[http](http://api.simile-widgets.org/timeline/2.3.1/timeline-api.js) ://api.simile-widgets.org/timeline/2.3.1/timeline-api.js 。这可能是它不起作用的原因：

1.  如果您的应用程序在 HTTPS 下运行，您需要包含该脚本的 HTTPS 版本（或删除“HTTP:”，使用 //api.simile-widgets.org/timeline/2.3.1/timeline-api.js反而）。
2.  也许您没有注意到，但托管 API 没有 HTTPS 版本（通过 HTTPS 访问它时会出现**Not Found**错误）。

为了解决这个问题，我建议您将 JS 文件上传到 blob 存储并从您的应用程序中像这样引用它：

**//youraccount.blob.core.windows.net/mycontainer/timeline-api.js**（没有 http: 或 https:）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:45:49.403

如果您从外部非 HTTPS URL 加载图表 API，大多数浏览器将（默认情况下）阻止加载外部（我假设）JavaScript 内容。您要么必须自己托管 API，要么从具有有效 SSL 证书的外部主机加载它。

[需要时如何通过 HTTPS 包含 CSS 和 JS 文件之](https://stackoverflow.com/q/2725523/468244)类的问题？展示在支持 HTTP 和 HTTPS 时如何处理这种情况的想法。

# ssis - SSIS 查找不同的数据库和表

> ID：12747582
> 
> 赞同：0
> 
> 时间：2012-10-05T13:43:17.603
> 
> 标签：ssis

我在 sql server 2005 中有以下表格

*   表 TAGSOLD 包含以下列：TagName、ItemID

在其他数据库中，我有以下表格

*   带有列的表 TAGS：ID、名称

*   具有列 ItemID、TagID 的表 Item_Tags

首先，我使用 SSIS 包从 tagsold 填充表标签（它成功了，因为我使用了 ADO 源和 ADO 目标）

现在我想要填写表 Item_Tags 并且我必须在 TAGSOLD 中选择 foreach ROW 查看 TAGS 以获取 tagid 并填写 item_tags 表。

你能告诉我正确的顺序以及我应该在我的 SSIS 包中使用什么样的项目？

提前致谢。

何塞。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:52:25.937

解决方案：使用两个源（TagsOLD 和 TAGS）和 Merge Join，使用两个表 TagName=Name 之间的公共字段，并根据表 Item_Tags 构建输出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:55:51.197

1.  在一个数据流中区分`TagName`并`TAGSOLD`存储在`TAGS`
2.  在下一个数据流 get all `TagName`, `ItemID`from和 during flow中`TAGSOLD`查找from flow =添加到您的流中。存储并添加到`TAGS``TagName``TAGS.Name``TAGS.ID``ItemID``TAGS.ID``Item_Tags`

![在此处输入图像描述](../Images/5fd51515bec3713ab9e4ecc72bc08d97.png)

# multimap - 使用 MVEL 针对多图评估规则

> ID：12747586
> 
> 赞同：0
> 
> 时间：2012-10-05T13:43:23.537
> 
> 标签：multimap, mvel

只是想知道如何使用 MVEL 针对多图评估规则。

IE：

```
rule-> "foo" == "200" 
```

`foo`上下文中的可能值`[100, 200, 300]`。

我不知道哪些是可能的值，所以我不能将它们作为规则的一部分。

理想情况下，我希望能够做这样的事情：

```
List<String> valueList = new ArrayList<String>();
valueList.add("100");
valueList.add("200");

List<String> otherList = new ArrayList<String>();
otherList.add("otherValue");

Map<String, List<String>> context = new HashMap<String, List<String>>();
context.put("foo", valueList);
context.put("other", otherList);

MVEL.eval("foo == 200", context) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:10:11.183

您也可以尝试使用纯 java 代码。我们已经尝试过了，它执行得很好。你可以将你的java代码传递给Mvel，它会给你结果。

函数可以在运行时附加到字符串。只需使用您的逻辑创建规则/条件。粗体部分是我们写的。

```
public Boolean evaluate(Map contextMap){

   **ClassA A = (ClassA) contextMap.get("contextObjectClassA");
    List<ClassB> classb = A.getclassb();
            if(null!=classb  && classb .size()>0){
                    return true;
                }else{
                return false;
            }**
    } 
```

# sql - sql server xquery shred 属性和节点

> ID：12747588
> 
> 赞同：1
> 
> 时间：2012-10-05T13:43:34.207
> 
> 标签：sql, sql-server, xquery

我有一个 xml 变量，我想将此输入 xml 分解为关系表输出，如下所示

## 输入

```
 declare @x xml
  set @x =
  '<groupNodes>
        <groupSet name="groupset1" id="10001">
              <condition id="7">contains</contains>
              <group name="group11" id="11">100</group>
              <group name="group12" id="19">460</group>
              <group name="group13" id="24">450</group>
              <group name="group14" id="23">440</group>
        </groupSet>
        <groupSet name="groupset2" id="10002">
              <condition id="3">equals</contains>
              <group name="group21" id="21">370</group>
              <group name="group22" id="27">543</group>
        </groupSet>
        <groupSet name="groupset3" id="10003">
              <condition id="7">contains</contains>
              <group name="group31" id="31">760</group>
              <group name="group32" id="38">450</group>
              <group name="group33" id="39">420</group>
               ..
               ..
        </groupSet>
        ..
  </groupNodes>' 
```

输出

```
groupSetName      groupSetId   groupName      groupId            groupValue conditionId
-------------      ------------ --------------------------------------
groupset1            1001      group11            11            100          7
groupset1            1001      group12            19            460          7
groupset1            1001      group13            24            450          3
groupset1            1001      group14            23            440          3 
groupset2            1002      group21            21            370          3
groupset2            1002      group22            27            543          3
groupset3            1003      group31            31            760          7
groupset3            1003      group32            38            450          7
groupset3            1003      group33            39            420          7 
```

我在下面尝试一些东西，它只给出每个子节点的第一行，而不是所有子节点都来了。另外，能够进行分组集和分组列。无法做条件节点。

```
 select 
        tab.col.value('(@name)[1]', 'nvarchar(100)') groupSetName,
        tab.col.value('(@id)[1]', 'nvarchar(100)') groupSetId,
        tab.col.value('(./group/@name)[1]', 'nvarchar(100)') groupId,
        tab.col.value('(./group/@id)[1]', 'nvarchar(100)') groupName,
        tab.col.value('(./group)[1]', 'nvarchar(100)') groupValue
  from @x.nodes('groupNodes/groupSet') as tab(col) 
```

有人可以帮帮我吗。我很努力，想不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:01:25.537

试试这个。

```
select   
    tab.col.value('../@id', 'nvarchar(100)') groupsetName,  
    tab.col.value('../@name', 'nvarchar(100)') groupsetId,  
    tab.col.value('@id', 'nvarchar(100)') groupname,  
    tab.col.value('@name', 'nvarchar(100)') groupID,  
    tab.col.value('.', 'nvarchar(100)') groupValue,
    tab.col.value('(../condition/@id)[1]','int')  
from @x.nodes('groupNodes/groupSet/group') as tab(col) 
```

# c# - 如何在 UserControl 组件上找到 WPF 中的所有控件

> ID：12747589
> 
> 赞同：4
> 
> 时间：2012-10-05T13:43:35.047
> 
> 标签：c#, wpf

我可以在 a 上获取所有 UI 控件，`Form`但如何在某个上找到控件`UserControl`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T13:46:53.327

您可以使用`Linq operator OfType`和`Controls property`

```
var controls = YourForm
               .YourUserControl
               .Controls.OfType<TextBox>();
foreach(var control in controls)
{
    ....
} 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/vstudio/bb360913.aspx](http://msdn.microsoft.com/fr-fr/library/vstudio/bb360913.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:51:07.930

你可以看看[FindName(string)](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.findname.aspx)方法`UserControl`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T13:51:11.873

如果您只想查看直接对象，您可以执行[FindName](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.findname.aspx)：

```
object foundControl = someParentControl.FindName("nameOfChild"); 
```

或者如果您想要递归方式，那么您可以在这里查看这篇文章： [如何按名称或类型查找 WPF 控件？](https://stackoverflow.com/questions/636383/wpf-ways-to-find-controls)

# xaml - 可以在 WinRT XAML 中使用 URI 作为 XML 命名空间吗？

> ID：12747591
> 
> 赞同：1
> 
> 时间：2012-10-05T13:43:38.477
> 
> 标签：xaml, windows-runtime, xml-namespaces, winrt-xaml, windows-store-apps

显然，在 WinRT 对 XAML 的采用中，XML 命名空间支持发生了变化。那么，有没有办法在 WinRT 中使用 URI 作为命名空间？例子：

```
xmlns:mine="http://myuri" 
```

并让`mine`命名空间指向我的一个程序集？我已经看到这是如何在[Silverlight](https://stackoverflow.com/questions/2517577/how-does-the-default-xml-namespace-work-in-xaml)中完成的。现在它在 WinRT 中是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:15:01.600

[XmlnsDefinitionAttribute](http://msdn.microsoft.com/en-us/library/system.windows.markup.xmlnsdefinitionattribute.aspx)在 WinRT XAML 中不可用，但也许您可以实现[IXamlMetadataProvider](http://www.jaylee.org/post/2012/03/07/Xaml-integration-with-WinRT-and-the-IXamlMetadataProvider-interface.aspx)并定义[XmlnsDefinition](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.markup.xmlnsdefinition.aspx)来实现相同的效果。我昨天只是想知道这个。显然您可以实现该接口，并且 XAML 解析器将在解析您的 XAML 时使用您的实现。如果您检查您的 obj 文件夹，您可以看到 VS 如何自动生成一个 XamlTypeInfo.g.cs 文件，该文件用于在不使用反射的情况下解析 XAML。它可能会对如何实现您自己的版本有所帮助。让我们知道怎么回事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-26T12:37:32.047

在以下位置找到了一些令人鼓舞的信息： [http ://www.sharpgis.net/post/2013/05/30/Decoding-the-IXamlMetadataProvider-interface-Part-1](http://www.sharpgis.net/post/2013/05/30/Decoding-the-IXamlMetadataProvider-interface-Part-1)

> 因此，自动生成的代码自动检测到我的自定义库嵌入了第二个元数据提供程序，并将其注入此列表以及自动生成的列表中。所以看起来我们应该能够提供我们自己的实现，我稍后再谈。

并在[http://www.jaylee.org/post/2012/03/07/Xaml-integration-with-WinRT-and-the-IXamlMetadataProvider-interface.aspx](http://www.jaylee.org/post/2012/03/07/Xaml-integration-with-WinRT-and-the-IXamlMetadataProvider-interface.aspx)

# session - 无法将 symfony 2.1.2 连接到内存缓存以存储会话

> ID：12747593
> 
> 赞同：0
> 
> 时间：2012-10-05T13:43:52.597
> 
> 标签：session, symfony, memcached

我正在尝试使用 sf2 框架在 memcache 服务器中托管我的会话。这是我的配置：在 config.yml

```
framework:
    ...
    session:
        handler_id: session.handler.mc
...
services:
    session.memcache:
        class: Memcache
        calls:
            - [addServer , [%session_memcache_host%, %session_memcache_port%]]
    session.handler.mc:
        class: Symfony\Component\HttpFoundation\Session\Storage\Handler\MemcacheSessionHandler
        arguments: [@session.memcache] 
```

在参数中，我设置了这样的信息：

```
session_memcache_host: memcachesession.lan
session_memcache_port: 11211 
```

在我的控制器中，我有这个：

```
public function indexAction()
{
    $session = new Session();
    $session->start();
    var_dump($session->getId());
    $session->set('foo','bar');
    $session->save();
    var_dump(session_id());
    var_dump($_SESSION);
    return array('name' => 'test');
} 
```

而且我仍然没有在 memcache 中进行会话……我不知道为什么。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:27:57.083

```
services:
session.memcache:
    class: Memcache
    calls:
        - [addServer , [%session_memcache_host%, %session_memcache_port%]]
session.handler.mc:
    class: Symfony\Component\HttpFoundation\Session\Storage\Handler\MemcacheSessionHandler
    arguments: [@session.memcache, {prefix: ""}] 
```

这里的要点是设置一个空前缀......所以我有我的真实会话名称......我在我的其他应用程序中拥有的那个。现在一切正常

# php - 控制器蛞蝓

> ID：12747598
> 
> 赞同：1
> 
> 时间：2012-10-05T13:44:03.063
> 
> 标签：php, codeigniter, routes

我打算开发中型网站。我想使用 SEO 友好的 url 之类的

```
http://foobar.com/category/fun/
http://foobar.com/article/lorem-ipsum.html 
```

如您所见，我想使用 slugs 作为控制器名称。我打算通过以下方式实现它。

一个文件来处理所有请求。

在 routes.php 中

```
$route['(:any)'] = 'my_routes/$1'; 
```

然后在带有 $this->uri->segment 的 my_routes 中，我可以确定请求哪个控制器。

对整个网站只使用一个文件 (my_routes) 是个好主意吗？

你能给我推荐一些更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:48:03.863

是的，这是个好决定。我在我的项目中做同样的事情，所有路由都通过 index.php 和 .htaccess 文件配置为发送 index.php 上的所有 URL。

# javascript - sarfari 中的 jquery 插件错误

> ID：12747599
> 
> 赞同：0
> 
> 时间：2012-10-05T13:44:07.230
> 
> 标签：javascript, jquery, html, css, jquery-plugins

我有一个非常奇怪的错误，它只发生在 safari[单击此处](http://bodyworksforme.com/testing/ExpressionEngine/index.php)如果您向下到上传照片部分并滑过旋转木马，当您滑动旋转木马时，您会注意到宝丽来的底部保持静止，这是仅出于某种原因在野生动物园中发生，我 100% 是什么导致了问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:53:50.447

我不知道究竟是什么导致了这个问题，但如果你给#container 一个 225px 的高度，它就会被修复。

# c++ - 了解文件流标志/位

> ID：12747601
> 
> 赞同：1
> 
> 时间：2012-10-05T13:44:08.603
> 
> 标签：c++, iostream, fstream, flags

我认为我目前不太了解 io 流标志的机制。为了试图理解这一点，我将就两个具体例子提出问题。

* * *

第一个涉及开放模式。例如，对于 std::ofstream 我们有：

```
void open ( const char * filename, ios_base::openmode mode = ios_base::out );

app (append) Set the stream's position indicator to the end of the stream before each output operation.
ate (at end) Set the stream's position indicator to the end of the stream on opening.
binary  (binary) Consider stream as binary rather than text.
in  (input) Allow input operations on the stream.
out (output) Allow output operations on the stream.
trunc   (truncate) Any current content is discarded, assuming a length of zero on opening. 
```

我有以下问题：

```
std::ofstream stream;

// Question 1 : Here I don't specify std::ios::out, so why does it work ? :
stream.open("file.txt", std::ios::binary);

// Question 2 : Here I activate trunc, but how can I deactivate it ?
stream.open("file.txt", std::ios:binary | std::ios::trunc);

// Question 3 : What would be the result of that ?
stream.open("file.txt", std::ios::in); 
```

* * *

第二个与州旗有关。考虑以下示例：

```
std::ofstream stream;
std::cout<<stream.good()<<stream.bad()<<stream.fail()<<stream.eof()<<std::endl;
stream<<'x';
std::cout<<stream.good()<<stream.bad()<<stream.fail()<<stream.eof()<<std::endl;
/* SOMETHING */ 
```

由于没有打开文件，结果是：

```
1000 // <- Good bit is true
0110 // <- Fail and bad bit are true 
```

**问题4：**我可以写什么代码来代替`/* SOMETHING */`，重置`badbit`to`false`和设置`eofbit`to `true`（这个操作在这里没有意义，只是为了理解这些位的行为）。

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:15:23.747

为了：

1.  您在 `std::ofstream` 上调用 open。`std::ofstream::open` 的定义是：

    ```
    rdbuf()->open( 名称，模式 | std::ios_base::out );

    ```

    换句话说，`std::ofstream` 在打开时总是添加 `out` 位。
2.  您可以将 `std::ios_base::app` 添加到模式标志，但这将具有强制每次写入到文件末尾的效果，无论您之前可能位于何处。（如果您以只写方式打开，这可能是您想要的。）否则，如果您同时使用 `std::ios_base::in` 和 `sdt::ios_base::out` 打开，文件将不会被截断.
3.  该文件不会被截断:-)。虽然 `ofstream` 没有提供任何读取它的函数，但您可以从 `rdbuf` 返回的 `streambuf` 创建一个 `std::istream` 并从中读取。
4.  在这种情况下，`stream.clear(std::ios_base::eofbit)` 可以解决问题。但是你不能总是重置 `badbit`：如果没有附加 `streambuf`，无论你做什么，`badbit` 都会被设置。

正如您可能注意到的那样，名称并不总是直观的：`clear`设置一点，并且关于打开标志的逻辑远非正交。

# xcode - Xcode 4.5 UIScrollView

> ID：12747603
> 
> 赞同：1
> 
> 时间：2012-10-05T13:44:13.510
> 
> 标签：xcode, uiscrollview, ios6, scrollview, xcode4.5

我想在我的项目中添加一个滚动视图。

我在我的文件中添加了以下代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [scrollView setScrollEnabled:YES];
    [scrollView setContentSize: CGSizeMake(320, 830)];
} 
```

这适用于 xcode 4.3 和 IOS 5。但要知道它不会滚动。

`Auto Layout`如果我在文件检查器中停用它，它会完美运行。但是屏幕较小的 iPhone 4 的布局是不正确的。iPhone 5 的布局看起来不错。

当我不想启用时，我该怎么办`Auto Layout`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:08:20.013

将此约束移至 viewDidAppear。我刚刚在另一个问题（[Autolayout Question](https://stackoverflow.com/questions/12747710/scrollview-xcode4-5-autolayou)）上解释了这个问题。

```
- (void)viewDidAppear
{
.....
[scrollView setScrollEnabled:YES];
[scrollView setContentSize: CGSizeMake(320, 830)];
....
} 
```

# javascript - 彩色动画 jQuery 插件：父子元素的动画触发器。如何解决这个问题？

> ID：12747604
> 
> 赞同：1
> 
> 时间：2012-10-05T13:44:15.017
> 
> 标签：javascript, jquery, coloranimation

就在昨天，我需要为 HTML 的边框颜色设置动画，`div`并且遇到了来自[bitstorm](http://www.bitstorm.org/jquery/color-animation/)的颜色动画 jquery 插件。它轻量级且易于使用，但它似乎有一个错误。我有以下一段 HTML：

```
<div class="object-list-item" id="oli-0" reference="0">
    <div class="close_btn" tooltip_text="Remove this object"></div>
    <img class="thumb" src="img/text-icon.png" />
    <div class="text-preview"></div>
    <div class="clear"></div>
</div> 
```

在内部元素和父元素的边框之间有一些空间（以像素为单位）。此外，我为`mouseover`和`mouseout`事件添加了两个事件处理程序，附加到`object-list-item`元素上，如下所示：

```
$(document)
        .on("mouseover", "div.object-list-item", function(){
            $(this).animate({ borderColor : "#555" },300);                                                       
        })
        .on("mouseout", "div.object-list-item", function(){
            $(this).animate({ borderColor : "#ddd" },300);                                                       
        }); 
```

我还整理了一个小提琴，您可以在其中看到这种行为：http: [//jsfiddle.net/2UKRG/2/](http://jsfiddle.net/2UKRG/2/)

问题是当我悬停任何内部元素时，事件处理程序也会为它们触发。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:46:25.933

我现在很懒，但很确定您只需要更改`mouseover, mouseout`为`mouseenter, mouseleave`：

[http://jsfiddle.net/2UKRG/3/](http://jsfiddle.net/2UKRG/3/)

```
$(document)
    .on("mouseenter", "div.object-list-item", function(){
        $(this).animate({ borderColor : "#555" },300);                                                         
    })
    .on("mouseleave", "div.object-list-item", function(){
        $(this).animate({ borderColor : "#ddd" },300);                                                         
    });​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T13:51:28.507

您也可以尝试将其更改为`hover`- **[http://jsfiddle.net/WJE2y/](http://jsfiddle.net/WJE2y/)**

```
$('div.object-list-item').hover(function(){
    $(this).animate({ borderColor : "#555" },300);
}, function(){
    $(this).animate({ borderColor : "#ddd" },300);
}); 
```

至于“*为什么” -* [mouseover 和 mouseenter 事件之间有什么区别](https://stackoverflow.com/questions/1104344/what-is-the-difference-between-the-mouseover-and-mouseenter-events)的答案？很好地解释了它并链接到[http://docs.jquery.com/Events/mouseover](http://docs.jquery.com/Events/mouseover)

# java - jTable，覆盖的 DefaultCellRenderer 在排序后不会重绘图标

> ID：12747609
> 
> 赞同：0
> 
> 时间：2012-10-05T13:44:26.497
> 
> 标签：java, swing, sorting, jtable, imageicon

我在使用 a`jTable`时遇到问题`DefaultTableModel`。

我有两列显示使用覆盖的图标`DefaultTableCellRenderer`：

```
private static ImageIcon errorIcon = new ImageIcon("workDir/icons/error.png");
private static ImageIcon pageIcon = new ImageIcon("workDir/icons/page_white.png");
private static ImageIcon serverIcon = new ImageIcon("workDir/icons/server_go.png");
private static ImageIcon acceptIcon = new ImageIcon("workDir/icons/accept.png");

private class ImageRenderer extends DefaultTableCellRenderer {  

    JLabel lbl = new JLabel();

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {

        //lbl.setText((String) value);
        lbl.setVerticalAlignment(SwingConstants.CENTER);
        lbl.setHorizontalAlignment(SwingConstants.CENTER);

        if (value.equals("e")) {
            lbl.setIcon(pageIcon);
            return lbl;
        }

        ServiceTicket t = TICKET_DICT.get((UUID) tableModel.getValueAt(row, 3));

        if (t == null) {
            throw new IllegalStateException("Cannot find Ticket for UUID");
        }

        if (t.getReport().getElsterCode().equals("0")) {
            if (t.getSendMode().equals(EricSendMode.VALIDATE_LOCALLY)) {
                lbl.setIcon(acceptIcon);
            } else {
                lbl.setIcon(serverIcon);
            }
        } else {
            lbl.setIcon(errorIcon);
        }

        lbl.repaint();
        return lbl;
    }
} 
```

我`ImageRenderer`在视图的初始化阶段设置：

```
 resultTable.getColumnModel().getColumn(0).setCellRenderer(new ImageRenderer());
    resultTable.getColumnModel().getColumn(4).setCellRenderer(new ImageRenderer()); 
```

我希望我的表是可排序的。所以我用这一行来启用默认排序：

```
resultTable.setAutoCreateRowSorter(true); 
```

我现在的问题是排序效果很好，但是第 0 列和第 4 列中的图标在排序事件后没有重绘。

我尝试添加一个事件来告诉表格单元格值已更改，但这不起作用：

```
 resultTable.getRowSorter().addRowSorterListener(
            new RowSorterListener() {

                @Override
                public void sorterChanged(RowSorterEvent e) {                        
                    if (e.getType().equals(RowSorterEvent.Type.SORTED)) {
                        for (int i = 0; i < tableModel.getRowCount(); i++) {
                            tableModel.fireTableCellUpdated(i, 0);
                            tableModel.fireTableCellUpdated(i, 4);
                        }
                    }

                }
            }); 
```

你能帮我在表格排序后重新绘制图标吗？我检查了表格模型，所有单元格和列都正确排序。甚至单元格中的值也呈现为图标。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:25:50.133

有些评论不是真正的答案，但评论太长了。

```
ServiceTicket t = TICKET_DICT.get((UUID) tableModel.getValueAt(row, 3)); 
```

将`TableModel`在对表进行排序时从 中检索不正确的值。此时，`row`传递的索引与模型中索引处的元素不匹配`row`（由于排序）。

使用`JTable#convertRowIndexToModel`将索引转换为模型索引。

此外，当排序器改变时调用的监听`fireTableCellUpdated`器是不需要的，甚至是不正确的。虽然表格可能会更改元素的显示顺序，但基础数据并未发生任何变化。

最后

> 我检查了表格模型，所有单元格和列都正确排序。甚至单元格中的值也呈现为图标

不确定“检查表模​​型”是什么意思。`TableModel`排序时没有任何变化。排序只发生在视图端，而不是模型端。

# .net - 压缩任务（Team Foundation Server）

> ID：12747611
> 
> 赞同：0
> 
> 时间：2012-10-05T13:44:34.530
> 
> 标签：.net, tfs, msbuild, compression, tfsbuild

我正在使用 Team Foundation Server，每次构建服务器构建代码时，我都必须自动从我的源代码制作一个压缩的 zip 文件。这是我的项目文件的片段：

```
<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
<UsingTask TaskName="TransformXml" AssemblyFile="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.Tasks.dll" />
<Target Name="AfterBuild">
    <CallTarget Targets="Zipper" />
</Target>
<Target Name="Zipper" Condition="'$(ConfigTransform)'=='ImRunningOnTheServer'">
    <!-- I NEED A "COMPRESSION TASK" HERE-->
</Target> 
```

有没有可用的压缩任务？也许所需的任务是在 Microsoft.Web.Publishing.Tasks.dll 程序集中定义的——但我不知道它在哪里。它在 GAC 中不可用，我认为仅在构建服务器上可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:12:34.447

压缩任务是[MSBuild 扩展包](http://msbuildextensionpack.codeplex.com/)的一部分。我目前在文档中找不到链接（我认为它已损坏，或者与 IE9 不兼容），但它们在那里。

# c# - 混合 Nhibernate 和 ADO 事务？

> ID：12747613
> 
> 赞同：0
> 
> 时间：2012-10-05T13:44:45.153
> 
> 标签：c#, sql-server, nhibernate, repository-pattern

由于我继承了一个代码库，我有一个相当奇怪的要求。DAL 基于存储库模式，但是一些存储库是使用带有直接 SQL 和参数化查询的 SqlConnection/SqlCommand 编码的，有些是使用 NHibernate 编码的。

我需要执行一系列数据操作，这需要来自两个分区的存储库，如果它在沿途的任何阶段失败，它都需要回滚。解决此问题的最佳方法是什么？

System.Data 公开了一个 IDbTransaction 和 NHibernate 一个 ITransaction，这两者是否兼容？如果出现问题，我可以同时运行两个事务然后将它们都回滚吗？TransactionScope 在这种情况下会帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:19:48.917

TransactionScope 将创建一个挂钩，所有通过 ADO.Net 的组件都将遵守该挂钩。由于*所有*ORM 都通过 ADO.Net，它们都将隐含地尊重 TransactionScope。像 NHibernate、Linq、EF 或您选择的任何 ORM 之类的代码都无法抑制这种情况，除非它们通过用新范围*显式*覆盖当前范围来显式抑制 TransactionScope。

问题可能是由于多个连接注册到服务器上，事务升级为服务器上的分布式事务。这是一个很棘手的主题，受 SQL Server/.Net 版本的影响，请参阅[System.Transactions 与 SQL Server 的集成](http://msdn.microsoft.com/en-us/library/ms172070.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:50:45.913

nhibernate也支持**sql语句**！

我好像记得方法

**NHibernateSession.CreateSQLQuery**，它返回**IQuery**（实际上是**SQLQuery**）

你可以继续调用方法**List**或**UniteResult**

通常，编码人员喜欢使用名为**Hashtable的 kv 类**

您可以在 Nhibernate 中使用 ITransaction。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T14:21:03.390

我假设您希望拥有类似于以下的代码：

```
public class SomeService
{
    private readonly IRepositoryA _repoA;
    private readonly IRepositoryB _repoB;

    public void DoStuff(EntityA someEntityA, EntityB someEntityB)
    {
        try 
        {
             _repoA.Save(someEntityA);
             _repoB.Save(someEntityB);
             // commit all stuff here

        }
        catch
        {
             // rollback all stuff here
        }
    }
} 
```

如果确实如此，那么您需要有某种 UnitOfWork 抽象，这两个存储库都依赖并且可以引用它们各自的事务上下文。如果两个 repos 都使用 Nhibernate 或 IDbConnection/DbTransactions 会容易得多，但由于存在混合，您将不得不做更多的工作。

您需要创建一个包含 IDbTransaction 和 ITransaction 的“GenericTransaction”，并让您的工作单元拥有一个创建新 GenericTransaction 的方法。

GenericTransaction 上的提交/回滚将对两个事务执行相应的操作。

要做到这一点，您将不得不对现有的存储库进行相当多的重构......但我不会推荐任何其他方式。

# zend-framework2 - 覆盖特定操作的视图策略

> ID：12747622
> 
> 赞同：2
> 
> 时间：2012-10-05T13:45:15.497
> 
> 标签：zend-framework2

我有一个应用程序，我们使用 AbstractRestfulController 和 Json 策略。（我们有使用这种方法的直接要求）。所以我们所有的请求都是通过带有 json 的 jQuery Ajax 完成的。现在我有下载存储在服务器上的 pdf 文件的特定要求。我想使用 php/zend 头文件下载文件，而不是公开文件的实际 http 路径。

以下Restful方法是否有任何解决方案。我正在考虑针对特定操作的覆盖视图策略，但不知道如何？

我将有一种最终方法来为特定模块使用默认 AbstractActionController 并将我的代码放入其中。但是，如果这将是我唯一的解决方案（因为将当前模块特定的代码移动到另一个模块中看起来是个坏主意）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T10:57:43.403

请参阅下面添加您自己的视图策略的示例，您可以在文档中查看示例：

[http://framework.zend.com/manual/2.0/en/modules/zend.view.quick-start.html](http://framework.zend.com/manual/2.0/en/modules/zend.view.quick-start.html)

如果这是您想要的方式，很容易修改示例以检查给定的控制器/操作。

```
<?php
namespace Application;

class Module
{
    public function onBootstrap($e)
    {
        // Register a "render" event, at high priority (so it executes prior
        // to the view attempting to render)
        $app = $e->getApplication();
        $app->getEventManager()->attach('render', array($this, 'registerJsonStrategy'), 100);
    }

    public function registerJsonStrategy($e)
    {
        $app          = $e->getTarget();
        $locator      = $app->getServiceManager();
        $view         = $locator->get('Zend\View\View');
        $phpStrateogy = $locator->get('PhpRendererStrategy');
        // or any you have setup in your config...
        $jsonStrategy = $locator->get('ViewJsonStrategy');

        $routeMatch = $e->getRouteMatch();
        /* @var $routeMatch \Zend\Mvc\Router\RouteMatch */
        $routeName = $routeMatch->getMatchedRouteName();
        if($routeName == 'myroute') {
            // possible change layout?
            //$controller->layout('app/layout/new_layout');
            // Attach strategy, which is a listener aggregate, at high priority
            //$view->getEventManager()->attach($jsonStrategy , 100);
            $view->getEventManager()->attach($phpStrateogy, 1);
        }
    }
} 
```

或者，您可以只返回不同类型的 ViewModel，如果启用了两种策略，您可以通过在控制器中返回不同的模型来更改使用的策略：

```
public function someAction()
{
    // will use JsonRenderer
    return new \Zend\View\Model\JsonModel(array('bob'));

    // Will use PHPRenderer
    return new \Zend\View\Model\ViewModel(array('bob'));
} 
```

# asp.net-mvc - 什么时候需要调用 SaveChanges 方法？

> ID：12747624
> 
> 赞同：0
> 
> 时间：2012-10-05T13:45:21.793
> 
> 标签：asp.net-mvc, entity-framework-4

假设我有一些保存方法。`_context.SaveChanges()`在每个方法结束时调用或将此方法移动到 global.ascx 文件中并仅在应用程序生命周期结束时调用它的更好方法是什么？对性能目的重要吗？

我使用 EF 和 ASP.NET MVC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:10:50.300

上下文不是线程安全的。因此，对上下文的多次更改可能会引发错误。

我处理这个问题的方式是两种方式之一。控制器/存储库和每个方法。无论哪种方式，我都没有看到任何性能受到影响。我读过的大多数书都倾向于存储库风格，除非你只有 2-3 种使用 EF 的方法。

我在上课前定义了这样的东西

```
SomeContext context = new SomeContext(); 
```

那么我有这样的方法吗？

```
public void Save()
{
    context.SaveChanges();
} 
```

如果你想按照这样的方法来做

```
using (var context = new SomeContext())
{
  // somecode
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:04:00.973

在我看来，您应该将其称为每个更新方法的结束。否则，如果您更改了对象但未保存它，则在应用程序结束之前，该对象不会在数据库中更新。如果另一个进程从数据库请求这个对象，它不会有最新的更改。如果这个过程也修改了这个对象，然后在应用程序结束时保存它，你甚至会得到一个 OptimisticConcurrencyException。

# javascript - Phonegap 2.1.0 外部主机控制台日志记录

> ID：12747630
> 
> 赞同：3
> 
> 时间：2012-10-05T13:45:38.853
> 
> 标签：javascript, ios, web-applications, cordova

我正在进行的项目涉及通过 document.location.href 立即将控制权从 iOS phonegap 传递到外部主机（尽管使用缓存清单，所以不完全是外部的），然后访问（缓存的）外部 javascript 中的所有 phonegap 的好东西。

在 iOS 6 和 phonegap 2.1.0 之前，这工作正常。自从我升级后，我注意到的第一件事是控制台日志不再传递给 Xcode。我使用 ./create 创建了一个新项目，并将新的 cordova-2.1.0.js（也尝试使用 cordova.ios.js）复制到我的外部内容的 javascript 文件夹中。然后我将我的外部 index.html 剥离为简单

```
<!DOCTYPE html>
<html>
    <head>
        <script src="js/lib/phonegap/cordova-2.1.0.js"></script>
    </head>
    <body>
        <button type='button' onclick='console.log("huf")'>click</button>       
    </body>
</html> 
```

我已确保我的所有路径都是正确的（在 javascript 中测试是否存在科尔多瓦通行证）。在将控制权传递给外部主机之前，控制台日志记录工作正常。

Xcode 中不显示控制台日志。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:15:02.433

I just tried and for me it work. iPad 3 with iOS6 + PhoneGap 2.1.0 XCode 4.5.1

Are you sure the library loaded correctly? IT might be a good idea to add an ondeviceready event listener and put the logging in there. Also add an alert in there too so you know that your event fired.

# android - Linux CLI 到 Android

> ID：12747631
> 
> 赞同：0
> 
> 时间：2012-10-05T13:45:40.373
> 
> 标签：android

我想知道是否可以像在任何其他 Linux 发行版上一样终端到我的 Android (Razr) 并导航文件系统和进程。因为它应该建立在 Linux 内核之上。

我发现您根本无法从手机的默认 UI 中关闭大多数应用程序，例如 Firefox，这很烦人，我希望有一种方法可以找到进程 ID 并像在常规 Linux/Unix 上一样杀死它机器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T13:51:19.003

如果您启用调试并安装了 Android SDK，那么您可以使用`adb shell`USB 电缆在 android 设备上获取外壳到 PC。如果你只想要设备上的东西，ConnectBot 是一个免费的 SSH 客户端应用程序，它可以提供一个仅限本地主机的 shell，让你可以像大多数 linux 系统一样工作。请注意，shell 是相当受限制的。缺少很多常用命令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T13:48:45.057

```
adb shell 
```

根据您的设备，通过网络或 USB 将您的手机连接到您的 PC，并启用*USB 调试。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T13:51:55.043

我使用 connectbot 应用程序；它主要用作 ssh 客户端，但也允许您运行本地终端会话

# sql - 我无法让这个 SQL 工作，任何人都可以发现它吗？

> ID：12747635
> 
> 赞同：0
> 
> 时间：2012-10-05T13:45:51.363
> 
> 标签：sql, database, ms-access

```
SELECT 
    [Stock Conversion Items].SCID, 
    [Stock Conversion Items].[Result PC], 
    [Stock Conversion Items].[Quantity], 
    [Stock Conversion].[Date], 
    [products/stock].[Description] 
FROM 
    [Stock Conversion Items] 
INNER JOIN [Stock Conversion] 
    ON [Stock Conversion Items].SCID = [Stock Conversion].SCID 
INNER JOIN [products/stock] 
    ON [Stock Conversion Items].[Result PC] = [products/stock].[Product Code] 
ORDER BY [Stock Conversion Items].SCID; 
```

这段代码很容易解释，基本上我得到一个我根本无法解决的语法运算符错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:51:27.040

对查询进行了一些重新调整，并使其看起来像这样：

```
SELECT sci.SCID, sci.[Result PC], sci.Quantity, sci.Date, s.Description
FROM [Stock Conversion Items] sci
INNER JOIN [Stock Conversion] sc 
   ON sci.SCID = sc.SCID 
INNER JOIN [products/stock] s 
   ON sci.[Result PC] = s.[Product Code] 
ORDER BY sci.SCID; 
```

该语句中唯一可能失败的是`on`子句。您确定两个 SCID 列以及 [Result PC] 和 [Product Code] 列属于同一类型吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:57:59.080

出于某种原因，Access 似乎想在第一个连接周围加上括号。这似乎有效：

```
SELECT [Stock Conversion Items].SCID, [Stock Conversion Items].[Result PC], [Stock Conversion Items].Quantity, [Stock Conversion].Date, [products/stock].Description
FROM ([Stock Conversion] INNER JOIN [Stock Conversion Items] ON [Stock Conversion].SCID = [Stock Conversion Items].SCID) INNER JOIN [products/stock] ON [Stock Conversion Items].[Result PC] = [products/stock].[Product Code]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T14:17:24.247

```
 SELECT [Stock Conversion Items].SCID,
     [Stock Conversion Items].[Result PC],
     [Stock Conversion Items].Quantity,
     [products/stock].Description,
     [Stock Conversion].[SC Date],
     [Stock Conversion].[Created By]

     FROM [Stock Conversion Items]
      INNER JOIN ([products/stock] INNER JOIN [Stock Conversion]
        ON [products/stock].[Product Code] = [Stock Conversion].[Source PC])
        ON [Stock Conversion Items].SCID = [Stock Conversion].SCID; 
```

所以这就是 Access 为解决我的问题而提出的方法，设法让事情正常工作，认为这可能是数据类型不匹配。所以感谢斯韦科。

# api - Soundcloud 仅在标题中搜索

> ID：12747637
> 
> 赞同：2
> 
> 时间：2012-10-05T13:45:55.833
> 
> 标签：api, search, soundcloud

是否可以（例如在带有 intitle: 参数的 youtube 上）缩小 API 搜索范围，使其仅查看标题？我正在寻找来自本地艺术家的特定歌曲，并且我经常会找到描述中包含歌曲标题的 DJ 混音。那么，是否有任何其他参数可以在 aq 查询中传递？有这方面的任何文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:21:41.460

不幸的是，此时不是。我们希望在未来改进这一点，所以请继续关注[开发者博客](http://developers.soundcloud.com/blog)上的公告。

# php - Zend Framework 2 中的实体存在验证，Doctrine 2 在实体中使用 inputfilter

> ID：12747638
> 
> 赞同：5
> 
> 时间：2012-10-05T13:46:00.300
> 
> 标签：php, zend-framework2

我一直在像这样在 Entity 类中构建我的所有验证......

```
class User 
{
    protected $inputFilter;

    public function getInputFilter()
    {
        if (!$this->inputFilter) {
            $inputFilter = new InputFilter();

            $factory = new InputFactory();

            $inputFilter->add($factory->createInput(array(
                'name' => 'username',
                'required' => true,
                'filters' => array(
                    array('name' => 'StripTags'),
                    array('name' => 'StringTrim'),
                ),
                'validators' => array(
                    array(
                      'name' =>'NotEmpty', 
                        'options' => array(
                            'messages' => array(
                                \Zend\Validator\NotEmpty::IS_EMPTY => 'User name can not be empty.' 
                            ),
                        ),
                    ),
                    array(
                        'name' => 'StringLength',
                        'options' => array(
                            'encoding' => 'UTF-8',
                            'min' => 4,
                            'max' => 20,
                            'messages' => array(
                                'stringLengthTooShort' => 'Please enter User Name between 4 to 20 character!', 
                                'stringLengthTooLong' => 'Please enter User Name between 4 to 20 character!' 
                            ),
                        ),
                    ),
                ),
            )));

            $inputFilter->add($factory->createInput(array(
                'name' => 'pass',
                'required' => true,
                'filters' => array(
                    array('name' => 'StripTags'),
                    array('name' => 'StringTrim'),
                ),
                'validators' => array(
                    array(
                      'name' =>'NotEmpty', 
                        'options' => array(
                            'messages' => array(
                                \Zend\Validator\NotEmpty::IS_EMPTY => 'Password can not be empty.' 
                            ),
                        ),
                    ),
                    array(
                        'name' => 'StringLength',
                        'options' => array(
                            'encoding' => 'UTF-8',
                            'min' => 4,
                            'max' => 20,
                            'messages' => array(
                                'stringLengthTooShort' => 'Please enter Password between 4 to 20 character!', 
                                'stringLengthTooLong' => 'Please enter Password between 4 to 20 character!' 
                            ),
                        ),
                    ),
                ),
            ) ));            

            $inputFilter->add($factory->createInput(array(
                'name' => 'confPass',                
                'required' => true,
                'filters' => array(
                    array('name' => 'StripTags'),
                    array('name' => 'StringTrim'),
                ),
                'validators' => array(
                    array(
                      'name' =>'NotEmpty', 
                        'options' => array(
                            'messages' => array(
                                \Zend\Validator\NotEmpty::IS_EMPTY => 'Confirm password can not be empty.' 
                            ),
                        ),
                    ),
                    array(
                        'name' => 'Identical',                        
                        'options' => array(
                            'token' => 'pass',
                            'messages' => array(
                                 \Zend\Validator\Identical::NOT_SAME => 'Confirm password does not match!'                             ),
                        ),
                    ),
                ),
            ) ));            

            $this->inputFilter = $inputFilter;
        }

        return $this->inputFilter;
    }
} 
```

并在我的用户控制器中调用它。

```
$request = $this->getRequest();
        $user = new User();
        $form = new Loginform();
        $form->setInputFilter($user->getInputFilter());
        $form->setData($request->getPost());
        if ($form->isvalid()) {
         // success
         } else {
         // fail
         } 
```

它一直运行良好。但现在我有一个场景，我必须检查数据库中是否已经存在用户实体所以按照丹尼尔的[这个例子](https://stackoverflow.com/questions/12300472/validation-in-zend-framework-2-with-doctrine-2/12301793#12301793)

我创建了一个验证器并像这样测试我的用户控制器。

```
 $query = 'SELECT u FROM Auth\Entity\User u WHERE u.username = :value';         
         $valid2 = new \Auth\Validator\Doctrine\NoEntityExists($this->getEntityManager(), $query);
         if($valid2->isValid("username")) {
// success
} else {
// failure
} 
```

效果很好。

如何使用 NoEntityExists 验证器和我的其他用户名验证器在这个问题中使用上面的 inputfilter。像这样

```
 'validators' => array(
                        array(
                          'name' =>'NotEmpty', 
                            'options' => array(
                                'messages' => array(
                                    \Zend\Validator\NotEmpty::IS_EMPTY => 'User name can not be empty.' 
                                ),
                            ),
                        ),
    array(

    //// no Entity exist validator here
    ),

) 
```

其他参考

[参考1](http://samminds.com/2012/07/a-blog-application-part-1-working-with-doctrine-2-in-zend-framework-2/)

[参考2](http://www.jasongrimes.org/2012/01/using-doctrine-2-in-zend-framework-2/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-08T15:03:23.937

将 NoEntityExists 验证器放在 User 类中的问题在于，它在实体类和数据存储层之间创建了紧密耦合。使得没有Doctrine就无法使用实体类，或者不重写实体类就无法切换到新的存储层。这种紧耦合是 Doctrine 专门设计用来避免的。

需要检查数据库的验证器可以保存在自定义的 EntityRepository 类中：

```
class UserRepository extends \Doctrine\ORM\EntityRepository
{
    public function getInputFilter()
    {
        $inputFilter = new \Zend\InputFilter\InputFilter();
        $factory = new \Zend\InputFilter\Factory();

        $inputFilter->add($factory->createInput(array(
            'name' => 'username',
            'validators' => array(
                'name' => '\DoctrineModule\Validator\NoObjectExists',
                'options' => array(
                    'object_repository' => this,
                    'fields' => array('username'),
                ),
            ),
        )));

        return $inputFilter;
    }
} 
```

确保向您的用户实体添加必要的注释：

```
/**
 * @Entity(repositoryClass="MyProject\UserRepository")
 */
class User
{
    //...
} 
```

然后在传递给您的表单之前将输入过滤器合并在一起：

```
$request = $this->getRequest();
$entityManager = $this->getServiceLocator()->get('Doctrine\ORM\EntityManager');
$repository = $entityManager->getRepository('User');
$user = new User();

$filter = $repository->getInputFilter();
$filter->add($user->getInputFilter());
$form = new Loginform();
$form->setInputFilter($filter);
$form->setData($request->getPost());

if ($form->isValid()) {
    // success
} else {
    // fail
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-12T13:09:03.110

您是否尝试将完整的命名空间添加到验证器？

```
array(
    'name' =>'\Auth\Validator\Doctrine\NoEntityExists', 
    'options' => array(
        'messages' => array(
           \Zend\Validator\NotEmpty::IS_EMPTY => 'User name can not be empty.' 
        ),
    ), 
```

),

# concurrency - 网络 AAA - 并发登录记帐

> ID：12747642
> 
> 赞同：0
> 
> 时间：2012-10-05T13:46:13.510
> 
> 标签：concurrency, session-timeout, aaa-security-protocol

我正在寻找一种网络 AAA（身份验证、授权、记帐）协议来管理从一个帐户访问的并发网络资源。比如说一个账号，两个用户同时登录，如何在两个用户之间分配账号的会话超时时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T03:18:11.657

我假设您不是在寻找电信公司使用的特定 AAA 功能，而是在类固醇上寻找 RADIUS。或许最简单的方法就是将 FreeRADIUS 之类的东西放在类固醇上。

我假设您的特定 NAS 设备（Wifi 集线器、数据包网关等）支持以下 RADIUS 记录。

*   访问请求
*   访问接受/拒绝
*   会计开始
*   会计停止
*   临时会计
*   会话断开

当您启动会话时，让 FreeRADIUS 运行某种脚本或日志以启动到数据库中。这是每个用户的时钟开始。即使用户登录 3 次，您也会收到启动消息。当他们为每个会话注销时，您将获得会话停止。至少，只需运行数据库并计算增量并将记帐规则应用于该用户。如果该用户在并发会话中使用了 10、20 和 30 分钟，您将获得显示 10、20 和 30 分钟的停止记录。

这行得通，但还远远不够。首先，如果会话很长，您将不知道这些会话的时间，直到它们终止。那可能是从现在开始的几天。这是记帐记录，特别是临时记帐记录的来源。如果您的 NAS 支持它，您可以告诉它为会话生成一个临时记帐记录，例如每 30 分钟。因此，如果会话持续 30 分钟或更短，您将获得开始和停止记录。但是，如果会话持续 45 分钟，您将获得：

时间 0 的开始记录 时间 30 的临时记帐更新 时间 45 的停止记录

这并不是您真正关心的 AAA——任何 RADIUS 服务器都可能完成这项工作——FreeRADIUS、OpenRADIUS、Microsoft RADIUS 服务器。这是您的 NAS 设备。如果它不能发送记录，你就不能处理它们。

# html - Firefox 的条件注释？

> ID：12747644
> 
> 赞同：-1
> 
> 时间：2012-10-05T13:46:16.183
> 
> 标签：html, firefox, cross-browser, conditional

> **可能重复：**
> [chrome 和 safari 是否有任何等同于 IE 条件注释的内容？](https://stackoverflow.com/questions/2052218/is-there-any-equivalent-to-ie-conditional-comment-for-chrome-and-safari)

以 IE 8 为目标

```
<!--[if IE 8]>
add IE 8 specific code (JS/HTML/CSS)
<![endif]--> 
```

可以为 Firefox 找到类似的解决方案吗？

感谢您的关注

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:57:08.387

是的

有条件的评论：

1.  IE（任何版本的 IE）
2.  lt IE 版本（版本低于版本）
3.  lte IE版本（版本小于或等于版本）
4.  IE版（仅限版）
5.  gte IE 版本（版本大于等于版本）
6.  gt IE 版本（版本高于版本）
7.  IE - 互联网浏览器
8.  ！歌剧=不是歌剧
9.  Gecko - 基于 Gecko 的浏览器（Firefox、Camino 等）
10.  Webkit - 基于 Webkit 的浏览器（Safari、Chrome、Shiira 等）
11.  SafMob - 移动 Safari (iPhone / iPod Touch)
12.  Opera - Opera 的浏览器
13.  IEMac - 适用于 Mac 的 Internet Explorer
14.  Konq - Konqueror
15.  IEmob - IE 移动版
16.  PSP - 便携式游戏机
17.  NetF - 网络前端

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-05T13:47:57.633

Firefox 没有条件注释。如果你想这样做，你必须使用 JavaScript。

**编辑**

Firefox 没有条件标签，如果你想为特定的浏览器做一些事情，你必须使用 JavaScript。

# php - 在 PHP 中创建搜索表单

> ID：12747650
> 
> 赞同：13
> 
> 时间：2012-10-05T13:46:32.143
> 
> 标签：php, html, mysql, sql, database

我目前正在尝试完成一个项目，其中规范是使用搜索表单来搜索包装数据库。该数据库有很多变量，包括尺寸、名称、类型和肉类。我需要创建一个搜索表单，用户可以在其中使用许多不同的搜索进行搜索（例如搜索 50 厘米长的盖子托盘）。

我花了一整天时间尝试创建一些 PHP 代码，这些代码可以在我创建的测试数据库中搜索信息。我有很多错误，从 mysql_fetch_array 错误、布尔错误，现在我最新的错误是我的表似乎不存在。虽然我可以在其中输入数据（我可以在其中输入数据的 html 和 php 页面），但我不知道是什么原因造成的，我现在又开始了几次。

任何人都可以给我一些想法或提示我目前将要做的事情吗？在我进入实际站点 SQL 数据库之前，这只是我的小测试。

*创建数据库：*

```
 <body>
  <?php
     $con = mysql_connect("localhost", "root", "");
      if (!$con)
     {
      die('Could not connect: ' . mysql_error());
     }
      if (mysql_query("CREATE DATABASE db_test", $con))
     {
  echo "Database created";
     }
      else
    {
  echo "Error creating database: " . mysql_error();
    }

  mysql_select_db("db_test", $con);
  $sql = "CREATE TABLE Liam
   ( 
  Code varchar (30),
  Description varchar (30),
  Category varchar (30),
  CutSize varchar (30),
   )";

 mysql_query($sql, $con);
     mysql_close($con);
 ?> 
   </body> 
```

*HTML 搜索表单页面：*

```
<body>

      <form action="form.php" method="post">
        Search: <input type="text" name="term" /><br />
      <input type="submit" name="submit" value="Submit" />
      </form>

</body> 
```

*我用来尝试从数据库中收集信息的 PHP 代码* （我已经重写了几次，这段代码还显示“table.liam 不存在”）

```
 <body>
   <?php
 $con = mysql_connect ("localhost", "root", "");
 mysql_select_db ("db_test", $con);

  if (!$con)
    { 
    die ("Could not connect: " . mysql_error());
    } 
    $sql = mysql_query("SELECT * FROM Liam WHERE Description LIKE '%term%'") or die
        (mysql_error());

       while ($row = mysql_fetch_array($sql)){
    echo 'Primary key: ' .$row['PRIMARYKEY'];
    echo '<br /> Code: ' .$row['Code'];
    echo '<br /> Description: '.$row['Description'];
    echo '<br /> Category: '.$row['Category'];
    echo '<br /> Cut Size: '.$row['CutSize']; 
  }

  mysql_close($con)
   ?>
     </body> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-05T13:59:27.140

试试这个让我知道会发生什么。

形式：

```
<form action="form.php" method="post"> 
Search: <input type="text" name="term" /><br /> 
<input type="submit" value="Submit" /> 
</form> 
```

表格.php：

```
$term = mysql_real_escape_string($_REQUEST['term']);    

$sql = "SELECT * FROM liam WHERE Description LIKE '%".$term."%'";
$r_query = mysql_query($sql);

while ($row = mysql_fetch_array($r_query)){ 
echo 'Primary key: ' .$row['PRIMARYKEY']; 
echo '<br /> Code: ' .$row['Code']; 
echo '<br /> Description: '.$row['Description']; 
echo '<br /> Category: '.$row['Category']; 
echo '<br /> Cut Size: '.$row['CutSize'];  
} 
```

编辑：清理了一点。

Final Cut（我的测试文件）：

```
<?php
$db_hostname = 'localhost';
$db_username = 'demo';
$db_password = 'demo';
$db_database = 'demo';

// Database Connection String
$con = mysql_connect($db_hostname,$db_username,$db_password);
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db($db_database, $con);
?>

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>
    </head>
    <body>
<form action="" method="post">  
Search: <input type="text" name="term" /><br />  
<input type="submit" value="Submit" />  
</form>  
<?php
if (!empty($_REQUEST['term'])) {

$term = mysql_real_escape_string($_REQUEST['term']);     

$sql = "SELECT * FROM liam WHERE Description LIKE '%".$term."%'"; 
$r_query = mysql_query($sql); 

while ($row = mysql_fetch_array($r_query)){  
echo 'Primary key: ' .$row['PRIMARYKEY'];  
echo '<br /> Code: ' .$row['Code'];  
echo '<br /> Description: '.$row['Description'];  
echo '<br /> Category: '.$row['Category'];  
echo '<br /> Cut Size: '.$row['CutSize'];   
}  

}
?>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T13:58:59.530

您收到错误“表 liam 不存在”，因为表的名称`Liam`与`liam`. MySQL 表名区分大小写。

# mysql - mysql group concat 排序不正确

> ID：12747651
> 
> 赞同：0
> 
> 时间：2012-10-05T13:46:34.780
> 
> 标签：mysql, sql, grouping

我有一个查询，它按以下顺序从数据库返回记录：

```
app_id  app_name    transaction_id  mobile_no   logtime_stamp          navigation_type   entered_code   display_text          User_Response
111     Unicef      1133           919552516853 10/5/2012 12:52:37 PM      0              Maharashtra   Student Attendance     2
111     Unicef      1133           919552516853 10/5/2012 12:52:37 PM      0              Pune          Student Attendance     2
111     Unicef      1133           919552516853 10/5/2012 12:52:37 PM      0              Baramati      Student Attendance     2
111     Unicef      1133           919552516853 10/5/2012 12:52:37 PM      0              Ravi School   Student Attendance     2 
```

返回上述记录的查询是内部查询。

我正在对这些记录执行 group_concat 以获得单行。

我收到以下记录：

```
app_name    transaction_id  mobile_no          entered_code                          display_text      User_Response
Unicef      1133            919552516853    Baramati,Ravi School,Maharashtra,Pune     Student Attendance        2 
```

`group_concat`现在我不明白排序字符串的函数的基础是什么- **Baramati，Ravi School，Maharashtra，Pune**！？

我希望顺序与我在第一组中的顺序完全相同： **马哈拉施特拉邦、浦那、巴拉马蒂、拉维学校**

据我所知， group_concat 中的字符串默认按字母顺序排序。但上述结果违背了这一点。

我还尝试了一个示例查询，其中我正在从表中读取记录并 group_concating 而不分配任何特定顺序。结果按照插入顺序对字符串进行了排序。也就是说，首先插入的记录首先出现在 concat 字符串中，最后一条记录作为字符串中的最后一条。

那么我可以根据内部查询的读取顺序在 group_concat 函数中安排/排序我的结果集吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:54:09.770

刚刚查看了文档：[http](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat) ://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat 发现这一行：

> 要对结果中的值进行排序，请使用 ORDER BY 子句。

以及这个，例如：

```
 mysql> SELECT student_name,
     ->     GROUP_CONCAT(DISTINCT test_score
     ->               ORDER BY test_score DESC SEPARATOR ' ')
     ->     FROM student
     ->     GROUP BY student_name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:50:30.890

```
group_concat(entered_code order by entered_code) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T13:59:10.900

在您给出结果之前没有看到完整的查询和表数据，很难告诉您可以添加一个`ORDER BY`，`GROUP_CONCAT()`但是，它在这个演示中似乎工作正常：

```
select app_name,
  transaction_id,
  mobile_no,
  group_concat(entered_code),
  display_text,
  User_Response
from yourtable 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/efe97/2)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T13:57:35.230

至于文档，您必须能够根据某些字段或表达式对组 concat 结果进行排序。[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

您根本不应该依赖“插入顺序”，因为 MySQL 中没有这样的功能。在大多数情况下，您会按此顺序查看数据，但实际上并未对其进行排序，以后您会变得不那么相关，此顺序将变得如此。

# visual-studio - 停止调试时如何使 Visual Studio 2012 卸载应用程序？

> ID：12747656
> 
> 赞同：1
> 
> 时间：2012-10-05T10:13:21.353
> 
> 标签：visual-studio

VS 2012 将应用安装到系统中进行调试，理论上是可以的。但是每次我停止调试器时都卸载应用程序很烦人。我想要一种简单易用的方法来简单地测试旧 VS 之类的应用程序。我希望 VS 中有一个我以某种方式错过的设置。

以下是步骤记录器文件的链接，以更好地理解问题。 [脚步](http://www.4shared.com/zip/oNIQXnk7/DebugIssue.html)

# firefox - java.lang.NullPointerException webdriver

> ID：12747658
> 
> 赞同：3
> 
> 时间：2012-10-05T13:46:51.383
> 
> 标签：firefox, webdriver, selenium-webdriver

我是使用 webdriver 进行自动测试的新手。有人请检查我收到的原因

```
java.lang.NullPointerException
    at SuccessfullHoverTestCib.testSuccessfullHoverTestCib
    (SuccessfullHoverTestCib.java:29)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)..... 
```

我正在运行以下代码：

```
public class SuccessfullHoverTestCib {
    private WebDriver driver;
    private String baseUrl;
    private StringBuffer verificationErrors = new StringBuffer();

    @Before
    public void setUp() throws Exception {
        File pathToFirefoxBinary = new File("C:\\Documents and Settings\\chakarova\\Local Settings\\Application Data\\Mozilla Firefox\\firefox.exe");  
        FirefoxBinary firefoxbin = new FirefoxBinary(pathToFirefoxBinary);
        WebDriver driver = new FirefoxDriver(firefoxbin,null); 
        baseUrl = "http://cibnew.sofia.ifao.net:7001/cib_web/web";
        driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
    }

    @Test
    public void testSuccessfullHoverTestCib() throws Exception {
        driver.get(baseUrl);
        driver.findElement(By.id("inputButton")).click();
        driver.findElement(By.linkText("Hotels")).click();
        driver.findElement(By.id("pageLink_57")).click();
    }

    @After
    public void tearDown() throws Exception {
        driver.quit();
        String verificationErrorString = verificationErrors.toString();
        if (!"".equals(verificationErrorString)) {
            fail(verificationErrorString);
        }
    } 
```

当我指向错误跟踪时，它链接到测试`method->driver.get(baseUrl);`我认为问题与路径的定义有关`firefox.exe`，但我不知道如何解决它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T18:03:46.183

在您的 setUp() 方法中，您声明了一个名为 driver 的本地 WebDriver 变量，并将其设置为新的驱动程序实例。您的类级驱动程序变量永远不会设置为实例，因此始终为空。

```
public class SuccessfullHoverTestCib {
    private WebDriver driver;
    private String baseUrl;
    private StringBuffer verificationErrors = new StringBuffer();

    @Before
    public void setUp() throws Exception {
        File pathToFirefoxBinary = new File("C:\\Documents and Settings\\chakarova\\Local Settings\\Application Data\\Mozilla Firefox\\firefox.exe");  
        FirefoxBinary firefoxbin = new FirefoxBinary(pathToFirefoxBinary);

        // **** This is the line that changes.
        // **** Note the lack of the WebDriver type.
        driver = new FirefoxDriver(firefoxbin,null); 
        baseUrl = "http://cibnew.sofia.ifao.net:7001/cib_web/web";
        driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
    }

    // The rest of your class should remain the same
} 
```

# oop - 采用哪些常用方法将数据存储与算法分开？

> ID：12747660
> 
> 赞同：0
> 
> 时间：2012-10-05T13:46:55.827
> 
> 标签：oop

假设您将所有数据存储在一个类中，例如`KittenStorage`. 然后你有一个班级想要找到一只特定颜色的小猫，可能叫做`KittenFinder`. 显然，您已经设计了面向对象的程序来分离这两个截然不同的类，但现在`KittenFinder`需要直接与`KittenStorage`. 你如何连接这两个不同的类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:13:03.607

您需要使用图层。首先，您需要一个数据访问层。该层将包含支持直接数据存储命令的类。接下来，您需要一个业务层。该层执行您的业务逻辑中需要执行的任何操作。该层将通过数据访问层使用数据存储。或者，您可以创建一个引擎层，其中可能会实现一些更复杂的算法，它将通过业务层与数据存储进行通信。最后，您拥有 UI，它将通过引擎层或业务层与您的数据存储进行通信。在现实生活中，您的存储是一个数据库，您的数据访问层与数据库进行通信。我希望这可以帮到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:58:19.693

让我们稍微改进一下您的示例 - 假设 KittenStorage 以 storage.get(0) 或 storage[0] 的形式为您提供对小猫的索引访问，并且它还有一个计数或大小属性来知道它有多少只小猫商店。这种方式可以实现 KittenFinder 进行前向搜索，即

```
for (int i = 0; i < storege.size; i++)
{
     //return kitten if matches
} 
```

或者它可以做一个[BinarySearch](http://en.wikipedia.org/wiki/Binary_search)

KittenStorage 类也可能包含持久性机制（例如将小猫保存到数据库或文件）。也许它可以包含一个持久化策略 - 一个不同的类，以便可以交换持久性机制。

这被称为关注点分离 - 一个类应该只做一件事并且只能以一种方式 - 这样很容易维护代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:30:11.487

取决于，有些人会在返回小猫的 KittenStorage 上放置一个 Find 方法。

假设 KittenStorage 是 Kittens 的商店，而 KittenFinder 是 KittenStorage 中 Kitten 或 Kitten(s) 的 Finder

而且那个 Kitten 是一个可存储和可查找的项目，它也有一些行为，例如 Scratch，这与它的可存储和可查找无关，然后 Kitten 将通过 IStorable 链接到 KittenStorage，并且通过 IFindable 将 KittenFinder 链接到 KittenStorage

拥有 DTO（数据传输对象）也是有充分理由的。这只是小猫的状态，即你找到和存储的不是小猫的那个划痕

基本上，以上所有内容都是假设还有 PuppyStorage 和 PuppyFinder 等，并且您希望尽可能地解耦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T07:34:50.667

一般来说，KittenFinder 对 KittenStorage 有“依赖关系”。您的问题是如何设置（注入）此依赖项。这取决于您选择的应用程序框架。Spring 框架是一种流行的方法。

# android - 编辑文本回收listview android？

> ID：12747661
> 
> 赞同：0
> 
> 时间：2012-10-05T13:46:56.573
> 
> 标签：android, listview, android-edittext

我在列表视图中使用了edittext。对于使用的editText addTextChangedListner。每当我更改editText中的数据时，我都想在我的hashmap中更新并在listview中更新edittext。但是相同的数据会更新到所有edittext。如何解决这个问题。

我还在下面的文本中添加了代码。

私有类 RSSListAdaptor 扩展 ArrayAdapter{

```
 private List<RSSItem> objects = null;

        public RSSListAdaptor(Context context, int textviewid, List<RSSItem> objects) {
                super(context, textviewid, objects);

                this.objects = objects;
        }

        @Override
        public int getCount() {
                return ((null != objects) ? objects.size() : 0);
        }

        @Override
        public long getItemId(int position) {
                return position;
        }

        @Override
        public RSSItem getItem(int position) {
                return ((null != objects) ? objects.get(position) : null);
        }

        public View getView(final int position, View convertView, ViewGroup parent) {
                View view = convertView;

                TextView title;
                TextView date;
                EditText description ;
                if(null == view)
                {
                        LayoutInflater vi = (LayoutInflater)RSSFeedActivity.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                        view = vi.inflate(R.layout.rssitemview, null);
                        title = (TextView)view.findViewById(R.id.txtTitle);
                        date = (TextView)view.findViewById(R.id.txtDate);
                        description = (EditText)view.findViewById(R.id.txtDescription);
                }
                else
                {
                    LinearLayout linear=(LinearLayout) convertView;
                      title = (TextView) linear.getChildAt(0);
                      date = (TextView) linear.getChildAt(1);
                      description = (EditText) linear.getChildAt(2);

                }
                final RSSItem data = getItem(position);

                System.out.println("getView   "+position+"Data  "+position+"    "+data.toString());

                if(null != data)
                {
                        title.setText(data.title);
                        date.setText("on " + data.date);
                        try
                        {
                            if(descriptionArrayList.get(position)!=null)
                            {
                                description.setText(descriptionArrayList.get(position)+"");
                            }
                        }
                        catch(Exception e)
                        {
                            description.setText("");
                        }
                         description.addTextChangedListener(new TextWatcher() {

                            @Override
                            public void onTextChanged(CharSequence s, int start, int before, int count) {
                                // TODO Auto-generated method stub

                            }

                            @Override
                            public void beforeTextChanged(CharSequence s, int start, int count,
                                    int after) {
                                // TODO Auto-generated method stub

                            }

                            @Override
                            public void afterTextChanged(Editable s) {
                                Log.v("Position    :"+position, "Value :"+s.toString());
                                //data.description=s.toString();
                                try
                                {
                                    descriptionArrayList.add(position, s.toString());
                                }
                                catch(Exception e)
                                {
                                    descriptionArrayList.add("");
                                }
                            }
                        });

                }

                return view;
        } 
```

}

# javascript - 是否可以使用 HTML 下拉菜单按 ID 选择复选框？

> ID：12747663
> 
> 赞同：1
> 
> 时间：2012-10-05T13:47:03.157
> 
> 标签：javascript, html, jsp, drop-down-menu, checkbox

我正在使用 JSP 遍历 Java 字符串列表并为每个字符串生成 HTML 复选框，如下所示：

```
<%
while (st.hasMoreTokens())
{
    String object = st.nextToken();

    String temp = "<li><input type=\"checkbox\" id=\"" + object +
     "\" + name=\"type\" value =\"" + object + "\">" + object + "</li>";

    out.println(temp);
}
%> 
```

但是，由于大约有 100 个复选框，因此选择用户想要选择的大约 40 个选项会很耗时。相反，我想创建一个下拉菜单，其中包含自定义硬编码列表，可以选择适当的复选框。

例如，如果我有一个复选框列表，如下所示：

```
Apple
Orange
Banana
Pepper
Lime
Lemon
Peas 
```

我可以创建如下自定义列表：

```
var fruit={Apple, Orange, Banana, Lime, Lemon}
var veg="{Pepper, Peas} 
```

然后，我可以创建一个下拉菜单，将“水果”和“蔬菜”作为仅有的两个选项。如果用户选择“Fruits”，那么 JavaScript 将检查“Apple”、“Orange”、“Banana”、“Lime”和“Lemon”，反之亦然。

重要的是用户应该仍然能够手动选择一个或几个复选框，因此大量的复选框是必不可少的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:05:02.953

这个想法是让您的复选框匹配`name`s 并使用下拉列表中与名称匹配的所有元素的数组[`document.getElementsByName()`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByName)

**HTML**

```
<select id="type" onChange="selectType();">
    <option value=""></option>
    <option value="fruit">Fruit</option>
    <option value="vegs">Vegs</option>
</select>

<input type="checkbox" name="fruit" id="Apple">Apple</input>
<input type="checkbox" name="fruit" id="Orange">Orange</input>
<input type="checkbox" name="vegs" id="Carrot">Carrot</input>
<input type="checkbox" name="vegs" id="Peas">Peas</input>​ 
```

**JAVASCRIPT**

```
function selectType(){
    var el = document.getElementById("type");

    if(el.value !== ""){
      var type = document.getElementsByName(el.value);
      for(var i = 0; i < type.length; i++){
        type[i].checked = true;
      }
    }    
} 
```

**[例子](http://jsfiddle.net/VQSHx/2/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:01:11.137

两种选择：

用于`document.getElementById()`选择您的框，当然您需要在每个复选框上设置**不同**的id：

```
document.getElementById("box1") 
```

或者将 Jquery 库添加到您的项目中，然后您可以简单地与

```
$("#box1").attr("checked") 
```

使用 jquery，您的代码应该是

```
$("#dropmenuid").change(
function()
{
if (("#dropmenuid").val() == fruits)
   **check all the fruit boxes with id**
if (("#dropmenuid").val() == veg)
   **check all the veg boxes with id**    
}); 
```

祝你好运

# css - CSS浮动元素缺少第一个高度

> ID：12747667
> 
> 赞同：1
> 
> 时间：2012-10-05T13:47:17.837
> 
> 标签：css, css-float

下面创建一个类似结构的表。

正如您将在 FIDDLE 中看到的，第一个的高度`<li>`不计算在内。为什么是这样。

[http://jsfiddle.net/CaqCg/5/](http://jsfiddle.net/CaqCg/5/)

```
.ui .form {
    display:block; position:relative; clear:both;
}
.ui .padd {
    padding:20px; display:block;
}
.ui .form.boxstyle .text {
    padding:0 5px 10px 5px;
}
.ui .form.boxstyle ul {
    border:1px solid #DDD; border-radius:10px; background:#FAFAFA; margin:10px 0 10px 0; box-shadow:inset 0 0 10px rgba(100,100,100,0.1); display:block; position:relative; clear:both;
}
.ui .form.boxstyle li {
    border-bottom:1px solid #DDD; display:block; clear:both; position:relative;
}
.ui .form.boxstyle li span:first-child {
    float:left; display:block; width:-webkit-calc(35% - 20px);  width:-moz-calc(35% - 20px);  width:calc(35% - 20px); padding:12px 10px 9px 10px; font-size:12px; line-height:16px; height:16px; text-indent:6px; vertical-align:top;
}
.ui .form.boxstyle li span:nth-child(2) {
    float:right; display:block; width:-webkit-calc(65% - 34px); width:-moz-calc(65% - 34px); width:calc(65% - 34px); padding:11px 10px 9px 10px; font-size:12px; line-height:16px; min-height:16px; border:solid #DDD; border-width:0 1px 0 1px; background:#FFF;
}
.ui .form.boxstyle li:last-child {
    border-bottom:0px;
}
.ui .form.boxstyle label {
    width:100%; font-size:12px; color:#555; text-shadow:0 1px #FFF;
}
.ui .form.boxstyle input, .ui .form.boxstyle textarea {
    height:16px; display:block; color:#555; border:none; box-shadow:none; outline:none; line-height:16px; margin:0; width:100%; display:block; appearance:normal; padding:0;
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:50:43.187

添加`overflow: hidden`到`ul`：http: [//jsfiddle.net/CaqCg/6/](http://jsfiddle.net/CaqCg/6/)

由于`ul`其中的浮动元素，它正在崩溃。

* * *

更新：也添加`overflow: hidden`到`li`s 中，因为它们也在崩溃：http: [//jsfiddle.net/CaqCg/13/](http://jsfiddle.net/CaqCg/13/)

# c# - facebook在c#中分享一个页面

> ID：12747670
> 
> 赞同：0
> 
> 时间：2012-10-05T13:47:31.337
> 
> 标签：c#, javascript, jquery, asp.net

当我点击“分享”时，它会在新标签页中打开 Facebook 分享页面。我想在此页面的左侧栏中显示 temp.jpg。这个怎么做？

测试.aspx

```
<div id="page-wrap">
    <!-- AnythingSlider #1 -->
    <ul id="slider1" style="width: 778px; height: 452px; background:#fff;">
        <li>
            <div style="float: left; padding-right: 35px; padding-left:50px;">
                <img src="../../img/temp.jpg" style="width: 264px;
                    height: 377px; border: none;" />      
                <uc:DownloadControl ID="DownloadControl1" runat="server" PageParameters="1" />
            </div>                
        </li>
        <li>
        <uc:DownloadControl ID="DownloadControl2" runat="server" PageParameters="2" />
... 
```

下载控件.ascx

```
<div style="float: left">
   <a class="icerik" id="facebookShare" runat="server" target="_blank">
    <img border="0" src="images/facebook.jpg" alt="Resorts"
        title="Hotels & Resortss" /> Share </a> 
```

下载Control.ascx.cs

```
 protected void Page_Load(object sender, EventArgs e)
{    
 facebookShare.HRef = "http://www.facebook.com/sharer.php?u=http://www.test.com/test.aspx";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:52:56.727

您必须制作 FRAMES [http://www.w3schools.com/tags/tag_frame.asp](http://www.w3schools.com/tags/tag_frame.asp)并将您的链接更改`target="_blank"`为`target="framename"`

# java - junit 无法捕获通用异常

> ID：12747673
> 
> 赞同：0
> 
> 时间：2012-10-05T13:47:35.963
> 
> 标签：java, exception, junit

的java代码：

```
public static <T extends Throwable> void checkNotNull(Object value, String name, Class<T> exceptionClass) throws T, SecurityException, IllegalArgumentException, NoSuchMethodException, InstantiationException, IllegalAccessException, InvocationTargetException {
    if (value==null)
      throw ExceptionHelper.constructException(exceptionClass, name + " should not be null");
}

static <T extends Throwable> T constructException(java.lang.Class<T> exceptionClass, String message) throws SecurityException, NoSuchMethodException, IllegalArgumentException, InstantiationException, IllegalAccessException, InvocationTargetException {
    Constructor<T> constructor = exceptionClass.getConstructor(String.class);
    T result = constructor.newInstance(message);
    return result;
} 
```

junit代码：

```
@Test
public void testCheckNotNull() {
    try {
    ValidationUtility.checkNotNull(null, "valuename", exceptionClass);
    } catch (T e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
      } 
} 
```

然后编译器说：不能在catch块中使用类型参数T

那么如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:50:01.673

由于 T 在编译时是未知的，因此您不能在这样的 catch 块中使用它。它根本不是编译器支持的东西，因此会出现错误。

如果您的意图是验证是否引发了正确的异常，我建议您修改您的测试代码，如下所示：

```
@Test
public void testCheckNotNull() {
    try {
        ValidationUtility.checkNotNull(null, "valuename", exceptionClass);
    } catch (Throwable e) {
        assertEquals(exceptionClass, e.getClass());
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:46:24.183

经过

```
Constructor<T> constructor = exceptionClass.getConstructor(String.class);
T result = constructor.newInstance(message); 
```

您正在创建作为参数传递的类的结果对象。这里使用'T'，仅表示您正在使用扩展类构造结果`Throwable`。

在测试方法中，即使这样声明它：

```
 @Test
    public <T extends Throwable> void testCheckNotNull() {
        try {
        ValidationUtility.checkNotNull(null, "valuename", exceptionClass);
        } catch (T e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
          } 
    } 
```

仍然`T`是一种类型，而不是`Exception`可以被捕获的类。正如您在错误中发现的那样，您将无法捕获`Type`.

既然你知道， Type`T`代表类扩展`Throwable`， use 可能想`Throwable`在 catch 块中使用。

```
 } catch (Throwable e) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T15:02:53.743

如前面的答案中所述，您无法捕获 T。这是因为擦除。如果您期望出现异常，我建议使用 JUnit4。

```
@Test(expected = Throwable.class)
public void testCheckNotNull() throws Throwable {
     ValidationUtility.checkNotNull(null, "valuename", exceptionClass);
} 
```

您的测试代码也存在错误。如果没有抛出异常，那么测试仍然会通过。你也需要失败

```
@Test
public void testCheckNotNull() {
    try {
      ValidationUtility.checkNotNull(null, "valuename", exceptionClass);
      fail("expected to throw")
    } catch (Throwable e) {}
} 
```

# objective-c - Objective-C iOS NSURLConnection statusCode 400 没有返回正文

> ID：12747675
> 
> 赞同：1
> 
> 时间：2012-10-05T13:47:36.713
> 
> 标签：objective-c, ios, asp.net-web-api, nsurlconnection, nshttpurlresponse

不太确定从哪里开始，然后潜入 CF（我真的不想这样做）但是....

我有一个 NSURLConnection 对 ASP.NET WebAPI 资源服务器的 OAuth2 请求进行签名，该资源服务器返回 JSON 正文和 statusCode 400。我还没有找到一种方法来在它返回代码 400 时从响应中解析数据。

这里有人有什么想法吗？我宁愿继续使用 NSURLConnection 因为这只是一个 OAuth2 消费者类。我的其他代码正在使用 restkit，但我不希望 OAuth2 端需要所述库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:46:34.880

您的 HTTP 请求 Accept 标头是否指定“application/json”？如果是这样，那么这可能是一个 IIS 错误，而不是 iOS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T15:14:01.553

从返回状态 400 的请求中解析数据的过程应该与返回状态 200 的请求相同。

只需记下状态码`-connection:didReceiveResponse:`并允许请求继续；`-connection:didReceiveData:`您将像往常一样收到服务器发送的任何其他数据。最后，在`-connectionDidFinishLoading:`收到所有数据后，您会接到一个电话，您可以在那里解析 JSON。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T19:48:59.083

有趣的是，MVC4 ActionResult 在 RTM 中被破坏了。将其切换到 Pure WebApi 并微调响应，我能够巧妙地将其返回正确的数据，它可能错误地序列化了其他语言没有捕获的 json。

# vba - 从 INI 文件在 VBA 中声明常量

> ID：12747678
> 
> 赞同：0
> 
> 时间：2012-10-05T13:47:40.660
> 
> 标签：vba, scope, global-variables, constants

我`const`在 VBA 模块中有一些，但我想将它们放在 INI 文件中，因为我有其他使用相同常量的应用程序。这有效：

```
Public Const PATH_DB As String = "\\server\folder\bdd.mdb" 
```

然而这不起作用：

```
Public Const PATH_DB As String = getFromIni("path","db","C:\config.ini")

Public Function getFromIni(ByVal strSectionName As String, ByVal strEntry As String, ByVal strIniPath As String) As String
    Dim x As Long
    Dim sSection As String, sEntry As String, sDefault As String
    Dim sRetBuf As String, iLenBuf As Integer, sFileName As String
    Dim sValue As String

    sSection = strSectionName
    sEntry = strEntry
    sDefault = ""
    sRetBuf = Strings.String$(256, 0) '256 null characters
    iLenBuf = Len(sRetBuf$)
    sFileName = strIniPath
    x = GetPrivateProfileString(sSection, sEntry, "", sRetBuf, iLenBuf, sFileName)
    sValue = Strings.Trim(Strings.Left$(sRetBuf, x))

    If sValue <> "" Then
        getFromIni = sValue
    Else
        getFromIni = vbNullChar
    End If
End Function 
```

```
# C:\config.ini
[path]
db=\\server\folder\bdd.mdb 
```

我的 getFromIni 函数实际上工作得很好，但当我想声明常量时却不行（它根本不编译）。我尝试了一个全局变量，但由于某种原因，它也不起作用，从同一个项目中的另一个表单使用时找不到该变量（它仅在它被声明为 const 时才有效，但我不能声明它从函数中获取值时作为 const）。

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:54:02.170

您不能将函数调用分配为 CONST 字符串的值。我希望您在运行此程序时收到错误“需要常量表达式”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:53:25.417

改变

```
Public Const PATH_DB As String = getFromIni("path","db","C:\config.ini") 
```

到

```
Public PATH_DB As String 
```

将以下从 INI 文件中获取值的调用放在初始化方法中（比如数据库打开事件）

```
PATH_DB = getFromIni("path","db","C:\config.ini") 
```

# ruby - 当模型在单独的 gem 中定义时，Kaminari 和 Mongoid '未定义的方法页面'

> ID：12747690
> 
> 赞同：1
> 
> 时间：2012-10-05T13:48:12.737
> 
> 标签：ruby, ruby-on-rails-3, mongoid, kaminari

我有一个简单的日志应用程序，由 ruby​​ 脚本和一个从 MongoDB 文档读取的“只读”Rails 应用程序组成。为了保持模型的一致性，它们都使用了一个定义了 Mongoid 文档的通用 gem。

我遇到的问题是在 gem 中定义的 Mongoid 文档没有得到 Kaminari 装饰。换句话说（尽可能简化）。

```
# User is a Mongoid document defined in the Rails app (i.e. standard behavior)
require 'kaminari'
class UsersController < ApplicationController
  def index
    User.page(params[:pg]) # works great
  end
end 
```

但

```
# SharedLogging::LogEntry is a Mongoid document defined in a separate gem
require 'kaminari'
class LogEntriesController < ApplicationController
  def index
    SharedLogging::LogEntry.page(params[:pg]) # undefined method 'page' for ...
  end
end 
```

我认为解决方案是在 /config/initializers/kaminari_config.rb 中执行某些操作以强制将分页应用于共享模型，但我无法偶然发现正确的解决方案。

或者，我也尝试将 Kaminari 添加为共享 gem 中的依赖项，但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:31:37.620

似乎可以使用此处描述的相同解决方案来解决：[https ://github.com/collectiveidea/delayed_job_mongoid/issues/10](https://github.com/collectiveidea/delayed_job_mongoid/issues/10)

在我的 kaminari_config.rb 我添加了以下几行：

```
SharedLogging::LogEntry.send(:include, Kaminari::MongoidExtensions::Document)
SharedLogging::LogEntry.send(:include, Kaminari::MongoidExtensions::Criteria) 
```

`SharedLogging::LogEntry.page(params[:pg])`如果我首先应用范围（例如`SharedLogging::LogEntry.by_date(params[:dt]).page(params[:pg])`），则如果我执行第二行，则需要第一行。

最大的问题是我的 gem 中的每个模型都需要两条线；并且有很多模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:24:01.427

与其手动扩展，不如使用 Kaminari 的 hooks 初始化程序。我发布的另一个答案中有详细信息：

[#<Array:0xc347540> kaminari "page" 错误的未定义方法页面。rails_admin](https://stackoverflow.com/questions/10688256/undefined-method-page-for-array0xc347540-kaminari-page-error-rails-admin/13799169#13799169)

# sql - SQL Server Management Studio 错误“找不到保存的设置文件”

> ID：12747693
> 
> 赞同：8
> 
> 时间：2012-10-05T13:48:19.427
> 
> 标签：sql, sql-server, sql-server-2008

这是我的问题：每次启动“Microsoft SQL Server Management Studio”时，都会收到警告

```
The automatically saved settings file "\\Settings\CurrentSettings-2012-02-13.vssettings' cannot be found. 
```

消息继续说：

```
"You can change this file on the 'Import and Export Settings' Tools Options page". The IDE will use your most recent settings for this session. 
```

这个设置在哪里？如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-03T11:55:27.557

1.  如果 SQL Server Management Studio 已打开，请关闭它

2.  打开注册表编辑器导航到位置 _HKEY_CURRENT_USER\Software\Microsoft\Microsoft SQL Server\100\Tools\Shell_

3.  将 Reg Key "VisualStudioLocation" 的值编辑为

    `%USERPROFILE%\Documents\SQL Server Management Studio`

关闭注册表编辑器并检查问题是否已解决

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-05T13:52:35.557

您可以尝试以下步骤：

> 在`Tools menu`,`select Options.`
> 
> 选择`Environment folder`,`choose Import and Export Settings`
> 
> 在自动将我的设置保存到此文件中，输入您将备份的位置。
> 
> 选择确定。

该文件位于：`%userprofile%\Documents\Visual Studio 2008\Settings\CurrentSettings.vssettings`

注意：如果你没有找到文件，你可以从你的同事那里得到另一个文件

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-04T14:35:01.363

就我而言：我们将 Documents 文件夹作为映射的网络驱动器，似乎 SQL 管理工作室对此存在问题。作为一种快速的解决方法，我在这个网络驱动器之外创建了设置文件，它可以工作。唯一的缺点是设置不同步但老实说我不在乎:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-11T01:42:06.227

我有同样的问题。原来我已经重命名了驱动器，这导致了问题。将其重命名为原始名称（如错误消息中的路径所示）解决了该问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-30T20:30:31.683

我设法在没有更改注册表的情况下修复它。根据本网站的说明： http: [//sebastian.expert/the-automatically-saved-settings-file-currentsettings-vssettings-cannot-be-found/](http://sebastian.expert/the-automatically-saved-settings-file-currentsettings-vssettings-cannot-be-found/)

基本上您需要更改选项中的默认路径。转到工具/选项然后环境/导入和导出设置更改现有路径。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T16:59:32.730

使用您最喜欢的注册表编辑器，或者如果您没有合适的注册表编辑器，请使用 regedt32.exe。导航到`HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\<vsver>\profile`，`<vsver>`您正在使用的 Visual Studio 的数字版本在哪里，例如 6.0、7.1、8.0、9.0。在那里，您会找到一个条目`AutoSaveFile`。编辑此条目以指向您希望作为默认设置文件的 vssettings 文件。如果您没有这样的文件，请先通过“工具->导入和导出设置...->导出选定的环境设置”创建一个。is的典型值， `AutoSaveFile`is`%vsspv_visualstudio_dir%\Settings\CurrentSettings.vssettings`的典型值。`DefaultSettingsDirectory``%vsspv_visualstudio_dir%\Settings\`

错误消息“您可以在'导入和导出设置'工具选项页面上更改此文件”中的语句似乎不正确。特别是，无论我使用“导入和导出设置”工具选项页面保存或加载设置的方式有多少，我都无法重置默认值。我不得不求助于修改注册表。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-08T10:26:30.850

我发现了很多建议编辑以下注册表的解决方案：HKEY_CURRENT_USER\Software\Microsoft\Microsoft SQL Server\100\Tools\Shell\VisualStudioLocation

如果有人（像我一样）没有该条目，我设法通过编辑这个条目来修复它：HKEY_CURRENT_USER\Software\Microsoft\Microsoft SQL Server\100\Tools\Shell\Profile\AutoSaveFile

我运行 MS SQL Server 2008 R2

# c# - C# webBroswer 组件从 javascript 覆盖 window.print

> ID：12747697
> 
> 赞同：1
> 
> 时间：2012-10-05T13:48:29.597
> 
> 标签：c#, javascript, browser

我有一个做很多事情的 Web 应用程序，需要编写一个 C# 程序来打印系统生成的文档。

当用户单击 Web 表单 ( `window.print()`) 上的打印按钮时，它将打印到特定的打印机，而不会弹出打印对话框。

我试过`webbrowser.print()`了，但它只打印没有弹出的网页界面。

我正在寻找的一件事是处理网站创建的打印作业的方法。我希望 C# 程序能够删除打印对话框并直接打印到打印机。

谁能给我一个提示，告诉我如何实现这个，或者解释为什么（如果）这是不可能的？

PS 我无法更改 Web 应用程序中的任何内容。这就是为什么我想编写一个 C# 程序来执行/管理这个额外的操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:22:03.870

您在 c# 表单上有一个 webbrowser 控件吗？做这个：

myBrowser.Document.GetElementById("ButtonId").InvokeMember("click");

它会自动单击按钮。

如果按钮没有 id，那么您将需要使用其类或标签来识别该按钮。搜索“在浏览器控件中自动单击按钮”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:45:43.247

尝试从 C# 代码在网页内注入脚本

类似于某些 C# 应用程序按钮 click 的东西。.

```
HtmlElement head = webBrowser1.Document.GetElementsByTagName("head")[0];
HtmlElement scriptEl = webBrowser1.Document.CreateElement("script");
IHTMLScriptElement element = (IHTMLScriptElement)scriptEl.DomElement;
element.text = "function printDocument() { window.print(); }";
head.AppendChild(scriptEl);
webBrowser1.Document.InvokeScript("printDocument"); 
```

或者干脆

```
webBrowser1.InvokeScript("eval", "window.print();"); 
```

# security - GET 变量对于传输秘密是否安全？

> ID：12747703
> 
> 赞同：1
> 
> 时间：2012-10-05T13:48:57.180
> 
> 标签：security, get

**背景**

我正在根据自己的需要开发一个应用程序，其中包含一些非常轻量级的框架。我不想花时间在用户偏好、登录等上。除了我，没有人会使用它。

**我的问题**

假设我希望在访问此地址时能够在我的数据库中添加或删除任何内容：

[http://www.example.com/?secret=eccbc87e4b5ce2fe28308fd9f2a7baf3](http://www.example.com/?secret=eccbc87e4b5ce2fe28308fd9f2a7baf3)

没有登录，只有这个地址。那有多安全？如果它不安全，那么什么是一个好的简单解决方案？

**我的想法**

*   没有人能猜出那把秘钥。
*   如果没有链接，机器人能查到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:58:21.837

如果它不通过 SSL，那么它也可以被嗅探。如果您在公共 wifi 上更新，任何人都可以看到价值。尽管不太可能有人会嗅探您的网站

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T07:06:39.907

如果这只是为了自己，那应该没问题。尚未提及的一个警告 - 确保您没有将其他网站的内容嵌入到您的页面中，否则他们会在他们的 Referer 标头中看到您的神奇价值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T13:50:45.383

你的想法是对的。所以不要在公共计算机上为 URL 添加书签 ;-)

如果它是 MD5 或其他大文本字符串取决于您...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T21:58:43.307

要回答帖子标题“GET 变量对于传输秘密是否安全？”中的问题，答案是否定的（取决于您所说的“安全”）。正如一些人所指出的，虽然唯一的 URI 可能无法猜到，但如果某人在网络上的适当位置（咖啡店、室友、图书馆、大学、ISP 等），他们可能会找到唯一的 URI。

即使使用了 SSL (HTTPS)，SSL 中也存在一些弱点，这些弱点仍可能将您的流量泄露给适当定位的攻击者。参见 SSLStrip [0]、BEAST 攻击 [1] 和最近的 CRIME [2] 以及其他。

真正的困境是你愿意承担多少风险。如果您使用 URI 来查看小猫的图像，那么您可能需要接受风险。但是，如果您使用它来存储您的信用卡详细信息，那么您可能不想接受这种风险。

除了数据包嗅探之外，还有其他方式可以揭示您唯一的“秘密”URI。另一种可能显示的方式是，如果您从该“秘密”页面链接到第三方站点并单击该链接，则 URI 可能会在 HTTP 的“引用者”标头中发送。

[0] [http://www.thoughtcrime.org/software/sslstrip/](http://www.thoughtcrime.org/software/sslstrip/)

[1] [http://luxsci.com/blog/is-ssltls-really-broken-by-the-beast-attack-what-is-the-real-story-what-should-i-do.html](http://luxsci.com/blog/is-ssltls-really-broken-by-the-beast-attack-what-is-the-real-story-what-should-i-do.html)

[2] [http://arstechnica.com/security/2012/09/many-ways-to-break-ssl-with-crime-attacks-experts-warn/](http://arstechnica.com/security/2012/09/many-ways-to-break-ssl-with-crime-attacks-experts-warn/)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-05T13:53:49.813

如果您将它放在互联网上的任何公共场所，机器人就会找到它。在知道 URL 并为您的站点编写一个指定的小型机器人之后，有人可能只是用彩虹表迭代所有 md5。如果它只是为了一个小的管理，那没关系，但是放一些其他的值来检查它是危险的。也许md5和sha512一样。那是相当安全的。

# java - 如何让我的线程程序打印特定的输出

> ID：12747704
> 
> 赞同：-6
> 
> 时间：2012-10-05T13:49:00.690
> 
> 标签：java, multithreading, synchronization, wait, notify

我在处理同步 java 线程、应用等待和通知时遇到问题。

我想弄清楚如何在可以交替打印答案的程序中实现这些。例如，person1 将计算数字 1-5 以及 person2，输出应该是这样的。

```
person1 count 1
person2 count 1
person1 count 2
person2 count 2
person1 count 3
person2 count 3
person1 count 4
person2 count 4
person1 count 5
person2 count 5 
```

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:14:32.707

您可以通过两种方式轻松做到这一点：

1.  使用两个信号量在线程之间传递一个“打印令牌”：线程 1 打印，发送信号量 A，等待信号量 B，然后循环。线程 2 等待信号量 A、打印、发送信号量 B 并循环。

2.  编写内联的单线程代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:54:31.623

不要使用等待和通知。使用同步块。

有关 Java 监视器如何工作的深入解释，包括代码示例，您可以访问此处：[http ://www.artima.com/insidejvm/ed2/threadsynch.html](http://www.artima.com/insidejvm/ed2/threadsynch.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T14:51:48.537

线程程序的全部目的是线程的*异步*操作。这就是您获得性能提升的方式，因为不同的任务可以同时在不同的 CPU/内核上工作，*而*不必相互同步。为了强制这种同步，锁步输出按照定义强制线程做一些非典型的事情。

@Martin 的回答提供了使其正常工作的替代方法。

# unity-container - DefaultInterceptor VirtualMethod 在 BaseClass 上不起作用

> ID：12747706
> 
> 赞同：0
> 
> 时间：2012-10-05T13:49:15.950
> 
> 标签：unity-container

我正在尝试拥有一个基类并使用统一注册默认拦截。我还在解析之前注册了每个派生类型，但它不起作用。我希望 BaseMethod 在这里被截获，但事实并非如此。

```
 public class AbstractResponse
{
    private string name;

    public virtual void BaseMethod()
    {
        Console.WriteLine("Base");
    }
}

 public class DocumentResponse:AbstractResponse
{
    public virtual void Test()
    {
        Console.WriteLine("In Test Method");
    }

}

var container = new UnityContainer(); container.AddNewExtension<Interception>();
                 container.RegisterType<AbstractResponse>(
                 new DefaultInterceptor<VirtualMethodInterceptor>(),
                 new DefaultInterceptionBehavior<TraceBehavior>()).
                 RegisterType<AbstractResponse,DocumentResponse>();

container.Resolve<DocumentResponse>().BaseMethod(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:32:32.863

您刚刚在注册代码上出了点问题——您实际上在代码示例中调用了 RegisterType 两次，而第二次注册覆盖了第一次。将它切换到这样的东西，它会正常工作： -

```
container.RegisterType<AbstractResponse, DocumentResponse>(
   new DefaultInterceptor<VirtualMethodInterceptor>(),
   new DefaultInterceptionBehavior<TraceBehaviour>()); 
```

所以这说“注册 AbstractResponse 并将其映射到 DocumentResponse。然后，使用 VirtualMethodInterceptor，应用 TraceBehaviour。”

您始终可以通过查看 Resolve 返回的类型来查看拦截是否处于活动状态 - 如果它是（在这种情况下） AbstractResponse 则它没有工作；如果你得到一些时髦的 Unity 生成的类型名称，那么它就可以工作了。

# xcode - scrollview xcode4.5 自动布局

> ID：12747710
> 
> 赞同：1
> 
> 时间：2012-10-05T13:49:42.547
> 
> 标签：xcode, ios6

-（无效）viewDidLoad {

[scroller setScrollerEnabled:YES]; [scroller setContentSize:CGSizeMake(100, 1000)];

[超级视图DidLoad];

当我检查自动布局并添加图像视图、按钮等时，在检查自动布局之前工作 100% 滚动不再起作用，如果我删除自动布局又可以正常工作

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T15:00:12.530

据我了解，“自动布局”在加载视图后设置约束，因此问题可能是您在 viewDidLoad 上设置了约束，并且在“自动布局”更改之后。尝试在 viewDidAppear 上设置此约束。

# ruby-on-rails - Rails 路由获取和匹配

> ID：12747714
> 
> 赞同：1
> 
> 时间：2012-10-05T13:49:54.683
> 
> 标签：ruby-on-rails, ruby, routing

当我使用路由中的方法生成控制器时，我有这样的事情：

```
get "vehicle_manufacturers/show" 
```

之后我将编写这样的代码是一个好习惯吗：

```
match 'vehicle_manufacturers/:id/' => 'vehicle_manufacturers#show', :as => :vehiclemanufacturers 
```

或者，是否有另一种编写此代码的方法，以便正常工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T14:03:27.543

遵循[Rails](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)命名和路由到您的操作的约定是最佳实践。这让你说：

```
resources :vehicle_manufacturers 
```

`index`这将自动为, `new`, `create`, `show`, `edit`,`update`和`delete`使用适当的 HTTP 方法和助手名称创建路由。假设它对应于`VehicleManufacturer`符合 ActiveModel 约定（如 ActiveRecord、Mongoid 等）的对象，`url_for`将自动 Do The Right Thing™，让您无需额外的路由相关工作即可使用表单和重定向等。

您可能只需要这些方法的一个子集，这很常见。这也很好：

```
resources :vehicle_manufacturers, :only => [:index, :show] 
```

您希望支持常规 CRUD 方法之外的其他方法。去吧：

```
resources :vehicle_manufacturers, :only => [:index, :show] do
  get :stock_price, :on => :member
end 
```

这会将名为`stock_price_vehicle_manufacturer`mapping 的路由添加到`/vehicle_manufacturers/:id/stock_price`. 虽然，严格来说，我可能认为股票价格是一种子资源......

关键是，尝试使用资源作为路由的基础。它使一切变得更容易。

# java - java web项目运行时如何在webroot中创建文件？

> ID：12747715
> 
> 赞同：2
> 
> 时间：2012-10-05T13:49:57.240
> 
> 标签：java, tomcat, web-applications, jboss

嗨，我必须在项目中使用 java 动态创建一个 XML 文件，并且必须使用基本路径 URL 读取它。我可以在手动创建文件时读取文件，但无法动态创建它。当我使用**File f1 = new File("test.XML");** 它在**tomcat 的 Bin 文件夹**中创建文件。该文件必须在项目中创建，同时在 Tomcat 和 Jboss EAP 6 中运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:56:57.533

您可以使用 servlet 上下文获取 Web 应用程序的真实路径：

```
new File( servletContext.getRealPath( "/text.XML" ) ); 
```

注意：如果您在 Linux 上运行 tomcat/jboss，您可能必须授予在 webapp 文件夹中写入的权限，但默认情况下这很可能是禁止的。

引用 Servlet API 文档[`ServletContext.getRealPath()`](http://docs.oracle.com/cd/E17802_01/products/products/servlet/2.5/docs/servlet-2_5-mr2/javax/servlet/ServletContext.html#getRealPath%28java.lang.String%29)：

> 返回包含给定虚拟路径的真实路径的字符串。例如，路径“/index.html”返回服务器文件系统上的绝对文件路径，将由对“http://host/contextPath/index.html”的请求提供服务，其中 contextPath 是此 ServletContext 的上下文路径..

# php - 与所有 php 5.2 安装兼容的 PHP http 请求方法

> ID：12747718
> 
> 赞同：1
> 
> 时间：2012-10-05T13:50:09.330
> 
> 标签：php

在大多数用于 Windows、Mac 和 Linux 的 php 安装中都是 curl。

我知道它是一个扩展，不必启用。

我正在发出肥皂请求，并且需要最常用的方法来发出这些请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:53:25.540

对于 SOAP 请求，使用 SoapClient——它应该被启用。在命令行上运行`php -m`，`soap`应该会出现在模块列表中。对于其他 Web 请求，请使用 pear 库 HTTP_Request2 (http://pear.php.net/package/HTTP_Request2/redirected)。它可以通过 pear 或手动拉下并转储到您的库中。无需编译或更改 php 安装。

# c# - 如何将值传递给 SqlDataSource 查询？

> ID：12747721
> 
> 赞同：1
> 
> 时间：2012-10-05T13:50:13.823
> 
> 标签：c#, asp.net

我在 ASP.NET 中创建了一个 ListView，并基于 CodeProject [here](http://www.codeproject.com/Articles/24570/Complete-ListView-in-ASP-NET-3-5?msg=4387997#xx4387997xx)给出的示例。我想让 SqlDataSource 的 Select 命令动态化，以便从会话提供的值中生成一个值。我尝试了不同的可能性，这是我想要的一个例子：

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:TestDatabaseConnectionString %>" 
    SelectCommand="SELECT * FROM [Contacts] WHERE [Name] = <%# Eval("value") %> " >
</asp:SqlDataSource> 
```

我将如何使用 ASP 传递这样的值？我还尝试在 C# 后页中创建查询并像`SelectCommand = "<%# Eval("Query") %>"`使用`@value`语法一样链接到它。既不工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:19:42.250

提供的解决方案非常好。还应该注意的是，尝试将您的“值”直接放在查询中，您将面临 SQL 注入攻击。使用选择参数可以防止和保护您免受这种情况的影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:02:17.127

这应该可以解决问题。如下定义一个**SessionParameter**并确保`Name=Sql parameter name and SessionField is same as your session field`. DBType 和 DefaultValue 根据需要...

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    SelectCommandType="Text"
    ConnectionString="<%$ ConnectionStrings:TestDatabaseConnectionString %>" 
    SelectCommand="SELECT * FROM [Contacts] WHERE [Name] = @ParaName"

    <SelectParameters>
        <asp:SessionParameter 
               Name="ParaName" 
               SessionField="YourSessionFieldName" 
               DbType="String" 
               DefaultValue="" />
    </SelectParameters>
</asp:SqlDataSource> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T13:55:08.893

用。。。来代替

```
SelectCommand="SELECT * FROM [Contacts] WHERE [Name] = @Name" 
```

并将您的@Name 定义为参数

```
<SelectParameters>
    <asp:Parameter  DefaultValue="<%# Eval("Query") %>" Name="Name"  DbType="..." />
</SelectParameters> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T15:18:02.600

我真的建议不要使用`SqlDataSource`控件。A`SqlDataSource`在该领域中提供的很少是重用。

**以编程方式进行数据库调用**

如果您在单独的类中进行调用（或者在 a 中更好`DAL`），您将能够轻松地在多个页面中使用它。此外，当您的查询发生更改时，您只需在一个地方进行更改。

下面是一个使用实体框架访问数据库的示例

**标记**

```
<asp:DropDownList ID="ddlTest" runat="server"></asp> 
```

**代码背后**

```
public List<Record> GetAllRecordsByUserName(string credentials)
{
    List<Record> recordList;
    using (CustomEntities context = new CustomEntities())
    {

        IQueryable<Record> recordQuery = from records in context.Records
                                              where records.UserName == credentials
                                              select records; 
        recordList = recordQuery.ToList<Record>();
    }
    return recordList;
}

public void ValidateAndBind(string username)
{
    List<Record> recordList = GetAllRecordsByUserName(username);

    // Do validation here

    ddlTest.DataSource = recordList;
    ddlTest.DataBind();
}

protected void Page_Load(object sender, EventArgs e)
{
    ValidateAndBind("test.username");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T13:54:10.830

我有同样的问题，我解决它的懒惰方法如下：

```
command.CommandText = item.Query.Replace("@Value", Value);
command.ExecuteNonQuery(); 
```

肮脏，容易，很可能不是正确的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-02T23:38:03.653

另一种无需代码即可实现目标的方法是使用**隐藏字段**并执行以下操作：

```
<asp:HiddenField runat="server" ID="HfieldID" Value='<%# Eval("value")%>'/>
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:TestDatabaseConnectionString %>" SelectCommand="SELECT * FROM [Contacts] WHERE [Name] = @Name">
    <SelectParameters>
        <asp:ControlParameter Name="Name" PropertyName="Value" ControlID="HfieldID" DbType="String" />
    </SelectParameters>
</asp:SqlDataSource> 
```

请务必将其放在将使用此 SqlDataSource 的***任何控件之前。***

# string - “换行”和“回车”有什么区别？

> ID：12747722
> 
> 赞同：267
> 
> 时间：2012-10-05T13:50:17.493
> 
> 标签：string, newline, line-breaks, carriage-return, linefeed

如果有两个关键字，那么它们必须有自己的含义。所以我想知道是什么让它们与众不同以及它们的代码是什么。

* * *

## 回答 #1

> 赞同：403
> 
> 时间：2012-10-05T13:56:19.097

**换行**意味着向前移动一行。代码是`\n`。**回车**
意味着将光标移动到行首。代码是。**`\r`**

 **`\r\n`Windows 编辑器通常仍然在文本文件中使用两者的组合。Unix 大多只使用`\n`.

分离来自打字机时代，当您转动轮子移动纸张以更改行并移动托架以在行首重新开始打字时。这是两个步骤。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2015-08-25T07:43:09.993

由于没有足够的奖励积分，我无法发表评论，我必须回答@Burhan Khalid 给出的正确答案。
在非常外行的语言中，输入键是回车和换行的组合。
回车将光标水平指向行首，换行将光标垂直移动到下一行。两者的组合为您提供换行（\n）效果。
参考 - [https://en.wikipedia.org/wiki/Carriage_return#Computers](https://en.wikipedia.org/wiki/Carriage_return#Computers)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-05T13:55:55.137

这两者都是从旧印刷时代开始的。

回车是从电传打印机/旧打字机时代开始的，从字面上看，马车会返回到下一行，并将纸张向上推。这就是我们现在所说`\r`的。

换行`LF`表示该行的结束，它表示该行已经结束 -*但不会将光标移动到下一行*。换句话说，它不会将光标/打印机头“返回”到下一行。

有关更多杂项的详细信息，请访问强大的[wikipedia](http://en.wikipedia.org/wiki/Newline)。**

# xaml - WinRT 可绑定高亮 TextBlock 控件

> ID：12747723
> 
> 赞同：0
> 
> 时间：2012-10-05T13:50:20.350
> 
> 标签：xaml, binding, windows-runtime, highlight, textblock

我正在开发 WinRT/Windows 商店应用程序。

有什么办法可以突出显示 TextBlock 中的某些文本？
类似的东西：

```
<controls:TextBlockHighlight Text="{Binding Text}" HighlightText="{Binding HighlightText}" /> 
```

我设法获得所需的输出

```
<TextBlock>
  <TextBlock.Text>
    <Run>......</Run>
  </TextBlock.Text>
</Textblock> 
```

但我需要那个控件是可绑定的，我不知道如何让它像那样..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T17:40:35.377

菲利普，

非常感谢您在框架中添加。

突出显示文本块行为现在可在[http://winrtxamltoolkit.codeplex.com/中使用](http://winrtxamltoolkit.codeplex.com/)

问候

# c# - 枚举与内部联接/在哪里

> ID：12747730
> 
> 赞同：1
> 
> 时间：2012-10-05T13:50:36.387
> 
> 标签：c#, enums, inner-join, where

我已经通过 int 定义了各种文本值。我将 int 值存储在数据表中以便更好更快地搜索。我有三个选项来显示文本值：

1.  我在代码中声明 Enum 并根据 int 值显示文本值。它是静态的，如果要添加新值，我必须更改代码。

2.  为了使其动态化，我可以将 int 和 text 值存储在另一个数据库中的表中，并由管理员拥有它。管理员可以在此表中更新新值。每当获取记录时，我都会使用内部联接来显示文本值。

3.  我将实际文本存储在相应的数据表中。这会使搜索变慢。

我的问题是在以下情况下最好使用哪个选项？

1.  数据表有超过 1 到 1000 万条记录。
2.  有 5000 多个用户在表上进行获取、搜索、更新过程。
3.  最大文本值为 12 个数字和长度（最大）50 个字符。
4.  具有上述条件和功能的数据表有30个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:56:49.753

我喜欢选项 #2 和选项 #1 的组合 - 使用 int 但在另一个数据库中有字典表。
让我解释：

*   将 int 和 text 存储在另一个数据库中的表中；
*   在原始表中仅存储 int；
*   不要从另一个数据库连接表以获取文本，而是在客户端缓存字典并从该字典中解析文本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:58:10.863

由于给出的原因，我不会选择选项 1。枚举不作为查找存在。您可以将 1 替换为创建字典，但每次进行更改时都需要重新编译它，这很糟糕。

如果保证像这里那样重复很多，那么将文本存储在表格中（即选项 3）是不好的。这正是您应该使用第 2 条建议的查找表的地方。

所以是的，将它们存储在数据库表中并通过它来管理它们。

如果只是到一张小桌子，加入应该不需要很长时间。如果您担心，另一种方法可能是在第一次需要时将查找表加载到代码中的字典中，并从您的小型查找表中查找代码中的值。我怀疑你只是通过加入来做这件事会遇到问题。

无论条件如何（即记录数等），我都会采用这种方法。不过，条件确实使它更明智。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T13:58:00.420

如果您确实拥有数百万条记录，那么几乎可以肯定，尝试在服务器代码或客户端以任何形式构建这样的结构是没有意义的。它需要保存在数据库中，恕我直言。

创建列表的查询需要足够智能，以将返回记录的计数限制为可管理的数量。也许分区视图或存储过程可能在这方面有所帮助。

如果这主要是一个只读列表，并且仅在管理活动的上下文中进行更新，那么应该可以在客户端使用适当的索引和查询非常快速地对表进行查询。

# c - 在 C 中创建动态矩阵的方法？

> ID：12747731
> 
> 赞同：3
> 
> 时间：2012-10-05T13:50:38.567
> 
> 标签：c, matrix, dynamic-arrays

这是我知道在 C 中动态创建矩阵（二维数组）并将用户输入读取到其元素中的唯一方法：

*   创建指向指针数组的`x`指针，其中每个指针代表矩阵中的一行 -`x`是矩阵中的行数（其高度）。

*   将此数组中的每个指针指向一个包含`y`元素的数组，其中`y`是矩阵中的列数（宽度）。

* * *

```
int main()
{

  int i, j, lines, columns, **intMatrix;

  printf("Type the matrix lines:\t");
  scanf("%d", &lines);
  printf("Type the matrix columns:\t");
  scanf("%d", &columns);

  intMatrix = (int **)malloc(lines * sizeof(int *)); 
  //pointer to an array of [lines] pointers

  for (i = 0; i < lines; ++i)
      intMatrix[i] = (int *)malloc(columns * sizeof(int)); 
      //pointer to a single array with [columns] integers

  for (i = 0; i < lines; ++i)
  {
      for (j = 0; j < columns; ++j)
      {
        printf("Type a number for <line: %d, column: %d>\t", i+1, j+1);
        scanf("%d", &intMatrix[i][j]);
      }
  } 
```

还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T13:55:21.140

你可以这样尝试

```
int main()
{    
  int i, j, lines, columns, *intMatrix;

  printf("Type the matrix lines:\t");
  scanf("%d", &lines);
  printf("Type the matrix columns:\t");
  scanf("%d", &columns);

  intMatrix = (int *)malloc(lines * columns * sizeof(int)); 

  for (i = 0; i < lines; ++i)
  {
      for (j = 0; j < columns; ++j)
      {
        printf("Type a number for <line: %d, column: %d>\t", i+1, j+1);
        scanf("%d", &intMatrix[i*lines + j]);
      }
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T14:22:26.910

从 C99 开始（但不是 C++），您可以使用可变长度数组：

```
int main()
{    
  int i, j, lines, columns;

  printf("Type the matrix lines:\t");
  scanf("%d", &lines);
  printf("Type the matrix columns:\t");
  scanf("%d", &columns);

  {
    int intMatrix[lines][columns];

    for (i = 0; i < lines; ++i)
    {
        for (j = 0; j < columns; ++j)
        {
          printf("Type a number for <line: %d, column: %d>\t", i+1, j+1);
          scanf("%d", &intMatrix[i][j]);
        }
    }
  }
} 
```

甚至像这样：

```
void readData (int lines, int columns, int array[lines][columns])
{
  int i, j;

  for (i = 0; i < lines; ++i)
  {
      for (j = 0; j < columns; ++j)
      {
        printf("Type a number for <line: %d, column: %d>\t", i+1, j+1);
        scanf("%d", &array[i][j]);
      }
  }
}

int main()
{
  int lines, columns;

  printf("Type the matrix lines:\t");
  scanf("%d", &lines);
  printf("Type the matrix columns:\t");
  scanf("%d", &columns);

  {
    int intMatrix[lines][columns];

    readData (lines, columns, intMatrix);
  }
} 
```

但是，在这两种情况下，数组数据都存储在堆栈中，而不是堆中，因此无法正确存储它，并且您不能将其放入结构或任何 malloc'd 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T13:56:14.527

```
struct matrix {
    type *mem;
};

struct matrix* matrix_new () {
    struct matrix *M = malloc (sizeof(matrix));
    M->mem = malloc (sizeof (type) * rows * cols);
    return M;
} 
```

使用`realloc`、`memcpy`和`memmove`来`free`修改数组的块。要访问单个元素，请使用类似`mem[row*cols+col]`或`mem[rows*col+row]`取决于对您具有优先级的内容（或您定义行和列的内容）。

# highcharts - 'Highcharts' 标签/项目类缺失，可用于在图表区域的任何位置放置标签

> ID：12747736
> 
> 赞同：1
> 
> 时间：2012-10-05T13:50:43.623
> 
> 标签：highcharts

我有一个需要在图表上放置自定义标签的情况。我知道下面的 jQuery 可以完成这项工作，但我需要从后面的代码中完成。我看到了 highchart codeplex (http://highcharts.codeplex.com/) 来获取 Labels/Items 类，但它不存在。此外，我写了我自己的课程如下，但没有运气。

jQuery

```
labels: { items : [{ html : labelme ,style : { left: '10px',top: '300px'}}] } 
```

C#各自的类

```
Labels Class:

namespace Test.Core 
```

{ [可序列化]

```
public class Labels
{      

    public CSSObject style { get; set; }

    public Items items { get; set; }

    public Labels()
    {

    }
 } 
```

物品类别：

```
namespace Test.Core
{
  [Serializable]
public class Items
{
     public CSSObject style { get; set; }

    public string html { get; set; }

    public Items()
    {

    }
}
} 
```

在创建图表实例时，我确实编写了以下代码：

```
chart = new LineChart
        {
Labels = new IMCharts.src.HighchartsNet.Labels.Labels
            {
                items = new Items
                {
                    html = "90 days mean change is 27%",
                    style = new CSSObject { top = "100px", left = "100px" }
                },
                style = new CSSObject { color = "#3E576F" }
            }

} 
```

请让我知道这里是否有任何问题，或者非常感谢任何帮助。

谢谢普鲁什

# matlab - 在 gcc 工作时，Mex 编译的代码无法运行

> ID：12747740
> 
> 赞同：3
> 
> 时间：2012-10-05T13:50:49.210
> 
> 标签：matlab, gcc, mex

我一直在尝试在一些使用 Boost 库工作的 cpp 代码上获得一个 mex 包装器。但事实并非如此。

mex 和 g++ 都可以很好地编译代码，但是对 mexfunction 的调用失败并出现错误：

```
Unexpected Standard exception from MEX file.
What() is:std::bad_alloc 
```

从 boost 序列化库（正如我从 GDB 中得出的那样）它加载，而 CPP 的工作正常。它们在完全相同的输入上运行并在运行时加载相同的库。据我了解，mex 使用 gcc（通过 设置`mex -setup`）的行为应该与 GCC 编译代码一样。我不确定在哪里寻找问题。

1.  MEX 会发出警告，指出它支持 GCC 4.3.4 而不是已安装的 GCC 4.6.4。我不希望这是问题所在。Boost 库是 1.51 版

2.  核心函数获取文件名并从文件中读取输入。实例化一个类，执行一些操作并通过 boost 序列化库将实例转储到 tmp 文件。然后根据后续调用，通过序列化读回实例，执行操作并将其转储回临时文件。在尝试从文件中读回实例时，mex 编译的代码会在 GCC 编译的代码工作时留下错误。大纲如下：

    ```
    class T { 
        Tree( std::string input ); //reads input and builds 
        void dump( std::string tmp ); //dumps D to tmp
        void read( std::string tmp); //reads tmp and builds D
        void operation1( std::string tmp); //reads D from tmp,does op1,dumps back D
        void operation2( std::string tmp); //reads D from tmp,does op2,dumps back D

        DataStructure D;
    }; 
    ```

有没有办法我可以弄清楚为什么会发生这种情况，或者我错过了一些明显的东西。任何建议都会有所帮助。我可以根据需要添加更多细节。

# jqmobi - jqMobi/jQuery 中的 $am() 函数有什么作用？

> ID：12747741
> 
> 赞同：0
> 
> 时间：2012-10-05T13:50:52.280
> 
> 标签：jqmobi

我一直在 jq.ui.js 中看到这个 $am() 函数调用，但是我在任何地方都找不到定义......这个函数有什么作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:26:46.670

它在底部的 jq.ui.js 中。它只是在 aUX 中使用的 document.getElementById() 的一个包装器（jqUi 是从它派生的，这是在编写查询选择器库之前）。

# javascript - 如何在 Chrome 中禁用平滑滚动

> ID：12747746
> 
> 赞同：5
> 
> 时间：2012-10-05T13:51:09.537
> 
> 标签：javascript, google-chrome, scroll

我正在创建一个网络应用程序（主要集中在 Chrome 中的使用），但是 Chrome 的“平滑滚动”（我猜这就是所谓的，像 IOS 上的“额外”滚动）进入了方法。

有没有办法通过javascript禁用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-08T13:17:15.103

通过拦截滚轮事件并“手动”移动`scrollTop`/像素位置，我能够缓解平滑滚动时遇到的一些渲染问题：`scrollLeft`

```
function wheeled(event) {
  event.preventDefault()

  container.scrollTop += event.deltaY
  container.scrollLeft += event.deltaX
}

container.addEventListener('wheel', wheeled, { passive: false, capture: true })
// actual render code is in the `scrolled` handler because
// there are other wheel events in the code that adjust the scroll position
container.addEventListener('scroll', scrolled, { passive: true }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T05:29:45.110

您所说的平滑滚动称为过度滚动反弹或橡皮筋滚动。

[禁用 iOS Overscroll 但允许正文滚动](https://stackoverflow.com/questions/10546857/disable-ios-overscroll-but-allow-body-scrolling)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T22:50:33.637

使用 Javascript 设置 HTML 和 BODY 标签的 CSS 样式。

将它们的“溢出”属性设置为“隐藏”。

# php - 根据时间戳的php mysql echo结果

> ID：12747751
> 
> 赞同：-1
> 
> 时间：2012-10-05T13:51:18.083
> 
> 标签：php, mysql, database, timestamp, echo

我有一个上传脚本，它在上传广告时需要一个时间戳，我想创建一个脚本，该脚本将根据时间戳回显最后 10 次上传。

我不知道该怎么做，非常感谢任何帮助！

```
<?php

$now = date("Y-m-d H:i:s");

echo $now;

 $sql = "SELECT * FROM people WHERE posttime < $now LIMIT 0, 10";

  $q     = $conn->prepare($sql) or die("failed!");
  // Bind the params to the placeholders
   $q->execute();

 ?> 
```

时间戳如下：

```
2012-10-05 14:40:21 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:54:00.627

更好的是使用 MySQL 条件：

```
SELECT * FROM people WHERE posttime < NOW() LIMIT 0, 10 
```

但在你的情况下`posttime`总是低于当前，我认为:) 在这种情况下，我认为正确的查询是：

```
SELECT * FROM people ORDER BY posttime DESC LIMIT 0, 10 
```

但是，如果您的比较时间并不总是当前时间，则添加条件：

```
SELECT * FROM people WHERE posttime < $someNotCurrentTimePHPVar ORDER BY posttime DESC LIMIT 0, 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:54:32.123

你需要`order by`条款

```
SELECT * 
FROM people 
WHERE posttime < $now 
order by posttime desc
LIMIT 0, 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T13:55:20.907

在查询中按顺序 添加`order by`子句，如下所示，`desc`

```
 $sql = "SELECT * FROM people WHERE posttime < $now order by posttime desc LIMIT 0, 10"; 
```

# eclipse - eclipse解析xml文件失败

> ID：12747766
> 
> 赞同：3
> 
> 时间：2012-10-05T13:51:39.507
> 
> 标签：eclipse

我正在尝试用一个按钮制作一个基本菜单。

每次我查看 xml 文件的图形布局时都会收到此错误：

```
activity_main.xml: Failed to parse file 
C:\Users\...\eclipse\workspace\Library\res\menu\activity_main.xml

org.xmlpull.v1.XmlPullParserException: Binary XML file line #1: invalid drawable tag menu
at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:877)
at android.graphics.drawable.Drawable.createFromXml(Drawable.java:818)
at com.android.layoutlib.bridge.impl.ResourceHelper.getDrawable(ResourceHelper.java:208)
at android.content.res.BridgeTypedArray.getDrawable(BridgeTypedArray.java:782)
at android.view.View.<init>(View.java:3336)
at android.view.View.<init>(View.java:3273)
at android.view.ViewGroup.<init>(ViewGroup.java:421)
at android.widget.RelativeLayout.<init>(RelativeLayout.java:184)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at android.view.LayoutInflater.createView(LayoutInflater.java:587)
at android.view.BridgeInflater.onCreateView(BridgeInflater.java:86)
at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
at android.view.BridgeInflater.createViewFromTag(BridgeInflater.java:131)
at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
at android.view.LayoutInflater.inflate(LayoutInflater.java:372)
at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:321)
at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:331)
at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1638)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1389)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:1163)
at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.delegatePageChange(LayoutEditorDelegate.java:674)
at com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor.pageChange(CommonXmlEditor.java:360)
at org.eclipse.ui.part.MultiPageEditorPart$2.widgetSelected(MultiPageEditorPart.java:292)
at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1077)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1062)
at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:774)
at org.eclipse.swt.custom.CTabFolder.setSelection(CTabFolder.java:3023)
at org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1730)
at org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:270)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1022)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:916)
at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:585)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:540)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
at org.eclipse.equinox.launcher.Main.run(Main.java:1438) 
```

这是我在文件中的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@menu/activity_main"
tools:context="com.jbalaka.library.Library" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:text="@string/library" />

</RelativeLayout> 
```

它给我的另一个错误是

> layoutlib.jar 丢失！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-08T14:07:44.283

我通过在同一个工作区中创建一个新项目解决了我的问题，并比较了文件以查看是否有任何可能是错误的差异，我发现我在 activity_main.xml 文件中写`android:background=`了一些东西`<RelativeLayout`并且它没有链接到任何背景或任何颜色，然后我删除了该代码行，图形布局再次正确加载，我可以删除我比较的项目，所以我建议你删除`android:background="@menu/activity_main"`代码的一部分，看看它是否有帮助.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:54:54.610

清理项目并清除 Lint。

Lint 警告会产生奇怪的错误/警告。

# r - Dribble in R：如何将所有 i/o 复制到文件中？

> ID：12747769
> 
> 赞同：1
> 
> 时间：2012-10-05T13:51:45.040
> 
> 标签：r, user-interface, io

R 中是否有类似[Common Lisp 函数 DRIBBLE](http://www.lispworks.com/documentation/HyperSpec/Body/f_dribbl.htm)或[Unix 命令 tee](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/tee.html)的东西？

具体来说，我希望*我键入* **的所有内容以及** *R 打印*回给我的所有内容都附加到一个文件中（`tee`仅捕获标准输出；我想要*所有内容*：错误、警告、打印、猫、我的输入）。

我发现了一条关于该主题的[10 年前的消息](https://stat.ethz.ch/pipermail/r-help/2002-March/019247.html)，它提供了一个弱版本（它没有捕获来自 cat/print 的输出）。

标准函数[sink](http://stat.ethz.ch/R-manual/R-patched/library/base/html/sink.html)只*捕获*（不*重复*）R 的输出；它*没有*捕获我的输入。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T16:45:14.627

查看`txtStart`TeachingDemos 包中的函数（和相关函数）。我认为除了捕获错误之外，它可以完成您想要的一切（并且`TaskCallback`需要更新 R 中的系统才能发生这种情况）。

另一种选择是在另一个环境中运行 R，例如 ESS（在 Emacs 内部）（还有其他环境，但我对它们不太熟悉）。然后所有内容都在编辑器/缓冲区中捕获，并可以保存到文件中。

请注意，该`sink`函数确实有一个`split`参数，可以`tee`在屏幕上显示输出并将其复制到文件中，但它仍然只执行输出，而不是输入命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:53:06.303

您可能想要`sink()`- 参见`help(sink)`示例。

# signalr - SignalR - 如何检测客户端连接/重新连接失败（例如超时）

> ID：12747770
> 
> 赞同：1
> 
> 时间：2012-10-05T13:51:50.240
> 
> 标签：signalr

如何检测客户端何时无法连接（或重新连接）到 Signalr 集线器？

是否有在 js 客户端上触发的事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T17:37:15.450

回复您的第二条评论：

当前在 0.5.3 SignalR 不处理服务器离开时的情况。但是，这将在下一个版本 1.0alpha 中处理。

在此期间，我建议每 5 秒 ping 一次服务器并查看请求是否失败。如果失败说 2 次，那么很可能服务器已关闭，您可以从那里处理逻辑。

如果你想看看我们在下一个版本中是如何做到的，这里是 github 功能的链接： [https ://github.com/SignalR/SignalR/issues/469](https://github.com/SignalR/SignalR/issues/469)

# facebook - 将 Facebook 照片设置为专辑封面

> ID：12747777
> 
> 赞同：2
> 
> 时间：2012-10-05T13:52:04.810
> 
> 标签：facebook, facebook-graph-api

我正在为一个移动应用程序开发 API，为了争论，它很像 Foursquare 和 Instagram。这两个应用程序都允许您将照片上传到您的 Facebook 个人资料。

这些将被添加到“Foursquare Photos”相册中，如果它不存在并且您在“相册”区域中看到它，则会制作该相册。每次添加新图像时，它将成为专辑封面，您会看到它显示在专辑的开头，因此图像按时间倒序排列（最新在顶部/左侧，最早在右下方）。

要设置封面，我认为我可以简单地这样做：

![在此处输入图像描述](../Images/06fc4e75689ea0b0e7e6b297bb6aadb1.png)

这是我尝试发布对相册 ID 的更新，设置`cover_photo`为我刚刚上传的文件的照片 ID。我已经很好地创建了相册，使用相同的访问令牌上传了照片 - 所以我们知道它不是范围（因为是的，我肯定有`user_photos`令牌）。

第二种方法是假设这是自动的，并尝试使用“位置”字段将照片上传到相册的“开始”，但是当我发布 POST 时，它似乎被完全忽略了：

```
$photo = $facebook->api("/{$album_id}/photos", 'POST', array(
    'access_token' => $token->oauth_token, 
    'image' => '@'.$filename,
    'no_story' => 1, 
    'position' => 1,
    'from' => array(
        'id' => $user_opp->user->facebook_uid,
    ),
)); 
```

这可以很好地上传图像，但将其放在专辑的末尾，而不是开头。

那么，f**k 是如何工作的呢？我用谷歌搜索了我的屁股，一无所获。尝试了 IRC 并没有任何响应，尝试了 Facebook 开发者论坛，但他们失败了。我没有要牺牲的山羊，但也许有人知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:21:34.030

> 每次添加新图像时，它都会成为专辑封面，您会看到它显示在专辑的开头

这应该会自动发生。在我的测试中，确实如此。

> 第二种方法是假设这是自动的，并尝试使用“位置”字段将照片上传到相册的“开始”，但是当我发布 POST 时，它似乎被完全忽略了

这从未打算作为*发布*新照片的参数，它仅在从 API*读取相册照片时返回；*此外，

> [https://developers.facebook.com/roadmap/#october-2012](https://developers.facebook.com/roadmap/#october-2012)
> 
> **删除照片**的位置字段：照片 FQL 表和 Photo Graph API 对象中的位置字段将开始为所有照片返回 0。Graph API 中相册对象上的照片连接将继续按照照片在相册中出现的顺序返回照片。

# binding - 使用淘汰赛绑定到 css 变换比例

> ID：12747779
> 
> 赞同：0
> 
> 时间：2012-10-05T13:52:07.133
> 
> 标签：binding, knockout.js, transform

我正在尝试`<div>`通过使用 Knockout 绑定到滑块值来缩放带有子元素的 a。除了实际的变换外，一切正常：

```
<div id="scaleTest" data-bind="style:{msTransform: 'scale(' + scaleValue + ')'}">
  <div data-bind="text: scaleValue">
</div> 
```

内部的文本`<div>`随着`ko.observable` `scaleValue`跟踪滑块值的变化而变化，但变换不会缩放`<div>`.

只需使用：

```
data-bind="style:{msTransform: 'scale(' + 2 + ')'}" 
```

工作正常。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T13:58:38.720

尝试将括号添加到`scaleValue`：

```
<div id="scaleTest" data-bind="style:{msTransform: 'scale(' + scaleValue() + ')'}"> 
```

# erlang - Riak 连接池静默断开

> ID：12747780
> 
> 赞同：0
> 
> 时间：2012-10-05T13:52:16.620
> 
> 标签：erlang, database-connection, riak

我在生产中遇到了严重的问题。我们使用官方 erlang pb 客户端制作连接池。一切正常。为了组织游泳池，我们使用热水浴缸（我们尝试了几个，但这是最简单的）。每个连接至少在 3-5 分钟内使用一次（现在生产未满载）。

几天后 riak 服务器断开了我们的连接。但是套接字进程不会死，它会响应任何请求`{error, disconnected}`。到目前为止，我编写了池工作者检查器，如果它`is_connected(Pid)`返回不正确，我们将杀死工作者并池创建新的。我每十分钟发射一次。但这没有帮助。它返回 true，但随后我提出了我得到的请求`{error, disconnected}`。到目前为止，唯一有效的解决方案是 pool full reinit if some worker return `{error, disconnected}`。这是非常野蛮的，可能会使整个应用程序崩溃。

当我检查服务器日志时，我发现了很多这样的错误：

```
2012-09-20 00:10:10.976 [error] <0.803.0>@riak_core_vnode:handle_info:510 296867520082839655260123481645494988367611297792 riak_kv_vnode worker pool crashed {timeout,{gen_server,call,[<0.819.0>,{work,<0.806.0>,{fold,#Fun<riak_kv_eleveldb_backend.3.96124638>,#Fun<riak_kv_vnode.14.47983300>},{raw,59205031,<0.28969.11>}}]}}
2012-09-20 00:10:10.976 [error] <0.862.0>@riak_core_vnode:handle_info:510 365375409332725729550921208179070754913983135744 riak_kv_vnode worker pool crashed {timeout,{gen_fsm,sync_send_event,[<0.866.0>,{checkout,false,5000},5000]}} 
```

我想这是真正的问题，但我认为客户端连接至少应该记录一些东西，获取连接问题失败列表或死亡。我得到 is_connected(Pid) = true

您如何组织 24/7 全天候工作的连接池？您如何检查池工作人员或刷新他们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T02:39:35.013

保持您的连接池受到监督，如果连接出现 {error, disconnected} 或出现其他问题，则让连接终止。如果由于某种原因套接字进程由于某种原因没有停止，您也可以手动停止它。

至于我，我使用[poolboy](https://github.com/devinus/poolboy)来做这样的事情。

# parsing - IRC 消息格式说明

> ID：12747781
> 
> 赞同：0
> 
> 时间：2012-10-05T13:52:23.683
> 
> 标签：parsing, language-agnostic, standards, protocols, irc

我从 IRC 服务器收到了这条消息

```
:shiplu!shiplu@example.com PRIVMSG &channel :bot: Poor baby!\r\n 
```

这里`PRIVMSG`是命令。右边的其余部分是`&channel :bot: Poor baby!`

现在最后一个参数是什么？`:bot: Poor baby!`或者 `Poor baby!`

在[RFC2810 第 2.3.1 节](https://www.rfc-editor.org/rfc/rfc2812#section-2.3.1)中写道

```
 nospcrlfcl =  %x01-09 / %x0B-0C / %x0E-1F / %x21-39 / %x3B-FF
                    ; any octet except NUL, CR, LF, " " and ":"
    middle     =  nospcrlfcl *( ":" / nospcrlfcl )
    trailing   =  *( ":" / " " / nospcrlfcl ) 
```

现在如果`:bot: Poor baby!`是最后一个参数，它怎么能包含任何冒号？`nospcrlfcl`被定义为不包含任何冒号。如果 `Poor baby!`是最后一个参数怎么会`:bot:`变成中间呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T03:22:55.523

尾随（最后一个）参数用冒号标记，并且可能包含空格。中间参数不能包含空格，并且不能以冒号开头。

所以 &channel 是“中间”并且`bot: Poor baby!`（没有前导冒号）是“尾随”。

# android - Android中的布局xml问题

> ID：12747793
> 
> 赞同：0
> 
> 时间：2012-10-05T13:53:01.360
> 
> 标签：android, android-layout, layout

这是我的布局： ![布局](../Images/5358184a57599cd2c99d52dfe33e2504.png)

这是我的 XML。我的布局很好，除了红色部分。我无法将其纳入视野。对齐有问题。有没有工具可以轻松设计布局？始终面临与所有分辨率以及纵向和横向尺寸兼容的对齐问题。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<RelativeLayout
    android:id="@+id/relativeLayout2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="5dip"
    android:orientation="horizontal" >

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="400dp"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_toLeftOf="@+id/linearLayout3"
        android:background="#fff"
        android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/linearLayout1"
            android:layout_width="match_parent"
            android:layout_height="400dp"
            android:background="#fff"
            android:orientation="vertical" >

            <ImageView
                android:id="@+id/productImageView"
                android:layout_width="fill_parent"
                android:layout_height="380dp" />
        </LinearLayout>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout5"
        android:layout_width="500dp"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="420dp"
        android:background="#fff"
        android:orientation="horizontal" >

        <RelativeLayout
            android:id="@+id/relativeLayout1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dip" >

            <LinearLayout
                android:id="@+id/linearLayout2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_toLeftOf="@+id/linearLayout3"
                android:background="#fff"
                android:orientation="vertical" >

                <LinearLayout
                    android:id="@+id/linearLayout4"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_marginTop="5dip"
                    android:layout_toLeftOf="@+id/linearLayout3"
                    android:background="#fff"
                    android:orientation="vertical" >

                    <TextView
                        android:id="@+id/product_name"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content" />
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/linearLayout5"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_marginTop="5dip"
                    android:layout_toLeftOf="@+id/linearLayout3"
                    android:background="#fff"
                    android:orientation="horizontal" >

                    <LinearLayout
                        android:id="@+id/linearLayout7"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_alignParentLeft="true"
                        android:layout_toLeftOf="@+id/linearLayout3"
                        android:layout_weight="1"
                        android:background="#fff"
                        android:orientation="horizontal" >

                        <TextView
                            android:id="@+id/your_price_tv"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:text="Your Price" />
                    </LinearLayout>

                    <LinearLayout
                        android:id="@+id/linearLayout8"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_alignParentLeft="true"
                        android:layout_toLeftOf="@+id/linearLayout3"
                        android:layout_weight="1"
                        android:background="#fff"
                        android:orientation="horizontal" >

                        <TextView
                            android:id="@+id/your_price"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content" />
                    </LinearLayout>
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/linearLayout6"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_marginTop="5dip"
                    android:layout_toLeftOf="@+id/linearLayout3"
                    android:background="#fff"
                    android:orientation="horizontal" >

                    <LinearLayout
                        android:id="@+id/linearLayout9"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_alignParentLeft="true"
                        android:layout_toLeftOf="@+id/linearLayout3"
                        android:layout_weight="1"
                        android:background="#fff"
                        android:orientation="horizontal" >

                        <TextView
                            android:id="@+id/button4"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:text="Retail Price" />
                    </LinearLayout>

                    <LinearLayout
                        android:id="@+id/linearLayout10"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_alignParentLeft="true"
                        android:layout_toLeftOf="@+id/linearLayout3"
                        android:layout_weight="1"
                        android:background="#fff"
                        android:orientation="horizontal" >

                        <TextView
                            android:id="@+id/retail_price"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:text="Button" />
                    </LinearLayout>
                </LinearLayout>
            </LinearLayout>

            <LinearLayout
                android:id="@+id/linearLayout3"
                android:layout_width="70dip"
                android:layout_height="wrap_content"
                android:layout_alignBottom="@+id/linearLayout2"
                android:layout_alignParentRight="true"
                android:layout_alignTop="@+id/linearLayout2"
                android:background="#c0c0c0"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/button6"
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:text="Button" />
            </LinearLayout>
        </RelativeLayout>

        <RelativeLayout
            android:id="@+id/linearLayout15"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_marginTop="5dip"
            android:background="#c0c0c0"
            android:orientation="vertical" >

            <LinearLayout
                android:id="@+id/linearLayout11"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_marginTop="5dip"
                android:background="#c0c0c0"
                android:orientation="horizontal" >

                <Button
                    android:id="@+id/button6"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="Buy Now" />

                <Button
                    android:id="@+id/button7"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="Gush It" />
            </LinearLayout>

            <LinearLayout
                android:id="@+id/linearLayout12"
                android:layout_width="fill_parent"
                android:layout_height="30dip"
                android:layout_alignParentRight="true"
                android:layout_marginTop="5dip"
                android:background="#c0c0c0"
                android:orientation="vertical" >

                <TextView
                    android:id="@+id/button6"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="Description" />
            </LinearLayout>

            <LinearLayout
                android:id="@+id/linearLayout13"
                android:layout_width="fill_parent"
                android:layout_height="60dip"
                android:layout_alignParentRight="true"
                android:layout_marginTop="5dip"
                android:background="#c0c0c0"
                android:orientation="vertical" >

                <TextView
                    android:id="@+id/product_description"
                    android:layout_width="fill_parent"
                    android:layout_height="400dp"
                    android:text="Button" />
            </LinearLayout>
        </RelativeLayout>
    </LinearLayout>
</RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:19:46.697

如果你正在制作这样的网格，我更喜欢[`GridLayout`](http://developer.android.com/reference/android/widget/GridLayout.html)

您可以在`GridLayout`使用[`Spec`](http://developer.android.com/reference/android/widget/GridLayout.Spec.html)`LayoutParam`

# asp.net-mvc - 如何向@Html.DropDownListFor 添加静态元素

> ID：12747797
> 
> 赞同：0
> 
> 时间：2012-10-05T13:53:14.433
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我使用此代码在我的视图中显示一个下拉菜单列表，我想在列表的开头添加一个 STATIC 值，其中文本为无，值为“”。如何在 Razor 中进行操作？

```
 @Html.DropDownListFor(modal => modal.Candidates, new SelectList(Model.Candidates, "Value", "Key")) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:57:43.873

有一个`DropDownListFor`使用[默认字符串](http://msdn.microsoft.com/en-us/library/ee703561%28v=vs.108%29.aspx)的重载，例如

```
 @Html.DropDownListFor(modal => modal.Candidates, 
                       new SelectList(Model.Candidates, "Value", "Key"), 
                       "None") 
```

# spring-mvc - 如何访问 web.xml 文件中的属性值？

> ID：12747801
> 
> 赞同：0
> 
> 时间：2012-10-05T13:53:29.113
> 
> 标签：spring-mvc, struts2, web, web.xml

我知道我们无法访问 web.xml 中的属性，但是否可以解决此问题。我只需要访问 web.xml 文件中 env 的值。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:34:57.553

为什么？如果 S2 需要访问 web.xml 中的某些内容，那么它很可能一开始就不应该存在。

无论如何，实施[`ServletContextAware`](http://struts.apache.org/2.x/struts2-core/apidocs/org/apache/struts2/util/ServletContextAware.html)以访问[`ServletContext`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getInitParameter%28java.lang.String%29).

我更愿意看到这些东西作为常量保存在 S2 配置文件中并注入，或者在其他一些非 servlet 特定的配置机制中。这也使操作更容易测试，尽管我想你总是可以模拟 servlet 上下文。

# javascript - 如何在 Windows 桌面的 Web 应用程序中开发 iOS 手势事件？

> ID：12747804
> 
> 赞同：1
> 
> 时间：2012-10-05T13:53:36.663
> 
> 标签：javascript, ios, windows, multi-touch

我正在开发一个 Web 应用程序，它应该响应 iPad 中的手势事件（捏合和拉出应该在我的 Web 应用程序中执行一些自定义放大和缩小）。我没有Mac，那么Windows中是否有一个模拟器会以某种方式生成这些事件，所以我可以针对它进行开发？

# ruby-on-rails - 通过连接选择不同的

> ID：12747811
> 
> 赞同：0
> 
> 时间：2012-10-05T13:54:01.687
> 
> 标签：ruby-on-rails, ruby, postgresql

我们有 2 个表：用户和状态

状态表有一个user_id、status 和occured_on。状态为“已删除”或“已添加”，并且occured_on 是删除或添加用户的日期。

我需要当前添加的用户。即，最新状态记录被“添加”的所有（不同的）用户。

我正在使用 Rails，并尝试过：

```
User
  .joins(:statuses)
  .where('statuses.status = ?', 'added')
  .order('statuses.occured_on DESC')
  .uniq 
```

转换为 SQL：

```
SELECT DISTINCT users.* 
FROM users
INNER JOIN statuses
ON statuses.user_id = users.id 
WHERE statuses.status = 'added' 
ORDER BY statuses.occured_on DESC 
```

这给了我错误：

```
PG::Error: ERROR:  for SELECT DISTINCT, ORDER BY expressions must appear in select list
   LINE 1: ...statuses.status = 'added') ORDER BY statuses.oc... 
```

我很高兴知道可以工作的 Rails 代码或直接的 SQL。

另外，如果可能的话，我不喜欢子选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:33:39.720

考虑以下数据库架构更改：

状态表：

```
StatusId
Status
UserId
ActiveFrom
ActiveTo 
```

之后，您可以添加其他检查，例如：

```
CONSTRAINT chk_from_to CHECK (ActiveFrom <= ActiveTo) 
```

然后您的查询将类似于：

```
 SELECT users.*
   FROM users 
   JOIN statuses ON UserId = users.user_id AND ActiveFrom < CURRENT_TIMESTAMP AND ActiveTo > CURRENT_TIMESTAMP
   WHERE statuses.Status = 'active' 
```

使用这种结构，您可能需要更改更改状态的方式，但根据我自己的经验，这种结构更加灵活，并且更易于查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:00:19.917

```
SELECT * FROM users INNER JOIN statuses ON users.id=statuses.user_id WHERE statuses.status='added' ORDER BY statuses.occured_on 
```

澄清后，我认为该架构不适合您的目标。您能否阐明为什么您希望该表中包含状态更改历史记录？我对此的一般做法是，应该将活动用户包含在一个名为 projects_users 的表中，其中包含 project_id、user_id。当它们被“删除”时，它们应该从该表中删除。操作日志（在项目中添加和删除用户）应存储在单独的表中。

鉴于您当前的设计，我不知道编写此查询的好方法。即使您修复了错误，这也会在 MySQL 中运行无错误（这正是您所拥有的）

```
SELECT DISTINCT `users`.* FROM `users`
INNER JOIN `projects_users`
ON `users`.`id`=`projects_users`.`user_id`
WHERE `status`='added'
ORDER BY `projects_users`.`occured_on` DESC 
```

它仍然无法为您提供正确的结果。ORDER BY 子句只会让您获得对“添加”的最新更改，它不能保证没有更新的“删除”操作。为此，您需要将每个最近添加的记录的日期与最近删除的记录的日期进行比较，对于每个用户来说，这是一场噩梦。

# html - css id 不适用于内部元素

> ID：12747817
> 
> 赞同：1
> 
> 时间：2012-10-05T13:54:14.900
> 
> 标签：html, css

我的CSS代码：

```
#header
{
width:900px;
border:dashed 1px;
margin:5px;
padding:2px;
}
#header .fl_left
{
float:left;
display:block;
width:260px;
}
#header .fl_left h1
{
float:left;
background-color:#666633;
color:#0033CC;
font-family:Verdana, Arial, Helvetica, sans-serif;
font-style:oblique;
} 
```

我的html代码：

```
<body>
<div id="header"><div class="fl_left"> <h1>hello all</h1> </div></div>
</body>
</html> 
```

我得到了外部标题的输出“hello all”。我的意图是将 h1 元素文本放在标题中。

为什么标题 id 规则不适用于我的 h1 元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:58:53.007

您需要添加`overflow: hidden;`到您的`#header`样式声明。

另外，考虑到它的父元素已经浮动，是否`<h1>`真的需要向左浮动？`.fl_left`如果是这样，那么`.fl_left`也需要`overflow: hidden;`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:58:45.913

选择`#header`器仅适用于标题元素本身，而不适用于其子元素，并且样式中没有任何内容可以被子元素继承。

文本最终出现在标题之外的原因是标题只包含不占用空间的浮动元素，因此它们不会影响标题的高度。

您可以添加`overflow: hidden`到标题以使其包含其子项：

```
#header {
    width:900px;
    border:dashed 1px;
    margin:5px;
    padding:2px;
    overflow: hidden; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T14:00:05.677

你`float`在你的`h1`标签中使用它来解除你的文本的绑定`h1`。如果有必要使用`float`，请使用[`:after`](https://developer.mozilla.org/en-US/docs/CSS/%3a%3aafter)选择器。

将此代码添加到您的 CSS 文件中（在添加之前通过上面的链接）

```
#header .fl_left h1
{
  content:".";
  visibility:hidden;
  clear:both;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T14:02:20.160

删除`fl_left`div 和 class，然后`float: left`从 h1 移动到 div`#header`

HTML：

```
<div id="header"><h1>hello all</h1></div> 
```

CSS：

```
#header
{
float: left;
width:900px;
border:dashed 1px;
margin:5px;
padding:2px;
}
#header h1
{
background-color:#666633;
color:#0033CC;
font-family:Verdana, Arial, Helvetica, sans-serif;
font-style:oblique;
} 
```

结果：[jsFiddle](http://jsfiddle.net/CPQzD/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T14:08:38.237

我建议如下：

CSS：

```
#header{width:900px; border:dashed 1px; margin:5px; padding:2px;}
#headerTitle{float:left; background-color:#666633; width:260px; }
#headerTitle h1{color:#0033CC; font-family:Verdana, Arial, Helvetica, sans-serif; font-style:oblique;} 
```

HTML：

```
<div id="header">
    <div id="headerTitle>
        <h1>hello all</h1>
    </div>
</div> 
```

这将产生最干净的代码。你有一个标题 div，标题 div 浮动在这个标题 div 中。这样，您仍然可以在右侧的标题 div 中添加其他内容（确保之后清除），如果需要，您可以在 headerTitle 框中添加内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-05T14:35:05.037

这就是我所做的： -

*   标题及其父 div 向左浮动，浮动 div 就足够了
*   浮动元素不占用空间，这就是为什么标题文本出现在带有边框的 div 之外的原因
*   此外，修复了拼写错误并改进了格式

要查看此操作，请参阅此[JSFiddle](http://jsfiddle.net/YatharthROCK/6HHsX/)。

# HTML 代码

> **资料来源：** [A List Apart 的文章](http://www.alistapart.com/articles/practicalcss/)

```
<div id="header">
    <div class="spacer">
        &nbsp;
    </div>

    <div id="header-title">
        <h1>hello all</h1>
    </div>

    <div class="spacer">
        &nbsp;
    </div>
</div> 
```

我们添加`nbsp;`所以间隔 div 不为空。

# CSS 代码

> **文档：** [W3Schools CSS 参考](http://www.w3schools.com/cssref/pr_class_clear.asp)

```
#header {
    width:900px;
    margin:5px;
    padding:2px;

    border:dashed 1px; }

#header #header-title {
    float:left;
    display:block;
    width:260px; }

#header #header-title h1 {
    float:left;

    background-color:#666633;
    color:#0033CC;

    font-family:Verdana, Arial, Helvetica, sans-serif;
    font-style:oblique; }

#header .spacer {
    clear: both; }​ 
```

该`clear: both;`样式导致没有浮动项目出现在任何一侧，因此它们*围绕*标题出现，而不是仅仅在它们下方。

# java - 如何从struts2运行一个线程

> ID：12747818
> 
> 赞同：-1
> 
> 时间：2012-10-05T13:54:16.397
> 
> 标签：java, multithreading, jsp, servlets, struts2

我正在开发一个 sturts2 web 应用程序，我有一个带有用户名和密码字段的登录页面。一旦用户提交带有值的表单，我正在验证登录，如果用户提供有效的用户名和密码，它将被重定向到主页。在重定向主页时，**我必须调用一个线程，在该线程中我在会话中设置一些数据以供将来使用**。这该怎么做 ？

我所做的是

```
import com.opensymphony.xwork2.ActionContext;

if( loginSuccess(userInfo) ) {
    initializeDatas(); // calling thread after userInfo bean validated
    // redirecting to home page
    return HOME_PAGE;
} 
```

我添加了一个实现可运行的新类。

```
class intilalizer implements Runnable {
    @Override
    public void run() {
        try {
            System.out.println("Started to set values ");
            List<String> iphoneSdks = new ArrayList<String>();
            List<String> iphoneOSSdks = IosSdkUtil.getMacSdks(MacSdkType.iphoneos);
            List<String> simSdks = IosSdkUtil.getMacSdks(MacSdkType.iphonesimulator);
            List<String> macSdks = IosSdkUtil.getMacSdks(MacSdkType.macosx);
            iphoneSdks.addAll(iphoneOSSdks);
            iphoneSdks.addAll(simSdks);
            iphoneSdks.addAll(macSdks);

            ActionContext context = ActionContext.getContext();
            System.out.println("context ===> " + context); // here i am getting null value
            String httpRequest = ServletActionContext.HTTP_REQUEST;
            System.out.println("httpRequest =====> " + httpRequest);
            Object object = context.get(httpRequest);
            System.out.println(object);
            HttpServletRequest req = (HttpServletRequest) object;

            req.setAttribute(REQ_IPHONE_SDKS, iphoneSdks);
            req.setAttribute(REQ_IPHONE_SIMULATOR_SDKS, simSdks);
            System.out.println("Value initialized@@@@");
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

我正进入（状态

```
java.lang.NullPointerException
    at com.photon.phresco.framework.actions.intilalizer.run(Login.java:286)
    at java.lang.Thread.run(Thread.java:680) 
```

我在线收到此错误。

```
ActionContext context = ActionContext.getContext();
System.out.println("context ===> " + context); // here i am getting null value 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:44:26.443

来自 Struts 2 JavaDoc

> ActionContext 是线程本地的，这意味着存储在 ActionContext 中的值对于每个线程都是唯一的

您只需创建一个新线程，因此您的 ThreadLocal 变量在那里不可用。你应该这样做：

```
import com.opensymphony.xwork2.ActionContext;

if( loginSuccess(userInfo) ) {
   ActionContext context = ActionContext.getContext(); 
   initializeDatas(context); // calling thread after userInfo bean validated
   // redirecting to home page
   return HOME_PAGE;
} 
```

最好的方法是将上下文传递给 Thread 构造函数。但我不确定上下文是线程安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:31:39.670

我只是想知道为什么你需要启动一个新线程来放入一些数据`session`

（你说你想做的事情，但你实际上并没有在发布的代码中做，而是把东西放进去`request`）。

您可以简单地从您的操作中**[实现 SessionAware 接口。](http://struts.apache.org/2.3.4/struts2-core/apidocs/org/apache/struts2/interceptor/SessionAware.html)**

> 想要访问用户的 HTTP 会话属性的操作应该实现这个接口。
> 
> 这将使他们能够访问 Map ，他们可以在其中放置可供后续请求使用的对象。
> 
> 典型用途可能是缓存的用户数据，例如姓名或购物车。

这不是强制性的，但**[它是从 Actions 中访问会话的最佳实践](http://struts.apache.org/2.0.14/docs/how-do-we-get-access-to-the-session.html)**，而不是询问 ActionContext：

> 您可以通过询问 ActionContext 或实现 SessionAware 来获取会话属性。**实施 SessionAware 是首选**。

如果需要，这里有一个小例子：[http ://www.splinter.com.au/how-to-use-sessions-with-struts-2/](http://www.splinter.com.au/how-to-use-sessions-with-struts-2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T14:05:32.977

```
if( loginSuccess(userInfo) ) {
    // redirecting to home page
    return HOME_PAGE;
    initializeDatas(); // calling thread after userInfo bean validated
} 
```

那是行不通的。该方法将在返回调用后结束。尝试首先调用创建新线程的方法。

```
if( loginSuccess(userInfo) ) {
    // redirecting to home page
    initializeDatas(); // calling thread after userInfo bean validated
    return HOME_PAGE;

} 
```

# c - 由于头文件导致很多错误

> ID：12747820
> 
> 赞同：0
> 
> 时间：2012-10-05T13:54:26.740
> 
> 标签：c

我的代码中出现这些错误。我确信这些只是因为某个错误，但我找不到它。请帮我！

```
2010\projects\firstnamelastname\firstnamelastname\testing.cpp(15): error C2065: 'node' : undeclared identifier
1>c:\users\omer\documents\visual studio 2010\projects\firstnamelastname\firstnamelastname\testing.cpp(15): error C2065: 'linked_list2' : undeclared identifier
1>c:\users\omer\documents\visual studio 2010\projects\firstnamelastname\firstnamelastname\testing.cpp(26): error C2065: 'linked_list2' : undeclared identifier
1>c:\users\omer\documents\visual studio 2010\projects\firstnamelastname\firstnamelastname\testing.cpp(29): error C2065: 'linked_list2' : undeclared identifier
1>c:\users\omer\documents\visual studio 2010\projects\firstnamelastname\firstnamelastname\testing.cpp(29): error C3861: 'createQueue': identifier not found
1>c:\users\omer\documents\visual studio 2010\projects\firstnamelastname\firstnamelastname\testing.cpp(35): error C2065: 'linked_list2' : undeclared identifier
1>c:\users\omer\documents\visual studio 2010\projects\firstnamelastname\firstnamelastname\testing.cpp(38): error C2065: 'linked_list2' : undeclared identifier
1>c:\users\omer\documents\visual studio 2010\projects\firstnamelastname\firstnamelastname\testing.cpp(38): error C3861: 'addFront': identifier not found
1>c:\users\omer\documents\visual studio 2010\projects\firstnamelastname\firstnamelastname\testing.cpp(45): error C2065: 'linked_list2' : undeclared identifier
1>c:\users\omer\documents\visual studio 2010\projects\firstnamelastname\firstnamelastname\testing.cpp(45): error C2065: 'linked_list2' : undeclared identifier
1>c:\users\omer\documents\visual studio 2010\projects\firstnamelastname\firstnamelastname\testing.cpp(45): error C3861: 'dQueue': identifier not found
1>c:\users\omer\documents\visual studio 2010\projects\firstnamelastname\firstnamelastname\testing.cpp(48): error C2065: 'linked_list2' : undeclared identifier
1>c:\users\omer\documents\visual studio 2010\projects\firstnamelastname\firstnamelastname\testing.cpp(48): error C3861: 'destroyList': identifier not found
1>c:\users\omer\documents\visual studio 2010\projects\firstnamelastname\firstnamelastname\testing.cpp(52): error C2065: 'linked_list2' : undeclared identifier
1>c:\users\omer\documents\visual studio 2010\projects\firstnamelastname\firstnamelastname\testing.cpp(52): error C3861: 'printList': identifier not found 
```

以下是三个文件 文件 1 >> testing.cpp

```
//#include<stdio.h>
#include<stdlib.h>
#include "queue.h"
#include "linklist.h"
#include"stdafx.h"

int main(void)
{   
    int x,n;
    int number;
    int i;

    node *linked_list2= NULL;

        while (1) 
        {           
            printf("1.)To create Queue\n2.)To nQueue\n3.)To dQueue\n4.)To Destroy Queue\n5.)To Print The Queue\n6.)Exit Program\nPrint Your Choice: ");
            scanf("%d",&n);

            switch (n) /*Switch statement for testing of different functions*/
            {
                case 1:
                    if(linked_list2 == NULL){
                        printf("Enter Value Please\n");
                        scanf("%d",&number);
                        linked_list2=createQueue(number);
                    }
                    else
                        printf("Queue already created\n.");
                break;
                case 2:
                    if(linked_list2 != NULL){
                        printf("Give a no. to add: ");
                        scanf("%d",&number);
                        addFront(linked_list2,number);
                    }
                    else
                        printf("Create Link List First\n.");

                break;
                case 3:
                    linked_list2=dQueue(linked_list2);
                break;
                case 4:
                    destroyList(linked_list2);
                printf("List is Empty!! So Exiting Program! Bye!!\n");   /*Exits program after the list is emptied*/
                break;
                case 5:
                printList(linked_list2);
                break;
                case 6:
                printf("Exiting Program");
                return 0;
                break;
                default:
                printf("Wrong Input!!! Please Input Again: ");        /*asks to input the choice again if its incorrect*/
                scanf("%d",&n);

            }
        }

    return 0;
} 
```

文件 2 >> queue.h

```
#include"linklist.h"

node * dQueue(node *num)   /*Deletes the value of the node from the front*/
{
    //num = num->next;  
    return (num->next);
}

void nQueue (node *head, int num ) /*Adds node to the front of Linked-List*/
{
    addFront(head,num);
}

node* createQueue(int val){

    return createList(val);
} 
```

文件 3 >> 链接列表.h

```
struct node{
    node * next;
    int nodeValue;
};

node* initNode(int number);
node* createList (int value);
void addFront (node *head, int num );
void deleteFront(node*num);
void destroyList(node *list);
int getValue(node *list);
void printList(node *list); 
```

我在`linklist.cpp`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T14:03:36.403

在 C 中，声明`struct foo`不会引入名为`foo`.

你需要：

*   `struct node`不管你说什么`node`，
*   或添加`typedef struct node node`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:08:17.103

使用 typedef struct 而不仅仅是 struct ：

```
typedef struct _node{
  node * next;
  int nodeValue;
}node; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T14:05:18.930

```
typedef struct _node{
    struct _node * next;
    int nodeValue;
} node; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T14:05:25.517

```
error C2065: 'node' : undeclared identifier 
```

正如它所说：标识符未声明。与 C++ 不同，C 对`struct`s 和其他东西有单独的命名空间，所以使用

```
struct node * dQueue(node *num) 
```

反而。

这是对的。您应该查看它的定义位置或它应该做什么。

```
'linked_list2' : undeclared identifier
error C3861: 'createQueue': identifier not found
error C3861: 'addFront': identifier not found
error C3861: 'dQueue': identifier not found
error C3861: 'destroyList': identifier not found
error C3861: 'printList': identifier not found 
```

这些都是由于缺乏定义造成的。修复第一个，这些错误也将消失。

# sql - 如何在 TOAD 的 DataGrid 中显示 sys_refcursor 数据

> ID：12747823
> 
> 赞同：10
> 
> 时间：2012-10-05T13:54:40.327
> 
> 标签：sql, plsql, oracle11g, toad, sys-refcursor

请我需要帮助。（我搜索了很多，变得更加困惑。）

我使用 Toad 9.7.25，我做了这个程序（在一个包中）

```
PROCEDURE ReportaCC(pfcorte IN DATE, lcursor  IN OUT  SYS_REFCURSOR)
IS
BEGIN
    OPEN lcursor FOR
        select c1, c3, c3 from table1 where hdate = pfcorte;
    close lcursor;
END; 
```

* * *

在 toad 的 sql 编辑器中，我想执行该过程并在 toad 的数据网格中显示光标结果：

* * *

```
--- I WANT THIS CODE CAN EXECUTE IN TOAD'S SQL EDITOR.

    DECLARE 
      PFCORTE DATE;
      LCURSOR SYS_REFCURSOR;
    BEGIN 

        PFCORTE := '31/08/2012';
        -- LCURSOR := NULL;  -- Modify the code to initialize this parameter

        mypaq.REPORTACC( TO_DATE(PFCORTE,'DD/MM/YYYY') , LCURSOR );

        :to_grid := LCURSOR;

        COMMIT;

    END; 
```

* * *

当我执行脚本 (F9) 并设置变量 :to_grid 类型光标时，我得到下一个错误：

“ORA-24338: 语句句柄未执行”

可能是什么问题

提前致谢。

* * *

感谢您的四篇帖子……效果很好！

但是现在有另一个问题...如果我将简单查询（从表中选择 c1、c2、c3...）替换为这样的 mor 复杂：

```
 PROCEDURE ReportaCC(pfcorte IN DATE,  lcursor OUT SYS_REFCURSOR)
    IS           
    BEGIN

        OPEN lcursor FOR

            SELECT ENC.CVEOTORGANTE, ENC.NOMBREOTORGANTE, ENC.IDENDINTIFICADORDEMEDIO, TO_CHAR(SYSDATE, 'YYYYMMDD') AS FECHAEXT, ENC.NOTAOTORGANTE, 
                   CIRCRED.valida_cc.QUITASIGNOS(VCL.APELLIDOPATERNO) AS VAL_APELLIDOPATERNO, 
                   CIRCRED.valida_cc.QUITASIGNOS(VCL.APELLIDOMATERNO) AS VAL_APMATERNO, 
                   CIRCRED.valida_cc.QUITASIGNOS(VCL.APELLIDOADICIONAL) AS APELLIDOADICIONAL , 
                   CIRCRED.valida_cc.QUITASIGNOS(VCL.NOMBRES) AS NOMBRES, 
                   VCL.FECHANACIMIENTO, 
                   circred.valida_cc.valida_rfc(Vcl.rfc,'CORRIGE') AS VALRFC,  
                   circred.valida_cc.valida_curp(VCL.CURP,'CORRIGE') AS VALCURP, VCL.NACIONALIDAD,
                   circred.valida_cc.valida_RESIDENCIA('ESIACOM', SC.TIPOVIV ) AS VAL_RESIDENCIA, VCL.NUMEROLICENCIACONDUCIR, 
                   circred.valida_cc.valida_EDOCIVIL('ESIACOM', VCL.ESTADOCIVIL) AS VAL_ESTADOCIVIL, VCL.SEXO, 
                   circred.valida_cc.valida_IFE(VCL.CLAVEELECTORIFE,'CORRIGE') AS CLAVEELECTORIFE, 
                   VCL.NUMERODEPENDIENTES,
                   VCL.FECHADEFUNCION, VCL.INDICADORDEFUNCION, VCL.TIPOPERSONA,
                   CIRCRED.valida_cc.QUITASIGNOS(VCL.DIRECCION) AS DIRECCION, 
                   CIRCRED.valida_cc.QUITASIGNOS(VCL.COLONIAPOBLACION) AS COLONIAPOBLACION, 
                   CIRCRED.valida_cc.QUITASIGNOS(VCL.DELEGACIONMUNICIPIO) AS DELEGACIONMUNICIPIO, 
                   CIRCRED.valida_cc.QUITASIGNOS(VCL.CIUDAD) AS CIUDAD, 
                   VCL.ESTADO, circred.valida_cc.valida_cp(VCL.CP, VCL.CDGEF) AS VAL_CP, VCL.FECHARESIDENCIA,
                   circred.valida_cc.valida_TEL(VCL.NUMEROTELEFONO,'CORRIGE') AS VAL_TEL, circred.valida_cc.valida_TIPODOMICILIO('ESIACOM', 'C') AS VAL_TIPODOMICILIO, VCL.TIPOASENTAMIENTO,    
                   EMP.*,
                   ENC.CVEOTORGANTE CVEACTUAL, ENC.NOMBREOTORGANTE, SAL.CUENTAACTUAL, SAL.TIPORESPONSABILIDAD, SAL.TIPOCUENTA, SAL.TIPOCONTRA, SAL.CLAVEUNIDADMONETARIA, SAL.VALORACTIVOVALUACION,
                   SAL.NUMPAGOS, SAL.FREQPAGOS,SAL.PAGOPACCL, SAL.FECHAAPERTURACUENTA, 
                   TO_CHAR(circred.valida_cc.FUN_FULTDEPCL(sal.CLNS, sal.CDGNS, sal.CDGNS, sal.CDGCL, sal.CICLO, SAL.INICICLO, SAL.FREQPAGOS, pfcorte ), 'YYYYMMDD') AS FULTPAGO,  
                   SAL.FECHAULTIMACOMPRA,  SAL.FECHACIERRECUENTA, SAL.FECHACORTE, SAL.GARANTIA, SAL.CREDITOMAXIMO,
                   SAL.SALDOCL, SAL.limitecredito, SAL.SDOVENCL, SAL.NUMPAGVEN, SAL.pagoactual,  SAL.HISTORICOPAG, SAL.CLAVEPREVENCION, SAL.TOTPAGREP, SAL.CLAVEANTERIOROTORGANTE, 
                   SAL.NOMBREANTERIOROTORGANTE, SAL.NUMEROCUENTAANTERIOR,
                   SAL.SUMSALDO, SAL.sumsdoven, SAL.numcred, SAL.numdirecc, SAL.numempleo, SAL.numctas, ENC.NOMBREOTORGANTE, NULL AS DOMDEVOL       
            FROM
                CIRCRED.VW_ENCABEZADO ENC,
                circred.VW_DATOSPERDOM  VCL,
                ICARO.VW_PROYINVE  SC,
                CIRCRED.EMPLEO  EMP,
                CIRCRED.VW_SALDOINCOB    SAL
            WHERE SAL.FUENTEBD = 'ESIACOM' 
                AND SAL.CDGCL = VCL.CDGCL  
                AND SAL.CDGCL = SC.CDGCL(+) AND SAL.CICLO = SC.CICLO(+) and SAL.INICICLO = SC.INICIO(+)
                AND SAL.FCORTE = pfcorte
                AND SAL.STATUSCC IN ('INCOB', 'CIERR', 'CEROS')  ;                       

    END ReportaCC; 
```

* * *

为什么不能显示结果？
（如果我直接在 TOAD SQL 编辑器中执行查询，则查询工作正常）

再次感谢....！！！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-05T16:29:22.560

点击`F9`“变量”对话框后，从下拉列表中选择 Type=Cursor，然后按 OK：

![选择类型=光标](../Images/843dfa9e7493ae9ca116201730f1f62f.png)

您收到“ORA-24338：未执行语句句柄”错误的原因是您在访问游标之前关闭了游标。

这是正在发生的过程：

1.  执行程序
2.  OPEN 语句返回指向内存中结果集的指针（但不返回任何数据）
3.  CLOSE 语句在结果被访问之前丢弃它们
4.  过程调用结束
5.  客户端调用者（在本例中为 TOAD）尝试访问结果流，但指针无效，因此无法读取任何内容并抛出错误

解决方案：删除该`close lcursor;`语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T15:37:16.993

由于您的过程只执行一个选择语句，因此最好使用类似的函数

```
CREATE or REPLACE function ReportaCC(pfcorte IN DATE) 
RETURN SYS_REFCURSOR
AS
   lcursor   SYS_REFCURSOR;
BEGIN
   OPEN lcursor FOR
     select c1, c3, c3 from table1 where hdate = pfcorte;
   RETURN lcursor ;
END;
/ 
```

不要在此处关闭 lcursor ，从您的调用语句中关闭，因为如果您关闭 lcursor 那么您将看不到任何结果。

并执行为

```
select ReportaCC(<>) from dual 
```

在 toad 中，双击数据网格中的光标以查看结果。

# java - 方法调用的最佳实践？

> ID：12747824
> 
> 赞同：-1
> 
> 时间：2012-10-05T13:54:44.073
> 
> 标签：java

只是想知道调用方法的最佳实践是什么（在这种情况下，特别是在 java 中）

如果我有 6 个必须调用的函数，并且在逻辑上非常不同：

那么，说...

```
private void step1() { .. }
private void step2() { .. }
private void step3() { .. }
private void step4() { .. } 
```

在我的主要方法中按顺序调用它们对我来说更好吗

```
step1();
step2();
step3();
step4(); 
```

或者如果在 step1 函数结束时我调用 step2 会更好吗？IE

```
private void step1() { 
    ..
    ..
    step2();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T13:57:15.477

不要想太多。

第一个选项更清晰、可读和不言自明。

```
step1();
step2();
step3();
step4(); 
```

或者

```
try{
    step1();
    step2();
    step3();
    step4();
} catch (StepException e) {
   // process failed
   ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:06:30.320

如果`step1`和`step2`在逻辑上不同，这几乎意味着它们可以用于不同的输入。现在有一个经验法则，您可以使用它来减少步骤，并以更好的方式完成您的工作。

首先，您应该检查您的方法在执行不同操作的方式上是否不同，而不是针对完全相同的参数，并且您可能会发现自己或其他人使用它们进行编码，几乎`stepN`没有以前的方法或至少没有全部其中。如果是这样，那么将它们全部保持原样并按顺序调用它们就可以了。

如果不是，则重构您的代码，以便`stepN1`始终`stepN2`一个接一个地调用它，`stepN`并且您将获得一个逻辑上不同的自包含方法。如果您总是一遍又一遍地使用完全相同的参数调用方法，而不需要它们单独存在，那么将其设为一种方法，合并始终运行在一个片段中的代码。

如果你`step2`在代码中绑定，`step1`这意味着`step1`几乎只能在运行第二步的上下文中使用，这意味着它在某种意义上失去了其逻辑上不同的功能，这意味着你应该在这种情况下真正合并两者或使用第一种方式。因此，如果适用于您的情况，通常坚持第一种方式并以建议的方式改进您的编码！例外情况`step1`是仅在其中完整使用`step2`，但确实`step2`具有独特的功能，并且可以在您的程序中用于其他目的。然后你可以使用第二种方式。

请记住，它不仅是方式 1 或方式 2，您仍然可以混合它们以适应您的任务。我相信性能不是问题（如果我错了，有人愿意纠正我吗？）！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T13:58:08.953

您的问题没有足够的上下文信息。

我一般要说的是：**最好使用调用其部分的主要方法。因为它反映了一般流程的构建方式。**

但也有例外。无论如何，这些异常可以通过其他方式构建（例如：step1 代码返回一个由主代码解析的代码，然后调用 step2）。这种方式堆栈不收取无用的中间调用。并且语义得到更好的保留。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T14:00:05.583

这取决于他们是否相互依赖。如果 step2 依赖于 step1 那么你应该使用

```
private void step1() { 
   ..
   ..
   step2();
} 
```

这消除了调用者必须对方法拥有的任何隐含知识（尤其是如果它们是公共的）

如果他们不相互依赖，那么您的第一个选择会更简单。

（我很想知道更多关于这种情况的信息，因为这对我来说有点臭）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T14:04:34.693

如果它们在逻辑上不同，则 step1() 不应调用 step2()。

只需拨打4个电话。

# network-programming - 即时修改 HTTP url

> ID：12747827
> 
> 赞同：2
> 
> 时间：2012-10-05T13:54:54.200
> 
> 标签：network-programming, packet-injection

是否可以将用户的 HTTP 请求修改为

```
www.example.com/options 
```

代替

```
www.example.com/options_and_params 
```

我的场景是大约 30000 个用户连接到我公司的网络骨干网，我想在骨干网交换机和 Radware LoadProof 之间添加一个或多个服务器（使用我目前正在处理的代码）来完成这项工作。

谷歌搜索了一夜之后，我没有线索，但还有一些问题：

1.  我不需要通过网络拦截每个数据包。借助 iptables 之类的帮助，我可以过滤掉我想要的包。我在使用 iptables 之前已经完成了。但是，数据包不等于 HTTP 流。我需要重新构建 HTTP 吗？
2.  如果我成功找到修改 HTTP 请求 URL 内容的方法，我仍然应该将其放回网络流。据我所知，TCP 数据包有一个校验和，在我修改内容后它一定是错误的。如何计算新的校验和并将数据包放回网络？

这是我第一次做网络编程或数据包处理开发。任何建议都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:25:21.217

这取决于您执行的是 HTTP/1.0 还是 HTTP/1.1，以及它是您需要修改的初始请求还是单个 HTTP 1.1 会话中的所有请求。

如果您有数据包并且可以在发送之前对其进行修改，并且您尝试仅修改请求，那么给出典型数据包的长度和 HTTP 请求流中 URL 的位置（非常接近开头）和事实上，它将是 TCP 流中发送的第一件事，我认为您可以*相当*安全地假设它将出现在发送的第一个数据包的前 N ​​个字节中，因此不会被拆分为多个数据包。

但是，如果这是一个 HTTP/1.1 流，那么多个请求将通过同一个 TCP 连接发送，在这种情况下，在未来的请求中，URL 很可能会被拆分为两个 TCP 数据包。

如果您可以强制使用 HTTP/1.0，或者如果您将初始或所有请求修改为 HTTP/1.0，那么您可以非常确定第一个数据包将对应于 TCP 流的第一个数据包，并且您不太可能请参阅 URL 拆分为多个数据包，这意味着无需重建并且可以仅进行替换。

然而，这将以相当低效的新 TCP 连接为代价。

如果您不这样做并且将其保留为 HTTP/1.1，那么 URL 可能位于任何未来请求中的任何随机点，因此拆分为多个 TCP 数据包（实际上是两个给定 URL 的大小）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T22:15:51.193

如果我的问题是正确的，那么这可能可以通过像 nginx 这样的快速反向代理来完成。

# .net - 如何使用 DynamoDBContext 批处理结果

> ID：12747829
> 
> 赞同：2
> 
> 时间：2012-10-05T13:55:04.323
> 
> 标签：.net, amazon-web-services, amazon-dynamodb

我正在使用 DynamoDB .NET 对象持久性模型来扫描具有以下条件的表。

```
public IEnumerable<Product> GetProducts(string attribute1Value, string attribute2Value
{
    IEnumerable<Product> products = null;
    try
    {
        RegionEndpoint region = RegionEndpoint.GetBySystemName("us-east-1");
        AmazonDynamoDB client = new AmazonDynamoDBClient(account.AwsAccessKey, account.AwsSecretKey, region);

        DynamoDBContext context = new DynamoDBContext(client);
        products = context.Scan<Product>(
            new ScanCondition("attribute1", ScanOperator.Equal, attribute1Value),
            new ScanCondition("attribute2", ScanOperator.Equal, attribute2Value));

    }
    catch (AmazonServiceException ase)
    {
        log.Error("Amazon Service Exception, Message: " + ase.Message + ", request id: " + ase.RequestId);
    }
    catch (Exception e)
    {
        log.Error("Exception: " + e.Message);
    }
    return products;
} 
```

当我使用 DynamoDBContext 时，如果超过 DynamoDB 设置的 1 MB 限制，我该如何处理输出？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T19:09:28.443

如果您达到 1MB 的限制，DynamoDB 将返回多页项目。DynamoDBContext.Scan 操作将自动分页您的结果集（延迟加载）。因此，从您的角度来看，不需要做任何额外的事情，只需枚举 IEnumerable 对象，所有匹配的项目都将被返回。

# android - 在指定目录上创建一个 sqlite db

> ID：12747837
> 
> 赞同：0
> 
> 时间：2012-10-05T13:55:21.483
> 
> 标签：android, sqlite

无论android版本是什么，sqlite db的保存路径总是相同的（/data/data/pack.name/databases/nameDb）？如果没有，有没有办法将整个数据库保存在不同的位置？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:02:27.403

是的，您可以选择在哪里创建数据库，查看[openOrCreate](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#openOrCreateDatabase%28java.lang.String,%20android.database.sqlite.SQLiteDatabase.CursorFactory%29)方法。您可以将路径传递给此方法

但是，当您在`/data/data/pack.name/databases/`Android 系统中的数据库自己处理安全问题并且您的数据库仅对您的应用程序可见时。如果要将数据库存储在 sdcard 或任何其他地方，请小心。

# visual-studio-2012 - html 文件中的 Visual Studio 2012 Intellisense

> ID：12747838
> 
> 赞同：2
> 
> 时间：2012-10-05T13:55:27.163
> 
> 标签：visual-studio-2012, intellisense

我正在寻找一种在 VS2012 的 html 文件中使用 jquery IntelliSense 的方法。

我按照[这篇文章](http://blog.craigtp.co.uk/post/Javascript-jQuery-Intellisense-in-Visual-Studio-2012.aspx)在外部 js 库上设置 Intellisense。它适用于 .cshtml、.aspx、.js 文件，但不适用于 .html 文件。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:10:52.823

Try adding a link to the direct files rather than a references file. Add the jquery files to the same directory most of the other default files are in and add a reference in that location for the files.

[Intellisense doesn't work for JavaScript in Visual Studio 2012](https://stackoverflow.com/questions/11488208/intellisense-doesnt-work-for-js-in-vs2012/12628049#12628049)

Also make sure all your intellisense options are checked in general settings and in the javascript intellisense sections of tools - Options

# windows-phone-7 - 使用 Visual Studio 2012 (RTM,Premium) 为 Windows Phone 7（或 7.1）开发

> ID：12747840
> 
> 赞同：16
> 
> 时间：2012-10-05T13:55:41.653
> 
> 标签：windows-phone-7, windows-phone-7.1, visual-studio-2012, windows-phone

是否可以让 WindowsPhone 7.1.1 sdk 与 Visual Studio 2012 一起使用？

编辑：正如我的问题标题所述：我想知道是否可以使用 Visual Studio 2012 开发 windows phone 7.1.1 应用程序。

我已经尝试安装 SDK 和修补程序，但我仍然无法使用 VS2012 打开 Windows Phone 7.1 项目。因此，我的问题是：我错过了一些明显的东西还是根本不可能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T17:32:31.107

我们去 :) --> [Windows Phone SDK 8.0](http://www.microsoft.com/de-de/download/details.aspx?id=35471)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:15:15.170

我的 Windows 8 Release Preview 中有 Visual Studio 2012 RTM（用于 Windows 8 商店应用程序开发）和 Windows phone 7.1.1 SDK，它们工作正常。

和你一样，我也在等待 Windows Phone 8 SDK。（顺便说一句，没有 windows phone 7.8 sdk）

更新：此[Windows Phone 8.0 SDK 链接](http://dev.windowsphone.com/en-us/featured/windows-phone-8-sdk)指出“您可以安装 Windows Phone SDK 7.1（和 WPSDK 7.1.1 更新）并继续构建面向 Windows Phone 7.5 的应用程序和游戏。现有的 Windows Phone SDK 与Visual Studio 2012，您可以确信您今天编写的代码可以在 Windows Phone 8 设备上运行。”

# msbuild - TFS2010 Build 未部署 Web 应用程序

> ID：12747843
> 
> 赞同：4
> 
> 时间：2012-10-05T13:55:50.037
> 
> 标签：msbuild, visual-studio-2012

我试图让我的 Web 应用程序在自动构建结束时自动部署，但我显然遗漏了一些东西。

我的设置是：
*VS2012 在 Win7 工作站
TFS2010 存储库上 serverA
TFS 构建代理在 serverB
测试站点在 serverC 上的 IIS7。*

我使用默认的 MVC4 模板创建了一个快速测试项目，并使用 MS VS Scrum 1.0 模板创建了一个团队项目来配合它。

我使用发布 Web 对话框为 Web 应用程序创建了一个新的发布配置文件，并且 .pubxml 文件与项目一起签入。.pubxml 文件如下所示：

```
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <WebPublishMethod>MSDeploy</WebPublishMethod>
    <SiteUrlToLaunchAfterPublish>TestServer/DeployTest</SiteUrlToLaunchAfterPublish>
    <MSDeployServiceURL>http://TestServer</MSDeployServiceURL>
    <DeployIisAppPath>webapp-dev/DeployTest</DeployIisAppPath>
    <RemoteSitePhysicalPath />
    <SkipExtraFilesOnServer>False</SkipExtraFilesOnServer>
    <MSDeployPublishMethod>RemoteAgent</MSDeployPublishMethod>
    <UserName>mydomain\myuser</UserName>
    <_SavePWD>True</_SavePWD>
    <PublishDatabaseSettings>
      <Objects xmlns="" />
    </PublishDatabaseSettings>
  </PropertyGroup>
</Project> 
```

*为了保护无辜者，部分名称已更改 :)

使用此配置文件，我可以成功地将应用程序从 Visual Studio 发布到测试 Web 服务器，而不会出现任何问题。在[Scott Hanselman 的博客文章之后](http://www.hanselman.com/blog/TinyHappyFeatures3PublishingImprovementsChainedConfigTransformsAndDeployingASPNETAppsFromTheCommandLine.aspx)，我成功地从我的工作站上的命令行发布：

> msbuild DeployTest.csproj /p:DeployOnBuild=true /p:PublishProfile=Test /p:AllowUntrustedCertificate=true /p:Password=notTheRealPassword

然后我在 Team Explorer 中创建了一个构建，它将使用我的构建服务器来编译然后运行单元测试。都好。项目构建，单元测试通过。

然后，我将命令行中的参数添加到构建定义的 Advanced 部分的 MS Build Arguments 中：

> /p:DeployOnBuild=true /p:PublishProfile=Test /p:AllowUntrustedCertificate=true /p:Password=notTheRealPassword

构建运行，单元测试通过，没有任何内容发布到 Web 服务器。:(

有人可以告诉我我错过了什么吗？我读过的任何内容似乎都表明我错过了一个步骤，但似乎很少有宝贵的文档来解释这是如何完成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:59:55.220

听起来 tfs 可能不支持发布配置文件。

您可能需要从配置文件中提取所有参数并手动指定它们。

这是一个类似的问题。

[Team Build：使用 MSDeploy 在本地发布](https://stackoverflow.com/questions/4041836/team-build-publish-locally-using-msdeploy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T15:19:59.283

我知道这是一个老问题，但今天我遇到了同样的问题，我想我知道你观察到的行为的原因。让我总结一下这个问题：

1.  您已经创建了一个 Web 部署发布配置文件。
2.  当您通过 MSBuild 命令从命令提示符使用配置文件时，该站点已成功发布。
3.  但是，当您从构建定义中使用此配置文件时（通过在构建定义的高级部分中指定 MS 构建参数），该站点不会发布。

我认为这背后的原因是因为您的工作站上有 VS 2012，它支持使用配置文件功能发布。因此，当您在工作站上从命令提示符运行 MS 构建时，该站点就会发布。但是在 TFS 2010 上不支持发布配置文件，因此使用构建服务器不会发布站点。

我今天遇到了同样的问题，我做了以下来解决这个问题：

1.  在 TFS 机器上，从命令提示符下，我使用发布配置文件运行了 MS Build 命令。该命令成功运行，但站点上没有发布（复制）任何内容。这证明 TFS 2010 服务器不支持公共配置文件。
2.  我在 TFS 机器上部署了 VS 2010。我为 Visual Studio 2010 安装了 web deploy 3.5 和 Windows Azure SDK。这是为 VS 2010 上的发布配置文件提供支持的方式。
3.  然后我使用命令提示符下的已发布配置文件运行 MS Build 命令，并成功发布了站点。
4.  然后最后使用 MS Build 参数执行构建定义，站点成功发布。

我知道在 TFS 机器上安装 Visual Studio 不是一个理想的解决方案，但至少它解决了我的问题。我也不确定为什么安装带有发布配置文件支持的 VS 2010 解决了这个问题。但似乎在安装后，一些缺少的组件/dll 被部署在 TFS 机器上，从而解决了这个问题。希望这可以解决您的部署问题。

[更新]：上述行为可能还有另一个原因。检查构建活动的日志消息。如果您发现类似以下的警告：C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets (484, 9)：警告：未为项目 ProjectName.csproj 设置 OutputPath 属性。请检查以确保您为此项目指定了有效的配置和平台组合。配置='发布'平台='任何 CPU'

那么它可能与构建配置有关。如果您使用“Any CPU”作为构建配置，请将其更改为“AnyCPU”（删除空间）。详细解释请参考以下链接：

[http://social.msdn.microsoft.com/Forums/vstudio/en-US/0bb277ec-a08c-4795-88f0-3207654e2560/the-outputpath-property-is-not-set-for-project-xxxxxbtproj-please- check-to-make-sure-that-you?forum=tfsbuild](http://social.msdn.microsoft.com/Forums/vstudio/en-US/0bb277ec-a08c-4795-88f0-3207654e2560/the-outputpath-property-is-not-set-for-project-xxxxxbtproj-please-check-to-make-sure-that-you?forum=tfsbuild)

艾美

# sql - SQL - 即使项目的计数为零也返回所有行

> ID：12747855
> 
> 赞同：7
> 
> 时间：2012-10-05T13:56:31.797
> 
> 标签：sql, sql-server, tsql

我正在根据日期范围进行计数。目前，查询确实返回了正确的结果，但我需要更多信息。在当前形式中，查询显示具有正确计数的项目。但是，我需要显示所有项目，即使它们在指定日期范围内的计数为零。

这是SQL代码：

```
INSERT INTO @CreationCount (BaselineID, Name)

SELECT distinct [BaselineID],[Name] 
FROM [Baseline_INFO] 

DECLARE @ReqType TABLE (Type nvarchar(128))
INSERT INTO @ReqType (Type)
SELECT DISTINCT Tree.Type as 'Requirement Type'
FROM [TREE]
INNER JOIN [Project_INFO]  ON [Project_INFO].[ProjectID]=[Tree].[Project_ID] 
INNER JOIN [Baseline_INFO] ON [Baseline_INFO].[BaselineID]=[Tree].[Baseline_ID]
WHERE [Project_INFO].[Name] = 'Address Book' AND [Baseline_INFO].[Name] = 'Current
Baseline' 
Group By Tree.Type

SELECT Tree.Type as 'Requirement Type', COUNT(Tree.Type) as 'Number in Creation Range' 
FROM [Tree] 
INNER JOIN @ReqType As RT on RT.Type = Tree.Type
INNER JOIN [Project_INFO]  ON [Project_INFO].[ProjectID]=[Tree].[Project_ID] 
INNER JOIN @CreationCount AS CCount ON CCount.BaselineID=Tree.Baseline_ID 
WHERE [Project_INFO].[Name] = 'Address Book' AND CCount.Name = 'Current Baseline' 
AND [Tree].[creationDate] >= ('2010-01-01') and [Tree].[creationDate] < ('2020-01-01') 
GROUP BY tree.Type 
```

当我执行此查询时，我得到以下结果：

[https://dl.dropbox.com/u/17234826/SQLresult.png](https://dl.dropbox.com/u/17234826/SQLresult.png)

这个结果是正确的，但是我需要列出所有需求类型，即使在创建范围内没有需求，即

[https://dl.dropbox.com/u/17234826/SQLresult1.png](https://dl.dropbox.com/u/17234826/SQLresult1.png)

我尝试过使用各种连接，IFNULL 和 ISNULL，但我没有任何工作。

如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T14:14:17.840

修改第二个查询

```
SELECT Tree.Type as 'Requirement Type',
       COUNT(CASE WHEN [Tree].[creationDate] >= ('2010-01-01') and [Tree].[creationDate] < ('2020-01-01') THEN Tree.Type END) AS 'Number in Creation Range'
FROM [Tree] 
INNER JOIN @ReqType As RT on RT.Type = Tree.Type
INNER JOIN [Project_INFO]  ON [Project_INFO].[ProjectID]=[Tree].[Project_ID] 
INNER JOIN @CreationCount AS CCount ON CCount.BaselineID=Tree.Baseline_ID 
WHERE [Project_INFO].[Name] = 'Address Book' AND CCount.Name = 'Current Baseline' 
GROUP BY tree.Type 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T14:16:56.097

一般来说，要获取计数为 0 的记录，您需要某种外部连接，以便计算不匹配的行。您甚至可以使用您想要计算的所有选项的交叉连接。或者，我经常使用相关子查询来实现这种类型的计数。以下是几个通用示例：

```
-- Get count using left join
select c.customer_id,
    count(o.order_id) as num
from customers c
    left join orders o on c.customer_id = o.customer_id
group by c.customer_id

-- Get count using correlated subquery
select c.customer_id,
    (select count(*) from orders where customer_id = c.customer_id) as Num
from customers c 
```

如果您有一个有效的查询，另一种可能性是将这样的东西组合在一起：

```
-- Create a cte of the original query that we will use multiple times
;WITH cte as (
    SELECT Tree.Type as 'Requirement Type'
        , COUNT(Tree.Type) as 'Number in Creation Range' 
    FROM [Tree] 
        INNER JOIN @ReqType As RT on RT.Type = Tree.Type
        INNER JOIN [Project_INFO]  ON [Project_INFO].[ProjectID]=[Tree].[Project_ID] 
        INNER JOIN @CreationCount AS CCount ON CCount.BaselineID=Tree.Baseline_ID 
    WHERE [Project_INFO].[Name] = 'Address Book' AND CCount.Name = 'Current Baseline' 
        AND [Tree].[creationDate] >= ('2010-01-01') and [Tree].[creationDate] < ('2020-01-01') 
    GROUP BY tree.Type
)
-- Grab the counts of records with matches
select *
from cte
-- Grab the zero counts (records not in the original query)
union all
select Tree.Type, 0
from [Tree]
where Tree.Type not in (
    select Tree.Type
    from cte
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T14:16:15.483

我认为需要计算 CCount.BaselineID 并使用左连接如果你依赖 Tree.Type 你不会在没有匹配的行上得到零
而且你知道日期范围将返回零

```
SELECT Tree.Type as 'Requirement Type'
     , COUNT(CCount.BaselineID) as 'Number in Creation Range' 
FROM [Tree] 
INNER JOIN @ReqType As RT 
   on RT.Type = Tree.Type
INNER JOIN [Project_INFO]  
   ON [Project_INFO].[ProjectID] = [Tree].[Project_ID] 
OUTER JOIN @CreationCount AS CCount 
   ON CCount.BaselineID=Tree.Baseline_ID 
WHERE [Project_INFO].[Name] = 'Address Book' 
  AND CCount.Name = 'Current Baseline' 
  AND [Tree].[creationDate] >= ('2010-01-01') 
  and [Tree].[creationDate]  < ('2020-01-01') 
GROUP BY tree.Type 
```

# .net - 如何创建一个将页面调用为 HttpGet 的按钮

> ID：12747856
> 
> 赞同：1
> 
> 时间：2012-10-05T13:56:32.560
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-3, razor

我正在学习 MVC 和 ASP.NET。我有一个表，其中最后一列包含每一行的编辑按钮。这很好用，我喜欢按钮与链接的外观和感觉，但是当它打开页面时，会在控制器中调用 HttpPost 操作。我理解为什么会发生这种情况，它是一个提交按钮，并且它的行为就像正在提交该页面。如何修改它，以便我有一个重定向到该页面的 HttpGet 的按钮？（在剃刀中......）

```
@using (Html.BeginForm("Update", "Purchase"))
{
    @Html.HiddenFor(x => x.Id)
    <input type="submit" value="Update" />
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:57:57.977

添加`FormMethod.Get`到`BeginForm()`参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:59:32.377

您可能需要[Post-Redirect-Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)，因为您需要保存发布的数据。

在 post 操作中，您将重定向到 GET 操作（可能是具有更新信息的同一页面）。这样，后续刷新 (F5) 将不会重新提交 POST。这是一个很好的模式。

# c# - 想要避免默认的零值

> ID：12747857
> 
> 赞同：0
> 
> 时间：2012-10-05T13:56:33.900
> 
> 标签：c#, data-binding

我的应用程序中有一个类。它已经绑定到winform文本框控件。但是绑定到 BookingNo 属性的文本框始终显示零 (0)。但我希望文本框保持空白。有什么办法吗？这是我的代码片段。

```
 public class Booking 
    {
    private int pBookingNo;
    private string pCustomerName;
    private string pAddress;

    public int BookingNo
    {
        get { return pBookingNo; }
        set
        {
            if (!value.Equals(pBookingNo))
            {
                pBookingNo = value;
            }
        }
    }

    public string CustomerName
    {
        get { return pCustomerName; }
        set
        {
            if (!value.Equals(pCustomerName))
            {
                pCustomerName = value;

            }
        }
    }

    public Booking() { }
}

    public partial class Form1 : Form
    {
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        AddDataBindings();
    }

    private void AddDataBindings()
    {
        bsBooking.DataSource = typeof(Booking);

        txtBookingNo.DataBindings.Add("Text", bsBooking, "BookingNo", true, DataSourceUpdateMode.OnPropertyChanged, null, "G", GlobalVariables.CurrentCultureInfo);
        txtCustomerName.DataBindings.Add("Text", bsBooking, "CustomerName");

    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T13:58:01.127

Integer 的默认值为 0，因此您必须将其包装到其他对象中，该对象支持 0 以外的值，例如

```
public int? BookingNo { get; set; } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T14:00:10.123

您可以使用`Nullable Type`

```
public int? pBookingNo
{
  get;
  set;
} 
```

链接： http: [//msdn.microsoft.com/fr-fr/library/1t3y8s4s (v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/1t3y8s4s(v=vs.80).aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T14:04:53.280

您可以通过向 Format 事件 (http://msdn.microsoft.com/en-us/library/system.windows.forms.binding.format.aspx) 添加处理程序来为绑定使用自定义格式并返回一个空字符串当值为零时。但是您无法判断该值实际上是零还是尚未设置，在这种情况下使用 int? @Grumbler85 建议的方法更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T14:07:01.220

关于：

```
 textBox1.BindingContextChanged += new EventHandler(BindingContext_Changed);

private void BindingContext_Changed(object sender, EventArgs e)
{
   TextBox txtBox = (TextBox)sender;
   if (txtBox.Text == "0"){
      txtBox.Text = "";
   }
} 
```

不知道有没有用，只是一个想法。

# jquery - Rails - 改变是否显示字段取决于选择 - 不太有效

> ID：12747864
> 
> 赞同：0
> 
> 时间：2012-10-05T13:57:00.920
> 
> 标签：jquery, ruby-on-rails, forms, select

我有一个表格，如果用户从下拉列表中选择“其他”，下面会出现一个字段，上面写着“其他 - 请指定”。但是，它并不完全有效。如果我为“请指定”字段设置 display:none，那么当保存表单并且用户返回编辑它时，他们看到的只是选择框，而不是“请指定”字段。

我知道为什么会发生这种情况 - 这是因为 jQuery 正在等待用户在 show 事件触发之前更改选择框。

但是，如果我从 CSS 中删除 display:none，那么当用户第一次显示表单时，他们会看到选择框和“请指定”字段，无论选择框中显示什么。我能做些什么来解决这个问题？我也可以在页面加载时执行代码的“if”块，但不知道该怎么做？谢谢！！

```
<script>
$(function(){
    $("#pref_select").change(function(){
        if ($("#pref_select").val()=="Other"){
            $("#other-pref").show(500);
        } else {
            $("#other-pref").hide();
        }
    })
})
</script>

<div class="field">
  <%= f.label :pref %><br />
  <%= f.select :pref, ["", "1", "2", "Other"], {:id => "pref_select"} %>
</div>

<div class="field" id="other-pref">
  <%= f.label "Other - please specify" %><br />
  <%= f.text_area :other_pref %>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:22:02.437

如果要触发页面加载检查，请触发更改事件。您绑定了更改事件，但您的检查只有在触发后才会发生。因此，为了获得您想要的效果，您需要在页面加载时触发 change()

```
$("#pref_select").change(function() {
    if ($("#pref_select").val() == "Other") {
        $("#other-pref").show(500);
    } else {
        $("#other-pref").hide();
    }
}).change()​ // <-- this triggers the change event 
```

# jpa - 玩！通用模型与 blob 数据类型冲突

> ID：12747870
> 
> 赞同：0
> 
> 时间：2012-10-05T13:57:17.443
> 
> 标签：jpa, playframework, blob, playframework-1.x

我正在尝试将 extends GenericModel 与 blob 数据类型一起使用，但出现错误：

```
Execution error occured in template 
{module:crud}/app/views/tags/crud/form.html. Exception raised was 
MissingPropertyException : No such property: id for class: models.Member.
In {module:crud}/app/views/tags/crud/form.html (around line 56)

#{crud.passwordField name:field.name, value:(currentObject ? currentObject[field.name] : null) /}
#{/if}
#{if field.type == 'binary'}
    #{crud.fileField name:field.name, value:(currentObject ? currentObject[field.name] : null), id:currentObject?.id /}
#{/if}
#{if field.type == 'longtext'}
    #{crud.longtextField name:field.name, value:(currentObject ? currentObject[field.name] : null) /}
#{/if} 
```

我的模型是：

```
@Entity
@Table(name = "news_feed")
public class NewsFeed extends GenericModel {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    public Long news_id;

    public Blob news_image;
    ...
} 
```

`extends GenericModel`如果我删除或删除 blob，我不会收到错误消息。是什么导致了问题？

欢迎所有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:35:02.620

我不认为您的问题出在 blob 上，而是与处理非标准 id 名称的 CRUD 模块有关。

在您的示例中，crud 模块尝试获取“currentObject?.id”，但您的 id 名称是“news_id”

尝试将您的“news_id”字段重命名为“id”

# apache-flex - 不一致的 Flex 效果

> ID：12747871
> 
> 赞同：0
> 
> 时间：2012-10-05T13:57:22.027
> 
> 标签：apache-flex, flash-builder, flex4.5, effects

我在 Flex 中创建了一个简单的效果，下面的代码，但它不能正确执行......当我将图标翻转时，效果大部分时间会播放，而当我滚动图像时，效果应该反向播放，但很少...

我的代码或逻辑不正确吗？仅供参考 - 我使用的是 Flash Builder 4.6。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
        <s:Move id="detail_fade" target="{detail_panel}" xFrom="218" xTo="400" />
    </fx:Declarations>

    <s:Panel id="detail_panel" x="218" y="10" width="728" height="580" title="something">
    </s:Panel>

    <s:VGroup x="7" y="5" width="200" height="200">
        <s:Image source="images/Airfield Icon.jpg"
            rollOver="detail_fade.play()" rollOut="detail_fade.reverse()"/>
</s:VGroup> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:24:29.630

正如 Mahesh 在他的评论中指出的那样，`reverse()`只会逆转实际发挥的效果。这就是为什么您有时只看到它发生的原因：即当您在效果结束之前足够快地推出时。

您应该改用：

```
detail_fade.play(null, true); 
```

该`play`方法的第一个参数是效果目标的数组。既然你已经给了它一个目标，你不需要再次传递它（这就是它说的原因`null`）。
第二个参数是一个布尔值，如果设置为 ，则告诉效果以相反的方向播放`true`。它当然`false`是默认的。

* * *

现在，您可能会注意到，当您快速 roll_out 时，效果会跳到最后并从那里开始向另一个方向播放。

这可以像这样修复：

```
if (detail_fade.isPlaying) detail_fade.reverse();
else detail_fade.play(null, true); 
```

# tridion - 重命名机器名称后的 Tridion 安全问题

> ID：12747876
> 
> 赞同：0
> 
> 时间：2012-10-05T13:57:44.727
> 
> 标签：tridion

我们在服务器上安装了 Tridion，安装后我们更改了用户名，之后我们在日志中看到了这个问题：

```
Access is denied for the user MYMachinename\MTSUser.

Component: Tridion.ContentManager.CoreService
Errorcode: 770
User: NT AUTHORITY\NETWORK SERVICE

StackTrace Information Details:
   at Tridion.ContentManager.Security.AuthorizationManager.LoadAccessToken(String userName, IEnumerable`1 mappedGroupUris, IEnumerable`1 claimSets)
   at Tridion.ContentManager.Security.AuthorizationManager.LoadAccessToken(String userName, String impersonationUserName)
   at Tridion.ContentManager.Session..ctor(String userName, String impersonationUserName, UserContext userContext)
   at Tridion.ContentManager.CoreService.CoreServiceBase.Impersonate(String userName)
   at SyncInvokeImpersonate(Object , Object[] , Object[] )
   at System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[]& outputs)
   at Tridion.ContentManager.CoreService.TransactionSupportInvoker.Invoke(Object instance, Object[] inputs, Object[]& outputs)
   at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc)
   at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc)
   at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc)
   at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T14:08:48.420

I assume you changed the name of MTSUser.

You will need to update it in a few places then:

1.  The TRUSTEES table in the database.
2.  The Identity tab on the "SDL Tridion Content Manager" package in Component Services.
3.  On any Tridion services you have that run as the MTSUser.
4.  Various places in your Tridion Content Manager Configuration (e.g. Search settings -> Query Engine Settings / Indexer Service Settings)

Your Windows security settings should be fine, though, if you just renamed the user.

I might have forgotten some places, in which case I'm sure people will chime in.

Worst case scenario, you have to reinstall/repair - which might actually end up being the easiest option :)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T14:06:17.873

重命名后出现的错误可能是由以下原因引起的：

*   您需要更新在身份选项卡内的“ **SDL Tridion Content Manager COM+** ”属性中配置的帐户（您的错误对我来说看起来像这样）

![在此处输入图像描述](../Images/e68444b3bff6e4e0edf337099fff73d3.png)

*   **许可证**：根据您的许可证，它可以与机器名称耦合。您需要咨询客户支持。

*   数据库上的受托人表将需要更新。在对数据库进行任何手动更改之前，您可能需要与客户支持进行讨论

# google-app-engine - Blob 上传挂起

> ID：12747878
> 
> 赞同：0
> 
> 时间：2012-10-05T13:57:48.623
> 
> 标签：google-app-engine

我想知道最近在从外部应用程序将 blob 上传到 appengine 方面是否有任何变化？仅在 3 个月前还可以正常工作的东西现在在做 http 帖子上传 blob 时挂起。

之前运行良好的代码（见下文）包括从 AppEngine 获取拉取队列（使用 REST API），对接收到的任务执行一些操作，然后将结果作为 Blob 上传回 AppEngine。将 blob 上传到的 url 由 appengine 使用 blobstoreService.createUploadUrl("/upload"); 创建。

形式为：

```
 http://myapp.appspot.com/_ah/upload/AMmfu6aAHnkuS4ngyRJDn7urFFZeBxb_-3P-r7RY9udMvRjLWkEZNJMgUX1DFczNVi-NhIxcFat2AEPXs2IRJ0AOmznSMgcrCKmL7mGAmS7nqtr-UyYFkglD88BwCfzIui9M2yez7DSQ/ALBNUaYAAAAAUGRlEwpeGEc5ozp8Z8sDO33qgCi2AiIE/ 
```

我查看了 AppEngine 上的日志，似乎负责 /upload 的 servlet 没有被触发。

老实说，我在这个阶段没有想法，任何帮助将不胜感激！:-)

干杯，

基利安

```
 public boolean uploadAsBlob(String dataToWrite, String uploadURL) {

 try {

      BufferedWriter bufferedWriter = new BufferedWriter(new FileWriter(tempFileLocation));

      bufferedWriter.write(dataToWrite);

      bufferedWriter.newLine();

      bufferedWriter.close();

      MultipartEntity entity = new MultipartEntity();

      entity.addPart(blobFileName, new FileBody(new File(tempFileLocation)));

      HttpPost method = new HttpPost(uploadURL);

      method.setEntity(entity);

      final HttpParams httpParams = new BasicHttpParams();

      HttpConnectionParams.setConnectionTimeout(httpParams, 10000);

      DefaultHttpClient httpclient = new DefaultHttpClient(httpParams);

      //It hangs at the following line!

      HttpResponse response = httpclient.execute(method);

      if (response.getStatusLine().getStatusCode() == 200) {

           logger.info("Uploaded blob to url: " + uploadURL);

           return true;

      } else {

           logger.warning("Couldn't upload blob to url: " + uploadURL);

      }

      } catch (Exception e) {

      logger.warning("Exception " + e.getMessage() + " occured while uploading blob to url:" + uploadURL);

      logger.warning("Couldn't upload blob to url: " + uploadURL);

      }

      return false;

      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:40:08.173

我发现 GAE 最近开始在调用 blobstoreService.createUploadUrl() 时保留任何 GET 参数。就我而言：

`http://www.myapp.com/BG?_=1354631578951`

使用此（意外）参数，创建的 URL 为：

`http://www.myapp.com/_ah/upload/?_=1354631578951/AMmfu6YgVPoJzWXdbf70k6J0zdjEeRnnRJ2PYCb3Jgdwk3SqmKEnFyKgy_17CKwiqbC2HyO-FlPVX-C53W0LjHSywaq7YmLegD97uU-GrpWRdBdWbfKf0Dk/ALBNUaYAAAAAUL4L8iDS5E99f3Wky2p59wWpCD84AqoP/`

请注意，“_”参数仍然存在。删除参数（或者可能从 GET 移动到 POST）解决了这个问题。

# django - Django ManyToMany 两个 for 循环

> ID：12747884
> 
> 赞同：0
> 
> 时间：2012-10-05T13:58:04.467
> 
> 标签：django, django-templates, django-haystack

我有两个for循环，第一个（for i in var）用于获取帖子，另一个用于获取该帖子的标签（帖子模型中的ManyToManyField）：

```
{% for i in var %}
    {% for j in i.tags.all %}
        {{ j.name }}
    {% endfor %}
{% endfor %} 
```

为什么这行不通？

编辑：

以下是变量包含的内容：

变量：

```
[<SearchResult: myapp.post (pk='1')>, <SearchResult: myapp.post (pk='2')>] 
```

这是{{ i.tags }}：

```
<django.db.models.fields.related.ManyRelatedManager object at 0x1620dd0> 
```

如果我尝试用 .all 迭代它，它什么也不返回。

编辑2：

这可能是问题所在 - var 是 SearchQuerySet (django haystack) 中的一个变量：

```
var = SearchQuerySet().all() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:01:44.073

在模板内部，`j`类似于`<SearchResult: myapp.post (pk='1')>`，它没有`.tags`属性。Try `for j in i.object.tags.all`，[`.object`](http://django-haystack.readthedocs.org/en/latest/searchresult_api.html#attribute-reference)指的是实际的 Model 实例。

请注意，Django 通常不会抱怨`i.tags`在模板渲染期间尝试访问不存在的属性（此处）。因此，什么也不渲染也可能意味着不正确的属性引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:47:06.307

通过将标签字段添加到干草堆搜索索引中来解决它。现在它输出标签列表。谢谢大家的帮助！

# r - 带替换的随机列表

> ID：12747890
> 
> 赞同：-1
> 
> 时间：2012-10-05T13:58:15.897
> 
> 标签：r

我想从 44.400 个基因的宇宙中创建 1000 个包含 1652 个基因的随机列表。我决定更换。我使用以下指令创建随机列表：

```
randomMatrix<-replicate(1000, sample(gene_list, 1652, replace = T)) 
```

关键是在每个列表中都有一个基因被复制。对于我的研究，基因可以在列表之间复制，但不能在每个列表中复制。我怎样才能强制不在每个列表中复制基因？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:16:47.450

它应该与`replace = FALSE`：

```
randomMatrix<-replicate(1000, sample(gene_list, 1652, replace = FALSE)) 
```

当然，这至少需要 1652 个唯一值`gene_list`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:15:56.573

一个[可重现的例子](https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example)可以很好地说明你的问题，因为你没有给我们这样的例子我只是假设一个`List`并做了一些复制

```
List <- list(c(2,1,3,4,5,6), c(1,4,5,7,0,6), c(2,4,7,9,3,1))
set.seed(001)
replicate(3, lapply(List, sample, 7, replace=TRUE), simplify = FALSE) 
```

产生

```
[[1]]
[[1]][[1]]
[1] 1 3 4 6 1 6 6

[[1]][[2]]
[1] 7 7 1 4 4 0 5

[[1]][[3]]
[1] 3 7 3 1 7 3 1

[[2]]
[[2]][[1]]
[1] 1 4 2 1 3 2 3

[[2]][[2]]
[1] 6 5 5 7 5 4 0

[[2]][[3]]
[1] 3 3 2 3 7 3 9

[[3]]
[[3]][[1]]
[1] 5 4 4 5 2 3 5

[[3]][[2]]
[1] 0 5 6 5 4 1 1

[[3]][[3]]
[1] 4 9 9 7 1 4 7 
```

请注意，这种方法将为您原始列表的每个元素提供重新采样的数据（带替换），这就是为什么每个复制都是一个由三个元素组成的列表的原因。

如果你写`sapply`而不是`lapply`在`replicate(...)`结果输出中会更好。

```
set.seed(001)
replicate(3, sapply(List, sample, 7, replace=TRUE), simplify = FALSE)
[[1]]
     [,1] [,2] [,3]
[1,]    1    7    3
[2,]    3    7    7
[3,]    4    1    3
[4,]    6    4    1
[5,]    1    4    7
[6,]    6    0    3
[7,]    6    5    1

[[2]]
     [,1] [,2] [,3]
[1,]    1    6    3
[2,]    4    5    3
[3,]    2    5    2
[4,]    1    7    3
[5,]    3    5    7
[6,]    2    4    3
[7,]    3    0    9

[[3]]
     [,1] [,2] [,3]
[1,]    5    0    4
[2,]    4    5    9
[3,]    4    6    9
[4,]    5    5    7
[5,]    2    4    1
[6,]    3    1    4
[7,]    5    1    7 
```

# cocoa-touch - iOS - UINavigationBar 透明角并非总是如此

> ID：12747894
> 
> 赞同：0
> 
> 时间：2012-10-05T13:58:22.823
> 
> 标签：cocoa-touch, uinavigationbar, ios6, uiappearance

我正在使用`UINavigationBar`在左上角和右上角有透明角的自定义。我在用着`[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"navbar.png"] forBarMetrics:UIBarMetricsDefault];`

这几乎一直都很有效，但有时例如当我显示键盘而不是透明角时，它们会变成白色，当键盘向后滑动时，角会再次透明。

有谁知道可能导致这种情况的原因？（iOS 6，ARC）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T08:17:00.043

我想我知道它的原因。当我展示键盘时，我`UITableView`向上滑动。所以我相信`UITableView`导航栏后面显示的是 s 背景。但我认为导航栏不会受到影响？

# javascript - 尽管 requestAnimationFrame() 我的 WebGL 动画很慢

> ID：12747896
> 
> 赞同：0
> 
> 时间：2012-10-05T13:58:36.303
> 
> 标签：javascript, canvas, webgl, requestanimationframe

我正在尝试为我的网站背景创建 webgl 动画，灵感来自“threejs - 云示例”（[http://mrdoob.com/lab/javascript/webgl/clouds/](http://mrdoob.com/lab/javascript/webgl/clouds/)）。在我的电脑上看起来相当不错......但对于某些电脑来说它很慢。

有没有办法进一步优化我的代码，并检测显卡是否不支持 webgl ？

我的动画（背景）：[http ://wabeo.fr/?theme=auriga-7](http://wabeo.fr/?theme=auriga-7)

我的代码：

```
var container = document.getElementById('container');
var wi       = window.innerWidth;
var he       = window.innerHeight;
var renderer  = new THREE.WebGLRenderer({
antialias: true
});
var scene    = new THREE.Scene();
var camera   = new THREE.PerspectiveCamera(75,wi/he,1,10000);
var distance = 500;
var geometry2 = new THREE.Geometry();

renderer.setSize(wi ,he);
container.appendChild(renderer.domElement);
scene.add(camera);

var texture = THREE.ImageUtils.loadTexture( '/wp-content/themes/auriga-7/i/cloud.png' );
texture.minFilter = THREE.LinearFilter;
texture.magFilter = THREE.LinearFilter;

var m = new THREE.MeshBasicMaterial( {color:0x000000} );
var material = new THREE.MeshBasicMaterial( { map: texture,transparent: true} );
var plane = new THREE.PlaneGeometry( 400,400,4,4 );

for ( ix = 0; ix <45; ix++ ) {
    item = new THREE.Mesh( plane, m );
    item.position.x = ((Math.random()-0.5)*(Math.random() * wi/2) /4)*Math.random()*10;
    item.position.y = ((Math.random()-0.5)*(Math.random() * he/2) /4)*Math.random()*10;
    item.position.z = ix*10-50;
    item.rotation.z = Math.random() *250;
    item.scale.x = item.scale.y = Math.random() * Math.random() * 2 + 0.5;

    THREE.GeometryUtils.merge(geometry2,item);
}

mesh = new THREE.Mesh( geometry2, material );
scene.add(mesh);

camera.position.z = distance;
camera.lookAt(scene.position);
renderer.sortObjects = false;

// create a point light
var pointLight =
  new THREE.PointLight(0xFFFFFF);

// set its position
pointLight.position.x = 10;
pointLight.position.y = 50;
pointLight.position.z = 130;

// add to the scene
scene.add(pointLight);
requestAnimationFrame(wanarender);

document.addEventListener('mousemove',onMouseMove, false);
window.addEventListener('resize',onResizeMyFuckinBrowser,false);
function onMouseMove(event){

    var mouseX = event.clientX - wi/2;
    var mouseY = event.clientY - he/2;

    camera.position.x = (mouseX - camera.position.x) * 0.02;
    camera.position.y = (-mouseY - camera.position.y) * 0.02;
    camera.position.z = distance;
    camera.lookAt(scene.position);
}
function onResizeMyFuckinBrowser(){
    var wi       = window.innerWidth;
    var he       = window.innerHeight;
    renderer.setSize(wi ,he);
}
function wanarender(){
    requestAnimationFrame(wanarender);
    renderer.render(scene, camera);
} 
```

谢谢你的帮助 ：-）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T09:54:29.737

快速浏览一下 Mr Doob 代码，我注意到一些可能对您有所帮助的优化。如果您查看 Doob 先生的示例，您可以看到他的云纹理是 256 x 256 像素的图像，而您的图像是 800 x 800。这里需要考虑两件事：

首先，尝试对纹理大小使用 2 的幂，即 256、512、1024... 这是因为显卡针对这些尺寸的纹理进行了优化。

其次，正如 Doob 先生演示所展示的那样，800 x 800 可能比您真正需要的要大得多。大多数时候，你的纹理被缩小到一半或更小。

在 Mr Doob 演示中突出的另一件事是他正在使用 mipmap。Mipmap 是指显卡预先缓存不同比例的多个版本的纹理，并在任何给定时间使用最接近当前级别的版本。这使纹理缩放更有效，因此打开它们可能会加快速度。

您的代码：

```
texture.minFilter = THREE.LinearFilter;
texture.magFilter = THREE.LinearFilter; 
```

Doob先生的代码：

```
texture.magFilter = THREE.LinearMipMapLinearFilter;
texture.minFilter = THREE.LinearMipMapLinearFilter; 
```

关于 WebGL 的检测，请参阅此 Stack Overflow 答案以获取信息：

[Three.js 检测 webgl 支持并回退到常规画布](https://stackoverflow.com/questions/9899807/three-js-detect-webgl-support-and-fallback-to-regular-canvas)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:29:12.900

我自己是 Three.jS 的新手，但是优化你的代码是很成问题的。我学到的东西很少。如果您不喜欢黑色的闪光，请在附加元素之前渲染。让你的几何和纹理简单。形状越复杂，用作纹理的图像越多，速度就越慢。我确信有一种方法可以优化图形，但我还不知道。从尝试解决这个问题开始。

# jquery - 删除 CSS 悬停样式

> ID：12747903
> 
> 赞同：11
> 
> 时间：2012-10-05T13:59:00.047
> 
> 标签：jquery, html, css, dhtml

我已标记使用此规则切换悬停 CSS 样式。当面板中有一个复选框时，我想删除背景图像样式。这可能吗？尽管失败了，但我尝试了以下方法。

CSS：

```
 .StaffMode .day ul li.standard a:hover table {
        background:url("test.png"); 
    } 
```

JS：

```
 $("li.test table li").hover(
        function () {
            if($(this).children(':checked')) {
              alert('need to remove the background image style');  // shows as expected
              $(this).children('a').removeClass('hover');  // this doesnt work?
            }
        }
    ); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-05T14:04:04.233

您需要做的是对您的`:hover`规则进行一些限制，并让您的 JavaScript 更改元素，使其不再适用。像这样的东西：

```
.has-hover:hover
{
    /* do whatever */
} 
```

然后你的 JavaScript 会这样做：

```
$(this).children('a').removeClass('has-hover'); 
```

您不能删除 ，`:hover`但可以删除`has-hover`该类，并且由于该规则需要两者，这将阻止`.has-hover:hover`应用该规则。

# javascript - js覆盖确认

> ID：12747904
> 
> 赞同：5
> 
> 时间：2012-10-05T13:59:08.320
> 
> 标签：javascript

我想尝试用模态对话框覆盖 window.confirm 函数。

```
 <a href="http://example.com" onClick="return confirm('you want to go?')">

    <script>
        window.confirm = function(message){
            $("#confirm-dialog").modal('show');
            $("#confirm-dialog .modal-body p").html(message);
            $("#confirmYes").on("click", function () {
                return true;
            });

        }
    </script> 
```

当我在模式窗口中单击#confirmYes 元素时，它返回true，但通过href 链接重定向将不起作用...为什么？

有人可以告诉我如何在不更改链接的情况下做这件事吗？谢谢

**UPD** Yii 框架为 CGridView 小部件生成该代码，我想覆盖它。我无法更改此代码，因为它在框架中。相反，这个确认标准我想使用我的模态窗口

```
 $(document).on('click','#product-grid a.delete',function() {
   if(!confirm('Are you sure you want to delete this item?')) return false;
   var th=this;
   var afterDelete=function(){};
   $.fn.yiiGridView.update('product-grid', {
       type:'POST',
       url:$(this).attr('href'),
       success:function(data) {
           $.fn.yiiGridView.update('product-grid');
           afterDelete(th,true,data);
       },
       error:function(XHR) {
           return afterDelete(th,false,XHR);
       }
   });
   return false;
  }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-07-18T10:43:14.983

这是我们在我公司的一个 UI 转换项目中使用的一种做法。

虽然它很丑，但它工作得很好。

```
var clickState={};
    var justClicked=null;
  window.confirm = function(message) {
  var e = window.event || window.confirm.caller.arguments[0];
  var el = e.target || e.srcElement;  // the element's click that triggers confirm dialog
        if(justClicked && clickState[justClicked]===true){
            clickState[justClicked]=false;
            return true;
        }else{
            // your async style confirmation dialog (e.g. jQuery's dialog)
            showConfirmBox(message, function() {
                    justClicked=el;
                    clickState[el]=true;
                    $(justClicked).click();   // in the call back function , click the target again. 
            });
        }
  return false;
  }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:13:21.017

Js默认确认对话框同步工作，这意味着代码将等待用户做出他的选择继续。当您以这种方式覆盖确认对话框时，会显示您新的时尚确认对话框，但方法立即结束并返回`undefined`。

您可以使用回调；

```
<a href="http://example.com" onClick="confirm('you want to go?', function(result){ 
    if(result)
      //code to redirect, like window.location(this.href);
}); return false;"> 
```

然后：

```
<script>
    window.confirm = function(message, cb){
        $("#confirm-dialog").modal('show');
        $("#confirm-dialog .modal-body p").html(message);
        $("#confirmYes").on("click", function (userChoice) {
            cb(userChoice); //true or false - your jquery plugin will supply this value 
        });

    }
</script> 
```

**编辑**：出于 SEO 的原因，将链接 url 保留在 href 上（而不是仅仅留下“/#”）很重要——因为链接不会被触发，您还应该在调用新的确认对话框后返回 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-30T23:18:30.690

我知道这是一篇旧帖子，但我想分享我的解决方案，我知道这会改变 yii 默认行为，但我将它们的功能替换为一个自定义工作方式相同，我会向 yii 大师询问更好的方法，或者如果在未来这可以很容易地完成。

在 framework/yii/zii/widgets/grid/CButtonColumn.php 中修改 initDefaultButtons：

/** * 初始化默认按钮（查看、更新和删除）。*/

```
 protected function initDefaultButtons()
    {
        if($this->viewButtonLabel===null)
            $this->viewButtonLabel=Yii::t('zii','View');
        if($this->updateButtonLabel===null)
            $this->updateButtonLabel=Yii::t('zii','Update');
        if($this->deleteButtonLabel===null)
            $this->deleteButtonLabel=Yii::t('zii','Delete');
        if($this->viewButtonImageUrl===null)
            $this->viewButtonImageUrl=$this->grid->baseScriptUrl.'/view.png';
        if($this->updateButtonImageUrl===null)
            $this->updateButtonImageUrl=$this->grid->baseScriptUrl.'/update.png';
        if($this->deleteButtonImageUrl===null)
            $this->deleteButtonImageUrl=$this->grid->baseScriptUrl.'/delete.png';
        if($this->deleteConfirmation===null)
            $this->deleteConfirmation=Yii::t('zii','Are you sure you want to delete this item?');

        foreach(array('view','update','delete') as $id)
        {
            $button=array(
                'label'=>$this->{$id.'ButtonLabel'},
                'url'=>$this->{$id.'ButtonUrl'},
                'imageUrl'=>$this->{$id.'ButtonImageUrl'},
                'options'=>$this->{$id.'ButtonOptions'},
            );
            if(isset($this->buttons[$id]))
                $this->buttons[$id]=array_merge($button,$this->buttons[$id]);
            else
                $this->buttons[$id]=$button;
        }

        if(!isset($this->buttons['delete']['click']))
        {
            if(is_string($this->deleteConfirmation))
                $confirmation="if(!confirm(".CJavaScript::encode($this->deleteConfirmation).")) return false;";
            else
                $confirmation='';

            if(Yii::app()->request->enableCsrfValidation)
            {
                $csrfTokenName = Yii::app()->request->csrfTokenName;
                $csrfToken = Yii::app()->request->csrfToken;
                $csrf = "\n\t\tdata:{ '$csrfTokenName':'$csrfToken' },";
            }
            else
                $csrf = '';

            if($this->afterDelete===null)
                $this->afterDelete='function(){}';

    $withConfirmation    = strlen($confirmation) == 0 ? 0 : 1;
    $confirmationMessage =  CJavaScript::encode($this->deleteConfirmation);

    $this->buttons['delete']['click']=<<<EOD

    `function(event) {
    event.preventDefault();

    if ($withConfirmation){
        var th=this;
        var afterDelete=$this->afterDelete;
        var deleteUrl=$(this).attr('href');
        console.log(deleteUrl); 
        $(document.createElement('div')).attr({
            title:'Atención',
            'class': 'dialog'
        }).html($confirmationMessage).dialog({
            buttons: {
                "OK": function () {
                    $(this).dialog('close');                    
                    $.fn.yiiGridView.update('{$this->grid->id}', {
                        type:'POST',
                        url:deleteUrl,$csrf
                        success:function(data) {
                            $.fn.yiiGridView.update('{$this->grid->id}');
                            afterDelete(th,true,data);
                        },
                        error:function(XHR) {
                            return afterDelete(th,false,XHR);
                        }
                    });
                    return true;
                },
                "Cancel": function () {
                    $(this).dialog('close');
                    return false;
                }
            },
            close: function () {
                $(this).remove();
            },
            draggable: false,
            modal: true,
            resizable: false,
            width: 'auto'
        }).position({
           my: "center",
           at: "center",
           of: window
        });

    }
}
EOD;
    }
}
` 
```

编辑：

我还学会了如何在不修改核心 yii 的情况下做到这一点：

在您的小部件网格中，您有一个按钮文件，如下所示：

```
array
        (
            'class'=>'CButtonColumn',
            'deleteConfirmation'=>'Atencion',
            'buttons'=>array
            (
                    'update'=>array
                    (
                            'imageUrl'=>FALSE,
                            'label'=>'update',
                            'options'=>array('title'=>'update'),
                            'visible'=>'$row > 0'
                    ),
                    'delete'=>array
                    (
                            'imageUrl'=>FALSE,
                            'label'=>'delete',
                            'options'=>array('title'=>'delete'),
                            'click'=>'function(){$("#mydialog").dialog("open"); return false;}',
                    ),
            ),
            'template'=>'{update} | {delete}'
        ), 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-12T11:24:47.013

如果您需要覆盖 window.alert() 对话框，您可以在[此处找到它](http://jsfiddle.net/KurtWM/pf455/)

之后，我创建了自己的覆盖 window.confirm() 对话框，您可以在此处找到它

[覆盖 window.confirm() 对话框。](http://jsfiddle.net/HMagdy/Np73n/2/)

这很简单，就像：

```
window.confirm = function(message, title, doYes) {
        $(document.createElement('div'))
                .attr({title: title, class: 'confirm'})
                .html(message)
                .dialog({
            buttons: {
                "Confirm": function() {
                    $(this).dialog("close");
                    if (doYes && (typeof doYes === "function")) {
                        doYes();
                    } 
                },
                "Cancel": function() {
                    $(this).dialog("close");
                }
            }
            ,
            close: function() {
                $(this).remove();
            },
            draggable: true,
            modal: true,
            resizable: false,
            width: 'auto'
        });
    };

// New confirm
//confirm('This is a <strong>new</strong> alert!','Confirm', function(){alert('Yes')},function(){alert('No')}); 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-10-05T14:02:03.673

尝试向 onclick 添加返回：

```
a href="http://example.com" onclick="return confirm("you want to go?")"> 
```

# one-to-one - 休眠条件返回具有一对一子记录的父记录不为空？

> ID：12747907
> 
> 赞同：-1
> 
> 时间：2012-10-05T13:59:24.197
> 
> 标签：one-to-one, hibernate-criteria

> **可能重复：**
> [休眠条件返回具有一对一子记录的父记录不为空？](https://stackoverflow.com/questions/12776847/hibernate-criteria-return-parent-record-that-have-one-to-one-child-record-not-nu)

在标题中，我有两个与一对一关系相关的类父和子（父我最多有一个孩子），我想创建返回有孩子 isNotNull 的父母的标准，我尝试了一些想法

```
Criteria criteria = session.createCriteria(Parent.class);
criteria.add(Restrictions.isNotNull("child")); 
```

但不工作，你有例如吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:15:46.447

我想你需要一个从父母到孩子的内部连接标准。类似`session.CreateCriteria(typeof(Parent)).CreateCriteria(typeof(Child),JoinType.InnerJoin)`看[这个链接](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html)15.4。协会

# c# - C# switch - winpcap 的无限循环

> ID：12747912
> 
> 赞同：1
> 
> 时间：2012-10-05T13:59:33.023
> 
> 标签：c#, loops, winpcap

我正在制作应该接收数据包并将其发送到 PC 上的另一个端口的程序（其他端口也在做同样的事情，也发送他得到的东西），基于 MAC 地址。但是当我这样打开设备时：

```
device_port1.Open(DeviceMode.Promiscuous); 
```

然后在一个端口上发送一些数据包，同一个端口得到与接收到的相同的数据包。当两个适配器都在做同样的事情时，它们会一遍又一遍地互相发送一个数据包。

我怎么能阻止这个？我试过

```
device_port1.Open(OpenFlags.NoCaptureLocal, 1000); 
```

但后来它没有通过那个程序发送任何东西（然后它就没用了）。

这是代码：

```
 device_port0 = devices[pole[0]];
        device_port0.OnPacketArrival += new SharpPcap.PacketArrivalEventHandler(device_OnPacketArrival_port0);
        //device_port0.Open(OpenFlags.NoCaptureLocal, 1000);
        device_port0.Open(DeviceMode.Promiscuous);
        device_port0.StartCapture(); 
```

和 onPacketArrival

```
private void device_OnPacketArrival_port0(object sender, CaptureEventArgs packet)
        {
            device_port1 = devices[pole[1]];
            device_port1.Open();

            try
            {
                device_port1.SendPacket(packet.Packet.Data);
            }
            catch (Exception ee)
            {
                Console.Writeline("Exception: " + ee.Message);
            }
        } 
```

和在port1上是一样的。它只是发送他得到的东西，这就是循环的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T23:55:05.880

我认为这两个网卡具有相同的地址？如果**不是**这种情况，那么在转发数据包之前，您必须检查数据包的目标网络是否是连接到第二个网卡的网络。

但是，如果两张卡具有相同的地址，那么我能看到的唯一解决方案（我不是专家）是有某种列表，您可以在发送数据包后短时间存储数据包。每次您捕获一个数据包时，您都会检查它是否已经在列表中（检查它是否是您已经发送的数据包）。这种解决问题的方法效率低下，因为发送的每个数据包都会再次重新发送，**但**它胜过无穷大。

# javascript - 如何使用javascript在文件选择事件中获取文件控制的文件名

> ID：12747913
> 
> 赞同：0
> 
> 时间：2012-10-05T13:59:34.450
> 
> 标签：javascript, html, file-upload, filenames

当用户从对话框中选择任何文件时，我只需要获取文件名（选择文件后单击“打开”按钮或双击文件本身）。

一旦对话框关闭，是否有任何可用的文件控件事件可以触发以获取文件名

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T14:11:58.200

尝试这个：

```
<html>
<head>

<script>

function get_filename(obj) {

    var file = obj.value;
    alert(file);

}

</script>

</head>
<body>

<input type="file" name="file" value="" onchange="get_filename(this);" />

</body>
</html> 
```

**现场示例：**
[http ://simplestudio.rs/yard/filename/filename.html](http://simplestudio.rs/yard/filename/filename.html)

# r - R eps 导出和导入 Word 2010

> ID：12747916
> 
> 赞同：6
> 
> 时间：2012-10-05T13:59:41.090
> 
> 标签：r, ms-word, ggplot2

我在从 R 导出 eps 文件并导入 Word 2010 时遇到问题。

我正在使用`ggplot2`情节，例如

```
library(ggplot2)
p <- qplot(disp,hp,data=mtcars) + stat_smooth()
p 
```

即使调用`setEPS()`了以下任何一个都不能成功导入的生产文件。

```
ggsave("plot.eps")

postscript("plot.eps")
print(p)
dev.off() 
```

奇怪的是，如果我从 GUI 的菜单中使用`File`-> `Save As`->生成绘图`Postscript`，它可以正确导入。但是，当 Word 文档随后导出为 pdf 时，图形中的字体有点锯齿状。

所以我的问题是：

*   ( `ggsave`/ `postscript`) 设置的哪些组合允许我生成可以导入 Word 2010 的 eps 文件？
*   当 Word 文档导出为 pdf 时，如何确保字体保持清晰？

**更新**

经过更多的调查，我有更多的运气`cairo_ps`来制作这些情节。但是，导入 Word 时不会显示任何文本。

此外，在检查乳胶文档中的各种 eps 输出（`cairo_ps`从 GUI 保存`ggsave`）后，Word 中的 eps 导入过滤器似乎很差，因为打印/pdf 输出与乳胶文档的质量不匹配. 该`ggsave`版本（使用`postscript`）确实存在其他两种方法所没有的颜色问题。

结论是这是一个 Word 问题，因此`fortune(109)`不适用。我很乐意被证明不是这样，但我会将答案和赏金奖励给任何能够提供可以以命令形式复制 GUI 输出的命令的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T00:29:02.117

这对我有用......在`postscript`帮助页面中遵循建议：

```
 postscript("RPlot.eps", height = 4, width = 4, horizontal = FALSE, onefile = FALSE,
             paper = "special")
 library(ggplot2)
 p <- qplot(disp,hp,data=mtcars) + stat_smooth()
 p
#geom_smooth: method="auto" and size of largest group is <1000, so using loess. Use 'method = x' to #change the smoothing method.
#Warning message:
#In grid.Call.graphics(L_polygon, x$x, x$y, index) :
#  semi-transparency is not supported on this device: reported only once per page
 dev.off()
#quartz 
#     2 
```

最后有趣的东西让你注意到这只是一个经过 Mac 测试的解决方案，无论如何。

编辑：我刚刚使用 R 版本 2.15.1 (2012-06-22) 对其进行了测试——“烤棉花糖”：平台：i386-pc-mingw32/i386（32 位）和 Win XP 中的 MS Word 2007 并且它有效. 命令是插入/图片.../选择 eps 格式/选择文件。

Edit2：除了直接使用 postscript 设备之外，还有另一种保存方法。带有`"eps"`模式的 savePlot 方法在 Windows 中可用（但在 Mac 中不可用）。我同意这些字体不像在 Mac 上显示的那样流畅，但我可以看出使用 savePlot 保存和从交互式窗口使用 save as 在质量上没有区别。

```
savePlot(filename = "Rplot2", type = "eps", device = dev.cur(), restoreConsole = TRUE) 
```

`savePlot`来电`(.External(CsavePlot, device, filename, type, restoreConsole))`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T08:30:49.753

我解决了从 R 导出 .eps 文件并使用命令的`colormodel="rgb"`选项（默认为`"srgb"`）在 Windows 7 上导入 Word 2010 的问题`postscript`。

```
postscript("RPlot.eps", height = 4, width = 4, horizontal = FALSE, 
         paper = "special", colormodel = "rgb")
library(ggplot2)
p <- qplot(disp,hp,data=mtcars) + stat_smooth(se=FALSE, method="loess")
p
dev.off() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T14:12:35.493

您可能最好将`wmf`其用作可以在 Windows 上创建的格式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-29T07:34:17.613

Word 确实不能很好地支持 EPS。更好的解决方案是将您的图表直接以本机 Office 格式导出到 Word 或 Powerpoint。我刚刚制作了一个新包 export，它就是这样做的，请参阅 [https://cran.r-project.org/web/packages/export/index.html](https://cran.r-project.org/web/packages/export/index.html)和演示 [https://github.com/tomwenseleers/export](https://github.com/tomwenseleers/export)

典型的语法很简单，例如：

```
install.packages("export")
library(export)
library(ggplot2)
qplot(Sepal.Length, Petal.Length, data = iris, color = Species, 
      size = Petal.Width, alpha = I(0.7))     
graph2doc(file="ggplot2_plot.docx", width=6, height=5)
graph2ppt(file="ggplot2_plot.pptx", width=6, height=5) 
```

输出是矢量格式，因此在您在 Word 或 Powerpoint 中取消组合图形后完全可编辑。您还可以使用它来导出各种 R stats 对象的统计输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T19:38:32.140

您可以使用 R studio 将包含所有绘图的 html 文件编入其中，然后使用 Word 打开 HTML 文件。

[针织教程](http://jeromyanglim.blogspot.co.nz/2012/05/getting-started-with-r-markdown-knitr.html)

# mysql - 如何从 Perl 运行和链接 .sql 文件

> ID：12747918
> 
> 赞同：0
> 
> 时间：2012-10-05T13:59:48.630
> 
> 标签：mysql, perl

我正在寻找一种方法来实现 MySQL 和 Perl 来制作程序。我迷路的地方是我有一个 .sql 文件，它创建了 3 个表供 Perl 程序使用。你怎么：

1) 在 Perl 中执行文件 fileName.sql 来创建表

2）将这些创建的表链接到 Perl 程序中的可操作变量（例如能够将用户添加到其中一个表的示例）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T14:07:50.883

> 在 Perl 中执行文件 fileName.sql 以创建表

通常您会提前设置数据库并使用命令行`mysql`客户端或 PHPMyAdmin 等 GUI 来加载 .sql 文件。

不过，您可以使用调用来[`system`](http://perldoc.perl.org/functions/system.html)执行前者。

> 将这些创建的表链接到 Perl 程序中的可操作变量

Perl 中对数据库的低级访问通常通过[DBI 模块](https://metacpan.org/module/DBI)处理。

根据每个表的变量获取某些东西需要 ORM。[DBIx::Class](https://metacpan.org/module/DBIx%3a%3aClass)是一个流行的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T14:15:15.157

在 Perl 中，您使用[DBI](http://dbi.perl.org/)数据库接口。在您的情况下，您还将使用[`DBD::MySQL`](http://search.cpan.org/%7Ecapttofu/DBD-mysql-4.022/lib/DBD/mysql.pm)驱动程序之类的东西。

关于这个主题有很多帮助（包括这个网站上的很多问题）。

至于 .sql 文件的具体问题，您可以采取几种方法，具体取决于您想要获得的花哨程度：

*   您可以在编写程序时将命令复制并粘贴到程序中。
*   您可以执行将运行 .sql 文件的外部程序（例如，使用[`system()`](http://perldoc.perl.org/functions/system.html)）。
*   您可以以编程方式读取 .sql 文件并从程序中发送命令。一个模块可以帮助你解决这个问题（我[`SQL::Script`](http://search.cpan.org/%7Eadamk/SQL-Script-1.06/lib/SQL/Script.pm)在 CPAN 上找到，它看起来很有用，虽然我没有任何经验）。

我建议您选择一种方法，尝试一下，并询问您是否有任何具体问题。

# java - 如何重新排序列表

> ID：12747919
> 
> 赞同：0
> 
> 时间：2012-10-05T13:59:49.083
> 
> 标签：java, list, locale

我创建了以下方法：

```
public List<String> listAll() {
    List worldCountriesByLocal = new ArrayList();

    for (Locale locale : Locale.getAvailableLocales()) {
        final String isoCountry = locale.getDisplayCountry();
        if (isoCountry.length() > 0) {
            worldCountriesByLocal.add(isoCountry);
            Collections.sort(worldCountriesByLocal);
        }
    }
    return worldCountriesByLocal;
} 
```

它非常简单，它返回用户区域设置中的世界国家列表。然后我对其进行排序以使其按字母顺序排列。这一切都很完美（除了我似乎偶尔会得到国家的重复！）。

无论如何，我需要的是将美国和英国放在首位。我遇到的问题是我无法隔离将为美国和英国返回的索引或字符串，因为这是特定于语言环境的！

任何想法都会非常感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T14:02:45.597

> 无论如何，我需要的是将美国和英国放在首位。我遇到的问题是我无法隔离将为美国和英国返回的索引或字符串，因为这是特定于语言环境的！

听起来您应该实现自己的[`Comparator<Locale>`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)以通过以下步骤比较两个语言环境：

*   如果语言环境相同，则返回 0
*   如果一个地区是美国，那就“赢”
*   如果一个地区是英国，那就“赢”
*   否则，使用`o1.getDisplayCountry().compareTo(o2.getDisplayCountry())`（即委托给现有行为）

（这将使美国排在英国之前。）

然后[`Collections.sort`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)使用您的自定义比较器的实例调用。

在提取国家名称*之前*执行所有这些操作 - 然后从排序列表中提取它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:05:10.463

是的，当您进行排序时，只需提供您自己的比较器

Collections.sort(worldCountriesByLocal, new Comparator() {

```
 @Override
    public int compare(String o1, String o2) {
        if (o1.equals(TOP_VALUE))
            return -1;
        if (o2.equals(TOP_VALUE))
            return 1;
        return o1.compareTo(o2);
    }
}) 
```

最高价值将是您想要始终在顶部的价值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T14:05:47.960

我会编写自己的 POJO，其排序标记由一个整数分配优先级组成（例如，0 代表美国，1 代表英国，2 代表其他所有人），然后是一些分隔符，然后是国家名称。然后我会将数组放入由该排序 ID 和 POJO 作为 val 键的 HashMap 中。然后，我将从地图中对键进行排序并遍历排序并检索每个排序键的普通国家名称。

例如

```
2.Sweden
2.France
2.Tanzania
0.US
1.UK 
```

排序

```
0.US
1.UK
2.France
2.Sweden
2.Tanzania 
```

编辑：仅当您有除国家名称以外的更多字段时才需要 POJO。如果只是国家名称，我会将排序 ID 设置为哈希键，将国家名称设置为 val 并跳过 POJO 部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T14:54:18.497

您还可以使用 a`TreeSet`来消除重复项，并使用您自己的a`Comparator`来将 US 和 GB 带到开头。

您会得到重复项（这将消除），因为每个国家/地区通常有不止一个语言环境。例如，有一个美国（西班牙）和一个美国（英语），还有三个瑞士（法国、德国和意大利）。

```
public class AllLocales {
  // Which Locales get priority.
  private static final Locale[] priorityLocales = {
    Locale.US,
    Locale.UK
  };

  private static class MyLocale implements Comparable<MyLocale> {
    // My Locale.
    private final Locale me;

    public MyLocale(Locale me) {
      this.me = me;
    }

    // Convenience
    public String getCountry() {
      return me.getCountry();
    }

    @Override
    public int compareTo(MyLocale it) {
      // No duplicates in the country field.
      if (getCountry().equals(it.getCountry())) {
        return 0;
      }
      // Check for priority ones.
      for (int i = 0; i < priorityLocales.length; i++) {
        Locale priority = priorityLocales[i];
        // I am a priority one.
        if (getCountry().equals(priority.getCountry())) {
          // I come first.
          return -1;
        }
        // It is a priority one.
        if (it.getCountry().equals(priority.getCountry())) {
          // It comes first.
          return 1;
        }
      }
      // Default to straight comparison.
      return getCountry().compareTo(it.getCountry());
    }
  }

  public static List<String> listAll() {
    Set<MyLocale> byLocale = new TreeSet();
    // Gather them all up.
    for (Locale locale : Locale.getAvailableLocales()) {
      final String isoCountry = locale.getDisplayCountry();
      if (isoCountry.length() > 0) {
        //System.out.println(locale.getCountry() + ":" + isoCountry + ":" + locale.getDisplayName());
        byLocale.add(new MyLocale(locale));
      }
    }
    // Roll them out of the set.
    ArrayList<String> list = new ArrayList<>();
    for (MyLocale l : byLocale) {
      list.add(l.getCountry());
    }
    return list;
  }

  public static void main(String[] args) throws InterruptedException {
    // Some demo usages.
    List<String> locales = listAll();
    System.out.println(locales);
  }
} 
```

# php - 如何填充 MyObjects PHP 数组

> ID：12747920
> 
> 赞同：0
> 
> 时间：2012-10-05T13:59:55.970
> 
> 标签：php, arrays, web-services

嗨，我是 PHP 新手，我想知道如何填充 tweets 数组以返回它。

```
<?php

class TwitterService {
private $params = null;
private $tweets = array(

);

public function getParams() {
    return $this->params;
}

public function setParams($params) {
    $this->params = $params;
}

public function __construct($params) {
    $this->setParams($params);
}
public function getTweets(){
    private $tweet1 = new Tweet(
            id = 253338336415064064,
            created_at = 'Wed, 03 Oct 2012 03:39:00 +0000',
            profile_image_url = 'http:\/\/a0.twimg.com\/profile_images\/1529778154\/Facebook_normal.jpg',
            text = 'Lo real es lo real by @AnaliaRob tratando de expresarse vaya 1 a saber sobre q! Es un proverbio milenario. Only xa genios'
        );
    private $tweet2 = new Tweet(
            id: 253324444091703298,
            created_at: 'Wed, 03 Oct 2012 02:43:48 +0000',
            profile_image_url: 'http:\/\/a0.twimg.com\/profile_images\/1529778154\/Facebook_normal.jpg',
            text: 'Lo real es lo real by @AnaliaRob, trantando de expresarse vaya uno a saber sobre que!'
        );  

    return $tweets;
}

class Tweet{
    private $id = null;
    private $created_at = null;
    private $profile_image_url = null;
    private $text= null;
}; 
```

非常感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:02:07.620

```
$tweets[] = $myTweet; 
```

或者

```
$tweets = array( $tweet1, $tweet2 ); 
```

* * *

编辑：

```
public function getTweets(){
    private $tweet1 = new Tweet(
            id = 253338336415064064,
            created_at = 'Wed, 03 Oct 2012 03:39:00 +0000',
            profile_image_url = 'http:\/\/a0.twimg.com\/profile_images\/1529778154\/Facebook_normal.jpg',
            text = 'Lo real es lo real by @AnaliaRob tratando de expresarse vaya 1 a saber sobre q! Es un proverbio milenario. Only xa genios'
        );
    private $tweet2 = new Tweet(
            id: 253324444091703298,
            created_at: 'Wed, 03 Oct 2012 02:43:48 +0000',
            profile_image_url: 'http:\/\/a0.twimg.com\/profile_images\/1529778154\/Facebook_normal.jpg',
            text: 'Lo real es lo real by @AnaliaRob, trantando de expresarse vaya uno a saber sobre que!'
        );  
    // Option 1
    return array( $tweet1, $tweet2 );

    // Option 2
    $result = array();
    $result[] = $tweet1;
    $result[] = $tweet2;
    return $result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:13:18.720

```
$tweets = array( $tweet1, $tweet2 );
return $tweets; 
```

**编辑 ：**

解释一下，你不能`$tweets`在声明区填充 array()，因为`$tweet1`它`$tweet2`还不存在，你在函数中声明/分配它们`getTweets()`。

如果您不需要访问`$tweets`代码中的其他地方，您可以跳过`$tweets`声明并`return array( $tweet1, $tweet2 );`输入，`getTweets()`如@MarvinLabs 所示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T14:11:36.123

您可以在函数内部以这种方式访问​​它们`getTweets`：

```
 $tweets = array( $tweet1, $tweet2,...); 
```

# python - Python将输入与文件中的行进行比较？

> ID：12747921
> 
> 赞同：1
> 
> 时间：2012-10-05T13:59:57.940
> 
> 标签：python, file, input, compare

我的名字是 Seix_Seix，我对我正在构建的 Python 程序有疑问。

问题是，我正在做一个“谜语游戏” *（很傻，对吗？）*，来练习一些基本的 Python 技能。程序的预期流程是你给它一个从 1 到 5 的数字，然后它打开一个包含所有谜题的文件，并在你给出的数字行中打印一个。之后，它会要求您输入一个输入，您在其中输入答案，然后**（这是所有崩溃的地方）**它将您的答案与**另一个**文件上的相应行*（所有答案都在其中）*进行比较。

这是代码，您可以看一下*（它是西班牙语，因为它是我的母语，但在评论中也有翻译和解释）

```
# -*- coding: cp1252 -*-

f = open ("C:\Users\Public\oo.txt", "r") #This is where all the riddles are stored, each one in a separate line
g = open ("C:\Users\Public\ee.txt", "r") #This is where the answers to the riddles are, each one in the same line as its riddle
ques=f.readlines()
ans=g.readlines()

print "¡Juguemos a las adivinanzas!" #"Lets play a riddle game!"
guess = int(raw_input("Escoge un número entre 1 y 5\. O puedes tirar los dados(0) ")) #"Choose a number from 1 to 5, or you can roll the dice (0)" #This is the numerical input, in which you choose the riddle

if guess==0:
    import random
    raw_input(random.randrange(1, 5))

print (ques[guess-1]) #Here, it prints the line corresponding to the number you gave, minus 1 (because the first line is 0, the second one is 1 and so on)
a=input("¿Sabes qué es?") #"Do you know the answer?" #Here, you are supposed to type the answer to the riddle.

while True:
    if a==(ans[guess-1]): #And here, it is supposed to compare the answer you gave with the corresponding line on the answer file (ee.txt). 
        print "ok" #If you are correct it congratulates you, and breaks the loop.
        break
    else:
        print "no" #If you are wrong, it repeats its question over and over again 
```

所以，我运行程序。一切都很好，直到我必须输入答案的那一刻；在那里，无论我放什么，即使是对还是错，它都会给我下一个错误：

```
Traceback (most recent call last):
  File "C:\Users\[User]\Desktop\lol.py", line 16, in <module>
    a=input("¿Sabes qué es?") #"Do you know the answer?" #Here, you are supposed to type the answer to the riddle.
  File "<string>", line 1, in <module>
NameError: name 'aguacate' is not defined #It is the correct answer BTW 
```

我**知道**当它开始比较答案时会产生这个问题，而且我也**知道**这可能是因为我写错了...... Sooo，关于如何正确做的任何建议？

*提前致谢*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:10:47.983

您需要使用`raw_input()`而不是`input()`，否则 Python 将尝试评估输入的字符串 - 由于`aguacate`不是 Python 知道的表达式，它会抛出您找到的异常。

此外，您的“掷骰子”程序不起作用（尝试进入`0`并查看会发生什么）。那应该是

```
if guess == 0:
    # import random should be at the start of the script
    guess = random.randrange(1,6) 
```

* * *

根据要求，关于您的代码的其他一些评论：

总的来说，还可以。您可以优化一些小事情：

您没有关闭已打开的文件。当您只是阅读它们时这不是问题，但是一旦您开始写入文件就会导致问题。最好快点习惯。最好的方法是使用`with`语句块；即使在程序执行期间发生异常，它也会自动关闭您的文件：

```
with open(r"C:\Users\Public\oo.txt") as f, open(r"C:\Users\Public\ee.txt") as g:
    ques = f.readlines()
    ans = g.readlines() 
```

请注意，我使用了原始字符串（如果字符串中有反斜杠，这很重要）。如果你命名了你的文件`tt.txt`，你的版本将会失败，因为它会寻找一个名为的文件，`Public<tab>t.txt`因为它会`\t`被解释为一个制表符。

另外，花点时间学习[PEP-8，Python 风格指南](http://www.python.org/dev/peps/pep-0008/)。它将帮助您编写更具可读性的代码。

由于您使用的是 Python 2，因此您可以将括号放入`print (ques[guess-1])`（或切换到 Python 3，无论如何我都会推荐它，因为 Unicode！另外，在 Python 3 中，`raw_input()`最终重命名为`input()`）。

然后，我认为您需要从答案字符串中删除尾随换行符，否则它们将无法正确比较（另外，删除不必要的括号）：

```
if a == ans[guess-1].rstrip("\n"): 
```

# .htaccess - 错误的 301 htaccess 重定向

> ID：12747922
> 
> 赞同：0
> 
> 时间：2012-10-05T14:00:00.343
> 
> 标签：.htaccess, http-redirect

我的网站上有这段代码，我需要将[http://softsolutions.fr](http://softsolutions.fr)重定向到[http://www.softsolutions.fr](http://www.softsolutions.fr)，但它没有重定向：

```
<IfModule mod_rewrite.c>    
  Options +FollowSymlinks
  Options +Indexes
  RewriteEngine On

    RewriteCond %{HTTP_HOST} ^softsolutions\.fr
    RewriteRule ^(.*)$ http://www.softsolutions.fr/index.html [R=301,L]     

  RewriteRule    ^$    /index.html    [L]

    # Rewrites "sub.domain.foo/anything" to "sub.domain.foo/anything.php"
    RewriteCond %{REQUEST_FILENAME} !^(.+).php$
    RewriteCond %{REQUEST_FILENAME} !^(.+).pdf$
    RewriteCond %{REQUEST_FILENAME} !^(.+).(html|htm)$
    RewriteRule    ^([a-zA-Z0-9\-\_/]*)$    /$1.php    [L]  

</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:47:35.650

替换这些行：

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^softsolutions\.fr
RewriteRule ^(.*)$ http://www.softsolutions.fr/index.html [R=301,L] 
```

和：

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^softsolutions\.fr [NC]
RewriteRule (.*) http://www.%{HTTP_HOST}%{REQUEST_URI} 
```

# linux - 带有 curl 的 Linux 脚本来检查 Web 服务是否已启动

> ID：12747929
> 
> 赞同：42
> 
> 时间：2012-10-05T14:00:20.690
> 
> 标签：linux, curl

我有一个提供的网络服务`http://localhost/test/testweb`

我想编写一个脚本来检查 web 服务是否与 curl

如果给定 curl 参数，则返回`200 OK`ok true false 以便我可以使用它是 linux 脚本中的 if-else 块

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-10-05T14:07:53.263

```
curl -sL -w "%{http_code}\\n" "http://www.google.com/" -o /dev/null 
```

*   `-s`= 静默 cURL 的输出
*   `-L`= 关注重定向
*   `-w`= 自定义输出格式
*   `-o`= 将 HTML 输出重定向到`/dev/null`

例子：

```
[~]$ curl -sL -w "%{http_code}\\n" "http://www.google.com/" -o /dev/null
200 
```

`\\n`如果我要捕获输出，我可能会删除。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2020-02-25T15:15:42.263

我用：

```
curl -f -s -I "http://example.com" &>/dev/null && echo OK || echo FAIL 
```

> -f --fail 在 HTTP 错误时静默失败（根本没有输出）
> -s --silent 静默模式
> -I --head 仅显示文档信息

注意：
根据需要，您还可以删除“-I”，因为在某些情况下您需要执行 GET 而不是 HEAD

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-06-05T08:04:28.097

与@burhan-khalid 相同，但添加了`--connect-timeout 3`and `--max-time 5`。

```
test_command='curl -sL \
    -w "%{http_code}\\n" \
    "http://www.google.com:8080/" \
    -o /dev/null \
    --connect-timeout 3 \
    --max-time 5'
if [ $(test_command) == "200" ] ; 
then
   echo "OK" ;
else
   echo "KO" ;
fi 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T14:09:56.140

这将通过 wget`2>&1`管道检查标头 stderr 到 stdout `grep`过滤器 `-O /dev/null`只是抛出页面的内容

```
if [ "\`wget http://example.org/ -O /dev/null -S --quiet 2>&1 | grep '200 OK'\`" != "" ]; 
then 
   echo Hello; 
fi; 
```

我不知道卷曲，但仍然是一个解决方案

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-18T18:02:43.683

我需要一个更好的答案，所以我写了下面的脚本。

fakePhrase 用于检测 ISP“搜索辅助”广告软件 HTTP 响应。

```
#!/bin/bash

fakePhrase="verizon"
siteList=(
  'http://google.com'
  'https://google.com'
  'http://wikipedia.org'
  'https://wikipedia.org'
  'http://cantgettherefromhere'
  'http://searchassist.verizon.com'
)

exitStatus=0

function isUp {
  http=`curl -sL -w "%{http_code}" "$1" -o temp_isUp`
  fakeResponse=`cat temp_isUp | grep $fakePhrase`
  if [ -n "$fakeResponse" ]; then
    http=$fakePhrase
  fi
  case $http in
  [2]*)
    ;;
  [3]*)
    echo 'Redirect'
    ;;
  [4]*)
    exitStatus=4
    echo "$1 is DENIED with ${http}"
    ;;
  [5]*)
    exitStatus=5
    echo "$1 is ERROR with ${http}"
    ;;
  *)
    exitStatus=6
    echo "$1 is NO RESPONSE with ${http}"
    ;;
  esac
}

for var in "${siteList[@]}"
do
  isUp $var
done

if [ "$exitStatus" -eq "0" ]; then
  echo 'All up'
fi

rm temp_isUp
exit $exitStatus 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-10T14:17:36.660

用这个：

```
curl -o $CURL_OUTPUT -s -w %{http_code}\\n%{time_total}\\n $URL > $TMP_FILE 2>&1
cat $TMP_FILE 
```

# internet-explorer - 在 IE7 和 IE8 兼容性视图上测试我的网站？

> ID：12747932
> 
> 赞同：-1
> 
> 时间：2012-10-05T14:00:41.870
> 
> 标签：internet-explorer, web-applications, internet-explorer-8, internet-explorer-7, ie8-compatibility-mode

我有 Windows 7 和 IE8。但我也想在 IE7 上测试我的网站。是否有一个实用程序可以在 Windows 上安装并在两个版本的 IE 上测试我的网站。我的 Windows 7 也不允许我安装 IE7，说 IE7 对这个操作系统无效。另一个问题是，如果我在兼容性视图上运行我的网站，是否等同于在 IE7 上运行它？我很清楚如何在同一台机器上测试我的网站在 IE7 和 IE8 上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:06:47.303

兼容性视图并不完全等同于真正的浏览器，而是用于查看严重错误。

在微软页面可以下载 IE6 和 IE7，但是你需要一个虚拟机（和 Windows XP 的镜像）来安装它。

[http://www.microsoft.com/en-us/download/details.aspx?id=2](http://www.microsoft.com/en-us/download/details.aspx?id=2)

# javascript - 如何在three.js中编写动画序列脚本？

> ID：12747939
> 
> 赞同：1
> 
> 时间：2012-10-05T14:01:32.407
> 
> 标签：javascript, webgl, three.js

我刚刚开始使用three.js，并且正在尝试制作一个非常基本的动画序列。我已经浏览了基本示例并了解了如何使对象移动和旋转，但我不太了解如何构建一系列动画序列。

例如...

显示 3 个立方体并将它们移动到一个新位置（最好错开一点，以免同时移动）

然后一旦他们都到了，让他们中的两个旋转一个轴

然后将它们移动到新位置

ETC...

我正在构建的东西没有用户交互——它只是一系列按顺序发生的动作。人们是否使用 Frame.js 之类的东西来处理这类事情，还是有一些我忽略的更简单的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T11:48:29.733

试用director.js - 简单但有效。

[https://github.com/zz85/ThreeLabs/blob/master/Director.js](https://github.com/zz85/ThreeLabs/blob/master/Director.js)

有一个更长的展示柜，但是找不到链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:06:56.717

Tween.js 是一种选择： [https](https://github.com/sole/tween.js/) ://github.com/sole/tween.js/ 。

教程： http: [//learningthreejs.com/blog/2011/08/17/tweenjs-for-smooth-animation/](http://learningthreejs.com/blog/2011/08/17/tweenjs-for-smooth-animation/)

示例： http: [//learningthreejs.com/data/tweenjs_for_smooth_animation/tweenjs_for_smooth_animation.html](http://learningthreejs.com/data/tweenjs_for_smooth_animation/tweenjs_for_smooth_animation.html)

# ios - 如何拆除 GCD 队列？

> ID：12747942
> 
> 赞同：1
> 
> 时间：2012-10-05T14:01:45.620
> 
> 标签：ios, opengl-es, concurrency, grand-central-dispatch

我有一个 GCD 绘图队列来更新我的 OpenGL ES 场景，其结构如下：

```
- (void)drawFrame {
    dispatch_async(drawingQueue, ^{
        if (dispatch_semaphore_wait(frameRenderingSemaphore, DISPATCH_TIME_NOW) != 0) {
            return;
        }

        @autoreleasepool {
            [self startDrawing];

            // drawing code

            [self endDrawing];
        }

        dispatch_semaphore_signal(frameRenderingSemaphore);
    });
} 
```

当应用程序退出活动或进入后台（两者）时，我通过使 CADisplayLink 无效来停止 OpenGL 绘图运行循环。

然而，问题是即使在 CADisplayLink 失效之后，dispatch_asyn 也会调度绘图块。当用户按下主页按钮时，我的应用程序崩溃，因为它试图在 OpenGL 中绘制一个框架，即使 iOS 已经拆除了上下文。

有没有办法杀死/暂停 GCD 队列，使其不再分派任何东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:48:04.120

我认为最简单的方法是在应用程序中设置一个标志，在执行块之前检查它。例如：

```
- (void)drawFrame {
    dispatch_async(drawingQueue, ^{

        if (appIsTerminated || appIsInBackground) {
            return;
        }

        if (dispatch_semaphore_wait(frameRenderingSemaphore, DISPATCH_TIME_NOW) != 0) {
            return;
        }

        @autoreleasepool {
            [self startDrawing];

            // drawing code

            [self endDrawing];
        }

        dispatch_semaphore_signal(frameRenderingSemaphore);
    });
} 
```

您可以在您的应用程序委托中设置这些值`applicationDidEnterBackground`和`applicationWillTerminate`。

你也可以试试这个：

```
dispatch_suspend(drawingQueue);
dispatch_release(drawingQueue); 
```

虽然不太确定那些。

以下是所有详细信息：[https ://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)

# javascript - 用逗号 (,) 分隔并检查是否有任何值是 = "something"

> ID：12747943
> 
> 赞同：5
> 
> 时间：2012-10-05T14:01:46.560
> 
> 标签：javascript, string-parsing

如何以逗号 (,) 以某种方式拆分/分隔我的 JavaScript 变量。
然后检查是否`value-of-any-of-the-separated-strings = "something"`

例如，我的变量的值为`1,2,3,4,5,6,7,8,9,10,2212312`，我想检查是否有任何数字`= 7`在 IF 语句中。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-05T14:04:37.993

首先，将字符串拆分为`","`. 然后，`indexOf`在拆分字符串数组上使用以查看是否找到目标字符串（`-1`表示在数组中未找到它）。例如：

```
var str = "1,2,3,4,5,6,7,8,9,10,10,2212312";
var split_str = str.split(",");
if (split_str.indexOf("7") !== -1) {
    // Original string contains 7
} 
```

* * *

**参考：**

*   `String.prototype.split`- [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/split](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/split)
*   `Array.prototype.indexOf`- [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T14:07:30.260

这是一个简单的应用[`Array.prototype.some`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/some)：

```
var yourVar = '1,2,3,4,5,6,7,8,9,10,2212312';
function isSeven(val) {
    return val === '7';
}
if (yourVar.split(',').some(isSeven)) {
    //do stuff
} 
```

另一种[常见的](https://stackoverflow.com/a/10584043/497418)写法是：

```
if (~yourVar.split(',').indexOf('7')) {
    //do stuff
} 
```

或者如果`Array.prototype.contains`已经定义：

```
if (yourVar.split(',').contains('7')) {
    //do stuff
} 
```

或者，如果您想使用正则表达式：

```
if (/(?:^|,)7(?:,|$)/.test(yourVar)) {
    //do stuff
} 
```

[**注意：** [`Array.prototype.some`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/some) ,[`Array.prototype.indexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)并且[`Array.prototype.contains`](https://stackoverflow.com/a/12399125/497418)都需要 polyfill 才能跨浏览器正常工作。]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T14:05:20.753

将其拆分为一个数组，然后使用 indexOf 来查看它是否存在。如果它返回 -1，则不是。

```
"1,2,3,4,5,6,7,8,9,10,2212312".split(",").indexOf("7") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T14:05:24.247

使用[split](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)和[Array.indexOf()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)

```
var str = "1,2,3,4,5,6,7,8,9,10,2212312";
var num = 7;
var pieces = str.split(",");
var index = pieces.indexOf(num.toString()); 
```

也可以用正则表达式来完成

```
var str = "1,2,3,4,5,6,7,8,9,10,2212312";
var num = 7;    
var re = new RegExp("(^|,)" + num + "($|,)");
alert(re.test(str)); 
```

[jsFiddle 示例](http://jsfiddle.net/rcqeQ/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T14:06:15.373

[`split`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)一起使用[`indexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)：

```
var someString = '1,2,3,4,5,6,7,8,9,10,2212312';
var splitArray = someString.split(',');
var sevenPosition = splitArray.indexOf('7'); 
```

[http://jsfiddle.net/jbabey/f4NLY/](http://jsfiddle.net/jbabey/f4NLY/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-05T14:09:16.210

您可以使用`Array.filter`，例如：

```
var values = '1,2,3,4,5,6,7,8,9,10,2212312'.split(','), find = 7;
if ( values.filter(function(a){return +a === find;}).length ) { /* ... */ } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-05T14:20:37.850

男人，我希望它会帮助你。

```
 var yourValues = '1,2,3,4,5,6,7,8,9,10,2212312';
    var array = yourValues.split(",");
    boolean isValue = false;
    for(i in array)
    {
       if(array[i]=='7')
       {
             isValue=true;
       }
    }

    if(isValue)
        alert("your number is in the string");
    else
        alert("your number is in the string"); 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-10-05T14:06:34.223

您是否正在寻找“包含”功能。您可以为此使用 jQuery。

```
if ($.inArray(7, value-of-any-of-the-seperated-strings))
{
   console.log("there is a 7!")
} 
```

# iphone - 现有ios项目制作兼容iPhone 5

> ID：12747944
> 
> 赞同：1
> 
> 时间：2012-10-05T14:01:48.043
> 
> 标签：iphone, objective-c, xcode, ios6

> **可能重复：**
> [如何检测 iPhone 5（宽屏设备）？](https://stackoverflow.com/questions/12446990/how-to-detect-iphone-5-widescreen-devices)

我已经有一个在 iPhone 4 和 iPad 上正常运行的项目。现在我想让该项目与 iPhone 5（4 英寸）兼容。

我试过使用“使用自动布局”，但它不起作用。

我的 Xcode 版本是 4.5 版 (4G182)。

我在互联网上搜索过，但找不到任何线索。

如果有人已经解决了这个问题，请指导我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T14:14:50.353

1.  在名为 Default-568h@2x.png 的项目中放置一个 iPhone 5 的默认图像。之后，iPhone 5 模拟器全屏启动了我的应用程序。

2.  根据您的布局，您可能不需要自动布局。我可以使用 IB 中的自动调整大小设置来解决所有布局问题。最后很简单。我有四种问题：

    *   查看应该全屏的控制器

![在此处输入图像描述](../Images/0afb6bcf32969a19a4f02e08a231ed9e.png)

*   到顶部固定距离的元素

![在此处输入图像描述](../Images/8425eb604eb2a0ce0690e1a27c202f1e.png)

*   到底部固定距离的元素

![在此处输入图像描述](../Images/361fc1272056a106f4d9fc58e1eaebdd.png)

*   到顶部/底部的动态距离应随容器大小缩放的元素

![在此处输入图像描述](../Images/2a9e0c65b3ccbc3110b64d4902e5dea4.png)

我在现有项目中更喜欢这种方式。在下一个项目中，我将检查自动布局功能。

最好的，本杰明

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T14:54:18.053

我不建议创建单独的 xib 文件，这就是我所做的： 1\. 添加 4 英寸启动屏幕 - 如果您想使用所有 iPhone 5 屏幕，这是必须的，没有其他设置。2\. 如果您使用的是 xib 文件，只需使用界面生成器打开它并选择每个视图按钮等，并将其设置为动态放置（使用标尺选项卡）。注意设置窗口也要向上伸展。3\. 如果您对视图进行编码，请检查您是否动态设置了位置和大小。

请注意，“自动布局”**不向后兼容**，因此它不会在 iOS6 之前的 iOS 版本上运行（它只是崩溃）！如果您从头开始，但对于不太好的旧应用程序，这可能很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T14:04:46.737

您是否尝试将名为 Default-568h@2x.png 的新启动图像添加到您的项目中？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T14:39:21.273

一种可能的解决方案（可能不是最好的解决方案）是根据屏幕大小加载不同的 .xib 文件。这样您仍然可以保存与以前的 iOS 版本 (<6.0) 的兼容性。您可以添加一个选择正确 .xib 文件的类别，而不是`initWithNibName:`

```
@implementation UIViewController (iPhone5Support)

 -(id) initAutomaticallyWithNibName:(NSString *)nibNameOrNil orIOS6NibName:(NSString*) IOS6NibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
     BOOL isiPhone5 = CGSizeEqualToSize([[UIScreen mainScreen] preferredMode].size,CGSizeMake(640, 1136));
     if (isiPhone5==NO) {
         self = [self initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
     } else {
         self = [self initWithNibName:IOS6NibNameOrNil bundle:nibBundleOrNil];
         if (self==nil) { NSLog(@" initAutomaticallyWithNibName ERROR - nil for io6 nib name"); }
     }
     return self;
}
@end 
```

像这样使用它：

```
UIViewController *controller = [[UIViewController alloc] initAutomaticallyWithNibName:@"UIViewControllerXibName" orIOS6NibName:@"UIViewControllerXibName_4inch" bundle:nil]; 
```

（不要忘记为同一个控制器创建 2 个 xib 文件）

# java - 如何使用 HashMap 读写文件？

> ID：12747946
> 
> 赞同：19
> 
> 时间：2012-10-05T14:01:56.283
> 
> 标签：java, file, dictionary, hashmap

我有`HashMap`两个 Strings `Map<String, String> ldapContent = new HashMap<String, String>`。

现在我想将其保存`Map`在一个外部文件中以供`Map`以后使用，而无需再次初始化它......

那么我必须如何保存`Map`以便以后再次使用它呢？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-10-05T14:09:14.840

The simplest solution that I can think of is using Properties class.

Saving the map:

```
Map<String, String> ldapContent = new HashMap<String, String>();
Properties properties = new Properties();

for (Map.Entry<String,String> entry : ldapContent.entrySet()) {
    properties.put(entry.getKey(), entry.getValue());
}

properties.store(new FileOutputStream("data.properties"), null); 
```

Loading the map:

```
Map<String, String> ldapContent = new HashMap<String, String>();
Properties properties = new Properties();
properties.load(new FileInputStream("data.properties"));

for (String key : properties.stringPropertyNames()) {
   ldapContent.put(key, properties.get(key).toString());
} 
```

EDIT:

if your map contains plaintext values, they will be visible if you open file data via any text editor, which is not the case if you serialize the map:

```
ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream("data.ser"));
out.writeObject(ldapContent);
out.close(); 
```

EDIT2:

instead of for loop (as suggested by OldCurmudgeon) in saving example:

```
properties.putAll(ldapContent); 
```

however, for the loading example this is the best that can be done:

```
ldapContent = new HashMap<Object, Object>(properties); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-05T14:23:14.757

由于`HashMap`实现了`Serializable`接口，您可以简单地使用`ObjectOutputStream`类将整个写入文件，然后使用类 `Map`再次读取它`ObjectInputStream`

下面的简单代码解释了`ObjectOutStream`和的用法`ObjectInputStream`

```
import java.util.*;
import java.io.*;
public class A{

    HashMap<String,String> hm;
    public A() {
        hm=new HashMap<String,String>();

        hm.put("1","A");
        hm.put("2","B");
        hm.put("3","C");

        method1(hm);

    }

public void method1(HashMap<String,String> map) {
    //write to file : "fileone"
    try {
        File fileOne=new File("fileone");
        FileOutputStream fos=new FileOutputStream(fileOne);
        ObjectOutputStream oos=new ObjectOutputStream(fos);

        oos.writeObject(map);
        oos.flush();
        oos.close();
        fos.close();
    } catch(Exception e) {}

    //read from file 
    try {
        File toRead=new File("fileone");
        FileInputStream fis=new FileInputStream(toRead);
        ObjectInputStream ois=new ObjectInputStream(fis);

        HashMap<String,String> mapInFile=(HashMap<String,String>)ois.readObject();

        ois.close();
        fis.close();
        //print All data in MAP
        for(Map.Entry<String,String> m :mapInFile.entrySet()){
            System.out.println(m.getKey()+" : "+m.getValue());
        }
    } catch(Exception e) {}
  }

public static void main(String args[]) {
        new A();
}

} 
```

或者，如果您想将数据作为文本写入文件，您可以简单地迭代`Map`并逐行写入键和值，然后逐行再次读取并添加到`HashMap`

```
import java.util.*;
import java.io.*;
public class A{

    HashMap<String,String> hm;
    public A(){
        hm=new HashMap<String,String>();

        hm.put("1","A");
        hm.put("2","B");
        hm.put("3","C");

        method2(hm);

    }

public void method2(HashMap<String,String> map) {
    //write to file : "fileone"
    try {
        File fileTwo=new File("filetwo.txt");
        FileOutputStream fos=new FileOutputStream(fileTwo);
        PrintWriter pw=new PrintWriter(fos);

        for(Map.Entry<String,String> m :map.entrySet()){
            pw.println(m.getKey()+"="+m.getValue());
        }

        pw.flush();
        pw.close();
        fos.close();
    } catch(Exception e) {}

    //read from file 
    try {
        File toRead=new File("filetwo.txt");
        FileInputStream fis=new FileInputStream(toRead);

        Scanner sc=new Scanner(fis);

        HashMap<String,String> mapInFile=new HashMap<String,String>();

        //read data from file line by line:
        String currentLine;
        while(sc.hasNextLine()) {
            currentLine=sc.nextLine();
            //now tokenize the currentLine:
            StringTokenizer st=new StringTokenizer(currentLine,"=",false);
            //put tokens ot currentLine in map
            mapInFile.put(st.nextToken(),st.nextToken());
        }
        fis.close();

        //print All data in MAP
        for(Map.Entry<String,String> m :mapInFile.entrySet()) {
            System.out.println(m.getKey()+" : "+m.getValue());
        }
    }catch(Exception e) {}
  }

public static void main(String args[]) {
        new A();
}

} 
```

注意：上面的代码可能不是完成这项任务的最快方法，但我想展示一些类的应用

参见[ObjectOutputStream](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/ObjectOutputStream.html)、[ObjectInputStream](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectInputStream.html)、[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)、[Serializable](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)、[StringTokenizer](http://download.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-10-05T14:04:04.530

`HashMap`实现`Serializable`，因此您可以使用正常的序列化将 hashmap 写入文件

这是[Java的链接-序列化](http://www.tutorialspoint.com/java/java_serialization.htm)示例

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-05T14:05:09.973

`writeObject`您可以使用ObjectOutputStream将对象写入文件

[对象输出流](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutputStream.html)

# winapi - 在编辑控件上调用 SetWindowText 时如何保留滚动位置

> ID：12747951
> 
> 赞同：2
> 
> 时间：2012-10-05T14:02:08.387
> 
> 标签：winapi

我创建了一个编辑控件：

```
HWND hwnd = CreateWindow( "EDIT", tabText.c_str(), WS_CHILD | WS_VSCROLL | ES_LEFT | ES_MULTILINE | ES_AUTOVSCROLL, ...) 
```

然后我通过调用来更新它的内容`SetWindowText(...)`。但是每次更新完成时，滚动都会设置为开头。我需要让它保持它的位置。我给这个控件写了一个日志。这意味着文本字符串越来越大。我试图在通话前获取滚动信息，并在通话`SetWindowText()`后设置滚动信息。这会导致控件闪烁。

如何在更新时保留滚动位置并查看文本？

# graphics - 如何在 2D 中快速找到一条射线和 m 多段线之间最近的交点？

> ID：12747955
> 
> 赞同：2
> 
> 时间：2012-10-05T14:02:20.077
> 
> 标签：graphics, geometry, computational-geometry

如何在 2D 中找到射线之间最近的交点：

```
x = x0 + t*cos(a), y = y0 + t*sin(a) 
```

和 m 多段线：

```
{(x1,y1), (x2,y2), ..., (xn,yn)} 
```

迅速地？

我开始循环遍历所有线段和每个线段； `{(x1,y1),(x2,y2)}`解决：

```
x1 + u*(x2-x1) = x0 + t*cos(a)

y1 + u*(y2-y1) = y0 + t*sin(a) 
```

根据克莱默的规则，然后按距离对交叉点进行排序，但这很慢:-(

顺便说一句：折线恰好在 中单调递增`x`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:57:58.537

# 坐标系变换

我建议您首先将您的设置转换为更简单的坐标：

1.  Take your point `p = (x, y)`.
2.  Move it by `(-x0, -y0)` so that the ray now starts at the center.
3.  Rotate it by `-a` so that the ray now lies on the *x* axis.

So far the above operations have cost you four additions and four multiplications per point:

```
ca = cos(a) # computed only once
sa = sin(a) # likewise

x' = x - x0
y' = y - y0
x'' = x'*ca + y'*sa 
y'' = y'*ca - x'*sa 
```

# Checking for intersections

Now you know that a segment of the polyline will only intersect the ray if the sign of its `y''` value changes, i.e. `y1'' * y2'' < 0`. You could even postpone the computation of the `x''` values until after this check. Furthermore, the segment will only intersect the ray if the intersection of the segment with the *x* axis occurs for *x* > 0, which can only happen if either value is greater than zero, i.e. `x1'' > 0 or x2'' > 0`. If both `x''` are greater than zero, then you *know* there is an intersection.

*The following paragraph is kind of optional, don't worry if you don't understand it, there is an alternative noted later on.*
If one `x''` is positive but the other is negative, then you have to check further. Suppose that the sign of `y''` changed from negative to positive, i.e. `y1'' < 0 < y2''`. The line from `p1''` to `p2''` will intersect the *x* axis at *x* > 0 if and only if the triangle formed by `p1''`, `p2''` and the origin is oriented counter-clockwise. You can determine the orientation of that triangle by examining the sign of the determinant `x1''*y2'' - x2''*y1''`, it will be positive for a counter-clockwise triangle. If the direction of the sign change is different, the orientation has to be different as well. So to take this together, you can check whether

```
(x1'' * y2'' - x2'' * y1'') * y2'' > 0 
```

If that is the case, then you have an intersection. Notice that there were no costly divisions involved so far.

# Computing intersections

As you want to not only decide whether an intersection exists, but actually find a specific one, you now have to compute that intersection. Let's call it `p3`. It must satisfy the equations

```
(x2'' - x3'')/(y2'' - y3'') = (x1'' - x3'')/(y1'' - y3'') and 
                       y3'' = 0 
```

which results in

```
x3'' = (x1'' * y1'' - x2'' * y2'')/(y1'' - y2'') 
```

*Instead of the triangle orientation check from the previous paragraph, you could always compute this `x3''` value and discard any results where it turns out to be negative. Less code, but more divisions. Benchmark if in doubt about performance.*

To find the point closest to the origin of the ray, you take the result with minimal `x3''` value, which you can then transform back into its original position:

```
x3 = x3''*ca + x0
y3 = x3''*sa + y0 
```

There you are.

Note that all of the above assumed that all numbers were either positive or negative. If you have zeros, it depends on the exact interpretation of what you actually want to compute, how you want to handle these border cases.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T15:26:28.937

为了避免检查与所有段的交集，需要一些空间分区，例如[Quadtree](http://en.wikipedia.org/wiki/Quadtree)，[BSP tree](http://en.wikipedia.org/wiki/BSP_tree)。对于空间分区，需要检查与空间分区的光线相交。

在这种情况下，由于点是按 x 坐标排序的，因此可以用框`(min x, min y)-(max x, max y)`对折线的一部分进行空间划分。根框是所有点的最小值-最大值，它被分成 2 个框，用于折线的第一部分和第二部分。零件中的段数相同或一个盒子多一个段。这种盒子分割是递归完成的，直到只有一个段在一个盒子里。

要检查射线相交从根框开始，检查它是否与射线相交，如果是，则检查 2 个子框是否相交，首先测试更近的子框，然后测试更远的子框。

检查光线盒相交是检查光线是否穿过两个位置之间的轴对齐线。这是针对 4 个框边界完成的。

# magento - Magento 单个模块中的多个模型

> ID：12747960
> 
> 赞同：0
> 
> 时间：2012-10-05T14:02:39.427
> 
> 标签：magento, magento-1.7

我在加载处理带有模块的数据库的第二个模型时遇到问题。
我有 1 个控制器`ValidateController`和 2 个`Main`扩展的模型，`Mage_Core_Controller_Front_Action`因此我无法与数据库通信，并且`Log`与数据库通信。

当我调用`$log = Mage::getModel('modulex/log');`它时它为我提供了正确的路径，`get_class($log)`但是当我调用它时`$log->load($params['id']);`它失败给我这个错误：

```
Warning: include(Companyx/Modulex/Model/Resource/Main.php) [function.include]: failed to open stream: No such file or directory 
```

我不明白为什么它会给我这个错误，它应该称之为`Resource/Log.php`存在。

我给你看我的 config.xml

```
<frontend>
    <routers>
        <modulex>
            <use>standard</use>
            <args>
                <module>Companyx_Modulex</module>
                <frontName>modulex</frontName>
            </args>
        </modulex>
    </routers>
</frontend>
<global>
    <models>
        <modulex>
            <class>Companyx_Modulex_Model</class>
            <resourceModel>modulex_resource</resourceModel>
        </modulex>
        <modulex_resource>
            <class>Companyx_Modulex_Model_Resource</class>
            <entities>
                    <log>
                            <table>companyx_modulex_logs</table>
                    </log>
            </entities>
        </modulex_resource>
    </models>
</global> 
```

感谢您的帮助 ！

==== 编辑解决方案 ====使用此代码
创建`/resource/Main.php`

```
class Companyx_Modulex_Model_Resource_Main extends Mage_Core_Model_Resource_Db_Abstract
{
    protected function _construct()
    {
        $this->_init('modulex/log', 'id');
    }
} 
```

我的错误是在做`$this->_init('modulex/main', 'id');`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:12:29.073

您收到的错误消息我相当清楚，找不到资源模型。Magento 将模型拆分为本质上是一个 2 层系统。一层用于处理业务逻辑，另一层用于处理持久性/数据库交互。当您在模型上调用 load 时，它被代理到为您的类指定的资源模型。在您的配置中，此资源被设置为`Companyx_Modulex_Model_Resource_Main.php`，但您似乎在应该定义类的位置没有文件 - `app/code/{codepool}/Companyx/Modulex/Model/Resource/Main.php`。

# .net - 构建完成后从 IntermediateOutputPath 复制 MSBuild

> ID：12747961
> 
> 赞同：3
> 
> 时间：2012-10-05T14:02:44.460
> 
> 标签：.net, visual-studio, msbuild, msbuild-task, afterthought

我正在使用[Afterthought](https://github.com/vc3/Afterthought)（类似于 PostSharp）通过修改输出程序集将构建后的更改应用于某些代码。目前，我的项目文件中有这样的内容（缩写）：

```
<Target Name="AfterBuild">
  <AfterThoughtTask TargetAssembly="$(TargetPath)" AmendWith="$(TargetDir)Amendments.dll" />
</Target> 
```

基本上它是在说：在构建之后，使用 AfterThoughtTask 运行一个进程来使用 Amendments.dll 中的代码修改输出程序集。正如我所期望的那样，这工作得很好，并且 MyProject.dll 输出`MyProject\bin\Debug\MyProject.dll`被修改为附加代码。

然后我对我的项目文件进行了轻微的更改：

```
<PropertyGroup>
  <OutputPath>SomeOtherProjectLocation\bin\</OutputPath>
</PropertyGroup> 
```

所以我所做的就是改变输出路径。现在我调试`AfterThoughtTask`，并在所有代码执行后下断点。当我在此断点处停止时，文件`SomeOtherProjectLocation\bin\MyProject.dll`（这是我打算修改的文件，位于我希望它所在的文件夹中）似乎已被修改（文件大小为 117kb，未修改时为 103kb）。在这一点上，事情似乎进展顺利。然后我释放断点，突然文件大小回落到 103kb，不知何故被原始未修改的文件替换。查看诊断构建报告，`AfterThoughtTask`是最后一个运行的任务，之后没有报告文件副本。

在同一断点处再次运行，我看到位于`IntermediateOutputPath`目录 (obj\Debug) 中的文件仍然是 103kb（未修改），所以我尝试查看是否是覆盖修改后的文件。当我处于断点时（任务执行结束，但在控制权交还给构建之前），我将`IntermediateOutputPath`目录中的文件重命名为 MyProject.dll_hidden。我没有收到任何错误，但我的文件不再被覆盖。

所以我只能假设文件是​​从`IntermediateOutputPath`目标文件的目录中复制的，但是构建日志似乎没有表明这一点，而且我不明白为什么改变`OutputPath`它会以这种方式发生，而不是它是如何发生的之前是默认的`OutputPath`。有人在这里有任何指导吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T19:27:14.730

使用命令行构建它并将详细程度设置为 diag (/v:diag)。管道输出到日志文件并挖掘它 - 通常使用 diag 输出，您可以轻松找到问题的根源（或在此处发布日志）。

还要检查以下内容 - 如果您更改全局 OutputPath - 其他构建项目将写入该文件夹 - 使用未更改的 OutputPath 构建并找到与 117kb 大小匹配的项目的 dll。

# symfony - SonataAdminBundle $this->getSubject() 没有按预期工作

> ID：12747963
> 
> 赞同：1
> 
> 时间：2012-10-05T14:02:46.683
> 
> 标签：symfony, symfony-sonata, sonata-admin

设置：symfony 2.0，SonataAdminBundle 2.0

我有两个实体。公司和活动。公司有很多活动。我还有一个公司管理员，允许编辑公司名称和相关事件。

在数据库中，我有 2 家公司，每家公司有 3 个活动。

1.  公司1
    *   事件1
    *   事件2
    *   事件3
2.  公司2
    *   事件4
    *   事件5
    *   事件6

**公司管理员**

```
protected function configureFormFields(FormMapper $formMapper)
{
    $formMapper
        ->add('name')
        ->add('events', 'sonata_type_collection', array(), array(
            'edit'      => 'inline',
            'inline'    => 'table'
        ))
    ;

    $this->getFormFieldDescription('events')
        ->setAssociationAdmin($this->getConfigurationPool()->getInstance('namespace.platform.admin.event_positions'));
} 
```

**事件职位管理员**

```
protected function configureFormFields(FormMapper $formMapper)
{
    $formMapper
        ->add('name')
        ->add('date')
    ;

    echo $this->getSubject().' ';
} 
```

问题是**echo $this->getSubject()** for **Company1**打印**event1 event1 event1**

预期结果：**事件1 事件2 事件3**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T08:13:33.027

以这种方式无法在 CompanyAdmin 中获取当前的 EventPosition。父 Admin (CompanyAdmin) 不会调用 EventPositionsAdminController::editAction，因此它不会更改当前 ID，它只会访问 EventPositionsAdmin 以了解表单的外观 (EventPositionsAdmin::configureFormFields())。

我猜你也在使用 DoctrineORMBundle，用“sonata_type_collection”调用 EventPositionsAdmin。如果您这样做，只需自定义其模板并操作 Company 的所有 EventPosition：

```
->add('contatos','sonata_type_collection', array('template' => 'MyBundle:custom_collection_template.html.twig'), array(
                'edit' => 'inline',
                'inline' => 'table',
                'allow_add' => true,
                'prototype' => true,
                'allow_delete' => true
            )) 
```

# xcode - 界面生成器中的 UItableview 大小调整

> ID：12747966
> 
> 赞同：0
> 
> 时间：2012-10-05T14:02:50.423
> 
> 标签：xcode, cocoa-touch

我在界面构建器中有一个 tableviewcontroller，其中有一个 tableview。

在 IB 中，我选择了 tableviewcontroller 并将其宽度更改为 500，高度更改为 500。我选择了 tableview 并将其宽度更改为 500，高度更改为 500。

在这个阶段，我可以在故事板上正确地看到宽度和高度。现在我单击 IB 中的表格单元格之一，宽度和高度恢复为正常值。知道如何解决这个问题吗？

编辑：

重现问题。

第 1 步：将 UITableviewController 拖放到故事板上（静态单元格 + 组） 第 2 步：编辑器 > 嵌入 > 导航控制器 第 3 步：转到导航控制器的属性检查器并选中使用显式大小 > 600 x 500

第 4 步：转到 TableViewController 的属性检查器并检查使用显式大小 > 600 x 500 第 5 步：选择表格视图并检查使用显式大小 > 600 x 500

第 6 步：在其中一个单元格内放置标签

此时，当您为 tableview 设置新大小时，故事板会反映新大小。

现在单击情节提要中的任意位置并返回其中一个单元格.. OOpps..tableview 恢复为原始尺寸..

但是，IB 中的 tableviewcontroller 尺寸是完整的。

在此先感谢，普拉萨德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:19:39.257

检查代码中任何地方以编程方式设置的表格框架。

# mysql - 在 Cloudbees CommunicationsException 中无法连接到 MySQL：通信链路故障

> ID：12747969
> 
> 赞同：1
> 
> 时间：2012-10-05T14:03:09.430
> 
> 标签：mysql, cloudbees

[这个](https://stackoverflow.com/questions/12206808/unable-to-connect-to-host-mysql-database-on-application-deployed-to-cloudbees/)问题要求发布一个不同的问题。

我按照上面问题中的建议做了，并正确更正了 cloudbees.xml 文件。但即使那样我也无法连接。这是堆栈跟踪：

```
HTTP Status 500 -

type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

javax.servlet.ServletException: javax.persistence.PersistenceException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
Error Code: 0
    com.vaadin.terminal.gwt.server.AbstractApplicationServlet.handleServiceException(AbstractApplicationServlet.java:1010)
    com.vaadin.terminal.gwt.server.AbstractApplicationServlet.service(AbstractApplicationServlet.java:548)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    com.bluecubs.xinco.core.server.filter.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:98)
root cause

javax.persistence.PersistenceException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
Error Code: 0
    org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:602)
    org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:186)
    org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:278)
    org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:304)
    org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:282)
    com.bluecubs.xinco.core.server.XincoDBManager.getProtectedEntityManager(XincoDBManager.java:574)
    com.bluecubs.xinco.core.server.XincoDBManager.getEntityManager(XincoDBManager.java:565)
    com.bluecubs.xinco.core.server.XincoDBManager.updateDBState(XincoDBManager.java:280)
    com.bluecubs.xinco.core.server.XincoDBManager.reload(XincoDBManager.java:125)
    com.bluecubs.xinco.core.server.XincoDBManager.reload(XincoDBManager.java:102)
    com.bluecubs.xinco.core.server.vaadin.Xinco.init(Xinco.java:197)
    com.vaadin.Application.start(Application.java:551)
    com.vaadin.terminal.gwt.server.AbstractApplicationServlet.startApplication(AbstractApplicationServlet.java:1219)
    com.vaadin.terminal.gwt.server.AbstractApplicationServlet.service(AbstractApplicationServlet.java:484)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    com.bluecubs.xinco.core.server.filter.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:98)
root cause

Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
Error Code: 0
    org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:324)
    org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:319)
    org.eclipse.persistence.sessions.DefaultConnector.connect(DefaultConnector.java:138)
    org.eclipse.persistence.sessions.DatasourceLogin.connectToDatasource(DatasourceLogin.java:162)
    org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:685)
    org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:213)
    org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:542)
    org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:186)
    org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:278)
    org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:304)
    org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:282)
    com.bluecubs.xinco.core.server.XincoDBManager.getProtectedEntityManager(XincoDBManager.java:574)
    com.bluecubs.xinco.core.server.XincoDBManager.getEntityManager(XincoDBManager.java:565)
    com.bluecubs.xinco.core.server.XincoDBManager.updateDBState(XincoDBManager.java:280)
    com.bluecubs.xinco.core.server.XincoDBManager.reload(XincoDBManager.java:125)
    com.bluecubs.xinco.core.server.XincoDBManager.reload(XincoDBManager.java:102)
    com.bluecubs.xinco.core.server.vaadin.Xinco.init(Xinco.java:197)
    com.vaadin.Application.start(Application.java:551)
    com.vaadin.terminal.gwt.server.AbstractApplicationServlet.startApplication(AbstractApplicationServlet.java:1219)
    com.vaadin.terminal.gwt.server.AbstractApplicationServlet.service(AbstractApplicationServlet.java:484)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    com.bluecubs.xinco.core.server.filter.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:98)
root cause

com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
    sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1117)
    com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:350)
    com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2393)
    com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2430)
    com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2215)
    com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:813)
    com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
    sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:399)
    com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:334)
    java.sql.DriverManager.getConnection(DriverManager.java:582)
    java.sql.DriverManager.getConnection(DriverManager.java:154)
    org.eclipse.persistence.sessions.DefaultConnector.connect(DefaultConnector.java:98)
    org.eclipse.persistence.sessions.DatasourceLogin.connectToDatasource(DatasourceLogin.java:162)
    org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:685)
    org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:213)
    org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:542)
    org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:186)
    org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:278)
    org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:304)
    org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:282)
    com.bluecubs.xinco.core.server.XincoDBManager.getProtectedEntityManager(XincoDBManager.java:574)
    com.bluecubs.xinco.core.server.XincoDBManager.getEntityManager(XincoDBManager.java:565)
    com.bluecubs.xinco.core.server.XincoDBManager.updateDBState(XincoDBManager.java:280)
    com.bluecubs.xinco.core.server.XincoDBManager.reload(XincoDBManager.java:125)
    com.bluecubs.xinco.core.server.XincoDBManager.reload(XincoDBManager.java:102)
    com.bluecubs.xinco.core.server.vaadin.Xinco.init(Xinco.java:197)
    com.vaadin.Application.start(Application.java:551)
    com.vaadin.terminal.gwt.server.AbstractApplicationServlet.startApplication(AbstractApplicationServlet.java:1219)
    com.vaadin.terminal.gwt.server.AbstractApplicationServlet.service(AbstractApplicationServlet.java:484)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    com.bluecubs.xinco.core.server.filter.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:98)
root cause

java.net.ConnectException: Connection refused
    java.net.PlainSocketImpl.socketConnect(Native Method)
    java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
    java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
    java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
    java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    java.net.Socket.connect(Socket.java:529)
    java.net.Socket.connect(Socket.java:478)
    java.net.Socket.<init>(Socket.java:375)
    java.net.Socket.<init>(Socket.java:218)
    com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:257)
    com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:300)
    com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2393)
    com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2430)
    com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2215)
    com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:813)
    com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
    sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:399)
    com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:334)
    java.sql.DriverManager.getConnection(DriverManager.java:582)
    java.sql.DriverManager.getConnection(DriverManager.java:154)
    org.eclipse.persistence.sessions.DefaultConnector.connect(DefaultConnector.java:98)
    org.eclipse.persistence.sessions.DatasourceLogin.connectToDatasource(DatasourceLogin.java:162)
    org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:685)
    org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:213)
    org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:542)
    org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:186)
    org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:278)
    org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:304)
    org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:282)
    com.bluecubs.xinco.core.server.XincoDBManager.getProtectedEntityManager(XincoDBManager.java:574)
    com.bluecubs.xinco.core.server.XincoDBManager.getEntityManager(XincoDBManager.java:565)
    com.bluecubs.xinco.core.server.XincoDBManager.updateDBState(XincoDBManager.java:280)
    com.bluecubs.xinco.core.server.XincoDBManager.reload(XincoDBManager.java:125)
    com.bluecubs.xinco.core.server.XincoDBManager.reload(XincoDBManager.java:102)
    com.bluecubs.xinco.core.server.vaadin.Xinco.init(Xinco.java:197)
    com.vaadin.Application.start(Application.java:551)
    com.vaadin.terminal.gwt.server.AbstractApplicationServlet.startApplication(AbstractApplicationServlet.java:1219)
    com.vaadin.terminal.gwt.server.AbstractApplicationServlet.service(AbstractApplicationServlet.java:484)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    com.bluecubs.xinco.core.server.filter.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:98)
note The full stack trace of the root cause is available in the Apache Tomcat/6.0.35 logs.

Apache Tomcat/6.0.35 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-18T09:07:13.533

这是一个常见的 MySQL 连接超时，需要配置连接池来检查返回的连接是否活跃，阅读相关文档“[避免数据库空闲超时](http://wiki.cloudbees.com/bin/view/RUN/DatabaseGuide)”：

在连接池设置中使用验证查询：

```
<param name="validationQuery" value="SELECT 1" /> 
```

您还应该考虑使用[数据库绑定](http://developer.cloudbees.com/bin/view/RUN/Resource+Management)，因为不推荐使用 cloudbees-web.xml：

```
bees app:bind -a APP_ID -db DB_ID validationQuery="SELECT 1" 
```

# javascript - jQuery 事件处理程序未在搜索栏上触发

> ID：12747970
> 
> 赞同：1
> 
> 时间：2012-10-05T14:03:12.143
> 
> 标签：javascript, javascript-events, jquery

我正在尝试在我的网站上实现搜索栏。我已经让后端处理正常工作，并且我已经为搜索栏准备了 html 和 css，我剩下要做的就是让我的 javascript 触发搜索执行。这是搜索栏的html：

```
<div id="search_field_container">
    <input type="text" name="search_field" id="search_field" maxlength="100" placeholder="Search by item name or #tag" value="Search by item name or #tag" onclick="value=''" />
    <button id="search" name="search_button">s</button>
</div> 
```

我想要做的是设置 jquery 事件处理程序来触发一个称为搜索的 JavaScript 函数，当用户在文本栏获得焦点时按下回车键或单击搜索按钮时。但是，我似乎绝对无法触发事件处理程序。这是我的javascript：

```
//Search function
$(document).ready(function(){
    console.log("In anonymous function.");
    $("#search").on('click', function(event){
        alert("In click handler");
        search();
    });
});

$("#search_field").bind('keyup', function(event){
    alert("In keyup handler");
    if(event.keyCode == 13){
        alert("In enter handler");
        search();
    }
});

function search(){
    alert("Something happened!");
    var searchTerm = $("#search_field").val();
    alert("You're trying to search for "+searchTerm);
} 
```

目前，当我在文本栏中使用光标按 Enter 或按搜索按钮时，什么都没有发生。我知道这不是阻止执行所有内容的 javascript 错误，因为页面上的所有其他 javascript 都可以正常执行。

我知道搜索功能有效，并且至少`search_field`文本输入上的 id 是正确的，因为如果我将一个添加`onclick`到按钮并通过它调用搜索，它会正确执行并且它总是正确地回显来自文本字段的值。

搜索栏位于一个单独的头文件中，因此我不必将其包含在每个页面的 html 中，但这应该没有什么不同，因为我将文件包含在 PHP 中，所以它应该已经到位在文件甚至到达用户之前。以防万一，我已经尝试过使用`.bind`and`document.ready`如您所见，以及`.on`匿名包装函数，但无济于事。

我没有在控制台或任何东西中收到任何错误消息，它只是默默地失败。我知道这个网站上有很多类似的问题，但我已经尝试了我能找到的所有解决方案来解决其中的十几个问题。如果有人知道问题是什么以及如何解决它，或者甚至只是额外的测试来帮助找出失败的原因，以便我可以缩小搜索范围，那将不胜感激。

编辑：Huangism 使用我的代码创建了这个 JSfiddle，并表明该代码可以正常工作，所以我的网站的上下文肯定有一些东西导致它无法运行。

小提琴 - [http://jsfiddle.net/3m5Mp/](http://jsfiddle.net/3m5Mp/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:31:14.697

我为你的问题添加了一个小提琴。您应该将 #search_field 处理程序移动到准备好的文档中。在小提琴中它可以工作，因为它已经假设文档准备好了。点击在小提琴中对我有用。你在哪个浏览器上测试？

对于输入

```
code= (e.keyCode ? e.keyCode : e.which);
if (code == 13) alert('Enter key was pressed.'); 
```

从另一个问题得到这个

这是一个处理程序的小提琴，所有的处理程序都准备好了，而不是假设文档准备好了

[http://jsfiddle.net/PFcnx/2/](http://jsfiddle.net/PFcnx/2/)

FF好像可以，请在其他浏览器中测试看看是否可以

您的 js 错误可能与末尾的额外逗号有关

```
 $("#grid").masonry({
    itemSelector : '.entry', 
    isFitWidth : 'true',
    isResizable : 'true',   
  }); 
```

删除最后一个 'true' 后的逗号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:19:27.227

改为使用`event.which`。我也不是 100% 确定，但你可能想尝试`.keydown`一下`.keypress`。我正在我的网站上查看一些 JS 代码，我在其中捕获输入按键，我只使用这两个。我记得在一些事情上遇到了麻烦`.keyup`。

# winforms - 如何使用 WinForms RadioButton 控件实现与 WebForms RadioButtonList 相同的功能？

> ID：12747971
> 
> 赞同：1
> 
> 时间：2012-10-05T14:03:14.647
> 
> 标签：winforms, radio-button, radiobuttonlist

我想创建一个用户控件，该控件对多个`RadioButton`控件进行分组，并具有一个 value 属性来指示哪个`RadioButton`被选中。如果不是因为不知道如何为此控件提供急需的数据绑定功能，尤其是对于`Value`属性，我可以很容易地实现这一点。我该怎么办？

# windows-8 - 处理多个屏幕尺寸窗口的字体大小 8 Metro 应用程序

> ID：12747974
> 
> 赞同：3
> 
> 时间：2012-10-05T14:03:33.967
> 
> 标签：windows-8, microsoft-metro

我有一个字体大小为 14 的文本。
在较小的屏幕上它是可见的，但在较大的屏幕上它会变小。
我该如何处理？
在android上，我们可以`SP`根据屏幕调整字体大小。
Windows 8中是否有类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:18:43.970

我假设您正在使用 XAML？

所以，你应该从这样的事情开始：

```
<Page.Resources>
    <x:Double x:Key="MyFontSize" />
    <Style TargetType="TextBlock" x:Name="StandardText">
        <Setter Property="FontSize" Value="{StaticResource MyFontSize}" />
    </Style>
</Page.Resources>

<TextBlock Style="{StaticResource StandardText}">Hello World</TextBlock> 
```

然后在你的代码后面有这样的东西：

```
Double _FontSize;
if (Windows.UI.ViewManagement.ApplicationView.Value
    == Windows.UI.ViewManagement.ApplicationViewState.FullScreenPortrait)
{
    // based on portrait
    if (this.RenderSize.Height > 2000)
        _FontSize = 30;
    if (this.RenderSize.Height > 1000)
        _FontSize = 20;
    else
        _FontSize = 10;
}
else
{
    // based on landscape
    if (this.RenderSize.Height > 1500)
        _FontSize = 30;
    if (this.RenderSize.Height > 1000)
        _FontSize = 20;
    else
        _FontSize = 10;
}
this.Resources["MyFontSize"] = _FontSize; 
```

除非用户更改您的监视器，否则您在应用加载时检测到的任何内容都将始终保留！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T20:00:46.327

我正在对此进行研究。我开始了解 2 种不同的事情。一个是 View Box，另一个是逻辑 DPI。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T18:05:04.360

这将完全符合您的要求。

```
<Viewbox>
    <TextBlock>Hello World</TextBlock>
</Viewbox> 
```

# google-chrome - 向 Chrome 地址栏添加一些文本

> ID：12747977
> 
> 赞同：0
> 
> 时间：2012-10-05T14:03:54.797
> 
> 标签：google-chrome, google-chrome-extension

我正在为 chrome 编写插件。插件应该在地址栏后面添加一些信息。例如一个小的澄清。如何更改地址栏的文本？有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:07:32.797

**不。**如果您更改地址栏中的地址，如果它不是#value ，页面将**被重新加载。**

# objective-c - 是否可以使用核心图以不同于其他颜色的颜色填充 Graph 的某个部分？

> ID：12747979
> 
> 赞同：0
> 
> 时间：2012-10-05T14:03:56.273
> 
> 标签：objective-c, ios, core-plot

我创建了一个散点图并用一些颜色填充了它的区域。现在我只想用不同的颜色填充面积图的特定部分。如何使用核心情节实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T00:30:53.937

你有没有检查过这个问题。[Coreplot 图形沿 y 轴填充颜色](https://stackoverflow.com/questions/12042447/coreplot-graph-fill-color-along-y-axis)。这应该会引导你走向正确的方向。以下是埃里克在那篇文章中的回答。

```
CPTPlotRange *range = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(4.0)
                                               length:CPTDecimalFromDouble(6.0)];
CPTFill *bandFill = [CPTFill fillWithColor:[CPTColor blueColor]];
[yAxis addBackgroundLimitBand:[CPTLimitBand limitBandWithRange:range
                                                          fill:bandFill]]; 
```

# java - 从 Glassfish 服务器上的 FoxPro 数据更新 sql 数据库

> ID：12747982
> 
> 赞同：2
> 
> 时间：2012-10-05T14:04:00.247
> 
> 标签：java, glassfish, javafx

我正在构建一个系统，其中包括 JavaFX 客户端通过 glassfish 应用服务器上的 servlet 从 MS SQL 服务器中提取数据。我还使用来自无法修改的遗留系统的 Visual FoxPro 数据库中的一些数据。我正在使用 JDataConnect 库在 glassfish 服务器上创建一个 JDBC 连接，我可以对它进行常规 SQL 查询以获取我需要的数据。

我的 javafx 客户端包括许多绑定到从数据库检索到的数据的 ObservableLists 的表视图。有一个表是来自 MS SQL 数据和 FoxPro 数据的数据的组合。FoxPro 数据是从不同的系统更新的。由于客户端有很多方法可以对他们呈现给用户的数据进行切片和切块，因此尝试使这些复合数据保持同步是令人望而却步的（并非不可能，但很困难）。在 MS SQL 数据库中的相关表中使用 FoxPro 数据库中的必要值在更改时更新它们会更容易（并且对于客户端的设计更好）。而且由于许多客户端将访问数据，因此让客户端尝试更新数据库是不明智的。

那么，我是否可以编写一个在 glassfish 服务器上运行的应用程序，该应用程序将监视 foxpro 数据库并将必要的更改/数据写入 SQL 服务器数据库？我只是不知道从哪里开始开发这种类型的解决方案，如果确实这是专家的建议。我什至不确定要搜索什么。完全失去了最好的总结。

感谢您的任何帮助或想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T04:32:01.977

You may not be able to modify the legacy FoxPro system, but if the tables are stored in a VFP Database container (i.e. DBC file), you may be able to write stored procedure triggers (insert, update and/or delete) within the VFP database container and have them write directly to the SQL server db. You'd need:

1.  Access to the VFP database container
2.  Connection string to the SQL server database
3.  To write VFP stored procedure triggers for the VFP data you want pushed up to the SQL Server tables.

Once you have the connection sorted out, you can write VFP stored procedures using SQLEXEC() command which sends a "SQL statement to the data source, where the statement is processed" (from VFP help). E.g.

```
m.lnFileHandle = SQLSTRINGCONNECT(m.lcConnectString)
m.lcSQLCommand = "insert into elctablebk.dbo.t_bkcust (custidnum) values ('EdTest')"
m.lnRetVal = SQLEXEC(m.lnFileHandle, m.lcSQLCommand) 
```

The above code gets a filehandle # from connecting to the server, a variable is created with an SQL INSERT command, and the SQL statement is executed on the server using the SQLEXEC() command. If successful, a record is inserted in the example t_bkcust file on the server.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:28:40.907

> 那么，我是否可以编写一个在 glassfish 服务器上运行的应用程序来监视 FoxPro 数据库并将必要的更改/数据写入 SQL 服务器数据库？

理想的情况是 FoxPro 数据库可以将更改推送到您的应用程序。如果 FoxPro 生成数据库更改日志并且您的应用程序可以读取此日志，则可以执行此操作。FoxPro 专家还不足以说这种方法是否可行。

另一个过程是让您的应用程序定期读取 FoxPro 数据库。比如说，每 15 分钟一次。然后由您的应用程序找出不同之处并更新 SQL Server 数据库。SQL Server 数据库将始终落后于 FoxPro 数据库的轮询间隔。您必须确定读取 FoxPro 数据库的频率以满足应用程序的需要。

# javascript - 跨 jQuery 插件共享 Javascriot 对象

> ID：12747987
> 
> 赞同：0
> 
> 时间：2012-10-05T14:04:07.947
> 
> 标签：javascript, jquery, jquery-plugins

目前我遇到了一点逻辑问题。假设我有一个对象，我在其中存储了我的 tileengine 的几个 mapdata 和一个 jQuery 扩展，它计算单击的 tile 的 x 和 y 位置。

```
 $(document).ready(function(){   

        var mapdata = {
            dimensions: {x: 10, y: 10},
            tileSize: 32
        };

        $.fn.getpos = function(type){
            var xpos = $(this)%mapdata.dimensions.y;
            var ypos = Math.floor($(this)/mapdata.dimensions.y);

            else if(type == 'x')
                return xpos;
            else if(type == 'y')
                return ypos;
            else
                return {x: xpos, y:ypos}
        }       

        $('.tile').click(function(){
            console.log($($(this).index('.tile')).getpos());
        });
    }); 
```

这个问题对我来说很清楚。我正在尝试访问在 getpos() 范围内不可用的 mapdata 对象。有没有办法我可以做到这一点？否则，我需要将我的地图数据传递给我要制作的每个扩展。

先感谢您。真诚的，托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:13:15.883

当您定义 getpos() 函数时，它会同时继承范围，因此现在定义的 mapdata 应该对其可见。

在 getpost() 中尝试 console.log($(this))。可能它具有您对数学运算所不期望的价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:07:25.907

当设置一个全局变量时，它被分配给窗口对象。试试`window.mapdata`。

# c# - 问题报告导出到 RDLC 报告中的 Excel

> ID：12747988
> 
> 赞同：4
> 
> 时间：2012-10-05T14:04:22.737
> 
> 标签：c#, reporting-services, report, rdlc

我`RDLC`在我的 .Net 应用程序中添加了一个报告。

数据在具有适当设计的报告中生成。

但是当我尝试将其导出到 Excel 中时，我得到一些列合并在多个单元格中......

如何防止列合并单元格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T20:05:11.430

为避免在导出的 SSRS 报告中合并单元格，您需要验证单元格对齐是否适合 Excel。这[通常可以通过确保页眉和页脚与详细信息区域中的列对齐来解决](http://blog.ambitionit.nl/archive/2009/07/17/extra-and-merged-columns-when-exporting-from-ssrs-to-excel.aspx)。页眉、页脚或其他对象的右侧应与报表列的右侧对齐，左侧也是如此。

[如果您仍然遇到问题，此 MSDN 博客文章包含一些额外的解决方法。](http://blogs.msdn.com/b/chrisbal/archive/2006/07/08/659545.aspx)

# c++ - 窗口/对话框过程可以在命名空间中吗？

> ID：12747990
> 
> 赞同：0
> 
> 时间：2012-10-05T14:04:25.360
> 
> 标签：c++, winapi, namespaces, function-pointers, signature

在我尝试创建一个窗口包装类之前，我了解到你不能将一个对话框过程传递给`CreateDialogParam()`一个类中的那个，因为它是一个类成员会更改签名，因此与`DLGPROC`. 我使用了一种解决方法，其中所有对话框都使用一个全局过程，该过程使用映射从传递给全局过程的窗口句柄中查找类成员过程。它会在映射中找到正确的类指针，并将参数传递给它的过程并返回结果。

现在我正在使用相同的方法，*但是*，在这个项目中，所有内容都将位于命名空间中。这是有效的吗？

```
namespace MyNamespace
{
    INT_PTR MyProc(HWND hwnd, UINT msg, WPARAM wp, LPARAM lp) {
        return 0;
    }

    class MyDlg
    {
    public:
        HWND hwnd;

        MyDlg(void) {
            hwnd = CreateDialogParam(
                GetModuleHandle(NULL),
                MAKEINTRESOURCE(IDD_MYDLG),
                HWND_DESKTOP,
                (DLGPROC)MyProc, // Maybe 'MyNamespace::MyProc'?
                NULL
            );
        }
    };
} 
```

我不确定命名空间是否会像类一样改变函数类型签名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:07:32.907

是的，它确实改变了你处理函数的方式，但在这种情况下你不需要资格，因为你已经在里面了`MyNamespace`。所以：

有效的：

```
namespace MyNamespace
{
    INT_PTR MyProc(HWND hwnd, UINT msg, WPARAM wp, LPARAM lp);
    class MyDlg
    {
        //....
        MyDlg(void) {
            hwnd = CreateDialogParam(
                GetModuleHandle(NULL),
                MAKEINTRESOURCE(IDD_MYDLG),
                HWND_DESKTOP,
                (DLGPROC)MyProc,
                NULL
            );
        }
    };
} 
```

无效的：

```
namespace MyNamespace
{
    INT_PTR MyProc(HWND hwnd, UINT msg, WPARAM wp, LPARAM lp);
}
class MyDlg
{
    //....
    MyDlg(void) {
        hwnd = CreateDialogParam(
            GetModuleHandle(NULL),
            MAKEINTRESOURCE(IDD_MYDLG),
            HWND_DESKTOP,
            (DLGPROC)MyProc, // need to use 'MyNamespace::MyProc'?
            NULL
        );
    }
}; 
```