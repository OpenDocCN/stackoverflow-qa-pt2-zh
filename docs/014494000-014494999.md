# StackOverflow 问答 14494000-14494999

# c - CPU缓存对速度的影响

> ID：14494000
> 
> 赞同：7
> 
> 时间：2013-01-24T04:31:38.160
> 
> 标签：c, caching, optimization, pthreads, cpu-architecture

我刚刚写了一个程序来测试CPU缓存对速度性能的影响。

```
void* foo(void* ptr)
{
    int* r = (int*) ptr;

    for (int i = (r - s); i < N; i += NUM_THREADS)
        *r += num[i];        
    return NULL;
}

void* bar(void* ptr)
{
    int* r = (int*) ptr;
    int idx = r - s;
    int block = N/NUM_THREADS;
    int start = idx * block, end = start + block;

    for (int i = start; i < end; ++i)
        *r += num[i];        
    return NULL;
} 
```

基本上，`foo()`进行隔行扫描，另一方面，`bar()`逐块扫描阵列。

测试结果表明`bar()`要快得多：

```
gcc ping-pong.c -std=gnu99 -lpthread -O2  ; ./a.out
1.077037s
0.395525s 
```

那么如何解释这个结果呢？

完整的源代码在：[https ://gist.github.com/4617935](https://gist.github.com/4617935)

更新：删除所有 if 语句

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T05:57:39.140

事实证明，它一点也不神秘。

我尝试使用 valgrind 来分析缓存未命中，结果如下：

```
$ valgrind --tool=cachegrind --cachegrind-out-file=profile ./a.out
....
$ cg_annotate profile --auto=yes --show=D1mr --context=1
....
-- line 63 ----------------------------------------
    .  void* foo(void* ptr)
     0  {
     0      int* r = (int*) ptr;
     .  
     0      for (int i = (r - s); i < N; i += NUM_THREADS)
16,388          *r += num[i];
     0      return NULL;
     0  }
     .  
-- line 71 ----------------------------------------

-- line 72 ----------------------------------------
     .  void* bar(void* ptr)
     0  {
     0      int* r = (int*) ptr;
     0      int idx = r - s;
     0      int block = N/NUM_THREADS;
     0      int start = idx * block, end = start + block;
     .  
     0      for (int i = start; i < end; ++i)
 4,098          *r += num[i];
     0      return NULL;
     0  } 
```

`foo()`如您所见，L1 缓存读取未命中数是 的 4 倍`bar`，而 4 只是`NUM_THREADS`.

正如@Mysticial 所回答的那样

> 顺序内存访问几乎总是会胜过非顺序访问。

由于更多的非顺序内存访问意味着更多的缓存未命中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:41:13.987

顺序访问快得多的原因不是由于缓存结构，而是由于硬件预取（这是相关的，但不一样）。有几个“流式”预取器可以识别流或基于步幅的访问模式，并提前为您预取数据。

一些示例（英特尔 CPU，但类似的原理也常用于其他 CPU）： http: [//software.intel.com/en-us/articles/optimizing-application-performance-on-intel-coret-microarchitecture-using -硬件实现的预取器](http://software.intel.com/en-us/articles/optimizing-application-performance-on-intel-coret-microarchitecture-using-hardware-implemented-prefetchers)

这里建议的 valgrind 分析证明了这一点，我建议也查看 L2/L3 - 在大型数据集上，有用的预取更有可能驻留在那里（经验法则 - 你离核心越远，时间和可用于积极预取的存储）。

# apache - 从子域重定向到目录时图像无法正确加载

> ID：14494009
> 
> 赞同：0
> 
> 时间：2013-01-24T04:32:36.907
> 
> 标签：apache, .htaccess, mod-rewrite

基本上，我有一个`/website.com/`包含`index.php`.

通常发生的情况是我有一个 htaccess 文件将 URL 重定向到索引，所以像

```
domain.com/api/ 
```

会加载

```
domain.com/index.php?uri=api/ 
```

但是现在说，我不想使用子目录，而是想使用子域，例如：

```
api.domain.com 
```

会运行：

```
domain.com/index.php?uri=api/ 
```

* * *

我目前的方法*几乎*奏效了。我的 htaccess 文件如下所示：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{HTTP_HOST} ^api
RewriteRule ^(.*)$ index.php?uri=api/$1 [L,QSA]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?uri=$1 [L,QSA] 
```

这适用于 URL 部分。但是当我尝试加载图像时问题就来了。

基本上，它不是从基本目录加载，而是将目录附加到 URL 上。

因此，当我在其上请求图像时，`api.domain.com/v1/`它会尝试从

```
domain.com/v1/image.png 
```

而不是

```
domain.com/image.png 
```

* * *

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:56:06.923

我想我找到的解决方案是在包含图像（在我的 CSS 中）时使用绝对 URL 而不是相对 URL。

所以而不是

```
background:url(background.png); 
```

我用了

```
background:url(http://domain.com/background.png); 
```

* * *

不是我理想的解决方案，但它是一种解决方法。如果有人有更好的方法来解决我的问题，我会很乐意使用。

# facebook - facebook注销网址不起作用

> ID：14494010
> 
> 赞同：5
> 
> 时间：2013-01-24T04:32:42.443
> 
> 标签：facebook

[https://www.facebook.com/logout.php?next="mypage"&access_token="mytoken](https://www.facebook.com/logout.php?next=) "

当我从浏览器导航到 url 上方时，浏览器不会重定向到我的重定向 url，但是

重定向到 facebook.com/home（它甚至不会注销用户）。

我不确定我在做什么错..

对于参数“next”，我应该解决哪个 url？带有 Facebook 登录或应用程序域的网站？

并且...此重定向网址应编码为 www%3Fmysite%3Fcom ??

我尝试了所有这些，但仍然无法注销用户.. 有人尝试使用 url 注销吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T04:52:02.917

没关系。我的网址是错误的。

它应该是`next=http://www.mysite.com/&access_token=token`

# java - 修复这些布尔值的简单方法是什么？

> ID：14494013
> 
> 赞同：0
> 
> 时间：2013-01-24T04:32:45.797
> 
> 标签：java, boolean, logic

```
boolean a = true    
boolean b = true

<random code in here, booleans may or may not change>

if ((!a || !b) || (!a && !b)){
    doSomethingElse();
} 
```

这段代码对我不起作用，这个问题的简单解决方案是什么？

明确一点：if 语句应该起作用： **如果至少一个布尔值是假的**

3个案例：

```
a = False b = True
a = True b = False
a = False b = False 
```

我可以在一个很长的 if 语句中做到这一点，但我只是想知道是否有一种简单的方法来实现它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T04:35:44.733

这应该适合你：

```
if( !a || !b ) {
  doSomething();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T04:37:07.853

```
if(!(a && b)) {  
  ....Then do something 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T04:51:54.370

（时间太长，逻辑崩溃）

首先应用[De Morgan's](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)得到`!`外部：（虽然在这个阶段可以应用其他布尔代数来跳过几个步骤，但我喜欢展示这一点。）

也就是说，给定：

1.  `(!a || !b)`（由 DM）->`!(a && b)`和
2.  `(!a && !b)`（由 DM）-> `!(a || b)`。

然后`(!a || !b) || (!a && !b)`（通过替换） -> `!(a && b) || !(a || b)`。

再次申请 DM：

```
!( (a && b) && (a || b) ) 
```

现在使用[“^ 在 v 上的分布”](http://en.wikipedia.org/wiki/Boolean_algebra_%28logic%29#Laws)（`x = a && b; y = a; z = b`）：

```
!( ((a && b) && a) || ((a && b) && b) ) 
```

并通过“关联性”和“交流性”：

```
!( (a && a && b) || (a && b && b) ) 
```

通过“幂等性”：

```
!( (a && b) || (a && b) )
!( (a && b) ) 
```

简化：

```
!(a && b) 
```

由 DM 返回：

```
!a || !b 
```

当然，一个简单的[真值表](http://en.wikipedia.org/wiki/Truth_table)可能更容易显示这一点..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T07:01:51.177

您的 if 语句将起作用，只需将您的 if 语句更改为：

**if (!a || !b) { } 正如您在上面看到的，当任何一个布尔值为 false 时，它​​将起作用。**

*祝一切顺利。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T04:35:19.197

您提出的解决方案可以简化为...

```
if (!a || !b) { .... } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-24T04:36:23.480

通过检查一个是假的还是两个都是假的，你可以确保两者都是真的，或者`a && b`。的反面`a && b`是`!a || !b`：

```
if (!a || !b) {
    doSomethingElse();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-24T04:40:57.320

```
if (!(a && b)) {
    doSomethingElse();
} 
```

# python - 在 Windows 7 机器上安装 PyMySQL

> ID：14494018
> 
> 赞同：5
> 
> 时间：2013-01-24T04:33:31.197
> 
> 标签：python, python-3.x, mysql-python, pymysql

我不是 python 用户，虽然我使用过 MySQL，但我不是专家。另外，我主要是 Windows 用户，对运行命令行脚本知之甚少。所以这可能是一个愚蠢的问题，但我还是想问......

（顺便说一句，我的目的是安装“棒球棒”）

我安装了 Python（Windows 7 机器上的 3.3 版）。

接下来它说安装pymysql。所以我从[https://github.com/petehunt/PyMySQL/下载了 .zip 文件](https://github.com/petehunt/PyMySQL/)

自述文件说“只需从本地目录运行 build-py3k.sh 脚本。它将在 ./py3k 目录中构建一个工作包。” 我完全不知道这意味着什么。我该如何运行？我尝试在 Python 命令行界面中输入它，但它只是给了我一个错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T14:34:28.753

[http://www.cc.gatech.edu/classes/AY2012/cs2316_fall/presentations/HOWTO_install_pymysql_windows.pdf](http://www.cc.gatech.edu/classes/AY2012/cs2316_fall/presentations/HOWTO_install_pymysql_windows.pdf) 有一些非常清晰的说明，并在运行 python 3.3 zip 的 Windows 8 上为我工作： [http://www.summet。 com/dmsi/html/codesamples/pymysql3.zip](http://www.summet.com/dmsi/html/codesamples/pymysql3.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-03T07:11:19.543

**Python 用 pymysql 连接 xampp mysql windows：**

步骤1：

运行命令提示符 D:\python-3.6.2\Scripts> **pip install pymysql**

第2步：

```
#!D:/python-3.6.2/python.exe 
print ("Content-Type: text/html\n")
import pymysql
conn = pymysql.connect(host='localhost', port=3306, user='root', passwd='', db='python_mysql')
cur = conn.cursor()
cur.execute("SELECT * FROM authors")
print(cur.description)
print(" Test")
for row in cur:
    print(row)
cur.close()
conn.close() 
```

将文件保存为 htdocs/PythonProject 中的 testconn.py 并打开[http://localhost/PythonProject](http://localhost/PythonProject) \test.py

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-21T07:27:17.193

win+r 然后输入cmd 然后在dos中输入命令：pip install pyMySQL 但是如果你的电脑没有安装pip，请参考这个页面[https://pip.pypa.io/en/stable/](https://pip.pypa.io/en/stable/)

# ssl - Online Credit Card Processing

> ID：14494019
> 
> 赞同：3
> 
> 时间：2013-01-24T04:33:41.977
> 
> 标签：ssl, credit-card, authorize.net

I plan on using a service such as Authorize.net to process user's credit cards. Which brings two questions.

1.  Will I need SSL on the payment page even though I will be letting the third part handle most of the processing?
2.  Will I need to get the user's address? And if so, will an apartment number be required? (If they have an apartment, of course)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T04:39:04.090

1.  Yes. The processing will most likely be done through some API that you will call. So getting the information from your users from the browser to your server will require encryption (SSL)

2.  That depends on your set up and what Authorize.net will require.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T09:50:59.697

You DO need to use SSL for your portion of the transaction - you are not PCI-DSS compliant if you do not.

If you are asking about apartment number because you intend to pass it to A.net for AVS anti-fraud checking, AVS only checks the part of the address line before the first space eg: 123 Maple St - only the 123 is checked. The zip is the only other part of the address checked, so there is no reason to worry about apt number. Collect it for your own complete records of course, but it will not affect and AVS check which is the only reeason to give it to A.net in the auth transaction.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T14:00:35.480

1.  It depends on which API you use. If you use any of the hosted APIs (SIM, hosted CIM) you will *not* need an SSL certificate as you will never be handling any sensitive information on your website.

    If you use AIM, ARB, CIM, or DPM you will need an SSL certificate as you will be collecting sensitive information which is covered by the PCI DSS standard.

2.  Yes and no. You are not *required* to collect it as it is not needed to process a credit card. However, without it you cannot perform Address Verification (AVS) which is a good tool for helping to reduce fraud. It also means your transactions will be processed at a higher rate which is not a good thing.

# sql - 每当在 sql server 中的该行上发生更新时，自动递增列值

> ID：14494025
> 
> 赞同：0
> 
> 时间：2013-01-24T04:34:33.163
> 
> 标签：sql, triggers

我想维护一个列，该列将存储一行被修改的次数。因此，每当更新行时，我都想增加列值。我想我必须为此使用触发器。但我正在寻找替代解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T04:41:03.410

恕我直言触发器是要走的路，但如果您确定您控制了所有更新，那么您可以像这样简单地执行以下操作：

```
UPDATE mytable 
   SET somefield='newvalue', 
       update_count = update_count+1 
   WHERE id=n 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T04:43:11.240

```
CREATE TRIGGER CountRows 
    ON TestCount 
    after Update
AS 
Update TestCount  set Cnt = Cnt +1 where ID in (select ID from inserted)
GO 
```

每当一行中的某个值发生变化时，grigger 就会将 +1 添加到同一行的 Cnt 列值。

# angularjs - 如何让我的指令仅在 onchange 时触发？

> ID：14494026
> 
> 赞同：0
> 
> 时间：2013-01-24T04:34:37.203
> 
> 标签：angularjs

我已经定义了一个这样的指令：

```
angular.module('MyModule', [])
    .directive('datePicker', function($filter) {
        return {
            require: 'ngModel',
            link: function(scope, elem, attrs, ctrl) {
                ctrl.$formatters.unshift(function(modelValue) {
                    console.log('formatting',modelValue,scope,elem,attrs,ctrl);
                    return $filter('date')(modelValue, 'MM/dd/yyyy');
                });
                ctrl.$parsers.unshift(function(viewValue) {
                    console.log('parsing',viewValue);
                    var date = new Date(viewValue);
                    return isNaN(date) ? '' : date;
                });
            }
        }
    }); 
```

每次我在我的文本框中键入一个键时，解析器似乎都会触发 - 默认事件到底是什么，是它`keyup`，还是`input`？以及如何将其更改为仅开火`onchange`？真的没有必要再经常开火了。

此外，我实际上是在使用 jQuery UI 的 datepicker 操作这个输入的内容。单击日历时，它似乎不会触发导致模型更新/解析器被触发的适当事件。我*想* [我可以强制触发一个事件，](https://stackoverflow.com/a/6471992/65387)但我需要知道是哪一个。

* * *

尝试使用`scope.$apply()`，但这似乎无济于事：

```
.directive('datepicker', function($filter) {
    return {
        require: 'ngModel',
        link: function(scope, elem, attrs, ctrl) {
            $(elem).datepicker({
                onSelect: function(dateText, inst) {
                    console.log(dateText, inst);
                    scope.$apply();
                }
            });
            ctrl.$formatters.unshift(function(modelValue) {
                console.log('formatting',modelValue);
                return $filter('date')(modelValue, attrs.datePicker || 'MM/dd/yyyy');
            });
            ctrl.$parsers.unshift(function(viewValue) {
                console.log('parsing',viewValue);
                return new Date(viewValue);
            });
        }
    }
}) 
```

* * *

我不认为[这里给出](https://stackoverflow.com/a/11873839/65387)的解决方案对我有用，因为（a）我想使用 datepicker 属性值来选择日期格式或其他选项，但更重要的是，（b）它似乎将一个字符串传回当我想要一个实际的日期对象时的模型......所以必须完成某种形式的解析并将其应用于`ng-model`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T10:10:46.280

在这里，我创建了一个 mo-change-proxy 指令，它与 ng-model 一起使用，它仅在更改时更新代理变量。

在这个演示中，我什至包含了改进的日期输入指令。看一看。
**演示：** [http ://plnkr.co/edit/DBs4jX9alyCZXt3LaLnF?p=preview](http://plnkr.co/edit/DBs4jX9alyCZXt3LaLnF?p=preview)

```
angModule.directive('moChangeProxy', function ($parse) {
    return {
        require:'^ngModel',
        restrict:'A',
        link:function (scope, elm, attrs, ctrl) {
            var proxyExp = attrs.moChangeProxy;
            var modelExp = attrs.ngModel;
            scope.$watch(proxyExp, function (nVal) {
                if (nVal != ctrl.$modelValue)
                    $parse(modelExp).assign(scope, nVal);
            });
            elm.bind('blur', function () {
                var proxyVal = scope.$eval(proxyExp);
                if(ctrl.$modelValue != proxyVal) {
                    scope.$apply(function(){
                        $parse(proxyExp).assign(scope, ctrl.$modelValue);
                    });
                }
            });
        }
    };
}); 
```

# android - Zbar 集成到 Android 应用程序中

> ID：14494034
> 
> 赞同：9
> 
> 时间：2013-01-24T04:35:12.187
> 
> 标签：android, import, zbar

我正在使用 Android ADT Bundle 进行开发工作。在线阅读多个指南后，我已将包 com.dm.zbar.android.scanner 添加到我的项目中。我在包中包含了 CameraPreview.java、ZBarConstants.java 和 ZBarScannerActivity.java 文件。尽管如此，ScanActivity.java 类中的 ZBAR_SCANNER_REQUEST 变量（由我创建，但使用 zbar 方法）无法解析为变量。接受除此变量之外的所有内容。知道为什么会这样吗？注意：我的 libs 文件夹包含这里的所有内容：

[https://github.com/DushyanthMaguluru/ZBarScanner/tree/master/ZBarScannerLibrary/libs](https://github.com/DushyanthMaguluru/ZBarScanner/tree/master/ZBarScannerLibrary/libs)

并且 zbar.jar 包含在构建路径中。

**扫描活动：**

```
package com.xx.xxx;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.view.Menu;
import android.view.View;
import android.widget.Toast;
import com.dm.zbar.android.scanner.ZBarConstants;
import com.dm.zbar.android.scanner.ZBarScannerActivity;
import net.sourceforge.zbar.Symbol;

public class ScanActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_scan);
}

public void launchScanner(View v) {
    if (isCameraAvailable()) {
        Intent intent = new Intent(this, ZBarScannerActivity.class);
        startActivityForResult(intent, ZBAR_SCANNER_REQUEST);
    } else {
        Toast.makeText(this, "Rear Facing Camera Unavailable", Toast.LENGTH_SHORT).show();
    }
}

public void launchQRScanner(View v) {
    if (isCameraAvailable()) {
        Intent intent = new Intent(this, ZBarScannerActivity.class);
        intent.putExtra(ZBarConstants.SCAN_MODES, new int[]{Symbol.QRCODE});
        startActivityForResult(intent, ZBAR_SCANNER_REQUEST);
    } else {
        Toast.makeText(this, "Rear Facing Camera Unavailable", Toast.LENGTH_SHORT).show();
    }
}

public boolean isCameraAvailable() {
    PackageManager pm = getPackageManager();
    return pm.hasSystemFeature(PackageManager.FEATURE_CAMERA);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {
        case ZBAR_SCANNER_REQUEST:
        case ZBAR_QR_SCANNER_REQUEST:
            if (resultCode == RESULT_OK) {
                Toast.makeText(this, "Scan Result = " + data.getStringExtra(ZBarConstants.SCAN_RESULT), Toast.LENGTH_SHORT).show();
            }
            break;
    }
}

} 
```

以防万一： **AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.xx.xxx"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.CAMERA" />

<uses-feature
    android:name="android.hardware.camera"
    android:required="false" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="xx"
    android:theme="@style/AppTheme" >
    <activity android:name="com.xx.xxx.MainActivity" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="com.xx.xxx.WvActivity" />
    <activity android:name="com.xx.xxx.ScanActivity" />
    <activity
        android:name="com.dm.zbar.android.scanner.ZBarScannerActivity"
        android:screenOrientation="landscape" />
</application> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-24T04:44:13.607

我检查了**ZBar**库示例。你犯了一个错误。

发生此错误是因为您没有在活动中声明这两个变量

```
private static final int ZBAR_SCANNER_REQUEST = 0;
private static final int ZBAR_QR_SCANNER_REQUEST = 1; 
```

您需要在 onCreate(..) 方法上方声明这些变量。

请参阅 ZBar[示例](https://github.com/DushyanthMaguluru/ZBarScanner/blob/master/examples/ZBarScannerDemo/src/com/dm/zbar/android/examples/MainActivity.java)。

# eclipse-rcp - Eclipse RCP：如何在首选项对话框中获取当前选定的节点

> ID：14494044
> 
> 赞同：0
> 
> 时间：2013-01-24T04:36:30.990
> 
> 标签：eclipse-rcp

我在我的应用程序中添加了一个新的首选项页面。并在用户按下确定按钮时执行一些任务。问题是我的代码正在执行，甚至在首选项对话框中选择了其他节点（首选项页面）。现在我需要检查当前选择的节点是否是我的首选项页面，然后再在确定按钮中执行我的代码。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T06:59:47.600

很抱歉，但我认为您的问题开始得早了一点。如果没有太多的钩子和角落，你应该只在必要时被调用，所以对我来说这听起来有点奇怪。

我通常可以重写 performOk 或在某些情况下 performApply 没有这些问题。 [看看文档，以防万一](http://help.eclipse.org/juno/topic/org.eclipse.platform.doc.isv/guide/preferences_prefs.htm)

# python - 如何在 MongoDB 中进行高级列表建模和匹配

> ID：14494048
> 
> 赞同：0
> 
> 时间：2013-01-24T04:36:57.707
> 
> 标签：python, mongodb, data-modeling, database

我正在构建一个大学课程搜索应用程序，并且我的数据包含我需要匹配的先决条件字段。

它看起来像这样：“任何英语、化学、方法或专业数学”

如果我用原始的 Python 结构来做，我会做一个列表，第一级是 AND，第二级列表是 OR，在这种情况下： `[["English", "Literature", "Language"],["Chemistry"],["Methods","Specialist Maths"]]` 这就是我所说的这种情况需要英语 AND 化学 AND（方法或专家）。

然后使用 Python，我只需对其进行迭代并检查条件是否满足。

那么，有了这样的数据和一堆输入主题，我如何使用 MongoDB 查询来检查课程是否合适？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:08:44.290

对于普通查询运算符而言，您要执行的操作太复杂了。因此，您需要使用可以在查询中执行任意 JavaScript的[$where 运算符。](http://docs.mongodb.org/manual/reference/operator/where/)它带有警告和限制，因此如果需要检查大量匹配排列，它可能会非常慢。

一个可能有帮助的建议是创建一个单独的集合，其中文档是您的个人或先决条件列表。该集合将代表所有类的所有先决条件。例如：

```
{_id: ObjectId("50fe0f437f774e8013000001"), 
    prereq: ["English", "Literature", "Language"]},
{_id: ObjectId("50fe0f437f774e8013000002"), 
    prereq: ["Chemistry"]},
{_id: ObjectId("50fe0f437f774e8013000003"), 
    prereq: ["Methods","Specialist Maths"]},
... 
```

课程本身将指向先决条件的 ObjectId，而不是实际值。查询将分两步进行。首先找到与输入主题匹配的所有先决条件。

```
db.preReqCollection.find({prereq: {$in: inputSubjectList}) 
==> matchingPreReqList (the List of ObjectIds from preReqCollection met by inputSubjectList) 
```

然后使用更简单的`$where operator`查询来检查课程先决条件是否在`matchingPreReqList`.

# android - 如何像 InstaWeather Android 应用程序那样拖放位图

> ID：14494051
> 
> 赞同：-4
> 
> 时间：2013-01-24T04:37:14.497
> 
> 标签：android, bitmap, touch

我想像 InstaWeather Android 应用一样拖放位图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:51:12.247

您可以查看以下链接以实现 onLongTouch Drag 事件。还可以[在此处查看 Drag & Drop 触摸事件的开发人员指南](http://developer.android.com/guide/topics/ui/drag-drop.html)

1)[链接 1](http://blahti.wordpress.com/2011/01/17/moving-views-part-2/)
2)[链接 2](https://docs.google.com/file/d/0B0wYSnCBkoR6a1VFdy1VdmZSU2E1eDhuUXVQYnpEQQ/edit?pli=1)
3)[链接 3](http://www.javacodegeeks.com/2011/12/android-drag-and-drop-tutorial.html)
4)[链接 4](https://capdroid.wordpress.com/)

我希望它会帮助你。

谢谢。

# liferay - Portlets 大小处理

> ID：14494062
> 
> 赞同：2
> 
> 时间：2013-01-24T04:38:41.220
> 
> 标签：liferay, liferay-6

我正在使用 Liferay 6.1.1。

我通过pluggin sdk 6.1.1 在eclipse 中创建了一个portlet。

现在我想改变portlet 的大小。

我怎样才能改变它？

帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:53:10.370

在大多数情况下，通过页面的布局（以管理员身份登录、管理、页面布局）。让您的 portlet 视觉效果/样式具有通用性是一个很好的做法，这样它就可以适应托管页面的主题和布局，以使其可用于以后的项目和不同的门户配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:56:21.427

通常它是通过主题的 css 和布局模板完成的。但是您可以在您的 portlet 中使用一些 css。此外，portlet 可能已被最大化和最小化，因此不要在您的 portlet 中占用过多的 css。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T09:53:29.470

您可以为 portlet 实例添加自己的 css：

> 选项->外观->高级样式

只为这个 portlet 添加一个 CSS 规则。

例子：

```
#portlet_56_INSTANCE_ENG7BaroFy5f{
    width: 800px;
    height: 440px;
} 
```

# extjs - extjs 中的页面导航

> ID：14494063
> 
> 赞同：0
> 
> 时间：2013-01-24T04:38:41.027
> 
> 标签：extjs

我是 extjs 的初学者。我正在做一个应用程序，它有多个页面，一次显示一个页面。从按钮中的初始页面单击我想显示下一页。我可以在卡片布局中做到这一点.如何在其他布局中做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:45:51.997

卡片布局可帮助您交换页面（使一个页面可见，而其所有兄弟页面不可见）。这意味着在其他布局中，您必须手动完成。

你有理由使用不同的布局吗？

# android-emulator - 如何解决 java.net.SocketException Permission Denied 错误？

> ID：14494070
> 
> 赞同：1
> 
> 时间：2013-01-24T04:39:09.797
> 
> 标签：android-emulator

我已经在 andoird 清单页面中包含了 Internet 权限，但错误似乎仍然存在。我还在类似的代码中收到了一个未知的主机例外。请引导我完成！泰！:)

```
package name.id;

import android.app.Activity;
import android.content.DialogInterface.OnClickListener;
import android.os.Bundle;
import org.ksoap2.*;
import org.ksoap2.serialization.*;
import org.ksoap2.transport.*;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class FirstPage extends Activity implements android.view.View.OnClickListener
{
    /** Called when the activity is first created. */

  TextView tv;
  Button bu;
  EditText et;

  private static final String SOAP_ACTION="http://lthed.com/GetFullNamefromUserID";
    private static final String METHOD_NAME="GetFullNamefromUserID";
    private static final String NAMESPACE="http://lthed.com";
    private static final String URL="http://vpwdvws09/services/DirectoryService.asmx";

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        et=(EditText) findViewById(R.id.editText1);
        tv=(TextView) findViewById(R.id.textView2);
        bu=(Button) findViewById(R.id.button1);
        bu.setOnClickListener((android.view.View.OnClickListener) this);
        tv.setText("");
    }

    public void onClick(View v)
    {           
        // creating the soap request and all its paramaters
        SoapObject request= new SoapObject(NAMESPACE, METHOD_NAME);
        //request.addProperty("ID","89385815");// hardcoding some random value
        //we can also take in a value in a var and pass it there

        //set soap envelope,set to dotnet and set output
        SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        soapEnvelope.dotNet=true;
        soapEnvelope.setOutputSoapObject(request);

        HttpTransportSE obj = new HttpTransportSE(URL);
        //to make call to server
        try
        {
            obj.call(SOAP_ACTION,soapEnvelope);// in out parameter
            SoapPrimitive resultString=(SoapPrimitive)soapEnvelope.getResponse();
            //soapObject or soapString
            tv.setText("Status : " + resultString);
        }
        catch(Exception e)
        {
            tv.setText("Error : " + e.toString());
            //e.printStackTrace();
        }

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T04:57:08.543

您是否在清单中添加了 Internet 权限：

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T05:32:24.367

由于 URL 中的错误而引发错误。URL 需要我的 IP 地址才能正常运行，而不是我提供的 URL，因为 Web 服务无法理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-03T09:32:32.733

根据您使用的 KSOAP2 版本，错误可能会有所不同。

它推荐使用 KSOAP2 v3+ lib。

只需使用以下代码覆盖...

StrictMode.ThreadPolicy 策略 = new StrictMode.ThreadPolicy.Builder().permitAll().build(); StrictMode.setThreadPolicy(policy);

并且还使用...

# html - 选择选项打开唯一的文本框

> ID：14494075
> 
> 赞同：0
> 
> 时间：2013-01-24T04:39:42.693
> 
> 标签：html, forms, select, textbox

我想要两个不同的选择选项，比如说，电子邮件或电话号码等选项，当您选择电子邮件选项时，会在其下方打开一个文本框，显示“输入电子邮件”，或者当您选择电话号码选项时文本框在其下方打开，显示“输入电话号码：”。

附言。我不想同时显示两个文本框，我希望他们选择要填充的文本框。如果您有更好的方法，请告诉我您的想法。

```
<form action="order-step4.php" method="post"> 

    Please fill out these fields:<br /> 
    Recipient: <input type="text" name="recipient" /><br />

    Recipient Email: <input type="text" name="remail" /><br /> 

    Recipient Cell: <input type="text" name="rsms" /><br /> 

    Your Message :<input type="text" name="message" /><br /> 

    <input type="submit"> 
 </form> 
```

谢谢你，乍得。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:59:51.003

有一个用于选择电话或电子邮件的下拉选项，并在下拉更改时显示/隐藏相应的输入文本框。

```
<select id="myChoice">
  <option value="email">Email</option>
  <option value="phone">Phone</option>
</select> 
```

这是功能

```
$('#myChoice').change(function() {
       if ($(this).val() === 'email') {
           //show email
           //hide phone

        } else {
            //hide email
           //show phone
        }
}); 
```

# javascript - 删除插入的 HTML 代码

> ID：14494077
> 
> 赞同：0
> 
> 时间：2013-01-24T04:39:56.417
> 
> 标签：javascript, jquery, html

我想知道如何删除选择某个单选按钮后出现的代码。我已经让它生成了，但是当我移除它时，整个身体都消失了，所以我只需要移除片段。

```
<head>
    <style>
        input, label {
            line-height: 1.5em;
        }
    </style>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>

<body>
    <form>
        <div>
            <input type="radio" name="modtype" value="My Mods" id="mymods">
            <label for="orange">My Mods</label>
        </div>
        <div>
            <input type="radio" name="modtype" value="Group Mods" id="groupmods">
            <label for="apple">Group Mods</label>
        </div>
        <div>
            <input type="radio" name="modtype" value="Individual Mods" id="individualmods">
            <label for="banana">Individual Mods</label>
        </div>
        <div id="modtype"></div>
    </form>
    <script>
        $("input").on("click", function() {
            $("#modtype").html($("input:checked").val() + " is selected! - Now Choose Mod! :)");
        });
    </script>
    <script>
        var appended = $('<div />').text('YOYOY');
        var fragment = create('<div>Hello!</div><p>...</p>');

        appended.id = 'appended';

        $('input:radio[name="modtype"]').change(

        function() {
            if ($(this).val() == 'My Mods') {
                document.body.insertBefore(fragment, document.body.childNodes[0]);
            } else {
                document.body.remove(fragment);
            }
        });

        function create(htmlStr) {
var frag = document.createDocumentFragment(),
    temp = document.createElement('div');
temp.innerHTML = htmlStr;
while (temp.firstChild) {
    frag.appendChild(temp.firstChild);
}
return frag;
}
    </script>
</body>

 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:48:27.340

你没有`.remove()`正确使用。您需要找到您的片段，将其放入 jQuery 对象中，然后调用`.remove()`该 jQuery 对象。

假设只有一个片段具有您给它的 id，它可以像这样简单：

```
$("#appended").remove(); 
```

删除你给的片段`id="appended"`。

或者，如果您仍然有作为要删除的根的 DOM 元素，您可以这样做：

```
$(fragment).remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:48:34.117

如果这是您要问的，这就是我删除某些元素的方式——您需要知道要删除的 div 的名称。请参阅下面的代码，并更改为您的值

```
 var removeDiv= document.getElementById("your-div-id");
                if (typeof removeDiv !== "undefined"){
                    if (removeDiv !==  null){                    
                        document.getElementById('your-root-div-id').removeChild(removeDiv);
                    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T04:51:00.173

这将修复你的代码，我在这里测试过：http: [//jsfiddle.net/gJk7J/](http://jsfiddle.net/gJk7J/)

只需更改： `document.body.remove(fragment);` 至： `if(fragment.parentNode)fragment.parentNode.remove(fragment);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T05:34:49.057

1.

当你这样做时：

```
document.body.insertBefore(fragment, document.body.childNodes[0]); 
```

片段子节点中的元素变成了document.body的子节点。因此片段不再有子节点。您必须找到您创建的元素（jQuery 或 getElementxxxxxxs）并删除它们。

2.

您要从正文中删除元素的方式不正确。

```
document.body.remove(fragment); 
```

你可以这样做：

```
document.body.removeChild(someChildNode); // dom api
$([elem/selector]).remove();              // jQuery 
```

# java - 获取存储过程结果的行数

> ID：14494078
> 
> 赞同：1
> 
> 时间：2013-01-24T04:39:57.183
> 
> 标签：java, sql-server, jdbc

使用`jdbcTemplate`，您将如何获得存储过程结果的行数？

喜欢`queryForInt(...)`？不获取存储过程的结果。

例子，

只是计数

12345

# wordpress - Wordpress：如何从 query_var 获取 posts_per_page？

> ID：14494079
> 
> 赞同：1
> 
> 时间：2013-01-24T04:40:00.763
> 
> 标签：wordpress

我正在尝试查找每页的帖子。

当我 var_dump 时`$wp_query->query_vars`，我可以看到`['posts_per_page']=>int(4)`，但是当我尝试调用 posts_per_page 时，我得到 NULL。

这是我的代码：

```
$test = $wp_query->query_vars;  
var_dump($test->posts_per_page); 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T05:52:46.747

它是`$wp_query->query_vars['posts_per_page'];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:33:31.123

NVM，我不得不调用`$wp_query->post_count`而不是posts_per_page。

# vbscript - 使用 VBScript 将插入符号传递给命令行

> ID：14494081
> 
> 赞同：2
> 
> 时间：2013-01-24T04:40:21.170
> 
> 标签：vbscript, cmd, caret

很难弄清楚这一点。我有一个询问用户名和密码的 vbscript。然后脚本运行 PSExec.exe 将这些传递到命令行，如下所示。

```
 strUser = Inputbox("Username:","Username")
    strPassword = Inputbox("Password:","Password")
    Set objShell = WScript.CreateObject("WScript.Shell")
    objShell.Run "%comspec% /K psexec.exe \\workstation -u " & struser _
         & " -p " & strPassword & " -d calc.exe", 1, false 
```

如果密码中没有插入符号，这可以正常工作。但是，如果它确实有一个，例如如果密码是“Pass)(*&^%$#@!”，我会从 psexec 收到以下错误。

```
'%$#@!' is not recognized as an internal or external command,
operable program or batch file. 
```

插入符号被命令行读取为空格，因此它认为它正在尝试运行此命令。

```
psexec.exe \\workstation64 -u User -p Pass)(*& %$#@! -d Calc.exe 
```

如您所见，有一个空格而不是插入符号，因此 psexec 看到 %$#@! 作为命令。

我已经看到一个使用批处理文件时传递它的示例，但在这种情况下它不起作用。它说像这样添加一个额外的 ^ ^^ 可以在 bat 文件中使用。

如何将插入符号传递给命令行？？？？

更新......

我今天在工作中为此工作了大约 45 分钟，但无法正常工作。我尝试的第一件事是在密码中添加引号，但它仍然不起作用。我刚刚在家里测试了它，它运行良好....... 工作的操作系统是 Windows XP，我在家里运行的是 Windows 7。我会在早上再试一次，以确保我没有打错任何东西。这是我为使其在 Windows 7 上在家中工作所做的工作。

```
 strUser = Inputbox("Username:","Username")
    strPassword = Inputbox("Password:","Password")

    strPassword = chr(34) & strPassword & chr(34)

    Set objShell = WScript.CreateObject("WScript.Shell")
    objShell.Run "%comspec% /K psexec.exe \\workstation -u " & struser _
         & " -p " & strPassword & " -d calc.exe", 1, false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-01T20:34:43.997

问题在于使用 & 符号，而不是插入符号：单个 & 符号用作命令分隔符，因此 &-sign 之后的行的其余部分被 cmd 解释器视为下一个命令。

在下一个示例中，我使用了 SET 命令而不是 PSExec，因为我不会尝试使用 PSExec。

SET 命令一切顺利，即使转义了所有字符:)，但我不确定百分号，即“必须加倍才能按字面意思使用”。

```
Dim strPssw: strPssw = "/Pass"")=(*&^%$#@!"
Dim ii, strChar, strEscape
Dim strPassword: strPassword = ""
For ii = 1 To Len( strPssw) 'cannot use Replace() function
  strChar = Mid( strPssw, ii, 1)
  Select Case strChar
  Case "&", """", "^", "%", "=", _
       "@", "(", ")", "!", "*", "?", _
       ".", "\", "|", ">", "<", "/"
    strEscape = "^"
  Case Else
    strEscape = "" 'all goes well even if strEscape = "^" here
  End Select
    strPassword = strPassword & strEscape & strChar
Next
Dim objShell: Set objShell = WScript.CreateObject("WScript.Shell")
objShell.Run "%comspec% /C set varia=" & strPassword & "&set varia&pause&set varia=", 1, false

' @  - At Symbol: be less verbose
' &  - Single Ampersand: used as a command separator
' ^  - Caret: general escape character in batch
' "  - Double Quote: surrounding a string in double quotes escapes all of the characters contained within it
' () - Parentheses: used to make "code blocks" of grouped commands
' %  - Percentage Sign: are used to mark some variables, must be doubled to use literally
' !  - Exclamation Mark: to mark delayed expansion environment variables !variable!
' *  - Asterisk: wildcard matches any number or any characters
' ?  - Question Mark: matches any single character
' .  - Single dot: represents the current directory
' \  - Backslash: represent the root directory of a drive dir ^\
' |  - Single Pipe: redirects the std.output of one command into the std.input of another
' >  - Single Greater Than: redirects output to either a file or file like device
' <  - Less Than: redirect the contents of a file to the std.input of a command
''
' && - Double Ampersand: conditional command separator (if errorlevel 0)
' .. - Double dot: represents the parent directory of the current directory
' || - Double Pipe: conditional command separator (if errorlevel > 0)
' :: - Double Colon: alternative to "rem" for comments outside of code blocks
' >> - Double Greater than: output will be added to the very end of the file
' thanks to http://judago.webs.com/batchoperators.htm
' 
```

# git - 重新添加已删除的文件并且不跟踪它

> ID：14494082
> 
> 赞同：4
> 
> 时间：2013-01-24T04:40:21.807
> 
> 标签：git

我们的一位开发人员使用`git rm config`而不是`git rm --cached config`现在每次我们签出该分支时，都会删除“配置”文件。我尝试了这个咒语来试图阻止 git 删除文件，但没有成功：

```
git add -f config
git commit -m "fixing config file issue"
git pull
git push
git rm --cached config
echo "config" >> .gitignore
git add -u
git commit -m "fixing config file issue part 2"
git push 
```

如何阻止 git 在每次结帐时从我们的本地存储库中删除此文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:01:47.157

这位先生怎么样

```
$ git revert HEAD
[master af2e8fd] Revert "erroneous removal"
 0 files changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 config 
```

我也刚刚注意到，滚`config`出去`.gitignore`！你确实想跟踪它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T05:54:02.560

如果您不需要修改提交历史，那么您可以

```
git checkout HEAD~ config 
```

其中 HEAD~ 意味着那里的最后一次提交`config`应该是完整的。（如果没有，检查 HEAD~2，表示最后一次提交。`man gitrevisions`完成。）

然后`config`应该回来，执行

```
git commit -m 'config issue fixed' 
```

去完成。

# php - PHP PDOStatement::fetchAll 和按键分组

> ID：14494085
> 
> 赞同：1
> 
> 时间：2013-01-24T04:40:36.497
> 
> 标签：php, pdo

[在fetchAll page](http://php.net/manual/en/pdostatement.fetchall.php)上有一条关于 php.org 的评论。

> 您可能会发现自己想要同时使用**`FETCH_GROUP`**并**`FETCH_ASSOC`**获取表的主键作为数组键：

```
// $stmt is some query like "SELECT rowid, username, comment" 
$results = $stmt->fetchAll(PDO::FETCH_GROUP|PDO::FETCH_ASSOC);  
// It does work, but not as you might expect:  
$results = array(  
  1234 => array(0 => array('username' => 'abc', 'comment' => '[...]')),  
  1235 => array(0 => array('username' => 'def', 'comment' => '[...]')), ); 
```

> 但是您至少可以轻松地去除无用的编号数组：

```
$results = array_map('reset', $results); 
```

代码按预期运行，一切都只需一行即可完成：

```
array_map('reset', $results); 
```

阅读文档 array_map 和 reset 函数后，我真的不明白当两者组合在一行中时结果是如何产生的。

这是一个安全的解决方案吗？你会推荐这种单行还是它是一种副作用并且不应该使用，即我应该编写一个普通的旧循环来产生相同的结果？

结合两个标准功能的单线解决方案对我来说是一个非常有吸引力的解决方案。我只是想确保没有意外。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T05:21:41.643

这里的技巧是`reset`在这种情况下等于（建议我们通过 $results in 迭代`array_map`）到 a `$results[$i][0]`。`reset`，除了内部指针倒带，返回传递数组的第一个元素，就这么简单。

作为旁注，我建议通过`PDO::FETCH_CLASS`实现[ArrayAccess Interface](http://php.net/manual/en/class.arrayaccess.php "数组访问接口")来实现此行为。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T05:19:00.057

是的，它是安全的。`array_map()`用回调函数的结果替换数组成员并`reset()`返回数组的第一个成员。
所以，

```
array(0 => array('username' => 'abc', 'comment' => '[...]')) 
```

被替换为

```
array('username' => 'abc', 'comment' => '[...]') 
```

as`reset()`从前一条中返回这条线。

但老实说，这对我来说是一种从未存在过的问题。
我不明白仅使用 API 函数制作单行代码的想法有什么吸引力，产生任何令人难以置信的声明以遵守一条规则 - “不惜一切代价没有用户定义的函数”。
我可以制作自己的任何功能，并且在调用时它会*比这些代码扭曲中的任何一个*都短，但在 body 中具有*简单易读的语法，*在写作和阅读时都不会摸不着头脑，也不会问自己一个问题“是吗？安全的？”。

所以，一个真正的单行将是我[安全方便的数据库访问库的](https://github.com/colshrapnel/safemysql/blob/master/safemysql.class.php) `getInd`系列函数（它允许*任何*字段作为键，而不仅仅是主索引）：

```
$data = $db->getInd("id", "SELECT * FROM table WHERE category=?i", $cat);
$dic  = $db->getIndCol("name", "SELECT name, id FROM cities"); 
```

你可能会注意到这些是真正的单行代码，在内部完成所有肮脏和重复的工作，包括查询执行、参数绑定和其他东西。

# c# - 创建一个包含许多命名空间的 dll

> ID：14494086
> 
> 赞同：2
> 
> 时间：2013-01-24T04:40:37.357
> 
> 标签：c#, visual-studio-2010, dll

假设我有一堆命名空间：

```
SuperNamespace.namespace1
SuperNamespace.namespace2
SuperNamespace.namespace3
SuperNamespace.namespace4
...
SuperNamespace.namespaceN 
```

每个命名空间都有自己的项目，每个项目都会创建自己的 dll 文件：

```
SuperNamespace.namespace1.dll
SuperNamespace.namespace2.dll
SuperNamespace.namespace3.dll
SuperNamespace.namespace4.dll
...
SuperNamespace.namespaceN.dll 
```

我喜欢这种设计，因为它允许开发人员只使用他们需要的代码。有时拥有一堆 dll 可能有点麻烦和烦人。我想创建一个包含所有命名空间的 SuperNamespace.dll。这样，开发人员可以选择使用他/她需要的东西，或者只使用大 dll 文件，即包含所有库的 SuperNamespace.dll：

```
SuperNamespace.namespace1
SuperNamespace.namespace2
SuperNamespace.namespace3
SuperNamespace.namespace4
...
SuperNamespace.namespaceN 
```

有没有办法在 C# Visual Studio 2010 解决方案中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T05:02:46.127

我会简单地创建一个包含所有源的大型项目，除非有其他原因需要保留单独的程序集。

在以后的情况下，我仍然会创建一个项目，其中包括除了小项目之外的所有内容，然后按照 Mith Wheat 的建议走 ILMerge 路线。您可以使用 File->New project from source 轻松地从大量文件中创建新项目（可能需要更高版本的 Visual Studio，绝对不是 Express 版本）。

在一个程序集 (DLL) 中可以使用多少个 C# 命名空间没有限制。您可以在 .Net 框架本身中找到许多示例 - 即许多 System.* 命名空间来自同一个程序集。

反之亦然 - 相同的命名空间可以来自多个程序集。

请注意，在编译代码中没有“命名空间”之类的东西 - 它成为类/结构/枚举名称的一部分。

# mvvm - DesignNavigationService 有什么作用？（与 MVVM Light 工具包相关）

> ID：14494091
> 
> 赞同：0
> 
> 时间：2013-01-24T04:40:57.157
> 
> 标签：mvvm, windows-8, mvvm-light

在 MSDN 杂志 ( [http://msdn.microsoft.com/en-us/magazine//jj651572.aspx](http://msdn.microsoft.com/en-us/magazine//jj651572.aspx) ) 的特殊 Window 8 版中，Laurent 描述了初始化他的 SimpleIoc 容器，还描述了如何使用 ViewModels 实现导航a `NavigationService`，它实现`INavigationService`.

然而，在图 6 中（他说它说明了如何注册服务），他的代码片段清楚地引用了一个*设计时*NavigationService，名为`DesignNavigationService`，我认为它支持“Blendability”（Laurent 非常支持 Blend，我很感激）。

有谁知道设计时导航服务有什么不同？文章中没有其他提及，并且一些 Bing 搜索结果没有任何用处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:07:26.987

在与文章一起发布的示例代码中找到了答案。

在`DesignNavigationService`课堂上，有这样的解释性评论：

```
// This class doesn't perform navigation, in order
// to avoid issues in the designer at design time. 
```

鉴于 ViewModel 类可能在设计时运行了一点点，这是有道理的，现在我考虑了一下。

# angularjs - 如何访问指令中的参数？

> ID：14494095
> 
> 赞同：0
> 
> 时间：2013-01-24T04:41:07.487
> 
> 标签：angularjs

我已经定义了一个这样的指令：

```
angular.module('MyModule', [])
    .directive('datePicker', function($filter) {
        return {
            require: 'ngModel',
            link: function(scope, elem, attrs, ctrl) {
                ctrl.$formatters.unshift(function(modelValue) {
                    console.log('formatting',modelValue,scope,elem,attrs,ctrl);
                    return $filter('date')(modelValue, 'MM/dd/yyyy');
                });
                ctrl.$parsers.unshift(function(viewValue) {
                    console.log('parsing',viewValue);
                    var date = new Date(viewValue);
                    return isNaN(date) ? '' : date;
                });
            }
        }
    }); 
```

我将其应用于这样的元素：

```
<input type="text" date-picker="MM/dd/yyyy" ng-model="clientForm.birthDate" /> 
```

每当我将`date-picker`属性添加到元素时，都会触发我的指令，但我想知道如何`MM/dd/yyyy`在指令 JS 中访问属性的值 ()，以便我可以删除旁边的常量`$filter`。我不确定是否有任何我有权提供的变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T04:45:36.433

只需直接从`attrs`：

```
return $filter('date')(modelValue, attrs.datePicker); 
```

* * *

顺便说一句，如果您使用的唯一过滤器是`date`，那么您可以直接注入：

```
.directive('datePicker', function (dateFilter) {
    // Keep all your code, just update this line:
    return dateFilter(modelValue, attrs.datePicker || 'MM/dd/yyyy');
    // etc.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T05:40:50.817

您可以从链接函数的 attrs 参数访问它。

演示：[http ://plnkr.co/edit/DBs4jX9alyCZXt3LaLnF?p=preview](http://plnkr.co/edit/DBs4jX9alyCZXt3LaLnF?p=preview)

```
angModule.directive('moDateInput', function ($window) {
    return {
        require:'^ngModel',
        restrict:'A',
        link:function (scope, elm, attrs, ctrl) {
            var moment = $window.moment;
            var dateFormat = attrs.moMediumDate;
            attrs.$observe('moDateInput', function (newValue) {
                if (dateFormat == newValue || !ctrl.$modelValue) return;
                dateFormat = newValue;
                ctrl.$modelValue = new Date(ctrl.$setViewValue);
            });

            ctrl.$formatters.unshift(function (modelValue) {
                scope = scope;
                if (!dateFormat || !modelValue) return "";
                var retVal = moment(modelValue).format(dateFormat);
                return retVal;
            });

            ctrl.$parsers.unshift(function (viewValue) {
                scope = scope;
                var date = moment(viewValue, dateFormat);
                return (date && date.isValid() && date.year() > 1950 ) ? date.toDate() : "";
            });
        }
    };
}); 
```

# python - opencv的waitKey()函数使用其他键

> ID：14494101
> 
> 赞同：72
> 
> 时间：2013-01-24T04:42:05.343
> 
> 标签：python, opencv

我正在开发一个程序（python，opencv），在该程序中我使用`spacebar`转到下一帧并`Esc`退出程序。这是我唯一可以使用的两个键。我试图找出更多的键，为它们尝试了各种代码，但没有用。尤其是方向键。

我发现了**[这个](http://pklaus.github.com/HHG-Analysis-Python/helpers.html#module-keycode)**`waitkey`，但它不起作用。

所以我的问题是，我如何捕捉其他键`esc`并`spacebar`触发我的 python-opencv 程序中的某些功能？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-01-24T04:44:17.857

您可以为此使用`ord()`Python 中的函数。

例如，如果要触发“a”键按下，请执行以下操作：

```
if cv2.waitKey(33) == ord('a'):
   print "pressed a" 
```

在此处查看示例代码：**[绘制直方图](http://code.opencv.org/projects/opencv/repository/revisions/master/entry/samples/python2/hist.py#L68)**

更新 ：

要查找任何键的键值，请使用以下简单脚本打印键值：

```
import cv2
img = cv2.imread('sof.jpg') # load a dummy image
while(1):
    cv2.imshow('img',img)
    k = cv2.waitKey(33)
    if k==27:    # Esc key to stop
        break
    elif k==-1:  # normally -1 returned,so don't print it
        continue
    else:
        print k # else print its value 
```

使用此代码，我得到以下值：

```
Upkey : 2490368
DownKey : 2621440
LeftKey : 2424832
RightKey: 2555904
Space : 32
Delete : 3014656
...... # Continue yourself :) 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-12-13T22:23:56.727

返回的键码`waitKey`似乎取决于平台。但是，看看键返回什么可能很有教育意义（顺便说一下，在我的平台上，*Esc*不会返回 27...）

阿比德的答案列表中的整数对人类的大脑来说几乎没有用处（除非你是一个神童……）。但是，如果您以十六进制检查它们，或者查看最低有效字节，您可能会注意到模式......

我用于检查返回值的脚本`waitKey`如下：

```
#!/usr/bin/env python

import cv2
import sys

cv2.imshow(sys.argv[1], cv2.imread(sys.argv[1]))
res = cv2.waitKey(0)
print('You pressed %d (0x%x), LSB: %d (%s)' % (res, res, res % 256,
    repr(chr(res%256)) if res%256 < 128 else '?')) 
```

您可以将其用作最小的命令行图像查看器。

我得到的一些结果：

*   q 字母：

    你按下 1048689 (0x100071), LSB: 113 ('q')

*   转义键（传统上为 ASCII 27）：

    你按下 1048603 (0x10001b), LSB: 27 ('\x1b')

*   空间：

    你按了 1048608 (0x100020), LSB: 32 (' ')

当你得到“奇怪”的结果时，这个列表可以继续下去，但是你会看到要走的路。

顺便说一句，如果你想把它放在一个循环中，你可以`waitKey(0)`（永远等待），而不是忽略`-1`返回值。

**编辑**：这些高位比眼睛看到的要多 - 请参阅 Andrew C 的回答（提示：它与键盘修饰符有关，如所有“锁”，例如 NumLock）。

然而，我最近的经验表明，存在平台依赖性 - 例如，Windows 上 Python 3.6 上的 Anaconda 的 OpenCV 4.1.0 不会产生这些位，并且对于某些（重要的）键是从（`0`箭头`waitKey()`、、、、、、甚至和）。至少返回（但是......为什么不呢？）。`Home``End``PageDn``PageUp``Del``Ins``Backspace``8``Del`

因此，对于跨平台 UI，您可能仅限于`W`, `A`, `S`, `D`, 字母, 数字, `Esc`,`Space`和`Backspace`;)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-11-05T21:25:10.120

已经发布的答案表明，获得的一些异常值`waitKey`是由于平台差异造成的。下面，我建议（至少在某些平台上）明显奇怪的行为`waitKey`是由于键盘修饰符造成的。这篇文章看起来与 Tomasz 的答案相似，因为我最初将其写为编辑，但被拒绝了。

* * *

更改返回的键码`waitKey`取决于启用的修饰符。NumLock、CapsLock 以及 Shift、Ctrl 和 Alt 键都`waitKey`通过启用两个最低有效字节上方的某些位来修改返回的键码。这些标志中最小的是 Shift at 0x10000。

Tomasz 发布的脚本的修改版本如下所示：

```
#!/usr/bin/env python

import cv2
import sys

cv2.imshow(sys.argv[1], cv2.imread(sys.argv[1]))
res = cv2.waitKey(0)
print 'You pressed %d (0x%x), 2LSB: %d (%s)' % (res, res, res % 2**16,
    repr(chr(res%256)) if res%256 < 128 else '?') 
```

这给出了以下结果：

*   带 NumLock 的 q 字母：

    你按下了 1048689 (0x100071), 2LSB: 113 ('q')

*   带 CapsLock 但不带 NumLock 的 Escape 键：

    你按了 131099 (0x2001b), 2LSB: 27 ('\x1b')

*   带 Shift 和 NumLock 的空格：

    你按了 1114144 (0x110020), 2LSB: 32 (' ')

*   带控制的右箭头键，NumLock 关闭：

    你按下了 327507 (0x4ff53), 2LSB: 65363 ('S')

我希望这有助于解释`waitKey`NumLock 和 CapLock 的异常行为以及如何按下实际键。从这里做类似的事情相对简单：

```
ctrlPressed = 0 != res & (1 << 18) 
```

...因为“控制键”标志是第 19 位。移位在第 17 位，CapsLock 的状态在第 18 位，Alt 在第 20 位，NumLock 在第 21 位。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-08-03T03:46:09.440

对我来说，下面的代码**不起作用**，当它运行时，图像会在没有你按下的情况下快速跳转到下一个：

```
import cv2
img = cv2.imread('sof.jpg') # load a dummy image
while(1):
    cv2.imshow('img',img)
    k = cv2.waitKey(33)
    if k==27:    # Esc key to stop
        break
    elif k==-1:  # normally -1 returned,so don't print it
        continue
    else:
        print k # else print its value 
```

但这有效：

```
def test_wait_key():
    lst_img_path = [
        '/home/xy/yy_face_head/face_det_test/111.png',
        '/home/xy/yy_face_head/face_det_test/222.png'
        #.....more path ...
    ]

    for f_path in lst_img_path:
        img = cv2.imread(f_path)
        cv2.imshow('tmp', img)
        c = cv2.waitKey(0) % 256

        if c == ord('a'):
            print "pressed a"
        else:
            print 'you press %s' % chr(c) 
```

输出如下：

[![在此处输入图像描述](../Images/d66fa9c70ee0a463e57b36294bcd708d.png)](https://i.stack.imgur.com/4fcZe.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-25T10:46:41.050

对于 C++：

如果使用键盘字符/数字，更简单的解决方案是：

```
int key = cvWaitKey();

switch(key)
{
   case ((int)('a')):
   // do something if button 'a' is pressed
   break;
   case ((int)('h')):
   // do something if button 'h' is pressed
   break;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-10-17T11:41:50.613

在 Ubuntu 和 C++ 中，我遇到了字符/整数转换的问题。我需要用来`cv::waitKey()%256`获取正确的 ASCII 值。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-04-28T08:28:33.030

适用于 Ubuntu18、python3、opencv 3.2.0 的答案与上述类似。但随着线路的变化`cv2.waitKey(0)`。这意味着程序会一直等到按下按钮。

使用此代码，我找到了箭头按钮的键值：向上箭头 (82)、向下箭头 (84)、向左箭头 (81) 和 Enter(10) 等。

```
import cv2
img = cv2.imread('sof.jpg') # load a dummy image
while(1):
    cv2.imshow('img',img)
    k = cv2.waitKey(0)
    if k==27:    # Esc key to stop
        break
    elif k==-1:  # normally -1 returned,so don't print it
        continue
    else:
        print k # else print its value 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-04-24T16:06:58.847

## 如果要暂停程序以截取进度

（假设在 cv2.imshow 中显示）

`cv2.waitKey(0)`按下“Scr”按钮（或其组合）后会继续，但你可以试试这个

```
cv2.waitKey(0)
input('') 
```

cv2.waitkey(0) 给程序足够的时间来处理你想在 imshow 和 input('') 中看到的所有内容

让它等待您在控制台窗口中按 Enter

这适用于python 3

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-03-10T22:18:57.317

有趣的是，没有人在另一个 Stack Overflow 线程`cv2.waitKeyEx()`的这个[答案中提到过。](https://stackoverflow.com/a/45584477/3162788)OpenCV 的[文档](https://docs.opencv.org/3.4/d7/dfc/group__highgui.html#gafa15c0501e0ddd90918f17aa071d3dd0)内容`cv2.waitKeyEx()`如下：

> 类似于 waitKey，但返回完整的密钥代码。
> 
> **笔记**
> 
> 关键代码是特定于实现的，取决于使用的后端：QT/GTK/Win32/etc

因此，跨平台实现可能需要一些注意。然而，对我来说，这是迄今为止让箭头键等在 Windows 上工作的最简单和最直接的解决方案。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-04-13T13:24:58.130

这会将组合键直接打印到图像上：

[![z 按下 ctrl + z 按下](../Images/86d83b12f8635159fc41167fdc5618ab.png)](https://i.stack.imgur.com/Ri97p.jpg)

第一个窗口显示`'z'`已按下，第二个窗口显示已`'ctrl' + 'z'`按下。使用组合键时，会出现一个问号。

不要弄乱问号代码，即`63`.

```
import numpy as np
import cv2

im = np.zeros((100, 300), np.uint8)
cv2.imshow('Keypressed', im)
while True:
  key = cv2.waitKey(0)
  im_c = im.copy()
  cv2.putText(
    im_c,
    f'{chr(key)} -> {key}',
    (10, 60), 
    cv2.FONT_HERSHEY_SIMPLEX, 
    1,
    (255,255,255),
    2)
  cv2.imshow('Keypressed', im_c)
  if key == 27: break # 'ESC' 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-05-22T18:26:52.833

我也觉得这很令人困惑。我正在运行 Ubuntu 18 并发现以下内容：如果 cv.imshow 窗口具有焦点，您将在终端中获得一组值 - 就像上面讨论的 ASCII 值一样。

如果终端有焦点，您将看到不同的值。IE-当你按下 a 键时你会看到“a”（而不是 ASCII 值 97），当你按下 Escape 时你会看到“^]”而不是“27”。

在这两种情况下，我都没有看到上面提到的 6 位数字，我使用了类似的代码。waitKey 的值似乎是以毫秒为单位的轮询周期。这些点说明了这一点。

运行此代码段并在焦点位于测试图像上时按下键，然后单击终端窗口并按下相同的键。

```
 import cv2
    img = cv2.imread('test.jpg') 
    cv2.imshow('Your test image', img)

    while(1):
      k = cv2.waitKey(300)
      if k == 27:
        break
      elif k==-1:
       print "."
       continue
      else:
        print k 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2019-05-07T03:45:59.410

这对我来说最有效：

[http://www.asciitable.com/](http://www.asciitable.com/)

有时，最好的答案是简单的答案；+)

# android - 在 Android 谷歌地图 v2 上保存标记

> ID：14494102
> 
> 赞同：6
> 
> 时间：2013-01-24T04:42:07.243
> 
> 标签：android, google-maps, google-maps-markers, android-maps, savestate

我正在使用 Android Google maps v2 API 并将其设置为在长按时添加标记。我需要一种方法来保存这些标记并在应用程序再次恢复时重新加载它们。最好的方法是什么？请帮忙

目前我添加标记如下：

```
map.addMarker(new MarkerOptions().position(latlonpoint)
            .icon(bitmapDescriptor).title(latlonpoint.toString())); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T22:24:40.537

我知道了！我可以通过将点的数组列表保存到文件然后从文件中读取它们来轻松地做到这一点

我执行以下操作`onPause`：

```
try {
    // Modes: MODE_PRIVATE, MODE_WORLD_READABLE, MODE_WORLD_WRITABLE
    FileOutputStream output = openFileOutput("latlngpoints.txt",
    Context.MODE_PRIVATE);
    DataOutputStream dout = new DataOutputStream(output);
    dout.writeInt(listOfPoints.size()); // Save line count
    for (LatLng point : listOfPoints) {
        dout.writeUTF(point.latitude + "," + point.longitude);
        Log.v("write", point.latitude + "," + point.longitude);
    }
    dout.flush(); // Flush stream ...
    dout.close(); // ... and close.
} catch (IOException exc) {
    exc.printStackTrace();
} 
```

并且`onResume`：我做相反的事情

```
try {
    FileInputStream input = openFileInput("latlngpoints.txt");
    DataInputStream din = new DataInputStream(input);
    int sz = din.readInt(); // Read line count
    for (int i = 0; i < sz; i++) {
        String str = din.readUTF();
        Log.v("read", str);
        String[] stringArray = str.split(",");
        double latitude = Double.parseDouble(stringArray[0]);
        double longitude = Double.parseDouble(stringArray[1]);
        listOfPoints.add(new LatLng(latitude, longitude));
    }
    din.close();
    loadMarkers(listOfPoints);
} catch (IOException exc) {
    exc.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:57:23.820

您可以`onLongClickListener`按如下方式实现标记：

```
map.addMarker(new MarkerOptions()
    .position(latlonpoint)
    .icon(bitmapDescriptor)
    .title(latlonpoint.toString()));
map.setOnMapLongClickListener(new OnMapLongClickListener() {
    @Override
    public void onMapLongClick(LatLng p_point) {
        // TODO ...
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-01T13:45:23.913

首先在数据库中长按保存经纬度

注意：-忽略不需要的地方

```
 HistoryModel historyModel = new HistoryModel(place,sLatitude, sLongitude);
 DatabaseMethods.openDB(MapsActivity.this);
 DatabaseMethods.addHistory(historyModel);
 DatabaseMethods.closeDB(); 
```

在 onMapReady 回调中

```
@Override
public void onMapReady(GoogleMap googleMap) {
    mMap = googleMap;

    DatabaseFunctions.openDB(MapsActivity.this);
    ArrayList<HistoryModel> historyModelArr = DatabaseFunctions.getHistory();
    DatabaseFunctions.closeDB();

    for (int i = 0; i < historyModelArr.size(); i++) {
        double latitude = Double.parseDouble(historyModelArr.get(i).getLatitude());
        double longitude = Double.parseDouble(historyModelArr.get(i).getLongitude());
        mMap.addMarker(new MarkerOptions()
                .position(new LatLng(latitude, longitude)));
    }
} 
```

使用方法：-

```
 public static ArrayList<HistoryModel> getHistory() {
    Cursor cursor = null;
    ArrayList<HistoryModel> historyModelArr = null;
    try {
        cursor = db.rawQuery("SELECT * FROM " + DBHelper.TABLE_HISTORY,
                null);

        if (cursor != null) {
            historyModelArr = new ArrayList<HistoryModel>();
            while (cursor.moveToNext()) {
                HistoryModel historyModel = new HistoryModel(cursor.getString(1),cursor.getString(2), cursor.getString(3));
                historyModelArr.add(historyModel);
            }
            return historyModelArr;
        } else {
            return historyModelArr;
        }

    } catch (Exception e) {
        Log.e(tag, "getHistory Error : " + e.toString());
        return historyModelArr;
    } finally {
        if (cursor != null) {
            cursor.close();
        }
    }
}

public static void addHistory(HistoryModel historyModel) {

    ContentValues values;
    try {
        values = new ContentValues();
        values.put(DBHelper.HISTORY_PLACE, historyModel.getPlace());
        values.put(DBHelper.HISTORY_LATITUDE, historyModel.getLatitude());
        values.put(DBHelper.HISTORY_LONGITUDE, historyModel.getLongitude());
        db.insert(DBHelper.TABLE_HISTORY, null, values);
    } catch (Exception e) {

    }

} 
```

模型类

```
public class HistoryModel {

private String place, latitude, longitude;

public HistoryModel(String place, String latitude, String longitude) {
    this.place = place;
    this.latitude = latitude;
    this.longitude = longitude;
}

public String getPlace() {
    return place;
}

public void setPlace(String place) {
    this.place = place;
}

public String getLatitude() {
    return latitude;
}

public void setLatitude(String latitude) {
    this.latitude = latitude;
}

public String getLongitude() {
    return longitude;
}

public void setLongitude(String longitude) {
    this.longitude = longitude;
}
} 
```

# macos - bash 脚本中的 cp

> ID：14494107
> 
> 赞同：0
> 
> 时间：2013-01-24T04:42:31.150
> 
> 标签：macos, bash, shell

我正在编写一个简单的 shell 脚本（我的第一个），并且似乎无法弄清楚为什么在运行`./auto.sh baz`. 当我在完整的目标路径中硬编码时，它最初是有效的，但现在我想使用一个参数它会中断。任何帮助都是极好的。谢谢！

```
#!/bin/sh

cp -ivr ./foo/bar.xcodeproj ./iOS/$1.xcodeproj 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:51:49.187

尝试以下

```
#!/bin/sh
cp -ivr "./foo/bar.xcodeproj" "./iOS/${1}.xcodeproj" 
```

# html - 对齐问题

> ID：14494110
> 
> 赞同：2
> 
> 时间：2013-01-24T04:42:54.310
> 
> 标签：html, css, twitter-bootstrap, menu, sidebar

这是我的引导 html 代码

```
 <div class="span3">
      <div class="well sidebar-nav">
        <ul class="nav nav-list">

          <li class="nav-header">Practice</li>
          <li align="right"><a href="#" onclick='Show();'>None</a>&nbsp;|&nbsp;<a href="#" onclick='Show();'>All</a></li>
          <li><input type="checkbox"/>&nbsp;ABC</li>
          <li><input type="checkbox"/>&nbsp;LPO</li>
          <li><input type="checkbox"/>&nbsp;MNJ</li>
        </ul>
      </div><!--/.well -->
    </div><!--/span--> 
```

这是[jsfiddle](http://jsfiddle.net/vG8tW/1/)

如何`None | All`在单行中对齐以及如何使复选框和相应的文本也在单行中对齐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:59:07.277

在不改变你的结构的情况下，这里的 css 可以解决你的问题，

```
div{
  float: left;
}
li{
  float: left;
    clear: left;
}
li > a{
  float: left;
}
li > a:last-child{
 float: right;
} 
```

[jsFiddle 链接](http://jsfiddle.net/vG8tW/4/)

**更新：**

你需要用 包装你的文本`<span>`，所以你的 html 看起来像这样，

```
<li ><input type="checkbox"/><span>ABC</span></li>
<li><input type="checkbox"/><span>LPO</span></li>
<li><input type="checkbox"/><span>MNJ</span></li> 
```

和CSS，

```
li > span{
    float: right;
    margin: 4px;
} 
```

[JS 小提琴链接](http://jsfiddle.net/vG8tW/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:47:52.087

出于澄清目的，我删除了不必要的代码。

首先，使用两个列表：

```
<ul>
    <li class="nav-header">Practice</li>
    <li align="right"><a href="#" onclick='Show();'>None</a>&nbsp;|&nbsp;<a href="#" onclick='Show();'>All</a></li>
</ul>
<ul>
    <li><input type="checkbox"/>&nbsp;ABC</li>
    <li><input type="checkbox"/>&nbsp;LPO</li>
    <li><input type="checkbox"/>&nbsp;MNJ</li>
</ul> 
```

然后使用该CSS：

```
ul li { display: inline; } 
```

要将复选框与其文本对齐，请将其添加到您的 CSS

```
ul li input { position: relative; top: -3px; } 
```

将属性调整为`top`最适合您的页面的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T05:04:53.523

消除

```
.nav > li > a {
    display: block;
} 
```

无 | 全部

并用于复选框

```
<li><input type="checkbox">&nbsp;ABC
<input type="checkbox">&nbsp;LPO
<input type="checkbox">&nbsp;MNJ</li> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T05:36:15.373

像这样写：

```
.nav-list > li[align="right"] > a{
    display:inline;
    margin:0;
}
.nav-list > li input{
   vertical-align:top; 
} 
```

检查这个[http://jsfiddle.net/vG8tW/6/](http://jsfiddle.net/vG8tW/6/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-24T05:51:34.583

添加以下样式

```
.nav > li{
display:inline;
}
.nav > li.nav-header,.nav > li[align]{
 display:block;   
} 
```

[jsfiddle](http://jsfiddle.net/vG8tW/8/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-24T04:52:49.520

使用以下代码

```
 <li class="nav-header">Practice</li>
          <li align="right">
              <a href="#" style="float:left;margin-left:70px;"  onclick='Show();'>None</a>
              &nbsp;|&nbsp;
              <a href="#"   style="float:right;" onclick='Show();'>All</a>
            </li>
            <div style="clear:both;">
          <li><input type="checkbox"/>&nbsp;ABC</li>
          <li><input type="checkbox"/>&nbsp;LPO</li>
          <li><input type="checkbox"/>&nbsp;MNJ</li>
        </ul>
      </div><!--/.well -->
    </div><!--/span--> 
```

# rrdtool - 如何读取 RRD 文件以获取使用数据？

> ID：14494114
> 
> 赞同：5
> 
> 时间：2013-01-24T04:43:22.727
> 
> 标签：rrdtool, rrd

我已经设置了一个 mrtg 设置`rrdtool`。现在我计划从这些 RRD 文件中获取传入的传出使用数据，但未能找到正确的方法。

谁能告诉我们如何从 rrd 文件中获取这些使用数据？
然后我可以维护一个数据库来保存这些使用数据并计算成本等？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T05:44:06.503

您可以使用`rrdtool graph ... PRINT:xxx`或者更确切地说`rrdtool xport ...`从 rrd 文件中获取数据。如果要获取实际数据，请使用`rrdtool fetch`.

[您可以在http://rrdtool.org](http://rrdtool.org)上找到大量附加信息

# breeze - Breeze Metadata 以 xml 格式显示

> ID：14494117
> 
> 赞同：0
> 
> 时间：2013-01-24T04:43:28.270
> 
> 标签：breeze

Breeze 无法创建实体。它查询元数据（在我的 Controller 类中）并返回带有 200 代码的数据。然后它查询数据，并返回一个 200 代码。两组返回数据表面上看起来都是 json 格式。

进一步查看元数据，它似乎是 json 序列化 xml 元数据。这对我来说感觉不对 - 在微风网站上的实时示例中，似乎没有这样做。

有人对可能导致这种情况的原因有任何提示吗？以下是元数据的开始方式：

```
"{\"?xml\":{\"version\":\"1.0\",\"encoding\":\"utf-8\"},\"schema\":{\"namespace\": 
```

当服务返回数据时，我收到一个错误，带有完整且正确的 json 响应。内部错误报告`"Unable to get property 'createCtor' of undefined or null reference"`

当我调试breeze.js 时，它在mergeEntity 函数中到达这一行：

```
targetEntity = entityType._createEntityCore(); 
```

然后在 ctr.prototype.getEntityCtor 函数中 - 它无法使用以下行从 metadataStore 的 _typeRegistry 属性中获取实体的构造函数：

```
var aCtor = typeRegistry[this.name] || typeRegistry[this.shortName]; 
```

之后，错误被抛出，我们最终被 executeQuery 函数捕获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:23:07.833

我遇到的问题应该很明显。更新脚本后，我的捆绑配置不包括淘汰脚本。如果您遇到此问题，请确保您已加载绑定库（并且加载正确）。

# python - 什么决定了整数 m % n 的符号？

> ID：14494118
> 
> 赞同：9
> 
> 时间：2013-01-24T04:43:32.467
> 
> 标签：python, modulo, integer-division

Python 中的模数令人困惑。

在 Python 中，`%`运算符计算余数：

```
>>> 9 % 5
4 
```

然而：

```
>>> -9 % 5
1 
```

为什么是结果`1`？而不是`-4`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-24T04:47:11.203

因为在python中，符号匹配分母。

```
>>> 9 % -5
-1
>>> -9 % 5
1 
```

有关为什么以这种方式实现的解释，请阅读[Guido 的博客文章](http://python-history.blogspot.com.au/2010/08/why-pythons-integer-division-floors.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T05:25:47.513

-10 % 5 为 0，即 -10 除以 5。

你问为什么 -9 % 5 不是 -4，答案是 1 和 -4 都可以是正确答案，这取决于 -9 除以 5 是多少。当然 -9 除以 5 是 1.8，但是这是整数除法，在 Python 3 中用 // 表示，所以我这里用 // 来明确我们说的是整数除法。

我将通过不使用负数来解释这一点，它更容易。

9 // 5 是 1。也就是说，你只能从 9 中减去 5 1 次，剩下的就是 4。但是如果你再从 9 中减去 5 一次，那么剩下的就变成了 -1！

**所以 -1 是 9 % 5 的正确答案，如果 9 // 5 是 2。**

在 Python 9 中 // 5 是 1，因为 Python 整数除法是一个下除法，即它总是*向下舍*入。如果四舍五入*9* // 5 将是 2，而 9 % 5 将是 -1。

现在让我们看看使用负数的情况：-9 除以 5 现在是 -2。**因为是楼层划分，所以总是四舍五入。**这意味着其余的是 1。所以 -9 % 5 是 1，而不是 -4。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T04:54:59.607

这确实与 python 如何舍入整数除法有关。

在数学上，对于任何 int x 和 y，以下必须始终为真

```
x == (x // y) * y + x % y 
```

所以从这里，我们可以说

x % y == x - (x // y) * y

现在回想一下，python 将整数除法四舍五入到负无穷，而不是零。例如 -9 // 5 给出 -2，而不是 -1。使用此逻辑，您将获得 -9 % 5 = 1

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-24T04:47:21.123

这样想：

0 % 5 为 0

1 % 5 是 1

所以……如果你倒退怎么办？

-1 % 5 必须是 4

-2 % 5 必须是 3

等等。

你会看到下面这个 -9 % 5 is 1

注意：根据编程语言和 % 的实现，您可能会得到不同的结果，因为程序员在如何处理 % 中的负数上存在分歧

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-18T13:38:08.773

在整数中，您不能总是选择`quotient * divisor == dividend`. 如果`product`不等于`dividend`，则总是要做出选择，是使其略小于`dividend`，还是略大于`dividend`。`product`与的总和`remainder`使`dividend`，这`remainder`就是。无论如何，股息和产品必须接近，这意味着余数的绝对值必须小于除数的绝对值。

当`divisor`为正时，`products`增加为`quotients`增加；当`divisor`为负数时，`products`随着`quotients`增加而减少。在第一种情况下，产品从下面走，在第二种情况下，产品从上面走。在 Python 中，在这两种情况下`quotient`，只有在`dividend`达到下一个可能时才会采用下一个`product`，这与产品的运行方式相同。在此之前，只有`remainder`为适应下一个而进行的更改`dividend`，再次始终与股息变化的方向相同，而不会在零处中断。这条规则在 Python 中是通用的，它始终成立。

这不是做出这种选择的原因，但它给出了会发生什么的想法（即为什么结果是这样的，以及预期的结果）。

# ruby-on-rails - 添加属性belongs_to模型

> ID：14494123
> 
> 赞同：0
> 
> 时间：2013-01-24T04:43:42.170
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, entity-relationship

不知道我这样做是否正确。有两种型号：

```
class Team < ActiveRecord::Base
  attr_accessible :city, :name, :division_id
  belongs_to :divison
  has_many :players
end

class Division < ActiveRecord::Base
  attr_accessible :name
  has_many :teams
end 
```

:teams 的迁移包括一个 foreign_key

```
create_table :teams do |t|
  t.string :name
  t.string :city
  t.integer :division_id
  t.foreign_key :division, dependent: :delete

  t.timestamps
end 
```

在我的`Teams`索引视图中，我想`division`为每个团队添加名称。获取 id 很简单，我只是使用`<%= team.division_id %>` 但是，我不确定如何获取部门名称。

我尝试将部门添加到每个团队：

```
@teams.each do |team|
    team.division = Division.find(team.division_id)
end 
```

但这失败了，说：`undefined method 'division=' for #<Team:0x3cf2df0>`。我什至不确定这是否是正确的方法，或者我是否过于复杂化了事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T04:45:40.747

既然你有关系，你应该能够做到

```
team.division.name 
```

此外，您的模型中有错字（*在 Java 这样的静态类型语言中，您永远不会错过这种错误。在 Ruby 中，您必须编写测试，大量测试*）

```
belongs_to :divison 
```

# javascript - 在 phoneGap 中提供 Facebook ID 和 Scheme 的问题

> ID：14494125
> 
> 赞同：0
> 
> 时间：2013-01-24T04:43:55.510
> 
> 标签：javascript, html, facebook, cordova

嗨，我在 phoneGap 工作。我想使用 phonegap 将 facebook 集成到我的应用程序中。我正在关注教程：

```
https://github.com/davejohnson/phonegap-plugin-facebook-connect/ 
```

在本教程（自述）中，它说在 [projectName]info.plist 中包含 Facebook ID 和 Scheme ID。但是给定的数据是：

```
 <key>FacebookAppID</key>
   <string>[**APP_ID**]</string>
   <key>CFBundleURLTypes</key>
   <array>
<dict>
    <key>CFBundleURLSchemes</key>
    <array>
        <string>fb[**APP_ID**]</string>
    </array>
</dict>
   </array> 
```

在这里我有点困惑，我必须把我的 FaceBook ID 放在哪里，把 Scheme ID 放在哪里？请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:03:28.480

我找到了一篇博客文章 - [适用于 iOS 和 Android 的 PhoneGap 2.1 的 Facebook 插件集成](http://oodlestechnologies.com/blogs/Facebook-plugin-integration-for-PhoneGap-2.1-for-iOS-and-Android)，上面写着要做

```
<strong><strong>
<key>CFBundleURLTypes</key>
<array>
    <dict>
        <key>CFBundleURLName</key>
        <string>[SCHEME_ID]</string>
        <key>CFBundleURLSchemes</key>
        <array>
            <string>fb[APP_ID]</string>
        </array>
    </dict>
</array>
</strong></strong> 
```

来自同一篇博文：

> SCHEME_ID 和 APP_ID SCHEME_ID 是一个无与伦比的反向域顺序标识符（即 com.oodles.cordova.myscheme），APP_ID 是您在 facebook 上注册您的应用程序后获得的应用程序 ID。

# mysql - 在没有开放端口的情况下通过 SSH2 连接到 mysql

> ID：14494127
> 
> 赞同：0
> 
> 时间：2013-01-24T04:44:02.513
> 
> 标签：mysql, linux, ssh

我有一台可以通过 SSH 连接的服务器，该服务器正在运行 mysql。我无法通过端口 3306 访问。很多年前，我使用 SSH 隧道解决了这个问题，但目前无法让它工作。我以为我在哪里使用的步骤

1) 通过 putty 连接到服务器上的命令提示符 2) 发出一些命令来设置隧道 3) 通过 127.0.0.1 连接 MySQL Workbench，它将数据包转发到服务器。

是第 2 步给我带来了问题。我正在从 Windows 连接到 Enterprise Linux 5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T04:49:51.410

我不知道确切的答案是什么。但我建议看以下。

```
use plink.exe 
```

或使用以下链接设置从 windows 到 linux 的隧道。

```
https://howto.ccs.neu.edu/howto/windows/ssh-port-tunneling-with-putty/ 
```

# php - 数据未插入数据库表

> ID：14494130
> 
> 赞同：-1
> 
> 时间：2013-01-24T04:44:15.647
> 
> 标签：php, jquery, html, mysqli

我有一个应用程序，您可以在这里查看：[应用程序](http://helios.hud.ac.uk/u0867587/Mobile_app/Text34.php)

请按照以下步骤正确使用该应用程序：

1.  单击该`Add Question`按钮两次以在下面的表格中附加 2 个表格行。

2.  两个表行都有自己的文件输入。在两个文件输入中上传一个视频文件（我建议上传一个非常小的视频以加快上传速度）。您必须一次上传一个视频文件

3.  您会看到，每次上传文件时，表格下方都会显示一个文本输入，文本输入中的值是与每个上传的视频文件关联的数据库中的视频 ID。

例如，如果我的视频表当前看起来像这样：

**视频表：**

```
VideoId (auto PK)  VideoFiles
4                  Files/video1.mp4 
```

如果我分别上传 2 个视频文件 (`video5.mp4`和`video6.mp4`) 并且文本输入状态`5`和`6`，那么这意味着`Video`在上传文件后表格现在看起来像 thi：

**视频表：**

```
VideoId (auto PK)  VideoFiles
4                  Files/video1.mp4
5                  Files/video5.mp4
6                  Files/video6.mp4 
```

现在显示文本输入的代码如下：

**上传完成并生成文本输入时的 Jquery：**

```
function stopVideoUpload(success, videoID, videofilename){

      var result = '';

      if (success == 1){
         result = '<span class="videomsg'+videocounter+'">The file was uploaded successfully</span>';
            $('.hiddenvid').append('<input type="text" name="vidid[]" id="'+videoID+'" value="' + videoID + '" />');
          }

      $(sourceVideoForm).find('.videof1_upload_process').hide();
      $(sourceVideoForm).find('.videomsg').html(result);
      $(sourceVideoForm).find('.videof1_upload_form').show();   

      return true;   
} 
```

**存储文本输入的 div 标签：**

```
<div class="hiddenvid"><!-- All uploaded video file ids go here --></div> 
```

现在问题如下，我想在数据库中存储哪个问题包含哪些视频。为此，我会将问题编号存储在`Question`表格中，给它一个`QuestionId`并希望`VideoId`从表格中检索视频`Video`。因此，在提交视频文件并将其插入数据库时​​，数据库表应如下所示：

**问题表：**

```
QuestionId (auto PK) QuestionNo
25                    1
26                    2 
```

**Video_Question 表：**

```
VideoQuestionId (PK auto)  VideoId  QuestionId
7                          5         25
8                          6         26 
```

我遇到的问题是我正在努力为`Video_Question`表插入数据。插入`Question`表格很好，但我想要做的是检索最后`QuestionId`提交的每个`QuestionId`，检索`VideoId`属于该表格的任何内容`QuestionId`并将其插入`Video_Question`表格？

下面是我的尝试，但表中没有插入任何内容`Video Question`，它给了我一个：

`Notice: Undefined offset: 0 in .... on line 305 error`

如何修复错误并获得 INSERT`Video_Question`才能正常工作？

下面是插入的代码（我已经注释了出现notce的行号）：

```
// Prepare your statements ahead of time
 $questionsql = "INSERT INTO Question (QuestionNo) 
    VALUES (?)";
if (!$insert = $mysqli->prepare($questionsql)) {
    // Handle errors with prepare operation here
    echo __LINE__.': '.$mysqli->error;
}

     $videoquestionsql = "INSERT INTO Video_Question (VideoId, QuestionId)  
        VALUES (?, ?)"; 

         if (!$insertvideoquestion = $mysqli->prepare($videoquestionsql)) { 
          // Handle errors with prepare operation here 
           echo __LINE__.': '.$mysqli->error; 
        } 

    $c = count($_POST['numQuestion']);
    $question_ids = array();

    for($i = 0;  $i < $c; $i++ )
    {

$questionNo = $_POST['numQuestion'][$i];

            $insert->bind_param("i", $questionNo);

            $insert->execute();

            if ($insert->errno) 
            {
                // Handle query error here
                echo __LINE__.': '.$insert->error;
                break 3;
            }

            $questionId = $mysqli->insert_id;

            $question_ids[$questionNo] = $questionId;

}

                $vidresults = $_POST['vidid'];
            foreach($vidresults as $vidid => $vidvalue) 
            {

                $video = $vidvalue;

                $vidquesid = $question_ids[$vidid];  

                foreach($vidvalue as $video) 
                {

    $insertvideoquestion->bind_param("ii",$video, $vidquesid); 

        $insertvideoquestion->execute(); 

                    if ($insertvideoquestion->errno) { 
              // Handle query error here 
              echo __LINE__.': '.$insertvideoquestion->error;
              break 4;
            } 

        }
    } 
```

通过执行以下 var_dumps：

```
var_dump($question_ids);
var_dump($vidid); 
```

我得到这些结果：

```
array(2) { 
[1]=> int(159)
[2]=> int(160) 
} int(1) 
```

**更新：**

我不明白的是，下面的代码非常相似，但是这是怎么工作的，而我用于视频的 mysqli 代码不起作用：

```
$results = $_POST['value'];
foreach($results as $id => $value) 
{
    $answer = $value;

    $quesid = $question_ids[$id];   

    foreach($value as $answer) 
    {
        $insertanswer->bind_param("is", $quesid, $answer);

        $insertanswer->execute();

        if ($insertanswer->errno) {
            // Handle query error here
            echo __LINE__.': '.$insertanswer->error;
            break 5;
        }
    }
} 
```

**查询：**

```
 var $this, i = 0,
       $row, $cell;
   $('#optionAndAnswer .answers').each(function () {
       $this = $(this);
       if (i % 6 == 0) {
           $row = $("<tr/>").appendTo($answer);
           $cell = $("<td/>").appendTo($row);
       }
       var $newBtn = $(("<input class='answerBtnsRow answers' type='button' style='display:%s;' onclick='btnclick(this, " + gQuestionIndex + ");' />")
                       .replace('%s', $this.is(':visible') ? 'inline-block' : 'none')).attr('name', "value[" + gQuestionIndex + "][]")
           .attr('value', $this.val()).attr('class', $this.attr('class')).attr('id', $this.attr('id') + 'Row');
       $newBtn.appendTo($cell);

       i++;
   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T05:25:23.510

`$question_ids`是一个索引数组。您没有发布初始化该数组的代码，所以我不是为什么它是一个索引数组，而是无论如何。另一方面，`$vidresults`来自 POST 数组，除非您指定键（您不是），否则它的索引为零。然后，您遍历`$vidresults`，将键（从零开始）分配给`$vidid`然后尝试`$question_ids`使用此行上的这些键进行访问：

```
$vidquesid = $question_ids[$vidid]; 
```

但是，正如通知所说，`$vidresults`从零开始的第一个键在 中不存在`$question_ids`。如果由于某种原因`$question_ids`必须是一个索引，您可以更改迭代，将一个添加到键，或更改 html 以指定索引（这可能会因为您生成输入元素的方式而产生问题）。

我不知道这种事情是否有任何官方消息来源。[这个问题](https://stackoverflow.com/questions/1763508/passing-arrays-as-url-parameter)描述了 HTTP 数组语法。

**编辑：**你发布了这个：

```
$questionNo = $_POST['numQuestion'][$i]; 
```

但是您没有发布相关的 html/jquery。html 看起来像这样：

```
<th colspan="2">
    Question Number <span class="questionNum">1</span>
    <input type="hidden" class="num_questions" name="numQuestion" value="1">
</th> 
```

而jquery（没关系，只是为了表明它没有将输入类型更改为数组）：

```
function insertQuestion(form) {   
  if (qnum > 5) {
    return;
  }
  var $tbody = $('#qandatbl_onthefly > tbody');
  var $tr = $("<tr class='optionAndAnswer' align='center'>");
  var $qid = $("<td width='5%' class='qid'></td>").text(qnum);
  var $video = $("<td width='17%' class='video'></td>");
  var $questionType = '';

  $('.num_questions').each( function() {
  var $this = $(this);
  var $questionNumber = $("<input type='hidden'
    class='num_questionsRow'>").attr('name',$this.attr('name')+"[]")
      .attr('value',$this.val());
  $qid.append($questionNumber);                              
  ++qnum;
  $(".questionNum").text(qnum);
  $(".num_questions").val(qnum);
  --qremain;
  $(".questionRemain").text(qremain);
}); 
```

所以，我第一次错了，尽管我指出的问题可能仍然需要解决。但问题是您手动从`0`to迭代`count($_POST['numQuestions'])`。But`$_POST['numQuestions']`是一个整数，而不是一个数组，正如[本页](http://php.net/manual/en/function.count.php)在“返回值”部分中指出的那样，`count`将返回`1`一个不是数组的值。因此，您在第一次迭代时尝试访问`$_POST['numQuestions'][0]`，触发索引零不存在的通知。

注意：我看到评论引用了赏金协议的一些早期问题。我希望这不适用于这里。

**编辑 2：**您添加的代码使用 foreach 循环，它永远不会尝试访问未设置的索引。话虽如此，您仍在尝试使用 for 循环对整数进行迭代，并且没有循环构造可以解决此问题。也就是说，你的方法有问题，你必须重新考虑你的意图来决定如何解决它。我想我已经回答了这个问题，但是如果您想重新表述设计问题，我很乐意回答一个单独发布的新问题。

# jsp-tags - bean写入数字类型ID

> ID：14494137
> 
> 赞同：1
> 
> 时间：2013-01-24T04:45:21.127
> 
> 标签：jsp-tags, struts-1, displaytag

我必须使用显示标签显示一列 Netsales，当我在 bean 标签中定义这个 netsales 并通过 scriptlet 获取值时，我得到了字符串类型的净销售额，因此我没有在我的显示表中对该列进行适当的排序。如何将其更改为数字类型？

```
<body>
<%String strCurrency=(String)session.getAttribute("strCurrency");%>
<fieldset><legend>Overall Outstanding</legend>
<bean:define id="NetSales"><bean:write name="NetSales" format="#,##,##0.00"/></bean:define>
<bean:define id="TotalBal"><bean:write name="TotalBal" format="#,##,##0.00"/></bean:define>

<display:table id="customerList" name="CustomerList" requestURI="" export="true" frame="true">
<display:caption style="font-weight:bold;text-align:left;padding-left:7px;line-height:25px;display:none;" >Overall Outstanding</display:caption>
<bean:define id="custno"><bean:write name="customerList" property="custNo" /></bean:define>
<bean:define id="netSales"><bean:write name="customerList" property="netSales" format="#,##,##0.00"/></bean:define>
<bean:define id="openBal"><bean:write name="customerList" property="openBal" format="#,##,##0.00"/></bean:define>

<display:column property="custName" title="Customer Name" sortable="true"  class="l" headerClass="hl"/>
<display:column property="city" title="City" sortable="true" class="l" headerClass="hl"/>
<display:column title="Net Sales" media="html" sortable="true" class="r" headerClass="hr" sortName="NetSales"><%=netSales %></display:column>
<display:column property="netSales" media="xml csv pdf excel"  format="{0,number, #,##,##0.00}" class="r" headerClass="hr" />
<display:column title="Total Balance" media="html" sortable="true"  class="r" headerClass="hr"><%=strCurrency %><%=openBal %></display:column>
<display:column property="openBal" media="xml csv pdf excel"  format="{0,number, #,##,##0.00}" class="r" headerClass="hr"/>
<display:footer media="html">
<tr>
<td colspan="3" align="right">&nbsp;</td>
<td class="r"><%=strCurrency %><%=NetSales%></td>
<td class="r"><%=strCurrency %><%=TotalBal%></td>
</tr>
</display:footer>
</display:table>
</fieldset>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:23:10.817

在 bean:write 中，format 属性将值转换为字符串。如果你想对 int 进行排序，你已经写了这样的东西

```
<display:column title="Net Sales" media="html" sortable="true" class="r" headerClass="hr" sortName="NetSales">
   <bean:write name="NetSales" format="#,##,##0.00"/>
 </display:column> 
```

# web-services - Web 服务可用于获取给定坐标可见的卫星数量

> ID：14494145
> 
> 赞同：4
> 
> 时间：2013-01-24T04:46:01.627
> 
> 标签：web-services, satellite

嗨，我想知道是否有任何网络服务或 URL 可用于通过传递经度和纬度来获取可见卫星的数量。我尝试搜索，但可以找到用作桌面应用程序的服务。我想在不使用 GPS 或 GPRS 的情况下使用这项服务。如果有人知道网络服务或 URL，请告诉我。

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:29:37.180

获取卫星的最佳网络服务是[Heavens-above](http://www.heavens-above.com/)，但是，我不确定您如何自己获取他们的数据库。

除此之外，还有几个选择：

1.  您可以从[Celestrack](http://www.celestrak.com/NORAD/elements/)下载 TLE（基本上是计算卫星位置所需的数据） ，并找到一个库来计算您所在位置的卫星开销。
2.  您可以轻松地从 Web 服务获取 GPS 坐标。看到[这个问题](https://stackoverflow.com/q/1320262/544198)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-16T11:04:27.593

也许你可以看看这个[GNSS 雷达](http://www.taroz.net/GNSS-Radar.html)

它是一个网络应用程序，用于在指定位置显示当前的 GNSS 星座。

这是此 Web 应用程序的源代码 ( [Github](https://github.com/taroz/GNSS-Radar) )。您可以找到提供的 API 和应用程序的源代码。

# prolog - 在 Prolog 中搜索原子

> ID：14494146
> 
> 赞同：1
> 
> 时间：2013-01-24T04:46:13.027
> 
> 标签：prolog

我有大多数复合词，例如：

```
likes(a, b).
likes(c, b).
likes(a, d).
likes(b, c).
likes(c, a).
likes(a, f).
go(a, t).
go(t, d).
go(g, a).
go(f, g).
go(f, a). 
```

我想搜索 Compound Tern，Atom 的值为“a”，另一个 Atom 的值为任意值。

Prolog 返回的结果：

```
likes(a, b).
likes(a, d).
likes(c, a).
likes(a, f).
go(a, t).
go(g, a).
go(f, a). 
```

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:15:08.737

我在这里写了一个通用的助手。我认为需要更少的内置函数......

```
search_facts_by_arg(Functor, Arg, C) :-
    current_functor(Functor, Arity),
    Arity >= 2, % because of 'value of the other Atom is any value.'
    length(Args, Arity),
    C =.. [Functor|Args],
    clause(C, true),
    once((arg(_, C, A), A == Arg)). 
```

*   [current_functor](http://www.swi-prolog.org/pldoc/doc_for?object=current_functor/2)（函子，Arity）
*   Arity [>=](http://www.swi-prolog.org/pldoc/doc_for?object=%28%3E=%29/2) 2
*   [长度](http://www.swi-prolog.org/pldoc/doc_for?object=length/2)（Args，Arity）
*   C [=..](http://www.swi-prolog.org/pldoc/doc_for?object=%28=..%29/2) [函子|Args]
*   [子句](http://www.swi-prolog.org/pldoc/doc_for?object=clause/2)（C，真）
*   [一次](http://www.swi-prolog.org/pldoc/doc_for?object=once/1)（可调用）
*   [arg](http://www.swi-prolog.org/pldoc/doc_for?object=arg/3) (_, C, A)
*   A [==](http://www.swi-prolog.org/pldoc/doc_for?object=%28==%29/2)精氨酸

呸...

测试：

```
?- search_facts_by_arg(go, a, C).
C = go(a, t) ;
C = go(g, a) ;
C = go(f, a) ;
false. 
```

*编辑*：在@false'建议之后，代码可以简化

```
search_facts_by_arg(Functor, Arg, C) :-
    functor(C, Functor, 2),
    clause(C, true),
    once((arg(_, C, A), A == Arg)). 
```

这是[函子](http://www.swi-prolog.org/pldoc/doc_for?object=functor/3)/3 文档。基本的内置语句是 Clause/2，这里是另一种简化的方式，使用 univ 构建“模板”头：

```
search_facts_by_arg(Functor, Arg, C) :-
    C =.. [Functor,_,_],
    clause(C, true),
    once((arg(_, C, A), A == Arg)). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:32:35.047

首先，您需要“具体化”谓词。你的理论变成：

```
do(likes, a, b).
do(likes, c, b).
do(likes, a, d).
do(likes, b, c).
do(likes, c, a).
do(likes, a, f).
do(go, a, t).
do(go, t, d).
do(go, g, a).
do(go, f, g).
do(go, f, a). 
```

添加以下内容：

```
has_value(X) :- do(_, X, _)
has_value(X) :- do(_, _, X) 
```

你完成了。

你可以使用像 =.. 这样的元谓词来避免改变你的理论。个人认为这是错误的做法。最好从一开始就对问题进行正确的形式化。

# javascript - 按钮验证

> ID：14494148
> 
> 赞同：2
> 
> 时间：2013-01-24T04:46:16.860
> 
> 标签：javascript, jquery

我首先在电子邮件（强制性和正确格式）上进行验证，然后在按钮提交上进行文件上传（空白或正确格式）。
此处电子邮件验证良好，但在文件上传中，如果它为空白，它也会显示不需要的错误。

代码：

```
<script type="text/javascript">

    $(document).ready(function () {

     $("#button").click(function () {

         var email = $("#person_email").val();
         var img = $("#person_avatar").val();

         if (email == null || email == "" || !email.match(/^[a-z0-9_\+-]+(\.[a-z0-9_\+-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*\.([a-z]{2,4})$/))

         {
             $("#valid").show();
             return false;

         } else if (!img == "" || !img.match(/(\.bmp|\.png|\.jpg|\.jpeg|\.gif)$/))

         {
             $("#valid_1").show();
             return false;
         } else {
             return true;
         }
     });
 });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T05:00:27.070

尝试改变

```
(!img == "" || !img.match(/(\.bmp|\.png|\.jpg|\.jpeg|\.gif)$/)) 
```

至

```
(!img == "" && !img.match(/(\.bmp|\.png|\.jpg|\.jpeg|\.gif)$/)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T05:00:39.060

使用 and 代替 or。可能也值得检查`null`这个：

```
...
} else if (img != null && img != "" && !img.match(/(\.bmp|\.png|\.jpg|\.jpeg|\.gif)$/)) {
     $("#valid_1").show();
     return false;
} 
```

问题是您说“当它不为空*或*文件格式不正确时，显示错误消息”。由于`img == ""`将不符合第一个条件，因此它属于第二个。由于`""`不是您批准的文件类型之一，因此它*通过*了该测试，并进入错误代码。

相反，您需要说“当它不为空*且*文件格式不正确时，显示消息”。这样，当它为空时，第一次测试失败，因此整个条件失败。

`if`实际上，无论您在该字段中输入什么，它都会进入该块 - 如果它是空的，那么它是一个错误的文件类型，但如果它不是空的，那么它就不是空的，所以它通过了第一个测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T05:46:24.383

```
(!img == "" || !img.match(/(\.bmp|\.png|\.jpg|\.jpeg|\.gif)$/))
(!img == "" && !img.match(/(\.bmp|\.png|\.jpg|\.jpeg|\.gif)$/)) 
```

编辑这个。

# php - 从下拉 onchange 重定向中获取值

> ID：14494153
> 
> 赞同：0
> 
> 时间：2013-01-24T04:46:44.387
> 
> 标签：php, javascript, redirect, drop-down-menu, onchange

我有从下拉 onchange 重定向，当我选择一个值时，当我从下拉 onchange 重定向重定向时页面不是 changet 值。我的 javascript

```
<script language="JavaScript" type="text/javascript">
                    function redirect(site){
                        window.location= site
                    }
                </script> 
```

在我这样的表格上

```
<select name="bulan" onchange="redirect(this.value)">
                    <option value="#">Pilih Bulan</option>
                    <option value="<?= base_url(); ?>index.php/kalender/cari_agenda/<?= $this->uri->segment(3); ?>/01">Januari</option>
                    <option value="<?= base_url(); ?>index.php/kalender/cari_agenda/<?= $this->uri->segment(3); ?>/02">Februari</option>
                    <option value="<?= base_url(); ?>index.php/kalender/cari_agenda/<?= $this->uri->segment(3); ?>/03">Maret</option>
                    <option value="<?= base_url(); ?>index.php/kalender/cari_agenda/<?= $this->uri->segment(3); ?>/04">April</option>
                    <option value="<?= base_url(); ?>index.php/kalender/cari_agenda/<?= $this->uri->segment(3); ?>/05">Mei</option>
                    <option value="<?= base_url(); ?>index.php/kalender/cari_agenda/<?= $this->uri->segment(3); ?>/06">Juni</option>
                    <option value="<?= base_url(); ?>index.php/kalender/cari_agenda/<?= $this->uri->segment(3); ?>/07">Juli</option>
                    <option value="<?= base_url(); ?>index.php/kalender/cari_agenda/<?= $this->uri->segment(3); ?>/08">Agustus</option>
                    <option value="<?= base_url(); ?>index.php/kalender/cari_agenda/<?= $this->uri->segment(3); ?>/09">September</option>
                    <option value="<?= base_url(); ?>index.php/kalender/cari_agenda/<?= $this->uri->segment(3); ?>/10">Oktober</option>
                    <option value="<?= base_url(); ?>index.php/kalender/cari_agenda/<?= $this->uri->segment(3); ?>/11">November</option>
                    <option value="<?= base_url(); ?>index.php/kalender/cari_agenda/<?= $this->uri->segment(3); ?>/12">Desember</option>
                </select> 
```

我如何获得从此表单中选择的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:10:39.110

根据我的评论，您正试图在 URL 中的最后一个参数上选择当前选项。你只需要`selected="selected"`. 尝试这个：

```
<select name="bulan" onchange="redirect(this.value)">
    <option value="#">Pilih Bulan</option>
    <option value="<?= base_url(); ?>index.php/kalender/cari_agenda/<?= $this->uri->segment(3); ?>/01" <?php if($this->uri->segment(4) == '01') echo 'selected="selected"'; ?>>Januari</option>
    <option value="<?= base_url(); ?>index.php/kalender/cari_agenda/<?= $this->uri->segment(3); ?>/02" <?php if($this->uri->segment(4) == '02') echo 'selected="selected"'; ?>>Februari</option>
    <option value="<?= base_url(); ?>index.php/kalender/cari_agenda/<?= $this->uri->segment(3); ?>/03" <?php if($this->uri->segment(4) == '03') echo 'selected="selected"'; ?>>Maret</option>
    <option value="<?= base_url(); ?>index.php/kalender/cari_agenda/<?= $this->uri->segment(3); ?>/04" <?php if($this->uri->segment(4) == '04') echo 'selected="selected"'; ?>>April</option>
    <option value="<?= base_url(); ?>index.php/kalender/cari_agenda/<?= $this->uri->segment(3); ?>/05" <?php if($this->uri->segment(4) == '05') echo 'selected="selected"'; ?>>Mei</option>
    <option value="<?= base_url(); ?>index.php/kalender/cari_agenda/<?= $this->uri->segment(3); ?>/06" <?php if($this->uri->segment(4) == '06') echo 'selected="selected"'; ?>>Juni</option>
    <option value="<?= base_url(); ?>index.php/kalender/cari_agenda/<?= $this->uri->segment(3); ?>/07" <?php if($this->uri->segment(4) == '07') echo 'selected="selected"'; ?>>Juli</option>
    <option value="<?= base_url(); ?>index.php/kalender/cari_agenda/<?= $this->uri->segment(3); ?>/08" <?php if($this->uri->segment(4) == '08') echo 'selected="selected"'; ?>>Agustus</option>
    <option value="<?= base_url(); ?>index.php/kalender/cari_agenda/<?= $this->uri->segment(3); ?>/09" <?php if($this->uri->segment(4) == '09') echo 'selected="selected"'; ?>>September</option>
    <option value="<?= base_url(); ?>index.php/kalender/cari_agenda/<?= $this->uri->segment(3); ?>/10" <?php if($this->uri->segment(4) == '10') echo 'selected="selected"'; ?>>Oktober</option>
    <option value="<?= base_url(); ?>index.php/kalender/cari_agenda/<?= $this->uri->segment(3); ?>/11" <?php if($this->uri->segment(4) == '11') echo 'selected="selected"'; ?>>November</option>
    <option value="<?= base_url(); ?>index.php/kalender/cari_agenda/<?= $this->uri->segment(3); ?>/12" <?php if($this->uri->segment(4) == '12') echo 'selected="selected"'; ?>>Desember</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:08:55.413

您编写的脚本运行良好。我可以假设页面上的 URL 或其他 js 代码有问题。如果您使用没有协议的 URL（例如 http://），那么它可能会导致重定向问题。

如果您想获得一个类别，就像您在评论中指出的那样。然后我建议这个：

```
<script type="text/javascript">
function redirect(site){
    var category = site.split('/')[5];
    //other code goes here...
}
</script> 
```

# c++ - 如何强制 ld 使用静态库而不是共享库？

> ID：14494158
> 
> 赞同：1
> 
> 时间：2013-01-24T04:47:20.137
> 
> 标签：c++, linker, g++

我正在尝试使用测试库的静态版本按源代码构建。我有 libtest.a 和 libtest.so 可用，所以我使用“-static”选项。但是，看起来 gcc 链接器也在尝试搜索标准数学库的静态版本。知道我可以使用什么选项来链接标准库的共享版本吗？

```
g++ -static main.cpp -o a.out -L. -ltest 
```

错误：

```
/usr/bin/ld: cannot find -lm 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T05:07:43.703

如果您想强制链接器使用特定库的静态版本，您可以使用`:filename`来强制特定库，而不是仅仅给链接器一个“基本”库名称并让它使用它找到的第一个：

```
g++ main.cpp -o a.out -l:./libtest.a 
```

从[http://sourceware.org/binutils/docs-2.23.1/ld/Options.html](http://sourceware.org/binutils/docs-2.23.1/ld/Options.html)：

> ```
> -l namespec
> --library=namespec 
> ```
> 
> 将 指定的存档或目标文件添加`namespec`到要链接的文件列表中。此选项可以使用任意次数。如果 `namespec`是形式`:filename`，ld 将在库路径中搜索一个名为 的文件`filename`，否则它将在库路径中搜索一个名为`libnamespec.a`.
> 
> 在支持共享库的系统上，ld 还可以搜索`libnamespec.a`. 具体来说，在 ELF 和 SunOS 系统上， ld 将在一个目录中搜索一个名为的库 `libnamespec.so`，然后再搜索一个名为`libnamespec.a`. （按照惯例，.so 扩展名表示共享库。）请注意，此行为不适用于`:filename`，它始终指定一个名为`filename`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T21:07:13.667

我从来没有使用过迈克尔的建议，但我会把它藏起来以备将来使用。

我用来*完全*控制库链接的技术是通过完全指定我想要使用的库来完全避免, `-L`, `l`。该命令类似于：`-Bstatic``-Bdynamic`

```
g++ main.cpp -o a.out /usr/local/lib/test.a 
```

或者

```
g++ main.cpp -o a.out /usr/local/lib/test.so 
```

或者

```
g++ main.cpp -o a.out /usr/local/lib/test.so.1.0.0 
```

# regex - R：从正则表达式中提取子表达式出现

> ID：14494160
> 
> 赞同：1
> 
> 时间：2013-01-24T04:47:21.207
> 
> 标签：regex, r

我想使用单个正则表达式从字符串中提取几条数据。我制作了一个模式，其中包括这些片段作为括号中的子表达式。在类似 perl 的环境中，我只需通过代码等将这些子表达式传递给变量`myvar1=$1; myvar2=$2;`- 但是如何在 R 中做到这一点？目前，我发现访问这些事件的唯一方法是通过 regexec。这不是很方便，因为 regexec 不支持 perl 语法和其他原因。这就是我现在必须做的：

```
getoccurence <- function(text,rex,n) { # rex is the result of regexec function
  occstart <- rex[[1]][n+1]
  occstop  <- occstart+attr(rex[[1]],'match.length')[n+1]-1
  occtext  <- substr(text,occstart[i],occstop)
  return(occtext)
}
mytext <- "junk text, 12.3456, -01.234, valuable text before comma, all the rest"
mypattern <- "([0-9]+\\.[0-9]+), (-?[0-9]+\\.[0-9]+), (.*),"
rez <- regexec(mypattern, mytext)
var1 <- getoccurence(mytext, rez, 1)  
var2 <- getoccurence(mytext, rez, 2)  
var3 <- getoccurence(mytext, rez, 3) 
```

显然，这是一个相当笨拙的解决方案，应该有更好的东西。我会很感激任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T04:53:10.873

你看过`regmatches`吗？

```
> regmatches(mytext, rez)
[[1]]
[1] "12.3456, -01.234, valuable text before comma," "12.3456"                                      
[3] "-01.234"                     "valuable text before comma"                   

> sapply(regmatches(mytext, rez), function(x) x[4])
[1] "valuable text before comma" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:27:13.630

在`stringr`中，这是`str_match`或`str_match_all`（如果要匹配字符串中模式的每次出现。 `str_match`返回一个矩阵，`str_match_all`返回一个矩阵列表

```
library(stringr)
str_match(mytext, mypattern)
str_match_all(mytext, mypattern) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T14:34:46.137

`strapply`并且`strapplyc`在[gsubfn 包](http://gsubfn.googlecode.com)中可以一步完成：

```
> strapplyc(mytext, mypattern)
[[1]]
[1] "12.3456"                    "-01.234"                   
[3] "valuable text before comma"

> # with simplify = c argument
> strapplyc(mytext, mypattern, simplify = c)
[1] "12.3456"                    "-01.234"                   
[3] "valuable text before comma"

> # extract second element only 
> strapply(mytext, mypattern, ... ~ ..2)
[[1]]
[1] "-01.234"

> # specify function slightly differently and use simplify = c
> strapply(mytext, mypattern, ... ~ list(...)[2], simplify = c)
[1] "-01.234"

> # same
> strapply(mytext, mypattern, x + y + z ~ y, simplify = c)
[1] "-01.234"

> # same but also convert to numeric - also can use with other variations above
> strapply(mytext, mypattern, ... ~ as.numeric(..2), simplify = c)
[1] -1.234 
```

在上面的示例中，第三个参数可以是一个函数，或者在示例中，一个公式可以转换为一个函数（LHS 代表参数，RHS 是主体）。

# java - 在 jax ws 实现中自定义 wsdl:binding 名称

> ID：14494161
> 
> 赞同：2
> 
> 时间：2013-01-24T04:47:22.647
> 
> 标签：java, web-services, soap, jax-ws

是否可以在 Web 服务中自定义 wsdl:binding 名称。我正在使用 jax ws 实现。

```
@WebService(name="helloworldService",
portName="hellworldport",
serviceName = "helloworldService") 
```

我的绑定是

```
<wsdl:binding name="helloworldServiceSoapBinding" type="tns:helloworldService"> 
```

我想得到它

```
<wsdl:binding name="TestBinding" type="tns:helloworldService"> 
```

有人可以告诉需要进行的更改。

谢谢。

# java - 如何在 Ubuntu 上使用 Mina 增加可用套接字？

> ID：14494173
> 
> 赞同：2
> 
> 时间：2013-01-24T04:48:30.367
> 
> 标签：java, linux, sockets, ubuntu, mina

使用 Mina 2.0.8 时如何增加 ubuntu 上可能打开的套接字数量？一旦我的服务器达到大约 1700 个连接，我就会在我的日志中得到这个：

```
`2013-01-24 04:21:49,465 [NioSocketAcceptor-1] WARN  o.a.m.util.DefaultExceptionMonitor - Unexpected exception.
java.io.IOException: Too many open files
    at sun.nio.ch.ServerSocketChannelImpl.accept0(Native Method) ~[na:1.6.0_20]
    at sun.nio.ch.ServerSocketChannelImpl.accept(ServerSocketChannelImpl.java:163) ~[na:1.6.0_20]
    at org.apache.mina.transport.socket.nio.NioSocketAcceptor.accept(NioSocketAcceptor.java:159) ~[mina-core-2.0.8-SNAPSHOT.jar:na]
    at org.apache.mina.transport.socket.nio.NioSocketAcceptor.accept(NioSocketAcceptor.java:50) ~[mina-core-2.0.8-SNAPSHOT.jar:na]
    at org.apache.mina.core.polling.AbstractPollingIoAcceptor$Acceptor.processHandles(AbstractPollingIoAcceptor.java:506) ~[mina-core-2.0.8-SNAPSHOT.jar:na]
    at org.apache.mina.core.polling.AbstractPollingIoAcceptor$Acceptor.run(AbstractPollingIoAcceptor.java:447) ~[mina-core-2.0.8-SNAPSHOT.jar:na]
    at org.apache.mina.util.NamePreservingRunnable.run(NamePreservingRunnable.java:64) [mina-core-2.0.8-SNAPSHOT.jar:na]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [na:1.6.0_20]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [na:1.6.0_20]
    at java.lang.Thread.run(Thread.java:636) [na:1.6.0_20]` 
```

`当我的文件句柄设置为硬和软的最大 331278 时，这怎么可能？运行“ulimit -n”报告`

 ````
331287
```

并运行“sysctl fs.file-nr”报告

```
fs.file-nr = 1728 0 331287
```

/etc/security/limits.conf 文件的内容

```
* 硬文件 331287
* 软文件 331287

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:56:04.830

有两件事似乎解决了我上面遇到的问题：

1.  专门为“root”用户增加文件句柄，因为在limits.conf 中使用“*”时不包括它。

2.  编辑我的 init.d 脚本以包括为正在创建的进程强制设置 ulimit。在处理进程守护程序文件句柄的 Ubuntu 中显然存在一个已知问题。此链接有详细信息：[http ://www.jayway.com/2012/02/11/how-to-really-fix-the-too-many-open-files-problem-for-tomcat-in-ubuntu/](http://www.jayway.com/2012/02/11/how-to-really-fix-the-too-many-open-files-problem-for-tomcat-in-ubuntu/)`

# hadoop - 修改HDFS的块放置策略

> ID：14494179
> 
> 赞同：2
> 
> 时间：2013-01-24T04:49:33.963
> 
> 标签：hadoop, hdfs

我想修改 HDFS 的默认块放置策略以适合我的应用程序。
例如，我有两个文件，分别是 file1(128MB) 和 file2(128MB)。块大小为 64MB，每个文件将被分成两个块。

我想确保 file1 和 file2 的 block1 都放在同一个数据节点上。如果可能的话，我还想确保副本也放置在同一组数据节点上。

问题 1\. 这可能吗？如果是这样，源代码中的哪些类需要修改？

问题2、*copyFromLocal*等命令是如何映射到hadoop源码中的函数的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T12:00:42.743

可以通过扩展[BlockPlacementPolicy](http://hadoop.apache.org/docs/hdfs/r0.21.0/api/org/apache/hadoop/hdfs/server/namenode/BlockPlacementPolicy.html)接口并将类指向Hadoop 配置文件中的**dfs.block.replicator.classname属性来修改块放置策略的默认行为。**

Hadoop 操作不依赖于特定节点，这使得 Hadoop 对分布式计算中的固有问题更具弹性。在特定节点上有两个文件的块有什么要求？有了已知的需求，就可以找到更好的解决方案。

# android - 触摸后隐藏对话框

> ID：14494182
> 
> 赞同：1
> 
> 时间：2013-01-24T04:49:58.150
> 
> 标签：android

在我的应用程序中，我正在创建一个消息框，如果我在其中触摸它，我想让它不可见，我用来创建消息的代码是

```
public void messageBox2() {
    // TODO Auto-generated method stub
    //Dialog    myDialog = new Dialog(MainActivity.this);
    Dialog myDialog = new Dialog(this,R.style.PauseDialog);
       myDialog.setContentView(R.layout.customhelp);
       myDialog.setTitle("Help");
       myDialog.setCancelable(true);
              myDialog.show();
} 
```

如果我单击消息框中的任何位置，我想让它消失

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T05:01:01.453

在您的布局中，在代码中创建一个按钮`customhelp`将遵循

```
close_btn   =   (Button)myDialog.findViewById(R.id.close);
close_btn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            myDialog.dismiss();
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:52:32.953

您可以通过将`setOnClickListener`Dialog 的父布局设置为：

```
RelativeLayout relativelayout =(RelativeLayout)findViewById(R.id.your_layout_id);
relativelayout.setOnClickListener(new View.OnClickListener(){
@Override
             public void onClick(View v){
                 // cancel dialog here
               myDialog.dismiss();
             }
         }); 
```

# android - 使用按钮单击控制 ImageView

> ID：14494184
> 
> 赞同：2
> 
> 时间：2013-01-24T04:50:29.380
> 
> 标签：android, android-layout, android-intent, android-imageview, android-button

我这里有四组按钮，`RelativeLayout`它们下面有一个空的，每当我单击其中一个时，另一个布局将在空中弹出，`RelativeLayout`其中包含另外两组按钮，即`ON`和`OFF`。我的问题出现在`ON`和`OFF`按钮中，因为我希望在单击按钮`ImageView`时出现并在单击`ON`按钮时消失`OFF`。这是我的布局和代码：

这是 4 个按钮的布局：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/RelativeLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/green_bg"
    tools:context=".AleccMainActivity" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="@string/please_choose"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#CAFFD8" />

    <LinearLayout
        android:id="@+id/linearLayout"
        android:layout_width="fill_parent"
        android:layout_height="70dp"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView1"
        android:background="#95FF4F" >

        <Button
            android:id="@+id/btnAcu"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:background="@drawable/tab_acu"
            android:onClick="gotoACU" />

        <Button
            android:id="@+id/btnFan"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:background="@drawable/tab_fan"
            android:onClick="gotoFan" />

        <Button
            android:id="@+id/btnLight"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:background="@drawable/tab_light"
            android:onClick="gotoLight" />

        <Button
            android:id="@+id/btnHallway"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:background="@drawable/tab_hallway"
            android:onClick="gotoHallway" />
    </LinearLayout>

    <RelativeLayout
        android:id="@+id/rl"
        android:layout_width="fill_parent"
        android:layout_height="200dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/linearLayout" >

    </RelativeLayout>

</RelativeLayout> 
```

这是当我单击这四个中的一个时将出现的布局之一的代码（它们内部具有相同的按钮，但要显示的图像不同）：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/green_bg"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="16dp" >

        <Button
            android:id="@+id/button1"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:onClick="offFAN"
            android:text="@string/off" />

        <Button
            android:id="@+id/button2"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:onClick="onFAN"
            android:text="@string/on" />
    </LinearLayout>

        <ImageView
            android:id="@+id/fanOn"
            android:layout_below="@+id/linearLayout1"
            android:layout_alignParentLeft="true"
            android:layout_width="wrap_content"
            android:layout_height="100dp"
            android:contentDescription="@string/acu"
            android:visibility="invisible"
            android:src="@drawable/fan_on" />

</RelativeLayout> 
```

这是使用`ON`和`OFF`按钮调用布局时的功能：

```
public void gotoFan(View v){
    // Do something in response to button
    RelativeLayout rlFAN = (RelativeLayout) findViewById(R.id.rl);
    getLayoutInflater().inflate(R.layout.alecc_fan, rlFAN, true);
} 
```

这就是我认为我的问题存在的地方：

```
public void offFAN (View view) {
    String messageToSend = "FANS OFF";
    SmsManager.getDefault().sendTextMessage(number, null, messageToSend, null,null);
    Toast.makeText(AleccMainActivity.this,"Electric Fans turned OFF", Toast.LENGTH_SHORT).show();

    ImageView fanON = (ImageView) findViewById(R.id.fanOn);
    fanON.setVisibility(View.GONE);     
}

public void onLIGHT (View view) {
    String messageToSend = "LIGHTS ON";
    SmsManager.getDefault().sendTextMessage(number, null, messageToSend, null,null);
    Toast.makeText(AleccMainActivity.this,"Flourescent Lights turned ON", Toast.LENGTH_SHORT).show();

    ImageView lightON = (ImageView) findViewById(R.id.lightOn);
    lightON.setVisibility(ImageView.VISIBLE);       
} 
```

我无法让它工作。当我第一次单击 4 个按钮中的一个，然后单击`ON`/`OFF`它似乎很好，但是，每当我单击另一个按钮时，图像不再可见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T06:18:48.187

您的问题实际上在本节中：

```
public void gotoFan(View v){
    // Do something in response to button
    RelativeLayout rlFAN = (RelativeLayout) findViewById(R.id.rl);
    getLayoutInflater().inflate(R.layout.alecc_fan, rlFAN, true);
} 
```

每次你打电话给

`getLayoutInflater().inflate(R.layout.alecc_fan, rlFAN, true);`

它`RelativeLayout`在由`R.id.rl`. 这些布局中的每一个都有一个`ImageView`命名相同的东西（例如 fanOn），因此当您尝试在 fanOn 上设置可见性时，它会打开层次结构中的第一个子元素的可见性，该子元素会被所有后续布局覆盖。

请记住：您的`.inflate`方法添加了一个子布局。它不会取代现有的东西，它们都作为父布局的子级在层次结构中。此外，如果布局发生了一些奇怪的事情，请在调试器中查看它并检查其属性。在这种情况下，当您反复按开和关时，您会看到一个不断扩大的孩子列表。

# ios - 删除作为父 NSManagedObject 集合的一部分的 NSManagedObject

> ID：14494185
> 
> 赞同：0
> 
> 时间：2013-01-24T04:50:31.470
> 
> 标签：ios, core-data

我有一个父 NSManagedObject（Person），每个人都可以有警报，这也是一个 NSManagedObject。当我转到 Person 对象的详细视图查看警报时，我希望能够删除警报。我目前在表格中显示的内容：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *SimpleCellIdentifier = @"SimpleCellIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:SimpleCellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:SimpleCellIdentifier];
    }

    NSDate *theDate = [[self sortedTimes] objectAtIndex:indexPath.row];
    cell.textLabel.text = [self.dateFormatter stringFromDate:theDate];

    return cell;
}

- (NSMutableArray *)sortedTimes {
    NSMutableArray *tempArray = [[NSMutableArray alloc] initWithArray:[self.person.alarms allObjects]];     // Alarm NSManagedObject
    tempArray = [tempArray valueForKey:@"time"];                                                            // NSDate value
    return [[NSMutableArray alloc] initWithArray:[tempArray sortedArrayUsingSelector:@selector(compare:)]];
} 
```

所以我想我可以通过这样做来删除最后一个对象：

```
[[self sortedTimes] removeLastObject];
[self saveContext]; 
```

但我相信我指向的不是实际的警报对象，因为我的 sortedTimes 可能不指向实际的警报集。我想知道在这种情况下我应该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T05:26:12.420

你只是对做什么感到困惑`removeLastObject`。它正在从您的数组中删除从中返回的对象`sortedItems`，它没有对 Alarm 对象、您的上下文或持久存储做任何事情。我不喜欢这里的设计，但考虑到你所拥有的，你应该能够做到以下几点。

```
Alarm *alarmToDelete = [[self sortedTimes] lastObject];
[myManagedObjectContext deleteObject:alarmToDelete];
[myManagedObjectContext save:&error]; 
```

这将从您的上下文中删除警报 NSManagedObject 并保存上下文（这会将其保存到您的持久存储中）。然后，您将需要重新加载您的表，以便它反映更改。

# ms-access - 访问时 MS ACESS 错误

> ID：14494186
> 
> 赞同：2
> 
> 时间：2013-01-24T04:50:32.357
> 
> 标签：ms-access, vb6

我正在开发一个招生系统。但我收到此错误：`You tried to execute a query that does not include the specified expression..`

我正在使用以下代码：

```
Private Function RefreshAdvisoryList()

    Dim vRS As New ADODB.Recordset
    Dim sSQL As String

    'clear list
    txtsection.Clear

    'On Error GoTo ReleaseAndExit

        sSQL = "SELECT tblSection.SectionID, tblSection.SectionTitle, tblAdviser.SchoolYear, tblDepartment.DepartmentTitle, tblYearLevel.YearLevelTitle, tblAdviser.TeacherID" & _
                " FROM (tblDepartment INNER JOIN (tblYearLevel INNER JOIN tblSection ON tblYearLevel.YearLevelID = tblSection.YearLevelID) ON tblDepartment.DepartmentID = tblSection.DepartmentID) INNER JOIN tblAdviser ON (tblSection.SectionID = tblAdviser.SectionID) AND (tblDepartment.DepartmentID = tblAdviser.DepartmentID)" & _
                " GROUP BY tblSection.SectionID, tblSection.SectionTitle, tblAdviser.SchoolYear, tblDepartment.DepartmentTitle, tblYearLevel.YearLevelTitle, tblAdviser.TeacherID" & _
                " HAVING (((tblTeacher.TeacherID)='" & curTeacher.TeacherID & "') AND tblSection.SchoolYear='" & Me.txtSchoolYear.Text & "')" & _
                " ORDER BY tblAdviser.SchoolYear DESC;"

    If ConnectRS(con, vRS, sSQL) = False Then
        'fatal
        'temp
        MsgBox "Unable to connect Teacher's Advisory Recordset.", vbCritical
        'GoTo ReleaseAndExit
    End If

    If AnyRecordExisted(vRS) = True Then
        While vRS.EOF = False
        txtsection.AddItem vRS!SectionTitle
        vRS.MoveNext
   Wend
    End If

'Exit Function
'ReleaseAndExit:
'    Set vRS = Nothing
End Function 
```

看看这个截图： ![在此处输入图像描述](../Images/6c8fc9c8c501ea54e42a0727b81b10fb.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T05:34:29.683

该`HAVING`子句引用了这两个字段：

*   `tblTeacher.TeacherID`
*   `tblSection.SchoolYear`

`SELECT`字段列表包括：

*   `tblAdviser.TeacherID`
*   `tblAdviser.SchoolYear`

更改查询，使所有引用`TeacherID`都来自同一个表。对 做同样的事情`SchoolYear`。

顺便说一句，`tblTeacher`甚至不包含在查询的数据源中。

如果可能，请启动 Access 会话并使用查询设计器来构建此查询。它将帮助您避免此类错误。一旦你有一个在 Access 中工作的查询，然后调整你的代码以生成相同的工作 SQL 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:03:54.180

Group by 必须与聚合函数一起使用，以便可以检索组的组合结果，您没有使用任何聚合函数。

参考 - [http://www.w3schools.com/sql/sql_groupby.asp](http://www.w3schools.com/sql/sql_groupby.asp)

从查询中删除 group by 并在 where 子句中添加 having 子句。

说明您期望的数据类型，以便我们在查询中为您提供帮助。

# c# - 在 ObjectCache 中存储项目：无法获取旧值

> ID：14494189
> 
> 赞同：1
> 
> 时间：2013-01-24T04:50:54.917
> 
> 标签：c#, asp.net-mvc-4, objectcache

我使用ObjectCache 的**MemoryCache.Default**实例在 MVC 应用程序中存储数据；每次我保存一些项目而不是立即阅读它时，我都会看到项目按预期存储。但是当创建 Cashing 类的新实例（我的意思是使用 ObjectCache 的类）时，我无法访问旧值。我已经实现了单例只保留ObjectCache 的一个实例，但这对我没有帮助。

```
//here is single instance of caching object
public class CacheSingleton
{
    private static CacheSingleton instance;

    private CacheSingleton() { cache = MemoryCache.Default; }

    public static CacheSingleton Instance
    {
        get 
        {
            if (instance == null)
            {
                instance = new CacheSingleton();
            }
            return instance;
        }
    }

    public ObjectCache cache { get; private set; }
}

    // and here is piece of caching class 
    .........
    private ObjectCache cache;

    public DefaultCacheProvider()
    {
        cache = CacheSingleton.Instance.cache;
    }

    public object Get(string key)
    {
        return cache[key];
    }

    public void Set(string key, object data, int cacheTime, bool isAbsoluteExpiration)
    {
        CacheItemPolicy policy = new CacheItemPolicy();
        if (isAbsoluteExpiration)
        {
            policy.AbsoluteExpiration = DateTime.Now + TimeSpan.FromMinutes(cacheTime);
        }
        else
        {
            policy.SlidingExpiration = TimeSpan.FromMinutes(cacheTime);
        }

        cache.Add(new CacheItem(key, data), policy);
    }

    public bool IsSet(string key)
    {
        return (cache[key] != null);
    }

    public void Invalidate(string key)
    {
        cache.Remove(key);
    } 
```

任何人都可以解释为什么缓存类的每个新实例（最后一个代码）我无法访问旧值。谢谢。

# hibernate - 在 Hibernate ORM 中总是需要 DAO 层？

> ID：14494190
> 
> 赞同：1
> 
> 时间：2013-01-24T04:50:57.763
> 
> 标签：hibernate, database-design, orm, dao

我想我在实现 Hibernate ORM 时完全搞糊涂了。

我的理解是 Hibernate 可以让你消除 DAO 层。并不是说它是强制性的（甚至是有利的），但它确实让你这样做。

但是，就我而言，我不明白这是怎么发生的。我将使用我系统的两个实体——公司和公司注册来解释我的案例。

公司类别 -

```
@Entity
@Table(name = "Company")
public class Company extends LightEntity implements BaseSerializable {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "Id")
    private int id;

    @Column(name = "Code")
    private String code;

    @Column(name = "Name")
    private String name;

    @Column(name = "Address")
    private String address;

    @Column(name = "ContactNumber1")
    private String contactNumber1;

    @Column(name = "ContactNumber2")
    private String contactNumber2;

    @Column(name = "EMail")
    private String email;

    @OneToMany(fetch = FetchType.LAZY, mappedBy = "company", cascade = CascadeType.ALL)
    private List<CompanyRegistration> companyRegistrations;

    public Company(String code, String name) {
        this.code = code;
        this.name = name;
    }

    // getters and setters follow..
} 
```

公司注册类 -

```
@Entity
@Table(name = "CompanyRegistration")
public class CompanyRegistration extends LightEntity implements BaseSerializable {

    @Id
    @Column(name = "RegistrationNumber")
    private String registrationNumber;
    @Column(name = "YearOfRegistration")
    private String yearOfRegistration;
    @ManyToOne
    @JoinColumn(name = "CompanyId", nullable = false)
    private Company company;

    public CompanyRegistration(String registrationNumber, String yearOfRegistration, Company company) {
        this.registrationNumber = registrationNumber;
        this.yearOfRegistration = yearOfRegistration;
        this.company = company;
    }

    public String getRegistrationNumber() {
        return registrationNumber;
    }
    public String getYearOfRegistration() {
        return yearOfRegistration;
    }
    public String getCompanyId() {
        return company.Id;
    }
} 
```

在 Company 类中，我指定`CascadeType.All`Hibernate 负责保存、更新、删除等级联操作，并将它们持久保存到数据库中。因此，CompanyRegistration 集合中的任何更改都将直接反映到其数据库表中。因此，Hibernate 将满足我持久保存 CompanyRegistration 集合的需求。

但是，我仍然必须使用 DAO 层来持久化 Company 对象，不是吗？我知道我可以在该层中使用 HQL 而不是标准 SQL，但这不是我关心的问题。还有一个单独的层。

我很可能误解了这里的概念。

所以，我的问题是事情是这样运作的吗？此外，除了缓存（对我来说是一个很大的优势）、自动持久化集合（但不是所有者对象）和 HQL（由于我还没有使用过，因此无法对此发表评论）之外，Hibernate 提供了哪些优势？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:03:10.727

您的 DAO 实现将仅用于调用 EntityManager 中的方法，您无需创建要插入的 SQL 或 HQL，您可以通过调用 EntityManager 的 persist 方法轻松完成。

```
public class CompanyDAOImpl{

    public void save(Company company){ 
        entityManager.persist(company) 
    }

} 
```

entityManager 可以通过弹簧配置进行设置，也可以将其设置为对象……这取决于您如何创建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:29:11.763

我想你还没有理解`DAO layer`aka`Data Access Objects`层本身的含义。无论你使用什么 ORM 工具，你总是需要一个 DAO 层。每个实体在 DAO 层都有它的 DAO 类。正是这一层，每个实体类创建会话对象并在**持久**对象上调用休眠 api 即 save()、update()、delete() 等。是的，您需要了解hibernate 中的[HQL](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)。我们将它用于休眠的某些功能，例如 createQuery() api。并阅读[有关](http://corej2eepatterns.com/Patterns2ndEd/DataAccessObject.htm)DAO 模式的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T09:46:24.207

Hibernate 最大的优势是对象关系映射。它会自动为您在关系数据和对象之间进行映射。如果没有 Hibernate，您将不得不编写自己的代码来手动创建域对象，或每次检索的数据集中的对象列表。

例如，当您使用 Hibernate 检索对象时`session.get(objectId)`，它会返回一个所谓的托管对象。当事务提交时，Hibernate 将对这个对象进行脏检查（检查修改），并在必要时将更改刷新到 db。您实际上不需要调用更新操作。

其他好处包括：

*   LazyLoading：关系集合可以在需要时稍后加载，而不是一次加载所有内容。它提高了性能，因为如果您的集合很大，在需要时加载所有内容会消耗大量内存。
*   并发处理：Hibernate 为您提供了处理并发的特性，例如 OptimisticLocking。如果使用 OptimisticLocking，每次将对象保存到数据库时，它都会检查版本列中是否存在冲突，如果存在则抛出异常。

否则，您将不得不实现自己的来处理这些场景。

关于 EntityManager 和 Session 的区别，它们是 Hibernate 的两个 ORM API 实现。EntityManager 是[JPA](http://en.wikipedia.org/wiki/Java_Persistence_API)的实现。语法和用法之间存在一些差异。您可以选择使用其中任何一个。你最好坚持一个。我已经看到了在这两者之间混合的程序。

# c# - 同时执行相同的多项任务

> ID：14494192
> 
> 赞同：6
> 
> 时间：2013-01-24T04:50:59.050
> 
> 标签：c#, asp.net

我在 Asp.net C# 中遇到问题

我有以下代码： List objectList = new List();

```
foreach(var item in listItem)
{
  object obj = getData (item);
  objectList.add(obj);
}
Console.Write("Finish all"); 
```

每次`getData(item);' 触发大约需要 1 秒；

我希望所有项目`listItem`同时运行，然后在`foreach`完成后执行`Console.write("Finish all")`

我怎样才能做到这一点？

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T04:55:43.230

您可以尝试[Parallel.Foreach](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.foreach.aspx)。每个迭代都可以并行运行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T04:57:30.653

您可以使用[`Task`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)它来完成它：

```
 var tasks = listItem.Select(item => Task.Factory.StartNew(() => aaa()));
 Task.WaitAll(tasks.ToArray());

 Console.Write(); 
```

如果您不需要等待所有任务完成，只需跳过`WaitAll`：

```
 var tasks = listItem.Select(item => Task.Factory.StartNew(() => aaa()));
 Console.Write(); 
```

对于 .NET 3.5，您可以使用 ThreadPool：

```
 listItem.ForEach(item => ThreadPool.QueueUserWorkItem(state => aaa()));
 Console.Write(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-24T04:59:05.350

```
 using System.Threading;
 using System.Threading.Tasks;

 List<Task> tasks = new List<Task>();
 foreach(item in listItem)
 {
       tasks.Add(Task.Factory.StartNew(() => aaa()));
 }
// If you want the Console.Writeline to execute immediately after starting the tasks
Console.Writeline();            
Task.WaitAll(tasks.ToArray());
Console.Writeline("Finised executing all tasks"); 
```

* * *

如果你想使用线程来做到这一点，你可以：

```
List<ManualResetEvent> resetEvents = new List<ManualResetEvent>();
.
.
.

 foreach(item in lisItem)
            {
                Thread thread = new Thread(new ParameterizedThreadStart(aaa));
                ManualResetEvent resetEvent = new ManualResetEvent(false);
                resetEvents.Add(resetEvent);
                thread.Start(resetEvent);

            }
            Console.WriteLine();
            WaitHandle.WaitAll(resetEvents.ToArray<WaitHandle>());
            Console.WriteLine("Finised executing all threads");

        }

}
.
.
.

    void aaa(object data)
    {
        ManualResetEvent resetEvent = data as ManualResetEvent;
        // completed execution
        Console.WriteLine(".");
        resetEvent.Set();
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T02:22:51.500

```
 int itemCount = ItemList.Count;

             List<object> objectList = new List<object>();
            ManualResetEvent[] resetEvents = new ManualResetEvent[itemCount];

            for (int i = 0; i < itemCount; i++)
            {

                var item= ItemList[i];

                resetEvents[i] = new ManualResetEvent(false);
                ThreadPool.QueueUserWorkItem(new WaitCallback((object index) =>
                {
                    ItemCalEvent item = getData(item);

                    lock (objectList)
                        objectList.Add(item);

                    resetEvents[(int)index].Set();
                }), i);
            }
            WaitHandle.WaitAll(resetEvents); 
```

这在 .net 3.5 中很好

# php - 命名文件的算法，没有重复的可能性

> ID：14494197
> 
> 赞同：0
> 
> 时间：2013-01-24T04:51:30.907
> 
> 标签：php

有人可以在 php 中建议一个复杂的算法来命名将被上传的文件，以便它永远不会重复吗？我想知道拥有数百万视频的 youtube 是如何做到的？

现在我使用一个随机数并获取其 16 个字符的 sha1 哈希并用该名称命名文件，但我很确定它最终会重复并生成错误，因为文件将无法保存在文件系统中。

就像是：

```
$name = sha1(substr(sha1(md5($randomnumber)),0,10)); 
```

有人曾经告诉我，破解这段代码生成的哈希是不可能的，或者至少需要 100 年才能破解它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T04:55:06.800

你可以这样做：

```
$uniq = md5(uniqid(rand(), true)); 
```

您还可以应用上传文件的用户的用户 ID，例如：

```
$uniq = $user_id_of_uploader."_".md5(uniqid(rand(), true)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T05:03:32.317

使用预先存在的实现生成 GUID（有时称为 UUID）。GUID 对于每台计算机、时间戳、在该时间戳期间生成的 GUID 等都是唯一的，因此它们永远不会重复。

如果制作 GUID 不可用，则在整个输入上使用 sha1 并使用它的整个输出是第二好的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T05:06:48.930

```
$name = 'filename'.$user_id(if_available).md5(microtime(true)).'extension'; 
```

尝试从文件名中删除特殊字符和空格。

**如果您将名称保存在数据库中，那么递归函数可能会有所帮助。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T05:00:39.347

使用适当的方法执行以下操作。

*   首先切片其扩展名和文件名
*   现在修剪文件名
*   将多个空格变为单个空格
*   将特殊字符和空格替换为`_`
*   前缀与当前时间戳使用 [`strtotime`](http://in3.php.net/manual/en/function.strtotime.php)和盐使用`md5(uniqid(rand(), true))`分隔`_`（感谢@Sudhir）
*   使用特殊签名后缀[`str_pad`](http://php.net/manual/en/function.str-pad.php)并限制文件的文本长度
*   现在再次添加扩展名和格式化文件名

希望它有意义。

谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T05:20:49.083

我通常只为文件名生成一个字符串（实现并不是非常重要），然后检查是否已经存在具有该名称的文件。如果是这样，请在其上附加一个计数器。如果您不知何故有很多具有相同基本文件名的文件，这可能效率低下，但假设您的字符串足够独特，它不应该经常发生。还有检查文件是否存在的开销。

```
$base_name = generate_some_random_string(); // use whatever method you like
$extension = '.jpg'; // Change as necessary
$file_name = $base_name . $extension;
$i = 0;
while (file_exists($file_name)) {
    $file_name = $base_name . $i++ . $extension;
}
/* insert code to save the file as $file_name */ 
```

# c - 字符串数组，其中行数由用户在 C 中输入

> ID：14494200
> 
> 赞同：0
> 
> 时间：2013-01-24T04:51:50.177
> 
> 标签：c

```
char words[wordCount][MAX_WORD_LENGTH]; 
```

我知道我需要使用 malloc 才能拥有用户定义的数组长度，但是我将如何使用二维数组来做到这一点？

```
char words[MAX_WORD_LENGTH];
words = (words *) malloc (wordCount) 
```

这样的东西会起作用吗？刚开始使用c，所以我还是习惯了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T05:01:32.917

此[链接](http://pleasemakeanote.blogspot.in/2008/06/2d-arrays-in-c-using-malloc.html)可能会有所帮助

指针可以很容易地用于使用 malloc 在 C 中创建二维数组。这个想法是首先创建一个一维指针数组，然后为每个数组条目创建另一个一维数组。

另一个答案存在于堆栈溢出中，它自 [malloc() 用于 2D 数组（使用指针到指针）](https://stackoverflow.com/questions/2842135/c-programming-malloc-for-a-2d-array-using-pointer-to-pointer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:01:51.993

你必须先这样做：

`char *words = calloc(wordCount * MAX_WORD_LENGTH, sizeof(char));`

和访问`words[i][j] as words[i*MAX_WORD_LENGTH + j]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T05:06:19.260

如果您想为单词数组中的每个单词指针设置用户定义的大小：

```
char * words[wordCount];
for (i =0; i< wordCount; i++)
words[i] = malloc(sizeof(char)*User_defined_Size); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T05:07:50.150

如果您想使用两个下标索引数组`words[i][j]`，那么您需要进行两次分配（好吧，如果您对指针的处理非常有信心，您可以将其分配一次，但如果您是问这个问题）。

您需要为指针分配足够的空间，并为数据分配足够的空间：

```
char **words = malloc(wordCount * sizeof(*words));
char  *data  = malloc(wordCount * MAX_WORD_LENGTH);

if (words == 0 || data == 0)
{
    free(data);
    free(words);
    ...report error?...
}

for (int i = 0; i < wordCount; i++)
    words[i] = data + (i * MAX_WORD_LENGTH);

...now you can use words[i][j] to access the jth character of the ith word... 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-24T05:13:13.880

```
char **words = NULL;
words = (char **)malloc(sizeof(char*) * user_defined_size_A);
for(i = 0; i < user_defined_size_A; i++) {
   words[i] = (char*) malloc(sizeof(char) * user_defined_size_B);
} 
```

你可以试试这个...

# android - 搜索栏背景的 Android 图形问题

> ID：14494201
> 
> 赞同：1
> 
> 时间：2013-01-24T04:51:53.073
> 
> 标签：android

![在此处输入图像描述](../Images/4b44ca452cd6202cf3ae6168f7f6844a.png)

所以我将此图像设置为搜索栏的背景。在不同的屏幕上，图像会严重倾斜，以至于非常可怕。我尝试做一个 9 补丁，但显然有几个区域我想扩展，所以 9 补丁不是最好的选择。我想要实现的是，拉伸背景并保持数字成比例。这些数字往往要么拉伸太多，要么收缩太多。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T05:04:18.063

这里最简单的选项可能是创建一个`GradientDrawable`设置为视图的背景。您可以[从文档](https://developer.android.com/reference/android/graphics/drawable/GradientDrawable.html)中看到，`GradientDrawable`可以在其构造函数中采用一组颜色，并且它将绘制所有这些颜色，这些颜色均匀分布在封闭视图最终的大小上。这与用于`<shape>`在 XML 中创建可绘制对象的元素相同，但如果您在 Java 代码中对其进行实例化，则可以向渐变比例添加不止三种颜色。

# android - 如何删除自定义视图前面的空间？

> ID：14494211
> 
> 赞同：3
> 
> 时间：2013-01-24T04:53:08.113
> 
> 标签：android, android-actionbar, padding

我正在创建一个自定义的主页图标。自定义代码如下，

```
View customView = getLayoutInflater().inflate(R.layout.action_bar_display_options_custom, null);
customView.findViewById(R.id.action_home).setOnClickListener(
    new OnClickListener() {
        @Override
        public void onClick(View v) {
            toggle();
        }
    });

actionBar.setCustomView(customView, new ActionBar.LayoutParams(
            LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
actionBar.setDisplayShowCustomEnabled(true); 
```

这是`action_bar_display_options_custom.xml`，

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="match_parent"
    android:layout_height="match_parent"
android:orientation="horizontal" >

<ImageView
    android:id="@+id/action_home"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/btn_home" />

<TextView
    android:id="@+id/action_title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> </LinearLayout> 
```

这是截图，

> ![](../Images/e9c842d0ea9cd8bcadc7825078bab4d4.png)

这是主页的图标（该空间不是图像视图的一部分），

> ![](../Images/a079e3e3438ba67181c7efb4fa5850b0.png)

那么，如何删除视图前面的空间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:56:36.237

我通过在我的代码中添加以下行来解决这个问题

```
 getSupportActionBar().setDisplayShowHomeEnabled(false);
  getSupportActionBar().setCustomView(view); // set custom view here
  getSupportActionBar().setDisplayShowTitleEnabled(false);
  getSupportActionBar().setDisplayOptions(0, ActionBar.DISPLAY_SHOW_CUSTOM);
  getSupportActionBar().setDisplayShowCustomEnabled(true); 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:00:16.727

删除您在父布局中设置的填充或边距，这将解决问题。请随时提出疑问，如果这能解决您的问题，请告诉我。

# visual-studio-2012 - Visual Studio Express 2012 for Web 中的 WCF 数据服务在哪里

> ID：14494213
> 
> 赞同：4
> 
> 时间：2013-01-24T04:53:14.043
> 
> 标签：visual-studio-2012, wcf-data-services

我观看了 Julie Lerman[的 EF4.1 和 n 层应用程序](http://msdn.microsoft.com/en-us/data/hh272554)视频，她在解决方案中添加了一个新的 ASP.NET Empty Web Application 项目（VS 2010）。之后，她添加了一个新项目**WCF Data Service**。我在 Visual Studio Express 2012 for Web 中找不到此项目。请你帮助我好吗？这是 express 2012 版本的限制吗？

[这是我在“添加新项目”表单中看到的图像](http://i.stack.imgur.com/kceKI.png)

* * *

我无法回答我的问题，所以：我应该安装“WCF 数据服务 5.2 RTM 工具安装程序” 有关 WCF 数据服务博客的更多详细信息。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:58:46.450

是的，您需要安装“WCF Data Services 5.2 RTM 工具安装程序”。对于 VS 专业版和终极版，我们链接到“WCF 数据服务 - 5.0”的安装程序。对于快递版本，客户需要安装他们需要的版本。

需要注意的一件事 - 即使在 Pro/Ultimate 版本中，安装的版本也是 5.0。对于较新的功能（如新的 JSON 格式），客户将需要安装最新的位，以便他们可以获得所有新的代码生成功能。

谢谢普拉蒂克

# iphone - WCF 服务不适用于 iPhone

> ID：14494214
> 
> 赞同：0
> 
> 时间：2013-01-24T04:53:27.473
> 
> 标签：iphone, ios, web-services, ipad

我有一个 WCF 服务：

```
http://parentportal.technologyorg.com/ParentPortal.svc 
```

我必须访问并获取数据。但不幸的是，我得到了一些 HTML 代码。

我的代码如下

```
-(IBAction)doit:(id)sender{

    NSString *soapMessage = [NSString stringWithFormat:@"<SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http://parentportal.technologyorg.com/ParentPortal.svc\"><SOAP-ENV:Body><GetDictionary></GetDictionary></SOAP-ENV:Body></SOAP-ENV:Envelope>"];

    NSURL *url = [NSURL URLWithString:@"http://parentportal.technologyorg.com/ParentPortal.svc"];
                  NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];
                  NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMessage length]];

                  [theRequest addValue: @"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
                  [theRequest addValue: @"GetStudentTerms" forHTTPHeaderField:@"SOAPAction"];
                  [theRequest addValue: msgLength forHTTPHeaderField:@"Content-Length"];
                  [theRequest setHTTPMethod:@"POST"];
                  [theRequest setHTTPBody: [soapMessage dataUsingEncoding:NSUTF8StringEncoding]];
    NSLog(@"%@",theRequest);
                  NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
    if (theConnection) {
     webData = [NSMutableData data] ;
    }
}
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    NSLog(@"___didReceiveResponse");
    NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *) response;
    NSLog(@"Status code %d", [httpResponse statusCode]);

    [webData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    NSLog(@"___didReceiveData");
    [webData appendData:data];
    NSLog(@"%@",webData);
}

- (void) connectionDidFinishLoading:(NSURLConnection *)connection {
    NSLog(@"___connectionDidFinishLoading");
    NSLog(@"DONE. Received Bytes: %d", [webData length]);
    NSString *xmlData = [[NSString alloc]
                         initWithBytes:[webData mutableBytes]
                         length:[webData length]
                         encoding:NSUTF8StringEncoding];

} 
```

`NSLog`如果我是一些 HTML 代码的输出，我不确定出了什么问题。

谁可以帮我这个事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:07:19.203

试用[SudzC](http://sudzc.com/)基于 SOAP 的 Web 服务定义 WSDL 文件

用于 iPhone 开发的 Objective-C 库的[代码生成。](http://sudzc.com/)

**请按照以下步骤操作**

![在此处输入图像描述](../Images/271daf453d490a939019d5a2a2b49e24.png)

![在此处输入图像描述](../Images/b8a8fb19991d27b02f6129320c8ecc77.png)

# hadoop - 检索路径中包含特殊字符的文件时遇到问题

> ID：14494215
> 
> 赞同：3
> 
> 时间：2013-01-24T04:53:29.207
> 
> 标签：hadoop, hdfs

我在日期范围内运行了一堆 m/r 报告，现在有一系列目录，例如：

```
/user/michael/output/TrueListingSellThroughFromLeafCategory/{20120101,20120102,20120103,20120104,20120105,20120106,20120107}
/user/michael/output/TrueListingSellThroughFromLeafCategory/{20120108,20120109,20120110,20120111,20120112,20120113,20120114}
/user/michael/output/TrueListingSellThroughFromLeafCategory/{20120115,20120116,20120117,20120118,20120119,20120120,20120121} 
```

我在浏览这些目录时遇到了很大的困难。如果我尝试`ls`其中一个，它将日期作为列表并为每个查找不同的目录。如果我转义大括号，我会收到没有此类文件或目录错误。如果我用 %7B 和 %7D 替换大括号，情况类似。

如果我通配该级别，那么我可以浏览更低的级别：

```
/user/michael/output/TrueListingSellThroughFromLeafCategory/* 
```

但是一次取回它们会很好！我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T06:08:06.810

看起来您应该能够使用正则表达式运算符修复它`?`

```
hadoop fs -ls /user/michael/output/TrueListingSellThroughFromLeafCategory/?20120101,20120102,20120103,20120104,20120105,20120106,20120107? 
```

我在我的盒子上进行了测试，它似乎有效：

```
[cmenguy@localhost ~]$ hadoop fs -mkdir /tmp/{TEST}
[cmenguy@localhost ~]$ hadoop fs -put <(echo foo) /tmp/{TEST}/
[cmenguy@localhost ~]$ hadoop fs -ls /tmp/{TEST}
ls: Cannot access /tmp/{TEST}: No such file or directory.
[cmenguy@localhost ~]$ hadoop fs -ls '/tmp/\{TEST\}'
ls: Illegal file pattern: Expecting set closure character or end of range, or } for glob {TEST at 5
[cmenguy@localhost ~]$ hadoop fs -ls /tmp/?TEST?
Found 1 items
-rw-r--r--   3 cmenguy supergroup        4 2013-01-24 05:59 /tmp/{TEST}/63 
```

看起来这仍在进行中，如[HDFS-3557](https://issues.apache.org/jira/browse/HDFS-3557)中所述，它似乎特定于 0.20.2（如果您使用 Cloudera，这仍然会影响 cdh3u* 版本，因此您可能需要使用 cdh4）

# php - php foreach() & glob() INSERT INTO w/ exec() 只是将最后一个 .csv（30 个）插入到表中

> ID：14494216
> 
> 赞同：0
> 
> 时间：2013-01-24T04:53:33.680
> 
> 标签：php, mysql, foreach, exec, glob

最后一个 .csv 文件被处理并加载到 myTable 中，但在此之前还有 30 个其他 .csv 文件 - **.csv 文件都被读取**，因为我将它们回显到 CLI 并将它们打印到屏幕上，但我无法解决为什么**只有最后一个 .csv 被插入到 myTable 中**？**有任何想法吗？**

```
 $mysqli = new mysqli("localhost", "root", "", "mydb");
 $dir = "H:/path/20130116/";
 $files = "*.csv";
     foreach(glob($dir.$files) as $file)  { 
          exec("mysql -u root -e \"USE mydb; myTable; LOAD DATA INFILE '" . $file . "' INTO TABLE myTable FIELDS TERMINATED BY ',' LINES TERMINATED BY '\\n'\"; ");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:44:38.087

经过越来越多的测试，删除了对 myTable 的第一次调用；在 MySQL 行中似乎已经解决了这个问题。

# r - 如何从 R 中的数据框构建倒排索引？

> ID：14494217
> 
> 赞同：2
> 
> 时间：2013-01-24T04:53:47.250
> 
> 标签：r, dataframe

假设我在 R 中有一个数据框：`data.frame(x=1:4, y=c("a b c", "b", "a c", "c"))`

```
 x     y
1 1 a b c
2 2     b
3 3   a c
4 4     c 
```

现在我想构建一个新的数据框，一个在 IR 或推荐系统中很常见的倒排索引，来自它：

```
y    x
a    1 3
b    1 2
c    1 3 4 
```

我怎样才能有效地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:23:26.307

```
conv <- function(x) {
  l <- function(z) {
    paste(x$x[grep(z, x$y)], collapse=' ')
  }
  lv <- Vectorize(l)

  alphabet <- unique(unlist(strsplit(as.character(x$y), ' '))) # hard-coding this might be preferred for some uses.
  y <- lv(alphabet)
  data.frame(y=names(y), x=y)
}

x <- data.frame(x=1:4, y=c("a b c", "b", "a c", "c"))
> conv(x)
##   y     x
## a a   1 3
## b b   1 2
## c c 1 3 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:26:23.797

`y`转换为字符后的尝试：

```
test <- data.frame(x=1:4,y=c("a b c","b","a c","c"),stringsAsFactors=FALSE)

result <- strsplit(test$y," ")
result2 <- sapply(unique(unlist(result)),function(y) sapply(result,function(x) y %in% x))
result3 <- apply(result2,2,function(x) test$x[which(x)])
final <- data.frame(x=names(result3),y=sapply(result3,paste,collapse=" "))

> final
  x     y
a a   1 3
b b   1 2
c c 1 3 4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T05:26:56.403

又快又脏

```
 original.df <- data.frame(x=1:4, y=c("a b c", "b", "a c", "c"))

  original.df$y <- as.character(original.df$y)

  y.split <- strsplit(original.df$y, " ")

  y.unlisted <- unique(unlist(y.split))

  new.df <- 
    sapply(y.unlisted, function(element) 
      paste(which(sapply(y.split, function(y.row) element %in% y.row)), collapse=" " ))

  as.data.frame(new.df)

  >  new.df
  a    1 3
  b    1 2
  c  1 3 4 
```

# c# - 无法在 Windows 主机上上传 asp.net mvc3 网站

> ID：14494219
> 
> 赞同：2
> 
> 时间：2013-01-24T04:53:59.200
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

当我构建代码并将其上传到服务器并尝试访问它时，我现在购买了一个 Windows 主机和一个域，然后出现以下列表

![在此处输入图像描述](../Images/35bddfaeaf82452b4004f45c866ee700.png)

我无法查看该网站。可能是什么问题呢 。请指导我，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:00:52.447

设置您的项目以发送 MVC 特定的 DLL（不附带 .NET 框架）

*   右键单击您的 mvc Web 项目
*   单击添加可部署依赖项

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T05:55:16.580

尝试将文件名添加到浏览器地址行中的 URL。如果可行，则服务器不会将其识别为默认文件名。您可以设置服务器来执行此操作。

Default.aspx 通常是 asp.net 的默认文件名。如果您没有名为该文件的文件，您可以重命名一个文件或将文件名附加到 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T07:36:12.190

打开 IIS 并禁用目录浏览

# php - Mysql删除表格>表格中的行

> ID：14494224
> 
> 赞同：1
> 
> 时间：2013-01-24T04:54:34.493
> 
> 标签：php, jquery, mysql

您可以使用与表单提交不同的表单 ajax 函数从表单发布单个输入吗？我正在尝试删除表单中的表格行，而不提交整个表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:11:49.357

从表格中隐藏特定行...明智地显示该行已被删除..

```
$("#row"+i).animate({"height": "toggle"}, { duration: 1000 }); 
```

下一个 ajax 函数要求删除..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:56:55.813

是的，您可以`ajax post request`通过 jquery 发送。

指导代码如下。

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">

$(document).ready(function()
{

    $('.delete_link').click(function(e){

        e.preventDefault();
        var href = $(this).attr('href');
        var main_selector = $(this);

        $.ajax({

            url        : href,
            type       : 'post',
            dataType   : 'json',
            beforeSend : function()
            {
                //code before ajax send
            },
            success    : function(response)
            {
                if(response)
                {
                    main_selector.parent().remove();
                }
            }

        });

    });

});

</script>

<table>
    <tr>
        <td>Data1</td>
        <td><a href="delete.php?id=<?php echo $id ?>>" class="delete_link"></a></td>
    </tr>
    <tr>
        <td>Data2</td>
        <td><a href="delete.php?id=<?php echo $id ?>>" class="delete_link"></a></td>
    </tr>
    <tr>
        <td>Data3</td>
        <td><a href="delete.php?id=<?php echo $id ?>>" class="delete_link"></a></td>
    </tr>
</table>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T04:56:10.057

您需要访问 jQuery 中的行并对其对象调用 remove 。

**[现场演示](http://jsfiddle.net/4ERw4/)**

```
$('#rowId').remove(); 
```

您可以使用 jQuery ajax 通过 javascript 调用 php 函数，这篇[文章](https://stackoverflow.com/questions/2269307/using-jquery-ajax-to-call-a-php-function)展示了如何做到这一点。

# svn - 如何在网络上设置颠覆？

> ID：14494227
> 
> 赞同：1
> 
> 时间：2013-01-24T04:54:50.447
> 
> 标签：svn, tortoisesvn, ankhsvn

我正在尝试使用 Subversion (TortoiseSVN) 以及尝试与 Visual Studio 集成。我已经在我的机器上安装了 TortoiseSVN 和 AnkhSVN。

我已经阅读了 n 篇文章，但它们的解释方式很复杂，或者我可能无法理解。

我有 5 名团队成员，我们所有人都在做一个项目。（VS 2012）所以我想为我们设置颠覆。

我只想做以下事情..

-> 所有 5 人都可以提交并且可以获得任何解决方案文件的最新版本，就是这样。（就像 MS SourceSafe 的签入和签出功能）我不想使用它的任何其他功能。

如何在网络上设置 Subversion？

谁能告诉我一步一步的程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T05:33:54.100

1.  选择一台机器作为将托管存储库的服务器。
2.  在服务器机器上，安装颠覆
3.  在服务器机器上，使用 svnadmin 创建一个新的存储库
4.  在服务器机器上，使用 svnserve。
5.  每台客户端机器一台，安装subversion或tortoisesvn。
6.  每个客户端都可以从第 3 步创建的存储库中签出文件

这甚至还没有用于创建您应该做的trunk/branches/tags 目录。但这有据可查。

概括地说，svn://serverName/repositoryName/trunk 应该包含 VS 项目。所有开发人员都检查它。发展他们的变化。提交他们。更新以获取其他所有人的更改。

从网络的角度来看，只要机器可以互相看到，这就是你需要做的。如果机器都在同一个 Intranet 上，使用 svnserve 就足够了。通过设置对存储库的 http 访问可能会变得更加复杂，但是您还没有说开发人员是否需要 http 访问。所以假设 svnserve 就足够了。

希望这可以帮助。

# bash - 为什么在新的子外壳中别名命令不起作用？

> ID：14494233
> 
> 赞同：1
> 
> 时间：2013-01-24T04:55:06.130
> 
> 标签：bash, alias

例如，如果我这样做

```
alias a=clear 
```

输入“a”将清除终端。

但是当我在子外壳中写“a”时，它不会识别别名。

为什么这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T04:59:35.723

在当前 shell 中创建别名时，执行新的 bash 进程时不会保存别名。如果你想保存你的别名，请将它们放在你的 .bashrc 中（它应该位于你的主目录中）。这样每次你执行一个新的 bash shell 时，它都会从那个文件中加载你的配置。

# ruby-on-rails - 在 Rails 中控制来自控制器的输入文本

> ID：14494236
> 
> 赞同：0
> 
> 时间：2013-01-24T04:55:10.063
> 
> 标签：ruby-on-rails, ruby

我想知道是否可以在 Rails 中控制来自控制器的输入文本，例如，我想在进行一些验证后清理输入文本并请求关注该输入文本，如下所示：

```
if params[:pswd] == params[:pswd2]
     flash = change_pswd('root', params[:oldPswd], params[:pswd])
     if not flash.key?(:error)
        redirect_to logged_in_path
     end
  else
     flash[:error] = "New password doesn't match."
     #here i want to clean the input text
     #request focus for that input
     render :changePassword
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T05:15:57.507

**在更改密码**

```
<%= text_field_tag :oldPswd, ""  %>
<%= text_field_tag :pswd, ""  %>
<%= text_field_tag :pswd2, ""  %> 
```

见[text_field_tag](http://apidock.com/rails/ActionView/Helpers/FormTagHelper/text_field_tag)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:34:01.387

对于这个需求，我觉得用AJAX处理会更方便。

# google-maps-api-3 - 我无法在 Google Map API v3 中添加多个标记

> ID：14494237
> 
> 赞同：0
> 
> 时间：2013-01-24T04:55:14.697
> 
> 标签：google-maps-api-3

你好，

这是谷歌的正常代码

```
var map;

function initialize()
{
    var latLng = new google.maps.LatLng(41.079120183660486, 28.994637246032653);

    var mapOptions = {
        center: latLng,
        zoom: 8,
        mapTypeId : google.maps.MapTypeId.ROADMAP
    };

    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

    var marker = new google.maps.Marker({
        position: map.getCenter(),
        map: map,
    });

    google.maps.event.addListener(map, 'click', function (event) {
        //map.setZoom(9);
        //map.setCenter(marker.getPosition());

    });

}google.maps.event.addDomListener(window, 'load', initialize); 
```

我想从我的数据库中乘以标记，但我做不到。我在网站上搜索但总是结果是灰色地图。

我的代码是：

```
<script type="text/javascript">
var map;
var latLng;
function initialize() {

    var mapOptions = {
        //center: latLng,
        zoom: 8,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

    var markers = [];

    @foreach (var item in Model)
{
        @:markers.push("@item.map")
        // item.map content coming like this : 41.079120183660486,28.994637246032653
}
    for (var i = 0; i < markers.length; i++) {

        var marker = new google.maps.Marker({
            position: latLng,
            map: map,
        });
    }

    //google.maps.event.addListener(map, 'click', function (event) {
    //    //map.setZoom(9);
    //    map.setCenter(marker.getPosition());
    //    //placeMarker(event.latLng);
    //});

}

google.maps.event.addDomListener(window, 'load', initialize); 
```

我无法添加标记。我觉得错过了很多东西？我真的需要你的意见。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:46:45.950

根据您的代码，您似乎正在向相同的 lat/lng 添加标记。下面的代码在循环中添加了一些标记。

```
<script>
    var map;
    var center = new google.maps.LatLng(39.715, -84.103);

    $(document).ready(initialize);

    function initialize() {
        // Create map
        var mapOptions = {
            zoom: 10,
            center: center,
            panControl: false,
            zoomControl: true,
            mapTypeControl: true,
            scaleControl: true,
            streetViewControl: true,
            overviewMapControl: true,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map($('#map_canvas')[0], mapOptions);

        for (var ii = 0; ii < 5; ii++) {
            var lat = center.lat() + (0.1 * ii);
            var lng = center.lng() + (0.1 * ii);
            var loc = new google.maps.LatLng(lat, lng);
            var marker = new google.maps.Marker({
                position: loc,
                map: map
            });
        }
    }
</script> 
```

# c# - WCF RESTful 服务不接受 JSON 输入

> ID：14494239
> 
> 赞同：2
> 
> 时间：2013-01-24T04:55:35.070
> 
> 标签：c#, .net, wcf, rest, fiddler

就我而言，我有一个如下的网络服务，

```
 [OperationContract]
    [WebInvoke(UriTemplate = "services/CreatePerson", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, Method = "POST")]
    string CreatePerson(string data); 
```

它期待一个 JSON 输入。当我通过将 JSON 字符串作为请求正文传递如下来使用 Fiddler 测试此服务时，

```
"{"personName":"Joe", "source":"I", "address":"KK Road"}" 
```

和请求标头为

```
User-Agent: Fiddler
Content-Type: application/json;charset=utf-8
Host: localhost
Content-Length: 54 
```

它在调试时没有达到服务方法断点。

同时它适用于以下JSON（将双引号替换为前一个json的单引号），

```
"{'personName':'102',  'source':'I',  'address':'KK Road'}" 
```

服务方法不接受 JSON 字符串输入，因为如果我将输入作为“测试”传递它会很好地工作。

实际问题在哪里，请帮我找出来....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:08:55.240

我认为您不应该使用开头和结尾的引号！

尝试：

```
{'personName':'102',  'source':'I',  'address':'KK Road'} 
```

此外，您的方法不应采用字符串参数，而是采用符合 json 的类。

```
 public class M
 {
     public string personName { get; set; }
     public string source { get; set; }
     public string address { get; set; }
 }

 [OperationContract]
 [WebInvoke(UriTemplate = "services/CreatePerson", RequestFormat = WebMessageFormat.Json, 
    ResponseFormat = WebMessageFormat.Json, Method = "POST")]
 string CreatePerson(M data); 
```

# jquery - 当我选择一个进行拖动时，可排序元素向上移动

> ID：14494249
> 
> 赞同：2
> 
> 时间：2013-01-24T04:56:29.533
> 
> 标签：jquery, jquery-ui, jsf, jsf-2, jquery-ui-sortable

我正在使用 jQuery对多个s`sortable`进行排序。`p:panel`但是，当我选择要移动的任何元素时，其他元素会向上移动一个位置，这使得定位变得困难。我想完全按照[jQueryUI Sortable](http://jqueryui.com/sortable/)进行排序，其中元素仅在重叠时向上移动。有没有我可以使用的属性？

这是我的jsf代码：

```
<p:outputPanel id="dragPanel" styleClass="enumDiv">
    <ui:repeat value="#{numberEnumComponent.values}" var="numEnum"
        varStatus="values">
        <h:panelGrid columns="3" columnClasses="td-top,td-top,td-top"
            width="30%" style="padding-left: 10px;">

            <p:panel>
                <p:inputText value="#{numberEnumComponent.values[values.index]}"
                    id="numInput" binding="#{numInput}">
                    <f:converter converterId="javax.faces.BigDecimal"></f:converter>
                </p:inputText>
                <h:graphicImage value="#{msg.icon_type_NUMBER_ENUM}" id="enumIcon" style="padding-left:10px;"></h:graphicImage>

                <h:form id="removeForm" style="display:inline-block; padding-left:10px;">
                    <h:commandButton action="#{numberEnumComponent.removeNumEnum}"
                        image="#{numberEnumComponent.values.size() == 1 ? msg.icon_remove_disabled : msg.icon_remove}"
                        immediate="true"
                        disabled="#{numberEnumComponent.values.size() == 1}">
                        <f:setPropertyActionListener
                            target="#{numberEnumComponent.removePosition}"
                            value="#{values.index}"></f:setPropertyActionListener>
                    </h:commandButton>

                    <p:remoteCommand name="enumMovement" action="#{numberEnumComponent.columnMovement}">
                    </p:remoteCommand>
                </h:form>
            </p:panel>
        </h:panelGrid>
    </ui:repeat>
</p:outputPanel> 
```

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:44:34.370

[使用drop 占位符](http://jqueryui.com/sortable/#placeholder)来防止其他元素移动可能会有所帮助。只需将其样式设置为与其他元素相同：

```
$("#container").sortable({placeholder: '.placeholder'}); 
```

# mysql - 在mysql中更新一行时，在有或没有附加条件之间哪个语句更有效

> ID：14494250
> 
> 赞同：2
> 
> 时间：2013-01-24T04:56:30.653
> 
> 标签：mysql, sql-update

我正在使用 mysql 数据库，现在我必须确保列中的值应该是`1`，而它可能`1`已经是。因此，考虑以下两个陈述：

```
UPDATE category SET is_leaf=1 WHERE id=9 
```

或者

```
UPDATE category SET is_leaf=1 WHERE id=9 AND is_leaf=0 
```

`id`是主键，区别是当is_leaf已经是1的时候，再更新还是不更新，哪个效率更高？

我知道这并不重要，但我想找出更好地理解mysql。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T05:01:18.140

```
UPDATE category SET is_leaf=1 WHERE id=9 AND is_leaf=0 
```

效率更高。因为那样它只会更新相关数据。否则即使`is_leaf=1`记录也要去更新。

假设表上有1000条记录，更新一条记录需要1s。如果您尝试更新所有记录，则需要 1000 秒。但假设在这种情况下 `is_leaf=0`记录数为 150，那么如果您使用第二条语句，则只需 150 秒而不是 1000 秒。

编辑 ：

**带有搜索参数的查询 (SARG)**

WHERE 子句可帮助您限制查询返回的行数。但是，指定 WHERE 条件的方式会影响查询的性能。如果写入 WHERE 条件以使其使用将索引列作为输入的函数，则忽略索引并扫描整个表。这会导致性能下降。例如，以下结果会导致表扫描，因为在函数中使用了列 OrderDate：

```
SELECT CustomerID, EmployeeID FROM Orders
WHERE DATEDIFF(m, OrderDate, GetDate())>3 
```

如果函数被重写如下所示，那么查询会使用索引来寻找所需的值，这会提高性能：

```
SELECT CustomerID, EmployeeID FROM Orders
WHERE OrderDate < DATEADD(m, -3, GetDate()) 
```

据说第二个查询中的过滤条件使用可搜索参数或 SARG，因为查询优化器可以在执行期间使用索引查找操作。

有关这方面的更多信息，您最好阅读[提高查询性能](http://www.sqlsteps.com/sql-tutorial-improving-query-performance)

并阅读本文以[加快搜索和过滤器](http://www.componentace.com/help/absdb_manual/speedupsearchesandfilters.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T05:27:12.933

包含的查询`AND is_leaf=0`有时会更有效。

根据主键定位行时，它不会有太大的不同。（索引的可用性 `on (id,is_leaf)`可能会产生很小的差异。）但是一旦 MySQL 确定没有要更新的行，它就可以采用更短的代码路径。

但是，如果没有该谓词，MySQL 将不得不定位行，获取行锁（在 InnoDB 的情况下），并触发任何“BEFORE UPDATE FOR EACH ROW”触发器。然后 MySQL 必须检查是否有任何列值实际被更改（请注意，触发器的执行可能会将一个或多个列设置为不同的值）。如果 MySQL 检测到行没有更改，它可以跳过任何“ON UPDATE”时间戳列的设置，触发任何“AFTER UPDATE FOR EACH ROW”触发器，并将受影响的行数设置为零。（在事务的上下文中，不清楚 MySQL 是否可以在确定行没有被更改时释放行锁，或者行锁是否会继续保持直到提交或回滚。）

因此，这两个语句之间的一大区别是，即使行没有实际更改，MySQL 也会触发“FOR EACH ROW”触发器；但它不会为 WHERE 子句排除的行触发任何“FOR EACH ROW”触发器。

在简单的情况下，没有任何触发器，我不希望在性能上有任何可测量的差异。

我个人的偏好是包含额外的谓词。这确保不会请求或持有（InnoDB）意向行锁，并且不会触发 FOR EACH ROW 触发器。

* * *

除了行锁定和触发器执行之外，只要这两个语句完全相同，它们就不是真的。至少在一般情况下不会，因为有可能`is_leaf`包含 NULL 或 0 或 1 以外的值。

鉴于此声明：

```
UPDATE category SET is_leaf=1 WHERE id=9 
```

对于当它不等于 1 时设置为 1 的等效语句`is_leaf`，我们实际上需要检查 NULL 和任何不同于 1 的值，例如：

```
UPDATE category SET is_leaf=1 WHERE id=9 AND NOT (is_leaf <=> 1) 
```

考虑一下当`is_leaf`为 NULL 或 2 时会发生什么，例如，使用以下语句：

```
UPDATE category SET is_leaf=1 WHERE id=9 AND is_leaf=0 
```

# linux - 仅在 squid 中的特定时间启用对少数 ips 的 Internet 访问

> ID：14494254
> 
> 赞同：0
> 
> 时间：2013-01-24T04:56:40.250
> 
> 标签：linux, squid

问候...

我是 squid 的新手，我已经在我的组织中成功配置了它。

现在我只想在特定时间启用对少数 ips 的 Internet 访问，即。下午 1 点至下午 2 点和下午 6 点至晚上 7 点。

请让我知道该怎么做。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:59:06.190

本页介绍了如何在一周和一天的特定时间进行屏蔽：

[http://martybugs.net/smoothwall/squid.cgi](http://martybugs.net/smoothwall/squid.cgi)

ctrl+f 时间限制：

# servicestack - 使用 Autofac 的 Servicestack 无法解析 IRequestContext

> ID：14494256
> 
> 赞同：1
> 
> 时间：2013-01-24T04:56:48.670
> 
> 标签：servicestack, autofac, ormlite-servicestack

我正在尝试使用服务堆栈的缓存设施。这些是通过 RequestContext 访问的，它由 IOC 在您的 Service 中注入。

如果您使用默认的 Funq IOC，这将按预期工作，当您挂接 AutoFac 时它不起作用，RequestContext 为空，我不确定如何配置 autofac 来构建它。这里有什么线索吗？我的 AutoFac 配置：

```
var builder = new ContainerBuilder();

//Now register all dependencies to your custom IoC container

builder.RegisterAssemblyTypes(new[] { typeof(AppHost).Assembly })
       .PropertiesAutowired(PropertyWiringFlags.AllowCircularDependencies)
       .AsImplementedInterfaces()
       .SingleInstance();

container.Register<ICacheClient>(new MemoryCacheClient());

IContainerAdapter adapter = new AutofacIocAdapter(builder.Build());
container.Adapter = adapter; 
```

**编辑：**

我的服务已经扩展了 ServiceStack.ServiceInterface.Service：

```
public class UserDetailsService : ServiceStack.ServiceInterface.Service 
```

它实现了 IRequiresRequestContext，RequestContext 为空。如果我删除 autofac，那么它会按预期工作。使用 Autofac RequestContext 为空

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:39:50.337

RequestContext 并不意味着由 IOC 注入，它是由 ServiceStack 设置的特殊属性，如果您的服务通过实现`IRequiresRequestContext`接口来请求它。例如

```
public class MyClass : IService, IRequiresRequestContext {
    //injected by ServiceStack at run-time (per request)
    public IRequestContext RequestContext { get; set; } 
} 
```

[这与在 ServiceStack 中方便的默认服务](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Service.cs)基类中填充 RequestContext 属性的机制相同。

# android - 如何将我的 SQLite 数据库连接到我的 android 应用程序？

> ID：14494263
> 
> 赞同：-2
> 
> 时间：2013-01-24T04:57:38.773
> 
> 标签：android, database, sqlite

帮助！好的，所以我设计一个 android 应用程序已经有一段时间了，我一直在手动将所有这些数据放入字符串中，然后将它们拉到我的布局中，但后来我的一个朋友建议我将所有必要的数据放入一个数据库，然后在每个活动中将其从那里拉出来....听起来不错....接受我一直在阅读有关其工作原理的教程后的教程，这似乎比制作大量字符串和示例要困难得多在教程中，每个人都有自己的目的，这不是我的，也不会让我更容易理解。我需要这个数据库做的就是读取并在布局上显示我想要的信息。我使用 SQLite 数据库浏览器创建了这个数据库。

数据库结构：

名称 - fishindex_db
表 - 鱼、州、reg
行：
fish - _id、名称、desc、loc
states - _id、名称、缩写、更新的
reg - _id、名称、大小、季节、数量、注释

所以现在说我想在布局列表视图中显示 reg 表中主键 (_id) 12 的所有内容，这是如何完成的？请需要 .java 和 .xml 代码示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T05:05:16.347

以下是两个教程，您可以使用这些教程来帮助您了解您想要实现的目标：

*   [Android SQLite 数据库教程](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)
*   [如何将 Android 与 PHP、MySQL 连接起来](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)——这篇文章更进一步地向您展示了如何连接到生产数据库和使用 Web 服务。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-16T15:41:49.423

看一下连接fishindex_db的代码

```
public class SQLiteHelper extends SQLiteOpenHelper {

private static final int DATABASE_VERSION = 1;
public static final String DATABASE_NAME = "fishindex_db.db";

public static final String TABLE_NAME = "fish";
public static final String _id = "id";
public static final String name = "name";
public static final String desc = "desc";

private SQLiteDatabase database;

SQLiteHelper sQLiteHelper = new SQLiteHelper(MainActivity.this);
public SQLiteHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}
//this is to get all records in fish table
public ArrayList<FishModel> getAllRecords() {
    database = this.getReadableDatabase();
    Cursor cursor = database.query(TABLE_NAME, null, null, null, null, null, null);

    ArrayList<FishModel> fishes= new ArrayList<FishModel>();
    FishModel fishModel;
    if (cursor.getCount() > 0) {
        for (int i = 0; i < cursor.getCount(); i++) {
            cursor.moveToNext();

            fishModel= new FishModel();
            fishModel.setID(cursor.getString(0));
            fishModel.setName(cursor.getString(1));
            fishModel.setLastName(cursor.getString(2));

            fishes.add(fishModel);
        }
    }
    cursor.close();
    database.close();
    return contacts;
} 
```

# html - OSX - 站点文件夹外文件的路径名

> ID：14494264
> 
> 赞同：0
> 
> 时间：2013-01-24T04:58:06.553
> 
> 标签：html, macos, localhost, pathname

我已经在我的`Sites`文件夹之外建立了一个本地 Git 存储库。事后看来，这可能是一个错误。

我想测试其中一个 Git 文件，但我的测试 html 页面需要在`Sites`文件夹中才能在`~localhost`.

那么我可以获取 html 页面`http://~localhost/MyUserName/test.html`（具有路径`MyUserName/Sites/test.html`）来查找具有路径的脚本`MyUserName/GitHub/myScript.js`吗？或者 Git 文件夹是否需要移动到其中`Sites`？

我尝试了以下但没有成功：

`<script src="../GitHub/myScript.js" type="text/javascript"></script>`

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:07:33.273

您不能引用 webroot 之外的文件（在这种情况下是您的 Sites 文件夹）；这可能会允许访问您机器上的任何文件。

如果你想在不移动你的仓库的情况下解决这个问题，你可以将你的 GitHub 目录符号链接到你的站点文件夹中。在 OS X 上，Apache 默认应该遵循符号链接；如果没有，您可以在 Sites 文件夹中放置一个 .htaccess 文件`Options +FollowSymlinks`以将其打开。（您可以在此处找到有关[Apache`Options`指令](http://httpd.apache.org/docs/2.2/mod/core.html#options)的文档）。

# postgresql - postgreSQL 表设计

> ID：14494266
> 
> 赞同：2
> 
> 时间：2013-01-24T04:58:23.737
> 
> 标签：postgresql, ddl

我需要创建一个表（postgresql 9.1）并且我被卡住了。你能帮忙吗？

传入的数据可以采用以下两种格式之一：

1.  客户 id(int), shop id(int), asof(date), 数量
2.  客户 id(int), , asof(date), 数量

给定的传入 CSV 模板是：{client id, shop id, shop type, shop种类, asof, quantity}

第一种情况，key是--client id, shop id, asof

第二种情况，key是--client id, shop type, shop种类, asof

我试过类似的东西：

```
 create table(
            client_id       int references...,
            shop_id         int references...,
            shop_type       int references...,
            shop_genre      varchar(30),
            asof            date,
            quantity        real,
            primary key( client_id, shop_id, shop_type, shop_genre, asof )
    ); 
```

但后来我遇到了一个问题。当数据为格式 1 时，插入会因为 pk 中的空值而失败。

客户中的查询可以通过商店 ID 或商店类型和类型的组合进行。在流派上没有部分或正则表达式匹配的用例。

什么是合适的设计？我必须将其拆分为 2 个表，然后合并搜索结果吗？或者，是否习惯将 0 和空白作为缺失值并继续前进？

如果重要的话，一旦加载了所有历史数据，该表预计将有 100-5 亿行。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:04:16.267

您可以尝试部分唯一索引，也就是过滤的唯一索引，也就是条件唯一索引。 [http://www.postgresql.org/docs/9.2/static/indexes-partial.html](http://www.postgresql.org/docs/9.2/static/indexes-partial.html)

基本上它归结为基于 where 子句过滤的唯一性，

例如（当然要测试正确性和对性能的影响）：

```
CREATE TABLE client(
            pk_id           SERIAL,
            client_id       int,
            shop_id         int,
            shop_type       int,
            shop_genre      varchar(30),
            asof            date,
            quantity        real,
            PRIMARY KEY (pk_id)
    );

  CREATE UNIQUE INDEX uidx1_client
  ON client
  USING btree
  (client_id, shop_id, asof, quantity)
  WHERE client_id = 200;

  CREATE UNIQUE INDEX uidx2_client
  ON client
  USING btree
  (client_id, asof, quantity)
  WHERE client_id = 500; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T07:40:37.710

一个简单的解决方案是为主键创建一个字段，该字段将使用两种算法之一根据传入的内容生成其数据。

如果您想要一个完全规范化的解决方案，您可能需要将商店信息拆分为两个单独的表，并使用外连接从该表中引用它。

您还可以使用 postgres 中可用的表继承。

# scala - akka-sbt-plugin 在 build.sbt 中指定 outputDirectory

> ID：14494267
> 
> 赞同：1
> 
> 时间：2013-01-24T04:58:24.923
> 
> 标签：scala, sbt, akka

我有一个带有以下设置的 build.sbt

```
import akka.sbt.AkkaKernelPlugin                                                                                                 

import akka.sbt.AkkaKernelPlugin.{ Dist, outputDirectory, distJvmOptions} 

AkkaKernelPlugin.distSettings                                                                                                    

outputDirectory := file("dist1") . 
```

但是当我运行 dist 时。输出仍然到目标/分布。

如何在不使用 build.scala 文件的情况下解决此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T17:43:33.317

只需使用：`(outputDirectory in Dist) := file("dist1")`

# java - 构建将作为电子邮件发送的 HTML 消息的最佳实践？（使用 Java）

> ID：14494270
> 
> 赞同：2
> 
> 时间：2013-01-24T04:58:37.700
> 
> 标签：java

客户完成预订后，我需要向他们发送确认电子邮件。它将是美学的 HTML 电子邮件。

电子邮件将包含用户输入的数据。

我已经查看了有关**如何发送**电子邮件的各种指南。

但我需要一些关于**如何构造**HTML 电子邮件的指示。我在考虑**jatl**，因为它在单独的帖子中提到过。但不确定这是否是最好的方法。

谢谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T05:03:39.810

听起来您想要一个可以重复使用的模板电子邮件，即时填充用户名等（当您发送电子邮件时）。我建议你看看[http://www.stringtemplate.org/](http://www.stringtemplate.org/)

字符串模板为我创造了奇迹。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T05:03:47.550

我建议您使用速度模板。您可以使用 Velocity Template 构建 HTML 电子邮件模板，并使用 VelocityEngine 从您的 Java 代码中调用它。

您可能想查看此文档以使用 Velocity

[http://velocity.apache.org/](http://velocity.apache.org/)

有关更多详细信息，请查看此 url，了解如何将其用于电子邮件模板：

[http://www.java2s.com/Code/Java/Velocity/UseVelocitytogenerateHTMLbasedemail.htm](http://www.java2s.com/Code/Java/Velocity/UseVelocitytogenerateHTMLbasedemail.htm)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T05:08:24.010

我之前解决此问题的方法是将 JSP 打印到字符串，然后将该字符串作为电子邮件正文发送。如果您已经在 web 应用程序中（我曾经是），这很容易。如果您不在网络应用程序中，我不推荐它。

[这是有关如何执行此操作的stackoverflow答案。](https://stackoverflow.com/questions/1075827/execute-jsp-directly-from-java/1076056#1076056) 这是我使用的一些示例代码：

```
public static String generateEmailBodyAsString(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, ServletContext servletContext) throws Exception {
    StringWriter stringWriter = new StringWriter();
    final PrintWriter printWriter = new PrintWriter(stringWriter);
    final ServletOutputStream outputStream = new ServletOutputStream() {
        @Override
        public void write(int b) throws IOException {
            printWriter.write(b);
        }
    };

    HttpServletResponseWrapper wrapper = new HttpServletResponseWrapper(httpServletResponse) {
        @Override
        public PrintWriter getWriter() throws IOException {
            return printWriter;
        }

        @Override
        public ServletOutputStream getOutputStream() throws IOException {
            return outputStream;
        }
    };

    httpServletRequest.setAttribute("youCanAccessThisAsAVariableInYourJsp", "some value");     //in your jsp refer to it as ${youCanAccessThisAsAVariableInYourJsp}         
    servletContext.getRequestDispatcher("/emailBody.jsp").include(httpServletRequest, wrapper);

    return stringWriter.toString();
} 
```

（注意：此代码可以编译，但我已对其进行了修改以隐藏我的应用程序的细节，因此它在运行时可能对您不起作用。如果您有任何问题，请添加评论，我会尽力提供帮助）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T05:10:40.090

我以前总是用 Velocity 来做那种事情，但是当我在 Objective-C 中做一个 OSX 项目时，我遇到了 Mustache 模板引擎。. 有一个很酷的名字，效果很好。它几乎适用于所有语言。这是java版本：[https ://github.com/spullara/mustache.java](https://github.com/spullara/mustache.java)

对于实际的发送部分，我推荐 Spring 而不是纯 javax.mail api（我总是觉得这有点令人费解——我猜它是为灵活性而设计的，而不是易于使用）。. 文档：[http ://static.springsource.org/spring/docs/2.0.8/reference/mail.html](http://static.springsource.org/spring/docs/2.0.8/reference/mail.html)

# android - 如何在android中以编程方式为文件夹设置密码

> ID：14494271
> 
> 赞同：2
> 
> 时间：2013-01-24T04:58:50.640
> 
> 标签：android, passwords, directory

有没有办法以编程方式为文件夹设置密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T05:14:24.110

我能想到的最好的解决方案是像你在 java 中那样做：[这个链接](http://www.javabeat.net/2007/10/locking-files-using-java/)中的一个例子描述如下：

```
import java.io.*;
import java.nio.channels.FileChannel;
import java.nio.channels.FileLock;

public class FileLockTest {

    public static void main(String[] args) throws Exception {

        RandomAccessFile file = null;
        FileLock fileLock = null;
        try
        {
            file = new RandomAccessFile("FileToBeLocked", "rw");
            FileChannel fileChannel = file.getChannel();

            fileLock = fileChannel.tryLock();
            if (fileLock != null){
                System.out.println("File is locked");
                accessTheLockedFile();
            }
        }finally{
            if (fileLock != null){
                fileLock.release();
            }
        }
    }

    static void accessTheLockedFile(){

        try{
            FileInputStream input = new FileInputStream("FileToBeLocked");
            int data = input.read();
            System.out.println(data);
        }catch (Exception exception){
            exception.printStackTrace();
        }
    }
} 
```

# c - Flash 视频游戏中的模式匹配并将鼠标单击发送到 linux 中的该区域

> ID：14494273
> 
> 赞同：0
> 
> 时间：2013-01-24T04:58:55.790
> 
> 标签：c, linux, automation, pattern-matching, screenshot

我正在尝试制作一个自动化工具来玩 Flash 游戏或视频游戏以进行学习。我发现在 Windows 中，我们可以使用 AutoIT 来定位屏幕上的特定区域并立即将鼠标单击发送到该区域。但是，我在 Linux 中没有发现任何类似的东西，可能这都可以在较低级别完成。谁能告诉我一些想法如何在 Linux 中做到这一点（在屏幕上找到一个模式并用鼠标点击它）？我觉得有一些名为 awt.robot 的 Java 包可以做到这一点并且独立于平台，但我更喜欢用 C 或 C++ 来做。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-15T09:22:21.173

你可以在 Linux 中使用 xdotool 来移动鼠标光标、鼠标点击和打字。我使用它，它工作正常。

awt.robot 似乎也在做同样的事情，

不幸的是，我还没有找到任何模式匹配的东西。我检查了 AutoIT 网站，但他们没有说任何关于模式加工的内容。

# richfaces - rich:column 正在生成额外的 td 元素

> ID：14494278
> 
> 赞同：0
> 
> 时间：2013-01-24T04:59:21.773
> 
> 标签：richfaces, uirepeat, richdatatable

嗨，我使用 rich:dataTable 来显示 MyClass 类型的 List 类型的元素。

```
<rich:dataTable value="#{myBean.myClassList}"> var="item"
<rich:column> 
<h:outputText value="#{item.stdName}"
</rich:column>
<rich:column>
<table class="subtable">
<tr>
<ui:repeat value="#{item.listStr}" var="stdMarks">
<td><h:outputText value="#{stdMarks}"/></td>
</uirepeat>
</tr>
</table>
</rich:column> 
```

通过使用上面的代码，我能够在同一行中显示 StudentName 和标记，但问题是在显示标记后，当我使用 firebug 找到源代码时，会生成另一个空列（如下所述）。

上述代码的源代码如下所示。

```
<table id="selectForm:servicesDispTable" class="rich-table servicesDispClassTable" width="850">
<tr>
    <td id="selectForm:servicesDispTable:1:j_id51" class="rich-table-cell>
       <span>Kumar</span> 
    </td>
    <td  id="selectForm:servicesDispTable:1:j_id53"><span>89</span></td>
    <td  id="selectForm:servicesDispTable:1:j_id57"><span>76</span></td>
    <td><!-- comment generating extra column here -->
        <table class="subtable">
           <tr></tr>
        </table> 
    </td>
</tr>

</table> 
```

如何避免生成那个额外的列？任何人都可以帮助我解决这个问题。我曾经使用 ui:repeat 做过什么，我可以使用任何丰富的面孔标签来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:46:01.333

我没有检查空条件，并且在第一次迭代中它显示了该值，因此插入了额外的列。几乎浪费了 2 天，这就是我在这里发布的原因。

# assembly - 这段汇编代码无效吗？

> ID：14494285
> 
> 赞同：1
> 
> 时间：2013-01-24T05:00:13.537
> 
> 标签：assembly, x86, att, addressing-mode

我试图弄清楚以下汇编代码是否无效。

```
movb $0xF, (%bl) 
```

无效吗？如果是这样，为什么？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T05:41:27.697

你不说什么处理器。`bl`至少在 x86 处理器中是一个 8 位寄存器，但不能用于寻址。

为什么是无效指令？好吧，汇编指令无效的原因是给定处理器没有这样的指令。无法对这条指令进行编码。在这种情况下（假设 x86），使用`bl`或任何其他 8 位寄存器既不用于寻址，也没有被认为是必要的。在 16 位代码中，只有 16 位寄存器、、`bx`和可用于内存寻址。[维基百科有一个有用的列表，列出了所有可能的寻址模式](http://en.wikipedia.org/wiki/X86#Addressing_modes)（请注意它使用的是 Intel 语法，您的代码是 AT&T 语法）。`bp``si``di`

**编辑：**在 AT&T 语法中，定义中的字母`b`处理`movb`8 位操作数。

要获得或多或少的目标（`bl`用于寻址），您可以执行以下操作之一（这些是 Intel YASM/NASM 语法，MASM 风格的汇编器，包括 GNU `.intel_syntax noprefix`want `byte ptr`）：

对于 16 位代码：

```
xor   bh,bh
mov   byte [bx], 0x0f 
```

对于 32 位代码：

```
movzx  ebx,bl
mov    byte [ebx], 0x0f 
```

对于 64 位代码：

```
movzx  ebx,bl               ; with implicit zero-extension to 64-bit
mov    byte [rbx], 0x0f 
```

* * *

您很少想将任何内容存储到 0..255（一个字节）的线性地址。在 64 位模式下，分段大部分被禁用，因此 DS 基数固定为 0，这绝对是指令正在执行的操作，但尤其是在 16 位模式下，DS 基数可能不为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-02T15:46:38.763

这个问题可能来自CSAPP的书，练习题3.3。您不能使用 8 位寄存器 (%bl) 作为 AT&T 程序集上的地址寄存器（我不确定英特尔的）。此外，无法确定 $0xF 是 8、16 还是 32 位值。

# ios - 带有索引的 UITableView 部分

> ID：14494290
> 
> 赞同：0
> 
> 时间：2013-01-24T05:00:36.863
> 
> 标签：ios, uitableview

我在以下代码中遗漏了什么？我可以创建一个列表，但该列表是数组 x26 倍（26x 部分）`UITableView`。显示列表，但部分标题仅指向“A”

![在此处输入图像描述](../Images/5b885fc62549013a7bfc87f55edeb13b.png)

`arr_indexpeople`> A、B、C、D、E.....Z 的数组

`arr_completeArray`> 一组人员列表

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T05:05:47.987

返回 [arr_indexpeople objectAtIndex:section]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T05:14:21.050

您在 titleForHeaderInSection 中返回 objectAtIndex 0。改成——

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
      return [arr_indexpeople objectAtIndex:section]
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T06:04:54.297

每个要加载的部分都会调用数据源方法，因此将部分的动态索引作为 arr_indexpeople 的输入变量，如下所示。

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
  return [arr_indexpeople objectAtIndex:section]
} 
```

# graph - TinkerPop 蓝图和框架 - 如何将数据视为集合

> ID：14494293
> 
> 赞同：1
> 
> 时间：2013-01-24T05:00:50.107
> 
> 标签：graph, neo4j, orientdb, titan

我发现了这个问题[如何使用 Tinkerpop/Blueprints 图形 API 存储和检索不同类型的顶点？](https://stackoverflow.com/questions/8142613/how-to-store-and-retrieve-different-types-of-vertices-with-the-tinkerpop-bluepri)

但这对我来说不是一个明确的答案。

例如，如何查询 10 个最新文章与 10 个最近注册用户的 api？暂时搁置图形，因为此堆栈必须能够处理集合/文档范式以及图形范式（这些集合类型的元素之间的关系）。我已经阅读了包括源代码在内的所有内容，并且越来越接近但并不完全在那里。

我读过的最接近的文档是这里的多租户文章：http: [//architects.dzone.com/articles/multitenant-graph-applications](http://architects.dzone.com/articles/multitenant-graph-applications)

但它侧重于使用 gremlin 进行图形隔离和查询，我希望在需要对图形进行分析之前避免这种情况。

我正在考虑在这一点上使用 cassandr/hadoop 并引用图形 id，但我可以看到这让我很痛苦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T16:15:25.193

Tinkerpop/Blueprints 中的索引仅支持基于属性键的精确匹配的简单查找。

如果您想查找最近的 10 篇文章，或带有短语“Foo Bar”的文章，您可能需要使用 Lucene 或 Elastic Search 维护一个外部索引。这些技术使用支持术语/短语查找、范围查询和通配符搜索等的倒排索引。您可以将 vertex.getId() 作为字段存储在索引文档中，以链接回图形数据库中的顶点。

我已经为我的应用程序实现了类似的东西，它使用了一个蓝图数据库（Bitsy）和一个精美的索引（Lucene）。我已经记录[了高级设计](https://bitbucket.org/lambdazen/bitsy/wiki/FancyIndexes.md)，以 (a) 使用每隔几秒的批量更新来保持花式索引是最新的，以及 (b) 确保跨图形数据库和花式索引的事务一致性。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T19:14:38.303

回答我自己的问题 - 答案是索引。

[https://github.com/tinkerpop/blueprints/wiki/Graph-Indices](https://github.com/tinkerpop/blueprints/wiki/Graph-Indices)

# python - 如何将 .txt 文件中的每个单词添加到 Python 列表中？

> ID：14494302
> 
> 赞同：1
> 
> 时间：2013-01-24T05:01:36.163
> 
> 标签：python, file-io

我想从 .txt 文件中获取所有单词并将它们放在一个列表中，每个单词作为列表的一个元素。这些单词在 .txt 中由换行符分隔。到目前为止，我的代码是：

```
with open('words.txt', "r") as word_list:
    words = list(word_list.read()) 
```

但是，这段代码只是将 .txt 的每个字母作为自己的元素放在我的列表中。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T05:02:57.753

```
with open('words.txt', "r") as word_list:
    words = word_list.read().split(' ') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T05:03:29.870

摆脱`.read()`：

```
words = list(word_list) 
```

如果没有`.read()`，您会将文件句柄转换为列表，从而为您提供行列表。使用`.read()`，您将获得一大堆字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-22T10:00:52.970

看这里 ：

```
ashu='Hello World1'

 ashu.split() 
```

这将根据单词之间的空格拆分单词。

如果你想根据任何其他字符而不是空格进行拆分，你可以这样做

```
ashu.split('YOUR CHARACTER') 
```

# c# - 如何从 URI 中排除子域

> ID：14494305
> 
> 赞同：0
> 
> 时间：2013-01-24T05:01:44.863
> 
> 标签：c#, asp.net, uri

> **可能重复：**
> [从子域获取域](https://stackoverflow.com/questions/12259912/getting-domain-from-subdomain)

我有一个查询，我正在从 URI 中获取主机名。

```
Eg. if i have http://www.google.com/abc/abcd/ade/a.htm

then the url is "www.google.com" 

var uri = new Uri("http://www.google.com/abc/abcd/ade/a.htm");
uri.Host // i get www.google.com

But when i try it with Subdomain i want to exclude the Subdomain from the url

var uri = new Uri("http://mail.google.com/abc/abcd/ade/a.htm");
    uri.Host // i get mail.google.com

I want only google.com 
```

# c - 使用 scanf 读取多行输入

> ID：14494309
> 
> 赞同：4
> 
> 时间：2013-01-24T05:01:55.893
> 
> 标签：c

为类编写程序，仅限于 scanf 方法。程序接收可以接收任意数量的行作为输入。使用 scanf 接收多行输入时出现问题。

```
#include <stdio.h>
int main(){
    char s[100];
    while(scanf("%[^\n]",s)==1){
        printf("%s",s);
    }
    return 0;
} 
```

示例输入：

```
Here is a line.
Here is another line. 
```

这是当前的输出：

```
Here is a line. 
```

我希望我的输出与我的输入相同。使用scanf。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T05:16:45.083

我认为你想要的是这样的（如果你真的仅限于 scanf）：

```
#include <stdio.h>
int main(){
    char s[100];
    while(scanf("%[^\n]%*c",s)==1){
        printf("%s\n",s);
    }
    return 0;
} 
```

%*c 基本上会抑制输入的最后一个字符。

从`man scanf`

```
An optional '*' assignment-suppression character: 
scanf() reads input as directed by the conversion specification, 
but discards the input.  No corresponding pointer argument is 
required, and this specification is not included in the count of  
successful assignments returned by scanf(). 
```

[编辑：根据克里斯·多德的抨击删除误导性答案:)]

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-24T06:56:54.950

试试这个代码并使用tab键作为分隔符

```
#include <stdio.h>
int main(){
    char s[100];
    scanf("%[^\t]",s);
    printf("%s",s);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T05:12:27.933

我给你一个提示。

您需要重复 scanf 操作，直到达到“EOF”条件。

通常的做法是使用

```
while (!feof(stdin)) {
} 
```

构造。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-06T11:41:22.157

试试这段代码。它可以在具有 C99 标准的 GCC 编译器上正常工作。

```
#include<stdio.h>
int main()
{
int s[100];
printf("Enter multiple line strings\n");
scanf("%[^\r]s",s);
printf("Enterd String is\n");
printf("%s\n",s);
return 0;
} 
```

# c# - 使用 C# asp.net 发送邮件

> ID：14494311
> 
> 赞同：0
> 
> 时间：2013-01-24T05:02:22.117
> 
> 标签：c#, asp.net

> **可能重复：**
> [发送电子邮件 asp.net c#](https://stackoverflow.com/questions/11704042/send-email-asp-net-c-sharp)

我之前曾多次使用该技术发送过邮件，但不知何故它不起作用我提供以下代码：

```
MailMessage myMailMessage = new MailMessage();
            myMailMessage.Subject = "Response From Client";
            myMailMessage.Body = "hello word";
            myMailMessage.From = new MailAddress("mymail@gmail.com", "jub");
            myMailMessage.To.Add(new MailAddress("mymail@gmail.com", "Softden"));

            SmtpClient mySmtpClient = new SmtpClient();
            mySmtpClient.Send(myMailMessage); 
```

我的 web.config 是：

```
<mailSettings>
      <smtp deliveryMethod = "Network" from="Jubair &lt;mymail@gmail.com&gt;">
        <network defaultCredentials="false" enableSsl="true" userName="mymail@gmail.com" password="Mypassword" host="smtp.gmail.com" port="587"></network>
      </smtp>
    </mailSettings> 
```

它说 smtp 服务器需要安全连接或客户端未通过身份验证..请帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T05:08:18.110

尝试在 Stackoverflow 上添加类似 Per Dominic 的回答，看看他下面的例子

```
using System.Net;
using System.Net.Mail;

var fromAddress = new MailAddress("from@gmail.com", "From Name");
var toAddress = new MailAddress("to@example.com", "To Name");
const string fromPassword = "fromPassword";
const string subject = "Subject";
const string body = "Body";

var smtp = new SmtpClient
           {
               Host = "smtp.gmail.com",
               Port = 587,
               EnableSsl = true,
               DeliveryMethod = SmtpDeliveryMethod.Network,
               //UseDefaultCredentials = false,
               Credentials = new NetworkCredential(fromAddress.Address, fromPassword)
           };
using (var message = new MailMessage(fromAddress, toAddress)
                     {
                         Subject = subject,
                         Body = body
                     })
{
    smtp.Send(message);
} 
```

//----------------- 下面是一个简单的方法 --------------- 我刚刚在下面测试了它并且它有效

var mail = new MailMessage();

```
// Set the to and from addresses.
// The from address must be your GMail account
mail.From = new MailAddress("noreplyXYZ@gmail.com");
mail.To.Add(new MailAddress(to));

// Define the message
mail.Subject = subject;
mail.IsBodyHtml = isHtml;
mail.Body = message;

// Create a new Smpt Client using Google's servers
var mailclient = new SmtpClient();
mailclient.Host = "smtp.gmail.com";//ForGmail
mailclient.Port = 587; //ForGmail

// This is the critical part, you must enable SSL
mailclient.EnableSsl = true;//ForGmail
//mailclient.EnableSsl = false;
mailclient.UseDefaultCredentials = true;

// Specify your authentication details
mailclient.Credentials = new System.Net.NetworkCredential("fromAddress@gmail.com", "xxxx123");//ForGmail
mailclient.Send(mail);
mailclient.Dispose(); 
```

//.config 设置有两个关于如何设置的选项我怀疑这是你遇到的问题

```
<system.net>
    <mailSettings>
      <smtp from="from@gmail.com" deliveryMethod="Network">
        <network userName="from@gmail.com" password="mypassword" host="smtp.gmail.com" port="587"/>
      </smtp>             
    </mailSettings>
  </system.net> 
```

或选项 2

```
<configuration>
    <appSettings>
        <add key="smtpClientHost" value="mail.localhost.com"/> //SMTP Client host name
        <add key="portNumber" value="587"/>
        <add key="fromAddress" value="yourEmailAddress@gmail.com"/>
    </appSettings>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:10:49.633

**从 Yahoo、Gmail、Hotmail (C#) 发送电子邮件**
[http://www.codeproject.com/Tips/520998/Send-Email-from-Yahoo-Gmail-Hotmail-Csharp](http://www.codeproject.com/Tips/520998/Send-Email-from-Yahoo-Gmail-Hotmail-Csharp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T05:10:54.690

这些都是带有示例的很好的教程。制作您的演示电子邮件 ID。将您的 id 及其密码作为参数传递。并将邮件发送给任何人。

[http://www.codeproject.com/Articles/15807/Easy-SMTP-Mail-Using-ASP-NET-2-0](http://www.codeproject.com/Articles/15807/Easy-SMTP-Mail-Using-ASP-NET-2-0)

[http://www.codeproject.com/Tips/371417/Send-Mail-Contact-Form-using-ASP-NET-and-Csharp](http://www.codeproject.com/Tips/371417/Send-Mail-Contact-Form-using-ASP-NET-and-Csharp)

[http://www.codeproject.com/Tips/490604/Sending-mail-using-ASP-NET-with-optional-parameter](http://www.codeproject.com/Tips/490604/Sending-mail-using-ASP-NET-with-optional-parameter)

如果您仍然无法发送电子邮件，请确保更改端口号。但是587应该可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T05:11:21.587

确保您联系电子邮件服务器端以查看他们接受中继的身份验证类型。

# c++ - ICC 指针检查的链接器错误

> ID：14494318
> 
> 赞同：2
> 
> 时间：2013-01-24T05:02:59.747
> 
> 标签：c++, visual-studio, icc

我正在使用 Intel C++ 13.0.1.119 Build 20121008 for IA-32 在 Visual Studio 2012 的 Windows 上运行。我一直遇到链接器错误问题，并将其缩小到选项`/Qcheck-pointers:rw`。每当我使用 编译时`/Qcheck-pointers:rw`，都会出现以下错误：

```
1>  xilink: executing 'link'
1>libcmt.lib(invarg.obj) : error LNK2005: "void __cdecl _invalid_parameter(unsigned short const *,unsigned short const *,unsigned short const *,unsigned int,unsigned int)" (?_invalid_parameter@@YAXPBG00II@Z) already defined in LIBCMTD.lib(invarg.obj)
1>libcmt.lib(invarg.obj) : error LNK2005: "void __cdecl _invoke_watson(unsigned short const *,unsigned short const *,unsigned short const *,unsigned int,unsigned int)" (?_invoke_watson@@YAXPBG00II@Z) already defined in LIBCMTD.lib(invarg.obj)
1>libcmt.lib(invarg.obj) : error LNK2005: __call_reportfault already defined in LIBCMTD.lib(invarg.obj)
1>libcmt.lib(invarg.obj) : error LNK2005: __get_invalid_parameter_handler already defined in LIBCMTD.lib(invarg.obj)
1>libcmt.lib(invarg.obj) : error LNK2005: __initp_misc_invarg already defined in LIBCMTD.lib(invarg.obj)
1>libcmt.lib(invarg.obj) : error LNK2005: __invalid_parameter already defined in LIBCMTD.lib(invarg.obj)
1>libcmt.lib(invarg.obj) : error LNK2005: __invoke_watson already defined in LIBCMTD.lib(invarg.obj)
1>libcmt.lib(invarg.obj) : error LNK2005: __set_invalid_parameter_handler already defined in LIBCMTD.lib(invarg.obj)
1>libcmt.lib(invarg.obj) : error LNK2005: ___pInvalidArgHandler already defined in LIBCMTD.lib(invarg.obj)
1>libcpmtd.lib(xdebug.obj) : warning LNK4098: defaultlib 'libcmt.lib' conflicts with use of other libs; use /NODEFAULTLIB:library
1>Y:\...\ : fatal error LNK1169: one or more multiply defined symbols found 
```

我找到[了这篇文章](http://software.intel.com/sites/products/documentation/doclib/stdxe/2013/composerxe/compiler/cpp-lin/GUID-389D8F46-C207-40B8-8ED3-A0827894C6FF.htm)，表明它可以通过关闭检查无维数组使用来解决`/Qcheck-pointers-undimensioned-`。但是，这似乎没有任何效果，并且我得到了相同的链接器错误。

有谁知道如何解决这个链接问题？

**更新：**根据 Eric Shiyin Kang 的建议，我离开`/Qcheck-pointers:rw`并`/Qcheck-pointers-undimensioned-`在命令行上，但添加`/NODEFAULTLIB:libcmt.lib`为链接器命令。这导致我得到一个不同的链接器错误：

```
1>  xilink: executing 'link'
1>libcpmt.lib(nothrow.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2' in libcpmtd.lib(stdthrow.obj)
1>libcpmt.lib(nothrow.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MT_StaticRelease' doesn't match value 'MTd_StaticDebug' in libcpmtd.lib(stdthrow.obj)
1>Y:\..\.exe : fatal error LNK1319: 2 mismatches detected 
```

**更新 2：** 这是完整的编译器命令行：

```
/RTCc /GS /Qcheck-pointers:rw /debug:expr-source-pos /W5 /Gy /Zc:wchar_t /I"\..\include\gtest" /I"\..\include\" /Zi /Od /Qintel-extensions- /Fd"Debug\vc110.pdb" /fp:precise /D "_VARIADIC_MAX=10" /D "_MBCS" /Qipo /Zc:forScope /RTC1 /Qcheck-pointers-undimensioned- /Gd /MTd /Fa"Debug\" /EHsc /nologo /Za /Fo"Debug\" /Fp"Debug\Project2.pch" 
```

这是完整的链接器命令行：

```
/OUT:"\..\Project2.exe" /MANIFEST /NXCOMPAT /PDB:"\..\Project2.pdb" /DYNAMICBASE "gtestd.lib" "gtest_maind.lib" "kernel32.lib" "user32.lib" "gdi32.lib" "winspool.lib" "comdlg32.lib" "advapi32.lib" "shell32.lib" "ole32.lib" "oleaut32.lib" "uuid.lib" "odbc32.lib" "odbccp32.lib" /DEBUG /MACHINE:X86 /OPT:REF /SAFESEH / /MANIFESTUAC:"level='asInvoker' uiAccess='false'" /ManifestFile:"Debug\Project2.exe.intermediate.manifest" /OPT:ICF /NOLOGO /LIBPATH:"\..\include\gtest\debug_build" /TLBID:1 /NODEFAULTLIB:libcmt.lib 
```

我正在使用 GTest 库并正在使用多线程调试运行时库来匹配 GTest。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T17:11:11.613

基于讨论，并且由于您`gtestd.lib`在项目中使用手动构建的库`Project2.exe`，我认为问题是您试图通过静态链接或动态将不同版本的 C 运行时库打包`libcmt.lib/libcmtd.lib`到可执行文件中`Project2.exe`链接。

一个由 gtest 项目`gtestd.lib`中的选项`/MTd`打包，然后您尝试打包`gtestd.lib`到`Project2.exe`.

另一个将直接打包到`Project2.exe`项目`/MTd`中`Project2.exe`。

解决方案可能是

1)在所有涉及的项目中使用`/MDd`, `/MTd`,`/MD`或不断地使用，或`/MTd`

2）在构建静态/动态库时，不要链接任何外部库，例如`gtest.lib`，通过使用`/NODEFAULTLIB`或`/NODEFAULTLIB:<name_of_some_of_def_libs>`。并且仅在构建可执行文件时链接这些库。

# iphone - 如何制作自定义通知，以便无论何时发生事件都会在 iOS 中处理

> ID：14494327
> 
> 赞同：1
> 
> 时间：2013-01-24T05:03:35.990
> 
> 标签：iphone, ios, ipad

嗨，我想制作自定义本地通知，以便每当弹出窗口可见时，它将由该通知处理。因此，当弹出框多次可见时，它将由该通知处理目前我已经部分完成了此操作，但问题是，如果我想多次运行通知的选择器方法，我必须在任何我想要的地方发布该通知。使用此链接来实现它 [我想在某些事件发生时向观察者发送一些通知。而且我还想知道观察者如何捕获/处理/接收该通知？](https://stackoverflow.com/questions/3786942/i-want-to-send-some-notifications-to-observers-when-some-event-occurs-and-i-als)

我可以发出通知吗，一旦我在 viewDidLoad 中发布通知，它将处理该事件发生的次数？

注意-请参阅我发布的答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T05:10:09.487

在呈现弹出框之前使用此行

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(dissmissPop:) name:@"popOver"  object:popOver.contentViewController];//popOver is your name of popover

-(void)dissmissPop:(id)sender{

   //method to be called
} 
```

要从弹出窗口调用通知，请使用此

```
 [[NSNotificationCenter defaultCenter] postNotificationName:@"popOver" object:self]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:23:58.370

通知与广播接收器相同。如果我们在新电子邮件到达时注册为广播接收器。但是你真的发布了事件通知吗？不，其他人会这样做。同样，当显示键盘时，系统会发布通知。发送您只会收到通知。

只要键盘出现，系统就会发布。这应该清楚地表明，如果您想发布自定义通知，则必须在每次需要时发布它。

因此，如果您进行自定义通知，则必须在要发布时发布通知。

# python - 密码生成器的想法？

> ID：14494336
> 
> 赞同：-1
> 
> 时间：2013-01-24T05:04:28.750
> 
> 标签：python, passwords

在 Python 中，我想编写一个密码生成器。

您认为我应该在程序中添加哪些输入来帮助创建一个好的、强密码？

一句话回答就够了。我只想开始一个思考过程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T05:43:32.403

本着 xkcd 漫画的精神...

```
>>> import random
>>> def password_gen():
...   with open('/usr/share/dict/words') as f:
...     words = [w.strip().lower() for w in f if w.strip().isalpha()]
...   while True:
...     yield ' '.join(random.sample(words, 4))
... 
>>> g = password_gen()
>>> next(g)
'mansion yodelling sumner coordination'
>>> next(g)
'proving velvetiest upload muggers'
>>> next(g)
'southey unfortunately longshoremen settings'
>>> next(g)
'inundated mules coevals vicious' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T05:18:01.653

```
import random

random.choice(['password', 'password1']) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T05:48:28.410

请注意，随机生成密码几乎总是一个坏主意。而是使用长的唯一重置密钥实现某种密码重置算法。例如，根据 Andbrews 的回答使用 uuid 生成。

但是，如果您以某种方式无法实现重置程序，可能是因为您的客户/老板只是拒绝听取原因，那么至少实现一个功能，即一旦用户收到他的新密码，他必须将其更改为一个新的，以便给用户的密码（在纸上或通过电子邮件，因此每个人都可以使用）必须更改为只有他/她知道的密码。

另一件要考虑的事情是确保密码是不可能猜到的，即使您知道以前发送的密码。因此，不要使用 random 模块。我引用：

> Python 使用 Mersenne Twister 作为核心生成器。它产生 53 位精度浮点数，周期为 2**19937-1。C 中的底层实现既快速又线程安全。Mersenne Twister 是现有测试最广泛的随机数生成器之一。但是，由于是完全确定性的，它并不适合所有用途，并且完全不适合加密用途。

相反，随机密码的基础应该是`os.urandom()`. 但是，它会生成一个二进制字节序列，因此必须对其进行更改。该`binascii`模块可用于此目的。我建议使用 hexlify()，它使密码最容易输入，完全没有奇怪的字符：

```
>>> import os
>>> import binascii

>>> binascii.hexlify(os.urandom(10)).strip()
'7b2d0d5e40c18938bca9' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T05:17:50.487

首先，定义为生成的密码选择哪些字符，[字符串模块](http://docs.python.org/2/library/string.html)中定义的常量在这里可能会有所帮助。然后，使用[random 模块](http://docs.python.org/2/library/random.html)随机选择这些字符，例如：

```
import string
import random

def random_password(alphabet=string.ascii_letters+string.digits, length=8):
    return ''.join(random.sample(alphabet, length))

>>> random_password()
'KwYGBtFb'
>>> random_password()
'CJOSx8tj'
>>> random_password()
'62BNJyX5' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T05:21:16.547

您可以使用[uuid 模块](http://docs.python.org/2/library/uuid.html)

```
import uuid
print uuid.uuid4() 
```

# seo - googlebot 会在索引我的网站之前运行我的 php 代码吗？

> ID：14494338
> 
> 赞同：0
> 
> 时间：2013-01-24T05:04:36.470
> 
> 标签：seo, indexing, hyperlink, googlebot, php-include

我正在使用 PHP 函数处理我的主菜单链接和其他一些重要的内容链接：*include_once ('mainmenu.inc.php')*，我想知道谷歌是否会在按顺序确定我的排名位置之前运行我的 PHP 代码了解我的网站的内容和结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T05:07:29.413

GoogleBot 不会**运行**您的 PHP。您的服务器将解析 PHP 并将其提供给机器人（就像使用您网站的任何其他常规用户一样）。但是，如果您有通过 javascript 或 ajax 传递的内容，您可能会遇到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:44:48.767

没错 Ashwani，Google 也索引 css 和 js 文件，我已经看到网站从 .js 文件中获取反向链接

# c - 使用make的主要简单c程序osx中的语法错误

> ID：14494339
> 
> 赞同：0
> 
> 时间：2013-01-24T05:04:37.000
> 
> 标签：c, macos

这是一个 n00b 问题，我看到的答案对我没有帮助。

我正在运行一个用 textmate 编写的简单 c 程序（firsty.c）：

```
#include <stdio.h>

int main()
{
    printf("hi world.\n");
    return 0;
} 
```

我在终端中输入了以下内容，结果如下：

```
$ make firsty.c
make: Nothing to be done for `firsty.c'.
$ ./firsty.c
./firsty.c: line 3: syntax error near unexpected token `('
./firsty.c: line 3: `int main()' 
```

可能很简单，但我不明白出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T05:07:18.893

您正在尝试执行源文件。您需要执行希望由 make 构建的二进制文件。

我不知道您的 makefile 在做什么，但是如果它类似于`gcc firsty.c`二进制输出文件，则`a.out`默认情况下将被命名。用于`gcc -o executable_name_here`具有不同命名的输出文件 (http://gcc.gnu.org/onlinedocs/gcc/Overall-Options.html#Overall-Options)

Unix（此时为 osx）将可执行文件视为脚本，并尝试执行它。要做的另一件事是从源文件中删除可执行权限，然后您将无法运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:16:46.430

`make firsty.c`根本没有做任何事情。试试吧`make firsty`，然后`./firsty`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T05:18:37.753

我认为你还没有创建 make 命令用来编译给定源文件的任何 Makefile ......所以尝试编写一个 makefile（[http://www.cs.colby.edu/maxwell/courses/tutorials /maketutor/](http://www.cs.colby.edu/maxwell/courses/tutorials/maketutor/) ) 否则尝试编译为...

```
gcc firsty.c -o firstly 
```

然后您将在同一目录中获取可执行文件，并且您可以将其执行为

```
./firstly 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T05:24:04.247

照顾'#'。当您执行源代码文件时，操作系统可能会使用 shell 执行它。所以我们得到语法错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T07:19:33.660

尝试首先制作，它会工作并首先制作一个带有名称的可执行文件。

如果这不起作用，请尝试 make ./firstly。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-24T11:08:03.320

请注意，在进行这样的制作时，您只需要提供文件名而不是 .c 的扩展名。输出文件是使用文件名创建的，它将搜索相应的 .c 文件进行编译。在你的情况下

```
 make firsty 
```

这将查找要编译的 firsty.c 并创建一个名为 firsty 的输出文件。

# php - PHP 联系表格不起作用

> ID：14494340
> 
> 赞同：1
> 
> 时间：2013-01-24T05:04:36.500
> 
> 标签：php, html

我正在尝试向我的网站添加联系表格，但每次单击发送时，它都会将我带到一个黑色窗口，并且地址栏显示contact.php。它也不会重定向回来。我的网站使用谷歌应用引擎作为应用程序托管。

我几乎尝试了一切，但我无法让它发挥作用。

下面是我的**HTML**代码：

```
<form action="contact.php" method="post">
    <p>Your name</p>
    <input type="text" name="name"/>
    <p>Your e-mail</p>
    <input type="text" name="email"/>
    <p>Message</p>
    <textarea name="message"></textarea>
    <input type="submit" value="Send"/>
    <input type="reset" value="Clear"/>
</form> 
```

这是我的**PHP**代码：

```
<?php
$field_name = $_POST['name'];
$field_email = $_POST['email'];
$field_message = $_POST['message'];

$mail_to = 'email@here.com';
$subject = 'Message from a site visitor '.$field_name;

$body_message = 'From: '.$field_name."\n";
$body_message .= 'E-mail: '.$field_email."\n";
$body_message .= 'Message: '.$field_message;

$headers = 'From: '.$field_email."\r\n";
$headers .= 'Reply-To: '.$field_email."\r\n";

$mail_status = mail($mail_to, $subject, $body_message, $headers);

if ($mail_status) { ?>
    <script language="javascript" type="text/javascript">
        alert('Thank you for the message.');
        window.location = 'contact.html';
    </script>
<?php
}
else { ?>
    <script language="javascript" type="text/javascript">
        alert('Message failed.');
        window.location = 'contact.html';
    </script>
<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T05:34:34.880

你需要一个邮件服务器，PHP 不会自己发送邮件。先安装一个。是的，文本区域缺少关闭标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:31:23.307

您缺少表单中的结束 textarea 标记。我在我的服务器上尝试了代码为contact.php，它可以工作。我同意 itachi，您需要打开错误报告。

为什么不让contact.php 成为一个完整的页面并完全摆脱重定向？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T05:35:08.857

对我来说工作得很好。如果字段没有值，则您的 if else 条件无法正常工作，那么它仍然会给出感谢信息。

# spring-mvc - 来自 Spring-bound 列表的 Freemarker 迭代

> ID：14494341
> 
> 赞同：0
> 
> 时间：2013-01-24T05:04:45.377
> 
> 标签：spring-mvc, freemarker

我有`List<String>`一个 Spring 的界限`ModelAttribute`。如何在 Freemarker 中对其进行迭代？

我试过了：

```
<#list ${modelattribute.listField} as thing >
    <tr><td>${thing}</td></tr></#list>
</#list> 
```

但 Freemarker 并不期待转义序列

```
Encountered "{" at line 108, column 43 in things/search.html.
Was expecting one of: ... 
```

我应该如何引用这个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:08:06.163

你应该这样做：

```
<#list modelattribute.listField as thing >
    <tr><td>${thing}</td></tr></#list>
</#list> 
```

# javascript - 使用 KnockoutJs 生成带有子句的表，以使用内联模板每隔这么多项目创建一个新行

> ID：14494342
> 
> 赞同：0
> 
> 时间：2013-01-24T05:04:46.533
> 
> 标签：javascript, html, templates, twitter-bootstrap, knockout.js

有人可以告诉我如何为一个 viewModel 的 observableArray 创建一个淘汰赛表，如下所示：

我知道您使用 foreach 绑定和所有这些，但我需要每 5 个数组项创建一个新的 TR 行。我需要表格只有这么远，并且基本上已经对齐了复选框项目。我让它在没有表格的情况下工作，只需向 div 添加一堆复选框（但复选框并未全部排列），但我想要一个表格来很好地保持单元格中的内容排列。

这是我发布的一篇文章，其中包含我所做的一些代码，但我试图将它们全部放在一个 TR 中，但这不起作用，这是另一个试图做类似但不使用淘汰赛的人......

我知道如何使用常规 jquery 和外部模板引擎来做我想做的事，但是如果有一个很好的淘汰绑定模板方式来做这一切，我会尽量远离 jquery。

我可能会在表格内容中添加一些引导类，但不确定，我也将这个框架用于我网站的其他部分。但更多地关注淘汰赛的东西。

[第1条](https://stackoverflow.com/questions/14487209/knockoutjs-table-inline-template-troubles/14488570#14488570)

[第二条](https://stackoverflow.com/questions/14349672/jquery-template-create-new-row-every-nth-item)

```
function someModel() {
    var self = this;
    self.items = ko.observableArray([]); 
} 
```

数组项是这样的类：

```
function item(name, id) {
    var self = this;
    self.Name = name;
    self.Id = id;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:02:55.443

当您需要更复杂的数据结构时，我建议使用依赖的 observable 来完成。我假设您想要一系列行，每行最多 5 个 tds。

```
function someModel() {
    var self = this;
    self.items = ko.observableArray([]);
    self.items_grouped = ko.computed(function(){
        var grouped = [];
        var itemlist = self.items();
        for(var i = 0; i < itemlist.length; i+=5){
            var row = [];
            grouped.push(row);
            for(var j = 0; j < 5; ++j){
                row.push(itemlist[i+j]);
            }
        }
        return grouped;
    });
}

<table>
    <tbody data-bind="foreach: items_grouped">
        <tr data-bind="foreach: $data">
            <td>
                <span data-bind="text: Name"></span>
                <span data-bind="text: Id"></span>
            </td>
        </tr>
    </tbody>
</table> 
```

您当然可以使用手头上的任何库来使集群实现更简洁。附带说明一下，使用表格进行布局几乎总是一个坏主意。

# cakephp - 浏览器中的 CakePHP 2.2 AclExtras aco_sync (sh 权限被拒绝)

> ID：14494347
> 
> 赞同：0
> 
> 时间：2013-01-24T05:05:13.523
> 
> 标签：cakephp, acl, cakephp-2.2

我在远程服务器上工作，我无法使用控制台，因为 ssh 未启用。所以我需要直接从浏览器运行 aco_sync （或任何其他不涉及 shell 的方式）。

我设法在我的本地开发服务器上使用控制器/操作中的以下代码同步 acos：

```
$command = ROOT . DS . APP_DIR . DS . 'Console' . DS . 'cake';
$params = ' -app ' . ROOT . DS . APP_DIR;
$params .= ' AclExtras.AclExtras';
$params .= ' aco_sync';
$result = shell_exec($command . $params); 
```

但是在生产服务器（使用 cPanel）上，我大约 5 分钟没有响应，然后出现内部服务器错误（500）。我只是挂了。实际上，这发生在两个带有 cPanel 的不同 VPS 服务器上。在第一个中，我有 ssh 并且能够从控制台运行命令。但是当从浏览器运行引用的代码时，我就像另一台服务器一样挂起。

*   我在 php 日志文件和 cake 的日志文件中都没有发现任何记录错误。
*   该操作以“admin_”为前缀，如果未登录，ACL 不允许执行。“./cake”脚本文件具有执行权限（我花了一段时间才知道这是必要的）。
*   我在 Chrome 和 IE8 上试过。
*   调试级别设置为 1。
*   尝试运行脚本后，页面中断，我无法浏览，直到我打开隐身窗口或重新启动浏览器。
*   我认为当我运行这个脚本时服务器的内存被完全消耗掉了。我不得不重新启动 httpd 以使站点在我可以控制的服务器上重新启动并运行。

我已经看到了一些使用 $dispatcher->dispatch() 的实现并尝试了其中的一些但没有运气。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T15:35:54.150

```
App::uses('ShellDispatcher', 'Console');
$command = '-app '.APP.' AclExtras.AclExtras aco_sync';
$args = explode(' ', $command);
$dispatcher = new ShellDispatcher($args, false);
if($dispatcher->dispatch()) {
    echo 'OK';
} else {
    echo 'Error';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-15T05:05:38.010

试试这个， $dispatcher->dispatch(); 似乎仅在出现错误时才显示某些内容。运行它并检查您的数据库。

```
 App::uses('ShellDispatcher', 'Console');
    $command = '-app '.APP.' AclExtras.AclExtras aco_sync';
    $args = explode(' ', $command);
    $dispatcher = new ShellDispatcher($args, false);

    try {
        $dispatcher->dispatch();
    } catch (Exception $e) {
        pr($e);
    } 
```

# django - 我将如何在 Django 中进行此查询？

> ID：14494351
> 
> 赞同：2
> 
> 时间：2013-01-24T05:05:32.613
> 
> 标签：django, django-models, django-queryset

假设我有三个模型：`User`, `CarBrand`, `CarModel`, `CarCharacteristics`。该`CarCharacteristics`模型描述了用户如何评价汽车的特性。所以一个用户可以有很多`CarCharacteristics`对象，一个用户可以有很多`CarCharacteristics`.

这是我的模型的样子：

```
class User(models.Model):
    id = models.AutoField(primary_key=True)

class CarBrand(models.Model):
    idcar_brand = models.AutoField(primary_key=True)

class CarModel(models.Model):
    idcar_model = models.AutoField(primary_key=True)
    car_brand = models.ForeignKey(CarBrand, null=True, on_delete=models.SET_NULL)

class CarCharacteristics(models.Model):
    idcar_characteristics = models.AutoField(primary_key=True)
    user = models.ForeignKey(User, on_delete=models.PROTECT)
    car_model = models.ForeignKey(CarModel, on_delete=models.PROTECT) 
```

我想做的是获取a有 a 的所有`CarBrand`对象。这就是我现在正在做的事情：`User``CarCharacteristics`

```
car_chars = CarCharacteristics.objects.filter(user=user_id)
car_brands_ids = []
for car_char in car_chars:
    brand_id = car_char.car_model.car_brand.idcar_brand
    if brand_id not in car_brands_ids:
        car_brands_ids.append(brand_id)
brands = CarBrand.objects.filter(idcar_brand__in=brand_ids) 
```

有没有更简单的方法来做到这一点？以及如何获得所有`CarModels`存在的地方`CarCharacteristics`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:19:43.107

我想我想通了。我认为这有效：

```
user_id = request.user.pk
brands = CarBrand.objects.exclude(~Q(carmodel__carcharacteristics__user=user_id)) 
```

**编辑**

我上面的内容是否也等同于：

```
user_id = request.user.pk
car_models = CarModel.objects.filter(carcharacteristics__user=user_id)
brands = CarBrand.objects.filter(carmodel__in=car_models).distinct() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T05:09:15.943

尝试这个：

```
CarBrand.objects.exclude(carmodel__carcharacteristics__user=None).distinct() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:13:58.807

```
CarBrand.objects.filter(carmodel__carcharacteristics__user=request.user).distinct() 
```

# java - 您可以同时写入套接字输入和输出流吗？

> ID：14494352
> 
> 赞同：12
> 
> 时间：2013-01-24T05:05:36.253
> 
> 标签：java, multithreading, sockets, thread-safety

我有一个 Java 应用程序，它是 Voip。我正在使用一个套接字通过线程同时发送和接收信息。代码如下所示..

```
Socket clientSocket = sockList.accept();
OutputStream outSock = clientSocket.getOutputStream();
InputStream inSock = clientSocket.getInputStream();
new Thread( new Capture(outSock)).start();
new Thread( new PlayAudio(inSock)).start();
outSock.close();
clientSocket.close(); 
```

我发现的问题是，当我写入输出流时，它会在第一次写入时阻塞。我发送的字节不多。贝娄是我的写代码。

```
private class Capture implements Runnable{

    private OutputStream out;
    public Capture(OutputStream out){
        this.out = out;
    }
    @Override
    public void run() {
        try{
            int numBytesRead;
            TargetDataLine outLine = getMic();
            outLine.open();
            outLine.start();

            byte[] data = new byte[outLine.getBufferSize() / 5];
            byte[] test = {0x1,0x1,0x1};

            while(true) {       
                //numBytesRead =  outLine.read(data, 0, data.length);
                //System.out.println(numBytesRead);
                out.write(test, 0, test.length);
                out.flush();
                /*if(numBytesRead > 0){
                    out.write(data, 0, data.length);
                    System.out.println("C");
                }*/
            }
        }catch(Exception ex){}
    }
} 
```

读取声音代码的另一个线程是......

```
private class PlayAudio implements Runnable{

    private InputStream in;
    public PlayAudio(InputStream in){
        this.in = in;
    }
    @Override
    public void run() {
        int write;
        try{
        SourceDataLine inLine = getSpeaker();
        inLine.open();
        inLine.start();
        byte[] data = new byte[inLine.getBufferSize()];
        byte[] test = new byte[3];
        while(true){
            System.out.println(1);
            //write = in.read(data, 0, data.length);
            in.read(test, 0 , test.length);
            System.out.println(2);
            /*if(write > 0){
                inLine.write(data, 0, write);
                System.out.println(3);
                System.out.println(write);
            }*/
        }
        } catch(Exception ex){}
    }

} 
```

我已经评论了实际代码的很大一部分，因为我只是想让它工作。我的写入功能在第一次写入时无限期阻塞。这可能是我的线程的问题吗？我唯一的想法是输出和输入流共享我的套接字对象，这可能会导致死锁或其他东西。请让我知道发生了什么事。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-24T05:14:45.413

是的，您可以同时写入套接字输入和输出流。

来自[do-java-sockets-support-full-duplex](https://stackoverflow.com/questions/6265731/do-java-sockets-support-full-duplex)

> 由于输入流和输出流是 Socket 中的独立对象，您唯一可能关心的是，如果您有 2 个线程同时尝试读取或写入（两个线程，相同的输入/输出流）会发生什么时间？InputStream/OutputStream 类的读/写方法不同步。但是，如果您使用 InputStream/OutputStream 的子类，则您调用的读/写方法可能是同步的。您可以检查 javadoc 以了解您正在调用的任何类/方法，并很快找到它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T05:31:22.603

是的，您可以在读取时在套接字上写入，但您必须在独立线程中读取套接字。我正在使用这个概念。这里的例子是（仔细阅读它也支持多个客户端）：

```
public class TeacherServerSocket {

private Logger logger = Logger.getLogger(TeacherServerSocket.class);
public static Map<String, TeacherServerThread> connectedTeacher = new HashMap<String, TeacherServerThread>();
ServerSocket serverSocket;;

@Override
public void run() {
    // starting teacher server socket
    this.serverSocket = startServer();
    // if unable to to start then serverSocket would have null value
    if (null != this.serverSocket) {

        while (true) {
             //listening to client for infinite time
            Socket socket = listenToClient();
            if (null != socket) {

                TeacherServerThread teacherServerThread = new TeacherServerThread(socket);
                Thread thread = new Thread(teacherServerThread);
                thread.start();

                //putting teacher ip address and teacher object into map
                connectedTeacher.put(teacherServerThread.getTeacherIp(),teacherServerThread);
                System.out.println("INFO: Teacher is connected with address "+ teacherServerThread.getTeacherIp());

            }

        }

    }

}

@Override
public ServerSocket startServer() {
     //port number on which teacher server will  be run.
     int port=12345;

    try {
        // throw an exception if unable to bind at given port
        ServerSocket serverSocket = new ServerSocket(port);
        System.out.println("Teacher server socket started on port no :"+port);
        return serverSocket;

    } catch (IOException e) {

        logger.error("Unable to start Teacher Server socket");
        e.printStackTrace();

    }

    return null;

}

@Override

public Socket listenToClient() {

    if (this.serverSocket != null) {

        try {
            // throw an exception is unable to open socket
            Socket socket = this.serverSocket.accept();
            return socket;

        } catch (IOException e) {

            logger.error("Unable to open socket for teacher");
            e.printStackTrace();

        }
    } 
    else {

        logger.error("TeacherServerSocket has got null value please restart the server");

    }

    return null;
}

@Override
public Map getConnectedDevicesMap() {

return  TeacherServerSocket.connectedTeacher;

}

/**
 * This method will send message to connected teacher which comes form  student
 * @author rajeev
 * @param   message, which comes form student
 * @return  void
 *   * */
@Override
public void publishMessageToClient(String message) {
    if(TeacherServerSocket.connectedTeacher.size()>0){
        System.out.println("Total Connected Teacher: "+TeacherServerSocket.connectedTeacher.size());
        for (String teacherIp : TeacherServerSocket.connectedTeacher.keySet()) {

            TeacherServerThread teacherServerThread=TeacherServerSocket.connectedTeacher.get(teacherIp);
            teacherServerThread.publishMessageToTeacher(message);

        }
    }

}

@Override
public void stopServer() {

    if (this.serverSocket != null) {

        try {

            serverSocket.close();

        } catch (Exception e) {

            e.printStackTrace();

        }
    }

}

} 
```

要为多个客户端读取独立线程：

```
public class TeacherServerThread implements Runnable {

Logger logger=Logger.getLogger(TeacherServerThread.class);
Socket socket;
String teacherIp;

public TeacherServerThread(Socket socket) {
 this.socket=socket;
 this.teacherIp=socket.getInetAddress().toString();
}

@Override
public void run() {
    //starting reading
    ReadFromTeacherAndPublishToStudent messageReader=new ReadFromTeacherAndPublishToStudent();
    Thread thread=new Thread(messageReader);
    thread.start();
}

private class ReadFromTeacherAndPublishToStudent implements Runnable {

    @Override
    public void run() {
        String message=null;
        try {
            BufferedReader readTeacherData=new BufferedReader(new InputStreamReader(socket.getInputStream()));

            StudentServerSocket studentServerSocket=new StudentServerSocket();
            //sending message to student which is read by teacher
            while((message=readTeacherData.readLine())!=null){
                //System.out.println("Message found : "+message);
               //  studentServerSocket.publishMessageToClient(message); // do more stuff here 

            }
            // if message has null value then it mean socket is disconnected.
      System.out.println("INFO: Teacher with IP address : "+teacherIp+" is disconnected");
      TeacherServerScoket.connectedTeacher.remove(getTeacherIp());
        if(null!=socket){
            socket.close();
        }

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

} //class

public void publishMessageToTeacher(String message){

    if(this.socket!=null){

        try {

        PrintWriter writeMessageToTeacher=new PrintWriter(this.socket.getOutputStream());
        writeMessageToTeacher.println(message);
        writeMessageToTeacher.flush();
        System.out.println(" Message published to teacher"+message);
        }catch(Exception e){
        logger.error(e.toString());
        logger.error("Exception In writing data to teacher");

        }

    }else {
        logger.error("Unable to publish message to teacher .Socket has Null value in publishMessageToTeacher");     
        System.out.println("ERROR: socket has null value can not publish to teacher");
    }

}

public String getTeacherIp()
{
    return teacherIp;

}
} 
```

根据您的要求更改代码......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T07:27:02.893

我的 write() 似乎阻塞的原因是我愚蠢地关闭了 Socket() 而我的输入流没有意识到这一点。因此，永远不会发送任何数据。代表我的愚蠢错误。

# java - 内存映射文件是否支持并发 get/put？

> ID：14494353
> 
> 赞同：5
> 
> 时间：2013-01-24T05:05:41.450
> 
> 标签：java

我的应用程序需要使用内存映射同时访问数据文件。我的目标是使其在共享内存系统中具有可扩展性。在研究了内存映射文件库实现的源代码后，我想不通：

*   `MappedByteBuffer`从多个线程中读取 a 是否合法？是否在 OS (*nix) 级别`get`阻止其他？`get`
*   如果一个线程`put`进入 a `MappedByteBuffer`，内容对另一个调用的线程是否立即可见`get`？

谢谢你。

澄清一点：线程正在使用 的单个实例`MappedByteBuffer`，而不是多个实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T08:11:12.547

缓冲区不是线程安全的，它们的访问应该由适当的同步控制；[请参阅http://docs.oracle.com/javase/6/docs/api/java/nio/Buffer.html](http://docs.oracle.com/javase/6/docs/api/java/nio/Buffer.html)中的线程安全部分。ByteBuffer 是 Buffer 类的子类，因此具有相同的线程安全问题。

尝试在共享内存系统中使用可扩展的内存映射文件对我来说非常可疑。使用内存映射文件是为了提高性能。当您进入共享系统时，寻找性能应该是一件不那么重要的事情。并不是说您应该寻找一个缓慢的系统，而是您会遇到许多其他问题，只是让它工作应该是您的首要（也是唯一？）开始时的优先事项。如果最后您需要使用内存映射替换对数据文件的并发访问，我不会感到惊讶。

有关使用 Exchanger 的一些想法，请参阅[Can multiple threads see writes on a direct mapped ByteBuffer in Java?](https://stackoverflow.com/questions/7002510/can-multiple-threads-see-writes-on-a-direct-mapped-bytebuffer-in-java) 和[使 Java 的 ByteBuffer 线程安全的选项](https://stackoverflow.com/questions/11153583/options-to-make-javas-bytebuffer-thread-safe)。

# wordpress - Wordpress 在发布前更改帖子标题

> ID：14494362
> 
> 赞同：-2
> 
> 时间：2013-01-24T05:06:39.133
> 
> 标签：wordpress

我正在使用 wordpress 3.5，我创建了一个名为 order 的自定义帖子类型，仅支持标题。现在我希望当这个订单将发布标题文本时`order-#ID`，（这里的 ID 将是要发布的帖子 ID）没有别的，如果用户在标题中写了一些东西，它不会发布它，只是保存像这样的值`order-#23`。

另一件事是隐藏标题输入的任何其他方式（我不想显示标题和编辑器），但在发布时保存其值`order-#265`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T05:18:10.080

您可以将其挂钩，[`save_post`](http://codex.wordpress.org/Plugin_API/Action_Reference/save_post)然后更新数据库以反映标题的更改。

请注意，我没有测试代码，但它应该是这样的：

```
function save_title( $post_id ){
  global $wpdb;
  $wpdb->update( $wpdb->posts, array( 'post_title' =>  'order-#' . $post_id ), array( 'ID' => $post_id ) ); 
}
add_action( 'save_post', 'save_title'); 
```

# search - 搜索时将字符串连接到 solr 字段值？

> ID：14494369
> 
> 赞同：0
> 
> 时间：2013-01-24T05:07:28.163
> 
> 标签：search, solr, solrj

在我们搜索时是否可以将字符串连接到 solr 字段示例：localhost:8983/solr/collection1/select?q=item_type%3Apostings&wt=json&indent=true

现在我有一个字段 id 我需要在每个 id 值之前附加文本“locality_”。这样我就不需要在大型数据集上循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:18:00.210

使用 Solr 4.0 [SOLR-2444](https://issues.apache.org/jira/browse/SOLR-2444)可以为字段定义别名，将转换器应用于值。
我没有使用上述内容，但您当然可以通过使用函数查询添加常量值修改值或定义自定义转换器以应用于别名字段来探索上述内容。

# c - srand 函数返回相同的值

> ID：14494375
> 
> 赞同：0
> 
> 时间：2013-01-24T05:08:02.387
> 
> 标签：c, coding-style, srand

嘿伙计们看看这个程序。

```
/* The craps game, KN king page 218 */

#include <stdio.h>
#include <time.h>
#include <stdbool.h>
#include <stdlib.h>

int roll_dice(void);
bool play_game(void);

int roll_dice(void)
{
    int roll;

    getchar();
    srand((unsigned) time(NULL));

    roll = rand() % 13;

    if(roll == 0)
    roll = roll + 1;

    return roll;
}

bool play_game()
{
    int sum = 0, wins = 0, loss = 0, point;

    sum = roll_dice();

    printf("You rolled: %d", sum);

    if(sum == 7 || sum == 11)
    {
        printf("\nYou won!\n");
        return true;
    }

    if(sum == 2 || sum == 3 || sum == 12)
    {
        printf("\nYou lost!!");
        return false;
    }

    point = sum;

    printf("\n\nYour point is: %d", point);

    do
    {
        sum = roll_dice();
        printf("\nYou rolled: %d", sum);

    }while(sum != point);

    if(sum == point)
    {
        printf("\nYou won!!!");
        return true;
    }

}

int main()
{
    char c, wins = 0, losses = 0;
    bool check;

    do
    {
        check = play_game();

        if(check == true)
          wins++;

        else if(check == false)
          losses++;

        printf("\nPlay Again? ");
        scanf("%c", &c);

    }while(c == 'Y' || c == 'y');

    printf("\nWins: %d      Losses: %d", wins, losses);

    return 0;
} 
```

srand 函数不断返回，相同的值 3 或 4 次，是吗？

每次掷骰子时，我都想要不同的值，复制代码并运行它以了解我的意思

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T05:12:58.630

srand() 是一个为 rand() 函数设置种子的函数。您在这里所做的是在您调用每个 rand() 之前将种子设置为当前时间，如果调用速度足够快，它将为您提供相同的值（因为它将重置为相同的种子，如果足够快将是相同的时间值）。

您要做的是在程序启动时（在 main() 函数的开头）调用 srand() 一次

然后每次你想要一个随机数时调用 rand() ，就像你现在正在做的那样，但不要每次都调用 srand() 。

# java - 如何在泛型方法中调用类的构造函数？

> ID：14494384
> 
> 赞同：1
> 
> 时间：2013-01-24T05:08:43.610
> 
> 标签：java, generics

我正在尝试创建通用函数以最大程度地减少重复代码。我有以下功能（没有应用通用）

```
public ModelClass getModelDataList (String arg1)
{
        ModelClass objModelClass = new ModelClass(new JSONObject(arg1));
        return objModelClass;
} 
```

所以现在我正在尝试使其通用，以便我可以使用任何 ModelClass（例如学生、部门、学院等），所以我通过在 Google 上搜索找到了代码

```
public static <T> T f(String response) 
    {
        T typeList = new T(new JSONObject(response));
        return typeList ;
    } 
```

有人可以告诉我如何实现这一目标。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T05:18:33.293

不，您不能将泛型参数限制为具有特定的构造函数。你也不应该想要。

标准的做法是通过抽象工厂。Java SE 8 很可能为单一方法接口引入了一种简洁的形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T05:01:41.683

我通过使用接口和抽象方法继承找到了另一种方法

# java - 在 JComboBox 中显示 JButton 的点击视觉效果

> ID：14494388
> 
> 赞同：0
> 
> 时间：2013-01-24T05:09:10.283
> 
> 标签：java, swing, jbutton, jcombobox

我创建了`JComboBox`一个自定义`ListCellRenderer`（a `JButton`）如下：

```
JButton b1 = new JButton("One");
JButton b2 = new JButton("Two");
JButton b3 = new JButton("Three");

JButton[] buttonList = {b1, b2, b3};

JComboBox box = new JComboBox(buttonList);
box.setRenderer(new CellRenderer());
//...

/**************** Custom Cell Renderer Class ****************/
class CellRenderer implements ListCellRenderer {

        public Component getListCellRendererComponent(JList list, Object value, int index,
                boolean isSelected, boolean cellHasFocus) {            
            JButton button = (JButton) value;
            return button;           
} 
```

我已经单独设置了按钮操作，除了我从组合框中单击按钮时，它没有显示按钮单击视觉效果之外，所有操作都很好。

如何显示 a `JButton`inside a的点击视觉效果`JComboBox`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T05:29:02.070

我想我找到了没有在 JComboBox 内显示视觉点击效果的原因来自这个 --> [Stackoverflow 问题](https://stackoverflow.com/questions/12098521/how-to-put-a-jbutton-inside-a-jcombobox)

# javascript - 此 HTML 无法运行 alert() 脚本。为什么？是的。jquery 安装在正确的相对位置

> ID：14494392
> 
> 赞同：0
> 
> 时间：2013-01-24T05:09:33.020
> 
> 标签：javascript, html

JSFiddler 的系统似乎也认为这没问题，但也不会显示警报。[http://jsfiddle.net/dmafackler/zEEpB/3/](http://jsfiddle.net/dmafackler/zEEpB/3/)

```
<!doctype html>
<html>
<head>
  <title>foobar</title>
  <script type="text/javascript" src="jquery.js" />
  <script type="text/javascript">
    $(document).ready(function() { alert("Is anybody home?"); });
  </script>
</head>
<body>
  <p>Copasetic.</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T05:10:42.490

`<script>`标签不会自动关闭。您需要提供一个结束标签：

```
<script type="text/javascript" src="jquery.js"></script> 
```

如果不这样做，则 HTML 解析不正确：

![糟糕的 html](../Images/5d426d42cedb2e566f6ba4050f7ef252.png)

# android - Android Barcode Scanner - 自动选择扫描仪

> ID：14494393
> 
> 赞同：0
> 
> 时间：2013-01-24T05:09:38.767
> 
> 标签：android, barcode, qr-code, zxing

我在我的应用程序中集成了 ZXING 条码扫描器。

如何阻止我的应用程序询问不同的扫描仪应用程序（基于 zxing）并自动选择我的应用程序进行扫描？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:09:41.857

使用`IntentIntegrator`，它将通过限制搜索的包自动选择官方条码扫描仪应用程序。

[http://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/IntentIntegrator.java](http://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/IntentIntegrator.java)

# android - 解决Android中“请先通过添加付款方式完成您的帐户”

> ID：14494396
> 
> 赞同：0
> 
> 时间：2013-01-24T05:10:07.363
> 
> 标签：android, in-app-purchase

我的手机（Galaxy s3，OS v4.1）有两个 Google 帐户。一个是我购买手机时添加的，另一个是我现在添加的。

现在我已经安装了我的应用程序进行测试，并且它有应用内购买。当我尝试购买时，每次我都会收到类似的消息`please first complete your account by adding a payment method`。

1.  我已经安装了在 Play 上起草的签名应用程序。
2.  我已经在 Google 开发者控制台上配置了测试帐户。

在我的手机中配置的 Google 帐户拥有对 Google 开发者控制台的管理员访问权限。这就是为什么我想用我的另一个 Google 帐户在应用产品中进行测试，但是当我被重定向到 Google Play 市场时，它每次都显示我的第一个帐户。如何使用手机中配置的其他帐户进行测试？

有没有类似的系统，这是主要帐户还是次要帐户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:23:13.997

我知道这已经得到回答，但我对同样的信息有不同的体验。（请先通过添加付款方式完成您的帐户）

我的 eclipse adt 和 sdk 已经过时了。更新这些内容还更新了 Trivial drive 项目，该项目随后在自述文件中提供了有关如何正确设置和运行应用程序的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:26:11.750

从您的手机中删除您不想测试的 google 帐户。

[这是此处](http://code.google.com/p/android/issues/detail?id=37758)提交的错误。

# ruby - 设置/更改 + 添加 Sinatra 视图文件夹

> ID：14494398
> 
> 赞同：1
> 
> 时间：2013-01-24T05:10:17.980
> 
> 标签：ruby, model-view-controller, sinatra

我正在学习 sinatra，我正在尝试创建简单的网站。这是我的网络目录树：

```
├── app.rb
│
├── admin
│   └── views
│   └── admin.rb
├── models
├── static
│               
└── views 
```

现在我只想为管理员渲染视图。换句话说：我在不同的位置有 2 个视图文件夹，管理员用于管理控制器和视图，另一个视图用于主页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:25:40.627

在根应用程序文件夹中添加 config.ru 文件

```
require './app'
require './admin/admin'
# run MyApp
run Rack::URLMap.new("/" => MyApp.new, "/admin" => AdminApp.new) 
```

在 app.rb 中

```
require 'sinatra'
require 'haml'

class MyApp < Sinatra::Base
  get "/app" do
    haml :app
  end
end 
```

在 admin.rb

```
# admin.rb
class AdminApp < Sinatra::Base
  get "/" do
    haml :index
  end
end 
```

最后在控制台`rackup -p PORTNUMBER`示例中

```
rackup -p 4000 
```

**更新**

参考[要点](https://gist.github.com/4618134)

# java - 在java中将时间添加到现有时间

> ID：14494399
> 
> 赞同：0
> 
> 时间：2013-01-24T05:10:26.783
> 
> 标签：java, date, time, date-arithmetic

> **可能的重复：**
> [计算两个 Java 日期实例之间的差异](https://stackoverflow.com/questions/1555262/calculating-the-difference-between-two-java-date-instances)

我无法解决以下问题，请帮助我。那是我将现有时间添加到更多时间（分钟，秒或小时）。我无法写下我写的 wt 类型我提到没有给出正确答案,

```
String allexam_end_time="18:59:00";//48540000
long oneminute=60000;
try{
    SimpleDateFormat sdfkk = new SimpleDateFormat("hh:mm:ss");
    Date reqEndtimekk = sdfkk.parse(allexam_end_time);
    long total=reqEndtimekk.getTime()+oneminute;
    System.out.println("TOtal miliseconds         "+reqEndtimekk.getTime()+oneminute);
    System.out.println("total---------"+total);
    int s = (int)(total / 1000) % 60;
    int m = (int)(total / (1000 * 60)) % 60;
    int h=  (int) (total / (1000 * 60 * 60)) % 24;
    System.out.println(h+":"+m+":"+s);
}catch(Exception e){

} 
```

## 输出

```
 output is TOtal miliseconds4854000060000
    total---------48600000
    13:30:0 
```

但我需要回答，如果加一分钟意味着输出应该 19:00:00 怎么解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:24:15.453

也许这会有所帮助！

```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

public class TimeUtility {

    public static void main(String[] args) throws ParseException {
        String examEndTime = "18:59:00";

        System.out.println(modifyTime(examEndTime, 60));
    }

    private static String modifyTime(String origTime, int modSecs) throws ParseException {

        SimpleDateFormat timeFormat = new SimpleDateFormat("HH:mm:ss");
        timeFormat.setLenient(false);
        Date time = timeFormat.parse(origTime);
        time.setSeconds(modSecs);
        return timeFormat.format(time);
    }

} 
```

输出将是
`19:00:00`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T05:21:03.550

您可以使用 GregorianCalendar，这是一个代码示例：

```
 String allexam_end_time = "18:59:00";// 48540000
    SimpleDateFormat sdfkk = new SimpleDateFormat("hh:mm:ss");
    Date reqEndtimekk = sdfkk.parse(allexam_end_time);
    Calendar instance = GregorianCalendar.getInstance();
    instance.setTime(reqEndtimekk);
    //add one minute        
    instance.add(GregorianCalendar.MINUTE, 1);

    System.out.println(sdfkk.format(instance.getTime())); 
```

输出

```
07:00:00 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T05:34:11.840

在我看来，您的代码可能正在进行一些时区转换。例如，我计算 18:59:00 为 (18*60*60 + 59*60)*1000 = **68340000**毫秒。但是如果我将同样的东西放入 Java 并调用 getTime()，我会得到**39540000**毫秒，而你会得到**48540000**。

其中一些其他回复是解决您的问题的更好方法（一件主要的事情是在最后调用 sdfkk.format(reqEndtimekk) 而不是再次获得 h/m/s），但您的但似乎在时区附近。

# c# - 将来自数据库的数据存储在通用列表中

> ID：14494400
> 
> 赞同：0
> 
> 时间：2013-01-24T05:10:28.940
> 
> 标签：c#, asp.net, ado.net

我正在使用通用列表来存储通过查询数据库获得的数据。我实际上将类列表用于多行。但我的问题是我的类几乎有 20 多个属性，而且大多数时候我只使用它的 2 或 3 个属性。所以我想知道保持数据来自数据库的最佳方法是什么。

下面是我的代码

```
List<ImageGalleryCollection> tempList = new List<ImageGalleryCollection1>();
SqlConnection connection = Dal.GetConnection();
SqlParameter[] paramList = new SqlParameter[1];
paramList[0] = new SqlParameter("@cityId", cityId);
SqlDataReader data = Dal.ExecuteReaderSP(SPNames.GetRegCity, paramList, connection);

while(data.Read())
{
    ImageGalleryCollection igc = new ImageGalleryCollection1();

    igc.cityPhotoGalleryId = Convert.ToInt32(data["cityPhotoGalleryId"]);     
    igc.ImagePath = data["imagePath"].ToString();
    tempList.Add(igc);        
}

data.Close();
connection.Close();
return tempList; 
```

在 ImageGalleryCollection 我有超过 20 个属性，以上我只使用两个属性。我认为它非常低效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T05:12:42.520

请问你的基类是怎么实现的？您可以创建另一个具有最多使用属性的类，并在您的类中使用该类的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T07:10:38.753

我想建议您编写一个扩展方法`SqlDataReader`并使用该方法`linq`从返回的 reader 行中获取所需的列。

扩展方法：

```
public static class DataReaderExtension
    {
        public static IEnumerable<Object[]> DataRecord(this System.Data.IDataReader source)
        {
            if (source == null)
                throw new ArgumentNullException("source");

            while (source.Read())
            {
                Object[] row = new Object[source.FieldCount];
                source.GetValues(row);
                yield return row;
            }
        }
    } 
```

在 linq 中使用它：

```
using (SqlConnection cn = new SqlConnection(connectionString))
            {
                using (SqlCommand cmd = new SqlCommand("Select * from tblUser"))
                {
                    cmd.CommandType = CommandType.Text;
                    cmd.Connection = cn;
                    cn.Open();
                    using (SqlDataReader dr = cmd.ExecuteReader())
                    {
                        var result = (from row in dr.DataRecord()
                                      select new
                                         {
                                             UserId = row[0],
                                             UserName = row[1]
                                         }).ToList();                        
                    }
                }
            } 
```

此结果列表仅包含您选择的所需属性，有助于减少不需要的属性的内存消耗。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T05:18:21.990

```
IEnumerable<ImageGalleryCollection> GetImageGalleryCollection()
{    

        SqlConnection connection = Dal.GetConnection();
        SqlParameter[] paramList = new SqlParameter[1];
        paramList[0] = new SqlParameter("@cityId", cityId);
        SqlDataReader data = Dal.ExecuteReaderSP(SPNames.GetRegCity, paramList,connection);
        while(data.Read())
        {
           ImageGalleryCollection igc = new ImageGalleryCollection1();

           igc.cityPhotoGalleryId = Convert.ToInt32(data["cityPhotoGalleryId"]);     
            igc.ImagePath = data["imagePath"].ToString();
            yield return igc;

        }
        data.Close();
        connection.Close();
} 
```

# java - 将 excel 文件发送到客户端的 Java Web 服务

> ID：14494404
> 
> 赞同：-2
> 
> 时间：2013-01-24T05:10:42.323
> 
> 标签：java, xml, web-services, rest, soap

嗨朋友们，我是 Web 服务的新手，他们在我的项目中要求应该创建一个 Web 服务来执行一些数据库交互过程和业务逻辑，而不是向请求的客户端发送一个 excel 文件[文件应该下载到客户端机]。

1.  **我知道我们可以在 SOAP 和 RESTFULL 中发送附件。我想知道哪种是发送 excel 文件的最佳方法以及如何发送示例代码，以便我了解。**

2.  **我知道 Web 服务通过 xml 进行通信我想知道将 excel 文件转换为 xml 并将其从他们的客户端发送到客户端再次将其转换为 excel 从性能和效率的角度来看，这种方法都可以。**

最后，我想知道实现它的最佳方法和示例代码，以便我可以处理它。

更新的问题这是我在项目 A 中的 Web 服务方法

```
@Path("/todo")
public class TodoResource
{
    @GET
    @Produces(MediaType.APPLICATION_OCTET_STREAM)
    public  Response getfile(){
     File file =new File("D:\\Test.xls"); // Initialize this to the File path you   want to serve.
     return Response.ok(file, MediaType.APPLICATION_OCTET_STREAM).build();
       }
} 
```

这在我创建客户端的项目 B 中

```
 protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
   {

    // TODO Auto-generated method stub

    System.out.println(">>>>>>>>>>>>>>>>>Starting of Project Test Call >>>>>>>>>>>>>>>>>");
    ClientConfig config = new DefaultClientConfig();
    Client client = Client.create(config);
    WebResource service = client.resource(getBaseURI());

     //Get Excel Download

    System.out.println(":::::: The Application APPLICATION_OCTET_STREAM Response  :::::: ");
    System.out.println(service.path("rest").path("todo").accept(MediaType.APPLICATION_OCTET_STREAM).get(String.class));
    System.out.println(">>>>>>>>>>>>>>>>>Ending of Project Test Call >>>>>>>>>>>>>>>>>");

  }
 private static URI getBaseURI() {
        return UriBuilder.fromUri("http://localhost:8080/WebService_XML").build();
      } 
```

我的要求是客户端将发送一些信息，如参数 1、参数 2 等，基于它将与数据库交互并创建一个文件。并且该文件应该发送到客户端。就像单击调用 Web 服务过程一样，它将该文件发送到客户端，浏览器下载弹出窗口将出现保存或打开应该出现。点击保存保存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:16:20.080

得到解决方案[检查这里](http://www.mkyong.com/webservices/jax-rs/download-excel-file-from-jax-rs/)

但是客户端呢，任何客户端[.net，php等]都可以访问它。

# c# - 包括派生模型相关类

> ID：14494406
> 
> 赞同：7
> 
> 时间：2013-01-24T05:10:45.063
> 
> 标签：c#, linq, entity-framework, lambda

这是我用来尝试包含`User`表的 Lambda 表达式，它会引发错误。

```
ICollection<Activity> activity = db.Activities
            .Include(i => i.Project.ProjectDoc.OfType<Cover>().Select(v => v.User))
            .Where(u => u.UserID == WebSecurity.CurrentUserId)
            .OrderByDescending(d => d.DateCreated).ToList(); 
```

include 语句给出了这个错误

> 包含路径表达式必须引用在类型上定义的导航属性。对引用导航属性使用虚线路径，对集合导航属性使用 Select 运算符。

有问题的模型

```
public abstract class ProjectDoc
{
    public int ProjectDocID { get; set; }
    public int ProjectID { get; set; }
    public string DocTitle { get; set; }
    public string Status { get; set; }
    public string Access { get; set; }
    public DateTime DateCreated { get; set; }

    public virtual ProjectDocAccess ProjectDocAccess { get; set; }
    public virtual Project Project { get; set; } 
    public virtual ICollection<Comment> Comment { get; set; }
    public ICollection<ProjectDocVote> ProjectDocVote { get; set; }
}
public class Segment : ProjectDoc
{
    public string Content { get; set; }
}
public class Cover : ProjectDoc
{
    public string CoverURL { get; set; }
    public int UserID { get; set; }
    public User User { get; set; }
} 
```

如何包含类型的`User`表？`ProjectDoc``Cover`

**更新**：根据答案。我将模型更新为`Cover`看起来像这样，并删除了我所说的导致错误的包含。我现在可以获取数据：

```
public class Cover : ProjectDoc
{
    public string CoverURL { get; set; }
    public int UserID { get; set; }
    public virtual User User { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T12:14:34.603

It is currently [not supported](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1249289-include-property-of-derived-classes). Eager loading relations on derived types doesn't work. The best you can do is to execute separate query to load all required Users for Covers already loaded by the first query and let EF do its magic (it should fill your navigation properties on already loaded entities but you must have lazy loading turned off).

# javascript - JavaScript - 找出一个数字均匀地进入另一个数字的次数

> ID：14494413
> 
> 赞同：9
> 
> 时间：2013-01-24T05:11:25.457
> 
> 标签：javascript

有没有一种简单的方法可以在 JavaScript 中找到一个数字均匀地进入另一个数字的次数？

说 11 除以 4 --- 我知道 4 平均进入 11 2 次

我有这段代码，但我认为有一种更简单的方法我可能会忘记？

```
<script>
a = 11;
b = 4;

i = a % b;
i2 = a - i;
solution = i2 / b;
document.write(solution); // 2
</script> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-24T05:12:43.813

关于什么...

```
Math.floor(11 / 4); 
```

如果您想处理负数（感谢[Ted Hopp](https://stackoverflow.com/users/535871/ted-hopp)），您可以使用`~~`,`|0`或任何其他将其操作数视为 32 位有符号整数的按位技巧。请记住，除了这令人困惑之外，它不会处理超过 32 位的数字。

```
~~(11 / 4); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-24T05:14:21.313

你可以使用这个技巧：

```
(a / b) >> 0 
```

移动 0 会截断小数部分。这将始终向 0 舍入，这`Math.floor`与负数无关。

# php - php 函数 file_get_contents 和第一行 UTF-8 编码文本

> ID：14494419
> 
> 赞同：0
> 
> 时间：2013-01-24T05:12:18.670
> 
> 标签：php, utf-8, file-get-contents

我有以下代码：

```
$array_test = array();

$file = file_get_contents ('./test.txt');

$file_array = explode("\n", $file);

foreach ($file_array as $line) {

    $word = trim($line);
    $array_test[] = $word;
}

echo $array_test[0];

if ($array_test[0] == "1") { echo 'first line'; }

echo $array_test[1];

if ($array_test[1] == "2") { echo 'second line'; }

print_r ($array_test); 
```

test.txt 是以 UTF-8 编码的文件。它有 5 行。在每一行我都有一个数字：1 - 第一行，2 - 第二行，等等。

运行脚本的结果如下：

```
1
2
second line
Array
(
    [0] => 1
    [1] => 2
    [2] => 3
    [3] => 4
    [4] => 5
) 
```

如您所见，第一行存在问题。似乎它已正确添加到数组中，但不知何故，它的值与“1”不同。其他行没有问题，只有第一行。可以通过跳过第一行并开始将第二行的值添加到数组中来解决问题，但我只是想知道为什么它不像我写的那样工作？通常我在显示或阅读 UTF8 编码的文本或页面时没有任何问题。更改为“file”而不是“file_get_contents”并不能解决问题。任何建议将不胜感激。ps PHP 版本 5.3.1

**更新：**问题是 UTF-8 BOM。请参阅下面的解决方案。感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:52:58.113

主要问题是这个，但我还不能解决它。在 var_dump($array_test[0]) 我得到以下输出：

```
string 'ï»¿1' (length=4) 
```

这就是“第一行”没有回显的原因，因为 if 条件不成立。

另外，如果你可以分享你的`test.txt`文件，则很容易发现问题。

**编辑：部分解决方案**

您可以在第一个 if 条件之前添加此行，以按照@Tino Didriksen 的描述处理此行为以获得所需的输出。

```
$array_test[0] = substr_replace($array_test[0],'',0,3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:19:14.380

（尝试做）——错误的解决方案。见下文

```
if($array_test[0] === "1") echo "first line"; 
```

对于这种情况，有一个函数[file() ：](http://php.net/manual/ru/function.file.php)

```
$file = file_get_contents ('./test.txt');
$file_array = explode("\n", $file); 
```

我错了！

var_dump 给了我们一个答案：

```
string(2) "1
" 
```

字符串中有换行符。

尝试做：

```
$word = trim($line,"\r\n "); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T05:30:56.573

请尝试以下更新的代码：

```
$array_test = array();

$file = file_get_contents ('./test.txt');

$file_array = explode("\n", $file);

foreach ($file_array as $line) {

    $word = trim($line);
    $array_test[] = $word;
}

echo $array_test[0];

if ($array_test[0][0] == "1") { echo 'first line'; }

echo $array_test[1];

if ($array_test[1][0] == "2") { echo 'second line'; } 
```

# android - Android 如何在 android 的片段中插入控件

> ID：14494422
> 
> 赞同：0
> 
> 时间：2013-01-24T05:12:25.787
> 
> 标签：android

如何在android的片段中插入像buttonOnClickListener ImageOnClickListener这样的控件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T05:20:36.543

您可以将它放在片段的 xml 中，就像任何其他视图一样

我猜你可能有上下文问题，使用'getActivity（）'来获取活动的上下文，或者你也可以使用'ParentActivity.class'。

当您在“活动”中使用按钮时，您习惯于使用“this”作为上下文，但是当您想在片段中使用按钮时不能使用“this”，因为“this”将引用“片段”而不是“活动”

以下代码可用于 'Fragment' 的 'onCreate()'

```
 Button btn = new Button(getActivity());
     btn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

        }
    }); 
```

请随时提出任何进一步的疑问，并让我知道这是否解决了您的问题

# iphone - 使用 FLoginView 的 facebook 登录未在 ios 6 中显示

> ID：14494425
> 
> 赞同：4
> 
> 时间：2013-01-24T05:12:42.197
> 
> 标签：iphone, ios

我正在尝试使用 FLoginView 为 facebook 创建登录按钮。以下是我编写的代码。

```
- (void)viewDidLoad
{
[super viewDidLoad];

if(!loginview)
    loginview = [[FBLoginView alloc] initWithPermissions:[NSArray arrayWithObject:@"publish_actions, user_photos,status_update"]]; // Whatever permissions you need

loginview.frame = self.view.bounds; //whatever you want

loginview.delegate = self;

[self.view addSubview:loginview];
// Do any additional setup after loading the view from its nib.
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

- (void)loginViewShowingLoggedInUser:(FBLoginView *)loginView {

NSLog(@"Logged In");

}

- (void)loginViewFetchedUserInfo:(FBLoginView *)loginView
                        user:(id<FBGraphUser>)user {
NSLog(@"user Id %@",user.id);

}
- (void)loginViewShowingLoggedOutUser:(FBLoginView *)loginView {
// Called after logout
NSLog(@"Logged out");
} 
```

但它没有显示登录按钮。我的代码有什么问题。在控制台中我得到“注销”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-30T21:37:08.927

我添加了 FacebookSDKResources.bundle，但仍然在 xcode 输出窗格中出现错误“Unknown class FBLoginView in interface builder”。

为了解决这个问题，我在 didFinishLaunchingWithOptions 中添加了以下行：

```
[FBLoginView class]; 
```

这在[https://developers.facebook.com/ios/login-ui-control/中有解释](https://developers.facebook.com/ios/login-ui-control/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T02:21:54.960

正如上面@rajath 所指出的，解决方案是将 FacebookSDKResources.bundle 添加到您的项目中。

# android - 如何将捕获的图像传递给不同的活动以设置为android中的图像视图

> ID：14494435
> 
> 赞同：1
> 
> 时间：2013-01-24T05:13:42.850
> 
> 标签：android, android-camera-intent, image-capture

我有两个活动第一个活动具有动态图像视图，单击时我正在调用第二个活动，其中调用相机以捕获图像，现在我可以调用相机并捕获图像但是我如何将该图像传递给前一个活动并设置为图像视图。

```
String fileName = "testphoto.jpg";
    ContentValues values = new ContentValues();
    values.put(MediaStore.Images.Media.TITLE, fileName);
    values.put(MediaStore.Images.Media.DESCRIPTION,
            "Image capture by camera");
    values.put(MediaStore.Images.Media.MIME_TYPE, "image/jpeg");
    imageUri = getContentResolver().insert(
            MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);
    intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1);
    startActivityForResult(intent, IMAGE_CAPTURE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:23:23.613

似乎您正在尝试从相机捕获图像并设置您的视图，但我认为您不需要两个活动来实现您的目标。

您可以借助`startActivityForResult`.

只需`Camera Intent`点击 imageview，并在同一活动中取回您的结果，请检查以下代码：

定义捕获图像的路径：

```
String filepath = Environment.getExternalStorageDirectory()+"/foldername/"+filename;
System.out.println("thumbnail path~~~~~~"+filepath);
File file = new File(filepath);
Uri outputFileUri = Uri.fromFile(file); 
```

单击imageview对此进行编码：

```
Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
startActivityForResult(intent, 100); 
```

onActivityResult 在同一活动中：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
        if (requestCode == 100) {
        sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://"+ Environment.getExternalStorageDirectory())));
        Bitmap bitmap;
        bitmap=GlobalMethods.decodeFile(_path);//function to decode.
        if (bitmap == null) {
            ivPhy.setImageBitmap(bitmap);
        } 
        else {
            ivPhy.setImageBitmap(bitmap);
            ivPhy.setScaleType(ScaleType.FIT_XY);
        }
    }

} 
```

所需的权限传递到清单文件：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:name="android.hardware.camera" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T06:39:43.277

最后，我在`startActivityForResult`.

检查下面的代码，希望对您有所帮助：

**主要的.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="57dp"
        android:layout_marginTop="84dp"
        android:text="Button" />

     <ImageView
        android:id="@+id/image"
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
         />

</RelativeLayout> 
```

**第一活动.java**

*它将打开第二个活动`startActivityResult`*

```
package com.example.demo_cameraintent;

import java.io.File;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.ImageView.ScaleType;

public class MainActivity extends Activity {
    ImageView image;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        image=(ImageView)findViewById(R.id.image);

        String extStorageDirectory = Environment.getExternalStorageDirectory()
                + "/testing";

      File xmlDirectory = new File(extStorageDirectory);
        if (!xmlDirectory.exists())
            xmlDirectory.mkdirs();

        Button btn=(Button)findViewById(R.id.button1);

        btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent i = new Intent(MainActivity.this, SecondActivity.class);
                startActivityForResult(i, 1);

            }
        });
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        if (requestCode == 1) {

             if(resultCode == RESULT_OK){

              String result=data.getStringExtra("result");
              Log.d("*****************", "inside onactivityresult in main activity="+result);

            Bitmap bitmap = BitmapFactory.decodeFile(result);
            image.setImageBitmap(bitmap);
            image.setScaleType(ScaleType.FIT_XY);

        }

        if (resultCode == RESULT_CANCELED) {

             //Write your code on no result return 

        }
        }//onAcrivityResult

    }
} 
```

**SecondActivity.java**

*在这里，当它被调用时，它将直接打开`cameraIntent`并在`onActivityResult`其中返回 Firstactivity 并输出您的输出*

```
package com.example.demo_cameraintent;

import java.io.File;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.view.Menu;

public class SecondActivity extends Activity {
    String filepath;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.main);

         filepath = Environment.getExternalStorageDirectory()+"/testing/"+"test.jpg";
        System.out.println("thumbnail path~~~~~~"+filepath);
        File file = new File(filepath);
        Uri outputFileUri = Uri.fromFile(file);

        Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
        startActivityForResult(intent, 100);

    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
            if (requestCode == 100) {

                 Intent returnIntent = new Intent();
                 returnIntent.putExtra("result",filepath);
                 setResult(RESULT_OK,returnIntent);     
                 finish();
        }

    }

} 
```

**清单.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.demo_cameraintent"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.demo_cameraintent.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="SecondActivity"
            android:label="@string/app_name" >
        </activity>
    </application>

    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.CAMERA" />

    <uses-feature android:name="android.hardware.camera" />

</manifest> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T05:57:32.107

而不是`ContentValues`用于创建`imageUri`，只需将您的图像存储在 sdcard 中，如下所示：

```
String path=Environment.getExternalStorageDirectory().getAbsolutePath()+"/testphoto.jpg";
intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(new File(path)) ); 
```

之后，在调用第二个活动时，只需像这样传递文件的路径：

```
intent.putExtra("pathOfImage",path); 
```

现在，在第二个活动中，您可以从 sdcard 中检索图像：

```
File f = new File(getIntent().getStringExtra("pathOfImage"));
ImageView mImgView1 = (ImageView)findViewById(R.id.imageView);
Bitmap bmp = BitmapFactory.decodeFile(f.getAbsolutePath());
mImgView1.setImageBitmap(bmp); 
```

# xml - 如何在不解析 XML 的情况下在 Flash 中获取纯字符串数据？

> ID：14494441
> 
> 赞同：1
> 
> 时间：2013-01-24T05:14:25.653
> 
> 标签：xml, load, actionscript-2

我经常使用 XML 对象将数据加载到 Flash 中。当 XML 对象在闪存中时，我将其转换为字符串 (myData.toString()) 并使用我的分隔符对其进行解析。

但是，当我加载带有以下`<>`标签的字符串数据时：

```
Hi please state <name> <address> 
```

这会弄乱接收到的数据，因为`<>`我认为 XML 将封装视为新节点。所以我得到的是：

```
Hi please state 
```

之后的一切都过去了。。

我可以在输出之前将 <> 标签转换为 PHP 中的安全字符，但我想知道 Flash AS2 中是否有一个函数可以让我仅将 XML 作为纯字符串读取？

我已经尝试过： var headers:Array = new Array("Content-Type", "text/plain", "X-ClientAppVersion", "2.0"); my_xml.addRequestHeader(headers);

但这没有用。

我会这样做`LoadVars`，但我需要使用 XML 进行这项工作，因为`LoadVars`将传入的字符串转换为 urlencoded，而 XML 根本不接触传入的数据（我的数据可以有特殊字符并且它不会中断。只有`<>`中断它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:18:28.813

如果您想要纯文本数据，为什么要使用 XML 加载器来解析 XML 文件...？

无论如何，如果您坚持使用该 xml 加载器，您可以：

*   将 xml 数据封装到[CDATA](http://www.w3schools.com/xml/xml_cdata.asp "cdata 上的 w3schools")中，这将防止任何节点解析
*   [正确格式化 XML](http://www.w3schools.com/xml/xml_syntax.asp "w3schools 关于格式化 xml")，因为如果将根节点分配给字符串变量，它**会**递归地写出所有内容，包括所有节点

**编辑：** 如果您想使用 loadVars 加载纯数据，唯一的诀窍是使用 onData 而不是 onLoad。从文本文件（来自[as2 语言参考](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00001161.html "as2 语言参考")的示例：

```
var my_lv:LoadVars = new LoadVars();
my_lv.onData = function(src:String) {
    if (src == undefined) {
        trace("Error loading content.");
        return;
    }
    trace(src);
};
my_lv.load("content.txt", my_lv, "GET"); 
```

在这里，您还可以看到如何在 actionscript 2 中加载一些文本数据的完整选项列表：http: [//livedocs.adobe.com/flash/9.0/main/wwhelp/wwhimpl/common/html/wwhelp.htm ?context =LiveDocs_Parts&file=00000886.html](http://livedocs.adobe.com/flash/9.0/main/wwhelp/wwhimpl/common/html/wwhelp.htm?context=LiveDocs_Parts&file=00000886.html)

# c# - 如何从字符串中获取两个整数值，然后将它们放回两个单独的整数中？

> ID：14494442
> 
> 赞同：-2
> 
> 时间：2013-01-24T05:14:37.980
> 
> 标签：c#, visual-studio-2010

我有一个保存每个按钮特定坐标的二维字符串数组

```
string[,] gridPass = new string[20, 20];

    private void Form1_Load(object sender, EventArgs e)
    {
        foreach (int row in Enumerable.Range(0, 20))
        {
            foreach (int col in Enumerable.Range(0, 20))
            {

                Button b = new Button();
                b.Size = new System.Drawing.Size(30, 30);
                b.Location = new Point(row * 30, col * 30);
                gridPass[row, col] = row.ToString() + " - " + col.ToString();
                b.Tag =  gridPass[row, col];
                b.Text = gridPass[row, col];
                this.Controls.Add(b);
                b.Click += new EventHandler(AttackHandler);
            }

        } 
```

当我在按钮上使用事件处理程序进行攻击时

```
private void AttackHandler(object sender, EventArgs e)
        {
            Button clickedButton;
            string tagValue = "";

            clickedButton = (Button)sender;
            tagValue = (string)clickedButton.Tag;
            theSea.attackLocation(tagValue);

        } 
```

显然，无论按钮的坐标是什么，它都会发送一个像 0 - 1 或 8 - 4 这样的字符串。当我将该字符串传递给我的 Sea 类中的 attackLocation 方法时，我希望能够提取这两个数字以使用我的 Sea 类中的数组来引用它们，以查看那里是否有船。我需要那些 X 和 Y 值来引用另一个数组中完全相同的位置。所以我可以做类似的事情。

```
public void attackLocation(string attackCoords)
    {
        MessageBox.Show("Attacking " + attackCoords);
        x = however to convert it back;
        y = however to convert it back;
        foreach (Ship s in shipList)
        {
            if (grid[x,y] == 0)
            {
                MessageBox.Show("Attacked this block before."); 
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T05:20:29.963

创建一个类来保存行和列值并将 设置`Tag`为该对象。然后你就不需要进行字符串转换了。

```
class SeaPoint
{
  public int Row { get; set; }
  public int Column { get; set; }
} 
```

在负载中：

```
 foreach (int col in Enumerable.Range(0, 20))
        {
            Button b = new Button();
            b.Size = new System.Drawing.Size(30, 30);
            b.Location = new Point(row * 30, col * 30);
            gridPass[row, col] = row.ToString() + " - " + col.ToString();
            b.Tag =  new SeaPoint() { Row = row, Column = col }; // <---  Changed.
            b.Text = gridPass[row, col];
            this.Controls.Add(b);
            b.Click += new EventHandler(AttackHandler);
        } 
```

和攻击处理器：

```
private void AttackHandler(object sender, EventArgs e)
{
    Button clickedButton = (Button)sender;
    var seaPoint = (SeaPoint)clickedButton.Tag; // <-- Changed
    theSea.attackLocation(seaPoint);  // rewrite attackLocation to accept a SeaPoint.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:17:59.763

您可以使用[String.Split](http://msdn.microsoft.com/en-us/library/system.string.split%28v=vs.71%29.aspx)来提取连字符分隔的值并在它们上应用[String.Trim](http://msdn.microsoft.com/en-us/library/t97s7bs3.aspx)以删除空格，然后再将其传递给[int.Parse](http://msdn.microsoft.com/en-us/library/system.int32.parse.aspx)以将字符串转换为数字。

```
//b.Tag =  "0 - 1";    
string []arr = b.Tag.ToString().Split('-');    
int num1 = int.Parse(arr[0].Trim());
int num2 = int.Parse(arr[1].Trim()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T05:19:21.077

制作这个正则表达式：

```
new Regex(@"(\d+) - (\d+)") 
```

在要从中提取数字的字符串上使用正则表达式的匹配：

[http://msdn.microsoft.com/en-us/library/twcw2f1c.aspx](http://msdn.microsoft.com/en-us/library/twcw2f1c.aspx)

它将返回一个 Match 对象，该对象将包含两个组（假设我记得组和捕获之间的区别......）。组的值将是两个整数的字符串表示。int.Parse() 他们。

# android - iOS/Android 上最精简的 QR 解码器是什么？

> ID：14494447
> 
> 赞同：0
> 
> 时间：2013-01-24T05:15:09.243
> 
> 标签：android, ios, qr-code

我注意到 ZXing，但它似乎有一堆我不需要的东西。我只需要能够解码具有名称、地址和电子邮件编码的二维码。

我真的不希望用户必须安装外部应用程序，即条形码阅读器，这将是一个由极少数人使用的私人应用程序。

有人可以向我指出一个让用户解码这些代码的流线型框架的​​方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T05:45:28.457

您可以使用`Zbar Code Scanner` for`Android/ios`并按照您想要的方式自定义它

# windows-server-2012 - 使用现有数据在 Windows Server 2012 上创建存储池？

> ID：14494448
> 
> 赞同：2
> 
> 时间：2013-01-24T05:15:14.980
> 
> 标签：windows-server-2012

我有一个现有的 2TB 驱动器，大约 1/3 已满。我有另一个 2TB 驱动器，我想添加并创建一个存储池以实现冗余。唯一的问题是，我只能将空驱动器添加到存储池中。有什么方法可以创建一个新的存储池，同时仍然保留我现有的数据？

谢谢！蒂姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T00:13:07.850

无法使用现有数据创建存储池。存储池只是由 Windows 管理的驱动器的集合。您必须从存储池创建一个或多个虚拟磁盘。这些虚拟磁盘可以像普通硬盘一样进行管理（格式、分区、文件系统……）。虚拟磁盘上的数据保存到与存储池关联的驱动器中。

简单的解决方案：

*   将数据复制到外部硬盘驱动器
*   使用两个硬盘驱动器创建存储空间
*   创建带镜像的虚拟磁盘
*   将数据从外部驱动器复制到虚拟磁盘

如果没有额外的硬盘可用，则复杂的解决方案：

*   使用空闲硬盘创建存储空间
*   使用您的数据容量创建一个虚拟磁盘（固定大小，简单）
*   将数据复制到创建的虚拟磁盘
*   将第二个硬盘驱动器添加到存储池
*   使用存储池的剩余容量创建镜像虚拟驱动器
*   将数据从简单虚拟驱动器复制到镜像虚拟驱动器
*   删除简单的虚拟驱动器
*   将镜像虚拟驱动器扩展到 2 TB

# cpu - Virtuoso 系统要求

> ID：14494449
> 
> 赞同：4
> 
> 时间：2013-01-24T05:15:16.193
> 
> 标签：cpu, ram, virtuoso

我们将使用 Virtuoso 来存储 RDF，一开始的三重计数将是 1 亿。我需要知道什么应该是典型的 RAM、CPU、磁盘等。查询将使用 SPARQL，并且会有一些复杂的查询。

请提供您的意见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T09:30:29.630

Virtuoso 版本 6.x 三元组（四元组）的平均大小约为 30 字节，因此对于 1 亿个三元组，您需要大约 3GB 内存，这是使数据库工作集适合内存的最关键组件，数据不需要数据库“预热”后从磁盘加载，以获得最佳性能。在运行复杂查询时尤其如此。就磁盘而言，它们越快，数据库加载到内存中、执行检查点等的速度就越快。因此，在可能的情况下，建议使用 SSD 或类似设备，尤其是在内存有限且有时不可避免地从磁盘读取数据的情况下。就当今可用的处理器标准商品而言，64 位处理器就足够了，通常在您选择的 Linux x86_64 系统上运行，

有关更多详细信息，请参阅以下 Virtuoso 常见问题解答和性能调整文档：

[http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VirtRDFPerformanceTuning](http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VirtRDFPerformanceTuning) [http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/#FAQ](http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/#FAQ)

# authentication - ADFS 2.0 身份验证可以具有 username@domain.com 格式吗？

> ID：14494455
> 
> 赞同：0
> 
> 时间：2013-01-24T05:15:40.780
> 
> 标签：authentication, adfs2.0

ADFS 2.0 auth 具有域\用户名和密码格式（即典型的 Windows 登录格式）。我们可以有 username@domain.com 格式吗？（例如在线共享点）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:22:09.973

有点！

AD 允许通过 Windows 2000 之前的 sAMAccountName 进行身份验证，例如 JoeBloggs 和“新的”UPN - JoeBloggs@domain.com。问题是必须预先配置这些 UPN 后缀。

所以在一个封闭的环境中它会起作用，但如果每个人和他的狗都可以验证，例如@gmail、@hotmail、@yahoo 等 - 这并不实用。

# windows-phone-8 - Windows Phone 8 支持 Silk 编解码器

> ID：14494456
> 
> 赞同：0
> 
> 时间：2013-01-24T05:15:47.540
> 
> 标签：windows-phone-8

Windows Phone 8 支持 Silk 编解码器。如何使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:05:10.660

我不认为你可以。我的理解是 Silk 是由 Skype 开发的，没有办法在 Windows Phone8 上使用 Skype 客户端之外的编解码器。

然而，好消息是丝绸被整合到由 SILK（语音编解码器）和 CELT 创建的 Opus 编解码器中。

你没有说你想要完成什么，所以在这里阅读更多关于 Opus 的信息[http://www.opus-codec.org/](http://www.opus-codec.org/)

# .htaccess - .htaccess 强制 404

> ID：14494457
> 
> 赞同：0
> 
> 时间：2013-01-24T05:15:52.920
> 
> 标签：.htaccess, mod-rewrite

试图通过强制 404 来限制通过主域对插件域的访问，但似乎不起作用，这就是我所拥有的：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www.)?domain.com$ [NC]
RewriteCond %{REQUEST_URI} ^/domain2.com/(.*)$ [OR]
RewriteCond %{REQUEST_URI} ^/domain3.co.uk/(.*)$ [OR]
RewriteCond %{REQUEST_URI} ^/test/(.*)$
RewriteRule ^(.*)$ - [L,R=404] 
```

该目录`test`是正确的 404，所以我认为这与 .com 和 .co.uk 字符有关？

# javascript - 锚标记错误

> ID：14494459
> 
> 赞同：1
> 
> 时间：2013-01-24T05:16:07.927
> 
> 标签：javascript, jquery, javascript-events

我在这一行有一个错误

```
jQuery('a[href$=jpg], a[href$=png], a[href$=gif], a[href$=jpeg], a[href$=.mov] , a[href$=.swf] , a[href*=vimeo.com] , a[href*=youtube.com]').each(function() 
```

请在上面的行中指明错误

这是我的代码

```
if(autolink)
    {
        jQuery('a[href$=jpg], a[href$=png], a[href$=gif], a[href$=jpeg], a[href$=.mov] , a[href$=.swf] , a[href*=vimeo.com] , a[href*=youtube.com]').each(function()
        {
            if(!jQuery(this).attr('rel') != undefined && !jQuery(this).attr('rel') != '' && !jQuery(this).hasClass('noLightbox'))
            {
                jQuery(this).attr('rel','lightbox[auto_group]')
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:23:58.463

jQuery 不喜欢以这种方式使用的表达式中的句点。在属性值周围加上引号，如下所示：

```
a[href$=".mov"] 
```

[http://jsfiddle.net/G9EZR/](http://jsfiddle.net/G9EZR/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:23:57.910

尝试为选择器添加引号，例如：

```
jQuery('a[href$=jpg], a[href$=png], a[href$=gif], a[href$=jpeg], a[href$=.mov] , a[href$=.swf] , a[href*=vimeo.com] , a[href*=youtube.com]').each(function() 
```

至

```
jQuery('a[href$="jpg"], a[href$="png"], a[href$="gif"], a[href$="jpeg"], a[href$=".mov"] , a[href$=".swf"] , a[href*="vimeo.com"] , a[href*="youtube.com"]').each(function() 
```

# c# - 违反主键约束“PK_login1”。无法在对象“dbo.login1”中插入重复键

> ID：14494462
> 
> 赞同：2
> 
> 时间：2013-01-24T05:16:26.980
> 
> 标签：c#, asp.net

我正在尝试向 sql server 插入一些数据，但收到错误消息，例如“违反主键约束 'PK_login1'。无法在对象 'dbo.login1' 中插入重复键。语句已终止。”。我试图从表中删除主键约束，之后我看到它正在向表中插入两个以上类似的数据。我的代码是

```
protected void btn_Submit_Click(object sender, EventArgs e)
{
    try
    {
        SqlCommand cmd;
        str = "Insert into login1 values ('" + txtbx_Uname.Text + "', '" + txtbx_Pwd.Text + "', '" + txtbx_Email.Text + "', '" + txtbx_Dob.Text + "', " + txtbx_Phone.Text + ")";
        con.Open();
        cmd = new SqlCommand(str, con);
        cmd.ExecuteNonQuery();
        lbl_Error.Visible = true;
        lbl_Error.Text = "Registration Success";
        int n = Convert.ToInt32(cmd.ExecuteScalar());
        if(n==1)
            Response.Redirect("Login.aspx");
        con.Close();
    }
    catch
    {
        lbl_Error.Visible = true;
        lbl_Error.Text = "SQL Server Error. Pleaase try after sometime";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:51:08.687

您正在使用 `cmd.ExecuteNonQuery();`， `int n = Convert.ToInt32(cmd.ExecuteScalar());`它会在这里做同样的工作。如果您想要已插入表中的新记录的状态，则将查询更改为存储过程或使用另一个查询来找出具有提到的字段的记录计数。

试试下面的代码。

```
 protected void btn_Submit_Click(object sender, EventArgs e)
    {
        try
        {
            SqlCommand cmd;
            str = "Insert into login1 values ('" + txtbx_Uname.Text + "', '" + txtbx_Pwd.Text + "', '" + txtbx_Email.Text + "', '" + txtbx_Dob.Text + "', " + txtbx_Phone.Text + ")";
     " _    
    & "SELECT @@IDENTITY AS int32;"
            con.Open();
            cmd = new SqlCommand(str, con);    
      int n = Convert.ToInt32(cmd.ExecuteScalar());  

            if(n==1)
            {
     lbl_Error.Visible = true;
            lbl_Error.Text = "Registration Success";  
                Response.Redirect("Login.aspx");
            con.Close();
           }
     }
        catch
        {
            lbl_Error.Visible = true;
            lbl_Error.Text = "SQL Server Error. Pleaase try after sometime";
        }

} 
```

希望这能解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:24:57.130

您必须**捕获异常，然后告诉用户该电子邮件已经存在**。此链接可能会对您有所帮助：[违反 PRIMARY KEY 约束](http://www.codeproject.com/Questions/259032/Violation-of-PRIMARY-KEY-constraint-PK_LogIn-Canno)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T05:26:23.307

**[PRIMARY KEY](http://www.w3schools.com/sql/sql_primarykey.asp)**约束唯一标识数据库表中的每条记录。

主键必须包含唯一值。

主键列不能包含 NULL 值。

每个表都应该有一个主键，每个表只能有一个主键。

**插入前**

您需要检查数据库中是否存在新的插入值。如果数据库中没有数据，则将新值插入数据库，否则向用户抛出消息“**给定输入的数据已经存在**”。

# jquery - jQuery 1.9 复选框未选中后第二次未选中

> ID：14494467
> 
> 赞同：25
> 
> 时间：2013-01-24T05:17:29.703
> 
> 标签：jquery

在 jQuery 1.9 v 复选框未选中，一旦我取消选中它，尝试通过单击按钮再次检查

```
$("#add_cart_checkbox").attr("checked",'checked') ; 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-01-24T05:18:02.940

你必须使用[`prop`](http://api.jquery.com/prop/)，并传递一个布尔值：

```
$("#add_cart_checkbox").prop("checked", true) ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T05:29:46.773

[在这个 JsFiddle 上](http://jsfiddle.net/zaheerahmed/ebkCA/)工作正常

```
$("#add_cart_checkbox").attr("checked",'checked') ; 
```

一定是事件冒泡的问题导致两次调用click事件。

# javascript - box2d world.ClearForces() 的意义何在？

> ID：14494468
> 
> 赞同：7
> 
> 时间：2013-01-24T05:17:34.693
> 
> 标签：javascript, box2d

我正在使用 box2dweb 版本 2.1.a.3（javascript，从 Flash 移植）来创建游戏。我从谷歌得到的一些例子：

```
setInterval(
     function(){
          world.Step(1/60 , 10, 10)
          world.ClearForces()
     }
,1000/60) 
```

我试图删除行**world.ClearForces()**但事情表现相同。我想知道**ClearForces()**有什么功能？如果我这样删除它会遇到什么麻烦？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T06:54:18.273

我不能确定 Flash 和 Javascript 版本，但在 Box2D 的早期版本中，ClearForces 功能最初是必需的。那时，如果您执行 ApplyForce 来移动对象，该力将无限期地保持有效，但现在如果您想要一个连续的力，您需要在每个时间步执行 ApplyForce。如此有效，引擎在每一步都为您调用这个 ClearForces。如果您可以在不更改任何内容的情况下将其取出，那么您也可以。

# php - PHP - 将 MySQL 查询导出到 CSV Changeup

> ID：14494469
> 
> 赞同：0
> 
> 时间：2013-01-24T05:17:39.110
> 
> 标签：php, mysql, csv, fputcsv

我看到很多关于导出到 CSV 的正确方法的帖子，大多数开发人员建议使用`fputcsv()`

我将如何转换下面的脚本来使用`fputcsv`？您会看到我还在导出 Header 行，它反映了表列名称，我想保留它。

```
<?php

    $sql = "SELECT * FROM `tbl_customers`";
    $result = mysql_query($sql, $dbdata_conn) or die(mysql_error());

    $header = $csv_output = '';
    $fields = mysql_num_fields($result);
    for ($i = 0; $i < $fields; $i++) {
        $header .= mysql_field_name($result, $i) . ",";
    }
    $header .= "\n";

    while ($rowr = mysql_fetch_row($result)) {
      for ($j=0; $j<$i; $j++) {
        $csv_output .= $rowr[$j].", ";
          }
     $csv_output .= "\n";
    }

    $csv_output = $header.$csv_output;

    header("Content-type: text/x-csv");
    header("Content-Disposition: attachment; filename=test.csv");
    header("Pragma: no-cache");
    header("Expires: 0");
    print "$csv_output";
    exit;   

?> 
```

我知道这`mysql_query`已被弃用，所以这是为了练习。

作为旁注，我不熟悉`fputcsv`，但我读到它对于格式化 csv 输出的数据非常有用，为我们节省了所有转义等的时间。（我也非常愿意改进上述内容）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:29:07.760

简单演示（按照您的`mysql_*`功能）：

```
$header=array();
$fields = mysql_num_fields($result);
for ($i = 0; $i < $fields; $i++) {
    $header[] = mysql_field_name($result, $i);
}
header("...");
$f=fopen("php://output","wt");
fputcsv($f,$header);
while ($row = mysql_fetch_row($result)) {
    fputcsv($f,$row);
}
fclose($f); 
```

正如您所说，`mysql_*`函数已被弃用，因此您也应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:33:50.403

如果您想将其作为附件下载，可以不使用[fputcsv()](http://php.net/manual/en/function.fputcsv.php)，但是如果您想使用它，这里有一个解决方法：

```
$sql = "SELECT * FROM `tbl_customers`";
$result = mysql_query($sql, $dbdata_conn) or die(mysql_error());

$header = array();
$csv_output = array();
$fields = mysql_num_fields($result);
for ($i = 0; $i < $fields; $i++) {
    $header[] = mysql_field_name($result, $i);
}
$csv_output[] = $header;

while ($rowr = mysql_fetch_array($result)) {
    $csv_output[] = $rowr;
}

$fp = fopen('/path/to/file.csv', 'w');  
foreach ($csv_output as $line) {
    fputcsv($fp, $line);
}
fclose($fp);    

// if you pick up the file from the directory manually, the following is not needed
header("Content-type: text/x-csv");
header("Content-Disposition: attachment; filename=test.csv");
header("Pragma: no-cache");
header("Expires: 0");

print file_get_contents('/path/to/file.csv');
unlink('/path/to/file.csv');
exit; 
```

# ios - 使用 componentsSeparatedByString 的分词器给出不正确的结果

> ID：14494477
> 
> 赞同：0
> 
> 时间：2013-01-24T05:18:10.660
> 
> 标签：ios, objective-c

长话短说，我正在尝试将输入字符串解析为“令牌”.....

我可以完全控制令牌的放置位置，我可以通过 NSLog 看到我的输入字符串的格式完全正确（甚至直到尝试标记之前的那一刻）。

出于本次讨论的目的，我正在构建一个简单的计算器，它可以理解输入、RPN 输入，然后我遇到的问题是标记化和评估。

无论如何，假设我的输入字符串是

```
55:6:+:3:+:9:3:/:- 
```

已插入“：”以有目的地在每个“令牌”之间创建分隔符。然后我尝试做类似的事情

```
 NSArray *chunks = [input componentsSeparatedByString:@":"]; 
```

这总是失败的。如果我尝试“sizeof”，我始终会在阵列上得到 4，即使它显然应该是 9....

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:30:57.757

正如我在这里测试过的那样，该方法适用于您的输入。您不能使用 sizeof() 来检查 NSArray 中的元素数量。NSArray 指针的 sizeof 为您提供 4 字节或 8 字节的指针大小，具体取决于您使用的是 32 位还是 64 位机器。它不是 NSArray 中的对象数。如果要检查 NSArray 中的对象数量，请使用 count 方法。

# c - C - 将整个结构写入共享内存的困难

> ID：14494479
> 
> 赞同：1
> 
> 时间：2013-01-24T05:18:22.357
> 
> 标签：c, string, struct, shared-memory, dump

我在将结构写入共享内存时遇到问题，因为当我这样做时，代码只写入结构的第一部分。

这是我的数据结构：

```
struct shmData{
    char number[4];
    char description[1020];
}; 
```

这是我的代码：

```
//Structure Pointer - placed on SHM
struct shmstruct *ptr;
char description_to_write[1024] = {0};
struct shmData *data_ptr;
data_ptr = (struct shmData*) description_to_write;

//Shared Memory init
create_shm(&ptr);
printf("Started\n");

//Define Offsets
//init_shm(ptr);

//#########################

//Check if number exist
    if (!(strcmp("NO SUCH CODE\0", get_description(ptr, 6)))) {
        //-> If not, get next offset (nput) where to write new data
//      sem_wait(&ptr->mutex);
//      long offset = ptr->msgoff[ptr->nput];
//      printf("OFFSET: %li\n", offset);
//      if (++(ptr->nput) > NMESG)
//          ptr->nput = 0; /* circular buffer */
//      sem_post(&ptr->mutex);
//      printf("Buffer: %s", argv[2]);

    snprintf(data_ptr->number, 4, "%s", "6");
    snprintf(data_ptr->description, 1020, "%s\n", argv[2]);

    printf("DATA: %s\n", data_ptr->number);
    printf("DATA: %s\n", data_ptr->description);

    printf("description_to_write: %i\n", description_to_write);

    //strcpy(&ptr->msgdata[offset], );
    //sem_post(&ptr->nstored);
    //printf("Wrote...\n\n");
} else {
    //-> Else get offset of this number and put data to it
} 
```

我该怎么写这个？在上面的代码中，我试图简单地显示描述数组，但我只得到了数字。

我需要将其写入共享内存，如下所示：

```
Number(space)(space)(space)Description 
```

共享内存转储看起来像：

```
00003b0: 3120 2020 496e 7075 7420 4572 726f 720a  1   Input Error.
00003c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
*
00007b0: 3220 2020 4f75 7470 7574 2045 7272 6f72  2   Output Error
00007c0: 0a00 0000 0000 0000 0000 0000 0000 0000  ................
00007d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................ 
```

从调试器：

```
description_to_write[0] char    54 '6'  
description_to_write[1] char    0 '\000'    
description_to_write[2] char    0 '\000'    
description_to_write[3] char    0 '\000'
description_to_write[4] char    83 'S'  
description_to_write[5] char    111 'o' 
description_to_write[6] char    109 'm' 
description_to_write[7] char    101 'e' 
description_to_write[8] char    84 'T'  
description_to_write[9] char    101 'e' 
description_to_write[10]char    120 'x' 
description_to_write[11]char    116 't' 
description_to_write[12]char    10 '\n' 
```

丑陋的解决方案：

```
int i = 0;
        while(i < 4){
            if(data_ptr->number[i] == '\000'){
                data_ptr->number[i] = 32;
            }
            i++;
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T05:53:53.860

传递给 snprintf 的 4 指定要写入的最大字符数。不是写的数量。snprtinf 返回它确实写入的字符数。所以你只打印 1 个字符，在它之后留下 3 个空值。

做就是了：

```
snprintf(data->number,4,"%s    ","6"); 
```

这样，它将尝试打印字符串后跟 4 个空格，并打印最多 4 个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T08:04:59.267

`snprintf()`您使用然后将 '\0' 字符重写为空格的丑陋解决方案有一些缺陷：

*   `snprintf()`永远不会将数字写入`data_ptr->number[3]`. 对于长度超过 3 个字符的字符串，它将截断并写入“\0”，而不是复制源字符串中的第 4 个字符。

*   除非您确定在调用之前将结构初始化为零，否则写入所需`snprintf()`的 '\0' 之后的字符`snprintf()`不会被`snprintf()`. 这在您发布的代码中可能不是问题，但是面对结构`data_ptr`指向的分配和初始化方式的更改，它很脆弱。

由于该领域是如此之小，您可能会考虑这样的事情：

```
memset( data_ptr->number, ' ', sizeof(data_ptr->number));
memcpy( data_ptr->number, "6", strlen("6")); 
```

这仍然有一个缺点，如果源字符串可能比字段大小长，您需要添加更多逻辑。此外，如果您将在不止一个或两个地方做某事，它很容易成为复制/粘贴错误的来源。

这是一个经过轻微测试的函数，您可以使用它来代替（尽管我承认我讨厌这个名字）：

```
size_t str2mem_padded( char* dest, size_t dest_size, char const* src, char fill)
{
    size_t result = 0;

    while (dest_size && *src) {
        *dest++ = *src++;
        ++result;
        --dest_size;
    }
    while (dest_size) {
        *dest++ = fill;
        --dest_size;
    }

    return result; // returns number of chars copied from src so you 
                   //   can determine if there was truncation
} 
```

在您的代码中，您可以使用以下内容而不是调用`snprintf(data_ptr->number, 4, "%s", "6")`：

```
str2mem_padded( data_ptr->number, sizeof(data_ptr->number), "6", ' '); 
```

哇——这比我想象的要努力得多。

# css - css导致页面末尾出现空白

> ID：14494492
> 
> 赞同：0
> 
> 时间：2013-01-24T05:19:18.770
> 
> 标签：css

我有一个如何删除页面底部造成的空白的问题 - 当我删除齿轮图像时它工作正常。

```
html, body{
    height: 100%;
  width: 100%;
  font-size:10pt;
}

.footer_fg{
  float: left;
  position: relative;
  width:455px;
  height:358px;
  background: url('/include/images/Final-Website2_11a.png') no-repeat 0 0;
  top: -150px;
  border:0;
} 
```

这是网站的 CSS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:22:33.267

使用 position: relative 与 margin-top 不同。position:relative 首先将项目放在它的原始位置（并用这个位置确定父元素的大小），然后移动它。所以这个项目之前的位置总会有空白。如果你只是想移动它而不留下这个空白，你应该考虑使用 margin-top: -150px 。由于我们看不到您的其余代码，因此很难判断这是否适用于您的网站。

# c# - 为特定值编写 MVC 自定义验证

> ID：14494495
> 
> 赞同：0
> 
> 时间：2013-01-24T05:19:24.230
> 
> 标签：c#, asp.net, asp.net-mvc

我正在编写 MVC 自定义验证。它将对特定值列表有效。例子：

```
[Values(30, 60, 120)]
public int SelectTop { get; set; } 
```

但它不适用于我的验证。这是代码：

```
public class ValuesAttribute : ValidationAttribute
{
    public object[] Values { get; private set; }

    public Type Type { get; private set; }

    public ValuesAttribute(params int[] values)
        : this(typeof(int), values)
    {
    }

    public ValuesAttribute(params double[] values)
        : this(typeof(double), values)
    {
    }

    public ValuesAttribute(Type type, params object[] values)
    {
        this.Type = type;
        this.Values = values;
    }

    public override bool IsValid(object value)
    {
        foreach (var v in this.Values)
        {
            if (object.Equals(v, value))
            {
                return true;
            }
        }

        return false;
    }
} 
```

请帮我找出问题所在。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:31:51.403

这条线

```
public object[] Values { get; private set; } 
```

将值数组存储在其中，因此 Values[0] = int[3]

将您的代码更改为：

```
 public override bool IsValid(object value) {
            int[] valueSet = this.Values[0] as int[];

            if (valueSet == null) {
                throw new Exception("Values must be provided");
            }

            foreach (var v in valueSet) {
                if (object.Equals(v, value)) {
                    return true;
                }
            }

            return false;
        } 
```

# windows-phone-7 - 如何在 WP 7.8 中处理多个瓷砖尺寸

> ID：14494503
> 
> 赞同：2
> 
> 时间：2013-01-24T05:19:44.370
> 
> 标签：windows-phone-7, windows-phone, tiles, windows-phone-7.8

现在`7.8 update`WP7.x 设备即将推出，我该如何处理`multiple tile sizes`应用程序可以提供的功能？

我需要在 中进行哪些更改`AppManifest`？

SDK 可以从[这里](http://www.microsoft.com/en-us/download/details.aspx?id=36474)下载。请帮忙，因为到目前为止我还没有找到好的资源。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T05:46:12.597

看看[这篇博](http://blogs.windows.com/windows_phone/b/wpdev/archive/2013/01/22/windows-phone-7-8-and-windows-phone-8-live-tile-light-up-for-windows-phone-os-7-1-apps.aspx)文，它描述了这些变化，并参考了一篇关于如何设置的[MSDN 文章。](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj720574%28v=vs.105%29.aspx)

另一种选择是使用名为[MangoPollo](http://mangopollo.codeplex.com/)的 CodePlex 项目。

> 如果您的应用程序从 Windows Phone 7.8 或 8 运行，Mangopollo 将允许您轻松利用新的 Windows Phone 磁贴（循环、翻转、图标），如果您的应用程序从 Windows Phone 8 运行同时保持兼容，则允许您轻松利用新的启动器用windows phone 7。

# macos - 确定安装在 Mac OS X 上的 64 位或 32 位 Haskell？

> ID：14494510
> 
> 赞同：6
> 
> 时间：2013-01-24T05:20:33.610
> 
> 标签：macos, haskell

谁能告诉我如何确定我在 OS X 上使用的是 64 位还是 32 位 Glasgow Haskell 编译器 (GHC)？32位和64位的版本我都安装了，不知道指`current`的是哪个。

```
⚡ pwd
/Library/Haskell   
⚡ ll
bin -> current/bin
current -> ghc-7.4.2
doc -> current/doc
ghc-7.0.3 
ghc-7.4.2 
```

此外...

```
⚡ ghc --version
The Glorious Glasgow Haskell Compilation System, version 7.4.2 
```

...不包含我所追求的信息。

顺便说一句，我在英特尔酷睿 i5 上运行 OS X 版本 10.7.5，所以我可以运行任何一个，[但我正试图让 yesod 运行](http://www.yesodweb.com/page/quickstart)......

> Mac 的 64 位 GHC 7.4 中有一个错误，它会阻止 yesod devel 正常工作。此错误已在 7.6 中得到纠正。但是，由于 7.4 仍然是推荐的开发平台，建议安装 32 位版本的 GHC。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-24T05:29:52.803

Try `ghc --info`，它应该列出目标架构。

更通用的解决方案是将符号链接和脚本追踪到实际的 GHC 二进制文件，然后`file`在其上运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T08:07:23.960

ghci 然后输入 maxBound :: Int

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T05:29:19.187

1）我会认为“编译器--版本”会告诉你。我很惊讶“ghc --version”没有:(

2）另一种选择可能是尝试内置的 Haskell “showVersion” - 这可能会告诉你。

3) “确定”是使用 *nix" "file" 命令：

`file ghc` <= 这肯定会告诉您 ghc 是 32 位还是 64 位可执行文件

# c++ - 如何使用 Xcode 4.6.2 到 7.1.1 恢复对 Mac OS X 10.6 部署的 c++0x/c++11 支持

> ID：14494513
> 
> 赞同：12
> 
> 时间：2013-01-24T05:21:01.160
> 
> 标签：c++, c++11, osx-snow-leopard, xcode4.6, libc++

我在我的项目中大量使用了 c++0x/c++11 特性，尤其是代码块和共享指针。当我将操作系统升级到 10.8 Mountain Lion（编辑：从 10.7 开始）时，我被迫升级 Xcode。在升级 Xcode 时，我无法编译我的 c++ 项目以在 10.6 系统上部署，因为我收到以下错误。

`clang: error: invalid deployment target for -stdlib=libc++ (requires Mac OS X 10.7 or later)`

看来，Apple 试图通过不允许开发人员支持 Snow Leopard 来强迫人们进行升级。这让我很生气。啊啊啊！！！

我能做些什么？

**编辑：**经过多次评论后，应该明确的是 10.6 不附带系统 libc++ 库。因此，仅仅能够为 10.6 部署构建一个 libc++ 项目是不够的。您还需要在 10.6 发行版中包含 libc++ 二进制文件或静态链接到它们。因此，让我们继续假设我已经在这样做。

**更新 1：**此问题最初旨在与 Xcode 4.5.2 （提出问题时的最新版本）一起使用。我已经升级到 Xcode 4.6.3 并更新了问题和答案以反映这一点。

**更新 2：**我已经升级到 Xcode 5.0.2。下面所选答案中列出的技术仍然可以按预期工作。

**更新 3：**我已经升级到 Xcode 5.1。以下答案中列出的技术尚不适用于此版本！

**更新 4：**我已经升级到 Xcode 6.0.1。下面所选答案中列出的技术似乎再次起作用。

**更新 5：**我已经升级到 Xcode 7.1.1。下面所选答案中列出的技术似乎再次起作用，但有一个重要警告。您必须禁用用于[AppThinning](https://developer.apple.com/library/tvos/documentation/IDEs/Conceptual/AppDistributionGuide/AppThinning/AppThinning.html)的 Bitcoding，因为开源 LLVM 版本不支持它（也不应该）。因此，您需要在开源和 Apple LLVM clang 之间切换，以便为 10.6 和 tvOS/watchOS 进行编译（因为这些操作系统需要位编码）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-24T05:21:01.160

Apple 已决定仅在 10.7 或更高版本上正式支持 libc++。因此，Xcode 附带的 clang/llvm 版本会在使用 libc++ 时检查部署目标是否设置为 10.6，并阻止您进行编译。但是，这个标志**不**包含在 clang/llvm 的开源版本中。

看看这个线程： http: [//permalink.gmane.org/gmane.comp.compilers.clang.devel/17557](http://permalink.gmane.org/gmane.comp.compilers.clang.devel/17557)

*因此，要编译使用 c++11 进行 10.6 部署的项目，您需要为 Xcode 提供开源版本。这是一种方法：*

1.  从此处下载 clang 的开源版本（对 Xcode 4.5.x 使用 LLVM 3.1；对 Xcode 4.6.x 使用 LLVM 3.2；对 Xcode 5.0.x 使用 LLVM 3.3；对 XCode 6.0.1 使用 LLVM 3.5.0；使用 LLVM XCode 7.1.1 的 3.7.0）： http: [//llvm.org/releases/download.html](http://llvm.org/releases/download.html)

2.  备份 Xcode 的默认 clang 编译器并将其放在安全的地方（以防万一你搞砸了！）它位于：/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang
3.  将默认的 clang 编译器替换为您从 [1] 下载的编译器
4.  `sudo chown root:wheel clang`从 [2] 中列出的 bin 目录中chown 用于 root:wheel 的 clang 二进制文件。
5.  启动 Xcode 并编译！

**更新 #1**：此技术目前不适用于依赖 LLVM 3.4 的 Xcode 5.1 或更高版本。当我有更多时间时，我会尝试找到一个解决方案来在这里发布。但是，如果有人在我之前提出解决方案，他们应该将其发布为答案。

**更新#2**：不幸的是，我不记得我是否曾经找到过适用于 Xcode 5.1 的解决方案，但是我可以确认该技术仍然适用于 Xcode 6.0.1。我还没有测试过更新的版本，但它仍然可以工作。

**更新#3**：这种技术似乎仍然适用于使用 LLVM 3.7.0 的 XCode 7.1.1。但是，开源 LLVM clang 不支持 Bitcoding。因此，您需要在开源编译器和 Apple 编译器之间切换，以便为 10.6 和 tvOS/watchOS（需要位编码）进行开发。

PS：LLVM 3.4 和 3.5.0 的 Mac OS X 二进制文件在 www.llvm.org/releases/download.html 上列为“Clang for Darwin 10.9”，而不是在以前的版本中列为“Clang Binaries for Mac OS X”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-24T06:10:52.943

虽然 Xcode 4.5.x 是 OS X 10.8 上的当前默认版本，但只要您有权访问其安装程序，您就可以在 10.8上使用其他旧版本的 Xcode，例如[用于 OS X 10.6 的 Xcode 3.2.6 。](https://stackoverflow.com/questions/11778243/xcode-3-2-6-and-mountain-lion/)您需要确保将每个安装到唯一的目录。此外，您不能或不应该做的一件事是将`Command Line Tools`旧 Xcode 的组件或安装程序包安装到您的 10.8 系统上，即不要安装到`/usr`或`/System/Library`. 您可以使用`xcodebuild`、`xcode-select`和`xcrun`命令行 工具来访问非默认 Xcode 组件。有关更多信息，请参阅他们的`man`页面。[developer.apple.com](https://stackoverflow.com/questions/3630342/is-it-possible-to-download-an-older-version-of-xcode)的注册用户可以使用旧版本的 Xcode

更新：根据您随后的评论，我相信我确实错过了问题的重点，并且您已经回答了自己的问题。我认为您所说的是您从 10.7 升级到 10.8，而不是像我假设的那样从 10.6 升级到 10.8。您在最初的问题中也没有明确说明您正在`libc++`使用您自己的应用程序从 10.7 分发您自己的 Apple 和朋友版本。Apple 不会在 Xcode 中轻松地做类似的事情，因为长期以来 Apple 的政策是不鼓励与库的静态链接或分发重复的库（在某些情况下可能违反许可条款）。这项政策有充分的理由。

底线`libc++`是仅随 OS X 10.7 或更高版本的系统一起提供。10.6 中从未有过 Apple 支持`libc++`，因此说它已被删除是一种误导。如果您想提供可部署在 10.6 及更高版本系统上*并*依赖于的应用程序，`libc++`最安全的方法是构建您自己的 clang/llvm 并`libc++`针对 OS X 10.6 并使用它来构建您的项目。有多种方法可以做到这一点，可能最简单的方法是使用 MacPorts 版本并在 MacPorts 中为 10.6 设置部署目标。或者自己从头开始构建。但是在 Xcode 4.5 中修改 clang 编译器是个坏主意。将 Apple 库复制到自己的应用程序通常是个坏主意。

如果您有适合您的解决方案，那就太好了。但我不会向其他人推荐它。

# junit - junit 测试调用 web 服务的方法

> ID：14494523
> 
> 赞同：0
> 
> 时间：2013-01-24T05:22:47.507
> 
> 标签：junit, mockito, webservice-client

我是junit的新手。我需要为以下方法做junit。请指导我

```
 public boolean binlist(params hpproxy, calendarparam cpxproxy)

      {

       Getbinresponse binresponse;
       cpproxy.setid(hpproxy.getId());
       binresponse= cpproxy.getBinlist(); // resturns a list calling webservice
     if (binresponse.size>0)
      {
      result=true;
            }
         else
         {
          result=false;
         }   
      return result;      
         } 
```

我尝试使用模拟对象测试 binlist 方法。

```
 class testbin
     {
    @test
     public void testbinlist()
      {
          Testbin mocktestbin=mock(testbin.class);
      calendarproxy cpproxy=mock(calendarproxy.class);
      params hpproxy= mock(cparams.class);
        hpproxy.setId("123");
         stub(cpproxy.getBinList()).toReturn(gettestbins()) // mocked getbinlist()
        boolen result= mocktestbin.binlist();
          assertTrue(result);

        }

     } 
```

如何在方法中测试 Web 服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:21:06.347

我认为你在测试中非常准确。我认为您不需要模拟 Testbin，因为那是正在测试的类。只需创建一个作为参数传递的日历代理的模拟。

因此，您测试 bin 的测试方法如下所示。

```
class testbin
{
    @test
    public void testbinlist()
    {
        Testbin mocktestbin= new Testbin();
        calendarproxy cpproxy=mock(calendarproxy.class);
        params hpproxy= mock(cparams.class);
        hpproxy.setId("123");
        when(cpproxy.getBinList()).thenReturn(gettestbins()); // mocked getbinlist()
        boolen result= mocktestbin.binlist(hpproxy,cpproxy);
        assertTrue(result);
    }
} 
```

# emacs - 语法读取错误：)

> ID：14494524
> 
> 赞同：0
> 
> 时间：2013-01-24T05:22:48.057
> 
> 标签：emacs, elisp, emacs23

我正在尝试建立一个像[this guy](http://blog.deadpansincerity.com/2011/05/setting-up-emacs-as-a-javascript-editing-environment-for-fun-and-profit/)这样的 emacs 环境，但我不断收到这个该死的错误：

```
Syntax read error: ) 
```

这是我的 init.el 文件的样子，它并不长，但我不知道它是什么意思。我是 lisp 的新手。

```
(add-to-list 'load-path' "~/.emacs.d/auto-complete-1.3.1")
;Load the default configuration
(require 'auto-complete-config')
;Make sure we can find the dictionaries
(add-to-list 'ac-dictionary-directories' "~/.emacs.d/auto-complete-1.3.1/dict")
;Use dictionaries by default
(setq-default ac-sources (add-to-list 'ac-sources' 'ac-source-dictionary'))
(global-auto-complete-mode t)
;Start auto completion after two characters of a word
(setq ac-auto-start 2)
; case sensitivity is important when finding matches
(setq ac-ignore-case nil)

(add-hook 'js-mode-hook'
  (lambda ()
    ;;Scan the file for nested code blocks
    (imenu-add-menubar-index)
    ;;Activate folding mode
    (hs-minor-mode t)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T05:25:45.030

你在最后的调用中有不平衡的括号`add-hook`。

基本上，在最后添加一个额外`)`的两个。

如果您键入`M-x` `show-paren-mode` `RET`然后将光标定位在右括号之后，它将突出显示匹配的左括号（反之亦然，如果您将光标定位在左括号上）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T07:07:48.747

在某些符号的末尾有额外的引号。在 lisp 中，通过在表达式前面加上单引号 (') 来引用表达式，而不是其他任何地方：`'correct`, `'incorrect'`. 字符串文字与许多其他语言一样，前后都有双引号：`"a string literal"`。

此外，正如 phils 所指出的那样，缺少括号。

通常，您可以使用 --debug-init 启动 emacs，以使其对 init 文件中的任何错误进行回溯。在这种情况下，它不是很有用，因为甚至没有评估代码。

# c# - 状态标签未在后台工作人员进度更新时更新

> ID：14494525
> 
> 赞同：0
> 
> 时间：2013-01-24T05:23:06.817
> 
> 标签：c#, winforms, multithreading

我以前见过类似的问题，但似乎没有一个适合我的情况。我有一个windows窗体，窗体有后台worker，worker支持更新。我有一个状态条标签。

后台工作人员通过单击按钮启动，当单击按钮时，后台工作人员启动正常。每次迭代我都会更新进度，发送一个字符串作为用户状态。如果我使用该字符串来更新表单的标题，则标题会随着进程的运行而更改，并按预期工作......但是，如果我尝试使用该字符串来更新状态条标签的值，则标签没有得到更新。

我在一个单独的线程上进行工作，然后是 UI 线程，并且无论如何我都没有阻塞 UI 线程，这通过按预期观看标题更新很明显。但是状态条标签没有更新。

显然，状态条标签不是 System.Windows.Controls 的子类，但是我试图使状态条标签无效，并且我试图使状态条标签所在的状态条无效并刷新，但是我不能在后台工作时获取状态条标签以更改文本。

这是 Progress Changed 事件的代码

```
 void workerThread_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        //_statusCurrentActivityLBL.Text = e.UserState.ToString();
        String s = e.UserState.ToString();
        Text = s;
        _statusCurrentActivityLBL.Text = s;
        _statusCurrentActivityLBL.Invalidate();

        statusStrip1.Invalidate();
        statusStrip1.Refresh();
    } 
```

正如我所说，Windows 窗体文本正确更改，但状态标签没有。

更新@Richard Schneider 标签的类名称是 ToolStripStatusLabel 它似乎没有 Refresh() 成员。

更新 2 @Chibueze Opata 代码运行没有错误。如果我更新简单标签控件上的文本，则标题文本将会更改（这是我目前的工作）。问题是状态条上的 ToolStripStatusLabel 没有得到更新。

# c - 使用 gdb 调试 C 代码

> ID：14494527
> 
> 赞同：2
> 
> 时间：2013-01-24T05:23:10.737
> 
> 标签：c, gcc, terminal, gdb

这是一个家庭作业，我只想要 gdb 的帮助，而不是具体的答案。

我对 gdb 没有任何经验，也没有什么终端经验。我在网上按照一个简单的示例使用 gdb 调试了一些代码，但在示例中 gdb 指出运行代码时发生了问题。当我试图模仿这个分配的过程时，gdb 什么也没说。我对 C 语言还有些陌生，但是当我查看代码时我会发现问题，而 gdb 什么也没说。

假设文件名为 test.c，在终端中我键入 gcc test.c，它给了我一个警告，因为`printf()`存在但`#include <stdio.h>`不存在，这很好，因为这应该是错误的。

它还会产生 a.out ，如果我在终端中使用 ./a.out 运行它，则不会发生任何事情。终端已经为我的下一个输入做好了准备，没有任何消息。如果我输入 gdb ./a.out 然后运行它只会告诉我程序正常退出。

有人可以指出我必须做什么才能使 gdb 指向错误吗？

```
// insertion sort, several errors

int X[10],  // input array
    Y[10],  // workspace array  
    NumInputs,  // length of input array
    NumY = 0;  // current number of 
               // elements in Y

void GetArgs(int AC, char **AV) {
    int I;
    NumInputs = AC - 1;
    for (I = 0; I < NumInputs; I++) X[I] = atoi(AV[I+1]);
}

void ScootOver(int JJ) {
    int K;
    for (K = NumY-1; K > JJ; K++) Y[K] = Y[K-1];
}

void Insert(int NewY) {
    int J;
    if (NumY = 0) { // Y empty so far, 
        // easy case
        Y[0] = NewY;
        return;
    }
    // need to insert just before the first Y
    // element that NewY is less than
    for (J = 0; J < NumY; J++) {
        if (NewY < Y[J]) {
            // shift Y[J], Y[J+1],... rightward 
            // before inserting NewY
            ScootOver(J);
            Y[J] = NewY;
            return;
        }
    }
}

void ProcessData() {
    // insert new Y in the proper place
    // among Y[0],...,Y[NumY-1]
    for (NumY = 0; NumY < NumInputs; NumY++) Insert(X[NumY]);
}

void PrintResults() {
    int I;
    for (I = 0; I < NumInputs; I++) printf("%d\n",Y[I]);
}

int main(int Argc, char ** Argv) {
    GetArgs(Argc,Argv);
    ProcessData();
    PrintResults();
} 
```

**编辑**：代码不是我的，它是作业的一部分

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T05:42:19.183

有不同种类的错误。有些可以被程序（编译器、操作系统、调试器）检测到，有些则不能。

**如果编译器检测到任何约束违规**，编译器必须（根据 C 标准）发出错误。当不在*标准合规模式下*时，它可能会发出其他错误和警告。`-Wall`如果您添加and`-Wextra`选项，编译器将为您提供更多错误诊断。`-O0`如果您启用优化（通过设置不同级别的优化），编译器可能能够检测到更多错误`-O3`，但如果您想在调试器中单步执行，您可能希望跳过优化，因为优化器会使调试器向您显示相关的源代码行（有些可能会重新排序，有些可能会被淘汰）。

操作系统将检测涉及遍历错误指针（通常）或系统调用的错误参数或（通常）浮点除以零的错误。

但是任何不会使程序崩溃的东西都是**语义**错误。而这些需要人脑来寻找它们。

因此，正如 Brian 所说，您需要设置断点并单步执行程序。而且，正如 jweyrich 所说，您需要编译程序`-g`以添加调试符号。

您可以检查变量`print`（例如，`print Argc`将告诉您有多少命令行参数`run`在线）。并将`display`变量添加到每个提示之前显示的列表中。如果我通过 in 中的 for 循环进行调试`Insert`，我可能会做`display J`and `display Y[J]`, `next`，然后按 enter 很多次来观察计算进度。

如果您的断点嵌套很深，您可以使用`backtrace`.

`next`将带您进入下*一条语句*（在分号之后）。`step`将带您进入函数调用和函数的第一条语句。请记住：如果您单步执行一个函数并进入“return”语句，请使用`step`在调用语句中输入下一个函数调用；在 return 处使用`next`来完成调用语句（并且只执行语句中剩余的任何函数调用，而不提示）。*你可能还不需要知道这一点，但如果你知道，那就去吧。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T05:25:34.707

从`gdb`，做`break main`，然后`run`。

从那里开始，`next`或者`step`直到你发现哪里出错了。

# python - 不完全转移到亚马逊 s3

> ID：14494531
> 
> 赞同：1
> 
> 时间：2013-01-24T05:23:16.100
> 
> 标签：python, amazon-s3, boto

上传到 amazon s3 时不完整的传输会发生什么。我正在使用 boto(python) 进行上传。例如，我在 amazon s3 云中有 5 GB 的免费空间，我想上传 3 GB 的数据，但在上传 1 GB 的数据后，我失去了互联网连接。s3会发生什么？. 是否为我的帐户收取 1 GB 的费用，即 1 GB 是否被视为已使用或不完整的转账被丢弃？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T05:50:51.250

传入流量`S3`不收费。如果连接丢失，则文件不会传输，它会丢失。因此，没有存储任何内容`S3`，因此您不会为此付费。参考：[http ://aws.amazon.com/s3/pricing/](http://aws.amazon.com/s3/pricing/)

# c# - 同时在后台显示表单并获取数据

> ID：14494539
> 
> 赞同：0
> 
> 时间：2013-01-24T05:23:59.817
> 
> 标签：c#, winforms, multithreading, forms, backgroundworker

我正在开发一个`winforms`经常使用数据库的应用程序，我 90% 的表单需要从数据库加载一些初始数据`Form_Load`。

我被告知使用线程来显示表单，然后去获取数据并用数据填充表单，否则客户在邮递员去数据库并返回数据之前看不到表单:)

我以前用线程完成了一些简单的任务，但这种情况让我有点困惑。我有一个 mainForm ，`MdiParent`其他形式`MdiChild`如下：

```
ChildForm child = new ChildForm { MdiParent = Program.mainForm }; 
```

和我的 mainForm （`MdiParent`是静态的`Program.cs`）

不知道该不该用`Thread`？`BackgroundWorker`? 其他解决方案？

如果您的友好回复可以帮助我完成此案并增强我不完整的知识，我将非常高兴。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:28:47.290

使用 BackgroundWorker 是最简单的方法。它处理线程问题、捕获异常并在 UI 线程上运行工作完成回调。

如果您使用的是 C# 4.5，那么 await/asych 也是一个不错的方法。

# php - 如果 primary ,auto increment 字段的列名不是 id ，可以使用 $this->db->insert_id() 函数

> ID：14494543
> 
> 赞同：2
> 
> 时间：2013-01-24T05:24:37.080
> 
> 标签：php, mysql, codeigniter, mysql-insert-id

我是 Codeigniter 的新手..

所以这是我的桌子：

request_id | 登录名 | 登录密码 | 注册日期 | 地位

`$this->db->insert_id()`如果主自动增量列名`request_id`不是 ，我可以用来获取最后插入的 id`id`吗？

任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T05:29:38.433

是的，[`insert_id`](http://php.net/manual/en/mysqli.insert-id.php)在 MySQLi 中不关心*列名*，只关心列是 AUTO_INCREMENT。它返回；

> 由上一个查询更新的 AUTO_INCREMENT 字段的值。如果连接上没有先前的查询或查询没有更新 AUTO_INCREMENT 值，则返回零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T05:30:14.430

是的，你可以使用。

`$this->db->insert_id()`为您提供最后插入记录的 id，因此无需更改方法名称。

参考[这里](http://ellislab.com/forums/viewthread/63052/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T05:35:21.917

是的，使用 $this->db->insert_id() 可以获取表中最后插入记录的 id。
像这样 ：

```
 <?php    
    class InsertRecord extends CI_Model {
    var $tablename = "test_table";
    var $primaryID = "request_id";

        function insertRecord(){
             $insertArr['login_name'] = $_POST['login_name'];
             $insertArr['login_password'] = $_POST['login_password'];
             $insertArr['reg_date'] = $_POST['reg_date'];       
             $insertArr['status'] = $_POST['status'];
             if ($this->db->insert($this->tablename, $insertArr)) {
                $lastInsertedID = $this->db->insert_id();
             }
        }
     }
    ?> 
```

在 $lastInsertedID 变量中，您将获得最后插入记录的 id。

希望对你有帮助... ：）

# actionscript-3 - 我们可以使用 AS 3.0 将图像保存到 .doc 文件中吗

> ID：14494547
> 
> 赞同：0
> 
> 时间：2013-01-24T05:25:00.750
> 
> 标签：actionscript-3, actionscript

我正在使用 Loader 类通过 AS3.0 将外部 .jpg 文件加载到 flash 中，稍后我需要使用 FileReference 类将图像文件保存到 .doc 中......这可能吗？

请帮助我...非常感谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:52:06.680

哇……这是个好问题！是的，这是可能的，但并非全部通过 Flash。

要求：Flash / PHP

如何（稍后我将添加完整示例）：

(1) 创建一个接受原始帖子输出的 php 页面

(2) 设置php页面上的headers来匹配一个.doc文件

(3) 将图像数据从 Flash 发送到 PHP，让 php 返回 .doc 文件

这将允许用户在 Flash 中发送/保存图像，并弹出下载上下文框以保存 .doc 文件。

# shell - 在 shell 中使用“列表变量”。如何为列表中的所有元素添加前缀？

> ID：14494548
> 
> 赞同：1
> 
> 时间：2013-01-24T05:25:02.037
> 
> 标签：shell

我有一个（希望如此）简单的问题，我一直在尝试解决但没有取得多大成功。考虑以下简单的 shell 脚本：

列表 = "AB C"

for i in $scripts do //一些逻辑完成

回声$列表

上述示例的所需输出是：

> > 右-A 右-B 右-C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:32:33.140

我想我理解你的问题，但不是 100% 清楚。但我建议使用 BASH 作为外壳。这就是我要创建您要求的输出的方法。

```
#!/bin/bash
LIST=(A B C)
for VALUE in "${LIST[@]}"
do
  echo 'right-'${VALUE}
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T00:10:56.707

[如果给出额外的参数，](http://www.gnu.org/software/bash/manual/bashref.html#index-printf)使用`printf`并利用其重用格式的特性：

```
# specifically, do not quote the variable so that 
# the shell can split it into words
printf "right-%s " $list

# the printf command does not emit a newline, so 
# do it here
echo 
```

假设 bash 将其捕获为新变量：

```
printf -v prefixed_list "right-%s " $list 
```

# curl - 如何使用 curl 从命令行界面 (CLI) 调用 Mule 的文件入站端点？

> ID：14494551
> 
> 赞同：4
> 
> 时间：2013-01-24T05:25:36.793
> 
> 标签：curl, mule, mule-studio

我正在尝试使用以下流程将多个文件从源移动/上传到目标（可以是任何东西，例如 FTP 或文件出站等）

```
<flow name="flow1" doc:name="f1">
            <file:inbound-endpoint path="C:\input" responseTimeout="10000" doc:name="File"/>
    </flow>

<flow name="flow2" doc:name="f2">
  <http:inbound-endpoint address="http://localhost:8080" doc:name="HTTP" exchange-pattern="request-response"/>

  <flow-ref name="flow1" doc:name="Flow Reference"/>
        <file:outbound-endpoint path="C:\outputfile" responseTimeout="10000" doc:name="File"/>

</flow> 
```

这样做的原因是我想使用 CURL 从 CLI（命令行界面）调用作业。

但我收到以下错误

**错误：**

> 线程“主”org.mule.module.launcher.DeploymentInitException 中的异常：SAXParseException：cvc-complex-type.2.4.b：元素“流”的内容不完整。'{"之一[http://www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core) ":abstract-message-processor, " [http://www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core) ":abstract-outbound-端点，“ [http://www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core) ”：abstract-mixed-content-message-processor，“ [http://www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core)流'不完整。'{" 之一[http://www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core) ":abstract-message-processor, " [http://www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core) ":abstract-outbound-endpoint, " [http: //www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core) ":abstract-mixed-content-message-processor, " [http://www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core)列号：8；cvc-complex-type.2.4.b：元素“流”的内容不完整。'{" 之一[http://www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core) ":abstract-message-processor, " [http://www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core) ":abstract-outbound-endpoint, " [http: //www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core) ":abstract-mixed-content-message-processor, " [http://www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core)嵌套异常是 org.xml.sax.SAXParseException；行号：11；列号：8；cvc-complex-type.2.4.b：元素“流”的内容不完整。'{" 之一[http://www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core) ":abstract-message-processor, " [http://www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core) ":abstract-outbound-endpoint, " [http: //www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core) ":abstract-mixed-content-message-processor, " [http://www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core)":response}' 是预期的。在 org.mule.registry.AbstractRegistry.initialise(AbstractRegistry.java:117) 在 org.mule.config.spring.SpringXmlConfigurationBuilder.createSpringRegistry(SpringXmlConfigurationBuilder.java:116) 在 org.mule.config .spring.SpringXmlConfigurationBuilder.doConfigure(SpringXmlConfigurationBuilder.java:73) at org.mule.config.builders.AbstractConfigurationBuilder.configure(AbstractConfigurationBuilder.java:46) ... 11 更多原因：org.springframework.beans.factory.xml。 XmlBeanDefinitionStoreException：来自 URL [file:/D:/MuleStudioExperiment/FileTransferUsingHTTP/.mule/apps/test/test.xml] 的 XML 文档中的第 11 行无效；嵌套异常为 org.xml.sax.SAXParseException；lineNumber：11；columnNumber : 8; cvc-complex-type.2.4.b: 元素'flow'的内容不完整。'{" 之一[http://www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core) ":abstract-message-processor, " [http://www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core) ":abstract-outbound-endpoint, " [http: //www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core) ":abstract-mixed-content-message-processor, " [http://www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core)AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:522) at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:436) at org.mule.config.spring.SpringRegistry.doInitialise(SpringRegistry.java:89) at org .mule.registry.AbstractRegistry.initialise(AbstractRegistry.java:109) ... 14 更多原因：org.xml.sax.SAXParseException; 行号：11；列号：8；cvc-complex-type.2.4.b：元素“流”的内容不完整。'{" 之一 mule.registry.AbstractRegistry.initialise(AbstractRegistry.java:109) ... 14 更多原因：org.xml.sax.SAXParseException; 行号：11；列号：8；cvc-complex-type.2.4.b：元素“流”的内容不完整。'{" 之一 mule.registry.AbstractRegistry.initialise(AbstractRegistry.java:109) ... 14 更多原因：org.xml.sax.SAXParseException; 行号：11；列号：8；cvc-complex-type.2.4.b：元素“流”的内容不完整。'{" 之一[http://www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core) ":abstract-message-processor, " [http://www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core) ":abstract-outbound-endpoint, " [http: //www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core) ":abstract-mixed-content-message-processor, " [http://www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core)":response}' 是预期的。在 org.apache.xerces.util.ErrorHandlerWrapper.error(Unknown Source) at org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source) at org.apache.xerces.impl.XMLErrorReporter .reportError(Unknown Source) at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source) at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source) at org.apache.xerces.impl.xs.XMLSchemaValidator $XSIErrorReporter.reportError(Unknown Source) at org.apache.xerces.impl.xs.XMLSchemaValidator.reportSchemaError(Unknown Source) at org.apache.xerces.impl.xs.XMLSchemaValidator.elementLocallyValidComplexType(Unknown Source) at org.apache.xerces org.apache.xerces.impl.xs 中的 .impl.xs.XMLSchemaValidator.elementLocallyValidType（未知来源）。XMLSchemaValidator.processElementContent(Unknown Source) at org.apache.xerces.impl.xs.XMLSchemaValidator.handleEndElement(Unknown Source) at org.apache.xerces.impl.xs.XMLSchemaValidator.endElement(Unknown Source) at org.apache.xerces。 impl.XMLNSDocumentScannerImpl.scanEndElement(Unknown Source) at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source) at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source) at org.apache.xerces。 org.apache.xerces.parsers.XMLParser.parse(Unknown Source) at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source) at org.apache.xerces.parsers.parsers.XML11Configuration.parse(Unknown Source)。 org.apache.xerces.jaxp.DocumentBuilderImpl 上的 DOMParser.parse（未知来源）。在 org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388) 的 org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75) 解析（未知来源）

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T02:32:24.933

试试这个

```
<flow name="flow1" doc:name="flow1" initialState="stopped">
  <file:inbound-endpoint path="C:\Input" responseTimeout="10000" doc:name="File"/>

  <file:outbound-endpoint path="C:\outputfile" responseTimeout="10000" doc:name="File"/>
</flow>

<flow name="flow2" doc:name="flow2">
  <http:inbound-endpoint address="http://localhost:8080/start" doc:name="HTTP" exchange-pattern="request-response"/>

  <expression-component>
    app.registry.filePickupFlow.start();
  </expression-component>

  <set-payload value="File successfully copied" />

</flow> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:44:17.467

文件端点是基于资源的端点（例如 ftp 和 sftp 端点），而不是基于事件的端点（即 jms 和 vm）或基于 tcp 的端点（即 tcp、http、udp 等）

因此，您正在实施的方法不适合您的用例。如果您需要按需加载文件（即当您点击 http 端点时），您应该重构您的流程并使用[mule-module-file-utils](http://javaduke.github.com/mule-module-file-utils/mule/fileutils.html)。此模块需要作为 maven 依赖项添加或安装在 Studio 中。您可以通过克隆[git repo](https://github.com/javaduke/mule-module-file-utils)来做到这一点，然后您可以按照[这些说明安装生成的更新站点 zip 文件](http://www.mulesoft.org/documentation/display/MULE3STUDIO/Additional+Cloud+Connectors)

完成后，您的流程将如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns:fileutils="http://www.mulesoft.org/schema/mule/fileutils" xmlns:tracking="http://www.mulesoft.org/schema/mule/ee/tracking" xmlns:scripting="http://www.mulesoft.org/schema/mule/scripting" xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns:file="http://www.mulesoft.org/schema/mule/file"
    xmlns:mulexml="http://www.mulesoft.org/schema/mule/xml" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
    xmlns:spring="http://www.springframework.org/schema/beans" version="EE-3.3.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
http://www.mulesoft.org/schema/mule/fileutils http://www.mulesoft.org/schema/mule/fileutils/3.3/mule-fileutils.xsd 
http://www.mulesoft.org/schema/mule/ee/tracking http://www.mulesoft.org/schema/mule/ee/tracking/current/mule-tracking-ee.xsd 
http://www.mulesoft.org/schema/mule/scripting http://www.mulesoft.org/schema/mule/scripting/current/mule-scripting.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd 
http://www.mulesoft.org/schema/mule/file http://www.mulesoft.org/schema/mule/file/current/mule-file.xsd 
http://www.mulesoft.org/schema/mule/xml http://www.mulesoft.org/schema/mule/xml/current/mule-xml.xsd ">
    <fileutils:config name="Fileutils" doc:name="Fileutils"/>
    <flow name="FileCopier" doc:name="FileCopier">
        <http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="8081" path="copy-file" doc:name="HTTP"/>
        <scripting:transformer doc:name="Script">
            <scripting:script engine="Groovy">
                <scripting:text><![CDATA[def dir = new File("/" + message.getInboundProperty('http.relative.path'))
log.info(dir.getPath())
return Arrays.asList(dir.listFiles())]]></scripting:text>
            </scripting:script>
        </scripting:transformer>
        <logger level="INFO" doc:name="Logger"/>
        <set-variable variableName="fileNumber" value="#[payload.size()]" doc:name="Variable"/>
        <foreach doc:name="Foreach">
            <fileutils:copy-file config-ref="Fileutils" destinationName="#[message.payload.getName()]" destinationPath="/tmp/out/" fileName="#[message.payload.getName()]" filePath="#[message.payload.getParentFile().getPath()]" fileAge="0" doc:name="Fileutils"/>
        </foreach>
        <set-payload value="#[flowVars['fileNumber'] + ' file copied']" doc:name="Set Payload"/>
        <http:response-builder status="200" contentType="text/plain" doc:name="HTTP Response Builder"/>
        </flow>
      </mule> 
```

如果您不想使用 fileutils 模块，可以将其替换为实现文件复制逻辑的脚本组件

现在可以使用以下 curl 命令调用此流程

curl http://${hostname}:8081/copy-file/${path_to_directory_to_copy}

有关 curl 的文档可[在此处获得](http://curl.haxx.se/docs/manpage.html)

# c# - windows8图片加水印

> ID：14494552
> 
> 赞同：0
> 
> 时间：2013-01-24T05:25:36.943
> 
> 标签：c#, image, xaml, windows-8, windows-runtime

我可以找到很多与向图像添加水印相关的线程和博客，但它们都是使用 GDI+，在 winrt 中无法正常工作。有人知道如何在 Windows 8 应用程序中为图像添加水印吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:36:40.543

这可以直观地完成工作：

```
<Grid>
    <Image Source="{Binding MyImage}" />
    <Image Source="{Binding MyWatermark}" />
</Grid> 
```

与此处相同的答案：[https ://stackoverflow.com/a/14509282/265706](https://stackoverflow.com/a/14509282/265706)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-17T18:52:35.257

看起来 Lumia Imaging SDK 可以让您执行此操作。我们使用 HTC 设备对其进行了测试，它可以正常工作，因此它似乎确实支持其他制造商的 Windows 手机......

这是我写的一篇关于使用 SDK 裁剪和混合（水印）照片的博客文章，其中包含一个示例项目以查看实际代码。

[http://blog.falafel.com/crop-blend-watermark-photos-on-windows-phone-8-1-with-the-lumia-imaging-sdk/](http://blog.falafel.com/crop-blend-watermark-photos-on-windows-phone-8-1-with-the-lumia-imaging-sdk/)

我希望这是有帮助的！

编辑：我刚刚意识到您的问题是针对 Windows，我们没有在 Windows 上尝试这个，只有手机，但文档说明它适用于 Windows 8.1 设备，我必须对此进行测试，看看会发生什么！

# blackberry - 在黑莓中绘制径向渐变？

> ID：14494556
> 
> 赞同：1
> 
> 时间：2013-01-24T05:25:56.273
> 
> 标签：blackberry, java-me

如何在 BlackBerry 中绘制径向渐变按钮？我在 BlackBerry 支持论坛上找到了“[绘制径向渐变”。](http://supportforums.blackberry.com/t5/BlackBerry-World-Development/Drawing-Radial-Gradients/td-p/594931)我能够自己实现的只是线性渐变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:08:47.997

这有点棘手。在字段背景上绘制线性渐变很容易。在场背景上绘制径向渐变更难。在按钮上执行此操作更加困难。

首先，您链接到的示例确实看起来很糟糕。该代码的最大问题是它使用`Graphics.drawArc()`同心圆（线）构建渐变。这一点都不顺利。

您需要做出的最大改进是`Graphics.fillArc()`改用它，它看起来会更流畅（尽管这可能会对性能产生影响......）。

您的问题没有说明您希望按钮在*聚焦*时的外观，或者是否需要圆角。这就是一些困难所在。

如果您只是扩展 RIM`ButtonField`类，您可能会遇到焦点和边缘效果的默认绘图问题。可能有必要`Field`在一个新的、从头开始编写的按钮字段中直接扩展基类。我不一定建议您自己做所有这些，因为按钮需要焦点处理、单击处理等。您可能应该从 BlackBerry AdvancedUI 开源库中的[BaseButtonField之类的东西开始。](https://github.com/blackberry/Samples-for-Java/blob/master/Advanced%20UI/src/com/samples/toolkit/ui/component/BaseButtonField.java)

我已经为你做了这个原型，使用那个类作为基础。（因此，如果您使用它，您需要下载该源文件并将其包含在您的项目中）。

我创建了一个 GradientButtonField 子类：

```
 private class GradientButtonField extends BaseButtonField {

      private int startR;
      private int startG;
      private int startB;

      private int endR;
      private int endG;
      private int endB;

      /** the maximum distance from the field's center, in pixels */
      private double rMax = -1.0;

      private int width;
      private int height;

      private String label;
      private int fontColor;

      /**
       * Create a gradient button field
       * @param startColor the integer Color code to use at the button center
       * @param endColor the integer Color code to use at the button edges
       * @param label the text to show on the button
       * @param fontColor color for label text
       */
      public GradientButtonField (int startColor, int endColor, String label, int fontColor) {         
         // record start and end color R/G/B components, to 
         //  make intermediate math easier
         startR = (startColor >> 16) & 0xFF;
         startG = (startColor >> 8) & 0xFF;
         startB = startColor & 0xFF;
         endR = (endColor >> 16) & 0xFF;
         endG = (endColor >> 8) & 0xFF;
         endB = endColor & 0xFF;
         this.label = label;
         this.fontColor = fontColor;
      }

      public String getLabel() {
         return label;
      }

      protected void layout(int w, int h) {        
         width = Math.min(Display.getWidth(), w);
         height = Math.min(Display.getHeight(), h);
         if (rMax < 0.0) {
            rMax = Math.sqrt((width * width)/4.0 + (height * height)/4.0);
         }
         setExtent(width, height);  
      }

      private int getColor(double scale, boolean highlighted) {
         int r = (int)(scale * (endR - startR)) + startR;
         int g = (int)(scale * (endG - startG)) + startG;
         int b = (int)(scale * (endB - startB)) + startB;

         if (highlighted) {
            // just brighten the color up a bit
            r = (int)Math.min(255, r * 1.5);
            g = (int)Math.min(255, g * 1.5);
            b = (int)Math.min(255, b * 1.5);
         }
         return (65536 * r + 256 * g + b);         
      }

      protected void paint(Graphics graphics) {
         int oldColor = graphics.getColor();

         // we must loop from the outer edge, in, to draw
         //  concentric circles of decreasing radius, and 
         //  changing color
         for (int radius = (int)rMax; radius >= 0; radius--) {
            double scale = ((double)radius) / rMax;
            boolean focused = (getVisualState() == Field.VISUAL_STATE_FOCUS);
            graphics.setColor(getColor(scale, focused));
            int x = width / 2 - radius;
            int y = height / 2 - radius;
            graphics.fillArc(x, y, 2 * radius, 2 * radius, 0, 360);           
         }

         String text = getLabel();
         graphics.setColor(fontColor);
         graphics.drawText(text, 
               (width - getFont().getAdvance(text)) / 2,
               (height - getFont().getHeight()) / 2);

         // reset graphics object
         graphics.setColor(oldColor);
      }         
   } 
```

要使用它，`Manager`包含按钮的 将需要在其`sublayout()`实现中限制按钮的大小。或者，您可以编辑我的`GradientButtonField`课程以硬编码特定大小（通过`getPreferredWidth()`、`layout()`等）或您想要的任何内容。

```
 final Field button1 = new GradientButtonField(Color.DARKGRAY, Color.BLUE, 
        "Click Me!", Color.WHITE);
  final Field button2 =  new GradientButtonField(Color.DARKGRAY, Color.BLUE, 
        "Click Me, Too!", Color.WHITE);

  Manager mgr = new Manager(Manager.NO_VERTICAL_SCROLL) {

     public int getPreferredHeight() {
        return Display.getHeight();
     }
     public int getPreferredWidth() {
        return Display.getWidth();
     }

     protected void sublayout(int maxWidth, int maxHeight) {
        setExtent(getPreferredWidth(), getPreferredHeight());

        layoutChild(button1, 160, 80);
        setPositionChild(button1, 20, 50);

        layoutChild(button2, 120, 60);
        setPositionChild(button2, 20, 150);
     }
  };

  button1.setChangeListener(new FieldChangeListener() {
     public void fieldChanged(Field field, int context) {
        Dialog.alert("clicked!");               
     }
  });

  mgr.add(button1);
  mgr.add(button2);
  add(mgr); 
```

我没有拐弯抹角，因为这有点工作。根据您将这些按钮放在什么样的背景上，创建一个 PNG*蒙版*图像（在您最喜欢的绘图程序中）可能是最简单的，它大部分是透明的，然后只是填充了遮盖角落的角落它下面的渐变。然后，在绘制径向渐变**之后**，使用`Graphics.drawBitmap()`上述`paint()`方法。

 **对于焦点突出显示，我只是输入了一些简单的代码来在按钮获得焦点时使颜色变亮。再说一次，你没有说你想要什么，所以我只是做了一些简单的事情。

这是上面代码的结果。底部按钮被聚焦：

![在此处输入图像描述](../Images/2453f0193afa7e84a8e001199d534f3a.png)**

# r - 使用 XMPP 协议通过 R 发送 Google Talk 和 Facebook 消息

> ID：14494562
> 
> 赞同：3
> 
> 时间：2013-01-24T05:26:31.773
> 
> 标签：r, xmpp, rcpp

我个人希望有一个用于 R 的 XMPP API，这样在经过耗时的模拟后，我的 R 进程可能会在 Facebook 或 Google Talk 上通知我。

电子邮件可能是一种选择，但我认为将来通过 XMPP 消息通知用户会更方便。

是否有任何众所周知的用于 R 的 XMPP API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:26:31.773

我自己为 R 编写了一个名为 RMessenger 的玩具 XMPP 客户端（项目：[https](https://github.com/wush978/RMessenger) ://github.com/wush978/RMessenger ，包：[https ://dl.dropbox.com/u/11900271/Wush-R-pkg-src/ RMessenger_0.1.tar.gz](https://dl.dropbox.com/u/11900271/Wush-R-pkg-src/RMessenger_0.1.tar.gz)）。该引擎是一个 C 库 libstrophe ( [http://strophe.im/libstrophe/](http://strophe.im/libstrophe/) )，我用 Rcpp 包装它。到目前为止，它适用于我的机器和服务器（都是 Ubuntu）。我试图将它移植到 Windows，但失败了。我没有在 Windows 上构建 Rcpp 包的经验。

这个包只向一些 XMPP 服务发送消息，包括 facebook 和 google talk。也许我会扩展它的功能，例如发送附件，或者将引擎更改为 google 的 Jingle++（在了解许可证问题后）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:32:23.557

我`RMessenger`在 CRAN 上发布了一个 R 包，用于通过 R 使用 XMPP 协议发送 Google Talk 和 Facebook 消息。

如果您发现错误或想要一些新功能，请在[https://github.com/wush978/RMessenger/issues](https://github.com/wush978/RMessenger/issues)与我讨论。

谢谢

# iphone - 动画 UILabel 字体大小更改

> ID：14494566
> 
> 赞同：73
> 
> 时间：2013-01-24T05:26:52.173
> 
> 标签：iphone, ios, animation, uilabel

我目前正在制作一个使用自定义 View Controller 容器的应用程序。一次在屏幕上显示多个视图，当点击一个时，选定的视图控制器将动画到全屏。这样做时，选定的视图控制器子视图也会缩放（框架、字体大小等）。虽然，UILabel 的字体属性不可动画化，从而导致问题。我尝试了多种解决方案，但都非常糟糕。

我尝试过的解决方案是：

1.  截取大视图并为更改设置动画（类似于 Flipboard 的做法）
2.  使用 transform 属性制作动画
3.  缩小 UIScrollView 并在全屏时将其放大。
4.  将 adjustsFontSizeToFitWidth 设置为 YES 并在动画之前设置 fontSize

到目前为止，一个是最好的解决方案，但我对此并不满意。

如果有人有任何使用 [UIView animate..] 平滑动画的 UILabel 替代品，我正在寻找其他建议。

这是一个很好的例子，类似于我希望我的 UILabel 做的事情：http: [//www.cocoawithlove.com/2010/09/zoomingviewcontroller-to-animate-uiview.html](http://www.cocoawithlove.com/2010/09/zoomingviewcontroller-to-animate-uiview.html)

**编辑：此代码有效**

```
// Load View

self.label = [[UILabel alloc] init];
self.label.text = @"TEXT";
self.label.font = [UIFont boldSystemFontOfSize:20.0];
self.label.backgroundColor = [UIColor clearColor];

[self.label sizeToFit];

[self.view addSubview:self.label];

// Animation

self.label.font = [UIFont boldSystemFontOfSize:80.0];
self.label.transform = CGAffineTransformScale(self.label.transform, .25, .25);
[self.label sizeToFit];

[UIView animateWithDuration:1.0 animations:^{
    self.label.transform = CGAffineTransformScale(self.label.transform, 4.0, 4.0);
    self.label.center = self.view.center;
} completion:^(BOOL finished) {

    self.label.font = [UIFont boldSystemFontOfSize:80.0]; 
    self.label.transform = CGAffineTransformScale(self.label.transform, 1.0, 1.0);

    [self.label sizeToFit];

}]; 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-01-24T05:32:28.860

你可以改变你`UILabel`的动画的大小和字体，如下所示..这里我只是举了一个例子，说明如何`UILabel`用变换动画改变字体..

```
 yourLabel.font = [UIFont boldSystemFontOfSize:35]; // set font size which you want instead of 35
    yourLabel.transform = CGAffineTransformScale(yourLabel.transform, 0.35, 0.35); 
    [UIView animateWithDuration:1.0 animations:^{
        yourLabel.transform = CGAffineTransformScale(yourLabel.transform, 5, 5);
    }]; 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2017-05-30T10:04:26.353

# 从 2017 年开始......

**斯威夫特 3.0、4.0**

```
UIView.animate(withDuration: 0.5) {
     label.transform = CGAffineTransform(scaleX: 1.1, y: 1.1) //Scale label area
 } 
```

危急：

# 避免模​​糊的关键点是你必须从最大的尺寸开始，然后缩小它。然后在需要时扩展为“1”。

对于快速“弹出”（如高亮动画），可以扩展到 1 以上，但如果您在两种尺寸之间转换，*请将较大的尺寸设为“正确”的正常尺寸*。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2016-09-09T15:35:07.897

我`UILabel`在 Swift 中创建了扩展。

```
import UIKit

extension UILabel {
    func animate(font: UIFont, duration: TimeInterval) {
        // let oldFrame = frame
        let labelScale = self.font.pointSize / font.pointSize
        self.font = font
        let oldTransform = transform
        transform = transform.scaledBy(x: labelScale, y: labelScale)
        // let newOrigin = frame.origin
        // frame.origin = oldFrame.origin // only for left aligned text
        // frame.origin = CGPoint(x: oldFrame.origin.x + oldFrame.width - frame.width, y: oldFrame.origin.y) // only for right aligned text
        setNeedsUpdateConstraints()
        UIView.animate(withDuration: duration) {
            //L self.frame.origin = newOrigin
            self.transform = oldTransform
            self.layoutIfNeeded()
        }
    }
} 
```

如果标签文本左对齐或右对齐，请取消注释行。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2017-02-05T01:53:52.933

您还可以使用具有 fontSize 作为动画属性的 CATextLayer。

```
let startFontSize: CGFloat = 20
let endFontSize: CGFloat = 80

let textLayer = CATextLayer()
textLayer.string = "yourText"
textLayer.font = yourLabel.font.fontName as CFTypeRef?
textLayer.fontSize = startFontSize
textLayer.foregroundColor = UIColor.black.cgColor
textLayer.contentsScale = UIScreen.main.scale //for some reason CATextLayer by default only works for 1x screen resolution and needs this line to work properly on 2x, 3x, etc. ...
textLayer.frame = parentView.bounds
parentView.layer.addSublayer(textLayer)

//animation:
let duration: TimeInterval = 1
textLayer.fontSize = endFontSize //because upon completion of the animation CABasicAnimation resets the animated CALayer to its original state (as opposed to changing its properties to the end state of the animation), setting fontSize to endFontSize right BEFORE the animation starts ensures the fontSize doesn't jump back right after the animation.
let fontSizeAnimation = CABasicAnimation(keyPath: "fontSize")
fontSizeAnimation.fromValue = startFontSize
fontSizeAnimation.toValue = endFontSize
fontSizeAnimation.duration = duration
fontSizeAnimation.timingFunction = CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseInEaseOut)
textLayer.add(fontSizeAnimation, forKey: nil) 
```

我在我的项目中使用它：[https ://github.com/yinanq/AngelListJobs](https://github.com/yinanq/AngelListJobs)

此动画保持字体左上对齐（与 CGAffineTransformScale 从中心缩放标签不同），赞成或反对取决于您的需要。CATextLayer 的一个缺点是 CALayers 不适用于自动布局约束动画（我碰巧需要并通过制作一个仅包含 CATextLayer 并为其约束设置动画的 UIView 来解决它）。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2019-03-09T10:17:25.250

对于那些不寻找转换但实际值变化的人：

```
UIView.transition(with: label, duration: 0.25, options: .transitionCrossDissolve, animations: {
    self.label.font = UIFont.systemFont(ofSize: 15)
}) { isFinished in } 
```

[![在此处输入图像描述](../Images/6093c64cbedb0fafd73ae949d814bf08.png)](https://i.stack.imgur.com/UDLhF.gif)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-11-22T14:07:34.897

# 对于想要调整动画方向的人

我创建了一个扩展`UILabel`来动画字体大小变化

```
extension UILabel {
  func animate(fontSize: CGFloat, duration: TimeInterval) {
    let startTransform = transform
    let oldFrame = frame
    var newFrame = oldFrame
    let scaleRatio = fontSize / font.pointSize

    newFrame.size.width *= scaleRatio
    newFrame.size.height *= scaleRatio
    newFrame.origin.x = oldFrame.origin.x - (newFrame.size.width - oldFrame.size.width) * 0.5
    newFrame.origin.y = oldFrame.origin.y - (newFrame.size.height - oldFrame.size.height) * 0.5
    frame = newFrame

    font = font.withSize(fontSize)

    transform = CGAffineTransform.init(scaleX: 1 / scaleRatio, y: 1 / scaleRatio);
    layoutIfNeeded()

    UIView.animate(withDuration: duration, animations: {
      self.transform = startTransform
      newFrame = self.frame
    }) { (Bool) in
      self.frame = newFrame
    }
  } 
```

* * *

如果要调整动画的方向，请使用以下方法并放置合适的锚点。

**迅速**

```
struct LabelAnimateAnchorPoint {
  // You can add more suitable archon point for your needs
  static let leadingCenterY         = CGPoint.init(x: 0, y: 0.5)
  static let trailingCenterY        = CGPoint.init(x: 1, y: 0.5)
  static let centerXCenterY         = CGPoint.init(x: 0.5, y: 0.5)
  static let leadingTop             = CGPoint.init(x: 0, y: 0)
}

extension UILabel {
  func animate(fontSize: CGFloat, duration: TimeInterval, animateAnchorPoint: CGPoint) {
    let startTransform = transform
    let oldFrame = frame
    var newFrame = oldFrame
    let archorPoint = layer.anchorPoint
    let scaleRatio = fontSize / font.pointSize

    layer.anchorPoint = animateAnchorPoint

    newFrame.size.width *= scaleRatio
    newFrame.size.height *= scaleRatio
    newFrame.origin.x = oldFrame.origin.x - (newFrame.size.width - oldFrame.size.width) * animateAnchorPoint.x
    newFrame.origin.y = oldFrame.origin.y - (newFrame.size.height - oldFrame.size.height) * animateAnchorPoint.y
    frame = newFrame

    font = font.withSize(fontSize)

    transform = CGAffineTransform.init(scaleX: 1 / scaleRatio, y: 1 / scaleRatio);
    layoutIfNeeded()

    UIView.animate(withDuration: duration, animations: {
      self.transform = startTransform
      newFrame = self.frame
    }) { (Bool) in
      self.layer.anchorPoint = archorPoint
      self.frame = newFrame
    }
  }
} 
```

**目标-C**

```
// You can add more suitable archon point for your needs
#define kLeadingCenterYAnchorPoint         CGPointMake(0.f, .5f)
#define kTrailingCenterYAnchorPoint        CGPointMake(1.f, .5f)
#define kCenterXCenterYAnchorPoint         CGPointMake(.5f, .5f)
#define kLeadingTopAnchorPoint             CGPointMake(0.f, 0.f)

@implementation UILabel (FontSizeAnimating)

- (void)animateWithFontSize:(CGFloat)fontSize duration:(NSTimeInterval)duration animateAnchorPoint:(CGPoint)animateAnchorPoint {
  CGAffineTransform startTransform = self.transform;
  CGRect oldFrame = self.frame;
  __block CGRect newFrame = oldFrame;
  CGPoint archorPoint = self.layer.anchorPoint;
  CGFloat scaleRatio = fontSize / self.font.pointSize;

  self.layer.anchorPoint = animateAnchorPoint;

  newFrame.size.width *= scaleRatio;
  newFrame.size.height *= scaleRatio;
  newFrame.origin.x = oldFrame.origin.x - (newFrame.size.width - oldFrame.size.width) * animateAnchorPoint.x;
  newFrame.origin.y = oldFrame.origin.y - (newFrame.size.height - oldFrame.size.height) * animateAnchorPoint.y;
  self.frame = newFrame;

  self.font = [self.font fontWithSize:fontSize];
  self.transform = CGAffineTransformScale(self.transform, 1.f / scaleRatio, 1.f / scaleRatio);
  [self layoutIfNeeded];

  [UIView animateWithDuration:duration animations:^{
    self.transform = startTransform;
    newFrame = self.frame;
  } completion:^(BOOL finished) {
    self.layer.anchorPoint = archorPoint;
    self.frame = newFrame;
  }];
}

@end 
```

* * *

例如，要将标签字体大小更改为 30 的动画，从中心持续 1 秒并缩放更大。只需调用

**迅速**

```
YOUR_LABEL.animate(fontSize: 30, duration: 1, animateAnchorPoint: LabelAnimateAnchorPoint.centerXCenterY) 
```

**目标-C**

```
[YOUR_LABEL animateWithFontSize:30 
                       duration:1 
             animateAnchorPoint:kCenterXCenterYAnchorPoint]; 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-05-26T07:06:02.290

**斯威夫特 3.0 和斯威夫特 4.0**

```
 UIView.animate(withDuration: 0.5, delay: 0.1, options: .curveLinear, animations: { 

    label.transform = label.transform.scaledBy(x:4,y:4) //Change x,y to get your desired effect. 

    } ) { (completed) in

         //Animation Completed      

    } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-05-18T16:08:14.833

由于以下原因，我发现这里的每个建议都不合适：

1.  他们实际上并没有改变字体大小。
2.  他们不能很好地调整框架大小和自动布局。
3.  他们的界面很重要和/或在动画块中播放效果不佳。

为了保留所有这些功能并仍然获得平滑的动画过渡，我结合了变换方法和字体方法。

界面很简单。只需更新`fontSize`属性，您就会更新字体的大小。在动画块内执行此操作，它会动画。

```
@interface UILabel(MPFontSize)

@property(nonatomic) CGFloat fontSize;

@end 
```

至于实现，有简单的方法，也有更好的方法。

简单的：

```
@implementation UILabel(MPFontSize)

- (void)setFontSize:(CGFloat)fontSize {

    CGAffineTransform originalTransform = self.transform;
    UIFont *targetFont = [self.font fontWithSize:fontSize];

    [UIView animateWithDuration:0 delay:0 options:0 animations:^{
        self.transform = CGAffineTransformScale( originalTransform,
                fontSize / self.fontSize, fontSize / self.fontSize );
    }                completion:^(BOOL finished) {
        self.transform = originalTransform;
        if (finished)
            self.font = targetFont;
    }];
}

- (CGFloat)fontSize {

    return self.font.pointSize;
};

@end 
```

现在，这样做的问题是布局在完成时可能会卡顿，因为视图的框架一直根据原始字体调整大小，直到动画完成，此时框架会更新以适应没有动画的目标字体。

解决这个问题有点困难，因为我们需要覆盖`intrinsicContentSize`. 您可以通过子类`UILabel`化或调配方法来做到这一点。我个人 swizzle 这个方法，因为它让我`fontSize`可以为所有`UILabel`s 保留一个通用属性，但这取决于我不能在这里分享的一些库代码。以下是使用子类化的方法。

界面：

```
@interface AnimatableLabel : UILabel

@property(nonatomic) CGFloat fontSize;

@end 
```

执行：

```
@interface AnimatableLabel()

@property(nonatomic) UIFont *targetFont;
@property(nonatomic) UIFont *originalFont;

@end

@implementation AnimatableLabel

- (void)setFontSize:(CGFloat)fontSize {

    CGAffineTransform originalTransform = self.transform;
    self.originalFont = self.font;
    self.targetFont = [self.font fontWithSize:fontSize];
    [self invalidateIntrinsicContentSize];

    [UIView animateWithDuration:0 delay:0 options:0 animations:^{
        self.transform = CGAffineTransformScale( originalTransform,
                fontSize / self.fontSize, fontSize / self.fontSize );
    }                completion:^(BOOL finished) {
        self.transform = originalTransform;

        if (self.targetFont) {
            if (finished)
                self.font = self.targetFont;
            self.targetFont = self.originalFont = nil;
            [self invalidateIntrinsicContentSize];
        }
    }];
}

- (CGFloat)fontSize {

    return self.font.pointSize;
};

- (CGSize)intrinsicContentSize {

    @try {
        if (self.targetFont)
            self.font = self.targetFont;
        return self.intrinsicContentSize;
    }
    @finally {
        if (self.originalFont)
            self.font = self.originalFont;
    }
}

@end 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-22T18:35:44.267

如果你想从另一个锚点动画文本大小，这里是**Swift 5**解决方案：

**如何申请：**

```
yourLabel.setAnimatedFont(.systemFont(ofSize: 48), duration: 0.2, anchorPointX: 0, anchorPointY: 1) 
```

**扩展：**

```
extension UILabel {
  /// Animate font size from a given anchor point of the label.
  /// - Parameters:
  ///   - duration: Animation measured in seconds
  ///   - anchorPointX: 0 = left, 0.5 = center, 1 = right
  ///   - anchorPointY: 0 = top, 0.5 = center, 1 = bottom
  func setAnimatedFont(_ font: UIFont, duration: TimeInterval, anchorPointX: CGFloat, anchorPointY: CGFloat) {
    guard let oldFont = self.font else { return }

    setAnchorPoint(CGPoint(x: anchorPointX, y: anchorPointY))
    self.font = font

    let scaleFactor = oldFont.pointSize / font.pointSize
    let oldTransform = transform
    transform = transform.scaledBy(x: scaleFactor, y: scaleFactor)
    setNeedsUpdateConstraints()

    UIView.animate(withDuration: duration) {
      self.transform = oldTransform
      self.layoutIfNeeded()
    }
  }
}

extension UIView {
  /// Change the anchor point without moving the view's position.
  /// - Parameters:
  ///   - point: The layer's bounds rectangle.
  func setAnchorPoint(_ point: CGPoint) {
    let oldOrigin = frame.origin
    layer.anchorPoint = point
    let newOrigin = frame.origin

    let translation = CGPoint(x: newOrigin.x - oldOrigin.x, y: newOrigin.y - oldOrigin.y)
    translatesAutoresizingMaskIntoConstraints = true
    center = CGPoint(x: center.x - translation.x, y: center.y - translation.y)
  }
} 
```

# java - 在java中找到两次之间的差异

> ID：14494569
> 
> 赞同：2
> 
> 时间：2013-01-24T05:27:10.583
> 
> 标签：java, date, grails, time, date-arithmetic

我有一个搜索按钮，当用户单击搜索按钮时，会调用 search() 方法。正如我们在谷歌搜索中看到的那样，我需要计算向用户显示结果所花费的时间。

这是我的代码。

```
 SimpleDateFormat sdfDate = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
String strDate;
def startTime() { 
    Calendar cal = Calendar.getInstance();
    System.out.println("Current milliseconds since 13 Oct, 2008 are :"
    + cal.getTimeInMillis());
    long startTime=cal.getTimeInMillis();
    /*Date startNow = new Date();
    strDate = sdfDate.format(startNow);
    Date startTime=sdfDate.parse(strDate);
    print "startTime"+startTime*/
    return  startTime;

}
def endTime(){
    Calendar cal = Calendar.getInstance();
    System.out.println("Current milliseconds  :"
    + cal.getTimeInMillis());
    long endTime=cal.getTimeInMillis();
    /*Date endNow = new Date();
    print "endNow"+endNow
    strDate = sdfDate.format(endNow);
    Date endTime=sdfDate.parse(strDate);
    print "endTime"+endTime*/
    return endTime;
}

def differenceTime(long startTime,long endTime){
    print "requestEndTime"+endTime
    print "requestStartTime"+startTime
    long timeDifference = endTime - startTime;
    return timeDifference;
} 
```

在这里，我试图获取开始时间和结束时间并尝试计算差异。我知道我实施的方式是否正确？请告诉我通常如何计算时差。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T05:32:12.700

而不是使用`Calendar`它更容易使用`System.currentTimeMillis()`：

```
def startTime() { 
    long startTime=System.currentTimeMillis();
    return  startTime;
} 
```

基于 System.currentTimeMillis() 计算时差在 Java 中很常见，你会做对的（我的意思是`endTime - startTime`）

因此，您的代码可能如下所示：

```
long startTime = System.currentTimeMillis();
// .....
// processing request
// .....
long endTime = System.currentTimeMillis();
long differenceTime = endTime - startTime;
log.debug("Request time: " + differenceTime);
//or
log.debug("Request time: " + TimeUnit.MILLISECONDS.toSeconds(differenceTime) + " sec"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:52:13.153

您可以改用此类。我在学习 Coursera 的算法，第一部分课程时学到了它。

```
public class StopWatch {

    /* Private Instance Variables */
    /** Stores the start time when an object of the StopWatch class is initialized. */
    private long startTime;

    /**
     * Custom constructor which initializes the {@link #startTime} parameter.
     */
    public StopWatch() {
        startTime = System.currentTimeMillis();
    }

    /**
     * Gets the elapsed time (in seconds) since the time the object of StopWatch was initialized.
     * 
     * @return Elapsed time in seconds.
     */
    public double getElapsedTime() {
        long endTime = System.currentTimeMillis();
        return (double) (endTime - startTime) / (1000);
    }
} 
```

测试可以如下进行：

```
public class SWTest {

    public static void main(String[] args) throws InterruptedException {
        StopWatch stopWatch = new StopWatch();

        Thread.sleep(10000);
        System.out.println(stopWatch.getElapsedTime());
        Thread.sleep(60000);
        System.out.println(stopWatch.getElapsedTime());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-04T06:58:14.157

你可以这样编码：

```
LocalDateTime startTIme = LocalDateTime.now();
//Code Here
LocalDateTime endTime = LocalDateTime.now();
System.out.println(Duration.between(startTIme,endTime)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-06T19:31:10.707

# java.time

避免使用旧的 java.util.Date/.Calendar 类。在证明设计不佳和麻烦之后，旧的日期时间类已被[java.time](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)框架取代。请参阅[教程](http://docs.oracle.com/javase/tutorial/datetime/TOC.html)。查看添加到旧类的新方法以进行转换。

由[JSR 310](http://jcp.org/en/jsr/detail?id=310)定义。大部分 java.time 功能已向[后移植到 Java 6 和 7](http://www.threeten.org/threetenbp/)，并[进一步适应 Android](https://github.com/JakeWharton/ThreeTenABP)。

## `Instant`

An[`Instant`](http://docs.oracle.com/javase/8/docs/api/java/time/Instant.html)代表[UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time)时间轴上的一个时刻，分辨率高达[纳秒](https://en.wikipedia.org/wiki/Nanosecond)。

由于依赖于旧的预先存在的实现，因此捕获当前时刻仅限于[毫秒级](https://en.wikipedia.org/wiki/Millisecond)[`Clock`](http://docs.oracle.com/javase/8/docs/api/java/time/Clock.html)分辨率；在 Java 9 中替换为以纳秒为单位捕获当前时刻（取决于您计算机的硬件时钟能力）。

```
Instant start = Instant.now();
…
Instant stop = Instant.now(); 
```

## `Duration`

该类[`Duration`](http://docs.oracle.com/javase/8/docs/api/java/time/Duration.html)将时间跨度表示为总秒数加上以纳秒为单位的几分之一秒。

```
Duration duration = Duration.between( start , stop ); 
```

## 输出

该`Duration::toString`方法使用标准 ISO 8601 格式生成文本表示。以 a 开头`P`（用于句点），a`T`将年-月-日与小时-分钟-秒分开。所以一个半小时就可以了`PT1H30M`。这种格式避免了`01:30`含义经过时间与一天中的时间的歧义。

```
String output = duration.toString(); 
```

或者，您可以询问总秒数和总纳秒数。

```
long seconds = duration.getSeconds();  // Whole seconds.
int nanoseconds = duration.getNano();  // Fraction of a second, maximum of 999,999,999\. 
```

# php - 在 phpfox 的注册页面上将美国放在国家/地区列表的顶部

> ID：14494571
> 
> 赞同：0
> 
> 时间：2013-01-24T05:27:27.000
> 
> 标签：php, mysql, xml, phpfox

我很难将美国放在首位。我在 countries.xml.php 中更改了它：

```
 <countries>
<country iso="US" name="United States" />
    <country iso="AF" name="Afghanistan" />
    <country iso="AL" name="Albania" />
    <country iso="DZ" name="Algeria" />
</countries> 
```

在 module/core/include/service/country/country.class.php 我删除了所有的 sql 排序，如下所示：

```
 ->group('c.country_iso')
            ->order('')
            ->execute(($sIso == null ? 'getRows' : 'getRow')); 
```

我清除了我的缓存并刷新了 ctrl+f5 并且阿富汗仍然在顶部。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:36:54.357

如果您通过代码文件执行此操作，您可以将国家/地区的值设置为美国。但在 phpfox 中，您可以通过 country 表所在的数据库对其进行更改。我过去使用过 phpfox，这花了很多时间，但无论如何你的解决方案都在这里。

# c# - 取消除最后一个任务之外的所有任务

> ID：14494572
> 
> 赞同：-1
> 
> 时间：2013-01-24T05:27:29.390
> 
> 标签：c#

如何取消除最后/最新任务之外的所有任务？例如，假设我有一个在单击按钮时触发的耗时任务。我只希望最后一个按钮单击的任务运行并取消以前的任务。你能告诉我这通常是怎么做的吗？

我的尝试涉及将所有任务及其取消令牌存储在列表中，并在任务完成或取消时将其删除。创建一个列表来存储 Task 和 CancellationToken 似乎我做的太多了，因为我认为这是一个常见的要求（例如，用户搜索某事并多次单击搜索按钮。不应该只进行最后一次搜索并取消所有其他搜索？）。这是一个常见的情况，所以我想知道这通常是如何完成的。这里的最佳做法是什么？

```
async void DoStuffAsync()
{
    // Store tasks in a list
    if (tasksAndCancelTokens == null)
        tasksAndCancelTokens = new List<Tuple<Task, CancellationTokenSource>>();
    else // we have a new Get request so cancel any previous
        tasksAndCancelTokens.ForEach(t => t.Item2.Cancel());

    // Create Cancellation Token
    var cts = new CancellationTokenSource();

    // Method to run asynchonously
    Func<int> taskAction = () =>
    {
        // Something time consuming
        Thread.Sleep(5000);
        if (cts.Token.IsCancellationRequested)
           cts.Token.ThrowIfCancellationRequested();
        return 100;
    };

    // Create Task
    Task<int> task = Task<int>.Factory.StartNew(taskAction, cts.Token);
    // Create Tuple to store task in list
    var tup = new Tuple<Task, CancellationTokenSource>(task, cts);
    tasksAndCancelTokens.Add(tup);

    try
    {
        int i = await task;
    }
    catch (OperationCanceledException)
    {
        // Don't need to do anything
    }
    finally
    {
        tasksAndCancelTokens.Remove(tup);
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:06:06.557

如果您只想取消最后一个任务，那么您只需执行以下操作：

```
CancellationTokenSource cts = null;
async void Button1_Click(...)
{
  // Cancel the last task, if any.
  if (cts != null)
    cts.Cancel();

  // Create Cancellation Token for this task.
  cts = new CancellationTokenSource();
  var token = cts.Token;

  // Method to run asynchonously
  Func<int> taskAction = () =>
  {
    // Something time consuming
    Thread.Sleep(5000);
    token.ThrowIfCancellationRequested();
    return 100;
  };

  try
  {
    int i = await Task.Run(taskAction);
  }
  catch (OperationCanceledException)
  {
    // Don't need to do anything
    return;
  }
} 
```

# android - 按钮下一个和上一个不起作用

> ID：14494574
> 
> 赞同：0
> 
> 时间：2013-01-24T05:27:40.630
> 
> 标签：android, android-layout, android-intent, android-widget, android-button

这是我的线性布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@android:color/white"
android:gravity="center_horizontal"
android:orientation="vertical" >

<AutoCompleteTextView
    android:id="@+id/autoCompleteTextView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight=".16"
    android:ems="10"
    android:text="Rule" >

    <requestFocus />
</AutoCompleteTextView>

<LinearLayout style="@style/verticallayout" >

    <LinearLayout style="@style/verticallayout" >

        <Button
            android:id="@+id/b1"
            style="@style/buttons"
            android:layout_weight=".16"
            android:text="Button 1" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/ll41"
        style="@style/horizontallayouthidden" >

        <TextView
            android:id="@+id/t1"
            style="@style/textview"
            android:layout_weight="0.5" />

        <TextView
            android:id="@+id/tt1"
            style="@style/textview"
            android:layout_weight="0.5" />
    </LinearLayout>
</LinearLayout>

<LinearLayout style="@style/verticallayout" >

    <LinearLayout style="@style/verticallayout" >

        <Button
            android:id="@+id/b2"
            style="@style/buttons"
            android:layout_weight=".16"
            android:text="Button 2" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/ll42"
        style="@style/horizontallayouthidden" >

        <TextView
            android:id="@+id/t2"
            style="@style/textview"
            android:layout_weight="0.5" />

        <TextView
            android:id="@+id/tt2"
            style="@style/textview"
            android:layout_weight="0.5" />
    </LinearLayout>
</LinearLayout>

<LinearLayout style="@style/verticallayout" >

    <LinearLayout style="@style/verticallayout" >

        <Button
            android:id="@+id/b3"
            style="@style/buttons"
            android:layout_weight=".16"
            android:text="Button 3" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/ll43"
        style="@style/horizontallayouthidden" >

        <TextView
            android:id="@+id/t3"
            style="@style/textview"
            android:layout_weight="0.5" />

        <TextView
            android:id="@+id/tt3"
            style="@style/textview"
            android:layout_weight="0.5" />
    </LinearLayout>
</LinearLayout>

<LinearLayout style="@style/verticallayout" >

    <LinearLayout style="@style/verticallayout" >

        <Button
            android:id="@+id/b4"
            style="@style/buttons"
            android:layout_weight=".16"
            android:text="Button 4" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/ll44"
        style="@style/horizontallayouthidden" >

        <TextView
            android:id="@+id/t4"
            style="@style/textview"
            android:layout_weight="0.5" />

        <TextView
            android:id="@+id/tt4"
            style="@style/textview"
            android:layout_weight="0.5" />
    </LinearLayout>
</LinearLayout>

<LinearLayout style="@style/verticallayout" >

    <LinearLayout style="@style/verticallayout" >

        <Button
            android:id="@+id/b5"
            style="@style/buttons"
            android:layout_weight=".16"
            android:text="Button 5" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/ll45"
        style="@style/horizontallayouthidden" >

        <TextView
            android:id="@+id/t5"
            style="@style/textview"
            android:layout_weight="0.5" />

        <TextView
            android:id="@+id/tt5"
            style="@style/textview"
            android:layout_weight="0.5" />
    </LinearLayout>
</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/left"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="0.5"
        android:enabled="false"
        android:text="Prev" />

    <Button
        android:id="@+id/right"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="0.5"
        android:text="Next" />
</LinearLayout> 
```

这是我的java类

```
public void onClick(View arg0) {
    String a=null;
    switch(arg0.getId()){
    case R.id.left:
        Toast.makeText(getApplicationContext(), "Prev"+ count, Toast.LENGTH_LONG).show();
                    if( count==0)
        prev.setEnabled(false);
        else{
             count--;
            Toast.makeText(getApplicationContext(), "Prev", Toast.LENGTH_LONG).show();
        }
        break;
    case R.id.right:
        Toast.makeText(getApplicationContext(), "Prev"+ count, Toast.LENGTH_LONG).show();
        if( count>((abc.size()/5)))
            next.setEnabled(false);
        else{
             count++;
            onClick(arg0);
        }
        break;
    case R.id.b1:
        t41.setText("t1");
            tt41.setText("tt1");
            a=abc.get(( count*0)+0)+"";
            bb1.setText(a);
        }
        break;
    case R.id.b2:
        t42.setText("t1");
            tt42.setText("tt1");
            a=abc.get(( count*0)+1)+"";
            bb2.setText(a);
        }
        break;
    case R.id.b3:
        t43.setText("t1");
            tt43.setText("tt1");
            a=abc.get(( count*0)+2)+"";
            bb3.setText(a);
        }
        break;
    case R.id.b4:
        t44.setText("t1");
            tt44.setText("tt1");
            a=abc.get((count*0)+3)+"";
            bb4.setText(a);
        }
        break;
    case R.id.b5:
            t45.setText("t1");
            tt45.setText("tt1");
            a=abc.get((count*0)+4)+"";
            bb5.setText(a);
        }
        break;

    }
} 
```

现在，当我从列表“abc”中可用的列表中单击下一个和上一个按钮动态时，我想更改按钮的文本。计数是另一个类中的 STATIC 变量。当我单击按钮中的值没有变化时。谁能帮我解决这个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T05:33:19.653

在您的 xml 中，在您想调用 onClick() 方法的任何地方使用此代码

```
android:onClick="onClick" 
```

例如：

```
<Button
    android:id="@+id/left"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_weight="0.5"
    android:enabled="false"
    android:text="Prev"
    android:onClick="onClick" />

<Button
    android:id="@+id/right"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_weight="0.5"
    android:text="Next"
    android:onClick="onClick" />` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:35:26.760

您尚未为按钮设置 onClick 侦听器。

没有 ID 为“左”或“右”的视图

在您的 xml 中为两个按钮提供 onClick 属性字段

我想这会解决你的问题。

# java - 使用JSoup设置HTML标签的属性

> ID：14494589
> 
> 赞同：7
> 
> 时间：2013-01-24T05:29:20.020
> 
> 标签：java, html, tags, jsoup

如何使用 JSoup 设置 HTML 标签的属性？

我想使用 Jsoup 库在 Java 中设置 tag->“img”的属性->“src”。

```
Elements img_attributes = doc.select("img[src^=/im]");
for(Element img_attribute: img_attributes)
{

String s = img_attribute.attr("src");
System.out.println(s);
} 
```

此代码打印`src`值。我想改变`src`价值观。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T14:19:47.903

您可以通过`attr()`两种方式使用方法执行此操作：循环或直接在`Elements`对象上：

```
// In a loop
for( Element img : doc.select("img[src]") )
{
    img.attr("src", "your-source-here"); // set attribute 'src' to 'your-source-here'
}

// Or directly on the 'Elements'
doc.select("img[src]").attr("src", "your-value-here"); 
```

事实上，这两种解决方案都是一样的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T05:37:31.710

检查 [http://jsoup.org/apidocs/org/jsoup/nodes/Element.html#attr%28java.lang.String,%20java.lang.String%29](http://jsoup.org/apidocs/org/jsoup/nodes/Element.html#attr%28java.lang.String,%20java.lang.String%29) 我认为函数

```
public Element attr(String attributeKey,
                    String attributeValue) 
```

对你有用

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-24T05:35:48.653

**请修改它并通过doc**将其写入您的 html 文件。

# ruby-on-rails - 无法按名称和主键搜索

> ID：14494591
> 
> 赞同：2
> 
> 时间：2013-01-24T05:29:22.533
> 
> 标签：ruby-on-rails, rails-activerecord

以下查询根本不按 id（主键）搜索 - 它一直将 0 分配给 id 并将 search_str 分配给名称。如果我们使用等于运算符而不是“id”的匹配项，它会正确执行此操作。以下范围是否存在问题。

```
scope :or_search, lambda {|name| where(arel_table[:name].matches("%{search_str}%").or(arel_table[:id].matches("%#{search_str}%"))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:41:32.510

我对你想要做的事情有点困惑，但首先

```
arel_table[:name].matches("%{search_str}%") 
```

你错过了`#`，我认为这应该是

```
arel_table[:name].matches("%#{search_str}%") 
```

其次，您没有在`name`任何地方使用您的论点，只是从这个角度来看，也许您想替换`search_str`为`name`?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T13:28:32.593

首先你犯了一个错字，我认为你在范围定义的末尾错过了一个右花括号

得到一个答案，我认为你正在做一些匹配 id 或标题的事情？（真的我不敢相信你不应该这样做）

请注意，“search_str”无处不在，因为块的参数是“名称”，因此您可以将其与您要比较的表的任何属性进行比较:)

我能想到的问题的答案是

范围 :or_search, lambda {|title| where(arel_table[:title].matches("%#{title}%").or(arel_table[:id].matches("#{title}")))}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T13:01:05.223

不确定您是否只是想了解它为什么不起作用，或者您是否正在寻找可行的解决方案。

无论如何，以下内容不在 arel 中，但如果将其添加到模型中会起作用：

```
def self.or_search(str)
  where("name like :input OR id like :input", input: "%#{str}%")
end 
```

# dos - 如何使用dos的DEBUGs查找程序中断

> ID：14494595
> 
> 赞同：1
> 
> 时间：2013-01-24T05:29:45.187
> 
> 标签：dos

如何在命令行上使用 DEBUG 找到 dos 程序调用的所有中断。我知道它可能与搜索功能有关，但每当我尝试类似 -s 100:ffff（我认为它会在整个内存段中搜索“INT”）但当我使用 u 命令手动卸载同一段时我可以看到调用了 INT/中断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:04:01.680

我认为您需要一个更好的调试器，但如果您想使用 DOS 调试来查找 INT 调用，您可以尝试以下操作：

```
debug program.exe
-d
14C0:0000 ...
....
-s 14C0:0000,FFFF CD
14C0:0007
14C0:000C
-u 14C0:0007
14C0:0007 CD21  INT  21
.... 
```

首先，找到要搜索的正确段（通过输入**d**命令），然后在该段中搜索 CD（这是 INT 助记符的机器代码）。**输入u**命令可以反汇编搜索结果。

# c# - 在 C# 中使用委托参数在类和表单之间传递数据

> ID：14494604
> 
> 赞同：0
> 
> 时间：2013-01-24T05:30:25.237
> 
> 标签：c#, forms, class, delegates

我必须将值从一个类传递给 RichTextBox。这是我的代码。我必须将值传递到文本框、列表框等任何工具中，但我不知道如何。我必须使用委托将 md 值传递给这两种方法并传递给同一个富文本框。

```
 namespace delegateEx2
{
    public class MyClass : Form1
    {
        delegate void MyDelegate(string MyString);

        public void ShowThoseMessages()
        {
            MyDelegate md = new MyDelegate(log1);
            md += log2;
            md("Error Log Text");
        }

        public void log1(string message) {

            //what can I write here to pass the md into the RichTextBox on Form1.cs
            //I tried something like Systems.Windows.Form.rtxblog but did not work 
            //......................................

        }

        public void log2(string message2)
        {

          //.....................................

        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T18:21:47.257

我以前必须查一下这个。这是一些示例代码...

类.cs

```
using System.Windows.Forms; 
```

...

```
public bool validateForm(TextBox txtTitle, TextBox txtPath, CheckedListBox ckList)
{
    bool title = false;
    bool path = false;

    if (txtTitle.Text == String.Empty)
    {
       title = false;
       txtTitle.Text = "Title is empty!";
       paintred(txtTitle);
    } else { title = true; paintwhite(txtTitle); }
    if (txtPath.Text == String.Empty)
    {
       path = false;
       txtPath.Text = "Path is empty!";
       paintred(txtPath); 
    } else { path = true; paintwhite(txtPath); }   

    bool ckItem1 = ckList.GetItemChecked(0);
    bool ckItem2 = ckList.GetItemChecked(1);
    bool ckItem3 = ckList.GetItemChecked(2);
    bool ckItem4 = ckList.GetItemChecked(3);
    bool ckItem5 = ckList.GetItemChecked(4);

    if (title && path && ckItem1 && ckItem2 
        && ckItem3 && ckItem4 &&
           ckItem5 )
        return true;
    else
        return false;
} 
```

然后在我的表格中，我有...

```
 if (TheClass.validateForm(txtBox, txtBox2, listCheckList))
    {
        txtBox3.Text = TheClass.generateItem1(something, something2);
        txtBox4.Text = TheClass.generateItem2(something, something2, txtPath.Text, txtTitle.Text, listCheckList.GetItemChecked(5));
    }
    else
    {
        MessageBox.Show("Please check fields marked in red, if any. Double check your Check List required items.", "Title Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:59:41.003

简单的问题是更改富文本框声明中的修饰符。您可以在 Form1.designer.cs 中找到声明。将修饰符从私有更改为受保护，然后您可以从 log1 方法访问richtextbox。

# javascript - console.log 或警报是否通过 ddms 在 kindle fire 应用程序内的 web 视图中工作

> ID：14494607
> 
> 赞同：0
> 
> 时间：2013-01-24T05:30:48.313
> 
> 标签：javascript, debugging, kindle

在 kindle fire 应用程序中运行的 webviews（也在 kindle fire HD 上）是否支持 javascript console.log 或警报？

我的kindle fire HD通过usb调试和ddms连接到我的电脑，我看到很多日志数据，但没有来自我的javascript代码同时调用alert（'alert test'）和console.log的webview消息（ '日志测试');

即使在 phonegap 论坛中，我也很惊讶那里的信息如此之少。就像我是第一个必须对在 kindle fire 应用程序的 web 视图中运行的 javascript 进行故障排除的人，这似乎很奇怪，因为硬件已经有一段时间了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:20:46.740

我自己在kindle fire HD系统7.2.3版上的测试显示：

Web (silk): 支持 alert() 但不支持 console.log() (即使连接到 adb/ddms)

Webview：不支持 alert() 也不支持 console.log()（即使连接到 adb/ddms）

希望我能找到更多关于在 kindle fire 上调试 webview 应用程序的信息。我将尝试一些基于 javascript 的日志记录解决方案。

编辑：在kindle fire HD上成功使用jsconsole来检索console.log消息并即时运行javascript。[http://jsconsole.com](http://jsconsole.com)

# ios - 如何将数组元素放在表格视图单元格上

> ID：14494609
> 
> 赞同：0
> 
> 时间：2013-01-24T05:30:52.063
> 
> 标签：ios, objective-c, arrays, uitableview

我一直试图将我的数组的值放在我的表格视图单元格中，它是多维数组我应该怎么做？

这是一个解析器类

```
-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
if ([elementName isEqualToString:@"subsidiary"])
{
      NSLog(@"%i", [app.infoarray count]);
    [app.listArray addObject:app.infoarray];
    [app.infoarray removeAllObjects];

}
else
{
     if ([elementName isEqualToString:@"countryname"])
     {
         temp = currentElementValue;

     }
    if ([elementName isEqualToString:@"name"])
    {

        theList.name = currentElementValue;
        [app.infoarray addObject:theList.name];
    }
    if ([elementName isEqualToString:@"address"])
    {
        theList.address = currentElementValue;
        [app.infoarray addObject:theList.address];
    } 
```

下面的代码是主视图控制器

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
}

theList.countryname = [app.listArray objectAtIndex:0];
cell.textLabel.text= theList.countryname; ////<<WHAT SHOULD I DO HERE?
cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
return cell;

} 
```

我只想让 cell.textlabel 显示国家/地区名称我只是 Objective-c 中的新手我希望有人可以帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:41:38.730

这一行提出了问题：

```
theList.countryname = [app.listArray objectAtIndex:0]; 
```

将其更改为：

```
theList.countryname = [[app.listArray objectAtIndex:indexPath.row] objectAtindex:0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T05:36:26.410

试试看嘛

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    theList.countryname = [app.listArray objectAtIndex: indexPath.row];
    cell.textLabel.text= theList.countryname;
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    return cell;

    } 
```

# webdriver - 如何从 webdriver Remote hub 清除 httprequest 到 rc

> ID：14494614
> 
> 赞同：2
> 
> 时间：2013-01-24T05:31:00.033
> 
> 标签：webdriver

我有一个 webdriver 远程 Hub Rc 执行场景。一旦我开始执行，请求就会在集线器中排队等待免费实例。但是当我终止执行时，请求似乎仍保留在控制台中。结果，空白页在我的 RC 中打开。

一旦执行停止，有没有办法从集线器缓存中清除挂起的 http 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-10T03:34:55.873

它工作得很好

首先设置每个 httprequest dom 元素的 .value。

```
xhr[i].value = i; 
```

然后在进度事件中输出它，如下所示：

```
console.log(this.value + " : " + percentCompleteRounded); 
```

# c# - 自定义错误页面在实时服务器上不起作用

> ID：14494622
> 
> 赞同：3
> 
> 时间：2013-01-24T05:32:11.150
> 
> 标签：c#, .net, asp.net-mvc, global-asax, custom-errors

我已经在我的项目中实现了自定义错误功能，它可以在本地 IIS 上运行，但不能在实时服务器上运行。我已经使用 Global.asax 文件实现了这个功能，并且我在 MVC 的自定义错误控制器中调用了我的自定义错误操作方法。我已经在本地 IIS 上发布并运行，它运行良好，但在实时服务器上。

我的 Global.asax.cs 文件

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    //do not register HandleErrorAttribute. use classic error handling mode
    filters.Add(new HandleErrorAttribute());
}

protected void Application_Error(Object sender, EventArgs e)
{
    LogException(Server.GetLastError());

    CustomErrorsSection customErrorsSection = (CustomErrorsSection)ConfigurationManager.GetSection("system.web/customErrors");
    string defaultRedirect = customErrorsSection.DefaultRedirect;
    if (customErrorsSection.Mod e== CustomErrorsMode.On)
    {
        var ex = Server.GetLastError().GetBaseException();

        Server.ClearError();
        var routeData = new RouteData();
        routeData.Values.Add("controller", "Common");
        routeData.Values.Add("action", "CustomError");

        if (ex is HttpException)
        {
            var httpException = (HttpException)ex;
            var code = httpException.GetHttpCode();
            routeData.Values.Add("status", code);
        }
        else
        {
            routeData.Values.Add("status", 500);
        }

        routeData.Values.Add("error", ex);

        IController errorController = new Test.Controllers.CommonController();
        errorController.Execute(new RequestContext(new HttpContextWrapper(Context), routeData));
    }
} 
```

我的自定义错误控制器及其操作方法

```
public ActionResult CustomError(int status, Exception error)
{
    var model = new CustomErrorModel();
    model.Code = status;
    model.Description = Convert.ToString(error);
    Response.StatusCode = status;
    return View(model);
} 
```

所以我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-04T06:58:36.507

I had this problem where errors on live IIS server weren't showing custom error pages (which return proper HttpStatusCodes) but it WAS working on local IIS (localhost address using default website - *not* Cassini). They should have worked exactly the same I would have thought - anyway this web.config setting fixed it.

```
<configuration>
    <system.webServer>
        <httpErrors existingResponse="PassThrough"></httpErrors>
    </system.webServer>
</configuration> 
```

Note that my setup uses Application_Error in global.asax and just this other web.config setting:

```
<customErrors mode="On">
    <!-- There is custom handling of errors in Global.asax -->
</customErrors> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T05:37:42.997

2 种方法

**路由方法**

```
// We couldn't find a route to handle the request. Show the 404 page. 
routes.MapRoute("Error", "{*url}", new { controller = "Error", action = "CustomError" } ); 
```

或者

**Web.config 中的自定义错误处理程序**：

```
<customErrors mode="On" >
    <error statusCode="404" redirect="~/CatchallController/CustomError" />
</customErrors> 
```

没有路由匹配引发的条件是 404。这样你就可以将所有不匹配的`~/CatchallController/CustomError`

# php - 如何从一台服务器连接多个客户端

> ID：14494623
> 
> 赞同：0
> 
> 时间：2013-01-24T05:32:11.857
> 
> 标签：php, sockets

如何将多个客户端连接到单个服务器，用于 2 个客户端之间的简单聊天应用程序。我在网上没有得到正确的答案，我是否必须创建多个套接字或端口，任何参考或示例代码或指导......这是我的服务器代码

```
$host = "127.0.0.1";
$port = 25003;

// No Timeout 
set_time_limit(0);
$socket = socket_create(AF_INET, SOCK_STREAM, 0) or die("Could not create socket\n");
//echo $socket;
$result = socket_bind($socket, $host, $port) or die("Could not bind to socket\n");
$result = socket_listen($socket, 3) or die("Could not set up socket listener\n");
$spawn = socket_accept($socket) or die("Could not accept incoming connection\n");

$input = socket_read($spawn, 1024) or die("Could not read input\n");
$output = strrev($input);    

socket_write($spawn, $output, strlen ($output)) or die("Could not write output\n"); 
socket_close($spawn);
socket_close($socket); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T05:41:34.803

如果套接字上有多个连接排队，则将使用第一个。如果没有挂起`socket_accept()`的连接，将阻塞直到连接出现。如果您想在服务器上有多个客户端，则必须使用非阻塞。

```
socket_set_nonblock($socket); 
```

# objective-c - 为什么强制转换不会改变 isa 指针

> ID：14494629
> 
> 赞同：3
> 
> 时间：2013-01-24T05:32:48.530
> 
> 标签：objective-c

```
id a = self->isa;
id b = ((NSObject*)self)->isa; 
```

a 和 b 具有相同的值。

现在给定的 isa 指针是一样的，为什么

```
[(Animal*)Person speakEnglish]; 
```

给出错误？我认为强制转换会改变 isa 指针，因为如果我将子类强制转换为它的父类，我就不能再调用子类的方法了，方法调用搜索是基于 isa 指针的。

我很想知道方法选择器是如何实现的，所以即使是一个实例的指针指向Person，如果我调用实例的Person的方法，我会得到一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:30:01.393

我假设`Animal`has no method `-speakEnglish`，但原始类`Person`has 。

然后，你会得到一个编译器错误，因为没有声明该方法。请注意，（正如@jrturton 和@xlc0212 所提到的）编译器对运行时一无所知。

对象（在运行时）可能有一个可以调用的选择器：

```
 [(Animal*)Person performSelector: @selector(speakEnglish)]; 
```

这使用运行时数据。更准确地说，它检查方法实现是否与此选择器连接并调用此实现。

但是，编译器无法知道，因为编译器依赖于静态类型信息。因此，您应该提供正确的类型信息。但你做的恰恰相反：你扔掉了正确的类型。

# javascript - 我们如何在 html5 和 javascript 中放大和缩小图形？

> ID：14494631
> 
> 赞同：0
> 
> 时间：2013-01-24T05:32:57.167
> 
> 标签：javascript, html, html5-canvas

我想在图形中实现缩放功能，因为它在谷歌地图中存在，即我希望图形在鼠标滚轮事件上根据鼠标指针位置进行缩放，以便图形更加清晰。

我必须通过使用 HTML5 和 JavaScript 来实现它。

任何人都可以指导我吗？

我问了一些人，他们说我必须使用矢量图来实现它。是这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:08:18.633

为了做到这一点，你必须有一个偏移量和一个缩放比例。然后，无论何时绘制，您都必须适当地转换您的绘图。帆布使这很容易：

```
ctx.save();
ctx.translate(offset.x, offset.y);
ctx.scale(scale, scale);
// do your drawing
ctx.restore(); 
```

然后为适当的鼠标事件添加处理程序。对于鼠标滚轮，这将[是`wheel`事件](http://www.w3.org/TR/DOM-Level-3-Events/#event-type-wheel)。每当您收到这样的事件时，您都会想要计算一个新的比例。例如，这可以使用：

```
// Assuming 'ticks' is some standardized unit of measurement.
// You'll probably want to scale it differently based on event.deltaMode.
var newScale = scale * Math.pow(1.5, ticks); 
```

然后你会想弄清楚未转换的位置。

```
// Assuming mousePos.x and mousePos.y are the position, relative to the canvas,
// of the mouse event. To untransform, first undo the offset and then undo the
// scale.
var untransformed = {
    x: (mousePos.x - offset.x) / scale,
    y: (mousePos.y - offset.y) / scale
}; 
```

然后，执行一些通过实验确定的魔法：

```
offset.x += transformed.x * (scale - newScale);
offset.y += transformed.y * (scale - newScale); 
```

然后应用比例更改：

```
scale = newScale; 
```

**[试试看。](http://jsfiddle.net/jAnAP/)**（在那里用 CoffeeScript 编写，使用点击而不是滚动，但数学是一样的）

# ios - 如何从 iPad 应用程序启动 Safari 浏览器？

> ID：14494632
> 
> 赞同：-5
> 
> 时间：2013-01-24T05:32:59.983
> 
> 标签：ios, ipad, cocoa-touch

需要从 ipad 应用程序启动 safari。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T05:35:39.013

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://www.apple.com"]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T05:36:22.493

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://www.google.com"]]; 
```

# browser - vb 脚本 - 如果我通过 c:\ 运行 iexplore.exe 我如何进一步浏览浏览器窗口

> ID：14494637
> 
> 赞同：2
> 
> 时间：2013-01-24T05:33:30.680
> 
> 标签：browser, vbscript, automation

如果我使用

```
Set ie = CreateObject("InternetExplorer.Application") 
```

要打开一个 URL，我可以使用以下

```
ie.Navigate "http://google.com" 
```

但我不能选择这个选项，因为“InternetExplorer.Application”会打开 64 位 IE 浏览器。我需要 32 位 IE 浏览器才能工作。所以我使用了以下

```
set Objshell=CreateObject("WScript.shell")  
return=Objshell.run ("""C:\Program Files\Internet Explorer\iexplore.exe""" & "www.google.com") 
```

所以在这种情况下，我不知道如何导航或使用`getElements()`打开的浏览器窗口。

请让我知道如何处理这个！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:43:00.423

```
 Option Explicit 

 Main() 

 Sub Main() 
     Force32bit() 
     Dim objExplorer : Set objExplorer = CreateObject("InternetExplorer.Application") 
     Dim i 

i = true 
do while i = true 
     objExplorer.Navigate "www.google.com" 
     objExplorer.ToolBar = 1 
     objExplorer.StatusBar = 1 
     objExplorer.Width = 800 
     objExplorer.Height = 800 
     objExplorer.Left = 1 
     objExplorer.Top = 1 
     objExplorer.Visible = 1 
     WScript.Sleep 6000 
     objExplorer.Navigate "www.yahoo.com" 
wscript.sleep 6000 
loop 

 End Sub 

 Sub Force32bit() 
     If InStr(UCase(WScript.FullName), "SYSTEM32") > 0 and CreateObject("Scripting.FileSystemObject").FolderExists("C:\Windows\SysWOW64") Then 
         Dim objShell : Set objShell = CreateObject("WScript.Shell") 
         objShell.CurrentDirectory = "C:\Windows\SysWOW64" 
         objShell.Run "wscript.exe " & Chr(34) & WScript.ScriptFullName & Chr(34), 1, False 
     End If 
 End Sub 
```

[在这里](http://www.visualbasicscript.com/Launching-IE-in-32-bit-mode-from-VBS-script-m80179-p2.aspx)找到解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-13T15:06:45.563

```
Dim Shell
Set Shell = CreateObject("WScript.Shell")
Shell.Run "iexplore.exe www.google.com" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-13T22:59:54.540

如果您返回原始代码并简单地将实例化行修改为以下内容：

```
Set ie = CreateObject("InternetExplorer.Application.1") 
```

这应该足以强制 IE 应用程序对象的 32 位实例。

如果您仍想使用 shell 路由，请记住您要从*Programs (x86)*文件夹中启动 iEXPLORE.EXE。

```
"C:\Program Files (x86)\Internet Explorer\iexplore.exe" 
```

# loops - 为什么 Haskell 序列函数不能惰性或递归单子函数不能惰性

> ID：14494648
> 
> 赞同：13
> 
> 时间：2013-01-24T05:34:27.567
> 
> 标签：loops, haskell, recursion, monads, lazy-evaluation

通过[按广度优先顺序列出目录的所有内容会导致效率低下](https://stackoverflow.com/questions/14474545/)的问题，我了解到效率低下是由于递归 monad 函数的奇怪行为。

尝试

```
sequence $ map return [1..]::[[Int]]
sequence $ map return [1..]::Maybe [Int] 
```

而ghci会陷入无休止的计算。

如果我们以更易读的形式重写序列函数，如下所示：

```
sequence' []     = return []
sequence' (m:ms) = do {x<-m; xs<-sequence' ms; return (x:xs)} 
```

并尝试：

```
sequence' $ map return [1..]::[[Int]]
sequence' $ map return [1..]::Maybe [Int] 
```

我们得到同样的情况，一个无限循环。

尝试有限列表

```
sequence' $ map return [1..]::Maybe [Int] 
```

`Just [1,2,3,4..]`经过长时间的等待，它会弹出预期的结果。

通过我们的尝试，我们可以得出结论，虽然sequence'的定义看起来很懒惰，但它是严格的，必须在打印sequence'的结果之前把所有的数字都弄出来。

不仅仅是序列'，如果我们定义一个函数

```
iterateM:: Monad m => (a -> m a) -> a -> m [a]
iterateM f x = (f x) >>= iterateM0 f >>= return.(x:) 
```

并尝试

```
iterateM (>>=(+1)) 0 
```

然后发生无休止的计算。

众所周知，非monadic iterate的定义和上面的iterateM一样，但是为什么iterate是lazy的，iterateM是strict的。从上面我们可以看出，iterateM和sequence'都是递归monadic函数。递归monadic函数有什么奇怪的吗

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-24T08:30:33.670

问题不在于 的定义`sequence`，而在于底层 monad 的操作。特别是，monad`>>=`操作的严格性决定了`sequence`.

对于一个足够惰性的 monad，完全可以`sequence`在无限列表上运行并逐步使用结果。考虑：

```
Prelude>  :m + Control.Monad.Identity
Prelude Control.Monad.Identity> runIdentity (sequence $ map return [1..] :: Identity [Int]) 
```

并且列表将根据需要以增量方式打印（使用）。

尝试使用`Control.Monad.State.Strict`and可能会很有启发性`Control.Monad.State.Lazy`：

```
-- will print the list
Prelude Control.Monad.State.Lazy> evalState (sequence $ map return [1..] :: State () [Int]) ()
-- loops
Prelude Control.Monad.State.Strict> evalState (sequence $ map return [1..] :: State () [Int]) () 
```

In the `IO` monad, `>>=` is by definition strict, since this strictness is exactly the property necessary to enable reasoning about effect sequencing. I think @jberryman's answer is a good demonstration of what is meant by a "strict `>>=`". For `IO` and other monads with a strict `>>=`, each expression in the list must be evaluated before `sequence` can return. With an infinite list of expressions, this isn't possible.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-24T06:36:03.880

您不太了解绑定的机制：

```
(>>=) :: Monad m => m a -> (a -> m b) -> m b 
```

这是仅适用于 3 长度列表的序列实现：

```
sequence3 (ma:mb:mc:[]) = ma >>= (\a-> mb >>= (\b-> mc >>= (\c-> return [a,b,c] ))) 
```

您看到我们必须如何“运行”列表中的每个“单子动作”，然后才能返回外部构造函数（即最外部的 cons 或`(:)`）？如果您不相信，请尝试以不同的方式实施它。

这是 monad 对 IO 有用的原因之一：当您绑定两个操作时，效果会隐含排序。

您还必须小心使用术语“懒惰”和“严格”。确实`sequence`，您必须遍历整个列表才能包装最终结果，但以下内容非常有效：

```
Prelude Control.Monad> sequence3 [Just undefined, Just undefined, Nothing]
Nothing 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-24T07:53:25.697

Monadic`sequence`通常不能在无限列表上懒惰地工作。考虑它的签名：

```
sequence :: Monad m => [m a] -> m [a] 
```

它将其论点中的所有一元效应组合成一个效应。如果将其应用于无限列表，则需要将无限数量的效果组合为一个。对于某些 monad，它是可能的，对于某些 monad，它不是。

例如，考虑`sequence`专门 to `Maybe`，就像您在示例中所做的那样：

```
sequence :: [Maybe a] -> Maybe [a] 
```

结果是`Just ...`当且仅当数组中的所有元素都是`Just ...`. 如果任何元素是，`Nothing`那么结果是`Nothing`。这意味着除非您检查输入的*所有*元素，否则您无法判断结果是`Nothing`还是`Just ...`。

这同样适用于`sequence`专用于`[]`：`sequence :: [[a]] -> [[a]]`。如果参数的任何元素是一个空列表，则整个结果是一个空列表，例如 in `sequence [[1],[2,3],[],[4]]`。因此，为了评估`sequence`列表列表，您必须检查所有元素以查看结果的样子。

* * *

另一方面，专门用于`Reader`monad 的序列可以懒惰地处理其参数，因为对 monad 的计算没有真正的“影响” `Reader`。如果你定义

```
inf :: Reader Int [Int]
inf = sequence $ map return [1..] 
```

也许

```
inf = sequence $ map (\x -> reader (* x)) [1..] 
```

它会懒惰地工作，你可以通过调用`take 10 (runReader inf 3)`.

# c# - 如何更改 IEnumerable 集合，使其可以绑定到数据网格

> ID：14494652
> 
> 赞同：0
> 
> 时间：2013-01-24T05:34:48.530
> 
> 标签：c#, wpf, datagrid, ienumerable

我正在开发一个 WPF 应用程序。它里面有一个`DataGrid`。我已将`ItemSource`我的数据网格分配给一个`IEnumerable`集合。我有一个`Treeview`在我的窗口。当我单击树视图中的元素时，它必须加载数据网格

```
private void treeView1_SelectedItemChanged(object sender, RoutedPropertyChangedEventArgs<object> e)
{
       this.dataGrid1.ItemsSource = null;

       this.dataGrid1.Visibility = Visibility.Visible;
       this.dataGrid1.ItemsSource = objref.FinalValue;
       // Where Objref.FinalValue is an IEnumerable collection. 
       grid_data = objref.FinalValue;
} 
```

但问题是每次`selection`更改时，其中的值`datagrid`都不会被覆盖，而是会被附加。我用它刷新了数据网格，`dataGrid1.Columns.Clear()`后来`dataGrid.ItemSource = null;`我发现它`objref.FinalValue`被附加了。因此，即使我刷新了数据网格，它也会显示整个值..

所以在`objref`我使用的实例中

```
 private IEnumerable Result;

   public IEnumerable FinalValue
   {
       get { return Result; }
       set { Result = value; }
   }
   // Update Result with values so that it can be assigned to datagrid. 
```

我需要覆盖而不是附加。但是`FinalValue`每次都附加了。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:38:49.857

每当您`ItemsSource`在渲染网格后更新时，您都必须调用`dataGrid1.Items.Refresh()`它来更新它。调用`Refresh()`datagrid 后，行将反映绑定到它的新集合。

# jquery - jQuery中的json解析问题

> ID：14494655
> 
> 赞同：0
> 
> 时间：2013-01-24T05:34:54.973
> 
> 标签：jquery, json

我在 jQuery 中解析 json 数组时遇到了一个问题。

我的 json 数组是

```
({resultCount:1, results:[{wrapperType:"track", kind:"song", artistId:255303209, collectionId:536282724, trackId:536282832, artistName:"Flo Rida", collectionName:"Wild Ones (Deluxe Version)", trackName:"I Cry", collectionCensoredName:"Wild Ones (Deluxe Version)", trackCensoredName:"I Cry", artistViewUrl:"https://itunes.apple.com/us/artist/flo-rida/id255303209?uo=4", collectionViewUrl:"https://itunes.apple.com/us/album/i-cry/id536282724?i=536282832&uo=4", trackViewUrl:"https://itunes.apple.com/us/album/i-cry/id536282724?i=536282832&uo=4", previewUrl:"http://a1278.phobos.apple.com/us/r1000/073/Music/09/3d/27/mzm.wwzzwbfq.aac.p.m4a", artworkUrl30:"http://a1395.phobos.apple.com/us/r1000/112/Music/v4/25/03/bb/2503bb1c-fbf4-4f5d-b249-9a2c3cfe24d6/075679960399.30x30-50.jpg", artworkUrl60:"http://a1459.phobos.apple.com/us/r1000/112/Music/v4/25/03/bb/2503bb1c-fbf4-4f5d-b249-9a2c3cfe24d6/075679960399.60x60-50.jpg", artworkUrl100:"http://a1796.phobos.apple.com/us/r1000/112/Music/v4/25/03/bb/2503bb1c-fbf4-4f5d-b249-9a2c3cfe24d6/075679960399.100x100-75.jpg", collectionPrice:7.99, trackPrice:1.29, releaseDate:"2012-06-22T07:00:00Z", collectionExplicitness:"notExplicit", trackExplicitness:"notExplicit", discCount:1, discNumber:1, trackCount:10, trackNumber:8, trackTimeMillis:223800, country:"USA", currency:"USD", primaryGenreName:"Hip Hop/Rap"}]}) 
```

在这个数组中我必须得到artifactUrl30，trackName。这该怎么做 ？当我尝试解析这个时，我得到了这个错误 SyntaxError: JSON.parse: expected double-quoted property name

**编辑** 我称它为 iTunes 回调就像

```
function GetDetailsFromitunes(data){

    var mvar = jQuery.parseJSON(data);
    console.log( mvar.resultCount);

    } 
```

我正在根据此文档工作

[http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html#searching](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html#searching)

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T05:35:44.333

错误信息再清楚不过了。您必须引用您的属性名称：

```
{ "resultCount":1, "results": [{"wrapperType":"track"}, {"Keep": "going"}] } 
```

你现在拥有它的方式，虽然是有效的 JavaScript，但却[是无效的 JSON](http://www.json.org/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T06:02:52.677

```
$(document).ready(function() {
    var url =  "http://itunes.apple.com/lookup?id=536282832";
    $.getJSON(url + "&callback=?", null, function(data) {
        console.log(data.results[0].artworkUrl30, data.results[0].trackName);
    });
}); 
```

# android - 如何比较和匹配android中的数组列表

> ID：14494658
> 
> 赞同：2
> 
> 时间：2013-01-24T05:35:12.147
> 
> 标签：android, arraylist, compare

我是安卓新手。

我面临数组列表的问题。问题是，

我的数组是字符串数组列表。我需要的是什么？我有两个数组列表。QtnsArraylist1 包含 4 个元素（4 个问题），AnsArraylist2 包含 16 个元素（16 个答案，每个问题 4 个选项共 16 个元素）。对于 QtnsArraylist1 中的第一个问题，我必须从 AnsArraylist2 中获取前 4 个元素。同样适用于 2、3、4如果给出下一个按钮的问题。我怎么能得到？.

请帮我一个。

提前致谢。

```
 D/TAG(910): 1
      D/TAG(910): 2
      D/TAG(910): 3
      D/TAG(910): 4
      D/TAG(910): 5
      D/TAG(910): 6
      D/TAG(910): 1
      D/TAG(910): 2
      D/TAG(910): 3
      D/TAG(910): 4
      D/TAG(910): 5
      D/TAG(910): 6
      D/TAG(910): 1
      D/TAG(910): 2
      D/TAG(910): 3
      D/TAG(910): 4
      D/TAG(910): 5
      D/TAG(910): 6
      D/TAG(910): 1
      D/TAG(910): 2
      D/TAG(910): 3
      D/TAG(910): 4
      D/TAG(910): 5
      D/TAG(910): 6
      D/TAG(910): 1
      D/TAG(910): 2
      D/TAG(910): 3
      D/TAG(910): 4
      D/TAG(910): 5
      D/TAG(910): 6
      D/AndroidRuntime(910): Shutting down VM
      W/dalvikvm(910): threadid=1: thread exiting with uncaught exception 
      (group=0x40015560)
      E/AndroidRuntime(910): FATAL EXCEPTION: main
      E/AndroidRuntime(910): java.lang.IndexOutOfBoundsException: Invalid index 16, size 
      is 16
      E/AndroidRuntime(910):    at 
      java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:257)
      E/AndroidRuntime(910):    at java.util.ArrayList.get(ArrayList.java:311) 
```

代码

```
 protected void onPostExecute(String file_url) {
        pDialog.dismiss();  
        for ( int i = 0,j = 0; i < ques1.size(); i++) {
            String s1 = ques1.get(i).toString();
            Log.d("TAG", "1");
            TextView txtque = (TextView) findViewById(R.id.que_txt); 
            txtque.setText(s1);
            Log.d("TAG", "2");
            btn_practicerg =(RadioGroup) findViewById(R.id.rdgroup);
            Log.d("TAG", "3");
            btn_practice1 = (RadioButton) findViewById(R.id.RB1);
            Log.d("TAG", "4");
            btn_practice2 = (RadioButton) findViewById(R.id.RB2);
            Log.d("TAG", "5");
            btn_practice3 = (RadioButton) findViewById(R.id.RB3);
            Log.d("TAG", "6");
            btn_practice4 = (RadioButton) findViewById(R.id.RB4);
            String s2 = answ1.get(j++);
            btn_practice1.setText(s2);
            String s3 = answ1.get(j++);
            btn_practice1.setText(s3);
            String s4 = answ1.get(j++);
            btn_practice1.setText(s4);
            String s5 = answ1.get(j++);   
            btn_practice1.setText(s5);
            //Display them
        }     
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:43:53.730

我无法完全了解您的问题。如果要显示 ArrayList1 中的一个元素，然后显示 ArrayList2 的 4 个元素，那么它非常简单。

```
for ( int i = 0,j = 0; i < ArrayList1.size(); i++) {
    s1 = ArrayList1.get(i);
    s2 = ArrayList2.get(j++);
    s3 = ArrayList2.get(j++);
    s4 = ArrayList2.get(j++);
    s5 = ArrayList2.get(j++);   
    //Display them
} 
```

请随时提出任何疑问。

试试下面的代码

```
Log.d("TAG", "onCreate() entered");
    setContentView(R.layout.activity_main);
    ArrayList<String> questionsList = new ArrayList<String>();
    ArrayList<String> answersList = new ArrayList<String>();

    //Initializing the arrayLists
    for (int index = 0; index < 4; index++) {
        questionsList.add("ques" + index + 1);
    }
    for (int index = 0; index < 16; index++) {
        answersList.add("ans" + index + 1);
    }

    //Output
    for (int questionIndex = 0, answerIndex = 0; questionIndex < questionsList.size(); questionIndex++) {
        Log.d("TAG", questionsList.get(questionIndex));

        Log.d("TAG", answersList.get(answerIndex++));
        Log.d("TAG", answersList.get(answerIndex++));
        Log.d("TAG", answersList.get(answerIndex++));
        Log.d("TAG", answersList.get(answerIndex++));

    } 
```

我将方法附加到 radioBtn 和 textViews 中。

在布局文件中设置 textView ids "@+id/questionView1" "@+id/questionView2" 等等，radioBtns 为

```
 "@+id/radioBtn1"
 "@+id/radioBtn2" 
```

以此类推直到16

节目中

```
 for (int questionIndex = 0, answerIndex = 0; questionIndex < questionsList.size(); questionIndex++) {
        TextView tv = (TextView) findViewById(R.id.questionView + questionIndex + 1);
        tv.setText(questionsList.get(questionIndex));

        RadioButton rb1 = (RadioButton) findViewById(R.id.radioBtn + answerIndex + 1);
        rb1.setText(answersList.get(answerIndex++));

        RadioButton rb2 = (RadioButton) findViewById(R.id.radioBtn + answerIndex + 1);
        rb2.setText(answersList.get(answerIndex++));

        RadioButton rb3 = (RadioButton) findViewById(R.id.radioBtn + answerIndex + 1);
        rb3.setText(answersList.get(answerIndex++));

        RadioButton rb4 = (RadioButton) findViewById(R.id.radioBtn + answerIndex + 1);
        rb4.setText(answersList.get(answerIndex++));

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T05:49:27.533

你可以做类似的事情，

```
int j = 0;
for ( int i = 0; i < ArrayList1.size(); i++) {
    Log.d("ArrayList1", ArrayList1.get(i));
    Log.d("ArrayList2", ArrayList2.get(j));
    j++;
    Log.d("ArrayList2", ArrayList2.get(j));
    j++;
    Log.d("ArrayList2", ArrayList2.get(j));
    j++;
    Log.d("ArrayList2", ArrayList2.get(j));
    j++;
} 
```

# ios - 以编程方式更改 UISegmentedControl 选定的索引或值

> ID：14494663
> 
> 赞同：18
> 
> 时间：2013-01-24T05:35:43.440
> 
> 标签：ios, xcode, uisegmentedcontrol

我有一个带有两个段（索引：0 和 1）的 UISegmentedControl，我试图以编程方式将其重置为 0。当我运行下面的命令时，它不会按预期将段索引重置为 0。相反，它突出显示索引为 1 的段。

```
 [seg setSelectedSegmentIndex:0]; 
```

奇怪的是，当我记录所选段时，它返回`0`.

```
 NSLog(@"seg setSelectedSegmentIndex %d", seg.selectedSegmentIndex); 
```

同样奇怪的是，运行后`setSelectedSegmentIndex:0`我无法通过触摸手动重新选择段 0，它似乎被锁定到段 1，直到我点击它正常工作的 1。

这是按钮的设置：

```
 itemArray = [NSMutableArray arrayWithObjects: @"Zero", @"One", nil];
    seg = [[UISegmentedControl alloc] initWithItems:itemArray];
    [seg setFrame:segRect];
    seg.segmentedControlStyle = UISegmentedControlStyleBar;
    seg.momentary = NO;
    [seg addTarget:self action:@selector(someAction:) forControlEvents: UIControlEventValueChanged];
    [mainView addSubview:seg]; 
```

**注意：**重申我试图用这个问题完成的事情：我想通过变量动态设置 UISegmentedControl 的选定索引，获取适当的视觉反馈，并在方法中检查选定的索引，以根据选定的情况发生某些事情指数。请参阅下面的答案以获取解决方案。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-24T07:08:03.460

在某一方面的变化`viewDidLoad:`

```
[seg setSelectedSegmentIndex:index]; 
```

您可以根据需要更改使用索引值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T06:08:21.167

从代码中，您只需执行`seg.selectedSegmentIndex = someDefaultIndex`.

是否应该设置它`viewDidLoad:`完全取决于应用程序的结构。例如，如果您的应用程序正在启动并首次加载视图，并且需要将控件设置为它在应用程序上一次运行期间所具有的任何值，那么在此处执行此操作绝对是有意义的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-19T09:26:52.060

**斯威夫特 3.0**

```
segmentedControl.selectedSegmentIndex = #your value# 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-01-15T16:46:40.763

正确答案是此[链接](https://stackoverflow.com/a/5273904/5305978)上的@arcady bob one 。我已经发布了Swift 5 的[更新版本](https://stackoverflow.com/a/59755895/5305978)，我在这里引用：

> yourSegmentedControl.selectedSegmentIndex = 0
> 
> yourSegmentedControl.sendActions(for: UIControl.Event.valueChanged)
> 
> 如果您只使用第一行，则分段控件将以图形方式做出相应的反应，但不会调用与分段控件关联的 IBAction。简而言之：第二行就像点击分段控件。这是我需要的，也是我所缺少的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-24T08:27:44.970

这有助于根据视觉反馈对所选片段进行排序，即在以编程方式设置所选片段之后，这将正确着色片段。

```
for (int i=0; i<[seg.subviews count]; i++)
{

    if ([[seg.subviews objectAtIndex:i] respondsToSelector:@selector(isSelected)] && [[seg.subviews objectAtIndex:i]isSelected])
    {
        [[seg.subviews objectAtIndex:i] setTintColor:[UIColor grayColor]];
    }
    if ([[seg.subviews objectAtIndex:i] respondsToSelector:@selector(isSelected)] && ![[seg.subviews objectAtIndex:i] isSelected])
    {
        [[seg.subviews objectAtIndex:i] setTintColor:[UIColor blackColor]];
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-25T07:25:24.907

重申我试图通过这个问题完成的任务：我想通过变量动态设置 UISegmentedControl 的选定索引，获取适当的视觉反馈，并在方法中检查选定的索引，以根据选定的索引发生一些事情。

本来我猜这个就这么简单：mySegmentedController.selectedSegmentIndex = someIndex，然后测试索引。但正如我的问题所述，它对我不起作用。行为很奇怪。运行该代码后，相应的按钮不会突出显示。

这是一个我确实修复它的项目，所以它可以工作。不确定它为什么起作用。可能是我在设置索引之前放在那里的延迟。如果可以改进，我将更新并评论项目文件。

[http://owolf.net/uploads/StackOverflow/SegmentedControllers.zip](http://owolf.net/uploads/StackOverflow/SegmentedControllers.zip)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-25T19:41:30.517

警告：这不是完全回答问题，而是密切相关。

我有一个类似的问题。大多数时候我的 UISegmentedController 工作得很好。它有 4 个段，关闭、30、60 和 120。

在随机的时间间隔内（通常是在发布之前！！），Off 段变得无法从用户界面中选择。（我没有尝试从代码中选择它，因为这不是我需要做的，也不会解决我的问题。）

解决方案是从我的 XIB 中删除该 UISegmentedController 并用一个新的（并且完全相同的）替换它，然后它就可以正常工作了。

我什至 CMD-C 和 CMD-V 将有问题的 UISegmentedController 放入另一个 App 的 XIB 中。并且 Off 段（即索引 0 处的段）在该 XIB 中也是不可选择的。

这似乎是 XCode 的一个问题。

# sql - 选择多个计数集，sql server 2008 r2

> ID：14494672
> 
> 赞同：0
> 
> 时间：2013-01-24T05:36:33.610
> 
> 标签：sql, tsql, sql-server-2008-r2

使用 SQL Server 2008 R2，我有以下查询返回的结果集 -

```
QID    QcID    QtID    QsID
21      1       SC      3
4       1       SC      1
8       1       MC      1
2       1       SC      1
23      1       SC      3
24      1       SC      3
5       1       SC      1
22      1       SC      3
1       1       SC      1
29      1       MC      3
10      1       MC      1
30      1       MC      3
26      1       MC      3
25      1       SC      3
6       1       MC      1
27      1       MC      3
7       1       MC      1
3       1       SC      1
28      1       MC      3
9       1       MC      1 
```

现在我想找到一组 15 个 QID 的随机集合，其中必须包括 -

```
 9 QsID having QsID = 1
 6 QsID having QsID = 3
 9 QtID having QtID = SC
 6 QtID having QtID = MC
 15 QsID having QtID = 1 
```

由于它可能有数以万计的记录，因此如何做到牢记性能。

@ Damien_The_Unbeliever 预期的输出可能是 -

```
21      1       SC       3
4       1       SC       1
8       1       MC       1
2       1       SC       1
23      1       SC       3
24      1       SC       3
5       1       SC       1
1       1       SC       1
10      1       MC       1
25      1       SC       3
6       1       MC       1
27      1       MC       3
7       1       MC       1
3       1       SC       1
28      1       MC       3 
```

还要忘记随机性，如何选择满足所有条件的集合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:53:11.593

**编辑2：**

那么，如何使用存储过程呢？
假设您有 4 组用于采样数据的条件。从您提供的输出推导出来。它可能不正确，但您可以根据需要再次调整它。

参数：

*   `@SIZE`- 是以行为单位的采样结果集的大小
*   `@P1-@P3`- 应为特定条件集填充随机行的采样结果集的百分比。
*   `@P4=@SIZE-(@N1+@N2+@N3)`

```
CREATE PROCEDURE sqlsampling 
    @SIZE INT, @P1 DECIMAL(6,4), @P2 DECIMAL(6,4), @P3 DECIMAL(6,4) 
AS 

DECLARE @N1 INT, @N2 INT, @N3 INT, @N4 INT;
SET @N1=CEILING(@SIZE*@P1*0.01);
SET @N2=CEILING(@SIZE*@P2*0.01);
SET @N3=CEILING(@SIZE*@P3*0.01);
SET @N4=@SIZE-(@N1+@N2+@N3);

CREATE TABLE #sample(QID INT, QcID INT, QtID CHAR(2), QsID INT);

INSERT INTO #sample 
SELECT TOP(@N1) * FROM mytable 
WHERE QtID = 'MC' AND QsID = 1 
ORDER BY CHECKSUM(NEWID());

INSERT INTO #sample 
SELECT TOP(@N2) * FROM mytable 
WHERE QtID = 'MC' AND QsID = 3 AND QID NOT IN(SELECT QID FROM #sample)
ORDER BY CHECKSUM(NEWID());

INSERT INTO #sample 
SELECT TOP(@N3) * FROM mytable 
WHERE QtID = 'SC' AND QsID = 1 AND QID NOT IN(SELECT QID FROM #sample)
ORDER BY CHECKSUM(NEWID()); 

INSERT INTO #sample
SELECT TOP(@N4) * FROM mytable 
WHERE QtID = 'SC' AND QsID = 3 AND QID NOT IN(SELECT QID FROM #sample)
ORDER BY CHECKSUM(NEWID());

SELECT * FROM #sample;
DROP TABLE #sample;
GO 
```

如果我们像这样在您的示例数据上执行它

```
EXEC sqlsampling @SIZE=15, @P1=26.666, @P2=13.333, @P3=33.333; 
```

它会给我们输出：

```
QID QCID QTID QSID
10  1    MC   1
9   1    MC   1
7   1    MC   1
6   1    MC   1
27  1    MC   3
30  1    MC   3
1   1    SC   1
4   1    SC   1
3   1    SC   1
5   1    SC   1
2   1    SC   1
21  1    SC   3
23  1    SC   3
25  1    SC   3
24  1    SC   3 
```

其他注意事项：

*   您的条件集的正确索引应该会有所帮助
*   `CHECKSUM(NEWID())`对我们使用的惩罚有所帮助`NEWID()`

**原答案：**

你可以这样做：

```
SELECT TOP 15 * FROM
(
SELECT * FROM (SELECT TOP 9 QID FROM mytable 
WHERE QsID = 1 
ORDER BY CHECKSUM(NEWID())) a
 UNION
SELECT * FROM (SELECT TOP 6 QID FROM mytable 
WHERE QsID = 3 
ORDER BY CHECKSUM(NEWID())) b
...
) z ORDER BY CHECKSUM(NEWID()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:40:43.343

也许您可以尝试`percent`..`top`这不是完整的答案，而是向方向投一些光..

```
select  * from demo where qid in 
(select top 40 percent qid
 from demo order by newid())
; 
```

这里也是一个参考：http `tablesample`: [//msdn.microsoft.com/en-us/library/ms189108.aspx](http://msdn.microsoft.com/en-us/library/ms189108.aspx)

# json - ServiceStack.Text json 仅序列化结构属性

> ID：14494677
> 
> 赞同：1
> 
> 时间：2013-01-24T05:36:55.403
> 
> 标签：json, serialization, servicestack

是否可以像 .net JavaScriptSerializer 一样使 ServiceStack.Text 对结构的公共字段进行消毒？

当前，如果结构没有将字段定义为属性，即 c++ 中的 property 关键字或 get;set; 在 c# 中，该值不会被序列化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T08:08:58.593

[ServiceStack 序列化](https://github.com/ServiceStack/ServiceStack.Text)程序目前无法做到这一点。

通过设计，ServiceStack 序列化程序试图促进在服务的服务层/边界中使用特殊用途的 DTO，在这个目标中，我们只序列化类型的公共属性，从而可以灵活地生成有线格式。

这与作为通用对象序列化器相反，它也会序列化类型的内部表示（即私有和公共字段）。

# asp.net - Web api 接口在本地工作，但在 Azure 上不工作

> ID：14494678
> 
> 赞同：16
> 
> 时间：2013-01-24T05:36:59.650
> 
> 标签：asp.net, azure, asp.net-web-api-routing

[我的情况与这个问题](https://stackoverflow.com/questions/13418344/web-api-interface-works-locally-but-gets-404-after-deployed-to-azure-website%20this%20question)非常相似，但由于他没有得到答案，我想我会提出更多意见。

在本地（在 VS 嵌入式服务器上）一切正常。当我部署到 Azure 时，我收到一个 404 错误，并伴有“找不到与名为...的控制器匹配的类型”。

但是，当我加载[routedebugger](http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx%20routedebugger)模块时，即使在 Azure 上，映射似乎也可以。

我能做些什么来调试这个问题？

谢谢，

亚历克斯

编辑：我的路线是这样创建的：

```
 GlobalConfiguration.Configuration.Routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}",
                defaults: new { id = RouteParameter.Optional }
            };
            GlobalConfiguration.Configuration.Routes.MapHttpRoute(
                name: "ActionApi",
                routeTemplate: "api/{controller}/{action}/{id}",
                defaults: new { id = RouteParameter.Optional }
            ); 
```

编辑 2：这里是我的控制器类

```
 public class EmployeeController : ApiController
{
    // GET api/<controller>
    public IEnumerable<Employee> Get()
    {
        using (var context = new nws())
        {
            return context.Employees;
        }
    }

    // GET api/<controller>/5
    public Employee Get(int id)
    {
        using (var context = new nws())
        {
            return context.Employees.FirstOrDefault(e => e.ID == id);
        }
    }

    // GET api/<controller>/getbyatid/5
    public Employee GetByAtId(string id)
    {
        using (var context = new nws())
        {
            return context.Employees.FirstOrDefault(e => e.AtUserID == id);
        }
    }

    // POST api/<controller>
    public void Post([FromBody]string value)
    {
    }

    // PUT api/<controller>/5
    public void Put(int id, [FromBody]string value)
    {
    }

    // DELETE api/<controller>/5
    public void Delete(int id)
    {
    }

    // GET api/<controller>/timebank/5
    public int? GetTimeBank(string id)
    {
        using (var context = new nws())
        {
            var employee = context.Employees.FirstOrDefault(e => e.AtUserID == id);
            if (employee != null)
                return employee.GetTimeBank();
            return null;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:05:13.553

切换路线顺序，然后重试。

```
 GlobalConfiguration.Configuration.Routes.MapHttpRoute(
            name: "ActionApi",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );
        GlobalConfiguration.Configuration.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        }; 
```

# responsive-design - 响应式网页设计中的有序列表和列表

> ID：14494679
> 
> 赞同：0
> 
> 时间：2013-01-24T05:37:02.473
> 
> 标签：responsive-design

我是响应式网页设计的新手，我不确定为什么有序列表和列表不像页面的其余部分那样响应。

```
#container {
  text-align: center;
}

ol {
  text-decoration: none;
  font-family: helvetica; 
  width: 100%;
  text-align: center;
  margin-left: 500px;
  text-decoration: none;  
}

li {
  text-decoration: none;
  font-family: helvetica; 
  letter-spacing: 3px;
  line-height: 25px;
  color: green;
  width: 100%;
  padding-bottom: 10px;
  font-size: 10px;
  text-align: left;
}
```

```
<div id="container">
  <h2>Step 1: Choose Your Drink</h2>

  <ol>
    <li>Chai Latte</li> 
    <li>Americano</li>
    <li>Pumpkin Spice Latte</li>
    <li>Vanilla Bean Frappuccino</li>
  </ol>

  <h2>Step 2: Join Us! and receive daily drink recipes.</h2>
</div>
```

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:02:25.420

ol{margin-left: 500px} 是罪魁祸首。

尝试以下更改

```
ol{
  font-family: helvetica;
  text-decoration: none;
}

li{
  text-decoration: none;
  font-family: helvetica;
  letter-spacing: 3px;
  line-height: 25px;
  color: green;
  padding-bottom: 10px;
  font-size: 10px;
  list-style-position: inside;
} 
```

我不认为这正是你要找的，但它应该让你更接近

# python - 使用 Tweepy 搜索 Twitter 提要

> ID：14494687
> 
> 赞同：1
> 
> 时间：2013-01-24T05:38:07.963
> 
> 标签：python, google-app-engine, twitter, tweepy

感谢@Nirvana Tikku，他解决了我关于如何与 Tweepy 交谈并在这个问题中执行简单搜索的[问题](https://stackoverflow.com/questions/14482572/twitter-streaming-api-with-gae-python)。以下是关于我如何在 GAE 上验证我的 tweepy 的一系列代码摘要。

```
import tweepy

creds = json.loads(open('credential.json').read())
tw_consumer_key = creds['tw_consumer_key']
tw_consumer_secret = creds['tw_consumer_secret']
tw_access_token = creds['tw_access_token']
tw_access_token_secret = creds['tw_access_token_secret']

try:
    auth = tweepy.OAuthHandler(tw_consumer_key, tw_consumer_secret)
    auth.set_access_token(tw_access_token, tw_access_token_secret)
    api = tweepy.API(auth)
except Exception:
    print "Tweepy Error"
    service = None
    api = None 
```

成功验证 tweepy 后我有一个问题，可以与它交谈。我需要实现流 API 以从 twitter 获取 LIVE 提要。这里有人可以给我一个关于如何实施“消防水带”的指南吗？请提供一些示例代码。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T17:20:40.523

以下是 Tweepy 论坛中类似问题的答案： [https ://groups.google.com/forum/#!topic/tweepy/BLSRYzG1Tps](https://groups.google.com/forum/#!topic/tweepy/BLSRYzG1Tps)

引用*steveobd*：“GAE 不支持仅监听出站套接字（[https://developers.google.com/appengine/docs/python/sockets/](https://developers.google.com/appengine/docs/python/sockets/)）。您必须使用 Google Compute Engine 或 Heroku 或类似的。 "

# android - 在 AlertDialog 的 EditText 中没有弹出软键盘

> ID：14494689
> 
> 赞同：1
> 
> 时间：2013-01-24T05:38:10.977
> 
> 标签：android, keyboard, android-edittext, android-alertdialog

经过大量搜索后，我找到了该问题的各种解决方案，但该解决方案不适用于我。我使用此[链接](https://stackoverflow.com/questions/3455235/when-using-alertdialog-builder-with-edittext-the-soft-keyboard-doesnt-pop) ，但不适用于我，我也使用此[链接](https://stackoverflow.com/questions/7834240/can-someone-get-this-custom-alertdialog-to-actually-work)，它也不适用于我。请帮我 。我完全被困在这里。

我使用以下代码：从我称为这样的对话框的活动中：

```
FirstStartDialog dialog=new FirstStartDialog(this);

        dialog.show(); 
```

然后我的 Dialog 类是这样的：

```
public class FirstStartDialog extends AlertDialog{
public FirstStartDialog(final MainWindow mainWindow,
        ) {
    super(mainWindow);
    }

    protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    setContentView(R.layout.new_account_dialog);
    //getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE);
     editText_registration_username = (EditText) findViewById(R.id.etxt_User_Name);
    editText_registration_password = (EditText) findViewById(R.id.etxt_Password);
    _btn_registration_next = (Button) findViewById(R.id.btn_registration_next);
    _tap_here_registration = (TextView) findViewById(R.id.txt_Tap_Here_Message);
    _relative_Main_new_Account = (RelativeLayout) findViewById(R.id.relative_Main_New_Account);

    editText_login_username = (EditText) findViewById(R.id.etxt_Existing_User_Name);
    editText_login_password = (EditText) findViewById(R.id.etxt_Exiting_User_Password);
    _btn_login_next = (Button) findViewById(R.id.btn_login_next);
    _tap_here_login = (TextView) findViewById(R.id.txt_Tap_Here_Existing);
    _relative_Main_Existing_Account = (RelativeLayout) findViewById(R.id.relative_Main_Existing_Account);

    editText_registration_username.setOnFocusChangeListener(new View.OnFocusChangeListener() {
        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            if (hasFocus) {
                  FirstStartDialog.this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE);
            }
        }
    });

    editText_registration_password.setOnFocusChangeListener(new View.OnFocusChangeListener() {
        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            if (hasFocus) {
                FirstStartDialog.this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE);
            }
        }
    });
    }
  } 
```

在 xml 文件中，我像这样定义我的 EditText：

```
 <EditText 
            android:id="@+id/etxt_Password"
            android:layout_width="210dp"
            android:layout_height="22dp"
            android:layout_marginTop="5dp"
            android:hint="Password"
            android:paddingLeft="8dp"
            android:textColor="@android:color/black"
            android:paddingRight="8dp"
            android:textCursorDrawable="@null"
            android:gravity="center_vertical"
            android:textSize="12sp"
            android:layout_below="@+id/etxt_User_Name"
            android:layout_centerHorizontal="true"
            android:background="@drawable/login_new_account_editbox"
            /> 
```

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T05:42:58.673

试试这种方式：

> ```
>  public class FirstStartDialog extends Dialog {
> Context context;
>  final AlertDialog.Builder alert;
> public FirstStartDialog(Context p_context) {
>     super(p_context);
>     context = p_context;
>      alert = new AlertDialog.Builder(context);
> }    
> protected void onCreate(Bundle savedInstanceState) {
>     // TODO Auto-generated method stub
>     super.onCreate(savedInstanceState);
>      LayoutInflater inflater = getLayoutInflater();
>      View container = inflater.inflate(R.layout.new_account_dialog, null);
>      final EditText editText_registration_username = (EditText)container.findViewById(R.id.etxt_User_Name);
>         editText_registration_username
>         .setOnFocusChangeListener(new View.OnFocusChangeListener() {
>             @Override
>             public void onFocusChange(View v, boolean hasFocus) {
>                  if (hasFocus) {                     ((InputMethodManager)context.getSystemService(Context.INPUT_METHOD_SERVICE))
>                  .showSoftInput(editText_registration_username,
>                  InputMethodManager.SHOW_FORCED);
>                  }
>             }
>         });
>         setContentView(container);
> }    } 
> ```

如上所述实现您的对话框，您将打开键盘。

# php - 使用一个 JQuery 函数更新两个列表

> ID：14494691
> 
> 赞同：0
> 
> 时间：2013-01-24T05:38:47.217
> 
> 标签：php, jquery

我有一个小问题，希望有 JQuery 知识的人可以查看我的代码并发现我做错了什么。我有两个使用 ajax 更新的无序列表（动态创建）。使用下面的脚本，我只能更新一个列表，但不能同时更新。我克隆了第一个脚本并更改了第二个列表的变量，但只有一个得到更新。谢谢你的帮助。

这是html代码：

```
 List one: <ul data-options="" class="elgg-list-mainriver elgg-sync elgg-list-river elgg-river"><li> .....</li>
</ul>

List Two:  <ul data-options="" class="elgg-list-miniriver elgg-sync elgg-list-river elgg-river"><li> .....</li>
</ul> 
```

和jQuery代码：

```
 elgg.provide('elgg.river');

elgg.river.init = function() {

    var riverList = $('ul.elgg-list-mainriver');
    //var miniriverList = $('.elgg-list-miniriver');
    var time = 20000;
    if (!window.rivertimer) {
        window.rivertimer = true;
        var refresh_river = window.setTimeout(function(){
            elgg.river.timedRefresh(riverList);
            //elgg.river.MinitimedRefresh(miniriverList);
        }, time);
    }
};

elgg.river.timedRefresh = function(object) {
    var first = $('li:first', object);
    if (!first.length) {
        first = object;
    }
    var time = first.data('timestamp');

    elgg.getJSON('activity', {
        data : {
            sync : 'new',
            time : time,
            options : object.data('options')
        },
        success : function(output) {
            if (output) {
                $.each(output, function(key, val) {
                    var new_item = $(val).hide();
                    //new_item = $(val).show();
                    object.prepend(new_item.fadeIn(600));
                    //object.prepend(new_item.$(val).show());
                });
            }
            window.rivertimer = false;
            elgg.trigger_hook('success', 'elgg:river:ajax');
        }
    });
}

elgg.provide('elgg.river_miniriver');

elgg.river_miniriver.init = function() {

    var miniriverList = $('ul.elgg-list-miniriver');
    var time = 20000;
    if (!window.rivertimer) {
        window.rivertimer = true;
        var refresh_river = window.setTimeout(function(){
            elgg.river_miniriver.timedRefresh(miniriverList);
        }, time);
    }
};

elgg.river_miniriver.timedRefresh = function(object) {
    var first = $('li:first', object);
    if (!first.length) {
        first = object;
    }
    var time = first.data('timestamp');

    elgg.getJSON('activity', {
        data : {
            sync : 'new',
            time : time,
            options : object.data('options')
        },
        success : function(output) {
            if (output) {
                $.each(output, function(key, val) {
                    var new_item = $(val).hide();
                    //new_item = $(val).show();
                    object.prepend(new_item.fadeIn(600));
                    //object.prepend(new_item.$(val).show());
                });
            }
            window.rivertimer = false;
            elgg.trigger_hook('success', 'elgg:river:ajax');
        }
    });
}

elgg.register_hook_handler('init', 'system', elgg.river.init);
elgg.register_hook_handler('success', 'elgg:river:ajax', elgg.river.init, 500);
elgg.register_hook_handler('init', 'system', elgg.river_miniriver.init);
elgg.register_hook_handler('success', 'elgg:river:ajax', elgg.river_miniriver.init, 500); 
```

如果我尝试在函数 "$('ul.elgg-list-miniriver, ul.elgg-list-mainriver')" 中合并两个列表类，则两个列表都会更新，但第一个列表项 (li) 会得到 "opacity:0 ;" 很有型？？？？

这段代码：

```
elgg.river_miniriver.init = function() {

    var miniriverList = $('ul.elgg-list-miniriver, ul.elgg-list-mainriver');
    var time = 20000;
    if (!window.rivertimer) {
        window.rivertimer = true;
        var refresh_river = window.setTimeout(function(){
            elgg.river_miniriver.timedRefresh(miniriverList);
        }, time);
    }
};

elgg.river_miniriver.timedRefresh = function(object) {
    var first = $('li:first', object);
    if (!first.length) {
        first = object;
    }
    var time = first.data('timestamp');

    elgg.getJSON('activity', {
        data : {
            sync : 'new',
            time : time,
            options : object.data('options')
        },
        success : function(output) {
            if (output) {
                $.each(output, function(key, val) {
                    var new_item = $(val).hide();
                    //new_item = $(val).show();
                    object.prepend(new_item.fadeIn(1000));
                    //object.prepend(new_item.$(val).show());
                });
            }
            window.rivertimer = false;
            elgg.trigger_hook('success', 'elgg:river:ajax');
        }
    });
} 
```

# url - url重定向是在连接期间还是在连接之后发生

> ID：14494692
> 
> 赞同：0
> 
> 时间：2013-01-24T05:38:49.090
> 
> 标签：url, redirect, urlconnection

一旦执行 dns 查找，客户端和服务器之间就会建立连接。

我的疑问是 url 重定向是在连接建立时发生还是在建立连接后发生？我正在使用http服务器。请提供详细答案。当url方向发生时？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T05:45:47.553

我希望与您分享这篇文章，它可以让您对整个导航的工作方式有一个很好的了解。

[http://igoro.com/archive/what-really-happens-when-you-navigate-to-a-url/](http://igoro.com/archive/what-really-happens-when-you-navigate-to-a-url/)

# java - JPA+ORACLE：无法将布尔参数传递给我的存储过程

> ID：14494696
> 
> 赞同：2
> 
> 时间：2013-01-24T05:39:34.977
> 
> 标签：java, oracle, hibernate, jpa-2.0, hibernate-entitymanager

我无法将布尔参数传递给我在 Oracle 中的存储过程。如果我直接在查询文本中设置值 (mypackage.Test(?, false, ?, ?);) 一切正常......

*   jdbc 驱动程序：ojdbc6.jar
*   容器：Tomcat 7.0.28
*   休眠核心+休眠实体管理器：4.1.6.Final
*   oracle：Oracle 数据库 11g 版本 11.2.0.2.0 - 64 位生产

这是我的实现：

```
EntityManager em = defaultFactory.createEntityManager();
em.createNativeQuery("BEGIN mypackage.Test(?, ?, ?, ?); END;")//
    .setParameter(1, factId)//
    .setParameter(2, false)//
    .setParameter(3, auth.getDt())//
    .setParameter(4, auth.getName())//
.executeUpdate(); 
```

我的持久性单元：

```
<persistence-unit name="unit" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <non-jta-data-source>java:/comp/env/jdbc/db</non-jta-data-source>
        <properties>
        <property name="hibernate.temp.use_jdbc_metadata_defaults" value="false"/> 
        <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect" /> 
        <property name="hibernate.hbm2ddl.auto" value="validate" /> 
        <property name="hibernate.connection.characterEncoding" value="UTF-8" /> 
        <property name="hibernate.temp.use_jdbc_metadata_defaults" value="false"/>
    </properties>
</persistence-unit> 
```

日志：

```
2013-01-24 11:28:44,582 DEBUG JdbcTransaction (71) - disabling autocommit
 2013-01-24 11:28:44,633 TRACE QueryPlanCache (196) - Unable to locate native-sql query plan in cache; generating (BEGIN 2013-01-24 11:28:44,582 DEBUG JdbcTransaction (71) - disabling autocommit
 2013-01-24 11:28:44,633 TRACE QueryPlanCache (196) - Unable to locate native-sql query plan in cache; generating (BEGIN mypackage.Test(?, ?, ?, ?); END;)
 2013-01-24 11:28:44,644 TRACE SQLCustomQuery (85) - Starting processing of sql query [BEGIN Collection_Fact_IUD.Del(?, ?, ?, ?); END;]
 2013-01-24 11:28:44,669 TRACE ConnectionProxyHandler (110) - Handling invocation of connection method [prepareStatement]
 2013-01-24 11:28:44,669 DEBUG SqlStatementLogger (104) - BEGIN mypackage.Test(?, ?, ?, ?); END;
 2013-01-24 11:28:44,670 TRACE JdbcResourceRegistryImpl (65) - Registering statement [org.hibernate.engine.jdbc.internal.proxy.PreparedStatementProxyHandler@41801d[valid=true]]
 2013-01-24 11:28:44,670 TRACE BasicBinder (83) - binding parameter [1] as [BIGINT] - 68593
 2013-01-24 11:28:44,670 TRACE AbstractStatementProxyHandler (88) - Handling invocation of statement method [setLong]
 2013-01-24 11:28:44,670 TRACE PreparedStatementProxyHandler (75) - Binding via setLong: [1, 68593]
 2013-01-24 11:28:44,672 TRACE BasicBinder (83) - binding parameter [2] as [BIT] - false
 2013-01-24 11:28:44,673 TRACE AbstractStatementProxyHandler (88) - Handling invocation of statement method [setBoolean]
 2013-01-24 11:28:44,673 TRACE PreparedStatementProxyHandler (75) - Binding via setBoolean: [2, false]
 2013-01-24 11:28:44,673 TRACE BasicBinder (83) - binding parameter [3] as [TIMESTAMP] - 2013-01-24 11:28:44.631
 2013-01-24 11:28:44,673 TRACE AbstractStatementProxyHandler (88) - Handling invocation of statement method [setTimestamp]
 2013-01-24 11:28:44,673 TRACE PreparedStatementProxyHandler (75) - Binding via setTimestamp: [3, 2013-01-24 11:28:44.631]
 2013-01-24 11:28:44,674 TRACE BasicBinder (83) - binding parameter [4] as [VARCHAR] - unknown
 2013-01-24 11:28:44,674 TRACE AbstractStatementProxyHandler (88) - Handling invocation of statement method [setString]
 2013-01-24 11:28:44,674 TRACE PreparedStatementProxyHandler (75) - Binding via setString: [4, unknown]
 2013-01-24 11:28:44,675 TRACE AbstractStatementProxyHandler (88) - Handling invocation of statement method [executeUpdate]
 2013-01-24 11:28:44,691 DEBUG SqlExceptionHelper (139) - ORA-06550: Строка 1, столбец 7:
PLS-00306: ошибочно число или типы аргументов при обращении к 'Test'
ORA-06550: Строка 1, столбец 7:
PL/SQL: Statement ignored
 [n/a]
 java.sql.SQLException: ORA-06550: Строка 1, столбец 7:
PLS-00306: ошибочно число или типы аргументов при обращении к 'Test'
ORA-06550: Строка 1, столбец 7:
PL/SQL: Statement ignored

    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:445)
    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:396)
    at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:879)
    at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:450)
    at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:192)
    at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:531)
    at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:207)
    at ... 
```

我的认识有什么问题？

谢谢！

# android - 如何检查 google places api 返回的位置数？

> ID：14494697
> 
> 赞同：1
> 
> 时间：2013-01-24T05:39:36.200
> 
> 标签：android, google-maps, google-places-api

嗨，我使用 google places api 开发了一个 android 应用程序。

现在我想计算 google places api 返回的位置数，以便为每个访问数据库的位置分配一个唯一的 id。

我搜索了谷歌，但无法找到如何计算 google places api 返回的位置数。

# apache - Apache Unicode AuthName 字符串？

> ID：14494701
> 
> 赞同：4
> 
> 时间：2013-01-24T05:40:00.877
> 
> 标签：apache, unicode, apache2

我为 Apache 上的基本身份验证添加了用户名和密码，并且我希望为我的用户提供 Unicode AuthName 字符串。我的 httpd.conf 看起来像这样：

```
<Location "/">
    AuthType Basic
    AuthName "Some Unicode Here"
    AuthUserFile /somewhere/htpasswd
    Require valid-user
</Location> 
```

但是“ `Some Unicode Here`”在我的浏览器中似乎总是垃圾。如何让它正确显示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T16:54:41.680

您可能无法使其工作，主要问题是缺乏浏览器支持，请参阅[我应该为 HTTP 标头使用哪种字符编码？](https://stackoverflow.com/questions/4400678/http-header-should-use-what-character-encoding). 显示`AuthName`为`WWW-Authenticate`标题中的领域：

```
WWW-Authenticate: Basic realm="Some Unicode Here" 
```

一些快速的实验表明：

*   Apache 不在`AuthName`配置中编码 UTF-8 字符串，它按原样发送
*   Firefox、MSIE 和 Chrome 都（正确地）将该 UTF-8 字节序列解释为 ISO-8859-1（因此可能会错误地显示它）
*   无支持 HTTP RFC-2616 所述的 RFC-2047 MIME 编码，其字面意思显示为`=?utf-8?B?U29tZSBVbmljb2RlIEhlcmUK?=`

（如果您可以选择，我建议`mod_auth_tkt`作为基于 cookie 的基本身份验证的替代品，它有一个插入式 htpasswd 样式的 perl 脚本，并且设置`REMOTE_USER`，您只需要滚动自己的表单。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-02T14:37:45.597

我找到了包含重音字符的 .htaccess AuthName 的正确解决方案：

**使用文本编辑器或“iconv”以正确的编码保存文件。**

在 Sublime 3 中，我使用了 File -> Save with Encoding -> Western ISO-8859-1

# asp.net - Page Div 对齐未正确显示

> ID：14494703
> 
> 赞同：-1
> 
> 时间：2013-01-24T05:40:24.213
> 
> 标签：asp.net, html, markup

我的情况很奇怪，我相信人们在这个特定问题上帮助我一定很容易。我在一个子页面上有两个 div，我想彼此相邻显示。我的意思是，一个在左边，一个在右边。之后，我想在屏幕底部显示一个覆盖 100% 宽度的表格。

我在一个 div 上使用了向左浮动并在另一个 div 上向右浮动。然后我在底部显示表格的标题，然后显示表格。
我的问题是，尽管我付出了所有努力，但标题仍显示在这两个 div 之间。这是我的代码。

```
 <div id="ContainerDiv" runat="server" style="width: 930px">
        <div id="DivticketDetails" runat="server" visible="false" 
            style="float: left; width: 400px;">
            <asp:Panel ID="PanelTicketDetails" runat="server" BackColor="#8B9FBE">
                <h3 style="color: #FFFFFF; font-weight: bold; text-decoration: underline;">
                    Bowzer Details</h3>
                <table border="1" cellpadding="0" cellspacing="0" class="myTable">
                    <tr>
                        <td bgcolor="#507CD1">
                            <asp:Label ID="Label6" runat="server" Text="Field / Customer Name" Font-Bold="True"
                                Font-Size="XX-Small" BorderColor="#507CD1" ForeColor="White"></asp:Label>
                        </td>
                        <td>
                            <asp:Label ID="lbl_FieldName" runat="server" Text="lbl_FieldName" CssClass="myLabel"></asp:Label>
                        </td>
                    </tr>
                    <tr>
                        <td bgcolor="#507CD1">
                            <asp:Label ID="Label3" runat="server" Text="Challan Generated On" Font-Bold="True"
                                Font-Size="XX-Small" BorderColor="#507CD1" ForeColor="White"></asp:Label>
                        </td>
                        <td>
                            <asp:Label ID="lbl_firstEntryDate" runat="server" Text="lbl_firstEntryDate" Font-Size="Small"
                                CssClass="myLabel"></asp:Label>
                        </td>
                    </tr>
                    <tr>
                        <td bgcolor="#507CD1">
                            <asp:Label ID="Label4" runat="server" Text="Product Name" Font-Bold="True" Font-Size="XX-Small"
                                BorderColor="#507CD1" ForeColor="White"></asp:Label>
                        </td>
                        <td>
                            <asp:Label ID="lbl_ProductName" runat="server" Text="lbl_ProductName" Font-Size="Small"
                                CssClass="myLabel"></asp:Label>
                        </td>
                    </tr>
                    <tr>
                        <td bgcolor="#507CD1">
                            <asp:Label ID="Label2" runat="server" Text="Bowzer No" Font-Bold="True" Font-Size="XX-Small"
                                BorderColor="#507CD1" ForeColor="White"></asp:Label>
                        </td>
                        <td>
                            <asp:Label ID="lbl_bowzerNo" runat="server" Text="lbl_bowzerNo" Font-Size="Small"
                                CssClass="myLabel"></asp:Label>
                        </td>
                    </tr>
                    <tr>
                        <td bgcolor="#507CD1">
                            <asp:Label ID="Label28" runat="server" Text="Quantity" Font-Bold="True" Font-Size="XX-Small"
                                BorderColor="#507CD1" ForeColor="White"></asp:Label>
                        </td>
                        <td>
                            <asp:Label ID="lbl_BowQuantity" runat="server" Text="lbl_BowQuantity" Font-Size="Small"
                                CssClass="myLabel"></asp:Label>
                        </td>
                    </tr>
                </table>
            </asp:Panel>
        </div>
        <div id="Div2" runat="server" style="float: right; width: 429px;">
            <asp:Panel ID="PanelBowzerHistory" runat="server" BackColor="#8B9FBE" Visible="False">
                <h3 style="font-weight: bold; text-decoration: underline; color: #FFFFFF">
                    Bowzer History
                </h3>
                <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" CellPadding="4"
                    DataKeyNames="challan_id" DataSourceID="DSBowzerHistory" Font-Size="Smaller"
                    ForeColor="#333333" GridLines="None" AllowPaging="True" PageSize="4">
                    <AlternatingRowStyle BackColor="White" />
                    <Columns>
                        <asp:BoundField DataField="FirstWeight" HeaderText="FirstWeight" SortExpression="FirstWeight" />
                        <asp:BoundField DataField="Firstentry_date" HeaderText="Firstentry_date" SortExpression="Firstentry_date" />
                        <asp:BoundField DataField="SecondWeight" HeaderText="SecondWeight" SortExpression="SecondWeight" />
                        <asp:BoundField DataField="netWeight" HeaderText="netWeight" SortExpression="netWeight" />
                        <asp:BoundField DataField="SecondEntry_Date" HeaderText="SecondEntry_Date" SortExpression="SecondEntry_Date" />
                        <asp:BoundField DataField="challan_id" HeaderText="challan_id" InsertVisible="False"
                            ReadOnly="True" SortExpression="challan_id" />
                    </Columns>
                    <EditRowStyle BackColor="#2461BF" />
                    <FooterStyle BackColor="#507CD1" ForeColor="White" Font-Bold="True" />
                    <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
                    <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
                    <RowStyle BackColor="#EFF3FB" />
                    <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
                    <SortedAscendingCellStyle BackColor="#F5F7FB" />
                    <SortedAscendingHeaderStyle BackColor="#6D95E1" />
                    <SortedDescendingCellStyle BackColor="#E9EBEF" />
                    <SortedDescendingHeaderStyle BackColor="#4870BE" />
                </asp:GridView>
            </asp:Panel>
        </div>
    </div>

    <div id="tblDetailsDiv" runat="server" visible="False" title="Ticket Details" style="width: 930px;
        background-color: #8B9FBE;">
                <h3 style="font-size: medium; color: #FFFFFF; font-weight: bold; width: 930px; background-color: #00FF00;">
                Enter Details Here</h3>
            <table id="tblDetails" title="Enter Details" border="0" cellpadding="0" cellspacing="0"
                class="myTable" frame="border">
                <tr>
                    <td>

                    </td>
                    <td>
</table>
</div> 
```

这是它的显示方式。

![图片](../Images/a0006fccf67a08bd937f184f90df04c1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:13:42.600

尝试将第二个 div 的浮动更改为向左，并在这两个 div 之后。像这样：

![在此处输入图像描述](../Images/317174bc88c77010a555ee8902c203c7.png)

并在这两个 div 之后添加一个具有清晰样式的新 div。

![<div style="clear: both"></div>](../Images/2f40bdccfdfe669e2783e533c73c23e4.png) 希望它有效。

给你。我添加了上面的代码

# c++ - 在 C++ 中实现 address-albe 字段的最佳方法是什么？

> ID：14494706
> 
> 赞同：2
> 
> 时间：2013-01-24T05:40:46.317
> 
> 标签：c++, deserialization, binary-deserialization

我正在尝试实现反序列化，其中到字段/成员的映射仅在运行时才知道（它很复杂）。无论如何，我想做的是如下所示：

```
Class A
{
  public:
    int a;    // index 0
    float b;  // index 1
    char c;   // index 2
} 
```

然后我有两个数组，一个带有字段的索引，另一个带有指示类型的东西。然后我想遍历数组并从字节流写入字段。

对不起，糟糕的描述，但我只是不知道如何在代码中实现它。任何想法将不胜感激谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:02:59.343

有很多问题和决定需要。最简单的是，您可以为`A`每个字段保留一个偏移量，您可以打开类型并通过指向该字段的指针进行设置。例如 - 假设`int16_t`输入流中有一个编码字段编号，不努力使用`static_cast<>`等，这样做更好一点，并假设一个 0 字段编号输入终止符......

```
A a;
char* pa = (char*)&a;
char* p_v = (char*)&input_buffer;

...
while ((field_num = *(int16_t)p_v) && (p_v += sizeof(int16_t)))
    switch (type[field_num])
    {
      case Int32:
        *(int32_t*)(p_a + offset[field_num]) = *(int32_t*)(p_v);
        p_v += sizeof(int32_t);
        break;
      ...
    } 
```

您可能需要考虑使用例如`ntohl()`等来处理字节顺序转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T06:11:40.400

我想不出一种语言结构能够在运行时为您提供一个给定索引的字段地址。如果您可以让“类型”数组实际包含字段大小，您将能够执行以下操作：

```
istream &in = <get it somehow>;
size_t *field_size = <get it somehow>;
size_t num_of_fields = <get it somehow>;
A a;

char *ptr = reinterpret_cast<char *>(&a);
for (int i = 0; i < num_of_fields; i++)
{
    in.read(ptr, field_size[i]);
    ptr += field_size[i];
} 
```

请注意，如果您的类很简单并且没有任何虚函数成员（或此类类的继承），这将是正确的。如果是这种情况，最好包含一个虚拟成员来获取类中字段开始的字节偏移量：

```
class A
{
    int __dummy;   /* must be the first data member in the class */

    ...
    <rest of your class definition here>
}; 
```

现在更改*ptr*的初始化如下：

```
ptr = reinterpret_cast<char *>(&a) + offsetof(A, __dummy); 
```

此代码的另一个隐含假设是，运行此代码的机器和接收序列化数据的机器的机器字节顺序相同。如果不是，那么您将需要转换从流中读取的数据的字节顺序。这种转换当然取决于类型，但每个字段可以有另一个转换函数数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T06:19:39.293

是的，您可以，但是在执行此操作时需要注意两件事。

首先确保你开始写作，`(const char*)&A.a`因为所有编译器都会在对象的开头附加一些与你无关的东西（例如，visualc 将 vtable 放在那里），如果你写的话，你就不会写你认为的东西从对象的地址开始。

其次，您可能希望`#pragma pack(1)`在声明任何需要写入磁盘的类之前执行 a，因为编译器通常会对齐类成员以提高 DMA 传输效率，您最终也可能会遇到问题。

在它的动态部分，如果为你想要的每个字段组合创建一个类定义是可以接受的，那么可以这样做，否则你最好在你的类中包含一个哈希表并序列化/反序列化它的内容通过将键值对写入文件

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-24T05:44:41.970

让编译器来做：

写一个`operator>>`函数。

# asp.net - 锚标记字体大小不适用于来自代码隐藏 C# 的 divtag 内

> ID：14494710
> 
> 赞同：0
> 
> 时间：2013-01-24T05:40:56.517
> 
> 标签：asp.net, css

这里我从数据库中获取字体大小、家族、backbolor。因此该值将应用于 div 标签内的锚标签。除了字体大小保持正常。这是我的代码。这里尝试了两种类型。1\. 将字体大小应用于 div 标签。2.将字体大小应用于ul标签

```
 <div id="sidenav" class="column" runat="server">
    <table cellpadding="10" cellspacing="10">
    <tr>
    <td>        
            <ul id="abcd" runat="server">
                <li><a href="ViewEvents.aspx">Events</a></li>
                <li><a href="PhotoGalleries.aspx">Photo Galleries</a></li>
                <li><a href="InProgress.aspx">Location</a></li>
                <li><a href="InProgress.aspx">Officials</a></li>
                <li><a href="InProgress.aspx">Honours Board</a></li>
                <li><a href="InProgress.aspx">History</a></li>
                <li><a href="InProgress.aspx">Links</a></li>
                <li><a href="InProgress.aspx">Site map</a></li>
                <li><a href="InProgress.aspx">Help</a></li>
            </ul>
            </td>
    </tr>
    </table>
        </div>
panelLinks.Style.Add("background-color", objpage.MenuBackcolor);
            panelLinks.Style.Add("color", objpage.MenuTextcolor);
            panelLinks.Style.Add("font-family", objpage.MenuTextStyle);
            //contanerwrapper.Style.Add("font-size", objpage.BodyTextSize);
            //contanerwrapper.Style.Add("color", objpage.BodyTextBackcolor);
            //contanerwrapper.Style.Add("font-family", objpage.BodyTextStyle);
            abcd.Style.Add("background-color", objpage.NavigationBackcolor);
            abcd.Style.Add("color", objpage.NavigatioinTextcolor);
            abcd.Style.Add("font-family", objpage.NavigatioinTextStyle);
            abcd.Style.Add("font-size", objpage.NavigatioinTextsize);
 panelLinks.Style.Add("background-color", objpage.MenuBackcolor);
            panelLinks.Style.Add("color", objpage.MenuTextcolor);
            panelLinks.Style.Add("font-family", objpage.MenuTextStyle);
            //contanerwrapper.Style.Add("font-size", objpage.BodyTextSize);
            //contanerwrapper.Style.Add("color", objpage.BodyTextBackcolor);
            //contanerwrapper.Style.Add("font-family", objpage.BodyTextStyle);
            sidenav.Style.Add("background-color", objpage.NavigationBackcolor);
            sidenav.Style.Add("color", objpage.NavigatioinTextcolor);
            sidenav.Style.Add("font-family", objpage.NavigatioinTextStyle);
            sidenav.Style.Add("font-size", objpage.NavigatioinTextsize); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:06:55.567

尝试添加类似的代码

```
 abcd.Style.Add("font-size", string.Format(objpage.NavigatioinTextsize+"px")) ; 
```

您应该需要指定字体大小[的度量单位。](http://kyleschaeffer.com/user-experience/css-font-size-em-vs-px-vs-pt-vs/)

# android - 用颜色填充线图区域android

> ID：14494712
> 
> 赞同：4
> 
> 时间：2013-01-24T05:41:24.720
> 
> 标签：android, graph

我使用 GraphView 演示创建了一个折线图。但我需要用特定颜色填充点之间的区域。

![带颜色的折线图](../Images/d21fa3309364404a0149a8fe37143209.png)

这就是我想要实现的。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:50:49.077

在当前版本中，LineGraphView 的背景颜色是硬编码的。

如果要更改颜色，则必须在源代码中进行更改。因此，请查看 Github 的源代码并根据您的需要进行修改。

这是您需要修改的行： [https ://github.com/jjoe64/GraphView/blob/master/src/com/jjoe64/graphview/LineGraphView.java#L25](https://github.com/jjoe64/GraphView/blob/master/src/com/jjoe64/graphview/LineGraphView.java#L25)

# android - Android AlarmManager 立即生效，为什么呢？

> ID：14494714
> 
> 赞同：0
> 
> 时间：2013-01-24T05:41:27.777
> 
> 标签：android

我正在学习在 Android 中使用 AlarmManager。我在谷歌上找例子，我发现[stackoverflow.com](https://stackoverflow.com/questions/4459058/alarm-manager-example) 我有一堂课

```
public class Alarm extends BroadcastReceiver 
{    
     @Override
     public void onReceive(Context context, Intent intent) 
     {   
         PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
         PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "TESTTEST");
         wl.acquire();

         // Put here YOUR code.
         Toast.makeText(context, "Alarm !!!!!!!!!!", Toast.LENGTH_LONG).show(); // For example

         wl.release();
     }

 public void SetAlarm(Context context)
 {
     AlarmManager am=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
     Intent i = new Intent(context, Alarm.class);
     PendingIntent pi = PendingIntent.getBroadcast(context, 0, i, 0);
     am.set(AlarmManager.RTC, 1000 * 10 , pi); // Millisec * Second * Minute    
 }

 public void CancelAlarm(Context context)
 {
     Intent intent = new Intent(context, Alarm.class);
     PendingIntent sender = PendingIntent.getBroadcast(context, 0, intent, 0);
     AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
     alarmManager.cancel(sender);
 }
} 
```

还有我的活动

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        alarm = new Alarm();
        alarm.SetAlarm(getApplicationContext());

    } 
```

我从 stackoverflow.com 上的其他帖子中获得了这个示例代码 为什么 Toask ALARM ！！！立即显示？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T05:45:38.307

***如果时间发生在过去，将立即触发警报。如果这个 Intent 调度已经有一个警报（两个 Intent 的相等性由 filterEquals(Intent) 定义），那么它将被删除并替换为这个。***

如果您希望在 1000 * 10 之后发出警报，请使用 System. `System.currentTimeMillis()+1000*10`;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T07:57:17.667

10秒，最好用这个...

```
am.set(AlarmManager.ELAPSED_REALTIME_WAKEUP,
            SystemClock.elapsedRealtime() + 10*1000, pi); 
```

# google-app-engine - 如何在部署后浏览和发现 Cloud Endpoints 公开的 REST API

> ID：14494719
> 
> 赞同：2
> 
> 时间：2013-01-24T05:41:49.777
> 
> 标签：google-app-engine, google-cloud-endpoints

当我将项目部署到谷歌应用引擎时，如何发现 Cloud Endpoints 公开的 API，例如 myapp.appspot.com

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:04:04.730

最简单的方法是查看 APIs Explorer: `https://myapp.appspot.com/_ah/api/explorer`，它将列出您的应用程序提供的 API（包括发现 API 本身）。您也可以在 Explorer 中试验 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T11:11:20.717

下面是另一种很好的测试方法，它既可以在部署的 API 上使用，也可以在本地主机上运行的 API 上使用： [https://developers.google.com/apis-explorer/?base=https://yourAppName。 appspot.com/_ah/api#p/yourAPIName/v1/](https://developers.google.com/apis-explorer/?base=https://yourAppName.appspot.com/_ah/api#p/yourAPIName/v1/)

请记住在 localhost 上使用它时将“base = https://...”更改为 http://localhost:8888....（或您使用的任何端口），您当然必须将 yourAppName 和 yourAPIName 替换为为您的项目正确输入

# java - 继承和私有方法

> ID：14494721
> 
> 赞同：0
> 
> 时间：2013-01-24T05:41:56.140
> 
> 标签：java, inheritance

给定以下代码块：

```
public class Trial {
    public static void main (String[] args){
        B obj = new B();
        obj.doMethod(); #prints "From A".
    }
}

class A {
    private void method(){System.out.print("from A");}
    public void doMethod(){method();}
}

class B extends A {
    public void method(){System.out.print("from B");}
    public void doMethod(){super.doMethod();}
} 
```

事实证明，调用了类 A 中的 method()。为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T05:43:31.063

您以这种方式明确实现它。`super`从基类调用方法`A`

```
public void doMethod(){super.doMethod();} 
```

所以方法链是这样的：

```
B.doMethod() -> A.doMethod() -> A.method() -> "from A" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T05:54:03.970

我认为您的问题是如果 in`class A` `private void method(){System.out.print("from A");}`是私有的，那么为什么要在`class B`.

答案很简单你不能打电话`method()`从任何其他类中调用 A 类。但是你可以用它自己的对象来调用它。

当您调用`super.doMethod();`then 它的 super 函数并且`method()`是它自己的方法时，它可以调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T06:04:02.340

A 类中的 method() 是私有的，私有方法不能被覆盖。并且在覆盖时最好使用@Override 注释。

```
class B extends A {

    @Override
    public void method(){System.out.print("from B");} // Compile error
} 
```

如果您将方法更改为静态方法，也会发生类似的事情。

```
class A {
    public static void method(){System.out.print("from A");}
}

class B extends A {
    public static  void method(){System.out.print("from B");}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T05:46:02.480

**您使用super**关键字调用 doMethod 。这意味着它将调用父实现更多关于[超级关键字](http://docs.oracle.com/javase/tutorial/java/IandI/super.html "这里")

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T05:56:14.257

您的代码提供了简单的对象创建 (B obj = new B();) 和使用 super 的调用。Super 与其他人提到的父类一样使用。如果您尝试更有趣的 (A obj = new B();) 之类的方法，情况可能会有所不同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-24T05:44:17.573

因为，见下文：

```
class B extends A {
    public void method(){System.out.print("from B");}
    public void doMethod(){super.doMethod();}
} 
```

在B 类的doMethod() 中，您使用super.doMethod() 调用A 类的doMethod()。所以很明显它是在打印 Class A 的 doMethod()。

# android - Android Universal Image Loader 按 id 缓存

> ID：14494723
> 
> 赞同：0
> 
> 时间：2013-01-24T05:42:07.353
> 
> 标签：android, universal-image-loader

我正在使用 NOSTRA 的[通用图像加载器](https://github.com/nostra13/Android-Universal-Image-Loader)库，并且启用了内存缓存。似乎使用 displayImage() 方法中设置的 URI 作为键来缓存位图。作为一种解决方法，我创建了另一个 HashMap，其中包含图像的 URI，并以唯一的 id 作为键与之关联。原因是 id 值也用于在其他地方加载数据，因此每个图像的值都是唯一的。

那么有没有办法将缓存位图的键更改为 URI 以外的其他内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:14:13.297

位图通过键模式**[imageUrl]_[width]x[height]**缓存在内存缓存中。在当前的 lib 版本 (1.7.0) 中无法更改此模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T06:20:05.727

@NOSTRA：我们可以这样做吗。而不是在生成缓存键时传递 [imageUrl]_[width]x[height] 我们可以只传递缓存键的唯一 ID。

# java - 测试需要 UserTransaction 的方法时出现 NameNotFoundException

> ID：14494724
> 
> 赞同：0
> 
> 时间：2013-01-24T05:42:11.673
> 
> 标签：java, jdbc, jboss, junit

我在进行一些数据插入时检索 UserTransaction，并且在 jboss 中运行应用程序时代码工作正常。然而，当使用 Ecpise 运行时，它在 JUnit 测试中失败了

```
javax.naming.NameNotFoundException: Name java:comp is not bound in this Context. 
```

我的交易代码如下

```
public static UserTransaction getUserTransation() throws CommonServiceException{
        Context context = null;
         UserTransaction ut = null;
        try {
            context = new InitialContext();
            ut = (UserTransaction)
            context.lookup("java:comp/UserTransaction");
        } catch (NamingException e) {
            throw new CommonServiceException(XMLReader.getErrorCode("Connector:getUserTransation"), e.getMessage(), e);
        }

          return ut;
    } 
```

它找不到 java:comp。我应该在我的 Junit 测试课程中专门做些什么来让它正常工作吗？

**添加：**

我将以下代码添加到测试类中，但没有给出上述错误。但是后来在提交说没有事务时失败了。

```
 ic = new InitialContext();

            ic.createSubcontext("java:");
            ic.createSubcontext("java:comp");
            ut = new UserTransactionImpl();  
            ic.bind("java:comp/UserTransaction",ut); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:59:06.910

我不认为你可以通过创建一个新的 UserTransactionImpl 来解决这个问题。更好的方法可能是创建一个模拟的 UserTransaction 实现，然后将其绑定*到*jndi。

您当前绑定的可能取决于容器外无法使用的其他“魔法”

# javafx - 在 javafx 中获取 menuitem 快捷操作

> ID：14494728
> 
> 赞同：0
> 
> 时间：2013-01-24T05:42:31.017
> 
> 标签：javafx

我的代码如下：

```
 public static int mShortcut=50;

 @FXML private void OnSignIn(ActionEvent event )
 {

      setShortcut(101);
      CheckShortCut();

 }
 public void setShortcut(int shortcut) 
{
     mShortcut=shortcut;  
     mMenuItemProdType.getAccelerator();
     CheckShortCut();

}
 public  void CheckShortCut()
{
    switch(mShortcut)
    {
        case 101:
             System.out.println("Enter in 3 Case");

             mMenuItemProdType.setAccelerator(new KeyCodeCombination(KeyCode.T, KeyCombination.CONTROL_DOWN, KeyCodeCombination.SHORTCUT_DOWN));
             break;
        case 50:
              System.out.println("Enter in 50 Case");

             mMenuItemProdType.setAccelerator(null);
            break;
         default:
             mMenuItemProdType.setAccelerator(null);
             break;
    }

} 
```

我的要求用户如果没有登录就无法访问快捷键，所以在 OnSignIn 我放了两个方法 setShortcut(101); 和 CheckShortCut(); 但是在上面的代码中登录后我无法获得快捷方式事件所以知道如何解决它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:03:08.733

我通过禁用菜单项解决了这个问题。

```
@FXML private MenuItem signMenuItem;
@FXML private MenuItem openMenuItem;
@FXML private MenuItem saveMenuItem;

@FXML
private void OnSignIn(ActionEvent event) {
    if (sign("admin", "1234")) {
        openMenuItem.setDisable(false);
        saveMenuItem.setDisable(false);
    }
}

private boolean sign(String name, String pass) {
    // do sign in
    return true;
}
@Override
public void initialize(URL fxmlFileLocation, ResourceBundle resources) {
    this.signMenuItem.setAccelerator(new KeyCodeCombination(KeyCode.ENTER, KeyCombination.CONTROL_DOWN, KeyCombination.SHORTCUT_DOWN));
    this.openMenuItem.setAccelerator(new KeyCodeCombination(KeyCode.O, KeyCombination.CONTROL_DOWN, KeyCombination.SHORTCUT_DOWN));
    this.saveMenuItem.setAccelerator(new KeyCodeCombination(KeyCode.S, KeyCombination.CONTROL_DOWN, KeyCombination.SHORTCUT_DOWN));
    openMenuItem.setDisable(true);
    saveMenuItem.setDisable(true);
} 
```

# android - GCM - 永远不要在 Android 4.0 设备上输入 onMessage()

> ID：14494730
> 
> 赞同：1
> 
> 时间：2013-01-24T05:42:41.437
> 
> 标签：android, push-notification, google-cloud-messaging

我对 Android 开发不是很有经验，我会将 gcm 包含到现有应用程序中。到目前为止，我可以注册所有设备并收到registrationId。问题是，我从来没有在我的 Android 4.0 设备上输入 onMessage() 方法。我还使用 Galaxy Note 2 (Android 4.1) 进行了尝试，我可以在那里收到消息。我没有收到任何错误消息，我只是从不输入 onMessage()。

当我发送消息时，我总是得到一个 messageId，因此 gcm “接受”了该消息。但它永远不会交付给设备。

我怎样才能找出问题所在？？？提前致谢

GCMIntentService.java

```
public class GCMIntentService extends GCMBaseIntentService {

public GCMIntentService() {
    super("82........");
}

@Override
protected void onError(Context arg0, String error) {
    System.out.println("Not able to register or unregister because: "
            + error);

}

@Override
protected void onMessage(Context context, Intent intent) {

    String message = intent.getStringExtra("message");

    System.out.println("GCM DELIVERED MESSAGE TO DEVICE:" + message);
}

@Override
protected void onRegistered(Context arg0, String regId) {
    System.out.println("Device is registered  with RegisterId: " + regId);
}

@Override
protected void onUnregistered(Context arg0, String regId) {
    System.out.println("Device with RegisterId: " + regId
            + " has unregistered");
}

@Override
protected boolean onRecoverableError(Context context, String errorId) {
    System.out.println("Entered onRecoverableError");
    return super.onRecoverableError(context, errorId);
}
} 
```

我的清单.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.activities"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<permission
    android:name="com.example.activities.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />

<uses-permission android:name="com.example.activities.permission.C2D_MESSAGE" />
<!-- App receives GCM messages. -->
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<!-- GCM connects to Google Services. -->
<uses-permission android:name="android.permission.INTERNET" />
<!-- GCM requires a Google account. -->
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<!-- Keeps the processor from sleeping when a message is received. -->
<uses-permission android:name="android.permission.WAKE_LOCK" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <!-- Activity which is called first to decide which Activity comes next -->
    <activity
        android:name=".StartUp"
        android:label="@string/title_activity_start_up" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Login"
        android:label="@string/title_activity_login" >
    </activity>
    <activity
        android:name=".DisplayContent"
        android:label="@string/title_activity_display_content" >
    </activity>
    <activity
        android:name=".AllSigns"
        android:label="@string/title_activity_all_signs" >
    </activity>

    <receiver
        android:name="com.google.android.gcm.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

            <category android:name="com.example.activities" />
        </intent-filter>
    </receiver>

    <service android:name=".GCMIntentService" />

</application> 
```

我的第一个活动 (Startup.java) 的 onCreate() 中的代码

```
GCMRegistrar.checkDevice(this);
GCMRegistrar.checkManifest(this);
final String regId = GCMRegistrar.getRegistrationId(this);

if (regId.equals("")) {
System.out.println("Id ist leer, Device wird neu registriert");
GCMRegistrar.register(this, "825134311331");
} else {
System.out.println("This device is already registered");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:39:43.340

如果您通过 WIFI 尝试此操作，请确保端口 5228 没有被网络阻塞。这就是我解决这个问题的方法，我试图让它工作的时间比我想承认的要多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-22T19:02:29.570

确保 GCMIntentService 类位于清单中指定的包中

# google-apps-script - Google电子表格脚本将A列中包含“Hello”的单元格与B列中的相邻单元格合并

> ID：14494731
> 
> 赞同：7
> 
> 时间：2013-01-24T05:42:51.573
> 
> 标签：google-apps-script, google-sheets

我正在尝试将 A 列中包含某个单词的单元格（例如“Hello”）与右侧的单元格（B 列中）合并

例如`A4 = 'Hello'`，因此我想合并单元格 A4 和 B4。

到目前为止我有这个代码：

```
function formatCells() {

  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var s = ss.getSheetByName('Combined');
  var range = s.getDataRange()
  var values = range.getValues();

  for( var row = values.length -1; row >= 0; --row )
    if (values[row][1] == 'Hello')
      {s.getRange(row+1,1).mergeAcross();
}
} 
```

但是代码似乎根本没有做任何事情？那里的任何人都可以告诉我我做错了什么吗？

非常感谢您的关注。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-24T06:18:36.100

数组的索引为 0，因此 A 列的索引为 0 ...您应该简单地`values[row][0]` 在您的条件下使用。

要合并两个单元格，您需要获得一个像这样的 2 个单元格范围：

```
s.getRange(row+1,1,1,2).mergeAcross(); 
```

另请注意，由于合并方法不会合并内容，因此您将丢失 B 列中的值。不知道是不是你的问题...

# android - 问题在传感器更改时不显示画布对象

> ID：14494734
> 
> 赞同：0
> 
> 时间：2013-01-24T05:43:17.090
> 
> 标签：android, google-maps, canvas, android-mapview

我开发了一个地图应用程序，我想在地图屏幕的右上角显示指南针。指南针也准备好工作和地图，但是当我将两者放在一起时，它不显示指南针（我的意思是当我在自定义 mapview 类的调度绘制中绘制指南针时它会引发问题）

奇怪的是，我制作了两个画布对象 1\. 通过绘制路径（箭头） 2\. 此处显示的文本“N”显示其显示文本，但它不显示罗盘。

这是为了清楚起见的自定义 Mapview 类..

```
package com.Espiritos.Home.Map;

import java.util.Timer;
import java.util.TimerTask;

import org.mapsforge.android.maps.MapView;
import org.mapsforge.core.GeoPoint;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.LinearGradient;
import android.graphics.Paint;
import android.graphics.Path;
import android.graphics.Shader;
import android.util.AttributeSet;
import android.util.Log;
import android.view.MotionEvent;

import com.Espiritos.Utility.AppLog;

/**-----------------------------------------------------------------------------
Class Name: MyMapView
Created By: 704
Created Date:
Modified By: 
Modified Date: 
Purpose: All Listener and Canvas method are introduce in this class for map operation
-----------------------------------------------------------------------------*/
public class MyMapView extends MapView 
{   
    private float mfDirection = 0;
    private float[] mfRotateValue;
    private Paint mPntCompass = new Paint(Paint.ANTI_ALIAS_FLAG);
    private boolean mIsFirstDraw;

    /** ------------------------------------------------------------------------
    // LISTENER DEFINITIONS
    // ------------------------------------------------------------------------

     */
    /** Change listener for mapview*/
    public interface OnChangeListener
    {
        public void onChange(MapView view, GeoPoint newCenter, GeoPoint oldCenter, int newZoom, int oldZoom);
    }
    /** ------------------------------------------------------------------------
    // MEMBERS
    // ------------------------------------------------------------------------
    */
    private MyMapView mThis;

    @Override
    protected void onDraw(Canvas amcanvas) {

        super.onDraw(amcanvas);

    }

    private long mlEventsTimeout = 1500;//250L;     // Set this variable to your preferred timeout
    private boolean mIsTouched = false;
    private GeoPoint mLastCenterPosition;
    private int miLastZoomLevel;
    private Timer mChangeDelayTimer = new Timer();
    private MyMapView.OnChangeListener mChangeListener = null;

    private int miOldZoomLevel = -1;
    private OnClusterMapZoomListener onClusterMapZoomListener;

    /**-----------------------------------------------------------------------------
    Method Name: MyMapView(CONSTRUCTORS)
    Created By: 704
    Created Date:
    Modified By: 
    Modified Date: 
    Purpose: Get Context from base and use in operation
    -----------------------------------------------------------------------------*/
    public MyMapView(Context amcontx)
    {
        super(amcontx);
        init();
    }

    public MyMapView(Context amcontext, AttributeSet amAttrs)
    {
        super(amcontext, amAttrs);
        init();
    }

    public MyMapView(Context context, AttributeSet attrs, int defStyle)
    {
        super(context, attrs);
        init();
    }
    /**-----------------------------------------------------------------------------
    Method Name: init
    Created By: 704
    Created Date:
    Modified By: 
    Modified Date: 
    Purpose: get Mapcenter and Map ZoomLevel
    -----------------------------------------------------------------------------*/
    private void init()
    {
        mThis = this;
        mLastCenterPosition = this.getMapPosition().getMapCenter();
        miLastZoomLevel = this.getMapPosition().getZoomLevel();

        mPntCompass.setStyle(Paint.Style.FILL_AND_STROKE);
        mPntCompass.setStrokeWidth(4);
        mPntCompass.setColor(Color.GRAY);
        mPntCompass.setTextSize(30);
        mPntCompass.setAntiAlias(true);
        mPntCompass.setShader(new LinearGradient(0, 0, 0, getHeight(), Color.BLACK, Color.WHITE, Shader.TileMode.REPEAT));

        mIsFirstDraw = true;
    }

    /**-----------------------------------------------------------------------------
    Method Name: setOnChangeListener
    Created By: 704
    Created Date:
    Modified By: 
    Modified Date: 
    Purpose: Mapview change listener implementation 
    -----------------------------------------------------------------------------*/
    public void setOnChangeListener(MyMapView.OnChangeListener l)
    {
        mChangeListener = l;
    }

    /**-----------------------------------------------------------------------------
    Method Name: onTouchEvent
    Created By: 704
    Created Date:
    Modified By: 
    Modified Date: 
    Purpose: on touch event handling with motionEvent
    -----------------------------------------------------------------------------*/
    @Override
    public boolean onTouchEvent(MotionEvent ev)
    {       
        /** Set touch internal*/
        mIsTouched = (ev.getAction() != MotionEvent.ACTION_UP);

        return super.onTouchEvent(ev);
    }

    /**-----------------------------------------------------------------------------
    Method Name: computeScroll
    Created By: 704
    Created Date:
    Modified By: 
    Modified Date: 
    Purpose: scroll change counting by this method
    -----------------------------------------------------------------------------*/
    @Override
    public void computeScroll()
    {
        super.computeScroll();

        /**Check for change*/
        if (isSpanChange() || isZoomChange())
        {
            /** 
             * If computeScroll called before timer counts down 
               we should drop it and 
               start counter over again
             */
            resetMapChangeTimer();
        }
    }

    /**-----------------------------------------------------------------------------
    Method Name: resetMapChangeTimer
    Created By: 704
    Created Date:
    Modified By: 
    Modified Date: 
    Purpose: after scroll it get change the position, it getting new position update
    -----------------------------------------------------------------------------*/
    private void resetMapChangeTimer()
    {
        mChangeDelayTimer.cancel();
        mChangeDelayTimer = new Timer();
        mChangeDelayTimer.schedule(new TimerTask()
        {
            @Override
            public void run()
            {
                if (mChangeListener != null) mChangeListener.onChange(mThis, getMapPosition().getMapCenter(), mLastCenterPosition, getMapPosition().getZoomLevel(), miLastZoomLevel);
                mLastCenterPosition = getMapPosition().getMapCenter();
                miLastZoomLevel = getMapPosition().getZoomLevel();
            }
        }, mlEventsTimeout);
    }

    /**-----------------------------------------------------------------------------
    Method Name: isSpanChange
    Created By: 704
    Created Date:
    Modified By: 
    Modified Date: 
    Purpose: after scroll it get change the position, it getting new position update
    -----------------------------------------------------------------------------*/
    private boolean isSpanChange()
    {
        return !mIsTouched && !getMapPosition().getMapCenter().equals(mLastCenterPosition);
    }

    /**-----------------------------------------------------------------------------
    Method Name: isZoomChange
    Created By: 704
    Created Date:
    Modified By: 
    Modified Date: 
    Purpose: Get current zoom level
    -----------------------------------------------------------------------------*/
    private boolean isZoomChange()
    {
        return (getMapPosition().getZoomLevel() != miLastZoomLevel);
    }

    /**-----------------------------------------------------------------------------
    Method Name: dispatchDraw
    Created By: 704
    Created Date:
    Modified By: 
    Modified Date: 
    Purpose: This method is used to Draw Polygon in map
    -----------------------------------------------------------------------------*/
    @Override
    protected void dispatchDraw(Canvas canvas) {
        super.dispatchDraw(canvas);

        // Notify listener, if not null, that the zoom level changed
        if (getMapPosition().getZoomLevel() != miOldZoomLevel) {
            miOldZoomLevel = getMapPosition().getZoomLevel();
            if (onClusterMapZoomListener != null) {
                onClusterMapZoomListener.onZoomLevelChanged(miOldZoomLevel);
            }
        }

        if (!mIsFirstDraw) 
        {

                Path mPathArrow = new Path();
                mPathArrow.moveTo(0, -50);
                mPathArrow.lineTo(-20, 40);
                mPathArrow.lineTo(0, 30);
                mPathArrow.lineTo(20, 40);
                mPathArrow.close();

                Paint mPntText = new Paint(Paint.ANTI_ALIAS_FLAG);
                mPntText.setAntiAlias(true);
                mPntText.setTextSize(30);
                mPntText.setColor(Color.BLACK);
                mPntText.setStyle(Paint.Style.FILL);

                int miCanvasWidth = canvas.getWidth();
                int miCanvasHeight = canvas.getHeight();
                int miCenterX = miCanvasWidth / 2;
                int miCenterY = miCanvasHeight / 2;

                canvas.translate(miCanvasWidth-miCanvasWidth/10, miCanvasHeight/10);
                if (mfRotateValue != null) {
                    canvas.rotate(-mfRotateValue[0]);
                }
                canvas.drawPath(mPathArrow, mPntCompass);
                canvas.drawText("N", miCanvasWidth-miCanvasWidth/10, miCanvasHeight/10, mPntText);

        }

    }

    public void updateDirection(float dir,float[] mevent)
    {
        mIsFirstDraw = false;
        mfDirection = dir;
        this.mfRotateValue = mevent;
        Log.e(VIEW_LOG_TAG, "direction"+mfDirection);
        invalidate();
    }

    /**-----------------------------------------------------------------------------
    Method Name: getOnClusterMapZoomListener
    Created By: 704
    Created Date:
    Modified By: 
    Modified Date: 
    Purpose: get Map Zoomlistner implemented
    -----------------------------------------------------------------------------*/
    public OnClusterMapZoomListener getOnClusterMapZoomListener() 
    {
        return onClusterMapZoomListener;
    }
    /**-----------------------------------------------------------------------------
    Method Name: setOnClusterMapZoomListener
    Created By: 704
    Created Date:
    Modified By: 
    Modified Date: 
    Purpose: set Map Zoomlistner implemented
    -----------------------------------------------------------------------------*/
    public void setOnClusterMapZoomListener(
            OnClusterMapZoomListener onClusterMapZoomListener)
    {
        this.onClusterMapZoomListener = onClusterMapZoomListener;
    }

} 
```

注意：我已经为此制作了演示应用程序，它的显示效果很好....
2：我在 samsun 10 英寸平板电脑上运行的实时应用程序，但在三星 s3 中它不是...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:49:44.797

我已经通过将 Manifest 文件 minSdkversion=3 更改为 8 及其解决方案解决了这个问题，它的工作令人惊讶，但仍然不知道其背后的逻辑......如果你知道然后让我知道它为什么会发生

# html - 将 div 放在具有相同高度的 100% 宽度表的左侧

> ID：14494735
> 
> 赞同：1
> 
> 时间：2013-01-24T05:43:17.200
> 
> 标签：html, css, height

我想在表格左侧放置一个单选按钮（或任何其他元素），但让按钮垂直居中。如果我知道这些表都将是相同的大小，我可以使用相对定位。但是，我不知道这一点。[这个 jsfiddle](http://jsfiddle.net/x34nc/)接近我需要的，但是，左 div 需要具有相同的高度（用于垂直对齐），并且它还需要位于边距中。这个[jsfiddle](http://jsfiddle.net/x34nc/1/)更接近我正在寻找的东西，但似乎有点 hacky 并且不允许不同高度的表格。我可以使用没有 javascript 的 HTML/CSS 来完成这项工作吗？

这是我正在查看用于完成此操作的 HTML：

```
<div class="item">
    <div class="one"><input type="radio" name="group"/></div>
    <div class="two">
    <table>
        <tr><td>Data</td><td>More Data</td></tr>
        <tr><td>another</td><td>row</td></tr>
        <tr><td>of ...</td><td>you guessed it</td></tr>
        <tr><td>just</td><td>more data</td></tr>
    </table>
    </div>
</div> 
```

和 CSS：

```
table {border-collapse:collapse;width:100%;}
td {border:1px solid black;padding:10px;}
.item {margin:10px; padding:10px; background:red;}
.two {background:blue;}

/* customization */
.one {background:yellow;text-align:center;width:20px;display:table-cell;vertical-align:middle;}
.two {margin-left:20px;}

/* hacky */
.one {height:50px;position:relative;top:55px;}
.two {margin-top:-50px;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:04:25.333

垂直对齐仅适用于表格单元格内或内联元素之间。因此，要么使用具有一行和两个单元格的表格，`.one`要么`.two`使用 CSS 将 div 转换为表格单元格：

```
.one, .two {display:table-cell;} 
```

**[Demo](http://jsfiddle.net/x34nc/2/)** *（只在firefox中测试过，没有安装其他浏览器，希望能用）*

# iphone - UITableView 在滚动操作之前不会出现

> ID：14494737
> 
> 赞同：0
> 
> 时间：2013-01-24T05:43:27.090
> 
> 标签：iphone, objective-c, uitableview, afnetworking

这种东西我已经做了一百次了，但这次我很不安：

我有一个带有自定义 UITableViewCell 的 UITableView，它通过 AFNetworking [-setImageWithURLRequest:] 加载图片；当我运行应用程序时，表格视图的内容不会出现。如果我等待，8 秒后，内容会出现，但如果我进行滚动等交互，内容会立即出现。这么奇怪。

我已经尝试用这篇文章解决这个问题：http: [//blog.slaunchaman.com/2011/08/14/cocoa-touch-circumventing-uitableviewcell-redraw-issues-with-multithreading/](http://blog.slaunchaman.com/2011/08/14/cocoa-touch-circumventing-uitableviewcell-redraw-issues-with-multithreading/)但没有成功。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T06:03:27.657

听起来您正在从主线程（UI 线程）更新表的内容，而没有看到任何代码，这将是我最好的猜测。

# ektron - Ektron 工作区

> ID：14494740
> 
> 赞同：2
> 
> 时间：2013-01-24T05:43:34.853
> 
> 标签：ektron

我需要开发一个应用程序来提取 Ektron 工作区的内容选项卡中的所有内容，并且我还必须保留文件夹的树结构（分类、集合、表单等）。当我单击内容时，我需要获取内容ID 也在后面的代码中。我需要在一个函数中完成所有这些。

我在工作区中使用内容块小部件的概念尝试了这个要求。当我们拖动该小部件并对其进行编辑时，会弹出一个窗口，并以树状结构显示工作区的文件夹。但是当我创建一个 aspx 页面时，将相同代码和我浏览该页面我没有得到所有内容的树结构。只有主选项卡（文件夹、分类和搜索）是可见的。然后我在 aspx 页面中拖动用户控件。但它也不起作用。

那么我将如何解决上述问题。

我可以使用 API 代码从根工作区中提取树结构中的所有内容吗？那么任何人都可以提供 API 代码来解决吗？

请任何人回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:03:08.893

假设您使用的是 8.6，请从这里开始： [http ://reference.ektron.com/developer/framework/content/contentmanager/getlist.aspx](http://reference.ektron.com/developer/framework/content/contentmanager/getlist.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T03:41:11.693

### 更新：

我想我第一次误读了你的问题。请允许我稍微扩展一下我的答案。我对 Web 服务的原始回答假设您正在从某种“表示层”呈现内容树——不同的网站、控制台应用程序或 WPF/WinForms 应用程序等。

您可以通过以下方式获得递归文件夹结构：

```
private FolderData GetFolderWithChildren(long folderId)
{
    var folderApi = new Ektron.Cms.API.Folder(); 
    var folderData = folderApi.GetFolder(folderId);

    // This next method is marked as obsolete in v9.0;
    // a newer overload is available in v9.0, but I
    // don't know if it's available in v8.0
    folderData.ChildFolders = folderApi.GetChildFolders(folderId, true);
} 
```

我对你到底想要完成什么感到有点困惑。如果您想以图形方式显示整个树结构，您是否尝试过从内容小部件的编辑视图中获取代码和标记并将其用于非编辑视图？

我必须说，您*“我需要在一个函数中完成所有这些”*的要求让我有点担心。工作区内容树可以很快变得非常大。如果您尝试加载所有文件夹*、*所有分类法*和*所有集合等。那么用户可能会等待很长时间才能加载页面，并且您可能会遇到超时问题。

### -- 原始答案 --

Ektron v8.0 没有 3 层选项，这太糟糕了，因为这确实会让您的工作变得更轻松。在 v8.0 中，有一些 ASMX Web 服务可供您参考，包括：

*   /workarea/webservices/content.asmx
*   /workarea/webservices/webserviceapi/user/user.asmx

不止于此；浏览 /workarea/ 中的文件夹以查看可用的内容。

我已经有一段时间没有使用这些服务了，所以我有点生疏了......

假设您添加了对我上面列出的这两个服务的引用，并将它们命名为 ContentService 和 UserService。您要做的第一件事是设置身份验证标头。然后，您可以像旧的遗留 API 一样调用服务方法。

```
 var contentApi = new ContentService.Content();
    contentApi.AuthenticationHeaderValue = new ContentService.AuthenticationHeader();
    contentApi.AuthenticationHeaderValue.Username = username;
    contentApi.AuthenticationHeaderValue.Password = password;
    contentApi.AuthenticationHeaderValue.Domain = domain;

    var userApi = new UserService.User();
    userApi.AuthenticationHeaderValue = new UserService.AuthenticationHeader();
    userApi.AuthenticationHeaderValue.Username = username;
    userApi.AuthenticationHeaderValue.Password = password;
    userApi.AuthenticationHeaderValue.Domain = domain;

    var ud = userApi.GetUserbyUsername("jimmy456");

    long folderID = 85;
    bool recursive = true;
    ContentData[] folderContent = contentApi.GetChildContent(folderID, recursive, "content_id"); 
```

# eclipse - m2e shade eclipse“项目主工件不存在”

> ID：14494743
> 
> 赞同：8
> 
> 时间：2013-01-24T05:43:56.613
> 
> 标签：eclipse, maven-2, m2e, maven-shade-plugin

我正在尝试制作一个部署包，它将我的 Maven 模块的所有依赖项捆绑在一起，这些依赖项与 Eclipse 中的另一个 Maven 项目具有依赖关系。

我的 pom.xml 中有这个

```
<modelVersion>4.0.0</modelVersion>
<groupId>com.my.proj</groupId>
<artifactId>AAA</artifactId>
<version>0.0.2-SNAPSHOT</version>
<name>btc</name>
<dependencies>
    <dependency>
        <groupId>com.another.proj</groupId>
        <artifactId>BBB</artifactId>
        <version>1.4-SNAPSHOT</version>
    </dependency>
</dependencies>

<build>
    <plugins>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-shade-plugin</artifactId>
            <version>1.6</version>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>shade</goal>
                    </goals>
                    <configuration>
                        <transformers>
                            <transformer
                                implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                                <mainClass>com.group.id.Launcher1</mainClass>
                            </transformer>
                        </transformers>
                    </configuration>
                </execution>
            </executions>
        </plugin>

    </plugins>
</build> 
```

我在 Eclipse 中使用“m2 Maven Build”，目标是“org.apache.maven.plugins:maven-shade-plugin:shade”，并勾选“Resolve Workspace artifacts”。

它失败了

```
--- maven-shade-plugin:1.6:shade (default-cli) @ AAA ---
[ERROR] The project main artifact does not exist. This could have the following
[ERROR] reasons:
[ERROR] - You have invoked the goal directly from the command line. This is not
[ERROR]   supported. Please add the goal to the default lifecycle via an
[ERROR]   <execution> element in your POM and use "mvn package" to have it run.
[ERROR] - You have bound the goal to a lifecycle phase before "package". Please
[ERROR]   remove this binding from your POM such that the goal will be run in
[ERROR]   the proper phase. 
```

此时我没有主意了。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-02-19T15:26:50.563

> [错误] 项目主工件不存在。这可能有以下内容

我们最近遇到了这个问题。为我们解决的问题是*不做*，`mvn shade:shade`而是使用：

```
mvn package 
```

这会在运行 shade 插件*之前进行*额外的编译和打包工作，因此主类在类路径中可用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-24T19:20:46.973

阴影插件正在尝试将项目的工件包含在阴影 JAR 中。由于它（尚）不存在，因此您会收到此错误。您需要先构建/打包项目工件（例如，通过将阴影目标附加到打包阶段）

如果您没有任何项目工件要包含在阴影 JAR 中，您可以添加一个*排除*节点来删除项目的工件。

这是一个例子：

```
<plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-shade-plugin</artifactId>
        <version>1.6</version>
        <executions>
            <execution>
                <phase>package</phase>
                <goals>
                    <goal>shade</goal>
                </goals>
                <configuration>
                    <transformers>
                        <transformer
                            implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                            <mainClass>com.group.id.Launcher1</mainClass>
                        </transformer>
                    </transformers>
                    <excludes>
                        <exclude>com.my.proj:AAA</exclude>
                    </excludes>
                </configuration>
            </execution>
        </executions>
    </plugin> 
```

# android - android touch未显示在画布中

> ID：14494744
> 
> 赞同：0
> 
> 时间：2013-01-24T05:43:59.913
> 
> 标签：android, android-canvas

我刚开始使用触摸事件。所以我搜索了一个例子，发现了这个[http://www.vogella.com/articles/AndroidTouch/article.html](http://www.vogella.com/articles/AndroidTouch/article.html) .. 该教程很棒，但有一件事是当我运行代码时。我向各个方向移动手指，但它没有显示在卡瓦斯中。我的意思是它没有画出什么东西。

这是我的代码：

```
public class SingleTouchEventView extends View {
    private Paint paint = new Paint();
    private Path path = new Path();
    public SingleTouchEventView(Context context, AttributeSet attrs) {
        super(context, attrs);
        paint.setAntiAlias(true);
        paint.setStrokeWidth(6f);
        paint.setColor(Color.BLACK);
        paint.setStyle(Paint.Style.STROKE);
        paint.setStrokeJoin(Paint.Join.ROUND);

    }

    @Override
    protected void onDraw(Canvas canvas) {
       canvas.drawPath(path,paint);

    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float eventX = event.getX();
        float eventY = event.getY();

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                path.moveTo(eventX, eventY);
                return true;
            case MotionEvent.ACTION_MOVE:
                path.lineTo(eventX, eventY);
                break;
            case MotionEvent.ACTION_UP:
                // nothing to do
                break;
            default:
                return false;
        }

        // Schedules a repaint.
        invalidate();
        return true;
    }
} 
```

和我的主要活动

```
public class SingleTouchActivity extends Activity {
    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(new SingleTouchEventView(this,null));
    }
} 
```

我在这里想念什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:01:21.093

尝试如下：

```
private void touch_up()
{
    path.lineTo(m_X, m_Y);
    // commit the path to our offscreen
    canvas.drawPath(m_path, m_paint);
    // kill this so we don't double draw
    path.reset();
}
private void touch_start(float p_x, float p_y)
{
    path.reset();
    path.moveTo(p_x, p_y);
    m_X = p_x;
    m_Y = p_y;
}   
private void touch_move(float p_x, float p_y)
{
    float m_dx = Math.abs(p_x - m_X);
    float m_dy = Math.abs(p_y - m_Y);
    if (m_dx >= TOUCH_TOLERANCE || m_dy >= TOUCH_TOLERANCE)
    {
        m_path.quadTo(m_X, m_Y, (p_x + m_X) / 2, (p_y + m_Y) / 2);
        m_X = p_x;
        m_Y = p_y;          
        m_pathDrawn = true;
    }       
} 
```

对于`onTouchEvent`：

```
@Override
public boolean onTouchEvent(MotionEvent p_event)
{
    float m_x = p_event.getX();
    float m_y = p_event.getY();     
    switch (p_event.getAction())
    {
        case MotionEvent.ACTION_DOWN:
            touch_start(m_x, m_y);
            invalidate();                   
            break;
        case MotionEvent.ACTION_MOVE:
            touch_move(m_x, m_y);
            invalidate();
            break;
        case MotionEvent.ACTION_UP:
            touch_up();
            invalidate();                   
            break;
    }
    return true;
} 
```

我希望它会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T06:00:51.907

试试这样

```
@Override
public boolean onTouchEvent(MotionEvent ev) {
    // Let the ScaleGestureDetector inspect all events.
    mScaleDetector.onTouchEvent(ev);

    final int action = ev.getAction();
    switch (action & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN: {
            final float x = ev.getX();
            final float y = ev.getY();
            mLastTouchX = x;
            mLastTouchY = y;
            mActivePointerId = ev.getPointerId(0);
            break;
        }

        case MotionEvent.ACTION_MOVE: {
            final int pointerIndex = ev.findPointerIndex(mActivePointerId);
            final float x = ev.getX(pointerIndex);
            final float y = ev.getY(pointerIndex);

            // Only move if the ScaleGestureDetector isn't processing a gesture.
            if (!mScaleDetector.isInProgress()) {
                final float dx = x - mLastTouchX;
                final float dy = y - mLastTouchY;

                mPosX += dx;
                mPosY += dy;

                invalidate();
            }

            mLastTouchX = x;
            mLastTouchY = y;

            break;
        }

        case MotionEvent.ACTION_UP: {
            mActivePointerId = INVALID_POINTER_ID;
            break;
        }

        case MotionEvent.ACTION_CANCEL: {
            mActivePointerId = INVALID_POINTER_ID;
            break;
        }

        case MotionEvent.ACTION_POINTER_UP: {
            final int pointerIndex = (ev.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) 
                    >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;
            final int pointerId = ev.getPointerId(pointerIndex);
            if (pointerId == mActivePointerId) {
                // This was our active pointer going up. Choose a new
                // active pointer and adjust accordingly.
                final int newPointerIndex = pointerIndex == 0 ? 1 : 0;
                mLastTouchX = ev.getX(newPointerIndex);
                mLastTouchY = ev.getY(newPointerIndex);
                mActivePointerId = ev.getPointerId(newPointerIndex);
            }
            break;
        }
    }    
    return true;
} 
```

有关更多信息，请查看此[链接](https://stackoverflow.com/questions/5743328/image-in-canvas-with-touch-events)

# github - 如何将图像添加到 GitHub 上的 README.md？

> ID：14494747
> 
> 赞同：2731
> 
> 时间：2013-01-24T05:44:06.837
> 
> 标签：github, markdown, github-flavored-markdown, readme

最近我加入了**GitHub**。我在那里主持了一些项目。

我需要在我的自述文件中包含一些图像。我不知道该怎么做。

我对此进行了搜索，但我得到的只是一些链接，这些链接告诉我“在网络上托管图像并在 README.md 文件中指定图像路径”。

有没有办法在不将图像托管在任何第三方网络托管服务上的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2790
> 
> 时间：2013-01-24T05:46:32.903

试试这个降价：

```
![alt text](http://url/to/img.png) 
```

如果图像存储在您的存储库中，我认为您可以直接链接到图像的原始版本。IE

```
![alt text](https://github.com/[username]/[reponame]/blob/[branch]/image.jpg?raw=true) 
```

* * *

## 回答 #2

> 赞同：741
> 
> 时间：2015-10-08T03:18:44.150

您还可以使用相对路径，例如

```
![Alt text](relative/path/to/img.jpg?raw=true "Title") 
```

还可以尝试以下所需的`.fileExtention`：

```
![plot](./directory_1/directory_2/.../directory_n/plot.png) 
```

* * *

## 回答 #3

> 赞同：355
> 
> 时间：2014-10-28T06:03:35.527

*   您可以创建一个新问题
*   上传（拖放）图像到它
*   复制图像 URL 并将其粘贴到您的 README.md 文件中。

这是一个详细的youtube视频，详细解释了这一点：

[https://www.youtube.com/watch?v=nvPOUdz5PL4](https://www.youtube.com/watch?v=nvPOUdz5PL4)

* * *

## 回答 #4

> 赞同：224
> 
> 时间：2016-07-08T20:07:04.563

# 它比这简单得多。

只需将您的图像上传到存储库根目录，并链接到不带任何路径的文件名，如下所示：

```
![Screenshot](screenshot.png) 
```

* * *

## 回答 #5

> 赞同：117
> 
> 时间：2016-01-30T04:45:29.037

您还可以使用简单的**HTML 标签**添加图像：

```
<p align="center">
  <img src="your_relative_path_here" width="350" title="hover text">
  <img src="your_relative_path_here_number_2_large_name" width="350" alt="accessibility text">
</p> 
```

* * *

## 回答 #6

> 赞同：73
> 
> 时间：2017-03-08T17:13:28.980

许多发布的解决方案都不完整或不符合我的口味。

*   像 imgur 这样的外部 CDN 为链添加了另一个工具。嗯。
*   在问题跟踪器中创建一个虚拟问题是一种 hack。它会造成混乱并使用户感到困惑。将此解决方案迁移到 fork 或从 GitHub 迁移是一件痛苦的事情。
*   使用 gh-pages 分支会使 URL 变得脆弱。另一个在维护 gh-page 的项目上工作的人可能不知道外部的东西取决于这些图像的路径。gh-pages 分支在 GitHub 上具有特定的行为，这对于托管 CDN 图像不是必需的。
*   在版本控制中跟踪资产是一件好事。随着项目的发展和变化，它是一种更可持续的方式来管理和跟踪多个用户的变化。
*   如果图像适用于软件的特定版本，则最好链接不可变图像。这样，如果稍后更新映像以反映对软件的更改，任何阅读该修订版自述文件的人都会找到正确的映像。

[受此要点](https://gist.github.com/joncardasis/e6494afd538a400722545163eb2e1fa5)启发，我首选的解决方案是使用具有**特定修订**的永久链接的**资产分支**。

 **```
git checkout --orphan assets
git reset --hard
cp /path/to/cat.png .
git add .
git commit -m 'Added cat picture'
git push -u origin assets
git rev-parse HEAD  # Print the SHA, which is optional, you'll see below. 
```

为这个版本的图像构建一个“永久链接”，并将其包装在 Markdown 中。

> [然而，手动查找提交 SHA 是不方便的，因此作为该 help.github 页面](https://help.github.com/en/github/managing-files-in-a-repository/getting-permanent-links-to-files#press-y-to-permalink-to-a-file-in-a-specific-commit)所述，作为快捷方式按 Y 到特定提交中文件的永久链接。

要始终在资产分支上显示最新图像，请使用 blob URL：

```
https://github.com/github/{repository}/blob/assets/cat.png 
```

（来自同一 GitHub 帮助页面[文件视图显示分支上的最新版本](https://help.github.com/en/github/managing-files-in-a-repository/getting-permanent-links-to-files#file-views-show-the-latest-version-on-a-branch)）

* * *

## 回答 #7

> 赞同：34
> 
> 时间：2017-06-14T10:01:01.720

**将图像 ( **image.png )****提交**到文件夹 ( **myFolder ) 中，并在****README.md**中添加以下行：**

 ****`![Optional Text](../master/myFolder/image.png)`**

* * *

## 回答 #8

> 赞同：33
> 
> 时间：2015-09-25T20:48:40.187

> 我需要在我的自述文件中包含一些图像。我不知道该怎么做。

我创建了一个小向导，允许您为 GitHub 存储库的自述文件创建和自定义简单的图像库：请参阅[ReadmeGalleryCreatorForGitHub](http://felixhayashi.github.io/ReadmeGalleryCreatorForGitHub/)。

该向导利用了 GitHub 允许 img 标签出现在`README.md`. 此外，该向导还利用了流行的技巧，即通过将图像拖放到问题区域中来将图像上传到 GitHub（如本主题的答案之一中所述）。

[![在此处输入图像描述](../Images/8e886c2c05b7bd3c5ce5a899a38eba08.png)](https://i.stack.imgur.com/sMUbB.png)

* * *

## 回答 #9

> 赞同：29
> 
> 时间：2021-10-11T08:46:57.090

您还可以像任何其他格式一样在降价文件中插入[动画 SVG 图像。](https://developer.mozilla.org/en-US/docs/Web/SVG/SVG_animation_with_SMIL "MDN 网络文档：带有 SMIL 的 SVG 动画")
它可以是 GIF 图像的一个很好的替代品。

```
![image description](relative/path/in/repository/to/image.svg)
OR
<img src="relative/path/in/repository/to/image.svg" width="128"/> 
```

示例（假设图像在`assets`存储库的目录中）：

```
![My animated logo](assets/my-logo.svg) 
```

结果：

[![](../Images/1af75f2034f84cb29c5f2e244bd2f23d.png)](https://raw.githubusercontent.com/mahozad/mahozad/master/logo.svg) 

* * *

## 回答 #10

> 赞同：23
> 
> 时间：2016-10-12T19:02:31.070

*   *创建有关添加图像的问题*
*   *通过拖放或文件选择器添加图像*
*   *然后复制图片源*

*   **现在添加`![alt tag](http://url/to/img.png)`到您的 README.md 文件中**

完毕！

或者，您可以使用一些图像托管站点`imgur`，例如获取它的 url 并将其添加到您的 README.md 文件中，或者您也可以使用一些静态文件托管。

[示例问题](https://github.com/abe312/colors.js/issues/1)

* * *

## 回答 #11

> 赞同：22
> 
> 时间：2016-01-21T16:09:00.920

# 基本语法

```
![myimage-alt-tag](url-to-image) 
```

## 这里：

1.  my-image-alt-tag ：如果未显示图像，将显示的文本。
2.  url-to-image ：无论您的图像资源是什么。图片的URI

## 例子：

```
![stack Overflow](http://lmsotfy.com/so.png) 
```

## 这将如下所示：

[![alamin 的堆栈溢出图像](../Images/f524f4af73d58c96a6d91cc1aa6447f9.png)](https://i.stack.imgur.com/h9beB.png)

* * *

## 回答 #12

> 赞同：18
> 
> 时间：2018-03-25T20:27:44.150

只需在`<img>`您的 README.md 中添加一个标签，并将相对 src 添加到您的存储库。如果您不使用相对 src，请确保服务器支持 CORS。

它之所以有效，是因为 GitHub 支持[inline-html](https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet#html)

```
<img src="/docs/logo.png" alt="My cool logo"/>
# My cool project and above is the logo of it 
```

观察[这里](https://github.com/koajs/koa/blob/master/Readme.md)

* * *

## 回答 #13

> 赞同：17
> 
> 时间：2021-03-01T17:52:27.577

您现在可以在编辑自述文件时拖放图像。

Github 将为您创建一个链接，其格式如下：

```
https://user-images.githubusercontent.com/******/********.file_format 
```

或者，在文件底部显示“通过拖放、选择或粘贴附加文件”。如果你点击那个，它会给你一个直接上传文件的选项，或者你可以粘贴它！

* * *

## 回答 #14

> 赞同：14
> 
> 时间：2020-05-25T10:07:03.507

一步一步的过程，首先创建一个文件夹（命名您的文件夹），然后在 Readme.md 文件中添加您要上传的图像/图像。（您也可以在项目的任何现有文件夹中添加图像/图像。）现在，单击 Readme.md 文件的编辑图标，然后

```
![](relative url where images is located/refrence_image.png)  // refrence_image is the name of image in my case. 
```

添加图像后，您可以在“预览更改”选项卡中看到更改的预览。您将在此处找到您的图像。例如像这样，在我的情况下，

```
![](app/src/main/res/drawable/refrence_image.png) 
```

app 文件夹-> src 文件夹-> 主文件夹-> res 文件夹-> drawable 文件夹-> 和drawable 文件夹内的refrence_image.png 文件位于。要添加多个图像，您可以这样做，

```
![](app/src/main/res/drawable/refrence_image1.png)
![](app/src/main/res/drawable/refrence_image2.png)
![](app/src/main/res/drawable/refrence_image3.png) 
```

注 1 - 确保您的图像文件名不包含任何空格。如果它包含空格，那么您需要为文件名之间的每个空格添加 %20。最好去掉空格。

注 2 - 您甚至可以使用 HTML 标记调整图像大小，或者还有其他方法。你可以用谷歌搜索更多。如果你需要它。

在此之后，编写您的提交更改消息，然后提交您的更改。

还有很多其他的技巧，比如创建问题等等。到目前为止，这是我遇到的最好的方法。

* * *

## 回答 #15

> 赞同：13
> 
> 时间：2019-03-04T03:38:17.473

**用桌子来突出，它会给它单独的魅力**

表语法是：

用符号分隔每列单元格`|`

和表头（第一行）第二行 `---`

 **| 第 1 栏 | 第 2 栏 |
|------------|-------------|
| 图片 1 | 图 2 |**

*输出*

[![在此处输入图像描述](../Images/9bf6ed2e7bccc36b35c49a3b98977355.png)](https://i.stack.imgur.com/qsMwy.jpg)

**`<img src="url/relativePath">`如果您使用两个图像，现在只需放置图像 1 和图像 2**

*注意：如果使用多个图像只是包含更多列，您可以使用 width 和 height 属性使其看起来可读。*

**例子**

| 第 1 栏 | 第 2 栏 |
|------------|-------------|
| `<img src="https://media.wired.com/photos/5926db217034dc5f91becd6b/master/w_582,c_limit/so-logo-s.jpg" width="250">` | `<img src="https://mk0jobadderjftub56m0.kinstacdn.com/wp-content/uploads/stackoverflow.com-300.jpg" width="250">`|

*间距无关紧要*

**输出图像**

[![在此处输入图像描述](../Images/a2eed98efad30ba1c31bd18253b00ca9.png)](https://i.stack.imgur.com/sXElI.jpg)

帮助者：[adam-p](https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet#tables)

* * *

## 回答 #16

> 赞同：13
> 
> 时间：2021-04-11T07:23:05.667

您可以使用

```
![A test image](image.png) 
```

`![A test image]`你的替代文字在哪里，是你`(image.png)`的图片的链接。

* * *

您可以将图像放在云服务或其他在线图像托管平台上，或者如果它在 repo 中，您可以提供来自存储库的图像链接

* * *

您还可以在存储库中创建一个专用于自述文件图像的特定文件夹

* * *

## 回答 #17

> 赞同：11
> 
> 时间：2020-07-16T06:49:56.000

在新的 Github UI 中，这对我有用 -

示例 - 在文件夹 (myFolder) 中提交您的 image.png，并在您的 README.md 中添加以下行：

```
![Optional Text](../main/myFolder/image.png) 
```

* * *

## 回答 #18

> 赞同：10
> 
> 时间：2018-12-13T23:10:35.040

你可以这样做：

```
git checkout --orphan assets
cp /where/image/currently/located/on/machine/diagram.png .
git add .
git commit -m 'Added diagram'
git push -u origin assets 
```

然后你可以`README`像这样在文件中引用它：

`![diagram](diagram.png)`

* * *

## 回答 #19

> 赞同：9
> 
> 时间：2021-12-13T14:34:22.980

## 非常简单：可以使用 Ctrl + C/V 完成

这里的大多数答案直接或间接涉及将图像上传到其他地方然后提供指向它的链接。

只需复制任何图像并在编辑 Readme.md 时粘贴它就可以非常简单地完成

*   复制图像 - 您只需单击图像文件并使用`Ctrl + C`或可以使用截图工具将屏幕截图图像复制到剪贴板
*   然后，您可以`Ctrl + V`在编辑 Readme.md 时简单地做

Guithub 会自动将其上传到 user-images.githubusercontent.com 并在此处插入指向它的链接

* * *

## 回答 #20

> 赞同：9
> 
> 时间：2018-08-14T18:10:16.750

***就是这样！***

注意标签中的文件名大写并将PNG文件放入root，并链接到没有任何路径的文件名：

```
![Screenshot](screenshot.png) 
```

* * *

## 回答 #21

> 赞同：8
> 
> 时间：2015-05-12T17:15:56.547

我通常在网站上托管图像，这可以链接到任何托管图像。把这个扔到自述文件中。适用于`.rst`文件，不确定`.md`

```
.. image:: https://url/path/to/image
   :height: 100px
   :width: 200 px
   :scale: 50 % 
```

* * *

## 回答 #22

> 赞同：8
> 
> 时间：2018-02-10T16:52:08.857

您可以使用备用 github CDN 链接从 README.md（或外部）链接到项目中的图像。

URL 将如下所示：

```
https://cdn.rawgit.com/<USER>/<REPO>/<BRANCH>/<PATH>/<TO>/<FILE> 
```

我的项目中有一个 SVG 图像，当我在 Python 项目文档中引用它时，它不会呈现。

## 项目链接

这是文件的项目链接（不呈现为图像）：

[https://github.com/jongracecox/anybadge/blob/master/examples/awesomeness.svg](https://github.com/jongracecox/anybadge/blob/master/examples/awesomeness.svg)

嵌入图像示例：![图片](../Images/ddda883b913b13a26eb23be1af56194e.png)

## 原始链接

这是文件的 RAW 链接（仍然不渲染为图像）：

[https://raw.githubusercontent.com/jongracecox/anybadge/master/examples/awesomeness.svg](https://raw.githubusercontent.com/jongracecox/anybadge/master/examples/awesomeness.svg)

嵌入图像示例：![图片](../Images/322c64d9e41784f90479240e57c1e6d7.png)

## CDN链接

使用 CDN 链接，我可以使用（呈现为图像）链接到文件：

[https://cdn.rawgit.com/jongracecox/anybadge/master/examples/awesomeness.svg](https://cdn.rawgit.com/jongracecox/anybadge/master/examples/awesomeness.svg)

嵌入图像示例：![图片](../Images/dd1a896c834e2a5ef975eed15fbe80f9.png)

这就是我能够在我的`README.md`文件和我的 PyPi 项目 reStructredText 文档中使用我的项目中的图像的方式（[这里](https://pypi.python.org/pypi?name=anybadge&version=1.2.0rc4&:action=display)）

* * *

## 回答 #23

> 赞同：8
> 
> 时间：2016-12-13T02:00:44.080

就我而言，我使用[imgur](http://imgur.com/)并以这种方式使用直接链接。

```
![img](http://i.imgur.com/yourfilename.png) 
```

* * *

## 回答 #24

> 赞同：7
> 
> 时间：2019-03-03T09:19:04.280

有两种简单的方法可以做到这一点，

1) 使用 HTML img 标签，

2) ![](图片保存路径/image-name.png)

当您打开该图像时，您可以从浏览器中的 URL 复制路径。可能会出现间距问题，因此请确保两个单词路径或图像名称 add-> %20 中是否有空格。就像浏览器一样。

它们都可以工作，如果你想了解更多，可以查看我的 github -> [https://github.com/adityarawat29](https://github.com/adityarawat29)

* * *

## 回答 #25

> 赞同：7
> 
> 时间：2016-02-25T03:04:26.610

我已经解决了这个问题。你只需要参考别人的自述文件。

首先，您应该将图像文件上传到 github 代码库！然后直接引用图片文件的地址。

[![在此处输入图像描述](../Images/9f3853c77fd493b22ee82176208189e2.png)](https://i.stack.imgur.com/9guCz.jpg)

[![在此处输入图像描述](../Images/5eba6ca846dce3636d2e0a27f4d9bd14.png)](https://i.stack.imgur.com/E0ptE.jpg)

* * *

## 回答 #26

> 赞同：7
> 
> 时间：2018-12-27T00:21:51.260

此答案也可以在以下位置找到： [https ://github.com/YourUserAccount/YourProject/blob/master/DirectoryPath/ReadMe.md](https://github.com/YourUserAccount/YourProject/blob/master/DirectoryPath/ReadMe.md)

## 使用以下命令显示来自 repo 的图像：

### 前置域：[https ://raw.githubusercontent.com/](https://raw.githubusercontent.com/)

### 附加标志：**`?sanitize=true&raw=true`**

### 使用`<img />`标签

示例 url 适用于 svg、png 和 jpg，使用：

*   **域**：`raw.githubusercontent.com/`
*   **用户名**：`YourUserAccount/`
*   **回购**：`YourProject/`
*   **分公司**：`YourBranch/`
*   **路径**：`DirectoryPath/`
*   **文件名**：`example.png`

适用于 SVG、PNG 和 JPEG

```
 - `raw.githubusercontent.com/YourUserAccount/YourProject/YourBranch/DirectoryPath/svgdemo1.svg?sanitize=true&raw=true` 
```

使用后的工作示例代码如下所示：

```
**raw.githubusercontent.com**:
<img src="https://raw.githubusercontent.com/YourUserAccount/YourProject/master/DirectoryPath/Example.png?raw=true" />

<img src="https://raw.githubusercontent.com/YourUserAccount/YourProject/master/DirectoryPath/svgdemo1.svg?sanitize=true&raw=true" /> 
```

**raw.githubusercontent.com**：

![](../Images/f1aca7bb819c52b3037b5a52d81c9016.png)

![](../Images/00c4146e23357d84f3dcd977ad35c4cc.png)

谢谢： - [https://stackoverflow.com/a/48723190/1815624](https://stackoverflow.com/a/48723190/1815624) - [https://github.com/potherca-blog/StackOverflow/edit/master/question.13808020.include-an-svg-hosted-on-github -in-markdown/readme.md](https://github.com/potherca-blog/StackOverflow/edit/master/question.13808020.include-an-svg-hosted-on-github-in-markdown/readme.md)

* * *

## 回答 #27

> 赞同：5
> 
> 时间：2017-11-18T21:07:13.593

如果您需要上传一些图片作为文档，一个不错的方法是使用[git-lfs](https://git-lfs.github.com/)。假设您已经安装了 git-lfs，请按照以下步骤操作：

1.  为您的每种图像类型初始化 git lfs：

    ```
    git lfs *.png
    git lfs *.svg
    git lfs *.gif
    git lfs *.jpg
    git lfs *.jpeg 
    ```

2.  创建一个将用作图像位置的文件夹，例如。`doc`. 在基于 GNU/Linux 和 Unix 的系统上，这可以通过以下方式完成：

    ```
    cd project_folder
    mkdir doc
    git add doc 
    ```

3.  将任何图像复制粘贴到 doc 文件夹中。然后通过`git add`命令添加它们。

4.  提交并推动。

5.  这些图像在以下 url 中公开可用：

    [https://media.githubusercontent.com/media/](https://media.githubusercontent.com/media/) ^github_username^/^repo^/^branch^/^image_location in the repo^

其中： *`^github_username^`是 github 中的用户名（可以在个人资料页面中找到） *`^repo_name^`是存储库名称 *`^branch^`是上传图像的存储库分支* 是包含存储`^image_location in the repo^`图像的文件夹的位置。

您也可以先上传图片，然后访问项目 github 页面中的位置并导航，直到找到图片，然后按下`download`按钮，然后从浏览器的地址栏中复制粘贴 url。

从我的项目中查看[这个](https://github.com/pc-magas/myFirstEnclave/blob/master/doc/SGX%20Compile%20workflow.png)作为参考。

然后你可以使用上面提到的 markdown 语法使用 url 来包含它们：

```
![some alternate text that describes the image](^github generated url from git lfs^) 
```

例如：假设我们使用[这张照片](https://media.githubusercontent.com/media/pc-magas/myFirstEnclave/master/doc/SGX%20Compile%20workflow.png)然后你可以使用 markdown 语法：

```
![In what order to compile the files](https://media.githubusercontent.com/media/pc-magas/myFirstEnclave/master/doc/SGX%20Compile%20workflow.png) 
```

* * *

## 回答 #28

> 赞同：5
> 
> 时间：2018-08-29T19:40:30.110

我只是在已经接受的答案中扩展或添加一个示例。

**一旦你把图像放在你的 Github repo 上。**

然后：

*   在浏览器上打开相应的 Github 存储库。
*   导航到目标图像文件然后只需在新选项卡中打开图像。 [![在新选项卡中打开图像](../Images/3c1fef4797d11a4d5c04587669fd98ff.png)](https://i.stack.imgur.com/KtTzg.png)
*   复制网址 [![从浏览器选项卡复制 url](../Images/8520797f1d4da356b249ae3bc70be864.png)](https://i.stack.imgur.com/ZVFU8.png)
*   最后将 url 插入以下模式`![alt text](https://raw.githubusercontent.com/username/projectname/branch/path/to/img.png)`

就我而言，它是

`![In a single picture](https://raw.githubusercontent.com/shadmazumder/Xcode/master/InOnePicture.png)`

在哪里

*   `shadmazumder`是我的`username`
*   `Xcode`是个`projectname`
*   `master`是个`branch`
*   `InOnePicture.png`是`image`，在我的情况下`InOnePicture.png`是在根目录中。

* * *

## 回答 #29

> 赞同：5
> 
> 时间：2016-07-27T23:31:19.320

就我而言，我想`Github`在`NPM`. 即使使用相对路径在内部工作`Github`，它也不能在外部工作。基本上，即使我将我的项目也推送到`NPM`了（它只是使用相同`readme.md`的），图像也从未显示。

我尝试了几种方法，最后这对我有用：

`![Preview](https://raw.githubusercontent.com/username/project/master/image-path/image.png)`

`NPM`我现在可以在可以发布我的包的任何地方或任何其他地方正确地看到我的图像。

* * *

## 回答 #30

> 赞同：4
> 
> 时间：2018-01-23T09:01:07.840

## 最新的

> Wiki 可以显示 PNG、JPEG 或 GIF 图像

现在您可以使用：

```
[[https://github.com/username/repository/blob/master/img/octocat.png|alt=octocat]] 
```

-或者-

按着这些次序：

1.  在 GitHub 上，导航到存储库的主页。

2.  在您的存储库名称下，单击 Wiki。

3.  使用 wiki 侧边栏，导航到要更改的页面，然后单击编辑。

4.  在 wiki 工具栏上，单击**图像**。

5.  在“插入图像”对话框中，键入图像 URL 和替代文本（由搜索引擎和屏幕阅读器使用）。

6.  单击确定。

请参阅[文档](https://help.github.com/articles/adding-images-to-wikis/)。

* * *

## 回答 #31

> 赞同：4
> 
> 时间：2019-07-17T05:18:23.153

我找到了另一种解决方案，但完全不同，我会解释它

基本上，我使用标签来显示图像，但我想在单击图像时转到另一个页面，这就是我的做法。

```
<a href="the-url-you-want-to-go-when-image-is-clicked.com" />
<img src="image-source-url-location.com" /> 
```

如果你把它放在彼此旁边，用一个新行分隔，我猜当你点击图片时，它会转到包含你要重定向的另一个站点的 href 的标签。

* * *

## 回答 #32

> 赞同：3
> 
> 时间：2018-10-17T13:09:17.743

考虑使用`table`if 添加多个屏幕截图并希望使用表格数据对齐它们以提高可访问性，如下所示：

![下午茶](../Images/64c2c40aed192fd43db0a3f6abf3a5a5.png)

如果您的降价解析器支持它，您还可以将`role="presentation"`WIA-ARIA 属性添加到 TABLE 元素并省略`th`标签。

* * *

## 回答 #33

> 赞同：2
> 
> 时间：2020-01-18T10:16:25.657

从上传文件选项在您的存储库中添加图像，然后在 README 文件中添加图像

```
![Alt text]("enter repository image URL here") 
```

* * *

## 回答 #34

> 赞同：2
> 
> 时间：2020-03-24T07:39:42.183

还有一个我没有提到的选项。您可以简单地在您的用户或组织下创建另一个名为“assets”的存储库。将您的图像推送到此存储库并从您的其他存储库中引用它们：

```
![alt text](https://raw.githubusercontent.com/my-org/assets/master/folder/logo.png) 
```

我已经在我的一个[回购](https://github.com/shadow-invoke/shoehorn-java)中做到了这一点，它很适合我。我可以独立于我的代码对我的所有项目的 README 图像进行版本控制，但仍将它们全部保存在一个[地方](https://github.com/shadow-invoke/assets)。不需要问题或分支或其他容易放错位置的工件。

* * *

## 回答 #35

> 赞同：1
> 
> 时间：2018-07-08T12:03:06.220

我们可以简单地做到这一点，

*   在 GitHub 上创建一个新问题
*   将图像拖放到`div`问题正文上

几秒钟后，将生成一个链接。现在，复制链接或图像 URL 并在任何支持的平台上使用它。

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2020-04-27T20:10:42.563

如果您想显示托管在任何网站上的图像（例如 url 是“ `http:// abc.def.com/folder/image.jpg`”），那么在您的`README.md`文件中使用以下语法：

`![alt text](<http:// abc.def.com/folder/image.jpg>)`

*   只需在浏览器中浏览到图像（可以通过单击图像）。它可以是任何网站，包括您的或其他人的 github 托管图像。
*   从浏览器地址栏中复制 url，即在上述语法中使用的“image_url”。

* * *

对于托管在您自己的 github 存储库中的图像，除了上述 url 格式之外，您还可以使用相对路径
`![alt text](<path_relative_to_current_github_location/image.jpg>)`

* * *

如果图像与文件位于同一文件夹中`README.md`（相对路径 url 的特殊情况），则可以使用：
`![alt text](<image.jpg>)`

* * *

请注意包含 URL的尖括号**“<”**和**“>” 。**有时这些是 url 工作所必需的。

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2021-10-12T20:32:58.133

对于带有大小管理选项的上传图像：

```
<img src="a.jpg" alt="a" width="200"/> 
```****

# jquery - 如何使用文本框jQuery获取xml属性值

> ID：14494752
> 
> 赞同：0
> 
> 时间：2013-01-24T05:44:31.990
> 
> 标签：jquery, html, ajax

这是我的 xml 文件：-

```
<root>
<child1 entity_id = "1" value= "Asia">
    <child2 entity_id = "2" value = "india">
        <child3 entity_id = "3" value = "Gujarat">
            <child5 entity_id = "5" value ="Rajkot"></child5>
        </child3>
        <child4 entity_id = "4" value = "Rajshthan">
            <child6 entity_id = "6" value = "Ajmer"></child6>
        </child4>
    </child2>
</child1>
</root> 
```

这是我的代码：-

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>Region Value</title>
<script type="text/javascript" src="jquery.js"></script>
<script>

data = false;

$(document).ready(function() {
    $("li").live("click", function(event) {
        event.cancelBubble = true;
        loadChild($(this).attr("id"), event);
        return false;
    })
});

function loadChild(id) {
    var obj = $("#" + id);

    if(obj.data("loaded") == null) {
        ul = "<ul>";
        var path = (id == 0) ? "root" : "[entity_id='" + id + "']";
        $(data).find(path).children().each(function(){
             var value_text = $(this).attr('value');
             var id = $(this).attr('entity_id');
             ul += "<li id='" + id + "'>" + value_text + "</li>";
         });
         ul += "</ul>";

         $("#" + id).append(ul);
         obj.data("loaded", true);
    } else {
        $("#" + id + " ul").remove();
        obj.data("loaded", null);
    }
}

 $(function() {
     $('#update-target a').click(function() {
         $.ajax({
             type: "GET",
             url: "final.xml",
             dataType: "xml",
             success: function(xml) {
                data = xml;
                loadChild("0");
                $(xml).find('child1').each(function(){
                var value_text = $(this).attr('value');
                var id = $(this).attr('entity_id');
                $("<li id='" + id + "'></li>")
                             .html(value_text)
                             .appendTo('#update-target ol');
        });       //close each(      
    }
         }); //close $.ajax(
     }); //close click(
 }); //close $(
</script>
   </head>
   <body>
<input type="text" id="update-target">
<input type="button" name="button" value="Search" onclick="loadChild()" >

     <p>
       <div id='update-target'>
         <a href="#">Click here to load value</a>
         <ol id="0"></ol>
       </div>
     </p>
</body>
</html> 
```

这是我的输出：

```
__________________(Textbox)
search(button)  

Click here to load value:

    Asia
        india
            Gujarat
                Rajkot
            Rajshthan
                Ajmer 
```

现在我想：
如果我在文本框中输入亚洲然后显示印度
如果输入印度然后显示 Gujarat Rajshthan
如果输入 Gujarat 然后显示 Rajkot
如果输入 Rajshthan 然后显示 Ajmer

# php - 有条件地传递参数以实现功能

> ID：14494755
> 
> 赞同：1
> 
> 时间：2013-01-24T05:44:43.877
> 
> 标签：php, logic

我有一个数组：

```
 <pre>Array
(
    [fname] => adsff
    [lname] => adsf
    [address] => sdfaf
    [city] => sdaf
    [state] => dsfaf
    [zip] => adf
    [phone] => asdf
    [fax] => adsf
    [email] => asdff
    [salary] => asdaf
    [pemp] => asdfaf
    [noofyears] => asdfaf
    [married] => asdfaf
    [children] => asdfaf
    [refname1] => asdfaf
    [refphone1] => adsfaf
    [refname2] => asdfaf
    [refphone2] => sdfaf
    [refname3] => dfsg
    [refphone3] => sdf
    [bank] => sdf
) 
```

我想将此数组传递到邮件中，这样如果任何字段为空白，则它不会在邮件中使用例如：如果只有 fname 和 lname 有值，那么邮件将是

```
First name = asdff
Last Name= adsf 
```

示例 2：如果只有 fname,lname 和 address 有值，那么邮件将是

```
 First name = asdff
    Last Name= adsf
Address=sdfaf 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T05:46:35.700

```
$array = array(); // your array that you posted...
$new_array = array();

foreach ($array as $key => $val) {
    if ( ! empty($val) ) $new_array[$key] = $val;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T05:52:10.740

我认为使用[**array_filter**](http://www.php.net/manual/en/function.array-filter.php)，

**示例**：

```
<?php

$entry = array(
             0 => 'foo',
             1 => false,
             2 => -1,
             3 => null,
             4 => ''
          );

print_r(array_filter($entry));
?>

The above example will output:

Array
(
    [0] => foo
    [2] => -1
) 
```

愿这对你有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T05:46:32.233

```
$mail = '';
foreach ($array as $name => $value) {
   if ($value) {
      $mail .= "$name = $value \n";
   }
} 
```

# ios - 使用 ACConnect WebDav 项目将文件夹上传到 WebDav 服务器

> ID：14494758
> 
> 赞同：0
> 
> 时间：2013-01-24T05:45:04.023
> 
> 标签：ios, github, directory, webdav

我一直在搜索 WebDav 库并在 github 上找到[了这个ACConnect WebDav 项目](https://github.com/jkichline/ACConnect/tree/master/src/ACWebDAV)

我能够上传和下载图像/文件。我一直无法弄清楚如何上传文件夹。如果有人有任何想法，请分享:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:46:28.450

好的，发现我们不能直接使用这个库上传完整的文件夹。

有一个功能`[propReq createCollection:filePath];`可以让我们在 webdav 服务器上创建文件夹。然后我们需要将文件一个一个地上传到这个新创建的文件夹中。在实现完整文件夹的上传方面:)

# php - PHP中如何使用next()遍历数组(NULL=>NULL, FALSE=>FALSE)

> ID：14494771
> 
> 赞同：2
> 
> 时间：2013-01-24T05:46:14.427
> 
> 标签：php

如何`next()`在 PHP 中使用这样的遍历数组：

```
$a = array(NULL=>NULL, FALSE=>FALSE) 
```

这种代码不起作用：

```
reset($a);
while (key($a)) {
    print "a";
    next($a);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T05:52:41.537

如果您查看[next() 的手册](http://au1.php.net/manual/en/function.next.php)，您会看到这一点。

> 您将无法将数组的结尾与布尔 FALSE 元素区分开来。要正确遍历可能包含 FALSE 元素的数组，请参阅[each()](http://au1.php.net/manual/en/function.each.php)函数。

这是一种解决方法：

```
$fruit = array('a' => 'apple', 'b' => 'banana', 'c' => 'cranberry');

reset($fruit);
while (list($key, $val) = each($fruit)) {
    echo "$key => $val<br>";
} 
```

您也可以尝试[foreach](http://au1.php.net/manual/en/control-structures.foreach.php)。

```
$fruit = array('a' => 'apple', 'b' => 'banana', 'c' => 'cranberry');
foreach($fruit as $key => $val){
    echo "$key => $val<br>";
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T05:50:18.320

我会这样做：

```
foreach ($a as $value ) {
 print $value
 } 
```

# android - 将 JSON 从 Android 发送到 PHP

> ID：14494773
> 
> 赞同：0
> 
> 时间：2013-01-24T05:46:25.167
> 
> 标签：android, json

我一直在努力将 JSON 对象从 android 上的应用程序发送到 php 文件（本地托管）。php 位与我的问题无关，因为wireshark 没有记录我的应用程序中的任何活动（eclipse/ADK 中的仿真），而且几乎可以肯定与我的发送方法有关：

```
 try {
        JSONObject json = new JSONObject();
        json.put("id", "5");
        json.put("time", "3:00");
        json.put("date", "03.04.12");
        HttpParams httpParams = new BasicHttpParams();
        HttpClient client = new DefaultHttpClient(httpParams);
        //
        //String url = "http://10.0.2.2:8080/sample1/webservice2.php?" + 
        //             "json={\"UserName\":1,\"FullName\":2}";
        String url = "http://localhost/datarecieve.php";

        HttpPost request = new HttpPost(url);
        request.setEntity(new ByteArrayEntity(json.toString().getBytes(
                "UTF8")));
        request.setHeader("json", json.toString());
        HttpResponse response = client.execute(request);
        HttpEntity entity = response.getEntity();
        // If the response does not enclose an entity, there is no need
        if (entity != null) {
            InputStream instream = entity.getContent();

        }
    } catch (Throwable t) {
        Toast.makeText(this, "Request failed: " + t.toString(),
                Toast.LENGTH_LONG).show();
    } 
```

我已经根据我找到的一个示例对其进行了修改，所以我确信我已经采用了一些非常好的代码并对其进行了修改。我了解多线程的要求，因此我的应用程序不会挂起和死机，但不确定它的实现。使用 Asynctask 会解决这个问题，还是我错过了其他重要的事情？

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:50:01.663

您应该使用 asynctask 或线程，因为在更高版本的 android 中，它不允许长时间运行的任务，例如来自 ui 线程的网络操作。

[这是更多描述的链接](https://stackoverflow.com/questions/14352193/android-httpcleint-works-on-2-2-but-not-on-4/14352219#14352219)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T06:45:32.580

假设您使用模拟器来测试代码，`localhost`指的是模拟环境。如果需要访问自己电脑上托管的php，需要使用IP 10.0.2.2或者局域网IP如192.168.1.3。检查[从模拟环境中引用本地主机](http://developer.android.com/guide/faq/commontasks.html#localhostalias)

您可以参考[保持您的应用响应以了解有关在](http://developer.android.com/training/articles/perf-anr.html)[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)中运行长时间运行的操作

# codeigniter - Codeigniter 2.2 分页未显示

> ID：14494778
> 
> 赞同：0
> 
> 时间：2013-01-24T05:47:31.420
> 
> 标签：codeigniter, pagination

尝试一小时但不工作。我可以手动切换 URL 中的 /welcome/index/1 或 2 或 3。只是该死的分页 <1 2 3 4> 没有显示！

我的控制器

```
 $offset = $this->uri->segment(3,0);

    $query = $this->db->query(
        'SELECT p.id AS pid,
                p.url, 
                p.created_time,
                t.name,
                t.num_photo,
                t.id AS tid
        FROM photos p
        LEFT JOIN tag_maps AS tm ON p.id = tm.photo_id
        LEFT JOIN tags AS t ON t.id = tm.tag_id
        INNER JOIN
        (
            SELECT MAX(created_time) maxDate, t.id
            FROM photos p
            LEFT JOIN tag_maps AS tm ON p.id = tm.photo_id
            LEFT JOIN tags AS t ON t.id = tm.tag_id
            GROUP BY t.id
        ) AS d
        ON p.created_time = d.maxDate
        AND t.id = d.id
        ORDER BY p.created_time LIMIT ' . $offset . ',2'
    );
    $config['base_url'] = 'http://localhost:8080/example/welcome/index';
    $config['total_rows'] = $query->num_rows();
    $config['per_page'] = 2;
    $config['num_links'] = 20; 
```

然后在我的html中

```
<?php echo $this->pagination->create_links(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:53:45.180

问题出在这

```
$config['total_rows'] = $query->num_rows(); 
```

您不能使用`$query->num_rows();`，因为它总是返回 2 行。
您应该有另一个查询来获取实际查询的总行数，
这应该是`SELECT COUNT(*)`

# android - Android-有没有办法解密 MODE_PRIVATE 中的 apk 文件

> ID：14494781
> 
> 赞同：0
> 
> 时间：2013-01-24T05:47:41.750
> 
> 标签：android, encryption

我想以私有模式解密加密的 apk 文件，我知道可以将其解密到特定位置。

我使用以下代码将其解密为 sdcard。

```
FileInputStream fis = new FileInputStream("/sdcard/encrypted.apk");

FileOutputStream fos = new FileOutputStream("/sdcard/decrypted.apk");
SecretKeySpec sks = new SecretKeySpec("MyDifficultPassw".getBytes(), "AES");
Cipher cipher = Cipher.getInstance("AES");
cipher.init(Cipher.DECRYPT_MODE, sks);
CipherInputStream cis = new CipherInputStream(fis, cipher);
int b;
byte[] d = new byte[8];
while((b = cis.read(d)) != -1) {
    fos.write(d, 0, b);
}
fos.flush();
fos.close();
cis.close(); 
```

}

但是是否可以在私有模式下解密 apk 文件...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:42:47.543

看起来你把事情搞混了。如果要在应用程序的数据目录中创建文件，则使用MODE_PRIVATE 或详细的[Context.MODE_PRIVATE 。](http://developer.android.com/reference/android/content/Context.html#MODE_PRIVATE)

使用 MODE_PRIVATE 根本不使用加密，它只是设置文件访问权限，以便只有应用程序本身可以访问文件。

在许多设备上，该`/sdcard`部分是一个单独的分区或使用 fat32 格式化的 sd 卡 - 它根本不支持文件级别的权限。因此 MODE_PRIVATE 在路径上不起作用。

如果您需要 MODE_PRIVATE 中的 FileOutputStream，您可以简单地调用：

```
FileOutputStream fos = context.openFileOutput(filename, Context.MODE_PRIVATE); 
```

上下文是您的应用程序的上下文。它至少可以在应用程序的私有数据目录中工作。

# java - 如何直接提供 JSON 输入作为字符串参数

> ID：14494791
> 
> 赞同：0
> 
> 时间：2013-01-24T05:48:30.623
> 
> 标签：java, json

以下代码将以下内容打印为输入，但我想将此 JSON 字符串作为输入直接传递给 parse 方法（最好作为字符串参数）。我该怎么做？

{"val1":"v1","val2":"v2"}

```
import com.google.gson.*;

public class ParseJSON {

    String val1;
    String val2;
    transient String val3;

    public static void main(String[] args) {
        Gson gson = new GsonBuilder().create();
        ParseJSON parseJson = new ParseJSON();
        parseJson.val1 = "v1";
        parseJson.val2 = "v2";
        parseJson.val3 = "v3";
        String requestBody = gson.toJson(parseJson);
        System.out.println(requestBody);

        JsonParser parser = new JsonParser();
        // JsonArray array = parser.parse(requestBody).getAsJsonArray();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T05:56:34.993

正在创建的 JSON 将被视为 JSON 对象，而不是数组。要正确解析它，您需要调用：

```
JsonObject object = parser.parse(requestBody).getAsJsonObject(); 
```

JSON 数组看起来更像这样：

```
[{"va1": "v1", "val2": "v2", "val3": "v3"}, {"val4": "v4", "val4": "v5", "val5": "v6"}] 
```

这是一个包含两个 JSON 对象的 JSON 数组。JSON 数组与您在 Java 中看到的数组具有相似的样式，它们有`[` `]`括号并包含一个逗号分隔的对象/数组/基元列表。

此外，您也可以像这样解析它：

```
JsonElement element = parser.parse(requestBody); 
```

一旦你有了一个`JsonElement`，你就可以调用类似的方法，`isJsonArray()`或者`isJsonObject()`找出`String`你解析的顶级 JSON 元素是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:04:23.773

```
*You should do that in a following code for your request*

        static String val1 = "v1";
        static String val2 = "v2";
        transient String val3;

        public static void main(String[] args) {
            JSONArray arrayTable = new JSONArray(); 
            JSONObject node = new JSONObject();  
            node.put("val1", val1);
            node.put("val2", val2);
            arrayTable.add(node);
            System.out.println(arrayTable);

        }

**Dependency lib**:
 <dependency>
    <groupId>json</groupId>
    <artifactId>json</artifactId>
    <version>2.3</version>
</dependency>

<dependency>
    <groupId>net.sf.ezmorph</groupId>
    <artifactId>ezmorph</artifactId>
    <version>1.0.6</version>
</dependency> 
```

# android - 带有水平滚动视图android的垂直列表视图

> ID：14494798
> 
> 赞同：1
> 
> 时间：2013-01-24T05:49:11.993
> 
> 标签：android

我正在尝试使用水平滚动视图实现列表视图。设置列表视图适配器时出现 logcat 错误“空指针异常”。我的列表视图应该显示在夏洛克片段中

```
public class Trending extends SherlockFragment

{
List<String> list;
    ListView prog_list;

// Array of integers points to images stored in /res/drawable-ldpi/
public View onCreateView(LayoutInflater inflater, ViewGroup container,
           Bundle savedInstanceState) 
{
          View myFragmentView = inflater.inflate(R.layout.trendslay, container,false);       
          prog_list = (ListView)myFragmentView.findViewById(R.id.lv1);
          return prog_list;
         }

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    list = new ArrayList<String>();
    list.add("hi");
    list.add("hello");
    list.add("how r u");
    list.add("hi");
    list.add("hello");
    list.add("how r u");
    list.add("hi");
    list.add("hello");
    list.add("how r u");

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(),
              android.R.layout.simple_list_item_1, android.R.id.text1,list);
    prog_list.setAdapter(adapter);

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-06T09:00:26.547

我有在 Vertical ListView 内创建一个 Horizo​​ntal ListView 的相同要求，并且我尝试使用[TwoWayView](https://github.com/lucasr/twoway-view)来管理具有垂直滚动的 ListView 项目的水平滚动。你可以在 github 上查看我的演示[`VerticalHorizontalListView.`](https://github.com/lalit3686/VerticalHorizontalListView)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T06:11:18.217

您可以使用垂直滚动视图

并在您的布局中给出`android:fillViewport="true"`这将为您提供水平滚动效果而不使用水平滚动视图

```
<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fillViewport="true" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <ListView
            android:id="@+id/listView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1" >
        </ListView>
    </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T05:59:38.433

`prog_list.setHorizontalScrollBarEnabled(true);`之后添加`setAdapter();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-18T11:47:13.397

**尝试这个：**

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
       Bundle savedInstanceState) 
{
      View myFragmentView = inflater.inflate(R.layout.trendslay,container,false);       
      prog_list = (ListView)myFragmentView.findViewById(R.id.lv1);

    list = new ArrayList<String>();
    list.add("hi");
    list.add("hello");
    list.add("how r u");
    list.add("hi");
    list.add("hello");
    list.add("how r u");
    list.add("hi");
    list.add("hello");
    list.add("how r u");

    ArrayAdapter<String> adapter = new ArrayAdapter<String>getActivity(),
          android.R.layout.simple_list_item_1, android.R.id.text1,list);
    prog_list.setAdapter(adapter);

    return  myFragmentView ;
     } 
```

# user-interface - 如何在素数面上显示数据表中行的工具提示？

> ID：14494799
> 
> 赞同：0
> 
> 时间：2013-01-24T05:49:13.177
> 
> 标签：user-interface, xhtml, primefaces, datatable, tooltip

如何为数据表中的一行显示工具提示（标题）

我正在使用素面 3.4.2

请给我一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:18:41.440

看看这个[例子](http://www.primefaces.org/showcase-labs/ui/datatableSubTable.jsf)。您可以指定 p:row 元素并为其添加工具提示。

# php - array_map 在 eclipse 中显示语法错误，但代码工作正常

> ID：14494803
> 
> 赞同：2
> 
> 时间：2013-01-24T05:49:35.497
> 
> 标签：php, eclipse, array-map

我正在使用 codeIgniter，当我使用 PHP function 时`array_map`，它显示语法错误，但代码运行正常。是`array_map`不推荐使用的功能吗？

为什么会这样？

![在此处输入图像描述](../Images/59bcf7e20d812375f9ee8eec6141e6c8.png)

我应该避免使用`array_map`吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T08:16:57.407

正如 Explosion Pills 在他的评论中提到的那样

> 您只能在 PHP 5.3+ 中定义类似的函数。

所以你应该在 Eclipse 中更新你的 PHP 解释器。要做到这一点，这里有一个可以帮助你的帖子。 [Eclipse 的 PHP 解释器。](https://stackoverflow.com/questions/9608747/php-5-4-interpreter-for-eclipse-pdt)

# haskell - Haskell 类型错误（短代码）

> ID：14494804
> 
> 赞同：2
> 
> 时间：2013-01-24T05:49:57.423
> 
> 标签：haskell, types, casting

首先，感谢您抽出宝贵时间回答我的问题。

首先，请快速查看我的代码。您不必了解代码，只需注意类型即可。

这会返回一个错误，上面写着，

```
Couldn't match expected type `Int' with actual type `Integer'
Expected type: [Int]
  Actual type: [Integer]
In the first argument of `myfun', namely `primes'
In the expression: myfun primes 
```

失败，加载模块：无。

如果我将类型更改为 Int 而不是 Integer，我可以成功运行此程序而不会出现错误，例如，“primes :: [Int]”

但是，我需要将其保持为整数，以使程序能够获取大量数字。

非常感谢您提前提供的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:12:33.053

错误来自`(!!)`：`myfun`

```
myfun (a:ab) = fibs !! (a-1) : myfun(ab) 
```

较新的 GHC 可能会通知您（我认为）。试试这个：

```
myfun (a:ab) = fibs !! ((fromInteger a)-1) : myfun(ab) 
```

`fromInteger`它的结果类型是多态的，所以这里类型系统推断你想要一个`Int`. [hoogle](http://www.haskell.org/hoogle/?hoogle=Integer+-%3E+a)对这类问题非常了解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:12:06.593

的类型`myfun`派生自 的类型`!!`，即`[a] -> Int -> a`。如果您使用数字作为列表索引，则必须成功`Int`，无论如何，您的数字受列表容量的限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T04:48:34.690

您的类型错误的原因是它`(!!)`具有 type `[a] -> Int -> a`，因此，`myfun`'s 的类型被推断为`[Int] -> [Integer]`。

如果你真的需要`Integer`s，`fromIntegral`不会帮你；一旦质数超过，它只会导致您的应用程序以负索引崩溃`maxBound`。

但是，`(!!)`渐近复杂度较差，因此最好的解决方案是重新设计您的算法，以免需要二次运行时行为。

For example, instead of traversing the entire list of fibs each pass, you can instead express the primes as a list of index intervals to drop:

```
> import Data.List
> intervals :: [Integer]
> intervals = zipWith (-) (tail primes) primes 
```

and collect the results of dropping prime intervals from the fibs:

```
> partC :: [Integer]
> partC = map head $ scanl (flip genericDrop) (tail fibs) intervals 
```

I have used `tail fibs` here since you skip the first number in the fibonacci sequence.

# python - Python使用for循环解析一行？

> ID：14494808
> 
> 赞同：0
> 
> 时间：2013-01-24T05:50:09.593
> 
> 标签：python

编写程序提示输入文件名，然后通读文件并查找以下形式的行： X-DSPAM-Confidence: 0.8475 当遇到以“X-DSPAM-Confidence:”开头的行时，将line 以提取该行上的浮点数。计算这些行并计算这些行的垃圾邮件置信度值的总和。当您到达文件末尾时，打印出平均垃圾邮件置信度。

输入文件名：mbox.txt
平均垃圾邮件置信度：0.894128046745

输入文件名：mbox-short.txt
平均垃圾邮件可信度：0.750718518519 在 mbox.txt 和 mbox-short.txt 文件上测试您的文件。

到目前为止，我有：

```
 fname = raw_input("Enter file name: ")
 fh = open(fname)
 for line in fh:
     pos  = fh.find(':0.750718518519')
     x = float(fh[pos:])
     print x 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T05:55:43.013

听起来他们要求您平均所有“X-DSPAM-Confidence”数字，而不是 find `0.750718518519`。

就个人而言，我会找到您要查找的单词，提取数字，然后将所有这些数字放入一个列表并在最后平均它们。

像这样的东西-

```
# Get the filename from the user
filename = raw_input("Enter file name: ")

# An empty list to contain all our floats
spamflts = []

# Open the file to read ('r'), and loop through each line
for line in open(filename, 'r'):

    # If the line starts with the text we want (with all whitespace stripped)
    if line.strip().startswith('X-DSPAM-Confidence'):

        # Then extract the number from the second half of the line
        # "text:number".split(':') will give you ['text', 'number']
        # So you use [1] to get the second half
        # Then we use .strip() to remove whitespace, and convert to a float
        flt = float(line.split(':')[1].strip())

        print flt

        # We then add the number to our list
        spamflts.append(flt)

print spamflts
# At the end of the loop, we work out the average - the sum divided by the length
average = sum(spamflts)/len(spamflts)

print average 
```

* * *

```
>>> lines = """X-DSPAM-Confidence: 1
X-DSPAM-Confidence: 5
Nothing on this line
X-DSPAM-Confidence: 4"""

>>> for line in lines.splitlines():
    print line

X-DSPAM-Confidence: 1
X-DSPAM-Confidence: 5
Nothing on this line
X-DSPAM-Confidence: 4 
```

使用查找：

```
>>> for line in lines.splitlines():
    pos = line.find('X-DSPAM-Confidence:')
    print pos

0
0
-1
0 
```

我们可以看到，它`find()`只是给了我们`'X-DSPAM-Confidence:'`在每一行中的位置，而不是它后面的数字的位置。

更容易找到一行是否以 开头`'X-DSPAM-Confidence:'`，然后像这样提取数字：

```
>>> for line in lines.splitlines():
    print line.startswith('X-DSPAM-Confidence')

True
True
False
True

>>> for line in lines.splitlines():
    if line.startswith('X-DSPAM-Confidence'):
        print line.split(':')

['X-DSPAM-Confidence', ' 1']
['X-DSPAM-Confidence', ' 5']
['X-DSPAM-Confidence', ' 4']

>>> for line in lines.splitlines():
    if line.startswith('X-DSPAM-Confidence'):
        print float(line.split(':')[1])

1.0
5.0
4.0 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T05:55:10.370

`line.find`#..... 所以你搜索线......

`print pos` #prints 帮助调试 ;)

`float(fh[pos+1:])`#你得到的索引实际上是 : 所以你需要再移动 1

# .net - 将变量发送到另一个类子：无法引用实例成员

> ID：14494813
> 
> 赞同：0
> 
> 时间：2013-01-24T05:51:05.183
> 
> 标签：.net, vb.net, class, variables

我对我一直试图弄清楚的一个问题感到困惑。这是我面临的问题。我有两个类：CustomerFind.vb 和 CreateInvoice.vb。用户单击搜索按钮以打开另一个最顶部的表单，当用户搜索该客户时，结果将显示在 DataGridView 中。用户然后为客户选择该行，然后单击“确定”。我需要将该CustomersID 从(CustomerFind.vb) 发送到--> (CreateInvoice.vb)。一旦我在 CreateInvoice 中拥有该变量，我需要使用该变量传递给一个函数以获取该客户详细信息的表格...请参阅下面的内容...

这将打开 CustomerFind.vb 表单...

```
 Private Sub btnFindCustomer_Click(sender As System.Object, e As System.EventArgs) Handles btnFindCustomer.Click
    Dim findCustomer As New CustomerFind
    findCustomer.ShowDialog()
  End Sub 
```

一旦用户选择了他们的客户，变量就会传递给另一个类......

```
 Public Sub btnSave_Click(sender As System.Object, e As System.EventArgs) Handles btnSave.Click
    Dim intCustomerID As Integer = dgvSearchResults.SelectedRows(0).Cells(0).Value

    CreateInvoice.CreateNewInvoice(intCustomerID)

  End Sub 
```

这是来自 CreateInvoice.vb 的子，我也正在传递变量...

```
 Public Shared Sub CreateNewInvoice(ByVal intCustomerID As Integer)

    'Datatable to hold returned results'
    Dim oTable As DataTable
    'Get the data that we need for the customer'
    oTable = CustomerHelper.GetCustomer(intCustomerID)

    txtFirstName.Text = IIf(oTable.Rows(0).Item("First_Name") Is DBNull.Value, "NA", oTable.Rows(0).Item("First_Name")))
    txtLastName.Text = IIf(oTable.Rows(0).Item("Last_Name") Is DBNull.Value, "NA", oTable.Rows(0).Item("Last_Name"))
    txtCity.Text = IIf(oTable.Rows(0).Item("City") Is DBNull.Value, "NA", oTable.Rows(0).Item("City"))
    cboState.SelectedValue = IIf(oTable.Rows(0).Item("State") Is DBNull.Value, "NA", oTable.Rows(0).Item("State"))
    txtAddress.Text = IIf(oTable.Rows(0).Item("Address") Is DBNull.Value, "NA", oTable.Rows(0).Item("Address"))
    txtZipCode.Text = IIf(oTable.Rows(0).Item("Zip_Code") Is DBNull.Value, "NA", oTable.Rows(0).Item("Zip_Code"))
    txtEmail.Text = IIf(oTable.Rows(0).Item("Email") Is DBNull.Value, "NA", oTable.Rows(0).Item("email"))
    txtHomePhone.Text = IIf(oTable.Rows(0).Item("Home_Phone") Is DBNull.Value, "NA", oTable.Rows(0).Item("Home_Phone"))
    txtCellPhone.Text = IIf(oTable.Rows(0).Item("Cell_Phone") Is DBNull.Value, "NA", oTable.Rows(0).Item("Cell_Phone"))
    txtMiddleInitial.Text = IIf(oTable.Rows(0).Item("Middle_Initial") Is DBNull.Value, "NA", oTable.Rows(0).Item("Middle_Initial"))

End Sub 
```

问题在于这里。所有的文本字段都不能从共享方法中引用一个类的实例成员......我需要从返回的表中填写这些字段。

我不确定我在这里错过了什么，也许我只是累了......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:06:29.670

我不明白您的期望，但我认为您可能需要这个（将 CustomerId 从 CustomerFind.vb 传递到 CreateInvoice.vb）。为此，您可以使用以下内容：

创建一个不可见的标签并将 CustomerId 分配给 CustomerFind.vb 中的标签，例如

```
 inlabel.Text=""+CustomerId 
```

在 CreateInvoice.vb

```
 Dim id as Integer
   id=CustomerFind.inlabel.text 
```

现在您可以使用 CustomerId

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:11:50.790

自从我进行任何表单开发以来已经有一段时间了，但是您不想做类似的事情：

```
Public Sub btnSave_Click(sender As System.Object, e As System.EventArgs) Handles btnSave.Click
    Dim intCustomerID As Integer = dgvSearchResults.SelectedRows(0).Cells(0).Value
    Dim invoiceDlg as New CreateInvoice

    ' new field in you invoice class
    invoiceDlg.CustomerID = intCustomerID
    ' set up text fields in your dialog init function instead of CreateNewInvoice()
    invoiceDlg.ShowDialog();
End Sub 
```

# c - 将 C 变量的内容复制到寄存器 (GCC)

> ID：14494818
> 
> 赞同：3
> 
> 时间：2013-01-24T05:51:48.530
> 
> 标签：c, linux, gcc, assembly, x86

由于我对 GCC 很陌生，因此我在内联汇编代码中遇到了问题。问题是我无法弄清楚如何将 C 变量（类型为`UINT32`）的内容复制到寄存器`eax`中。我试过下面的代码：

```
__asm__
(
    // If the LSB of src is a 0, use ~src.  Otherwise, use src.
    "mov     $src1, %eax;"
    "and     $1,%eax;"
    "dec     %eax;"
    "xor     $src2,%eax;"

    // Find the number of zeros before the most significant one.
    "mov     $0x3F,%ecx;"
    "bsr     %eax, %eax;"
    "cmove   %ecx, %eax;"
    "xor     $0x1F,%eax;"
); 
```

然而`mov $src1, %eax;`不起作用。

有人可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-24T05:56:13.653

我猜您正在寻找的是[扩展程序集](http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html#s5)，例如：

```
 int a=10, b;
    asm ("movl %1, %%eax;   /* eax = a */
          movl %%eax, %0;" /* b = eax */
         :"=r"(b)         /* output */
         :"r"(a)         /* input */
         :"%eax"        /* clobbered register */
         ); 
```

在上面的例子中，我们使 的值`b`等于`a`使用汇编指令和`eax`寄存器的值：

```
int a = 10, b;
b = a; 
```

请参阅内联评论。

**笔记：**

```
mov $4, %eax          // AT&T notation

mov eax, 4            // Intel notation 
```

关于GCC 环境中的[内联汇编](https://github.com/0xAX/linux-insides/blob/master/Theory/asm.md)的好读物。

# android - 从后台进入前台后调用第一个活动

> ID：14494820
> 
> 赞同：0
> 
> 时间：2013-01-24T05:51:52.890
> 
> 标签：android, background

在我的应用程序中，当我移动到下一个活动时，我正在完成我的第一个活动，如下所示：

```
if(className.equals("com.tritonhk.android.LoginActivity"))
            startActivityForResult(in, 1);
        //loadingrelative.setVisibility(View.GONE);
        displayVal = 0;
        Helper.IsFullSync = false;
        LoginActivity.this.finish(); 
```

因此，当我从任何其他活动进入后台并返回前台时，必须调用我们进入后台的活动。

在某些情况下会发生这种情况，但如果我在后台停留超过 10 分钟，则会`oncreate`调用我的第一个活动方法。

看来 dalvik 正在杀死我的应用程序进程，这就是为什么当我单击我的应用程序图标时，它的新实例被创建并因此`onCreate`被调用。

请建议我什么应该是更好的方法。

**编辑** 问题部分解决。现在 with`android:launchMode = "standard"`表现正常但不是第一次尝试。我的意思是当我安装应用程序并运行它并进入后台并返回前台时它不起作用但从第二次开始它可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:35:50.803

由于您正在完成启动子活动的当前活动，这意味着您不希望任务在重新启动时保留根活动，您想从您离开的地方开始，您可以使用 android:alwaysRetainTaskState 它将保留任务状态，因为它是仅对根活动有用，因此您必须使用 FLAG_ACTIVITY_NEW_TASK intentfilter 标志在新任务中启动子活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T05:53:53.507

启动应用`android:launchMode="standard"`程序`activity`时调用哪个？如果不添加此行。

# regex - 匹配目录中的文件，但不匹配子目录

> ID：14494824
> 
> 赞同：1
> 
> 时间：2013-01-24T05:52:21.923
> 
> 标签：regex, apache, httpd.conf

我在 Windows 上运行 Apache httpd。我想让 Apache 使 index.html 不可缓存 - 但*只有*主页 index.html，没有其他 index.html 文件。这是我到目前为止所拥有的：

```
<Directory "D:\path\to\root">
   <FilesMatch "index.html$">
      Header set Cache-Control "max-age=0, must-revalidate"
   </FilesMatch>
</Directory> 
```

它有效 - 但适用于*所有*index.html 文件。如何将其缩小到只有一个 index.html？显然我可以在目录中使用正则表达式，但我这不起作用：

```
<Directory ~ "D:\\path\\to\\root"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:21:31.650

`Files`您可以在指令中指定路径而不仅仅是文件名。所以我想这同样适用于`FilesMatch`指令。这样，当与正则表达式匹配时，您可以从其子目录中排除带有路径的文件。

请注意，我尚未对此进行测试，但可能值得一试：

```
<Directory "D:\path\to\root">
    <FilesMatch "^[^\\]*index.html$">
        Header set Cache-Control "max-age=0, must-revalidate"
    </FilesMatch >
</Directory> 
```

请注意，我也不确定`\`您必须转义哪个反斜杠 ( ) 而哪个不需要转义。MS-Windows 内部使用的这种奇怪的路径符号确实是个问题。不仅在处理正则表达式时:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T03:59:38.380

这很好用：

```
<Location /index.html>
   Header set Cache-Control "max-age=0, must-revalidate"
</Location> 
```

# jquery - jQuery在取消选中复选框时删除类

> ID：14494825
> 
> 赞同：0
> 
> 时间：2013-01-24T05:52:40.753
> 
> 标签：jquery, jquery-selectors

我有下面的 jQuery 函数，它在选中复选框时向元素添加一些类，这一切都很好。但是，如果未选中该复选框，我想从元素中删除这些相同的类。我猜它会与 .removeClass 一起使用，但我不知道在哪里添加它。
谢谢

```
function countDouble() {      
    var d = $("input.double:checked").length;
    var s = $("input.single:checked").length;

    if (d === 2) {
   $(".twoday input:disabled").addClass("disabled");
       $(".twoday input:disabled + label").addClass("disabled");
    };
    if (s === 1) {
   $(".oneday input:disabled").addClass("disabled");
       $(".oneday input:disabled + label").addClass("disabled");
    };
};

jQuery(document).ready(function(){              
    countDouble();
    $(":checkbox").click(countDouble);  
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:01:08.463

请参阅以下代码：

```
$('#myform :checkbox').click(function() {
    var $this = $(this);
    // $this will contain a reference to the checkbox   
    if ($this.is(':checked')) {
        // the checkbox was checked, call the function to addClass 
    } else {
        // the checkbox was unchecked, call the function to removeClass
    }
}); 
```

**更新：**澄清`.click`vs `.change`，这是一个解释它的答案：

> 复选框恰好是更改和单击可互换的特殊情况，因为您无法在不触发单击的情况下触发更改事件。

[资源](https://stackoverflow.com/questions/11205957/jquery-difference-between-change-and-click-event-of-checkbox)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:57:12.590

“禁用”与其说是一个类，不如说是一个属性。

在这里解释：[jQuery - 复选框启用/禁用](https://stackoverflow.com/questions/2330209/jquery-checkbox-enable-disable)

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T06:09:58.573

这是您的代码的一个变体，它将起作用。您可以在条件语句中添加额外的调用以满足您的需要。

[http://jsfiddle.net/UefHa/](http://jsfiddle.net/UefHa/)

```
 function countDouble() {      
    var d = $("input.double").is(':checked');
    var s = $("input.single").is(':checked');

    if (d === true) {
       $(".twoday input").prop("disabled",true).addClass("disabled");
    } else {
       $(".twoday input").prop("disabled",false).removeClass("disabled");
    }

    if (s === true) {
       $(".oneday input").prop("disabled",true).addClass("disabled");
    } else {
       $(".oneday input").prop("disabled",false).removeClass("disabled");
    }
}

jQuery(document).ready(function(){              
    $('input[type=checkbox]').change( function() {
        countDouble();
    });
}); 
```

# jquery - jQuery过滤插件输出JSON对象？

> ID：14494830
> 
> 赞同：0
> 
> 时间：2013-01-24T05:52:57.303
> 
> 标签：jquery, json

我创建了一个 jQuery 插件来过滤 JSON 对象，现在我想通过变量返回过滤后的 JSON 对象？

插件设置：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:01:33.083

你不能完全从 中返回`success`，所以与其对抗它，你应该使用它。

定义一个插件本地的变量，`data`并在成功的 ajax 调用后写入它。然后，您可以返回*：*

[http://jsfiddle.net/sVuzq/3/](http://jsfiddle.net/sVuzq/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:00:19.027

你可以做这样的事情

```
function filter_by_key(filterkey, jsonObject)
{
    var new_obj={}, total=0, filterkey=filterkey.toLowerCase();
    for(var i in obj)
    {
        var emp_st=jsonObject[i].YourFilterKeyHere.toLowerCase();
        if(emp_st==filterkey) { new_obj[i]=jsonObject[i]; total++; }
    }

    if(total>0) return new_obj;
    return false;
} 
```

// 过滤数据对象

```
var filtered_data=filter_by_employee_state('FilterKey', YourJsonObject); 
```

Json 对象是这样的

```
{
  "0": {
    "emp_code": "049",
    "emp_name": "Craig J Miller",
    "emp_city": "Tustin",
    "emp_state": "CA"
  },
  "1": {
    "emp_code": 050"",
    "emp_name": "Rober Greer",
    "emp_city": "Tustin",
    "emp_state": "AL"
  }
} 
```

# objective-c - 循环 NSMutableDictionary

> ID：14494833
> 
> 赞同：2
> 
> 时间：2013-01-24T05:53:13.857
> 
> 标签：objective-c, cocoa, nsdictionary, nsmutabledictionary

我在数据库中有一些表格列：办公室、大厅名称和楼层。我在这张表中有一些值。我需要获取这些值并在`tableview`. 所以我需要使用`NSMutableDictionary`for 循环来获取数据库中的所有值。有人可以给我一些循环这个的想法`dictionary`吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:57:52.997

这可能会帮助你

```
NSString *key;
for(key in someDictionary){
     NSLog(@"Key: %@, Value %@", key, [someDictionary objectForKey: key]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:06:12.803

枚举 NSDictionary 最有效的方法是使用

```
[dictionary enumerateKeysAndObjectsWithOptions:NSEnumerationReverse usingBlock:^(id key, id obj, BOOL *stop) {

} 
```

这样一来，您就可以在一个简单的镜头中访问键和对象。

# wordpress - URL 的重写规则

> ID：14494835
> 
> 赞同：0
> 
> 时间：2013-01-24T05:53:22.503
> 
> 标签：wordpress, url-rewriting

我想为wordpress网站写一个重写规则

例子

```
http://localhost/wordpress/test-test-test/ 
```

应该

```
http://localhost/wordpress/test/test/test/ 
```

转换成 /

这是可能的还是如何在word-press页面中插入“测试/测试/测试”到slug

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:03:16.967

您可以使用 wordpress 通过 PHP 直接完成。

这是一篇很棒的文章，展示了这个过程： http: [//www.hongkiat.com/blog/wordpress-url-rewrite/](http://www.hongkiat.com/blog/wordpress-url-rewrite/)

# iphone - iOS6 中的短信通知

> ID：14494849
> 
> 赞同：6
> 
> 时间：2013-01-24T05:55:15.853
> 
> 标签：iphone, ios, sms, sony-smartwatch, imessage

我发现`SMS notifications`不支持`iPhone`，但我找到了一个视频，`Pebble Smart watch`它发送`SMS` `notification`和`iMessage` `notification`。这是视频和应用程序链接。

[http://www.razorianfly.com/2012/12/07/pebble-officially-announces-sms-and-imessage-support-for-iphone-video/](http://www.razorianfly.com/2012/12/07/pebble-officially-announces-sms-and-imessage-support-for-iphone-video/)

[http://www.iphoneincanada.ca/iphone-news/pebble-watch-now-supports-iphone-sms-and-imessage-video/](http://www.iphoneincanada.ca/iphone-news/pebble-watch-now-supports-iphone-sms-and-imessage-video/)

[https://itunes.apple.com/us/app/pebble-smartwatch/id592012721?mt=8](https://itunes.apple.com/us/app/pebble-smartwatch/id592012721?mt=8)

我也在网上发现`SMS notifications`只支持`iOS6`但不支持`iOS5`

以前的 stackoverflow 和 SMS 通知上的其他链接。

[在 iPhone 上注册 SMS 通知](https://stackoverflow.com/questions/9419982/registering-sms-notification-on-iphone)

[如何从 iPhone 向蓝牙 LE 设备发送电子邮件、短信通知？](https://stackoverflow.com/questions/12197503/how-to-send-email-sms-notification-from-iphone-to-bluetooth-le-device)

[使用 iPhone 接收短信通知](https://stackoverflow.com/questions/7082256/receive-notification-for-sms-using-iphone?rq=1)

[短信通知](https://stackoverflow.com/questions/3683492/sms-notification?rq=1)

[http://lists.apple.com/archives/bluetooth-dev/2012/Nov/msg00088.html](http://lists.apple.com/archives/bluetooth-dev/2012/Nov/msg00088.html)

需要做什么才能得到通知？在蓝牙设备上实施 MAP 配置文件就足够了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T21:21:52.100

我相信 iOS 6 以蓝牙 MAP（消息访问配置文件）的形式添加了消息（SMS 和 iMessage）通知支持。

因此，除非您的预期用途涉及通过蓝牙连接，否则您无法使用 iOS6 的此功能。

我认为不可能使用 Apple 的官方 iOS SDK 监控传入消息的接收，因为您需要使用私有框架，因此您需要将其设为越狱应用程序。

# android - Android：清除按钮单击时的列表视图数据

> ID：14494851
> 
> 赞同：0
> 
> 时间：2013-01-24T05:55:19.807
> 
> 标签：android

在我的应用程序中，我有一个列表视图，它根据搜索关键字加载数据，现在我想在按钮单击时清除加载的数据。

```
 @Override
    protected void onPreExecute() {
        SearchUtils searchUtils = null;
        List<Place> searchResult = null;
        String searchType = null;

        Log.d(TAG, "onPreExecute  start=");
        // show your dialog
        super.onPreExecute();
        Log.d(TAG, "LoadMenuSearch isOldDataToLoad : " + isOldDataToLoad);

        if(!this.isOldDataToLoad){
            this.dialog.setCanceledOnTouchOutside(false);
            this.dialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);

            this.dialog.setOnCancelListener(new OnCancelListener() {
                @Override
                public void onCancel(DialogInterface arg0) {

                }
            });

            Button morerecords = (Button) activity.findViewById(R.id.morerecords);
            morerecords.setVisibility(View.GONE);
            morerecords.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    Log.d(TAG, "Do Nothing........................");

                }
            });
            //morerecords.setVisibility(View.VISIBLE);
            final Button closesearch = (Button) activity.findViewById(R.id.closesearch);
            closesearch.setVisibility(View.VISIBLE);
            closesearch.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    ListView menuSearchListView = (ListView) activity
                            .findViewById(R.id.menusearchlist);
                    searchAdapter.clear();
                    searchAdapter.notifyDataSetChanged();

                    closesearch.setVisibility(View.GONE);

                }
            }); 
```

在预执行中，我有一个按钮，现在当我单击按钮时，加载的数据应该是清晰的，并且列表视图应该被刷新。

我的搜索适配器

```
 public SearchAdapter(Activity activity, int viewResourceId, int renderer,
            double latitute, double longitute, String menuId,
            ArrayList<Neighborhood> nhdDetails,
            ArrayList<AttractionData> items, boolean isAddressBook,
            boolean isRecommended) {
        super(activity, viewResourceId, items);
        streetView = new StreetViewUtils(activity);
        streetView.loadHtml();

    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        View view = convertView;
        if (view == null) {
            LayoutInflater inflater = (LayoutInflater) (getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE));
            view = inflater.inflate(renderer, null);
        }

        attractionData = items.get(position);

        Log.d(TAG, "attractionData " + attractionData + " for position "
                + position);
        TextView textName = (TextView) view.findViewById(R.id.textName);

        TextView textAddress = (TextView) view.findViewById(R.id.textAddress);
        TextView textPhone = (TextView) view.findViewById(R.id.textPhone);
        addFavorite = (ImageView) view.findViewById(R.id.pinsave);

        LinearLayout itemlayer = (LinearLayout) view
                .findViewById(R.id.itemlayer);
        itemlayer.setTag(attractionData);
        textName.setText(attractionData.getfName());

        if (!isRecommended) {
            TextView mapidDisplay = (TextView) view.findViewById(R.id.mapid);
            mapidDisplay.setTextSize(Constants.defaultFontSize + 2);
            if (isAddressBook) {
                mapidDisplay.setBackgroundColor(Color.YELLOW);
                mapidDisplay.setTextColor(Color.BLACK);
            } else {
                mapidDisplay.setBackgroundColor(Color.RED);
                mapidDisplay.setTextColor(Color.WHITE);
            }

            mapidDisplay.setTag(attractionData);
            mapidDisplay.setOnTouchListener(new OnTouchListener() {
                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    focusLication(v, event);
                    return true;
                }
            });

            Log.d(TAG,
                    "attractionData.getLatitude() ----->"
                            + attractionData.getLatitude()
                            + " attractionData.getLongitude()---> "
                            + attractionData.getLongitude());

            if (attractionData.getLatitude() != 0
                    && attractionData.getLongitude() != 0) {
                mapidDisplay.setText(" " + abbrMapId + (position + 1) + "  ");
                mapidDisplay.setVisibility(View.VISIBLE);
            } else {
                mapidDisplay.setVisibility(View.GONE);
            }
        } else {
            ImageView acceptRecommend = (ImageView) view
                    .findViewById(R.id.acceptRecommend);
            ImageView rejectRecommend = (ImageView) view
                    .findViewById(R.id.rejectRecommend);
            acceptRecommend.setVisibility(View.VISIBLE);
            rejectRecommend.setVisibility(View.VISIBLE);
            acceptRecommend.setTag(attractionData);
            rejectRecommend.setTag(attractionData);

            acceptRecommend.setOnTouchListener(new OnTouchListener() {
                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    switch (event.getAction()) {
                    case MotionEvent.ACTION_DOWN:
                        AttractionData data = (AttractionData) ((ImageView) v).getTag();
                        ((CityPreferences) activity.getApplication()).updateRecommended(data);
                        items.remove(position);
                        notifyDataSetChanged();
                        break;
                    case MotionEvent.ACTION_MOVE:
                        break;
                    case MotionEvent.ACTION_UP:
                        break;
                    }
                    return true;
                }
            });

            rejectRecommend.setOnTouchListener(new OnTouchListener() {
                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    switch (event.getAction()) {
                    case MotionEvent.ACTION_DOWN:
                        AttractionData data = (AttractionData) ((ImageView) v).getTag();
                        long id = data.getId();
                        ((CityPreferences) activity.getApplication()).deleteSavedAttractions(data);
                        data.setStatus("unselect");
                        items.remove(position);
                        notifyDataSetChanged();
                        break;
                    case MotionEvent.ACTION_MOVE:
                        break;
                    case MotionEvent.ACTION_UP:
                        break;
                    }
                    return true;
                }
            });
        }

        textAddress.setText(attractionData.getAddress());

                    TextView distance = (TextView) view.findViewById(R.id.distance);
        ImageView distanceDir = (ImageView) view
                .findViewById(R.id.distancedirection);

        Bitmap bitmap = BitmapFactory.decodeResource(activity.getResources(),
                R.drawable.navigationdir);
        float newRot = new Float(attractionData.getNavigationAngle());

        Matrix matrix = new Matrix();
        matrix.postRotate(newRot);
        // Log.d(TAG, "Roating the Navigation Image : 01" +
        // Constants.mOrientation[0]);
        if (Constants.mOrientation != null && Constants.mOrientation.length > 0) {
            double bearingToTarget = newRot + Constants.mOrientation[0];
            double drawingAngle = Math.toRadians(bearingToTarget)
                    - (Math.PI / 2);
            float cos = (float) Math.cos(drawingAngle);
            float sin = (float) Math.sin(drawingAngle);

            matrix.setSinCos(sin, cos);
            Bitmap redrawnBitmap = Bitmap.createBitmap(bitmap, 0, 0,
                    bitmap.getWidth(), bitmap.getHeight(), matrix, true);

            distanceDir.setImageBitmap(redrawnBitmap);

            // distanceDir.setRotation(90);
        } else {
            Bitmap redrawnBitmap = Bitmap.createBitmap(bitmap, 0, 0,
                    bitmap.getWidth(), bitmap.getHeight(), matrix, true);
            distanceDir.setImageBitmap(redrawnBitmap);
        }

        if (attractionData.getDistance() != null
                && !attractionData.getDistance().equals("")) {
            distance.setText(attractionData.getDistance());
        } else {
            distance.setText("");
        }
        if (attractionData.getLatitude() != 0.00
                && attractionData.getLongitude() != 0.00) {
            distanceDir.setVisibility(View.VISIBLE);
            distance.setVisibility(View.VISIBLE);
        } else {
            distanceDir.setVisibility(View.GONE);
            distance.setVisibility(View.GONE);
        }

        // Log.d(TAG, "end to search distance -->");
        LinearLayout llReviews = (LinearLayout) view
                .findViewById(R.id.reviewsrating);

        llReviews.setVisibility(View.VISIBLE);
        GridView gridview = (GridView) view.findViewById(R.id.ratingView);
        TextView textRating = (TextView) view.findViewById(R.id.rating);
        TextView textReviews = (TextView) view.findViewById(R.id.reviews);
        textRating.setText("(" + attractionData.getRating() + ")");
        gridview.setAdapter(new ImageAdapter(getContext(), attractionData
                .getRating()));
        // code for review
        if (attractionData.getReview() != null
                && (attractionData.getReview().equals("1") || attractionData
                        .getReview().equals("0"))) {
            textReviews.setText(attractionData.getReview() + " review");
        } else if (attractionData.getReview() != null) {
            textReviews.setText(attractionData.getReview() + " reviews");
        } else {
            textReviews.setText("0 review");
        }

        textReviews.setTag(attractionData.getReviewUrl());
        textReviews.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                String webURL = (String) v.getTag();
                utils.openWebURL(v.getContext(), webURL);
            }
        });

        if (Constants.isDefineNeighbourHood) {
            addFavorite.setVisibility(View.GONE);
        } else {
            if (attractionData.getId() > 0) {
                if (menuId != null && menuId.equalsIgnoreCase(Constants.menuFavouritePlaceId)) {
                    addFavorite.setImageResource(R.drawable.favorite_active);
                    addFavorite.setVisibility(View.GONE);
                    attractionData.setStatus("select");
                    EditAttraction editAttraction = new EditAttraction(activity, false);
                    itemlayer.setOnLongClickListener(editAttraction);
                    if (!Constants.isEysonly) {
                        Loginmyplaces loginmyplaces = new Loginmyplaces(activity);
                        itemlayer.setOnClickListener(loginmyplaces);
                    }
                } else {
                    addFavorite.setImageResource(R.drawable.favorite_active);
                    addFavorite.setVisibility(View.VISIBLE);
                    attractionData.setStatus("select");
                    EditAttraction editAttraction = new EditAttraction(activity, true);
                    itemlayer.setOnLongClickListener(editAttraction);
                }
            } else {
                addFavorite.setVisibility(View.VISIBLE);
                addFavorite.setImageResource(R.drawable.favorite);
                attractionData.setStatus("unselect");
                EditAttraction editAttraction = new EditAttraction(activity,
                        true);
                itemlayer.setOnLongClickListener(editAttraction);

            }
        }
        // Log.d(TAG, "Constants.totalFavorite : status : " +
        // attractionData.getStatus() + " for " + attractionData.getName());
        addFavorite.setTag(attractionData);
        addFavorite.setOnTouchListener(new OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    AttractionData data = (AttractionData) ((ImageView) v)
                            .getTag();
                    ImageView currentpinsave = (ImageView) v
                            .findViewById(R.id.pinsave);
                    Log.d(TAG,
                            "Constants.totalFavorite : status : "
                                    + data.getStatus());
                    Log.d(TAG, "Constants.totalFavorite : Resource : "
                            + currentpinsave);
                    if (data.getStatus() != null
                            && data.getStatus().equalsIgnoreCase("select")) {
                        Log.d(TAG, "data.status  " + data.getStatus());
                        currentpinsave.setImageResource(R.drawable.favorite);
                        currentpinsave.setTag(data);
                        long id = data.getId();
                        ((CityPreferences) activity.getApplication())
                                .deleteSavedAttractions(data);
                        data.setStatus("unselect");
                        currentpinsave.setImageResource(R.drawable.favorite);
                        new DeleteFromConstance().execute(id);
                    } else {
                        Log.d(TAG, "data.status  " + data.getStatus());
                        currentpinsave
                                .setImageResource(R.drawable.favorite_active);
                        currentpinsave.setTag(data);
                        data.setMenuId(menuId);
                        streetView.checkPhotoView(data);
                        ((CityPreferences) activity.getApplication())
                                .saveMyAttractions(data, true);
                        data.setStatus("select");
                        utils.checkFavoriteCity(activity, data);
                    }
                    break;
                case MotionEvent.ACTION_MOVE:
                    break;
                case MotionEvent.ACTION_UP:
                    break;
                }
                return true;
            }

        });

        if (!isRecommended) {

            if (attractionData.getImages() != null) {
                Log.d(TAG, "ImageUtils --> inside blob saved");
                ImageView placeImage = (ImageView) view
                        .findViewById(R.id.placeimage);
                placeImage.setVisibility(View.VISIBLE);
                placeImage.setImageBitmap(attractionData.getImages());

            } else {
                Log.d(TAG, "ImageUtils --> inside blob not saved");
                ImageView placeImage = (ImageView) view
                        .findViewById(R.id.placeimage);
                placeImage.setVisibility(View.GONE);

            }
        }

        ImageView navigationImage = (ImageView) view
                .findViewById(R.id.navigationImage);
        ImageView streetViewImage = (ImageView) view
                .findViewById(R.id.streetview);

        if (attractionData.getLatitude() != 0
                && attractionData.getLongitude() != 0) {
            navigationImage.setImageResource(R.drawable.navigation);
            navigationImage.setTag(attractionData);

            navigationImage.setOnTouchListener(new OnTouchListener() {
                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    switch (event.getAction()) {
                    case MotionEvent.ACTION_DOWN:
                        if (utils.isConnectionAvailable(v.getContext())) {
                            Intent intent = new Intent(v.getContext(), Navigator.class);
                            AttractionData data = (AttractionData) ((ImageView) v).getTag();
                            Bundle bundle = new Bundle();
                            // add data to bundle
                            bundle.putString("startlatitude", latitute + "");
                            bundle.putString("startlongitude", longitute + "");
                            bundle.putString("latitude", data.getLatitude() + "");
                            bundle.putString("longitude", data.getLongitude() + "");
                            intent.putExtras(bundle);
                            v.getContext().startActivity(new Intent(intent).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK));
                        } else {
                            Toast.makeText(v.getContext(), v.getContext().getResources().getString(R.string.noconnection), Toast.LENGTH_LONG).show();
                        }
                        break;
                    case MotionEvent.ACTION_MOVE:
                        break;
                    case MotionEvent.ACTION_UP:
                        break;
                    }

                    return true;
                }
            });

            streetViewImage.setTag(attractionData);
            streetViewImage.setOnTouchListener(new OnTouchListener() {
                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    switch (event.getAction()) {
                    case MotionEvent.ACTION_DOWN:
                        AttractionData data = (AttractionData) v.getTag();
                        Location location = new Location("");
                        location.setLatitude(data.getLatitude());
                        location.setLongitude(data.getLongitude());
                        streetView.checkStreetView(location);
                        break;
                    case MotionEvent.ACTION_MOVE:
                        break;
                    case MotionEvent.ACTION_UP:
                        break;
                }
                    return true;
                }});

            streetViewImage.setVisibility(View.VISIBLE);
            navigationImage.setVisibility(View.VISIBLE);
        } else {
            streetViewImage.setVisibility(View.GONE);
            navigationImage.setVisibility(View.GONE);
        }
        LinearLayout commentLayout = (LinearLayout) view
                .findViewById(R.id.commentLayout);
        if (attractionData.getComments() != null
                && !attractionData.getComments().trim().equals("")) {
            commentLayout.setVisibility(View.VISIBLE);
            TextView comment = (TextView) view.findViewById(R.id.comment);
            comment.setText(attractionData.getComments());
        } else {
            commentLayout.setVisibility(View.GONE);
        }

        ImageView phImage = (ImageView) view.findViewById(R.id.phoneImage);

        String phoneNo = attractionData.getPhoneNo();
        if (attractionData.getMobileNo() != null
                && !attractionData.getMobileNo().equals("")
                && !attractionData.getMobileNo().equalsIgnoreCase("null")) {
            if (phoneNo != null && !phoneNo.equals("")
                    && !phoneNo.equalsIgnoreCase("null")) {
                phoneNo = phoneNo + ",\n" + attractionData.getMobileNo();
            } else {
                phoneNo = attractionData.getMobileNo();
            }

        }

        Log.d(TAG, "------------------> phoneNo " + phoneNo);

        if (phoneNo != null && !phoneNo.equals("") && !phoneNo.equalsIgnoreCase("null")) {
            textPhone.setText(phoneNo);
            textPhone.setVisibility(View.VISIBLE);
            phImage.setVisibility(View.VISIBLE);
            phImage.setImageResource(R.drawable.phone);
            phImage.setTag(phoneNo);
            phImage.setOnTouchListener(new OnTouchListener() {
                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    switch (event.getAction()) {
                    case MotionEvent.ACTION_DOWN:

                    String phone = (String) ((ImageView) v).getTag();
                    Log.d(TAG, "onTouch phone--" + phone);
                    utils.dailPhone(v.getContext(), phone); 
                    break;

                    case MotionEvent.ACTION_MOVE:
                        break;
                    case MotionEvent.ACTION_UP:
                        break;
                    }

                    return true;

                    }
            });

        } else {
            phImage.setVisibility(View.GONE);
            textPhone.setVisibility(View.GONE);

        }

        LinearLayout htmllayout = (LinearLayout) view
                .findViewById(R.id.htmllayout);

        if (attractionData.getHtmlAttributions() != null
                && !attractionData.getHtmlAttributions().equals("")
                && !attractionData.getHtmlAttributions().equalsIgnoreCase(
                        "null")) {
            htmllayout.setVisibility(View.VISIBLE);
            TextView htmlAttributions = (TextView) view
                    .findViewById(R.id.htmlAttributions);
            TextView htmlAttributionsLink = (TextView) view
                    .findViewById(R.id.htmlAttributionsLink);
            htmlAttributions.setText(attractionData.getHtmlAttributions());
            htmlAttributionsLink.setText(attractionData
                    .getHtmlAttributionsLink());
            htmlAttributionsLink.setTag(attractionData);
            htmlAttributionsLink.setOnTouchListener(new OnTouchListener() {
                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    AttractionData data = (AttractionData) ((TextView) v)
                            .getTag();
                    utils.openWebURL(v.getContext(),
                            data.getHtmlAttributionsUrl());
                    new Intent(Intent.ACTION_VIEW);
                    return true;

                }
            });

        } else {
            htmllayout.setVisibility(View.GONE);
        }

        // ********************************************* changing for showing
        // the zagat review and price level
        String priceTag = attractionData.getPriceTag();
        String zagatReview = attractionData.getZagatReview();
        Log.d(TAG, "Extra Parameter Setup : " + attractionData.getfName()
                + " URL : " + attractionData.getReviewUrl());
        Log.d(TAG, "Extra Parameter Setup : priceTag : " + priceTag
                + " zagatReview : " + zagatReview);
        if (priceTag != null && !priceTag.equals("")) {
            ((TextView) view.findViewById(R.id.pricelevelvalue))
                    .setText(priceTag);
        } else {
            view.findViewById(R.id.pricelevelvalue).setVisibility(View.GONE);
        }
        if (zagatReview != null && !zagatReview.equals("")) {
            view.findViewById(R.id.moredetail_review).setVisibility(
                    View.VISIBLE);
            ((TextView) view.findViewById(R.id.zagatreviewvalue))
                    .setText(zagatReview);
        } else {
            view.findViewById(R.id.moredetail_review).setVisibility(View.GONE);
        }

        Reservation reservation = attractionData.getReservation();
        List<PlaceMenu> menus = attractionData.getMenu();

        if ((reservation != null) || (menus != null && !menus.isEmpty())) {
            view.findViewById(R.id.moredetail_menu_reservation).setVisibility(
                    View.VISIBLE);
            TextView reservationTextView = (TextView) view
                    .findViewById(R.id.reservationvalues);
            if (reservation != null && reservation.getName() != null
                    && !reservation.getName().equals("")) {
                Log.d(TAG,
                        "Extra Parameter Setup : reservation "
                                + reservation.getName() + " URL : "
                                + reservation.getUrl());
                view.findViewById(R.id.reservation).setVisibility(View.VISIBLE);
                reservationTextView.setVisibility(View.VISIBLE);
                reservationTextView.setText(reservation.getName());
                reservationTextView.setTag(reservation.getUrl());
                reservationTextView.setOnTouchListener(new OnTouchListener() {
                    @Override
                    public boolean onTouch(View v, MotionEvent event) {
                        utils.openWebURL(v.getContext(),
                                (String) ((TextView) v).getTag());
                        new Intent(Intent.ACTION_VIEW);
                        return true;

                    }
                });
            } else {
                view.findViewById(R.id.reservation).setVisibility(View.GONE);
                reservationTextView.setVisibility(View.GONE);
            }
            TextView placemenuTextView = (TextView) view
                    .findViewById(R.id.placemenu);
            if (menus != null && !menus.isEmpty()) {
                Log.d(TAG,
                        "Extra Parameter Setup : Menu Size : " + menus.size());

                placemenuTextView.setVisibility(View.VISIBLE);
                placemenuTextView.setTag(menus);
                placemenuTextView.setOnTouchListener(new OnTouchListener() {
                    @Override
                    public boolean onTouch(View v, MotionEvent event) {
                        switch (event.getAction()) {
                        case MotionEvent.ACTION_DOWN:
                            List<PlaceMenu> placeMenu = (List<PlaceMenu>) ((TextView) v).getTag();
                            ArrayList<DialogData> data = new ArrayList<DialogData>();
                            for (int i = 0; i < placeMenu.size(); i++) {
                                DialogData dialogData = new DialogData();
                                dialogData.setName(placeMenu.get(i).getName());
                                dialogData.setValue(placeMenu.get(i).getUrl());
                                dialogData.setType("url");
                                data.add(dialogData);
                            }
                            utils.showPopupDailog(v.getContext(), data, "Menu");
                            new Intent(Intent.ACTION_VIEW);
                            break;
                        case MotionEvent.ACTION_MOVE:
                            break;
                        case MotionEvent.ACTION_UP:
                            break;
                        }
                        return true;
                    }
                });
            } else {
                placemenuTextView.setVisibility(View.GONE);
            }
        } else {
            view.findViewById(R.id.moredetail_menu_reservation).setVisibility(
                    View.GONE);
        }

        if (attractionData.getHotelReview() != null) {
            PlaceHotelReview hotelReview = null;
            TextView textView = null;
            textView = (TextView) view.findViewById(R.id.hotelreviewtext);
            if (menuId != null && menuId.equals(Constants.menuHotelId)) {
                textView.setText(R.string.hotelPricing);
            } else {
                textView.setText(R.string.hotelreview);
            }
            Log.d(TAG, "Hotel Review Step 02 : ");
            LinearLayout rl = (LinearLayout) view
                    .findViewById(R.id.hotelreview);
            LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(
                    LinearLayout.LayoutParams.WRAP_CONTENT,
                    LinearLayout.LayoutParams.WRAP_CONTENT);
            view.findViewById(R.id.hotelreview).setVisibility(View.VISIBLE);
            rl.removeAllViews();

            rl.addView(textView, lp);
            for (int i = 0; i < attractionData.getHotelReview().size(); i++) {
                hotelReview = attractionData.getHotelReview().get(i);
                Log.d(TAG, "Hotel Review Step 03 : " + hotelReview);
                textView = new TextView(activity);
                Log.d(TAG, "Hotel Review Step 04 : " + hotelReview.getName());
                Log.d(TAG, "Hotel Review Step 05 : " + hotelReview.getReviews());
                textView.setText(hotelReview.getName().replaceAll("\"", ""));
                if (i == attractionData.getHotelReview().size() - 1) {
                    textView.setPadding(5, 5, 0, 5);
                } else if (i == attractionData.getHotelReview().size() - 1) {
                    textView.setPadding(5, 0, 0, 5);
                } else {
                    textView.setPadding(5, 5, 0, 0);
                }
                textView.setTextColor(Color.parseColor("#0000ff"));
                textView.setTag(hotelReview);
                Log.d(TAG, "Hotel Review Step 05 : ");
                textView.setOnTouchListener(new OnTouchListener() {

                    @Override
                    public boolean onTouch(View v, MotionEvent event) {
                        switch (event.getAction()) {
                        case MotionEvent.ACTION_DOWN:
                            PlaceHotelReview hotelReview = (PlaceHotelReview) v.getTag();
                            utils.openWebURL(v.getContext(), hotelReview.getUrl().replaceAll("\"", ""));
                            break;
                        case MotionEvent.ACTION_MOVE:
                            break;
                        case MotionEvent.ACTION_UP:
                            break;
                        }
                        return true;
                    }
                });
                rl.addView(textView, lp);
            }
        } else {
            view.findViewById(R.id.hotelreview).setVisibility(View.GONE);
        }

        TextView openCloseTime = (TextView) view
                .findViewById(R.id.openclosedesc);
        if (attractionData.getOpenCloseDesc() != null
                && !attractionData.getOpenCloseDesc().equals("")
                && !attractionData.getOpenCloseDesc().equalsIgnoreCase("null")) {
            openCloseTime.setText(attractionData.getOpenCloseDesc());
        } else {
            openCloseTime.setVisibility(View.GONE);
        }

        itemlayer.setOnTouchListener(new DetectMotion(activity, isAddressBook));

        if (position % 2 == 0)
            view.setBackgroundResource(R.drawable.listshape);
        else
            view.setBackgroundResource(R.drawable.favoritebody);

        return view;
    }

    private void focusLication(View v, MotionEvent event) {
        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            AttractionData ad = (AttractionData) v.getTag();
            Constants.isMaptobeLoaded = true;
            if (ad.getLatitude() != 0 && ad.getLongitude() != 0) {
                if (Constants.isDefineNeighbourHood) {
                    if (Constants.focusLocationNH == null) {
                        Constants.focusLocationNH = new Location("");
                    }
                    Constants.focusLocationNH.setLatitude(ad.getLatitude());
                    Constants.focusLocationNH.setLongitude(ad.getLongitude());

                    if (Constants.myNeighborHoodLocation == null) {
                        Constants.myNeighborHoodLocation = new Location("");
                    }
                    Constants.myNeighborHoodLocation.setLatitude(ad
                            .getLatitude());
                    Constants.myNeighborHoodLocation.setLongitude(ad
                            .getLongitude());

                } else {

                    if (Constants.focusLocation == null) {
                        Constants.focusLocation = new Location("");
                    }
                    Constants.focusLocation.setLatitude(ad.getLatitude());
                    Constants.focusLocation.setLongitude(ad.getLongitude());
                }
                activity.finish();
                if (isAddressBook) {
                    Constants.isPABImportant = true;
                    activity.overridePendingTransition(R.anim.slide_in_left,
                            R.anim.slide_out_left);
                } else {
                    Constants.isPABImportant = false;
                    activity.overridePendingTransition(R.anim.slide_out_right,
                            R.anim.slide_in_right);
                }
            }
            break;
        case MotionEvent.ACTION_MOVE:
            break;
        case MotionEvent.ACTION_UP:
            break;
        }
    } 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:07:17.493

像这样试试

```
 list.clear();
    adpater.notifyDataSetChanged(); 
```

/// 从列表中删除项目。

```
adapter.clear();
adpater.notifyDataSetChanged(); 
```

并非所有适配器都有 clear() 方法。ArrayAdapter 有，但 ListAdapter 或 SimpleAdapter 没有

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:00:04.173

在清除适配器的数据后通知列表视图我猜 searchAdapter 是你的适配器。SearchAdapter 是一个自定义适配器，您需要根据适配器类型清除数据，然后调用 notifyDataSetChanged。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T06:01:03.197

这是在按钮单击时清除列表视图数据的代码

```
Button yourbutton; // init it
yourButon.setOnClickListener(new OnClickListener(){
       yourList.clear(); // this list which you hava passed in Adapter for your listview
       yourAdapter.notifyDataSetChanged(); // notify to listview for refresh
}); 
```

# ios - 从 NSMutableArray 比较并获取索引

> ID：14494857
> 
> 赞同：1
> 
> 时间：2013-01-24T05:55:38.620
> 
> 标签：ios, nsmutablearray, nsarray

我有一个数组，它是数组的集合。说（（1，x，y，a），（2，m，n，o），（3，s，t，u，v，w））

如果我想获取m的索引，我该如何获取呢？

可以使用 **NSMutableArray contains:(id)**来完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:05:18.527

检查此代码：

```
int arrayPos = 0;
for (NSArray *tempArray in collectionArray)
{
  if(tempArray containsObject:@"m")
  {
     int indexOfWord = [tempArray indexOfObject:@"m"];
     NSlog(@"Array pos: %d Index is : %d",pos, indexOfWord);
  }
  pos++;
} 
```

在 for 循环中，您将获得添加到集合数组中的每个数组。之后，您将检查数组中是否存在该单词。如果它存在，您正在显示它。还打印数组的位置。

该元素位于：

```
NSString *str = [[collectionArrayObjectAtIndex:pos] objectAtIndex:indexOfWord]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T06:05:13.027

您正在谈论的函数“ `[NSMutableArray contains:]`”将告诉您对象“B”是否存在于 {A, B, C} 的数组中。

您真正需要做的是提出第二个函数，该函数通过您的父数组进行快速枚举，然后`contains`在子数组上执行“”操作。如果找到“m”，则返回“YES”和该条目在父数组中的索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T06:07:27.230

```
NSArray *arrWithArr;
NSArray *arrWithM;
NSInteger arrIndex;
for (int i = 0; i< [arrWithArr count]; i++) {
    if ([[arrWithArr objectAtIndex:i] containsObject:@"m"]) {
        arrIndex = i; break;
    }
}
NSInteger mIndex = [[arrWithArr objectAtIndex:arrIndex]indexOfObject:@"m"]; 
```

# php - CakePHP 模型 JOINS，缺少字段

> ID：14494861
> 
> 赞同：1
> 
> 时间：2013-01-24T05:55:48.187
> 
> 标签：php, cakephp

嘿伙计们，我是 CakePHP 的新手，我在加入两个表时遇到了问题。

```
$options['joins'] = array(
          array('table' => 'options',
         'alias' => 'Options',
         'type' => 'LEFT',
         'fields' => array('Question.question', 'Options.option'),
         'conditions' => array(
         'Options.question_id = Question.id'))
         );

        $this->set('qq',$this->Question->find('all',$options)); 
```

我只得到问题表的字段，而不是选项表的字段。我如何获得选项表的字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:50:57.447

尝试绑定表。

```
$this->ModelName->bindModel(array
(
    'belongsTo' => array
    (
        'ModelToJoin' => array
        (
            'foreignKey' => false,
            'conditions' => array
            (
                'ModelToJoin.model_name_id = ModelName.id'
            )
        )
    )
)); 
```

根据你的情况。

```
<?php

$this->Question->bindModel(array
(
    'hasMany' => array
    (
        'Options' => array
        (
            'foreignKey' => false,
            'type'       => 'LEFT',
            'conditions' => array
            (
                'Options.question_id = Question.id'
            )
        )
    )
));

$this->Question->find('all',array
(
    'fields' => array('Question.question', 'Options.option')
));
```

[**阅读更多**](http://ask.amoeba.co.in/joining-multiple-tables-in-cakephp-using-bindmodel-method/)

# c# - 对象数据源连接

> ID：14494862
> 
> 赞同：2
> 
> 时间：2013-01-24T05:56:04.797
> 
> 标签：c#, asp.net, objectdatasource

我正在尝试通过 Pluralsights ASP.NET Webforms (c#) 演示工作，但无法弄清楚为什么我的 app_code 文件夹中的类在尝试创建新的数据源连接时不会显示在我的 ObjectDataSource 下拉列表中。我已经坚持了将近一个半星期，并且是编程新手，所以在搜索有用的文档后不理解所有的术语。我不知道在哪里实施什么。

这是位于我的 App_Code 文件夹中的 BAL.cs 类的代码，我有一个 Data 文件夹，其中包含一个名为 Northwind 的 Linq 到类连接。

```
// Here is my code for BAL.cs
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Globalization;
using Northwind;
 public class BAL
{
    public List<String> GetCountries()
    {
        using (var context = new NorthwindDataContext())
        {
            return (from c in context.Customers
                    select c.Country).Distinct().ToList();
        }
    }

    public List<Customer> GetCustomersByCountry(string country)
    {
        using (var context = new NorthwindDataContext())
        {
            return (from c in context.Customers
                    where c.Country == country
                    select c).ToList();
        }
    }

    public Customer GetCustomer(string custID)
    {
        using (var context = new NorthwindDataContext())
        {
            return (from c in context.Customers
                    where c.CustomerID == custID
                    select c).SingleOrDefault();
        }
    }
}
} 
```

现在是我的 Northwind.dbml 文件的 Designer.cs

```
#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.17929
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace Northwind
{
using System.Data.Linq;
using System.Data.Linq.Mapping;
using System.Data;
using System.Collections.Generic;
using System.Reflection;
using System.Linq;
using System.Linq.Expressions;
using System.ComponentModel;
using System;

[global::System.Data.Linq.Mapping.DatabaseAttribute(Name="Northwind")]
public partial class NorthwindDataContext : System.Data.Linq.DataContext
{

    private static System.Data.Linq.Mapping.MappingSource mappingSource = new 
   AttributeMappingSource();

#region Extensibility Method Definitions
partial void OnCreated();
partial void InsertCustomer(Customer instance);
partial void UpdateCustomer(Customer instance);
partial void DeleteCustomer(Customer instance);
#endregion

    public NorthwindDataContext() : 
            base
    (global::System.Configuration.ConfigurationManager.ConnectionStrings
   ["NorthwindConnectionString"].ConnectionString, mappingSource)
    {
        OnCreated();
    }

    public NorthwindDataContext(string connection) : 
            base(connection, mappingSource)
    {
        OnCreated();
    }

    public NorthwindDataContext(System.Data.IDbConnection connection) : 
            base(connection, mappingSource)
    {
        OnCreated();
    }

    public NorthwindDataContext(string connection, 
   System.Data.Linq.Mapping.MappingSource mappingSource) : 
            base(connection, mappingSource)
    {
        OnCreated();
    }

    public NorthwindDataContext(System.Data.IDbConnection connection, 
  System.Data.Linq.Mapping.MappingSource mappingSource) : 
            base(connection, mappingSource)
    {
        OnCreated();
    }

    public System.Data.Linq.Table<Customer> Customers
    {
        get
        {
            return this.GetTable<Customer>();
        }
    }
}

[global::System.Data.Linq.Mapping.TableAttribute(Name="dbo.Customers")]
public partial class Customer : INotifyPropertyChanging, INotifyPropertyChanged
{

    private static PropertyChangingEventArgs emptyChangingEventArgs = new 
      PropertyChangingEventArgs(String.Empty);

    private string _CustomerID;

    private string _CompanyName;

    private string _ContactName;

    private string _ContactTitle;

    private string _Address;

    private string _City;

    private string _Region;

    private string _PostalCode;

    private string _Country;

    private string _Phone;

    private string _Fax;

    private string _Image;

#region Extensibility Method Definitions
partial void OnLoaded();
partial void OnValidate(System.Data.Linq.ChangeAction action);
partial void OnCreated();
partial void OnCustomerIDChanging(string value);
partial void OnCustomerIDChanged();
partial void OnCompanyNameChanging(string value);
partial void OnCompanyNameChanged();
partial void OnContactNameChanging(string value);
partial void OnContactNameChanged();
partial void OnContactTitleChanging(string value);
partial void OnContactTitleChanged();
partial void OnAddressChanging(string value);
partial void OnAddressChanged();
partial void OnCityChanging(string value);
partial void OnCityChanged();
partial void OnRegionChanging(string value);
partial void OnRegionChanged();
partial void OnPostalCodeChanging(string value);
partial void OnPostalCodeChanged();
partial void OnCountryChanging(string value);
partial void OnCountryChanged();
partial void OnPhoneChanging(string value);
partial void OnPhoneChanged();
partial void OnFaxChanging(string value);
partial void OnFaxChanged();
partial void OnImageChanging(string value);
partial void OnImageChanged();
#endregion

    public Customer()
    {
        OnCreated();
    }

    [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_CustomerID", 
      DbType="NChar(5) NOT NULL", CanBeNull=false, IsPrimaryKey=true)]
    public string CustomerID
    {
        get
        {
            return this._CustomerID;
        }
        set
        {
            if ((this._CustomerID != value))
            {
                this.OnCustomerIDChanging(value);
                this.SendPropertyChanging();
                this._CustomerID = value;
                this.SendPropertyChanged("CustomerID");
                this.OnCustomerIDChanged();
            }
        }
    }

    [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_CompanyName", 
    DbType="NVarChar(40) NOT NULL", CanBeNull=false)]
    public string CompanyName
    {
        get
        {
            return this._CompanyName;
        }
        set
        {
            if ((this._CompanyName != value))
            {
                this.OnCompanyNameChanging(value);
                this.SendPropertyChanging();
                this._CompanyName = value;
                this.SendPropertyChanged("CompanyName");
                this.OnCompanyNameChanged();
            }
        }
    }

    [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_ContactName", 
   DbType="NVarChar(30)")]
    public string ContactName
    {
        get
        {
            return this._ContactName;
        }
        set
        {
            if ((this._ContactName != value))
            {
                this.OnContactNameChanging(value);
                this.SendPropertyChanging();
                this._ContactName = value;
                this.SendPropertyChanged("ContactName");
                this.OnContactNameChanged();
            }
        }
    }

    [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_ContactTitle", 
  DbType="NVarChar(30)")]
    public string ContactTitle
    {
        get
        {
            return this._ContactTitle;
        }
        set
        {
            if ((this._ContactTitle != value))
            {
                this.OnContactTitleChanging(value);
                this.SendPropertyChanging();
                this._ContactTitle = value;
                this.SendPropertyChanged("ContactTitle");
                this.OnContactTitleChanged();
            }
        }
    }

    [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_Address", 
     DbType="NVarChar(60)")]
    public string Address
    {
        get
        {
            return this._Address;
        }
        set
        {
            if ((this._Address != value))
            {
                this.OnAddressChanging(value);
                this.SendPropertyChanging();
                this._Address = value;
                this.SendPropertyChanged("Address");
                this.OnAddressChanged();
            }
        }
    }

    [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_City", 
    DbType="NVarChar(15)")]
    public string City
    {
        get
        {
            return this._City;
        }
        set
        {
            if ((this._City != value))
            {
                this.OnCityChanging(value);
                this.SendPropertyChanging();
                this._City = value;
                this.SendPropertyChanged("City");
                this.OnCityChanged();
            }
        }
    }

    [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_Region", 
    DbType="NVarChar(15)")]
    public string Region
    {
        get
        {
            return this._Region;
        }
        set
        {
            if ((this._Region != value))
            {
                this.OnRegionChanging(value);
                this.SendPropertyChanging();
                this._Region = value;
                this.SendPropertyChanged("Region");
                this.OnRegionChanged();
            }
        }
    }

    [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_PostalCode", 
        DbType="NVarChar(10)")]
    public string PostalCode
    {
        get
        {
            return this._PostalCode;
        }
        set
        {
            if ((this._PostalCode != value))
            {
                this.OnPostalCodeChanging(value);
                this.SendPropertyChanging();
                this._PostalCode = value;
                this.SendPropertyChanged("PostalCode");
                this.OnPostalCodeChanged();
            }
        }
    }

    [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_Country", 
        DbType="NVarChar(15)")]
    public string Country
    {
        get
        {
            return this._Country;
        }
        set
        {
            if ((this._Country != value))
            {
                this.OnCountryChanging(value);
                this.SendPropertyChanging();
                this._Country = value;
                this.SendPropertyChanged("Country");
                this.OnCountryChanged();
            }
        }
    }

    [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_Phone", 
  DbType="NVarChar(24)")]
    public string Phone
    {
        get
        {
            return this._Phone;
        }
        set
        {
            if ((this._Phone != value))
            {
                this.OnPhoneChanging(value);
                this.SendPropertyChanging();
                this._Phone = value;
                this.SendPropertyChanged("Phone");
                this.OnPhoneChanged();
            }
        }
    }

    [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_Fax", 
      DbType="NVarChar(24)")]
    public string Fax
    {
        get
        {
            return this._Fax;
        }
        set
        {
            if ((this._Fax != value))
            {
                this.OnFaxChanging(value);
                this.SendPropertyChanging();
                this._Fax = value;
                this.SendPropertyChanged("Fax");
                this.OnFaxChanged();
            }
        }
    }

    [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_Image", 
     DbType="NVarChar(50)")]
    public string Image
    {
        get
        {
            return this._Image;
        }
        set
        {
            if ((this._Image != value))
            {
                this.OnImageChanging(value);
                this.SendPropertyChanging();
                this._Image = value;
                this.SendPropertyChanged("Image");
                this.OnImageChanged();
            }
        }
    }

    public event PropertyChangingEventHandler PropertyChanging;

    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void SendPropertyChanging()
    {
        if ((this.PropertyChanging != null))
        {
            this.PropertyChanging(this, emptyChangingEventArgs);
        }
    }

    protected virtual void SendPropertyChanged(String propertyName)
    {
        if ((this.PropertyChanged != null))
        {
            this.PropertyChanged(this, new       
     PropertyChangedEventArgs           (propertyName));
        }
    }
}
}
 #pragma warning restore 1591 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:24:17.603

如果它们没有出现在 GUI 中，请尝试手动指定哪些方法与哪些操作一起使用。

例如：

```
[DataObjectMethod(DataObjectMethodType.Select, true)]
[DataObjectMethod(DataObjectMethodType.Insert, true)]
[DataObjectMethod(DataObjectMethodType.Update, true)]
[DataObjectMethod(DataObjectMethodType.Delete, true)] 
```

[更多信息在这里](http://imar.spaanjaars.com/390/using-attributes-to-improve-the-quality-and-usability-of-your-code-part-1-decorating-business-objects-for-data-binding)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T19:25:11.927

1.  您需要确保您的项目类型是`Web`项目，否则 Visual Studio 不会考虑该`App_Code`文件夹
2.  确保您`System.Data.Linq`在文件中包含作为参考`Web.Config`bz 添加以下内容

> ```
> <assemblies>
>     <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
> </assemblies> 
> ```

3.  以下是 Web.Config 文件内容。我 从pluralsight[的ASP.NET 4 WebForms简介课程的练习文件中获得了内容：](http://pluralsight.com/training/Courses/TableOfContents/aspdotnet-webforms4-intro)

![在此处输入图像描述](../Images/f31e736fbf75aa9384793e9112ffb393.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T18:43:00.197

请参阅此处的评论：stackoverflow.com/questions/16170156/

我认为向 web.config 添加程序集引用解决了我的问题。

# c - C语言将数字打印成字符串

> ID：14494863
> 
> 赞同：0
> 
> 时间：2013-01-24T05:56:05.503
> 
> 标签：c, string, macros, enums, digital

```
#include <stdio.h>

#define stringify(s)    tostring(s)
#define tostring(s)     #s

#define MAX_VALUE 65536
#define NUM 64 * 1024

enum {
    MIN_VALUE = 1024,
};

int main(int argc, char *argv[])
{
    const char *max_str = stringify(MAX_VALUE);
    const char *min_str = stringify(MIN_VALUE);
    printf("max = %s, min = %s\n", max_str, min_str);
    return 0;
} 
```

输出为 "max = 65536, min = MIN_VALUE num = 1024 * 64" 专家，我怎样才能修改我的代码输出如下：max = 65536, min = 1024 num = 65536

谢谢 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T06:03:09.063

MIN_VALUE 是一个数字。为什么需要对其进行字符串化？

只需使用：

```
printf("%d\n", MIN_VALUE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T07:26:20.630

`#define`语句在编译器查看代码之前由预处理器处理，因此它基本上是文本替换（实际上使用参数等更智能）。

由于`stringify(s)`is `#defined`，预处理器忠实地完成了它的工作。

`stringify(MAX_VALUE)`衰减到，`stringify(65536)`因为 MAX_VALUE 是 #defined to `65536`，在预处理时也知道。

但是`Enumerations`是 C 语言本身的一部分，在预处理时并不为人所知，因此，`stringify(MIN_VALUE)`保留为 stringify(MIN_VALUE)，因此`toString(MIN_VALUE)`

进行整数运算或打印

```
num = 65536 
```

“是的”，有一种方法可以让预处理器执行整数运算，即在`preprocessor`条件中使用它。

```
#if 1024*64 == 65536
    printf("num=65536\n");
#endif 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T06:27:33.537

我认为你最好使用函数而不是宏，原因是宏甚至在编译时才被扩展，更不用说运行时了。

考虑这个例子：

```
#define stringify(V) #V

#include <stdio.h>

int main()
{
    int x = 5;
    const char *str = stringify(x);
    printf("%s\n", str);
} 
```

预处理器完成工作后，代码将如下所示：

```
#include <stdio.h>

int main()
{
    int x = 5;
    const char *str = "x";
    printf("%s\n", str);
} 
```

那是因为所有预处理器指令`#`所做的就是将给定的参数用引号括起来。

如果您想要一个适用于常量、枚举（强制转换为 int）和整数变量的字符串行为，您可以使用`sprintf`：

```
#include <stdio.h>
#include <stdlib.h>

char *stringify(int x)
{
    /* get the length of the required buffer */
    int len = snprintf(0, 0, "%i", x);
    /* allocate memory */
    char *res = malloc(sizeof(char) * (len + 1));
    /* handle allocation failure */
    if(!res)
        return 0;

    /* convert the int to string */
    snprintf(res, len + 1, "%i", x);

    /* return the result */
    return res;
}

int main()
{
    int x = 5;
    char *str = stringify(x);
    printf("%s\n", str);
    /* we free the memory allocated by malloc */
    free(str);
} 
```

这将是您在 C 中实现此目的的一种方法。如果您想了解更多关于我使用的函数的信息，请查看：

*   [http://www.manpagez.com/man/3/vsnprintf/](http://www.manpagez.com/man/3/vsnprintf/)
*   [http://www.manpagez.com/man/3/malloc/](http://www.manpagez.com/man/3/malloc/)

# c# - 获取表名 .net 业务连接器 [AXAPTA]

> ID：14494868
> 
> 赞同：1
> 
> 时间：2013-01-24T05:56:35.927
> 
> 标签：c#, axapta, dynamics-ax-2009, x++, business-connector

我想知道是否有一种方法可以通过使用 .NET 业务连接器从 AOT 获取所有表名，而无需在 AX 中调用 X++ 代码？

根据 MSDN，我们必须提供表名。[[链接](http://msdn.microsoft.com/en-US/library/cc197126%28v=ax.50%29.aspx)]

```
Axapta ax;
AxaptaRecord axRecord;
using (axRecord = ax.CreateAxaptaRecord(tableName));
{
    // Perform actions
} 
```

Axapta 类只有“GetRecordCount”，但没有获取记录名称。

请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-20T08:53:38.063

与前面的答案相反，可以使用 .Net Business Connector 返回表名列表。

此方法使用 AxaptaRecord 上的 ExecuteStmt 方法动态执行 X++ 代码。

从您的客户代码

```
Axapta ax = new Axapta();
using (AxaptaRecord r = ax.CreateAxaptaRecord("SQLDICTIONARY")) 
{
    r.ExecuteStmt("SELECT NAME, TABID FROM %1 WHERE %1.NAME LIKE 'CUST*' && %1.FIELDID == 0");

    while (r.Found) 
    {
        Console.WriteLine((string)r.get_Field("NAME"));
    }
} 
```

参考： http:
[//msdn.microsoft.com/en-us/library/aa594213 (v=ax.50).aspx](http://msdn.microsoft.com/en-us/library/aa594213(v=ax.50).aspx) [http://www.stoneridgesoftware.com/using-like-in-x/](http://www.stoneridgesoftware.com/using-like-in-x/)
[http:// msdn.microsoft.com/EN-US/library/aa848113.aspx](http://msdn.microsoft.com/EN-US/library/aa848113.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T08:40:36.037

您可以从 AX 列出一个列表，[然后访问它](https://stackoverflow.com/questions/14495638/return-a-list-to-net-business-connector/14496827#14496827)！

或者你可以使用[Dictionary](http://msdn.microsoft.com/en-us/library/aa600103%28v=ax.50%29.aspx)类：

```
static void findTables(Args _args)
{
    Dictionary dictionary = new Dictionary();
    TableId tableId;
    TableName tableName;
    for (tableId = dictionary.tableNext(0); tableId; tableId = dictionary.tableNext(tableId))
    {
        tableName = dictionary.tableName(tableId);
        info(strfmt('%1 - %2', tableId, tableName));        
    }
} 
```

这是 X++ 代码，但转换为 C# 是微不足道的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-26T04:16:20.217

```
Axapta ax = new Axapta();
ax.LogonAs(name, domain, null,null,null,null,null);
AxaptaObject dictable = ax.CreateAxaptaObject("Dictionary");
int index = (int)dictable.Call("tableNext", 0);

while(index > 0) {
    AxaptaObject table = (AxaptaObject)dictable.Call("tableObject", index);
    string tableName = (string)table.Call("name");
    int next = (int)dictable.Call("tableNext", index);
    if (next <= index) 
        break;
    index = next;
} 
```

# android - 在更改为另一个 Activity 之前删除 Activity 的所有侦听器

> ID：14494869
> 
> 赞同：0
> 
> 时间：2013-01-24T05:56:46.280
> 
> 标签：android, android-activity, listener

我在当前的 Android 应用程序中使用了很多动画 - 我将 AnimationListener 连接到它们，从而控制流程。我还使用一些监听器来进行声音等，也用于流量控制。在其中一些动画/声音中途更改为另一个活动时，其中一些侦听器会导致崩溃，因为侦听器在活动本身结束/被释放后调用代码。是否有强制在某个视图（实际上是 ViewGroup）上的所有动画以删除活动？任何声音对象也是如此（使用 MediaPlayer）。至于 ViewGroup，这必须在所有包含的视图上递归完成。或者有另一种更简单的方法吗？

到目前为止，这是我的递归函数。我在去另一个活动之前调用它。我在 Activity 的顶级 ViewGroup 上调用它。可以是RelativeLayout、LinearLayout 或其他任何东西。LEVEL 仅用于测试，并不重要。

```
private void clearAnimationsInViewgroup(ViewGroup viewgroup, final int LEVEL) {
    final int CHILDRENCOUNT = viewgroup.getChildCount();
    Log.d(LOG_TAG, "LVL" + LEVEL + ", clearAnimationsInViewgroup: " + viewgroup + ", having child count: " + CHILDRENCOUNT);
    View view;
    Animation animation;
    for (int i = 0; i < CHILDRENCOUNT; i++) {
        view = viewgroup.getChildAt(i);
        // "View" can be a subclass "ViewGroup"?
        if (view instanceof ViewGroup) {
            ViewGroup childViewgroup = (ViewGroup)view;
            clearAnimationsInViewgroup(childViewgroup, LEVEL + 1);
        }
        animation = view.getAnimation();
        if (animation != null) {
            Log.d(LOG_TAG, "LVL" + LEVEL + " clearing anim listener");
            animation.setAnimationListener(null);
        }
    }
} 
```

# javascript - javascript：iOS音频未从保存到主屏幕的页面加载

> ID：14494871
> 
> 赞同：1
> 
> 时间：2013-01-24T05:56:54.947
> 
> 标签：javascript, ios, audio

页面运行良好，直到被保存到主屏幕。如果从主屏幕启动，则不会出现音频。错误是“值不是 AudioBuffer 的类型”。我猜这里使用 XMLHttpRequest() 加载音频存在问题。M4A 文件存在于 cache.manifest 中，因此应该正常缓存。你能请教吗？谢谢

```
function beep(){
    var sound = context.createBufferSource();
    sound.buffer = soundBuffer; <<< here
    sound.connect(context.destination);
    sound.noteOn(0);
} 
```

……

```
if('webkitAudioContext' in window) {
    context = new webkitAudioContext();

    function bufferSound(event) {
        var request = event.target;
        soundBuffer = context.createBuffer(request.response, false);
    }

    var request = new XMLHttpRequest();
    request.open('GET', 'stoplight.m4a', true);
    request.responseType = 'arraybuffer';
    request.addEventListener('load', bufferSound, false);
    request.send(); 
} 
```

更新：使用 Base64 音频编码解决。iOS 不缓存音频文件。

# java - WeakReference 字符串没有被垃圾收集？如何？

> ID：14494875
> 
> 赞同：4
> 
> 时间：2013-01-24T05:57:16.467
> 
> 标签：java, weak-references

我正在阅读`WeakReference`维基百科，我看到了这段代码

```
public class ReferenceTest {
        public static void main(String[] args) throws InterruptedException {

            WeakReference r = new WeakReference(new String("I'm here"));
            WeakReference sr = new WeakReference("I'm here");

            System.out.println("before gc: r=" + r.get() + ", static=" + sr.get());
            System.gc();
            Thread.sleep(100);

            // only r.get() becomes null
            System.out.println("after gc: r=" + r.get() + ", static=" + sr.get());

        }
} 
```

当它运行时，这是结果

> 在 gc 之前：r=我在这里，静态=我在这里
> 
> gc 之后：r=null, static=I'm here

`sr`和`r`变量都是引用字符串对象。`r`现在是垃圾收集但是，为什么`sr`在调用垃圾收集器后没有垃圾收集？

我只是好奇这是怎么发生的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T06:11:50.107

这**不是**因为字符串池*本身*。

真正的原因是`ReferenceTest`该类具有对表示`"I'm here"`字面量的 String 对象的隐式硬引用。该硬引用意味着弱引用 in`sr`不会被垃圾收集¹破坏。

实际上：

*   隐式引用是必要的，即使对应于文字的 String 对象没有被池化。（它们*是*池化的...... JLS 实际上*需要*这个......但我是说即使它们不是引用也会需要。另一种方法是让 Java 每次创建并“实习”一个新的 String 对象字符串文字表达式被评估。那将是*非常*低效的！！）

*   字符串池在*内部*使用了一种弱引用形式……以便可以对未引用的内部字符串进行垃圾收集。如果不是这种情况，那么调用`String.intern()`可能是无法治愈的内存泄漏。

无论如何......如果你小心地构造一个字符串而不使用字符串文字并实习它，就像这样：

```
 char[] chars = {'a', 'b', 'c'};
    WeakReference r = new WeakReference(new String(chars).intern()); 
```

...您应该发现弱引用（最终）被破坏了。（不过可能需要几个 GC 周期。）

* * *

^(1 - 理论上，导致类被卸载和垃圾收集可以摆脱对该字符串文字的最后一个可访问的硬引用。但是，如果在这种情况下发生这种情况，您将无法观察到 WeakReference 对象的状态。至少，在您的示例代码中。此外，除非您使用自定义类加载器启动 JVM，否则我认为不可能导致入口点类的卸载。这不是一件容易或有用的事情。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T06:04:41.487

这是因为字符串池。当您使用 new 运算符创建字符串时，它将在池中创建并可用于正常的垃圾收集。但是当您将字符串定义为文字时，它将在字符串池中创建，并且不会被垃圾收集正常 gc 操作

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-24T06:01:12.923

静态变量仅在卸载类时才会被垃圾收集。因此，您可以看到即使在您手动触发垃圾回收之后，静态变量的值仍然会被打印出来。

# jquery-mobile - 选择菜单中的搜索选项 Jquery-Mobile

> ID：14494882
> 
> 赞同：3
> 
> 时间：2013-01-24T05:57:46.840
> 
> 标签：jquery-mobile

我的项目中有一个 jquery-mobile 的选择菜单。现在列表太大了，我必须在其中添加搜索选项进行过滤。我在 jquery mobile 中搜索了它，但没有在其中找到解决方案。请帮助我，让我知道是否可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T08:22:47.190

可以做到，看看这个例子：http: [//jsfiddle.net/sEMyT/2/](http://jsfiddle.net/sEMyT/2/)

源代码可以在这里找到：[https ://github.com/aliok/jquery-mobile/commits/selectmenu-forceDialog/](https://github.com/aliok/jquery-mobile/commits/selectmenu-forceDialog/)

代码示例：

```
 <a href="#" onclick="$('#select-choice-12').selectmenu('refresh', true); return false;">Refresh the selectmenu (forcerebuild) with clearing the filter value</a>

                <div data-role="fieldcontain">
                    <label for="select-choice-12" class="select">Your state:</label>
                    <select name="select-choice-12" id="select-choice-12" data-native-menu="false" data-force-dialog="true" data-native-menu="false" data-filter="true">
                        <option value="AL">Alabama</option>
                        <option value="AK">Alaska</option>
                        <option value="AZ">Arizona</option>
                        <option value="AR">Arkansas</option>
                        <option value="CA">California</option>
                        <option value="CO">Colorado</option>
                        <option value="CT">Connecticut</option>
                        <option value="DE">Delaware</option>
                        <option value="FL">Florida</option>
                        <option value="GA">Georgia</option>
                        <option value="HI">Hawaii</option>
                        <option value="ID">Idaho</option>
                        <option value="IL">Illinois</option>
                        <option value="IN">Indiana</option>
                        <option value="IA">Iowa</option>
                        <option value="KS">Kansas</option>
                        <option value="KY">Kentucky</option>
                        <option value="LA">Louisiana</option>
                        <option value="ME">Maine</option>
                        <option value="MD">Maryland</option>
                        <option value="MA">Massachusetts</option>
                        <option value="MI">Michigan</option>
                        <option value="MN">Minnesota</option>
                        <option value="MS">Mississippi</option>
                        <option value="MO">Missouri</option>
                        <option value="MT">Montana</option>
                        <option value="NE">Nebraska</option>
                        <option value="NV">Nevada</option>
                        <option value="NH">New Hampshire</option>
                        <option value="NJ">New Jersey</option>
                        <option value="NM">New Mexico</option>
                        <option value="NY">New York</option>
                        <option value="NC">North Carolina</option>
                        <option value="ND">North Dakota</option>
                        <option value="OH">Ohio</option>
                        <option value="OK">Oklahoma</option>
                        <option value="OR">Oregon</option>
                        <option value="PA">Pennsylvania</option>
                        <option value="RI">Rhode Island</option>
                        <option value="SC">South Carolina</option>
                        <option value="SD">South Dakota</option>
                        <option value="TN">Tennessee</option>
                        <option value="TX">Texas</option>
                        <option value="UT">Utah</option>
                        <option value="VT">Vermont</option>
                        <option value="VA">Virginia</option>
                        <option value="WA">Washington</option>
                        <option value="WV">West Virginia</option>
                        <option value="WI">Wisconsin</option>
                        <option value="WY">Wyoming</option>
                    </select>
                </div>
    You can see the source code at <a href="https://github.com/aliok/jquery-mobile/commits/selectmenu-forceDialog/">https://github.com/aliok/jquery-mobile/commits/selectmenu-forceDialog/</a> 
```

# asp.net-mvc - MVC 3，如何不显示一些模型列进行编辑？

> ID：14494884
> 
> 赞同：1
> 
> 时间：2013-01-24T05:57:49.283
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, asp.net-mvc-4

我有带 created_date 列的数据库表，它可以正常添加新记录，因为我只是通过设置它

```
 DateTime.Now 
```

我的问题是当我编辑一条记录时，它会抛出一个错误，

> SqlDateTime 溢出，因为 created_date 值为 '1/1/0001'

我尝试将 created_date 显示为隐藏字段并且它有效。
是否可以不在我的表单中添加 created_date ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-02T09:25:55.190

在我回答这个好问题之前，我要感谢你发帖。

您必须手动编码您的 EDIT/UPDATE 控制器以防止保存空字段。

这是手动编码更新模型的示例。为了填充空字段，您需要从数据库中获取旧值。

```
 [HttpGet]
    public ActionResult UpdateAction(Model model)
    {
        // Get the current values of model
        var _oldModel = db.GetModel(model.Id);

        // Specify or change only the field that is needed to Update

        _oldModel.property1 = model.property1;

        db.Model.Save(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:08:24.660

需要将 created_date 列作为隐藏添加到视图中。当您不添加隐藏时，控制器可能会收到默认值。也许您的字段类型是 DateTime，所以“1/1/0001”超出了它的范围。如果您将类型更改为 Datetime2，它将接受“1/1/0001”。

- - - - - - - 更新 - - - - - - - - - - - -

我重现了这个问题，我认为最好的方法是将隐藏字段放在视图中。因为当视图将模型返回给控制器时，它会发送所有字段，如果缺少一个字段，则它必须为空。但是由于您的列不可为空，因此视图发送“1/1/0001”，并且此值对于 Datetime 是不可接受的。

# python - momoko 异步连接失败

> ID：14494885
> 
> 赞同：0
> 
> 时间：2013-01-24T05:57:52.583
> 
> 标签：python, tornado

我使用 tornadoweb + momoko 制作小型 Web 应用程序。昨天，我通过“Apache Branch”测试了我的应用程序，出现以下错误：

```
ERROR:root:Cannot send error response after headers written
ERROR:root:Uncaught exception POST /url/is/here/ (127.0.0.1)
HTTPRequest(protocol='http', host='localhost:8888', method='POST', uri='/url/is/here/', version='HTTP/1.1', remote_ip='127.0.0.1', body='some_data_here', headers={'Content-Length': '96', 'Connection': 'close', 'Content-Type': 'application/x-www-form-urlencoded', 'Host': 'localhost:8888', 'Accept-Encoding': 'gzip'})
Traceback (most recent call last):
  File "/usr/lib/python2.7/site-packages/tornado/web.py", line 1021, in _stack_context_handle_exception
    raise_exc_info((type, value, traceback))
  File "/usr/lib/python2.7/site-packages/tornado/stack_context.py", line 259, in _nested
    yield vars
  File "/usr/lib/python2.7/site-packages/tornado/stack_context.py", line 229, in wrapped
    callback(*args, **kwargs)
  File "/usr/lib/python2.7/site-packages/momoko/pools.py", line 313, in _io_callback
    state = self._conn.poll()
OperationalError: asynchronous connection failed 
```

当我询问 TestWay 处理程序时显示此消息，如下所示：

```
class TestWay(BaseHandler):

    @property
    def db(self):
        if not hasattr(self.application, 'db'):
            self.application.db = momoko.AsyncClient({
                'host': 'localhost',
                'database': 'database_name',
                'user': 'user_name',
                'password': 'password_here',
                'min_conn': 1,
                'max_conn': 5,
                'cleanup_timeout': 10
            })
        return self.application.db

    @web.asynchronous
    @gen.engine
    def post(self, *args, **kwargs):
        self.db.execute(
            "SELECT key FROM table WHERE id = %s AND deleted = false",
            (self.get_argument('id', 1),),
            callback = (yield gen.Callback('callback_name'))
        )

        cursor = yield gen.Wait('callback_name')

        if cursor is not None:
            result = cursor.fetchall()
            if len(result) != 0 and len(result[0]) != 0:
                response = result[0][0]
        else:
            response = u'some message'
        self.write(response)
        self.finish() 
```

我使用了来自[http://momoko.61924.nl/examples.html的文档](http://momoko.61924.nl/examples.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:01:14.650

这是因为 momoko 尝试在 postgresql.conf 中打开比 max_connection 更多的连接

# sharepoint - 刷新 SharePoint 网站会导致网站页面在底部更新时转到窗口顶部

> ID：14494887
> 
> 赞同：0
> 
> 时间：2013-01-24T05:58:00.323
> 
> 标签：sharepoint

我们最近遇到了一个问题，即在使用 SharePoint 网站时，当向下滚动到页面底部时，网站刷新会导致 SharePoint 网站回到网站顶部，从而产生问题。有没有办法解决 SharePoint 中的此类问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:01:08.017

Is there RichHTML field on the page? If you have one this causes setting focus on that field and no way to change this...

# iphone - 访问和设置 iphone 默认闹钟

> ID：14494890
> 
> 赞同：2
> 
> 时间：2013-01-24T05:58:13.620
> 
> 标签：iphone, ios, ios4, ios5

我想访问 iphone 默认闹钟并根据用户提交的日期设置闹钟。我还希望用户更改闹钟的声音。是否有可能做到这一点，如果有可能我该怎么做？那有任何可用的代码吗？请帮助我摆脱困境。

-提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-29T20:47:15.680

您可能可以使用此代码*读取*iOS 默认警报，但这是一种未记录的方法，并且不允许在 App Store 中使用。

以下是 Alan Yip 的帖子，复制自[http://blog.alanyip.me/read-alarms-in-ios/](http://blog.alanyip.me/read-alarms-in-ios/)

> 有一个私有框架 ( [MobileTimer.framework](https://github.com/caughtinflux/iOS6-Private-Frameworks/tree/master/MobileTimer.framework) ) 最初是为 iOS 股票应用程序提供的，Clock 用于操作时钟和系统警报。
> 
> 显然，我们在处理警报时只会使用两个类， [AlarmManager](https://github.com/caughtinflux/iOS6-Private-Frameworks/blob/master/MobileTimer.framework/AlarmManager.h)和[Alarm](https://github.com/caughtinflux/iOS6-Private-Frameworks/blob/master/MobileTimer.framework/Alarm.h)。首先，我们必须获取**AlarmManager**的单例实例。
> 
> ```
> AlarmManager *manager = [AlarmManager sharedManager]; 
> ```
> 
> 访问告警前，需要先加载告警。
> 
> ```
> [manager loadAlarms]; 
> ```
> 
> 然后，您可以在 Clock 应用程序中访问包含所有可用闹钟 ( **Alarm ) 的数组。**
> 
> ```
> NSArray *alarms = [manager alarms]; 
> ```
> 
> 但是，在加载警报时，框架中存在问题。例如，代码在 SpringBoard 中运行，同时在 Stock Clock 应用程序中修改警报。即使再次在 SpringBoard 中加载警报，返回的警报数据仍然是过时的。**要解决此问题，请在AlarmManager**中挂钩一个类方法，以在从首选项读取原始方法之前强制同步首选项值。
> 
> ```
> %hook AlarmManager
> 
> + (id)copyReadAlarmsFromPreferences {
>   CFPreferencesAppSynchronize(CFSTR("com.apple.mobiletimer"));
>   return %orig;
> }
> 
> %end 
> ```
> 
> 最后，调用`refreshActiveState`before`isActive`可能是一种读取警报是否启用的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T07:40:36.580

如果您正在考虑**访问 iphone 默认警报**。没有办法做到这一点。无论如何，如果您找到了这样做的方法..您肯定不会被允许进入 App Store。

如果你正在寻找一个闹钟应用程序......你必须使用[调度本地通知](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/SchedulingandHandlingLocalNotifications.html#//apple_ref/doc/uid/TP40008194-CH5-SW1)

# c# - 使用 NLog 为同一项目创建两个不同的日志文件（文本文件）的最佳方法

> ID：14494893
> 
> 赞同：3
> 
> 时间：2013-01-24T05:58:28.060
> 
> 标签：c#, asp.net-mvc-3, logging, nlog

我的 asp .net C# MVC3 项目需要两个不同的日志文件。第一个应该记录所有异常级别（从警告到致命）。其他日志文件将用于记录某些信息，例如某些变量的值、某些计算的结果等。

我正在考虑将第二个日志文件配置为仅记录“信息”并使用 .info() 来存储所需的信息。这是正确的方法还是有更好的方法来做到这一点？我正在使用 Nlog 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T09:11:17.707

You should probably use Trace or Debug for your second log file instead of Info, I use Info for the successful process like "Process 1 OK : 10 files created", it's pretty usefull when you have many process to monitor. For what you describe, I think Debug will be perfect.

```
<targets>
  <target name="errorLog" xsi:type="File"
          fileName="error_${date:format=yyyyMMdd}.log"/>
  <target name="traceLog" xsi:type="File"
          fileName="trace_${date:format=yyyyMMdd}.log"/>
</targets>
<rules>
  <logger name="*" writeTo="errorLog" minlevel="Warn"/>
  <logger name="*" writeTo="traceLog" levels="Trace,Debug"/>
</rules> 
```

For more infos [NLog Wiki](https://github.com/nlog/nlog/wiki)

# vba - VBA 代码 - 根据列表中的项目命名工作表，但也确保没有工作表重复

> ID：14494894
> 
> 赞同：1
> 
> 时间：2013-01-24T05:58:28.200
> 
> 标签：vba, excel, excel-2010

我很困惑。我有一个工作簿，用作部分业务的模板作为注册。用户建立他们正在跟踪的注册项目列表。对于主寄存器中的每个项目，我需要创建一个工作表，以提供有关该问题的更多详细信息。新工作表是工作簿“TemplateCRA”中模板的副本。当在登记表“所有权”中制作或更新所有主菜时，使用单个宏完成创建操作

我从这个开始：

```
Sub Button1_Click()
'
' Button1_Click Macro
'
    Dim MyCell As Range, MyRange As Range

        Set MyRange = Sheets("Ownership").Range("B11:B30")
    Set MyRange = Range(MyRange, MyRange.End(xlDown))

    For Each MyCell In MyRange
        If IsEmpty(MyCell) Then End
        Sheets("TemplateCRA").Copy After:=Sheets(Sheets.Count) 'creates a new worksheet
        Sheets(Sheets.Count).Name = "CRA Ref " & MyCell.Value ' renames the new worksheet
        Range("B6").Value = ActiveSheet.Name

    Next MyCell
End Sub 
```

然后我继续这样做，以尝试确保宏首先检查尚未为注册项目创建工作表，如果是，则提醒用户，然后继续循环向下项目列表并创建所需的新工作表.

```
Sub Button2_Click()
    '
    ' Button2_Click Macro
    '
    Dim MyCell As Range, MyRange As Range
    Dim sh As Worksheet, flg As Boolean
    Set MyRange = Sheets("Ownership").Range("B11:B30")
    Set MyRange = Range(MyRange, MyRange.End(xlDown))
    For Each MyCell In MyRange
            If IsEmpty(MyCell) Then End

            For Each sh In Worksheets
                If sh.Name Like "CRA Ref " & MyCell.Value Then flg = True: Exit For
            Next
            If flg = True Then
                MsgBox sh.Name & " Found!"
            ElseIf flg = False Then
                MsgBox "Creating CRA Ref " & MyCell.Value & " now!"
                Sheets("TemplateCRA").Copy After:=Sheets(Sheets.Count) 'creates a new worksheet
                Sheets(Sheets.Count).Name = "CRA Ref " & MyCell.Value ' renames the new worksheet
                Range("B6").Value = ActiveSheet.Name
            End If

    Next MyCell
    MsgBox "You may now complete your CRA for each item"
End Sub 
```

但这不能正常工作。似乎发生的是：

sh.Name 检查循环通过 OK 报告找到工作表，直到找到没有工作表的项目 `Run Time error 91 - object variable with block variable not set` 在第一个 MsgBox 行中报告 a。

谁能建议我有什么问题？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:04:05.777

四件事

1.  请避免使用`End`. 看到这个[链接](https://stackoverflow.com/questions/14460039/a-value-used-in-the-formula-is-of-wrong-data-type-when-calling-a-udf/14460472#14460472)
2.  使用`xlDown`来查找最后一行可能非常冒险。请参阅此[链接](https://stackoverflow.com/questions/14054906/excel-vba-endxldown-acting-weird/14055310#14055310)以了解 @brettdj 如何解释它。
3.  有关如何获取最后一行的信息，请参阅此[链接。](https://stackoverflow.com/questions/11169445/error-finding-last-used-cell-in-vba)
4.  您只需几行即可检查工作表是否存在。不需要循环工作表。

我没有测试过代码，但它应该可以工作。如果您收到任何错误，请告诉我是哪一行给您错误，我们将从那里处理。

```
Sub Button1_Click()
    Dim ws As Worksheet, wsTemp As Worksheet
    Dim MyCell As Range, MyRange As Range
    Dim LRow As Long

    Set ws = ThisWorkbook.Sheets("Ownership")

    With ws
        LRow = .Range("B" & .Rows.Count).End(xlUp).Row

        Set MyRange = .Range("B11:B" & LRow)

        For Each MyCell In MyRange
            If Len(Trim(MyCell.Value)) <> 0 Then
                On Error Resume Next
                Set wsTemp = ThisWorkbook.Sheets("CRA Ref " & MyCell.Value)
                On Error GoTo 0

                If wsTemp Is Nothing Then '<~~ Sheet doesn't exists
                    ThisWorkbook.Sheets("TemplateCRA").Copy After:=ThisWorkbook.Sheets(Sheets.Count)
                    ThisWorkbook.Sheets(Sheets.Count).Name = "CRA Ref " & MyCell.Value
                Else '<~~ Sheet exists
                    MsgBox "sheet exists"
                End If

                set wsTemp = nothing

            End If
        Next MyCell
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T06:30:09.283

问题是你没有`flg`在外部 for 循环中初始化你的。因此，对于第2个循环，默认值为`flg`TRUE，它循环通过内部`for each`循环并且找不到sh，sh-->空-->`runtime error`

修复您的代码：

```
Sub Button2_Click()
    '
    ' Button2_Click Macro
    '
    Dim MyCell As Range, MyRange As Range
    Dim sh As Worksheet, flg As Boolean
    Set MyRange = Sheets("Ownership").Range("B11:B30")
    Set MyRange = Range(MyRange, MyRange.End(xlDown))
    For Each MyCell In MyRange
            If IsEmpty(MyCell) Then
               exit for
            end if
            flg = False ' init the flg each time
            For Each sh In Worksheets
                'Changed Like --> = to ensure the worksheet exists
                If sh.Name = "CRA Ref " & MyCell.Value Then
                    flg = True
                    Exit For
                End If
            Next
            If flg = True Then
                MsgBox sh.Name & " Found!"
            ElseIf flg = False Then
                MsgBox "Creating CRA Ref " & MyCell.Value & " now!"
                Sheets("TemplateCRA").Copy After:=Sheets(Sheets.Count) 'creates a new worksheet
                Sheets(Sheets.Count).Name = "CRA Ref " & MyCell.Value ' renames the new worksheet
                Range("B6").Value = ActiveSheet.Name
            End If

    Next MyCell
    MsgBox "You may now complete your CRA for each item"
End Sub 
```

# c++ - char (*test)[] vs char *test1[] 之间的区别以及如何优雅地初始化测试？

> ID：14494900
> 
> 赞同：1
> 
> 时间：2013-01-24T05:58:42.747
> 
> 标签：c++

只是从 stroustrup 中提取：声明和初始化字符串数组的指针。我可以

```
char *test1[]={"ddd"} 
```

但不能

```
char (*test)[] ={"dfsdf"}. 
```

这些声明之间有什么区别以及如何初始化第二个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:01:12.753

首先是指向 type 的指针数组`char`。
第二个是指向数组类型的指针`char`。

这个小**[代码片段](http://ideone.com/X9WLol)**应该很好理解差异：

```
#include<stdio.h>
#include<string.h>
int main()
{
   char *test1[]={"ddd","aaa"};
   printf("[%s]",test1[0]);   
   printf("[%s]",test1[1]);   

   char arr[]={"bbb"};
   char (*test2)[] = &arr;
   printf("[%s]",*test2);

   return 0;
} 
```

**输出：**

```
[ddd][aaa][bbb] 
```

`test1`是一个指针数组，这个数组的每个下标都指向字符串。
`test1[0]`&`test1[1]`允许您获取被指向的内容。

`test2`是指向另一个数组的指针。取消引用指针`*test2`会为您提供指向的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:03:39.063

您已经使用以下代码创建了一个**指针数组：**

```
char *test1[]={"ddd"}; 
```

下面的代码是一个指向数组的指针。 `"ddd"`隐含地是一个字符数组。

```
char *test1 = "ddd"; 
```

# android - Android 手电筒应用程序停止工作

> ID：14494903
> 
> 赞同：0
> 
> 时间：2013-01-24T05:59:07.700
> 
> 标签：android, android-camera

我一直在写一个简单的闪光灯应用程序，它有一个开/关切换按钮。应用程序启动，我点击“开”按钮，闪光灯一直亮着，直到我点击“关”按钮，但如果我再次点击“开”按钮，闪光灯不亮，我不能找出原因。

这是一个简单的应用程序，代码如下：

```
package com.redcricket.flashlife;

import java.io.IOException;
import java.util.Collection;

import android.app.Activity;
import android.content.pm.PackageManager;
import android.hardware.Camera;
import android.hardware.Camera.AutoFocusCallback;
import android.os.Bundle;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.widget.CompoundButton;
import android.widget.Toast;
import android.widget.ToggleButton;

public class FlashlightActivity extends Activity implements
            SurfaceHolder.Callback {

    private static String TAG = "flashlight";
    private ToggleButton toggleButton1;
    boolean cameraOpened;
    private boolean hasSurface;
    static Camera cam = null;

    @Override
    public void onPause() {
            Log.i(TAG, "[32] onPause()");
            super.onPause();
            if (cam != null) {
                    Log.i("flashlight", "[35] onPause() cam not null. Calling stopPreview and release cam. Setting cam to null.");
                    cam.stopPreview();
                    cam.release();
                    cam = null;
            }
    }

    public void turnFlashOn() {
            Log.i(TAG, "[42] turnFlashOn()");
            if (cam == null) {
                    cam = Camera.open();
                    Log.i(TAG, "[64] turnFlashOn() cam was null. Camera.open() called");
            }
            if (cam != null) {
                    Log.i(TAG, "[67] turnFlashOn() cam nit null. calling setDesiredCameraParameters(cam).");
                    setDesiredCameraParameters(cam);
                    Log.i(TAG, "[69] turnFlashOn() before startPreview");
                    /*
                     * step 6
                     * http://developer.android.com/reference/android/hardware/Camera.html
                     */
                    cam.startPreview();
                    Log.i(TAG,"[75] turnFlashOn() after startPreview");
                    cam.autoFocus(new AutoFocusCallback() {
                            public void onAutoFocus(boolean success, Camera camera) {
                                    if (success) {
                                            Log.i(TAG,
                                                            "[80] turnFlashOn() onAutoFocus success = true");
                                    } else {
                                            Log.i(TAG,
                                                            "[83] turnFlashOn() onAutoFocus success = false");
                                    }
                            }
                    });
                    //Log.i(TAG,"[69] turnFlashOn() after cam.autoFocus TAKEPIC");
                    //cam.takePicture(null, null, null, null);
            }
    }

    void setDesiredCameraParameters(Camera camera) {
            Camera.Parameters parameters = camera.getParameters();
            Log.i("flashlight",
                            "[77] FlashlightActivity.java setDestiredVcmaeria paramers");
            if (parameters == null) {
                    Log.w(TAG,
                                    "Device error: no camera parameters are available. Proceeding without configuration.");
                    return;
            }

            Log.i(TAG, "[84] Initial camera parameters: " + parameters.flatten());

            // SharedPreferences prefs =
            // PreferenceManager.getDefaultSharedPreferences(context);

            initializeTorch(parameters);
            camera.setParameters(parameters);
    }

    private void initializeTorch(Camera.Parameters parameters) {
            Log.i(TAG, "[95] initializeTorch()");
            doSetTorch(parameters);
    }

    private void doSetTorch(Camera.Parameters parameters) {
            Log.i(TAG, "[100] dosetTorch()");
            String flashMode;

            flashMode = findSettableValue(parameters.getSupportedFlashModes(),
                            Camera.Parameters.FLASH_MODE_TORCH);
            Log.i(TAG, "[104] doSetTorch() flashmode is " + flashMode);
            // ,
            // Camera.Parameters.FLASH_MODE_ON,
            // Camera.Parameters.FOCUS_MODE_INFINITY);
            if (flashMode != null) {
                    Log.i(TAG, "[109] openDriver() called parameters.setFlashMode( " + flashMode + ")");
                    parameters.setFlashMode(flashMode);
            }

    }

    private static String findSettableValue(Collection<String> supportedValues,
                    String... desiredValues) {
            Log.i(TAG, "[117] findSettableValue() Supported values: " + supportedValues);
            String result = null;
            if (supportedValues != null) {
                    for (String desiredValue : desiredValues) {
                            if (supportedValues.contains(desiredValue)) {
                                    result = desiredValue;
                                    Log.i("flashlight", "[123] findSettableValue() result set to : " + desiredValue);
                                    break;
                            }
                    }
            }
            Log.i("flashlight", "[128] findSettableValue() Settable value: " + result);
            return result;
    }

    public void turnFlashOff() {
            Log.i("flashlight", "[133] turnFlashOff()");
            if (cam != null) {
                    Log.i("flashlight", "[135] turnFlashOff() cam is not null.");
                    cam.stopPreview();
                    cam.release();
                    cam = null;
            }
    }

    public void addListenerOnButton() {
            Log.i("flashlight", "[143] addListenerOnButton()");
            toggleButton1 = (ToggleButton) findViewById(R.id.toggleButton1);
            toggleButton1.setOnCheckedChangeListener(
                            new CompoundButton.OnCheckedChangeListener() {
                                    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                                            Log.i("flashlight", "[148] onCheckedChanged() isChecked = " + isChecked);
                                            if (isChecked) {
                                                    turnFlashOn();
                                            } else {
                                                    turnFlashOff();
                                            }
                                    }
                            });
    }

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
            Log.i(TAG, "[163] onCreate() hasSurface is " + hasSurface );
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            SurfaceView surfaceView = (SurfaceView) findViewById(R.id.preview_view);
            SurfaceHolder surfaceHolder = surfaceView.getHolder();

            if (hasSurface) {
                    // The activity was paused but not stopped, so the surface still
                    // exists. Therefore
                    // surfaceCreated() won't be called, so init the camera here.
                    Log.i(TAG, "[174] onCreate() calling initCamera() hasSurface is " + hasSurface );
                    initCamera(surfaceHolder);
            } else {
                    Log.i(TAG, "[177] does not have surface, so install callback and wait for surfaceCreated() to init the camera");
                    // Install the callback and wait for surfaceCreated() to init the
                    // camera.
                    surfaceHolder.addCallback(this);
                    surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
            }

            if (this.getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA_FLASH)) {
                    cam = Camera.open();
                    Log.i(TAG, "[202] onCreate(). Camera.open() called");
                    addListenerOnButton();
            } else {
                    Toast.makeText(getApplicationContext(),
                                    "This device does not have flash bulb.\nExitting.", 60)
                                    .show();
            }
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
            Log.i(TAG, "[196] surfaceCreated() hasSurface is " + hasSurface );
            if (holder == null) {
                    Log.e(TAG,
                                    "*** WARNING *** surfaceCreated() gave us a null surface!");
            }
            if (!hasSurface) {
                    hasSurface = true;
                    Log.i("flashlight", "[201] surfaceCreated() set hasSurface to true.");
                    initCamera(holder);
            }
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
            Log.i("flashlight", "[209] surfaceDestroyed()");
            hasSurface = false;
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
            Log.i("flashlight", "[216] surfaceChanged(holder,format,width,height)");
    }

    @Override
    protected void onDestroy() {
            Log.i("flashlight", "[220] onDestroy()");
            try {
                    cam.stopPreview();
                    cam.setPreviewCallback(null);
                    try {
                            cam.release();
                    } catch (Exception e) {
                    }
                    cam = null;
            } catch (Exception e) {
            }
            super.onDestroy();
    }

    /* new stuff */
    private void initCamera(SurfaceHolder surfaceHolder) {
            Log.i(TAG, "[236] initCamera() trying to call openDriver(holder)");

            try {
                    openDriver(surfaceHolder);
            } catch (Exception e) {
                    e.printStackTrace();
            }
    }

    /**
     * Opens the camera driver and initializes the hardware parameters.
     *
     * @param holder
     *            The surface object which the camera will draw preview frames
     *            into.
     * @throws IOException
     *             Indicates the camera driver failed to open.
     */
    public synchronized void openDriver(SurfaceHolder holder)
                    throws IOException {
            Log.i(TAG, "[256] openDriver() top");

            Camera theCamera = cam;
            if (theCamera == null) {
                    Log.i(TAG, "[278] openDriver()");
                    theCamera = Camera.open();
                    Log.i(TAG, "[280] openDriver() Camera.open() called");
                    if (theCamera == null) {
                            Log.i(TAG, "[263] openDriver()");
                            throw new IOException();
                    }
                    cam = theCamera;
            }
            /*
             * do this as per
             * http://developer.android.com/reference/android/hardware/Camera.html
             * step 5
             */
            Log.i(TAG, "[281] openDriver() calling setPreviewDisplay(holder)");
            theCamera.setPreviewDisplay(holder);
    }

    public synchronized boolean isOpen() {
            return cam != null;
    }

    /**
     * Closes the camera driver if still in use.
     */
    public synchronized void closeDriver() {
            Log.i(TAG, "[285] closeDriver()");
            if (cam != null) {
                    cam.release();
                    cam = null;
            }
    }

    /* end new stuff */
} 
```

这是我的评论内联的logcat：

```
[163] onCreate() hasSurface is false
[177] does not have surface, so install callback and wait for surfaceCreated() to init the camera
[202] onCreate(). Camera.open() called
[143] addListenerOnButton()
[196] surfaceCreated() hasSurface is false
[201] surfaceCreated() set hasSurface to true.
[236] initCamera() trying to call openDriver(holder)
[256] openDriver() top
[281] openDriver() calling setPreviewDisplay(holder)
[216] surfaceChanged(holder,format,width,height)
[148] onCheckedChanged() isChecked = true
[42] turnFlashOn()
[67] turnFlashOn() cam nit null. calling setDesiredCameraParameters(cam).
[77] FlashlightActivity.java setDestiredVcmaeria paramers
[84] Initial camera parameters: very long line
[95] initializeTorch()
[100] dosetTorch()
[117] findSettableValue() Supported values: [off, on, auto, torch]
[123] findSettableValue() result set to : torch
[128] findSettableValue() Settable value: torch
[104] doSetTorch() flashmode is torch
[109] openDriver() called parameters.setFlashMode( torch)
[69] turnFlashOn() before startPreview
[75] turnFlashOn() after startPreview
[80] turnFlashOn() onAutoFocus success = true 
```

欢呼！灯亮了！所以我点击关闭按钮。

```
[148] onCheckedChanged() isChecked = false
[133] turnFlashOff()
[135] turnFlashOff() cam is not null. 
```

欢呼！灯熄灭。所以现在我点击打开按钮。

```
[148] onCheckedChanged() isChecked = true
[42] turnFlashOn()
[64] turnFlashOn() cam was null. Camera.open() called
[67] turnFlashOn() cam nit null. calling setDesiredCameraParameters(cam).
[77] FlashlightActivity.java setDestiredVcmaeria paramers
[84] Initial camera parameters: very long line
[95] initializeTorch()
[100] dosetTorch()
[117] findSettableValue() Supported values: [off, on, auto, torch]
[123] findSettableValue() result set to : torch
[128] findSettableValue() Settable value: torch
[104] doSetTorch() flashmode is torch
[109] openDriver() called parameters.setFlashMode( torch)
[69] turnFlashOn() before startPreview
[75] turnFlashOn() after startPreview 
```

嘘！无光 ：（

```
[148] onCheckedChanged() isChecked = false
[133] turnFlashOff()
[135] turnFlashOff() cam is not null.
[32] onPause()
[209] surfaceDestroyed() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:01:18.333

啊! 它现在正在工作。我不得不像这样修改我的 turnFlashOn() 方法：

```
public void turnFlashOn() {
    Log.i(TAG, "[42] turnFlashOn()");
    if (cam == null) {
            Log.i(TAG, "turnFlashOn() step 1");
            cam = Camera.open();
            Log.i(TAG, "[64] turnFlashOn() cam was null. Camera.open() called");
            /* new stuff */
            SurfaceView surfaceView = (SurfaceView) findViewById(R.id.preview_view);
            SurfaceHolder surfaceHolder = surfaceView.getHolder();
            Log.i(TAG, "[174] turnFlashOn() calling initCamera(surfaceHolder) hasSurface is " + hasSurface );
            initCamera(surfaceHolder);
            /* end new stuff */
    } 
```

# apache-flex - 如何在flex中获取advanceddatagrid数据是否被修改？

> ID：14494905
> 
> 赞同：1
> 
> 时间：2013-01-24T05:59:36.890
> 
> 标签：apache-flex, datagrid, advanceddatagrid

我有一个包含许多行和列（可编辑）的高级数据网格。仅当网格中有任何更改时，我才想保存网格中的数据。不使用布尔变量如何做到这一点？是否有任何内置功能，例如：像**'datagridId.isModified'**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:06:29.113

仅供参考 - 上面的代码将在所有场景中触发 - 数据提供者刷新、排序等。有一个集合事件类型会限制它何时调度

```
dataGrid.dataProvider.addEventListener(CollectionEvent.COLLECTION_CHANGE, function(e:CollectionEvent) {
    if(e.kind == CollectionEventKind.UPDATE){
         //this means something changed. event.items will tell you what changed. 

    }
} 
```

=====

另一种方法是使用 itemEditEnd 事件。来自 adobe 文档：

```
<mx:AdvancedDataGrid id="myGrid" 
        itemEditEnd="onItemEditEnd(event);" >   
            private function onItemEditEnd(event:DataGridEvent):void {

                var myEditor:TextInput = 
                    TextInput(event.currentTarget.itemEditorInstance);
                var newVal:String = myEditor.text;
                var oldVal:String = event.currentTarget.editedItemRenderer.data[event.dataField];  
            } 
```

===

最后，一个插件：我们的 Ultimate DataGrid 在内部通过其更改集合跟踪所有更改的项目。[http://flexicious.com/Home/Ultimate](http://flexicious.com/Home/Ultimate)（更改跟踪 API）示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:32:09.207

以下是知道数据是否真正改变的方法：

```
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" creationComplete="init()">
    <mx:AdvancedDataGrid id="myGrid"
                         dataProvider="{dataCollection}"
                         width="200" height="100%" editable="true">
        <mx:groupedColumns>
            <mx:AdvancedDataGridColumn dataField="name"/>
            <mx:AdvancedDataGridColumn dataField="score"/>
        </mx:groupedColumns>
    </mx:AdvancedDataGrid>

    <mx:Script>  
        <![CDATA[  
            import mx.collections.ArrayCollection;
            import mx.events.CollectionEvent;

            [Bindable]  
            private var dataCollection:ArrayCollection = new ArrayCollection([  
                {name:"Name1", score:0},   
                {name:"Name2", score:10},   
            ]);

            private function init():void 
            {
                myGrid.dataProvider.addEventListener(CollectionEvent.COLLECTION_CHANGE, saveData);
            }

            private function saveData(event:CollectionEvent):void 
            {
                //your saving code
                trace("saving");
            }
        ]]>  
    </mx:Script> 
</mx:Application> 
```

# c# - 为什么 WCF 不在 basicHTTP Binding 中维护会话

> ID：14494908
> 
> 赞同：2
> 
> 时间：2013-01-24T05:59:47.073
> 
> 标签：c#, .net, wcf

> **可能重复：**
> [Wcf basicHttpBinding 是否支持 PerSession？](https://stackoverflow.com/questions/7330030/does-wcf-basichttpbinding-support-persession)

为什么 WCF 不支持 basicHTTPBinding 的会话，因为 HTTP 是无状态的，但支持 wsHTTPBinding 的会话？（我知道应该为 wsHTTPBinding 启用 ReliableSession 或 Security 才能使 PerSession 工作），但是，它是如何工作的？谁能解释一下？

# mongodb - 如何在 mongodb 中使用两种通配符？

> ID：14494911
> 
> 赞同：0
> 
> 时间：2013-01-24T05:59:54.063
> 
> 标签：mongodb

```
{
"_id" : ObjectId("50ff7c427995fe330400000a"),
"group_name" : "College",
"owner" : "50f69176904e1d66affec20d",
"users" : [
    {
        "id" : "50f69176904e1d66affec20d"
    },
    {
        "id" : "50f69176904e1d66affec20d"
    },
    {
        "id" : "50f69176904e1d66affec20d"
    }
]
}
{
"_id" : ObjectId("50ff88e17995fe3204000002"),
"group_name" : "PHP",
"owner" : "50f69176904e1d66affec20d",
"users" : [
    {
        "id" : "50f69176904e1d66affec20d"
    }
],
"visibility" : "public"
}
{
"_id" : ObjectId("50ff86e17995fe3204000001"),
"group_name" : "Lithium",
"owner" : "50f69176904e1d66affec20d",
"users" : [
    {
        "id" : "50f69176904e1d66affec20d"
    }
],
"visibility" : "public"
}
{
"_id" : ObjectId("50ff98397995fe3204000003"),
"group_name" : "MongoDB",
"owner" : "50f69176904e1d66affec20d",
"users" : [
    {
        "id" : "50f69176904e1d66affec20d"
    }
],
"visibility" : "public"
} 
```

在上面的集合中，我想使用通配符来获取 group_name。通配符应该是双向的，即；如果我在搜索字符串中输入“h”，那么我应该能够同时获得“Lithium”和“PHP”。请帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T08:04:49.617

只需使用正则表达式

```
db.collection.find({
  'group_name': /.*h.*/i
}, callback) 
```

但是，是的，除非您使用新的文本搜索功能，否则此查询不会被编入索引

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T07:45:58.657

听起来您需要 mongoDB 的新[文本搜索](http://blog.mongodb.org/post/40513621310/mongodb-text-search-experimental-feature-in-mongodb)功能。另请查看 2.4[发行说明](http://docs.mongodb.org/manual/release-notes/2.4/#text-indexes)。

# android - 在android中，这个程序在进度条加载后不检索xml数据帮助我

> ID：14494913
> 
> 赞同：1
> 
> 时间：2013-01-24T05:59:58.267
> 
> 标签：android, xml-parsing, progressdialog

\在android编程中..我喜欢从url（xmlparsing）检索xmltags中的数据，同时我想加载进度，直到从xmltags检索数据。我附上我的代码检查它的仪式或错误谢谢\

```
 \\main activity\\

public class act extends Activity
{

 \\button used to start the function after the click\\

    Button b;
    public ProgressDialog mDialog;
    @Override
     public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        b=(Button)findViewById(R.id.button1);
        b.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                new GetTask().execute();

            }
        });
}
   \\my asynctask\\

class GetTask extends AsyncTask<Object, Void, String>
{

    @Override
    protected void onPreExecute()
    {
        super.onPreExecute();

         mDialog = new ProgressDialog(act.this);
         mDialog.setMessage("Please wait...");
         mDialog.show();
    }
     @Override
    protected String doInBackground(Object... params)
    {

  \\ui programetically declare the textviews\\

                 try {
                    LinearLayout layout = new LinearLayout(act.this);
                    layout.setOrientation(1);
                    TextView no[];
                    TextView na[];
                    TextView c[];

                  URL url = new URL("http://api.androidhive.info/pizza/?format=xml");          
                  DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();          
                  DocumentBuilder db = dbf.newDocumentBuilder();
                  Document doc = db.parse(new InputSource(url.openStream()));
                  doc.getDocumentElement().normalize();
                  NodeList nodeList = doc.getElementsByTagName("item");
                  no = new TextView[nodeList.getLength()];
                  na = new TextView[nodeList.getLength()];
                  c = new TextView[nodeList.getLength()];

                  for (int i = 0; i < nodeList.getLength(); i++) {
                      Node node = nodeList.item(i);
                      no[i] = new TextView(act.this);
                      na[i] = new TextView(act.this);
                      c[i] = new TextView(act.this);
                      Element fstElmnt = (Element) node;

                      NodeList idlist = fstElmnt.getElementsByTagName("id");
                      Element numelement = (Element) idlist.item(0);
                      idlist = numelement.getChildNodes();
                      no[i].setText("ID="+ ((Node) idlist.item(0)).getNodeValue());

                      NodeList namelist = fstElmnt.getElementsByTagName("name");
                      Element namelement = (Element) namelist.item(0);
                      namelist = namelement.getChildNodes();
                      na[i].setText("pizza name="+ ((Node) namelist.item(0)).getNodeValue());

                      NodeList costlist = fstElmnt.getElementsByTagName("cost");
                      Element costlement = (Element) costlist.item(0);
                      costlist = costlement.getChildNodes();
                      c[i].setText("cost="+ ((Node) costlist.item(0)).getNodeValue());

                      layout.addView(no[i]);
                      layout.addView(na[i]);
                      layout.addView(c[i]);
                      setContentView(layout);

                      }} 
             catch (Exception e) {
                     }
        return null;

            }

            @Override
    protected void onPostExecute(String result)
    {
        super.onPostExecute(result);
        mDialog.dismiss(); 

            }
   }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:16:57.367

首先，您不能在 doInBackground() 中进行与 UI 相关的操作

如果你想要你可以在完成 doInBackground() 过程后在 onPostExecute() 中完成...

所以改变你的逻辑..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:27:23.930

以下代码是错误的。

你的 onPostExecute() 中没有任何数据，所以无论你想显示什么，只需在 onPostExecute() 中显示该内容，而不是 doInBackground()。

所以改变它..

您可以在 LazyLoading 或 Asynctask 应用程序中找到一个示例示例：-

```
https://github.com/thest1/LazyList

https://github.com/ethervoid/android-async-task-example 
```

可以用下面的代码你可以得到你的答案......！！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T07:34:55.090

```
NodeList namelist;
String[] no,na,c;
 try {
              URL url = new URL("http://api.androidhive.info/pizza/?format=xml");          
              DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();          
              DocumentBuilder db = dbf.newDocumentBuilder();
              Document doc = db.parse(new InputSource(url.openStream()));
              doc.getDocumentElement().normalize();
              NodeList nodeList = doc.getElementsByTagName("item");

              no = new String[nodeList.getLength()];
              na = new String[nodeList.getLength()];
              c = new String[nodeList.getLength()];
              for (int i = 0; i < nodeList.getLength(); i++) {
                  Node node = nodeList.item(i);

                  Element fstElmnt = (Element) node;

                  NodeList idlist = fstElmnt.getElementsByTagName("id");
                  Element numelement = (Element) idlist.item(0);
                  idlist = numelement.getChildNodes();
                  no[i]=((Node) idlist.item(0)).getNodeValue();                     

                  NodeList namelist = fstElmnt.getElementsByTagName("name");
                  Element namelement = (Element) namelist.item(0);
                  namelist = namelement.getChildNodes();
                  na[i]=((Node) namelist.item(0)).getNodeValue()

                  NodeList costlist = fstElmnt.getElementsByTagName("cost");
                  Element costlement = (Element) costlist.item(0);
                  costlist = costlement.getChildNodes();

                  }} 
         catch (Exception e) {
                 }
    return null;

        }

        @Override
protected void onPostExecute(String result)
{
    super.onPostExecute(result);
                LinearLayout layout = new LinearLayout(act.this);
                layout.setOrientation(1);
                TextView no[];
                TextView na[];
                TextView c[];
              no = new TextView[nodeList.getLength()];
              na = new TextView[nodeList.getLength()];
              c = new TextView[nodeList.getLength()];
              for (int i = 0; i < nodeList.getLength(); i++) {

                  no[i] = new TextView(act.this);
                  na[i] = new TextView(act.this);
                  c[i] = new TextView(act.this);
                  no[i].setText("ID="+no[i] );
                 na[i].setText("pizza name="+ na[i]);
                c[i].setText("cost="+ ((Node) costlist.item(0)).getNodeValue());

                  layout.addView(no[i]);
                  layout.addView(na[i]);
                  layout.addView(c[i]);
                  setContentView(layout);
    mDialog.dismiss(); 

        } 
```

# validation - Grails：对类的自定义约束使 Validateable 不起作用

> ID：14494916
> 
> 赞同：0
> 
> 时间：2013-01-24T06:00:10.353
> 
> 标签：validation, grails

我有一个类`Report`通过将其添加到`grails.validateable.classes`Config.groovy 的属性中进行验证：

```
class Report {

    /* fields */
    Product product

    static constraints = {
        product nullable: true, validator: { val ->
            if(val && val.quantity > 0) {
                return (val.code && val.locations.size() > 0)
            }
        }
    }
}

class Product {
    BigDecimal quantity
    String code
    List<Location> locations
} 
```

有了这个，我尝试`Report`通过调用来验证 a`report.validate()`但是`validate`总是返回 true。我尝试制作自定义验证器：

```
...
product validator: { val ->
    return false
} 
```

所以调用`validate`a`Report`总是返回 false 但它仍然返回 true 使实例有效。据我所知，在调用 Validateable 时不会调用类上的自定义验证器`validate`。

这是一个已知的错误？如果是的话，我在任何地方都找不到参考。我不能对可验证的类使用自定义验证器吗？还是我的代码有问题？

**编辑**：修正错字。应该`grails.validateable.classes`代替`grails.validateable.class`

# javascript - css - 固定位置侧边栏导航与页脚重叠

> ID：14494918
> 
> 赞同：1
> 
> 时间：2013-01-24T06:00:22.780
> 
> 标签：javascript, jquery, scroll

我在我的网站中使用[引导程序的附加代码。](http://twitter.github.com/bootstrap/assets/js/bootstrap-affix.js)

但它在页脚重叠。

有人可以帮我在页脚之前停止滚动而不是重叠它。

我创建了一个演示来向您展示我的网站的外观。

整页jsfiddle `demo`：

[点这里观看](http://jsfiddle.net/Viruthagiri/Z6Uzm/1/embedded/result/)

这是代码。

[点这里观看](http://jsfiddle.net/Viruthagiri/Z6Uzm/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T01:33:26.493

最后我找到了一个可以完成这项工作的插件。我希望这个答案对其他人有用

[https://github.com/bigspotteddog/ScrollToFixed](https://github.com/bigspotteddog/ScrollToFixed)

# php - 如何在php中匹配这个模式

> ID：14494920
> 
> 赞同：2
> 
> 时间：2013-01-24T06:00:33.040
> 
> 标签：php, preg-replace

我正在寻找 php 中的正则表达式来解析以下模式的字符串。该命令由双方括号包裹为

```
[[a src="" desc=""]] 
```

其中 a、src 和 desc 是关键字（不会更改）。src 必须给出，但 desc 是可选的，src 或 desc 的值可以用双引号或单引号括起来。src 和 desc 可以按任何顺序给出。例如，以下模式都是有效的

```
[[a src="http://a.c.d" desc ="hello"]]
[[a src   ="http://a.c.d" desc= 'hello']]
[[a desc ="hello " src=  'http://a.c.d' ]]
[[a src = "http://a.c.d" ]]
[[a    src="http://a.c.d" desc ="hello"]] 
```

value 和 'a', 'src', 'desc', '=' （不带引号）之间的任何空格都应该被忽略。我将用 html 标签替换这个命令，比如

SOMETHING_EXTRACT_FROM_DESC

想出一个正则表达式来完成这项工作似乎相当困难。现在我有 3 个正则表达式设置来分别处理不同的情况。看起来像这样

```
$pattern = '/\[\[a[:blank:]+src[:blank:]*=[:blank:]*"(.*?)"[:blank:]+desc[:blank:]*=[:blank:]+"(.*?)"\]\]/i';
$rtn = preg_replace($pattern, '<a href="${1}">${2}</a>', $src);

$pattern = '/\[\[a[:blank:]+desc[:blank:]*=[:blank:]*"(.*?)"[:blank:]+src[:blank:]*=[:blank:]+"(.*?)"\]\]/i';
$rtn = preg_replace($pattern, '<a href="${1}">${2}</a>', $rtn);

$pattern = '/\[\[a[:blank:]+src[:blank:]*=[:blank:]+"(.*?)"\]\]/i';
$rtn = preg_replace($pattern, '<a href="${1}">${2}</a>', $rtn); 
```

但这不起作用，正则表达式很难学习:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:34:01.920

我写了一个正则表达式，它匹配你所要求的一切，但会带来一些开销，我将在最后解释。但首先是正则表达式：

看起来像这样：

```
\[\[a(\s+(src|desc)\s*=\s*('[^']*'|"[^"]*")){1,2}\s*\]\] 
```

我会停下来让你理解它：

*   `\[\[ ... \]\]`比赛`[[ ... ]]`，开始和结束
*   `\s`匹配任何空格（空格和制表符），`\s+`至少需要一个
*   `(src|desc)`匹配 string`src`或 string `desc`。**这是一个 OR 运算符：匹配`src`OR `desc`。**
*   `'[^']*`' 匹配两个单引号，以及介于两者之间的不是单引号的任何内容
*   `"[^"]*"`与双引号相同
*   `('[^']*'|"[^"]*")`匹配以上两个之一
*   `(src|desc)\s*=\s*('[^']*'|"[^"]*")`匹配一个像`src='something'`
*   `{1,2}`匹配一次或两次，附加到上面的表达式，匹配其中一个或两个标记

差不多就是这样。唯一的问题是它也会匹配这个：

```
[[a src="http://a.c.d" src="http://a.c.d"]] 
```

我认为这是不匹配的。如果它不打扰你，你很高兴，否则你需要改变使用带有 ors 的大原子的整个概念（即：）`|`并采取不同的方法。例如，您可以使用前瞻。但它会很快变得非常讨厌。

你可以在**[这里在线测试](http://gskinner.com/RegExr/)**

如果我删除反斜杠和 \s 的东西，正则表达式的可读性会更高。这行不通，但我认为它会帮助您理解它：

```
[[a ( (src|desc)=('[^']*'|"[^"]*") ){1,2} ]] 
```

# c# - .net 网络服务查询

> ID：14494921
> 
> 赞同：0
> 
> 时间：2013-01-24T06:00:34.550
> 
> 标签：c#, .net, web-services, iis-7

我在我的 IIS 上部署了一个示例 Web 服务，但默认情况下只能使用安全连接 (https) --port 443 访问。这是否也意味着我的网络服务已经安全了？

考虑到我仅将自签名证书用于测试目的，并且将来会使用签名证书。

谢谢！

# c++ - 在 C++ 中计算汉明序列（只有 2、3 和 5 作为除数的数字序列）

> ID：14494931
> 
> 赞同：0
> 
> 时间：2013-01-24T06:01:28.617
> 
> 标签：c++, math, hamming-numbers

> **可能重复：**
> [仅使用素数 2、3 和 5 生成序列，然后显示第 n 项 (C++)](https://stackoverflow.com/questions/14493373/generating-a-sequence-using-prime-numbers-2-3-and-5-only-and-then-displaying)

我一直在头脑风暴这件事，我就是想不通。我需要解决以下问题：

> 生成以下序列并显示序列中的第 n 项
> 
> 2,3,4,5,6,8,9,10,12,15 等.....序列只有素数 2,3,5

我需要使用基本的 C++，例如 while、for、if 等。没什么特别的。我不能简单地使用数组，因为我对它们了解不多，并且我想了解解决方案的代码。

我不是要求一个完整的解决方案，而是要求指导以解决这个问题......拜托。

我的问题是，如果序列中的数字可以被除 2、3 和 5 以外的任何其他素数整除，我不知道如何检查该数字。

另外假设我正在检查这样的数字：

```
for(int i=2; i<n; i++){
    if(i%2==0){
        cout<<i<<", ";
    }else if(i%3==0){
        cout<<i<<", ";
    }else if(i%5==0){
        cout<<i<<", ";
    } 
```

它不起作用仅仅是因为它会产生诸如 14 之类的数字，它可以被质数 7 整除。所以我需要弄清楚如何确保该序列只能被 2、3 和5.....我在网上找到了很多解决问题的材料，但是他们的解决方案太先进了，我不能使用它们（而且大多数都是其他语言的......不是C++）。我敢肯定有一个更简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:10:42.740

将下一个 i 值存储在临时变量中，然后尽可能将其除以 2（例如，只要 i%2 == 0）。然后尽可能除以 3。然后到 5。然后检查，还剩下什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T08:22:12.940

您的代码的问题在于您只检查主要因素之一，而不是全部。

以 14 为例。您的代码仅检查 2,3 或 5 是否是 14 的因数，这并不完全是您所需要的。确实，正如您所说，您发现 2 是 14 的因数，但另一个因数是 7。您缺少的是进一步检查 7 是否只有因子 2,3 和 5（事实并非如此）。您需要做的是消除所有因素 2,3 和 5 并查看剩余的内容。

让我们举两个例子：60和42

**60**

从因素 2 开始

*   60 % 2 = 0，所以现在检查 60 / 2 = 30。
*   30 % 2 = 0，所以现在检查 30 / 2 = 15。
*   15 % 2 = 1，因此不再有 2 的因数。

继续因素 3

*   15 % 3 = 0，所以现在检查 15 / 3 = 5。
*   5 % 3 = 2，因此不再有 3 的因数。

以因子 5 结束

*   5 % 5 = 0，所以现在检查 5 / 5 = 1
*   1 % 5 = 1，因此不再有 5 的因数。

我们最终得到 1，所以这个数字是序列的一部分。

**对于 42**

再次，从因素 2 开始

*   42 % 2 = 0，所以现在检查 42 / 2 = 21。
*   21 % 2 = 1，因此不再有 2 的因数。

继续因素 3

*   21 % 3 = 0，所以现在检查 21 / 3 = 7。
*   7 % 3 = 1，因此不再有 3 的因数。

以因子 5 结束

*   7 % 5 = 2，因此不再有 5 的因数。

我们最终得到 7（不同于 1），所以这个数字不是序列的一部分。

所以在你的实现中，你可能应该在你的 for 循环中嵌套 3 个 while 循环来反映这个推理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:24:18.053

那这个呢？

```
bool try_hamming(int n)
{
    while(n%2 == 0)
    {
        n = n/2;
    }
    while(n%3 == 0)
    {
        n = n/3;
    }
    while(n%5 == 0)
    {
        n = n/5;
    }
    return n==1;
} 
```

当 n 是汉明数时，这应该返回 true，否则返回 false。所以主要功能可能看起来像这样

```
 #include<iostream>
 using namespace std;
 main()
 {
      for(int i=2;i<100;++i)
      {
          if(try_hamming(i) )
          cout<< i <<",";
       }
      cout<<end;
  } 
```

这应该打印出所有小于 100 的汉明数

# visual-studio-2012 - 添加参数后子报表不起作用

> ID：14494933
> 
> 赞同：0
> 
> 时间：2013-01-24T06:01:48.313
> 
> 标签：visual-studio-2012, rdlc, subreport, microsoft-reporting

我正在研究关于 VS2012 的 RDLC 报告

当我尝试在子报表上添加参数时，我的报表无法正常工作，并且出现此错误“错误：无法显示子报表”。</p>

在添加参数之后，甚至不会调用此事件 LocalReport_SubreportProcessing(object sender, SubreportProcessingEventArgs e)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T04:39:30.163

我意识到我在这里聚会迟到了，但是在我的搜索过程中出现了这个问题，所以也许这会对某人有所帮助。我终于在我的 Web 应用程序的主要报告中得到了 sup 报告。

在 Page_Load 我添加了

```
ReportViewer1.LocalReport.SubreportProcessing += new Microsoft.Reporting.WebForms.SubreportProcessingEventHandler(SetSubDataSource);
this.ReportViewer1.LocalReport.Refresh(); 
```

然后在我添加了事件

```
public void SetSubDataSource(object sender, SubreportProcessingEventArgs e)
{
    var report = ((LocalReport)sender).DataSources[0];
    var tableid = e.Parameters["tableId"].Values[0];
    ObjectDataSource2.SelectParameters[0].DefaultValue = tableid;
    e.DataSources.Add(new ReportDataSource("DataSet2", ObjectDataSource2));
} 
```

您还需要确保主报表的子报表以及子报表本身具有正确定义的参数和数据。这适用于我使用带有一个参数的存储过程，但我认为一旦正确触发就很容易添加额外的参数。我还将我的子报表数据类型的常规选项设置为整数（我的 sproc 所期望的类型）并允许空值以及将默认值设置为“指定值”并将其保留为 (Null)。

当我添加时，事情终于开始起作用了

```
<SelectParameters>
    <asp:Parameter Name="tableId" Type="Int32" />
</SelectParameters> 
```

在我的子报表数据源对象的 ObjectDataSource2 节点内，您的里程可能会有所不同。

# ruby - 如何使用 Capybara 在浏览器中打开多个选项卡？

> ID：14494935
> 
> 赞同：2
> 
> 时间：2013-01-24T06:02:03.213
> 
> 标签：ruby, capybara, selenium-webdriver

我需要在单个浏览器中打开多个选项卡，并且需要切换所有选项卡。

给我你的建议。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:35:04.467

我对水豚没那么强。所以，我正在提供使用硒在标签之间切换的解决方案。

例如，您单击网页中的按钮，它将打开一个新页面。

新页面可能会在`new tab in the same browser window`或中打开`in a new browser window`。这不受硒的控制。它将由您使用的浏览器控制。

例如，以 firefox 为例，`tools->ptions-> tabs-> open new windows in a new tab instead`请检查该选项。例如，如果您单击一个按钮，它将仅在同一浏览器窗口的新选项卡中打开一个页面。如果您未选中，则表示它将在新的浏览器窗口中打开一个页面。同样，每个浏览器都有自己的设置。

试试这个代码：

```
 new Actions(driver)
.sendKeys(driver.findElement(By.tagName("html")), Keys.CONTROL)
.sendKeys(driver.findElement(By.tagName("html")), Keys.NUMPAD2)
.build().perform(); 
```

在上面的 Keys.NUMPAD2 中，您将移动到会话中的第二个选项卡。您可以通过分别给出 NUMPAD3、NUMPAD4 等...来移动到第三、第四等...。这里我使用的是 Windows 操作系统，如果您在其他操作系统中使用它们的快捷方式。

我希望这能帮到您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-09T23:04:36.393

你可以在 Ruby 中使用这个精确的函数：

```
page.driver.browser.switch_to.window(page.driver.browser.window_handles.last) 
```

# node.js - 用 node.js 编写的服务器如何调用谷歌地图的 api？

> ID：14494937
> 
> 赞同：3
> 
> 时间：2013-01-24T06:02:16.677
> 
> 标签：node.js, google-maps

例如，我在服务器中有很多 GPS 数据。（服务器是用 node.js 编写的）服务器可以向谷歌地图发送一个帖子（和数据）来调用它的 api 并为服务器返回数据吗？

希望你能举个例子给我解释一下（有代码更好！:)）</p>

非常感谢。

# ruby-on-rails - rack-pjax 无法识别 `jQuery ->`

> ID：14494938
> 
> 赞同：1
> 
> 时间：2013-01-24T06:02:27.550
> 
> 标签：ruby-on-rails, ruby-on-rails-3, pjax

在`application.js`文件中，我有要求和关于 JQuery 的声明：

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require jquery.pjax
//= require_tree .

jQuery ->
  $('#id').pjax('[data-pjax-container]') 
```

但是，我`Uncaught SyntaxError: Unexpected token >`在控制台中收到错误。和文件正在加载`jquery.ja`到`jquery.pjax.js`检查器的资源和网络选项卡中，所以我知道它至少正在获取 jquery 和 pjax.jquery 代码，但是，``jQuery ->`表示 document.ready 的快捷方式会引发错误。

当我将代码切换为：

```
$(document).ready(function() {
  $('#ce').pjax('[data-pjax-container]')
}); 
```

我没有得到错误。Rails 中 document.ready 的正确快捷方式是什么？[我在这里](http://railscasts.com/episodes/294-playing-with-pjax)遵循 PJAX 教程，它说要使用这种表示法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:08:36.830

您输入的是 Coffeescript 语法，这就是它出现语法错误的原因。

# xaml - 由于 Windows 应用商店应用程序中的 GridView 导致内存泄漏

> ID：14494940
> 
> 赞同：1
> 
> 时间：2013-01-24T06:02:41.667
> 
> 标签：xaml, memory-leaks, windows-store-apps, winrt-xaml

我有以下`GridView`

```
<GridView
            x:Name="itemGridView" 
            AutomationProperties.AutomationId="ItemsGridView"
            AutomationProperties.Name="Items"
            TabIndex="1"
            Grid.RowSpan="2"
            Padding="116,136,116,46"
            SelectionMode="Single"
            IsSwipeEnabled="false"
            Visibility="Collapsed">

                <GridView.ItemTemplate>
                    <DataTemplate>
                        <!--<Border BorderBrush="DarkSeaGreen" BorderThickness="1">-->
                        <Grid Background="{Binding objBackgroundColor}" Opacity="1" Width="400" Height="80">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="30"></RowDefinition>
                                <RowDefinition Height="*"></RowDefinition>
                            </Grid.RowDefinitions>
                            <Grid Grid.Row="0">
                                <TextBlock Text="{Binding objCustomTestPaper.Name}" TextWrapping="Wrap"  FontWeight="SemiBold" VerticalAlignment="Top" Foreground="{Binding objForegroundColor}" Style="{StaticResource TitleTextStyle}" FontSize="20" MaxHeight="25"  Margin="10,5,10,0" />
                            </Grid>
                            <Grid Grid.Row="1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="auto"></ColumnDefinition>
                                    <ColumnDefinition Width="*"></ColumnDefinition>
                                    <ColumnDefinition Width="120"></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <!--<Image Grid.Column="0" Height="35" VerticalAlignment="Center" HorizontalAlignment="Center" Source="Assets/paper.png"></Image>-->
                                <StackPanel Grid.Column="0" Margin="5,7,0,0">
                                    <callisto:Rating  FontStretch="SemiCondensed" ItemCount="5" Value="{Binding objCustomTestPaper.TestRating}" FontWeight="Light" VerticalAlignment="Bottom"  Margin="0,2,5,1" Background="Transparent"  HorizontalAlignment="Left" Foreground="{Binding objForegroundColor}" IsHitTestVisible="False" FontSize="12" >
                                    </callisto:Rating>
                                    <StackPanel  Orientation="Horizontal" HorizontalAlignment="Left">
                                        <TextBlock Text="Attempted by others:" Margin="4,0,0,0" FontSize="12" FontWeight="Light" Foreground="{Binding objForegroundColor}"></TextBlock>
                                        <TextBlock Text="{Binding objCustomTestPaper.AttemptCount}" FontWeight="SemiBold" Margin="5,0,0,0" FontSize="12" Foreground="{Binding objForegroundColor}"></TextBlock>
                                        <TextBlock Text="times" Margin="3,0,0,0" FontSize="12" FontWeight="Light" Foreground="{Binding objForegroundColor}"></TextBlock>
                                    </StackPanel>
                                </StackPanel>
                                <StackPanel VerticalAlignment="Stretch" Grid.Column="2" Margin="0,0,0,0" >
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center">
                                        <TextBlock Text="Time:" FontSize="16" Foreground="{Binding objForegroundColor}" VerticalAlignment="Bottom" FontWeight="SemiLight"></TextBlock>
                                        <TextBlock Text="{Binding strTestDuration}" Margin="5,0,0,0" FontSize="18" VerticalAlignment="Bottom" Foreground="{Binding objForegroundColor}" FontWeight="SemiLight"></TextBlock>
                                    </StackPanel>
                                    <StackPanel  Margin="0,2,0,0" Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center">
                                        <TextBlock Text="Points:" FontSize="16" Margin="0,0,0,0" VerticalAlignment="Bottom" Foreground="{Binding objForegroundColor}" FontWeight="SemiLight"></TextBlock>
                                        <TextBlock Text="{Binding objCustomTestPaper.TotalMarks}" Margin="5,0,0,0" VerticalAlignment="Bottom" FontSize="18" Foreground="{Binding objForegroundColor}" FontWeight="SemiLight"></TextBlock>
                                    </StackPanel>
                                </StackPanel>
                            </Grid>
                        </Grid>
                    </DataTemplate>
                </GridView.ItemTemplate>

            </GridView> 
```

它工作正常并成功加载数据，但是当我按下后退按钮时，数据仍保留在内存中（不可用），并在对页面的各种访问中不断增加。我不知道如何清除调用`GridView`when`OnNavigationFrom(,)`方法的项目。我正在尝试使用`objGridView.Items.Clear()`，但它会引发一些`HRXXXX`异常。

# android - 对 strings.xml 文件的更改是否需要编译才能使更改生效？

> ID：14494942
> 
> 赞同：1
> 
> 时间：2013-01-24T06:02:50.123
> 
> 标签：android, xml

我正在制作一个 Android 游戏，我希望通过 XML 指定一些数据，特别是`strings.xml`文件。对文件中数据的更改是否`strings.xml`需要我在所做的更改生效之前再次编译项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:13:22.333

你的问题的答案是肯定的。这是因为您以 xml 文件的形式引用这些字符串，`@String/somename`因此该 id 必须在您的`R.java`文件中可用。因此，要反映`R.java`文件中的更改，您必须编译代码并且可能是干净的项目以反映更改

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T06:14:41.623

是的，他们确实需要编译。

为了节省时间，请在 Eclipse 中设置自动构建，然后在您保存代码时自动构建。这将节省大量时间，因为您只需按 Ctrl + S

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T06:10:05.183

是的，确实需要为所有更改再次编译..

# javascript - jQuery Validation 逗号和点

> ID：14494945
> 
> 赞同：0
> 
> 时间：2013-01-24T06:02:57.973
> 
> 标签：javascript, jquery, validation

我正在尝试为我的目的扩展 jQuery 验证脚本，但我仍然没有任何成功。我有 utils.js，我在其中创建了 2 个新函数

```
function createValidatorForForm(id) {
var formValidator = $(id).validate({
    errorClass:'help-inline',
    errorElement:'p',

    highlight:function (element, errorClass, validClass) {
        $(element.parentNode.parentNode).addClass('error')
    },
    unhighlight:function (element, errorClass, validClass) {
        $(element.parentNode.parentNode).removeClass('error')
    }
});
return formValidator;}

function extendJQueryValidator() {
$.validator.addMethod("validNumber", function(value, element) {
    return this.optional(element) || /^(\d{1,3}(,\d{3})*(\.\d\d)?|\.\d\d)$/.test(value);
    }, "Message");} 
```

然后我在 html 中使用它们

```
<script type="text/javascript">
extendJQueryValidator();
createValidatorForForm("#form");
</script> 
```

然后我`class="input-small validNumber required"`用于所需的字段。但我得到了一个简单的数字验证。哦，是的，我需要验证带有逗号和点的数字。如果你给我关于如何扩展 validNumber 方法以便它可以删除字段中的空格的建议，那将是非常好的。

# nagios - 纳吉奥斯 vs 冈利亚

> ID：14494948
> 
> 赞同：25
> 
> 时间：2013-01-24T06:03:11.543
> 
> 标签：nagios, ganglia

然而，也许是一个奇怪而绿色的问题

有什么是 Nagios 或 Ganglia 能做到而对方不能做到的吗？

在监控方面，警报一般。

我正在为我学校的计算机俱乐部寻找一个通用的解决方案，在我看来，这就像比较 norton 和 advast。两者都是防病毒软件，但是其中一个比另一个有什么特定的好处吗？还是我现在在问一个非常愚蠢的问题？

谢谢你。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-24T14:02:16.833

Ganglia 的目标是监控计算网格，即一组服务器在同一任务上工作以实现一个共同目标 - 例如 Web 服务器集群。

Nagios 旨在监控任何事物 - 服务器、服务器上的服务、交换机、通过 SNMP 的网络带宽等。Nagios 将根据设定的标准发送警报（即，您可以将其设置为向自己发送电子邮件或 x 服务终止） .

请注意，它们不是竞争产品，它们针对的是不同的场景。听上去，你需要 Nagios。

如果您玩过一些在线演示，您应该能够了解您需要什么产品（我想您会同意我的观点，Nagios 更适合）

Nagios - [https://en.wikipedia.org/wiki/Nagios](https://en.wikipedia.org/wiki/Nagios)（维基百科）

神经节 - [https://en.wikipedia.org/wiki/Ganglia_(software)](https://en.wikipedia.org/wiki/Ganglia_(software))（维基百科）

# android - 录音机在分贝中获得噪音水平

> ID：14494952
> 
> 赞同：2
> 
> 时间：2013-01-24T06:03:31.240
> 
> 标签：android, recorder

我正在尝试以分贝获取录制音频的噪音水平。我正在使用以下代码，但它没有给出正确的输出

```
byte[] audioData = new byte[bufferSize];
recorder.read(audioData, 0, bufferSize);
ByteBuffer bb = ByteBuffer.wrap(audioData);
int sampleSize = bb.getInt(); 
```

现在，如果我记录 sampleSize 那么它会提供非常大的价值，例如 956318464

任何人都可以告诉如何在分贝中获得正确的噪音水平。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:45:29.450

第一分贝是一个比率。您不能只获得分贝，您需要将音量与基线测量值进行比较。所以关于振幅的真实方程是

db= 10* log10（幅度/基线幅度）；

如果您现在正在录制音频，请使用 MediaRecorder.getMaxAmplitude 获取幅度。对于基线幅度，测量预期的背景噪声。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T14:14:34.550

```
 public int calculatePowerDb(short[] sdata, int off, int samples)
    {
        double sum = 0;
        double sqsum = 0;
        for (int i = 0; i < samples; i++)
        {
            final long v = sdata[off + i];
            sum += v;
            sqsum += v * v;
        }
        double power = (sqsum - sum * sum / samples) / samples;

        power /= MAX_16_BIT * MAX_16_BIT;

        double result = Math.log10(power) * 10f + FUDGE;
        return (int)result;
    }
    private static final float MAX_16_BIT = 32768;
private static final float FUDGE = 0.6f; 
```

它的工作正常这个方法

# c - 在 Linux 中启动 GDB 时如何传递命令行参数？

> ID：14494957
> 
> 赞同：139
> 
> 时间：2013-01-24T06:04:05.037
> 
> 标签：c, linux, debugging, gdb, command-line-arguments

作为我的作业的一部分，我必须调试一个有错误的程序。但是，我必须首先传递命令行参数才能解决这个问题。

我愿意：

```
gdb -tui InsertionSortWithErrors 
```

哪个有效，但在那之后我不知道如何传递参数。我用过`gdb -help`，它说了一些`--args`我也试过但没用的东西。

我希望能够获得调试器+GUI并传递命令行参数。

* * *

## 回答 #1

> 赞同：234
> 
> 时间：2013-01-24T06:08:28.730

`gdb`启动后，您可以使用“r *args* ”运行程序。

因此，如果您通过以下方式运行代码：

```
$ executablefile arg1 arg2 arg3 
```

通过以下方式对其进行调试`gdb`：

```
$ gdb executablefile  
(gdb) r arg1 arg2 arg3 
```

* * *

## 回答 #2

> 赞同：115
> 
> 时间：2013-01-24T06:08:17.453

尝试

```
gdb --args InsertionSortWithErrors arg1toinsort arg2toinsort 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2015-01-16T07:10:37.553

我用的是GDB7.1.1，如图`--help`：

```
gdb [options] --args executable-file [inferior-arguments ...] 
```

恕我直言，这个顺序起初有点不直观。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2015-03-10T17:59:30.500

另一种选择，一旦进入 GDB shell，在运行程序之前，你可以做

```
(gdb) set args file1 file2 
```

并检查它：

```
(gdb) show args 
```

# android - ViewPager 和 Listview

> ID：14494958
> 
> 赞同：1
> 
> 时间：2013-01-24T06:04:06.680
> 
> 标签：android, android-listview, android-viewpager

我正在制作一个 android 应用程序，其中使用 fedor 的延迟加载解决方案填充列表视图。这发生在我在异步任务中做了一些工作并且完成后我的列表视图被填充。列表视图中的每一行都包含一个 ImageView 和一个 TextView。我想使用 ViewPager 实现，在一个页面上，我有列表视图，并且在列表视图中选择一个项目时，用户被转移到右侧的另一个页面（或者他可以滑动到另一个页面），他可以得到ListView 项目的详细信息屏幕。这怎么可能。我是否需要使用 ViewPager 或 Tabs 的一些实现。此外，如果有人可以向我推荐一些与 ViewPager 和如何在 viewpager 中实现活动相关的好教程，那就太好了！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:56:42.123

如果您正在寻找滑动而不是您应该使用 GestureListener 接口......

您可以在以下[链接中找到它](http://android-journey.blogspot.in/2010/01/android-gestures.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T19:32:40.897

只是：

*   在列表项布局中设置支持选定状态的背景，例如：

> android:background="?android:attr/activatedBackgroundIndicator"

*   `getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);`

仅供参考：[http](http://cyrilmottier.com/2011/08/08/listview-tips-tricks-3-create-fancy-listviews/) ://cyrilmottier.com/2011/08/08/listview-tips-tricks-3-create-fancy-listviews/和[http://android-developers.blogspot.mx/2008/12/touch-mode .html](http://android-developers.blogspot.mx/2008/12/touch-mode.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T06:11:46.893

我最近使用 viewPager 完成了 ListViews 的滑动，效果很好

按照本教程

[http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizo​​ntal-view-paging/](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/)

您也可以从 android 开发者网站阅读此内容，以便更好地理解[http://developer.android.com/training/animation/screen-slide.html](http://developer.android.com/training/animation/screen-slide.html)

请随时询问我最近这样做的任何疑问

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T06:14:12.910

*   在 View Pager 中使用片段（不是活动）
*   如果它是 listView 和其他一些用于滑动的屏幕，请使用 ViewPager。
*   有关列表项选择的详细视图，请使用单独的片段并将其加载到容器中。

# java - 扫描仪跳过新行

> ID：14494961
> 
> 赞同：1
> 
> 时间：2013-01-24T06:04:30.683
> 
> 标签：java, file

我正在尝试理解 java 中的扫描仪类，有没有人知道为什么这段代码只打印第一部分的第一行而不是第二部分的所有信息。

```
import java.io.ByteArrayInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.util.NoSuchElementException;
import java.util.Scanner;

public class BadParse {

public static String getNextEntry(InputStream in) {
    Scanner sin = new Scanner(in);

    try {
        String ssn = sin.next();
        String name = sin.next();
        int age = sin.nextInt();

        return name + "(" + ssn + ") is " + age + " years old.";
    } catch (NoSuchElementException e) {
        return null;
    }
}

public static void putNextEntry(String ssn, String name, int age, OutputStream out) {
    PrintWriter pout = new PrintWriter(new OutputStreamWriter(out));

    pout.print(ssn + " ");
    pout.print(name + " ");
    pout.print(age + " ");
}

public static void main(String[] args) throws IOException {

    // Part I
    String input = "1234567890 John 20\n0987654321 Beth 18\n2468101214 Jack 19\n";
    InputStream in = new ByteArrayInputStream(input.getBytes());

    String entry;
    while ((entry = getNextEntry(in)) != null) {
        System.out.println(entry);
    }

    // Part II
    OutputStream out = new FileOutputStream("data");

    putNextEntry("1234567890", "John", 20, out);
    putNextEntry("0987654321", "Beth", 18, out);
    putNextEntry("2468101214", "Jack", 19, out);

    out.close();
} 
```

}

我尝试使用分隔符但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:20:29.203

如果您运行调试器并逐步执行该`getNextEntry`方法，您将在第二次调用时看到，`Scanner`抛出一个`NoSuchElementException`. 发生这种情况的原因是因为第一个`Scanner`消耗了`ByteArrayInputStream`.

您可以做的一种修复是在循环`Scanner`之前创建并传入to而不是传入.`while``Scanner``getNextEntry``ByteArrayInputStream`

```
public static String getNextEntry(Scanner sin) {

...

Scanner sin = new Scanner(in);
String entry;
while ((entry = getNextEntry(sin)) != null) { 
```

就第 2 部分而言，`PrintWriter`没有被刷新。如果您添加`pout.flush()`到底部`putNextEntry`应该会导致数据被发送到您的文件。对于对象，只有调用、、或`PrintWriter`时才会刷新数据。`println``printf``format``flush`

```
public static void putNextEntry(String ssn, String name, int age, OutputStream out) {
    PrintWriter pout = new PrintWriter(new OutputStreamWriter(out));
    pout.print(ssn + " ");
    pout.print(name + " ");
    pout.print(age + " ");
    pout.flush();
} 
```

不过，我建议创建和传递类似于扫描仪的 PrintWriter。`putNextEntry`减少创建的资源，您可以在多次调用后刷新所有端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T06:24:01.210

问题是您正在`Scanner`内部创建对象`getNextEntry`，当该对象被销毁时，它会关闭流。尝试将 Scanner 作为参数而不是像流一样传递（对于 PrintWriter 也是如此）：

```
 import java.io.ByteArrayInputStream;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.util.NoSuchElementException;
import java.util.Scanner;

public class BadParse {
public static String getNextEntry(Scanner sin) {

    try {
        String ssn = sin.next();
        String name = sin.next();
        int age = sin.nextInt();

        return name + "(" + ssn + ") is " + age + " years old.";
    } catch (NoSuchElementException e) {
        return null;
    }
}

public static void putNextEntry(String ssn, String name, int age, PrintWriter pout) {

    pout.print(ssn + " ");
    pout.print(name + " ");
    pout.print(age + " ");
}

public static void main(String[] args) throws IOException {

    // Part I
    String input = "1234567890 John 20\n0987654321 Beth 18\n2468101214 Jack 19\n";
    InputStream in = new ByteArrayInputStream(input.getBytes());
    Scanner sin = new Scanner(in);

    String entry;
    while ((entry = getNextEntry(sin)) != null) {
        System.out.println(entry);
    }

    // Part II
    OutputStream out = new FileOutputStream("data");
    PrintWriter pout = new PrintWriter(new OutputStreamWriter(out));

    putNextEntry("1234567890", "John", 20, pout);
    putNextEntry("0987654321", "Beth", 18, pout);
    putNextEntry("2468101214", "Jack", 19, pout);

    pout.close();
}
} 
```

# r - 如何有效地找到附近的整数？

> ID：14494964
> 
> 赞同：1
> 
> 时间：2013-01-24T06:04:46.940
> 
> 标签：r, matrix, indexing

我有一个具有唯一整数坐标和分数的 2 列矩阵：

```
> data1<-data.matrix(data.frame("coord"=sample(1:100,50),"scores"=rnorm(25)))
> data1
      coord      scores
 [1,]    22 -0.73799827
 [2,]    76 -0.78022310
 [3,]    62  0.45633095
 [4,]    77  0.56617413
 [5,]    60 -0.94876368
 [6,]    83 -1.20792643
 [7,]    85 -1.13890957
 [8,]    78  0.63959763
 [9,]    28  0.28039908
[10,]    68 -1.04277456
[11,]    27  0.48755194
[12,]    66  0.09612861
[13,]    69 -1.60932063
[14,]     6 -0.66797103
[15,]    10 -0.56594989
[16,]    50 -0.79548555
[17,]    39  1.13064066
[18,]    75  0.21617203
[19,]    34 -0.13480437
[20,]    54 -1.64825097
[21,]    48 -0.97955118
[22,]    58  0.55307028
[23,]    11 -0.99319227
[24,]    42 -0.58430293
[25,]    37  1.76576096
[26,]    67 -0.73799827
[27,]    65 -0.78022310
[28,]    47  0.45633095
[29,]    72  0.56617413
[30,]    97 -0.94876368
[31,]    57 -1.20792643
[32,]    38 -1.13890957
[33,]    16  0.63959763
[34,]    15  0.28039908
[35,]    86 -1.04277456
[36,]    33  0.48755194
[37,]    80  0.09612861
[38,]     2 -1.60932063
[39,]    93 -0.66797103
[40,]    73 -0.56594989
[41,]    40 -0.79548555
[42,]    26  1.13064066
[43,]    13  0.21617203
[44,]    96 -0.13480437
[45,]    41 -1.64825097
[46,]    59 -0.97955118
[47,]    46  0.55307028
[48,]    43 -0.99319227
[49,]    94 -0.58430293
[50,]    21  1.76576096 
```

和一个唯一坐标的向量：

```
> centers
 [1]  39  31  61  16  48  82  42  76  71  43  93  35   6 100  67  81  70  79  45  17  96  78  69  95  29 
```

我想创建一个矩阵，将 data1 中的分数相对于中心映射，其中每个中心是矩阵的中间，每行一个中心。换句话说，在一个矩阵中，我想看到每个“中心”附近都有一个坐标的分数。我采取了以下方法：

```
> score_matrix<-matrix(nrow=length(centers),ncol=10)
> for(i in 1:length(centers)){
+ data2 <- data1
+ data2[,1] <- data2[,1] - centers[i] + ncol(score_matrix)/2
+ region_scores <- subset(data2,data2[,1] > 0 & data2[,1] <= ncol(score_matrix))
+ score_matrix[i,region_scores[,1]]<-region_scores[,2]
+ }
> print(score_matrix)
            [,1]       [,2]       [,3]       [,4]       [,5]       [,6]       [,7]       [,8]       [,9]      [,10]
 [1,] -0.8688788  0.4524561  1.4594981 -1.0552725 -0.1594024         NA -0.4122056         NA         NA         NA
 [2,] -1.0552725  1.5064965         NA -1.8956159         NA         NA         NA  0.7000265         NA         NA
 [3,]         NA         NA         NA -0.7334736         NA         NA -1.8381591 -1.8381591 -0.7334736         NA
 [4,]         NA         NA -0.3910595  1.5064965         NA -0.1006090  0.1064373  0.4524561         NA         NA
 [5,]         NA         NA  0.8967748         NA         NA         NA         NA  0.8458699 -0.1006090         NA
 [6,]         NA         NA -1.8381591 -1.8381591 -0.7334736         NA         NA         NA         NA         NA
 [7,] -1.3803871 -1.5606603         NA  0.8967748 -0.7036330         NA         NA         NA         NA -1.6780760
 [8,]         NA         NA         NA         NA  0.8458699 -0.1006090         NA -1.5606603         NA         NA
 [9,]         NA         NA         NA -1.3673480  1.8448811  1.1304699         NA -0.8317189  0.1064373 -1.4426410
[10,]  0.8967748 -0.7036330         NA         NA         NA         NA -1.6780760 -0.3910595         NA         NA
[11,]  1.1304699         NA         NA -1.0552725  1.5064965         NA -1.8956159         NA         NA         NA
[12,]         NA         NA -1.6780760 -0.7036330         NA         NA  0.8967748         NA         NA         NA
[13,]         NA         NA         NA -1.6780760 -0.7036330         NA         NA  0.8967748         NA         NA
[14,]         NA  0.8458699 -0.1006090         NA -1.5606603         NA         NA  0.8458699 -0.1594024         NA
[15,] -0.1006090         NA -1.5606603         NA         NA  0.8458699 -0.1594024         NA         NA -0.3910595
[16,]  1.8448811  1.1304699         NA -0.8317189  0.1064373 -1.4426410         NA  1.8448811         NA -1.4426410
[17,]         NA         NA -1.0552725  1.5064965         NA -1.8956159         NA         NA         NA  0.7000265
[18,]         NA         NA         NA         NA         NA -1.3673480  1.8448811  1.1304699         NA -0.8317189
[19,]         NA         NA         NA         NA -0.7334736         NA         NA -1.8381591 -1.8381591 -0.7334736
[20,]         NA         NA  0.7000265         NA         NA         NA -0.8688788  0.4524561  1.4594981 -1.0552725
[21,]         NA -1.3803871 -1.5606603         NA  0.8967748 -0.7036330         NA         NA         NA         NA
[22,] -0.7334736         NA         NA         NA         NA         NA -1.3673480  1.8448811  1.1304699         NA
[23,]         NA         NA         NA         NA -1.3673480  1.8448811  1.1304699         NA -0.8317189  0.1064373
[24,]         NA  1.4594981  0.7000265         NA -1.3673480 -0.8688788  1.1304699         NA         NA -1.0552725
[25,] -0.8317189  0.1064373 -1.4426410         NA  1.8448811         NA -1.4426410 -1.8956159         NA  1.4594981 
```

但是，我应用它的数据集非常大，脚本需要大约 24 小时才能完成。有没有办法更有效地完成同样的事情？

谢谢，

担

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T07:34:36.333

我在 Rcpp 中实现了你的功能：

```
data1 <-data.matrix(data.frame("coord"=sample(1:100,50),"scores"=rnorm(25)))
centers <- unique(data1[,1])
score_matrix<-matrix(nrow=length(centers),ncol=10)
for(i in 1:length(centers)){
 data2 <- data1
 data2[,1] <- data2[,1] - centers[i] + ncol(score_matrix)/2
 region_scores <- subset(data2,data2[,1] > 0 & data2[,1] <= ncol(score_matrix))
 score_matrix[i,region_scores[,1]]<-region_scores[,2]
 }

library(inline)
library(Rcpp)

src <- '
  NumericMatrix data1(Rdata1);
  NumericVector centers(Rcenters);
  NumericMatrix score_matrix(Rscore_matrix);
  NumericVector data2(data1.nrow());
  for(int i = 0;i < centers.size();i++) {
    data2 = data1.column(0);
    data2 = data2 - centers(i) + score_matrix.ncol() / 2;
    for(int j = 0, k = 0;j < data2.size();j++) { // subset part
      if (data2(j) <= 0)
        continue;
      if (data2(j) > score_matrix.ncol())
        continue;
      score_matrix(i, data2(j) - 1) = data1(j,1);
    }
  }
  return score_matrix;
'

f <- cxxfunction(sig=c(Rdata1 = "numeric", Rcenters = "numeric", Rscore_matrix = "numeric"), 
  plugin="Rcpp", body=src)

score_matrix2<-matrix(nrow=length(centers),ncol=10)
score_matrix2 <- f(data1, centers, score_matrix2)
all.equal(score_matrix, score_matrix2)

library(rbenchmark) 

benchmark({
  score_matrix<-matrix(nrow=length(centers),ncol=10)
  for(i in 1:length(centers)){
   data2 <- data1
   data2[,1] <- data2[,1] - centers[i] + ncol(score_matrix)/2
   region_scores <- subset(data2,data2[,1] > 0 & data2[,1] <= ncol(score_matrix))
   score_matrix[i,region_scores[,1]]<-region_scores[,2]
   }
}, {
  score_matrix2<-matrix(nrow=length(centers),ncol=10)
  score_matrix2 <- f(data1, centers, score_matrix2)
}) 
```

在上次测试中，我的机器上的 Rcpp 一比 R 一快大约 12 倍。

* * *

如果速度不够快，您可能希望尽可能并行化您的算法。

尝试 R 包`snow`并重新设计除法数据和合并结果的算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:50:19.183

R 的重新实现提供了 47 倍的加速。这是我对您的原始代码的实现

```
f0 <- function(data1, centers) {
    score_matrix <- matrix(nrow=length(centers), ncol=10)
    for(i in seq_along(centers)) {
        data2 <- data1
        data2[,1] <- data2[,1] - centers[i] + ncol(score_matrix) / 2
        idx <- data2[,1] > 0 & data2[,1] <= ncol(score_matrix)
        region_scores <- data2[idx,]
        score_matrix[i,region_scores[,1]] <- region_scores[,2]
    }
    score_matrix
} 
```

我提取了常见的计算（的`centers[i] - ncol(score_matrix) / 2`和子集`data1`）来得到

```
f1 <- function(data1, centers, ncol=10) {
    score_matrix <- matrix(NA_real_, length(centers), ncol)
    ccenters <- centers - ncol / 2
    d1 <- data1[,1]
    d2 <- data1[,2]
    for (i in seq_along(ccenters)) {
        score <- d1 - ccenters[i]
        idx <- score > 0 & score <= ncol
        score_matrix[i, score[idx]] <- d2[idx]
    }
    score_matrix
} 
```

for 循环应该编译得很好

```
library(compiler)
f1c <- cmpfun(f1) 
```

和

```
library(rbenchmark)
data1 <- data.frame(coord=sample(100,50), scores=rnorm(25))
centers <- sort(scan(textConnection("39 31 61 16 48 82 42 76 71 43 93 35 6
                                     100 67 81 70 79 45 17 96 78 69 95 29"))) 
```

给

```
> identical(f0(data1, centers), f1(data1, centers))
[1] TRUE
> identical(f0(data1, centers), f1c(data1, centers))
[1] TRUE
> benchmark(f0(data1, centers), f1(data1, centers), f1c(data1, centers),
+           replications=10, columns=c("test", "elapsed", "relative"))
                 test elapsed relative
1  f0(data1, centers)   0.139   46.333
3 f1c(data1, centers)   0.003    1.000
2  f1(data1, centers)   0.005    1.667 
```

原始问题中的目标似乎不完整——你打算用 10,000 x 10 矩阵做什么？

# eclipse - Subversion with Eclipse for android

> ID：14494967
> 
> 赞同：0
> 
> 时间：2013-01-24T06:04:56.987
> 
> 标签：eclipse, svn

Okay I am starting to give up with this. I have been trying to setup sebversion in Eclipse for my android project. I have been following the following tutorial [http://blog.bauson.com/eclipse-subclipse-svn-hostgator-com.html](http://blog.bauson.com/eclipse-subclipse-svn-hostgator-com.html)

I got the following:

*   Created a repository called myRep

*   Created a project under with source files myRep/TestProject and attached it to trunk

*   installed subclipse and got it to grab the repository

Now when, it says "Checkout as a project configured using the new project wizard", I get to choose the type of project. If I choose android application project then it creates a default android project and nothing is checked out. But when I choose General Project, it does grab the whole thing in the following structure Repositony->TestProject->Trunk->All my android files and folders

However I want it to be android project so I can compile and run it. I did a lot of googling and I need your help pleeease!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:30:25.227

Never mind, I figured it out. Apperently, when you choose the repository you have to right click and click refresh and it will show you a list of Folders (stupid eclipse does not do it automatically). Then you choose your project and create it as a new project. Voilla, you get it compiling and running

# php - 从 sql server 2008 中检索 php 中的文档

> ID：14494968
> 
> 赞同：0
> 
> 时间：2013-01-24T06:05:01.613
> 
> 标签：php, sql-server-2008, image-processing

我有一个 sql server 2008 数据库表，我在其中存储所有类型的文档，即 doc、docx、pdf、图像。数据字段的数据类型是“图像”。

数据存储在数据库中。但我需要检索它并将其显示在我的 php 页面中。我不需要保存或更改它，但用户只需要查看该文档。

我正在使用简单的选择查询，例如

```
select docid,docname,data from documents 
```

数据字段**生成 System.Byte[]。**

我需要做什么才能在我的 php 应用程序中打印该文档？

请帮我。

*   提前致谢。

毛萨米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:35:15.087

要直接从内存中显示，您需要知道[mimetype](http://davidwalsh.name/php-header-mime)。在像这样存储随机文件的表中，通常的过程是将文件类型和 mimetype 存储在另一个字段中。您是否有权访问此类数据？

如果您确实知道 mimetype，那么您可以通知浏览器使用发布[到此类似问题](https://stackoverflow.com/questions/10958350/display-image-in-php-page-from-sql-database)的答案的技术会发生什么。谷歌`Header Content-Type`了解更多信息。

如果您不知道文件 mime 类型，那么您可能必须将二进制文件保存到网络服务器上的本地文件中，然后尝试从那里显示它并希望浏览器知道如何处理文件类型。

# asp.net-mvc - 使用 HtmlHelper.BeginForm 匹配复杂的路由

> ID：14494972
> 
> 赞同：1
> 
> 时间：2013-01-24T06:05:22.573
> 
> 标签：asp.net-mvc, forms, asp.net-mvc-4, html-helper

我有一条复杂的路线，我想与 HtmlHelper.BeginForm 方法匹配。我已经阅读了很多关于使用路由值字典、对象初始化器和 html 属性的文章和答案。但他们都达不到我想要做的......

这是我要匹配的路线：

```
// Attempt to consolidate all Profile controller actions into one route
routes.MapRoute(
    "Profile",
    "{adminUserCode}/{controller}s/{customerId}/{action}/{profileId}",
    new { adminUserCode = UrlParameter.Optional, controller = "Profile"},
    new { adminUserCode = @"\d+", customerId = @"\d+", profileId = @"\d+" }
); 
```

我想与之匹配的控制器和操作的示例 url 将是：

[http://mysite.com/123/Profiles/456/UpdatePhoneNumber/789](http://mysite.com/123/Profiles/456/UpdatePhoneNumber/789)

实际电话号码在 POST 正文中

这是我最接近正确的语法：

```
@using (Html.BeginForm(
    "UpdatePhoneNumber",
    "Profile",
    new {
        customerId = Model.LeadProfile.CustomerId,
        profileId = Model.CustomerLeadProfileId
    }))
{
    <!-- the form -->
} 
```

但这会将对象中的参数作为查询字符串参数，如下所示：

```
<form method="post"
    action="/mvc/123/Profiles/UpdatePhoneNumber?customerId=78293&profileId=1604750"> 
```

我只是一时兴起尝试了这种语法，但它输出的内容与其他重载相同

```
@using (Html.BeginForm(new
{
    controller = "Profile",
    customerId = Model.LeadProfile.CustomerId,
    action = "UpdatePhoneNumber",
    profileId = Model.CustomerLeadProfileId
})) 
```

我知道我可以在这里使用原始 HTML，但似乎应该有一种方法可以让愚蠢的 HtmlHelper 匹配比最基本的路由更多的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:19:27.440

如果你想在表单中使用复杂的路由，你需要使用[BeginRouteForm 方法](http://msdn.microsoft.com/en-us/library/dd460494%28v=vs.108%29.aspx)

```
@using (Html.BeginRouteForm("Profile", new
{
    controller = "Profile",
    customerId = Model.LeadProfile.CustomerId,
    action = "UpdatePhoneNumber",
    profileId = Model.CustomerLeadProfileId
})) 
```

# sql - Oracle 过程错误 (PLS-00428)

> ID：14494973
> 
> 赞同：5
> 
> 时间：2013-01-24T06:05:42.323
> 
> 标签：sql, plsql, oracle10g, procedure

这是错误消息：`PLS-00428: an INTO clause is expected in this SELECT statement.`同时，这是测试显示系统日期的过程：

```
CREATE OR REPLACE 
PROCEDURE "TEST_PROCEDURE"
AS
BEGIN
    SELECT SYSDATE FROM DUAL;
END; 
```

首先，我不需要使用`INTO`Oracle 坚持要我做的事情。除了使用光标之外还有其他方法吗（我在这里看到过[https://stackoverflow.com/a/6029963/1983024](https://stackoverflow.com/a/6029963/1983024)）？我认为不应该那样，这确实像在 MS SQL 中一样正常运行，无需使用`INTO`或游标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T06:33:37.997

> 首先，我不需要使用 INTO Oracle 坚持让我做的事情。

事实是，Oracle 是正确的：您*确实*需要使用 INTO 来获取返回值。

毕竟，如果您想显示查询结果，您将需要一个变量来首先将其放入。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T07:52:43.087

你可以写

```
CREATE OR REPLACE 
PROCEDURE "TEST_PROCEDURE"
AS
BEGIN
for r_row in ( SELECT SYSDATE s FROM DUAL)
  dbms_output.put_line(r_row.s);
end loop;
END; 
```

或者你必须有一个变量。

```
CREATE OR REPLACE 
PROCEDURE "TEST_PROCEDURE"
AS
  v_Date date;
BEGIN
    SELECT SYSDATE into v_date FROM DUAL;
  dbms_output.put_line(v_date );

END; 
```

输出格式由您的`NLS_DATE_FORMAT`设置决定，或者您可以明确表示等`to_char(v_date, 'dd-mm-yyyy')`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T07:50:34.717

终于找到了我想要的输出的解决方案（基于您的回复）：D

```
CREATE OR REPLACE 
PROCEDURE "TEST_PROCEDURE"
RET_DATE CHAR(10);
BEGIN
    SELECT TO_CHAR(SYSDATE, 'MM/DD/YYYY') INTO RET_DATE FROM DUAL;
    DBMS_OUTPUT.PUT_LINE(RET_DATE);
END; 
```

这将显示`SYSDATE`MM/DD/YYYY 的格式。不过，感谢您的回复和想法（主要是@Jeffrey Kemp）。Oracle 只是延长了 MS SQL 通常可以在一行中执行的操作：D

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T10:44:28.100

你可以使用喜欢

```
CREATE OR replace PROCEDURE Test_procedure
IS
  date CHAR(10);
BEGIN
    SELECT To_char(SYSDATE, 'MM/DD/YYYY')
    INTO   date
    FROM   dual;

    dbms_output.Put_line(date);
END; 
```

它将日期返回为 char 格式。

如果要将日期转换为日期格式，只需声明日期类型变量，然后将 sysdate 值分配给该变量。然后使用 DBMS_OUTPUT.PUT_LINE(variable) 打印 DATE。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-10T14:25:01.667

如果您想在一行中完成，您还可以使用：

```
CREATE OR replace PROCEDURE Test_procedure
IS
BEGIN
  dbms_output.put_line(to_char(sysdate, 'MM/DD/YY'));
END; 
```

# sql - 逗号分隔的列的行列表，在其他列上具有分组依据

> ID：14494975
> 
> 赞同：3
> 
> 时间：2013-01-24T06:05:59.320
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005, sql-server-2008-r2

以下是我的表结构： -

表**T1**

```
C1  C2  C3
---------- 
X   P   A
X   P   B
Y   Q   C
Y   Q   D 
```

期望的输出：-

```
C1   C2   C3
------------ 
X    P    A,B
Y    Q    C,D 
```

注意： - 我知道我可以`For XML('')`对 C1 和 C2 上的 group by 做同样的事情，但我的主要问题是这里的表 T1 必须是物理表对象（永久或临时或表 var 或 CTE） D B。但在我的情况下，它是一个派生表，当我使用下面的查询时，它说的是无效对象。在我的情况下，用 temp# 表或固定表甚至 CTE 或表变量替换派生表是不好的，因为这需要付出很大的努力。

```
SELECT 
b.C1, b.C2, Stuff((',' + a.C3 from t1 a where a.c1 = b.c1 for XML PATH('')),1,1,'') FROM
T1 b group by b.c1,b.c2 
```

我没有 T1 作为固定表。请仅将其视为派生表。

我需要现有派生表的解决方案。请帮忙。

以下是带有派生表的查询： - 请将此仅视为演示查询。它并不像下面给出的那么简单，并且已经进行了大量计算来获得派生表，并且使用了 4 级派生表。

```
SELECT C1, C2, Stuff((',' + a.C3 from A B where a.c1 = b.c1 for XML PATH('')),1,1,'')
FROM
(
SELECT C1, C2, C3  FROM T1 WHERE C1 IS NOT NULL--and a lot of calculation also
)A 
```

请注意，T1 不只是低于一步，在我的情况下，T1 实际物理表是派生表的 4 级下降。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T06:10:00.037

*如果您可以将查询发布到生成派生表，我们可以帮助您解决问题*，但目前尝试`table1`用派生查询替换。

```
;WITH Table1
AS
(
    SELECT C1, C2, C3  FROM T1 WHERE C1 IS NOT NULL--and a lot of calculation also
)
SELECT
     C1,C2,
     STUFF(
         (SELECT ',' + C3
          FROM Table1
          WHERE C1 = a.C1 AND C2 = a.C2
          FOR XML PATH (''))
          , 1, 1, '')  AS NamesList
FROM Table1 AS a
GROUP BY C1,C2 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/4d251/3)

# c++ - 修复模板参数的值

> ID：14494977
> 
> 赞同：0
> 
> 时间：2013-01-24T06:06:04.677
> 
> 标签：c++, templates

使用模板时是否允许以下​​操作。

```
template <typename PAR1 = X,
          typename PAR2 = Y,
          typename PAR3 = Z>
class Base {
   //some stuff inside
};

template <typename PAR1
          typename PAR2 = Z>
class Derived : public Base <PAR1,Y,PAR2> {
   //some stuff here
}; 
```

我在这里想要的是派生类应该始终将 PAR2 类型设为 Y。

当继承时其他参数为可选时，我们可以修复参数值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:27:26.897

我猜您对模板默认值和部分专业化感到困惑。因为 Base 采用 3 个默认值参数，所以您可以使用 0 到 3 个参数实例化 Base。

```
Base<> b1;              #1, PAR1=X,   PAR2=Y,   PAR3=Z
Base<int> b2;           #2  Par1=int, PAR2=Y,   PAR3=Z
Base<int, int> b3;      #3  PAR1=int, PAR2=int, PAR3=Z
Base<int, int, int> b4; #4  PAR1=int, PAR2=int, PAR3=int 
```

`#4`在派生类中，您从当然有效的情况继承。

因此，您可以从上述任何形式的 Base 继承。

基本模板参数可以是独立的类型（值）或从`template <typename PAR1, typename PAR2 = Y>`

```
template <typename PAR1,
          typename PAR2 = Y>
class Derived : public Base <> {
}; 
```

或者

```
template <typename PAR1,
          typename PAR2 = Y>
class Derived : public Base <PAR1> {
}; 
```

或者

```
template <typename PAR1,
          typename PAR2 = Y>
class Derived : public Base <PAR1, PAR2> {
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T06:11:49.203

我希望你想要这样的东西。所以，有可能

```
class X{};
class Y{};
class Z{};

template <typename PAR1 = X,
          typename PAR2 = Y,
          typename PAR3 = Z>
class Base {
   //some stuff inside
};

template <typename PAR1, typename PAR3>
class Derived : public Base <PAR1,Y,PAR3> {
};

int main()
{
    Derived<X, Z> d;
} 
```

编辑2：虽然与OP无关，但很高兴知道在部分专业化中，部分专业化类模板参数具有主模板的默认值

```
class X{};
class Y{};
class Z{};

template <typename PAR1 = X, typename PAR2 = Y, typename PAR3 = Z>
class Base {
public:
    void f() {
        std::cout << typeid(PAR1).name() << " " << typeid(PAR2).name() << " " << typeid(PAR3).name() << std::endl;
        std::cout << 1;
    }
};

template<typename PAR2, typename PAR3> class Base<X, PAR2, PAR3>
{
public:
    void f() {
        // PAR2 is by default Y and PAR3 is by default Z
        std::cout << typeid(PAR2).name() << " " << typeid(PAR3).name() << std::endl;
        std::cout << 2;
    }
};

int main()
{
    Base<X> b;   // instantiation of partially specialized template
    b.f();
} 
```

# android - 如何以编程方式设置滚动视图可见性？

> ID：14494980
> 
> 赞同：0
> 
> 时间：2013-01-24T06:06:22.243
> 
> 标签：android, android-layout

我有 3 个*Buttons*、 3 个*Scroll Views*和一些*Textviews*和图片等等。

我希望在单击3 个*按钮*时能够显示不同的*滚动视图*。

所以单击*按钮#1*将**显示** *滚动视图#1*并隐藏*滚动视图#2 和#3*

ETC....

有没有办法以编程方式做到这一点？就像在 OnClick() 事件中一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:11:55.380

您可以使用以下`setVisiblility()`方法：

```
mScrollView.setVisibility(View.GONE); 
```

通过设置`View.GONE`，您的视图将变得不可见，并且不会占用它所在的布局容器内的任何实际空间。

然后当你想让它再次可见时，使用：

```
mScrollView.setVisibility(View.VISIBLE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:12:26.953

为此使用**ExpandableListview**

请参阅此链接，这将有助于在 android 中实现 ExpandableListview

1.  [http://androidword.blogspot.in/2012/01/how-to-use-expandablelistview.html](http://androidword.blogspot.in/2012/01/how-to-use-expandablelistview.html)
2.  [http://androidtrainningcenter.blogspot.in/2012/07/android-expandable-listview-simple.html](http://androidtrainningcenter.blogspot.in/2012/07/android-expandable-listview-simple.html)
3.  [http://android-adda.blogspot.in/2011/06/custom-expandable-listview.html](http://android-adda.blogspot.in/2011/06/custom-expandable-listview.html)

# iphone - NSInvalidArgumentException'，原因：'-[__NSArrayM 名称]：无法识别的选择器发送到实例 0x75786f0'

> ID：14494982
> 
> 赞同：-1
> 
> 时间：2013-01-24T06:06:54.397
> 
> 标签：iphone, objective-c, nsarray

```
CellData *cellData = [self.tableElements objectAtIndex:indexPath.row];
        NSLog(@"name is %@",[self.tableElements objectAtIndex:1]);
        cell.lbl.text = cellData.name; 
```

当我能够访问我的 NSObject 类变量时出现错误。self.tableElements 是一个已解析元素的数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:10:10.790

`cellData`不是你想象的那样，你认为它是一个`CellData`对象，但它实际上是一个`NSArray`，仔细检查`self.tableElements`持有的是什么。

# javascript - 在 Google 地图中更改 KmlLayer 颜色

> ID：14494986
> 
> 赞同：5
> 
> 时间：2013-01-24T06:07:13.470
> 
> 标签：javascript, google-maps, styling

我使用以下代码在 Google 地图上添加了 KmlLayer。

```
var ctaLayer = new google.maps.KmlLayer('https://sites.google.com/site/.../file.kmz');
            ctaLayer.setMap(map);
            google.maps.event.addListener(ctaLayer, 'click', function (kmlEvent) {

                alert(kmlEvent.featureData.name);
            }); 
```

我可以通过以下代码成功地抑制信息窗口。（kmlOptions 通过 url 传递给 ctaLayer 对象）

```
 var kmlOptions = {
                suppressInfoWindows: true,
                preserveViewport: false,
                map: map
            }; 
```

现在我的要求是我应该能够在脚本中传递一些颜色或一些样式来改变我创建的 KMLLayer 的颜色。（就像我压制了信息窗口一样）

实际上，我想通过鼠标单击或鼠标悬停来更改 KMLLayer 中多边形（地区或区域）的颜色

请任何人为此提供解决方案..

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T11:24:54.730

它工作正常：

```
 <style type="text/css">
    html, body, #map_canvas {
        width:   750px;
        height:  600px;
        margin:  0;
        padding: 0;
    }
        .infowindow * {font-size: 90%; margin: 0}
    </style>

            <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
            <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
            <script type="text/javascript" src="http://geoxml3.googlecode.com/svn/branches/kmz/ZipFile.complete.js"></script>
            <script type="text/javascript" src="http://geoxml3.googlecode.com/svn/branches/kmz/geoxml3.js"></script>
            <script type="text/javascript" src="http://geoxml3.googlecode.com/svn/trunk/ProjectedOverlay.js"></script> 

    <script type="text/javascript">
                var geoXml = null;
                var geoXmlDoc = null;
                var map = null;
                var myLatLng = null;
                var myGeoXml3Zoom = true;
                var sidebarHtml = "";
                var infowindow = null;
                var kmlLayer = null;
                var filename = "test.kmz";      //kml or kmz file                   
                function MapTypeId2UrlValue(maptype) {
                    var urlValue = 'm';
                    switch (maptype) {
                        case google.maps.MapTypeId.HYBRID: urlValue = 'h';
                            break;
                        case google.maps.MapTypeId.SATELLITE: urlValue = 'k';
                            break;
                        case google.maps.MapTypeId.TERRAIN: urlValue = 't';
                            break;
                        default:
                        case google.maps.MapTypeId.ROADMAP: urlValue = 'm';
                            break;
                    }
                    return urlValue;
                }

                function initialize() {
                    myLatLng = new google.maps.LatLng(39.8000959563484, -89.549560546875);
                    // these set the initial center, zoom and maptype for the map 
                    // if it is not specified in the query string
                    var lat = 37.422104808;
                    var lng = -122.0838851;
                    var zoom = 18;
                    var maptype = google.maps.MapTypeId.ROADMAP;

                    // If there are any parameters at eh end of the URL, they will be in  location.search
                    // looking something like  "?marker=3"

                    // skip the first character, we are not interested in the "?"
                    var query = location.search.substring(1);

                    // split the rest at each "&" character to give a list of  "argname=value"  pairs
                    var pairs = query.split("&");
                    for (var i = 0; i < pairs.length; i++) {
                        // break each pair at the first "=" to obtain the argname and value
                        var pos = pairs[i].indexOf("=");
                        var argname = pairs[i].substring(0, pos).toLowerCase();
                        var value = pairs[i].substring(pos + 1).toLowerCase();

                        // process each possible argname  -  use unescape() if theres any chance of spaces
                        if (argname == "id") { id = unescape(value); }
                        if (argname == "filename") { filename = unescape(value); }
                        if (argname == "marker") { index = parseFloat(value); }
                        if (argname == "lat") { lat = parseFloat(value); }
                        if (argname == "lng") { lng = parseFloat(value); }
                        if (argname == "zoom") {
                            zoom = parseInt(value);
                            myGeoXml3Zoom = false;
                        }
                        if (argname == "type") {
                            // from the v3 documentation 8/24/2010
                            // HYBRID This map type displays a transparent layer of major streets on satellite images. 
                            // ROADMAP This map type displays a normal street map. 
                            // SATELLITE This map type displays satellite images. 
                            // TERRAIN This map type displays maps with physical features such as terrain and vegetation. 
                            if (value == "m") { maptype = google.maps.MapTypeId.ROADMAP; }
                            if (value == "k") { maptype = google.maps.MapTypeId.SATELLITE; }
                            if (value == "h") { maptype = google.maps.MapTypeId.HYBRID; }
                            if (value == "t") { maptype = google.maps.MapTypeId.TERRAIN; }

                        }
                    }
                    if (!isNaN(lat) && !isNaN(lng)) {
                        myLatLng = new google.maps.LatLng(lat, lng);
                    }
                    var myOptions = {
                        zoom: zoom,
                        center: myLatLng,
                        // zoom: 5,
                        // center: myLatlng,
                        mapTypeId: maptype
                    };
                    map = new google.maps.Map(document.getElementById("map_canvas"),
                          myOptions);
                    infowindow = new google.maps.InfoWindow({});

                    geoXml = new geoXML3.parser({
                        map: map,
                        infoWindow: infowindow,
                        singleInfoWindow: true,
                        zoom: myGeoXml3Zoom,
                        markerOptions: { optimized: false },
                        afterParse: useTheData
                    });
                    geoXml.parse(filename);

                };

                //            function kmlPgClick(pm) {
                //                if (geoXml.docs[0].placemarks[pm].polygon.getMap()) {
                //                    google.maps.event.trigger(geoXmlDoc.placemarks[pm].polygon, "click");
                //                } else {
                //                    geoXmlDoc.placemarks[pm].polygon.setMap(map);
                //                    google.maps.event.trigger(geoXmlDoc.placemarks[pm].polygon, "click");
                //                }
                //            }
                //            function kmlPlClick(pm) {
                //                if (geoXml.docs[0].placemarks[pm].polyline.getMap()) {
                //                    google.maps.event.trigger(geoXmlDoc.placemarks[pm].polyline, "click");
                //                } else {
                //                    geoXmlDoc.placemarks[pm].polyline.setMap(map);
                //                    google.maps.event.trigger(geoXmlDoc.placemarks[pm].polyline, "click");
                //                }
                //            }
                //            function kmlClick(pm) {
                //                if (geoXml.docs[0].placemarks[pm].marker.getMap()) {
                //                    google.maps.event.trigger(geoXml.docs[0].placemarks[pm].marker, "click");
                //                } else {
                //                    geoXmlDoc.placemarks[pm].marker.setMap(map);
                //                    google.maps.event.trigger(geoXmlDoc.placemarks[pm].marker, "click");
                //                }
                //            }

                function kmlColor(kmlIn) {
                    var kmlColor = {};
                    if (kmlIn) {
                        aa = kmlIn.substr(0, 2);
                        bb = kmlIn.substr(2, 2);
                        gg = kmlIn.substr(4, 2);
                        rr = kmlIn.substr(6, 2);
                        kmlColor.color = "#" + rr + gg + bb;
                        kmlColor.opacity = parseInt(aa, 16) / 256;
                    } else {
                        // defaults
                        kmlColor.color = "red";
                        kmlColor.opacity = 0.45;
                    }
                    return kmlColor;
                }
                var highlightOptions = { fillColor: "red", strokeColor: "#000000", fillOpacity: 0.9, strokeWidth: 10 };
                var highlightLineOptions = { strokeColor: "red", strokeWidth: 10 };
                function kmlHighlightPoly(pm) {
                    for (var i = 0; i < geoXmlDoc.placemarks.length; i++) {
                        var placemark = geoXmlDoc.placemarks[i];
                        if (i == pm) {
                            if (placemark.polygon) placemark.polygon.setOptions(highlightOptions);
                            if (placemark.polyline) placemark.polyline.setOptions(highlightLineOptions);
                        } else {
                            if (placemark.polygon) placemark.polygon.setOptions(placemark.polygon.normalStyle);
                            if (placemark.polyline) placemark.polyline.setOptions(placemark.polyline.normalStyle);
                        }
                    }
                }
                function kmlUnHighlightPoly(pm) {
                    for (var i = 0; i < geoXmlDoc.placemarks.length; i++) {
                        if (i == pm) {
                            var placemark = geoXmlDoc.placemarks[i];
                            if (placemark.polygon) placemark.polygon.setOptions(placemark.polygon.normalStyle);
                            if (placemark.polyline) placemark.polyline.setOptions(placemark.polyline.normalStyle);
                        }
                    }
                }
                function showAll() {
                    map.fitBounds(geoXmlDoc.bounds);
                    for (var i = 0; i < geoXmlDoc.placemarks.length; i++) {
                        var placemark = geoXmlDoc.placemarks[i];
                        if (placemark.polygon) placemark.polygon.setMap(map);
                        if (placemark.polyline) placemark.polyline.setMap(map);
                        if (placemark.marker) placemark.marker.setMap(map);
                    }
                }

                function highlightPoly(poly, polynum) {
                    //    poly.setOptions({fillColor: "#0000FF", strokeColor: "#0000FF", fillOpacity: 0.3}) ;
                    google.maps.event.addListener(poly, "mouseover", function () {
                        var rowElem = document.getElementById('row' + polynum);
                        if (rowElem) rowElem.style.backgroundColor = "red";
                        if (poly instanceof google.maps.Polygon) {
                            poly.setOptions(highlightOptions);
                        } else if (poly instanceof google.maps.Polyline) {
                            poly.setOptions(highlightLineOptions);
                        }
                    });
                    google.maps.event.addListener(poly, "mouseout", function () {
                        var rowElem = document.getElementById('row' + polynum);
                        if (rowElem) rowElem.style.backgroundColor = "red";
                        poly.setOptions(poly.normalStyle);
                    });               
                }
                function makeSidebarPolylineEntry(i) {
                    var name = geoXmlDoc.placemarks[i].name;
                    if (!name || (name.length == 0)) name = "polyline #" + i;
                    // alert(name);
                    sidebarHtml += '<tr id="row' + i + '"><td onmouseover="kmlHighlightPoly(' + i + ');" onmouseout="kmlUnHighlightPoly(' + i + ');"><a href="javascript:kmlPlClick(' + i + ');">' + name + '</a> - <a href="javascript:kmlShowPlacemark(' + i + ');">show</a></td></tr>';

                }
                function makeSidebarEntry(i) {
                    var name = geoXmlDoc.placemarks[i].name;
                    if (!name || (name.length == 0)) name = "marker #" + i;
                    // alert(name);
                    sidebarHtml += '<tr id="row' + i + '"><td><a href="javascript:kmlClick(' + i + ');">' + name + '</a></td></tr>';
                }  
                function useTheData(doc) {
                    var currentBounds = map.getBounds();
                    if (!currentBounds) currentBounds = new google.maps.LatLngBounds();
                    // Geodata handling goes here, using JSON properties of the doc object
                    sidebarHtml = '<table><tr><td><a href="javascript:showAll();">Show All</a></td></tr>';
                    //  var sidebarHtml = '<table>';
                    geoXmlDoc = doc[0];
                    for (var i = 0; i < geoXmlDoc.placemarks.length; i++) {
                        // console.log(doc[0].markers[i].title);
                        var placemark = geoXmlDoc.placemarks[i];
                        if (placemark.polygon) {
                            if (currentBounds.intersects(placemark.polygon.bounds)) {
                                //makeSidebarPolygonEntry(i);
                            }
                            var kmlStrokeColor = kmlColor(placemark.style.color);
                            var kmlFillColor = kmlColor(placemark.style.fillcolor);
                            var normalStyle = {
                                strokeColor: kmlStrokeColor.color,
                                strokeWeight: placemark.style.width,
                                strokeOpacity: kmlStrokeColor.opacity,
                                fillColor: kmlFillColor.color,
                                fillOpacity: kmlFillColor.opacity
                            };
                            placemark.polygon.normalStyle = normalStyle;

                            highlightPoly(placemark.polygon, i);
                        }
                        if (placemark.polyline) {
                            if (currentBounds.intersects(placemark.polyline.bounds)) {
                                makeSidebarPolylineEntry(i);
                            }
                            var kmlStrokeColor = kmlColor(placemark.style.color);
                            var normalStyle = {
                                strokeColor: kmlStrokeColor.color,
                                strokeWeight: placemark.style.width,
                                strokeOpacity: kmlStrokeColor.opacity
                            };
                            placemark.polyline.normalStyle = normalStyle;

                            highlightPoly(placemark.polyline, i);
                        }
                        if (placemark.marker) {
                            if (currentBounds.contains(placemark.marker.getPosition())) {
                                makeSidebarEntry(i);
                            }
                        }

                        /*    doc[0].markers[i].setVisible(false); */
                    }
                    sidebarHtml += "</table>";
                    document.getElementById("sidebar").innerHTML = sidebarHtml;         //show to all link
                };           

            </script> 
```

# portlet - 根据用户更改门户页面布局

> ID：14494990
> 
> 赞同：0
> 
> 时间：2013-01-24T06:07:27.757
> 
> 标签：portlet, websphere-portal, page-layout

是否可以根据 WebSphere 门户上的用户更改门户页面布局？例如，我有 2 个 portlet A 和 B。对于用户 1，我希望 portlet A 出现在 portlet B 的上方，而对于用户 2，我想要相反，即 portlet B 应该出现在 portlet A 的上方。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:45:03.087

使用两个不同的页面可能最容易。一个将为用户 1 提供您的布局，为用户 2 提供另一个页面。然后使用访问控制或个性化将每个用户定向到预期的页面。使用哪个选项取决于您如何决定哪些用户应该看到哪种布局。

# javascript - div 不支持编辑前选择的字体

> ID：14494991
> 
> 赞同：0
> 
> 时间：2013-01-24T06:07:30.167
> 
> 标签：javascript, jquery, objective-c, html, uiwebview

我有一个`UIWebView`并加载了可编辑`div`的。一旦应用程序启动的 div 被加载`UIWebView`并点击（实现了点击手势），它就允许在其上写任何东西。现在我需要在 div 加载后（一旦应用程序启动），从我已经完成的选择器中选择字体，而不是点击`UIWebView`以使用所选字体写入，但我无法实现这一点。但是一旦`div`/`UIWebView`处于活动状态，即准备好输入而不是下面的代码工作

```
[webViewForEditing stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"document.execCommand('fontName', true, '%@')",fontName]]; 
```

这是我的脚本

```
 <html>

  <script type="text/javascript">

    document.addEventListener('touchend', function(e){

       // Listen for touch end on the document

        // Get the touch and coordinates
        var touch = e.changedTouches.item(0);
        var touchX = touch.clientX;
        var touchY = touch.clientY;

        // Get the rect for the content  
        var contentDIVRect = document.getElementById('content').getClientRects()[0];

        // Make sure we don't block touches to the content div
        if (touchX > contentDIVRect.left && touchY < contentDIVRect.bottom) {
        return;
        }

        // If the touch is out of the content div then simply give the div focus
        document.getElementById('content').focus();
        document.execCommand('fontName', true, fontName);

    }, false);  

    function moveImageAtTo(x, y, newX, newY) {
        // Get our required variables

        var element  = document.elementFromPoint(x, y);
        if (element.toString().indexOf('Image') == -1)
        {
            // Attempt to move an image which doesn't exist at the point
            return;
        }
        var caretRange = document.caretRangeFromPoint(newX, newY);
        var selection = window.getSelection();

        // Save the image source so we know this later when we need to re-insert it
        var imageSrc = element.src;

        // Set the selection to the range of the image, so we can delete it
        var nodeRange = document.createRange();
        nodeRange.selectNode(element);
        selection.removeAllRanges();
        selection.addRange(nodeRange);

        // Delete the image
        document.execCommand('delete');

        document.execCommand('insertText', false, ' ');
        // Set the selection to the caret range, so we can then add the image
        var selection = window.getSelection();
        var range = document.createRange();

        selection.removeAllRanges();
        selection.addRange(caretRange);

        // Re-insert the image
        document.execCommand('insertImage', false, imageSrc);
    }

</script>
<style>

    #content img{
        height:25px;
        width:25px;

    }
</style>

<body>
 <div id="content" contenteditable="true" style="font-family: Frank the Architect ; font-size:18px">TAP HERE TO BEGIN WRITING...</div>
</body> 
```

# layout - Bootstrap 复杂布局

> ID：14494995
> 
> 赞同：0
> 
> 时间：2013-01-24T06:07:43.657
> 
> 标签：layout, twitter-bootstrap, complexity-theory

您建议在此布局中使用多少行？我认为我做错了什么，因为我无法获得`SPAN 4 SPAN 4 INTO ROW`

[http://imgur.com/ZdrHrTN](http://imgur.com/ZdrHrTN)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:58:40.590

做你想做的事没有问题，当你有嵌套的列时，你只需要小心处理 HTML。这是一个带有流动行的工作示例[http://jsfiddle.net/panchroma/yYFMT/](http://jsfiddle.net/panchroma/yYFMT/)

使用流式行时，请注意嵌套列的跨度相加为 12，而 HTML 为

```
<div class="row-fluid">

<div class="span8">

<div class="row-fluid">
  <div class="span6">nested col</div>
  <div class="span6">nested col</div>
 </div> <!-- end nested row -->

</div> <!-- end span 8 parent  -->

<div class="span4">
span 4
</div>
</div> <!-- end row --> 
```

如果你没有流动的行，嵌套列的跨度加起来就是父级的宽度，例如

```
<div class="row">

<div class="span8">

<div class="row">
  <div class="span4">nested col</div>
  <div class="span4">nested col</div>
 </div> <!-- end nested row -->

</div> <!-- end span 8 parent  -->

<div class="span4">
span 4
</div>
</div> <!-- end row --> 
```

这是一个使用非流体行的工作示例：http: [//jsfiddle.net/panchroma/MX6GK/](http://jsfiddle.net/panchroma/MX6GK/)

祝你好运！