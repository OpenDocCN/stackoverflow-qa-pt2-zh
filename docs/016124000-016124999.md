# StackOverflow 问答 16124000-16124999

# matlab - 无法从 Matlab 控制台运行脚本

> ID：16124001
> 
> 赞同：0
> 
> 时间：2013-04-20T18:56:54.620
> 
> 标签：matlab, shell

有一个名为的脚本 -`scriptForGragh`其中包含以下命令 -

```
figure(1) ;
hold on;
stem(F);
plot(FV); 
```

`FV`并且`F`是之前定义的变体。

我从外壳运行 -

`>> run(scriptForGragh)`

但它提示——

```
??? Undefined function or variable
'scriptForGragh'. 
```

我检查了 shell 的当前文件夹，它在正确的路径上。

这里有什么问题？

**编辑：**

解决方案 - 只需运行`scriptForGragh.m`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T19:01:43.043

要在 matlab 中运行某些东西，通常不需要运行。只需键入函数的名称。如果您创建脚本，请务必在此应用程序上设置您的当前路径。

只需在 matlab 命令窗口中键入 help run，您将获得更多详细信息。

# c - 不同操作系统时的分段错误

> ID：16124004
> 
> 赞同：0
> 
> 时间：2013-04-20T18:57:25.970
> 
> 标签：c, segmentation-fault, portability

我有一个 C 项目，我对 C 和 linux 环境很陌生。

我正在使用以下系统信息开发 linux 发行版

> Linux bt 3.2.6 #1 SMP Fri Feb 17 10:34:20 EST 2012 x86_64 GNU/Linux

用 gcc 编译后，在上述操作系统上，我得到了等待的结果。

在将我的项目提交给教授之前，我曾想过尝试在另一个 linux 发行版上编译并执行该程序，系统信息如下

> Linux feistyFawn 2.6.20-15-generic #2 SMP Sun Apr 15 07:36:31 UTC 2007 i686 GNU/Linux

我在这个下得到了分段错误。来说明输出控制台。这是图像。

作品

![在此处输入图像描述](https://i.stack.imgur.com/BjSuY.jpg)

失败

![在此处输入图像描述](https://i.stack.imgur.com/O7EDH.jpg)

我不知道现在该怎么办。

* * *

代码

调用此函数会导致另一个操作系统出现分段错误。

```
fileInEvenements(listEvents, 'A', time, queueId); 
```

它所做的是将名为 A 的事件归档到队列结构 listEvents 中。

及其定义

```
void fileInEvenements(eventStructure *listEvents, char eventType, int time_exec, int id_queue)
{
    Event *newEvent = malloc(sizeof(*newEvent));
    if (newEvent == NULL || listEvents == NULL){
        exit(EXIT_FAILURE);
    }

    newEvent->type = eventType;
    newEvent->execution_time = time_exec;
    newEvent->id = id_queue;
    if (listEvents->firstEvent != NULL)
    {
        // the list contains at least one event, go to the end of list 
        Event *evCurrent =  listEvents->firstEvent;
        while (evCurrent->next != NULL)
        {
            evCurrent = evCurrent->next;
        }
        evCurrent->next = newEvent;
    }
    else // the list contains no event, new event becomes first event
    {
        listEvents->firstEvent = newEvent;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T19:21:09.990

当您在链接列表中创建新条目时，您试图通过从头部开始并迭代列表直到找到`NULL`in将其附加到列表中`evCurrent->next`。当您确实找到 a 时`NULL`，您停止迭代列表，并在此时`newEvent`通过分配作为列表中的下一个条目`evCurrent->next = newEvent;`- 当然，如果链表中没有条目，则将新条目设置为头部通过列表`listEvents->firstEvent = newEvent;`

但是，您绝不会初始化 的值`newEvent->next`。请注意，[`malloc()`](http://www.cplusplus.com/reference/cstdlib/malloc/)它不会初始化它返回的内存块。它只是分配一个块并将其返回给您。请参阅此处的文档[http://www.cplusplus.com/reference/cstdlib/malloc/](http://www.cplusplus.com/reference/cstdlib/malloc/)

关键是这个...

> 新分配的内存块的内容**未**初始化，剩余的值不确定。

因此，`newEvent->next`对于所有实际目的，是一个随机值。因此，您的代码会进入随机内存漫游，因为您指望它`NULL`终止链表。

我可能会建议你尝试[`calloc()`](http://www.cplusplus.com/reference/cstdlib/calloc/)。

```
Evenement *newEvent = calloc( 1, sizeof(*nvEvent) ); 
```

否则，请确保在创建元素时将`next`元素的值初始化为`NULL`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T19:35:24.140

添加一行：

```
newEvent->next = NULL; 
```

使用未初始化的字段是错误的。

或者，您可以使用以下内容：

```
newEvent = calloc(sizeof(*newEvent), 1); // instead of malloc 
```

或者

```
memset(newEvent, 0, sizeof(*newEvent)); // set all fields to 0 
```

# c++ - 使用 C++ 并行编程 openMp

> ID：16124009
> 
> 赞同：0
> 
> 时间：2013-04-20T18:58:07.097
> 
> 标签：c++, openmp

```
float dist ( Point p1, Point p2, int dim )
     {
   int i;
   float result=0.0;
   for ( i=0; i<dim; i++ )
    result += ( p1.coord[i] - p2.coord[i] ) * ( p1.coord[i] - p2.coord[i] );
    return ( result );
       } 
```

我想使用线程并行化它，但我不断收到错误。我正在做这样的事情

```
float dist(Point p1,Point p2,int dim){
  int id;
  int i,tnum,istart,iend;
  id=omp_get_thread_num();
  tnum=omp_get_num_threads();
  istart=id*dim/tnum;
  iend=(id+i)*dim/tnum;
  float result=0.0;
  #pragma omp parallel for reduction (+:result)
     {      for ( i=istart; i<iend;i++ )
          result += ( p1.coord[i] - p2.coord[i] ) * ( p1.coord[i] - p2.coord[i] );
          return ( result );}
      } 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:06:41.960

As far as `dim` is not greater than (at least) 10^6, you will most probably won't see any speed gain using OpenMP.

The following code should work, but is not very useful for low values of DIM.

```
#include <iostream>

const int DIM = 3;
struct point { 
  float coord[DIM]; 
};

float dist(point p1, point p2, int dim)
{
  float result = 0.0;
#pragma omp parallel for reduction(+:result)
  for (int i=0; i<dim; i++ )
    result += ( p1.coord[i] - p2.coord[i] ) * ( p1.coord[i] - p2.coord[i] );
  return (result);
}

using namespace std;
int main()
{
  point a = {0.0, 0.0, 0.0}, b = {2.0, 2.0, 2.0};
  cout << dist(a, b, DIM) << endl;
  return 0;
} 
```

# php - 如何创建一个 WebService 接收从 Delphi 发送的 PHP 文件？

> ID：16124010
> 
> 赞同：0
> 
> 时间：2013-04-20T18:58:11.877
> 
> 标签：php, web-services, delphi, rest, file-upload

我有一个这样工作的 WebService：

1.  我通过 ftp 将文件发送到远程服务器中的特定文件夹；
2.  我在同一台服务器中调用 Web 服务，以便可以将文件名和路径记录在数据库中。只有这样系统才会知道文件的存在。

我这样做是因为我不知道如何制作一个可以直接通过 HTTP POST 接收文件的 Web 服务。

服务器在 PHP & MySQL 下工作。

发送文件并注册它的客户端是在 Delphi 中制作的。我现在用印地。

将来我打算让它成为完整的网络，但我的客户仍然沉迷于 Windows。

那么，我可以制作一个接收 pdf 文件并接收有关该文件的数据的 REST Web 服务，例如“from”、“to”、“description”...？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:37:49.137

为了**上传**文件，您必须对 WebService 执行 POST 调用。（您也可以执行 PUT 操作，但这不在此答案中）。

## php部分：

在 php 中，您使用[$_FILES](http://php.net/manual/en/reserved.variables.files.php)关联数组，其中包含使用上述 POST 方法上传到脚本的项目。

接受文件后，使用[move_uploaded_file](http://www.php.net/manual/en/function.move-uploaded-file.php)函数将文件保存在服务器磁盘中，然后可以从那里读取文件并将其发布到数据库或您要执行的任何其他操作。

我建议你阅读[处理文件上传](http://www.php.net/manual/en/features.file-upload.php)php手册中的参考文章。

您还可以在[php 文件上传](http://www.w3schools.com/php/php_file_upload.asp)w3schools 文章中找到一个工作示例。

## 德尔福部分

有各种库允许您从 Delphi 执行 HTTP 操作。我最喜欢的是[Indy Sockets](http://indyproject.org/Sockets/index.EN.aspx)，您会在 StackOverflow 上找到大量问题（和答案），例如：[Http Post with indy](https://stackoverflow.com/questions/10765661/http-post-with-indy)，其中包含一个苍蝇附件。

# sql - 创建一个加入子查询的 Rails 3 范围

> ID：16124011
> 
> 赞同：1
> 
> 时间：2013-04-20T18:58:21.670
> 
> 标签：sql, ruby-on-rails, activerecord

首先，我是 Ruby/Rails 新手，所以如果这个问题是基本的，我深表歉意。

我有一个（除其他外）看起来像这样的数据库：

```
organizations { id, name, current_survey_id }
surveys { id, organization_id }
responses { id, survey_id, question_response_integer } 
```

我正在尝试创建一个范围方法，将当前调查答案的平均值添加到传入的组织关系中。换句话说，传递给该方法的作用域将生成看起来或多或少像这样的 SQL：

```
select * from organizations 
```

我希望范围在我的 lambda 处理后生成如下所示的 SQL：

```
select o.id, o.name, cs.average_responses
from organizations o join
(select r.id, avg(r.question_response_integer) as average_responses 
     from responses r 
     group by r.id) cs on cs.id = o.current_survey_id 
```

我所拥有的最好的是这样的：

```
current_survey_average: lambda do |scope, sort_direction|
  average_answers = Responses.
     select("survey_id, avg(question_response_integer) as average_responses").
     group("survey_id")
  scope.joins(average_answers).order("average_responses #{sort_direction}")
end 
```

这主要只是在黑暗中刺伤-除其他外，它没有指定范围可以如何加入`average_answers`-但我无法找到任何有关如何进行这种加入的文档，而且我我没有东西可以尝试了。

有什么建议么？

编辑：感谢 Sean Hill 的回答。只是为了记录下来，这是我最终使用的代码：

```
current_survey_average: lambda do |scope, sort_direction|
  scope_table = scope.arel.froms.first.name
  query = <<-QUERY
    inner join (
     select r.survey_id, avg(r.question_response_integer) as average_responses
      from responses r
      group by r.survey_id
    ) cs
    on cs.survey_id = #{scope_table}.current_survey_id
  QUERY
  scope.
    joins(query).
    order("cs.average_responses #{sort_direction}")
end 
```

也就是说，我可以看到将`averaged_answers`作用域直接放在 Responses 类上的好处——所以我最终可能会这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:07:52.740

我无法对此进行测试，但我认为以下内容会起作用，无论是按原样还是稍作调整。

```
class Response < ActiveRecord::Base
  scope :averaged, -> { select('r.id, avg(r.question_response_integer) as average_responses').group('r.id') }

  scope :current_survey_average, ->(incoming_scope, sort_direction) do
    scope_table = incoming_scope.arel.froms.first.name
    query = <<-QUERY
      INNER JOIN ( #{Arel.sql(averaged.to_sql)} ) cs
      ON cs.id = #{scope_table}.current_survey_id
    QUERY

    incoming_scope.joins(query).order("average_responses #{sort_direction}")
  end
end 
```

所以我在这里所做的是将内部查询拆分为另一个称为平均的范围。由于您不知道传入范围`current_survey_average`来自哪个表，因此我通过`scope.arel.froms.first.name`. 然后我创建了一个使用范围的查询字符串并使用变量`averaged`加入它。`scope_table`其余的很不言自明。

如果您确实知道传入范围将始终来自组织表，那么您不需要额外的`scope_table`变量。您可以将其硬编码到连接查询字符串中。

我会提出一个建议。如果您无法控制`sort_direction`，那么我不会直接将其输入到订单字符串中。

# sql - 编写 CREATE TABLE，不断出错

> ID：16124012
> 
> 赞同：-2
> 
> 时间：2013-04-20T18:58:23.950
> 
> 标签：sql, oracle, create-table

谁能看看这个并告诉我我做错了什么？

我已经查找了不同的编写方式并对其进行了多次更改，但不断收到不同的错误。我已经粘贴了当前的错误，我得到的另一个错误是“缺少左括号”，即使我把它们都输入了。

从命令的第 1 行开始的错误：

```
CREATE TABLE book(
ISBN VARCHAR(10) PRIMARY KEY,
TITLE VARCHAR(20) NOT NULL,
AUTHORF_NAME VARCHAR(15) NOT NULL,
AUTHORL_NAME VARCHAR(15) NOT NULL,
LIST_PRICE NUMBER(5,2) NOT NULL,
QO_H INTEGER NOT NULL
)

Error at Command Line:1 Column:14
Error report:
      SQL Error: ORA-00955: name is already used by an existing object
00955\. 00000 -  "name is already used by an existing object"
*Cause:    
*Action: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T19:00:37.897

您的数据库中已经有一个 book 表。表名必须是唯一的。

# c - write(socket, buff, length) 导致崩溃

> ID：16124019
> 
> 赞同：4
> 
> 时间：2013-04-20T18:59:11.220
> 
> 标签：c, sockets

我有一个程序可以将数据发送到带有 android 的手机。让我们开始吧

//编辑

```
while(enviado < length) {
    printf("SEND\n");
    r = write(con, buff_enviar+enviado, length-enviado);
    printf(" OK\n");
    if (r > 0) enviado += r;
    else if (r == 0) { printf(" * >> Socket cerrado [datos] (%d)\n",r); return r; }
    else if (r == -1) { printf(" * >> Error [datos] (%d)\n",r); return r; }
} 
```

当我离开这段时间时，我会改变`buff_enviar`价值观。当我通过成功的 socket.close() 取消手机中的传输时，这`write`会使我的程序无缘无故地结束。所以我的程序的输出是：

`SEND OK SEND OK SEND`

我想这是`write`错的，因为它没有 printf OK。ERRNO 值为 61（无可用数据）

我希望有人以前遇到过这个问题并解决了它。

编辑：有时当我取消时，r = -1 所以我可以处理错误，但大多数时候它只是终止程序。就像随机选择的一样。我很困惑 ：（

亲切的问候，劳尔

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-20T19:15:13.780

您正在写入一个已关闭的套接字，该套接字默认会生成一个“断管”信号 ( `SIGPIPE`)。为了能够可靠地从 中恢复`write()`，您需要`EPIPE`通过调用来忽略：

```
signal (SIGPIPE, SIG_IGN); 
```

程序中的某处，例如`main()`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-20T19:44:06.630

尽管选择的答案是忽略整个信号过程，但还有其他选择：

使用`send`功能`MSG_NOSIGNAL`：

```
send(con, buff_enviar+enviado, length-enviado, MSG_NOSIGNAL); 
```

`SIGPIPE`在套接字级别禁用（并非在所有内核上都可用）：

```
int flag = 1;
setsockopt(con, SOL_SOCKET, SO_NOSIGPIPE, &flag, sizeof(flag)); 
```

禁用`SIGPIPE`调用者线程：

```
sigset_t set;
sigemptyset (&set);
sigaddset (&set, SIGPIPE);
pthread_sigmask(SIG_BLOCK, &set, NULL); 
```

最后，禁用整个进程的信号（不推荐用于库）：

```
signal(SIGPIPE, SIG_IGN); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-29T05:08:38.827

同样在我的情况下，没有核心转储的程序有很多崩溃

信号（SIGPIPE，SIG_IGN）；

程序开头的这一行已经解决了这个问题！

# matlab - 使矩阵大小相等

> ID：16124030
> 
> 赞同：-3
> 
> 时间：2013-04-20T19:00:59.340
> 
> 标签：matlab, matrix, size, equality

假设我们在 中有以下两个矩阵`matlab`：

`>> x=[1 5;7 8;9 6]`

`>> y=[6 87]`

我正在尝试使它们具有相同的大小。我通过使 的大小与`y`的大小相同来做到这一点`x`。但是，当我`y`再次调用时，我得到的结果是原始维度。

我希望它们具有相同的尺寸，例如，如果我想测量它们之间的距离，它们必须具有相同的尺寸。

因此，其他单元格可以具有`zero`例如值。

我怎样才能在matlab中做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T19:28:32.820

尝试这个 ：

```
y = padarray(y,size(x)-size(y),'post'); 
```

确保 size(x) > size(y)。

有关更多信息，请查看：[padarray](http://www.mathworks.com/help/images/ref/padarray.html)

# python - 如何使用一个存储库为生产和开源设置 django 应用程序

> ID：16124031
> 
> 赞同：1
> 
> 时间：2013-04-20T19:01:04.510
> 
> 标签：python, django, git, github, django-settings

我有一个 python/django 项目，我使用 git 版本控制为开发和生产设置了该项目。我有三个 settings.py 文件：

-settings.py（其中包含潜在开源项目的虚拟变量），

-settings_production.py（用于生产变量），以及

-settings_local.py（仅为我的本地环境覆盖设置）。git 不跟踪此文件。

我使用这种方法，效果很好：

```
try:
    from settings_production import *
except ImportError, e:
    print 'Unable to load settings_production.py:', e

try:
    from settings_local import *
except ImportError, e:
    print 'Unable to load settings_local.py:', e 
```

但是，我希望这是一个开源项目。我设置了两个 git 遥控器，一个称为“heroku-production”，一个称为“github-opensource”。如何设置它以使“heroku-remote”包含 settings_production.py 而“github-opensource”不包含，以便我可以将这些设置保密？

帮助！我查看了互联网上的大多数资源，但它们似乎没有解决这个用例。这是正确的方法吗？有更好的方法吗？

我的梦想是能够将我的本地环境推送到 heroku-production 或 github-opensource 而不必弄乱设置文件。

注意：我查看了使用环境变量或不跟踪生产设置的设置，但感觉过于复杂。我喜欢在本地设置中看到我面前的一切。看[这个方法](http://blog.mozilla.org/webdev/2011/10/20/open-sourcing-your-django-site/)。

我也浏览了所有[这些方法](https://code.djangoproject.com/wiki/SplitSettings)，但它们似乎并不完全符合要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:13:56.253

我认为使用环境变量，如 Django 的两个勺子一书中所述，是最好的方法。

我正在遵循这种方法，并且我有一个应用程序在生产中运行了一个私有 GitHub 存储库（平均每月有 50 万页浏览量）、暂存和两个开发环境，并且我使用这样的目录结构：

```
MyProject
-settings
--__init__.py
--base.py
--production.py
--staging.py
--development_1.py
--development_2.py 
```

我将所有环境共有的所有内容都保存在 base.py 中，然后对 production.py、staging.py、development_1.py 或 development_2.py 进行适当的更改。

我的生产部署过程包括 virtualenv、Fabric、upstart、bash 脚本（由 upstart 使用）、gunicorn 和 Nginx。我有一个稍微修改过的 bash 脚本版本，我使用 upstart 来运行测试服务器；它是这样的：

```
#!/bin/bash -e
# starts the development server using environment variables and django-admin.py

PROJECTDIR=/home/user/project
PROJECTENV=/home/user/.virtualenvs/project_virtualenv
source $PROJECTENV/bin/activate

cd $PROJECTDIR
export LC_ALL="en_US.UTF-8"

export HOME="/home/user"
export DATABASES_DEFAULT_NAME_DEVELOPMENT="xxxx"
export DATABASES_DEFAULT_USER_DEVELOPMENT="xxxxx"
export DATABASES_DEFAULT_PASSWORD_DEVELOPMENT="xxx"
export DATABASES_DEFAULT_HOST_DEVELOPMENT="127.0.0.1"
export DATABASES_DEFAULT_PORT_DEVELOPMENT="5432"
export REDIS_HOST_DEVELOPMENT="127.0.0.1:6379"

django-admin.py runserver --pythonpath=`pwd` --settings=MyProject.settings.development_1 0.0.0.0:8006 
```

请注意，这不是完整的故事，我正在简化以说明我的观点。我在 base.py 中有一些额外的 Python 代码，它们也从这些环境变量中获取值。

玩这个，并确保检查 Django 的两个勺子中的相关章节，我也使用了你提到的导入方法，但是从存储库中获取设置并不容易管理，几个月前我进行了切换；这对我帮助很大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T22:30:24.473

[这里](https://stackoverflow.com/questions/13402397/django-private-project-git-repo-open-source-app-repo)有一个非常相似的问题。其中一个答案表明[git submodules](http://git-scm.com/book/en/Git-Tools-Submodules) 我会说这是最简单的方法。这是您的 VCS 的问题，而不是您的 Python 代码。

# javascript - JS 字符串“+” vs concat 方法

> ID：16124032
> 
> 赞同：208
> 
> 时间：2013-04-20T19:01:10.470
> 
> 标签：javascript

我对 Java 有一些经验，我知道字符串与“+”运算符的连接会产生新的对象。

我想知道如何以最好的方式在 JS 中做到这一点，它的最佳实践是什么？

* * *

## 回答 #1

> 赞同：301
> 
> 时间：2013-04-20T19:05:02.120

MDN 有以下说法[`string.concat()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/concat)：

> 出于性能原因，强烈建议使用字符串连接运算符（+、+=）而不是此方法

另请参阅@Bergi 的[链接](https://web.archive.org/web/20170404182053/https://jsperf.com/concat-vs-plus-vs-join)。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-04-20T19:05:28.113

在 JS 中，“+”连接通过创建一个新`String`对象来工作。

例如，与...

```
var s = "Hello"; 
```

...我们有一个对象***s***。

下一个：

```
s = s + " World"; 
```

现在，***s***是一个新对象。

第二种方法： [**String.prototype.concat**](http://www.w3schools.com/jsref/jsref_concat_string.asp)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-04-20T19:23:39.000

曾经有一段时间，将字符串添加到数组中并通过使用来完成字符串`join`是最快/最好的方法。这些天浏览器具有高度优化的字符串例程，建议`+`和`+=`方法是最快/最好的

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-06-22T11:07:31.910

*   我们不能使用`concat()`函数将字符串变量连接到整数变量，因为此函数仅适用于字符串，而不适用于整数。但我们可以使用 + 运算符将字符串连接到数字（整数）。
*   众所周知，函数比运算符慢得多。函数需要将值传递给预定义的函数，并且需要收集函数的结果。这比使用操作符进行操作要慢，因为操作符执行内联操作，但是函数用于跳转到适当的内存位置......所以，正如前面的答案中提到的，另一个区别显然是操作的速度。

```
<!DOCTYPE html>
<html>
<body>

<p>The concat() method joins two or more strings</p>

<p id="demo"></p>
<p id="demo1"></p>

<script>
var text1 = 4;
var text2 = "World!";
document.getElementById("demo").innerHTML = text1 + text2;
//Below Line can't produce result
document.getElementById("demo1").innerHTML = text1.concat(text2);
</script>
<p><strong>The Concat() method can't concatenate a string with a integer </strong></p>
</body>
</html>
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-20T19:03:02.000

您可以尝试使用此代码（相同的情况）

```
chaine1 + chaine2; 
```

我建议你也（我更喜欢这个）[string.concat 方法](http://www.toutjavascript.com/reference/reference.php?iref=30)

# android - 如何在android中检索联系人列表

> ID：16124034
> 
> 赞同：3
> 
> 时间：2013-04-20T19:01:23.440
> 
> 标签：android, json, contacts

我检索联系人列表（姓名、号码）的目的记录在 json 对象中，通过 Web 服务发送到服务器

然后我找到了访问联系人的代码，很好，我测试了这段代码

```
String id, name;

        ContentResolver crs = getContentResolver();

        Cursor people = crs.query(ContactsContract.Contacts.CONTENT_URI, null,
                null, null, null);

        String phone = "";

        people.moveToPosition(Contexts.getnbContacts());

        while (people.moveToNext())

        {

            id = people.getString(people
                    .getColumnIndex(ContactsContract.Data._ID));
            name = people.getString(people
                    .getColumnIndex(ContactsContract.Data.DISPLAY_NAME));

            if (Integer
                    .parseInt(people.getString(people
                            .getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {

                Cursor phones = getContentResolver().query(
                        ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                        null,
                        ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                                + " = " + id, null, null);
                while (phones.moveToNext()) {
                    // pdata =
                    // phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DATA));
                    phone = phone
                            + phones.getString(phones
                                    .getColumnIndex(ContactsContract.CommonDataKinds.Phone.DATA))
                            + " and ";
                    ;
                }

                phones.close();

            } 
```

我的问题是：如何将每个联系人（姓名、号码）保存在数组或数组列表中......

每个表行指定联系人

我认为数组类型与json格式兼容

那么如何复制json对象中的联系人

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-30T08:09:01.190

这是我的代码

```
public static Map<String, String> getAddressBook(Context context)
{
    Map<String, String> result = new HashMap<String, String>();
    Cursor cursor = context.getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null, null, null);
    while(cursor.moveToNext()) 
    {
        int phone_idx = cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER);
        int name_idx = cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME);
        String phone = cursor.getString(phone_idx);
        String name = cursor.getString(name_idx);
        result.put(name, phone);
    }
    cursor.close();

    return result;
} 
```

并且需要

```
<uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T11:04:19.697

您可以使用以下查询从联系人数据库中检索最喜欢的联系人

```
Cursor cursor = this.managedQuery(ContactsContract.Contacts.CONTENT_URI, projection, "starred=?",new String[] {"1"}, null); 
```

# c# - 输入“Api.Controllers”。没有默认构造函数

> ID：16124036
> 
> 赞同：2
> 
> 时间：2013-04-20T19:01:33.433
> 
> 标签：c#, asp.net-mvc, dependency-injection, asp.net-web-api

我有一个使用依赖注入的控制器：

```
 public FeedController(IFeedProcessor feedProcessor)
        {
            _feedProcessor = feedProcessor;
        } 
```

这是我的配置代码：

```
public static void Config()
    {

        ObjectFactory.Initialize(x => x.Scan(scan =>
            {
                x.For<IFeedProcessor>().Use<FeedProcessor>();
            }));
    } 
```

我的 FeedProcessor 类有参数构造函数：

```
 public FeedProcessor(IFeedParserFactory ifeedParserFactory)
        {
            _ifeedParserFactory = ifeedParserFactory;
        } 
```

这个 StructureMapControllerFactory ：

```
public class StructureMapControllerFactory : DefaultControllerFactory
    {
        protected override IController GetControllerInstance(RequestContext requestContext, Type controllerType)
        {
            if (controllerType == null)
                if (requestContext.HttpContext.Request.Url != null)
                    throw new InvalidOperationException(string.Format("Page not found: {0}", requestContext.HttpContext.Request.Url.AbsoluteUri.ToString(CultureInfo.InvariantCulture)));
            return ObjectFactory.GetInstance(controllerType) as Controller;
        }
    } 
```

我得到这个错误：类型'Api.Controllers.FeedController'没有默认构造函数我如何为这种情况配置结构图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T19:55:00.540

WebApi 不使用`DefaultControlFactory`创建 Api 控制器的实例。相反，它使用`DefaultHttpControllerSelector`. 但是，除非您有特定的原因来创建控制器工厂，否则我会改为使用 MVC 中内置的 Dependency Resolver 系统。

[http://buchanan1966.tumblr.com/post/2192279804/mvc3-using-dependencyresolver-with-structuremap](http://buchanan1966.tumblr.com/post/2192279804/mvc3-using-dependencyresolver-with-structuremap)

[http://marisks.net/2012/08/19/configuring-structuremap-in-aspnet-webapi/](http://marisks.net/2012/08/19/configuring-structuremap-in-aspnet-webapi/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-01T20:13:02.407

我最终得到了这个异常，因为我在我的应用程序的几个类中有循环依赖。

# c++ - 将文本文件中的数据读入结构数组

> ID：16124037
> 
> 赞同：0
> 
> 时间：2013-04-20T19:01:36.970
> 
> 标签：c++, arrays, file, structure

我以前见过这个问题，但我找不到可以帮助我解决问题的答案。这里发生了一些事情。这将显示一个菜单，允许用户：

1.  查看费用，
2.  更新费用，或
3.  退出以返回上一个菜单。

此信息保存到应输入和输出的数据文件中。尝试查看文件中的数据时，第一个菜单选项有问题。假设已经有一个`C:\danceexpenses.txt`包含此信息的数据文件：

```
DJ
100
Site
100
Food
100
Favors
100
Security
100
Ticket printing
100
Etc.
100
etc.
100 
```

程序不会显示信息。它只为每个提供一个空行。我需要添加一些东西来配置输出吗？

```
void charges()
{
    //Structures to hold data
    struct Expenses
    {
        string name; 
        double cost;
    };

    int chargesChoice;
    const int CHARGES_MENU_VIEW = 1, CHARGES_MENU_UPDATE = 2, CHARGES_MENU_QUIT = 3;
    const int NUM_EXPENSES = 8; //number of expenses
    Expenses danceExpenses[NUM_EXPENSES]; //array of structures
    int index; //loop counter

    cout << "\nWhat would you like to do?\n\n"
        << "1\. View charges\n"
        << "2\. Update charges\n"
        << "3\. Return to main menu\n"
        << "Enter your choice: ";
    cin >> chargesChoice;

    while (chargesChoice < CHARGES_MENU_VIEW || chargesChoice > CHARGES_MENU_QUIT)
    {
        cout << "\nPlease enter a valid menu choice: ";
        cin >> chargesChoice;       
    }

    switch (chargesChoice)
    {
        case CHARGES_MENU_VIEW: //Display the expenses data
            myFile.open("c:\\danceexpenses.txt", ios::in); //open file
            if (!myFile)
            {
                cout << "Error opening file. Program aborting.\n";
                return;
            }
            char output[100];
            cout << "\nHere are the expected expenses for the dance:\n";
            for (index = 0; index < NUM_EXPENSES; index++)
                cout << danceExpenses[index].name << endl << endl;
            myFile.close(); //close file
            break;
        case CHARGES_MENU_UPDATE:
            //get expense data
            myFile.open("c:\\danceexpenses.txt", ios::out); //open file
            if (!myFile)
            {
                cout << "Error opening file. Program aborting.\n";
                return;
            }
            for (index = 0; index < NUM_EXPENSES; index++)
            {
                cout << "Enter the name of the expense: ";
                cin.ignore();
                getline(cin, danceExpenses[index].name);
                cout << "Enter the expected cost for this expense: ";
                cin >> danceExpenses[index].cost;
            }

            //Write data to file
            for (index = 0; index < NUM_EXPENSES; index++)
            {
                myFile << danceExpenses[index].name << endl;
                myFile << danceExpenses[index].cost << endl;
            }
            myFile.close(); //close file
            break;
        case CHARGES_MENU_QUIT:
            showMenu();
            break;
    }
    charges();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:28:13.720

如果您的第一个操作是输入 1，则代码应输入：

```
 case CHARGES_MENU_VIEW: //Display the expenses data
        myFile.open("c:\\danceexpenses.txt", ios::in); //open file
        if (!myFile)
        {
            cout << "Error opening file. Program aborting.\n";
            return;
        }
        char output[100];
        cout << "\nHere are the expected expenses for the dance:\n";
        for (index = 0; index < NUM_EXPENSES; index++)
            cout << danceExpenses[index].name << endl << endl;
        myFile.close(); //close file
        break; 
```

这将打开舞蹈费用文件，但不会从中读取。然后它遍历尚未初始化的费用列表，并关闭输入文件。还有一个未使用的变量`output`。

在打印出来之前，您需要将数据读入内存。

```
int num = 0;
while (myFile >> danceexpenses[num].name >> danceexpenses[num].cost)
    num++;

for (index = 0; index < num; index++)
    cout << danceExpenses[index].name << endl << endl; 
```

# c++ - 以浮点数为计数器的循环，增加 0.01，不打印预期的浮点值

> ID：16124040
> 
> 赞同：-5
> 
> 时间：2013-04-20T19:02:06.177
> 
> 标签：c++, floating-point

```
for (float x = 0.00; x < 1.00; x += 0.01) {
    cout << x << endl;
} 
```

我预计

```
0.00
0.01
0.02
... 
```

它工作正常，**直到** `0.83`：

```
...
0.81
0.82
0.83
0.839999
0.849999
0.859999
0.869999
0.879999
0.889999
0.899999
0.909999
0.919999
0.929999
0.939999
0.949999
0.959999
0.969999
0.979999
0.989999
0.999999 
```

那部分是怎么回事？为什么所有额外`9`的 s？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-20T19:05:01.027

请阅读[每个计算机科学家应该了解的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

浮点类型不能代表所有可能的数值。他们有些不精确。最接近的可表示 IEEE754 单精度浮点值`0.84`是`0.839999973773956298828125`. 这比`0.84`. 如您所见，打印时显示为`0.839999`。这个数字的二进制表示是：

```
00111111 01010111 00001010 00111101 
```

事实上，even`0.01`不能完全用 来表示`float`，所以每次你把这个值加到 上`x`，你的期望就会变得越来越不精确。您可以通过使用`int`s 来避免这种情况，如下所示：

```
for (int x = 0; x < 100; x += 1) {
    cout << (x / 100.0f) << endl;
} 
```

但是，它打印的许多值在执行除法后仍然无法表示。如果您根本无法处理不精确，那么您必须根本不使用浮点值。将您的值存储为`int`s 并简单地将它们解释为表示相应的除以 100 的`float`值。

# java - 使用 Slick2D 写入和读取 XML 文件

> ID：16124044
> 
> 赞同：0
> 
> 时间：2013-04-20T19:02:44.480
> 
> 标签：java, xml, lwjgl, slick2d

`.XML`我想知道您将如何使用 Java 库 Slick2D编写和读取文件。

在过去的几天里，我用谷歌搜索并没有找到任何简洁明了的东西来解释我在寻找什么。

我正在寻找 3 件事：

1.  如何创建`.XML`文件（如果能够搜索目录以查看是否存在现有文件并且仅在尚不存在的情况下创建新文件，那就太棒了。
2.  如何写入创建的`.XML`文件。
3.  如何从找到的`.XML`文件中读取。这样做的原因是我正在尝试为游戏创建一个保存/加载类。

只是一个通用的代码片段，我可以根据自己的需要进行修改，即使对于学习体验来说也很棒。

所以现在我的问题是，有没有人有任何信息可以帮助我成功实现上述三个目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:16:24.553

要检查文件是否存在，您可以`exists()`使用`java.io.File`. 有关更多信息，请参阅[此](https://stackoverflow.com/questions/1816673/how-do-i-check-if-a-file-exists-java-on-windows)。

我不知道 slick2d 是否提供它自己的 xml 实用程序，但您应该始终能够使用标准的 java 方式来读取/写入 xml。您可以使用[本](http://www.java-samples.com/showtutorial.php?tutorialid=152)`DocumentBuilder`教程中显示的类似内容或[此处](http://docs.oracle.com/javase/tutorial/jaxp/sax/parsing.html)描述的 sax 解析器。如果您需要使用复杂的 xml 结构，可能值得研究一下[jaxb](http://www.oracle.com/technetwork/articles/javase/index-140168.html)。

# c - 空数组的指针

> ID：16124045
> 
> 赞同：5
> 
> 时间：2013-04-20T19:02:46.023
> 
> 标签：c, arrays, pointers, void-pointers

我有一个 void-Pointers 数组并想要访问元素（初始化它们），但它不起作用：

```
void* anyptr = ...; //a pointer to something
void* arr = (void*)malloc(sizeof(void*)*10);

int i=0;
for(i=0; i<10; i++)
   *(arr+i) = anyptr; //dont work, (arr+n) = anyptr; doesn´t work too 
```

我想，这不起作用的原因是左侧是元素 i 的结果。但我不知道如何做到这一点

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-20T21:45:37.463

在 C 中初始化数组有两种方法：

*   在**堆栈**上（它将为您处理内存，因为它会在您的函数结束时被清理）
*   在**堆中**（这将需要您自己处理分配和释放）。

如果你想使用堆栈，你可以像这样初始化你的数组......

```
#define ARRAY_LENGTH 10
void *ptr;
void *arr[ARRAY_LENGTH];
for (int i = 0; i < ARRAY_LENGTH; i++) {
    arr[i] = ptr;
} 
```

您可以类似地在堆中定义您的数组，如下所示...

```
#define ARRAY_LENGTH 10
void *ptr;
void **arr = malloc(sizeof(void *) * ARRAY_LENGTH);
for (int i = 0; i < ARRAY_LENGTH; i++) {
    arr[i] = ptr;
}
free(arr); 
```

重要的是要记住一个数组（除了在堆栈中分配的数组，它具有一些附加属性，例如长度）本质上只是一个指向第一个元素的指针，并且操作*arr[i]*与移动*i*sizeof相同(elem)*字节远离第一个元素，并在那里访问内存。如果您想获得指向数组中第*i*个索引的指针，那么您可以使用诸如...

```
void *indexPtr = arr + i; 
```

或者

```
void *indexPtr = &( arr[i] ); 
```

*以这种方式， void**的数组将是*void ***类型，因为该变量是指向数组第一个成员的指针，它是一个指针。这可能有点令人困惑，但请始终牢记数组元素的类型，并创建指向它们的指针。因此，如果数组是 int 类型，那么数组将是*int类型***或*int[]*，但如果要存储指向整数的指针，则**可以使用这两种形式中的任何一种初始化**int *类型的数组...****

 **```
int **arr = malloc(sizeof(int *) * ARRAY_LENGTH);
int *arr[ARRAY_LENGTH]; 
```

另请注意，您正在存储指针，因此如果您运行代码...

```
int *arr[4];
for (int i = 0; i < ARRAY_LENGTH; i++) {
    arr[i] = &i;
} 
```

虽然看起来数组中指向的值如下 - [0, 1, 2, 3]，但实际上它是 [4, 4, 4, 4]，因为您实际拥有的是一个指针数组，所有指针都指向函数中的变量*i*，因此无论何时更改它，数组中指向的值都将全部更改。
我希望这有帮助

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-20T19:06:58.983

您需要更改此行

```
void* arr = (void*)malloc(sizeof(void*)*10); 
```

对此

```
void** arr = malloc(sizeof(void*)*10); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T19:15:35.490

您不能取消引用 void 指针。这就是 void 指针的全部意义所在。取消引用指针使您可以访问在指针指向的地址处找到的项目。但是，使用 void 指针，您不知道目标对象有多大（它是 1B 字符还是 100B 结构？）。在取消引用之前，您必须将其转换为特定的指针类型。

**然后将整数i**添加（或减去）到指针定义为将 i-times sizeof(*pointer) 添加到指针的内容。（如果您的指针具有特定类型，您只能告诉 sizeof(*pointer)。带有 void 指针的指针算术没有意义）。

至于 (arr+n)= anyptr;，arr+n 只是一个地址。这不是您可以分配某些东西的值（不是左值）。**

# ruby-on-rails - 根据表单的两个字段将属性分配给对象

> ID：16124052
> 
> 赞同：0
> 
> 时间：2013-04-20T19:03:18.067
> 
> 标签：ruby-on-rails

我有一个应用`illustrations`程序`belong_to` `editions`。`belong_to` `novels`目前`illustrations`没有`belong_to` `novels`，如果他们没有，我会更喜欢。在表单上，​​我可以`edition_id`在创建插图时传递 ，但无法找到传递的方法，`novel_id`因为它不是`illustration`. 我需要确定一个唯一的`novel` `edition`配对来创建插图，因为许多`editions`可能有名称 1st，例如，但不同的发布日期等......我想我可以将它们设为哈希，然后在控制器中处理它们。我不知道该怎么做。这是正确的方法吗？您如何在表单中的 2 个字段中生成散列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:58:18.763

为什么需要从视图中进行？如果您只需要传递到插图 Novel_id，知道 edition_id：

```
@edition=Edition.find(params[:id])
novel_id=@edition.novel.id 
```

# php - 在 Joomla 中通过 Ajax 加载原始组件 html 输出

> ID：16124054
> 
> 赞同：0
> 
> 时间：2013-04-20T19:03:20.990
> 
> 标签：php, ajax, joomla

我有一个 joomla 组件，我需要以 Twitter 方式实现“加载更多”分页。我不知道该怎么做，我如何通过使用相同的输出来获取组件的 HTML `view.html.php`，但没有周围的标记（即模块和模板）。我不确定是否`loadTemplate()`会完成这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T07:53:01.297

添加参数：

```
?tmpl=component 
```

或者

```
?format=raw 
```

到查询字符串。

第一个将加载一个`component.php`在您的模板文件夹中命名的文件，该文件存在于大多数模板中并且不会加载额外的脚本。

后者只是输出没有任何模板的裸组件输出，应该是您的首选。

# c++ - C++ 中的 Trie 实现

> ID：16124056
> 
> 赞同：1
> 
> 时间：2013-04-20T19:03:31.693
> 
> 标签：c++, data-structures, segmentation-fault, trie

我正在尝试实现[TopCoder](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=usingTries)页面上显示的 trie。我正在对其进行一些修改以存储用户的电话号码。我遇到分段错误。有人可以指出错误。

```
 #include<iostream>
 #include<stdlib.h>
 using namespace std;

 struct node{
int words;
int prefix;
long phone;
struct node* children[26];
 };

struct node* initialize(struct node* root) {
    root = new (struct node);   
    for(int i=0;i<26;i++){
    root->children[i] = NULL;
    }
    root->word = 0;
    root->prefix = 0;
    return root;
 }

int getIndex(char l) {
    if(l>='A' && l<='Z'){
    return l-'A';
    }else if(l>='a' && l<='z'){
    return l-'a';
    }
 }

  void add(struct node* root, char * name, int data) {

    if(*(name)== '\0') {
        root->words = root->words+1;
        root->phone = data;
    } else {        
        root->prefix = root->prefix + 1;
        char ch = *name;
        int index = getIndex(ch);
        if(root->children[ch]==NULL)    {
            struct node* temp = NULL;
            root->children[ch] = initialize(temp);
        }
        add(root->children[ch],name++, data);
    }
 }

 int main(){
     struct node* root = NULL;
     root = initialize(root);
     add(root,(char *)"test",1111111111);
     add(root,(char *)"teser",2222222222);
         cout<<root->prefix<<endl;
     return 0;
  } 
```

在进行建议的更改后添加了一个新功能：

```
 void getPhone(struct node* root, char* name){
     while(*(name) != '\0' || root!=NULL) {
         char ch = *name;
         int index = getIndex(ch);
         root = root->children[ch];
         ++name;
     }
     if(*(name) == '\0'){
         cout<<root->phone<<endl;
     }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:31:28.157

改变这个：

```
add(root->children[ch], name++, data);
// ---------------------^^^^^^ 
```

对此：

```
add(root->children[ch], ++name, data);
// ---------------------^^^^^^ 
```

这段代码中的其余问题我留给您，但这是您启动调用堆栈的原因。

**EDIT** OP 要求进一步分析，虽然我通常不这样做，但这是一个相当简单的扩展应用程序。

这是在几个地方完成的：

```
 int index = getIndex(ch);
 root = root->children[ch];
 ... etc. continue using ch instead of index 
```

它引出了一个问题：*“为什么我们只是要求一个我们立即**忽略**并使用 char 的索引？”* 这是在`add()`和中完成的`getPhone()`。您应该在为数组`index`内的所有窥视计算它之后使用它。`children[]`

此外，该`initialize()`函数需要进行修改或彻底抛弃，以支持基于构造函数的解决方案，该代码真正属于该解决方案。最后，如果这个 trie 应该跟踪生成的单词的使用计数和每个级别参与的前缀，我不清楚为什么你需要单词和前缀计数器，但在任何一种情况下都应该更新你的递归体面*的*`add()`计数器在反向递归上将它们撞起来。

# php - 试图将二进制补码 16 位读入有符号十进制

> ID：16124059
> 
> 赞同：3
> 
> 时间：2013-04-20T19:04:09.293
> 
> 标签：php, python, math, binary

我试图（在 PHP 中）读取两个字节（16 位）的二进制补码值并返回一个带符号的十进制。

我不确定两者的恭维数学*应该*如何工作，但是从 php.net，我设法得到它几乎可以显示我的期望。我认为我遇到的问题是我没有得到任何负值。

我有的代码：

```
function _bin16dec($bin) {
    // Function to convert 16bit binary numbers to integers using two's complement
    $num = bindec($bin);
    if($num > 0xFFFF) { return false; }
    if($num >= 0x8000) {
        return -(($num ^ 0xFFFF)+1);
    } else {
        return $num;
    }
} 
```

这段代码是网上有人想出来的，但是在python里面看不懂。

```
def twoscomp( x ) :
   "This returns a 16-bit signed number (two's complement)"
   if (0x8000 & x): 
   x = - (0x010000 - x)
return x 
```

应用程序以 2 的补码形式从陀螺仪读取每个轴的两个字节。

提前致谢！

山姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T03:53:51.957

假设这个 Python 函数符合您的预期......

```
def twoscomp( x ) :
    """This returns a 16-bit signed number (two's complement)"""
    if (0x8000 & x): 
        x = - (0x010000 - x)
    return x 
```

...这个 PHP 函数应该做同样的事情。

```
function _bin16dec($bin) {
    // converts 16bit binary number string to integer using two's complement
    $num = bindec($bin) & 0xFFFF; // only use bottom 16 bits
    if (0x8000 & $num) {
        $num = - (0x010000 - $num);
    }
    return $num;
} 
```

此代码适用于我在 PHP 5.3.15 上。如果您需要进一步的解释，请告诉我。
--ap

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T09:55:28.840

这是 ec-2 Amazon Linux x64 发行版 PHP 5.3.27 的一个版本，它可以转换 32 位二进制字符串：

```
function _bin32dec($bin) {
  $num = bindec($bin) & 0xFFFFFFFF;
  if (0x80000000 & $num) {
    $num = - (0xFFFFFFFF - $num + 1);
  }
  return $num;
} 
```

# r - 更改 dotchart 'y' 轴中值的顺序

> ID：16124060
> 
> 赞同：2
> 
> 时间：2013-04-20T19:04:13.670
> 
> 标签：r

以下代码：

```
avector <- as.vector(top.links.added.overall$Amount)
x <- as.vector(top.links.added.overall[order(avector),])
row.names(x) <- c("Yahoo" ,"Cnn", "Google")
x$color[x$Amount == 100] <- "red"
x$color[x$Amount == 500] <- "blue"
x$color[x$Amount == 1000] <- "darkgreen"
dotchart(x$Amount,
         labels = row.names(x),
         cex=.7,
         groups = x$Amount,
         gcolor = "black",
         color = x$color,
         pch=19,
         main = "Gas Mileage for Car Models\ngrouped by cylinder",
         xlab = "Miles Per Gallon") 
```

生成此图：

![在此处输入图像描述](https://i.stack.imgur.com/oFBK2.png)

这是数据集 top.links.added.overall$Amount 的格式：

![在此处输入图像描述](https://i.stack.imgur.com/gFguZ.png)

这是文件数据集：

```
Amount,Name
1000,Google
500,Cnn
100,Yahoo 
```

当我删除代码时：

row.names(x) <- c("Yahoo","Cnn","Google")

我得到 1,2,3 的行名

我不需要我应该需要设置'y'轴的名称？如何修改图表的代码，以使数值最低的公司（在本例中为雅虎）从“y”轴的开头而不是顶部开始，目前正在发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T19:14:47.247

我不认为我可以用提供的 R 数据对象来测试它，但可能是这样的：

```
x <- as.vector(top.links.added.overall[order(-avector),])
row.names(x) <- rev( c("Yahoo" ,"Cnn", "Google") ) 
```

`rev`对 order 参数和（反向）函数使用数学否定。

编辑：我现在理解你的挫败感，但在查看了代码后，我决定尝试一下，这似乎可以做到：

```
dotchart(x$Amount,
     labels = row.names(x),
     cex=.7,
     groups = -x$Amount,    # the code sorts by `as.numeric(groups)`
     gcolor = "black",
     color = x$color,
     pch=19,
     main = "Gas Mileage for Car Models\ngrouped by cylinder",
     xlab = "Miles Per Gallon") 
```

![在此处输入图像描述](https://i.stack.imgur.com/S7yEU.png)

# sdk - 如何检测折线触摸？- 谷歌地图 iOS SDK

> ID：16124061
> 
> 赞同：0
> 
> 时间：2013-04-20T19:04:19.887
> 
> 标签：sdk, maps, touch, polyline, google-maps-sdk-ios

我正在考虑将路线添加到我的应用程序中。我想知道如何检测 GMSPoyline 上的触摸？我正在使用 1.1.2 版的 Google Maps SDK。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:02:43.430

Version 1.2.0 has been released and it looks like it's now possible. "Non-marker overlay types are tappable (see GMSMapViewDelegate)."

[https://developers.google.com/maps/documentation/ios/releases](https://developers.google.com/maps/documentation/ios/releases)

# php - 强制浏览器下载文件而不是打开

> ID：16124064
> 
> 赞同：2
> 
> 时间：2013-04-20T19:04:36.060
> 
> 标签：php, download

我正在使用典型的 PHP 代码来下载文档：

```
 header('Content-Type: ' . $mimeTypes[$fileext]); 
  header('Content-Disposition: attachment; filename="' . $filename . '"');
  header('Content-Transfer-Encoding: binary');
  header('Accept-Ranges: bytes');
  header('Cache-Control: private');
  header('Pragma: private');

  readfile($filepath); 
```

一切正常 - 打开一个下载/另存为对话框，除了 .doc 文件尝试在 docs.google.com 中打开但由于缺乏权限而失败 - 这是因为我从网站根目录之外提供文件。

那么如何绕过 docs.google 并强制**每个**浏览器提供另存为对话框，而不管文件 mime 类型如何？`('doc' => 'application/msword')`

我尝试了以下方法无济于事：

1.  在 .htaccess 文件中：

    ```
    <FilesMatch "\.(?i:doc)$">
        ForceType application/octet-stream
        Header set Content-Disposition attachment
    </FilesMatch> 
    ```

2.  在 .htaccess 文件中：

    ```
    AddType application/octet-stream .doc 
    ```

3.  在 PHP 脚本中：

    ```
    header('Content-Type: application/force-download'); 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:10:23.337

将此添加到您的标题中：

```
header("Content-type: application/force-download"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-24T18:08:34.910

以下 php 为我工作

```
header("Cache-Control: private");
header("Content-Description: File Transfer");
header("Content-Disposition: attachment; filename=".$file."");
header("Content-Transfer-Encoding: binary");
header("Content-Type: binary/octet-stream"); 
readfile ($link); 
```

PS - 我`$file`只在变量中使用了文件扩展名，所以不需要提及*mime 类型*......

希望这可以帮助 ：）

# asp.net - TFS 锁定问题

> ID：16124065
> 
> 赞同：0
> 
> 时间：2013-04-20T19:04:42.050
> 
> 标签：asp.net

我的系统管理员重命名了我的计算机。所以原来是“MyLaptop2”的地方现在只是“MyLaptop”。

所以现在我所有的源代码控制绑定和签出的文件都在寻找带有“MyLaptop2”的工作区。

我有两个特定文件（经典 asp）现在无法签入/签出，因为它已被 MyLaptop2 锁定

我现在如何更新 TFS 中的文件（经典 asp）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:56:43.210

[这个问题略有不同](https://stackoverflow.com/questions/1815562/how-to-delete-a-developers-workspace)，但解决方案是相同的。撤消更改，或者只是从 TFS 中删除旧工作区

# html - 创建一个 CSS 模板，覆盖整个页面，没有边距，即使内容几乎是空的

> ID：16124066
> 
> 赞同：0
> 
> 时间：2013-04-20T19:04:43.513
> 
> 标签：html, css, templates

我创建了一个模板，我希望顶部菜单位于页面顶部并占据页面的整个宽度，然后

我希望左侧菜单和中心占据整个页面

并且页脚具有与顶部菜单相同的特征

如果左侧菜单或中心的内容很小：整个页面被中心和左侧菜单覆盖，底部有页脚，没有滚动条

这就是我尝试过的：[点击我:)](http://jsfiddle.net/cQMur/4/)

```
 #page{
    background-color : black;    
}
#top-menu{
    background-color : yellow;
}
#left-menu{
    background-color : blue;
    float:left;
}
#center{
    background-color : red;
}
#footer{
    background-color : green;
} 
```

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:23:12.183

使用高度和宽度的百分比，您可以达到您想要的效果：

```
html, body, .page {
    height: 100%;
    width: 100%;
    margin: 0;
    padding: 0;
}
.top-menu{
    background: yellow;
    height: 15%;
}
.left-menu{
    background: blue;
    float:left;
    height: 75%;
}
.center{
    background: red;
    height: 75%;
}
.footer{
    height: 10%;
    background: green;
} 
```

[小提琴](http://jsfiddle.net/cQMur/5/)

**编辑：**根据您的评论，这是一个更新的解决方案：

一种选择是将 a `min-height`on设置`.center`为百分比。

使用 CSS 解决等高的侧边栏并不容易或直观。使用一种称为[“人造列”](http://alistapart.com/article/fauxcolumns)的技术，该技术包括为背景图像`.content`而不是`.left-menu`直接为背景，您可以实现效果。我使用了 CSS3 渐变（使用带有 Compass 的 SCSS 使这更容易，但您可以手动完成所有浏览器前缀）。

更新的 CSS：

```
html, body, .page {
  height: 100%;
  width: 100%;
  margin: 0;
  padding: 0;
}

.top-menu {
  background: yellow;
  height: 15%;
}

.left-menu {
  float: left;
  width: 25%;
}

.center {
  background: red;
  background: -webkit-gradient(linear, 0% 50%, 100% 50%, color-stop(0%, #0000ff), color-stop(25%, #0000ff), color-stop(25%, #ff0000));
  background: -webkit-linear-gradient(left, #0000ff, #0000ff 25%, #ff0000 25%);
  background: -moz-linear-gradient(left, #0000ff, #0000ff 25%, #ff0000 25%);
  background: -o-linear-gradient(left, #0000ff, #0000ff 25%, #ff0000 25%);
  background: linear-gradient(left, #0000ff, #0000ff 25%, #ff0000 25%);
  min-height: 75%;
  padding-left: 26%;
}

.footer {
  height: 10%;
  background: green;
}

p {
  margin: 0;
} 
```

[笔](http://codepen.io/bookcasey/pen/souwD)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T21:25:05.267

解决我的问题的诀窍是：添加此 jquery 代码：

```
 <script src="jquery-1.9.1.min.js" ></script>
<script>
$(function(){
$('#left-menu').height($('#center').height());
});
</script> 
```

在我的html代码之后：

```
 <div id="page" >
    <div id="top-menu" >
        content of top menu
    </div>
    <div id="left-menu" >
        content of left menu
    </div>
    <div id="center" >

<p>content of center</p><p>content of center</p><p>content of center</p><p>content of center</p><p>content of center</p>

 </div>
    <div id="footer" >
        content of footer
    </div>
</div> 
```

这是CSS：

```
 html, body, #page {
    height: 100%;
    width: 100%;
    margin: 0;
    padding: 0;
}
#top-menu{
    background: yellow;
    height: 6%;
}
#left-menu{
    background: blue;
    float:left;
    min-height: 90%;
    min-width: 15%;
}
#center{
    background: brown;
    min-height: 90%;

}
#footer{
    clear : both;
    height: 4%;
    background: green;
}
p{
margin : 0;
} 
```

@bookcasey 谢谢你的帮助；）

# java - std:random shuffle() 和 Collections.shuffle 之间的区别

> ID：16124068
> 
> 赞同：-2
> 
> 时间：2013-04-20T19:04:51.117
> 
> 标签：java, c++, shuffle

我多次尝试理解为什么每个都`std:random shuffle()`在 C++ 和`Collections.shuffle`Java 中。

相同的种子不会给出相同的生成序列，但是假设它们都是均匀分布的。

如果有人可以帮助我了解我何时可以产生相同的价值，我将不胜感激。我实现了一个使用随机生成的值作为初始值的算法，我得到了 C++ 的结果，我想验证我用 Java 实现的算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:09:19.433

它们产生不同结果的原因是它们的随机数生成器产生不同的随机数序列。当我需要对不同编译器或语言相同的随机数序列时，我所做的是生成一个数字序列并将其存储在一个文本文件中，然后使用该文本文件作为随机数的来源。

# java - 数组索引超出范围错误

> ID：16124073
> 
> 赞同：0
> 
> 时间：2013-04-20T19:05:05.980
> 
> 标签：java, arrays

我正在开发一个程序，该程序从文件中读取输入并给出有多少字符串是互补的输出。这是代码

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.util.Arrays;
import java.util.Random;
import java.util.Scanner;

public class QuickSorting {

    /**
     * @param args
     * @throws IOException 
     */
    public static void main(String[] args) throws IOException {
        String data;
        Boolean status=false;
        int counter=0;
        int cases,case_item;
        String[]inputs;
        String to_cmp;
        String with_cmp;
        // TODO Auto-generated method stub
        File file = new File("input.txt");  
        //  Get data from this file using a file reader.   
        FileReader fr = new FileReader(file);  
        // To store the contents read via File Reader  
        BufferedReader br = new BufferedReader(fr);
        //writer to write in file

        data=br.readLine();
         cases=Integer.parseInt(data);
         //check total cases
        for(int i=1;i<=cases;i++)
        {
            data=br.readLine();
            case_item=Integer.parseInt(data.trim());
            inputs=new String[case_item];
            //check entries in each case
            for(int c_i=0;c_i<case_item;c_i++)
            {
                data=br.readLine();
                inputs[c_i]=data;

            }

            for(int i1=0;i1<(inputs.length-1);i1++)
            {

                for(int j=0;j<(inputs.length-1);i1++)
                { 
                    if(i1!=j)
                    {  to_cmp=inputs[i1].toString();
                        with_cmp=inputs[j];
                        status=compare_entry(to_cmp,with_cmp);
                        if (status)
                        {counter++;}
                    }
                }

            }
            System.out.println("The number of complementary strings  are "+counter);
        }

} 

public static boolean compare_entry(String to_cmp,String with_cmp)
{Boolean stat=false;
for(int i=0;i<(to_cmp.length()-2);i++)
{
    if(to_cmp.charAt(i)!=with_cmp.charAt(i))
    {stat=true;
    }
    else
    {
        break;
    }
}
    return stat;}
} 
```

但是我在这一行中的第 58 行中将 Array 排除在键错误 **to_cmp=inputs[i1].toString()**中；

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T19:07:15.860

在带有 j 的 for 循环中，您将再次增加 i1 。你有

```
for(int j=0;j<(inputs.length-1);i1++) 
```

应该是

```
for(int j=0;j<(inputs.length-1);j++) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T19:08:46.707

问题出在这一行：

```
for(int j=0;j<(inputs.length-1);i1++) 
```

像这样修复它：

```
for(int j=0;j<(inputs.length-1);j++) // it's j++, not i1++ 
```

你看，你增加了错误的计数器。此外，循环条件有点特殊，通常我们使用`i < inputs.length`: 注意我们不会`1`从长度中减去，否则将不会访问数组中的最后一个元素。

# android - 从后台服务使用 Android Drive API

> ID：16124074
> 
> 赞同：5
> 
> 时间：2013-04-20T19:05:09.430
> 
> 标签：android, google-drive-api, google-api-java-client

有一个如何使用 Drive API [https://developers.google.com/drive/quickstart-android](https://developers.google.com/drive/quickstart-android)的示例。它运行良好，但是在尝试从后台服务将文件上传到 GDrive 时遇到了一些麻烦。

在我发现的所有示例中，如果我们收到`UserRecoverableAuthException`，我们需要使用该异常 ( `UserRecoverableAuthException#getIntent()`) 中的 Intent 启动新的 Activity，以将用户带到 OAuth2 权限页面。

当我们从 Activity 执行此操作时，我们只使用`startActivityForResult`，因此我们可以使用`onActivityResult`来知道用户完成了他的交互，我们可以重试。

但是，如果我想使用 Service 中的 Drive API，并且需要用户交互，我所能做的就是通过 PendingIntent 向用户提供通知。并且没有任何回调让我知道用户何时关闭 OAuth2 权限页面。

你能建议任何方法吗？也许我错过了什么？也许有一些广播我必须赶上等？

谢谢你。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-05-02T10:34:50.250

从您将处理权限活动的活动结果的通知开始活动。处理结果并有选择地完成活动。

```
@Override
protected void onActivityResult(final int requestCode, final int resultCode, final Intent data) {
  if (resultCode == Activity.RESULT_OK) {
    // permission is given
    finish();
  } else {
    or show error
  }
} 
```

# php - Ajax 更新 HTML 元素的 css

> ID：16124075
> 
> 赞同：0
> 
> 时间：2013-04-20T19:05:11.433
> 
> 标签：php, css, ajax, jquery

我想用 ajax 显示和隐藏 HTML div，

情况：

```
progressbar('on');

very_long_function(); 

progressbar('off'); 
```

我想在工作时显示 div `very_long_function();`，但在完成工作时我想隐藏 div

进度条功能：

```
function progressbar($status){

    if($status == "on"){

        echo "
                <script> 
                        $(document).ready(function() {   function() { 
                        $('#load').css('display','inline');

                        }); 
                </script>
            ";
    } 
    else{

        echo "
                <script> 
                        $$(document).ready(function() {   function() { 
                        $('#load').css('display','none');

                        }); 
                </script>
            ";
    }
} 
```

问题是 div 在`very_long_function();`工作时不显示，也许可以用 AJAX 或 jQuery 解决这个问题

HTML

```
<div id="load" style="display: none;"><img src="loading_baras.gif" style="width: 550px; height: 10px; margin-top: -10px"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T19:11:06.317

确保您包含 jquery lib 以使用它。jquery 中也没有双 $$。请给出 html，我们会更正它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T19:15:03.543

我认为，你的架构是错误的。您必须为此使用 JS。

像下一个：

```
 $(function(){
       $('#load').css('display','inline');

       $.post('/very_long_function.php', {url: 'http://www.google.com'}, function(result){
           alert(result);
           $('#load').css('display','none');
       }); 
    }); 
```

PHP：**very_long_function.php**

```
$url = $_POST['url'];
$result = very_long_function($url);
echo $result;
die; 
```

# javascript - 多个字段上的 jQuery 模糊问题

> ID：16124078
> 
> 赞同：1
> 
> 时间：2013-04-20T19:05:31.563
> 
> 标签：javascript, jquery, blur

我正在尝试创建一个动态报价表单，用户可以根据需要添加任意数量的行。在输入具有“reCal”类的输入字段后，我希望计算总价格字段。

```
<div class="orderItem">
<div class="row col2">
<input class="reCal nvo" id="iQty" name="item[1][qty]" placeholder="1" value="" />
</div><!--col2-->
<div class="row col3">
<input class="ctp reCal nvwdo currency" id="iPrice" name="item[1][price]" placeholder="100.00" value="" />
</div><!--col3-->
</div><!--orderItem-->

<div class="box">
<p>Net Total (£)</p>
<input class="noh" id="netTotal" name="netTotal" type="text" readonly="readonly" value="0" />
</div> 
```

这是我目前拥有的 jQuery。

```
$(document).ready(function(){

    $('.reCal').blur(function(){
        calculate();
    });

    function calculate(){
        var net = 0;
        $('.ctp').each(function(){
            net += parseInt($(this).val());
        });
        $('input#netTotal').val(net.toFixed(2));
    }
}); 
```

此代码确实正确计算了总和，但模糊功能仅适用于第一个输入框，即使所有其他输入框具有相同的类。

我不知道我的问题是否源于使用 .after() 命令写入每个新行。虽然只是一个理论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T19:08:40.693

试试这个方法——

```
$(document).on('blur','.reCal',function(){
        calculate();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T19:07:48.193

试试下面的代码，

```
$(document).ready(function(){

    $('.reCal').live('blur',function(){
    calculate();
    })

    function calculate(){
        var net = 0;
        $('.ctp').each(function(){
            net += parseInt($(this).val());
        });
        $('input#netTotal').val(net.toFixed(2));
    }
}); 
```

# c# - 如何绑定从数据源获取其元素的组合框的“SelectedValue”属性？

> ID：16124081
> 
> 赞同：2
> 
> 时间：2013-04-20T19:05:35.747
> 
> 标签：c#, winforms, data-binding, combobox

我想我几乎想通了，但是我有一个错误：通过 DataSource 属性的绑定使绑定数据源中的第一个元素成为组合的默认值，但这对我不利，因为此默认值将传播到通过“SelectedValue”属性绑定的数据源的第一行，它会用错误的值覆盖正确的值。如何解决这个问题？

这是我的代码：（在北风数据库中，我希望能够从组合中选择将插入订单中的员工）

```
this.comboBox1.DataBindings.Add(new System.Windows.Forms.Binding("SelectedValue", this.ordersBindingSource, "EmployeeID", true));
this.comboBox1.DataSource = this.employeesBindingSource;
this.comboBox1.DisplayMember = "FullName";
this.comboBox1.ValueMember = "EmployeeID"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T19:29:57.507

我这样做：

```
DataRow dr=this.ordersBindingSource.Current;
  Combo.Text="";
  if(dr!=null)
  {
    if(dr[Combo.ValueMember]!=DBNull.Value)
    {
     Combo.SelectedValue=dr[Combo.ValueMember].ToString();        
     Combo.Text=dr[Combo.DisplayMember].ToString();         
    }
  } 
```

在 recordChange 中执行此操作

# android - 更新用户的个人资料图片

> ID：16124084
> 
> 赞同：5
> 
> 时间：2013-04-20T19:05:55.817
> 
> 标签：android, sqlite, caching, image-loading

我正在制作一个应用程序，我使用 ImageLoading Framework 从服务器下载图像并将 URL 放入缓存中。现在我想要更新用户的个人资料图片，但即使在服务器上更新了个人资料图片后，它也不会显示在应用程序中。

该应用程序正在显示用户的旧个人资料图片。为什么会出现这个问题，我该如何解决？

更新onclick的代码：

```
update_profile_pic.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        v.performHapticFeedback(HapticFeedbackConstants.KEYBOARD_TAP);
        String value_for_test="delete";
        Toast.makeText(getBaseContext(), "it works", Toast.LENGTH_SHORT).show();
        Intent i=new Intent(getApplicationContext(),ProfilePictureCaptureHomeActivity.class);
        i.putExtra("image",value_for_test);
        startActivity(i); 
```

个人资料图片捕获首页

```
DBAdapter db = new DBAdapter(getApplicationContext()); 
db.open();
if (null == phoneNumber) 
{ 
    Cursor c = db.getUserInfo();
    phoneNumber = c.getString(0);
    imageUrl = c.getString(1);

    System.out.println("the imageUrl is"+imageUrl);
    c.close(); 
}
setContentView(R.layout.profilepic_capture); 
if (null == imageUrl) 
{ 
    Cursor imageUrlObj = db.getUserInfo();
    imageUrl = imageUrlObj.getString(1);
    System.out.println("the imageurl is"+imageUrl);

    imageUrlObj.close(); 
}
db.close(); 
```

用于更新个人资料图片：

```
if(image!=null){
    Toast.makeText(getApplicationContext(), "Redirected", Toast.LENGTH_LONG).show();
    imageUrl=null;   
}
if(imageUrl != null)
{
    Intent uploadimg = new Intent(ProfilePictureCaptureHomeActivity.this,ListeningAndSharingHomeActivity.class);
    uploadimg.putExtra("phoneNumber", phoneNumber);
    startActivity(uploadimg);
}
else
{
    Log.v("ProfilePictureCaptureHomeActivity", "Staying Here");
}

_gallerybutton = (ImageButton) findViewById(R.id.btn_gallery);
_photobutton = (ImageButton) findViewById(R.id.btn_photo); 
System.out.println("here in popup phoneeeeee" + phoneNumber); 
System.out.println("here in flag************" + firstUpload);

_gallerybutton.setOnClickListener(new OnClickListener() { 
    @Override
    public void onClick(View v) {
        v.performHapticFeedback(HapticFeedbackConstants.KEYBOARD_TAP);
        System.out.println("here in galleryyyyyyyyyy");
        Intent uploadimg = new Intent(ProfilePictureCaptureHomeActivity.this,ProfilePicFromGallery.class);
        uploadimg.putExtra("phoneNumber", phoneNumber); 
        startActivity(uploadimg);
    }
});

_photobutton.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        v.performHapticFeedback(HapticFeedbackConstants.KEYBOARD_TAP);
        System.out.println("here in take piccccc");
        Intent capIntent = new Intent(ProfilePictureCaptureHomeActivity.this,ProfilePicFromCamera.class);
        startActivity(capIntent);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:11:43.733

看看这段代码。

```
private  String deleteExistingFile(String url , Context context) 
{

    String SaveFolderName = context.getFilesDir().getAbsolutePath()  + "/yourinternalmemoryfolder"; 

    String  str_randomnumber= url.substring(url.lastIndexOf("/") + 1);
    File wallpaperDirectory = new File(SaveFolderName);
        if (!wallpaperDirectory.exists())
        wallpaperDirectory.mkdirs();                
    String  Photo_ImagePath=SaveFolderName+"/" + str_randomnumber ;                 

    String result = "";
    System.out.println("file path to be deleted " + Photo_ImagePath);

         File f = new File(Photo_ImagePath);
          if (f.exists())
          {
              System.out.println(" EEEEEEEEEEXXXXXXXXIIIIISSSSSSSTTTTTTT ");
          try {
            if(f.delete() == true){
                result = "Success";
            }else{
                result = "Failure";
            }

          }

          catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();

            return "Error";
        }

          }

          System.out.println("deleting existing file " + result);
        return result;

} 
```

# c# - 将自定义 WPF 表单最大化为屏幕大小

> ID：16124089
> 
> 赞同：0
> 
> 时间：2013-04-20T19:06:14.877
> 
> 标签：c#, .net, wpf

我正在尝试在 WPF 中创建自定义表单。我将**windowStyle**设置为**None**

我添加了 3 个按钮：

1.  关
2.  最大/最小
3.  隐藏

我要做的是当用户单击第二个按钮时，如果表单处于正常状态，则将表单最大化为屏幕大小，否则如果表单处于最大化状态，则将表单设置为初始状态尺寸..

这是我尝试过的，但是当我第一次单击第二个按钮时没有任何反应

```
 private bool maximized = false;
  private void button2_Click(object sender, RoutedEventArgs e)
    {
        if (!maximized)
        {
            this.MaxHeight = SystemParameters.PrimaryScreenHeight;
            this.MaxWidth = SystemParameters.PrimaryScreenWidth;
            this.WindowState = System.Windows.WindowState.Maximized;
            maximized = true;
        }
        else
        {
            this.WindowState = System.Windows.WindowState.Normal;
            maximized = false;
        }
    } 
```

我需要添加 Invalidate 或类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:14:27.237

好的，我解决了.. 当我创建 xaml 文件时.. 我添加了一个矩形，因此表单主体将是矩形.. 我需要更改矩形的宽度和高度..

```
 private void button2_Click(object sender, RoutedEventArgs e)
    {
        if (!maximized)
        {

            this.FormBody.Width = SystemParameters.WorkArea.Width; //rectangle's width
            this.FormBody.Height = SystemParameters.WorkArea.Height;// rectangle's height
            this.WindowState = System.Windows.WindowState.Maximized;
            maximized = true;
        }
        else
        {
            this.WindowState = System.Windows.WindowState.Normal;
            maximized = false;
        }
    } 
```

我也改变了`SystemParameters.PrimaryScreenWidth`to`SystemParameters.WorkArea.Width` 和`Height`so 以这种方式表单不会超过任务栏

# eclipse - 无法拖放到 Eclipse

> ID：16124102
> 
> 赞同：8
> 
> 时间：2013-04-20T19:07:54.447
> 
> 标签：eclipse, drag-and-drop

自从我开始使用它以来，我一直在从 Windows Explorer 拖放到 Eclipse，现在发现自己无法这样做。当我将 .java 文件拖到我的包上时，鼠标光标停留在一个带有对角线的圆圈中，并且放下什么也不做。我试图更改我的工作区，创建一个全新的工作区，删除 eclipse 并重新下载它。它仍然不起作用。让 Eclipse 以管理员身份运行也不能解决问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T19:47:57.820

至少有两种解决方法：

*   使用菜单文件 -> 导入 -> 常规 -> 文件系统
*   或`Ctrl``C`在 Windows Explorer 中使用，`Ctrl``V`在 Eclipse 的 Package Explorer 中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-16T11:40:57.690

当 Eclipse 以管理员身份运行时，我遇到了这个问题。把它放回去就行了。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-05-28T12:50:07.007

我发现这是因为在**Project Explorer**而不是**Package Explorer**中查看项目。

右键单击一个项目 > 显示在 > 包资源管理器

此时您将能够再次拖放。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-20T16:29:06.780

尝试直接从探索的 zip 拖放图像文件时，我遇到了类似的问题。解压缩 zip 后，拖放按预期工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-11T08:30:20.343

对我来说，这是缺少的市场客户。
当 help -> Eclipse Marketplace 缺失时，这一点很明显。
我在帮助下安装了它 -> 安装新软件 -> 2018-09 更新站点 -> Eclipse Marketplace

# java - 在我拖动打开的窗口之前看不到 JFrame 的内容

> ID：16124105
> 
> 赞同：0
> 
> 时间：2013-04-20T19:08:10.547
> 
> 标签：java, swing, window, jframe

这实际上是我的第一个完整程序，最终将用于为我正在制作的机器人编写代码。一切正常，除了当我运行它时，我必须拖动打开窗口才能看到里面的内容。

有关如何修复它的任何建议。frame2 - “点击构建文件”有效。框架 - 带有按钮网格的那个，是我必须拖开才能看到的那个。

这是框架的设置文件（不起作用的那个）

```
package Grid;

//march 13 to April 11
import java.awt.GridLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import java.awt.*;
import java.awt.event.*;

@SuppressWarnings("serial")
public class ButtonGrid extends JFrame {
    public static int clicked[][] = new int[20][40];
    static JButton button[] = new JButton[800];
    static int x;
    static int count = 1;
    public static int clickedfinal[][];
    int value;

    public ButtonGrid() {

        JFrame frame = new JFrame();
        frame.setSize(400, 200);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);

        GridLayout grid = new GridLayout(20, 40, 10, 8);
        frame.setLayout(grid);

        for (int c = 0; c < 20; c++) {
            for (int d = 0; d < 40; d++) {
                clicked[c][d] = 0;
            }
        }
        for (x = 0; x < 800; x++) {
            button[x] = new JButton();
            button[x].setActionCommand(Integer.toString(x));
            frame.add(button[x]);
            button[x].setBackground(Color.LIGHT_GRAY);
            button[x].setOpaque(true);

            thehandler handler = new thehandler();
            button[x].addActionListener(handler);
        }
    }

    public class thehandler implements ActionListener {
        public void actionPerformed(ActionEvent e) {

            for (;;) {
                value = Integer.parseInt(e.getActionCommand());
                button[value].setBackground(Color.BLACK);

                int r = value % 40;
                int m = ((value - (value % 40)) / 40);
                // learn how to round up

                clicked[m][r] = 1;

                break;

            }

        }

    }

    public static void main(String[] args) {
        new ButtonGrid();

    }

} 
```

这是frame2的文件，它确实有效；要测试只需运行这个。

```
package Grid;

import javax.swing.JButton;
import javax.swing.JFrame;

import Grid.ButtonGrid;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.IOException;

@SuppressWarnings("serial")
public class Arduinowriter extends JFrame {

    static int t = 1;
    static int buttonpressed;
    static int total;
    static String Code;
    static String oldcode;

    public Arduinowriter() {
        JFrame frame2 = new JFrame("Build File");
        JButton button = new JButton("Click to Build File");
        frame2.setSize(400, 400);
        frame2.add(button);
        frame2.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame2.setVisible(true);

        button.setActionCommand(Integer.toString(1));
        thehandler handler = new thehandler();
        button.addActionListener(handler);

    }

    public class thehandler implements ActionListener {
        public void actionPerformed(ActionEvent e) {
            buttonpressed = Integer.parseInt(e.getActionCommand());

            String newLine = System.getProperty("line.separator");
            String Motor2_half = "digitalWrite(Motor2, HIGH);" + newLine
                    + "delay(500)" + newLine + "digitalWrite(Motor2, LOW)";

            String Motor2_one = "digitalWrite(Motor2, HIGH);" + newLine
                    + "delay(1000);" + newLine + "digitalWrite(Motor2, LOW);";
            String Servo1_dispense = "digitalWrite(Servo1, HIGH);" + newLine
                    + "delay(1000)" + newLine + "digitalWrite(Servo1, LOW);";

            String Motor2_back = "digitalWrite(Motor2back, High" + newLine
                    + "delay(6000)" + newLine + "digitalWrite(Motor2back, Low)";

            String Motor1_forward = "digitalWrite(Motor1, HIGH);" + newLine
                    + "delay(1000);" + newLine + "digitalWrite(Motor1, LOW);";

            String dispenseCycle = (Motor2_one + newLine + Servo1_dispense
                    + " //Domino" + newLine);

            String skipCycle = (Motor2_one + newLine);

            String backCycle = (Motor1_forward + newLine + Motor2_back + newLine);

            while (buttonpressed == 1) {

                for (int x = 0; x < 20; x++) {

                    Code = oldcode + "//Line " + (x + 1);
                    oldcode = Code;
                    yloop: for (int y = 0; y < 40; y++) {

                        boolean empty = true;
                        for (int check = y; check < 39; check++) {

                            if (ButtonGrid.clicked[x][check] == 1) {
                                empty = false;
                                System.out.println(x + " not empty");
                            }
                        }

                        if (ButtonGrid.clicked[x][y] == 1 && y == 0) {
                            Code = oldcode + newLine + Servo1_dispense
                                    + " //Domino" + newLine;
                        } else if (ButtonGrid.clicked[x][y] == 1) {
                            Code = oldcode + newLine + dispenseCycle + newLine;
                        }

                        else if (ButtonGrid.clicked[x][y] == 0
                                && empty == false) {
                            Code = oldcode + newLine + skipCycle + newLine;
                        } else {
                            Code = oldcode + newLine + backCycle + newLine;
                            oldcode = Code;
                            break yloop;
                        }
                        oldcode = Code;

                    }
                }

                try {

                    BufferedWriter out = new BufferedWriter(new FileWriter(
                            "C:\\ArduinoCode.txt"));
                    out.write(Code);
                    out.close();
                } catch (IOException g) {
                    System.out.println("Exception ");

                }

                return;
            }

        }

    }

    // button

    public static void main(String[] args) {

        new ButtonGrid();
        new Arduinowriter();

    }
} 
```

注意：我是一个非常初学者。这段代码花了很多时间来编写，我用谷歌和 youtube 弄清楚了一切。如果代码中的任何内容或我所说的内容不清楚或没有意义，请原谅我并问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T21:34:32.707

在设置布局管理器和影响其“视觉”状态的所有其他内容`frame.setVisible(true)` *后*调用。

# sql-server - 将参数从一个存储过程传递到另一个存储过程

> ID：16124114
> 
> 赞同：0
> 
> 时间：2013-04-20T19:08:59.980
> 
> 标签：sql-server

我有 3 个存储的过程 A、B、CA，应用程序使用所有参数调用 A，然后 A 调用 B 和 C

```
ex 
--------------------------------------------
CREATE PROC B
 @b int
  as 
   begin tran
    do something  
   commit 
-------------------------------------------    
CREATE PROC C
 @c varchar(50)
  as 
   begin tran
    do something  
   commit  
--------------------------------------------
CREATE PROC A 
   @j int ,
   @c varchar(50),
   @b int
     as
       begin tran
        exec C @c   /*---call procedure C*/
        exec B @b   /*---call procedure B*/
       commit 
```

这是否会影响性能，因为我不止一次声明了同一个变量？但我需要确保 C 和 B 都正确执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T19:12:03.473

我建议你将三个存储过程封装在`transaction object`

链接：http: [//msdn.microsoft.com/fr-fr/library/ms188929.aspx](http://msdn.microsoft.com/fr-fr/library/ms188929.aspx)

# batch-file - 想要从 txt 文件中读取行并删除包含相同子字符串的其他行

> ID：16124115
> 
> 赞同：2
> 
> 时间：2013-04-20T19:09:10.293
> 
> 标签：batch-file

我有一个巨大的文本文件，它的每一行都包含一个带有模式 FEATURE_ 的字符串*。我想从这个 txt 文件中读取每一行，并从文件中删除包含相同 FEATURE_*字符串的所有其他行。

请建议 DOS 和 perl cmd 执行此操作

例如

输入：

```
#ifdef FEATURE_ABCD
#ifdef FEATURE_GHDI
#ifdef FEATURE_ABCD
#ifdef FEATURE_WXYZ
#ifdef FEATURE_ABCD
#ifdef FEATURE_WXYZ
#ifdef FEATURE_GHDI
#ifdef FEATUREGHDI
#define FEATURE_ABCD
#define FEATUREGHDI
/* FEATURE_GHDI */ 
```

输出：

```
#ifdef FEATURE_ABCD
#ifdef FEATURE_GHDI
#ifdef FEATURE_WXYZ
#ifdef FEATUREGHDI 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T19:56:45.637

假设您的文本文件是`FEATURE.TXT`，试试这个：

```
@ECHO OFF & setlocal enabledelayedexpansion
for /f "delims=" %%i in (FEATURE.TXT) do (
    set "line0=%%i"
    set "line=!line0:*FEATURE=!"
    if not "!line0!"=="!line!" (
        for /f %%j in ("!line!") do set "line=%%j"
        if not defined $a!line! (
            set "$a!line!=!line!"
            (echo(!line0!)
        )
    )
) 
```

如果`>>OUTPUT.TXT`在`(echo(!line0!)`命令之后放置，则可以将输出重定向到文件。

输出是：

```
#ifdef FEATURE_ABCD
#ifdef FEATURE_GHDI
#ifdef FEATURE_WXYZ
#ifdef FEATUREGHDI 
```

编辑：加快代码速度的一些改进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T06:16:39.853

```
@ECHO OFF
SETLOCAL ENABLEDELAYEDEXPANSION
FOR /f "delims==" %%i IN ('set found 2^>nul') DO SET "%%i="
SET found=FEATURE_
SET /a count=0
(
FOR /f "delims=" %%i IN ('findstr /n "$" ^<feature.txt') DO (
 SET feature=%%i
 SET line=!feature:*:=!
 IF DEFINED line (
  SET feature=!line:*FEATURE_=!
  IF "!line!"=="!feature!" (ECHO(!line!) ELSE (
   FOR /f %%f IN ("!feature!") DO SET feature=%%f&SET found|FINDSTR /e "=%%f" >NUL
   IF ERRORLEVEL 1 (
    ECHO(!line!
    SET found!count!=!feature!
    SET /a count+=1
   ) 
  )
 ) ELSE (ECHO()
)
) >newfile.txt 
```

对于每一行，包括空行，

*   给行编号，然后去掉数字 如果原始为空，则生成一个空行
*   否则，查看该行是否包含目标文本，如果没有则回显
*   否则，查看target后面的字符串是否已经找到。
*   如果没有，则生成该行并将新的目标后缀记录在`foundcounter`

但

除了 Aacin 的评论，也许你应该坐下来喝杯热茶，想想你在这里真正想要什么。

如果你按照你说的做，那么序列

```
#ifdef FEATURE_ABCD
something
endif 
```

或者

```
#ifdef FEATURE_ABCD something 
```

可能会产生你并不真正想要的东西——以及怎么样

```
#ifdef FEATURE_ABCD
...
#define FEATURE_ABCD
...
#ifdef FEATURE_ABCD 
```

??

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T08:36:30.137

最小的代码和功能：

```
@echo OFF

Set "File=Input.txt"
Set "OutputFile=Output.txt"

For /F "Usebackq Tokens=2,* delims= " %%# in ("%File%") Do (
    Echo "%%#" | Find /I "Feature_" 1>NUL && (
        (Type "Features.txt" | FIND /I "%%#" 1>NUL) || (Echo %%#>>"%OutputFile%"))) 
```

代码省略没有“Feature_”字符串的行**，**如果找到有效字符串，则在输出文件中查找该字符串是否已存在以添加或省略该字符串。

用您的输入文本进行测试，收到正确的输出：

```
#ifdef FEATURE_ABCD
#ifdef FEATURE_GHDI
#ifdef FEATURE_WXYZ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T17:07:45.573

有几种不同的方法可以解决这个问题，每种方法都有自己的特点。最快的解决方案在输入文件的每一行中执行最少数量的命令，特别是避免使用外部命令。下面的批处理文件旨在快速处理具有许多匹配行的巨大文本文件。该方法首先创建一个带有要删除的行数的辅助文件（使用 FINDSTR 命令），然后将此文件与原始文件进行*文件合并处理。*

```
@echo off
setlocal EnableDelayedExpansion

set string=FEATURE_

rem Run FINDSTR to find the lines with the target string and store the numbers of the lines that will be deleted
(for /F "tokens=1* delims=:" %%a in ('findstr /N "%string%" inputFile.txt') do (
   set "line=%%b"
   for /F %%c in ("!line:*%string%=!") do (
      rem If this is the first line with the target string
      if not defined string[%%c] (
         rem Define the target string (and preserve this line)
         set string[%%c]=0
      ) else (
         rem Mark this line for deletion
         echo %%a
      )
   )
)) > linesToDelete.txt
rem Insert the EndOfFile mark
echo 0 >> linesToDelete.txt

rem Merge numbers of lines to delete (from STDIN) and input file (from FOR command)
< linesToDelete.txt (
   set /P lineToDelete=
   for /F "tokens=1* delims=:" %%a in ('findstr /N "^" inputFile.txt') do (
      if %%a neq !lineToDelete! (
         rem Preserve this line
         echo(%%b
      ) else (
         rem Ignore this line and pass to next one to delete
         set /P lineToDelete=
      )
   )
) > outputFile.txt

del linesToDelete.txt 
```

如果输入文件包含特殊的 Batch 字符，例如`! < | > &`. 如果需要，此限制可能是固定的。

# java - 之后如何在Android中停止声音

> ID：16124118
> 
> 赞同：0
> 
> 时间：2013-04-20T19:09:33.833
> 
> 标签：java, android, audio, ringtone

我正在尝试构建一个警报应用程序。当闹钟打开时，用户必须在关闭之前扫描匹配的二维码。我查看了此链接以播放声音：[如何在 Android 中播放铃声/闹钟声音](https://stackoverflow.com/questions/2618182/how-to-play-ringtone-alarm-sound-in-android)，我正在使用 zxing 库中的 ScanningViaIntent 进行 QR 码扫描仪：[https ://code.google.com/ p/zxing/](https://code.google.com/p/zxing/)。

所以我在 onStart() 活动中启动声音：

```
@Override
public void onStart(){
    super.onStart();
    Uri notification = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM);
    r = RingtoneManager.getRingtone(getApplicationContext(), notification);
    r.play();
} 
```

然后用户通过按下按钮启动扫描仪：

```
private class HandleClick implements OnClickListener{
    public void onClick(View arg0) {
        IntentIntegrator integrator = new IntentIntegrator(AlarmRequirementsActivity.this);
        integrator.initiateScan();

    }
} 
```

扫描仪的结果在这里返回：

```
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
    IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);
    if (scanResult != null) {
        System.out.println("scanREsult" + scanResult);
        System.out.println("requestCode:  " + requestCode);
        TextView result =(TextView)findViewById(R.id.scanResult);       
        if (resultCode == RESULT_OK) {
            String scanResultString = intent.getStringExtra("SCAN_RESULT");

            if(scanResultString .equals(matchString))
            {
                result.setText("You found it!");        
                r.stop();
            }
            else
            {
                result.setText("\"" + scanResultString  + "\""+ " did not match");                  
            }

            System.out.println(intent.getStringExtra("SCAN_RESULT"));

        } else if (resultCode == RESULT_CANCELED) {
        }

    }
    // else continue with any other code you need in the method

} 
```

如您所见，我在成功匹配后调用 r.stop() 。然而，这些是我的问题：

*   从扫描仪返回后，活动将重新启动。比赛是否成功并不重要。
*   这导致现在播放两个警报音

我试过把它放在 onCreate() 方法中，但也无济于事。

更新：

我试过了：

```
@Override
public void onStart(){
    super.onStart();
    Uri notification = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM);
    r = RingtoneManager.getRingtone(getApplicationContext(), notification);
    if(!r.isPlaying())
    {
        r.play();           
    }
} 
```

这在下面。两者都有相同的问题

```
if(scanResultString .equals(matchString))
{
    result.setText("You found it!");
    if(r.isPlaying())
    {
        r.stop();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:44:35.973

> 从扫描仪返回后，活动将重新启动。比赛是否成功并不重要。

我假设您需要启动另一个活动来进行扫描，这意味着您的活动将（至少）需要暂停并且更有可能停止以允许其他活动运行（根据 Android 活动生命周期）。

因此，您必须期望`onStart()`在从扫描仪返回时被调用。

> 这导致现在播放两个警报音

您应该能够避免这种情况，并且您的代码检查铃声是否已经在播放似乎是一个好的开始。但是，我怀疑您每次`onStart()`执行时都会创建一个新的铃声对象。

我很难猜出您需要做的所有事情才能完全解决您的问题（更不用说只有在 Android 完全重新创建您的活动时才会看到的问题 - 例如，当屏幕方向改变时 - 因为这个需要在您的代码中进一步处理；请参阅[Android 文档以了解活动生命周期](http://developer.android.com/guide/components/activities.html)，尤其是`onSaveInstanceState()`)。

我对下一步的猜测是移动这条线：

```
r = RingtoneManager.getRingtone(getApplicationContext(), notification); 
```

进入你的`onCreate()`方法。我希望在大多数情况下，结合`if (!r.isPlaying())`代码应该可以防止双重警报问题。

# php - 如何优化和/或简化 jQuery 和 PHP 的交互？

> ID：16124120
> 
> 赞同：0
> 
> 时间：2013-04-20T19:09:43.483
> 
> 标签：php, javascript, jquery, html, ajax

我有一个使用 jQuery 和 AJAX 与 PHP 文件交互的 HTML 页面，我想改进和实现一些东西。

我`<select>`使用 previus -box 返回的响应加载 -boxes `<select>`。所以我做了一个简单的函数来保存一些代码。这里是：

```
$(document).ready(function(){ 

    $("#sex").click(function(){ 
        getPHPdata("sex", "age");
    }); 

    $("#age").click(function(){ 
        getPHPdata("age", "work");
    }); 

    $("#work").click(function(){ 
        getPHPdata("work", "country");
    }); 

    $("#country").click(function(){ 
        getPHPdata("country", "city");
    }); 

    function getPHPdata(oASelect, oFSelect) {
        $("#" + oFSelect).empty();

        $.ajax({
            type: 'POST',
            url: 'loadselect.php',
            data: 'id=' + encodeURIComponent(oASelect) + "&p=" + encodeURIComponent($("#" + oASelect).val()),
            dataType: 'json',
            success: function(data){
                for (var i = 0; i < data.length; i++) {
                    $("#" + oFSelect).append("<option>" + data[i] + "</option>");
                }
            }
        });
    };

}); 
```

好吧，在这段代码中，我只有四个`<select>`-box，但我至少需要使用八个（都使用与上面代码相​​同的父级）。有什么办法可以优化或节省更多代码？

我的第二个问题是：

当 PHP 文件返回的数组长度只有一个元素时，它会调用其 click 事件的函数并加载下一个`<select>`-box，因为用户只能选择该选项。

我不知道什么是更好的方法，因为如果我在*php*文件中控制它，那么我不知道如何发送响应并在*html*文件中处理它。

我希望我的解释很清楚。任何帮助、建议或示例将不胜感激。如果您需要更多详细信息，请告诉我，我将编辑帖子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T19:17:50.820

第一个问题：使用HTML5数据属性，只要你使用HTML5...

```
<select data-name='work' data-target='country' ...>
   <option...></option>
</select> 
```

然后在 JS

```
$('select').on('click', function () {
    getPHPData($(this).data('name'), $(this).data('target'));
}); 
```

第二个问题：

我不确定触发“更改”事件的方式，特别是因为我不确定您绑定它而不是“单击”，但我查看了这个线程： [设置 <select 时触发 change() 事件> 带有 val() 函数的值](https://stackoverflow.com/questions/5760873/trigger-change-event-when-setting-selects-value-with-val-function)

我认为这段代码应该可以工作，如果没有，请告诉我，我会尝试 JSFiddle。

```
function getPHPdata(oASelect, oFSelect) {
    $("#" + oFSelect).empty();

    $.ajax({
        type: 'POST',
        url: 'loadselect.php',
        data: 'id=' + encodeURIComponent(oASelect) + "&p=" + encodeURIComponent($("#" + oASelect).val()),
        dataType: 'json',
        success: function(data) {
            if (data.length == 1) {
                // It is a bit difficult to choose the right way for changing a select automatically,
                // I would suggest you to take a look at this:
                // https://stackoverflow.com/questions/5760873/trigger-change-event-when-setting-selects-value-with-val-function
                $("#" + oFSelect).append("<option>" + data[0] + "</option>").val(data[0]).trigger('click');
            } else {
                for (var i = 0; i < data.length; i++) {
                    $("#" + oFSelect).append("<option>" + data[i] + "</option>");
                }
            }
        },
        error: function (response) {
            // Manage any error here
        }
    });
}; 
```

# database - 使用 TIBConnectionBroker 组件设置 Firebird 数据库连接

> ID：16124125
> 
> 赞同：1
> 
> 时间：2013-04-20T19:10:20.510
> 
> 标签：database, delphi, firebird

有谁知道任何用于连接到[Firebird](http://www.firebirdsql.org)数据库的数据库组件集，其组件类似于`TIBXConnectionBroker`IBX 连接集中的组件？

我知道 IBX 也可以连接到 Firebird，但它们之间的距离越来越远，所以我需要进行切换。

我正在使用德尔福 XE2

# magento - 结帐页面上未显示重复的 Magento 统一费率模块

> ID：16124126
> 
> 赞同：0
> 
> 时间：2013-04-20T19:10:23.313
> 
> 标签：magento, magento-1.7

我是 magento 的新手，我正在尝试创建 5 个统一费率。我按照[http://www.magentocommerce.com/wiki/5__-_modules_and_development/shipping/duplicating_flat_rate_shipping_module上的说明进行操作](http://www.magentocommerce.com/wiki/5_-_modules_and_development/shipping/duplicating_flat_rate_shipping_module)

统一费率模块按预期显示在管理页面上，并且值已在运输方式配置屏幕上设置。“启用”设置为是。价格已定。

统一费率模块显示在管理员上，但未显示在结帐页面上。请注意，错误日志中没有错误。

我正在使用 Magento 1.7.0.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:34:23.430

也许您的运费表不正确。（没有条件展示这个方法）。查看数据库上的“shipping_tablerate”表。

此外，如果您想要两个或多个 flatrate 方法，请创建一个扩展来简化您的工作。使用本指南创建扩展：

[http://www.magentocommerce.com/wiki/5__-_modules_and_development/shipping/create-shipping-method-module](http://www.magentocommerce.com/wiki/5_-_modules_and_development/shipping/create-shipping-method-module)

使用 1 表费率的多种固定费率运输方式太难了...

# c - 改进我的 Mandelbrot 集代码

> ID：16124127
> 
> 赞同：7
> 
> 时间：2013-04-20T19:10:25.360
> 
> 标签：c, colors, set, fractals, mandelbrot

我在 C 中有以下 Mandelbrot 集代码。我正在计算并为最终的分形图像创建一个 .ppm 文件。关键是我的分形图像是颠倒的，这意味着它旋转了 90 度。您可以通过执行我的代码来检查它：./mandel > test.ppm

另一方面，我也想改变颜色。我想实现这个分形图像：

![在此处输入图像描述](https://i.stack.imgur.com/WOP1q.jpg)

我的最后一个问题是我的代码没有检查我的代码的运行时间。我也有这部分的代码，但是当代码执行完成时，它不会打印运行时间。如果有人可以对我的代码进行适当的更改并帮助我实现这个分形图像，并显示经过的时间，我会很高兴。

```
#include <math.h>
#include <stdlib.h>
#include <time.h>
#include <stdio.h>

void color(int red, int green, int blue)
{
    fputc((char)red, stdout);
    fputc((char)green, stdout);
    fputc((char)blue, stdout);
}

int main(int argc, char *argv[])
{
    int w = 600, h = 400, x, y; 
    //each iteration, it calculates: newz = oldz*oldz + p, where p is the current pixel, and oldz stars at the origin
    double pr, pi;                   //real and imaginary part of the pixel p
    double newRe, newIm, oldRe, oldIm;   //real and imaginary parts of new and old z
    double zoom = 1, moveX = -0.5, moveY = 0; //you can change these to zoom and change position
    int maxIterations = 1000;//after how much iterations the function should stop

    clock_t begin, end;
    double time_spent;

    printf("P6\n# CREATOR: E.T / mandel program\n");
    printf("%d %d\n255\n",w,h);

    begin = clock();

    //loop through every pixel
    for(x = 0; x < w; x++) 
    for(y = 0; y < h; y++)
    {
        //calculate the initial real and imaginary part of z, based on the pixel location and zoom and position values
    pr = 1.5 * (x - w / 2) / (0.5 * zoom * w) + moveX;
        pi = (y - h / 2) / (0.5 * zoom * h) + moveY;
        newRe = newIm = oldRe = oldIm = 0; //these should start at 0,0
        //"i" will represent the number of iterations
        int i;
        //start the iteration process
        for(i = 0; i < maxIterations; i++)
        {
            //remember value of previous iteration
            oldRe = newRe;
            oldIm = newIm;
            //the actual iteration, the real and imaginary part are calculated
            newRe = oldRe * oldRe - oldIm * oldIm + pr;
            newIm = 2 * oldRe * oldIm + pi;
            //if the point is outside the circle with radius 2: stop
            if((newRe * newRe + newIm * newIm) > 4) break;
        }

        color(i % 256, 255, 255 * (i < maxIterations));

    }

    end = clock();

    time_spent = (double)(end - begin) / CLOCKS_PER_SEC;
    printf("Elapsed time: %.2lf seconds.\n", time_spent);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-20T21:13:40.867

第 1 部分：您需要将循环的顺序交换为：

```
for(y = 0; y < h; y++)
for(x = 0; x < w; x++) 
```

这将为您提供正确定向的分形。

第 2 部分：为了有时间打印出来，您应该将其打印到 stderr，因为您要将 ppm 输出打印到 stdout：

```
fprintf(stderr, "Elapsed time: %.2lf seconds.\n", time_spent); 
```

第 3 部分：要获得连续平滑的着色，您需要使用 Normalized Iteration Count 方法或类似的方法。这是您的着色部分的替代品，可为您提供与您想要的类似的东西：

```
 if(i == maxIterations)
        color(0, 0, 0); // black
    else
    {
        double z = sqrt(newRe * newRe + newIm * newIm);
        int brightness = 256\. * log2(1.75 + i - log2(log2(z))) / log2(double(maxIterations));
        color(brightness, brightness, 255);
    } 
```

它并不完全存在，因为我对标准化迭代计数方法做了一个简单的近似实现。

![Mandelbrot 使用一些半连续着色](https://i.stack.imgur.com/GjmNZ.jpg)

它不是完全连续的着色，但它有点接近。

# php - 如何在同一个查询中两次列出数据库行？

> ID：16124135
> 
> 赞同：0
> 
> 时间：2013-04-20T19:11:54.843
> 
> 标签：php, mysql, database

您基本上有两个选项可以使用 PHP 回显 HTML 页面中的行：

使用 PDO：

```
$stmt = $pdo->prepare('SELECT * FROM employees WHERE name = :name');

$stmt->execute(array(':name' => $name));

foreach ($stmt as $row) {
    // do something with $row
} 
```

使用 mysqli：

```
$stmt = $dbConnection->prepare('SELECT * FROM employees WHERE name = ?');
$stmt->bind_param('s', $name);

$stmt->execute();

$result = $stmt->get_result();
while ($row = $result->fetch_assoc()) {
    // do something with $row
} 
```

所以当你给 $row 第一行的数据时，指针会移动到查询的下一行。如果您要在页面的其他部分需要相同的数据列表，那么正确的做法是什么？

1.  返回指向第一行的指针（**怎么做？**）；
2.  召回查询（并花费更多时间和资源）；
3.  用数据创建一个数组（**怎么做？**）；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:36:09.147

我总是为此使用数组。如果不出意外，您至少会保持代码的高可读性。

# asp.net - 如何在 GridView Image 按钮上显示确认消息

> ID：16124136
> 
> 赞同：0
> 
> 时间：2013-04-20T19:11:59.270
> 
> 标签：asp.net

我在 GridView 上有以下按钮，我想向用户显示一个消息框，以确认他是否确定购买该商品。（我熟悉 OnClientClick= return confirm('xxxxx'); ）但是在网格视图是不同的，但我不能使用这种方法。

```
<asp:ButtonField CommandName="buynow" ImageUrl="~/images/buy.png" HeaderText="BUY" ButtonType="Image"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:58:50.047

Use itemtemplate field in column node in gridview markup

eg.

```
<asp:TemplateField HeaderText="Save">
      <ItemTemplate>
      <asp:Button ID="btnSave" runat="server" Text="Save" OnClientClick="return confirm('Do you want to save?')" />
        </ItemTemplate>
</asp:TemplateField> 
```

# java - 在一天内保存用户数据（同一天 -> 许多用户数据）

> ID：16124137
> 
> 赞同：6
> 
> 时间：2013-04-20T19:12:00.807
> 
> 标签：java, android, achartengine

我有一个应用程序，用户在 edittext 中输入数据并按下保存按钮。

通过按“保存”，我将用户数据（在一列中）和当前日期（在另一列中）保存在一个文件中。

然后，我按下另一个按钮并绘制（使用 achartengine）日期（x 轴）数据（y 轴）。

因此，在一天中输入数据会导致保存例如：“1”（用户数据）-> 20/4/2013，“2”-> 20/4/2013，“3”-> 20/4/2013 .

在情节中，我在 y 轴上有 3 个点（好的），在 x 轴上有 3 个点（不好）。

我想在 x 轴上有一个点，因为数据是在同一天输入的。

我保存数据：

```
public void savefunc(){

        SimpleDateFormat thedate = new SimpleDateFormat("dd/MM/yyyy"); 
        Date d=new Date();

        String formattedDate=thedate.format(d);
        Log.d("tag","format"+formattedDate);
        dates_Strings.add(formattedDate);

        double thedata=Double.parseDouble(value.getText().toString().trim());
            mydata.add(thedata);

        File sdCard = Environment.getExternalStorageDirectory();
        File directory = new File (sdCard, "MyFiles");
        directory.mkdirs();            
        File file = new File(directory, filename);

        FileOutputStream fos;

        //saving them
        try {
           fos = new FileOutputStream(file);

              BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(fos));
              for (int i=0;i<mydata.size();i++){
                 bw.write(mydata.get(i)+","+dates_Strings.get(i)+"\n");
              }
              ... 
```

如何在一天中保存用户数据？

也许在这里检查一下： `Date d=new Date();` ？检查是否是同一天。

或在这里：`bw.write(mydata.get(i)+","+dates_Strings.get(i)+"\n");`

但我想不通。

例如，我在日期“20/4/2013”​​中输入数据“1”、“2”、“3”。

这是我现在使用我的代码得到的： [![这就是我现在得到的](https://i.stack.imgur.com/4m2Aa.png)](https://i.stack.imgur.com/4m2Aa.png)

但我需要如下图：应将同一天输入的数据放在一起:: [![这就是我要的](https://i.stack.imgur.com/fyxM2.png)](https://i.stack.imgur.com/fyxM2.png)

- - - - - - - -更新 - - - - - - - - - - - - - - - - - ----------------

```
 mRenderer.setXLabels(0);
    for (int i=0;i<mydata.size();i++){

        mRenderer.addXTextLabel(i,dates_Strings.get(i));

        Date lastDate=null;
        String lastdate="";

        try{

    // the initial date
Date initialDate=formatter.parse(dates_Strings.get(mydata.size()-1));

Calendar c = Calendar.getInstance();
c.setTime(initialDate);
c.add(Calendar.DATE, 1);  // increase date by one 
lastDate =c.getTime();                  

}catch ...
      }
    mRenderer.setXAxisMax(lastDate.getTime());
    mRenderer.addXTextLabel(i,dates_Strings.get(i));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:51:25.917

好的。

当您调用 new Date() 时，您还可以确定创建时间（默认格式为：1970 年 1 月 1 日，格林威治标准时间 00:00:00）。因为您的积分是在不同的时间但相同的日期创建的，所以您的积分没有对齐。

所以你应该这样做：

```
Calendar thisDay = Calendar.getInstance();
thisDay.set(Calendar.HOUR, 0);
thisDay.set(Calendar.MINUTE, 0);
thisDay.set(Calendar.SECOND, 0);
Date d=thisDay.getTime();//this returns Date :) - it is funny but true 
```

那么您可以使用 d 作为当前日期:)。

希望这是真的，它有帮助，托尼

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T19:48:44.907

这个问题有几个可能的解决方案：

1.  代替日期，输入日期的 unix 时间（长值）。为了显示它，您可以将 unix time 转换为 formatted date 。

2.  由于 excel 可以处理日期，编辑输出文件并使用 "=Date(year,month,day)" 或 "=DATEVALUE("2013/4/20")"

这都是因为问题甚至与android无关。这是关于显示数据。数据没问题。这就是你展示它的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-04T19:02:54.377

这确实是一个 AChartEngine 问题。内部模型以前保存在`ArrayList`s中，这些问题不存在。在某个时候，社区努力通过大量数据点使 AChartEngine 更快。那时，模型开始使用 a`Map`而不是`ArrayList`. 此实现防止了多次添加相同的 X 值。但是，为了解决这个问题，我向 X 添加了一个非常小的值，如果它已经存在的话。在您的示例中，第一个值为`20/04/2013 00:00:00.0`，第二个值为 at `20/04/2013 00:00:00.001`，第三个值为`20/04/2013 00:00:00.002`。

现在，您的问题的解决方案是在 X 轴上有更宽的范围。

```
renderer.setXAxisMax(someDate.getTime()); 
```

哪里`someDate`可以像`21/04/2013`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-03T13:50:38.250

如果我没记错的话，这不是保存或加载数据的问题，而只是显示数据的问题。您的图形算法应该识别相等的日期并且不要为其创建新条目。

实际上，日期似乎被视为标签，而不是 x 轴值，这是合理的，因为日期字符串不是数字。

我建议检查 achartengine 是否有额外提供 x 值的方法，然后仅在下一个条目的日期字符串与上一个条目不同时才让它们增加。

您可能必须为 achartengine 提供不同的模型。

我不认为这是一个保存问题，因为存储的日期是正确的，所以那里的任何行为大部分都符合预期。

# wpf - WPF 路径形状标题

> ID：16124139
> 
> 赞同：0
> 
> 时间：2013-04-20T19:12:04.327
> 
> 标签：wpf, path

我有一个路径形状，我想在路径上方设置一个标签，我在路径上方放置一个文本块然后我处理 Path_MouseEnter ， Path_MouseLeave 并更改路径背景问题是当鼠标离开路径形状到文本块时背景改变了当我处理 Path_MouseDown 时的另一个问题，文本块也有问题是否有更好的方法在路径形状上方设置标签？

```
 private void Path_MouseEnter(object sender, MouseEventArgs e)
    {
        (sender as Path).Fill = System.Windows.Media.Brushes.Yellow;
    }

    private void Path_MouseLeave(object sender, MouseEventArgs e)
    {
        (sender as Path).Fill = System.Windows.Media.Brushes.LightGray;
    }

    private void Path_MouseDown(object sender, MouseButtonEventArgs e)
    {

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:57:04.863

你的问题很难理解，但我认为你的意思是你在 a`TextBlock`上覆盖了一个`Path`，当鼠标点击文本块时，你的`Path_MouseLeave()`被触发但你不希望它被触发？

如果是这种情况，只需设置`IsHitTestVisible="False"`以`TextBlock`使其对鼠标事件透明。

# android - Android 基于组件的设计和活动线程通信

> ID：16124140
> 
> 赞同：1
> 
> 时间：2013-04-20T19:12:06.693
> 
> 标签：android, software-design

我正在尝试创建一个 android 应用程序，它本质上是一个供其他开发人员使用的平台（比如说一个移动健康平台）。在这个平台上，我正在尝试实现基于组件的方法。我有几个活动，一个主逻辑线程（或服务），以及几个提供数据的其他线程和服务。主逻辑是开发人员工作的地方。

问题是，考虑到 android 环境，这是一个好的架构吗？如果是这样，我正在考虑使用**Messenger**类来提供这些组件之间的通信，这是性能的理想解决方案吗？

而且我还应该控制主逻辑中的活动之间的通道，例如，如果用户按下启动另一个活动的按钮，我应该向主逻辑发送消息并从那里开始下一个活动或从 UI 线程更改活动并让主要逻辑知道活动变化吗？这引出了我的下一个问题，如何将活动连接到现有线程（可能正在传递线程处理程序？）？

我是初学者，所以我看不清楚可能会出现什么问题，所以我想问一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T08:42:51.680

对于那些可能正在寻找相同答案的人：

结果证明 using`Messenger`是一个完美的解决方案，因为它可以用于线程间、进程间和线程-进程通信，并具有足够的性能。

但是让 ui 处理它自己的管理是更好的解决方案，我只需要将 ui 的状态报告给我的主线程，它可以控制所有其他组件。

# mysql - 从表中选择行，如果存在，则从其他表中选择其他数据

> ID：16124141
> 
> 赞同：1
> 
> 时间：2013-04-20T19:12:26.540
> 
> 标签：mysql, sql

我很难弄清楚如何编写一个查询，该查询从一个表中选择与某些条件匹配的所有行，并在存在与另一组条件匹配的数据时使用另一个表中的数据扩展这些行。

表：书籍

```
id
school
isbn
name 
```

表：订单

```
id
school
department
isbn
quantity 
```

我的查询是：

```
SELECT orders.*, books.name FROM orders
LEFT JOIN books ON orders.isbn = books.isbn
WHERE orders.school = 1 AND orders.department = 2
      AND books.school = 1 
```

现在，问题是，如果学校没有将他们的书籍、isbn 和名称添加到 books 表中，我仍然希望返回 orders.* 数据，并将 books.name 设置为 null 或类似的东西。现在我得到零行。有没有办法用一个查询来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T19:16:37.527

移动

```
and books.school = 1 
```

从 where 子句到 from 子句。

```
left join books on orders.isbn = books.isbn 
and books.school = 1 
```

**编辑从这里开始**

对于说没关系的raheel。使用我下载的 MySQL 附带的世界数据库，这个查询

```
select c.name, city.name cityname
from country c left join city on c.code = city.countrycode
AND city.name = 'toronto'
order by cityname; 
```

返回 239 行。这个查询：

```
select c.name, city.name cityname
from country c left join city on c.code = city.countrycode
WHERE city.name = 'toronto'
order by cityname; 
```

返回 1 行。我认为这很重要

# c# - 如何从网络应用程序广播消息或触发任何事件以赢得应用程序

> ID：16124144
> 
> 赞同：0
> 
> 时间：2013-04-20T19:13:30.073
> 
> 标签：c#, winforms, wcf, notifications, signalr

假设我有一个网站，求职者在该网站上发布他们的简历以及其他数据。我有另一个 win 表单应用程序，由 win 调度程序定期调用。当 win form 应用程序运行时，将求职者数据及其简历下载到本地文件和数据库系统。我们的赢表应用程序完美运行。我们公司希望我以这样的方式开发 win 应用程序，当任何人上传他们的 CV 和其他数据时，然后从我们的网站向我们的 win 应用程序发出通知，然后我们的 win 应用程序在本地下载新的 CV 和其他数据。

这项工作可以通过几种方式进行开发。1) 我可以使用 .Net sql server 依赖相关类在插入或修改任何新数据时通知我们的 win 应用程序。

2）我不熟悉信号器，但听说信号器可以从网络应用程序发送通知以赢得表单客户端。我只是想知道这是真的吗？？如果是，那么任何人都可以指导我 singalr 如何向我的 win 应用程序发送通知。还告诉我在获胜表格结束时我需要做什么。需要熟悉信号器的指导。

3) 还指导我如何在此处使用 WCF 从我们的网站发送通知以赢得表单应用程序。

所以请指导我处理这种情况的最佳方法，并讨论我的所有三点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:52:42.517

这是 signalR 的快速指南：[https ://github.com/SignalR/SignalR/wiki/QuickStart-Hubs](https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T02:15:32.047

是的，在这一刻，我建议使用 signalR 查看pluralsight.com 网站，他们有关于signalR 的课程[http://www.pluralsight.com](http://www.pluralsight.com)

# android - Android Listview：在ItemClic上显示项目详细信息

> ID：16124145
> 
> 赞同：1
> 
> 时间：2013-04-20T19:13:32.980
> 
> 标签：android, android-intent, listviewitem, onitemclicklistener

我一直在研究电子商务应用程序，现在我有一个显示产品列表的 ListView - 每个产品 = 1 个 ImageView 和一些 TextViews-。

我在该 ListView 上设置了一个 onItemClick 侦听器，当我单击该 listView 产品之一时，我希望发生的事件是，启动 i 新 Activity，“ProductDetails”，它显示有关我单击的产品的更多信息。

我已经在其他地方问过这个问题，但我没有得到明确的答案，他们说我必须创建一个新的 'list\details' 项目，但现在不能这样做，因为我正在努力项目大概20天，不能重新开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:58:34.620

抱歉，我已经发布了一个答案，但只是指向另一个网站的链接，所以它被删除了:-(

在这里，我再次提出可能的解决方案：

在您的第一个活动中，您需要使用`intent.putExtra(...)`和检索第二个活动中的数据`intent.getExtra(...)`。

### 示例活动 1：

```
i.putExtra("title01", yourDataCollection.get(position).get(KEY_TITLE01)); 
```

### 活动二：

```
this.title01 = i.getStringExtra("title01"); 
```

这里有一个完整的项目：http: [//www.codeproject.com/Articles/507651/Customized-Android-ListView-with-Image-and-Text](http://www.codeproject.com/Articles/507651/Customized-Android-ListView-with-Image-and-Text)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-31T11:30:49.840

如果您多次使用 传递您的模型类`Intent`，也许它可以实现`Parcelable`接口以方便。例如：

```
 class ProductData implements Parcelable {
        protected String name;
        protected String someOtherData;

        public static final Parcelable.Creator<ProductData> CREATOR = new Parcelable.Creator<ProductData>() {

            @Override
            public ProductData createFromParcel(Parcel source) {
                return new ProductData(source);
            }

            @Override
            public ProductData[] newArray(int size) {
                return new ProductData[size];
            }
         };

        public ProductData(){
        }

        public ProductData(Parcel source){
            readFromParcel(source);
        }

        @Override
        public int describeContents() {
            return 0;
        }

        @Override
        public void writeToParcel(Parcel dest, int flags) {
            dest.writeString(name);
            dest.writeString(someOtherData);
        }

        public void readFromParcel(Parcel source){
            name = source.readString();
            someOtherData = source.readString();
        }

        // Here goes the rest of your model code
    } 
```

然后，您可以`Activity`使用以下方法轻松地将对象传递给另一个对象`Intent`：

```
intent.putExtra("product", productData); 
```

然后使用

```
ProductData productData = intent.getParcelableExtra("product"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T23:44:46.803

您不能发送 a`TextView`或`ImageView`from `Activity`to `Activity`。你可以发送的是它的内容。因此，例如，如果您想从 传递信息，`TextView`则需要传递`String`显示在那里的源（或`String`从 中提取`TextView`），您可以通过将`Bundle`调用传递给被调用的传递 a`Activity`或简单地将其作为`Extra`：

```
intent.putExtra("string name", value); 
```

在下面`Activity`你会得到这个数据：

```
Intent intent = getIntent();
bundle = intent.getExtras();
bundle.getString("string name"); 
```

然后在下面`Activity`创建一个`TextView`带有传递的`String`. `ImageView`通过传递它的路径来处理相同的方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T07:23:25.110

Android 使用意图来允许`Activity`s 进行交互。如果您想显示产品的详细信息，可能您有一个`Class`描述该产品的信息，并使用它包含的信息填写您的`ListView`. 如果你让`class Product implements Serializable`你可以使用 [Intent.putExtra(String name, Serializable obj)](http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20java.io.Serializable%29)，在 s 之间传递产品描述`Activity`。在`ProductDetailsActivity`您可以使用：

```
getIntent(). getSerializableExtra (String name) 
```

检索您放置在您创建的 Intent 中的可序列化开始`ProductDetailsActivity`

# mysql - 将 MySQL 中的 2 个表与一些重复数据合并

> ID：16124146
> 
> 赞同：0
> 
> 时间：2013-04-20T19:13:46.407
> 
> 标签：mysql

我需要合并 2 个具有相同结构的表，`table1`并且`table2`. 它们大多具有不同的行，但有些行是重复的。

有没有办法合并`table2`但`table1`在 1 条语句中省略重复记录？

我对 MySQL 很陌生，任何帮助将不胜感激。

编辑：我到目前为止的查询就是这样的：

```
INSERT INTO table1
SELECT *
FROM table2 
```

所以我不知道如何选择性地忽略重复项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T19:19:13.673

如果你只想要结果：

```
select * from table1 union select * from table2; 
```

工会将删除重复项。

如果要使用结果创建一个新表：

```
create table merged_table
    select * from a1.t1 
    union 
    select * from a2.t1; 
```

* * *

然后您可以：

```
drop table table1;
rename table merged_table to table1; 
```

（不要在其他查询正在或可能正在访问该表时删除该表。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T19:19:24.847

您可以尝试`INSERT SELECT`，以便将 table2 合并到 table1

```
INSERT [LOW_PRIORITY | HIGH_PRIORITY] [IGNORE]
    [INTO] table2 [(col_name,...)]
    SELECT * FROM table1
    [ ON DUPLICATE KEY UPDATE col_name=expr, ... ] 
```

链接：[http ://dev.mysql.com/doc/refman/5.1/en/insert-select.html](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)

# performance - FlexSlider 在 Safari 中仍然加载缓慢

> ID：16124149
> 
> 赞同：2
> 
> 时间：2013-04-20T19:14:11.693
> 
> 标签：performance, safari, flexslider, preload

我在这里找到了一个很好的缓慢加载 Flexslider 的解决方案：[Flexslider slow image load](https://stackoverflow.com/questions/12717097/flexslider-slow-image-load)。

这解决了除 Safari 之外的所有浏览器中的问题。出于某种原因，Safari 在显示第一张图像之前仍会等待加载所有图像。

有没有人为 FlexSlider/Safari 解决了这个问题？

谢谢！

# java - Android 文本冒险应用程序 - 如何根据整数绘制不同的 XML 布局内容

> ID：16124150
> 
> 赞同：2
> 
> 时间：2013-04-20T19:14:22.047
> 
> 标签：java, android, android-layout, layout, android-activity

如果您不想浏览一些文字墙，请转到 tl;dr。

我想为 Android 创建一个文本冒险应用程序。

这将是巨大的，所以我想不是创建 10,000 个活动，而是只处理一个活动并绘制不同的内容 - 并且 - 根据用户现在所在的“页面”绘制不同的按钮。

IE

我们从第 0 页开始。

它向我们展示了类似的东西：

第 0 页

欢迎冒险家！你是什​​么性别？

[按钮 1 = 字符串“男性”转到第 1 页重绘活动] [按钮 2 = 字符串“女性”转到第 2 页重绘活动]

第 1 页

欢迎我的女士！

[button 1 = string "hello" go to page 3 redraw the Activity] [button 2 = string "bye" go to page 4 redraw the Activity]

欢迎好先生！

第 2 页 [按钮 1 = 字符串“hello”转到第 5 页重绘活动] [按钮 2 = 字符串“再见”转到第 6 页重绘活动]

正如你所看到的，它变得非常复杂。这只是我希望它如何工作的一个例子，游戏中的选择将比“你好”或“再见”更“一点”。

我需要一种方法来重绘 TextView 的内容和显示在下方的按钮，以及屏幕顶部的一些变量，如“健康”或“黄金”。所有在变量'page'被修改之后。

另一种选择是为每个选择创建不同的活动。可能传递变量 'health' 和 'gold' 会很容易，重绘会发生 onCreate 并且字符串已经在新活动的 XML 布局中到位。

但我不确定我是否要完成创建 10,000 个活动并在链接的变量之间传递变量的过程中进行编码。：/

有什么建议么？

**TL;DR** 我可以在始终保持同一个 Activity 的同时根据整数重绘 android 应用程序的内容吗？

**这与我想要实现的目标相似：https: [//play.google.com/store/apps/details? id=wizardsChoiceV1.toucher&hl=en](https://play.google.com/store/apps/details?id=wizardsChoiceV1.toucher&hl=en)**

**编辑** 我现在得到的没有给我任何错误，但它不会切换屏幕。：/

```
 package com.example.textadventure;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;

public class MainActivity extends Activity implements OnClickListener {

    public static int page = 1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main3);
    }

    public void onClick(View view) {
        onClick(view);
        switch (view.getId()) {
        case R.id.button1:
            setContentView(R.layout.activity_main2);
        break;
        case R.id.button2:
            setContentView(R.layout.activity_main);
        break;
        default:
            //code..
        break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T19:26:08.607

你是对的，你不想为每个选择创建一个活动。您可能希望将设计拆分为组件，并为每个显着不同的组件创建布局。

然后，您可以创建一个布局，根据游戏的当前状态将这些组件组合在一起，并定义与布局中各个视图关联的值。

例如，您可能有一个组件来表示您的角色状态（健康、金币、装备等）和几个表示不同类型选择的组件（带有是/否选择的描述、带有描述的房间、一些交互式项目/对象和一些退出）。

您可以将游戏状态存储在 Activity 中的某个位置，并根据该状态决定需要哪些组件，例如，如果您在初始位置有一个新角色，您可能会在顶部显示角色状态布局和一个房间布局在底部。

角色状态布局将包含许多 View 对象，您可以对其进行修改以匹配当前角色状态，同样适用于房间布局。

# c++ - 错误 LNK2019 - 不确定如何修复（1 个未解决的外部问题）

> ID：16124151
> 
> 赞同：0
> 
> 时间：2013-04-20T19:14:24.827
> 
> 标签：c++, lnk2019

我几乎完成了这个程序，但是我收到一个我不确定如何处理的错误。我一直在寻找其他解决方案，但似乎没有任何帮助

我得到的错误是： error LNK2019: unresolved external symbol "void __cdecl deposit(class customer * const,int)" (?deposit@@YAXQAVcustomer@@H@Z) 在函数 _main C:\Users\D\ 中引用Desktop\Programs\Project 3\DProject3\Debug\DProject3.exe : 致命错误 LNK1120: 1 unresolved externals

它似乎与存款功能有关，但是我试图愚弄它无济于事，如果有人可以帮助它，将不胜感激，我有这个项目的 3 个文件

**标题**

```
#ifndef CUSTOMER_H
#define CUSTOMER_H

#include <string>

struct Date
{
int Day;
int Month;
int Year;
};

struct Name
{
std::string first_name;
std::string middle_name;
std::string last_name;
};

class customer
{ 
   private:
Date birth_date;
    Name name;
    float balance_saving, balance_checking, initial_saving, initial_checking, amount, account_type;

   public:
    customer(); //Customer constructor
    customer(Date birth_date, Name  name, float initial_saving, float initial_checking); // Customer constructor with info
    void withdraw(float amount, int account_type);
    void deposit(float amount, int account_type);
    float check_balance_saving();  // Print out the savings balance on screen
    float check_balance_checking();  // Print out the checking balance on screen
    void setDate(int Day, int Month, int Year);
    Date getDate();
    void setName(std::string first_name, std::string middle_name, std::string last_name);
    Name getName();
    void setSaving(float initial_saving);
    void setChecking(float initial_checking);
};

#endif 
```

**实施文件**

```
#include "customer.h"

//Contructor without info / Default info
customer::customer()
{
birth_date.Day = 01;
birth_date.Month = 01;
birth_date.Year = 1901;
name.first_name = "N/A";
name.middle_name = "N/A";
name.last_name = "N/A";
balance_saving = 0;
balance_checking = 0;
}

// Constructor with user input data
customer::customer(Date DMY, Name FML, float initSav, float initCheck)
{
birth_date = DMY;
name = FML;
initial_saving = initSav;
initial_checking = initCheck;
}

void customer::withdraw(float amtW, int accW)
{
amount = amtW;
account_type = accW;
}

void customer::deposit(float amtD, int accD)
{
amount = amtD;
account_type = accD;
}

float customer::check_balance_saving()
{
return initial_checking;
}

float customer::check_balance_checking()
{
return initial_checking;
}

void customer::setDate(int Day, int Month, int Year)
{
birth_date.Day = Day;
birth_date.Month = Month;
birth_date.Year = Year;
}

Date customer::getDate()
{
return birth_date;
}

void customer::setName(std::string First, std::string Middle, std::string Last)
{
name.first_name = First;
name.middle_name = Middle;
name.last_name = Last;
}

Name customer::getName()
{
return name;
}

void customer::setSaving(float setSav)
{
initial_saving = setSav;
}

void customer::setChecking(float setCheck)
{
initial_checking = setCheck;
} 
```

**主要的**

```
#include "customer.h"
#include <fstream>
#include <iostream>
#include <string>
using namespace std;

//Function prototypes
void withdraw (customer[], int);
void deposit (customer[], int);
void checkBal (customer[], int);
void newAccountFile (customer[], int);

int main ()
{
customer custInfo[49]; //Creates the customer array for info to be stored in
int customerAmt = 0; //Keeps track of the amount of customers in the array

ifstream customerfile ("account.dat"); //Open existing customer file
while (customerAmt < 2) //Loop to read the data from the existing file
{
    int D, M, Y; // Birth day, month, year
    string FN, MN, LN; //First name, middle name, last name
    float Save, Check; //Savings & Checking initial amount

    customerfile >> D;
    customerfile >> M;
    customerfile >> Y;
    customerfile >> FN;
    customerfile >> MN;
    customerfile >> LN;
    customerfile >> Save;
    customerfile >> Check;

    custInfo[customerAmt].setDate(D, M, Y);
    custInfo[customerAmt].setName(FN, MN, LN);
    custInfo[customerAmt].setSaving(Save);
    custInfo[customerAmt].setChecking(Check);

    customerAmt++;
}
customerfile.close(); //Close customer file and end file reading

//Variables for the User menu
int accountNumber, option, D1, M1, Y1;
string FN1, MN1, LN1;
float Save1, Check1;

//Loop used for User menu
do
{
    cout << "1\. withdraw" << endl;
    cout << endl;
    cout << "2\. Deposit" << endl;
    cout << endl;
    cout << "3\. Check Balances" << endl;
    cout << endl;
    cout << "4\. Create a New Account" << endl;
    cout << endl;
    cout << "0\. Exit" << endl;
    cin >> option;

    if (option == 1) // Uses withdraw function
    {
        cout << "Enter the account number: ";
        cin >> accountNumber;
        withdraw(custInfo, accountNumber);
    }

    else if (option == 2) // Uses deposit function
    {
        cout << "Enter the account number: " << endl;
        cin >> accountNumber;
        deposit(custInfo, accountNumber);
    }

    else if (option == 3) // Uses check balance function
    {
        cout << "Enter the account number: " << endl;
        cin >> accountNumber;
        checkBal(custInfo, accountNumber);
    }

    else if (option == 4) //Option to handle creating a new account
    {
        cout << "Enter the new account information, starting with birth info: " << endl;
        cin >> D1 >> M1 >> Y1;
        custInfo[customerAmt].setDate(D1, M1, Y1);
        cout << endl;
        cout << "Enter the new customer's full name: " << endl;
        cin >> FN1 >> MN1 >> LN1;
        custInfo[customerAmt].setName(FN1, MN1, LN1);
        cout << endl;
        cout << "Enter the inital savings balance: " << endl;
        cin >> Save1;
        custInfo[customerAmt].setSaving(Save1);
        cout << endl;
        cout << "Enter the initial checking balance: " << endl;
        cin >> Check1;
        custInfo[customerAmt].setChecking(Check1);

        customerAmt++;
    }

}while (option != 0);

newAccountFile(custInfo, customerAmt); // Creates new updated account info file

system ("pause");
return 0;
}

void withdraw(customer custInfo[], int number)
{
float withdrawAmount;
int optionWit;
float tempSave;
float tempCheck;

cout << "1\. Withdraw from savings" << endl;
cout << endl;
cout << "2\. Withdraw from checking" << endl;
cin >> optionWit;
cout << "Enter the amount to be withdrawn: ";
cin >> withdrawAmount;

if (optionWit == 1)
{
    tempSave = custInfo[number].check_balance_saving() - withdrawAmount;
    custInfo[number].setSaving(tempSave);
}

else if (optionWit == 2)
{
    tempCheck = custInfo[number].check_balance_checking() - withdrawAmount;
    custInfo[number].setChecking(tempCheck);
}
}

void desposit(customer custInfo[], int number)
{
float depositAmount;
int optionDep;
float tempSave;
float tempCheck;

cout << "1\. Deposit to savings" << endl;
cout << endl;
cout << "2\. Deposit to checking" << endl;
cin >> optionDep;
cout << "Enter the amount to be deposited: ";
cin >> depositAmount;

if (optionDep == 1)
{
    tempSave = custInfo[number].check_balance_saving() + depositAmount;
    custInfo[number].setSaving(tempSave);
}

else if (optionDep == 2)
{
    tempCheck = custInfo[number].check_balance_checking() + depositAmount;
    custInfo[number].setChecking(tempCheck);
}

}

void checkBal(customer custInfo[], int number)
{
int optionBal;
cout << "1\. Check savings balance" << endl;
cout << endl;
cout << "2\. Check checking balance" << endl;
cin >> optionBal;

if (optionBal == 1)
{
    cout << "Current savings balance is: " << custInfo[number].check_balance_saving() << endl;
}

else if (optionBal == 2)
{
    cout << "Current checking balance is: " << custInfo[number].check_balance_checking() << endl;
}
}

void newAccountFile(customer custInfo[], int size)
{
int i;
Date tempDate;
Name tempName;
ofstream newAccountStorage;
newAccountStorage.open ("updated_account.dat"); //Opens new file for updated account info

for (i = 0; i < size; i++);
{
    tempDate = custInfo[i].getDate();
    tempName = custInfo[i].getName();
    newAccountStorage << tempDate.Day << endl;
    newAccountStorage << tempDate.Month << endl;
    newAccountStorage << tempDate.Year << endl;
    newAccountStorage << tempName.first_name << endl;
    newAccountStorage << tempName.middle_name << endl;
    newAccountStorage << tempName.last_name << endl;
    newAccountStorage << custInfo[i].check_balance_saving() << endl;
    newAccountStorage << custInfo[i].check_balance_checking() << endl;
}

newAccountStorage.close(); //Closes the file after writing new information
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T19:16:59.053

您的函数定义中打印错误

```
void desposit(customer custInfo[], int number)
     ^^^^ 
```

# wix - 使用 DTF 的消息框

> ID：16124164
> 
> 赞同：3
> 
> 时间：2013-04-20T19:15:23.660
> 
> 标签：wix, windows-installer, dtf

MSDN 上的 MsiProcessMessage 函数 doco 显示了这个例子：

```
PMSIHANDLE hInstall;
PMSIHANDLE hRec;
MsiProcessMessage(hInstall, 
                  INSTALLMESSAGE(INSTALLMESSAGE_ERROR|MB_ABORTRETRYIGNORE|MB_ICONWARNING),
                  hRec); 
```

这将如何使用 DTF 中的 Session.Message 来完成？唯一的重载将 Session.InstallMessage 作为参数。我看到了 MessageBoxButtons 枚举，我将这两种类型都转换为 In32 并执行逻辑或，但我不确定如何将它返回到 API 中。

我错过了什么还是 DTF 错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T23:05:30.187

我对 DTF 做的不多，但我的理解是你想要这样的东西：

```
Session.Message(InstallMessage.Error | 
                (InstallMessage)((int)MessageButtons.AbortRetryIgnore |
                                 (int)MessageIcon.Warning), 
                record); 
```

不是很漂亮。我已将`messageType`agument 格式化为更适合此处的文本框。根据您的编码指南格式化您的代码。:)

# python - 给定字符串中精确字符串的计数，更新计数

> ID：16124165
> 
> 赞同：0
> 
> 时间：2013-04-20T19:15:30.720
> 
> 标签：python, loops, csv

我正在尝试获取给定字符串中确切字符串的计数，然后在 csv 文件的行中找到它并更新计数。详细地：

我有一个示例字符串如下：“5 18；4 00；4 00；5 16；5 16；5 16；5 15；3 19；3 16；3 16；3 15；3 15；”。

字符串中的第一个数字是日期（1-7，其中 1 是星期一，5 是星期五，等等）。空格后的第二个数字是小时（24 小时。其中 18 是下午 6 点）。每个条目由分号和空格分隔。

我有一个包含天 (1-7) 和小时 (00-23) 的主文件。我生成我的日期和时间如下：

```
for day in range(1, 8):
    for hour in range(00, 24):
       # Write day + hour, nums.
       writerCommits.writerow([str(day) + " " + str(hour), "0"]); # to write  csv 
```

上面的 for 循环生成 master.csv：

```
date, count
1 0,0
1 1,0
1 2,0
1 3,0
1 4,0
...
7 19,0
7 20,0
7 21,0
7 22,0
7 23,0 
```

总共 169 行 = (7 x 24) + 1，其中 1 是第一行/标题。

到现在为止还挺好。我需要使用我的字符串中的计数更新 master.csv 中的值。因此，每次找到 5 18 时，它都会增加 1。

如果我将此作为示例字符串：“1 00; 1 00; 1 00; 5 16;”。我的预期输出将是：

```
date, count
1 0,3
...
5 16,1
...
7 23, 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T19:23:09.970

使用`collections.Counter`：

```
import csv
from collections import Counter

strs="1 00; 1 00; 1 00; 5 16;"
c=Counter(tuple(map(int,x.split())) for x in strs.split(";") if x.strip())

#c is Counter({(1, 0): 3, (5, 16): 1})
#here I used a tuple (day,hour) as key and item after `,` as value

with open('master.csv', 'rb') as f1,open("newfile.csv","w") as f2:
     spamreader = csv.reader(f1, delimiter=',')
     header=next(spamreader)
     f2.write(",".join(header)+'\n')
     for row in spamreader:
         key,val=tuple(map(int,row[0].split())),int(row[1])
         #fetch tuple (day,hour) from the current line
         #val is the value after `,`

         val+=c[key] #new value is count from c + count from csv file

         f2.write("{0},{1}\n".format(" ".join(map(str,key)),val)) 
```

这将创建一个名为的新文件`newfile.csv`，该文件现在包含：

```
date, count
1 0,3
1 1,0
1 2,0
1 3,0
1 4,0
...
7 19,0
7 20,0
7 21,0
7 22,0
7 23,0 
```

将 master.csv 生成为字符串变量：

```
In [69]: strs="date, count\n"

In [70]: for day in xrange(1,8):
    for hour in xrange(24):
        strs+="{0} {1},{2}\n".format(day,hour,"0")  #use string formatting
   ....:         

In [71]: print strs
date, count
1 0,0
1 1,0
1 2,0
1 3,0
...
7 21,0
7 22,0
7 23,0 
```

# canvas - 如何从 .svg 图像中获取调整大小的 ImageElement？

> ID：16124167
> 
> 赞同：1
> 
> 时间：2013-04-20T19:15:37.037
> 
> 标签：canvas, svg, dart

我需要将图像绘制到从 .svg 获得的画布中。我目前正在使用以下代码：

```
active_toolbutton = query("#${event.target.id}").clone(false);
active_toolbutton.width = 100;
active_toolbutton.height = 100;
context.drawImageScaled(active_toolbutton, placeX, placeY,
  active_toolbutton.width, active_toolbutton.height); 
```

这适用于 Chrome，但不适用于 Firefox，有没有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:58:59.183

经过一番研究，我找到了答案。没有标准行为定义 .svg 图像应使用其标量功能重新缩放。事实上，在某些情况下（例如 CSS 背景），不同的浏览器会以不同的方式处理缩放。

我找到了一个解决方案，即使用 3rd 方 javascript 库将 SVG 渲染到画布中。我使用[了 canvg](http://code.google.com/p/canvg/)和 dart javascript interopt 库。

编码：

```
import 'package:js/js.dart' as js;
...
    active_toolbutton = new CanvasElement();
    active_toolbutton.width = 100;
    active_toolbutton.height = 100;
    var options = js.map({ 'ignoreMouse:': true,
      'ignoreAnimation': true,
      'ignoreDimensions': true,
      'scaleWidth': 100,
      'scaleHeight': 100});
    js.context.canvg(active_toolbutton, event.target.src, options); 
```

# ios - 将十进制纬度/经度坐标转换为 iPad 屏幕坐标

> ID：16124171
> 
> 赞同：3
> 
> 时间：2013-04-20T19:16:11.177
> 
> 标签：ios, objective-c, latitude-longitude, cartesian-coordinates

我有一个纬度/经度十进制坐标，我想将其转换为适合 iPad 坐标系区域的点。

我的代码采用纬度/经度坐标并将它们转换为笛卡尔坐标（基于这个问题：[转换为笛卡尔坐标](https://stackoverflow.com/questions/1185408/converting-from-longitude-latitude-to-cartesian-coordinates)）转换的结果是（2494.269287, 575.376465）。

这是我的代码（没有编译或运行时错误）：

```
#define EARTH_RADIUS 6371

- (void)drawRect:(CGRect)rect
{
    CGPoint latLong = {41.998035, -116.012215};

    CGPoint newCoord = [self convertLatLongCoord:latLong];

    NSLog(@"Cartesian Coordinate: (%f, %f)",newCoord.x, newCoord.y);

    //Draw dot at coordinate
    CGColorRef darkColor = [[UIColor colorWithRed:21.0/255.0
                                            green:92.0/255.0
                                             blue:136.0/255.0
                                            alpha:1.0] CGColor];
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetFillColorWithColor(context, darkColor);
    CGContextFillRect(context, CGRectMake(newCoord.x, newCoord.y, 100, 100));

}

-(CGPoint)convertLatLongCoord:(CGPoint)latLong
{
    CGFloat x = EARTH_RADIUS * cos(latLong.x) * cos(latLong.y);
    CGFloat y = EARTH_RADIUS * cos(latLong.x) * sin(latLong.y);

    return CGPointMake(x, y);
} 
```

如何将十进制坐标转换为将显示在 iPad 屏幕上的坐标？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-20T21:08:36.743

您的`convertLatLongCoord:`方法不会尝试将结果点调整为屏幕坐标。如所写，您可以获得`x`和`y`范围内的`-EARTH_RADIUS`值`+EARTH_RADIUS`。这些需要缩放以适应屏幕。

类似以下的内容应该会有所帮助：

```
- (CGPoint)convertLatLongCoord:(CGPoint)latLong {
    CGFloat x = EARTH_RADIUS * cos(latLong.x) * cos(latLong.y) * SCALE + OFFSET;
    CGFloat y = EARTH_RADIUS * cos(latLong.x) * sin(latLong.y) * SCALE + OFFSET;

    return CGPointMake(x, y);
} 
```

`SCALE`并且`OFFSET`应该是如下确定的值：

```
CGSize screenSize = [UIScreen mainScreen].applicationFrame.size;
CGFloat SCALE = MIN(screenSize.width, screenSize.height) / (2.0 * EARTH_RADIUS);
CGFloat OFFSET = MIN(screenSize.width, screenSize.height) / 2.0; 
```

这假设您希望地图填充最小的屏幕尺寸。

# android - 如何在 ProgressListener 中使用 AWS TransferManager 更新 Android UI？

> ID：16124173
> 
> 赞同：0
> 
> 时间：2013-04-20T19:16:16.510
> 
> 标签：android, multithreading, amazon-web-services

我正在使用 AWS TransferManager 将文件下载到 SD 卡。它允许 ProgressListener，但我无法更新视图，因为它位于不同的线程上。我怎样才能做到这一点？

下面的 btn.setText() 方法会产生此警告并且不会更新 UI：

> android.view.ViewRootImpl$CalledFromWrongThreadException：只有创建视图层次结构的原始线程才能接触其视图。

```
public class Download
{

   ProgressDialog    dialog;
   File              new_video_file;
   Button            btn;              //the progress meter needs to know what button called this. set via setter method below.
   int               position;

   protected void start(int position, Button btn) 
   {
      this.btn            = (Button) btn;
      this.position       = position;
      this.new_video_file = new File(storage_dir, arr_videos.get(position));                   //local file to be writtent to

      AWSCredentials credentials                             = new BasicAWSCredentials("xxx", "xxx" );
      TransferManager tx                                     = new TransferManager(credentials);

      Log.v("s3_bucket", s3_bucket); 
      Log.v("s3_dir", s3_dir); 
      Log.v("name", arr_videos.get(position)); 

      final com.amazonaws.services.s3.transfer.Download download   = tx.download(s3_bucket, s3_dir + arr_videos.get(position), new_video_file);

      download.addProgressListener(new ProgressListener() {

          public void progressChanged(ProgressEvent pe) {
              Double progress = download.getProgress().getPercentTransfered();

              String percent = progress.intValue() + "%";

              Log.v("progress", percent);

              btn.setText(percent);

              if (download.isDone()) {
                  Log.v("dev", "download complete!!!");
              }
          }
      });

   }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T00:01:04.867

有几种方法可以做到这一点。

*   试试 Activity.runOnUiThread(Runnable), View.post(Runnable), View.postDelayed(Runnable, long)
*   使用 Handler 或 AsyncTask。这是一个使用 AmazonS3Client.putObject 将文件上传到 S3 并将更新发送到对话框的[示例。](http://mobile.awsblog.com/post/TxETGTFNJ28MO9/Making-Asynchronous-Calls-with-AsyncTask)

[您可以在此处](http://developer.android.com/guide/components/processes-and-threads.html)找到有关线程的更多信息。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T19:24:54.897

使用`Handler`在 UI 线程上创建的对象，因此它将接收对该线程`handleMessage`或`Runnable.run()`在该线程上的调用。

# c - 打印C中数组的所有独特组合......我认为真的很接近

> ID：16124177
> 
> 赞同：-4
> 
> 时间：2013-04-20T19:16:28.693
> 
> 标签：c

这是一个家庭作业。我接近完成它，但我无法克服最后一个驼峰。我打印了一个数组的所有可能组合，但我不知道如何从所有组合中挑选出独特的组合。我已经尝试过这种方式和其他一些变体，但我无法让它工作，我不知道为什么。大小是数组的长度，包括终止输入的 -1 值。Rowdata 是一个 maxsize 为 25 的数组。 PrintFx 只是一个打印函数，带有四个循环来打印最终数组。谢谢，代码如下：

```
void RearrangeArray(int rowdata[],int Size)
{
int firstindex;//This is the loop control variable which controls the first permutation of the array
int secondindex;//This is the index control variable that controls the second variables     in the array
int temp[MAXROW]= {0};
int thirdindex = 0;

for (firstindex = 0; firstindex<=Size-1; firstindex++)
  {
  for (secondindex=firstindex+1; secondindex<=Size-1; secondindex++)
    {
     if(rowdata[firstindex]!=rowdata[secondindex] || thirdindex == 0)
     {
      temp[firstindex]=rowdata[firstindex];
      rowdata[firstindex]=rowdata[secondindex];
      rowdata[secondindex] = temp[firstindex];
      if(rowdata[firstindex] == rowdata[secondindex])
      {
        thirdindex=thirdindex+1;
      }
      PrintFx(rowdata, Size);
     }
    }
  }
}

Enter row data: 43101 57784 43101 57784 43101 -1
Combination #1: 57784 43101 43101 57784 43101
Combination #2: 43101 57784 43101 57784 43101
Combination #3: 57784 57784 43101 43101 43101
Combination #4: 43101 43101 57784 57784 43101
Combination #5: 43101 43101 43101 57784 57784
Combination #6: 43101 57784 57784 43101 43101
Combination #7: 43101 57784 43101 43101 57784 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:32:31.977

```
#include <stdio.h>
#include <stdlib.h>

typedef struct pair {
    int data;
    int n;
} Kind;

int cmp(const void *a, const void *b){
    return ((Kind*)a)->data - ((Kind*)b)->data ;
}

Kind *uniq(int data[], int *size){
    int i, pos;
    Kind *wk;

    wk = (Kind*)malloc(*size*sizeof(Kind));
    for(i=0;i<*size;++i){
        wk[i].data = data[i];
        wk[i].n = 1;
    }
    qsort(wk, *size, sizeof(Kind), cmp);
    pos=0;
    for(i=1;i<*size;++i){
        if(wk[pos].data != wk[i].data){
            wk[++pos].data = wk[i].data;
        } else {
            wk[pos].n += 1;
        }
    }
    *size = pos + 1;//new size
    wk = realloc(wk, *size*sizeof(Kind));

    return wk;
}

void print(Kind data[], int ksize, int store[], int size, int depth){
    int i;
    if(depth == size){
        printf("[ ");
        for(i=0;i<size;++i){
            printf("%d ", store[i]);
        }
        printf("]\n");
        return;
    }
    for(i=0;i<ksize;++i){
        if(data[i].n != 0){
            store[depth]=data[i].data;
            data[i].n -= 1;//update
            print(data, ksize, store, size, depth+1);
            data[i].n += 1;//restore
        }
    }
}

void printCombo(int data[], int size){
    Kind *uniq_data;
    int uniq_data_size = size;
    int *wk;

    uniq_data=uniq(data, &uniq_data_size);

    wk=(int*)malloc(size*sizeof(int));
    print(uniq_data, uniq_data_size, wk, size, 0);
    free(wk);
    free(uniq_data);
}

int main(void){
    int data[] = {43101, 57784, 43101, 57784, 43101};
    int size = sizeof(data)/sizeof(int);

    printCombo(data, size);
    return 0;
}
/*
[ 43101 43101 43101 57784 57784 ]
[ 43101 43101 57784 43101 57784 ]
[ 43101 43101 57784 57784 43101 ]
[ 43101 57784 43101 43101 57784 ]
[ 43101 57784 43101 57784 43101 ]
[ 43101 57784 57784 43101 43101 ]
[ 57784 43101 43101 43101 57784 ]
[ 57784 43101 43101 57784 43101 ]
[ 57784 43101 57784 43101 43101 ]
[ 57784 57784 43101 43101 43101 ]
*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T19:57:37.773

这个程序解释了给定字符串的所有组合

例如：如果给定字符串是 ICON，则可能的组合是

ICON ICNO IOCN IONC INCO INOC CION CINO COIN CONI CNIO CNOI OICN OINC OCIN OCNI ONIC ONCI NICO NIOC NCIO NCOI NOIC NOCI

```
#include<stdio.h>
#include<string.h>
//char digits[]="0123456789";
char digits[10][5]=
{
    "ICON","CREW","FARM","OILY","CHOP","ARID","FUND","WAIT","GNAT","TEAR"
};

char str[10];
int top=0;

void push(char a) 
{
    str[top++]=a;
}

char pop() 
{
    return(str[--top]);
}

void generate(char dig[15],int n) 
{
    int i;
    char dig2[15];
    if(n==0) 
    {
        push('\0');
        printf("\n %s",str);
        pop();
    } 
    else 
    {
        for(i=0;dig[i]!='\0';i++) 
        {
            if(dig[i]!=' ') 
            {
                strcpy(dig2,dig);
                push(dig[i]);
                dig2[i]=' ';
                generate(dig2,n-1);
                pop();
            }
        }
    }
}

void main() 
{
    int i;

    for(i=0;i<10;i++) 
    {
        generate(digits[i],4);
    }
} 
```

[http://forgetcode.com/C/1418-Program-For-All-Combination-of-the-Given-String](http://forgetcode.com/C/1418-Program-For-All-Combination-of-the-Given-String)

您可以根据自己的要求轻松修改它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T21:50:59.640

**我和你的组合对应表。**

```
[ 43101 43101 43101 57784 57784 ]#5
[ 43101 43101 57784 43101 57784 ]
[ 43101 43101 57784 57784 43101 ]#4
[ 43101 57784 43101 43101 57784 ]#7
[ 43101 57784 43101 57784 43101 ]#2
[ 43101 57784 57784 43101 43101 ]#6
[ 57784 43101 43101 43101 57784 ]
[ 57784 43101 43101 57784 43101 ]#1
[ 57784 43101 57784 43101 43101 ]
[ 57784 57784 43101 43101 43101 ]#3

Combination #1: 57784 43101 43101 57784 43101
Combination #2: 43101 57784 43101 57784 43101
Combination #3: 57784 57784 43101 43101 43101
Combination #4: 43101 43101 57784 57784 43101
Combination #5: 43101 43101 43101 57784 57784
Combination #6: 43101 57784 57784 43101 43101
Combination #7: 43101 57784 43101 43101 57784 
```

# php - 通过ajax调用php mySQL update

> ID：16124178
> 
> 赞同：0
> 
> 时间：2013-04-20T19:16:36.620
> 
> 标签：php, jquery, html, mysql, ajax

我认为这是一个简单的问题。我是 jQuery 的新手。我正在尝试制作脚本，这样当您单击图像时，ajax 将调用 php 文件，该文件将更新 mySQL 数据库。

**我的脚本：**

```
<script>
function update(){      
        var request = $.ajax({
        url: "insert.php",
        type: "GET",            
        dataType: "html"
    });

    request.done(function(msg) {
        $("div.recen").html(msg);          
    });

    request.fail(function(jqXHR, textStatus) {
        alert( "Request failed: " + textStatus );
    });
}; 
</script> 
```

**HTML：**

```
<div class="recen">
            <img src="./smile.png" class="pic" onclik="update()" /> 
</div> 
```

**PHP 文件：**

```
<?php
$var='123';

$url='localhost';
$user='root';
$password='';

$sql=mysql_connect($url,$user,$password);
mysql_select_db('database');

$query="UPDATE table SET var='".$var."';";
if(mysql_query($query)) echo '<b>Done.</b>';
else echo mysql_error();
?> 
```

由于某种原因，绝对没有回应。数据库保持不变，html 页面没有任何变化。代码有问题，还是我无法通过 ajax 更新数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:18:11.870

我认为您的查询有问题

尝试这个

```
 $query="UPDATE table SET var='".$var."' ";
                                          ^^----remove this `;` 
```

改变这个

```
 if(mysql_query($query)) echo '<b>Done.</b>';
 else echo mysql_error(); 
```

至

```
 if(mysql_query($query)){ echo '<b>Done.</b>';}
 else {echo mysql_error();} 
```

javascript中没有`onclik`，而是使用`onClick`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T19:21:39.613

您的 HTML 代码中有错字。`onclick`你的属性不应该是`onclik`。

```
<img src="./smile.png" class="pic" onclick="update()" /> 
```

# playframework - 游戏框架——securesocial userpass 实现

> ID：16124184
> 
> 赞同：0
> 
> 时间：2013-04-20T19:17:04.260
> 
> 标签：playframework, playframework-2.1, securesocial

我正在使用 Play 2.1 和 securesocial 主快照。

我已经实现了 UserService 的查找和保存（扩展了 UserServicePlugin），如下所示：

查找方法如下：

```
 def find(userId: UserId): Option[Identity] = {
    val user = User.findByUserId(userId);
    user match {
      case Some(user) => {
        val socialUser = new SocialUser(userId, null, null, user.name, Option(user.email), Option(user.photo), AuthenticationMethod("userPassword"), null, null, Some(PasswordInfo(PasswordHasher.BCryptHasher, BCrypt.hashpw(user.password, BCrypt.gensalt(10)))))
        Option(socialUser)
      }
      case None => {
         None
      }
    }
  } 
```

保存方法如下：

```
 def save(user: Identity): Identity = {
    user.id.providerId match {
      case "facebook" => {

      }
      case "google" => {

      }
      case "twitter" => {
      }

      case "userpass" => {
        val eUser = User.findByEmail(user.id.id) match {
          case Some(eUser) => {
            //Existing User - update only
          }
          case None => {
            val appUser: User = new User(NotAssigned, "student", user.id.providerId, user.fullName, user.id.id, user.passwordInfo.get.password, null, null, null, null, null, "active")
            User.create(appUser)
          }
        }
      }
    }
    user
  } 
```

当保存（注册）密码被加密到数据库中时，我不确定它是否应该被加密，上面总是说“你输入的凭据无效”。

但是，如果我在下面的 find 方法中使用“密码”（字符串）而不是 user.password（来自数据库），它会正确验证凭据，并让我登录：

```
 val socialUser = new SocialUser(userId, null, null, user.name, Option(user.email), Option(user.photo), AuthenticationMethod("userPassword"), null, null, Some(PasswordInfo(PasswordHasher.BCryptHasher, BCrypt.hashpw("password", BCrypt.gensalt(10))))) 
```

在这里我认为它再次尝试从数据库中加密密码（已经加密）......我想，我应该保存密码而不加密或获取用户在登录页面中输入的密码以用于查找方法. 谁能帮帮我，谢谢。

我相信以下是所有社交网络和 UserPass 提供商的两个入口点！

# 提供者入口点

GET /authenticate/:provider securesocial.controllers.ProviderController.authenticate(provider)

POST /authenticate/:provider securesocial.controllers.ProviderController.authenticateByPost(provider)

我认为这些实现带有securesocial插件？还是应该复制相同？是不是最好的解决方案！！

我正在使用 MySQL，下面是我的表：

```
create table t_users (
    id int unsigned not null auto_increment,
    user_type enum('admin', 'user') not null default 'user',
    login_type set('userpass', 'facebook', 'google', 'twitter') not null default 'userpass',
    name varchar(64) not null,
    email varchar(128) null,
    password varchar(128),
    mobile varchar(10) null,
    facebook varchar(64) null,
    google varchar(64) null,
    twitter varchar(64) null,
    photo varchar(128),
    status enum('registered', 'active', 'suspended', 'deleted') not null default 'registered',
    modified timestamp not null,
    last_login timestamp not null,
    primary key (id),
    unique(email),
    unique(facebook),
    unique(google),
    unique(twitter)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:41:58.077

正确的查找方法如下：

```
 def find(userId: UserId): Option[Identity] = {
    val user = User.findByUserId(userId);
    user match {
      case Some(user) => {
        val socialUser = new SocialUser(userId, null, null, user.name, Option(user.email), Option(user.photo), AuthenticationMethod("userPassword"), null, null, Some(PasswordInfo(PasswordHasher.BCryptHasher, user.password)))
        Option(socialUser)
      }
      case None => {
         None
      }
    }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T03:18:36.973

你需要在`BCrypt.checkpw(suppliedPassword, hashedPassword)`某个地方使用。

所以是的，您应该将散列密码保存到数据库中。然后，当用户在您的登录屏幕上提供密码时，您应该从数据库中检索用户的哈希密码，调用 checkpw，然后如果它返回 true，则登录用户。

# postgresql - 由触发器更新的更新字段

> ID：16124187
> 
> 赞同：2
> 
> 时间：2013-04-20T19:17:22.327
> 
> 标签：postgresql, triggers

我有一个包含多个字段和一个额外的不同步字段的表。创建了一个触发器和触发器函数以在任何更新/插入之前将 outofsync 字段值设置为 true。

扳机：

```
CREATE TRIGGER goods_update_outofsync
  BEFORE UPDATE
  ON goods
  FOR EACH ROW
  EXECUTE PROCEDURE tg_update_goods_outofsync(); 
```

触发功能：

```
CREATE OR REPLACE FUNCTION tg_update_goods_outofsync()
  RETURNS trigger AS
$BODY$
    BEGIN
    NEW.outofsync=true;
    RETURN NEW;
    END;
    $BODY$
  LANGUAGE plpgsql VOLATILE
  COST 100;
ALTER FUNCTION tg_update_goods_outofsync()
  OWNER TO postgres; 
```

现在来到一个“简单”的问题，我无法找到答案：如何手动将 outofsync 字段更新为 false，因为每次尝试后它都会被触发器自动更改为 true。

编辑：

这几乎有效：

```
IF (NEW.outofsync = OLD.outofsync) THEN
    NEW.outofsync=true;
END IF; 
```

除非 outofsync 字段的值已经为 false 并且我想将其设置为 false，因为那时它变为 true...

提前谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T02:03:39.867

至少四个选项：

*   设置为与另一个用户同步并`current_user`在触发器中测试；

*   在更新同步字段之前，在事务中定义自定义配置变量（GUC）和`SET LOCAL`/或它；`set_config(...)`在触发器中测试 GUC 并根据它改变行为；

*   在设置同步之前暂时禁用事务中的触发器；

*   让触发器检查更新是否所有其他值都未更改，如果没有其他值更改，则允许将同步设置为 true。用于`IS DISTINCT FROM`此测试以方便地处理空值。

我自己可能会使用自定义 GUC，`current_setting('my.guc')`从触发器中获取值。

如果您使用的是 Pg 9.1 或更早版本，则必须`my`在`custom_variable_classes`. 在 9.2 及更高版本中，任何带有句点 ( `.`) 的变量都被假定为自定义变量。

另请参阅[将用户 ID 传递给触发器](https://stackoverflow.com/questions/13172524/passing-user-id-to-postgresql-triggers)。

# android - Android读取多个文件的最快方法？

> ID：16124189
> 
> 赞同：0
> 
> 时间：2013-04-20T19:17:38.133
> 
> 标签：android, linux, file

我正在编写一个 android 应用程序，我需要在启动时读取 7 个 SYSTEM 文件。最有效的方法是什么？

这是我现在的代码，它很慢

读取（文件 1）；读取（文件2）；...读取（文件7）；

...

```
public static String read(String file) {
    String fileContents = "";
    try {
        String[] args = {"/system/bin/cat", file };
        ProcessBuilder cmd = new ProcessBuilder(args);
        Process p = cmd.start();
        InputStream stream = p.getInputStream();
        BufferedReader reader = new BufferedReader(new InputStreamReader(stream));
        fileContents = reader.readLine();
        reader.close();
        stream.close();
    }
    catch (IOException e) {
        e.printStackTrace();
    }
    return fileContents;
} 
```

必须有某种方法可以在不关闭流的情况下对每个文件进行分类，这应该会显着加快速度。我尝试使用 7 个 cat cmds 制作一个 shell 脚本并读取输出，但所有内容都混合在一起，我无法拆分结果。

我尝试使用 echo cmds 拆分 cat cmds 以在输出中形成分隔符：

```
cat file1
echo !
cat file2
echo ! 
```

但是分隔符“！” 不要出现在输出中，我不知道为什么。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T19:21:31.463

我想你可以尝试多个线程。可能 7 就可以了，但您必须检查 7 对于您所针对的最慢的设备是否太多。您需要为 UI 线程留出一些 CPU。

# facebook - Facebook iOS SDK 3.5 登录问题

> ID：16124190
> 
> 赞同：1
> 
> 时间：2013-04-20T19:17:38.447
> 
> 标签：facebook, crash, facebook-login

我已经将 facebook 登录与以前的 sdk 版本集成到应用程序中。升级到 3.5 版后，它无法正常工作。当我想登录时，应用程序崩溃，线程中有几个 [FBSession authorizeWithPermissions:defaultAudience....] 调用。我已经完成了升级文档中描述的所有步骤。有同样问题的人吗？提前致谢。

该应用程序适用于 iOS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:05:24.437

将沙盒模式设置为禁用。这将暂时解决此问题。

![在此处输入图像描述](https://i.stack.imgur.com/ajrmk.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T21:58:19.077

Facebook 已经修复了服务器端的部分问题。再试一次，它可能对你有用。

[https://developers.facebook.com/bugs/188127071335876?browse=search_51770009e1ec62f68874486](https://developers.facebook.com/bugs/188127071335876?browse=search_51770009e1ec62f68874486)

这是导致许多开发人员出现这种情况的服务器错误。但是，服务器修复只会降低无限循环问题发生的可能性。它仍然存在。我创建了一个新错误来跟踪无限循环问题。

[https://developers.facebook.com/bugs/446010282155033](https://developers.facebook.com/bugs/446010282155033)

# sql-server - 可以用交替颜色突出显示 SSRS 中的文本框吗？

> ID：16124193
> 
> 赞同：0
> 
> 时间：2013-04-20T19:17:59.970
> 
> 标签：sql-server, reporting-services

我在 SSRS 2012 中有一份报告，它使用填充的表达式交替显示颜色，如下所示：

`= IIf (RowNumber(Nothing) Mod 2 = 0, "WhiteSmoke", "White")`

我想根据字段的值突出显示一个字段（在本例中称为 R）。我试过这个：

`= IIf (Fields!R.Value > 5, "Yellow" ,(IIf RowNumber(Nothing) Mod 2 = 0, "WhiteSmoke", "White"))`

但是当我预览报告时出现错误。

`The BackgroundColor expression for the text box 'R' contains an error: [BC30516] Overload resolutoin failed because no accessible 'IIf' accepts this number of arguments.`

我怎样才能实现我想要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:20:54.173

尝试：

```
=IIf(Fields!R.Value > 5
  , "Yellow"
  , IIf(RowNumber(Nothing) Mod 2 = 0, "WhiteSmoke", "White")) 
```

# android - Android MediaRecorder 未使用 AudioEncoder.AAC 生成可流式传输的 AAC-LC 音频

> ID：16124198
> 
> 赞同：4
> 
> 时间：2013-04-20T19:18:22.467
> 
> 标签：android, audio-streaming, audio-recording, codec, mediarecorder

我正在使用 Android 4.2+ 的 Nexus 7。因此，根据[Android Supported Media Formats](http://developer.android.com/guide/appendix/media-formats.html#core) ，支持所有列出的编码器和容器格式。

[现在我想使用AAC-LC 编码器](http://developer.android.com/reference/android/media/MediaRecorder.AudioEncoder.html#AAC)和[MPEG-4 容器格式](http://developer.android.com/reference/android/media/MediaRecorder.OutputFormat.html#MPEG_4)（文件类型）录制音频。

在生成的文件中，当我在 HEX 编辑器中打开它时，我看到该文件是一个[ISO 基础媒体文件](http://jaadec.sourceforge.net/specs/ISO_14496-12_ISOBMFF.pdf)，具有`isom`文件类型框（第 4.3 节），具有以下兼容品牌：`isom`和`3gp4`. 文件的其余部分主要是一个`mdat`Box（包含实际的音频数据）。文件开头的以下 HEX 片段告诉我这一点：

```
00000018 66747970 69736F6D 00000000 69736F6D 33677034 00029708 6D646174 ... 
```

翻译为：

```
 24 ftyp     isom     no-minor isom     3gp4     0x29708  mdat     ... 
```

意思是：

文件 ( `ftyp`) 符合 ISO/IEC 14496-12 ( `isom`) 并且没有指定次要版本。与此文件兼容的品牌是：`isom`和`3gp4`. 然后跟随有长度的音频数据框（mdat）`0x29708`

这部分在哪里告诉我这是一个 AAC-LC（AAC 低复杂度）编码文件？

[此外，与Web](http://download.wavetlan.com/SVV/Media/HTTP/http-aac.htm)上的其他 AAC-LC 文件相比，它们的标题（文件框）是不同的，提及`mp42`和`ftyp`, `mp42`,`isom`作为`ndia`兼容品牌。这样的文件也是可流式传输的（AAC-LC 应该如何）。

但 Android 生成的 AAC_LC (MP4) 文件不可流式传输。那么 Android MediaRecorder 或我做错了什么？我正在使用以下代码：

```
mRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
// the bit rate should be adjusted silently if out of range
mRecorder.setAudioEncodingBitRate(320000);
mRecorder.setAudioSamplingRate(48000); 
```

# android - 碎片膨胀失败

> ID：16124199
> 
> 赞同：3
> 
> 时间：2013-04-20T19:18:24.240
> 
> 标签：android, android-fragments

我对此有点动摇，所以请耐心等待。我正在尝试自学，目前正在研究 WROX And​​roid 4 Application Development for Beginners 这本书。我目前在“片段之间的通信”部分，我觉得我明白了，但是当我运行从书中取出的代码时，我在 logcat 中得到“膨胀失败”。这是 XMLs 后跟 .java 文件，然后是错误。我不知道是什么杀死了这个：

主.xml：

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    >
    <fragment
        android:name="com.example.Fragments.Fragment1"
        android:id="@+id/fragment1"
        android:layout_weight="1"
        android:layout_width="0px"
        android:layout_height="match_parent"
        />
    <fragment
        android:name="com.example.Fragments.Fragment2"
        android:id="@+id/fragment2"
        android:layout_weight="1"
        android:layout_width="0px"
        android:layout_height="match_parent"
        />
</LinearLayout> 
```

片段1.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#00FF00"
    >
    <TextView 
        android:id="@+id/lblFragment1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="This is fragment #1"
        android:textColor="#000000"
        android:textSize="25sp"
        />
</LinearLayout> 
```

片段2.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FFFE00"
    >
    <TextView 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="This is fragment #2"
        android:textColor="#000000"
        android:textSize="25sp"
        />
    <Button
        android:id="@+id/btnGetText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Get text in Fragment #1"
        android:textColor="#000000"
        android:onClick="onClick"
        />
</LinearLayout> 
```

片段活动.java：

```
package com.example.fragments;

import android.app.Activity;
import android.os.Bundle;

public class FragmentsActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

片段1.java：

```
package com.example.fragments;

import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class Fragment1 extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        // ---Inflate the layout for this fragment---
        return inflater.inflate(R.layout.fragment1, container, false);
    }

} 
```

片段2.java：

```
package com.example.fragments;

import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class Fragment2 extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, 
            ViewGroup container, Bundle savedInstanceState) {
        //---Inflate the layout for this fragment---
        return inflater.inflate(
                R.layout.fragment2, container, false);
    }

    @Override
    public void onStart() {
        super.onStart();
        //---Button View---
        Button btnGetText = (Button)
                getActivity().findViewById(R.id.btnGetText);
        btnGetText.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                TextView lbl = (TextView)
                        getActivity().findViewById(R.id.lblFragment1);
                Toast.makeText(getActivity(), lbl.getText(), 
                        Toast.LENGTH_SHORT).show();
            }
        });
    }
} 
```

日志猫：

```
04-20 15:09:55.759: E/ActivityThread(9523): Failed to inflate
04-20 15:09:55.759: E/ActivityThread(9523): android.view.InflateException: Binary XML file line #7: Error inflating class fragment
04-20 15:09:55.759: E/ActivityThread(9523):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
04-20 15:09:55.759: E/ActivityThread(9523):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
04-20 15:09:55.759: E/ActivityThread(9523):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
04-20 15:09:55.759: E/ActivityThread(9523):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-20 15:09:55.759: E/ActivityThread(9523):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-20 15:09:55.759: E/ActivityThread(9523):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:282)
04-20 15:09:55.759: E/ActivityThread(9523):     at android.app.Activity.setContentView(Activity.java:1881)
04-20 15:09:55.759: E/ActivityThread(9523):     at com.example.fragments.FragmentsActivity.onCreate(FragmentsActivity.java:15)
04-20 15:09:55.759: E/ActivityThread(9523):     at android.app.Activity.performCreate(Activity.java:5104)
04-20 15:09:55.759: E/ActivityThread(9523):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-20 15:09:55.759: E/ActivityThread(9523):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2260)
04-20 15:09:55.759: E/ActivityThread(9523):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2356)
04-20 15:09:55.759: E/ActivityThread(9523):     at android.app.ActivityThread.access$600(ActivityThread.java:150)
04-20 15:09:55.759: E/ActivityThread(9523):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1244)
04-20 15:09:55.759: E/ActivityThread(9523):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-20 15:09:55.759: E/ActivityThread(9523):     at android.os.Looper.loop(Looper.java:137)
04-20 15:09:55.759: E/ActivityThread(9523):     at android.app.ActivityThread.main(ActivityThread.java:5195)
04-20 15:09:55.759: E/ActivityThread(9523):     at java.lang.reflect.Method.invokeNative(Native Method)
04-20 15:09:55.759: E/ActivityThread(9523):     at java.lang.reflect.Method.invoke(Method.java:511)
04-20 15:09:55.759: E/ActivityThread(9523):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
04-20 15:09:55.759: E/ActivityThread(9523):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
04-20 15:09:55.759: E/ActivityThread(9523):     at dalvik.system.NativeStart.main(Native Method)
04-20 15:09:55.759: E/ActivityThread(9523): Caused by: android.app.Fragment$InstantiationException: Unable to instantiate fragment com.example.Fragments.Fragment1: make sure class name exists, is public, and has an empty constructor that is public
04-20 15:09:55.759: E/ActivityThread(9523):     at android.app.Fragment.instantiate(Fragment.java:592)
04-20 15:09:55.759: E/ActivityThread(9523):     at android.app.Fragment.instantiate(Fragment.java:560)
04-20 15:09:55.759: E/ActivityThread(9523):     at android.app.Activity.onCreateView(Activity.java:4709)
04-20 15:09:55.759: E/ActivityThread(9523):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
04-20 15:09:55.759: E/ActivityThread(9523):     ... 21 more
04-20 15:09:55.759: E/ActivityThread(9523): Caused by: java.lang.ClassNotFoundException: Didn't find class "com.example.Fragments.Fragment1" on path: /data/app/com.example.fragments-2.apk
04-20 15:09:55.759: E/ActivityThread(9523):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
04-20 15:09:55.759: E/ActivityThread(9523):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
04-20 15:09:55.759: E/ActivityThread(9523):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
04-20 15:09:55.759: E/ActivityThread(9523):     at android.app.Fragment.instantiate(Fragment.java:582)
04-20 15:09:55.759: E/ActivityThread(9523):     ... 24 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T19:22:39.093

布局定义错误`android:name="com.example.Fragments.Fragment1"`。它应该是

```
android:name="com.example.fragments.Fragment1" 
```

同样的`Fragment2`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T19:21:51.617

看起来您输入了错误的包名称。

Logcat 显示找不到类`com.example.Fragments.Fragment1`。您的源代码`Fragment1`显示您将包命名为包`com.example.fragments`而不是`com.example.Fragments`. 将包名大写，或对它的引用小写。

# php - Twitter 按钮未显示推文的 URL

> ID：16124200
> 
> 赞同：1
> 
> 时间：2013-04-20T19:18:25.693
> 
> 标签：php, wordpress, twitter

我正在尝试在我的 wordpress 网站上实现一个“Tweet”按钮，但遇到了 URL 未在推文中显示的问题。

它显示主题标签和帐户，但不显示 URL。

我的代码如下：

```
<a href="https://twitter.com/share" class="twitter-share-button" data-url="<?php echo urlencode(get_permalink($post->ID)); ?>" data-via="mixtapes_4_free" data-related="realdannys" data-hashtags="mixtape">Tweet</a> 
```

如果我不使用，`data-url`那么它只会插入基本域名而不是完整的 URL。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:56:52.867

You are missing javascript code.

You probably got your code from [HERE](https://twitter.com/about/resources/buttons)

For sharing a link, the javascript code is

```
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script> 
```

Just add this code after your anchor tag.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T19:25:19.833

您是否尝试过 Twitter 页面上的代码？看看[这里](https://twitter.com/about/resources/buttons#tweet)的 twitter API 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-18T07:15:41.350

我有以下代码：

```
<a href="<?php echo $tweet_url; ?>" class="twitter-share-button" data-url="=<?php the_permalink(); ?>" data-via="<?php echo of_get_option( 'ac_twitter_username' ); ?>" data-lang="en" data-related="anywhereTheJavascriptAPI" data-count="vertical">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script> 
```

但这不起作用，所以我尝试了一个简化版本：

```
<a href="http://twitter.com/share?url=<?php echo urlencode(wp_get_shortlink()); ?>&amp;counturl=<?php urlencode(the_permalink()); ?>" class="twitter-share-button" data-count="vertical" data-via="<?php echo of_get_option( 'ac_twitter_username' ); ?>">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script> 
```

而这个工作得很好。请记住，用户名必须以某种方式集成到您的主题设置中，如果不是，您可以更改：

```
<?php echo of_get_option( 'ac_twitter_username' ); ?> 
```

为您的推特用户名。

我希望这可行，我花了一段时间才找到这种更通用的方法。我不完全知道我在做什么，所以如果有人发现这种方法有问题，请告诉我。到目前为止，它工作得很好。

谢谢！

# ember.js - Ember.js：如何在父路由的控制器和子路由之间传递数据？

> ID：16124201
> 
> 赞同：5
> 
> 时间：2013-04-20T19:18:31.467
> 
> 标签：ember.js, ember-data

我正在构建一个使用 HTML5 地理位置找到用户位置的应用程序。一旦他们的位置被检索到，他们的位置就会被绘制在地图上（父路线）。然后，他们可以选择查看在该位置（子路线）周围发布的推文列表。

因此，我需要将在父路由（存储在控制器上）检索到的坐标传递给子路由，以便正确查询 Twitter API。但是，我不确定如何做到这一点，或者即使我选择了最好的方法。

这是索引控制器：

```
App.IndexController = Ember.ObjectController.extend({

  coords: false,

  getGeoLocation: function() {
    if (navigator.geolocation) {
        this.set('retrieving', true);
        navigator.geolocation.getCurrentPosition(
            this.locationRetrieved.bind(this),
            this.locationFailed.bind(this),
            {
                timeout: 20000
            }
        );
    } else {
        this.set('geolocation', false);
    }
  },

  locationRetrieved: function(position) {
    this.set('coords', position.coords);
    this.get('target').transitionTo('what-do-you-want-to-know');
  }
}); 
```

WhatDoYouWantToKnow 控制器“需要”索引控制器：

```
App.WhatDoYouWantToKnowController = Ember.ObjectController.extend({

  needs: 'index',

  createMap: function() {
    var coords = this.get('controllers.index').get('coords');
    var pyrmont = new google.maps.LatLng(coords.latitude, coords.longitude);

    var map = new google.maps.Map(document.getElementById('map'), {
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        center: pyrmont,
        zoom: 8
    });

    var marker = new google.maps.Marker({
        map: map,
        position: pyrmont
    });
  }
}); 
```

这条路线有一个模板链接到“/what-do-you-want-to-know/tweets”路线：

```
<p>Your location:</p>
<div id="map"></div>
<ul>
  <li>{{#linkTo 'tweets'}}Tweets{{/linkTo}}</li>
</ul> 
```

然后我需要将这些坐标传递到子路由：

```
App.TweetsRoute = Ember.Route.extend({
   model: function() {
    return App.Tweet.find({coords:});
  }
}); 
```

我正在使用 Ember Data 的基本适配器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T21:01:53.980

在路线中很容易做到这一点。在路由中，您可以访问所有控制器。只需使用`controllerFor`这样的方法：

```
App.TweetsRoute = Ember.Route.extend({
    model: function () {
        var coords = this.controllerFor('index').get('coords');
        return App.Tweet.find({ coords: coords });
    }
}); 
```

# c# - 表单提交 mvcintegrationtest 框架测试

> ID：16124204
> 
> 赞同：0
> 
> 时间：2013-04-20T19:18:50.377
> 
> 标签：c#, asp.net, asp.net-mvc, viewmodel

我正在使用 mvcintegrationtesting 框架： [https ://github.com/chrisortman/MvcIntegrationTest](https://github.com/chrisortman/MvcIntegrationTest)

这是基于：http: [//blog.stevensanderson.com/2009/06/11/integration-testing-your-aspnet-mvc-application/](http://blog.stevensanderson.com/2009/06/11/integration-testing-your-aspnet-mvc-application/)

发布了以下模型，但事先将其解析为字典。

```
[Serializable]
public class PatientViewModel
{
    public PatientViewModel()
    {
        Appointments = new EditableList<AppointmentListViewModel>();
    }
    public Guid Id { get; set; }

    [Required(ErrorMessageResourceType = typeof (Resources), ErrorMessageResourceName = "RequiredErrorMessage")]
    [Display(Name = "FirstName", ResourceType = typeof (Resources))]
    public string FirstName { get; set; }

    [Required(ErrorMessageResourceType = typeof (Resources), ErrorMessageResourceName = "RequiredErrorMessage")]
    [Display(Name = "LastName", ResourceType = typeof (Resources))]
    public string LastName { get; set; }

    [Display(Name = "PatientName", ResourceType = typeof (Resources))]
    public string FullName
    {
        get { return string.Format("{0} {1}", FirstName, LastName); }
    }

    [Required(ErrorMessageResourceType = typeof (Resources), ErrorMessageResourceName = "RequiredErrorMessage")]
    [Display(Name = "BirthDate", ResourceType = typeof (Resources))]
    public DateTime BirthDate { get; set; }

    [Display(Name = "Appointment", ResourceType = typeof (Resources))]
    public DateTime Appointment { get; set; }

    [Required(ErrorMessageResourceType = typeof (Resources), ErrorMessageResourceName = "RequiredErrorMessage")]
    [Display(Name = "PhoneNumber", ResourceType = typeof (Resources))]
    public string PhoneNumber { get; set; }

    [Required(ErrorMessageResourceType = typeof (Resources), ErrorMessageResourceName = "RequiredErrorMessage")]
    [Display(Name = "PhoneNumber2", ResourceType = typeof (Resources))]
    public string PhoneNumber2 { get; set; }

    [Required(ErrorMessageResourceType = typeof (Resources), ErrorMessageResourceName = "RequiredErrorMessage")]
    [Display(Name = "Email", ResourceType = typeof (Resources))]
    public string Email { get; set; }

    [Display(Name = "ExtraInfo", ResourceType = typeof (Resources))]
    public string ExtraInfo { get; set; }

    [Display(Name = "Duration", ResourceType = typeof (Resources))]
    public int Duration { get; set; }

    public AddressViewModel AddressViewModel { get; set; }

    [UniqueItemsInList]
    public List<Doctor> Doctors { get; set; }
    [XmlIgnore]
    public List<AppointmentListViewModel> Appointments { get; set; }
} 
```

这是post方法

```
SimulateBrowsingSession(session =>
{
    var queryString = string.Format("/Patient/Edit/{0}", patient.Id.ToString());
    var result = session.Get(queryString);

    var model = result.GetViewModel<PatientViewModel>();
    var postresult = session.Post(queryString, model);

}); 
```

上面的结果没有调用控制器。因此我的第一个问题是：为什么我在控制器的编辑帖子中的断点没有被命中。如果我通过我的模型的空值，它确实会命中。

接下来我尝试了以下方法：

```
var postresult = session.Post(queryString, new NameValueCollection
                                 {
                                     {"Id", patient.Id.ToString()},
                                     {"FirstName", patient.FirstName},
                                     {"LastName", patient.LastName}

                                 }); 
```

这会导致控制器编辑发布方法命中，但仅填写了 Id，名字和姓氏字段为空。

第二个问题：为什么会这样？第三个问题：我如何解决 Q1 和 Q2？

编辑：控制器代码

```
 [HttpPost]
    public ActionResult Edit(PatientViewModel viewModel)
    {
        try
        {
            if (ModelState.IsValid)
            {
                try
                {

                    var item = Map.This(viewModel).To<Patient>();
                    _patientService.Update(item);
                    return RedirectToAction("Details", new { id = item.Id });
                }
                catch
                {
                    AddSelectLists();
                    return View(viewModel);
                }
            }

            AddSelectLists();
            return View(viewModel);
        }
        catch
        {
            return View();
        }
    } 
```

谢谢，

伊恩

# ruby-on-rails - 需要一个有导轨连接的手

> ID：16124209
> 
> 赞同：0
> 
> 时间：2013-04-20T19:19:31.017
> 
> 标签：ruby-on-rails, ruby

在我的应用程序中，我有四个模型 - 用户 > 客户 > 工作 > 任务

我所有的关联都设置得很好（根据这里-> [Advice on RoR database schema and associations](https://stackoverflow.com/questions/10764298/advice-on-ror-database-schema-and-associations)），但我遇到了一个查询。

基本上，我正在做的是：

```
@potentialjobs = current_user.jobs.where(:status => "potential") 
```

但在结果中，除了工作属性外，我还想包括客户属性。

谁能指出我正确的方向？

谢谢。

*更新*

欣赏下面的建议。

我认为这应该很简单，但我开始认为问题一定出在我的代码库的其他地方。

每当我尝试在此查询中使用客户端模型`include`或`join`作为模型本身的二阶关联时，我都会收到以下错误：

`uninitialized constant Job::Clients`

...我不知道为什么。那么，任何人都可以为我阐明这一点吗？

*另一个更新*

已解决 - 我的一个模型中有一个复数错误。嘎。谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T19:31:37.817

您可以通过关联以两种方式访问​​客户端的字段。

```
<% @potential_jobs.each do |job| %>
  <%= job.client.name %>
<% end %> 
```

# python - 如何在python中将带有字符串的列表列表转换为带有整数的列表列表？

> ID：16124213
> 
> 赞同：0
> 
> 时间：2013-04-20T19:20:10.083
> 
> 标签：python, list

我尝试了多种方法来转换它，但都没有成功。例如，我的清单是。

```
testscores= [['John', '99', '87'], ['Tyler', '43', '64'], ['Billy', '74', '64']] 
```

我只想将数字转换为整数，因为稍后我最终会平均实际分数并将名称留在字符串中。

我希望我的结果看起来像

```
testscores = [['John', 99, 87], ['Tyler', 43, 64], ['Billy', 74, 64]] 
```

我已经尝试了许多 for 循环来尝试，并且只尝试 int 这些列表中的数字，但根本没有任何工作。如果你们中的任何人需要我的一些测试代码，我可以添加。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T19:24:37.847

如果所有嵌套列表的长度为 3（即每个学生 2 个分数），那么简单如下：

```
result = [[name, int(s1), int(s2)] for name, s1, s2 in testscores] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T19:25:04.323

在 Python 2 中，对于任意长度的子列表：

```
In [1]: testscores = [['John', '99', '87'], ['Tyler', '43', '64'],
   ...: ['Billy', '74', '64']]

In [2]: [[l[0]] + map(int, l[1:]) for l in testscores]
Out[2]: [['John', 99, 87], ['Tyler', 43, 64], ['Billy', 74, 64]] 
```

在 Python 3（或 2）中：

```
In [2]: [[l[0]] + [int(x) for x in l[1:]] for l in testscores]
Out[2]: [['John', 99, 87], ['Tyler', 43, 64], ['Billy', 74, 64]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T19:52:30.747

已经发布了一些解决方案，但这是我的尝试，不依赖`try`and `except`。

```
newScores = []
for personData in testScores:
    newScores.append([])
    for score in personData:
        if score.isdigit(): # assuming all of the scores are ints, and non-negative
            score = int(score)
        elif score[:1] == '-' and score[1:].isdigit(): # using colons to prevent index errors, this checks for negative ints for good measure
            score = int(score)
    newScores[-1].append(score)
testscores = newScores 
```

附带说明一下，我建议您考虑使用 Python`dict`结构，它允许您执行以下操作：

```
testScores = {} # or = dict()
testScores["John"] = [99,87] 
```

# ios - Using NSSortDescriptor to sort UITableview title with setDateFomat:@"dd.MMMM-EEEE

> ID：16124215
> 
> 赞同：0
> 
> 时间：2013-04-20T19:20:15.100
> 
> 标签：ios, objective-c, uitableview, nssortdescriptor

I have a title in `UITableView` with different dates with the formate of `dd.MMMM-EEEE`. How can I sort them according to time from old to new? Should I use `NSSortDescriptor`?

Here is my code:

```
@synthesize managedObjectContext, pictureListData;
@synthesize scroll;

-(IBAction)scrolldown:(id)sender{
    NSCalendar *cal = [NSCalendar currentCalendar];

    NSDate *today = [NSDate date];
    NSInteger index = NSNotFound;
    if ([pictureListData containsObject:today]) {
        index = [pictureListData indexOfObject:today];
    }

    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:index inSection:0];
    [self.tableView scrollToRowAtIndexPath:indexPath
                          atScrollPosition:UITableViewScrollPositionNone
                                  animated:YES];
}
-(void)viewDidLoad{
    NSSortDescriptor * sortDesc = [[NSSortDescriptor alloc] initWithKey:@"self" ascending:YES];
    [pictureListData sortUsingDescriptors:[NSArray arrayWithObject:sortDesc]];
        [self.tableView reloadData];
}
- (void)viewWillAppear:(BOOL)animated
{
    //  Repopulate the array with new table data
    [self readDataForTable];

    NSCalendar *cal = [NSCalendar currentCalendar];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
    [dateFormatter setDateFormat:@"dd.MMMM - EEEE"];
    NSDate *today = [NSDate date];
    [pictureListData  enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
        Pictures *picture = (Pictures *)obj;
        NSDate *date = [dateFormatter dateFromString:picture.title];
        NSDateComponents *components = [cal components:NSDayCalendarUnit
                                              fromDate:date
                                                toDate:today
                                               options:0];
        if ([components day]==0) {
            *stop = TRUE;
            NSIndexPath *indexPath = [NSIndexPath indexPathForRow:idx inSection:0];
            [self.tableView scrollToRowAtIndexPath:indexPath
                                  atScrollPosition:UITableViewScrollPositionTop
                                          animated:YES];
        }
    }];
}
//  When the view reappears, read new data for table

//  Grab data for table - this will be used whenever the list appears or reappears after an add/edit
- (void)readDataForTable
{
    //  Grab the data
    pictureListData = [CoreDataHelper getObjectsForEntity:@"Pictures" withSortKey:@"title" andSortAscending:YES andContext:managedObjectContext];

    //  Force table refresh
    [self.tableView reloadData];
}

#pragma mark - Actions

//  Button to log out of app (dismiss the modal view!)

#pragma mark - Segue methods

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    //  Get a reference to our detail view
    PictureListDetail *pld = (PictureListDetail *)[segue destinationViewController];

    //  Pass the managed object context to the destination view controller
    pld.managedObjectContext = managedObjectContext;

    //  If we are editing a picture we need to pass some stuff, so check the segue title first
    if ([[segue identifier] isEqualToString:@"EditPicture"])
    {
        //  Get the row we selected to view
        NSInteger selectedIndex = [[self.tableView indexPathForSelectedRow] row];

        //  Pass the picture object from the table that we want to view
        pld.currentPicture = [pictureListData objectAtIndex:selectedIndex];
    }
}

#pragma mark - Table view data source

//  Return the number of sections in the table
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

//  Return the number of rows in the section (the amount of items in our array)
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [pictureListData count];
}

//  Create / reuse a table cell and configure it for display
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Get the core data object we need to use to populate this table cell
    Pictures *currentCell = [pictureListData objectAtIndex:indexPath.row];

    //  Fill in the cell contents
    cell.textLabel.text = [currentCell title];
    cell.detailTextLabel.text = [currentCell desc];

    //  If a picture exists then use it
    if ([currentCell smallPicture])
    {
        cell.imageView.contentMode = UIViewContentModeScaleAspectFit;
        cell.imageView.image = [UIImage imageWithData:[currentCell smallPicture]];
    }

    return cell;
}

//  Swipe to delete has been used.  Remove the table item
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {
        //  Get a reference to the table item in our data array
        Pictures *itemToDelete = [self.pictureListData objectAtIndex:indexPath.row];

        //  Delete the item in Core Data
        [self.managedObjectContext deleteObject:itemToDelete];

        //  Remove the item from our array
        [pictureListData removeObjectAtIndex:indexPath.row];

        //  Commit the deletion in core data
        NSError *error;
        if (![self.managedObjectContext save:&error])
            NSLog(@"Failed to delete picture item with error: %@", [error domain]);

        // Delete the row from the data source
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }   
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T21:41:08.253

修改你的 dataSource 初始化方法。常规 sortDescriptor 是不够的，因为您需要将 dateString 更改为 date 以进行比较。

```
- (void)readDataForTable
{
    //  Grab the data
    pictureListData = [CoreDataHelper getObjectsForEntity:@"Pictures" withSortKey:@"title" andSortAscending:YES andContext:managedObjectContext];

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
    [dateFormatter setDateFormat:@"dd.MMMM - EEEE"];

    [pictureListData sortedArrayUsingComparator:^NSComparisonResult(id obj1, id obj2) {

        Pictures *picture1 = (Pictures *)obj1;
        Pictures *picture2 = (Pictures *)obj2;

        NSDate *date1 = [dateFormatter dateFromString:picture1.title];
        NSDate *date2 = [dateFormatter dateFromString:picture2.title];

        return [date1 compare:date2];
    }];

    //  Force table refresh
    [self.tableView reloadData];
} 
```

# python - 使用 nginx、uwsgi、flask 轻松进行应用程序日志记录/调试？

> ID：16124218
> 
> 赞同：28
> 
> 时间：2013-04-20T19:20:34.477
> 
> 标签：python, logging, nginx, flask, uwsgi

我不想打开[危险的调试控制台](https://stackoverflow.com/questions/11146210/nginx-uwsgi-flask-disabling-custom-error-pages)，但我的应用程序出现 500 错误，并且似乎没有为我编写任何输出以进行更深入的调查。

我[在邮件列表上看到了这个交流](http://flask.pocoo.org/mailinglist/archive/2011/8/10/no-logging-when-flask-deploy-with-nginx+uwsgi/#ed96323fbc7a806ae5d6cca7e8d40de1)，这让我看到了这个[关于记录错误的页面](http://flask.pocoo.org/docs/errorhandling/#application-errors)。

但是，我仍然觉得这非常令人困惑并且有几个问题：

(1) 下面的内容应该放在哪个文件中？

```
ADMINS = ['yourname@example.com']
if not app.debug:
    import logging
    from logging.handlers import SMTPHandler
    mail_handler = SMTPHandler('127.0.0.1',
                               'server-error@example.com',
                               ADMINS, 'YourApplication Failed')
    mail_handler.setLevel(logging.ERROR)
    app.logger.addHandler(mail_handler) 
```

...假设大型应用程序的“变大”文件模式？ `__init__.py`? `config.py`? `run.py`?

(2) 那里的选项让我不知所措，不知道应该使用哪个。当我运行 run.py 时，我应该打开哪些记录器，使用什么设置来复制本地 python 服务器调试到 stdout？我发现默认的本地输出流非常有用，比页面中的交互式调试器更有用。有没有人可以分享一个模式，他们可以通过 nginx 部署来设置复制它的东西，输出到日志？

(3) 有什么我需要改变的，不是在烧瓶级别，而是在 nginx 中，比如在我的`/etc/nginx/sites-available/appname`文件中，以启用日志记录？

# 更新

具体来说，我正在寻找当 python 在本地运行时获得的信息，例如为什么包不工作，或者我的语法错误可能在哪里，或者什么变量不存在：

```
$ python run.py 
Traceback (most recent call last):
  File "run.py", line 1, in <module>
    from myappname import app
  File "/home/me/myappname/myappname/__init__.py", line 27, in <module>
    file_handler.setLevel(logging.debug)
  File "/usr/lib/python2.7/logging/__init__.py", line 710, in setLevel
    self.level = _checkLevel(level)
  File "/usr/lib/python2.7/logging/__init__.py", line 190, in _checkLevel
    raise TypeError("Level not an integer or a valid string: %r" % level) 
```

当我在服务器上运行烧瓶时，我从来没有看到过这个。我只是在浏览器中收到一个 uWSGI 错误，并且不知道哪个代码有问题。我只想将上面的内容写入文件。

我还注意到设置以下日志记录并没有真正向文件写入太多内容，即使我将日志方式提高到 DEBUG 级别：

```
from logging import FileHandler
file_handler = FileHandler('mylog.log')
file_handler.setLevel(logging.DEBUG)
app.logger.addHandler(file_handler) 
```

`mylog.log`是空白的，即使我的应用程序出错。

我还要补充一点，我尝试通过以下方式设置 debug = True `__init__.py`：

```
app = Flask(__name__)
app.debug = True
app.config['DEBUG'] = True
from werkzeug.debug import DebuggedApplication
app.wsgi_app = DebuggedApplication(app.wsgi_app, True)
app.config.from_object('config')
app.config.update(DEBUG=True)
app.config['DEBUG'] = True
if __name__ == '__main__':
    app.run(debug=True) 
```

在我的 config.py 文件中，我有...

```
debug = True
Debug = True
DEBUG = True 
```

然而，没有调试发生，而且没有日志记录或调试，这很难追踪。错误只是用无用的浏览器消息终止应用程序：

```
uWSGI Error
Python application not found 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-12-22T07:51:59.727

在生产中运行应用程序时设置`config['PROPAGATE_EXCEPTIONS']`为`True`，并且您希望将回溯记录到日志文件中。（不过，我还没有尝试过使用 SMTP 处理程序..）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T18:57:16.413

1.  您创建处理程序、添加到记录器等的部分应该在`if __name__ == '__main__'`子句中，即您的主要入口点。我认为那会是`run.py`。
2.  我不确定我能回答这个问题——这取决于你想要什么。我建议查看[日志记录教程](http://docs.python.org/2/howto/logging.html)以查看可用的各种选项。
3.  我认为您不需要在`nginx`级别上进行任何更改。

**更新：**您可能希望有一个涵盖未捕获异常的异常子句，例如

```
if __name__ == '__main__':
    try:
        app.run(debug=True)
    except Exception:
        app.logger.exception('Failed') 
```

它应该将发生在日志中的任何异常的回溯写入`app.run()`日志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-14T22:04:47.750

我知道这是一个非常古老的帖子，但我现在遇到了这个问题，我花了一些时间才找到解决方案。Flask 将错误发送到服务器。我在 Ubuntu 14.04 LTS 上使用 upstart 脚本运行 Gunicorn，发现错误日志的位置如下：

`/var/log/upstart/myapp.log`

[http://docs.gunicorn.org/en/stable/deploy.html#upstart](http://docs.gunicorn.org/en/stable/deploy.html#upstart)

以防万一其他可怜的灵魂最终陷入这种境地。

# mysql - Slow simple single insert in MariaDB (MySQL) - 50 ms

> ID：16124220
> 
> 赞同：0
> 
> 时间：2013-04-20T19:20:58.640
> 
> 标签：mysql, insert, mariadb

*MariaDB could be thought as a fork of MySQL*

I have some software, written in C, which uses SQLite for some operations. I've implemented MySQL backend as an experiment to hasten DB performance. But surprisingly it was not too fast. Basically, I have a simple table:

```
CREATE TABLE `events` (
  `id` BIGINT PRIMARY KEY AUTO_INCREMENT,
  `type` VARCHAR(24) NOT NULL,
  `time` VARCHAR(32) NOT NULL
) 
```

There are no explicit foreign keys, no triggers on insert and so on. Then, the simple insert

```
INSERT INTO `events` (`type`, `time`) VALUES ('abc', '2013-04-19T10:00:00') 
```

takes 50 ms to complete. It is very slow for me, and it means only 20 inserts in second - is this OK? Unfortunately, those inserts are non-relating with each other, and it is not easy to group them with bulk inserts or transactions.

Am I miss something, and those inserts should be much faster? Or it is the expected performance (isn't it very slow)?

For this test, I run both the software and MariaDB 10.0 on the same machine - Core i7 and Debian x64\. DB was set up with all defaults. DB type is XtraDB (InnoDB).

I'm not expert with MySQL

I've found a related question: [mysql insert was too slow](https://stackoverflow.com/questions/12280809/mysql-insert-was-too-slow)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:29:15.213

最后，我必须实现一些应用程序级别的事务分组逻辑才能达到所需的性能。据我所知，这种性能是我的硬件*所期望的。*可能在服务器硬件上会好得多（没有时间测试）。

同样，看起来，这种性能对于单个非事务分组插入是正常的。批量插入、事务等显示完全不同的速度。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-20T19:31:52.740

而不是值中的反引号使用单引号

```
INSERT INTO `events` (`type`, `time`) VALUES ('abc', '2013-04-19T10:00:00') 
```

# java - Java中可用的加密类型？

> ID：16124221
> 
> 赞同：6
> 
> 时间：2013-04-20T19:21:05.017
> 
> 标签：java, encryption

我正在用 Java 实现数据传输模型。我已经在我的应用程序中实现了`DES`,`3DES`并且`AES`我想知道是否可以包含任何其他加密类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T19:26:16.777

您可以使用所有[JCE](http://www.oracle.com/technetwork/java/javase/downloads/jce-6-download-429243.html)的算法，这些算法可供正在使用的加密提供者使用。例如，[以下](http://www.bouncycastle.org/specifications.html)是流行的 JCE 提供商[Bouncy Castle](http://www.bouncycastle.org)可用的一些算法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-20T19:25:40.440

你可以看看[bouncycastle](http://www.bouncycastle.org/java.html) - 他们为 java 实现了一大堆加密算法

# objective-c - Scope of enum itself in Objective-C?

> ID：16124223
> 
> 赞同：1
> 
> 时间：2013-04-20T19:21:13.720
> 
> 标签：objective-c, enums, scope, c99

Consider the following code:

```
enum TableSections {
    kSection1 = 0,
    kSection2 = 1,
    }; 
```

标识符的范围是什么`TableSections`？如果此代码在实现文件中，则`TableSections`仅在该编译单元中定义，全局定义还是其他？

答案是针对 Objective-C（llvm、clang 等？）还是针对所有 C99 或更大的集合的通用答案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T19:26:00.563

枚举是 C，所以我们不是在谈论任何特定于 Objective-C 的东西。

* * *

枚举不参与链接。它们只是象征性的常数。它们在可见/可访问的任何地方定义。如果那是一个编译单元，那么枚举当然只能在该编译单元内使用（但不是因为它是`static`、 local 或其他任何东西 - 仅仅是因为编译器需要查看源代码（文本定义）才能扩展枚举成员。

# java - 运算符未定义

> ID：16124228
> 
> 赞同：5
> 
> 时间：2013-04-20T19:21:24.813
> 
> 标签：java, operator-keyword

我只是尝试创建一个简单的类来计算文件的长度：

```
public class Size {

    long s = 0;
    int a;

    public static void main(String[]args){
        new Size();
    }

    Size(){

        try{
        FileInputStream str = new FileInputStream("E:/Eclipse/Resources/smile.jpg");

        while(a != null){
            s++;
        }
        }catch (IOException e){
            e.printStackTrace();
        }

    }

} 
```

我遇到了一个问题

```
while(a != null) 
```

我得到错误：

> 运算符 != 未定义参数类型 int, null

任何想法为什么它会阻止这种情况？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-20T19:22:35.387

Java 中的原始类型不能是`null`. 如果要检查 0，请执行`a != 0`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-20T19:29:44.497

放入`a`一个`Integer`对象，*可以*比较`null`：

```
Integer value = new Integer(a);

while (value != null)
{
    // Do stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T19:23:46.890

`NULL`您应该只为指针分配（或）检查值。对于整数值，将其初始化为任何数字，如标志并检查该条件。`NULL can be assigned or checked only with a pointer variable`

# android - 如何控制 GroundOverlay 与地图特征的 z-index

> ID：16124230
> 
> 赞同：2
> 
> 时间：2013-04-20T19:21:38.097
> 
> 标签：android, google-maps

我正在使用 android google maps API V2，我想在地图特征（例如，街道名称、城镇名称、公园等）之上绘制 GroundOverlay。现在，我的 GroundOverlay 运行良好，但如果我的叠加层恰好写有街道名称，它就会变得不可读，因为谷歌地图也选择在所有内容之上绘制街道名称，从而部分遮盖了我的叠加层。

我可以重载 GroundOverlay 的某些功能，或者以某种方式使其最后绘制，在地图上的所有其他内容之上？

更改 GroundOverlay 的 z-index 并不能解决这个问题，因为 GroundOverlay z-index 是相对于其他 GroundOverlay，而不是相对于其他地图要素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:03:49.253

您不能在地图要素上方强制使用 GroundOverlay。

您只能使用卫星模式（或不使用地图图块），其中根本不绘制街道名称和其他事物。

我建议在[gmaps-api-issues](http://code.google.com/p/gmaps-api-issues/issues/list?can=2&q=apitype%3DAndroid2)上的普通/地形地图中发出一个功能请求以禁用它们。

# macos - AppleScript 在 Finder 中设置目录路径

> ID：16124232
> 
> 赞同：0
> 
> 时间：2013-04-20T19:21:42.580
> 
> 标签：macos, applescript, finder

我正在尝试通过 AppleScript 删除计算机上的文件。当我应用下面的代码时，它似乎从桌面上删除了文件。我想删除“/Users/andrew/Documents”中的文件。下面是从桌面删除文件的代码：

```
tell application "Finder"
    if exists file "new.mp3" then
        delete file "new.mp3"
    end if
end tell 
```

这是尝试过的，但它不起作用：

```
tell application "Finder"
    if exists file "/Users/andrew/Documents/new.mp3" then
        delete file "/Users/andrew/Documents/new.mp3"
    end if
end tell 
```

如果有人可以提供任何建议，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:49:19.620

`POSIX file`在获取文件对象的路径前添加：

```
tell application "Finder"
    set f to POSIX file "/Users/username/Documents/new.mp3"
    if exists f then delete f
end tell 
```

`system attribute "HOME"`替换为`/Users/username`：

```
set f to POSIX file ((system attribute "HOME") & "/Documents/new.mp3")
tell application "Finder" to if exists f then delete f 
```

或者使用 pre-OS X 路径格式：

```
tell application "Finder"
    set f to "Macintosh HD:Users:username:Documents:new.mp3"
    -- set f to (path to documents folder as text) & "new.mp3"
    if exists f then delete f
end tell 
```

# android - 如何在android中设置下载文件的计时器？

> ID：16124233
> 
> 赞同：0
> 
> 时间：2013-04-20T19:21:43.587
> 
> 标签：android, timer, alarmmanager, android-sqlite

我的目标是为同步设置一个计时器。我想在 15 分钟后开始与我将创建的方法同步。但我需要在数据库中添加条目，以便计时器自动启动。我是新手，所以我很困惑首先执行哪个任务。请建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T03:39:20.943

在这种情况下使用[AlarmManager 。](http://developer.android.com/reference/android/app/AlarmManager.html)[在这里](http://code4reference.com/2012/07/tutorial-on-android-alarmmanager/)你可以找到一个很好的教程`AlarmManager`来完成你的目标

# javascript - 使用 Javascript 构造函数进行原型设计

> ID：16124235
> 
> 赞同：0
> 
> 时间：2013-04-20T19:22:12.070
> 
> 标签：javascript, function, constructor, prototype

**考虑以下示例**

```
var Foo = function(){
    this.identity = 'Foo';
};
Foo.prototype.bar = function(){
    this.identity = 'bar';
};
var fooInstance = new Foo(),
    bar = new fooInstance.bar(); 
```

**问题**

在 内`bar`，我如何获得`fooInstance`变量？有没有办法让孩子`Foo`识别其父母`fooInstance`？例如，我如何创建一个`bar`返回的函数`fooInstance`。一个小小的警告是 bar 必须使用`prototype`命令创建，不能简单地嵌套`Foo`以访问任何`Foo`实例。

**我的想法以及为什么它们不起作用**

可以像这样重写函数

```
var Foo = function(){
    this.identity = 'Foo';
};
Foo.prototype.createBar = function(){
    var parent = this;
    function bar(){
        this.parent = parent;
        this.identity = 'bar';
    };
    return new bar();
};
var fooInstance = new Foo(),
    bar = fooInstance.createBar(); 
```

然而，为了创建易于阅读的代码，如果不需要，我宁愿不使用这种方法。

**进一步澄清**

让我把这个问题放在上下文中。我在 CanvasRenderingContext2D 上进行原型设计，以便画布元素的所有上下文都包含我的新方法。让我们调用该方法 foo 并假设 context 是创建的画布上下文。如何创建像“new context.foo()”这样的变量，以便 foo 函数可以使用上下文变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T19:33:17.883

如果你需要`fooInstance`从对象中引用`bar`对象，你可以像这样使用依赖注入：

```
Foo.prototype.bar = function(fooInstance) {
    this.identity = 'bar';
    this.fooInstance = fooInstance;
};

var fooInstance = new Foo(),
    bar = new foo.bar(fooInstance); 
```

您可以通过在`Foo`.

```
Foo.prototype.createBar = (function() {
    function Bar(parent){
        this.parent = parent;
        this.identity = 'bar';
    };

    return function () {
        return new Bar(this);
    };
})();

var fooInstance = new Foo(),
    bar = fooInstance.createBar(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T19:50:35.783

> 我如何在 bar 中创建一个返回 fooInstance 的函数

如果该函数被调用为构造函数（使用`new`），则您无法真正做到这一点。[`this`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)，对“父”（您调用该方法的对象）的唯一引用在构造函数调用中设置为新实例。您只能使用闭包来获取引用，例如通过在父构造函数中创建构造函数（这对您不起作用）或通过从原型上的闭包返回构造函数（您在第二个示例中几乎得到了):

```
Foo.prototype.getBarCoonstructor = function() {
    var parentFoo = this;
    return function Bar() {
        // constructor things
        // using "parentFoo" reference
    };
};
// Usage:
var bar = new (foo.getBarConstructor()) (); // ugly. 
```

与其为每次调用创建新的构造函数`getBarConstructor`，不如将其放在方法之外并`parentFoo`作为参数。你的想法已经很不错了。

```
function Bar(parent) {
    // constructor things, referring "parent"
}
Bar.prototype.… = …;

Foo.prototype.createBar = function() {
    return new Bar(this); // passing the Foo instance
}; 
```

（@plalx 具有相同的解决方案，但包装在模块闭包中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T19:32:56.037

`Foo.prototype.bar`只是Foo原型对象上的一个函数。除非您在其作用域链中明确定义它，否则该函数无法知道其“父级”。

即如果你愿意

```
var Foo = function(){
    this.identity = 'Foo';
};
var fooInstance = new Foo();

Foo.prototype.bar = function(){
    console.log(fooInstance); // retrieve from scope
    this.identity = 'bar';
};
bar = new foo.bar(); 
```

那行得通。

# design-patterns - 将设计模式名称嵌入到接口名称中是一种好的风格吗？

> ID：16124242
> 
> 赞同：0
> 
> 时间：2013-04-20T19:22:52.517
> 
> 标签：design-patterns, coding-style

将设计模式名称嵌入到适当的接口中是否是一种好的做法/风格，可以说它的装饰器设计模式是否命名了抽象装饰器，`IDecorateInterfaceName`或者`AbstractClassNameDecorator`抽象类是否用于该模式。例如，java I/O 类使用装饰器模式，但命名抽象装饰器类，`FilterInputStream`而不是在名称中的某处添加模式名称。或者如果提供了足够的文档，添加此类信息是否变得多余？在我看来，如果始终遵循此约定，则仅通过查看代码就更容易了解使用了哪些模式，但 API 没有遵循这样的规则这一事实让我大吃一惊。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T19:35:05.233

幸运的是，语言设计者在这方面为我们提供了一些见解

*   [Java 命名准则](http://geosoft.no/development/javastyle.html)
*   [C# 命名准则](http://msdn.microsoft.com/en-us/library/xzf533w0%28VS.71%29.aspx)

在命名你的类、方法和变量时——你的第一目标应该始终是提高可读性（从而向代码的读者传达实际在做什么）。在您的装饰器模式示例中，在类的名称中包含“AbstractDecorator”是不相关的，因为这并不能告诉任何人对象的*实际作用*。

不过，这确实是一个个案基础的事情——例如在许多 MVC 框架中，为每个作为控制器的类添加一个“控制器”后缀是常见的约定（根据该设计模式）。在这种情况下，添加设计模式来命名有助于用户了解对象在做什么。

如有疑问，只需问自己一个问题“这会让我的代码更容易阅读和理解吗？”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T19:36:28.787

恕我直言，知道使用哪种模式并不重要。重要的是班级是什么，做什么。FilterInputStream 说得很清楚。它实现装饰器模式的事实是一个实现细节，如果您知道该模式，则很容易识别，如果您不知道，则不会添加太多信息。

也就是说，一些模式名称清楚地描述了类是什么，例如工厂或策略，因此它们通常用作类名称的一部分。例如，SecretKeyFactory 是密钥的工厂，并实现了工厂模式。但我不希望有像 RuntimeSingleton 或 FileFilterStrategy 这样的类。这些后缀是噪音。

顺便说一句，我也讨厌`I`C# 接口的这种前缀约定。正是这种噪音会降低代码的可读性并且不会添加有意义的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T19:34:58.407

如果您希望将您的装饰器暴露给另一个应用程序，您可以使用接口，例如您基于 WCF 架构的开发 n 层必须是实现接口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T22:40:04.993

在“清洁代码”一书的“有意义的名称”第 2 章的“使用解决方案域名”部分中，Robert Martin 说：

> 请记住，阅读您的代码的人将是程序员。所以继续使用计算机科学 (CS) 术语、算法名称、模式名称、数学术语等。
> 
> “AccountVisitor”这个名字对于熟悉 VISITOR 模式的程序员来说意义重大。哪个程序员不知道“JobQueue”是什么？程序员必须做很多技术性很强的事情。为这些东西选择技术名称通常是最合适的方法。

# angularjs - angularjs中的数组长度返回未定义

> ID：16124243
> 
> 赞同：13
> 
> 时间：2013-04-20T19:22:54.187
> 
> 标签：angularjs

JS：

```
function UserController($scope, User, Group){

    $scope.users = User.query();

    $scope.isNewUser = function(){

            var len = $scope.users.lenght;
            console.log(len); //undefined

            for(var i = 0; i < len; i++){
                if($scope.users[i].created_at == null){
                    return false;
                }
            }

            return true;
        }
    }
} 
```

在前端，我有一个渲染良好的用户列表。但是，当我检索长度时，我得到了不确定。为什么？我需要用户的长度来遍历对象数组。

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2013-04-20T19:24:59.463

利用：

```
$scope.users.length; 
```

代替：

```
$scope.users.lenght; 
```

下次“拼写检查”你的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-10T16:18:10.517

让它像这样：

```
$scope.users.data.length; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-05-26T10:02:16.777

```
var leg= $scope.name.length;
$log.info(leg); 
```

# jquery-mobile - 更改页面时的 Listview 样式问题

> ID：16124254
> 
> 赞同：1
> 
> 时间：2013-04-20T19:24:05.860
> 
> 标签：jquery-mobile, asp.net-mvc-4, knockout.js

我正在使用 jquery mobile 以及 MVC4 平台上的 knockout.js 绑定来开发单页应用程序。

这是我在主 div 页面上的按钮：

```
<div data-role="page" id="pageMain">
 <div data-role="content">
    <a href="#" id="btnExisting" data-bind="click: $root.GetHeader"   data-role="button"   data-theme="b"">View Invoices</a>
 </div> 
</div> 
```

这是我的目标 div 页面：

```
<div data-role="page" id="pageExisting">
    <div data-role="header">
        <h1>Existing Invoices's</h1>
        <a data-rel="back" data-role="button">Back</a>
    </div>
    <div class="choice_list" data-role="content" data-bind="visible: Headers().length > 0">

        <ul id="headersList" data-role="listview" data-bind="foreach: Headers" data-filter-placeholder="Search Invoice" data-filter-theme="a" data-inset="true"
            data-filter="true" data-theme="b">

            <li>

                <a href="#" data-inline="true">

                    <h2>Invoice No.: <span data-bind="text: inv_no"></span></h2>

                    <p>Amount.: <span data-bind="text: inv_amt"></span></p>
                </a>
        </ul>

    </div>
</div> 
```

这是脚本部分：

```
var HeaderViewModel = function () {
        //Make the self as 'this' reference
        var self = this;
     self.Headers = ko.observableArray([]);
function GetHeaders() {
        //Ajax Call Get All Employee Records
        // self.GetHeaders = function () {

        $.ajax({
            type: "GET",
            url: "/api/InvAPI",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {

                self.Headers(data); 

            },
            complete: function () {
                $.mobile.changePage("#pageExisting");

            },
            error: function (error) {
                alert(error.status + "<--and--> " + error.statusText);
            }
        });

    }
self.GetHeader = function () {
        GetHeaders();
    }
   };

$(document).ready(function () {
 ko.applyBindings(new HeaderViewModel());
} 
```

当我点击“查看发票”按钮时，我得到了一个典型的 Jquery 移动格式列表视图，但问题是当我点击后退按钮并再次导航到“PageExisiting”div 页面时，我得到了没有样式的列表数据..

在这两种情况下查看页面源代码时，我注意到在第二次导航时；li 标签没有属性。

我尝试了一些解决方案，例如：列表视图刷新、页面销毁、页面创建之前的行：

```
$.mobile.changePage("#pageExisting"); 
```

没有运气。

我被困在这里，我会很感激你提出的解决方案

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T23:53:16.543

在显示页面之前刷新列表视图。

```
$('#pageID').on('pagebeforeshow', function() {
 $('[data-role=listview]').listview('refresh');
}); 
```

# node.js - 如何使用本机 node.js 驱动程序将用户名/密码连接到 mongodb

> ID：16124255
> 
> 赞同：20
> 
> 时间：2013-04-20T19:24:06.673
> 
> 标签：node.js, node-mongodb-native, joyent

我在 Joyent 云中使用本机 mongo 驱动程序，node.js 应用程序在本地运行良好，但在 Joyent 中，当我使用他们提供的用户名/密码运行时无法连接。

这是我用来连接的代码：

```
var db = new MongoDB(dbName, new Server('localhost', 27017 , {auto_reconnect: true}), {w: 1});
db.open(function(e, db){
if (e) {
    console.log(e);
} else{
    console.log('connected to database :: ' + dbName);
    //db.admin().authenticate('admin', '+(uihghjk', function(de , db){
    // if(e){
    //     console.log("could not authenticate");
    // }else {
    //console.log('connected to database :: ' + dbName);
    // }
    // });
}
}); 
```

是什么阻止我成功连接？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-29T05:19:31.753

如果您只使用 MongoClient 会更容易

```
MongoClient.connect('mongodb://admin:password@localhost:27017/db', function (err, db) { 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-09-12T06:20:32.047

标准 URI 连接方案是：

```
mongodb://[username:password@]host1[:port1][,host2[:port2],...[,hostN[:portN]]][/[database][?options]] 
```

例如：

```
mongodb://admin:pass@abc.com/ 
```

参考：[https ://docs.mongodb.com/manual/reference/connection-string/](https://docs.mongodb.com/manual/reference/connection-string/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-06-29T09:22:42.510

**工作代码是这样的**

```
const MongoClient = require('mongodb').MongoClient;
const uri = "mongodb+srv://<username>:<password>@cluster0-saugt.mongodb.net/test?retryWrites=true&w=majority";
const client = new MongoClient(uri, { useNewUrlParser: true });
client.connect(err => {
    // creating collection
    const collection = client.db("test").collection("devices");
    // perform actions on the collection object
    client.close();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-24T11:58:25.937

在 URL`<username> : <password>`之后使用。`//`

我正在使用 Mongoose 进行连接，我的用户名和密码是 admin admin

```
mongodb+srv://admin:admin@cluster0.c1xrp 
```

这对我有用。

# wordpress - WordPress Safari Broswer url 包含换行特殊字符

> ID：16124257
> 
> 赞同：2
> 
> 时间：2013-04-20T19:24:18.257
> 
> 标签：wordpress, url, safari

我一直在做一些测试。注意：这只发生在 Safari 浏览器上。

我关闭了所有插件并激活了主题二十（而不是我的 Catch Box 子主题）。在此配置下，所有菜单项都可以正常工作，除了顶部菜单中的主页选项卡，在 Safari 中显示如下：

```
http://standrewsspringlake.org%0A/ 
```

当我激活主题二十一时，所有主菜单项和主页选项卡都添加了字符。

当我激活主题二十十二时，只有主页选项卡有问题。

这三个主题之间的区别在于，21 点显示了其他主题不显示的下拉菜单项。

所有插件和核心 WP 都是最新的，但正如我所说，上述情况发生在所有插件关闭的情况下。

我在任何其他 WP 网站上都找不到此错误。我总是将我的 WP 安装放在一个文件夹中，而不是在根目录中，但这是我执行所有 WP 站点的方式，我发现 .htaccess 文件中没有任何差异。

这可能与托管有关吗？唯一真正的区别是该站点托管在 HostGator Baby 帐户上，而我的其他站点托管在 HostGator Hatchling 或 Business 帐户或其他主机上。

任何帮助或见解将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T03:04:59.657

该字符是`linefeed`编码字符。`Line Feed = U+000A`

如果你想摆脱它，你应该：

*   `check your inserted values`（都在`menu item`under `appearances -> menus`， AND`blog`和`home`url 下`general settings`，并确保没有杂散（空）字符，或

*   如果在代码中（在您自己的主题中），您应该使用[`trim()`](http://php.net/manual/en/function.trim.php)和/或[`urldecode()`](http://php.net/manual/en/function.urldecode.php)函数，具体取决于您的代码的其余部分（您的问题原始问题中没有包含这些）。

至于二十一十二主题，几乎可以肯定是上述之一，除非你在`.htaccess`关卡中也改变了一些东西。

作为额外的验证措施，我还建议在应用上述步骤之前再次禁用所有插件，然后使用 212 个（因为其中一些，尤其是与 SEO 相关的）如果使用/编码不当可能会产生这种影响。

作为旁注，并且根据经验，最好在问题中包含一些代码，原因有两个：

1.  它将帮助阅读问题的人发布特定代码作为答案。
2.  它将帮助您尝试理解问题（如果不完全 `WHAT`那么至少`WHERE`）

我确实有一个问题：您的内容（菜单项）是英文还是其他语言，所有字符是否总是`%0A`换行？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T12:54:34.650

也许您在数据库中的 URL 是用这个字符存储的。

检查类似问题的[这个答案。](https://stackoverflow.com/a/8122229/850010)

# c# - Moq - 存储库中的 Linq 表达式 - 在设置中指定表达式

> ID：16124263
> 
> 赞同：10
> 
> 时间：2013-04-20T19:25:16.863
> 
> 标签：c#, linq, mocking, moq

我的界面上有一个方法，如下所示：

```
T GetSingle(Expression<Func<T, bool>> criteria); 
```

我试图模拟这样的设置（我意识到这不起作用）：

```
_mockUserRepository = new Mock<IRepository<User>>();
_mockUserRepository.Setup(c => c.GetSingle(x => x.EmailAddress == "a@b.com"))
    .Returns(new User{EmailAddress = "a@b.com"}); 
```

我意识到我将错误的参数传递给设置。
阅读[此答案](https://stackoverflow.com/a/6626016/131809)后，我可以通过传入表达式来使其工作，如下所示：

```
_mockUserRepository.Setup(c => c.GetSingle(It.IsAny<Expression<Func<User, bool>>>())
    .Returns(new User{EmailAddress = "a@b.com"}); 
```

但是，这意味着如果我`GetSingle`使用任何表达式调用该方法，将返回相同的结果。

有没有办法在设置中指定使用什么表达式？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-20T21:57:57.733

我设法让它工作：

```
Expression<Func<User, bool>> expr = user => user.EmailAddress == "a@b.com";

_mockUserRepository.Setup(c => c.GetSingle(It.Is<Expression<Func<User, bool>>>(criteria => criteria == expr)))
    .Returns(new User { EmailAddress = "a@b.com" });

User result = _mockUserRepository.Object.GetSingle(expr); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-11T14:33:45.180

If you don't mind a generic set up, it can be simpler like this.

```
_mockUserRepository.Setup(c => c.GetSingle(It.IsAny<Expression<Func<User, bool>>>()))
    .Returns(new User { EmailAddress = "a@b.com" }); 
```

# python - 从距离矩阵计算亲和力矩阵

> ID：16124268
> 
> 赞同：5
> 
> 时间：2013-04-20T19:25:56.197
> 
> 标签：python, bioinformatics, affinity

我使用 clustal omega 获得了 500 个蛋白质序列的距离矩阵（它们彼此同源）。

我想使用亲和力传播来聚类这些序列。

最初，因为我用手观察到距离矩阵只有 0 和 1 之间的值，0 距离 = 100% 的同一性，所以我推断我可以采取`(1 - distance)`获得亲和力。

我运行了我的代码，集群看起来很合理，我认为一切都很好......直到我读到通常，亲和力矩阵是通过应用“热核”从距离矩阵计算出来的。就在那时，我脑海中的一切都乱了套。

我是否得到了不正确的亲和矩阵的概念？有没有一种简单的方法来计算亲和矩阵？scikit-learn 提供以下公式：

```
similarity = np.exp(-beta * distance / distance.std()) 
```

但什么是贝塔？我知道 distance.std() 是距离的标准偏差。

我现在对所涉及的概念（而不是实际的编码实现）感到非常困惑和迷失，所以非常感谢任何帮助！

PS 我已经尝试在 Biostars.org 上发帖，但我还没有得到答案......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-13T19:58:22.613

我认为 1-distance 和 exp(-beta * distance) 都是将距离转换为相似度的有效方法（尽管它们在概率框架中的解释不同）。我会简单地使用能带来更好结果的东西。

# c# - 使用 DTF 扩展 FilesInUse

> ID：16124270
> 
> 赞同：1
> 
> 时间：2013-04-20T19:26:03.357
> 
> 标签：c#, wix, windows-installer, installshield, dtf

我有一个安装程序，我编写了一个简单的自定义操作来计算属性（AppSearch 扩展）中某个进程类型的计数，然后在 LaunchConditions 中使用它来控制安装程序。客户现在想要更丰富的体验，所以我试图稍微重写一下以触发 FilesInUse 对话框。

```
[CustomAction]
public static ActionResult DetectRunningProgram(Session session)
{
    var record = new Record(2);
    record[0] = null;
    record[1] = "Calc.exe";
    record[2] = "Calculator";
    session.Message(InstallMessage.FilesInUse, record);
    MessageBox.Show("TEST");

    return ActionResult.Success;
} 
```

我在 AppSearch 之后安排了这个。我看到 FilesInUse 对话框被显示，但它没有进入模态。一旦我关闭 TEST 消息框，FilesInUse 就会消失，我会看到我的 InstallWelcome 对话框。

我错过了什么？我没有使用外部用户界面...仅本机用户界面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:49:21.937

该`CostFinalize`操作将是初始化 Windows Installer 中的重要状态所必需的。`FilesInUse`Windows 安装程序直到没有处理的事实`InstallValidate`是一个很好的提示。之后安排您的自定义操作`CostFinalize`应该让一切正常。例如，`RestartResource`将记录添加到重新启动管理器的 WiX 工具集中的自定义操作在`InstallValidate`.

# excel - Excel 2010 宏：替换所有包含大于和小于数字的单元格

> ID：16124271
> 
> 赞同：2
> 
> 时间：2013-04-20T19:26:06.370
> 
> 标签：excel, excel-2010, vba

我有一个大的 Excel 表，我想在其中替换几个数字范围（都在同一单元格范围内）。比如我想把所有大于-5小于5的数字都换成数字0。所有大于5小于10的数字都应该换成1，所有大于-10小于-5的数字都应该换成替换为 -1，依此类推。

我尝试使用这个公式

```
Sub replace()
    Dim rng As Range

    For Each rng In Range("B2:AI40")
        If IsNumeric(rng) < 5 And IsNumeric(rng) > -5 Then
            rng = 0
        End If
    Next rng
End Sub 
```

这并不能完全解决问题，因为它将所有内容都替换为 0。同样，[此](http://www.ozgrid.com/forum/showthread.php?t=93468)解决方案也无法解决问题。如何修改任一公式以满足我的需要，或者这样的替代是不可能的？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T19:30:38.707

尝试

```
Sub replace()
    Dim rng As Range

    For Each rng In Range("B2:AI40")
        If rng.Value < 5 And rng.Value > -5 Then
            rng = 0
        End If
    Next rng
End Sub 
```

`IsNumeric`是一个返回 0 或 1 的布尔函数，这就是为什么之前每个单元格都设置为 0 的原因。如果您希望单元格中包含非数字值，则可能必须使用以下代码：

```
Sub replace()
    Dim rng As Range

    For Each rng In Range("B2:AI40")
        If IsNumeric(rng) then
            If rng.Value < 5 And rng.Value > -5 Then
                rng = 0
            End If
        End if
    Next rng
End Sub 
```

`\`当您使用整数除法 ( ) 除以 5时，整个任务变得更简单（并且还处理您提到的其他情况）：

```
Sub replace()
    Dim rng As Range

    For Each rng In Range("B2:AI40")
        If IsNumeric(rng) then
            rng = rng.Value \ 5
        End if
    Next rng
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T20:21:32.640

请不要选择此作为答案。

这篇文章只是为了向您展示一种比您实际使用的方法快得多的方法。从技术上讲，您正在遍历`B2:AI40`. 即您的代码循环了 1326 次（`=34 Cols * 39 Rows`）

这是一个更快的方法，只使用 17 个循环

**逻辑：**

1.  < 10 且 > 5 （也就是说 6,7,8,9 被 1 代替）
2.  < 5 和 > -5 （也就是说 -4,-3,-2,-1,0,1,2,3,4 被 0 代替）
3.  < -5 和 > -10 （也就是说 -6,-7,-8,-9 被 -1 代替）

现在，我们将使用`.Replace`搜索上述数字而不是循环任何单元格，因此从技术上讲**，与 1326 相比，我们只会循环 17 次**！

请参阅此示例代码

```
Option Explicit

Sub replace()
    Dim ws As Worksheet
    Dim rng As Range
    Dim i As Long

    Set ws = ThisWorkbook.Sheets("Sheet1")
    Set rng = ws.Range("B2:AI40")

    With rng
        For i = 6 To 9 '<~~ 4 loops
            .replace What:=i, Replacement:="1", LookAt:=xlWhole, _
            SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
            ReplaceFormat:=False
        Next i

        For i = -4 To 4 '<~~ 9 loops ; 7 if when i = 1 or 0 it doesn't do anyting
            If i <> 1 And i <> 0 Then
                .replace What:=i, Replacement:="0", LookAt:=xlWhole, _
                SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
                ReplaceFormat:=False
            End If
        Next i

        For i = -9 To -6 '<~~ 4 loops   
            .replace What:=i, Replacement:="-1", LookAt:=xlWhole, _
            SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
            ReplaceFormat:=False
        Next i
    End With
End Sub 
```

# mongodb - 在 mongo 中投影子查询

> ID：16124272
> 
> 赞同：0
> 
> 时间：2013-04-20T19:26:08.473
> 
> 标签：mongodb, mapreduce, projection

我正在使用动态表单构建器将值存储到 mongo 中。这意味着这些字段是在运行时定义的。

现在我试图让用户构建一个动态的数据网格视图，以便他们可以一目了然地选择他们想要查看的字段。因此，我需要投影存储在集合项中的字段子集。

这是集合中 2 条记录的示例

```
{
"_id": {
    "$oid": "511ff0a8521e66d41b0d35d6"
},
"FormID": {
    "$uuid": "413ba627-94bf-0ca7-49b3-9ca2a1a3e9b5"
},
"ResultID": {
    "$uuid": "45f455ae-8486-aaa9-b97a-e480bfdf3db4"
},
"FieldValues": [
    {
        "FieldID": "first name",
        "FieldValue": "John"
    },
    {
        "FieldID": "last name",
        "FieldValue": "smith"
    },
    {
        "FieldID": "school",
        "FieldValue": "high school"
    },
    {
        "FieldID": "favorite subject",
        "FieldValue": "math"
    },

]
},

{
"_id": {
    "$oid": "511ff0a8521e66d41b0d35d7"
},
"FormID": {
    "$uuid": "413ba627-94bf-0ca7-49b3-9ca2a1a3e9b5"
},
"ResultID": {
    "$uuid": "45f455ae-8486-aaa9-b97a-e480bfdf3db5"
},
"FieldValues": [
    {
        "FieldID": "first name",
        "FieldValue": "sarah"
    },
    {
        "FieldID": "last name",
        "FieldValue": "smith"
    },
    {
        "FieldID": "school",
        "FieldValue": "high school"
    },
    {
        "FieldID": "favorite subject",
        "FieldValue": "english"
    },

]
}, 
```

假设我想投影结果 ID、名字、姓氏

在 SQL 中——我会在自己的表中定义 FieldValues，并且我会对 ResultId =（父结果 id）和 FieldID =“名字”的字段值进行子查询，然后对“姓氏”进行另一个子查询"等等以使结果变平。

我一直在试图弄清楚如何用 mongo 做到这一点。我能够找到 $slice 运算符，但这只能让您获得一组连续的数组元素。

我不想获取整个文档的原因是，在某些情况下，我的客户已经定义了 400 多个要跟踪的字段。即使在 200 行上反序列化所有这些也可能意味着 100MB 的数据通过网络传递并反序列化（慢）。

任何意见/建议将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T13:52:59.983

您可以构建适当的聚合框架语法来准确返回您想要的内容。它可能不够快，但它会返回您想要的确切格式，而无需拉下整个文档。为了让它更快，我假设您可以避免在整个集合中运行它，方法是让管道的第一阶段`{$match}`只选择相关的文档子集（并且应该索引该标准）。

在您的两个示例文档的字段上使用以下管道阶段，您`first name`只能`last name`返回 _id 和这些字段。对于一组给定的字段 ID，您可以通过编程方式生成此管道。

```
unwind = { "$unwind" : "$FieldValues" };

match = { "$match" : {
        "FieldValues.FieldID" : {
            "$in" : [
                "first name",
                "last name"
            ]
        }
    }
};

proj = { "$project" : {
        "first name" : {
            "$cond" : [
                {
                    "$eq" : [
                        "first name",
                        "$FieldValues.FieldID"
                    ]
                },
                "$FieldValues.FieldValue",
                "  skip"
            ]
        },
        "last name" : {
            "$cond" : [
                {
                    "$eq" : [
                        "last name",
                        "$FieldValues.FieldID"
                    ]
                },
                "$FieldValues.FieldValue",
                "  skip"
            ]
        }
    }
};

group = { "$group" : {
        "_id" : "$_id",
        "first name" : {
            "$max" : "$first name"
        },
        "last name" : {
            "$max" : "$last name"
        }
    }
};

db.project.aggregate(unwind, match, proj, group)
{
    "result" : [
        {
            "_id" : ObjectId("511ff0a8521e66d41b0d35d7"),
            "first name" : "sarah",
            "last name" : "smith"
        },
        {
            "_id" : ObjectId("511ff0a8521e66d41b0d35d6"),
            "first name" : "John",
            "last name" : "smith"
        }
    ],
    "ok" : 1
} 
```

# php - 通过简单的字数处理数组值

> ID：16124275
> 
> 赞同：0
> 
> 时间：2013-04-20T19:26:22.840
> 
> 标签：php

是否有一种优雅的方式来处理数组值，允许使用简单的字数而不是 strlen() 或使用 str_word_count -> array_count_values 等来释放自己。

例如，我只想保留包含 x 个单词的数组值。

目前我正在使用。

```
<?php
class Functions
{
    public function processArray($array,$max,$min)
{
        foreach ($array as $value)
        {
        /* char count */
            if (strlen($value) < $max AND strlen($value) > $min) 
        /* word count */
            if (str_word_count($value,0) < $max AND str_word_count($value,0) > $min)
        {
        $array2[] = $value;
        }
    }
return $array2;
    }
}
$input = file_get_contents("files/scrape.txt");
$array = explode(".",$input);
$process = new Functions;
$output = implode(". ",$process->processArray($array,150,50));
print $output;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T19:34:48.830

使用[**回调**](http://php.net/manual/en/language.types.callable.php) （**来自 PHP 5.4**）

```
function processArray($array,$func)
{
    $result = array();
    foreach ($array as $value)
    {
        if($func($value)){
            $result[] = $value;
        }
    }
    return $result;
}

processArray($array, function($a){
    return strlen($a) < 150 && strlen($a) > 50;
}); 
```

使用[**array_filter**](http://php.net/manual/en/function.array-filter.php) (**来自 PHP 5.4** )

```
 array_filter($array, function($a){
        return strlen($a) < 150 && strlen($a) > 50;
   }); 
```

或（**从 PHP 5 开始**）

```
function check($a){
   return strlen($a) < 150 && strlen($a) > 50;
}

array_filter($array, 'check'); 
```

# php - CActiveForm ajax 验证中的歧义

> ID：16124279
> 
> 赞同：0
> 
> 时间：2013-04-20T19:26:32.213
> 
> 标签：php, yii

在CActiveForm的[API Doc示例中是：](http://www.yiiframework.com/doc/api/1.1/CActiveForm)

**要响应 AJAX 验证请求，我们需要以下类代码：**

```
public function actionCreate()
{
    $model=new User;
    $this->performAjaxValidation($model);
    if(isset($_POST['User']))
    {
        $model->attributes=$_POST['User'];
        if($model->save())
            $this->redirect('index');
    }

    $this->render('create',array('model'=>$model));
}

protected function performAjaxValidation($model)
{
    if(isset($_POST['ajax']) && $_POST['ajax']==='user-form')
    {
        echo CActiveForm::validate($model);
        Yii::app()->end();
    }
} 
```

我的问题：这段代码是什么意思：`$_POST['ajax']==='user-form'`？我将其更改为`$_POST['ajax']==='xxxzzz'`但脚本确实有效！这是有必要的？

* * *

# 编辑

**我的代码错了。**

`if(isset($_POST['ajax']) && $_POST['ajax']==='xxx-zzz')`表达确实有效。仍然执行验证的原因是，在接下来的几行中，我以这种方式执行了验证：

```
$model = new User;
$this->performAjaxValidation($model,'xxx-zzz'); //here don't perform Ajax validation
.
.
.
    if(!$validate){
    $this->performAjaxValidation($model,'user-form'); // here Ajax validation will performed
.
.
.
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:37:50.610

$_POST['ajax'] 保存提交用于 ajax 验证的表单的 id。从中得到你想要的。

正如您在文档中`CActiveForm::validate()`从 POST 数据加载模型一样，并且 $_POST['ajax'] 从未使用过，因此您可以根据需要将其删除。

最好确保您不使用 ajax 验证您不打算验证的表单。

# uicollectionview - 遍历 UICollectionview 中的所有单元格

> ID：16124281
> 
> 赞同：10
> 
> 时间：2013-04-20T19:26:53.877
> 
> 标签：uicollectionview, uicollectionviewcell

我有 UICollection ，其中将有许多学生项目，每个项目内部都有用于记录出勤的开关。我像这样遍历所有可见的单元格。

```
for(attendancecollectionViewCell* cells in [[self collectionView] visibleCells]){

    NSLog(@"The switch value : %c",cells.attendanceSwitchLabel.isOn);

} 
```

但是，我想遍历所有单元格以进行出勤，而不仅仅是可见单元格。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-21T05:02:52.447

您不能循环遍历不可见的单元格，因为这些单元格不存在。UICollectionView 和 UITableView 一样，一旦单元格离开屏幕就会重用它们。即，如果您向下滚动，它将获取一个已滚动的单元格并将其用于即将滚动到视图中的“新”单元格。

如果您希望为集合中的条目保存状态，则必须将其与单元格本身分开存储。例如，映射到 indexPath.row 值的结构（或自定义 NSObject）的 NSArray。

对您来说更重要的问题是：您要在 for 循环中实现什么？

如果您需要更多信息或示例代码，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-12T17:07:43.527

# 斯威夫特 4+

```
func getAllCells() -> [UICollectionViewCell] {

    var cells = [UICollectionViewCell]()
    // assuming tableView is your self.tableView defined somewhere

    for i in 0...self.numberOfSections-1
    {
        for j in 0...self.numberOfItems(inSection: i) - 1
        {
            if let cell = self.cellForItem(at: NSIndexPath(row: j, section: i) as IndexPath) {

                cells.append(cell)
            }

        }
    }
    return cells
} 
```

# google-chrome-extension - 如何在最后一个固定选项卡之后移动选项卡？

> ID：16124285
> 
> 赞同：0
> 
> 时间：2013-04-20T19:27:25.613
> 
> 标签：google-chrome-extension

该扩展程序的设计目的是，当您单击固定选项卡时，它会将其移动到所有固定选项卡中最右边的位置。在我不断遇到问题之前它工作了几次：

> tabs.move 期间出错：现在无法编辑选项卡（用户可能正在拖动选项卡）。chromeHidden.handleResponse

但是，当我使用调试器时，它每次都有效。

代码：

```
chrome.tabs.onActivated.addListener(function(tab) {
    chrome.windows.getAll({"populate":true}, function(windows) {
        var tabs = [];
        for (var i = 0; i < windows.length; i++) {
            var win = windows[i];
            if (win.id == tab.windowId) {
                tabs = win.tabs;
                for (var k = 0; k < tabs.length; k++) {
                    var tempTab = tabs[k];
                    if (tempTab.id == tab.tabId && tempTab.pinned == true) {
                        for (var j = k; tabs[j+1] && tabs[j+1].pinned; j++) {
                            chrome.tabs.move(tab.tabId, {"index":j+1});
                        }
                        break;
                    }
                }
            }
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T21:36:13.510

您当前的代码有一些缺陷：

1.  效率低下：您选择所有窗口和选项卡，而只需要当前窗口中的固定选项卡。
2.  **异步** 方法的错误使用[`chrome.tabs.move`](https://developer.chrome.com/extensions/tabs.html#method-move)：您通过反复向右移动选项卡将单个选项卡移动到最后一个固定选项卡之后。正如我所说，[`chrome.tabs.move`](https://developer.chrome.com/extensions/tabs.html#method-move)是异步的，所以当你[`chrome.tabs.move`](https://developer.chrome.com/extensions/tabs.html#method-move)再次调用时，之前的“移动请求”可能还没有完成。因此你的错误。

为了提高效率，请使用[`chrome.tabs.query`](https://developer.chrome.com/extensions/tabs.html#method-query)带有相关过滤器的方法：

```
chrome.tabs.onActivated.addListener(function(activeInfo) {
    var tabId = activeInfo.tabId;
    chrome.tabs.query({
        currentWindow: true,
        pinned: true
    }, function(tabs) {
        // Only move the tab if at least one tab is pinned
        if (tabs.length > 0) {
            var lastTab = tabs[ tabs.length - 1 ];
            var tabIndex = lastTab.index + 1;
            for (var i=0; i<tabs.length; ++i) {
                if (tabs[i].id == tabId) {
                    // Current tab is pinned, so decrement the tabIndex by one.
                    --tabIndex;
                    break;
                }
            }
            chrome.tabs.move(tabId, {index: tabIndex});
        }
    }); // End of chrome.tabs.query
});  // End of chrome.tabs.onActivated.addListener 
```

如果您想在移动选项卡后做其他事情，请将回调传递给[`chrome.tabs.move`](https://developer.chrome.com/extensions/tabs.html#method-move)：

```
chrome.tabs.move(tabId, {index: tabIndex}, function() {
    console.log('Moved tab!');
}); 
```

注意：如果您按住鼠标，选项卡不会移动。此外，在标签集中时总是移动标签在用户体验方面有点不友好。您最好使用[浏览器操作按钮](https://developer.chrome.com/extensions/browserAction.html%27)来激活此功能。是的，只需单击一次即可移动选项卡，但至少用户可以选择不移动选项卡，如果他们愿意的话。

```
chrome.browserAction.onClicked.addListener(function(tab) {
    var tabId = tab.id;
    chrome.tabs.query({currentWindow: true, pinned: true}, ...);
}); 
```

# git - 当在分支上删除文件时，git 是否应该删除 master 上的文件？

> ID：16124291
> 
> 赞同：1
> 
> 时间：2013-04-20T19:28:20.130
> 
> 标签：git

我正在尝试删除分支中的一些文件，但我不希望从 master 或其他分支中删除这些文件。但是，当我在 branchA 上删除一个文件时，branchB 和 master 上的相同文件也会被删除。

这不是我所期待的。我希望在 master 和 branchB 上仍然有文件。

所以我的问题是

a) 这是预期的行为吗？b) 如果不是，那么出了什么问题？c) 出了什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T19:33:36.883

鉴于您有：分支**A**和分支**B**。

如果文件正在被两个分支跟踪`git`并且存在于两个分支中，那么在从分支**A**中删除它之后，它将保留在分支**B**上。

所以你的问题的答案是：**不，`git`不应该从不同于当前的分支中删除任何文件。**

我怀疑该文件没有被 git 跟踪，并且列在`git status`.

**更新**。如果这是可能的事情 - 你能包括输出`git status`吗？

# tags - 在php上的echo中插入echo

> ID：16124292
> 
> 赞同：0
> 
> 时间：2013-04-20T19:28:24.243
> 
> 标签：tags, echo, shortcode

我尝试在短代码中调用回声。这行代码是这样的：

```
<?php echo do_shortcode('[audio src="<?php echo $audio; ?>"]'); ?> 
```

完整的代码是这样的：

```
<?php if(get_post_meta($post->ID, '_format_audio_embed', true)!=''){ 
    $audio = get_post_meta($post->ID, '_format_audio_embed', true);
} else {
    $audio = '';    
}
?></h1>  

<?php echo do_shortcode('[audio src="<?php echo $audio; ?>"]'); ?> 
```

我的代码不起作用。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:07:49.880

Why are you using PHP inside PHP? Try to concat:

```
<?php echo do_shortcode('[audio src="'.$audio.'"]'); ?> 
```

# php - 如何在 Symfony2 的表单下拉列表中显示多对一关系？

> ID：16124299
> 
> 赞同：5
> 
> 时间：2013-04-20T19:29:18.633
> 
> 标签：php, forms, symfony, drop-down-menu, one-to-many

当我需要显示汽车与其品牌之间的 OneToMany 关系时，我有一个表格。

当我现在点击下拉菜单时，我只能看到车名。因为它是从汽车实体自动创建的。

我希望在下拉列表中看到的是 NameOfTheCar - NameOfTheBrand。对于每一个选择

我有一个像这样的 CarType：

```
$builder->add('cars', 'choice', array(
        'choices'   => array(
            'Test' => 'Example',
        ),
        'required'  => true,
    )); 
```

我怎样才能做到这一点 ？

编辑：我听从了雨果的建议。

现在我得到了

```
$builder->add('lake', 'entity', array(
            'class'     =>  'Pondip\KeepnetBundle\Entity\CatchReport',
            'required'  => true,
        )); 
```

而我的 __toString 的 CatchReport 是

```
 public function __toString()
    {
        return $this->car .' - '. $this->car->getBrand();
    } 
```

当湖是

```
/**
 * @var integer
 *
 * @ORM\ManyToOne(targetEntity="Pondip\CarBundle\Entity\Car")
 * @ORM\JoinColumn(name="car_id", referencedColumnName="id")
 * @Assert\NotBlank()
 */
private $car; 
```

在我的品牌实体中，我有：

```
 /**
     * @var integer
     * @Assert\Type(type="Pondip\CarBundle\Entity\Brand")
     * 
     * @ORM\ManyToOne(targetEntity="Pondip\CarBundle\Entity\Brand")
     * @ORM\JoinColumn(name="brand_id", referencedColumnName="id")
     */
    private $brand; 
```

现在我的 toString() 函数出现错误。我做错了什么 ？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-20T20:17:19.503

这样做的好方法是使用[“实体”](http://symfony.com/doc/current/reference/forms/types/entity.html)类型，解决整个问题有两个主要步骤。

### 第一步

```
$builder->add('cars', 'entity', array(
        'class' => 'MyBundle:Car',

        // 'property' => 'myCustom', -- The default is the __toString() (Enity file)

        'query_builder' => function(EntityRepository $er) {
            return $er->createQueryBuilder('c')
                ; // You can add anything else here or
                  // use an existing function of the repository file
    ),
    'required'  => true,
)); 
```

通常，您可以将键设置`property`为要使用的对象的属性，但在您的情况下，由于它有点复杂，您将不得不覆盖该`__toString()`方法或在返回值和 set 的对象上创建一个自定义属性`property => 'myCustom'`。

### 第二步：

在您的**实体文件**中，它不是存储库文件，而是 Cars.php 文件（具有 getter 设置器）。这是用于与 的映射`property`。

*   **第一：** *覆盖 toString*

    ```
    function __toString(){
        return $this->name . " - ". $this->brand;
    } 
    ```

*   **二：** *制作自定义方法*

    ```
    function getMyCustom(){
        return $this->name . " - ". $this->brand;
    } 
    ```

* * *

### 可选的

**对于`query_builder`领域。**
如果检索汽车的查询很复杂，您可能希望在汽车存储库中创建自定义方法。为了在构建器中进行尽可能简单的查询。这是为了检索将填充下拉列表的汽车列表。如果您只想检索所有汽车，您只需指定`->findAll()`.

* * *

### 更新

你的 __toString 的问题似乎是它不能调用函数（我不知道为什么）。试试这个：

```
function __toString(){ // CatchReport
    return $this->car

}

function __toString(){ // Car
    return $this->name . " - " . $this->brand

}

function __toString(){ // Brand
    return $this->name

} 
```

这样它永远不会使用对象，因此不能在空指针上返回异常

# objective-c - 将 NSUInteger 转换为 double 时的 ObjC 异常行为

> ID：16124310
> 
> 赞同：0
> 
> 时间：2013-04-20T19:30:33.690
> 
> 标签：objective-c, casting, double, negative-number, nsuinteger

当我否定 NSUInteger 并转换为双精度时，我遇到了一些奇怪的行为。

```
NSUInteger test = 10;
NSLog(@"%d", test);
NSLog(@"%f", (double) test);
NSLog(@"%d", -test);
NSLog(@"%f", (double) -test); 
```

输出是：

```
10
10.000000
-10
4294967286.000000 
```

任何想法为什么会这样？我正在使用 NSUInteger，因为这是从 [NSArray count] 返回的内容。我可以轻松地使用 int 而不是没有问题，我会的，但我非常好奇为什么会出现这种行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T19:35:13.440

因为`NSUInteger`是无符号整数类型。所以当它被否定时（`- test`仍然**是**一个无符号整数）。但是由于无符号整数不能保存负值，它会溢出并围绕模 2 的`CHAR_BIT * sizeof(NSUInteger)`th 次方。`NSUInteger`在您的平台上是 32 位长，所以您会得到`-10 mod 4294967296`正好是 4294967286。

# silverlight - WP7 - VirtualizingStackPanel 底部边距不起作用

> ID：16124311
> 
> 赞同：1
> 
> 时间：2013-04-20T19:30:34.203
> 
> 标签：silverlight, windows-phone-7, xaml, virtualizingstackpanel

我在 ListBox ItemsPanel 中有 VirtualizingStackPanel。如果我设置 Margin="0,0,0,50" 则不显示边距，但如果我设置左边距（或顶部或右边） Margin="50,0,0,0" 则边距正确。

如果我将 VirtualizingStackPanel 更改为 StackPanel，则底部边距效果很好。

这是我的代码：

```
<Grid x:Name="ContentPanel"
      Grid.Row="1"
      Margin="12,0,12,0">

  <ListBox x:Name="TasksListBox"
           Margin="0"
           ItemsSource="{Binding Tasks}"
           HorizontalAlignment="Stretch"
           ScrollViewer.VerticalScrollBarVisibility="Hidden">

    <ListBox.ItemsPanel>
      <ItemsPanelTemplate>
        <!--<StackPanel Margin="0,0,0,14" />-->
        <VirtualizingStackPanel Margin="0,0,0,100"
                                Height="Auto" />
      </ItemsPanelTemplate>
    </ListBox.ItemsPanel>

    <ListBox.ItemTemplate>
      <DataTemplate>

        <Button Background="White"
                Width="455"
                Height="105"
                Tag="{Binding Id}"
                HorizontalContentAlignment="Stretch"
                VerticalContentAlignment="Stretch"
                Click="Button_Click_1">

          <Grid HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch">

            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="Auto" />
              <ColumnDefinition Width="Auto" />
              <ColumnDefinition Width="Auto" />
              <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
              <RowDefinition Height="*" />
              <RowDefinition Height="24" />
            </Grid.RowDefinitions>

            <TextBlock Grid.ColumnSpan="4"
                       Text="{Binding Name}"
                       FontSize="24"
                       Foreground="#400000" />

            <Image Grid.Row="1"
                   Visibility="{Binding Project, Converter={StaticResource StringToVisibilityConverter}}"
                   Source="/Images/ProjectIcon.png"
                   Width="20"
                   Height="18"
                   HorizontalAlignment="Left"
                   VerticalAlignment="Top"
                   Margin="0,0,5,0" />

            <TextBlock Grid.Row="1"
                       Grid.Column="1"
                       Visibility="{Binding Project, Converter={StaticResource StringToVisibilityConverter}}"
                       Text="{Binding Project, Converter={StaticResource ToUppercaseConverter}}"
                       FontSize="16"
                       Foreground="#666666"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Top"
                       Margin="0,-2,9,0"
                       LineStackingStrategy="BlockLineHeight" />

            <Image Grid.Row="1"
                   Grid.Column="2"
                   Visibility="{Binding Context, Converter={StaticResource StringToVisibilityConverter}}"
                   Source="/Images/ContextIcon.png"
                   Width="20"
                   Height="18"
                   HorizontalAlignment="Left"
                   VerticalAlignment="Top"
                   Margin="-3,1,1,0" />

            <TextBlock Grid.Row="1"
                       Grid.Column="3"
                       Visibility="{Binding Context, Converter={StaticResource StringToVisibilityConverter}}"
                       Text="{Binding Context, Converter={StaticResource ToUppercaseConverter}}"
                       FontSize="16"
                       Foreground="#666666"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Top"
                       Margin="0,-2,0,0"
                       LineStackingStrategy="BlockLineHeight" />
          </Grid>

          <toolkit:GestureService.GestureListener>
            <toolkit:GestureListener Flick="GestureListener_Flick_1" />
          </toolkit:GestureService.GestureListener>

          <toolkit:ContextMenuService.ContextMenu>
            <toolkit:ContextMenu IsZoomEnabled="False"
                                 BorderBrush="#9c0605"
                                 Foreground="#400000">
              <toolkit:MenuItem Header="dokončeno"
                                Foreground="#400000"
                                Tag="{Binding Id}"
                                Click="MenuItem_Click_1" />
              <toolkit:MenuItem Header="upravit"
                                Foreground="#400000"
                                Tag="{Binding Id}"
                                Click="MenuItem_Click_2" />
              <toolkit:MenuItem Header="odstranit"
                                Foreground="#400000"
                                Tag="{Binding Id}"
                                Click="MenuItem_Click_3" />
            </toolkit:ContextMenu>
          </toolkit:ContextMenuService.ContextMenu>
        </Button>
      </DataTemplate>
    </ListBox.ItemTemplate>
  </ListBox>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T19:43:22.550

代码背后

```
 ObservableCollection<string> data = new ObservableCollection<string>();
 for (int i = 0; i < 40; i++)
 {
      data.Add("Item" + i);
 }
 lbTest.ItemsSource = data; 
```

Xaml

```
<Grid x:Name="LayoutRoot"
      Background="Transparent">

  <ListBox x:Name="lbTest">
    <ListBox.Style>
      <Style TargetType="ListBox">
        <Setter Property="Background"
                Value="Transparent" />
        <Setter Property="Foreground"
                Value="{StaticResource PhoneForegroundBrush}" />
        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility"
                Value="Disabled" />
        <Setter Property="ScrollViewer.VerticalScrollBarVisibility"
                Value="Auto" />
        <Setter Property="BorderThickness"
                Value="0" />
        <Setter Property="BorderBrush"
                Value="Transparent" />
        <Setter Property="Padding"
                Value="0,0,0,150" />
        <Setter Property="Template">
          <Setter.Value>
            <ControlTemplate TargetType="ListBox">
              <ScrollViewer x:Name="ScrollViewer"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Background="{TemplateBinding Background}"
                            Foreground="{TemplateBinding Foreground}"
                            Padding="{TemplateBinding Padding}">
                <ItemsPresenter />
              </ScrollViewer>
            </ControlTemplate>
          </Setter.Value>
        </Setter>
      </Style>
    </ListBox.Style>
  </ListBox>

</Grid> 
```

# javascript - 将表数据转换为数组（格式化）

> ID：16124313
> 
> 赞同：2
> 
> 时间：2013-04-20T19:30:40.550
> 
> 标签：javascript, html, asp.net-mvc-4, signalr, jquery-templates

我在`signalR`. 我从使用的控制器中调用了一种方法`signalR`。我的方法名称是`getAllDates()`.

请参阅下面以查看我的代码

```
 $.connection.hub.start().done(function () {
                booking.server.getAllDates().done(function (data) {
                    debugger;
                    var blogPosts = { Date: [data[0].Dates.toString(), data[1].Dates.toString(), data[2].Dates.toString(), data[3].Dates.toString(), data[4].Dates.toString()] }
                    $("#blogPostTemplate").tmpl(blogPosts).appendTo("#blogPostContainer");

                });
            }); 
```

我的`getAllDates()`方法从 Database 返回一些日期。该值在`data` **(function (data))**中返回。它运行良好。但我在 Jquery 模板中使用，所以我希望数据必须添加到数组中，并且看起来像某种格式。喜欢的格式

```
var blogPosts = { Date: [data[0].Dates.toString(), data[1].Dates.toString(), data[2].Dates.toString(), data[3].Dates.toString(), data[4].Dates.toString()] } 
```

我上面的代码正在运行。但我的代码不是标准的。因为我手动分配了所有值。请查看数据索引 `[data[0].Dates.toString(), data[1].Dates.toString(),`。我自己为索引分配了 0、1、2 等。但**我希望在使用代码编译时分配索引。**

任何人，你能帮我做这项工作吗？

对不起我的英语不好。如果有人理解我的问题，那么您应该编辑这个问题。否则，请告诉我您的疑问！

**回答：**

最后我完成了

```
var DateTempl = "";
$.connection.hub.start().done(function () {
                booking.server.getAllDates().done(function (data) {
                    debugger;
                    for (var i = 0; i < data.length; i++) {
                        if (i != data.length - 1) {
                            DateTempl = DateTempl.concat(data[i].Dates + ",");
                        }
                        else {
                            DateTempl = DateTempl.concat(data[i].Dates);
                        }
                    }
                    var blogPosts = { Date: [DateTempl] }
                    $("#blogPostTemplate").tmpl(blogPosts).appendTo("#blogPostContainer");

                });
            }); 
```

我曾经在 for 循环内的数组中连接和格式化日期。是唐！！是的 。做得好 ！！！！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T19:55:15.047

我从未使用过signalR，所以不确定这是否有帮助，但是您是否尝试过用变量替换数字？像 data[i] 而不是 data[0]，或者说 data[i+1]？然后我是否根据您的要求进行更改？

# spring-mvc - 终止实际的spring web flow执行

> ID：16124316
> 
> 赞同：0
> 
> 时间：2013-04-20T19:30:56.970
> 
> 标签：spring-mvc, spring-webflow, spring-webflow-2

是否可以在 spring mvc 上下文中确定实际运行流程并终止它？

我问的原因是，在我的商店网络应用程序中，整个结帐过程是一个网络流程，但标题菜单仍然可见，现在我遇到的问题是，如果单击菜单链接，流程就会退出，但我没有认不出来

我希望我想要什么是可以理解的，我感谢任何帮助解决这个问题:)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T19:20:10.567

如果我正确理解了您的问题-您想终止当前流程但仍然可以单击菜单-对吗？

如果是，请拥有一个由所有子流继承的全局公共流。然后，将其`flow`添加到每个流的标记中，其中`commonFlow`是全局流定义文件的名称或 ID。

```
parent="commonFlow" 
```

在这个全局流定义中，定义菜单选项的转换：

```
<global-transitions>
<!-- If Menus are triggered on flows, we end them first. -->
<transition on="menuClick" to="endCurrentFlowThenMenu"/>
</global-transitions> 
```

然后为菜单定义一个重定向：

```
<end-state id="endCurrentFlowThenMenu" view="flowRedirect:menuView"></end-state> 
```

但是，这仅在当前流是父/顶级流时才有效。如果它是一个子流，它会变得有点脏 - 你需要一个解决方法，以便首先结束所有子流：

```
<global-transitions>
<!-- If Menus are triggered on flows and subflows, we end them first. -->
<transition on="menuClick" to="endCurrentFlowThenMenuLevel1"/>
    <transition on="endCurrentFlowThenMenuLevel1" to="endCurrentFlowThenMenuLevel2"/>
</global-transitions> 
```

在这种情况下，您定义匹配的结束状态：

```
<end-state id="endCurrentFlowThenMenuLevel1" view="flowRedirect:newFlow">
</end-state>
<end-state id="endCurrentFlowThenMenuLevel2" view="flowRedirect:newFlow">
</end-state> 
```

我在每个最终状态上重复该属性的原因`view`是，即使当前流是顶级流，它仍然可以工作。根据最大最深子流，您需要有多个转换和结束状态来匹配它们（即，如果您最大最深功能可以有 2 个子流，请重复上述 3 次）。

这里的技巧是，如果当前流已经是顶级流，SWF 不会冒泡父级，而只会执行`flowRedirect`.

但是，如果当前流是子流，则 SWF 不会在子流上执行重定向，而是首先冒泡到父流，为刚刚结束的当前子流寻找匹配的转换。它将继续执行此操作，直到找到顶级流，在这种情况下它将执行重定向，从而有效地结束流程中的所有子流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-16T17:35:11.897

可以在流和子流之间共享全局转换，方法类似于上面的代码。

基本上，您必须定义一个抽象流，**commons-headers** ，在流标签内设置*abstract=true ，然后定义将在流/子流之间共享的**全局*转换，这些全局转换可以重定向到某种事件，在这个以*结束状态*为例。

调用流定义，**主流**，定义*子流状态*标签，这里必须写从被调用流，**子**流返回的过渡，它必须与*过渡*和*子流的结束状态标签*共享相同的*id*，这是完成子流并返回的方式到主流。如果您希望使用一些全局转换，那么您必须在*子流状态*标记内定义这些转换，为*主流的 on*属性和*全局流的 to*属性设置相同的值（在本例中为 loginEnd 和 signEnd）。最后一步，*主要流程的*属性必须与一些重合*******全局流状态 id*属性（在本例中再次为 loginEnd 和 signEnd）。******

 ****公地标头**

```
<flow xmlns="http://www.springframework.org/schema/webflow"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/webflow
    http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd"
abstract="true">

<end-state id="loginEnd" view="flowRedirect:login" />

<end-state id="signupEnd" view="flowRedirect:signup" />

<global-transitions>
    <transition on="login" to="loginEnd" />
    <transition on="signup" to="signupEnd"/>
</global-transitions> 
```

**主流**

```
<flow xmlns="http://www.springframework.org/schema/webflow"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="
    http://www.springframework.org/schema/webflow
    http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd"
    parent="commons-header">

<view-state id="inicio" view="main.xhtml">
    <transition on="manageSpace" to="adminSpaces" />

    <transition on="goSpace" to="visitSpace" />
</view-state>

<subflow-state id="visitSpace" subflow="space">
    <on-entry>
         <evaluate expression="space.showSpace(requestParameters.idSpace,flowRequestContext)" result="conversationScope.visitedSpace" />
    </on-entry>

    <transition on="finishSubFlow" to="inicio" />

    <transition on="loginEnd" to="loginEnd" />
    <transition on="registerEnd" to="registerEnd" />
</subflow-state>

<end-state id="error" view="flowRedirect:error" /> 
```

**子流**

```
<flow xmlns="http://www.springframework.org/schema/webflow"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/webflow
    http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd"
parent="commons-header">

<view-state id="showPicture" view="space_pictures.xhtml">

    <on-entry>
         <evaluate expression="multimediaProvider.showPages('picture')" result="viewScope.pagesList"/>
     </on-entry>

    <transition on="goMain" to="finishSubFlow" />
    <transition on="visit" to="visitPicturePage" />
</view-state>

    <view-state id="visitPicturePage" view="show_picturePage.xthml">
        <on-entry>
            <set name="flowScope.code" value="requestParameters.code" />
        </on-entry>
        <on-render>
             <evaluate expression="multimediaProvider.loadPage(flowScope.code)" />
        </on-render>

        <transition on="goMain" to="finishSubFlow" />       
    </view-state>

<end-state id="finishSubFlow" /> 
```**

# java - Java中的图片拼图游戏

> ID：16124318
> 
> 赞同：1
> 
> 时间：2013-04-20T19:31:23.323
> 
> 标签：java

这是我正在从事的高中项目。我找不到在框架上显示图像的方法。这是我的第一个问题。我相信我以后会有更多的问题。以下是我当前的代码。

第一部分：

```
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.ImageIcon;
import javax.swing.JApplet;

public class GameVer2 extends JApplet implements ActionListener{
    private int sizeOfGame = 16;
    private ImageIcon[] picts = {new ImageIcon("back.png"),
    new ImageIcon("field.png"),new ImageIcon("front.png"),
    new ImageIcon("gym.png"),new ImageIcon("mermaid.png"),
    new ImageIcon("mickey_pirate.png"),new ImageIcon("path.png"),
    new ImageIcon("tweety.png"),new ImageIcon("back.png"),
    new ImageIcon("field.png"),new ImageIcon("front.png"),
    new ImageIcon("gym.png"),new ImageIcon("mermaid.png"),
    new ImageIcon("mickey_pirate.png"),new ImageIcon("path.png"),
    new ImageIcon("tweety.png")};

    private GamePiece[] tiles = new GamePiece[sizeOfGame];
    private int[] tilesReady;
    private int turn = 0;
    private GamePiece[] data = new GamePiece[2];

    public GameVer2(){
        this.setVisible(true);
        this.setLayout(new GridLayout(4,4));
        buildGamePieces();
    }

    public void buildGamePieces(){
        for(int i=0; i<tiles.length; i++){
            tiles[i] = new GamePiece(picts[i],i);
            this.getContentPane().add(tiles[i]);
            tiles[i].addActionListener(this);
            tiles[i].setActionCommand(i+"");
            this.getContentPane().add(tiles[i]);
            tiles[i].getImage();
        }
    }
    @Override
    public void actionPerformed(ActionEvent arg0){
        System.out.println("hello");
    }

    public void init(){
        GameVer2 go = new GameVer2();
    }
} 
```

第二部分：

```
import javax.swing.ImageIcon;
import javax.swing.JButton;

public class GamePiece extends JButton{

    private ImageIcon image;
    private int id;

    //GamePiece b = new GamePiece("gym.png",1);
    //GamePiece c = new GamePiece("front.png",2);
    // b.match(c);

    public boolean match(GamePiece a){
        return this.getImage().toString().equals(a.getImage().toString());
    }

    public ImageIcon getImage(){
        return image;
    }

    public void setImage(ImageIcon image){
        this.image = image;
    }

    public int getID(){
        return id;
    }

    public void setId(int id){
        this.id = id;
    }

    public GamePiece (ImageIcon pict, int i){
        image = pict;
        id = i;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:38:52.153

添加`setIcon`到您的构造方法，然后进行相应的更改。

```
 public GamePiece (ImageIcon pict, int i){
        setIcon(pict);
    } 
```

还要确保 new ImageIcon() 中的图像文件位置正确。

# perl - 使用未初始化的值 $form_data{"BuildAcct"}

> ID：16124334
> 
> 赞同：0
> 
> 时间：2013-04-20T19:33:20.980
> 
> 标签：perl, form-data

*** 周日第二次更新***

现在在这一点上，我发现在显示所需的*sub*方面取得了一些额外的成功 。新的代码片段使我能够根据需要实际*调用*特定的*sub*。

在研究中，我偶然发现了以下处理读取传入**FORM**数据的片段。这个片段*确实*可以*调用*我从这个脚本中选择的*子*。但是，当我对脚本 运行**perl -x**时，系统会从 CLI返回以下*非致命*的*警告*，我想了解和解决这些问题。我的研究表明 **(tr///)**和 **$ENV{"REQUEST_METHOD"}**和**$buffer**正在返回空值*""* **OR** *0*。我将如何最好地解决以下这些错误？我意识到我可以删除任何对***(tr///)***和***$buffer***来解决这些错误，但是，我质疑删除 ***$ENV{"REQUEST_METHOD"}***因为这似乎对这个片段的功能是必要的？？？

***命令行错误***

> ```
> Use of uninitialized value in transliteration (tr///) at test.pl line 36 (#1)
> Use of uninitialized value $ENV{"REQUEST_METHOD"} in string eq at test.pl line 37 (#1)
> Use of uninitialized value $buffer in split at test.pl line 44 (#1) 
> ```

```
#!/usr/bin/perl -w
# (test.pl)

use DBI;
use DBD::mysql;
use warnings;
use strict;
use diagnostics;

$| = 1;

# The script I am wanting to create, is to allow users at (NAS) HotSpot to create a user account
# which is to write into MySQL db TABLE's *radcheck* and *radreply*.
#
# Now at this point I have found some added success at displaying the desired *sub*
# The new snippet of code which enabled me to actually *invoke* a specific *sub* as I wanted
# from an HTML form.
# Please see below for solution which still has some questions.

  print "Content-type: text/html\n\n";

  sub BuildAcctNow {
      print "<h1 style=\"color:blue;font-family:Arial;font-size:xx-large;\">TO BUILD YOUR ACCOUNT TODAY WE WILL NEED A SMALL AMOUNT OF INFORMATION</h1><br><br>\n\n";
  }

  sub PauseAcctNow {
      print "<h2 style=\"color:red;font-family:Arial;font-size:xx-large;\">YOUR ACCOUNT HAS BEEN PAUSED PLEASE MAKE A PAYMENT HERE.</h2><br><br>\n\n";
  }

#  In researching I stumbled upon the fllowing snippet which deals with reading inward FORM data.
#  This snippet *does* enable the *invocation* of the *sub* of my choice from this script.
#  However from the CLI when I run perl -x against the script the system returns the following
#  *nonfatal* *warnings* that I would like to gain understading of and resolve.
#  My research shows that  (tr///) and  $ENV{"REQUEST_METHOD"} and $buffer are returning empty
#  values, How would I best resolve these following errors? I realize I can just delete any
#  reference to (tr///) and $buffer to resolve those errors, howerver I question removing
#  $ENV{"REQUEST_METHOD"} as it seems this imperative to the function of th ssnippet???
#
#
#  Use of uninitialized value in transliteration (tr///) at test.pl line 36 (#1)
#  Use of uninitialized value $ENV{"REQUEST_METHOD"} in string eq at test.pl line 37 (#1)
#  Use of uninitialized value $buffer in split at test.pl line 44 (#1)

    my ($buffer, @pairs, $pair, $name, $value, %FORM);

    # Read in text
    $ENV{'REQUEST_METHOD'} =~ tr/a-z/A-Z/;
    if ($ENV{'REQUEST_METHOD'} eq "POST")
    {
        read(STDIN, $buffer, $ENV{'CONTENT_LENGTH'});
    }else {
        $buffer = $ENV{'QUERY_STRING'};
    }
    # Split information into name/value pairs
    @pairs = split(/&/, $buffer);
    foreach $pair (@pairs)
    {
        ($name, $value) = split(/=/, $pair);
        $value =~ tr/+/ /;
        $value =~ s/%(..)/pack("C", hex($1))/eg;
        $FORM{$name} = $value;
    }

  if ($FORM{PauseAcct}) {
  PauseAcctNow();
  exit;
  }

 elsif ($FORM{BuildAcct}) {
  BuildAcctNow();
  exit;
  } 
```

***第二个星期日更新结束***

****周日更新**** 我制作了一个简单的脚本，希望能展示我目前正在尝试做的事情？我最终需要创建的脚本将写入 MySQL db 到*radcheck*和*radreply*中，以使用户能够登录（NAS）HotSpot。所以我将在脚本中有多个子例程。**

 ***当我在名为BuildAcct*的文档中使用带有正确命名的 SUBMIT 表单的 HTML 文档时，该脚本目前显示一个空白屏幕 VIA 浏览器。

我传统上习惯于在脚本中定义*子*，然后我会在脚本中定义*if*测试，它会在与任何定义的表单名称交互时等待匹配，然后调用特定的*子*。

*下面是我创建的一个测试脚本，只是为了在调用sub*时摆脱 & 的过时使用，这让我有些悲伤，我希望能提供一些有价值的输入。

```
#!/usr/bin/perl -w
# (test.pl)

use DBI;
use DBD::mysql;
use warnings;
#use strict;
# Presently due to my errors below I have disabled *use strict*.

$| = 1;

# The script I am wanting to create, is to allow users at (NAS) HotSpot to create a user account
# which is to write into MySQL db TABLE's *radcheck* and *radreply*.
#
# Trying to bring myself up to speed with a very basic task which I have defined below, in my
# older scripts I would define the *sub* itself, then in the script I would use an *if* test
# which checks to see if any defined FORM value returns a hit such as $form_data{'BuildAcct'} ne ""
# to call the required *sub* _ThisOne_.

  print "Content-type: text/plain\n\n";

  sub ThisOne {
      print "Trying to display this subroutine upon submission of BuildAcct\n";
  }

#  Following is the *if* test I am accustomed to using to make a call to a particular sub when
#  the form NAME BuildAcct is interacted with, but this is unacceptable now I realize.
#  CLI Return:
#  Use of uninitialized value $form_data{"BuildAcct"} in string ne at test.pl line 32.
#  Use of uninitialized value $form_data{"BuildAcct"} in string ne at test.pl line 41.

  if ($form_data{'BuildAcct'} ne "")
  {
  &ThisOne;
  exit;
  }

# SO, I have Google'd, and looked over numerous methods of calling *subs*, I am just stuck though,
# Why can't the following *if* test work if use of & is no longer used?

  if ($form_data{'BuildAcct'} ne "")
  {
  ThisOne();
  exit;
  } 
```

提前感谢您的帮助...最好的问候

****更新 ****
我已经关闭了脚本上的 -w 开关，不确定这是否会造成负面影响，这对 perl 来说很新。**

 **我还创建了一些丑陋的笨重代码。奇怪的是，当我从 CLI 执行脚本时系统返回：

```
Use of uninitialized value $form_data{"BuildAcct"} in string at acctmanager.pl line 211.
Use of uninitialized value $form_data{"Test"} in string at acctmanager.pl line 212\. 
```

然而，来自 HTML 文档的 VIA 浏览器我可以在*BuildAcct*和*Test*之间来回更改**SUBMIT**名称值，并且脚本在提交时成功返回两个不同且正确的子例程。

 ***BuildAcct*子程序返回我在该子例程中定义的表单字段，而Test*执行*MySQL TABLE GROUP 行提取并显示来自 db 的 3 个不同的表并将它们打印到浏览器。

下面是我现在的代码:-(

```
local ($form_data{'BuildAcct'}) = "$form_data{'BuildAcct'}";
local ($form_data{'Test'}) = "$form_data{'Test'}";
                #
                # AddNewUser FORM definition.
if ($form_data{'BuildAcct'} ne "")
   {
   &AddNewUser;
   exit;
  }
                 #
                 # DispTest FORM definition.
elsif ($form_data{'Test'} ne "")
   {
   &DispTest;
   exit;
  } 
```

有人可以帮我推动正确的方向吗？

提前谢谢你

```
 ORIGINAL POST 
```

此时，我在名为*BuildAcct*的 HTML 文档上有一个 FORM ，同样在我的脚本中，我定义了以下内容，即当用户提交 HTML FORM 时调用子例程*AddNewUser ...*

```
 if ($form_data{'BuildAcct'} ne "")
   {
   &AddNewUser;
   exit;
  } 
```

该脚本使用*cgi-lib.pl*

```
# Enable parsing of FORM_DATA VIA cgi-lib.pl.
 &ReadParse(*form_data);

## FORM or IMG FORM Fix
foreach (keys %form_data)
 {

## Fix incoming form data with Image buttons
 $form_data{$1} = $form_data{$_} if (/(.*)\.x/);
 } 
```

我不明白的是为什么这在我使用的另一个脚本中起作用，但是这个新脚本在 CLI 执行时返回以下内容；

```
Use of uninitialized value $form_data{"BuildAcct"} in string ne at acctmanager.pl line 208.
Use of uninitialized value $form_data{"Test"} in string ne at acctmanager.pl line 215. 
```

非常感谢您的帮助和建议。此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:36:39.077

我最好的猜测是`%form_data`哈希是通过 cgi-lib.pl 填充的，因此当你通过命令行运行它时，cgi-lib.pl 没有从网络浏览器获得任何输入......话虽如此，你还没有t 包括您使用 cgi-lib.pl 的代码，所以我不能确定。

ps*不要*关闭警告。他们在那里是有原因的。如果不出意外，您可以将警告粘贴到谷歌。当您使用它时，请始终将其放在`use strict;`脚本的顶部，并修复所有未声明的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-10T12:10:45.353

要修复错误“在字符串中使用未初始化的值 $form_data{"BuildAcct"}”，

在使用 $form_data{"BuildAcct"} 之前，您可以使用如下所示的 defined($form_data{"BuildAcct"}) 或定义的 $form_data{"BuildAcct"} 进行检查：

> if (defined $form_data{"BuildAcct"}) { <其他代码基于$form_data{"BuildAcct"} > }******

# user-interface - Matlab 看不到工作区的变量

> ID：16124335
> 
> 赞同：1
> 
> 时间：2013-04-20T19:33:23.917
> 
> 标签：user-interface, workspace, matlab

我的工作区有问题。我试图在工作区上查看我的 GUI 变量，但我不能！例如，我运行一个 .m 文件 gui 并打开界面。例如，我打开任何图像并对某种图像进行图像处理。但我看不到工作区中出现任何变量。我不想使用保存变量（因为我的主管的要求）。有没有办法在工作区 GUI m 文件上看到它。我能用这个做什么，有什么想法吗？

现在谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T19:44:01.820

您看到的常用工作区通常称为**基本**工作区（请参阅“[基本和功能工作区](http://www.mathworks.co.uk/help/matlab/matlab_prog/base-and-function-workspaces.html)”）。然后，任何函数都有自己独立的工作区，这意味着您可以显式返回带有输出参数的变量：

```
out = foo(in)
... 
```

或者您可以`assignin()`与附加到按钮的回调结合使用以将变量推送到基础工作区（有关更多详细信息，请参阅此技术解决方案“[如何在 MATLAB 7.8 (R2009a) 中将变量从 GUI 输出到工作区？](http://www.mathworks.co.uk/support/solutions/en/data/1-9FZUOY/index.html?product=SL&solution=1-9FZUOY) ”。

最终，如果您阅读“[程序化 GUI 中的数据管理](http://www.mathworks.co.uk/help/matlab/creating_guis/ways-to-manage-data-in-a-programmatic-gui.html)”，这将是一笔不错的投资。

# regex - 连接两个正则表达式

> ID：16124336
> 
> 赞同：-2
> 
> 时间：2013-04-20T19:33:26.277
> 
> 标签：regex, notepad++

我正在尝试将两个单独工作的正则表达式连接到一个，然后使用记事本++将它们更改到位。我有如下数据：

```
3 blablbalb [308] abababab 
```

对于 blablbalb，我正在使用它：

```
((?<=^\d ).*?(?= \[)) 
```

对于 abababab 这个：

```
((?<=\] ).*?$) 
```

有可能连接它们吗？将它们替换为

```
\2\3\1 
```

其中 \3 将是 [308]

所以输出将是：

```
3 abababab [308] blablbalb 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:50:25.550

为什么不使用：

```
(?<=^\d )(.*?)(\[.*?])(.*?)$ 
```

之后你可以切换它们。

# android - 滚动时 Gridview 项目的背景资源

> ID：16124338
> 
> 赞同：2
> 
> 时间：2013-04-20T19:34:06.707
> 
> 标签：android, android-layout, android-gridview, android-resources

我有一个填充了项目的 GriView，在单击 gridview 上的项目时，我将背景资源更改为我在 res 文件夹中的图像。我的问题是滚动并返回所选项目时，它不再具有背景资源。相反，gridview 的其他一些项目获得了背景。

在我的 onCreate 方法中，我有以下代码来填充我的 GridView：

**编辑**根据我得到的建议，我创建了一个自定义适配器并填充了 gridview。我现在遇到的问题是，我的 gridView 元素现在没有被填充。当我设置我的适配器时，我传递了一个布尔数组和一个数据数组。数据数组包含应该用于填充 GridView 的所有数据，布尔数组用于确定是否选择了网格项。

**编辑**：即使在滚动后，已选择的 GridView 元素现在也会突出显示，但现在其他从未被选择的元素似乎被突出显示。

这是适配器类：

```
public class HoursAdapter extends BaseAdapter {

    private Context mContext;
    private boolean isSelected[];
    private String hours[];
    public HoursAdapter(Context c, boolean selected[], String hours[]){
        this.isSelected = selected;
        this.mContext = c;
        this.hours = hours;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return hours.length;
    }

    @Override
    public Object getItem(int arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int arg0) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int arg0, View convertView, ViewGroup arg2) {
        // TODO Auto-generated method stub
        ViewHolder holder = null;
         if(convertView==null){
            LayoutInflater vi = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = vi.inflate(R.layout.hourview_item, null);
            holder = new ViewHolder();
            holder.hours =(TextView) convertView.findViewById(R.id.hours_text);
            convertView.setTag(holder);
         }else{
            holder = (ViewHolder)convertView.getTag(); 
         }
         if(isSelected[arg0-1])
          holder.hours.setBackgroundResource(R.drawable.item_background_focused);

         holder.hours.setText(hours[arg0-1]);
        return convertView;
    }

    static class ViewHolder{
        TextView hours;
    }

} 
```

这是我设置适配器的代码：

```
 HoursAdapter adapter = new HoursAdapter(this,isSelected,data);

    hoursView.setAdapter(adapter);

hoursView.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> parent, View v, int position,
            long id) {
        // TODO Auto-generated method stub
        v.setBackgroundResource(R.drawable.item_background_focused);
    }
}); 
```

我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:26:36.470

似乎您没有考虑在适配器中视图回收是如何工作的。使用适配器视图在滚动期间被回收，即用于呈现您刚刚单击的项目的相同视图，应该在滚动操作后重新用于呈现另一个项目。

您应该定义自己的适配器类并自己管理选中/未选中状态（例如：使用具有相同数据大小的布尔数组）并通过`BaseAdapter.getView(int, View, ViewGroup)`. 这是一个非常基础的话题，您将在[Android 官方开发者门户上获得大量教程和参考资料](https://developer.android.com)

# eclipse - 如何在mac上打开多个Spring STS实例

> ID：16124339
> 
> 赞同：6
> 
> 时间：2013-04-20T19:34:13.040
> 
> 标签：eclipse, macos

每当我双击 STS 图标时，它都会再次打开同一个实例。

如何打开多个实例？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-06-19T13:30:42.377

另请查看可从命令行使用的 open 命令。特别是， open -n any.app 将打开应用程序的一个新实例，即使一个已经在运行。这将适用于任何应用程序，而不仅仅是为您提供了方便的 shell 脚本的 STS 或 eclipse。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-20T21:11:15.357

[在这里](https://stackoverflow.com/questions/118243/open-multiple-eclipse-workspaces-on-the-mac)找到答案

所以

转到 eclipse 安装目录并从命令行运行以下命令：

```
./STS & 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-08-23T06:25:48.570

最简单的方法是使用带有 -n 参数的 open 命令

```
 1\. Open terminal
 2\. cd /Applications/
 3\. open -n STS.app/ 
```

相同的命令可用于打开 2 个 eclipse 实例。但是第三个命令应该是 open -n Eclipse.app/

使用此命令，我们可以打开任意数量的实例。

希望能帮助到你！

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-04-29T16:50:47.593

以下是对我有用的步骤

1.  转到 STS 文件夹
2.  右键单击 STS 文件并选择显示包内容
3.  转到内容-> MacOS
4.  右键单击 STS 并选择制作别名

完成上述步骤后。在 sts 级别的某处复制别名并单击它以启动另一个 sts 实例。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-01-10T23:44:08.333

您只需要在终端中输入：

$`open -n /Applications/STS.app`

如果您只想写一个单词，也许您需要一个别名，请输入：

$`nano .bash_profile`或`nano .zsh`

并添加下一行：

```
alias spring="open -n /Applications/STS.app" 
```

关闭并保存，只需键入：

$`source ~/.bash_profile`或`source ~/.zsh`

关闭终端，打开并输入：

$`spring`

# android - 如何使用 Android 设置带有分隔符的自定义 ListView？

> ID：16124342
> 
> 赞同：5
> 
> 时间：2013-04-20T19:34:18.607
> 
> 标签：android, listview, pull-to-refresh

我想在我的 android 应用程序中实现 Pull to Refresh 功能，所以我实现了这个库：[Android-PullToRefresh](https://github.com/chrisbanes/Android-PullToRefresh)。但是，我似乎无法设置自定义样式以编程方式进行划分。

代码很简单：

```
list = (PullToRefreshListView) findViewById(R.id.list);
int[] colors = {0, 0xFF97CF4D, 0}; 
list.setDivider(new GradientDrawable(Orientation.RIGHT_LEFT, colors));
list.setDividerHeight(1); 
```

但是，它抛出了这个错误：`The method setDivider(GradientDrawable) is undefined for the type PullToRefreshListView`和`The method setDividerHeight(int) is undefined for the type PullToRefreshListView.`

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T19:44:55.637

`PullToRefreshListView`不是 a `ListView`，因此该错误。您应该访问`ListView`内部`PullToRefreshListView`并在其上调用`setDivider*`方法。

```
list = (PullToRefreshListView) findViewById(R.id.list);
int[] colors = {0, 0xFF97CF4D, 0};
ListView inner = list.getRefreshableView();
inner.setDivider(new GradientDrawable(Orientation.RIGHT_LEFT, colors));
inner.setDividerHeight(1); 
```

作为替代方案，您可以将渐变定义为 XML 可绘制对象，并在布局中正确设置属性，如此处的示例[所示](https://github.com/chrisbanes/Android-PullToRefresh/blob/master/sample/res/layout/activity_ptr_list.xml)

例如：

```
<com.handmark.pulltorefresh.library.PullToRefreshListView
  android:divider="@drawable/fancy_gradient"
  android:dividerHeight="@dimen/divider_height"... 
```

# ruby-on-rails - 无法访问 rails 生成的 json 文件

> ID：16124343
> 
> 赞同：0
> 
> 时间：2013-04-20T19:34:21.017
> 
> 标签：ruby-on-rails, json

我有一个 rails 应用程序，它显示属于用户选择的类别的地点列表。控制器的 index 方法包含以下相关代码：

```
@pois = PoiCategory.find(params[:id]).pois.order("name")  
@json = @pois.to_gmaps4rails do |poi, marker|
   marker.infowindow render_to_string(:partial => "/pois/infowindow", 
   :locals => {:poi => poi})
   marker.title "#{poi.name}"
   marker.json({ :name => poi.name })
end
respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @pois }
end 
```

结尾

此页面的 url 以 host/pois?id=x 结尾，其中 x 是类别 ID 集中的某个整数。据我了解，json文件的地址应该只是添加了“.json”。例如，host/poi/3.json 显示来自 poi 显示页面的 json 文件。jhost/pois?id=13.json 但是不起作用。

如果可能的话，我不喜欢使用会话变量来代替参数。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:59:09.843

肯定是

```
jhost/pois.json?id=13 
```

# c# - c# 如何让这段代码比案例场景更高效

> ID：16124345
> 
> 赞同：-1
> 
> 时间：2013-04-20T19:34:25.313
> 
> 标签：c#, case

我正在编写一个简单的水果机，这是我的方法之一，我想知道是否可以使这段代码更高效：（在使用案例之前，我有一个 if / else if 语句）

_intNudgeCount 得到一个介于 0 - 9 之间的数字，因此是这种情况。

```
public void DrawNudgeCount()
    {
        switch (_intNudgeCount)
        {
            case 9:
                pictureBoxNudgeCount.Image = Properties.Resources._9;
                break;
            case 8:
                pictureBoxNudgeCount.Image = Properties.Resources._8;
                break;
            case 7:
                pictureBoxNudgeCount.Image = Properties.Resources._7;
                break;
            case 6:
                pictureBoxNudgeCount.Image = Properties.Resources._6;
                break;
            case 5:
                pictureBoxNudgeCount.Image = Properties.Resources._5;
                break;
            case 4:
                pictureBoxNudgeCount.Image = Properties.Resources._4;
                break;
            case 3:
                pictureBoxNudgeCount.Image = Properties.Resources._3;
                break;
            case 2:
                pictureBoxNudgeCount.Image = Properties.Resources._2;
                break;
            case 1:
                pictureBoxNudgeCount.Image = Properties.Resources._1;
                break;
            case 0:
                pictureBoxNudgeCount.Image = Properties.Resources._0;
                break;
        }
    } 
```

提前致谢！

解决了：

没关系，我把它简化为 3 行代码：

//在类的顶部声明资源图像。

```
private System.Drawing.Image[]  _arrayNudgeCount; 
```

//加载类时填充数组。

```
_arrayNudgeCount = new System.Drawing.Image[] { Properties.Resources._0, Properties.Resources._1}; 
```

//重绘图片

```
public void DrawNudgeCount()
{
pictureBoxNudgeCount.Image = _arrayNudgeCount[_intNudgeCount];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T04:00:11.487

I would have reduced it to just one line of code I were you!

```
pictureBoxNudgeCount.Image = (Image)Properties.Resources.ResourceManager.GetObject("_" + _intNudgeCount); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T20:13:49.177

将您的图像放在应用程序旁边的文件夹中并调用 pictureBoxNudgeCount.Load(ConstantSectionPath+_intNudgeCount+".jpg"); 如果 jpg 是您的文件扩展名。

# sql - SQL 检索关联表中的值并对其执行算术运算

> ID：16124350
> 
> 赞同：0
> 
> 时间：2013-04-20T19:34:43.140
> 
> 标签：sql, postgresql, subquery

我有两个表，如下所示，我试图在一个 sql 查询中获取参与者的时间（finish_time - start_time）。请注意，开始时间和结束时间需要从名为race_events 的关联表的发生_at 列中检索。

```
PARTICIPANTS
  id  | membership_id | race_id 
------+---------------+---------
 1133 |           547 |     690
 1121 |           342 |     690

RACE_EVENTS
  id  | participant_id | event_type |  occurred_at  
------+----------------+------------+---------------
 1075 |           1121 | start      | 1366249860579
 1077 |           1121 | finish     | 1366249968936
 1104 |           1133 | start      | 1366250760128
 1107 |           1133 | finish     | 1366250876237 
```

我不知道如何使用连接来实现这一点，所以我使用这样的子查询解决了这个问题：

```
SELECT 
(select occurred_at from race_events where participant_id = participants.id and event_type = 'start') as started_at,
(select occurred_at from race_events where participant_id = participants.id and event_type = 'finish') as finished_at, 
participants.* FROM "participants" 
```

这让我大部分时间都得到了一个包含每个参与者的开始和结束时间的结果：

```
 started_at   |  finished_at  |  id  | membership_id | race_id 
---------------+---------------+------+---------------+---------
 1366250760128 | 1366250876237 | 1133 |           547 |     690
 1366249860579 | 1366249968936 | 1121 |           342 |     690 
```

理想情况下，虽然我也想在这个查询中计算 race_time (finished_at - started_at)，所以结果看起来像上面，但有一个名为 race_time 的附加列，其中包含该行的 (finished_at - started_at) 的结果。谁能建议我怎么做？

在相关说明中，我不相信使用子查询获取关联值的一般方法是最干净或最有效的，我非常感谢其他建议。

我正在使用 PostgreSQL，但我怀疑任何 SQL 数据库的答案都是一样的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:52:56.573

您需要参加两次race_events

```
select somefields, finished.occurred_at - started.occurred_at duration
from participants p join race_events started on p.race_id = started.race_id
and event_type = 'start'
join race_events finished on p.race_id = started.race_id
and event_type = 'finish'
where whatever 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T19:56:14.543

试试这个，但被告知我没有尝试过，它可能有一些语法错误，但你应该明白这一点

```
SELECT 
    re1.occured_at as started_at, 
    re2.occured_at as finished_at,
    (re2.occured_at - re1.occured_at) as race_time,
    p.id,
    p.membership_id,
    p.race_id

participant_id FROM PARTICIPANTS p 
INNER JOIN RACE_EVENTS re1 ON re1.participant_id = p.id AND re1.event_type = 'start'
INNER JOIN RACE_EVENTS re2 ON re2.participant_id = p.id AND re2.event_type = 'finish' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T20:19:08.927

```
select
    started_at, finished_at,
    finished_at - started_at race_time,
    p.id, p.membership_id, p.race_id
from
    participants p
    inner join
    race_events res on p.id = res.participant_id
    inner join
    race_events ref on p.id = ref.participant_id
where
    res.event_type = 'start'
    and ref.event_type = 'finish' 
```

我认为您的模型不好，并且您缺少比赛表和race_events 表中的race_id 列。

# javascript - 使用文本框和按钮制作帐户系统

> ID：16124355
> 
> 赞同：-1
> 
> 时间：2013-04-20T19:35:02.430
> 
> 标签：javascript, html

我一直在尝试使用文本框和按钮制作登录系统。您应该在文本框中输入密码，然后按下按钮，但是当我这样做时没有任何反应。到目前为止，这是我的代码：

```
<html>
<body>
<script type="text/javascript">
function EnterPwerd() {
var pass= input = document.getElementById("text")
if ( (pass=='bacon') ) {
document.write("BACON is so good.")
}
else {
document.write("You put the wrong password you taco biscuit!")
}
</script>
<div id="text"><input type="text" value="" size="10" maxlength="15"></civ>
<input type="button" value="Enter" onClick="EnterPwerd()">
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T19:47:43.913

```
<div id="text">
    <input id="password" type="password" value="" size="10" maxlength="15">
</div>
<input id="button" type="button" value="Enter">

var passbox = document.getElementById("password");

function enterPwerd() {
    var pass = passbox.value;

    if (pass === 'bacon') {
        alert("BACON is so good.")
    } else {
        alert("You put the wrong password you taco biscuit!")
    }
}

document.getElementById("button").addEventListener("click", enterPwerd, false); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/Lj2EV/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T19:42:29.433

如果要获取输入元素值，则需要获取输入元素 id。尝试这个：

```
<html>
<head>
    <script type="text/javascript">
        function EnterPwerd() {
            var pass = document.getElementById("text").value;
            if ( (pass=='bacon') ) {
                document.write("BACON is so good.");
            }
            else {
                document.write("You put the wrong password you taco biscuit!");
            }
        }
    </script>
</head>
<body>
    <input type="text" value="" size="10" maxlength="15"  id="text">
    <input type="button" value="Enter" onClick="EnterPwerd()">
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T19:44:47.917

```
your closing div is a typo (</civ>)
You can better do as
Add an id of textbox
<div id="text"><input type="text" value="" size="10" maxlength="15" id= "pwd"></div>

hold password as
var pass= document.getElementById("pwd")

also for password use type="password" to hide letters 
```

# xamarin.ios - Monotouch - 手机不会振动

> ID：16124360
> 
> 赞同：2
> 
> 时间：2013-04-20T19:35:45.690
> 
> 标签：xamarin.ios, xamarin

调用振动方法时，我似乎无法让我的手机振动。

SystemSound.Vibrate.PlaySystemSound();

看起来有一个显示相同内容的错误提交，但我不敢相信它还没有被修复。 [https://bugzilla.xamarin.com/show_bug.cgi?id=7983](https://bugzilla.xamarin.com/show_bug.cgi?id=7983)

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:42:42.800

你是从 UI 线程调用它吗？
我了解到 API 的许多问题在 UI 线程中通过使用`InvokeOnMainThread`

# shell - 在 SSH 的 shell 中结合管道和此处的文档

> ID：16124361
> 
> 赞同：1
> 
> 时间：2013-04-20T19:35:52.000
> 
> 标签：shell, ssh

好的，所以我最近发现了将标准输入样式行输入交互式命令的此处文档的魔力。但是，我正在尝试将它与 SSH 一起使用在远程服务器上执行一堆命令，但我还需要在执行额外命令之前输入一些实际输入，以进一步混淆问题我还需要得到一些结果背部 ;）

这是我正在尝试使用的内容：

```
#!/bin/sh
RESULT=$(find -type f "$PATH" | gzip | ssh "$HOST" <<- 'REMOTE_SYNC'
    cat > "/tmp/.temp_file"

    # Do something with /tmp/.temp_file
REMOTE_SYNC 
```

这真的正确吗？我遇到的部分问题是我需要将数据通过管道传输到 /tmp 中的那个文件，但我真的应该生成一个随机命名的临时文件，但我不确定我该怎么做，分配变量的名称（所以我可以回到它）并仍然将标准输入发送到它。

我也可以提取 find | gzip 部分到一个单独的命令首先在本地运行，因为 gzip 压缩的文件可能足够小，以至于在准备好时发送它会导致更短的 SSH 连接，然后在它生成时发送它，但它仍然无法解决这个事实我需要能够向 SSH 提供标准输入和我的额外命令。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T20:23:18.967

不，你不能这样。heredoc 和管道输入都竞争标准输入，只有一个获胜。看这个例子：

```
echo test | cat << EOF
TEST
EOF 
```

这会打印什么？`test`，`TEST`或两者兼而有之？它打印`TEST`，因此heredoc 获胜（至少在bash 中）。

反正你真的不需要这个。幸运的是，它`ssh`接受了一个[`command`](http://www.linuxmanpages.com/man1/ssh.1.php)参数，该参数将传递给远程主机上的 shell，因此您可以在此处将命令用作字符串。所以是这样的：

```
echo TEST | ssh user@host 'cat > tempfile; cat tempfile; rm tempfile' 
```

会起作用（尽管它没有多大意义），左侧命令的输出通过管道传输`ssh`到远程主机并在那里作为标准输入提供。

如果您希望在通过 ssh 发送数据时压缩数据，您可以使用该`-C`选项启用压缩。

* * *

编辑：

在字符串中使用换行符非常好，所以这也很好：

```
echo TEST | ssh user@host '
    cat > tempfile
    cat tempfile
    rm tempfile
' 
```

与heredoc 的唯一区别是您必须转义引号。

如果您使用类似的东西`echo TEST | ssh user@host "$(<script.sh)"`可以将所有内容写入文件...

# java - 如何使用 blueimp jQuery 文件上传：Struts 2 中的空文件上传结果，文件项为空

> ID：16124366
> 
> 赞同：4
> 
> 时间：2013-04-20T19:36:10.673
> 
> 标签：java, jquery, file-upload, struts2, blueimp

我正在使用 Blueimp，服务器端是 Java、Struts2。我找不到使用 Java 的示例，无论如何我设法使用了示例代码，但是`"Empty file upload result"`当我尝试上传单个文件时我也得到了。HTML部分是一样的，我不在这里粘贴，因为它可能会很长。

**jQuery是：**

```
$(document).ready(function () {
    'use strict';

    // Initialize the jQuery File Upload widget:
    $('#fileupload').fileupload();

    // Enable iframe cross-domain access via redirect option:
    $('#fileupload').fileupload(
        'option',
        'redirect',
        window.location.href.replace(
            /\/[^\/]*$/,
            '/cors/result.html?%s'
        )
    );

    if (window.location.hostname === 'blueimp.github.com') {
        // Demo settings:
        $('#fileupload').fileupload('option', {
            url: '//jquery-file-upload.appspot.com/',
            maxFileSize: 5000000,
            acceptFileTypes: /(\.|\/)(gif|jpe?g|png)$/i,
            process: [
                {
                    action: 'load',
                    fileTypes: /^image\/(gif|jpeg|png)$/,
                    maxFileSize: 20000000 // 20MB
                },
                {
                    action: 'resize',
                    maxWidth: 1440,
                    maxHeight: 900
                },
                {
                    action: 'save'
                }
            ]
        });
        // Upload server status check for browsers with CORS support:
        if ($.support.cors) {
            $.ajax({
                url: '//jquery-file-upload.appspot.com/',
                type: 'HEAD'
            }).fail(function () {
                $('<span class="alert alert-error"/>')
                    .text('Upload server currently unavailable - ' +
                            new Date())
                    .appendTo('#fileupload');
            });
        }
    } else {
        // Load existing files:
        $('#fileupload').each(function () {
            var that = this;
            $.getJSON(this.action, function (result) {
                if (result && result.length) {
                    $(that).fileupload('option', 'done')
                        .call(that, null, {result: result});
                }
            });
        });
    }

}); 
```

**那个行动：**

```
@Namespace("/")
@InterceptorRefs({
  @InterceptorRef("fileUpload"),
  @InterceptorRef("basicStack")
})
public class UploadAction extends ActionSupport implements ServletRequestAware, ServletResponseAware{

    HttpServletRequest req;
    HttpServletResponse res;
  //  private File fileUploadPath=new File("c:\\temp\\");
    private List<File> uploads = new ArrayList<File>();
    private List<String> uploadFileNames = new ArrayList<String>();
    private List<String> uploadContentTypes = new ArrayList<String>();

    public List<File> getUploads() {
        return uploads;
    }

    public void setUploads(List<File> uploads) {
        this.uploads = uploads;
    }

    public List<String> getUploadFileNames() {
        return uploadFileNames;
    }

    public void setUploadFileNames(List<String> uploadFileNames) {
        this.uploadFileNames = uploadFileNames;
    }

    public List<String> getUploadContentTypes() {
        return uploadContentTypes;
    }

    public void setUploadContentTypes(List<String> uploadContentTypes) {
        this.uploadContentTypes = uploadContentTypes;
    }

    @Action(value="upload", results = { @Result(name="success", type="json")
    })
    public String uploadFiles() throws IOException
    {
        System.out.println("upload1");
        System.out.println("files:");
        for (File u: uploads) {
            System.out.println("*** "+u+"\t"+u.length());
        }
        System.out.println("filenames:");
        for (String n: uploadFileNames) {
            System.out.println("*** "+n);
        }
        System.out.println("content types:");
        for (String c: uploadContentTypes) {
            System.out.println("*** "+c);
        }
        System.out.println("\n\n");
        if (!ServletFileUpload.isMultipartContent(req)) {
            throw new IllegalArgumentException("Request is not multipart, please 'multipart/form-data' enctype for your form.");
        }
        return SUCCESS;
    }

    @Override
    public void setServletRequest(HttpServletRequest hsr) {
        this.req=hsr;
    }

    @Override
    public void setServletResponse(HttpServletResponse hsr) {
        this.res=hsr;
    }

} 
```

正如我所说，我已经更改了操作文件，但我仍然得到文件的所有空值，并且在 Firebug 的 GET 响应中我看到了`"Request is not multipart, please 'multipart/form-data' enctype for your form"`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T20:34:19.960

您可以使用[`fileUpload`拦截器](http://struts.apache.org/core-developers/file-upload-interceptor.html)来解析您的[`"multipart/form-data"`](http://en.wikipedia.org/wiki/Multipart/form-data#Form_Data)请求。它在 Struts2 调度程序的准备操作中使用由[MultipartRequestWrapper](http://struts.apache.org/maven/struts2-core/apidocs/org/apache/struts2/dispatcher/multipart/MultiPartRequestWrapper.html)包装的相同[commons-fileupload实现。](http://commons.apache.org/fileupload/)更多关于如何通过示例文件上传的信息，您可以在[此处](http://struts.apache.org/core-developers/file-upload.html)找到。

# python - 将项目添加到python中的列表列表时出现意外输出

> ID：16124367
> 
> 赞同：4
> 
> 时间：2013-04-20T19:36:23.673
> 
> 标签：python, list

这是相当简单的代码，它没有做我想做的事情。怎么了？

```
In [63]: c = [[]]*10

In [64]: c
Out[64]: [[], [], [], [], [], [], [], [], [], []]

In [65]: c[0]
Out[65]: []

In [66]: c[0] += [1]

In [67]: c
Out[67]: [[1], [1], [1], [1], [1], [1], [1], [1], [1], [1]] 
```

预期输出为`[[1], [], [], [], [], [], [], [], [], []]`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-20T19:38:31.390

这是一个经典的 Python 陷阱。

```
c = [[]]*10 
```

创建一个包含 10 个项目的列表。10 项中的每一项都在*同一个确切列表中*。因此，修改一项会修改所有项。

要创建 10 个独立列表，请使用

```
c = [[] for i in range(10)] 
```

# iphone - NSURLConnection sendAsynchronousRequest：阻塞主线程

> ID：16124369
> 
> 赞同：2
> 
> 时间：2013-04-20T19:36:39.773
> 
> 标签：iphone, ios, objective-c, asynchronous, nsurlconnection

我`NSURLConnection`用来发出多个异步请求。我想显示一个进度指示器，以显示在要执行的总数中完成了多少请求。但是，当我尝试在发出请求之前或在执行请求之前调用的另一个方法中设置并显示此进度指示器时，它不会显示。当请求被注释掉时，进度指示器显示正常。但如果不是这样，就好像 Xcode 向前看并看到一个异步请求即将到来并阻塞主线程，从而使 UI 更改变得不可能。

这是被调用的相关代码，包括请求和显示进度指示器的代码：

```
- (void)getRegionalInformationFromChecked:(NSSet *)set atIndex:(NSInteger)index {
    __block BOOL responseRecieved = NO;
    NSString *stringForURL = [NSString stringWithFormat:@"http://www.thebluealliance.com/api/v1/event/details?event=%@",[[set allObjects] objectAtIndex:index]];
    NSURL *url = [NSURL URLWithString:stringForURL];
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];
    NSLog(@"URL IS GO: %@", stringForURL);
    [NSURLConnection sendAsynchronousRequest:[NSURLRequest requestWithURL:url] queue:queue completionHandler:^(NSURLResponse *_response, NSData *_data, NSError *_error) {
    NSLog(@"CHECKED DATA RETURNED AT INDEX %i", index);
    NSError *error;
    NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:_data options:NSJSONReadingMutableContainers error:&error];
    if (!_regionalDetails) {
        _regionalDetails = [[NSMutableArray alloc] init];
    }
    [_regionalDetails addObject:dict];
    responseRecieved = YES;
}];
    regionalSchedulesToGet = [set count];
    while (responseRecieved == NO) {}
    [[MBProgressHUD HUDForView:[[UIApplication sharedApplication] keyWindow]] setLabelText:[NSString stringWithFormat: @"Getting regional %i of %i", index+2, [set count]]];
    if (index+1 < [set count]) {
        [self getRegionalInformationFromChecked:set atIndex:index+1];
    } else {
        [[MBProgressHUD HUDForView:[[UIApplication sharedApplication] keyWindow]] setLabelText:@"Writing to file"];
    }
} 
```

当异步请求的块被注释掉时，`MBProgressHUD`显示它的值很好。但是当插入块时，SDK 拒绝更新进度指示器，即使在离开块之后（之后应该解决任何线程问题）。在没有更多请求显示之前它不会更新，此时它会显示“正在写入文件”。

为什么异步请求似乎阻塞了主线程，为什么我不能在调用请求之前或之后立即对主线程进行更改？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T19:56:41.717

和

```
while (responseRecieved == NO) {} 
```

您阻塞主线程（可能几乎 100% 的 CPU 负载），直到异步块完成。然后递归调用函数，启动另一个异步块并再次阻塞，直到完成。*因此，在所有* 操作完成之前，程序控制不会返回到主运行循环。只有这样 UI 更新才完成。

您应该在完成块的末尾开始下一个操作，而不是同步等待（这总是一个坏主意）。

另请注意， 的`queue`参数`sendAsynchronousRequest`是调用完成处理程序的队列，因此您可以使用`[NSOperationQueue mainQueue]`.

然后您的代码大致如下所示：

```
- (void)getRegionalInformationFromChecked:(NSSet *)set atIndex:(NSInteger)index
{
    [[MBProgressHUD HUDForView:[[UIApplication sharedApplication] keyWindow]]
     setLabelText:[NSString stringWithFormat:@"Getting regional %i of %i", index+1, [set count]]];
    NSString *stringForURL = [NSString stringWithFormat:@"http://www.thebluealliance.com/api/v1/event/details?event=%@",[[set allObjects] objectAtIndex:index]];
    NSURL *url = [NSURL URLWithString:stringForURL];
    NSLog(@"URL IS GO: %@", stringForURL);
    [NSURLConnection sendAsynchronousRequest:[NSURLRequest requestWithURL:url] queue:[NSOperationQueue mainQueue]
                           completionHandler:^(NSURLResponse *_response, NSData *_data, NSError *_error) {
        NSLog(@"CHECKED DATA RETURNED AT INDEX %i", index);
        NSError *error;
        NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:_data options:NSJSONReadingMutableContainers error:&error];
        if (!_regionalDetails) {
            _regionalDetails = [[NSMutableArray alloc] init];
        }
        [_regionalDetails addObject:dict];
        if (index+1 < [set count]) {
            [self getRegionalInformationFromChecked:set atIndex:index+1];
        } else {
            [[MBProgressHUD HUDForView:[[UIApplication sharedApplication] keyWindow]] setLabelText:@"Writing to file"];
            // ... perhaps call a completion function from here ?
        }
    }];
} 
```

但请注意，最初的调用`getRegionalInformationFromChecked`现在几乎会立即返回（这就是异步任务的工作方式:-)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-20T19:49:35.443

尝试在主线程上调度所有涉及 UI 刷新的方法

# php - php中的图片附件发送失败？

> ID：16124371
> 
> 赞同：0
> 
> 时间：2013-04-20T19:36:56.027
> 
> 标签：php

当我将附件更改为 html 文件时，下面的代码运行良好，但是当我将附件更改为图像（即 screenshot.png）时，它无法发送消息。

```
<?php
    $file_path = "screenshot.png"; // server path where file is placed
    $file_path_type = "image/png"; // File Type
    $file_path_name = "screenshot.png"; // this file name will be used at reciever end 

    $from = "xyz@gmail.com"; // E-mail address of sender
    $to = "abc@gmail.com"; // E-mail address of reciever
    $subject = "Please check the Attachment."; // Subject of email
    $message = "This is the message body.&lt;br&gt;&lt;br&gt;Thank You!&lt;br&gt;&lt;a href='http://7tech.co.in'&gt;7tech.co.in Team&lt;/a&gt;"; 

    $headers = "From: ".$from; 

    $file = fopen($file_path,'rb');
    $data = fread($file,filesize($file_path));
    fclose($file); 

    $rand = md5(time());
    $mime_boundary = "==Multipart_Boundary_x{$rand}x"; 

    $headers .= "\nMIME-Version: 1.0\n" .
    "Content-Type: multipart/mixed;\n" .
    " boundary=\"{$mime_boundary}\""; 

    $message .= "This is a multi-part message in MIME format.\n\n" .
    "--{$mime_boundary}\n" .
    "Content-Type:text/html; charset=\"iso-8859-1\"\n" .
    "Content-Transfer-Encoding: 7bit\n\n" .
    $message .= "\n\n"; 

    $data = chunk_split(base64_encode($data)); 

    $message .= "--{$mime_boundary}\n" .
    "Content-Type: {$file_path_type};\n" .
    " name=\"{$file_path_name}\"\n" .
    "Content-Disposition: attachment;\n" .
    " filename=\"{$file_path_name}\"\n" .
    "Content-Transfer-Encoding: base64\n\n" .
    $data .= "\n\n" .
    "--{$mime_boundary}--\n";  

    if(@mail($to, $subject, $message, $headers)) {
    echo "File send!";

    } else {
    echo 'Failed';
    }
    ?> 
```

你们能指出错误吗？我也尝试在 1-2 个地方更改内容类型，但它不起作用。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:39:43.580

它可能是由于您的网络服务器中的错误配置而发生的。通过更改允许的文件大小，也许它会起作用。

# javascript - 运算符中的 MongodB 在不应该返回空白数组时返回

> ID：16124373
> 
> 赞同：0
> 
> 时间：2013-04-20T19:37:13.263
> 
> 标签：javascript, mongodb, coffeescript, meteor

我在客户端上运行的咖啡脚本中有一个模板函数：

```
Template.leftNav.starred = () ->
   user = Meteor.user()
   if ! user 
        return
   else
        starredPages = user.profile.starredPages
        starred =  Entries.find({ _id :{in: starredPages}}).fetch() 
```

`Meteor.user()`返回

```
Object {_id: "AHSwfYgeGmur9oHzu", profile: Object}
  _id: "AHSwfYgeGmur9oHzu"
  profile: Object
  starredPages: Array[4]
     0: "asdasdasdasdasd"
     1: "abc123"
     2: "blobby"
     3: "bxSbMgszYxbCqDonF" 
```

并`Meteor Entries.find({})`返回：

```
Entries
     Meteor.Collection {_makeNewID: function, _transform: null, _manager: Meteor._LivedataConnection, _collection: LocalCollection, _name: "entries"…}
    _collection: LocalCollection
    _savedOriginals: null
    docs: Object
        Wkxxpapm8bbiq59ig:
            _id: "M3vDJNMZJjBDfrc7D"
        bxSbMgszYxbCqDonF:
            _id: "bxSbMgszYxbCqDonF" 
```

执行模板函数中的代码：

```
starredPages = user.profile.starredPages
starred =  Entries.find({ _id :{in: starredPages}}).fetch() 
```

`starred`即使`bxSbMgszYxbCqDonF`starredPages 数组中的`_id`值与`Entries.docs`集合数组中的值匹配，也会作为空白数组返回。

为什么会这样以及如何让它返回`starredPages`数组和`_id`'s 之间的匹配项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:52:16.213

你需要使用`$in`

```
starred =  Entries.find({ _id :{$in: starredPages}}).fetch() 
```

简单的错字;)

# javascript - 构造函数继承自构造函数

> ID：16124375
> 
> 赞同：1
> 
> 时间：2013-04-20T19:37:14.560
> 
> 标签：javascript

好的，假设我有一个像这样的构造函数：

```
var Base = function() {};
Base.prototype.shmoo = function() { this.foo="shmoo"; } 
```

如何创建`Base`独立于它并且彼此独立扩展的其他构造函数？

换句话说，扩展派生构造函数的功能仅影响其对象，而不会影响其他对象，也`Base`不会影响另一个派生对象。

我试过了

```
Extender = function() {};
Extender.prototype = Base.prototype;
Extender.prototype.moo = function() { this.moo="boo"; }; 
```

但这当然会在任何地方生效。

我应该模拟类层次结构吗？我试图远离这种模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:48:39.363

这将实现原型继承（这是你想要的）：

```
 // The Extender prototype is an instance of Base but not Base's prototype     
Extender.prototype = new Base();

// Set Extender() as the actual constructor of an Extender instance
Extender.prototype.constructor = Extender; 
```

# mysql - MySQL基本表透视

> ID：16124376
> 
> 赞同：-1
> 
> 时间：2013-04-20T19:37:15.747
> 
> 标签：mysql, sql, pivot

我正在尝试旋转一个看起来像.....的表格结果

```
 -----------------------------------------------
    | personsID    |   personsWeight |  dateWeighed |
     -----------------------------------------------
    |          1   |      160        |   04/15/2011 |
     -----------------------------------------------
    |          1   |      161        |   04/18/2011 |
     -----------------------------------------------
    |          1   |      162        |   06/30/2011 |
     -----------------------------------------------
    |          1   |      163        |   07/11/2011 |
     -----------------------------------------------
    |          1   |      164        |   04/01/2012 |
     ----------------------------------------------- 
```

我希望它看起来像

```
 --------------------------------------------------------------------------------
    |  personsID   | 04/15/2011  | 04/18/2011 | 06/30/2011 | 07/11/2011 | 04/01/2012 |
     --------------------------------------------------------------------------------
    |        1     |     160     |   161      |     162    |     163    |    164     |
     -------------------------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:32:14.783

MySQL 没有 PIVOT 函数，因此您必须使用带有`CASE`表达式的聚合函数将数据行转换为列。

如果您有一组或已知数量的值，那么您可以对查询进行硬编码：

```
select personsId,
  sum(case when dateWeighed='2011-04-15' then personsWeight else 0 end) `04/15/2011`,
  sum(case when dateWeighed='2011-04-18' then personsWeight else 0 end) `04/18/2011`,
  sum(case when dateWeighed='2011-06-30' then personsWeight else 0 end) `06/30/2011`
from yt
group by personsId; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/b75d4/5)。

但是，如果您想要将未知数量的`dates`列转换为列，那么您将需要使用准备好的语句来生成动态 SQL：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'sum(CASE WHEN dateWeighed = ''',
      dateWeighed,
      ''' THEN personsWeight else 0 END) AS `',
      date_format(dateWeighed, '%m/%d/%Y'), '`'
    )
  ) INTO @sql
FROM yt;

SET @sql 
  = CONCAT('SELECT personsId, ', @sql, ' 
            from yt
            group by personsId');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/b75d4/6)。两者都会给出结果：

```
| PERSONSID | 04/15/2011 | 04/18/2011 | 06/30/2011 | 07/11/2011 | 04/01/2012 |
------------------------------------------------------------------------------
|         1 |        160 |        161 |        162 |        163 |        164 | 
```

# javascript - 在AngularJS中提交后重置表单

> ID：16124377
> 
> 赞同：6
> 
> 时间：2013-04-20T19:37:21.990
> 
> 标签：javascript, angularjs

在 AngularJS (v1.1.3) 中提交后，我无法重置表单字段。这是我正在尝试做的一个片段：

**HTML**

```
<form name="addMemberForm">
    <input name="name" type="text" placeholder="Jon Doe" ng-model="member.name" required/></td>
    <a class="btn btn-primary" ng-click="createMember(member)" ng-disabled="addMemberForm.$invalid"><i class="icon-plus"></i></a>
</form> 
```

**JS**

```
$scope.createMember = function(member) {
    var membersService = new Members(member);
    membersService.$create(function(member) {
        $scope.members.push(member);
        $scope.addMemberForm.reset(); //TypeError: Object #<FormController> has no method 'reset'
    });
}; 
```

还有其他方法可以重置表单元素吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T20:41:47.643

感谢@tschiela 的评论。我不得不这样做：

```
$scope.createMember = function(member) {
    var membersService = new Members(member);
    membersService.$create(function(member) {
        $scope.members.push(member);
        $scope.member = '';
    });
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-10T06:38:47.257

只需取表单的默认值。

**HTML 表单**

```
<form novalidate id="paperForm"  class="form-horizontal" name="formPaper">
<div class="form-group">
<label class="col-sm-3 control-label" for="name">
    Name
</label>
<div class="col-sm-8">
    <input type="text" id="name" placeholder="Please Enter Name"  class="form-control" ng-model="paper.name" ng-name="name" required>
</div>

<label class="col-sm-3 control-label" for="name">
    Department
</label>
<div class="col-sm-8">
    <input type="text" id="department" placeholder="Please Enter Department"  class="form-control" ng-model="paper.department" ng-name="department" required>
</div>

</div>

 <button type="button" class="btn btn-default" ng-click="reset(paper)">Reset</button>

</form> 
```

**在控制器内设置重置代码**

```
var deafualtForm = {
name : '',
department : ''
}

$scope.reset= function(paper) {
$scope.paper = angular.copy(deafualtForm);
} 
```

# javascript - 使用 CSS 或 Javascript 使多个背景图像可扩展？

> ID：16124378
> 
> 赞同：0
> 
> 时间：2013-04-20T19:37:23.870
> 
> 标签：javascript, jquery, wordpress, css

我知道这里有很多与此相关的问题，但没有任何东西可以直接解决我的情况。这是我正在开发的网站：

[http://ledvideowall.net](http://ledvideowall.net)

当您将浏览器窗口宽度重新缩小时，“LED 视频墙租赁和销售”和“联系我们”后面的背景图像会缩小，但容器的高度保持不变，从而在这些元素之间创建额外的空白空间。

有没有一种简单的方法来设置这两个元素的起始高度，但在保持这些图像的纵横比的同时还具有高度比例和宽度？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:48:04.907

使用顶部分层的 div 并将其透明度设置为 50%，而不是尝试统一调整 3 个图像的大小，让我们联系我们不是更容易吗？

# javascript - 在 Ember.js 中结合 linkTo 和 action 助手

> ID：16124381
> 
> 赞同：31
> 
> 时间：2013-04-20T19:37:32.437
> 
> 标签：javascript, ember.js, handlebars.js, htmlbars, ember-components

我需要在 Ember.js 中结合 linkTo 和操作助手。我的代码是：

```
{{#link-to 'index'}}<span {{action 'clear'}}>Clear</span>{{/link-to}} 
```

但我想让它变成这样：

```
{{#link-to 'index' {{action 'clear'}} }}Clear{{/link-to}} 
```

并且：

```
<li>
    {{#link-to 'support'}}
        <span {{action 'myAction' 'support'}}>Support</span>
    {{/link-to}}
</li> 
```

至：

```
<li>
    {{#link-to 'support' {{action 'myAction' 'support'}} }}Support{{/link-to}}
</li> 
```

我怎样才能做到这一点？

# 解决方案

[检查我对**Ember 2.0 兼容**的回答，**对于 SEO 解决方案可以**。](https://stackoverflow.com/a/32871262/2166409)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2015-09-30T16:29:23.323

# Ember 链接操作插件

这**对于 SEO 解决方案来说是可以的**！

## 安装插件

```
ember install ember-link-action 
```

## 用法

您可以将关闭操作作为`invokeAction`参数传递给`{{link-to}}`组件：

```
{{#link-to 'other-route' invokeAction=(action 'testAction')}}
  Link to another route
{{/link-to}} 
```

要将参数传递给操作，您可以使用：

```
{{#link-to 'other-route' invokeAction=(action 'testAction' param1 param2)}}
  Link to another route
{{/link-to}} 
```

## 兼容性

自动化测试套件确认插件适用于 1.13 到最新的 Ember 3 版本。

它适用于 Ember 的发行版、测试版和金丝雀版。

[插件 GitHub 存储库。](https://github.com/Kuzirashi/ember-link-action)欢迎投稿。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-12-04T19:01:55.587

**更新：**查看下方 Michael Lang 对 Ember 1.8.1+ 的评论

Myslik 的答案（根本不使用`link-to`，而是使用`action`and then `transitionToRoute`）的问题在于它对**SEO 没用**，搜索引擎机器人什么也看不到。

如果您希望将链接指向的内容编入索引，则最容易在`<a href=x>`其中找到一个好人。最好使用`link-to`这样您的链接 URL 与您的路由 URL 保持同步。我使用的解决方案既提供了完成工作的操作，又方便`link-to`地索引页面。

我覆盖了一些功能`Ember.LinkView`：

```
Ember.LinkView.reopen({
  action: null,
  _invoke: function(event){
    var action = this.get('action');
    if(action) {
      // There was an action specified (in handlebars) so take custom action
      event.preventDefault(); // prevent the browser from following the link as normal
      if (this.bubbles === false) { event.stopPropagation(); }

      // trigger the action on the controller
      this.get('controller').send(action, this.get('actionParam'));
      return false; 
    }           

    // no action to take, handle the link-to normally
    return this._super(event);
  }
}); 
```

然后我可以在 Handlebars 中指定要执行的操作以及传递操作的内容：

```
<span {{action 'view' this}}>
  {{#link-to 'post' action='view' actionParam=this}}
    Post Title: {{title}}
  {{/link-to}}
</span> 
```

在控制器中：

```
App.PostsIndexController = Ember.ArrayController.extend({
  actions: {
    view: function(post){
      this.transitionToRoute('post', post);
    }
  }
} 
```

这样，当我缓存页面的渲染副本并将其提供给索引机器人时，机器人将看到一个带有 URL 的真实链接并跟随它。

（另请注意，`transitionTo`现在不赞成使用`transitionToRoute`）

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-04-20T20:53:43.447

这些组合都不适用于 Ember.js，但您不需要组合这两个助手。为什么不直接使用动作助手并让它冒泡到控制器或路由？您可以`transitionToRoute`在控制器或`transitionTo`路由中使用。

例如在控制器中你可以有这样的代码：

```
App.PostsController = Ember.ArrayController.extend({
    clear: function () {
        // implement your action here
        this.transitionToRoute('index');
    }
}); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-06-06T05:05:41.630

这在 1.6.0-beta.5 中运行良好：

```
<span {{action "someAction"}}>
  {{#link-to "some.route"}}
    Click Me
  {{/link-to}}
</span> 
```

链接将发生，然后单击将冒泡到操作处理程序。[它在此处](http://emberjs.com/guides/templates/actions/#toc_stopping-event-propagation)记录（尽管是间接的）。

*编辑：更正了打开链接标签中的语法*

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-09-28T18:14:35.323

我喜欢 Cereal Killer 的简单方法，但不幸的是它给我带来了问题。当浏览器导航到另一个路由时，它会*重新启动 Ember 应用程序*。

从 Ember 2.6 开始，以下简单方法可以解决问题：

`<span {{action 'closeNavigationMenu'}}> {{#link-to 'home' preventDefault=false}} Go Home {{/link-to}} </span>`

这实现了以下目标：

*   导航到路线“家”
*   调用操作“closeNavigationMenu”
*   鼠标悬停时，浏览器会显示链接（用于 SEO 和更好的用户体验）
*   *浏览器导航不会导致 Ember 应用重新启动*

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-11-05T14:18:56.730

这就是我在 O'Reilly Ember.js 书的演示应用程序中解决这个问题的方法：[https](https://github.com/emberjsbook) ://github.com/emberjsbook 。

你可以在这里看到完整的源代码：[https ://github.com/emberjsbook/rocknrollcall](https://github.com/emberjsbook/rocknrollcall)

在视图中：

```
{{#if artistsIsChecked}}
  {{#if artists.length}}
    <h3>Artists</h3>

    <ul class="search-results artists">
      {{#each artists}}
        <li><a {{action 'viewedArtist' this.enid }}>{{name}}</a></li>
      {{/each}}
    </ul>
  {{/if}}
{{/if}} 
```

和控制器：

```
App.SearchResultsController = Em.ObjectController.extend({
  actions: {
    viewedArtist: function(enid) {
      this.transitionToRoute('artist', enid);
    },
    viewedSong: function(sid) {
      this.transitionToRoute('song', sid);
    }
  },
  needs: ['artists', 'songs'],
  artistsIsChecked: true,
  songsIsChecked: true,
  artists: [],
  songs: []
}); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-09-01T00:38:09.190

遇到同样的问题，我找到了这个简单的解决方案：

```
{{#linkTo eng.rent class="external-button"}}<div class="internal-button" {{action "updateLangPath"}} >X</div>{{/linkTo}} 
```

然后，管理样式表中的css类external-button和internal-button，我确保“internal-button”覆盖了整个“external-button”区域；这样，如果不点击内部按钮，就不可能点击外部按钮。

这对我来说很有效; 希望它可以帮助...

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-06-08T14:48:28.353

这就是 Ember 3.11.0 之后带有`on`修饰符的样子。

```
<LinkTo
  {{on "click" this.recordMetrics}}
  @route="post.see-all"
  @model={{@model}}
  @bubbles={{false}}>
  Link Me
</LinkTo> 
```

`bubbles`显示只是为了说明[LinkTo](https://api.emberjs.com/ember/release/classes/Ember.Templates.components/methods/LinkTo?anchor=LinkTo) API。

[https://blog.emberjs.com/ember-3-11-released/](https://blog.emberjs.com/ember-3-11-released/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-05-19T23:54:45.080

`setupController`Ember 的链接到标签使用路由来打开新视图，因此您可以在目标路由的方法中而不是在控制器操作中执行您想要放入链接的“动作”属性中的任何功能。

请参阅 Ember 指南中的此处：http: [//emberjs.com/guides/routing/setting-up-a-controller/](http://emberjs.com/guides/routing/setting-up-a-controller/)

但是，这仅适用于您希望在每次访问路由时都执行该操作，而不是使用特定链接。

确保包含该`controller.set('model', model);`行以及您放入其中的任何其他内容。

# mysql - MySQL Community Server 从 zip 安装后的密码

> ID：16124385
> 
> 赞同：0
> 
> 时间：2013-04-20T19:37:53.480
> 
> 标签：mysql, windows, passwords, installation, inno-setup

我一直在使用 Inno Setup 从 ZIP Archive 安装 MySQL 社区服务器。我使用了这个安装脚本（稍作修改）[http://dark-it.blogspot.sk/2009/07/inno-setup-mysql-full-script.html](http://dark-it.blogspot.sk/2009/07/inno-setup-mysql-full-script.html)，因为我的非常简单的应用程序需要一键安装，它与 MySQL 数据库一起使用。我安装到 Windows XP Professional 是成功的。现在 MySQL 服务运行正常。但我的问题是我不知道连接到这个 MySQL 服务器的用户名和密码。我尝试更改 my.ini 文件中的用户名和密码，但不正确。我也绑定了空白密码。我可以以某种方式更改此文件中的用户名和密码吗？或者安装后的默认密码是多少？我也需要将准备好的数据库导入一键安装。我已将此数据库定位到 /MyApplication/Data/Database_folder。在此目录中还有文件夹 test 和 performance_schema。位置正确吗？

谢谢您的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T19:54:26.693

请参阅 MySQL 开发人员页面[如何重置 root 密码](http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html)。

1.  以管理员身份登录您的系统。

2.  如果 MySQL 服务器正在运行，请停止它。对于作为 Windows 服务运行的服务器，请转至服务管理器：从开始菜单中，选择控制面板，然后选择管理工具，然后选择服务。在列表中找到 MySQL 服务并停止它。

3.  如果您的服务器没有作为服务运行，您可能需要使用任务管理器强制它停止。

4.  创建一个包含以下语句的文本文件。将密码替换为您要使用的密码。

    UPDATE mysql.user SET Password=PASSWORD('MyNewPass') WHERE User='root';
    同花顺特权；

    将 UPDATE 和 FLUSH 语句分别写在一行上。UPDATE 语句重置所有 root 帐户的密码，而 FLUSH 语句告诉服务器将授权表重新加载到内存中，以便它注意到密码更改。

5.  保存文件。对于此示例，该文件将命名为 C:\mysql-init.txt。

6.  打开控制台窗口以进入命令提示符：从“开始”菜单中，选择“运行”，然后输入 cmd 作为要运行的命令。

7.  使用特殊的 --init-file 选项启动 MySQL 服务器（注意选项值中的反斜杠加倍）：

    C:> C:\mysql\bin\mysqld-nt --init-file=C:\mysql-init.txt

    如果您将 MySQL 安装到 C:\mysql 以外的位置，请相应地调整命令。

    服务器在启动时执行由 --init-file 选项命名的文件的内容，更改每个 root 帐户密码。

    如果您希望服务器输出显示在控制台窗口而不是日志文件中，您还可以将 --console 选项添加到命令中。

    如果您使用 MySQL 安装向导安装 MySQL，您可能需要指定 --defaults-file 选项：

    C:> "C:\Program Files\MySQL\MySQL Server 5.0\bin\mysqld-nt.exe" --defaults-file="C:\Program Files\MySQL\MySQL Server 5.0\my.ini" --init -file=C:\mysql-init.txt

    可以使用服务管理器找到适当的 --defaults-file 设置：从开始菜单中选择控制面板，然后选择管理工具，然后选择服务。在列表中找到 MySQL 服务，右键单击它，然后选择 Properties 选项。Path to executable 字段包含 --defaults-file 设置。

8.  服务器启动成功后，删除C:\mysql-init.txt。

您现在应该能够使用新密码以 root 身份连接到 MySQL 服务器。停止 MySQL 服务器，然后再次以正常模式重新启动它。如果您将服务器作为服务运行，请从 Windows 服务窗口启动它。如果您手动启动服务器，请使用您通常使用的任何命令。

* * *

关于导入数据库，我更喜欢使用 SQL 转储，它们通常更小且易于安装，如下所示：

```
mysql -uroot -prootpwd dbname < dump.sql 
```

# oauth - 如何使用 Doorkeeper OAuth 防止自动令牌刷新？

> ID：16124388
> 
> 赞同：1
> 
> 时间：2013-04-20T19:37:59.997
> 
> 标签：oauth, google-chrome-extension, doorkeeper

我正在使用 Doorkeeper gem 在 Rails 应用程序中提供 OAuth。客户端是 Chrome 扩展程序。

我在 doorkeeper.rb 中注释掉了“use_refresh_token”，并将“access_token_expires_in”设置为 1 分钟。我认为这会迫使客户在一分钟后重新进行身份验证。但是无论 use_refresh_token 是否存在，重新认证都会自动发生。

存在 use_refresh_token 时，每次访问令牌过期时都会向“oauth_access_tokens”添加一个新行。没有新行添加到“oauth_access_grants”。

使用 use_refresh_token 注释掉的新行将添加到两个表中。如果客户端手动重新验证，我会期望。但它似乎是自动发生的——用户被授予访问权限，而无需通过 OAuth 登录屏幕重新验证应用程序，正如我所愿。

为我的无知道歉，我是 Doorkeeper 和 OAuth 的新手，在 Google 等人上没有找到任何线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T14:14:53.767

OAuth 2.0 正在工作，因为它正在发送授权 URI 以授权 url 以获取访问令牌，并且虽然用户无权获取令牌，但服务器将他重定向到登录页面，我认为在您的情况下，及时过期是太短了，所以当用户第一次输入用户名和密码时打开的会话仍然有效，所以当您的客户端要求新令牌时它正在获取它，因为用户仍在授权服务器上登录，您可以将会话时间更改为小于令牌有效时间并测试它。

# c# - 无法使用提供程序“RsaProtectedConfigurationProvider”解密？

> ID：16124389
> 
> 赞同：7
> 
> 时间：2013-04-20T19:38:06.447
> 
> 标签：c#, visual-studio-2010, encryption, setup-deployment

在我的 Windows 应用程序中，我试图加密 app.config 文件的连接字符串部分，我的 app.config 文件的连接字符串部分是

```
<connectionStrings>
<add name="SQLiteDB" connectionString="Data Source=|DataDirectory|database.s3db;    
Version=3;password=mypassword;" providerName="System.Data.Sqlite"/>
</connectionStrings> 
```

在 .cs 文件中我像加密它一样

```
Configuration config = ConfigurationManager.OpenExeConfiguration(Application.ExecutablePath);
ConfigurationSection section = config.GetSection("connectionStrings") as ConnectionStringsSection; // could be any section

if (!section.IsReadOnly())
{
 section.SectionInformation.ProtectSection("RsaProtectedConfigurationProvider");
 section.SectionInformation.ForceSave = true;
 config.Save(ConfigurationSaveMode.Full);
} 
```

运行此代码后，我在不同的 app.config 中获得了加密的连接字符串，此 app.config 位于 bin\debug 文件夹中，此 .config 文件的名称为 nameofapplication.exe.config。

问题是当我设置此应用程序并在其他机器上运行时，如果出现以下错误：

```
System.Configuration.ConfigurationErrorsException: Failed to decrypt using provider 'RsaProtectedConfigurationProvider'. Error message from the provider: The RSA key container could not be opened. 
```

我是第一次这样做，所以不知道如何解决这个问题，陷入了困境。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-17T09:15:17.667

使用此命令**aspnet_regiis -pa**

打开cmd控制台-以管理员身份执行-

```
C:\Windows\system32>aspnet_regiis -pa "NetFrameworkConfigurationKey" "myDomain\myUser"
Microsoft (R) ASP.NET RegIIS versión 4.0.30319.33440
Utilidad de administración que instala y desinstala ASP.NET en el equipo local.
Copyright (C) Microsoft Corporation. Todos los derechos reservados.
Agregando ACL para el acceso al contenedor de claves RSA...
Con éxito 
```

更多参考：

[Ɖiamond ǤeezeƦ 回答](https://stackoverflow.com/a/16126458/206730)

[加密应用程序配置文件时，RsaProtectedConfigurationProvider 有时会失败](http://connect.microsoft.com/VisualStudio/feedback/details/511835/the-rsaprotectedconfigurationprovider-sometimes-fails-when-encrypting-an-application-configuration-file)

[ASP.NET 加密 - aspnet_regiis - 农场](https://stackoverflow.com/questions/7998666/asp-net-encryption-aspnet-regiis-farm)

[在 .NET 4.0 中加密和解密 Web.config 部分](http://ryaremchuk.blogspot.com.es/2012/11/encrypting-and-decrypting-webconfig.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-20T23:50:35.207

app.config 文件将使用本地计算机上的证书进行加密。此证书不会出现在另一台机器上。因此，您将无法解密 app.config 文件。

为此，您需要在您的机器上导出加密密钥，然后在另一台机器上导入它。以下文章演示了如何执行此操作：演练：[创建和导出 RSA 密钥容器](http://msdn.microsoft.com/en-us/library/2w117ede.aspx)

# c# - 如何避免 svcutil 为集合类型生成 XmlSerializerFormatAttribute？

> ID：16124390
> 
> 赞同：0
> 
> 时间：2013-04-20T19:38:14.810
> 
> 标签：c#, wcf, xsd, wsdl, svcutil.exe

使用 svcutil 从 WSDL 生成 C# 代码；

我想避免 XmlSerializerFormatAttribute 属性；我知道它为什么会产生，不知道如何正确使用它来避免它？让我们做一些研究；基本上低于生产它的xsd；任何想法？

```
 <xs:complexType name="CNT_Country">
        <xs:annotation>
            <xs:documentation/>
        </xs:annotation>
        <xs:sequence>
            <xs:element name="CountryId" type="xs:string"/>
            <xs:element name="CountryName" type="xs:string"/>
        </xs:sequence>
    </xs:complexType>
    <xs:element name="CNT_CountryLst_Type">
        <xs:annotation>
            <xs:documentation>This is List of Country</xs:documentation>
        </xs:annotation>
        <xs:complexType>
            <xs:sequence>
                <xs:element maxOccurs="unbounded" minOccurs="0" nillable="true" name="CountryList" type="CNT_Country"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T04:20:21.377

猜想：你的列表是 IList 类型的吗？

在这种情况下，这篇文章可能会有所帮助：

[WCF：序列化和反序列化泛型集合](https://stackoverflow.com/questions/2562088/wcf-serializing-and-deserializing-generic-collections)

简而言之，它描述了 IList 反序列化中的错误。

# php - PDO 的成熟抽象层是什么以及如何与 Firebird 一起工作？

> ID：16124391
> 
> 赞同：0
> 
> 时间：2013-04-20T19:38:18.203
> 
> 标签：php, pdo, firebird

正如 MySQL 手册所说：

“PDO 提供了一个数据访问抽象层，这意味着，无论您使用哪个数据库，您都使用相同的函数来发出查询和获取数据。PDO 不提供数据库抽象；它不重写 SQL 或模拟缺少的功能。如果你需要那个工具，你应该使用一个成熟的抽象层。 [http://www.php.net/manual/en/intro.pdo.php](http://www.php.net/manual/en/intro.pdo.php)

**那些成熟的抽象层是什么？如何让它们与 PDO 一起使用？**

我有兴趣使用 Firebird 和 PHP 来支持我制作的旧应用程序并将其部分功能移植到 web。

My SQL 手册说我应该`--with-pdo-firebird[=DIR]`在**什么文件中使用？php.ini？**

我想知道是否可以在我的共享服务器 HostGator 帐户中放置 firebird 驱动程序，它是否可以工作......有人知道吗？我是否必须制作专用服务器才能在 PHP 中使用 MySQL 以外的数据库？

*抱歉这么多疑惑！*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:45:14.023

我想您不能在共享服务器上使用自己的 php 安装。该`--with-pdo-firebird`参数是`configure`PHP 命令的参数。（安装 PHP 时）

一个成熟的抽象层是一个类，它提供了 、 、 等方法`select()`（`join()`在`insert`这种`delete`特定情况下）。互联网上有一些这样的库（我的意思是数据库的抽象层），例如 Mediawiki 使用这样的库。

如何使用这种抽象层的一个例子是：

```
$db->insert("table", ["field1", "field2"])->select("table2", ["field3", "field4"]); 
```

# android - LinearLayout Horizo ntal 内 LinearLayout Vertical

> ID：16124393
> 
> 赞同：-1
> 
> 时间：2013-04-20T19:38:31.140
> 
> 标签：android, dynamic, nested, android-linearlayout

我正在尝试以编程方式将线性布局垂直放置在线性布局内，但它似乎不起作用，按钮没有出现，但文本视图出现......

这是我的代码：（这是一个对话框..）

```
LinearLayout titleLayout = new LinearLayout(m_context);
titleLayout.setOrientation(LinearLayout.VERTICAL);

m_titleView = new TextView(m_context);
m_titleView.setText(title);

LinearLayout horizontalLayout = new LinearLayout(m_context);
titleLayout.setOrientation(LinearLayout.HORIZONTAL);

Button backward = new Button(m_context);
backward.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
backward.setText("Backwards");

Button newDirButton = new Button(m_context);
newDirButton.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
newDirButton.setText("New folder");

horizontalLayout.addView(backward);
horizontalLayout.addView(newDirButton);
titleLayout.addView(m_titleView);
titleLayout.addView(horizontalLayout); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:45:51.590

尝试将 LayoutParams 设置为`horizontalLayout`.

无论如何，我建议转移到 xml 世界，因为这段代码是不可维护的。

**编辑：**

作者找到的答案：

```
titleLayout.setOrientation(LinearLayout.HORIZONTAL); 
```

应该：

```
horizontalLayout.setOrientation(LinearLayout.HORIZONTAL); 
```

# c - 为什么编译器没有预定义 NULL

> ID：16124397
> 
> 赞同：5
> 
> 时间：2013-04-20T19:39:12.063
> 
> 标签：c

这个问题困扰了我一段时间。我从未见过 NULL 的不同定义，它总是

```
#define NULL  ((void *) 0) 
```

是否有任何架构不同地定义了 NULL，如果是这样，为什么编译器不为我们声明这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T20:13:20.513

[WhozCraig](https://stackoverflow.com/users/1322972/whozcraig)将这些评论写到一个现已删除的[答案](https://stackoverflow.com/a/16124419/15168)中，但它可以提升为完整答案（这就是我在这里所做的）。他指出：

> 有趣的注释：AS/400 是一个非常独特的平台，任何*无效*指针都被认为等同于`NULL`. 他们用来做这件事的机制简直太棒了。从这个意义上说，“有效”是任何 128 位指针（平台对*所有内容都*使用 128 位线性地址空间），其中包含由已知可信指令集获得的“值”。很难相信，`int *p = (int *)1; if (p) { printf("foo"); }`不会在该平台*上*打印“foo”。分配给 p 的值不受源信任，因此被认为是“无效的”，因此等同于`NULL`.
> 
> 坦率地说，它的工作原理令人吃惊。进程映射的虚拟地址空间中的每个 16 字节段落在进程范围的位图中都有一个对应的“位”。所有指针必须驻留在这些段落边界之一上。如果该位被“点亮”，则相应的指针是从受信任的来源存储的，否则它是无效的并且等效于 NULL。对 malloc、指针数学等的调用都在确定该位是否被点亮时被仔细检查。正如你可以想象的那样，将指针放在结构中会给结构打包的想法带来一个全新的伤害世界。

* * *

这被标记为 community-wiki（这不是我的答案——我不应该得到荣誉）但如果 WhozCraig 写了他自己的答案，它可以被删除。

这表明存在具有有趣指针属性的真实平台。

有些平台`#define NULL ((void *)0)`不是通常的定义；在某些平台上，只要编译器理解它，它就可以是`0`、 在其他平台上`0L`或其他适当的值。`0ULL`C++ 不喜欢`((void *)0)`作为定义；标头与 C++ 交互的系统可能不使用 void 指针版本。

我在一台机器上学习了 C，其中`char *`给定内存位置的`int *`地址表示与同一内存位置的地址不同。这是在前几天`void *`，但这意味着您必须`malloc()`正确声明（`char *malloc();`也没有原型），并且您必须将返回值显式转换为正确的类型，否则您会得到核心转储。感谢 C 标准（尽管有问题的机器是 ICL [Perq](http://en.wikipedia.org/wiki/PERQ)（来自三河公司的标志性硬件）在定义标准时已在很大程度上被取代）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-20T20:54:17.063

C 2011 标准，[在线草案](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)

> **6.3.2.3 指针**
> ...
> 3 值为 0 的整数常量表达式，或转换为 type 的这种表达式 `void *`，称为*空指针常量*。^(66))如果将空指针常量转换为指针类型，则生成的指针（称为*空指针*）保证与指向任何对象或函数的指针不相等。
> 
> * * *
> 
> ^(66) 宏`NULL`在`<stddef.h>`（和其他头文件）中定义为空指针常量；见 7.19。)

*宏* `NULL`总是被*定义*为一个零值的常量表达式；它可以是一个赤裸裸的 0，或 0 转换为`void *`，或其他一些计算为 0 的整数表达式。就您的*源代码*而言，`NULL`将始终计算为 0。

翻译代码后，任何出现的空指针常量（0、...`NULL`等）都将替换为底层架构用于空指针的任何内容，该空指针可能是也可能不是 0 值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T20:04:50.863

In the dark ages before ANSI-C the old K&R C had many different implementations on hardware that would be considered bizarre today. This was before the days of VM when machines were very "real". Addresses of zero were not only just fine on these machines, an address of zero could be popular... I think it was CDC that sometimes stored the system constant of zero at zero (and did strange things happen if this was set non-zero).

```
 if ( NULL != ptr )     /* like this */
 if ( ptr )             /* never like this */
```

The trick was finding address you could safely use to indicate "nothing" as storing things at the end of memory was also popular, which ruled out 0xFFFF on some architectures. And these architectures tended to use word addresses rather than byte addresses.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T20:02:12.740

我不知道这个问题的答案，但我在猜测。在 C 中，您通常会执行很多 malloc，因此需要对返回的指针进行很多测试。由于 malloc 在失败时返回 void *，尤其是 (void *)0，因此为了测试 malloc 是否成功，定义 NULL 是很自然的事情。由于这非常重要，其他库函数也使用 NULL（或 (void *)0），例如 fopen。实际上，所有返回指针的东西。

因此，这里没有理由在语言级别定义 this - 它只是一个特殊的指针值，可以由这么多函数返回。

# c# - 将控件添加到自定义表单

> ID：16124399
> 
> 赞同：0
> 
> 时间：2013-04-20T19:39:18.610
> 
> 标签：c#, winforms, custom-controls

我创建了一个自定义表单（FormBorderStyle = FormBorderStyle.None）。

我使用自己的自定义标题按钮（关闭、最大化...）在顶部绘制自己的标题栏。

现在我唯一的问题是向该表单添加普通用户控件。如果我给这些控件一个位置，这些位置是相对于窗体的顶部（包括标题栏）的。

我使用“new”关键字覆盖了默认的 ClientSize 和 ClientRectangle，这允许我对其进行调整（从而从中删除标题栏）。

这似乎不起作用，我无法弄清楚如何在不“破解” ControlAdded 事件（仍然是错误的）的情况下正确执行此操作。

```
 protected override void OnControlAdded(ControlEventArgs e)
    {
        base.OnControlAdded(e);
        if (e.Control.GetType() != typeof(VlufiCaptionButton /* Caption buttons: close, minimize & maximize, should not be included */))
        {
            e.Control.Location = new Point(e.Control.Location.X + ClientRectangle.X, e.Control.Location.Y + ClientRectangle.Y);
            e.Control.LocationChanged += Control_LocationChanged;
        }
    }
    private void Control_LocationChanged(object sender, EventArgs e)
    {
        if (!childControlLocationChangedHandled)
        {
            System.Diagnostics.Debug.WriteLine("changing");
            Control cControl = (Control)sender;
            childControlLocationChangedHandled = true;
            cControl.Location = new Point(cControl.Location.X + ClientRectangle.X, cControl.Location.Y + ClientRectangle.Y);
        }
        else
            childControlLocationChangedHandled = false;
    } 
```

这是我目前使用的代码，但它非常棒，而且我的自定义绘制边框仍然存在其他问题。

有人知道我应该如何正确处理这个吗？

**我找到了一个不错的解决方案：**我在表单中添加了一个 ContainerControl，并根据表单对其进行定位和调整大小，然后每当向表单添加控件时，都应该将它添加到 ContainerControl。仍然不是一个合适的解决方案，但它是迄今为止最好的解决方案。

如果有人提出另一种解决方案，我仍然会很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T20:33:33.693

毕竟，我终于找到了一个可行且非常好的解决方案。

我所做的是使用我自己的自定义 ControlCollection 覆盖我的自定义表单的 Controls 属性。

所以这就是我在自定义表单中得到的：

```
public Control.ControlCollection RealControls
{
    get
    {
        return base.Controls;
    }
}
public new CustomControlCollection Controls { get; private set; }

public ContainerControl ControlContainer { get; set; } 
```

这是自定义的 ControlCollection：

```
public class CustomControlCollection 
{
    public VlufiForm Owner { get; private set; }
    public CustomControlCollection (VlufiForm pOwner)
    {
        Owner = pOwner;
    }
    public void Add(Control c)
    {
        Add(c, false);
    }
    public int Count
    {
        get
        {
            return Owner.ControlContainer.Controls.Count;
        }
    }
    public Control this[int index]
    {
        get
        {
            return Owner.ControlContainer.Controls[index];
        }
    }
    public void Add(Control c, bool isUsable)
    {
        if (isUsable)
            Owner.RealControls.Add(c);
        else
            Owner.ControlContainer.Controls.Add(c);
    }
    public void SetChildIndex(Control c, int nIndex)
    {
        Owner.ControlContainer.Controls.SetChildIndex(c, nIndex);
    }
} 
```

这只是一个示例自定义控件集合，您可以在其中添加更多方法（从而更多地继承 ControlCollection）。我还没有在这个系统中发现任何错误，目前它运行良好。

编辑：发现一个错误，如果您在 Visual Studio 的设计器模式中停靠一个控件，它将停靠在整个表单中，但运行时不会出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T19:56:53.840

详细阅读评论：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;

namespace WindowsApplication1
{
    public partial class Form1 : Form
    {
        int dy = 0;
        public Form1()
        {
            InitializeComponent();
            //i add a panel to top form
            //( for simulating your caption bar) and get its height
            dy = panel1.Height; //for yours its your caption bar height
        }

        private void button1_Click(object sender, EventArgs e)
        {
            //adding button control between form top and panel end area
            //( simulate in your caption bar )
            Button btn = new Button();
            btn.Location = new Point(panel1.Location.X+40,panel1.Location.Y+10);
            btn.Text = "Salam";
            this.Controls.Add(btn);
        }
        //in control added event i add dy ( height of ignored area) to control Location
        private void Form1_ControlAdded(object sender, ControlEventArgs e)
        {
            e.Control.Location = new Point(e.Control.Location.X, e.Control.Location.Y + dy);
        }

        private void button2_Click(object sender, EventArgs e)
        {
            this.Close();
        }
    }
} 
```

# vector - 将一维向量转换为二维向量

> ID：16124400
> 
> 赞同：0
> 
> 时间：2013-04-20T19:39:19.740
> 
> 标签：vector, 2d, type-conversion

```
#include <iostream>
#include <vector>

int main()
{
  std::vector<std::vector<double> > DV;   //2d vector
  std::vector<double>temp(8,0.0);  //1d vector

  temp[0] = 1;
  temp[1] = 2;
  temp[2] = 3;
  temp[3] = 4;
  temp[4] = 5;
  temp[5] = 6;
  temp[6] = 7;
  temp[7] = 8;

  DV.resize(3, temp); 

  for (int i = 0; i < DV.size(); i++)
  {
      for (int j = 0; j < DV.size(); j++)
      {
        std::cout << DV[i][j];
      }
  }
std::cin.get();
} 
```

转换实际上有效，但没有给出预期的结果。输出应该是：

```
1 2 3
4 5 6
7 8 
```

它输出：

```
123123123 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:14:57.407

我不知道有一种方法可以自动将一维向量转换为二维向量。不过手动操作也不算太难...

```
typedef std::vector<std::vector<double>> DoubleVector2D;

DoubleVector2D boxed(size_t cols, std::vector<double> values) {
    DoubleVector2D result;
    for (std::size_t i = 0; i < values.size(); ++i) {
        if (i % cols == 0) result.resize(result.size() + 1);
        result[i / cols].push_back(values[i]);
    }
    return result;
} 
```

完成后，您可以调用`boxed(3, temp)`以获取双精度向量的向量。那时，您只需要遍历它们即可。

```
for (auto row : DV) {
    for (auto value : row) {
         std::cout << value << ' ';
    }
    std::cout << "\n";
} 
```

如果您在没有像样的 C++11 支持的情况下陷入困境，您可能需要使用计数器或迭代器。

```
for (int row = 0; row < DV.size(); ++row) {
    for (int col = 0; col < DV[i].size(); ++col) {
        std::cout << DV[row][col] << ' ';
    }
    std::cout << '\n';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T19:41:03.687

更改此行

```
for (int i = 0; i < DV.size(); i++){
    for (int j = 0; j < DV.size(); j++){
        std::cout << DV[i][j] << ", ";
    }
    std::cout << std::endl;
} 
```

您的问题是如何将值打印到标准输出。

# android - 将时间插入 sqlite 时出错

> ID：16124406
> 
> 赞同：0
> 
> 时间：2013-04-20T19:40:08.553
> 
> 标签：android, sqlite, simpledateformat

我有两个字符串要插入到表“类别”中。字符串是“updatedAt”和“createdAt”。我将它们作为简单日期格式的字符串：

```
SimpleDateFormat mSdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"); 
```

我收到一个错误，因为时间包含一个冒号。至少我相信这就是正在发生的事情。这是我的插入代码：

```
public void insertCategories(SQLiteDatabase db, int id, String group, String updatedAt, String createdAt){

        String CATEGORY_INSERTION = 
            "insert into " + DATABASE_USERTAG + "(" + KEY_TAGID + ", " + KEY_TAGNAME + ", " + KEY_UPDATED_AT_TAG + ", " + KEY_CREATED_AT_TAG +") " +
            "values(" + id + ", " + group + ", " + updatedAt + ", " + createdAt +");";
        db.execSQL(CATEGORY_INSERTION);
    } 
```

这是 logcat 输出：

```
 04-20 12:10:38.489: E/Database(629): Failure 1 (near "12": syntax error) on 0x1b8268 when preparing 'insert into UserTag(_id, tagName, udpatedAtTag, createdAtTag) values(1, 'Favorites', 2013-04-20 12:10:38, 2013-04-20 12:10:38);'.
    04-20 12:10:38.519: W/dalvikvm(629): threadid=9: thread exiting with uncaught exception (group=0x40015560)
    04-20 12:10:38.529: E/AndroidRuntime(629): FATAL EXCEPTION: ModernAsyncTask #1
    04-20 12:10:38.529: E/AndroidRuntime(629): java.lang.RuntimeException: An error occured while executing doInBackground()
    04-20 12:10:38.529: E/AndroidRuntime(629):  at android.support.v4.content.ModernAsyncTask$3.done(ModernAsyncTask.java:137)
    04-20 12:10:38.529: E/AndroidRuntime(629):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
    04-20 12:10:38.529: E/AndroidRuntime(629):  at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
    04-20 12:10:38.529: E/AndroidRuntime(629):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
    04-20 12:10:38.529: E/AndroidRuntime(629):  at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    04-20 12:10:38.529: E/AndroidRuntime(629):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
    04-20 12:10:38.529: E/AndroidRuntime(629):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
    04-20 12:10:38.529: E/AndroidRuntime(629):  at java.lang.Thread.run(Thread.java:1019)
    04-20 12:10:38.529: E/AndroidRuntime(629): Caused by: android.database.sqlite.SQLiteException: near "12": syntax error: insert into UserTag(_id, tagName, udpatedAtTag, createdAtTag) values(1, 'Favorites', 2013-04-20 12:10:38, 2013-04-20 12:10:38);
    04-20 12:10:38.529: E/AndroidRuntime(629):  at android.database.sqlite.SQLiteDatabase.native_execSQL(Native Method)
    04-20 12:10:38.529: E/AndroidRuntime(629):  at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1763)
    04-20 12:10:38.529: E/AndroidRuntime(629):  at mcbee.recipeBoXx.honeyComb.RecipeDbAdapterMod$DatabaseHelper.insertCategories(RecipeDbAdapterMod.java:180)
    04-20 12:10:38.529: E/AndroidRuntime(629):  at mcbee.recipeBoXx.honeyComb.RecipeDbAdapterMod$DatabaseHelper.onCreate(RecipeDbAdapterMod.java:160)
    04-20 12:10:38.529: E/AndroidRuntime(629):  at mcbee.recipeBoXx.honeyComb.RecipeDbAdapterMod$DatabaseHelper.onUpgrade(RecipeDbAdapterMod.java:173)
    04-20 12:10:38.529: E/AndroidRuntime(629):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:132)
    04-20 12:10:38.529: E/AndroidRuntime(629):  at mcbee.recipeBoXx.honeyComb.CategoryContentProvider.query(CategoryContentProvider.java:88)
    04-20 12:10:38.529: E/AndroidRuntime(629):  at android.content.ContentProvider$Transport.query(ContentProvider.java:187)
    04-20 12:10:38.529: E/AndroidRuntime(629):  at android.content.ContentResolver.query(ContentResolver.java:262)
    04-20 12:10:38.529: E/AndroidRuntime(629):  at android.support.v4.content.CursorLoader.loadInBackground(CursorLoader.java:49)
    04-20 12:10:38.529: E/AndroidRuntime(629):  at android.support.v4.content.CursorLoader.loadInBackground(CursorLoader.java:35)
    04-20 12:10:38.529: E/AndroidRuntime(629):  at android.support.v4.content.AsyncTaskLoader.onLoadInBackground(AsyncTaskLoader.java:240)
    04-20 12:10:38.529: E/AndroidRuntime(629):  at android.support.v4.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:51)
    04-20 12:10:38.529: E/AndroidRuntime(629):  at android.support.v4.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:40)
    04-20 12:10:38.529: E/AndroidRuntime(629):  at android.support.v4.content.ModernAsyncTask$2.call(ModernAsyncTask.java:123)
    04-20 12:10:38.529: E/AndroidRuntime(629):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
    04-20 12:10:38.529: E/AndroidRuntime(629):  ... 4 more 
```

另外，如果我将简单的日期格式更改为：

```
SimpleDateFormat mSdf = new SimpleDateFormat("yyyy-MM-dd"); 
```

没有错误。如何正确格式化此字符串以使其包含时间？

编辑：想通了，应该想到这个...将简单的日期格式更改为：

```
SimpleDateFormat mSdf = new SimpleDateFormat("yyyy-MM-dd HH':'mm':'ss"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T03:33:31.960

将时间存储为 milisoceond。然后要检索数据，只需将毫秒时间作为 long 值，然后进行一些计算以将其转换为格式化时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T09:37:26.133

您忘记了字符串周围的“引号”。

你可以使用这样的东西：

```
... ", '" + createdAt + "', '" + ... 
```

[但是使用insert](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#insert%28java.lang.String,%20java.lang.String,%20android.content.ContentValues%29)函数会容易得多，它会处理所有这些：

```
ContentValues cv = new ContentValues();
cv.put(KEY_TAGID, id);
cv.put(KEY_TAGNAME, group);
cv.put(KEY_UPDATED_AT_TAG, updatedAt);
cv.put(KEY_CREATED_AT_TAG, createdAt);
db.insert(DATABASE_USERTAG, null, cv); 
```

# vim - vim 没有将 Tab 键读取为

> ID：16124407
> 
> 赞同：1
> 
> 时间：2013-04-20T19:40:11.740
> 
> 标签：vim

我在 Kubuntu 上使用 vim 7。我刚刚安装了 UltiSnips 插件，我注意到 Tab 键没有扩展片段。在检查了密钥的映射并验证它是否正确后，我发现当我点击 Tab 时，我的 vim（和 gvim）将其读取为`^GS`，而不是`<Tab>`.

我发现这`^GS`是来自环绕插件的映射，删除它后，Tab 键被读取为`^H`但它仍然不会触发片段，并且没有`^H`.

如何将 Tab 键读取为`<Tab>`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T19:54:20.730

经过更多调查，这与 vim 及其处理方式无关`<Tab>`。这是 UltiSnips 中的一个问题，并且未读取自定义片段。

# wordpress - 如何获得自定义帖子类型的使用类别？

> ID：16124408
> 
> 赞同：0
> 
> 时间：2013-04-20T19:40:16.870
> 
> 标签：wordpress

我创建了一个“视频”自定义帖子类型。

```
add_action( 'init', 'create_video_postype' );

function create_video_postype() {     
$labels = array(
    'name' => _x('Videos', 'post type general name'),
    'singular_name' => _x('Video', 'post type singular name'),
    'add_new' => _x('Add New', 'video'),
    'add_new_item' => __('Add New Video'),
    'edit_item' => __('Edit Video'),
    'new_item' => __('New Video'),
    'view_item' => __('View Video'),
    'search_items' => __('Search Video'),
    'not_found' =>  __('No Video found'),
    'not_found_in_trash' => __('No Video found in Trash'),
    'parent_item_colon' => '',
);

$args = array(
    'label' => __('Videos'),
    'labels' => $labels,
    'public' => true,
    'can_export' => true,
    'show_ui' => true,
    '_builtin' => false,
    'capability_type' => 'post',
    'rewrite' => array( "slug" => 'video' ),
    'query_var' => true,
    'menu_icon' => '',  
    'hierarchical' => true,    
    'supports'=> array('title', 'thumbnail', 'excerpt', 'editor', 'page-attributes') ,
    'show_in_nav_menus' => true ,
    'taxonomies' => array('category')

);

register_post_type( 'video', $args);

} 
```

我需要获取“视频”帖子中使用的所有类别。当我使用这个函数 get_categories() 时，它会返回 post 使用的所有类别。

# youtube - 播放 YouTube 视频的多个部分

> ID：16124410
> 
> 赞同：0
> 
> 时间：2013-04-20T19:40:28.067
> 
> 标签：youtube

我知道，由于 Youtube 提供了 api，我们可以随时开始播放 youtube 视频。

我想要的是，我想播放视频的多个部分。例如，在一个视频中，我想从第 1 分钟播放到第 2 分钟，然后再从第 5 分钟播放到第 10 分钟，再从第 43 分钟播放到第 54 分钟。

是否有用于执行此操作的 API 或工具。

我认为的一件事是创建不同的视频并将它们作为播放列表，但不确定它会多快。

让我知道是否有办法做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T06:19:42.297

有[Youtube Player API](https://developers.google.com/youtube/iframe_api_reference)。

[#Getting started](https://developers.google.com/youtube/iframe_api_reference#Getting_Started)显示了一个视频示例，该视频从开始播放 6 秒后停止。

[#seekTo](https://developers.google.com/youtube/iframe_api_reference#seekTo)允许推进视频播放。

您也可以使用[#loadVideoById](https://developers.google.com/youtube/iframe_api_reference#loadVideoById)通过对象语法传入开始时间和结束时间，尽管此方法可能需要多次加载相同的视频。

# c# - 使用 IComparable 时出现 C# 排序错误

> ID：16124411
> 
> 赞同：1
> 
> 时间：2013-04-20T19:40:33.933
> 
> 标签：c#, sorting, arraylist, icomparable

我尝试了几个小时使用 IComparable 对 ArrayList 进行排序......

请注意，我不能使用 IComparer 来执行此操作。

这是代码：

```
class Pays : IComparable<Pays>
{
    private string nomPays;

    public string NomPays{get{return nomPays;}set{nomPays = value;}}

    public int CompareTo(object x)
    {
        Pays myX = (Pays)x;
        return string.Compare(this.nomPays, x.nomPays);
    }
}

class TestPays
{
    public static ArrayList LireRemplirPays(){ //...blabla
        return uneListe;
    }
    static void Main(string[] args){
        ArrayList paysList = LireRemplirPays();
        paysList.Sort();          
    }
} 
```

错误粘贴：System.ArgumentException: 至少一个对象必须实现 IComparable System.Collections.Comparer.Compare(Object a, Object b)......

我能做些什么 ？谢谢阅读

编辑 ：

所以我的第一个错误是：

```
class Pays : IComparable<Pays> 
```

代替

```
class Pays : IComparable 
```

第二个错误：

```
return nomPays.CompareTo(myX.nomPays); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T19:42:38.613

您应该使用通用列表而不是`ArrayList`：

```
class TestPays
{
    public static **List<Pays>** LireRemplirPays() { //...blabla
        return uneListe; // Cast here if necessary
    }
    static void Main(string[] args) {
        **List<Pays>** paysList = LireRemplirPays();
        paysList.Sort();          
    }
}
```

`ArrayList`不是通用的，可以包含任何类型的对象，并且`object`不实现`IComparable`.

此外，如果`NomPays`实际上不进行任何检查，您可以使用速记而不必显式声明支持字段：

```
public string Nom { get; set; } 
```

# android - 未调用 onListItemClick

> ID：16124412
> 
> 赞同：-1
> 
> 时间：2013-04-20T19:40:34.833
> 
> 标签：android, onitemclicklistener

我正在使用 ListFragment 的扩展在屏幕上显示一些数据。我尝试通过 onListItemClick 函数处理列表项点击，但是当我点击列表元素时，不会调用此函数。当我单击时，列表元素甚至不会变成蓝色。看起来它感觉不到我的点击。这是我的代码：

数据列表片段.java：

```
public class DataListFragment extends ListFragment {   
    private CustomArrayAdapter mAdapter;
    public void setAdapter(CustomArrayAdapter adapter) {
        this.mAdapter = adapter;
        setListAdapter(mAdapter);
    }
    @Override 
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        setEmptyText("");
        mAdapter = new CustomArrayAdapter(getActivity());
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        // I want this function to be called
        Log.i("DataListFragment", "Item clicked: " + id);
    }
} 
```

single_item.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">    
        <TextView
            android:id="@+id/train_info"
            android:layout_width="270dp"
            android:layout_height="wrap_content" 
            android:singleLine="true"
            android:ellipsize="marquee" 
            android:marqueeRepeatLimit="marquee_forever"
            android:scrollHorizontally="true" 
            android:textSize="20sp"
            android:focusable="true" 
            android:textIsSelectable="true"
            android:focusableInTouchMode="true" 
            android:freezesText="true">
    </TextView>    
    <TextView
        android:id="@+id/time_info"
        android:gravity="center"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ellipsize="marquee"
        android:textIsSelectable="true"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:freezesText="true"
        android:marqueeRepeatLimit="marquee_forever"
        android:scrollHorizontally="true"
        android:singleLine="true"
        android:textSize="20sp" >
    </TextView>
</LinearLayout> 
```

（我列表中的每一项都是两个文本视图是一行）

最后是 CustomArrayAdapter.java：

```
public class CustomArrayAdapter extends ArrayAdapter<FinalData> {
    private final LayoutInflater mInflater;

    public CustomArrayAdapter(Context context) {
        super(context, android.R.layout.simple_list_item_2);
        mInflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    public void setData(ArrayList<FinalData> data) {
        clear();
        if (data != null) {
            for (FinalData appEntry : data) {
                add(appEntry);
            }
        }
    }
    @Override 
    public View getView(int position, View convertView, ViewGroup parent) {
        View view;

        if (convertView == null) {
            view = mInflater.inflate(R.layout.single_item, parent, false);
        } else {
            view = convertView;
        }

        FinalData item = getItem(position);
        ((TextView)view.findViewById(R.id.train_info)).setEllipsize(TruncateAt.MARQUEE);
        ((TextView)view.findViewById(R.id.train_info)).setSelected(true);
        ((TextView)view.findViewById(R.id.time_info)).setEllipsize(TruncateAt.MARQUEE);
        ((TextView)view.findViewById(R.id.time_info)).setSelected(true);
        ((TextView)view.findViewById(R.id.time_info)).setText(item.getFullData());
        ((TextView)view.findViewById(R.id.train_info)).setText(item.getTimeData());

        return view;
    }
} 
```

所以，这段代码以我想要的方式显示了我想要的所有数据，但感觉不到我的点击。当我触摸它们时，列表中的项目甚至不会变成蓝色......

我只是遵循 android 开发人员指南之一。我的片段中有一个 onListItemClick 函数，但它不起作用。为什么？

[http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T19:55:06.323

你需要使用 itemclicklistener

在那写

```
parent.getItemAtPosition(position) 
```

如果它是您用于列表视图的字符串，则将上述语句返回的此值转换为字符串。

希望它对你有帮助。

# php - 在 MySql 中使用变量来计算用户对数字标量的评分

> ID：16124415
> 
> 赞同：1
> 
> 时间：2013-04-20T19:41:09.883
> 
> 标签：php, mysql, sql, pdo

在我目前工作的网站上，有一个类似于本网站的评分系统，每个客户都可以累积“积分”或“星星”。

现在我正在开发一个自动电子邮件系统，它将发送我所有用户的前 5 名列表和他们的分数，并与前 5 名列表并排发送收件人用户的个人分数。

现在由于这是服务器（cronjob）上的例行任务，效率方面非常重要，我使用 mySql 变量来获取每个用户的评分。

我想使用相同的查询来获取其他用户和他的评分（即使他在 100 位），但由于某种原因，我没有得到正确的结果。

工作代码：

```
 private function getTopStars($adminId){
        try{
            $conn = DBLink::getInstance();
            $query = "SELECT @rownum:=@rownum+1 AS rank, u.user_id, u.contact_name AS name, p.points  FROM scores p, (SELECT @rownum:=0) r, users u WHERE u.stars_enabled = 1 and u.user_id=p.user_id and p.admin_id = :admin_id AND u.user_id <> :adminId ORDER BY points DESC";
            $sth = $conn->prepare($query);
            $sth->bindParam(':adminId', $adminId, PDO::PARAM_INT);
            $sth->execute();
            $topStars = $sth->fetchAll(PDO::FETCH_ASSOC);
            $html = '';
            foreach($topStars as $topStar){
                $html .= " <div class='score'>
                         <div style='float:left;padding:2px;' class='rank'> " .
                        $topStar['rank'] . "# </div><div style='float:left;padding:2px;font-size: 12px;'>" . $topStar["name"] . " </div><div style='float:left;padding:2px;font-size: 11px;'> ( " . $topStar["points"]. " <img src='http://mydev.com/images/star_icon.jpg' /> )</div></div><br style='clear:both;'/>";
            }
            return $html;

        }   
         catch(PDOException $err){...}
} 
```

拒绝工作的补充：

```
private function getTopStars($adminId, $userId){
        try{
            $conn = DBLink::getInstance();
            $query = "SELECT @rownum:=@rownum+1 AS rank, u.user_id, u.contact_name AS name, p.points  FROM scores p, (SELECT @rownum:=0) r, users u WHERE u.stars_enabled = 1 and (u.user_id=p.user_id and p.admin_id = :admin_id) OR (u.user_id = :uid) AND u.user_id <> :adminId ORDER BY points DESC";
            $sth = $conn->prepare($query);
            $sth->bindParam(':adminId', $adminId, PDO::PARAM_INT);
            $sth->bindParam(':uid', $userId, PDO::PARAM_INT);
            $sth->execute();
            $topStars = $sth->fetchAll(PDO::FETCH_ASSOC);
            $html = '';
            foreach($topStars as $topStar){
                $html .= " <div class='score'>
                         <div style='float:left;padding:2px;' class='rank'> " .
                        $topStar['rank'] . "# </div><div style='float:left;padding:2px;font-size: 12px;'>" . $topStar["name"] . " </div><div style='float:left;padding:2px;font-size: 11px;'> ( " . $topStar["points"]. " <img src='http://mydev.com/images/star_icon.jpg' /> )</div></div><br style='clear:both;'/>";
            }
            return $html;

        }   
         catch(PDOException $err){...}
} 
```

如果我不能让它以这种方式工作，我唯一能做的就是实现另一个私有方法，该方法将获取每个用户的个人信息，使用分组和数学 sql 函数来获得他在分数中的评分表，我认为这是对服务器资源的浪费。

查询的逻辑：我想接收目前排名最高的 5 个用户，按他们的位置排序和标记（使用变量）或我正在向其发送当前电子邮件的当前用户，具有相同的信息和我想从排名表中排除管理员。任何想法为什么它不起作用？我需要索引分数列吗？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:27:34.067

这是您描述为“工作”的选择

```
SELECT @rownum:=@rownum+1 AS rank, u.user_id, u.contact_name AS name, p.points  
FROM scores p, (SELECT @rownum:=0) r, users u 
WHERE u.stars_enabled = 1 
  AND u.user_id=p.user_id 
  AND p.admin_id = :admin_id 
  AND u.user_id <> :adminId 
ORDER BY points DESC 
```

这是您描述为“不工作”的选择

```
SELECT @rownum:=@rownum+1 AS rank, u.user_id, u.contact_name AS name, p.points  
FROM scores p, (SELECT @rownum:=0) r, users u 
WHERE  u.stars_enabled = 1 
  AND (u.user_id=p.user_id AND p.admin_id = :admin_id) 
  OR  (u.user_id = :uid) 
  AND  u.user_id <> :adminId 
ORDER BY points DESC 
```

在 MySQL 中，“AND”的优先级高于“OR”，这意味着您的 WHERE 条件将被评估为：

```
(u.stars_enabled = 1 AND u.user_id=p.user_id AND p.admin_id = :admin_id)
OR  
(u.user_id = :uid AND  u.user_id <> :adminId ) 
```

这可能不是您想要的，但我实际上并不了解您想要实现的目标。

根据您的描述“我想让其他用户......”我只能对您实际尝试做的事情进行疯狂的猜测。第一个查询（工作查询）为您提供与某个 admin_id 关联的*所有用户的列表，因此它应该包括您所指的任何“其他用户”？*不？

**编辑**

我想我现在明白你的问题了。您正在谈论的其他用户已经是该排名的一部分。您正在尝试做的是将查询限制为 5 行*加上*特定用户的 1 行，如果该用户不属于前 5 个顶部行。这可以通过子查询来实现：

```
SELECT * FROM (
    SELECT @rownum:=@rownum+1 AS rank, u.user_id, u.contact_name AS name, p.points  
    FROM scores p, (SELECT @rownum:=0) r, users u 
    WHERE u.stars_enabled = 1 
      AND u.user_id=p.user_id 
      AND p.admin_id = :admin_id 
      AND u.user_id <> :adminId 
    ORDER BY points DESC
) WHERE rank<=5 or u.user_id=:uid 
```

# apache - 当我尝试为我的用户头像添加照片时，我在多站点 Drupal 安装中不断收到文件上传错误

> ID：16124416
> 
> 赞同：0
> 
> 时间：2013-04-20T19:41:14.937
> 
> 标签：apache, drupal, file-upload

当我尝试为我的用户个人资料上传图片时，不断收到以下错误：

```
The specified file temporary://picture-1-1366485906.jpg could not be copied, because the destination directory is not properly configured. This may be caused by a problem with file or directory permissions. More information is available in the system log 
```

我有一个多站点安装，这意味着我有以下内容：

```
sites/domain1.com
sites/domain2.com
sites/domain3.com 
```

它没有在第一个域上发生，但在域 2 和 3 上正在发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:07:38.493

Go to file system url of each website & make sure details are saved there properly.

Example: [http://domain2.com/admin/settings/file-system](http://domain2.com/admin/settings/file-system)

# mysql - MySQL：根据表格内容自动生成视图

> ID：16124417
> 
> 赞同：0
> 
> 时间：2013-04-20T19:41:15.883
> 
> 标签：mysql, view, triggers

我有一个数据库，其中有一个包含电子元件的表。我想根据组件的类型创建视图。

假设我的表有 2 个字段：

*   类别
*   子类别

现在假设我的桌子上有很多径向 Rasistor。它们都有类别：电阻器，子类别：径向。我想执行这样的查询：

```
CREATE VIEW `Resistor - Radial` AS SELECT * FROM `components` WHERE `Category`='Resistor' AND `Sub Category`='Radial' 
```

这很简单。现在我想在每次用户输入新零件、删除零件或修改现有零件时自动生成这些视图。我想到了触发器，但对它们了解不多。trigger 会是一个好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T01:04:18.610

我认为对您的问题的“理想”答案是在表上有一个插入触发器，然后让这个触发器创建一个视图。但是，为了使用用户生成的名称创建视图，您需要使用动态 SQL。 [而这在 MySQL 中是不支持的](http://dev.mysql.com/doc/refman/5.5/en/stored-program-restrictions.html)。

另一种解决方案是返回表的用户定义函数。但这也不是 MySQL 的一部分。

所以，如果你真的想这样做，那么我可以想到两个选择。第一种是将所有插入包装到存储过程中的表中。然后存储过程可以调用动态 SQL 来创建视图。

另一种是每天（每小时？每分钟？）在表中查找新记录的工作。找到新组合后，创建视图。

# php - Doctrine MongoDB 引用和继承

> ID：16124420
> 
> 赞同：0
> 
> 时间：2013-04-20T19:41:36.377
> 
> 标签：php, mongodb, doctrine-odm

我在使用 Doctrine MongoDB ODM 时遇到问题。场景很简单（我认为）。我有一组具有 COLLECTION_PER_CLASS 继承模型（基础、产品等）的文档。这一切都很好，我可以像往常一样持久化对象。

```
/**
 * @ODM\Document(collection="content_base")
 * @ODM\InheritanceType("COLLECTION_PER_CLASS")
 */
class Base {

/**
 * @ODM\Document(collection="content_products")
 */
class Product extends Base { 
```

现在，我有另一个文档（项目），我想为继承的文档创建 ReferenceOne：

```
/**
 * @ODM\ReferenceOne(targetDocument="Base")
 */
private $content; 
```

这就是我遇到问题的地方，因为 Doctrine ClassLoader 抱怨类 Base 被重新声明：

```
 Fatal error: include(): Cannot redeclare class content\documents\types\base in /vendor/composer/ClassLoader.php on line 183 
```

我有点困惑为什么这会是一个问题，或者这样做的正确方法是什么？

**更新**

我刚刚注意到，如果我从 ReferenceOne 注释中删除“targetDocument”，我会得到我想要的结果。这是正确的方法吗？

谢谢，格雷格

# c# - 在 XNA 中错误地加载地形 + 第一人称相机

> ID：16124422
> 
> 赞同：0
> 
> 时间：2013-04-20T19:42:04.660
> 
> 标签：c#, visual-studio-2010, xna, 3dsmax

我有一个项目很快就要到期了，我在尝试加载我在 3D Studio Max 中制作的模型时遇到了很多问题。我制作的模型是我想要的 XNA 游戏中的地形。这是我到目前为止所做的：

方法：

```
 GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;

    Model terrainModel;
    Vector3 terrainPosition = Vector3.Zero;

    Vector3 cameraPosition = new Vector3(0.0f, 60.0f, 160.0f);
    Vector3 cameraLookAt = new Vector3(0.0f, 60.0f, 160.0f);
    Matrix cameraProjectionMatrix;
    Matrix cameraViewMatrix; 
```

加载内容（）

```
 spriteBatch = new SpriteBatch(GraphicsDevice);

        cameraViewMatrix = Matrix.CreateLookAt(
            cameraPosition,
            Vector3.Zero,
            Vector3.Up);

        cameraProjectionMatrix = Matrix.CreatePerspectiveFieldOfView(
            MathHelper.ToRadians(80.0f),
            graphics.GraphicsDevice.Viewport.AspectRatio,
            1.0f,
            1000.0f);

        terrainModel = Content.Load<Model>("alphastreet"); 
```

平局（游戏时间游戏时间）

```
GraphicsDevice.Clear(Color.CornflowerBlue);

        DrawModel(terrainModel, terrainPosition);

        // TODO: Add your drawing code here

        base.Draw(gameTime); 
```

然后我想画：

```
void DrawModel(Model model, Vector3 modelPosition)
    {
        foreach (ModelMesh mesh in model.Meshes)
        {
            foreach (BasicEffect effect in mesh.Effects)
            {
                effect.EnableDefaultLighting();
                effect.PreferPerPixelLighting = true;

                effect.World = Matrix.CreateTranslation(modelPosition);
                effect.Projection = cameraProjectionMatrix;
                effect.View = cameraViewMatrix;
            }
            mesh.Draw();
        }
    } 
```

其他一切都与 XNA 文件的外观相同。它自己的模型看起来像一条相当简单的街道。然而，在 XNA 加载模型时，它只是加载窗口中的一个大块。

我不知道我在做什么让模型像这样加载，但它让我把头发拉出来。任何帮助，将不胜感激。

另外，任何人都可以指导我进行演练/指导或创建第一人称射击相机的课程，因为那是我要去的游戏。我可能不应该选择那个，但现在改变已经太晚了，所以如果你也能在那里提供帮助，你真的会拯救我的皮肤！

谢谢，杰克！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:18:22.610

模型中是否有多个网格，如果有，您是否尝试过分别渲染每个网格？您是否尝试过对世界和视图使用身份矩阵来确保这些不是问题？我假设您没有对 xna/directx 进行任何其他状态更改，如果是，请尝试禁用这些。

对于 FPS 相机，您可以只跟踪浮点变量中的 x 和 y 旋转，并根据鼠标在 x 和 y 中移动的距离更新每帧。从这些您可以生成相机视图矩阵；类似于以下内容：

```
var mx = Matrix.CreateRotationX(xangle);
var my = Matrix.CreateRotationY(yangle);
var pos = Matrix.CreateTranslation(position);
var view = mx * my * pos; // These might be in the wrong order, not sure off the top of my head
view.Invert(); 
```

相机总是倒置的，因为向左移动世界向右移动，向左移动世界向右移动等等。

# android - .setText 方法不起作用

> ID：16124425
> 
> 赞同：2
> 
> 时间：2013-04-20T19:42:19.443
> 
> 标签：android, settext

我正在尝试从列表视图中获取字符串值并放入另一个视图中。我已经成功地为我的第一个列表视图做到了这一点，但它似乎不适用于我的第三个。（我设法让它工作，但由于我无法理解的原因它现在停止工作）我正在使用完全相同的方法，并且正在检索我试图检索的信息，因为我在运行问题时已经确认它只是不是改变。

代码

```
 public void onCreate (Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.statseditor);
     dbHelper = new PlayerStatsDatabase(this);
      dbHelper.open();
     Bundle extras = getIntent().getExtras();
     if(extras !=null){
         //String value = extras.getString("Name");
     }
      //Clean all data
    //  dbHelper.deleteAllStats();
      //Add some data
      //dbHelper.insertSomeCountries();

      //Generate ListView from SQLite Database
      //displayListView();
    // list = getListView();
      PlayerNameText = extras.getString("Name");
     btnSave2 = (Button) findViewById(R.id.btnSaveStats);
     btnClear = (Button) findViewById(R.id.btnClearStats);
    txtGoalsScored = (EditText) findViewById(R.id.txtGoal);
    txtMinutesPlayed = (EditText) findViewById(R.id.txtMinPlayed);
    txtSubstituteIn = (EditText) findViewById(R.id.txtSubIn);
    txtSubstituteOut = (EditText) findViewById(R.id.txtSubOut);
    radioSubIn = (RadioButton) findViewById (R.id.rdoSubIn);
    radioSubOut = (RadioButton) findViewById (R.id.rdoSubOut);
    playerRating = (RatingBar) findViewById (R.id.ratingBar1);
    //playerTitle = (TextView) findViewById (R.id.textTitle);
    playerName = (TextView) findViewById (R.id.textView1);
    playerName.setText(PlayerNameText); 
    //playerTitle.setText (PlayerNameText);
    checkBox = (CheckBox) findViewById (R.id.checkBox1);
    if  (checkBox.isChecked()){
        checkBox.append("Booked");
    }
    final CharSequence checkText = checkBox.getText();
    //final Context context = 
 btnSave2.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            PlayerStatsDatabase db = new PlayerStatsDatabase(getApplicationContext());
            db.open();
            db.createStats(txtGoalsScored.getText().toString(),  txtMinutesPlayed.getText().toString(),txtSubstituteIn.getText().toString(),txtSubstituteOut.getText().toString(), checkText.toString());
            db.close();
            dipsplayPlayerName();
            displayListView();

            //Intent intent = new Intent(context, ListItemsActivity.class);
              //  startActivity(intent);
        }
    });
 } 
```

在我使用此方法的第一个实例中，`playerName`实际上更改为`PlayerNameText` 但是当我再次尝试再次使用它时，它不起作用

```
private void dipsplayPlayerName() {
    setContentView (R.layout.statslist);
    Bundle extras = getIntent().getExtras();
    PlayerNameText = extras.getString("Name"); 
     playerTitle = (TextView) findViewById (R.id.textTitle);
     playerTitle.setText (PlayerNameText);

} 
```

有任何想法吗？没有 LogCat，因为应用程序不会崩溃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T23:12:48.777

将您收到的文本数据放入一个字段并使用它，而不是再次从意图中获取它。

此外，请检查 displayListView() 是否不会更改 textView。

# wordpress - WP在不同页面显示不同的自定义字段

> ID：16124428
> 
> 赞同：-3
> 
> 时间：2013-04-20T19:42:49.097
> 
> 标签：wordpress, custom-fields

在 WP admin/'edit page'（不在渲染页面中）中，如何在不同页面中显示不同的自定义字段（元数据）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:18:55.500

查看一个名为[Meta Box](http://www.deluxeblogtips.com/meta-box/)的插件。

> Meta Box 插件提供了一个 API，可以在 WordPress 的编辑页面（添加新/编辑帖子）中轻松实现自定义元框。它适用于自定义帖子类型并支持各种字段类型。

# c++ - C++中创建图adt的执行时间

> ID：16124429
> 
> 赞同：1
> 
> 时间：2013-04-20T19:42:54.040
> 
> 标签：c++, performance, graph

一般来说，创建一个无向图 adt 应该需要很长时间吗？

如果我有一个包含 40 个节点的图，并且每个节点都连接到 20% 的其他节点，那么当我的程序尝试将节点链接在一起时，它就会停止。

我真正能达到的最大值是 20 个节点的 20% 密度。我将顶点链接在一起的代码如下所示：

```
 while(CalculateDensity()){
    LinkRandom();
    numLinks++;
}

void LinkRandom(){
int index = rand()%edgeList.size();
int index2 = rand()%edgeList.size();
edgeList.at(index).links.push_back(edgeList.at(index2));
edgeList.at(index2).links.push_back(edgeList.at(index));
} 
```

有什么办法可以更快地做到这一点？

编辑：这是数据结构声明的地方：

```
 for(int i=0; i<TOTAL_NODES; i++){
    Node *ptr = new Node();
    edgeList.push_back(*ptr);       //populate edgelist with nodes
}
cout<<"edgelist populated"<<endl;
cout<<"linking nodes..."<<endl;
while(CalculateDensity()){
    LinkRandom();
    numLinks++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:15:57.083

在我看来，您正在复制每个 push_back 的不断增长的结构。

这可能是缓慢的原因。

如果您可以显示数据结构声明，我可以尝试更具体。

*编辑*我仍然错过了节点声明，不过我会尝试将 edgeList 更改为指向节点的*指针列表。*然后

```
// hypothetic declaration
class Node {
  list<Node*> edgeList;
}

//populate edgelist with nodes
for(int i=0; i<TOTAL_NODES; i++)
  edgeList.push_back(new Node());
....

void LinkRandom(){
  int index = rand()%edgeList.size();
  int index2 = rand()%edgeList.size();
  edgeList.at(index)->links.push_back(edgeList.at(index2));
  edgeList.at(index2)->links.push_back(edgeList.at(index));
} 
```

# lua - Lua：检测位域中的上升/下降沿

> ID：16124430
> 
> 赞同：0
> 
> 时间：2013-04-20T19:42:57.383
> 
> 标签：lua, bit-manipulation, edge-detection

我正在调用一个函数，该函数返回一个整数，该整数表示 16 个二进制输入的位域，每种颜色都可以打开或关闭。

我正在尝试创建一个函数来获取旧状态和新状态之间的变化，

例如

```
function getChanges(oldColors,newColors)

  sampleOutput = {white = "",orange="added",magenta="removed" .....}
  return sampleOutput
end 
```

我尝试从 newColors 中减去 oldColors，从 oldColors 中减去新颜色，但这似乎会导致混乱，如果超过 1 个值更改。

这是为了检测来自多个输入的上升/下降沿。

* ***编辑**：似乎有一个 [可用的 lua 位 api 子集](http://computercraft.info/wiki/Bit_%28API%29)

来自：[ComputerCraft 维基](http://computercraft.info/wiki/Colors_%28API%29)

```
colors.white     1       0x1     0000000000000001
colors.orange    2       0x2     0000000000000010
colors.magenta   4       0x4     0000000000000100
colors.lightBlue 8       0x8     0000000000001000
colors.yellow    16      0x10    0000000000010000
colors.lime      32      0x20    0000000000100000
colors.pink      64      0x40    0000000001000000
colors.gray      128     0x80    0000000010000000
colors.lightGray 256     0x100   0000000100000000
colors.cyan      512     0x200   0000001000000000
colors.purple    1024    0x400   0000010000000000
colors.blue      2048    0x800   0000100000000000
colors.brown     4096    0x1000  0001000000000000
colors.green     8192    0x2000  0010000000000000
colors.red       16384   0x4000  0100000000000000
colors.black     32768   0x8000  1000000000000000 
```

（这里应该有一个值表，但我无法计算出 markdown 的语法，看起来 stackoverflow 忽略了标准的 html 部分。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T20:01:39.930

```
function getChanges(oldColors,newColors)
   local added = bit.band(newColors, bit.bnot(oldColors))
   local removed = bit.band(oldColors, bit.bnot(newColors))
   local color_names = {
      white = 1,
      orange = 2,
      magenta = 4,
      lightBlue = 8,
      yellow = 16,
      lime = 32,
      pink = 64,
      gray = 128,
      lightGray = 256,
      cyan = 512,
      purple = 1024,
      blue = 2048,
      brown = 4096,
      green = 8192,
      red = 16384,
      black = 32768
   }
   local diff = {}
   for cn, mask in pairs(color_names) do
      diff[cn] = bit.band(added, mask) ~= 0 and 'added' 
         or bit.band(removed, mask) ~= 0 and 'removed' or ''
   end
   return diff
end 
```

# performance - Heroku 上偶尔的缓慢请求

> ID：16124431
> 
> 赞同：19
> 
> 时间：2013-04-20T19:43:08.723
> 
> 标签：performance, heroku

我们看到 Heroku 的性能不一致，这与最近的独角兽/智能路由问题无关。

这是一个请求的示例，通常需要大约 150 毫秒（20 次中有 19 次是需要多长时间）。您可以看到，在这个请求中，它花费了大约 4 秒，或者长了 1 到 2 个数量级。

![在此处输入图像描述](https://i.stack.imgur.com/hvq2Y.png)

需要注意的一些事项：

*   数据库不是瓶颈，它只花了 25ms 进行 db 查询
*   我们有足够多的测功机，所以我认为这不是瓶颈（20 个双测功机运行独角兽，每人 5 个工人，我们每分钟只收到 1000 个请求，平均响应时间为 150 毫秒，这意味着我们应该能够服务(60 / 0.150) * 20 * 5 = 每分钟 40,000 个请求。换句话说，在进行此测量时，我们的 dynos 容量是 40 倍。

所以我想知道是什么导致这些偶尔的缓慢请求。正如我所提到的，有趣的是，它似乎发生在大约 20 个请求中的 1 个。我唯一能想到的就是盒子上有嘈杂的邻居问题，或者路由层的性能不一致。如果有人有其他信息或想法，我会很好奇。谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T06:07:01.687

我自己一直在追求类似的问题，到目前为止运气不佳。

我想首要任务是推荐 NewRelic。它可能会为您提供有关这些案例的更多信息。

其次，我建议您查看排队时间：您的请求排队了多长时间。查看 NewRelic，或者使用 Heroku 添加到传入请求中的“开始时间”HTTP 标头自己做（只需打印 now() 减去“开始时间”作为队列时间）。

当我的情况让我失败时，我尝试提出可能出错的事情，这里有一个（非正统的？奇怪的？）列表：

1) DNS——您是否在您的视野中进行任何 DNS 调用？这些可能需要一段时间。甚至用于解析 DB 主机名、Redis 主机名、外部服务提供商等的 DNS 请求。

2) 日志性能——Heroku 使用他们的“Logplex”收集你所有的标准输出，然后将其排入你自己定义的日志排水、Papertrail 等服务。没有关于此性能的文档，并从你的标准输出写入理论上，当 Heroku 刷新它可能在那里的任何缓冲区时，进程可能会阻塞一段时间。

3) 获取数据库连接——不确定您使用的是哪个框架，但也许您有一个连接池，您从中获取数据库连接，这需要时间？它不会显示为查询时间，它将成为您进程的阻塞时间。

4) Dyno 性能——Heroku 有一个附加功能，可以每隔几秒打印一些服务器指标（负载平均值、内存）到标准输出。我使用 Graphite 来绘制这些图表，并寻找指标与我看到“零星慢速请求”实例增加的时间之间的相关性。它没有帮助我，但可能会帮助你:)

请让我们知道您的想法。

# validation - GraphCmd.exe：不支持 URI 格式

> ID：16124438
> 
> 赞同：1
> 
> 时间：2013-04-20T19:44:15.007
> 
> 标签：validation, architecture, visual-studio-2012, model, msbuild

我正在尝试通过我的 CI 服务器中的 MsBuild 验证架构。我的解决方案中有一个设计模型项目（.modelproj），并且我已更改项目文件以`Microsoft.VisualStudio.TeamArchitect.ModelingProject.targets`从默认位置以外的单独位置加载。

除了这个尴尬的错误，一切都很好。即使我转储了 .dgql 文件并查看了它的内容，我也无法弄清楚它的问题。

```
dgql file - '*/"Microsoft.FileSystem.ProcessFile"("C:\build-dir\AMXB-AMBTMP-JOB1\Source\DesignModel\LayerDiagram.layerdiagram")/ + FilePath.Equals("C:\build-dir\AMXB-AMBTMP-JOB1\Source\DesignModel\LayerDiagram.layerdiagram")/"LayerDesigner.LoadArchitecture"/ */"Microsoft.AllNodes" 
```

这个项目可能有什么问题？非常感谢任何帮助。

# java - Spring MVC 格式化程序和多对一实体

> ID：16124439
> 
> 赞同：1
> 
> 时间：2013-04-20T19:44:34.570
> 
> 标签：java, spring, spring-mvc

我正在开发一个 spring mvc 项目。Name 类与性别类具有多对一的关系。我有一个 Genderformatter 来处理创建和更新名称所需的选择列表：

```
public class GenderFormatter implements Formatter<Gender> {

    @Autowired
    private GenderRepository genderRepository;

    public String print(Gender gender, Locale locale) {
        return gender.getId().toString();
    }

    public Gender parse(String id, Locale locale) throws ParseException {   
        Gender gender = this.genderRepository.findOne(Integer.valueOf(id));
        return gender;
    }
} 
```

这是 addupdatename.jsp 的相关部分

```
 <form:form modelAttribute="name" method="${method}"
          class="form-horizontal" id="add-name-form">
          ...
          <!-- Gender Select List -->
          <spring:bind path="gender">
            <c:set var="cssGroup"
              value="control-group ${status.error ? 'error' : '' }" />
            <div class="${cssGroup}">
              <label class="control-label">Gender</label>

              <div class="controls">
                <form:select path="gender">
                  <form:option value="${name.gender.id}" label="${name.gender.gender}" />
                  <form:options items="${genders}" itemValue="id" itemLabel="gender" />
                </form:select>
                <span class="help-inline">${status.errorMessage}</span>
              </div>
            </div>
          </spring:bind> 
```

NameController 相关的 GET 和 POST：

```
 @RequestMapping(value = "/names/new", method = RequestMethod.GET)
      public String initCreationForm(ModelMap model) {
        Name name = new Name();
        model.addAttribute(name);
        model.put("genders", this.nameAdminService.findGenders());
        return "name/addupdatename";
      }

      @RequestMapping(value = "/names/new", method = RequestMethod.POST)
      public String processCreationForm(@Valid Name name, BindingResult result,
          SessionStatus status) {

        if (result.hasErrors()) {
          return "name/addupdatename";
        } else {
          this.nameRepository.save(name);
          status.setComplete();
          return "redirect:/names/" + name.getId();
        }
      } 
```

这一切都很好。现在我正在为 Gender 实体添加 CRUD 函数并遇到问题。GenderController 和 jsp 对象遵循与 Name 代码相同的模式。只要将 GenderFormatter 注册为转换服务，性别表单就不会处理数据的添加或更新。我假设因为在性别添加或更新表单帖子中，格式化程序正在尝试将性别字段转换为性别对象。

有没有办法指定格式化程序应该格式化的时间或字段？

# semantic-web - 使用给定的本体注释网页

> ID：16124441
> 
> 赞同：0
> 
> 时间：2013-04-20T19:44:37.103
> 
> 标签：semantic-web, jena, ontology, owl

我必须使用特定域的特定本体来注释一些网页，并以 RDF 格式生成带注释的网页。所以有任何可用的开源工具可以完成我的要求。我是耶拿编程的新手。所以请建议一些链接或书籍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:11:00.377

[您可以使用RDFa](http://en.wikipedia.org/wiki/RDFa)标记注释您的 HTML 页面（查看页面中的示例），然后使用[此库](https://github.com/shellac/java-rdfa)将页面转换为 RDF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:29:28.020

如果注释意味着某种语义消歧，您需要像@loopasam 提议的那样手动执行此操作。对于清晰的映射（例如`<title>`标记到`dc:title`），您可能希望使用 XSLT 添加 RDFa 标记。

# java - 如何获取对象的动态类名？

> ID：16124442
> 
> 赞同：-1
> 
> 时间：2013-04-20T19:44:38.073
> 
> 标签：java, class

所以我有一个演员列表，我想获取每个演员的动态类名。例如，这是我的演员列表：人、鸟、牛。

我想得到相同的结果：“人，鸟，牛”，但在 Actors 类中没有名称属性。可能吗？

示例代码（这里我使用数组而不是列表）：

```
public Area map[][];
map[0][0] = new AntHillArea();
String name = map[0][0].getClass().getName(); //this results "Area" instead of AntHillArea 
```

**编辑**：代码还有其他问题， getClass().getName() 工作正常。不管怎么说，还是要谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T19:47:09.953

```
String className = obj.getClass().getSimpleName(); 
```

**更新：**

```
public class Test {
    public static void main(String[] args) {
        Area map[][] = new Area[1][1];
        map[0][0] = new AntHillArea();
        String name = map[0][0].getClass().getSimpleName(); // returns "AntHillArea"
        System.out.println(name);
    }
}

class Area {

}

class AntHillArea extends Area {

} 
```

使用`getSimpleName`方法。它只给你类，如果有的话，它会删除任何包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T19:48:21.837

你可以这样做：

```
class Dog
{
    //code
    public String getName()
    {
       return Dog.class.getName();
    }

    //better
    @Override
    public String toString()
    {
       return Dog.class.getName();
    }
} 
```

对于每个班级也是如此。或者有一个全球性的，如其他答案中提到的那样：

```
public static String getClassName(Class<?> clas){
return clas.getName();
} 
```

使用`Dog dog = new Dog(); getClassName(dog.class);`

# eclipse - Eclipse 中的 Git 同步问题

> ID：16124443
> 
> 赞同：1
> 
> 时间：2013-04-20T19:44:41.650
> 
> 标签：eclipse, git, github, repository

我使用 Git 将我的 Eclipse 项目与我的工作机器和家用机器同步。最近我在一台机器上同步时遇到了问题。

一台机器和 Git hub 中的代码结构如下所示

```
Project/
    -bin
    -src
    -doc
    -.settings
    -.classpath
    -.project 
```

我与有问题的机器同步时得到的结构是

```
Project/
    -bin/
        -src
    -src
    -doc
    -.setting
    -.classpath
    -.project 
```

有两个 src 副本，其中包含使包和项目引用无效的相关源文件。我尝试了很多次，包括从硬盘中删除项目然后重新获取它，但它并没有解决问题。这种问题模式在我的其他新项目中也一直存在，我遇到了同样类型的问题，我根本无法解决。

**额外的观察**

在我最初的帖子之后尝试了不同的方法之后，观察到不是 Git-hub 或 Git 同步造成了麻烦。它与 eclipse 加载项目有关。

因此，作为一种补救措施，我现在将有问题的项目作为文件系统加载到我的本地仓库中，问题就解决了。如果它是作为现有项目导入的，那么问题将再次出现。

因此，根据上述观察，这与 eclipse 加载项目有关，我查看了 .project 文件和 .settings 文件夹以识别可能的原因，但无法确定。

到目前为止，我知道如何解决这个问题，但我不知道为什么会这样。如果有人能解释我为什么会发生这种情况，我将不胜感激。

# unicode - 搜索引擎将如何对不同的 unicode 做出反应？

> ID：16124444
> 
> 赞同：0
> 
> 时间：2013-04-20T19:44:42.350
> 
> 标签：unicode, character-encoding, fonts, seo, search-engine

我正在开发一个格鲁吉亚语的网站。格鲁吉亚字母表有自己的 Unicode 范围，但也有一些特殊的字体，用格鲁吉亚字形代替英文字符，有点像“Symbol”和“Dingbats”字体。

例如，字符串“saqarTvelo”将使用这些字体呈现为“საქართველო”。所以现在我有两个选择，不知道该怎么做：

1.  在我的网站上使用格鲁吉亚语 Unicode，但问题是所有字体都是为英语 Unicode 创建的，并且不适用于格鲁吉亚语 Unicode。

2.  使用带有英文 Unicode 的格鲁吉亚字体。但我不知道搜索引擎会如何反应。

请告诉我该怎么做，我被堆积了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T04:10:13.707

简短的回答是，使用您在选项 1 中的意思的方法，搜索引擎会将您的文本中的“საქართველო”一词视为“saqarTvelo”，因此正常搜索将失败。

这个问题似乎是指在网页上使用格鲁吉亚字母的两种不同方式：

1.  使用 Unicode 编码，因此字符将使用 Unicode 编码字体（这是大多数字体，但大多数字体不包含格鲁吉亚字母）呈现。
2.  使用非标准的“私有”编码，通常将 256 个不同的代码位置（8 位组合）映射到某些目的所需的任何字符。这假定文本是使用以相同方式编码的字体呈现的。

方法 2 可以说是一种[错误的方法](http://alis.isoc.org/web_ml/html/fontface.en.html)，但它从早期就已经在 Web 上使用（即使 CSS 不可用并且不得不求助于`<font face=...>`设置字体），尤其是在早期。除非用户的计算机具有特定的“私人”编码字体（或某些字体编码完全相同的方式），否则它确实不起作用。由于搜索引擎与字体无关，它们只看到 8 位代码并尝试以页面声明或隐含的编码来解释它们，而不是“私有”编码（无法声明，因为它没有公布的定义和没有标准名称，或任何名称）。

方法 1 的问题是，要使其工作，用户的计算机需要有*一些*（Unicode 编码的字体）支持所使用的字符。如今，使用可下载字体（网络字体）通过`@font-face`. [支持格鲁吉亚字母](http://www.fileformat.info/info/unicode/char/10e1/fontsupport.htm)的字体包括一些有用的免费字体，如 DejaVu 字体、GNU Freefont 字体和 Quivira。有关此方法的更多信息，请参阅我[在 HTML 中使用特殊字符的指南](http://www.cs.tut.fi/~jkorpela/html/characters.html)。

使用方法 1，搜索引擎将正确地看到格鲁吉亚字母，前提是文档的编码（通常为 UTF-8）已正确声明或可由搜索引擎推断。

# c - Default drawing for WM_PAINT in a memory DC

> ID：16124445
> 
> 赞同：2
> 
> 时间：2013-04-20T19:44:46.220
> 
> 标签：c, winapi, wndproc

I want to treat `WM_PAINT` message. But at first, I want to let system to do the default drawing, then I draw something else manually.

For example:

```
 case WM_PAINT:
        CallWindowProc(DefWndProcTabControl, hwnd, message, wParam, lParam);
        TabControlOnPaint(hwnd);
        return 0; 
```

This works, but is not very good, since it flicks.

One possibility is to make the default drawing done in a memory DC. But I don't know how to do this if I use `CallWindowProc(DefWndProcTabControl...)`.

Any suggestion for this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T19:47:58.567

如果您正在绘制的窗口支持它，请使用[`WM_PRINT`](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd145216%28v=vs.85%29.aspx)或[`WM_PRINTCLIENT`](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd145217%28v=vs.85%29.aspx)将默认绘制到内存 DC 中。

（尝试通过这种`CallWindowProc`方式不太可能奏效。）

# php - How to resolve the problems with this login script?

> ID：16124459
> 
> 赞同：0
> 
> 时间：2013-04-20T19:46:19.730
> 
> 标签：php

I am stuck on my coding: I need to check that the email is legitimate and also check if the passwords match.

As you can see I've tried to make sure it has '@' in it, but it doesn't work.

```
 <?php
    error_reporting(1);
    include("../site/inc/config.php");

    if (isset($_POST['submit'])) {
        $username = clean($_POST['username']);
        $password = clean($_POST['password']);
        $pass_conf = clean($_POST['password2']);
        $email = clean($_POST['email']);
        $ip = $_SERVER['REMOTE_ADDR'];
        $reg_date = date("F jS, Y - g:i a");
        $md5 = md5($password);

        if(!$username){
            header("Location: /site/register.php?error=1");
            //error
            die;
        }

        if(!$password){
            header("Location: /site/register.php?error=1");
            //error
            die;
        }

        if(!$pass_conf){
            header("Location: /site/register.php?error=1");
            //error
            die;
        }

        if(!$email){
            header("Location: /site/register.php?error=1");
            //error
            die;
        }

        $sign = '@';

        if (strpos($email,$sign) !== true) {
            header("Location: /site/register.php?error=122");
            //error
            die;
        }

        $check_user = mysql_query("SELECT `username` FROM `users` WHERE `username` = '".$username."'");

        if(mysql_num_rows($check_user) !== 0){
            header("Location: /site/register.php?error=2");
            //error
            die;
        }

        $check_email = mysql_query("SELECT `email` FROM `users` WHERE `email` = '".$email."'");

        if(mysql_num_rows($check_email) !== 0){
            header("Location: /site/register.php?error=3");
            //error
            die;
        }

        mysql_query("INSERT INTO `users` (`username`, `password`, `email`, `ip`, `rank`, `reg_date`) VALUES ('$username', '$md5', '$email', '$ip', '1', '$reg_date')");
        header("Location: /site/register.php?success=1");
    } else {
        header("Location: register.php?error=4");
    }

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:07:18.710

Ah. First of all, don't use deprecated `mysql_` switch to [`mysqli`](http://php.net/manual/en/book.mysqli.php).

Second, don't use `$_POST`, `$_GET`, `$_COOKIE` variables without checking whether they are set. Rather do:

```
$request_variables = array('password', 'password2', 'username', ...);
$data = array();
foreach( $request_variables as $k){
    if( !isset( $_POST[$k])){
        header( 'Location: http://...'); // Yes, use absolute url
        die();
    }

    $v = clean( $_POST[$k]);
    if( !$v){
        // header, die
    }

    $data[$k] = $v;
} 
```

Then, make sure you're escaping data before pushing them into query. If not using [prepared statements](http://www.php.net/manual/en/mysqli.quickstart.prepared-statements.php) with parameters, at least use *sigh* [mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php) and last but not least, for email validation just [browse stack overflow](https://stackoverflow.com/questions/161342/is-there-a-php-library-for-email-address-validation) for a while:

```
if (!filter_var($data['email'], FILTER_VALIDATE_EMAIL)) {
    header("Location: http://.../site/register.php?error=122");
    die();
} 
```

Yeah, and password matching:

```
if( $data['password'] !== $data['password2']){
    header(...);
    die(...);
} 
```

But I'd try to validate password match [`onsubmit` of `<form>`](http://www.w3schools.com/jsref/event_form_onsubmit.asp) **too** (so passwords would be sent just once, and also sent them both to server for case of disabled javascript).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T19:53:29.023

```
if (strpos($email,$sign) === false) {
    /* error ! */
} 
```

是对的，因为 strpos 永远不会返回 true。它返回 false 或整数。因此，如果 strpos 严格等于 false，则在这种情况下会出现错误。

对于密码匹配，只需比较密码：

```
if ($password !== $pass_conf) {
    /* error ! */
} 
```

Ps：将查询中的 $variables 包围在`mysql_real_escape_string($variable)`. 否则，您将面临 SQL 注入的风险。

# c# - Detecting garbage in a Unit Test

> ID：16124461
> 
> 赞同：4
> 
> 时间：2013-04-20T19:46:35.317
> 
> 标签：c#, .net, garbage-collection

I wanted to detect whether or not my code generates garbage. So I created the following unit test.

```
[TestClass]
public class AllocationTest
{
    int[] generationCollections = new int[3];

    [TestMethod]
    public void TestGarbageGeneration()
    {
        generationCollections[0] = GC.CollectionCount(0);
        generationCollections[1] = GC.CollectionCount(1);
        generationCollections[2] = GC.CollectionCount(2);

        // Test for garbage here

        for (int generation = 0; generation < generationCollections.Length; generation++)
        {
            Assert.AreEqual(GC.CollectionCount(generation), generationCollections[generation]);
        }
    }
} 
```

I put the code in question where the "Test for garbage here" comment is and the results are unpredictable. My understanding is that this is due to the fact that GC runs on a separate thread and can be triggered by code other than my test at any time.

I tried GC.Collect to forcefully run collections before and after the test code but then realized that that always increment the collection count, so that test always fails.

Is there a meaningful way to test for garbage in a unit test?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:00:51.837

You can use [WMemoryProfiler](http://wmemoryprofiler.codeplex.com/) to find out how many additional types were created. If you profile your own process you will get all addtional created types + some instances used by WMemoryProfiler to generate the report.

You can work around by using a separate process to monitor your managaed heap or by limiting yourself to only your types. If you leak memory you will see it normally in addtional instances created by you.

```
 using (var dumper = new InProcessMemoryDumper(false,false))
  { 
     var statOld = dumper.GetMemoryStatistics();

     // allocaton code here
     var diff = dumper.GetMemoryStatisticsDiff(statOld);

    foreach (var diffinst in diff.Where(d => d.InstanceCountDiff > 1))
    {
        Console.WriteLine("Added {0} {1}", diffinst.TypeName, diffinst.InstanceCountDiff);
    }
  } 
```

If you are after how much memory temporary objects did use you you will need to use some profiling Api or tools like PerfView which does use ETL traces generaeted by the CLR. For GC you would need to programatically enable specific stuff like his. I think the [GCAllocationTick_V1](http://msdn.microsoft.com/en-us/library/ff356162%28v=vs.100%29.aspx#gcallocationtick_v1_event) event would be interesting in your case as well.

If you do keep a reference to your object before you try to get the diff you would get a pretty good understanding how much memory your object graph will consume.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T21:02:08.060

您可以**尝试**做的是在实际断言之前使用完全相同的逻辑转储 GC 状态

```
 // do some logic

    // GC.Collect, Thread.Sleep, ...

    currentCollections[0] = GC.CollectionCount(0);
    currentCollections[1] = GC.CollectionCount(1);
    currentCollections[2] = GC.CollectionCount(2); 
```

然后用这些转储值断言（顺便说一句，断言中的第一个参数是预期的，第二个是实际的）

```
 for (int generation = 0; generation < generationCollections.Length; generation++)
    {
        Assert.AreEqual(generationCollections[generation], currentCollections(generation));
    } 
```

所以这**可能**适用于大多数情况，但没有办法让 GC 做某事 - 你可能只是要求它做某事，然后相信......

# python - Subprocess.Popen: How to pass arguments without whitespace

> ID：16124464
> 
> 赞同：1
> 
> 时间：2013-04-20T19:47:13.680
> 
> 标签：python, subprocess

Mighty people of Stackoverflow,

I want to execute

```
./namecoind name_new d/<name> 
```

in a Python script with subprocess.popen where 'name' is a variable within the script. There are no spaces allowed between 'd/' and the variable. I tried this:

```
p = subprocess.Popen(["./namecoind", "name_new", "d/", domainname]) 
```

but this does not work, because this adds an ws between d/ and 'domainname'.

So, what to?

Thanks in advance!

Steffen

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T19:49:11.080

空白不进入图片；`subprocess.Popen`如果您将列表传递给它（而不是字符串），则不会通过外壳程序，因此它不会在空格上拆分命令行。该参数只需要作为单个列表项发送：

```
p = subprocess.Popen(["./namecoind", "name_new", "d/" + domainname]) 
```

# ruby-on-rails-3 - Backbone and Coffeescript "this" reference issue

> ID：16124465
> 
> 赞同：0
> 
> 时间：2013-04-20T19:47:18.297
> 
> 标签：ruby-on-rails-3, backbone.js, coffeescript

I have a problem with the "this" reference on Backbone with Coffeescript, this is a method which shows information of an artist:

```
show: (id) ->
    self = @
    if @collection
        artist = @collection.get(id)
        @renderArtist(artist)
    else
        artist = new DemoBackbone.Models.Artist({id: id})
        artist.fetch
            success: ->
                self.renderArtist(artist)

renderArtist: (artist) ->
    view = new DemoBackbone.Views.ArtistsShow(model: artist)
    $('#content_artists').html(view.render().el) 
```

This works perfectly, but I'm using the "self = @" statement so I can use the Class function "renderArtist", but is there a more "elegant" way to do this on "success: -> self.renderArtist(artist)", so I can avoid using the "self = @" line??

Something like

```
success: @->
    @renderArtist(artist) 
```

I'm not pretty sure but I think there should be a way to do this. Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:01:02.220

这正是CoffeeScript 中的[双箭头函数所做的。](http://coffeescript.org/#fat-arrow)它将自动生成您为您展示的代码，因此您不必自己编写。

```
success: =>
    @renderArtist(artist) 
```

# java - GlassPane 上的图标未正确设置

> ID：16124469
> 
> 赞同：1
> 
> 时间：2013-04-20T19:48:05.850
> 
> 标签：java, swing, jtextfield, jtextarea, glasspane

当输入与我期望的用户不同时，我有一个类在 textField 后面设置警告图标。对于文本字段，此类工作完美，但是当我尝试将其与 textArea 一起使用时，警告图标未设置在正确的位置。

这是设置和删除警告图标的类：

```
public class GlassValidationPane extends JComponent {
    private HashMap<Component, JLabel> warningLabels = new HashMap<>();
    private ImageIcon warningIcon;
    private final ImageUtilities iU = new ImageUtilities();

    public GlassValidationPane() {
        setLayout(null);
        setOpaque(false);
        Icon icon = UIManager.getIcon("OptionPane.warningIcon");
        int imgW = icon.getIconWidth();
        int imgH = icon.getIconHeight();
        BufferedImage img = iU.getBufferedImageOfIcon(icon, imgW, imgH);
        warningIcon = new ImageIcon(iU.resize(img, 18, 18));
    }

    void showWarningIcon(Component c) {
        if (warningLabels.containsKey(c)) {
            return;
        }

        JLabel label = new JLabel();
        label.setIcon(warningIcon);

        //int x=c.getX();//this will make it insode the component
        int x = c.getWidth() + c.getX() + label.getIcon().getIconWidth();//this makes it appear outside/next to component);
        int y = c.getY();
        System.out.println("ïn show warning: " + y);

        label.setBounds(x, y, label.getIcon().getIconWidth(), label.getIcon().getIconHeight());
        add(label);
        label.setVisible(true);
        revalidate();
        repaint();
        warningLabels.put(c, label);
    }

    public void removeWarningIcon(Component c) {
        for (Map.Entry<Component, JLabel> entry : warningLabels.entrySet()) {
            Component component = entry.getKey();
            JLabel jLabel = entry.getValue();
            if (component == c) {
                remove(jLabel);
                revalidate();
                repaint();
                break;
            }
        }
        warningLabels.remove(c);
    }

    public void refreshLocations() {
        for (Map.Entry<Component, JLabel> entry : warningLabels.entrySet()) {
            Component c = entry.getKey();
            JLabel label = entry.getValue();
            int x = c.getWidth() + c.getX() + label.getIcon().getIconWidth();//this makes it appear outside/next to component
            int y = c.getY();

            label.setBounds(x, y, label.getIcon().getIconWidth(), label.getIcon().getIconHeight());
            revalidate();
            repaint();
        }
    }

    public boolean allSet(){

        if(!warningLabels.isEmpty()){
            JOptionPane.showMessageDialog(null, "Please fill every text field in, or adjust te wrong input", "Empty input/Wrong input", JOptionPane.ERROR_MESSAGE);
            return false;
        }
        return true;
    }

private class ImageUtilities {

    public  BufferedImage resize(BufferedImage image, int width, int height) {
        BufferedImage bi = new BufferedImage(width, height, BufferedImage.TRANSLUCENT);
        Graphics2D g2d = (Graphics2D) bi.createGraphics();
        g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY));
        g2d.drawImage(image, 0, 0, width, height, null);
        g2d.dispose();
        return bi;
    }

    public  BufferedImage getBufferedImageOfIcon(Icon icon, int imgW, int imgH) {
        BufferedImage img = new BufferedImage(imgW, imgH, BufferedImage.TYPE_INT_ARGB);
        Graphics2D g2d = (Graphics2D) img.getGraphics();
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        icon.paintIcon(null, g2d, 0, 0);
        g2d.dispose();
        return img;
    }
}

} 
```

我发现 textArea 的 getY() 函数总是返回 0，但我找不到为什么它总是返回 0。这是调用 ClaxxValidationPane 类的代码：

```
public class JobInput extends JFrame {

    private JPanel contentPane;
    private JTextField txtJobId;
    private GlassValidationPane gvp;
    private JTextArea textAreaDesription;
    private boolean INSERT;

    /**
     * Create the frame.
     */
    public JobInput(String titel, boolean INSERT) {
        setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
        addWindowListener(new WindowAdapter() {
            @Override
            public void windowClosing(WindowEvent e) {
                setVisible(false);
                dispose();
            }
        });
        setBounds(100, 100, 296, 300);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        setContentPane(contentPane);
        GridBagLayout gbl_contentPane = new GridBagLayout();
        gbl_contentPane.columnWidths = new int[]{0, 0, 0};
        gbl_contentPane.rowHeights = new int[]{0, 0, 0, 0, 0, 0};
        gbl_contentPane.columnWeights = new double[]{0.0, 0.0, Double.MIN_VALUE};
        gbl_contentPane.rowWeights = new double[]{0.0, 0.0, 0.0, 1.0, 0.0, Double.MIN_VALUE};
        contentPane.setLayout(gbl_contentPane);

        JLabel lblTitel = new JLabel(titel);
        lblTitel.setFont(new Font("Arial", Font.BOLD, 15));
        GridBagConstraints gbc_lblTitel = new GridBagConstraints();
        gbc_lblTitel.gridwidth = 2;
        gbc_lblTitel.insets = new Insets(0, 0, 5, 0);
        gbc_lblTitel.gridx = 0;
        gbc_lblTitel.gridy = 0;
        contentPane.add(lblTitel, gbc_lblTitel);

        JSeparator separator = new JSeparator();
        GridBagConstraints gbc_separator = new GridBagConstraints();
        gbc_separator.fill = GridBagConstraints.BOTH;
        gbc_separator.gridwidth = 2;
        gbc_separator.insets = new Insets(0, 0, 5, 0);
        gbc_separator.gridx = 0;
        gbc_separator.gridy = 1;
        contentPane.add(separator, gbc_separator);

        JLabel lblJobid = new JLabel("JobID");
        GridBagConstraints gbc_lblJobid = new GridBagConstraints();
        gbc_lblJobid.anchor = GridBagConstraints.EAST;
        gbc_lblJobid.insets = new Insets(0, 0, 5, 5);
        gbc_lblJobid.gridx = 0;
        gbc_lblJobid.gridy = 2;
        contentPane.add(lblJobid, gbc_lblJobid);

        txtJobId = new JTextField();
        GridBagConstraints gbc_txtJobId = new GridBagConstraints();
        gbc_txtJobId.insets = new Insets(0, 0, 5, 0);
        gbc_txtJobId.fill = GridBagConstraints.HORIZONTAL;
        gbc_txtJobId.gridx = 1;
        gbc_txtJobId.gridy = 2;
        contentPane.add(txtJobId, gbc_txtJobId);
        txtJobId.setColumns(10);

        JLabel lblDescription = new JLabel("Description");
        GridBagConstraints gbc_lblDescription = new GridBagConstraints();
        gbc_lblDescription.anchor = GridBagConstraints.NORTH;
        gbc_lblDescription.insets = new Insets(0, 0, 5, 5);
        gbc_lblDescription.gridx = 0;
        gbc_lblDescription.gridy = 3;
        contentPane.add(lblDescription, gbc_lblDescription);

        textAreaDesription = new JTextArea();
        textAreaDesription.setLineWrap(true);
        textAreaDesription.setWrapStyleWord(true);
        GridBagConstraints gbc_textArea = new GridBagConstraints();
        gbc_textArea.insets = new Insets(0, 0, 5, 0);
        gbc_textArea.fill = GridBagConstraints.BOTH;
        gbc_textArea.gridx = 1;
        gbc_textArea.gridy = 3;
        JScrollPane scroll = new JScrollPane (textAreaDesription, 
                JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED, JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);

        contentPane.add(scroll, gbc_textArea);

        JButton btnOk = new JButton("Ok");
        GridBagConstraints gbc_btnOk = new GridBagConstraints();
        gbc_btnOk.gridwidth = 2;
        gbc_btnOk.gridx = 0;
        gbc_btnOk.gridy = 4;
        contentPane.add(btnOk, gbc_btnOk);

        gvp = new GlassValidationPane();

        FocusAdapter fl = new FocusAdapter() {
            @Override
            public void focusGained(FocusEvent fe) {
                super.focusGained(fe);
                ((JTextComponent) fe.getSource()).setBorder(BorderFactory.createLineBorder(Color.gray));
            }

            public void focusLost(FocusEvent fe) {
                super.focusLost(fe);
                if(fe.getSource().equals(txtJobId)){
                    validationForInteger(txtJobId);
                } else if(fe.getSource().equals(textAreaDesription)){
                    validationForText(textAreaDesription);
                } else{
                    gvp.removeWarningIcon(((Component) fe.getSource()));
                    ((JTextComponent) fe.getSource()).setBorder(BorderFactory.createLineBorder(Color.gray));
                }
            }
        };
        txtJobId.addFocusListener(fl);
        textAreaDesription.addFocusListener(fl);
        setGlassPane(gvp);
        gvp.setVisible(true);
    }

    private void validationForInteger(JTextComponent comp){
        String temp = comp.getText();
        if(temp.matches("^[1-9]\\d*$")){
            setGreen(comp);
        } else {
            setRed(comp);
        }
    }

    private void validationForText(JTextComponent comp) {
        System.out.println("In validation for text " + textAreaDesription.getY());
        String temp = comp.getText();
        if (temp.matches("^[a-zA-Z0-9][a-zA-Z0-9\\s_/-]+$")) {
            setGreen(comp);
        } else {
            setRed(comp);
        }
    }

    private void setRed(JTextComponent comp) {
        comp.setBorder(BorderFactory.createLineBorder(Color.red));
        gvp.showWarningIcon(comp);
    }

    private void setGreen(JTextComponent comp) {
        comp.setBorder(BorderFactory.createLineBorder(Color.green));
        gvp.removeWarningIcon(comp);

    }

} 
```

因此焦点侦听器将调用验证，并调用 classValidaionPane。如果它被调用，那么它会出错（但仅适用于 textArea 而不是 textField）有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T19:54:51.107

JTextArea 的父组件与 JTextField 的父组件不同，因为 JTextArea 在 JScrollPane 内。我没有花时间阅读和理解您发布的所有代码，但您可能应该相对于 JScrollPane 的位置放置标签，而不是相对于 JTextArea 的位置。

# android - Updating Listview Images in another thread

> ID：16124473
> 
> 赞同：0
> 
> 时间：2013-04-20T19:48:31.897
> 
> 标签：android, multithreading, image, listview

I'm trying to make a custom listview adaptar that can update the imageView in each view asynchronously so that it doesn't slow down.

So far I'm using a vector that storage the bitmaps of the imageviews and in the adapter constructor I'm calling a thread that gets all the bitmaps. In the getView() method I check if the vector[position] is not null to actually change the imageView bitmap.

here is the code:

```
public class SongAdapter extends ArrayAdapter<Song> {
private int resource;
private LayoutInflater inflater;
private ArrayList<Song> items;
private Context cntx;
private final Utilities util = new Utilities(); //una per tutte le canzoni
private Bitmap[] covers; //la utilizzo per fare un cashing delle cover

public SongAdapter(Context cntx, int resId, ArrayList<Song> objects)
{
    super(cntx, resId, objects);
    this.cntx = cntx;
    items = objects;
    resource = resId;
    inflater = LayoutInflater.from(cntx);
    covers = new Bitmap[objects.size()];
    asyncLoadImagesCover(); //lacio un thread per caricare le immagini
}

//carico le immagini nella listview in background
public void asyncLoadImagesCover()
{
    new Thread(new Runnable() {

        @Override
        public void run() {
            for(int i = 0; i < items.size(); i++)
                covers[i] = util.getAlbumArtFromSong(items.get(i).getPath(), cntx);

            //notifyDataSetChanged();
        }
    }).start();
}

//cerco di mantenere in memoria l'oggetto in modo da evitare il ricaricamento
private static class ViewHolder
{
    TextView titolo;
    TextView artista;
    ImageView cover;
}

//////////////////////////////////////////////////////////////////////////////////////

//Funzione che riscrive gli elementi della listview
@Override
public View getView(int position, View v, ViewGroup parent)
{
    //recupero l'oggetto canzone
    Song song = getItem(position);
    ViewHolder holder;

    if(v == null)
    {
        //creo la view partendo dal layout
        v = inflater.inflate(resource, parent, false);
        holder = new ViewHolder();
        holder.titolo = (TextView)v.findViewById(R.id.songTitle);
        holder.artista = (TextView)v.findViewById(R.id.artistText);
        holder.cover = (ImageView)v.findViewById(R.id.albumImage);
        v.setTag(holder);
    }
    else
        holder = (ViewHolder) v.getTag();

    //setto i valori a partire dall'holder, in questo modo non devo fare findviewbyid ogni volta
    holder.titolo.setText(song.getTitle());
    holder.artista.setText(song.getArtist());
    if(covers[position] != null)
        holder.cover.setImageBitmap(covers[position]);

    return v;
}
} 
```

Anyway this isn't working really well, the 50% of the times the activity crashes and I guess it's because of the new thread. I searched on the web and found different solutions, but I wanna first understand why my code is crushing. Also, how can I make a thread that updates my listview gui passing v and position in getView?

////////////////////////////////////////////// EDIT:

For anyone interested, this is what I've done: I've made a class with two separate object in it that uses one handler to update the UI and an ExecutorService to stack threads that get the image by my function:

```
public class CoverLoader  {

Utilities util = new Utilities();
Context cntx;
ExecutorService executorService;
Handler handler = new Handler(); //si occupa di aggiornare la UI

public CoverLoader(Context cntx)
{
    this.cntx = cntx;
    executorService = Executors.newFixedThreadPool(5);
}

public void DisplayImage(ImageView iv, String path)
{
    executorService.submit(new ImageLoader(iv,path));
}

//Separo la parte del caricamento dalla parte di aggiornamento della gui
//questa classe si occupa solo di recuperare la bmp
public class ImageLoader implements Runnable
{

    ImageView iv;
    String path;

    public ImageLoader(ImageView iv, String path)
    {
        this.iv = iv;
        this.path = path;
    }

    @Override
    public void run()
    {
        Bitmap bmp = util.getAlbumArtFromSong(path, iv.getContext());
        handler.post(new BitmapDisplayer(iv,bmp));
    }
}

//Si occupa di aggiornare la UI, richiamata dall'handler a termine del processo di caricamento

class BitmapDisplayer implements Runnable
{
    Bitmap bitmap;
    ImageView iv;

    public BitmapDisplayer(ImageView iv, Bitmap bitmap)
    {
        this.iv = iv;
        this.bitmap = bitmap;
    }

    @Override
    public void run()
    {
        iv.setImageBitmap(bitmap);
    }
} 
```

}

Now on the getView():

```
@Override
public View getView(int position, View v, ViewGroup parent)
{
    Song song = getItem(position);
    ViewHolder holder;

    if(v == null)
    {
        //creo la view partendo dal layout
        v = inflater.inflate(resource, parent, false);
        holder = new ViewHolder();
        holder.titolo = (TextView)v.findViewById(R.id.songTitle);
        holder.artista = (TextView)v.findViewById(R.id.artistText);
        holder.cover = (ImageView)v.findViewById(R.id.albumImage);
        v.setTag(holder);
    }
    else
        holder = (ViewHolder) v.getTag();

    //setto i valori a partire dall'holder, in questo modo non devo fare findviewbyid ogni volta
    holder.titolo.setText(song.getTitle());
    holder.artista.setText(song.getArtist());
    coverLoader.DisplayImage(holder.cover, song.getPath()); //Richiamo uno stack di thread

    //if(covers[position] != null)
        //holder.cover.setImageBitmap(covers[position]);

    return v;
} 
```

So far so good, now I will just find a way (an array maybe?) to save the image that I've already got

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:03:20.780

您不应该在绑定到 Activity 上下文的对象内执行线程，因为它是短暂的生命（内存泄漏）。

您也不应该下载所有图像，而只下载 getView 代码中请求的图像（性能）。

您还应该尽量避免多线程访问变量（同步）。

# arrays - Matlab的padarray函数中“post”的目的是什么？

> ID：16124483
> 
> 赞同：0
> 
> 时间：2013-04-20T19:49:34.060
> 
> 标签：arrays, matlab, pad

在 Matlab 中，有一个名为[padarray](http://www.mathworks.fr/fr/help/images/ref/padarray.html)的函数。我不明白`"post"`函数的价值。你能用一个例子来描述它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:08:40.607

所以我会尽量清楚：

```
A = magic(2);
A =

 1     3
 4     2
B = padarray(A,[0 1],'circular','post')
B =

 1     3     1
 4     2     4 
```

`post`仅在沿每个维度的最后一个数组元素之后填充：在这种特殊情况下，仅沿维度`2`，因为`[0 1]`作为`padarray`.

**PS：** MATLAB 用户手册通常有很多关于任何内置函数的示例。

# php - 找不到实体类 PHPUnit 测试

> ID：16124486
> 
> 赞同：1
> 
> 时间：2013-04-20T19:50:08.823
> 
> 标签：php, phpunit

以下是文件所在的路径，

```
src\TW\Talk\Entity\Talk.php
src\Tests\Talk\Entity\TalkTest.php
src\phpunit.xml.dist 
```

在 TalkTest.php 中，我包含了 PHPUnit 和实体 Talk。

```
require_once 'TW/Talk/Entity/Talk.php';
require('PHPUnit/Autoload.php');

Class TalkTest extends PHPUnit_Framework_TestCase
{
    ...
} 
```

在 phpunit.xml.dist 文件中，我有，

```
<phpunit>
  <testsuites>
    <testsuite name="TW">
      <file>Tests/Talk/Entity/TalkTest.php</file>
    </testsuite>
  </testsuites>
</phpunit> 
```

我正在从 src 目录运行 phpunit 命令，我收到错误，即 Fatel Error: Class 'Tests\TW\Talk\Enity\Talk' not found。

作为参考，我指的是具有相似结构的 php-object-freezer-master。

知道为什么 TalkTest 无法找到 Talk 课程吗？

phpunit 命令正在尝试在 Tests 文件夹中查找 Talk 实体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T12:27:51.267

将 phpunit.xml.dist 更改为

```
<phpunit bootstrap="loader.php">
  <testsuites>
    <testsuite name="TW_Talk">
      <directory>Tests</directory>
    </testsuite>
  </testsuites>
</phpunit> 
```

和加载器文件，

```
<?php

function tw_test_autoloader($class) {
    if(file_exists(__DIR__."\\" . $class . ".php"))
        require_once(__DIR__."\\" . $class . ".php");
}

spl_autoload_register('tw_test_autoloader'); 
```

为我工作。

但是如果我将目录标签替换为文件

```
<file>Tests\TW\Talk\Entity\TalkTest.php</file> 
```

这没用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T20:07:29.920

检查您的 include_path：

```
echo get_include_path(); 
```

它应该包含您`TW/Talk/Entity/Talk.php`的相对目录。如果它不存在，那么您必须将其添加到 PHPUnit 的引导程序中`php.ini`或添加到 PHPUnit 的引导程序中。

您可以通过以下方式轻松测试 PHP 是否可以使用包含路径找到您的文件：

```
var_dump( stream_resolve_include_path('TW/Talk/Entity/Talk.php') ); 
```

# ruby - Heroku Rails 4 could not connect to server: connection refused

> ID：16124490
> 
> 赞同：21
> 
> 时间：2013-04-20T19:50:27.960
> 
> 标签：ruby, postgresql, heroku, ruby-on-rails-4

Using postgres.
Haven't been able to push.

Tried this without any luck:

```
config.assets.initialize_on_precompile = false 
```

> -----> Preparing app for Rails asset pipeline
> 
> ```
>  Running: rake assets:precompile
>    rake aborted!
>    could not connect to server: Connection refused
>    Is the server running on host "127.0.0.1" and accepting
>    TCP/IP connections on port 5432? 
> ```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-06-20T10:05:44.457

接受的答案并没有完全解决这个问题。我试图找到一个解决方案 2-3 小时没有成功，然后这个工作：

在您的应用程序目录中。

```
heroku labs:enable user-env-compile 
```

它仍然失败？

```
heroku labs:disable user-env-compile
heroku labs:enable user-env-compile 
```

然后它对我有用，只需要删除并再做一次。

**Rails 4 不再需要以下配置。编译资产必须在没有它的情况下工作。**

```
config.assets.initialize_on_precompile = false 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-21T23:14:51.350

`config.assets.initialize_on_precompile = false`

将其包含在 application.rb 中，ABOVE 模块 APPNAME

我最初将它包含在里面

> 类应用程序 < Rails::应用程序

编辑：实际上，上面没有解决它。

我不得不这样做

[https://devcenter.heroku.com/articles/labs-user-env-compile](https://devcenter.heroku.com/articles/labs-user-env-compile)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-01T09:34:31.300

尝试在本地执行

```
bundle exec rake assets:precompile RAILS_ENV=production 
```

在我的情况下，这可能是因为**设计**了gem。您可能在设计初始化程序中缺少密钥。尝试添加

```
config.secret_key = "PROVIDE-KEY" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-11T10:43:16.083

如果您使用的是 Rolify pre version 3.5，那么它可能是：

[https://github.com/EppO/rolify/issues/221](https://github.com/EppO/rolify/issues/221)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-26T13:48:22.947

heroku 开发中心讨论了如何解决这个问题。基本上，您的 rails4 应用程序不应依赖于在运行时存在配置变量。

[https://devcenter.heroku.com/articles/rails-asset-pipeline#troubleshooting](https://devcenter.heroku.com/articles/rails-asset-pipeline#troubleshooting)

# c++ - Arduino delay only in one part of the code

> ID：16124494
> 
> 赞同：0
> 
> 时间：2013-04-20T19:51:03.423
> 
> 标签：c++, arduino, delay, fade

Hello i am new to stackoverflow. I have a problem

```
 if (brightness2 == 0 || brightness2 == 255) {
    fadeAmount2 = -fadeAmount2 ; 
  }  
  // wait for 30 milliseconds to see the dimming effect    
  delay(30); 
```

and

```
Serial.println((byte)tempC);   
  delay(1000); 
```

the second delay affects the first and the led fade is much more slow. My question is how can I apply a delay to only one part of the code and another to another. Hope you understood what i mean. Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:00:05.037

你不能。但你可以数到 33：

```
static int cnt = 0;

if (brightness2 == 0 || brightness2 == 255) {
    fadeAmount2 = -fadeAmount2 ; 
}

delay(30);
cnt = (cnt + 1) % 33;
if (cnt == 0) {
    Serial.println((byte)tempC);
} 
```

这将使褪色工作像以前一样快，**并且**打印将在 990 毫秒内触发一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:35:56.827

在示例中，02\. 数字，有无延迟闪烁示例。您应该能够修改它以适用于您的应用程序。

# c++ - C++按照编码读取文本文件

> ID：16124497
> 
> 赞同：0
> 
> 时间：2013-04-20T19:51:22.430
> 
> 标签：c++, file, boost

我知道文件编码很难确定。但是在 C++ 中是否有某种可行的解决方案来解决这个问题？Mb boost呢（我没找到合适的）？。

我需要确定文件的编码并将其第一行读入适当的语言环境字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:08:00.813

我怀疑是否有任何体面的解决方案。我会尽力解释。如果您或多或少知道应该在文件中，则只能定义编码。然后您可以尝试以不同的方式猜测转换文件并检查结果是否符合您的预期。如果以俄语编码表为例。您拥有所有类型的变体，例如 KOI-8、CP1251、CP866，但这不是结束 =)。所有这些编码对俄语符号都有不同的映射，所以如果你读取一个文本文件并考虑错误的编码而不是正确的数据，你会得到由完全不同的字母组成的单词，尽管单词/空格和较低的 ASCII 表部分看起来绝对没问题.

关于 UTF8/16 等，您无法检测到它，但您可以检查输入文件内部是否没有非法序列，因此您可以尝试使用某种编码对其进行处理。

我认为最好的选择是首先尝试定义您计划检测的编码子集，并根据某些标准设计检测算法。

# javascript - how to stop jquery change css of all the divs onhover of a single div

> ID：16124499
> 
> 赞同：2
> 
> 时间：2013-04-20T19:52:00.383
> 
> 标签：javascript, jquery, css, html, onhover

I have blocks of information displayed in divs. I want to change the css of a particular div on hover. But currently when I hover over anyone div the css for all the divs change.

Here's my jquery code :-

```
<script>
        $('.student-box').hover( function(){
            $('.student-info').css('opacity', '0.8');
            $('.student-info').css('margin-top', '-20px');
            $('.student-info').css('height', '130%');
            $('.onhover-ul').show();
        },
        function(){
            $('.student-info').css('opacity', '0.7');
            $('.student-info').css('margin-top', '75px');
            $('.student-info').css('height', '63%');
            $('.onhover-ul').hide();
        });
    </script> 
```

How do I change the jquery so that only the div which is hovered upon is affected. There can be a lot of student which means lot of "student-box" will be generated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T19:53:56.067

```
$('.student-box').hover( function(){       
       // $(this) is DOM element what hovered at this moment

       $(this).find('.student-info').css({
          'opacity': '0.8',
          'margin-top', '-20px',
          'height', '130%'
       });
   },
   function(){
         // unhover code like hover
   })
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T19:55:39.083

尝试这个：

```
$('.student-box').hover( function(){
    var div = $(this);

    div.find('.student-info').css({
         opacity: '0.8'
         marginTop: '-20px',
         height: '130%'
    });
    div.find('.onhover-ul').show();
}, function(){
    var div = $(this);

    div.find('.student-info').css({
        opacity: '0.7',
        marginTop: '75px',
        height: '63%'
    });
    div.find('.onhover-ul').hide();
}); 
```

您在 div 上调用该方法并不重要，`hover()`在回调中您仍然只是说“选择该类的所有元素......”

在回调函数内部，`this`是实际触发事件的 DOM 元素。因此，您可以将其包装在 jQuery 中并在其上调用方法。

虽然不建议以这种方式使用该`css()`方法，但最好添加一个类名并将样式移动到样式表中，否则您的行为中会有表现。

# jquery - Weird image resize issue with jquery

> ID：16124500
> 
> 赞同：0
> 
> 时间：2013-04-20T19:52:07.723
> 
> 标签：jquery

Here is the fiddle:[http://jsfiddle.net/SugKp/2/](http://jsfiddle.net/SugKp/2/)

Click and hold on `CLICK ME` to resize the image. Now the thing is, as per the code, it is supposed to resize proportionately, and it does in the beginning, but after a few secs, it starts to stretch. Any idea why this happens?

HTML:

```
<input type="text" name="zoom" id="zoom" value="0"/><a id="zoomBtn" href="#">CLICK ME</a><br/><br/>
<img id="zoomBox" src='http://openiconlibrary.sourceforge.net/gallery2/open_icon_library-full/icons/png/32x32/categories/applications-internet-5.png' width='32px' height='32px'> 
```

JS:

```
$("#zoom").val("0");
var ztimer;
$("#zoomBtn").click(function(e){
                    e.preventDefault();
                }).on('mousedown',function(e){
                    var tt = $(this);
                    zoomIncTimer = setInterval(function(_t=tt){
                        if(tt.data('clearTimer')==true){
                            clearInterval(zoomIncTimer);
                        }
                        else{
                            var ref = $("#zoom");
                            var zoom = parseInt(ref.val())+1;
                            if(isNaN(zoom))
                            {
                                zoom=0;
                            }
                            ref.val(zoom);
                            var currZoom = parseFloat($("#zoom").val());//this was in a different function call in actual code
                        if(isNaN(currZoom) || currZoom<0)
                        {
                            currZoom = 0;
                        }
                        var pic = $("#zoomBox");
                        var ew = 132;//default width
                        var eh = 170;//default height
                        var iw = pic.width();
                        var ih = pic.height();
                        var nw = 0;
                        var nh = 0;
                        /*if(iw<ih)
                        {
                            nw = ew+currZoom;
                            nh = ih*(nw/iw);
                        }
                        else
                        {*/
                            nh = eh+currZoom;
                            nw = iw*(nh/ih);
                        //}
                            pic.attr('width',nw+'px').attr('height',nh+'px');
                        }
                    },100);
                    tt.data('clearTimer',false);
                }).on('mouseup mouseout',function(e){
                    $(this).data('clearTimer',true);
                }); 
```

PS: Problem is with image attr, cause if I use css to set the dimensions...it works properly.

Oh and I am using firefox to test, just in case.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:48:54.790

Switch the var iw and var ih to:

```
var iw = pic.attr('width');
var ih = pic.attr('height'); 
```

And it works.

[http://jsfiddle.net/SugKp/5/](http://jsfiddle.net/SugKp/5/)

EDIT:

It has something to do with how firefox does math, and some jquery bug because if you switch

```
nw = iw*(nh/ih); 
```

to

```
nw = iw*nh/ih; 
```

It works in Firefox. At any given time after the first zoom, nh increments by 1.

So when you have the former equation, you have 178 * (179/178) = 178 * 1.005617977 = 178.99999997.

Vs. 178 * 179 / 178 = 31862/178 = 179.

I don't quite understand the need for these equatione. nh is incrementing by 1\. nw in theory would be incrementing by 1 if the math was working accordingly. Why not just increment each by 1?

Also, there is some bug when setting the width to NaN. Because when you switch it to the css attr, width eventually becomes NaN. And somehow:

```
pic.attr('width',1/0).attr('height',nh); 
```

Also works. (1/0 = Nan). Any NaN will make this work.

According to jquery, .width returns a number and .attr('width') returns a number with pixels. So that becomes NaN when you do math to it after the first one.

I think you need to chalk this one up to weird quirks?

# jquery - Getting value of input array in jquery and passing it to PHP

> ID：16124503
> 
> 赞同：0
> 
> 时间：2013-04-20T19:52:21.987
> 
> 标签：jquery, html, ajax

I have multiple input fields like this:

```
<input type="text" name="childage[3]" placeholder="0"/>
<input type="text" name="childage[8]" placeholder="0"/>
<input type="text" name="childage[12]" placeholder="0"/> 
```

I want to get them into jQuery and pass them with AJAX to php but remember the keys (3, 8, 12). Is this possible?

I tried until now the following:

```
$('input[name="childage[]"]');
$('input[name="childage"'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T19:57:45.977

你应该看看`serialize`方法：

[http://docs.jquery.com/Ajax/serialize](http://docs.jquery.com/Ajax/serialize)

您需要获取所有表单元素，如下所示：

```
<input class="age-box" type="text" name="childage[3]" placeholder="0"/>
<input class="age-box" type="text" name="childage[8]" placeholder="0"/>
<input class="age-box" type="text" name="childage[12]" placeholder="0"/>

var ages = $('.age-box').serialize();
$.post(url, ages, function(data) { //handle response from the server }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T20:04:01.377

您可以使用隐藏的输入字段并将值设置为您需要的数字：

```
<input type="hidden" value=3 />
<input type="hidden" value=8 />
<input type="hidden" value=12 />

// Get the values
$('input[type="hidden"]')[0].val();
$('input[type="hidden"]')[1].val();
$('input[type="hidden"]')[2].val(); 
```

# android - 如何在不滥用电池/RAM 的情况下查看日历时间？

> ID：16124506
> 
> 赞同：1
> 
> 时间：2013-04-20T19:52:33.417
> 
> 标签：android, time, calendar

我试图在用户指定的时间调用一个方法。例如，“下午 4:00 - 向 Bob 发送消息”。

我了解如何获取`calendar.HOUR()`,`calendar.MINUTE()`等；但是，我不确定在哪里放置此代码。我想确保该方法在正确的时间调用，但我也不想每秒更新`calendar time`一次（因为担心 RAM 的电池使用量过多）。

我目前正在使用这个，它在`onCreate`方法中。

```
 if (calendarHour == startHour && calendarMinute == startMinute)
{
//do stuff
} 
```

是否有关于如何在不发送垃圾邮件的情况下检查现在几点的标准？我将使用什么代码以及将其放置在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T20:04:26.680

使用[警报管理器](http://developer.android.com/reference/android/app/AlarmManager.html)。

```
Calendar cal; // set your desired time
PendingIntent operation = PendingIntent.getService( /*  register a service that "sends a message to Bob"*/ );

final AlarmManager am = context.getSystemService(Context.ALARM_SERVICE).
am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), operation);
// you can close your app now. 
```

# java - 字符串中的 Java 子字符串

> ID：16124507
> 
> 赞同：0
> 
> 时间：2013-04-20T19:52:54.007
> 
> 标签：java, string, substring

我知道这个问题已经被问过无数次了..但我似乎无法让它发挥作用。问题是，

1.  输入“computer”和“Comp”时，即使将所有内容都转换为小写也不行。
2.  如果字符串是一个句子（我添加了一个空格），它实际上会跳过子字符串代码并说“不在字符串中”..

帮助表示赞赏。谢谢！

```
Scanner in=new Scanner(System.in);
System.out.println("\fEnter the main string:");

String GivenString=in.next();
System.out.println("Enter the substring :");

String SubString=in.next();

GivenString.toLowerCase();
SubString.toLowerCase();

if(GivenString.indexOf(SubString)!=-1)
{
    System.out.println("Substring is in the given string.");
}
else
{
    System.out.println("Substring is not in the given string.");
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-20T19:55:36.140

`String`s 是不可变的并`toLowerCase()`返回一个新`String`对象。这些行：

```
GivenString.toLowerCase();
SubString.toLowerCase(); 
```

...不要修改 和 中的`GivenString`值`SubString`。

您需要将它们修改为：

```
GivenString = GivenString.toLowerCase();
SubString = SubString.toLowerCase(); 
```

# ios - ios app crashes without error (even with calling empty action via button click)

> ID：16124518
> 
> 赞同：2
> 
> 时间：2013-04-20T19:54:34.273
> 
> 标签：ios, error-handling, crash

i found similar issues but none of them resolved my problem.

There are some viewcontrollers and working application.

I added one button to one of the viewcontrollers and binded a "sampleclick" action. there is nothing (no codes, no lines, just an empty method) in this action and application crashes with following blocks :

All output log :

```
(lldb) 
```

and stack :

```
libobjc.A.dylib`objc_msgSend:
0x10ed08c:  movl   8(%esp), %ecx
0x10ed090:  movl   4(%esp), %eax
0x10ed094:  testl  %eax, %eax
0x10ed096:  je     0x10ed0e8                 ; objc_msgSend + 92
0x10ed098:  movl   (%eax), %edx
0x10ed09a:  pushl  %edi
0x10ed09b:  movl   8(%edx), %edi
0x10ed09e:  pushl  %esi
***0x10ed09f:  movl   (%edi), %esi   >>> crashes here with :Thread1:EXC_BAD_ACCESS*** (code=1,address: .....)
0x10ed0a1:  movl   %ecx, %edx
0x10ed0a3:  shrl   $2, %edx
0x10ed0a6:  andl   %esi, %edx
0x10ed0a8:  movl   8(%edi,%edx,4), %eax
0x10ed0ac:  testl  %eax, %eax
0x10ed0ae:  je     0x10ed0b9                 ; objc_msgSend + 45
0x10ed0b0:  cmpl   (%eax), %ecx
0x10ed0b2:  je     0x10ed0d0                 ; objc_msgSend + 68
0x10ed0b4:  addl   $1, %edx
0x10ed0b7:  jmp    0x10ed0a6                 ; objc_msgSend + 26
0x10ed0b9:  popl   %esi
0x10ed0ba:  popl   %edi
0x10ed0bb:  movl   4(%esp), %edx
0x10ed0bf:  movl   (%edx), %eax
0x10ed0c1:  jmp    0x10ed0d9                 ; objc_msgSend + 77
0x10ed0c3:  nopw   %cs:(%eax,%eax) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T20:06:04.030

One possible answer to your issue is that you are trying to send a message to a deallocated instance of an object.

Try looking for zoombies (press `⌘</kbd>`⌥</kbd>`R`, select the *Diagnostics* tab and activate *Enable Zombie Objects*). Every released object will become an instance of NSZombie, which will log messages to the console if you ever try to access them instead of crashing.``

Also, on ARM architecture (which concerns iOS), `r0` should point towards the receiver of the message. You can try investigating this. It may yield useful informations. (use `p/x $r0` command on the debugger. If you execute `x/s $r1`, you should get the selector name.)

**Note:**
If you are to debug crashes that occurs within `objc_msgSend()` then, I strongly recommend you to take a look at [[objc explain]: So you crashed in objc_msgSend()](http://www.sealiesoftware.com/blog/archive/2008/09/22/objc_explain_So_you_crashed_in_objc_msgSend.html) on the Hamster Emporium archive. It contains valuable tips & tricks to get most informations out of the debugger as well as investigate why the crash occurred.

**Edit:** From the comments, but without the code, one can only guess that *somewhere in your code* an object (likely `detailviewcontroller`) registered for events but has been deallocated too soon. Hence the crash when sending the action. This is only a hint, but IMHO it is worth investigating in the debugger.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T17:07:37.700

我知道了！！！！

我通过逐步删除每个操作和属性的整个应用程序来解决它，并找到了罪魁祸首：（也许可以帮助遇到同样问题的人）

detailsviewcontroller 是一个典型的 uiviewcontroller，通过以下代码打开：

```
 detailviewcontroller *vc = [[detailviewcontroller alloc] initWithNibName:@"detailviewcontroller" bundle:nil];
[self.view addSubview:vc.view]; 
```

我替换为以下代码（只是删除了detailviewcontroller word和*），问题得到解决：

```
 vc = [[detailviewcontroller alloc] initWithNibName:@"detailviewcontroller" bundle:nil];
[self.view addSubview:vc.view]; 
```

这也表明我应该更多地研究目标 ca 的声明；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T14:22:48.840

这是 .m 文件：

```
#import "detailviewcontroller.h"

@interface detailviewcontroller ()

@end

@implementation detailviewcontroller

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

-(IBAction)denemecik:(id)sender
{
// there is no code here 
}

- (void)viewDidLoad
{
[super viewDidLoad];
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
//NSLog(@"memori warning aldım");
// Dispose of any resources that can be recreated.
} 
```

这是.h文件：

```
#import <UIKit/UIKit.h>
@interface detailviewcontroller : UIViewController
{
}
-(IBAction)denemecik:(id)sender;
@end 
```

和 xib 视图：视图上只有一个按钮，我只需单击它

# drupal - Drupal 7 - 自动向与新节点有相同兴趣的用户发送电子邮件

> ID：16124531
> 
> 赞同：0
> 
> 时间：2013-04-20T19:56:15.363
> 
> 标签：drupal, drupal-7, subscription, drupal-rules

好的，这是交易。我的客户在他的网站上发布招聘广告。申请人可以在他的页面注册并选择他们感兴趣的工作类型。如果新工作广告（新节点）包含与用户（申请人）选择的相同兴趣，则应自动向用户发送电子邮件（申请人）。

我正在 Drupal 7 中构建站点并尝试使用规则来解决这个问题。问题是我找不到替换模式来确定所有用户的范围，只有当前用户可用。电子邮件应发送给与新招聘广告具有相同兴趣的所有用户。

有人可以给一些提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:14:46.650

如何使用订阅模块来实现这一点： http: [//drupal.org/project/subscriptions](http://drupal.org/project/subscriptions)

您可以为 c、c++、java、测试、iOs 等分类术语创建不同的类型，并要求用户订阅他的兴趣。

然后在发布 x 期限的工作时，所有相关用户都会收到一封电子邮件。您可以使用此模块实现许多其他自定义。

# c# - 如何将标签向右移动？

> ID：16124533
> 
> 赞同：0
> 
> 时间：2013-04-20T19:56:25.790
> 
> 标签：c#

我想通过按下按钮将标签（名为 Label2 ）向右移动，当我再次按下按钮时，我希望它再次移动（希望你理解）

这是我的代码：

```
private void button3_Click(object sender, EventArgs e)
    {
        int x = 28;
        x++;
        label2.Location = new Point(x, 63);
    } 
```

但它不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:00:19.277

这是因为您使用的是 local `int x`，因此每次单击按钮时它都会重置为 28。

将声明移到方法`x`之外，`button3_Click()`使“x”成为一个字段。然后它将在每次按钮单击之间保留其值。

显然你需要给它一个更好的名字；也许`currentLabelLeft`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T20:07:18.693

This will move it right by 1 pixel each time:

```
private void button3_Click(object sender, EventArgs e)
    {
        int x = label2.Location.X;
        x++;
        label2.Location = new Point(x, 63);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T20:00:08.050

创建两个 css 类并按如下方式设置它们（如果您必须从后面的代码中设置它）：

```
label2.CssClass = "move_to_right" 
```

# r - How to build a Sorted Bar Chart

> ID：16124534
> 
> 赞同：2
> 
> 时间：2013-04-20T19:56:30.453
> 
> 标签：r, ggplot2

I want to create a sorted bar chart (similar to the one presented here: [http://flowingdata.com/2008/08/19/3-worthwhile-alternatives-to-the-pie-chart/](http://flowingdata.com/2008/08/19/3-worthwhile-alternatives-to-the-pie-chart/)). When I run the code below, I get something very similar, but the bars aren't sorted. How can I sort the bars so that the one with the highest frequency is at the top of the chart?

```
cat = c("CatA", "CatB", "CatC", "CatB", "CatB", "CatB", "CatB", "CatB", "CatB", "CatB")
dat = data.frame(Category = cat)

qplot(factor(Category), data=dat, geom="bar") + 
  geom_bar() +
  coord_flip() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T20:51:14.053

尝试：

```
dat$Category <- factor(dat$Category, levels=names(sort(tapply(dat$Category, dat$Category, length)))) 
```

并查看我的博客文章：[http ://trinkerrstuff.wordpress.com/2012/10/15/how-do-i-re-arrange-ordering-a-plot/](http://trinkerrstuff.wordpress.com/2012/10/15/how-do-i-re-arrange-ordering-a-plot/)

![在此处输入图像描述](https://i.stack.imgur.com/CTq3s.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T20:30:24.933

您也可以使用基本图形来实现它：

```
barplot(sort(table(dat)), horiz=TRUE) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T20:51:07.033

Roman 是对的，您需要以正确的顺序获得您的因子水平。使用@sgibbs 逻辑，这样的事情会起作用（原谅我完全不熟悉`ggplot`：

```
qplot(factor(Category,levels=names(sort(table(cat)))), data=dat, geom="bar") + 
  geom_bar() +
  coord_flip() 
```

# php - WhatsAPI (WhatsAPP) - 异常错误

> ID：16124538
> 
> 赞同：1
> 
> 时间：2013-04-20T19:56:47.087
> 
> 标签：php, whatsapp

我正在看这段代码：[https ://github.com/venomous0x/WhatsAPI](https://github.com/venomous0x/WhatsAPI)

在页面上：**/src/php/EXAMPLES.php**

我进行了以下更改（我认为这是我需要修改的全部内容。我显然在此示例中使用了不同的 IMEI 号码和手机号码）：

```
 $userPhone        = '447799999999';      # Telephone number including the country code without '+' or '00'.
        $userIdentity     = '98B898B898B8';      # This is tipically the IMEI number.
                                                 # If you are using an iOS device you should input your WLAN MAC address.
        $userName         = 'John Doe';          # This is the username displayed by WhatsApp clients.

        $destinationPhone = '447788888888';      # Destination telephone number including the country code without '+' or '00'.
                                                 # For groups: [phone number]-[group id].
        $debug = TRUE;
        $w->requestCode('sms', 'GB', 'en');
        $w->registerCode('123456'); 
```

但是在我的服务器上导航到这个 example.php 页面时，我收到以下错误：

> 致命错误：未捕获的异常“异常”，消息“尝试请求代码时出现问题。” 在 /whatsapp/src/php/whatsprot.class.php:1174 堆栈跟踪：#0 /whatsapp/src/php/EXAMPLES.php(49): WhatsProt->requestCode('sms', 'GB', 'en' ) #1 {main} 在第 1174 行的 /whatsapp/src/php/whatsprot.class.php 中抛出

我只是想知道我要去哪里错了，有人能解释一下吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T19:12:44.877

你在哪里实例化了 WhatsProt 类？您需要使用此行：

```
$w = new WhatsProt($userPhone, $userIdentity, $userName, $debug); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-23T21:41:56.983

还要确保您拥有最新的 src 文件，它会不断更改，恕不另行通知只需重新下载 src 文件并覆盖当前文件

# java - 从 java 代码调用 javascript(jQuery/Envjs)

> ID：16124540
> 
> 赞同：2
> 
> 时间：2013-04-20T19:56:59.427
> 
> 标签：java, javascript, jquery, rhino, envjs

我正在尝试从 Java 执行 Javascript 代码。Javascript 代码使用 jquery，所以我在我的代码之前添加了 jquery.js。但它会引发以下异常，

```
Exception in thread "main" javax.script.ScriptException: sun.org.mozilla.javascript.internal.EcmaError: ReferenceError: "window" is not defined. (<Unknown source>#1) in <Unknown source> at line number 1 
```

当我从 Java 代码运行它时，我知道它无权访问窗口对象，所以上面的异常。我发现 EnvJs 提供了所需环境的实现，所以我尝试通过将其内容放在首位来加载它，同时将脚本内容生成到 eval。但遇到以下异常，

```
Exception in thread "main" javax.script.ScriptException: sun.org.mozilla.javascript.internal.EcmaError: TypeError: Cannot call property getCurrentContext in object [JavaPackage org.mozilla.javascript.Context]. It is not a function, it is "object". (<Unknown source>#1247) in <Unknown source> at line number 1247 
```

以下是代码片段，

```
ScriptEngineManager manager = new ScriptEngineManager();
ScriptEngine engine = manager.getEngineByName("JavaScript");

String script = "Envjs code" + "jQuery code" + "my java script"; //code of envjs + jquery from the link provided at the end
engine.eval(script);

Invocable inv = (Invocable) engine;
inv.invokeFunction("myFunc", obj1, obj2); 
```

我不使用任何浏览器功能，因此不需要对象之类的窗口。所以理想情况下我不想加载Envjs。请让我知道如何加载 jQuery 代码。

还有一个问题 - 如何将 Java 代码中的 Json 对象作为参数传递给 Javascript 函数？

[http://www.envjs.com/dist/env.rhino.1.2.js](http://www.envjs.com/dist/env.rhino.1.2.js)
[http://code.jquery.com/jquery-1.9.0.min.js](http://code.jquery.com/jquery-1.9.0.min.js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-09T06:45:37.063

[使用 Envjs 指南 ( http://www.envjs.com/doc/guides#running-embed](http://www.envjs.com/doc/guides#running-embed) )中的说明使用 Rhino 执行此操作可能会更容易。

```
import org.mozilla.javascript.Context;
import org.mozilla.javascript.ContextFactory;
import org.mozilla.javascript.tools.shell.Global;
import org.mozilla.javascript.tools.shell.Main;
...
Context cx = ContextFactory.getGlobal().enterContext();
cx.setOptimizationLevel(-1);
cx.setLanguageVersion(Context.VERSION_1_5);
Global global = Main.getGlobal();
global.init(cx);
Main.processSource(cx, "path/to/your/EnvJSfile");
Main.processSource(cx, "path/to/your/JQueryJSfile");
cx.evaluateString(global, "your JavaScript", "JavaScript", 1, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T01:47:46.023

不知道Envjs，但是为什么要在java中模拟一个浏览器环境呢？

对于第二个问题：

```
ScriptEngine engine = new ScriptEngineManager().getEngineByName("javascript");
Compilable compilable = (Compilable) engine;
Bindings bindings = engine.createBindings(); 
String script = "function add(op1,op2){return op1+op2} add(a, b)"; 
CompiledScript jsFunction = compilable.compile(script);
bindings.put("a", 1);bindings.put("b", 2); //put java object into js runtime environment
Object result = jsFunction.eval(bindings);
System.out.println(result); 
```

您可以将任何对象放入绑定、地图、列表或 pojo。

# java - 无法在 MongoDB Java 中序列化类并且对字符串进行编码

> ID：16124543
> 
> 赞同：3
> 
> 时间：2013-04-20T19:57:30.247
> 
> 标签：java, json, mongodb

`_id`我的简单应用程序假设只是用to之间的映射填充 MongoDB `user`。我的键 ( `_id`) 是 JSON 格式，它的值很长。

```
{
    "_id": {
        "a": "1B2ac",
        "b": "Windows NT 5.2; WOW64; rv:16.0 Ff/6.0"
    },
    "user": 1999129
} 
```

我有几个问题：

问题 1：`can's serialize class...`当我尝试插入时得到：

```
Caused by: java.lang.IllegalArgumentException: can't serialize class test.mongo.foo.DummyObject
    at org.bson.BSONEncoder._putObjectField(BSONEncoder.java:234)
    at org.bson.BSONEncoder.putObject(BSONEncoder.java:121)
    at org.bson.BSONEncoder.putObject(BSONEncoder.java:86)
    at com.mongodb.OutMessage.putObject(OutMessage.java:190)
    at com.mongodb.DBApiLayer$MyCollection.insert(DBApiLayer.java:253)
    at com.mongodb.DBApiLayer$MyCollection.insert(DBApiLayer.java:217)
    at com.mongodb.DBCollection.insert(DBCollection.java:102)
    at     com.test.mongo.foo.DaoImpl.insertRecords(DaoImpl.java:130) 
```

这是我的课程`DummyObject`（实现`Serializable`）：

```
 package test.mongo.foo;

import java.io.Serializable;

public class DummyObject implements Serializable{

    private static final long serialVersionUID = -2715467675581503964L;

    //default constructor
    public DummyObject(){

    }

    private String a;
    private String b;

    public String getA() {
        return a;
    }

    public String getB() {
        return b;
    }

    public void setA(String a) {
        this.a = a;
    }

    public void setB(String b) {
        this.b = b;
    }

} 
```

这是我的`DaoImp`课

```
package test.mongo.foo;
public class DaoImpl extends MongoDAOImpl{

    public int insertRecords(List<DBObject> records) {
        DBCollection coll = getDBCollection();

        Exception e = null;
        try {
            WriteResult res =  coll.insert(records);
            if (res.getError() != null) {
                throw new MongoRuntimeException(res.getError());
            }
            return res.getN();
        } catch (Exception err) {
            e = err;
            throw new MongoRuntimeException(err);
        }
    }

    public static DBObject convertToDBObject(DummyObject obj, long value) {
        DBObject bdbo = new BasicDBObject();
        bdbo.put("_id",obj);
        bdbo.put("user",value);
        return bdbo;
    }
    public static void main(String [] args){
          DummyObject d = new DummyObject();
           d.setA("1B2ac");
           d.setB("Windows NT 5.2; WOW64; rv:16.0 Ff/6.0");
           long val = 1999129;
           List<DBObject> l = new ArrayList<DBObject>();
           l.add(DaoImpl.convertToDBObject(d,val));
           DaoImpl impl = new DaoImpl();
    }
} 
```

**ISSUE 2：**为避免上述问题，我尝试使用字符串到字符串映射插入记录。虽然我的输入 String (for `_id`) 没有转义，`DBObject`但在内部将其转义并最终写入 MongoDB，如下所示：

```
{
    "_id": {
        \"a\": \"1B2ac\",
        \"b\": \"WindowsNT5.2;WOW64;rv: 16.0Ff/6.0\"
    },
    "user": NumberLong(1999129)
} 
```

代替

```
{
    "_id": {
        "a": "1B2ac",
        "b": "Windows NT 5.2; WOW64; rv:16.0 Ff/6.0"
    },
    "user": 1999129
} 
```

关于如何解决这两个问题的任何建议？任何指针都受到高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:36:35.553

没关系。在玩了一点之后，我找到了自己问题的答案。作为 JsonObject 插入。我将我的 DummyObject 转换为 JsonObject/Object（提示：Json.parse(jstr)）

谢谢马斯蒂

# java - 检查 int 是否等于另一个 int give 或 take x

> ID：16124546
> 
> 赞同：0
> 
> 时间：2013-04-20T19:57:37.007
> 
> 标签：java, integer

我将精灵绘制到一个位置，并想创建一个类似于

```
if(int y == int x (give or take 30)) {
    //do something
} 
```

我基本上在设定的位置绘制了一个精灵

```
if (y >= 520 - enemyHeight - ySpeed || y + ySpeed <= 310) {
    ySpeed = -ySpeed;
    if (ySpeed > 0) {
        direction = 0;
    }
} 
```

我想检查 y 是否在另一个值的某个 int 范围内，慢慢将其增加到该值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:00:23.150

您可以检查您的整数和目标值之间的差异是否小于“给予或接受”值 - 如下所示：

```
if (Math.abs(y - x) <= 30) 
```

# macos - Can't locate CGIBook/Error.pm

> ID：16124549
> 
> 赞同：0
> 
> 时间：2013-04-20T19:57:49.030
> 
> 标签：macos, perl

I am new to perl. I am running a perl script on macbook and i get following error:

```
Can't locate CGIBook/Error.pm in @INC (@INC contains: /Library/Perl/5.12/darwin-thread-
multi-2level /Library/Perl/5.12 /Network/Library/Perl/5.12/darwin-thread-multi-2level
/Network/Library/Perl/5.12 /Library/Perl/Updates/5.12.3 /System/Library/Perl/5.12/darwin-
thread-multi-2level /System/Library/Perl/5.12 /System/Library/Perl/Extras/5.12/darwin-
thread-multi-2level /System/Library/Perl/Extras/5.12) at HW1_3A.pl line 5. 
```

It looks like I don't have CGIBook in my perl directory. Is that correct? Can anyone help me with this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:11:22.423

我没有在 CPAN 上找到[CGIBook::Error](https://metacpan.org/search?q=CGIBook%3A%3AError)，因此它可能是本地模块或您从供应商那里获得（或应该获得）的东西。可能有人安装在默认模块搜索路径以外的其他位置。

在这种情况下，看起来您可能正在尝试使用古老书籍*[CGI Programming with Perl](http://books.google.com/books?isbn=144932679X)*中的示例，该示例为示例创建了一个具有相同名称的模块。

谷歌搜索错误消息很快导致了这个代码：

```
#!/usr/bin/perl -wT

package CGIBook::Error;

# Export the error subroutine
use Exporter;
@ISA = "Exporter";
@EXPORT = qw( error );

$VERSION = "0.01";

use strict;
use CGI;
use CGI::Carp qw( fatalsToBrowser );

BEGIN {
    sub carp_error {
        my $error_message = shift;
        my $q = new CGI;
        my $discard_this = $q->header( "text/html" );
        error( $q, $error_message );
    }
    CGI::Carp::set_message( \&carp_error );
}

sub error {
    my( $q, $error_message ) = @_;

    print $q->header( "text/html" ),
          $q->start_html( "Error" ),
          $q->h1( "Error" ),
          $q->p( "Sorry, the following error has occurred: " ),
          $q->p( $q->i( $error_message ) ),
          $q->end_html;
    exit;
}

1; 
```

# php - 我可以在 SQL SELECT 语句中有一个循环吗？

> ID：16124550
> 
> 赞同：0
> 
> 时间：2013-04-20T19:57:54.777
> 
> 标签：php, mysql, database

我正在尝试在我的 PHP 文件上创建一个 SQL SELECT 语句，该语句可以选择在其中一列中具有未知数量的不同值的所有行。为了更好地解释，我会说确切的情况。我的数据库中有三个表；测试，类别，部分。每个测试属于一个类别，大约有 50 个类别，每个类别属于一个部分，有 10 个部分。但是，在我的测试表中，它只有一个属于它的类别的列。我现在希望能够在一个部分中显示所有测试。

所以为了让事情更清楚：

```
SELECT * FROM tests WHERE category = '$categoryId' ORDER BY id ASC 
```

这使我可以选择特定类别中的所有测试，但我想创建某种循环，根据选择的部分，类别 ID 放在此语句中，由 OR 分隔。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:08:30.157

```
SELECT t.* 
FROM tests t
    JOIN category c on t.category = c.id AND c.section = ' . $section . '
ORDER BY t.id ASC 
```

这是向您展示的方式，在您的生产环境中，您应该清理 $section 参数。

这个想法是将表连接在一起，以利用强大的关系数据库功能而不是编程循环。

在内部，RDBMS 正在为您执行循环，计算每个 JOINed 表的中间结果集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T20:10:59.340

如果您想在一个部分中选择所有测试，那么您不应在类别 ID 上使用 or 语句，而应在这些表上使用 join：类似于：

```
SELECT tests.* FROM (tests JOIN categories ON tests.category = categories.id) WHERE categories.section = $section 
```

`$section`您要选择测试的部分的 id在哪里。您还可以指定要使用的列，而不是`*`只选择您感兴趣的列。 $section 应该被转义以确保它不能被注入。

我不知道你的表模式，但是当你有这样的关系时，你应该在这些表中有外键，查询应该很快，你只需要一个！这是对数据模型执行查询的方法，因为关系直接存储在数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T20:24:16.487

使用特殊字符作为示例管道符号 | 并这样做：

```
 $str="|".$cat1."|".$cat2."|".$cat3+"|"; 
```

并使用 Like 条件：

SELECT * FROM tests WHERE $str like '%|'+cast(category as varchar) +'|%' oRDER BY id ASC

# javascript - Having issues with a replace function in Javascript

> ID：16124552
> 
> 赞同：1
> 
> 时间：2013-04-20T19:58:15.807
> 
> 标签：javascript, regex

Okay, so I have some variables in javascript...

```
var link = 'http://8wayrun.com/streams/multi?type=3&pos1=1.teamsp00ky.video&pos2=1.teamsp00ky.chat&pos3=1.nycfurby.chat';
var position = 2; 
```

As you can see, I have a link and a position. Using the position var I would like to replace some text in the link field. I would like to strip `&pos2=1.teamsp00ky.chat` from the link. Naturally, I have to do some basic regular expressions; the problem comes into when I try to use the position var in the regex. I just can't figure it out.

In PHP I could do the following:

```
preg_replace('/&pos'.$position.'=[^&]*/i', '', $link); 
```

I tried the following in JS, but its not working:

```
link.replace(new RegExp('&pos'+position+'=[^&]*'), ''); 
```

Could someone help me out and tell me what I'm doing wrong? Also, how would I make it case-insensitive?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T19:59:58.670

您需要设置值，而不仅仅是调用方法：

```
link = link.replace(new RegExp('&pos'+position+'=[^&]*'), ''); 
```

要使其不区分大小写，请使用此正则表达式：

```
new RegExp('&pos'+position+'=[^&]*', "i") 
```

虽然如果您在“？”上拆分字符串*可能会*更容易，然后用“&”拆分键/值对，然后用“=”拆分它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T20:01:27.027

> 有人可以帮助我并告诉我我做错了什么吗？

[`replace`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)不会改变字符串，但会返回一个新字符串——你必须将它分配到某个地方。

> 另外，我如何使它不区分大小写？

将`i`标志传递给[`RegExp`构造函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)。

```
link = link.replace(new RegExp('&pos'+position+'=[^&]*', 'i'), ''); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T20:05:50.397

```
<div id="result"></div>

var link = 'http://8wayrun.com/streams/multi?type=3&pos1=1.teamsp00ky.video&pos2=1.teamsp00ky.chat&pos3=1.nycfurby.chat';
var position = 2;

var start = link.indexOf("pos2");

var end = link.indexOf("&", start);

document.getElementById("result").textContent = link.slice(0, start) + link.slice(end + 1); 
```

on [jsfiddle](http://jsfiddle.net/Xotic750/JhS2Q/)

# linux - How to skip (not execute!) a call in GDB when debugging without symbols?

> ID：16124553
> 
> 赞同：1
> 
> 时间：2013-04-20T19:58:24.300
> 
> 标签：linux, assembly, gdb, 64-bit

I am debugging a Linux program to which I have no symbols. The binary is stripped. No big deal, I can handle that. However, how can I skip a call inside the debugger when I reach a particular piece of code?

What I am asking is *not* this: [Use gdb to debug assembly, how to skip a call](https://stackoverflow.com/questions/12202860/use-gdb-to-debug-assembly-how-to-skip-a-call)

I am interested if I have a:

```
 call 0x12345678
 ... 
```

to jump to the `...` straight **without *executing* the `call`**.

How can I do that?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T21:06:03.327

经过更多阅读后，我找到了解决方案。

在我的情况下，我知道操作码`call`是五个字节长，所以我可以通过设置[GDB 寄存器名称](http://sourceware.org/gdb/onlinedocs/gdb/Registers.html#Registers) `$pc`（“程序计数器”）来跳过它来解决它：

```
set $pc+=5 
```

根据[Employed Russian](https://stackoverflow.com/users/50617/employed-russian)对此答案的评论，以下提供了相同的功能：

```
jump *$pc+5 
```

假设您有`call` *at*地址`0x01234567`并且想要跳过五个字节，您可以在您的 中执行以下操作`.gdbinit`：

```
b *0x01234567
commands 1
x/i $pc
echo Not executing the call\n
set $pc+=5
x/i $pc
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T20:04:09.100

在此之后将`rip`值设置为指令的地址`call 0x12345678`。

# php - PHP name class from string inside variable

> ID：16124554
> 
> 赞同：0
> 
> 时间：2013-04-20T19:58:27.523
> 
> 标签：php, class, object

I'm looking for a way to create a new object with the help of a variable, but instead of referencing it by the variable I want to reference it by the value of the variable.

```
$name = "moduleAjax";
$name = new $name; 
```

And instead of doing this,

```
$name->method(); 
```

I would do this,

```
$moduleAjax->method(); 
```

I don't have a live example of my code. I've been experimenting a little bit but I can't find a solution.

Any help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T20:00:42.880

您搜索变量变量： http: [//php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php)

所以写：

```
$name = "moduleAjax";
$$name = new $name; // a dollar sign was added to $name 
```

`moduleAjax`然后，您可以访问这个新创建的以变量命名的类实例`$moduleAjax`。

# c++ - cannot call member function without object

> ID：16124555
> 
> 赞同：0
> 
> 时间：2013-04-20T19:58:29.580
> 
> 标签：c++, function, object, member

There's the main file (where the error is occurring):

```
#include "classe_Segundo.h"
#include <iostream>

using namespace std;

CSegundo a;

int main (){

cout << "Equacao de Segundo Grau\n\n";
cin >> a;
CSegundo::delta(a);

return 0;   
} 
```

And the error:

> Line 12: Cannot call member function `void CSegundo::delta(CSegundo)' without object

Why is that happenning even if I've created the object up there?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T19:58:59.780

尝试调用它`CSegundo::delta()`需要将`delta`其声明为静态成员函数。你需要这样称呼它：

```
a.delta(); 
```

您也不需要将对象作为第一个参数传递，编译器会为您执行此操作。

# properties - Will V8 Generate Hidden Classes for an Object Used as an Associative Array? (Large number of properties)

> ID：16124556
> 
> 赞同：2
> 
> 时间：2013-04-20T19:58:36.073
> 
> 标签：properties, set, associative-array, v8, internals

I am trying to implement a straightforward associative array (no duplicates) with string keys and instances of my own "classes" as values in JavaScript. I am happy with expected O(1) behaviour of a hash set or the O(log n) access time of a set implemented as a balanced tree.

I am drawn to the simple use of an object to which I dynamically add new properties but I am on Node.js and have come across the V8 optimisation of hidden classes ([see description of V8 hidden classes here](http://clipboard.com/clip/LQIbXIAzXp2T1zif8o7AVvNc3QtuvocW5uqe)).

If I do use properties on an object, will the V8 runtime notice the sheer number of properties and their transience and stop trying to JIT hidden classes behind the scenes?

I just cloned the V8 code, so pointers into it would be welcome alongside the top-line answer to my question.

Thanks for your help.

**Follow-up 1**

Thanks @vyacheslav-egorov, I see the guard code below in `JSObject::AddFastProperty` at your link. Without digging through more code it seems like a lot of overhead on every new property insertion. I think I see something like a per-object mode which causes `JSObject::AddFastProperty` to never be called any more. So `JSObject::AddProperty` calls straight through to `JSObject::AddSlowProperty` without much fuss. Do I need to do anything to push an object into that mode, or will the V8 runtime switch it over reliably using its own metrics?

```
if ((!name->IsSymbol() && !IsIdentifier(isolate->unicode_cache(), name)
     && name != isolate->heap()->hidden_string()) ||
    (map()->unused_property_fields() == 0 &&
     TooManyFastProperties(properties()->length(), store_mode))) { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:26:04.497

是的，当 V8 注意到对象[具有太多属性](https://code.google.com/p/v8/source/browse/branches/bleeding_edge/src/objects.cc?r=14358#1759)时，它会将对象属性切换为字典表示。

多少是“太多”取决于几个因素（对象是如何创建的，它最初有多少属性，属性是如何添加到对象中的）。例如，如果一个对象被创建为一个空对象字面量，“太多”将是大约 30 个属性。

# sql-server-2008-r2 - 创建过程 SQL Server 2008 R2

> ID：16124557
> 
> 赞同：2
> 
> 时间：2013-04-20T19:58:36.543
> 
> 标签：sql-server-2008-r2

我是 SQL 新手，我正在努力学习它。我正在创建一个将成员插入成员表的过程。

我正在使用这个（哪个ofc有效）：

```
CREATE PROCEDURE InsertMember
AS
INSERT INTO Member (FirstName, LastName, City)
VALUES ('Blla', 'Blla', 'Blla') 
```

但是......我想知道是否可以创建一个程序，当我执行它时，要求用户输入。例如：当我执行该过程时，它应该是这样的：

```
@FirstName = 'SOME FIRSTNAME'
@LastName = 'SOME LASTNAME'
@City = 'SOME CITY' 
```

我还没有尝试任何东西，因为我不知道这是否可能。请帮忙 ？有什么参考吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T20:23:03.063

试试这个，改变你的存储过程来接受参数

```
CREATE PROCEDURE InsertMember
   (@FirstName varchar(50), @LastName varchar(50), @City varchar(50)) 
AS
BEGIN
   INSERT INTO Member (FirstName, LastName, City)
   VALUES (@FirstName, @LastName, @City)
END 
```

现在您可以在 SQL Management Studio 中调用此 SP

```
exec InsertMember 'Blla','Blla','Blla' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T07:38:57.260

改变程序：

```
ALTER PROC SP_GETCUSTOMER 
(@CUSTOMERID NCHAR,@CITY NVARCHAR(50),
@COUNTRY NVARCHAR(50))
AS 
BEGIN
SELECT ContactName,CompanyName FROM DimCustomers
END 
```

# android - Inflating an image to be front and center of screen

> ID：16124558
> 
> 赞同：3
> 
> 时间：2013-04-20T19:58:43.027
> 
> 标签：android, layout-inflater

I want to inflate a view with only an image to be above my main layout center screen, so far I only am able to add an inflated view as the first child of my main layout. How can I inflate an imageview to be above my other views and be in the center of the screen?

```
LayoutInflater inflater = (LayoutInflater)getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        layout = inflater.inflate(R.layout.image_preview,(ViewGroup)findViewById(R.id.previewHolder));
        ((LinearLayout) (LinearLayout)findViewById(R.id.fullScreen)).addView(layout);//add inflated to main view 
```

Main layout

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:focusable="true"
android:orientation="vertical"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
 >

<LinearLayout
    android:id="@+id/fullScreen"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</LinearLayout>

<TableLayout
    android:id="@+id/root"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center"
    android:focusableInTouchMode="true"
    android:stretchColumns="*" >
    ........................
   </TableLayout>
   </LinearLayout> 
```

Activity

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_testing_cam);
            badge.setOnClickListener(btnListener);
          }
  private OnClickListener btnListener = new OnClickListener() { 

         @Override
       public void onClick(View v) {
           //SELECTS BUTTON ACTIONS
        switch(v.getId()){

            case R.id.status:
                finish();
                break;
            default:
                previewImages(v.getId());
                break;
        }
    }
}; 
            //CARRY OUT IMAGE FUNCTIONS
public void previewImages(int index){
    try{

        LayoutInflater inflater = (LayoutInflater)getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        layout = inflater.inflate(R.layout.image_preview,(ViewGroup)findViewById(R.id.previewHolder));
        ((LinearLayout) (LinearLayout)findViewById(R.id.fullScreen)).addView(layout);

    ImageView iv = (ImageView)findViewById(R.id.previewImage);
    BitmapDrawable drawable = (BitmapDrawable) ((ImageView) showCase.getChildAt(index)).getDrawable();
    Bitmap bitmap = drawable.getBitmap();
    iv.setImageBitmap(bitmap);
    ((LinearLayout) (LinearLayout)findViewById(R.id.fullScreen)).bringToFront();
    }catch(Exception e){ Log.i("ERROR FLATE", e.toString()); }
    return;
} 
```

View being inflated

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<ImageView
    android:id="@+id/previewImage"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center"
    android:adjustViewBounds="true"
    android:scaleType="fitXY"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:31:59.487

如果你想在 fullScreen 和 root 之上添加预览，你应该修改你的父布局。 `LinearLayout`垂直排列它的孩子，而在这种情况下，您需要使用 a`FrameLayout`或 a`RelativeLayout`代替。像这样的东西：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:focusable="true">

  <!-- your previous content -->
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin">

    <LinearLayout
      android:id="@+id/fullScreen"
      android:layout_width="match_parent"
      android:layout_height="wrap_content" >
    </LinearLayout>

    <TableLayout
      android:id="@+id/root"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:layout_gravity="center"
      android:focusableInTouchMode="true"
      android:stretchColumns="*" >
      ........................
    </TableLayout>

  </LinearLayout>

  <!-- your preview -->
  <ImageView
    android:id="@+id/preview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:visibility="gone"/>

</RelativeLayout> 
```

单击时您所要做的就是更改 to 的可见性`preview` `ImageView`并`visible`相应地设置其来源。

# sql - 通过 id 从不同的表中获取用户

> ID：16124559
> 
> 赞同：0
> 
> 时间：2013-04-20T19:58:50.983
> 
> 标签：sql

我有一个类似 twitter 的网站用于学习目的，您可以在其中关注用户。现在我想获取所有关注登录人的用户。

下表有三行。id、user_id、follow_id

现在，如果用户 1 跟随用户 2。行中的值将是`user_id = 1`， `follow_id= 2`

但是当我试图获取具有相同 follow_id 的用户时，我只得到 user_id 2 作为回报。并不是所有具有 follow_id=2 的用户

任何的想法 ？

```
SELECT 
    user.id, user.username, user.email,
    userdetails.profile_img, following.follow_id 
FROM 
    user 
JOIN 
    userdetails ON user.id = userdetails.user_id 
JOIN 
    following on user.id = following.follow_id 
WHERE 
    following.follow_id = 2 
```

这就是我的桌子的样子

```
Following
id | user_id | follow_id

Tweets
user_id|id|date|message

user
id|email|password|username

userdetails
id|firstname|lastname|profile_img|user_id|about 
```

有小费吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:16:48.190

更改`JOIN following on user.id = following.follow_id`为`JOIN following on user.id = following.user_id`。

```
SELECT 
    user.id, user.username, user.email,
    userdetails.profile_img, following.follow_id 
FROM 
    user 
JOIN 
    userdetails ON user.id = userdetails.user_id 
JOIN 
    following on user.id = following.user_id 
WHERE 
    following.follow_id = 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T20:15:41.627

试试这个

```
SELECT * FROM Following 
INNER JOIN Users on Following.UserId=Users.Id
INNER JOIN UsersDetails on Users.Id=UserDetails.UserId
where Following.Follow_id=@UserId 
```

当然，您可以根据需要选择列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T20:16:35.707

```
SELECT user.id, user.username,user.email,
userdetails.profile_img, following.follow_id FROM user JOIN userdetails 
ON user.id = userdetails.user_id JOIN following 
ON user.id = following.follow_id WHERE following.follow_id = 2 
```

要获取与`follow_id`= 2 匹配的所有用户 id：

```
SELECT user_id from following where follow_id = 2; 
```

（我会将它们`user_id`在下表中的列名称更改为`follower_id`）

还要从与关联的 userdetails 表中获取数据`user_id`：

```
SELECT userdetails.*, user.* FROM userdetails JOIN users 
ON user.id = userdetails.user_id JOIN following
ON user.id = following.***user_id*** WHERE following.follow_id = 2; 
```

看看这是否有效，我认为您的问题是您加入了关注。`follow_id`给用户而不是`following.user_id`

# php - gd 库提供损坏的图像并覆盖 wordpress 主题

> ID：16124562
> 
> 赞同：0
> 
> 时间：2013-04-20T19:59:02.510
> 
> 标签：php, wordpress, gd

我创建了一个新模板并添加了以下代码：

```
<?php
$stamp = imagecreatefrompng('images/haz.png');
$im = imagecreatefromjpeg('images/baz.jpg');

$marge_right = 10;
$marge_bottom = 10;
$sx = imagesx($stamp);
$sy = imagesy($stamp);

imagecopy($im, $stamp, imagesx($im) - $sx - $marge_right, imagesy($im) - $sy - $marge_bottom, 0, 0, imagesx($stamp), imagesy($stamp));

header('Content-type: image/png');
imagepng($im);
imagedestroy($im);
?> 
```

出于某种原因，这只是覆盖了我的整个主题并给了我一个破碎的图像[http://i.imgur.com/sWySUdz.png](http://i.imgur.com/sWySUdz.png)

我还尝试了一些我发现的其他代码，结果是一样的！我的主题消失了，我看到的只是一个破碎的图像。这让我相信我的服务器或我的 GD 库有问题。我使用了 phpinfo，这就是我得到的

```
GD Support  enabled
GD Version  bundled (2.0.34 compatible)
FreeType Support    enabled
FreeType Linkage    with freetype
FreeType Version    2.3.11
GIF Read Support    enabled
GIF Create Support  enabled
JPG Support enabled
PNG Support enabled
WBMP Support    enabled
XPM Support enabled
XBM Support enabled 
```

更让我困扰的是，它不仅显示损坏的图像，而且覆盖了我的整个主题！我已经尝试在谷歌中寻找解决方案几个小时，但似乎找不到！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:12:51.810

这将是 GD 库遇到致命错误，并且可能正在死亡/退出。

# javascript - 如何使 HTML5 画布全屏显示？

> ID：16124569
> 
> 赞同：7
> 
> 时间：2013-04-20T19:59:58.463
> 
> 标签：javascript, html, canvas, html5-canvas, fullscreen

我已经看过几十个这方面的教程，而且看起来很简单。我想要的只是让我的 HTML5 画布元素全屏显示（就像完全全屏一样，占据整个显示器）。

这是我的 HTML：

```
<p><canvas id="screen" width="800" height="500"
    style="background: #FFFFFF; border: 5px solid black;" role="img">
        Your browser does not support the canvas element.
</canvas></p>

<p><a href="javascript:goFullScreen();">Go Fullscreen</a></p> 
```

这是我的 Javascript（在它自己的 .js 文件中）：

```
function goFullScreen(){
    var canvas = document.getElementById("screen");
    if(canvas.requestFullScreen)
        canvas.requestFullScreen();
    else if(canvas.webkitRequestFullScreen)
        canvas.webkitRequestFullScreen();
    else if(canvas.mozRequestFullScreen)
        canvas.mozRequestFullScreen();
} 
```

我测试了功能；它被调用，三个 if 之一（即，因为我使用的是 Firefox，mozRequestFullScreen）被调用。我的浏览器在我测试过的每个演示中都会打开它，但不是在我自己的代码中。

缺少什么变量？我必须用谷歌搜索所有提到这一点的链接，但仍然一无所获。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-20T20:08:13.707

Okay, I found the problem. This does not work:

```
<p><a href="javascript:goFullScreen();">Go Fullscreen</a></p> 
```

This DOES work:

```
<p><button onclick="goFullScreen();">Go Fullscreen</button></p> 
```

Yeah... 3 hours later.

# java - 在浏览器上显示 shell 脚本的输出

> ID：16124573
> 
> 赞同：0
> 
> 时间：2013-04-20T20:00:09.957
> 
> 标签：java, ajax, shell

这是我在这里的第一个问题，如果我哪里出错了，请原谅。我正在尝试使用 Ajax 从 html 页面调用服务器上的 shell 脚本。Ajax 函数正在调用 java 动作，而这个 java 动作类正在调用一个 shell 脚本。shell 脚本将在运行时写入输出。我想在浏览器上显示该输出，就像它出现在 shell 上一样。

我现在这样做的方式是将shell的输出写入一个文件，然后在网页上显示该文件的内容，但我只想在脚本写入后立即在网页上显示输出. 该脚本需要 2 分钟才能运行，并且在运行时，它会继续在 shell 上写入输出。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:03:59.000

一种方法是通过[ProcessBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)类 `start()`访问 shell 脚本。

拥有[Process](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html)实例后，您可以分别通过[getOutputStream()](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html#getOutputStream%28%29)和[getErrorStream()](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html#getErrorStream%28%29)获取其标准输出和标准错误流。

这些 InputStreams 包含您正在寻找的输出。当您阅读它们时，您可以将它们的输出写入您的 servlet 或 JSP 的响应输出流。您需要对进程执行类似于[waitFor()](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html#waitFor%28%29)之类的操作并创建线程来读取其输出并写入您的 servlet 响应。

# java - Java Web 应用程序从文件读取并写入同一文件

> ID：16124574
> 
> 赞同：2
> 
> 时间：2013-04-20T20:00:14.173
> 
> 标签：java, jsp, netbeans

好的，我有一个我编写的 Web 应用程序，我可以从一个文件中读取，该文件包含在我的源包中的一个名为“text”的新文件夹中。我正在尝试写入同一个文件，但它不起作用。它从不写入文件。这是我的两种方法的代码：

```
public void fillItems() throws IOException{
    String path = "/OBrien_PROJ2/text/catalog.txt";
    BufferedReader br = new BufferedReader(new   InputStreamReader(getClass().getResourceAsStream(path))); 
    String text = null;
    while ((text=br.readLine())!=null){
       String[] itemArray = text.split(","); 
       // you might want to check array size
       items.add(new ItemBean (itemArray[0], itemArray[1], itemArray[2], itemArray[3], itemArray[4]));

    }

    br.close();
}

 public void createNewItem(String iD, String name, String description, String price, String quantity) throws IOException{
     String path = "/OBrien_PROJ2/text/catalog.txt";
     BufferedWriter bw = new BufferedWriter(new FileWriter(path));
     bw.write(iD + "," + name + "," + description + "," + price + "," + quantity);
     items.add(new ItemBean (iD, name, description, price, quantity));
     bw.flush();
     bw.close();
 } 
```

如果重要的话，我正在使用 NetBeans

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T20:39:26.957

用于`getServletContext().getRealPath("/")`获取 Web 应用程序的当前路径

你最好使用我现在写的这段代码

```
<%@page import="java.io.BufferedOutputStream"%>
<%@page import="java.io.FileOutputStream"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>
</head>
<body>
    <h1>Hello World!</h1>
    <%
        try{
        String file = getServletContext().getRealPath("/")+"text/test.txt";
        FileOutputStream fos = new FileOutputStream(file);
        BufferedOutputStream bos = new BufferedOutputStream(fos);

        bos.flush();
        bos.close();
        }
        catch(Exception ex){
            ex.printStackTrace();
            }
    %>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T20:05:24.273

The resource you read is not a file. It's a resource loaded by the classloader. When deployed, this resource will be read from inside a war file, and perhaps even from a jar file inside this war file.

Don't ever try to modify the contents of a webapp dynamically. Even if it is possible, it's an extremely bad idea, since any redeployment of the webapp would delete the creted or modified files. If you have to write somewhere, write to a database (preferrably), since it can easily be shared by multiple webapp instances, and handle concurreny natively), or to a file outside of the webapp.

BTW, the argument of the FileWriter constructor is a file path. So `new FileWriter("/OBrien_PROJ2/text/catalog.txt")` writes to the file `/OBrien_PROJ2/text/catalog.txt` on the file system (and not inside the webapp).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-08T06:54:07.297

首先，您将创建两个 servlet。在这里，我创建了 A 和 B servlet。

公共类 A 扩展 HttpServlet {

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    try (PrintWriter out = response.getWriter()) {

        InputStream input= this.getClass().getResourceAsStream("addressBook.txt");
        int x= input.read();
        while(x != -1){
            char c= (char) x;
            out.print(c);
            x= input.read();                
        }
     }
        catch(Exception ex){
               ex.printStackTrace();
        }

        finally{
            out.close();
        }
    }
} 
```

在这里，我将此文本写入 addressBook.txt 文件。一个 servlet 读取该文本文件。B servlet 写入文本文件。

```
public class B extends HttpServlet {

 protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    try (PrintWriter out = response.getWriter()) {
        String name=request.getParameter("n");
        String mobile=request.getParameter("m"); 
        out.println(name+"<br>");
        out.println(mobile);
        FileWriter fileWriter=new FileWriter("E:\\IJSE\\ABSD\\DAY 6\\Assignment 1\\src\\java\\adbook.txt",true);
        PrintWriter printWriter=new PrintWriter(fileWriter,true);
        if(name==null||mobile==null) {
           } else {
                printWriter.println("<tr><td>" + name + "</td><td>" + mobile + "</td></tr>");
                out.println("<body bgcolor=\"#1589FF\">\n" +
                "<script language=\"javascript\">\n" +
                "alert( \"Added successfull\" );\n" +
                "</script>\n" +
                "<p></p>");

           }
        printWriter.close();
    }
} 
```

# java - 如何将图像添加为 JPanel 背景？

> ID：16124579
> 
> 赞同：3
> 
> 时间：2013-04-20T20:00:28.470
> 
> 标签：java, swing, background, jpanel, border-layout

我想使用不同的背景制作四个面板，然后使用`BorderLayout`. 我使用`JLabel`了 ，但我无法将任何组件添加到 a `JLabel`，因此我需要将其作为背景。

我搜索了一些代码，但它只告诉如何在`JFrame`.

```
import javax.swing.*;
import java.awt.*;

public class LoginPanel extends JFrame{
private ImageIcon top = new ImageIcon("C:/Users/user/Desktop/top.png");
private ImageIcon mid = new ImageIcon("C:/Users/user/Desktop/mid.png");
private ImageIcon center = new ImageIcon("C:/Users/user/Desktop/center.png");
private ImageIcon bottom = new ImageIcon("C:/Users/user/Desktop/bottom.png");

public LoginPanel(){

    JPanel topp = new JPanel();
    topp.setLayout(new BorderLayout(0,0));
    topp.add(new JLabel(top),BorderLayout.NORTH);

    JPanel centerp = new JPanel();
    centerp.setLayout(new BorderLayout(0,0));
    centerp.add(new JLabel(mid),BorderLayout.NORTH);
    centerp.add(new JLabel(center),BorderLayout.SOUTH);

    topp.add(new JLabel(bottom),BorderLayout.SOUTH);
    topp.add(centerp,BorderLayout.CENTER);

    add(topp);

}

public static void main(String[] args) {
    LoginPanel frame = new LoginPanel();
    frame.setTitle("Test");
    frame.setSize(812, 640);
    frame.setLocationRelativeTo(null); // Center the frame
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T20:17:04.650

查看[自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)和[2D 图形](http://docs.oracle.com/javase/tutorial/2d/)

查看

*   [不使用摆动将图像添加到面板](https://stackoverflow.com/questions/13774913/add-image-to-panel-not-using-swings/13775921#13775921)
*   [Java：保持JPanel背景图像的纵横比](https://stackoverflow.com/questions/11959758/java-maintaining-aspect-ratio-of-jpanel-background-image/11959928#11959928)
*   [Java 背景 JFrame 与 Jpanel 在网格中排列图像](https://stackoverflow.com/questions/11856027/java-background-jframe-with-a-jpanel-arranging-images-in-a-grid/11856562#11856562)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T20:04:12.907

我会创建一个名为 的新类`JImagePanel`，然后使用它：

```
class JImagePanel extends JComponent {
    private static final long serialVersionUID = 1L;
    public BufferedImage image;

    public JImagePanel(BufferedImage image)
    {
        this.image = image;
    }

    @Override
    public void paintComponent(Graphics g)
    {
        super.paintComponent(g);

        // scale image
        BufferedImage before = image;
        int w = before.getWidth();
        int h = before.getHeight();
        BufferedImage after = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);
        AffineTransform at = new AffineTransform();
        at.scale(2.0, 2.0);
        AffineTransformOp scaleOp = new AffineTransformOp(at, AffineTransformOp.TYPE_BILINEAR);
        after = scaleOp.filter(before, after);

        // center image and draw
        Graphics2D g2d = (Graphics2D) g;
        int x = (getWidth() - 1 - image.getWidth(this)) / 2;
        int y = (getHeight() - 1 - image.getHeight(this)) / 2;
        g2d.drawImage(image, x, y, this);
        g2d.dispose();
    }
} 
```

# twitter-bootstrap - 在模板中将 django 变量转换为 int

> ID：16124583
> 
> 赞同：0
> 
> 时间：2013-04-20T20:01:11.557
> 
> 标签：twitter-bootstrap, django-templates

我正在尝试为我网站上的用户列表制作分页器（使用 twitter 引导程序）。我从 twitter bootstrap 获取的 html 代码如下所示：

```
 <div class="pagination" >
    <ul>
    {% if users.has_previous %}
    <li><a href="?page={{ users.previous_page_number }}">Prev</a></li>
    {% endif %}

    <li><a href="/users/?page=1">...</a></li>
    <li><a href="/users/?page=2">...</a></li>
    <li><a href="/users/?page={{users.number}}">{{users.number}}</a></li>
    <li><a href="/users/?page=4">...</a></li>
    <li><a href="/users/?page=5">...</a></li>

    {% if users.has_next %}
    <li><a href="?page={{ users.next_page_number }}">Next</a></li>
    {% endif %}
    </ul>
    </div> 
```

我不知道在点的地方写什么。如何将变量 {{users.number}} 转换为 int 以使用数字进行操作并获取（ {{users.number}}-1 ）等以放置它们而不是点？

我尝试使用过滤器，但它不起作用。我想我只能在 {% %} 而不是 {{}} 中使用它们。

是否可以在模板中正确设置？或者我应该添加views.py然后传递给我的模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:40:48.330

`add`过滤器尝试将参数自动转换为整数。因此， 如果值可以转换为 int，则`{{ value|add:2 }}`or将返回 6。`{{ value|add:"2" }}`并且`{{ value|add:-2 }}`应该返回 4。

但我认为模板标签或过滤器也适用于此。只是一个简单的函数，它可以获取所需的数字，可能还有两个方向的步骤，例如 2，然后返回`[n-2, n-1, n, n+1, n+2]`. 然后，您可以遍历添加 li-tag 的列表。

这将是过滤器的一个示例：

```
# templates/templatetags/calculate_numbers.py

from django import template

register = template.Library()

@register.filter
def calculate_numbers(n, steps):
    n = int(n)     
    return range(n-steps, n+steps+1) 
```

在您的模板上：

```
{% load calculate_numbers %}

{% for n in users.number|calculate_numbers:2 %}
<li><a href="/users/?page={{ n }}">{{ n }}</a></li>
{% endfor %} 
```

# ios - 使用数组创建按钮

> ID：16124584
> 
> 赞同：0
> 
> 时间：2013-04-20T20:01:13.977
> 
> 标签：ios, arrays, uibutton

我有 44 个按钮要添加到滚动视图中，并且我试图使用一系列数组来执行此操作。我有用于文件名的名称字符串的数组，用于图片的 Y 大小（所有 x 都相同）和其他一些。

我在 viewDidLoad 中运行该方法的代码是这样的：

```
for (int i = 0; i < 44; i++) {
    [self makeLabelsAndButtons:i];
} 
```

makeLabelsAndButtons 方法在这里：

```
-(void)makeLabelsAndButtons:(NSInteger *)indexPath{
NSString *nameString = [nameArray objectAtIndex:indexPath];
NSString *picString = [picArray objectAtIndex:indexPath];
NSInteger picNumb = [[numbers objectAtIndex:indexPath] integerValue];
NSInteger picXnum = [[picXCoords objectAtIndex:indexPath] integerValue];

Button = [UIButton buttonWithType:UIButtonTypeCustom];
[Button addTarget:self action:@selector(presPressed:)
  forControlEvents:UIControlEventTouchUpInside];
Button.frame = CGRectMake(160.0, 240.0, 220.0, picNumb);
Button.center = CGPointMake(picXnum, 200.0);
[Button setBackgroundImage:[UIImage imageNamed:picString] forState: UIControlStateNormal];
[ScrollView addSubview:Button];
[ScrollView insertSubview:Button atIndex:1];

NSLog(@"name: %@, pic:%@, picY:%i", nameString, picString, picNumb);

} 
```

没有添加按钮，但我没有收到任何错误。我真的不确定我做错了什么

谢谢你的帮助！

编辑：这就是我初始化滚动视图的方式

```
ScrollView=[[UIScrollView alloc]initWithFrame:CGRectMake(0,0,320,480)];
ScrollView.showsVerticalScrollIndicator=YES;
ScrollView.scrollEnabled=YES;
ScrollView.bounces = YES;
ScrollView.userInteractionEnabled=YES;
[self.view addSubview:ScrollView];
[self.view insertSubview:ScrollView atIndex:1];
ScrollView.contentSize = CGSizeMake(20000,480); 
```

通过 NSLogs 系统，我确定按钮没有被添加到视图中，我不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:50:07.837

看起来你的 scrollView 是水平滚动的。

你可以试试

```
-(void)addButtonsToScrollView
{
    //X Offset for button seperation 
    CGFloat xOffset = 10.0f;

    NSUInteger buttonCount = 0;
    //In each iteration buttonFrame would be adjusted to next buttonFrame
    //This would be used to find the contentSize of scrollView
    CGRect buttonFrame = CGRectMake(xOffset, 240.0, 220.0, 40.0f);
    while (buttonCount<44)
    {
        NSString *nameString = nameArray[buttonCount];
        NSString *picString = picArray[buttonCount];

        CGFloat picNumb = [numbers[buttonCount] floatValue];
        CGFloat picXnum = [picXCoords[buttonCount] floatValue];

        UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];

        [button addTarget:self
                   action:@selector(presPressed:)
         forControlEvents:UIControlEventTouchUpInside];

        buttonFrame.origin.y = (scrollView.frame.size.height - picNumb)/2;
        buttonFrame.size.height = picNumb;
        button.frame = buttonFrame;

        [button setBackgroundImage:[UIImage imageNamed:picString]
                          forState: UIControlStateNormal];
        [button setTitle:nameString
                forState:UIControlStateNormal];

        [scrollView addSubview:button];

        buttonFrame.origin.x += buttonFrame.size.width+xOffset;
        buttonCount++;

    }

    CGSize contentSize = scrollView.frame.size;
    contentSize.width = buttonFrame.origin.x;
    scrollView.contentSize = contentSize;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T20:22:41.877

根据以下更改您的代码.....它可能会工作

```
[Button setBackgroundImage:[UIImage imageNamed:picString] forState: UIControlStateNormal]; 
```

将上面替换为

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"picString" ofType:@"png"];
[Button setBackgroundImage:[[UIImage alloc] initWithContentsOfFile:path] forState: UIControlStateNormal]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T20:36:29.187

我假设您有两个属性`Button`并`ScrollView`在您的控制器上声明。

*   `ScrollView`为了`scrollView`便于阅读，将该属性重命名为。

    ```
    @property (nonatomic, weak) IBOutlet UIScrollView *scrollView; 
    ```

*   删除该属性`Button`，因为您不需要它。

*   更新您的代码：

    ```
    Button *button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button addTarget:self action:@selector(presPressed:) forControlEvents:UIControlEventTouchUpInside];
    button.frame = CGRectMake(160.0, 240.0, 220.0, picNumb);
    button.center = CGPointMake(picXnum, 200.0);
    [button setBackgroundImage:[UIImage imageNamed:picString] forState: UIControlStateNormal];
    [self.scrollView addSubview:button]; 
    ```

您不需要同时添加子视图并插入它。

可能是您没有`ScrollView`向 nil 对象分配和发送消息不会给您错误。您需要确认 self.scrollView 不为零，如果是，则检查它是否在您的视图中正确连接。

# vb.net - SQLite 并发连接问题

> ID：16124589
> 
> 赞同：0
> 
> 时间：2013-04-20T20:01:35.757
> 
> 标签：vb.net, system.data.sqlite, sqlite

我正在开发一个 VB.NET 应用程序。根据应用程序的性质，一个模块必须每秒监控数据库（SQLite DB）。此监控是通过简单的 select 语句完成的，该语句运行以检查数据是否符合某些条件。其他模块在同一 SQLite DB 上执行选择、插入和更新语句。关于 SQLite 并发选择语句工作正常，但我很难在这里找出，为什么它不允许插入和更新。我知道这是一个基于文件的锁，但有没有办法完成它？每个模块，实际上语句打开和关闭与 DB 的连接。我已经通过 GUI 设计限制用户一次运​​行单个语句。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T19:43:12.480

You can use some locking mechanism to make sure the database works in a multithreading situation. Since your application is a read intensive one according to what you said, you can consider using a ReaderWriterLock or ReaderWriterLockSlim. (refer to [here](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlock.aspx) and [here](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx) for more details)

If you have only one database, then creating just one instance of the lock is OK; if you have more than one database, each of them can be assigned a lock. Every time you do some read or write, enter the lock (by EnterReadLock() for ReaderWriterLockSlim, or by AcquireReaderLock() for ReaderWriterLock) before you do something, and after you're done exit the lock. Note that you can place the exit of the lock in a finally clause lest you forget to release it.

The strategy above is being used in our production applications. It's not so good as to use a single thread in your case because you have to take performance into account.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T09:49:08.987

[如果您的数据库文件不在网络上，您可以通过启用WAL 模式](http://www.sqlite.org/wal.html)来允许一定数量的读/写并发。

但也许您应该只使用一个连接并为所有数据库访问进行自己的同步。

# ruby-on-rails - Rails 将动态页面路由到友好的 url

> ID：16124599
> 
> 赞同：0
> 
> 时间：2013-04-20T20:02:27.730
> 
> 标签：ruby-on-rails, ruby, routing, routes

我有一个活动网站，需要为列名生成一个新的 url：当用户在活动管理员中创建事件时定义的域，即[http://www.re-work.co/:domains](http://www.re-work.co/:domains)

我有事件模式和 events_controller，视图是 events#show

在我的路线文件中，我有

```
match '/:domains' => "events#show"
  resources :events 
```

我的控制器有这个看起来像问题但我不知道将其更改为：

```
class EventsController < ApplicationController
def show
  @event = Event.where(:domains => request.base_url).first

  if @event.nil?
    @event = Event.first
  end
end 
```

rake 路由的片段，因为所有其他路由都与管理员有关

```
$ rake routes

         root            /                                         events#show
       events GET        /events(.:format)                         events#index
              POST       /events(.:format)                         events#create
    new_event GET        /events/new(.:format)                     events#new
   edit_event GET        /events/:id/edit(.:format)                events#edit
        event GET        /events/:id(.:format)                     events#show
              PUT        /events/:id(.:format)                     events#update
              DELETE     /events/:id(.:format)                     events#destroy 
```

所有这些 url '/events/technology' 或 '/events/cities' 或 '/cities' 或 '/technology' 都在同一个页面，我是 Rails 新手，已经阅读/观看过 Rails 路由教程，但我不知道出来。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:06:04.743

那是因为这一行：

```
match '/:domains' => "events#show" 
```

匹配“/”之后的所有内容并将其指向`events#show`操作。该行不是必需的（您可以将其删除），因为：

```
 resources :events 
```

将为事件控制器生成所有默认路由。

**编辑：**

如果您想要做的是捕获传递的任何内容，`/:domains`以便在`show`操作内部使用。然后该参数作为散列的一部分传播`params`，例如：

```
Parameters: {"domains"=>"technology"} 
```

您可以像这样访问它`params[:domains]`。在这种情况下，您可以保留第一行：

```
match '/:domains' => "events#show"
match '/events/:domains' => "events#show" # add this one

resources :events   # <- delete this one, this right now is kind of redundant for what you're trying to do 
```

并更改以下代码：

```
 @event = Event.where(:domains => params[:domains] ).first 
```

# classification - 特征向量：计算训练集与测试集的权重

> ID：16124602
> 
> 赞同：2
> 
> 时间：2013-04-20T20:02:30.157
> 
> 标签：classification, feature-extraction, document-classification

我正在使用支持向量机进行文本分类，但基本上我对测试集的特征向量计算感到困惑。

对于训练特征向量，我为每个训练数据取 TF-IDF 向量，并使用 TF-IDF 值构建了一个特征矩阵 [docs x terms]。

但是如何计算测试集的特征向量呢？我应该只使用训练集中的 TF-IDF 值来计算它吗？

例如：在特定单词“apple”的训练集中，文档频率为 5。对于测试集，我应该将值 5 用于“apple”吗？还是根据测试集重新计算 TF-IDF？或者更确切地说，我在计算特征向量时走错路了吗？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T21:37:57.550

您应该使用训练集计算每个术语的 IDF（逆文档频率）。然后，您应该对测试集中的文档使用相同的 IDF。另一方面，TF 取决于您尝试分类的具体文档，因此对于测试和训练集中的不同文档，它会有所不同。

# java - 如何获取字符串的一部分

> ID：16124605
> 
> 赞同：-5
> 
> 时间：2013-04-20T20:02:57.113
> 
> 标签：java

在我的程序中，程序要求用户在`TreeMap`.

> 添加 John Do 123-456-789
> 
> 找到约翰多
> 
> 删除 John Do
> 
> 添加迈克尔乔丹 232-323-232

我对如何拆分字符串有疑问。我想知道如何将字符串添加、查找和删除用于 switch 语句，将 John Do 作为字符串键，将 123-456-789 作为字符串值。有没有办法使用`split()`，并获取第一个单词、名称和值？

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:10:34.570

您可以使用[split()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)并根据空格进行拆分。

```
String str = "add John    Do    123-456-789";
String[] res = str.split("\\s+");
System.out.println(Arrays.toString(res)); 
```

现在结果将是：

`[add, John, Do, 123-456-789]`

`res`现在您可以从数组中获取字符串值。

*如评论中所述，我建议您在发布问题之前进行一些研究，并尽量少尝试。完成此操作后，如果仍有问题，可以在此处提问。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T20:04:40.037

The following code splits the string to an array of strings containing the number tokens separated by hyphens. `String[] tokens = str.split("-");`

# kineticjs - 如何在不使用组的情况下一起移动多个形状

> ID：16124606
> 
> 赞同：1
> 
> 时间：2013-04-20T20:03:11.893
> 
> 标签：kineticjs

我是 KineticJS 的新手，有一个非常基本的问题。

我正在尝试使用 KineticJS 创建一个图形（父子层次结构）。所以在任何节点我都会有 3 件事：

1）一个圆作为节点本身

2) 附在圆圈上的“+”号小图像。单击此“+”将允许创建子节点。

3) 一条连接该节点与子节点的线。

我尝试将它们中的所有 3 个捆绑在一个“组”中，但问题是当我拖动组时它们中的所有 3 个一起移动 - 这显然是意料之中的 - 但是当我拖动子节点时它会“分离”连接线时出现问题到父节点。

基本上只有连接到子节点的线的一端应该移动，连接到父节点的一端应该固定。

我如何实现这一目标？一个快速的代码片段将帮助我处理过去 2 天我试图解决的这个问题。

非常感谢！

-S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T23:10:00.563

**您可以通过使用自定义 drawFunc 创建一条线来保持父节点和子节点的连接。**

该行的自定义 drawFunc 只是获取父子位置并在它们之间绘制自身。

```
drawFunc: function(canvas){
    var ctx=canvas.getContext();
    var x1=parentNode.getPosition().x;
    var y1=parentNode.getPosition().y;
    var x2=childNode.getPosition().x;
    var y2=childNode.getPosition().y;
    ctx.save();
    ctx.strokeStyle="red";
    ctx.lineWidth=3;
    ctx.beginPath();
    ctx.moveTo(x1,y1);
    ctx.lineTo(x2,y2);
    ctx.stroke();
    ctx.restore();
}, 
```

您可能还希望将线绘制在节点后面而不是顶部。

您可以通过设置 stage.getDragLayer.afterDraw 函数将连接线移动到 z-index 的底部来做到这一点

```
stage.getDragLayer().afterDraw(function() {
    connector.moveToBottom();
    layer.draw();
}); 
```

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/tt2KG/](http://jsfiddle.net/m1erickson/tt2KG/)

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Prototype</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.3.3-beta.js"></script>

<style>
#container{
  border:solid 1px #ccc;
  margin-top: 10px;
}
</style>        
<script>
$(function(){

    function init(){

        var stage = new Kinetic.Stage({
            container: 'container',
            width: 400,
            height: 400
        });
        var layer = new Kinetic.Layer();
        stage.add(layer);

        var parentNode = new Kinetic.Circle({
          x: 50,
          y: 80,
          radius: 40,
          fill: "blue",
          stroke: "red",
          strokeWidth: 3,
          draggable: true
        });    

        var childNode = new Kinetic.Circle({
          x: 150,
          y: 80,
          radius:25,
          fill: "green",
          stroke: "red",
          strokeWidth: 3,
          draggable: true
        });    

        var connector = new Kinetic.Line({
            drawFunc: function(canvas){
                var ctx=canvas.getContext();
                var x1=parentNode.getPosition().x;
                var y1=parentNode.getPosition().y;
                var x2=childNode.getPosition().x;
                var y2=childNode.getPosition().y;
                ctx.save();
                ctx.strokeStyle="red";
                ctx.lineWidth=3;
                ctx.beginPath();
                ctx.moveTo(x1,y1);
                ctx.lineTo(x2,y2);
                ctx.stroke();
                ctx.restore();
            },
            points: [1,1,1,3],
            stroke: "red",
            strokeWidth: 2,
            lineCap: 'round',
            lineJoin: 'round',
            opacity: 1,
            draggable:false
        });
        layer.add(connector);
        layer.add(parentNode);
        layer.add(childNode);

        // keep connector on rect1+rect2
        stage.getDragLayer().afterDraw(function() {
            connector.moveToBottom();
            layer.draw();
        });

        layer.draw();
    }

init();

}); // end $(function(){});

</script>       
</head>

<body>
    <div id="container"></div>
</body>
</html> 
```

# android - 无法构建 R 文件，但我的 res 文件夹中没有错误

> ID：16124614
> 
> 赞同：0
> 
> 时间：2013-04-20T20:03:58.587
> 
> 标签：android

我已经尝试过：清理，重新启动 eclipse，创建和删除一个虚拟 xml 文件。如果我的 res 文件夹中没有错误，还有什么会导致 R 文件无法生成。 ![在此处输入图像描述](https://i.stack.imgur.com/EQ2K4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T20:09:31.213

中也可能存在问题`AndroidManifest.xml`。有时，Eclipse 包管理器树不会为实际上有错误的文件显示红色 X 标记（尽管它已经变得更好了）。所以，我建议打开`AndroidManifest.xml`和您最近编辑的其他资源，以确认那里没有错误。

另外，请记住，`R.java`在您进行构建之前不会创建它。通常，我们在 Eclipse 中检查了 Build Automatically，因此每次保存都会进行构建。如果您取消选中它，请重新检查它或手动进行构建。

您还可以检查 Eclipse Console 选项卡以查看那里是否有红色错误消息。

最后，您可以尝试命令行构建。过去我会在那里发现错误，无论出于何种原因，Eclipse 都没有向我显示。一年多以来我都不需要这样做，但仍有可能在某些情况下它可能有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T01:08:33.837

我经常遇到这个问题，我所经历的是，你可能错误地命名了一些文件（名称以数字字符开头，使用一些分配的词，如 new、integer、class ...）

我希望这可以帮助你。

# c# - 如何通过从数据库中检索图像的名称来在网格视图中显示图像？

> ID：16124622
> 
> 赞同：-1
> 
> 时间：2013-04-20T20:04:26.487
> 
> 标签：c#, asp.net

我已将图像的名称和该人的名称存储在数据库中的学生表中，并将所有图像保存在名为 UploadedImg 的文件夹中，现在我想在另一个页面的网格视图中显示所有学生的名称和他们的图像。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T20:17:33.573

假设您知道如何将 DataBind 绑定到 GridView，您的 GridView 将具有类似的代码（您的列名假定为“名称”和“图像”）

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false" runat="server"
     GridLines="Horizontal">

    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:Image runat="server"  ImageUrl='<%# "~/UploadedImg/"+Eval("image") +".jpg"%>' Width="16" />     
            </ItemTemplate>
        </asp:TemplateField>
     <asp:BoundField DataField='<%#Eval("name") %>'/>
    </Columns>       
</asp:GridView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T20:06:32.363

在 asp.net 上阅读。寻找使用中继器添加`<img>`到您的 aspx 页面。

网上应该有很多例子

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T20:37:06.197

这些链接可能会对您有所帮助。通过它

[http://highoncoding.com/Articles/166_Displaying_Images_in_a_GridView.aspx](http://highoncoding.com/Articles/166_Displaying_Images_in_a_GridView.aspx)

[http://csharpdotnetfreak.blogspot.com/2009/07/display-images-gridview-from-database.html](http://csharpdotnetfreak.blogspot.com/2009/07/display-images-gridview-from-database.html)

# java - LWJGL - 从 3D 切换到 2D 以在没有外部库的情况下呈现文本

> ID：16124626
> 
> 赞同：0
> 
> 时间：2013-04-20T20:04:49.487
> 
> 标签：java, text, fonts, 3d, lwjgl

我想通过切换到 2D 场景然后切换回 3D 在我的屏幕上渲染 2D 四边形。除了 LWJGL，我不想使用任何外部库。

这是我到目前为止得到的：

```
private static void renderLetter(char c, float x, float y) {
    int character = c+1;
    GL11.glPushMatrix();

    setOrthoOn();

    GL11.glTranslatef(x, y, 0);

    float[] xy = game.getResourceManager().getSpriteSheets().get(fontSheet).getXYForCell(character);
    float cellx = game.getResourceManager().getSpriteSheets().get(fontSheet).getCell_sizeX();
    float celly = game.getResourceManager().getSpriteSheets().get(fontSheet).getCell_sizeY();
    float xx = xy[0];
    float yy = xy[1];

    GL11.glBindTexture(GL11.GL_TEXTURE_2D, game.getResourceManager().getTextures().get(game.getResourceManager().getSpriteSheets().get(fontSheet).getTextureID()));
    GL11.glBegin(GL11.GL_QUADS);
        GL11.glTexCoord2f(xx, yy);
        GL11.glVertex2f(0,0);
        GL11.glTexCoord2f(xx+cellx, yy);
        GL11.glVertex2f(fontSize,0);
        GL11.glTexCoord2f(xx+cellx, yy+celly);
        GL11.glVertex2f(fontSize,fontSize);
        GL11.glTexCoord2f(xx, yy+celly);
        GL11.glVertex2f(0,fontSize);
    GL11.glEnd();
    GL11.glBindTexture(GL11.GL_TEXTURE_2D, 0);      

    setOrthoOff();

    GL11.glPopMatrix();
}

public static void setOrthoOn()
{
    GL11.glDisable(GL11.GL_LIGHTING);
    GL11.glClearColor(0.0f, 0.0f, 0.0f, 0.0f);                
    GL11.glClearDepth(1);
    GL11.glViewport(0,0,1360,768);
    GL11.glMatrixMode(GL11.GL_MODELVIEW);
    GL11.glMatrixMode(GL11.GL_PROJECTION);
    GL11.glLoadIdentity();
    GL11.glOrtho(0, 1360, 768, 0, 1, -1);
    GL11.glMatrixMode(GL11.GL_MODELVIEW);
    GL11.glLoadIdentity();
}

public static void setOrthoOff()
{
    GL11.glMatrixMode(GL11.GL_PROJECTION);
    GL11.glLoadIdentity();
    GLU.gluPerspective(game.getFieldOfView(), 1360f/768f, 0.1f, 1000);
    GL11.glMatrixMode(GL11.GL_MODELVIEW);
    GL11.glLoadIdentity();
    GL11.glEnable(GL11.GL_DEPTH_TEST);
    GL11.glDepthFunc(GL11.GL_LEQUAL);
    GL11.glHint(GL11.GL_PERSPECTIVE_CORRECTION_HINT, GL11.GL_NICEST);
} 
```

第一种方法是渲染一个字母。我想做的是通过调用 setOrthoOn 切换到 2D 渲染然后渲染四边形然后调用 setOrthoOff 切换回 3D。

当我运行它时，这段代码对我没有任何作用。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:45:15.740

[这应该这样做。](http://pastebin.com/DAAYMPNW)

注意：一些代码可能是无关的。我对OpenGL不是很有经验，但这对我有用。我还建议您静态导入 GL11。这样您就不必输入“GL11.BlaBlaBla”，只需输入“BlaBlaBla”即可。

# html - CSS navbar menu doesn't work correctly

> ID：16124628
> 
> 赞同：0
> 
> 时间：2013-04-20T20:05:12.510
> 
> 标签：html, css

I have this [HTML](http://en.wikipedia.org/wiki/HTML) code

```
<div id="navbar">
    <ul>
        <li><a href="#">Page1</a></li>
        <li><a href="#">page2</a></li>
    <li id="NavItem">
        <a href="#">page3</a>
        <div id="PopOver">
            <div class="ow-button">
                <a href="#">xnewPage1</a>
                <a href="#">xnewPage2</a>
                <a href="#">xnewPage3</a>
            </div>
        </div>
    </li>
        <li><a href="#">page4</a></li>
    </ul>
</div> 
```

CSS code

```
#navbar { position: relative; margin: 3px; }
#navbar ul {
    padding: 0;
    margin: auto;
    background: #f0f0f0 url(../images/1px.png) repeat-x 0 -441px;
    padding: 4px 0 4px 0;
}
#navbar li { display: inline; margin-right: 80px; }
#navbar li a {
    font-family: EqualSansDemo;
    font-size: 1.6em;
    color: #555555;
    text-shadow: 1px 1px 0px #fff; }
#navbar li a:hover { color: #0071e4; }

#PopOver {
    position:absolute;
    border:2px solid #07B1F1;
    width:170px;
    height:auto;
    padding:15px 5px 10px 5px;
    display:none;
    top:30px;
    left:229px;
    background-color:#FFFFFF;
    border-radius:8px;
    -moz-border-radius:8px;
    -webkit-border-radius:8px;
}

#NavItem:hover #PopOver {display:block}

.ow-button a {
    display: block;
    border-radius: 10px;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    width: 160px;
    height: 28px;
    font-family: Arial, "Nimbus Sans L", "FreeSans";
    font-size: 14px;
    font-weight: bold;
    color: #FFFFFF;
    text-align: center;
    line-height: 28px;
    text-shadow: 1px 1px 1px #6A6A6A;
    text-decoration:none;
    margin: 0px 5px 10px 5px;
    background: #28A9FF;
}

.ow-button a:hover {
    background: #48B6FF;
} 
```

The problem:

"#navbar li a" will hide:

```
font-family: Arial, "Nimbus Sans L", "FreeSans";
font-size: 14px;
color: #FFFFFF;
text-shadow: 1px 1px 1px #6A6A6A; 
```

Which "ow-button a" have..and will enable its own.

And I don't want that... How do I enable the full "ow-button a" CSS code?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:19:50.380

The quick and dirty solution is to add `!important` to your `ow-button a` which will override `#navbar li a`.

The better solution is to use better scoped CSS. Use selectors like `>` to specify exactly the element you want to. In your case, it should look like this:

```
#navbar > ul > li > a 
```

I made a [jsFiddle](http://jsfiddle.net/) for you: [http://jsfiddle.net/6NrWF/](http://jsfiddle.net/6NrWF/).

# python - Heroku、flask 和 python 套接字？

> ID：16124630
> 
> 赞同：3
> 
> 时间：2013-04-20T20:05:17.740
> 
> 标签：python, heroku, flask

我有一个在我的计算机上运行的 python 脚本。它打开一个套接字并打印它收到的任何内容。这绝对有效——我已经设法从其他计算机连接到它并发送数据。

问题是我的 heroku 应用程序无法连接到套接字。

```
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)    
s.connect((daemon_socket_vars['host'], daemon_socket_vars['port']))
s.send("Hi!")
s.close() 
```

超时后，heroku 应用程序在第二行失败。当我在我的笔记本电脑或朋友的笔记本电脑上运行相同的东西时（而充当服务器的 python 脚本在这两种情况下都在我的笔记本电脑上运行）它可以工作。有谁知道为什么heroku会遇到这个问题？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T05:58:49.717

在 Heroku 上运行时，您的服务器应该绑定到环境变量 PORT 中指定的端口（比如 7880，只是为了讨论这个问题）。不保证为 80、5000、8000、8080 或其他任何值。

然而，对于外部世界，这将显示为端口 80 或端口 443。也就是说，如果从 Heroku 外部连接，您的客户端将连接到端口 80。

最后一个警告：当从 Heroku 外部连接时，您的客户端将通过“Heroku Routing Mesh”，其中包括 80-->something 端口“翻译”。问题是，路由网格是一个 HTTP 路由网格：它只会接受传入的 HTTP 请求，并将它们路由（有时会更改它们，例如添加标头等）到您的测功机。

因此，您不能只在 Heroku 上编写一个普通套接字应用程序并直接连接到它，您必须使用 HTTP 作为传输。

# llvm - How to cast a Value* to a ConstantDataArray* in LLVM?

> ID：16124631
> 
> 赞同：0
> 
> 时间：2013-04-20T20:05:23.057
> 
> 标签：llvm

I extended the LLVM Kaleidoscope example to support Strings. I added a StringExprAST, which has the virtual Codegen method impl as follows:

```
Value *StringExprAST::Codegen() {
  StringRef r(Val);
  return ConstantDataArray::getString(getGlobalContext(), r, false);
} 
```

I am trying to concatenate Strings and have a ConcatExprAST with its Codegen method. Upon trying to access the data in the ConstantDataArray, I need to cast the Value* back to a ConstantDataArray* in order to use the getAsString() method.

How can I do this?

Thanks for any help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:58:54.797

将任何子类型`Value`转换为另一个的正确方法是 via `cast<>()`，例如：

```
Value* v = ...
ConstantDataArray* result = cast<ConstantDataArray>(v); 
```

但是，请记住，在您的示例中，您没有返回 type 的对象，但`ConstantDataArray`您返回的返回类型为可能是 a ，而不是 a )。`ConstantDataArray::getString()``ConstantDataArray``Constant``ConstantAggregateZero``ConstantDataArray`

在任何情况下，如果您不确定它`v`确实属于特定类型，请先使用`isa<>()`（或使用[idiom `dyn_cast<>()`）](http://llvm.org/docs/ProgrammersManual.html#the-isa-cast-and-dyn-cast-templates)检查它，然后再执行`cast<>()`.

# c++ - 在 C++ 中重载吸气剂？

> ID：16124633
> 
> 赞同：4
> 
> 时间：2013-04-20T20:05:30.757
> 
> 标签：c++, oop, c++11, coding-style

再会，

我不确定如何用一句话正确描述我正在询问的过程，所以请原谅标题。我正在寻找一种方法来确保基类和/或接口的用户会以非默认方式分配对象本身和其他对象会考虑的数据。所以我一直在做以下事情：

```
struct ExampleInterface {
    virtual void SomeMethod() = 0;
    virtual std::string WhatLooksLikeAGetterButIsNot() = 0;
}; 
```

这是一个真实世界的例子：

```
//So states can be "poped in and out".//
struct State
{
    //To retrive what the active state is called.//
    /*Code In Question--->*/virtual std::string RegardStateAs() = 0;/*<---Code In Question*/
    virtual void ExecuteState( VRGE::MDNode* metaData ) = 0;
}; 
```

这个想法是最终做一些事情，比如 A （如果有人从“更新”派生，这个选项允许试图阻止问题发生）：

```
struct Update : public State
{
    //Yadda yadda...//
    /*Code In Question--->*/std::string RegardStateAs() {
                                return std::string{ "Update" };
                            }/*<---Code In Question*/
}; 
```

B（此选项不允许 A 所做的事情）：

```
struct Update : public State
{
        //Yadda yadda...//
        //Not a good example, but the point gets across.//
        Update( std::string value ) {
            stateName = value;
        }
        /*Code In Question--->*/virtual std::string RegardStateAs() {
                                        return stateName;
                                 }/*<---Code In Question*/
            private: 
               std::string stateName;

}; 
```

我的问题是：这是好的还是坏的做法？

- - -编辑 - - -：

我无法访问可以编译它的编译器，但是有人向我指出，在这种情况下“覆盖”将是完美的，例如：

```
//So states can be "poped in and out".//
struct State
{
    //To retrive what the active state is called.//
    /*Code In Question--->*/virtual std::string RegardStateAs() = 0;/*<---Code In Question*/
    virtual void ExecuteState( VRGE::MDNode* metaData ) = 0;
};

struct Update : public State
{
    //Yadda yadda...//
    /*Code In Question--->*/std::string RegardStateAs() override {
                                return std::string{ "Update" };
                            }/*<---Code In Question*/
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T22:04:35.190

正如其他人指出的那样，您的问题实际上是解决“覆盖”（在多态意义上），而不是“重载”。

假设您希望每个 State 子类（静态）都有一个固定标签，那么您的策略有效，但存在一些限制。为清楚起见，我将您的“RegardAsState”称为“ToString”。如果需要在基类State的构造函数中调用ToString，就会有问题。这是因为在执行基类构造函数时，尚未建立派生类（如 Update）的 ToString 的 v-table 条目。在 State 的析构函数中调用 ToString 也存在类似的问题。

另一种方法是简单地将状态标签实现为基类 State 中的 const std::string，并通过公共 get 访问器由 const std::string & 返回它。在消除 v-table 间接性和允许通过 const ref 返回方面，它的效率更高一些；它消除了 State 中的上述 ctor/dtor 问题。

即使上面的建议也不是最优的，因为如果每个不同的 State 子类的标签都相同，则无需将此作为实例方法。如果您想获得异国情调，您可以将 ToString 实现为静态（无状态）访问器。这可以通过一个鲜为人知的技巧来完成，即传递一个常量字符串作为模板参数，如下所示：

```
template<const std::string & label>
struct State
{
    static const std::string & ToString()
    {
        return label;
    }
};

extern const std::string UpdateLabel = "Update";
State<UpdateLabel> Update;

// Or, with a bit of help from the macro preprocessor
#define DEFINE_STATE(stateClass) \
extern const std::string stateClass##Label = #stateClass; \
struct stateClass##State : State<stateClass##Label> \
// continue with definition of stateClass##State ... {}

DEFINE_STATE(Sample)
{
    // implementation of SampleState
}; 
```

# java - 什么原因导致 org.hibernate.PropertyAccessException：在 setter 内部发生异常

> ID：16124638
> 
> 赞同：15
> 
> 时间：2013-04-20T20:05:56.363
> 
> 标签：java, spring, hibernate, jakarta-ee, jpa

是什么导致了这个异常，我无法找到。

```
Request processing failed; nested exception is javax.persistence.PersistenceException: org.hibernate.PropertyAccessException: Exception occurred inside setter of my.Class 
```

根本原因：

```
javax.persistence.PersistenceException: org.hibernate.PropertyAccessException: Exception occurred inside setter of my.Class 
```

代码：

```
@ManyToMany(fetch = FetchType.EAGER)
public void setTags(Set<Tags> tags) {
    this.tags.clear();

    for (Tag tag : tags) {
        addTag(tag);
    }
}

public boolean addTag(final Tag tag) {
    if (tags.contains(tag)) {
        return false;
    }

    return tags.add(tag);
} 
```

我在构造函数中初始化标签：

```
tags = new HashSet<Tag>(); 
```

编辑

登录 setter 方法的异常：

```
ax.persistence.PersistenceException: org.hibernate.PropertyAccessException: Exception occurred inside setter of com.mycompany.domain.Book.Tags
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1387) ~[hibernate-entitymanager-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.ejb.AbstractEntityManagerImpl.find(AbstractEntityManagerImpl.java:838) ~[hibernate-entitymanager-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.ejb.AbstractEntityManagerImpl.find(AbstractEntityManagerImpl.java:781) ~[hibernate-entitymanager-4.2.0.Final.jar:4.2.0.Final]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:201304051638]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) ~[na:201304051638]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:201304051638]
    at java.lang.reflect.Method.invoke(Method.java:601) ~[na:1.7.0]
    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240) ~[spring-orm-3.1.4.RELEASE.jar:3.1.4.RELEASE]
    at $Proxy215.find(Unknown Source) ~[na:na]
    at com.mycompany.persistence.BookJpaRepository.get(BookJpaRepository.java:22) ~[classes/:na]
    at com.mycompany.service.BookService.getBook(BookService.java:44) ~[classes/:na]
    at com.mycompany.service.BookService$$FastClassByCGLIB$$d6b91ae6.invoke(<generated>) ~[BookService$$FastClassByCGLIB$$d6b91ae6.class:na]
    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204) ~[spring-core-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:698) ~[spring-aop-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150) ~[spring-aop-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110) ~[spring-tx-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) ~[spring-aop-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:631) ~[spring-aop-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at com.mycompany.service.BookService$$EnhancerByCGLIB$$e6a4e1a3.getBook(<generated>) ~[BookService$$EnhancerByCGLIB$$e6a4e1a3.class:na]
    at com.mycompany.rest.controller.BookController.getFeedbackForBook(BookController.java:106) ~[classes/:na]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:201304051638]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) ~[na:201304051638]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:201304051638]
    at java.lang.reflect.Method.invoke(Method.java:601) ~[na:1.7.0]
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:219) ~[spring-web-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:132) ~[spring-web-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:104) ~[spring-webmvc-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:745) ~[spring-webmvc-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:686) ~[spring-webmvc-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80) ~[spring-webmvc-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:925) ~[spring-webmvc-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856) ~[spring-webmvc-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:920) [spring-webmvc-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:816) [spring-webmvc-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:668) [javax.servlet-api.jar:3.0.1]
    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:801) [spring-webmvc-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770) [javax.servlet-api.jar:3.0.1]
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550) [web-core.jar:3.1.2.1-SNAPSHOT]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281) [web-core.jar:3.1.2.1-SNAPSHOT]
    at org.apache.catalina.core.StandardContextValve.__invoke(StandardContextValve.java:175) [web-core.jar:3.1.2.1-SNAPSHOT]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java) [web-core.jar:3.1.2.1-SNAPSHOT]
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655) [web-core.jar:3.1.2.1-SNAPSHOT]
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595) [web-core.jar:3.1.2.1-SNAPSHOT]
    at org.apache.catalina.core.StandardHostValve.__invoke(StandardHostValve.java:161) [web-core.jar:3.1.2.1-SNAPSHOT]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java) [web-core.jar:3.1.2.1-SNAPSHOT]
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331) [web-core.jar:3.1.2.1-SNAPSHOT]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231) [web-core.jar:3.1.2.1-SNAPSHOT]
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317) [kernel.jar:3.1.2.1-SNAPSHOT]
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195) [kernel.jar:3.1.2.1-SNAPSHOT]
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860) [grizzly-http.jar:1.9.50]
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757) [grizzly-http.jar:1.9.50]
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056) [grizzly-http.jar:1.9.50]
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229) [grizzly-http.jar:1.9.50]
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137) [grizzly-framework.jar:1.9.50]
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104) [grizzly-framework.jar:1.9.50]
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90) [grizzly-framework.jar:1.9.50]
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79) [grizzly-http.jar:1.9.50]
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54) [grizzly-framework.jar:1.9.50]
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59) [grizzly-framework.jar:1.9.50]
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71) [grizzly-framework.jar:1.9.50]
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) [grizzly-utils.jar:1.9.50]
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) [grizzly-utils.jar:1.9.50]
    at java.lang.Thread.run(Thread.java:722) [na:1.7.0]
Caused by: org.hibernate.PropertyAccessException: Exception occurred inside setter of com.mycompany.domain.Book.Tags
    at org.hibernate.property.BasicPropertyAccessor$BasicSetter.set(BasicPropertyAccessor.java:88) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.tuple.entity.AbstractEntityTuplizer.setPropertyValues(AbstractEntityTuplizer.java:710) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.tuple.entity.PojoEntityTuplizer.setPropertyValues(PojoEntityTuplizer.java:371) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.persister.entity.AbstractEntityPersister.setPropertyValues(AbstractEntityPersister.java:4499) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.engine.internal.TwoPhaseLoad.doInitializeEntity(TwoPhaseLoad.java:185) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.engine.internal.TwoPhaseLoad.initializeEntity(TwoPhaseLoad.java:137) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.loader.Loader.initializeEntitiesAndCollections(Loader.java:1103) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.loader.Loader.processResultSet(Loader.java:960) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.loader.Loader.doQuery(Loader.java:910) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:341) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:311) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.loader.Loader.loadEntity(Loader.java:2111) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:82) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:72) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3917) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.event.internal.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:460) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.event.internal.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:429) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.event.internal.DefaultLoadEventListener.load(DefaultLoadEventListener.java:206) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.event.internal.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:262) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.event.internal.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:150) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.internal.SessionImpl.fireLoad(SessionImpl.java:1091) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.internal.SessionImpl.access$2000(SessionImpl.java:174) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.internal.SessionImpl$IdentifierLoadAccessImpl.load(SessionImpl.java:2473) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.internal.SessionImpl.get(SessionImpl.java:987) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.ejb.AbstractEntityManagerImpl.find(AbstractEntityManagerImpl.java:807) ~[hibernate-entitymanager-4.2.0.Final.jar:4.2.0.Final]
    ... 61 common frames omitted
Caused by: java.lang.reflect.InvocationTargetException: null
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:201304051638]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) ~[na:201304051638]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:201304051638]
    at java.lang.reflect.Method.invoke(Method.java:601) ~[na:1.7.0]
    at org.hibernate.property.BasicPropertyAccessor$BasicSetter.set(BasicPropertyAccessor.java:65) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    ... 85 common frames omitted
Caused by: java.lang.NullPointerException: null
    at org.hibernate.engine.internal.StatefulPersistenceContext.getLoadedCollectionOwnerOrNull(StatefulPersistenceContext.java:859) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.event.spi.AbstractCollectionEvent.getLoadedOwnerOrNull(AbstractCollectionEvent.java:75) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.event.spi.InitializeCollectionEvent.<init>(InitializeCollectionEvent.java:36) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:1846) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.collection.internal.AbstractPersistentCollection$4.doWork(AbstractPersistentCollection.java:549) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:234) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:545) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:124) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at org.hibernate.collection.internal.PersistentSet.iterator(PersistentSet.java:180) ~[hibernate-core-4.2.0.Final.jar:4.2.0.Final]
    at com.mycompany.domain.Book.setTags(Book.java:185) ~[classes/:na]
    ... 90 common frames omitted 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-20T20:29:13.473

我的猜测是 Hibernate 用它自己的 Set (PersistentSet) 实现调用你的 setter，它实现了延迟加载，并且在调用 setter 时还没有初始化。由于你在这个集合上调用一个方法，它会在已经处于加载阶段的同时使集合自己加载，这会使 Hibernate 处于不一致的状态。

这就是为什么我更喜欢使用字段访问而不是属性访问（即将所有映射注释放在字段上而不是 getter 上）。当方法被“普通”代码调用时，您想复制传递的集合，但是当 Hibernate 本身调用 setter 时，您不想这样做：它完全破坏了延迟加载。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-20T20:08:28.023

从[javadoc](http://www.dil.univ-mrs.fr/~massat/docs/hibernate-3.1/api/org/hibernate/PropertyAccessException.html)：

> 通过反射或通过 CGLIB 访问持久类实例的属性时出现问题。有许多可能的根本原因，包括
> 
> ```
> - failure of a security check
> - an exception occurring inside the getter or setter method
> - a nullable database column was mapped to a primitive-type property
> - the Hibernate type was not castable to the property type (or vice-versa) 
> ```

我会说，`this.tags`(field) 或`tags`(parameter) is `null`，但为了弄清楚，您可以打印整个堆栈跟踪，这将指出根本原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T21:03:08.233

您`null`作为方法的参数传递，因此 for-each 构造会引发异常。使用保护条件，一切正常：

```
@ManyToMany(fetch = FetchType.EAGER)
public void setTags(Set<Tags> tags) {
    this.tags.clear();

    if (tags != null) {
        for (Tag tag : tags) {
            addTag(tag);
        }
    }
} 
```

但是我更喜欢：

```
@ManyToMany(fetch = FetchType.EAGER)
public void setTags(Set<Tags> tags) {
    this.tags = tags;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-20T20:17:26.417

解决这个问题的最简单方法是将 setTags 的内部封装在 try catch 中，并使用您选择的日志记录系统记录任何异常。

我的第一个猜测是标签实例变量为空。如果不是这种情况，我会感到非常惊讶，但是在集成测试中使用调试器进行验证应该是微不足道的

我的第二个猜测是传递给 setTags() 的参数未正确初始化，或者为空，或者当您的 for 循环尝试对其进行迭代时抛出某种异常。

# java - 动作执行的动作

> ID：16124642
> 
> 赞同：0
> 
> 时间：2013-04-20T20:06:09.243
> 
> 标签：java, events, awt

我的程序询问用户他完成了多少课程。因此，用户在 JTextField 中输入数字。我的程序必须使用在 JTextField 中输入的数字来创建一个包含所有已完成课程的数组。

```
package gpa;

import java.awt.BorderLayout;
import javax.swing.*;``
import java.awt.event.*;

public class Windows extends JFrame implements ActionListener
{
    private static String number = "";
    private content NbtextField = new content();

    public Windows()
    {
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setTitle("GPA Professionnal Calculator");
        this.setSize(450, 250);
        this.setLocationRelativeTo(null);
        this.add(NbtextField, BorderLayout.CENTER);        
        this.setVisible(true);
    }

    @Override
    public void actionPerformed(ActionEvent e)
    {
        number = NbtextField.getNbtextField().getText();

    }

    private void test()
    {
        System.out.println (number);
    }

} 
```

所以，我测试了我的程序是否正确地采用了用户输入的数字。但是我的问题是我的程序没有等待用户输入数字并继续运行！因此，我的其余代码在用户输入完成的课程数量之前运行。我该如何解决这个问题，以便我的程序在继续之前等待用户输入，就像 r.readLine() 一样

字符串测试 = r.readLine();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:11:04.450

运行号码后执行程序的其余部分：

```
@Override
public void actionPerformed(ActionEvent e)
{
    number = NbtextField.getNbtextField().getText();
    executeRestOfProgram(number);
} 
```

# matlab - 在另一个类 MATLAB 中创建一个类的对象数组

> ID：16124643
> 
> 赞同：1
> 
> 时间：2013-04-20T20:06:10.650
> 
> 标签：matlab, matlab-class

我正在尝试`Cell`在另一个类 System `in MATLAB. The class`Cell 中创建一个类的对象数组`是：

```
classdef Cell
 properties
    ID;
    EntityID;
    ZoneID;
    NeighborID; 
    State;
    nextChangeTime;
 end

 methods
 % Define the constructor
    function obj = Cell()
        obj.ID = zeros(1);
        obj.EntityID = zeros(1);
        obj.ZoneID = zeros(1);
        obj.NeighborID = zeros(1); 
        obj.State = zeros(1);
        obj.nextChangeTime = zeros(1);
    end
 end 
```

现在我有另一堂课`System`。我尝试制作这样的`Cell`对象数组：

```
classdef System
  properties
    Cells;
  end

  methods
    function obj = System(dimx,dimy)
      obj.Cells(dimx,dimy) = Cell();
    end
  end 
```

但我认为我使用了错误的格式。不确定这是否可能。任何有关如何实现此目的的建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:19:54.890

为了能够创建用户定义类（例如`Cell`类）的对象数组，为用户定义类提供默认构造函数很方便。默认构造函数是不带参数的构造函数（即 when `nargin==0`）。创建数组时，数组对象的隐式初始化是由这个构造函数完成的。如果缺少此构造函数，尝试通过“扩展”标量对象来构建数组将产生错误。

创建对象数组（不定义默认构造函数）的另一种方法是使用`horzcat`,`vertcat`和`cat`.

Aaaaand... 访问对象的属性时，不要忘记提及您正在访问的对象：

```
obj.Cells = Cell.empty(0,0);  % Force the type of empty Cells to Cell class
obj.Cells(dimx,dimy) = Cell(); 
```

# javascript - App to take picture on time interval

> ID：16124644
> 
> 赞同：0
> 
> 时间：2013-04-20T20:06:27.620
> 
> 标签：javascript, cordova, appmobi

I need to create an app that with Appmobi or Phonegap that will be able to take an automatic picture with a time interval.

Is it possible to perform this?

I know hot to launch the camera with 30 seconds interval, but I need to launch the camera and take a picture. The device will be on a quadcopter, so no human interaction will be avalilable.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:13:06.583

我认为你必须使用[***camera.getPicture***](http://docs.phonegap.com/en/1.2.0/phonegap_camera_camera.md.html#camera.getPicture)

```
function onSuccess(imageData) {
    var image = document.getElementById('myImage');
    image.src = "data:image/jpeg;base64," + imageData;
}

function onFail(message) {
    alert('Failed because: ' + message);
}

function getPicture(){
   navigator.camera.getPicture(onSuccess, onFail, { quality: 50 }); 
}

setInterval(getPicture, 30000); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-22T10:51:52.180

是的，这是一个自动的..在 setInterval 方法的帮助下，每 3 秒拍摄一次照片..

# angularjs - 不应该有一个 AngularJS ngWith 指令吗？

> ID：16124645
> 
> 赞同：22
> 
> 时间：2013-04-20T20:06:30.103
> 
> 标签：angularjs, angularjs-scope

也许我疯了，或者太习惯于[KnockoutJS](http://www.knockoutjs.com)，但我一直在文档中寻找 ngWith 指令来定义元素、控制器或包含的 (ngInclude) 部分的范围。

例如：

我想编写一个增强 MyItem 的控制器，例如：

```
MyModule.controller('MyItemCtrl', function($scope) {
    $scope.doSomethingToItem = function() {
        $scope.name = "bar";
    };
}); 
```

或 MyItem 的视图/模板，例如：

```
<div ng-controller="MyItemCtrl">
    {{name}}
    <button ng-click="doSomethingWithItem()">Do Something</button>
</div> 
```

但是在这两种情况下，我都在想象我的 $scope 原型继承自我的模型，`MyItem`.

**但是范围不继承自模型！**

这让我很困惑。

相反，我的模型是作用域上的一个**属性。**

在中继器的情况下：

```
<div ng-repeat="item in list">
    <div ng-controller="MyItemCtrl">
        {{item.name}}
        <button ng-click="doSomethingWithItem()">Do Something</button>
    </div>
</div> 
```

这意味着我必须在任何地方使用`item.this`or`item.that`而不是`this`and `that`。我必须记住哪些函数是模型的原生函数，哪些函数是由控制器直接应用于范围的。

如果我想要部分显示名称*（愚蠢的例子，我知道，但你明白了）*：

```
<h3>{{name}}</h3> 
```

我必须写它

```
<h3>{{item.name}}</h3> 
```

然后确保模型*始终*是项目。通常通过将其包装在指令中来简单地定义具有`item`属性的范围。

我经常觉得我想做的只是：

```
<div ng-include="'my/partial.html'" ng-with="item"></div> 
```

或者

```
<div ng-repeat="list" ng-controller="MyItemCtrl">            
    {{name}}
    <button ng-click="doSomethingWithItem()">Do Something</button>
</div> 
```

是否有一些我没有找到的神奇指令？还是我完全错了，只是在找麻烦？

谢谢。

**编辑：**

非常感谢 Brandon Tilley 解释了使用示波器作为模型的危险。但我仍然经常发现需要一些快速的声明性范围操作，并希望使用 ng-with 指令。

例如，您有一个项目列表，单击该列表时，将显示所选项目的扩展视图。你可以这样写：

```
<ul>
    <li ng-repeat="item in items" ng-click="selection = item">{{item.minView}}</li>
</ul>
<div ng-controller="ItemController">
    {{selection.maxView}}
</div> 
```

现在你必须使用`selection.property`而不是我想要的来获取所选项目的属性：`item.property`。我也必须使用`selection`in `ItemController`！使其完全与这种观点相结合。

我知道，在这个简单的示例中，我可以有一个包装控制器来使其工作，但它说明了这一点。

我写了一个非常基本的`with`指令：

```
myApp.directive('with', ['$parse', '$log', function(parse, log) {

    return {
        scope: true,
        link: function(scope, el, attr) {
            var expression = attr.with;
            var parts = expression.split(' as ');

            if(parts.length != 2) {
                log.error("`with` directive expects expression in the form `String as String`");
                return;
            }

            scope.$watch(parts[0], function(value) {
                scope[parts[1]] = value;
            }, true);
        }
    }

}]); 
```

这只是创建一个新的范围，将一个表达式解析为另一个值，允许：

```
<ul>
    <li ng-repeat="item in items" ng-click="selection = item">{{item.minView}}</li>
</ul>
<div with="selection as item" ng-controller="ItemController">
    {{item.maxView}}
</div> 
```

这对我来说似乎无限有用。

我在这里错过了什么吗？只是以某种方式为自己制造麻烦？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-07-18T07:33:17.717

我发现我可以在 ng-repeat 的源周围放置一个数组，它在功能上变成了一个 ng-with。:)

```
<div ng-repeat="name in [vm.dto.Person.Name]" >
  <input type="text" ng-model="name.First" />
  <input type="text" ng-model="name.Last" />
</div> 
```

似乎有些纯粹的人可能不喜欢这样......而且似乎也没有一个好的选择。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-20T20:37:13.273

这是一个很好的问题。我可以看到来自另一个前端框架的这可能会令人困惑，但是在 Angular 中，范围具有对模型的引用，并且您描述的语法是正常的。我个人喜欢将范围描述为更像[一个视图模型](http://en.wikipedia.org/wiki/Model_View_ViewModel#Pattern_description)。

AngularJS 的作者 Miško Hevery 在这个视频中很好地解释了这个概念[，从大约 30 分钟开始，持续大约 3 分钟](http://www.youtube.com/watch?v=ZhfUv0spHCY&feature=youtu.be&t=30m)：

> 人们常常认为范围就是模型，事实并非如此。范围有对模型的*引用*。[...] 因此，在视图中，您可以说出`model dot`要访问的任何属性。

虽然可以编写一个`ngWith`指令来执行您正在寻找的那种指令，但由于 Angular 使用原型继承作用域，您可能会遇到 Miško[在 31:10](http://youtu.be/ZhfUv0spHCY?t=31m10s)的上述视频中描述的相同问题（其中您认为您正在更新父范围的值，但实际上没有）。有关 AngularJS 中原型继承的更多详细信息，请查看AngularJS wiki 上的优秀文章[The Nuances of Scope Prototypal Inheritance 。](https://github.com/angular/angular.js/wiki/The-Nuances-of-Scope-Prototypal-Inheritance)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-06T08:53:49.407

另一种方法是通过以下方式设置新变量`ng-init`：

```
<div ng-init="name = vm.dto.Person.Name" >
  <input type="text" ng-model="name.First" />
  <input type="text" ng-model="name.Last" />
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-08T01:52:11.067

我认为来自淘汰赛的一个副作用是鼓励您以更少的责任创建更多的组件，当然在一个组件中，“this”是该组件的视图模型。如果你真的很烦人，那么这可能表明你需要一个新组件。

能够只引用组件视图模型中的某些内容而无需考虑您所在的范围，这确实很好。而且您不能告诉我您错过`$parents[2]`了`$root`；-)

PS。是的，我知道你可以`let`在淘汰赛中使用，这意味着更少的`$`东西。

我在做 Angular 的东西时肯定会错过淘汰赛（我仍然使用两者），但做某些事情确实很好，比如`title="Customer #{{ row.customerId }} - {{ row.fullName }}"`而不是把所有东西都放在`data-bind`.

# php - Setting mail from using ini_set not working

> ID：16124654
> 
> 赞同：1
> 
> 时间：2013-04-20T20:07:32.013
> 
> 标签：php, email, ini-set

I have a contact form with email script which worked fine when hosted on a windows server. I recently changed to Linux and now it works, but is ignoring the ini_set command.

I have this:

```
ini_set("sendmail_from",'admin@mywebsite.com'); 
```

in my code and I receive an email, but it is from:

user_1065770274@linweb20.linvh1.myhosting company.co.uk

not the address specified. Do I need to do something else if it is Linux?

Thank you

Claire

# c# - Creating relationships in entity with out foreign keys

> ID：16124661
> 
> 赞同：1
> 
> 时间：2013-04-20T20:08:03.937
> 
> 标签：c#, sql, asp.net-mvc-3, entity-framework

I am using the code first approach, to create the database based on modals and the db context class. The problem is that when I create the relationships between one model and the next and run the code the data base generates foreign keys like it should.

How ever I want the relationships, **with out** the foreign keys. is this possible to do with entity framework and the code first approach?

for example:

```
namespace LocApp.Models
{
    public class Location
    {
        public int id { get; set; }
        [Required]
        public string name { get; set; }
        [Required]
        public string address { get; set; }
        [Required]
        public string city { get; set; }
        [Required]
        public string country { get; set; }
        [Required]
        public string province { get; set; }
        [Required]
        public string phone { get; set; }
        public string fax { get; set; }
        public bool active { get; set; }

        public virtual ICollection<LocationAssignment> LocationAssignment { get; set; }
    }
} 
```

Has a relationship with:

```
namespace LocApp.Models
{
    public class LocationAssignment
    {
        public int id { get; set; }
        public int locationID { get; set; }
        public int serviceID { get; set; }
        public int productID { get; set; }
        public int personID { get; set; }

        public virtual Location Location { get; set; }
        public virtual Service Service { get; set; }
        public virtual Product product { get; set; }
        public virtual Person person { get; set; }
    }
} 
```

As you can see this table will have a foreign key generated with the location table. How do I keep this relationship **WITH OUT** the generation of foreign keys?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:29:15.443

用户在插入以及更新和删除相关表和引用表时触发！！！但这并不可爱，您必须控制应用程序中的所有内容

# c++ - 如何按全名从双向链表中删除重复项

> ID：16124663
> 
> 赞同：0
> 
> 时间：2013-04-20T20:08:09.517
> 
> 标签：c++, duplicates, doubly-linked-list

我有一个双向链表，其中存储播放器对象。玩家对象包含名字、姓氏、等级和经验。我试图创建一个删除重复播放器对象的函数。例如，如果我输入 Luis suarez 然后再次输入，我希望该功能要求用户输入重复的名称并删除其中一名 luis suarez 球员（最好是列表中的最后一名）。我已经尝试了很多东西，但它们都不起作用，也没有删除任何东西。谁能帮我这个？

这是我在 RemoveDuplicate 的尝试：

```
// -------------------------------------------------------------------------------------------------------
//  Name:           RemoveDuplicates.
//  Description:    Searchs through the list and finds duplicates and removes one.
// -------------------------------------------------------------------------------------------------------

void RemoveDuplicates(DoublyLinkedListIterator<Datatype> m_itr, string searchByFirstName)
{
    Stats player;
    string playerDuplicate = player.getFirstName();
    for (m_itr.Start(); m_itr.Valid(); m_itr.Forth())
        {
            if (m_itr.Item().getFirstName() == searchByFirstName)
            {
            playerDuplicate = m_itr.Item().getFirstName();
            }
        }
    delete(playerDuplicate);
} 
```

我的 stats 类有 4 个带有 getter 的成员变量。

```
private:
    string firstName;
    string secondName;
    int level;
    int experience; 
```

在我的链表中，我有 3 个类。

```
DoublyLinkedListIterator;
DoublyLinkedList;
DoublyLinkedListNode; 
```

任何帮助是极大的赞赏。

编辑：后续行动：[从 DoublyLinkedList 中删除重复项](https://stackoverflow.com/questions/16126160/removing-duplicates-from-a-doublylinkedlist-c/16126231#16126231)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:20:30.647

看起来您必须删除链表中的实际节点（使用迭代器）。现在您只是在本地字符串变量 playerDuplicate 上使用 delete。

[后续](https://stackoverflow.com/questions/16126160/removing-duplicates-from-a-doublylinkedlist-c/16126231#16126231)全面解决。

# bash - Bash 脚本 - Cat EOF 中断

> ID：16124666
> 
> 赞同：0
> 
> 时间：2013-04-20T20:08:16.517
> 
> 标签：bash, eof, cat

我正在尝试使用 cat EOF 编写一个 bash 脚本来自动安装一个 cron 脚本，这部分正在破坏脚本，我不确定我哪里出错了。出于某种原因，脚本在将它们回显到 /etc/no-ip.sh 之前运行这些命令

```
echo "#!/bin/sh" >> /etc/no-ip.sh
echo "HOSTNAME=hostname" >> /etc/no-ip.sh
echo "LOGFILE=no-ip-log" >> /etc/no-ip.sh
echo " " >> /etc/no-ip.sh
echo "Current_IP=$(host $HOSTNAME | cut -f4 -d' ')" >> /etc/no-ip.sh
echo " " >> /etc/no-ip.sh
echo "if [ ! -s $LOGFILE ] ; then" >> /etc/no-ip.sh
echo "echo "sshd : $Current_IP : allow" >> /etc/hosts.allow" >> /etc/no-ip.sh
echo "echo $Current_IP > $LOGFILE" >> /etc/no-ip.sh
echo "else" >> /etc/no-ip.sh
echo " " >> /etc/no-ip.sh
echo "Old_IP=`head -n 1 /etc/no-ip-log`" >> /etc/no-ip.sh
echo " " >> /etc/no-ip.sh
echo "if [ "$Current_IP" = "$Old_IP" ] ; then" >> /etc/no-ip.sh
echo "echo IP address has not changed" >> /etc/no-ip.sh
echo "else" >> /etc/no-ip.sh
echo "sed -i 's/'$Old_IP'/'$Current_IP'/' /etc/hosts.allow" >> /etc/no-ip.sh
echo "echo $Current_IP > $LOGFILE" >> /etc/no-ip.sh
echo "echo iptables have been updated" >> /etc/no-ip.sh
echo "fi" >> /etc/no-ip.sh
echo "fi" >> /etc/no-ip.sh
echo "EOF" >> /etc/no-ip.sh 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:15:28.620

双引号内的某些内容仍会被评估，例如：

```
echo "Current_IP=$(host $HOSTNAME | cut -f4 -d' ')" >> /etc/no-ip.sh 
```

在这里，`$(...)`结构被评估。所以你想在整个事情周围使用单引号：

```
echo 'Current_IP=$(host $HOSTNAME | cut -f4 -d" ")' >> /etc/no-ip.sh 
```

其他行也类似。

* * *

也就是说，[heredoc](http://tldp.org/LDP/abs/html/here-docs.html)可能是写这个的更好方法。您需要引用定界符字符串以使正文按字面意思解释：

```
cat <<'EOF' > /etc/no-ip.sh
...
EOF 
```

# java - Object Management in String Pool ofJava

> ID：16124667
> 
> 赞同：1
> 
> 时间：2013-04-20T20:08:19.377
> 
> 标签：java, string, garbage-collection

Hi i am working in java and want to know how String objects are created in the String pool and how they are managed.

So in the following example i am creating two Strings s and s1,so can anyone explain me how many Objects are created in LIne1?Also how many Objects are eligible for garbage collection in Line3?

```
 String s = "x" + "y";//Line 1
  String s1 = s;//Line 2
  s = null;//Line 3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T20:09:43.290

只创建一个对象`"xy"`。编译器这样做是为了优化。

没有对象有资格进行垃圾回收。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-10T15:04:42.947

它将`xy`在字符串常量池区域中创建一个对象。正如`"x"+"y"`在编译期间评估的那样。此外，垃圾收集器无法访问字符串常量池区域。

参考：[https ://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5](https://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5)

# c - 在 PE 文件中搜索操作码字节

> ID：16124674
> 
> 赞同：-2
> 
> 时间：2013-04-20T20:09:07.803
> 
> 标签：c, portable-executable, opcode

我的任务是在 PE 文件中搜索操作码字节并检查 PE 文件中是否存在指定的操作码字节序列（常量和预定义）。我在网上遇到过很多例子，但解决方案大多是 C# 或 Python；但是，我的要求是基于 C 语言的。

请告诉我如何通过用 C 编写一个简单的程序来检查和比较 PE 文件中的操作码字节值。任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:12:45.500

您可以查看[ROPGadget](https://github.com/JonathanSalwan/ROPgadget/)或[rp](https://github.com/0vercl0k/rp)，这两个软件都包含执行您想要的（以及更多）的代码。

# c# - 在 .NET 中交换公钥

> ID：16124679
> 
> 赞同：1
> 
> 时间：2013-04-20T20:09:43.663
> 
> 标签：c#, encryption, key, private, public

我正在尝试交换客户端和服务器的公钥。

一旦我从客户端发出请求并将密钥发送到服务器，服务器就会引发以下异常：

![在此处输入图像描述](https://i.stack.imgur.com/6I2K8.png)

异常是 HttpRequestValidationException。它表示从客户端检测到一个潜在危险的 Request.Form 值（公钥的内容）。

这个例外是什么意思？为什么不允许我使用普通的 POST 请求交换公钥？

我尝试将公钥嵌入到 JObject 中，但引发了相同的异常。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:25:35.777

我找到了答案。

我不得不将此行引入服务器上的 web.config 文件中：

```
<httpRuntime requestValidationMode="2.0" /> 
```

# java - 我们如何减少链表中的搜索时间？

> ID：16124680
> 
> 赞同：0
> 
> 时间：2013-04-20T20:09:47.123
> 
> 标签：java, performance, linked-list, time-complexity

我在职业杯上阅读了这个问题，但除了“SkipList”之外没有找到任何好的答案。我在 wikipedia 上找到的 SkipList 的描述很有趣，但是，我不理解诸如“几何/二项式分布”之类的术语......我阅读了它是什么并深入研究了概率论。我只是想实现一种方法来更快地进行一些搜索。所以这就是我所做的： 1\. 创建索引。- 我写了一个函数来创建 1000 个节点。然后，我创建了一个类型为链表的数组，并遍历了 1000 个节点，并选择了每个第 23 个元素（我想到的随机数）并添加到我称之为“索引”的数组中。

```
 SLL index = new SLL[50] 
```

现在创建索引的函数：

```
 private static void createIndex(SLL[] index, SLL head){
    int count=0;
    SLL temp = head;
    while(temp!=null)
    {
        count++;
        temp = temp.next;
        if((count==23){
            index[i] = temp;
            i++;
            count=0;
        }
    }       
} 
```

现在终于是“查找”功能了。在该函数中，我首先以输入元素 769 为例。我遍历'index'数组并找到index[i]>769。因此，现在我将 head = index[i-1] 和 tail = index[i] 传递给“find”函数。然后它将在 23 个元素的短范围内搜索 769。因此，我计算出总共需要 43 次跳转（包括数组跳转和 node=node.next 跳转）才能找到我想要的元素，否则会有跳了 769 次。

请注意：我认为创建索引数组的代码不是搜索的一部分，因此我不会将其时间复杂度（这很糟糕）与“查找”函数的时间复杂度相加。我假设索引的创建应该在创建列表后作为单独的函数完成，或者及时进行。就像网页在谷歌搜索中出现需要时间一样。另外，这个问题是在微软的一次采访中被问到的，我想知道我提供的解决方案是否有用，或者我看起来像个傻瓜，提供了这样的解决方案。解决方案是用 Java 编写的。等待您的反馈意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-01T02:04:28.567

很难弄清楚您要在这里解决什么问题，或者您的解决方案应该如何工作。（提示：完整的工作代码对两者都有帮助！）

但是，我们可以说一些一般的事情：

*   您无法`i`更好地搜索列表数据结构（例如在列表中查找），`O(N)`除非已对其进行了某种排序。例如，对元素进行排序。

*   如果列表的元素已排序并且您的列表是可索引的（即获取位置`i`为的元素`O(1)`），那么您可以使用二进制搜索并在`O(logN)`.

*   您无法`i`更好地获取链表位置处的元素`O(N)`。

如果您添加辅助数据（索引等），您可能会为某些操作获得更好的性能......但会牺牲更多的存储空间，并使某些其他操作更加昂贵。但是，您不再拥有列表/链表。整个数据结构是“别的东西”。

# android - 为 Android（移动设备）编写 OpenCV 和为桌面应用程序编写 openCV（使用 C++ 的 OpenCV 2.4.3）之间的区别

> ID：16124681
> 
> 赞同：1
> 
> 时间：2013-04-20T20:09:47.970
> 
> 标签：android, opencv, image-processing, java-native-interface

我正在做人脸检测和识别项目。我即将完成检测和识别的应用程序。我想让这个应用程序像在移动设备上工作的应用程序一样便携。我是在 Android 上使用 OpenCV 编写代码的新手。***Android 手机的 OpenCV 代码和使用 C++ 在 Visual Studio（如 VS 2010 和 Open CV 2.4.3）上为桌面应用程序编写的 OpenCV 有什么区别？（Android 上的 OpenCV 和桌面的 OpenCV 之间的代码有什么区别。他们都使用相同的语言？）*** 我熟悉 Android（基础）并且确实 Android 应用程序是用 Java 编写的。我在网上某处读到 OpenCV 本机代码可以通过*Java 本机接口包含到 Android 中。* **我在这里有点困惑，我可以使用我使用 C++ Open CV 为我的 Android 应用程序编写的代码而无需修改。如果不是，我必须对我的面部检测和识别进行什么样的修改，使用 C++ for Desktop 进行制作它适用于Android手机吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T07:13:21.643

首先，有一个Android 的[OpenCV4Android](http://opencv.org/platforms/android/opencv4android-usage-models.html)版本，以及如何使用它的教程。

然后，正如您所指出的，您可以在 Android 上使用 Java 或 C++ 编写代码。OpenCV4Android 可以在 Java [ [1](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/O4A_SDK.html) ] 或 C++ [ [2](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/dev_with_OCV_on_Android.html#native-c) ] 中使用。在您的情况下，使用适用于 Android的[Native Development Kit](http://developer.android.com/tools/sdk/ndk/index.html)重用您的 C++ 代码可能会更方便。如果您设法使用 NDK，**您将能够通过从 Android 应用程序调用它来重用您的 C++ 代码。**

以下是我建议您遵循的几个步骤：

*   阅读本[机开发工具包](http://developer.android.com/tools/sdk/ndk/index.html)
*   阅读[Java 原生接口](http://en.wikipedia.org/wiki/JNI)
*   尝试使用 C++ 创建示例 Android 应用程序（您可能会发现[此快速入门教程](https://coderwall.com/p/nakhrq?i=1&p=1&q=&t%5B%5D=%21%21mine&t%5B%5D=%21%21bookmarks)很有用）
*   尝试将 OpenCV 集成到您的示例中 [ [2](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/dev_with_OCV_on_Android.html#native-c) ]
*   在示例中包含现有的 C++ 代码

我希望它会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-06T05:29:08.160

我使用 Java 和 C++ 在 Android 上使用 OpenCV。根据我的经验，我可以建议将**Native C++ 代码**用于图像处理应用程序。与 Java 代码相比，C++ 代码**效率更高**，并且可以提供**更多相同的结果。**

虽然 OpenCV 也有 Java 版本，但在后端，它是使用 Native 代码来运行 Java。

与 Java 代码相比，Native 代码的执行速度要快得多**。**

# jsf - JSF 2.2 faces-config：未知模式版本：2.2

> ID：16124684
> 
> 赞同：25
> 
> 时间：2013-04-20T20:10:06.373
> 
> 标签：jsf, jsf-2.2

我正在尝试使用 Faces 2.2。我得到一个错误。

```
SEVERE: Critical error during deployment: 
com.sun.faces.config.ConfigurationException: java.util.concurrent.ExecutionException: com.sun.faces.config.ConfigurationException: Unable to parse document 'jndi:/server/contracts/WEB-INF/faces-config.xml': Unknown Schema version: 2.2
    at com.sun.faces.config.ConfigManager.getConfigDocuments(ConfigManager.java:749)
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:348)
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:214)
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:4750)
    at com.sun.enterprise.web.WebModule.contextListenerStart(WebModule.java:550)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:5366)
    at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2019)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.util.concurrent.ExecutionException: com.sun.faces.config.ConfigurationException: Unable to parse document 'jndi:/server/contracts/WEB-INF/faces-config.xml': Unknown Schema version: 2.2
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
    at java.util.concurrent.FutureTask.get(FutureTask.java:111)
    at com.sun.faces.config.ConfigManager.getConfigDocuments(ConfigManager.java:747)
    ... 44 more
Caused by: com.sun.faces.config.ConfigurationException: Unable to parse document 'jndi:/server/contracts/WEB-INF/faces-config.xml': Unknown Schema version: 2.2
    at com.sun.faces.config.ConfigManager$ParseTask.call(ConfigManager.java:998)
    at com.sun.faces.config.ConfigManager$ParseTask.call(ConfigManager.java:942)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at com.sun.faces.config.ConfigManager.getConfigDocuments(ConfigManager.java:735)
    ... 44 more
Caused by: com.sun.faces.config.ConfigurationException: Unknown Schema version: 2.2
    at com.sun.faces.config.ConfigManager$ParseTask.getDocument(ConfigManager.java:1101)
    at com.sun.faces.config.ConfigManager$ParseTask.call(ConfigManager.java:989)
    ... 48 more 
```

面孔-config.xml

```
<?xml version='1.0' encoding='UTF-8'?>
<faces-config version="2.2"
              xmlns="http://java.sun.com/xml/ns/javaee"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_2.xsd">
    <application>

        <resource-library-contracts>
            <contract-mapping>
                <url-pattern>/user/*</url-pattern>
                <contracts>blue</contracts>
            </contract-mapping>
            <contract-mapping>
                <url-pattern>*</url-pattern>
                <contracts>red</contracts>
            </contract-mapping>
        </resource-library-contracts>
    </application>
</faces-config> 
```

这个[例子的代码。](https://blogs.oracle.com/arungupta/entry/resource_library_contracts_in_jsf2)

我在“glassfish3/glassfish/modules/javax.faces.jar”文件上复制了最新的 JSF 版本。

我不明白这个问题。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-04-21T13:25:46.423

JSF 2.2 的模式命名空间已更改。`faces-config.xml`必须看起来像这样：

```
<faces-config xmlns="http://xmlns.jcp.org/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee
        http://xmlns.jcp.org/xml/ns/javaee/web-facesconfig_2_2.xsd"
    version="2.2">

</faces-config> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-07T11:03:03.850

我对eclipse有同样的问题。我仍然收到警告（“没有语法约束..）但应用程序有效。这是我的 faces-config 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
 <faces-config
     xmlns="http://xmlns.jcp.org/xml/ns/javaee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee/web-facesconfig_2_2.xsd"
    version="2.2">

    <application>
            <action-listener>org.primefaces.application.DialogActionListener</action-    listener>
            <navigation-handler>org.primefaces.application.DialogNavigationHandler</navigation-handler>
            <view-handler>org.primefaces.application.DialogViewHandler</view-handler>

        <locale-config>
             <default-locale>de</default-locale>
             <supported-locale>en</supported-locale>
        </locale-config>

        <resource-bundle>
            <base-name>Messages</base-name>
            <var>msg</var>
        </resource-bundle>
    </application>

</faces-config> 
```

Messages 是属性的基本文件名。这些文件称为 Messages.properties（默认）和 Messages_de.properties。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T13:34:55.227

这个问题的原因是[http://java.sun.com/xml/ns/javaee/web-facesconfig_2_2.xsd](http://java.sun.com/xml/ns/javaee/web-facesconfig_2_2.xsd)地址无效。因此，我可以建议您使用以下`faces-config.xml`文件

```
<?xml version='1.0' encoding='UTF-8'?>

    <faces-config version="2.2"
        xmlns="http://java.sun.com/xml/ns/javaee" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://www.oracle.com/webfolder/technetwork/jsc/xml/ns/javaee/web-facesconfig_2_2.xsd">
       <application>

            <resource-library-contracts>
                <contract-mapping>
                    <url-pattern>/user/*</url-pattern>
                    <contracts>blue</contracts>
                </contract-mapping>
                <contract-mapping>
                    <url-pattern>*</url-pattern>
                    <contracts>red</contracts>
                </contract-mapping>
            </resource-library-contracts>
        </application>

    </faces-config> 
```

# android - Android：是否可以在 TextViews 9patch 背景之外设置 drawableLeft？

> ID：16124687
> 
> 赞同：3
> 
> 时间：2013-04-20T20:10:30.390
> 
> 标签：android

是否可以在 TextViews 9patch 背景之外设置 drawableLeft？

我正在使用这段代码：

```
 <TextView
        android:id="@+id/textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/background_9patch"
        android:drawableLeft="@drawable/leftImg"
        android:text="Hello World" /> 
```

我希望 android:drawableLeft="@drawable/leftImg" 将位于 android:background="@drawable/background_9patch" 的左侧。

1.  我可以使用单个 TextView 来完成，还是应该在 LinearLayout 中使用 TextView + ImageView ？
2.  我可以在drawableLeft中设置drawable的大小吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:16:46.553

由于您的背景是自定义的 9-patch，您只需修改背景图像，使其在可拉伸内容的左侧具有固定大小的透明部分，从而为 left 提供足够的填充`Drawable`。这就是框架为小部件创建背景的方式，例如`CheckBox`将文本移动到相应按钮旁边。

# sql - 更少的索引数量意味着更快的插入、更新和删除？

> ID：16124690
> 
> 赞同：2
> 
> 时间：2013-04-20T20:10:48.893
> 
> 标签：sql

我听说“更少的索引意味着更快的插入、更新和删除”。这个对吗？如果是，那为什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-20T20:13:27.267

是的，它是正确的。

索引使选择查询运行得更快。但是，每当您编写表时，索引也必须更新，这需要时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T20:19:05.167

是的

了解索引的工作原理很重要。

索引（您创建的）是次要的，通常使用 B+ 树或类似的东西。这些树中的值指向您在数据库中的记录，因此`SELECT`使用索引列的子句更快，因为它们可以在树中快速找到（比仅检查每一行要快）但是数据库中的`update`,`insert`和`delete`也需要索引要更新，这会减慢进程。

# svg - 挤出具有多个孔的多个多边形并对组合形状进行纹理化

> ID：16124691
> 
> 赞同：5
> 
> 时间：2013-04-20T20:10:56.783
> 
> 标签：svg, three.js, textures, polygon

这个问题与这个[问题有关](https://stackoverflow.com/questions/16118274/converting-svg-paths-with-holes-to-extruded-shapes-in-three-js)。[答案](https://stackoverflow.com/a/16121654/1691517)显示了挤出有孔的多边形的非常好的方法（请参阅出色[的实时示例](http://jsfiddle.net/pHn2B/34/)）。答案的主要学习是three.js（r58）中的路径不能有多个moveTo命令并且它必须在路径的开头，这意味着路径必须被moveTos打破，以便moveTo开始总是一条新的道路。

在 three.js 中拉伸意味着使用可能的斜角将 2D 路径转换为 ​​3D 形状。它适用于挤压文本以制作 3D 字母和单词，但也可用于挤压自定义路径。

现在出现了两个问题：

*   如何处理具有多个孔多边形和多个非孔多边形的多边形？
*   如何将纹理添加到整个生成的形状？

[我在http://jsbin.com/oqomuj/1/edit](http://jsbin.com/oqomuj/1/edit)中做了一个 SVG 的例子：

![在此处输入图像描述](https://i.stack.imgur.com/Hwg4X.png)

使用此路径生成图像：

```
<路径 d="
 M57.11,271.77 L57.11,218.33 L41.99,218.63 L105.49,165.77 L138.41,193.18 L138.41,172.2 L152.53,172.2 L152.53,204.93 L168.99,218.63 L153.21,218.63 L153.21,271.77Z
 M74.14,264.13 L105.49,264.13 L105.49,232.8 L74.14,232.8Z
 M115.35,250.7 L135.96,250.7 L135.96,232.61 L115.35,232.61Z
 M56.11,145.77 L56.11,92.33 L40.99,92.63 L104.49,39.77 L137.41,67.18 L137.41,46.2 L151.53,46.2 L151.53,78.93 L152.53,79.76 L1559.55,77.2 5,74.52 L168.65,69.81 L176.46,66.93 L188.04,64.16 L200.63,62.7 L213.65,62.7 L226.05,64.09 L234.83,66.06 L245.65,69.73 L252.87,73.27 L29 12,77.34 L262.63,80.33 L265.6,83.47 L268.01,86.76 L269.83,90.17 L271.08,93.68 L271.76,76,99.08 95,120.92 L255.02,123.63 L245.86,128.34 L238.06,131.22 L226.48,133.99 L213.88,135.44 L200.63,135.44 L188.04,133.99 L176.46,131.22 L168.65,128.34 L159.5,123.63 L155.55,120.92 L152.21,118.12 L152.21,145.77Z
 M73.14,138.13 L104.49,138.13 L104.49,106.8 L73.14,106.8Z
 M114.35,124.7 L134.96,124.7 L134.96,106.61 L114.35,106.61Z
 M207.26,117.33 L210.57,117.26 L216.87,116.53 L222.66,115.15 L227.8,113.18 L233.11,110 L236.34,106.99 L238.51,103.64 L239.42,100.48 L239.42,97.67 L238.51,94.51 L236.34,91.16 L233.11,88.15 L227.8 ,84.97 L222.66,83 L216.87,81.62 L210.57,80.89 L203.94,80.89 L197.65,81.62 L191.86,83 L186.71,84.97 L181.41,88.15 L178.18,91.16 L176.01 ,94.51 L175.1,97.67 L175.1,100.48 L176.01,103.64 L178.18,106.99 L181.41,110 L186.71,113.18 L191.86,115.15 L197.65,116.53 L203.94,117.2
"></路径>

```

并且此路径转换为单个顶点数组：

```
var lower_house_material = [{x:57.11,y:271.77},{x:57.11,y:218.33},{x:41.99,y:218.63},{x:105.49,y:165.77},{x:138.42,y :193.18},{x:138.42,y:172.2},{x:152.53,y:172.2},{x:152.53,y:204.93},{x:168.99,y:218.63},{x:153.21,y :218.63},{x:153.21,y:271.77}];
var lower_house_hole_1 = [{x:74.14,y:264.13},{x:105.49,y:264.13},{x:105.49,y:232.8},{x:74.14,y:232.8}];
var lower_house_hole_2 = [{x:115.35,y:250.7},{x:135.96,y:250.7},{x:135.96,y:232.61},{x:115.35,y:232.61}];

var upper_house_material = [{x:56.11,y:145.77},{x:56.11,y:92.33},{x:40.99,y:92.63},{x:104.49,y:39.77},{x:137.42,y :67.18},{x:137.42,y:46.2},{x:151.53,y:46.2},{x:151.53,y:78.93},{x:152.53,y:79.76},{x:155.55,y :77.23},{x:159.5,y:74.52},{x:168.65,y:69.81},{x:176.46,y:66.93},{x:188.04,y:64.16},{x:200.63,y :62.7},{x:213.65,y:62.7},{x:226.05,y:64.1},{x:234.83,y:66.06},{x:245.65,y:69.73},{x:252.87,y :73.27},{x:259.12,y:77.35},{x:262.63,y:80.33},{x:265.6,y:83.47},{x:268.01,y:86.76},{x:269.84,y :90.17},{x:271.08,y:93.68},{x:271.76,y:99.08},{x:271.04,y:104.64},{x:269.75,y:108.2},{x:267.87,y :111.63},{x:265.42,y:114.91},{x:262.44,y:118.01},{x:258.96,y:120.92},{x:255.02,y:123.63},{x:245.86,y :128.34},{x:238.06,y:131.22},{x:226.48,y:133.99},{x:213.88,y:135.45},{x:200.63,y:135.45},{x:188.04,y :133.99},{x:176.46,y:131.22},{x:168.65,y:128.34},{x:159.5,y:123.63},{x:155.55,y:120.92},{x:152.21,y:118.12},{x:152.21,y:145.77}];
var upper_house_hole_1 = [{x:73.14,y:138.13},{x:104.49,y:138.13},{x:104.49,y:106.8},{x:73.14,y:106.8}];
var upper_house_hole_2 = [{x:114.35,y:124.7},{x:134.96,y:124.7},{x:134.96,y:106.61},{x:114.35,y:106.61}];
var upper_house_hole_3 = [{x:207.26,y:117.33},{x:210.57,y:117.26},{x:216.87,y:116.53},{x:222.66,y:115.15},{x:227.8,y :113.18},{x:233.11,y:110},{x:236.34,y:106.99},{x:238.51,y:103.64},{x:239.42,y:100.48},{x:239.42,y :97.67},{x:238.51,y:94.51},{x:236.34,y:91.16},{x:233.11,y:88.15},{x:227.8,y:84.97},{x:222.66,y :83},{x:216.87,y:81.62},{x:210.57,y:80.89},{x:203.94,y:80.89},{x:197.65,y:81.62},{x:191.86,y :83},{x:186.71,y:84.97},{x:181.41,y:88.15},{x:178.18,y:91.16},{x:176.01,y:94.51},{x:175.1,y :97.67},{x:175.1,y:100.48},{x:176.01,y:103.64},{x:178.18,y:106.99},{x:181.41,y:110},{x:186.71,y :113.18},{x:191.86,y:115.15},{x:197.65,y:116.53},{x:203.94,y:117.26}];

```

问题是，如何在three.js 中将这种类似结构转换为3D 对象，以便可以使用它进行拉伸`THREE.ExtrudeGeometry( shape, extrusionSettings )`，然后将其作为一个整体纹理化？

我可以检查路径数据以了解哪个孔属于哪个多边形并将所有这些都作为单独的形状处理，但是因为我想**在所有形状中使用一个纹理图像**，我认为首选方法是将所有材质多边形作为一个形状处理, 和孔多边形作为其他形状并使用类似的东西：

```
var shape = [lower_house_material，upper_house_material]；
shape.holes = [lower_house_hole_1，lower_house_hole_2，upper_house_hole_1，upper_house_hole_2，upper_house_hole_3]；
var 3d_geometry = THREE.ExtrudeGeometry（形状，挤压设置）；

```

所以最后`3d_geometry`应该是一个网格，我可以通过这种方式附加纹理：

```
var textureFront = new THREE.ImageUtils.loadTexture('textureFront.png');
var textureSide = new THREE.ImageUtils.loadTexture('textureSide.png');
var materialFront = new THREE.MeshBasicMaterial( { map: textureFront } );
var materialSide = new THREE.MeshBasicMaterial( { map: textureSide } );
var materialArray = [ materialFront, materialSide ];
var faceMaterial = new THREE.MeshFaceMaterial(materialArray);
var final_mesh = new THREE.Mesh(3d_geometry, faceMaterial );

```

其中一个纹理可能是这样的（256x256px）：

![在此处输入图像描述](https://i.stack.imgur.com/wGbUr.png)

并应用纹理：

![在此处输入图像描述](https://i.stack.imgur.com/bNBVJ.png)

并且由于网格是挤压的，上面还有 3D 厚度，但是你得到了纹理的概念。

我知道必须翻转 y 坐标，但这是一项微不足道的任务，而不是我的问题的重点，但是如果 three.js 具有用于裁剪 y 的现成功能，那将很有帮助。

我花了几个小时来检查three.js 的源代码、示例和[文档](http://threejs.org/docs/58/#Reference/Textures/Texture)，但是因为其中最常见的词是“todo”，所以它并没有多大帮助。而且我是three.js 的新手，我认为这对于一些有经验的three.js 用户来说可能是微不足道的任务。

更新：为了确保孔多边形始终表现良好，这意味着孔多边形始终完全位于材料多边形内，并且在材料多边形或孔多边形中没有重复的顶点或自相交以及所有材料多边形具有 CW 绕组顺序和孔 CCW。

更新：合并几何不是为由一个纹理设置的整个挤压多边形设置纹理的解决方案：http: [//jsfiddle.net/C5dga](http://jsfiddle.net/C5dga)。纹理在所有单独的形状上重复，因此在这种情况下合并几何没有真正的意义。该解决方案可能会在它们被挤压之前在合并形状上找到，但尚未找到解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T21:08:18.593

您可以像下面的代码片段那样合并几何，生成一个网格。从您之前的问题中，您已经知道如何对单个几何体进行纹理处理。

```
var geometry1 = new THREE.ExtrudeGeometry( shape1, extrusionSettings );
var geometry2 = new THREE.ExtrudeGeometry( shape2, extrusionSettings );

geometry1.merge( geometry2 );

. . .

var mesh = new THREE.Mesh( geometry1, material );

scene.add( mesh ); 
```

小提琴：http: [//jsfiddle.net/pHn2B/88/](http://jsfiddle.net/pHn2B/88/)

小提琴： http: [//jsfiddle.net/C5dga/13/](http://jsfiddle.net/C5dga/13/)（带纹理）

编辑：作为创建单独几何图形和使用`merge`实用程序的替代方法，您可以使用以下模式创建单个几何图形，而不是：

```
var geometry1 = new THREE.ExtrudeGeometry( [ shape1, shape2 ], extrusionSettings ); 
```

编辑：更新到three.js r.70

# php - 304 未修改标头和 SAME ORIGIN 策略

> ID：16124693
> 
> 赞同：-2
> 
> 时间：2013-04-20T20:11:01.397
> 
> 标签：php, javascript

我想看看外部图像是否正在发回 304 not modfied 标头，这可以在我的服务器上完成还是会违反相同的来源政策？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:14:40.010

同源策略只有在使用ajax时才会出问题。图片、javascript 等不受此政策影响，该政策仅存在于浏览器中。

只需发送带有标头的 curl 请求，然后读取标头。另请参阅：[PHP cURL 可以在单个请求中检索响应标头和正文吗？](https://stackoverflow.com/questions/9183178/php-curl-retrieving-response-headers-and-body-in-a-single-request)

# numpy - 将未知大小的 2-D 数组组合成一个 3-D

> ID：16124695
> 
> 赞同：2
> 
> 时间：2013-04-20T20:11:15.187
> 
> 标签：numpy

我有一个函数，比如 peaksdetect()，它将生成一个未知行数的二维数组；我会叫它几次，比如说 3，我想用这 3 个数组，一个 3-D 数组。这是我的开始，但是有很多 if 语句非常复杂，所以如果可能的话，我想让事情变得更简单：

```
import numpy as np

dim3 = 3   # the number of times peaksdetect() will be called
           # it is named dim3 because this number will determine 
           # the size of the third dimension of the result 3-D array

for num in range(dim3):
    data = peaksdetect(dataset[num])            # generates a 2-D array of unknown number of rows
    if num == 0:
        3Darray = np.zeros([dim3, data.shape])  # in fact the new dimension is in position 0
                                                # so dimensions 0 and 1 of "data" will be 
                                                # 1 and 2 respectively
    else:
        if data.shape[0] > 3Darray.shape[1]:
            "adjust 3Darray.shape[1] so that it equals data[0] by filling with zeroes"
            3Darray[num] = data
        else:
            "adjust data[0] so that it equals 3Darray.shape[1] by filling with zeroes"
            3Darray[num] = data
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:39:30.003

如果您指望必须调整数组的大小，那么通过预分配它很可能不会获得太多收益。将数组存储在一个列表中可能会更简单，然后计算出数组的大小来保存它们，然后将数据转储到其中：

```
data = []
for num in range(dim3):
    data.append(peaksdetect(dataset[num]))
shape = map(max, zip(*(j.shape for j in data)))
shape = (dim3,) + tuple(shape)
data_array = np.zeros(shape, dtype=data[0].dtype)
for j, d in enumerate(data):
    data_array[j, :d.shape[0], :d.shape[1]] = d 
```

# java - Java 中的 Com 对象，可能吗？

> ID：16124699
> 
> 赞同：6
> 
> 时间：2013-04-20T20:11:35.550
> 
> 标签：java, com

很抱歉这个愚蠢的问题，但我对 java 没有任何经验，对 jvm 没有任何经验，而且它是内部结构，谷歌搜索 subj 并没有给出结果。

问题是是否可以用 Java 编写一个 com 对象？然后从 C# 运行它？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T20:24:46.893

是的，您可以使用 Java 中的 COM 对象，尝试阅读此链接：[使用 Java 中的 COM 对象](https://notendur.hi.is/snorri/SDK-docs/getstart/javac003.htm)

但我不知道第二部分

# css - 悬停方向上的 CSS

> ID：16124700
> 
> 赞同：0
> 
> 时间：2013-04-20T20:11:48.313
> 
> 标签：css

我需要一些帮助！

我有一个 div 元素，需要在悬停时进行交互。见下文：

```
div {

    width:298px;
    height: 62px;
    position:relative;  
}

div:hover{
    height:90px;
    } 
```

但是，它可以工作，但它会“向下”盘旋我希望它做相反的事情并向上我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:13:21.507

使用该`top`属性将元素向上移动`20px`：

```
div:hover {
    top: -20px;
} 
```

# assembly - 汇编代码产生意外行为

> ID：16124705
> 
> 赞同：0
> 
> 时间：2013-04-20T20:12:29.333
> 
> 标签：assembly, gdb

我试图调试一个汇编代码（使用 GDB），但它的行为真的很奇怪。我认为这段代码的这种高级语言是一个 if 语句，对吗？当eax的内容等于rbx时，会跳转到指定的地址，否则会执行下面的语句，代码如下：

```
 0x000000000040108b <+25>:    lea    0x4(%rsp),%rbx
       0x0000000000401090 <+30>:    mov    $0x1,%ebp
       0x0000000000401095 <+35>:    mov    %ebp,%eax
       0x0000000000401097 <+37>:    add    -0x4(%rbx),%eax
       0x000000000040109a <+40>:    cmp    %eax,(%rbx)
 =>    0x000000000040109c <+42>:    je     0x4010a3 <phase_2+49> 
```

据我了解，当 %eax 等于 %rbx 时，语句 je 应该将代码跳转到地址 0x4010a3 对吗？但是，当我尝试使用以下命令查看两个寄存器的内容时​​：

```
print/c $eax
print/c $rbx 
```

两个寄存器的内容都是116。但是，它并没有跳转到0x4010a3，而是执行je语句下面的语句。难道我做错了什么？另外，我只是想知道，两者之间有什么不同：

```
cmp    %eax, %rbx 
```

和

```
cmp    $eax, (%rbx) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:42:20.513

```
CMP    %eax, (%rbx) 
```

将 EAX 中的值与RBX*指向的值进行比较。*类似于`if (x == *y)`。

甚至不可能将 EAX 与 RBX 进行比较，因为它们的大小不同（32 位与 64 位）。

# ruby-on-rails-3.2 - 如何使用 ActiveRecord::ConnectionAdapters 在 Rails 中准备具有动态绑定的原始 sql 语句？

> ID：16124706
> 
> 赞同：2
> 
> 时间：2013-04-20T20:12:44.820
> 
> 标签：ruby-on-rails-3.2, rails-activerecord

我使用 MySQL DB 和 MySQL2 作为适配器。

我想在 Rails 中执行自定义 sql 语句。

我需要一种允许像 PHP 一样准备 sql 语句的方法，如下所示：

```
stmt = prepare("INSERT INTO tab (col1, col2) VALUES (?, ?)", ["foo", "bar"]) 
```

不过，我发现 ActiveRecord 和 MySQL2 都没有这样的方法。

但我发现[ActiveRecord::ConnectionAdapters::AbstractAdapter](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/DatabaseStatements.html#method-i-exec_insert)`exec_*`中有几种方法，我认为它们完全适合我的任务但不知道如何使用它们，他们的 API 文档信息很少：

> exec_insert（sql，名称，绑定）
> 
> 使用绑定作为绑定替代，在此连接的上下文中执行插入 sql 语句。name 是与执行的 sql 语句一起记录的。

我已经厌倦了这个

```
sql = "INSERT INTO tab (col1, col2) VALUES (?, ?)"
r = ActiveRecord::Base.connection().exec_insert(sql, "someName", [10, "foo"])
puts r 
```

但出现错误：

```
`query': Mysql2::Error: You have an error in your SQL syntax; check the manual 
that corresponds to your MySQL server version for the right syntax to use near '?, ?)' 
```

那么如何使用这些方法呢？什么是`name`属性？什么是`bind`参数类型？如何编写 sql 语句，用什么代替`?`？

**升级版：**

我已经编写`prepare`了在 Rails 中使用的方法。[见 github](https://github.com/wzup/rails_prepare)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-05T18:09:34.237

回答太晚了，所有的导轨都升级了，但可能这就是你要找的 -

```
ActiveRecord::Base.connection().exec_query('INSERT INTO table(column1, column2) VALUES($1, $2)', 'someName', [[nil, 10], [nil, 'column2Value']]) 
```

**请注意**，我**只为 Postgres**使用并测试了 $1、$2，因为它是用于在 postgres 中准备查询的约定。

*MySql 和其他数据库可能会有所不同。对于 Mysql，我认为它应该`?`代替 $1、$2 等*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-20T22:02:29.217

我不建议您使用 exec_insert 因为它是一种“内部”方法，将来很容易发生变化。

Rails 方法如下：要么使用 AR 好东西（即绕过 SQL），要么使用纯 SQL，将两者混合不是一个实际的选择。

绑定（exec_inser 的第三个参数）是很好的工具，它们允许您根据 DB 列动态检查传递给 DB 的值，但它们的使用没有记录，因为您不应该使用它们。

1) 手动构建 SQL 查询

```
sql = "INSERT INTO tab (col1, col2) VALUES (10, 'foo')" 
```

2）将其发射到数据库中

```
r = ActiveRecord::Base.connection.execute(sql) 
```

3) 检查结果。这是特定于数据库适配器的。

干杯，

PS不要忘记`created_at`和`updated_at columns`，将它们设置为`'DateTime.now'`。

# servicestack - ToOptimizedResultUsingCache 和 Redis

> ID：16124712
> 
> 赞同：1
> 
> 时间：2013-04-20T20:13:11.270
> 
> 标签：servicestack

我已将 Redis 客户端配置如下：

```
container.Register<IRedisClientsManager>( new PooledRedisClientManager("url"));
container.Register(c =>c.Resolve<IRedisClientsManager>().GetCacheClient()); 
```

在这种情况下，如果在执行 ToOptimizedResultUsingCache 方法的过程中，产生了异常，是否可以不作为 key 存储在 Redis 中？

```
public object Get( MyRequest request)
{
    return RequestContext.ToOptimizedResultUsingCache<RedisTestResponse>(base.Cache,
    UrnId.Create<MyRequest >("all"), () =>{
      //throw
    });
} 
```

谢谢。

# windows-phone-8 - MvvmLight、PCL 和 System.Runtime

> ID：16124715
> 
> 赞同：2
> 
> 时间：2013-04-20T20:13:21.077
> 
> 标签：windows-phone-8, mvvm-light, portable-class-library

我有一个 VS2012 解决方案，其中包含一个针对 .NET 4.5、Silverlight 5 和 Windows Phone 8 的可移植类库。这个 PCL 还引用了 MvvmLight (PCL)。然后我有一个引用此 PCL 的 Windows Phone 8 项目。对于 WP8 项目，我加载了 MvvmLight (PCL) NuGet 包，它加载了 MvvmLight、MvvmLight.Extras 以及 MvvmLight.Platform.WP8。

但是，当我编译 WP8 项目时，它抱怨我间接引用了“System.Runtime，Version=2.5.19.0”。这是真的，因为 PCL 项目公开了一个视图模型，该视图模型具有 ViewModelBase 类作为基类，而这又需要 System.Runtime.dll。

如果我在 WP8 项目中引用 MvvmLight 的平台特定版本，即 MvvmLight NuGet 包，那么我还必须引用 Microsoft.Bcl.Build 包，当我这样做时，我会收到更多关于 Microsoft.Threading.Tasks 的错误. 扩展名。

我尝试从 Microsoft.Bcl 目录中添加 System.Runtime.dll，但它并没有解决问题。

有什么我错过或没有尝试过的吗？！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:32:42.170

这是NuGet 在不应该添加绑定重定向的[问题。](https://nuget.codeplex.com/workitem/3072)从 WP8 项目中的 app.config 中删除 System.Runtime（和 System.Threading.Tasks，如果存在）的绑定重定向应该可以解决此问题。

# mysql - 无法在 DB 驱动的 rails 项目中运行 rails 服务器；无法查看本地主机

> ID：16124726
> 
> 赞同：-1
> 
> 时间：2013-04-20T20:14:00.673
> 
> 标签：mysql, ruby-on-rails, ruby, terminal

我能够创建一个“rails new demoproject”并在文件夹中成功运行“rails s”，但是当我尝试使用数据库“rails new demoproject -d mysql”创建一个rails项目并在其中运行“rails s”时我收到以下错误的文件夹：

```
user$ rails server
=> Booting WEBrick
=> Rails 4.0.0.beta1 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
[2013-04-20 16:06:26] INFO  WEBrick 1.3.1
[2013-04-20 16:06:26] INFO  ruby 1.9.3 (2013-02-22) [x86_64-darwin12.3.0]
[2013-04-20 16:06:26] INFO  WEBrick::HTTPServer#start: pid=1945 port=3000

Started GET "/" for 127.0.0.1 at 2013-04-20 16:06:39 -0400

Mysql2::Error (Access denied for user 'root'@'localhost' (using password: NO)):
  mysql2 (0.3.11) lib/mysql2/client.rb:44:in `connect'
  mysql2 (0.3.11) lib/mysql2/client.rb:44:in `initialize'
  activerecord (4.0.0.beta1) lib/active_record/connection_adapters/mysql2_adapter.rb:18:in `new'
  activerecord (4.0.0.beta1) lib/active_record/connection_adapters/mysql2_adapter.rb:18:in `mysql2_connection'
  activerecord (4.0.0.beta1) lib/active_record/connection_adapters/abstract/connection_pool.rb:446:in `new_connection'
  activerecord (4.0.0.beta1) lib/active_record/connection_adapters/abstract/connection_pool.rb:456:in `checkout_new_connection'
  activerecord (4.0.0.beta1) lib/active_record/connection_adapters/abstract/connection_pool.rb:427:in `acquire_connection'
  activerecord (4.0.0.beta1) lib/active_record/connection_adapters/abstract/connection_pool.rb:364:in `block in checkout'
  /Users/user/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
  activerecord (4.0.0.beta1) lib/active_record/connection_adapters/abstract/connection_pool.rb:363:in `checkout'
  activerecord (4.0.0.beta1) lib/active_record/connection_adapters/abstract/connection_pool.rb:273:in `block in connection'
  /Users/user/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
  activerecord (4.0.0.beta1) lib/active_record/connection_adapters/abstract/connection_pool.rb:272:in `connection'
  activerecord (4.0.0.beta1) lib/active_record/connection_adapters/abstract/connection_pool.rb:552:in `retrieve_connection'
  activerecord (4.0.0.beta1) lib/active_record/connection_handling.rb:79:in `retrieve_connection'
  activerecord (4.0.0.beta1) lib/active_record/connection_handling.rb:53:in `connection'
  activerecord (4.0.0.beta1) lib/active_record/migration.rb:739:in `current_version'
  activerecord (4.0.0.beta1) lib/active_record/migration.rb:747:in `needs_migration?'
  activerecord (4.0.0.beta1) lib/active_record/migration.rb:357:in `check_pending!'
  activerecord (4.0.0.beta1) lib/active_record/migration.rb:346:in `block in call'
  activesupport (4.0.0.beta1) lib/active_support/logger_silence.rb:16:in `silence'
  activerecord (4.0.0.beta1) lib/active_record/migration.rb:345:in `call'
  actionpack (4.0.0.beta1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0.beta1) lib/active_support/callbacks.rb:373:in `_run__3314375952420028571__call__callbacks'
  activesupport (4.0.0.beta1) lib/active_support/callbacks.rb:78:in `run_callbacks'
  actionpack (4.0.0.beta1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0.beta1) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0.beta1) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.0.beta1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0.beta1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0.beta1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0.beta1) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0.beta1) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0.beta1) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0.beta1) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0.beta1) lib/rails/rack/logger.rb:21:in `call'
  actionpack (4.0.0.beta1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0.beta1) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0.beta1) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0.beta1) lib/rails/engine.rb:510:in `call'
  railties (4.0.0.beta1) lib/rails/application.rb:96:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/user/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/user/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/user/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'

  Rendered /Users/user/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-4.0.0.beta1/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.0ms)
  Rendered /Users/user/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-4.0.0.beta1/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /Users/user/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-4.0.0.beta1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/user/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-4.0.0.beta1/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (51.9ms) 
```

当我转到 localhost:3000 时，我在 Web 浏览器的标题中收到“动作控制器：异常捕获”错误，并且可以在此处查看网页上的 mysql2 错误：http: [//postimg.org/image/ 9wemvhwkj/](http://postimg.org/image/9wemvhwkj/)

**更新**：这是 database.yml 文件中的内容...

```
# MySQL.  Versions 4.1 and 5.0 are recommended.
#
# Install the MYSQL driver
#   gem install mysql2
#
# Ensure the MySQL gem is defined in your Gemfile
#   gem 'mysql2'
#
# And be sure to use new-style password hashing:
#   http://dev.mysql.com/doc/refman/5.0/en/old-client.html
development:
  adapter: mysql2
  encoding: utf8
  database: cms_development
  pool: 5
  username: root
  password:
  socket: /tmp/mysql.sock

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: mysql2
  encoding: utf8
  database: cms_test
  pool: 5
  username: root
  password:
  socket: /tmp/mysql.sock

production:
  adapter: mysql2
  encoding: utf8
  database: cms_production
  pool: 5
  username: root
  password:
  socket: /tmp/mysql.sock 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:39:21.447

您的 database.yml 文件中的用户名和密码无权访问数据库

## 你需要

*   转到用户 mysql2 shell
    *   创建新用户
    *   新数据库
    *   授予用户对数据库的权限
*   转到 database.yml 文件并更新开发配置以匹配
    *   用户名
    *   密码
    *   数据库适配器
    *   数据库名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T00:51:17.670

我在你们的帮助下解决了我的问题：

在终端中输入：（`mysql -u root -p`如果`-p`您在安装 mysql 时没有设置 root 密码，则没有）

然后输入`CREATE DATABASE cms_development;`（替换`cms`为您的 Rails 项目名称）

然后打开位于 rails 项目文件夹中的 config/database.yml

在“开发：”下输入我的密码在“密码：”下

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T20:22:54.250

`Mysql2::Error (Access denied for user 'root'@'localhost' (using password: NO)):`- 检查数据库用户名\密码

# matlab - 如何在matlab中均衡这两个矩阵的大小？

> ID：16124727
> 
> 赞同：-1
> 
> 时间：2013-04-20T20:14:02.200
> 
> 标签：matlab, matrix, equality

我有以下两个显示大小的矩阵：

```
x ---> 256x256

y ---> 65536x2 
```

我们如何才能使这两个矩阵的大小相等？换句话说，我们怎样才能使 size`y`等于 size `x`？我知道我们可以使用`padarray`. 但是，我们如何在这里使用它呢？这种均衡不会丢失一些信息吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:18:28.510

看看[重塑](http://www.mathworks.com/help/matlab/ref/reshape.html)。如果您需要帮助。提供有关您想要做什么的更多信息。

```
y = reshape(y,256,256); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T20:18:50.470

然后使用`reshape`函数：

```
reshape(y,size(x)) 
```

# java - Java 中的十六进制转换错误

> ID：16124728
> 
> 赞同：0
> 
> 时间：2013-04-20T20:14:02.997
> 
> 标签：java, parsing, hex

我正在尝试将用户的输入作为字符串接收，将此字符串分成两半并将这些字符串转换为十六进制整数。我需要在 TEA 加密算法中使用这些十六进制整数。我正在为 gui 构建器在 netbeans 中制作这段代码。

**我当前的代码**

```
//Getting initial text
String arg = input.getText();

//establishing Left and Right for TEA
int[] v = new int[2];

// Splitting the string into two.
StringBuilder output2;
for (int x = 0; x < 2; x++ ) {
    output2 = new StringBuilder();
    for (int i = 0; i < arg.length()/2; i++) {
        if (x == 1) 
            output2.append(String.valueOf(arg.charAt(arg.length()/2 + i)));
        else 
            output2.append(String.valueOf(arg.charAt(i)));  
    }
    //converting a half into a string
    String test = output2.toString();
    //printing the string out for accuracy
    System.out.println(test);
    //converting the string to string hex
    test = toHex(test);
    //converting the string hex to int hex.
    v[x] = Integer.parseInt(test, 16);
}

public static String toHex(String arg) {
    return String.format("%x", new BigInteger(arg.getBytes()));
} 
```

我收到此错误：

> java.lang.NumberFormatException：对于输入字符串：“6a54657874”

我已经在网上查看了这个问题，但错误说当我将字符串转换为 v[x] 时发生，多个站点说这是将十六进制字符串放入 int 的正确方法，所以我很困惑。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:17:38.747

`6a54657874`因为十六进制是`456682469492`十进制。这大于`Integer.MAX_VALUE`. 它将适合`long`.

制作并`v`使用`long[]``Long.parseLong(test, 16);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T20:21:31.760

32 位对于您的数字来说太小了。您需要`Long.parseLong`改用。

# java - 如何编写一个数组来为 5 件事分配空间

> ID：16124732
> 
> 赞同：-7
> 
> 时间：2013-04-20T20:14:21.657
> 
> 标签：java, arrays

我需要编写一个数组来为我用 Java 编写的程序分配 5 件东西的空间，我是新手，需要帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:15:07.937

你可以这样做：

```
private Object[] myObjects = new Object[5]; 
```

根据需要更改类型。

# multithreading - UPC 本地指针访问随机存储器

> ID：16124733
> 
> 赞同：1
> 
> 时间：2013-04-20T20:14:27.510
> 
> 标签：multithreading, parallel-processing, upc

我正在尝试使用本地指针来访问当前线程具有亲和力的内存。

不幸的是，我的本地指针似乎没有指向我认为应该指向的位置。

有人知道出了什么问题吗？

**编辑：**我忘了提到下面的输出是使用四个线程运行此代码生成的，即`THREADS = 4`.

我的代码：

```
#include <upc.h>
#include <stdio.h>
#include <stdlib.h>

int main(){

    shared int * T = (shared int *) upc_all_alloc(12, sizeof(int));
    if(!T)
        upc_global_exit(-1);

int i;
upc_forall(i=0; i<12; i++; &T[i]) T[i] = i;
upc_barrier;

if(MYTHREAD == 0)
    for(i=0; i<12; i++) printf("thread %d, T[%d] = %d\n", MYTHREAD, i, T[i]);
upc_barrier;

int my_start = (12/THREADS + 1)*MYTHREAD;
int my_end = (12/THREADS + 1)*(MYTHREAD+1) - 1;

int* T_local = (int*)&T[my_start];

for(i=my_start; i<=my_end; i++)
    printf("thread %d, T_local[%d] = %d, T[%d] = %d\n", MYTHREAD, 
            i-my_start, T_local[i-my_start], i, T[i]);
upc_barrier;

return 0;
} 
```

输出（`THREADS = 4`）：

```
thread 0, T[0] = 0
thread 0, T[1] = 1
thread 0, T[2] = 2
thread 0, T[3] = 3
thread 0, T[4] = 4
thread 0, T[5] = 5
thread 0, T[6] = 6
thread 0, T[7] = 7
thread 0, T[8] = 8
thread 0, T[9] = 9
thread 0, T[10] = 10
thread 0, T[11] = 11
thread 0, T_local[0] = 0, T[0] = 0
thread 0, T_local[1] = 4, T[1] = 1
thread 0, T_local[2] = 8, T[2] = 2
thread 0, T_local[3] = 0, T[3] = 3
thread 1, T_local[0] = 4, T[4] = 4
thread 1, T_local[1] = 8, T[5] = 5
thread 1, T_local[2] = 0, T[6] = 6
thread 2, T_local[0] = 8, T[8] = 8
thread 2, T_local[1] = 0, T[9] = 9
thread 2, T_local[2] = 0, T[10] = 10
thread 2, T_local[3] = 0, T[11] = 11
thread 3, T_local[0] = 0, T[12] = 0
thread 3, T_local[1] = 0, T[13] = 0
thread 3, T_local[2] = 0, T[14] = 0
thread 3, T_local[3] = 0, T[15] = 0
thread 1, T_local[3] = 0, T[7] = 7 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-13T08:01:58.040

您的数组 T 是使用循环布局分配和声明的（即 blocksize == 1）。这意味着与 MYTHREAD 有关联的第一个元素就是 T[MYTHREAD]。因此，您可能应该按如下方式初始化指向本地的指针：

```
int* T_local = (int*)&T[MYTHREAD]; 
```

在循环布局中，共享元素循环传递给线程，这意味着每个线程都有一个不连续的分布式数组元素块。因此，例如有 4 个线程，线程 0 将与 T[0]、T[4] 和 T[8] 具有亲和力。线程 0 上正确初始化的 T_local 指向本地的指针将访问共享数组的本地切片中的这些元素（分别为 T_local[0]、T_local[1] 和 T_local[2]）。

您对 my_start 和 my_end 的计算似乎假设了与 T 实际使用的不同（更大）的阻塞因子，这可能是您困惑的根源。

# java - 全屏帧率限制难题

> ID：16124734
> 
> 赞同：2
> 
> 时间：2013-04-20T20:14:28.163
> 
> 标签：java, swing, awt, fullscreen, frame-rate

我的游戏（框架）在全屏时不能超过每秒 30 帧（更新调用之间大约 33 毫秒）。我使用 Timer 进行循环。实际上它变得有点复杂，因为当我逐渐减少延迟时，我测量的调用之间的时间变得疯狂。它从设定的延迟跳到预期值的两倍或更多。阈值似乎是 30 毫秒。在窗口模式下没有问题，在 4 ms 阈值处开始出现差异。两种模式都以较高的延迟正常运行。以下是我认为相关的部分代码。

```
fps = 30;       
timer = new Timer(1000/fps, new ActionListener() {          
@Override
public void actionPerformed(ActionEvent arg0) {
    tick();             
} 
```

以上是定时器设置。下面是其余的。

```
private void tick(){
    update(gameTime);
    draw(gameTime);     
} 
```

这是我的 Graphics(2D) 和 BufferedImage。

```
 public DrawBatch(DeviceManager deviceManager) {
    this.deviceManager = deviceManager;
    color = Color.MAGENTA;
    bufferedImage = deviceManager.getBufferedImage();       
    bufferedGraphics = (Graphics2D)bufferedImage.getGraphics();bufferedGraphics = (Graphics2D)bufferedImage.getGraphics();
    bufferedGraphics.setBackground(color);
    bufferedGraphics.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    bufferedGraphics.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
    bufferedGraphics.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE); 
} 
```

draw(GameTime gameTime) 方法从这个方法开始：

```
 public void begin(){
    bufferedGraphics.clearRect(0, 0, bufferedImage.getWidth(), bufferedImage.getHeight());  
} 
```

现在我们可以使用 bufferedGraphics 进行绘制了。draw(GT gT) 以此结束。（灵感来自 xna）

```
 public void end(){
    if(deviceManager.isFullScreen())deviceManager.getGraphics().drawImage(bufferedImage, 0,0, null);
    else deviceManager.getGraphics().drawImage(bufferedImage, 3,25, null);      
    deviceManager.getGraphics().dispose();      
    bufferedImage.flush();  
} 
```

我回收了相同的 BufferedImage，因为制作新的（连同 Graphics 对象）造成了内存泄漏。不知道是否使用相同的 Graphics 对象而不是每帧执行 .dispose() / new Graphics。

在窗口模式下，BufferedImage 在 jFrame.getGraphics() 上绘制，在 graphicsDevice.getFullScreenWindow().getGraphics() 上以全屏形式绘制。

这是全屏设置。

```
public void setFS(){
    jFrame.setVisible(false);
    jFrame.dispose();
    jFrame.setIgnoreRepaint(true);
    jFrame.setResizable(false);
    jFrame.setUndecorated(true);
    graphicDevice.setFullScreenWindow(jFrame);
    graphicDevice.getFullScreenWindow().setIgnoreRepaint(true);
    graphicDevice.setDisplayMode(new DisplayMode(width, height, 32, 60));   
    jFrame.setVisible(true);        
    fullScreen = true;      
} 
```

和窗口设置。

```
public void setW(){
    jFrame.setVisible(false);
    jFrame.dispose();   
    jFrame.setIgnoreRepaint(true);
    jFrame.setResizable(false);
    jFrame.setUndecorated(false);
    graphicDevice.setFullScreenWindow(null);
    jFrame.setSize(width, height);      
    jFrame.setVisible(true);
    jFrame.getContentPane().setPreferredSize(new Dimension(800, 600));          
    jFrame.pack();      
    fullScreen = false;
} 
```

知道为什么模式的不同行为吗？（除了帧率和一些潜在的内存泄漏，程序运行平稳。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T03:07:47.610

理论上，定时器的周期不能短于渲染一帧所用的时间。实际上，它需要更长的时间，否则您将立即使计时器的共享线程饱和。您需要[配置文件](https://stackoverflow.com/q/2064427/230513)才能确定。呼叫`drawImage()`通常占主导地位，即使没有扩展。这[`AnimationTest`](https://stackoverflow.com/a/3256941/230513)显示了过去几个渲染时间的移动平均值`FRAMES`。您可以使用该方法来调整您的实现以适应您可接受的最慢目标平台。

# ruby - 使用 Ruby 计算句子中的字母数

> ID：16124735
> 
> 赞同：-4
> 
> 时间：2013-04-20T20:14:33.187
> 
> 标签：ruby, string

假设我有一个字符串`"I am a good boy"`。我想要字符串中每个字母的总数。字母区分大小写。即，`D`并且`d`需要被视为两个不同的字符。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-20T20:21:04.997

```
"I am a good boy".scan(/\w/).inject(Hash.new(0)){|h, c| h[c] += 1; h}
# => {"I"=>1, "a"=>2, "m"=>1, "g"=>1, "o"=>3, "d"=>1, "b"=>1, "y"=>1} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-20T20:42:13.400

```
a = "I am a good boy"

a.chars.group_by(&:chr).map { |k, v| [k, v.size] } 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-20T23:49:17.823

这并不是一个答案，只是对现有答案的补充。

因为讨论了性能，这里有一些数据。

```
require 'benchmark'

s0 = "I am a good boy"
s = s0 * 1
N = 10000

Benchmark.bm(20) do | x |
  x.report('sawa') do
    N.times { s.scan(/\w/).inject(Hash.new(0)){|h, c| h[c] += 1; h} }
  end

  x.report('digitalross') do 
    N.times { s.chars.to_a.sort.group_by(&:chr).map { |k, v| [k, v.size] } }
  end

  x.report("digitalross'") do 
    N.times { s.chars.group_by(&:chr).map { |k, v| [k, v.size] } }
  end

  x.report('rubylovely') do
    N.times { s.gsub(/\s/,'').chars.with_object({}) {|c,ob| ob[c] = s.count(c)} }
  end
end 
```

给（`ruby 1.9.3p392`在我的机器上）

```
 user     system      total        real
sawa                   0.600000   0.000000   0.600000 (  0.601734)
digitalross            0.790000   0.000000   0.790000 (  0.806674)
digitalross'           0.640000   0.010000   0.650000 (  0.651802)
rubylovely             0.570000   0.000000   0.570000 (  0.572501) 
```

和我`s = s0 * 1000`得到`N = 10`

```
 user     system      total        real
sawa                   0.340000   0.000000   0.340000 (  0.340617)
digitalross            0.380000   0.000000   0.380000 (  0.411393)
digitalross'           0.230000   0.010000   0.240000 (  0.243389)
rubylovely             6.530000   0.000000   6.530000 (  6.603198) 
```

所以对于非常短的字符串，RubyLovely 的解决方案的多次计数并没有什么坏处。实际上，确实如此。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-20T22:04:17.083

我会使用：

```
str = "我是个好孩子"
str.scan(/[[:alpha:]]/i).each_with_object(Hash.new(0)) { |c, h| h[c] += 1 }

```

返回：

```
{
    "我" => 1,
    “一” => 2，
    “米” => 1，
    "g" => 1,
    "o" => 3,
    "d" => 1,
    "b" => 1,
    "y" => 1
}

```

我更喜欢使用`scan`，因为它使用的正则表达式会立即确定允许计算哪些字符。如果输入字符串包含“我是个好孩子”。其他一些解决方案将失败，因为它们对输入字符串过于特定，并且每次遇到意外字符时都需要进行调整。我们知道输入很少那么枯燥，在现实世界中，这种代码将用于一般句子。忽略前面不需要的字符很重要。

* * *

```
'Français'.scan(/[[:alpha:]]/i).each_with_object(Hash.new(0)) { |c, h| h[c] += 1 }

```

返回：

```
{
    "F" => 1,
    "r" => 1,
    “一” => 2，
    "n" => 1,
    "ç" => 1,
    “我” => 1，
    "s" => 1
}

```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-21T08:58:19.937

我认为拼写一段代码没有任何问题，因此任何 Ruby 程序员（包括新手）都很容易理解它。而且，我想绕过那个字符串。

所以，我喜欢这样：

```
s = "I am a good boy"

def count_word_characters(s)
    h = Hash.new(0)
    s.each_char do |char| 
        next unless char =~/\w/
        h[char] += 1
    end
    h
end 
```

因为：

*   很容易看出哈希 h 是如何创建、填充和输出的
*   哈希 h 在输入字符串上填充一次
*   很明显我们跳过了非单词字符

# c++ - QPushButton 和点击槽

> ID：16124744
> 
> 赞同：0
> 
> 时间：2013-04-20T20:15:16.843
> 
> 标签：c++, qt5

我有一个`verticalLayout`每行有一个按钮的三个标签。当我单击每个按钮时，事件

```
button_clicked()
{

} 
```

正在开火。此事件适用于所有按钮，即当我单击每个按钮时，都会调用此函数。现在，当我单击每个按钮时，我想要该按钮在该删除中的同一行。我怎样才能做到这一点？首先必须是一个唯一值，我检测到哪个按钮被单击，其次我必须删除该行，但我知道如何。任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:44:22.467

使用评论中提供的其他数据重新回答：

您可以将所有按钮连接到同一个插槽，然后使用该`sender()`方法来识别谁在触发信号：

```
void MyClass::button_clicked() {
    QAbstractButton* button = qobject_cast<QAbstractButton*>(sender());
    if ( !button ) {
        return; // not called from a button.
    }
    button->setText("Clicked");
} 
```

# html - 表格单元格作为链接

> ID：16124745
> 
> 赞同：-1
> 
> 时间：2013-04-20T20:15:22.640
> 
> 标签：html, css, html-table

我有一个表格，我想将高度固定为大于默认值（出于美学原因），问题是：链接仅对文本区域有效，而不是整个高度。我已经将它作为显示：块...有什么帮助吗？

```
 .myTable {border-collapse: collapse; text-align:center;float:none; 
        border: 10px #ccc solid;
          }
            .myTable td { width:150px ;height:80px;background:#55ddff; }
            .myTable td a {display: block; } 
```

这是html正文：

```
<table class="myTable">
<TR><TD><a href="">hello</a></TD></TR>
<TR><TD><a href="">hello</a></TD></TR>
<TR><TD><a href="">hello</a></TD></TR>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:16:36.180

尝试这个：

```
.myTable td a {display:block;width:100%;height:100%;margin:0} 
```

# css - 从用户端取消划掉css属性

> ID：16124756
> 
> 赞同：0
> 
> 时间：2013-04-20T20:17:09.503
> 
> 标签：css, firefox, css-sprites

当我在 Windows 7 中进入高对比度模式时，背景图像变得不可见。它是操作系统主动删除`background`CSS 中的所有属性。（我不确定这是如何工作的）。我想知道是否可以使用扩展或用户样式的 css 覆盖这些属性并使其可见。

例如，这里是 Amazon.com 上被划掉的背景图片的 CSS 属性（包括评分星的图片）

```
.srSprite {
    background: url("http://g-ecx.images-amazon.com/images/G/01/nav2/images/gui/searchSprite._V373035005_.gif") repeat scroll 0 0 transparent;
} 
```

我试图通过将以下内容置于时尚风格中来使这些可见。Stylish 是一个自定义 CSS 的 Firefox 插件。

```
@-moz-document url-prefix(http://), url-prefix(https://), url-prefix(ftp://){
.srSprite{
    background: no-peat scroll 0 0 transparent !important;
    display: inline-block !important;
    margin: 0 !important;
    overflow: hidden !important;
    padding: 0 !important;
    position: relative !important;
    vertical-align: middle !important;

}
} 
```

但它似乎不起作用。我做错了什么，还是有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:59:39.373

This is by-design behaviour. The purpose of high contrast mode is to make everything more accessible, which includes stripping out 'noise' like background images which can reduce contrast.

This [blog post](http://terrillthompson.com/blog/182) has more information on the paradigm of Windows high contrast mode. Something most of us should probably think more about (me included).

# c++ - 将值从 csv 文件插入到 Qt 中的向量时出错

> ID：16124760
> 
> 赞同：0
> 
> 时间：2013-04-20T20:17:26.993
> 
> 标签：c++, qt, csv

```
QVector <QString> frequency;
QVector <QString> gain;
QString ref_data;
QStringList rowOfData;
QStringList rowData;

if (ReferenceData.open(QIODevice::ReadOnly | QIODevice::Text)) {
    ref_data = ReferenceData.readAll();
    rowOfData = ref_data.split("\n");
    ReferenceData.close();
}

for (int x = 9; x < rowOfData.size(); x++) {
    rowData = rowOfData.at(x).split(",");
    frequency.push_back(rowData[0]);
    gain.push_back(rowData[1]);
} 
```

我从一个文件中读取了所有数据。当我使用`push_back`时，我得到一个错误`QList<T>::operator[] "index out of range"`。我也用过`frequency.push_back(rowData.at(0));`，然后`QList<T>::at "index out of range"`报错！

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:38:34.380

后面的循环应该处理坏行，例如像这样，只是用调试打印跳过它们：

```
for (int x = 9; x < rowOfData.size(); x++) {
    rowData = rowOfData.at(x).split(",");
    if (rowData.size() >= 2) {
        frequency.push_back(rowData[0]);
        gain.push_back(rowData[1]);
    }
    else qDebug() << "Skipping bad row" << x << rowOfData.at(x);
} 
```

# emacs - Emacs 22.3 无法在 Ubuntu 12.04 上编译

> ID：16124763
> 
> 赞同：2
> 
> 时间：2013-04-20T20:17:38.277
> 
> 标签：emacs, makefile, ubuntu-12.04

我从下载 emacs 22.3

[http://ftp.gnu.org/pub/gnu/emacs/emacs-22.3.tar.gz](http://ftp.gnu.org/pub/gnu/emacs/emacs-22.3.tar.gz)

在我的 Ubuntu 12.04.2 LTS 桌面上编译/制作不起作用。

配置似乎工作正常。

Make 很早就失败了：在子目录 lib-src 中，makefile 的第 148 行有问题。它确实看起来像一个问题：

```
ALL_CFLAGS = -D_BSD_SOURCE -DHAVE_CONFIG_H
          -I. -I../src -I${srcdir} -I${srcdir}/../src ${LDFLAGS} ${CPPFLAGS} ${CFLAGS} 
```

那是第 147 行和第 148 行：我猜第 148 行应该是第 147 行的延续。它以选项卡开头。没有 \ 在第 147 行的末尾。我放了一个并再次尝试。我在第 150 行遇到错误。我输入了另一个 \ 。几行之后事情变得更严重了，缺少 \ 实际上导致的事情不是语法错误，而是以更微妙的方式使 make break 发生。

无论如何，我不应该编辑 Makefile（我可以说，他们的权限是只读的 ;-) ）。我究竟做错了什么？我可以坚持下去，但如果我可以改为例如提供一个标志以使其在 emacs-22.3-makefile-compatibility 模式下运行，那会好得多。

[对于那些想知道“为什么”的人——我有一些我的工作需要的脚本，它们从未在 emacs >=23 中工作过；在我的旧机器上我自己编译了 emacs22 没问题，但是在这台新的 Ubuntu 机器上我没有 emacs22 并且 ubuntu 12.04 存储库中没有 emacs22 所以我有点绝望]

* * *

好的，所以有人建议我尝试

```
$ CPPFLAGS="-P" ./configure 
```

这解决了 lib-src 中回车/制表符的所有问题。但实际上它只是让我达到了我设法手动获取的地步：

```
cd src; make all  \
          CC='gcc' CFLAGS='-g -O2 -Wno-pointer-sign ' CPPFLAGS='-D_BSD_SOURCE  -P' \
          LDFLAGS='-Wl,-znocombreloc' MAKE='make'
make[1]: Entering directory `/home/buzzard/local/emacs-22.3/src'
gcc -c -D_BSD_SOURCE  -P -Demacs -DHAVE_CONFIG_H   -I. -I/home/buzzard/local/emacs-22.3/src -D_BSD_SOURCE  -g -O2 -Wno-pointer-sign  pre-crt0.c
make[1]: *** No rule to make target `/usr/lib/crt1.o', needed by `temacs'. Stop.
make[1]: Leaving directory `/home/buzzard/local/emacs-22.3/src'
make: *** [src] Error 2 
```

嗯...如果我知道自己在做什么，我会发布其他零碎的东西，但老实说，我从来没有理解过制作。我一直只是希望它会工作......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T20:38:41.677

这是较新的 gcc 版本的问题。请参阅修复此问题的 Emacs 存储库中的此更改：

[http://git.savannah.gnu.org/gitweb/?p=emacs.git;a=commit;h=16abbbf](http://git.savannah.gnu.org/gitweb/?p=emacs.git;a=commit;h=16abbbf)

您应该能够通过使用来解决问题

```
CPPFLAGS="-P" ./configure 
```

为了避免找不到 /usr/lib/crt1.o 的问题，您必须进行编辑`src/Makefile`（您可能首先必须`chmod a+rw src/Makefile`进行编辑）。在较新的系统上， crt1.o 不是 in`/usr/lib`而是 in `/usr/lib/<arch directory>/`，因此例如它可能在 in `/usr/lib/i386-linux-gnu`（您的可能不同！）。然后在 中`src/Makefile`，更改行

```
STARTFILES = pre-crt0.o /usr/lib/crt1.o /usr/lib/crti.o 
```

至

```
STARTFILES = pre-crt0.o /usr/lib/i386-linux-gnu/crt1.o /usr/lib/i386-linux-gnu/crti.o 
```

和

```
LIBES = ... all kinds of stuff ...  /usr/lib/crtn.o $(GNULIB_VAR) 
```

至

```
LIBES = ... all kinds of stuff ... /usr/lib/i386-linux-gnu/crtn.o $(GNULIB_VAR) 
```

同样，您的目录可能不同！

# javascript - 在 AngularJS 中使用内联模板

> ID：16124767
> 
> 赞同：82
> 
> 时间：2013-04-20T20:18:03.640
> 
> 标签：javascript, angularjs

我想加载一个内联视图模板。

我将模板包装在 type 的脚本标记中`text/ng-template`，并将 id 设置为`temp1.html`. 这就是我的模块配置的样子

```
learningApp.config(function ($routeProvider) {
    $routeProvider
        .when("/first",{ controller: "SimpleController", templateUrl: "temp1.html"})
        .when("/second", {controller: "SimpleController", templateUrl: "temp2.html"})
        .otherwise({redirectTo : "/first"});
}); 
```

它在我的控制台窗口中告诉我`GET http://localhost:41685/temp1.html 404 (Not Found)`，这意味着它正在寻找该名称的文件。

我的问题是：如何配置我的路线以使用内联模板？

更新：这是我的服务器渲染 DOM 的样子

```
<!DOCTYPE html>
<html>
<head>
    <script src="/Scripts/angular.js"></script>
    <link href="/Content/bootstrap.css" rel="stylesheet"/>
</head>
<body>
    <div class="container">       
    <h2>Getting Started with Angular</h2>
    <div class="row">
        <div class="panel" ng-app="LearningApp">
            <div ng-view></div>
        </div>
    </div>

<script type="text/ng-template" id="temp1.html">
    <div class="view">
        <h2>First View</h2>
        <p>
            Search:<input type="text" ng-model="filterText" />
        </p>
        <ul class="nav nav-pills">
            <li ng-repeat="cust in customers | orderBy:'name' | filter: filterText "><a href="#">{{cust.name}} - {{cust.school}}</a></li>
        </ul>
    </div>
</script>

<script type="text/ng-template" id="temp2.html">
    <div class="view">
        <h2>Second View</h2>
        <p>
           Search:<input type="text" ng-model="filterText" />
        </p>
        <ul class="nav nav-pills">
            <li ng-repeat="cust in customers | orderBy:'name' | filter: filterText "><a href= "#">{{cust.name}} - {{cust.school}}</a></li>
        </ul>
    </div>
</script>
    </div>
    <script src="/Scripts/jquery-1.9.1.js"></script>
    <script src="/Scripts/bootstrap.js"></script>
    <script src="/Scripts/app/LearningApp.js"></script>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-04-20T21:00:13.567

Ody，你走对了，唯一的问题是标签在使用指令的 DOM 元素*之外。*`ng-app`如果将其移动到`<body ng-app="LearningApp">`元素内联模板应该可以工作。

您可能还会发现这个问题相关：[有没有办法让 AngularJS 在开始时而不是在需要时加载部分？](https://stackoverflow.com/q/12346690/1418796)

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-04-20T20:22:22.937

尝试使用 script-Element 的 id-Attribute 来设置模板的名称应该可以工作。

```
<script type="text/ng-template" id="temp1.html">
   ... some template stuff
</script> 
```

# kendo-ui - 如果父下拉列表没有子下拉列表，则禁用子下拉列表

> ID：16124768
> 
> 赞同：1
> 
> 时间：2013-04-20T20:18:03.790
> 
> 标签：kendo-ui, cascadingdropdown

假设我有一个简单的级联 Kendo UI 下拉列表，用于过滤产品。第一个（“父级”）下拉列表显示所有产品类别。第二个（“子”）下拉列表显示所选父类别下的所有产品子类别。**但是，某些类别没有子类别。**

当一个类别没有任何子类别时，子类别下拉菜单应保持禁用状态。不幸的是，小部件的默认行为是，只要选择了一个类别，就会启用子类别下拉菜单，而不管子类别是否存在。

当父母没有孩子时，有没有人有任何关于禁用孩子下拉菜单的建议？

# python - 在函数内使用模块时出现UnboundLocalError？

> ID：16124770
> 
> 赞同：0
> 
> 时间：2013-04-20T20:18:09.087
> 
> 标签：python, import, namespaces

从`string`模块导入时，与解析函数一起使用。

```
from string import punctuation

def parsing_func(data):
    if not any(i==v for i in data for v in punctuation.replace('_', '')):
        print data 
```

在上面的这个函数中使用`string`' `punctuation`，一切正常。

然后我想对照几个较少的标点符号检查数据。所以我改成`parsing_func`这样：

```
def parsing_func(data):
    punctuation = punctuation.replace('_', '')
    punctuation = punctuation.replace('()', '')
    if not any(i==v for i in data for v in punctuation):
        print data 
```

但这会返回：

```
Traceback (most recent call last):
  File "parser.py", line 58, in <module>
    parsing_func(data)
  File "ex.py", line 8, in parsing_func
    punctuation = punctuation.replace('_', '')
UnboundLocalError: local variable 'punctuation' referenced before assignment 
```

所以，我做了一个测试功能来检查`punctuation`：

```
def test_func1():
    print type(punctuation), punctuation

>>> <type 'str'> !"#$%&'()*+,-./:;<=>?@[\]^_`{|}~ 
```

打印出来很好，没有错误，并显示`type str`. 最后，我尝试将`print`一个接一个的字符串操作放在一起。

```
def test_func2():
    print type(punctuation), punctuation
    punctuation = punctuation.replace('_', '') 
```

但现在该`print`语句返回错误：

```
Traceback (most recent call last):
  File "parser.py", line 9, in <module>
    test_func2()
  File "parser.py", line 5, in test_func2
    print type(punctuation), punctuation
UnboundLocalError: local variable 'punctuation' referenced before assignment 
```

这是一个`namespace`错误吗？为什么`test_func2`在打印而不是字符串操作时会返回错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:21:52.323

您在第二个函数中同时具有本地`punctuation`和全局`punctuation`。您可以重命名它：

```
def parsing_func(data):
    punct = punctuation.replace('_', '')
    punct = punctuation.replace('()', '')

    if not any(i == v for i in data for v in punct):
        print data 
```

或者`punctuation`明确地制作一个全局：

```
def parsing_func(data):
    global punctuation

    punctuation = punctuation.replace('_', '')
    punctuation = punctuation.replace('()', '')

    if not any(i==v for i in data for v in punctuation):
        print data 
```

请注意，这会`punctuation`全局修改，所以我不会这样做。

您也可以使用集合来执行此操作：

```
def has_punctuation(data):
    punct = set(punctuation) - set('_()')

    return punct & set(data)  # Intersection of the two sets 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T20:21:56.773

您在`punctuation`函数内部赋值，因此 Python 将其视为局部变量：因此它根本不使用全局名称。为作业使用不同的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T20:21:58.137

这里的问题是您试图分配一个全局名称 - `punctuation`，这是 Python 不允许的，因此它创建了一个局部变量`punctuation`。此时，它会尝试`punctuation`在右侧查找，并获取尚不存在的局部变量。

为了解决这个问题，您可以使用`global`修改全局变量（这是一个坏主意，可能不是您想要的），或者只是将其分配给本地名称。

```
def parsing_func(data):
    less_punctuation = punctuation.replace('_', '')
    less_punctuation = less_punctuation.replace('()', '')
    if not any(i in less_punctuation for i in data):
        print data 
```

还值得注意的是我使用`in`来检查成员资格 - 它更具可读性和更快。一般来说，成员资格测试在集合上更快，并且通过使用集合，我们还可以以更易读的方式删除值：

```
def parsing_func(data):
    less_punctuation = set(punctuation) - set("_()")
    if not any(i in less_punctuation for i in data):
        print data 
```

# android - 旋转到横向后的listview onclick

> ID：16124772
> 
> 赞同：2
> 
> 时间：2013-04-20T20:18:09.343
> 
> 标签：android, listview, landscape

当我将屏幕旋转到横向并且当我想从我的自定义列表视图中选择一个对象时是一个例外，但是当屏幕处于纵向时一切正常。

旋转到横向并单击列表视图项活动后会引发异常。

* * *

主要活动：

```
 WeatherAdapter adapter;
            ListView view;
            Button btn;
            /* Row item */
            View h;
            Setting set;

        TextView u,kz;
        RelativeLayout lay;

        Weather selected;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Log.d("onCreate()",(" "  + set.last).toString());
        btn = (Button) findViewById(R.id.gonext);
        btn.setOnClickListener(this);

        kz = (TextView) findViewById(R.id.textView1);

        view = new ListView(this);       

        adapter = new WeatherAdapter(this,
                R.layout.list_view_item_row, set.weather_data);

        view = (ListView) findViewById(R.id.listView1);
        /*
        View header = (View)getLayoutInflater().inflate(R.layout.list_view_header_row, null);
        view.addHeaderView(header);
       */
        view.setAdapter(adapter);

     view.setOnItemClickListener(this);
     //view.setOnItemSelectedListener(this);
       if(set.last != -1){
           View cc = view.getChildAt(set.last);
           Log.d("Choosed",("last = " + set.last).toString());
            RelativeLayout r = (RelativeLayout) cc.findViewById(R.id.ItemLayout);
            r.setBackgroundColor(Color.BLUE);
            r.refreshDrawableState();
       }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        if(v.getId() == R.id.gonext){

            selected = new Weather(set.weather_data[set.last]);

            Intent intent = new Intent(this,Choosed_Activity.class);
            intent.putExtra("selected_i", selected.icon);
            intent.putExtra("selected_t", selected.title);
            this.startActivity(intent);

        }
    }

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        // TODO Auto-generated method stub
        //h = (View) view.getChildAt((int) arg3);
        if(set.last != -1){
            h = (View) (view.getChildAt(set.last));
            u = (TextView) h.findViewById(R.id.txtTitle);
            lay = (RelativeLayout) h.findViewById(R.id.ItemLayout);
            lay.setBackgroundColor(Color.GRAY);
            u.setText("FAFAFAF");
            }
        //}
        h = (View) (view.getChildAt((int) arg3));
        u = (TextView) h.findViewById(R.id.txtTitle);
        lay = (RelativeLayout) h.findViewById(R.id.ItemLayout);
        lay.setBackgroundColor(Color.BLUE);
        u.setText(("siam " + arg2).toString());

        set.last = (int) arg3;

        if(set.last > -1)
            btn.setEnabled(true);
    } 
```

天气适配器：

```
public class WeatherAdapter extends ArrayAdapter<Weather>{

    Context context;
    int layoutResourceId;   
    Weather data[] = null;

    public WeatherAdapter(Context context, int layoutResourceId, Weather[] data) {
        super(context, layoutResourceId, data);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.data = data;
        Log.d("WEATHER ADAPETR","Constructor()");
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        WeatherHolder holder = null;

        if(row == null)
        {
            LayoutInflater inflater = ((Activity) context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new WeatherHolder();
            holder.imgIcon = (ImageView)row.findViewById(R.id.imageView1);
            holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);
            holder.rL = (RelativeLayout) row.findViewById(R.id.ItemLayout);

            row.setTag(holder);
        }
        else
        {
            holder = (WeatherHolder)row.getTag();
        }

        Weather weather = data[position];
        holder.txtTitle.setText(weather.title);
        holder.imgIcon.setImageResource(weather.icon);
        holder.rL.setBackgroundColor(Color.GRAY);

        return row;
    }

    static class WeatherHolder
    {
        ImageView imgIcon;
        TextView txtTitle;
        RelativeLayout rL;
    }
} 
```

天气：

```
public class Weather {
    public int icon;
    public String title;

    public Weather(){
        super();
    }
    public Weather(Weather w){
        this.icon = w.icon;
        this.title = w.title;
    }
    public Weather(int icon, String title) {
        super();
        this.icon = icon;
        this.title = title;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:22:39.027

我的猜测是，在旋转屏幕后重新创建活动（通常会发生）并单击 ListView 时，您尝试访问 Activity 中不再有效的对象。

# c# - 使用泛型类的类型参数的委托

> ID：16124782
> 
> 赞同：2
> 
> 时间：2013-04-20T20:19:31.780
> 
> 标签：c#, generics, delegates

```
 class Stack<T>
    {
        T[] items;
        int index;

        public delegate void StackDelegate(T[] items);

        internal static void DoWork(int[] items) { }
    }
    class TestStack
    {
        public static void TestSta()
        {
            Stack<float> s = new Stack<float>();
            Stack<int>.StackDelegate d = Stack<float>.DoWork;
        }

        static void Main()
        {
            TestSta();
        }
    }
} 
```

在上面的代码中，非泛型委托是在泛型类中定义的。非泛型委托使用包含类的类型参数。

引用委托时，我们需要使用定义委托类型的包含类名称和包含类的类型参数的类型参数来限定委托类型的名称，否则编译器将无法找到代表。

当我们使用类型参数引用 StackDelegate 委托时，是用于构造委托的类型参数吗？

```
 Stack<int>.StackDelegate d = Stack<float>.DoWork; 
```

在这种情况下，使用哪种类型来构造委托？`<int>`还是`<float>`？

此外，当引用嵌套类型（例如委托）时，是否会初始化一个类，如果是，如何初始化？下面的语句是否`Stack<int>.StackDelegate d`导致类 Stack 被`<int>`构造和初始化，然后该语句`Stack<float>.DoWork;`导致类 Stack 的另一个构造和初始化。意思是，在执行此语句后，我们是否会在运行时从泛型类堆栈中获得两个初始化类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:38:37.013

> 这是否意味着为了使用嵌套委托，它的包含类型必须被初始化（在这种情况下是泛型 Stack 类），而我们需要类型参数参数的原因是因为没有一个，包含泛型类将不会能够构造成一个具体的类，因此不能初始化？

不，包含类型 ( `Stack<T>`) 不需要初始化。如果您将静态构造函数添加到`Stack<T>`，那么您将看到它永远不会被您的示例调用。（它会在`d`被调用时被初始化）你应该知道实际上有无限多的嵌套类型，每个泛型参数类型一个`T`。类型`Stack<int>.StackDelegate`和`Stack<float>.StackDelegate`运行时完全不同。

> 这是有效的吗？如果不是，为什么？

是的，它是有效的，因为该方法与委托类型的返回类型和签名相匹配。委托类型`Stack<float>.StackDelegate`将 a`float[]`作为参数，因此与`Stack<float>.DoWork`. 如果你想要一个不同的类型参数，`StackDelegate`你必须像这样声明它：

`public delegate void StackDelegate<U>(U[] items);`

Now`Stack<int>.StackDelegate<int>`是与 不同的类型`Stack<float>.StackDelegate<int>`，但是这两种委托类型是兼容的，因为它们具有相同的签名和返回类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T20:23:45.427

“DoWork”的类型是`void DoWork(int[])`（它不使用`T`），所以它完全匹配w `StackDelegate`​​hen `T`is `int`。

您有可能希望声明`DoWork`依赖于`T`：

```
 internal static void DoWork(T[] items) { } 
```

在这种情况下，您将收到预期的编译时错误：

> 'DoWork' 没有重载匹配委托 'UserQuery.Stack.StackDelegate'

# git - Heroku 声称是最新的，但不显示文件

> ID：16124788
> 
> 赞同：0
> 
> 时间：2013-04-20T20:20:38.613
> 
> 标签：git, heroku

Git 说一切都是最新的，但我在本地看到的文件有所不同。我最近在 Heroku 上更新了我的应用程序的名称，并且相信我已经正确更新了远程 git 配置。

## 尝试推动：

```
$ git push -f staging
Everything up-to-date 
```

## `git config -l`：

```
remote.staging.url=git@heroku.com:s-si.git
remote.staging.fetch=+refs/heads/*:refs/remotes/staging/* 
```

## `ls`Heroku 文件：

```
heroku run bash -a s-si
Running `bash` attached to terminal... up, run.2567
~ $ ls apps/
application  boston  __init__.py  __init__.pyc  main  newyork  rampup  startup_institute 
```

## `ls`我的本地文件：

```
$ ls apps/
__init__.py       __init__.pyc      app_app           application       boston            newyork           payments          rampup            startup_institute 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:27:57.947

`remote.staging.push dev:staging`在我从命令行更新应用程序的名称后，Heroku 删除了我的 git 配置，遵循以下官方说明： [https ://devcenter.heroku.com/articles/renaming-apps](https://devcenter.heroku.com/articles/renaming-apps)

# android - 如何在 AS3 中使用 .txt 文件而不是 .dat 文件来测试 flash pro cs6 中 android 应用程序的空气

> ID：16124789
> 
> 赞同：0
> 
> 时间：2013-04-20T20:20:46.497
> 
> 标签：android, actionscript-3, adobe, flash-cs6

嗨，我希望我在 flash pro cs6 中使用 air for android 制作的应用程序从 .txt 文件而不是 .dat 文件中读取速度。

我如何着手更改下面在 Actionscript 3 中完成的代码以执行此操作，因为我希望更容易更改数字并测试速度计应用程序再次使用不同的速度信息工作。

您还可以让我知道如何将数字放入 .txt 文件中以供读取。

目前我只是使用手机中的 gps 二进制记录速度文件来测试它，但我无法更改这个 .dat 文件的值，所以我无法测试一些最高速度。

这是我将如何纠正以使用 txt 文件的代码：

```
package
{
import flash.events.EventDispatcher;
import flash.events.GeolocationEvent;
import flash.events.TimerEvent;
import flash.filesystem.File;
import flash.filesystem.FileMode;
import flash.filesystem.FileStream;
import flash.utils.Timer;

public class GeolocationSimulate
    extends EventDispatcher
    implements IGeolocation
{   
    static private const DEFAULT_DELAY :Number = 1000;
    static private const FILE          :String = "gps.dat";

    private var filestream :FileStream;
    private var timer      :Timer;

    public function GeolocationSimulate()
    {
        timer = new Timer( DEFAULT_DELAY );
        timer.addEventListener( TimerEvent.TIMER, handleTimer );
        timer.start();

        var file :File = File.userDirectory;
        file = file.resolvePath( FILE );            
        filestream = new FileStream();
        filestream.open( file, FileMode.READ );
    }

    public function setRequestedUpdateInterval( interval :Number ) :void
    {
        timer.delay = interval;
    }

    private function handleTimer( e :TimerEvent ) :void
    {
        if( filestream != null )
        {
            var speed :Number;

            if( filestream.bytesAvailable )
            {
                speed = filestream.readFloat();
            }
            else
            {
                filestream.position = 0;
                speed = filestream.readFloat();
            }

            dispatchEvent(
                new GeolocationEvent(
                    GeolocationEvent.UPDATE,
                    false,
                    false,
                    0,
                    0,
                    0,
                    0,
                    0,
                    speed,
                    0,
                    0
                )
            );
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:36:09.343

不确定这是否是您想要的，但您可以通过这种方式将文本写入文件：

```
 var file :File = File.userDirectory;
    file = file.resolvePath( FILE );            
    filestream = new FileStream();
    filestream.open( file, FileMode.WRITE); (or FileMode.APPEND if you want to add text to end of existing file)
    filestream.writeUTFBytes(yourTextHere);
    filestream.close(); 
```

# java - 在 WindowBuilder Pro 中滚动 JScrollBar

> ID：16124791
> 
> 赞同：1
> 
> 时间：2013-04-20T20:21:26.023
> 
> 标签：java, swing, jpanel, jscrollpane, windowbuilder

我正在`JDialog`使用`WindowBuilder`Pro for Eclipse 构建一个，并且我在其中放置了一个`JPanel`由 a 包围的`JScrollPane`，它允许我滚动浏览`JPanel`. 但是现在我想要做的是向它添加组件（例如`JTextFields`和`JLabels`），但我只能添加到超出此范围的部分是无法访问的`JPanel`......`JPanel`

有没有办法`JScrollPane`在 WindowBuilder 的设计视图中向下滚动，以便`JPanel`向上移动，以便我可以在其中放置要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T04:36:45.230

您应该能够将组件直接放置到设计选项卡的组件视图中，因此您应该能够以这种方式将 JTextFields 和 JLabels 添加到 JPanel

# c# - WCF 中的 get 方法返回 Null

> ID：16124793
> 
> 赞同：0
> 
> 时间：2013-04-20T20:21:30.423
> 
> 标签：c#, wcf

我创建了一个 wcf 库，并有 1 个主机和 2 个客户端连接到它。

在我的 WCF 中，我有代码存储从客户端 A 发送到 WCF 的消息：

```
 private string CustReady; //whether the customer is ready 
```

我有一个为此设置的方法，如下

```
 public string sendReady(string s_Ready)
    {   
        CustReady = s_Ready;
    }

    //gets state of customer (POS)
    public string getReady()
    {
        return CustReady;
    } 
```

客户端 A 使用 sendReady 方法并传入一个字符串，然后将其存储在 CustReady 中。在客户端 B 中，当单击按钮并检索保存在 CustReady 变量中的字符串时，会触发 getReady 方法。当我在我的 WCF 中围绕这两种方法设置断点时，客户端 A 正确存储了信息，但是当我按下客户端 B 上的按钮时，它返回 null。我想知道是否有人知道为什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T20:29:47.090

两个客户端使用主机的两个实例，因此它们不共享变量。您必须将变量设为静态或将服务器上的[ServiceBehivorAttribute的](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicebehaviorattribute.aspx)[InstanceContext设置为](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicebehaviorattribute.instancecontextmode.aspx)[InstanceContextMode.Single](http://msdn.microsoft.com/en-us/library/system.servicemodel.instancecontextmode.aspx)（如果未将 ConcurrencyMode 设置为 Multiple，则一次只能处理一个与服务的连接。）

```
 [ServiceBehavior(
    ConcurrencyMode=ConcurrencyMode.Multiple,
    InstanceContextMode=InstanceContextMode.Single
  )]
  public class BehaviorService : IBehaviorService
  {
     //Snip
  } 
```

# javascript - 将 jquery 变量定义为超出范围的函数

> ID：16124797
> 
> 赞同：0
> 
> 时间：2013-04-20T20:21:37.277
> 
> 标签：javascript, jquery, function, variables, scope

我正在尝试将参数（gmap_settings）传递给包含的外部 js 文件中的函数（初始化）。我的 php 文件看起来像这样：

```
<?php
$setting = array(
    'zoom' => 8
);

$json = json_encode($setting);
?>

<script type="text/javascript">
//<![CDATA[

jQuery(document).ready(function($) {
    var gmap_settings = $.parseJSON ('<?php echo $json; ?>');
--> google.maps.event.addDomListener(window, 'load', $(document).initialize(gmap_settings));
});

//]]>
</script> 
```

为简单起见，假设外部 js 文件如下所示：

```
(function($) {
    var initialize = function( data ) { alert(data); };
})( jQuery ); 
```

无论我尝试什么，我都无法弄清楚如何将 gmap_settings 传递给`initialize()`. 我`initialize()`在外部文件中尝试过功能：

```
$(document).initialize.gmap_settings
$(document).initialize({gmap_settings})
initialize(gmap_settings) 
```

我不明白我错过了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:25:44.460

你为什么认为这`$(document).initialize`会起作用？

您可以在外部 javascript 文件中实现模块模式并返回一个对象并在该对象上调用初始化

```
var YourModule = (function($) {
    return {
       initialize: function( data ) { alert(data)} 
    };
})( jQuery ); 
```

现在你有一个可以使用的变量

```
var newModule = Object.create(YourModule);
newModule.initialize('This will be alerted') 
```

# javascript - jQuery dataTables 表格工具不起作用

> ID：16124801
> 
> 赞同：1
> 
> 时间：2013-04-20T20:21:56.837
> 
> 标签：javascript, jquery, jquery-datatables, tabletools

我正在尝试使用具有以下配置的数据表工具。我看不到我在下面定义的表格工具按钮。我错过了什么吗？请告诉我。

var oTable = $('#dashboard').dataTable( { "bPaginate": true, "bLengthChange": false, "bFilter": true, "bSort": false, "bInfo": false, "bAutoWidth": false, “sPaginationType”：“bootstrap”，“aoColumnDefs”：colHeaders，

```
 "oTableTools": {
                    "aButtons": [
                        {
                            "sExtends": "copy",
                            "sButtonText": "Copy to clipboard"
                        },
                        {
                            "sExtends": "csv",
                            "sButtonText": "Save to CSV"
                        },
                        {
                            "sExtends": "xls",
                            "sButtonText": "Save for Excel"
                        }
                    ]
                }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-11T17:00:56.167

就像@Dylan Slabbinck 所说，您必须设置“sDom”参数，但您还必须在项目目录中设置“sSwfPath”。尽管这些更改与您显示的代码相结合，但可能还不够。我建议您初始化表格，不包括 TableTools 按钮部分，并在实例化后设置按钮及其配置。

```
"sDom": 'T<"clear">lfrtip' //inside your table configuration

TableTools.DEFAULTS.sSwfPath = "your path";
// mine was TableTools.DEFAULTS.sSwfPath = "<?php echo $this->basePath() ?>/swf/copy_csv_xls_pdf.swf";
TableTools.DEFAULTS.aButtons = ["xls", "copy", "csv"];
TableTools.BUTTONS.xls.sButtonText = "Save for Excel";
TableTools.BUTTONS.copy.sButtonText = "Copy to clipboard";
TableTools.BUTTONS.csv.sButtonText = "Save to CSV"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T14:48:56.760

设置 sDom 参数

像这样：

```
"sDom": 'T<"clear">lfrtip' 
```

更多信息： [http ://datatables.net/release-datatables/extras/TableTools/index.html](http://datatables.net/release-datatables/extras/TableTools/index.html)

# javascript - 为什么这个 IF 语句仍然触发？

> ID：16124805
> 
> 赞同：2
> 
> 时间：2013-04-20T20:22:01.107
> 
> 标签：javascript, jquery, if-statement, resize, window-resize

好的，Stackoverflow 的老用户，第一次提问。请记住，我主要是一个 CSS/HTML 人，只知道 jQuery 基础知识，所以要温柔！

为什么哦为什么这个`if`语句仍然触发，即使目标元素在 HTML 中不可用？请参阅[此示例](http://jsfiddle.net/n8nAq/)（查看控制台日志），当`.cta > .btn`页面上也没有时也会发生这种情况。要查找的部分是：

```
if ( $('.page-template') ) {

} 
```

这是供参考的[工作版本。](http://jsfiddle.net/dTKSY/)无论如何，这可能不会太慢​​加载，但我想限制在后台工作的内容，特别是`window resize`因为我听说它是​​一个资源猪（使用 Paul Irish 脚本）。

如果它像 PHP 一样，它根本不应该触发吗？

**更新**

因此，我偶然发现[`is()`](http://api.jquery.com/is/)which 与语句执行相同的工作，`if`但仅在类存在时才返回对象。所以下面作为例子：

```
$(function() {
  $('.nav-main .active.dropdown').is(
    function(){
  $(this).children('.dropdown-menu').removeClass('visuallyhidden')
  .parents('#menu-primary-navigation').addClass('dropdown-active');
  console.log('is fired');
}
  );
}); 
```

仅在`.nav-main .active.dropdown`可用时触发。所以我想（未经测试）以下也可以工作：

```
if ( $('something').is() ) { ... } 
```

**更新#02**

您还可以使用感叹号指定“不是” `!`，如下所示：

```
if ( !$('something') ) { ... } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T20:23:09.717

试试这个：

```
if ( $('.page-template').length ) {

} 
```

我相信只是做`$('.page-template')`仍然会返回一个对象，该对象的评估结果为真。如果要检查元素是否存在，则必须使用`length`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T20:25:31.353

`$('.page-template')`返回一个 jQuery 对象，并且对象在 Javascript 中是真实的，因此`if`始终输入该语句。

如果您想检查选择器匹配了多少元素，您可以访问`length`jQuery 对象的属性，`0`如果选择器不匹配任何内容，并且因为`0`它是虚假的，它将按照您期望的方式运行：

```
if ( $('.page-template').length ) 
```

# javascript - 当 Mocha 测试失败时，它将一个对象记录到控制台

> ID：16124807
> 
> 赞同：3
> 
> 时间：2013-04-20T20:22:12.857
> 
> 标签：javascript, node.js, bdd, mocha.js

当我所有的测试都通过时，一切都按预期工作。但是，当任何报告器处于活动状态时测试失败时，跑步者会打印一个代表轨迹轨迹的对象，而不是我在屏幕截图中看到的格式漂亮的错误消息

```
> mocha --reporter spec --ui bdd --ignore-leaks
Site Routes

GET /sites
  ✓ should return a 200 OK 
  ✓ should be a JSON response 
  ◦ should be an array: {
"date": "Fri Apr 19 2013 16:09:20 GMT-0400 (EDT)",
"process": {
  "pid": 34270,
  "uid": 1032026306,
  "gid": 116266774,
  "cwd": "/Users/squinn/Projects/armada",
  "execPath": "/usr/local/Cellar/node/0.10.4/bin/node",
  "version": "v0.10.4",
  "argv": [
    "node",
    "/Users/squinn/Projects/armada/node_modules/mocha/bin/_mocha",
    "--reporter",
    "spec",
    "--ui",
    "bdd",
    "--ignore-leaks"
  ],
  "memoryUsage": {
    "rss": 55717888,
    "heapTotal": 51000320,
    "heapUsed": 22281672
  }
},
"os": {
  "loadavg": [
    1.7001953125,
    1.66162109375,
    1.58984375
  ],
  "uptime": 374244
},
"trace": [
  {
    "column": 10,
    "file": "/Users/squinn/Projects/armada/node_modules/should/lib/should.js",
    "function": "Object.Assertion",
    "line": 368,
    "method": "Assertion",
    "native": false
  },
  {
    "column": 43,
    "file": "/Users/squinn/Projects/armada/test/route.sites.js",
    "function": "null.callback",
    "line": 47,
    "method": "callback",
    "native": false
  },
  {
    "column": 21,
    "file": "/Users/squinn/Projects/armada/node_modules/request/main.js",
    "function": "",
    "line": 290,
    "method": null,
    "native": false
  },
  {
    "column": 17,
    "file": "events.js",
    "function": "EventEmitter.emit",
    "line": 95,
    "method": "emit",
    "native": false
  },
  {
    "column": 54,
    "file": "/Users/squinn/Projects/armada/node_modules/request/main.js",
    "function": "",
    "line": 278,
    "method": null,
    "native": false
  },
  {
    "column": 20,
    "file": "events.js",
    "function": "IncomingMessage.EventEmitter.emit",
    "line": 117,
    "method": "EventEmitter.emit",
    "native": false
  },
  {
    "column": 14,
    "file": "_stream_readable.js",
    "function": null,
    "line": 883,
    "method": null,
    "native": false
  },
  {
    "column": 13,
    "file": "node.js",
    "function": "process._tickCallback",
    "line": 415,
    "method": "_tickCallback",
    "native": false
  }
],
"stack": [
  "AssertionError: expected [ { user: 'test',",
  "    group: 'group',",
  "    name: 'post-test',",
  "    domain: 'localhost:9000',",
  "    _id: '51718b214805d8fe83000003',",
  "    __v: 0,",
  "    modules: [],",
  "    labels: [ 'Test' ] } ] not to be an instance of Array: expected [ { user: 'test',",
  "    group: 'group',",
  "    name: 'post-test',",
  "    domain: 'localhost:9000',",
  "    _id: '51718b214805d8fe83000003',",
  "    __v: 0,",
  "    modules: [],",
  "    labels: [ 'Test' ] } ] not to be an instance of Array",
  "    at Object.Assertion (/Users/squinn/Projects/armada/node_modules/should/lib/should.js:368:10)",
  "    at null.callback (/Users/squinn/Projects/armada/test/route.sites.js:47:43)",
  "    at null.<anonymous> (/Users/squinn/Projects/armada/node_modules/request/main.js:290:21)",
  "    at EventEmitter.emit (events.js:95:17)",
  "    at IncomingMessage.<anonymous> (/Users/squinn/Projects/armada/node_modules/request/main.js:278:54)",
  "    at IncomingMessage.EventEmitter.emit (events.js:117:20)",
  "    at _stream_readable.js:883:14",
  "    at process._tickCallback (node.js:415:13)"
],
"level": "error",
"message": "uncaughtException"
}
npm ERR! Test failed.  See above for more details.
npm ERR! not ok code 0 
```

这是测试

```
describe('GET /sites', function (){

  var url = 'http://localhost:' + app.get('api').port + '/sites';

  it('should return a 200 OK', function (done){
    request(url, function (err, res){
      res.should.have.status(200);
      done();
    });
  });

  it('should be a JSON response', function (done){
    request(url, function (err, res, body){
      res.should.be.json;
      done();
    })
  });

  it('should be an array', function (done){
    request(url, function (err, res, body){
      JSON.parse(body).should.not.be.an.instanceOf(Array);
      done();
    });
  });

}); 
```

关于为什么我没有看到漂亮的景色的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:59:45.150

由于异步行为，该对象被记录到控制台。`should.js`正确抛出错误，但不作为`done()`回调的参数。我通过包装在 try/catch 语句中进行修复，以便可以将错误传递给`done()`.

```
it('should return a 200 OK', function (done){
  request(url, function (err, res){
    try {
      res.should.have.status(200);
    }
    catch (e){
      done(e);
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T01:18:01.630

您的使用`--ignore-leaks`表明您使用的是过时版本的摩卡咖啡。（后来改成了`--check-leaks`。）

使用`npm install -g mocha`.

此外，您似乎得到了 JSON 报告器。检查您是否有`test/mocha.opts`文件，但我不明白为什么它不会被您的命令行参数覆盖。

# java - 如何每隔一小时定期删除会话数据？

> ID：16124813
> 
> 赞同：7
> 
> 时间：2013-04-20T20:22:58.263
> 
> 标签：java, spring, jsp, session, quartz-scheduler

[出于此问题](https://stackoverflow.com/q/16114525/1391249)中提到的原因，我正在生成随机令牌，这些令牌放置在 a 中`java.util.List`，并且`List`保存在会话范围内。

经过一些谷歌搜索后，我决定每小时删除`List`会话中包含的所有元素（令牌）。

我可以考虑使用[Quartz](http://quartz-scheduler.org/overview/quick-start) API，但这样做似乎无法操纵用户的会话。我在 Spring 中使用 Quartz API（1.8.6、2.x 与我正在使用的 Spring 3.2 不兼容）尝试的内容如下所示。

```
package quartz;

import org.quartz.JobExecutionContext;
import org.quartz.JobExecutionException;
import org.springframework.scheduling.quartz.QuartzJobBean;

public final class RemoveTokens extends QuartzJobBean
{    
    @Override
    protected void executeInternal(JobExecutionContext context) throws JobExecutionException
    {
        System.out.println("QuartzJobBean executed.");
    }
} 
```

它在`application-context.xml`文件中配置如下。

```
<bean name="removeTokens" class="org.springframework.scheduling.quartz.JobDetailBean">
    <property name="jobClass" value="quartz.RemoveTokens" />
    <property name="jobDataAsMap">
        <map>
            <entry key="timeout" value="5" />
        </map>
    </property>
</bean>

<bean id="simpleTrigger" class="org.springframework.scheduling.quartz.SimpleTriggerFactoryBean">
      <property name="jobDetail" ref="removeTokens"/>
      <property name="startDelay" value="10000"/>
      <property name="repeatInterval" value="3600000"/>
</bean>

<bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
  <property name="triggers">
      <list>
          <ref bean="simpleTrigger" />
      </list>
  </property>
</bean> 
```

类中的重写方法`RemoveTokens`每小时执行一次，初始间隔为 10 秒，如 XML 中配置的那样，但无法执行某些类的某些方法来删除`List`存储在用户会话中的可用令牌。可能吗？

`List`以定义的时间间隔（每小时）将其删除存储在会话范围中的公平方法是什么？如果能通过使用这个 Quartz API 来实现，那就更好了。

* * *

**编辑：**

根据下面的答案，我尝试了以下方法，但不幸的是，它没有任何区别。

在`application-context.xml`文件中，

```
<task:annotation-driven executor="taskExecutor" scheduler="taskScheduler"/>
<task:executor id="taskExecutor" pool-size="5"/>
<task:scheduler id="taskScheduler" pool-size="10"/> 
```

这需要以下额外的命名空间，

```
xmlns:task="http://www.springframework.org/schema/task"
xsi:schemaLocation="http://www.springframework.org/schema/task
                    http://www.springframework.org/schema/task/spring-task-3.2.xsd" 
```

以下 bean 已注册为会话范围 bean。

```
package token;

import java.util.ArrayList;
import java.util.List;
import java.util.Random;
import org.apache.commons.lang.StringUtils;
import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Service;

@Service
//@Scope("session")
public final class SessionToken implements SessionTokenService
{
    private List<String> tokens;

    private static String nextToken()
    {
        long seed = System.currentTimeMillis(); 
        Random r = new Random();
        r.setSeed(seed);
        return Long.toString(seed) + Long.toString(Math.abs(r.nextLong()));
    }

    @Override
    public boolean isTokenValid(String token)
    {        
        return tokens==null||tokens.isEmpty()?false:tokens.contains(token);
    }

    @Override
    public String getLatestToken()
    {
        if(tokens==null)
        {
            tokens=new ArrayList<String>(0);
            tokens.add(nextToken());            
        }
        else
        {
            tokens.add(nextToken());
        }

        return tokens==null||tokens.isEmpty()?"":tokens.get(tokens.size()-1);
    }

    @Override
    public boolean unsetToken(String token)
    {                
        return !StringUtils.isNotBlank(token)||tokens==null||tokens.isEmpty()?false:tokens.remove(token);
    }

    @Override
    public void unsetAllTokens()
    {
        if(tokens!=null&&!tokens.isEmpty())
        {
            tokens.clear();
        }
    }
} 
```

以及它实现的接口，

```
package token;

import java.io.Serializable;

public interface SessionTokenService extends Serializable
{
    public boolean isTokenValid(String token);
    public String getLatestToken();
    public boolean unsetToken(String token);
    public void unsetAllTokens();
} 
```

这个bean在`application-context.xml`文件中配置如下。

```
<bean id="sessionTokenCleanerService" class="token.SessionToken" scope="session">
    <aop:scoped-proxy proxy-target-class="false"/>
</bean> 
```

现在，我在下面的课程中注入了这项服务。

```
package token;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.scheduling.annotation.Scheduled;
import org.springframework.stereotype.Service;

@Service
public final class PreventDuplicateSubmission
{    
    @Autowired
    private final SessionTokenService sessionTokenService=null;

    @Scheduled(fixedDelay=3600000)
    public void clearTokens()
    {
        System.out.println("Scheduled method called.");
        sessionTokenService.unsetAllTokens();            
    }
} 
```

在`application-context.xml`文件中，

```
<bean id="preventDuplicateSubmissionService" class="token.PreventDuplicateSubmission"/> 
```

上述两个 bean 都带有注释，`@Service`它们应该是文件的一部分`context:component-scan`（`dispatacher-servelt.xml`或任何名称）。

使用前面代码片段中的注释注释的方法以`@Scheduled`给定的速率定期调用，但它会导致以下明显的异常被抛出。

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'scopedTarget.sessionTokenCleanerService': Scope 'session' is not active for the current thread; consider defining a scoped proxy for this bean if you intend to refer to it from a singleton; nested exception is java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet/DispatcherPortlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:343)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.aop.target.SimpleBeanTargetSource.getTarget(SimpleBeanTargetSource.java:33)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:184)
    at $Proxy79.unsetAllTokens(Unknown Source)
    at token.PreventDuplicateSubmission.clearTokens(PreventDuplicateSubmission.java:102)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:64)
    at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:53)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:351)
    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:178)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:178)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet/DispatcherPortlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.
    at org.springframework.web.context.request.RequestContextHolder.currentRequestAttributes(RequestContextHolder.java:131)
    at org.springframework.web.context.request.SessionScope.get(SessionScope.java:90)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:329)
    ... 19 more 
```

要清除存储在用户会话中的数据，应在**每个用户会话**的定义时间间隔内定期调用执行此任务的方法，但本次尝试并非如此。方法是什么？问题可能很简单：如何从每个用户的会话中触发一个固定的时间间隔？Spring 或 Servlet API 是否支持完成此任务？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T06:02:33.143

## 注释

恭喜您使用令牌来防止重新提交（“引入同步令牌”重构自 Core J2EE 模式一书）。:^)

Quartz 对于复杂或精确的调度很有价值。但是您的要求不需要 Quartz。学习 CDI、java.util.Timer、ScheduledExecutor 和/或 EJB 计时器可能更有用。

如果使用调度程序，正如您所提到的，最好让所有用户共享一个单例调度程序，而不是每个用户会话都有一个调度程序和线程实例。

如果您曾经存储对 HttpSession 的引用或将其作为参数传递，请小心。当会话完成时，存储引用可以防止垃圾收集 - 导致（大？）内存泄漏。尝试使用 HttpSessionListener 和其他技巧清理引用可能无法正常工作并且很混乱。将 HttpSession 作为参数传递给方法会使它们人为地依赖 Servlet 容器并且难以进行单元测试，因为您必须模拟复杂的 HttpSession 对象。将所有会话数据包装在单个对象 UserSessionState 中会更干净 - 将*对此*的引用存储在会话和对象实例变量中。这也称为上下文对象模式——即将所有范围数据存储在一个/几个 POJO 上下文对象中，独立于 HTTP 协议类。

## 回答

我建议您的问题有两种替代解决方案：

1.  使用`java.util.Timer`单例实例

    您可以将`java.util.Timer`（Java SE 1.3 中引入）替换为`ScheduledExecutor`（Java SE 5 中引入）以获得几乎相同的解决方案。

    这在 JVM 中可用。它不需要 jar 设置和配置。你调用`timerTask.schedule`，传入一个`TimerTask`实例。当计划到期时，`timerTask.run`被调用。您通过删除计划任务`timerTask.cancel`并`timerTask.purge`释放已使用的内存。

    您对 , 包括它的构造函数进行编码`TimerTask`，然后创建一个新实例并将其传递给 schedule 方法，这意味着您可以在`TimerTask`;中存储您需要的任何数据或对象引用。您可以保留对它的引用并在以后随时调用 setter 方法。

    我建议你创建两个全局单例：一个`Timer`实例和一个`TimerTask`实例。在您的自定义`TimerTask`实例中，保留所有用户会话的列表（以 POJO 形式`UserSessionState`或 Spring/CDI bean 形式，而不是 形式`HttpSession`）。向该类添加两个方法：`addSessionObject`和`removeSessionObject`，带有`UserSessionState`或类似的参数。在该`TimerTask.run`方法中，遍历集合`UserSessionState`并清除数据。

    创建自定义 HttpSessionListener - 从 sessionCreated 中，将新的 UserSessionState 实例放入会话中并调用 TimerTask.addUserSession；从 sessionDestroyed 调用 TimerTask.removeUserSession。

    调用全局范围的单例`timer.schedule`来调度 TimerTask 实例以清除会话范围引用的内容。

2.  使用具有上限大小的令牌列表（无清理）

    不要根据经过的时间清理令牌。而是限制列表大小（例如 25 个标记）并存储最近生成的标记。

    这可能是最简单的解决方案。当您将元素添加到列表时，请检查您是否超过了最大大小，如果是，则从列表中最早的索引开始插入：

    ```
    if (++putIndex > maxSize) {
        putIndex = 0;
    }
    list.put(putIndex, newElement); 
    ```

    这里不需要调度程序，也不需要形成和维护一组所有用户会话。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T09:50:26.873

我的想法是这样的：

**精简版：**

1.  将任务间隔更改为 1 分钟；
2.  add`unsetAllTokensIfNeeded`方法`SessionTokenService`将每分钟调用一次，但如果确实需要它只会清理令牌列表（在这种情况下，决定是根据时间完成的）。

**详细版本：**

您的计划任务将每分钟运行一次，`unsetAllTokensIfNeeded`调用`SessionToken`. 该方法实现将检查最后一次令牌列表是干净的，`unsetAllTokens`如果是一小时前就调用。

但是为了在每个单独的会话范围内调用它，`SessionTokenService`您将需要现有`SessionTokenService`s 的列表，这可以通过在创建时将其注册到将清理它的服务来实现（这里您将使用 a`WeakHashMap`来避免硬引用，这将避免被垃圾收集器收集的对象）。

实现将是这样的：

**会话令牌：**

界面：

```
public interface SessionTokenService extends Serializable {
    public boolean isTokenValid(String token);
    public String getLatestToken();
    public boolean unsetToken(String token);
    public void unsetAllTokens();
    public boolean unsetAllTokensIfNeeded();
} 
```

执行：

```
@Service
@Scope("session")
public final class SessionToken implements SessionTokenService, DisposableBean, InitializingBean {

    private List<String> tokens;
    private Date lastCleanup = new Date();

// EDIT {{{

    @Autowired
    private SessionTokenFlusherService flusherService;

    public void afterPropertiesSet() {
        flusherService.register(this);
    }

    public void destroy() {
        flusherService.unregister(this);
    }

// }}}

    private static String nextToken() {
        long seed = System.currentTimeMillis(); 
        Random r = new Random();
        r.setSeed(seed);
        return Long.toString(seed) + Long.toString(Math.abs(r.nextLong()));
    }

    @Override
    public boolean isTokenValid(String token) {        
        return tokens == null || tokens.isEmpty() ? false : tokens.contains(token);
    }

    @Override
    public String getLatestToken() {
        if(tokens==null) {
            tokens=new ArrayList<String>(0);
        }
        tokens.add(nextToken());            

        return tokens.isEmpty() ? "" : tokens.get(tokens.size()-1);
    }

    @Override
    public boolean unsetToken(String token) {                
        return !StringUtils.isNotBlank(token) || tokens==null || tokens.isEmpty() ? false : tokens.remove(token);
    }

    @Override
    public void unsetAllTokens() {
        if(tokens!=null&&!tokens.isEmpty()) {
            tokens.clear();
            lastCleanup = new Date();
        }
    }

    @Override
    public void unsetAllTokensIfNeeded() {
        if (lastCleanup.getTime() < new Date().getTime() - 3600000) {
           unsetAllTokens();
        }
    }

} 
```

会话令牌刷新器：

界面：

```
public interface SessionTokenFlusherService {
    public void register(SessionToken sessionToken);
    public void unregister(SessionToken sessionToken);
} 
```

执行：

```
@Service
public class DefaultSessionTokenFlusherService implements SessionTokenFlusherService {

    private Map<SessionToken,Object> sessionTokens = new WeakHashMap<SessionToken,Object>();

    public void register(SessionToken sessionToken) {
        sessionToken.put(sessionToken, new Object());
    }

    public void unregister(SessionToken sessionToken) {
        sessionToken.remove(sessionToken);
    }

    @Scheduled(fixedDelay=60000) // each minute
    public void execute() {
        for (Entry<SessionToken, Object> e : sessionToken.entrySet()) {
            e.getKey().unsetAllTokensIfNeeded();
        }
    }

} 
```

在这种情况下，您将使用 Spring 的注释驱动任务功能：

```
<task:annotation-driven executor="taskExecutor" scheduler="taskScheduler"/>
<task:scheduler id="taskScheduler" pool-size="10"/> 
```

从我的角度来看，这将是一个简单而好的解决方案。

**编辑**

使用这种方法，您或多或少`SessionToken`地`Flusher`在 spring 结束 bean 配置时注册并在 spring 销毁 bean 时将其删除，这是在会话终止时完成的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T10:41:34.807

我认为这应该简单得多。

**关于同步器令牌实现**

1.  同步器令牌模式中的令牌并不意味着可重用。令牌仅对一次提交有效。不多不少。

2.  在任何给定时间点，您都应该只为会话保存一个令牌。

3.  当向用户显示表单时，令牌应作为隐藏的表单元素包含在表单中。

4.  提交时，您所要做的就是检查表单中的令牌和会话是否匹配。如果他们这样做，允许表单提交，并在会话中重置令牌的值。

5.  现在，如果用户重新提交相同的表单，（使用旧令牌）令牌将不匹配，您可以检测到重复提交或过时提交

6.  另一方面，如果用户重新加载表单本身，更新的令牌现在将出现在隐藏的表单元素中。

结论 - 无需为用户保存令牌列表。每个会话一个令牌正是需要的。这种模式被广泛用作防止 CSRF 攻击的安全措施。页面上的每个链接只能调用一次。即便如此，每个会话只需一个令牌即可完成。作为参考，您可以查看 CSRF Guard V3 的工作原理[https://www.owasp.org/index.php/Category:OWASP_CSRFGuard_Project#Source_Code](https://www.owasp.org/index.php/Category:OWASP_CSRFGuard_Project#Source_Code)

**关于会话**

1.  只有当执行线程以某种方式与 http 请求/响应对绑定时，会话对象才有意义。或者简单地说，只要用户正在浏览您的网站。

2.  一旦用户离开，会话（来自 JVM）也会离开。所以你不能使用计时器来重置它

3.  会话由服务器序列化，以确保当用户重新访问您的站点时它们可以活跃起来（jsessionid 用于标识哪个会话应该为哪个浏览器会话反序列化）

4.  会话有一个超时，如果超时，当用户重新访问时，服务器会启动一个新的会话。

结论 - 没有合理的理由必须定期刷新用户的会话 - 也没有办法做到这一点。

如果我误解了什么，请告诉我，我希望这会有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-21T10:32:28.503

我对石英不太了解，但这就是我在你的情况下会做的事情：Spring 3.2，对吧？在您的应用程序上下文中：

```
<task:annotation-driven executor="taskExecutor" scheduler="taskScheduler"/>
<task:scheduler id="taskScheduler" pool-size="10"/> 
```

您将需要任务命名空间...

在某些类中（例如 SessionCleaner.java）：

```
 @Scheduled(fixedRate=3600000)
    public void clearSession(){
         //clear the session    
    } 
```

我要做的是将会话数据用作由 Spring 管理的会话范围 bean：

```
<bean id="mySessionData" class="MySessionDataBean" scope="session">
</bean> 
```

然后将其注入我需要的地方。然后氏族将看起来像这样。

```
class SessionCleaner{
        @Autowired
        private MySessionDataBean sessionData;

        @Scheduled(fixedRate=3600000)
        public void clearSession(){
            sessionData.getList().clear();//something like that    
        }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-29T06:11:07.087

我对石英不太了解。但是，看到你的例外，我猜想调度是异步通信的一部分。所以多线程和事件驱动模型被用来实现它。因此，在您的情况下，您正在尝试创建一个 bean preventDuplicateSubmissionService 。容器将 bean 创建为对象的一部分。但是当您访问它时，Quartz 作为异步调度的一部分创建的线程正在尝试获取服务。但是，对于那个线程，bean 没有被实例化。可能是你正在使用 scope="request"> 。所以当范围是每个 http 请求的请求时，它的对象被创建。在你的情况下，当你尝试访问 bean 时，bean 请求没有创建作用域，因为 bean 的访问是在非 http 模式下进行的，所以当线程尝试访问服务时会抛出异常。当我尝试在 serviceImpl 中使用多线程访问 bean 时，我也遇到了同样的问题。在我的例子中，没有创建请求范围的 bean，因为它是为每个 http 请求模式创建的。我实现了这里给出的解决方案，它对我有用。 [在 Threads 中访问作用域代理 bean](https://stackoverflow.com/questions/1528444/accessing-scoped-proxy-beans-within-threads-of)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-29T14:02:42.240

您设置的令牌移除器定期作业似乎没有在特定用户会话的上下文中运行 - 也不是所有用户会话。

我不确定您是否有任何机制可以扫描所有活动会话并对其进行修改，但是我建议的替代方法是：

在服务器端存储一对带有时间戳的唯一令牌。仅在您呈现表单时将令牌发送给用户（从不发送时间戳）。提交表单时，查找生成该令牌的时间——如果它超过了超时值，则拒绝它。

这样，您甚至不需要计时器来删除所有令牌。使用计时器也会删除新创建的令牌

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-29T15:40:11.277

在原始问题方法（按照 shcedule 正确运行）中，使用以下代码...

```
package quartz;

import org.quartz.JobExecutionContext;
import org.quartz.JobExecutionException;
import org.springframework.scheduling.quartz.QuartzJobBean;

public final class RemoveTokens extends QuartzJobBean implements javax.sevlet.http.HttpSessionListener {

    static java.util.Map<String, HttpSession> httpSessionMap = new HashMap<String, HttpSession>();

    void sessionCreated(HttpSessionEvent se) {
        HttpSession ss = se.getSession();
        httpSessionMap.put(ss.getId(), ss);
    }

    void sessionDestroyed(HttpSessionEvent se) {
        HttpSession ss = se.getSession();
        httpSessionMap.remove(ss.getId());
    }

    @Override
    protected void executeInternal(JobExecutionContext context) throws JobExecutionException {
        Set<String> keys = httpSessionMap.keySet();

        for (String key : keys) {
            HttpSession ss = httpSessionMap.get(key);
            Long date = (Long) ss.getAttribute("time");

            if (date == null) {
                date = ss.getCreationTime();
            }

            long curenttime = System.currentTimeMillis();
            long difference = curenttime - date;

            if (difference > (60 * 60 * 1000)) {
                /*Greater than 1 hour*/
                List l = ss.getAttribute("YourList");
                l.removeAll(l);
                ss.setAttribute("time", curenttime);
            }
        }
    }
} 
```

# python - Python 类对象错误

> ID：16124819
> 
> 赞同：1
> 
> 时间：2013-04-20T20:23:30.190
> 
> 标签：python, class, object, sprite, pong

我正在尝试为班级制作一个“疯狂的乒乓球”游戏。要求是在反弹后复制球。此版本还要求有 3 种类型的球，一种是常规的缩小桨叶的球，另一种是使桨叶变大的球。到目前为止，我的代码是：

```
from livewires import games, color, random
import decimal

games.init(screen_width = 640, screen_height = 480, fps = 50)

score = games.Text(value = 0, size = 25, color = color.black,
                                top = 460, right = games.screen.width - 10)
games.screen.add(score)

class Paddle(games.Sprite):
    """
    A paddle controlled by player to catch falling pizzas.
    """
    SMALL = 1
    MEDIUM = 2
    LARGE = 3
    images = {SMALL  : games.load_image("paddle.bmp"),
              MEDIUM : games.load_image("paddlemid.bmp"),
              LARGE  : games.load_image("paddleBig.bmp") }

    def __init__(self, size):
        """ Initialize Paddle object. """
        super(Paddle, self).__init__(image = Paddle.images[size],
                                  y = games.mouse.y,
                                  bottom = games.screen.width)

        self.size = size

    def update(self):
        """ Move to mouse x position. """
        self.y = games.mouse.y

        if self.top < 0:
            self.top = 0

        if self.bottom > games.screen.height:
            self.bottom = games.screen.height

        self.check_catch()
        self.check_catch_grow()

    def check_catch(self):
        """ Check if ball bounces """

        for BouncingBall in self.overlapping_sprites:
            BouncingBall.handle_bounce()
    def check_catch_grow(self):
        """ Check if ball bounces """

        for GrowBall in self.overlapping_sprites:
            self.destroy()

            new_paddle = Paddle(3)
            games.screen.add(new_paddle)
            GrowBall.handle_bounce()

    def check_catch_shrink(self):
        """ Check if ball bounces """

        for ShrinkBall in self.overlapping_sprites:
            self.destroy()
            ShrinkBall.handle_bounce()

class BouncingBall(games.Sprite):
    """
    A ball that bounces around the screen and duplicates on paddle bounce.
    """ 
    image = games.load_image("bouncingBall.bmp")
    speed = 1

    def __init__(self, x, y, dx, dy):
        """ Initialize a ball object. """
        super(BouncingBall, self).__init__(image = BouncingBall.image,
                                    x = x, y = y,dx = decimal.Decimal(random.randrange(50,300))/100 , dy = decimal.Decimal(random.randrange(1, 3)))

    def update(self):
        """ Check if bottom edge has reached screen bottom. """
##        if self.right > games.screen.height or self.left < 0:
##            self.dx = -self.dx

        if self.bottom > games.screen.height or self.top < 0:
            self.dy = -self.dy

        if self.right > games.screen.width:
            self.dx = -self.dx
        if self.left < 0:
            self.destroy()
            self.end_game()

    def handle_bounce(self):
        global score

        self.destroy()
        new_ball = BouncingBall(x = self.x + 1, y = self.y, dx = -self.dx, dy = self.dy)
        dup_ball = BouncingBall(x = self.x + 1, y = self.y, dx = random.randrange(1,3), dy = random.randrange(1,3))
        score.value += 10
        score.right = games.screen.width - 10

        # self.dx = -self.dx
##        self.dy = -self.dy

        games.screen.add(new_ball)
        games.screen.add(dup_ball)

    def end_game(self):
        """ End the game. """

        end_message = games.Message(value = "Game Over",
                                    size = 90,
                                    color = color.red,
                                    x = games.screen.width/2,
                                    y = games.screen.height/2,
                                    lifetime = 5 * games.screen.fps,
                                    after_death = games.screen.quit)
        games.screen.add(end_message)

class ShrinkBall(games.Sprite):
    """
    A ball that bounces around the screen and duplicates on paddle bounce.
    Makes Paddle Small
    """ 
    image = games.load_image("shrinkBall.bmp")
    speed = 1

    def __init__(self, x, y, dx, dy):
        """ Initialize a ball object. """
        super(BouncingBall, self).__init__(image = BouncingBall.image,
                                    x = x, y = y,dx = decimal.Decimal(random.randrange(50,300))/100 , dy = decimal.Decimal(random.randrange(1, 3)))

    def update(self):
        """ Check if bottom edge has reached screen bottom. """
##        if self.right > games.screen.height or self.left < 0:
##            self.dx = -self.dx

        if self.bottom > games.screen.height or self.top < 0:
            self.dy = -self.dy

        if self.right > games.screen.width:
            self.dx = -self.dx
        if self.left < 0:
            self.destroy()
            self.end_game()

    def handle_bounce(self):
        global score
        new_paddle = Paddle(1)
        games.screen.add(new_paddle)
        self.destroy()
        new_ball = ShrinkBall(x = self.x + 1, y = self.y, dx = -self.dx, dy = self.dy)
        dup_ball = BouncingBall(x = self.x + 1, y = self.y, dx = random.randrange(1,3), dy = random.randrange(1,3))
        score.value += 10
        score.right = games.screen.width - 10

        # self.dx = -self.dx
##        self.dy = -self.dy

        games.screen.add(new_ball)
        games.screen.add(dup_ball)

    def end_game(self):
        """ End the game. """

        end_message = games.Message(value = "Game Over",
                                    size = 90,
                                    color = color.red,
                                    x = games.screen.width/2,
                                    y = games.screen.height/2,
                                    lifetime = 5 * games.screen.fps,
                                    after_death = games.screen.quit)
        games.screen.add(end_message)

class GrowBall(games.Sprite):
    """
    A ball that bounces around the screen and duplicates on paddle bounce.
    Makes paddle larger
    """ 
    image = games.load_image("growBall.bmp")
    speed = 1

    def __init__(self, x, y, dx, dy):
        """ Initialize a ball object. """
        super(GrowBall, self).__init__(image = GrowBall.image,
                                    x = x, y = y,dx = decimal.Decimal(random.randrange(50,300))/100 , dy = decimal.Decimal(random.randrange(1, 3)))

    def update(self):
        """ Check if bottom edge has reached screen bottom. """
##        if self.right > games.screen.height or self.left < 0:
##            self.dx = -self.dx

        if self.bottom > games.screen.height or self.top < 0:
            self.dy = -self.dy

        if self.right > games.screen.width:
            self.dx = -self.dx
        if self.left < 0:
            self.destroy()
            self.end_game()

    def handle_bounce(self):
        global score

        self.destroy()
        new_ball = GrowBall(x = self.x + 1, y = self.y, dx = -self.dx, dy = self.dy)
        dup_ball = BouncingBall(x = self.x + 1, y = self.y, dx = random.randrange(1,3), dy = random.randrange(1,3))
        score.value += 10
        score.right = games.screen.width - 10

        # self.dx = -self.dx
##        self.dy = -self.dy

        games.screen.add(new_ball)
        games.screen.add(dup_ball)

    def end_game(self):
        """ End the game. """

        end_message = games.Message(value = "Game Over",
                                    size = 90,
                                    color = color.red,
                                    x = games.screen.width/2,
                                    y = games.screen.height/2,
                                    lifetime = 5 * games.screen.fps,
                                    after_death = games.screen.quit)
        games.screen.add(end_message)

def main():
    wall_image = games.load_image("background.bmp", transparent = False)
    games.screen.background = wall_image

    the_ball = GrowBall(x = 400, y = 200, dx = 1, dy = 1)
    games.screen.add(the_ball)

    the_paddle = Paddle(2)
    games.screen.add(the_paddle)

    games.mouse.is_visible = False

    games.screen.event_grab = True
    games.screen.mainloop()

main() 
```

我尝试在课堂上寻求帮助，但没有收到任何回复。我知道我的代码很乱，而且我确信它有很多冗余。当我运行程序时，我遇到了一个错误：

```
Traceback (most recent call last):
  File "C:\crazypong 2.0.py", line 257, in <module>
    main()
  File "C:\crazypong 2.0.py", line 255, in main
    games.screen.mainloop()
  File "C:\Python27\lib\site-packages\livewires\games.py", line 307, in mainloop
    object._tick()
  File "C:\Python27\lib\site-packages\livewires\games.py", line 504, in _tick
    self.update()
  File "C:\crazypong 2.0.py", line 44, in update
    self.check_catch()
  File "C:\crazypong 2.0.py", line 51, in check_catch
    BouncingBall.handle_bounce()
AttributeError: 'Paddle' object has no attribute 'handle_bounce' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:28:25.790

我无法找到`livewires`您正在使用的确切模块，但它似乎`self.overlapping_sprites` *包含*精灵列表中的`Paddle`实例。您可以通过测试来忽略它`self`：

```
for BouncingBall in self.overlapping_sprites:
    if isinstance(BouncingBall, Paddle): continue
    BouncingBall.handle_bounce() 
```

如果这不起作用，那么该列表中不仅列出了当前的桨；您需要`livewires`为我分享相关的模块代码，以便更详细地确定这一点。

# ios - iOS：了解如何正确监控区域

> ID：16124820
> 
> 赞同：1
> 
> 时间：2013-04-20T20:23:38.690
> 
> 标签：ios, objective-c, mkmapview

我希望我的应用程序显示`MKMapView`他/她的位置和一些圆形区域。当用户进入或离开某些区域时，应用程序必须警告用户。

`MKMapView`我发现我可以通过简单地向用户展示`mapView.showUsersLocation = YES`，而且我也知道我必须这样做的事实`startMonitoringForRegion`。

`startUpdatingLocation`如果我已经在监控区域，我是否需要打电话？当应用程序在后台运行时呢？GPS 是始终开启还是已优化以使用较少电池密集型的方法（相当于 的区域`startMonitoringSignificantLocationChanges`）？

另外，我应该在什么时候开始区域监控，它会自动停止吗？任何关于如何以最佳方式进行区域监控的指针将不胜感激。

# javascript - 如何使用 jquery 将字符串转换为 HTMLElement？

> ID：16124821
> 
> 赞同：0
> 
> 时间：2013-04-20T20:23:45.240
> 
> 标签：javascript, jquery, dom, type-conversion

我想知道如何将字符串转换为 HTMLElement ？

我试过了：

```
$('<i data-icon="'+icon+'" class="smiley-big"></i>') 
```

但在控制台中它显示类型：[object Object] 如果我在 Dom 中记录现有的元素，如下所示：

```
$('[class^="smiley"]').each(function(){
     console.log(this);
}); 
```

我得到 [对象 HTMLElement]

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:25:42.573

因为 jQuery 对象是一个类似数组的对象，其中包含所有选定的元素。在这种情况下，它只包含一个元素，那就是您刚刚创建的那个。因此，我们可以通过索引 0 访问它：

```
var newI = $('<i data-icon="'+icon+'" class="smiley-big"></i>')[0]; 
```

在 的情况下`each`，它遍历对象并返回`this`函数中的每个项目，在您的情况下，它是您新创建的 HTML 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T20:26:34.233

```
$('<i data-icon="'+icon+'" class="smiley-big"></i>').get(0) 
```

# c++ - 在 C++ 中转储局部变量

> ID：16124823
> 
> 赞同：0
> 
> 时间：2013-04-20T20:23:58.600
> 
> 标签：c++, matlab, debugging

我想编写一个函数来查找所有局部变量并将它们保存到磁盘。稍后，我想加载这些变量和保存变量的调用/调试函数。目标是加快对我代码深处的函数的调试。

我在 Matlab 中使用了类似的技术，它允许保存整个工作区，然后加载它并继续。我可以在 C++ 中使用类似/相关的技术吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T20:26:19.267

您正在寻找[反射器](http://en.wikipedia.org/wiki/Reflection_%28computer_programming%29)机制。

在 C++ 中没有任何反射器工具来枚举变量，所以你不能像 Matlab 那样做。

您应该在代码中手动创建数据结构并添加变量。然后做任何你想做的事。

在实践中，程序员将使用以下步骤：

保存：

*   打开一个文件
*   将变量1、变量2、...的值写入文件
*   关闭文件

装载：

*   打开文件
*   从文件中读取 variable1, variable2, ... 并将它们存储到相应的变量中
*   关闭文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T21:03:38.503

通话记录呢？寄存器中的值呢？你想在函数的第一行还是其他行继续。

您可以尝试编写堆栈，但这仅在没有变量具有构造函数或指向 malloc 内存的指针时才有效。

您可以使用 setjmp() 来获取寄存器中的所有值，并使用 longjmp() 来恢复它们。

如果您使用的是 Windows，则可以查看 DbgHelp API。它可能有一种枚举所有局部变量的方法。

# opengl - 组成 ADS (Phong/Gourang) 组件

> ID：16124824
> 
> 赞同：0
> 
> 时间：2013-04-20T20:24:01.593
> 
> 标签：opengl, glsl, phong, gouraud

我有下面的 Phong 光照模型的基本着色器代码。我已经测试了漫反射、环境光和镜面光，它们产生了正确的结果。当谈到在最后一行中组合它们时，我不断得到一种看起来像环境照明的效果。有人知道它有什么问题吗？

```
//translate the normals to be in sync with any tranlations applied to the model
vec3 tnormal = normalize(vec3(viewMatrix * modelMatrix * vec4(normal,0.0)));    
vec3 tVertex = vec3(viewMatrix * modelMatrix * vec4(position, 1.0));

// Ambient = La * Ka
vec3 ambience = La * theMaterial.ka;

//Diffuse = Ld * Kd * dot(s, n)
vec3 s = normalize(vec3(myLight.position - tVertex));
vec3 diffuse = myLight.Ld * theMaterial.kd * max(dot(s, tnormal), 0.0);

//Specular = Ls * ks * dot(r,n)^f
//r is the reflection of -lightposition,  r = -s + 2 * dot(s,n) * n 
vec3 r = normalize(reflect(-myLight.position, tnormal));
vec3 v = normalize(-tVertex.xyz);
vec3 specularity = myLight.Ls * theMaterial.ks * pow(dot(v, r), theMaterial.f);

//(ABS) Intensity = Ia * Id * Is
LightIntensity = ambience * diffuse * specularity; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:30:06.883

我是个白痴。我的笔记错误地指出强度应该是分量的乘积，而实际上它是总和。

# perl - 在 Perl 中启动参数/标志/命令行选项/开关

> ID：16124825
> 
> 赞同：0
> 
> 时间：2013-04-20T20:24:10.070
> 
> 标签：perl, parameters, switch-statement, command-line-arguments, flags

如您所见，我不完全确定它们的实际名称是什么。我说的是当我启动文件时，例如`client.pl`. 我通常会通过输入`perl client.pl`终端来启动它。

我想要做的是能够调用`perl client.pl -e`，并且这会将特定的布尔值设置为true。比如，“如果`-e`被用来启动这个文件，`$b = true;`”。否则，这将是错误的。

我已经阅读了一些关于`#!/usr/bin/perl`通常位于顶部的行的内容，但我似乎无法理解这是否与我正在尝试做的事情有关..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:22:26.547

命令行参数存储在`@ARGV`数组中。如果您只想测试第一个参数是否等于`'-e'`，您可以这样做：

```
$b = $ARGV[0] eq '-e'; 
```

否则，请查看 getopt，请参见此处：[http](http://www.perlmonks.org/?node_id=88222) ://www.perlmonks.org/?node_id=88222 。

# ruby-on-rails - Rails - 在同一控制器中为不同类型的模型使用“创建”

> ID：16124831
> 
> 赞同：0
> 
> 时间：2013-04-20T20:25:09.363
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller

这是我的用例，以项目符号表示，因此它很好且易于理解：

*   管理员用户被植入，类型为用户并被赋予“管理员”角色。
*   该管理员用户可以注册新学生和新教师，两者都是模型。
*   管理员用户进入新用户注册页面（我`Devise`主要使用 gem 模板。）
*   使用单选框选择新用户的类型，学生或教师。
*   在`Submit`上，当然是`Users`这里使用的控制器，因为 Admin 是 User 类型。
*   但在这里，我不想使用用户控制器`create`方法。我想要`create`一个新的学生或教师模型。他们都有自己的控制器，有自己的`create`方法，但是我如何从用户控制器中调用它们呢？或者，如果这是不好的做法，我想更普遍的问题是我如何创建这些新模型之一而不是用户模型？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T21:07:32.490

如果我正确理解了您的问题，您可以从您的单选框中检查您的参数以了解新用户的类型，然后只需调用一些私有方法并将参数传递给，这将根据参数创建新资源。

例如

假设您的 params 键中的名称为`entity`. 你确实在`create#users`

```
def create
  if create_new_resource(params)
    redirect_to some_path
   else
    render 'new'
  end
end

private

def create_new_resource(params)
   "#{params[:entity].create(params)}" 
end 
```

只是作为一个开始版本。你也必须做一些改变

# vb.net - 跨线程操作无效

> ID：16124839
> 
> 赞同：1
> 
> 时间：2013-04-20T20:25:54.717
> 
> 标签：vb.net, multithreading, serial-port

我对一个非常简单的代码有疑问

```
Dim temperature As String = SerialPort1.ReadLine.ToString

        If temperature.StartsWith("temp") Then

            templab.Text = temperature.Substring(4, 2) & "°C"
        End If 
```

它给了

```
Cross-thread operation not valid: Control 'templab' accessed from a thread other than the thread it was created on. 
```

关于设置标签的文本

我确实在互联网上搜索了这个，我找到了一些解决方案，但我的问题不是这个，我过去用 Visual Studio 2008 和 Windows 7 编写了相同的代码，它没有给我任何错误。现在我使用 Windows 8 和 Visual Studio 2012。我如何在不调用的情况下解决这个问题？提前致谢

完整代码：

```
Public Class Form1

    Private Sub SerialPort1_DataReceived(sender As Object, e As IO.Ports.SerialDataReceivedEventArgs) Handles SerialPort1.DataReceived
        Dim temperature As String = SerialPort1.ReadLine.ToString

        If temperature.StartsWith("temp") Then

            templab.Text = temperature.Substring(4, 2) & "°C"
        End If
        ' My.Computer.Audio.Play("C:\Users\Chris\Desktop\ROMANTIC MUSIC INSTRUMENTAL, PIANO AND SAXOPHONE.wav", AudioPlayMode.Background)
    End Sub

    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        SerialPort1.Open()
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T20:31:45.927

您将需要在线程上调用您的方法。首先检查使用

```
templab.InvokeRequired 
```

创建方法或匿名委托并在控件上调用它。

**来自 MSDN**

对 Windows 窗体控件进行线程安全调用 查询控件的 InvokeRequired 属性。如果 InvokeRequired 返回 true，则使用对控件进行实际调用的委托调用 Invoke。如果 InvokeRequired 返回 false，则直接调用控件。在下面的代码示例中，线程安全调用在 ThreadProcSafe 方法中实现，该方法由后台线程执行。如果 TextBox 控件的 InvokeRequired 返回 true，则 ThreadProcSafe 方法会创建一个 SetTextCallback 实例并将其传递给窗体的 Invoke 方法。这会导致在创建 TextBox 控件的线程上调用 SetText 方法，并且在此线程上下文中直接设置 Text 属性。

```
' This event handler creates a thread that calls a  
' Windows Forms control in a thread-safe way. 
 Private Sub setTextSafeBtn_Click( _
 ByVal sender As Object, _
 ByVal e As EventArgs) Handles setTextSafeBtn.Click

     Me.demoThread = New Thread( _
     New ThreadStart(AddressOf Me.ThreadProcSafe))

     Me.demoThread.Start()
 End Sub 

' This method is executed on the worker thread and makes 
' a thread-safe call on the TextBox control. 
 Private Sub ThreadProcSafe()
   Me.SetText("This text was set safely.")
 End Sub

' This method demonstrates a pattern for making thread-safe 
' calls on a Windows Forms control.  
' 
' If the calling thread is different from the thread that 
' created the TextBox control, this method creates a 
' SetTextCallback and calls itself asynchronously using the 
' Invoke method. 
' 
' If the calling thread is the same as the thread that created 
' the TextBox control, the Text property is set directly.  

 Private Sub SetText(ByVal [text] As String)

 ' InvokeRequired required compares the thread ID of the 
 ' calling thread to the thread ID of the creating thread. 
 ' If these threads are different, it returns true. 
  If Me.textBox1.InvokeRequired Then 
     Dim d As New SetTextCallback(AddressOf SetText)
     Me.Invoke(d, New Object() {[text]})
 Else 
     Me.textBox1.Text = [text]
 End If 
End Sub 
```

有关示例和参考，请参见[此处。](http://msdn.microsoft.com/en-us/library/ms171728%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T20:32:24.843

该异常告诉您您对控件的属性进行了线程间调用...

使用控件的一个要求是不要对它们进行线程间调用

因此，要么调用，要么将用于与控件交互的代码移动到创建控件的线程...

如果您的代码执行时间很长并且会阻塞 UI 线程太久，那么唯一的解决方案是调用 ...

# objective-c - 读取 JSON 结果时出现异常

> ID：16124842
> 
> 赞同：-4
> 
> 时间：2013-04-20T20:26:07.263
> 
> 标签：objective-c, json, cocoa, nsjsonserialization

我正在尝试解析以下 JSON 响应：[http](http://www.breakingnews.com/api/v5/items?compact=false) ://www.breaknews.com/api/v5/items?compact=false 。

这是我解析它的代码：

```
NSError* error = nil;
NSData* data = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.breakingnews.com/api/v5/items?compact=false"] options:NSDataReadingUncached error:&error];
if (error) {
    NSLog(@"%@", [error localizedDescription]);
} else {

    NSError *e = nil;
    NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData: data options:kNilOptions error: &e];

    if (!jsonArray) {
        NSLog(@"Error parsing JSON: %@", e);
    } else {
        for(NSArray* item in jsonArray) {

            NSLog(@"Item: %@", item);

        }
    }

} 
```

但是，我收到此错误：

> -[__NSCFString objectAtIndex:]：无法识别的选择器发送到实例 0x101810a40

这是为什么 - 我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:45:07.917

Check the types of the objects you're using. You're assuming that everything is an `NSArray`, when in fact things in JSON can be `NSArray`, `NSDictionary`, `NSString`, `NSNumber`, and `NSNull`.

# algorithm - 在 DAG 中寻找哈密顿路径的算法

> ID：16124844
> 
> 赞同：35
> 
> 时间：2013-04-20T20:26:11.993
> 
> 标签：algorithm, graph-algorithm, directed-acyclic-graphs, hamiltonian-cycle

我指的是Skienna的算法书。

测试图是否`G`包含 a的问题`Hamiltonian path`是`NP-hard`，其中哈密顿路径`P`是对每个顶点仅访问一次的路径。与哈密顿循环问题不同，G 中从 P 的结束顶点到起始顶点不必有一条边。

给定一个有向无环图 G( · `DAG`)，给出一个`O(n + m)`时间算法来测试它是否包含哈密顿路径。

我的做法，

我打算使用`DFS`和`Topological sorting`。但是我不知道如何在解决问题时将这两个概念联系起来。如何使用拓扑排序来确定解决方案。

有什么建议么？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-04-20T20:31:50.623

您可以首先在 O(n+m) 中对 DAG 进行拓扑排序（每个 DAG 都可以进行拓扑排序）。

完成此操作后，您就知道边从较低的索引顶点到较高的索引顶点。这意味着当且仅当连续顶点之间存在边时，才存在哈密顿路径，例如

```
(1,2), (2,3), ..., (n-1,n). 
```

（这是因为在哈密顿路径中你不能“返回”但你必须访问所有，所以唯一的方法是“不跳过”）

您可以在 O(n) 中检查此条件。

因此，总体复杂度为 O(m+n)。

# ios - 解析转发个人资料图片

> ID：16124845
> 
> 赞同：-1
> 
> 时间：2013-04-20T20:26:15.480
> 
> 标签：ios, objective-c, json, parsing, uitableview

我正在开发一个显示 Twitter 用户时间线的应用程序。`UITableView`包含具有推文、时间和个人资料图标的单元格。但是，转推仍然有用户的个人资料图像，而不是原始海报的图像。JSON 文件添加了一个名为的新密钥`retweeted_status`，该密钥具有一个名为的密钥，该密钥`user`具有配置文件图像 URL 内容。我怎样才能做出条件语句来查找是否`retweeted_status`存在。如果没有，则获取图像，如下面的代码所示：

```
 static NSString *CellIdentifier = @"Cell";

 UITableViewCell *cell = [self.tweetTableView
 dequeueReusableCellWithIdentifier:CellIdentifier];

 if (cell == nil) {
 cell = [[UITableViewCell alloc]
 initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
 }

dispatch_queue_t downloadQueue = dispatch_queue_create("image downloader", NULL);
dispatch_async(downloadQueue, ^{
    NSDictionary *tweet =_dataSource[[indexPath row]];
    NSDictionary *tweetSubtitle = _dataSource[[indexPath row]];

    //NSURL *retweetURL = [NSURL URLWithSting: [[tweet objectForKey:@"retweeted_status"] objectForKey:@"user"] objectForKey:@"profile_image_url"];

    NSURL *imageURL = [NSURL URLWithString:[[tweet  objectForKey:@"user"]objectForKey:@"profile_image_url"]];
    NSData *imageData = [NSData dataWithContentsOfURL:imageURL];

    //Need conditional function to find if retweet

    //NSLog(@"%@",imageData);
    dispatch_async(dispatch_get_main_queue(), ^{

        cell.textLabel.text = tweet[@"text"];
        cell.detailTextLabel.text = tweetSubtitle[@"created_at"];

        cell.imageView.image = [UIImage imageNamed:@"placeholder"];
        cell.imageView.image = [UIImage imageWithData:imageData];
    });
});
   //NSLog(@"screen name %@", tweetSubtitle[@"screen_name"]);

 return cell;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:33:27.857

如果我理解你——

```
if ([tweet objectForKey:@"retweeted_status"])
{
// the tweet has a retweeted status
}
else
{
// no retweeted status
} 
```

我对吗？这就是你想要的？

# javascript - JavaScript for 循环被跳过且没有错误

> ID：16124847
> 
> 赞同：0
> 
> 时间：2013-04-20T20:26:25.937
> 
> 标签：javascript, for-loop, coding-style

我这里有一段 JC 代码：$

```
 function Test() {
        var form = $('form').serializeArray();
        var str = "";
        var Price = {};
        var OneUp = 1;
        var NextName = "";
        var PriceIndex = 0
    for (var i = 0, l = form.length; i < l; i++) {
        OneUp = i + 1;
        if (form[i].name.indexOf("_Sel_") != -1) {
            NextName = form[OneUp].name.substring(0, form[OneUp].name.indexOf(":"));
            Price[PriceIndex] = form[OneUp].name.substring(form[OneUp].name.indexOf(":") + 1, form[OneUp].name.length);
            PriceIndex += 1;
            str += form[i].name.replace("_Sel_", "") + ':   <span class="ColorMe">' + NextName + "</span><br/>";
        }
    }

    for (var i = 0, l = Price.length; i < l; i++) {
        Price[i] = parseFloat(Price[i]) + .05;
    }
    var Total = 0.05;
    for (var i = 0, l = Price.length; i < l; i++) {
        Total += Price[i];
    }
    $(".PriceMe").html(Total.toString());
    $(".UpdateMe").html(str);

}; 
```

由于没有明显的原因或任何错误，这部分代码被跳过：

```
for (var i = 0, l = Price.length; i < l; i++) {
    Price[i] = parseFloat(Price[i]) + .05;
}
var Total = 0.05;
for (var i = 0, l = Price.length; i < l; i++) {
    Total += Price[i];
}
$(".PriceMe").html(Total.toString()); 
```

任何人都可以向我解释为什么和/或解决我当前的问题。另外，我很抱歉我是新手 JC 编码器，因此您在我的代码中看到的任何样式或其他问题都将被欣然接受。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:32:26.707

**Price**是一个对象 ( `{}`)，因此它没有**长度**属性来遍历您需要执行的对象，例如：

```
var obj = {};
obj['key'] = 'value';
obj['key2'] = 'value2';
for(var val in obj){
   //val => key
   //obj[val] => value
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T20:51:33.070

你忘记了后面的分号`var PriceIndex = 0`。不需要在 for 循环中声明一百个变量。你可以简单地使用 for `(var i = 0; i < Price.length; i++)`。

如果您一个接一个地声明多个变量，您可以这样做：

```
var a = 0, b = 1, c = 2; 
```

你不需要使用`var`整个时间。该`length`方法仅适用于数组或 html 元素集合。为了从一个对象中获取属性，您使用这样的`in`关键字循环该对象`for (i in object)`要访问您使用的对象，`object.property`或者`object["property"]`如果您这样做`object[property]`，javascript会认为属性是一个变量，并且将搜索它，如果它找到如果该值不是字符串，则 javascript 将返回该值并开始在该对象中搜索，或者在该对象中找不到该值，则 javascript 将返回 value `undefined`。

编辑：

form 有一个 length 属性，因为 jQuery 在 DOM 中搜索那个元素，它返回一个 html 元素集合，它就像一个数组一样有 length 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T20:36:34.860

`Price.length`在那一点上是未定义的，所以使用这个：

```
 for (var i = 0, l = $(Price).length; i < l; i++) {
        Price[i] = parseFloat(Price[i]) + .05;
    }
    var Total = 0.05;
    for (var i = 0, l = Price.length; i < l; i++) {
        Total += Price[i];
    }
    $(".PriceMe").html(Total.toString()); 
```

对于访问 obj 值，您可以使用`for(var key in obj)`.

# python - Python Django 检查属性是否存在或已设置

> ID：16124850
> 
> 赞同：6
> 
> 时间：2013-04-20T20:26:36.843
> 
> 标签：python, django

我有一个`User`对象和一个`UserInfo`对象，它们具有一对一的关系。我只是添加`UserInfo`对象，所以一些用户已经有`User`对象但没有`UserInfo`对象。我想检查 User 对象是否有与之关联的 UserInfo 对象，如果没有，则将它们重定向到我可以获得一些信息的页面。我还是 python 的新手，并且尝试过在`if request.user.user_info:`不存在时抛出异常，所以我最终这样做了：

```
 user = request.user
    try:
        user.user_info.university
    except:
        print 'redirect to info page' 
```

效果很好，但我觉得异常应该是异常而不是 if 语句替代。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-20T20:29:55.630

我会说处理异常是pythonic方法。你可以这样做：

```
try:
    # do your thing when user.user_info exists
except AttributeError: # Be explicit with catching exceptions.
    # Redirect. 
```

有一个名为的编程概念 `it's easier to ask for forgiveness than permission (EAFP)`在 Python 中被广泛使用。我们假设给定对象存在属性、键等，并在它们不存在时捕获异常。

以下是有关 EAFP 的一些参考资料和 SO 问题。

[Python 术语表](http://docs.python.org/2/glossary.html)
[Python EAFP 中的 EAFP 原理是](https://stackoverflow.com/questions/11360858/what-is-the-eafp-principle-in-python)
[什么，什么是真正的例外](https://stackoverflow.com/questions/3086806/python-exceptions-eafp-and-what-is-really-exceptional)

# html - 菜单在 Chrome 中正确显示，但在 Firefox 中不显示

> ID：16124851
> 
> 赞同：1
> 
> 时间：2013-04-20T20:26:42.643
> 
> 标签：html, css, background, cross-browser

我的网站中的导航栏有问题。它在 chrome 中工作，但在 Firefox 中发生了一些奇怪的事情，我不知道它是什么......

在 Firefox 中，不显示暗栏菜单背景。由于某种原因它是透明的：

![火狐](https://i.stack.imgur.com/X4fqu.png)

在 Chrome 中按预期工作：

![铬合金](https://i.stack.imgur.com/nedcb.png)

我的网站包装器的不透明度为 0.9，但我认为这与未显示的菜单无关，因为它显示在 chrome 上...

这是我的标题的 HTML 和 CSS：http: [//jsfiddle.net/Xdc9F/](http://jsfiddle.net/Xdc9F/)

HTML：

```
<div class="header">
    <header>
            <h1>
                        <a href="#">
                            <img src="http://i.imgur.com/z3Y7cmW.png" alt="" />
                        </a>
                    </h1>

    </header>
</div>
<!-- closing header -->
<div class="menu">
    <ul>
        <li class="active"><a href="index.html"><span>Home</span></a>
        </li>
        <li><a href="#"><span>Sobre Nós</span></a>
        </li>
        <li><a href="#"><span>Localização</span></a>
        </li>
        <li><a href="#"><span>Contato</span></a>
        </li>
    </ul>
</div> 
```

CSS：

```
.menu, .menu ul, .menu ul li, .menu ul li a {
    padding: 0;
    margin: 0;
    line-height: 1;
    font-family:'Capriola', sans-serif;
}
.menu:before, .menu:after, .menu > ul:before, .menu > ul:after {
    content:'';
    display: table;
}
.menu:after, .menu > ul:after {
    clear: both;
}
.menu {
    zoom:1;
    height: 69px;
    background: url(http://i.imgur.com/XnKK9WL.png) repeat-x center bottom;
    margin-top: 100px;
    border-radius: 2px;
}
.menu ul {
    background: url(http://i.imgur.com/elYFBsn.png) repeat-x 0px 4px;
    opacity: 1;
    height: 69px;
}
.menu ul li {
    float: left;
    list-style: none;
}
.menu ul li a {
    display: block;
    height: 37px;
    padding: 22px 30px 0;
    margin: 4px 2px 0;
    border-radius: 2px 2px 0 0;
    text-decoration: none;
    font-size: 15px;
    color: white;
    text-shadow: 0 1px 1px rgba(0, 0, 0, .75);
    font-weight: 400;
    opacity: .9;
}
.menu ul li:first-child a {
    margin: 4px 2px 0 0;
}
.menu ul li a:hover, .menu ul li.active a {
    background: url(http://i.imgur.com/jCkWOJx.png) center bottom;
    display: block;
    height: 37px;
    margin-top: 0px;
    padding-top: 26px;
    color: #004f7c;
    text-shadow: 0 1px 1px rgba(255, 255, 255, .55);
    opacity: 1;
    text-transform: uppercase;
} 
```

我刚刚粘贴了标题部分，如果您需要整个页面代码，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:00:58.777

![在此处输入图像描述](https://i.stack.imgur.com/0bHzC.png)

一切对我来说都很好。可能你对其余的 html 或 CSS 做错了。

蓝色边框是因为这个规则：

背景：`url("http://i.imgur.com/XnKK9WL.png") repeat-x scroll center bottom transparent;`

如果删除没有蓝色边框

# php - Kohana：从 url 中省略操作

> ID：16124852
> 
> 赞同：0
> 
> 时间：2013-04-20T20:26:52.153
> 
> 标签：php, routing, kohana

有什么方法可以默认使用 action_index 而不必在 url 中指定它？

IE。

```
Route::set('user_profile','(<controller>(/<action>(/<id>)))')
    ->defaults(array(
        'directory' => 'public',
        'controller' => 'user',
        'action'     => 'index',
    )); 
```

要使用它，我需要指定`/users/index/1234`

但我想用`/users/1234`

我尝试从 Route::set() 中采取行动，但最终得到了 404 页面。

**更新**

现在我已经添加了这条路线（最上面的一条），我的默认路线现在似乎不起作用

```
Route::set('user_profile','(<controller>(/<id>))')
->defaults(array(
    'directory' => 'public',
    'controller' => 'users',  // Note I changed it to plural to match 'users/*' from your url
    'action'     => 'index',
));

Route::set('default', '(<controller>(/<action>(/<id>)))')
    ->defaults(array(
        'directory' => 'public',
        'controller' => 'home',
        'action'     => 'index',
    )); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T08:10:15.423

就像从 URL中省略`<action>`参数一样简单，但仍保持默认值：

```
Route::set('user_profile','(<controller>(/<id>))')
    ->defaults(array(
        'directory' => 'public',
        'controller' => 'users',  // Note I changed it to plural to match 'users/*' from your url
        'action'     => 'index',
    )); 
```

请注意，除非您有其他 Route 覆盖此行为，否则您的`user`控制器将只能执行该`index`操作。

* * *

**编辑**

如果您的`users_profile`路线仅处理`/users`路径，那么您可以在路线中明确设置它：

```
Route::set('user_profile','users(/<id>)')
    ->defaults(array(
        'directory' => 'public',
        'controller' => 'users',  // Note I changed it to plural to match 'users/*' from your url
        'action'     => 'index',
    )); 
```

这应该解决冲突的路线。

# .net - 如何在不通过每个对象的情况下将对象放入深度嵌套的方法中？

> ID：16124853
> 
> 赞同：1
> 
> 时间：2013-04-20T20:27:00.740
> 
> 标签：.net, dependency-injection, ninject, ninject.web.mvc

假设我有一个需要静态属性的方法，并且我想创建单元测试，所以我将它包装在一个包装类中。让我们调用接口 IFoo 和具体类 Foo。

现在，如果从 MVC 视图中调用我的方法，如何将包装器实例放入该方法中？

显然，我可以在我的控制器构造函数中添加一个 IFoo 参数，在我的视图模型中添加一个 IFoo 属性，在我的方法中添加一个 IFoo 参数，然后将它传递到链中；控制器、视图模型、视图、扩展方法。这似乎让我无法接受。

那么有没有更清洁的方法来做到这一点？

我认为 DI Container 是要走的路。老实说，到目前为止我还不需要一个，我天真地假设我只需添加 Ninject，将具体类型绑定到接口，然后在我的方法中进行以下调用。

```
var dt = kernel.Get<IFoo>(); 
```

我认为这将帮助我避免上面提到的整个构造函数参数/属性跟踪。现在我知道我仍然需要从某个地方获取内核变量，但我想我记得看到一些关于使用线程/会话/请求范围调用它的东西。我以为我可以实例化同一个内核实例，而不管它在哪里被调用，但是当我查看它时，我发现这仅适用于内核正在调用的对象实例......而不是内核本身。

那么，有没有办法让一个 Foo 的实例进入方法而不通过一堆除了传递它什么都不做的对象传递它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:27:56.483

首先，购买[http://manning.com/seemann——](http://manning.com/seemann)你不会后悔的。

一般来说，“我在我的对象树中，给我 X”的问题可以通过以下方式之一解决：

*   构造函数注入 - 任何需要 X 的对象，在构造时都需要它。请参阅 Ninject Wiki 中的注入模式
*   服务位置 - 每个人都可以随时向中心母亲大喊大叫来获取东西 - 即将容器的引用保持在静态中并随意调用它 - 参见 ploeh 同名文章
*   抽象工厂 - 你被注入一个`Func<T>`或一个 `interface IXFactory { X CreateX(); }`- 请参阅 Ninject.Extensions.Factory wiki
*   方法注入 - 它在某处创建并根据需要传递它 - 请参阅 .NET 中的依赖注入一书

您期望容器的一些功能可以使任何地方的任何人都可以神奇地尖叫“我想要 X”，尤其是在从 DTO 调用的静态类中。请记住，容器不会进入并将您的 IL 拦截调用重写为 new。In 基本上可以应用一些装饰器、工厂和代理作为胶水，当一起做不起眼的布线工作时。

底线是处理这样的事情的适当方法是

*   任何需要 DI 的东西都应该（并且可以）不是静态的，时期
*   诸如 DTO 之类的短期对象实例不应该参与 DI（这并不是说即使在处理请求时也应该自信地组合对象图 - 只是您所连接的应该是服务，而不是对象）。请参阅[为什么不使用 IoC 容器来解决实体/业务对象的依赖关系？](https://stackoverflow.com/questions/4835046/why-not-use-an-ioc-container-to-resolve-dependencies-for-entities-business-objec)
*   大多数情况下，您最好通过方法注入和构造函数注入来明确依赖关系 - 这样它将您的需求推到表面，而不是通过服务位置创建带外通信老鼠巢

最后一点很关键——通过呈现真正的依赖关系并倾听它们，您最终会弄清楚时间服务、调度程序或格式化程序（或您的案例中缺少的任何更高级别的抽象）应该随着时间的推移而存在的位置。

我强烈建议在这里阅读[Mark Seemann 的最佳答案](https://stackoverflow.com/users/126014/mark-seemann?tab=answers&sort=votes)，因为这些重要问题和主题中的大多数都在它们中得到了深入解决，而不像我的答案那样依赖过于简单的解释。当然，这本书本身是对您的时间和金钱的最佳综合利用！

编辑：（受到您对@tvonfosson 的评论的启发）Container 可以为聚会带来的一件关键事情（除了在给定范围内维护单个 X （请参阅 Ninject.Extensions.NamedScope wiki）是能够跳过传递的间接依赖项无缘无故地降低服务层次结构 - 即，如果您的控制器依赖于依赖于调度程序的服务并且调度程序需要一个时钟，则服务不需要谈论时钟，只是调度程序。

Containers 的关键是确保你不会走得太远，然后尝试滥用它们来获取应该只是代码的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T12:00:11.353

如果您的 ViewModel 或 View 也是由 Ninject 创建的，您应该能够将 IFoo 添加为构造函数依赖项并将其注入。如果您想直接访问`Kernel`并解析一个实例（这通常不是最好的主意），您可以注入一个`IResolutionRoot`并调用 Get 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T21:38:02.037

由于我不知道您的确切用例，我可能会建议也可能不合适。我有几种方法来处理这个问题，这取决于你在哪里测试。从扩展方法的角度来看，我认为您可以`DateTime`在扩展的单元测试中手动注入适当的值。如果它需要针对 测试一个值*，* `DateTime.UtcNow`那有点不同，但是您可以使用一个 nullable 来处理它，如果您没有在第二个参数中提供 on，则`DateTime`默认为该值。`DateTime.UtcNow`

```
 public static IHtmlString RegularExtension(this HtmlHelper helper, DateTime when)
   {
      ...
   }

   public static IHtmlString ComparisonExtension(this HtmlHelper helper, DateTime when, DateTime? now = null)
   {
       var nowDate = now ?? DateTime.UtcNow; // verified by inspection, tests use specified values
       ...
   } 
```

或者，对于后者，如果您对 null 合并运算符感到不舒服，请使用两种方法。一个接受单个参数的公共参数和一个同时使用这两个参数的私有参数。使用反射测试您的私有方法，让公共方法简单地委托给私有方法。您也可以考虑使用需要两个参数的单一方法，并始终将两个值都构建到模型中。

从控制器的角度来看，如果您需要在当前时间使用一致的值，您可以将包装器注入控制器并使用包装器中的“未包装”值填充模型。这样，您可以测试控制器是否正确设置模型上的值，而不必将下游的所有内容都绑定到包装器。关键是您的所有代码都使用注入（和解包）的值，而不是`DateTime.UtcNow`直接调用。从这些类的测试的角度来看，他们不知道值来自哪里，只是它是从上游提供的。

```
 public FooController(IDateTimeWrapper timeWrapper)
   {
       var model = new FooModel { Now = timeWrapper.Unwrap(), ...  };

       ...

       return View(model);
   } 
```

# java - Getter 正在崩溃的程序

> ID：16124854
> 
> 赞同：0
> 
> 时间：2013-04-20T20:27:13.927
> 
> 标签：java, android, crash, getter

我使用吸气剂的方式和我一直做的一样（我认为），它使程序崩溃，但我不知道为什么！有谁知道我的错误在哪里？

它在下面的第 45 行崩溃：

```
package edu.virginia.hotncolduva;

import java.util.ArrayList;
import java.util.List;
import java.util.Timer;
import java.util.TimerTask;

import sofia.app.Screen;
import android.content.Context;
import android.location.LocationManager;
import android.os.SystemClock;
import android.text.Editable;
import android.widget.Chronometer;
import android.widget.EditText;
import android.widget.TextView;

public class HotNColdUva extends Screen {
    private TextView txtHotOrCold;
    private TextView txtLocation;
    private double currentLatitude;
    private double currentLongitude;
    private static List<HistoricalLocation> places;
    private static Chronometer chronometer;
    private boolean victor;
    private EditText inputLatitude;
    private EditText inputLongitude;

    private HistoricalLocation riceHall;

    public void initialize() {

        presentScreen(MainMenu.class);
        presentScreen(Splash.class);

        victor = false;

        chronometer.setBase(SystemClock.elapsedRealtime());
        chronometer.start();
        makeHistoricalLocations();
        for(HistoricalLocation hl : places){
            hl.setDistance(howFar(hl));
        }

        //THIS IS WHAT CAUSES THE CRASH
        riceHall.getLatitude();

        currentLatitude = 38.03211;
        currentLongitude = -78.51002;

        LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        // LocationListener locList = new WhereAmI();
        // lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,
        // locList);

        // new Thread(new Runnable(){
        // public void run(){

        // Timer.callRepeatedly(this, "update", 1000);
        // }
        // }).start();

        // jeffersonStatue();
        new Timer().schedule(new TimerTask() {
            public void run() {
                update();
            }
        }, 1000, 1000);
    }

    public void btnTeleportClicked(){

//      currentLatitude = doubleinputLatitude.getText();
//      currentLongitude = inputLatitude.getText();;

    }

    public void makeHistoricalLocations() {
        HistoricalLocation riceHall = new HistoricalLocation(
                "Rice Hall",
                38.03161,
                -78.51075,
                0,
                "\"The real promise of what will happen here is the 21st Century extension of the academical village and what will be made possible by the technologies that are used, developed and explored in these places. The village won’t simply exist then in these buildings or on this campus, but across the state, across the nation and globe. We have only really begun to understand the way in which these technologies can enhance human performance and accomplishment and how they can improve the human condition.\"\n\n-Paul Rice",
                false);} 
```

* * *

```
package edu.virginia.hotncolduva;

import sofia.app.Screen;

public class HistoricalLocation extends Screen {
    private String name;
    private double latitude;
    private double longitude;
    private double distance;
    private String hist;
    private boolean visited;

    public HistoricalLocation(String name, double latitude, double longitude, double distance,
            String hist, boolean visited) {
        super();
        this.name = name;
        this.latitude = latitude;
        this.longitude = longitude;
        this.distance = distance;
        this.hist = hist;
        this.visited = visited;
    }

    @Override
    public String toString() {
        return name;
    }

    public String getName() {
        return name;
    }

    public double getLatitude() {
        return latitude;
    }

    public double getLongitude() {
        return longitude;
    }

    public double getDistance() {
        return distance;
    }

    public void setDistance(double distance) {
        this.distance = distance;
    }

    public String getHist() {
        return hist;
    }

    public boolean getVisited() {
        return visited;
    }

    public void hasVisited() {
        visited = true;
    }

} 
```

* * *

这显然不是整个项目，但这是正在使用的所有代码。它正在崩溃

```
 riceHall.getLatitude(); 
```

* * *

日志猫：

```
04-20 16:26:27.700: W/ActivityThread(27796): Application edu.virginia.hotncolduva can be debugged on port 8100...
04-20 16:26:27.760: D/dalvikvm(27796): GC_FOR_ALLOC freed 131K, 4% free 7361K/7640K, paused 17ms, total 19ms
04-20 16:26:27.760: I/dalvikvm-heap(27796): Grow heap (frag case) to 7.842MB for 539664-byte allocation
04-20 16:26:27.790: D/dalvikvm(27796): GC_CONCURRENT freed 1K, 4% free 7886K/8168K, paused 5ms+2ms, total 29ms
04-20 16:26:27.790: D/dalvikvm(27796): WAIT_FOR_CONCURRENT_GC blocked 24ms
04-20 16:26:27.830: D/dalvikvm(27796): GC_FOR_ALLOC freed <1K, 4% free 7886K/8168K, paused 14ms, total 14ms
04-20 16:26:27.830: I/dalvikvm-heap(27796): Grow heap (frag case) to 8.751MB for 955696-byte allocation
04-20 16:26:27.850: D/dalvikvm(27796): GC_FOR_ALLOC freed 0K, 4% free 8819K/9104K, paused 17ms, total 17ms
04-20 16:26:27.870: D/dalvikvm(27796): GC_CONCURRENT freed <1K, 4% free 8820K/9104K, paused 2ms+1ms, total 22ms
04-20 16:26:27.930: D/AndroidRuntime(27796): Shutting down VM
04-20 16:26:27.930: W/dalvikvm(27796): threadid=1: thread exiting with uncaught exception (group=0x40d12930)
04-20 16:26:27.940: E/AndroidRuntime(27796): FATAL EXCEPTION: main
04-20 16:26:27.940: E/AndroidRuntime(27796): java.lang.RuntimeException: Unable to start activity ComponentInfo{edu.virginia.hotncolduva/edu.virginia.hotncolduva.HotNColdUva}: java.lang.NullPointerException
04-20 16:26:27.940: E/AndroidRuntime(27796):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-20 16:26:27.940: E/AndroidRuntime(27796):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-20 16:26:27.940: E/AndroidRuntime(27796):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-20 16:26:27.940: E/AndroidRuntime(27796):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-20 16:26:27.940: E/AndroidRuntime(27796):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-20 16:26:27.940: E/AndroidRuntime(27796):    at android.os.Looper.loop(Looper.java:137)
04-20 16:26:27.940: E/AndroidRuntime(27796):    at android.app.ActivityThread.main(ActivityThread.java:5041)
04-20 16:26:27.940: E/AndroidRuntime(27796):    at java.lang.reflect.Method.invokeNative(Native Method)
04-20 16:26:27.940: E/AndroidRuntime(27796):    at java.lang.reflect.Method.invoke(Method.java:511)
04-20 16:26:27.940: E/AndroidRuntime(27796):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-20 16:26:27.940: E/AndroidRuntime(27796):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-20 16:26:27.940: E/AndroidRuntime(27796):    at dalvik.system.NativeStart.main(Native Method)
04-20 16:26:27.940: E/AndroidRuntime(27796): Caused by: java.lang.NullPointerException
04-20 16:26:27.940: E/AndroidRuntime(27796):    at edu.virginia.hotncolduva.HotNColdUva.initialize(HotNColdUva.java:45)
04-20 16:26:27.940: E/AndroidRuntime(27796):    at java.lang.reflect.Method.invokeNative(Native Method)
04-20 16:26:27.940: E/AndroidRuntime(27796):    at java.lang.reflect.Method.invoke(Method.java:511)
04-20 16:26:27.940: E/AndroidRuntime(27796):    at sofia.internal.events.EventDispatcher$MethodTransformer.invoke(EventDispatcher.java:474)
04-20 16:26:27.940: E/AndroidRuntime(27796):    at sofia.internal.events.EventDispatcher.invokeTransformer(EventDispatcher.java:136)
04-20 16:26:27.940: E/AndroidRuntime(27796):    at sofia.internal.events.EventDispatcher.dispatch(EventDispatcher.java:109)
04-20 16:26:27.940: E/AndroidRuntime(27796):    at sofia.app.internal.ScreenMixin.invokeInitialize(ScreenMixin.java:561)
04-20 16:26:27.940: E/AndroidRuntime(27796):    at sofia.app.Screen.onCreate(Screen.java:186)
04-20 16:26:27.940: E/AndroidRuntime(27796):    at android.app.Activity.performCreate(Activity.java:5104)
04-20 16:26:27.940: E/AndroidRuntime(27796):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-20 16:26:27.940: E/AndroidRuntime(27796):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-20 16:26:27.940: E/AndroidRuntime(27796):    ... 11 more
04-20 16:26:27.970: D/dalvikvm(27796): GC_CONCURRENT freed 797K, 11% free 8472K/9416K, paused 2ms+5ms, total 34ms 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T20:30:11.823

在该方法`makeHistoricalLocations`中，您将新对象的引用分配给局部变量，而不是实例。

```
public void makeHistoricalLocations() {
    this.riceHall = new HistoricalLocation(
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T20:29:37.370

`riceHall`是`null`，因为您从未初始化它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T20:29:58.280

您的变量似乎`riceHall`为空。我不知道，因为您切断了 的实现，`makeHistoricalLocations`但我怀疑您要么没有调用该方法，要么（更有可能）创建一个方法本地版本，`riceHall`而不是在对象级别设置它。

# javascript - 防止禁用谷歌地图并仅禁用可放置

> ID：16124858
> 
> 赞同：0
> 
> 时间：2013-04-20T20:27:33.860
> 
> 标签：javascript, jquery, css, google-maps-api-3

我正在研究基于 GPS 的产品，而我真正想做的是：

1）在div上拖动一个项目（droppable）

2) 在放置动作时，我将在同一 div 中显示地图并相应地标记信息。

3) 应关闭该特定 div 的可丢弃功能。

问题：除了禁用 droppable 功能外，一切正常。我试图禁用 droppable，但它实际上禁用了 div 容器，因此 MAP 变灰，这是完全不可接受的。

请帮助.. :(这是我的代码：

**HTML：**

```
 <table width="100%">
    <tr>
        <td>
            <div style="width: 30%; float: left; height: 500px;">
                <span id="bjcb" class="draggable" style="color:Red">What up</span>
            </div>
            <div style="width: 70%; float: left; height: 500px;">
                <div style="width: 49.5%; height: 50%; float: left;" class="droppable" id="one"></div>
                <div style="width: 50%; height: 50%; float: right;" class="droppable" id="two"></div>
                <div style="width: 49.5%; height: 50%; float: left;" class="droppable" id="three"></div>
                <div style="width: 50%; height: 50%; float: right;" class="droppable" id="four"></div>
            </div>
            </td>
        </tr>
    </table> 
```

**JS：**

```
$(function () {
    $(".draggable").draggable({      
        revert: true
    });
    $(".droppable").droppable({
        drop: function (event, ui) {
            alert('dropped');
            $(this).addClass("ui-state-highlight");
            $(this).html(ui.draggable.prop('id'));

            var mapOptions = {
                center: new google.maps.LatLng(-34.397, 150.644),
                zoom: 8,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            var id = $(this).prop('id');

            var map = new google.maps.Map(document.getElementById(id), mapOptions);
            $(this).droppable("option", "disabled", true);
        }
    });
}); 
```

CSS：

```
 .droppable
    {
        background-color: Gray;
        border: solid 1px Red;
    }
    .draggable
    {
        background-color: Transparent;
    } 
```

**小提琴：**

[http://jsfiddle.net/writetobhuwan/LujAv/1/](http://jsfiddle.net/writetobhuwan/LujAv/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:48:43.950

Instead of disabling the drop functionality. Try the following:

```
$(this).droppable("option", "disabled", true);
$(this).removeClass('ui-droppable ui-state-highlight ui-droppable-disabled ui-state-disabled'); 
```

Example:

[http://jsfiddle.net/LujAv/8/](http://jsfiddle.net/LujAv/8/)

# sql - Sql Server 更新触发器：如何使其工作

> ID：16124861
> 
> 赞同：7
> 
> 时间：2013-04-20T20:27:54.377
> 
> 标签：sql, sql-server, triggers

我正在尝试为我的“Blockbuster-like”电影公司编写一个 sql server 更新触发器。在我的 MOVIES 表中，我有 movie_id 作为 PK 和另一个名为 num_rented 的列，它保留了电影被租用的总次数。这个总数是通过我的插入、删除和更新触发器完成的。（我知道有更好的方法可以做到这一点，但我的任务特别要求这样做，所以请理解这一点）。CUSTOMER_RENTALS 表有 item_rental_id 作为 PK，MOVIES 中的 movie_id 是 FK。

我需要一个更新触发器，只要对 CUSTOMER_RENTALS 进行更新，它就会更新 MOVIES 中的 num_rentals 列。例如，假设输入了 movie_id 1，但这是一个错误，实际上是 movie_id 2。我希望 num_rentals 反映更新。

这是我到目前为止所拥有的，但我真的不知道在 SET 部分中放入什么来实现这一点：

```
CREATE TRIGGER tr_num_rentals_update
ON customer_rentals
AFTER UPDATE
AS
BEGIN
UPDATE m
SET num_rentals = ??????
FROM movies AS m
INNER JOIN inserted as i on m.movie_id=i.movie_id;
END; 
```

我在想我需要访问已删除表的值以将 num_rental 列恢复到以前的值，但我不知道如何。提前十亿谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-04-06T14:25:44.887

您需要考虑到 DML 语句可能会影响多行（在这种情况下，`INSERTED`and`DELETED`表也将有多行。

您还需要考虑到，如果电影更新为不同的 id，您应该减少电影的租借次数（以及增加新电影的计数）。

下面合并了插入和删除的计数，并将净更改应用于相关的电影 ID。

```
CREATE TRIGGER tr_num_rentals_update
ON customer_rentals
AFTER INSERT, UPDATE, DELETE
AS
  BEGIN
      IF UPDATE(movie_id) /*If column not affected skip*/
        BEGIN
            WITH T1(Cnt, movie_id)
                 AS (SELECT COUNT(*),
                            movie_id
                     FROM   inserted
                     GROUP  BY movie_id
                     UNION ALL
                     SELECT -COUNT(*), /*negative for deletes*/
                            movie_id
                     FROM   deleted
                     GROUP  BY movie_id),
                 T2
                 AS (SELECT SUM(Cnt) AS NetCnt,
                            movie_id
                     FROM   T1
                     GROUP  BY movie_id)
            UPDATE m
            SET    num_rentals = num_rentals + NetCnt
            FROM   movies AS m
                   INNER JOIN T2
                     ON m.movie_id = T2.movie_id;
        END
  END; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T21:14:53.433

我相信您可以通过添加 m.num_rentals + 1 来完成此操作

还为已删除的一个添加更新语句

```
UPDATE M
SET num_rentals = m.numrentals - 1
FROM
Movies M
INNER JOIN Deleted D ON
M.movie_id = D.Movie_ID 
```

但是，与其在触发器中使用它，我宁愿创建一个应用程序可以用来获取它的视图。从而消除了每次更新、插入和删除时需要执行的额外数据处理

```
CREATE VIEW MoviesVW AS
SELECT M.Movie_ID, COUNT(R.*) AS Num_Rental
FROM Movies M
LEFT JOIN customer_rentals R ON
R.movies_id = M.movies_ID
GROUP BY
M.Movie_ID 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-20T20:55:36.423

您需要在更新触发后执行。您可以尝试以下方法。为了更好地理解触发器，我强烈推荐这个链接 [http://www.codeproject.com/Articles/25600/Triggers-Sql-Server](http://www.codeproject.com/Articles/25600/Triggers-Sql-Server)

```
CREATE TRIGGER trgAfterUpdate ON [dbo].[customer_rentals] 
FOR UPDATE
AS
    declare @num_rentals int;
    declare @movie_id int;

    SELECT @movie_id =i.movie_id from inserted i;   
    SELECT @num_rentals =num_rentals from MOVIES where movie_id =@movie_id 
    SET @num_rentals =@num_rentals +1;

      -- perform update here in movies table    

    UPDATE MOVIES SET num_rentals=@num_rentals WHERE movie_id =@movie_id 

GO 
```

# icarousel - icarroussel 是否启用了这样的 3D 轮子？

> ID：16124862
> 
> 赞同：0
> 
> 时间：2013-04-20T20:28:13.630
> 
> 标签：icarousel

我必须在图片中呈现这样的菜单：

![在此处输入图像描述](https://i.stack.imgur.com/kMbVP.png)

这个按钮可以围绕中心的圆环移动，类似于 3D 效果，这意味着您可以在移动时看到尺寸变换。

我记得 iCarroussel 项目可以做这样的事情，任何 pne 可以引导我找到提供此动画的正确控件吗？

谢谢。

编辑1：

好的，我可以看到 iCarousel 几乎是我所需要的，但是如何更改轮播垂直角度以获得第一张图片？看看 iCarousel 默认是怎样的。

![在此处输入图像描述](https://i.stack.imgur.com/lpRnq.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-17T01:50:05.747

您需要做的是以下（逐步如下所示）

下载 iCarousel ...

1.  打开 Tests/ARC iOS 下的示例项目（打开 iCarouselExample.xcodeproj）

2.  将默认设置为“Cylinder”而不是“Coverflow”（在 iCarouselExampleViewController.m 的 viewDidLoad 函数中）

    ```
    - (void)viewDidLoad 
    {
        [super viewDidLoad];

        carousel.type = iCarouselTypeCylinder;
        navItem.title = @"Cylinder";
    } 
    ```

3.  由于您在自定义轮播中只需要六个项目，因此在 iCarouselExampleViewContoller.h 中将“窗格数”设置为 ...

    ```
    //NOTE! 
    #define NUMBER_OF_ITEMS 6 
    ```

4.  使用此 NUMBER_OF_ITEMS 设置轮播（即在 iCarouselExampleViewContoller.m 中更改设置函数如下（使用 'wrap' 如图所示）

    ```
     - (void)setUp
    {
        //set up data
        wrap = YES;
        self.items = [NSMutableArray array];

        //NOTE! use preset number of vars in Carousel
        //for (int i = 0; i < 10000; i++)
        for (int i=0; i< NUMBER_OF_ITEMS; i++)
        {
           [items addObject:[NSNumber numberWithInt:i]];
        }
    } 
    ```

5.  现在通过更新 uCarousel 类中的 _perspective 参数在 iCarousel 中提供透视图。在 iCarousel.m 的设置函数中执行此操作：

    ```
    - (void)setUp
    {
        _type = iCarouselTypeLinear;
        //NOTE! Tweak perspective parameters
        _perspective = -1.0f/750.0f; 
        ... etc ...
    } 
    ```

6.  最后，通过围绕 x 轴将旋转木马旋转 15 度，使整个视图围绕 X 轴“倾斜”。这样做的方法是调整变换矩阵（设置 transform = CATransform3DRotate(transform, -15.0f*M_PI/180.0f, 1.0f, 0.0f, 0.0f) 在代码中，在 iCarousel.m 的 transformForItemView 函数中将其更新为如下：

    ```
    - (CATransform3D)transformForItemView:(UIView *)view withOffset:(CGFloat)offset
    {   
    //set up base transform
        CATransform3D transform = CATransform3DIdentity;
        transform.m34 = _perspective;
        transform = CATransform3DTranslate(transform, -_viewpointOffset.width, _viewpointOffset.height, 0.0f);

        //perform transform
        switch (_type)
        {
        .... SKIPPED THE INITIAL SECTIONS OF THIS CODE WE MAKE OUR CHANGE IN THE CYLINDER SECTION ... 
            case iCarouselTypeCylinder:
            case iCarouselTypeInvertedCylinder:
            {

            CGFloat count = [self circularCarouselItemCount];
            CGFloat spacing = [self valueForOption:iCarouselOptionSpacing withDefault:1.0f];
            CGFloat arc = [self valueForOption:iCarouselOptionArc withDefault:M_PI * 2.0f];
            CGFloat radius = [self valueForOption:iCarouselOptionRadius withDefault:fmaxf(0.01f, _itemWidth * spacing / 2.0f / tanf(arc/2.0f/count))];
            CGFloat angle = [self valueForOption:iCarouselOptionAngle withDefault:offset / count * arc];

            if (_type == iCarouselTypeInvertedCylinder)
            {
                radius = -radius;
                angle = -angle;
            }

            if (_vertical)
            {
                transform = CATransform3DTranslate(transform, 0.0f, 0.0f, -radius);
                transform = CATransform3DRotate(transform, angle, -1.0f, 0.0f, 0.0f);
                return CATransform3DTranslate(transform, 0.0f, 0.0f, radius + 0.01f);
            }
            else
            {

                transform = CATransform3DTranslate(transform, 0.0f, 0.0f, -radius);

                //NOTE! Give it a tilt about the "X" axis
                transform = CATransform3DRotate(transform, -15.0f*M_PI/180.0f, 1.0f, 0.0f, 0.0f);

                transform = CATransform3DRotate(transform, angle, 0.0f, 1.0f, 0.0f);

                return CATransform3DTranslate(transform, 0.0f, 0.0f, radius + 0.01f);
            } 
    ```

# syntax - 为什么 OCaml 的 List.map 中有一个 let ？

> ID：16124863
> 
> 赞同：5
> 
> 时间：2013-04-20T20:28:23.033
> 
> 标签：syntax, functional-programming, ocaml

在 OCaml 3.12.1 中，`List.map`编写如下：

```
let rec map f = function
    [] -> []
  | a::l -> let r = f a in r :: map f l 
```

我希望最后一行写成`| a::l -> f a :: map f l`，但是，有一个看似无用的`let`绑定。为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-20T20:36:48.150

我相信它可以保证地图的功能应用顺序。OCaml 中简单表达式的求值顺序是未指定的，因此如果没有对列表元素`let`的应用顺序，`f`将是未指定的。由于 OCaml 不是纯语言，因此您确实希望指定顺序（`f`首先在列表的头部调用，以此类推）。

# php - 这个 PDO 声明有什么问题？不能将 PDOStatement 类型的对象用作数组

> ID：16124866
> 
> 赞同：0
> 
> 时间：2013-04-20T20:28:59.410
> 
> 标签：php, mysql, pdo

***我想从表“主题”中获取每个结果。***

```
function display_all_themes()
{
    global $pdo;    
    $select = $pdo->prepare("SELECT * FROM themes");
    $select->execute();

    while ($row = $select->fetch(PDO::FETCH_ASSOC))
    {
        echo $select['theme_name'].'<br />';
    }
} 
```

收到此错误：

致命错误：不能在第 137 行的 C:\xampp\htdocs\driptone\inc\functions.inc.php 中使用 PDOStatement 类型的对象作为数组

第 137 行：

```
 echo $select['theme_name'].'<br />'; 
```

**问题是什么？ *谢谢。***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T20:30:38.077

您正在使用`$select`而不是`$row`内部循环。

```
while ($row = $select->fetch(PDO::FETCH_ASSOC))    {
    echo $row['theme_name'].'<br />';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T20:30:40.907

使用**$row**，除了 $select

```
echo $row['theme_name'].'<br />'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T20:30:58.980

您将其分配给`$row`但您正在调用`$select`.

应该：

```
while ($row = $select->fetch(PDO::FETCH_ASSOC))    
{
    echo $row['theme_name'].'<br />';
} 
```

# html - 单击透明画布元素以选择其后面的元素

> ID：16124867
> 
> 赞同：1
> 
> 时间：2013-04-20T20:29:11.100
> 
> 标签：html, canvas, kineticjs

我正在使用 KineticJS。我有一个带有可拖动、可调整大小图像的画布（代码刚刚复制自：[http](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/) ://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/ ）。可拖动、可调整大小的图像在一层上，而我在另一层上有一个矩形。矩形层位于顶部。矩形是透明的（没有填充）。

当我将图像拖到矩形下方并再次尝试单击图像时，图像当然不会移动 - 因为它不在顶部。矩形在顶部。但是，我想单击“通过”透明矩形并继续作用于下面的图像。换句话说，当您单击并拖动时，我希望它看起来好像矩形不存在，但我希望矩形显示在顶部。

这是一个演示： http: [//jsfiddle.net/T8m64/106/](http://jsfiddle.net/T8m64/106/) 将图像拖到矩形下方，您将看到无法再抓取它，因为它在下方。[我完全知道这不是“不显眼的 javascript”，即 javascript 嵌入在 html 中。对不起。我只是从上面的第一个链接中复制的。]

无论如何，正如我所说，演示是从上面的第一个链接复制的，最后添加了以下代码：

```
//Overlying rectangle. I'm doing it as a path not a rect, because that's ultimately what I care about
var rect = new Kinetic.Path({
    x: 0,
    y: 0,
    data: 'm 2.0012417,2.0057235 125.7664883,0 0,105.8016465 -125.7664883,0 z',
    fill: 'none',
    stroke: 'black',
    scale: 1
});

// add the shape to the layer
var rectLayer = new Kinetic.Layer();
rectLayer.add(rect);
stage.add(rectLayer);
rectLayer.moveToTop(); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T22:42:14.473

您可以告诉图层停止侦听事件。

这将允许下面的层响应这些事件。

```
rectLayer.setListening(false); 
```

# android - Android：Crouton lib 和自定义字体

> ID：16124870
> 
> 赞同：4
> 
> 时间：2013-04-20T20:29:22.507
> 
> 标签：android, crouton

我在我的应用程序中使用自定义字体，所以我想要 Crouton 的自定义字体。我试过用 setTextAppearance 来做，它不起作用。

```
<?xml version="1.0" encoding="utf-8"?>
<com.ecab.ui.custom.TextViewCustomFont
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:custom="http://schemas.android.com/apk/res/com.crouton"
    android:id="@+id/crouton"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/ban_confirmation"
    android:gravity="center"
    android:text="TEST"
    android:textColor="@android:color/white"
    custom:typeface="gothamBold" /> 
```

**在样式类中：**

```
INFOCUSTOM = new Builder().setDuration(3000).setTextAppearance(R.id.crouton).build(); 
```

然后，我尝试通过用我的字体更改 setTypeface() 来做到这一点，但它不起作用。

**在面包块类：**

```
private TextView initializeTextView(final Resources resources) {
TextView text = new TextView(this.activity);
    text.setId(TEXT_ID);
    text.setText(this.text);
    text.setTypeface(MyFonts.getGothamBookBold(this.activity));
    Log.d(Constants.D_TAG, "chaneg the typeFace");
    text.setGravity(this.style.gravity);
    // set the text color if set
    if (this.style.textColorResourceId != 0) {
      text.setTextColor(resources.getColor(this.style.textColorResourceId));
    }

    // Set the text size. If the user has set a text size and text
    // appearance, the text size in the text appearance
    // will override this.
    if (this.style.textSize != 0) {
      text.setTextSize(TypedValue.COMPLEX_UNIT_SP, this.style.textSize);
    }

    // Setup the shadow if requested
    if (this.style.textShadowColorResId != 0) {
      initializeTextViewShadow(resources, text);
    }

    // Set the text appearance
    if (this.style.textAppearanceResId != 0) {
      text.setTextAppearance(this.activity, this.style.textAppearanceResId);
    }
    return text;
  } 
```

我该怎么做才能拥有自定义字体？

ps：库版本==> 1.7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T09:52:21.757

好的，我发现了问题！

它通过更改字体与第二种解决方案一起使用。我只是忘记删除

```
setTextAppearance(R.id.crouton) 
```

在样式类中。所以我的自定义样式是这样的：

```
INFOCUSTOM = new Builder().setDuration(3000).setBackgroundDrawable(R.drawable.ban_confirmation).setHeight(LayoutParams.WRAP_CONTENT)
          .build(); 
```

一个问题解决了，另一个问题来了:)！使用背景可绘制，文本不是垂直居中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T20:38:46.823

> 您可以通过 Style.Builder.setTextAppearance(...) 使用您的文本外观的 resourceId 的自定义样式。
> 
> 这从您的 styles.xml 中获取一个引用，并在 Crouton 的内部 TextView 中使用它。
> 
> 然后，您可以使用自定义样式调用 Crouton.makeText 或 Crouton.showText。

[资源](https://stackoverflow.com/a/15223451/644669)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T20:46:41.033

How does `MyFonts.getGothamBookBold()` look like?

This however should work:

```
 private TextView initializeTextView(final Resources resources) {
    TextView text = new TextView(this.activity);
    text.setId(TEXT_ID);
    text.setText(this.text);
    Typeface myTypeFace = Typeface.createFromAsset(this.activity.getAssets(), "gothamBold.ttf"); 
    text.setTypeface(myTypeFace);
    text.setGravity(this.style.gravity);

    // set the text color if set
    if (this.style.textColorResourceId != 0) {
      text.setTextColor(resources.getColor(this.style.textColorResourceId));
    } 
```

# google-chrome - 如何在 Chrome 应用程序的 Google Chrome 中隐藏地址栏？

> ID：16124877
> 
> 赞同：163
> 
> 时间：2013-04-20T20:30:07.447
> 
> 标签：google-chrome, web-applications

我想为我的 Chrome 应用增加屏幕空间。地址栏在 Chrome 应用程序中没用，我想知道是否有办法禁用它。

* * *

## 回答 #1

> 赞同：287
> 
> 时间：2013-12-18T16:34:42.283

您可以在应用程序模式下运行 Chrome。

视窗：

```
Chrome.exe --app=https://google.com 
```

苹果电脑：

```
/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --app=https://google.com 
```

Linux：

```
google-chrome --app=https://google.com 
```

这将删除所有工具栏，而不仅仅是地址栏，但它肯定会增加您的空间，而无需使用 Kiosk 模式。

* * *

## 回答 #2

> 赞同：119
> 
> 时间：2014-11-26T13:41:41.630

在 Chrome 中访问您想要的网站。单击浏览器工具栏中的 Chrome 菜单。

*   选择“更多工具”>“创建快捷方式...”
*   勾选“作为窗口打开”，点击“添加”

从该快捷方式启动后，它将是一个没有工具栏的窗口。

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2014-06-19T04:37:21.423

## 苹果电脑

*   `CMD``Control``F`全屏
*   `CMD``Shift``F`隐藏导航栏
*   还值得注意`...`→ `More Tools`→`Create Shortcut...`创建一个独立的应用程序，只需确保您已登录到您想要激活的 Chrome 配置文件

* * *

## 视窗

*   `F11`（可能`Alt``Enter`也是）

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-09-14T07:31:47.107

**取消选中** `Always Show Toolbar in Full Screen`菜单`View`：

[![在此处输入图像描述](https://i.stack.imgur.com/MUyvu.png)](https://i.stack.imgur.com/MUyvu.png)

然后进入全屏：

`Alt`+ `Cmd`+ `F`- 在 Mac 上

`F11`- 在 Windows 上

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-05-05T14:19:42.123

在最新版本的 Chrome（版本 50.0.2661.94 m）中，您可以通过转到菜单然后单击 -> 更多工具 -> 添加到桌面来完成此操作。然后，您需要在出现的弹出窗口中选中“打开为窗口”，然后单击“添加”。下面的屏幕截图：

[![在此处输入图像描述](https://i.stack.imgur.com/5mN2a.png)](https://i.stack.imgur.com/5mN2a.png)

[![在此处输入图像描述](https://i.stack.imgur.com/dOceP.png)](https://i.stack.imgur.com/dOceP.png)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-10-26T04:35:20.930

按 F11 可能对您有用。（全屏模式）

似乎不再选择全屏隐藏地址栏： http://productforums.google.com/forum/#!topic/chrome/ [d7LfleRNX7M](http://productforums.google.com/forum/#!topic/chrome/d7LfleRNX7M)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-09-11T01:00:02.477

在 Mac 的 Chrome 浏览器上：

### 全屏第一次切换：

`cmd-ctrl-f`

### 第二次切换隐藏地址栏、选项卡和所有

只需重复即可撤消或悬停在顶部

`cmd-shift-f`

### 通过向后重复撤消：

*   `cmd-shift-f` 撤消隐藏
*   `cmd-ctrl-f` 撤消全屏

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-05-04T11:19:03.660

2016-05-04-03:59A - Windows 7 - Google Chrome [版本 50.0.2661.94]

希望为没有 Chrome 地址/工具栏或书签栏的“YouTube 弹出播放器”完成此操作；解决方案最终成为 MarkHu 答案的一个小编辑（因为有新的更新，我猜？）

转到您要更改的页面，选择 Chrome 工具栏的“汉堡按钮”（3 条水平线）。

从那里：**更多工具>添加到桌面...>作为窗口打开（复选框）>添加（按钮）。**

...而且，只需从新的桌面快捷方式打开您的页面，根据需要进行调整，然后尽情享受吧！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-08-12T19:10:41.473

即使问题是关于删除地址栏获得一些空间，您也可以通过在 Mac OS 中使用`Ctrl`++或`Shift`++来打开和关闭书签栏来获得一些空间。`B``⌘ Cmd``Shift``B`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-12-27T01:47:51.653

截至 2018 年 12 月的说明：

1.  在 Chrome 中访问您想要的网站
2.  从菜单中选择“更多工具”>“创建快捷方式...”
3.  从应用程序（可以访问 chrome://apps/），右键单击站点，然后启用“作为窗口打开”

现在，当您打开快捷方式时，它将在没有工具栏的窗口中打开。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-09-29T15:10:39.343

基于 Vivaldi Chromium 的浏览器可以隐藏我的 Home Theather PC 的地址栏。使用该应用程序，您可以使用 F8 键显示/隐藏浮动栏。其他答案与所问的无关！

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2018-01-30T03:15:50.137

[![在此处输入图像描述](https://i.stack.imgur.com/RkQjm.png)](https://i.stack.imgur.com/RkQjm.png)

在 macOS 中由自动机提供服务。

而已。您可以指定快捷方式。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2018-03-15T18:13:06.747

对于 Ubuntu (16.04) 上的 Chrome，F11 是要走的路。

# php - 浏览文件夹的子文件夹 [子文件夹的不同名称]

> ID：16124886
> 
> 赞同：0
> 
> 时间：2013-04-20T20:31:13.097
> 
> 标签：php, arrays, image, gallery, directory

这是文件夹的外观：

```
Website/ Index-Profil/ Profil-Images/ Images/ $_SESSION['username']/ PublicImg NUM 1

Website/ Index_Public_Images/ Public-Images/ Images 
```

我希望该文件夹 `Public-Images/Images` 包含位于子文件夹中的所有图像 `Profil-images/Images/$Session['username']/`

或者

至少显示位于子文件夹中并具有名称的图像`Publicxxxxxx`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:50:56.317

我不知道下面的函数是否完全正确，因为我只是在学习时写的。但是这个想法很好，您正在寻找的功能将是这样的：

```
$glob_dir_list = array();
function ScanDirTree($dir){
$maindir = scandir($dir);
foreach($maindir as $subdir){
if(is_dir($subdir)){
$ndir = ScanDirTree($subdir);
array_push($glob_dir_list,$ndir);
}
}
} 
```

glob_dir_list 数组将保存您文件夹中的所有文件夹及其子文件夹。如果你想让我给你写一个非常好的函数，请告诉我。这也是一个很好的线程[递归目录扫描](https://stackoverflow.com/questions/10748387/php-script-to-traverse-directory-file-tree-and-output-tree-as-nested-uls)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T22:36:35.130

您将需要创建一个扫描您的目录的函数，如 scandir() 并循环遍历该函数找到的所有文件夹，并使用 scandir() 再次重新扫描每个文件夹

# java - Twitter4J 获取最新推文

> ID：16124891
> 
> 赞同：0
> 
> 时间：2013-04-20T20:32:21.173
> 
> 标签：java, twitter, twitter4j

如何获取 Twitter 上的最新推文？我意识到`Search`存在，但它不会需要一个空白查询。基本上，我只想从任何地方获取任何内容的最新推文。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:50:25.957

你看过[流媒体 API](http://twitter4j.org/en/code-examples.html#streaming)吗？使用该`sample`功能，您无需提供任何标准，即可获得所有推文的样本。

# apache - 如何让apache为414错误加载自定义页面

> ID：16124894
> 
> 赞同：3
> 
> 时间：2013-04-20T20:32:25.773
> 
> 标签：apache, .htaccess, error-handling

使用 htaccess，我设法使错误页面在我的网站上漂亮地显示，如下所示：

```
ErrorDocument errorcode /pathtopage 
```

包含的代码适用于我测试过的每一个错误代码，除了**Error 414 Request URI too long**。在这种情况下，Apache 似乎完全忽略了 htaccess 文件 - 有没有办法让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T20:38:18.097

某些错误页面（如 414 和 400）只能在服务器配置中自定义。我不知道原因，但是如果您有自己的服务器，那应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T21:22:40.150

从[`ErrorDocument`](http://httpd.apache.org/docs/current/mod/core.html#errordocument)

> 尽管可以覆盖大多数错误消息，但在某些情况下，无论 ErrorDocument 的设置如何，都会使用内部消息。特别是，如果检测到格式错误的请求，将立即停止正常的请求处理并返回内部错误消息。这对于防止由错误请求引起的安全问题是必要的。

似乎“414 Request-URI Too Large”被认为足够严重，可以忽略适当的`ErrorDocument 414`设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:10:00.217

For a "dirty hack" you can use something I use sometimes to my clients

```
ErrorDocument 414 '<meta http-equiv="refresh" content="0;URL=/error/414"><script>document.location.href=/error/414;</script>' 
```

It works fine in most situations. Also consider the alternative of RewriteCond, something like this.. Is only a pseudo example.. (for regex examples you must pay, just joking)

```
RewriteCond %{REQUEST_URI} !^({max leght of uri here})$
RewriteRule ^(.*)$ /error/414 
```

Hope to give you an idea, cya

# c++ - 循环枚举值的实现

> ID：16124897
> 
> 赞同：7
> 
> 时间：2013-04-20T20:32:47.460
> 
> 标签：c++, c++11, enums

实现具有循环值的枚举以及从一个值转换到另一个值的适当函数的最佳方法是什么？

例如：

```
enum class Direction {
    NORTH, EAST, SOUTH, WEST
};

constexpr Direction left(Direction d) {
    return (Direction)((std::underlying_type<Directions>::type(d) - 1) % 4);
} 
```

但是，我觉得这很容易出错并且通常不可读。有没有更合适的方法来处理这种类型的枚举？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-20T20:40:59.443

你总是可以这样做：

```
enum class Direction {
    NORTH, EAST, SOUTH, WEST, NUMBER_OF_DIRECTIONS
};

constexpr Direction left(Direction d) {
    using ut = std::underlying_type<Direction>::type;
    return (Direction)((ut(d) + ut(Direction::NUMBER_OF_DIRECTIONS)-1)
                       % ut(Direction::NUMBER_OF_DIRECTIONS));
} 
```

使用示例/小测试：

```
#include <iostream>

std::ostream& operator<<(std::ostream& os, Direction d)
{
    switch(d)
    {
        case Direction::NORTH: return os << "NORTH";
        case Direction::EAST : return os << "EAST";
        case Direction::SOUTH: return os << "SOUTH";
        case Direction::WEST : return os << "WEST";
        default              : return os << "invalid";
    }
}

int main()
{
    Direction d = Direction::NORTH;
    for(int i = 0; i < 2*(int)Direction::NUMBER_OF_DIRECTIONS; ++i)
    {
        std::cout << d << "\n";
        d = left(d);
    }
} 
```

输出：

```
北
西方
南
东
北
西方
南
东

```

[活生生的例子](http://coliru.stacked-crooked.com/a/9490e0c393a4d520)

# java - 如何让套接字保持活动状态直到窗口关闭 Java

> ID：16124899
> 
> 赞同：0
> 
> 时间：2013-04-20T20:33:08.393
> 
> 标签：java, sockets

我正在尝试实现这个程序，该程序将允许用户从服务器上传/下载文件（client.java 和 server.java 在同一台机器上运行）

![在此处输入图像描述](https://i.stack.imgur.com/v1iJ6.png)

我遇到的问题是，当他们选择文件并单击按钮上传时，将不允许他们第二次上传，因为套接字不再存在。

如何确保我可以让套接字保持活动状态，直到窗口关闭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:34:13.610

假设您[正确设置了套接字](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)，请使用[`WindowListener`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowListener.html)：

```
// Listens for closing event
frame.addWindowListener(new WindowAdapter()
{
    public void windowClosing(WindowEvent e)
    {
        // Do stuff
        socket.close(); // Make sure socket is visible here
    }
}); 
```

# ios - ACAccountStore 在设备上返回空数组，但在模拟器上工作

> ID：16124901
> 
> 赞同：2
> 
> 时间：2013-04-20T20:33:19.303
> 
> 标签：ios, cocoa-touch, twitter, slrequest

我正在开发一个应用程序，我想在其中使用`SLRequest`. 我已经让它在模拟器上工作，但它不能在我的设备上工作。

```
 [self.accountStor accountsWithAccountType:accountTypeTwitter]; 
```

在我的设备上返回一个空数组，但它在模拟器上显示正确的帐户。我不知道为什么会这样。

我有一种方法可以获取用户的 Twitter 帐户。它看起来像这样：

```
- (void)fetchTwitterAccounts
{
    if (self.accountStore == nil) {
        self.accountStore = [[ACAccountStore alloc] init];
    }

    ACAccountType *accountTypeTwitter = [self.accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
    self.twitterAccounts = [self.accountStore accountsWithAccountType:accountTypeTwitter];
    [self.tableView reloadData];
} 
```

关于为什么我的设备上没有任何帐户的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T21:13:22.453

您有 Twitter 帐户并且该应用程序有权在您的设备上使用它们？`requestAccessToAccountsWithType`在尝试获取帐户列表之前是否调用？

检查下面的示例，如何通过首先请求访问权限来检索帐户列表，并且只有在检索帐户列表的用户授予的情况下

[https://dev.twitter.com/docs/ios/making-api-requests-slrequest](https://dev.twitter.com/docs/ios/making-api-requests-slrequest)（特别是第 32-42 行）。

# javascript - 在没有任何phonegap插件的情况下使用facebook登录

> ID：16124902
> 
> 赞同：2
> 
> 时间：2013-04-20T20:33:23.893
> 
> 标签：javascript, facebook, cordova

我想使用 facebook 的 javascript SDK 在我的应用程序中创建一个 facebook 登录按钮，问题是当我尝试使用 facebook 登录时，它会打开默认浏览器，显示一个错误，告诉 url 问题存在跨域问题。

我想知道我是否可以在没有任何插件的情况下制作按钮，因为当我在谷歌上搜索时，我总是会找到使 facebook 对话框进入应用程序的插件，以及如何解决该问题以便能够在没有 ajax 通信的情况下加载该对话框问题。

我知道要做到这一点，我们需要一个 facebook 应用程序来获取应用程序 ID 并使用 API，但我使用的是 heruko 托管我需要了解 channel.html 文件如何使用它来发出跨 ajax 请求与应用程序。多数民众赞成在感谢您提前帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:36:23.357

我编写了一个使用 childbrowser 制作 facebook 登录应用程序的基本工作流程 - [https://github.com/DrewDahlman/phonegapFacebookApp](https://github.com/DrewDahlman/phonegapFacebookApp)

那应该为您指明正确的方向。

# html - CSS导航精灵悬停不起作用

> ID：16124904
> 
> 赞同：0
> 
> 时间：2013-04-20T20:33:39.430
> 
> 标签：html, css, hover, sprite

我在尝试为我的精灵导航实现 CSS 部分以在悬停时从我的精灵带来“悬停”效果时遇到问题。如果我显示代码更容易解​​释。

CSS：

```
#nav {

    width:837px;
    float:left;
    margin:0px 0px 0px 30px;
    background:url(../images/withtext.gif) repeat-x;
    height:79px;
    position: relative;
    top: -45px;
}   

#nav li {
 margin:0;
 padding:0;
 list-style-type:none;
 display:inline; 
 height:79px;
 text-align:center; 
 float:left; 
 line-height:79px; 
 font-family:Georgia, "Times New Roman", Times, serif;
 }

#nav a {
 display:block;
 height:79px; 
 color:#311f11;
 text-decoration:none;
 font-size:13px;
 }

#nav a:hover {
 background-image:url(withtext.gif); 
 color:#fff;
 }

#nav .snowboard { width:240px; }
#nav .snowboard a:hover { background-position: 0px bottom; } 
```

的HTML：

```
<ul id="nav">
   <li class="snowboard"><a href="#">Snowboard</a></li>
   <li class="briller"><a href="#">Briller</a></li>
   <li class="ski"><a href="#">Ski</a></li>
   <li class="stovler"><a href="#">Stovler</a></li>
   <li class="handlevogn"><a href="#">Handlevogn</a></li>

</ul> 
```

导航图片：

[1] [http://i.imgur.com/zkVmoEN.gif](http://i.imgur.com/zkVmoEN.gif) "具有被动和悬停状态的导航栏"

当前导航状态：

[2] [http://i.imgur.com/oZPK8kd.jpg](http://i.imgur.com/oZPK8kd.jpg) “浏览器导航”

那么我该如何让它在悬停时将图像向下移动一个完整的缺口？

帮助非常感谢提前！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:57:55.007

Here goes your working [solution](http://codepen.io/sonu/pen/ysoIC)

```
#nav ul, #nav li{
  margin: 0;
  padding: 0;
}
#nav {

    width:837px;
    float:left;
    margin:0px 0px 0px 30px;
    background:url(http://i.imgur.com/zkVmoEN.gif) repeat-x;
    height:79px;
    position: relative;
}   

#nav li {
 margin:0;
 padding:0;
 list-style-type:none;
 display:inline; 
 height:79px;
 text-align:center; 
 float:left; 
 line-height:79px; 
 font-family:Georgia, "Times New Roman", Times, serif;
 }

#nav a {
 display:block;
 height:79px; 
 color:#311f11;
 text-decoration:none;
 font-size:13px;
  width:150px;
  text-indent:-9999px;
 }
.snowboard a:hover {
  background-image: url(http://i.imgur.com/zkVmoEN.gif);
  background-position: -40px 80px;
}
.briller a:hover {
  background-image: url(http://i.imgur.com/zkVmoEN.gif);
  background-position: -190px 80px;
}
.ski a:hover {
  background-image: url(http://i.imgur.com/zkVmoEN.gif);
  background-position: -340px 80px;
}
.stovler a:hover {
  background-image: url(http://i.imgur.com/zkVmoEN.gif);
  background-position: -490px 80px;
}
.handlevogn a:hover {
  background-image: url(http://i.imgur.com/zkVmoEN.gif);
  background-position: -640px 80px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T20:44:47.177

Try:

```
#nav li a {
 display:block;
 height:79px; 
 color:#311f11;
 text-decoration:none;
 font-size:13px;
 }

#nav li a:hover {
 background-image:url(withtext.gif); 
 color:#fff;
 }

#nav li.snowboard { width:240px; }
#nav li.snowboard a:hover { background-position: 0px -79px; }/*Here change as needed.*/ 
```

Css classes always use the tags eg.: `li.class{}` Try to keep the selectors trading at the same level:

```
foo foo2 foo2 a{}
foo foo2 foo2 a:hover{} 
```

In background-position use px negative and positive.

> **Note-OFF:** I recommend that if you have trouble making your css wheels in various browsers, you try to use CSS RESET:
> 
> *{ margin:0; padding:0; list-style-type:none; }

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T20:48:59.523

如果您在使用 CSS 时遇到问题，可能是因为您只是在文本中添加了悬停效果。顺便说一句，您不能将文本悬停在您想要的位置。如果你愿意，你可以试试这个：

CSS：

```
 #nav{background:url(../images/withtext.gif) 
    repeat-x;
    height:100px;
    width:100%;
    }
li {
background-color: #??????;
}
li a {
color: black;
}
li:hover {
background-color: #something_different;
}
li a:hover {
color:#something_different;
} 
```

或者，如果你想让 li 类各不相同，你可以这样做：

```
.snowboard li:hover {
Some code...
}

.snowboard li a:hover {
some code
} 
```

如果你的布局是这样的，你基本上可以做任何事情。

# java - Android 手机上的 OpenCV 教程

> ID：16124906
> 
> 赞同：3
> 
> 时间：2013-04-20T20:33:53.260
> 
> 标签：java, android, opencv, android-ndk-r7, java-native-interface

如果有人能告诉我在哪里可以获得用于开发适用于 Android 的 OpenCV 2.4.3 的优秀教程或文档，我将不胜感激。我已经浏览了 OpenCv 站点上的那个，它更多的是配置和入门，但没有解释真正的代码。我想要用于 android 代码、函数的 opencv 以及这些函数的作用。Android上的opencv是用Java cv编写的还是使用Java Native Interface包含的本机C++代码？

***如果它是 Java 简历，那么我在哪里可以获得可以让我入门的好教程。如果它是 JNI 中包含的 C++ 代码，我如何将这些 Native 代码与原始 Android java 代码接口？***

**如果有人可以向我展示一些好的教程或文档（如果有的话**），我将不胜感激？如果不是，我想请你解释一下？此致。

**编辑：**

感谢 Torcelite 的回复。您能否详细解释一下我将如何将代码移植到 java （比如更详细一点）？是否有一个很好的教程来解释我如何做到这一点。我的意思是当我移植代码时，如果有的话，我会对我为桌面应用程序所做的原始 openCV 代码进行哪些更改。或者我只是将 Visual Studio 的 open CV 上的 C++ 代码移植到 Android eclipse 中，以便在 Android 的 Open cv 上工作。

例如，在我的面部检测代码中，我使用了 haar 分类器及其内置的对象检测功能。

```
function--->[cvHaarDetectObjects( , , , ,  , , ) 
//just deleted the parameters for simplicity] 
```

因此，当我想在 android 上做同样的事情时，我会在使用此功能时进行更改还是按原样进行更改？当我必须在 Android 上移植或采用这些和其他功能以使它们工作时，我应该做什么样的工作。不仅是这个函数，还有 OpenCV 中的所有函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T10:18:10.503

我不想告诉你，但 Android 的 OpenCV 直到现在还没有得到太多关注。我自己还没有完全弄清楚函数和算法。不过，我确实创建了一个小型[图像比较优化工具](http://github.com/torcellite/imageComparator)。另外，我建议你从这[本书](http://shop.oreilly.com/product/0636920022497.do)中学习 OpenCV 。您只需要在 Java 中移植代码。

从 C++ 到 JAVA 的“移植”代码意味着将 C++ 中的代码转换为 JAVA，即您正在更改语法。

所以，[这](http://docs.opencv.org/doc/tutorials/features2d/feature_flann_matcher/feature_flann_matcher.html#feature-flann-matcher)将变成[这样](https://github.com/torcellite/imageComparator/blob/master/imageComparator/src/com/torcellite/imageComparator/MainActivity.java)。

PS - 我的代码没有使用 FlannMatcher，这不是完整的代码移植，但它是要点。您的语法发生了变化，但算法保持不变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-19T01:05:05.393

如果您对文档不满意，我所知道的所有关于 opencv 的书籍（那里没有那么多）您可以在以下 2 个链接中找到它们。

有一个**关于 Android**的特定内容- “使用 OpenCV 进行 Android 应用程序编程”。除了官方文档之外，它可能是最好的来源。

[http://opencv.org/books.html](http://opencv.org/books.html)

[http://www.packtpub.com/search?keys=opencv](http://www.packtpub.com/search?keys=opencv)

Android 的 OpenCV（以及最近的桌面 Java）与 JavaCV 无关，第一个是官方端口，它基本上是 C++ 函数的 JNI 包装器。JavaCV 是独立研究员 Samuel Audet 对 Java 的早期移植（因为它不正式属于 OpenCV 团队）。

# python - Python/Tornado - 压缩静态文件

> ID：16124908
> 
> 赞同：14
> 
> 时间：2013-04-20T20:34:18.267
> 
> 标签：python, django, templates, tornado, django-compressor

对于 django 项目，有一个很棒的工具叫做[django-compressor](http://django-compressor.readthedocs.org/en/latest/)。它将`compress`模板标签下的所有 js 或 css 文件组合到单个缓存文件中，如下所示：

```
{% load compress %}

{% compress css %}
<link rel="stylesheet" href="/static/css/one.css" type="text/css" charset="utf-8">
<style type="text/css">p { border:5px solid green;}</style>
<link rel="stylesheet" href="/static/css/two.css" type="text/css" charset="utf-8">
{% endcompress %} 
```

我想知道龙卷风项目是否有类似的东西？或者可能有任何解决方法/替代解决方案？

我在 github 上找到[了这个](https://github.com/jgallen23/tornado-compress)项目，但它不再维护。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-26T11:29:07.180

看看[tornado_utils](https://github.com/peterbe/tornado-utils/)，它应该做你想做的事。特别是看一下[tornado_static.py](https://github.com/peterbe/tornado-utils/blob/master/tornado_utils/tornado_static.py)

> tornado_static 是一个用于在 Tornado Web 应用程序中显示静态资源的模块。
> 
> 它可以处理合并、压缩和为 URL 提供适合激进 HTTP 缓存的理想重命名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-28T20:29:16.780

到目前为止我见过的最好的选择是**[WebAssets](http://webassets.readthedocs.org/en/latest/)**。

> 来自文档： *webassets 是一个通用的、独立于依赖项的库，用于管理 Web 应用程序的资产。它可以合并和压缩您的 CSS 和 JavaScript 文件，支持各种不同的过滤器，并支持使用 CoffeeScript 或 Sass 等编译器。*

您可以将它与 tornado 一起以*独立模式使用（请参阅*[特定文档](http://webassets.readthedocs.org/en/latest/generic/index.html)）。

设置简单且非常简单：

```
from webassets import Environment
static_directory = "../static"
output_directory = "/static"
my_env = Environment(static_directory, output_directory) 
```

当然，您可以更好地自定义它。其余的在文档中得到了很好的解释。

**主要特点：**

*   易于集成
*   可以提前压缩静态文件（命令行工具）
*   可以动态压缩静态文件
*   支持大多数压缩/压缩库（JS、CSS）
*   支持在浏览器内编译 LESS/SASS
*   支持在浏览器内压缩 JS 模板（Handlebars...）
*   支持 CSS 精灵映射器

正确配置后模板（此处为 Jinja2）的示例：

```
# css
{% assets filters="cssmin", output="css/compiled-layout.css",
    "css/custom.css",
    "css/bootstrap-datepicker.css",
    "css/typeahead.css" %}
    <link rel="stylesheet" type="text/css" href="{{ ASSET_URL }}">
{% endassets %}

# js
{% assets filters="jsmin", output="js/lib/compiled-libs.js",
    "js/lib/jquery-2.1.1.min.js",
    "js/lib/jquery-ui.min.js",
    "js/lib/bootstrap.min.js",
    "js/lib/bootstrap-datepicker.js",
    "js/lib/d3.min.js",
    "js/lib/typeahead.bundle.min.js",
    "js/lib/moment.min.js",
    "js/lib/handlebars-v2.0.0.js",
    "js/global.js" %}
    <script type="text/javascript" src="{{ ASSET_URL }}"></script>
{% endassets %} 
```

我已经使用与 Flask 绑定的 WebAssets 一年了，没有任何麻烦，它非常可靠，而且维护良好：它已经存在好几年了，[迄今为止的最后一次提交是昨天](https://github.com/miracle2k/webassets)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-26T08:26:39.383

据我了解，通过研究开源`tornado`项目，在“龙卷风世界”中没有标准和规范的方法来进行静态文件缩小和压缩。

我见过的不同选择是：

*   [`tornado_utils`](https://github.com/peterbe/tornado-utils/)（见另一个答案）
*   一个新的[`torminify`模块](https://github.com/PaulDiakov/torminify)
*   Douglas Crockford 的`jsmin.c`python 端口，请参阅：
    *   [jsmin.py](https://www.cacetech.com/scripts/jsmin.py)
*   YUI CSS 压缩器的 Python 端口：
    *   [CSS压缩器](https://pypi.python.org/pypi/csscompressor)
    *   [cssmin.py](https://github.com/lebabouin/CouchPotatoServer-develop/blob/223061ffac8f537965dd776c6bc6c492ccffe252/libs/minify/cssmin.py)
*   [`slimit.minify()`](http://slimit.readthedocs.org/en/latest/#let-s-minify-some-code)[javascript解析器](https://pypi.python.org/pypi/slimit)的[`slimit`](https://pypi.python.org/pypi/slimit)

只有前两个选项是特定于龙卷风的。其他工具需要手动绑定 Tornado 模板渲染和静态文件服务机制。

# c++ - 这是将数组传递给函数的正确方法吗？

> ID：16124910
> 
> 赞同：0
> 
> 时间：2013-04-20T20:34:27.370
> 
> 标签：c++

这是在函数中传递数组的工作程序，但我无法理解在`print`函数中只传递了数组的基地址，但我仍然可以使用 subscript 访问数组`a[i]`。我知道正确的方法是`*(a+i)`，但为什么它也适用于下标？

```
#include <iostream>
#include <conio.h>
void print(int *a);
using namespace std;
int main()
{
    int arr[3]={1,2,3};
    print(arr);
    getch();
    return 0;
}
void print(int *a)
{
    for(int i=0;i<3;i++)
    {
        cout<<a[i];//how we are able to access array with subscipt a[i]
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T20:36:17.417

由于您正在传递一个指针（指向特定的内存地址），即使在函数内部，您也可以像往常一样对待它。指针和数组关系非常密切，使用起来也很好。

a[0] 和 *a 是一样的，所以 a[1] 和 *(a+1) 等等。

*“指针等同于它指向的第一个元素的地址”* - 来自[http://www.cplusplus.com/doc/tutorial/pointers/](http://www.cplusplus.com/doc/tutorial/pointers/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T21:24:54.373

数组可以这样传递，但另一种方法是把数组名放在空[]后面：

```
#include <iostream>
#include <conio.h>
void print(int *a);
using namespace std;
int main()
{
    int arr[3]={1,2,3};
    print(arr);
    getch();
    return 0;
}
void print(int a[])
{
    for(int i=0;i<3;i++)
    {
        cout<<a[i];//how we are able to access array with subscipt a[i]
    }
} 
```

两种方法都传递数组中第一个数字的地址，因此两种方法都有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T22:00:43.450

> //我们如何使用下标 a[i] 访问数组

`a[i]`和 是一样的`*(a + i)`。

* * *

就像现在一样，您`print`将**仅**适用于精确大小为 3 的数组，因此：

*   如果数组恰好有超过 3 个元素，则某些元素将不会被打印。
*   如果它恰好小于 3，您将访问数组后面的内存中的任何内容，这是未定义的行为（翻译：非常糟糕！）。

当您将数组传递给函数时，数组的大小会被“遗忘”，因此要么显式传递大小以使函数可重用所有大小的数组（可重用性毕竟是拥有函数的关键！）...

```
void print(int const* a, size_t a_size) {
    for (size_t i = 0; i < a_size; ++i) // size_t is the appropriate type here, not int.
        std::cout << a[i] << std::endl; // Use std::endl to be able to discern where teh current number ends and the next starts!
}

// ...

int arr[3] = {1, 2, 3};
const size_t arr_size = sizeof(arr) / sizeof(arr[0]);
print(arr, arr_size); 
```

...或以 C++ 方式执行并使用`std::vector`...

```
void print(const std::vector<int>& a) {
    for (const auto& s : a) // The new C++11 "for each" syntax.
        std::cout << s << std::endl;
}

// ...

std::vector<int> a;
a.push_back(1);
a.push_back(2);
a.push_back(3);
print(a); 
```

...甚至使它通用...

```
template <typename T>
void print(const std::vector<T>& a) {
    for (const auto& s : a)
        std::cout << s << std::endl;
} 
```

# ruby-on-rails - 一个月的轨道用户特定路线和引脚控制器

> ID：16124912
> 
> 赞同：1
> 
> 时间：2013-04-20T20:35:02.597
> 
> 标签：ruby-on-rails, devise, admin, model-associations

我想更改我的 pin 生成的路径，以适应管理员用户访问其他用户 pin 并能够删除它们。

我用设计创建了一个用户模型并添加了管理属性。这工作正常，但由于我已将每个引脚与控制器中的 current_user 相关联，因此在以管理员用户身份登录时，我无法删除其他引脚或查看引脚。

我认为问题出在我的 pins_controller.rb

`@pin = current_user.pins.find(params[:id])`

以下是不起作用的实际路线

```
<% if current_user == pin.user or user_signed_in? && current_user.admin? %>
    <p>
      <%= link_to content_tag(:i, "", class:"icon-edit"), edit_pin_path(pin) %> |
      <%= link_to content_tag(:i, "", class:"icon-trash"), pin, method: :delete, data: { confirm: 'Are you sure?' } %>
    </p>
<% end %> 
```

我也可能对此有误，问题可能出在 routes.rb 文件中

```
Omrails::Application.routes.draw do

get "users/show"

resources :pins

devise_for :users
match 'users/:id' => 'users#show', as: :user

get 'about' => 'pages#about'

root :to => 'pins#index' 
```

我的 git 存储库在这里：[https ://github.com/nathan-wallace/imageapp.git](https://github.com/nathan-wallace/imageapp.git)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:45:30.253

你可以试试这个

```
 <% if user_signed_in? %>
      <% if (current_user == @pin.user) or current_user.admin? %>
      <p>
        <%= link_to content_tag(:i, "", class:"icon-edit"), edit_pin_path(pin) %> |
        <%= link_to content_tag(:i, "", class:"icon-trash"), pin, method: :delete, data: {               confirm: 'Are you sure?' } %>
      </p>
     <% end %>
    <% end %> 
```

# sql-server-2008 - 一次更新多行的 SQL 查询

> ID：16124916
> 
> 赞同：0
> 
> 时间：2013-04-20T20:35:52.270
> 
> 标签：sql-server-2008

我需要帮助编写一个更新查询来帮助我清理下表。我一直在手动完成每一行，这只是一个漫长而疲惫的过程。

有没有办法编写一次更新整个表的更新查询。

```
The rules:
1\. All fields ending with m1 should only contain a value of 'aprn' 
2\. All fields ending with m2 should only contain a value of 'pa'
3\. If 'pa' does exist in a field ending with m1 then that means that field should be NULL and the value 'pa' should be moved to the m2 column. 

table_a
org_id org_name     a_m1   a_m2    b_m1     b_m2
1       north       aprn   pa      aprn     pa
2       south       null   null    pa       null
3       east        pa     null    pa       null
4       west        null   pa      null     pa

Correct: ORG_ID=1 (a_m1, a_m2, b_m1, b_m2)
Correct: ORG_ID=4 (a_m1, a_m2, b_m1, b_m2)
Correct: ORG_ID=2 (a_m1, a_m2)

Incorrect: ORG_ID=2 (b_m1, b_m2)
Incorrect: ORG_ID=3 (a_m1, a_m2, b_m1, b_m2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:16:41.100

```
update table_a
set
a_m2 = case when a_m1 = 'pa' or a_m2 = 'pa' then 'pa' end
, b_m2 = case when b_m1 = 'pa' or b_m2 = 'pa' then 'pa' end
, a_m1 = case when a_m1 = 'aprn' then a_m1 end
, b_m1 = case when b_m1 = 'aprn' then b_m1 end 
```

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/105d7/8)。

它当然适用于您的数据集。如果这对您不起作用，请在您的问题中添加更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T21:17:07.037

如果我正确理解您的问题，我怀疑多个更新语句可能是最好的。我喜欢对更改数据的语句做的一件事是让它们保持简单。我更喜欢编写多个语句，让 RDBMS 做更多的工作，更慢，等等，但总是正确的。从错误的数据更改中恢复可能很困难。

我不确定我是否完全理解您的标准，但类似于以下内容。如果我理解正确，您是否需要在 1\. 和 2\. 之前运行 3.？

1.  ```
    update table_a
       set a_m1 = 'aprn'
     where a_m1 = 'pa'; 
    ```

2.  ```
    update table_a
       set a_m2 = 'pa'
     where a_m2 = 'aprn'; 
    ```

3.  ```
    update table_a
       set a_m1 = NULL
       set a_m2 = 'pa'
     where a_m1 = 'pa';

    update table_a
       set b_m1 = NULL
       set b_m2 = 'pa'
     where b_m1 = 'pa'; 
    ```

# java - getTermFreqVector() - NullPointerException

> ID：16124917
> 
> 赞同：0
> 
> 时间：2013-04-20T20:35:54.163
> 
> 标签：java, nullpointerexception, lucene, tf-idf

我正在尝试使用以下代码获取一组文档的 tf：

```
IndexReader r = IndexReader.open(FSDirectory.open(new File("index")));

TermFreqVector tfv = r.getTermFreqVector(root[i],"contents"); // where root[] contains the
document IDs of the documents in my corpus 
```

我不断收到空指针异常。谁能告诉我这里可能出了什么问题？我使用的是 Lucene 3.6.2，是否有确保在索引时启用 termFreqVector？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T23:30:20.157

如果我的猜测是正确的，那么该字段`contents`是一个 TextField，它被索引和标记化但没有术语向量。因此你得到一个空值。人们需要更多信息来调试确切的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-09T19:31:25.340

将字段添加到索引中，您应该像这样指定第四个参数：

doc.Add(new Field("text", text, Field.Store.NO, Field.Index.ANALYZED,Field.TermVector.YES));

# php - 如果名称中有空格，则联系表不会发送

> ID：16124918
> 
> 赞同：0
> 
> 时间：2013-04-20T20:36:03.787
> 
> 标签：php, forms, contact

我正在查看一个网站的联系表，但现在它不想在发件人姓名（如“John Smith”）中有空格时发送，它只在只有一个单词（“John”）时发送。问题可能出在哪里，我对.php一无所知，但我正在寻找解决办法。

编辑：好的，这是代码

```
<?php

function sendemail($toname, $toemail, $fromname, $fromemail, $subject, $message, $type = "plain", $cc = "", $bcc = "") {

    require_once "class.phpmailer.php";

    $mail = new PHPMailer();

        $mail->IsMAIL();

    $mail->CharSet = "UTF-8";
    $mail->From = $fromemail;
    $mail->FromName = $fromname;
    $mail->AddAddress($toemail, $toname);
    $mail->AddReplyTo($fromemail, $fromname);
    if ($cc) { 
        $cc = explode(", ", $cc);
        foreach ($cc as $ccaddress) {
            $mail->AddCC($ccaddress);
        }
    }
    if ($bcc) {
        $bcc = explode(", ", $bcc);
        foreach ($bcc as $bccaddress) {
            $mail->AddBCC($bccaddress);
        }
    }
    if ($type == "plain") {
        $mail->IsHTML(false);
    } else {
        $mail->IsHTML(true);

    $mail->Subject = $subject;
    $mail->Body = $message;

    if(!$mail->Send()) {
        $mail->ErrorInfo;
        $mail->ClearAllRecipients();
        $mail->ClearReplyTos();
        return false;
    } else {
        $mail->ClearAllRecipients(); 
        $mail->ClearReplyTos();
        return true;
    }

}
}

function descript($text, $striptags = true) {
// Convert problematic ascii characters to their true values
    $search = array("40","41","58","65","66","67","68","69","70",
        "71","72","73","74","75","76","77","78","79","80","81",
        "82","83","84","85","86","87","88","89","90","97","98",
        "99","100","101","102","103","104","105","106","107",
        "108","109","110","111","112","113","114","115","116",
        "117","118","119","120","121","122"
        );
    $replace = array("(",")",":","a","b","c","d","e","f","g","h",
        "i","j","k","l","m","n","o","p","q","r","s","t","u",
        "v","w","x","y","z","a","b","c","d","e","f","g","h",
        "i","j","k","l","m","n","o","p","q","r","s","t","u",
        "v","w","x","y","z"
        );
    $entities = count($search);
    for ($i=0; $i < $entities; $i++) {
        $text = preg_replace("#(&\#)(0*".$search[$i]."+);*#si", $replace[$i], $text);
    }
    $text = preg_replace('#(&\#x)([0-9A-F]+);*#si', "", $text);
    $text = preg_replace('#(<[^>]+[/\"\'\s])(onmouseover|onmousedown|onmouseup|onmouseout|onmousemove|ondblclick|onfocus|onload|xmlns)[^>]*>#iU', ">", $text);
    $text = preg_replace('#([a-z]*)=([\`\'\"]*)script:#iU', '$1=$2nojscript...', $text);
    $text = preg_replace('#([a-z]*)=([\`\'\"]*)javascript:#iU', '$1=$2nojavascript...', $text);
    $text = preg_replace('#([a-z]*)=([\'\"]*)vbscript:#iU', '$1=$2novbscript...', $text);
    $text = preg_replace('#(<[^>]+)style=([\`\'\"]*).*expression\([^>]*>#iU', "$1>", $text);
    $text = preg_replace('#(<[^>]+)style=([\`\'\"]*).*behaviour\([^>]*>#iU', "$1>", $text);
    if ($striptags) {
        do {
            $thistext = $text;
            $text = preg_replace('#</*(applet|meta|xml|blink|link|style|script|embed|object|iframe|frame|frameset|ilayer|layer|bgsound|title|base)[^>]*>#i', "", $text);
        } while ($thistext != $text);
    }
    return $text;
}

$name=0;
$telefon=0;
$sender=0;
$syobshtenie=0;
$ename=0;
$etelefon=0;
$esender=0;
$esyobshtenie=0;

if($_POST['name']){
$name = "Запитване от ".$_POST['name'];
}
else { $name=1; $ename=1; }

if($_POST['sender']){
$sender = $_POST['sender'];
if(!eregi("^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$", $sender))
{
$sender="Email";
}
}

else { $sender=1; $esender=1; }

if($_POST['telefon']){
$telefon = $_POST['telefon'];
}

if($_POST['zapitvane']){
$zapitvane = $_POST['zapitvane'];
$syobshtenie = "<p>Запитване от ".$_POST['name']."
<br />Email: ".$sender."
<br />Телефон: ".$telefon."</p>".$zapitvane;
}

    else { $syobshtenie=1; $esyobshtenie=1; }

if($name=="Име"){ $ename=1; }
if($telefon=="Телефон"){ $etelefon=1; }
if($sender=="Email"){ $esender=1; }
if($syobshtenie=="Моля, въведете съобщение до нас"){ $esyobshtenie=1; }

if($ename==0 && $esender==0 && $esyobshtenie==0 && $etelefon==0){

sendemail("VillaDes", "info@konsumator.com", "", $sender, $name, $syobshtenie, "", "", "");

echo '
<div class="active-error"" style="margin-top:5px;">Съобщението Ви беше изпратено.<br /><br />Приятен ден!</div>
<script>
document.getElementById("contact").reset();
</script>';
}

else {
echo '
<div class="border-15"></div><div class="active-error"><b>Моля, въведете:</b></div><div class="border-8"></div>';

if($ename==1) { echo '<div class="active-error">Име</div><div class="border-8"></div>'; }
if($esender==1) { echo '<div class="active-error">Е-поща</div><div class="border-8"></div>'; }
if($etelefon==1) { echo '<div class="active-error">Телефон</div><div class="border-8"></div>'; }
if($esyobshtenie==1) { echo '<div class="active-error">Запитване</div>'; }  
}

                echo '<script type="text/javascript">
                $(document).ready(function() {
                $("#close-email").click(function () { $("#mailresult").hide("fast"); } );
                });
                </script>';

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:18:07.913

在您发布的代码中，您调用：

```
sendemail("VillaDes", "info@konsumator.com", "", $sender, $name, $syobshtenie, "", "", ""); 
```

您的 sendemail 函数接受：

```
sendemail($toname, $toemail, $fromname, $fromemail, $subject, $message 
```

所以`$fromname`将用作您电子邮件的主题，而formname 将为空。class.phpmailer.php 应该处理带有空格的主题，所以我认为这不是问题。当您使用空格时`$name`，`$fromemail`可能会出现问题。（不带空格的名字可以是本地邮箱？？）。

除此之外，您不需要 class.phpmailer.php 来发送您的电子邮件。使用默认邮件功能： http: [//php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

```
$headers = 'From: "'.$fromemail.'" <'.$fromname.'>' . "\r\n" .
'Reply-To: "'.$fromname.'" <'.$fromemail.'>' . "\r\n" .
'X-Mailer: PHP/' . phpversion();

mail('"VillaDes" <info@konsumator.com>',$syobshtenie, "", $headers); 
```

# java - 如何将颜色从白色变为黑色？

> ID：16124922
> 
> 赞同：0
> 
> 时间：2013-04-20T20:36:27.910
> 
> 标签：java, colors

我有一个计时器，它的颜色从白色变为黑色，但我遇到了一些问题。

我有一个整数数组来表示 RGB 值。

我有一个计时器，它每 100 毫秒运行一次，并递减数组中的 RGB 值。

我遇到的问题是我最终会在中间出现其他颜色，绿色黄色，红色等。

我想要做的是从白色褪色到黑色，所以我需要颜色在计时器运行时变成不同的灰色阴影。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:41:30.820

声明一个全局变量并调用它`fading`。

```
Color fading = Color.white; 
```

在你的计时器体内：

```
if(fading.getRed()>0){
    fading = new Color(fading.getRed()-1,fading.getGreen()-1,fading.getBlue()-1);
    //do whatever you have to do with your fading color
} 
```

每次您的计时器执行此代码时，它都会将 RGB 值从白色减少到黑色。

结果：

```
LOOP NO | COLOR
       1: R=255, G=255, B=255
       2: R=254, G=254, B=254
       3: R=253, G=253, B=253
       4: R=252, G=252, B=252
       5: R=251, G=251, B=251
       6: R=250, G=250, B=250
        .
        .
        .
     255: R=0,   G=0,   B=0 
```

**编辑**

例子：

```
import java.awt.Color;

public Class YourClass{

    Color fading = Color.white;

    public YourClass(){
        TimerTask task = new TimerTask() {
            @Override
            public void run() {
                if (fading.getRed() > 0) {
                    fading = new Color(fading.getRed() - 1, fading.getGreen() - 1, fading.getBlue() - 1);
                    //do other stuff here
                }
            }
        };

        Timer timer = new Timer();
        timer.scheduleAtFixedRate(task, 0, 100);
    }
} 
```

# javascript - 从 Django 在 jQuery 中输出一个值

> ID：16124928
> 
> 赞同：0
> 
> 时间：2013-04-20T20:36:58.547
> 
> 标签：javascript, jquery, django

的值`'content'`是一些解析的 json。我现在想在我的查询脚本中使用这个值。贝娄是我到目前为止所拥有的。该值需要介于两者之间 `var siteData = { }` **我该怎么做？**

我到目前为止所拥有的，但它不起作用。

**在我的 HTML 页面上：**

```
<script type="text/javascript">
    var temp = {{ content }};
</script> 
```

**在 builder.js 中：**

```
$(document).on('pagebeforeshow', '#index', function (event) {

    var siteData = {

       temp;

    }

}); 
```

这是错误：

```
**var temp = {&quot;name&quot;:&quot;dsaadsa&quot;,&quot;logo&quot;:&quot;** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:40:09.510

我认为你的变量**temp**有价值，你需要什么。

如果内容等于“ *{a:1, b:2}* ”，则呈现的html将为`var temp = {a:1, b:2};`

然后你可以写

```
$(document).on('pagebeforeshow', '#index', function (event) {
    var siteData = temp;     // window.temp
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T20:41:43.433

请发布带有完整回溯的确切错误，因为它们出现在 Javascript 控制台中，没有它们只是在黑暗中拍摄..

我相信你的语法不正确

`var temp`是全局的，它可以在 builder.js 中访问，但是`siteData`对于对象字面量来说是无效的语法；应该是这样的：

`var siteData = { key: value}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T20:55:18.430

Django 正在转义 JSON 字符串 try {{ content|safe }}

为了扩展一点，Django 提供了各种过滤器（其中“安全”就是其中之一），您可以将它们应用于要输出到模板的变量。

另一个例子是 {{ content|lower }} 输出小写文本。

这方面的文档在[这里](https://docs.djangoproject.com/en/dev/ref/templates/builtins/)

# java - 检测文件是否存在

> ID：16124932
> 
> 赞同：0
> 
> 时间：2013-04-20T20:37:18.620
> 
> 标签：java, file, java-io, method-call

好吧，文件“MyStore.obj”与我下载的表格一起附加。我应该阅读这个文件的内容，它是按照内容的顺序给出的。我怎样才能确定它是否存在？因为如您所见，我尝试使用该方法 exists() 但它不起作用

```
import java.io.*;

public class sheet{
public static void main(String[]args){
try{
FileInputStream fis=new FileInputStream("MyStore.obj");

if(("MyStore.obj").exists()==false) //what can i do to fix this?

throw new FileNotFoundException("file doesn't exist");

ObjectInputStream ois=new ObjectInputStream(fis);

int numOfStorageDevice=ois.readInt();
int numOfComputerGames=ois.readInt();

StorageDevice [] sd=new StorageDevice[numOfStorageDevice];

for(int n=0;n<numOfStorageDevice;n++)
 sd[n]=(StorageDevice)ois.readObject();

 ComputerGame []cg=new ComputerGame[numOfComputerGames];

 for(int m=0;m<numOfComputerGames;m++)

 cg[m]=(ComputerGame)ois.readObject();

   File file=new File("Result.txt");
    FileOutputStream fos=new FileOutputStream(file);
   PrintWriter pr=new PrintWriter(fos);

 for(int i=0;i<numOfStorageDevice;i++){

 String model= sd[i].getmodel(); 
  /*and in the methodcall sd[i].getmodel() it keeps telling that
    the symbol cannot be found but i'm sure that the method exists*/

 pr.println(model);}

for(int j=0;j<numOfComputerGames;j++){

pr.println(cg[j].getname());} 
 /*i keep getting the same problem with cg[j].getname() */
}
catch(FileNotFoundException e){System.out.print(e.getMessage());}
}} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T20:47:31.280

`exists()`测试文件是否存在，因此在逻辑上是[java.io.File](http://docs.oracle.com/javase/6/docs/api/java/io/File.html)类的一部分，而不是 String 类的一部分。所以代码应该是

```
File file = new File("MyStore.obj");
if (!file.exists()) {
    throw new FileNotFoundException("file doesn't exist");
} 
```

但是，在打开同一个文件的 FileInputStream 之后执行此检查并没有多大意义，因为如果文件不存在，FileInputStream 已经抛出了 FileNotFoundException，正如[它的 javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html#FileInputStream%28java.lang.String%29)所指示的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T20:47:58.697

尝试这个：

```
File data = new File("MyStore.obj");
if (!data.exists())
{
    System.out.println("File doesn't exist");
    System.exit(1);
}
FileInputStream fis = new FileInputStream(file); // and so on ... 
```

# ajax - h:selectManyChexkbox`s 当用户选择/取消选择 h:selectManyCheckbox 中的某些内容时，我想触发一个事件更改侦听器，如果它不理会它什么都不应该发生。 我的xhtml： <!DOCTYPE html P 问问题 问问题 2013-04-20T20:37:39.187 10610 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 当用户选择/取消选择 h:selectManyCheckbox 中的某些内容时，我想触发一个事件更改侦听器，如果它不理会它什么都不应该发生。 我的xhtml： <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:c="http://java.sun.com/jsp/jstl/core"> <h:head> <link rel="stylesheet" type="text/css" href="/juritest/resources/css/style.css" /> <script type="text/javascript" src="/juritest/resources/js/jquery-1.8.2.js"></script> <script type="text/javascript" src="/juritest/resources/js/menu.js"></script> </h:head> <h:body> <ui:composition template="../../templates/gridsTemplate.xhtml"> <ui:define name="content"> ... <h:panelGroup style="text-align: left"> <hr /> <h:selectManyCheckbox value="#{gridPopUpBean.oneQuestionUserAnswers}" layout="pageDirection"> <f:selectItem itemValue="a" itemLabel="#{gridPopUpBean.currentQuestion.a}" /> <f:selectItem itemValue="b" itemLabel="#{gridPopUpBean.currentQuestion.b}" /> <f:selectItem itemValue="c" itemLabel="#{gridPopUpBean.currentQuestion.c}" /> <f:ajax event="click" listener="#{gridPopUpBean.changeListener()}"/> </h:selectManyCheckbox> </h:panelGroup> ... 我收到一条错误消息，提示“一个或多个资源的目标是‘头’，但视图中没有定义‘头’组件。” 我有 <h:head> 不只是 <head>，我读到这是一个可能的问题。 以及来自 bean 的片段： public void changeListener(ValueChangeEvent e) { change = true; } 我试过没有 < f:ajax 之类的 <h:selectManyCheckbox value="#{gridPopUpBean.oneQuestionUserAnswers}" valueChangeListener="#{gridPopUpBean.changeListener()}" onclick="submit()" layout="pageDirection"> <f:selectItem itemValue="a" itemLabel="#{gridPopUpBean.currentQuestion.a}" /> <f:selectItem itemValue="b" itemLabel="#{gridPopUpBean.currentQuestion.b}" /> <f:selectItem itemValue="c" itemLabel="#{gridPopUpBean.currentQuestion.c}" /> <f:ajax event="click" listener="#{gridPopUpBean.changeListener()}"/> </h:selectManyCheckbox> 但没有运气... 如何绘制两个一维高斯分布和分类边界[Matlab]？ 我有两个类（正态分布），C1 和 C2，每个类都由它们的平均值和标准差定义。我希望能够可视化正态分布的 pdf 图和两者之间的分类边界。目前我有绘制分布的代码，但我不确定如何绘制决策边界。任何想法，将不胜感激。我已经包含了我想要绘制的样本。1 非常感谢！ ajaxjsfjsf-2event-handlingselectmanycheckbox 4 1 回答 1 This answer is useful 2 一个或多个资源的目标是 'head'，但视图中没有定义 'head' 组件。”我有 <h:head> 而不仅仅是 <head>，我读到这是一个可能的问题。 外面的任何东西<ui:composition>都被忽略了。如果您需要 a <h:head>，它需要进入主模板，gridsTemplate.xhtml（或其任何父模板）。 此外，如果您没有为您的 XHTML 文件使用可视化编辑器（如 Dreamweaver），那么我强烈建议您停止将任何内容放在外面<ui:composition>，否则您会一直感到困惑。 也可以看看： 如何使用 JSF 2.0 Facelets 在 XHTML 中包含另一个 XHTML？ <f:ajax event="click" listener="#{gridPopUpBean.changeListener()}"/> public void changeListener(ValueChangeEvent e) { 你混淆valueChangeListener了<f:ajax listener>. 该ValueChangeEvent参数仅适用于组件的valueChangeListener属性UIInput。摆脱那个论点。 public void changeListener() { 也可以看看： 何时使用 valueChangeListener 或 f:ajax 监听器？ 与具体问题无关，您正确使用了click（尽管您可以安全地完全省略它），但您的问题标题提到change，这确实是复选框和单选按钮的错误事件。 也可以看看： 我可以将哪些值传递给 f:ajax 标记的 event 属性？ 于 2013-04-20T21:31:59.697 回答 Related 1 jquery - 使用jquery从现有位置添加或减去一定数量的像素 1 java - Java 错误：Finch 类型中的方法不适用于参数（扫描仪）” 1 c - 打印类型定义 2 c# - 关于如何在页面和母版之间创建公共基类（或功能）的建议？ 7 c# - 递归在 C# 中的工作原理 2 javascript - 如何创建对象数组以将虚拟数据加载到 dynatree 中？ 0 point-sprites - 点精灵和广告牌之间的区别 1 ruby-on-rails - Rake 迁移找不到表 2 c# - c# 在类之间传递变量而不将它们公开 2 c++ - 在 vb.net 中通过引用传递 const 参数 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：16124933
> 
> 赞同：1
> 
> 时间：
> 
> 标签：ajax, jsf, jsf-2, event-handling, selectmanycheckbox

当用户选择/取消选择 h:selectManyCheckbox 中的某些内容时，我想触发一个事件更改侦听器，如果它不理会它什么都不应该发生。

我的xhtml：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:head>
<link rel="stylesheet" type="text/css"
    href="/juritest/resources/css/style.css" />
<script type="text/javascript"
    src="/juritest/resources/js/jquery-1.8.2.js"></script>
<script type="text/javascript" src="/juritest/resources/js/menu.js"></script>
</h:head>

<h:body>
<ui:composition template="../../templates/gridsTemplate.xhtml">
    <ui:define name="content">
        ...
                <h:panelGroup style="text-align: left">
                    <hr />
                    <h:selectManyCheckbox
                        value="#{gridPopUpBean.oneQuestionUserAnswers}" 
                        layout="pageDirection">
                        <f:selectItem itemValue="a"
                            itemLabel="#{gridPopUpBean.currentQuestion.a}" />
                        <f:selectItem itemValue="b"
                            itemLabel="#{gridPopUpBean.currentQuestion.b}" />
                        <f:selectItem itemValue="c"
                            itemLabel="#{gridPopUpBean.currentQuestion.c}" />
                        <f:ajax event="click" listener="#{gridPopUpBean.changeListener()}"/>
                    </h:selectManyCheckbox>
                </h:panelGroup>
   ... 
```

我收到一条错误消息，提示“一个或多个资源的目标是‘头’，但视图中没有定义‘头’组件。” 我有 <h:head> 不只是 <head>，我读到这是一个可能的问题。

以及来自 bean 的片段：

```
public void changeListener(ValueChangeEvent e) {

    change = true;
} 
```

我试过没有 < f:ajax 之类的

```
<h:selectManyCheckbox
                        value="#{gridPopUpBean.oneQuestionUserAnswers}" valueChangeListener="#{gridPopUpBean.changeListener()}" onclick="submit()"
                        layout="pageDirection">
                        <f:selectItem itemValue="a"
                            itemLabel="#{gridPopUpBean.currentQuestion.a}" />
                        <f:selectItem itemValue="b"
                            itemLabel="#{gridPopUpBean.currentQuestion.b}" />
                        <f:selectItem itemValue="c"
                            itemLabel="#{gridPopUpBean.currentQuestion.c}" />
                        <f:ajax event="click" listener="#{gridPopUpBean.changeListener()}"/>
                    </h:selectManyCheckbox> 
```

但没有运气...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T21:31:59.697

> *一个或多个资源的目标是 'head'，但视图中没有定义 'head' 组件。”我有 <h:head> 而不仅仅是 <head>，我读到这是一个可能的问题。*

外面的任何东西`<ui:composition>`都被**忽略了**。如果您需要 a `<h:head>`，它需要进入主模板，`gridsTemplate.xhtml`（或其任何父模板）。

此外，如果您没有为您的 XHTML 文件使用可视化编辑器（如 Dreamweaver），那么我强烈建议您停止将任何内容放在外面`<ui:composition>`，[否则您会一直感到困惑](https://stackoverflow.com/questions/15991653/javascript-does-not-work-under-jsf-template-again)。

### 也可以看看：

*   [如何使用 JSF 2.0 Facelets 在 XHTML 中包含另一个 XHTML？](https://stackoverflow.com/questions/4792862/how-to-include-another-xhtml-in-xhtml-using-jsf-2-0-facelets/4793959#4793959)

* * *

> ```
> <f:ajax event="click" listener="#{gridPopUpBean.changeListener()}"/>
> 
> public void changeListener(ValueChangeEvent e) { 
> ```

你混淆`valueChangeListener`了`<f:ajax listener>`. 该`ValueChangeEvent`参数仅适用于组件的`valueChangeListener`属性`UIInput`。摆脱那个论点。

```
public void changeListener() { 
```

### 也可以看看：

*   [何时使用 valueChangeListener 或 f:ajax 监听器？](https://stackoverflow.com/questions/11879138/when-to-use-valuechangelistener-or-fajax-listener/11883021#11883021)

* * *

**与具体问题无关**，您正确使用了`click`（尽管您可以安全地完全省略它），但您的问题标题提到`change`，这确实是复选框和单选按钮的错误事件。

### 也可以看看：

*   [我可以将哪些值传递给 f:ajax 标记的 event 属性？](https://stackoverflow.com/questions/7886453/what-values-can-i-pass-to-the-event-attribute-of-the-fajax-tag/7889098#7889098)

# javascript - HighCharts - 显示图表 - 简单示例（markit API）

> ID：16124934
> 
> 赞同：1
> 
> 时间：2013-04-20T20:37:54.163
> 
> 标签：javascript, jquery, html, api, highcharts

我是使用 JavaScript 编程的新手，在实现 HighCharts 图表时遇到了一些麻烦。我使用的 API 是 markit ( [https://github.com/markitondemand/DataApis/blob/master/MarkitTimeseriesServiceSample.js](https://github.com/markitondemand/DataApis/blob/master/MarkitTimeseriesServiceSample.js) ) 来生成一个图表，如本页中途所示[http://dev.markitondemand.com/](http://dev.markitondemand.com/)

现在我想我必须添加那个js脚本来代替这个小提琴中显示的js（[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/ samples/highcharts/demo/line-basic/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/line-basic/)），但它似乎不起作用。

我想这可能是因为我没有指定我真正想把它放在哪里，但我不是 100% 确定。

请参阅下面的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<script src="http://www.google.com/jsapi"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.min.js"></script>

<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>

<script>
    /**
    * Version 1.1, Jan 2012
    */
    var Markit = {};
    /**
    * Define the TimeseriesService.
    * First argument is symbol (string) for the quote. Examples: AAPL, MSFT, JNJ, GOOG.
    * Second argument is duration (int) for how many days of history to retrieve.
    */
    Markit.TimeseriesService = function(symbol,duration){
        this.symbol = symbol;
        this.duration = duration;
        this.PlotChart();
    };

    Markit.TimeseriesService.prototype.PlotChart = function(){

        //Make JSON request for timeseries data
        $.ajax({
            beforeSend:function(){
                $("#chartDemoContainer").text("Loading chart...");
            },
            data: {
                symbol: this.symbol,
                duration: this.duration
            },
            url: "http://dev.markitondemand.com/Api/Timeseries/jsonp",
            dataType: "jsonp",
            context: this,
            success: function(json){
             //Catch errors
    if (!json.Data || json.Message){
    console.error("Error: ", json.Message);
    return;
    }
                this.BuildDataAndChart(json);
            },
            error: function(){
                alert("Couldn't generate chart.");
            }
        });
    };

    Markit.TimeseriesService.prototype.BuildDataAndChart = function(json){
        var dateDS = json.Data.SeriesDates,
            closeDS = json.Data.Series.close.values,
            openDS = json.Data.Series.open.values,
            closeDSLen = closeDS.length,
            irregularIntervalDS = [];

        /**
    * Build array of arrays of date & price values
    * Market data is inherently irregular and HighCharts doesn't
    * really like irregularity (for axis intervals, anyway)
    */
        for (var i=0; i<closeDSLen;i++){
            var dat = new Date(dateDS[i]);
            var dateIn = Date.UTC(dat.getFullYear(), dat.getMonth(), dat.getDate());
            var val = closeDS[i];
            irregularIntervalDS.push([dateIn,val]); 
        }

        //set dataset and chart label
        this.oChartOptions.series[0].data = irregularIntervalDS;
        this.oChartOptions.title.text = "Price History of " + json.Data.Name + " (1 year)";

        //init chart
        new Highcharts.Chart(this.oChartOptions);
    };

    //Define the HighCharts options
    Markit.TimeseriesService.prototype.oChartOptions = {
    chart: {
    renderTo: 'chartDemoContainer'
    },
    title:{},
    subtitle: {
    text: 'Source: Thomson Reuters DataScope / Markit On Demand'
    },
    xAxis: {
    type: 'datetime'
    },
    yAxis: [{ // left y axis
    title: {
    text: null
    },
    labels: {
    align: 'left',
    x: 3,
    y: 16,
    formatter: function() {
    return Highcharts.numberFormat(this.value, 0);
    }
    },
    showFirstLabel: false
    }, { // right y axis
    linkedTo: 0,
    gridLineWidth: 0,
    opposite: true,
    title: {
    text: null
    },
    labels: {
    align: 'right',
    x: -3,
    y: 16,
    formatter: function() {
    return Highcharts.numberFormat(this.value, 0);
    }
    },
    showFirstLabel: false
    }],
    tooltip: {
    shared: true,
    crosshairs: true
    },
    plotOptions: {
    series: {
    marker: {
    lineWidth: 1
    }
    }
    },
    series: [{
    name: "Close price",
    lineWidth: 2,
    marker: {
    radius: 0
    }
    }]
    //,credits:{ enabled:false },
    };

    new Markit.TimeseriesService("GOOG", 365);

    /**
    * Need help? Visit the API documentation at:
    * http://dev.markitondemand.com
    */
</script>
</head>

<body>

<div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>

</body>
</html> 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-04T01:35:45.673

在您`<div>`将 id 更改为`#chartDemoContainer`

用这些替换你的 jQuery 库，

```
<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="//code.jquery.com/jquery-1.10.2.js"></script>
<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script> 
```

这是您示例的工作版本 - [http://jsbin.com/behicetivi/edit?html,output](http://jsbin.com/behicetivi/edit?html,output)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="//code.jquery.com/jquery-1.10.2.js"></script>
<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>  
<script src="https://code.highcharts.com/stock/highstock.js"></script>
<script src="https://code.highcharts.com/stock/modules/exporting.js"></script>

<script>
    /**
    * Version 1.1, Jan 2012
    */
    var Markit = {};
    /**
    * Define the TimeseriesService.
    * First argument is symbol (string) for the quote. Examples: AAPL, MSFT, JNJ, GOOG.
    * Second argument is duration (int) for how many days of history to retrieve.
    */
    Markit.TimeseriesService = function(symbol,duration){
        this.symbol = symbol;
        this.duration = duration;
        this.PlotChart();
    };

    Markit.TimeseriesService.prototype.PlotChart = function(){

        //Make JSON request for timeseries data
        $.ajax({
            beforeSend:function(){
                $("#chartDemoContainer").text("Loading chart...");
            },
            data: {
                symbol: this.symbol,
                duration: this.duration
            },
            url: "http://dev.markitondemand.com/Api/Timeseries/jsonp",
            dataType: "jsonp",
            context: this,
            success: function(json){
             //Catch errors
    if (!json.Data || json.Message){
    console.error("Error: ", json.Message);
    return;
    }
                this.BuildDataAndChart(json);
            },
            error: function(){
                alert("Couldn't generate chart.");
            }
        });
    };

    Markit.TimeseriesService.prototype.BuildDataAndChart = function(json){
        var dateDS = json.Data.SeriesDates,
            closeDS = json.Data.Series.close.values,
            openDS = json.Data.Series.open.values,
            closeDSLen = closeDS.length,
            irregularIntervalDS = [];

        /**
    * Build array of arrays of date & price values
    * Market data is inherently irregular and HighCharts doesn't
    * really like irregularity (for axis intervals, anyway)
    */
        for (var i=0; i<closeDSLen;i++){
            var dat = new Date(dateDS[i]);
            var dateIn = Date.UTC(dat.getFullYear(), dat.getMonth(), dat.getDate());
            var val = closeDS[i];
            irregularIntervalDS.push([dateIn,val]); 
        }

        //set dataset and chart label
        this.oChartOptions.series[0].data = irregularIntervalDS;
        this.oChartOptions.title.text = "Price History of " + json.Data.Name + " (1 year)";

        //init chart
        new Highcharts.Chart(this.oChartOptions);
    };

    //Define the HighCharts options
    Markit.TimeseriesService.prototype.oChartOptions = {
    chart: {
    renderTo: 'chartDemoContainer'
    },
    title:{},
    subtitle: {
    text: 'Source: Thomson Reuters DataScope / Markit On Demand'
    },
    xAxis: {
    type: 'datetime'
    },
    yAxis: [{ // left y axis
    title: {
    text: null
    },
    labels: {
    align: 'left',
    x: 3,
    y: 16,
    formatter: function() {
    return Highcharts.numberFormat(this.value, 0);
    }
    },
    showFirstLabel: false
    }, { // right y axis
    linkedTo: 0,
    gridLineWidth: 0,
    opposite: true,
    title: {
    text: null
    },
    labels: {
    align: 'right',
    x: -3,
    y: 16,
    formatter: function() {
    return Highcharts.numberFormat(this.value, 0);
    }
    },
    showFirstLabel: false
    }],
    tooltip: {
    shared: true,
    crosshairs: true
    },
    plotOptions: {
    series: {
    marker: {
    lineWidth: 1
    }
    }
    },
    series: [{
    name: "Close price",
    lineWidth: 2,
    marker: {
    radius: 0
    }
    }]
    //,credits:{ enabled:false },
    };

    new Markit.TimeseriesService("GOOG", 365);

    /**
    * Need help? Visit the API documentation at:
    * http://dev.markitondemand.com
    */
</script>
</head>

<body>

<div id="chartDemoContainer" style="min-width: 400px; height: 400px; margin: 0 auto"></div>

</body>
</html> 
```

# matlab - 如何绘制两个一维高斯分布和分类边界[Matlab]？

> ID：16124935
> 
> 赞同：0
> 
> 时间：2013-04-20T20:38:01.540
> 
> 标签：matlab, plot, gaussian, boundary

我有两个类（正态分布），C1 和 C2，每个类都由它们的平均值和标准差定义。我希望能够可视化正态分布的 pdf 图和两者之间的分类边界。目前我有绘制分布的代码，但我不确定如何绘制决策边界。任何想法，将不胜感激。我已经包含了我想要绘制的样本。[1](http://i.stack.imgur.com/UfjhQ.png)

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T08:40:17.840

这就是我想出的：

```
% Generate some example data
mu1 = -0.5; sigma1 = 0.7; mu2 = 0.8; sigma2 = 0.5;
x = linspace(-8, 8, 500);
y1 = normpdf(x, mu1, sigma1);
y2 = normpdf(x, mu2, sigma2);

% Plot it
figure; plot(x, [y1; y2])
hold on

% Detect intersection between curves; choose threshold so you get the whole 
% intersection (0.0001 should do unless your sigmas are very large)
ind = y1 .* y2 > 0.0001;
% Find the minimum values in range
minVals = min([y1(ind); y2(ind)]);

if ~isempty(minVals)
    area(x(ind), minVals)
end 
```

我不知道这是否是做你想做的最好的方式，但它似乎工作。

# database - CakePHP：无法将表单内容写入数据库

> ID：16124938
> 
> 赞同：0
> 
> 时间：2013-04-20T20:38:19.647
> 
> 标签：database, cakephp

我将表单的内容写入数据库。我的代码如下：

查看（index.ctp）：

```
<div class="modal fade" id="test_modal">
      <div class="modal-header">
        <a class="close" data-dismiss="modal">&times;</a>   
        <h1>Create Customer</h1>
      </div>
      <div class="modal-body"> 
        <?php
        echo $this->Form->create('Contact');
        echo $this->Form->input('type');
        echo $this->Form->input('name');
        echo $this->Form->input('company');
        echo $this->Form->input('phone');
        echo $this->Form->input('mobile');
        echo $this->Form->input('email');
        echo $this->Form->input('vatNumber');

        echo $this->Form->input('mainAddressLine1');
        echo $this->Form->input('mainAddressLine2');
        echo $this->Form->input('mainAddressTown');
        echo $this->Form->input('mainAddressCounty');
        echo $this->Form->input('mainAddressPostCode');
        echo $this->Form->input('mainAddressCountry');

        echo $this->Form->input('notes', array('rows' => '5'));
        echo $this->Form->end('Save Customer');
        ?>
      </div>
    </div> 
```

控制器（ContactController.php）

```
class ContactsController extends AppController {
    public $helpers = array('Html', 'Form', 'Session');
    public $components = array('Session');

    public function index() {
        $this->set('contacts', $this->Contact->find('all'));
    }

    public function view($id) {
        if (!$id) {
            throw new NotFoundException(__('Invalid contact'));
        }

        $contact = $this->Contact->findById($id);
        if (!$contact) {
            throw new NotFoundException(__('Invalid contact'));
        }
        $this->set('contact', $contact);
    }

    public function add() {                 
        if ($this->request->is('post')) {
            $this->Contact->create();
            if ($this->Contact->save($this->request->data)) {
                $this->Session->setFlash('Your contact has been saved.');
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash('Unable to add your contact.');
            }
        }
    }
} 
```

型号（Contact.php）

```
class Contact extends AppModel {    
} 
```

任何帮助表示赞赏。

问候，斯蒂芬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:08:29.427

如果您的视图文件是`index.ctp`，这意味着默认情况下处理它的逻辑是在`index()`您的控制器的方法中。该方法仅设置一个变量。我假设您正在混淆视图/动作。尝试在`add.ctp`视图中添加您的表单并调用`contacts/add`URI。

`$this->render`或者，您可以通过添加对您的方法的调用来覆盖要呈现的视图`add()`：

```
public function add() {
    $this->autoRender = false;
    // Rest of your logic
    $this->render('index');
} 
```

这样`contacts/add`URI 将服务于`index.ctp`视图而不是`add.ctp`.

# ms-access - 使用 Access 2003 将 Access 2000 数据库转换为 Access 97

> ID：16124941
> 
> 赞同：1
> 
> 时间：2013-04-20T20:38:37.203
> 
> 标签：ms-access, ms-access-2003, ms-access-2000, ms-access-97

我有一个 Access 2000 格式的访问数据库（来自一个开源项目）。我看过的所有文本字段都`ALLOWZEROLENGTH`设置为和`TRUE`（空字符串）。`DEFAULT``""`

在转换为 Access 97（使用 Access 2003）时，`ALLOWZEROLENGTH`设置为`FALSE`但`DEFAULT`保持为空字符串。

奇怪的是（在我看来）我仍然可以在不为许多文本字段指定值的情况下将记录添加到表中而不会出现问题。

但是，如果我通过添加一个字段来修改表设计，此后如果我尝试添加一条记录，则会触发大量“不能包含零长度字符串”错误。

这就像`DEFAULT`文本字段上的值属性在此之前处于休眠状态。

这是 Access 2003 中的转换器的问题吗？

我也尝试先转换为 2003，然后再转换回 97，但结果是一样的

对我来说最好的操作是通过 97 数据库并设置`ALLOWZEROLENGTH`为`TRUE`或设置`DEFAULT`为`Null`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:45:01.057

“最佳行动”是不使用 Access 97 数据库格式。微软不再积极支持 Office 97；九 (9) 年以来一直如此！（参考：[这里](http://support.microsoft.com/gp/lifeoffice)）

但是，如果您出于某种原因*绝对必须*使用 Access 97 文件格式，那么可以，您可能应该只检查表定义并根据需要调整字段属性。

# image - matlab size函数抛出异常

> ID：16124943
> 
> 赞同：0
> 
> 时间：2013-04-20T20:38:42.650
> 
> 标签：image, matlab, image-size

我正在尝试在matlab中获取图像的大小，这是代码：

```
img = imread('folder\image1.jpg');      
size(img); 
```

我收到此错误：

> “下标索引必须是真正的正整数或逻辑”

我不知道为什么会发生这种情况，任何知道这个问题的帮助将不胜感激

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T16:04:58.620

从您的评论来看，您的错误发生是因为您`size`用变量重载了函数。

# c# - Viewmodel 显示错误信息以及如何传递警告

> ID：16124946
> 
> 赞同：0
> 
> 时间：2013-04-20T20:39:04.247
> 
> 标签：c#, razor, asp.net-mvc-4

我正在做一个登记表。在提交时，我检查电子邮件地址是否已在数据库中注册。如果是这种情况，我会使用一个空的电子邮件地址再次重定向到注册表单。

表单已填写，但电子邮件地址仍然是用户第一次填写的电子邮件地址。这怎么可能？这是我的一些代码

## 剃刀页面

```
@model LibModels.User
@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend></legend>

        <div class="row">
            @Html.LabelFor(model => model.userEmail)
            @Html.EditorFor(model => model.userEmail)
            @Html.ValidationMessageFor(model => model.userEmail)
        </div>    <p>
            <input id="knop" type="submit" value="Create" />
        </p>
    </fieldset>
} 
```

## 控制器

```
[HttpPost]

public ActionResult Register(User viewModel)
    {
        User usr = Adapter.UserRepository.Single(u => u.userEmail.Equals(viewModel.userEmail));
        if (usr == null)
        {
            viewModel.userCreatedDate = DateTime.Now;
            Adapter.UserRepository.Insert(viewModel);
            Adapter.Save();
        }
        else
        {
            viewModel.userEmail = "";
            return View(viewModel);
        }
        return RedirectToAction("Index");
    } 
```

在验证该电子邮件地址已存在于数据库中时发出警告也很好，最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:43:26.730

I think what you're looking for is

```
ModelState.AddModelError("userEmail", "Email already exists"); 
```

However, I'd suggest looking into creating a custom action filter to do the validation for you. It's a lot cleaner & easy to test.

Here's a [tutorial](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvccustomvalidation.aspx).

# java - 保存文件不保存文件

> ID：16124947
> 
> 赞同：1
> 
> 时间：2013-04-20T20:39:22.580
> 
> 标签：java

我正在创建一个将错误日志写入文件的程序，但是当我要求保存该文件时，什么也没有发生（甚至没有异常）。我做错了什么？

“保存”按钮动作监听器：

```
public void actionPerformed(ActionEvent arg0) {
    String savePath = getSavePath();

    try {
        saveFile(savePath);
    } catch (IOException e) {
        e.printStackTrace();
    }

} 
```

以及三种文件方法：

```
private String getSavePath() {
    JFileChooser fc = new JFileChooser();
    fc.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);

    fc.showOpenDialog(this);

    return fc.getSelectedFile().getAbsolutePath();

}

private void saveFile(String path) throws IOException {
    File outFile = createFile(path);

    FileWriter out = null;

    out = new FileWriter(outFile);

    out.write("Hey");

    out.close();

}

private File createFile(String path) {
    String fileName = getLogFileName(path);
    while (new File(fileName).exists()) {
        fileCounter++;
        fileName = getLogFileName(path);

    }

    File outFile = new File(fileName);
    try {
        outFile.createNewFile();
    } catch (IOException e) {
        e.printStackTrace();

    }

    return outFile;

}

private String getLogFileName(String path) {
    return "enchantcalc_err_log_" + fileCounter + ".txt";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T20:55:46.980

您的`getLogFileName(...)`功能没有对您提供的路径做任何事情。因此，您试图将文件写入just `enchantcalc_err_log_#.txt`（没有实际路径）。试试这个：

```
private String getLogFileName(String path) {
    return path + "enchantcalc_err_log_" + fileCounter + ".txt";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T21:58:14.357

您可能只是没有找到该文件。

在你的结尾`saveFile`，试试这个：之后

```
out.close(); 
```

写一行，像这样：

```
out.close();
System.out.println("File saved to: "+outFile.getAbsolutePath()); 
```

然后，您将获得保存它的*神秘*路径。

# php - 使用发布数据打开 jQuery 对话框

> ID：16124951
> 
> 赞同：0
> 
> 时间：2013-04-20T20:39:33.833
> 
> 标签：php, javascript, jquery, html, ajax

我正在尝试以编程方式打开一个 jQuery 对话框。我可以打开对话框，但无法将发布数据发送到对话框。

这是代码。

HTML：

```
<div data-role="page" id="rename-dialog">
        <?php
            $current_group = $_POST['gr_name'];
            $current_code = $_POST['gr_code'];
            $current_id = $_POST['in_id'];
        ?>

        <div data-role="header" data-theme="d" class="ui-header ui-bar-d" role="banner">
            <a href="#main-page" class="ui-btn-left ui-btn ui-shadow ui-btn-corner-all ui-btn-icon-notext ui-btn-up-d" data-icon="delete" data-iconpos="notext" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-theme="d" title="Close" ktbt_p_pass="1">
                <span class="ui-btn-inner">
                    <span class="ui-icon ui-icon-delete ui-icon-shadow">&nbsp;</span>
                </span>
            </a>
            <h1 class="ui-title" role="heading" aria-level="1">Rename <?php echo $current_group; ?></h1>
        </div>

        <div data-role='content'>
            <form id='rename-group-form' action='' method='post'>
                New name for <?php echo $current_group; ?>: <input type='text' name='new-group-name'><br>
                <input id='rename-submit' type='submit' data-theme='b' value='Rename'></input>
            </form>
        </div>
</div> 
```

JAVASCRIPT：

```
var g_code = parseInt($(this).attr("id"));
var i_id = parseInt($(this).attr("value"));
var g_name = $(this).attr("text");

$.mobile.changePage( "#rename-dialog", {transition: 'slideDown', role: 'dialog'}, {
        type: "post",
        data: {gr_code: 'test', in_id: 'test', gr_name: 'test'}
}); 
```

基本上这会打开对话框，但我收到一个错误，即索引 g_code、in_in 和 gr_name 未定义。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:14:52.047

假设所有相关代码都显示在您的问题中......

由于您有在任何 block 之外获取 g_code、i_id 和 g_name 值的代码，因此未定义 $(this)。例如，在这种情况下：

```
$("#item").click(function() {
    var item_id = $(this).attr("id");
}); 
```

$(this) 将是对 id 为“item”的 DOM 元素的引用，因为选择器是“#item”。

如果您提出的问题的代码不在选择器块内，则可能需要将其移入其中，或者您需要将“this”替换为实际的选择器以获取所需的 DOM 元素。

如果这些答案都不适用，请发布更多代码以更好地了解正在发生的事情。

# php - PHP - 类属性中的动态类名

> ID：16124952
> 
> 赞同：1
> 
> 时间：2013-04-20T20:39:36.823
> 
> 标签：php, class, dynamic, properties, static

我想知道是否可以从类属性中动态访问静态类。我正在尝试访问 nchild 类中的属性，但我必须这样做：

```
$error = $this->errorClass;
$error::myMethod (); 
```

我真正想做的是：

```
$this->errorClass::myMethod (); 
```

我不断收到*PHP Parse error: syntax error, unexpected '::'*如果这是不可能的，有没有人知道一种类似的方法来做不涉及对每个类/方法重复自己的事情？谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:49:27.390

```
$this->errorClass::myMethod(); 
```

请向解析器解释你想要什么？`$temp = errorClass::myMethod(); $this->$temp;`或`$temp = $this->errorClass; $temp::myMethod();`。

由于这些问题，这是不可能的。

您可以使用的最短时间（1 条语句...）是：

```
${'_'.!$this->errorClass}::myMethod(); 
```

# c# - EF 多个属性引用相同类型

> ID：16124956
> 
> 赞同：1
> 
> 时间：2013-04-20T20:40:00.870
> 
> 标签：c#, entity-framework

我正在尝试将视频对象的子列表和主子列表与删除时的级联链接。

我发现一些页面解释了如何对相同类型的 2 个单个对象执行此操作。但不适用于列表和单个对象。
[如何在实体框架中设置两个相同类型的导航属性](https://stackoverflow.com/questions/4429103/how-can-i-set-up-two-navigation-properties-of-the-same-type-in-entity-framework)

这是我的代码：

```
using System.Collections.Generic;
using System.Data.Entity;
using System.Data.Entity.Infrastructure;

namespace DataAccess
{
    public class SimpleVideo
    {
        public string Name { get; set; }
        public int SimpleVideoId { get; set; }
        public virtual List<Sub> Subs { get; set; }
        public Sub MainSub { get; set; }
    }

    public class Sub
    {
        public int SubId { get; set; }
        public string Language { get; set; }
    }

    class VideoContext : DbContext
    {
        public DbSet<SimpleVideo> SimpleVideos { get; set; }
        public DbSet<Sub> Subs { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            Database.SetInitializer(new DropCreateDatabaseAlways<VideoContext>());

            modelBuilder.Entity<SimpleVideo>().HasMany(v => v.Subs).WithOptional().WillCascadeOnDelete(true);
            modelBuilder.Entity<SimpleVideo>().HasOptional(v => v.MainSub).WithRequired().WillCascadeOnDelete(true);

            base.OnModelCreating(modelBuilder);
        }
    }
} 
```

我不能让它工作。当我只启用其中一个模型构建器线时，它就可以工作。我如何让他们两个同时工作？

```
System.Data.SqlServerCe.SqlCeException was unhandled
  HResult=-2147467259
  Message=The referential relationship will result in a cyclical reference that is not allowed. [ Constraint name = FK_dbo.Subs_dbo.SimpleVideos_SubId ]
  Source=SQL Server Compact ADO.NET Data Provider
  ErrorCode=-2147467259
  NativeError=25083
  StackTrace:
       at System.Data.SqlServerCe.SqlCeCommand.ProcessResults(Int32 hr)
       at System.Data.SqlServerCe.SqlCeCommand.ExecuteCommandText(IntPtr& pCursor, Boolean& isBaseTableCursor)
       at System.Data.SqlServerCe.SqlCeCommand.ExecuteCommand(CommandBehavior behavior, String method, ResultSetOptions options)
       at System.Data.SqlServerCe.SqlCeCommand.ExecuteNonQuery()
       at System.Data.Entity.Migrations.DbMigrator.ExecuteSql(DbTransaction transaction, MigrationStatement migrationStatement)
       at System.Data.Entity.Migrations.Infrastructure.MigratorBase.ExecuteSql(DbTransaction transaction, MigrationStatement migrationStatement)
       at System.Data.Entity.Migrations.DbMigrator.ExecuteStatements(IEnumerable`1 migrationStatements)
       at System.Data.Entity.Migrations.Infrastructure.MigratorBase.ExecuteStatements(IEnumerable`1 migrationStatements)
       at System.Data.Entity.Migrations.DbMigrator.ExecuteOperations(String migrationId, XDocument targetModel, IEnumerable`1 operations, Boolean downgrading, Boolean auto)
       at System.Data.Entity.Migrations.DbMigrator.AutoMigrate(String migrationId, XDocument sourceModel, XDocument targetModel, Boolean downgrading)
       at System.Data.Entity.Migrations.Infrastructure.MigratorBase.AutoMigrate(String migrationId, XDocument sourceModel, XDocument targetModel, Boolean downgrading)
       at System.Data.Entity.Migrations.DbMigrator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId)
       at System.Data.Entity.Migrations.Infrastructure.MigratorBase.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId)
       at System.Data.Entity.Migrations.DbMigrator.Update(String targetMigration)
       at System.Data.Entity.Migrations.Infrastructure.MigratorBase.Update()
       at System.Data.Entity.Internal.DatabaseCreator.CreateDatabase(InternalContext internalContext, Func`3 createMigrator, ObjectContext objectContext)
       at System.Data.Entity.Internal.InternalContext.CreateDatabase(ObjectContext objectContext)
       at System.Data.Entity.Database.Create(Boolean skipExistsCheck)
       at System.Data.Entity.Database.Create()
       at System.Data.Entity.DropCreateDatabaseAlways`1.InitializeDatabase(TContext context)
       at System.Data.Entity.Database.<>c__DisplayClass2`1.<SetInitializerInternal>b__0(DbContext c)
       at System.Data.Entity.Internal.InternalContext.<>c__DisplayClass8.<PerformDatabaseInitialization>b__6()
       at System.Data.Entity.Internal.InternalContext.PerformInitializationAction(Action action)
       at System.Data.Entity.Internal.InternalContext.PerformDatabaseInitialization()
       at System.Data.Entity.Internal.LazyInternalContext.<InitializeDatabase>b__4(InternalContext c)
       at System.Data.Entity.Internal.RetryAction`1.PerformAction(TInput input)
       at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabaseAction(Action`1 action)
       at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabase()
       at System.Data.Entity.Internal.InternalContext.Initialize()
       at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType)
       at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize()
       at System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext()
       at System.Data.Entity.Internal.Linq.InternalSet`1.ActOnSet(Action action, EntityState newState, Object entity, String methodName)
       at System.Data.Entity.Internal.Linq.InternalSet`1.Add(Object entity)
       at System.Data.Entity.DbSet`1.Add(TEntity entity)
       at DataAccess.Program.Main() in c:\MMProject\TestProjects\DataAccess\Program.cs:line 63
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:52:06.397

看看我的这篇文章**处理完全相同的结构**（据我所知）......
[实体框架一对多与默认](https://stackoverflow.com/questions/15751798/entity-framework-one-to-many-with-default/15754234#15754234)

我没有对此进行测试-所以只是替换了名称-我认为这应该可以...

```
modelBuilder.Entity<SimpleVideo>()
    .HasOptional(x => x.MainSub)
    .WithOptionalPrincipal() // x => x.DefaultForEntity)
    .WillCascadeOnDelete(true); 
```

您不需要另一种关系 - 默认情况下级联处于打开状态。

# php - TCP CLOSE_WAIT 连接状态 - 未知原因

> ID：16124958
> 
> 赞同：1
> 
> 时间：2013-04-20T20:40:13.440
> 
> 标签：php, tcp

为什么`socket_shutdown($socket, 2);`有时将套接字留在 CLOSE_WAIT 状态，尽管套接字在关闭后立即关闭`socket_close($socket);`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T22:37:56.617

它没有。CLOSE_WAIT 是由于在本地应用程序关闭此端之前收到来自对等方的传入关闭引起的。当应用程序关闭此端时，状态转换。关机与此无关。

# java - 如何添加到类类型的arraylist

> ID：16124960
> 
> 赞同：0
> 
> 时间：2013-04-20T20:40:25.467
> 
> 标签：java, arraylist

好的，这就是我所拥有的

```
public class Register {

    public String propertyID;
    public String PPSNumber;

    Register(String aPropertyID, String aPPSNumber) {
        propertyID = aPropertyID;
        PPSNumber = aPPSNumber;
    }

    public void setPPSNumber(String aPPSNumber) {
        PPSNumber = aPPSNumber;
    }

    public String getPPSNumber() {
        return PPSNumber;
    }

    public String getPropertyID() {
        return propertyID;
    }
} 
```

然后我有这个

```
public static ArrayList<Register> registers = new ArrayList<Register>();

public static void main(String[] args) {

    String userInput1 = "", userInput2 = "", userInput3 = "";
    userInput1 = JOptionPane.showInputDialog("Enter your PPSNumber");
    userInput2 = JOptionPane.showInputDialog("Enter your propID");

    registers.add("number", "id");
} 
```

我不明白为什么它不允许我添加到 ArrayList。有没有办法向 ArrayLists 添加类类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T20:42:12.227

试试这个：

```
registers.add(new Register("number","id")); 
```

编辑 1：要回答您的问题，您可以创建一个单独的“寄存器”并使用 getters ：

```
Register aRegister = new Register("number","id");
registers.add(aRegister);
System.out.println(aRegister.getPropertyID()+" "+ aRegister.getPPSNumber()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-12T19:09:13.140

你`List`是类型`Register`所以你只需要添加`Register`类的对象。

根据需要创建尽可能多的 Register 对象并没有错。

您可以`toString()`在类中实现方法，`Register`然后下面的 sysout 将工作，因为`register`变量是用`Register`对象初始化的。检查这个[如何在 Java 中正确覆盖 toString()？](https://stackoverflow.com/questions/10734106/how-to-override-tostring-properly-in-java)了解 toString 的实现。

```
System.out.println(register) 
```

# ruby-on-rails-3 - rails 3.x 无页面回调方法

> ID：16124961
> 
> 赞同：1
> 
> 时间：2013-04-20T20:40:46.050
> 
> 标签：ruby-on-rails-3, jquery-plugins

我正在将 jquery pageless 插件与 rails 应用程序集成在一起。当我写出 javascript 时，无页插件可以无缝工作。问题在于尝试在完成时发布一个 javascript 方法。我想要完成的是有一个辅助方法来生成它，但是它用我的回调方法周围的引号来呈现 javascript，然后在 javascript 中生成一个错误

```
Uncaught TypeError: Object reloadMasonry has no method 'call' 
```

这是辅助方法代码

```
def pageless(total_pages, url=nil, container=nil) opts = { 
    :totalPages => total_pages,
    :url        => url,
    :loaderMsg  => 'Loading more results',
    :loaderImage => image_path("load.gif"),
    :complete    => "reloadMasonry"
  }   

  container && opts[:container] ||= container

  javascript_tag("$('#masonry-container').pageless(#{opts.to_json});")
end 
```

这是生成的javascript代码

```
<script type="text/javascript">
//<![CDATA[
$('#masonry-container').pageless({"totalPages":3,
 "url":"/articles",
 "loaderMsg":"Loading more results",
 "loaderImage":"/assets/load.gif",
 "complete":"reloadMasonry"});
//]]>
</script> 
```

javascript导致在reloadMasonry回调函数周围有引号

```
reloadMasonry = function(){  
    $('#masonry-container').masonry('reload');
  } 
```

如果我复制生成的确切 javascript，并在这种情况下简单地删除 javascript 回调方法 ( reloadMasonry ) 周围的双引号，那么一切都会无缝运行。

有没有人有什么建议。

# python - 有没有办法在 Python 中创建一个无限深度的递归方法？

> ID：16124965
> 
> 赞同：0
> 
> 时间：2013-04-20T20:41:01.663
> 
> 标签：python, recursion, infinite, depth

例如，在像这样的图上编写一些算法时

```
def f(graph):
    #graph is dictionary of pairs vertex_i:{set of edges (i,j)} for 1<=i,j<=n
    def g(vertex):
        for vertex1 in graph:
            do sth
            ...
            for (i,j) in graph[vertex1]:
                ...
                g(j)#recursive call
        ...
        return ...

    return g(1) 
```

有限的递归深度有时很烦人，因为如果你不得不避免递归，代码会变得更长更复杂。有没有办法达到无限深度？也许您可以通过以下方法描述您对问题的*一般解决方案*

```
def nthNumber(n):
    if n==1: return 1
    else: return nthNumber(n-1)+1 
```

（我知道这很愚蠢，请不要给出“你应该只写 nthNumber(n): return n ”之类的答案——我对一般解决方案很感兴趣）。感谢帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-20T20:45:25.587

Unlimited recursion would require infinite resources; every function call requires a stack entry, and there is only a finite amount of memory to hold those. So, *no*, you cannot have unlimited recursion depth.

You *can* **raise** the limit, by calling [`sys.setrecursionlimit()`](http://docs.python.org/2/library/sys.html#sys.setrecursionlimit).

# c# - 删除列表元素

> ID：16124966
> 
> 赞同：-3
> 
> 时间：2013-04-20T20:41:03.193
> 
> 标签：c#, list

我有一个 TileToDraw 类型的列表，该类型声明如下：

```
[StructLayout(LayoutKind.Sequential)]
struct TileToDraw
{
    public Vector2 origin;
    public string type;

    public TileToDraw(Vector2 originIn, string typeIn)
    {
        origin = originIn;
        type = typeIn;
    }
} 
```

我已经填充了这个，但想删除具有特定原点（矢量）的图块。我应该为此使用哪个功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T20:44:03.953

You can use LINQ to create new `List<TileToDraw>` with elements from `sourceList` that satisfy condition:

```
var newList = sourceList.Where(x => x.Origin != myOrigin).ToList(); 
```

or use [`List<T>.RemoveAll`](http://msdn.microsoft.com/en-us/library/wdka673a.aspx) method to remove elements from `sourceList` directly:

```
sourceList.RemoveAll(x => x.Origin == myOrigin); 
```

# vba - VBA 自动类型转换

> ID：16124969
> 
> 赞同：2
> 
> 时间：2013-04-20T20:41:18.490
> 
> 标签：vba

我来自 C++ 世界，我正在学习 VBA 课程的第一步。

假设我有一个智能日期课程，即 QDate

```
 *** Class Module ***
 Option explicit
 Private xDate_ As Date

 Property Let xDate(xVal As Date)
      xDate_ = xVal
 End Property

 Property Get xDate() As Date
     xDate = xDate_
 End Property

 ' ... some nice methods follow here...

 *** non-Class Module *** 
 Public Function makeQDate() As QDate
    Set makeQDate = New QDate
 End Function 
```

示例用法可能是

```
 Dim xQDate as QDate :  xQDate = makeQDate()
 xQDate.xDate = DateSerial(2000,1,1) 
```

最后一行不如 C++ 中的那么好。如果我们可以创建允许写入的隐式转换

```
 xQDate = DateSerial(2000,1,1) 
```

这一定非常棒。在VBA中可以实现类似的东西吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:53:48.960

据我所知，VBA 不支持自定义隐式转换，只支持内置转换。但是，你是对的——它会很棒。

# php - PHP 包含基于 REQUEST_URI

> ID：16124970
> 
> 赞同：1
> 
> 时间：2013-04-20T20:41:29.563
> 
> 标签：php, security

`$_SERVER['REQUEST_URI']`使用包含文件是否存在任何安全风险？你能`../../..`以某种方式通过请求uri吗？

我在想的是这样的：

```
<?php
$path = $_SERVER['REQUEST_URI'];
$path = preg_replace('~\\.html?$~', '.php', $path);
include $path;
?> 
```

这应该用“.htm”或“.html” URI 替换“.php”路径并呈现它们。但我担心这里的安全。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T07:51:22.477

`$_SERVER['REQUEST_URI']`包含请求的 URI 路径和查询字符串，因为它出现在[HTTP 请求行](https://www.rfc-editor.org/rfc/rfc2616#section-5.1)中。所以当`http://example.com/foo/bar?baz=quux`被请求并且服务器将请求传递给脚本文件`/request_handler.php`时，`$_SERVER['REQUEST_URI']`仍然是`/foo/bar?baz=quux`。我使用 mod_rewrite 将任何请求映射到`request_handler.php`如下：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ /request_handler.php 
```

因此，为了正确起见，在`$_SERVER['REQUEST_URI']`文件系统路径中使用之前，您需要去掉查询字符串。您可以`parse_url`这样做：

```
$_SERVER['REQUEST_URI_PATH'] = parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH); 
```

但是由于这个值直接来自 HTTP 请求行，没有事先的路径解析，它可能仍然包含符号路径段，如`..`.

但是，甚至不需要路径遍历，因为请求的 URI 路径已经是绝对路径引用，并且请求`http://example.com/etc/passwd`应该导致包含`/etc/passwd`.

所以这实际上是一个[本地文件包含漏洞](http://cwe.mitre.org/data/definitions/98.html)。

现在要解决这个问题，使用您 chowey 提出的[方法](https://stackoverflow.com/a/16126328/53114)需要某个根目录是一个很好的改进。但你实际上需要在它前面加上`$basedir`：

```
$path = realpath($basedir . $_SERVER['REQUEST_URI_PATH']);
if ($path && strpos($path, $basedir) === 0) {
    include $path;
} 
```

该解决方案提供了几个承诺：

*   `$path`是现有文件的有效解析路径，或者`false`;
*   `$basedir`仅当前缀路径为.时才会包含该文件`$path`。

但是，这可能仍然允许访问使用某种其他类型的[访问控制保护的文件，例如 Apache 的 mod_authz_host 模块提供](http://httpd.apache.org/docs/2.2/mod/mod_authz_host.html)的访问控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T16:55:18.180

我有同样的问题，并根据**Gumbo 的回答**选择了以下操作：

```
$_SERVER['REQUEST_URI_PATH'] = parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH);

$path = realpath(FOLDER_ROOT . $_SERVER['REQUEST_URI_PATH']);

$directory_white_list_array = array('/safe_folder1', '/safe_folder1/safe_folder2');

if ($path && strpos($path, FOLDER_ROOT) === 0 && (in_array(dirname($path), $directory_white_list_array)  && ('php' == pathinfo($path, PATHINFO_EXTENSION)))) {
    include $path;
}else{
    require_once FOLDER_ROOT."/miscellaneous_functions/navigation_error.php";
    navigation_error('1');
} 
```

摘要：增加了目录白名单和.php扩展名限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T12:13:04.347

在检查基本路径之前，确实不要相信 $_SERVER['REQUEST_URI'] 。

并且不要制作从路径中删除 ../ 的过滤器，如果攻击者了解过滤器过程，他们可以制作一种新的注入方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T23:31:16.653

**这实际上并没有回答这个问题......**

请注意，您可以确保请求 uri 指向当前工作目录中的实际有效文件路径。您可以使用该`realpath`功能来规范化路径。

以下代码可以解决问题：

```
<?php
$basedir = getcwd();

$path = $_SERVER['REQUEST_URI'];
$path = preg_replace('~\\.html?$~', '.php', $path);
$path = realpath($path);

if ($path && strpos($path, $basedir) === 0) {
    include $path;
} else {
    return false;
}
?> 
```

在这里，我用来`strpos`验证`$path`以`$basepath`. 由于`realpath`将删除任何`../../..`有趣的业务，这应该安全地将您保留在`$basepath`目录中。

# android - 如何在睡眠模式下在 4.2 jellybean 中显示锁定屏幕上的活动

> ID：16124972
> 
> 赞同：3
> 
> 时间：2013-04-20T20:41:37.367
> 
> 标签：android

我已经实现了 keyguard.wakelock 以在锁定屏幕（睡眠模式）上显示活动，但它仅在 android 版本 2.2 中显示活动，并在 2.3 版本以上崩溃，在 2.2 版本上显示活动几秒钟然后消失在锁定屏幕上。所以请指导我获得适用于每个 Android 版本的这个场景。这是我使用的代码。

KeyguardManager km = (KeyguardManager)getSystemService(KEYGUARD_SERVICE);

```
boolean iskeyguardopen =km.inKeyguardRestrictedInputMode();

    //KeyguardManager.KeyguardLock kl = km.newKeyguardLock("IN");
Log.v("check key guard is enabled or not",""+km.inKeyguardRestrictedInputMode());

        //setContentView(R.layout.customactivitypop);
        count=1;
    kl = km.newKeyguardLock("Taxi");
    kl.disableKeyguard();

    PowerManager pm = (PowerManager) getSystemService(POWER_SERVICE);
    PowerManager.WakeLock wl=pm.newWakeLock(PowerManager.ACQUIRE_CAUSES_WAKEUP | PowerManager.FULL_WAKE_LOCK  , "My_App");
    wl.acquire();

    wl.release(); 
```

谢谢大家。

# python - multiprocessing.Process - 为什么 .start() 方法在 IDLE 控制台中不起作用？

> ID：16124973
> 
> 赞同：1
> 
> 时间：2013-04-20T20:41:38.240
> 
> 标签：python, python-2.7, multiprocessing

```
import multiprocessing 

def simple():
    print 'simple!'

p0 = multiprocessing.Process(target=simple)
p0.start() 
```

这显然没有任何作用。AFAIK 它应该打印“简单！”。我正在交互式控制台中编写所有这些代码。

[编辑] 其他进程不能连接到这个终端吗？如果是这样，我可以做些什么将它连接到同一个终端吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T20:54:35.093

IDLE 以各种奇怪的方式重定向标准输出和输入。因此，某些东西在 IDLE 中不起作用的情况并不少见。我刚刚尝试了您的代码，它在 SL4A 中运行良好。尝试在 IDLE 之外运行它。我可以说这可能会奏效。底线：这正是 IDLE 做事的方式。对不起！尝试其他 IDE，例如 PyScripter 或 Komodo Edit。

# android - 单击正在进行的通知后，Android 通知托盘不折叠

> ID：16124977
> 
> 赞同：0
> 
> 时间：2013-04-20T20:42:00.103
> 
> 标签：android, notifications, remoteview

当单击具有各种按钮的远程视图的正在进行的事件时，活动会在后台加载并且通知托盘不会折叠。

我只在 ICS 4.0 上遇到这个问题。它在 4.1 上运行良好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-06T09:43:17.287

您可以使用以下两行代码来折叠通知栏。

```
Intent it = new Intent(Intent.ACTION_CLOSE_SYSTEM_DIALOGS);
context.sendBroadcast(it); 
```

# c# - MVC4 表单身份验证 Active Directory 自定义授权属性

> ID：16124983
> 
> 赞同：0
> 
> 时间：2013-04-20T20:43:02.933
> 
> 标签：c#, asp.net-mvc-4, active-directory, authorization, forms-authentication

在我的 C# MVC4 应用程序中，我将基于表单的身份验证与 Active Directory 一起使用。我有一个自定义的 AD 会员提供程序。我已经成功测试它可以读取并验证用户所属的组。现在，我尝试创建一个自定义授权属性，它将执行以下操作：

```
if (user is logged-in/not timed-out/authenticated)
{
   if (user's role is equal to role 1 or role 2)
      {
        return a specific view or (preferably) perform a specific redirect to action
      }
   else
      {
       return a different specific view or (preferably) perform a different specific     redirect to action
      }
}
else
    {    
     return View
    } 
```

这是我到目前为止所拥有的：

```
public class AuthorizeEditAttribute : AuthorizeAttribute
    {
        protected override bool AuthorizeCore(HttpContextBase httpContext)
        {
            if (httpContext.Request.IsAuthenticated)
            {
                if ((httpContext.User.IsInRole("group1")) || (httpContext.User.IsInRole("group2")))
                {

                    return true;
                }
                else
                {
                    return false;
                }
            }
            else
            {
                return false;
            }
} 
```

我不知道如何执行重定向任务。我看过这篇讨论如何进行重定向[的帖子](https://stackoverflow.com/questions/4664302/mvc-roleprovider-and-authorize-attribute)，但不明白如何将它与我目前所拥有的内容整合在一起。特别是因为我相信我必须使用 AuthorizeCore 来访问 httpcontext.user 以进行我执行的第一次检查，并且我不知道如何传入 AuthorizationContext 类型的另一个参数来执行看起来沿着所需路径传递的操作重定向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:39:03.153

我认为您还应该覆盖该[`OnAuthorization`](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.onauthorization%28v=vs.108%29.aspx)方法。这有一个`AuthorizationContext`参数可以让您将结果设置`RedirectResult`为您喜欢的...

# jquery - jQuery - 显示/隐藏/单击功能的问题

> ID：16124985
> 
> 赞同：0
> 
> 时间：2013-04-20T20:43:07.027
> 
> 标签：jquery, click, hide

我不知道我重新制作这段代码的效果如何，但最大的问题是：

当我点击菜单项时，会显示黑框。当我点击空白/背景或其他地方时，框消失了。可以合理地假设，当我单击第二个菜单项（当第一个菜单项被激活时）时，第一个菜单项（黑框）应该消失，并且应该激活第二个菜单项。但是，当我单击第二个菜单项时，两个黑框都被激活。

```
$(document).ready(function () {
$('#icons').click(function () {
        if ($('#chat-drop').is(":visible")) {
            $('#chat-drop').hide()
        $('#rodyti').removeClass('active');
        } else {
            $('#chat-drop').show()
        $('#rodyti').addClass('active');
        }
    return false;
}); 
```

完整代码：http: [//jsfiddle.net/wW75v/4/](http://jsfiddle.net/wW75v/4/)

我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:47:11.827

在两个点击事件的开头添加以下内容，以清除任何可见的聊天放置元素。

[http://jsfiddle.net/wW75v/5/](http://jsfiddle.net/wW75v/5/)

```
$('#chat-drop,#chat-drop2').hide() 
```

所以这变成：

```
$(document).ready(function () {
    $('#icons').click(function () {
        $('#chat-drop,#chat-drop2').hide(); //Add
        if ($('#chat-drop').is(":visible")) {
            $('#chat-drop').hide()
            $('#rodyti').removeClass('active');
        } else {
            $('#chat-drop').show()
            $('#rodyti').addClass('active');
        }
        return false;
    });

    $('#icons2').click(function () {
        $('#chat-drop,#chat-drop2').hide(); //Add
        if ($('#chat-drop2').is(":visible")) {
            $('#chat-drop2').hide()
            $('#rodyti2').removeClass('active');
        } else {
            $('#chat-drop2').show()
            $('#rodyti2').addClass('active');
        }
        return false;
    });

    $('#chat-drop').click(function (e) {
        e.stopPropagation();
    });
    $(document).click(function () {
        $('#chat-drop').hide();
        $('#rodyti').removeClass('active');
    });

    $('#chat-drop2').click(function (e) {
        e.stopPropagation();
    });
    $(document).click(function () {
        $('#chat-drop2').hide();
        $('#rodyti2').removeClass('active');
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T20:50:58.883

尝试这个 ：

```
$('#icons').click(function () {
    if ($('#chat-drop').is(":visible")) {
        $('#chat-drop').hide()
    $('#rodyti').removeClass('active');
    } else {
        $('#chat-drop').show()
    $('#rodyti').addClass('active');
        $('#chat-drop2').hide()
        $('#rodyti2').removeClass('active');
    }
return false;
});

$('#icons2').click(function () {
        if ($('#chat-drop2').is(":visible")) {
            $('#chat-drop2').hide()
        $('#rodyti2').removeClass('active');
        } else {
            $('#chat-drop2').show()
        $('#rodyti2').addClass('active');
                        $('#chat-drop').hide()
        $('#rodyti').removeClass('active');
        }
    return false;
}); 
```

# mysql - MySQL Multiple lines string puts 0

> ID：16124987
> 
> 赞同：0
> 
> 时间：2013-04-20T20:43:16.087
> 
> 标签：mysql

I'm trying to insert a multiple line string into my MySQL db.

Example:

```
INSERT INTO `dressuurpaardje`.`Marks` (`markID`, `testID`, `markPosition`, `techinicalMark`, `directiveIdeas`, `maxMark`, `coefficient`, `overflow`) 
VALUES (NULL, 1, 'M', 'Proceed in passage ' + CHAR(10) + CHAR(13) + ' Transition collected walk - passage', NULL, 10, NULL, NULL); 
```

I use `' + CHAR(10) + CHAR(13) + '` with the intention to get a newline in the string. But this puts the string "0" in my db

Any suggestions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:47:39.270

1.  Use '\n' in your query, and let the text interpreter add the line (depends what you use, but that's what I would recommend)
2.  Use `CONCAT(string1, CHAR(10), CHAR(13), string2)`, as mentionned also by Mazatwork.

Be aware that CHAR10 + CHAR13 is wrong. A line feed / carriage return is either:

*   chr10 or \n (unix)
*   chr13 + chr10 or \r\n (windows)

# google-app-engine - Google App Engine JPA 获取 com.google.appengine.datanucleus.EntityUtils$ChildWithoutParentException

> ID：16124988
> 
> 赞同：0
> 
> 时间：2013-04-20T20:43:16.683
> 
> 标签：google-app-engine, jpa, google-cloud-datastore, datanucleus

更新：我发现我的问题是我自己使用 keyfactory.createKey() 方法生成 FbUser 主键。如果我将其更改为自动生成它工作正常。但问题是我不想这样做，因为我的数据是密钥的字符串格式。所以我需要手动将类型从 String 更改为 Key 然后持久化。

我正在使用 Google App Engine JPA 并尝试在我的实体之间建立 oneToMany 关系。

```
@Entity
public class DummyParent{

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private long id;

//@Unowned
@OneToMany(targetEntity=FbUser.class, mappedBy="dummyP", fetch=FetchType.LAZY, cascade = CascadeType.ALL)
private ArrayList<FbUser> users;
} 
```

在这里 FbUser 作为孩子：

```
@Entity
public class FbUser {

@Id
private Key id;
private String name;
@ManyToOne(fetch=FetchType.LAZY)
private DummyParent dummyP;
} 
```

所以在那之后我实例化父类设置它的id并设置用户。但我得到以下异常：

```
Caused by: com.google.appengine.datanucleus.EntityUtils$ChildWithoutParentException: Detected attempt to establish DummyParent(no-id-yet) as the parent of FbUser("1322222") but the entity identified by FbUser("1322222") has already been persisted without a parent.  A parent cannot be established or changed once an object has been persisted.
at com.google.appengine.datanucleus.EntityUtils.extractChildKey(EntityUtils.java:939)
at com.google.appengine.datanucleus.StoreFieldManager.getDatastoreObjectForCollection(StoreFieldManager.java:967)
at com.google.appengine.datanucleus.StoreFieldManager.storeFieldInEntity(StoreFieldManager.java:394) 
```

知道为什么会这样吗？Ps HRD 已启用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:01:29.047

因此，您在没有父实体的情况下保留了 FbUser，然后尝试在以后更改它，而 GAE Datastore 不允许这样做（正如消息中所说的非常清楚）。您没有提供持久性代码，因此除了猜测之外没有任何评论。

解决方案：正确地坚持它（首先是父母，然后是孩子），或者将它们坚持为*Unowned*。

# bash - Bash - extracting a string between two points

> ID：16124993
> 
> 赞同：1
> 
> 时间：2013-04-20T20:43:50.197
> 
> 标签：bash

For example:

```
((

extract everything here, ignore the rest

)) 
```

I know how to ignore everything within, but I don't know how to do the opposite. Basically, it'll be a file and it needs to extract the data between the two points and then output it to another file. I've tried countless approaches, and all seem to tell me the indentation I'm stating doesn't exist in the file, when it does.

If somebody could point me in the right direction, I'd be grateful.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T21:19:01.797

如果您的数据是“面向线的”，因此标记是单独的（如示例中所示），您可以尝试以下一些方法：

```
function getdata() {
    cat - <<EOF
before
((
    extract everything here, ignore the rest
    someother text
))
after
EOF
}

echo "sed - with two seds"
getdata | sed -n '/((/,/))/p' | sed '1d;$d'

echo "Another sed solution"
getdata | sed -n '1,/((/d; /))/,$d;p'

echo "With GNU sed"
getdata | gsed -n '/((/{:a;n;/))/b;p;ba}'

echo "With perl"
getdata | perl -0777 -pe "s/.*\(\(\s*\\n(.*)?\)\).*/\$1/s" 
```

ps：是的，它看起来像*疯狂牙签的舞蹈*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T20:58:31.023

Assuming you want to extract the string inside (( and )):

```
VAR="abc((def))ghi"
echo "$VAR"
VAR=${VAR##*((}
VAR=${VAR%%))*}
echo "$VAR" 
```

`##` cuts away the longest string from the beginning; `#` cuts away the shortest string from the beginning; `%%` cuts away the longest string at the end; `%` cuts away the shortes string at the end

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T20:51:16.610

文件 ：

```
$ cat /tmp/l
((
    extract everything here, ignore the rest
    someother text
)) 
```

剧本

```
$ awk '$1=="((" {p=1;next} $1=="))" {p=o;next} p' /tmp/l
    extract everything here, ignore the rest
    someother text 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T21:29:25.237

`sed -n '/^((/,/^))/ { /^((/b; /^))/b; p }'`

简要说明：

```
/^((/,/^))/: range addressing (inclusive)
{ /^((/b; /^))/b; p }: sequence of 3 commands
                       1\. skip line with ^((
                       2\. skip line with ^))
                       3\. print 
```

需要跳行才能使范围选择独占。

# vb.net - How to replace text to a 'vbcr'

> ID：16124994
> 
> 赞同：0
> 
> 时间：2013-04-20T20:44:03.830
> 
> 标签：vb.net, text

Using vb.net and visual studio 2012.

I have a bunch of strings using custom text replacement. By that I mean that they are all one-line strings using, for example, "&1" to replace 'vbcr' and so on. I have to take this string and replace all the "&1" by a vbcr.

I tried using regex and stringbuilder replace. Here is an example:

```
finaltext = firsttext.Replace("&1", vbcr) 
```

But doing it this way results in replacing the "&1" by a simple space. I thought that vbcr was the problem but I tried to reverse my code by:

```
finaltext = firsttext.Replace(vbcr, "&1") 
```

The vbcr were correctly replaced by "&1" so I don't understand why my original code is not working.

I know it's possible using a long complicated custom function but I would prefer to avoid this solution if possible.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T01:50:26.593

According to MSDN, the syntax of [String.Replace](http://msdn.microsoft.com/en-CA/library/fk49wtc1.aspx) states that the first argument is the `oldValue` and the second argument is the one that replaces it.

Also, if you need newlines, you should be using [Environment.NewLine](http://msdn.microsoft.com/en-us/library/system.environment.newline.aspx):

```
finaltext = firsttext.Replace("&1", Environment.NewLine) 
```

`Environment.NewLine` is easier to read and it also takes care of the platform for you, being

> A string containing "\r\n" for non-Unix platforms, or a string containing "\n" for Unix platforms.

# python - Launching the $ command line in Canopy iPython

> ID：16124996
> 
> 赞同：0
> 
> 时间：2013-04-20T20:44:13.503
> 
> 标签：python, ipython, canopy

How can I launch the command that begins with $ in Canopy iPython ? I am using Windows 7.

It seems such a trivial question but I tried to find an answer by googling every possible version of my question without coming close to an answer. Yet websites tutorials on iPython often ask you to enter something on a line like that.

I have no trouble with the interpreter which uses numerical in/out prompts like

```
In [23]:
Out [24]: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:58:57.673

If I am correct, the `$` is not an IPython prompt. It is a shell prompt. Basically, the commands entered at that prompt are not IPython commands, but are commands that you enter at your terminal/command prompt. Linux distros and OSX call it the Terminal, BSD, the XTerm, and Windows, the Command Prompt.

**EDIT:** Since you are using Windows 7, you would use the Command Prompt. Some UNIX commands, like grep and awk, are UNIX-only but available for Windows using things like GNUWin. Others, like cat, have their own Command Prompt alternatives, like type.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-27T16:54:09.903

在 Canopy 编辑器中，您还可以使用感叹号 ! 开始一行：

在 [1] ！蟒蛇

思考 Canopy Python 2.7.6 | 64 位 | （默认，2014 年 9 月 15 日，17:43:19）[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin 键入“帮助”、“版权”、“信用”或“许可”以获取更多信息信息。

# java - 纵向模式下带有图标和文本的 ActionBar

> ID：16124998
> 
> 赞同：7
> 
> 时间：2013-04-20T20:44:16.227
> 
> 标签：java, android, menu, android-actionbar

无论我尝试什么，我似乎都无法让图像和文本在操作栏中的菜单项上以纵向模式工作。我什至试图强制 android 纵向

我的 XML：

```
 <item android:id="@+id/menu_save"
  android:icon="@drawable/content"
  android:orderInCategory="100"
  android:title="New Group"
 android:showAsAction="withText|always" /> 
```

有没有人弄清楚这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T20:59:43.110

From the config.xml file of the native ActionBar:

values:

```
<bool name="config_allowActionMenuItemTextWithIcon">false</bool> 
```

values-480dp:

```
<bool name="config_allowActionMenuItemTextWithIcon">true</bool> 
```

To answer your question:

No you can't do that, if the devices width is smaller than 480dp. (Unless you want to create a custom rom with a modded framework)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-18T14:50:49.840

艾哈迈德的回答清楚地说明了为什么这是不可能的。操作栏不容易定制，这很烦人。

一种快速而肮脏的解决方案是在菜单中放置两个按钮，从一个中删除图标并为第二个提供不同的名称。然后在相应的 java 文件中，复制 onOptionsItemSelected 中额外按钮的功能。这克服了必须为操作栏创建自定义视图的问题。

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:yourapp="http://schemas.android.com/apk/res-auto" >
    <item android:id="@+id/action_done"
          android:icon="@drawable/ic_done"
          android:title="@string/done"
          yourapp:showAsAction="always" />
    <item android:id="@+id/action_done2"
          android:title="@string/done"
          yourapp:showAsAction="always" />
    <item android:id="@+id/action_cancel"
          android:icon="@drawable/ic_cancel"
          android:title="@string/cancel"
          yourapp:showAsAction="always" />
    <item android:id="@+id/action_cancel2"
          android:title="@string/cancel"
          yourapp:showAsAction="always" />
</menu> 
```

我也看到了这个答案，但没有尝试：[withText in split ActionBar #Google Calendar Method](https://stackoverflow.com/a/11549007/2832027)。这就是在 Google 日历中完成的方式，但也依赖于替换操作栏的自定义视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-25T11:04:13.720

最简单的方法是：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:app="http://schemas.android.com/apk/res-auto"
xmlns:tools="http://schemas.android.com/tools"   
tools:ignore="AppCompatResource">
<item
    android:id="@+id/action_nexo"
    android:title="title"
    app:actionLayout="@layout/custom_menu_item"
    app:showAsAction="always"/>

 </menu> 
```

> custom_menu_item.xml

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="?attr/actionBarSize">
<TextView
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:gravity="center"
    android:text="@string/nexo_tile_short"
    android:clickable="true"
    android:focusable="true"
    android:textSize="@dimen/text_size_small"
    android:textStyle="bold"
    android:textColor="?attr/actionMenuTextColor"
    />
<ImageView
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:paddingTop="@dimen/padding_small"
    android:paddingBottom="@dimen/padding_small"
    android:src="@drawable/nexo"/>
 </LinearLayout> 
```