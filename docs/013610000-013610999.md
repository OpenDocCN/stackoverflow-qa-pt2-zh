# StackOverflow 问答 13610000-13610999

# tortoisegit - Tortoisegit 设置默认包含提交时添加的文件？

> ID：13610002
> 
> 赞同：1
> 
> 时间：2012-11-28T16:38:52.343
> 
> 标签：tortoisegit

我正在寻找一种在提交时默认检查“未版本化文件”的方法。

有没有办法做到这一点？

# java - spring：我可以自动装配组件字段的字段吗？

> ID：13610010
> 
> 赞同：0
> 
> 时间：2012-11-28T16:39:25.923
> 
> 标签：java, spring, autowired

鉴于：

```
@Component
class Foo {}

class Bar {
   @Autowired
   Foo foo;
}

@Component
class Zoo {
   Bar bar = new Bar();
} 
```

如何指示 Spring 自动装配实例`foo`中的字段`bar`？

更具体地说，我是否可以指示 spring 在看到实例后将 Bar 视为 bean。例如，尊重`@PostConstruct`注释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:49:26.970

您已经手动设置了它，因为通过使用`new`您正在创建不受 Spring IOC 容器管理的对象。

它也不会尊重`@PostContruct`，因为该注释仅适用于由容器管理的 bean。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:45:08.933

为什么不能

```
@Component
class Zoo {
    @Autowired
    Bar bar;
}

 @Component
 class Bar {
    @Autowired
    Foo foo;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T07:11:13.407

Spring 能够使用 aspectj 连接带有 @Configurable 注释的类以进行编译时编织。在 Maven 中（取自 Roo 创建的配置）：

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>aspectj-maven-plugin</artifactId>
            <version>1.2</version>
            <!-- NB: do not use 1.3 or 1.3.x due to MASPECTJ-90 and do not use 1.4 due to declare parents issue  -->
            <dependencies>
                <!-- NB: You must use Maven 2.0.9 or above or these are ignored (see MNG-2972) -->
                <dependency>
                    <groupId>org.aspectj</groupId>
                    <artifactId>aspectjrt</artifactId>
                    <version>${aspectj.version}</version>
                </dependency>
                <dependency>
                    <groupId>org.aspectj</groupId>
                    <artifactId>aspectjtools</artifactId>
                    <version>${aspectj.version}</version>
                </dependency>
            </dependencies>
            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal>
                        <goal>test-compile</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <outxml>true</outxml>
                <aspectLibraries>
                    <aspectLibrary>
                        <groupId>org.springframework</groupId>
                        <artifactId>spring-aspects</artifactId>
                    </aspectLibrary>
                </aspectLibraries>
                <source>${java.version}</source>
                <target>${java.version}</target>
            </configuration>
        </plugin> 
```

并在应用程序上下文中添加`<context:spring-configured/>`

# asp.net - 将 .aspx 页面标题设置为 Eval 的标题

> ID：13610013
> 
> 赞同：0
> 
> 时间：2012-11-28T16:39:44.013
> 
> 标签：asp.net, .net

我正在尝试使用 an`<%# Eval("name") %>`作为我页面的标题。我似乎无法在网上找到任何解决方案。我已经尝试过另一个 StackOverflow 问题，但现在也可以。

该页面是 bio.aspx，在站点上显示为 bio.aspx?id=123，因此页面标题需要根据 ID 有所不同。我想我可以只使用 Eval("name") 但还没有运气。

我目前正在使用 JavaScript：

```
window.onload = function() {
document.title = '<%# Eval("name") %> | Title Line';
} 
```

这可行，但它仍然使标题标签为空，并且有点垃圾邮件。

这是代码隐藏：

```
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;

public partial class DoctorBio : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{
    Page.Title = "Your Page Title";

    HtmlMeta metaDescription = new HtmlMeta();
    metaDescription.Name = "description";
    metaDescription.Content = "brief description";
    Page.Header.Controls.Add(metaDescription);

    HtmlMeta metaKeywords = new HtmlMeta();
    metaKeywords.Name = "keywords";
    metaKeywords.Content = "keywords, keywords";
    Page.Header.Controls.Add(metaKeywords);
}
protected void SetPageTitle(object title)
{
this.Title = title.ToString();
}
protected string ReplaceLineBreaks(object text)
{
    string newText = text as string;
    if (newText == null) { return string.Empty; }
    return newText.Replace("\r\n", "<br />");
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:02:56.037

替换您的以下代码
**以前的代码**

```
this.Title = title.ToString(); 
```

**用。。。来代替**

```
Page.Title = title.ToString(); 
```

试试这个。它对我有用...

# javascript - onclick的实现

> ID：13610015
> 
> 赞同：1
> 
> 时间：2012-11-28T16:39:53.220
> 
> 标签：javascript

假设我们有：

`<input type="button" name="button" value="Validate Payment" onclick="Validate()" />`

我们可以在onclick中放入：

1.  `onclick="Validate"`
2.  `onclick="Validate()"`
3.  `onclick="Validate();"`

我的问题是这三个实现之间有什么区别

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T16:42:59.093

1.  不会执行函数，会返回函数(try `console.log(Validate)`:)
2.  将执行函数。
3.  将与#2 完全相同，执行该功能。

所以#2和#3在功能上没有区别。

请注意，内联事件处理程序是不好的做法，就像[jbabey](https://stackoverflow.com/users/386152/jbabey)[在此评论中提到](https://stackoverflow.com/questions/13610015/implementation-of-onclick/13610076#comment18659903_13610015)的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:47:48.500

onclick="Validate();" 的区别 并且 onclick="Validate()" 不存在。分号在 javascript 中是可选的，因此您的代码将是相同的。

要理解 onclick="Validate" 和其他两者的区别，需要对 Javascript 中括号的使用有所了解。

基本上，

```
onclick="Validate()" 
```

将执行函数“验证”并返回该函数返回的任何内容。

```
onclick="Validate" 
```

将返回实际函数“Validate”。

有关更完整的说明，请参见此处：[javascript 语法：函数调用和使用括号](https://stackoverflow.com/questions/593509/javascript-syntax-function-calls-and-using-parenthesis)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T19:18:56.433

函数名后面的括号`()`代表“void”，至少在默认情况下，这是正确执行函数所必需的。在某些情况下，您需要在这些括号之间输入一些内容，这与函数一起称为“传递值”。

由于这（“无效”的东西）对于许多类似的编程语言（php、Actionscript 等）来说几乎但不完全相同，而且它是一种模糊的东西，我不能确切地告诉你这是什么虽然是在 JS 中。

`onclick="Validate()"` 和 之间的区别在于 `onclick="Validate();"`功能方面没有。分号`;`将代码片段彼此分隔，因此如果您要在 Validate() 函数之后调用另一个函数，则需要使用分号。`onclick="Validate()"`在这种情况下，和 之间没有区别`onclick="Validate();"`。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-28T16:42:20.093

他们之间没有区别。

# javascript - 使用行ID jquery获取列值

> ID：13610017
> 
> 赞同：0
> 
> 时间：2012-11-28T16:39:56.473
> 
> 标签：javascript, jquery

我有一个这样的jaquery代码：

```
var items = $('.trSelected', grid); 
```

其中 items 是逗号分隔的行列表（tr 标签），如下所示：

```
row25
row30 
```

我想获得这些行的第 6 列和第 8 列（td）值。如何使用 jquery 做到这一点。

我可以遍历这样的项目：

```
for (i = 0; i < items.length; i++) {
   itemList += items[i].id;  // gives row id
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:03:28.967

创建一个函数并将行号和列传递给该函数，检查返回不为空等，您应该直接从表中获取所需的值

```
function getValue(rowNumber, column){

var val = $('#selectme').children('tbody').children(':nth-child(' + rowNumber + ')').children(':nth-child(' + column + ')').text();

    return val;

}
alert(getValue(1,3)); 
```

​</p>

[JSFiddle 这里](http://jsfiddle.net/vaGKH/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:48:08.640

下面的代码在您的行中进行迭代，并将第 6 和第 8 的值添加到 itemList。

```
$.each( items, function(i, item){

     columns = $(item).children();
     //columns[5]
     //columns[7]
}); 
```

# perl - 从列表中选择要编辑的元素 - Perl/CGI

> ID：13610018
> 
> 赞同：0
> 
> 时间：2012-11-28T16:39:56.620
> 
> 标签：perl, cgi

我有一张表格，其中显示了用户 MAC 地址和其他信息。我正在通过 for 循环为每个条目添加一个编辑按钮。我的问题是如何选择其中一个条目显示在另一个子例程中？换句话说，当我单击一个条目的编辑按钮时，如何在另一个执行编辑功能的子例程中将该条目信息显示出来？

下面是我的条目列表子。

```
print <<EOF;
<br>
 <table>
  <tr>
   <th>MAC</th>
   <th>Description</th>
   <th>UserID</th>
   <th>Edit</th>
<th>Delete</th>
   </tr>
EOF

foreach $test ( @list ) {

   print "<tr>";
   print "<td>" . scalar($test->mac()) . "</td>";
   print "<td>" . scalar($test->comment()) . "</td>\n";
   print "<td>" . scalar($test->username()) . "</td>\n";

   print "<td>" . $editButton . "</td>\n";

 print "</tr>";

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:48:47.737

选择要编辑的内容是非破坏性操作，因此您可以使用链接。

您需要使用独特的东西来识别要编辑的东西。

假设 MAC 地址是唯一的（它应该用于设备，但可能不用于用户或评论），您可以使用它。

```
use URI::Escape;
use HTML::Entities;

my $editButton = sprintf(
    q{<a href="edit.cgi?mac="%s">Edit</a>}, 
    encode_entities(uri_escape($test->mac()))
); 
```

然后，您可以[访问](https://metacpan.org/module/CGI#FETCHING-THE-VALUE-OR-VALUES-OF-A-SINGLE-NAMED-PARAMETER%3a)生成编辑表单的脚本中的值。

# wcf - WCF/REST - System.ServiceModel.Activation

> ID：13610033
> 
> 赞同：2
> 
> 时间：2012-11-28T16:40:52.470
> 
> 标签：wcf, rest, mono

有谁能帮助我吗？事实：

*   我正在使用单声道 2.10.9
*   我正在构建一个基于 WCF-REST 的 WebService
*   我需要 System.ServiceModel.Activation.ServiceRoute
*   该类包含在 System.ServiceModel.Activation 程序集中
*   我的 linuxbox 上显然没有程序集

感谢您的时间

# ruby-on-rails - 如何在 Rails REST API 中使用外部提供的 ID？

> ID：13610042
> 
> 赞同：2
> 
> 时间：2012-11-28T16:41:19.123
> 
> 标签：ruby-on-rails, api, rest

**一般来说，在 REST API 中使用外部 ID 的最佳实践是什么，特别是在 Rails 中？**

* * *

**一些背景：**

我为我的应用程序创建了一个 API，它使用基于标准资源的 JSON REST API。

我有一个 Flight 模型，用户可以通过它通过 POST 到 /api/flights 创建模型对象。这会像 ActiveRecord 一样为新的 Flight 对象分配一个唯一的 id。

到目前为止相当标准。

但是，我的客户希望我提供一个选项，在 API 中创建 Flight 对象时自己分配一个 id，然后使用他分配的 id 来显示/更新/删除（等）对象通过 API。

我想我可以简单地添加一个 external_id 参数并通过 external_id 添加路由来更新/删除/索引。然而，这似乎使优雅的基于资源的 Rails 方法变得混乱。

那么，最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:52:37.983

我认为这很好。另一个类似的情况是为替换不太友好的 ID 的 URL 创建一个“slug”或“友好的 url”（“augments”是一个比替换更好的词）。只要`external_id`是不可变的、在其范围内唯一、URL 安全等，它就等同于 ID。但是，因为它是一个外部值，所以您需要与您的客户确认它是不可变的；虽然可以更改它，但处理更改值需要做很多工作（特别是如果它是 URL 的一部分）。

如果您想替换 Rails 的 find 方法以使用 external_id，请使用`method_missing`重新定义 id - 通过谷歌搜索“rails 3 slug method_missing”和类似内容可以找到相关示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T17:46:02.463

我不确定这是否有帮助，但您可以检查 gem[友好的 id](https://github.com/norman/friendly_id)，您可以为该 gem 指定 external_id，然后它将处理请求

```
http://example.com/states/4323454 
```

像是

```
http://example.com/states/washington 
```

# php - PHP 用函数替换字符

> ID：13610044
> 
> 赞同：0
> 
> 时间：2012-11-28T16:41:27.183
> 
> 标签：php, function, preg-replace, str-replace

我尝试按功能更改字符

```
 <?php
$string = "Hi everybody people [gal~images/articles~100~100~4]  here other imagen [gal~images/products~100~100~3]";

$regex = "/\[(.*?)\]/";
preg_match_all($regex, $string, $matches);

for($i=0; $i<count($matches[1]);$i++)
{
$match = $matches[1][$i];
$array = explode('~', $match);

//$newValuet="gal("".$array[1]."","".$array[2]."","".$array[3]."","".$array[4]."")";

$newValue="gal(".$array[1].",".$array[2].",".$array[3].",".$array[4].")";

$string = str_replace($matches[0][$i],$newValue,$string);

}

echo $string;
?> 
```

这里的问题：

```
$newValue="gal(".$array[1].",".$array[2].",".$array[3].",".$array[4].")";

    $string = str_replace($matches[0][$i],$newValue,$string); 
```

功能没有给出正确的结果我尝试不同的方法但继续出现问题，请我查看所有功能但没有得到这个工作如果你能回答请给我一些修改这个代码我能理解，非常感谢所有帮助

更多信息

脚本生成新值，这些值必须发送 Gall 函数以进行插入和显示替换标签并放置好，显示文本和标签替换

```
 $newValue="gal(".$array[1].",".$array[2].",".$array[3].",".$array[4].")";

 $string = str_replace($matches[0][$i],$newValue,$string); 
```

这里的函数显示了gal，函数执行的时候必须执行到str_replace来放文本，在替换标签之前继续，只有这个失败

PD：我尊重一些人，我来这里是为了发送我的问题，但是在很多情况下我写得不好，但英语对我来说不是母语，当然对于这里的所有人来说，在很多情况下，如果没有说得好，请尊重人们，这里的所有人都需要学习或需要帮助，明天我可以帮助其他人或这个人我，仅此而已，谢谢

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:49:20.560

**画廊的功能**

```
 <?php
    function gal($dire,$w_size,$h_size,$cols)
    {
    $n_images=0;

    $dir=opendir("$dire");
    while($file=readdir($dir))
    {
    if ($file!="." && $file!=".." && $file!="Thumbs.db" && $file!="index.html" && $file!=".htaccess" && $file!="config.dat")
    {
    $n_images++;
    $imagenes[]=$file;
    }

    }
    closedir($dir);

    $num_img="".$n_images."";
    $num_img_cols="".$cols."";
    $num_filas="".ceil($num_img/$num_img_cols)."";

    echo '<table width="10%" border="0" cellpadding="3" cellspacing="2" align="center">
    <tr> 
    <td colspan="'.$num_img_cols.'">&nbsp;</td>
    </tr><tr>';

    $x=1;

    for ($j=0;$j<$n_images;$j++)
    {
    print "<td align='center'>";

    //echo '<img src="'.$dire.'/'.$imagenes[$j].'" width="'.$w_size.'" height="'.$h_size.'">';

    print "<a href='".$dire."/".$imagenes[$j]."' class='highslide' onclick=\"return hs.expand(this,{slideshowGroup:'group1',align:'center'})\">";
    print '<img src="indexer_resizer.php?ruta_f='.$dire.'/&image='.$imagenes[$j].'&new_width='.$w_size.'&new_height='.$h_size.'" border="0" alt="Pulse para Ampliar" title="Pulse para Ampliar">
    </a>';

    if ($x%$num_img_cols==0)
    {
    print "</tr>";
    }
    $x++;
    }

    echo "</table>";
    }
    ?>

**Function for replace tags**

     <?php
    $string = "Hola todos os presento una nueva galeria  [galt~imagenes/articulos~100~100~4]  Aqui otra más [gal~imagenes/productos~100~100~3]";

    $regex = "/\[(.*?)\]/";
    preg_match_all($regex, $string, $matches);

    for($i=0; $i<count($matches[1]);$i++)
    {
    $match = $matches[1][$i];
    $array = explode('~', $match);

    //$newValuet="gal("".$array[1]."","".$array[2]."","".$array[3]."","".$array[4]."")";

    $newValue="gal(".$array[1].",".$array[2].",".$array[3].",".$array[4].")";

    $string = str_replace($matches[0][$i],$newValue,$string);

    }

    echo $string;
    ?> 
```

这是所有功能，你可以在这里看到，脚本使用了两件事，即查看画廊的功能和替换和显示画廊的脚本，但没有正常工作

脚本生成新值，这些值必须发送 Gall 函数以进行插入和显示替换标签并放置好，显示文本和标签替换

```
 $newValue="gal(".$array[1].",".$array[2].",".$array[3].",".$array[4].")";

 $string = str_replace($matches[0][$i],$newValue,$string); 
```

这里的函数显示了gal，函数执行的时候必须执行到str_replace来放文本，在替换标签之前继续，只有这个失败

PD：我尊重一些人，我来这里是为了发送我的问题，但是在很多情况下我写得不好，但英语对我来说不是母语，当然对于这里的所有人来说，在很多情况下，如果没有说得好，请尊重人们，这里的所有人都需要学习或需要帮助，明天我可以帮助其他人或这个人我，仅此而已，谢谢

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:55:03.880

要捕获字符串的这些部分，请尝试：

```
$string = "Hi everybody people [gal~images/articles~100~100~4]  here other imagen [gal~images/products~100~100~3]";

preg_match_all('/\[(.+)\]/ismU, $string, $matches); 
```

或者

```
preg_match_all('/\[(\w+)\~([a-z0-9\/]+)\~(\d+)\~(\d+)\~(\d+)\]/ismU, $string, $matches); 
```

最后一个结果有点复杂，`$matches`但证明你会准确地捕捉到你需要的数据。

# ipad - 是否有适用于 iPad 版 Chrome 的开发者工具

> ID：13610049
> 
> 赞同：26
> 
> 时间：2012-11-28T16:41:42.150
> 
> 标签：ipad, google-chrome, ios6

我刚刚下载了适用于 iPad 的 Google Chrome，我知道它使用与 Safari 相同的 webkit 引擎，因此应该能够使用已经存在的 Safari 开发工具解决我的大部分问题。

问题是我的网站挂在 Chrome 而不是 Safari - 所以：

**如何使用 iPad 版 Chrome 调试我的网站？**

我的版本号是（21.0.1180.82）

# .net - 如何强制 NLog 覆盖日志文件

> ID：13610051
> 
> 赞同：14
> 
> 时间：2012-11-28T16:41:50.433
> 
> 标签：.net, nlog, overwrite

重新启动应用程序时，我需要 NLog 覆盖日志文件。目前它附加到现有文件。例如，我的 NLog.config 中有类似的内容

```
<targets>
  <target xsi:type="File" name="fileLog" 
          fileName="${longdate}.log" layout="${message}" />
</targets> 
```

如果我能够添加到`<target>`这样的东西会很好`append="false"`，而不是附加到现有的日志，它会覆盖。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-28T16:47:04.733

替换您的配置部分

```
<targets>
  <target xsi:type="File" name="fileLog" 
          fileName="${longdate}.log" layout="${message}" deleteOldFileOnStartup="true"/>
</targets> 
```

# java - 混合 C++/Qt/Java 应用程序

> ID：13610061
> 
> 赞同：1
> 
> 时间：2012-11-28T16:42:23.370
> 
> 标签：java, c++, qt, java-native-interface, jna

我正在开发一个混合的 C++/Qt/Java 应用程序。在使用 JNI 启动 JVM 之前，我正在从 C++ 端打开一个 QtSplashScreen。关闭 QtSplashScreen 时出现问题。我想在 C++ 端有一个回调，当应用程序准备好运行时，它会被 Java 端调用。但是，似乎当使用 JNI 或 JNA 从 Java 调用 C++ 时，我需要将 C++ 代码编译为共享库，这会破坏所有 QtSplashScreen 内部依赖项。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T16:49:14.800

好的完全愚蠢的方式 - 但我会将splashscreen和java程序实现为由共同父进程产生的单独进程。然后我会让它通过 UDP（最简单）或邮箱/管道相互通信。

恕我直言，当您需要在用不同编程语言编写的程序之间进行通信时，您必须将进程本身分开，并通过 TCP/UDP/Mailboxes/IPC（或类似概念）相互通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:31:10.513

我是原始海报。最后的解决方案是使用 JNI 调用返回布尔值的 Java 方法。此方法使用 wait() 等待 Java 端准备好。发生这种情况时，应用程序会在同一对象上调用 notifyAll() 并返回该方法，这会使 SplashScreen 关闭，如下所示：

等待Java(); splashScreen.close();

# sql-server - 在 mssql 中使用 LastIndexOf 和 SubString

> ID：13610062
> 
> 赞同：9
> 
> 时间：2012-11-28T16:42:24.547
> 
> 标签：sql-server, tsql, view

如何使用 ms sql 从 [代码] 列中获取 [结果] 列

```
Id          Code
200001      43791
200001      67036
200006      19.09.01.08683      
200006      03.01.04.01.64230   
200007      19.01.03.02804    

Id          Result  Code
200001      43791   43791
200001      67036   67036
200006      08683   19.09.01.08683      
200006      64230   03.01.04.01.64230   
200007      02804   19.01.03.02804 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-28T17:10:03.857

```
SELECT Id,
       RIGHT(Code, CHARINDEX('.', REVERSE('.' + Code)) - 1) AS [Result],
       Code
FROM   YourTable 
```

# python - Scapy.all 导入 * 不起作用

> ID：13610064
> 
> 赞同：13
> 
> 时间：2012-11-28T16:42:27.717
> 
> 标签：python, ubuntu, scapy

因此，我在 Ubuntu 中为 scapy 编写了一个小脚本。

```
#!/usr/bin/env python
import sys
#from scapy.all import *
try 
   import scapy
   except ImportError:
     del scapy
     from scapy import all as scapy
i= IP()
t= TCP()
i.dst='192.168.56.100'
t.dport=22
pakket=i/t
answered,unanswered=sr(pakket)
answered.nsummary() 
```

我写了“尝试”，因为这里有另一个主题（尝试将其作为解决方案）。我当前使用此代码的输出如下

```
Traceback (most recent call last):
File "./scapy.py", line 5, in <module>
import scapy
File "/home/nicholas/scapy.py", line 9, in <module>
i=IP()
NameError: name 'IP' is not defined 
```

仅使用 from scapy.all import * 尝试时，没有“尝试”。

```
Traceback (most recent call last):
File "./scapy.py", line 3, in <module>
from scapy.all import *
File "/home/nicholas/scapy.py", line 3, in <module>
from scapy.all import *
ImportError: No module named all 
```

我尝试了在谷歌上找到的不同的导入方式，但它仍然不起作用。谁能告诉我我做错了什么？（不要介意这篇文章的缩进）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T16:54:37.917

从查看 scapy 源代码来看，scapy 包没有出现在`import`任何东西上，也没有定义`__all__`in `__init__`。因此，您需要明确`import scapy.all`（或`from scapy import all`）才能从中`from scapy.all import`获取任何其他内容，因为它还没有出现`sys.modules`。请注意，这在您的程序流程中只需要发生一次，因为在解释器导入模块后，它将可用于从那时起执行的所有代码，无论它在哪里。查看[有关模块的 Python 文档](http://docs.python.org/2/tutorial/modules.html)以及如何`import`，特别是导入包，了解更多详细信息。

编辑：我想我现在看到了问题，我只是注意了堆栈跟踪的错误部分。很确定您在这里处理的是名称冲突。您的文件名为`scapy.py`，因此当您`import scapy`从该文件的上下文中时，您实际上是将文件本身作为模块导入。由于您的文件没有名为的子模块`all`（它不能，因为它不是包），因此您会看到您看到的导入错误。尝试将文件名切换为与您希望在其中导入的任何包或模块不冲突的名称，看看效果是否更好。

顺便说一句，请注意在您的堆栈跟踪中，您的导入实际上是在递归调用您的一个文件。这应该是导入过程中出现问题的线索。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-11T19:11:51.860

我在 OSX 上遇到了类似的问题，我安装了 scapy 包`pip install scapy`，然后我试图执行我的测试文件`scapy.py`我得到的错误是：

```
python scapy.py
Traceback (most recent call last):
File "scapy.py", line 1, in <module>
from scapy.all import *
File "/Users/**/Desktop/scapy-test/scapy.py", line 1, in <module>
from scapy.all import *
ModuleNotFoundError: No module named 'scapy.all'; 'scapy' is not a package 
```

就我而言，是文件名本身导致了无法调用的问题`scapy.py`。我将其更改为`test.py`并且一切正常，它与包位置无关，只是文件名。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-05T10:40:15.317

我喜欢在@Daniel 回答中添加一些内容。你真正的问题不是 scapy 包。您真正的问题在于您的 python 文件名。**永远不要使用库名称或其内容作为文件名。**

In your case, your file name is `scapy.py`. After that you import scappy. In here you accidentally call your python file as object in your code there for your compiler can't understand which type(file or library) to call. There for that error was appeared.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-30T09:43:08.207

`scapy.py`当我在当前目录中有一个时，我看到了这一点。`scapy.all import *`似乎首先查看当前目录。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-10T14:31:18.277

当前版本的正确导入将是：

```
from scapy.all import * 
```

# active-directory - 将用户添加到受信任域中的组时，AD 权限被拒绝

> ID：13610070
> 
> 赞同：0
> 
> 时间：2012-11-28T16:42:42.060
> 
> 标签：active-directory

我有 2 个域，它们之间存在双向信任。我想修改一个域上的组，但在另一个域上运行。

假设我在其上运行脚本的域是 mydomain.com，我想将用户添加到 yourdomain.com

我尝试通过 VBScript 以及 DSMod，但获得权限被拒绝

```
dsmod group "CN=DCComics,OU=Comics,DC=yourdomain,DC=com" -addmbr "CN=Dark Knight,OU=Comics,DC=yourdomain,DC=com" 
```

当我运行上述内容时，我得到了这个

```
dsmod failed:CN=DCComics,OU=Comics,DC=yourdomain,DC=com:Insufficient access rights to perform the operation. 
```

我可以在 yourdomain.com 上查询数据，并且我已经检查了信任是否正常工作。我已在 mydomain.com 上以管理员身份登录。

理想情况下，我希望在 VBScript 中执行此操作，所以我写这个只是为了测试：

```
user = "LDAP://CN=Clark Kent,OU=Comics,DC=yourdomain,DC=com"
group = "LDAP://CN=DCComics,OU=Comics,DC=yourdomain,DC=com"
Dim objgroup
SET objGroup = GETOBJECT(group)
objGroup.Add(user) 
```

再次，我收到有关权限的错误：

```
C:\tmp\foo.vbs(6, 1) Microsoft VBScript runtime error: Permission denied 
```

我需要为此获得权限的任何指导？我可以补充一下，我还在学习 AD，所以请温柔:)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:41:36.427

成为管理员`mydomain.com`并不会让您成为管理员`Yourdomain.com`- 信任或不信任。您需要将您`mydomain\account`添加到`Administrators`组中`yourdomain.com`

# vb.net - 将字典转换为结构化格式字符串

> ID：13610071
> 
> 赞同：10
> 
> 时间：2012-11-28T16:42:48.347
> 
> 标签：vb.net, collections, .net-4.0, generic-collections

我有一个 Dictionary 对象声明为`var as Dictionary(of String, String)`.

我正在尝试利用通用集合可用的 LINQ 扩展，但只获得非扩展方法。

我需要将 Dictionary 集合转换为具有以下模式的字符串：`key1=val1, key2=val2, ..., keyn=valn`

起初以为做一个 foreach 循环会适得其反，除了我是程序员的障碍。

到目前为止我有什么，但怀疑它是产生这个的最佳逻辑模式：

```
Public Overrides Function ToString() As String
    Dim ret As String = ""
    For Each kv As KeyValuePair(Of String, String) In Me._set
        If ret <> String.Empty Then
            ret &= ", "
        End If

        ret &= String.Format("{0}={1}", kv.Key, kv.Value)
    Next

    Return ret
End Function 
```

~~并且由于某种原因，即使我已经将`System.Core`&`System.Linq`库导入到项目中，我的 dev-env 智能感知中也没有显示任何扩展的 LINQ 扩展。所以现在，除非有人可以帮助我让 LINQ 扩展出现在 Intellisense 中，否则它们是不可能的。~~

发现 LINQ 扩展没有出现的问题，所以它们又回到了桌面上；）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T17:11:12.950

我会像这样用 Linq 编写整个方法块（对不起 C#-vb.net 汤...）

### 升c

```
return String.Join(",",Me._set.Select(kvp=>String.Format("{0}={1}",kvp.Key, kvp.Value).ToArray()); 
```

另外，我真的不知道 _set 是什么。也许你必须投：

### c-夏普：

```
return String.Join(",", Me._set.Cast<KeyValuePair<String,String>>().Select(kvp=>String.Format("{0}={1}",kvp.Key, kvp.Value).ToArray()); 
```

### VB.net：

```
return String.Join(", ", Me.Select(Function(kvp) String.Format("{0}={1}", kvp.Key, kvp.Value)).ToArray()) 
```

希望这会有所帮助，

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-28T16:53:13.277

就您的非 LINQ 循环而言，我建议您这样做：

```
Public Overrides Function ToString() As String
    Dim items As New List(Of String)(_set.Count)
    For Each pair As KeyValuePair(Of String, String) In _set
        items.Add($"{pair.Key}={pair.Value}"))
    Next
    Return String.Join(", ", items)
End Function 
```

使用 LINQ，您可以这样做：

```
Public Overrides Function ToString() As String
    Return String.Join(", ", _set.Select(Function(pair) $"{pair.Key}={pair.Value}"))
End Function 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T22:29:25.737

VB.net 语法：

```
Dim dic As New Dictionary(Of String, String)() From {
            {"a", "1"},
            {"b", "2"},
            {"c", "3"},
            {"d", "4"}
            }

Dim s As String = String.Join(",", dic.Select(Function(pair) String.Format("{0}={1}", pair.Key, pair.Value)).ToArray()) 
```

# machine-learning - 是否有关于如何将数据集划分为训练集和验证集的经验法则？

> ID：13610074
> 
> 赞同：243
> 
> 时间：2012-11-28T16:42:50.950
> 
> 标签：machine-learning

是否有关于如何最好地将数据划分为训练集和验证集的经验法则？是否建议使用偶数 50/50 分割？或者相对于验证数据拥有更多的训练数据有明显的优势（反之亦然）？还是这个选择几乎取决于应用程序？

我主要分别使用了 80% / 20% 的训练和验证数据，但我没有任何原则性的理由选择了这个部门。在机器学习方面更有经验的人可以给我建议吗？

* * *

## 回答 #1

> 赞同：264
> 
> 时间：2012-11-29T10:30:18.210

有两个相互竞争的问题：训练数据越少，参数估计的方差越大。使用较少的测试数据，您的性能统计数据会有更大的差异。从广义上讲，您应该关注数据的划分，这样方差都不会太高，这更多地与每个类别中实例的绝对数量有关，而不是百分比。

如果您总共有 100 个实例，您可能会被交叉验证困住，因为没有单一的拆分会给您的估计带来令人满意的差异。如果您有 100,000 个实例，那么选择 80:20 拆分还是 90:10 拆分并不重要（实际上，如果您的方法计算量特别大，您可以选择使用较少的训练数据）。

假设您有足够的数据来进行适当的保留测试数据（而不是交叉验证），以下是处理差异的有益方法：

1.  将数据拆分为训练和测试（80/20 确实是一个很好的起点）
2.  *将训练*数据拆分为训练和验证（同样，80/20 是公平的拆分）。
3.  对训练数据的随机选择进行二次抽样，以此训练分类器，并记录验证集上的性能
4.  尝试使用不同数量的训练数据进行一系列运行：随机抽取其中的 20%，例如 10 次并观察验证数据的性能，然后对 40%、60%、80% 进行相同的操作。您应该看到更多数据的性能更好，但不同随机样本的方差也更低
5.  要处理由于测试数据大小引起的差异，请反向执行相同的过程。对所有训练数据进行训练，然后随机抽取一定百分比的*验证*数据进行多次抽样，然后观察性能。您现在应该发现，验证数据的小样本的平均性能与所有验证数据的性能大致相同，但随着测试样本数量的减少，方差要高得多

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-11-28T19:30:31.237

您会惊讶地发现 80/20 是一个相当普遍的比率，通常被称为[帕累托原则](http://en.wikipedia.org/wiki/Pareto_principle)。如果您使用该比率，通常是一个安全的选择。

但是，根据您采用的培训/验证方法，该比率可能会发生变化。例如：如果您使用 10 折交叉验证，那么您最终会在每折处得到一个 10% 的验证集。

[关于训练集和验证集之间的适当比例](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.33.1337&rep=rep1&type=pdf)有一些研究：

> 为验证集保留的模式比例应与自由可调参数数量的平方根成反比。

在他们的结论中，他们指定了一个公式：

> 验证集 (v) 与训练集 (t) 的大小比，v/t，尺度类似于 ln(N/h-max)，其中 N 是识别器家族的数量，h-max 是这些家族中最大的复杂度。

他们所说的复杂性是指：

> 每个识别器家族都以其复杂性为特征，这可能与[VC 维度](http://en.wikipedia.org/wiki/VC_dimension)、描述长度、可调整参数的数量或其他复杂性度量相关，也可能不相关。

采取第一条经验法则（即验证集应该与自由可调参数的数量的平方根成反比），您可以得出结论，如果您有 32 个可调参数，则 32 的平方根约为 5.65，分数应为1/5.65 或 0.177 (v/t)。大约 17.7% 应保留用于验证，82.3% 用于培训。

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2012-11-28T19:53:40.623

去年，我参加了 Andrew Ng 教授的在线机器学习课程。他的建议是：

**培训**：60%

**交叉验证**：20%

**测试**：20%

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2017-09-06T07:31:26.480

好吧，你应该再考虑一件事。

如果您有一个非常大的数据集，例如 1,000,000 个示例，则可能不需要拆分 80/10/10，因为 10% = 100,000 个示例可能对于仅仅说该模型工作正常来说太多了。

也许 99/0.5/0.5 就足够了，因为 5,000 个示例可以代表您数据中的大部分差异，并且您可以根据测试和开发中的这 5,000 个示例轻松判断该模型运行良好。

不要仅仅因为您听说没问题就使用 80/20。想想测试集的目的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-12T08:53:28.743

假设您的数据较少，我建议尝试 70%、80% 和 90% 并测试哪个结果更好。在 90% 的情况下，对于 10% 的测试，您可能会获得较差的准确性。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-25T20:27:24.763

也许 63.2% / 36.8% 是一个合理的选择。原因是，如果您有一个总样本量*n*并希望随机抽样替换（也称为重新抽样，如在统计引导程序中）*n 个*案例中的初始*n*，则选择单个案例的概率重新采样将约为 0.632，前提是*n*不太小，如下所述：[https ://stats.stackexchange.com/a/88993/16263](https://stats.stackexchange.com/a/88993/16263)

对于*n* = 250 的样本，个别案例被选择重新抽样到 4 位数的概率为 0.6329。对于*n* = 20000 的样本，概率为 0.6321。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-06-10T20:59:50.737

这一切都取决于手头的数据。如果您有大量数据，那么如上所述，80/20 是一个不错的选择。但是，如果您不使用 50/50 拆分进行交叉验证，则可能会帮助您更多，并防止您创建过度拟合训练数据的模型。

# ruby-on-rails - 在模型中缓存对象以在 Rails 中进行多项操作

> ID：13610078
> 
> 赞同：0
> 
> 时间：2012-11-28T16:43:07.127
> 
> 标签：ruby-on-rails

使用 Rails 3.2。我有以下代码：

```
# photo.rb
class Photo < ActiveRecord::Base
  after_create :associate_current_user

  private

  def associate_current_user
    current_user = UserSession.find.user
    self.user_id = current_user.id
  end
end 
```

在创建新记录之前，它会搜索`current_user`. 如果一次只有 1 条新记录，这没关系。但是如果要创建 100 条记录，它会搜索相同的`current_user`100 次。肯定有性能问题。

有没有办法可以缓存对象以进行类似操作，或者有什么建议？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:45:47.487

你可以做记忆，如下

```
class Photo < ActiveRecord::Base
  extend ActiveSupport::Memoizable
  after_create :associate_current_user

  private

  def associate_current_user
    current_user = UserSession.find.user
    self.user_id = current_user.id
  end
  associate_current_user
end 
```

# php - PHP 函数的哪些部分被命名？

> ID：13610079
> 
> 赞同：3
> 
> 时间：2012-11-28T16:43:11.010
> 
> 标签：php, user-defined-functions

我无法找出问题，这是因为我不知道要搜索的正确术语。有人可以命名 PHP 函数的所有部分，如果我遗漏了什么，请添加它。

```
function my_function(
            non_variable $variable_one,
            $variable_two = "",
            $variable_three ) {

    /* inside stuff (Statement?) */
} 
```

我正在寻找的答案看起来像这样

**函数**：声明
**my_function**：名称
**non_variable**：请回答
**$variable_one**：用 non_variable 填充的变量

我真正需要知道的是**non_variable**和**$variable_one**，谢谢！

* * *

编辑：有关该功能的更多详细信息

```
function my_function(custom_name $company) {
    $website = $company->company_website;
    /* Additional stuff */
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T16:47:45.193

```
function foo(         // function declaration with function name
    SomeType $arg1,   // argument with type hint
    $arg2,            // argument
    $arg3 = ''        // argument with default value
) {                   // all above together: function signature
    // function body
} 
```

参数也可以互换地称为“参数”。看：

*   [http://php.net/manual/en/functions.user-defined.php](http://php.net/manual/en/functions.user-defined.php)
*   [http://php.net/manual/en/functions.arguments.php](http://php.net/manual/en/functions.arguments.php)
*   [http://php.net/manual/en/language.oop5.typehinting.php](http://php.net/manual/en/language.oop5.typehinting.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T16:45:20.010

non_variable = 类型提示或参数类型

$variable_one = 参数/参数 ... 类型。

可以详细介绍参数和参数之间的区别，但很多人还是可以互换使用它们...... [“参数”与“参数”](https://stackoverflow.com/questions/1788923/parameter-vs-argument)

其他资源：

[OPP 条款](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CDgQFjAB&url=http%3A%2F%2Fwww.ldodds.com%2Flectures%2Fintro2java%2FOOP_Terms.doc&ei=kEC2UNXSM-KYyAGL_oHQCg&usg=AFQjCNFawK8pVgfZ9iTLD9M1vuuWdUuuzg&sig2=-52HUorVsF5UcgVBsCchng)

[http://framework.zend.com/manual/1.12/en/coding-standard.coding-style.html](http://framework.zend.com/manual/1.12/en/coding-standard.coding-style.html) - 对我来说，风格指南会很好地收集这种词汇。

试图寻找更多适合 ESL 或非英语母语人士的东西，但没有找到我预期的那么多。如果英语是您的主要语言并且它只是新的词汇，我认为无论如何事情都会很容易。如果用母语学习它们可能不好，那就担心翻译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T16:45:16.770

**non_variable**是此参数中预期的对象类型 **$variable_one**是此函数中使用的参数的名称

# git - netbeans git 支持：“忽略”和“从提交中排除”之间的区别

> ID：13610081
> 
> 赞同：2
> 
> 时间：2012-11-28T16:43:14.863
> 
> 标签：git, netbeans

我是一个新的 git 用户。使用 git 将更改推送到我的网站时，我想排除我的本地 wamp 数据库设置。我正在使用 netbeans，我想将我的配置目录添加到 gitignore 文件中。有谁知道如何使用内置 git 支持的 netbeans 来做到这一点。

谢谢，

账单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:44:18.860

我对其进行了测试，结果发现选择“忽略”会将选定的目录/文件添加到 .gitignore 文件中。

希望这可以帮助某人。- 账单

# algorithm - 最小排序子数组

> ID：13610082
> 
> 赞同：8
> 
> 时间：2012-11-28T16:43:16.443
> 
> 标签：algorithm

这是一道面试题。给定一个整数数组，编写一个方法来查找索引 m 和 n，这样如果你对元素 m 到 n 进行排序，整个数组都会被排序。最小化纳米。即找到最小的序列。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T16:52:21.447

### 观察

m 之前的整数应该是升序的并且小于（或等于）之后的任何整数。

### 算法

1.  从第一个元素开始，并在第一个减少时停止。（子阵列 SA）

2.  之后找到最小值。(分钟)

3.  起点就在 SA 中小于（或等于）MIN 的最大整数之后。（找到m）

### 复杂

上）

* * *

对 n 做类似的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T16:54:03.093

您需要跟踪四件事：

1.  在开始的排序区域结束
2.  排序区域的开始在末尾
3.  开始区域后的最小数量
4.  结束区域前的最大数量

首先找出 1 和 2 的初步值，从头到尾扫描数组，直到找到放错位置的值。

然后，您在初步 1 之后扫描所有内容，以找到最小数量。这是你的 3。用同样的方法找到 4。

现在你回溯到数组的起始区域，直到找到最小值应该在的位置。这是 1 的确切答案，也是您的`m`.

以相同的方式通过回溯结束区域来找到`n`最大数量应该在哪里。

# antlr3 - 我可以让 ANTLR 从我手动创建的 AST 生成输出吗？

> ID：13610090
> 
> 赞同：1
> 
> 时间：2012-11-28T16:43:40.687
> 
> 标签：antlr3, abstract-syntax-tree

我了解如何使用 ANTLR 从字符流生成 AST。

我希望能够以编程方式创建 AST 并让 ANTLR 应用语法中的规则以产生有效的输出，例如添加不在 AST 中的语法内容，例如引号和空格。

要使用 tree walker，您似乎需要将 TokenStream 附加到 TreeNodeStream，但如果树是通过编程创建的，则没有 TokenStream。未能在 CommonTreeNodeStream 上调用 setTokenStream(...) 会导致运行时出现 NullPointerExceptions。

例子：

```
TokenStream tokens = new CommonTokenStream(new MyLexer(somestream));
// parse an AST 'ast' from this stream
CommonTreeNodeStream nodes = new CommonTreeNodeStream(ast);
// needs this or npe
nodes.setTokenStream(tokens);
new MyWalker(nodes).start(); 
```

所以 - 你可以在没有字符流输入的情况下即时创建 AST 并让一些生成的 ANTLR 类根据语法中定义的规则生成字符流吗？

# sql - 甲骨文找到过去 3 年没有租过的客户

> ID：13610094
> 
> 赞同：3
> 
> 时间：2012-11-28T16:43:51.717
> 
> 标签：sql, database, oracle

我有一个数据库，有几张表。其中一张是客户表，一张是出租表，一张是出租明细表。让我们分别称它们`C`为`R`和`RD`。`RD`有`date_in`和`date_out`租用的工具，并`R`通过`RD`的主键链接。`R`链接`C`到`customer id`。

基本上我想做的是选择（并删除）在过去 3 年内没有租过任何东西的客户。所以我不能使用 where `date_out > sysdate - 3 years`[表示不准确的代码]，因为该工具可能在 4 年前和上周也被租出，所以它需要保存在数据库中......我只需要删除没有的工具在过去的 3 年里根本没有租过。

我知道数据库结构迟缓但我无法改变它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T16:57:07.290

```
delete from c 
where not exists ( select * 
                   from r join rd using(r_id) 
                   where c_id=c.c_id and date_out>add_months(sysdate,-36) ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T16:52:05.217

如果我正确理解了您的架构，您应该能够编写如下内容：

```
DELETE
  FROM c
 WHERE c_id NOT IN
        ( SELECT DISTINCT c_id
            FROM r
           WHERE r_id IN
                  ( SELECT r_id
                      FROM rd
                     WHERE date_out > SYSDATE - (365 * 3 + 1)
                  )
        )
; 
```

删除与过去三年的记录`c`没有对应`r`记录的所有记录。`rd`（对于“三年”，我使用了 365 × 3 + 1 天，这有点骇人听闻，但恕我直言，简单明了。如果你愿意，你可以改进它。）

`ON DELETE CASCADE`请注意，只有当您的外键具有;时，上述内容才能正常工作。如果没有，那么您需要首先删除与这些客户关联的`r`和记录。`rd`为此，您可以使用与上述查询相同的方法。

# android - 在 setVisible 为 false 然后为 true 之后，ActionBar 图标不再出现在 ActionBar 上

> ID：13610098
> 
> 赞同：3
> 
> 时间：2012-11-28T16:44:07.630
> 
> 标签：android, android-actionbar, actionbarsherlock

我有一个带有 mode 的`ActionBar.NAVIGATION_MODE_TABS`ActionBar，当我选择不同的选项卡时，我想更改出现在 ActionBar 上的图标。

我用一个 Activity 成功地做到了，但是当我再次将它应用到另一个 Activity 时它表现得很奇怪。

假设我有 2 个选项卡：Tab1 和 Tab2，我希望在选择 Tab2 时出现相机图标，并在选择 Tab1 时消失。此外，Tab1 是活动开始时将选择的第一个选项卡。所以我做了这样的事情：

因为我不希望在 HomeActivity 第一次启动时出现相机图标，所以我设置了`android:visible="false"`，然后当我运行下面的代码时：当 HomeActivity 启动时，相机图标没有出现在 ActionBar -> 正确，但是当我切换到tab2，相机图标也不会出现在 ActionBar 上，但是如果我按下“菜单”按钮 - >“相机”的 MenuItem 将显示为溢出操作栏项目。

如果我设置`android:visible="true"`-> 除了第一次 HomeActivity 启动时第一次出现相机图标（不正确！！！） -> 当我更改 tab1/tab2 时，相机图标会消失/正确显示。

任何人都可以解释并给我一个解决方案以使其正常工作。谢谢！

这是我的代码：

actionbar_home.xml

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/actionbar_home_camera"
        android:title="@string/actionbar_rc_camera"
        android:icon="@drawable/ic_action_camera"
        android:showAsAction="always" 
        android:visible="false"/>
</menu> 
```

HomeActivity.java

```
public class HomeActivity extends SherlockFragmentActivity {
private ActionBar actionBar;
private Menu menu;
private Tab1Fragment tab1Fragment;
private Tab2Fragment tab2Fragment;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_home);

    this.configActionBar();
    this.createTabs();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.actionbar_home, menu);
    this.menu = menu;

    // pass objects to tabs
    tab1Fragment.setOptionMenu(this.menu);
    tab2Fragment.setOptionMenu(this.menu);

    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    return super.onOptionsItemSelected(item);
}

private void configActionBar()
{
    actionBar = this.getSupportActionBar();
    // below line makes application icon in top-left corner become a button
    actionBar.setHomeButtonEnabled(true);
    // below line add an arrow "<" before the top-left icon
    //ab.setDisplayHomeAsUpEnabled(true);
    //actionBar.setDisplayShowTitleEnabled(true);
}

private void createTabs()
{
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    ActionBar.Tab tab1 = actionBar.newTab().setText(
            Const.TAB_TITLE_HOME_TAB1);
    ActionBar.Tab tab2 = actionBar.newTab().setText(
            Const.TAB_TITLE_HOME_TAB2);

    // create the two fragments we want to use for display content
    tab1Fragment = new Tab1Fragment();
    tab2Fragment = new Tab2Fragment();        

    // add listener
    tab1.setTabListener(
            new HomeTabListener(tab1Fragment));
    tab2.setTabListener(
            new HomeTabListener(tab2Fragment));        
    actionBar.addTab(tab1);
    actionBar.addTab(tab2);     
}
} 
```

BaseTabFragment.java

```
public class BaseTabFragment extends SherlockFragment{
    protected View root;
    protected Menu optionMenu;
    protected SherlockFragmentActivity container;

    public Menu getOptionMenu() {
        return optionMenu;
    }
    public void setOptionMenu(Menu optionMenu) {
        this.optionMenu = optionMenu;
    }
    public SherlockFragmentActivity getContainer() {
        return container;
    }
    public void setContainer(SherlockFragmentActivity container) {
        this.container = container;
    }
} 
```

Tab1Fragment.java

```
public class Tab1Fragment extends BaseTabFragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        root = inflater.inflate(R.layout.tab1_layout, 
                container, false);

        this.changeActionBarLayout();

        return root;
    }

    private void changeActionBarLayout()
    {
        try {
            this.optionMenu.findItem(R.id.actionbar_home_camera)
                .setVisible(false);
        } catch (NullPointerException e)
        {
            // e will be thrown at the first time MainActivity is called
        }       
    }
} 
```

Tab2Fragment.java

```
public class Tab2Fragment extends BaseTabFragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        root = inflater.inflate(R.layout.tab2_layout, 
                container, false);

        this.changeActionBarLayout();

        return root;
    }

    private void changeActionBarLayout()
    {
        try {
            this.optionMenu.findItem(R.id.actionbar_home_camera)
                .setVisible(true);
        // Camera Icon still doesn't appear on ActionBar even when I set it as SHOW_AS_ACTION_ALWAYS
        this.optionMenu.findItem(R.id.actionbar_home_camera)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
        } catch (NullPointerException e)
        {
            // e will be thrown at the first time MainActivity is called
        }       
    }   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T06:44:32.267

我遇到了同样的问题并找到了一个简单的解决方案：只需在您的 Activity 中实现 onPreparePanel 并返回 true，即使所有项目都不可见。

```
public class HomeActivity extends SherlockFragmentActivity {

    [...]

    @Override
    public boolean onPreparePanel(int featureId, View view, Menu menu) {
        super.onPreparePanel(featureId, view, menu); // this returns false if all items are hidden
        return true; // return true to prevent the menu's deletion 
    }

    [...]

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T17:57:46.683

经过一番调查，我认为这是一个错误，但我不知道是ActionBarSherlock的错误还是Android ActionBar的错误。

**原因**

原因是选项菜单中只有一个MenuItem，假设MenuItem 是mItem。当我设置`mItem.setVisible(false)`时，ActionBar 上将没有任何项目，那么显然，包含 ActionBar MenuItems 的空间被删除。之后，当我设置时`mItem.setVisible(true)`，空间没有恢复，在这种情况下，我`mItem`被认为是溢出的MenuItem->它只在使用设备的菜单硬件按钮时显示。

**解决方案**

*   使用多个 MenuItem
*   巧妙地使用`setEnable(false)`and`setIcon(null)`和 and的组合来`setTitle("")`代替`setVisible(false)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-30T06:14:40.113

我遇到了同样的问题并以这种方式解决：

首先，我在 onCreateOptionsMenu(Menu menu) 时保存 com.actionbarsherlock.view.Menu

```
@Override
public boolean onCreateOptionsMenu ( Menu menu )
{
    ShowOrEditTaskActivity.this.getSupportMenuInflater().inflate(R.menu.edit_or_show_task_menu, menu);
    setOptionsMenu ( menu );
    optionsMenu.findItem ( R.id.save_action ).setVisible ( false );
    return super.onCreateOptionsMenu ( menu ) ;
} 
```

然后我检查每个

```
public boolean onOptionsItemSelected ( MenuItem item ) 
```

像这样调用：

```
@Override
public boolean onOptionsItemSelected ( MenuItem item )
{
    if ( item.getItemId ( ) ==   R.id.edit_action  )
    {
        isEditMode ( true ) ;
        optionsMenu.findItem ( R.id.edit_action ).setVisible ( false );
        optionsMenu.findItem ( R.id.save_action ).setVisible ( true );
    }... 
```

希望这可以帮助..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-30T10:23:44.857

我遇到了同样的问题，我发现`setVisible(true)`当至少有另一个`MenuItem`可见时它可以工作。我希望这对某人有帮助。

# bash - 如何确定工作在 PBS 队列中的位置？

> ID：13610100
> 
> 赞同：2
> 
> 时间：2012-11-28T16:44:11.693
> 
> 标签：bash, job-scheduling, pbs

我正在使用一个使用 PBS/Torque 进行作业调度的计算集群。队列有时可能会很长，例如，我现在在超过 800 个队列中提交了一些作业（据报告`showq`显示了完整的作业列表，但据我所知，这些不一定在执行顺序）。

我想知道我的工作在队列中的哪个位置；在我之前处理多少？我想得到一些输出，如：`Job <id>: 417/862`. 这样我至少会有一些进展和等待时间的迹象。但是，我无法找到如何做到这一点。可以做到吗，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:17:33.043

我不确定我是否可以指望排队的作业会按照 提供的顺序执行`showq`，但经过更多研究，它看起来确实如此。

打印的队列`showq`格式如下：

```
ACTIVE JOBS--------
[table headers]
[listing of active jobs]
IDLE JOBS--------
[table headers]
[listing of idle jobs]
BLOCKED JOBS----------
[table headers]
[listing of blocked jobs] 
```

基于这种格式，我想出了以下 bash 脚本，以在给定作业 id 的情况下在队列的空闲部分中查找作业位置：

```
job=$1

idlestart=`showq | grep "IDLE JOBS" -n | cut -d: -f1`

jobline=`showq | grep -n $job | cut -d: -f1`
place=`expr $jobline - $idlestart - 2`

echo "Idle Jobs section starts at line $idlestart"
echo "Job $job at line $jobline"
echo "Place in queue: $place" 
```

示例输出：

```
$ ./placeinq 6565618 

Idle Jobs section starts at line 343
Job 6565618 at line 387
Place in queue: 42 
```

# facebook - 我可以检查我是否在 Facebook 页面上点过赞吗？

> ID：13610103
> 
> 赞同：0
> 
> 时间：2012-11-28T16:44:14.980
> 
> 标签：facebook, facebook-like

> **可能重复：**
> [如何使用 Facebook 的 API 检查用户是否喜欢我的 Facebook 页面或 URL](https://stackoverflow.com/questions/5093398/how-to-check-if-a-user-likes-my-facebook-page-or-url-using-facebooks-api)

如果我确实“喜欢”了 Facebook 页面，有什么方法可以检查 JS 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:28:28.757

可以使用 FQL`page_fan`查表

文档[在这里](https://developers.facebook.com/docs/reference/fql/page_fan/)

像这样查询

```
SELECT created_time FROM page_fan WHERE uid='$UID' and page_id='$PAGE_ID' 
```

如果存在一行，则他们是粉丝。

您可以使用 javascript SDK 调用 api，如下所示：

```
FB.api({
    method: 'fql.query',
    query: 'SELECT created_time FROM page_fan WHERE uid=' + uid + ' AND page_id=' +page_id,
    return_ssl_resources: 1
}, function(response){
    console.log(response);
}); 
```

# servlets - 在从 Servlet 产生的线程中使用 EJB - 不好的做法？

> ID：13610104
> 
> 赞同：0
> 
> 时间：2012-11-28T16:44:24.523
> 
> 标签：servlets, thread-safety, ejb-3.0

我们有一个 servlet，如下所示：

```
public class CacheRefresher extends HttpServlet {
    private static final long START_TIMEOUT = 120*1000;

    public void init(ServletConfig servletConfig) throws ServletException {
        super.init(servletConfig);
        new Thread(new Worker()).start();

    }

    private class Worker implements Runnable {
        public Worker() { }
        public void run() {   
            try {
                Thread.sleep(START_TIMEOUT);
            } catch (InterruptedException e) {
            }

            while(true) {
                MyService myService = null;
                try {
                    myService = ServiceFactory.getInstance().getMyService();
                    myService.doSomething();
                } catch (Exception ex){
                    ex.printStackTrace();
                }finally {
                    ServiceFactory.getInstance().releaseMyService(myService);
                }

                try {
                    Thread.sleep(timeout);
                } catch (InterruptedException e) {
                }
            }
        }

    }
} 
```

其目的是定期调用服务。此 Servlet 将只有一个实例，将在服务器启动时创建。MyService 是一个 EJB。

这有多糟糕？我知道不允许从 EJB 生成线程，但反过来呢？服务器关闭时会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:02:15.300

从概念上讲，我没有看到从多个线程调用 ejb 方法的问题（即使您自己创建了线程）。对于 ejb-container，它将只是其他客户端中的另一个客户端。

从您的示例看来，您的 servlet 的核心目的是启动一堆计时器。如果您可以使用 ejb 3.1，那么有 java ee 标准方法可以做到这一点。

首先是一个在启动时启动计时器的单例 ejb

```
import javax.annotation.PostConstruct;
import javax.ejb.EJB;
import javax.ejb.Singleton;
import javax.ejb.Startup;

@Singleton
@Startup
public class SingletonBean {

    @EJB
    LabBean labBean;

    @PostConstruct
    public void init() {
        long interval = 4000;
        long initialExpiration = 2000;
        labBean.startTimer(initialExpiration, interval, "MyTimer");
    }
} 
```

然后是处理超时的 SLSB：

```
import javax.annotation.Resource;
import javax.ejb.Stateless;
import javax.ejb.Timeout;
import javax.ejb.Timer;
import javax.ejb.TimerConfig;
import javax.ejb.TimerService;

@Stateless
public class LabBean {
    @Resource
    protected TimerService timerService;

    @Timeout
    public void timeoutHandler(Timer timer) {
        String name = timer.getInfo().toString();
        System.out.println("Timer name=" + name);
    }

    public void stopTimer(String name) {
        for (Object o : this.timerService.getTimers())
            if (((Timer) o).getInfo().toString().startsWith(name)){
                ((Timer)o).cancel();
            }       
    }

    public void startTimer(long initialExpiration, long interval, String name){
        stopTimer(name);        
        TimerConfig config = new TimerConfig();
        config.setInfo(name);
        config.setPersistent(false);
        timerService.createIntervalTimer(initialExpiration, interval, config);
    }
} 
```

# vb.net - 如何搜索包含特定文本的 XML 节点？

> ID：13610107
> 
> 赞同：0
> 
> 时间：2012-11-28T16:44:32.277
> 
> 标签：vb.net, linq, linq-to-xml

我有一个包含多个嵌套节点的 XML 文档。它的结构不是固定的。我想根据用户传递的值过滤 XML。即，如果在所有 1000 个节点中，如果 5 个节点包含以“xyz”开头的值，那么我想检索这 5 个节点。

我正在尝试使用 LINQ to XML 来实现这一点，因为我在 xPath 中找不到“LIKK”类型的运算符。我应该在 LINQ 中编写什么样的查询？

到目前为止，我正在做如下的事情：

```
 dim FilterString as string  = "abc"
        Dim doc = New XDocument(Linq.XElement.Parse(objXML.DocumentElement.OuterXml))

        Dim query = doc.Elements()
        query = From e In doc.Elements()
                Where e.Value.ToUpper.StartsWith(FilterString.ToUpper)
                Select e
        Dim sb As New StringBuilder
        For Each result In query
            sb.AppendLine(result)
        Next 
```

示例 XML 将如下所示：

```
<root>
<node>
<p1>abcxys</p1>
<p2>anc</p2>
<c1>
   <c2>abcggh</c2>
   <c3>123</c3>
</c1>
</node>
</root> 
```

我想要 root/node/p1 和 root/node/c1/c2 作为我的结果。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:08:22.940

如果它们可以在任何节点中，那么您将不得不查询每个节点，没有什么可以过滤的。这可能是一个非常昂贵的过程。

```
string userInput = "abc";

var xDoc = XDocument.Load(@"C:\Test\Xml.xml");
var q = from e in xDoc.Descendants()
             where e.Value.IndexOf(userInput) == 1
             select e; 
```

如果您只想测试字符串的第一部分，您仍然必须返回整个值并根据您的条件测试字符串。此查询检查文本“abc”是否出现在字符串的开头（将为空字符串返回 0），并将返回需要该条件的元素集合。

# php - 在 PHP 中处理字符串，忽略 HTML 标签

> ID：13610109
> 
> 赞同：0
> 
> 时间：2012-11-28T16:44:35.907
> 
> 标签：php, html, string, tags

我正在尝试处理可能输入的字符串

```
'something <p>hi</p> <br />' 
```

输入字符串可以包含任何 HTML 标记，也可以不包含任何 HTML 标记。我想处理这个字符串而不格式化它。

本质上，我现在正在拆分它，使用 & 分隔符，并且我需要生成的输出数组仍然包含输入

ETC....

```
$ajaxinput = "function=submit&content=this is some page stuff <p>hi</p>";

        echo 'Input : ' . $ajaxinput . '<br /><br /><br />';

        $output = explode("&", $ajaxinput);
        echo 'Split : ' . $output[0] . '<br /><br />';
        echo 'Split : ' . $output[1]; 
```

输出是：

```
Input : function=submit&content=this is some page stuff
hi

Split : function=submit

Split : content=this is some page stuff
hi 
```

我想：

```
Input : function=submit&content=this is some page stuff <p>hi</p>

Split : function=submit

Split : content=this is some page stuff <p>hi</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:47:29.717

由于您不删除 HTML 标记，因此它们必须存在。但由于它们是 HTML 标记，除非您使用“查看源代码”菜单项，否则您无法在浏览器中看到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:49:17.530

如果您想显示这些标签，请查看[htmlentities （这是我在阅读您的问题后的假设）：](http://php.net/manual/en/function.htmlentities.php)

```
echo htmlentities($str, ENT_QUOTES, "UTF-8"); 
```

htmlentities 会将所有适用的字符转换为 HTML 实体。

# c# - Excel Interop 获取单元格内文本的像素宽度

> ID：13610110
> 
> 赞同：1
> 
> 时间：2012-11-28T16:44:51.023
> 
> 标签：c#, .net, excel, office-interop

我有一个显示工作表标题的宽合并单元格。我还有一个彩色文本框，我想将其立即放置在合并单元格中文本的右侧。

标题的宽度是可变的，所以我使用了一个非常宽的合并单元格。

```
sheet.Range["A2"].Value = title;
//Red Square
sheet.Shapes.Item("redSquare").Left += 0; // Position sheet.Range["A2"].TextWidth ??? 
```

是否有一个我可以在 Range 上访问的属性，它将为我提供合并单元格中文本的实际文本宽度（以像素为单位）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T21:42:03.290

据我所知，Interop 中没有任何内容可以告诉您文本的宽度（以像素为单位），但您可以使用以下方法进行操作。它似乎返回一个与 Excel 基于相同字体设置的列宽相当相似的值。

```
Excel.Range xlRange = sheet.get_Range("A2");
Excel.Font xlFont = xlRange.Font;
string fontName = xlFont.Name;
double fontSize = xlFont.Size;
Font font = new Font(fontName, (float)fontSize);
float width = Graphics.FromImage(new Bitmap(1, 1)).MeasureString(title, font).Width; 
```

您可能需要在这里和那里添加一些像素以确保您的文本框清除文本的结尾，但我认为它与您将获得的一样准确。

# c# - 在ajax错误时显示来自服务器的异常消息

> ID：13610113
> 
> 赞同：9
> 
> 时间：2012-11-28T16:45:07.003
> 
> 标签：c#, ajax, jquery

我使用以下代码在客户端显示来自服务器的异常消息：

```
 [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public static void test(String text)
    {
               try
               {
                    throw new Exception("Hello");
               }

               catch (Exception ex)
               {
                HttpContext.Current.Response.Write(ex.Message);
                throw new Exception(ex.Message, ex.InnerException);
               }

    } 
```

客户端：

```
 $.ajax({
        url: 'DownloadFile.aspx/test',
        type: 'POST',
        contentType: 'application/json; charset=utf-8',
        // Pass the value as JSON string                 
        // You might need to include json2.js for the JSON.stringify
        //method: 'http://www.json.org/json2.js',
        async: false,
        dataType: "json",
        data: '{ "text": "' + text'"}',
        success: function(Result) {

        },

        error: function(xhr, textStatus, errorThrown) {
            var err = eval("(" + xhr.responseText + ")");
            alert(err.Message);
        }
    }); 
```

当我使用 localhost 时，我会在警报弹出窗口中看到“Hello”。当我在远程服务器上使用相同的代码时，出现一般系统错误。

如何获取向用户显示的异常消息文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T16:19:13.740

您需要`<customErrors mode="Off" />`在 web.config 中进行设置。

[你可以在这里](http://msdn.microsoft.com/en-us/library/h0hfz6fc%28v=vs.71%29.aspx)阅读更多

一般来说，您似乎有 mode="RemoteOnly" ，它仅向本地主机显示详细的异常消息。

# jquery - jQuery UI 可拖动和文本选择

> ID：13610115
> 
> 赞同：2
> 
> 时间：2012-11-28T16:45:07.830
> 
> 标签：jquery, jquery-ui

我正在使用 jQuery 1.8.3 和 jQuery UI 1.9.2。
我的 Web 应用程序有一些可拖动的元素，我想允许用户在包含的元素中选择一些文本。
我已经看到有关此主题的其他一些问题。
我正在遵循的另一条路径是使用鼠标右键单击并使用我找到的一些文本选择插件。我仍然无法让它工作。

似乎可拖动/可排序元素不允许文本选择或可以拦截鼠标（点击）事件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T23:01:39.987

我相信您的方法是正确的，您可以使用右键单击从某些 div 复制文本。

例如：

```
<script src="http://cachedcommons.org/cache/zero-clipboard/1.0.7/javascripts/zero-clipboard-min.js" type="text/javascript"></script>
<div id="dragme" class="temp">Draggable Text</div> 
```

除了 jquery-ui 之外，以下 JavaScript 应该允许您使用左键单击拖放 div，然后右键单击以复制 div 内的文本：

```
$("#dragme").draggable();

$.event.special.rightclick = {
    bindType: "contextmenu",
    delegateType: "contextmenu"
};

ZeroClipboard.setMoviePath('http://zeroclipboard.googlecode.com/svn/trunk/ZeroClipboard10.swf');
//Create a new clipboard client
var clip = new ZeroClipboard.Client();

$(document).on("rightclick", ".ui-draggable", function() {

        //Grab the text from the parent row of the icon
        var txt = $(this).text();
        alert("Copying text: "+txt);
        clip.setText(txt);
        clip.glue(this);

        //Add a complete event to let the user know the text was copied
        clip.addEventListener('complete', function(client, text) {
            alert("Copied text to clipboard:\n" + text);
        });
        clip.hide();
        return false;
}); 
```

我为此有一个[jsfiddle](http://jsfiddle.net/mccannf/4AaQa/9/)，但我认为带有 ZeroClipboard 的 SWF 副本与 jsfiddle 不一致。
但它应该在您的开发环境中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-06T04:30:03.220

使用 on mouseenter 事件从父元素中删除可拖动类，以便子元素选择文本。然后使用 on mouseleave 为子元素在父元素上重新添加可拖动类。

# java - java中枚举的优雅通用“交叉产品”

> ID：13610120
> 
> 赞同：2
> 
> 时间：2012-11-28T16:45:12.023
> 
> 标签：java, generics, enums

我正在寻找一种为多个枚举构建包装器的方法。说你有

```
public enum Enum1 {
    A,B,C
}

public enum Enum2 {
    ONE,TWO,THREE
} 
```

我想要一个带有文字的新枚举

```
(A,ONE), (A,TWO), (A,THREE), (B,ONE), ... 
```

整个事情都是通用的，所以我不必知道 Enum1 和 Enum2。有没有办法构建它甚至将它扩展到 n Enums？

还是我应该寻找其他通用方法来建模？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T16:50:21.933

我会设置一个类来表示您所指的元组。如果你愿意，你可以在这里使用泛型：

```
public class EnumTupleImpl<E1 extends Enum<E1>, E2 extends Enum<E2>> {
    private final E1 e1;
    private final E2 e2;

    public EnumTupleImpl(E1 e1, E2 e2) {
        this.e1 = e1;
        this.e2 = e2;
    }

    public E1 getE1() {
        return e1;
    }

    public E2 getE2() {
        return e2;
    }
} 
```

用法：

```
EnumTupleImpl<Enum1, Enum2> tupe1 = new EnumTupleImpl<Enum1, Enum2>(Enum1.A, Enum2.ONE);
EnumTupleImpl<Enum1, Enum2> tupe2 = new EnumTupleImpl<Enum1, Enum2>(Enum1.A, Enum2.TWO);
EnumTupleImpl<Enum1, Enum2> tupe3 = new EnumTupleImpl<Enum1, Enum2>(Enum1.A, Enum2.THREE); 
```

您还可以通过枚举实例表示每个元组，如下所示：

```
public enum Tuple {
    AONE(Enum1.A, Enum2.ONE),
    ATWO(Enum1.A, Enum2.TWO),
    ATHREE(Enum1.A, Enum2.THREE);

    private Enum1 e1;
    private Enum2 e2;

    private EnumTupleEnum(Enum1 e1, Enum2 e2) {
        this.e1 = e1;
        this.e2 = e2;
    }

    public Enum1 getE1() {
        return e1;
    }

    public Enum2 getE2() {
        return e2;
    }
} 
```

用法：

```
Tuple.AONE.getE1(); //returns A
Tuple.AONE.getE2(); //returns ONE 
```

对您来说可能有意义的是使用通用接口来包装枚举表示和类表示，如下所示：

```
public interface EnumTuple<E1, E2> {
    E1 getE1();
    E2 getE2();
} 
```

这将允许您互换使用类或枚举：

```
public class EnumTupleImpl<E1 extends Enum<E1>, E2 extends Enum<E2>> imlements EnumTyple<E1, E2>{
...
}

public enum Tuple implements EnumTuple<Enum1, Enum2>{
...
} 
```

用法：

```
EnumTuple<Enum1, Enum2> tupe1 = new EnumTupleImpl<Enum1, Enum2>(Enum1.A, Enum2.ONE);
EnumTuple<Enum1, Enum2> enum1 = Tuple.AONE; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T17:03:49.790

除了@johncarl 的回答，您还可以尝试：

```
Class<E1> enumType1 =...
Class<E2> enumType2 = ...

List<EnumTuple<E1, E2>> enumTuples = new ArrayList<>(enumType1.getEnumConstants().length * enumType2.getEnumConstants().length);

//or

Set<EnumTuple<E1, E2>> enumTuples = new HashSet<>(enumType1.getEnumConstants().length * enumType2.getEnumConstants().length);

for (E1 e1 : enumType1.getEnumConstants()){
    for (E2 e2 : enumType2.getEnumConstants()){
        enumTuples.add(new EnumTuple<>(e1, e2));
    }
} 
```

如果您使用 HashSet，请不要忘记实现 equals 和 hashCode()。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T22:09:41.810

这是一个可以包装任意数量的枚举。它是一个迭代器，但将它与其他解决方案中的一个或两个结合起来，我认为你已经得到了你所要求的一切。

```
public class Test {
  public static void main(String args[]) {
    new Test().test();
  }

  public static class EnumIterator implements Iterator<Enum[]> {
    // The enums
    private final Enum[][] enums;
    // Where we are in each column.
    private final int[] is;
    // Which column to increment next.
    private int i = 0;

    // Construct from Enum[]s.
    public EnumIterator(Enum[]... enums) {
      // Grab the enums.
      this.enums = enums;
      // Start all ordinals at zero.
      is = new int[enums.length];
      // Next one to increment is the last one.
      i = enums.length - 1;
    }

    // Construct from classes.
    public EnumIterator(Class<? extends Enum>... classes) {
      this(enumsFromClasses(classes));
    }

    // Factory to build the Enum[] array from an array of classes.
    private static Enum[][] enumsFromClasses(Class<? extends Enum>[] classes) {
      Enum[][] theEnums = new Enum[classes.length][];
      for ( int j = 0; j < classes.length; j++ ) {
        theEnums[j] = classes[j].getEnumConstants();
      }
      return theEnums;
    }

    @Override
    public boolean hasNext() {
      // We stop when we are about to increment col 0 and we are at its end.
      return (i > 0 || is[0] < enums[0].length);
    }

    @Override
    public Enum[] next() {
      if (hasNext()) {
        // One from each.
        Enum[] next = new Enum[enums.length];
        for (int j = 0; j < next.length; j++) {
          next[j] = enums[j][is[j]];
        }
        // Step - Kinda like incrementing a number with each digit in a different base.
        // Walk back past '9's setting them to 0.
        for (i = is.length - 1; i > 0 && is[i] == enums[i].length - 1; i--) {
          // Back one.
          is[i] = 0;
        }
        // Step that one up one.
        is[i] += 1;
        return next;
      } else {
        throw new NoSuchElementException();
      }
    }

    @Override
    public void remove() {
      throw new UnsupportedOperationException("Not supported.");
    }
  }

  enum ABC {
    A, B, C;
  }

  enum XY {
    X, Y;
  }

  enum IJ {
    I, J;
  }

  private void test() {
    // Also works - but constructing from classes is cleaner.
    //Iterator<Enum[]> i = new EnumIterator(ABC.values(), XY.values(), IJ.values());
    Iterator<Enum[]> i = new EnumIterator(ABC.class, XY.class, IJ.class);
    for (Enum[] e : Iterables.in(i)) {
      System.out.println(Arrays.toString(e));
    }
  }
} 
```

印刷：

```
[A, X, I]
[A, X, J]
[A, Y, I]
[A, Y, J]
[B, X, I]
[B, X, J]
[B, Y, I]
[B, Y, J]
[C, X, I]
[C, X, J]
[C, Y, I]
[C, Y, J] 
```

请注意，`Iterables.in`仅将一个包装成`Iterator<E>`这样的`Iterable<E>`（不是我的代码 - 我在 SO 上找到它[）](https://stackoverflow.com/a/8555153/823393)。

```
public class Iterables {
  /**
   * Adapts an {@link Iterator} to an {@link Iterable} for use in enhanced for loops.
   *
   * If {@link Iterable#iterator()} is invoked more than once, an
   * {@link IllegalStateException} is thrown.
   */
  public static <T> java.lang.Iterable<T> in(final Iterator<T> iterator) {
    assert iterator != null;
    class SingleUseIterable implements java.lang.Iterable<T> {
      private boolean used = false;

      @Override
      public Iterator<T> iterator() {
        if (used) {
          throw new IllegalStateException("SingleUseIterable already invoked");
        }
        used = true;
        return iterator;
      }
    }
    return new SingleUseIterable();
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-08T17:34:45.127

我最近需要为参数化测试执行此操作。我首选的方法是使用 Java8 流和平面图：

```
 enum Color {
        RED,
        BLUE;
    }

    enum Shape {
        CIRCLE,
        SQUARE;
    }

    enum Size {
        BIG,
        SMALL;
    }

    public static Stream<Object[]> data() {
        return Arrays.stream(Color.values()).flatMap(color -> {
            return Arrays.stream(Shape.values()).flatMap(shape -> {
                return Arrays.stream(Size.values()).map(size -> new Object[] {color, shape, size});
            });
        });
    } 
```

如果需要，您可以随时调用`.toArray()`最终流。

# css - 容器内的全宽横幅

> ID：13610126
> 
> 赞同：0
> 
> 时间：2012-11-28T16:45:20.597
> 
> 标签：css

我的页面布局有一个带有以下css的包装器div：

```
margin-left: auto;
margin-right: auto;
width: 980px;
min-height: 100%; 
```

有没有办法让这个 div 中的 div 跨越整个屏幕？我知道的唯一方法是给 div 一个绝对位置，但我不确定这是否是个好主意。我最近读了一些东西，以避免在 css 中使用“幻数”，我需要在此处执行此操作，以便横幅位于距页面顶部一定距离的位置，即顶部：233px；

处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:56:04.687

最好将横幅从包装器 div 中取出。比其父块大的块不是“自然的”。不过有一个技巧，使用这个：

```
position:absolute;
left:0;
right:0; 
```

注意：当 parent 是 position:relative 时，这将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:48:30.823

如果我理解的话，`width: inherit;`会让子 div 的大小与父级相同。

# url - 根据当前 URL 更改类（条件）

> ID：13610129
> 
> 赞同：1
> 
> 时间：2012-11-28T16:45:24.950
> 
> 标签：url, conditional-statements, tumblr

是否可以使用 tumblr 条件根据帖子的当前 URL 更改类属性？

我想根据我当前所在的页面更改导航中的突出显示，因此我想设置或删除*活动*类：

```
 <li class="active"><a href="#" class="active">Kategorien</a> 
```

感谢您的任何建议！雨者

# list - 如何在lisp中将多个列表的元素合二为一

> ID：13610130
> 
> 赞同：1
> 
> 时间：2012-11-28T16:45:25.300
> 
> 标签：list, lisp, append

我正在尝试获取列表列表的列表（别担心，我会举一个例子）并将每个最后的元素至少转换为一个。这是我到目前为止所做的：

```
(defun cost(state)
(let ((list_elements '()))
(dolist (element state)
  (dolist (subElement element)
    (setq list_elements (append list_elements (list subElement))))
finally (return list_elements)))) 
```

例子：

```
(list
(list
    (list
        (list 1 9 't121) 
        (list 1 10 't122))
    (list
        (list 2 10 't123)
        (list 2 11 't124)))
(list
    (list
        (list 1 9 't121)
        (list 1 11 't132))
    (list
        (list 2 11 't133)
        (list 2 12 't134)))) 
```

所以，这应该返回 `((1 9 T121) (1 10 T122) (2 10 T123) (2 11 T124) (1 9 T121) (1 11 T132) (1 11 T132) (2 11 T133) (2 12 T134))` 而且它只是返回`((1 9 T121) (1 11 T132))`

之后，我应该计算列表中不同元素的数量。

有谁看到这个函数有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:23:11.293

```
(defun double-append (list)
  (reduce #'append (reduce #'append list)))

;; or like this:
(defun mapcan-mapcon (list)
  (mapcan #'append (mapcon #'car list)))

(double-append (list
 (list
  (list
   (list 1 9 't121) 
   (list 1 10 't122))
  (list
   (list 2 10 't123)
   (list 2 11 't124)))
 (list
  (list
   (list 1 9 't121)
   (list 1 11 't132))
  (list
   (list 2 11 't133)
   (list 2 12 't134)))))

((1 9 T121) (1 10 T122) (2 10 T123) (2 11 T124) (1 9 T121) (1 11 T132)
 (2 11 T133) (2 12 T134)) 
```

到目前为止，我可以通过预期的结果来判断，那一定是这样的。

```
;; Using Alexandria, just as an example, of how currying can save
;; some repetitive coding:
(ql:quickload "alexandria")
(defun curried-append ()
  (let ((reducer (alexandria:curry #'reduce #'append)))
    (alexandria:compose reducer reducer)))

(funcall
 (curried-append)
 (list
  (list
   (list
    (list 1 9 't121) 
    (list 1 10 't122))
   (list
    (list 2 10 't123)
    (list 2 11 't124)))
  (list
   (list
    (list 1 9 't121)
    (list 1 11 't132))
   (list
    (list 2 11 't133)
    (list 2 12 't134))))) 
```

# java - 无法在 ObjectList 中获取休眠对象属性 - java.lang.String 无法强制转换为 Object

> ID：13610133
> 
> 赞同：0
> 
> 时间：2012-11-28T16:45:29.137
> 
> 标签：java, hibernate, primefaces

我实现了以下休眠对象：

```
@Entity
@Table(name = "imageviewer_crvariable")
public class CRVariable implements Serializable   {

private static final long serialVersionUID = 1L;

@Id
@GeneratedValue
@Column(name = "VarId")
private Long varId;

@Column(name = "VarName")
private String varName;

@Column(name = "VarDescription")
private String varDescription;

@ManyToMany(mappedBy="crvariables")
private Set<CRImageType> crimagetypes = new HashSet<CRImageType>();

public CRVariable(){
}

public CRVariable(Long varId,String varName, String varDescription){
    this.varId=varId;
    this.varName=varName;
    this.varDescription=varDescription;
}

//getters and setters 
```

我还有一个由 back bean 管理的 primefaces 选项列表组件。我已经实现了一个方法“setAssocImTypeVariables”，它使用新的选项列表值（在列表项从源传输到目标之后）更新我的休眠对象（CRVariable），如下所示：

```
public void setAssocImTypVariables() {      
    dualListVars = getDualListVars();       
    List<CRVariable> sourceVariables = dualListVars.getSource();
    List<CRVariable> targetVariables = dualListVars.getTarget();

    for (int i=0; i<sourceVariables.size(); i++) {
        System.out.println(">>>>>>>>>>>>> I am a source variable: " + sourceVariables.get(i));
    }

    for (int i=0; i<targetVariables.size(); i++) {
        System.out.println(">>>>>>>>>>>>> I am a target variable: " + targetVariables.get(i));
    }

    CRImageType selectedImageType = getSelectedCRImageType();
    Long selImTypeId = selectedImageType.getImTypeId(); 
```

这段代码运行良好，这是我在控制台中得到的结果：

```
>>>>>>>>>>>>> I am a source variable: varId : 75, varName : Ki67(X), varDescription : Ki67(X)
>>>>>>>>>>>>> I am a source variable: varId : 76, varName : PTEN(X), varDescription : PTEN(X)
>>>>>>>>>>>>> I am a source variable: varId : 77, varName : Histology (X), varDescription : Histology (X)
>>>>>>>>>>>>> I am a target variable: varId : 72, varName : HER2(X), varDescription : HER2(X)
>>>>>>>>>>>>> I am a target variable: varId : 71, varName : ER (X), varDescription : ER (X)
>>>>>>>>>>>>> I am a target variable: varId : 74, varName : FISH, varDescription : FISH description 
```

但是，当我尝试为 targetVariables 列表的每个对象获取 VarId 时，如下所示：

```
System.out.println(">>>>>>>>>>>>> I am a target variable: " + targetVariables.get(i).getVarId()); 
```

我收到以下错误：

```
>>>>>>>>>>>>> I am a target variable: varId : 72, varName : HER2(X), varDescription : HER2(X)
java.lang.ClassCastException: java.lang.String cannot be cast to com.forth.dbutils.CRVariable
    at com.forth.actions.ReportConfiguratorBean.setAssocImTypVariables(ReportConfiguratorBean.java:414) 
```

第 414 行是我试图获取当前对象列表的 VarId 属性的行：**targetVariables.get(i).getVarId()**：

```
 System.out.println(">>>>>>>>>>>>> I am a target variable: " + targetVariables.get(i).getVarId()); 
```

关于我的 Hibernate 对象实现中有什么问题的任何想法？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:50:04.477

我的选择列表组件：

```
<p:pickList id="pickList" 
  value="#   {reportConfiguratorBean.dualListVars}"
  var="cRVariable" 
  itemValue="#{cRVariable}" 
  itemLabel="#{cRVariable.varName}"
  converter="cRVariableConverter"
  Ajax="false" >
  <f:facet name="sourceCaption">Available Variables</f:facet>
  <f:facet name="targetCaption">Associated Variables</f:facet>              
</p:pickList> 
```

和 cRVariableConverter 以获取 CRVariable 目标列表项作为对象：

```
public Object getAsObject(FacesContext context, UIComponent component, String value) {
    Long varId = Long.parseLong(value.trim());  
    List<CRVariable> cRVariables = mybean.getCRVariables();

    for (CRVariable cRVariable:cRVariables) {
        if(cRVariable.getVarId().compareTo(varId)==0){
            return cRVariable;
        }
    }

    return null;    
} 
```

# c# - WPF字典绑定失败很慢

> ID：13610137
> 
> 赞同：2
> 
> 时间：2012-11-28T16:45:40.687
> 
> 标签：c#, .net, wpf, xaml

我绑定了我的应用程序中的大多数`Label`对象，以便可以从 Web 服务中替换它们。

我将替换内容存储在字典中。替换因应用程序加载的客户端而异。

我遇到的问题是大多数时候我不替换标签，绑定失败抛出一个非常慢的异常。

这是一个示例：（ *请注意，此代码正常运行，如果找不到匹配项，则速度很慢。）*

```
<Label Content="_Gender"
       Helpers:CaptionHelper.PropertyName="Content"
       Helpers:CaptionHelper.PropertyValue="{Binding Labels[Gender], 
                                                     FallbackValue=_Gender}"
       Target="{Binding ElementName=cbGender}" /> 
```

当绑定尝试查找 Lables[Gender] 时，我在输出窗口中得到了这个：

```
System.Windows.Data Warning: 17 : Cannot get 'Item[]' value (type 'String') from 'Labels' (type 'Dictionary`2'). BindingExpression:Path=Labels[Gender]; DataItem='MyViewMV'
      (HashCode=63776763); target element is 'Label' (Name=''); target property is 'PropertyValue'(type 'String') TargetInvocationException:'System.Reflection.TargetInvocationException: 
           Exception has been thrown by the target of an invocation. ---> System.Collections.Generic.KeyNotFoundException: 
           The given key was not present in the dictionary.
   at System.Collections.Generic.Dictionary`2.get_Item(TKey key)
   --- End of inner exception stack trace ---
   at System.RuntimeMethodHandle._InvokeMethodFast(Params Truncated)
   at System.Reflection.RuntimeMethodInfo.Invoke(Params Truncated)
   at System.Reflection.RuntimeMethodInfo.Invoke(Params Truncated)
   at MS.Internal.Data.PropertyPathWorker.GetValue(Params Truncated)
   at MS.Internal.Data.PropertyPathWorker.RawValue(Params Truncated)' 
```

因为我有很多这样的东西，所以要花整整一秒钟的时间来浏览它们。

当字典查找失败时，有没有办法使绑定不抛出异常？或者以某种方式更快地失败？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T17:29:43.517

如果您可以选择，我会将您的`IDictionary`实现更改为返回`null`并改为使用（如果您仍然使用`TargetNullValue`，甚至是`IDictionary<TKey, object>`并返回）：`DependencyProperty.UnsetValue``FallbackValue`

```
public class PassthruDictionary<TKey, TValue> : IDictionary<TKey, TValue>
{
    private Dictionary<TKey, TValue> instance;

    // ... other stuff

    public TValue this[TKey key]
    {
        get
        {
            TValue value;
            if (instance.TryGetValue(key, out value))
            {
                return value;
            }
            else
            {
                return default(TValue);
            }
        }
        // ... more
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:53:12.017

是的，如果您不在调试器中运行代码，则可以显着提高速度。实际上，Visual Studio 中 stackteace 的打印是*迄今为止*最慢的部分。如果您在没有附加调试器的情况下运行应用程序，我很确定性能损失将不再明显。

我有一个类似的问题，我们在库中捕获异常，即使你这样做，VS 也会打印一条关于在代码中捕获的第一次机会异常的注释，每次异常被捕获（和处理）时。异常在启动时被触发了大约 50 次，应用程序需要 10 秒才能启动，而这一切都只是因为控制台日志记录。一旦我在没有调试器的情况下运行应用程序，它几乎立即启动。

所以也许试图解决这个异常只是过早的优化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T17:20:41.050

编辑：

实际上，所有这一切都是在 VS 输出窗格中禁用输出。它实际上并没有加快速度。

原来的：

我有一个类似的问题，但我想捕捉并记录错误。但是，您可以使用以下解决方案简单地禁用将错误输出到 VS2010 输出窗口。解决方案分为两部分，第一部分是一个简单的类：

```
using System.Diagnostics;

namespace DevBindingErrors
{
    /// <summary>
    /// Intercepts all binding error messages. Stops output appearing in VS2010 debug window.
    /// </summary>
    class BindingTraceListener: TraceListener
    {
        private string _messageType;

        public override void Write(string message)
        {
            // Always happens in 2 stages: first stage writes "System.Windows.Data Error: 40 :" or similar.
            _messageType = message;
        }

        public override void WriteLine(string message)
        {
            Debug.WriteLine(string.Format("{0}{1}", _messageType, message));
        }
    }
} 
```

第二部分在 App.xaml.cs 中：

```
using System.Diagnostics;
using System.Windows;

namespace DevBindingErrors
{
    /// <summary>
    /// Interaction logic for App.xaml
    /// </summary>
    public partial class App : Application
    {
        public App()
        {
            PresentationTraceSources.Refresh();
            PresentationTraceSources.DataBindingSource.Listeners.Add(new BindingTraceListener());
            PresentationTraceSources.DataBindingSource.Switch.Level = SourceLevels.Warning;
        }
    }
} 
```

如果您想忽略所有绑定错误，只需注释掉该`Debug.WriteLine(...)`行。（虽然我不会真的推荐这个）这也将加快执行速度，而不会失去调试应用程序的能力。

这个解决方案的想法来自[这个页面](http://blogs.msdn.com/b/mikehillberg/archive/2006/09/14/wpftracesources.aspx)，它也有更多关于 WPF 中跟踪源的详细信息。

# git - Git 变基或合并

> ID：13610138
> 
> 赞同：3
> 
> 时间：2012-11-28T16:45:41.457
> 
> 标签：git, merge, rebase, git-merge, git-rebase

我知道，当您想将修复添加到基础分支并将其放入所有其他分支时，re-base 非常适合。但它似乎比合并复杂得多（更多冲突）。我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T17:00:10.397

一般来说，`git rebase`当您在处理未发布的内容时使用它是一个很好的做法 - 您没有推送的本地内容（或者您已经推送到其他人没有拉取的地方）。rebase 会重写历史，所以如果你 rebase，人们 pull 会有问题，而 merge 不会重写历史，因此不会给其他人造成问题。

虽然 merge 将尝试使用合并策略来合并您的更改，但 rebase 只会获取您要重新设置基准的内容的 HEAD，然后尝试应用您的更改。由于它丢失了您进行更改的时间，因此它无法像合并那样有效地解决冲突。

通常 rebase 并不复杂，除非您在一个相对较小的代码库中，其中许多开发人员同时工作并相互踩踏，或者您将代码放置很长时间。

我认为这是阅读 rebase 的好资源：[http ://www.jarrodspilers.com/git/2009/08/19/git-merge-vs-git-rebase-avoiding-rebase-hell.html](http://www.jarrodspillers.com/git/2009/08/19/git-merge-vs-git-rebase-avoiding-rebase-hell.html)

Jarrod 很好地定义了“变基规则”：不要变基与其他开发人员共享的分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-07T07:31:36.073

在人们认识之前，Rebase 会吓到他们。这实际上是 rebase 和 merge 之间的一个很好的总结：请注意，最终提交所指向的快照，无论是 rebase 的最后***一个 rebase提交还是 merge******之后***的最终合并提交，***都是相同的快照***——***只是历史不同。***Rebase 会按照引入的顺序将更改从一条工作线重播到另一条线，而合并则采用端点并将它们合并在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-10T09:35:30.717

从正确性的角度来看，唯一有效的答案是使用`merge`：如果您将提交重新设置为其他提交，则您正在创建一个在开发过程中从未存在过的状态的新提交。一种可能未经测试的状态，甚至可能无法编译，或者以其他方式荒谬。

一个例子：你分支并开发了一些调用函数的代码`foo()`。第二天，另一位开发人员告诉您，这`foo()`有一些问题，因此他目前正在删除它。因此，您使用另一个提交删除您的调用`foo()`，并继续完成您的功能。如果您现在将您的工作重新定位到已`foo()`被同行删除的 master 上，那么您的早期提交都不会编译，即使`rebase`操作可能不会遇到任何冲突。

这个例子只是说明了一个事实，即任何重新定位的历史都是在撒谎：它并没有真实地告诉你发展的历史，而是用发展是一个线性过程的错觉来欺骗你。这些谎言是有后果的。`git`是为合并而设计的，最好以这种方式使用它。

# ruby-on-rails - 在 Rails 中使用 Nokogiri 加速 XML 到 MySQL

> ID：13610141
> 
> 赞同：3
> 
> 时间：2012-11-28T16:45:42.980
> 
> 标签：ruby-on-rails, ruby, xml-parsing, nokogiri

我正在使用 Nokogiri 将大量数据从 XML 提要写入我的 Rails 3 应用程序中的 MySQL 数据库。一切正常，但比我想要的要慢。

有什么方法可以加快这个过程吗？这是我正在使用的脚本的简化版本：

```
url = "http://example.com/urltoxml"
doc = Nokogiri::XML(open(url))
doc.xpath("//item").each do |record|

  guid = record.xpath("id").inner_text
  price = record.xpath("price").inner_text
  shipping = record.xpath("shipping").inner_text

  data = Table.new(
    :guid => guid,
    :price => price,
    :shipping => shipping
  )
  if price != ""
    data.save
  end

end 
```

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:07:47.537

我猜你的问题不是解析XML，而是你在数据库中一一插入记录，这非常昂贵。

不幸的是，AFAIK Rails 没有提供大量插入记录的本地方式。曾经有一颗宝石可以做到这一点，但我无法收回手。

不过， “[在 Rails 中大量插入数据而不影响性能](http://www.coffeepowered.net/2009/01/23/mass-inserting-data-in-rails-without-killing-your-performance/)”提供了有关如何手动执行此操作的有用见解。

如果您采用这种方式，如果您不想以单个 999-bazillion-rows INSERT 语句结束，请不要忘记批量处理您的节点。

# asp-classic - 我如何在一个表单中使用两个图像（作为按钮）（asp经典）

> ID：13610143
> 
> 赞同：0
> 
> 时间：2012-11-28T16:45:46.237
> 
> 标签：asp-classic

我在重复区域中有一个表格，我想在上面放两个按钮。

我目前有一个按钮（图像），用于提交表单并生成记录的预览。我想将第二个按钮添加到执行不同功能的同一表单中。我为每个图像按钮分配了不同的名称和值，但是如何检索该值并执行相应的 response.redirect 或执行附加功能？

我知道在 PHP 中你可以使用`$_GET["getvar"];`or`$_post["getvar"];`但我使用的是经典的 asp。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T06:14:02.323

给你的例子

```
<input type="hidden" name="PageAction" value="" />
<input type="image" name="button1" src="imgage1.jpg" onclick="this.form.PageAction.value='function1';this.form.submit();" />
<input type="image" name="button2" src="imgage2.jpg" onclick="this.form.PageAction.value='function2';this.form.submit();" /> 
```

然后您可以检索 request("PageAction") 的值以分离不同的操作，例如：

```
 if request("PageAction")="function1" then
        call function1()
    elseif request("PageAction")="function2" then
        call function2()
    end if 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T03:42:36.333

Request.QueryString("getvar") 相当于 $_get，Request.Form("getvar") 相当于 $_post。

其中*getvar*是按钮的名称，它将返回值。

# sql-server - 如何将数据从 1 个现有数据库复制到两个远程服务器上的另一个现有数据库？

> ID：13610144
> 
> 赞同：0
> 
> 时间：2012-11-28T16:45:46.610
> 
> 标签：sql-server, sql-server-2008, copy, sql-server-2012, remote-server

我有带有 DB_A 的**Server_A****和**带有DB_B 的**Server_B** **，**这两个都是我没有 root 访问权限的远程服务器。

**Server_A**为 SQL 2012，**DB_A**设置为兼容级别 2008

**当然， Server_B**是 SQL 2008，而**DB_B**设置为 Compatibility level 2008。

我需要复制数据，包括从**DB_A**到**DB_B**的关系和键。如何才能做到这一点？

使用导入或导出向导，我只能移动数据并且所有关系都是列表。请帮助一个人并教他一些东西！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:31:20.407

一种方法是右键单击 SSMS 中的源数据库并选择任务 > 生成脚本。这将显示一个向导，完成后将生成一个文本文件，其中包含在新系统上复制数据库所需的所有 SQL 语句。

该向导的巧妙之处在于它为您提供了一组选项，以便您可以决定最终输出中的内容。因此，您可以选择是否只需要数据或表结构或两者兼而有之。

最终结果对于大型数据库可能不是一个好的选择，但它非常便携。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:59:40.257

其实你可以备份到一个`.bak`文件。
你想在哪里恢复它完全取决于你。

如果由于某种原因它不起作用（它应该可以正常工作），您可以随时尝试[像这样](http://technet.microsoft.com/en-us/library/ms188664.aspx)复制您的数据库。

这两个步骤将分层复制数据库。**包括关系和键**。

这是我为您的问题找到的唯一替代方法，[因为您没有系统管理员权限](http://www.markus-schneider.net/2009/08/how-to-copy-ms-sql-database-from-one.html)。

# jsp - 如何在没有 JSP 的情况下加载特定页面包括前奏和尾声

> ID：13610147
> 
> 赞同：1
> 
> 时间：2012-11-28T16:45:49.637
> 
> 标签：jsp, include

我已经设置了加载页脚和页眉的 web.xml 文件，但我想分离我的登录页面以在没有页眉页脚的情况下加载它。有谁知道我怎样才能做到这一点。

这是我的 Web.xml 文件配置。我正在使用 Netbeans

```
 <jsp-config>
    <jsp-property-group>
        <description>JSP configuration for the store front</description>
        <url-pattern>/index.jsp</url-pattern>
        <url-pattern>/WEB-INF/view/*</url-pattern>
        <url-pattern>/WEB-INF/jspf/error/*</url-pattern>
        <include-prelude>/WEB-INF/jspf/header.jspf</include-prelude>
        <include-coda>/WEB-INF/jspf/footer.jspf</include-coda>
    </jsp-property-group>
    <jsp-property-group>
        <description>JSP configuration for the admin console</description>
        <url-pattern>/admin/index.jsp</url-pattern>
        <url-pattern>/admin/login.jsp</url-pattern>
        <url-pattern>/admin/error.jsp</url-pattern>
        <include-prelude>/admin/jspf/header.jspf</include-prelude>
        <include-coda>/admin/jspf/footer.jspf</include-coda>
    </jsp-property-group>
</jsp-config> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T15:39:02.720

创建一个没有*include-prelude*和*include-coda的新组*

```
<jsp-property-group>
    <display-name>Login</display-name>
    <url-pattern>/login/*</url-pattern>
    </jsp-property-group>
</jsp-config> 
```

# ivy - 常春藤： 对比

> ID：13610151
> 
> 赞同：5
> 
> 时间：2012-11-28T16:46:04.260
> 
> 标签：ivy

我有一个主常春藤项目，其他人通过`svn:externals`属性将其包含在他们的项目中。该项目包含了 Ivy jar，连接到我们项目的默认 ivysettings.xml 文件，以及一些允许我标准化我们构建 jar 的方式的 Ant 宏等。（例如，用户使用`<jar.macro>`vs.使用相同的参数，但也会自动嵌入jar 中，并将 Jenkins 构建信息添加到 Manifest 中）。`<jar>``<jar.macro>``pom.xml`

我们还使用 Jenkins 作为我们的持续集成系统。我想做的一件事是为每个构建清理 Ivy 缓存，这样我们就不会因为缓存问题而出现任何 jar 问题。为此，我设置了我的`ivysettings.xml`文件来为每个 Jenkins 执行器定义一个单独的缓存：

```
<ivysettings>
    <property name="env.EXECUTOR_NUMBER" value="0" override="false"/>
    <caches
        defaultCacheDir="${ivy.default.ivy.user.dir}/cache-${env.EXECUTOR_NUMBER}"
        resolutionCacheDir="${ivy.dir}/../target/ivy.cache"/>
    <settings defaultResolver="default"/>
    <include file="${ivy.dir}/ivysettings-public.xml"/>
    <include url="${ivy.default.settings.dir}/ivysettings-shared.xml"/>
    <include url="${ivy.default.settings.dir}/ivysettings-local.xml"/>
    <include url="${ivy.default.settings.dir}/ivysettings-main-chain.xml"/>
    <include url="${ivy.default.settings.dir}/ivysettings-default-chain.xml"/>
</ivysettings> 
```

我最初使用该`<ivy:settings>`任务来使用 Ivy 配置我们的项目。但是，所有 Jenkins 执行程序都使用相同的 Ivy 缓存，这会导致问题。我切换`<ivy:settings>`到`<ivy:configure>`，问题就消失了。显然，`<ivy:configure>`立即设置常春藤（从而正确设置缓存），而`<ivy:settings>`直到`<ivy:resolve>`被调用时才设置常春藤。

我在 Nabble 上看到了一些关于`<ivy:configure>`被弃用（或者可能不是）的电子邮件。我在 Ivy 在线文档中没有看到任何说明`<ivy:configure>`已弃用的内容。

那么，你什么时候使用`<ivy:settings>`vs. `<ivy:configure>`. 就我而言，因为我需要为每个 Jenkins 执行程序单独缓存，所以我需要使用`<ivy:configure>`，但是有什么理由可以使用`<ivy:settings>`over`<ivy:configure>`吗？而且，被`<ivy:configure>`弃用了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T23:34:15.470

这是我发现的：

*   `<ivy:settings>`是较新的*首选*方式。
*   `<ivy:configure>`可能会或可能不会被弃用。
*   `<ivy:settings>`直到`<ivy:resolve>`被调用时才设置我的 Ivy 设置，而`<ivy:configure>`在任务执行后立即设置所有 Ivy 设置。

最后一个是我的问题。由于我正在进行并行 Jenkins 构建，并且我想以完全干净的缓存开始每个构建，因此我使用自定义缓存设置，具体取决于 Jenkins 执行程序编号。`cache-0`缓存通过标记`cache-5`。

但是，由于`<ivy:settings>`在我调用之前不会执行`<ivy:resolve>`，因此我的自定义缓存设置不会被拾取。我`<ivy:cleancache>`在调用 Ivy resolve 之前调用，这会导致构建清除公共缓存。欢闹随之而来。使用`<ivy:cofnfigure>`修复了这个问题。

# shell - msysgit：Git bash 错过了 `seq` 命令。有替代方案吗？

> ID：13610153
> 
> 赞同：1
> 
> 时间：2012-11-28T16:46:10.063
> 
> 标签：shell, msysgit, seq, gnu-coreutils

我在我的模拟 shell 脚本中经常使用[seq 。](http://www.gnu.org/software/coreutils/manual/coreutils.html#seq-invocation)Git bash 不提供它，因此我正在寻找替代方案。

`seq`Git bash 支持的命令的一部分是否有替代方案？

**当前解决方案**：根据 Ignacio 的回答，我编写了一个小助手脚本，为我的遗留脚本提供了一个简单的`seq`功能。我还注意到，当`echo {1..10}`与变量一起使用时，您需要使用`eval`来获取序列输出而不是未扩展的表达式：

```
a=0; b=5
eval echo {$a..$b}  # outputs 0 1 2 4 5
echo {$a..$b}       # outputs {0..5} 
```

这是我的新的`seq.sh`：

```
#!/bin/bash
# check for the real seq and export a new seq if not found
# import this script via `source ./seq.sh`
#
hasSeq(){
  which seq >/devnull 2>&1
}

mySeq(){
    case $# in
        1) eval echo {1..$1};;
        2) eval echo {$1..$2};;
        3) echo "seq(3) not supported" 1>&2;;
    esac
}

if ! hasSeq; then
    seq(){
        mySeq $*
    }
fi

hasSeq || export -f seq 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T16:48:47.157

假设 bash 的版本足够新，您可以使用大括号扩展。

```
$ echo {1..16}
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 
```

或者……[你知道……](http://gnuwin32.sourceforge.net/packages/coreutils.htm)

# rtc - RTC 的“操作行为”中的两个交付选项有什么区别？

> ID：13610155
> 
> 赞同：1
> 
> 时间：2012-11-28T16:46:16.863
> 
> 标签：rtc

在 RTC 的“团队配置”->“操作行为”下的“项目区域”级别，有两个交付选项：

![在此处输入图像描述](../Images/1f0782fab70f093b7711adf130a4dbd5.png)

两者有什么区别？他们都没有交付到服务器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:13:54.153

这些是用于钩子的：

*   在客户上执行，即*在*交付之前，
*   在服务器上执行，即在接收交付时执行。

例如，在客户端，我设置了钩子，要求在可以交付更改集之前将工作项关联到更改集（如您之前的问题“[我可以将更改集与工作相关联吗？交付后的项目？](https://stackoverflow.com/a/13360576/6309) ”）。
我可以在服务器上检查它，但是如果交付被拒绝，为什么还要使用网络流量呢？

更准确地说，正如在[这个线程](https://jazz.net/forum/questions/75190/source-control-delivery-approval/75199)中提到的：

> 一般来说，您希望所有前置条件都在服务器上运行，因此服务器（包括 Web 服务器）可以确保这些前置条件已被执行。
> 
> **但是有一些前提条件必须在客户端上运行，即需要查看客户端的本地状态**。
> 预定义的先决条件列表说明了这一点。
> 特别是，这些前置条件大部分是指工作空间的构建/编译状态（服务器上没有信息），例如：“ `prohibit unused imports`”和“ `prohibit workspace errors`”。
> 
> 请注意，有三个客户端前提条件不需要客户端信息（“ `require work item approval`”、“ `require work item and comments`”、“ `descriptive change sets`”）。
> **包含这些是为了向后兼容，因为它们在 RTC 的第一个版本中可用，但从那时起也作为服务器端前提条件提供**，因此您应该始终使用它们的服务器端形式。
> 我已提交[工作项 209427](https://jazz.net/jazz/web/projects/Rational%20Team%20Concert#action=com.ibm.team.workitem.viewWorkItem&id=209427)以将这些客户端前提条件标记为“已弃用”，并带有指向替换它们的服务器端前提条件的指针。

# c# - 发出语音识别c#

> ID：13610157
> 
> 赞同：1
> 
> 时间：2012-11-28T16:46:33.663
> 
> 标签：c#

我是编程的初学者，我正在尝试构建一个简单的应用程序来显示消息框，该消息框显示了我试图使用语音识别说的话。问题是当我第一次说“你好”时，例如没有显示消息框。如果我再试一次，就会播放一个正确的消息框。在我第三次说“你好”时，会显示 2 个消息框。第 4 次，3 个消息框，以此类推。任何人都可以帮助解决这个问题吗？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Speech.Recognition;

namespace Voices
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private SpeechRecognitionEngine sre;

        private void Form1_Load(object sender, EventArgs e)
        {
            sre = new SpeechRecognitionEngine();
            sre.SetInputToDefaultAudioDevice();

            Choices commands = new Choices();
            commands.Add(new string[] { "hello" });

            GrammarBuilder gb = new GrammarBuilder();
            gb.Append(commands);

            Grammar g = new Grammar(gb);
            sre.LoadGrammar(g);

            sre.RecognizeAsync(RecognizeMode.Multiple);

            sre.SpeechRecognized += (s, args) =>
            {
                foreach (RecognizedPhrase phrase in args.Result.Alternates)
                {
                    if (phrase.Confidence > 0.9f)
                        sre.SpeechRecognized += new EventHandler<SpeechRecognizedEventArgs>(sre_SpeechRecognized);
                }
            };

        }

        void sre_SpeechRecognized(object sender, SpeechRecognizedEventArgs e)
        {
            switch (e.Result.Text)
            {
                case "hello":
                    MessageBox.Show(e.Result.Text);                    
                    break;
            }
        }       
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T16:48:41.167

`Form_Load`每次您说任何话时， 您的内联事件处理程序 (in ) 都会添加新的事件处理程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T16:53:01.023

以下代码是您获得多个消息框的原因：

```
sre.SpeechRecognized += (s, args) =>
{
    foreach (RecognizedPhrase phrase in args.Result.Alternates)
    {
        if (phrase.Confidence > 0.9f)
            sre.SpeechRecognized += new EventHandler<SpeechRecognizedEventArgs>(sre_SpeechRecognized);
    }
}; 
```

每次引发*SpeechRecognized*时，它都会使用相同的事件处理程序注册到相同的事件。

它应该只注册一次事件。

我想你想要做的是：

```
if (phrase.Confidence > 0.9f)
    sre_SpeechRecognized(s, args); 
```

# javascript - jquery/javascript 禁用表格单元格中的按钮

> ID：13610159
> 
> 赞同：1
> 
> 时间：2012-11-28T16:46:37.957
> 
> 标签：javascript, jquery, struts2, struts

我有一个带有 2 个按钮的表格单元格。

```
<td align="left" >
 <input type="button" value="edit"/>
<input  type="button" value="save" disabled="disabled"/>
</td> 
```

默认情况下，保存按钮被禁用。单击编辑按钮时，必须启用保存按钮按钮。问题是我无法为按钮分配 id，因为该表是使用 struts2 s:iterator 标记动态生成的。如果我这样做，将有 2 个或更多具有相同 ID 的单元格

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T16:48:02.620

您需要绑定[**click()**](http://api.jquery.com/click/)事件`editButton`并使用[**attr()**](http://api.jquery.com/attr/)设置*disabled*`saveButton`属性。将您的代码放在[$(document).ready()](http://api.jquery.com/ready/)中是安全的，这样 DOM 元素在您使用之前就准备好了。

你可以这样做，

**[现场演示](http://jsfiddle.net/wjW4E/)**

```
$(document).ready(function(){

    $('#editButton').click(function(){
          $('#saveButton').attr('disabled', false);
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T16:48:06.830

如果你想通过**身份证去**

```
$('#editButton').on('click', function(){
   $('#saveButton').prop('disabled', false);
}); 
```

如果您在多个 td 中有这种结构，您可以编写一个通用事件，其中只会启用与编辑按钮相对应的按钮..

对于**没有 ID 的重复结构**

```
$(':button[value="edit"]').on('click', function(){
       var $td = $(this).closest('td');
    $td.find($(':button[value="save"]')).prop('disabled', false);
});​ 
```

**HTML**

```
<tr>
      <td align="left">
         <input type="button" value="edit" />
         <input type="button" value="save" disabled="disabled" />
      </td>
   </tr>
     <tr>
      <td align="left">
         <input type="button" value="edit" />
         <input type="button" value="save" disabled="disabled" />
      </td>
   </tr>
     <tr>
      <td align="left">
         <input type="button" value="edit" />
         <input type="button" value="save" disabled="disabled" />
      </td>
   </tr> 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/wjW4E/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T21:10:57.960

每个按钮都不需要`id`s 。您所需要的只是[事件委托](http://api.jquery.com/on/)`id`，整个表格的单个和`class`按钮的 es。

1.  分配`id`给表格和`class`es 给按钮，例如

    ```
    <table id="dataTable" ...>
      ...
      <td style="text-align:left;">
        <input type="button" class="edit" value="edit" />
        <input type="button" class="save" value="save" disabled="disabled" />
      </td>
      ...
    </table> 
    ```

2.  将单个事件观察者附加到表（当然在加载页面时）

    ```
    $("#dataTable tbody").on("click", ".edit", function(event) {
      $(this).next(".save").prop("disabled", false);
    }); 
    ```

    当用户单击带有`class="edit"`的表格内部的任何按钮时，它会激活`id="dataTable"`，然后在单击的按钮之后找到下一个按钮`class="save"`，并启用找到的按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T16:49:13.430

你可以使用jquery

```
$('#editButton').click(function(){$("#saveButton").attr('disabled',false)}); 
```

在 JavaScript 中

```
document.getElementById('saveButton').setAttribute('disabled',false); 
```

# android - 更改 ActionBarSherlock 选项卡内容

> ID：13610163
> 
> 赞同：0
> 
> 时间：2012-11-28T16:46:48.227
> 
> 标签：android, android-actionbar, actionbarsherlock, actionbarsherlock-map

我使用 ActionBarSherlock 库创建了一个 3 选项卡式布局，其中 2 个包含地图。我还在地图上添加了一些注释。从现在开始，我将参考包含地图的两个选项卡之一，但同样适用于另一个选项卡。

我想要做的是“刷新”地图的内容。这将在单击注释时完成，理想情况下将打开一个包含有关它的详细信息的列表片段，并将完全替换地图片段。

1.  所以，我想在地图和列表片段之间进行这种“切换”，但我不能，因为我发现标签更改内容的唯一方法是注册 ActionBar.TabListener。 [http://developer.android.com/reference/android/app/ActionBar.TabListener.html](http://developer.android.com/reference/android/app/ActionBar.TabListener.html) 此外，这不是一个解决方案，因为在这种情况下没有触发选项卡事件，就我而言。

2.  现在我正在以编程方式构建选项卡及其内容。使用 xml 文件创建它以便直接访问选项卡会更容易吗？现在，我没有指向选项卡对象的“指针”。如果是这样，有关此的任何指导方针？我指的是选项卡，而不是操作栏菜单。

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T09:11:59.807

据我了解您的问题，我认为您应该使用 SharedPreferences 在 tabclick 上将值从一个片段传递到另一个片段... [http://developer.android.com/reference/android/content/SharedPreferences。 html](http://developer.android.com/reference/android/content/SharedPreferences.html)

# haskell - ADT 与类型类——规范使用

> ID：13610164
> 
> 赞同：8
> 
> 时间：2012-11-28T16:46:50.520
> 
> 标签：haskell

我在某个数据结构的两种实现之间感到困惑，并且感谢 Haskell 社区关于什么是正确/标准的输入。

# 数据类型

以 ADT“服务器”为例，它将多个服务器定义为空数据构造函数。

```
data Server = Server1
            | Server2
            | Server3 
```

现在，对于这些服务器中的每一个，我都希望（除其他外）能够获取 IP 地址。假设我可以静态编码这些，我可以有一些函数“getURL”和模式匹配。

```
getUrl :: Server -> String
getUrl Server1 = "192.168.1.1" 
```

等等。现在任何使用服务器的函数都可以将 Server 放入类型中并调用 getURL。

```
serverStuff :: Server -> IO () 
```

这种方法似乎具有简单的非多态函数的优点，但代价是在 getURL 中有大量模式匹配。此外，如果程序员添加了一个服务器但忘记将模式添加到 getURL，他们将在没有警告的情况下收到运行时错误，除非他们使用 -Wall 进行编译。

# 类型类

针对类型类的相同问题，我可以将我的多构造函数 ADT 分解为一组特定于服务器的 ADT，并为 URL 创建一个类型类。

```
data Server1 = Server1
data Server2 = Server2
data Server3 = Server3

class Server a where
    getUrl :: a -> String

instance Server Server1 where
    getUrl Server1 = "192.168.1.1" 
```

等等。现在，我必须创建类似的东西，而不是我之前使用的简单的非多态函数

```
serverStuff :: Server a => a -> IO () 
```

并处理临时多态性（函数专业化等）的含义。

`data ServerCenter1 = Server1 | Server2 | Server3`从好的方面来说， typeclass方法易于扩展，将模式匹配分解成更小的块，允许更大的抽象，例如分组服务器（声明 getUrl，您至少在创建实例时被迫做出该决定。

所以，我很伤心，但倾向于将实例作为一种更好的做事方式。有没有一种标准的方法来处理这个问题，或者它是一种“看起来很干净”的东西？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-28T17:16:00.547

如果您确定需要您的服务器类型包含的唯一信息，我会将它们实现为围绕字符串的新类型：

```
newtype Server = Server { getURL :: String } 
```

使其成为完整记录（如 hammar 的评论）将允许您在仅更改构造函数的同时添加信息，但会牺牲 GeneralizedNewtypeDeriving。

一般来说，我会使用类型来表示事物的类，并使用变量来表示细节，因此空值构造函数仅用于表示抽象，例如`data Status = Published | Draft`（或内置的 Bool）。除非有特定原因，否则应避免将数据（例如 IP 地址）硬编码到类型系统或函数中。

* * *

如果您想要特定于服务器的行为，可以很容易地将字段添加到记录中：

```
data Server = Server {
              getURL      :: String
            , doSomething :: a -> IO () --Or any other functional signature
            } 
```

但是，我建议不要这样做，因为它会使其他代码变得晦涩难懂：

```
runSomething :: Server -> a -> IO ()
runSomething server arg = (doSomething server) arg 
```

绝对可以做任何事情，并且您需要找到该字段的最后更新以确定什么（因为函数没有`Show`实例）。如果依赖项取决于服务器的某些属性，我会倾向于对该属性进行编码，然后对其进行调度，例如

```
data ServerType = Production
                | Development

data Server = Server {
              getURL     :: String
            , serverType :: ServerType
            }

runSomething :: Server -> a -> IO ()
runSomething server arg = case serverType server of
                              Production  -> foo arg
                              Development -> bar arg 
```

我认为这种方法优于将服务器名称硬编码到函数中，因为它解释了为什么给定服务器具有给定行为（并使特定服务器的行为更本地化），并且在记录字段中具有函数，因为它使更容易判断给定的 runSomething 调用会做什么（因为可以检查和记录 ServerType）。

# view - Linq 到实体查询添加内连接而不是左连接

> ID：13610167
> 
> 赞同：1
> 
> 时间：2012-11-28T16:47:10.860
> 
> 标签：view, linq-to-entities, left-join, inner-join

我想知道为什么生成 INNER JOIN 而不是 LEFT 以及为什么在加入之前选择整个视图而不是仅添加 LEFT JOIN 视图。

我正在尝试发布一个信息表，该表分布在多个表中。基本上我想按日期搜索并返回今天、昨天、本月发生的事件的所有信息——无论用户选择什么。查询很长。我将 DefaultIfEmpty 添加到除主表之外的所有表中，以尝试获取 LEFT JOIN，但它只是弄得一团糟。

```
using (TransitEntities t = new TransitEntities())
   {
   var charters = from c in t.tblCharters
join v in t.tblChartVehicles.DefaultIfEmpty()
on c.Veh
equals v.ChartVehID
join n in t.tblNACharters.DefaultIfEmpty()
on c.Dpt.Substring(c.Dpt.Length - 1)
equals SqlFunctions.StringConvert((double)n.NAID)
join r in t.tblChartReqs.DefaultIfEmpty()
on c.ChartReqID
equals r.ChartReqID
join f in t.tblCharterCustomers.DefaultIfEmpty()
on c.Dpt
equals (f.DptID == "NONAFF" ? SqlFunctions.StringConvert((double)f.CustID) : f.DptID)
join d in t.tblChartReqDocs.DefaultIfEmpty()
on c.Attach
equals SqlFunctions.StringConvert((double)d.DocID)
join s in t.tblChartSupAttaches.DefaultIfEmpty()
on c.SupAttach
equals SqlFunctions.StringConvert((double)s.DocID)
join p in (from e in t.v_EmpData select new {e.UIN, e.First, e.Last}).DefaultIfEmpty()
on c.TakenUIN
equals p.UIN
where c.BeginTime > EntityFunctions.AddYears(DateTime.Now,-1)
select new
{
   ChartID = c.ChartID,
   Status = c.Status,
     ...
   Website = r.Website,
};
//select today's events
gvCharters.DataSource = charters.Where(row => (row.BeginTime.Value >= midnight && row.BeginTime.Value < midnight1)); 
```

这会导致非常复杂的 SQL：

```
 SELECT 
    [Extent1].[ChartID] AS [ChartID], 
    [Extent1].[Status] AS [Status], 
    ... 
    [Join5].[Website] AS [Website], 

    FROM        [dbo].[tblCharters] AS [Extent1]
    INNER JOIN  (SELECT [Extent2].[ChartVehID] AS [ChartVehID], [Extent2].[Descr] AS [Descr]
        FROM   ( SELECT 1 AS X ) AS [SingleRowTable1]
        LEFT OUTER JOIN [dbo].[tblChartVehicles] AS [Extent2] ON 1 = 1 ) AS [Join1] ON ([Extent1].[Veh] = [Join1].[ChartVehID]) OR (([Extent1].[Veh] IS NULL) AND ([Join1].[ChartVehID] IS NULL))
    INNER JOIN  (SELECT [Extent3].[NAID] AS [NAID], [Extent3].[Descr] AS [Descr]
        FROM   ( SELECT 1 AS X ) AS [SingleRowTable2]
        LEFT OUTER JOIN [dbo].[tblNACharter] AS [Extent3] ON 1 = 1 ) AS [Join3] ON ((SUBSTRING([Extent1].[Dpt], ((LEN([Extent1].[Dpt])) - 1) + 1, (LEN([Extent1].[Dpt])) - ((LEN([Extent1].[Dpt])) - 1))) = (STR( CAST( [Join3].[NAID] AS float)))) OR ((SUBSTRING([Extent1].[Dpt], ((LEN([Extent1].[Dpt])) - 1) + 1, (LEN([Extent1].[Dpt])) - ((LEN([Extent1].[Dpt])) - 1)) IS NULL) AND (STR( CAST( [Join3].[NAID] AS float)) IS NULL))
    INNER JOIN  (SELECT [Extent4].[ChartReqID] AS [ChartReqID], [Extent4].[Event] AS [Event], [Extent4].[ContactName] AS [ContactName], [Extent4].[ContactPhone] AS [ContactPhone], [Extent4].[Website] AS [Website]
        FROM   ( SELECT 1 AS X ) AS [SingleRowTable3]
        LEFT OUTER JOIN [dbo].[tblChartReq] AS [Extent4] ON 1 = 1 ) AS [Join5] ON ([Extent1].[ChartReqID] = [Join5].[ChartReqID]) OR (([Extent1].[ChartReqID] IS NULL) AND ([Join5].[ChartReqID] IS NULL))
    INNER JOIN  (SELECT [Extent5].[CustID] AS [CustID], [Extent5].[Dpt] AS [Dpt], [Extent5].[DptID] AS [DptID]
        FROM   ( SELECT 1 AS X ) AS [SingleRowTable4]
        LEFT OUTER JOIN [dbo].[tblCharterCustomers] AS [Extent5] ON 1 = 1 ) AS [Join7] ON ([Extent1].[Dpt] = (CASE WHEN (N'NONAFF' = [Join7].[DptID]) THEN STR( CAST( [Join7].[CustID] AS float)) ELSE [Join7].[DptID] END)) OR (([Extent1].[Dpt] IS NULL) AND (CASE WHEN (N'NONAFF' = [Join7].[DptID]) THEN STR( CAST( [Join7].[CustID] AS float)) ELSE [Join7].[DptID] END IS NULL))
    INNER JOIN  (SELECT [Extent6].[DocID] AS [DocID], [Extent6].[FileName] AS [FileName]
        FROM   ( SELECT 1 AS X ) AS [SingleRowTable5]
        LEFT OUTER JOIN [dbo].[tblChartReqDocs] AS [Extent6] ON 1 = 1 ) AS [Join9] ON ([Extent1].[Attach] = (STR( CAST( [Join9].[DocID] AS float)))) OR (([Extent1].[Attach] IS NULL) AND (STR( CAST( [Join9].[DocID] AS float)) IS NULL))
    INNER JOIN  (SELECT [Extent7].[DocID] AS [DocID], [Extent7].[FileName] AS [FileName]
        FROM   ( SELECT 1 AS X ) AS [SingleRowTable6]
        LEFT OUTER JOIN [dbo].[tblChartSupAttach] AS [Extent7] ON 1 = 1 ) AS [Join11] ON ([Extent1].[SupAttach] = (STR( CAST( [Join11].[DocID] AS float)))) OR (([Extent1].[SupAttach] IS NULL) AND (STR( CAST( [Join11].[DocID] AS float)) IS NULL))
    INNER JOIN  (SELECT [Extent8].[First] AS [First], [Extent8].[Last] AS [Last], [Extent8].[UIN] AS [UIN]
        FROM   ( SELECT 1 AS X ) AS [SingleRowTable7]
        LEFT OUTER JOIN (SELECT 
          [v_EmpData].[First] AS [First], 
          [v_EmpData].[Last] AS [Last], 
          [v_EmpData].[Legal] AS [Legal], 
          [v_EmpData].[Name] AS [Name], 
          [v_EmpData].[Email] AS [Email], 
          [v_EmpData].[UIN] AS [UIN], 
          [v_EmpData].[UserNM] AS [UserNM], 
          [v_EmpData].[Worker] AS [Worker], 
          [v_EmpData].[SUPERVISORNUM] AS [SUPERVISORNUM], 
          [v_EmpData].[Supervisor] AS [Supervisor], 
          [v_EmpData].[EmpArea] AS [EmpArea], 
          [v_EmpData].[Title] AS [Title], 
          [v_EmpData].[FullName] AS [FullName], 
          [v_EmpData].[HireDate] AS [HireDate], 
          [v_EmpData].[WORKERTYPENM] AS [WORKERTYPENM], 
          [v_EmpData].[Birth] AS [Birth], 
          [v_EmpData].[HOMESTREET] AS [HOMESTREET], 
          [v_EmpData].[HOMECITY] AS [HOMECITY], 
          [v_EmpData].[HOMEZIP] AS [HOMEZIP], 
          [v_EmpData].[HOMESTATE] AS [HOMESTATE], 
          [v_EmpData].[PicID] AS [PicID], 
          [v_EmpData].[WorkPhone] AS [WorkPhone], 
          [v_EmpData].[HomePhone] AS [HomePhone], 
          [v_EmpData].[WorkCellPhone] AS [WorkCellPhone]
      FROM [dbo].[v_EmpData] AS [v_EmpData]) AS [Extent8] ON 1 = 1 ) AS [Join13] ON ([Extent1].[TakenUIN] = [Join13].[UIN]) OR (([Extent1].[TakenUIN] IS NULL) AND ([Join13].[UIN] IS NULL))
WHERE ([Extent1].[BeginTime] > (DATEADD (year, -1, SysDateTime()))) 
    AND ('C' <> [Extent1].[Status]) 
    AND ([Extent1].[BeginTime] >= '11/28/2012 12:00:00 AM') 
    AND ([Extent1].[BeginTime] < '11/29/2012 12:00:00 AM') 
```

这是我原来的 SQL 查询的样子，也是我希望它更接近的样子：

```
SELECT 
    ChartID,
    c.Status, 
    ...
    r.Website As Website, 

FROM tblChartersNew c 
    LEFT JOIN (SELECT [Dpt],[DptID] FROM [DRVRDiscipline].[dbo].[tblCharterCustomers] Where Valid=1 and DptID <> 'NONAFF' UNION SELECT Dpt, CONVERT(nvarchar,CustID) AS DptID FROM [DRVRDiscipline].[dbo].[tblCharterCustomers] Where Valid=1 and DptID = 'NONAFF') f 
    ON RTRIM(c.Dpt) = f.DptID LEFT JOIN [tskronos].WfcSuite.dbo.VP_ALLPERSONV42 p ON p.PersonNUM = c.TakenUIN 
    LEFT JOIN tblChartVehicles v ON v.ChartVehID = c.Veh 
    LEFT JOIN tblNACharter n ON CAST(n.NAID AS varchar) = RIGHT(c.Dpt, LEN(c.Dpt)-1) 
    LEFT JOIN tblChartReq r 
    ON r.ChartReqID = c.ChartReqID 
WHERE CONVERT(datetime,CONVERT(char(10),c.BeginTime,101)) = (SELECT TOP 1 CONVERT(datetime,CONVERT(char(10),BeginTime,101)) from tblChartersNew WHERE CONVERT(datetime,CONVERT(char(10),BeginTime,101)) >= CONVERT(datetime,CONVERT(char(10),GETDATE(),101)) ORDER BY BeginTime) 
    AND NOT c.ChartReqID IS NULL 
ORDER BY BeginTime, ISNULL(f.Dpt,c.Dpt) 
```

我还在视图上添加了一个 Select New 以避免在我只需要三个列时选择所有列，但这似乎没有什么区别。它不是添加 LEFT JOIN v_EmpData，而是添加 LEFT OUTER JOIN，然后选择视图中的所有列。它似乎忽略了 Select New。

我真的很想在我的大多数查询中过渡到使用 Linq to Entities，因为智能感知可以更容易地确保它是正确的，并且可以更轻松地进行查询，而不必为每个查询设置单独的函数，但也许我需要坚持使用普通的旧 SQL。我知道足以制造大混乱。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:56:16.080

对于您需要的复杂查询。

我建议研究 FunctionImport。

[MSDN 函数导入](http://msdn.microsoft.com/en-us/library/vstudio/dd456824%28v=vs.100%29.aspx)

这将避免您创建一个与您预期生成的 SQL 为 1:1 的 LINQ 的麻烦。

# java - Java ADF 使用来自具有堆叠条形图的数据控制类的存储参数

> ID：13610168
> 
> 赞同：1
> 
> 时间：2012-11-28T16:47:10.373
> 
> 标签：java, jdeveloper, oracle-adf

我正在使用包含 x 轴标签和要在图中显示/堆叠的值的对象列表来处理双轴堆叠条形图（ADF 组件）。

我对 ADF 和 EJB 比较陌生，所以如果这个问题对你们中的任何人来说都是初级的，我想提前道歉。

我应该提到我正在使用 JDeveloper 11.1.1.5

我很难从要分配给我试图在我的 JSF 页面上显示的条形图的属性的变量中检索值。

我简单总结了下面的逻辑，以供参考。

从以下类数据控件中检索数据/列表：

```
public class ActivityChart {

 private Double axisScale;

 public ActivityChart() {
     super();
     axisScale = 0.0;
 }

 public List<ActivityDTO> getActivityDetail(List<String> businessUnits) {
     List<ActivityDTO> returnNewList = new ArrayList<ActivityDTO>();
     List<TransactionDTO> dataList = new ArrayList<TransactionDTO>();
     TransactionSessionBean transBean = lookupTransactionSessionBean();

     if (businessUnits != null && !businessUnits.isEmpty()){
         dataList = transBean.getActivityData(SystemUtil.getCurrentUser(), businessUnits);            
         returnNewList = processTransactions(dataList);
         axisScale = calcAxisScale(returnNewList);
     }

     return returnNewList;
 }
 ... 
```

TransactionDTO 对象基本上是实体对象的镜像，用于存储来自查询的数据库事务的字段。ActivityDTO 对象包含一个字符串值（x 轴标签）和 3 个用于条形图所需值的 Double 值。

我要做的是动态设置 2 个 y 轴的比例（我使用的是双轴堆叠条形图），因为自动计算的值没有对齐。

现在我已经用特定的轴值硬编码了条形图的两个相关元素：

```
<dvt:y1Axis axisMaxAutoScaled="false" axisMaxValue="100.0"/>
<dvt:y2Axis axisMaxAutoScaled="false" axisMaxValue="100.0"/> 
```

我想用于 Y 轴的值被计算并存储在上述类的“axisScale”变量中。

真是不知如何从这里往前走。

非常感谢提供的任何指导/方向。

谢谢，卡里姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:02:21.680

为axisScale添加一个getter并重新生成您的数据控件。将axisScale的绑定添加到您的页面，然后将其用作最大值。

页面定义：

```
<attributeValues IterBinding="ActivityChartIterator" id="axisScale">
  <AttrNames>
    <Item Value="axisScale"/>
  </AttrNames>
</attributeValues> 
```

这页纸：

```
<dvt:y1Axis axisMaxValue="#{bindings.axisScale.attributeValue}" axisMaxAutoScaled="false"/>
<dvt:y2Axis axisMaxValue="#{bindings.axisScale.attributeValue}" axisMaxAutoScaled="false"/> 
```

# jsf - JSF：使用后退和前进按钮显示导航历史

> ID：13610169
> 
> 赞同：0
> 
> 时间：2012-11-28T16:47:12.760
> 
> 标签：jsf, jsf-2, back, browser-history, forward

我想知道如何在页面顶部向我的用户显示他的导航历史。像这样：

```
home > register > product 
```

以及如何在 JSF 中实现后退和前进按钮。我阅读[了一些主题](https://stackoverflow.com/questions/2206953/best-practices-for-back-navigation-links-in-jsf)，但没有一个真正解释如何实现这些功能。我不想为此使用一些框架，我认为这是一件简单的事情，没有必要使用框架。

我认为完全做某事不是一个好主意`<h:link />`，我会给你们举个例子：

用户进入系统：

```
home > register 
```

用户自己注册

`home > login > register`（有一个他/她可以注册另一个用户的链接）

正确的历史是：

```
home > login > register 
```

并不是

```
home > register 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:37:45.700

您不理解链接中第二个答案的哪一部分？使用 LinkedList（由`Stack`实现的`LinkedList`或由`Deque` 实现的`ArrayDeque`将完成工作）并控制自己的推送和弹出操作一定不难，还在页面中创建一个部分以具有这些链接，即由实现`<ui:repeat>`。

[无论如何，PrimeFaces 已经用面包屑](http://www.primefaces.org/showcase/ui/breadCrumb.jsf)组件解决了部分工作，即使你不想使用第三方库来完成这项工作，你也可以看看[源代码](http://repository.primefaces.org/org/primefaces/primefaces/3.4.2/primefaces-3.4.2-sources.jar)，看看 PrimeFaces 人是如何完成这项工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:59:32.253

如果您将每个页面都作为自己的 .xhtml 页面，那么您可以硬编码面包屑。如果您希望后退按钮正常工作，那么您需要在所有链接/按钮中添加`?faces-redirect=true`到您的链接。

例子

```
<h:commandLink value="Test" action="blah.xhtml?faces-redirect=true" /> 
```

# orm - Coldfusion 9 ORM 映射问题

> ID：13610171
> 
> 赞同：5
> 
> 时间：2012-11-28T16:47:15.887
> 
> 标签：orm, coldfusion, coldfusion-9, application.cfc

我对 CF9 ORM 映射有疑问。

我不时收到以下错误（是的，它大部分时间都可以正常工作），

```
Mapping for component model.Pubs not found. Either the mapping for this component is missing or the application must be restarted to generate the mapping. 
```

Application.cfc 中的 ORM 定义

```
 <cfscript>
    this.datasource = "Pubs";
    this.ormenabled = true;
    this.ormsettings= {
                        dialect="MicrosoftSQLServer",
                        dbcreate="update",                              
                        eventhandling="true"
                    };      
</cfscript>

<cfset this.mappings["/model"] = getDirectoryFromPath(getCurrentTemplatePath()) & "model" /> 
```

修复它的唯一方法是刷新 ORM 几次，即在 Application.cfc 上点击 ?init=true。它仍然是一个临时解决方案，但我需要知道它的根本原因并修复它。

```
<cfscript>          
if(structKeyExists(url, "init")) { ormReload(); applicationStop(); location('index.cfm?reloaded=true'); } 
```

请指教。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:52:24.163

好的，感谢@Henry 和@Walter 的评论。他们引领着正确的解决方案。

这是我所做的以确保它始终保持稳定。

1.  我为所有 ORM CFC 使用了一个文件夹（位置）。每个部分曾经有一个“模型”文件夹。部分是一个根目录下的同级文件夹并共享相同的 Application.cfc。我将其更改为所有 CFC 的一个根级文件夹，即：/root/ormmodel
2.  在/root/Application.cfc上，我调整了以下代码

    ```
    <cfset application.mappings["/ormmodel"] = expandPath("/root/ormmodel") /> 
    ```

    和

    ```
    this.ormsettings= {
        cfclocation = ["ormmodel"],
        autogenmap = true,
        ...
        eventhandling="true"                            
    }; 
    ```

    请注意 cflocation 值中缺少的“/”。

3.  在调用模型组件时，我将代码从 pub = new ormmodel.Pubs() 更改为

    ```
    pub = EntityNew("Pubs"); 
    ```

4.  在不相关的一点上，我将组件名称更改为驼峰命名法，并避免使用下划线和破折号等特殊字符。

我希望这会有所帮助，并为其他人节省数小时的挫败感和悬念。

快乐编码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:55:24.060

我也有你的问题，但现在它工作正常。首先，如果你不设置`ormsettings.cfclocation`，ColdFusion 会这样做：

> 如果未设置，ColdFusion 将查看应用程序目录、其子目录及其映射目录以搜索持久 CFC。（见[规格](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSED380324-6CBE-47cb-9E5E-26B66ACA9E81.html)）

这很容易出错，因为您永远不知道 ColdFusion 在所有目录中找到了什么。

当您将 cfclocation 添加到您的示例时，它应该可以工作：

```
this.ormsettings= {
    cfclocation = ["/model", "/other/entities", "/more/other/entites"]
} 
```

那里有很多讨论，关于如何指定 cfclocation 的路径。对我来说，这种方式有效。

但是我的 cfclocation 的第一个元素始终是应用程序映射，例如您的`this.mappings["/model"]`. 我没有在 webroot 中使用 webserver 别名或 CFC 测试它，没有映射。您还应该避免冲突命名空间，例如 webroot 中的“model”目录，同时具有“/model”映射。

祝你好运：）

# hibernate - Hibernate：在嵌套子项的嵌套子项上创建过滤器

> ID：13610172
> 
> 赞同：2
> 
> 时间：2012-11-28T16:47:23.897
> 
> 标签：hibernate, filter

嘿，

我遇到了一个有点复杂的查询类型的问题。直截了当，这是我想要得到的 SQL 查询：

```
select * from Parent parent
left join fetch parent.child child
left joint fetch child.grandchild grandchild with age < 18; 
```

由于 fetch，with 子句被禁止。

所以我必须使用过滤器。但是我没有找到在 Grandchild 上应用过滤器的方法，我认为这是因为 @Filter 或 @FilterDef 不在正确的类中。

我立即在 Grandchild 类中声明了 Filter (@FilterDef)，并将 @Filter(name="age", condition = "age < :age_param) 放在 Child 类中 Collection 属性的声明之前。类是这样的：

```
public class Parent {
    @OneToOne(fetch = FetchType.LAZY,mappedBy="parent")
    private Collection<Child> children;
}

public class Child {
       private Parent parent;

        @Filter(name="age", condition = "age < :age_param")
        @OneToMany(fetch = FetchType.LAZY,mappedBy="child")
        private Collection<GrandChild> grandchildren;
    }

@FilterDef(name="majority",
           parameters={@ParamDef(name="age",type="int")}
             )
public class GrandChild {
       private Child child;
       private int age;
    } 
```

然后我做：

```
filter = session.enableFiler("majority");
filter.setParameter("age_param",18);

session.createQuery("select * from Parent parent
    left join fetch parent.child child
    left joint fetch child.grandchild")
.list(); 
```

但是与孙子的加入没有条件。

有没有办法获得这个查询？难道我做错了什么 ？

感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T09:02:53.370

您在过滤器注释中有一个错误。过滤器名称是*mayority*，而不是*age*。并且条件必须作为默认条件进入 FilterDef 注释：

```
public class Parent {
    @OneToOne(fetch = FetchType.LAZY,mappedBy="parent")
    private Collection<Child> children;
}

public class Child {
   private Parent parent;

    @Filter(name="mayority")
    @OneToMany(fetch = FetchType.LAZY,mappedBy="child")
    private Collection<GrandChild> grandchildren;
}

@FilterDef(name="mayority",
defaultCondition = "age < :age_param"
parameters={@ParamDef(name="age",type="java.lang.Integer")})
public class GrandChild {
   private Child child;
   private Integer age;
} 
```

# java-me - Midlet 在 S40 中使用威瑞信安全异常签名

> ID：13610177
> 
> 赞同：2
> 
> 时间：2012-11-28T16:47:42.150
> 
> 标签：java-me, midlet, securityexception, nokia-s40, verisign

我用威瑞信证书签署了一个 midlet。在其他设备上运行良好，但在诺基亚 2710 S40 中，每次应用程序执行 httpconnection 时，我都会收到 SecurityException: Permission Denied。

我已经尝试了选项>应用程序访问>通信>网络访问中的所有权限，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:42:43.327

问题解决了。我必须在 jad 文件中添加 API 权限。

# java - BasicThreadPool 在 J-boss 7.1 中不可用

> ID：13610182
> 
> 赞同：0
> 
> 时间：2012-11-28T16:47:47.487
> 
> 标签：java, threadpool, jboss7.x

显然它不应该是根据[How to get a MBean binding class instance](https://stackoverflow.com/questions/9177710/how-to-get-a-mbean-binding-class-instance)。然而可以用它编译，所以我怀疑它可能只是 J-boss 7 的类加载问题。

任何人都知道如何将 BTP 与 J-boss 7 或更好的线程池实现一起使用：Java.util.concurrent、Servlets（用于非 HTTP），还有别的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:55:06.293

是否有理由不使用`ExecutorService`an 选项？

请参阅[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)和[Executors](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html)。我会建议类似的东西`Executors.newCachedThreadPool()`or `Executors.newFixedThreadPool(int)`。

# java - JAX-WS 连接不会关闭，并在 x 条消息后停止消息传递

> ID：13610185
> 
> 赞同：2
> 
> 时间：2012-11-28T16:47:50.137
> 
> 标签：java, spring, jms, activemq, messaging

我对 JAX-WS 有一点问题。我使用 ActiveMQ 作为 MOM 和 Spring。消息传递非常简单：一个 jar 应该向另一个 jar 发送带有一些数据的 soap 消息。

我在 sender_beans.xml 中以这种方式定义了客户端：

```
<bean id="jmsConfig-Manager" class="org.apache.cxf.transport.jms.JMSConfiguration"
    p:connectionFactory-ref="jmsConnectionFactory"
    p:targetDestination="activemq:example.manager"
    p:pubSubDomain="true" p:maxConcurrentConsumers="40" p:deliveryMode="1"
    p:explicitQosEnabled="true" p:reconnectOnException="true" />

<bean id="jmsConnectionFactory"
    class="org.springframework.jms.connection.CachingConnectionFactory">
    <property name="sessionCacheSize" value="40" />

    <property name="targetConnectionFactory">
        <bean class="org.apache.activemq.ActiveMQConnectionFactory">
            <property name="brokerURL"

                value="tcp://localhost:61616?jms.useAsyncSend=true" />
        </bean>
    </property>
</bean> 
```

这是我的终点：

```
<jaxws:endpoint id="ManagerService" implementor="#ManagerServ"
    implementorClass="com.example.Service"
    address="jms://">
    <jaxws:features>
        <bean class="org.apache.cxf.transport.jms.JMSConfigFeature"
            p:jmsConfig-ref="jmsConfig-Manager" />
    </jaxws:features>
</jaxws:endpoint>
<bean id="jmsConnectionFactory"
    class="org.springframework.jms.connection.CachingConnectionFactory">
    <property name="sessionCacheSize" value="40" />

    <property name="targetConnectionFactory">
        <bean class="org.apache.activemq.ActiveMQConnectionFactory">
            <property name="brokerURL"

                value="tcp://localhost:61616?jms.useAsyncSend=true" />
        </bean>
    </property>
</bean> 
```

所以，消息传递有效 - 但只有 40 次！（这是永远 p:maxConcurrentConsumers 的值）。我认为问题在于每次发送消息时，都会创建一个新的消费者但从未销毁。因此，在 40 条消息之后，无法创建新的消费者并且消息停止工作。我必须重新启动完整的消息传递。

我只能使用声明式的方式来解决这个问题，我从来没有在我的代码中从 jms 调用任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:55:42.713

CachingConnectionFactory 默认会缓存消息消费者和生产者。您可以通过将 cacheConsumers 和 cacheProducers 属性设置为“false”来禁用此功能。

即你的Spring xml：

```
<bean id="jmsConnectionFactory"
class="org.springframework.jms.connection.CachingConnectionFactory">
   <property name="sessionCacheSize" value="40" />
   <property name="cacheConsumers" value="false" />
   <property name="targetConnectionFactory">
... 
```

我最近遇到了一个问题，在消费者对象上调用 .close() 时，以编程方式创建的消息消费者没有被破坏（我仍然可以在 ActiveMQ 管理控制台上看到活动消费者）。cacheConsumers = false 为我解决了这个问题。

此外，请阅读有关缓存和单连接工厂的 Spring API，以确保您为您的场景使用正确的 API - 他们提到了所有这些。

# asp.net-mvc - MVC 视图模型和导航属性

> ID：13610202
> 
> 赞同：1
> 
> 时间：2012-11-28T16:48:38.293
> 
> 标签：asp.net-mvc, entity-framework, navigation-properties

我有一个模型：

```
public partial class VisitorLog
{
    public int Id { get; set; }
    public string VisitorName { get; set; }
    public DateTime TimeIn { get; set; }
    public DateTime TimeOut { get; set; }
    public string CompanyName { get; set; }
    public string EmployeeID { get; set; }
    public string VisitReason { get; set; }

    // Navigation properties
    [ForeignKey("EmployeeID")]
    public virtual Employee Employee { get; set; }
} 
```

通用存储库：

```
public class GenericRepository<C, T> : IGenericRepository<T> where T : class where C : DbContext, new()
{
    private C _entities = new C();
    public C Context
    {
        get { return _entities; }
        set { _entities = value; }
    }

    public virtual IQueryable<T> GetAll()
    {
        IQueryable<T> query = _entities.Set<T>();
        return query;
    }

    public IQueryable<T> FindBy(System.Linq.Expressions.Expression<Func<T, bool>> predicate)
    {
        IQueryable<T> query = _entities.Set<T>().Where(predicate);
        return query;
    }

    public virtual void Add(T entity)
    {
        _entities.Set<T>().Add(entity);
    }

    public virtual void Delete(T entity)
    {
        _entities.Entry(entity).State = System.Data.EntityState.Deleted;
    }

    public virtual void Edit(T entity)
    {
        _entities.Entry(entity).State = System.Data.EntityState.Modified;
    }

    public virtual void Save()
    {
        _entities.SaveChanges();
    }
} 
```

通用存储库的接口：

```
public interface IGenericRepository<T> where T : class
{
    IQueryable<T> GetAll();
    IQueryable<T> FindBy(Expression<Func<T, bool>> predicate);
    void Add(T entity);
    void Delete(T entity);
    void Edit(T entity);
    void Save();
} 
```

我的特定于模型的存储库（继承了泛型）：

```
public class VisitorLogRepository : GenericRepository<VisitorLogDBContext, VisitorLog>, IVisitorLogRepository {

    public VisitorLog GetSingle(int id)
    {
        var query = GetAll().FirstOrDefault(x => x.Id == id);
        return query;
    }
}

public class SearchViewModel
{
    public IEnumerable<VisitorLog> VisitorLogs { get; set; }
} 
```

我的控制器将视图模型加载到视图中：

```
 var searchViewModel = new SearchViewModel
{
    VisitorLogs = iVisitorlogRepository.FindBy(v => v.VisitorName.Contains(searchText)
        || v.CompanyName.Contains(searchText)
        || v.EmployeeID.Contains(searchText)),
}; 
```

最后是我的观点：

```
@model VisitorLogApp.ViewModels.SearchViewModel

@foreach (var item in ViewData.Model.VisitorLogs) {
    <tr>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.Id }) |
            @Html.ActionLink("Details", "Details", new { id=item.Id }) |
            @Html.ActionLink("Delete", "Delete", new { id=item.Id })
        </td>
        <td>
            @item.VisitorName
        </td>
        <td>
            @item.CompanyName
        </td>
        <td>
            @item.Employees.EmployeeName
        </td>
        <td>
            @String.Format("{0:g}", item.TimeIn)
        </td>
        <td>
            @String.Format("{0:g}", item.TimeOut)
        </td>
        <td>
            @item.VisitReason
        </td>
    </tr> 
```

除了一个例外，一切都很好。该视图显示访问者列表 (VisitorLog)。**使用导航属性，我可以通过简单地使用@item.Employees.EmployeeName**来获取 EmployeeName 值而不是来自 VisitorLog 类的员工 ID 。但是，我还希望能够在控制器中的存储库调用中按员工姓名进行搜索：

```
VisitorLogs = iVisitorlogRepository.FindBy(v => v.VisitorName.Contains(searchText)
|| v.CompanyName.Contains(searchText)
|| v.Employees.EmployeeName.Contains(searchText)), 
```

但是上面示例中的**Employees.EmployeeName**没有显示为“v”列表成员中的选项。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:03:12.947

看起来这可能只是一个错字 - 您的类中的导航属性被调用`Employee`，而不是`Employees`。下面的工作吗？

```
VisitorLogs = iVisitorlogRepository.FindBy(
    v => v.VisitorName.Contains(searchText)
    || v.CompanyName.Contains(searchText)
    || v.Employee.EmployeeName.Contains(searchText)), 
```

如果这是原因，那么您在视图中做了同样的事情。

# actionscript-3 - 如何将一个大图像剪切成多个动画片段（FLASH）

> ID：13610203
> 
> 赞同：1
> 
> 时间：2012-11-28T16:48:37.563
> 
> 标签：actionscript-3, flash, actionscript

```
package  {
    import flash.display.Sprite;
    import flash.events.MouseEvent;
    import flash.text.TextField;
    import flash.net.URLVariables;
    import flash.net.URLRequest;
    import flash.events.Event;

    public class Init extends Sprite {

        var rects:Array,
        numRects:int = stage.stageWidth / _width + 1,
        _width:Number = 20,
        _height:Number = 80,
        _rotation:int = 0;

        public function Init() {

            init();
        }

        function init():void
        {
            rects = new Array();
            for(var i:int = 0; i < numRects; i++)
            {
                var rect:Rect = new Rect();
                rect.x = i * 20;
                addChild(rect);
                rects.push(rect);
            }

            addEventListener(Event.ENTER_FRAME, onEnterFrame);
        }

        function onEnterFrame(e:Event):void
        {

            for(var i:int = 0; i < numRects; i++)
            {
                rects[i].rotationY += 1;
            }

            _rotation += 1;
            if(_rotation % 180 == 0)
            {
                removeEventListener(Event.ENTER_FRAME, onEnterFrame);
            }

        }

    }

} 
```

这是 Rect 类：

```
package  {
    import flash.display.Sprite;

    public class Rect extends Sprite {

        private var color:uint,
        _width:Number,
        _height:Number;
        public function Rect(color:uint = 0x000000, width:Number = 20, height:Number = 80) {

            this.color = color;
            this._width = width;
            this._height = height;
            init();
        }

        function init():void
        {
            graphics.beginFill(color);

            graphics.drawRect(0, 0, _width, _height);

            graphics.endFill();

        }

    }

} 
```

所以我创建了许多矩形并将它们每个循环移动 20 像素，所以现在它们已经填充了颜色，但是如果我有一个高度等于这些矩形的大图像，然后剪切该图像并用填充这些矩形中的每一个图像的一部分，就像制作拼图部件一样，我已经将图像导入到我的库中，但现在我不知道该怎么做，请问有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:57:09.847

简而言之：如果您要分割图像，请使用位图作为您的 Rect 子项或基础，并使用底层`BitmapData.copyPixels()`方法用一张大图像中的像素填充您的 rects 的位图。一个例子：

```
 var megabase:BitmapData = new BigImage().bitmapData; // BigImage is an embedded asset name
        _sequence = new Vector.<BitmapData>();
        _rect = new Rectangle(0, 0, 64, 64); // my parts of image are 64x64 all, in general you should have (x,y,w,h) declared somewhere
        _point = new Point();
        var smallBD:BitmapData;
        _sequence = new Vector.<BitmapData>();
        for (i = 0; i < ssa.length; i++) {
            // ssa is a (x,y) array defining areas that each sprite will contain
            smallBD = new BitmapData(64, 64, true, 0);
            _rect.x = ssa[i][0];
            _rect.y = ssa[i][1]; 
            smallBD.copyPixels(megabase, _rect, _point);
            _sequence.push(smallBD);
        } 
```

这会将一个巨大的`megabase`图像拆分为多个 64x64 图像，这些图像排列为 BitmapData 对象的 Vector。您显然会有不同的底层结构，但这里说明了主要原理。

# php - 遍历数组并查看元素是否为空白，如果不是空白则输出html

> ID：13610209
> 
> 赞同：0
> 
> 时间：2012-11-28T16:49:00.437
> 
> 标签：php, html

我有一个这样的数组

```
Array
(
[0] => Array
    (
        [id] => 139
        [name] => Eithne Maun
        [contactNo] => 877692398
        [email] => eithne@yahoo.co.uk
        [address] => 
        [county] => Cork
        [country] => Ireland
        [sourceOfContact] => Phone
        [type] => Corporate
        [dateAdded] => 2012-11-26
        [companyName] => 
        [dateOfBirth] => 
    ) 
```

)

我想遍历数组中的每个元素，如果值不为空，则仅显示下面的行

```
Number: <?php htmlout($contact[0]['contactNo']);?><br />
Email: <?php htmlout($contact[0]['email']);?><br />
Address: <?php htmlout($contact[0]['address']);?><br />
County: <?php htmlout($contact[0]['county']);?><br />
Country: <?php htmlout($contact[0]['country']);?><br />
Type of Contact: <?php htmlout($contact[0]['type']);?><br />
Company Name: <?php htmlout($contact[0]['companyName']);?><br />
Date of Birth: <?php htmlout($contact[0]['dateOfBirth']);?><br /> 
```

有没有我可以使用的带有循环的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:57:12.803

```
$fields = array(
'Number' => 'contactNo',
'Email' => 'email',
'Address' => 'address',
'County' => 'county',
'Country' => 'country',
'Type of Contact' => 'type',
'Company Name' => 'companyName',
'Date of Birth' => 'dateOfBirth');

foreach ($fields as $key => $val)
{
    if (!empty($contact[0][$val]))
    {
        echo $key . ': ' . $contact[0][$val] . "<br />\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:51:24.170

尝试

```
<?php
if(!empty($contact[0]['contactNo'])) { ?>
   Number: <?php htmlout($contact[0]['contactNo']);?><br />
<?php } ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:58:41.833

```
$record = array_filter($contact[0]); 
```

然后遍历 $record 中的每个条目，所有空条目都将被过滤掉

但请注意，当像这样使用 array_filter 时，0 数值也被认为是空的

# android - 指针索引超出范围多点触控

> ID：13610210
> 
> 赞同：2
> 
> 时间：2012-11-28T16:49:02.307
> 
> 标签：android, multi-touch, outofrangeexception

起初，我真的知道关于它的帖子不止一篇，但没有帮助我修复错误/错误。我很抱歉，如果它是一个转发，并希望你们能帮助我摆脱这个错误。

```
11-28 17:36:36.110: W/dalvikvm(8380): threadid=1: thread exiting with uncaught exception (group=0x40a331f8)
11-28 17:36:36.110: E/AndroidRuntime(8380): FATAL EXCEPTION: main
11-28 17:36:36.110: E/AndroidRuntime(8380): java.lang.IllegalArgumentException: pointerIndex out of range
11-28 17:36:36.110: E/AndroidRuntime(8380):     at android.view.MotionEvent.nativeGetAxisValue(Native Method)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at android.view.MotionEvent.getX(MotionEvent.java:1974)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at com.main.TouchEventControler.processJoyPadTouchRelease(TouchEventControler.java:194)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at com.main.TouchEventControler.processRelease(TouchEventControler.java:237)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at com.main.TouchEventControler.processTouchEvent(TouchEventControler.java:88)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at com.main.GameField.onTouchEvent(GameField.java:142)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at android.view.View.dispatchTouchEvent(View.java:5546)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1938)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1375)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at android.app.Activity.dispatchTouchEvent(Activity.java:2364)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1886)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at android.view.View.dispatchPointerEvent(View.java:5726)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:2890)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2466)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at android.view.ViewRootImpl.processInputEvents(ViewRootImpl.java:845)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2475)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at android.os.Looper.loop(Looper.java:137)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at android.app.ActivityThread.main(ActivityThread.java:4424)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at java.lang.reflect.Method.invokeNative(Native Method)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at java.lang.reflect.Method.invoke(Method.java:511)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-28 17:36:36.110: E/AndroidRuntime(8380):     at dalvik.system.NativeStart.main(Native Method) 
```

我确实像这样处理它们，我很高兴它有时会像我想要的那样运行，如果它没有因该错误而崩溃：

```
public void processTouchEvent(MotionEvent event) {

    // create an action
    int action = (event.getActionMasked() & MotionEvent.ACTION_MASK);
    // getting pointerindex
    int pointerIndex = ((event.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) >> MotionEvent.ACTION_POINTER_INDEX_SHIFT);
    // getting pointer id

    //catch invalide
    if(pointerIndex == MotionEvent.INVALID_POINTER_ID){
        return;
    }

    int pointerId = event.findPointerIndex(pointerIndex);
    // switch case for the action
    switch (action) {
    case MotionEvent.ACTION_DOWN: // if action down
        processHitButtonTouch(event, pointerId);
        processJoyPadTouch(event, pointerId);
        break;
    case MotionEvent.ACTION_POINTER_DOWN: // if pointer down (second
                                            // finger/third)
        processHitButtonTouch(event, pointerId);
        processJoyPadTouch(event, pointerId);
        break;
    case MotionEvent.ACTION_UP: // if action up
        processRelease(event, pointerId);
    case MotionEvent.ACTION_POINTER_UP: // if action up second/third finger
        processRelease(event, pointerId);
    default:
        break;
    }
} 
```

在我调用那个开关的方法中，我只是得到触摸的位置并处理它们。我可以将 getX(pointerIndex) 放入 try catch 并在错误时返回。但是没有更好的方法吗？！

非常感谢我已经得到的所有帮助。

要求：

```
 public void processJoyPadTouchRelease(MotionEvent event, int pointerId) {
    int touchPosX = (int) event.getX(pointerId);
    int touchPosY = (int) event.getY(pointerId);

    if (( //dont freak out here! it's just looking for if the
            //touch was inside the Joypad! Nothing more!!
            //it's in breckets!
            touchPosX > 2 * Config.BLOCKSIZE
            && touchPosX < 4 * Config.BLOCKSIZE
            && touchPosY > 3 * Config.BLOCKSIZE
            && touchPosY < 5 * Config.BLOCKSIZE
            // touch up event handled
            || 2 * Config.BLOCKSIZE < touchPosX
            && touchPosX < (Config.BLOCKSIZE * 4)
            && touchPosY > (7 * Config.BLOCKSIZE)
            && touchPosY < (9 * Config.BLOCKSIZE)
            // touch down handled
            || (touchPosX < 2 * Config.BLOCKSIZE
            && touchPosY > (5 * Config.BLOCKSIZE) 
            && touchPosY < (7 * Config.BLOCKSIZE))
            // touch left handled
            || (4 * Config.BLOCKSIZE < touchPosX
            && touchPosX < (Config.BLOCKSIZE * 6)
            && touchPosY > (5 * Config.BLOCKSIZE) 
            && touchPosY < 7 * Config.BLOCKSIZE)) 
            //touch right handled

            //and the char isnt idle (so it's moving)
        && charac.getStatus() != Status.IDLE)
    //THAN do =>>
    {
        charac.setStatus(Status.IDLE);
        joyPad.status = Status.IDLE;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T17:07:02.687

尝试确保`pointerIndex < event.getPointerCount();`

但我认为你在这里可能有一个误解。代码中的 pointerIndex 是更改的指针的索引，它只能用于 ACTION_POINTER_DOWN 和 ACTION_POINTER_UP。如果你只有一根手指在屏幕上，pointerIndex 在这里是无效的。

# javascript - Jam.js 如何管理 `shim` 包

> ID：13610211
> 
> 赞同：1
> 
> 时间：2012-11-28T16:49:03.427
> 
> 标签：javascript, package, jamjs

我想知道 Jam.js（包系统）如何管理未由其作者发布的包。（如 Backbone 或 Handlebars）

我查看了[文档](http://jamjs.org/docs)，但那里什么也没找到。但是在包列表中，我们可以看到一些包不是由它们的作者发布的，例如[Handlebars](http://jamjs.org/packages/#/details/handlebars)。

这些是如何添加的？你可以设置自己的 URL 来获取`shim`包吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:29:16.990

没有答案，我一直在 Github `jam`repo 上提出这个想法：[https ://github.com/caolan/jam/issues/111](https://github.com/caolan/jam/issues/111)

每个人都可以为其作者打包一个应用程序，这将使它们在 jam 上可用。但是目前还不能设置本地配置来从 github 获取包（可能在未来的版本中）。

# jaxb - JAXB 编译问题 - [错误] 属性“任何”已定义

> ID：13610217
> 
> 赞同：6
> 
> 时间：2012-11-28T16:49:21.290
> 
> 标签：jaxb, eclipselink, moxy

我正在尝试为 xccdf-1.1.4.xsd 创建 JAXB 绑定，这是可以从[XCCDF Schema Location获取的标准模式](http://scap.nist.gov/specifications/xccdf/#resource-1.1.4)

我目前使用 EclipseLink MOXy 作为我的 JAXB 实现，因为我喜欢它也可以生成 JSON 绑定的事实。

我修复了几个使用外部绑定 XML 遇到臭名昭著的“[ERROR] Property “value” is already defined”错误的情况，现在我遇到了一个错误

```
[ERROR] Property "Any" is already defined. Use &lt;jaxb:property> to resolve this conflict.
line 441 of file:/home/dchu/Playground/Java/eclipselink_moxy/xccdf_1.1.4/xccdf-1.1.4.xsd

[ERROR] The following location is relevant to the above error
line 444 of file:/home/dchu/Playground/Java/eclipselink_moxy/xccdf_1.1.4/xccdf-1.1.4.xs 
```

下面是 XML 模式中发生错误的行的片段。

```
<xsd:sequence>
    <xsd:choice minOccurs="1" maxOccurs="1">
      <xsd:any namespace="http://purl.org/dc/elements/1.1/"
               minOccurs="1" maxOccurs="unbounded"/>
      <xsd:any namespace="http://checklists.nist.gov/sccf/0.1"
               processContents="skip" 
               minOccurs="1" maxOccurs="unbounded"/>
    </xsd:choice>
</xsd:sequence> 
```

有谁知道这里可能出了什么问题？谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-28T18:17:00.100

您可以使用外部绑定文件来重命名任何属性之一。

**绑定.xml**

```
<jxb:bindings xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:jxb="http://java.sun.com/xml/ns/jaxb" version="2.1">

    <jxb:bindings schemaLocation="schema.xsd">
        <jxb:bindings
            node="//xsd:complexType[@name='foo']/xsd:sequence/xsd:choice/xsd:any[@namespace='http://checklists.nist.gov/sccf/0.1']">
            <jxb:property name="any2" />
        </jxb:bindings>
    </jxb:bindings>

</jxb:bindings> 
```

**XML 模式 (schema.xsd)**

下面是您的 XML 模式的简化版本：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    targetNamespace="http://www.example.org/schema" 
    xmlns="http://www.example.org/schema"
    elementFormDefault="qualified">

    <xsd:complexType name="foo">
        <xsd:sequence>
            <xsd:choice minOccurs="1" maxOccurs="1">
                <xsd:any namespace=""
                    minOccurs="1" maxOccurs="unbounded" />
                <xsd:any namespace="http://checklists.nist.gov/sccf/0.1"
                    processContents="skip" minOccurs="1" maxOccurs="unbounded" />
            </xsd:choice>
        </xsd:sequence>
    </xsd:complexType>

</xsd:schema> 
```

**XJC 呼叫**

下面是如何利用外部绑定文件进行 XJC 调用。

```
xjc -b binding.xml schema.xsd 
```

**生成的类（Foo）**

```
package org.example.schema;

import java.util.*;
import javax.xml.bind.annotation.*;
import org.w3c.dom.Element;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "foo", propOrder = {
    "any",
    "any2"
})
public class Foo {

    @XmlAnyElement(lax = true)
    protected List<Object> any;
    @XmlAnyElement
    protected List<Element> any2;

    public List<Object> getAny() {
        if (any == null) {
            any = new ArrayList<Object>();
        }
        return this.any;
    }

    public List<Element> getAny2() {
        if (any2 == null) {
            any2 = new ArrayList<Element>();
        }
        return this.any2;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T19:40:49.720

当使用 JAVA JAXB 实现生成 JAXB 绑定时，使用 Blaise 的建议创建 JAXB 外部绑定 XML 将起作用。

但是，在使用 EclipseLink MOXy jaxb-compiler.sh 时它不起作用。Blaise 说这可能是编译器脚本中的一个错误。[错误票 395328](https://bugs.eclipse.org/bugs/show_bug.cgi?id=395328)

目前解决此问题的方法是使用 JDK 中的 JAVA XJC 命令并在生成的目录中手动添加 jaxb.properties 文件。[指定-eclipselink-moxy-as-yours](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-23T10:32:26.023

我在使用 Eclipse 时尝试了所有这些解决方案，但它们确实对我没有帮助。所以我切换到 Netbeans，它确实给了我同样的错误，只是一个对话框显示或多或少相同的错误消息，但细节较少。

这是甜蜜的部分，Netbeans 确实创建了客户端服务！是的，带有该错误消息。

您可以按如下方式创建 Web 服务客户端：
1\. 右键单击​​项目，
2\. 新建
3\. Web 服务客户端
4\. 选择 WSDL URL 并粘贴 URL
5\. 单击完成，然后它会创建有错误的客户端。

所以我在我的项目中找到了生成的 WSDL 文件，在文件中搜索了“any”的出现，并在文件中每隔一次出现在同一个标​​签中进行注释。

[注释行号 216](https://i.stack.imgur.com/anSC5.png)

在对同一标记中的所有第二次出现进行注释后保存文件。右键单击 Web Service（首先展开 Web Services References），单击 Refresh。您的 Web 服务客户端可以很好地运行，只需拖放方法并使用您的参数调用它们！

这对我有用...

# jquery - 带有嵌套 div 的 jQuery 类选择器

> ID：13610220
> 
> 赞同：3
> 
> 时间：2012-11-28T16:49:32.617
> 
> 标签：jquery

这是一些 HTML 的一部分，我需要从中检索一段数据。HTML 被分配给一个名为 fullDescription 的变量。

```
<p>testing</p>
<div class="field field-type-text field-field-video-short-desc">
    <div class="field-label">Short Description:&nbsp;</div>
    <div class="field-items">
        <div class="field-item odd">
                Demonstrates the basics of using the Content section of App Cloud Studio        
        </div>
    </div>
</div>
<div class="field field-type-text field-field-video-id">
    <div class="field-label">Video ID:&nbsp;</div>
    <div class="field-items">
            <div class="field-item odd">
                    1251462871001        
            </div>
    </div>
</div> 
```

我希望检索视频 ID 号 (1251462871001)。我在想这样的事情：

```
var videoID = $(fullDescription).find(".field.field-type-text.field-field-video-id").find(".field-item.odd").html(); 
```

尽管它不会产生任何语法错误，但它不会检索数字。

感谢您帮助一个 jQuery 菜鸟！

-马特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T16:53:02.273

你不需要那么多选择器，试试：

```
var videoID = $(fullDescription).find(".field-field-video-id .field-item.odd").html(); 
```

我很懒，我上面的代码只是为了表明你不需要这么多选择器。在花了一些时间解决这个问题后，我有一个解决方案：

```
var videoID = $(fullDescription).filter('.field-field-video-id').find('.odd').html(); 
```

过滤器是 jQuery 中对实际上是 HTML 的字符串进行排序的最佳方式。一旦你有了它，你就可以处理一个 HTML 对象并且可以使用 find 了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:00:45.450

您实际上不需要进行查找。此处的代码[http://jsbin.com/welcome/54447/](http://jsbin.com/welcome/54447/)显示了一个工作示例。

此代码将为您提供您感兴趣的 div 的值。

```
$('.field-field-video-id .field-items .field-item.odd').html(); 
```

你的'fullDescription'变量只是一个字符串还是一个jQuery对象？如果它是一个 jquery 对象，您可以像这样将它传递给上面的选择器

```
$('.field-field-video-id .field-items .field-item.odd', fullDescription).html(); 
```

如果 fullDescription 是一个字符串，则传入上面的 $(fullDescription)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:56:33.390

你有没有尝试过类似的东西：

```
$('div.field field-type-text field-field-video-id div.field-items div.field-item.odd', fulldescription); 
```

这将获得具有给定类的嵌套 div。当您在语句之间没有空格时，这意味着这应该是一个元素。（一个元素应该是一个 div 并且具有类字段、字段类型文本等）。解析空间时，这意味着它必须是与第一部分匹配的项的子项。最后指定fulldescription时，表示在fulldescription的上下文中搜索

# objective-c - pathForResource:ofType：如果使用“数据模型版本文件”的构建规则，则返回“nil”

> ID：13610223
> 
> 赞同：0
> 
> 时间：2012-11-28T16:49:39.963
> 
> 标签：objective-c, cocoa, core-data

我正在尝试在一个新项目中设置 CoreData，但不知何故卡在定位 momd 目录。

我发现了几个有类似问题的 stackoverflow 帖子，但无法通过提供的答案解决问题。所以这里是：是什么导致第一行返回“nil”而第二行实际上找到了 momd 目录？

```
NSURL *modelURL = [NSURL fileURLWithPath:
    [[NSBundle mainBundle] pathForResource:@"Project" ofType:@"momd"]
];

NSURL *modelURL = [NSURL fileURLWithPath:
    @"/Users/name/Library/Developer/Xcode/DerivedData/Project-afusjhpzsjyjdbesttxposfzlzrj/Build/Products/Debug/Project.app/Contents/MacOS/Project.momd"
]; 
```

编辑：正如 Metabble 所评论的，现在主捆绑包无法在 Resources 文件夹之外找到资源是合乎逻辑的。

但我的问题仍然存在。我发现了更多：我正在使用 mogenerator 生成类。（我使用了这些说明：[http](http://www.esenciadev.com/2011/05/mogen-and-xcode4-integration/) ://www.esenciadev.com/2011/05/mogen-and-xcode4-integration/ ）。构建规则过程“数据模型版本文件”调用脚本。在该构建规则中，我将输出设置为 '${DERIVED_FILES_DIR}/${INPUT_FILE_BASE}.momd' 但看起来这不是 momd 的正确目的地：

```
error: Could not create bundle folder for versioned model at '/Users/user/Library/Developer/Xcode/DerivedData/Project-afusjhpzsjyjdbesttxposfzlzrj/Build/Products/Debug/Project.app/Contents/MacOS/Project.momd' 
```

如果我删除构建规则，代码可以找到momd。但这会禁用 mogenerator...

有人知道我需要在构建规则中设置哪些输出文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:42:02.313

确保向项目添加构建规则，将 Project.momd 文件复制到应用程序的资源目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:38:32.600

[在Mogenerator 和 Xcode 4](https://stackoverflow.com/questions/5118718/mogenerator-and-xcode-4)中找到了我的解决方法

我删除了构建规则，现在改用运行脚本阶段：

```
MODELS_DIR="${PROJECT_DIR}/Resources/Main/CoreData"
DATA_MODEL_PACKAGE="$MODELS_DIR/Project.xcdatamodeld"
CURRENT_VERSION=`/usr/libexec/PlistBuddy "$DATA_MODEL_PACKAGE/.xccurrentversion" -c 'print _XCCurrentVersionName'`

mogenerator --template-var arc=true --model "$DATA_MODEL_PACKAGE/$CURRENT_VERSION" --output-dir "$MODELS_DIR/Sources/Main/Classes" 
```

这工作得很好。虽然关于构建规则很奇怪。我在不同的项目中使用它们没有任何问题......

谢谢菲利普和梅塔布尔！！

# asp.net - asp.net 文件上传未正确更新

> ID：13610224
> 
> 赞同：0
> 
> 时间：2012-11-28T16:49:39.993
> 
> 标签：asp.net

我有一个名为 img.gif 的文件。使用 fileupload，它似乎没有正确上传新文件，因为旧的 .gif 仍然存在。

FileUpld.SaveAs(上传文件);

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:56:27.807

当我遇到这类问题时，我总是将我的文件名重命名为从 1 到 n 的自动增量。
即img1.gif、img2.gif、img3.gif。
试试这个可能会有帮助。

# java - JAVA GUI - 面板上出现“找不到符号”错误。"预期的类、接口或枚举" on

> ID：13610227
> 
> 赞同：1
> 
> 时间：2012-11-28T16:49:43.227
> 
> 标签：java, user-interface

当我意识到我到处都有错误时，我正要完成我的 GUI，在那之前，一切都很好。当我尝试调用另一个面板时收到错误“找不到符号”：

```
this.setContentPane(servicios); 
```

和错误`"Class, interface or enum expected" on object methods and some "}"`：

`text.setText(text.getText()+"\nInternet 20 mbps = $1199")`;

我找不到任何看起来有问题的东西。

这是来自控制台的错误：线程“main”java.lang.VerifyError 中的异常：构造函数必须调用 super() 或 this()，然后在方法 sistema.Principal.()V 在 sistema.Sistema.main 的偏移量 0 处返回(Sistema.java:18) Java 结果：1

这是代码：

框架：

```
 public class Principal extends javax.swing.JFrame {

     float total, x1=0, x2=0, x3=0;

         total=total+x1+x2+x3;
     /**
      * Creates new form Principal
      */

     public Principal() {
         initComponents();
     }

 private void b1ActionPerformed(java.awt.event.ActionEvent evt) {      

         // TODO add your handling code here:
         this.setContentPane(servicios);
         validate();

     }                                  

     private void b2ActionPerformed(java.awt.event.ActionEvent evt) {                                   
         // TODO add your handling code here:
         this.setContentPane(productos);
         validate();
     }                                  

     private void jToggleButton1ActionPerformed(java.awt.event.ActionEvent evt) {       

         // TODO add your handling code here:
         if(c1.isSelected());
         {
             x1=199;
             text.setText(text.getText()+"\nInternet 2 mbps = $199");
         }
         if(c2.isSelected());
         {
             x1=399;
             text.setText(text.getText()+"\nInternet 5 mbps = $399");
         }
         if(c3.isSelected());
         {
             x1=699;
             text.setText(text.getText()+"\nInternet 10 mbps = $699");
         }
         if(c4.isSelected());
         {
             x1=1199;
             text.setText(text.getText()+"\nInternet 20 mbps = $1199");
         }

         else{
              ms1.setText("Para agregar al carrito\nselecciona una opcion");
             }

     }                                              

     private void jButton8ActionPerformed(java.awt.event.ActionEvent evt) {                                         
         // TODO add your handling code here:
         if(c5.isSelected());
         {
             x2=99;
             text.setText(text.getText()+"\n100 llamadas nacionales = $99");
         }
         if(c6.isSelected());
         {
             x2=299;
             text.setText(text.getText()+"\nLlamadas nacionales ilimitadas = $299");
         }
         if(c7.isSelected());
         {
             x2=359;
             text.setText(text.getText()+"\n50 minutos larga distancia = $359");
         }
        if(c8.isSelected());
         {
             x2=999;
             text.setText(text.getText()+"\nTelefonía ilimitada = $999");
             }

         else{
                 ms2.setText("Para agregar a carrito\nselecciona una opcion");
      }
     }                                        

     private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {                                         
         // TODO add your handling code here:
         System.exit(WIDTH);
     }                                        

     private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
         // TODO add your handling code here:
         setContentPane(jPanel1);
         revalidate();
     }                                        

     private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {                                         
         // TODO add your handling code here:
         t1.setText("Total = $"+total);
         setContentPane(carrito);
         revalidate();
     }                                        

     private void jButton6ActionPerformed(java.awt.event.ActionEvent evt) {                                         
         // TODO add your handling code here:
         System.exit(WIDTH);
     }                                        

     private void jButton5ActionPerformed(java.awt.event.ActionEvent evt) {                                         
         // TODO add your handling code here:
         setContentPane(jPanel1);
         revalidate();
     }                                        

     private void jButton4ActionPerformed(java.awt.event.ActionEvent evt) {                                         
         // TODO add your handling code here:
         setContentPane(salida);
         revalidate();
     }                                        

     private void jButton7ActionPerformed(java.awt.event.ActionEvent evt) {                                         
         // TODO add your handling code here:
         x3=x3+5670;
         text.setText(text.getText()+"\nComputadora DELL = $5,670");
     }                                        

     private void jButton9ActionPerformed(java.awt.event.ActionEvent evt) {                                         
         // TODO add your handling code here:
         x3=x3+8450;
         text.setText(text.getText()+"\nLaptop DELL = $8,450");
     }                                        

     private void jButton10ActionPerformed(java.awt.event.ActionEvent evt) {                                          
         // TODO add your handling code here:
         x3=x3+11780;
         text.setText(text.getText()+"\nLaptop SONY = $11,870");
     }                                         

     private void jButton11ActionPerformed(java.awt.event.ActionEvent evt) {                                          
         // TODO add your handling code here:
         x3=x3+1200;
     text.setText(text.getText()+"\nMódem 2WIRE  = $1,200");
     }                                         

     private void jButton12ActionPerformed(java.awt.event.ActionEvent evt) {                                          
         // TODO add your handling code here:
         x3=x3+5700;
         text.setText(text.getText()+"\nTelevision LCD = $5,700");
     }                                         

     private void jButton13ActionPerformed(java.awt.event.ActionEvent evt) {                                          
         // TODO add your handling code here:
         x3=x3+4500;
         text.setText(text.getText()+"\nConsola Xbox 360 = $4,500");
     }                                         

     private void jButton16ActionPerformed(java.awt.event.ActionEvent evt) {                                          
         // TODO add your handling code here:
         System.exit(WIDTH);
     }                                         

     private void jButton15ActionPerformed(java.awt.event.ActionEvent evt) {                                          
         // TODO add your handling code here:
         setContentPane(jPanel1);
         revalidate();
     }                                         

     private void jButton14ActionPerformed(java.awt.event.ActionEvent evt) {                                          
         // TODO add your handling code here:
         t1.setText("Total = $"+total);
         setContentPane(carrito);
         revalidate();
     }                                         

     /**
      * @param args the command line arguments
      */
     public static void main(String args[]) {

  java.awt.EventQueue.invokeLater(new Runnable() {
             public void run() {
                 new Principal().setVisible(true);
             }
         });
     }

     private javax.swing.JButton b1;
     private javax.swing.JButton b2;
     private javax.swing.ButtonGroup buttonGroup1;
     private javax.swing.ButtonGroup buttonGroup2;
     private javax.swing.JCheckBox c1;
     private javax.swing.JCheckBox c2;
     private javax.swing.JCheckBox c3;
     private javax.swing.JCheckBox c4;
     private javax.swing.JCheckBox c5;
     private javax.swing.JCheckBox c6;
     private javax.swing.JCheckBox c7;
     private javax.swing.JCheckBox c8;
     private javax.swing.JPanel carrito;
     private javax.swing.JLabel icon;
     private javax.swing.JButton jButton1;
     private javax.swing.JButton jButton10;
     private javax.swing.JButton jButton11;
     private javax.swing.JButton jButton12;
     private javax.swing.JButton jButton13;
     private javax.swing.JButton jButton14;
     private javax.swing.JButton jButton15;
     private javax.swing.JButton jButton16;
     private javax.swing.JButton jButton2;
     private javax.swing.JButton jButton3;
     private javax.swing.JButton jButton4;
     private javax.swing.JButton jButton5;
     private javax.swing.JButton jButton6;
     private javax.swing.JButton jButton7;
     private javax.swing.JButton jButton8;
     private javax.swing.JButton jButton9;
     private javax.swing.JLabel jLabel1;
     private javax.swing.JLabel jLabel10;
     private javax.swing.JLabel jLabel11;
     private javax.swing.JLabel jLabel2;
     private javax.swing.JLabel jLabel3;
     private javax.swing.JLabel jLabel5;
     private javax.swing.JLabel jLabel6;
     private javax.swing.JLabel jLabel7;
     private javax.swing.JLabel jLabel8;
     private javax.swing.JLabel jLabel9;
     private javax.swing.JPanel jPanel1;
     private javax.swing.JPanel jPanel2;
     private javax.swing.JPanel jPanel3;
     private javax.swing.JScrollPane jScrollPane1;
     private javax.swing.JScrollPane jScrollPane2;
     private javax.swing.JScrollPane jScrollPane3;
     private javax.swing.JScrollPane jScrollPane4;
     private javax.swing.JScrollPane jScrollPane5;
     private javax.swing.JScrollPane jScrollPane6;
     private javax.swing.JScrollPane jScrollPane7;
     private javax.swing.JScrollPane jScrollPane8;
     private javax.swing.JTextArea jTextArea1;
     private javax.swing.JTextArea jTextArea2;
     private javax.swing.JTextArea jTextArea3;
     private javax.swing.JTextArea jTextArea4;
     private javax.swing.JTextArea jTextArea5;
     private javax.swing.JTextArea jTextArea6;
     private javax.swing.JTextArea jTextArea7;
     private javax.swing.JTextField jTextField1;
     private javax.swing.JTextField jTextField2;
     private javax.swing.JTextField jTextField3;
     private javax.swing.JToggleButton jToggleButton1;
     private javax.swing.JLabel jlabel3;
     private javax.swing.JLabel l1;
     private javax.swing.JLabel l2;
     private javax.swing.JLabel ms1;
     private javax.swing.JLabel ms2;
     private javax.swing.JLabel p1;
     private javax.swing.JLabel p2;
     private javax.swing.JLabel p3;
     private javax.swing.JLabel p4;
     private javax.swing.JLabel p5;
     private javax.swing.JLabel p6;
     private javax.swing.JPanel productos;
     private javax.swing.JPanel salida;
     private javax.swing.JPanel servicios;
     private javax.swing.JTextArea text;
     private javax.swing.JLabel ts1; 
```

主类：

```
package sistema;

/**  *  * @author David  */ public class Sistema {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here
        Principal a =  new Principal();
        a.setVisible(true);
        a.setLocationRelativeTo(null);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:08:33.750

很多错误！！

首先，为什么`semicolon(;)`在每个 if 语句之后都有。删除那些。

您在课程结束时错过`}`了结课。

方法在哪里`initComponents()`？？

> 编辑：看起来您使用 GUI 编辑器创建了 GUI。那时我可能看不到 initComponents() 。

你在哪里用`private javax.swing.JLabel ts1;`。它应该是`private javax.swing.JTextArea t1;`吗？

# file - 定期上传到远程服务器？

> ID：13610231
> 
> 赞同：0
> 
> 时间：2012-11-28T16:49:51.663
> 
> 标签：file, ssh, ftp, remote-server

我一直在开发一个拍摄屏幕截图的应用程序，有点像[http://puush.me/](http://puush.me/)但是，我希望能够将屏幕截图上传到远程服务器。

我可以使用哪些协议来做到这一点。

需要跨平台且安全。

我知道 SSH、SFTP 和 FTP 是选项，但是，它们都需要我不想提供给最终用户的登录名。我也不想为他们签署密钥，因为它仍然允许他们的机器远程登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T05:02:41.033

HTTP 协议允许远程上传，我可以给每个上传者一个唯一的 ID

# hibernate - 将 OSGi 清单元数据添加到 LPGL 库

> ID：13610234
> 
> 赞同：1
> 
> 时间：2012-11-28T16:50:10.840
> 
> 标签：hibernate, licensing, osgi, lgpl

我想知道将 OSGi 清单头`META-INF/manifest.MF`文件添加到 LGPL 库的含义是什么。

它没有更改源，但修改了二进制 JAR。这些更改在 JAR 文件中清晰可见，并且是纯文本。

我了解 LPGL 将要求我仅发布*源更改*。这究竟意味着什么？

我想到的具体例子是 Hibernate。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:07:58.257

LGPL 不要求您预先发布源代码。只有在有人要求时，您才需要提供。

在您的情况下，您必须发布（使用 LGPL 许可证）添加清单的构建源。或者，如果您手动执行新的清单文件并说明如何应用它。

# ruby-on-rails - Rails 3.2 预压缩选定资产

> ID：13610236
> 
> 赞同：1
> 
> 时间：2012-11-28T16:50:13.943
> 
> 标签：ruby-on-rails, heroku, ruby-on-rails-3.2

所以，我的`<head>`, 里面有以下代码行`app/views/layouts/application.html.erb`：

```
<%= stylesheet_link_tag "front", :media => "all" %> 
```

这在开发中运行良好，但是当我切换到生产时它会中断，因为它没有预编译，所以我运行`rake assets:precompile`，它将一堆文件添加到我的公共目录中，也很好，但是所有 css 和 js 文件的名称如下：

*   `application-digest.ext`
*   `application-digest.ext.gz`
*   `application.ext`
*   `application.ext.gz`

哪里`ext`是`css`或`js`，并且`digest`明显不同。

图像文件随版本`name.ext`一起提供。`name-digest.ext`

所以，当导航到页面时，我得到一个`ActionView::Template::Error`告诉我`front.css isn't precompiled`。

由于我对不同的控制器有不同的布局（以及`FrontController`使用`application.html.erb`布局，如果这很重要），我不想在所有控制器布局中包含*所有*css 或 js 文件，因为这只是浪费带宽。

**我如何告诉 rails** `app/assets` **单独编译里面的所有文件？**

* * *

`config.assets.compile = true`我设法通过设置inside使用实时编译来“解决”问题`config/environments/production.rb`，但我一直在到处阅读这不是处理资产的最佳方式^([1])，因为它浪费了大量资源。

该应用程序托管在 Heroku 上。

* * *

[1]：[官方 Ruby on Rails 指南页面](http://guides.rubyonrails.org/asset_pipeline.html#live-compilation)：*“此模式使用更多内存，性能比默认更差，不推荐。”*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:17:33.043

如果您在本地预编译资产，那么您需要 git commit 资产，以便 heroku 加载它们。但这不是你想做的。

/config/environments/production.rb

```
config.assets.precompile += %w(front.css, another.css, heres_a_javascript.js) 
```

application.js 和 application.css 会自动预编译。您在 application.html （或任何地方，真的）中链接的所有其他内容都需要在此处预编译

# c# - 无法使用我的自定义服务器控件

> ID：13610242
> 
> 赞同：-1
> 
> 时间：2012-11-28T16:50:28.137
> 
> 标签：c#, asp.net, web-config

我有一个包含 2 个项目的 Web 应用程序：网站本身和一个包含自定义服务器控件的项目。

我在我的 Web 应用程序中引用了服务器控制项目，并将其添加到我的 web.config 中：

```
<pages>
  <controls>
    <add assembly="ServerControls" tagName="MyControl" tagPrefix="sc" namespace="ServerControls" />
  </controls>      
</pages> 
```

但是如何使用控件？它没有出现在工具箱或智能感知中，当我在 web.config 中启动它时给我一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:46:01.973

首先，您需要检查您的自定义控件类是否标记为公共，否则从程序集外部将看不到它。

然后像这样在页面中引用它：

```
<sc:MyControl runat="server" /> 
```

您不需要在页面上使用 Register 指令，因为您已经在 web.config 中注册了标记前缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:58:16.650

您需要注册标签名称，然后使用标签：

```
<%@ Register TagPrefix="sc" TagName="[control]" 
    Src="~/Controls/control.ascx" %> 
```

在页面顶部，然后使用这样的控件：

```
<sc:Control id="id" runat="server" /> 
```

# php - 表单 POST 事件未处理

> ID：13610250
> 
> 赞同：0
> 
> 时间：2012-11-28T16:51:22.590
> 
> 标签：php, html, forms

这是我的表单代码：

```
 <form name="input" action="index.php" method="post">
 <input type="text" name="email" id="email" value="Subscribe to Our News" onclick="value=''"/>
 <input type="submit" value="Sign up" id="submit"/>
 </form> 
```

这是我在同一页面 index.php 中的发布事件代码

```
 if (isset($_POST['submit']))
{
    $email = $_POST['email'];
    echo $email;
    $sql = mysql_query("INSERT INTO subscribe (email) VALUES ('$email')");

    if($sql){
        echo 'True';
    }else{
        echo 'false';
    }
} 
```

我没有从点击事件中得到回复！请帮助我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T16:53:32.523

您需要为提交按钮命名，以检查它是否被按下：

```
<input type="submit" value="Sign up" id="submit" name="submit"/> 
```

# javascript - 在定时器中实现 OnTouch 监听器

> ID：13610252
> 
> 赞同：1
> 
> 时间：2012-11-28T16:51:26.283
> 
> 标签：javascript, events, dom-events, touch-event, ontouchlistener

我是 Android 新手，我遇到了问题。我正在尝试创建一个应用程序，当您按住按钮时，计时器就会启动。如果您松开按下的按钮，计时器会自行重置。如果您设法按住直到计时器归零，它将播放声音。我用一些丑陋的代码管理了可启动计时器的可点击按钮，但我无法实现`OnTouch`监听器。

如何 在此代码中将更改`OnCLick`为 a ？`OnTouch`

```
 import android.app.Activity;
    import android.media.MediaPlayer;
    import android.os.Bundle;
    import android.os.CountDownTimer;
    import android.util.Log;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.view.animation.AnimationUtils;
    import android.widget.Button;
    import android.widget.TextView;

    public class Main extends Activity implements OnClickListener
{
    private static final String tag = "Main";
    private KarinCountDownTimer countDownTimer;

    private boolean timerHasStarted = false;
    private Button startB;
    private TextView text;

    private final long startTime = 900000;    //15 min 1800000

    private final long interval = 1000;

    SoundManager mymanager;                           //sound 

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            startB = (Button) this.findViewById(R.id.button);
            startB.setOnClickListener(this);

            text = (TextView) this.findViewById(R.id.timer);

        countDownTimer = new KarinCountDownTimer(startTime,interval);
        text.setText(text.getText() + String.valueOf(startTime));

            mymanager = new SoundManager(this);                     
        }

    @Override

    public void onClick(View v)
        {
            if (!timerHasStarted)
                {
                    countDownTimer.start();
                    timerHasStarted = true;
                    startB.setText("Start");

                }
            else
                {

                    countDownTimer.cancel();
                    timerHasStarted = false;
                    startB.setText("RESET");
                }
        }

    // CountDownTimer class
    public class KarinCountDownTimer extends CountDownTimer
        {

            public KarinCountDownTimer(long startTime, long interval)
                {
                    super(startTime, interval);
                }

            @Override
            public void onFinish()
                {
                    text.setText("Time's up!");                      

                    mymanager.playSound(R.raw.zen_sound1);

                }

            @Override
            public void onTick(long millisUntilFinished)
                {
                    text.setText("" + millisUntilFinished);

                }

        }
    protected void onPause(){
        mymanager.stopSound();
        super.onPause();

    }
    protected void onDestroy(){
        mymanager.release();
        super.onDestroy();
    }
    } 
```

# mysql - msql 日期比较仅在年份是第一个时才有效

> ID：13610254
> 
> 赞同：0
> 
> 时间：2012-11-28T16:51:31.337
> 
> 标签：mysql, sql, datetime, date-comparison

我有一个在 where 子句中进行日期比较的方法，只有当年份是字符串的第一部分时才有效。crDate 字段是一个 DATETIME 所以不应该以下两个工作？

```
and     crDate between '2009/01/01' and '2009/01/21'

and     crDate between '01/01/2009' and '01/21/2009' 
```

如果在我看来这两个语句是相同的，但第一个返回预期结果，第二个返回 0 条记录。

mySQL 中是否有一个设置可以关闭或打开，从而使这些功能有所不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:58:23.623

MySQL 不够聪明，无法解析所有可能的日期格式。连人都不够聪明——是`10/01/2012`1 月 10 日还是 10 月 1 日？[您必须从字符串](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)执行适当的转换或依赖默认格式，通常是`YYY-MM-DD`：

```
mysql> SELECT @@date_format;
+---------------+
| @@date_format |
+---------------+
| %Y-%m-%d      |
+---------------+ 
```

# c++ - C ++禁用链式调用而不包含指令

> ID：13610256
> 
> 赞同：2
> 
> 时间：2012-11-28T16:51:36.063
> 
> 标签：c++, preprocessor-directive

我正在为我的项目开发一个简单的记录器包装器，它可以让我轻松换出后端。
这是我理想的界面：

```
log::error << "some" << " log " << "message"; 
```

我实现它的方式是：

1.  `log::error#operator<<`返回一个临时`Sink`对象。

2.  `Sink#operator<<`返回`*this`并定义一个移动构造函数。

3.  完整的消息可以在`Sink`调用链末尾调用的析构函数中使用。

人为的实现：

```
#include <iostream>
#include <string>

struct Sink {

  Sink (std::string const& msg) : m_message(msg) {}

  // no copying
  Sink (Sink const& orig) = delete;

  // move constructor
  Sink (Sink && orig) : m_message(std::move(orig.m_message)) {};

  // use the complete string in the destructor
  ~Sink() { std::cerr << m_message << std::endl;}

  Sink operator<< (std::string const& msg) {
    m_message.append(msg);
    return std::move(*this);
  }

  std::string m_message;
};

struct Level {
  Sink operator<< (std::string const& msg) { return Sink(msg); }
};

int main() {
  Level log;

  log << "this" << " is " << "a " << "test";
} 
```

这很好用，除非我需要一种干净的方式来禁用日志记录。如果我没有使用链接，我的日志函数可以使用预处理器指令来删除函数的内容

```
void log (std::string) {
  #ifdef LOGGING_ENABLED
    // log message
  #endif
} 
```

然后编译器将优化并删除空函数调用。但我不知道如何使用我试图实现的 api 来做到这一点。我知道这是可能的，因为[glog](http://google-glog.googlecode.com/svn/trunk/doc/glog.html)以某种方式做到了。

使用这样的指令违背了拥有一个好的 api 的目的。

```
#ifdef LOGGING_ENABLED
  log << "this" << " is " << "a " << "test";
#endif 
```

禁用这些类型的链接调用的干净方法是什么？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T17:06:05.437

你必须实现另一个`Sink`在记录时什么都不做的。Glog 称之为空流：

```
// A class for which we define operator<<, which does nothing.
class GOOGLE_GLOG_DLL_DECL NullStream : public LogMessage::LogStream {
 public:
  // Initialize the LogStream so the messages can be written somewhere
  // (they'll never be actually displayed). This will be needed if a
  // NullStream& is implicitly converted to LogStream&, in which case
  // the overloaded NullStream::operator<< will not be invoked.
  NullStream() : LogMessage::LogStream(message_buffer_, 1, 0) { }
  NullStream(const char* /*file*/, int /*line*/,
             const CheckOpString& /*result*/) :
      LogMessage::LogStream(message_buffer_, 1, 0) { }
  NullStream &stream() { return *this; }
 private:
  // A very short buffer for messages (which we discard anyway). This
  // will be needed if NullStream& converted to LogStream& (e.g. as a
  // result of a conditional expression).
  char message_buffer_[2];
};

// Do nothing. This operator is inline, allowing the message to be
// compiled away. The message will not be compiled away if we do
// something like (flag ? LOG(INFO) : LOG(ERROR)) << message; when
// SKIP_LOG=WARNING. In those cases, NullStream will be implicitly
// converted to LogStream and the message will be computed and then
// quietly discarded.
template<class T>
inline NullStream& operator<<(NullStream &str, const T &) { return str; } 
```

在您的情况下，一个简单的实现看起来像

```
#ifdef LOGGING_ENABLED
  /* your sink */
#else
  struct Sink {
    Sink (std::string)  {}
    Sink (Sink const& orig) {};
  };
  template <typename T> Sink operator<<(Sink s, T) { return s; }
#endif 
```

这非常简单，可以远离编译器进行优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:28:08.660

流方法存在一个问题，即使是空流：C++ 中没有惰性计算。

也就是说，即使您的流对参数不做任何事情，参数仍然是完全创建的。

避免这种评估的唯一方法是使用宏：

```
#define LOG(Message_) \
    do (LogManager::activated()) {
        logger << Message_;
    } while(0); 
```

当然，我会注意到，如果你使用宏，这是一个很好的机会来插入`__func__`,`__FILE__`和`__LINE__`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T16:56:54.203

这不是最漂亮的，但你可以这样做：

```
#ifdef LOGGING_ENABLED
#define LOG(message) message
#else
#define LOG(message)
#endif

LOG(log << "this" << "is" << "a" << "test"); 
```

你可以通过这样做稍微简化它

```
#ifdef LOGGING_ENABLED
#define LOG(message) log << message
#else
#define LOG(message)
#endif

LOG("this" << "is" << "a" << "test"); 
```

# android - 如何检测用户何时在 android 设备上插入耳机？（与 ACTION_AUDIO_BECOMING_NOISY 相反）

> ID：13610258
> 
> 赞同：31
> 
> 时间：2012-11-28T16:51:45.573
> 
> 标签：android, broadcastreceiver, android-audiomanager

我正在开发一个具有以下必要条件的应用程序：如果设备中插入了耳机并且用户将其移除，我需要将所有流静音。为此，我需要收听`AudioManager.ACTION_AUDIO_BECOMING_NOISY`广播。还行吧！这里没有问题。

但是当用户**再次插入耳机时**，我需要取消静音设备。但是没有`AudioManager.ACTION_AUDIO_BECOMING_NOISY`相反的广播。我不知道何时重新插入耳机。

一种解决方案是定期查看是否`AudioManager.isWiredHeadsetOn()`存在`true`，但这对我来说似乎不是一个好的解决方案。

有没有办法检测用户何时将耳机插入设备？

**编辑**：我尝试使用`Intent.ACTION_HEADSET_PLUG`这种方式，**但没有奏效**。

在 manifest.xml 我放：

```
<receiver android:name=".MusicIntentReceiver" >
    <intent-filter>
        <action android:name="android.intent.action.HEADSET_PLUG" />
    </intent-filter>
</receiver> 
```

这是我的代码`MusicIntentReceiver.java`：

```
public class MusicIntentReceiver extends BroadcastReceiver {

    public void onReceive(Context ctx, Intent intent) {
        AudioManager audioManager = (AudioManager)ctx.getSystemService(Context.AUDIO_SERVICE);
        if (intent.getAction().equals(Intent.ACTION_HEADSET_PLUG)) {
            Log.d("Let's turn the sound on!");
            //other things to un-mute the streams
        }
    }
} 
```

还有其他解决方案可以尝试吗？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-11-28T17:14:12.140

这个电话怎么样：http: [//developer.android.com/reference/android/content/Intent.html#ACTION_HEADSET_PLUG](http://developer.android.com/reference/android/content/Intent.html#ACTION_HEADSET_PLUG) 我在 [Droid Incredible Headphones Detection](https://stackoverflow.com/questions/4186615/droid-incredible-headphones-detection)找到的 ？

我现在在您的问题中看到的更新代码还不够。根据[Intent.ACTION_HEADSET_PLUG 在活动开始时收到 Intent.ACTION_HEADSET_PLUG](https://stackoverflow.com/questions/4092438/intent-action-headset-plug-is-received-when-activity-starts) ，当插入状态发生变化时，有时会发生广播，所以我会写：

```
package com.example.testmbr;

import android.os.Bundle;
import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.util.Log;

public class MainActivity extends Activity  {
private static final String TAG = "MainActivity";
private MusicIntentReceiver myReceiver;

@Override protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    myReceiver = new MusicIntentReceiver();
}

@Override public void onResume() {
    IntentFilter filter = new IntentFilter(Intent.ACTION_HEADSET_PLUG);
    registerReceiver(myReceiver, filter);
    super.onResume();
}

private class MusicIntentReceiver extends BroadcastReceiver {
    @Override public void onReceive(Context context, Intent intent) {
        if (intent.getAction().equals(Intent.ACTION_HEADSET_PLUG)) {
            int state = intent.getIntExtra("state", -1);
            switch (state) {
            case 0:
                Log.d(TAG, "Headset is unplugged");
                break;
            case 1:
                Log.d(TAG, "Headset is plugged");
                break;
            default:
                Log.d(TAG, "I have no idea what the headset state is");
            }
        }
    }
}

@Override public void onPause() {
    unregisterReceiver(myReceiver);
    super.onPause();
}
} 
```

我之前推荐的 AudioManager.isWiredHeadsetOn() 调用自 API 14 以来已被弃用，因此我将其替换为从广播意图中提取状态。每次插入或拔出可能会有多个广播，这可能是因为连接器中的接触反弹。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T17:19:14.577

我没有处理过这个，但如果我正确阅读了文档，[`ACTION_AUDIO_BECOMING_NOISY`](https://developer.android.com/reference/android/media/AudioManager.html#ACTION_AUDIO_BECOMING_NOISY)是为了让应用程序知道音频输入可能会开始听到音频输出。当您拔下耳机时，手机的麦克风可能会开始拾取手机的扬声器，因此会收到消息。

另一方面，[`ACTION_SCO_AUDIO_STATE_UPDATED`](https://developer.android.com/reference/android/media/AudioManager.html#ACTION_SCO_AUDIO_STATE_UPDATED)旨在让您知道蓝牙设备的连接状态何时发生变化。

第二个可能是你想听的。

# php - 在括号内使用引号 - PHP / MySQL

> ID：13610260
> 
> 赞同：0
> 
> 时间：2012-11-28T16:51:50.380
> 
> 标签：php, mysql, row

你好，我读过一段时间，在括号内使用单引号而不是不这样做更安全，是真的吗？

```
echo $row[0];
echo $row[id]; 
```

或者

```
echo $row['0'];
echo $row['id']; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:53:53.397

是的，因为您可能有：

```
define("id", "something else");

$row = array(
    "id" => 5,
    "something else" => "foobar"
);

echo $row["id"]; // 5
echo $row[id]; // foobar 
```

同样在`E_STRICT`模式下`$row[id]`会给你一个警告。这就是为什么您应该始终使用`E_STRICT`on 进行开发的原因。通过将其放置`error_reporting(E_ALL | E_STRICT);`在脚本的顶部来打开它。

`$row[0]`并且`$row["0"]`是等效的，您可以根据需要使用它们（索引数组与关联数组？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:09:50.677

*   你的第一个例子： `[0]`或`['0']`

    这不需要引号，因为键是数字的。

*   你的第二个例子： `[id]`或`['id']`

    这绝对应该有引号。不带引号的变体是 PHP 中的一个遗留特性，真的不应该再使用了。

    如果您不包含引号，您实际上是在告诉 PHP 使用`define()`named `id`，而不是 string `id`。在大多数情况下，这是可行的，因为 PHP 有一个特性，如果你指定一个不存在的定义，它会假定字符串等价，而不是抛出错误。（这是 PHP 最糟糕的设计决策之一，但这里无关紧要）

    关键是，在大多数情况下，无论哪种方式，它都会做同样的事情。不带引号的版本会运行得更慢，因为它需要搜索定义并在找不到时进行字符串转换，但不会慢很多；你不会注意到它。

    真正的危险是，如果您在代码的其他地方创建了同名的定义——例如：

    ```
     define('id','blahblah'); 
    ```

    现在 PHP 将`$var[id]`被视为 being `$var['blahblah']`，这将破坏您的代码。

    知道何时使用定义并不总是那么容易——特别是如果你包含第三方库——这意味着虽然你的代码没有引号现在可以工作，但不知道什么时候它可能会突然中断，没有你能够找出原因。

    因此，建议在数组元素名称为字符串时*始终使用引号。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T17:00:37.933

引号表示字符串文字，而未加引号表示整数或常量。

如果您要在关联数组中查找命名数组键，通常您希望使用字符串文字。IE`$row['id']`而不是`$row[id]`（这不应该工作）。

如果您正在寻找数字数组键，则字符串将被转换为整数。所以`$row['0']`应该评估为`$row[0]`. 不过，我认为使用实际整数 ( `$row[0]`) 是一种更好的做法。我不确定变量转换是否会影响实际性能，但最好使用正确的数据类型以提高可读性和准确性。

# css - 加载条件样式表是否会导致额外的服务器请求

> ID：13610261
> 
> 赞同：0
> 
> 时间：2012-11-28T16:51:53.247
> 
> 标签：css, internet-explorer, httprequest

我的代码中有以下内容：

```
<!--[if IE 6]>
    <link rel="stylesheet" type="text/css" href="ie6_Stylesheet.css" />
<![endif]-->
<!--[if IE 7]>
    <link rel="stylesheet" type="text/css" href="ie7_Stylesheet.css" />
<![endif]-->
<!--[if IE 8]>
    <link rel="stylesheet" type="text/css" href="ie8_Stylesheet.css" />
<![endif]-->
<!--[if IE 9]>
    <link rel="stylesheet" type="text/css" href="ie9_Stylesheet.css" />
<![endif]--> 
```

我可以看到这些行显示在我所有不同浏览器的源代码中，但我想知道的是它们是否真的减慢了任何非 IE 浏览器的页面加载速度？

我几乎可以肯定它不会，但我无法确定地找到，而且我已经被其他人告知它确实会导致服务器请求

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:55:08.837

这些标签只有 IE 才能理解

其他浏览器认为它们是 html 注释：

```
<!-- Note this is an html comment --> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:55:37.747

您是对的，条件样式表*不会*在任何其他浏览器中加载，除了条件匹配的 IE 版本。条件样式表不会为非 IE 浏览器生成任何额外的页面请求。

# ssrs-2008 - Expression 中的 CountDistinct 为 SSRS 2008 计数添加了 +1

> ID：13610262
> 
> 赞同：0
> 
> 时间：2012-11-28T16:51:54.820
> 
> 标签：ssrs-2008

我在使用 SSRS 表达式时遇到问题。我正在尝试对 9 月结束的记录进行不同的记录计数。我正在使用以下代码：

```
=(countdistinct(IIF(Fields!dischargemonth.Value = "September" and Fields!RowNumber.Value = 1, Fields!AuthId.Value, 0))) 
```

正确的计数应该是 28。我仔细检查了查询，只有 28 条记录，但我在 SSRS 中的输出结果显示为 29。

我试过使用“COUNT”，但我只想要不同的记录数，这样就行不通了。关于为什么会发生这种情况的任何想法？

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:07:01.140

匹配记录的计数是否为 28，加上您为不匹配记录分配的零计数是否为 1。除非您的匹配记录之一具有 Fields!AuthId.Value = 0，否则它将为 29。如果您知道 Fields!AuthId.Value 永远不会为零，只需从整体结果中减去一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:15:11.017

感谢您的洞察力戴夫。所以我没有使用“0”，而是将代码更新为

```
=(countdistinct(IIF(Fields!dischargemonth.Value = "September" and Fields!RowNumber.Value = 1, Fields!AuthId.Value, "Nothing"))) 
```

现在计数显示 28，这是正确的。

# c++ - 是否有不使用 QT 的 C++ 的 WebKit？

> ID：13610265
> 
> 赞同：2
> 
> 时间：2012-11-28T16:52:08.863
> 
> 标签：c++, webkit

正如标题所说，我正在寻找一个可以在 C++ 应用程序中使用的 WebKit。我不想使用 QT，因为如果你想创建一个商业应用程序，你必须付出很多。我玩过 WebKit .NET 和 Gecko，但我想要 WebKit for C++（不是 Visual C++，因为我不想依赖 .NET 框架）没有框架（可能是表单控件）？

谢谢内森

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T17:01:08.590

如果您动态链接到它，则不需要商业 Qt 许可证。[它是 LGPL。](https://stackoverflow.com/a/7698580/35440)

只要您使用未经修改的 Qt DLL 并避免将其静态直接链接到主可执行文件，它就是使用该库的符合 LGPL 的方式。您仍然可以使用安装程序捆绑和重新分发 DLL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T17:07:18.933

[http://trac.webkit.org/wiki/SuccessfulPortHow](http://trac.webkit.org/wiki/SuccessfulPortHowTo)要查看将 Webkit 移植到您最喜欢的 GUI 工具包的指南。您可能需要从源代码构建 Webkit 才能使其工作，或者使用它的几个可用端口（请参阅此处[http://trac.webkit.org/wiki/](http://trac.webkit.org/wiki/)）

# python - Python 3，多个 str 函数

> ID：13610272
> 
> 赞同：0
> 
> 时间：2012-11-28T16:52:33.143
> 
> 标签：python, python-3.x

据我所知，Python不支持函数重载，但是在Python文档中

[链接到 py3k 文档](http://docs.python.org/3/library/functions.html#func-str)

似乎有两种不同的 str 方法，`str(object='')`并且`str(object=b'', encoding='utf-8', errors='strict')`

这些功能是如何定义的？什么时候调用第一个，什么时候调用第二个？

我可以创建自己的`f(o='')`函数`f(o=b'')`（有意义）吗？

**更新**

的输出`str(b'abc','utf-8')`是`abc`但是

输出`str(b'abc')`为`b'abc'`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T16:55:39.293

不，python 不支持重载*，因为它不需要*. Python 文档经常显示调用方法的不同方式来说明不同的用途，但只有一个`str()`可调用的（在这种情况下是一种类型）。

在这种情况下，`str()`接受多个关键字参数，如果未指定，则具有默认值。然后，该`str()`类型使用那些额外的关键字参数（如果指定）来解释`b''`字节字符串参数。如果没有传入关键字参数，则`str()`行为不同。

换句话说，`str()`根据是否提供了关键字参数来调整它的行为。如果是这种情况并且第一个参数是字节串或字节数组，它会将该参数解码为 un​​icode 文本，使用额外的关键字参数来控制解码过程。

您可以定义自己的函数，该函数的行为方式与关键字参数相同，检查第一个参数的类型：

```
def f(o, encoding=None, errors=None):
    if encoding is None and errors is None:
        return o.__str__()

    if isinstance(o, str):
        raise TypeError('decoding str is not supported')

    if not isinstance(o, (bytes, bytesarray)):
        raise TypeError('coercing to str: need bytes, bytearray'
             'or buffer-like object, %s found' % type(o).__name__)
    return o.decode(encoding, errors) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:55:25.493

不，只有一个`str()`。

为了清楚起见（即演示不同的用例），它显示了两次。

您可以通过使用默认参数、位置参数和关键字参数在代码中实现类似的效果。请参阅[Python 普通参数与关键字参数](https://stackoverflow.com/questions/1419046/python-normal-arguments-vs-keyword-arguments)

# c - 删除二叉树中的所有内容，产生随机分段错误

> ID：13610273
> 
> 赞同：0
> 
> 时间：2012-11-28T16:52:35.900
> 
> 标签：c, recursion, binary-tree

所以我有一个完整的程序，可以将值添加到二叉树中。然后它可以按前序、后序和按顺序列出值。现在一切都很好，除了当我运行我的`deleteAll`函数时它会使程序不稳定，并且在添加值或列出树时随机添加它会产生分段错误。我不完全确定出了什么问题，我对**C**还是新手，无法掌握导致它的原因。它显然在`deleteAll`函数中，所以在这里......

```
void deleteAll(node* *hd){
    node* curr = *hd;
    if(curr->left != NULL){
        deleteAll(&curr->left);
    }
    if(curr->right != NULL){
        deleteAll(&curr->right);
    }
    free(curr);
} 
```

在我删除所有并以任何顺序列出后，它会给我诸如 321294124 之类的值，你知道当它不存在时给出的值。所以我认为这没关系，但也许这就是问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:58:31.757

```
void deleteAll(node* *hd){
if(*hd != NULL){
    node* curr = *hd;
    if(curr->left != NULL){
        deleteAll(&curr->left);
    }
    if(curr->right != NULL){
        deleteAll(&curr->right);
    }
    free(curr);
    *hd = NULL;
}
} 
```

想通了，谢谢arrowdodger。

# javascript - 正则表达式使用 jQuery 在新窗口中打开主机名中不包含“xyz”的链接？

> ID：13610280
> 
> 赞同：1
> 
> 时间：2012-11-28T16:52:52.440
> 
> 标签：javascript, jquery, regex

我需要添加一个 jQuery 检查，它将启动我网站上的任何链接到外部网站。我该如何执行以下操作：

查找主机名中不包含“xyz”的任何锚链接。例如：

*   `http://xyz.com`
*   `http://asfasdfadsfadsf.xyz.com`

它必须忽略主机名后包含 xyz 的任何链接：

*   `http://someothersite.com/xyz`

> ```
> $('a[href^="http://%xyz%"]').filter(function() {
>   return this.hostname && this.hostname !== location.hostname;
> }).attr('target', '_blank'); 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:01:19.087

```
!(/https?:\/\/[^\/]*xyz.*/i.test(link)) 
```

请参阅**[此演示](http://jsfiddle.net/dgy6T/)**。

* * *

[JSHint](http://www.jshint.com)示例：

```
/*global $:false */

(function() {

  "use strict";

  $('a').filter(function() {
    return !(/https?:\/\/[^\/]*xyz.*/i.test($(this).attr('href')));
  }).text("***");

}()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:59:10.990

一种方法是获取所有锚链接并通过每个`href`应用此正则表达式`(?:xyz.)`。如果存在正则表达式，这意味着 URL 是错误的，则将其他所有内容推入数组中，然后对它们做任何你想做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T18:23:16.413

这可能会做到。您可能可以进行一些优化：

```
$("a").each(function(idx, link) {
    var href = link.href;
    if (!href) {return;}
    href = href.split("//");
    if (href.length < 2) {return;}
    href = href[1];
    var index = href.indexOf("/");
    if (index > -1) {
        href = href.substring(0, index);
    }
    if (!/\bxyz\b/g.test(href)) {
        link.target = "_blank";
    }
}); 
```

# c# - 从数据集中获取数据

> ID：13610281
> 
> 赞同：1
> 
> 时间：2012-11-28T16:52:57.927
> 
> 标签：c#, sql, web

我正在尝试使用数据集和存储过程从 sql 表中获取数据，在执行过程后数据集应该只包含一个值（我正在获取 id 号，id 号是我的 Costumers 表中的主键所以每个应该只有一个）。IsCostumerIDTaken 存储过程只返回它作为参数的 id。如果它找到它，它会返回它。如果没有，我不知道它会做什么，也许返回 0。

```
 public static bool IsCostumerIDTaken(string id)
    {
        SqlConnection conObj = GetConnection();
        SqlCommand cmdObj = new SqlCommand("IsCostumerIDTaken", conObj);
        cmdObj.CommandType = CommandType.StoredProcedure;
        cmdObj.Parameters.Add("@ID", SqlDbType.NVarChar).Value = id;        
        SqlDataAdapter da = new SqlDataAdapter(cmdObj);
        DataSet ds = new DataSet();
        da.Fill(ds);
        if (ds.Tables[0].Rows[0][0].ToString() != id)
            return false;
        return true;       
    } 
```

在我的一个页面中执行此命令后

```
Label1.Text = DAL.IsCostumerIDTaken(TextBox1.Text).ToString(); 
```

我收到此错误：

> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.IndexOutOfRangeException：位置 0 处没有行。
> 
> ```
> Source Error:  
> Line 73:         DataSet ds = new DataSet();
> Line 74:         da.Fill(ds);
> Line 75:         if (ds.Tables[0].Rows[0][0].ToString() != id)
> Line 76:             return false;  
> Line 77:         return true; 
> ```

这里到底有什么问题？我没有正确地从数据集中提取数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:56:19.867

如果没有数据，就没有行。你需要测试`ds.Tables[0].Rows.Count`

更换这部分

```
if (ds.Tables[0].Rows[0][0].ToString() != id)
            return false;
        return true; 
```

有了这个：

```
return ds.Tables[0].Rows.Count > 0 && ds.Tables[0].Rows[0][0].ToString().Equals(id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:59:00.223

正确的。您没有正确提取数据。这对我来说是不可能的，但在这里的某个地方......

```
ds.Tables[0].Rows[0][0] 
```

...你得到一个空对象。我希望查询返回空，所以最后一个`[0]`是试图索引 a `null`。

如果您有足够的数据库权限，则可以在数据库上运行 SQL Server Profiler 并查看带有正在执行的确切参数的确切查询。从那里，您应该能够确定问题出在您的存储过程还是您的 C# 代码上。

# mysql - MySQL 查询以计算产品 ID 库存水平的增量/减量余额

> ID：13610291
> 
> 赞同：2
> 
> 时间：2012-11-28T16:53:33.850
> 
> 标签：mysql

我有一个表“日志”，我在其中跟踪库存变化。我用贷方表示库存增加，借方表示减少（我认为从会计原则来看，这是倒退的，但这是客户想要的）。

我需要计算每个产品的借方和贷方余额（由 upc 字段表示），就像一个运行总计 - 换句话说，我想显示按时间戳（或默认顺序）排序的日志，并且每次任何产品都有增量或减量，显示由于该特定增量或减量而导致的当时的库存余额。

我已经能够使用此查询来演示这一点，但只能通过在 where 子句中添加其 UPC 代码作为条件来挑选出特定产品：

```
SELECT 
    l.id,
    l.upc,
    l.credit,
    l.debit,
    @bal := @bal + credit - debit AS balance,
    l.timestamp
FROM log l, (SELECT @bal := 0) b
where upc = '677797003424'; 
```

我[这里有一个小提琴](http://www.sqlfiddle.com/#!2/b4c8b/4/0)

问题是当我取出 where 子句时，计算并没有考虑到它只应该分别对每组 UPC 代码进行操作。

经过一番搜索，我遇到了[这个问题](https://stackoverflow.com/questions/10294393/calculate-the-each-productinkcode-stock)，答案看起来与我可能需要的类似，但是，它与 MySQL 无关，而是与 SQL Server 相关。另外，我不确定结果是否是我上面提到的日志/跟踪格式。具体来说，我要避免的是在每一行上显示最终余额。如果库存有 999 件产品，然后递减 4 次后，库存有 995，则表示记录递减量的每条记录不应显示计算出的 995 余额，而是第一个递减量日志应显示结果余额998，第二个应该显示 997，等等。

- - 编辑 - -

有没有办法在不使用变量的情况下做到这一点？另外，是否可以将日志按时间戳排序，以便产品全部混合，而不是一起订购？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:19:54.797

这对你有用吗？

```
SELECT 
    l.id,
    l.upc,
    l.credit,
    l.debit,
    @bal := IF(@previous=l.upc, @bal + l.credit - l.debit, l.credit - l.debit) AS balance,
    @previous := l.upc,
    l.timestamp
FROM `log` l, (SELECT @bal := 0, @previous='') b
ORDER BY l.upc ASC, l.timestamp ASC 
```

编辑：

为了在@bal 中获得负值，您可以执行以下操作

```
SELECT 
    l.id,
    l.upc,
    l.credit,
    l.debit,
    @bal := IF(@previous=l.upc, @bal + l.credit - l.debit, l.credit - l.debit) AS balance,
    @previous := l.upc,
    l.timestamp
FROM `log` l, (SELECT @bal := CAST(0 AS DECIMAL), @previous='') b
ORDER BY l.upc ASC, l.timestamp ASC 
```

# ruby-on-rails - Rails：简化复杂的部署过程

> ID：13610292
> 
> 赞同：0
> 
> 时间：2012-11-28T16:53:40.190
> 
> 标签：ruby-on-rails, ruby, deployment, setup-deployment

这是概述。我在本地 MacBook Pro 机器上使用 rails 附带的标准 webBrick 服务器开发了一个 ruby​​ on rails 应用程序。所有资产都已到位，所有 gem 都安装在应用程序中。我有一个 1&1 的帐户，他们有一个专用的 L2 Linux 服务器来满足 Ruby on Rails 应用程序的需求。我想知道的是，从我现在所拥有的情况来看，我如何在本地机器上以开发模式将其传输/部署到 L2 Linux 服务器上。即我需要什么细节/凭证/软件来完成这个？我的 rails 应用程序使用 MYSQL 数据库。Rails 版本是 3.2.8，ruby 版本是 Ruby 1.8.7

我希望这个问题是完全可以理解的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:03:17.947

虽然它取决于您的应用程序，但主要依赖项是：Web 服务器、数据库和用户名，以及可能访问源代码控制。

您需要初始化环境：

*   设置到 Rails 的 Web 服务器连接，例如 Apache 或 Nginx 和 Passenger
*   创建部署用户
*   安装 MySQL 并设置密码
*   设置 ssh
*   连接到源代码控制
*   等等

然后更改各种文件`config`并`config/environments`使用这些值并将它们签入。然后您需要从源代码管理中提取代码，运行 rake:db_setup 命令，也许还有其他命令。

我鼓励您使用 capistrano 进行部署——虽然不是必需的，但它被广泛用于此目的，并且高度可配置。

查看[Railscasts.com 上的此页面，该页面](http://railscasts.com/episodes/335-deploying-to-a-vps?view=similar)提供了有关此主题的大量信息。

# java - 如何让 rJava 0.9-3 在 OS X 10.7.4 和 Oracle Java 1.7 上工作？

> ID：13610293
> 
> 赞同：7
> 
> 时间：2012-11-28T16:53:38.607
> 
> 标签：java, macos, r, rjava

有没有人设法让 rJava 0.9-3 在 OS X 10.7.4 和 Oracle Java 1.7 上工作？

```
R version 2.15.2 (2012-10-26) -- "Trick or Treat" Platform
x86_64-apple-darwin9.8.0/x86_64 (64-bit)

java version "1.7.0_09"
Java(TM) SE Runtime Environment (build 1.7.0_09-b05)
Java HotSpot(TM) 64-Bit Server VM (build 23.5-b02, mixed mode) 
```

我已经使用 install.packages 函数和命令行安装 R 2.15.2 安装了 rJava。我没有收到任何错误。

```
$ R CMD INSTALL rJava
* installing to library ‘/Library/Frameworks/R.framework/Versions/2.15/Resources/library’
* installing *binary* package ‘rJava’ ...

* DONE (rJava)
$ 
```

如果我使用 Java Preferences 将 1.7 放在列表的首位，但将 1.6 保留为“on”，则 rJava 总是从 1.6 开始。

如果我使用 Java Preferences 将 1.7 放在首位并关闭 1.6，rJava 会这样做：

```
> library(rJava)
> .jinit()
JavaVM: requested Java version ((null)) not available. Using Java at "" instead.
JavaVM: Failed to load JVM: /bundle/Libraries/libserver.dylib
JavaVM FATAL: Failed to load the jvm library.
Error in .jinit() : JNI_GetCreatedJavaVMs returned -1
> 
```

但是，使用 system 函数，R 本身会找到 Java 1.7。

```
> system("java -version")
java version "1.7.0_09"
Java(TM) SE Runtime Environment (build 1.7.0_09-b05)
Java HotSpot(TM) 64-Bit Server VM (build 23.5-b02, mixed mode)
> 
```

1.7 是否需要 /System/Library/Java/JavaConfig.plist 中的特殊条目？

Versions 目录是否需要针对 1.7 进行调整？奇怪的是 Current 转到 A，最终以 1.7 结束，而 CurrentJDK 映射到 1.6

```
$cd /System/Library/Frameworks/JavaVM.framework/Versions/
$ls -la
total 64
drwxr-xr-x  11 root  wheel  374 Sep 26 10:10 .
drwxr-xr-x  11 root  wheel  374 Nov 26 09:24 ..
lrwxr-xr-x   1 root  wheel   10 Sep 26 10:09 1.4 -> CurrentJDK
lrwxr-xr-x   1 root  wheel   10 Sep 26 10:09 1.4.2 -> CurrentJDK
lrwxr-xr-x   1 root  wheel   10 Sep 26 10:09 1.5 -> CurrentJDK
lrwxr-xr-x   1 root  wheel   10 Sep 26 10:09 1.5.0 -> CurrentJDK
lrwxr-xr-x   1 root  wheel   10 Sep 26 10:09 1.6 -> CurrentJDK
lrwxr-xr-x   1 root  wheel   10 Sep 26 10:09 1.6.0 -> CurrentJDK
drwxr-xr-x   8 root  wheel  272 Nov 26 09:24 A
lrwxr-xr-x   1 root  wheel    1 Sep 26 10:09 Current -> A
lrwxr-xr-x   1 root  wheel   59 Sep 26 10:09 CurrentJDK -> /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents 
```

即使 R CMD javareconf 使用直接指向 1.7 文件或 /usr/bin/java 路径的路径运行，rJava 仍然无法找到或启动 Java 1.7。

1.7 需要设置 JAVA_LD_LIBRARY_PATH 变量吗？

```
Makeconf:JAVA = /usr/bin/java
Makeconf:JAVAC = /usr/bin/javac
Makeconf:JAVAH = /usr/bin/javah
Makeconf:JAVA_HOME = /Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/jre
Makeconf:JAVA_LD_LIBRARY_PATH = 
Makeconf:JAVA_LIBS = -framework JavaVM
Makeconf:JAVA_CPPFLAGS = -I$(JAVA_HOME)/include

Makeconf:JAR = /Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/bin/jar
Makeconf:JAVA = /Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/jre/bin/java
Makeconf:JAVAC = /Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/bin/javac
Makeconf:JAVAH = /Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/bin/javah
Makeconf:JAVA_HOME = /Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/jre
Makeconf:JAVA_LD_LIBRARY_PATH = 
Makeconf:JAVA_LIBS = -framework JavaVM
Makeconf:JAVA_CPPFLAGS = -I$(JAVA_HOME)/include 
```

谢谢你的帮助

**更新1：**

我在 stats-rosuda-devel 列表中询问了这个问题，并收到了 Simon Urbanek 的以下回复。我不认为 Windows 和 Linux 在需要从源代码编译 Java 1.7 方面存在相同的问题，因为我们在 Windows 和 Linux 上运行它并且不必编译 rJava。一旦我有机会尝试这个，我会报告：

> 您正在使用针对系统 Java（在您的系统上是 1.6）编译的*二进制文件- 所以如果您删除 Java 1.6，您将破坏它。*如果要使用 Java 1.7，则必须为 Java 1.7 重新配置 R 并重新编译 rJava 以使用这些设置。请注意，Oracle 的 Java 与系统 Java (/System/Library/Frameworks/JavaVM.framework) 位于完全不同的位置 (/Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk)，因此不可互换。
> 
> 此外，Oracle Java 1.7 不是一个框架，它是一团乱麻，并不是真正为 OS X 设计的，所以你必须像在 Linux 上那样手动设置它——这非常痛苦。它还需要覆盖......所以如果你真的想进入兔子洞，这对我有用：
> 
> ```
> JAVA_LD_LIBRARY_PATH=/Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/jre/lib/server
> JAVA_LIBS='-L/Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/jre/lib/server -ljvm'
> JAVA_CPPFLAGS='-I/Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/include -I/Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/include/darwin'
> R64 CMD javareconf 
> ```
> 
> 然后从源代码安装 rJava (R64 -> install.packages("rJava",type='source'))。请注意，它仅适用于 64 位，因此仅适用于 64 位 R。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-03T05:18:09.107

这对我有用：

情况是我的 Java 目录配置不正确。

1）第一次运行：`sudo R CMD javareconf`。它应该如下：

```
Java interpreter : /usr/bin/java
Java version     : 1.7.0_40
Java home path   : /Library/Java/JavaVirtualMachines/jdk1.7.0_40.jdk/Contents/Home/jre
Java compiler    : /usr/bin/javac
Java headers gen.: /usr/bin/javah
Java archive tool: /usr/bin/jar
Non-system Java on OS X

trying to compile and link a JNI progam 
detected JNI cpp flags    : -I$(JAVA_HOME)/../include -I$(JAVA_HOME)/../include/darwin
detected JNI linker flags : -L$(JAVA_HOME)/lib/server -ljvm
llvm-gcc-4.2 -arch x86_64 -std=gnu99 -I/Library/Frameworks/R.framework/Resources/include -DNDEBUG -I/Library/Java/JavaVirtualMachines/jdk1.7.0_40.jdk/Contents/Home/jre/../include -I/Library/Java/JavaVirtualMachines/jdk1.7.0_40.jdk/Contents/Home/jre/../include/darwin -I/usr/local/include    -fPIC  -mtune=core2 -g -O2  -c conftest.c -o conftest.o
llvm-gcc-4.2 -arch x86_64 -std=gnu99 -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -L/usr/local/lib -L/usr/local/lib -o conftest.so conftest.o -L/Library/Java/JavaVirtualMachines/jdk1.7.0_40.jdk/Contents/Home/jre/lib/server -ljvm -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation

JAVA_HOME        : /Library/Java/JavaVirtualMachines/jdk1.7.0_40.jdk/Contents/Home/jre
Java library path: $(JAVA_HOME)/lib/server
JNI cpp flags    : -I$(JAVA_HOME)/../include -I$(JAVA_HOME)/../include/darwin
JNI linker flags : -L$(JAVA_HOME)/lib/server -ljvm
Updating Java configuration in /Library/Frameworks/R.framework/Resources
Done. 
```

2）在R中，运行：`install.packages("rJava",type='source')`。安装应返回 DONE(rJava)。请注意，我必须设置

```
JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.7.0_40.jdk/Contents/Home 
```

当我需要以 root 身份启动 R 时：sudo R。要以普通用户身份运行，请使用

```
JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.7.0_40.jdk/Contents/Home/jre 
```

我碰巧没有将上述 /usr/bin/java* 的符号链接设置为 Java 1.7 中的相应符号链接（而是指向 1.6 版），并从那里得到了所有的挫败感。链接应该是这样的：（看起来 R 中只需要 java、javac、javah 和 jar）。

```
$ ls -l /usr/bin/ja*
lrwxr-xr-x  1 root  wheel  71 Oct  3 11:44 /usr/bin/jar -> /Library/Java/JavaVirtualMachines/jdk1.7.0_40.jdk/Contents/Home/bin/jar
lrwxr-xr-x  1 root  wheel  77 Oct  3 12:14 /usr/bin/jarsigner -> /Library/Java/JavaVirtualMachines/jdk1.7.0_40.jdk/Contents/Home/bin/jarsigner
lrwxr-xr-x  1 root  wheel  72 Oct  3 11:44 /usr/bin/java -> /Library/Java/JavaVirtualMachines/jdk1.7.0_40.jdk/Contents/Home/bin/java
lrwxr-xr-x  1 root  wheel  73 Oct  3 11:42 /usr/bin/javac -> /Library/Java/JavaVirtualMachines/jdk1.7.0_40.jdk/Contents/Home/bin/javac
lrwxr-xr-x  1 root  wheel  75 Oct  3 12:15 /usr/bin/javadoc -> /Library/Java/JavaVirtualMachines/jdk1.7.0_40.jdk/Contents/Home/bin/javadoc
lrwxr-xr-x  1 root  wheel  73 Oct  3 11:44 /usr/bin/javah -> /Library/Java/JavaVirtualMachines/jdk1.7.0_40.jdk/Contents/Home/bin/javah
lrwxr-xr-x  1 root  wheel  73 Oct  3 12:15 /usr/bin/javap -> /Library/Java/JavaVirtualMachines/jdk1.7.0_40.jdk/Contents/Home/bin/javap
lrwxr-xr-x  1 root  wheel  74 Oct  3 12:15 /usr/bin/javaws -> /Library/Java/JavaVirtualMachines/jdk1.7.0_40.jdk/Contents/Home/bin/javaws 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-25T22:11:50.543

终于，有些东西奏效了！

Simon Urbanek：您能否将这些说明放在 rJava 网站/cran 安装说明上...？这是我第一次进入这个兔子洞，我相信我不是唯一一个。

```
JAVA_LD_LIBRARY_PATH=/Library/Java/JavaVirtualMachines/jdk1.8.0_77.jdk/Contents/Home/jre/lib/server JAVA_LIBS='-L/Library/Java/JavaVirtualMachines/jdk1.8.0_77.jdk/Contents/Home/jre/lib/server -ljvm' JAVA_CPPFLAGS='-I/Library/Java/JavaVirtualMachines/jdk1.8.0_77.jdk/Contents/Home/include -I/Library/Java/JavaVirtualMachines/jdk1.8.0_77.jdk/Contents/Home/include/darwin' R CMD javareconf
Java interpreter : /Library/Java/JavaVirtualMachines/jdk1.8.0_77.jdk/Contents/Home/jre/bin/java
Java version     : 1.8.0_77
Java home path   : /Library/Java/JavaVirtualMachines/jdk1.8.0_77.jdk/Contents/Home
Java compiler    : /Library/Java/JavaVirtualMachines/jdk1.8.0_77.jdk/Contents/Home/bin/javac
Java headers gen.: /Library/Java/JavaVirtualMachines/jdk1.8.0_77.jdk/Contents/Home/bin/javah
Java archive tool: /Library/Java/JavaVirtualMachines/jdk1.8.0_77.jdk/Contents/Home/bin/jar
System Java on OS X

trying to compile and link a JNI program
detected JNI cpp flags    : -I/Library/Java/JavaVirtualMachines/jdk1.8.0_77.jdk/Contents/Home/include -I/Library/Java/JavaVirtualMachines/jdk1.8.0_77.jdk/Contents/Home/include/darwin
detected JNI linker flags : -L/Library/Java/JavaVirtualMachines/jdk1.8.0_77.jdk/Contents/Home/jre/lib/server -ljvm
clang -I/Library/Frameworks/R.framework/Resources/include -DNDEBUG -I/Library/Java/JavaVirtualMachines/jdk1.8.0_77.jdk/Contents/Home/include -I/Library/Java/JavaVirtualMachines/jdk1.8.0_77.jdk/Contents/Home/include/darwin -I/usr/local/include -I/usr/local/include/freetype2 -I/opt/X11/include    -fPIC  -Wall -mtune=core2 -g -O2  -c conftest.c -o conftest.o
clang -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -L/Library/Frameworks/R.framework/Resources/lib -L/usr/local/lib -o conftest.so conftest.o -L/Library/Java/JavaVirtualMachines/jdk1.8.0_77.jdk/Contents/Home/jre/lib/server -ljvm -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation

JAVA_HOME        : /Library/Java/JavaVirtualMachines/jdk1.8.0_77.jdk/Contents/Home
Java library path: /Library/Java/JavaVirtualMachines/jdk1.8.0_77.jdk/Contents/Home/jre/lib/server
JNI cpp flags    : -I/Library/Java/JavaVirtualMachines/jdk1.8.0_77.jdk/Contents/Home/include -I/Library/Java/JavaVirtualMachines/jdk1.8.0_77.jdk/Contents/Home/include/darwin
JNI linker flags : -L/Library/Java/JavaVirtualMachines/jdk1.8.0_77.jdk/Contents/Home/jre/lib/server -ljvm
Updating Java configuration in /Library/Frameworks/R.framework/Resources
override rw-r--r--  root/admin for /Library/Frameworks/R.framework/Resources/etc/Makeconf? (y/n [n]) y
override rw-r--r--  root/admin for /Library/Frameworks/R.framework/Resources/etc/ldpaths? (y/n [n]) y
Done.

R CMD INSTALL rJava_0.9-9.tar.gz 
```

# javascript - 访问 .js 文件

> ID：13610297
> 
> 赞同：0
> 
> 时间：2012-11-28T16:53:57.883
> 
> 标签：javascript

我们有一个内部应用程序，它使用 google map api 创建地图工具提示。当访问 google 的映射 js 文件被阻止时，网站上的其余 javascript 也会中断。如果无法访问，有没有办法阻止加载 js 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:58:46.587

首先，我建议使用 require.js 以更智能的方式加载 js 脚本。

但是，如果您不想这样做，也许在您的脚本标签中添加“异步”属性就可以了。

# c - 2 位数的总和以及每个总和的所有组合

> ID：13610304
> 
> 赞同：0
> 
> 时间：2012-11-28T16:54:07.867
> 
> 标签：c

使用数字 1 到 9，不重复相同的数字，我制作了这个总和表，其中包括将两个数字加在一起以及每个总和的所有可能组合。我正在尝试用 C 编写一个程序，通过将 2 个数字和它们的每个组合相加来找到所有总和，然后打印出这个图表。我正在尝试使用 for 循环来编写这个程序并且已经卡住了。我可以打印出第一个初始总和，但它正在得到让我现在难倒的组合。我不知道我是否走在正确的轨道上。任何建议和帮助将不胜感激。我的图表，到目前为止编写的代码，以及当前代码的打印输出如下。

这就是我希望我的程序执行的操作：

此图表列出了由 2 位数字组成的所有总和以及构成每个总和的所有可能组合。

```
 2 Digit Sums
Sum Combinations
3   1+2
4   1+3
5   1+4, 2+3
6   1+5, 2+4
7   1+6, 2+5, 3+4
8   1+7, 2+6, 3+5
9   1+8, 2+7, 3+6, 4+5
10  1+9, 2+8, 3+7, 4+6
11  2+9, 3+8, 4+7, 5+6
12  3+9, 4+8, 5+7
13  4+9, 5+8, 6+7
14  5+9, 6+8
15  6+9, 7+8
16  7+9
17  8+9 
```

这是我能够成功编写的代码：

```
/* Thus program uses the digits 1 - 9 to find all possible sums composed of two
digits, non repeating, and all possible combinations of digits to obain the sums. */
#include<stdio.h>
int main(void)
{
    int S, A, B;
    A = 1;
    B = A + 1;
    S = A + B;
    printf("\t\t2 Digit Sums\n\n");
    printf("Sum\tCombinations\n");
    for(B; B <= 8; ++B)
    {
        S = A + B;
        printf("%d\t%d + %d\n", S, A, B);
    }
    for(A; (A < B && A !=B); ++A)
    {
        S = A + B;
        printf("%d\t%d + %d\n", S, A, B);
    }       
    return(0);
} 
```

这是我的代码的输出：

```
 2 Digit Sums
Sum     Combinations
3       1 + 2
4       1 + 3
5       1 + 4
6       1 + 5
7       1 + 6
8       1 + 7
9       1 + 8
10      1 + 9
11      2 + 9
12      3 + 9
13      4 + 9
14      5 + 9
15      6 + 9
16      7 + 9
17      8 + 9
Press any key to continue... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:18:38.777

如果问题的范围像这样有限，您可以通过蛮力解决它 - 只需尝试一下即可。只有 17 * 9 * 9 种变体可供检查，实际上并不多。

三个循环（伪代码）：

```
for each value of possible_sum (2-17)

    print possible_sum

    for each value of addend1 (1-9)

       for each value of addend2 (1-9) 

       if ( addend1 + addend2 = possible_sum ) 
       then

           print addend1 and addend2

       end if

       end for addend2

    end for addend1

end for possible_sum 
```

留给您的问题是弄清楚如何消除对称解决方案（4+5 和 5+4），如果您查看解决方案中的模式，这很容易（注意第一个加数与第二个加数的关系）。如果你仔细考虑的话，有很多方法可以加速这种蛮力方法。

对于更大的数据集（“所有三位加数......”），将需要更好的算法。

# c - 块设备的缓存 IO

> ID：13610305
> 
> 赞同：0
> 
> 时间：2012-11-28T16:54:10.310
> 
> 标签：c, linux, caching

想象一下，我想为我的应用程序使用一些 HDD/SSD 作为原始块设备（没有文件系统）。

但是，对读/写块执行一些 RAM 缓存会很好，一种可能的方法是执行应用程序级缓存 - 但是用于缓存的 RAM 量显然应该在我可以使用之前显式释放用于其他目的。

有没有办法将未使用的内存用于此类缓存，就像对文件 IO 所做的那样？
为此需要内核黑客攻击吗？

# jquery - JQuery 调用 Knockout ViewModel

> ID：13610307
> 
> 赞同：1
> 
> 时间：2012-11-28T16:54:11.317
> 
> 标签：jquery, knockout.js, single-page-application

我几乎是 Knockout 的初学者经过一段时间的工作后，我发现了一个小问题（我正在尝试构建一个移动 SPA）：

如果我在我的项目中绑定 JQuery 和 Knockout，我的 ViewModel 会被调用两次：

```
 @{
        Layout=null;
    }

<head>
    <meta name="viewport" content="width=device-width" />
    <link rel="stylesheet" href="@Url.Content("~/Content/jquery.mobile-1.2.0.min.css")" />
    <link rel="stylesheet" href="@Url.Content("~/Content/Site.css")" />
    <script src="../../Scripts/jquery-1.8.3.js" type="text/javascript"></script>
    <script src="../../Scripts/jquery.mobile-1.2.0.js" type="text/javascript"></script>
     <script type="text/javascript">
         $(document).bind("mobileinit", function () {
             // As of Beta 2, jQuery Mobile's Ajax navigation does not work in all cases (e.g.,
             // when navigating from a mobile to a non-mobile page, or when clicking "back"
             // after a form post), hence disabling it.
             $.mobile.ajaxEnabled = false;
         });
    </script>

    @*jquery löst ViewMOdel aus*@

    <script type="text/javascript" src="../../Scripts/upshot.min.js"></script>
    <script type="text/javascript" src="../../Scripts/Upshot_Timeworx.js"></script>

    <script type="text/javascript" src="../../Scripts/knockout-2.2.0.js"></script>

</head>
<body>
    <!-- Login Seite -->
    <form data-bind="visible: userNotLoggedIn">  

        <label>Mandant</label><br /> <input data-bind="value: mandant" type="text" name="Mandant" />
        <br />
        <label>Benutzername</label><br /> <input data-bind="value: user" type="text" name="Benutzername"/>
        <br />
        <label>Passwort</label><br /> <input data-bind="value: password" type="password" name="Passwort"/>
        <br />

        <input type="button" value="Anmelden" name="login" data-bind="click: login" align="middle" />

    </form>
    <!-- ----------------------------------  -->

</body>
<script type="text/javascript">
    $(function () {
  function AppViewModel() {
            var self = this;
            var time = new Date();

            //Der User ist noch nicht angemeldet
            self.userNotLoggedIn = ko.observable(true);

            //Die Startseite wird versteckt
            self.showStart = ko.observable(false);

            //Die Detailseite wird versteckt 
            self.showDetails = ko.observable(false);

            //----------------------------------------------//
            //LogInSeite
            self.mandant = ko.observable("");
            self.user = ko.observable("");
            self.password = ko.observable("");

            //Überprüfen ob Passwort übereinstimmt
            self.login = function () {
                var pass = self.password();
                //alert(pass); Überprüfen ob das richtige passwort gespeichert wurde

                //!!!!!! ES MÜSSEN NOCH DIE ZUGANGSDATEN AUS DER DATENBANK EINGESETZT WERDEN!!!!!"
                if ((self.password() == "gregrech") && (self.user() == "Gregor")) {
                    //Code um die LogInSeite zu schließen 
                    //und die Startseite zu zeigen
                    //self.userNotLoggedIn(false);
                    self.showStart(true);
                    self.userNotLoggedIn(false);    //Die Log In Seite wird im Hintergrund versteckt

                }
                else {
                    alert("Username oder Passwort nicht korrekt");
                }

            }

            //Hier Endet der Knockout-Code für die LogIn-Seite
            //-------------------------------------------------------------------------------------------------------------------//

            //StartSeite
            self.details = function () {
                self.showStart(false);
                self.showDetails(true);
                //Funktioniert noch nicht
                //self.projectName = self.projectDetails.projectName();

            }
            //--------------------------------------------//

        ko.applyBindings(new AppViewModel);
    });
</script> 
```

如果我尝试运行此代码，则消息框形式的警报会出现两次，但只有 JQuery mobile 被绑定！

有谁知道我的问题是什么？如果我尝试运行此消息框表单，警报会出现两次，但只有 JQuery mobile 被绑定！

有谁知道我的问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:03:27.933

将 $(document).ready 与 jQuery 移动页面一起使用[是不可靠的](http://markdalgleish.com/2011/04/document-ready-for-jquery-mobile/)。这可能会导致您的问题。

在您当前的代码中，您通过调用隐式使用 .ready ：

```
$(function() { ... 
```

相反，使用[pageinit 事件](http://jquerymobile.com/demos/1.0rc2/docs/api/events.html)：

```
$('#aboutPage').live( 'pageinit', function(event) {
   // Create and bind your Knockout view model here.
}); 
```

# java - 了解卷积矩阵

> ID：13610315
> 
> 赞同：1
> 
> 时间：2012-11-28T16:54:27.167
> 
> 标签：java, image-processing, convolution

我正在学习卷积矩阵，我了解它们是如何工作的，但我不明白如何事先知道矩阵的输出会是什么样子。例如，假设我想为图像添加模糊效果，我可以猜测 10,000 多种不同的数字组合，然后才能得到正确的组合。

我确实知道这个公式会给我一个模糊的效果，但我不知道为什么。

```
float[] sharpen = new float[] {
     1/9f, 1/9f, 1/9f,
     1/9f, 1/9f, 1/9f,
     1/9f, 1/9f, 1/9f
}; 
```

任何人都可以向我解释这是如何工作的，或者给我一些文章来解释这一点吗？我想事先知道矩阵的可能输出是什么而不用猜测。

基本上我想知道为什么我们把那个号码放在文件里，为什么不把其他号码放在里面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T17:02:34.000

[这个链接](http://gimp.open-source-solution.org/manual/plug-in-convmatrix.html)用一个简单的例子解释了卷积矩阵是如何工作的。

您问题中的矩阵模糊图像的原因是因为每个像素都成为其所有周围像素的平均值。换句话说，位于动作区域中心的像素的新值等于以下公式：

```
new_value = (1/9)(top-left-neighbor)    + (1/9)(top-neighbor)    + (1/9)(top-right-neighbor) +
            (1/9)(left-neighbor)        + (1/9)(self)            + (1/9)(right-neighbor)     +
            (1/9)(bottom-left-neighbor) + (1/9)(bottom-neighbor) + (1/9)(bottom-right-neighbor) 
```

新值是 9 个像素的 1/9（包括原始像素值），结果是矩阵运算的 3x3 正方形的“平均值”。这种“平均”效果会创建您在应用矩阵后看到的模糊。

为卷积矩阵选择值完全取决于您想要达到的效果。请记住，矩阵应用于原始图像，新像素值被复制到目标图像。这意味着新值不会影响矩阵在相邻像素上的应用……只有原始值会被输入矩阵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T11:05:41.390

用java代码检查[卷积矩阵教程](http://xjaphx.wordpress.com/2011/06/22/image-processing-convolution-matrix/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T17:01:59.103

卷积操作基本上是一个过滤器：把它想象成一个遍历图像并在本地执行操作的工具。

您可以从阅读[本文](http://www.aishack.in/2010/08/image-convolution-examples/)开始，如果您想更深入地搜索 Wikipedia 中的卷积 - 欢迎了解一些真实的分析和信号处理理论知识，但如果您有兴趣，可以提出来。

# ruby - Ruby：使用未定义的变量

> ID：13610317
> 
> 赞同：0
> 
> 时间：2012-11-28T16:54:28.897
> 
> 标签：ruby, ruby-1.9.3

我怎么能做这样的事情？

```
1.9.3p286 :006 > defined? activated_flag
 => nil 
1.9.3p286 :007 > puts (activated_flat ? "activated!" : "no activated") 
```

我想在这里看到`no activated`，但我有：

```
NameError: undefined local variable or method `activated_flat' for main:Object
  from (irb):7
  from /Users/fguillen/.rvm/rubies/ruby-1.9.3-p286/bin/irb:16:in `<main>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:57:00.150

为什么不使用`defined?`：

```
puts (defined?(activated_flat) ? "activated!" : "no activated")
#=> no activated 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:57:15.763

我发现的最简单的方法是添加一个*后备初始化*，例如：

```
activated_flag ||= false 
```

但是当我在局部使用这个变量时，`erb`这个*后备初始化*看起来很难看。

# r - 将重音字符转换为 ascii 字符

> ID：13610319
> 
> 赞同：24
> 
> 时间：2012-11-28T16:54:32.830
> 
> 标签：r, transliteration

从 1600 万个字符串变量的向量中删除德语（或法语）重音的最佳方法是什么。

例如，“干燥综合征”变成“干燥综合征”

将单个字符转换为单个字符比音译更好，例如

ä => ae ö => oe ü => ue.

例如，使用正则表达式将是一种选择，但有更好的方法（R 包）吗？

`gsub('ü','u',gsub('ö','o',"Sjögren's syndrome ( über) "))`

有针对非 R 平台的 SO 解决方案，但对于 R 来说不是一个好的解决方案。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-28T17:09:11.000

用于`iconv`通过音译转换为 ASCII（如果支持）：

```
iconv(c("über","Sjögren's"),to="ASCII//TRANSLIT")
[1] "uber"      "Sjogren's" 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-04-27T18:35:20.933

链接的答案之一建议

```
library(stringi)
stri_trans_general("Zażółć gęślą jaźń", "Latin-ASCII")

[1] "Zazolc gesla jazn" 
```

# java - 如何使 JTextField 或 JFormattedTextField 仅在匹配 REGEX 模式时才接受输入？

> ID：13610320
> 
> 赞同：1
> 
> 时间：2012-11-28T16:54:32.940
> 
> 标签：java, swing, formatting, block, mask

我希望`JTextField`我的程序中的一些只接受新输入，如果它匹配特定的`Pattern`.

我知道`JFormattedTextField`'s 的面具，这**不是**我想要的。

对于每个新输入，只有在符合特定正则表达式模式流程的情况下，文本才应接受更改。

由于“需要正则表达式”的情况，这必须使用正则表达式完成，例如输入是否应该接收自身的一部分。举个例子可以更好地理解这一点：

假设我的正则表达式是`"(\\d{2})-bk\\d{3}\\.\\1"`. 输入 时`"123-bk001."`，下一个输入的字符必须等于第一组，这意味着只有当它们`123`分别等于 时，才应接受 3 个输入的字符。“456-bk404”的输入。将需要下一个字符来`"456"`代替。

我该怎么做？

* * *

## **编辑：**

这个例子只是为了说明没有正则表达式很难解决的一种情况，我的实际使用不限于此。因此，**如果可能的话**，答案应该是更广泛的可用性（如问题的标题），而不是特定于这个例子。

但是，如果这不可能，或者如果它比为少数（3-5）个不同情况实施特定解决方案更难，请随时告诉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:16:28.860

*   用于[`DocumentFilter`](https://stackoverflow.com/questions/9429459/get-a-key-from-jtextarea/9430683#9430683)删除或替换定义的不需要的字符（也许可以使用 `NavigationFilter.Bias`）

*   你可以定义自己[`InputMask`的`InputVerifier`](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html#maskformatter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:02:25.820

我的直觉方法是使用 DocumentFilter 并根据测试字符串的长度修改您正在测试的正则表达式。因此，如果您的测试字符串长度为 10 个字符，那么您用来测试它的正则表达式是`"(\\d{2})-bk\\d{3}\\."`or `"\\d\\d\\d-bk\\d\\d\\d\\d\\."`。这会通过`"123-bk0001."`，但会失败`"123-bk000a."`。

您要处理的每个正则表达式都需要进行一些自定义（例如，根据测试字符串的长度将括号放在正则表达式中的正确位置），但我认为没有办法使正则表达式动态化基于长度（这是你所追求的）。

```
import javax.swing.*;
import javax.swing.text.*;

public class JTextFieldSuperVerified extends Box{

    public JTextFieldSuperVerified() {
        super(BoxLayout.Y_AXIS);

        final JTextField textBox = new JTextField(20);

        ((AbstractDocument)textBox.getDocument()).setDocumentFilter(new DocumentFilter(){

            public void insertString(DocumentFilter.FilterBypass fb,int offset,String string,AttributeSet attr) throws BadLocationException{
                StringBuilder newString = new StringBuilder(textBox.getText());
                //Recreate the insert for testing
                newString.insert(offset, string);
                if(verifyText(newString.toString())){
                    fb.insertString(offset, string, attr);
                }

            }

            public void remove(DocumentFilter.FilterBypass fb, int offset, int length) throws BadLocationException{
                StringBuilder newString = new StringBuilder(textBox.getText());
                //Recreate the delete for testing
                newString.delete(offset, offset + length);
                if(verifyText(newString.toString())){
                    fb.remove(offset, length);
                }
            }

            public void replace(DocumentFilter.FilterBypass fb, int offset, int length, String text, AttributeSet attrs) throws BadLocationException{
                StringBuilder newString = new StringBuilder(textBox.getText());
                //Recreate the replace for testing
                newString.replace(offset, offset + length, text);
                if(verifyText(newString.toString())){
                    fb.replace(offset, length, text, attrs);
                }
            }

            //make sure the change is allowed
            public boolean verifyText(String s){
                boolean result = true;
                //Our basic regex to test
                StringBuilder regexPattern = new StringBuilder("\\d\\d\\d-bk\\d\\d\\d\\d\\.\\1");

                if(s.length() < 15){
                    //How we modify the regex based on how long the string we're testing is
                    if(s.length() < 4)
                        regexPattern.delete(s.length() * 2, regexPattern.length());
                    else if(s.length() < 7)
                        regexPattern.delete(s.length() + 3, regexPattern.length());
                    else if(s.length() < 12)
                        regexPattern.delete((s.length() - 3) * 2 + 3, regexPattern.length());
                    else if(s.length() < 15){
                        regexPattern.insert((s.length() - 11) * 2, ')');
                        regexPattern.insert(0, '(');
                    }
                    System.out.println(regexPattern.toString());
                    result = s.matches(regexPattern.toString());

                }else{
                    //Fail everything over 14 chars
                    result = false;
                }

                return result;
            }

        });

        add(textBox);

    }

    public static void main(String[] args){
        final JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(new JTextFieldSuperVerified());
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

# cocoa - 无法摆脱自动布局！“无法在视图上安装约束”

> ID：13610324
> 
> 赞同：3
> 
> 时间：2012-11-28T16:54:48.490
> 
> 标签：cocoa, interface-builder, autolayout

我用自动布局开发了一半的应用程序。现在我想摆脱它。我只在NIB中使用它。我在界面生成器（复选框）中禁用了它，但我不断收到此错误：

> ***由于未捕获的异常“NSGenericException”而终止应用程序，原因：“无法在视图上安装约束。约束是否引用了视图子树之外的内容？那是违法的。约束：视图：'

我只想摆脱自动布局！每 5 次左右构建它就会按预期工作：P

这就是回溯：[Pastebin](http://pastebin.com/G3qXKL0Q)

**编辑：**加载 MainMenu.xib 时应用程序崩溃。我从未在代码中使用过约束。我用 TextEdit 搜索了 XIB，没有匹配“约束”。

**编辑：**这似乎是 INAppStoreWindow 中的一个错误。如果我使用 NSWindow 它工作得很好

# ruby-on-rails - Heroku Bamboo：控制台无法加载

> ID：13610325
> 
> 赞同：0
> 
> 时间：2012-11-28T16:54:53.127
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, rspec

我们在 Heroku 的竹栈上运行了一个 rails 3.0 应用程序。我们最近在使用常规运行控制台会话时遇到了麻烦`heroku console --app name`。它会连接，但尝试任何查询都会导致内部服务器错误。

我们收到了下载 Heroku Toolbelt 的弃用警告。我这样做了，在本地安装，然后尝试使用启动控制台，`heroku run --app teddle rails console`但出现以下错误。

知道有什么问题吗？

```
 Juless-MacBook-Air:teddle julescoleman$ heroku run --app teddle rails console
Running `rails console` attached to terminal... up, run.2038
** [NewRelic][11/28/12 16:46:33 +0000 ab2e4817-034e-47a8-a641-b65004bab257 (2)] INFO : Dispatcher: thin
** [NewRelic][11/28/12 16:46:33 +0000 ab2e4817-034e-47a8-a641-b65004bab257 (2)] INFO : Application: teddle
** [NewRelic][11/28/12 16:46:33 +0000 ab2e4817-034e-47a8-a641-b65004bab257 (2)] INFO : New Relic Ruby Agent 3.4.1 Initialized: pid = 2
Connected to NewRelic Service at collector-2.newrelic.com
** [NewRelic][11/28/12 16:46:43 +0000 ab2e4817-034e-47a8-a641-b65004bab257 (2)] INFO : Reporting performance data every 60 seconds.
/usr/ruby1.9.2/lib/ruby/1.9.1/test/unit/assertions.rb:4:in `<top (required)>': Test is not a module (TypeError)
    from /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.0.11/lib/active_support/dependencies.rb:239:in `require'
    from /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.0.11/lib/active_support/dependencies.rb:239:in `block in require'
    from /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.0.11/lib/active_support/dependencies.rb:227:in `load_dependency'
    from /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.0.11/lib/active_support/dependencies.rb:239:in `require'
    from /usr/ruby1.9.2/lib/ruby/1.9.1/test/unit/testcase.rb:1:in `<top (required)>'
    from /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.0.11/lib/active_support/dependencies.rb:239:in `require'
    from /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.0.11/lib/active_support/dependencies.rb:239:in `block in require'
    from /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.0.11/lib/active_support/dependencies.rb:227:in `load_dependency'
    from /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.0.11/lib/active_support/dependencies.rb:239:in `require'
    from /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.0.11/lib/active_support/test_case.rb:1:in `<top (required)>'
    from /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.0.11/lib/active_support/dependencies.rb:239:in `require'
    from /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.0.11/lib/active_support/dependencies.rb:239:in `block in require'
    from /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.0.11/lib/active_support/dependencies.rb:227:in `load_dependency'
    from /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.0.11/lib/active_support/dependencies.rb:239:in `require'
    from /app/.bundle/gems/ruby/1.9.1/gems/railties-3.0.11/lib/rails/console/app.rb:2:in `<top (required)>'
    from /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.0.11/lib/active_support/dependencies.rb:239:in `require'
    from /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.0.11/lib/active_support/dependencies.rb:239:in `block in require'
    from /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.0.11/lib/active_support/dependencies.rb:227:in `load_dependency'
    from /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.0.11/lib/active_support/dependencies.rb:239:in `require'
    from /app/.bundle/gems/ruby/1.9.1/gems/railties-3.0.11/lib/rails/application.rb:227:in `initialize_console'
    from /app/.bundle/gems/ruby/1.9.1/gems/railties-3.0.11/lib/rails/application.rb:153:in `load_console'
    from /app/.bundle/gems/ruby/1.9.1/gems/railties-3.0.11/lib/rails/commands/console.rb:26:in `start'
    from /app/.bundle/gems/ruby/1.9.1/gems/railties-3.0.11/lib/rails/commands/console.rb:8:in `start'
    from /app/.bundle/gems/ruby/1.9.1/gems/railties-3.0.11/lib/rails/commands.rb:23:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:18:10.900

因此，经过将近一天的调试，结果证明是与名为 Test 的资源的名称冲突。`Test`是 rails 中的受限关键字。

我们没有使用该资源，因此删除与其关联的所有文件（模型、控制器、视图、助手等）解决了我们的问题。

我确信重命名资源会产生相同的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:56:44.407

我相信正确的命令应该是`heroku run console --app teddle`.

# python - 在 BeautifulSoup 中返回不确定的段落数

> ID：13610330
> 
> 赞同：1
> 
> 时间：2012-11-28T16:55:03.980
> 
> 标签：python, html, web-scraping, beautifulsoup

我刚开始使用 BeautifulSoup，我正在尝试制作一个脚本，该脚本将转到许多非常相似的页面，然后返回一个部分下的所有段落。目前我有以下代码

```
def BrightstormPageTest():
    soup = Soup(urllib.urlopen('http://brightstorm.com/science/chemistry/chemical-reaction-rates/collision-theory/').read())
    relevantTagText = ""
    for element in soup.findAll("section"):
            print element.nextSibling 
```

这对第一段很有用，但是有两个部分我想要兄弟姐妹，第一部分总是有一个段落，而第二个部分可能有一个在 1 到 10 之间的未确定数字。关于如何做到这一点的任何想法？

相关html：

```
<section>
      <div class="page-header">
       <h2>
        Explanation
       </h2>
      </div>
     </section>
     <p>
      <strong>
       Collision theory
      </strong>
      is a model for explaining chemical reactions and reaction rates using the interactions of particles within the reactants. There are three important parts to
      <strong>
       collision theory
      </strong>
      , that reacting substances must collide, that they must collide with enough energy and that they must collide with the correct orientation. Increasing the kinetic energy of these particles or decreasing their volume increases the frequency of collisions and speeds a reaction.
     </p>
     <section>
      <div class="page-header">
       <h2>
        Transcript
       </h2>
      </div>
     </section>
     <p>
      Alright so we're going to talk about the collision theory. And the collision theory comes into play when you're talking about reactions and actually what happens in a reaction and how a reaction actually goes from the reactant all the way to the product. So the first thing we're going to have to discuss is, the fact that the reacting substances whatever we're dealing with the atoms, ions or molecules must collide in order for the reaction to occur. Okay that seems pretty obvious so we have our 2 reactants a and b and they must collide, and this is what we're going to call activated complex or a transition states that's going from, transitioning from the reactants towards the product and it's going to recreate this independent, very high energy activated complex and then yield our products, our 2ab. So the first postulate is that they must come together, okay that's easy enough.
     </p>
     <p>
      The second one says the reactant substances must collide with sufficient energy in order to form that activated complex. Because this activated complex is extremely high, very high in energy, very unstable so they must collide with a certain amount of energy to get to this point. If they don't collide with a good amount of energy then they're actually not going to react at all. So that energy is going to be called our activation energy to get to our activated complex. And you might see the symbol e with a subscript a to note that. And the last thing in the collision theory is that reacting substances must collide with the correct orientation so if they, made a collision at a range that wasn't great for them, they would actually rebound off of each other and not react at all.
     </p>
     <p>
      But if they if they did they have to make sure they line up correctly and then for the correct reaction to occur then they get their activated complex to form the products. And so these 3 things are the basis of that collision theory and how reactants go from reactants to the products.
     </p> 
```

只想了解这些段落中的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:32:45.947

您需要遍历部分，然后遍历段落。出于演示目的，我已修改您的代码以打印每个段落的文本。

```
from bs4 import BeautifulSoup as Soup

def BrightstormPageTest():
    soup = Soup(urllib.urlopen('http://brightstorm.com/science/chemistry/chemical-reaction-rates/collision-theory/').read())
    sections = soup.findAll("section")
    for section in sections:
        ps = section.findAll("p")
        for p in ps:
            print p.text

def BrightstormPageTest2():
    soup = Soup(urllib.urlopen('http://brightstorm.com/science/chemistry/chemical-reaction-rates/collision-theory/').read())
    sections = soup.findAll("section")
    for section in sections:
        while True:
             try:
                 print section.nextSibling.text
             except TypeError:
                 # .text is a valid method on a <p> element, but not a NavigableString.  
                 break 
```

# javascript - 数组中的 Javascript 全局变量

> ID：13610333
> 
> 赞同：1
> 
> 时间：2012-11-28T16:55:21.287
> 
> 标签：javascript, arrays, global-variables

我的问题对很多人来说可能很容易，但我是 Javascript 新手。我真的不知道下面的代码有什么问题。

```
var newValue = 1;
function getCurrentAmount() {

return [newValue,2,3];
}
var result = getCurrentAmount();
console.log(result[0] + "" + result[1] + result[2]); 
```

在上面的代码中，控制台显示的结果是： undefined23 为什么结果不是“123”？我正在尝试使用全局变量，因为我想在每次调用函数时将 newValue 递增 1。我想要以下内容：

```
var newValue = 1;
function getCurrentAmount() {
newValue ++;
return [newValue,2,3];
}
setInterval(function(){
   var result = getCurrentAmount();
    console.log(result[0] + "" + result[1] + result[2]);
}, 1000); 
```

另外，我只是厌倦了以下代码，它按预期工作。

```
 var newValue =1;
    function test() {
    newValue ++;
    return newValue;
}

console.log(test()); 
```

所以我认为问题出在数组上。

我希望我的问题足够清楚。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:01:46.140

更好的方法是通过使用**闭包**`newValue`来屏蔽全局范围。像这样：

 **```
var getCurrentAmount = (function () {
    var newValue = 1; // newValue is defined here, hidden from the global scope
    return function() { // note: return an (anonymous) function
        newValue ++;
        return [newValue,2,3];
    };
)()); // execute the outer function
console.log(getCurrentAmount()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:58:21.830

您可以像这样实现“某种静态”变量：

```
function getCurrentAmount() {
    var f = arguments.callee, newValue = f.staticVar || 0;
    newValue++;
    f.staticVar = newValue;
    return [newValue,2,3];
} 
```

这应该比您的全局变量方法更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:59:46.523

您提供的代码的行为符合您的预期，而不是您报告的行为。这是一个演示的[jsfiddle](http://jsfiddle.net/UcF2t/) 。

您必须`newValue`在与您在问题中显示的内容不同的背景下进行设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T17:00:20.270

这段代码对我有用：

```
var newValue = 1;
function getCurrentAmount() {

return [newValue,2,3];
}
var result = getCurrentAmount();
console.log(result[0] + "" + result[1] + result[2]); 
```

看看这里：http: [//jsfiddle.net/PAfRA/](http://jsfiddle.net/PAfRA/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T17:00:37.077

你说它不起作用的代码实际上是在工作，请参阅 working [**demo**](https://tinker.io/689a1)，所以如果它不适合你，你可能在全局范围内没有`newValue`变量（即在你的 js 文件的根目录中而不是在任何内部其他功能）。**

# java - 如何在浮点数组的单个元素中标记为空

> ID：13610338
> 
> 赞同：4
> 
> 时间：2012-11-28T16:55:32.543
> 
> 标签：java, arrays, floating-point

我有一个大的浮点（原始）数组，并不是数组中的每个元素都被填充。我如何将特定元素标记为 EMPTY。我知道这可以通过一些特殊符号来实现，但我仍然想知道标准方式。即使我使用一些特殊符号，我将如何处理实际数据项是特殊符号值的情况。简而言之，我的问题是如何在 java 的原始类型数组中实现 NULL 功能。

PS - 我不使用 Float 对象的原因是为了实现高内存和速度性能。

谢谢 Vineeth

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T16:59:51.507

您可以使用`Float.NaN`, 任何有效值都不会是那样。

请注意，一个`NaN`永远不等于另一个 NaN，因此您可以`NaN`通过以下方式检查某些内容：

```
float a = Float.NaN;
if( a != a ) {
    System.out.println("wat?");
} 
```

在供人们阅读的代码中，您应该使用`Float.isNaN`方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T17:00:43.737

你可以使用 Float.NaN 吗？

```
public class FloatArray {
    public static void main(String[] args) {
        float[] data = new float[10];
        data[5] = Float.NaN;
        for (float f : data){
            if (Float.isNaN(f)){
                System.out.println("No Valve");
            } else {
                System.out.println(f);
            }
        }
    }
} 
```

那么使用像 -1 这样可能有效的[Sentianl 值的风险在哪里，您可以使用 Float#isNaN(f) 进行测试](http://en.wikipedia.org/wiki/Sentinel_value)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T16:59:09.943

一种选择是使用像`Float.MAX_VALUE`.

另一个是实际上有一个数组`Float`而不是数组`float`，这将允许您拥有`null`值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T17:00:33.080

我倾向于为此使用[`Float.NaN`](http://docs.oracle.com/javase/7/docs/api/java/lang/Float.html#NaN)（不是数字）。

与`Float.MAX_VALUE`et al 不同，当您对阵列进行数学运算时，您不必专门检查它们。NaNs 将保持 NaNs，而`MAX_VALUE`et al 可能需要使用条件逻辑来处理。

唯一要记住的是，NaN 不等于任何东西，包括它们自己。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T17:38:37.183

有一种方法可以在 float[] 中使用正常的浮点数、无穷大、NaN 和空标记。Float 具有二进制表示（参见 IEEE-754），您可以使用 Float.floatToIntBits(float) 来查看它。NaN“规范”（参见 Float API）二进制表示为 0x7fc00000。有趣的是，NaN 有许多二进制表示，它们都是有效的，例如 0x7ff00000 也是一个 NaN。试试这个

```
 int nan1 = 0x7ff00000;
    int nan2 = 0x7fc00000;
    float f1 = Float.intBitsToFloat(nan1);
    float f2 = Float.intBitsToFloat(nan2);
    System.out.println(Float.isNaN(f1));
    System.out.println(Float.isNaN(f2)); 
```

你会看到 f1 和 f2 都是 NaN。

因此，您可以使用任何非规范的 NaN，例如 0x7ff00000，作为空标记。确保在将浮点数写入数组时，将 NaN 转换为规范形式。例如

```
 f = (f != f) ? f = Float.NaN : f; 
```

请注意，f != f 是测试浮点数是否为 NaN 的最快方法。

检查浮点数是否为空标记

```
 isEmptyMark = f != f && Float.floatToRawIntBits(f) == 0x7ff00000; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-28T16:59:18.443

这是原语的主要问题之一。值的范围`null`无法有意义地表示。
我建议您去，`Float`否则您将不得不定义特定的值范围及其含义。
示例：如果您`-1.0`在您的域中不是一个有意义的数字，您可以使用它来表示`null`.
但我强烈建议切换到对象而不是原语。

> 我不使用 Float 对象的原因是为了实现高内存和速度性能。

除非您正在做一些非常繁重的数字运算，装箱/自动装箱不会导致任何性能问题。
与往常一样，进行测量，如果您发现确实存在性能问题，那么您可以放弃`Float`使用 prematives。
不要过早优化

# windows - Assetic 在 Windows 上生成空文件（symfony2 + less）

> ID：13610339
> 
> 赞同：3
> 
> 时间：2012-11-28T16:55:35.310
> 
> 标签：windows, symfony, less, assetic

我最近在 Symfony2 安装中引入了 Bootstrap + LessCSS。

我正在使用 Assetic 进行资产管理，并带有一些过滤器：cssrewrite、yui_css、yui_js

我能够在我的 Ubuntu 机器和 SUSE Linux 服务器上毫不费力地添加 less 文件管理器，但是在我同事使用的一些 Windows 7 机器上设置完所有内容后，我们只得到空文件作为输出。

我已经浏览过[this](https://stackoverflow.com/questions/8195114/symfony2-assetics-yui-compressor-on-windows-path-syntax)和[this](https://stackoverflow.com/questions/9622960/how-to-use-scss-filter-in-symfony2-under-windows/9658410#9658410)，但似乎没有什么可以与“less”一起使用。

请注意，如果从命令行调用 lessc 命令，它就可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T18:28:47.213

This is fixed in Symfony 2.4 thanks to [https://github.com/symfony/symfony/pull/8067](https://github.com/symfony/symfony/pull/8067)

# objective-c - [NSKeyedUnarchiver unarchiveObjectWithData:] 上的 EXC_BAD_ACCESS；

> ID：13610343
> 
> 赞同：3
> 
> 时间：2012-11-28T16:55:48.587
> 
> 标签：objective-c, file-io, exc-bad-access

**设置赏金后，我找到了答案。如果有人对我的方法有一些有用的评论（我不知道这是否是“正确”的解决方案），他/她可以获得赏金。如果您要否决我的问题，请发表评论，以便我可以改进未来的问题。**

我目前正在用这本书学习Objective-C，`Cocoa Programming For Mac OS X`它在第10章介绍了归档。我（AFAIK）完全按照作者的要求做了，但是当打开一个文件并因此取消归档时，应用程序崩溃了：

```
array = [NSKeyedUnarchiver unarchiveObjectWithData:data]; 
```

它说`GDB received signal: EXC_BAD_ACCESS`。我只在访问超出范围的数组插槽时遇到过这种情况，我相信**我**没有这样做。我最好的猜测是 Cocoa 幕后出现了问题，间接由我造成。这可能是什么？
正如我所说，我目前正在学习 Objective-C（但我知道 Java），所以不要指望我了解所有晦涩的语言特性。

文件打开方法（`MyDocument.m`）：

```
- (BOOL)readFromData:(NSData *)data ofType:(NSString *)typeName error:(NSError **)outError {
    NSMutableArray *array = nil;
    NSLog(@"data is %@", data);

    @try {
        array = [NSKeyedUnarchiver unarchiveObjectWithData:data]; // line of the EXC_BAD_ACCESS
    }
    @catch (NSException * e) {
        if (outError) {
            NSDictionary *d = [NSDictionary dictionaryWithObject:@"The data is corrupted." forKey:NSLocalizedFailureReasonErrorKey];
            *outError = [NSError errorWithDomain:NSOSStatusErrorDomain code:unimpErr userInfo:d];
        }
        return NO;
    }
    [self setEmployees:array];
    return YES;
} 
```

文件保存方式（静止`MyDocument.m`）：

```
- (NSData *)dataOfType:(NSString *)typeName error:(NSError **)outError {
    [[tv window] endEditingFor:nil]; // tv is my IBOutlet to an NSTableView

    return [NSKeyedArchiver archivedDataWithRootObject:employees];
} 
```

这是堆栈跟踪（谢谢，H2CO3）：

```
(gdb) bt
#0  0x00007fff858da104 in objc_msgSend_vtable13 ()
#1  0x00007fff858dcff5 in objc_getProperty ()
#2  0x00000001000022cf in -[Person name] (self=0x1001d4480, _cmd=0x7fff89d1a790) at /Users/mauritsfriedrichkoelmans/Desktop/RaiseMan1/Person.m:14
#3  0x00007fff86e79674 in -[NSObject(NSKeyValueCoding) valueForKey:] ()
#4  0x00007fff86e7cfb8 in -[NSObject(NSKeyValueCoding) valueForKeyPath:] ()
#5  0x00007fff897e10df in -[NSBinder valueForBinding:atIndex:resolveMarkersToPlaceholders:] ()
#6  0x00007fff89682aa2 in -[NSValueBinder _adjustObject:mode:observedController:observedKeyPath:context:editableState:adjustState:] ()
#7  0x00007fff897e0e75 in -[NSValueBinder updateTableColumnDataCell:forDisplayAtIndex:] ()
#8  0x00007fff897e0d83 in -[NSTextValueBinder updateTableColumnDataCell:forDisplayAtIndex:] ()
#9  0x00007fff897e0d30 in -[_NSBindingAdaptor tableColumn:willDisplayCell:row:] ()
#10 0x00007fff896cab00 in -[NSTableView preparedCellAtColumn:row:] ()
#11 0x00007fff896ca306 in -[NSTableView _dirtyVisibleCellsForKeyStateChange] ()
#12 0x00007fff896c9e96 in -[NSTableView _windowChangedKeyState] ()
#13 0x00007fff88ba0d3e in CFArrayApplyFunction ()
#14 0x00007fff89611478 in -[NSView _windowChangedKeyState] ()
#15 0x00007fff88ba0d3e in CFArrayApplyFunction ()
#16 0x00007fff89611478 in -[NSView _windowChangedKeyState] ()
#17 0x00007fff88ba0d3e in CFArrayApplyFunction ()
#18 0x00007fff89611478 in -[NSView _windowChangedKeyState] ()
#19 0x00007fff88ba0d3e in CFArrayApplyFunction ()
#20 0x00007fff89611478 in -[NSView _windowChangedKeyState] ()
#21 0x00007fff896c991f in -[NSFrameView _windowChangedKeyState] ()
#22 0x00007fff89611171 in -[NSWindow _setFrameNeedsDisplay:] ()
#23 0x00007fff8960f1d8 in -[NSWindow _makeKeyRegardlessOfVisibility] ()
#24 0x00007fff8960f13e in -[NSWindow makeKeyAndOrderFront:] ()
#25 0x00007fff89814401 in -[NSWindowController showWindow:] ()
#26 0x00007fff897e5c5c in -[NSDocument showWindows] ()
#27 0x00007fff899539c1 in -[NSDocumentController openDocumentWithContentsOfURL:display:error:] ()
#28 0x00007fff89953072 in -[NSDocumentController _openDocumentsWithContentsOfURLs:display:presentErrors:] ()
#29 0x00007fff8976eeda in -[NSApplication sendAction:to:from:] ()
#30 0x00007fff8979346a in -[NSMenuItem _corePerformAction] ()
#31 0x00007fff897931d4 in -[NSCarbonMenuImpl performActionWithHighlightingForItemAtIndex:] ()
#32 0x00007fff89778e45 in -[NSMenu performKeyEquivalent:] ()
#33 0x00007fff89777bed in -[NSApplication _handleKeyEquivalent:] ()
#34 0x00007fff896486b9 in -[NSApplication sendEvent:] ()
#35 0x00007fff895df6de in -[NSApplication run] ()
#36 0x00007fff895d83b0 in NSApplicationMain ()
#37 0x0000000100001e9b in main (argc=1, argv=0x7fff5fbff660) at /Users/mauritsfriedrichkoelmans/Desktop/RaiseMan1/main.m:13
(gdb) 
```

数据对象*不是*零，`NSLog()`编辑它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T09:42:45.313

我自己解决了！

在书中，`initWithCoder:`Person 类的方法（我试图解压的数组中填充了该类的实例）如下所示：

```
- (id)initWithCoder:(NSCoder *)coder {
    [super init];
    name = [coder decodeObjectForKey:@"name"];
    expectedRaise = [coder decodeFloatForKey:@"expectedRaise"];
    return self;
} 
```

但它必须是：

```
- (id)initWithCoder:(NSCoder *)coder {
    [super init];
    self.name = [coder decodeObjectForKey:@"name"];
    self.expectedRaise = [coder decodeFloatForKey:@"expectedRaise"];
    return self;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T16:58:06.947

我的经验告诉我，你的`data`对象是`nil`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T02:17:06.237

确保您的保存成功：

```
if (![NSKeyedArchiver archiveRootObject:myDictionary toFile:path])
{
    // saving failed for some reason
    return;
} 
```

在尝试取消归档之前，还要确保文件存在：

```
if ([[NSFileManager defaultManager] fileExistsAtPath:path])
{
    // file does not exist at path (deleted?)
    return;
} 
```

# linux-kernel - 在 Linux 内核中从 entry_32.S 调用 C 函数

> ID：13610345
> 
> 赞同：4
> 
> 时间：2012-11-28T16:55:54.613
> 
> 标签：linux-kernel, kernel, system-calls

我需要能够在某个地方调用 linux 内核中定义的自定义函数。究竟需要做什么来创建一些功能：

`void custom_function(int arg);`

系统调用号在哪里`arg`，然后在某处`entry_32.S`能够做到：

称呼`custom_function`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T01:36:03.657

由于汇编函数和 C 函数的堆栈处理不同。汇编代码“callq”不能直接调用C程序，调用前需要一段代码将汇编参数放入C栈。在 Linux 内核源代码中定义的宏“asmlinkage”用于告诉编译器该函数已准备好从汇编中调用，编译器将在该 C 函数的开头添加一些参数放置代码。

所以，你要做的事情是：

在调用方

```
movq <arg6>,%r9     /* 6th arg */
movq <arg5>,%r8     /* 5th arg */
movq <arg4>,%rcx    /* 4th arg */
movq <arg3>,%rdx    /* 3rd arg */
movq <arg2>,%rsi    /* 2nd arg */
movq <arg1>,%rdi    /* 1st arg*/
callq <your-function-name>
movq %rax, <buf-to-return-result>  /* return value */ 
```

在被调用方：

```
asmlinkage int my-function(int arg1, int arg2, int arg3, ...) {
   <your code>;
   return 0;
} 
```

# python - 列表和字符串的元组

> ID：13610348
> 
> 赞同：0
> 
> 时间：2012-11-28T16:55:59.543
> 
> 标签：python, list, tuples

因此，给定一个随机的一周中人们偏好列表的列表，使得在每个子列表中的 7 个位置中，第一个位置值 6 分，第二个 5 分，第三个 4 分，第四个 4 分，第三个 2 分，第二个1，最后一个没有得到任何偏好点：

```
 days_week=['mon','tues','wed','thurs','fri','sat','sun']

    random_day_list=[['sat','sun','wed','thurs','mon','tues','fri'],['mon','fri','sat','sun','wed','thurs','tues'],['tues','fri','sun','sat','wed','thurs','mon']] 
```

我正在制作的函数应该输出最高得分日的元组，以及按 days_week 顺序排列的每一天的总分列表。上面的输出将是：

```
 ('sat',[8,7,8,5,10,14]) 
```

星期六有 14 分，所以在这种情况下，这是最喜欢的一天。

到目前为止，我想到了：

```
 day_dictionary={'mon':0,'tues':0,'wed':0,'thurs':0,'fri':0,'sat':0,'sun':0}
   for i in random_day_list:
         # getting into the sublist
         for j in i:
              if j in day_dictionary:
                 # stuck here:  whatever position j is in (0,1,2,3,4,5,6) if its 
                   0 add 6, 1 add 5, and so on, to day_dictionary[j] 
```

我不能导入任何东西，除了数学女巫我怀疑我需要

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:04:46.187

您需要一些方法来跟踪您所处的位置。[enumerate](http://docs.python.org/2/library/functions.html#enumerate)函数为您做到了！

试试这个：

```
day_dictionary={'mon':0,'tues':0,'wed':0,'thurs':0,'fri':0,'sat':0,'sun':0}
for i in random_day_list:
     for position, day in enumerate(i):
         if day in day_dictionary:
             day_dictionary[day] += (6 - position) 
```

(As a note for the future, it would probably be better to use [a defaultdict](http://docs.python.org/2/library/collections.html#collections.defaultdict) rather than manually initializing everything to 0\. But since you can't import anything, your way will work fine.)

# javascript - Firefox 会默默忽略一些不非法的 CSS 值

> ID：13610351
> 
> 赞同：0
> 
> 时间：2012-11-28T16:56:04.930
> 
> 标签：javascript, firefox, css

我想通过 document.styleSheets 获取样式表，但是，Firefox 似乎会默默地忽略一些不非法的 CSS 值。我现在正在使用[vh & vw](http://www.w3.org/TR/css3-values/#vh-unit)，我想获取 css 值并为其生成正确的 px 。

有什么方法可以让 Firefox 忽略这些值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:19:20.037

我确实认为 Firefox（可能还有其他浏览器）只会从样式表中返回计算出的样式。

但是，您可以通过选择所需的标签进入更手动的过程，发出 ajax 请求以获取其文本内容（几乎是即时的，因为它在缓存中），然后解析它。

html:

```
<link rel="stylesheet" href="style.css" id="css"> 
```

js（使用 jQuery）：

```
$.get($("#css").attr("href"), function(data) //requests the css in ajax
{
   var selector = "div#right", rules = {};

   data = data.substring(data.indexOf(selector)); //trim all that is before your selector
   data = data.substring(data.indexOf("{") + 1, data.indexOf("}")); //get only what's in the curly braces
   data = data.split(";"); //split to get an array with each cell is a css rule

   for (var i = 0, l = data.length; i < l; i++) //loop through
   {
        data[i] = data[i].replace(/^\s+/, ''); //trim spaces before
        data[i] = data[i].replace(/\s+$/, ''); //trim spaces after

        if (data[i].indexOf(':') == -1) { continue; } //if rule is invalid, skip it

        data[i] = data[i].split(':'); //split rule so you have a sub-array with 0:key and 1:value
        rules[data[i][0]] = data[i][1]; //apply it to an object
   }

   console.dir(rules); //here you have. if your rules have "-" in it, you can't access with directly, but with brackets it'll be ok. ie : rules.margin-left is wrong but you can with rules["margin-left"].

}, "text"); 
```

# caching - Solr中的queryResultCache没有出现

> ID：13610352
> 
> 赞同：3
> 
> 时间：2012-11-28T16:56:10.193
> 
> 标签：caching, tomcat, solr

我刚刚选择了一个 Solr 实现，作为由一位前同事开发的项目的一部分。我正在考虑调整缓存，但是尽管在 solrconfig.xml 中进行了配置，但 Solr 似乎无法识别 queryResultCache。

我已经从另一个正在运行的 Solr 构建中获取了相关部分，但它仍未在统计信息中列出。

这是我的 solrconfig.xml 提取：

```
<queryResultCache class="solr.LRUCache"
                 size="2048"
                 initialSize="512"
                 autowarmCount="0"/> 
```

当我访问统计页面时，列出的唯一缓存是 fieldValueCache 和 fieldCache，也没有 documentCache。

还有其他地方可以覆盖我错过的吗？我在 Windows 上的 Tomcat 7 上使用 Solr 3.6.1。

# git - 将文件添加到 git repo 并被拒绝

> ID：13610356
> 
> 赞同：0
> 
> 时间：2012-11-28T16:56:20.360
> 
> 标签：git, github

尝试将文件添加到我的存储库中，当它返回时被拒绝

```
! [rejected] master -> master (non-fast-forward) error: failed to push
some refs to 'SITE' hint: Updates were rejected because the tip of
your current branch is behind hint: its remote counterpart. Merge the
remote chsanges (e.g. 'git pull') hint: before pushing again. 
```

我试过 git pull 并没有更新我的本地文件。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:37:45.897

尝试`git fetch`如果`git pull`不起作用，`git rebase`然后您应该能够将您的更改推送到远程仓库。

# c# - 单击关闭特定表单时的 Windows 窗体应用程序 C# 按钮

> ID：13610357
> 
> 赞同：1
> 
> 时间：2012-11-28T16:56:23.903
> 
> 标签：c#, windows, forms

我正在做学校项目，这是我第一次使用视觉工作室，这里有一个小解释......！

登录，表单，点击按钮后 - 登录 - 它引导我进入带有 4 个按钮的主表单，我可以在其中转到 3 个其他表单并退出 ...问题是我只需要制作一些交互式 exe 文件即可指导教授通过我的系统（需要向他展示我的应用程序的外观）..有一些编程经验，并且知道如何在点击时弹出一些表单...主要问题是我不知道如何关闭1\. 在我进入主窗体后通过登录按钮登录表单或如何使用下一步和后退按钮制作程序

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:05:52.610

然后给每个表格一个特定的**标签**

```
class CloseTagedForm
 {
        public void ZatvoriTagovanuFormu(string myTag)
        {
        for (int i = Application.OpenForms.Count - 1; i >= 0; i--)//when you have to change the items you should do a reverse loop !
            if (Application.OpenForms[i].Tag != null && Application.OpenForms[i].Tag.ToString() == myTag)
                Application.OpenForms[i].Close();
        }
 } 
```

您可以从代码中的任何位置关闭任何表单

# php - 使用哪个源代码控制（用于大量图像文件）？

> ID：13610361
> 
> 赞同：0
> 
> 时间：2012-11-28T16:56:33.953
> 
> 标签：php, version-control, image

我最终决定尝试使用我现有的项目进行源代码控制（因为我很快将聘请另一位新开发人员）。我对这个领域很陌生，我需要推荐我应该使用哪个源代码控制来修复我当前的项目。

我正在开发处理大量图片的 Web 应用程序。目前，我们有超过 500,000 张图片（大尺寸图片和几个缩略图）。我正在使用 PHP，这不是我关心的（因为它只有数百个脚本文件）。**我主要关心的是大量的图片。**

**注意：**
我只是安装 VisualSVN。您如何看待 SVN。你认为它会解决我的要求吗？

* * *

我有两票可以结束这个问题。我确实阅读了常见问题解答，我相信我的问题非常好。

> Stack Overflow 适用于专业和狂热的程序员，因为热爱而编写代码的人。我们认为最好的 Stack Overflow 问题都包含一些源代码，但如果您的问题通常涵盖……</p>
> 
> *   一个特定的编程问题
> *   一种软件算法
> *   **程序员常用的实用软件工具，**
> *   编程行业独有的可回答问题
> 
> ......那么你来对地方提出你的问题了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:02:50.873

*   远离 CVS 和 SVN 等旧版版本控制软件。
*   使用您可以轻松托管自己的一个，这样您最终就不会为简单的存储支付太多费用。

我会选择 Mercurial (hg)，它非常易于设置，您可以自己托管并且非常易于使用。另一种选择是 Git，尽管命令和内部结构不同，但它几乎相同。

商业组织中经常使用的另一种替代方法是 Perforce。我自己没有使用它的经验，但我听说过它的好消息，我认为它应该能够处理大量文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:07:36.607

如果您不熟悉源代码管理，我建议您使用 SVN。我发现 SVN 是最直接的选择。VisualSVN 是一个不错的选择，效果很好，而且是免费的。但是，我鼓励您查看托管的 SVN 存储库，例如[beasntalkapp.com](http://beanstalkapp.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T20:25:08.680

远离旧版本控制软件，尤其是 Visual Source Safe！我的建议是使用 Git（您在 bitbucket.org 有一个免费主机以及托管 mercurial，但我从未使用过那个）。github.com 仅对开源项目免费，bitbucket 对私人存储库也是免费的，但按额外用户收费。

我已经使用 git 大约 4 个月了，它很棒。子版本我觉得很烦人，只是短暂地使用过它（几年前，我不完全记得我为什么停止使用它——我认为与目录和文件处理有关）。

Git 似乎是最新的一个获得良好立足点的产品，使用它之后它也非常灵活。我非常喜欢这样的规则，即一旦您将某些内容提交到存储库 - 很难意外删除它！与替代方案相比，分支也非常快，因为它通过链接到以前未更改的版本而不是保存差异并且必须重新应用它们来工作，因此它的文件大小非常小，并且与其他版本相比非常快。我还在一个项目中存储了大约 3000 个图标、300 行代码和大约 500 个 php 文件 + js 库等，老实说，它和我刚开始使用几个文件时一样快！

使用 Git 不会出错——一开始就使用 github 或 bitbucket，因为这样开始会容易得多。您可以在以后随时自己设置一个 repo。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T20:16:28.830

您将所有图像添加到版本控制的原因是什么？他们会经常改变吗？

以我的经验，向任何版本控制系统添加大量二进制文件都很庞大，尤其是 SVN，因为您将检查服务器上的更改，而对 500.000 个文件进行文件检查并不有趣。

我建议您将图像存储在共享文件夹中，例如在 samba 共享或类似文件夹中，并将代码中的指针更改为该文件夹，以便所有开发人员共享相同的图像。

另一方面，PHP 代码绝对应该进入版本控制，我的推荐是 Git，但 Mercurial 是一个不错的选择。SVN 是一个我不推荐的遗留系统。

# php - 是否可以使用 Phpseclib 重用连接字符串？

> ID：13610364
> 
> 赞同：0
> 
> 时间：2012-11-28T16:56:43.910
> 
> 标签：php, database-connection, connection-string, phpseclib

假设我在类文件中有以下两种方法。在我的代码中，我通过执行以下操作开始连接。

```
$host = new Host($ip, $targ, $this->log, $pwd); 
```

然后稍后在我的代码中，我调用该`scp`方法。

```
$host->scp("$dir.tar.gz", "{$targ['deploy_to']}/releases/$dir.tar.gz"); 
```

它按原样工作，但我不想`scp`在我第一次连接时启动它后将我的连接字符串传递给该方法。

```
class Host {
    private $conn = NULL;

    function __construct($host, $target, $log, $pwd=NULL) {
        $this->log = $log;
        $this->loud = $target['verbose'];
        $this->quiet = $target['quiet'];
        $this->user = $target['user'];
        $this->rsa_key = $target['private_key_file'];
        $this->conn = $this->connect($host, $target, $pwd);
    }

    private function connect($host, $target, $pwd = NULL) {
        $key = new Crypt_RSA();
        $key->loadKey(file_get_contents($target['private_key_file']));
        $this->log->verbose("Connecting to $host on port {$target['ssh_port']}");
        $conn = new Net_SSH2('10.199.1.70');
        $this->log->verbose("Authenticating as {$target['deploy_user']} using {$target['public_key_file']}");

        if (!$conn->login($target['deploy_user'], $key)) {
            $this->log->error("Unable to authenticate");
        }

        $this->log->ssh[$host] = $this;
        return $conn;
    }

    function scp($local_file, $remote_file, $mode = 0644) {
        $sftp = new Net_SFTP('10.199.1.70');
        $key = new Crypt_RSA();

        $key->loadKey(file_get_contents($this->rsa_key));
        if (!$sftp->login($this->user, $key)) {
            exit('Login Failed');
        }

        $this->log->verbose("scp'ing $local_file to $remote_file mode ".decoct($mode));
        $ret = $sftp->put($remote_file, $local_file,NET_SFTP_LOCAL_FILE);
        return $ret;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:35:41.860

有没有原因这不起作用？：

```
$ret = $this->conn->put($remote_file, $local_file,NET_SFTP_LOCAL_FILE); 
```

# javascript - jQuery - hide() 在 Internet Explorer 9 兼容模式下不起作用

> ID：13610365
> 
> 赞同：0
> 
> 时间：2012-11-28T16:56:44.903
> 
> 标签：javascript, jquery, internet-explorer-9

我在使用[jQuery](http://en.wikipedia.org/wiki/JQuery)隐藏和显示 li 元素时遇到问题。我的代码在 Chrome 和 Internet Explorer 9 中工作，但如果 Internet Explorer 9 进入兼容模式，或者设置为较低的浏览器，它会静默失败。

这个想法是有一个按类过滤并分页结果的下拉列表。对于下面的示例，我删除了大部分分页代码。

据我所知，问题在于`selector.children().hide();`，尽管我对此不确定。

[我通过W3C](http://en.wikipedia.org/wiki/World_Wide_Web_Consortium)验证器运行了 HTML ，它看起来很好，而我在 Chrome 工具中没有发现 JavaScript 错误，在 Internet Explorer 开发工具中也没有明显的错误（尽管我对这些不太熟悉，可能会遗漏一些东西）。

如果您将以下内容保存到 HTML 文件中，您应该会得到一个下拉菜单，当您选择过滤`li`元素时。至少在 Chrome 中：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Test</title>
        <script src="http://code.jquery.com/jquery-latest.js"></script>
    </head>

    <body>
        <script>
            //<![CDATA[
                function buildPaging(filterClass) {
                    var selector = $('.paging');
                    selector.wrap("<div class='simplePagerContainer'></div>");

                    var pageSize = 2;
                    var pageCounter = 1;
                    var currentPage = 1;
                    var step =0;

                    selector.children().each(function (i) {
                        var item = $(this);
                        var hasClass = false;
                        if (filterClass !== undefined &&
                            filterClass !== '' &&
                            filterClass !== 'Sites:' &&
                            item.hasClass(filterClass)) {

                            hasClass = true;
                        }
                        else
                            if (filterClass === undefined ||
                                filterClass === '' ||
                                filterClass === 'Sites:') {

                                hasClass = true;
                            }

                        if (step < pageCounter * pageSize && step >= (pageCounter - 1) * pageSize && hasClass) {
                            $(this).addClass("simplePagerPage" + pageCounter);
                            step++;
                        }
                        else
                            if (hasClass) {
                                $(this).addClass("simplePagerPage" + (pageCounter + 1));
                                pageCounter++;
                                step++;
                            }
                    });
                    selector.children().hide();
                    selector.children(".simplePagerPage" + currentPage).show();
                };

                function cleanPaging() {
                    $('li').removeClass('simplePagerPage1 simplePagerPage2 simplePagerPage3 simplePagerPage4 simplePagerPage5 simplePagerPage6 simplePagerPage7 simplePagerPage8')
                    $('.simplePagerNav').remove();
                }

                $(document).ready(function() {
                   buildPaging();
                });

                var selectedItem;

                function hideMessage(period) {
                    var classList = $('.EMI_Message_Option');
                    selectedItem = period;
                    var keep;
                    for (var i = 0; i < classList.length; i++) {
                        if (classList[i].innerHTML !== period) {
                            $('.' + classList[i].innerHTML).hide();
                        }
                        else {
                            keep = classList[i].innerHTML;
                        }
                    }
                    $('.' + keep).show();
                    cleanPaging();
                    buildPaging(period);
                }
            //]]>
        </script>

        <div class="EMI_Messages">
            <div class="EMI_Messages">

            <div class="MessageDropdown">
                <select onchange="hideMessage(this.value)">
                    <option>Sites:</option>
                    <option>CSR</option>
                    <option>Sales</option>
                </select>
            </div>
            <ul class="paging">
                <li class="CSR">
                    <div>
                        <div>
                            <a href="http://example.com/">CSR</a>
                        </div>
                        <div>byline</div>
                        <div>11/26/2012 12:00:00 AM</div>
                    </div>
                </li>
                <li class="Sales">
                    <div>
                        <div>
                            <a href="http://example.com/">Sales</a>
                        </div>
                        <div>sample text</div>
                        <div>11/21/2012 12:00:00 AM</div>
                    </div>
                </li>
            </ul>
        </div>
        <div class="pager"></div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:18:36.140

问题似乎是由这段 HTML 引起的：

```
<select onchange="hideMessage(this.value)"> 
```

在某些版本的 IE 中，`this.value`没有按需要传递给`hideMessage()`函数。它作为空字符串传递，因此代码不起作用。

如果将其更改为以下内容，它对我有用：

```
<select onchange="hideMessage(this.options[this.selectedIndex].value)"> 
```

仅供参考，这是您在 jsFiddle 中应用修复的代码：http: [//jsfiddle.net/jfriend00/9hUK9/](http://jsfiddle.net/jfriend00/9hUK9/)

现在我们看到了问题，您可以在这里看到类似的问答：[Getting the value of a SELECT box in Internet Explorer](https://stackoverflow.com/questions/1539032/getting-the-value-of-a-select-box-in-internet-explorer)

* * *

与您所问的问题无关，您是否意识到每次调用时`buidPaging()`，它都会执行额外的操作，`.wrap("<div class='simplePagerContainer'></div>");`因此每次调用时您的 DOM 结构都会变得更深？

# c# - 在 C# 中使用 C CLR::Class Library

> ID：13610366
> 
> 赞同：2
> 
> 时间：2012-11-28T16:56:45.353
> 
> 标签：c#, c++, dll, c++-cli, clr

我试图让一些 C++ 代码在 C# 下工作。我一直在尝试在网上到处学习教程，但编译或执行代码却没有任何运气。

我编写了一个编译为 .dll 的基本 C++ 类和一个 C# 控制台应用程序。- 我已将 C++ dll 上的平台工具集更改为 v100 - 我在 C# 应用程序中添加了对 dll 的引用

注意我正在尝试使用 C++ 类，而不是 C++ 静态函数......到代码上！

```
// CTrans.h
#pragma once

#include "windows.h"

using namespace System;

namespace CTrans {

    public ref class CTransClass
    {
    public:
    System::String^ helloWorld();
    };
}

// CTrans.cpp
// This is the main DLL file.
#include "stdafx.h"
#include "CTrans.h"

String^ CTrans::CTransClass::helloWorld()
{
    return gcnew System::String("Hello World!");
}

// Program.cs
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace CTWrapper
{
    class Program
    {
        static void Main(string[] args)
        {
            unsafe
            {
                CTrans.CTransClass trans = new CTrans.CTransClass();
                String tmp = trans.helloWorld();
            }
        }
    }
} 
```

错误：[http ://sumarlidason.com/Capture.PNG](http://sumarlidason.com/Capture.PNG)

编辑：删除细节，添加错误截图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:41:37.953

您是否尝试添加“使用 CTrans；” 到 Program.cs 的顶部 using 块？

检查以确保程序集使用相同的体系结构 (x86/x64) 编译，并且错误列表中没有其他相关警告。

# facebook - Facebook 权限语言

> ID：13610368
> 
> 赞同：1
> 
> 时间：2012-11-28T16:56:51.803
> 
> 标签：facebook, permissions

我用法语制作了一个 facebook 应用程序，但是当权限对话框出现时，它是英文的，即使用户是来自法国的法国人。

我正在从 facebook as3 api 调用权限对话框。

我怎样才能在法语中打开权限对话框。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:37:39.347

我发现当我直接在我的网站上访问我的应用程序时，对话框是法语的，但是当我使用：apps.facebook.com/mynamespace 或使用 onglet 页面访问它时，对话框是英文的.. . 不明白为什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:32:17.217

一个人说。“使用 Facebook 首次登录时，要求用户授权此应用程序的对话框以看似随机的语言显示。仅当用户通过 Wifi 连接时才会发生。”

# html - 使用 display:table 制作 div 的高度为父 div 的 100%

> ID：13610373
> 
> 赞同：5
> 
> 时间：2012-11-28T16:57:00.460
> 
> 标签：html, css

我正在尝试制作一个`display:table`100% 填充其父 div 的 div。这是div结构：

```
<div id="container">
   <div id="header"></div>
   <div id="body">
       <div id="mytablediv">
    <div class="row">
             <div id="left"> </div>
             <div id="content">&nbsp; </div>
                 <div id="right"> </div>
            </div>
       </div>
   </div>
   <div id="footer"></div>
</div> 
```

这是CSS：

```
html, body { margin:0; padding:0; height:100%; }
#container { min-height:100%; position:relative; }
#header { background:#ff0; padding:10px; }
#body { padding:10px; padding-bottom:60px; }
#footer { position:absolute; bottom:0; width:100%; height:60px;background:#6cf;
}
#mytablediv { display:table; }
#row { display:table-row; }
#left, #content, #right {display:table-cell;}
#left, #right {background-color:red;} 
```

这是我的完整代码。现在我真正想做的`#mytablediv`是填充页眉和页脚之间的整个空白区域。

这是一个[现场 jsFiddle 示例](http://jsfiddle.net/A4c8n/)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T17:22:18.433

您可以在[`inheritance`](http://www.w3.org/TR/CSS21/cascade.html#inheritance)此处使用该属性，只需将以下内容用于`#mytablediv`

```
#mytablediv {
    height: inherit;
} 
```

您已指定`div#container`为 100% 高度，您需要分配上述属性以`div#body`获得所需的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:11:40.297

对于要处理的百分比高度`#mytablediv`（或任何其他元素），它的父级必须对其进行某种`height`设置。该父母`height`也可以是一个百分比，但是，在这种情况下，要使该百分比起作用，它自己的父母（`#mytablediv`的祖父母）也必须对其进行某种`height`设置。这一直到`html`元素。

在您的情况下，如果您希望`#mytablediv`拥有页面（实际上`100%`是`height`窗口），那么您将希望“特定`height`”出现`100%`在所有祖先上。

```
html,
body,
#container,
#body {
    height: 100%
}

/* now this works */
#mytablediv {
    height: 100%;
} 
```

这是一个演示：[https ://jsfiddle.net/joplomacedo/u4hezyav/](https://jsfiddle.net/joplomacedo/u4hezyav/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-31T19:23:17.967

您应该使用稍微不同的 HTML 部分结构来获得所需的结果。我面临同样的问题，我使用了如下所述的解决方案：

[http://jsfiddle.net/92y9L/](http://jsfiddle.net/92y9L/)

相关代码：

**CSS**

```
*{
    margin:0;
    border:0;
    padding:0;
}
.outer
{
    position:relative;
    width:250px; 
    height:350px;
    border:1px dotted black;
    margin:-1px;
}
.tbl
{
    display:table; 
    width:100%; 
    height:100%;
}
.tr
{
    display:table-row;
}
.td
{
    display:table-cell; 
    margin:0 auto;
    text-align:center; 
}
.tr .body-outer
{
    height:100%; 
    width:100%; 
}
.body-outer
{
    position:relative;
}
.body-inner
{
    position:absolute; 
    top:0; 
    right:0; 
    bottom:0; 
    left:0; 
    overflow-y:auto; 
    overflow-x:auto;
}
.stretch-x
{
    width:100%;
}
.stretch-y
{
    height:100%;
} 
```

**HTML**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<body>
<div class="outer">
<div class="tbl">
    <div class="tr" style="background-color:Red;">
        <p>test paragraph. This is used as placeholder<br />new line....</p>
    </div>
    <div class="tr stretch-y" style="background-color:Gray;">
        <div class="td stretch-y" style="background-color:Blue;">
            <div class="body-outer" style="background-color:Green;">
                <div class="body-inner">
                <p style=" white-space:nowrap;">test paragraph. This is used as placeholder<br />new line....</p>
                <p>test paragraph. This is used as placeholder</p>
                <p>test paragraph. This is used as placeholder<br />new line....</p>
                <p>test paragraph. This is used as placeholder</p>
                <p>test paragraph. This is used as placeholder<br />new line....</p>
                <p>test paragraph. This is used as placeholder</p>
                <p>test paragraph. This is used as placeholder<br />new line....</p>
                <p>test paragraph. This is used as placeholder</p>
                <p>test paragraph. This is used as placeholder<br />new line....</p>
                <p>test paragraph. This is used as placeholder</p>
                <p>test paragraph. This is used as placeholder<br />new line....</p>
                <p>test paragraph. This is used as placeholder</p>
                <p>test paragraph. This is used as placeholder<br />new line....</p>
                <p>test paragraph. This is used as placeholder</p>
                <p>test paragraph. This is used as placeholder<br />new line....</p>
                <p>test paragraph. This is used as placeholder</p>
                <p>test paragraph. This is used as placeholder<br />new line....</p>
                <p>test paragraph. This is used as placeholder</p>
                <p>test paragraph. This is used as placeholder<br />new line....</p>
                <p>test paragraph. This is used as placeholder</p>

            </div>
            </div>
       </div>
    </div>
    <div class="tr" style="background-color:Red;">
        <p>test paragraph. This is used as placeholder<br />new line.</p>
    </div>
</div>
</div>
</body> 
```

这种方法的概念是使用一个内部 css 表，在外部容器的边界下具有三个 css 表行。上面的 CSS 行用于托管页眉，较低的 CSS 行用于托管页脚。它们都根据其内容自动调整大小。

中间一行作为body容器，通过设置高度为100%进行拉伸。关于“body”css 行的内部内容，已使用外部相对/内部绝对布局技术，以强制内容适合“body”css 行的边界内并允许溢出。IE需要中间css表格单元格才能满足拉伸的要求。

这种设计与 FF+Chrome+Opera+Safari 完美配合，但 IE 拒绝计算“body”内容相对于其祖先 CSS 表格行的高度，并且坚持将其与外部 div 的高度相关联。这正是我面临的问题。

总之，如果 IE 移动正文内容没有问题，这个解决方案可能对您有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T11:57:04.750

Atlast，我决定把它交给 jQuery。

```
function heightAutomate() {
    var bodyHeight = $("body").height();
    var viewportHeight = $(window).height();
    var shudbe_bf_Height = $("body").height() - 153; /*153:height of div+footer*/
    var real_bf_Height = $("#mytablediv").height();

    if (real_bf_Height < shudbe_bf_Height) {
        $("#bodyfix").css({"height":shudbe_bf_Height});
    }
} 
```

# java - applicationContext 示例文件

> ID：13610379
> 
> 赞同：-2
> 
> 时间：2012-11-28T16:57:13.893
> 
> 标签：java, spring, glassfish

我正在搜索 Spring 框架中文件 applicationContext.xml 的标准格式。每次我尝试在 GlassFish 中运行应用程序时，它都会显示错误的 applicationContext 文件。你能给我提供一个样品吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:18:34.587

您可以从[https://src.springframework.org/svn/spring-samples/下载任何示例](https://src.springframework.org/svn/spring-samples/)

# oracle - 将Java生成的UUID存储到Oracle DB的有效方法是什么？删除或不删除 UUID 中的连字符是否有用？

> ID：13610381
> 
> 赞同：11
> 
> 时间：2012-11-28T16:57:16.230
> 
> 标签：oracle, store, uuid, hyphen

将Java生成的UUID存储到Oracle DB的有效方法是什么？删除或不删除 UUID 中的连字符是否有用 - 存储/性能？

`07b319dc-7e64-4047-a3e3-63ab43864d81`按原样存储
或
`07b319dc-7e64-4047-a3e3-63ab43864d81`按原样存储`07b319dc7e644047a3e363ab43864d81`

会有什么不同吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T19:24:05.253

删除连字符将为您在数据库中每行节省 4 个字符，这并不值得付出努力。Oracle 不会因为这四个字符而显着变慢或变快。更糟糕的是，如果您想将值选择回 Java 应用程序并重新创建`java.util.UUID`对象，则需要在正确的位置重新插入连字符。

如果您想在数据库上节省一点内存，`RAW(16)`（正如您的问题评论中提到的 vcsjones ）将占用最小的空间。但是，如果要使用该`RAW`类型，则需要将 UUID 反汇编成`byte[]`数组。这有点棘手，因为`java.util.UUID`只返回一个`String`表示或两个`long`值。`UUID`从数组中重新创建对象`byte[]`更加棘手。

# reporting-services - 如何在多值参数中允许空值

> ID：13610383
> 
> 赞同：1
> 
> 时间：2012-11-28T16:57:16.453
> 
> 标签：reporting-services, ssrs-2008, fetchxml

我需要`null`在多值参数中包含一个值。我在我的数据集中使用 fetchXML 代码。请帮帮我。

在我的报告中，我有 2 个数据集，其中第一个是具有参数的主数据集`@P1`。因为`@P1`我已将 Dataset2 分配为“可用值”和“默认值”。

现在，当我运行报告时，我应该得到一个下拉列表，其中包含 dataset2 中所有值的列表。

因此，在该下拉列表中，我还被要求添加一个空值。是否可以？

注意：参数将接受来自用户的多个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:12:38.653

假设您想为查询中的代码列表添加一个用于选择的空选项。您需要做的就是通过合并将其添加到您的结果集中：

```
SELECT NULL AS Id, '<Null option>' AS Description
UNION ALL
SELECT Id, Description
FROM CodeTable
ORDER BY 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T22:03:23.107

**您可以通过向您的SSRS**报告添加一个空白值报告参数来向您的报告添加一个 CRM 过滤器参数。

考虑到您正在使用 Account 实体，参数的 XML 如下所示：

```
<ReportParameter Name="FilteredAccount">
   <DataType>String</DataType>
   <Nullable>true</Nullable>
   <DefaultValue>
      <Values>
         <Value></Value>
      </Values>
   </DefaultValue>
   <AllowBlank>true</AllowBlank>
   <Prompt>FilteredAccount</Prompt>
   <Hidden>true</Hidden>
</ReportParameter> 
```

添加此参数后，您会将报表上传到 CRM，CRM 会自动为您创建参数作为 SQL 查询（值）并加载 CRM 过滤器。任何特定的所需过滤器都可以保存到 CRM 的报告中。

请注意，此报告参数应从 SSRS 传递到存储过程，该存储过程获取报告过滤结果。

> [您还可以在此博客文章http://carlwillis.blogspot.com/2012/01/pre-filtering-in-crm-2011-ssrs-reports.html](http://carlwillis.blogspot.com/2012/01/pre-filtering-in-crm-2011-ssrs-reports.html)中找到有关 CRM 2011 报告预过滤参数的详细信息

# ruby-on-rails - 翻译登录表单

> ID：13610384
> 
> 赞同：0
> 
> 时间：2012-11-28T16:57:21.843
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有简单的登录表单。会话不是模型，只是控制器进行身份验证并保存 cookie 以记住用户。

```
<%= form_for(:session, url:sessions_path, html:{id:"login_form"}) do |f| %>
  <div>
  <%= f.label :email %>
  <%= f.text_field :email %>
  </div>
  <div>
  <%= f.label :password %>
  <%= f.password_field :password %>
  </div>
  <%= f.submit "Login" %>
<%end%> 
```

我想翻译这个`:email`和`:password`标签，对于我知道怎么做的模型：

```
activerecord:
  attributes:
    user:
      password: Hasło
      name: Login
      password_digest: Potwierdzenie hasła 
```

但是在这里我不知道应该把它放在什么键下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:09:38.130

Rails 已为[本地化和国际化做好充分准备，此处链接指南](http://guides.rubyonrails.org/i18n.html)。

国际化文件的通常位置是`config/locales/<language-code>.yml`. 使用`t`I18N 类的方法在文件中查找键并返回值以正确的语言显示。

I18N上还有一个[Railscast，](http://railscasts.com/episodes/138-i18n)尽管它很可能有点过时了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:08:34.630

我将此标签行更改为：

`<%= f.label :password,t("activerecord.attributes.user.password") %>`

它有效，但我不确定这是否是最好的方法。

# java - 在 Java 中解析 XML 时遇到第一条记录

> ID：13610387
> 
> 赞同：1
> 
> 时间：2012-11-28T16:57:24.797
> 
> 标签：java, xml-parsing, dom4j

我正在解析以下 XML：

```
 <table ID="customer">
    <T><C_CUSTKEY>1</C_CUSTKEY><C_NAME>Customer#000000001</C_NAME><C_ADDRESS>IVhzIApeRb ot,c,E</C_ADDRESS><C_NATIONKEY>15</C_NATIONKEY><C_PHONE>25-989-741-2988</C_PHONE><C_ACCTBAL>711.56</C_ACCTBAL><C_MKTSEGMENT>BUILDING</C_MKTSEGMENT><C_COMMENT>regular, regular platelets are fluffily according to the even attainments. blithely iron</C_COMMENT></T>
    <T><C_CUSTKEY>2</C_CUSTKEY><C_NAME>Customer#000000002</C_NAME><C_ADDRESS>XSTf4,NCwDVaWNe6tEgvwfmRchLXak</C_ADDRESS><C_NATIONKEY>13</C_NATIONKEY><C_PHONE>23-768-687-3665</C_PHONE><C_ACCTBAL>121.65</C_ACCTBAL><C_MKTSEGMENT>AUTOMOBILE</C_MKTSEGMENT><C_COMMENT>furiously special deposits solve slyly. furiously even foxes wake alongside of the furiously ironic ideas. pending</C_COMMENT></T>
    <T><C_CUSTKEY>3</C_CUSTKEY><C_NAME>Customer#000000003</C_NAME><C_ADDRESS>MG9kdTD2WBHm</C_ADDRESS><C_NATIONKEY>1</C_NATIONKEY><C_PHONE>11-719-748-3364</C_PHONE><C_ACCTBAL>7498.12</C_ACCTBAL><C_MKTSEGMENT>AUTOMOBILE</C_MKTSEGMENT><C_COMMENT>special packages wake. slyly reg</C_COMMENT></T>
    <T><C_CUSTKEY>4</C_CUSTKEY><C_NAME>Customer#000000004</C_NAME><C_ADDRESS>XxVSJsLAGtn</C_ADDRESS><C_NATIONKEY>4</C_NATIONKEY><C_PHONE>14-128-190-5944</C_PHONE><C_ACCTBAL>2866.83</C_ACCTBAL><C_MKTSEGMENT>MACHINERY</C_MKTSEGMENT><C_COMMENT>slyly final accounts sublate carefully. slyly ironic asymptotes nod across the quickly regular pack</C_COMMENT></T>
    <T><C_CUSTKEY>5</C_CUSTKEY><C_NAME>Customer#000000005</C_NAME><C_ADDRESS>KvpyuHCplrB84WgAiGV6sYpZq7Tj</C_ADDRESS><C_NATIONKEY>3</C_NATIONKEY><C_PHONE>13-750-942-6364</C_PHONE><C_ACCTBAL>794.47</C_ACCTBAL><C_MKTSEGMENT>HOUSEHOLD</C_MKTSEGMENT><C_COMMENT>blithely final instructions haggle; stealthy sauternes nod; carefully regu</C_COMMENT></T>
</table> 
```

使用以下java代码：

```
package xmlparserformining;
import java.util.List;
import java.util.Iterator;
import org.dom4j.Document;
import org.dom4j.DocumentException;
import org.dom4j.Node;
import org.dom4j.io.SAXReader;

public class XmlParserForMining {

    public static Document getDocument( final String xmlFileName )
   {
      Document document = null;
      SAXReader reader = new SAXReader();
      try
      {
         document = reader.read( xmlFileName );
      }
      catch (DocumentException e)
      {
         e.printStackTrace();
      }
      return document;
   }

    public static void main(String[] args) {

      String xmlFileName = "/home/r/javaCodez/parsing in java/customer.xml";
      String xPath = "//table/T/C_ADDRESS";
      Document document = getDocument( xmlFileName );
      List<Node> nodes = document.selectNodes( xPath );
      System.out.println(nodes.size());

        for (Node node : nodes)
      {
         String customer_address = node.valueOf(xPath);
         System.out.println( "Customer address: " + customer_address);
      }
   }

} 
```

但是，我没有得到所有不同的客户记录，而是得到以下输出：

```
1500
Customer address: IVhzIApeRb ot,c,E
Customer address: IVhzIApeRb ot,c,E
Customer address: IVhzIApeRb ot,c,E
Customer address: IVhzIApeRb ot,c,E
Customer address: IVhzIApeRb ot,c,E
Customer address: IVhzIApeRb ot,c,E
Customer address: IVhzIApeRb ot,c,E
Customer address: IVhzIApeRb ot,c,E
Customer address: IVhzIApeRb ot,c,E
Customer address: IVhzIApeRb ot,c,E
Customer address: IVhzIApeRb ot,c,E
Customer address: IVhzIApeRb ot,c,E
Customer address: IVhzIApeRb ot,c,E
Customer address: IVhzIApeRb ot,c,E
Customer address: IVhzIApeRb ot,c,E
Customer address: IVhzIApeRb ot,c,E
Customer address: IVhzIApeRb ot,c,E
Customer address: IVhzIApeRb ot,c,E
Customer address: IVhzIApeRb ot,c,E
Customer address: IVhzIApeRb ot,c,E
Customer address: IVhzIApeRb ot,c,E
Customer address: IVhzIApeRb ot,c,E
Customer address: IVhzIApeRb ot,c,E
Customer address: IVhzIApeRb ot,c,E
Customer address: IVhzIApeRb ot,c,E 
```

等等 ..

这里有什么问题？为什么只打印第一条记录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T17:02:03.063

我怀疑这是问题所在：

```
String customer_address = node.valueOf(xPath); 
```

您为什么要再次尝试使用 XPath 查询？你不只是想要`node.getText()`或类似的东西吗？

# android - 如何检索通过意图传递的数据？

> ID：13610388
> 
> 赞同：0
> 
> 时间：2012-11-28T16:57:33.670
> 
> 标签：android, string, android-intent, android-notifications

我正在通过通知中的意图发送一些数据（字符串）。但是，当我尝试在通知启动的活动中接收它时，我什么也没收到。这是我的代码。请帮忙。

这是通知的代码：

```
int icon=R.drawable.ic_launcher;
                String ticket="Encrypted message";
                long when=System.currentTimeMillis();
                NotificationManager mNotificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
                Context context1 =getApplicationContext();
                String expandedText="You've received an encrypted message, click to view";
                String expandedTitle="Encrypted Message";
                Notification notification = new Notification(icon, ticket, when);
                Intent intent1=new Intent(context,Try.class);
                intent1.putExtra("MSG","Jumbo");
                PendingIntent launchIntent=PendingIntent.getActivity(context,0, intent1,0);

notification.setLatestEventInfo(context,expandedTitle,expandedText,launchIntent);
                mNotificationManager.notify(1,notification); 
```

这是我在 Try.class 中接收它的方式：

```
t = (TextView)findViewById(R.id.dec);
        String d = "";
        Intent I = getIntent();
        d = I.getStringExtra("MSG");
        String text = "This is an example";
        t.setText(d); 
```

没有错误 - 当我运行 TextView 时它被设置为空

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:17:09.490

那应该可以，尝试记录“d”的值

```
Log.d("Value of D", d); 
```

我认为您的问题是您的`TextView`t 设置不正确，因此没有显示结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:10:52.963

您是否曾经在通知程序中调用 setResult (Activity.RESULT_OK, intent)？您需要它，否则 Android 将永远不会重新启动您的“通话”活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:59:43.283

getIntent() 在那里不起作用，请尝试在您的活动中覆盖 onNewIntent 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T17:07:25.160

代替

```
Intent intent1=new Intent(context,Try.class); 
```

改成

```
Intent intent1=new Intent(YourActivity.this,Try.class); 
```

`onCreate()`用方法试试

```
t = (TextView)findViewById(R.id.dec);

Bundle extras = getIntent().getExtras(); 
String d;

 if (extras != null) {
      d = extras.getString("MSG");
  }   
t.setText(d); 
```

# git - 使用 git 别名丢失我的工作树

> ID：13610400
> 
> 赞同：2
> 
> 时间：2012-11-28T16:58:29.167
> 
> 标签：git, windows-7

每当我尝试使用我的一些 git 别名时，我都会遇到这个错误。

```
First, rewinding head to replay your work on top of it...
fatal: C:\Program Files (x86)\Git/libexec/git-core\git-am cannot be used without a working tree. 
```

特别是我的“git sync $1”

```
sync => !f() { git checkout $1 && git pull && git checkout - && git rebase $1 && git push --force origin HEAD;}; f 
```

如果我分别执行这些命令中的每一个，它就可以完美地工作。这个别名已经工作了很长一段时间，但偶尔会失败。谷歌一直非常渴望获得有关丢失工作树的信息。

有什么见解吗？提前致谢。

# silverstripe - 将请求转发到控制器操作

> ID：13610405
> 
> 赞同：2
> 
> 时间：2012-11-28T16:58:44.220
> 
> 标签：silverstripe

我想将请求转发给控制器以执行某些特定操作，而无需重定向到另一个 url。

因此，例如，以下网址：
**/home/peter**
应在内部变为
**/home/people/peter**

我知道我可以在“init”函数中捕获操作名称（“peter”），然后执行 Controller::redirect，但我想留在同一个 url，只需将请求在内部转发给“人” ' 行动。

2点需要注意：

*   'peter' 是一个动态字符串，所以我不能为此硬编码一条路线
*   控制器的任何其他操作仍然可以工作，因此只有几个字符串应该被转发（例如，'peter'、'ann' 被转发到 'people' 操作，而 'otherAction' 仍然是可调用的）

我已经在 Controller 类中找到了“handleAction”和“handleRequest”方法，但无法想象如何将它们用于我的任务。

SilverStripe 版本：3.0.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T22:14:53.177

我建议使用`static $url_handlers`describe [here](http://doc.silverstripe.org/framework/en/topics/controller#url-handling)，它允许您定义特定的操作路线。您的用例可以通过使用包罗万象的 url-handler 来实现。

但是因此我们必须注意每条路线的顺序。包罗万象的路线必须在最后定义。所有其他操作之前都需要一个单独的 url 处理程序：

```
public static $url_handlers = array(
    'otherAction' => 'otherAction',
    // ...
    'people/$Name' => 'people',
    '$Name' => 'people' // catch-all
); 
```

这应该符合你的解释。最后一条路由捕获之前未处理的所有动态路由。

但正如 Ingo 所提到的，两条路线都将提供相同的内容，这可能对 SEO 不利。您可以将第二条路由定位`people/$Name`到不同的操作，该操作仅使用 301 重定向到 url `$Name`。如果您已经有公共内容并且想用短版本替换现有的 URL，我会推荐这个。

我希望这可以解决您的问题（暂时）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:08:47.843

首先，我假设您有充分的理由制作重复的 URL（对 SEO 不利）:)

我已经尝试了一点`Director::direct()`，这将是最干净的，但没有得到任何结果。`Director::test()`重置大多数请求状态，因此也不符合条件。在一个新的控制器实例上调用`handleRequest()`或调用`handleAction()`是很棘手的，因为`Director`那时已经建立了很多状态（例如推送到控制器堆栈）。

因此，不幸的是，SilverStripe 路由不是那么灵活，您所做的任何事情都会深入到系统内部，并可能在下一个版本中中断。

# ruby-on-rails - :as 关联是如何工作的？

> ID：13610409
> 
> 赞同：0
> 
> 时间：2012-11-28T16:58:51.647
> 
> 标签：ruby-on-rails, polymorphism, metaprogramming

我的评论模型非常简单并且可以多态工作，但是我现在添加了隐藏给定记录的作者在这些多态关联中的评论的功能。

```
class Comment < ActiveRecord::Base
  attr_accessible :content, :show
  belongs_to :commentable, :polymorphic => true
  belongs_to :user
end 
```

因此，请求、问题、帖子、提交等......都有评论并且正在毫无问题地访问评论模板，但我希望允许这些模型中内容的作者显示或隐藏评论（而不是标记，对于例如）当应用程序将他们标识为所评论内容的作者时。

```
class Request < ActiveRecord::Base
   has_many :comments, :as => :commentable, :dependent => :destroy
end 
```

所以，当只有一个模型时，我可以通过调用作者：@request.user 来完成所有工作，但我想知道如何使用元编程调用作者，所以评论视图（在帮助下）可以确定当前是什么模型使用评论视图。

我对元编程进行了一些研究，但还没有找到答案。

这是调用作者（@request.user）的代码：

```
 <% if @comments %>
        <h1 class="mtop20">Comments</h1>
        <% for comment in @comments %>
           <% if signed_in? %>
                <% if comment.show == true %>
                   <div class="well comment mtop10">
                        <% if current_user == @request.user or current_user.has_role? :admin %>
                             <%= simple_form_for [@commentable, comment] do |f| %>
                              <div class ="">
                                <%= f.input :show, :as => :hidden, :input_html => { :value => false }  %>
                                <%= f.submit "Hide Comment", :class => 'btn btn-mini pull-right' %>
                              </div>
                            <% end %>
                        <% end %>
                        <span>
                           <%= image_tag comment.user.image.source(:header) %>
                           <%= link_to comment.user.name, comment.user %></span>
                           Posted <%= time_ago_in_words(comment.created_at) %> ago
                        </span>
                        <p class="mleft20 mtop10"><%= comment.content %></p>
                        <% if signed_in? %>
                            <% if current_user.id == comment.user_id or current_user.has_role? :admin %>
                                <%= link_to 'Edit', polymorphic_path([ comment.commentable, comment], :action => :edit), 
                                                    :class => 'btn btn-mini mtop5 mleft10' %>
                                <%= link_to 'Delete', [comment.commentable, comment],
                                                    :confirm => 'Are you sure?',
                                                    method: :delete, 
                                                    :class => 'btn btn-mini mtop5' %>
                            <% end %>
                        <% end %>
                   </div>
               <% end %>
               <% if comment.show == false %>
                  <p>A comment by <%= comment.user.name %> has been hidden by <%= @request.user.name %></p>
                  <% if current_user == @request.user or current_user.has_role? :admin %>
                     <%= simple_form_for [@commentable, comment] do |f| %>
                      <div class ="">
                        <%= f.input :show, :as => :hidden, :input_html => { :value => true }  %>
                        <%= f.submit "Show Comment", :class => 'btn btn-mini btn-success' %>
                      </div>
                    <% end %>
                  <% end %>
               <% end %>
          <% end %>
       <% end %>
    <% end %>
    <%= render "comments/form" %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T07:54:36.923

用于`comment.commentable.user`访问您的帖子的作者。

# windows-7 - 如何可靠地给予窗口焦点？

> ID：13610417
> 
> 赞同：4
> 
> 时间：2012-11-28T16:59:11.597
> 
> 标签：windows-7, google-chrome-extension

我需要将 Chrome 窗口焦点放在所有其他正在运行的应用程序上。Javascript 的 window.focus() 仅将焦点放在同一浏览器的其他窗口上。

当我的 Chrome 扩展程序执行时：

```
chrome.windows.update(theWindowId, {focused: true}); 
```

我在 Mac 和 Windows 7 上遇到了不同的行为：

*   在 a`Mac`上，预期的窗口将获得所有其他正在运行的应用程序的焦点。
*   在`Windows 7`中，预期窗口仅在其他 Chrome 窗口上获得焦点，而不是在其他正在运行的应用程序上。

有谁知道一种方法可以可靠地将预期的窗口焦点放在 Windows 上的所有应用程序上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-30T06:10:40.903

不幸的是，该`chrome.windows.update()`API 在如何处理跨平台窗口焦点方面仍然非常不可靠。我什至注意到*同一*平台上不同时间的不一致。这在很大程度上与不同操作系统用于窗口管理的不同安全策略有关，因此对于可能已应用或未应用的最终用户的功能，您实际上无能为力适当的注册表黑客。

# .net - 可变间隔定时器

> ID：13610418
> 
> 赞同：0
> 
> 时间：2012-11-28T16:59:15.463
> 
> 标签：.net, algorithm, timer

我正在编写一个自定义计时器类，它将根据一天中的计时器（可能还有一周中的一天）引发具有*可变间隔的事件以触发数据刷新。*至于粒度，我可能会在小时级别有不同的时间间隔。

到目前为止，我想出的最佳选择是使用 24 元素数组。每当计时器滴答作响时，您都会获取当前小时（24 小时）并索引到数组中以获取新的计时器间隔。我可能需要一些逻辑来处理从长间隔到短间隔会导致错过一些预期刷新的情况（例如，如果我们从长间隔变为短间隔，则在一小时的顶部截断）。

我正在寻找一种优雅的方式来做到这一点，任何维护我的代码的人都清楚，并且易于在代码中使用。有没有更好的算法/方法来做到这一点？

**额外细节：**

用户可以触发手动刷新，这会导致计时器重置。因此，计时器不需要勾选“按小时”或任何其他定期间隔（如`1:15, 1:30, 1:45`）。用户可能会在我们刚刚检查 2 分钟后触发刷新，所以如果我们每 15 分钟检查一次，我们可能会得到类似的结果：（`1:15, 1:30, 1:32, 1:47`用户手动刷新在`1:32`，所以我们重置计时器并在 15 分钟后自动刷新时间点）。

由于该间隔在我正在开发的系统中是标准的，因此我可以对它进行硬编码。此时不需要它是通用的间隔计时器（尽管欢迎本质上通用的解决方案）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:27:02.427

据我了解，您需要计时器子系统完成以下活动
1\. 以预定义的时间间隔自动触发系统刷新。
2.用户触发系统刷新，可以在任何情况下进行。
3.`ticker`监控上述情况并触发刷新的 A。

我在下面提供了一些建议——尽管可能无法完全回答您的所有疑问
1\. 以上列出的三个任务可以被识别为 3 个不同线程的一部分。这将一起设置和取消事件。即任务 1 和 2 将设置一个事件，而任务 3 将取消设置和事件，这些事件是同一线程之间共享的。
2.现在对于点-1，即预定义的区间，解变得更加简单。对于每个间隔（即假设您已计划刷新 10 分钟、13 分钟等），从当前时间开始计算下一个差分时间，当它为零时，您可以设置事件。

当然，你可以通过建模等来提高抽象`interval`。`Event(s)`但是根据我的经验，对于基于低级别精度的需求，例如计时器、调度等，我觉得一种**`C`**更合适的方法更合适。
！

# php - 使用内部连接对表进行分页

> ID：13610424
> 
> 赞同：1
> 
> 时间：2012-11-28T16:59:41.767
> 
> 标签：php, mysql, pdo

我需要一些帮助，我有以下查询：

```
SELECT
    l.*,
    d.*,
    i.*,
    DATE_FORMAT(l.date_created, '%d/%m/%Y') as date,
    UNIX_TIMESTAMP(l.date_created) as ts,
    DATE_FORMAT(d.date_deposit_made, '%d/%m/%Y') as date_deposit_made,
    l.commission_introducer
FROM
    tbl_client_commissions_log l
INNER JOIN
    tbl_client_deposits d
INNER JOIN
    tbl_initial_commissions i
ON
    l.fk_deposit_id = d.pk_deposit_id AND i.fk_client_id = d.fk_client_id

WHERE
    d.date_deposit_made BETWEEN ? AND ? AND l.system_fee = '0'

AND
    l.fk_introducer_id = ?

ORDER BY ? LIMIT ? OFFSET ? 
```

问题是当我设置一个 10 的限制和 0 的偏移量来启动它时。它只返回一行。

您如何对 2 个表之间的内部连接进行分页？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:12:20.723

我认为您可以简单地尝试`LIMIT`如下：

```
 LIMIT ?, ? 
```

其中第一个参数将设置为 0，第二个参数将设置为 10，你应该得到你的结果。

从这里的 MySQL 手册：

> 有两个参数，第一个参数指定要返回的第一行的偏移量，第二个参数指定要返回的最大行数。初始行的偏移量为 0（不是 1）：
> 
> 选择 * 从 tbl 限制 5,10；# 检索第 6-15 行

# java - 带有新消息通知的 Android WebView

> ID：13610431
> 
> 赞同：0
> 
> 时间：2012-11-28T16:59:49.790
> 
> 标签：java, php, android

我有基于 php 的消息传递应用程序，用户可以在其中登录并相互发送消息。我创建了一个 Android 应用程序，它是一个指向该网站的 WebView，为我的用户提供应用程序内的感觉。

现在我想在应用程序中添加一个通知功能，它会在用户每次收到消息时通知他们。

是否可以使用基于 WebView 的应用程序这样做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:03:54.163

每次有该用户的新消息时，您都可以使用 Google Cloud Messaging 从 php 发送通知。

看看这里[http://developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html)

# javascript - 在 Sencha Touch 中使 Nestedlist 的某些项目不可点击

> ID：13610445
> 
> 赞同：1
> 
> 时间：2012-11-28T17:00:32.863
> 
> 标签：javascript, sencha-touch

我有一个包含项目的嵌套列表。我想让一些项目无法点击。是否有要取消设置的变量或我可以设置的某种标志？

更新。在 items 下，我的意思是从 Store 对象加载的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:37:33.390

解决方案很简单。我刚刚覆盖`onItemTap`了我的嵌套列表的基本功能，并将我的功能基于基本功能的代码。比我实现了一些需要的逻辑，就是这样。

```
onItemTap: function(list, index, target, record, e) {
    var me = this,
    store = list.getStore(),
    node = store.getAt(index);

    var is_separator = record.get('separator');

    me.fireEvent('itemtap', this, list, index, target, record, e);
    if (node.isLeaf()) {
        if (! is_separator) {
            me.fireEvent('leafitemtap', this, list, index, target, record, e);
            me.goToLeaf(node);
        }
    } else {
        if (! is_separator) {
            this.goToNode(node);
        }
    }
} 
```

# security - 如何单独使用 Symfony2 Security？

> ID：13610452
> 
> 赞同：1
> 
> 时间：2012-11-28T17:00:43.720
> 
> 标签：security, symfony, acl, roles

文档说它是一个独立的组件。

鉴于我在空 index.php 文件中解析了以下 yaml，如何初始化安全性和检查角色等？

```
# app/config/security.yml
security:
    providers:
        default_provider:
            memory:
                users:
                    ryan:  { password: ryanpass, roles: 'ROLE_USER' }
                    admin: { password: kitten, roles: 'ROLE_ADMIN' } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:07:06.320

[Matthias Noback](https://stackoverflow.com/users/1415496/matthias-noback) hat 刚刚写了一些关于安全组件的文档。[您可以在 github 上](https://github.com/symfony/symfony-docs/pull/1604/files)阅读原始版本，但它会很快合并并在[http://symfony.com/doc/current/components/security/introduction.html上为您提供](http://symfony.com/doc/current/components/security/introduction.html)

或者您可以在将其更改为文档之前阅读他关于安全组件的博客文章：http: [//php-and-symfony.matthiasnoback.nl/category/security/](http://php-and-symfony.matthiasnoback.nl/category/security/)

# php - 我的函数总是返回一个布尔值而不是查询结果

> ID：13610454
> 
> 赞同：0
> 
> 时间：2012-11-28T17:00:46.017
> 
> 标签：php, mysqli

我有一个应用程序读取它的一个类：

```
public function __construct()
{
  global $config;
  //Establish a connection to the database and get results set
  $this->db = new Database("localhost",$config["dbuser"],$config["dbpass"],"student");
  $this->records = $this->db->query("SELECT * FROM major") or die("ERROR: ".$this->db->error);
  echo "<pre>".var_dump($this->records)."</pre>";
} 
```

我的问题是这`var_dump shows`是`$this->records`一个布尔值。我已经阅读了文档，发现 SELECT 查询应该返回一个结果集。这是应用程序使用的唯一查询。

数据库类：

```
 class Database
  {
      private $con;

     public function __construct($server,$user,$password,$database)
     {
        $this->con = new mysqli($server,$user,$password,$database) or die ("FATAL ERR: ".mysqli_error());
     }

    public function query($qry)
   {
     if(!isset($this->con)) die("ERROR: YOU ARE TRYING TO QUERY BEFORE THE CONNECTION IS ESTABLISHED!");
     return $this->con->query($qry) or die("FATAL ERROR:".$this->con->error);
   }
} 
```

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-10-14T09:15:04.830

这是不正确的。赋值运算符 ( `=`) 的优先级高于文字“或”运算符。（不要与“ `||`”运算符混淆，它的优先级高于“ `=`”。）

中似乎有一个错误`mysqli::query()`，导致它在极少数情况下在 select 语句上返回布尔值“true”。（合法的返回值将是布尔“假”或`mysqli_result`对象。）

您不必相信我的断言，您可以自己在 PHP shell 中轻松尝试：

```
$a = false or true;
var_dump($a); 
```

结果：

```
bool (false) 
```

那是因为上面的赋值等价于：

```
($a = false) or true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-16T19:00:56.780

这个问题的问题与`mysqli_query()`功能无关，而与[运算符优先级](http://php.net/manual/fa/language.operators.precedence.php)有关。

在那里，`=`运算符的优先级高于*运算*`OR`符，意味着将在之前执行分配`OR`（我在另一个答案中详细解释了这种行为，[mysqli or die，它必须死吗？](https://stackoverflow.com/questions/15318368/mysqli-or-die-does-it-have-to-die/15320411#15320411)）

问题线是

```
 return $this->con->query($qry) or die("FATAL ERROR:".$this->con->error); 
```

在这里，`return`运算符（出于显而易见的原因）可能具有最低优先级。意味着第一个 PHP 将执行逻辑运算符，然后返回其结果 - 一个布尔值！

但是为什么脚本实际上并没有因为逻辑运算符的执行而死掉呢？

由于上面链接的答案中解释了逻辑运算符执行优化。*PHP 不会费心去实际执行最右边的操作符。*最左边的已经计算为 就足够了，这`true`意味着整个表达式将返回`true`任何一种方式。

为了解决这个问题，函数的代码必须这样改变：

```
public function query($qry)
{
    $ret = $this->con->query($qry) or trigger_error($this->con->error);
    return $ret;
} 
```

而调用代码应改为简单

```
$this->records = $this->db->query("SELECT * FROM major");
echo "<pre>".var_dump($this->records)."</pre>"; 
```

调用，因为第二次检查错误是没有意义的——这个函数永远不会返回一个类似`false`的值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-10-15T20:03:26.083

答案将在所谓的魔术方法中。PHP 的神奇方法之一称为 __debugInfo()。如果定义了这个魔法方法，当你调用 var_dumb(obj) 时，它将输出函数所说的任何内容。通常这样做是为了隐藏父类的私有和受保护功能。

# date - 批处理 - 基于文件名提取关联变量值

> ID：13610456
> 
> 赞同：1
> 
> 时间：2012-11-28T17:00:49.667
> 
> 标签：date, batch-file, extract, filenames, classification

我的文件名看起来像这样 20120528_Sales_Store_001.pdf 20120529_Sales_Store_001.pdf 等

我需要从文件名中提取日期，然后将其关联到 2 个变量 Month Week

因此，对于日历中的每个日期，我需要能够关联周数和月份名称。

**这些是 FISCAL 日历周和月，因此与实际日历无关。**

例子

20120528 将是第 4 周和 4 月

20120529 将是第 5 周和 5 月

由于财政日历每年都在变化，我知道我每年都必须重做，但我正在寻找一种方法来最大限度地减少需要完成的工作。

所以我想设置类似的东西

第 4 周是从 ThisDate 到 ThisDate，也是四月

4 财年将从 20120403 到 20120430

并计算第 1-2-3-4 周（从每周日开始的周数）

Week5 是从 ThisDate 到 ThisDate，也是五月

5 财年将从 20120501 到 20120528

总是，2 个月有 4 周，然后第 3 个月有 5 周。

ETC

否则，我将不得不每天做一次......这将是很长的事情，而且每年都会更新。

之后我需要使用 Month 和 Week 变量进行目录分类，这就是我需要它的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T23:13:55.313

```
setlocal ENABLEDELAYEDEXPANSION
set the_file=20120528_Sales_Store_001.pdf

for /f "tokens=1 delims=_" %%F in ("!the_file!") do (
   set date=%%F
   set month=!date:~4,6!
   set day=!date:~6!
   set /a week_of_the_month=!day! / 7
   set /a modolus="!day! %% 7"
   if !modolus! GEQ 4 (
       set /a week_of_the_month=!week_of_the_month!+1
   )

   echo !the_file! is in the !week_of_the_month!th week of the month
   echo !the_file! >> week_!week_of_the_month!_of_!month!_month.txt

)
endlocal 
```

这应该将文件名写入 week_XX_of_XX_month.txt 时间。这可以包装在另一个`FOR /F`将遍历文件的文件中。文件也可以复制，再多一点`SETs`可以将月份数更改为它的名称。我找不到更好的方法来计算月份中的周数。您需要更多改进吗？

**更新：**

```
setlocal ENABLEDELAYEDEXPANSION
pushd %traverse_dir% 
for /f %%D  in ('dir /b *.pdf ^|findstr "[1234567890_]" ') do (
        for /f "tokens=1 delims=_" %%F in ("%%D") do (
           set date=%%F
           set month=!date:~4,6!
           set day=!date:~6!
           set /a week_of_the_month=!day! / 7
           set /a modolus="!day! %% 7"
           if !modolus! GEQ 4 (
               set /a week_of_the_month=!week_of_the_month!+1
           )

           echo !the_file! is in the !week_of_the_month!th week of the month
           echo !the_file! >> week_!week_of_the_month!_of_!month!_month.txt

        )
)
endlocal
popd 
```

# repository - 如何为 ATG 中的存储库项启用延迟加载

> ID：13610459
> 
> 赞同：2
> 
> 时间：2012-11-28T17:01:02.427
> 
> 标签：repository, atg

我想知道如何延迟加载 ATG 中指定的存储库项。我已经尝试了[延迟加载设置](http://docs.oracle.com/cd/E24152_01/Platform.10-1/ATGRepositoryGuide/html/s1016lazyloadingsettings01.html)下的 ATG 存储库指南中给出的所有选项，但到目前为止，配置为延迟加载的项目的所有属性都与父项目一起获取。

例如，如果用户实体与组织具有一对多关系，则加载用户存储库项目会导致加载用户的所有组织项目及其属性，例如帐单和送货地址。即使不使用组织集合也会发生这种情况。

除了存储库指南中给出的内容或任何陷阱之外，任何带有一些示例的回复都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T00:42:03.797

当属性启用了**延迟加载**时，该属性**不会**与存储库项一起从数据库中获取。该属性将在需要时从数据库中加载（使用另一个 SQL 查询），即。在页面中显示或在组件中使用的属性。

使用延迟加载属性有意义的几个例子：

1.  当存储库具有不使用的属性（通常包含大量内容）时，通常最好启用延迟加载，例如，您可能有一个“新闻”存储库项目类型，其属性如下：标题、创建日期、内容（长字符串）。如果您显示按创建日期排序的新闻项目列表（仅标题），则仅加载标题和创建日期是有意义的。因此内容属性应该启用延迟加载。当您访问特定新闻项目时，将获取该属性。您不必在新闻列表演示期间加载所有内容属性，这将提高页面显示性能。

2.  另一个示例（类似于上面）可能是产品目录和产品描述属性。通常在类别页面中，您只显示产品标题和图像。仅在显示产品页面时才加载和显示产品描述。为了提高类别（或子类别）页面的性能，将产品描述属性设置为延迟加载是有意义的。

3.  如果查询返回大量存储库项目并且您大部分时间只使用其中的几个项目，那么使用延迟加载也是一个好习惯。未使用的（它们不必包含大量内容）可以延迟加载。

我一直在我的所有 ATG 项目中使用延迟加载属性，我认为这是一个很棒的功能。但是，在应用它之前，您必须考虑所有优点和缺点。有时它可能弊大于利。

我希望这将帮助您更好地理解延迟加载并享受在您的项目中使用该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-18T22:01:41.080

ATG 中的订单历史记录是延迟加载何时有用的一个很好的例子。如果您考虑一个典型的用例，它是这样的：

1.  用户查看订单历史页面，即他们过去所有订单的列表
2.  浏览结果，直到他们找到他们有兴趣查看的订单
3.  查看订单或订单的一小部分

如果不启用延迟加载，ATG 将在查看过去订单摘要时为该特定用户加载所有订单对象。订单对象是一个非常大且复杂的对象，加载多个订单会消耗数据库和应用服务器上的大量资源。

当用户查看订单历史页面时启用延迟加载，仅加载显示过去订单列表所需的信息，不会加载该页面直接不需要的任何信息。如果用户随后点击单个订单，则此时会加载任何附加信息。

# javascript - 如何在 AJAX 请求期间保留由 JavaScript 修改的文本？

> ID：13610462
> 
> 赞同：1
> 
> 时间：2012-11-28T17:01:13.700
> 
> 标签：javascript, asp.net, ajax, text, scriptmanager

我有一个文本框，`autopostback = true`我有一个 JavaScript 函数来验证它。JavaScript 函数在值 OK 时也会进行一点格式化，但是当我从 PageRequestManager add_beginRequest 或 add_initializeRequest 调用它时，值会在处理后更改。我怎样才能做到这一点？

首先我控制请求：

```
try {
        Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(BeginRequestHandler);
        Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler);
        Sys.WebForms.PageRequestManager.getInstance().add_initializeRequest(InitializeRequest);
    }
    catch (e) { } 
```

然后我让我的处理程序调用验证函数并传递我想要的验证类型。那么 precallbackvalidation 是我的自定义验证功能，如果有错误，它将拒绝部分回发，但如果验证没问题，验证功能已经在我的文本框中制作了一些格式，这些格式在回发后丢失。

```
function InitializeRequest(sender, args) {
    if (typeof precallbackvalidation == 'function') {
        if ($(args._postBackElement).attr("PreCallBackIndex") != null) {
            if (!precallbackvalidation(args._postBackElement)) {
                args.set_cancel(true);
            }
        }
    }
} 
```

我想知道如何通过 JavaScript 格式化我的文本，并且在回发后不会丢失它。

```
<asp:textbox ID="txtRut" runat="server" MaxLength="13" size="13" Width="75px" TabIndex="1" AutoPostBack="true" PreCallBackIndex="rutcte" ></asp:textbox> 
```

在我的页面上，我有带有触发验证的属性的文本框和验证功能。

```
function precallbackvalidation(obj) {
    var index = $(obj).attr("PreCallBackIndex");
    if ($(obj).length > 0) {
        switch (index) {
            case 'rutcte':
                return ValidarTipo('rut', obj, true);                    
                break;
            case 'ptjegastos':
                if (ValidarTipo('entero', obj)==false) {
                    if (ValidarTipo('real', obj)==false) {
                        return false;
                    }
                }
                return true;
                break;
            case 'ptjemargen':
                if (ValidarTipo('entero', obj) == false) {
                    if (ValidarTipo('real', obj) == false) {
                        return false;
                    }
                }
                return true;
                break;
            case 'ptjeppm':
                if (ValidarTipo('entero', obj) == false) {
                    if (ValidarTipo('real', obj) == false) {
                        return false;
                    }
                }
                return true;
                break;
            case 'ptjecomision':
                if (ValidarTipo('entero', obj) == false) {
                    if (ValidarTipo('real', obj) == false) {
                        return false;
                    }
                }
                return true;
                break;
            default:
                return true;
                break;
        }
    }
    else {
        return true;
    }
} 
```

the `ValidarTipo`(or `ValidateTypes`in English) 是 JavaScript 中的一个通用函数，它为 'rut' 选项提供格式；但是在所有过程结束后该格式会丢失

当我在文本框中写“19”时，JavaScript 函数将此文本格式化为“1-9”，但是当请求过程在`beginrequest`or之后继续时`initializerequest`，AJAX 过程似乎清除了 JavaScript 的修改并让我的文本回到“ 19"

# javascript - 如何在 Meteor 中的多个模板之间切换？

> ID：13610465
> 
> 赞同：3
> 
> 时间：2012-11-28T17:01:22.130
> 
> 标签：javascript, meteor

我的流星应用程序有一个 base.html 文件，如下所示：

```
<head>
  <title>MyApp</title>
</head>

<body>
    <template name="bodyContent">
        {{subContent}}
    </template>
</body> 
```

接下来，我定义了三个不同的模板：

```
<template name="templateA">Some text</template>
<template name="templateB">Bla bla bla</template>
<template name="templateC">Your highscore is {{score}}</template> 
```

**我怎样才能使 {{subContent}} 能够在运行时在这三个模板之一之间交替？**

就像是：

```
currentTemplateUsed = 'templateB'

Template.bodyContent.subContent = Template[currentTemplateUsed] 
```

但这不起作用。是否有其他方法可以实现此功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:05:49.967

您应该使用[流星路由器](https://github.com/tmeasday/meteor-router)，它能够动态更改模板。可能的缺点是它一次只能更改***一个***模板。

或者，有一些关于 Meteor 的把手的信息： [https ://github.com/meteor/meteor/wiki/Handlebars](https://github.com/meteor/meteor/wiki/Handlebars)

基本上，您必须将模板用作函数，并将数据传递给它以便 Handlebars 解析它，如下所示：

```
var currentTemplateUsed = 'templateC';

var data = {
   score : 12
}

Template.bodyContent.subContent = Template[currentTemplateUsed](data); 
```

退货`Your highscore is 12`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T02:50:38.770

里面的模板`<body> ... </body>`似乎不起作用，我无法在里面传递数据。我可能错了，但我不得不把它放在外面并使用：

```
<body>
  {{> body_content}}
</body> 
```

# ajax - 在 AJAX 请求中使用的更好方法？$.POST 还是 $.AJAX？

> ID：13610468
> 
> 赞同：0
> 
> 时间：2012-11-28T17:01:29.070
> 
> 标签：ajax, jquery

我看过很多关于发出ajax请求的文章..

其中大多数`$.AJAX`用于 jquery ajax 发布，其中一些`$.POST`用于 jquery ajax 发布...

我想知道如果我想使用 ajax**发布最好的方法是什么？**哪种方法使 ajax 请求快速且轻量级？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:03:32.230

`$.post`是`$.ajax`用于`POST`请求的简写方式，所以没有区别。

`$.ajax`如果您需要一些高级配置，通常会更好地使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:03:48.710

`$.post`只是`$.ajax({type: 'POST'})`. 它对请求的速度或重量没有影响，只是改变了代码的可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T17:04:42.160

`$.post`只是`$.ajax({ type: 'POST' })`[[参见参考资料](http://api.jquery.com/jQuery.post/)] 的简写，因此没有可接受的性能改进，但仍然是可读性改进。

# ruby - pp 无法处理 ruby 文件

> ID：13610469
> 
> 赞同：-4
> 
> 时间：2012-11-28T17:01:33.327
> 
> 标签：ruby, fold, perl-packager

**[如pp](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/pp/rdoc/PP.html)文档所述，如何让 pp 将行长换行（限制）为 79 个字符？**

以下示例演示了 pp 不将输出限制为默认长度 79，如[pp](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/pp/rdoc/PP.html)文档中所述。

*   (1) 将以下代码放入文件(pprfile.rb)。

> ```
> #!/usr/bin/env ruby
> require 'pp'
> STDIN.read.split("\n").each do |l|
>   PP.pp(l)
> end 
> ```

*   (2) 将 Github 错字[代码](https://github.com/fdv/typo/blob/master/app/controllers/accounts_controller.rb)repo 和 cd 克隆到 repo 目录中。
*   (3) 运行以下命令行：
    *   pprfile.rb < ./app/controllers/accounts_controller.rb | awk '长度($0) > 79 { 打印长度($0), $0 }'
*   (4) 我希望所有的输出行都限制在小于或等于 79 个字符，但这是 II 得到的输出：

    > ```
    > 89 "      redirect_back_or_default :controller => \"admin/dashboard\", :action => \"index\""
    > 94 "      self.current_user = User.authenticate(params[:user][:login], params[:user][:password])"
    > 82 "          self.current_user.remember_me unless self.current_user.remember_token?"
    > 82 "        add_to_cookies(:typo_user_profile, self.current_user.profile_label, '/')"
    > 91 "        redirect_back_or_default :controller => \"admin/dashboard\", :action => \"index\""
    > 80 "    @page_title = \"#{this_blog.blog_name} - #{_('Recover your password')}\""
    > 124 "      @user = User.find(:first, :conditions => [\"login = ? or email = ?\", params[:user][:login], params[:user][:login]])"
    > 108 "        flash[:notice] = _(\"An email has been successfully sent to your address with your new password\")"
    > 88 "    redirect_to(:controller => \"accounts\", :action => \"signup\") if User.count == 0"
    > 92 "    redirect_to :controller => \"setup\", :action => \"index\" if  ! this_blog.configured?"</li> 
    > ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:34:15.553

我猜是因为“pp”只*在*原子数据元素之间中断，而不是*在*它们内部。原子元素将是非复合类型（例如字符串、符号、数字等）。

也就是说，如果您有一个数组，其序列化元素将超过 79 列，则“pp”将序列化该数组，并在元素之间使用换行符。但是，如果其中一个元素是 100 个字符的字符串，那么该元素将按原样序列化，大概是因为“pp”不想决定在哪里破坏该“原子”元素。

考虑：

```
pp(Array.new(100, 'foo')) # => <breaks between each element>
pp('x' * 100) # => <displays on one line since it doesn't know where to break> 
```

# c - 在 C 代码中计算函数时间（以纳秒为单位）

> ID：13610471
> 
> 赞同：7
> 
> 时间：2012-11-28T17:01:43.813
> 
> 标签：c, windows, time

我需要知道如何计算 C 代码中函数的时间（以纳秒为单位）。我试图重复该功能，直到消耗一些微秒。是否有任何其他函数`time.h`可用于计算以纳秒为单位的时间？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T17:30:54.673

你永远不会得到纳秒级的精度。想想你在问什么：在 1 GHz CPU 上，1 纳秒是一个时钟周期。无论您尝试调用什么，都永远不会获得那种准确性，最好坚持微秒。这里有一个带有许多示例的类似问题：[C++ Cross-Platform High-Resolution Timer](https://stackoverflow.com/questions/1487695/c-cross-platform-high-resolution-timer)。

仅适用于 c：在要使用[QueryPerformanceCounter](http://support.microsoft.com/kb/172338)的 Windows 上。这里有更多关于[QPC](http://msdn.microsoft.com/en-us/library/ms979201.aspx)的内容。[这](https://stackoverflow.com/questions/1739259/how-to-use-queryperformancecounter)是有关如何使用 QueryPerformanceCounter 的相关问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T17:37:17.553

无论您如何处理此问题或使用哪种类型的系统/操作系统，您最多只能得到一个近似答案，但由于问题的性质而存在相当大的差异。

其次，您需要一个支持这种调用的系统。如果您使用 QNX Neutrino，这很容易：

[http://www.qnx.com/developers/docs/6.3.0SP3/neutrino/lib_ref/c/clock_gettime.html](http://www.qnx.com/developers/docs/6.3.0SP3/neutrino/lib_ref/c/clock_gettime.html)

```
/*
 * This program calculates the time required to
 * execute the program specified as its first argument.
 * The time is printed in seconds, on standard out.
 */
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <time.h>

#define BILLION  1000000000L;

int main( int argc, char** argv )
  {
    struct timespec start, stop;
    double accum;

    if( clock_gettime( CLOCK_REALTIME, &start) == -1 ) {
      perror( "clock gettime" );
      return EXIT_FAILURE;
    }

    system( argv[1] );

    if( clock_gettime( CLOCK_REALTIME, &stop) == -1 ) {
      perror( "clock gettime" );
      return EXIT_FAILURE;
    }

    accum = ( stop.tv_sec - start.tv_sec )
             + (double)( stop.tv_nsec - start.tv_nsec )
               / (double)BILLION;
    printf( "%lf\n", accum );
    return EXIT_SUCCESS;
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T18:19:42.437

标准 C 中的`clock`函数对此没有用处。它通常具有可怕的分辨率，并且（在平台之间）无论是测量经过的墙壁时间还是消耗的 CPU 时间都不一致。您应该使用 POSIX 标准`clock_gettime`函数（它具有纳秒级分辨率，并允许您指定要测量的时钟）并使用缺少 POSIX 函数的平台上可用的任何系统特定时钟操作来模拟它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T21:57:17.557

调用该函数的次数足以让您在几秒钟内获得总时间，并使用任何方法进行测量（甚至是普通的 C 时钟（））。以微/纳秒为单位进行测量本身就太不精确了。

对于基准测试，您需要[QueryPerformanceCounter](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904%28v=vs.85%29.aspx)。它是 Windows 上最好的秒表。请参阅：[如何使用 QueryPerformanceCounter？](https://stackoverflow.com/questions/1739259/how-to-use-queryperformancecounter) 然而，使用它来测量（例如）单个函数调用本质上仍然非常不精确；我认为您需要花费大约一秒钟的时间才能为您的测量获得良好的信噪比。对您想要的任何持续时间进行多次测量，并将它们的值与其标准偏差进行比较，以确保您的测量足够准确。

[多媒体计时器](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743609%28v=vs.85%29.aspx)可能是 Windows 上最好的时钟（注意时钟和秒表之间的区别：一个测量绝对时间，另一个仅测量时间间隔）。您应该能够使用[timeGetTime](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757629%28v=vs.85%29.aspx) () 获得接近毫秒的分辨率和精度。

# java - 识别触发 onTap 调用的 GeoPoint

> ID：13610473
> 
> 赞同：0
> 
> 时间：2012-11-28T17:01:47.777
> 
> 标签：java, android, google-maps, google-maps-markers

我正在 Android 上开发谷歌地图应用程序。我通过将它们作为 OverlayItems 添加到 ItemizedOverlay 来显示许多 GeoPoints。这很适合显示它们并在我单击它们时显示一个漂亮的框，但是我试图将信息放入它显示的框中。

因此，我用我自己的类扩展了 ItemizedOverlay，并且我覆盖了`onTap (final GeoPoint p, final MapView mapView)`. 起初我以为这会很简单，因为其中一个参数是 GeoPoint，所以我会确切地知道点击了哪个 GeoPoint。但是，据我所知，GeoPoint 参数是用户实际触摸位置的 GeoPoint。鉴于用户可以触摸并仍然触发 的范围`onTap`，该 GeoPoint 对于准确了解实际触摸了哪个 GeoPoint 并不是很有帮助。

我目前正在根据我所有现有的 GeoPoints 检查参数 GeoPoint 并查看它最接近哪个。这似乎是一个超级 hacky 的抽象反转。有没有更好的方法来了解实际被窃听的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T23:49:30.367

而不是`onTap (final GeoPoint p, final MapView mapView)`你应该覆盖该方法：

```
@Override
protected boolean onTap(int index){
    //you code here
} 
```

哪里`index`会指向右边`OverlayItem`。

问候。

# coldfusion - 在 CKFinder 中自定义 baseUrl 和 baseDir

> ID：13610474
> 
> 赞同：3
> 
> 时间：2012-11-28T17:01:58.760
> 
> 标签：coldfusion, ckfinder

我们在许多 CMS 应用程序中使用 CKEditor 和 CKFinder for Coldfusion。这些应用程序指向我们服务器上的不同站点，因此我们希望 CKFinder 设置将文件上传到每个应用程序特定的目录。但是我们希望服务器上的 CKEditor 和 CKFinder 文件有一个共享位置。

在 config.cfm 文件中，我们设置了默认的 baseURL 和 baseDir，如下所示：

```
config.baseUrl = "http://www.oursite.com/_files/site1/ckfinder_uploads/";    
config.baseDir = '\\ourserver01\_files\site1\ckfinder_uploads\'; 
```

在每个应用程序的头文件中，我们包含以下内容以实例化 CKEditor 和 CKFinder（包括 jQuery 适配器）：

```
<script type="text/javascript" src="/shared/ckeditor/ckeditor.js"></script>
<script type="text/javascript" src="/shared/ckeditor/adapters/jquery.js"></script>
<script type="text/javascript" src="/shared/ckfinder/ckfinder.js"></script>

<script type="text/javascript">
  $(document).ready(function(){
    CKFinder.setupCKEditor( null, '/shared/ckfinder/' );
  });
</script> 
```

当我在其中一个应用程序中打开 CKFinder 窗口时，它会正确打开到默认的 baseURL/baseDir。但是，如何覆盖这些默认值？我尝试将 CKFinder setupCKEditor 函数更改为以下内容，但没有成功：

```
CKFinder.setupCKEditor( null, { basePath:'/shared/ckfinder/', baseUrl:"http://www.oursite.com/_files/NEWSITE/ckfinder_uploads/", baseDir:"\\\\ourserver01\\_files\\NEWSITE\\ckfinder_uploads\\" } ); 
```

它只是忽略了这一点并使用了默认值。想法？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:04:27.667

这就是我所做的。它并不完美，但它有效。使用 CF，在您设置 baseUrl 和 baseDir 的 CKFinder 目录中有一个 config.cfm 文件。在那里，我将这两个变量的值设置为两个对应的浏览器 cookie。然后我在不同应用程序的标题中设置 cookie 值，以便它们可以反映我所在的应用程序。

不利的一面是，如果您打开了 2 个应用程序，则只有您最近打开的应用程序会设置正确的 cookie 值。如果有人知道更好、相似（或不相似）的方法，我会很感兴趣。

谢谢！缺口

# ruby - 疑难解答 ruby 要求

> ID：13610477
> 
> 赞同：1
> 
> 时间：2012-11-28T17:02:08.920
> 
> 标签：ruby, require

Ruby 要求仅适用于我的 gem，而不适用于我编写的代码。我不确定我做错了什么。

**这有效**

```
require "test-unit"
require "require "C:\\Users\\zreichert\\workspace\\FalconQA\\PageObjects\\Users\\user.rb" 
```

**这不起作用**

```
require "Users/user"
require "Users\user"
require "Users/user.rb"
require "Users\user.rb"
require_relative "Users/user"
require_relative "Users\user"
require_relative "Users/user.rb"
require_relative "Users\user.rb" 
```

我正在运行的脚本位于 - C:/Users/zreichert/workspace/FalconQA/testCases

我曾尝试像这样在需要之前更改目录

```
Dir.chdir "C:/Users/zreichert/workspace/FalconQA/testCases" 
```

所有错误看起来都像这样

c:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- Users/user (LoadError) from c:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in`require' 来自 C:/Users/zreichert/workspace/FalconQA/testCases/FAL001.rb:14:in `

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:21:06.037

你可以试试

```
require "./Users/user" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:17:07.937

只是为了稍微扩展[Roozbeh](https://stackoverflow.com/users/1669634/roozbeh)的答案，`require_relative`允许您加载相对于包含文件的位置的文件，`require_relative`这样做`chdir`不会对此产生任何影响。

根据您在问题中所说的，从 FAL001.rb 到 user.rb 的相对路径是

```
../PageObjects/Users/user.rb 
```

即上一层，然后下到 PageObjects/Users，因此

```
require_relative '../PageObjects/Users/user.rb' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T17:08:18.873

你可以使用这个：

```
require_relative '../PageObjects/Users/user.rb' 
```

斜杠比两个反斜杠好，因为它可以在 Windows 和 Linux/MacOS 中使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T17:47:25.023

`"Users\user"`作为心理安全提示，由于转义字符在双引号字符串中的解释方式，任何看起来都将失败。

相反，为您的参数使用单引号`require`以保持您的理智：

```
require 'foo' 
```

或者

```
require './relative/path/to/foo'
require '../relative/path/to/bar' 
```

# android - 模拟物理 RFID 卡的 Android 应用程序

> ID：13610478
> 
> 赞同：26
> 
> 时间：2012-11-28T17:02:14.303
> 
> 标签：android, nfc, rfid, apdu, ndef

Android 应用程序是否可以将先前存储的 RFID 卡 ID 发送到 NFC 读卡器？其目的是使用 Android 设备而不是物理 RFID 卡来访问房间。在阅读了很多关于 NFC/RFID 和卡仿真的其他主题后，我得出的结论是它目前在 Android 中不可用，但如果它适用于这种特殊情况，我仍然有点困惑。应用程序不能简单地在 NDEF 消息或 APDU 命令中发送卡 ID，或者我只是在做梦吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-28T20:47:32.367

嗯，严格来说。对于您想要做的事情，您不需要卡仿真。您只需向可以验证的门锁发送一个令牌。

您可以通过将 NDEF 消息推送到兼容的设备来使用 Android Beam 执行此操作，SNEP 是您要寻找的协议。

我更喜欢的解决方案是让门锁设备模拟标签。然后，您可以让您的 Android 应用为该标签注册一个侦听器（甚至不需要运行）。当检测到标签时，应用程序将启动并使用标签在 Android SDK 中编写 NFC 功能将您的安全令牌发送到锁。

保护您的令牌是另一回事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:30:22.643

安卓视图：

长话短说：这是不可能的。

长话短说：

从硬件和软件的角度来看，这样做是可能的。NFC 芯片完全能够模拟大多数（不是全部）标准标签。执行此操作的功能甚至内置在较低级别的软件中，但不暴露给应用程序。

原因：模拟标签是整个移动支付基础设施的基础。对于大多数 NFC 芯片来说，同时允许两个相同类型的卡模拟是不可能的，并且还会关闭移动支付，因为移动支付读卡器一次只接受一个标签（出于安全原因）。

对于基于 RIM 的黑莓手机来说，情况有点不同，它们允许卡模拟（甚至开箱即用），但据我所知，它们目前不进行任何移动支付。

# xcode - 无法在旧 Xcode 3.1 中使用调试

> ID：13610479
> 
> 赞同：0
> 
> 时间：2012-11-28T17:02:16.860
> 
> 标签：xcode, macos, debugging, xcode3.2

我有一个 mac os x 应用程序，它是在 Xcode 3.1.1 中开发的，现在我需要重新开发它。

当然，我无法在最新的 Xcode 4.5 中构建它，而且我很难更改设置以使其在 Xcode 4.5 中工作。

所以我下载了 Xcode 3.1.1，它构建好了。但我就是不能使用调试。nslog 可以在控制台正常显示。我需要调试。

谁知道怎么修它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:06:12.980

使用 Xcode 3.2.6 - 它在 Lion 和 Mountain Lion 上仍然运行良好（我每天在 Mountain Lion 上使用它）并且它应该能够构建和调试您的遗留项目而无需任何更改。

# google-app-engine - 如何在谷歌驱动器上保存流？

> ID：13610480
> 
> 赞同：2
> 
> 时间：2012-11-28T17:02:17.323
> 
> 标签：google-app-engine, google-drive-api

我的应用程序在谷歌应用引擎上运行，所以不能使用文件。我想将其他网站上的 pdf 文件保存到谷歌驱动器，但得到 IllegalArgumentException

```
file.setMimeType("application/pdf");
mediaContent = new InputStreamContent(file.getMimeType(),
                   url.openStream());

try {
    File result = getDrive().files().insert(file, mediaContent)
                .execute();
        return result.getId();
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:31:25.153

查看 Google Drive SDK 文档以获取在 App Engine 上运行的完整 Java 示例应用程序，展示如何读取文件并将其保存到 Drive：

[https://developers.google.com/drive/examples/java](https://developers.google.com/drive/examples/java)

# c# - 无论 .NET 版本/环境如何，都能保证找到 ildasm.exe 和 ilasm.exe 文件的文件路径？

> ID：13610483
> 
> 赞同：10
> 
> 时间：2012-11-28T17:02:24.787
> 
> 标签：c#, .net, filepath, ilasm, ildasm

有没有办法以编程方式获取 ildasm.exe/ilasm.exe 可执行文件的 FileInfo/Path？在对 dll/exe 文件进行一些更改后，我正在尝试对其进行适当的反编译和重新编译（我猜 PostSharp 做了类似的事情来在编译后更改 IL）。

我发现一篇博客文章指出：

```
var pfDir = Environment.GetFolderPath(Environment.SpecialFolders.ProgramFiles));
var sdkDir = Path.Combine(pfDir, @"Microsoft SDKs\Windows\v6.0A\bin");

... 
```

但是，当我运行此代码时，该目录不存在（主要是因为我的 SDK 版本是 7.1），所以在我的本地机器上，正确的路径是`@"Microsoft SDKs\Windows\v7.1\bin"`. 如何确保我可以真正找到 ildasm.exe？

同样，我发现了另一篇关于如何访问 ilasm.exe 的博客文章：

```
string windows = Environment.GetFolderPath(Environment.SpecialFolder.System);
string fwork = Path.Combine(windows, @"..\Microsoft.NET\Framework\v2.0.50727");

... 
```

虽然这可行，但我注意到我有 Framework 和 Framework64，并且在 Framework 本身内我有所有版本，直到 v4.0.30319（与 Framework64 相同）。那么，我怎么知道该使用哪一个呢？它应该基于我所针对的 .NET Framework 版本吗？

概括：

*   如何适当地保证找到 ildasm.exe 的正确路径？
*   如何正确选择正确的 ilasm.exe 进行编译？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-02-15T20:28:22.473

一种选择是参考`Microsoft.Build.Utilities.Core`和使用：

```
var ildasm = Microsoft.Build.Utilities.ToolLocationHelper.GetPathToDotNetFrameworkSdkFile("ildasm.exe", TargetDotNetFrameworkVersion.VersionLatest);
var ilasm = Microsoft.Build.Utilities.ToolLocationHelper.GetPathToDotNetFrameworkFile("ilasm.exe", TargetDotNetFrameworkVersion.VersionLatest); 
```

现在在我的机器上返回：

伊达斯姆 =`C:\Program Files (x86)\Microsoft SDKs\Windows\v10.0A\bin\NETFX 4.6 Tools\ildasm.exe`

伊斯兰=`C:\Windows\Microsoft.NET\Framework\v4.0.30319\ilasm.exe`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-08T18:20:54.843

我最近需要这样做，所以我在互联网上搜索了 Windows SDK 的所有可能路径，并以最近已知的顺序搜索这些路径。我还检查操作系统和进程是否为 64 位，然后通过查看相应的 Program Files 文件夹来使用该版本。我不认为选择 64 位而不是 32 位版本的工具有什么重大意义。x86 版本的 ILAsm 可以轻松地组装 64 位首选程序集，这完全是 IL，实际上并不执行任何代码。

ILDasm 是 Windows SDK 的一部分，而 ILAsm 只是 .NET Framework SDK，所以这里有一些静态方法可以用来追踪它们。该代码是为 .NET 4.0 编写的，但如果需要，您可以进行一些小的调整以使其在 .NET 2.0 上构建。

```
// ILDasm.exe will be somewhere in here
private static string FindPathForWindowsSdk()
{
  string[] windowsSdkPaths = new[]
  {
    @"Microsoft SDKs\Windows\v8.0A\bin\NETFX 4.0 Tools\",
    @"Microsoft SDKs\Windows\v8.0A\bin\",
    @"Microsoft SDKs\Windows\v8.0\bin\NETFX 4.0 Tools\",
    @"Microsoft SDKs\Windows\v8.0\bin\",
    @"Microsoft SDKs\Windows\v7.1A\bin\NETFX 4.0 Tools\",
    @"Microsoft SDKs\Windows\v7.1A\bin\",
    @"Microsoft SDKs\Windows\v7.0A\bin\NETFX 4.0 Tools\",
    @"Microsoft SDKs\Windows\v7.0A\bin\",
    @"Microsoft SDKs\Windows\v6.1A\bin\",        
    @"Microsoft SDKs\Windows\v6.0A\bin\",
    @"Microsoft SDKs\Windows\v6.0\bin\",
    @"Microsoft.NET\FrameworkSDK\bin"
  };

  foreach (var possiblePath in windowsSdkPaths)
  {
    string fullPath = string.Empty;

    // Check alternate program file paths as well as 64-bit versions.
    if (Environment.Is64BitProcess)
    {
      fullPath = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ProgramFiles), possiblePath, "x64");
      if (Directory.Exists(fullPath))
      {
        return fullPath;
      }

      fullPath = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ProgramFilesX86), possiblePath, "x64");
      if (Directory.Exists(fullPath))
      {
        return fullPath;
      }
    }

    fullPath = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ProgramFiles), possiblePath);
    if (Directory.Exists(fullPath))
    {
      return fullPath;
    }

    fullPath = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ProgramFilesX86), possiblePath);
    if (Directory.Exists(fullPath))
    {
      return fullPath;
    }
  }

  return null;
}

// ILAsm.exe will be somewhere in here
private static string FindPathForDotNetFramework()
{
  string[] frameworkPaths = new[]
  {
    @"Microsoft.NET\Framework\v4.0.30319",
    @"Microsoft.NET\Framework\v2.0.50727"
  };

  foreach (var possiblePath in frameworkPaths)
  {
    string fullPath = string.Empty;

    if (Environment.Is64BitProcess)
    {
      fullPath = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Windows), possiblePath.Replace(@"\Framework\", @"\Framework64\"));
      if (Directory.Exists(fullPath))
      {
        return fullPath;
      }
    }

    fullPath = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Windows), possiblePath);
    if (Directory.Exists(fullPath))
    {
      return fullPath;
    }
  }

  return null;
} 
```

您可以通过传入您正在寻找的可执行文件来增强它，并将*Directory.Exists*更改为*File.Exists*，这取决于您。您还可以获取可能的列表并将它们放入配置文件中，这样您就可以在不重新编译的情况下添加更多列表。

# python - Matplotlib 图例字幕

> ID：13610489
> 
> 赞同：0
> 
> 时间：2012-11-28T17:02:37.233
> 
> 标签：python, matplotlib

我想使用 matplotlib 在我的图例中添加字幕。有没有其他方法可以做到这一点？

谢谢，

最好的，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:13:37.100

如果您想要绘制每条线的图例，您可以这样做：

```
plt.plot(x, y1, label='Line One')
plt.plot(x, y2, label='Line Two')
plt.legend(loc='best') 
```

每个`label`关键字参数都提供了行的标签，并且该`legend()`命令创建了一个内部带有图例的框。可选`loc`参数（位置）试图阻止将图例框放置在线条上。

# forms - 如何使用 Spring 的 form:select 标签选择一个选项？

> ID：13610490
> 
> 赞同：0
> 
> 时间：2012-11-28T17:02:49.150
> 
> 标签：forms, spring, select, option

我正在使用 Spring 3.1.1.RELEASE。使用 form:select 标签，我如何指定应该选择哪个选项？我希望选择第一个，但是当我放

```
 <form:select path="parentOrganization">
                <form:option value="" label="Select an Org Type or Parent Org" />
                <form:options items="${orgTypesWoParents}" itemValue="id" itemLabel="description" />
                <form:option value="" label="=======================" />
            </form:select> 
```

最后一个被选中。我想保留所有内容的显示顺序，这就是我以这种方式安排事物的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:16:10.837

```
 <form:select path="parentOrganization">
            <form:option value="" selected="selected" label="Select an Org Type or Parent Org" />
            <form:options items="${orgTypesWoParents}" itemValue="id" itemLabel="description" />
            <form:option value="" label="=======================" />
        </form:select> 
```

# jquery - 垂直滚动条上的 jQuery 对话框上的 jstree 提供带有所有 jstree 数据文本的 X 图标

> ID：13610496
> 
> 赞同：1
> 
> 时间：2012-11-28T17:03:00.193
> 
> 标签：jquery, jquery-ui-dialog, jstree

我有一个 jQuery 对话框，除此之外还有 jstree。当我做垂直滚动条时，它会用鼠标图标显示所有树项目的文本。

我的 jstree 插件没有 dnd，它的初始化如下：

```
plugins: ['themes', 'json_data', 'crrm', 'checkbox'], 
```

![在此处输入图像描述](../Images/cbb67423ee89e362f276b804b4d69eaa.png)

对话框打开后，当我单击滚动时，它会显示红十字图标以及鼠标以及所有选项的文本。此对话框初始化如下：

```
 modal = $('<div></div>').addClass(this.widgetBaseClass + '-modal').dialog({
            modal: true,
            width: 500,
            autoOpen: false,
            resizable: false,               
            position: 'center',
            buttons: [{
                text: 'Save',
                click: $.proxy(this._save, this)
            }, {
                text: 'Cancel',
                click: $.proxy(this._cancel, this)
            }],
            title: 'Select ' + this.options.label
        }); 
```

这发生在（IE9、FF、Chrome）有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:12:39.347

我在询问后很快就找到了自己问题的答案（典型）:)

**我尝试了几件事，但其中一个解决方案是设置`draggable : false`对话框来修复它。**

我认为这可能对面临类似问题的人有用。如果您认为不是，请随时删除它。（我无法删除它）。

# ajax - 如何在 ember-data 中获取 HTTP 状态码

> ID：13610502
> 
> 赞同：1
> 
> 时间：2012-11-28T17:03:13.913
> 
> 标签：ajax, asynchronous, ember.js, ember-data

当我调用

```
 App.store.createRecord(App.User,  { name: this.get("name") });
 App.store.commit(); 
```

我怎么知道它是否成功以及如何等待异步消息？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T15:56:52.087

最近在 ember-data master 中的 DS.RESTAdapter 中[添加](https://github.com/emberjs/data/commit/36a70c9839c9807248856ce2e25959bf80d6b941)了非常有限的错误处理。

创建或更新记录（禁用批量提交）并返回 400 到 599 之间的状态码时，将发生以下情况：

*   A`422 Unprocessable Entity`会将记录转换为“无效”状态，并将从服务器返回的任何错误添加到记录的`errors`属性中。

    适配器假定服务器将使用以下格式的 JSON 进行响应：

    ```
    {
      errors: {
        name: ["can't be blank"],
        password: ["must be at least 8 characters", "must contain a number"]
      {
    } 
    ```

    （错误消息本身可能是字符串数组或只是字符串。ember-data 目前不关心哪个。）

    要检测此状态：

    ```
    record.get('isValid') === false 
    ```

*   所有其他状态代码会将记录转换为“错误”状态。

    要检测此状态，请使用：

    ```
    record.get('isError') === true 
    ```

更多的情况最终可能由 ember-data 开箱即用地处理，但目前如果您需要特定的东西，您必须扩展`DS.RESTAdapter`，自定义其`didError`功能以自己添加。

# heroku - 在没有 Gemfile 的情况下部署到 Heroku

> ID：13610511
> 
> 赞同：0
> 
> 时间：2012-11-28T17:03:47.573
> 
> 标签：heroku, bundler, ruby-on-rails-2

我正在使用最初在 Bundler 和 Gemfiles 之前构建的旧 Rails 应用程序。是否可以在没有 Gemfile 的情况下将此应用程序推送到 Heroku？该应用程序正在 Bamboo Stack 上进行生产，并且在没有一个的情况下工作。我正在尝试在 Cedar Stack 上添加开发环境（Bamboo 现已关闭）并出现错误：

```
-----> Heroku receiving push
-----> Removing .DS_Store files
 !     Heroku push rejected, no Cedar-supported app detected 
```

没有 Gemfile 就不能再推送到 Heroku 了吗？

如果需要的话，我会[添加一个 Gemfile 。](http://gembundler.com/rails23.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:32:32.237

Heroku Support 的官方说法：

> 嗨，是的，你需要一个用于 ruby​​ 应用程序的 Gemfile；我们没有在基本系统上安装任何 gem，所以这就是您指定它们的方式。这也是我们检测它是红宝石应用程序的方式。
> 
> 也可能有用：[https ://github.com/kch/gemfile-tool](https://github.com/kch/gemfile-tool)

# django - Django 事务回滚 HTTP 错误响应

> ID：13610515
> 
> 赞同：1
> 
> 时间：2012-11-28T17:03:49.920
> 
> 标签：django, orm, transactions, decorator, httpresponse

如果视图代码抛出异常，所有[django 事务的东西](https://docs.djangoproject.com/en/dev/topics/db/transactions/)都会回滚事务。`HttpResponse`如果我返回带有错误状态代码的错误状态代码，即 4xx 或 5xx，如何让它回滚？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:20:56.497

好吧，我根本没有测试过*，*我不知道它是否正确，但这样的事情可能会奏效。我将不胜感激任何反馈！

```
from functools import wraps
from django.utils.decorators import available_attrs
from django.db import transaction
from django.http import HttpResponse

def commit_on_http_success(function=None, using=None, successStatuses=[200]):
    """Like commit_on_success, but rolls back the commit if we return an HttpResponse
    with a status that isn't 200 (by default).

    Args:
        using: The database to use. Uses the default if None.
        successStatuses: The HTTP statuses for which we will commit the transaction.
    Raises:
        It can raise an exception that overrides the view's exception if commit() or
        rollback() fails.
    """

    def decorator(view_func):
        @wraps(view_func, assigned=available_attrs(view_func))
        def _wrapped_view(request, *args, **kwargs):
            try:
                transaction.enter_transaction_management(using=using)
                transaction.managed(True, using=using)

                exc = None
                commit = False
                try:
                    response = view_func(request, *args, **kwargs)
                    if isinstance(response, HttpResponse) and response.status in successStatuses:
                        commit = True
                except Exception, exc:
                    pass

                if transaction.is_dirty(using=using):
                    if commit:
                        try:
                            transaction.commit(using=using)
                        except:
                            transaction.rollback(using=using)
                            raise
                    else:
                        transaction.rollback(using=using)
            finally:
                transaction.leave_transaction_management(using=using)

            if exc is not None:
                raise exc

            return response
        return _wrapped_view

    if function:
        return decorator(function)
    return decorator 
```

# android - Eclipse giving me Android API error I wasn't getting before

> ID：13610518
> 
> 赞同：0
> 
> 时间：2012-11-28T17:04:04.077
> 
> 标签：android

Eclipse is giving me an error on the following line:

```
decodedString= Base64.decode(imagestring, Base64.DEFAULT); 
```

It says the decode method requires API 8 and my Manifest specifies the min API as 7.

```
Call requires API level 8 (current min is 7): android.util.Base64#decode 
```

Here's my issue:

I've had this line of code in my app for months. It has never given me this error before. I opened this file in Eclipse, added 1 non-relevant line of code, and when I saved it gave me this error.

The only thing I can think is that yesterday I updated my SDK and Android plugin.

What can I do here? Is my only option to increase my min API level to 8? Why did it never give me this error before. My project has specified 7 as the min API since its inception (well over a year).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:16:21.767

You can ignore this error, please look at the picture below

![enter image description here](../Images/733b75df72039014a35cc16aafe5d9e4.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:06:30.367

Increasing your API level to 8 looks sensible. Maybe the SDK/android plugin previously had a bug, since the documentation says it's API 8 and above.

# facebook - 从活动帖子重定向到特定画布（iframe）页面

> ID：13610521
> 
> 赞同：1
> 
> 时间：2012-11-28T17:04:14.337
> 
> 标签：facebook, redirect

在 Facebook 中，如何将用户从墙/活动帖子重定向到我的画布 ( **iframe** ) 应用程序上的特定页面？

例如，应用程序向用户的活动发布了他/她的朋友刚刚发布了蛋糕收据并提供了收据页面的链接。因此，单击时应在画布而不是画布网站中打开此页面。

# apache - 用 Apache/Squid 反向代理和 ldap 身份验证替换 Forefront TMG

> ID：13610524
> 
> 赞同：1
> 
> 时间：2012-11-28T17:04:22.970
> 
> 标签：apache, authentication, reverse-proxy, claims-based-identity

我正在寻找用开源解决方案（可能是 apache 或 squid）替换 Forefront TMG，但我不确定如何去做。目前，TMG 位于共享点 2010 的前面并充当反向代理。TMG 提供了一个通过 ldap 进行身份验证的登录页面。我不确定 TMG 是否正在处理 ldap 身份验证或其共享点。Sharepoint 设置为将声明身份验证与 Windows 身份验证/NTLM 一起使用。

我猜测 TMG 将用户凭据连同域从表单传递到 Sharepoint，Sharepoint 然后向 ldap 服务器进行身份验证，然后为经过身份验证的用户返回令牌或 cookie。

有谁知道如何复制这个减去 TMG 并取而代之的是 apache 或 squid 和/或它们的组合？

# amazon-web-services - 是否可以对 AWS 微实例进行临时升级以测试什么可以？

> ID：13610525
> 
> 赞同：1
> 
> 时间：2012-11-28T17:04:28.703
> 
> 标签：amazon-web-services

我在 AWS 上有一个免费的微型实例，而且我的 CPU 经常受到限制，因此很难使用。

我确实想知道是否有任何方法可以测试更大的实例，所以我看看哪个可以。

附带问题：

*   如果我愿意，我可以回到免费的微信吗？
*   我可以限制测试的成本，或对其进行估算吗？我不想因为测试的结果而收到意外的账单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:22:42.053

[Mike Ryan 的回答](https://stackoverflow.com/a/13626367/45773)是正确的，但可能有更好的方法来实现您的目标，因为可以就地升级您的 Amazon EC2 t1.micro 实例。[Eric Hammond 的文章将 EC2 实例移动到更大（或更小）的实例类型](http://alestic.com/2011/02/ec2-change-type)中总结了这个过程（以及一些限制）：

> 当您发现入门级 t1.micro 实例大小根本无法满足您不断增长的应用程序需求时，您可能想尝试将其升级到更大的实例类型，可能是 m1.small 甚至 c1.medium。
> 
> 您不必启动一个新实例并不得不从头开始配置它，您可以通过要求 Amazon 将其移动到更适合您的硬件来简单地调整现有实例的大小。当然，由于这是 AWS，您不必与任何人实际交谈 — 只需键入几条命令，工作就会自动完成。

Eric 描述了如何通过命令行实现这一点，但如果您愿意，也可以通过[AWS 管理控制台](http://aws.amazon.com/console/)来完成此操作，实例菜单具有相应的命令*更改实例类型*（仅在实例停止时启用）。

或者，您可能还想熟悉通过[Amazon 系统映像 (AMI)](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/AMIs.html)轻松复制 EBS 支持的 EC2 实例，它允许您启动当前实例的任意数量的精确副本 - 此过程在例如，[使用控制台创建由 Amazon EBS 支持的 AMI 。](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/Tutorial_CreateImage.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:57:19.850

您当然可以启动一个更大的新实例，运行您的测试，然后终止该实例。它根本不会以任何方式影响您正在运行的微实例。

AWS 会发布他们的定价数据，因此您可以手动计算成本或使用成本计算器：[http ://calculator.s3.amazonaws.com/calc5.html](http://calculator.s3.amazonaws.com/calc5.html)

无法“限制”您的 AWS 支出。

# php - Symfony2 在 bind() 之后和检查 isValid() 之前插入表单值

> ID：13610528
> 
> 赞同：1
> 
> 时间：2012-11-28T17:04:45.257
> 
> 标签：php, symfony

我希望 fbid 和 game_id 的组合是唯一的。我想用 form->isValid() 方法对其进行测试。但我不想通过隐藏输入传递这些值。

我的实体代码：

```
/**
 * @ORM\Entity
 * @ORM\Table(name="Member",
 *     uniqueConstraints={
 *         @ORM\UniqueConstraint(columns={"fbid", "game_id"})
 *          })
 * @UniqueEntity(fields={"fbid","game"})
 */
class Member
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\ManyToOne(targetEntity="Game", inversedBy="members")
     * @ORM\JoinColumn(name="game_id", referencedColumnName="id")
     */
    protected $game;

    /**
     * @ORM\Column(type="string")
     */
    private $fbid; 
```

我尝试：

```
if ($request->getMethod() == 'POST') {
    $form->bind($request);
    $member = $form->getData();
    $member->setGame( $this->game );
    $form->setData($member);
    if ($form->isValid()) { 
```

但我有这个问题：

> 您不能更改绑定表单的数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T08:02:14.787

**Gremo**的解决方案很好，但创建全局服务并监听所有 POST_BIND 事件只是为了处理一种表单 POST_BIND 并不是一个好主意。仅在创建指定表单时设置此挂钩要便宜得多。

这是我的建议[https://gist.github.com/4167466](https://gist.github.com/4167466)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:12:44.230

该错误告诉您，如果您在绑定后更改了表单数据，则无法使用 isValid() 检查表单有效性。

为什么需要在绑定和有效性检查之间设置游戏？

您应该在绑定您的请求之前设置关联的游戏，如下所示：

```
//For creation, you have to initialize a new object
$member = new Member();
$member->setGame( $this->game );

$form = $this->createForm(new FormType(), $member)->getForm();

if ($request->getMethod() == 'POST') {

    $validator = $this->get('validator');
    $errors = $validator->validate($member);

    if (count($errors) > 0) {
        return new Response(print_r($errors, true));
    } else {
        // persist entity ...
    }

    $form->bind($request);
    if ($form->isValid()) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T17:14:13.280

创建服务并监听`FormEvents::POST_BIND`事件。在您的`onPostBind()`中，您可以获取要检查的值，并在必要时添加错误：

```
class AddGameValidation implements EventSubscriberInterface
{   
    /**
     * {@inheritDoc}
     */
    public static function getSubscribedEvents()
    {
        return array(
            FormEvents::POST_BIND => 'onPostBind',
        );
    }

    /**
     * @param \Symfony\Component\Form\Event\DataEvent $event
     */
    public function onPostBind(DataEvent $event)
    {
        $form = $event->getForm();

        // Get the data

        if(false === $condition) {
            $form->addError(new FormError('Some message'));
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T10:06:28.713

你也可以在你的表单中使用一个事件订阅者，并监听 FormEvents::POST_BIND 事件。更多关于使用事件订阅者：[http ://symfony.com/doc/2.0/cookbook/form/dynamic_form_generation.html](http://symfony.com/doc/2.0/cookbook/form/dynamic_form_generation.html)

还有一个类似的 stackoverflow 问题：[在 Symfony 中修改绑定表单数据的建议位置是哪个？](https://stackoverflow.com/questions/11697560/which-is-the-suggested-place-to-modify-binded-form-data-in-symfony)

# ruby-on-rails - Rails 不会将缓存清除时间戳附加到生产中的资产

> ID：13610530
> 
> 赞同：3
> 
> 时间：2012-11-28T17:04:47.493
> 
> 标签：ruby-on-rails, caching, asset-pipeline

我将 stylesheet_link_tag 与资产管道一起使用，但我得到了这个：

```
<link href="/assets/application.css" media="screen" rel="stylesheet" type="text/css" /> 
```

我的生产.rb

```
config.serve_static_assets = false
config.assets.compress = true 
```

我假设这是设置或简单的东西..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T17:12:00.163

确保此设置为真：

```
# config/environments/production.rb
config.assets.digest = true 
```

并且你已经跑了`rake assets:precompile`。

# matlab - matlab 编码器 - 带有“字符开关”的功能

> ID：13610531
> 
> 赞同：0
> 
> 时间：2012-11-28T17:04:50.387
> 
> 标签：matlab, octave

是这样的：

```
function [rv] = get_bla(m)
%#codegen
assert(isa(m,'char'));
assert(size(m, 1) >= 1);
assert(size(m, 1) <= 1024);

switch m
    case 'xyz' 
        rv = 1;
    case 'xyz1'   
        rv = 2; 
    otherwise
        error('Unexpected something');
end 
```

在matlab编码器的上下文中实际上可能吗？

我在用：

```
codegen -config:dll get_bla 
```

并得到：

SWITCH 表达式的大小不确定。

由于'char 数组'对于 C/C++ 必须是静态大小，我认为以上是不可能的，或者有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:18:23.333

尝试使用`if`-`elseif`语句而不是`switch`语句。

```
if strcmp(m, 'xyz')
  rv = 1;
elseif strcmp(m, 'xyz1')
  rv = 2;
else
  error('unexpected');
end 
```

# c# - 将文件上传传递给 Web 服务

> ID：13610532
> 
> 赞同：0
> 
> 时间：2012-11-28T17:04:51.363
> 
> 标签：c#, asp.net-mvc, web-services, file-upload, asp.net-4.0

我有以下架构：

`Web-Application <-> Web-Service <-> Cloud`

Web 应用程序提供了一个 html 页面，用于上传应放置在云中的文件。根据设计，无法直接上传到云端（这里真的没有选择）。

我可以做的是，将其上传到网络应用程序并将文件保存到磁盘，然后将其上传到网络服务，保存到磁盘，最后将其上传到云端。但是因为文件可能很大（4GB+），将流从 Web 应用程序传递到 Web 服务并由 Web 服务将其传递到云就很好了，所以它不会被保存到任何地方的文件中云的。

这对 C#、.NET 4、ASP.NET 和 MVC 4 是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:46:58.817

这真的很容易。

在我的 Web 应用程序操作中，我刚刚创建了一个新的 HttpWebRequest，将文件的输入流复制到 HttpWebRequest 并将其发送到 Web 服务。从 Web 服务到云也是如此。因此不需要存储到磁盘。

# ruby-on-rails - 涡轮链轮和 capistrano

> ID：13610533
> 
> 赞同：4
> 
> 时间：2012-11-28T17:04:52.073
> 
> 标签：ruby-on-rails, amazon-ec2, capistrano, amazon, sprockets

我最近将 turbo sprockets gem [https://github.com/ndbroadbent/turbo-sprockets-rails3](https://github.com/ndbroadbent/turbo-sprockets-rails3)添加 到我的 rails 应用程序中，我正在使用 capistrano 部署到 Amazon EC2。

我对如何使这项工作有些困惑。assets:precompile 在我的本地机器上工作，但在亚马逊实例上却没有。

长话短说 capistrano 为每个部署创建一个新的发布目录，而 public/assets 目录是空的，所以每次它创建一个新的并且在运行 assets:precompile 时它会预编译所有的资产。

我应该在本地预编译并将它们添加到 git 还是在 capistrano 运行 assets:precompile 之前从上次部署中复制 public/assets 目录？

什么是最干净/最佳实践的解决方案？

/Edit 或者将编译后的资产保存在共享目录中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T10:06:37.027

我能想到的最简单的解决方案是使用 shared/assets 目录来存储我的资产，并在编译资产之前创建一个指向发布 public/assets 目录的符号链接。

```
 task :assets_precompile do
   run "ln -s #{shared_path}/assets #{release_path}/public/assets"
   run "cd #{release_path} && RAILS_ENV=production bundle exec rake assets:precompile"
 end 
```

编辑：Anjan 指出，如果您使用 deploy:assets （如果您`load 'deploy/assets'`的 Capfile 中有），默认情况下会这样做，因此这是一个更清洁的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-14T12:14:17.157

如果部署过程包括到静态文件的符号链接，则 Lesce 的答案具有更大的权重。

示例：config/database.yml 是您不需要调整的东西，也不希望部署对您进行必要的更改......在 shared/assets 中使用它会导致 assets:precompile 被调用时失败。

它也适用于用户加载的图像、附件...

# php - '级联'在php中爆炸字符串

> ID：13610534
> 
> 赞同：0
> 
> 时间：2012-11-28T17:05:01.867
> 
> 标签：php, arrays, string, explode

如何爆炸这个字符串：

```
00004.00001.00003.00001.00003 
```

在这样的数组中：

```
array (size=3)
  0 => string '00004' (length=5)
  1 => string '00004.00001' (length=10)
  2 => string '00004.00001.00003' (length=15)
  3 => string '00004.00001.00003.00001.00003' (length=20) 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T17:09:22.843

```
$array = explode('.', '00004.00001.00003.00001.00003');

foreach($array as $key => $value) {
  if($array[$key - 1]) {
    $array[$key] = $array[$key - 1] . '.' . $value;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:09:12.477

首先像往常一样展开它`$arr = explode('.', $str);`，然后用两个循环构建所需的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T17:20:24.257

另一个使用 array_map() 的版本：

```
$arr = explode('.', '00004.00001.00003.00001.00003');
$arr[] = 'blank';
$array = array_map(function(){
     global $arr;
     array_pop($arr);
     return implode($arr);
}, $arr); 
```

# r - 忽略循环中的错误，用循环命名数据帧

> ID：13610535
> 
> 赞同：1
> 
> 时间：2012-11-28T17:05:04.933
> 
> 标签：r, for-loop, error-handling

我有一个 200,000 行的文件，我正在尝试导入，但出现错误：

```
Error in scan(file, what, nmax, sep, dec, quote, skip, nlines, na.strings,  : 
  line 39194 did not have 10 elements 
```

查看该行`less -N`（只需键入“39000e”以跳到您想要的行）我看不出有什么区别，所以我曾经`split -l 30000 optimized_bail_1127.csv`将它分成块，以便我可以尝试导入较小的部分并附加它们（或检查它们） .

`split`生成一堆名为“xaa”，“xab”，... xag 等的文件。所以我想做类似的事情：

```
files <- dir(pattern="xa[a-g]")
for(f in files) {
  print (f)
  f <- read.table(f,sep = '|')
} 
```

获取每个子文件的表。我也希望它只是跳过错误（打印它们，但继续前进），这样我至少可以看到我可以干净地导入其中的多少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:45:55.593

为了查看错误消息但继续循环，您可以执行以下操作`try()`：

```
FSU <- function() {
       for(i in 1:100){
            if(i == 23) lm(NA~NA)
            }
       print("you made it!")
       }

> FSU()
Error in terms.formula(formula, data = data) : 
  invalid term in model formula 
```

使用`try()`

```
DontFSU <- function() {
       for(i in 1:100){
            if(i == 23) try(lm(NA~NA))
            }
       print("you made it!")
       }

> DontFSU()
Error in terms.formula(formula, data = data) : 
   invalid term in model formula
[1] "you made it!" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:09:20.220

尝试`fill=T`或`read.csv(...,sep='|')`

# android - Android 应用程序可以更改手机的设置，例如声音开/关 wi-fi 开/关吗？

> ID：13610536
> 
> 赞同：0
> 
> 时间：2012-11-28T17:05:07.363
> 
> 标签：android, nfc

Android 应用程序可以更改手机的设置，例如声音开/关或 Wi-Fi 开/关吗？实际上，会有一些预定义的 NFC 标签，当我点击其中一个标签时，比如说打开 wi-fi，或者关闭声音？应用程序可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:10:37.223

可以通过编程方式将手机静音，但是要打开/关闭 WiFi，您需要将用户发送到设置屏幕让他们手动进行

这是使您的手机静音的链接 - [Android 静音/取消静音手机](https://stackoverflow.com/questions/7317974/android-mute-unmute-phone)

这是发送用于设置的代码

```
startActivity(new Intent(android.provider.Settings.ACTION_WIRELESS_SETTINGS)); 
```

取自[Android：以编程方式更改 NFC 设置（开/关）](https://stackoverflow.com/questions/5945100/android-changing-nfc-settings-on-off-programmatically)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:10:45.453

是的。我将从[android 文档](http://developer.android.com/reference/android/provider/Settings.System.html)开始。这将使您开始，然后将您带到要操作的不同设置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T06:15:24.993

NFC Task Launcher 是一款完全符合您所描述的应用程序：

[https://play.google.com/store/apps/details?id=com.jwsoft.nfcactionlauncher](https://play.google.com/store/apps/details?id=com.jwsoft.nfcactionlauncher)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T17:08:50.067

是的，有可能：

```
public static void setSilent(Context ctx)
{
    AudioManager am = (AudioManager)ctx.getSystemService(Context.AUDIO_SERVICE);
    am.setRingerMode(AudioManager.RINGER_MODE_SILENT); 
}

public static void setNormal(Context ctx)
{
    AudioManager am = (AudioManager)ctx.getSystemService(Context.AUDIO_SERVICE);
    am.setRingerMode(AudioManager.RINGER_MODE_NORMAL); 
} 
```

对于 wifi，您可以使用 WifiManager：

```
wifiManager = (WifiManager) this.getSystemService(Context.WIFI_SERVICE); 
wifiManager.setWifiEnabled(true); 
```

请注意，您需要为此获得权限：android.permission.CHANGE_WIFI_STATE

希望有帮助！

# django - 带有冲突 URL 的 Django-CMS AppHooks？

> ID：13610537
> 
> 赞同：4
> 
> 时间：2012-11-28T17:05:13.187
> 
> 标签：django, django-cms

我正在尝试以不同的方式使用 django-cms 应用程序挂钩。我只有一个应用程序，具有不同的网站页面。对于每个页面，我创建了一个 AppHook，因为我想通过 cms 控制所有这些页面。

为此，在应用程序内部，我做了一个包，每个页面都有 urls.py 文件，例如：

```
/urls
   /home_urls.py
   /portfolio_urls.py
   /contacts_urls.py 
```

以下是一些应用程序挂钩的定义：

```
class WebsiteHome(CMSApp):
    name = _("cms-home")
    urls = ["website.urls.home_urls"]

apphook_pool.register(WebsiteHome)

class WebsiteServices(CMSApp):
    name = _("cms-services")
    urls = ["website.urls.services_urls"]

apphook_pool.register(WebsiteServices) 
```

无论如何，问题是：我对正则表达式没有任何控制权。每个人都在输入它找到的第一个正则表达式，在这种情况下，是

> website.urls.home_urls

尽管有不同的 apphHooks。

例子：

如果我写了一个 slug 联系人（它有一个到 WebsiteContacts 的 apphook），它仍然会转到与 WebsiteHome（app 挂钩）关联的 home_urls.py 文件。

有没有人遇到过类似的问题？

* * *

基本上，我想说的是正则表达式有问题。我不能：

```
url(r'^$', [...]), 
```

只要：

```
url(r'^', [...]), 
```

如果我输入“$”，它不会输入任何正则表达式。如果我拿走它，它总是在

> 网站.urls.home_urls.py

尽管 slug 具有不同的 Apphooks，但与不同的 urls.py 文件相关联。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T14:44:04.850

你试过`r'^/$'`吗？我`r'^/?$'`在一些 app-hook url 中使用，但我想知道是否`r'^$'`因为“/”而失败？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-20T16:12:26.040

当您在 CMS 中将这些 URL 文件中的每一个定义为单独的应用程序挂钩时，它们将各自附加到 CMS 中的某个页面，例如

```
www.mysite.com/home
www.mysite.com/contacts
www.mysite.com/services
etc 
```

因为这些 URL 文件附加到页面，这应该可以防止`urlpatterns`. 例如，我有一个 URL 文件附加到一个名为 News 的 CMS 应用程序，它看起来像这样；

```
urlpatterns = patterns(
    '',
    url(r'^(?P<slug>[-_\w]+)/$', NewsDetailView.as_view(), name='news_detail'),
    url(r'^$', NewsListView.as_view(), name='news_list'),
) 
```

它附在页面上，`mysite.com/news`所以如果我去`mysite.com/news/myslug`我点击它`NewsDetailView`，如果我去`mysite.com/news`我点击`NewListView`。

使用这个例子，如果你有一个联系人的 slug，你会`mysite.com/contacts/contact-slug`去打那个`NewsDetailView`.

如果您不知道，请在 urlpatterns 上添加一个旁注，`^`正则表达式中的 表示要匹配的模式的开始，而`$`表示结束。[URL 调度程序文档](https://docs.djangoproject.com/en/1.8/topics/http/urls/)

# java - 波斯语或阿拉伯语 Unicode UTF-8 字符 - 如何使用 Jzebra 打印？（打印奇怪的字符）

> ID：13610540
> 
> 赞同：1
> 
> 时间：2012-11-28T17:05:22.893
> 
> 标签：java, javascript, zebra-printers, printers, thermal-printer

我正在使用[JZebra 浏览器小程序](http://code.google.com/p/jzebra/)将原始命令发送到热敏打印机：

如果我尝试打印使用 UTF-8 编码的波斯语或阿拉伯语字符，例如 سلام，我会打印一些奇怪的字符。我似乎无法掌握如何获得正确的角色。

我将编码设置为 utf-8，如下所示：

```
document.jzebra.setEncoding("UTF-8"); 
```

但它仍然不起作用。我怎样才能解决这个问题？或者有没有这样的代码可以帮助我？

我的环境：

1.  操作系统是win7 32bit
2.  使用 jZebra 1.4.5
3.  我的打印机是 Jolimark TP280

# vsto - Outlook 插件不使用 VSTO 呈现 HTML 表单，但使用 C++ API 可以

> ID：13610543
> 
> 赞同：2
> 
> 时间：2012-11-28T17:05:45.150
> 
> 标签：vsto, outlook-addin, outlook-2007, mapi

我正在使用 VSTO（Outlook 2007/2010）将 C++ Outlook Addin 应用程序重写为完整的 .NET 表示。

要重写的功能之一是 html 表单呈现。用户可以在撰写邮件模式下（发送前）选择复选框、提供输入、选择选项等。但是，当我将任何输入标记放入 HTMLBody 属性时，它不会按预期呈现。而是只呈现类似[http://postimage.org/image/jk9swfr2t/的内容。](http://postimage.org/image/jk9swfr2t/)我花了很长时间寻找解决方案，但由于基于 Word 的 Outlook HTML 渲染引擎，最终结果总是不可能。

我们的 C++ 插件代码库非常大而且是遗留的——我不是 C++ 开发人员，对 COM 和 C++ Outlook 对应的 API 不太了解，目标是根据现有功能重写，根本没有时间也没有分析遗留代码的资源。

但对我来说最有趣的是 c++ 版本的软件可以渲染所有内容：输入、复选框、选择选项，所有内容！所以我猜这是可能的，并开始寻找解决方法或任何类型的黑客。

我使用 OutlookSpy 工具分析了旧的 c++ 插件，结果发现它没有填充 HTMLBody。我不得不浏览部分遗留代码，发现它设置了 PR_HTML MAPI 属性。不幸的是，我还发现此属性在 vsto 中不可用，因此我无法检查它是否有帮助。

所以我的问题是：

*   您知道使用 VSTO 在 Outlook 中呈现 HTML 表单的任何技巧吗？
*   使用 item.HTMLBody 或 PR_HTML MAPI 属性是否有任何差异会对我的问题产生影响？
*   如果是，那么我可以使用 C# 设置 PR_HTML 吗？（我已经免费检查了[http://www.add-in-express.com/creating-addins-blog/2008/11/21/outlook-object-model-propertyaccessor-storageitem/](http://www.add-in-express.com/creating-addins-blog/2008/11/21/outlook-object-model-propertyaccessor-storageitem/)但它对我不起作用- 添加 AddExpress.MAPI.dll 时代码不执行）

一切都必须以编程方式完成，因此使用 Outlook UI 插入或从 IE 导出到 Outlook 不算在内。此外，我们不能使用商业第三方工具，如 Redemption 或 Add-in Express。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:42:18.343

你确定你发的图片是对的吗？:-) 请记住，Outlook 使用 Word 呈现 HTML，因此任何输入控件和脚本都不会运行。

# ant - 使用 Ant 复制最新的文件

> ID：13610544
> 
> 赞同：0
> 
> 时间：2012-11-28T17:05:47.687
> 
> 标签：ant

所以我在一个看起来像这样的目录中有一堆罐子：

```
 library_2.4.3.jar   2/3/2012
library_3.0.1.jar   9/1/2012
api.lib_10.3.jar    3/2/2011
api.lib_12.4.5.jar  6/9/2012 
```

我已经使用 Ant 1.7 编写了以下内容以将 jar 复制到我想要它们的位置并从文件中删除版本号

```
<copy todir="${lib.dir}" overwrite="true">
    <fileset dir="${plugins.dir}">              
        <include name="library*.jar" />
        <include name="api.lib*.jar" />
    </fileset>
    <regexpmapper from="(.*)_(.*).jar" to="\1.jar"/>
</copy> 
```

我遇到的问题是我希望它复制文件的较新版本。现在它似乎只复制旧文件。我已经研究了`<sort>`and`<TimestampSelector>`任务，但复制任务不支持这些任务。

我可以做些什么来复制文件的较新版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:21:55.320

不要直接放在复制任务下...创建属性并使用复制标签中的属性...

```
<timestampselector property="latest.modified">
  <path>
    <fileset dir="${my-directory.dir}">
      <include name="file-*" />
    </fileset>
  </path>
</timestampselector>

<copy todir="." file="${latest.modified}"> 
```

希望，它有效。

# windows - 如何防止bat文件提前退出？

> ID：13610548
> 
> 赞同：6
> 
> 时间：2012-11-28T17:05:56.933
> 
> 标签：windows, batch-file, cmd

我正在运行一个 maven 插件（这只是一个新进程）作为 bat 文件的一部分。插件命令导致 bat 文件退出，因此后续命令不会运行。是否有命令或其他方式来防止 bat 文件过早退出？

这是bat文件：

```
ECHO Updating Version
mvn versions:set -DnewVersion=1.2

ECHO this echo does not occur 
```

[也许我可以使用“如何阻止 Windows 批处理文件提前退出](https://stackoverflow.com/questions/8485081/how-do-you-stop-a-windows-batch-file-from-exiting-early)”中引用的“调用”命令？但我想在一个 bat 文件中运行所有代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T13:27:18.317

如果 mvn 是一个批处理文件，那么您需要在它前面加上一个`call`，否则它将在该行终止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:10:00.160

我会使用：

```
set /p v=Press enter to exit 
```

在您的程序结束时。这将等待用户在退出之前进行交互。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-28T17:14:00.467

使用**暂停**命令。

```
Pause /? 
```

例子：

```
@Echo off
Echo hello world
Pause >NUL
exit 
```

# .htaccess - HTACCESS 问题，正则表达式错误？

> ID：13610554
> 
> 赞同：-1
> 
> 时间：2012-11-28T17:06:21.737
> 
> 标签：.htaccess

我的.htaccess 有点问题。有什么建议吗？

RewriteRule vendita/([^/]+)/?$ index.php?page=1&ris_pagina=15&tipo=VENDITA®ione=$1&land=$1_vendita [L]

RewriteRule vendita/([^/]+)/pag-([^/]+)/?$ index.php?page=$2&ris_pagina=15&tipo=VENDITA®ione=$1&land=$1_vendita [L]

RewriteRule vendita/([^/]+)/([^/]+)/?$ index.php?page=1&ris_pagina=15&tipo=VENDITA&provincia=$2&land=$2_vendita [L]

RewriteRule vendita/([^/]+)/([^/]+)/pag-([^/]+)/?$ index.php?page=$3&ris_pagina=15&tipo=VENDITA&provincia=$2&land=$2_vendita [大号]

RewriteRule ([^/]+)/vendita/?$ index.php?page=1&ris_pagina=15&tipo=VENDITA&comune=$1&land=$1_vendita [L]

RewriteRule ([^/]+)/vendita/pag-([^/]+)/?$ index.php?page=$2&ris_pagina=15&tipo=VENDITA&comune=$1&land=$1_vendita [L]

* * *

例子

网址请求：[http](http://www.mysite.com/vendita/lombardia/bergamo/) ://www.mysite.com/vendita/lombardia/bergamo/ ---> 不工作:(

网址请求：[http](http://www.mysite.com/milano/vendita/pag-2/) ://www.mysite.com/milano/vendita/pag-2/ ---> 不工作:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T23:46:27.190

将正则表达式替换`([a-z]+)`为字母和`([0-9]+)`数字，它将避免不同规则之间的冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:47:50.230

你好像有多余的？所有正则表达式模式末尾的字符。

```
vendita/([^/]+)/([^/]+)/?$ 
```

不匹配

```
http://www.mysite.com/vendita/lombardia/bergamo
http://www.mysite.com/vendita/lombardia/bergamo?
http://www.mysite.com/vendita/lombardia/bergamo/
http://www.mysite.com/vendita/lombardia/bergamo/?a=true 
```

它会匹配

```
http://www.mysite.com/vendita/lombardia/bergamo/? 
```

尝试

```
^vendita/([^/]+)/([^/]+) 
```

# cookies - 在 Windows Phone WebBrowser 控件中设置 cookie

> ID：13610555
> 
> 赞同：1
> 
> 时间：2012-11-28T17:06:22.083
> 
> 标签：cookies, webbrowser-control, windows-phone

如何将自定义 cookie 添加到 Windows Phone WebBrowser 控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:03:12.787

WebBrowser 控件没有设置cookie 功能。拥有一个没有意义，因为您只能为您拥有的网站设置 cookie。因此，cookie 应该设置在您在浏览器中加载（导航到）的页面上。这可以通过 JavaScript 轻松完成。还有其他方法使用 CookieContainer 并通过 WebBrowser 控件的脚本功能访问请求对象，但 JavaScript 选项是最简单的。

# html - 使具有负 z-index 的元素的子元素显示在其他所有元素之上

> ID：13610557
> 
> 赞同：0
> 
> 时间：2012-11-28T17:06:32.737
> 
> 标签：html, css, web, z-index

我正在一个网站上工作，我想在其中展示一个巨人~~图片~~背景中的幻灯片以及引用和链接，出于技术目的（**编辑**：在下面的评论中描述）必须位于同一父元素中。最重要的是我正在显示我的内容，并且在某一时刻我希望背景图像通过内容显示，我通过在我的两个内容元素（`#header`和`#main`）之间设置边距来实现这一点。描述起来有点困难，但我希望[这个 jsfiddle](http://jsfiddle.net/dessibelle/wqy2H/13/)能让我了解我在做什么。

问题是背景中显示的链接和引用是不可点击的，因为点击是指向上面显示的元素（`#header`）。我知道，`pointer-events: none;`但这并不好，因为我需要 IE 支持并且能够解释`#header`元素中的点击。

我想这在某种程度上归因于[这个答案](https://stackoverflow.com/a/6628662/222245)中提到的堆叠上下文，但我就是做错了。如果不使用负 z-index on ，我无法获得所需的布局`#background`，而里面的链接`#background`可能需要放在更高 z-index 的父级中。合理的做法可能是将其放在标记中的其他位置，但如上所述，链接与内部的其余内容相关`#background`。是否可以使链接堆叠上下文呈现在其父元素的堆叠上下文“上方”？

代码有点太长了，在这里做不到任何好处，而且不是很复杂，所以请参考前面提到的[jsfiddle](http://jsfiddle.net/dessibelle/wqy2H/13/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:16:27.617

将巨型图像作为背景，`<body>`不要创建带有负片的元素`z-index`。然后您的链接将是可点击的 -[**演示**](http://jsfiddle.net/wqy2H/14/)

# c# - 在 lambda 中捕获时 C# Struct 实例行为发生变化

> ID：13610559
> 
> 赞同：20
> 
> 时间：2012-11-28T17:06:43.517
> 
> 标签：c#, struct

我已经解决了这个问题，但我试图弄清楚它为什么有效。基本上，我正在使用 foreach 遍历一个结构列表。如果在调用结构的方法之前包含引用当前结构的 LINQ 语句，则该方法无法修改结构的成员。无论是否调用 LINQ 语句，都会发生这种情况。我可以通过将我正在寻找的值分配给一个变量并在 LINQ 中使用它来解决这个问题，但我想知道是什么原因造成的。这是我创建的一个示例。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace WeirdnessExample
{
    public struct RawData
    {
        private int id;

        public int ID
        {
            get{ return id;}
            set { id = value; }
        }

        public void AssignID(int newID)
        {
            id = newID;
        }
    }

    public class ProcessedData
    {
        public int ID { get; set; }
    }

    class Program
    {
        static void Main(string[] args)
        {
            List<ProcessedData> processedRecords = new List<ProcessedData>();
            processedRecords.Add(new ProcessedData()
            {
                ID = 1
            });

            List<RawData> rawRecords = new List<RawData>();
            rawRecords.Add(new RawData()
            {
                ID = 2
            });

            int i = 0;
            foreach (RawData rawRec in rawRecords)
            {
                int id = rawRec.ID;
                if (i < 0 || i > 20)
                {
                    List<ProcessedData> matchingRecs = processedRecords.FindAll(mr => mr.ID == rawRec.ID);
                }

                Console.Write(String.Format("With LINQ: ID Before Assignment = {0}, ", rawRec.ID)); //2
                rawRec.AssignID(id + 8);
                Console.WriteLine(String.Format("ID After Assignment = {0}", rawRec.ID)); //2
                i++;
            }

            rawRecords = new List<RawData>();
            rawRecords.Add(new RawData()
            {
                ID = 2
            });

            i = 0;
            foreach (RawData rawRec in rawRecords)
            {
                int id = rawRec.ID;
                if (i < 0)
                {
                    List<ProcessedData> matchingRecs = processedRecords.FindAll(mr => mr.ID == id);
                }
                Console.Write(String.Format("With LINQ: ID Before Assignment = {0}, ", rawRec.ID)); //2
                rawRec.AssignID(id + 8);
                Console.WriteLine(String.Format("ID After Assignment = {0}", rawRec.ID)); //10
                i++;
            }

            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-28T17:32:27.927

好的，我已经设法用一个相当简单的测试程序重现了这一点，如下所示，我现在明白了。不可否认，理解它并没有让我感到恶心，但是嘿......代码后的解释。

```
using System;
using System.Collections.Generic;

struct MutableStruct
{
    public int Value { get; set; }

    public void AssignValue(int newValue)
    {
        Value = newValue;
    }
}

class Test
{
    static void Main()
    {
        var list = new List<MutableStruct>()
        {
            new MutableStruct { Value = 10 }
        };

        Console.WriteLine("Without loop variable capture");
        foreach (MutableStruct item in list)
        {
            Console.WriteLine("Before: {0}", item.Value); // 10
            item.AssignValue(30);
            Console.WriteLine("After: {0}", item.Value);  // 30
        }
        // Reset...
        list[0] = new MutableStruct { Value = 10 };

        Console.WriteLine("With loop variable capture");
        foreach (MutableStruct item in list)
        {
            Action capture = () => Console.WriteLine(item.Value);
            Console.WriteLine("Before: {0}", item.Value);  // 10
            item.AssignValue(30);
            Console.WriteLine("After: {0}", item.Value);   // Still 10!
        }
    }
} 
```

两个循环之间的区别在于，在第二个循环中，循环变量由 lambda 表达式*捕获。*第二个循环实际上变成了这样的东西：

```
// Nested class, would actually have an unspeakable name
class CaptureHelper
{
    public MutableStruct item;

    public void Execute()
    {
        Console.WriteLine(item.Value);
    }
}

...
// Second loop in main method
foreach (MutableStruct item in list)
{
    CaptureHelper helper = new CaptureHelper();
    helper.item = item;
    Action capture = helper.Execute;

    MutableStruct tmp = helper.item;
    Console.WriteLine("Before: {0}", tmp.Value);

    tmp = helper.item;
    tmp.AssignValue(30);

    tmp = helper.item;
    Console.WriteLine("After: {0}", tmp.Value);
} 
```

当然，现在每次我们将变量复制出来，`helper`我们都会得到一个新的结构副本。这通常应该没问题 - 迭代变量是只读的，所以我们*希望*它不会改变。但是，您有一个*方法*可以更改结构的内容，从而导致意外行为。

请注意，如果您尝试更改*property*，则会收到编译时错误：

```
Test.cs(37,13): error CS1654: Cannot modify members of 'item' because it is a
    'foreach iteration variable' 
```

教训：

*   可变结构是邪恶的
*   *通过方法*变异的结构是双重邪恶的
*   通过对已捕获的迭代变量的方法调用来改变结构在破坏的程度上是三重邪恶的

我不是 100% 清楚 C# 编译器的行为是否符合此处的规范。我怀疑是这样。即使不是，我也不想建议团队应该付出任何努力来修复它。像这样的代码只是*乞求*以微妙的方式被破坏。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T11:12:32.357

行。我们在这里肯定有问题，但我怀疑这个问题不是闭包本身，而是 foreach 实现。

C# 4.0 规范声明（8.8.4 foreach 语句）“迭代变量对应于一个**只读局部变量**，其范围扩展到嵌入语句”。这就是为什么我们不能改变循环变量或增加它的属性（正如 Jon 已经说过的）：

```
struct Mutable
{
    public int X {get; set;}
    public void ChangeX(int x) { X = x; }
}

var mutables = new List<Mutable>{new Mutable{ X = 1 }};
foreach(var item in mutables)
{
  // Illegal!
  item = new Mutable(); 

  // Illegal as well!
  item.X++;
} 
```

在这方面，只读循环变量的行为几乎与任何只读字段完全相同（就在构造函数之外访问此变量而言）：

*   我们不能在构造函数之外更改只读字段
*   我们无法更改值类型的只读字段的属性
*   我们将只读字段视为值，每次访问值类型的只读字段时都会导致使用临时副本。

.

```
class MutableReadonly
{
  public readonly Mutable M = new Mutable {X = 1};
}

// Somewhere in the code
var mr = new MutableReadonly();

// Illegal!
mr.M = new Mutable();

// Illegal as well!
mr.M.X++;

// Legal but lead to undesired behavior
// becaues mr.M.X remains unchanged!
mr.M.ChangeX(10); 
```

有很多与可变值类型相关的问题，其中一个与最后一种行为有关：通过 mutator 方法（如`ChangeX`）更改只读结构会导致模糊的行为，因为我们将**修改副本**而不是只读对象本身：

```
mr.M.ChangeX(10); 
```

相当于：

```
var tmp = mr.M;
tmp.ChangeX(10); 
```

如果循环变量被 C# 编译器视为只读局部变量，那么期望它们与只读字段具有相同的行为似乎是合理的。

现在，简单循环中的循环变量（没有任何闭包）的行为几乎与只读字段相同，只是每次访问都复制它。但是如果代码发生变化并且闭包开始发挥作用，循环变量开始表现得像纯只读变量：

```
var mutables = new List<Mutable> { new Mutable { X = 1 } };

foreach (var m in mutables)
{
    Console.WriteLine("Before change: {0}", m.X); // X = 1

    // We'll change loop variable directly without temporary variable
    m.ChangeX(10);

    Console.WriteLine("After change: {0}", m.X); // X = 10
}

foreach (var m in mutables)
{
    // We start treating m as a pure read-only variable!
    Action a = () => Console.WriteLine(m.X));

    Console.WriteLine("Before change: {0}", m.X); // X = 1

    // We'll change a COPY instead of a m variable!
    m.ChangeX(10);

    Console.WriteLine("After change: {0}", m.X); // X = 1
} 
```

不幸的是，我找不到严格的规则，只读局部变量的行为方式，但很明显，这种行为基于循环体是不同的：我们不会为简单循环中的每次访问复制到本地，但如果循环我们这样做body 关闭循环变量。

我们都知道[关闭循环变量被认为是有害](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)的，并且在 C# 5.0 中更改了循环实现。在 C# 5.0 时代之前解决这个老问题的简单方法是引入局部变量，但有趣的是，在我们的案例中引入局部变量也会改变行为：

```
foreach (var mLoop in mutables)
{
    // Introducing local variable!
    var m = mLoop;

    // We're capturing local variable instead of loop variable
    Action a = () => Console.WriteLine(m.X));

    Console.WriteLine("Before change: {0}", m.X); // X = 1

    // We'll roll back this behavior and will change
    // value type directly in the closure without making a copy!
    m.ChangeX(10); // X = 10 !!

    Console.WriteLine("After change: {0}", m.X); // X = 1
} 
```

实际上，这意味着 C# 5.0 有非常微妙的重大变化，因为没有人会再引入局部变量（甚至像 ReSharper 这样的工具在 VS2012 中也停止警告它，因为它不是问题）。

我对这两种行为都很好，但不一致似乎很奇怪。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T17:12:38.920

我怀疑这与如何评估 lambda 表达式有关。有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/8898925/is-there-a-reason-for-cs-reuse-of-the-variable-in-a-foreach)及其答案。

问题：

> 在 C# 中使用 lambda 表达式或匿名方法时，我们必须警惕访问修改后的闭包陷阱。例如：
> 
> ```
> foreach (var s in strings)
> {
>    query = query.Where(i => i.Prop == s); // access to modified closure 
> ```
> 
> 由于修改了闭包，上面的代码将导致查询中的所有 Where 子句都基于`s`.

回答：

> 这是 C# 中最糟糕的“陷阱”之一，**我们将采取重大更改来修复它。**在 C# 5 中，foreach 循环变量在逻辑上位于循环体中，因此闭包每次都会获得一个新副本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T11:59:47.030

只是为了完成 Sergey 的帖子，我想添加以下带有手动关闭的示例，以演示编译器的行为。当然，编译器可能具有满足在 foreach语句变量中**捕获的****只读**要求的任何其他实现。

 **```
static void Main()
{
    var list = new List<MutableStruct>()
    {
        new MutableStruct { Value = 10 }
    };

    foreach (MutableStruct item in list)
    {
       var c = new Closure(item);

       Console.WriteLine(c.Item.Value);
       Console.WriteLine("Before: {0}", c.Item.Value);  // 10
       c.Item.AssignValue(30);
       Console.WriteLine("After: {0}", c.Item.Value);   // Still 10!
    }
}

class Closure
{
    public Closure(MutableStruct item){
    Item = item;
}
    //readonly modifier is mandatory
    public readonly MutableStruct Item;
    public void Foo()
    {
        Console.WriteLine(Item.Value);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T18:05:54.203

这可能会解决您的问题。它换成`foreach`a`for`并使之`struct`不可变。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace WeirdnessExample
{
    public struct RawData
    {
        private readonly int id;

        public int ID
        {
            get{ return id;}
        }

        public RawData(int newID)
        {
            id = newID;
        }
    }

    public class ProcessedData
    {
        private readonly int id;

        public int ID
        {
            get{ return id;}
        }

        public ProcessedData(int newID)
        {
            id = newID;
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            List<ProcessedData> processedRecords = new List<ProcessedData>();
            processedRecords.Add(new ProcessedData(1));

            List<RawData> rawRecords = new List<RawData>();
            rawRecords.Add(new RawData(2));

            for (int i = 0; i < rawRecords.Count; i++)
            {
                RawData rawRec = rawRecords[i];
                int id = rawRec.ID;
                if (i < 0 || i > 20)
                {
                    RawData rawRec2 = rawRec;
                    List<ProcessedData> matchingRecs = processedRecords.FindAll(mr => mr.ID == rawRec2.ID);
                }

                Console.Write(String.Format("With LINQ: ID Before Assignment = {0}, ", rawRec.ID)); //2
                rawRec = new RawData(rawRec.ID + 8);
                Console.WriteLine(String.Format("ID After Assignment = {0}", rawRec.ID)); //2
                i++;
            }

            rawRecords = new List<RawData>();
            rawRecords.Add(new RawData(2));

            for (int i = 0; i < rawRecords.Count; i++)
            {
                RawData rawRec = rawRecords[i];
                int id = rawRec.ID;
                if (i < 0)
                {
                    List<ProcessedData> matchingRecs = processedRecords.FindAll(mr => mr.ID == id);
                }
                Console.Write(String.Format("With LINQ: ID Before Assignment = {0}, ", rawRec.ID)); //2
                rawRec = new RawData(rawRec.ID + 8);
                Console.WriteLine(String.Format("ID After Assignment = {0}", rawRec.ID)); //10
                i++;
            }

            Console.ReadLine();
        }
    }
} 
```**

# python - Visual Studio Python 调试器在运行后立即关闭

> ID：13610561
> 
> 赞同：0
> 
> 时间：2012-11-28T17:06:53.387
> 
> 标签：python, debugging, visual-studio-2012

我有一个 python 项目。我单击一个 .py 文件并在没有调试器的情况下运行，然后控制台出现并且程序运行。如果我使用调试器运行，控制台会闪烁并关闭。上面有文字。但它对我来说读起来很快。我已经在我认为可以的工具中设置了所有内容。我有 python 调试器交互。

import sys class Test(): def **init** (self): var = raw_input("Hit Enter") t = 'test' print t stepB = raw_input("Hit Enter") a = Test()

将刹车品脱置于 t = 'test'

# c# - 设计者在加载表定义时遇到错误？

> ID：13610569
> 
> 赞同：12
> 
> 时间：2012-11-28T17:07:05.563
> 
> 标签：c#, visual-studio, visual-studio-2012

我对 Visual Studio 2012 Ultimate 有疑问。

我插入了一个“Sql Server 数据库”，一段时间后我尝试“添加新表”时遇到了这个问题

> 设计器在加载表定义时遇到错误

和“错误列表”中的两个错误

1.  > 无法检索目标数据库架构。无法重新连接到数据库。

2.  > 无法从数据库 (LocalDB)\v11.0.C:\USERS\SRDJAN\DOCUMENTS\VISUAL STUDIO 2012\WEBSITES\WEBSITE3\APP_DATA\DATABASE.MDF 获取架构信息。
    > 请关闭此数据库的所有打开的编辑器，检查您与此数据库的连接，然后在服务器资源管理器中刷新数据库。C:\USERS\SRDJAN\DOCUMENTS\VISUAL STUDIO 2012\WEBSITES\WEBSITE3\APP_DATA\DATABASE.MDF

我该怎么做才能让它工作？

![图片](../Images/4611f952e425bcf3b4a605c681e00cba.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-06-26T10:40:07.010

我遇到了同样的问题，但是当我使用“SQL Server 对象资源管理器”而不是“服务器资源管理器”添加新表时，它得到了解决。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-12T09:23:10.407

请检查您在 VS 中用于连接数据库的登录名是否具有创建表所需的权限。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-01-19T23:59:20.640

使用“SQL Server 对象资源管理器”而不是“服务器资源管理器”，但关闭出现在服务器资源管理器中的所有数据库连接。

从 SQL 服务器对象资源管理器添加本地 SQL 服务器，就是这样，就像一个魅力。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-02T18:31:04.040

我知道这是一个非常老的问题，但如果其他人对上述答案没有任何运气：对我有用的只是断开与服务器的连接并重新连接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-19T14:57:10.810

按着这些次序：

1.  右键单击数据连接
2.  单击添加连接
3.  选择您的数据源
4.  浏览到系统上现有的数据库文件（例如`C:\Users\pcname\Documents\databasefile.mdf`）
5.  点击测试连接
6.  如果连接成功则问题应该解决，否则重启Visual Studio后尝试

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-24T21:27:59.817

重新启动 Visual Studio 为我修复了它。我已经打开了一个月或更长时间。

对于某些人来说，在深入挖掘之前先尝试这个简单的步骤可能是值得的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-06T11:59:39.773

要解决此问题，请执行以下步骤：

1.  转到 VS 工具 → 选项 → 数据库工具 → 查询和视图设计器。

2.  在 240 秒后设置“取消长时间运行的查询”。

3.  删除“SQL Server Explorer”和“SQL Server Objects Explorer”中的所有连接——（这一步很重要）。

4.  重新打开 VS 并重新创建连接。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-10T10:32:48.053

由于数据库名称错误，我在使用 Visual Studio 2013 时遇到了同样的问题。

要解决它，请转到服务器资源管理器→右键单击您的数据库→修改连接...→在“连接到数据库名称：”下选择正确的数据库名称。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-02-19T10:15:59.060

如果您没有使用集成安全性（Windows 身份验证），请确保 db 用户具有“db owner”角色。

# linux - 使用 Automake 更正 GCC 命令行排序

> ID：13610572
> 
> 赞同：12
> 
> 时间：2012-11-28T17:07:13.287
> 
> 标签：linux, gcc, autotools, automake

我有一个在 Mac 上编译得很好的 autotools 项目，但在 Linux（Ubuntu 12.04.1 LTS）下，传递的命令行使`gcc`库相对于目标文件无序。例如，autotools 生成以下命令来编译我的代码，将单个文件命名`test.c`为名为 的二进制文件`test`：

```
gcc -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include -g -O2 -lglib-2.0 -o test test-test.o 
```

此命令行失败并显示：

```
/home/user/glib-test/test.c:4: undefined reference to `g_malloc`
/home/user/glib-test/test.c:5: undefined reference to `g_free` 
```

但是，如果我从命令行编译并切换它，以便库引用在目标文件之后，它就可以正常工作：

```
gcc -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include -g -O2 -o test test-test.o -lglib-2.0 
```

挑战在于我无法弄清楚如何强制 Autotools 以正确的顺序生成命令行。为了清楚起见，我在这里复制了简单的测试用例。首先是`configure.ac`：

```
dnl Process this file with autoconf to produce a configure script.

AC_PREREQ(2.59)
AC_INIT(glib-test, 1.0)

AC_CANONICAL_SYSTEM
AM_INIT_AUTOMAKE()

AC_PROG_CC
AM_PROG_CC_C_O
PKG_CHECK_MODULES(GLIB, glib-2.0 > 2.0)
AC_CONFIG_FILES(Makefile)
AC_OUTPUT 
```

接下来是简单的`Makefile.am`：

```
CFLAGS=-Wall
bin_PROGRAMS=test
test_CFLAGS=$(GLIB_CFLAGS)
test_LDFLAGS=$(GLIB_LIBS)
test_SOURCES=test.c 
```

最后，这个最小测试用例的源代码`test.c`：

```
#include <glib.h>

int main(int argc, char **argv) {
    gchar *foo = g_malloc(100);
    g_free(foo);
    return 0;
} 
```

然后使用以下一系列命令实现编译：

```
touch NEWS README AUTHORS ChangeLog
aclocal
autoconf
automake --add-missing
./configure
make 
```

我应该清楚，我理解为什么我的代码无法编译，我只是想知道如何`automake`将库放在命令行的末尾，以便`gcc`正确执行和链接。应该注意的是，`gcc`在 Mac OS X Lion 上似乎没有这个问题。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-28T20:05:25.240

解决方案原来是 和 之间的`LDFLAGS`差异`LDADD`。简而言之`LDFLAGS`，在命令行上的目标文件之前`LDADD`添加，然后添加。因此，更改`Makefile.am`为以下解决了该问题：

```
CFLAGS=-Wall
bin_PROGRAMS=test
test_CFLAGS=$(GLIB_CFLAGS)
test_LDADD=$(GLIB_LIBS)
test_SOURCES=test.c 
```

只需要找到工作中的 GCC 开发人员即可解决。此外，我提供的这个示例相当糟糕，因为`test`在某些自动工具的上下文中具有定义的含义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-25T14:59:05.507

我解决了一个类似的问题。由于缺少符号，有问题的 ./configure 脚本无法完成对函数是否存在的检查。如果我添加了正确的库`$LDFLAGS`或类似的，它是在`.c`文件之前添加的，并且该库被忽略。

首先添加要检查的函数的名称，`ac_func_list`然后在`./configure`每个函数的主体中都有一个循环，然后依次`ac_fn_c_check_func ()`调用`ac_fn_c_try_link ()`

检查函数 ac_fn_c_try_link () 使用这种模式的命令：

```
ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS \
         $LDFLAGS conftest.$ac_ext $LIBS >&5' 
```

`$LDADD`这里完全忽略。因此，这里唯一的解决方案是将`-l`标志添加到 variable `$LIBS`。

# java-me - 如何在 j2me 移动应用程序中显示马拉地语字体？

> ID：13610574
> 
> 赞同：0
> 
> 时间：2012-11-28T17:07:17.737
> 
> 标签：java-me

我们正在 j2me java symbian 中制作一个移动应用程序。我们想在我们的移动应用程序中显示马拉地语字体。我们尝试在各种论坛上搜索，但无法获得与语言支持相关的解决方案。如果不是马拉地语，请尝试提供尝试任何语言而不是英语的解决方案。如何在应用程序中显示马拉地语字体以及如何在 j2me 中使用马拉地语中的 unicode .. 我们需要对此的专家建议......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T00:15:12.237

我过去经常看到或实现类似事情的方式是创建自己的字体纹理并自己处理所有字符绘制。基本上，如果您的目标手机没有提供您想要的字体，您必须自己处理所有文本绘制。

# perl - 如何从 Perl 中的随机纪元时间戳获取纪元形式的月份开始？

> ID：13610581
> 
> 赞同：3
> 
> 时间：2012-11-28T17:07:25.407
> 
> 标签：perl, epoch, localtime

我从数据库中得到了一些时间，我试图使用 epoch 形式按月存储它们。所以我可以有一些随机的时间，比如：

```
1354120744
1328978360
1297388332 
```

对于每个我想找到代表该月第一天的纪元值，所以对于最后一个时间戳，它将是：

`1296518400`（使用可爱`epochconverter.com`的）。

我知道我可以使用`POSIX mktime`将时间戳减少到天数、分钟数等并相应地更改它们等，就像我不久前发表的一篇文章的答案一样：[考虑到一个月中的不同天数，如何在 Perl 中回溯几个月？](https://stackoverflow.com/questions/12176610/how-to-go-back-months-in-perl-taking-account-of-different-days-in-month)

我遇到的麻烦是，虽然我可以零次，但我担心通过更改日期，星期几将不匹配，因此本质上是无效的日期。这可能是不必要的担心；我不知道如果时间得到验证，一周中的错误日期是否会有所不同。

我看不到任何其他似乎有用的 POSIX 方法。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T17:22:17.957

[自从遇到DateTime](https://metacpan.org/module/DateTime)以来，我不再担心时间戳问题：

```
$ perl -MDateTime -E 'say DateTime->from_epoch(epoch => 1354120744)->truncate(to => "month")->epoch;'
1351728000 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T17:13:48.723

我的第一个想法是使用[Time::Local](https://metacpan.org/module/Time::Local)将`localtime`结果转换回纪元，并根据需要将适当的值强制为 0 或 1。请注意，星期几不在它所期望的输入值中，因此您不必担心如果输入错误会发生什么。

`$start_of_month_epoch = timelocal(0, 0, 0, 1, $month, $year);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T16:15:39.737

> 我遇到的麻烦是，虽然我可以零次，但我担心通过更改日期，星期几将不匹配，因此本质上是无效的日期。

`mktime(3)`出于这个确切原因，忽略`wday`,`yday`和字段。`isdst`您可以安全地将其调整`mday`为 1，然后`POSIX::mktime()`再次调用以将其恢复为纪元值。

```
my @t = localtime();
$t[0] = $t[1] = $t[2] = 0; # sec/min/hour
$t[3] = 1;                 # mday
my $epoch_start_of_month = mktime @t; 
```

或者更简单

```
my $epoch = mktime 0, 0, 0, 1, (localtime)[4,5]; 
```

# oop - 我应该如何在面向对象范式中建模寻路

> ID：13610583
> 
> 赞同：3
> 
> 时间：2012-11-28T17:07:30.957
> 
> 标签：oop, path-finding

我的目标是实现一个（非常简单的）策略游戏。

目前，我将从地图和两个角色（我希望地形对他们产生不同的影响）开始尝试寻路

问题是我在面向对象设计方面的经验很少或根本没有。我以前使用过 C++ 类，但它非常简单：例如，使用集合数组实现的类 Graph 和方法 AStar。我没有想到“几个玩家”的概念。

我想到了以下元素/类：游戏、地图和角色。最终成为探路者课程。

**第一个问题**：角色的位置是游戏应该知道的吗？地图？还是每个字符？

（我认为游戏应该）

**第二个问题**：“findPath”方法在哪里是一个不错的选择？

*   游戏？

*   寻路算法应该是 Map 的一种方法吗？类似 map.findPath(character, srcpos, dstpos)

*   在字符类中？做 character1.findPath(map, srcpos, dstpos) 更有意义

*   如果我添加了一个 Pathfinder 类，它必须构建自己的地图表示，以确定最短路径。在此之前，它必须“询问”地图地形如何影响每个玩家。

（我更喜欢后者）

似乎构建一个辅助结构（并要求地图）应用，比方说，A* 是我无法避免的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:04:41.587

使事物面向对象不是目标，而是在有意义时使用的工具。C++ 是一种具有很多功能的语言，你可以轻松地淹没自己，所以我的建议是让事情变得简单易行。

这可能意味着有时将数据和逻辑紧密结合在一起，或者有时将其完全分开。

第一个问题：我最初的反应是角色应该知道自己的位置。但是你如何用数据表示它取决于你打算如何使用它，所以游戏、角色和潜在的地图都需要知道角色在哪里。

第二个问题：这取决于 Map 类是什么。它是代表地图本身的对象，具有向程序的其余部分公开的必要功能，还是适用于地图的简单数据表示的功能工具箱？

如果 Map 类表示地图，则它应该具有为 Pathfinder 类工作所公开的必要功能（寻路算法将需要从地图中派生一些额外的数据，可能是临时的，也可能是持久的）。

如果 Map 类不代表地图，您可以将寻路功能放入其中。我认为在那种情况下它应该属于那里。如果寻路代码导致 Map 类变得太大，则无论如何都应该将其分离到自己的类中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T09:33:47.857

第一个问题：角色的位置对我来说应该是角色本身的一部分（这样有意义）。

第二个问题：逻辑上寻找路径不能成为 Map 的一部分。那么您将**违反****OOP 原则**之一，即**Single Responsibility**。

根据我的说法，您应该创建 PathFinder 类。你可以这样设计

```
class PathFinder{
      PathFinderAlgorithm algorithm;
      //other required values according to your design

      Path findPath(){
          algorithm.apply();
      }

      //other required methods according to your design

} 
```

`PathFinderAlgorithm`是一个接口。使用它，您还可以更改用于查找路径的算法。就像您将来需要找到最长的路径一样，您所要做的就是创建另一个类，它将找到最长的路径并在 PathFinder 类中替换它。

# ruby-on-rails - ruby on rails 使用选择列表中的范围

> ID：13610586
> 
> 赞同：0
> 
> 时间：2012-11-28T17:07:38.467
> 
> 标签：ruby-on-rails

我有一个名为优先级的代码表。该表有一个名为存档的布尔值。我有一个请求表，它的表格包含优先级选择列表。我正在使用范围声明来判断优先级是否已归档。这是模型中的代码：

```
scope :archived, where(:archive => true)
scope :active, where(:archive => false) 
```

我正在尝试使用请求表单中的范围，如下所示：

```
 <%= f.association :priority, :label_method => :prioritycode.active, :label => 'Priority' %> 
```

但是，这是行不通的。

我应该在表格中使用什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:52:10.310

我可能遗漏了一些东西——不熟悉`association`您正在使用的助手。

如果你想要一个下拉选择列表，我会做类似的事情

```
<%= f.collection_select :priority, Priority.active, :id, :name %> 
```

（假设您有一个定义`Priority`了范围的模型`:active`，并且优先级具有`name`. 您的里程可能会有所不同。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:16:04.870

tharrison 帖子让我思考（谢谢） - 这很有效：

```
 <%= f.association :priority, :collection => Priority.active.all, :label_method => :prioritycode, :label => 'Priority' %> 
```

# vb.net - 如何在运行时生成的组框中重命名运行时生成的复选框？

> ID：13610588
> 
> 赞同：0
> 
> 时间：2012-11-28T17:07:45.823
> 
> 标签：vb.net, checkbox, vb.net-2010, groupbox

我在运行时生成的组框中更改运行时生成的复选框名称时遇到问题。我正在使用多个组框，然后获取数据库中的所有行并为它们创建复选框。复选框名称如下""chkClass" & intGroupBoxNumber & intCurrentRow"。删除组框后，我会重新编号所有当前的组框，并希望复选框名称也更改为新的组框编号，如果这有意义的话。我的代码如下：

```
strControlName = "grpGroup" & strIBResult
        Try
            intGroupBoxOldYLocation = Me.Controls(strControlName).Location
            Me.Controls(strControlName).Dispose()
            MessageBox.Show("Deleted: " & strControlName)
            intRenameGroup = strIBResult + 1

            Try
                strControlName = "grpGroup" & intRenameGroup
                strControlNewName = "grpGroup" & intRenameGroup - 1
                Me.Controls(strControlName).Location = intGroupBoxOldYLocation
                Me.Controls(strControlName).Text = "Group " & intRenameGroup - 1
                Me.Controls(strControlName).Name = strControlNewName
                MessageBox.Show("Changed: " & strControlName & " to: " & strControlNewName)

                Do While intCurrentClassRow < intTotalClassRows
                    strCheckBoxOldName = "chkClass" & intRenameGroup & intCurrentClassRow
                    strCheckBoxNewName = "chkClass" & intRenameGroup - 1 & intCurrentClassRow
                    MessageBox.Show("Renaming: " & strCheckBoxOldName & " to: " & strCheckBoxNewName)
                    Me.Controls(strCheckBoxOldName).Name = strCheckBoxNewName
                    intCurrentClassRow += 1
                    MessageBox.Show("Renamed: " & strCheckBoxOldName & " to: " & strCheckBoxNewName)
                Loop

                intCurrentClassRow = 0
                intRenameGroup += 1
                intGroupBoxNewYIncrement = intGroupBoxOldYLocation.Y + Me.Controls(strControlNewName).Height + 50

                Do
                    strControlName = "grpGroup" & intRenameGroup
                    strControlNewName = "grpGroup" & intRenameGroup - 1
                    Me.Controls(strControlName).Location = New Point(intCurrentXPosition, intGroupBoxNewYIncrement)
                    Me.Controls(strControlName).Text = "Group " & intRenameGroup - 1
                    Me.Controls(strControlName).Name = strControlNewName

                    Do While intCurrentClassRow < intTotalClassRows
                        strCheckBoxOldName = "chkClass" & intRenameGroup & intCurrentClassRow
                        strCheckBoxNewName = "chkClass" & intRenameGroup - 1 & intCurrentClassRow
                        Me.Controls(strCheckBoxOldName).Name = strCheckBoxNewName
                        intCurrentClassRow += 1
                        MessageBox.Show("Renamed: " & strCheckBoxOldName & " to: " & strCheckBoxNewName)
                    Loop

                    intCurrentClassRow = 0
                    intRenameGroup += 1
                    intGroupBoxNewYIncrement = intGroupBoxNewYIncrement + Me.Controls(strControlNewName).Height + 50
                Loop

            Catch ex As Exception
                MessageBox.Show("Control: " & strControlName & " does not exist")
                MessageBox.Show(ErrorToString)
            End Try

        Catch ex As Exception
            'MessageBox.Show("Control: " & strControlName & " never existed")
            MessageBox.Show("Please enter a valid group number to delete.", "Invalid Entry")
            Exit Sub
        End Try 
```

我很确定我的麻烦现在存在于 Me.Controls(strCheckBoxOldName).Name = strCheckBoxNewName

错误如下：“对象引用未设置为对象的实例”

是否有不同的方法来引用该运行时生成的组框？

谢谢。对不起，如果这令人困惑！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:41:34.593

表单的`Controls`集合仅包含直接放置在表单上的顶级控件。如果将控件加载到容器控件中，例如 a `GroupBox`，则必须在该容器控件的`Controls`集合中找到它。

所以，而不是这样做：

```
Me.Controls(strCheckBoxOldName).Name = strCheckBoxNewName 
```

你应该做这样的事情：

```
Me.Controls(strControlName).Controls(strCheckBoxOldName).Name = strCheckBoxNewName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:39:56.620

我会暂时注释掉 try/catch 块。然后应用程序将在违规语句处中断，您不必只是“非常确定”问题出在哪里。然后，检查相关变量的值（突出显示，shfit-F9）。您可能会发现其中一个对象的值为零。这会导致您提到的错误消息。

# ruby - Ruby - 使用 NokoGiri 迭代具有相同名称但不同含义的 xml 元素

> ID：13610589
> 
> 赞同：1
> 
> 时间：2012-11-28T17:07:46.743
> 
> 标签：ruby, xml, nokogiri

我正在使用 UPS API 来验证位置。我从 UPS 收到 XML 响应，然后尝试解析出我需要的信息。UPS 可以为每个地址发回一到三个`<AddressLine>`元素，具体取决于地址。

如果一个地址有两个或更多`AddressLines`，我需要拉出前两个。如果一个地址只有一个`AddressLine`，我需要拉那一行。

如何提取地址和地址2？

```
<AddressKeyFormat>
  <AddressLine>655 MANSELL RD</AddressLine>
  <AddressLine>Apartment #2</AddressLine>
</AddressKeyFormat> 
```

编码 ：

```
xml.xpath('//AddressKeyFormat').each do |node|
  #pull out address, and address2
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T17:12:02.153

假设这`xml`是一个 Nokogiri XML 文档（例如`xml = Nokogiri::XML(xmlString)`），您可以进行 XPath 搜索，`//AddressLine`结果将是所有这些节点：

```
xml.xpath('//AddressLine').map(&:text) # => ["655 MANSELL RD", "Apartment #2"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:36:08.107

这将为您提供最多两条地址线：

```
xml.xpath('//AddressKeyFormat/AddressLine').map(&:text)[0,2] 
```

# c# - foreach 在性能分析器 C# 中重复

> ID：13610591
> 
> 赞同：1
> 
> 时间：2012-11-28T17:08:01.087
> 
> 标签：c#, .net, profiler

我正在分析 C# 应用程序并遇到以下情况。如果有人能解释这种行为，我将不胜感激。

我有以下原始 C# 代码：

```
public class Person
{
    public string firstName;
    public string lastName;
}

class Program
{
    static void Main(string[] args)
    {
        List<Person> people = new List<Person>();

        people.Add(new Person{firstName = "John", lastName = "Smith"});
        people.Add(new Person{firstName = "Jim", lastName = "Johnson"});
        people.Add(new Person{firstName = "Sue", lastName = "Rabon"});

        foreach (Person p in people)
            Console.WriteLine(p.firstName + " " + p.lastName);
    }
} 
```

C# 性能分析器显示上述代码如下：

```
public class Person
{
    public string firstName;
    public string lastName;
}

class Program
{
    static void Main(string[] args)
    {
        List<Person> people = new List<Person>();

        people.Add(new Person{firstName = "John", lastName = "Smith"});
        people.Add(new Person{firstName = "Jim", lastName = "Johnson"});
        people.Add(new Person{firstName = "Sue", lastName = "Rabon"});

        foreach (Person p in people)
        foreach (Person p in people)
        foreach (Person p in people)
        foreach (Person p in people)
        foreach (Person p in people)
            Console.WriteLine(p.firstName + " " + p.lastName);
    }
} 
```

重复 foreach 循环。为什么会这样？如果我使用代码反编译器，那么它类似于原始源代码。

# powershell - Powershell Try Catch 调用-sqlcmd

> ID：13610593
> 
> 赞同：9
> 
> 时间：2012-11-28T17:08:18.797
> 
> 标签：powershell, try-catch, try-catch-finally

当使用 Invoke-Sqlcmd 连接到 SQL Server 失败时，我在 PowerShell 中捕获错误时遇到问题。这是一些用于演示该问题的通用代码：

```
CLS
$server = "Localhost\fake"
try
{
    Invoke-Sqlcmd -Query "SELECT DB_NAME() as [Database]" -Server $server
}
catch
{
    Write-Host "Error connecting to server " $server
} 
```

我收到以下错误：

> Invoke-Sqlcmd：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

我期待得到一行语句：“连接到服务器 Localhost\fake 时出错”

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-28T17:13:31.967

看起来错误被认为是非终止的，这有点奇怪。尝试使用附加参数的 Invoke-SqlCommand `-ErrorAction Stop`：. 如果存在非终止错误，这会将其转换为您可以捕获的终止错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-12T20:50:29.563

发布附加信息以补充@KeithHill 的答案作为答案，因为评论太长了。

如果错误记录是由 Write-Error commandlet 创建的，则它是非终止的，并且受 -ErrorAction 参数或 $ErrorActionPreference 系统变量指定的行为的影响。使用 throw 的错误正在终止。[请参阅有关Write-Error](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.utility/Write-Error)的文档（请注意，PowerShell 4.0 及以下版本没有网页中提到的 -Exception 参数。）和PowerShell 帮助系统中的[about_Throw 。](https://msdn.microsoft.com/powershell/reference/5.1/Microsoft.PowerShell.Core/about/about_Throw)

如果要添加自定义错误信息并使其成为终止错误，请从 catch 块中抛出，如下所示：

```
catch
{
    throw (New-Object System.Exception "Error connecting to server $($server).", $_.Exception)
} 
```

如果您希望终止的行为与 -ErrorAction 参数指定的一样，则可以使用 Write-Error。在 PowerShell 4.0 及更低版本中，Write-Error 命令行开关不允许使用 -Exception 参数，因此不会提供 InnerException。这意味着调用者如果需要确定原始异常，则必须检查 $Error 系统变量中的集合。在以后的版本中，您可以`Write-Error -Message "Some additional error information." -Exception $_.Exception`在 catch 块中使用。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-28T17:17:58.003

尝试

```
CLS
$server = "Localhost/fake"
try
{
    Invoke-Sqlcmd -Query "SELECT DB_NAME() as [Database]" -Server $server
}
catch
{
    $_ | Out-Null
    Write-Host "Error connecting to server " $server
} 
```

这将捕获错误并将其重定向到 null 并显示您的写入主机

# visual-studio-2012 - VS2012 Express Web 无法创建 MVC4 应用

> ID：13610599
> 
> 赞同：7
> 
> 时间：2012-11-28T17:08:32.257
> 
> 标签：visual-studio-2012

我的机器上安装了 VS2012 Express Web，可以创建除 MVC3/MVC4 应用程序之外的所有不同类型的项目。当我在 New Project 对话框上单击 OK 时，我得到 Select A Template 对话框。我注意到创建单元测试项目复选框已禁用。选择任何选项（例如 Internet 应用程序）都会给我同样的错误：系统找不到指定的文件（来自 HRESULT 0x80070002 的异常）。

我已经卸载并删除了 C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\VWDExpress\ProjectTemplatesCache 和 ItemsTemplateChache - 删除后删除了整个 VWDExpress 目录，因此全新安装将重新创建所有模板。我已经尝试了 web-installer 和 .iso 安装程序。有没有人看到这个问题或知道为什么我不能创建 MVC3/MVC4 项目？

任何想法将不胜感激。我已经发布到 MSDN Newgroup 并且没有任何运气。

问候，比尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:36:29.113

我在完整安装 Visual Studio 2012 时遇到了同样的问题。卸载 Visual Studio 及其附带的所有内容（SQL Server localDB、Silverlight SDK 等），重新启动，然后重新安装 Visual Studio 使其工作。

在重新安装之前，我在尝试创建 MVC4 应用程序期间运行了 ProcessMonitor，它一直在尝试查找“extension.vsixmanifest”文件但找不到。我不确定是哪一个，因为我没有尝试重新安装所有扩展；也许这会有所帮助。

# jquery - jQuery 停止事件传播 - 不止一次

> ID：13610600
> 
> 赞同：1
> 
> 时间：2012-11-28T17:08:33.660
> 
> 标签：jquery

我正在尝试编写一个表单，当单击表单上的按钮时向服务器发送 JSON 请求。我想禁用默认表单行为，以便单击按钮完成发送电子邮件地址的工作。这个想法是从服务器向表单返回一条消息（如果出现错误），或者用成功消息替换表单（成功时）。

这是我到目前为止所拥有的（片段）：

```
<div>
    <br />
    <div class="row">
        <div id="invite-member">
            <p>Enter your email:</p>
            <div class="no-show error-msg"></div>
            <form id="frm-invite" method="post" autocomplete="off" action='www.example.com/backend.php' accept-charset="UTF-8">
                <div class="input-append">
                    <input type="text" placeholder="Enter Email" class="input-long">
                    <button id="btn-invite" class="btn btn-primary btn-success" type="submit">Add me »</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script type="text/javascript">
$(document).ready(function(){
    $("#btn-invite").click(function(e){
        alert('Woohoo');
        e.stopPropagation();
    });
});
</script> 
```

第一次加载页面时，按钮的行为与预期相同。尽管随后的时间（没有重新加载页面），事件绑定似乎已被“破坏”并且浏览器想要转到 www.example.com/backend.php。

这是为什么？。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:19:00.883

> 我正在尝试编写一个表单，当单击表单上的按钮时向服务器发送 JSON 请求

在这种情况下，绑定到表单提交可能会更好地防止其他提交表单的方式，这些方式会影响按钮单击。

```
$(document).ready(function(){
    $("form").on("submit", function(e){
        $.ajax({
         // do you thing...
        });

        return false;
    });
}); 
```

[**on()**](http://api.jquery.com/on/)仅在 jQuery 1.7 及更高版本中可用，如果您使用低于 1.7 的 jQuery 版本[**，请将其替换为bind()**](http://api.jquery.com/bind/)

还要注意`return false;`等于`event.preventDefault();`和`event.stopPropagation();`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:11:32.530

您需要使用`preventDefault`而不是`stopPropagation`.

[这是一个例子](http://jsfiddle.net/Vr3Ey/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T17:12:13.180

使用 e.preventDefault() 停止按钮的正常行为

```
$(document).ready(function(){
    $("#btn-invite").click(function(e){
    e.preventDefault();        

    //do ajax

    });
}); 
```

# c++ - 提升精神规则可以参数化吗

> ID：13610605
> 
> 赞同：3
> 
> 时间：2012-11-28T17:08:41.203
> 
> 标签：c++, boost, rules, boost-spirit, boost-spirit-qi

在我的 Boost Spirit 语法中，我希望有一个规则来做到这一点：

**规则<...> noCaseLit = no_case[ lit( "KEYWORD" ) ];**

但是对于自定义关键字，我可以这样做：

**... >> noCaseLit( "SomeSpecialKeyword" ) >> ... >> noCaseLit( "OtherSpecialKeyword1" )**

Boost Spirit 规则是否可以做到这一点，如果可以，怎么做？

PS我以不区分大小写的东西为例，我所追求的是一般的规则参数化。

**编辑：** 通过评论中“sehe”提供的链接，我能够接近我想要的，但我还没有做到。

```
/* Defining the noCaseLit rule */
rule<Iterator, string(string)> noCaseLit = no_case[lit(_r1)];
/* Using the noCaseLit rule */
rule<...> someRule = ... >> noCaseLit(phx::val("SomeSpecialKeyword")) >> ... 
```

我还没有想出一种将文字字符串自动转换为 Phoenix 值的方法，以便我可以使用如下规则：

```
rule<...> someRule = ... >> noCaseLit("SomeSpecialKeyword") >> ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T10:23:25.130

最简单的方法是简单地创建一个返回您的规则/解析器的函数。在[本页](http://www.boost.org/libs/spirit/doc/html/spirit/qi/reference/auto.html)末尾附近的示例中，您可以找到一种声明函数返回值的方法。（[在](http://www.boost.org/libs/spirit/example/karma/auto_facilities.cpp)注释示例中也是如此）。

```
#include <iostream>
#include <string>
#include <boost/spirit/include/qi.hpp>

namespace ascii = boost::spirit::ascii;
namespace qi = boost::spirit::qi;

typedef boost::proto::result_of::deep_copy<
            BOOST_TYPEOF(ascii::no_case[qi::lit(std::string())])
        >::type nocaselit_return_type;

nocaselit_return_type nocaselit(const std::string& keyword)
{
    return boost::proto::deep_copy(ascii::no_case[qi::lit(keyword)]);
}

//C++11 VERSION EASIER TO MODIFY (AND DOESN'T REQUIRE THE TYPEDEF)
//auto nocaselit(const std::string& keyword) -> decltype(boost::proto::deep_copy(ascii::no_case[qi::lit(keyword)]))
//{
//  return boost::proto::deep_copy(ascii::no_case[qi::lit(keyword)]);
//}

int main()
{
    std::string test1="MyKeYWoRD";
    std::string::const_iterator iter=test1.begin();
    std::string::const_iterator end=test1.end();
    if(qi::parse(iter,end,nocaselit("mYkEywOrd"))&& (iter==end))
        std::cout << "Parse 1 Successful" << std::endl;
    else
        std::cout << "Parse 2 Failed. Remaining: " << std::string(iter,end) << std::endl;

    qi::rule<std::string::const_iterator,ascii::space_type> myrule = 
    *(
            ( nocaselit("double") >> ':' >> qi::double_ ) 
        |   ( nocaselit("keyword") >> '-' >> *(qi::char_ - '.') >> '.')
    );

    std::string test2=" DOUBLE : 3.5 KEYWORD-whatever.Double  :2.5";
    iter=test2.begin();
    end=test2.end();
    if(qi::phrase_parse(iter,end,myrule,ascii::space)&& (iter==end))
        std::cout << "Parse 2 Successful" << std::endl;
    else
        std::cout << "Parse 2 Failed. Remaining: " << std::string(iter,end) << std::endl;

    return 0;
} 
```

# javascript - Javascript 字符串模板慢 vs knockoutjs 模板

> ID：13610608
> 
> 赞同：0
> 
> 时间：2012-11-28T17:08:51.503
> 
> 标签：javascript, knockout.js, underscore.js, singlepage

我试图弄清楚为什么在下面的 jsperf 中，javascript 字符串模板比等效的 knockout.js 模板慢得多。测试的目标是测量单页应用程序中的完整页面和部分页面更改链接。

[http://jsperf.com/knockoutvjquery/6](http://jsperf.com/knockoutvjquery/6)

最初我打算只测试 underscore.js 模板的速度，但现在我只是将原始硬编码字符串写入 dom。似乎当速度测试是简单的 dom 元素时，它们很快，但是一旦我进入“现实世界”的情况，淘汰赛测试就会更快。是什么赋予了？

**准备代码 HTML**

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="//cloud.github.com/downloads/SteveSanderson/knockout/knockout-2.1.0.js"></script>

<div id="jquery"></div>

<div id="knockout">
<div data-bind="foreach:Zones">
        <div data-bind="
            style:{ position: 'absolute', top: ZoneY, left: ZoneX, width: Width, height: Height },
            foreach:Layouts
            ">
            <!-- ko if: ShowText -->
                <div style="position: absolute;" data-bind="
                    text:Value, 
                    style:{  
                        top: YPosition, 
                        left: XPosition,
                        color: FontColor,
                        'font-family': FontFamilyName,
                        'font-size': FontSize,
                        'font-weight': FontWeight
                    }
                "></div>
            <!-- /ko -->

            <!-- ko if: ShowHtml -->
                <div style="position: absolute;" data-bind="
                    html:Value, 
                    style:{  
                        top: YPosition, 
                        left: XPosition,
                        color: FontColor,
                        'font-family': FontFamilyName,
                        'font-size': FontSize,
                        'font-weight': FontWeight
                    }
                    "></div>
            <!-- /ko -->

            <!-- ko if: ShowImage -->

                <!-- ko if: IsSWF -->
                    <embed data-bind="attr:{src:ImageURL}, style:{ width: Width, height : Height }">
                <!-- /ko -->

                <!-- ko ifnot: IsSWF -->
                    <img data-bind="attr:{src:ImageURL}, style:{ width: Width, height : Height }" />
                <!-- /ko -->

            <!-- /ko -->
        </div>
    </div>
</div> 
```

**为所有测试定义设置**

```
var d1 = '<div style="position: absolute; top: 0px; left: 0px; width: 1360px; height: 768px; "></div>'

var d2 = '<div style="position: absolute; top: 0px; left: 0px; width: 1360px; height: 280px; "><embed  src="http://ronincastx.ronincast.com/CMS/Media/54638DC3-DC3C-4EAC-8698-334EB681B6B8_Widener-Expo-1.2-1360x280.swf" style="width: 1360px; height: 275px; "></div>'

var d3 = '<div  style="position: absolute; top: 275px; left: 0px; width: 1360px; height: 493px; "><img  src="http://ronincastx.ronincast.com/CMS/Media/94A94FC5-AB43-4218-B5CA-15C6F37D3152_WidenerU-Expo-1.2-BKGD.png" style="width: 1360px; height: 493px; "></div>'

var d4 = '<div  style="position: absolute; top: 650px; left: 0px; width: 118px; height: 118px; "><embed  src="http://ronincastx.ronincast.com/CMS/Media/0C484985-6038-47B8-8A1D-BF7FB33B6B56_Be Well-Footer-140x140.swf" style="width: 140px; height: 140px; "></div>'

var d5 = '<div style="position: absolute; top: 650px; left: 160px; width: 130px; height: 118px; "><img  src="http://ronincastx.ronincast.com/CMS/Media/a91e8733-d27f-4f86-81e3-df4f93efad67_01Just4U-Icons-LowerFat.png" style="width: 130px; height: 118px; "> </div>'

var d6 = '<div  style="position: absolute; top: 650px; left: 310px; width: 130px; height: 118px; "></div>'

var d7 = '<div  style="position: absolute; top: 650px; left: 460px; width: 130px; height: 118px; "></div>'

var d8 = '<div  style="position: absolute; top: 650px; left: 610px; width: 130px; height: 118px; "></div>'

var d9 = '<div style="position: absolute; top: 650px; left: 760px; width: 130px; height: 118px; "></div>'

var d10 = '<div style="position: absolute; top: 370px; left: 0px; width: 680px; height: 126px; "> <div style="position: absolute; top: 79px; left: 84px; color: rgb(0, 0, 0); font-size: 24px; font-weight: bold; " > Create your customized omelet with your choice of: ham, turkey, spinach, green peppers, onions, and mushrooms</div><div style="position: absolute; top: 0px; left: 84px; color: rgb(0, 0, 0); font-size: 50px; font-weight: bold; " >Customized Omelet</div></div>'

var d11 = '<div  style="position: absolute; top: 501px; left: 0px; width: 680px; height: 126px; "> <img  src="http://ronincastx.ronincast.com/CMS/Media/2509594F-404F-4818-BB26-30C91ADB57B9_transparent-image.png" style="width: 25px; height: 25px; "></div>'

var d12 = '<div style="position: absolute; top: 370px; left: 680px; width: 680px; height: 126px; "><img  src="http://ronincastx.ronincast.com/CMS/Media/2509594F-404F-4818-BB26-30C91ADB57B9_transparent-image.png" style="width: 25px; height: 25px; "> </div>'

var d13 = '<div  style="position: absolute; top: 501px; left: 680px; width: 680px; height: 126px; "><img  src="http://ronincastx.ronincast.com/CMS/Media/2509594F-404F-4818-BB26-30C91ADB57B9_transparent-image.png" style="width: 25px; height: 25px; "></div>'

var d14 = '<div  style="position: absolute; top: 290px; left: 0px; width: 680px; height: 77px; "><div style="position: absolute; top: 0px; left: 84px; color: rgb(0, 0, 0); font-size: 72px; font-weight: bold; "></div></div>'

var d15 = '<div  style="position: absolute; top: 290px; left: 680px; width: 680px; height: 77px; "><div style="position: absolute; top: 0px; left: 84px; color: rgb(0, 0, 0); font-size: 72px; font-weight: bold; "></div></div>'

var displayViewModel = function () {
    var self = this;

    this.init = function () {

    };

    this.Events = ko.observableArray();

    this.Zones = ko.computed({
        read: function () {
            if(self.Events().length == 0) {
                return [];
            }

            return self.Events()[0].Presentations[0].Zones;
        },
        deferEvaluation: true
    });
};
var events = [
        {
            "Id": 38312,
            "Presentations": [
                {
                    "Zones": [
                        {
                            "ZoneX": "0px",
                            "ZoneY": "0px",
                            "Layouts": [],
                            "Height": "768px",
                            "Width": "1360px"
                        },
                        {
                            "ZoneX": "0px",
                            "ZoneY": "0px",
                            "Layouts": [
                                {
                                    "XPosition": "0px",
                                    "YPosition": "0px",
                                    "Width": "1360px",
                                    "Height": "275px",
                                    "Value": "54638dc3-dc3c-4eac-8698-334eb681b6b8",
                                    "ValueType": 12,
                                    "FontSize": "20px",
                                    "FontFamilyName": "Verlag Black",
                                    "FontWeight": "Normal",
                                    "FontColor": "#000000",
                                    "FileName": "54638DC3-DC3C-4EAC-8698-334EB681B6B8_Widener-Expo-1.2-1360x280.swf",
                                    "ShowText": false,
                                    "ShowImage": true,
                                    "ShowHtml": false,
                                    "IsSWF": true,
                                    "ImageURL": "http://ronincastx.ronincast.com/CMS/Media/54638DC3-DC3C-4EAC-8698-334EB681B6B8_Widener-Expo-1.2-1360x280.swf"
                                }
                            ],
                            "Height": "280px",
                            "Width": "1360px"
                        },
                        {
                            "ZoneX": "0px",
                            "ZoneY": "275px",
                            "Layouts": [
                                {
                                    "XPosition": "0px",
                                    "YPosition": "0px",
                                    "Width": "1360px",
                                    "Height": "493px",
                                    "Value": "94a94fc5-ab43-4218-b5ca-15c6f37d3152",
                                    "ValueType": 12,
                                    "FontSize": "20px",
                                    "FontFamilyName": "Verlag Black",
                                    "FontWeight": "Normal",
                                    "FontColor": "#000000",
                                    "FileName": "94A94FC5-AB43-4218-B5CA-15C6F37D3152_WidenerU-Expo-1.2-BKGD.png",
                                    "ShowText": false,
                                    "ShowImage": true,
                                    "ShowHtml": false,
                                    "IsSWF": false,
                                    "ImageURL": "http://ronincastx.ronincast.com/CMS/Media/94A94FC5-AB43-4218-B5CA-15C6F37D3152_WidenerU-Expo-1.2-BKGD.png"
                                }
                            ],
                            "Height": "493px",
                            "Width": "1360px"
                        },
                        {
                            "ZoneX": "0px",
                            "ZoneY": "650px",
                            "Layouts": [
                                {
                                    "XPosition": "0px",
                                    "YPosition": "0px",
                                    "Width": "140px",
                                    "Height": "140px",
                                    "Value": "0c484985-6038-47b8-8a1d-bf7fb33b6b56",
                                    "ValueType": 12,
                                    "FontSize": "20px",
                                    "FontFamilyName": "Verlag Black",
                                    "FontWeight": "Normal",
                                    "FontColor": "#000000",
                                    "FileName": "0C484985-6038-47B8-8A1D-BF7FB33B6B56_Be Well-Footer-140x140.swf",
                                    "ShowText": false,
                                    "ShowImage": true,
                                    "ShowHtml": false,
                                    "IsSWF": true,
                                    "ImageURL": "http://ronincastx.ronincast.com/CMS/Media/0C484985-6038-47B8-8A1D-BF7FB33B6B56_Be Well-Footer-140x140.swf"
                                }
                            ],
                            "Height": "118px",
                            "Width": "118px"
                        },
                        {
                            "ZoneX": "160px",
                            "ZoneY": "650px",
                            "Layouts": [
                                {
                                    "XPosition": "0px",
                                    "YPosition": "0px",
                                    "Width": "130px",
                                    "Height": "118px",
                                    "Value": "a91e8733-d27f-4f86-81e3-df4f93efad67",
                                    "ValueType": 12,
                                    "FontSize": "20px",
                                    "FontFamilyName": "Verlag Black",
                                    "FontWeight": "Normal",
                                    "FontColor": "#000000",
                                    "FileName": "a91e8733-d27f-4f86-81e3-df4f93efad67_01Just4U-Icons-LowerFat.png",
                                    "ShowText": false,
                                    "ShowImage": true,
                                    "ShowHtml": false,
                                    "IsSWF": false,
                                    "ImageURL": "http://ronincastx.ronincast.com/CMS/Media/a91e8733-d27f-4f86-81e3-df4f93efad67_01Just4U-Icons-LowerFat.png"
                                }
                            ],
                            "Height": "118px",
                            "Width": "130px",
                        },
                        {
                            "ZoneX": "310px",
                            "ZoneY": "650px",
                            "Layouts": [],
                            "Height": "118px",
                            "Width": "130px",

                        },
                        {
                            "ZoneX": "460px",
                            "ZoneY": "650px",
                            "Layouts": [],
                            "Height": "118px",
                            "Width": "130px"
                        },
                        {
                            "ZoneX": "610px",
                            "ZoneY": "650px",
                            "Layouts": [],
                            "Height": "118px",
                            "Width": "130px"
                        },
                        {
                            "ZoneX": "760px",
                            "ZoneY": "650px",
                            "Layouts": [],
                            "Height": "118px",
                            "Width": "130px"
                        },
                        {
                            "ZoneX": "0px",
                            "ZoneY": "370px",
                            "Layouts": [
                                {
                                    "XPosition": "84px",
                                    "YPosition": "79px",
                                    "Width": "595px",
                                    "Height": "40px",
                                    "Value": "Create your customized omelet with your choice of: ham, turkey, spinach, green peppers, onions, and mushrooms",
                                    "ValueType": 3,
                                    "FontSize": "24px",
                                    "FontFamilyName": "",
                                    "FontWeight": "bold",
                                    "FontColor": "#000000",
                                    "ShowText": true,
                                    "ShowImage": false,
                                    "ShowHtml": false,
                                    "IsSWF": false,
                                    "ImageURL": ""
                                },
                                {
                                    "XPosition": "84px",
                                    "YPosition": "0px",
                                    "Width": "595px",
                                    "Height": "52px",
                                    "Value": "Customized Omelet",
                                    "ValueType": 1,
                                    "FontSize": "50px",
                                    "FontFamilyName": "",
                                    "FontWeight": "bold",
                                    "FontColor": "#000000",
                                    "ShowText": true,
                                    "ShowImage": false,
                                    "ShowHtml": false,
                                    "IsSWF": false,
                                    "ImageURL": ""
                                }
                            ],
                            "Height": "126px",
                            "Width": "680px",
                        },
                        {
                            "ZoneX": "0px",
                            "ZoneY": "501px",
                            "Layouts": [
                                {
                                    "XPosition": "53px",
                                    "YPosition": "11px",
                                    "Width": "25px",
                                    "Height": "25px",
                                    "Value": "2509594f-404f-4818-bb26-30c91adb57b9",
                                    "ValueType": 12,
                                    "FontSize": "20px",
                                    "FontFamilyName": "Verlag Black",
                                    "FontWeight": "Normal",
                                    "FontColor": "#000000",
                                    "FileName": "2509594F-404F-4818-BB26-30C91ADB57B9_transparent-image.png",
                                    "ShowText": false,
                                    "ShowImage": true,
                                    "ShowHtml": false,
                                    "IsSWF": false,
                                    "ImageURL": "http://ronincastx.ronincast.com/CMS/Media/2509594F-404F-4818-BB26-30C91ADB57B9_transparent-image.png"
                                }
                            ],
                            "Height": "126px",
                            "Width": "680px",
                        },
                        {
                            "ZoneX": "680px",
                            "ZoneY": "370px",
                            "Layouts": [
                                {
                                    "XPosition": "53px",
                                    "YPosition": "11px",
                                    "Width": "25px",
                                    "Height": "25px",
                                    "Value": "2509594f-404f-4818-bb26-30c91adb57b9",
                                    "ValueType": 12,
                                    "FontSize": "20px",
                                    "FontFamilyName": "Verlag Black",
                                    "FontWeight": "Normal",
                                    "FontColor": "#000000",
                                    "FileName": "2509594F-404F-4818-BB26-30C91ADB57B9_transparent-image.png",
                                    "ShowText": false,
                                    "ShowImage": true,
                                    "ShowHtml": false,
                                    "IsSWF": false,
                                    "ImageURL": "http://ronincastx.ronincast.com/CMS/Media/2509594F-404F-4818-BB26-30C91ADB57B9_transparent-image.png"
                                }
                            ],
                            "Height": "126px",
                            "Width": "680px",
                        },
                        {
                            "ZoneX": "680px",
                            "ZoneY": "501px",
                            "Layouts": [
                                {
                                    "XPosition": "53px",
                                    "YPosition": "11px",
                                    "Width": "25px",
                                    "Height": "25px",
                                    "Value": "2509594f-404f-4818-bb26-30c91adb57b9",
                                    "ValueType": 12,
                                    "FontSize": "20px",
                                    "FontFamilyName": "Verlag Black",
                                    "FontWeight": "Normal",
                                    "FontColor": "#000000",
                                    "FileName": "2509594F-404F-4818-BB26-30C91ADB57B9_transparent-image.png",
                                    "ShowText": false,
                                    "ShowImage": true,
                                    "ShowHtml": false,
                                    "IsSWF": false,
                                    "ImageURL": "http://ronincastx.ronincast.com/CMS/Media/2509594F-404F-4818-BB26-30C91ADB57B9_transparent-image.png"
                                }
                            ],
                            "Height": "126px",
                            "Width": "680px"
                        },
                        {
                            "ZoneX": "0px",
                            "ZoneY": "290px",
                            "Layouts": [
                                {
                                    "XPosition": "84px",
                                    "YPosition": "0px",
                                    "Width": "596px",
                                    "Height": "77px",
                                    "Value": "",
                                    "ValueType": 1,
                                    "FontSize": "72px",
                                    "FontFamilyName": "",
                                    "FontWeight": "bold",
                                    "FontColor": "#000000",
                                    "ShowText": true,
                                    "ShowImage": false,
                                    "ShowHtml": false,
                                    "IsSWF": false,
                                    "ImageURL": ""
                                }
                            ],
                            "Height": "77px",
                            "Width": "680px"
                        },
                        {
                            "ZoneX": "680px",
                            "ZoneY": "290px",
                            "Layouts": [
                                {
                                    "XPosition": "84px",
                                    "YPosition": "0px",
                                    "Width": "596px",
                                    "Height": "77px",
                                    "Value": "",
                                    "ValueType": 1,
                                    "FontSize": "72px",
                                    "FontFamilyName": "",
                                    "FontWeight": "bold",
                                    "FontColor": "#000000",
                                    "ShowText": true,
                                    "ShowImage": false,
                                    "ShowHtml": false,
                                    "IsSWF": false,
                                    "ImageURL": ""
                                }
                            ],
                            "Height": "77px",
                            "Width": "680px"
                        }
                    ]
                }
            ]
        }
    ];

var masterViewModel = new displayViewModel();

var knockoutElement = $('#knockout')[0];

ko.applyBindings(masterViewModel, $('#knockout')[0]); 
```

**为所有测试定义拆解**

```
$('#jquery').empty()

masterViewModel.Events([]);
ko.cleanNode(knockoutElement); 
```

**测试 1 - jquery**

```
var tmp = [d1, d2, d3, d4, d5, d6, d7, d8, d9, d10, d11, d12, d13, d14, d15];
$('#jquery')[0].innerHTML = tmp.join(); 
```

**测试 2 - 淘汰赛**

```
masterViewModel.Events.push.apply(masterViewModel.Events, events); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T21:26:08.013

对于匿名模板（用于`if`、`ifnot`、`with`和`foreach`），元素在实际渲染发生时被存储和克隆。这适用于除 IE < 9 之外的所有浏览器。

因此，Knockout 测试能够`cloneNode`在现有节点上执行，而不是像 jQuery 测试那样从字符串中解析它们。

# ruby-on-rails - Rails，动态用户定义字段

> ID：13610614
> 
> 赞同：1
> 
> 时间：2012-11-28T17:09:19.503
> 
> 标签：ruby-on-rails

我的问题如下：

我有两个模型：产品和品牌。当前在产品表单中，用户能够（通过选择列表）为其产品选择品牌。但是，如果该品牌不存在，他可以通过单击重定向到品牌/新表单的链接来创建一个新品牌。

有没有办法直接在产品配方中处理缺失的品牌创建？

我希望我足够清楚。

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:19:56.493

在表单本身中，您可以允许用户从下拉列表中选择品牌**或**在文本字段中输入新品牌的名称。我会使用收音机来强制用户执行这两个操作之一，而不是两者都执行。这些`<option>`元素的值对应于品牌名称而不是品牌 ID。

然后，在 Rails 方面，您可以使用`find_or_create_by_name`，假设您的品牌名称是唯一的：

```
# assuming a params structure like params[:product][:brand_name]
class Product < ActiveRecord::Base
  def brand_name=(name)
    self.brand = Brand.find_or_create_by_name(name)
  end
end 
```

控制器仍然会简单地做这样的事情：

```
@product = Product.new(params[:product]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:24:57.763

我个人会使用 jQuery 来做类似的事情。让用户从选择列表中选择“新品牌”之类的内容，然后显示输入提示。使用 AJAX 创建新品牌，然后在表单中重新创建品牌列表，并选择新品牌。

# php - php从文件中读取，但我在mysql中输入空白

> ID：13610617
> 
> 赞同：0
> 
> 时间：2012-11-28T17:09:21.160
> 
> 标签：php, mysql, fopen

我正在尝试读取一个文件，然后我试图插入到 mysql 表中我尝试了以下操作，我得到了 te 文本并显示了文件中的文本，但是当我尝试插入到 db 时，创建了行但是我没有任何帮助？

这是我的代码

```
<?php

$file_handle = fopen("text.htm", "r");
while (!feof($file_handle)) {
    $line = fgets($file_handle);
    echo $line;
    // make the DSN
    $dsn = 'mysql:host=localhost;dbname=text;';
    $user = 'text';
    $password = 'text';
    $name=$line;
}
try
{   
    $dbh = new PDO($dsn, $user, $password);
    // set the error mode to exception 
    $dbh->setAttribute(PDO::ATTR_ERRMODE, 
    PDO::ERRMODE_EXCEPTION);  
    $sql = 'INSERT INTO text (db_text) 
                   VALUES (:name)';
    $stmt = $dbh->prepare($sql);
    $stmt->bindParam(':name', $name);
    $stmt->execute();
}
catch (PDOException $e)
{
    echo 'PDO Exception Caught.  ';
    echo 'Error with the database: <br />';
    echo 'SQL Query: ', $sql;
    echo 'Error: ' . $e->getMessage();
}
fclose($file_handle);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:10:39.177

我觉得你应该改变

`$line = fgets($file_handle);`

至

`$line .= fgets($file_handle);`

在while循环内。

* * *

另外，在while循环之前的某个地方`$line`实例化；`$line = "";`

`fgets`可能会`false`最后一次返回（或空行或其他内容）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:39:26.837

尝试在此之前声明 $name ......这可能是一个范围问题......

```
$name = "";    
$file_handle = fopen("text.htm", "r");
while (!feof($file_handle)) {
    $line = fgets($file_handle);
    echo $line;
    // make the DSN
    $dsn = 'mysql:host=localhost;dbname=text;';
    $user = 'text';
    $password = 'text';
    $name=$line;
} 
```

# objective-c - 将 MKMapView 保持在区域内

> ID：13610626
> 
> 赞同：2
> 
> 时间：2012-11-28T17:10:01.313
> 
> 标签：objective-c, mkmapview

我试图始终将地球的特定区域保持在屏幕上。我环顾四周，发现有点工作和排序工作的代码，但没有一个真正工作......所以我编写了自己的代码，它比我发现的更好，除了一个关闭的行为。

将此方法拖放到 MKMapViewController 中将使显示区域保持在特定的缩放范围内。如果区域/缩放组合*小于*显示，即它在屏幕上完全可见，那么这将按预期工作。

如果区域/缩放组合*大于*屏幕，则可以正常工作。我检测到越界并移动地图，但似乎我的偏移量被翻转了？我得到了地图来回或上下“反弹”的引文。

我似乎无法弄清楚是什么导致弹跳或如何阻止它。

```
- (void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated
{
    // Keep map in the zoom range we want
    int zoom = self.map.zoomLevel;
    if (self.map.zoomLevelFine > (float)self.maxZoom && self.maxZoom > 0)
    {
        zoom = self.maxZoom;
        [self.map setCenterCoordinate:self.map.centerCoordinate zoomLevel:self.maxZoom animated:YES];
    }
    else if (self.map.zoomLevelFine < (float)self.minZoom && self.maxZoom > 0)
    {
        zoom = self.minZoom;
        [self.map setCenterCoordinate:self.map.centerCoordinate zoomLevel:self.minZoom animated:YES];
    }

    // Figure out the current on screen boundry
    MKCoordinateSpan span = self.map.region.span;
    double north = self.map.centerCoordinate.latitude + (span.latitudeDelta / 2);
    double south = self.map.centerCoordinate.latitude - (span.latitudeDelta / 2);
    double east = self.map.centerCoordinate.longitude + (span.longitudeDelta / 2);
    double west = self.map.centerCoordinate.longitude - (span.longitudeDelta / 2);

    // get the offsets
    float offsetLong = 0.0;
    float offsetLat = 0.0;
    if (self.topLeftLong < west && self.btmRightLong < east)
    {
        offsetLong = west - self.topLeftLong;
    }
    else if (self.topLeftLong > west && self.btmRightLong > east)
    {
        offsetLong = east - self.btmRightLong;
    }

    if (self.topLeftLat > north && self.btmRightLat > south)
    {
        offsetLat = north - self.topLeftLat;
    }
    else if (self.topLeftLat < north && self.btmRightLat < south)
    {
        offsetLat = south - self.btmRightLat;
    }

    // Keep the map on screen
    if (offsetLat != 0.0 || offsetLong != 0.0)
    {
        [self.map setCenterCoordinate:CLLocationCoordinate2DMake(self.map.centerCoordinate.latitude - offsetLat,
                                                                 self.map.centerCoordinate.longitude - offsetLong)
                            zoomLevel:zoom animated:YES];
    }

    // Debug
    NSLog(@"Center: %f, %f, Zoom: %f", self.map.centerCoordinate.latitude, self.map.centerCoordinate.longitude, self.map.zoomLevelFine);
    NSLog(@"A north: %f west: %f south: %f east: %f", north, west, south, east);
    NSLog(@"B north: %f west: %f south: %f east: %f", self.topLeftLat, self.topLeftLong, self.btmRightLat, self.btmRightLong);
    NSLog(@"offset %f, %f", offsetLong, offsetLat);
} 
```

将此片段添加到 init 方法中将设置地图以在屏幕上显示 Oahu 岛。

```
// Get some basic setings
self.topLeftLat = 21.714852;
self.topLeftLong = -158.286896;
self.btmRightLat = 21.245862;
self.btmRightLong = -157.646942;
self.minZoom = 9.0;
self.maxZoom = 13.0; 
```

上述方法还使用类别来帮助操作地图。

MKMapView+Extra.h

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface MKMapView (Extra)

#pragma mark -
#pragma mark Zoom methods
- (void)setCenterCoordinate:(CLLocationCoordinate2D)centerCoordinate
                  zoomLevel:(NSUInteger)zoomLevel
                   animated:(BOOL)animated;
- (int) zoomLevel;
- (float) zoomLevelFine;

#pragma mark -
#pragma mark Region methods
- (void)setRegionTopLeft:(CLLocationCoordinate2D)topLeft
             bottomRight:(CLLocationCoordinate2D)bottomRight
                animated:(BOOL)animated;
- (CLLocationCoordinate2D)centerPointFromRegionTopLeft:(CLLocationCoordinate2D)topLeft
                                           bottomRight:(CLLocationCoordinate2D)bottomRight;
- (MKCoordinateSpan)spanFromRegionTopLeft:(CLLocationCoordinate2D)topLeft
                              bottomRight:(CLLocationCoordinate2D)bottomRight;
@end 
```

MKMapView+Extra.m

```
#import "MKMapView+Extra.h"

#define MERCATOR_OFFSET 268435456
#define MERCATOR_RADIUS 85445659.44705395

@implementation MKMapView (ZoomLevel)

#pragma mark -
#pragma mark Map conversion methods

- (double)longitudeToPixelSpaceX:(double)longitude
{
    return round(MERCATOR_OFFSET + MERCATOR_RADIUS * longitude * M_PI / 180.0);
}

- (double)latitudeToPixelSpaceY:(double)latitude
{
    return round(MERCATOR_OFFSET - MERCATOR_RADIUS * logf((1 + sinf(latitude * M_PI / 180.0)) / (1 - sinf(latitude * M_PI / 180.0))) / 2.0);
}

- (double)pixelSpaceXToLongitude:(double)pixelX
{
    return ((round(pixelX) - MERCATOR_OFFSET) / MERCATOR_RADIUS) * 180.0 / M_PI;
}

- (double)pixelSpaceYToLatitude:(double)pixelY
{
    return (M_PI / 2.0 - 2.0 * atan(exp((round(pixelY) - MERCATOR_OFFSET) / MERCATOR_RADIUS))) * 180.0 / M_PI;
}

#pragma mark -
#pragma mark Helper methods

- (MKCoordinateSpan)coordinateSpanWithMapView:(MKMapView *)mapView
                             centerCoordinate:(CLLocationCoordinate2D)centerCoordinate
                                 andZoomLevel:(NSUInteger)zoomLevel
{
    // convert center coordiate to pixel space
    double centerPixelX = [self longitudeToPixelSpaceX:centerCoordinate.longitude];
    double centerPixelY = [self latitudeToPixelSpaceY:centerCoordinate.latitude];

    // determine the scale value from the zoom level
    NSInteger zoomExponent = 20 - zoomLevel;
    double zoomScale = pow(2, zoomExponent);

    // scale the map’s size in pixel space
    CGSize mapSizeInPixels = mapView.bounds.size;
    double scaledMapWidth = mapSizeInPixels.width * zoomScale;
    double scaledMapHeight = mapSizeInPixels.height * zoomScale;

    // figure out the position of the top-left pixel
    double topLeftPixelX = centerPixelX - (scaledMapWidth / 2);
    double topLeftPixelY = centerPixelY - (scaledMapHeight / 2);

    // find delta between left and right longitudes
    CLLocationDegrees minLng = [self pixelSpaceXToLongitude:topLeftPixelX];
    CLLocationDegrees maxLng = [self pixelSpaceXToLongitude:topLeftPixelX + scaledMapWidth];
    CLLocationDegrees longitudeDelta = maxLng - minLng;

    // find delta between top and bottom latitudes
    CLLocationDegrees minLat = [self pixelSpaceYToLatitude:topLeftPixelY];
    CLLocationDegrees maxLat = [self pixelSpaceYToLatitude:topLeftPixelY + scaledMapHeight];
    CLLocationDegrees latitudeDelta = -1 * (maxLat - minLat);

    // create and return the lat/lng span
    MKCoordinateSpan span = MKCoordinateSpanMake(latitudeDelta, longitudeDelta);
    return span;
}

#pragma mark -
#pragma mark Public zoom methods

- (void)setCenterCoordinate:(CLLocationCoordinate2D)centerCoordinate
                  zoomLevel:(NSUInteger)zoomLevel
                   animated:(BOOL)animated
{
    NSLog(@"setCenterCoordinate: zoomLevel:%d animated:", zoomLevel);
    // clamp large numbers to 28
    zoomLevel = MIN(zoomLevel-1, 28);

    // use the zoom level to compute the region
    MKCoordinateSpan span = [self coordinateSpanWithMapView:self centerCoordinate:centerCoordinate andZoomLevel:zoomLevel];
    MKCoordinateRegion region = MKCoordinateRegionMake(centerCoordinate, span);

    // set the region like normal
    [self setRegion:region animated:animated];
}

- (int) zoomLevel
{
    return 21 - round(log2(self.region.span.longitudeDelta * MERCATOR_RADIUS * M_PI / (180.0 * self.bounds.size.width)));
}

- (float) zoomLevelFine
{
    return 21.0 - log2(self.region.span.longitudeDelta * MERCATOR_RADIUS * M_PI / (180.0 * self.bounds.size.width));
}

#pragma mark -
#pragma mark Public region methods
- (void)setRegionTopLeft:(CLLocationCoordinate2D)topLeft
             bottomRight:(CLLocationCoordinate2D)bottomRight
                animated:(BOOL)animated
{
    CLLocationCoordinate2D center = [self centerPointFromRegionTopLeft:topLeft bottomRight:bottomRight];
    MKCoordinateSpan span = [self spanFromRegionTopLeft:topLeft bottomRight:bottomRight];
    MKCoordinateRegion region = MKCoordinateRegionMake(center, span);

    // set the region like normal
    [self setRegion:region animated:animated];
}

- (CLLocationCoordinate2D)centerPointFromRegionTopLeft:(CLLocationCoordinate2D)topLeft
                                           bottomRight:(CLLocationCoordinate2D)bottomRight
{
    CLLocationCoordinate2D centerPoint;

    centerPoint.latitude = ((topLeft.latitude + bottomRight.latitude) / 2);
    centerPoint.longitude = ((topLeft.longitude + bottomRight.longitude) / 2);

    return centerPoint;
}

- (MKCoordinateSpan)spanFromRegionTopLeft:(CLLocationCoordinate2D)topLeft
                              bottomRight:(CLLocationCoordinate2D)bottomRight
{
    MKCoordinateSpan span;

    span.latitudeDelta = fabs(bottomRight.latitude - topLeft.latitude);
    span.longitudeDelta = fabs(bottomRight.longitude - topLeft.longitude);

    return span;
}

@end 
```

# c# - 在 Unity 中注册时是否可以指定可变长度的构造函数参数？

> ID：13610631
> 
> 赞同：3
> 
> 时间：2012-11-28T17:10:24.417
> 
> 标签：c#, unity-container, ioc-container, params-keyword

我有一个接口 ,`IFoo`和三个具体类：`FooA : IFoo`,`FooB : IFoo`和`MultiFoo : IFoo`.

for 的构造函数`MultiFoo`如下所示：

```
public MultiFoo(params IFoo[] foos) { ... } 
```

`MultiFoo`在 Unity 中注册时可以指定特定的分辨率覆盖吗？我希望能够做这样的事情：

```
container.RegisterType<IFoo, FooA>("Foo A");
container.RegisterType<IFoo, FooB>("Foo B");

container.RegisterType<IFoo, MultiFoo>(new ContainerControlledLifetime(),
    new ResolvedOverride<IFoo>("Foo A"),
    new ResolvedOverride<IFoo>("Foo B")
); 
```

然后它将在解析时将已**解析**的 FooA 和已解析的 FooB 传递给构造函数：

```
new MultiFoo(new FooA(), new FooB()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:35:23.727

`params`是编译器语法糖化，您实际上是将数组作为单个参数传递。为了匹配，您将像这样配置容器：

```
container.RegisterType<IFoo, MultiFoo>(new ContainerControlledLifetimeManager(),
    new InjectionConstructor(new ResolvedArrayParameter<IFoo>(new ResolvedParameter<IFoo>("Foo A"), new ResolvedParameter<IFoo>("Foo B")))); 
```

解析器覆盖在解析时使用，而不是在容器设置时使用。使用解析覆盖的等效项如下所示：

```
container.RegisterType<IFoo, MultiFoo>(new ContainerControlledLifetimeManager());

var foo = container.Resolve<IFoo>(
    new ParameterOverride(
        "foos", 
        new ResolvedArrayParameter<IFoo>(new ResolvedParameter<IFoo>("Foo A"), new ResolvedParameter<IFoo>("Foo B")))); 
```

# mysql - 无法迁移 MySQL 数据库

> ID：13610632
> 
> 赞同：2
> 
> 时间：2012-11-28T17:10:27.833
> 
> 标签：mysql, database-migration, flyway

我无法使用命令行 2.0.2 初始化然后迁移 MyQSL 数据库，这是我的配置文件：

```
root# cat conf/global.properties 
flyway.driver=com.mysql.jdbc.Driver
flyway.url=jdbc:mysql://localhost:3306/global
flyway.user=root
flyway.password=password
flyway.schemas=global
flyway.sqlMigrationPrefix=GLOBAL
flyway.locations=mysql/global
flyway.initialVersion=3.5.1.3.0 
```

这是我的 SQL 脚本目录的内容：

```
root# ls -1 mysql/global/
GLOBAL3.5.1.1.0_a__update_table.sql
GLOBAL3.5.1.2.0_a__add_column1.sql
GLOBAL3.5.1.3.0_a__add_column2.sql
GLOBAL3.6.0.0.0_a__add_table.sql 
```

这是 ./flyway.sh -X info 的结果（顺便说一下，几乎找不到这种调试模式）：

```
root# ./flyway.sh -configFile=conf/global.properties info
Flyway (Command-line Tool) v.2.0.2

DEBUG: Adding location to classpath: PATH_TO_BIN/../jars/mysql-connector-java-5.1.18-bin.jar
DEBUG: Database: MySQL 5.1
DEBUG: DDL Transactions Supported: false
DEBUG: Schema: global
DEBUG: No metadata table upgrade to the Flyway 2.0 format necessary
DEBUG: No metadata table upgrade to the Flyway 2.0.2 format necessary
DEBUG: Spring Jdbc available: true
DEBUG: Scanning for resources at 'db/migration' (Prefix: 'GLOBAL', Suffix: '.sql')
DEBUG: Unable to determine URL for classpath location: db/migration (ClassLoader: java.net.URLClassLoader@1b17a8bd)
DEBUG: Scanning for classes at 'db/migration' (Implementing: 'com.googlecode.flyway.core.api.migration.jdbc.JdbcMigration')
DEBUG: Unable to determine URL for classpath location: db/migration (ClassLoader: java.net.URLClassLoader@1b17a8bd)
DEBUG: Scanning for classes at 'db/migration' (Implementing: 'com.googlecode.flyway.core.api.migration.spring.SpringJdbcMigration')
DEBUG: Unable to determine URL for classpath location: db/migration (ClassLoader: java.net.URLClassLoader@1b17a8bd)
DEBUG: Scanning for classes at 'db/migration' (Implementing: 'com.googlecode.flyway.core.migration.java.JavaMigration')
DEBUG: Unable to determine URL for classpath location: db/migration (ClassLoader: java.net.URLClassLoader@1b17a8bd)
DEBUG: Scanning for resources at 'mysql/global' (Prefix: 'GLOBAL', Suffix: '.sql')
DEBUG: Unable to determine URL for classpath location: mysql/global (ClassLoader: java.net.URLClassLoader@1b17a8bd)
DEBUG: Scanning for classes at 'mysql/global' (Implementing: 'com.googlecode.flyway.core.api.migration.jdbc.JdbcMigration')
DEBUG: Unable to determine URL for classpath location: mysql/global (ClassLoader: java.net.URLClassLoader@1b17a8bd)
DEBUG: Scanning for classes at 'mysql/global' (Implementing: 'com.googlecode.flyway.core.api.migration.spring.SpringJdbcMigration')
DEBUG: Unable to determine URL for classpath location: mysql/global (ClassLoader: java.net.URLClassLoader@1b17a8bd)
DEBUG: Scanning for classes at 'mysql/global' (Implementing: 'com.googlecode.flyway.core.migration.java.JavaMigration')
DEBUG: Unable to determine URL for classpath location: mysql/global (ClassLoader: java.net.URLClassLoader@1b17a8bd)
+-------------+------------------------+---------------------+---------+
| Version     | Description            | Installed on        | State   |
+-------------+------------------------+---------------------+---------+
| 3.5.1.3.0   | << Flyway Init >>      | 2012-11-28 17:52:24 | Future  |
+-------------+------------------------+---------------------+---------+ 
```

我不确定了解“未来”状态，我认为 flyway 找不到任何 SQL 文件，但我不明白为什么......知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:21:40.057

将您的迁移从`mysql/global`to移动`sql/mysql/global`，您应该一切顺利。

我将考虑改进文档以使其更清晰。

# python - Django，覆盖多对多字段 ModelManager

> ID：13610633
> 
> 赞同：2
> 
> 时间：2012-11-28T17:10:28.660
> 
> 标签：python, django, model

我如何覆盖我考虑以下内容的多对多字段的模型管理器：

```
class TermsManager(models.Manager):
    def all(self):
        return super(TermsManager, self).all().filter(condition_here)

class Term(models.Model):
    objects = TermsManager()

    name = models.CharField(max_length=255)

class Object(models.Model):        
    title = models.CharField(max_length=255)
    terms = models.ManyToManyField(Term, blank=True)

class Channel(Object):
    class Meta:
        proxy = True 
```

我还有一个继承自 TermManager 的类，称为 ChannelTermManager。如何覆盖 Channel 模型的“terms”字段，以便 mychannel.terms 调用 ChannelTermManager 而不是 TermManager？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T22:25:29.730

首先，你不应该覆盖`all()`. 如果要更改默认查询集，请`get_query_set`像这样覆盖：

```
class TermsManager(models.Manager):
    def get_query_set(self):
        return super(TermsManager, self).get_query_set().filter(condition_here) 
```

这是因为`all()`当其他查询集函数被链接时经常被省略，并且您希望您的查询集无论是否`all()`显式调用都表现相同。

但即便如此，你所做的仍然是有问题的。正如[管理器文档中](https://docs.djangoproject.com/en/dev/topics/db/managers/#controlling-automatic-manager-types)所解释的，过滤默认的相关查询集将影响幕后的各种自动事物（例如在转储数据以创建备份/固定装置时等）。 *你几乎绝对不想要这个*。而且您真的不希望您的相关对象管理器这样做（通过设置`use_for_related_fields = True`），因为您将掩盖实际存储在数据库中的内容，而不是简单地检测过时的数据并创建警报或进行任何清理。 `use_for_related_fields`旨在创建增强普通管理器正常功能的管理器，而不是过滤。

但是我遇到了和你类似的情况，我是这样处理的：

```
class FilteredTermsManager(models.Manager):
    def get_query_set(self):
        return super(TermsManager, self).get_query_set().filter(condition_here)

class Term(models.Model):
    allTerms = models.Manger() # Establish this as the default/automatic manager
    objects = FilteredTermsManager()

    name = models.CharField(max_length=255) 
```

这样，我可以通过过滤后的查询集对模型进行所有初始查询，它看起来像“常规 Django”，但所有关系查询和幕后查询都可以在未过滤的数据库上工作。而且我总是可以通过手动访问真正的完整对象集`Term.allTerms.all()`。

至于为不同的相关对象使用不同的管理器，你真的无能为力。但是，为什么不直接将特定对象添加到您的自定义管理器中，而不是从操作 get querysets from`Channel`的方法中调用它们呢？`Term``Object`

# node.js - npm install 现在失败了 OSX 10.8

> ID：13610634
> 
> 赞同：0
> 
> 时间：2012-11-28T17:10:32.827
> 
> 标签：node.js, osx-mountain-lion, npm

正如标题所述，我无法在我的 OSX ML 10.8 上使用 npm 安装“nowjs”。在让任何人大喊大叫之前:) 我已经安装了 xCode 和命令行实用程序。

这些是来自 npm-log 的带有错误消息的行。

```
334 verbose true,/Volumes/Macintosh HD2/Library/Node/TestExpress/node_modules,/Volumes/Macintosh HD2/Library/Node/TestExpress/node_modules unbuild now@0.8.1
335 info postuninstall now@0.8.1
336 error node-proxy@0.6.0 install: `node-gyp configure build`
336 error `sh "-c" "node-gyp configure build"` failed with 1
337 error Failed at the node-proxy@0.6.0 install script.
337 error This is most likely a problem with the node-proxy package,
337 error not with npm itself.
337 error Tell the author that this fails on your system:
337 error     node-gyp configure build
337 error You can get their info via:
337 error     npm owner ls node-proxy
337 error There is likely additional logging output above.
338 error System Darwin 12.2.0
339 error command "node" "/usr/local/bin/npm" "install" "now"
340 error cwd /Volumes/Macintosh HD2/Library/Node/TestExpress
341 error node -v v0.8.14
342 error npm -v 1.1.65
343 error code ELIFECYCLE
344 verbose exit [ 1, true ] 
```

任何人都可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:35:20.057

有时需要使用 sudo 安装 node-proxy（因此在本例中为 nowjs）。

# javascript - 使用 JavaScript 循环音频

> ID：13610638
> 
> 赞同：4
> 
> 时间：2012-11-28T17:10:41.250
> 
> 标签：javascript, audio

我有下一个代码

```
var audioElement0 = document.createElement('audio');
audioElement0.setAttribute('src', 'notify.wav');
audioElement0.setAttribute('autoplay', 'autoplay');
audioElement0.Play(); 

var audioElement1 = document.createElement('audio');
audioElement1.setAttribute('src', 'notify.wav');
audioElement1.setAttribute('autoplay', 'autoplay');
audioElement1.Play(); 

var audioElement2 = document.createElement('audio');
audioElement2.setAttribute('src', 'notify.wav');
audioElement2.setAttribute('autoplay', 'autoplay');
audioElement2.Play(); 
```

但它只播放一次......我该如何解决？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-28T17:13:38.490

你有循环属性：

`audioElement.loop=true;`

但是有些浏览器不支持循环属性，你可以像这样添加一个事件监听器：

```
audioElement.addEventListener('ended', function() {
    this.currentTime = 0;
    this.play();
}, false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T17:12:22.213

该`audio`元素有一个`loop`布尔属性，您可以将其设置为自动循环播放。另一种选择是添加响应音频元素的“结束”事件的事件侦听器。在您的处理程序中，将音频的位置设置回 0，然后重新播放。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T17:12:48.583

在音频标签中设置`loop="loop"`属性。

# linux - tr 命令 - 如何用实际的换行符 (\n) 替换字符串“\n”

> ID：13610639
> 
> 赞同：55
> 
> 时间：2012-11-28T17:10:40.213
> 
> 标签：linux, gnu, tr

我想使用该`tr`命令将所有出现的字符串“\n”替换为新行 (\n)。

我试过`tr '\\n' '\n'`了，但这似乎与任何 '\' 和任何 'n' 匹配

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-11-28T17:56:14.563

以下是如何做到这一点`sed`：

```
sed 's/\\n/\n/g' 
```

示例用法：

`\n`要就地替换文件中所有出现的：

```
sed -i 's/\\n/\n/g' input_filename 
```

`\n`通过管道替换所有出现的，并保存到另一个文件中

```
cat file1 file2 file3 file4 | sed 's/\\n/\n/g' > output_file 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-10-02T23:02:32.277

Perl 解决方案类似于*sampson-chen*的 sed 解决方案：

```
perl -pe 's/\\n/\n/g' 
```

**例子：**

带有文字 \n 的输入文件（不是换行符）：

```
$ cat test1.txt          
foo\nbar\n\nbaz 
```

用实际的换行符替换所有出现的文字`\n`，打印到`STDOUT`：

```
$ perl -pe 's/\\n/\n/g' test1.txt
foo
bar

baz 
```

同样，就地更改输入文件，将备份保存到`test1.txt.bak`：

```
$ perl -i.bak -pe 's/\\n/\n/g' test1.txt 
```

Perl 单行器使用这些命令行标志：
`-e`：告诉 Perl 查找内联代码，而不是在文件中。
`-p`：一次循环输入一行，`$_`默认情况下将其分配给。`print $_`在每次循环迭代后添加。
`-i.bak`：就地编辑输入文件（覆盖输入文件）。在覆盖之前，通过在其名称后附加扩展名来保存原始文件的备份副本`.bak`。

**还请参见**
[`perldoc perlrun`：：如何执行 Perl 解释器：命令行开关](https://perldoc.perl.org/perlrun.html#Command-Switches)
[`perldoc perlre`：Perl 正则表达式（正则表达式）](https://perldoc.perl.org/perlre.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-22T07:17:02.217

我有一个类似的问题，我想在 Mac BigSur 上用新行替换 '\n'

输入：

```
-----BEGIN CERTIFICATE-----\\nMIGcz......\naLRn\\nyxiJdo=\\n-----END CERTIFICATE----- 
```

预期输出：

```
-----BEGIN CERTIFICATE-----
MIGcz......
aLRn
yxiJdo=
-----END CERTIFICATE----- 
```

Sed，perl 都不适合我。但是一个简单的“tr”命令很有用。

```
echo -----BEGIN CERTIFICATE-----\\nMIGcz......\\naLRn\\nyxiJdo=\\n-----END CERTIFICATE----- | tr '\' '\n' 
```

# unix - 使用 grep 进行多种搜索模式

> ID：13610642
> 
> 赞同：18
> 
> 时间：2012-11-28T17:10:51.463
> 
> 标签：unix, grep

考虑我有以下数据流：

```
BODY1
attrib1:  someval11
attrib2:  someval12
attrib3:  someval13

BODY2
attrib1:  someval21
attrib2:  someval22
attrib3:  someval23

BODY3
attrib1:  someval31
attrib2:  someval32
attrib3:  someval33 
```

我只想为每个 BODY 提取**attrib1 和 attrib3**，即

```
attrib1:  someval11
attrib3:  someval13
attrib1:  someval21
attrib3:  someval23
attrib1:  someval31
attrib3:  someval33 
```

我试过了

`grep 'attrib1\|attrib3'`，根据[这个网站](http://www.cyberciti.biz/faq/searching-multiple-words-string-using-grep/)，但没有返回任何内容。 `grep attrib1`并`grep attrib2`返回数据，但仅针对指定的单个模式。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-28T17:14:30.580

`grep -e 'attrib1' -e 'attrib3' file`

从`man`页面：

> -e PATTERN, --regexp=PATTERN
> 使用 PATTERN 作为模式。这可用于指定多个搜索模式，或保护以连字符 (-) 开头的模式。（-e 由 POSIX 指定。）

**编辑：** *或者*，您可以将模式保存在文件中并使用以下`-f`选项：

```
aman@aman-VPCEB14EN:~$ cat>patt
attrib1
attrib3

aman@aman-VPCEB14EN:~$ grep -f patt test
attrib1:  someval11
attrib3:  someval13
attrib1:  someval21
attrib3:  someval23
attrib1:  someval31
attrib3:  someval33 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-04-28T09:07:33.857

非常简单的命令：

```
 bash> grep  "attrib1\|attrib3" <file.name>
attrib1:  someval11
attrib3:  someval13
attrib1:  someval21
attrib3:  someval23
attrib1:  someval31
attrib3:  someval33 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-10-16T05:34:09.677

还有 egrep；

```
egrep "pattern1|pattern2|pattern3" file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-16T05:18:53.280

这取决于您进入的外壳。`grep -iw 'patter1\|patter2\|pattern3'`适用于 bash shell，因为它不适用于 korn shell。对于 korn shell，我们可能不得不尝试`grep -e pattern1 -e patter2`等等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T17:14:49.327

这适用于 GNU grep 2.6.3

```
grep "attrib[13]" 
```

或者

```
 grep "^[^0-9]*[13]:" 
```

# linux - Bash：字符串操作在空白处终止

> ID：13610644
> 
> 赞同：1
> 
> 时间：2012-11-28T17:10:53.637
> 
> 标签：linux, bash, unix

我有一个字符串变量`$LIBRARIES="abc.so.1 def.so.1 hij.so.3.1"`，我想替换所有 .so ，使它们看起来像这样：

```
"abc.so* def.so* hij.so*" 
```

我怎样才能做到这一点？我试过`NEW_LIBRARIES=${LIBRARIES//.so*/.so$star}`了，但它不起作用。我怎么能告诉它以空格结束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:02:00.870

或更简单

```
${LIBRARIES//.[0-9]/*} 
```

带有 2 个扩展名的将获得 2 ** 但这应该没问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:19:05.080

这应该这样做：

```
LIBRARIES="abc.so.1 def.so.1 hij.so.3.1"
NEW_ALL_LIBRARIES=$(sed 's/\.so[^ ]*/\.so\*/g' <<< "$LIBRARIES")
echo "$NEW_ALL_LIBRARIES" 
```

**输出：**

```
abc.so* def.so* hij.so* 
```

**解释：**

*   `LIBRARIES="..."`：将字符串分配给变量时，该变量没有前缀`$`
*   `NEW_ALL_LIBRARIES=$(...)`：该`$(...)`符号称为[命令替换](http://tldp.org/LDP/abs/html/commandsub.html)；基本上它会生成一个新的子shell 来运行其中包含的任何命令，然后将输出返回到这个新的子shell `stdout`（并在此处将其保存到`NEW_ALL_LIBRARIES`）。
*   `sed`: 调用[sed](http://www.grymoire.com/Unix/Sed.html)，流式编辑器工具
*   `'s/\.so[^ ]*/\.so\*/g'`：使用[正则表达式（regex）](http://en.wikipedia.org/wiki/Regular_expression)来匹配模式和替换。让我们进一步分解这个语法：
    *   `s/`“代替”; 例如：`s/A/B/g`替换所有出现的`A`with`B`
    *   `\.so[^ ]*/`：匹配任何以 开头的模式，`.so`该`[^ ]*`部分表示“后跟零个或多个非空格字符”
    *   `\.so\*/`: 用字面替换`.so*`
    *   一些符号，如`[`, `]`,`.`和`*`在正则表达式中具有特殊含义，因此如果您要按字面意思使用它们，您只需通过前缀 a 来“转义”它们`\`
    *   `g`: 对所有事件都这样做，而不仅仅是第一次。
*   `<<< "$LIBRARIES"`:`<<<`表示法称为[herestring](http://tldp.org/LDP/abs/html/here-docs.html) : 在这种情况下，它完成与 相同的事情`echo "$LIBRARIES" | sed ...`，但它保存了一个子shell。

# wix - WiX：在安装过程中重命名文件夹

> ID：13610646
> 
> 赞同：0
> 
> 时间：2012-11-28T17:11:03.980
> 
> 标签：wix, windows-installer

我要安装非常复杂的文件夹结构（数十个文件夹/子文件夹）。
我已经用 heat.exe 准备了整个结构，但是有些文件夹名称有“模板”名称而不是真实名称。
是否可以在安装过程中使用 WiX 重命名“模板化”文件夹？
说我有

> ```
> DirA
>   DirTemplate1
>     DirC
>   DirD
>     DirTemplate2
>   DirE 
> ```

我只能通过 UI 获得 DirTemplate1 和 DirTemplate2 的真实姓名。
将文件夹复制到目标后，我可以重命名它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:12:36.213

我意识到这根本不可能以正确的方式进行，它与安装思想相矛盾。
我会接受这样的答案并开始考虑不同的解决方案。并非所有问题都有解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T09:24:48.407

我想你熟悉 WiX。并解释一些变体是如何做到的。

1.  在目录表中，您使用大写字母命名所需的文件夹，例如 DIRTEMPLATE1。然后创建对话窗口并使用新值设置此目录。在安装过程中，将使用新的文件夹名称创建目录。
2.  （不推荐）创建将在安装结束时重命名所需目录的自定义操作。不推荐，因为卸载不会删除新文件夹，修复将无法正常工作。

# maven-3 - 用 maven war 文件生成错过了一些 jars

> ID：13610647
> 
> 赞同：0
> 
> 时间：2012-11-28T17:11:08.917
> 
> 标签：maven-3

我用 maven 生成 .war 文件，最后遗漏了一个 jar。结果我的应用程序甚至没有启动。当我在 tomcat 下将丢失的 jar 添加到未打包的战争中时，一切都开始正常工作。

这是一个 pom.xml，其中包含我需要的依赖项：

```
<dependencies>
 <dependency>
  <groupId>com.vaadin</groupId>
  <artifactId>vaadin-server</artifactId>
  <version>${vaadin.version}</version>
  <scope>runtime</scope>
 </dependency>
 <dependency>
  <groupId>com.vaadin</groupId>
  <artifactId>vaadin-client</artifactId>
  <version>${vaadin.version}</version>
 </dependency>
 <dependency>
  <groupId>com.allen-sauer.gwt.log</groupId>
  <artifactId>gwt-log</artifactId>
  <version>${google.gwt-log.version}</version>
  <exclusions>
   <exclusion>
    <groupId>com.google.gwt</groupId>
    <artifactId>gwt-user</artifactId>
   </exclusion>
   <exclusion>
    <groupId>com.google.gwt</groupId>
    <artifactId>gwt-dev</artifactId>
   </exclusion>
  </exclusions>
 </dependency>
 <dependency>
  <groupId>net.sf.gwt-widget</groupId>
  <artifactId>gwt-sl</artifactId>
  <version>${google.gwt-sl.version}</version>
  <exclusions>
   <exclusion>
    <groupId>org.springframework</groupId>
    <artifactId>spring-jdbc</artifactId>
   </exclusion>
   <exclusion>
    <groupId>org.springframework</groupId>
    <artifactId>spring-webmvc</artifactId>
   </exclusion>
   <exclusion>
    <groupId>cglib</groupId>
    <artifactId>cglib-nodep</artifactId>
   </exclusion>
   <exclusion>
    <groupId>com.google.gwt</groupId>
    <artifactId>gwt-servlet</artifactId>
   </exclusion>
  </exclusions>
 </dependency>
<dependencies> 
```

似乎一切都是正确的，但最后 vaadin-server.jar 存在并且 vaadin-client.jar 不存在。这里有什么问题？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:30:34.653

您是否尝试为 vaadin-client 添加运行时范围？

像这样：

```
<dependency>
  <groupId>com.vaadin</groupId>
  <artifactId>vaadin-client</artifactId>
  <version>${vaadin.version}</version>
  <scope>runtime</scope>
</dependency> 
```

# php - 在 PHP 中一次获取多个 mysql 行

> ID：13610651
> 
> 赞同：0
> 
> 时间：2012-11-28T17:11:21.237
> 
> 标签：php, mysql

如何从 PHP 中的 MySQL 表中一次获取多行？

假设我的查询总共返回 5 行，并且我指定块大小为 2，则该函数必须连续返回具有 2+2+1 行的对象/数组。

PS 我知道我可以手动迭代所有结果并自己执行相同的实现，但我正在寻找一些内置函数，它可以干净且以优化的方式执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:15:49.767

如果您还没有使用它，请考虑使用[PDO对象。](http://www.php.net/manual/en/book.pdo.php)这样，您就可以使用[fetchAll](http://php.net/manual/en/pdostatement.fetchall.php)函数。

```
<?php
$sth = $dbh->prepare("SELECT name, colour FROM fruit");
$sth->execute();

/* Fetch all of the remaining rows in the result set */
print("Fetch all of the remaining rows in the result set:\n");
$result = $sth->fetchAll();
print_r($result);
?> 
```

获取结果集中所有剩余的行：

```
Array
(
    [0] => Array
        (
            [NAME] => pear
            [0] => pear
            [COLOUR] => green
            [1] => green
        )

    [1] => Array
        (
            [NAME] => watermelon
            [0] => watermelon
            [COLOUR] => pink
            [1] => pink
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:12:23.107

您要查找的功能不存在。自己写吧。

# python - 如何使内置容器（集合、字典、列表）线程安全？

> ID：13610654
> 
> 赞同：18
> 
> 时间：2012-11-28T17:11:27.583
> 
> 标签：python, multithreading, thread-safety

我[从这个问题](https://stackoverflow.com/questions/2227169/are-python-built-in-containers-thread-safe)中了解到，如果我想要一个`set`线程安全的，我必须自己实现线程安全部分。

因此我可以想出：

```
from threading import Lock

class LockedSet(set):
    """A set where add() and remove() are thread-safe"""

    def __init__(self, *args, **kwargs):
        # Create a lock
        self._lock = Lock()
        # Call the original __init__
        super(LockedSet, self).__init__(*args, **kwargs)

    def add(self, elem):
        self._lock.acquire()
        try:
            super(LockedSet, self).add(elem)
        finally:
            self._lock.release()

    def remove(self, elem):
        self._lock.acquire()
        try:
            super(LockedSet, self).remove(elem)
        finally:
            self._lock.release() 
```

所以，当然只有 add() 和 remove() 在这个实现中是线程安全的。其他方法不是因为它们没有在子类中被覆盖。

现在，模式很简单：获取锁，调用原始方法，释​​放锁。如果我遵循上述逻辑，我将不得不以`set`基本相同的方式覆盖所有公开的方法，例如：

（伪代码）

```
def <method>(<args>):
    1\. acquire lock
    2\. try:
    3\.     call original method passing <args>
    4\. finally:
    5\.     release lock 
```

（/伪代码）

这不仅繁琐，而且容易出错。那么，关于如何以更好的方式解决这个问题的任何想法/建议？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-11-29T03:26:48.883

您可以使用 Python 的元编程工具来完成此操作。（注意：写得很快，没有经过彻底的测试。）我更喜欢使用类装饰器。

我还认为您*可能*需要锁定更多内容`add`并`remove`设置线程安全，但我不确定。我会忽略这个问题，只专注于你的问题。

还要考虑委托（代理）是否比子类化更合适。包装对象是 Python 中的常用方法。

最后，没有元编程的“魔杖”可以神奇地为任何可变 Python 集合添加细粒度锁定。最安全的做法是使用 锁定*任何*方法或属性访问`RLock`，但这是非常粗粒度和缓慢的，并且可能仍然不能保证您的对象在所有情况下都是线程安全的。（例如，您可能有一个集合，该集合操作其他线程可访问的另一个非线程安全对象。）您确实需要检查每个数据结构并考虑哪些操作是原子操作或需要锁以及哪些方法可能调用其他方法使用相同的锁（即死锁本身）。

也就是说，这里有一些技术可供您使用，以增加抽象顺序：

## 代表团

```
class LockProxy(object):
    def __init__(self, obj):
        self.__obj = obj
        self.__lock = RLock()
        # RLock because object methods may call own methods
    def __getattr__(self, name):
        def wrapped(*a, **k):
            with self.__lock:
                getattr(self.__obj, name)(*a, **k)
        return wrapped

lockedset = LockProxy(set([1,2,3])) 
```

## 上下文管理器

```
class LockedSet(set):
    """A set where add(), remove(), and 'in' operator are thread-safe"""

    def __init__(self, *args, **kwargs):
        self._lock = Lock()
        super(LockedSet, self).__init__(*args, **kwargs)

    def add(self, elem):
        with self._lock:
            super(LockedSet, self).add(elem)

    def remove(self, elem):
        with self._lock:
            super(LockedSet, self).remove(elem)

    def __contains__(self, elem):
        with self._lock:
            super(LockedSet, self).__contains__(elem) 
```

## 装饰者

```
def locked_method(method):
    """Method decorator. Requires a lock object at self._lock"""
    def newmethod(self, *args, **kwargs):
        with self._lock:
            return method(self, *args, **kwargs)
    return newmethod

class DecoratorLockedSet(set):
    def __init__(self, *args, **kwargs):
        self._lock = Lock()
        super(DecoratorLockedSet, self).__init__(*args, **kwargs)

    @locked_method
    def add(self, *args, **kwargs):
        return super(DecoratorLockedSet, self).add(elem)

    @locked_method
    def remove(self, *args, **kwargs):
        return super(DecoratorLockedSet, self).remove(elem) 
```

## 类装饰器

我认为这是抽象方法中最简洁、最容易理解的方法，因此我对其进行了扩展，以允许指定锁定方法和锁定对象工厂。

```
def lock_class(methodnames, lockfactory):
    return lambda cls: make_threadsafe(cls, methodnames, lockfactory)

def lock_method(method):
    if getattr(method, '__is_locked', False):
        raise TypeError("Method %r is already locked!" % method)
    def locked_method(self, *arg, **kwarg):
        with self._lock:
            return method(self, *arg, **kwarg)
    locked_method.__name__ = '%s(%s)' % ('lock_method', method.__name__)
    locked_method.__is_locked = True
    return locked_method

def make_threadsafe(cls, methodnames, lockfactory):
    init = cls.__init__
    def newinit(self, *arg, **kwarg):
        init(self, *arg, **kwarg)
        self._lock = lockfactory()
    cls.__init__ = newinit

    for methodname in methodnames:
        oldmethod = getattr(cls, methodname)
        newmethod = lock_method(oldmethod)
        setattr(cls, methodname, newmethod)

    return cls

@lock_class(['add','remove'], Lock)
class ClassDecoratorLockedSet(set):
    @lock_method # if you double-lock a method, a TypeError is raised
    def frobnify(self):
        pass 
```

## 覆盖属性访问`__getattribute__`

```
class AttrLockedSet(set):
    def __init__(self, *args, **kwargs):
        self._lock = Lock()
        super(AttrLockedSet, self).__init__(*args, **kwargs)

    def __getattribute__(self, name):
        if name in ['add','remove']:
            # note: makes a new callable object "lockedmethod" on every call
            # best to add a layer of memoization
            lock = self._lock
            def lockedmethod(*args, **kwargs):
                with lock:
                    return super(AttrLockedSet, self).__getattribute__(name)(*args, **kwargs)
            return lockedmethod
        else:
            return super(AttrLockedSet, self).__getattribute__(name) 
```

## 动态添加的包装器方法`__new__`

```
class NewLockedSet(set):
    def __new__(cls, *args, **kwargs):
        # modify the class by adding new unbound methods
        # you could also attach a single __getattribute__ like above
        for membername in ['add', 'remove']:
            def scoper(membername=membername):
                # You can also return the function or use a class
                def lockedmethod(self, *args, **kwargs):
                    with self._lock:
                        m = getattr(super(NewLockedSet, self), membername)
                        return m(*args, **kwargs)
                lockedmethod.__name__ = membername
                setattr(cls, membername, lockedmethod)
        self = super(NewLockedSet, cls).__new__(cls, *args, **kwargs)
        self._lock = Lock()
        return self 
```

## 动态添加的包装器方法`__metaclass__`

```
def _lockname(classname):
    return '_%s__%s' % (classname, 'lock')

class LockedClass(type):
    def __new__(mcls, name, bases, dict_):
        # we'll bind these after we add the methods
        cls = None
        def lockmethodfactory(methodname, lockattr):
            def lockedmethod(self, *args, **kwargs):
                with getattr(self, lockattr):
                    m = getattr(super(cls, self), methodname)
                    return m(*args,**kwargs)
            lockedmethod.__name__ = methodname
            return lockedmethod
        lockattr = _lockname(name)
        for methodname in ['add','remove']:
            dict_[methodname] = lockmethodfactory(methodname, lockattr)
        cls = type.__new__(mcls, name, bases, dict_)
        return cls

    def __call__(self, *args, **kwargs):
        #self is a class--i.e. an "instance" of the LockedClass type
        instance = super(LockedClass, self).__call__(*args, **kwargs)
        setattr(instance, _lockname(self.__name__), Lock())
        return instance

class MetaLockedSet(set):
    __metaclass__ = LockedClass 
```

## 动态创建的元类

```
def LockedClassMetaFactory(wrapmethods):
    class LockedClass(type):
        def __new__(mcls, name, bases, dict_):
            # we'll bind these after we add the methods
            cls = None
            def lockmethodfactory(methodname, lockattr):
                def lockedmethod(self, *args, **kwargs):
                    with getattr(self, lockattr):
                        m = getattr(super(cls, self), methodname)
                        return m(*args,**kwargs)
                lockedmethod.__name__ = methodname
                return lockedmethod
            lockattr = _lockname(name)
            for methodname in wrapmethods:
                dict_[methodname] = lockmethodfactory(methodname, lockattr)
            cls = type.__new__(mcls, name, bases, dict_)
            return cls

        def __call__(self, *args, **kwargs):
            #self is a class--i.e. an "instance" of the LockedClass type
            instance = super(LockedClass, self).__call__(*args, **kwargs)
            setattr(instance, _lockname(self.__name__), Lock())
            return instance
    return LockedClass

class MetaFactoryLockedSet(set):
    __metaclass__ = LockedClassMetaFactory(['add','remove']) 
```

我敢打赌，现在使用一个简单的、明确的`try...finally`看起来不会那么糟糕，对吧？

读者练习：让调用者`Lock()`使用这些方法中的任何一种传入他们自己的对象（依赖注入）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T17:45:57.863

【确实，看评论，不是真的】

如果您正在运行 CPython，您可以从设置的源代码中看到它没有发布 GIL (http://hg.python.org/cpython/file/db20367b20de/Objects/setobject.c) 所以它的所有操作都应该是原子。

如果这就是您所需要的，并且您确定在 CPython 上运行您的代码，您可以直接使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T22:05:51.670

This is my first attempt to play with decorators (although my code doesn't actually use the @decorate syntax), and I don't have much experience with multi-threading/multiprocessing. With that disclaimer, though, here's an attempt I made:

```
from multiprocessing import Lock

def decorate_all(obj):
    lock = Lock()
    #you'll want to make this more robust:
    fnc_names = [fnctn for fnctn in dir(obj) if '__' not in fnctn]
    for name in fnc_names:
        print 'decorating ' + name
        fnc = getattr(obj, name)
        setattr(obj, name, decorate(fnc, lock))
    return obj

def decorate(fnctn, lock):
    def decorated(*args):
        print 'acquiring lock'
        lock.acquire()
        try:
            print 'calling decorated function'
            return fnctn(*args)
        finally:
            print 'releasing lock'
            lock.release()
    return decorated

def thread_safe(superclass):
    lock = Lock()
    class Thread_Safe(superclass):
        def __init__(self, *args, **kwargs):
            super(Thread_Safe, self).__init__(*args, **kwargs)
    return decorate_all(Thread_Safe)

>>> thread_safe_set = thread_safe(set)
decorating add
decorating clear
decorating copy
decorating difference
decorating difference_update
decorating discard
decorating intersection
decorating intersection_update
decorating isdisjoint
decorating issubset
decorating issuperset
decorating pop
decorating remove
decorating symmetric_difference
decorating symmetric_difference_update
decorating union
decorating update
>>> s = thread_safe_set()
>>> s.add(1)
acquiring lock
calling decorated function
releasing lock
>>> s.add(4)
acquiring lock
calling decorated function
releasing lock
>>> s.pop()
acquiring lock
calling decorated function
releasing lock
1
>>> s.pop()
acquiring lock
calling decorated function
releasing lock
4
>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T17:33:45.203

您可以实现自己的上下文管理器：

```
class LockableSet:
    def __enter__(self):
        self.lock()
        return self

    def __exit__(self, exc_type, exc_value, traceback):
        #Do what you want with the error
        self.unlock()

with LockableSet() as s:
    s.whatever()
    raise Exception() 
```

无论如何，最后`__exit__`都会调用对象的方法。更多详细信息可[在此处](http://docs.python.org/2/reference/compound_stmts.html#the-with-statement)获得（python 官方文档）。

另一个用途可能是`lock`方法的装饰器，如下所示：

```
def lock(func):
    def safe_func(self, *args, **kwargs):
        with self:
            func(self, *args, **kwargs)
    return safe_func 
```

# python - 在 Python 中，为什么裸函数对象是有效代码？

> ID：13610657
> 
> 赞同：3
> 
> 时间：2012-11-28T17:11:33.823
> 
> 标签：python

为什么以下有效？

```
#!/usr/bin/python
def spam():
   pass

spam 
```

我知道函数是对象，但我认为像上面这样的代码从来没有用过，而且总是错误的结果。为什么它不会导致引用垃圾邮件函数对象的行出现错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T17:18:17.720

每个表达式都是有效的语句。使用局部变量（不管它指的是什么）是一个有效的表达式。由于后期绑定和动态性，您无法在编译时检测它是否引用了函数或其他内容（尽管在这种情况下您不需要知道这一点，因为仅引用本地永远不会做任何事情）。运行时检查将非常昂贵，而且没有任何收益。

剩下的就是禁止语句的形式`<local variable>;`。明确禁止这种情况是不一致的，需要额外的工作，并且对恕我直言没有太大帮助。我看不出它无法完成的技术原因，所以它可能归结为 BDFL 不想要一个特殊情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T17:24:06.080

首先，`spam`当然`spam()`是根本不同的说法。如果您查看 和 之间的区别，这一点就会变得很`a = spam`清楚`a = spam()`。第一个将函数存储在 variable`a`中，第二个存储在那个时刻发生的一次函数调用的返回值。两者都很有用，但操作不同。

只是提到像 in 这样的功能`spam`并没有做有用的事情，不。但是在 python 中，仅仅声明值是不被禁止的。根据您的论证，单个语句`4`也应该是非法的，任何文字值也是如此。这实际上会禁止在任何地方使用 pydoc 字符串，因为它们只是提到了其他无用的值（从执行的角度来看）。

所以我认为可以禁止使用这样的裸值，但事实并非如此，现在它甚至有使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T17:32:04.867

在一般情况下，引用裸表达式可能会产生副作用。编码：

```
class Nugget(object):
    @property
    def spam(self):
        print "does merely referencing a property invoke it?"

n = Nugget()
n.spam           # no explicit invocation 
```

实际上打印消息。在您的示例案例中给您一个错误会破坏这种案例的一般性。

# python - 从每行具有多个数字的文本文件中输入数据 - Python

> ID：13610660
> 
> 赞同：0
> 
> 时间：2012-11-28T17:11:42.683
> 
> 标签：python, input

假设我有一个数据文件，里面有这个：

```
23 33 45
91 81 414
28 0 4 
7 9 14
8 9 17
1 1 3
38 19 84 
```

我怎样才能将它导入一个列表，以便每个单独的数字它自己的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:18:19.123

您可以使用 numpy loadtxt 将数据文件读取到 numpy 数组

```
 from numpy import loadtxt
  a,b,c = loadtxt("filename", usecols=(0,1,2), unpack=True) 
```

输出

```
 a = array([23, 91, 28, 7, 8, 1, 38]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:35:24.323

您也可以使用 python 内置函数，如打开文件、拆分和读取行

```
with open('file.txt') as f:
for line in f:
  a, b, c = map(int, line.split()) 
```

另一种方法是

```
 file                = open(filename)
 file_data           = file.readlines() 
```

但是，输出将是一个字符串列表。也就是说，列表中的每个元素将代表文件中的一行。如果您使用上面的代码，输出将如下所示

```
 file_data = ['23 33 45', '91 81 414', '28 0 4 ', '7 9 14', '8 9 17', '1 1 3', '38 19 84'] 
```

您可能希望它们转换为 float 或 int。你可以再次使用 numpy 的 fromstring 模块来做到这一点

```
 from numpy import fromstring
  data = [fromstring(i, dtype=float, sep=' ') for i in file_data ] 
```

请注意，我在上面的代码中使用了列表推导（这比传统的 python for 循环要快。）

# django - 按用户限制 django 表单 ForeignKey 下拉列表

> ID：13610668
> 
> 赞同：0
> 
> 时间：2012-11-28T17:12:19.157
> 
> 标签：django, django-forms

我有两个模型，组和列表项。列表项属于组内：

```
class List_Item(models.Model):
    name = models.CharField("List Item Name", max_length=200, unique = True)
    group = models.ForeignKey(Group, verbose_name="Group")

    creation_date = models.DateTimeField("Creation Date", default=datetime.now)
    notes = models.TextField("Notes", blank=True)

    user = models.ForeignKey(User, editable=False)

    def __unicode__(self):
        return self.name

class Group(models.Model):
    name = models.CharField("Group Name", max_length=200, unique = True)
    notes = models.TextField("Notes", blank=True)

    user = models.ForeignKey(User, editable=False)

    def __unicode__(self):
        return self.name 
```

在我的 List Items 表单中，ModelForm 有一个 Groups 下拉菜单。目前，它列出了所有组，无论组属于哪个用户。但我只想显示属于登录用户的组。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:21:54.850

您必须覆盖**init**方法中的表单字段。您可以将登录用户从视图传递到表单并根据它进行过滤

```
#form
class ListItemform(forms.ModelForm):
    def __init__(self. *args, **kwrgs):
            self.user = kwargs.pop('user', None)
            super(ListItemform, self).__init__(*args, **kwargs)
            self.fields['group'].queryset = Group.objects.filter(user = self.user)
#view
def displayform(request):
    user = request.user
    form = ListItemForm(user = user)
    return ... 
```

# javascript - 抛出错误消息无法在 OOP Javascript 三元运算符上编译

> ID：13610669
> 
> 赞同：0
> 
> 时间：2012-11-28T17:12:18.957
> 
> 标签：javascript, oop, conditional-operator, throw

为什么会这样编译：

```
this.setAlunos = function(alunos){
    if(this.getTurma() > 0){
        this.alunos = alunos.split(",");
    }
    else{
        throw "you must set a 'turma' before inserting students on it";
    }
}; 
```

这不是吗？

```
this.setAlunos = function(alunos){
    this.getTurma() > 0 ? this.alunos = alunos.split(",") : throw "you must set a 'turma' before inserting students on it";
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:17:22.643

你实际上不能直接在三元运算符中抛出错误，就像你试图在那里做的那样。但是，您可以将 包装`throw`在匿名函数中，如下所示：

```
this.setAlunos = function(alunos){
    this.getTurma() > 0 ? this.alunos = alunos.split(",") : (function(){throw "you must set a 'turma' before inserting students on it"}());
}; 
```

然后它将正常工作。但是，仅仅因为您*可以*做某事并不意味着您*应该*做某事。我建议您保留以前的代码，因为它更具可读性。

# c - 为什么我的程序不适用于不同的 Linux 发行版？

> ID：13610671
> 
> 赞同：4
> 
> 时间：2012-11-28T17:12:20.590
> 
> 标签：c, segmentation-fault, pcap, sniffer

我正在研究数据包嗅探器。最大的问题是我的代码只能在 Backtrack 5 R3 下完美运行，但在其他发行版下却无法运行！事实上，在 Ubuntu 12.10 和 ArchLinux 上，当嗅探器获取第一个数据包时，我遇到了分段错误（我得到“分段错误核心转储”）。起初，我认为是库或编译器的问题，但经过一些测试，我认为我可以排除它们！这是这种情况：

*   Backtrack 5 R3 使用 gcc 4.4.3 和 libpcap 1.0.0
*   Ubuntu 12.10 使用 Gcc 4.7.2 和 Libpcap 1.3.0
*   ArchLinux 和 Ubuntu 一样

所以我试图在 Arch 上降级到 gcc 4.4.3 e libpcap 1.0.0，但我得到了同样的错误。在编译代码时我有一些警告，但没有什么真正重要的，但是它在回溯下完美运行！这就是最大的谜团。

这是导致问题的代码：

```
void packet_dump(unsigned char *arguments, const struct pcap_pkthdr *pcap_data, const unsigned char *packet) {
    int packet_data_len, tcp_header_size=0, total_header_size;
    unsigned char *packet_data;
    const unsigned char *ip_src_dest;
    const struct header_ip *ip_header; 

    //Calculate the value of variables
    ip_src_dest = (packet+LUNGHEZZA_INTESTAZIONE_ETH); 
    ip_header = (const struct header_ip *)ip_src_dest; 
    total_header_size = LUNGHEZZA_INTESTAZIONE_ETH+sizeof(struct header_ip)+tcp_header_size;
    packet_data = (unsigned char *)packet + total_header_size;  
    packet_data_len = pcap_data->len - total_header_size;

    //THIS CAUSE THE PROBLEM (Solved removing inet_ntoa and converting it manually)
    printf("[ %s ] ============> ", inet_ntoa(ip_header->source_addr_ip));
    printf("[ %s ]  \n", inet_ntoa(ip_header->destination_addr_ip));

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T00:45:36.790

我怀疑您的程序正在崩溃，因为 ip_header->source_addr_ip 指向您不允许访问的内存。您应该能够使用[GDB](http://www.cs.toronto.edu/~krueger/csc209h/tut/gdb_tutorial.html)来确定是否是这种情况。

# javascript - 将javascript“字符串”连接到对象中

> ID：13610679
> 
> 赞同：0
> 
> 时间：2012-11-28T17:12:33.103
> 
> 标签：javascript, json

我正在编写一种方法，该方法应该将两个字符串（这是 json stringify 的结果）连接成一个字符串（它应该看起来像带有它的结构的 json 对象）。

第一 ：

```
{"text":"klk","makeId":"9"} 
```

第二个：

```
{"firstname":"jjk","lastname":"jkjk","email":"jjkjk@sdasd.com"} 
```

如何将这两个连接成一个 json 字符串，即：

```
{"text":"klk","makeId":"9", "firstname":"jjk","lastname":"jkjk","email":"jjkjk@sdasd.com"} 
```

我可以剥离`{"`然后`"}`用逗号分割并达到这个结果。我想知道有没有更好更聪明的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T17:14:11.343

这些字符串是 JSON！解析它们，像对象一样合并它们并再次将它们字符串化。

* * *

```
var data1 = JSON.parse(json1);
var data2 = JSON.parse(json2);
var data = merge(data1, data2); // implement merge!
console.log(JSON.stringify(data)); 
```

`JSON`应该在所有最近的浏览器中都可用。

```
function merge(obj1, obj2) {
    var hasOwn = {}.hasOwnProperty;
    for (var key in obj2) {
        if (hasOwn.call(obj2, key)) {
            obj1[key] = obj2[key];
        }
    }
    return obj1;
} 
```

# android - 运行 Android Lint 时抑制包

> ID：13610681
> 
> 赞同：0
> 
> 时间：2012-11-28T17:12:35.100
> 
> 标签：android, maven, jenkins, lint

我正在使用 Maven 和 Jenkins 构建一个 Android 应用程序，并且我想使用 Lint 来查找代码问题。如何在 lint.xml 中使用标志运行 Lint 以抑制依赖项中的所有警告？

谢谢马库斯

# c# - 在 ControlParameter 'y' 中找不到控件 'x'

> ID：13610683
> 
> 赞同：5
> 
> 时间：2012-11-28T17:12:38.427
> 
> 标签：c#, asp.net, visual-studio-2010, ms-access

我正在尝试使用我的列表视图的下拉列表过滤结果。

我已按如下方式更改了数据源的选择查询...

列表视图：

```
<asp:AccessDataSource ID="AccessDataSource1" runat="server" 
        DataFile="~/App_Data/ASPNetDB.mdb" 
        SelectCommand="SELECT * FROM [tblNames] WHERE Surnames=@Surnames">
        <SelectParameters>
            <asp:ControlParameter ControlID="DropDownList1" Name="Surnames" 
                PropertyName="SelectedValue" />
        </SelectParameters>
    </asp:AccessDataSource> 
```

下拉列表：

```
<asp:DropDownList ID="DropDownList1" runat="server" 
        DataSourceID="AccessDataSource2" DataTextField="Genre" 
        DataValueField="NameID" AppendDataBoundItems="true">
            <asp:ListItem Value="" Selected ="True" >All Surnames</asp:ListItem>
</asp:DropDownList>

    <asp:AccessDataSource ID="AccessDataSource2" runat="server" 
        DataFile="~/App_Data/ASPNetDB.mdb" SelectCommand="SELECT * FROM [tblSurnames]">
    </asp:AccessDataSource> 
```

使用了正确的控件名称（也使用了完全相同的大写字母），但加载页面返回**在 ControlParameter 'Surnames' 中找不到控件 'DropDownList1'。**

关于我在这里做错了什么有什么建议吗？

**编辑：如果有帮助，这是堆栈跟踪**

```
[InvalidOperationException: Could not find control 'DropDownList1' in ControlParameter 'Surname'.]
   System.Web.UI.WebControls.ControlParameter.Evaluate(HttpContext context, Control control) +2107838
   System.Web.UI.WebControls.Parameter.UpdateValue(HttpContext context, Control control) +50
   System.Web.UI.WebControls.ParameterCollection.UpdateValues(HttpContext context, Control control) +113
   System.Web.UI.WebControls.SqlDataSource.LoadCompleteEventHandler(Object sender, EventArgs e) +46
   System.EventHandler.Invoke(Object sender, EventArgs e) +0
   System.Web.UI.Page.OnLoadComplete(EventArgs e) +9010786
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2350 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T17:41:49.927

需要以包含 DropDownList的`ControlID`ID 为前缀：`ContentPlaceHolder`

```
<asp:ControlParameter 
   Name="Surnames" 
   ControlID="ContentPlaceholderID$DropDownList1" 
   PropertyName="SelectedValue" 
/> 
```

另请参阅：[https ://stackoverflow.com/a/5719348/124386](https://stackoverflow.com/a/5719348/124386)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-10T19:07:25.090

此外，请确保您的利益控制具有 runat="server"。啊。

# android - Android 主屏幕生命周期

> ID：13610687
> 
> 赞同：0
> 
> 时间：2012-11-28T17:12:45.367
> 
> 标签：android, android-activity, android-lifecycle, android-launcher

有人可以解释一下“标准”Android 主屏幕的生命周期吗？我问这个是因为我注意到我的主屏幕在启动时进入创建-暂停-恢复-销毁-创建而没有连贯的逻辑（这不可能是正确的顺序，顺便说一句它总是一团糟）。我期待它像所有其他“正常”活动一样被处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:21:39.430

如果是 Android Activity，它应该遵循[此处](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)描述的 Activity 生命周期。现在可以让它以不同的方式工作（我不知道，从来没有这样做过），但它违反了 Android 开发指南，并且在许多方面可能不是可维护的、设计良好的代码。

# iphone - 自定义字体无法在设备上使用？

> ID：13610688
> 
> 赞同：1
> 
> 时间：2012-11-28T17:12:45.540
> 
> 标签：iphone, ios, fonts

我刚刚尝试在我的 iOS 设备上运行我的应用程序（运行 IOS 6 的 iPhone 4）

在 iPhone 模拟器上它与自定义字体完美配合？

但是在设备上它会使用默认字体吗？

我在这里为我的字体使用自定义类：

```
- (void) awakeFromNib {
    [super awakeFromNib];
     self.font = [UIFont fontWithName@"TOONISH" size:self.font.pointSize];
} 
```

类 inharets UILabel

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:17:30.007

您可能需要做更多工作才能让字体在设备上正常工作。

检查此链接： [在 iPhone 应用程序中使用自定义字体](https://stackoverflow.com/questions/13029660/use-custom-fonts-in-iphone-app)

您还可以尝试使用标签而不是类上的字体来验证问题。

```
UIFont *toonishFont= [UIFont fontWithName:@"TOONISH-Bold" size:12.0f];
[uiLabel setFont:toonishFont]; 
```

# css - 浏览器调整大小时锚标记移动

> ID：13610691
> 
> 赞同：2
> 
> 时间：2012-11-28T17:13:02.710
> 
> 标签：css

我正在为一门课做作业，当我调整浏览器大小时，我有一个正在移动的锚标记，我希望它保持在笔图形上，你会在这里看到问题：[http://chrisallie .com/index.html](http://chrisallie.com/index.html)

谢谢！

```
CSS:
#contact {
position: fixed;
display: block;
font-family: Century Gothic;
text-decoration: none;
text-align: center;
font-size: 18px;
font-weight: bold;
color: rgb(0, 0, 153);
transform: rotate(-77deg);
line-height: 30px;
width: 150px;
height: 20px;
margin: -300px 0px 0px 1335px;
}

HTML:
    <div id="main-content">
<a href="index.html" id="home">Home</a>
<a href="index.html" id="webcoding">Web<br />Coding<br />seminar<br /><span>Don't miss!</span></a>
<a href="index.html" id="javascript">Javascript<br />10:00</a>
<a href="index.html" id="photoshop">Photoshop<br />Lesson 01 due!</a>
<a href="index.html" id="illustrator">guest speaker<br />Illustrator<br />2:00-3:00</a>
<a href="index.html" id="php">PHP<br />5:00-10:00</a>
    </div>
<a href="index.html" id="contact">Drop us a line!</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:18:50.320

将锚标签移动到里面`<div id="main-content">`

然后给`#main-content position:relative`和给锚`position:absolute`（去除所有固定定位的东西）

您现在可以相对于`#main-content`div 定位锚点，您需要给它一个负值，`right`但我认为在这种情况下这可能是不可避免的。

您需要调整锚标记的右侧和底部（或顶部）值，但您应该能够使用上面的方法来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:15:41.740

1.  将“给我们打个电话”移动到 div
2.  添加`position:relative`到#main-content

# iphone - 最佳做法是将 UIImage 从一个控制器发送到另一个控制器？

> ID：13610693
> 
> 赞同：0
> 
> 时间：2012-11-28T17:13:10.807
> 
> 标签：iphone, ios5

UIImage 可以通过以下 2 种方式从一个控制器发送到另一个控制器

第一种方法：（在 secondViewController 我们定义 UIImage *image2; ） secondViewController.image2=firstController.imageView.image ;

第二种方法（我们在 secondViewController 中定义 NSData *recievedData）：

NSData *data= UIImageJPEGRepresentation(imageView.image,0.5);

secondViewController.recievedData=数据；

我的疑问是用更少的内存发送图像的最有效方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:15:23.657

直接发送 UIImage。将其编码为 jpeg 然后再次解码是浪费 cpu 周期和内存。

# .net - Xslt for each with xpath 和 condition

> ID：13610703
> 
> 赞同：0
> 
> 时间：2012-11-28T17:13:47.587
> 
> 标签：.net, xml, xslt

我有一个 xslt 模板和一个 xml 文档，如下所示：

通常 xml 中的任何数据都像这样导出：

```
<Cell><Data ss:Type="String">sss</Data></Cell> 
```

我想在 xslt 中进行一些更改：如果记录对象中的任何值包含`<br/>`，它应该像这样导出数据：

```
<Cell ss:StyleID="s62"><Data ss:Type="String">sss</Data></Cell> 
```

任何人都可以帮助我吗？

Xslt 模板：

```
 <xsl:stylesheet version="1.0"
    xmlns="urn:schemas-microsoft-com:office:spreadsheet"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
 xmlns:msxsl="urn:schemas-microsoft-com:xslt"
 xmlns:user="urn:my-scripts"
 xmlns:o="urn:schemas-microsoft-com:office:office"
 xmlns:x="urn:schemas-microsoft-com:office:excel"
 xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"> 

<xsl:template match="/">
  <Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"
    xmlns:o="urn:schemas-microsoft-com:office:office"
    xmlns:x="urn:schemas-microsoft-com:office:excel"
    xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
    xmlns:html="http://www.w3.org/TR/REC-html40">
    <Styles>
      <Style ss:ID="s62">
        <Alignment ss:Vertical="Bottom" ss:WrapText="1"/>
      </Style>
    </Styles>
    <xsl:apply-templates/>
  </Workbook>
</xsl:template>

<xsl:template match="/*">
  <Worksheet>
  <xsl:attribute name="ss:Name">
  <xsl:value-of select="local-name(/*/*)" />
  </xsl:attribute>
    <Table x:FullColumns="1" x:FullRows="1">
      <Row>
        <xsl:for-each select="*[position() = 1]/*">
          <Cell><Data ss:Type="String">
          <xsl:value-of select="local-name()" />
          </Data></Cell>
        </xsl:for-each>
      </Row>
      <xsl:apply-templates/>
    </Table>
  </Worksheet>
</xsl:template>

<xsl:template match="/*/*">
  <Row>
    <xsl:apply-templates/>
  </Row>
</xsl:template>

<xsl:template match="/*/*/*">
  <Cell ss:StyleID="s62"><Data ss:Type="String">
    <xsl:value-of select="." />
  </Data></Cell>
</xsl:template>

</xsl:stylesheet> 
```

xml文件：

```
<records>
<record>
    <BASLAMA_TARIH>2012-11-02T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-02T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>1620.88</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>1535.56</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-25T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-25T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>641.46</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>615.79</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-19T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-19T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>sss</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>829.58</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-10-26T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-10-26T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>26.25</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>25</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-29T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-29T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO>101000018058934</CF_ONCEKI_POLICE_NO>
    <CF_SUM_BRUT_PRIM>284.68</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>254.62</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-02T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-02T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO>101000018058937</CF_ONCEKI_POLICE_NO>
    <CF_SUM_BRUT_PRIM>464.67</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>415.31</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-21T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-21T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>2468.4</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>2355.32</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-05T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-05T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO>101000018058931</CF_ONCEKI_POLICE_NO>
    <CF_SUM_BRUT_PRIM>281.53</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>251.8</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-11T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-11T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO>101000018058940</CF_ONCEKI_POLICE_NO>
    <CF_SUM_BRUT_PRIM>284.68</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>254.62</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-24T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-24T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO>101000018058944</CF_ONCEKI_POLICE_NO>
    <CF_SUM_BRUT_PRIM>281.53</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>251.8</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-09T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-09T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>1129.6</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>1072.17</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-28T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-28T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>0</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>0</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-10T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-10T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>354.76</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>354.76</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-22T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-22T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>2926.57</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>2789.97</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-29T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-29T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>2531.84</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>2414.73</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-30T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-30T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO>101000018058932</CF_ONCEKI_POLICE_NO>
    <CF_SUM_BRUT_PRIM>281.53</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>251.8</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-30T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-30T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO>101000018106146</CF_ONCEKI_POLICE_NO>
    <CF_SUM_BRUT_PRIM>453.55</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>405.39</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-10T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-10T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO>101000018058938</CF_ONCEKI_POLICE_NO>
    <CF_SUM_BRUT_PRIM>0</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>0</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-16T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-16T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>4912.66</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>4655.07</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-13T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-13T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>2313.17</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>2211.51</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-14T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-14T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>4061.73</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>3867.42</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-23T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-23T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO>101000018166873</CF_ONCEKI_POLICE_NO>
    <CF_SUM_BRUT_PRIM>257.79</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>230.61</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-25T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-25T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO>101000018097884</CF_ONCEKI_POLICE_NO>
    <CF_SUM_BRUT_PRIM>547.61</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>489.37</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-07T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-07T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO>101000018058926</CF_ONCEKI_POLICE_NO>
    <CF_SUM_BRUT_PRIM>346.04</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>309.4</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-10-30T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-02-07T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>-146.38</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>-139.41</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-03T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-03T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>1143.59</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>1089.13</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-05T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-05T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>2658.48</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>2531.88</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-24T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-24T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>2331.96</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>2231.19</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-17T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-17T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>161.43</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>161.43</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-27T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-27T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>759.56</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>759.56</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-08T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-08T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>172.23</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>161.64</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-12T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-12T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>1073.5</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>1019.13</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-06T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-06T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>2846.11</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>2712.64</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-23T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-23T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>8747.19</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>8335.29</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-04T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-04T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>826.45</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>798.53</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-01T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-01T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>2061.93</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>1967.81</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-18T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-18T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>2580.77</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>2453.35</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-30T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-30T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>729.09</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>705.05</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-15T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-15T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>1862.96</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>1772.08</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-14T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-14T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO>101000018058939</CF_ONCEKI_POLICE_NO>
    <CF_SUM_BRUT_PRIM>281.53</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>251.8</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-03T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-03T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO>101000018058942</CF_ONCEKI_POLICE_NO>
    <CF_SUM_BRUT_PRIM>431.24</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>385.48</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-26T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-26T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>585.76</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>558.39</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-07T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-07T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>1162.81</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>1105.44</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-24T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-24T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO>101000018058929</CF_ONCEKI_POLICE_NO>
    <CF_SUM_BRUT_PRIM>281.53</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>251.8</CF_SUM_NET_PRIM>
</record>
<record>
    <BASLAMA_TARIH>2012-11-11T00:00:00</BASLAMA_TARIH>
    <BITIS_TARIH>2013-11-11T00:00:00</BITIS_TARIH>
    <CF_ONCEKI_POLICE_NO />
    <CF_SUM_BRUT_PRIM>2004.01</CF_SUM_BRUT_PRIM>
    <CF_SUM_NET_PRIM>1908.58</CF_SUM_NET_PRIM>
</record> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:40:51.190

一种方法是

```
<xsl:template match="/*/*/*">
  <Cell>
    <xsl:if test=".//br">
      <xsl:attribute name="ss:StyleID">s62</xsl:attribute>
    </xsl:if>
    <Data ss:Type="String"><xsl:value-of select="." /></Data>
  </Cell>
</xsl:template> 
```

根据后代元素`ss:StyleID`的存在/不存在有条件地添加属性。`<br>`但是`<br>`不会出现在生成的`<Data>`元素中，因为您正在使用`<xsl:value-of>`（它只是为您提供纯文本字符串值）。您可能想`<xsl:copy-of select="node()"/>`改用它，这将保留子元素的元素结构。

# ios - Core Data Fetch Request 正在模拟器上工作，但不在设备上

> ID：13610707
> 
> 赞同：3
> 
> 时间：2012-11-28T17:13:57.337
> 
> 标签：ios, core-data

我正在从 AppDelegate 调用以下方法。获取请求在 iPad 设备上返回 0 条记录，请告知。记录在模拟器上正确返回。我已经确认在设备和模拟器上传递的参数都不是零。

```
+ (Movie    * ) movieWithID : (NSString * ) ID withObjectContext:(NSManagedObjectContext *) context

{

    Movie *movie= nil;

    NSFetchRequest *request =[[NSFetchRequest alloc]init];

     NSLog(@"ID : %@ Context : %@", ID,context);
     // Context and ID are not nil on both simulator and device

    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Movie" inManagedObjectContext:context];

    [request setEntity:entity];

    NSError *error =nil;

    NSArray * fetchResults = [context executeFetchRequest:request error:&error];
     //0 records are returned on the device
     //Correct number of records are returned on the simulator 

    if (entity && request) {

        NSLog(@"Fetch Count %d",[fetchResults count]);

    }

    else

    {

        NSLog(@"Entity is nil");

    }

    request.predicate = [NSPredicate predicateWithFormat:@"id like %@",ID];

     fetchResults = [context executeFetchRequest:request error:&error];

    if ([fetchResults count] > 1) {

        NSLog(@"Fetched Results > 1");

    }                              

    if (!fetchResults ) {
        NSLog(@"Fetch Failed");
    }

    else if ([fetchResults count]== 0) {

        NSLog(@"No movie results %@",error);

    }

    else if ([fetchResults count] ==1) {

        movie= [fetchResults lastObject];

    }

    return movie;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:00:31.670

原因一定是iPad上和模拟器上查询的商店不同。确保将所有准备好的 SQLite 存储正确复制到设备，并验证您尝试获取的数据是否确实存在。

一种测试方法是首先在代码中插入数据。- 然后您可以检查您的获取请求是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:59:31.143

您不会在获取请求后检查错误（尽管您将其作为参数传递），如果您检查它，我相信您会找到问题背后的原因。此外，当您初始化存储时，请确保也声明错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-24T14:05:19.067

我有同样的问题。我的问题是基于 fetchrequest 谓词。因为谓词字符串存储在 iCloud 键值存储中，所以它在不在 iCloud 上的模拟器中运行良好。但是，在我的设备上，我忘记的谓词在 fetchrequest 中实现，但没有给出任何结果。

这可能不适用于您，但请检查您的谓词。

# c# - 我使用按钮单击创建了一个列表，现在我想使用不同的按钮显示该列表

> ID：13610709
> 
> 赞同：0
> 
> 时间：2012-11-28T17:14:07.320
> 
> 标签：c#, string, list

如何使用按钮单击在消息框中显示列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:17:14.283

您需要将列表附加到字符串，但使用新行将它们连接起来，这是一种快速的方法，而不是遍历列表。

```
String message = String.Join(Environment.NewLine, list);
MessageBox.Show(message, "MessageList", MessageBoxButtons.OK, MessageBoxIcon.Information); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:17:52.793

如果您使用的是 winforms，您可以双击您的按钮，并在事件处理程序中这样做

```
 private void button1_Click(object sender, EventArgs e)
    {
        List<string> strlst;
        StringBuilder sb = new StringBuilder();
        foreach(string s in strlst)
        {
            sb.AppendLine(s);
        }

        MessageBox.Show(sb.ToString());
    } 
```

# c - 外部常数变量

> ID：13610715
> 
> 赞同：1
> 
> 时间：2012-11-28T17:14:38.367
> 
> 标签：c, variables, constants

我在我的一个文件中定义了一个变量，它可能由文件本身中的代码操作，但它始终是任何外部文件的常量值。

我如何将变量声明为常量，而不会在为其定义的文件中分配此变量的值时引发错误，同时允许编译器对其进行优化，就像它在那些外部单元中是常量一样读取？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T17:21:16.793

不能修改右值。使用访问器函数来访问它保证你只提供一个右值，例如

```
static int value;

extern int getconst();

int getconst() {
  return value;
} 
```

这使得：

```
getconst() = -1; // Compiler error 
```

`const`或者，您可以通过指向a 的指针公开您的值`const int`：

```
#include <stdio.h>

static int value = -1;

extern const int * const public_non_modifiable;
const int * const public_non_modifiable = &value;

int main() {
  printf("%d\n", *public_non_modifiable); // fine
  *public_non_modifiable = 0; // compiler error
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-20T00:36:25.510

在修改 virables 的文件中声明如下：

```
int e = 0, e_ant = 0, adj; 
```

并以这种方式在其他文件中声明：

```
extern const int e, e_ant, adj; 
```

为我工作。我正在使用带有 MPLAB 的 dsPIC。

第一个文件计算所有变量的值。第二个文件仅在 LCD 显示器中显示这些值，完全禁止写入这些变量。

# javascript - 如何垂直对齐浮动、流体 div 中的内容？

> ID：13610716
> 
> 赞同：0
> 
> 时间：2012-11-28T17:14:39.380
> 
> 标签：javascript, jquery, html, css, responsive-design

我使用 1140px 网格系统将图像浮动到流体 div 中的标题旁边，如下所示：

```
<div class='row'>
  <div class='sixcol'>
    <img src='img/someImage.jpg'/>
  </div>
  <div class='sixcol last'>
    <h2>Large Header Text</h2>
  </div>
</div>

.row {
    width: 100%;
max-width: 1140px;
min-width: 755px;
margin: 0 auto;
overflow: hidden;
}
.sixcol {
    margin-right: 3.8%;
    float: left;
    min-height: 1px;
}
.row .sixcol {
    48%;
}
.sixcol h2 {
       text-align: center;
 }
.last {
    margin-right: 0px;
}
img {
    max-width: 100%;
    height: auto;
}
@media handheld, only screen and (max-width: 767px) {
    .row {
       width: 100%; min-width: 0; margin-left: 0px; margin-right: 0px;
   }
   .row .sixcol {
       width: auto; float: none; margin-left: 0px; margin-right: 0px;
   }
   .sixcol h2 {
       text-align: left;
    }
} 
```

对于智能手机，标题被推到图像下方并与容器的左侧对齐，而在桌面上，所需的效果是标题始终位于图像的右侧并垂直居中于展开/收缩的图像高度。有没有办法只使用 CSS 和 HTML 来做到这一点？有没有简单的 JS/jQuery 解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:41:59.307

`display:table-cell;`在 div 上使用。div 会像表格单元格一样反应，因此您可以使用垂直对齐。

# android - RemoteControlClient 和 PLAYSTATE_PAUSED

> ID：13610717
> 
> 赞同：2
> 
> 时间：2012-11-28T17:14:42.110
> 
> 标签：android, playback

我正在尝试在 Android 中使用远程控制客户端，我看到以下行为。

在媒体播放期间，如果我正在播放和通话`RemoteControlClient.setPlaybackState(PLAYSTATE_PLAYING)`，然后我关闭屏幕并重新打开，我会按预期获得播放控件。

但是，如果在媒体播放期间，我暂停，因此打电话`RemoteControlClient.setPlaybackState(PLAYSTATE_PAUSED)`，然后我关闭屏幕并重新打开，我根本看不到遥控器！

这是预期的吗？如果我在暂停媒体播放器时根本不`PLAYSTATE_PAUSED`拨打电话，然后我关闭屏幕并重新打开，我会得到错误的控制 - 我看到一个暂停按钮（而不是播放按钮）。

有趣的是，如果我从锁定屏幕上的媒体控件暂停，锁定屏幕小部件会保持打开状态，并且一切都按预期工作。

想法在这里？这是设计使然还是错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-09T04:53:32.790

When you pause audio are you releasing audio focus? When you lose audio focus the controls will disappear.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T00:21:20.013

听起来您有 NullPointerException，您是否在暂停时调用的任何函数中引用 RemoteControlClient？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-31T04:58:00.820

最初，当您设置 RemoteClient 时，它不显示任何控件`PLAYSTATE_PAUSED`。这显然是期望的行为。相反，如果您设置`PLAYSTATE_PLAYING`并稍后切换到`PLAYSTATE_PAUSED`，它可以工作。

# google-maps-api-3 - Google Maps API V3 - 更新了卫星图像 -> 多边形置换 | 解决方案？覆盖/自定义地图类型？

> ID：13610718
> 
> 赞同：1
> 
> 时间：2012-11-28T17:14:48.333
> 
> 标签：google-maps-api-3, polygon, satellite-image

我希望找到解决我的问题的方法！非常感谢您的帮助和建议。

我的问题：我的脚本将 100-200 个多边形（KML/KMZ 文件）加载到 Google Maps Map 中，并将卫星图像作为 MapType。（我使用 Google Maps API V3）。

我在 Google Earth Pro 的帮助下创建了多边形，将它们导出到 KML/KMZ 文件中。

到目前为止，没有任何问题，我的解决方案运行良好。但谷歌更新了我感兴趣的区域的卫星图像。出于这个原因，我所有的多边形现在都被替换了。

一场灾难！出乎所有人意料的灾难...

至少我可以通过谷歌地球（专业版）访问旧/“历史”图像。是否有可能通过 Google Maps API 访问旧图像？

**Unitl 现在我尝试了以下解决方案/替代方案：**

1.  我通过 Google Earth Pro 测量了十进制的“更新位移”，并使用 Pearl 脚本更改了 KML 文件中的坐标 => 新的卫星图像具有更高的分辨率，一些多边形仍然移动或结构/形式没有不匹配。

2.  我还尝试通过 Google Earth Pro 将历史图像导出为 JPEG (6MB)，以将文件作为叠加层加载到我的 Google Maps Map => 多边形匹配，但加载时间约为 2-3 分钟，而且质量不是真的好，所以我必须限制 maxZoomlevel。

3.  最后但并非最不重要的一点是，我尝试使用 MapTypeBus 和 ImageMapTiles 创建自定义的基本瓷砖地图。（100 个图块，700MB）=> 加载时间难以忍受，图块覆盖了我的多边形。

有没有人有相应的想法？有什么解决办法吗？是否有可能通过 Google Maps API 访问旧卫星图像以引用 Google Earth？

非常感谢提前！

此致

麦凯博士

# asp.net - 如何通过站点在 IIS 上更新站点中的文件？

> ID：13610720
> 
> 赞同：0
> 
> 时间：2012-11-28T17:14:57.523
> 
> 标签：asp.net, file-upload, content-management-system, iis-7.5, filelock

好的，所以我们在 IIS 中有一个 CMS 站点，在 ASP.NET 4.0 上运行。

用户想要更新站点上的一些图像，但由于它们最近已被提供，IIS 为它们打开了一个句柄，锁定了文件。这会导致用户在尝试上传文件的更新版本时收到以下错误：

```
The process cannot access the file 'X:\inetpub\wwwroot\sitename\Images\Banner\Temp\5.jpg' because it is being used by another process.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.IO.IOException: The process cannot access the file 'X:\inetpub\wwwroot\sitename\Images\Banner\Temp\5.jpg' because it is being used by another process.

Source Error: 
An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[IOException: The process cannot access the file 'X:\inetpub\wwwroot\sitename\Images\Banner\Temp\5.jpg' because it is being used by another process.]
    System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) +14328663
    System.IO.File.InternalDelete(String path, Boolean checkHost) +14293114
    Admin_Settings_EditHomePageBanner.btnSave_Click(Object sender, ImageClickEventArgs e) +1109
    System.Web.UI.WebControls.ImageButton.OnClick(ImageClickEventArgs e) +134
    System.Web.UI.WebControls.ImageButton.RaisePostBackEvent(String eventArgument) +204
    System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3804 
```

有什么方法可以在 ASP.NET 代码中以编程方式告诉 IIS 释放它对文件的缓存句柄，以便可以更新它？显然，回收整个 IIS 进程在这里并不是一个真正可行的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:30:36.840

兄弟，我认为您没有正确诊断问题。IIS 从不以这种方式保留文件，我很确定情况并非如此。

您是否一直在代码中的某个地方使用这些图像，例如使用 .Net 的位图类修改/显示它们？我认为您自己的代码阻止了这些图像。如果您可以将代码粘贴到此处，我可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:31:54.883

重新启动是最好和最差的选择。您可以通过部署更新的 global.asax 再试一次

# wpf - wpf 扩展工具包 BusyIndi cator 绑定到属性

> ID：13610721
> 
> 赞同：3
> 
> 时间：2012-11-28T17:15:01.400
> 
> 标签：wpf, mvvm-light, wpftoolkit

我有一个 BusyIndi​​cator，我将 IsBusy 绑定到我的视图模型中的 Busy 属性。

```
<xctk:BusyIndicator IsBusy="{Binding Busy}" x:Name="busyBox" Grid.Row="2"
              HorizontalAlignment="Center"
            VerticalAlignment="Center" BusyContent="Contacting Server" >
    </xctk:BusyIndicator> 
```

当我开始 web 服务调用（异步）时，我将忙切换为 true，并在回调中将其设置为 false。

这第一次效果很好，之后每次都不再显示忙碌指示符。我在回调中添加了一个 thread.sleep （只是在 x=case 它第二次移动得太快了）。

我知道我的属性正在正确通知，因为其他绑定控件并按预期工作。似乎busyindicator只适用于一种用途

（顺便说一句，我正在使用 mvvm light toolkit v3）

查看型号代码

```
this.Busy = true; //This proverty is declared correctly with notifications etc
IPersonSearchService searcher = new PersonSearchService(); //class that does my      webservice, ad i pass it a callback method from my UI (see below)
searcher.FindByPersonDetails(ps, GetAllPeopleCallback);

private void GetAllPeopleCallback (PersonSearchResult result, Exception e)
    {
        this.Busy = false;
        ((Models.PersonSearch)this.Model).Persons = result.Persons; //bound to my grid
         CommandManager.InvalidateRequerySuggested();  //i need to do this to make a button who's canexecute command binding happen         
    } 
```

这是访问 web 服务的类

```
class PersonSearchService : IPersonSearchService
{
    public void FindByPersonDetails(WSPersonSearch.PersonSearch ps, Action<PersonSearchResult, Exception> Callback)
    {
        BackgroundWorker worker = new BackgroundWorker();

        worker.DoWork += delegate(object s, DoWorkEventArgs args)
        {
            WSPersonSearch.PersonSearch search = (WSPersonSearch.PersonSearch)args.Argument;
            PersonSearchWebServiceClient wc = new PersonSearchWebServiceClient();
            PersonSearchResult r = wc.FindByPersonDetails(ps);
            args.Result = r;
        };

        worker.RunWorkerCompleted += delegate(object s, RunWorkerCompletedEventArgs args)
        {
            PersonSearchResult result = (PersonSearchResult)args.Result;
            Callback(result, null);
        };

        worker.RunWorkerAsync();
    }
} 
```

ui 上的其他所有内容都表现得很好。我的按钮正确激活/停用。我的网格得到很好的更新等等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:56:51.177

我想我解决了。似乎（并且经常如此）并且通过发布上面的示例代码（删除我所有的测试混乱）我解决了它。

好的，该模型有效，但是因为我正在与 Web 服务通话，并且在第一次通话后，我的 Web 服务通话速度非常快，之后它的移动速度太快了，我看不到 bsy 指示符。

所以为了解决这个问题......我变得懒惰并增加了睡眠。但我把睡眠放在回调中。因此，由于回调在 ui 线程中被触发，因此它在错误的位置阻塞。忙碌指示灯在进入睡眠状态时已经来去匆匆。

所以我把它移到了 DoWork 方法中（它在 ui threqad 之外）并且繁忙的指示器保持不变。

傻我。谢谢各位大侠的建议！

# java - 如何使用 JDBC 和 Microsoft Access 获取自动递增的密钥？

> ID：13610727
> 
> 赞同：0
> 
> 时间：2012-11-28T17:15:11.363
> 
> 标签：java, database, jdbc, primary-key

我正在使用 Java (JDBC) 编写计算机程序，但无法从 Microsoft Access 数据库中获取自动递增的密钥。目前我有来自 java.sql.* 包的 Connection、Statement 和 ResultSet 的三个实例。

我该怎么做才能从我的数据库中获取一行生成的密钥，然后将该值设置为字符串，以便我可以在文本字段中显示它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:23:45.497

[Statement.getGeneratedKeys()](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#getGeneratedKeys%28%29)

免责声明：您的驱动程序可能不支持。

[例子](http://www.java2s.com/Code/Java/Database-SQL-JDBC/DemoGetGeneratedKeysMySQL.htm)

# python - 未定义全局名称，尽管模块已被导入

> ID：13610728
> 
> 赞同：1
> 
> 时间：2012-11-28T17:15:17.393
> 
> 标签：python, module, python-2.7

我正在调用一个函数（read_param），该函数取决于“re”模块，该模块在主脚本（master.py）的文件（libfun.py）中定义。当我这样做时，我得到一个 NameError：

```
NameError: global name 're' is not defined 
```

我在主脚本中导入're'模块，但我导入的模块中的函数似乎无法使用它。我不想从函数本身中导入“re”，因为这似乎很浪费。为什么会这样？

（这是一个最小的例子，不是我的实际代码）：

**libfun.py：**

```
def read_param(paramname, paramfile):
    # code here depends on re module, e.g. calling re.split() 
```

**大师.py：**

```
#!/usr/bin/env python2

import re
import libfun as lf

lf.read_param('parameter', 'filename') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T17:21:13.673

您正在向后看问题。模块应该是自包含的，因此它们需要管理自己的所有依赖项。

想象一下，如果您有 15 个不同的脚本，所有这些都使用`readparam()`. 强迫这些脚本中的每一个`import re`，只是为了使用是没有意义的`readparam()`。您最终会导入它十五次，并且您需要阅读文档或源文件才能知道您必须导入它。

正确的做法是`import re`在`libfun.py`. `master.py`除非您`re`在自身的主体中使用，否则您不需要将其导入`master.py`。

# ruby-on-rails - Rspec capybara 规范在通过“rake spec”调用时失败，但在通过“rspec spec”调用时通过

> ID：13610730
> 
> 赞同：0
> 
> 时间：2012-11-28T17:15:19.897
> 
> 标签：ruby-on-rails, rspec, capybara, capybara-webkit

我已经尝试了这些问题的答案：[1](https://stackoverflow.com/questions/2364600/rspec-spec-fails-when-invoked-via-rake-spec-passes-when-invoked-via-spec-spe) , [2](http://www.ruby-forum.com/topic/182494)。第一个表明它可能是一个缓存问题（并建议运行`rake tmp:clear`）。第二个建议强制`ENV['RAILS_ENV'] = 'test'`进入，`spec_helper.rb`因为 rake 是在“开发”中运行的。我也尝试过完全删除 vcr gem，但这也没有效果。

该[评论](https://github.com/rspec/rspec-rails/issues/208#issuecomment-413114)提供了有关问题可能是由于环境肮脏引起的更多详细信息（因为 rake 在“开发”中开始，但 rspec 在“测试”中运行）。

有问题的规范使用 capybara 和 capybara-webkit。运行时通过，`bundle exec rake spec:requests`但在套件中运行时失败 via `bundle exec rake`。capybara 看到的 html 在这两种情况下都不同，并且在套件中运行时看不到 element `#movie_imdb_id`。

我正在使用 gem 版本`rspec (2.11.0)`、`capybara (1.1.3)`和`capybara-webkit (0.12.1)`.

Rspec 消息：

```
Failures:

  1) Imdb credits get credits should have a credits table
     Failure/Error: wait_until { page.find('#movie_imdb_id').visible? }
     Capybara::ElementNotFound:
       Unable to find css "#movie_imdb_id"
     # (eval):2:in `find'
     # ./spec/requests/imdb_credits_spec.rb:9:in `block (3 levels) in <top (required)>'
     # ./spec/requests/imdb_credits_spec.rb:9:in `block (2 levels) in <top (required)>' 
```

spec_helper.rb：

```
ENV["RAILS_ENV"] = 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'rspec/autorun'
require 'database_cleaner'
require 'paper_trail'
require 'factory_girl'
require 'vcr'
require 'imdb_patch'
require 'capybara/rails'
# require 'capybara/rspec'
require 'capybara/webkit'

ENV['APP_DOMAIN'] = 'www.example.com'
ENV['DOMAIN'] = 'example.com'

# Require the fanatic and food factories
require Fanatic::Engine.config.root + 'spec/factories'
Dir[Rails.root.join("spec/factories/**/*.rb")].each {|f| require f}

# Requires supporting ruby files with custom matchers and macros, etc,
# in spec/support/ and its subdirectories.
Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

RSpec.configure do |config|
  config.include Warden::Test::Helpers
  config.include PostsHelper
  config.include SpecHelpers

  Capybara.javascript_driver = :webkit

  # ## Mock Framework
  #
  # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:
  #
  # config.mock_with :mocha
  # config.mock_with :flexmock
  # config.mock_with :rr
  config.mock_with :rspec

  # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
  #config.fixture_path = "#{::Rails.root}/spec/fixtures"

  # If you're not using ActiveRecord, or you'd prefer not to run each of your
  # examples within a transaction, remove the following line or assign false
  # instead of true.
  config.use_transactional_fixtures = false

  config.before(:suite) do
    DatabaseCleaner.strategy = :truncation
    PaperTrail.enabled = false
  end

  config.before(:each) do
    DatabaseCleaner.start
  end

  config.after(:each) do
    Rails.cache.clear
    DatabaseCleaner.clean
    Warden.test_reset!
  end

  # If true, the base class of anonymous controllers will be inferred
  # automatically. This will be the default behavior in future versions of
  # rspec-rails.
  config.infer_base_class_for_anonymous_controllers = false

  config.include FactoryGirl::Syntax::Methods
end

VCR.configure do |c|
  c.ignore_localhost = true
  c.hook_into :fakeweb
  c.cassette_library_dir = Rails.root.join('spec/fixtures/vcr_cassettes')
end 
```

规范/请求/imdb_credits_spec.rb：

```
require 'spec_helper'

describe 'Imdb credits', :js => true do
  before(:each) do
    login_as_admin

    visit '/admin/movie/new'
    Rails.logger.debug page.html.to_yaml
    wait_until { page.find('#movie_imdb_id').visible? }

    fill_in 'Title',   :with => 'Batman'
    fill_in 'Imdb id', :with => '0096895'

    VCR.use_cassette('imdb_get', :match_requests_on => [get_matcher]) do
      click_button 'Fetch Imdb credits'
      wait_until { page.find('table#imdb_credits').visible? }
    end
  end

  describe 'get credits' do

    it 'should have a credits table' do
      page.should have_selector('table#imdb_credits')
    end

  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:52:08.783

问题实际上是 gem`rails_admin`以及它如何与 rake 交互。通过将以下内容添加到以下内容来修复它`spec_helper.rb`：

```
ENV['SKIP_RAILS_ADMIN_INITIALIZER'] = 'false' 
```

# javascript - 仅使用 JavaScript 对象数组创建小型可搜索数据库。没有 AJAX，没有 PHP

> ID：13610731
> 
> 赞同：4
> 
> 时间：2012-11-28T17:15:21.327
> 
> 标签：javascript, database

我想创建一个小型数据库或项目集合——只有大约 30 个——你可以单独使用 JavaScript 进行搜索。

例如 - 假设我有 20 间房屋出租，我希望学生能够搜索他们有 4 或 5 个房间的房屋。

我可以像这样创建房屋对象：

```
function house(address, rooms, bathrooms){
this.address=address;
this.rooms=rooms;
this.bathrooms=bathrooms;
}

var property1 = new house("10 Park Way","4","1");
var property2 = new house("61 Park Avenue", "5","2");
var property3 = new house("585 Park Road", "3", "1"); 
```

我希望能够通过“房间”搜索此列表并显示地址、房间数量和浴室数量。

注意：我知道我编写它的方式不是数组，但我将使用数组，因此我可以使用 for 循环循环遍历属性并按以下方式评估它们：

```
if(property[i].rooms == roomquery){
    document.write('Address:' + property[i].address + '.<p>');        
    document.write('Address:' + property[i].rooms + '.<p>');
    document.write('Address:' + property[i].bathrooms + '.<p>');
} 
```

简单吧？

除了我不知道如何将 roomquery 变量从我的表单传递到我的脚本。

该过程的顺序是：搜索页面 -> 结果页面 -> 详细信息页面

用户搜索并获得结果列表。可以选择在结果页面上更详细地查看属性，将数据从结果传递到页面以在详细信息页面上重新格式化。当然，数组中的每个属性都会有更多数据，我可以将这些数据提供给不可见标签的 id 或 value 属性，以便收集并重新提交到详细信息页面上的脚本。

我知道我可以用 PHP 做到这一点，而且我知道我可以通过将 roomquery 变量发送到同一页面上的脚本并在搜索页面上进行更改来做到这一点。

但我想做的是使用 GET 或任何其他方法将数据（只是一个数字）发送到结果页面上的脚本，因为这样我可以从将发送到搜索的任何页面运行搜索页。

我已经在互联网上搜索了这个，我没有想出任何东西。一定有办法的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:33:54.297

为什么不使用 JSON，下面是一个示例：

```
var json = {
    "house": [{
            "address": "10 Park Way",
            "num1": 4,
            "num2": 1},
        {
            "address": "61 Park Avenue",
            "num1": 5,
            "num2": 2},
        {
            "address": "585 Park Road",
            "num1": 3,
            "num2": 1}]

};

var houses = json["house"];
for(var i=0; i < houses.length; ++i) {
    var houses_i = houses[i];
    if(houses_i["address"] == '10 Park Way') {
        alert('Found WAY!!!');
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:36:59.553

由于您完全在客户端处理静态房屋列表，因此您可以使用少量基本 Javascript 在单个页面上完成此操作。无需提交表格。

1.  设置您的基本 HTML 表单，并设置显示结果的位置：

    ```
    <form>
        <select name="rooms"></select>
    </form>
    <div id="results"></div> 
    ```

2.  编写一些 javascript 来监听 change 事件（此示例使用 jQuery），进行搜索并输出结果：

    ```
    var houses = [/* ... */]
    $('select[name=rooms]').on('change', function () {
        var rooms = $('select[name=rooms]').val();

        $('#results').empty();

        for (var i = 0; i < houses.length; i++) {
            if (houses[i].rooms == rooms) {
                $('#results').append('<p>Address: ' + houses[i].address + '</p>');
            }
        }
    }); 
    ```

你可以得到更多的花哨并添加比这更多的结构，但这应该涵盖基础知识。

如果您决定包含页面提交，则可以[通过解析从查询字符串中检索参数`window.location.search`](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)。我认为将其保留在一页上会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T17:24:18.483

您可以使用简单的函数[（例如此处描述的](https://stackoverflow.com/questions/2090551/parse-query-string-in-javascript)函数）从请求查询字符串中解析值。

为了创建查询字符串，您可以拥有一个带有隐藏输入的表单：

```
<form action="myresultspage.html" method="get">
    <input type="hidden" id="property" name="property" value="" />
    <input type="submit" />
</form> 
```

您的 JS 可以使用类似`document.getElementByid('property').value = newValue`. 提交此表单后，您将被重定向到 URL `myresultspage.html?property=newValue`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T17:18:12.293

不是一个完整的答案，但您是否考虑过使用 Web SQL？这允许您对已在 JavaScript 中导入的数据执行 SQL 查询。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T18:01:09.213

您只需要从 onchange 事件中调用您的搜索功能：

```
<script type="text/javascript">
function search(roomquery) {
// put your for loop here
}
</script>

rooms: <select onchange="search(this.options[selectedIndex].text);">
    <option>1</option>
    <option>2</option>
</select>​ 
```

见小提琴：http: [//jsfiddle.net/H9jkd/](http://jsfiddle.net/H9jkd/)

# c# - 我们甚至需要.NET 中的终结器方法吗？

> ID：13610733
> 
> 赞同：0
> 
> 时间：2012-11-28T17:15:27.673
> 
> 标签：c#, winforms, memory, idisposable

我的班级正在使用 COM 资源，并且我从 IDisposable 继承了它。为了清理非托管资源，我有调用 Marshall.ReleaseCOMObject() 方法的 Dispose() 方法......所以我的问题是我们还需要 Destructor 方法（Finalizer）吗？释放COM资源？当我确实有 finalzier 方法并在其中调用 Marshal 或 Dispose 时，我会收到一个 RCW 错误，当我删除 finalizer 方法时，我不会再收到 RCW 错误但是如果我查看内存分析器，我可以看到非托管资源每次打开包含此 COM 资源的表单时，内存都会不断增加...所以看起来它没有清理它？那么在 C# 应用程序中清理 COM 资源的正确方法是什么？

我将使用我很快拥有的一些代码示例来更新问题。

谢谢。

```
private MyCOMobject theCOMobject = null;

static SuppressFieldCntrlr()
{
    new SomeCalss();
}

private bool disposed = false;

public void Dispose()
{
    Dispose(true);
    GC.SuppressFinalize(this);
}

private void Dispose(bool disposing)
{
    if (!this.disposed)
    {
        if (disposing)
        {
           //nothing in here, is it just for Managed Resources? 
        }

        Marshal.ReleaseComObject(this);
        MethodFoo(false);

        disposed = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:26:47.657

如果您的类不直接拥有非托管资源，并且您知道没有派生类将直接拥有非托管资源（例如，因为您的类是密封的，所以您的类是内部的），那么您不需要终结器。

就我个人而言，即使不是绝对必要的，我也会使用终结器来实现标准模式。主要是为了最不意外的原则，并且因为其他人可能决定在将来解封它或允许派生类具有非托管资源。

另请注意，COM 对象是*托管*资源，因此您应该在 disposing 为 true 时调用 ReleaseComObject：

```
private void Dispose(bool disposing)
{
    if (!this.disposed)
    {
        if (disposing)
        {
            // Dispose managed resources
            Marshal.ReleaseComObject(this);
        }
        // If you directly own unmanaged resources, they'd be freed here

        disposed = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T17:27:59.823

您正在封装一个托管对象，而不是非托管对象。您没有 P/invoke'd 来获取 Win32 文件句柄、设备上下文或类似的东西；相反，您获得了对托管对象（RCW）的引用。你应该把你的电话放在你`Marshal.ReleaseComObject`的方法`if (disposing)`部分`Dispose(bool)`。

RCW 本身将有一个终结器，它将负责`IUnknown->Release()`记录实际的 COM 对象，因此如果您还没有`ReleaseComObject`在需要进行终结的地方调用，那么 COM 对象将被垃圾收集器删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T17:19:05.267

如果我们有非托管资源，强烈建议使用终结器。在这种情况下：

```
~ClassName
{
    Dispose(false);
} 
```

# android - 启动应用程序时在 logcat 中触发.io Android NullPointerException

> ID：13610739
> 
> 赞同：1
> 
> 时间：2012-11-28T17:15:43.477
> 
> 标签：android, trigger.io, facebook-android-sdk

使用 Trigger.IO Forge 构建 Android / html 混合应用程序。使用 Android 密钥库签署应用程序，运行构建，转移到手机。

成功启动应用程序，它打开了。尝试使用 Facebook (Forge.facebook.authorize) 登录 - 在 ABD Logcat 中看到有关不匹配 Facebook 密钥哈希的错误：

```
 D/Forge   (14638): Returning: {"content":{"type":"EXPECTED_FAILURE","message":"i
    nvalid_key:Android key mismatch. Your key \"mykeywasherexxxxxxxxx\" does n
    ot match the allowed keys specified in your application settings. Check your app
    lication settings at http:\/\/www.facebook.com\/developers"},"status":"error","c
    allid":"89C92BE0-XXXX-4E13-BA20-19F330DF353E"} 
```

在developers.facebook.com 上更新了keyhash

现在，当应用程序启动时，初始 html 屏幕（如成功登录后所见）部分呈现，然后应用程序立即崩溃。从 logcat 捕获：

```
D/AndroidRuntime(11373): Shutting down VM
W/dalvikvm(11373): threadid=1: thread exiting with uncaught exception (group=0x4
0f80300)
E/AndroidRuntime(11373): FATAL EXCEPTION: main
E/AndroidRuntime(11373): java.lang.NullPointerException
E/AndroidRuntime(11373):        at io.trigger.forge.android.core.ForgeActivity$2
.onConsoleMessage(ForgeActivity.java:179)
E/AndroidRuntime(11373):        at android.webkit.CallbackProxy.handleMessage(Ca
llbackProxy.java:796)
E/AndroidRuntime(11373):        at android.os.Handler.dispatchMessage(Handler.ja
va:99)
E/AndroidRuntime(11373):        at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(11373):        at android.app.ActivityThread.main(ActivityThrea
d.java:4745)
E/AndroidRuntime(11373):        at java.lang.reflect.Method.invokeNative(Native
Method)
E/AndroidRuntime(11373):        at java.lang.reflect.Method.invoke(Method.java:5
11)
E/AndroidRuntime(11373):        at com.android.internal.os.ZygoteInit$MethodAndA
rgsCaller.run(ZygoteInit.java:786)
E/AndroidRuntime(11373):        at com.android.internal.os.ZygoteInit.main(Zygot
eInit.java:553)
E/AndroidRuntime(11373):        at dalvik.system.NativeStart.main(Native Method)

W/ActivityManager(  304):   Force finishing activity com.wewana.play/io.trigger.
forge.android.core.ForgeActivity
D/dalvikvm(  304): GC_FOR_ALLOC freed 1780K, 21% free 32600K/41031K, paused 106m
s, total 106ms
D/Forge   (11373): Native call "launchimage.hide" with task.params: {}
D/Forge   (11373): Returning: {"status":"success","callid":"15C77379-8B2F-4DBC-9
34D-0D1B0BB96E14"}
W/ActivityManager(  304): Activity pause timeout for ActivityRecord{41fe8630 com
.wewana.play/io.trigger.forge.android.core.ForgeActivity} 
```

# javascript - 使用 jQuery 或 Q.Js 实现承诺

> ID：13610741
> 
> 赞同：34
> 
> 时间：2012-11-28T17:15:43.417
> 
> 标签：javascript, jquery, breeze, promise, q

我正在研究[BreezeJs](http://www.breezejs.com)，并且有示例使用[Q.js](https://github.com/kriskowal/q/)来处理异步调用的承诺。[John Papa](http://www.johnpapa.net/recent-presentation-on-spa-basics/)也在使用[Q。JQuery 也有承诺](http://api.jquery.com/promise/)。两者有什么区别？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-28T18:26:37.150

两者都基于[Promises/A 标准](http://wiki.commonjs.org/wiki/Promises/A)并实现了一个`then`方法（尽管只有当前的 jQuery，它们曾经有一个不兼容`pipe`的而不是`then`）。但是，有一些区别：

*   Q 有异常处理。异步`then`回调中所有抛出的错误都将被捕获并拒绝承诺（并且只有在调用时才会重新抛出`.end()`）。不知道我个人是否喜欢这样。这是 jQuery 不遵循的标准化方式，在 jQuery deferreds 中[拒绝`then`要复杂得多](https://stackoverflow.com/q/10843297/1048572)。
*   Q 承诺通过单个值/原因解决（就像您从 中返回/抛出它一样`then`），而 jQuery 允许在其 Deferreds 上`resolve`/调用多个参数。`reject`
*   Q 有很多[代理方法](https://github.com/kriskowal/q/#over-the-wire)可以让你修改未来的值
*   Q has[`.all`](https://github.com/kriskowal/q/#the-middle)和类似，使用 jQuery ( ) 更复杂`$.when.apply($, […])`。
*   Q 确实在事件循环中显式处理滴答声并保证异步性，而 jQuery 也可以是同步的。这现在是[Promises A/+ 规范](http://promises-aplus.github.io/promises-spec/)所要求的。

......这基本上是[Promises/B](http://wiki.commonjs.org/wiki/Promises/B)。如您所见，`Q`API 更强大，并且（恕我直言）设计得更好。取决于你想要做什么，`Q`可能是更好的选择，但也许 jQuery（特别是如果已经包含）就足够了。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-20T17:03:29.630

JQuery 的 Promises/A 规范的 promise 实现存在一些实际问题。以下链接比我能更好地描述它们：[missing-the-point-of-promises](http://domenic.me/2012/10/14/youre-missing-the-point-of-promises/)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-10-07T07:44:48.070

伯吉的回答很好地涵盖了一切。不过，我想补充一点，我们已经[为来自 jQuery 的 Q 用户创建了指南](https://github.com/kriskowal/q/wiki/Coming-from-jQuery)。总结相关部分：

*   Q 处理异常，允许您通过统一的接口处理所有错误。
*   Q 专注于链接所有方法，而 jQuery 只允许从`then`/链接`pipe`。
*   Q 承诺保证异步性，从而避免由 jQuery 的有时同步，有时异步行为导致的控制流危险和竞争条件。
*   Q Promise 总是以单个值实现或以单个原因被拒绝，就像同步函数总是返回单个值或抛出单个异常一样。
*   Q 强制将 deferred 和 promise 分开，而 jQuery 将它们合并到一个对象中，并可以选择将它们分开。
*   Q 不跟踪上下文对象以及履行或拒绝，因为这与同步函数没有并行性（即，您永远不会返回一个值以及`this`调用者必须在其中运行的 a）。所以没有`resolveWith`or `rejectWith`。
*   Q 使用 Promises/A+ 术语；主要区别在于 Q 使用“fulfilled”，而 jQuery 使用“resolved”，而在 Q 中，“resolved”意味着更微妙的东西。

该指南还包含一个与 jQuery 和 Q Promise API 并行的表格。

# ios - 如何在我的单点触控应用程序中启用 PIE/ASLR？

> ID：13610747
> 
> 赞同：5
> 
> 时间：2012-11-28T17:15:58.413
> 
> 标签：ios, xamarin.ios, aslr, pie-chart

XCode Build Settings 中有一个名为“Don't Create Position Independent Executables”的选项。这很容易在此处启用。

但是，我正在使用 MonoDevelop 和 MonoTouch 来开发我的应用程序，但在那里我找不到等效的设置。我尝试将 -fpie 标志传递给编译器，但似乎不起作用。当我使用 otool 检查编译的二进制文件时，它没有设置 PIE 标志。

请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T22:41:10.507

MonoTouch 目前不支持与位置无关的代码，当我们 AOT 托管代码时，我们会生成与位置相关的代码。

我们将来可能会解决这个问题，但现在这不是优先事项。

**更新**

Apple 刚刚开始警告发布到 App Store 时未启用 PIE 的可执行文件。这显然会改变我们的优先事项。

**更新 2**

我们有一个潜在的修复程序正在通过测试/QA（但还没有确定的发布日期）。

**更新 3 (2015/03/21)**

这是很久以前修复的。

# node.js - 安装节点 v0.8.15 后，npm 无法在 mac os x 上运行

> ID：13610752
> 
> 赞同：4
> 
> 时间：2012-11-28T17:16:08.300
> 
> 标签：node.js, osx-snow-leopard, npm

我已经使用 nodejs.org 中的 pkg 文件成功安装了节点（我可以运行“ *hello world* ”应用程序）。**node.js**安装对话框指出 npm 也已安装，但我无法从命令行运行它（我得到“ `-bash: npm: command not found`”）。我尝试从 npm 目录 ( `.npm/npm/1.1.32/package`) 调用它，但收到一条错误消息：

```
module.js:340
    throw err;
          ^
Error: Cannot find module '/Users/Frank/.npm/npm/1.1.32/package/bin/node_modules/npm/bin/npm-cli.js' 
```

任何帮助将不胜感激——我是节点新手，对终端还不是很好。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T13:51:53.593

好的，我已经解决了这个问题。这是一个权限问题。出于某种原因，我的管理员帐户没有几个关键位置的超级用户权限；特别是，我缺乏对`usr/local/bin/lib`和的适当权限`usr/local/bin/include`。更改这些目录的权限解决了这个问题。

# iphone - 奇怪的 CoreData 调试与发布问题

> ID：13610761
> 
> 赞同：4
> 
> 时间：2012-11-28T17:16:32.793
> 
> 标签：iphone, ios, core-data

好的，我有一个`Entity`名为coreData 的模型`TechnicalQuery`。像这样...

```
TechnicalQuery
--------------
NSString *detail
NSDate *createdDate
NSString *solution
NSString *name
... 
```

在应用程序中是一个同步过程（应用程序按规范离线），使用该应用程序的人将在他们回到办公室并连接时进行同步。无论如何，这并不重要。

我创建了一个使用相同名称的`NSManagedObject`子类。`TechnicalQuery`

它具有`@property`定义的细节和`@dynamic`细节。

目前，数据库中只有一个技术查询。我可以通过使用该应用程序查看包含所有详细信息的技术查询“屏幕”等来查看这一点……它显示了名称、解决方案、详细信息、创建日期等……一切都在那里。

我可以在应用程序中更新解决方案文本。然后当我稍后回去时，更新仍然存在。核心数据工作正常。

当我同步备份到服务器时，我的问题就出现了。

在调试中这工作正常。我将同步过程丢给了后台线程。然后，该线程查找自上次同步以来已更新的任何 TQ，然后将它们转换为`JSON`数据。然后它启动另一个队列并将这些 TQ 的所有上传排队。

笔记！我绝不会`ManagedObjects`在线程之间传递。我在一个函数中运行 fetchrequest，然后存储数组并在下一个函数（同一线程）中处理数组。唯一传递给下一个线程的是`JSON`它需要发送到的数据和对象特定的 URL，根本没有 CoreData 对象。

JSON数据由子类文件中的一个函数收集`ManagedObject`（它实际上属于一个类别，`NSManagedObject`但你明白了......）该函数首先将对象转换为`NSDictionary`与服务器所需格式匹配的对象，然后再进行转换。

无论如何，在调试模式下（即直接从 Xcode 运行到我的 iPhone 5 它工作正常。字典（和上传数据都填充得很好）。

然而，（终于到了那里）在发布模式下运行时（即当我在仪器中分析时）产生 NSDictionary 炸弹的功能。它告诉我属性“详细信息”为零。当我`NSLog`的属性告诉我它是 nil（在发布模式下）但显示文本（在调试模式下）。

```
<Warning>: Exception! *** setObjectForKey: object cannot be nil (key: Detail) 
```

我知道发生这种情况的确切线路，并且是在我为`NSMutableDictionary`.

通常我会检查我没有在某处设置属性，但它肯定是设置的，因为我可以再次浏览到 TQ 页面并且详细文本显示正确！？

我真的不知道现在该去哪里。

如果有人可以就在哪里看等提供任何建议，那就太棒了。

::编辑 1::

好吧，这很奇怪。

我在收集和处理数据的对象中有一个强大的属性数组（称为recordArray）。

有两个功能`collectData`和`processArray`。该`collectData`函数执行获取请求并将结果放入recordArray。然后该`processArray`函数迭代数组并处理每个项目。

当我将数据记录在数组中时，`collectData`它会正确显示所有内容。

当我从对象中的同一数组中记录相同的数据时，数组中`processArray`仍然存在，但属性全部为空。

谢谢

::编辑 2::

我尝试摆脱属性数组并将其替换为输入/输出模式。

即从 collectData 函数输出数组，然后将其输入到 processArray 函数。

仍然得到相同的结果。

真的用这个把我的头发拉出来。

再次感谢

::编辑 3::

只需从 NSLog 条目中添加一些控制台日志。

```
1\. Nov 29 09:56:39 Olivers-iPhone5 [2705] <Warning>: Collecting technical queries
2\. Nov 29 09:56:39 Olivers-iPhone5 [2705] <Warning>: Tech Query: Name: test Detail: Test description from Olivers iPhone.
3\. Nov 29 09:56:39 Olivers-iPhone5 [2705] <Warning>: pushing tech queries
4\. Nov 29 09:56:39 Olivers-iPhone5 [2705] <Warning>: Tech Query: Name: (null) Detail: (null)
5\. Nov 29 09:56:39 Olivers-iPhone5 [2705] <Warning>: (null)
6\. Nov 29 09:56:39 Olivers-iPhone5 [2705] <Warning>: Exception! *** setObjectForKey: object cannot be nil (key: Detail)
7\. Nov 29 09:56:39 Olivers-iPhone5 [2705] <Warning>: Something Went Wrong! 
```

您可以看到这些都在不到一秒钟的时间内发生。

第 2 行是来自 collectData 函数内部的技术查询的名称和详细信息属性的 NSLog。

第 4 行是来自 processArray 函数内部的技术查询的名称和详细信息属性的 NSLog。

如您所见，第 4 行显示属性的空值。

第 6 行是尝试将详细信息属性添加到 NSMutableArray 的异常日志。它出错了，因为 detail 属性为空。

::编辑 4::

添加带有线程 ID 的日志。

```
1\. Nov 29 10:32:08 Olivers-iPhone5 [2749] <Warning>: Collecting technical queries. Thread: <NSThread: 0x1d263fa0>{name = (null), num = 8}
2\. Nov 29 10:32:08 Olivers-iPhone5 [2749] <Warning>: Tech Query: Name: test Detail: Test description from Olivers iPhone. Thread: <NSThread: 0x1d263fa0>{name = (null), num = 8}
3\. Nov 29 10:32:08 Olivers-iPhone5 [2749] <Warning>: pushing tech queries. Thread: <NSThread: 0x1d263fa0>{name = (null), num = 8}
4\. Nov 29 10:32:08 Olivers-iPhone5 [2749] <Warning>: Tech Query: Name: (null) Detail: (null) Thread: <NSThread: 0x1d263fa0>{name = (null), num = 8}
5\. Nov 29 10:32:08 Olivers-iPhone5 [2749] <Warning>: (null)
6\. Nov 29 10:32:08 Olivers-iPhone5 [2749] <Warning>: Exception! *** setObjectForKey: object cannot be nil (key: Detail)
7\. Nov 29 10:32:08 Olivers-iPhone5 [2749] <Warning>: Something Went Wrong! 
```

你可以从这里看到我绝对没有在线程之间传递任何东西。这一切都发生在同一个线程上。

再次感谢。

::编辑 5::

只是为了向您展示我是如何编造的，这里是来自调试版本的日志......

```
1\. 2012-11-29 10:36:08.471 [2767:161f] Collecting technical queries. Thread: <NSThread: 0x1cd52fb0>{name = (null), num = 8}
2\. 2012-11-29 10:36:08.474 [2767:161f] Tech Query: Name: test Detail: Test description from Olivers iPhone. Thread: <NSThread: 0x1cd52fb0>{name = (null), num = 8}
3\. 2012-11-29 10:36:08.474 [2767:161f] pushing tech queries. Thread: <NSThread: 0x1cd52fb0>{name = (null), num = 8}
4\. 2012-11-29 10:36:08.475 [2767:161f] Tech Query: Name: test Detail: Test description from Olivers iPhone. Thread: <NSThread: 0x1cd52fb0>{name = (null), num = 8}
5\. 2012-11-29 10:36:08.476 [2767:161f] Test description from Olivers iPhone.
6\. 2012-11-29 10:36:08.483 [2767:1623] Uploading to url <I can't put the URL here as it's private>
7\. 2012-11-29 10:36:08.906 [2767:520f] Upload Done 
```

这是完全相同的代码。唯一的区别是它在调试模式下运行，并且日志是从 Xcode 而不是 Organizer 设备日志中复制的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-29T10:34:39.540

虽然我不能确切地回答你的问题是什么，但这个问题出现在我身上，结果证明非主线程没有保持托管对象上下文保持优化，而它们以某种方式处于调试状态。通过使用当前 NSThread 的 threadDictionary，我们在整个线程生命周期中保留了托管对象上下文，问题得到了解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T21:22:44.197

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T12:36:50.183

雾化器，

你并没有真正给我们太多信息。因此，任何人都会猜测。

首先，您可以调试代码的发布版本。只需更改 Xcode 方案中的配置文件。

其次，当您切换到发布模式时，您的代码有哪些变化？为什么调试编译时标志的更改会更改您的产品。（因为当你抛出 DEBUG 标志时 Core Data 不会改变，所以这很可能不是问题所在。）

为了进一步帮助您，SO 社区通常需要查看一些代码。如果你分享一些，人们可能会看它来帮助你。

安德鲁

# javascript - 用 Javascript 解析 XML

> ID：13610763
> 
> 赞同：0
> 
> 时间：2012-11-28T17:16:41.077
> 
> 标签：javascript, xml, xml-parsing

我有一个返回数据的 XML 提要。我正在尝试为标签创建一个元素数组，但即使填充了数据，该数组的长度也始终为零。

```
$.ajax({
                    url: submitUrl,
                    type: "POST",
                    dataType: "xml",
                    data: { request: soapRequest, endPoint: soapEndPoint, header: soapHeader },
                    error: function() {
                        $('#consolelog').html('<p>Failure.</p>');
                    },
                    success: function(soapResponse) {
if (window.DOMParser) {
           parser=new DOMParser();
           xmlDoc=parser.parseFromString(soapResponse,"text/xml");
    }
    else {  //IE
           xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
           xmlDoc.async=false;
           xmlDoc.loadXML(soapResponse); 
    }

    consoleID = document.getElementById('consoleLog');
    consoleID.appendChild(document.createTextNode("xmlDoc = " +  xmlDoc));
    linebreak = document.createElement('br');
    consoleID.appendChild(linebreak);

    var xmlArray = xmlDoc.getElementsByTagName("FAgent");

    consoleID = document.getElementById('consoleLog');
    consoleID.appendChild(document.createTextNode("XMLArray length = " + xmlArray.length));
    linebreak = document.createElement('br');
    consoleID.appendChild(linebreak);

    consoleID = document.getElementById('consoleLog');
    consoleID.appendChild(document.createTextNode("XML Doc = " + xmlDoc.documentElement.childNodes));
    linebreak = document.createElement('br');
    consoleID.appendChild(linebreak); 
```

控制台显示以下输出。

```
xmlDoc = [object Document]

XMLArray length = 0

XML Doc = [object NodeList] 
```

我想遍历数组，但由于它的长度为 0，我不知道如何访问元素？

当我在浏览器开发人员控制台上检查检查器时，soap 响应也显示为文件

XML 是

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <soap:Body>
      <GenerateQuotesResponse xmlns="http://www.xxxxx.yyyyy/">
         <GenerateQuotesResult>
            <CustomerName>Test</CustomerName>
            <Supplier/>
            <QuoteDate>2012-11-28T08:06:04.3860424-06:00</QuoteDate>
            <QuoteStatus>0</QuoteStatus>
            <QuoteStatusMessage/>
            <As>
               <Apt>
                  <AptStatusCode>0</AptStatusCode>
                  <AptStatusMessage>Apt Processing Successful</AptStatusMessage>
                  <IO>KAL</IO>
                  <IA>AL</IA>
                  <FAgents>
                     <FAgent>
                        <ContractID>2553</ContractID>
                        <AgentName>Test</AgentName>
                        <Address1>Test Ave.</Address1>
                        <Address2/>
                        <PostalCode/>
                        <Phone/>
                        <FAX/>
                        <UnitOfMeasure>US</UnitOfMeasure>
                        <Currency>USD</Currency>
                        <TaxesIncluded>YES</TaxesIncluded>
                        <ColtCardAccepted>YES</ColtCardAccepted>
                        <Note/>
                        <AgentStatusCode>0</AgentStatusCode>
                        <AgentStatusMessage>Agent Processing Successful</AgentStatusMessage>
                        <PricingTiers>
                           <PricingTier>
                              <LowVolume>0.00</LowVolume>
                              <HighVolume>249.00</HighVolume>
                              <UnitPrice>5.15</UnitPrice>
                              <VolUOM>US</VolUOM>
                              <FormattedPrice>5.15</FormattedPrice>
                              <CurrCode>USD</CurrCode>
                           </PricingTier>
                           <PricingTier>
                              <LowVolume>250.00</LowVolume>
                              <HighVolume>499.00</HighVolume>
                              <UnitPrice>5.00</UnitPrice>
                              <VolUOM>US</VolUOM>
                              <FormattedPrice>5.00</FormattedPrice>
                              <CurrCode>USD</CurrCode>
                           </PricingTier>
                            <PricingTier>
                              <LowVolume>2000.00</LowVolume>
                              <HighVolume>999999.00</HighVolume>
                              <UnitPrice>4.55</UnitPrice>
                              <VolUOM>US</VolUOM>
                              <FormattedPrice>4.55</FormattedPrice>
                              <CurrCode>USD</CurrCode>
                           </PricingTier>
                        </PricingTiers>
                     </FAgent>
                     <FAgent>
                        <ContractID>5xxx</ContractID>
                        <AgentName>test 2</AgentName>
                        <Address1/>
                        <Address2/>
                        <PostalCode/>
                        <Phone/>
                        <FAX/>
                        <UnitOfMeasure>US</UnitOfMeasure>
                        <Currency>USD</Currency>
                        <TaxesIncluded>YES</TaxesIncluded>
                        <ColtCardAccepted>YES</ColtCardAccepted>
                        <Note>Test 7</Note>
                        <AgentStatusCode>0</AgentStatusCode>
                        <AgentStatusMessage>Agent Processing Successful</AgentStatusMessage>
                        <PricingTiers>
                           <PricingTier>
                              <LowVolume>0.00</LowVolume>
                              <HighVolume>500.00</HighVolume>
                              <UnitPrice>4.80</UnitPrice>
                              <VolUOM>US</VolUOM>
                              <FormattedPrice>4.80</FormattedPrice>
                              <CurrCode>USD</CurrCode>
                           </PricingTier>
                           <PricingTier>
                              <LowVolume>501.00</LowVolume>
                              <HighVolume>1000.00</HighVolume>
                              <UnitPrice>4.55</UnitPrice>
                              <VolUOM>US</VolUOM>
                              <FormattedPrice>4.55</FormattedPrice>
                              <CurrCode>USD</CurrCode>
                           </PricingTier>
                        </PricingTiers>
                     </FAgent>
                  </FAgents>
               </Apt>
            </As>
         </GenerateQuotesResult>
      </GenerateQuotesResponse>
   </soap:Body>
</soap:Envelope> 
```

# python - 将列表中的所有元素连接成一个字符串python

> ID：13610766
> 
> 赞同：1
> 
> 时间：2012-11-28T17:16:47.567
> 
> 标签：python

这个应该很快，但由于某种原因我想不出来。所以说我有一个长度为 n 的元素列表（元素的数量会在将来的某个时候改变）。但是，让我们以这个为例：

```
['ESZ12', 'ESH13', 'ESM13', 'ESU13', 'ESZ13'] 
```

现在我想要将其输出为如下所示的字符串：

```
("ESZ12", "ESH13", "ESM13", "ESU13, "ESZ13") 
```

第一个确实是一个元素列表，第二个只是一个完整的字符串。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T17:19:58.337

```
In [4]: l = ['ESZ12', 'ESH13', 'ESM13', 'ESU13', 'ESZ13']

In [5]: print('(' + ', '.join('"%s"' % el for el in l) + ')')
("ESZ12", "ESH13", "ESM13", "ESU13", "ESZ13") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T17:21:39.650

如果你想要一个看起来像元组的字符串，最简单的方法是转换为元组：

```
>>> l = ['ESZ12', 'ESH13', 'ESM13', 'ESU13', 'ESZ13']
>>> str(tuple(l))
"('ESZ12', 'ESH13', 'ESM13', 'ESU13', 'ESZ13')" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T17:20:02.703

使用`join`功能：

```
>>> a = ['ESZ12', 'ESH13', 'ESM13', 'ESU13', 'ESZ13']
>>> '("' + '", "'.join(a) + '")'
'("ESZ12", "ESH13", "ESM13", "ESU13", "ESZ13")' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T17:19:24.300

把它变成一个字符串？

```
"".join(my_list) 
```

把它变成一个元组？

```
my_tuple = tuple(my_list) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T17:19:38.710

预期的输出是一个元组。如果你真的指的是字符串，那么你可以使用：

```
strx = ''
strx.join(list) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-28T17:25:53.363

你是这个意思吗？：

```
 x = ['ESZ12', 'ESH13', 'ESM13', 'ESU13', 'ESZ13']
    y = str(tuple(x))
    print y 
```

你得到：

```
 "('ESZ12', 'ESH13', 'ESM13', 'ESU13', 'ESZ13')" 
```

因此。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-28T18:23:14.523

尽管 % 格式已被弃用，但在某些情况下它很有用。例如，代码

```
x = ['ESZ12', 'ESH13', 'ESM13', 'ESU13', 'ESZ13']
print '("%s")' % '", "'.join(x) 
```

产生：

```
("ESZ12", "ESH13", "ESM13", "ESU13", "ESZ13") 
```

当然，将打印更改为

```
print '("{}")'.format('", "'.join(x)) 
```

给出相同的结果，但不使用已弃用的 %。

# eclipse - 用于计算代码行数的 Eclipse 插件 (Eclipse Juno)

> ID：13610767
> 
> 赞同：4
> 
> 时间：2012-11-28T17:16:58.143
> 
> 标签：eclipse, plugins

我最近一直在寻找一个插件来计算项目中的 LOC，似乎一切都适用于 indigo 和之前，是否有任何支持 Eclipse Juno 的项目中计算 LOC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:53:43.770

你最好的选择肯定是 eclipse 的 SonarQube 插件。多亏了它，您将拥有 LOC 和许多其他指标。

[http://docs.codehaus.org/display/SONAR/SonarQube+in+Eclipse](http://docs.codehaus.org/display/SONAR/SonarQube+in+Eclipse)

# knockout.js - 根据条件验证 observableArray

> ID：13610769
> 
> 赞同：5
> 
> 时间：2012-11-28T17:17:00.863
> 
> 标签：knockout.js, knockout-validation

我正在尝试尝试，看看是否有任何聪明的解决方案来创建自定义验证器，这些验证器可以被抽象出来以实现整洁和重用。

在下面的 jsfiddle 中，我只是将一个简单的父模型放在一起，该模型存储和测量数组（只是一个值和一个日期）。在这个例子中，我提出了两个要求。

1.  每个测量要么提供两个字段，要么都必须提供。
2.  父数组中必须至少有一个有效（满足先前条件）测量。

    理想情况下，我希望将定义有效的验证逻辑存储在 Measurement 对象中，如下所示。但是，我非常讨厌的是我必须在`atLeastOne()`.

剔除验证将自动验证数字和日期的各个字段但是，我必须介入并针对数组的规则执行验证。

**问题：**是否有任何方法允许我设置 KO 验证以检查数组是否符合要求，同时仍然让`HasValues`方法仍然驻留在测量模型中？即我想将搜索“至少一个”的概念抽象为某种可以为我处理工作的自定义验证器，然后告诉这个验证器“嘿，这是我希望你用来验证的函数数组中的每一项。”

提前致谢！

```
 function Model(data) 
    {
       var self = this;
        self.Measurements = ko.observableArray();

       for(var i = 0; i < data.length; i++)
           self.Measurements.push(new Measurement(data[i]));

        function hasAtLeastOne(){
           var atLeastOne = false;
            $.each(self.Measurements(), function(i, item) { 
                if (item.HasValues()) { 
                   atLeastOne = true; 
                   return; 
                 } 
            });
            return atLeastOne;
        }

        self.Save = function() {               
            if (self.canSave() && atLeastOne())
                alert('save');
            else
                alert('arg!');
        };

        self.errors = ko.validation.group(self);
        self.canSave = ko.computed(function() {
            return self.errors().length == 0;
        });
    }

    function Measurement(data)
    {
       var self = this;
       self.Value = ko.observable(data.val);
       self.Date = ko.observable(data.date);

       self.Value.extend({ required: { onlyIf: isRequired }, number: true });
       self.Date.extend({ required: { onlyIf: isRequired }, date: true });

        self.HasValues = function() {
            return ko.utils.isNotNullUndefOrEmpty(self.Value()) && 
                   self.Date() && self.Date().length > 0;
        };

        function isRequired() {
            return ko.utils.isNotNullUndefOrEmpty(self.Value()) || 
                   (self.Date() && self.Date().length > 0);
        }
    }

    ko.utils.isNotNullUndefOrEmpty = function (value) {
        return (typeof value === 'string' && value.length > 0) || 
               (typeof value !== 'string' && value);
    }; 
```

这是一个 jsfiddle 玩，有我的例子：http: [//jsfiddle.net/cACZ9/](http://jsfiddle.net/cACZ9/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T20:24:49.017

我一直在寻找图书馆资源，看看我是否能发现一些可行的选择。这是我到目前为止发现的。

两种不同的选择都有优点/缺点（当然）：

**使用自定义验证器：**

```
 ko.validation.rules['AtLeastOne'] = {
        validator: function (array, predicate) {
            var self = this;
            self.predicate = predicate;
            return ko.utils.arrayFirst(array, function (item) {
                return self.predicate.call(item);
            }) != null; 
        },
        message: 'The array must contain at least one valid element.'
    };

  function Modal() {
     var self = this;
     self.Measurements = ko.observableArray().extend({ AtLeastOne: function () {
        return this && this.HasValues();
     }

     ...//refer to OP
     ...
     ...

     self.Save() = function() {
         if (self.errors().length == 0)
           alert('Everything is valid, we can save!');
       else if (!self.Measurements.isValid())
           alert('You must have at least one valid item in the pot!');
     };
  }); 
```

这种方法几乎可以将验证从程序员手中拿走，并且非常可重用。但是，我注意到一个潜在的缺点是，每次存储在数组中的任何值（对象或其他）发生突变时，它都会调用自定义验证规则。对大多数人来说可能不是问题。

**使用验证器工厂：**

```
 var KoValidationFactory = {
        AtLeastOne: function (measurements, validator) {
            return function () {
                var self = this;
                self.validator = validator;
                return ko.utils.arrayFirst(measurements, function (measurement) {
                            return self.validator.call(measurement);
                        }) != null; 
            };
        }

   };

   function Modal() {
      var self = this;
      self.Measurements = ko.observableArray();

     ...//refer to OP
     ...
     ...

      self.Save = function () {
          var atLeastOneArrayValidator = KoValidationFactory.AtLeastOne(self.Measurements(), function () {
               return this && this.HasValues();
       });
          var arrayWasValid = atLeastOneArrayValidator();
          if (arrayWasValid && self.errors() == 0)
             alert('everything is good, we can save');
          else if (!arrayWasValid)
             alert('You must have at least one item in the pot!');
       };
   } 
```

这种方法可以确保您仅在明确选择时才验证整个数组。不利的一面是您有更多的动手工作，并且没有充分利用淘汰赛验证库。您必须专门验证数组和任何/所有其他采用这种方法的可观察对象，如果它们中有很多，它们可能会变得混乱。

我鼓励对这些方法进行编辑和建议。

# php - 多表的sql条件

> ID：13610770
> 
> 赞同：0
> 
> 时间：2012-11-28T17:17:02.817
> 
> 标签：php, sql, left-join

今天是个好日子，

我想问一个关于 SQL 的问题，我有 2 个表：

```
tuser (
  id_user,
  username,
  password,
  name,
  level
)
tstatus(
  id_status,
  id_user,
  status) 
```

*tuser 有 5 行 tstatus 有 2 行

我正在做这个查询

```
SELECT * 
FROM tuser,tstatus 
WHERE tuser.id_user = tstatus.id_user 
  AND tuser.level = 'teacher' 
  AND tuser.name LIKE '%" . $queryString . "%' 
ORDER BY tuser.name 
LIMIT 5 
```

mysql_fetch_array 的结果只返回 2 行用户数据。

这是因为 tstatus 表只有 2 行并且无法匹配任何 id_user 加入到 tuser 表中，这里的问题是动态填充 tstatus 字段可以填充或为空。

有人可以在不修改表结构的情况下帮我修复查询吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:24:29.717

尽我所能理解你，我相信你正在寻找这样的东西：

```
SELECT
    *
FROM
    tuser
LEFT JOIN
    tstatus USING (id_user)
WHERE
    tuser.level = 'teacher'
AND
    tuser.name LIKE '%" . $queryString . "%'
ORDER BY
    tuser.name
LIMIT 5 
```

这将选择所有具有“教师”级别和包含查询字符串的名称的用户——即使是那些没有相应状态的用户（任何`tstatus`字段的值都是`NULL`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:26:15.390

您可以进行左连接，以便所有 tuser 都在那里：

```
SELECT * FROM tuser left join tstatus on tuser.id_user = tstatus.id_user WHERE tuser.level = 'teacher' and tuser.name LIKE '%" . $queryString . "%' ORDER BY tuser.name LIMIT 5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T17:37:29.037

使用左连接。USING 关键字将删除重复的 user_id 字段。

```
SELECT * 
FROM tuser tu
LEFT JOIN tstatus ts USING (user_id)
WHERE tu.level ='teacher'
AND tuser.name LIKE '%" . $queryString . "%' 
ORDER BY tuser.name 
LIMIT 5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T17:28:38.150

改用左连接。

```
SELECT tu.*, ts.status FROM tuser tu
LEFT JOIN tstatus ts ON tu.id_user = ts.id_user
WHERE tu.level ='teacher' 
```

您可以根据需要添加其他 where 语句

# c# - ASP.NET c# 指定的强制转换无效

> ID：13610771
> 
> 赞同：0
> 
> 时间：2012-11-28T17:17:06.933
> 
> 标签：c#, asp.net

我想从名为租户的选择查询中获取单个值。SQL Server 中的 Tenant_Facing 具有单个字符值，即“Y”或“N”。当我执行它时，在 Char 租户 = (Char)cmd.ExecuteScalar(); 上显示“指定的强制转换无效”的错误。我不明白为什么即使它们都是Char也不匹配？这是我的代码，

```
protected void DropDownArchitecture_SelectedIndexChanged(object sender, EventArgs e)
    {

        SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["Database_Shared_NotebookConnectionString"].ConnectionString);

        string architecture = ((DropDownList)GridViewServer.FooterRow.FindControl("DropDownArchitecture")).Text;

        SqlCommand cmd = new SqlCommand("SELECT Tenant_Facing FROM tblArchitecture WHERE Architecture = '" + architecture + "'");

        cmd.Connection = conn;

        conn.Open();

        Char tenant = (Char)cmd.ExecuteScalar();

        conn.Close();

        if (tenant == 'Y')
        {
            ((DropDownList)GridViewServer.FooterRow.FindControl("DropDownTenant")).Visible = true;
        }
        else
        {
            ((DropDownList)GridViewServer.FooterRow.FindControl("DropDownTenant")).Visible = false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:20:57.523

即使您在 SQL Server 中的数据类型是 single `char`，该类型仍然映射到`string`ADO.NET 中。试试这样：

```
string tenant = (string)cmd.ExecuteScalar();

conn.Close();

if (tenant == "Y")
//            ^ ^ make sure to change these to double-quotes
{
    ((DropDownList)GridViewServer.FooterRow.FindControl("DropDownTenant")).Visible = true;
}
else
{
    ((DropDownList)GridViewServer.FooterRow.FindControl("DropDownTenant")).Visible = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:20:43.537

返回值似乎是不同的类型。我会说它可能是一个字符串，但可以肯定的是，尝试将原始结果存储`ExecuteScalar`在一个单独的变量中并使用调试器来确定它的 CLR 类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T17:22:23.873

`Sql Char`等于`C sharp string`。

```
String tenant = cmd.ExecuteScalar().ToString(); //Or
String tenant = (string)cmd.ExecuteScalar(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T17:23:28.320

根据这篇文章（[SQL Server DataTypes 的 C# 等效项](https://stackoverflow.com/questions/425389/c-sharp-equivalent-of-sql-server-2005-datatypes)），没有 MSSQL char 的 C# CLR 等效项。你最好的选择是：

```
Char tenant = Convert.ToChar(cmd.ExecuteScalar()); 
```

# ios - 使用带有错误 400 的 PUT 请求的 Afnetworking 错误

> ID：13610775
> 
> 赞同：1
> 
> 时间：2012-11-28T17:17:16.387
> 
> 标签：ios, ios5, increment, afnetworking, put

我正在尝试使用 PUT 请求增加 Parse 上的数据。

```
-(void)requestHit {

AFHTTPClient *client = [[AFHTTPClient alloc]initWithBaseURL:[NSURL     URLWithString:kHBFParseAPIBaseURLString]];
[client setDefaultHeader:@"X-Parse-Application-Id" value:kHBFParseAPIApplicationId];
[client setDefaultHeader:@"X-Parse-REST-API-Key" value:kHBFParseAPIKey];

[client registerHTTPOperationClass:[AFJSONRequestOperation class]];

NSDictionary *jsonDictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                                @"Increment",@"__op", [NSNumber numberWithInt:100],@"amount",
                               nil];

NSError *error = nil;
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:jsonDictionary options:0 error:&error];

if (!jsonData) {
    NSLog(@"NSJSONSerialization failed %@", error);
}

NSString *json = [[NSString alloc]initWithData:jsonData encoding:NSUTF8StringEncoding];

NSDictionary * params = [[NSDictionary alloc]initWithObjectsAndKeys: json, @"hot", nil];

[client putPath:self.shopping.objectId parameters:params success:^(AFHTTPRequestOperation *operation, id responseObject){
    NSLog(@"Success %@", responseObject);
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Failed %@", error);
}];
} 
```

我收到错误代码 400。我知道 400 表示 URL 错误，但我在 safari 上检查了 URL，并且能够访问该网站。我在想也许字典编码错误但不知道。这是 Parse 网站上增量的 REST API cURL：

```
curl -X PUT \
-H "X-Parse-Application-Id: DWZFxindnjGtp3SCMmA4iGaYN55dgVDRmobt7mkC" \
-H "X-Parse-REST-API-Key: QbjhRMhVshPkJmEoDdpS3xAkNOofzLsUBlMBQETU" \
-H "Content-Type: application/json" \
-d '{"score":{"__op":"Increment","amount":1}}' \
https://api.parse.com/1/classes/GameScore/Ed1nuqPvcm 
```

请帮忙~~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T18:06:28.857

默认情况下，AFHTTPClient 将使用 AFFormURLParameterEncoding 作为编码参数的方式，因此您必须将其设置为 AFJSONParameterEncoding

[https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFHTTPClient.m#L473](https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFHTTPClient.m#L473)

[https://github.com/AFNetworking/AFNetworking/wiki/AFNetworking-FAQ#how-do-i-send-json-parameters-in-my-request](https://github.com/AFNetworking/AFNetworking/wiki/AFNetworking-FAQ#how-do-i-send-json-parameters-in-my-request)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-07T10:11:00.820

有些java web服务器不能接收@"__op":@(1)这种参数，你应该手动转换成@"0"或者@"1"，这样可以避免400错误。去尝试一下。

# php - 创建视图 - 导致 myphpadmin 冻结的交叉表

> ID：13610776
> 
> 赞同：0
> 
> 时间：2012-11-28T17:17:17.250
> 
> 标签：php, mysql, admin

我对 MySQL 很陌生，并且在一些帮助下完成了大部分工作。今天我似乎犯了一个更严重的错误，我所有的搜索都没有得到答案，所以汽车。

我创建了一个交叉表查找，它似乎最终成为使用创建视图的怪物。现在拧 php admin 我的数据库无法加载该表并粘在它之前的表上。

我曾尝试使用 drop 并且我曾尝试使用永久桌面来删除数据，但它告诉我该表不存在。当我运行显示表查询时，我可以在列表中看到它。

有没有办法摆脱这张桌子？

尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:54:15.497

您可以尝试`$cfg['MaxExactCountViews'] = 0;`在 phpmyadmin 配置中进行设置，这样它应该会解冻并显示您的表格。

至于摆脱不需要的视图，请使用`DROP VIEW my_view;`而不是`DROP TABLE my_view;`

# crystal-reports - 在 Crystal Reports 中使用 CSV 作为数据源时设置提示？

> ID：13610778
> 
> 赞同：0
> 
> 时间：2012-11-28T17:17:20.467
> 
> 标签：crystal-reports

通常在查询构建器中，您可以在特定维度上添加提示，如果您在查询构建器之外添加自定义查询，您可以在 SQL 中键入提示。

在我目前的情况下，我有一个包含多个 CSV 数据源的报告，而不是我的普通 MySQL 表。有没有办法像 SQL 一样从 CSV 数据源添加提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:36:39.360

您似乎想在 Crystal Reports 中使用参数。运行报表时，该参数会弹出输入提示。
1\. 在“资源管理器”字段中向 CSV 报告添加参数
![在此处输入图像描述](../Images/259528c458280f12cb4746c1767ac86c.png)
2\. 单击“选择专家”并选择要过滤的字段。
3\. 将条件设置**为等于**并选择您的参数值。
*您的参数字段必须与处理 CSV 文件时不应该成为大问题的字段具有相同的值类型。*

![在此处输入图像描述](../Images/b599dff1f095efe2156fc59e80b21815.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:40:26.260

不是直接的。

你可以：

1.  创建报告的多个版本
2.  为每个 CSV 文件添加一个子报表；有条件地抑制除与参数值匹配的子报表之外的所有子报表
3.  在查看之前以编程方式更改 CSV（如果您已经构建了自定义应用程序，则只有一个选项）
4.  如果您使用的是 BusinessObjects Enterprise，则可以创建多个计划实例，每个实例都引用一个给定的 CSV

# mysql - 触发器备选方案中的动态 SQL

> ID：13610782
> 
> 赞同：2
> 
> 时间：2012-11-28T17:17:35.703
> 
> 标签：mysql, sql, triggers

我知道触发器中不允许使用准备好的语句，但我看不出我还能如何做我想做的事，因此任何替代方案/解决方法将不胜感激。

```
DELIMITER $$

CREATE TRIGGER trigger1 after INSERT on table1
FOR EACH ROW
begin
DECLARE a varchar(30);
DECLARE b varchar(30);
DECLARE c varchar(30);
DECLARE d varchar(30);
SET a = new.Col1;
SET b = new.Col2;
SET c = (select Col4 from table2 where Col3=new.Col3);
SET d = concat('select ',a,' from table3 where yq=',c,' and xz=',b);
insert into table4 values (d);
end
$$

DELIMITER; 
```

那么发生了什么：插入一行并从该行中获取 3 个值`Col1`，`Col2`， 和`new.Col3`。 `new.Col3`用于从不同的表中获取一行，然后用于`Col2`搜索我需要的值所在的第三个表。 `Col1`是问题所在，因为它应该是动态生成的列名，`d`但这不起作用。所以很明显，目前我得到的只是一个 select 语句的字符串，`d`这是我所期望的，但我无法执行该语句，因为这是不允许的。那么如何将动态生成的列名放入 select 语句中呢？

表格1

```
Col1 | Col2 | Col3
c    | d    | x
a    | e    | y
b    | e    | z
b    | f    | x 
```

表 2

```
Col3 | Col4
x    | 1
y    | 2 
z    | 3 
```

表3

```
a    | b    | c    | xz    | yq
1a   | 1b   | 1c   |  d    | 1
2a   | 2b   | 2c   |  d    | 2
3a   | 3b   | 3c   |  d    | 3
4a   | 4b   | 4c   |  e    | 1
5a   | 5b   | 5c   |  e    | 2
6a   | 6b   | 6c   |  e    | 3
7a   | 7b   | 7c   |  f    | 1
8a   | 8b   | 8c   |  f    | 2
9a   | 9b   | 9c   |  f    | 3 
```

我想要的结果是1a-9c。

我考虑过更改表架构，以便可以修复触发器中的列名，但这将是最后的手段，因为它会导致其他代码位出现问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T18:01:28.927

您将不得不完全放弃准备好的语句和动态 SQL 的想法，而只是痛苦地做一些`IF..THEN`语句：

```
DELIMITER $$

CREATE TRIGGER trigger1 after INSERT on table1
FOR EACH ROW
begin
DECLARE a varchar(30);
DECLARE b varchar(30);
DECLARE local_c varchar(30);
DECLARE d varchar(30);
SET a = new.Col1;
SET b = new.Col2;
SET local_c = (select Col4 from table2 where Col3=new.Col3);
IF local_c = 'a' THEN
    select a into d from table3 where yq=local_c and xz=b;
END IF;
IF local_c = 'b' THEN
    select b into d from table3 where yq=local_c and xz=b;
END IF;
IF local_c = 'c' THEN
    select c into d from table3 where yq=local_c and xz=b;
END IF;
IF ISNULL(d) = 0 THEN
    insert into table4 values (d);
END IF;
end
$$

DELIMITER; 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-28T17:27:56.383

尝试使用准备好的语句，如下所示：

```
 PREPARE myStmt FROM 
 'concat( insert into table4 values (', 
          'select ',
          a,
          ' from table3 where yq=',
          c,
          ' and xz=',
          b, 
          '))';
 EXECUTE myStmt; 
```

# codeigniter - 贝宝 notify_url 时的路由问题

> ID：13610784
> 
> 赞同：1
> 
> 时间：2012-11-28T17:17:40.057
> 
> 标签：codeigniter, paypal

我把它叫做建筑。

```
function __construct()
{
    parent::__construct();

    if( !$this->authentication->authenticate( $this->router->class ) ) {
        redirect('clients/');
    }

    $this->load->model('client_model', 'client');
    $this->layout = 'layout/web/client';
} 
```

当 paypal NOTIFY_URL 命中 url 时，我遇到了问题，它不保存凭据，如果我从构造函数中删除它，它就可以工作。

```
function payment_notification()
{
    if( $this->input->post(NULL, TRUE) ) 
    {
        $this->saveintodb( $this->input->post() );          
    } else {
        show_error('Post data not found in request', 500);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:43:33.230

此处提供的信息不足...！

*   确保将正确的 notify_url 发送到 paypal
*   如果启用了 CSRF，Codeigniter 将不允许该操作！
*   您应该检查 $_POST 数组而不是 $this->input->post()

**配置文件**

```
$config['uri_protocol'] = 'REQUEST_URI';
/*
|--------------------------------------------------------------------------
| Check to see if the request uri contains paypal
|--------------------------------------------------------------------------
*/
if( stripos($_SERVER["REQUEST_URI"],'/paypal') )
{
    $config['csrf_protection'] = FALSE;
} 
```

- **路由.php**

```
$route['paypal/notify'] = 'paypal/recieve_notification'; // www.mysite.com/paypal/notify 
```

- **控制器/Paypal.php**

```
class Paypal extends CI_Controller{

    public function __construct(){ parent::__construct(); }

    public function recieve_notification() //simplified function
    {
        try(
            if( !$_POST )
                throw new Exception('No POST data recieved from Paypal');

            if( $_POST['verified'] !== 'VERIFIED') //im guessing here
                throw new Exception('User not verified by paypal');

        )catch(Exception $e){
            //debugging: show_error($e->getMessage());
            log_message('error', $e->getMessage());
            redirect('/');
            exit;
        }

            //Save to DB
            $this->saveintodb( $_POST ); //expecting Exception thrown from DB ?

        $this->session->flashdata('success', 'Data Saved!');
        redirect('/');
    }

} 
```

# php - 如何使用 Wordpress 或 Zend 等文件夹路径启用 PHP 脚本？

> ID：13610793
> 
> 赞同：0
> 
> 时间：2012-11-28T17:18:04.420
> 
> 标签：php, wordpress, permalinks

如何使用 php 脚本归档永久链接 url？我的意思是像 wordpress 这样的帖子

```
url: www.example.com/year/entry 

$year = ...
$entry = ... 
```

没有创建实际的文件夹......我不想使用 .htacess 因为我认为 Wordpress 也不使用它。

正常行为将是 404 错误，因为该文件夹不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:31:10.630

在 Apache 中使用 mod rewrite（不同的服务器将允许不同的重写机制）。

[http://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

大多数情况下，重写是使用正则表达式完成的。这是一个示例（我将在之后解释它的作用），您将其放入站点根目录中的 .htaccess 文件中，即：[http ://website.com/](http://website.com/)

```
RewriteEngine on
RewriteRule ^js/main.js$ /scripts/main.php [L] 
```

这将允许您在浏览器中输入以下内容：[http://website.com/main.js](http://website.com/main.js)但该文件实际上将位于服务器上[http://website.com/scripts/main.php](http://website.com/scripts/main.php)和文件为了更好的安全性，可以位于公共目录之外。

另一个例子，但这次使用了更多的正则表达式

```
RewriteEngine on
RewriteRule ^js/([0-9a-f]+).js$ /scripts/main.php [L] 
```

允许所有这些转到同一个文件：

*   [http://website.com/abc018.js](http://website.com/abc018.js)
*   [http://website.com/fbc01.js](http://website.com/fbc01.js)
*   [http://website.com/8bc18.js](http://website.com/8bc18.js)

将全部加载[http://website.com/scripts/main.php](http://website.com/scripts/main.php)

PS [L] 向服务器表明这是最后一次重写，不需要继续寻找匹配项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:20:08.620

当请求某个 url 时，您可以使用 Zend Router 告诉您的应用程序去哪里。您不必创建文件夹，只需将路径匹配到正确的控制器/操作。

[Zend 路由器文档](http://framework.zend.com/manual/1.12/en/zend.controller.router.html#zend.controller.router.routes.standard)

对于 WordPress，您可以简单地使用插件。这应该是相当直截了当的。[看看这个插件](http://wordpress.org/extend/plugins/wp-router/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T17:22:30.483

Wordpress 确实使用了 mod-rewrite 和 .htaccess，否则您会在页面链接中看到 index.php。

您也可以这样做，使用 mod-rewrite 并制作一个 php 文件来处理请求的路径。

# xcode - 跨越多个元素的界面生成器可访问性标签

> ID：13610794
> 
> 赞同：2
> 
> 时间：2012-11-28T17:18:07.993
> 
> 标签：xcode, interface-builder, accessibility

有谁知道跨多个元素的可访问性标签的单个值的方法？我有两个标签，形成一个标题行，屏幕阅读器分别读取它们。我尝试同时选择两者并应用设置，但它不起作用。

编辑：

这是我的故事板的视图...

![故事板可访问性设置](../Images/cffe344678fdae7b8448ff666bdf39b5.png)

但是，当屏幕阅读器到达这一点时，它会读取第一个标签（不使用可访问性值），然后是第二个标签。

![在此处输入图像描述](../Images/b120cd3ae4722a4c3e633126cbae8401.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-12-08T07:28:30.960

我们可以使用类对元素进行分组，并使用属性`UIAccessibilityElement`提供要分组的元素的组合框架。`accessibilityFrameInContainerSpace`

```
//From Apple Docs
let profileElement = UIAccessibilityElement(accessibilityContainer: headerView)
profileElement.accessibilityLabel = profileNameLabel.text
profileElement.accessibilityValue = openPostsLabel.text
profileElement.accessibilityTraits |= UIAccessibilityTraitButton     // Tells VoiceOver to treat our new view like a button

let combinedLabelFrame = profileNameLabel.frame.union(openPostsLabel.frame)
let profileElementFrame = combinedLabelFrame.union(profileImageView.frame) //providing union of frames.
// This tells VoiceOver where the element is on screen so a user can find it as they touch around for elements
profileElement.accessibilityFrameInContainerSpace = profileElementFrame 
```

检查 apple docs [Whats new in 可访问性](https://developer.apple.com/videos/play/wwdc2017/215/)。

[示例应用程序](https://developer.apple.com/sample-code/wwdc/2017/making-apps-accessible.zip)的链接，说明如何执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-30T10:51:15.533

我有两个标签`UIStackView`- 所以我禁用了实际标签上的可访问性，然后启用了堆栈视图的可访问性。在 Xcode 10`UIStackView`中，Interface Builder 中没有“Accessibility”部分，所以我所做的是在*Identity Inspector > User Defined Runtime Attributes*下添加两个自定义属性。我向所需的文本添加了一个`Bool`命名`isAccessibilityElement`集`true`和一个`String`命名集。`accessibilityLabel`当然，如果您希望它以编程方式更新，您可以创建一个`IBOutlet`并`UIStackView`在代码中设置值。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-29T17:29:12.307

我最终解决了这个问题......

我将第一个元素的标签值设置为“转染搜索”，并清除并禁用了第二个元素的可访问性设置。这样，屏幕阅读器会读取第一个项目的值并完全跳过第二个。

它仍然只突出显示第一个元素，但我认为没有办法对元素进行分组并将可访问性属性应用于所有元素。

# qt4 - Doxygen for qt creator 2.6.81

> ID：13610800
> 
> 赞同：0
> 
> 时间：2012-11-28T17:18:33.820
> 
> 标签：qt4, qt-creator, doxygen

有任何适用于 Qt creator 2.6.81 的 Doxygen 版本吗？

*   我已经构建了 Qt 4.8.4 (mingw-builds 64bit) 和 Qt creator 2.6.81

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T23:31:05.623

尝试在`QMAKE_EXTRA_TARGETS`. 在你的`.pro`文件中，写下：

```
gendoc.target = gendoc
gendoc.command = doxygen doxygenfile.sthg
QMAKE_EXTRA_TARGETS += gendoc 
```

如果要生成文档，请使用您通过这 3 行创建的 makefile 目标。

```
make gendoc 
```

您还可以使用自定义构建配置（在 Qt Creator 的“项目”选项卡中）执行此操作，并将其与 Qt Creator 一起使用：

![生成文档的构建配置](../Images/a31efec0fcdd6b9bef8e1ce2f9ed8494.png)

Doxygen 和 Qt Creator 在这些情况下是独立的，所以它应该可以工作。

# android - 组合两个 ArrayAdapter

> ID：13610801
> 
> 赞同：0
> 
> 时间：2012-11-28T17:18:33.797
> 
> 标签：android, textview, master-detail

我的应用程序使用来自 Eclipse 的标准 Master/Detail Flow Activity。我想知道是否可以更改某些“任务”的文本，每个任务都位于左侧。

![我的应用](../Images/3bc22d698a1a90aab80e9d7f639e6bf9.png)

```
masterData = new ArrayAdapter<MyTasks.taskItem>(getActivity(),
        R.layout.simple_list_item_activated_1,
        R.id.text1,
        MyTasks.ITEMS);
setListAdapter(masterData); 
```

此代码将任务添加到主/详细信息流，它使用来自[R.Layout](http://developer.android.com/reference/android/R.layout.html)的常量。我无法更改代码，我尝试添加这行代码但没有任何反应：

```
android:textColor="#FF0000" 
```

R.layout.simple_list_item_activated_1：

```
<?xml version="1.0" encoding="utf-8"?>
<!--
     Copyright (C) 2010 The Android Open Source Project

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->

<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="?android:attr/activatedBackgroundIndicator"
    android:gravity="center_vertical"
    android:minHeight="?android:attr/listPreferredItemHeightSmall"
    android:paddingLeft="?android:attr/listPreferredItemPaddingLeft"
    android:paddingRight="?android:attr/listPreferredItemPaddingRight"
    android:textAppearance="?android:attr/textAppearanceListItemSmall" /> 
```

我还尝试制作一个自己的 xml 文件（commenttextview.xml）：

```
<?xml version="1.0" encoding="utf-8"?>

    <TextView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/commenttext"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textColor="#FF0000"
        android:background="?android:attr/activatedBackgroundIndicator"
        android:gravity="center_vertical"
        android:minHeight="?android:attr/listPreferredItemHeightSmall"
        android:paddingLeft="?android:attr/listPreferredItemPaddingLeft"
        android:paddingRight="?android:attr/listPreferredItemPaddingRight"
        android:textAppearance="?android:attr/textAppearanceListItemSmall" /> 
```

但没有什么真正有效。有人能帮我吗？

编辑：

我试过了，但现在我必须结合两个 ArrayList：

```
 nc_masterData = new ArrayAdapter<MyTasks.taskItem>(getActivity(),
            R.layout.nocommenttextview, R.id.nocommenttext);

    c_masterData = new ArrayAdapter<MyTasks.taskItem>(getActivity(),
            R.layout.commenttextview, R.id.commenttext);

    for (int i = 0; i < MyTasks.ITEMS.size(); i++) {
        if (MyTasks.ITEMS.get(i) != null) {
            if (MyTasks.customers[(Integer.parseInt(MyTasks.ITEMS.get(i).id))][10].equals("0")) {
                nc_masterData.add(MyTasks.ITEMS.get(i));
            }else{
                c_masterData.add(MyTasks.ITEMS.get(i));
            }
        }
    }

    setListAdapter(nc_masterData); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:22:15.793

您可以尝试扩展 ArrayAdapter 类，并在其 getView 方法中更改 TextView 的颜色。

编辑添加了一个示例，无法尝试，但我认为它应该可以工作。

```
public class TestAdapter extends ArrayAdapter<MyTasks.taskItem> {

private int resource;
private int textViewResourceId;
private Context context;
private List<MyTasks.taskItem> objects;

public TestAdapter(Context context, int resource, int textViewResourceId, List<MyTasks.taskItem> objects) 
{
    super(context, resource, textViewResourceId, objects);
    this.context = context;
    this.resource = resource;
    this.textViewResourceId = textViewResourceId;
    this.objects = objects;
}

@Override
public View getView(int position, View convertView, ViewGroup parent)
{
    LayoutInflater vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View view = vi.inflate(resource, null);
    TextView tv = (TextView) view.findViewById(textViewResourceId);
    tv.setText(objects.get(position).toString()); //Not sure about taskItem class toString
    tv.setTextColor(Color.parseColor("#FF0000"));

    return view;
} 
```

}

然后在你的主要课程中：

```
masterData = new TestAdapter<MyTasks.taskItem>(getActivity(),
    R.layout.simple_list_item_activated_1,
    R.id.text1,
    MyTasks.ITEMS);

setListAdapter(masterData); 
```

您应该查看 ViewHolder 模式以使适配器更有效。

希望有帮助！

# wpf - '集合属性'System.Windows.Documents.ListItem'。'SiblingListItems' 为空。当我使用 Xamlservices.Load() 加载 xaml

> ID：13610805
> 
> 赞同：1
> 
> 时间：2012-11-28T17:18:44.927
> 
> 标签：wpf, xaml, serialization

我有一个 Xaml 文件，其中包含该 Xaml 文件中的流文档和列表项。
这是我的代码，

```
 xmlns:p="http://schemas.microsoft.com/winfx/2006/xaml/presentation";

            <Book>
              <Ins>
                 <p:FlowDocument>
                    <p:List StartIndex="1">
                        <p:ListItem>
                           <p:Paragraph>Some Text.</p:Paragraph>
                        </p:ListItem>
                        <p:ListItem>
                            <p:Paragraph>Some Text.</p:Paragraph>
                        </p:ListItem>
                    </p:List>
                 </p:FlowDocument>
              </Ins>
            </Book>

     private FlowDocument _notes;
        public FlowDocument Notes
                {            
                    get { return _notes; }
                    set
                    {
                        if (_notes!= value)
                        {
                            _notes= value;
                            RaisePropertyChanged(() => Notes);
                        }
                    }
                } 
```

我能够加载此文档..当我尝试使用 XamlServices.Save 保存此文档时，它会在**List**中生成以下额外标签..

```
 <av:List.SiblingBlocks>
         <x:Reference>__ReferenceID13</x:Reference>
    </av:List.SiblingBlocks>
  <av:ListItem.SiblingListItems>
       <x:Reference>__ReferenceID9</x:Reference>
              <x:Reference>__ReferenceID12</x:Reference>
</av:ListItem.SiblingListItems> 
```

当我尝试加载这个新保存的 Xaml 文件时，它会抛出错误“集合属性 'System.Windows.Documents.ListItem'.'SiblingListItems' 为空。” 在兄弟姐妹块..

我认为我的问题是使用 Flow 文档，因为它是 wpf 类型的对象我不能将流文档（Wpf 类型的对象）与 XamlServices.Load() 一起使用...我可以为 Flow 文档提供任何替代方案（这不是 wpf类型的对象）...

我也尝试使用 XamlWriter.Save 但它对我不起作用，因为我正在使用带有参数构造函数的 Genric 类..

提前致谢..

# c# - 一种在监视窗口中获取对象并“编写脚本”的方法

> ID：13610807
> 
> 赞同：9
> 
> 时间：2012-11-28T17:18:55.953
> 
> 标签：c#, .net, visual-studio-2010, visual-studio, visual-studio-addins

我有一个场景，我有一个从数据库加载的相当复杂的对象。

该对象有几个嵌套对象。在调试时，我找到了一个我想在单元测试中使用的对象的实例。现在我必须手动创建这个对象。由于它相当复杂，因此需要一段时间。

如果有办法告诉监视窗口将此变量输出到文本窗口（或剪贴板），我的单元测试时间会更好。

似乎所有需要的信息都在监视窗口中。

我不希望它创建 using 语句或任何类似的东西，只需使用它拥有的类信息并创建`new`语句（嵌套与我的对象一样多的级别）。

有没有这样的工具？（如果不是，也许我只是找到了发财的方法？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:26:18.217

我知道没有这样的工具......这样做非常复杂，因为：

*   对象可能有循环引用，因此你可以去的深度没有限制
*   可能有对单例对象的引用
*   可能有对在构造函数上带参数的对象的引用，它怎么知道如何构造对象？
*   或对没有公共构造函数的对象的引用，而是由工厂构建的
*   或对 COM 对象的引用
*   或对仅在运行时才有意义的对象的引用：例如文件流

**一种简单的解决方案：**使对象可序列化（例如，xml 或 json），对其进行序列化，将序列化的字符串复制到您的单元测试中，然后在单元测试中对其进行反序列化。

**不是那么简单的解决方案：**实现调试器可视化器，带有可视化器对象源： [调试器可视化器和“类型未标记为可序列化”](https://stackoverflow.com/questions/2959048/debugger-visualizer-and-type-is-not-marked-as-serializable)

这样您就可以创建一个窗口，并显示序列化的对象......您可能必须使用反射来读取所有对象属性和子对象等等。

# iphone - 如何将 JSON 字符串保存到 iOS 中的一个 Sqlite 字段？

> ID：13610812
> 
> 赞同：1
> 
> 时间：2012-11-28T17:19:04.517
> 
> 标签：iphone, ios, xcode, json, sqlite

嗨，我有一些 JSON 格式的数据，如下所示：

```
`contentJson=`[{"key1":"Value1","key2":"Value2","key3":"Value3","key4":"Value4","key5":"Value5","key6":"Value6","key7":"Value7", "key8":"Value8"},{"key1":"Value1","key2":"Value2","key3":"Value3","key4":"Value4","key5":"Value5","key6":"Value6","key7":"Value7", "key8":"Value8"}] 
```

如何将所有数据保存到 Sqlite 数据库中的一个字段？

我的代码是

```
 NSString *statement = [[NSString alloc]initWithFormat:@"INSERT INTO mydatabase(contentJson,ID) VALUES(\"%@\",%d)",contentJson,ID]; 
```

但它没有插入任何东西。如果我通过 SQlitemanager 手动插入，那么我会收到错误，例如“Key1 ......

如果有人可以通过向我展示如何做到这一点来帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T17:25:51.353

您的插值字符串如下所示：

```
INSERT INTO mydatabase(contentJson,ID) VALUES(
"[{"key1":"Value1","key2":"Value2","key3":"Value3","key4":"Value4",
"key5":"Value5","key6":"Value6","key7":"Value7", "key8":"Value8"},
{"key1":"Value1","key2":"Value2","key3":"Value3","key4":"Value4",
"key5":"Value5","key6":"Value6","key7":"Value7", "key8":"Value8"}]",
ID); 
```

你需要 exacpe 字符串中的 " 因为它会混淆你的 rdbms。

也许试试

```
NSString *statement = [[NSString alloc]initWithFormat:@"INSERT INTO mydatabase(contentJson,ID) VALUES('%@',%d)",contentJson,ID]; 
```

然而，真正的解决方案是在应用程序中使用准备好的语句而不是 SQL 字符串。当您使用准备好的语句时，这不是问题。

# amazon-web-services - 与在 EC2 上托管 MySQL 相比，RDS 节省了多少精力？

> ID：13610815
> 
> 赞同：1
> 
> 时间：2012-11-28T17:19:10.740
> 
> 标签：amazon-web-services, amazon-ec2, amazon-rds

我以前没有管理过数据库服务器，所以我想知道如果我使用 RDS 而不是在 EC2 实例上托管 MySQL 会节省多少精力。我知道我可能不需要花很多钱来设置它，但是剩下的多少钱？有什么样的维护？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T00:45:33.827

除非您真的知道自己在做什么，否则您真的不应该在 EC2 上设置生产 MySQL 实例。首先，EC2 实例本质上是短暂的，这意味着它们并非真正设计用于保存持久数据。如果您想使用 EBS 支持的实例或 EBS 卷，您至少可以解决这个问题，但是与本地（临时）磁盘存储相比，EBS 卷的 I/O 性能问题。因此，如果您计划您的数据库需要满足任何类型的高性能标准，那么这几乎是不可行的。

更不用说使用 RDS，您可以获得一个高可用性实例，如果需要，该实例将故障转移到同步复制的故障转移实例。您还可以获得自动备份等功能。

当然，与在 EC2 上运行 MySQL 相比，RDS 实例的成本可能会更高，但它的麻烦要少得多，而且性能要高得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T07:54:32.820

我们在 AWS 上的 EBS 上运行了一个多宿主 MySQL 数据库集群，我们每分钟处理一百万个事务，所以我预计不会出现任何 I/O 性能问题。问题应该是；在这个项目中，您是否有时间、愿望和能力来学习 MySQL，或者您是否想以略高的成本将其外包出去。我相信你可以通过设置 MySQL 来开始（可能需要几个小时的工作）然后在你的停机时间了解更多关于它的信息，并在你接近当前上限时调整它以获得性能提升设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-13T14:43:52.087

要在 Amazon EC2 上为大容量数据库配置 MySQL，您需要详细了解 Amazon EC2、VPC、EBS PIOPS、RAID、备份策略、快照脚本、复制架构、监控插件等。RDS MySQL 抽象了所有这些复杂性并使其变得简单供小型团队在 AWS 上有效管理 MySQL。它确实为小型团队节省了大量的安装、配置和维护工时。

# linux - 在linux中使用'sed'时出现额外字符错误

> ID：13610821
> 
> 赞同：0
> 
> 时间：2012-11-28T17:19:33.473
> 
> 标签：linux, sed

我的课程涉及编写一个 linux 脚本以从伪垃圾文件夹中“恢复”文件。我已经这样做了，它看起来*应该可以*工作，但事实并非如此。相反，我收到一条错误消息：

> sed：-e 表达式#1，字符 2：命令后的额外字符

但我不明白为什么，因为我没有在代码中的任何地方使用 -e 表达式。然而，我的大脑因为盯着代码看太久了，以至于它可能只是一个我看不到的愚蠢错误。任何帮助将不胜感激！

这是我的代码：

```
#!/bin/sh

if [ "$1" = "-n" ]
then

##if command is used with -n, prompts user to enter a new location for the file

  cd ~/my-documents/mydir01/trashbin
  restore=`sed "$2" ~/my-documents/mydir01/locations`
  name=`basename "$restore"`

  echo $name
  echo "Enter new location for this file."
  read loc
  echo $loc
  mv -i `"$name" "$newloc"/"$name"`

else

##file will be restored to its previous location

  cd ~/my-documents/mydir01/trashbin
  restore=`sed "$1" ~/my-documents/mydir01/locations`
  loc=`dirname "$restore"`
  echo $loc
  name=`dirname "$restore"`
  mv $1 $name
fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:30:23.843

你究竟是如何调用你的shell脚本的？sed 使用了 $1 和 $2 的值，看起来这可能就是问题所在。

根据原始发布者的评论，似乎期望的最终目标是将原始文件的位置存储在 ~/my-documents/mydir01/locations 中，然后在需要恢复文件时从那里检索它。

一种方法是使用元组（例如键值对）来存储和检索此信息。例如，如果原始文件名是 X，而新文件名是 Y，则在更改时，您将在位置文件中添加“X Y”。稍后，当您想要恢复文件时，您可以使用 X（或者可能是 Y）从位置文件中选择这一行（提示：使用 grep），然后使用 awk 或 perl（例如：awk '{print $1} ') 来选择行的第一部分。这样做会给你 X，这是你想要的，因为 X 是文件的原始名称。

总而言之，这个问题根本不是关于 sed 的。

祝你好运。

# android - 安卓布局。权重、滚动视图、列表视图

> ID：13610830
> 
> 赞同：1
> 
> 时间：2012-11-28T17:20:05.140
> 
> 标签：android, android-layout

这让我彻底疯了。我想在android中使用一个有点复杂的布局。我正在尝试使用权重而不是固定事物的大小。也许我应该放弃那个...

这是我想要做的：

![在此处输入图像描述](../Images/6249a4a5aed186b9e6f69ff905b14b3a.png)

我想要 3 个滚动视图（里面有文本视图）和一个大小相同的列表视图。

我使用了权重和为 4 的 TableLayout，并为包含滚动视图和列表视图的行赋予了权重 1。这实际上是一种工作，这让我感到惊讶，因为还有其他行没有分配权重。但是一旦实际填充了列表视图或文本视图开始占用多行，一切都会搞砸。我希望它们都保持相同的大小。

我在下面粘贴了我当前的 axml 文件。我已经尝试了一百万种不同的东西，我准备放弃了。这真的不应该那么难。

提前致谢！

```
 <?xml version="1.0" encoding="utf-8"?>
    <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/StepTable"
    android:stretchColumns="*"
    android:orientation="vertical"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
    android:background="@color/bgray"
    android:padding="15dp"
    android:weightSum="4">
    <TableRow
        style="@style/PhaseHeaderRow">
        <TextView
            android:text="Header 1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_span="3"
            style="@style/PhaseHeader" />
    </TableRow>
    <TableRow
        style="@style/PhaseRow.ListHeader"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
        <LinearLayout
            android:orientation="horizontal"
            android:weightSum="8"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_span="3">
            <TextView
                android:id="@+id/txt_PhaseListNumber"
                android:gravity="center"
                android:layout_weight="1"
                android:text="Sub"
                style="@style/PhaseTextView.List"
                android:width="0px"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="2dp" />
            <TextView
                android:id="@+id/txt_PhaseListStatus"
                android:layout_weight="2"
                android:gravity="center"
                style="@style/PhaseTextView.List"
                android:width="0px"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="2dp"
                android:text="head" />
            <TextView
                android:id="@+id/txt_PhaseListNote"
                android:layout_weight="5"
                android:gravity="left"
                android:text="er"
                style="@style/PhaseTextView.List"
                android:width="0px"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="2dp" />
        </LinearLayout>
    </TableRow>
    <TableRow
        android:id="@+id/row_StepList"
        android:layout_weight="1"
        android:layout_width="fill_parent"
        android:background="#ff9abf2f"
        android:layout_height="wrap_content">
        <ListView
            android:id="@+id/list_Steps"
            android:layout_span="3"
            android:listSelector="#44ff0000"
            android:drawSelectorOnTop="true"
            android:choiceMode="singleChoice"
            android:layout_width="fill_parent" />
    </TableRow>
    <TableRow
        android:id="@+id/row_PhaseDescHeader"
        style="@style/PhaseHeaderRow"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
        <TextView
            android:id="@+id/txt_PhaseDescHeader"
            style="@style/PhaseHeader"
            android:text="Header 2" />
    </TableRow>
    <TableRow
        android:id="@+id/row_TesterActionLabel"
        style="@style/PhaseRow.ListHeader"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
        <TextView
            android:id="@+id/txt_TesterActionLabel"
            android:text="SubHeader"
            style="@style/PhaseTextView.List"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
    </TableRow>
    <TableRow
        android:id="@+id/row_TesterAction"
        style="@style/PhaseRow"
        android:layout_weight="1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <ScrollView
            android:id="@+id/scroller_TesterAction"
            android:layout_weight="1"
            android:scrollbars="vertical"
            android:fillViewport="true"
            android:layout_span="3"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">
            <TextView
                android:id="@+id/txt_TesterAction"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:textSize="15sp"
                android:ellipsize="start"
                android:text="ScollView with TextView Inside" />
        </ScrollView>
    </TableRow>
    <TableRow
        android:id="@+id/row_ExitCriteraLabel"
        style="@style/PhaseRow.ListHeader"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
        <TextView
            android:id="@+id/txt_ExitCriteraLabel"
            android:text="SubHeader"
            style="@style/PhaseTextView.List"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
    </TableRow>
    <TableRow
        android:id="@+id/row_ExitCritera"
        style="@style/PhaseRow"
        android:layout_weight="1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <ScrollView
            android:id="@+id/scroller_ExitCritera"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:scrollbars="vertical"
            android:fillViewport="true"
            android:layout_span="3">
            <TextView
                android:id="@+id/txt_ExitCritera"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:textSize="15sp"
                android:ellipsize="start"
                android:text="Another ScollView with TextView Inside" />
        </ScrollView>
    </TableRow>
    <TableRow
        android:id="@+id/row_PhaseNotesHeader"
        style="@style/PhaseHeaderRow">
        <TextView
            android:id="@+id/txt_PhaseNotesHeader"
            style="@style/PhaseHeader"
            android:text="Header 3" />
    </TableRow>
<!-- -->
    <TableRow
        android:id="@+id/row_Notes"
        style="@style/PhaseRow"
        android:layout_weight="1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <ScrollView
            android:id="@+id/scroller_Notes"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:scrollbars="vertical"
            android:fillViewport="true"
            android:layout_span="3">
            <TextView
                android:id="@+id/txt_Notes"
                android:layout_width="fill_parent"
                android:textSize="17sp"
                android:layout_height="wrap_content"
                android:text="Yet another ScollView with TextView Inside"
                android:singleLine="false"
                android:ellipsize="none" />
        </ScrollView>
    </TableRow>
</TableLayout>
</TableLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:45:32.970

![在此处输入图像描述](../Images/f74deeda91b62f28d47a05d7684bb1b5.png)

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="#a3c3c3"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="#B40404"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Header1"
                android:textAppearance="?android:attr/textAppearanceLarge" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="#F78181"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="sub1"
                android:textAppearance="?android:attr/textAppearanceLarge" />

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="sub2"
                android:textAppearance="?android:attr/textAppearanceLarge" />

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="sub3"
                android:textAppearance="?android:attr/textAppearanceLarge" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/ln1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/textView1"
            android:layout_weight="1"
            android:background="#a3c3c3" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="#F78181"
                android:text="sub Header1"
                android:textAppearance="?android:attr/textAppearanceLarge" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/ln1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/textView1"
            android:layout_weight="1"
            android:background="#a3c3c3" >

            <ListView
                android:id="@+id/listView1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1" >
            </ListView>
        </LinearLayout>
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="#a3c3c3"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="#B40404"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Header2"
                android:textAppearance="?android:attr/textAppearanceLarge" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="#F78181"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="sub1"
                android:textAppearance="?android:attr/textAppearanceLarge" />

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="sub2"
                android:textAppearance="?android:attr/textAppearanceLarge" />

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="sub3"
                android:textAppearance="?android:attr/textAppearanceLarge" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/ln1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_below="@+id/textView1"            
            android:background="#a3c3c3" android:layout_weight="1">

            <ScrollView
                android:id="@+id/scrollView1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" >

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >

                    <TextView
                        android:id="@+id/textView2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="TextView" />

                </LinearLayout>
            </ScrollView>

        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="#F78181"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="sub2"
                android:textAppearance="?android:attr/textAppearanceLarge" android:layout_weight="1"/>

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="sub2"
                android:textAppearance="?android:attr/textAppearanceLarge" />

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="sub3"
                android:textAppearance="?android:attr/textAppearanceLarge" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/ln1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_below="@+id/textView1"            
            android:background="#a3c3c3" android:layout_weight="1">

            <ScrollView
                android:id="@+id/scrollView1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" >

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >

                    <TextView
                        android:id="@+id/textView2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="TextView" />

                </LinearLayout>
            </ScrollView>

        </LinearLayout>

     </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="#a3c3c3"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="#B40404"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Header3"
                android:textAppearance="?android:attr/textAppearanceLarge" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="#F78181"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="sub1"
                android:textAppearance="?android:attr/textAppearanceLarge" />

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="sub2"
                android:textAppearance="?android:attr/textAppearanceLarge" />

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="sub3"
                android:textAppearance="?android:attr/textAppearanceLarge" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/ln1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/textView1"
            android:background="#a3c3c3" >
        </LinearLayout>

        <LinearLayout
            android:id="@+id/ln1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/textView1"
            android:layout_weight="1"
            android:background="#a3c3c3" >

            <ScrollView
                android:id="@+id/scrollView1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" >

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >

                    <TextView
                        android:id="@+id/textView2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="TextView" />

                </LinearLayout>
            </ScrollView>

        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:26:15.377

也许您可以使用 WebViews 而不是 TextViews，因为 WebViews 有自己的滚动功能。

您可以使用以下代码加载数据：

```
 WebView wv = (WebView)findViewById(R.id.webView1);
 wv.loadDataWithBaseURL("file:///android_asset/", description, "text/html", "utf-8", null); 
```

另一方面，我会使用一个垂直的 LinearLayout 和四个具有相同权重的 RelativeLayout，因此它们将使用相同的空间。然后，这些 RelativeLayouts 中的 WebView 和 ListViews 可以将 match_parent 作为高度。

# c# - 从 linq 列表中删除多个索引

> ID：13610833
> 
> 赞同：1
> 
> 时间：2012-11-28T17:20:20.150
> 
> 标签：c#, linq

我想从 linq 列表中删除多个索引，我正在使用以下代码：

```
slidePart
         .Slide
         .Descendants<DocumentFormat.OpenXml.Presentation.Picture>()
         .ToList()
         .ForEach(pic => pic.Remove()); 
```

List 中有 3 个元素，现在我想要的是只选择第一个和第三个元素，然后执行 ForEach 删除它们。

**[编辑]**

问题还在于索引是动态的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T17:23:34.067

```
 var toRemove = new int[] { 1,2,.... };

    slidePart.Slide
        .Descendants<DocumentFormat.OpenXml.Presentation.Picture>()
        .Where((x, i) => toRemove.Contains(i) )
        .ToList()
        .ForEach(pic => pic.Remove()); 
```

如果您的列表（*toRemove*）很大，您可以通过更改一点点的声明将（*包含*）的搜索时间从 O(n) 减少到 O(1)`toRemove`

```
var toRemove = new HashSet<int>(new int[] { 1 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:30:43.677

通常，您可以使用过滤器的*索引*重载[`Where`](http://msdn.microsoft.com/en-us/library/bb549418.aspx)来选择多个索引处的项目。请记住，LINQ 只为您提供集合的视图 - 另一个集合实例 - 因此您无法修改原始集合。如果该`Remove`方法处理从其所有者那里删除项目，则可能是可能的，但这将是一种非常特殊且罕见的情况。

在您的情况下，获取项目将如下所示

```
var toRemove = new[] { 1, 2, ... };

var itemsToBeRemoved = slidePart.Slide
    .Descendants<DocumentFormat.OpenXml.Presentation.Picture>()
    .Where((pic, index) => toRemove.Contains(index))
    .ToList(); 
```

但是为了能够删除这些项目，您可能需要`Remove`在集合本身上调用某种方法，`Descendants`或者在您的场景中可能需要完全不同的方法。

# wordpress - 按自定义字段日期列出自定义帖子类型

> ID：13610836
> 
> 赞同：2
> 
> 时间：2012-11-28T17:20:27.700
> 
> 标签：wordpress, date, sorting, custom-post-type, custom-fields

我正在使用 Wordpress 和 WP-Types 插件，需要按自定义字段日期对 CPT 进行排序。

这工作正常：

```
$args = array(
    'post_type' => 'parties',
    'paged' => $paged,
    'meta_key' => 'wpcf-parties_date',
    'orderby' => 'meta_value',
    'order' => 'DESC',
); 
```

orderby 工作完美。在数据库中，字段 date 'wpcf-parties_date' 的值以这种方式存储，例如： 1349481600 。

我有两个模板，我需要在其中显示过去和即将发布的帖子。我的问题是如何仅显示有关当前日期的未来或过去的帖子？

我尝试这个没有运气。

```
$args = array(
    'post_type' => 'parties',
    'paged' => $paged,
    'meta_key' => 'wpcf-parties_date',
    'meta_value' => date('d.m.Y H:i:s'),
    'meta_compare' => '>',
    'orderby' => 'meta_value',
    'order' => 'ASC'
); 
```

我使用 WP_Query 进行循环。

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:47:47.000

您可以尝试`meta_query`同时检查两者`< and >`并使用`meta_value_num`，因为您的自定义字段值是数字 (1349481600)。

```
$current_date=strtotime(date('d.m.Y H:i:s'));
$args = array(
    'post_type' => 'parties',
    'paged' => $paged,
    'meta_key' => 'wpcf-parties_date',
    'orderby' => 'meta_value_num',
    'order' => 'ASC',
    'meta_query' => array(
        array(
            'key' => 'wpcf-parties_date',
            'value' => $current_date,
            'compare' => '>'
        ),
        array(
            'key' => 'wpcf-parties_date',
            'value' => $current_date,
            'compare' => '<'
        )
    )
); 
```

[阅读文档以获取更多信息](http://codex.wordpress.org/Class_Reference/WP_Query)。

# ios - 如何在 UIpickerview 的整个生命周期内动态更改其行高？

> ID：13610841
> 
> 赞同：6
> 
> 时间：2012-11-28T17:20:41.060
> 
> 标签：ios, uipickerview

只是为了澄清一下，我不是在问如何在设置 UIpickerview 时一开始就设置行高。我知道您为此目的使用了 pickerView:rowHeightForComponent。

但是，我要问的是我是否希望 pickerView:rowHeightForComponent 返回一个变量值，该值可以在 UIpickerview 的生命周期内更改，例如，响应单击按钮或更改默认设置。

我发现，不幸的是，pickerView:rowHeightForComponent 只被调用一次，一开始，当 iOS 设置 UIpickerview 时。之后，它再也不会调用pickerView:rowHeightForComponent，因此无法获取pickerView:rowHeightForComponent 如果再次调用它会返回的值的变化。

我想我可以释放 UIpickerview 并设置另一个，迫使 iOS 再次调用 pickerView:rowHeightForComponent ，但这可能不方便，并且可能需要保存状态信息。还有另一种更简单的方法来动态更改行高吗？谢谢！

环顾四周，我发现[更改 UIPickerView 行高](https://stackoverflow.com/questions/6397947/changing-uipickerview-row-height)（这只是第一次设置行高）和[如何通过按钮单击更改 UIPickerView 中的行大小？](https://stackoverflow.com/questions/10331188/how-to-change-the-size-of-row-in-uipickerview-by-button-click)，其中讨论了 rowSizeForComponent 方法，该方法似乎只使用缓存的行高值。

这是尝试更改行高的代码部分，以及测试 reloadAllComponents: 正如@RileyE 所建议的那样

```
NSLog(@"before, scrollviewSpacing is %d", self.mainViewController.IACscrollviewSpacing);
if (0.0 != fromDefaultsScrollviewSpacing) {
    self.mainViewController.IACscrollviewSpacing = (UInt8) round (60.0 - fromDefaultsScrollviewSpacing);
}
NSLog(@"now scrollviewSpacing is %d", self.mainViewController.IACscrollviewSpacing);
NSLog(@"rowsizeforcomponent height is %f", [self.mainViewController.PickIPAddress rowSizeForComponent:1].height);
[self.mainViewController.PickIPAddress reloadAllComponents];
NSLog(@"rowsizeforcomponent height is %f", [self.mainViewController.PickIPAddress rowSizeForComponent:1].height);
[self.mainViewController.PickIPAddress reloadComponent:1];
NSLog(@"rowsizeforcomponent height is %f", [self.mainViewController.PickIPAddress rowSizeForComponent:1].height); 
```

在控制台上给出以下输出：

> 2012-11-29 02:32:14.681 IP 地址计算器 [6404:c07] 之前，scrollviewSpacing 是 39
> 2012-11-29 02:32:18.913 IP 地址计算器 [6404:c07] 现在 scrollviewSpacing 是 22
> 2012-11-29 02:32:20.196 IP 地址计算器[6404:c07] 组件高度为 39.000000 2012-11-29 02:32:28.865 IP 地址计算器[6404:c07] 组件高度为 39.000000 2012-11-29 02:32:30.903 IP地址计算器[6404:c07] rowsizeforcomponent 高度为 39.000000

在 MainViewController（即 UIpickerviewdelegate）中，我有

```
- (CGFloat)pickerView:(UIPickerView *)pickerView rowHeightForComponent:(NSInteger)component {
return self.IACscrollviewSpacing; } 
```

此外，我在这里设置了一个断点，我看到它只在最初设置 UIPickerview 时被调用，并且再也不会被调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:55:15.983

所有委托方法都会在您调用时再次调用并更新`[yourPicker reloadAllComponents];`

查看[UIPickerView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPickerView_Class/Reference/UIPickerView.html)和[UIPickerViewDelegate](http://developer.apple.com/library/ios/#documentation/iPhone/Reference/UIPickerViewDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIPickerViewDataSource)文档。尤其是查看“重新加载视图选择器”部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-22T10:01:43.747

我不确定是否`UIPickerView`可以动态更改行高。

但我确实实现了一个选择器视图名称[`DLPickerView`](https://github.com/danleechina/DLPickerView)。您可以为不同的行返回不同的高度。理论上它还可以在其整个生命周期内改变行高

# jquery - jQuery 滑块不工作 (bxSlider)

> ID：13610844
> 
> 赞同：2
> 
> 时间：2012-11-28T17:20:53.603
> 
> 标签：jquery, html, slider

我似乎无法使 bxSlider 正常工作，也找不到原因。

这是我的代码

```
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Maxime G - Home</title>
<meta name="viewport" content="width=device-width">
<meta name="keywords" content="portfolio ,html, css, c#, wordpress, UK, developer, front-end, back-end, programming, freelancer, freelance, maxime, godrie, maxime godrie, website" />
<link rel="stylesheet" href="css/normalize.min.css">
<link rel="stylesheet" href="css/main.css">
<link rel="stylesheet" href="css/jquery.bxslider.css" />

<script src="/js/vendor/modernizr-2.6.1-respond-1.1.0.min.js"></script>

<script src="/js/slider/jquery.bxslider.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>    
    <script type="text/javascript">
    $(document).ready(function () {
        $('.bxslider').bxSlider();
    });
</script> 
```

```
<section class="sectionCarouselIndex">
     <ul class="bxslider">                                
         <li><img src="img/c2c.jpg" /></li>
         <li><img src="img/dcs-full.jpg" /></li>
         <li><img src="img/eding.jpg" /></li>
         <li><img src="img/karim-full.jpg" /></li>        
         <li><img src="img/waterside-full.jpg" /></li>
         <li><img src="img/chesil-full.jpg" /></li>
         <li><img src="img/enw-full.jpg"/></li>
         <li><img src="img/drl-full.jpg" /></li>   
         <li><img src="img/portal-full.jpg" /></li>
         <li><img src="img/comixology-full.png" /></li>
         <li><img src="img/history-full.jpg" /></li>
         <li><img src="img/parkmap-full.png" /></li>
     </ul>
</section> 
```

这是我在 Firefox 控制台中遇到的错误：

```
ReferenceError: jQuery is not defined

[Break On This Error]   

$(document).ready(function () {

index.html (line 25)

ReferenceError: $ is not defined
[Break On This Error]   

$(document).ready(function () { 
```

如果你想看看它实际上看起来在那里工作，但在我的本地机器上，我无法让这个滑块正常工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T17:23:26.563

将 jquery min 脚本引用放在 bxslider.js 之前

替换这个

```
<script src="/js/slider/jquery.bxslider.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
```

和

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>    
<script src="/js/slider/jquery.bxslider.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T07:45:49.267

```
<script type="text/javascript">
            $(document).ready(function(){
                $('.bxslider').bxSlider({
                        autoControls: true
                    });
            });
</script> 
```

试试这个，因为你没有提供任何方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T05:23:15.937

我刚刚让 bxslider 停止在我正在使用的 Wordpress 主题中工作。Wordpress 3.4.2 使用 jquery1.7.2，Wordpress 3.5 使用 jquery1.8.3。当我将 jquery1.7.2 文件放回那里时，bxslider 再次工作。看起来 jquery 中 1.7.2 和 1.8.0 之间的任何变化都破坏了 bxslider。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-04-27T07:51:41.297

我发现我需要比文档最初允许的更具体，这可能是由于规范的变化我发现这段代码效果更好：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="js/slider/jquery.bxslider.js"></script> 
```

# sql - 数据清洗脚本

> ID：13610846
> 
> 赞同：2
> 
> 时间：2012-11-28T17:20:56.643
> 
> 标签：sql, database, oracle

**列出所有已租用但超过 3 年未归还的工具。删除那些工具**

我有一个包含几个表的数据库。其中一些`RENTAL_ORDERLINE`是`STOCK_TOOL`和`CATALOGUE`。

`RENTAL_ORDERLINE`具有租入和租出工具的日期，并通过`foreign key`.

库存工具通过外键链接到目录（其中包含 Tool_Name）。
我想创建一个数据清理脚本，列出所有已租用但超过 3 年未归还的工具并删除这些工具。我做了一个选择语句，输出要删除的工具，但不能在其中使用删除语句：

```
select rental_orderline.tool_id, catalogue.tool_name
from rental_orderline right outer join stock_tool
on stock_tool.tool_id = rental_orderline.tool_id
right outer join catalogue
on catalogue.catalogue_number = stock_tool.catalogue_number
where rental_orderline.date_out < add_months(sysdate, -36)
and rental_orderline.date_in is null;)
where rental_orderline.date_out < add_months(sysdate, -36)
and rental_orderline.date_in is null; 
```

TOOL_ID TOOL_NAME

7 槌
8 钻
9 锯

我需要删除同一查询中的输出

```
delete from stock_tool 
where tool_id = 7, 8, 9; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:25:33.957

就像是

```
delete from stock_tool where tool_id IN (
    select rental_orderline.tool_id
    from rental_orderline right outer join stock_tool
    on stock_tool.tool_id = rental_orderline.tool_id
    right outer join catalogue
    on catalogue.catalogue_number = stock_tool.catalogue_number
    where rental_orderline.date_out < add_months(sysdate, -36)
    and rental_orderline.date_in is null;)
    where rental_orderline.date_out < add_months(sysdate, -36)
    and rental_orderline.date_in is null
); 
```

?

# jquery - digitalBush jQuery 掩码不适用于 asp.net mvc3 IE9

> ID：13610850
> 
> 赞同：0
> 
> 时间：2012-11-28T17:21:10.113
> 
> 标签：jquery, html-helper, masking

我正在尝试在控制器中指定其他验证的输入框上添加 SIN # 掩码 999-999-999。但是，由于某种原因，它没有触发 - 当我加载页面并单击文本框时，除了没有显示掩码的标准闪烁光标之外什么也没有发生。我正在 IE 9.0.112 中进行测试。

从 DigitalBush 下载插件后，我在 Site.Master 页面上添加了脚本和脚本。

```
<script type = "text/javascript" src="/Scripts/jquery-1.8.3.min.js" />
<script type = "text/javascript" src="/Scripts/jquery.maskedinput-1.3.js" />

<script type = "text/javascript">
$(document).ready(function () {   
$("#Sin").mask("999-999-999");
});
</script> 
```

在加载到 Site.Master 页面内容区域的 PersonCreate 页面上，我定义了一个 HTML 帮助器文本框：

```
<%=Html.TextBoxFor(c => Model.Sin, new {maxlength=11}) 
```

我在运行应用程序后查看了源代码，它呈现为 *<input name="Sin" id="Sin" type="text" maxLength="11" value=""/>*

这些脚本位于 MySolutionName/Scripts/ 文件夹中。我尝试了以下方法：

*   从 jQuery(function ($) {... 更改为 $(document).ready(function()
*   链接到较旧的库：[http ://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js)
*   使用 Url.Content 而不是标准选项来链接 jquery 文件

有人可以告诉我我可能会错过什么吗？提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:45:30.383

事实证明，由于某种原因，当我输入 javascript 文件的名称/路径时，我没有指定正确的路径。解决此问题的最佳方法是简单地将文件从解决方案资源管理器直接拖放到 Site.Master 文件中，其中指定了所有脚本。

# api - Eventbrite 调用单个标签

> ID：13610857
> 
> 赞同：0
> 
> 时间：2012-11-28T17:21:43.830
> 
> 标签：api, tags, eventbrite

我正在查看单独从 Eventbrite api 中提取数据，就目前而言，我有以下内容，它使用 eventListRow 函数提取事件详细信息。

```
$eb_client = new Eventbrite( array('app_key'=> $row['app_key'],
                               'user_key'=> $row['user_key']));                              
 }

 $event = $eb_client->event_get( array('id' => '$row[event_id']') );
 print( Eventbrite::eventListRow($event->event) ); 
```

我已连接到 api，可以使用 eventbrite.php 中的选定函数提取数据。

谁能指出我正确的方向来单独提取每个函数中的数据，例如创建单独的标签的eventListRow。例如，只需拉动 .$evnt->title。

任何帮助表示赞赏。

提前致谢。

非常感谢本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:55:51.597

eventListRow 是一个示例函数，旨在向您展示如何将事件对象转换为 HTML 字符串。您可以在此处阅读源代码： [https ://github.com/ryanjarvinen/eventbrite.php/blob/master/Eventbrite.php#L249](https://github.com/ryanjarvinen/eventbrite.php/blob/master/Eventbrite.php#L249)

我会从您的代码中删除该行，或将其替换为您定义的另一个函数：

```
print($event->event->title); 
```

从 API 中获取事件对象后，您应该能够访问它的属性，如下所示：http: [//developer.eventbrite.com/doc/events/](http://developer.eventbrite.com/doc/events/)

在 PHP 中，`var_dump($evnt);`这是检查 API 响应对象的有用方法。

# javascript - CKEditor 将 html 解析为节点

> ID：13610858
> 
> 赞同：0
> 
> 时间：2012-11-28T17:21:44.363
> 
> 标签：javascript, ckeditor

我正在寻找一种从一些 html 在 CKEDITOR 中创建新节点的方法。

获得一个新的跨度节点我可以做

```
var x = new CKEditor.dom.element('span'); 
```

但我希望 span 节点使用类似于下面 span 的 html 进行初始化

```
<span class='link' isPop='false'>Single quote's and special character!</span> 
```

所以问题是：

CKEDITOR 中是否有任何可用的东西从现有的 html 创建一个新节点，例如

```
var spanHTML = '<span class='link' isPop='false'>Single quote's and special character!</span>';

var newNode = new CKEditor.dom.element('span', spanHTML); 
```

或类似的东西

```
var parser = new CKEDITOR.htmlParser();
parser.node = function( tagName, html )
{
    // do something here
};

var newNode = parse.node('span', spanHTML); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:26:47.670

您可以使用一种`appendHtml`方法来做到这一点：[http ://docs.ckeditor.com/#!/api/CKEDITOR.dom.element-method-appendHtml](http://docs.ckeditor.com/#!/api/CKEDITOR.dom.element-method-appendHtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:50:46.103

有一种`CKEDITOR.dom.element#createFromHtml`方法 - 您可以使用它从给定的 outerHtml 创建一个元素。文档[http://docs.ckeditor.com/#!/api/CKEDITOR.dom.element-static-method-createFromHtml](http://docs.ckeditor.com/#!/api/CKEDITOR.dom.element-static-method-createFromHtml)

```
var el = CKEDITOR.dom.element.createFromHtml( '<span class="a">x</span>' );
el.hasClass( 'a' ); // true 
```

# django - Django 用表单发送多维列表数据

> ID：13610860
> 
> 赞同：0
> 
> 时间：2012-11-28T17:21:58.233
> 
> 标签：django, django-forms

我有一个 Django 项目相当复杂的项目，其中涉及具有各种表单元素和图形界面的页面。

图形界面基本上是一个可扩展的行和列矩形矩阵，可以单独关闭或打开，也可以添加/删除行和列。提交表单时，我需要某种方式来提交图形界面的状态。我得出的结论是，我可以使用多维列表对图形进行建模，例如：

`[[0,1,1,0], [0,1,1,1], [0,1,1,0], [1,1,1,1]]`

这将代表一个 4x4 矩阵，其中一些面板打开和一些关闭。

我的问题是，鉴于我可以使用 jQuery 获取矩阵的当前状态，我应该如何在提交整个表单时将此数据发送到 Django 视图。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:06:53.277

如果您正在执行常规表单发布，则需要将布局数组的值复制到与表单一起提交的输入中，最好是隐藏输入：

```
$('#id_layout_preferences').val(layout_preferences); 
```

其中 id_layout_preferences 是 Django 表单字段：

```
layout_preferences = forms.CharField(widget=forms.HiddenInput) 
```

如果您正在执行 ajax 发布，您可以将数组添加为发布数据的一部分，该数据与所有其他表单值一起在调用中发送。

# c# - 如何使用泛型将 TValue 从字典转换为列表

> ID：13610867
> 
> 赞同：0
> 
> 时间：2012-11-28T17:22:18.920
> 
> 标签：c#, generics, .net-4.0, dictionary

首先，我是泛型的新手，所以我提前为任何错误道歉。

我希望能够以统一的方式比较不同类型的词典。我要比较 2 个可能具有这种类型的字典（为了清楚起见，我想比较 2 个具有相同类型的不同字典）：

```
Dictionary<string, Int32>
Dictionary<Int32, Int32>
Dictionary<string, string>
Dictionary<string, List<Int32>>
Dictionary<Int32, List<Int32>>
Dictionary<Int32, List<ComplexObject>> 
```

使用泛型，我得到了这段代码：

```
 private static bool DictionaryEquals<TKey, TValue>(Dictionary<TKey, TValue> left, Dictionary<TKey, TValue> right)
    {
        var comp = EqualityComparer<TValue>.Default;
        if (left.Count != right.Count)
        {
            return false;
        }
        foreach (var pair in left)
        {
            TValue value;
            if ((typeof(TValue).Namespace == "System.Collections.Generic"))
            {
                TValue rightValue;
                right.TryGetValue(pair.Key, out rightValue);
                return ListEquals<TValue>(new List<TValue>(pair.Key), rightValue);
            }

            if (right.TryGetValue(pair.Key, out value) || (!comp.Equals(pair.Value, value)))
            {
                return false;
            }
        }
        return true;
    }

    private static bool ListEquals<TValue>(List<TValue> left, List<TValue> right)
    {
        if (left.Count != right.Count)
        {
            return false;
        }

        return left.All(right.Contains);
    } 
```

我在调用 ListEquals 方法时遇到问题，我不知道如何传入 pair.key 和 rightValue 参数。

感谢您的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:35:56.457

如果`TValue`是 rightValue 的类型，则 TValue 是 a `List<SomeType>`。但是使用 ListEquals，而不是`List<SomeValue>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:58:08.663

我更改了您的代码，这是有效的，但我不知道如何替换`dynamic`，这不是最佳选择，但可以解决所有铸造问题。

```
 private static bool DictionaryEquals<TKey, TValue>(Dictionary<TKey, TValue> left, Dictionary<TKey, TValue> right)
        {
            var comp = EqualityComparer<TValue>.Default;
            if (left.Count != right.Count)
            {
                return false;
            }

            if (typeof(TValue).IsGenericType && typeof(TValue).GetGenericTypeDefinition() == typeof(List<>))
            {
                return left.All(pair => right.ContainsKey(pair.Key) && ListEquals((dynamic)pair.Value, (dynamic)right[pair.Key]));            
            }
            else
            {
                return left.All(pair => right.ContainsKey(pair.Key) && comp.Equals(pair.Value, right[pair.Key]));
            }
        }

        private static bool ListEquals<TValue>(List<TValue> left, List<TValue> right)
        {
            if (left.Count != right.Count)
            {
                return false;
            }

            return left.All(right.Contains);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T18:05:09.043

这是我解决问题的方法：

```
private static bool DictionaryEquals<TKey, TValue>(Dictionary<TKey, TValue> left, Dictionary<TKey, TValue> right)
{
    var comp = EqualityComparer<TValue>.Default;
    if (left.Count != right.Count)
    {
        return false;
    }

    if (left.Keys.Intersect(right.Keys).Count() != left.Count)
        return false;
        //there is a key in the left dictionary that's not in the right dictionary
        //if there are any keys in the right dictionary not in the left then either 
        //there is one in the left not in the right as well, or the counts won't have 
        //been equal, so we know the two key sets are equal.

    var defaultValueComparer = EqualityComparer<TValue>.Default;

    Func<TValue, TValue, bool> valueComparer;

    if (typeof(TValue) is IEnumerable)
        valueComparer = (first, second) => ((IList)first).SequenceEqual((IList)second);
    else
        valueComparer = (first, second) => defaultValueComparer.Equals(first, second);

    foreach (var key in left.Keys)
    {
        if (!valueComparer(left[key], right[key]))
            return false;
    }

    return true;
}

public static bool SequenceEqual(this IList first, IList second)
{
    if (first.Count != second.Count)
        return false;

    IEnumerator iterator1 = first.GetEnumerator(),
                iterator2 = second.GetEnumerator();

    while (true)
    {
        bool next1 = iterator1.MoveNext();
        bool next2 = iterator2.MoveNext();
        // Sequences aren't of same length. We don't 
        // care which way round. 
        if (next1 != next2)
        {
            return false;
        }
        // Both sequences have finished - done 
        if (!next1)
        {
            return true;
        }
        if (!object.Equals(iterator1.Current, iterator2.Current))
        {
            return false;
        }
    }
} 
```

有几点需要注意：

我没有让这两个集合成为“集合比较”，而是让它们成为序列比较。如果他们真的应该有一个集合比较，那么首先将它们作为列表以外的东西会更有意义。无论如何，如果这是一个重要的更改，您可以将我的`SequenceEqual`方法的名称和实现修改为以下内容：

```
public static bool SetEquals(this IList first, IList second)
{
    if (first.Count != second.Count)
        return false;

    return first.OfType<object>().Intersect(second.OfType<object>())
        .Count() < first.Count;
} 
```

与其确定如何比较 foreach 内部的值，不如在外部进行比较；值的类型在循环中不会改变。确定比较函数将是一次，然后一遍又一遍地调用它。代表们在这方面做得很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T18:31:07.827

这样的事情不应该吗？

```
public class DictionaryEqualityComparer<TKey,TValue> : IEqualityComparer<Dictionary<TKey,TValue>>
{
    public bool Equals( Dictionary<TKey , TValue> x , Dictionary<TKey , TValue> y )
    {
        bool unequal =  x.Count != y.Count
                     || x.Except( y ).Any() // this is probably redundant
                     || y.Except( x ).Any() // but my caffiene titration is off this AM
                     ;
        return !unequal ; 
    }
    public int GetHashCode( Dictionary<TKey , TValue> obj )
    {
        return obj.GetHashCode() ;
    } 
```

有几个原因。最大的一个是相同类型的两个字典`Dictionary<string,Widget>`可以使用不同的相等比较器作为键。在字符串键的实例中，它可能是任何一种库存`StringComparer`实现。这使“平等”的概念复杂化。

# c# - 如何将已排序的整数列表重新排序为批次，以便每个批次的整数彼此尽可能远？

> ID：13610870
> 
> 赞同：2
> 
> 时间：2012-11-28T17:22:25.317
> 
> 标签：c#, algorithm, list, math

我有一个排序`List`的`int`s （按降序排列），我需要重新排序，以便每个批次（例如 20 秒）具有`int`彼此尽可能远的 s。

因此，例如，如果列表包含以下预订：

*   1
*   2
*   3
*   4
*   5
*   6
*   7
*   8
*   9
*   10
*   11
*   12

我要分批处理 4 个，一个好的方法是将预订分成 4 个列表（12 / 3），然后向下移动每个 4 个列表，每个列表取 1 个并附加到新创建的重新排序列表? 因此，新列表将按以下顺序包含预订：

*   1
*   5
*   9
*   2
*   6
*   10
*   3
*   7
*   11
*   4
*   8
*   12

我很高兴理解我的问题所追求的并不容易，因此查看我的代码可能会更容易！我想出了以下方法，并想知道它是否是实现我所追求的最佳/最高效的方法：

```
var bookings = new List<int>();

// <snip>import bookings ints from csv file into bookings list</snip>

bookings = bookings.Distinct().OrderByDescending(x => x).ToList();

int chunkSize = 20;

// get number of chunks/batches
int chunkCount = (int)Math.Ceiling((double)bookings.Count/(double)chunkSize);

// split booking list into number of chunks
// add the ith booking from each chunk into new list
// ToChunks() extension method from http://stackoverflow.com/a/6852288/1578713
var chunkList = bookings.ToChunks(chunkCount).ToList();
var reorderedBookings = new List<int>();
for (int i=0; i<chunkCount; i++)
{
    // last chunk may be smaller than chunkSize hence the check
    reorderedBookings.AddRange(from chunk in chunkList where chunk.Count() > i 
        select chunk.ToList()[i]);
}

bookings = reorderedBookings; 
```

### 背景（如果你真的想知道）

我的问题是我正在处理* a `List`of `int`s （从 csv 文件导入并订购的预订）并行批次（例如 20 个）并且这些预订在列表中越靠近（越连续）越有可能就是会抛出异常（超出我的控制范围）。

这是在同步运行数千个预订（因此不会引发异常）或并行运行 20 多个预订之间进行权衡，并有可能每隔一段时间就引发一次所述异常。我选择了后一种方法，因为它更快，并且任何导致异常的预订都可以在异步任务完成后同步运行。

[*调用几个服务，`int`依次传递每个预订]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:24:40.057

好的，所以它相当简单：

```
public static IEnumerable<IEnumerable<T>> BatchAndSeparate<T>(IList<T> source, int batchSize)
{
    int numBatches = (int)Math.Ceiling(source.Count / (double)batchSize);

    for (int i = 0; i < numBatches; i++)
    {
        var buffer = new List<T>();
        for (int j = i; j < source.Count; j += numBatches)
        {
            buffer.Add(source[j]);
        }
        yield return buffer;
    }
} 
```

一般算法是，对于每个批次，您的索引都以该批次的编号（零索引）开始，并在每次迭代中添加批次数。

它可以像这样使用：

```
var batches = BatchAndSeparate(Enumerable.Range(1, 13).ToList(), 3);

foreach (var batch in batches)
{
    Console.WriteLine(string.Join(" ", batch));
} 
```

这将打印：

```
1 6 11
2 7 12
3 8 13
4 9
5 10
```

当以这种方式显示时，很容易看出它是正确的。顺着每一列往下看，数字加一，然后从最左边的那一列向右移动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:30:07.277

假设 Servy 对你想要的东西是正确的，你可以这样做

```
int i = 0;
var grouped = bookings.OrderBy(x => (i++) % chunkSize); 
```

或者

```
int i = 0;
var grouped = bookings.GroupBy(x => (i++) % chunkSize); 
```

第一个会给你一个单独的列表，第二个会把它分成单独的列表。

# c# - c# 正则表达式

> ID：13610873
> 
> 赞同：0
> 
> 时间：2012-11-28T17:22:33.897
> 
> 标签：c#, regex

我有一个像 -

```
Col.A              Col.B  Col.C  Col.D
--------------------------------------------------------------
* 1  S60-01-GE-44T-AC   SGFM115001195  7520051202   A
  1  S60-PWR-AC         APFM115101302  7520047802   A
  1  S60-PWR-AC         APFM115101245  7520047802   A 
```

或者

```
 Col.A               Col.B  Col.C  Col.D
--------------------------------------------------------------
* 0  S50-01-GE-48T-AC   DL252040175    7590005605   B
  0  S50-PWR-AC         N/A            N/A          N/A
  0  S50-FAN            N/A            N/A          N/A 
```

对于这些输出，正则表达式 -

```
(?:\*)?\s+(?<unitno>\d+)\s+\S+-\d+-(?:GE|TE)?-?(?:\d+(?:F|T))-?(?:(?:AC)|V)?\s+(?<serial>\S+)\s+\S+\s+\S+\s+\n 
```

可以很好地捕获 A 列和 B 列。但最近我得到了一种新的输出 -

```
 Col.A               Col.B  Col.C  Col.D  
---------------------------------------------------------
* 0  S4810-01-64F       HADL120620060  7590009602   A        
  0  S4810-PWR-AC       H6DL120620060  7590008502   A          
  0  S4810-FAN          N/A            N/A          N/A         
  0  S4810-FAN          N/A            N/A          N/A 
```

如您所见，这些输出中缺少模式**“GE|TE”**和**“AC|V” 。**如何相应地更改我的正则表达式以保持向后兼容性。

编辑：

您看到的输出是一个完整的字符串，并且由于一些操作限制，我不能在这里使用除正则表达式之外的任何其他概念来获得我想要的值。我知道在这里使用 split 是理想的，但我不能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:29:02.430

正则表达式在这里似乎不是正确的方法。使用定位方法

```
string s = "* 0  S4810-01-64F       HADL120620060  7590009602   A";

bool withStar = s[0] == '*';
string nr = s.Substring(2, 2).Trim();
string colA = s.Substring(5, 18).TrimEnd();
string colB = s.Substring(24, 14).TrimEnd();
... 
```

* * *

**更新**

我想要（或必须）坚持使用正则表达式，测试空格而不是值。当然，这仅在值从不包含空格时才有效。

```
string[] result = Regex.Split(s, "\s+"); 
```

* * *

当然，您也可以搜索非空格`\S`而不是`\s`.

```
MatchCollection matches = Regex.Matches(s, "\S+"); 
```

或排除星星

```
(?:\*)?[^*\s]+ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T17:29:20.013

您最好使用 String.Split() 将列值分解为单独的字符串然后处理它们，而不是使用巨大的不可读的正则表达式。

```
foreach (string line in lines) {
    string[] colunnValues = line.Split((char[])null, StringSplitOptions.RemoveEmptyEntries);
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T17:25:18.390

您的正则表达式甚至不需要`GE`or `TE`。`?`之后看到了`(?:GE|TE)`吗？

这意味着前一个组或符号是可选的。

`AC`和`V`部分也是如此

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T17:33:07.323

我不会使用正则表达式来解析这些报告。

相反，在去除标题后将它们视为固定列宽报告。

我会做类似的事情（例如，这是冷的，甚至没有测试语法）：

```
 // Leaving off all public/private/error detection stuff
   class ColumnDef  
   {
        string Name { set; get; } 
        int FirstCol { set; get; }
        int LastCol { set; get; }
   }

   ColumnDef[] report = new ColumnDef[] 
   {
         { Name = "ColA",
           FirstCol = 0,
           LastCol = 2
         },
         /// ... and so on for each column
   }

   IDictionary<string, string> ParseDataLine(string line) 
   {
       var dummy = new Dictionary<string, string>();
       foreach (var c in report) 
       {
          dummy[c.Name] = line.Substring(c.FirstCol, c.LastCol).Trim();
       }
   } 
```

这是一个通用 ETL（提取、转换和加载）问题的示例——特别是提取阶段。

在使用 之前，您必须去掉页眉和页脚行`ParseDataLine`，我不确定是否有足够的信息来执行此操作。根据您的帖子所说，任何空白行或不以空格或 a 开头的`*`行都是要忽略的页眉/页脚行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T17:55:56.917

为什么不尝试这样的事情`(?:\*)?\s+(?<unitno>\d+)\s+\S+\s+(?<serial>\S+)\s+\S+\s+\S+(?:\s+)?\n`

这是基于您提供的正则表达式构建的，并且由于尾随`\n`提供的输入将需要以回车结束。

# php - 时区偏移问题

> ID：13610879
> 
> 赞同：0
> 
> 时间：2012-11-28T17:23:23.207
> 
> 标签：php

正在开发一个用户以“11/28/2012 11:34 am”格式输入日期时间的模块。

然后我使用 strtotime 将其转换为时间戳并将其保存到我的数据库中。

然后，我使用以下日期（DateTime，'DM jS g:i A'）在我的模板中向用户显示它。

问题是与创建事件的用户不在同一时区的用户没有更新正确的时间以反映他们的时区。

我可以访问用户发布和用户查看的时区偏移量。

我的问题是我应该如何补偿时区差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:32:11.997

将字符串转换为实际时区时，使用提交值的用户的时区覆盖服务器时区：http: [//us3.php.net/manual/en/function.date-default-timezone-set.php](http://us3.php.net/manual/en/function.date-default-timezone-set.php)

稍后检索它时，使用相同的函数将服务器时区覆盖为当前用户的时区（适合用户当前显示日期时间的时区）。

还要确保将其正确存储在数据库中：最好在 PHP 中使用 Unix 时间戳，在数据库中使用 TIMESTAMP 列，在保存到数据库时使用 FROM_UNIXTIME() 数据库函数，在从数据库中检索时使用 UNIX_TIMESTAMP()（所有这些都对 MySql RDBMS 有效，请检查您自己的 DBMS（如果不同）。

# ruby-on-rails - 如何在 Tire 中设置 Elastic Search 的 minimum_number_should_match？

> ID：13610889
> 
> 赞同：0
> 
> 时间：2012-11-28T17:24:09.120
> 
> 标签：ruby-on-rails, elasticsearch, tire

我在布尔查询中设置 minimum_number_should_match 时遇到了一些麻烦。我想知道如何设置它。另外，默认是什么？

```
options = {:minimum_number_should_match => 1}

result = tire.search(load: true, page: params[:page], per_page: 20) do 
  query do 
    boolean do
      must {string squery, default_operator: "OR"} if squery.present?
      must {term :aasm_state, aasm_state }
      must {text :zipcode, zipcode} unless zipcode.nil?
      should {text :city, city} if city
      should {term :phone_store, true}
      should {term :email_store, true}
    end
  end 

  sort {by :created_at, 'desc' } if squery.blank?
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:08:43.073

您需要将这些选项传递给`boolean`方法，请参阅[https://github.com/karmi/tire/issues/235#issuecomment-3846598](https://github.com/karmi/tire/issues/235#issuecomment-3846598)。

# java - 当输入值jtextfield然后点击按钮java时如何生成ireport

> ID：13610890
> 
> 赞同：1
> 
> 时间：2012-11-28T17:24:09.950
> 
> 标签：java, jasper-reports

首先，我是使用 jasper ireport 的初学者，当用户在 jtextfield 中输入一个值，然后按下按钮时，我试图生成一个 jasper ireport，它应该为发票生成一份 PDF 报告。这是我第一次将 java netbeans 与 jasper ireport 一起使用。

那么，当用户将其值放入 jtextfield 然后按下按钮时，如何生成 ireport，然后它应该使用 java netbeans 生成 PDF 格式的发票报告？

我在 ireport 4.7.1 中创建了一张发票，并为发票的打印按钮发布了下面的代码，但是当我点击该按钮时，它会加载位于我的项目中的所有发票。

```
String invreport = "C:\\Users\\Silent Heart\\Documents\\NetBeansProjects\\SIS\\src\\reports\\invoice.jrxml";
            JasperReport jpr = JasperCompileManager.compileReport(invreport);
            JasperPrint jpp = JasperFillManager.fillReport(jpr, null,conn);
            JasperViewer.viewReport(jpp); 
```

这是正在发生的事情的快照：

[![图片](../Images/e8b970e7b785c70b23dea5a394f373ee.png)](https://i.stack.imgur.com/Xq39e.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:48:17.940

我解决了我的问题。

首先`" testid "`在 jasper ireport 参数区域中添加参数，然后在 jasper ireport 中的数据库查询中添加此参数，例如

```
"select * from test where id = $P{testid}" 
```

然后为按钮添加以下代码：

```
//              parameter
                    String para = txt1.getText();

                    //load report location
                    FileInputStream fis = new FileInputStream("\\src\\test\\report1.jrxml");
                    BufferedInputStream bufferedInputStream = new BufferedInputStream(fis);

                    //set parameters
                    Map map = new HashMap();
                    map.put("testid", para);

                    //compile report
                    JasperReport jasperReport = (JasperReport) JasperCompileManager.compileReport(bufferedInputStream);
                    JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, map, conn);

                    //view report to UI
                        JasperViewer.viewReport(jasperPrint, false); 
```

供 PDF 使用`" JasperExportManager "`

我希望它对你有用。

谢谢..

# javascript - 从现有的谷歌图表 DataTable 对象创建透视 DataView

> ID：13610893
> 
> 赞同：4
> 
> 时间：2012-11-28T17:24:23.583
> 
> 标签：javascript, google-visualization

我有一个 DataTable 包含：

```
id,day,proj,col1,col2,subtype,time
1,Nov 28,projectA,1050,880,foo,17481
2,Nov 28,projectA,1050,880,bar,16098
3,Nov 28,projectA,1080,40,foo,13509
4,Nov 28,projectA,1080,40,bar,9031 
```

但想创建一个新的旋转 DataView，其中包含：

```
id,day,proj,col1,col2,foo,bar
1,Nov 28,projectA,1050,880,17481,16098
3,Nov 28,projectA,1080,40,13509,9031 
```

然后我想为其创建一个堆叠的柱形图。

查询语言中有一个 pivot 子句，但是如何对 DataTable 中已经存在的数据进行透视？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T06:17:09.027

手动。

你可以在 asgallant 的 jsfiddle 上看到[这个例子。](http://jsfiddle.net/asgallant/HkjDe/)这使用 dataView 来完成任务。

```
google.load('visualization', '1', {packages: ['table']});
google.setOnLoadCallback(drawChart);

function drawChart() {
    var data = new google.visualization.DataTable();
    data.addColumn('number', 'A');
    data.addColumn('string', 'B');
    data.addColumn('number', 'C');
    data.addRows([
        [1, 'foo', 6],
        [2, 'foo', 2],
        [3, 'foo', 1],
        [4, 'foo', 3],
        [1, 'bar', 7],
        [2, 'bar', 3],
        [1, 'baz', 8],
        [2, 'baz', 4]
    ]);

    var table1 = new google.visualization.Table(document.getElementById('table1'));
    table1.draw(data, {});

    /* manually pivot the data table
     * set column A as the first column in the view, 
     * then we have to separate out the C values into their own columns
     * according to the value of B, using a DataView with calculated columns
     */
    var view = new google.visualization.DataView(data);
    view.setColumns([0, {
        type: 'number',
        label: 'foo',
        calc: function (dt, row) {
            // return values of C only for the rows where B = "foo"
            return (dt.getValue(row, 1) == 'foo') ? dt.getValue(row, 2) : null;
        }
    }, {
        type: 'number',
        label: 'bar',
        calc: function (dt, row) {
            // return values of C only for the rows where B = "bar"
            return (dt.getValue(row, 1) == 'bar') ? dt.getValue(row, 2) : null;
        }
    }, {
        type: 'number',
        label: 'baz',
        calc: function (dt, row) {
            // return values of C only for the rows where B = "baz"
            return (dt.getValue(row, 1) == 'baz') ? dt.getValue(row, 2) : null;
        }
    }]);

    // next, we group the view on column A, which gets us the pivoted data
    var pivotedData = google.visualization.data.group(view, [0], [{
        column: 1,
        type: 'number',
        label: view.getColumnLabel(1),
        aggregation: google.visualization.data.sum
    }, {
        column: 2,
        type: 'number',
        label: view.getColumnLabel(2),
        aggregation: google.visualization.data.sum
    }, {
        column: 3,
        type: 'number',
        label: view.getColumnLabel(3),
        aggregation: google.visualization.data.sum
    }]);

    var table2 = new google.visualization.Table(document.getElementById('table2'));
    table2.draw(pivotedData, {});
} 
```

或者，您可以手动进行。

```
 var data = new google.visualization.DataTable();

      data.addColumn('string', 'First Column Title');

      var baseline = chartData.getValue(chartData.getNumberOfRows() - 1, 15);

      for (var i = 0; i < chartData.getNumberOfRows(); i++) {
        data.addColumn('number', chartData.getFormattedValue(i, 0));
      };

      for (var j = 0; j < chartData.getNumberOfColumns() - 2; j++) {
        data.addRow();
        data.setValue(j, 0, chartData.getColumnLabel(j + 1));
        for (var i = 0; i < chartData.getNumberOfRows(); i++) {
          data.setValue(j, i + 1, chartData.getValue(i, j+1));
        };
      }; 
```

# python - Django get_or_create，怎么说commit=False

> ID：13610896
> 
> 赞同：11
> 
> 时间：2012-11-28T17:24:37.133
> 
> 标签：python, django

假设我有这个模型：

```
class SocialGroupMembers(models.Model):
    social_group = models.ForeignKey(SocialGroup, related_name="members")
    profile = models.ForeignKey(Profile)
    date_joined = models.DateTimeField(auto_now_add=True)
    added_by = models.ForeignKey(User)
    approved = models.BooleanField(default=False) 
```

如果我做：

```
obj, created = SocialGroupMembers.objects.get_or_create(
        social_group=social_group, profile=profile)
    # this will give integrity error that added_by can not be null 
```

我不想`added_by`在过滤条件中包含字段。我想`added_by`稍后保存字段。想`commit=False`告诉 Django 我计划稍后添加更多字段：

```
obj, created = SocialGroupMembers.objects.get_or_create(commit=False,
        social_group=social_group, profile=profile)
if created:
    obj.added_by = request.user
    obj.save()
else:
    #do something 
```

我知道有其他选择，例如我可以使用`ObjectDoesNotExist`. 但是有什么方法可以实现所需的功能`get_or_create`吗？

我想排除该`added_by`字段的原因是因为可能是另一个用户已经添加了另一个用户配置文件。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-28T18:14:54.870

`defaults`您可以传递一个参数来`get_or_create`为过滤中未使用的新创建的对象填充此数据：

```
defaults = {'added_by': request.user}
obj, created = SocialGroupMembers.objects.get_or_create(
        social_group=social_group, profile=profile, defaults=defaults) 
```

[https://docs.djangoproject.com/en/1.4/ref/models/querysets/#get-or-create](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#get-or-create)

# regex - 关于交替部分的正则表达式

> ID：13610898
> 
> 赞同：0
> 
> 时间：2012-11-28T17:24:43.913
> 
> 标签：regex

我有一个日志条目，我只想用正则表达式提取 SQL 语句。SQL 语句可以是任何 DDL 或 DML 语句，并且可能有几行。参数部分可能会丢失，并且“在 xx 记号中获得 xx 结果”也可能会丢失。但是 ":SQLEnd:" 行总是存在的。这里有些例子

```
SELECT col1, col2 FROM table WHERE col1 = :id and col2= :num ORDER BY ORDERID ASC

Params:
:id -> 60081
:num-> 1

Got 2 Results in 0 Ticks
:SQLEnd: 
```

或者：

```
SELECT col1, col2 FROM table WHERE col1 = :id and col2= :num ORDER BY ORDERID ASC

Got 2 Results in 0 Ticks
:SQLEnd: 
```

或者：

```
SELECT col1, col2 FROM table WHERE col1 = :id and col2= :num ORDER BY ORDERID ASC

Params:
:id -> 60081
:num-> 1

:SQLEnd: 
```

或者：

```
SELECT col1, col2 FROM table WHERE col1 = :id and col2= :num ORDER BY ORDERID ASC

:SQLEnd: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:42:22.907

与您的示例相匹配的基本正则表达式是：

```
SELECT .+?:SQLEnd: 
```

您需要确保`.`将匹配换行符。在 PHP 中，这将是：

```
/SELECT .+?:SQLEnd:/s 
```

但是，这个正则表达式不是很健壮，因为它在与某些 SQL 查询（例如：包含一个或多个子查询的`SELECT`查询）一起使用时可能会中断。并且您想匹配“任何 DDL 或 DML 语句”，这对于正则表达式来说非常复杂。正如马克所说，使用解析器而不是正则表达式会更好。

**编辑**

在 C#.net 中，您将使用：

```
new Regex("SELECT .+?:SQLEnd:", RegexOptions.Singleline); 
```

的文档`RegexOptions.Singleline`在[这里](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regexoptions.aspx)：

> 指定单行模式。更改点 (.) 的含义，使其匹配每个字符（而不是除 \n 之外的每个字符）。

您还可以使用[此内联选项](http://msdn.microsoft.com/en-us/library/yd1hzczs.aspx#Singleline)来启用单行模式：

```
new Regex("(?s)SELECT .+?:SQLEnd:"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:58:53.797

正如 Mark Thalman 在评论中提到的，您可能希望为此研究一个好的解析器，有多种可用的语言可以涵盖您应该使用的任何语言。

[http://code.google.com/p/python-sqlparse/](http://code.google.com/p/python-sqlparse/)（例如）是 Python SQL 解析器的一个很好的例子

要回答您的问题，我将使用正则表达式：

```
'(s?)(m?)(.*?^:SQLEnd:)' 
```

这将匹配任何 DDL/DML 语句，但它会粗略地匹配（解释如下）。

开头的标志表示 DOTALL（点包含所有字符）和 MULTILINE（$ 和 ^ 表示行的结尾和开头）。大多数语言都有内置的标志，您可以使用它们实现的任何正则表达式类来激活这些标志。（即 Python`re.DOTALL`和`re.MULTILINE`来自`import re`.

请注意，这个正则表达式只会获取 ":SQLEnd:" 实例之间的表达式 - 所以

```
SELECT col1, col2 FROM table WHERE col1 = :id and col2= :num ORDER BY ORDERID ASC

Params:
:id -> 60081
:num-> 1

Got 2 Results in 0 Ticks
:SQLEnd: 
```

将是一组并且

```
or:

SELECT col1, col2 FROM table WHERE col1 = :id and col2= :num ORDER BY ORDERID ASC

Got 2 Results in 0 Ticks
:SQLEnd: 
```

将是另一个。这是粗略的（但我能想到的唯一方法可以轻松解释任何 DDL/DML 语句）但希望对您有用。如果这不是一个选项，我强烈推荐使用 SQL 解析器。

# android - 重新启动服务时如何存储对象的状态

> ID：13610899
> 
> 赞同：0
> 
> 时间：2012-11-28T17:24:43.537
> 
> 标签：android, multithreading, service, android-lifecycle

我的应用程序启动了一个产生线程的服务。该线程每 5 秒进行一次轮询。Android 可以根据需要重新启动我的服务。我正在尝试存储轮询线程，以便在重新启动服务时可以使用现有的轮询线程。

这是 onStartCommand() 方法：

```
public int onStartCommand(Intent intent, int flags, int startId)
{
    if(intent == null)
    {
        Log.d("screener", "onStartCommand was called with null intent. System must've killed and restarted service...?");
    }
    else
    {
        processToMonitor = intent.getStringExtra("com.screener.processToMonitor");
        Log.d("screener", "onStartCommand was called");

    }

    if(pollThread == null)
    {
        poller = new Poller(this, wakeLock, processToMonitor);
        pollThread = new Thread(poller);
        pollThread.start();
        Log.d("screenon", "polling thread was not already running. Going to start it");
    }
    else
    {
        Log.d("screener", "polling thread has already been running. Not going to restart it");
    }

    return START_STICKY;
} 
```

看来，当传递的 Intent 对象为 null 时，这表示服务已重新启动，因此我可以成功检测到这种情况。我要存储的对象是轮询器（或封装轮询器的 pollerThread）。我已经尝试将其设为静态但不起作用。我还覆盖了 Application 并在其中存储了一个实例，但它仍然没有持久化。

那么，当服务重新启动时，我如何存储我的对象呢？或者，我是否接受 Android 清理所有内容并简单地重新启动线程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:40:02.190

为什么要存储线程？让它“死”，一旦你的服务重新启动，一个新的轮询线程将启动。

# grails - Grails 包括可搜索查询构建器中的空值检查

> ID：13610900
> 
> 赞同：3
> 
> 时间：2012-11-28T17:24:45.830
> 
> 标签：grails, query-builder, grails-searchable

我们正在使用 grails 2.1.1 和可搜索的 - 0.6.3

我们正在尝试使用`query builder`. 我们的问题是我们无法检查字段中包含 null 的元组。我们浏览了很多文档，但找不到任何解决方案。

有没有办法`null value check`在`grails searchable plugin`.

使用

```
mustNot(term('columnName',null)) 
```

或者

```
mustNot(term('columnName','null')) 
```

不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-05T18:33:52.133

尝试这个：

mustNot(gt("列名", 0))

# cordova - Phonegap+iscrollview = 滚动错误

> ID：13610912
> 
> 赞同：1
> 
> 时间：2012-11-28T17:25:37.423
> 
> 标签：cordova, jquery-mobile, scrollview

我需要在 jQuery Mobile 和 PhoneGap 中使用 scrowview 创建列表的帮助。我正在使用 iscrollview 并尝试采取措施来调整我的应用程序。在滚动视图附带的示例中，使用带有 data-iscroll 和列表 (ol) 的 div，仅此页面。我试图在正文中放入一个日期滚动 div，并在 div 中放入一个列表，在她获得另一个列表而不滚动之后。但是滚动这个没有正确回答的卷轴会“卡在”一个位置。这是我的代码：

```
 <!DOCTYPE html>
<html>
    <head>
    <title>Page 1</title>
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;"
        charset="utf-8" />

    <!--- STYLE --->
    <link rel="stylesheet"
        href="style/jquery.mobile-1.2.0.min.css" />
    <link rel="stylesheet" href="style/jquery.mobile.iscrollview.css" />
    <link rel="stylesheet" href="style/jquery.mobile.iscrollview-pull.css" />
    <link rel="stylesheet" href="style/smart_mobile_theme.css" />

    <!--- JS --->
    <script src="js/jquery-1.8.2.min.js" type="text/javascript"></script>
    <script src="js/jquery.mobile-1.2.0.min.js" type="text/javascript"></script>
    <script src="js/index.js" type="text/javascript"></script>
    <script src="js/iscroll.js" type="text/javascript"></script>
    <script src="js/jquery.mobile.iscrollview.js" type="text/javascript"></script>
    <script src="js/cordova-2.2.0.js" type="text/javascript"></script>

    </head>
    <body>

        <div data-role="page" id="index" data-theme="a">
            <div data-role="header" data-theme="a" data-position="fixed"
                    data-tap-toggle="false">
            </div>

            <div class="content">

                <div id="listFilter"
                    style="width: 100%; margin-top: 10%; padding: 5px; margin-bottom: 5%"
                    data-iscroll class="iscroll-wrapper">
                    <div class="iscroll-scroller">
                        <div class="iscroll-content">

                            <ul id="listVeiculos" data-role="listview" data-theme="d"
                                data-filter-placeholder="Vehicle" data-filter="true"
                                data-divider-theme="d">
                                <li data-role="list-divider">
                                    <div class="ui-grid-c">

                                        <div class="ui-block-a">aaaa</div>

                                        <div class="ui-block-b">bbbb</div>

                                        <div class="ui-block-c">cccc</div>

                                        <div class="ui-block-d">dddd</div>
                                    </div>
                                </li>

                                <!-- VISUAL TEST -->
                                <li>
                                    <div class="ui-grid-c">

                                        <div class="ui-block-a">Frota 001</div>

                                        <div class="ui-block-b">ABC 0123</div>

                                        <div class="ui-block-c">R124</div>

                                        <div class="ui-block-d">SCANNIA</div>
                                    </div>
                                </li>

                                <li>
                                    <div class="ui-grid-c">

                                        <div class="ui-block-a">Frota 002</div>

                                        <div class="ui-block-b">DEF 4567</div>

                                        <div class="ui-block-c">FH12</div>

                                        <div class="ui-block-d">VOLVO</div>
                                    </div>
                                </li>

                                <li>
                                    <div class="ui-grid-c">

                                        <div class="ui-block-a">Frota 003</div>

                                        <div class="ui-block-b">GHI 8901</div>

                                        <div class="ui-block-c">1113</div>

                                        <div class="ui-block-d">MERCEDES-BENZ</div>
                                    </div>
                                </li>

                                <li>
                                    <div class="ui-grid-c">

                                        <div class="ui-block-a">Frota 004</div>

                                        <div class="ui-block-b">JKL 2345</div>

                                        <div class="ui-block-c">CARGO</div>

                                        <div class="ui-block-d">FORD</div>
                                    </div>
                                </li>

                                <!-- TESTE SCROLL -->
                                <li>
                                    <div class="ui-grid-d">

                                        <div class="ui-block-a">Frota 005</div>

                                        <div class="ui-block-b">MNO 2222</div>

                                        <div class="ui-block-c">CARGO</div>

                                        <div class="ui-block-d">FORD</div>
                                    </div>
                                </li>

                                <li>
                                    <div class="ui-grid-e">

                                        <div class="ui-block-a">Frota 006</div>

                                        <div class="ui-block-b">MNO 3333</div>

                                        <div class="ui-block-c">TEST</div>

                                        <div class="ui-block-d">TEST</div>
                                    </div>
                                </li>

                            </ul>

                        </div>
                    </div>
                </div>
            </div>

            <div class="content_div" style="margin-top: 5%;" data-position="fixed"
                data-tap-toggle="false">

                <div id="listActions">
                    <ul data-role="listview" data-inset="true"
                        style="margin-top: 5%; border: 0px" data-theme="d"
                        data-dividertheme="d">
                        <li data-role="list-divider">1-xxxxxx</li>
                        <li data-role="text">2-xxxxxx</li>
                        <li data-role="text">3-xxxxxx</li>
                        <li data-role="text">4-xxxxxx</li>
                        <li data-role="text">5-xxxxxx</li>
                        <li data-role="text">6-xxxxxx</li>
                        <li data-role="text">7-xxxxxx</li>
                    </ul>
                </div>

            </div>

        </div>

</body>
</html> 
```

甚至我的清单也必须有一个过滤器。通过添加此过滤器，通过关注搜索框，listAction（具有滚动的列表之后的列表）在带有滚动的列表上并过滤它，因为 data-position = "fixed" date-tap-toggle = "错误的”。

谢谢！

# jquery - 创建简单的插件，我的第一个插件遇到了一个错误

> ID：13610913
> 
> 赞同：0
> 
> 时间：2012-11-28T17:25:42.027
> 
> 标签：jquery, jquery-plugins, syntax

[插件工作的 JS Fiddle](http://jsfiddle.net/KmjpV/2/)

数值（ST，RD，TH）的收缩插件。

我一直在玩创建自己的插件，目前我刚刚习惯了语法等，这只是我在玩我今天需要并找到的脚本。

好的 - 我的插件应该在任何数字的末尾添加 th、st、rd 等，并用 span.num 包裹它，问题是我每次都需要调用插件的每个数字？

所以我有两个数字，我需要给它们两个唯一的类名，然后调用我的插件（见小提琴）

**我的问题**：是否可以多次只使用一个类名，并为每个类名返回不同的结果？

我提前感谢任何回复和所有为我今天的英语道歉 - 脑筋急转弯！

```
 $(document).ready(function(){
        $(".num1").simpleContraction();
        $(".num2").simpleContraction();
    });

    (function( $ ){
        $.fn.simpleContraction = function() {

          var num = this.text();
          var len = num.length, last_char = num.charAt(len - 1), abbrev

            if (len == 2 && num.charAt(0) == '1') {
                abbrev = 'th'
            } else {
                if (last_char == '1') {
                    abbrev = 'st'
                } else if (last_char == '2') {
                    abbrev = 'nd'
                } else if (last_char == '3') {
                    abbrev = 'rd'
                } else {
                    abbrev = 'th'
                }
            }

            return this.html(num+abbrev);
        };
    })( jQuery ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:28:06.847

您需要`this.each()`在代码周围包裹一个块，以便依次处理 jQuery 集合中的每个元素：

```
$.fn.simpleContraction = function() {
    return this.each(function() { 
        // NB: "this" is now a DOM element - wrap if required
        var $this = $(this);
        ...
    });
} 
```

也就是说，我实际上不会把它写成一个真正的插件——如果调用错误的元素，它会产生非常糟糕的副作用。

相反，您可以利用`.text`可以传递一个函数的事实，该函数将原始文本从元素中传递出来，并将其替换为该函数的返回值：

```
$.simpleContraction = function(index, text) {
    // parse "text" etc
    ... 
    return num + abbrev;
}

// call on required elements
$('span.num').text($.simpleContraction); 
```

这种方法的优点在于它将 DOM 操作与字符串操作分开，并为您提供了一个可用于任何字符串变量的函数，而不仅仅是存储在 DOM 中的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:29:42.153

您只需要遍历调用插件的每个项目：

```
$.fn.plopPlugin = function(){
    return this.each(function(){
        // do your stuff on a single item
        // no need to return antyhing from within this function
        // unless you want to continue (return true)
        // or break (return false)
    });
}; 
```

所以... [http://jsfiddle.net/KmjpV/3/](http://jsfiddle.net/KmjpV/3/)

```
(function( $ ){
    $.fn.plopPlugin = function() {
      return this.each(function(){
        var num = $(this).text();
        var len = num.length, last_char = num.charAt(len - 1), abbrev

        if (len == 2 && num.charAt(0) == '1') {
            abbrev = 'th'
        } else {
            if (last_char == '1') {
                abbrev = 'st'
            } else if (last_char == '2') {
                abbrev = 'nd'
            } else if (last_char == '3') {
                abbrev = 'rd'
            } else {
                abbrev = 'th'
            }
        }
        alert(num+abbrev)
        $(this).html(num+abbrev);
      });
    };
})( jQuery ); 
```

# svg - 使用 angularJS 创建 svg 元素

> ID：13610915
> 
> 赞同：14
> 
> 时间：2012-11-28T17:25:51.167
> 
> 标签：svg, angularjs

我正在尝试创建一个带角度的 svg 元素。目前我可以执行 ng-repeat 但是当我尝试为我的属性分配值时出现错误。

```
<g ng-repeat="cell in row">
    <rect x="{{cell.node.x}}" y="{{cell.node.y}}"></rect>
    <text x="10" y="10">{{cell.node.name}}</text>
</g> 
```

足够有趣的 cell.node.name 确实可以工作并很好地显示名称，但是 cell.node.x 和 cell.node.y，因此给我以下错误错误：属性 x="cell.node.x" 的值无效错误：属性 y="cell.node.y" 的值无效有什么想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-10-10T16:41:18.133

较新版本的 Angular 具有 ngAttr 属性绑定，这应该避免在 Angular 启动之前浏览器验证时导致的错误。

示例（来自[Angular 文档](http://docs.angularjs.org/guide/directive)）：

```
<svg>
  <circle ng-attr-cx="{{cx}}"></circle>
</svg> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T18:42:13.500

好吧，它正在工作，[这是一个 plunk](http://plnkr.co/edit/SCHnPz)，但是您收到该错误是因为浏览器在呈现 SVG 之前正在对其进行验证，并且在验证时，x 和 y 等于“{{cell.node.x} }”和“{{cell.node.y}}”。一旦角度更新视图，它确实会将矩形放在它们应该在的位置。

不过，我注意到的一件事是，您缺少矩形上的`width`and属性，**这将导致它们不显示。**`height`

 **没有很多好的方法来抑制这个错误。我想您可以制作一个自定义指令，直到它们被 $compiled 之后才呈现 SVG 元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T15:03:58.767

作为 blesh 提示：为导致问题的属性制作自定义指令会阻止 Chrome 中的错误。github上有[这个问题](https://github.com/angular/angular.js/issues/1050#issuecomment-9650293 "第 105 期")的解决方案。**

# oracle - Oracle，无效标识符错误

> ID：13610919
> 
> 赞同：0
> 
> 时间：2012-11-28T17:25:59.777
> 
> 标签：oracle, select, oracle11g, subquery

我有这个查询应该：

> 创建一个列表，在库存表中标识每个选项可用的颜色数量的不同项目

但我收到一条错误消息：

> 命令行错误：167 列：66 错误报告：SQL 错误：ORA-00904：“INV”。“ITEM_ID”：无效标识符 00904。00000 -“%s：无效标识符”

```
SELECT inv.inv_id, 
item1.item_id, 
(SELECT COUNT(*) 
FROM (SELECT DISTINCT i.color FROM inventory i WHERE i.item_id = inv.item_id))
FROM inventory inv 
INNER JOIN item item1 
ON item1.item_id = inv.item_id
GROUP BY inv.inv_id, item1.item_id; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:29:45.927

听起来你只是想要

```
SELECT inv.inv_id,
       item1.item_id,
       COUNT( distinct inv.color )
  FROM inventory inv
       JOIN item item1 ON (item1.item_id = inv.item_id)
 GROUP BY inv.inv_id, item1.item_id 
```

似乎没有任何理由`inventory`在子查询中再次点击该表。

# iphone - UITableView 的多个细节

> ID：13610920
> 
> 赞同：0
> 
> 时间：2012-11-28T17:26:05.813
> 
> 标签：iphone, objective-c, xcode

我有一个简单的问题。如何设置具有多个详细信息的 UITableView。我有 plist，我在其中存储所有详细信息。这只是我为一个细节所做的。`cell.textLabel.text = [[self.array objectAtIndex:indexPath.row] objectForKey:@"name"];`

如果我想要关于我的手机的 2 个详细信息该怎么办？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:34:15.743

首先，您需要设置所需的单元格类型，如果您想要标题和详细信息，您可以这样做：

```
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (!cell) cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier]; 
```

然后设置标题和详细信息标签，只需

```
[cell textLabel].text = @"some title"
[cell detailTextLabel].text = @"some detail text" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:32:59.987

如果您对使用提供的样式之一（从情节提要设置）不满意，`cell.detailTextLabel`那么一种选择是创建自定义`UITableViewCell`.

您可以创建一个 xib 并将一个单元格拖放到其中并从那里自定义它，或者如果您只使用一个表格，则使用原型单元格并直接在您的表格中自定义它可能会更容易。关键部分是创建一个新类来支持您的单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T17:31:51.970

您需要为单元格设置样式

[查看本指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewStyles/TableViewCharacteristics.html)

# jquery - 有没有办法在中途显示/隐藏

> ID：13610925
> 
> 赞同：1
> 
> 时间：2012-11-28T17:26:30.213
> 
> 标签：jquery, toggle

我想知道是否有办法使用 jquery 部分显示/隐藏。

我们的团队制作了[这些页面](http://housing.ucsc.edu/guide/eight/) ，这些页面有一个背景图像，然后是一个 div 中的文本。我希望 div 部分滑动到侧面，以便查看者可以看到整个图像。主要的是我仍然希望文本能够回来，这样他们仍然可以阅读.. 是这样吗？我让 div 一直隐藏，但不是部分隐藏（比如 10px）

```
$("#welcome").click(function () {
      $(this).hide("slide", { direction: "right" }, 1000);
}); 
```

[http://jsfiddle.net/BeccaAlley/qBnLk/](http://jsfiddle.net/BeccaAlley/qBnLk/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:56:12.027

根据您的网站，我相信最简单的解决方案是添加`overflow:hidden`到图片容器（`#welcomepicture`），然后为文本 div 的左边距设置动画（`#welcome`）。

```
$("#welcome").toggle("click", 
    function() {
        var left = $(this).outerWidth() - 10 + "px";

        $(this).animate({ "margin-left": "+=" + left }, 500);
    },
    function() {
        var left = $(this).outerWidth() - 10 + "px";

        $(this).animate({ "margin-left": "-=" + left }, 500);
    }
); 
```

我能够测试该技术确实适用于您的网站（使用 Chrome 开发人员工具），但是，上述脚本可能需要一些调整，因为它只是一个示例起点。

我希望这有帮助！

# c# - 最佳实践查找表 (GetOrCreate)

> ID：13610926
> 
> 赞同：0
> 
> 时间：2012-11-28T17:26:33.260
> 
> 标签：c#, entity-framework

首先，我想用几句话来解释我的情况： - 我有一些，我称之为查找表。这意味着我希望其中的所有值都是唯一的。例如，带有名称和 GUID 的 CPU 型号的查找表。

```
public partial class CPUModel : EntityObject
{
    public Guid Id {}
    public String Name{}
} 
```

*   在 Entity Framework 和 C# 的帮助下，实体被保存在 SQL CE 数据库中
*   我制作了一个 CRUDManager，它可以帮助我选择、插入、更新和删除实体。
*   所有这些操作都与 ReaderWriterLockSlim 一起工作，以防止出现多线程问题。

现在应该有某种 GetOrCreate 方法，我可以在其中说 GetOrCreate(cpuModelName)，这给了我一个保存的 CPUModel，无论是已经存在的还是新创建的。此方法也应该适用于 ReaderWriterLockSlim。

所以我想在 CRUDManager 上实现这个方法。您认为我走在正确的轨道上还是将其直接放在 CPUModel 上（甚至其他地方？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:38:36.643

CRUDManager 是一个很好的地方。我只会查找值（最好通过`Lookup()`类型函数，如果存在，请选择它。如果不存在，请调用`Create()`或您定义的任何函数来创建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:38:32.430

听起来你想要一本字典。[我建议在这里](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)阅读它。

# fortran - 为什么 PGI 在此模块中不使用公共属性？

> ID：13610927
> 
> 赞同：0
> 
> 时间：2012-11-28T17:26:35.040
> 
> 标签：fortran, gfortran, pgi

在这里使用别人的代码。它用 gfortran 编译得很好。但是，在波特兰集团下，我收到一个错误：

```
pgf90 -DsysLinux -DcompPGF90 -I/home/cables/GITM/share/Library/src  -c  -r8 -fast        ModUtilities.F90
PGF90-S-0084-Illegal use of symbol mpi_wtime - not public entity of module (ModUtilities.F90: 419)
0 inform,   0 warnings,   1 severes, 0 fatal for sleep 
```

违规行如下所示：

```
use ModMpi, ONLY : MPI_wtime 
```

（这里显然有很多 MPI 的东西，但我认为这不是重点。）所以我转到 的源代码`ModMpi`，即 ModMpi.f90，我看不到对 的引用`MPI_WTIME`，但我看到：

```
use ModMpiInterfaces 
```

所以最后，我去找源代码`ModMpiInterface`，我找到了这条线：

```
public:: mpi_wtime 
```

`mpi_wtime`好的，我可以通过编辑 ModMpi.f90 并声明为公共来从 PGI 获得编译。但是，我仍然想知道：为什么 gfortran 假设（显然）这`mpi_wtime`是公开的，但 PGI 必须明确告知这一点？为什么 PGI 不假设原始公开声明在整个“使用链”中都成立？

我认为一种行为或另一种行为更接近 Fortran 标准。那会是哪个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T00:28:39.590

对于完全相同的 Fortran**源代码**（与某种 MPI 库相反），编译器的行为在这里应该是相同的。

实体是否是模块的公共实体取决于定义或访问（通过 USE）该实体的每个模块。模块 A 可能声明“某事”并指定它是公共的，模块 B 可能使用模块 A 然后指定相同的“某事”然后是私有的。任何使用模块 A 的代码都可以访问“某物”，任何只使用模块 B 的代码都不能。

模块中声明的事物的默认可访问性是 PUBLIC，但可以通过 PRIVATE 语句（没有任何后续标识符的语句）更改该默认值。如果出现这样的私有语句，您将看到您使用 PGI 编译器描述的行为。

隐式输入（即来自没有 IMPLICIT NONE 的源代码）在这里也会混淆。

# c++ - 如何从 C++ 文件中读取数字？

> ID：13610932
> 
> 赞同：4
> 
> 时间：2012-11-28T17:26:59.713
> 
> 标签：c++, file, matlab, fstream

我的主要问题是关于如何从非**char**数据类型的文件中读取数据。我正在从 MATLAB 编写一个数据文件，如下所示：

```
x=rand(1,60000);
fID=fopen('Data.txt','w');
fwrite(fID,x,'float');
fclose(fID); 
```

然后，当我尝试使用以下代码在 C++ 中读取它时，“num”不会改变。

```
#include <iostream>
#include <fstream>
using namespace std;

int main()
{
    fstream fin("Data.txt",ios::in | ios::binary);
    if (!fin)
    {   
        cout<<"\n Couldn't find file \n";
        return 0;
    }
    float num=123;
    float loopSize=100e3;
    for(int i=0; i<loopSize; i++)
    {
        if(fin.eof())
        break;

        fin >> num;
        cout<< num;
    }
    fin.close();
    return 0;
} 
```

我可以在matlab中很好地读写文件，我可以用c++读写，但是我不能用matlab写和用c++读。我在 matlab 中编写的文件是我想要的格式，但 c++ 中的文件似乎是在文本中写入/读取数字。您如何从 C++ 文件中读取一系列**浮点数**，或者我做错了什么？

编辑：循环代码很乱，因为我不想要无限循环，并且从未设置过 eof 标志。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T17:35:55.683

格式化 I/O 使用`<<`并`>>`确实将数值作为文本读取和写入。

据推测，Matlab 正在以二进制格式写入浮点值。如果它使用与 C++ 相同的格式（大多数实现使用标准 IEEE 二进制格式），那么您可以使用未格式化的输入读取字节，并将它们重新解释为浮点值，如下所示：

```
float f;  // Might need to be "double", depending on format
fin.read(reinterpret_cast<char*>(&f), sizeof f); 
```

如果 Matlab 不使用兼容的格式，那么您需要找出它使用的格式并编写一些代码来转换它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T17:35:46.460

您需要读取和写入相同的格式。就此而言，您从 Matlab 中写入的是一个未格式化的字节序列，取决于您是否使用相同的系统，它可能能够读取，也可能无法读取。您可能可以将这个未格式化的字节序列读入 C++ 程序（例如使用`std::istream::read()`），但您不应该考虑存储数据。

要实际存储数据，您需要了解数据的格式。格式可以是二进制或文本，但您应该清楚字节的含义、它们出现的顺序、有多少或如何检测值的结尾等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T17:41:42.550

使用`fwrite`不是最好的主意，因为这将以内部格式写出数据，这在您的程序中可能不容易读回，也可能不容易读回。

Matlab 有其他编写输出的方法，例如 fprintf 之类的函数。最好以这种方式写出您的数据，然后应该很明显如何将其读回另一个应用程序。

只需使用`fprintf(fID, "%f\n", x)`, 然后您应该可以使用`scanf`C/C++ 来读回它。

# php - 如何将值从下拉列表发布到文本框

> ID：13610933
> 
> 赞同：-2
> 
> 时间：2012-11-28T17:27:07.843
> 
> 标签：php

```
<script>
    function load(form)
    <?php   
    {
        $query = "SELECT roomNo, price FROM dbo.Room WHERE roomNo =  '".$_GET['roomNo']."'";
        $result = mssql_query($query) or die ("Error Query [".$query."]"); 
        $details = mssql_fetch_array($result);
        $price = $details["price"];
    }
    ?>
    </script>
    <table width= 100% border="0">

        <tr>
            <td>List Menu</td>
            <td>:</td>
            <td>
                <select name="opRoomNo" onchange="load(this.form)">
                <? while($objResult = mssql_fetch_array($objQuery))
                {
                ?>
                    <option value="<?=$objResult["roomNo"];?>"> <?=$objResult["roomNo"];?> </option>
                <?
                }
                ?>
                </select>
            </td>
        </tr>
        <tr>
            <td>Price</td>
            <td>:</td>
            <td><input type="text" name="txtPrice" value="<? echo $price; ?>" ></td>
        </tr> 
```

选择下拉框时，我无法从数据库中获取值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:30:02.637

*您在页面加载时*运行查询。

您`load` *在选择更改时*运行。

由于您想在 load 函数中使用 select 中的数据，因此这是行不通的。

将表单提交到服务器或添加一些 Ajax。

# php - 如何在 PHP 中将 Date 转换回来？

> ID：13610940
> 
> 赞同：0
> 
> 时间：2012-11-28T17:27:48.387
> 
> 标签：php, date, time, format

任何请帮助我将其转换回原始日期格式，尝试使用`strtotime($startDate)`并给出非常错误的答案！

```
$startDate = '2012-11-21T20:16:14+02:00';
$endDate = '2012-11-27T23:19:14+02:00';

$date = 2012-11-26;
$time = 20:16:14;
$duration = $endDate - $startDate; // 01:30:00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:33:42.980

这应该有效：

```
$startDate = '2012-11-21T20:16:14+02:00';
$endDate = '2012-11-27T23:19:14+02:00';

$duration = strtotime($endDate) - strtotime($startDate);
// 60 seconds * 60 minutes * 24 hours
$days = round($duration / (60 * 60 * 24));
echo 'days difference: '.$days; 
```

# php - CakePHP 将具有不同所有者/组的文件写入服务器所有者/组

> ID：13610941
> 
> 赞同：0
> 
> 时间：2012-11-28T17:27:50.257
> 
> 标签：php, cakephp, file-permissions, read-write

我正在使用 CakePHP 2.2.2，并且为了写入/删除文件/符号链接到文件夹，必须将包含文件夹权限设置为 0777，因为写入似乎使用与 CakePHP 脚本文件不同的所有者/组名称。当使用相同的脚本删除他们创建的文件/符号链接以及尝试通过 ftp 客户端更改权限/删除文件时，这会产生问题。有关如何解决此问题的任何指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:47:29.937

问题是您的 FTP 用户无法删除网络服务器创建的文件。您主要有两个选择：

*   让 PHP 脚本删除这些文件（这样文件将被创建它们的所有者删除）；
*   让根用户或管理员用户删除这些文件。

最后一个在共享托管服务器上会很困难，所以第一个可能是你要走的路……

# internet-explorer-9 - IE9 在我的网站上不断切换到兼容模式

> ID：13610942
> 
> 赞同：1
> 
> 时间：2012-11-28T17:27:51.900
> 
> 标签：internet-explorer-9, compatibility

我已阅读这篇文章[为什么 IE9 在我的网站上切换到兼容模式？](https://stackoverflow.com/questions/3726357/why-does-ie9-switch-to-compatibility-mode-on-my-website)但这并不能解决我的兼容模式问题。这只发生在网站上的 3 个页面上。每当我在 IE9 上访问这些页面时，都会弹出一个气泡，说有问题并刷新到兼容模式。

这些页面实际上在正常模式下看起来完全正确，而在兼容模式下看起来就像地狱一样。

有谁知道是什么触发了兼容模式？这 3 个页面中唯一共同的部分是图库，但我也将图库放在另一个页面上，并且该页面不会刷新到 o\compatibility 模式。

这是我的网站： [http ://rebuild.silverridgeal.com/texas-dementia-care-facilities](http://rebuild.silverridgeal.com/texas-dementia-care-facilities)

* * *

问题解决了，我只需要将 META 标签放在 HEAD 标签中尽可能高的位置即可被识别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:50:41.230

我面临着类似的问题。对我来说，jquery 和自定义的 $.delay 函数导致了这个问题。当我评论该代码时，它可以正常工作。我正在开发单个 HTML 页面（100% AJAX）网络应用程序。所以页面重新加载没有发生..

甚至我仍然想知道 jquery 代码或 JS setTimeout 是如何触发 IE 进入旧模式的。

它非常奇怪的 IE 问题。微软应该用一些补丁来解决它。

请检查您的代码是否使用了可能触发此问题的类似 JS 或 jquery 函数。

还要检查这三个页面的 META 标签。

# winapi - 最快的 blit（在 winapi 下）

> ID：13610943
> 
> 赞同：1
> 
> 时间：2012-11-28T17:27:54.053
> 
> 标签：winapi, optimization, 2d, blit

我正在做很多 blitting（最近几个月写了许多 2d 游戏原型），并且我正在寻找最快的 blit 可能有比 SetDIBitsToDevice 或 StretchDIBits 更快的东西吗？据我所知，对于通常的窗口大小，这些大约是 1-5 毫秒，因此它们并不是非常快（很难或不可能写出比 200 fps 快的东西），尽管我认为这是正常的，因为 RAM 本身并不是那么快。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T21:08:13.463

这取决于。

大多数机器的瓶颈将是从系统内存到图形内存。

在许多情况下，SetDIBitsToDevice 和 BitBlt 之间不会有任何有效的区别，但在某些情况下，可能会有。如果您在低颜色模式下运行（例如，256），那么推送 1 字节索引比 32-bpp 像素数据更快，并将其重新映射到卡上。（是否在图形适配器或系统中处理重新映射将取决于驱动程序——我假设。）

我相信您可以做的最安全的事情是来自设备相关（兼容）位图的 BitBlt。我认为这不会比 SetDIBitsToDevice 更糟，但它通常可能是平局。

我希望（但尚未测试）任何拉伸 blit 都可能比直接 blit 稍微贵一些，除非在 GPU 上合成额外的像素。

您可能会考虑一些较新的 API，例如 Direct2D，它们旨在与硬件更紧密地合作，而不是呈现理想化的软件模型。

无论您选择哪种解决方案，我都会为机器之间的巨大性能差异做好准备。

# android - 使用适用于 Android 的 Facebook SDK 3.0 检索个人资料图片

> ID：13610953
> 
> 赞同：15
> 
> 时间：2012-11-28T17:28:22.870
> 
> 标签：android, facebook, facebook-graph-api, facebook-android-sdk

我遇到了适用于 Android 的 Facebook SDK 3.0 的问题。我想在不使用他们的 ProfilePictureView 小部件的情况下获取我的（和我的朋友）个人资料图片，所以如果我使用 Graph Explorer，我会看到 Json 响应是：

```
{
   "data": {
         "url": "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-ash4/372127_1377011138_1538716206_q.jpg", 
         "is_silhouette": false
    }
} 
```

我需要那个“url”路径来下载和显示图片，但是使用以下代码：

```
Request.executeGraphPathRequestAsync(Session.getActiveSession(), 
                                     "me/picture", 
                                      new Request.Callback() {
        @Override
        public void onCompleted(Response response) {
            GraphObject go = response.getGraphObject();
            Log.i("APP_NAME", go.toString());           
        }
}); 
```

我得到这个：

```
GraphObject{graphObjectClass=GraphObject, 
    state={"FACEBOOK_NON_JSON_RESULT":"����\u0000\u0010JFIF\u0000\u0001\u0001\u0000\u0000\u0001\u0000\u0001\u0000\u0000��\u0000"}} 
```

有人可以帮助我吗？谢谢

克罗米尔

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T18:32:08.237

一种更简单的方法是执行一个`GET`请求，`graph.facebook.com/USER_ID/picture`这样您就不必首先请求图片的 URL，然后执行另一个`GET`请求以从给定的 URL 下载图片。

而不是使用`Request.executeGraphPathRequestAsync`，只需对上面的 URL 进行正常`GET`请求，例如`http://graph.facebook.com/4/picture`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-13T20:30:02.837

```
You can retreive user information for executeMeRequest in facebook 3.0 sdk.

    public void executeMeRequest(Session session) {

        Bundle bundle = new Bundle();
        bundle.putString("fields", "picture");
        final Request request = new Request(session, "me", bundle,
                HttpMethod.GET, new Request.Callback() {

            @Override
            public void onCompleted(Response response) {
                GraphObject graphObject = response.getGraphObject();
                if(graphObject != null) {
                    try {
                        JSONObject jsonObject = graphObject.getInnerJSONObject();
                        JSONObject obj = jsonObject.getJSONObject("picture").getJSONObject("data");
                        final String url = obj.getString("url");
                            new Thread(new Runnable() {

                                @Override
                                public void run() {

                                    final Bitmap bitmap = BitmapFactory.decodeStream(HttpRequest(url);
                                    runOnUiThread(new Runnable() {

                                        @Override
                                        public void run() {
                                            imageView.setImageBitmap(bitmap);
                                        }
                                    });
                                }
                            }).start();
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }
                }
            }
        });
        Request.executeBatchAsync(request);
    }

public static InputStream HttpRequest(String strUrl) {

    HttpResponse responce = null;
    try {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpGet request = new HttpGet();
        request.setURI(new URI(strUrl));
        responce = httpClient.execute(request);
        HttpEntity entity = responce.getEntity();
        return entity.getContent();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (URISyntaxException e) {
        e.printStackTrace();
    } catch (NullPointerException e) {
        e.printStackTrace();
    }
    return null;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-29T10:36:12.687

您可以通过向 Graph API 请求获取头像。您需要传递 accessToken 、用户 ID 并将重定向设置为 false。然后 Graph API 返回 JSON，您可以从 JSON 中获取作为用户配置文件的 url 字段。

```
 GraphRequest request = new GraphRequest(accessToken, "/" + userID + "/picture",null,HttpMethod.GET, new GraphRequest.Callback() {
                @Override
                public void onCompleted(GraphResponse response) {
                    Log.d("Photo Profile", response.getJSONObject().toString());
                    JSONObject jsonObject = response.getJSONObject();
                    try {

                        JSONObject data = jsonObject.getJSONObject("data");
                        String url = data.getString("url");
                        Picasso.with(getApplicationContext()).load(url).into(ivProfilePicture);
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }
                }
            });
            Bundle parameters =new Bundle();
            parameters.putString("type","large");
            parameters.putBoolean("redirect",false);
            request.setParameters(parameters);
            request.executeAsync(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-26T18:12:50.233

据我所知，无法直接使用 facebook graph API 获取图像，因为他们的 API 旨在仅接受 JSON 响应。他们允许一个导致非 JSON 响应的请求似乎很奇怪，尤其奇怪的是他们会将这个请求放在他们的官方文档中 *( [https://developers.facebook.com/docs/graph-api/reference /用户/图片/](https://developers.facebook.com/docs/graph-api/reference/user/picture/)）。

我正在使用内置的 Android DefaultHttpClient 库。

```
private Bitmap downloadImage(url) {
    Bitmap image = null;
    DefaultHttpClient client = new DefaultHttpClient();
    HttpGet request = new HttpGet(imageUrl);
    try {
        HttpResponse response = client.execute(request);
        HttpEntity entity = response.getEntity();

        int imageLength = (int)(entity.getContentLength());

        InputStream is = entity.getContent();

        byte[] imageBlob = new byte[imageLength];

        int bytesRead = 0;

        // Pull the image's byte array

        while (bytesRead < imageLength) {
            int n = is.read(imageBlob, bytesRead, imageLength - bytesRead);
            bytesRead= n;
        }

        image = BitmapFactory.decodeByteArray(imageBlob, 0, imageBlob.length);
    } catch (Exception e) {
        e.printStackTrace();
    }
    return image;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T17:43:28.493

您可能需要在[https://developers.facebook.com/apps的开发人员控制台中的应用程序高级设置中启用“图片作为字典”](https://developers.facebook.com/apps)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-11T10:08:31.203

我得到了答案......这是由于重定向。因此通过`params`而不是`null`：

```
Bundle params = new Bundle();
params.putBoolean("redirect", false); 
```

# multithreading - 一个线程可以分配给windows上的多个进程吗？

> ID：13610956
> 
> 赞同：0
> 
> 时间：2012-11-28T17:28:30.197
> 
> 标签：multithreading

我知道一个进程至少有一个线程。但是一个线程可以分配给 Windows 上的多个进程吗？

# matlab - 如何使用 Visual Studio 2010 调试 MATLAB .mex32/.mex64 文件

> ID：13610959
> 
> 赞同：2
> 
> 时间：2012-11-28T17:28:40.903
> 
> 标签：matlab, visual-c++

我有一个与调试 .mex32/.mex64 文件有关的问题。假设现在我有一个名为 test.cpp 的文件：

```
#include "mex.h" 
#include <iostream>
void mexFunction(int nlhs, mxArray *plhs[],
    int nrhs, const mxArray *prhs[])
{
    mexPrintf("Hello Matlab, and this is a test program\n"); 
} 
```

然后我可以使用 Visual Studio 2010 编译和构建。然后`test.mex64`在 matlab 中，我可以编写以下脚本来测试该功能：

```
clc; 
test; 
```

现在假设我要调试 test.mex64 函数，我该怎么办？已采用以下程序，但未通过：

1.  `mexPrintf`用 VS2010在行的乞求处切换断点。
2.  使用 VS2010 从 Debug->Attach to Process... 选择 MATLAB.exe。
3.  运行 MATLAB 脚本`clc; test;`

我得到的错误信息如下：

```
The breakpoint will not currently be hit. No symbols have been loaded for this document. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T21:58:49.113

您是否使用调试选项“-g”构建了 mex 文件？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:54:50.527

我找到了解决方案：当我创建 .mexw64 函数（在我们的例子中为 test.mexw64）时，我将它复制到了 MATLAB 工作目录。为了调试这个函数，将 test.pdb 文件复制到 MATLAB 工作目录也很重要。完成后，我可以调试。

# asp.net-mvc - EF 代码优先：使用具有多对多关系的 Linq

> ID：13610960
> 
> 赞同：1
> 
> 时间：2012-11-28T17:28:50.963
> 
> 标签：asp.net-mvc, linq, entity-framework-4

我正在使用带有 EF 代码优先方法的 MVC 4。我有两个简单的对象。这些是他们的 POCO 课程：

```
public class Activity
{
        //Primitive Properties
        [HiddenInput]
        public int Id { get; set; }

        [Required]
        public int LengthInMinutes { get; set; }

        public string AdditionalInfo { get; set; }

        [Required]
        public bool Archive { get; set; }

        //Navigation Properties
        public virtual User User { get; set; }
        public virtual ActivitySet ActivitySet { get; set; }
        public virtual ICollection<Company> Companies { get; set; }
        public virtual ICollection<Description> Descriptions { get; set; }
}

public class Company
{
        //Primitive Properties
        [HiddenInput]
        public int Id { get; set; }

        [Required]
        public string Title { get; set; }

        [Required]
        public bool Archive { get; set; }

        //Navigation Properties
        public virtual ICollection<Activity> Activities { get; set; }
} 
```

现在，我有一个通用的活动列表，我使用 foreach 循环遍历这些活动。循环时，我想为与列表中的活动相关的每个公司写一个名称。这是我想出的代码：

```
@foreach (Activity a in Model)
{
    <p>@a.Companies.Where(d => d.Activities.FirstOrDefault(y => y.Id == a.Id)).Single()</p>
} 
```

不幸的是，当我构建项目时，它给了我编译错误。然后如何访问具有多对多关系的元素的详细信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:41:34.777

你可以这样尝试：

```
@foreach (Activity a in Model)
{
    <p>@string.Join(",", a.Companies.Select(c => c.Title))</p>
} 
```

它应该列出给定活动的所有公司名称，用逗号分隔。

# android - 执行 onPostExecute(Void result) android 后调用 onListItemClick()

> ID：13610961
> 
> 赞同：1
> 
> 时间：2012-11-28T17:28:51.810
> 
> 标签：android, android-listview, android-asynctask

执行 onPostExecute(Void result) 后调用 onListItemClick() 函数时遇到问题

下面是我的代码片段。

```
package com.myapp.checkoutnhangout;

import java.security.KeyManagementException;
import java.security.KeyStoreException;
import java.security.NoSuchAlgorithmException;
import java.security.UnrecoverableKeyException;
import java.util.List;

import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Context;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class CheckoutNearestPlaces extends ListActivity {
    private String[] placeName;
    private String[] imageUrl;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        new GetPlaces(this,getListView()).execute();
    }

    class GetPlaces extends AsyncTask<Void, Void, Void> {

        Context context;
        private ListView listView;
        private ProgressDialog progressDialog;

        public GetPlaces(Context context , ListView listView) {
            this.context = context;
            this.listView = listView;
        }

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            progressDialog = new ProgressDialog(context);
            progressDialog.setIndeterminate(true);
            progressDialog.setTitle("Loading");
            progressDialog.show();
        }

        @Override
        protected Void doInBackground(Void... params) {
            try {
                findNearLocation();
            } catch (KeyManagementException e) {
                e.printStackTrace();
            } catch (UnrecoverableKeyException e) {
                e.printStackTrace();
            } catch (NoSuchAlgorithmException e) {
                e.printStackTrace();
            } catch (KeyStoreException e) {
                e.printStackTrace();
            }
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            super.onPostExecute(result);
            progressDialog.dismiss();
            setListAdapter(new ArrayAdapter<String>(context,android.R.layout.simple_list_item_1,placeName));
//          this.listView.setAdapter(new ArrayAdapter<String>(context,android.R.layout.simple_list_item_1,placeName));
        }

        public void onListItemClick(ListView listView , View v , int position , long id){
            System.out.println("position------------"+placeName[position]);
        }

        public void findNearLocation() throws KeyManagementException, UnrecoverableKeyException, NoSuchAlgorithmException, KeyStoreException {
            PlacesService placesService = new PlacesService("AIzaSyC3y3fOMTqTkCjNNETQTCKustG7BRk_eVc");

            List<Place> findPlaces = placesService.findPlaces(28.6752, 77.4362, "");

            int findPlacesSize = findPlaces.size();
            placeName = new String[findPlacesSize];
            imageUrl = new String[findPlacesSize];

            for(int index = 0 ; index < findPlacesSize ; index ++) {
                    Place placeDetail = findPlaces.get(index);

//                  System.out.println("name of place : "+placeDetail.getName());
                    placeName[index] = placeDetail.getName();

//                  System.out.println("url of place : "+placeDetail.getIcon());
                    imageUrl[index] = placeDetail.getIcon();
            }
        }

    }
} 
```

上面的代码使用 google palce api 并根据用户的兴趣显示位置列表。之后，我想调用 onListItemClick() 函数，这样我就可以在每次单击项目时调用另一个活动。

任何帮助都将是可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:33:22.427

消除

```
public void onListItemClick(ListView listView , View v , int position , long id){
            System.out.println("position------------"+placeName[position]);
        } 
```

从班级`GetPlaces`

并放入`CheckoutNearestPlaces`

# magento - 如何将 Magento Enterprise“按价格排序”更改为降序？

> ID：13610965
> 
> 赞同：0
> 
> 时间：2012-11-28T17:29:03.867
> 
> 标签：magento, sorting

我在toolbar.phtml中玩过这个块：

```
<div class="sort-by">
        <label><?php echo $this->__('Sort By') ?></label>
        <select onchange="setLocation(this.value)">
        <?php foreach($this->getAvailableOrders() as $_key=>$_order): ?>
            <option value="<?php echo $this->getOrderUrl($_key, 'desc') ?>"<?php if($this->isOrderCurrent($_key)): ?> selected="selected"<?php endif; ?>>
                <?php echo $this->__($_order) ?>
            </option>
        <?php endforeach; ?>
        </select>
            **<?php if($this->getCurrentDirection() == 'desc'): ?>**
            <a class="category-desc v-middle" href="<?php echo $this->getOrderUrl(null, 'asc') ?>" title="<?php echo $this->__('Set Ascending Direction') ?>"><?php echo $this->__('Set Ascending Direction') ?></a>
        <?php else: ?>
            <a class="category-asc v-middle" href="<?php echo $this->getOrderUrl(null, 'desc') ?>" title="<?php echo $this->__('Set Descending Direction') ?>"><?php echo $this->__('Set Descending Direction') ?></a>
        <?php endif; ?>
    </div> 
```

我将 asc 更改为 desc，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:11:15.337

Magento 目前不允许您从后端配置中定义排序顺序。但是，它们允许您选择可以排序的内容。要更改默认排序顺序，您必须执行以下操作：

1.  复制`app/code/core/Mage/Catalog/Block/Product/List/Toolbar.php` 到 `app/code/local/Mage/Catalog/Block/Product/List/Toolbar.php`

2.  打开`app/code/local/Mage/Catalog/Product/Block/List/Toolbar.php`

3.  寻找`protected $_direction = 'asc';`

4.  改成`protected $_direction = 'desc';`

5.  保存文件，清除缓存。

要将默认排序依据更改为价格，请执行以下操作：

1.  在 Magento Admin 中，转到`System > Configuration > Catalog`

2.  **将产品列表排序方式**更改为**价格**

3.  点击**保存配置**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T10:27:33.743

在 catalog.xml 添加值：

```
<action method="setDefaultDirection"><dir>desc</dir></action> 
```

例子：

```
<block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml">
     <block type="page/html_pager" name="product_list_toolbar_pager"/>
      <!-- The following code shows how to set your own pager increments -->
     <!-- .... -->
     <action method="setDefaultDirection"><dir>desc</dir></action>
     </block> 
```

# sql - SQL 选择按别的东西分组时具有最高值的行

> ID：13610966
> 
> 赞同：0
> 
> 时间：2012-11-28T17:29:05.037
> 
> 标签：sql, sql-server-2008, grouping, max

我有一个看起来像这样的表：

```
 . |  ID  | SystemID |       StartDateTime       |        EndDateTime        |
1 |  24  |     1    |  2012-11-09 13:59:00.000  |  2012-11-09 14:23:00.000  |
2 |  25  |     2    |  2012-11-09 13:59:00.000  |  2012-11-09 14:23:00.000  |
3 |  26  |     3    |  2012-11-09 14:00:00.000  |  2012-11-09 14:24:00.000  |
4 |  27  |     1    |  2012-11-09 16:20:00.000  |  2012-11-09 17:19:00.000  |
5 |  28  |     2    |  2012-11-09 16:21:00.000  |  2012-11-09 17:37:00.000  |
6 |  29  |     3    |  2012-11-09 17:25:00.000  |  2012-11-09 17:50:00.000  | 
```

对于每个系统 ID，我想选择最接近和在给定时间之前结束的行。例如，如果时间是 17:30，结果将如下所示：

```
|  ID  | SystemID |       StartDateTime       |        EndDateTime        |
|  27  |     1    |  2012-11-09 16:20:00.000  |  2012-11-09 17:19:00.000  |
|  25  |     2    |  2012-11-09 13:59:00.000  |  2012-11-09 14:23:00.000  |
|  26  |     3    |  2012-11-09 14:00:00.000  |  2012-11-09 14:24:00.000  | 
```

希望这是有道理的！谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:39:27.903

您可以`ROW_NUMBER`为此使用：

```
DECLARE @Date DATETIME
SET @Date = '20121109 17:30:00'

;WITH CTE AS
(
    SELECT  *, 
            ROW_NUMBER() OVER(PARTITION BY SystemID ORDER BY EndDateTime DESC) RN
    FROM YourTable
    WHERE EndDateTime < @Date
)
SELECT ID, SystemID, StartDateTime, EndDateTime
FROM CTE
WHERE RN = 1 
```

[这是一个 sqlfiddle](http://sqlfiddle.com/#!3/9a070/1)供您尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:43:21.130

你可以使用`outer apply`：

```
select  *
from    (
        select  distinct SystemID
        from    Table1
        ) as ids
outer apply
        (
        select  top 1 *
        from    Table1 t1
        where   t1.SystemID = ids.SystemID
                and t1.EndDateTime < '2012-11-09 17:30'
        order by
                t1.EndDateTime desc
        ) as last 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!3/b2202/2/0)

# sql - SQL 查询中的数学 - 添加“结果”以显示新的“结果”

> ID：13610971
> 
> 赞同：1
> 
> 时间：2012-11-28T17:29:26.333
> 
> 标签：sql, aggregate-functions

我有一张包含数千个条目的表格，每个人每天工作一个条目。其中一列是跟踪该人当天接到的电话数量。我正在使用以下查询：

```
SELECT [agtName], [contactPhoneCnt] 
FROM [fnDynamicCSCAgtFctByMth] ('09/24/2012','11/07/2012') 
WHERE acct_mo_n = 'October' 
ORDER BY agtName desc 
```

这给了我 3822 个结果。结果 1-18 都是针对一个人的（同样，他们每天工作一个）。我想做的是让 SQL 查询从“contactPhoneCnt”列中**添加结果**1-18 **，并显示单个结果**而不是 18 个单独的结果。不能保证会有 18 个结果……一个人可能在 10 月工作 10 天，而另一个人工作 21 天。我关心的是获取该人整个月接到的电话总数（而不是按天个人结果中的一天）。

我将如何编写查询，以便添加来自一个人的所有条目并为每个人返回一个结果，所以我最终得到类似 168 个结果而不是 3822 个结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:34:16.570

一个简单的 group by 应该可以解决问题：

```
SELECT  [agtName]
,       count(*)
FROM    fnDynamicCSCAgtFctByMth('09/24/2012','11/07/2012') 
WHERE   acct_mo_n = 'October' 
group by 
        agtName
order by 
        agtName desc 
```

# php - Readfile 适用于一张图像，但不适用于下一张

> ID：13610972
> 
> 赞同：0
> 
> 时间：2012-11-28T17:29:28.560
> 
> 标签：php, file-get-contents, jpeg, readfile

我有下面的代码来通过 https 显示图像，但无论出于何种原因，它都适用于大多数图像，但奇怪的图像却没有..

代码如下

```
<?php

//This one works
//$file = "http://i.ebayimg.com/00/s/NDEwWDY0MA==/$%28KGrHqJ,!pQFBWf4uEThBQkO-TbjYw~~60_12.JPG";

//This one doesnt
$file = "http://i.ebayimg.com/00/s/NDgwWDY0MA==/$T2eC16JHJIYE9qUcNbMwBQroE+MgEQ~~60_1.JPG";

ob_clean();
header('Content-type: image/jpg');
echo readfile($file); 
```

正如您所看到的，它是一个基本脚本，第一个文件（当前已注释掉的那个）可以正常工作，但第二个文件不会同时存在两个文件并且看起来接近 identicle

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:33:31.330

使用单引号，使用时`'`也不需要`echo``readfile`

```
$file = 'http://i.ebayimg.com/00/s/NDgwWDY0MA==/$T2eC16JHJIYE9qUcNbMwBQroE+MgEQ~~60_1.JPG';

ob_clean();
header('Content-type: image/jpg');
readfile($file); 
```

[观看现场演示](http://codepad.viper-7.com/ACghVN)

# java - 如何拆分字符串，如 1+2-3/4

> ID：13610973
> 
> 赞同：-1
> 
> 时间：2012-11-28T17:29:36.083
> 
> 标签：java, string, expression

我正在尝试用java构建计算器。为了构建它，我必须将每个整数拆分为数组。我在“+”号之前和之后划分了每个整数，使用`split("\\+")`.

但是其他运营商呢？我可以在使用“+”的同时使用“-”、“/”、“*”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:31:28.627

好吧，要回答您的直接问题（您必须使用 转义一些运算符`\\`）：

```
"1+2-3/4".split("[+\\-*/]") 
```

但是，这会丢弃运算符，因此您需要更复杂的东西。此外，您可能希望支持浮点数。最后但同样重要的是，一旦完成解析，请记住运算符优先级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:34:09.193

在这种情况下，您可以使用

```
for(char ch : "1+2-3/4".toCharArray()) {
    System.out.println(ch);
} 
```

如果你想要多位数字和负数，你需要编写一个简单的解析器，即`-1+-2`

过去我使用基于[枚举的状态机](http://vanillajava.blogspot.co.uk/2011/06/java-secret-using-enum-as-state-machine.html)来解析测试。一旦你有一个令牌流，你就可以建立优先规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T19:12:44.063

既然你提到你的问题领域是计算器，我认为使用**堆栈**来拆分操作数和运算符并评估表达式会更合适。

[在此处](http://faculty.cs.niu.edu/~hutchins/csci241/eval.htm)查看许多此类案例中使用的著名算法

# javascript - 如何让 JSDoc 将我的参数标记为 jQuery 对象？

> ID：13610979
> 
> 赞同：32
> 
> 时间：2012-11-28T17:29:53.820
> 
> 标签：javascript, jquery, jsdoc

我正在尝试彻底评论我的 JavaScript 并且我正在使用 JSDoc。我有一个使用 jQuery 对象的函数，我想将参数标记为这样。

目前，我有这个：

```
/**
 * Initializes a login object.
 * @param formEl {JQuery} The login form element on the page.
 */
var login = function(formEl){ ... } 
```

但是 JSDoc 不能识别（或正确格式化）“JQuery”作为变量类型。有什么帮助吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-28T18:36:15.590

根据[http://code.google.com/p/jsdoc-toolkit/wiki/TagParam](http://code.google.com/p/jsdoc-toolkit/wiki/TagParam)它应该是

参数名称之前的参数类型。

```
/**
 * Initializes a login object.
 * @param {jQuery} formEl The login form element on the page.
 */
var login = function(formEl){ ... } 
```

# php - 从日期中减去日期

> ID：13610981
> 
> 赞同：1
> 
> 时间：2012-11-28T17:29:56.473
> 
> 标签：php, date

我正在尝试从这一天的日期中减去发布日期。

```
$subs_date = $_POST['pv']; // user gives how many dates he wants to subtract
$date = (date("Y-m-d"));
$new_date = strtotime ( '-'.$subs_date.'day' , strtotime ( $date ) ) ;
echo $new_date; 
```

这给了我结果：1353884400

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T17:35:43.947

您可以使用 DateTime->sub() [http://www.php.net/manual/de/datetime.sub.php](http://www.php.net/manual/de/datetime.sub.php)

```
<?php
$date = new DateTime();
$date->sub(new DateInterval('P' . $_POST['pv'] . 'D'));
echo $date->format('Y-m-d') . "\n";
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:34:54.963

假设您的代码有效，您可以执行以下操作：

```
$subs_date = $_POST['pv']; // user gives how many dates he wants to substract
$date = (date("Y-m-d"));
$new_date = strtotime ( '-'.$subs_date.'day' , strtotime ( $date ) ) ;

//add this:
$new_date = date('m-d-Y', $new_date);
echo $new_date; 
```

# javascript - Javascript添加额外的参数

> ID：13610987
> 
> 赞同：40
> 
> 时间：2012-11-28T17:30:18.027
> 
> 标签：javascript

让我们看一下这段代码：

```
var mainFunction = function() {
  altFunction.apply(null, arguments);
} 
```

传递给的参数`mainFunction`是动态的——它们可以是 4 或 10，没关系。但是，我必须将它们传递给`altFunction`并且我必须在参数列表中添加一个 EXTRA 参数。

我试过这个：

```
var mainFunction = function() {
  var mainArguments = arguments;
  mainArguments[mainArguments.length] = 'extra data'; // not +1 since length returns "human" count.

  altFunction.apply(null, mainArguments);
} 
```

但这似乎不起作用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-11-28T17:33:11.670

采用`Array.prototype.push`

```
[].push.call(arguments, "new value"); 
```

* * *

没有必要对`arguments`对象进行浅层克隆，因为它和它`.length`是可变的。

```
(function() {
    console.log(arguments[arguments.length - 1]); // foo

    [].push.call(arguments, "bar");

    console.log(arguments[arguments.length - 1]); // bar
})("foo"); 
```

* * *

从 ECMAScript [5、10.6 参数对象](http://es5.github.com/#x10.6)

> 7.  调用`[[DefineOwnProperty]]`obj 传递的内部方法`"length"`、Property Descriptor`{[[Value]]: len, [[Writable]]: true, [[Enumerable]]: false, [[Configurable]]: true}`和 false 作为参数。

所以你可以看到它`.length`是可写的，所以它会用 Array 方法更新。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-11-28T17:32:19.360

`arguments`不是纯数组。您需要从中制作一个普通数组：

```
var mainArguments = Array.prototype.slice.call(arguments);
mainArguments.push("extra data"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-28T17:32:11.150

`arguments`对象不是数组；它*就像*一个数组，但它是不同的。但是，您可以将其转换为数组：

```
var mainArguments = [].slice.call(arguments, 0); 
```

然后你可以将另一个值推到最后：

```
mainArguments.push("whatever"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-30T16:33:00.837

2016 年更新：您必须在添加元素之前将参数转换为数组。除了很多帖子中提到的 slice 方法：

```
var args = Array.prototype.slice.call(arguments); 
```

您还可以使用 Array.from() 方法或扩展运算符将参数转换为真正的数组：

```
var args = Array.from(arguments); 
```

或者

```
var args = [...arguments]; 
```

您的javascript引擎可能未优化上述内容，MDN已建议以下可能进行优化：

```
var args = (arguments.length === 1 ? [arguments[0]] : Array.apply(null, arguments)); 
```

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/arguments](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/arguments)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T17:32:18.880

```
var mainFunction = function() {
    var args = [].slice.call( arguments ); //Convert to array
    args.push( "extra data");
    return altFunction.apply( this, args );
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-28T17:33:31.063

“`arguments`数组”不是数组（根据 Crockford 的说法，它是 JavaScript 中的一个设计错误），所以你不能这样做。但是，您可以将其转换为数组：

```
var mainFunction = function() {
  var mainArguments = Array.prototype.slice.call(arguments);
  mainArguments.push('extra data');

  altFunction.apply(null, mainArguments);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-03T17:45:01.693

一个用于添加其他参数并返回新数组的衬垫：

```
[].slice.call(arguments).concat(['new value'])); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-12T22:56:09.067

```
//
//    var
//        altFn  = function () {}, 
//        mainFn = prefilled( altFn  /* ...params */ );
//
//    mainFn(  /* ...params */  );
//  
//        
function prefilled ( fn /* ...params */ ) { 
     return ( function ( args1 ) { 

          var orfn = this;

          return function () { 

              return orfn.apply( this, args1.concat( cslc( arguments ) ) );

          };

     } ).call( fn, cslc( arguments, 1 ) );
}

// helper fn
function cslc( args, i, j ) { 
   return Array.prototype.slice.call( args, i, j );
}

// example

var
    f1 = function () { console.log( cslc( arguments ) ); }, 
    F1 = prefilled( f1, 98, 99, 100 );

F1( 'a', 'b', 'c' );

//
//   logs: [98, 99, 100, "a", "b", "c"]
//
// 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-03-29T05:14:35.200

在这种情况下，使用它可能会更舒适，`call()`而不是`apply()`：

```
function first(parameter1, parameter2) {

  var parameter3 = "123";

  secondFunction.call(
    this,
    parameter1,
    parameter2,
    parameter3);
}, 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-07-15T23:37:27.183

`var myABC = '12321'; someFunction(result, error, myCallback.bind(this, myABC));`

参考：[https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-03-17T18:07:24.720

对于那些像我一样正在寻找一种方法来添加可选参数并且可能不是唯一省略的参数（`myFunc = function(reqiured,optional_1,optional_2,targetOptional)`使用 like 调用`myFunc(justThisOne)`）的人，可以按如下方式完成：

```
// first we make sure arguments is long enough
// argumentPosition is supposed to be 1,2,3... (4 in the example above)
while(arguments.length < argumentPosition)
    [].push.call(arguments,undefined);
// next we assign it
arguments[argumentPosition-1] = arguments[argumentPosition-1] || defaultValue; 
```

# ios - 从角落动画缩放视图（放大）

> ID：13610990
> 
> 赞同：1
> 
> 时间：2012-11-28T17:30:33.307
> 
> 标签：ios, core-animation

我正在尝试像这样扩展我的视图：

```
CGRect endFrame = self.detailView.bounds;

[UIView animateWithDuration:0.25 animations:^{
    self.descriptionButton.bounds = endFrame;
}completion:^(BOOL finished) {
    self.containerView.alpha = 0.0;
    self.detailView.alpha = 1.0;
}]; 
```

我的 detailView 是容器视图。我的描述按钮在左上角。我想通过让按钮占据整个屏幕来提供放大效果。但是，默认情况下，Core Animation 从其中心的锚点缩放。

我尝试将锚点设置为视图图层的右下角，如下所示：

```
self.descriptionButton.layer.anchorPoint = CGPointMake(self.descriptionButton.bounds.size.width, self.descriptionButton.bounds.size.height);

CGRect endFrame = self.detailView.bounds;

[UIView animateWithDuration:0.25 animations:^{
    self.descriptionButton.bounds = endFrame;
}completion:^(BOOL finished) {
    self.containerView.alpha = 0.0;
    self.detailView.alpha = 1.0;
}]; 
```

但是当我这样做时，我根本看不到任何动画。有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:37:47.843

The anchorPoint property is "normalized" to values from 0 to 1\. 0.5, 0.5 is the center. 0,0 is top left. 1,1 is bottom right.

Your code is setting the anchorPoint property using pixel coordinates, which is wrong. I don't know what it would do, but it's wrong.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:52:05.413

你可以用一点数学

```
CGRect endFrame = self.detailView.frame;
CGRect currentFrame = self.detailView.frame;

[UIView animateWithDuration:0.25 animations:^
 {
     self.descriptionButton.frame = CGRectMake(currentFrame.x - (endFrame.size.width - currentFrame.size.width), currentFrame.y - (endFrame.size.height - currentFrame.size.height), endFrame.size.width, endFrame.size.height);
 }
                                 completion:^(BOOL finished)
 {
     self.containerView.alpha = 0.0;
     self.detailView.alpha = 1.0;
 }]; 
```

# java - JSP 表单提交 - 我可以在我的 java 类中引用特定方法吗？

> ID：13610997
> 
> 赞同：-2
> 
> 时间：2012-11-28T17:30:50.067
> 
> 标签：java, jsp, web.xml

我被限制在使用 Netbeans IDE 的企业软件项目上工作，没有框架。

前端显示是`register.jsp`。我的模型包包含`Customer.java`类，带有一些 getter 和 setter。数据包包含“CustomerData.java”，具有与客户相关的 DB 功能：注册、登录 `CustomerData`等`HttpServlet`。

`CustomerData`我需要从我的注册表单中引用类中的特定方法。这可能吗？

如果可以这样做，`web.xml`文件条目应该是`servlet`什么`servletmapping`？

这是代码。

**注册.jsp**

```
<form name="loginForm" method="post" action="CustomerData/RegisterCustomer">
......
</form> 
```

**CustomerData.java**骨架：

```
public class CustomerData extends HttpServlet {

    public void registerCustomer(HttpServletRequest request)
        throws ServletException, IOException
    {
        // this is the method I need to reference. It creates a db connection, checks to see if
        // the Customer is already in the DB, and if not, registers the user.
    }

    public void loginCustomer(HTTPServlet request)
        throws ServletException, IOException
    {
        // Some other Customer data method that will need to be called from my login.jsp page
    }

    public void SomeOtherMethod()
    {
       // some helper methods or validation methods for Customer
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:38:17.663

我会向您推荐以下内容。

在 JSP 页面中，您可以定义一个参数，说明`opr`您可以在哪里设置操作的值。

```
<form name="loginForm" method="post" action="CustomerData/">
<input type=hidden name=opr id=opr value=1
......
</form> 
```

在 Servlet 中，您可以通过传递的操作值来处理操作，如下所示

```
public doPost(HttpServletRequest req, HttpServletResponse res){
        int operation = Integer.valueOf(req.getParameter("opr"));

        if (operation == 1){
            registerCustomer(req);
        }else if (operation == 2){
            loginCustomer(req);
        }else if (operation == 3){
            SomeOtherMethod();
        }...
    } 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:42:01.987

[您可以使用getPathInfo](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServletRequest.html#getPathInfo%28%29)来完成您想要做的事情

假设您的 servlet 映射是

```
<servlet-mapping>
    <servlet-name>CustomerData</servlet-name>
    <url-pattern>/CustomerData/*</url-pattern>
</servlet-mapping> 
```

打电话

```
String pathInfo = request.getPathInfo(); 
```

将为您提供`'/RegisterCustomer'`pathInfo 中的值。从那里找出需要调用的方法应该是相当简单的。不要忘记添加检查代码来处理可能在 servlet 上抛出的各种滥用行为（例如，没有给出“方法名称”，指定不存在的方法名称等）。