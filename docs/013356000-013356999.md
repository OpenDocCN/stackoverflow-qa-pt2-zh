# StackOverflow 问答 13356000-13356999

# jquery - JQuery 无法点击 Firefox 中的自动完成下拉菜单

> ID：13356000
> 
> 赞同：3
> 
> 时间：2012-11-13T05:30:44.777
> 
> 标签：jquery, jquery-autocomplete

这是从他们的演示中获取的我的 jquery 代码：

```
$(function() {
            var availableTags = [
                "val1",
                "val2",
                "val3",
                "val4",
                "val5"];
            function split( val ) {
                return val.split( /,\s*/ );
            }
            function extractLast( term ) {
                return split( term ).pop();
            }

            $('#tag')
                // don't navigate away from the field on tab when selecting an item
                .bind( "keydown", function( event ) {
                    if ( event.keyCode === $.ui.keyCode.TAB &&
                        $( this ).data( "autocomplete" ).menu.active ) {
                        event.preventDefault();
                    }
                }).autocomplete({
                    minLength: 0,
                    source: function( request, response ) {
                        // delegate back to autocomplete, but extract the last term
                        response( $.ui.autocomplete.filter(
                            availableTags, extractLast( request.term ) ) );
                    },
                    focus: function() {
                        // prevent value inserted on focus
                        return false;
                    },
                    select: function( event, ui ) {
                        var terms = split( this.value );
                        // remove the current input
                        terms.pop();
                        // add the selected item
                        terms.push( ui.item.value );
                        // add placeholder to get the comma-and-space at the end
                        terms.push( "" );
                        this.value = terms.join( ", " );
                        return false;
                    }
                });
        }); 
```

<`input type="text" name="tag" id="tag" autocomplete="on"/>`

这段代码一直有效，直到我在下拉区域中添加了 jquery validate。我可以做些什么来用鼠标选择选项吗？

如果这很重要，我正在使用淘汰赛 js。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T00:13:39.623

解决方案是我使用了错误的 jquery 库。

# emacs - Elisp中的lambda递归

> ID：13356001
> 
> 赞同：2
> 
> 时间：2012-11-13T05:30:47.087
> 
> 标签：emacs, recursion, lambda, elisp

我有以下 Python 代码：

```
def sum_fibonacci():
    '''Project Euler: 2
    Sum of even-valued terms of Fibonacci sequence < 4 mil
    '''
    def i(a, b, acc):
        if a >= 4000000: return acc
        if a % 2 == 0:
            return i(a + b, a, acc + a)
        else: return i(a + b, a, acc)
    return i(2, 1, 0) 
```

我想把它翻译成 Emacs Lisp。在[Elisp 的高阶函数中，](https://stackoverflow.com/q/12772510/596361)我被告知不要使用`defun`within `defun`，因为它在全局范围内启用该函数，所以我改写了 lambda。但我需要让 lambda 递归调用自己。

我的代码是：

```
(defun sum-fibonacci ()
  (let ((i
         (lambda (a b acc)
           (cond ((>= a 4000000) acc)
                 ((evenp a) (funcall i (+ a b) a (+ a acc)))
                 (t (funcall i (+ a b) a acc))))))
    (funcall i 2 1 0))) 
```

但是，该函数`i`在分配之前被调用`let`，我得到一个错误 -`*** Eval error *** Symbol's value as variable is void: i`

**如何在 Elisp 的 lambda 中进行递归？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T07:53:43.547

在lambda[函数中递归，](https://stackoverflow.com/q/7607338/596361)我用以下代码重写了它`labels`：

```
(defun sum-fibonacci ()
  (labels ((i (a b acc)
              (cond ((>= a 4000000) acc)
                    ((evenp a) (i (+ a b) a (+ a acc)))
                    (t (i (+ a b) a acc)))))
    (i 2 1 0))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T13:43:20.943

是的，您可以在 emacs lisp 中执行此操作。

```
(funcall (lambda (fib a b acc) (funcall fib a b acc fib)) ;;lambda1
         (lambda (a b acc fib)                            ;;lambda2
           (cond ((>= a 40000) acc)
                 ((zerop (mod a 2)) (funcall fib (+ a b) a (+ acc a) fib))
                 (t (funcall fib (+ a b) a acc fib))))
         2 1 0) 
```

主要思想是使用辅助 lambda ( `lambda1`) 来调用真正的 lambda ( `lambda2`) 并将真正的 lambda ( ) 传递`lambda2`给它自己。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T07:34:11.570

只需删除 lambda 列表中的逗号：

```
(defun sum-fibonacci ()
  (labels ((rec (a b acc)
                (cond ((>= a 4000000) acc)
                      ((evenp a) (rec (+ a b) a (+ a acc)))
                      (t (rec (+ a b) a acc)))))
    (rec 2 1 0))) 
```

# jquery - 在我的网站上为主页创建幻灯片

> ID：13356002
> 
> 赞同：-3
> 
> 时间：2012-11-13T05:31:08.150
> 
> 标签：jquery, html, css

我想创建一个主页幻灯片......它是这样的......主导航和其他一些文本应该在动画上移动......

```
http://www.bam.com.au/ 
```

所以任何人都可以告诉我做这种幻灯片放映我需要知道什么......我认为 jquery 会为我做这件事，但我不知道如何使用 jquery 来做到这一点......所以你能告诉我怎么做使用 jquery 和 css 创建这样的幻灯片。

非常感谢任何评论。

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T06:11:27.147

它似乎在使用 jQuery[循环插件](http://jquery.malsup.com/cycle/)。

这是您在上述网站上看到的类似[演示。](http://jquery.malsup.com/cycle/int.html)（示例 2），与演示相比，该网站使用了非常大的图像。您还需要[缓](http://gsgd.co.uk/sandbox/jquery.easing.php)动插件来获得效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T05:36:59.967

你可以在网上找到很多 jquery/javascript 幻灯片脚本，它们都很容易上手。

我个人喜欢 Flexslider。[http://www.woothemes.com/flexslider/](http://www.woothemes.com/flexslider/)

# c# - 添加到初始化的多维槽

> ID：13356009
> 
> 赞同：2
> 
> 时间：2012-11-13T05:32:02.047
> 
> 标签：c#

尝试将字符串写入多维 int 映射。

```
1,1,1,1,1,1,1,1,1,1,1
1,0,0,0,0,0,0,0,0,0,1
1,0,0,0,0,0,0,0,0,0,1
1,0,0,0,0,0,0,0,0,0,1
1,1,1,1,1,1,1,1,1,1,1 
```

是的，你几乎可以猜到那是为了什么。碰撞地图。但无论如何，此信息存储在一个文件中。现在我得到了文件，转换和等等等等。我将只显示代码并显示我遇到问题的位置，这样可能更容易：

```
// Convert a string to multi-dim int array,
// format: 1,1,1,1|1,0,0,1|1,1,1,1|
private int[,] ConvertToMapArray(String data) 
{
    // Split to iterate rows and get row count.
    string[] rows = data.Split('|');

    // Initialize return data.
    int[,] ret;

    // Set row count to 0, increment each loop.
    int rc = 0;

    foreach (string row in rows)
    {
        // Split each number and iterate. Convert to int32 and and store in its own int array.
        string[] items = row.Split(',');

        // Initialize int array with proper row count.
        int[] newRow = new int[ items.Count() ];

        // Count set to 0 for foreach iteration, must increment.
        int ic = 0;

        foreach (string item in items )
        {
            // Convert string to int.
            int i int.Parse(item);

            // Add to newRow int array.
            newRow[ic++] = i;
        }

        // Add new int row to return multi-dim array.
        ret[rc++] = newRow;   /// <--- this doesnt work
    }

    return ret;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T05:39:59.653

你有`Rectangular`（二维）数组而不是`Jagged`数组。[**您可以在此处**](https://stackoverflow.com/questions/12567329/c-sharp-multidimensional-array-vs/12567404#12567404)了解这些数组类型。

```
int[,] ret; //Rectangular array. 
```

你需要像这样分配值

```
ret[0,0] = 1; 
```

所以你必须使用`for loop instead of foreach`来获取索引或行和列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T05:51:54.030

您不能将整行分配给 C# 中的多维数组。它不是数组数组。您应该：

1.  直接分配给行和列`ret`。例如替换`newRow[ic] = i`为`ret[rc, ic] = i`

2.  使用**锯齿状数组**而不是多维数组。锯齿状数组是数组的数组。因此，您可以为其分配一整行。如在

：

```
int[][] ret = new int[numberOfRows][];
...
ret[rc] = newRow; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T05:38:58.740

您已将其声明`ret`为多维数组，但您将其用作锯齿状数组。将声明更改为：

```
int[][] ret = new int[rows.Length][]; 
```

而且，只是为了好玩，整个事情可以简化为一个 Linq 查询：

```
private int[][] ConvertToMapArray(String data) 
{
    return data.Split(new [] {'|'}, StringSplitOptions.RemoveEmptyEntries)
               .Select(row => row.Split(',')
                                 .Select(item => {int i; Int32.TryParse(item, out i); return i;})
                                 .ToArray())
               .ToArray();
} 
```

或者，更具可读性：

```
private int[][] ConvertToMapArray(String arrayData) 
{
    var rowDelimiter = new [] {'|'};
    return arrayData.Split(rowDelimiter, StringSplitOptions.RemoveEmptyEntries)
                    .Select(row => ConvertToMapRow(row))
                    .ToArray();
}

private int[] ConvertToMapRow(String rowData) 
{
    return row.Split(',')
              .Select(item => 
                  {
                      int i; 
                      Int32.TryParse(item, out i); 
                      return i;
                  })
              .ToArray();
} 
```

# jquery - jquery渐进式文本框激活

> ID：13356010
> 
> 赞同：0
> 
> 时间：2012-11-13T05:32:07.997
> 
> 标签：jquery, input, textbox, keyup

我已经排列了许多文本框（数字不是恒定的）。使用 jquery，我使用了 each 函数来禁用除第一个函数之外的每一个函数。文本框被赋予 a`class = "user_inputs"`并且 ids 被逐步赋予`id="text1" , "text2"`，依此类推......

`$('input.user_inputs').each(function() {$(this.attr('disabled','true'}); $('input#text1').attr('disabled',false);`

我想要的是 - 如果第一个文本框中只有一个值，那么第二个文本框被激活，如果第二个文本框也有一个值，那么第三个文本框被激活，依此类推。我尝试了一个带有 keyup 函数的 for 循环，如下所示：

```
 var n=1
for(n;n<=total_textboxes;n++){
$('input#text' + n).keyup(function() {
    $('input#text' + n + 1).attr('disabled',false)
});//end keyup
}//end for 
```

这不起作用 - 相反，它阻碍了我的页面加载。

请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T06:01:42.927

尝试这个：

```
var inputs = $(".user_inputs");
for(var i = 1; i < inputs.length + 1; i++){
  var prev = $("#text" + (i - 1));
  if(prev.length){
    $("#text" + i).attr("disabled", prev.val() == '' ? true : false);
  }
} 
```

[http://jsfiddle.net/74Kzu/5/](http://jsfiddle.net/74Kzu/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T06:41:52.227

要删除一个属性，或者更好的是禁用属性，您必须使用：

```
 $('input#text' + n + 1).removeAttr('disabled'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T08:16:28.763

您实际上不需要使用`for(n;n<=total_textboxes;n++)`...`$.each()`并且`$.next()`也可以处理它

举个例子

**html:**

```
<input type="text" class="user_inputs" id="text1" />
<input type="text" class="user_inputs" id="text2" />
<input type="text" class="user_inputs" id="text3" />
<input type="text" class="user_inputs" id="text4" />
<input type="text" class="user_inputs" id="text5" />
<input type="text" class="user_inputs" />
<input type="text" class="user_inputs" />
<input type="text" class="user_inputs" />
<input type="text" class="user_inputs" /> 
```

**jQuery：**

```
$(document).ready(function(){
    // To demonstrate disable all first
    $('input.user_inputs').each(function() { $(this).attr('disabled','true'); });
    // Left only first one enabled
    $('input#text1').attr('disabled',false);
    // For each of your inputs
    $('input[type=text]').each(function() {
        // Search for "#text + (n + 1)" blabla.. named ones
        if ($.trim(this.id).indexOf("text") >= 0) {
            // Bind keyup
            $(this).keyup(function() {
                // Again search for "#text" named ones
                if ($.trim($(this).next().attr('id')).indexOf("text") >= 0) {
                    // Enable
                    $(this).next().attr('disabled', false);
                }
            });
        }
    });
}); 
```

**jsfiddle：http:** [//jsfiddle.net/BerkerYuceer/nFQjH/](http://jsfiddle.net/BerkerYuceer/nFQjH/)

# javascript - RequireJS：根据环境加载不同的文件

> ID：13356012
> 
> 赞同：6
> 
> 时间：2012-11-13T05:32:24.063
> 
> 标签：javascript, requirejs, test-environments

是否有根据当前项目环境（例如开发或生产）加载不同文件的功能？我的意思是，这有助于我透明地加载缩小或完整文件。我读到了多版本加载，但多版本意味着我需要指定文件的版本。
例如，我的模块中有 module.js 文件。在这个文件中，我需要加载 jQuery：

```
require(['jquery]); 
```

但是我有缩小版和完整版的 jQuery，我想加载不同的文件。我在配置中考虑这样的事情：

```
 require.config({
        paths: {
            'jquery' : function(){
                if( MODE == 'DEV' ){
                    return 'jquery';
                }else{
                    return 'jquery.min'
                }
            }
        }
    }); 
```

或者，也许，类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:48:04.733

如果您使用[r.js 优化器，](http://requirejs.org/docs/optimization.html)则可以为您处理此过程。在您的`scripts`文件夹中保留所有模块、库和其他未压缩的代码以用于开发目的。我经常有这样的事情

```
scripts/
    lib/
    modules/ 
```

准备好部署时，创建`build.js`并配置各种选项。我将举一个我使用过的类似配置的示例：

```
({
    baseUrl: '../scripts',
    dir: '../scripts.min',

    paths: {
        'jquery': 'lib/jquery'
    },

    removeCombined: true,

    optimize: 'uglify',
    preserveLicenseComments: false,
    uglify: {
        max_line_length: 3500,
        no_copyright: true
    },

    modules: [
        {
            name: 'module1'
        },
        {
            name: 'module2',
            exclude: ['jquery']
        }
    ]
}) 
```

[可以在此示例配置中找到](https://github.com/jrburke/r.js/blob/master/build/example.build.js)有关每个选项的更多详细信息，但我会提请注意`dir`和`removeCombined`

`dir`显然是您的脚本将结束的地方。我倾向于在我的脚本旁边创建一个带有后缀`.min`或类似名称的文件夹。然后，当您准备好投入生产时，只需将您的需求配置更改`baseUrl`为`scripts.min`

```
require.config({
    baseUrl: '/scripts.min' // Now the site will load scripts from the optimised folder

    // Other options
}) 
```

默认情况下，r.js 将复制所有脚本，无论它们是否已经合并到另一个 js 文件中。设置`removeCombined`为`true`将确保您的`scripts.min`文件夹仅包含生产所需的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-26T02:11:03.990

如果有人仍然想知道如何做到这一点：

```
require.config({
    paths: {
        'jquery' : (function(){
            if( MODE == 'DEV' ){
                return 'jquery';
            }else{
                return 'jquery.min'
            }
        })()
    }
}); 
```

该函数是自调用匿名函数。它立即在定义位置调用。

# ios - 如何调试 Apple App Loader 中的“应用程序引用非公共选择器”错误？

> ID：13356014
> 
> 赞同：2
> 
> 时间：2012-11-13T05:32:30.847
> 
> 标签：ios, xamarin.ios

将我的应用程序上传到 iTines 时，我收到“应用程序引用非公共选择器：connectionDidDisconnect：”。如何找到哪个模块调用了这样的选择器？

我的应用程序使用通过 Monotouch 绑定项目为单声道包装的 Twilio 客户端库，在该项目中我将 connectionDidDisconnect: 导出为 TCConnectionDelegate 包装器中的 ConnectionDidDisconnect。

```
 [BaseType (typeof (NSObject))]
[Model]
public interface TCConnectionDelegate 
{
    //@required
     //some code was removed
    /** The TCConnection has just disconnected. 
    @param connection The TCConnection has just disconnected.
    @returns None
    */
    //-(void)connectionDidDisconnect:(TCConnection*)connection;
    [Export ("connectionDidDisconnect:")]
    [Abstract]
    void ConnectionDidDisconnect(TCConnection xonn);

} 
```

代码工作得很好。只有当我将我的应用程序上传到 iTunes 时，我才会收到该错误。

Twilio lib 调用私有选择器 connectionDidDisconnect: 还是我的定义有问题？

我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T08:22:56.823

我相信 Apple 在二进制文件中进行了简单的字符串搜索以检查私有选择器。这意味着该字符串的任何使用都`connectionDidDisconnect:`可能导致 Apple 拒绝您的应用程序。

检查 Twilio 库是否包含特定字符串的一种方法是`strings`从终端使用该工具：

```
$ strings Twilio.dll | grep connectionDidDisconnect 
```

# vb.net - 仅从字符串中获取数字

> ID：13356018
> 
> 赞同：22
> 
> 时间：2012-11-13T05:33:09.377
> 
> 标签：vb.net, winforms

我只想从字符串中获取数字。

以免说这是我的字符串：

`324ghgj123`

我想得到：

```
324123 
```

我试过的：

```
MsgBox(Integer.Parse("324ghgj123")) 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-13T05:37:38.383

你可以用`Regex`这个

```
Imports System.Text.RegularExpressions 
```

然后在您的代码的某些部分

```
Dim x As String = "123a123&*^*&^*&^*&^   a sdsdfsdf"
MsgBox(Integer.Parse(Regex.Replace(x, "[^\d]", ""))) 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-13T05:35:16.617

试试这个：

```
Dim mytext As String = "123a123"
Dim myChars() As Char = mytext.ToCharArray()
For Each ch As Char In myChars
     If Char.IsDigit(ch) Then
          MessageBox.Show(ch)
     End If
Next 
```

或者：

```
Private Shared Function Num(ByVal value As String) As Integer
    Dim returnVal As String = String.Empty
    Dim collection As MatchCollection = Regex.Matches(value, "\d+")
    For Each m As Match In collection
        returnVal += m.ToString()
    Next
    Return Convert.ToInt32(returnVal)
End Function 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-13T05:43:01.147

或者您可以使用字符串是字符数组这一事实。

```
Public Function getNumeric(value As String) As String
    Dim output As StringBuilder = New StringBuilder
    For i = 0 To value.Length - 1
        If IsNumeric(value(i)) Then
            output.Append(value(i))
        End If
    Next
    Return output.ToString()
End Function 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-13T05:45:53.057

```
resultString = Regex.Match(subjectString, @"\d+").Value; 
```

会给你那个数字作为一个字符串。Int32.Parse(resultString) 然后会给你号码。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-16T19:54:03.063

实际上，您可以将其中一些单独的答案组合在一起，以创建一个单行解决方案，该解决方案将返回一个值为 0 的整数，或者一个整数，该整数是字符串中所有数字的串联。然而，不确定这有多大用处——这开始是一种只创建一串数字的方法......

```
 Dim TestMe = CInt(Val(New Text.StringBuilder((From ch In "123abc123".ToCharArray Where IsNumeric(ch)).ToArray).ToString)) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-14T13:09:20.433

返回不带数字的字符串的函数

```
Public Function _RemoveNonDigitCharacters(S As String) As String
        Return New String(S.Where(Function(x As Char) System.Char.IsDigit(x)).ToArray)
End Function 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-13T05:50:59.927

对于线性搜索方法，您可以使用此算法，它在 C# 中，但可以在 vb.net 中轻松翻译，希望对您有所帮助。

```
string str = “123a123”;

for(int i=0;i<str.length()-1;i++)
{
    if(int.TryParse(str[i], out nval))
        continue;
    else
        str=str.Rremove(i,i+1);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-26T15:06:13.787

```
str="something1234text456"   

Set RegEx = CreateObject("vbscript.regexp")
RegEx.Pattern = "[^\d+]"
RegEx.IgnoreCase = True
RegEx.Global = True
numbers=RegEx.Replace(str, "")(0)
msgbox numbers 
```

# c# - 如何从 Excel 工作表中复制非空单元格？

> ID：13356019
> 
> 赞同：0
> 
> 时间：2012-11-13T05:33:12.330
> 
> 标签：c#, excel, ms-word, office-interop

我正在编写一个将 Excel 工作表粘贴到 Word 文档中的 C# 应用程序。

```
using Excel = Microsoft.Office.Interop.Excel;
using Word = Microsoft.Office.Interop.Word;

Excel.Worksheet ws = wb.Worksheets[1];        
// select all then copy to clipboard
ws.get_Range("a1").EntireRow.EntireColumn.Copy();
var wordApp = new Word.Application();
wordApp.Visible = true;
wordApp.Documents.Add();
wordApp.Selection.PasteSpecial(Link: true); 
```

上面的代码可以正常工作，但 Word 默认将对象粘贴为 HTML，并且会打乱文档布局。

所以我尝试手动粘贴（ctrl-alt-v）并选择“Microsoft Office Excel 2003 Worksheet object”（期望这也可以通过C#完成），这次粘贴整个工作表（可能是65535 * 65535）并且重要单元格被最小化。

工作表包含图表和位图，因此很难计算图表/位图末尾下方的单元格坐标。

是否有任何快捷方式可以仅选择 Excel 中的非空单元格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:06:24.583

*是否有任何快捷方式可以仅选择 Excel 中的非空单元格？* - 是的。尝试这样做： .要`wholeRange = sheet.Cells.SpecialCells(XlCellType.xlCellTypeConstants, Type.Missing);`测试此功能，您可以按 F5->Special.. 并尝试其他选项。

# python - 在哪里可以得到 PyPI 包按下载时间排序的顺序？

> ID：13356021
> 
> 赞同：2
> 
> 时间：2012-11-13T05:33:54.647
> 
> 标签：python, pip, setuptools, distribute, pypi

我在官方网站上没有找到。

我用谷歌搜索并得到了这个：

[http://pypi-ranking.info/alltime](http://pypi-ranking.info/alltime)

但是我不知道这里列表的准确性，也没有说这是通过直接下载或依赖下载的顺序。

还有其他地方可以得到排名吗？

# jquery - 如何将json数据放在jquery变量中

> ID：13356023
> 
> 赞同：0
> 
> 时间：2012-11-13T05:33:55.833
> 
> 标签：jquery, json

我正在尝试使用 keyup 事件通过 jquery 将一些文本加载到文本字段中。文本需要通过json抓取，并存储在变量'value'中。如何将存储在 json 中的文本放入此变量中？我已经尝试过了，但它不起作用：

```
 var value = html(json['total']); 
```

我在下面提取了我的 jquery 代码的相关部分。谢谢。

```
var Run;
 $('input[name*=\'quantity\']').keyup(function(e){
 ctrl = $(this);
 $('.loading').remove();
 ctrl.before('<img class="loading" src="catalog/view/theme/default/image/loading.gif" alt="" />');
 clearTimeout(Run);
 Run = setTimeout(function(){
  if (!ctrl.val() || ctrl.val() == 0) {
    $('.loading').remove();
    ctrl.val(qty);
    return false;
  }
  $.ajax({
    url: 'index.php?route=checkout/cart/quantity',
    type: 'post',
    data: ctrl,
    dataType: 'json',
    success: function(json){
      row = ctrl.parent().parent();
      ctrl.parent().css('width',ctrl.parent().width());
      $('#content h1').html(json['cart_heading']);
      $('#cart_total').html(json['header_cart_total']);
      var value = html(json['total']);
      row.find('.total').html(json['total']);
      row.find('.price').html(json['price']);
      row.find('.total').prepend('<input type="text" value="' + value + '" name="total" />');

      html='';
      for (i in json['totals']) {
        html += '<tr>';
        html += '<td colspan="5"></td>';
        html += '<td class="right"><b>' + json['totals'][i]['title'] + '</b></td>';
        html += '<td class="right">' + json['totals'][i]['text'] + '</td>';
        html += '</tr>';
      }
      $('.cart-total table').fadeOut(500,function(){
        $('.cart-total table tr').remove();
        $('.cart-total table').append(html).fadeIn(500);
      });
      $('.loading').remove();
    }
  });
},800);
}); 
```

# php - 从 PHP 运行 Python

> ID：13356024
> 
> 赞同：0
> 
> 时间：2012-11-13T05:33:57.407
> 
> 标签：php, python, caching, egg

我有一个作为守护进程运行的 python 脚本。我希望能够通过网页停止和启动该过程。我制作了一个在 python 守护程序上运行 exec() 的 PHP 脚本。任何想法？

> Traceback（最近一次调用最后）：文件“/home/app/public_html/daemon/daemon.py”，第 6 行，从 socketServer 导入 ExternalSocketServer，InternalSocketServer 文件“/home/app/public_html/daemon/socketServer.py”，第 3 行，在
> import json、asyncore、socket、MySQLdb、hashlib、urllib、urllib2、logging、traceback、sys 文件“build/bdist.linux-x86_64/egg/MySQLdb/ **init** .py”中，第 19 行，在文件“build /bdist.linux-x86_64/egg/_mysql.py”，第 7 行，文件“build/bdist.linux-x86_64/egg/_mysql.py”，第 4 行，在 **引导程序中** python-eggs 也许您的帐户没有对该目录的写入权限？您可以通过将 PYTHON_EGG_CACHE 环境变量设置为指向可访问目录来更改缓存目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T05:38:52.280

确保运行 php 的任何用户都具有适当的权限。您可以尝试打开管道并更改用户，或者只使用 apache 的 suexec。

# oracle - 显示编号 使用匿名块的部门中的员工

> ID：13356026
> 
> 赞同：0
> 
> 时间：2012-11-13T05:34:09.200
> 
> 标签：oracle

创建一个匿名块，该块将显示指定部门编号的员工人数（使用替换变量）。也显示部门名称。

我已经尝试过了，但我不明白为什么它不运行，这是我的代码：

```
DECLARE 
dep_id NUMBER :=depid;
dep_name VARCHAR2(20);
emp_id NUMBER;

BEGIN
SELECT department_id, department_name
INTO dep_id, dep_name
FROM departments 
WHERE department_id = dep_id;

SELECT count(employee_id), department_id
INTO emp_id, dep_id
FROM employees
WHERE employee_id = department_id
DBMS_OUTPUT.PUT_LINE(count(employee_id));

EXCEPTION
 WHEN NO_DATA_FOUND THEN
  DBMS_OUTPUT.PUT_LINE(‘No such department');
 END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T05:56:23.420

在不涉及性能问题以及最好的方法是什么的情况下，您似乎必须解决一些问题：

1) `dep_id NUMBER :=depid;`-`depid`从哪里来？如果您使用的是 sqlplus，那么您可以

```
dep_id NUMBER := &depid; 
```

这将提示用户输入 depid。

2) `DBMS_OUTPUT.put_line (COUNT (employee_id));`-`COUNT (employee_id)`是 sql 查询的一部分，你不能只是从你的 plsql 代码中“调用”它。您应该做的是使用`emp_id`您选择的变量`COUNT (employee_id)`：

```
DBMS_OUTPUT.put_line (emp_id); 
```

# php - Slim 框架不会路由超过几个 GET 路由

> ID：13356027
> 
> 赞同：0
> 
> 时间：2012-11-13T05:34:13.883
> 
> 标签：php, slim

我无法让 Slim 给我超过几个 GET 路由的响应：这是我的代码：

```
<?php

ini_set('display_errors', 'On');
error_reporting(E_ALL);

require 'Slim/Slim.php';
\Slim\Slim::registerAutoloader();

$app = new \Slim\Slim();

$app->config(array(
   'templates.path' => './templates'
));

$app->get('/', function () use ($app) {
    $app->render('landing.php');
});

$app->get('/about', function () use ($app) {
    $app->render('about.php');
});

$app->get('/signup', function () use ($app) {
    $app->render('signup.php');
});

$app->get('/dashboard', function () use ($app) {
    $app->render('dashboard.php');
});

$app->run();

?> 
```

当我运行时它工作正常`localhost:8888`，Slim 渲染`landing.php`正常，如果我输入`localhost:8888/index.php/about`它会渲染关于页面，但是一旦我输入它`localhost:8888/index.php/signup`就会`localhost:8888/index.php/dashboard`失败并出现 404 错误。任何帮助，将不胜感激。

澄清一下，我没有在我的服务器上设置 URL 重写（给了我其他类型的错误），而且我试图渲染的文件确实存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T05:44:51.643

我编辑了错误的文件，对不起，我的错。

# mysql - 防止空值被插入到主键列的表中

> ID：13356032
> 
> 赞同：1
> 
> 时间：2012-11-13T05:34:39.000
> 
> 标签：mysql, database, primary-key

不知道是数据库问题还是什么。对于我数据库中的所有表，对于声明为主键的列在查询时采用 NULL 值或默认值

```
INSERT INTO TABLE (emp_name,emp_addr,emp_contact,salary) 
values ('Jack','127 N F 14 Stillwater','3456786543',8) 
```

表由 组成`emp_id(primary key), emp_name, emp_addr, emp_contact and salary`。

如果我想插入一个元组

```
INSERT INTO EMPLOYEE values (NULL,'Jack','127 N F 14 Stillwater','345678543',8) 
```

，它抛出主键不能为空的错误，这是应该的。

我的表创建脚本是..

```
 create table Employee(
    emp_id int(11) primary key,
    emp_name varchar(25) not null,
    emp_addr varchar(40) not null,
    emp_contact varchar(10),
    salary float(2)
    )ENGINE=INNODB;

This is what is happening in my DB
 create table sale(sale_id varchar(10) primary key not null,sold_vehicle varchar(12),sm_id int(11),                                                                sale_date date)ENGINE=INNODB;
Query OK, 0 rows affected (0.01 sec)

mysql> insert into sale values('s2389','AP28DJ5093',1290,'05-12-2010');
Query OK, 1 row affected, 1 warning (0.00 sec)

mysql> insert into sale values('s2420','AP28MY0545',1290,'24-10-2012');
Query OK, 1 row affected, 1 warning (0.00 sec)

mysql> select * from sale;
+---------+--------------+-------+------------+
| sale_id | sold_vehicle | sm_id | sale_date  |
+---------+--------------+-------+------------+
| s2389   | AP28DJ5093   |  1290 | 0000-00-00 |
| s2420   | AP28MY0545   |  1290 | 0000-00-00 |
+---------+--------------+-------+------------+
2 rows in set (0.00 sec)

mysql> update sale set sale_id = null where sale_id = 's2389';
Query OK, 1 row affected, 1 warning (0.01 sec)
Rows matched: 1  Changed: 1  Warnings: 1

mysql> select * from sale;
+---------+--------------+-------+------------+
| sale_id | sold_vehicle | sm_id | sale_date  |
+---------+--------------+-------+------------+
|         | AP28DJ5093   |  1290 | 0000-00-00 |
| s2420   | AP28MY0545   |  1290 | 0000-00-00 |
+---------+--------------+-------+------------+
2 rows in set (0.00 sec)

mysql> desc sale;
+--------------+-------------+------+-----+---------+-------+
| Field        | Type        | Null | Key | Default | Extra |
+--------------+-------------+------+-----+---------+-------+
| sale_id      | varchar(10) | NO   | PRI | NULL    |       |
| sold_vehicle | varchar(12) | YES  |     | NULL    |       |
| sm_id        | int(11)     | YES  |     | NULL    |       |
| sale_date    | date        | YES  |     | NULL    |       |
+--------------+-------------+------+-----+---------+-------+
4 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T05:40:53.030

您不能将主键字段设为空。并且您必须将 not null 作为主键。否则，拥有主键有什么意义？:) 请将您的创建查询更改为：

`CREATE table tblblah(ID NOT NULL PRIMARY KEY,`...等等

```
; 
```

`INSERT INTO table tblblah(ID, ..`..等等

```
; 
```

根据您的表架构填充它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T05:39:50.250

在创建表时添加`AUTO_INCREMENT`选项

```
create table Employee
(
emp_id int(11) AUTO_INCREMENT primary key,
emp_name varchar(25) not null,
emp_addr varchar(40) not null,
emp_contact varchar(10),
salary float(2)
)ENGINE=INNODB; 
```

# c - 调试断言在 fread() 处失败

> ID：13356036
> 
> 赞同：0
> 
> 时间：2012-11-13T05:35:12.007
> 
> 标签：c

test.bin 的大小为 7,01,760 字节。我正在尝试在缓冲区 bufferPointer 中将此文件中的日期读取为“短”。

```
short * bufferPointer=NULL; 
// ==> ANSWER WAS ADDING: bufferPointer = ( short*)malloc(350880); <==
FILE *fp=fopen(" test.bin","rb");
fread(bufferPointer,sizeof(short),350880 ,fp); 
fclose(fp); 
```

我在 fread() 处收到调试断言失败。为什么？

MSVC2010，Windows-7-32 位

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T05:44:43.187

您为缓冲区分配了 350880 个字节，但尝试读取 350880 个短裤。尝试

```
bufferPointer = malloc(350880 * sizeof *bufferPointer); 
```

（请注意，强制转换 malloc 不是必需的，并且不赞成，因为它可以隐藏错误。）

您还应该检查 malloc、fopen 和 fread 调用是否有错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T05:37:58.710

您应该首先`bufferPointer`使用`malloc`. 然后您可以使用`fread`从文件中读取到该缓冲区。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T05:44:14.327

sgar91 是正确的。你试一试：

```
short * bufferPointer = (short *)malloc(350880*sizeof(short)); 
if (bufferPointer == NULL)
{
  // TODO: error handling
}

FILE *fp = fopen("test.bin", "rb");
if (fp == NULL)
{
  // TODO: error handling
}

fread(bufferPointer, sizeof(short), 350880, fp); 
fclose(fp); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T05:47:09.217

试试这个

```
short bufferPointer[350880]; 
FILE *fp=fopen("test.bin","rb");
fread(bufferPointer,sizeof(short),350880 ,fp); 
fclose(fp); 
```

这里的东西很少

1）您不能以这种方式直接使用指针。像上面那样静态分配内存或使用 malloc 动态分配

2) 字符串“test.bin”的开头有一个空格。删除前导空格。

3）即使上述方法有效，也可能不会给您带来有意义的结果。`fread`读取由 . 编写的内容`fwrite`。即文件是使用`fwrite`写作`short`s创建的吗？如果没有，您阅读的内容可能毫无意义。

# hadoop - 无法连接到 EC2 上的 JobHistoryServer

> ID：13356037
> 
> 赞同：1
> 
> 时间：2012-11-13T05:35:13.393
> 
> 标签：hadoop, amazon-ec2, hadoop-yarn

我使用 Whirr 0.8 在 EC2 上部署了一个 CDH4 集群（MapReduce 版本 2，YARN）。MapReduce 作业运行良好，我可以毫无问题地连接到`NameNode`Web`Resource Manager`应用程序。但我无法连接到`JobHistoryManager`Web 应用程序，并且我已确认它正在运行。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-07-03T19:38:21.057

您需要首先通过执行以下命令来启动 JobHistory Server

```
mr-jobhistory-daemon.sh --config $HADOOP_HOME/etc/hadoop start historyserver 
```

然后转到您的浏览器以下任何一项

`https://localhost:19888`或者`http://127.0.0.1:19888`

要验证 JobHistroy Server 是否正在运行`JPS`，您应该会看到所有正在运行的服务的列表

```
2800 DataNode
12497 JobHistoryServer
3524 NodeManager
12981 Jps
2615 NameNode
3053 SecondaryNameNode
3390 ResourceManager 
```

# sms-gateway - SMS 网关 - 它们是用什么语言编写的？

> ID：13356038
> 
> 赞同：0
> 
> 时间：2012-11-13T05:35:13.990
> 
> 标签：sms-gateway

我想有一种方法让移动设备与我的 Web 应用程序（不是浏览器，而是文本消息）进行交互。我知道 SMS 网关可能是正确的选择。

我想在我的服务器上向电子邮件地址发送“一些命令”，然后让我的服务器执行该命令。这就是短信网关的用途吗？为什么要向您收费的公司提供的唯一可用网关？它们有那么难做吗？它涉及什么过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T05:37:52.287

并不是它们很难制作，而是运营商向他们收取访问网络以发送/接收 SMS 消息的费用。

当您通过网关发送 SMS 时，网关会向您收费，而运营商也会向您收费。

它们与语言无关，我知道有些是用 Perl 编写的，有些是用 Java 和 C 编写的。

# mysql - 转储一个具有限制和所有关联的数据库表的最佳方法

> ID：13356041
> 
> 赞同：3
> 
> 时间：2012-11-13T05:35:18.230
> 
> 标签：mysql, ruby-on-rails, yaml, mysqldump, dump

```
class Profile < ActiveRecord::Base
  has_many :favorites, :dependent => :destroy
  has_many :friends, :dependent => :destroy
end 
```

我需要这样的东西：

```
mysqldump --opt --where="1 limit 1000" -uroot development profiles  > profiles.sql 
```

但是这个转储（如预期的那样）仅包含 1000 个配置文件行，没有关联的朋友、收藏夹。

我应该使用 YAML 还是应该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T13:29:23.400

获取前 5000 条记录：

```
mysqldump --opt --where="1 limit 5000" -uroot development profiles  > profiles.sql 
```

然后查找所有与此记录相关的朋友：

```
mysqldump --opt --lock-all-tables --where="profile_id IN (SELECT * FROM (SELECT id FROM profiles LIMIT 5000) temp);" -uroot development friends  > friends.sql 
```

# ssas - SSAS MDX NonEmpty 问题

> ID：13356044
> 
> 赞同：2
> 
> 时间：2012-11-13T05:35:52.590
> 
> 标签：ssas, mdx

运行查询时遇到问题：

```
WITH MEMBER [Measures].[Test1] AS
(
SUM({NONEMPTY(EXISTING(([Product].[Product].[All].Children,[Month].[Month].[All].Children])),  [Measures].[Measure1])}, [Measures].[Measure1])
)
SELECT {[Measures].[Test1],[Measure1]} ON 0
([Product].[Product].Children) ON 1
FROM
[CUBE]
WHERE
([Month].[Month].[Jan]:[Month].[Month].[Dec]) 
```

基于我对 MDX 的有限了解，我假设 [Test1] 和 [Measure1] 应该返回相同的结果。

根据我在 where 子句中输入的内容（即更改月份），即使 [Measure1] 有值，我也无法得到 [Test1] 的结果。

如果我将 [Measure1] 更改为同一事实表 [Measure2] 中的另一个度量，则不会出现此问题。

[Measure1] 只是一个标准度量，它没有计算或限定范围等。我知道 NONEMPTY 不需要在那里，如果我删除它，查询会按预期工作，但我想知道为什么它似乎过滤出非空数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:10:02.093

男士（和女士），看起来这实际上是一个 Microsft 分析服务错误。 [http://support.microsoft.com/kb/2606211](http://support.microsoft.com/kb/2606211) 我安装了累积更新，它已经解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T12:38:02.390

好吧，我会删除`existing`. 我认为没有理由使用它，它可能会导致错误，根据

> 默认情况下，集合在包含集合成员的多维数据集的上下文中进行评估。Existing 关键字强制指定的集合在当前上下文中进行评估。

[资源](http://msdn.microsoft.com/en-us/library/ms145541.aspx)

您的查询似乎是在另一个上下文中执行的。

# css - 如何设置绝对位置div

> ID：13356048
> 
> 赞同：0
> 
> 时间：2012-11-13T05:36:28.610
> 
> 标签：css, html, css-position

我在另一个 div 的下方设置了一个绝对位置 div。当我最大化或最小化浏览器按 ctrl +/- 时，我的绝对位置 div 不会保持原来的位置。请有人能指出我在这里可能做错了什么吗？非常感谢。这是我的代码：

```
<html>
    <head>
        <title>Test Page</title>
        <style type="text/css">
            body
            {
                margin: 0px;
                padding: 0px;
            }
            #header
            {
                width: 980px;
                height:80px;
                background: #006666;
                margin: 0 auto;
            }

            #content
            {
                color: white;
                padding-top: 30px;
                margin-left: 200px;
            }

            #menu
            {
                position: absolute;
                top:50px;
                left:222px;
                width: 100px;
                height: 20px;
                background: red;
            }                
    </style>
    </head>
    <body>
        <div id="header">
            <div id="content">Uttara.hr</div>
            <div id="menu"></div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T05:42:05.377

我猜你需要的是`div`文本下方的红色，所以你需要给`position: relative;`父 div，这样绝对定位的 div 就不会在野外流出

[**演示**](http://jsfiddle.net/kV7Rh/)

（注意：您现在可以根据需要调整 div）

CSS

```
#header {
    width: 980px;
    height:80px;
    background: #006666;
    margin: 0 auto;
    position: relative; <---------Here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T05:46:15.180

您必须设置`#header` 为绝对定位或相对定位以将其子项的内容保留在其中。

或者您可以将两者都`#content`设置`#menu`为绝对位置，然后它们会随着屏幕的调整一起移动

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T05:49:24.913

为最外面的 div 选择 css 并设置其相对位置，然后为所有 div 设置所有位置。

对于你最外面的 div：

```
style="position: relative;" 
```

# javascript - 创建动态元素和 document.write

> ID：13356049
> 
> 赞同：0
> 
> 时间：2012-11-13T05:36:48.870
> 
> 标签：javascript, jquery, dom

如何在当前元素中使用 jquery 添加动态创建的元素。

```
<div>
   <script>
      LoadWidget("Hello");
   </script>
</div>

.
.
.
.

<script>
   function LoadWidget(name){
      //For example:
      var widget = $("<p />").html(name);
      document.write(widget.?????????);
   }
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T05:44:50.817

如果你真的想得到一个元素的 html，你可以这样做

```
widget[0].outerHTML 
```

或者，更多的 jQuery 风格：

```
widget.wrap("<div>").parent().html() 
```

但是，您最好使用 jQuery`append`函数将元素添加到页面，方法是执行类似的操作

```
$("body").append(widget) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T05:42:29.850

**步骤 1** 添加一个`<div>`ID 为 的`wiget`。这将是通过您的`LoadWidget()`函数动态附加元素的容器。

```
 <div>
<div id="widget"></div>

<script>
    LoadWidget("Hello");
</script>
</div>

            .
            .
            .
            .

<script>
function LoadWidget(name)
{
    if(name)
    {
                  /*
                   * Use the widget HTML element to place the name
                   * into the widget container
                   *
                   */

        $('#wiget').html('<p>'+name+'</p>');
                    /* OR */

                   /* $('body').html('<p>'+name+'</p>'); */

    }
    else
    {
        return false;
    }
}
</script> 
```

# android - 如何创建android shell脚本来编辑xml中的字符串

> ID：13356050
> 
> 赞同：1
> 
> 时间：2012-11-13T05:36:48.857
> 
> 标签：android, xml, bash, unix

**这是我要编辑的 xml 文件**

```
<?xml version='1.0' encoding='utf-8' standalone='yes' ?>
<map>
<boolean name="public_checkins" value="false" />
<string name="checkins">[{&quot;storeName&quot;:&quot;Rundle Street&quot;,&quot;prize&quot;:&quot;price_fwh&quot;,&quot;checkinTime&quot;:1352717951195,&quot;prizeClaimed&quot;:false,&quot;storeId&quot;:57,&quot;expired&quot;:false},{&quot;storeName&quot;:&quot; Street&quot;,&quot;prize&quot;:&quot;price_fmf&quot;,&quot;checkinTime&quot;:1352717723886,&quot;prizeClaimed&quot;:false,&quot;storeId&quot;:57,&quot;expired&quot;:false}]</string>
*<string name="uuid">30212345-0c1e-dcb-974e-5effa7f016be</string>*
</map> 
```

我正在尝试创建一个 shell 脚本来编辑字符串 uuid，并在每次运行脚本时用随机生成的数字序列替换 uuid。

下面是我想出的脚本。

```
#!/system/bin/sh

set number=$RANDOM

echo "<?xml version='1.0' encoding='utf-8' standalone='yes' ?>
<map>
<boolean name="public_checkins" value="false" />
<string name="checkins">[{&quot;storeName&quot;:&quot; Street&quot;,&quot;prize&quot;:&quot;price_fwh&quot;,&quot;checkinTime&quot;:1352717951195,&quot;prizeClaimed&quot;:false,&quot;storeId&quot;:57,&quot;expired&quot;:false},{&quot;storeName&quot;:&quot;Rundle Street&quot;,&quot;prize&quot;:&quot;price_fmf&quot;,&quot;checkinTime&quot;:1352717723886,&quot;prizeClaimed&quot;:false,&quot;storeId&quot;:57,&quot;expired&quot;:false}]</string>
<string name="uuid">302$number-0c1e-dcb-974e-5effa7f016be</string>
</map>
" > /data/data/com.app/shared_prefs/app.xml 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T08:49:59.087

```
<?xml version='1.0' encoding='utf-8' standalone='yes' ?>
<map>
<string name="uuid">302%1$s-0c1e-dcb-974e-5effa7f016be</string>
</map> 
```

现在您可以使用这种格式来获取如下字符串

```
String uuid = String.format(getResources().getString(R.string.uuid), YourUUIDNumber); 
```

您将收到完整的字符串

```
302xxxxxx-0c1e-dcb-974e-5effa7f016be 
```

其中 xxxxxxx 是您在字符串的格式方法中传递的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T09:06:13.887

Perl 会更适合这个

```
file=/data/data/com.app/shared_prefs/app.xml
mv $file $file.bak
{
 arr=({0..9} {a..f})
 while IFS=\> read -d\< tag str; do
  if [[ $tag = *'name="uuid"'* ]]; then
   randomstr=
   for ((i=0;i<32;i++)); do
    if ((i%4==0 && i/4>=2 && i/4<6)); then
     randomstr=$randomstr-
    fi
    randomstr=$randomstr${arr[RANDOM%16]}
   done
  printf "%s" "$tag${str:+>}$randomstr<"
  else
   printf "%s" "$tag${str:+>}$str<"
  fi
 done
 printf "%s\n" "$tag>"
} <$file.bak >$file
# rm $file.bak # 
```

# iphone - 在 plist iPhone 中保存事件及其发生的时间

> ID：13356058
> 
> 赞同：0
> 
> 时间：2012-11-13T05:37:48.310
> 
> 标签：iphone, objective-c, ios, uiresponder, uievent

我有一个 UIViewcontroller，里面有不同的 UI 元素。我想找到一种方法来跟踪该视图上发生的事件、它的发生点以及事件发生的时间，而无需进行任何硬编码以将其保存在相应的操作中。此外，该过程不应中断正在发生的事件。我想将这些细节保存到一个 plist 中。有人可以告诉我如何实现这个吗？任何建设性的建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T05:48:24.803

在对该部分进行了大量挖掘之后，我在以下链接中找到了我的问题的解决方案。 [http://www.cocoawithlove.com/2008/11/automated-user-interface-testing-on.html](http://www.cocoawithlove.com/2008/11/automated-user-interface-testing-on.html) 希望能帮助那些寻找解决方案的人。但是，使用所提供解决方案的应用程序将被应用商店拒绝。它只能用于您自己的目的。

# javascript - 反应时间游戏

> ID：13356063
> 
> 赞同：1
> 
> 时间：2012-11-13T05:38:25.700
> 
> 标签：javascript, facebook

我正在开发一个小型 Facebook 游戏，用户可以在其中测试他们的反应速度。

基本上，用户加入游戏后，灯光会随机改变颜色，用户必须尽快点击。

由于游戏完全基于 javascript，我担心“聪明”的用户只能更改 javascript 并利用它来发挥自己的优势。

有办法防止这种情况吗？我怎么能阻止人们弄乱javascript并给自己不可能的分数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T05:51:22.763

好吧，既然 JavaScript 在浏览器中兼容，那么用户总是可以通过一种方式来更改代码以使其受益。通过使用 Google 闭包编译器来缩小代码，您可能会使事情变得非常复杂。此外，将所有方法添加到函数闭包中，以使从控制台更难访问您的方法，如下所示

```
(function(window){....}()); 
```

# mod-rewrite - mod_rewrite 子域重定向，除非指定文件夹

> ID：13356072
> 
> 赞同：2
> 
> 时间：2012-11-13T05:39:39.227
> 
> 标签：mod-rewrite

如果未指定特定文件夹，我将如何进行 mod_rewrite 以重定向到不同的子域？例如：

*   test.example.com --> 重定向.example.com
*   test.example.com/~user/* -- 无重定向
*   test.example.com/dir/ --> 重定向.example.com

到目前为止我有

```
ReWriteCond %{HTTP_HOST} =test.example.com [NC]
ReWriteRule ^ http://redirect.example.com [L,R] 
```

不确定在什么条件下使用用户目录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T08:16:24.827

您可以添加另一个不包括特定文件夹的 ReWriteCond：

```
RewriteCond %{REQUEST_URI} !^/(~user|/.*)$
ReWriteCond %{HTTP_HOST} test.example.com [NC]
ReWriteRule ^$ http://redirect.example.com [L,R] 
```

*并且*您应该删除其他 ReWriteCond 中的“=”。

# c# - 如何在 linq to NHibernate 中使用 select 进行关联

> ID：13356074
> 
> 赞同：2
> 
> 时间：2012-11-13T05:39:57.443
> 
> 标签：c#, linq, nhibernate, select, linq-to-nhibernate

我有一个**NHibernate**实现的应用程序。我的项目有一个`Person`类：

```
public class Person : RootEntityBase
{    
    virtual public string FirstName { get; set; }
    virtual public string LastName { get; set; }
    virtual public string FatherName { get; set; }

    virtual public IList<Asset> Assets { get; set; }
    virtual public IList<PersonPicture> PersonPictures { get; set; }
} 
```

通过这个映射：

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="Domain" namespace="Domain.Entities">
  <class name="Person" table="Person_Person" >

    <id name="Id">
      <generator class="native" />
    </id>

    <property name="FirstName" not-null="true"/>

    <property name="LastName" not-null="true"/>

    <property name="FatherName" not-null="true"/>

    <bag name="Assets" inverse="true" table="Person_Asset" cascade="all-delete-orphan" >
      <key column="Person_id_fk"/>
      <one-to-many class="Asset"/>
    </bag>

    <bag name="PersonPictures" inverse="true" table="Person_PersonPicture" cascade="all-delete-orphan" >
      <key column="Person_id_fk"/>
      <one-to-many class="PersonPicture"/>
    </bag>

  </class> 
```

我需要 linq 的查询，它有一个对 Person 的某些属性的选择。

```
var q = SessionInstance.Query<Person>()
               .Select(x => new Person(x.Id)
                                  {
                                      FirstName = x.FirstName,
                                      LastName = x.LastName,
                                      PersonPictures = x.PersonPictures //this line has error
                                  })
               .ToList(); 
```

通过添加`PersonPictures`到选择，此查询通过此消息具有运行时异常：

```
could not execute query\r\n[ select person0_.Id as col_0_0_, person0_.FirstName as col_1_0_, person0_.LastName as col_2_0_, ... 
```

内部异常的消息是：

```
Incorrect syntax near the keyword 'as'. 
```

堆栈跟踪是：

```
 at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces, IType[] resultTypes)
   at NHibernate.Hql.Ast.ANTLR.Loader.QueryLoader.List(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Hql.Ast.ANTLR.QueryTranslatorImpl.List(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Engine.Query.HQLQueryPlan.PerformList(QueryParameters queryParameters, ISessionImplementor session, IList results)
   at NHibernate.Impl.SessionImpl.List(IQueryExpression queryExpression, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(IQueryExpression queryExpression, QueryParameters parameters)
   at NHibernate.Impl.ExpressionQueryImpl.List()
   at NHibernate.Linq.NhQueryProvider.ExecuteQuery(NhLinqExpression nhLinqExpression, IQuery query, NhLinqExpression nhQuery)
   at NHibernate.Linq.NhQueryProvider.Execute(Expression expression)
   at NHibernate.Linq.NhQueryProvider.Execute[TResult](Expression expression)
   at Remotion.Data.Linq.QueryableBase`1.GetEnumerator()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T07:16:43.773

我不是 Linq To nHibernate ninja，但是下面的呢？

```
var q = SessionInstance.Query<Person>().Fetch(p => p.PersonPictures).ToList(); 
```

你需要做那个投影吗？我已经从我的答案中省略了它，但如果需要可以添加它。

参考：

[用于 NHibernate 的 Linq 和预加载的 fetch 模式](https://stackoverflow.com/questions/831794/linq-for-nhibernate-and-fetch-mode-of-eager-loading)

[NHibernate Linq 提供程序中的 Fetch 与 FetchMany](https://stackoverflow.com/questions/4394692/fetch-vs-fetchmany-in-nhibernate-linq-provider)

[http://mikehadlow.blogspot.co.nz/2010/08/nhibernate-linq-eager-fetching.html](http://mikehadlow.blogspot.co.nz/2010/08/nhibernate-linq-eager-fetching.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:10:21.433

我不明白您为什么要尝试进行以下查询：

```
var q = SessionInstance.Query<Person>()
           .Select(x => new Person(x.Id)
                              {
                                  FirstName = x.FirstName,
                                  LastName = x.LastName,
                                  PersonPictures = x.PersonPictures //this line has error
                              })
           .ToList(); 
```

映射和域类看起来正确。因此，您应该简单地进行以下操作：

```
IList<Person> persons = (from p in SessionInstance.Query<Person>()
select p).ToList(); 
```

如果要对图片应用过滤器：

```
IList<Person> persons = (from p in SessionInstance.Query<Person>()
select p
where p.PersonPictures.Any(pp => pp.Property == [...]).ToList(); 
```

无需重新映射每个属性，这是 NHibernate 映射 + NHibernate LINQ 提供程序的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T07:31:34.380

你的映射是正确的。使用 Criteria API 时，我可以达到预期的结果。

但是您引用的问题是已知的并已报告： [https ://nhibernate.jira.com/browse/NH-2707](https://nhibernate.jira.com/browse/NH-2707)

但恐怕，不固定。因此，如果您可以（在这种情况下）使用标准：

```
// example returning the complete list
var query = session.CreateCriteria<Preson>().List<Person>(); 
```

然后你可以继续：

```
query.Select(x => new Person(x.Id)
... 
```

# javascript - 日期在 IE 中显示为 NaN？

> ID：13356077
> 
> 赞同：0
> 
> 时间：2012-11-13T05:40:48.173
> 
> 标签：javascript

我知道网上已经对此进行了一些介绍，但不幸的是，我仍然不太确定如何修改这段特定的代码：

```
timeCreated: function(dateString) {     
    var date = new Date(dateString);
    var monthNames = [ "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" ];

    var hh = date.getHours();
    var m = date.getMinutes();
    var dd = "AM";  
    var h = hh;

    if (h >= 12) {
        h = hh-12;
        dd = "PM";
    }
    if (h == 0) {
        h = 12;
    }

    return h + ':' + date.getMinutes().toString() + ' ' + dd + ' ' + monthNames[date.getMonth()] + ', ' + date.getDate().toString() + ', ' +  date.getFullYear().toString();

} 
```

dateString 输出为`Tue Nov 06 23:29:33 +0000 2012`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T06:19:42.730

您输入的日期格式与任何标准格式都不匹配，因此`IE`无法解析它，即**无法构造正确的日期对象。**

由于您的`Date`对象构造不正确，所有方法调用（例如`date.getHours();`和`date.getMinutes();`）都返回 NaN。

如果您以可接受的格式使用日期字符串，例如 dateString = "Nov 06 2012 23:29:33 +0000"，**则它可以正常工作。**

如果您想支持自定义格式基础数据解析，请查看 [http://www.mattkruse.com/javascript/date/](http://www.mattkruse.com/javascript/date/)，它有一个很大的自定义方法`getDateFromFormat(val,format)`可以将任何特定格式的日期字符串转换为 Date 对象。请看一下，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T06:51:14.337

的格式是`dateString`什么？

对解析日期字符串的内置支持因浏览器而异，从差到糟糕。最好手动解析字符串以将其转换为 Date 对象，然后从那里开始。如果您提供字符串格式，则可以提供进一步的帮助。

# jquery - 根据常见问题示例，无法使用 jquery 禁用表单元素

> ID：13356079
> 
> 赞同：3
> 
> 时间：2012-11-13T05:40:49.887
> 
> 标签：jquery, forms

[根据常见问题解答](http://docs.jquery.com/Frequently_Asked_Questions#How_do_I_disable.2Fenable_a_form_element.3F)中的示例，我一直在尝试使用 jquery 禁用表单元素

到目前为止，这是我的尝试。

```
<script src="jquery-1.8.2.js"></script>
<form name="myForm" action ="process.php" method ="post" >
<p>Room type:<br />
<input type="radio" name="roomtype" value="mdorm" onClick="$('#roomnumber').attr('disabled','disabled')">Mixed Dorm<br>
<input type="radio" name="roomtype" value="fdorm" onClick="$('#roomnumber').attr('disabled','disabled')">Female Dorm<br>
<input type="radio" name="roomtype" value="room">Private Room<br>
</p>
<p>Room number<br />
<select name="roomnumber">
        <option value="1">1</option>
        <option value="2">2</option>
</select> 
```

但是，单击任何单选按钮都不会导致下拉列表被禁用。我基本上逐字逐句地遵循了这个例子，所以我不确定我在哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T05:44:13.123

您正在使用 ID 选择器，但您的 select 元素没有 ID 属性：

```
<select id="roomnumber" name="roomnumber"> 
```

从 jQuery 1.6 开始，用于启用/禁用表单元素（*或修改其他属性*） `prop`的方法应该使用方法而不是`attr`方法，将您的标记更改为：

```
<p>Room type:<br />
   <input type="radio" name="roomtype" value="mdorm">Mixed Dorm<br>
   <input type="radio" name="roomtype" value="fdorm">Female Dorm<br>
   <input type="radio" name="roomtype" value="room">Private Room<br>
</p> 
```

你可以编码：

```
$(function(){ // document ready handler
    $('input[name="roomtype"]').change(function(){ // listen to the change event
        // disable the select element if value of radio group is not 'room'
        $('#roomnumber').prop('disabled', this.value !== 'room')
    })
}) 
```

[http://jsfiddle.net/Er8zX/](http://jsfiddle.net/Er8zX/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T05:44:17.967

```
<select name="roomnumber" id="roomnumber"> 
```

也许？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T05:44:58.777

您的 jquery 正在使用 id 选择器 # 但您没有 id 属性。 `<select id="roomnumber">`应该有帮助

# animation - 使用 CALayer 将精灵动画与路径移动相结合

> ID：13356091
> 
> 赞同：0
> 
> 时间：2012-11-13T05:42:46.877
> 
> 标签：animation, path, xamarin.ios

在 Monotouch 中，我需要创建一个沿路径移动的图像的基本动画，同时用精灵表动画它的图像内容或替换内容 CGImage，我尝试的一切我都无法结合这两种动画。我尝试将 CALayer 子类化并为自定义属性设置动画或在组中组合动画似乎没有任何效果。制作这种动画的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:51:06.623

为了获得流畅的动画，您需要考虑 CAlayer 代表什么：它们是位于 GPU 空间中的纹理的句柄。要获得流畅的动画，您可以控制它们的一些属性，但是像再次渲染数据这样的任意更改将无法正常工作。

您应该做的是将所有图像放在精灵表中，然后为 CALayer 的 ContentsRect 属性设置动画。

# java - 使用 Map Tree 进行 Map Entry 转换

> ID：13356097
> 
> 赞同：0
> 
> 时间：2012-11-13T05:43:38.633
> 
> 标签：java, dictionary, treemap

所以我一直在尝试做的是使用我以前拥有的 TreeMap 并将其应用于此方法，在该方法中我将其转换为一个集合并让它通过 Map Entry Loop。我想做的是将我以前的 TreeMap 反转为相反的（翻转的）TreeMap

'当我运行我的代码时，它给了我一个类似的错误。这是否意味着我必须实施类似的方法？我将 arrayList 转换为 Integer，所以我认为类似的方法会支持它。还是我的代码有问题

错误：线程“main”中的异常 java.lang.ClassCastException：java.util.ArrayList 无法转换为 java.lang.Comparable

概述：最初，我对该程序的预期目的是制作一个从文本文档中读取并专门找到所有单词以及单词所在位置的索引/行的 Treemap。现在我想制作一个包含最常用词的“前十名”列表。我想“翻转”我的树形图，以便整数值将按顺序排列，字符串将跟随

```
public static void getTopTenWords(TreeMap<String, ArrayList<Integer>> map) {
    Set<Map.Entry<String, ArrayList<Integer>>> set = map.entrySet();
    TreeMap<Integer, String> temp = new TreeMap<Integer, String>();
    int count = 1;
    for(Map.Entry<String, ArrayList<Integer>> entry : set){
        if(temp.containsKey(entry.getValue())) {
            Integer val = entry.getValue().get(count);
            val++;
            temp.put(val, entry.getKey());
        }
        else {
            temp.put(entry.getValue().get(count), entry.getKey());
        }
        count++;
     }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T06:12:39.013

> 现在我想制作一个包含最常用词的“前十名”列表。我想“翻转”我的树形图，以便整数值将按顺序排列，字符串将跟随

请注意， a`Map`仅包含唯一键。因此，如果您尝试保留`count`as 键，则需要`Map`通过使用`new Integer(count)`.

If you put your count in `Map` like: - `map.put(2, "someword")`, then there are chances that your previous count value gets overwritten, because `Integer` caches the values in `range: - [-128 to 127]`. So, the integer values between these range will be `interned` if you don't create a new object. And hence two `Integer` with value say `2` will point to same `Integer object`, and hence resulting in duplicate key.

Secondly, in your code: -

```
if (temp.containsKey(entry.getValue())) 
```

using the above if statement, you are comparing an `ArrayList` with an `Integer` value. `temp` contains `key` which are `integers`. And values in `entry` are `ArrayList`. So, that will fail at runtime. Also, since your `orginal` Map contains just the location of the `word` found in the `text file`. So, just what you need to do is, get the size of `arraylist` for each word, and make that a key.

You would need to modify your code a little bit.

```
public static void getTopTenWords(TreeMap<String, ArrayList<Integer>> map) {
    Set<Map.Entry<String, ArrayList<Integer>>> set = map.entrySet();

    TreeMap<Integer, String> temp = new TreeMap<Integer, String>();

    for(Map.Entry<String, ArrayList<Integer>> entry : set) {
        int size = entry.getValue().size();
        int word = entry.getKey();

        temp.put(new Integer(size), word));    
    }
} 
```

So, you can see that, I just used the `size` of the `values` in your `entry set`. And put it as a `key` in your `TreeMap`. Also using `new Integer(size)` is very important. It ensures that every integer reference points to a new object. Thus no duplication.

Also, note that, your `TreeMap` sorts your `Integer` value in ascending order. Your most frequent words would be somewhere at the end.

# oracle - 在 Onclick APEX 上创建多个操作

> ID：13356098
> 
> 赞同：0
> 
> 时间：2012-11-13T05:43:43.600
> 
> 标签：oracle, oracle11g, oracle-apex

我在 Oracle APEX 工作。我想在一个按钮上单击创建多个操作。我想插入表值，还想在同一个数据库中重定向页面。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:12:24.823

如果按钮正在提交页面，那么您可以创建任意数量的进程、计算、验证和分支，这些进程、计算、验证和分支可以有条件地为该特定按钮运行。

您的表格插入将是一个流程，您的重定向将是一个分支。

# python - 我可以在 ElementTree XMLParser 中禁用实体解析吗？

> ID：13356103
> 
> 赞同：4
> 
> 时间：2012-11-13T05:44:18.287
> 
> 标签：python, lxml, elementtree, xml.etree

使用 lxml 我可以：

```
from lxml import etree
parser = etree.XMLParser(resolve_entities=False) 
```

我可以对 xml.etree.ElementTree XMLParser 做同样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T14:56:57.843

快速浏览一下源代码会发现没有什么比`resolve_entities=False`.

这是[xml.etree.ElementTree.XMLParser 的源代码的摘录](http://hg.python.org/cpython/file/2.7/Lib/xml/etree/ElementTree.py#l1443)：

```
parser.DefaultHandlerExpand = self._default
parser.StartElementHandler = self._start
parser.EndElementHandler = self._end
parser.CharacterDataHandler = self._data
# optional callbacks
parser.CommentHandler = self._comment
parser.ProcessingInstructionHandler = self._pi 
```

没有配置其他 pyexpat 处理程序。

现在，您对众所周知的 XML 实体感兴趣`&amp;`吗？似乎未定义的实体正在经历，`XMLParser._default`因此您可以通过扩展该方法获得一些东西。

但是你想用这个来完成什么？如果这只是添加新实体，请尝试更新`XMLParser.entity`字典。

# sql - SQL 根据每个子行的长度要求基于多个子表行更新父表字段

> ID：13356109
> 
> 赞同：2
> 
> 时间：2012-11-13T05:45:13.347
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我有以下用于`parent`/`child`关系的示例表结构。

`parent`桌子

```
id    ShortText
--------------
10    
20 
```

`child`桌子

```
id    char     value    order
-----------------------------
10    COLOR    RED      1
10    HEIGHT   1FT      2
10    LENGTH   10FT     5
20    COLOR    BLUE     1
20    WEIGHT   100LBS   3
20    WIDTH    2FT      4 
```

我有一个要求，指定子表行中的某些字段需要连接在一起并放置在父表`ShortText`字段中。该`ShortText`字段最多可包含 10 个字符。

我希望（或者我应该说我*想要*）得到这个。

```
id    ShortText
---------------
10    RED,1FT,
20    BLUE,2FT, 
```

*如果可能*，我想在单个 SQL 查询中完成此操作。关于如何做到这一点并避免遍历每个子记录集的任何建议？任何帮助表示赞赏！

* * *

这是我到目前为止所尝试的。

以下更新声明...

```
UPDATE
  parent
SET
  ShortText = COALESCE(ShortText, N'') + 
           CASE WHEN DATALENGTH(COALESCE(ShortText, N'') + child.val + ',')/2 < 10
                THEN COALESCE(ShortText, N'') + child.val + ',' ELSE N'' END
FROM
  parent INNER JOIN child
    ON
      parent.id = child.id 
```

但我只得到以下结果。

```
id    ShortText
------------------
10    RED,
20    BLUE, 
```

* * *

我还尝试了以下操作但未成功，因为检查长度的 case 语句并未在每个子表行上执行，仅在之前的 ShortText 上执行。

```
UPDATE
    p
SET
    p.ShortText = p.ShortText +
        STUFF((
        SELECT
            CASE WHEN 
                    DATALENGTH(p.ShortText)/2 + DATALENGTH(c.val + N',')/2 < 10
                THEN
                    c.val + N','
                ELSE
                    N''
                END
        FROM
            child as c
        WHERE
            c.id = p.id
        FOR XML PATH(''), type).value('.','NVARCHAR(max)'), 1, 0, N'')
FROM
    parent as p 
```

这是一个[SQLfiddle](http://www.sqlfiddle.com/#!3/57242/7)供参考。[我也在这里](https://stackoverflow.com/questions/13351679/sql-update-parent-table-field-based-on-multiple-child-table-rows)发布了类似问题的答案，但这是一个不同的要求，我无法根据长度要求对其进行缩放。与往常一样，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T08:25:35.870

检查 NULL 上的 p.ShortText，然后更新派生表

```
UPDATE x
SET x.ShortText = NewShortText
FROM (SELECT p.ShortText, STUFF((SELECT CASE WHEN 
                          DATALENGTH(ISNULL(p.ShortText, ''))/2 +  DATALENGTH(ISNULL(c.value, '') + N',')/2 < 10
                                             THEN c.value + N','
                                             ELSE N'' END
FROM child as c
WHERE c.id = p.id
FOR XML PATH(''), type).value('.','NVARCHAR(max)'), 1, 0, N'') AS NewShortText 
FROM parent as p) x 
```

**更新 14.11.2012**

```
;WITH cte (id, uid, val)
AS
 (
  SELECT ROW_NUMBER() OVER(PARTITION BY p.[uid] ORDER BY c.val DESC),
         p.uid, c.val
  FROM parent p INNER JOIN child c ON p.uid = c.uid
  ), cte2 (id, uid, val)
AS
 (  
  SELECT id, uid, val
  FROM cte
  WHERE id = 1 
  UNION ALL
  SELECT c.id, c.uid, CAST(ISNULL(ct.val, '') + ', ' + ISNULL(c.val, '') AS nvarchar(100)) AS val
  FROM cte c JOIN cte2 ct ON c.id = ct.id + 1 AND c.uid = ct.uid
)
UPDATE x
SET x.ShortText = x.MaxNewShortText
FROM
 (
  SELECT p.uid, p.ShortText, CASE WHEN DATALENGTH(val)/2 < 10
                                  THEN val END AS NewShortText,
  MAX(CASE WHEN DATALENGTH(val)/2 < 10
           THEN val END)
  OVER(PARTITION BY p.[uid]) AS MaxNewShortText
  FROM parent p JOIN cte2 ct ON p.uid = ct.uid
  ) x 
```

[**SQLFiddle**](http://www.sqlfiddle.com/#!3/57242/148/0)上的演示[](http://www.sqlfiddle.com/#!3/57242/148/0)

# java - 删除表格中的水平线

> ID：13356112
> 
> 赞同：1
> 
> 时间：2012-11-13T05:45:45.950
> 
> 标签：java, swing, user-interface, jtable, jframe

我有`JTable`一个框架。我想删除表中的水平（行）线，只是具有水平线的列的名称。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T05:48:26.693

设置[`JTable#setShowHorizontalLines`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#setShowHorizontalLines%28boolean%29)为`false`

[`JTable#setShowGrid`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#setShowGrid%28boolean%29)您可能还想看看

# php - 我想在后台运行一个 php 脚本

> ID：13356121
> 
> 赞同：0
> 
> 时间：2012-11-13T05:46:37.397
> 
> 标签：php, javascript

我正在尝试提供信使服务。我面临一个问题。我应该手动重新加载页面。但是自动运行它的问题是它每秒都会重新加载。我使用 javascript 每 1 秒重新加载一次页面。在其中我调用了一个 php 脚本。但是该代码的问题是刷新了完整的页面。有没有办法只重新加载整个页面的特定部分，而且我应该能够在后台运行 php 脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T05:49:21.070

使用`Ajax`. [w3schools 基础教程](http://www.w3schools.com/ajax/default.asp)

Ajax 是一组相互关联的 Web 开发技术，用于在客户端创建异步 Web 应用程序。使用 Ajax，Web 应用程序可以异步（在后台）向服务器发送数据和从服务器检索数据，而不会干扰现有页面的显示和行为。可以使用 XMLHttpRequest 对象检索数据。尽管名称如此，但不需要使用 XML（通常使用 JSON 代替），并且请求不需要是异步的。

[[维基百科](http://en.wikipedia.org/wiki/Ajax_%28programming%29)]

# iphone - 连续调用 PresentViewController

> ID：13356124
> 
> 赞同：0
> 
> 时间：2012-11-13T05:47:02.477
> 
> 标签：iphone, objective-c, ios

我正在尝试向我的应用程序添加一个注册页面和一个验证页面，该应用程序有 3 个视图，可以使用 UITabBarController 来回切换。注册页面在此应用程序的生命周期内只应显示一次。用户注册后，此视图将消失并由验证页面取代。验证用户身份后，用户可以使用该应用程序。

现在在 AppDelegate 中，我有以下代码向用户显示注册页面：

```
 RegistrationPage *registration  = [[RegistrationPage alloc] initWithNibName:@"RegistrationPage" bundle:nil];
    [self.window.rootViewController  presentViewController:registration animated:YES completion:nil]; 
```

用户填写注册页面并按下提交按钮后，以下代码用于关闭注册页面并呈现验证页面：

```
 VerificationPage *verification  = [[VerificationPage alloc] initWithNibName:@"VerificationPage" bundle:nil];
[self dismissViewControllerAnimated:YES completion:^{
    [self addVerificationPage];
}];

-(void) addVerificationPage
{
 VerificationPage *verification  = [[VerificationPage alloc] initWithNibName:@"VerificationPage" bundle:nil];

 [self presentViewController:verification animated:YES completion:nil];
 } 
```

但是验证页面永远不会出现。有人可以帮我弄这个吗？

我也在注册页面试过这个，也不起作用：

```
 VerificationPage *verification  = [[VerificationPage alloc] initWithNibName:@"VerificationPage" bundle:nil];
[self dismissViewControllerAnimated:YES completion:^{
    [[UIApplication sharedApplication].keyWindow.rootViewController presentViewController:verification animated:YES]
}]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T06:19:02.883

很可能是由于`VerificationPage`在您关闭`RegistrationPage`. 从苹果文档：

> 关闭视图控制器不仅会关闭该视图控制器，还会关闭它呈现的任何视图控制器。

结果，有两种可能的命令，其中任何一种都会导致失败——要么`VerificationPage`被创建并呈现，然后`RegistrationPage`被解雇——带着呈现`VerificationPage`。或者，`RegistrationPage`被解除并销毁，然后`presentViewController`调用被发送到它 - 导致失败，因为`RegistrationPage`不再是有效的`ViewController`。

要解决这个问题，要么保持`RegistrationPage`开放状态，然后`VerificationPage`在上面展示（不理想，但它会起作用），或者向链条上的`AppDelegate`或更高层发出信号（你可以使用）来代替展示。`ViewController``self.presentingViewController`

# facebook-graph-api - 如何向places api添加新的位置/地点？

> ID：13356127
> 
> 赞同：0
> 
> 时间：2012-11-13T05:47:18.117
> 
> 标签：facebook-graph-api, foursquare, google-places-api

我们正在为大自然爱好者开发 iPhone 应用程序。如果 Google Places API 中不存在位置/地点，我们希望在应用程序中添加功能，以便用户添加位置/地点。

我相信，Google Places api 不允许添加新地点。我用谷歌搜索并找到了其他一些 API

Facebook Places Foursquare

我正在为 API 寻找一个很好的选择，它也允许添加新的地方。有什么建议么？

谢谢，阿迪尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T06:00:47.833

查看 Google Places API 文档的[User Place Reports](https://developers.google.com/places/documentation/actions#PlaceReports)部分。

# dialog - 如果表格滚动，Monotouch Dialog TableView.CellAt(...).Frame 返回不正确的位置

> ID：13356131
> 
> 赞同：0
> 
> 时间：2012-11-13T05:47:49.527
> 
> 标签：dialog, xamarin.ios

我在使用 RootElement.TableView.CellAt(...).Frame 在由单声道 touch.dialog 控制器创建的表格的选定行上定位弹出框时遇到问题。

除非基础表已滚动，否则 Fram.Y 将返回正确的位置。如何获得“滚动”单元格的真实 Y 位置？

我之前在 UITableView 上使用过这段代码没有问题。monotouch.dialog 创建的 UITableView 有什么不同？

完整代码： var popPos = rootElement.TableView.CellAt(rootElement.TableView.IndexPathForSelectedRow).Frame;

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:53:17.360

您必须在`ContentOffset.Y`从单元格检索到的 Y 位置添加/减去 UITableView（从 UIScrollView 继承）。包含表格的当前滚动位置。

# jquery - 我怎么知道 id 前一个元素

> ID：13356132
> 
> 赞同：2
> 
> 时间：2012-11-13T05:47:52.553
> 
> 标签：jquery, checkbox, click

单击时我怎么知道**id****`<span class="CheckBox">`**复选框？

代码：

```
<div id="checkbox">
<input type="checkbox" id="demo" name="status" class="status" style="display: none; ">
<span class="CheckBox">
<span class="CBContent">Block</span>
<span class="CBPart"></span>
</span>
</div> 
```

启动代码 Jquery：

```
$(document).ready(function(){
$('.CheckBox').on("click", function(){ 
```

应该采取什么进一步行动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T05:50:16.803

尝试这个：

```
$('.CheckBox').on("click", function(){
  var $checkbox = $(this).prev();
  var $id = $checkbox.attr("id");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T05:48:57.450

您需要使用 jquery [**prev()**](http://api.jquery.com/prev/)，

**[现场演示](http://jsfiddle.net/d8NeV/)**

```
$(document).ready(function() {
    $(document).on("click", '.CheckBox', function() {
        previousId = $(this).prev().attr('id');
        alert(previousId);
    });
});​ 
```

# jquery-mobile - Sencha touch 2：如何在 Sencha touch code 中使用 Jquery mobile code？

> ID：13356136
> 
> 赞同：1
> 
> 时间：2012-11-13T05:48:32.383
> 
> 标签：jquery-mobile, extjs, sencha-touch

我想创建使用 Sencha touch 2 框架的移动应用程序。我需要在 sencha touch 2 代码中嵌入使用 jquery mobile 创建的 Html 表单。那么我该如何实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T23:21:11.790

据我了解，您可以使用[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)构建 jquery 应用程序，而 Sencha 可以用作应用程序的 v（或 Viewer）部分。我不确定 Sencha 是否可以使用 jquery 的任何部分，尽管您可以根据需要嵌入 html、ruby，当然还有 javascript，它们都是 jquery 的一部分（减去框架）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T09:11:38.890

这实际上是一个很好的问题... Sencha touch 代码只是您包含在 index.html 文件中的一个文件...同样您可以在其中添加 jquery mobile ，就像您可以在普通 HTML 文件中添加 jquery 一样。 . 虽然要小心你将如何使用它来与 sencha 同步工作......所有 sencha 组件都有一个 html 参数，所以我认为对你来说最好的策略是创建一个 sencha 容器并将你的 jquery 内容放在 html 参数中...希望它有效...

# magento - 需要 Magento 模型的文档 (Mage::getModel())

> ID：13356138
> 
> 赞同：4
> 
> 时间：2012-11-13T05:48:52.833
> 
> 标签：magento, orm

我已经阅读了 Alan Storm 的关于 Magento ORM 原则以及如何访问数据的[指南](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-5-magento-models-and-orm-basics)。我正在编写一个插件来从 magento 导出数据。

**问题**

我在哪里可以找到 Magento 中可用的不同类型模型的文档？

例如，

`Mage::getModel("catalog/categories");`

getModel 中其他允许的模型是什么？

API 文档中有一些信息，比如 product.list，如果我猜的话，我会说这是如何转换为 getModel 调用的，但我不确定如何。谁能给我链接？谷歌搜索“getModel 文档”和“Magento 模型”没有产生相关结果。

以下是我看过的链接：

1.  [数据库图](http://www.magentocommerce.com/wiki/2_-_magento_concepts_and_architecture/magento_database_diagram)
2.  [所以问题](https://stackoverflow.com/questions/773562/magento-orm-documentation)
3.  [getModel 和 getData 方法](http://inchoo.net/ecommerce/magento/magento-debugging/getting-things-in-magento-by-getmodel-and-getdata-methods/)
4.  [艾伦·斯托姆的指南](http://alanstorm.com/category/magento)

到目前为止，艾伦的东西是最有帮助的。帮助我，@Alan Storm :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T06:24:19.430

你应该深入研究代码。使用`getModel`您可以获得位于`Models`目录中的每个模块的每个类的实例。表达式中`catalog/product_option_a_b_c`，fitst部分( `catalog`)引用module，第二部分引用module目录下的`Product/Option/A/B/C.php`file 。所以如果你想获得一个类的实例，你需要这个：`Models``catalog``Mage_Sales_Model_Quote_Address``Mage::getModel('sales/quote_address')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T06:30:31.563

您可能知道 magento 由多个 MVC 模块组成，因此根据其标准，每个模块都有一个 Model 目录。getModel() 使用此结构来查找要加载的模型。基本上电话是这种格式：

> 模块/path_to_the_name_of_model_including_the_model_file_name

记住不要包含模型目录并使用下划线分隔目录。目录的名称也是小写的，但实际上它们以大写开头。

# windows-7 - USB 自动运行：“在浏览器中打开”选项永远不会出现

> ID：13356140
> 
> 赞同：0
> 
> 时间：2012-11-13T05:49:06.047
> 
> 标签：windows-7, batch-file, usb, autorun

当有人插入我们的 USB 设备时，我正试图打开我们的网页。

**我的问题：**当我们插入 USB 设备时，会出现自动运行对话框，但从来没有打开/运行我们指定的网页的选项。请参见下面我们看到的对话框的图片。不是有一个选项说“在 Internet Explorer 中打开”之类的吗？

![在此处输入图像描述](../Images/16aa31b92f7ad4616cc832e0229189ad.png)

我们希望实现的是在“使用此驱动器进行备份”下方有另一个选项，上面写着*“在 Web 浏览器中打开”之类的*内容，或者在用户决定时最终会打开我们的网页的内容。

下面是我们位于 USB 设备上的文件 autorun.inf 中的代码：

```
[autorun]
shellexecute=http://exds-test.epicservices.com.au/V10InstallationInfo.aspx
action=Open Website
label=EXDS USB Drive 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:24:03.917

According to this link, this will not work on modern OS versions
[http://www.flashbay.com/services/usb-autorun](http://www.flashbay.com/services/usb-autorun)

You've got to use a "helper" application.

# javascript - 单击时显示和隐藏图像

> ID：13356146
> 
> 赞同：0
> 
> 时间：2012-11-13T05:50:04.953
> 
> 标签：javascript, image, onclick, show-hide

我在一个高度和宽度为 100 像素的表格中有用户个人资料图片。我还有单选按钮来设置个人资料图片的可见性（公共、私人等）。这些是使用 ajax 更新的。

我想知道的是如何在个人资料图片上方显示图像（例如“success.png”）并在 2 秒后淡出？

```
<table class="profimg">
<tr><td align="center"><img class="profimg" src="../images/user/profile/1c4ca4238a0b923820dcc509a6f75849b1.jpg" alt="Administratorasdf" /></td></tr>
<tr><td align="center"><input type='radio' title='Publicly Visible' name='img_pub' onclick="upimg1()" /> <input type='radio' title='Visible Only To Users' value='UsersOnly' name='img_pub' onclick="upimg2()" /> <input type='radio' title='Visible Only To You' value='Hide' name='img_pub' onclick="upimg3()" checked='checked'/></td></tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T06:20:48.530

我添加了一个 ID 为“成功”的 img 标签。这个标签是淡入淡出的图像。

```
$("#rad").click(function () {
    $("#success").fadeIn(500).delay(1000).fadeOut(1000);
}); 
```

不要忘记包含 jquery 库。检查[这个演示](http://jsfiddle.net/c7ajb/10/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-13T05:59:17.350

```
<script type="text/javascript"> 
    $(document).ready(function(){
    $(".profimg").click(function(){
        $("this").slideToggle("slow");
      });
    });
</script> 
```

不要忘记使用 jquery 库。这不会花费 2 秒。但它会起作用的。您可以使用 settimeout 函数设置时间间隔。谷歌它

# jakarta-ee - 如何在将tiles属性插入页面之前检查它是否存在

> ID：13356150
> 
> 赞同：5
> 
> 时间：2012-11-13T05:50:41.980
> 
> 标签：jakarta-ee, struts2, tiles, apache-tiles

我在 struts2 应用程序中使用瓷砖。在定义基本布局时，我定义了一个属性“scriptFile”。

```
<definition name="baseLayout" template="/application/base-layout.jsp" >
    ... 
</definition>

<definition name="custom.tiles" extends="baseLayout">
    <put-attribute name="scriptFile" value="js/custom-script.js"></put-attribute>
</definition> 
```

如果开发人员在切片定义文件“tiles.xml”中提供“scriptFile”，则应使用以下行包含此脚本文件

```
<script language="javascript" src="<tiles:insertAttribute name="scriptFile"></tiles:insertAttribute>"></script> 
```

但如果未定义 scriptFile 属性，则必须跳过此行。

如何检查图块中是否存在“scriptFile”属性。有没有更好的方法来做这件事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T10:07:38.373

我试过了

```
<t:useAttribute name="scriptFile" id="script" classname="java.util.List" ignore="true"/>
<%
    if(script != null) {
        ... include script
    } 
%> 
```

JSTL 也可以在这里使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-18T10:08:04.013

**通过使用defaultValue**属性，我能够解决类似的问题。这样，如果属性不存在，您将不会收到异常。在这种情况下，如果页面不需要包含额外的 JavaScript，那么图块模板只会添加一个空字符串

**JSP**

```
<tiles:insertDefinition name="portalTemplate">

    <tiles:putAttribute name="body">
        <h1>Body</h1>
    </tiles:putAttribute>  

    <tiles:putAttribute name="js">
        <script src="script.js"></script>
    </tiles:putAttribute>   
</tiles:insertDefinition> 
```

**平铺模板 JSP**

```
<html>
<body>
   <tiles:insertAttribute name="body"/>
   <script src="/public/libs/jquery/jquery-2.1.1.min.js"></script>

   <!-- Include extra JS after JQuery -->
   <tiles:insertAttribute name="js" defaultValue=""/>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T09:16:34.340

只需使用`ignore`属性

```
<script language="javascript" src="<tiles:insertAttribute name='scriptFile'  ignore='true'/>"></script> 
```

并且不要放入`scriptFile`您的定义中。

**更新**

`getAsString`那么在布局中使用标签怎么样

```
<tiles:getAsString name="jscript" ignore="true" /> 
```

并在定义中放置整个转义的脚本标签。

```
<put-attribute name="jscript" value="&lt;script src='js/custom-script.js' type='text/javascript'>&lt;/script>" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-17T15:48:05.127

我使用以下代码解决了那个问题（根据我从标签描述中得到的信息：忽略 - 如果此属性设置为true，并且名称指定的属性不存在，则无需编写任何内容直接返回。默认value 为 false，这将导致抛出运行时异常。）：

```
<tiles:importAttribute name="stylesheets" ignore="${true}"/> 
```

PS 请注意，使用 ${true} 而不是仅“真”值。

# jquery - 用于下拉更改事件的 jQuery 不填充 textarea

> ID：13356152
> 
> 赞同：1
> 
> 时间：2012-11-13T05:51:21.583
> 
> 标签：jquery, ajax, tinymce

我想问是否有人可以帮助我。

我有一个带有下拉列表的表格。我的问题是我使用 TinyMCE 作为编辑器。

当我在下拉列表中选择一个项目时，它不会填充 TinyMCE 文本区域，但另一个文本区域由 jQuery 打开。

这是我的代码，任何人都可以帮我修复，以便下拉的结果将显示在 TinyMCE 编辑器上。

非常感谢。

```
<html>
    <head>

        <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script><br />
        <script type="text/javascript">
            $(document).ready(function () {
                $('#select').change(function () {
                    var option = $(this).val();
                    $.get('select.php', {select: option}, function (data) {
                        $('#result').html(data).hide().fadeIn(1);
                    });
                });
            });
        </script>

        <script type="text/javascript" src="../jscripts/tiny_mce/tiny_mce.js"></script>
        <script type="text/javascript">
            tinyMCE.init({mode: "textareas", editor_selector: "mceEditor"});

            $(document).ready(function () {
                $('form').submit(function ()
                {

                    alert(tinyMCE.get('result').getContent());

                });
            });

        </script>

    </head>

    <select name="select" id="select">
        <option value="">Select</option>
        <option value="option1">Option 1</option>
        <option value="option2">Option 2</option>
        <option value="option3">Option 3</option>
        <option value="option4">Option 4</option>
        <option value="option5">Option 5</option>
    </select>

    <form id="ajax-form" class="autosubmit" method="POST" action="">
        <textarea class="mceEditor" id="result" name="notes"/></textarea>
        <input type="submit">
    </form> 
```

这是我获取数据的PHP：

```
<?php

if($_GET['select'] == 'option1') {
    echo 'the option you have chosen is 1';
} elseif($_GET['select'] == 'option2') {
    echo 'the option you have chosen is 2';
} elseif($_GET['select'] == 'option3') {
    echo 'the option you have chosen is 3';
} elseif($_GET['select'] == 'option4') {
    echo 'the option you have chosen is 4';
} elseif($_GET['select'] == 'option5') {
    echo 'the option you have chosen is 5';
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:02:02.313

而不是`$('#result').html(data).hide().fadeIn(1);`（你为什么在这里叫 hide？）

采用

```
tinymce.get('result').setContent(data); 
```

# php - 内爆关联数组与变量键名

> ID：13356161
> 
> 赞同：0
> 
> 时间：2012-11-13T05:52:14.667
> 
> 标签：php, arrays, associative-array

我正在使用关联数组来构建专辑列表以及这些专辑中的图像。该数组是使用以下代码构建的（为清楚起见，省略了一些代码 - 只是加载的东西`$title`，`$desc`等）：

```
<?php               
  $directory = 'gallery/*';
  $subfolders = glob($directory);
  foreach($subfolders as $subfolder) {
    $photos = glob($subfolder.'/*.[Jj][Pp][Gg]');
    $album = explode('_', $subfolder);
    $albumname = str_replace(' ','%20',$album[1]);
    foreach($photos as $photo){
      $photolist[$albumname] .= '<span data-title="'.$title.'" data-desc="'.$desc.'" data-camera="'.$camera.'" data-lens="'.$lens.'" data-length="'.$length.'" data-shutter="'.$shutter.'" data-aperture="'.$aperture.'" data-iso="'.$iso.'" style="background-image:url('.$photo.'); background-size:contain;" class="slide"></span>';
    }
  }
?> 
```

我正在尝试`implode()`根据（从cookie中读取）来吐出相关元素`$currentalbum`，如下所示：

```
<?php
  if(isset($_COOKIE["currentalbum"])) {
    $currentalbum = $_COOKIE["currentalbum"];
  } else {
    $currentalbum = "New";
  }
  $currentphotolist = implode("",$photolist[$currentalbum]);
  echo $currentphotolist;
?> 
```

这是返回错误：

> 警告：implode() [function.implode]：第 97 行的 index.php 中传递的参数无效

我认为数组有问题，但是当我`print_r()`这样做时，我得到以下内容，看起来不错：

```
Array
(
[New] => <span data-title="Train" data-desc="This is a picture of a train.  Look at it go!" data-camera="Nikon D300" data-lens="Tamron 17-50mm f/2.8 VC" data-length="17mm" data-shutter="1/250s" data-aperture="f/6.3" data-iso="200" style="background-image:url(gallery/01_New/Train.jpg); background-size:contain;" class="slide"></span><span data-title="Billow" data-desc="" data-camera="Nikon D300" data-lens="Nikkor 50mm f/1.8D" data-length="50mm" data-shutter="1/250s" data-aperture="f/8" data-iso="200" style="background-image:url(gallery/01_New/Billow.jpg); background-size:contain;" class="slide"></span><span data-title="3059" data-desc="" data-camera="Nikon D300" data-lens="Micro-Nikkor 105mm f/2.8 VR" data-length="105mm" data-shutter="1/30s" data-aperture="f/22" data-iso="200" style="background-image:url(gallery/01_New/3059.jpg); background-size:contain;" class="slide"></span>
[Landscapes] => <span data-title="Influx" data-desc="" data-camera="Nikon D300" data-lens="Nikkor 70-300mm f/4.5-5.6 VR" data-length="70mm" data-shutter="30s" data-aperture="f/8" data-iso="200" style="background-image:url(gallery/02_Landscapes/Influx.jpg); background-size:contain;" class="slide"></span>
[Constructs] => <span data-title="Fervor" data-desc="I took this while wandering around in SEA-TAC airport waiting for a flight home.  It\'s a lantern, hanging with some others in a shop.  It caught my eye from across the terminal, but the shop was pretty small and I\'m always a little worried about knocking stuff with my camera bag, so I shot it through the window.  I think it turned out pretty well regardless." data-camera="Nikon D7000" data-lens="Tamron 17-50mm f/2.8 VC" data-length="50mm" data-shutter="1/60s" data-aperture="f/2.8" data-iso="180" style="background-image:url(gallery/03_Constructs/Fervor.jpg); background-size:contain;" class="slide"></span>
) 
```

知道为什么我会收到错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T05:59:51.920

的第二个参数`implode`应该是一个数组。从您的`foreach`循环看来，这`$photolist[$currentalbum]`是一个字符串。

尝试

```
foreach($photos as $photo){
  $photolist[$albumname][]= '<span data-title...</span>';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T05:56:25.753

我相信 implode 需要一个字符作为第一个属性。尝试使用空格或逗号。

```
// Space
$currentphotolist = implode(" ",$photolist[$currentalbum]);

// Comma
$currentphotolist = implode(",",$photolist[$currentalbum]); 
```

# node.js - Jade 模板中的自动刷新 Div (Node.js/Express)

> ID：13356164
> 
> 赞同：1
> 
> 时间：2012-11-13T05:52:38.193
> 
> 标签：node.js, html, express, pug, partial-page-refresh

我正在使用 Node.js、Express、Jade 和 Redis 开发一个应用程序，该应用程序将显示来自 reversebeacon.net 提供的 telnet 流中的点，这些点与业余无线电俱乐部成员的 Redis 数据库进行交叉引用，如果它们匹配则显示在我的应用程序的桌子上。到目前为止，所有这些都运行良好。

不幸的是，我必须刷新整个页面才能显示桌子上的新位置。我只想刷新包含表格的 div (#activeDiv)，而不是设置刷新整个页面的间隔。

我在网上遇到的大多数示例都是针对 PHP 的，我尝试将这些示例用于我的应用程序，但到目前为止还不是很成功。

**布局.jade**

```
doctype 5
html
  head
    title HAMjitsu | Club Spotter (Flying Pigs, FISTS, SKCC, NAQCC)
    link(rel='stylesheet', href='/stylesheets/style.css')
    script(src='http://code.jquery.com/jquery-latest.js')
    script
      // nothing I've placed here has worked :-(
  body
    h1 HAMjitsu
    p Welcome to HAMjitsu, the realtime tool that let's you see who's on the air right now!
    p This application is in the early "alpha" phase of development.  For now, the Flying Pigs will be able to see when their fellow piggies are causing havoc on the bands.  But don't you worry, other clubs will soon be able to use this tool.  
    block content 
```

**索引.jade**

```
extends layout

block content
  div#activediv
    table
      thead
        tr
          th DE
          th Freq
          th DX
          th NR
          th Mode
          th dB
          th WPM
          th CQ
          th UTC  
      tbody
        each spot, i in spots
          tr
            td: !{spot.de}
            td: !{spot.freq}
            td: !{spot.dx}
            td: !{spot.nr}
            td: !{spot.cw}
            td: !{spot.snr}
            td: !{spot.wpm}
            td: !{spot.cq}
            td: !{spot.utc} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T13:28:48.010

这可以通过 jquery 和 ajax 使用[load()](http://api.jquery.com/load/)函数来完成。

```
<div id="myid"/>

$("#myid").load("a/path") 
```

a/path 返回的数据会存储在 div 里面。要获取数据，您每秒轮询服务器或使用 websockets 并将数据直接从服务器推送到客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T06:11:14.790

通常，您会使用客户端 ajax 调用来执行此操作，并在 dom 中更新您的信息。我推荐使用 jQuery：

```
<ul id="list"></ul>

$.get('/api/data', function(data){

 var htm = (
  '<li>'+data.foo+'</li>';
 );

 $("#list").append( htm );
}); 
```

# ios - 使用情节提要时我们会经常发生冲突吗？

> ID：13356167
> 
> 赞同：0
> 
> 时间：2012-11-13T05:53:30.623
> 
> 标签：ios, storyboard, xib, conflict

我认为使用故事板有时会为我们节省很多工作。但是当不止一个伙伴在同一个故事板上工作时。有没有可能经常发生冲突？在使用 .xib 时，我和我的同事在处理同一个 .xib 时会发生冲突。那么故事板呢？顺便说一句：不要告诉我使用多个故事板。如果我需要使用多个故事板，我认为我更喜欢 xib 而不是故事板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T06:14:05.347

如果您的应用程序有一个大故事板，并且您团队中的多个开发人员需要对故事板进行更改，您可能会遇到冲突。

如果您使用的是 xib，则可以将不相关的视图放在单独的 xib 中。然后当开发者 A 需要在视图 1 中更改某些内容时，他只需更改包含视图 1 的 xib。同时，如果开发者 B 在视图 2 中更改某些内容，他会更改包含视图 2 的 xib，这可能与xib 包含视图 1。所以你不会遇到冲突。

如果您使用情节提要，所有视图都在一个文件中。因此，开发人员 A 更改故事板以修改视图 1，同时开发人员 B 更改故事板以修改视图 2。繁荣，您会遇到冲突。

如果您的团队有多个开发人员在应用程序用户界面上工作，那么使用故事板比使用（仔细分离的）xib 更容易发生冲突。这是故事板的一个严重问题。

但是，您不能在 xib 中创建具有静态内容的表视图控制器。您只能在情节提要中做到这一点。所以有时在一个使用 xibs 的项目中创建一个只包含一个表视图控制器的故事板是值得的。

# java - 在 Vaadin 应用程序中忽略 Glassfish 会话超时

> ID：13356169
> 
> 赞同：1
> 
> 时间：2012-11-13T05:54:02.993
> 
> 标签：java, glassfish, vaadin, session-timeout

我们正在使用 Vaadin 应用程序，在使用过程中，Vaadin 最终显示错误“会话已过期”，但在托管此应用程序的 Glassfish 中，会话超时设置为 8 小时（远远超过上次访问和获取之间的时间段） '会话已过期'）。调试完应用后，我们发现了这个东西：在加载页面时，Vaadin 请求 session using `request.getSession(true)`，对于后续的 ajax 请求它使用`request.getSession(false)`；并最终`request.getSession(false)`返回`null`，因此`session expired`出现消息。似乎 Web 容器忽略了会话超时设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:16:54.337

Glassfish 中的默认会话超时为 30 分钟。如果这符合您的经验，8 小时（28800 秒）的超时设置会以某种方式被完全忽略。

您可以在 glassfish-web.xml 中指定超时时间： glassfish-web-app > session-config > session-properties > timeoutSeconds

或者，您可以在 web.xml 文件中指定会话超时元素。这会覆盖 timeoutSeconds 值。

# sql - SQL 服务器，HAVING 子句问题

> ID：13356170
> 
> 赞同：1
> 
> 时间：2012-11-13T05:54:06.567
> 
> 标签：sql, sql-server, sql-server-2008

我必须为我的数据库编写一个查询。查询如下。

```
/*  Query 9 – Most Valuable Players 
    "Who has received at least 2 MVP awards?"
    Produce a query to display the full name and number of MVP awards of any players who have been awarded the MVP in at least 2 races.  
    Make sure that races where no MVP was awarded are not included in the results, and order your results by the number of MVP awards in descending order.  
    Using your race view in this query is recommended.
    Hint:  Use HAVING to limit the results to players with an MVP count of at least 2. 
```

我已经使用以下代码进行了尝试：

```
CREATE VIEW playerView1
AS 
   select 
       player.id, player.firstName + ' ' + player.surname AS 'Full Name', race.mvp
   from 
       player  
   JOIN 
       race ON player.team = race.team
GO

SELECT playerView1.[Full Name]
From playerView1
GROUP BY [Full Name]
HAVING (playerView1.mvp) >1 
```

也试过

```
SELECT 
    player.firstName + ' ' + player.surname AS 'Full_name', raceView.mvp AS 'MVP Number', 
    raceView.mvp_name AS 'MVP Name'
FROM 
    raceView
JOIN 
    player ON raceView.mvp_name = player.firstName
WHERE 
    raceView.mvp > 1 
```

而且没有运气。关于我哪里出错的任何想法？并可能修复？

我使用第一个查询遇到的一个错误是

> *消息 8121，级别 16，状态 1，第 4
> 行列“playerView1.mvp”在 HAVING 子句中无效，因为它不包含在聚合函数或 GROUP BY 子句中。*

下面是我的整个数据库脚本，其中包括创建、填充和查看，然后才能执行导致我的问题的查询。

```
IF DB_ID ('Assignment2') IS NOT NULL
    BEGIN 
    DROP DATABASE Assignment2;
    END

/* Now create new database*/
CREATE DATABASE Assignment2;
GO
/* Make system use new database */
USE Assignment2;

/* Begin Creating tables */
/** Create Course Table **/
PRINT 'Creating table course.';
CREATE TABLE course (
    id INT IDENTITY, -- [CourseID] [int] IDENTITY(1,1) NOT NULL,
    name VARCHAR(50), -- [CourseName] [varchar](50) NULL,
    passingScore NUMERIC(18,0), -- [PassingScore] [numeric](18, 0) NOT NULL,
 CONSTRAINT course_pk PRIMARY KEY (id),
 CONSTRAINT passingScore CHECK (passingScore BETWEEN 0 AND 100)
);

/** Create RaceType Table**/
PRINT 'Creating table Race Type.' 
CREATE TABLE raceType (
    id INT IDENTITY, -- [RaceTypeID] [int] IDENTITY(1,1) NOT NULL,
    name VARCHAR(25) NOT NULL, -- [RaceTypeName] [varchar](25) NOT NULL,
CONSTRAINT raceType_pk PRIMARY KEY (id),
CONSTRAINT raceType_unique UNIQUE (name)
);

/** Create 'Teams' Table */
PRINT ' Creating table called Teams'
CREATE TABLE team (
    id INT IDENTITY, -- [TeamID] [int] IDENTITY (1,1) NOT NULL,
    name VARCHAR(25) NOT NULL, -- [TeamName] [varchar] (25) NOT NULL,
    biography TEXT, -- [Biography] [text] NULL,
    hyperlink VARCHAR(max), -- [Hyperlink] [varchar] (max) NULL,
CONSTRAINT team_pk PRIMARY KEY (id),
CONSTRAINT team_unique UNIQUE (name) 
);

/** Create "Players" Table**/
PRINT ' Creating table called Players'
CREATE TABLE player (
    id INT IDENTITY, -- [PlayerID] [int] IDENTITY(1,1) NOT NULL,
    firstName VARCHAR(50) NOT NULL, -- [FirstName] [varchar](50) NOT NULL,
    surname VARCHAR(50) NOT NULL, -- [Surname] [varchar](50) NOT NULL,
    coach INT, -- fk1       [CoachID] [int] NULL,
    team INT, -- fk2        [TeamID] [int] NULL,
CONSTRAINT player_pk PRIMARY KEY (id),
CONSTRAINT player_fk1 FOREIGN KEY (team) REFERENCES team (id),
CONSTRAINT player_fk2 FOREIGN KEY (coach) REFERENCES player (id)
);

/** Create "Races" Table **/
PRINT ' Creating table called Races'
CREATE TABLE race (
    id INT IDENTITY, -- [RaceID] [int] IDENTITY(1,1) NOT NULL,
    dateOfRace DATETIME NOT NULL, -- [DateOfRace] [datetime] NOT NULL,
    raceType INT NOT NULL, -- [RaceTypeID] [int] NOT NULL,
    course INT NOT NULL, -- [CourseID] [int] NOT NULL,
    team INT NOT NULL, -- [TeamID] [int] NOT NULL,
    observer INT NOT NULL, -- [ObserverID] [int] NOT NULL,
    mvp INT NULL, -- [MvpPlayerID] [int] NULL,
    finalScore INT NOT NULL, -- [FinalScore] [int] NOT NULL,
    pointsPenalised INT NOT NULL, -- [PointsPenalised] [int] NOT NULL,
CONSTRAINT race_pk PRIMARY KEY (id),
CONSTRAINT race_fk1 FOREIGN KEY (raceType) REFERENCES raceType(id),
CONSTRAINT race_fk2 FOREIGN KEY (course) REFERENCES course(id),
CONSTRAINT race_fk3 FOREIGN KEY (team) REFERENCES team(id),
CONSTRAINT race_fk4 FOREIGN KEY (observer) REFERENCES player(id),
CONSTRAINT race_fk5 FOREIGN KEY (mvp) REFERENCES player(id)
);
GO
/** End*/ 
```

填充脚本

```
/** Begin Populating "Course" table*/
PRINT 'Populating Course Table'

INSERT INTO course (name,passingScore) 
VALUES ('Easy Course','80');
INSERT INTO course (name,passingScore)
VALUES ('Medium Course','70');
INSERT INTO course (name,passingScore)
VALUES ('Hard Course','60');

/** Begin Populating "RaceType" Table */
PRINT 'Populating RaceType Table '

INSERT INTO raceType (name)
VALUES ('Ranked')
INSERT INTO raceType (name)
VALUES ('Practise')

/** Begin Populating "Teams" Table */
PRINT ' Populating Teams Table'

INSERT INTO team (name) 
VALUES ('Team BMW');
INSERT INTO team (name)
VALUES ('Team Porsche');
INSERT INTO team (name) 
VALUES ('Team Mercedez');
INSERT INTO team (name) 
VALUES ('Team AMartin');
INSERT INTO team (name)
VALUES ('Team Audi');

INSERT INTO player (firstName, surname)
VALUES ('hoger','amedi');
INSERT INTO player (firstName, surname, coach, team)
VALUES (' Lloyd', 'Banks', 1, 1);
INSERT INTO player (firstName, surname)
VALUES ('Silav', 'Govand');
INSERT INTO player (firstName, surname, coach, team)
VALUES ('hell', 'razor', 2, 2);
INSERT INTO player (firstName, surname, coach, team)
VALUES ( 'Alden', 'Padilla', 3, 1);
INSERT INTO player (firstName, surname)
VALUES ( 'Sina', 'Parker');
INSERT INTO player (firstName, surname, coach, team)
VALUES ( 'Lyle', ' Burks', 4, 2);
INSERT INTO player (firstName, surname, coach, team)
VALUES ('Rhona', 'Anthony', 5, 3);
INSERT INTO player (firstName, surname, team)
VALUES ('Seelie', 'Harper', 5);
INSERT INTO player (firstName, surname, coach, team)
VALUES ('Harper', 'Leonards', 6, 4)
INSERT INTO player (firstName, surname, coach, team)
VALUES ('jack', 'Merril', 7, 5)

INSERT INTO race (dateOfRace,finalScore,pointsPenalised,raceType,course,team,observer,mvp)
VALUES ('2011-12-03 06:01:49','53','4','2','1','4','2','1');
INSERT INTO race (dateOfRace,finalScore,pointsPenalised,raceType,course,team,observer,mvp)
VALUES ('2011-11-25 09:31:26','73','5','2','2','1','3','2');
INSERT INTO race (dateOfRace,finalScore,pointsPenalised,raceType,course,team,observer,mvp)
VALUES ('2011-12-03 19:36:34','52','1','1','1','5','4','3');
INSERT INTO race (dateOfRace,finalScore,pointsPenalised,raceType,course,team,observer,mvp)
VALUES ('2011-12-10 20:07:11','51','4','2','3','2','5','2');
INSERT INTO race (dateOfRace,finalScore,pointsPenalised,raceType,course,team,observer,mvp) 
VALUES ('2011-11-15 19:19:33','83','5','2','1','3','6','1');
INSERT INTO race (dateOfRace,finalScore,pointsPenalised,raceType,course,team,observer)
VALUES ('2011-11-27 02:32:09','53','1','2','3','5','7');
INSERT INTO race (dateOfRace,finalScore,pointsPenalised,raceType,course,team,observer)
VALUES ('2011-11-24 10:31:53','51','3','1','1','4','8');
INSERT INTO race (dateOfRace,finalScore,pointsPenalised,raceType,course,team,observer)
VALUES ('2011-11-19 15:17:32','70','2','1','2','5','9');
INSERT INTO race (dateOfRace,finalScore,pointsPenalised,raceType,course,team,observer)
VALUES ('2011-12-08 18:00:51','59','2','1','3','1','10');
INSERT INTO race (dateOfRace,finalScore,pointsPenalised,raceType,course,team,observer)
VALUES ('2011-12-09 19:55:53','67','5','2','3','5','10');

Select * 
From player;

Select *
From team;

Select *
From raceType;

Select *
From course;

Select *
From race; 
```

查看脚本

```
USE Assignment2;
GO
PRINT 'Creating Player View'
GO
CREATE VIEW playerView AS 
SELECT player.id, player.firstName + ' ' + player.surname AS 'Full name', player.team, team.name, player.coach, coach.firstName, coach.surname 
FROM player
LEFT OUTER JOIN team
    ON player.team = team.id
    LEFT OUTER JOIN player as coach
        ON player.coach = coach.id;

GO
/* 
   Create a view which shows the following details of all races:
        • All of the columns in the race table
        • The name of the race type, course and team involved in the race
        • The full name of the player observing the race and the full name of the MVP (if applicable)
        • A calculated column with an alias of “unpenalised_score”, which adds the points penalised to the final score

   Creating this view requires a select statement using multiple joins and concatenation of names.  
   Make sure that you use the appropriate type of join to ensure that races without MVPs are still included in the results.
*/

-- Write your Race View here
PRINT 'Creating Race View'
GO
CREATE VIEW raceView AS 
SELECT race.id, race.dateOfRace, race.raceType, raceType.name AS raceTypeName, race.course, course.name AS courseName, race.team, team.name AS teamName, race.observer, obs.firstName + ' ' + obs.surname AS observer_name, race.mvp, mvp.firstName + ' ' + mvp.surname AS mvp_name, race.pointsPenalised, race.finalScore + race.pointsPenalised AS unpenalised_score, race.finalScore
FROM race
INNER JOIN raceType
    ON race.raceType = raceType.id
    INNER JOIN course
        ON race.course = course.id
        INNER JOIN team
            ON race.team = team.id
            LEFT OUTER JOIN player AS mvp
                ON race.mvp = mvp.id
                LEFT OUTER JOIN player AS obs
                    ON race.observer = obs.id;
GO 

SELECT * 
FROM playerView

SELECT *
FROM raceView 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T05:57:58.617

 ~~你需要使用`COUNT`

```
select      player.id, 
            player.firstName + ' ' + player.surname AS [Full Name],
            COUNT(*)
from        player  JOIN race 
                ON player.team = race.team
GROUP BY    id, player.firstName + ' ' + player.surname
HAVING      COUNT(*) >= 2 
```

 ~~**更新 1**

```
SELECT MVP_NAME, COUNT(*) TotalMVP
FROM   raceView
WHERE MVP IS NOT NULL
GROUP BY MVP_NAME
HAVING COUNT(*) >= 2
ORDER BY TotalMVP DESC; 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!3/1397c/8)~~~~

# objective-c - 如何为 UISlider 决定正确的色调

> ID：13356172
> 
> 赞同：1
> 
> 时间：2012-11-13T05:54:10.317
> 
> 标签：objective-c, xcode4.5, uislider

说我有图。我想设置 UISlider 的色调以匹配图片。如果我通过输入与颜色值完全相同的数字来按照通常的方式进行操作，我得到的是一种更浅的颜色。

那么我该如何正确设置呢？

# magento - 在 Magento 中测试购物车的 A/B (Split)

> ID：13356174
> 
> 赞同：1
> 
> 时间：2012-11-13T05:54:25.727
> 
> 标签：magento, ab-testing

我们想在 Magento 的购物车上实施 A/B（或拆分）测试。

新设计与现有设计有很大的不同，我们无法使用 Visual Web Optimizer 之类的工具轻松创建测试。我们能够使用 VWO 做某事的唯一方法是为购物车创建两个不同的 URL，在正常中显示原始 URL，在中显示`/checkout/cart`新URL `/checkout/shoppingcart`- 或类似的东西。

是否有可能在 Magento 中做这样的事情，还是我要更深入地研究代码？

我正在研究的一个可能的解决方案是（做一个非常狡猾的黑客）复制 CartController.php 并创建一个名为 ShoppingcartController.php 的新控制器。我不喜欢这个，这只是一种狡猾的方式......但由于它将被丢弃代码，我想我可以在晚上睡觉;）

我完全迷失了我怎么能做到这一点。最终，如果我能创建两条前端路线，指向同一个控制器，那就太好了……但我认为 Magento 没有那么灵活。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T17:13:43.070

实现此目的的一种方法是创建两个“视图”（在一个网站下），并为每个视图使用不同的 URL，例如：www.site.com www1.site.com。

一旦设置好，Google 的 A/B 测试功能（或其他一些 JS）就会将用户引导到不同的视图。

祝你好运！

# c++ - 返回 NULL 但出现错误 C2440: 'return' : 无法从 'int' 转换为 'const &'

> ID：13356176
> 
> 赞同：4
> 
> 时间：2012-11-13T05:54:41.617
> 
> 标签：c++, compiler-errors, nul

我有一个方法如下

```
class BuildOrderStrategy
{

public:

    virtual const Urgency& getUrgency() = 0;
    ...
} 
```

执行如下

```
const Urgency& RandomBuildOrderStrategy::getUrgency()
{
    return NULL;
} 
```

但是在编译时我收到了这个错误

```
error C2440: 'return' : cannot convert from 'int' to 'const Urgency &' 
```

此时我真的想从 getUrgency 方法返回一个 NULL 值.. 所以.. 我的代码有什么问题？我该如何解决？我来自java世界，这是完全可能的..

紧急代码是这样的

```
class Urgency : public Investment
{
private:

public:
    Urgency(BWAPI::UnitType type1, BWAPI::UpgradeType type2, BWAPI::TechType type3);
    ~Urgency(void);
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T05:56:11.713

您混淆了引用和指针。如果你返回一个引用，它不可能是`NULL`，因为一个引用永远不可能。如果你想返回一个指针，你需要返回`Urgency*`，而不是`Urgency&`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T05:57:09.287

在 C++ 中，与 Java 和其他语言不同，您不能有空引用。空指针是的。但是不存在空引用的概念。

`RandomBuildOrderStrategy`请记住，NULL 实际上只是 0。现在停下来想一想，将 a 设置为 0有意义吗？

您可以使用 Pukku 建议的指针。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-13T06:00:12.883

从这种类型的函数返回 NULL 没有多大意义。您可能想要一个指针而不是引用。

NULL 被定义为 0 （甚至 (void*)0 ），因为 0 是一个整数，它是你在这个函数中返回的，它不能与引用一起使用（它必须引用一个实际的对象）

在这种情况下，在函数中返回指向紧急对象的指针更有意义。所以尝试更改对指针的引用。

```
const Urgency* RandomBuildOrderStrategy::getUrgency()
{
    return NULL;
} 
```

或者甚至尝试返回一个以特殊方式初始化的紧急类型，以便稍后检查它是否为“空”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-13T05:58:10.380

`NULL`如果你的函数返回一个指针，返回就可以了。当然，它没有，所以不好。

引用保证引用在行为良好的程序中有效的东西（即，没有 UB）。 `NULL`即使存在从`int`(0, NULL) 到的转换，也不会转换为有效引用`const Urgency&`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-13T05:57:38.540

您正在尝试返回对 NULL 的引用，这在 C++ 中是不允许的

引用是用作先前定义变量的别名或替代名称的名称。

您可以更改您的 getUrgency 接口以返回指针。由于您的紧急程度是从 Investment 继承的，您可以返回 Investment* 指针

```
class BuildOrderStrategy
{

public:
    virtual const Investment* getUrgency() = 0;
    ...
}

const Urgency* RandomBuildOrderStrategy::getUrgency()
{
    return NULL;   
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-13T05:59:09.673

引用的返回确保函数不返回 NULL，但始终返回对对象的引用。如果你想检查 NULL 你应该返回一个指针。OTOH 如果要返回引用，请返回一个空的紧急对象。

# php - 未定义的偏移量问题 PHP

> ID：13356179
> 
> 赞同：0
> 
> 时间：2012-11-13T05:55:04.567
> 
> 标签：php

我有一个变量`$newExtract[$x][3]`。当我尝试将其爆炸为：

```
explode("/", $newExtract[$x][3]) 
```

它给了我错误信息：

> “注意：未定义的偏移量：第 63 行 C:\xampp\htdocs\torrent\classes\sm9.class.php 中的 3”。

但是，当我使用 回显它时`echo $newExtract[$x][3]; die();`，它给我的结果是`13/08/2012 20:58`.

谁能帮助我发生了什么？怎么，我炸不出来？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T06:22:25.653

我在 PHP 中看到过*隐式*字符串转换（或在本例中为字符串取消引用）导致问题的几个地方，最简单的通向理智的途径是使用中间变量：

```
$date = $newExtract[$x][3];
explode("/", $date); 
```

它似乎更频繁地出现在某些内部函数中，我通常更多地使用对象和 __toString() 遇到它，但这也不是第一次出现这种情况。

# opengl - 透视变换正在做相反的事情

> ID：13356181
> 
> 赞同：1
> 
> 时间：2012-11-13T05:55:39.533
> 
> 标签：opengl

我的问题是我的透视投影与它应该做的相反。不是将我的对象“缩小”到远处，而是将其扩展：

[![](../Images/f1ada6552137289fdd68daefc80d5b20.png "由 imgur.com 主办")](https://imgur.com/BXLdM)

白色部分是最近的三角形。我想你明白了。

我正在创建自己的透视投影，并将其发送到我的顶点着色器。我正在使用以下 opengl 状态：

```
gl.glEnable(GL2ES2.GL_DEPTH_TEST);
gl.glDepthFunc(GL2ES2.GL_LEQUAL);

gl.glEnable(GL2ES2.GL_CULL_FACE);
gl.glCullFace(GL2ES2.GL_BACK);
gl.glFrontFace(GL2ES2.GL_CW); 
```

我正在为透视矩阵部分使用以下代码：

```
eye = {0,0,5};
viewMatrix = Calc.translate(identity_matrix, -eye[0], -eye[1], -eye[2]);
perspectiveMatrix = Calc.buildPerspProjMat(90, 1, 0.5f, 10);
model_view_projection = Calc.multiply(perspectiveMatrix, viewMatrix); 
```

其中 Calc.java 有这些功能：

```
public static float[] translate(float[] m,float x,float y,float z){
    float[] t = { 1.0f, 0.0f, 0.0f, x,
                  0.0f, 1.0f, 0.0f, y,
                  0.0f, 0.0f, 1.0f, z,
                     0,    0,    0, 1.0f };      
    return multiply(t, m);
}

public static float[] buildPerspProjMat(float fov, float aspect, float znear, float zfar) {
    float[] m = new float[16];
    float ymax = (float) (znear * Math.tan(Math.toRadians(fov/2)));
    float ymin = -ymax;
    float xmax = ymax * aspect;
    float xmin = ymin * aspect;

    float width = xmax - xmin;
    float height = ymax - ymin;

    float depth = zfar - znear;
    float q = -(zfar + znear) / depth;
    float qn = -2 * (zfar * znear) / depth;

    float w = 2 * znear / width;
    w = w / aspect;
    float h = 2 * znear / height;

    m[0]  = w;
    m[1]  = 0;
    m[2]  = 0;
    m[3]  = 0;

    m[4]  = 0;
    m[5]  = h;
    m[6]  = 0;
    m[7]  = 0;

    m[8]  = 0;
    m[9]  = 0;
    m[10] = q;
    m[11] = qn;

    m[12] = 0;
    m[13] = 0;
    m[14] = -1;
    m[15] = 0;
    return m;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T06:36:19.870

我不知道您是否将 m 直接上传到 OpenGL，但是您的矩阵看起来与 OpenGL 中的矩阵通常的样子不同。

一个非转置矩阵的布局如下：

```
0   4   8  12
1   5   9  13
2   6  10  14
3   7  11  15 
```

所以 -1 项应该是 m[11] 等。

# node.js - 是否有可用于管理用户帐户的 meteor.js 库？

> ID：13356184
> 
> 赞同：0
> 
> 时间：2012-11-13T05:55:57.330
> 
> 标签：node.js, meteor, user-management, account-management

是否有可用于管理用户帐户的 meteor.js 库？

我想让用户注册，有权访问唯一的用户 ID 以限制单个用户可以做某事的次数，并且还有不同级别的用户来控制访问。如果我不必自己构建它，那就太好了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T06:40:54.347

查看[accounts api](http://docs.meteor.com/#accounts_api)和[passwords 包](http://docs.meteor.com/#accounts_passwords)，这应该可以节省您编写用于实现用户帐户的大部分样板代码。

还有支持 facebook、google 等的[accounts-ui 包。](http://docs.meteor.com/#accountsui)

您需要实现自己的 ACL 并确保集合具有适当的权限。

最后看看[All Tomorrow's Party](http://meteor.com/examples/parties)演示，了解一些示例实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T16:35:53.787

无耻插件：这是一个基于 Meteor Roles 包的客户经理 -

[https://github.com/hharnisc/meteor-accounts-admin-ui-bootstrap-3/](https://github.com/hharnisc/meteor-accounts-admin-ui-bootstrap-3/)

自述文件中包含的教程。

# optimization - if语句处理速度

> ID：13356195
> 
> 赞同：1
> 
> 时间：2012-11-13T05:57:57.653
> 
> 标签：optimization, if-statement

这只是为了缓解我的好奇心，如果有人愿意回答它，虽然那太棒了。

使用 if 语句，计算结果所需的时间是否受其编写方式的影响？

所以我的意思是（如果不是很清楚的话）以下两个语句会花费相同的时间来处理吗？

```
if 1 < 2 and 3 = 3 then
   //do something
end if 
```

相比

```
if 1 < 2 then
    if 3 = 3 then
      //Do something
    end if
end if 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T06:04:39.707

这只是[过早优化](https://stackoverflow.com/a/2978548/738746)的另一种情况。想了很多，你不会得到任何东西。

您应该关注的是如何使您的代码更具可读性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T06:06:16.473

如果我们认为编译器不会优化这两个调用，那么第二个语句将需要两个分支指令而不是一个。由于流水线，分支需要为 CPU 做一些额外的工作。所以，从技术上讲，第二个版本需要更多的工作，但在这里应该没关系。

# spring-data-jpa - 大幅提高插入性能

> ID：13356199
> 
> 赞同：10
> 
> 时间：2012-11-13T05:58:18.620
> 
> 标签：spring-data-jpa, bulkinsert

在我的应用程序中，我需要大幅提高插入性能。示例：包含大约 21K 记录的文件需要 100 多分钟才能插入。它可能需要一些时间是有原因的，比如 20 分钟左右，但超过 100 分钟太长了。

数据被插入到 3 个表中（多对多）。Id 是从序列生成的，但我已经用谷歌搜索并设置了`hibernate.id.new_generator_mappings = true`allocationSize + 序列增量为 1000。

数据量也没什么特别的，文件是 90 mb。

我已经用visual vm验证了大部分时间都花在了jdbc驱动程序（postgresql）和hibernate上。我认为这个问题与子表中的唯一约束有关。服务层在插入之前会进行手动检查 (=SELECT)。如果记录已经存在，它会重用它而不是等待约束异常。

因此，总结一下特定文件，每个表将有 1 个插入（可能会有所不同，但对于理想（最快）情况下的这个文件来说不是）。这意味着总共 60k 插入 + 20k 选择。仍然超过 100 分钟似乎很长（是的，硬件很重要，它是在具有 7200 rpm 驱动器的简单 PC 上，没有 ssd 或 raid）。然而，这是对以前的应用程序（纯 jdbc）的改进版本，在此硬件上的相同插入大约需要 15 分钟。考虑到在这两种情况下，“预处理”都花费了大约 4-5 分钟，因此增加幅度很大。

任何可以改进的提示？有批量加载功能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T13:16:54.650

看

[spring-data JPA：手动提交事务并重新启动新事务](https://stackoverflow.com/questions/14936266/spring-data-jpa-manual-commit-transaction-and-restart-new-one)

在每次第 n 次调用 save() 方法之后添加`entityManager.flush()`和。`entityManager.clear()`如果您使用休眠添加`hibernate.jdbc.batch_size=100`，这似乎是一个合理的选择。

性能提升 > 10 倍，可能接近 100 倍。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-25T08:46:10.640

听起来像一个数据库问题。检查您的表是否使用 InnoDB 或 MyISAM，根据我的经验，后者在插入时非常慢，并且是新数据库的默认设置。尽可能删除外键

如果您的问题确实与单个唯一索引有关，InnoDB 可以解决问题。

# c# - 此 LDAP 连接字符串中的域名是什么？

> ID：13356202
> 
> 赞同：0
> 
> 时间：2012-11-13T05:59:12.080
> 
> 标签：c#, asp.net, .net, ldap

我是 LDAP 的初学者。谁能告诉我这个 LDAP 连接字符串中的域名是什么：

```
connectionString="LDAP://AD/dc=Demo, dc=Local" 
```

不管是`AD`还是`Demo`还是`Local`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T06:01:16.263

`dc`意思是“域组件”，按照从大到小的顺序读取，所以DNS域名是“demo.local”。

“AD”是要连接的 LDAP 服务器的主机名。

其他 LDAP 路径组件喜欢`ou`并`cn`指代目录层次结构中的容器和对象，因此`ldap://domainController/cn=Foobar,ou=Users,dc=domain,dc=local`指的是一个名为“”的对象，位于一个名为“ `Foobar`”的容器`Users`内，位于域名“ `domain.local`”的目录中

# javascript - 为什么我的变量在 Underscore.js 每个函数中未定义？

> ID：13356203
> 
> 赞同：19
> 
> 时间：2012-11-13T05:59:16.117
> 
> 标签：javascript, variables, underscore.js

这是我的代码：

```
TextClass = function () {
    this._textArr = {};
};

TextClass.prototype = {
    SetTexts: function (texts) {
        for (var i = 0; i < texts.length; i++) {
            this._textArr[texts[i].Key] = texts[i].Value;
        }
    },
    GetText: function (key) {
        var value = this._textArr[key];
        return String.IsNullOrEmpty(value) ? 'N/A' : value;
    }
}; 
```

我正在使用 Underscore.js 库，并希望像这样定义我的 SetTexts 函数：

```
_.each(texts, function (text) {
    this._textArr[text.Key] = text.Value;
}); 
```

但是当我进入循环时 _textArr 是未定义的。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-13T06:13:40.560

在 JavaScript 中，函数上下文（称为）的`this`工作方式[完全不同](https://stackoverflow.com/questions/9644044/javascript-this-pointer-within-nested-function)。

您可以通过两种方式解决此问题：

1.  使用临时变量来存储上下文：

    ```
    SetTexts: function (texts) {
      var that = this;
      _.each(texts, function (text) {
        that._textArr[text.Key] = text.Value;
      });
    } 
    ```

2.  使用第三个参数来[`_.each()`](http://underscorejs.org/#each)传递上下文：

    ```
    SetTexts: function (texts) {
      _.each(texts, function (text) {
        this._textArr[text.Key] = text.Value;
      }, this);
    } 
    ```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T06:13:56.760

您必须像这样传递调用`this`的上下文：`_.each`

```
_.each(texts, function (text) {
    this._textArr[text.Key] = text.Value;
}, this); 
```

请参阅[http://underscorejs.org/#each的文档](http://underscorejs.org/#each)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T06:09:28.270

`this`在 javascript 中的工作方式与您期望的不同。阅读这篇文章： [http ://www.digital-web.com/articles/scope_in_javascript/](http://www.digital-web.com/articles/scope_in_javascript/)

**简洁版本：**

`this`每次调用函数时值都会发生变化。修复，设置另一个变量等于`this`并引用它

```
TextClass = function () {
    this._textArr = {};
};

TextClass.prototype = {
    SetTexts: function (texts) {
        var that = this;
        for (var i = 0; i < texts.length; i++) {
            that._textArr[texts[i].Key] = texts[i].Value;
        }
    },
    GetText: function (key) {
        var value = this._textArr[key];
        return String.IsNullOrEmpty(value) ? 'N/A' : value;
    }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-23T16:10:05.743

请注意，您还可以传递“this”以外的内容。例如，我做类似的事情：

```
var layerGroupMasterData = [[0],[1,2,3],[4,5],[6,7,8,9],[10]];

_.each(layerGroupMasterData,function(layerGroup,groupNum){
    _.each(layerGroup, function (layer, i) {
            doSomethingThatComparesOneThingWithTheOverallGroup(layerGroupMasterData,layer);
    },layerGroups);
},layerGroupMasterData); 
```

# cakephp - 如何在 Helper 中使用模型 - CakePHP 2.x

> ID：13356205
> 
> 赞同：2
> 
> 时间：2012-11-13T05:59:30.310
> 
> 标签：cakephp, cakephp-2.0

我最近将我的应用程序从 cake 1.3.x 升级到 cake 2.x。现在我有一个在某些功能中使用模型的助手。最初加载模型的语法是（适用于 1.3.x）

```
 App::import('Model', $modelName);
     $modelObject = &ClassRegistry::getObject($modelName);    
     $modelObject->find() 
```

现在我将其更改为以下

```
 App::uses($modelName,'Model');
    $modelObject = &ClassRegistry::getObject($modelName);
    $modelObject->find() 
```

问题是，这种转换不起作用。谁能告诉我我在哪里做错了。提前致谢。

PS：错误信息是：
在非对象上调用成员函数 find()

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T06:13:03.227

工作代码应该是

```
//let $modelName be User  
App::import("Model", "User");  
$model = new User();  
$model->find("list"); 
```

我希望这会帮助一些有需要的人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-14T05:59:28.337

您也可以在 helper 中加载模型，在 helper 类中添加以下方法：

步骤1：

```
public function loadModel($modelClass = null, $id = null) {
    if ($modelClass === null) {
        $modelClass = $this->modelClass;
    }

    $this->uses = ($this->uses) ? (array) $this->uses : array();
    if (!in_array($modelClass, $this->uses, true)) {
        $this->uses[] = $modelClass;
    }

    list($plugin, $modelClass) = pluginSplit($modelClass, true);

    $this->{$modelClass} = ClassRegistry::init(array(
                'class' => $plugin . $modelClass, 'alias' => $modelClass, 'id' => $id
    ));
    if (!$this->{$modelClass}) {
        throw new MissingModelException($modelClass);
    }
    return true;
} 
```

Step2：像这样在控制器中调用上述方法：

```
$this->loadModel(ModelName); 
```

我希望这能解决问题

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-12-21T09:58:47.773

我想通过helper以foreach的形式查看数据

```
public function display()
{
    $links = TableRegistry::getTableLocator()->get('category');
    $category = $links->find('all')
        ->where(['status' => 1, 'position' => 0])
        ->select([
            "category" => 'parent', 'name'
        ])
        ->toArray();
    return $category['category'];
} 
```

# php - 如何在数字的每 3 位中添加逗号

> ID：13356213
> 
> 赞同：3
> 
> 时间：2012-11-13T06:00:11.870
> 
> 标签：php

例如，我想在数字的每 3 位数字中加上逗号。

```
$number = 1234567;
// should print 1,234,567 
```

我怎样才能做到这一点？

**更新：请看这段代码**

```
<?php
/**
 * Get Popularity Text of a Domain via Alexa XML Data
 *
 * @return string|FALSE text or FALSE on error
 */
function alexa_get_rank($domain)
{
    $alexa = "http://data.alexa.com/data?cli=10&dat=s&url=%s";
    $request_url =  sprintf($alexa, urlencode($domain));

    $xml = simplexml_load_file($request_url);
    if (!$xml) {
        return FALSE;
    }

    $nodeAttributes = $xml->SD[1]->POPULARITY->attributes();
    $text = (int) $nodeAttributes['TEXT'];

    $num = number_format($text);

    return $num;
} 
```

**在此仅返回 3 位数。**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-13T06:01:48.157

利用

```
echo number_format('1234567'); 
```

[PHP 手册：number_format()](http://php.net/manual/en/function.number-format.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T06:03:58.930

试试这个：

```
$number = 1234567;
echo number_format($number); 
```

将此用作参考[。](http://php.net/manual/en/function.number-format.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T06:03:22.317

```
$number = 123456789;
$number = number_format($number);
echo $number; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T06:03:38.307

请参阅[number_format](http://php.net/manual/en/function.number-format.php)。

```
<?php
echo number_format(1234567890); //1,234,567,890 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T06:06:11.903

```
<?
$number = 1234567;
echo number_format($number); // this returns : 1,234,567
?> 
```

了解有关[number_format() 的更多信息；](http://php.net/manual/en/function.number-format.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-27T04:05:34.963

```
 $num = 1234567.65;
 $num = number_format($num);
 echo $num; // $num = 1,234,568 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-17T23:26:12.000

```
$number = 1234.56;

//english notation (default)
$english_format_number = number_format($number);// 1,235

// French notation
$nombre_format_francais = number_format($number, 2, ',', ' ');// 1 234,56

//----------------------------------------------

$number = 1234.5678;

// english notation without thousands separator
$english_format_number = number_format($number, 2, '.', '');// 1234.57 
```

查看[php.net上的](http://php.net)[number_format()](http://php.net/manual/en/function.number-format.php)以获取更多信息。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-22T13:11:23.233

要格式化数字，可以使用`number_format`

试试这个代码：

```
$number=1234567;  
$number_format=number_format($number,0,".",","); // return 1,234,567 
```

# mod-rewrite - mod_rewrite 将一个域重定向到另一个 URL

> ID：13356218
> 
> 赞同：8
> 
> 时间：2012-11-13T06:00:48.907
> 
> 标签：mod-rewrite

我的 freemagickey.com 和 gogomagickey.com 域都指向同一个 Apache 服务器。对 gogomagickey.com 域的任何请求当前都应重定向到[http://www.indiegogo.com/magickey-perfect-password-management/](http://www.indiegogo.com/magickey-perfect-password-management/)。

我一直在阅读 mod_rewrite 文档并查看关于 SO 的类似问题，并毫无乐趣地破解我的 .htaccess。要么不重定向，要么重定向两个域。

是否可以在 .htaccess 中使用 mod_rewrite 做需要的事情？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T06:26:49.530

是的，这是可能的，我相信这应该对你有用：

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteCond %{HTTP_HOST} gogomagickey\.com$ [NC]
  RewriteRule ^(.*)$ http://www.indiegogo.com/magickey-perfect-password-management/ [L,R=301]
</IfModule> 
```

# django - 为什么 uwsgi 工作人员空闲但 nginx 显示很多超时？

> ID：13356219
> 
> 赞同：1
> 
> 时间：2012-11-13T06:01:02.477
> 
> 标签：django, nginx, uwsgi

堆栈：nginx、uwsgi、django

uwsgitop 和 top 都显示 uwsgi worker 处于空闲状态，而 nginx 错误日志显示上游超时。

我认为某些请求需要大量资源，例如等待数据库或缓存，而其他请求则不需要。在检查了超时请求后，它们中的大多数都不是贪婪的。任何类型的请求都已超时。

那么，如果其他人真的很忙，为什么 nginx 不将请求播种到空闲的请求呢？为什么uwsgi大师只是让某人忙而其他人闲着？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T16:03:47.843

我想回答我自己的问题。

将内核参数：net.ipv4.ip_conntrack_max 从 65560 更改为 6556000

我有一个关于我们如何找到答案的完整故事：

1.  用户说慢，慢，慢

2.  nginx 充斥着“上游连接超时”

3.  我检查了 uwsgi 日志，发现了一些错误，修复了它；发现更多，修复更多，这个循环持续了好几天。直到昨天，我还认为与 uwsgi、memcached、db、redis 或任何后端无关，因为 uwsgi 处于空闲状态

4.  所以我认为 nginx 一定有问题，重新加载，重新启动，检查连接，workers，proxy_read_timeout 等等。没有运气。

5.  检查 ulimit -n，它报告 1024，默认值。我有 8 个 nginx 工作人员，所以连接数应该达到 1024 * 8，我认为这可能没问题，因为 nginx 从来没有说过太多打开的文件。无论如何，我将其更改为 4096。没有运气。

6.  检查连接数和状态，然后出现问题。上游连接都处于 syn_sent 状态，然后超时发生。300 个连接中只有 2 或 3 个处于已建立状态。我们想知道为什么。我的一位朋友告诉我使用 tcpdump，这是我一次都不敢尝试的神奇工具。

7.  然后我们去syslog发现如下错误，最后我们解决了问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-28T22:30:09.173

我有一个类似的问题，我的监听队列在增长，尽管所有工作人员都处于空闲状态，但 RPS 很低。

samuel 发现了其中一种情况，但这种行为还有其他一些潜在原因：

*   net.core.somaxconn 不够高
*   uwsgi`--listen`不够高
*   nginx 工作进程太低
*   nginx worker 连接太少

如果这些都不起作用，那么您需要检查您的日志，确认对 uWSGI 的入站请求在 http/1.1 而不是 http/1.0 下，然后使用`--http11-socket`

以下是我在解决这个问题时的一些发现：[https ://wontonst.blogspot.com/2019/06/squishing-performance-bug-in.html](https://wontonst.blogspot.com/2019/06/squishing-performance-bug-in.html)

nginx 调优页面还有一些其他配置可能对解决这个问题有用也可能没用： [https ://www.nginx.com/blog/tuning-nginx/](https://www.nginx.com/blog/tuning-nginx/)

# ruby - 对于一大组坐标，如何快速插入/更新/删除/fetch_by_range到这个集合

> ID：13356225
> 
> 赞同：0
> 
> 时间：2012-11-13T06:02:11.240
> 
> 标签：ruby, algorithm

假设我有一大组坐标

`all_users = [{:user_id=>1,:x=>100,:y=>100}, {:user_id=>2,:x=>120,:y=>120}, ...]`

这里有几个操作：

*   插入

    玩家上线，报告他当前的坐标

    `all_users << {:user_id=>3,:x=>150,:y=>150}`

*   通过 user_id 更新坐标

    玩家移动到新坐标

    `user = all_users.detect {|u| u[:user_id] == current_user_id }`

    `user.update :x => new_x, :y => new_y if user`

*   按 user_id 删除

    玩家下线

    `all_users.delete_if {|u| u[:user_id] == current_user_id }`

*   按坐标范围查找

    找到我周围的用户，+-100 说。

    `all_users.select {|u| u[:user_id] != current_user_id && (u[:x] - me[:x]).abs <= 100 && (u[:y] - me[:y]).abs <= 100 }`

虽然如您所见，更新/删除/查找操作都是 O(n)，我认为我可以做得更好，也许为 user_id & x & y 设计外部索引是一种选择，就像数据库所做的那样。还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:46:36.587

The first three operations you can be easily solved if you create a hash table with the `user_id` being the key. This will reduce the complexity of the operations to amortized `O(1)`.

The last operation is a bit ambiguous: what should the method return if there is more than one user in the range? Will it be an array of users? Given your sub-optimal solution, I assume you are interested in all users in the range. This can never be improved in worst case, because the answer itself might be all `n` users (thus complexity of `O(n)`).

The act of finding all points within given rectangle is called spatial indexing. One of the most commonly used solutions for such query is the [Quad Tree](http://en.wikipedia.org/wiki/Quadtree). Still, my note for the worst case scenario holds true for sure, whatever structure you choose to use.

As I mentioned in the comment below, you need not worry for the fact I mention two different structures for implementing the different operations. It is very often that you use more than one representation of the same data set in order to get all operations optimal.

# javascript - 弹出窗体居中

> ID：13356227
> 
> 赞同：0
> 
> 时间：2012-11-13T06:02:30.240
> 
> 标签：javascript, html

老实说，我根本不懂 JavaScript。我一直通过看别人来弄清楚事情，但这次不是！我希望我的一个表单以提交为中心弹出。到目前为止，我已经让它弹出并保留了表单数据，但我似乎无法让它居中！这是我使用的一些代码：

另外，如果有人可以向我解释这一点，那就太好了。我的表单操作看起来有点疯狂，document.getElementByID('Name").vaule 加上电子邮件等等，但表单字段 ID 与操作不匹配，但它仍然有效。我不知道那个或为什么它实际上仍然有效[。http://www.computerbytez.com/develop.html](http://www.computerbytez.com/develop.html)用于表单！

形式：

```
<form action="https://computerbytez.com/InstantChat/Standard/logmein.html?Name=' + document.getElementById('Name').value + '&amp;Email=' + document.getElementById('Name').value, '', 'toolbar=no, status=no, menubar=no, titlebar=no, location=no, scrollbars=no, resizable=no, height=500, width=400'" id="lmiform">
            <div class="form-field">
        <label class="cm-required   " for="elm_7">Name</label> <input class="input-text" id="elm_7" name="name" size="50" style="width: 100%; max-width: 372px;" type="text"/></div>
<div class="buttons-container">
        <span class="button-submit button-wrap-left"><span class="button-submit button-wrap-right"><input type="submit" value="Connect To Technician" /></span></span></div> 
```

表单 JavaScript：

```
$(document).ready(function() {
    $('#lmiform').submit(function() {
 window.open('', 'formpopup', 'width=620,height=480,scrollbars=no,resizable=no,top=200,left=200');
        this.target = 'formpopup';
    });
}); 
```

我也一直在搞砸这个（链接的弹出中心），我一直试图将两者结合起来，但没有运气：

```
<script>
function PopupCenter(pageURL, title,w,h) {
var left = (screen.width/2)-(w/2);
var top = (screen.height/2)-(h/2);
var targetWin = window.open (pageURL, title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);
} 
</script>

<a href="javascript:void(0);" onclick="PopupCenter('example.html', 'myPop1',620,470);"><img alt="" class="LMIpic" src="live_help_online.gif" /> </a> 
```

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T06:15:49.513

我访问过您的网站，当单击图像时，弹出窗口居中显示，对我来说很好。代码看起来不错。尝试清除浏览器缓存。

编辑：

```
 $(document).ready(function() {
        $('#lmiform').submit(function() {
            var left = (screen.width/2)-(620/2);
            var top = (screen.height/2)-(480/2);
            window.open('', 'formpopup', 'width=620,height=480,scrollbars=no,resizable=no,top='+top+',left='+left);
            this.target = 'formpopup';
        });
    }); 
```

# facebook-like - 赞按钮（确认）

> ID：13356228
> 
> 赞同：5
> 
> 时间：2012-11-13T06:02:31.303
> 
> 标签：facebook-like, facebook-opengraph

我有 Facebook Like 按钮，但它没有显示在我的时间线中。当我在我的网站上单击“赞”按钮时。它将更改为确认单击此按钮后，将弹出一个小窗口来喜欢该产品。在那个小窗口的链接中，它说的是这样的

[http://www.facebook.com/plugins/error/confirm/like?iframe_referer=http%3A%2F%2F3beachschemist.doublet.com.au%2Fproductdetail.aspx%3Fname%3DSWISSE-HAND-CREAM-WITH-VIT- F---POMEGRANATE-100ML&secure=false&plugin=like&return_params=%7B%22api_key%22%3A%22171681722971300%22%2C%22locale%22%3A%22en_US%22%2C%22sdk%22%3A%22joey%22%2C %22channel_url%22%3A%22http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D17%23cb%3Dffcb50044%26origin%3Dhttp%253A%252F%252F3beachschemist.doublet.com.au %252Ff39b47030%26domain%3D3beachschemist.doublet.com.au%26relation%3Dparent.parent%22%2C%22href%22%3A%22http%3A%2F%2F3beachschemist.doublet.com.au%2Fproductdetail。aspx%3Fname%3DSWISSE-HAND-CREAM-WITH-VIT-F---POMEGRANATE-100ML%22%2C%22node_type%22%3A%22link%22%2C%22width%22%3A%22450%22%2C% 22layout%22%3A%22standard%22%2C%22colorscheme%22%3A%22light%22%2C%22action%22%3A%22recommend%22%2C%22show_faces%22%3A%22false%22%2C%22send% 22%3A%22true%22%2C%22extended_social_context%22%3A%22false%22%2C%22ret%22%3A%22sentry%22%2C%22act%22%3A%22connect%22%7D](http://www.facebook.com/plugins/error/confirm/like?iframe_referer=http%3A%2F%2F3beacheschemist.doublet.com.au%2Fproductdetail.aspx%3Fname%3DSWISSE-HAND-CREAM-WITH-VIT-F---POMEGRANATE-100ML&secure=false&plugin=like&return_params=%7B%22api_key%22%3A%22171681722971300%22%2C%22locale%22%3A%22en_US%22%2C%22sdk%22%3A%22joey%22%2C%22channel_url%22%3A%22http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D17%23cb%3Dffcb50044%26origin%3Dhttp%253A%252F%252F3beacheschemist.doublet.com.au%252Ff39b47030%26domain%3D3beacheschemist.doublet.com.au%26relation%3Dparent.parent%22%2C%22href%22%3A%22http%3A%2F%2F3beacheschemist.doublet.com.au%2Fproductdetail.aspx%3Fname%3DSWISSE-HAND-CREAM-WITH-VIT-F---POMEGRANATE-100ML%22%2C%22node_type%22%3A%22link%22%2C%22width%22%3A%22450%22%2C%22layout%22%3A%22standard%22%2C%22colorscheme%22%3A%22light%22%2C%22action%22%3A%22recommend%22%2C%22show_faces%22%3A%22false%22%2C%22send%22%3A%22true%22%2C%22extended_social_context%22%3A%22false%22%2C%22ret%22%3A%22sentry%22%2C%22act%22%3A%22connect%22%7D)

以前，它正在工作。突然之间，我需要更改任何我不知道的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:41:48.483

首先，总是使用like按钮生成器：

> [https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

其次，在许多情况下，使用带有应用 ID 的点赞按钮会有所帮助。如果您使用应用程序 ID 进行 facebook 集成，通常不会经常显示垃圾邮件确认。

示例（填写appId）：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/de_DE/all.js#xfbml=1&appId=xxxxxxx";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

如果这不起作用，您只能等待，或者在 Facebook 调试器中刷新点赞的 URL 可能会有所帮助：

> [https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

# hibernate - 播放框架手动打开的 Hibernate 会话不会持续存在

> ID：13356242
> 
> 赞同：3
> 
> 时间：2012-11-13T06:04:40.363
> 
> 标签：hibernate, session, playframework, persistence

除了该剧自动创建的会话之外，我正在创建第二个会话！框架，我只想更改特定对象的一个​​字段。由于某种原因，它不会持续存在。如果我在同一个会话中再次获得对象，则该字段会更改，但在请求之后它会恢复为原始值。

这是一些代码：

```
Session session = (Session) JPA.em().getDelegate();
    Session s = session.getSessionFactory().openSession();
    s.setFlushMode(FlushMode.ALWAYS); //been playing around with these 
    Transaction t = s.beginTransaction();

    // Get Object
    org.hibernate.Query query = s.createQuery("SELECT c From Course c WHERE c.id=:id").setLong("id", 100);
    List<Course> courses = query.list();
    Course course = courses.get(0);

    course.title = "test";

    // s.save(course);
    // s.update(course); Tried all of them
    // s.persist(course);
    s.saveOrUpdate(course);

    // s.flush();
    t.commit();
    s.flush(); 
```

非常感谢帮助。

# c# - 在线程池上多路复用 C# 5.0 的异步——线程安全吗？

> ID：13356248
> 
> 赞同：11
> 
> 时间：2012-11-13T06:06:38.783
> 
> 标签：c#, thread-safety, threadpool, async-await

这可能看起来有点疯狂，但这是我正在考虑作为更大库的一部分的一种方法，如果我可以合理地确定它不会导致奇怪的行为。

**该方法：**

`SynchronizationContext`使用调度到线程池的 async 用户代码运行。用户代码如下所示：

```
async void DoSomething()
{
    int someState = 2;
    await DoSomethingAsync();
    someState = 4;
    await DoSomethingElseAsync();
    // someState guaranteed to be 4?
} 
```

我不确定访问`someState`是否是线程安全的。虽然代码将在一个“线程”中运行，这样操作实际上是完全有序的，但它仍然可以在引擎盖下的多个线程中拆分。如果我的理解是正确的，那么在 x86 上排序应该是安全的，并且由于变量不是共享的，我不需要担心编译器优化等等。

更重要的是，我担心这是否会在 ECMA 或 CLR 内存模型下保证线程安全。

我相当确定在执行排队的工作之前我需要插入一个内存屏障，但我对我的推理并不完全有信心（或者这种方法可能由于完全不同的原因而行不通）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T13:14:01.443

[`async`这在/ `await`FAQ](http://blogs.msdn.com/b/pfxteam/archive/2012/04/12/async-await-faq.aspx)的评论部分得到了回答：

> TPL 在任务排队时和任务执行的开始/结束时包括适当的障碍，以便适当地使值可见。

因此，不需要明确的障碍。

# arraylist - JAVA 数组列表 Question2: I'm confused on ArrayList, please explain to me the following: I have a class Node which has two fields: data1 and data2 问问题 问问题 2012-11-13T06:07:28.707 4369 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Question2: I'm confused on ArrayList, please explain to me the following: I have a class Node which has two fields: data1 and data2 public class Node { private static int data1; private static int data2; public Node(){...} public static void setData1(int data); public static void getData1(); public static void setData2(int data); public static void getData2(); } // end of class Node And then I have another class called Link. public class Link { private ArrayList <node>linkList = new ArrayList<node>(); private Node node = new Node(); ... linkList.add(node) linkList.get(how to do it here) } // end of class Link I want to output the Node data inside linkList. linkList.get(how to do it here) How would I do that? I think you simply forgot to do something like private ArrayList <node>linkList = new ArrayList<node>(); Try: public class Link { private ArrayList <node>linkList = new ArrayList<node>(); private node nodelist = new node(); ... linkList.add(nodelist) } // end of class link EDIT Take a look to the following sample code taken from here to understand how to work with ArrayList<...> java.util.ArrayList <string>v = new java.util.ArrayList<string>(); v.add( "able" ); v.add( "baker" ); v.add( "charlie" ); v.add( "delta" ); int n = v.size(); for(int i = 0; i < n ; i++) System.out.println( v.get( i ) ); arraylistaddnodes 4 2 回答 2 This answer is useful 1 OP solved it by using: linkList.get(0).getData(); 于 2015-05-21T14:16:14.070 回答 This answer is useful 1 我想你只是忘了做类似的事情 private ArrayList <node>linkList = new ArrayList<node>(); 尝试： public class Link { private ArrayList <node>linkList = new ArrayList<node>(); private node nodelist = new node(); ... linkList.add(nodelist) } // end of class link 编辑 查看从此处获取的以下示例代码以了解如何使用ArrayList<...> java.util.ArrayList <string>v = new java.util.ArrayList<string>(); v.add( "able" ); v.add( "baker" ); v.add( "charlie" ); v.add( "delta" ); int n = v.size(); for(int i = 0; i < n ; i++) System.out.println( v.get( i ) ); 于 2012-11-13T06:12:37.817 回答 Related 1 asp.net-mvc-4 - MapRoute 与我的扩展 1 javascript - 溢出：自动在触摸设备中不起作用（iOS） 1 python - 通过python脚本查找unicode范围 0 performance - C - 如何检查代码是否有效地使用缓存？ 2 c# - ROUNDUP(700.25;-1) 返回 710，我们如何在 C# 中执行此操作 2 javascript - attr function in jquery 4 html - 我们可以在选项元素中添加类属性吗？ 1 maven - 如何将 Hudson 配置为指向本地存储库而不是中央存储库？ 3 wpf - WPF 应用程序中的单选按钮已选中但不可见 3 android - 在物理设备中不调用 onResume() 而是调用 onCreate() Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13356249
> 
> 赞同：0
> 
> 时间：
> 
> 标签：arraylist, add, nodes

*Question2:*

I'm confused on `ArrayList<Object>`, please explain to me the following:

I have a class `Node` which has two fields: `data1` and `data2`

```
public class Node {
    private static int data1;
    private static int data2;

    public Node(){...}
    public static void setData1(int data);
    public static void getData1();
    public static void setData2(int data);
    public static void getData2();
} // end of class Node 
```

And then I have another class called Link.

```
public class Link {
    private ArrayList<Node> linkList = new ArrayList<Node>();
    private Node node = new Node();
    ...
    linkList.add(node)
    linkList.get(how to do it here)
} // end of class Link 
```

I want to output the `Node` data inside `linkList`.

```
linkList.get(how to do it here) 
```

How would I do that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-21T14:16:14.070

OP solved it by using:

```
linkList.get(0).getData(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T06:12:37.817

我想你只是忘了做类似的事情

```
private ArrayList<node> linkList = new ArrayList<node>(); 
```

尝试：

```
public class Link {
    private ArrayList<node> linkList = new ArrayList<node>();
    private node nodelist = new node();
    ...
    linkList.add(nodelist)
} // end of class link 
```

**编辑**

查看从[此处](http://web.cs.dal.ca/%7Esedgwick/ArrayList.html)获取的以下示例代码以了解如何使用`ArrayList<...>`

```
java.util.ArrayList<String>  v = new java.util.ArrayList<String>();
    v.add( "able" );
    v.add( "baker" );
    v.add( "charlie" );
    v.add( "delta" );

int n = v.size();
for(int i = 0; i < n ; i++)
    System.out.println( v.get( i ) ); 
```</string></string></node></node></node></node></string></string></node></node></node></node></node></node>

# css - 垂直居中 HTML 页面上的菜单

> ID：13356250
> 
> 赞同：0
> 
> 时间：2012-11-13T06:07:34.257
> 
> 标签：css, html, html-lists

我的 CSS 经验很少，所以这可能是一个非常初级的问题。我`<ul>`在页面中间垂直居中菜单时遇到问题。我尝试了以下方法：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <style type="text/css">
            body, html {
                height: 100%;
                margin: 0;
                padding: 0;
            }
            div {
                width: 100%;
                height: 100%;
                position: absolute;
                display: table;
                text-align: center;
                vertical-align: middle;
                border: 10pt solid black;
            }
            ul {
                display: block;
            }
            ul li {
                display: inline-block;
                background-color: yellow;
                border: 1pt solid black;
            }
        </style>
    </head>
    <body>
        <div>
            <ul>
                <li>item 1</li>
                <li>item 2</li>
                <li>item 3</li>
            </ul>
        </div>
    </body>
</html> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T06:12:56.497

如果你想垂直居中你的菜单这样做

[**演示**](http://jsfiddle.net/fCMuB/)

CSS

```
ul {
    position: absolute;
    top: 50%;
    margin-top: -15px; /* 1/2 of the total height of your ul */
} 
```

如果您希望您`ul`位于页面的中心，请这样做

[**演示 2**](http://jsfiddle.net/fCMuB/1/)

CSS

```
ul {
    position: absolute;
    top: 50%;
    left: 50%;
    margin-top: -15px; /* 1/2 of the total height of your ul */
    margin-left: -50px; /* 1/2 of the total width of your ul assumed here as -50 */
} 
```

# c# - Properties.Settings.Default 保存到 AppData 但从 Program Files 读取

> ID：13356251
> 
> 赞同：0
> 
> 时间：2012-11-13T06:07:35.503
> 
> 标签：c#, tsql, triggers, settings

当我在具有特定登录名和密码的进程 runas 的上下文中保存设置时，它使用他的主文件夹 (AppData) 来存储设置。但是，如果我在 T-SQL 触发器设置文件表单中的同一用户的上下文中运行程序，则不使用 app_data。有使用的配置文件。它被放置在具有可执行文件的程序文件中。在此配置中是 WCF 客户端设置的部分。

我想知道为什么程序不尝试读取第一个配置文件。当程序从触发器运行时手动将一些值放入配置中的用户部分后 - 他将使用它们。但是为了保存表单单个实例，它将它们存储在 AppData 中。所以毕竟，在默认情况下从触发器运行时，他会读取空值。

顺便说一句，对于在触发器的用户上下文中运行程序，我使用 EXECUTE AS USER = ... exec master..xp_cmdshell ... 。

此致

# sql-server - 将物理目录中的图像移动到 sql server 图像类型

> ID：13356253
> 
> 赞同：3
> 
> 时间：2012-11-13T06:07:42.447
> 
> 标签：sql-server, image, ssis

如何使用 SSIS 迭代目录中的图像文件并使用文件名运行查询以将图像插入 sql server？

我意识到使用 Foreach 文件枚举器可以循环文件并将文件名放入变量中。如何使用此变量运行查询以从表中的 hd 查找该文件名的记录，然后将图像导入我的 sql server 图像类型列？

一旦我的数据库中有文件，我将从 hd 中删除文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:13:48.233

如果我对问题的理解正确，您想使用 SSIS 将某个位置的所有文件扫描到 SQL Server 中吗？

## 数据流任务

您的数据流任务将负责将文件实际导入数据库。您的方法将与[Import varbinary data](https://stackoverflow.com/questions/12884276/import-varbinary-data/12886549#12886549) Pretty picture version at [insert XML file in SQL via SSIS中概述的相同](https://stackoverflow.com/questions/12817099/insert-xml-file-in-sql-via-ssis)

您的源将是作为源组件运行的脚本转换组件。它的工作是将所有文件名添加到数据流中。将第二个链接中的过滤器更改为 *.png （或任何您的过滤器），它应该可以工作。

对生成的文件名使用导入列组件。这会将文件指针添加到数据流中，以便可以将其导入数据库。您需要确保您的数据类型是 DT_IMAGE。即使您使用的是 varbinary(max)/varchar(max)/nvarchar(max) 在管道元数据的上下文中，它也将是 DT_IMAGE。

将所有这些数据路由到目标表中，您将导入文件数据。

## 文件清理

此时，您已经导入了所有这些数据，现在您想从磁盘中删除文件。假设您将文件名与图像位一起存储在数据库中，我将使用执行 SQL 任务来检索文件名列表。将输出类型从 None 更改为 Full Result Set 并将其存储到 Object 类型的变量中。

将 Foreach 枚举器连接到 SQL 任务的输出，在这里您需要“分解”结果。谷歌这个词，你会发现各种关于如何做到这一点的博客文章或以前的 SO 问题。最终结果将是一个文件名将从记录集对象中提取并分配给一个局部变量。

在 Foreach 枚举器中，使用文件系统任务并删除在 Foreach 枚举器的变量集中引用的文件。

# android - 在 android 2.2 中滑出菜单 R.id.home 错误

> ID：13356256
> 
> 赞同：1
> 
> 时间：2012-11-13T06:08:26.840
> 
> 标签：android, android-actionbar

我是 android 新手，我目前正在研究 FB 样式的滑出菜单。我在这里找到了许多示例项目，但无法在 android 2.2(froyo) 版本中成功运行，因为它们在 android 3.x 版本（如**HONEYCOMB** ）中运行良好。

错误发生在 ::`if(item.getItemId() == android.R.id.home)`

在这里，home 无法识别，并且在:: `getActionBar()`标记此方法未定义：并且在 res“values-v11”下的值文件中给出错误

在此先感谢您的良好回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T06:39:50.093

很可能，您正在使用仅在 Honeycomb 中添加的 API，因此无法在旧版本的 Android 中使用。

这些 API 很可能是 ActionBar，也可能是 Fragments。

要在旧版本中使用这些功能，您可以使用Jake Wharton的[ActionBarSherlock和 Google 的](http://actionbarsherlock.com/)[Support Library](http://developer.android.com/tools/extras/support-library.html)。这些共同允许您在旧版本的 Android 上使用 ActionBars、Fragments 等。

# asp.net - 在客户端打开 docx 文件服务器并由用户编辑

> ID：13356261
> 
> 赞同：1
> 
> 时间：2012-11-13T06:09:16.920
> 
> 标签：asp.net, .net-4.0, asp.net-4.0

我使用 ASP.Net 来编写 Web 应用程序，并且在服务器上有许多文件。

我希望用户单击按钮，在 ms Word 客户端的服务器中打开 docx 文件。并在 ms Word 客户端中由用户编辑文本并将文件（文本）保存在服务器中。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T06:12:24.023

将 Word 文档放在网络共享上，然后链接到它们 ( `<a href="file://\\server\share\document.docx">Some document</a>`)。用户将在 Word 中打开它们，Word 会将它们保存到同一位置。

我建议在文件服务器上启用卷影复制，以确保您拥有文件的早期版本，以防用户意外删除或损坏文件。

Microsoft 认可的“适当”解决方案是部署 SharePoint，但您的组织需要付出巨大的代价。它包括内置的基于 Web 的 Office 应用程序。

# objective-c - Cocoa - 捕捉特定事件

> ID：13356262
> 
> 赞同：0
> 
> 时间：2012-11-13T06:09:27.247
> 
> 标签：objective-c, cocoa, events

我对 Cocoa 编程相当陌生，并且对控制事件处理有疑问。

我为一个按钮创建了一个“动作”，并获得了一个更新的 AppDelegate.m 来处理这个，例如。

```
- (IBAction)seedBtnPressed:(id)sender {
   NSString* myString = @"Hi there";
   [_updateLbl setStringValue:myString];
} 
```

运行此程序时，按下“种子”按钮会执行应有的操作 - 标签更新。我的问题是：为什么我默认捕获了“按钮按下事件”，因为我没有看到我指定的任何地方。或者，我将如何通过操作捕获鼠标悬停事件？我想我会为按钮创建另一个操作，但不确定如何指定它来仅处理“鼠标悬停”事件？抱歉，如果我在这里使用了 Windows 术语，我知道 Cocoa 对事物使用不同的名称。谢谢皮特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:01:37.437

要获得鼠标悬停事件，`NSView`您应该使用`NSTrackingArea`该类（假设您的目标是相对现代的 OS X 版本）。[Apple 在http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/TrackingAreaObjects/TrackingAreaObjects.html](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/TrackingAreaObjects/TrackingAreaObjects.html)上有很好的文档

对于您关于触发的其他查询，`seedBtnPressed:`尽管您没有指定它 - 您是否在 Interface Builder 中为按钮设置了一个操作，而不是以编程方式？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T07:02:01.880

您需要子类化 NSButton 类（甚至更好的 NSButtonCell 类）。

```
- (void)mouseEntered:(NSEvent *)theEvent;
- (void)mouseExited:(NSEvent *)theEvent; 
```

当鼠标进入和退出该区域时，它们应该被调用。您可能还需要重新创建跟踪区域，请看这里：

```
- (void)updateTrackingAreas 
```

对于淡入和淡出效果，我使用了动画师和 alpha 值，例如：

```
[[self animator]setAlphaValue:0.5]; 
```

# java - 处理程序未给出确切的时间间隔

> ID：13356264
> 
> 赞同：1
> 
> 时间：2012-11-13T06:09:28.573
> 
> 标签：java, android, android-intent

在我的应用程序中，我使用处理程序来更新日期和时间。它更新日期和时间，但没有给出准确的结果。就像我设置在 60 秒后更新一样，它会在 62 秒后更新。如果我将它更新到 120 秒，它会在 2 分 2 秒后更新。请帮助我为什么说的时间更长？我的代码是

```
public static String interval = "60";

        Handler h2 = new Handler();
    Runnable run = new Runnable() {
        @Override
        public void run() {
            MyLocation loc = new MyLocation(getBaseContext());
            TextView longitude_view = (TextView) findViewById(R.id.GPS_Long_txta);
            ((TextView) longitude_view)
                    .setText(" " + String.valueOf(loc.gps_lon));
            TextView latitude_view = (TextView) findViewById(R.id.GPS_Lat_txta);
            ((TextView) latitude_view).setText(" " + String.valueOf(loc.gps_lat));
            long delaytime = (RestoreRecord0()*1000);
            last_update_time_txtbx = (TextView) findViewById(R.id.last_update_time_txt);
            last_update_time_txtbx.setText(" "
                    + String.valueOf(java.text.DateFormat.getDateTimeInstance()
                            .format(Calendar.getInstance().getTime())));
            tm = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
            String response = CallWebService(tm.getDeviceId(), loc.gps_lon, loc.gps_lat);
            h2.postDelayed(this, delaytime);
        }
    }; 
```

这是一个方法`RestoreRecord0`

```
public int RestoreRecord0() {
        try {

            File dir = getFilesDir();
            File file = new File(dir, Saveinterval);
            if (!file.exists()) {
                return Integer.parseInt(interval);
            }

            FileInputStream fileIS = new FileInputStream(file);
            BufferedReader buf = new BufferedReader(new InputStreamReader(
                    fileIS));
            String readString = new String();
            String data = "";
            // just reading each line and pass it on the debugger

            while ((readString = buf.readLine()) != null) {
                data += readString;
            }

            return Integer.parseInt(data);
        }

        catch (Exception ex) {
            ex.getMessage();
        }

        return Integer.parseInt(interval);
    } 
```

请帮忙。如何定期准确地更新时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T06:50:38.117

如果您真的希望它是实时更新的，那么有很多事情是不正确的并且不会达到预期的结果，因为：

1.  通过 发生的所有更新都会`Handler`有一些延迟 - 由于固有的框架代码
2.  你的`handler`代码太混乱了。请简化它。

我可以在处理程序方面推荐什么：

1.  而不是做所有`findViewById`等 - 已经准备好参考并且只做`setText`所有的文本视图
2.  这也意味着删除文件操作 - 如果您不希望它持续很长时间，不确定它如何真正有帮助；然后使用`handler.sendMessage`它有 2`Object`种类型，您可以在其中设置任何自定义 DataModel 并传递更新时间 - 效率也更高

# .htaccess - X-Robots noindex .htaccess 中的特定页面

> ID：13356266
> 
> 赞同：7
> 
> 时间：2012-11-13T06:09:40.923
> 
> 标签：.htaccess, http-headers, nofollow, noindex, x-robots-tag

我可以在 .htaccess 中使用 x 机器人“noindex，follow”特定页面吗？

我找到了一些关于 noindexing 类型文件的说明，但是我找不到 noindex 单个页面的说明，而且我到目前为止所尝试的方法都没有奏效。

这是我正在寻找 noindex 的页面：

```
http://www.examplesite.com.au/index.php?route=news/headlines 
```

这是我到目前为止所尝试的：

```
<FilesMatch "/index.php?route=news/headlines$">
 Header set X-Robots-Tag "noindex, follow"
</FilesMatch> 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-22T12:35:59.733

从 .htaccess 文件中匹配请求参数似乎是不可能的。这是您可以匹配的列表：[http ://httpd.apache.org/docs/2.2/sections.html](http://httpd.apache.org/docs/2.2/sections.html)

在您的脚本中执行此操作会容易得多。如果您在 PHP 上运行，请尝试：

```
header('X-Robots-Tag: noindex, follow'); 
```

您可以轻松地在 $_GET、REQUEST_URI 等上构建条件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-27T20:26:28.453

```
RewriteEngine on
RewriteBase /

#set env variable if url matches
RewriteCond %{QUERY_STRING} ^route=news/headlines$
RewriteRule ^index\.php$ - [env=NOINDEXFOLLOW:true]

#only sent header if env variable set
Header set X-Robots-Tag "noindex, follow" env=NOINDEXFOLLOW 
```

FilesMatch 适用于（本地）文件，而不是 url。所以它会尝试只匹配 url 的 /index.php 部分。`<location>`会更合适，但据我从文档中可以看出，这里不允许使用查询字符串。所以我最终得到了上述解决方案（我真的很喜欢这个挑战）。虽然 php 是放置这个的更明显的地方，但这取决于你。

该解决方案当然需要 mod_rewrite 和 mod_headers。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T13:37:52.787

请注意，您需要启用 mod_headers 模块才能设置标题。

尽管就像其他人所说的那样，使用 php 标签似乎更好。那不行吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T12:55:00.193

根据谷歌的说法，语法会有点不同：

```
<Files ~ "\.pdf$">
  Header set X-Robots-Tag "noindex, nofollow"
</Files> 
```

[https://developers.google.com/webmasters/control-crawl-index/docs/robots_meta_tag](https://developers.google.com/webmasters/control-crawl-index/docs/robots_meta_tag)

# android - 从 Android 中的 Facebook SDK 获取所有信息

> ID：13356267
> 
> 赞同：1
> 
> 时间：2012-11-13T06:10:17.717
> 
> 标签：android, facebook

我在我的 Android 应用程序中使用 Facebook SDK。我需要的是获取用户的所有信息，包括姓名、电子邮件、生日、位置。但我能得到的只是姓名和电子邮件。是否有获得生日和位置的权限？我也查看此链接，但如果不适合我 [https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)。

这是我获取信息的方式。

```
 if(fb.isSessionValid()){
                button.setImageResource(R.drawable.logout_button);

                JSONObject obj = null;
                URL img = null;

                try {
                    String jsonUser = fb.request("me");
                    obj = Util.parseJson(jsonUser);
                    String id = obj.optString("id");
                    String name = obj.optString("name");
                    String bday = obj.optString("birthday");
                String address = obj.optString("location");
                    String email = obj.optString("email");
                    ((TextView) findViewById(R.id.txt)).setText("Welcome! "+name);
                    ((TextView) findViewById(R.id.txtbday)).setText("Birthday: "+bday);
                    ((TextView) findViewById(R.id.txtaddress)).setText("Address: "+address);
                    ((TextView) findViewById(R.id.txtemail)).setText("Email: "+email);
                    img = new URL("http://graph.facebook.com/"+id+"/picture?type=normal");
                    Bitmap bmp = BitmapFactory.decodeStream(img.openConnection().getInputStream());
                    pic.setImageBitmap(bmp);

                } catch (FacebookError e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }

this is my authorized

fb.authorize(MainActivity.this,new String[] {"email", "user_location", "user_birthday","publish_stream"}, new DialogListener() {

                public void onFacebookError(FacebookError e) {
                    // TODO Auto-generated method stub
                    Toast.makeText(getApplicationContext(), ""+e, Toast.LENGTH_SHORT).show();   
                    e.printStackTrace();
                }

                public void onError(DialogError e) {
                    // TODO Auto-generated method stub
                    //Toast.makeText(getApplicationContext(), "Error", Toast.LENGTH_SHORT).show();      
                }

                public void onComplete(Bundle values) {
                    // TODO Auto-generated method stub
                    Editor editor = sp.edit();
                    editor.putString("access_token", fb.getAccessToken());
                    editor.putLong("access_expires", fb.getAccessExpires());
                    editor.commit();
                    updateButtonImage();
                }

                public void onCancel() {
                    // TODO Auto-generated method stub
                    Toast.makeText(getApplicationContext(), "Cancel", Toast.LENGTH_SHORT).show();   
                }
            });
        }
    } 
```

这就是日志所说的

```
11-14 14:05:40.399: E/Trace(1293): error opening trace file: No such file or directory (2)
11-14 14:05:41.699: D/dalvikvm(1293): GC_CONCURRENT freed 290K, 6% free 6173K/6535K, paused 71ms+76ms, total 201ms
11-14 14:05:42.509: I/Choreographer(1293): Skipped 82 frames!  The application may be doing too much work on its main thread.
11-14 14:05:42.519: D/gralloc_goldfish(1293): Emulator without GPU emulation detected.
11-14 14:05:42.679: I/Choreographer(1293): Skipped 30 frames!  The application may be doing too much work on its main thread. 
```

我也从我的原木猫那里得到了这个

```
11-14 14:19:28.339: D/AndroidRuntime(1359): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
11-14 14:19:28.339: D/AndroidRuntime(1359): CheckJNI is ON
11-14 14:19:28.379: D/dalvikvm(1359): Trying to load lib libjavacore.so 0x0
11-14 14:19:28.389: D/dalvikvm(1359): Added shared lib libjavacore.so 0x0
11-14 14:19:28.409: D/dalvikvm(1359): Trying to load lib libnativehelper.so 0x0
11-14 14:19:28.409: D/dalvikvm(1359): Added shared lib libnativehelper.so 0x0
11-14 14:19:29.059: D/AndroidRuntime(1359): Calling main entry com.android.commands.pm.Pm
11-14 14:19:29.089: W/ActivityManager(146): No content provider found for permission revoke: file:///data/local/tmp/facebook.apk
11-14 14:19:29.119: W/ActivityManager(146): No content provider found for permission revoke: file:///data/local/tmp/facebook.apk
11-14 14:19:29.249: I/PackageManager(146): Removing non-system package:com.example.facebook
11-14 14:19:29.249: I/ActivityManager(146): Force stopping package com.example.facebook uid=10054
11-14 14:19:29.249: I/ActivityManager(146): Killing proc 1339:com.example.facebook/u0a54: force stop
11-14 14:19:29.249: W/ActivityManager(146): Force removing ActivityRecord{411f5b90 com.example.facebook/.MainActivity}: app died, no saved state
11-14 14:19:29.279: I/WindowState(146): WIN DEATH: Window{41263720 com.example.facebook/com.example.facebook.MainActivity paused=false}
11-14 14:19:29.429: I/Choreographer(263): Skipped 64 frames!  The application may be doing too much work on its main thread.
11-14 14:19:29.429: I/PackageManager(146): Package com.example.facebook codePath changed from /data/app/com.example.facebook-1.apk to /data/app/com.example.facebook-2.apk; Retaining data and using new
11-14 14:19:29.479: W/InputMethodManagerService(146): Got RemoteException sending setActive(false) notification to pid 1339 uid 10054
11-14 14:19:29.559: I/PackageManager(146): Running dexopt on: com.example.facebook
11-14 14:19:30.549: D/dalvikvm(1369): DexOpt: load 142ms, verify+opt 469ms, 833796 bytes
11-14 14:19:30.569: W/PackageManager(146): Code path for pkg : com.example.facebook changing from /data/app/com.example.facebook-1.apk to /data/app/com.example.facebook-2.apk
11-14 14:19:30.569: W/PackageManager(146): Resource path for pkg : com.example.facebook changing from /data/app/com.example.facebook-1.apk to /data/app/com.example.facebook-2.apk
11-14 14:19:30.579: I/ActivityManager(146): Force stopping package com.example.facebook uid=10054
11-14 14:19:30.659: D/dalvikvm(146): GC_FOR_ALLOC freed 681K, 9% free 9626K/10567K, paused 81ms, total 81ms
11-14 14:19:30.759: D/PackageManager(146): New package installed in /data/app/com.example.facebook-2.apk
11-14 14:19:30.839: I/ActivityManager(146): Force stopping package com.example.facebook uid=10054
11-14 14:19:30.849: D/dalvikvm(263): WAIT_FOR_CONCURRENT_GC blocked 0ms
11-14 14:19:30.920: D/dalvikvm(330): WAIT_FOR_CONCURRENT_GC blocked 0ms
11-14 14:19:30.949: D/dalvikvm(263): GC_EXPLICIT freed 185K, 36% free 9272K/14471K, paused 7ms+14ms, total 92ms
11-14 14:19:31.009: D/dalvikvm(146): WAIT_FOR_CONCURRENT_GC blocked 0ms
11-14 14:19:31.059: I/InputReader(146): Reconfiguring input devices.  changes=0x00000010
11-14 14:19:31.170: D/dalvikvm(146): GC_EXPLICIT freed 475K, 11% free 9461K/10567K, paused 38ms+10ms, total 163ms
11-14 14:19:31.189: D/PackageManager(146): generateServicesMap(android.accounts.AccountAuthenticator): 3 services unchanged
11-14 14:19:31.210: D/PackageManager(146): generateServicesMap(android.content.SyncAdapter): 5 services unchanged
11-14 14:19:31.219: D/BackupManagerService(146): Received broadcast Intent { act=android.intent.action.PACKAGE_REMOVED dat=package:com.example.facebook flg=0x8000010 (has extras) }
11-14 14:19:31.219: D/dalvikvm(330): GC_EXPLICIT freed 169K, 6% free 6320K/6663K, paused 5ms+6ms, total 293ms
11-14 14:19:31.259: D/PackageManager(146): generateServicesMap(android.accounts.AccountAuthenticator): 3 services unchanged
11-14 14:19:31.279: D/PackageManager(146): generateServicesMap(android.content.SyncAdapter): 5 services unchanged
11-14 14:19:31.299: D/BackupManagerService(146): Received broadcast Intent { act=android.intent.action.PACKAGE_ADDED dat=package:com.example.facebook flg=0x8000010 (has extras) }
11-14 14:19:31.299: V/BackupManagerService(146): removePackageParticipantsLocked: uid=10054 #1
11-14 14:19:31.310: I/InputReader(146): Reconfiguring input devices.  changes=0x00000010
11-14 14:19:31.429: V/BackupManagerService(146): addPackageParticipantsLocked: #1
11-14 14:19:31.699: I/Choreographer(263): Skipped 259 frames!  The application may be doing too much work on its main thread.
11-14 14:19:31.909: I/Choreographer(263): Skipped 33 frames!  The application may be doing too much work on its main thread.
11-14 14:19:32.179: D/dalvikvm(263): GC_CONCURRENT freed 1331K, 38% free 9017K/14471K, paused 29ms+9ms, total 116ms
11-14 14:19:32.179: D/dalvikvm(263): WAIT_FOR_CONCURRENT_GC blocked 62ms
11-14 14:19:32.179: D/dalvikvm(263): WAIT_FOR_CONCURRENT_GC blocked 80ms
11-14 14:19:32.439: D/dalvikvm(263): GC_CONCURRENT freed 415K, 34% free 9614K/14471K, paused 30ms+7ms, total 84ms
11-14 14:19:32.439: D/dalvikvm(263): WAIT_FOR_CONCURRENT_GC blocked 54ms
11-14 14:19:32.439: D/dalvikvm(263): WAIT_FOR_CONCURRENT_GC blocked 70ms
11-14 14:19:32.449: D/dalvikvm(263): WAIT_FOR_CONCURRENT_GC blocked 60ms
11-14 14:19:32.449: D/dalvikvm(263): WAIT_FOR_CONCURRENT_GC blocked 67ms
11-14 14:19:32.639: D/dalvikvm(263): GC_FOR_ALLOC freed 929K, 37% free 9199K/14471K, paused 41ms, total 47ms
11-14 14:19:32.649: I/dalvikvm-heap(263): Grow heap (frag case) to 10.257MB for 1286224-byte allocation
11-14 14:19:32.779: D/dalvikvm(263): GC_FOR_ALLOC freed 7K, 28% free 10448K/14471K, paused 128ms, total 134ms
11-14 14:19:32.920: D/dalvikvm(263): GC_CONCURRENT freed 1K, 27% free 10681K/14471K, paused 16ms+38ms, total 134ms
11-14 14:19:32.969: D/dalvikvm(146): WAIT_FOR_CONCURRENT_GC blocked 0ms
11-14 14:19:33.269: W/InputMethodManagerService(146): Found no subtypes in a system IME: com.android.inputmethod.pinyin
11-14 14:19:33.349: W/RecognitionManagerService(146): no available voice recognition services found
11-14 14:19:33.899: D/dalvikvm(263): GC_CONCURRENT freed 3879K, 43% free 8263K/14471K, paused 34ms+10ms, total 114ms
11-14 14:19:33.949: I/Choreographer(263): Skipped 303 frames!  The application may be doing too much work on its main thread.
11-14 14:19:34.249: D/dalvikvm(263): GC_FOR_ALLOC freed 115K, 40% free 8702K/14471K, paused 50ms, total 51ms
11-14 14:19:34.369: D/dalvikvm(263): GC_FOR_ALLOC freed 327K, 38% free 8973K/14471K, paused 39ms, total 42ms
11-14 14:19:34.619: D/dalvikvm(263): GC_CONCURRENT freed 767K, 37% free 9191K/14471K, paused 39ms+6ms, total 94ms
11-14 14:19:34.619: D/dalvikvm(263): WAIT_FOR_CONCURRENT_GC blocked 44ms
11-14 14:19:34.619: D/dalvikvm(263): WAIT_FOR_CONCURRENT_GC blocked 47ms
11-14 14:19:34.789: D/dalvikvm(263): GC_FOR_ALLOC freed 232K, 37% free 9257K/14471K, paused 49ms, total 55ms
11-14 14:19:34.799: I/dalvikvm-heap(263): Grow heap (frag case) to 10.314MB for 1286224-byte allocation
11-14 14:19:34.879: D/dalvikvm(263): GC_FOR_ALLOC freed 3K, 28% free 10509K/14471K, paused 78ms, total 78ms
11-14 14:19:35.009: D/dalvikvm(263): GC_CONCURRENT freed 26K, 28% free 10510K/14471K, paused 27ms+7ms, total 132ms
11-14 14:19:35.149: D/dalvikvm(146): GC_EXPLICIT freed 520K, 10% free 9550K/10567K, paused 116ms+516ms, total 2113ms
11-14 14:19:35.159: D/AndroidRuntime(1359): Shutting down VM
11-14 14:19:35.179: D/dalvikvm(1359): GC_CONCURRENT freed 101K, 78% free 459K/2048K, paused 0ms+1ms, total 10ms
11-14 14:19:35.179: D/jdwp(1359): Got wake-up signal, bailing out of select
11-14 14:19:35.179: D/dalvikvm(1359): Debugger has detached; object registry had 1 entries
11-14 14:19:35.189: I/AndroidRuntime(1359): NOTE: attach of thread 'Binder_3' failed
11-14 14:19:35.759: D/AndroidRuntime(1377): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
11-14 14:19:35.759: D/AndroidRuntime(1377): CheckJNI is ON
11-14 14:19:35.799: D/dalvikvm(1377): Trying to load lib libjavacore.so 0x0
11-14 14:19:35.799: D/dalvikvm(1377): Added shared lib libjavacore.so 0x0
11-14 14:19:35.829: D/dalvikvm(1377): Trying to load lib libnativehelper.so 0x0
11-14 14:19:35.829: D/dalvikvm(1377): Added shared lib libnativehelper.so 0x0
11-14 14:19:36.509: D/AndroidRuntime(1377): Calling main entry com.android.commands.am.Am
11-14 14:19:36.529: I/ActivityManager(146): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.example.facebook/.MainActivity u=0} from pid 1377
11-14 14:19:36.539: W/WindowManager(146): Failure taking screenshot for (164x246) to layer 21020
11-14 14:19:36.579: D/AndroidRuntime(1377): Shutting down VM
11-14 14:19:36.590: D/dalvikvm(1377): GC_CONCURRENT freed 102K, 77% free 489K/2048K, paused 1ms+1ms, total 11ms
11-14 14:19:36.590: D/jdwp(1377): Got wake-up signal, bailing out of select
11-14 14:19:36.590: D/dalvikvm(1377): Debugger has detached; object registry had 1 entries
11-14 14:19:36.599: I/AndroidRuntime(1377): NOTE: attach of thread 'Binder_3' failed
11-14 14:19:36.609: D/dalvikvm(1387): Not late-enabling CheckJNI (already on)
11-14 14:19:36.630: I/ActivityManager(146): Start proc com.example.facebook for activity com.example.facebook/.MainActivity: pid=1387 uid=10054 gids={3003, 1028}
11-14 14:19:36.630: I/Choreographer(263): Skipped 46 frames!  The application may be doing too much work on its main thread.
11-14 14:19:36.929: E/Trace(1387): error opening trace file: No such file or directory (2)
11-14 14:19:38.359: D/dalvikvm(1387): GC_CONCURRENT freed 284K, 6% free 6199K/6535K, paused 72ms+84ms, total 206ms
11-14 14:19:39.219: I/Choreographer(1387): Skipped 39 frames!  The application may be doing too much work on its main thread.
11-14 14:19:39.239: D/gralloc_goldfish(1387): Emulator without GPU emulation detected.
11-14 14:19:39.279: I/ActivityManager(146): Displayed com.example.facebook/.MainActivity: +2s710ms
11-14 14:19:39.443: I/Choreographer(1387): Skipped 60 frames!  The application may be doing too much work on its main thread.
11-14 14:19:39.449: I/Choreographer(263): Skipped 51 frames!  The application may be doing too much work on its main thread.
11-14 14:19:39.459: I/Choreographer(146): Skipped 57 frames!  The application may be doing too much work on its main thread.
11-14 14:19:39.551: I/Choreographer(146): Skipped 44 frames!  The application may be doing too much work on its main thread.
11-14 14:19:39.679: I/Choreographer(146): Skipped 49 frames!  The application may be doing too much work on its main thread.
11-14 14:19:39.759: I/Choreographer(146): Skipped 49 frames!  The application may be doing too much work on its main thread.
11-14 14:19:39.852: I/Choreographer(146): Skipped 43 frames!  The application may be doing too much work on its main thread.
11-14 14:19:41.122: I/Choreographer(146): Skipped 43 frames!  The application may be doing too much work on its main thread.
11-14 14:19:41.239: I/Choreographer(146): Skipped 48 frames!  The application may be doing too much work on its main thread.
11-14 14:19:41.319: I/Choreographer(146): Skipped 44 frames!  The application may be doing too much work on its main thread.
11-14 14:19:41.391: I/Choreographer(146): Skipped 44 frames!  The application may be doing too much work on its main thread.
11-14 14:19:41.471: I/Choreographer(146): Skipped 43 frames!  The application may be doing too much work on its main thread.
11-14 14:19:41.568: I/Choreographer(146): Skipped 44 frames!  The application may be doing too much work on its main thread.
11-14 14:19:41.681: I/Choreographer(146): Skipped 43 frames!  The application may be doing too much work on its main thread.
11-14 14:19:41.761: I/Choreographer(146): Skipped 44 frames!  The application may be doing too much work on its main thread.
11-14 14:20:00.092: I/Choreographer(217): Skipped 43 frames!  The application may be doing too much work on its main thread. 
```

感谢任何人都可以提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T06:32:54.853

首先，您选择了错误`tags`的查询来获取用户的位置。

如果您使用的是 Graph API，那么`tag`问题是：**location**。`user_location`您使用的，是一个*权限*。

其次，也许更重要的是，您正在选择这些权限：`{"email", "publish_stream"}`

要获取用户`birthday`和他/她的`location`权限，您还需要以下权限： 对于登录到您的应用程序的用户：`user_location`。并获取登录用户的朋友位置：`friends_location`

同样，对于`birthday`，您将需要以下权限：`user_birthday`登录用户和`friends_birthday`登录用户的朋友。

在此处查看用于查询和获取结果的可用字段列表：[https ://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)

有关所有权限的列表，请查看此页面：[https ://developers.facebook.com/docs/reference/login/#permissions](https://developers.facebook.com/docs/reference/login/#permissions)

**编辑2：**

删除较早的 FQL 建议并提供替代方案。

```
String testURL = "https://graph.facebook.com/me?fields=name,birthday,email,location&access_token=YOUR_ACCESS_TOKEN";

try {
    HttpClient hc = new DefaultHttpClient();
    HttpGet get = new HttpGet(testURL);
    HttpResponse rp = hc.execute(get);

    if (rp.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
        String result = EntityUtils.toString(rp.getEntity());

        JSONArray JAUserInfo = new JSONArray(result);

        for (int i = 0; i < JAUserInfo.length(); i++) {
            JSONObject JOUserInfo = JAUserInfo.getJSONObject(i);
            Log.e("USER DETAILS", JOUserInfo.toString());
                    if (JOUserInfo.has("location") {
                        JSONObject JOLocation = JOUserInfo.optJSONObject("location");
                        String location = JOLocation.getString("name");
                    }

        }

    }
} catch (Exception e) {
    // TODO: handle exception
} 
```

**注意：**您需要在此查询中提供访问令牌。没有它，毫无疑问，这将失败。只需将您的访问令牌中的**YOUR_ACCESS_TOKEN**`String testURL`更改为您的访问令牌。

# android - 尝试从 SQL Server 同步数据时出现网络错误 IOException

> ID：13356270
> 
> 赞同：0
> 
> 时间：2012-11-13T06:10:57.097
> 
> 标签：android, sql-server, sql-server-2008, android-emulator, proxy

我正在尝试使用 Android 应用程序从本地服务器获取数据。我使用 jtds.jdbc Connection 建立了这个。在模拟器中它工作正常并获取数据。尝试通过 USB 使用 Android 设备进行连接时，出现以下错误。

```
07-05 06:05:32.790: W/Error connection(4660): Network error IOException: failed to connect to /194.178.100.3 (port 1433): connect failed: ENETUNREACH (Network is unreachable) 
```

这是我用来连接 SQL-Server 数据库的代码

```
Connection conn = DriverManager.getConnection("jdbc:jtds:sqlserver://194.178.100.3:1433/MyDB",
                                "sa", "password"); 
```

我的系统中有一些代理设置我怀疑是在尝试访问服务器数据库时阻止我。从我的电脑同步 USB 设备时。我的操作系统是 Windows 7 Professional，Service Pack 1

请帮我解决这个问题。

![Telnet 屏幕截图](../Images/98a31840ad0308071f869308f902ad83.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T06:36:04.607

无法访问主机时会出现“网络无法访问”错误。这意味着您的应用程序无法连接到主机。这可能是由于您处于与您尝试连接的网络不同的网络中的多种原因。

如果您在数据库所在的同一台计算机上运行模拟器，请尝试将 194.178.100.3 更改为 127.0.0.1 并查看它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T17:37:48.913

我犯了将平板电脑置于飞行模式的错误。只要确保你没有这样做。

# asp.net-mvc-3 - 如何在独立的果园模块中使用 Kendo UI？

> ID：13356271
> 
> 赞同：2
> 
> 时间：2012-11-13T06:11:08.640
> 
> 标签：asp.net-mvc-3, orchardcms, kendo-ui

我正在编写一个自定义模数来向用户展示一个网格，以允许最终用户查看和管理“非内容部分”数据。该数据是从外部来源向数据库提供的数据。为简单起见，该模块为 mysite/Manager 路径注册了一个路由，如下所示：

```
public IEnumerable<RouteDescriptor> GetRoutes() {
    return new[] {
        new RouteDescriptor {
            Priority = 5,
            Route = new Route(
                "Manager/{controller}/{action}",
                new RouteValueDictionary {
                    {"area", "XpiManager"},
                    {"controller", "Home"},
                    {"action", "Index"}
                },
                new RouteValueDictionary(),
                new RouteValueDictionary {
                    {"area", "XpiManager"}
                },
                new MvcRouteHandler())
        }
    }; 
```

正如我们所看到的，它就像是 Orchard 中的一个独立应用程序。

这是 Home 控制器的非常简单的代码：

```
[Themed]
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View("XpiManager");
    }
} 
```

它`ThemedAttribute`使最终用户感觉好像他仍然在里面，而不是在一种子应用程序中......

因为我需要一些不错的最终用户功能添加到网格中，并且因为我已经完全订阅了 Telerik 的控件，包括完整的 KendoUI 包，所以我想使用他们的服务器端包装器在我的模板代码中创建这个网格，当前具有以下占位符代码：

```
<h1>Site's Manager</h1> 
```

是的，就是这样......我希望能够在这个模板中做这样的事情：

```
@model IEnumerable<Kendo.Mvc.Examples.Models.ProductViewModel>

@(Html.Kendo().Grid(Model)    
    .Name("Grid")
    .Columns(columns =>
    {
        columns.Bound(p => p.ProductID).Groupable(false);
        columns.Bound(p => p.ProductName);
        columns.Bound(p => p.UnitPrice);
        columns.Bound(p => p.UnitsInStock);
    })
    .Groupable()
    .Pageable()
    .Sortable()
    .Scrollable()
    .Filterable()
    .DataSource(dataSource => dataSource
        .Ajax()
        .Read(read => read.Action("Products_Read", "Grid"))
    )
) 
```

作为最后的手段，我可​​以使用带有 javascript 的仅客户端 Kendo UI，但这会使我更难绑定到我的数据源。我在 Kendo UI 和 Orchard 方面都是新手（尽管我在后者方面更有经验......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-15T07:52:36.983

您可以在主题项目中添加对 Kendo UI 服务器端组件的引用，并从那里使用帮助程序。我做过同样的事情，它就像一个魅力。

如果您无法添加引用，因为您没有从源版本运行，这里有另一种可行的技术。`<namespaces>`在 web.config 文件的 razor 部分中添加一个条目以获取 Kendo UI 内容。

```
<system.web.webPages.razor>
  <pages pageBaseType="...">
    <namespaces>
      <add namespace="..." />
    </namespaces>
  </pages>
</system.web.webPages.razor> 
```

确保您还在 web.config 文件中添加了对所需程序集的引用，否则网站将无法正常运行。

```
<compilation debug="..." targetFramework="4.0">
  <assemblies>
    <add assembly="..."/>

  </assemblies>
</compilation> 
```

这里的所有都是它的。剩下的就是使用`IRepository<T>`Kendo UI 组件助手上的正确方法从数据库中获取记录。

# php - Silverstripe URL 是如何工作的？

> ID：13356272
> 
> 赞同：2
> 
> 时间：2012-11-13T06:11:10.533
> 
> 标签：php, url-routing, silverstripe

我是 Silverstripe 框架/CMS 的新手。我将`./mysite/code/Page.php`其视为控制器和`./themes/simple/...`模板目录。我登录到管理面板并添加了新`test`页面。菜单出现在带有 URL`http://example.com/test`和内容的网站上。

所以我想知道的是，如何访问新的控制器让我们说`Download.ss`。我想访问 URL而不在管理面板中`http://example.com/download/123/`添加新页面。`download`谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T07:02:31.670

首先，任何带有`.ss`扩展名的文件都是模板文件而不是控制器。

创建一个新类，`mysite/code/Download.php`其中 extends `Controller`。

```
class Download extends Controller {
    public function index() {
        // Automatically handles URLs like http://example.com/Download
    }

    public function exampleaction() {
        // Automatically handles URLs like http://example.com/Download/exampleaction
    }
} 
```

之后，您需要向目录中添加一个新`routes.yml`文件，`mysite/_config`以指定`index`新控制器上的函数应处理对`http://example.com/download/123`.

```
---
Name: downloadrules
---
Director:
  rules:
    'download/$ID': Download 
```

现在，您的示例 URL 的“123”部分将可以`$this->request->param('ID')`在`index`函数中访问。

现在你可以这样做：

```
class Download extends Controller {
    public function index() {
        $fileID = $this->request->param('ID');
        // Do your thing.
    }
} 
```

这些东西的文档位于[http://doc.silverstripe.org/framework/en/reference/director](http://doc.silverstripe.org/framework/en/reference/director)

# dns - /etc/hosts 可以配置反向解析吗？

> ID：13356274
> 
> 赞同：18
> 
> 时间：2012-11-13T06:11:16.253
> 
> 标签：dns, hosts

众所周知，我们可以在 /etc/hosts 中添加 'ip host' 项来模拟 DNS 的名称解析，现在问题来了，我可以使用 /etc/hosts 进行反向解析，形成 ip 到主机名吗？或者有没有其他方便的方法来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-10-25T09:41:14.333

也许。这将取决于您用于查找的工具和在您的计算机上进行解析的配置。

例如 gethostbyaddr() 将检查 /etc/hosts 如果“文件”在 /etc/nsswitch.conf 的主机部分中

但是请注意，并非所有工具都会进行本地解析，例如“host”命令，因此它完全取决于您尝试进行查找的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-02T15:35:01.493

是的。如果应用程序使用名称服务切换库（大多数应用程序使用），并且如果`/etc/nsswitch.conf`配置为`/etc/hosts`使用如下行解析 IP，它会自动执行此操作：

```
hosts:          files dns 
```

您可以使用以下任一选项测试反向名称解析：

```
getent hosts 127.0.0.1 
```

或者

```
resolveip 127.0.0.1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T06:41:59.270

不可以。这只能在 DNS 服务器上完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-22T05:23:19.520

是的你可以。如果您使用 dnsmasq，您可以通过多种方式进行干扰，以获取到 127.0.0.1 的正向查找以及从 127.0.0.1 到您的主机的反向查找。例如，如果您的主机名是 host1.mydomain.com，真实 IP 地址为 192.168.1.12，那么您可以通过在 dnsmasq 配置文件中执行以下操作来获取 127.0.0.1 来解析它： host-record=host1.mydomain .com,127.0.0.1

前向干扰可以通过多种方式完成，这里有一种：alias=192.168.1.12,127.0.0.1

显然，您需要正确设置 dnsmasq 的其余部分以转发到您的真实 DNS 服务器......但这很简单

# html - 锚链接内的 Flash 或对象标签

> ID：13356278
> 
> 赞同：3
> 
> 时间：2012-11-13T06:11:21.647
> 
> 标签：html

是否可以插入指向对象标签的链接，单击它后您将被重定向到该链接？

我已经尝试过了：

```
<a href="LINK"><OBJECT TAG></a> 
```

甚至这个：

```
<OBJECT TAG height="109"><a href="LINK" style="margin-top:-109px;"></a> 
```

第一个在 Chrome 上工作，但在另一个网络浏览器中我无法单击该链接。

所以基本上，是否真的可以链接对象/闪存对象。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T10:03:34.033

我假设在 flash 对象中添加一个按钮是不可能的，在这种情况下，您可以使用“位置：绝对”和 z-index（可选）将锚定位在 flash 对象上。示例： http: [//jsfiddle.net/qbK5Q/](http://jsfiddle.net/qbK5Q/)（我没有使用实际的 flash 对象，但它应该可以使用）：

```
<div class="objectContainer">
    <object>...</object>
    <a href="#">Test link</a>
</div> 
```

CSS：

```
a {
    display: block;
    position: absolute;
    width: 100%;
    height: 100%;
    z-index: 5;
    top: 0px;
    left: 0px;
    background-color: rgba(255,112,0,0.5);
}
.objectContainer {
    position: relative;
    width: 100px;
} 
```

如果它是一个 Flash 对象，请确保它的“wmode”参数设置为“透明”或“不透明”。此解决方案的问题在于，链接将覆盖 Flash 对象，使您的鼠标光标无法访问它（用户无法访问 Flash 内的按钮和鼠标事件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-12T17:38:09.133

我知道这是一个非常古老的帖子，但至少现在您可以像这样使链接可点击：

```
a {
  position: relative;
  z-index: 1;
}

object {
  position: relative;
  z-index: -1;
} 
```

# java - 从菜单保存和打开对象

> ID：13356283
> 
> 赞同：1
> 
> 时间：2012-11-13T06:11:50.633
> 
> 标签：java, save

这是我的申请。我在保存和打开对象时遇到问题。当我尝试保存时，它告诉我 save.writeObject(firstName) 中的变量无法解析为变量。

问题出在 ActionPeformed 块中：

```
 import java.awt.*;
 import java.awt.event.*;
 import java.io.File;
 import java.io.FileInputStream;
 import java.io.FileNotFoundException;
 import java.io.FileOutputStream;
 import java.io.IOException;
 import java.io.ObjectInputStream;
 import java.io.ObjectOutputStream;
  import java.io.Serializable;

 import javax.swing.*;
 import javax.swing.event.*;
 import javax.swing.border.*;
 import java.util.*;

  public class ClassRoomFrameTest 
{ 
public static void main(String[] args) 
{
    ClassRoomFrame frame = new ClassRoomFrame();
    frame.setSize(600,600);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);       
    frame.setVisible(true);
    frame.setResizable(false);
    frame.setLocationRelativeTo(null);
}
} 
class ClassRoomFrame extends JFrame implements ActionListener
{
private JPanel mainPanel = new JPanel();
private JPanel deptPanel = new JPanel(new GridLayout(2,3));
private JPanel studentPanel = new JPanel(new GridLayout(2,5));
private JPanel displayPanel = new JPanel(new BorderLayout());
    private JPanel buttonPanel  = new JPanel(new GridLayout(1,2));
    private JPanel menuBar = new JPanel();

private JTextArea  textArea = new JTextArea();
private JScrollPane scrollPane = new JScrollPane(textArea);

private JLabel classLocationLabel = new JLabel("Class Location");
private JLabel classRoomLabel     = new JLabel("Class Room Number");
private JLabel classCapacityLabel = new JLabel("Class Capacity");
private JTextField classLocationField = new JTextField();
private JTextField classRoomField     = new JTextField();
private JTextField classCapacityField = new JTextField();

private JLabel studentFNameLabel = new JLabel("First name");
private JLabel studentLNameLabel = new JLabel("Last name");
private JLabel studentIDLabel = new JLabel("ID Number");
private JLabel studentMajorLabel = new JLabel("Major");
private JLabel studentCreditsLabel = new JLabel("Credits");
private JTextField studentFNameField = new JTextField();
private JTextField studentLNameField = new JTextField();
private JTextField studentIDField = new JTextField();
private JTextField studentMajorField = new JTextField();
private JTextField studentCreditsField = new JTextField();

private JButton addButton     = new JButton("Add");
private JButton displayButton = new JButton("Display");

private JMenuBar menu = new JMenuBar();
private JMenu fileMenu = new JMenu("File");
private JMenuItem save = new JMenuItem("Open");
private JMenuItem open = new JMenuItem("Save");

private JFileChooser chooser = new JFileChooser();

Classroom room = null;

public ClassRoomFrame()
{
    deptPanel.setPreferredSize(new Dimension(600,50));
    deptPanel.setBorder(new EmptyBorder(new Insets(5,15,5,15)));

    deptPanel.add(classLocationLabel);
    deptPanel.add(classRoomLabel);
    deptPanel.add(classCapacityLabel);
    deptPanel.add(classLocationField);
    deptPanel.add(classRoomField);
    deptPanel.add(classCapacityField);

    fileMenu.add(fileMenu);
    fileMenu.add(open);
    fileMenu.add(save);

    menu.add(fileMenu);

    studentPanel.setBorder(new EmptyBorder(new Insets(5,15,5,15)));
    studentPanel.setPreferredSize(new Dimension(600,50));
    studentPanel.setBorder(new EmptyBorder(new Insets(5,15,5,15)));

    studentPanel.add(studentFNameLabel);
    studentPanel.add(studentLNameLabel);
    studentPanel.add(studentIDLabel);
    studentPanel.add(studentMajorLabel);
    studentPanel.add(studentCreditsLabel);
    studentPanel.add(studentFNameField);
    studentPanel.add(studentLNameField);
    studentPanel.add(studentIDField);
    studentPanel.add(studentMajorField);
    studentPanel.add(studentCreditsField);

    scrollPane.setBorder(new BevelBorder(BevelBorder.LOWERED));
    scrollPane.setPreferredSize(new Dimension(600,450));
    textArea.setBorder(new EmptyBorder(new Insets(5,15,5,15)));

    buttonPanel.setBorder(new BevelBorder(BevelBorder.RAISED));
    buttonPanel.setPreferredSize(new Dimension(600, 50));
    buttonPanel.add(addButton);
    buttonPanel.add(displayButton);
    addButton.addActionListener(this);
    addButton.setActionCommand("Add");
    displayButton.addActionListener(this);
    displayButton.setActionCommand("Display");

    open.addActionListener(this);
    open.setActionCommand("Open");
    save.addActionListener(this);
    save.setActionCommand("Save");

    mainPanel.add(deptPanel);       
    mainPanel.add(studentPanel);        
    mainPanel.add(scrollPane);

    add(menu, BorderLayout.NORTH);
    add(mainPanel, BorderLayout.CENTER);
    add(buttonPanel, BorderLayout.SOUTH);       
}

@SuppressWarnings("unused")
public void actionPerformed(ActionEvent e)
{
    /*---> HERE */if(e.getActionCommand().equals("Save"));
    {
        FileOutputStream saveFile = null;
        ObjectOutputStream save = null;

        try 
        {
            saveFile = new FileOutputStream("ObjectData.txt");
            save = new ObjectOutputStream(saveFile);

            /*--->Error*/ save.writeObject(index);

            save.writeObject(new Classroom());
        } catch (FileNotFoundException e1) 
        {

            e1.printStackTrace();
        } catch (IOException e1) 
        {

            e1.printStackTrace();
        }
        finally
        {
            try {saveFile.close();

            }catch(Exception exc){
                System.out.println(exc.getMessage());
            }
            }       

    }
    /*---> Here*/if (e.getActionCommand().equals("Open"))
    {
        ObjectInputStream in = null;
        int returnVal = chooser.showOpenDialog(ClassRoomFrame.this);

        if (returnVal == JFileChooser.APPROVE_OPTION) 
        {
            File file = chooser.getSelectedFile();
            try {
        in = new ObjectInputStream(new FileInputStream(file));
            } catch (FileNotFoundException e1) 
            {

                e1.printStackTrace();
            } catch (IOException e1) 
            {

                e1.printStackTrace();
            }
        }
            try {
                Student st = (Student)in.readObject();
                Classroom cs = (Classroom)in.readObject();
                System.out.println(st);
                System.out.println(cs);

            } catch (IOException e1) {

                e1.printStackTrace();
            } catch (ClassNotFoundException e1) {

                e1.printStackTrace();
            }
            try{in.close();}
            catch(Exception err){err.getMessage();}
    }

    if(e.getActionCommand().equals("Add"))
    {
        if(room == null)
        {
            room = new Classroom(classLocationField.getText(),
    Integer.parseInt(classRoomField.getText()),
           Integer.parseInt(classCapacityField.getText()));
            room.addStudent(
                   new Student(studentFNameField.getText(),      
                     studentLNameField.getText(),
                     studentIDField.getText(),
                     studentMajorField.getText(),
               Integer.parseInt(studentCreditsField.getText())));

            classLocationField.setEditable(false);
            classRoomField.setEditable(false);
            classCapacityField.setEditable(false);
            studentFNameField.setText("");       
            studentLNameField.setText("");
            studentIDField.setText("");
            studentMajorField.setText("");
                            studentCreditsField.setText("");
            textArea.setText("Class and first student added.");
        }
        else
        {
            room.addStudent(
                   new Student(studentFNameField.getText(),      
                     studentLNameField.getText(),
                     studentIDField.getText(),
                     studentMajorField.getText(),
               Integer.parseInt(studentCreditsField.getText())));
            textArea.setText("Next student added.");

            studentFNameField.setText("");       
            studentLNameField.setText("");
            studentIDField.setText("");
            studentMajorField.setText("");
        studentCreditsField.setText("");
        }           
    }
    else if(e.getActionCommand().equals("Display"))
    {
        if (room != null)
        {
            textArea.setText(room.toString());
        }
        else
        {
            textArea.setText("Nothing to display");
        }   
    }
}
}

class Student implements Serializable
{
public String firstName, lastName, studentIdNumber, studentMajor;
public int totalCourseCredits;

//-----------------------------------------------------------------
// Create an empty studentusing a default constructor.
//-----------------------------------------------------------------
public Student ()
{
}
//-----------------------------------------------------------------
// Creates a Student with the specified information.
//-----------------------------------------------------------------
public Student (String name1, String name2, String identification, 
                String myMajor, int myTotalCredits)
{
    firstName = name1;
    lastName = name2;
    studentIdNumber = identification;
    studentMajor = myMajor;
    totalCourseCredits = myTotalCredits;
}

//-----------------------------------------------------------------
// Gets and sets first name.
//-----------------------------------------------------------------
public void setFirstName()
{
    Scanner scan = new Scanner (System.in);

    System.out.println ("Enter your First Name: ");
    firstName = scan.nextLine();
}

//-----------------------------------------------------------------
// Gets and sets last name.
//-----------------------------------------------------------------
public void setLastName()
{
    Scanner scan = new Scanner (System.in);

    System.out.println ("Enter your Last Name: ");
    lastName = scan.nextLine();
}

//-----------------------------------------------------------------
// Gets and sets Total Course Credits.
//-----------------------------------------------------------------
public void setTotalCredits()
{
    Scanner scan = new Scanner (System.in);

    System.out.println ("Enter your Total Credits: ");
    totalCourseCredits = scan.nextInt();
}

//-----------------------------------------------------------------
// Gets and sets Student ID Number.
//-----------------------------------------------------------------
public void setIdNumber()
{
    Scanner scan = new Scanner (System.in);

    System.out.println ("Enter your ID Number: ");
    studentIdNumber = scan.nextLine();
}

//-----------------------------------------------------------------
// Gets and sets Student Major.
//-----------------------------------------------------------------
public void setMajor()
{
    Scanner scan = new Scanner (System.in);

    System.out.println ("Enter your Major: ");
    studentMajor = scan.nextLine();
}

 public String toString()
 {
    String s = "First name:     " + firstName + "\n" + 
               "Last name:      " + lastName + "\n" + 
               "StudentID:      " + studentIdNumber + "\n" + 
               "Student Major:  " + studentMajor + "\n" + 
                "Course Creidts: " + totalCourseCredits + "\n"; 
    return s;
}
}

   class Classroom implements Serializable
  {

    private Student[] classRoster;
private int index = 0;
    private int capacityStudents, roomNumber;
    private String buildingLocation;

  //-----------------------------------------------------------------
  // Creates an empty Classroom.
  //-----------------------------------------------------------------
public Classroom()
{
    capacityStudents = 0;
  roomNumber = 0;
  buildingLocation = "";
}

  //-----------------------------------------------------------------
  // Creates a Classroom with the specified information.
  //-----------------------------------------------------------------
public Classroom(String location, int room, int cap)
{
    capacityStudents = cap;
  roomNumber = room;
  buildingLocation = location;
  classRoster = new Student[capacityStudents];
}

  //-----------------------------------------------------------------
  // Gets and sets Building Location.
 //-----------------------------------------------------------------
  public void setBuilding()
 {
  Scanner scan = new Scanner (System.in);

  System.out.println ("Enter the Building Location: ");
  buildingLocation = scan.next();
 }

  //-----------------------------------------------------------------
  // Gets and sets Room Number.
  //-----------------------------------------------------------------
public void setRoomNumber()
{
  Scanner scan = new Scanner (System.in);

  System.out.println ("Enter the Room Number: ");
  roomNumber = scan.nextInt();
}

  //-----------------------------------------------------------------
  // Sets Capacity of Students.
  //-----------------------------------------------------------------
public void setCapacityStudents()
{
  Scanner scan = new Scanner (System.in);

  System.out.println ("Enter The Capacity of the Classroom: ");
  capacityStudents = scan.nextInt();
  classRoster = new Student[capacityStudents];
}

  //-----------------------------------------------------------------
  // Gets Capacity of Students.
 //-----------------------------------------------------------------
public int getCapacityStudents()
{
  return capacityStudents;
}

  //-----------------------------------------------------------------
 // Adds an Individual Student to the Classroom, checking if the 
 // capacity of the clasroom is full.
 //-----------------------------------------------------------------
public void addStudent (Student student)
{
    if(index < capacityStudents)
    {
      classRoster[index] = student;
      index++;
    }
    else
    {
      System.out.println("Capacity exceeded! - Student cannot be added.");
    }   
}

 //-----------------------------------------------------------------
 // Adds an Individual Student to the Classroom, checking if the 
 // capacity of the clasroom is full.
 //-----------------------------------------------------------------
  public String toString()
{
    StringBuffer sb = new StringBuffer
                          ("Building:     " + buildingLocation +
                           "\nClass room: " + roomNumber +
                "\nCapacity:   " + capacityStudents + "\n\n"
                                 ); 
    for(int i = 0; i < classRoster.length; i++)
    {
        if(classRoster[i] != null)
          sb.append(classRoster[i].toString() + "\n");
    }
    return sb.toString();
   }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T06:24:25.743

该错误告诉您 index 在 save 方法的范围内不可用。`save.writeObject( classroom.getIndex())`如果要保存索引，则需要在 save 方法中执行类似的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T06:24:29.410

您已经在类中声明`index`了变量。`ClassRoom`但是你正试图在类的方法`actionPerformed`中使用它`ClassRoomFrame`。

由于范围`index`仅限于它的封闭类，因此如果不使用类上的实例，它将在其他类中不可见`ClassRoom`。这就是编译器错误状态：`cannot find symbol`

# com - 0x80070005 - 访问被拒绝。对于从函数返回的 Dom 节点

> ID：13356284
> 
> 赞同：2
> 
> 时间：2012-11-13T06:12:04.340
> 
> 标签：com, autohotkey

我们不能在函数外使用在函数中创建的 COM 对象吗？

```
strHTML := "<html><body>foobar</body></html>"
oNode := GetNode(strHTML, "body", 0)
msgbox % oNode.innerText

GetNode(strHTML, strNode, nIndex) {
    doc := ComObjCreate("HTMLfile") 
    doc.write(strHTML)
    return doc.getElementsByTagName(strNode)[nIndex]
} 
```

> 错误：0x80070005 - 访问被拒绝。
> 
> 具体来说：innerText
> 
> Line# 001: strHTML := "foobar" 002: oNode := GetNode(strHTML, "body", 0) ---> 003: MsgBox,oNode.innerText 005: { 006: doc := ComObjCreate("HTMLfile") 007: doc.write(strHTML) 008: 返回,doc.getElementsByTagName(strNode)[nIndex] 009: } 010: 退出 011: 退出

全局变量和 byref 参数都没有帮助。

* * *

@SouthStExit 这不起作用，因此将其包装在函数中变得毫无意义。但是正如 Lexikos 提到的，我现在看到该对象被破坏了，因此它变得无法访问。

```
oNode1 := GetNode("<html><body>foo</body></html>", "body", 0)
oNode2 := GetNode("<html><body><div>bar</div></body></html>", "div", 0)

msgbox % oNode1.innerText "`n" oNode2.innerText

GetNode(strHTML, strNode, nIndex) {
    global doc
    doc := ComObjCreate("HTMLfile") 
    doc.write(strHTML)
    return doc.getElementsByTagName(strNode)[nIndex]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:46:18.490

您必须使*doc*全球化。

```
strHTML :=  "<html><body>foobar</body></html>"
oNode :=    GetNode(strHTML, "body", 0)
msgbox %    oNode.innerText
return

GetNode(strHTML, strNode, nIndex) {
    global  doc
    doc :=  ComObjCreate("HTMLfile"), doc.write(strHTML)
    return  doc.getElementsByTagName(strNode)[nIndex]
} 
```

# http - 可以压缩对 http 请求错误的响应吗？

> ID：13356285
> 
> 赞同：3
> 
> 时间：2012-11-13T06:12:19.360
> 
> 标签：http, http-headers, gzip, http-error

当尝试执行导致 400 Bad Request 错误的 http 请求时，nginx 服务器返回“400 Bad Request”、Content-Encoding: gzip 和非编码格式的响应。

所以由于 Content-Encoding: gzip 我的代码用 GZIPInputStream 包装了响应，这会引发错误。

我的问题是：当状态码不是“200 OK”时，gzip 是有效的编码吗？如果没有，我可以简单地检查状态代码，如果返回 200 以外的任何内容，则不要尝试 gzip。

是否有关于此的规则/指南？这在任何地方都有记录吗？

TIA

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T11:05:38.443

是的，它是一个有效的编码。内容编码（和传输编码）与状态码正交。

# vhdl - 如何从综合报告中推断

> ID：13356289
> 
> 赞同：4
> 
> 时间：2012-11-13T06:12:39.333
> 
> 标签：vhdl, xilinx

我使用 xilinx 在 VHDL 中编写了 80c51 架构。为了增加时钟频率，我将所有 80c51 指令流水线化。指令能够根据需要执行，例如。当第一条指令被处理时，第二条指令被获取。

但是，尽管从综合报告中创建了 3 的流水线深度，但我只得到了稍高的时钟频率（大约 +/-10Hz）。我发现瓶颈是由于综合报告指定的一项操作，但我无法理解综合报告。

请问从 'SEQ/decode_3 到 SEQ/i_ram_addr_7' 的数据路径是什么？（根据我的猜测，我推断用例，when 语句检查 100 多个相关操作码，但不确定这是否是瓶颈。但我一无所知）

因此，我仅有的两个查询是：

首先，流水线是否可能不会增加时钟频率，而测试台是解释时序减少的唯一方法？

其次，我如何推断我的代码中的哪个路径是从“SEQ/decode_3 到 SEQ/i_ram_addr_7”的瓶颈。

感谢任何可以帮助解释我的疑问的人！

```
Timing Summary:
---------------
Speed Grade: -4

   Minimum period: 12.542ns (Maximum Frequency: 79.730MHz)
   Minimum input arrival time before clock: 10.501ns
   Maximum output required time after clock: 5.698ns
   Maximum combinational path delay: No path found

Timing Detail:
--------------
All values displayed in nanoseconds (ns)

=========================================================================
Timing constraint: Default period analysis for Clock 'clk'
  Clock period: 12.542ns (frequency: 79.730MHz)
  Total number of paths / destination ports: 113114 / 2670
-------------------------------------------------------------------------
Delay:               12.542ns (Levels of Logic = 10)
  Source:            SEQ/decode_3 (FF)
  Destination:       SEQ/i_ram_addr_7 (FF)
  Source Clock:      clk rising
  Destination Clock: clk rising

  Data Path: SEQ/decode_3 to SEQ/i_ram_addr_7
                                Gate     Net
    Cell:in->out      fanout   Delay   Delay  Logical Name (Net Name)
    ----------------------------------------  ------------
     FDC:C->Q            102   0.591   1.364  SEQ/decode_3 (SEQ/decode_3)
     LUT4_D:I1->O         10   0.643   0.885  SEQ/de_state_cmp_eq002111 (N314)
     LUT4:I3->O            7   0.648   0.740  SEQ/de_state_cmp_eq00711 (SEQ/de_state_cmp_eq0071)
     LUT4:I2->O            3   0.648   0.534  SEQ/i_ram_addr_mux0000<0>11111 (N2301)
     LUT4:I3->O            1   0.648   0.000  SEQ/i_ram_addr_mux0000<0>11270_SW0_SW0_F (N1284)
     MUXF5:I0->O           1   0.276   0.423  SEQ/i_ram_addr_mux0000<0>11270_SW0_SW0 (N955)
     LUT4_D:I3->O          6   0.648   0.701  SEQ/i_ram_addr_mux0000<0>11270 (SEQ/i_ram_addr_mux0000<0>11270)
     LUT3_L:I2->LO         1   0.648   0.103  SEQ/i_ram_addr_mux0000<7>221_SW2_SW0 (N1208)
     LUT4:I3->O            1   0.648   0.423  SEQ/i_ram_addr_mux0000<7>351_SW1 (N1085)
     LUT4:I3->O            1   0.648   0.423  SEQ/i_ram_addr_mux0000<7>2 (SEQ/i_ram_addr_mux0000<7>2)
     LUT4:I3->O            1   0.648   0.000  SEQ/i_ram_addr_mux0000<7>167 (SEQ/i_ram_addr_mux0000<7>)
     FDE:D                     0.252          SEQ/i_ram_addr_7
    ----------------------------------------
    Total                     12.542ns (6.946ns logic, 5.596ns route)
                                       (55.4% logic, 44.6% route)

=========================================================================
Timing constraint: Default OFFSET IN BEFORE for Clock 'clk'
  Total number of paths / destination ports: 154 / 154
-------------------------------------------------------------------------
Offset:              8.946ns (Levels of Logic = 6)
  Source:            rst (PAD)
  Destination:       SEQ/i_ram_diByte_1 (FF)
  Destination Clock: clk rising

  Data Path: rst to SEQ/i_ram_diByte_1
                                Gate     Net
    Cell:in->out      fanout   Delay   Delay  Logical Name (Net Name)
    ----------------------------------------  ------------
     IBUF:I->O           444   0.849   1.392  rst_IBUF (REG/ext_int/fd_out1_0__or0000)
     BUF:I->O            445   0.648   1.425  rst_IBUF_1 (rst_IBUF_1)
     LUT3:I2->O            4   0.648   0.730  ROM/data<1>1 (i_rom_data<1>)
     LUT4:I0->O            1   0.648   0.500  SEQ/i_ram_diByte_mux0000<1>17_SW0 (N1262)
     LUT4:I1->O            1   0.643   0.563  SEQ/i_ram_diByte_mux0000<1>32 (SEQ/i_ram_diByte_mux0000<1>32)
     LUT4:I0->O            1   0.648   0.000  SEQ/i_ram_diByte_mux0000<1>60 (SEQ/i_ram_diByte_mux0000<1>)
     FDE:D                     0.252          SEQ/i_ram_diByte_1
    ----------------------------------------
    Total                      8.946ns (4.336ns logic, 4.610ns route)
                                       (48.5% logic, 51.5% route)

========================================================================= 
```

* * *

为了让我更具体，我将在 1 个操作码的解码阶段给出一个示例代码的片段。

以下是解码 opdcode（mov 指令）时的 1 个此类情况。大约有 100+ 个操作码（100+ 条指令），这意味着这个 case 语句有超过 100 个 when 语句。

> 案例操作码是
> 
> --MOV A, Rn
> 当“11101000” | "11101001" | "11101010" | "11101011" | "11101100" | "11101101" | "11101110" | "11101111" => case de_state 是 E7 =>
> 
> ```
>  de_state <= E8;
> 
>           when E8 =>
> 
>               de_state <= E9;
> 
>           when E9 =>
> 
>               de_state <= E10;
>           when E10 =>
>               --Draw PSW
>               i_ram_addr <= xD0;
>               i_ram_rdByte <= '1';
> 
>               de_state <= E11;
>           when E11 =>
>               --Draw from Rn
>               i_ram_addr <= "000" & i_ram_doByte(4 downto 3)& opcode(2 downto 0);
>               i_ram_rdByte <= '1';
> 
>               de_state <= E12;
> 
>           when E12 =>
>               --Place into EDR
>               EDR <= i_ram_doByte;
>               --close rdByte
>               i_ram_rdByte <= '0';
> 
>           when others =>
> 
>           end case; 
> ```

我希望你能更好地了解我的 vhdl 代码。我将不胜感激任何形式的帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:18:54.957

由于您使用的是 Xilinx，我想您也可以访问 PlanAhead？尝试“Analyze Timing / Floorplan Design (PlanAhead)”（在“Implement Design”->“Place & Route”下）。

PlanAhead 应该打开，并在底部为您提供计时结果的视图。选择关键路径（松弛最小的路径），右键单击它并选择“示意图”，这将显示相​​关图元的图形视图。然后，您可以右键单击图元并选择“Expand Cone”->“To Flops”，也可以查看周围的组件。

这应该可以帮助您更好地了解所涉及的信号。尝试将输入和输出信号跟踪到您的 VHDL 代码，并专注于优化路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T13:18:01.810

仅从这些信息中不会有好的答案；我们只能猜测是什么源代码产生了这个硬件。

但很明显，您需要检查源头，假设它为什么慢，采取行动纠正问题，并测试解决方案。

并重复直到足够快。

我的猜测，鉴于您暗示有一个案例语句来解码操作码......

其中一个手臂是这样的：

```
when <some expression involving decode>  =>
   address <= <some address calculation>; 
```

问题是这两个表达式通常是相互关联的，因此它们在同一个循环中被评估。一个示例解决方案是将地址表达式（即在前一个周期中）预先计算到一个寄存器中，并将 case arm 重写为：

```
when <some expression involving decode>  =>
   address <= register; 
```

如果您猜对了，结果会稍微快一些，并且您还有另一个（类似的）瓶颈需要修复。重复直到足够快...

但是如果没有源和时序分析，不要指望更具体的答案。

编辑：发布了一小部分源代码后，图片更清晰了：您有两个嵌套的 Case 语句，每个都很大。你显然需要一些简化......

我注意到只有 2 个内壳臂分配给 i_ram_addr，但时序分析显示 i_ram_addr 上有一个巨大而复杂的多路复用器；很明显，还有很多其他的 case arm 为 i_ram_addr 贡献了术语......

我建议您可能必须将 i_ram_addr 与主要的 Case 语句分开处理，并编写最简单的机器来单独生成 i_ram_addr。例如，我会注意到 OPCODE 案例臂相当于：

```
if OPCODE(7 downto 3) = "11101" then ... 
```

并询问单独为 i_ram_addr 获取解码器有多简单。您可能会发现许多其他 case arm 使用 i_ram_addr 做非常相似的事情（最初的 8051 设计者会抓住机会简化逻辑！）。综合工具在简化逻辑方面可能非常聪明，但是当事情变得过于复杂时，它们可能会错失良机。

（在这个阶段，我将注释掉 i_ram_addr 分配，并单独留下解码器的其余部分）

# jframe - 停止程序，直到用户单击按钮

> ID：13356294
> 
> 赞同：0
> 
> 时间：2012-11-13T06:13:12.907
> 
> 标签：jframe, containers

在我的主程序中，我创建了一个带有按钮的 JFrame。这充当一个单独的对话框，提示用户输入信息。我想要的是，当对话框出现时，程序停止运行，直到用户单击按钮。

如果我只是正常创建JFrame，程序将在代码中继续前进并在从对话框接收信息之前执行其他语句。这是一个问题，因为稍后在代码中使用第一个 JFrame 的信息创建了另一个 JFrame。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T06:28:45.340

将显示框架的逻辑与按下按钮后发生的动作分开。我的意思是你应该向你拥有的按钮添加一个动作监听器，并将代码放在它的方法而不是主程序中。问题是您正在以面向程序的方式可视化解决方案。考虑面向对象。

# objective-c - 将两个 NSString 相加（数字）

> ID：13356299
> 
> 赞同：0
> 
> 时间：2012-11-13T06:13:36.463
> 
> 标签：objective-c, nsnumber

我正在尝试这个：

```
 NSNumber *num1;
    NSNumber *num2;
    self.addNumberOfRoundsText.text = [num1 stringValue];
    self.numberOfRoundsText.text = [num2 stringValue];
    NSNumber *sum = [NSNumber numberWithInt:([num1 intValue] + [num2 intValue])];
    NSLog(@"%@", [sum stringValue]); 
```

出于某种原因，控制台不断输出`0`我不确定是否有我遗漏的东西。我只想`text`从两个 UITextField 中获取并添加它们。然后将它们输出到控制台。感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T06:19:57.580

在您的示例代码中，您尚未初始化`num1`和`num2`. 因此（如果您使用 ARC，这是新项目的默认设置），这些变量将被初始化为 nil。

在 Objective-C 中，您可以向 nil 发送任何消息（如`stringValue`或`intValue`），它会返回 0 或 nil。所以：

```
NSNumber *num1; // initialized to nil by ARC
NSNumber *num2; // initialized to nil by ARC

// This sets self.addNumberOfRoundsText.text to nil.
self.addNumberOfRoundsText.text = [num1 stringValue];

// This sets self.numberOfRoundsText.text to nil.
self.numberOfRoundsText.text = [num2 stringValue];

// This gets 0 for [num1 intValue] and 0 for [num2 intValue], which add up
// to 0, so sum is an NSNumber representing zero.
NSNumber *sum = [NSNumber numberWithInt:([num1 intValue] + [num2 intValue])];
NSLog(@"%@", [sum stringValue]); 
```

我不确定你实际上想做什么。也许您有两个文本字段，每个文本字段都包含一个数字，您想将这两个数字相加。如果这就是你想要做的，试试这个：

```
int n1 = self.addNumberOfRoundsText.text.intValue;
int n2 = self.numberOfRoundsText.text.intValue;
int sum = n1 + n2;
NSLog(@"sum = %d", sum); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T06:17:56.730

这是您要求将两个`UITextField`值添加到一个中的代码`String`

```
 NSString* finalSTring;

  finalSTring =[NSString stringWithFormat:@"%@%@",textfield1.text,textField2.text];
   //textField1 and Textfield2 is instance of TextField.

   NSLog(@"%@",finalSTring);//here you have new Single String 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T06:19:59.643

如果您有两个文本字段：`field1`和`field2`：

```
int sum = [field1.text intValue] + [field2.text intValue]; 
```

或者，如果您想要 sum 作为`NSNumber`：

```
NSNumber* sum = [NSNumber numberWithInt:[field1.text intValue] + [field2.text intValue]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T08:24:00.010

为什么不这样设置

```
NSNumber *num1;
NSNumber *num2;
self.addNumberOfRoundsText.text = [NSString stringWithFormat:@"%@",num1];
self.numberOfRoundsText.text = [NSString stringWithFormat:@"%@",num2];

NSNumber *sum = num1 + num2 ;
NSLog(@"%@", sum ); 
```

# winforms - 为什么桌面应用程序没有“商店”上下文菜单项？

> ID：13356306
> 
> 赞同：1
> 
> 时间：2012-11-13T06:14:46.720
> 
> 标签：winforms, windows-8, windows-store-apps, windows-store

我有一个想要在 Windows 商店中提供的 Windows 桌面应用程序，但项目的上下文菜单中没有“商店”项目集（例如商店 | 将应用程序与商店关联、商店 | 捕获屏幕截图等。

那么是否有解决方法，甚至桌面应用程序都需要成为 XAML (WPF) 应用程序*，还是我找错了地方，还是什么？

*   这*是*一个 Winforms 应用程序，使用 Visual Studio 2010 创建。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T06:28:05.543

这是一个完全不同的过程，您的应用程序实际上并没有在商店中“存在”，因此与 Windows 商店应用程序发生的“将应用程序与商店关联”的大部分内容都不相关。

查看此[Windows Store for Developer](http://blogs.msdn.com/b/windowsstore/archive/2012/06/08/listing-your-desktop-app-in-the-store.aspx)博客文章了解该过程。

# android - 如何在Android中使用表格行垂直对齐文本视图字段

> ID：13356307
> 
> 赞同：4
> 
> 时间：2012-11-13T06:14:59.797
> 
> 标签：android, row

我有这个输出

[http://www.cubixshade.com/images/align_row.jpg](http://www.cubixshade.com/images/align_row.jpg)

我希望作为日期字段的第一个字段垂直居中对齐？我应该使用什么来在其他字段的左侧或右侧添加一些空间？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-13T06:40:37.223

您可以将`android:gravity="center_vertical"`属性设置为 TableRow 以使其子元素垂直居中对齐。

您也可以使用`android:layout_marginLeft`property 或`android:layout_marginRiight`property 从左右放置一些边距，类似地，您可以使用`android:layout_marginTop`or将边距放置在顶部和底部`android:layout_marginBottom`。

如果要拉伸列，则可以使用该`android:layout_weight`属性来定义列的重量。

作为参考，您可以在下面的示例中看到 2 列

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/TableLayout01"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:stretchColumns="1" >

    <TableRow
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical" >

    <TextView
        android:id="@+id/TextView01"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Male"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/etNoOfMale"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1" 
        android:inputType="number"/>
    </TableRow>

    <TableRow
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical" >

    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Female"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/etNoOfFemale"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1" 
        android:inputType="number"/>
    </TableRow>

</TableLayout> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-13T06:31:09.433

您可以在您的 xml 文件页面中使用下面的标签来正确对齐，如果可以提供有关您所面临的 pblm 的详细信息，我可以给出更多解释。

```
android:layout_marginLeft="25dp"
android:layout_below="@+id/imageView1" 
```

第一个代码从左边给出 25dp 的边距，第二个代码只是将文件与 imageview1 下的右对齐。

**还有另一种方法** 只需右键单击文本视图或您在设计页面中添加的任何内容，选择其他属性->布局参数->然后选择您需要的项目[它包含所有对齐属性。

希望这个对你有所帮助。谢谢

# c - 当我在函数中返回静态变量的地址时，地址不正确

> ID：13356308
> 
> 赞同：1
> 
> 时间：2012-11-13T06:15:38.073
> 
> 标签：c, memory

```
ProtobufCAllocator *kvs_pb_allocator()
{
    static ProtobufCAllocator allocator;
    //do something here

    return &allocator; //print the address, it is 0x2aaaaafc12c0
} 
```

在另一个程序中调用这个函数（来自不同的文件）：

```
ProtobufCAllocator *alloctor = kvs_pb_allocator(); 
//print the address, it is 0xffffffffaafc12c0 
```

为什么会出现这个问题？我编写的另一个守护程序运行良好。就在这种情况下，它会打印错误的值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T06:48:31.740

您在 64 位机器上，并且没有使用类型安全机制在第二个位置打印地址。该值被截断为 32 位，然后符号扩展为 64 位。

```
0x00002aaa_aafc12c0
0xffffffff_aafc12c0 
```

其中下划线表示值中间的 32 位边界。问题更可能出在您打印值的方式上，而不是值本身。

您可以通过更仔细地打印地址来验证这一点。你可以使用：

```
printf("Address: %p\n", (void *)alloctor); 
```

因为这是C。

* * *

我假设（可能没有理由）您确实有一个声明函数的标头，`kvs_pb_allocator()`并且该标头用于定义函数的文件和调用它的文件中。如果不是，则进入确保所有函数在使用之前声明（或定义，如果它们是静态函数）的纪律。所有外部函数都应在标头中声明。引用给定函数的所有代码都应使用声明该函数的单个标头。这在 C99 和 C2011 中是必需的；如果你被 C89 编译器困住，你应该对自己施加纪律。

如果你使用 GCC，你可以使用：

```
gcc -std=c99 -Wmissing-prototypes -Wstrict-prototypes -Wold-style-definition 
```

得到警告。您的代码会收到旧式定义的警告，因为您应该定义：

```
ProtobufCAllocator *kvs_pb_allocator(void)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T03:26:32.460

您是否在调用它的文件中声明了该函数。如果不是，编译器将假定它返回一个 int，您的代码会将 int 扩展为一个指针。

# ios - 如何指定本地化的属性列表？

> ID：13356312
> 
> 赞同：2
> 
> 时间：2012-11-13T06:16:04.130
> 
> 标签：ios

我有一个调用 REST Web 服务的 ios 应用程序。我在我的应用程序中创建了一个属性列表文件，其中包含将由服务器返回的错误代码字典以及要显示的相应消息。

我正在考虑为不同的语言提供多个属性列表文件。

如何使应用程序根据区域设置获取特定的属性列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:34:55.337

您说服务器正在生成错误代码和消息。

所以我认为有更多的方法可以做到这一点。

首先，您可以将请求中的语言环境标头发送到服务器，以便服务器为您完成所有本地化（我认为这不如解决方案＃2）。

所以我更喜欢让服务器只返回错误代码并在客户端处理消息的方式。您可以在 xcode 中为您想要支持的每种语言创建一个语言项目：http: [//www.ibabbleon.com/iphone_app_localization.html#extract](http://www.ibabbleon.com/iphone_app_localization.html#extract)

在 localizable.strings 文件中，我将执行以下操作：

```
"RestServiceXYErrorTitle_1" = "Authentication failed";
"RestServiceXYErrorMessage_1" = "Your credentials were wrong";
"RestServiceXYErrorTitle_2" = "Resource not available";
"RestServiceXYErrorMessage_2" = "The resource you requested is no longer available";
.... 
```

然后我会将服务器返回的错误代码（例如 1）与我的本地化字符串放在一起：

```
NSString *localizedTitleKey = [NSString stringWithFormat:@"RestServiceXYErrorTitle_%@", errorCode];
NSString *localizedMessageKey = [NSString stringWithFormat:@"RestServiceXYErrorMessage_%@", errorCode];
NSString *errorTitle = NSLocalizedString(localizedTitleKey,@"");
NSString *errorMessage = NSLocalizedString(localizedMessageKey,@""); 
```

我认为这将是一个很好的解决方案

# ruby - 卡在带有变量的系统调用上

> ID：13356315
> 
> 赞同：0
> 
> 时间：2012-11-13T06:16:35.307
> 
> 标签：ruby, windows, backup

我正在编写一个 ruby​​ 脚本，它将自动将我的笔记本电脑备份到我的 ssh 服务器。我似乎被困在系统调用上。

```
$x = "C:\\Program Files\\7-Zip\\7z.exe"

###calibre library###
$library = "C:\\Users\\maste_000\\Documents\\Calibre Library"
system($x, "a library.7z", $library, " -r") 
```

我正在尝试调用 exe 7z 并从 $library 指向的目录创建一个名为 library.7z 的文件。不管我如何安排，尽管我不断收到 7z 命令错误。我假设这与我执行系统调用的方式有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T06:27:19.013

我猜你想要这个：

```
system($x, 'a', 'library.7z', $library, '-r') 
```

这将在命令提示符处为您提供与此相同的效果：

```
C:\Program Files\7-Zip\7z.exe a library.7z "C:\Users\maste_000\Documents\Calibre Library" -r 
```

当然，假设我没有完全忘记引用是如何与 Windows 命令行一起工作的。

当您使用 ; 的多参数形式时，空格`$library`无关紧要[`system`](https://ruby-doc.org/core/Kernel.html#method-i-system)。使用这个版本的部分原因`system`是为了避免当 shell 挡道时你需要的所有奇怪的引用。最主要的是您可能需要将它们分开`'a'`，`'library.7z'`以便它们是两个参数，而不是一个以空格作为第二个字符的单个参数；如果没有这种分离，你会这样说：

```
C:\Program Files\7-Zip\7z.exe "a library.7z" "C:\Users\maste_000\Documents\Calibre Library" -r 
```

这看起来不对。

# ruby-on-rails - collection_select 给 ActiveRecord::AssociationTypeMismatch

> ID：13356322
> 
> 赞同：3
> 
> 时间：2012-11-13T06:17:57.707
> 
> 标签：ruby-on-rails, forms, collections

我不确定我问的这个问题是对的，还是因为太累了，以至于看不出来。

我的代码是：

_form.html.haml

```
 = f.collection_select :category, Category.where(:user_id => current_user.id), :id, :name 
```

我得到的是

```
 ActiveRecord::AssociationTypeMismatch in LinksController#create
 Category(#70203963939880) expected, got String(#70203929255820) 
```

日志是

```
 Started POST "/links" for 127.0.0.1 at 2012-11-12 22:14:05 -0800
 Processing by LinksController#create as HTML
 Parameters: {"utf8"=>"✓", "authenticity_token"=>"z4RYcUW3hGLfKBAwQLMZbye2I1mn16fg6BSBGe7GILU=", "link"=>{"name"=>"SFGate", "url"=>"http://www.sfgate.com/", "category"=>"1"}, "commit"=>"Save"}
 Completed 500 Internal Server Error in 0ms 
```

它看起来好像它的传递 :id 作为字符串而不是整数。有什么线索吗？

更新：

```
class Category < ActiveRecord::Base
  belongs_to :user
  has_many :links

  attr_accessible :name, :color, :position

  COLOR_CODES = ["Green", "Blue", "Yellow", "Orange", "Red", "Purple", "Pink"]
end

class Link < ActiveRecord::Base
  belongs_to :user
  belongs_to :category

  attr_accessible :category, :name, :position, :url, :user_id
end 
```

固定：我有

```
 t.integer :category 
```

代替

```
 t.integer :category_id 
```

把所有东西都换了，它的工作很完美——我想我太累了:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T06:35:45.777

你应该改变：

```
f.collection_select :category, Category.where(:user_id => current_user.id), :id, :name 
```

到：

```
f.collection_select :category_id, Category.where(:user_id => current_user.id), :id, :name 
```

# javascript - 用一些字母验证街道地址时遇到问题

> ID：13356323
> 
> 赞同：0
> 
> 时间：2012-11-13T06:18:06.930
> 
> 标签：javascript, jquery

我正在使用以下功能验证街道地址，该功能适用​​于所有英文字母。但它不接受这些信件`ö, Ö, ä, Ä`。如何更改以下函数以使其也接受这些字母？

```
validateAddress = function (val) {
        var streetRegex = /^[\w+\s]+\d+,\s*[\s\w]+$/;
        if (streetRegex.test(val)) return true;
        else return false;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T06:27:48.637

现代浏览器应该能够处理正则表达式中的这些字符。在 Chrome 或 Firefox 上查看[此示例。](http://jsbin.com/ujefip/1/edit)

```
var str = 'öabÖcdäefgÄh';
console.log( str.match(/[öä]/gi) ); //=> ["ö", "Ö", "ä", "Ä"] 
```

但是您始终可以将这些字符转换为 ascii 或 unicode 并改用它：

```
function toAscii( str ) {
  return str.replace(/./g, function( char ) {
    return '\\x'+ char.charCodeAt(0).toString(16).toUpperCase();
  });
}

// Use RegExp constructor
var regex = new RegExp('...'+ toAscii('ä') +'...'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T06:41:31.040

您可以使用正则表达式

```
/^\D+\d+,\D+$/ 
```

它也适用于 ä 和 ö 字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T06:42:09.363

您的问题是 \w 匹配不包括 ö、Ö 等的字符集。您需要考虑另一种方法来匹配允许字符的字符范围。也许您应该换一种方式并匹配非数字字符：

```
var re = /\D+\d+,\s*[\s\w]+$/ 
```

否则，您将需要根据您打算支持的字母（即不同语言的字母）指定各种字符范围。我认为正则表达式是基于 ASCII 的，它是基于英文字母表的。

# python - PIL-可以给 PIL 一个二进制对象而不是文件句柄吗？

> ID：13356324
> 
> 赞同：0
> 
> 时间：2012-11-13T06:18:14.947
> 
> 标签：python, python-imaging-library

我可以让 PIL 处理文件： `Image.open('example.jpg')`.

有没有办法对在代码中创建的 jpg 执行相同操作，而无需将该 jpg 写入 HDD: `Image.open('binaryObject')`。

我已经尝试给 PIL 一个函数的二进制输出，并且我已经尝试过解析器属性（但可能是错误的）：http: [//effbot.org/imagingbook/imagefile.htm](http://effbot.org/imagingbook/imagefile.htm)

```
from PIL import Image
f = open(image.jpg, "rb")    
f_data = f.read()
try:
    Image.parser()
    parser.feed(f_data)
    parser.close()
    print "OK"
except:
    print "fail" 
```

我的硬盘跟不上！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T06:24:23.000

使用对象将图像写入内存，而不是写入磁盘`StringIO`：

```
try:
    from cStringIO import StringIO
except ImportError:
    from StringIO import StringIO

fake_file = StringIO()
fake_file.write(f_data) 
```

现在，您可以将`fake_file`to`Image()`作为文件句柄传递。

# java - 如何使用 log4j 自动记录类中调用的每个方法

> ID：13356326
> 
> 赞同：18
> 
> 时间：2012-11-13T06:18:36.370
> 
> 标签：java, log4j

我有一个带有数据库调用的类，我通常想用 log4j 记录这个类中调用的每个方法（带参数）：

```
logger.debug("foo(id="+id+") initiated"); 
```

是否可以自动执行此操作？也许通过在每个方法的开头使用某种注释而不是编写每个 logger.debug？

今天，每次更改参数或方法名称时，我都必须更新我的 logging.debug。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-03T08:19:52.327

尝试[jcabi-aspects](http://aspects.jcabi.com/)[`@Loggable`](http://aspects.jcabi.com/annotation-loggable.html)的注释和 AspectJ方面（我是开发人员）：

```
@Loggable(Loggable.INFO)
public String load(URL url) {
  return url.openConnection().getContent();
} 
```

所有方法调用都通过 SLF4J 记录。

这篇博客文章逐步解释了它：[Java Method Logging with AOP and Annotations](http://www.yegor256.com/2014/06/01/aop-aspectj-java-method-logging.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-13T06:20:46.957

如果您有接口声明要记录调用的方法，则可以使用标准代理 API 来实现您想要的。

代理 API 将允许您将实际实现包装在一个新的代理类中，该类将记录调用并将调用转发到实现。您只需要实现一个执行`InvocationHandler`日志记录和转发的功能。

例如，

```
interface Calculator {
  int add(int a, int b);
}

class CalculatorImpl implements Calculator {
  @Override public int add(int a, int b) { return a+b; }
}

class LoggingInvocationHandler implements InvocationHandler {
  private final Object delegate;
  public LoggingInvocationHandler(final Object delegate) {
    this.delegate = delegate;
  }
  @Override invoke(Object proxy, Method method, Object[] args) throws Throwable {
    System.out.println("method: " + method + ", args: " + args);
    return method.invoke(delegate, args);
  }
}

class X {
  public static void main(String... args) {
    final Calculator calc = new CalculatorImpl();
    final Calculator loggingCalc =
      (Calculator) Proxy.newProxyInstance(X.class.getClassLoader(),
                                          new Class[] {Calculator.class},
                                          new LoggingInvocationHandler (calc));
    loggingCalc.add(2, 3); // shall print to the screen
  }
} 
```

您还可以轻松记录方法抛出的返回值和异常，只需更改`InvocationHandler`. 此外，您可以使用任何您喜欢的日志框架，而不是`System.out.println`示例中的那样。

要记录返回值和异常，您可以执行以下操作：

```
 @Override invoke(Object proxy, Method method, Object[] args) throws Throwable {
    System.out.println("method: " + method + ", args: " + args);
    try {
      final Object ret = method.invoke(delegate, args);
      System.out.println("return: " + ret);
      return ret;
    } catch (Throwable t) {
      System.out.println("thrown: " + t);
      throw t;
    }
  } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-13T06:22:08.010

一种可能的解决方案是使用 aspectj。想法是将方面附加到您希望记录的每个方法，并执行记录是方面而不是方法。aspectj 日志记录的一个示例[就在 stackoverflow 中](https://stackoverflow.com/questions/8839077/how-to-use-aop-with-aspectj-for-logging)。

# flash - 如何使用条件语句更改随机数的值

> ID：13356332
> 
> 赞同：1
> 
> 时间：2012-11-13T06:19:33.640
> 
> 标签：flash, actionscript, adobe, conditional

我正在做一个带有 5 个动态文本的随机数生成器。我想要做的是当 showRandom_txt = 1 那么其他文本应该等于零

```
//1.
function randomNumbers(min:Number,max:Number) {
   var Results:Number=Math.floor(Math.random()*max)+min;
   return Results;
}

function randomNumber(){
   var Results:Number=Math.floor(Math.random()*(1+1-0))+0;
   return Results;
}

//2.
generate_btn.addEventListener(MouseEvent.CLICK, showRandomnumber);

//3.
function showRandomnumber(event:MouseEvent):void{
   showRandom_txt.text = randomNumber();
   showRandom2_txt.text = randomNumbers(0,9);
   showRandom3_txt.text = randomNumbers(0,9);
   showRandom4_txt.text = randomNumbers(0,9);
   showRandom5_txt.text = randomNumbers(0,9);
} 
```

我是 AS3 的新手，非常感谢您的帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T06:55:57.743

要评估相等性，请使用[运算符](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/operators.html)。[`==`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/operators.html)

这可以从文本字段中进行测试，如下所示：

```
if(showRandom_txt.text == "1") {} 
```

也许更好的是针对数字类型进行测试，例如：

```
var n:Number = randomNumber();
if(n == 1) {} 
```

使用 if / else 实现：

```
function showRandomNumber(event:MouseEvent):void
{
    var n:Number = randomNumber();
    showRandom_txt.text = n.toString();

    if (n == 1)
    {
        showRandom2_txt.text = showRandom3_txt.text = showRandom4_txt.text = showRandom5_txt.text = "0";
    }
    else
    {
        showRandom2_txt.text = randomNumbers(0, 9).toString();
        showRandom3_txt.text = randomNumbers(0, 9).toString();
        showRandom4_txt.text = randomNumbers(0, 9).toString();
        showRandom5_txt.text = randomNumbers(0, 9).toString();
    }
} 
```

使用开关块：

```
function showRandomNumber(event:MouseEvent):void
{
    var n:Number = randomNumber();
    showRandom_txt.text = n.toString();

    switch(n)
    {
        case 1:
            showRandom2_txt.text = showRandom3_txt.text = showRandom4_txt.text = showRandom5_txt.text = "0";
            break;
        default:
            showRandom2_txt.text = randomNumbers(0, 9).toString();
            showRandom3_txt.text = randomNumbers(0, 9).toString();
            showRandom4_txt.text = randomNumbers(0, 9).toString();
            showRandom5_txt.text = randomNumbers(0, 9).toString();
            break;
    }
} 
```

# c# - 使用 C# 连接到 Oracle 数据库服务器

> ID：13356334
> 
> 赞同：-1
> 
> 时间：2012-11-13T06:19:39.673
> 
> 标签：c#, database, oracle

快速提问。我有一个学校作业，为此我获得了 Oracle 服务器的连接信息，包括服务器 URL、端口号、登录 ID、密码、SID 和服务器地址。我们可以完全自由地使用我们想要的任何语言，我选择了 C#。我想知道是否有人可以推荐使用什么库来连接数据库服务器并查询它。我尝试在 Google 上搜索此信息，但所有现有文章似乎都在使用 Visual Studio 2012/.NET 4.5 中不再可用的已弃用库，或者需要一个需要令人费解的复杂过程的 Oracle 库安装第一眼。我希望有人可以推荐一个占用空间小的易于安装的库，我可以使用它来使用给定的连接信息查询这个 oracle 数据库服务器。

* * *

所以我下载并安装了 ODP.net（将安装目录和 bin 目录添加到 PATH 环境变量和所有内容中），出于某种原因，Visual Studio 没有将其显示为参考列表中的参考。我试图通过简单地添加 dll 的路径作为参考来规避这个问题（在我的例子中：C:\Tools\Oracle...\Oracle.DataAccess.dll），起初一切都很好。甚至智能感知也看到了库的类和东西，但是当我真正尝试运行代码时，它说：

无法加载文件或程序集 'Oracle.DataAccess, Version=4.112.3.0, Culture=neutral, PublicKeyToken=89b483f429c47342' 或其依赖项之一。试图加载格式不正确的程序。

你知道这些问题中的任何一个可能是由什么引起的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T06:23:57.243

您应该使用 Oracle 推荐[的适用于 .NET](http://www.oracle.com/technetwork/topics/dotnet/index-085163.html)的 Oracle 数据提供程序。[Microsoft 提供的OracleConnection](http://msdn.microsoft.com/en-us/library/system.data.oracleclient.oracleconnection%28v=vs.100%29.aspx)类自 .Net framework 4.0 起已过时

> Oracle Data Provider for .NET (ODP.NET) 优化了对 Oracle 数据库的 ADO.NET 数据访问。ODP.NET 允许开发人员利用高级 Oracle 数据库功能，包括 Real Application Clusters、XML DB 和高级安全性。数据提供程序可与最新的 .NET Framework 4 版本一起使用。
> 
> ODP.NET 使从 .NET 使用 Oracle 更加灵活、更快、更稳定。ODP.NET 包括许多其他 .NET 驱动程序不具备的功能，包括本机 XML 数据类型、自我调整、RAC 优化的连接池、可升级事务和高级队列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T06:22:46.993

我建议使用 NHibernate。（它使用 ODP.NET 作为数据提供者）

这是使用示例： http: [//nhbwithoracle.blogspot.ru/](http://nhbwithoracle.blogspot.ru/)

# verilog - 系统verilog：包对象的实例化

> ID：13356340
> 
> 赞同：1
> 
> 时间：2012-11-13T06:20:07.097
> 
> 标签：verilog, system-verilog

我有一个包，其中声明了类`param0`和`param1`。有人可以解释一下为什么这些类的实例化

```
( ex:param0 = new() ) 
```

应该在顶部模块上完成，而不是直接在包本身内完成？

我之所以想在包里面做是为了在类`param0`里面使用类的一些参数`param1`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:50:00.530

我正在使用`VCS`，但我不明白为什么不能在包中分配类对象。以下代码在`VCS`和中工作`ncverilog`。

```
package pkg;
    class Base;
        int x;
        function new();
            x=1;
        endfunction
        function int value();
            return x;
        endfunction
    endclass : Base
    class C;
      Base b;
      function new();
        b = new;
      endfunction
      function get();
        return b.value();
      endfunction
    endclass : C

    C d = new;
endpackage

pkg::C e = new;

module top;
    import pkg::*;
    C c;
    initial begin
        c = new;
        $display("c=%d", c.get());
        $display("d=%d", d.get());
        $display("e=%d", e.get());
    end
endmodule 
```

但是在包中声明诸如全局变量或实例之类的并不是一种好的编码风格。该包只应用于编写声明。即使您不是在包中这样做，而是在`module`/ `program`/之外声明它们`package`，它也属于`$unit`包。当然，您可以编写类函数体定义、函数或任务，以及`new`用于类实例化的任何操作。包的概念只是声明，因此任何类、函数、任务、网络/变量都将被导入到模块或程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:43:41.460

包仅用于声明，不能包含检查器之外的任何进程。由于类 new 是一个特殊的函数调用，它必须在进程上下文中使用，因此不允许在包中使用。

您可以使用 class1::parameter1 直接引用类成员参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-14T15:57:03.063

在包中实例化对象的一个​​问题是，如果没有人使用（导入）包，是否仍然需要构造对象？SystemVerilog 标准没有回答这个问题，而是由工具供应商决定。因此，将它们从包裹中取出会更安全。

# java - Java 或 C++：播放声音时将电流发送到 USB

> ID：13356341
> 
> 赞同：1
> 
> 时间：2012-11-13T06:20:10.593
> 
> 标签：java, c++

java甚至C++中有没有办法根据播放的声音发送电流？比方说，如果有很多声音播放，USB 端口将接收 20mA，如果声音很小，USB 端口将接收 5mA，如果没有声音，显然是 0 电流/电压。您不必过于深入地回答您的问题。只是也许指出我正确的方向并帮助我开始。我确实更喜欢 java 而不是 C++，那太好了。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T07:23:29.630

这在提议的形式中是不可行的。电源要么打开，要么关闭，但不在两者之间。如果没有硬件，您就无法用它制作 LED 声级计......

然而，使用市售的、USB 就绪的构建块很容易做到这一点。有多种选择，但我更喜欢 Arduino。接上USB口，就可以像串口一样连接了，这并不难。为此，您需要完成以下操作：

*   得到一个 Arduino
*   用 C 写一个草图，接受您的输入，比如说 ASCII 编码的十进制整数值，并执行您想要的功能，例如通过具有可变占空比的 PWM 引脚为 LED 供电（Arduino 端）
*   编写您的代码，获取您需要的任何内容（“发出多少声音”，无论这意味着什么......），在 PC 端，使用您喜欢的任何语言
*   使用 PC 端代码的串行端口通信将数值发送到 Arduino

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T07:08:28.290

不可以。硬件不支持此功能。USB 端口不是 DAC。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T08:19:19.433

我认为两者都很好，除非您知道您要使用的语言的概念。但是，由于编码简单，我还是更喜欢 java。您可以使用音序器或**混音器**并将其发送到您想要的端口。混音器可以处理发送/接收多个 MIDI 事件。但是在java中，sound API并没有太大的进步，但是在c++中你可以使用python的大库，它可以帮助你获取频率或电压。在java中，功能有限，有时你需要添加外部库或预制FFt（我讨厌这部分）。就是这样！祝你好运

# android - onSaveInstanceState/onRestoreInstanceState 和查看状态

> ID：13356342
> 
> 赞同：1
> 
> 时间：2012-11-13T06:20:19.667
> 
> 标签：android, android-activity, savestate

根据 onSaveInstanceState 的文档：

> 默认实现负责处理大多数 UI 每个实例的状态

和 onRestoreInstanceState：

> 此方法的默认实现会恢复以前冻结的任何视图状态

我不确定这到底是什么意思。这是否意味着在被杀死并现在恢复后返回时，显示给用户的 UI 屏幕会自动恢复其所有数据？如果是这样，我没有看到。除非我自己 setContentView，否则我得到的只是一个空屏幕。

我误解了意思吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T06:28:33.210

默认实现将适用于每个定义了 id 的小部件。例如，如果您有一个 EditText，并且您将提供其 id，那么当 Activity 由于方向和相同而被杀死时，系统将保存其值，并在重新创建 Activity 时恢复 EditText 值。

**编辑**

如果您有一个基本布局，并且如果您在视图层次结构中动态添加一些视图，那么您将必须自己处理保存状态并恢复状态。同样，当您的活动将被重新创建时，将调用活动的 onCreate() 方法，因此在此方法中首先设置您正在创建和动态添加的所有添加视图，然后您可以根据您的意图检查额外的参数正在进入 onCreate() 方法。这个额外的参数与您在方法中添加额外的参数完全相同`onSaveInstanceState`。

所以像下面这样实现。

```
int x = 10;
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt("x", x);
} 
```

在 onCreate 方法中，您可以获得如下 x 参数

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.xxx);

    if(savedInstanceState.containsKey("x")) {
        x = savedInstanceState.getInt("x");
    }
} 
```

# iphone - Xcode 中的共享类操作？

> ID：13356344
> 
> 赞同：2
> 
> 时间：2012-11-13T06:20:39.423
> 
> 标签：iphone, objective-c, ios, xcode

我有两个视图控制器 Viewcontroller1 和 viewcontroller2 我必须全局声明一个变量并在两个视图中使用它，但是我必须将视图 1 中的变量值带入 view2

这怎么可能 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T06:30:40.560

您可以在 Class 中声明它，`AppDelegate`也可以制作 Singlton Instance，以便此 innstacnec 可以通过 App lifeCycvle 持续存在。

这是您如何做同样的事情的方法。

1)在这些 ViewController 中的`AppDelegate.h` Accesss it in`ViewController1`和 ViewController2 `Just Import that`AppDelegate Header 中声明实例。

2）第二种方式创建单例对象

```
 @interface SomeManager : NSObject
   + (KTMySingleton *)sharedManager;
 @end

 static KTMySingleton* _mySharedManager;
 @implementation SomeManager
 + (KTMySingleton*)sharedManager
 {
@synchronized(self) {   
  if(_mySharedManager==nil){
  NSLog(@"Shared Object is Created");
      [[self alloc] init];
  _sharedManager.purchasableProducts = [[NSMutableArray alloc] init];               

 }
    return _sharedManager ;
 }
//Here you can use this `purchaseableProducts` throughout the App in any class just calling the `sharedManager` Method. 
```

[这是您可以了解如何创建 Singlgton 类和对象的链接](http://www.johnwordsworth.com/2010/04/iphone-code-snippet-the-singleton-pattern/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T06:25:04.670

您可以创建一个共享类并在其中声明变量，然后您可以在 viewcontroller1 和 2 中导入 sharedClass.h 并使用它

共享类 *shrdclass;

注意：您也可以将变量的值传递给一个视图到另一个视图，而无需使用共享类，请在[此处查看](https://stackoverflow.com/questions/10574163/xcode-4-3-passing-variables-between-views)

# c++ - 多线程 gdb - 在崩溃前跟踪变量更改

> ID：13356345
> 
> 赞同：1
> 
> 时间：2012-11-13T06:20:42.130
> 
> 标签：c++, multithreading, gdb

我正在努力调试我正在处理的多线程 c++ 程序。它似乎在代码中的同一位置崩溃，但只是在某些时候，由于变量被不同的线程释放，导致程序在之后被指针访问时崩溃。

正因为如此，我没有办法单步调试程序。有什么方法可以跟踪 gdb 中特定变量的所有实例，并跟踪对该内存位置执行了哪些特定操作（这样我就可以看到谁释放了它，以及在哪里释放）？或者有没有其他好的方法来调试这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T06:45:37.220

> 我正在努力调试我正在处理的多线程 c++ 程序

使用 GDB（或任何其他调试器）调试多线程程序*很*困难。

对于您给出的具体示例：一个`free()`线程正在访问另一个线程仍在访问的内存，[Valgind](http://valgrind.org)和[AddressSanitizer](http://code.google.com/p/address-sanitizer/)可能会产生比 GDB 更好的结果。

# python - python NLTK中的平滑

> ID：13356348
> 
> 赞同：4
> 
> 时间：2012-11-13T06:20:59.637
> 
> 标签：python, nltk, smoothing

我在 python 中使用朴素贝叶斯分类器进行文本分类。是否有任何平滑方法可以避免 python NLTK 中看不见的单词出现零概率？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:51:09.617

我建议将所有频率低（特别是 1）的单词替换为`<unseen>`，然后在此数据中训练分类器。对于分类，您应该查询模型以查找`<unseen>`不在训练数据中的单词。

# c - 使用花括号 {} 分隔 C 中的逻辑模块是一种好习惯吗？

> ID：13356357
> 
> 赞同：1
> 
> 时间：2012-11-13T06:21:55.097
> 
> 标签：c, coding-style

我最近发现我的一位程序员同事写了如下内容：

```
int foo()
{
    //some code
    {
        //some code
    }
    //some code
    {
        //some code
    }
    //some code
} 
```

如您所见，内部的两对花括号仅用于在逻辑上分隔两个代码块。虽然我写 C 有一段时间了，但我从未真正见过这种风格。这在 C 语言中被认为是一种好的风格，或者至少是一种可接受的风格吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T06:25:53.183

我不认为这是一种特别好的风格——它多余地增加了缩进，为一条线留下了更少的空间，同时它降低了可读性。如果您有多个“逻辑模块”，则可以使用空行将它们分开，例如

```
/* declarations */
char *str;
size_t size;

/* allocate memory */
size = 16;
str = malloc(size);
if (str == NULL) {
    return -1;
}

/* do actual task */ 
```

等等。或者，如果你有**大量**代码，你应该考虑*重构*它并将它们分解成单独的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T08:47:49.913

一般来说，不，这不是好的风格。此外，在内部范围内声明变量将（不应该）导致更有效的堆栈使用：任何体面的编译器都会优化它。自从允许在任何地方声明变量的 C++ 在 90 年代初开始流行以来，他们就能够做到这一点。

然而，在内部范围内声明变量将减少其他范围的“命名空间污染”。根据经验，变量最好只在使用它的范围内可见。

因此，在我看来，在一些例外情况下，大括号会被认为是好的风格。最明显的例子是 C90 中的 switch 语句：

```
switch(x)
{
  case 1:
  {
    /* now you can declare local variables here */
    int my_local;

    break;
  }

  case 2:
  {
    int some_other_local_only_related_to_case_2;

    break;
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T06:24:48.410

这通常是为了限制变量的范围，并且可以使您的程序使用更少的内存。

编辑：正如@DCoder 指出的那样，您的编译器现在很可能使这变得不必要了，也许您的朋友正在使用他很久以前就需要它时学到的技术。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-13T06:26:34.787

大括号引入了一个嵌套作用域，例如，您可以在其中再次使用相同的变量名，我从来没有真正需要它，我认为它显示出糟糕的编码并使阅读代码的人感到困惑。

```
int foo()
{
    int a;
    //some code
    {
        int a;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-13T08:55:14.833

如果您放入 {} 的代码可以独立存在，则可能值得将该代码放入一个函数中，即使它是一个 void 函数。这样，该函数中使用的变量的命名空间就受到了限制，并且您将代码分割成更易于管理的部分。我一直这样做是为了组织我的代码并保持其可读性/易于维护。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-13T06:41:54.860

如果您将这些大括号的数量保持在较低水平，那没关系，我已经做到了。

但是，现在我想说**将代码分解成更小的函数**，并带有名称/描述。这是一个更好的方法。

# javascript - oracle ADF jsf页面中的javascript

> ID：13356360
> 
> 赞同：-1
> 
> 时间：2012-11-13T06:22:19.853
> 
> 标签：javascript, css, jsf, jdeveloper, oracle-adf

如何在 jsf ADF Oracle 中将 java 脚本文件添加到内联或页脚？

我通常使用 IE 条件注释来修复 IE 问题。但是还有比我下面使用的条件更多的方法：

```
<!--[if lt IE 8]>
    <link href="ie7.css" rel="stylesheet" type="text/css" />
<![endif]--> 
```

我如何在 Oracle ADF 中应用这些条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T08:45:19.223

这是一个关于如何在 ADF 中使用 java 脚本的非常简单的示例。 [http://sameh-nassar.blogspot.be/2010/02/javascript-functions-sample.html](http://sameh-nassar.blogspot.be/2010/02/javascript-functions-sample.html)

# java - GUI Java 程序 - 绘画程序

> ID：13356365
> 
> 赞同：6
> 
> 时间：2012-11-13T06:22:46.577
> 
> 标签：java, swing, user-interface, paint

我一直在试图找出我的代码有什么问题。这个想法是创建一个小的 Paint 程序，并具有红色、绿色、蓝色和清除按钮。我有我能想到的一切让它工作，但无法弄清楚代码有什么问题。该程序打开，然后立即关闭。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Paint{

    public static void main(String[] args){
            gui g = new gui();
            g.setVisible(true);

    }

}

 public class gui extends JComponent implements ActionListener{
    JButton red, green, blue, clear;
    Image image;
    Graphics2D draw;
    int x, y, prevX, prevY;

    gui(){
            JFrame frame = new JFrame("Paint");
            Container content = frame.getContentPane();
            content.setLayout(new BorderLayout());
            setDoubleBuffered(false);

            JPanel panel = new JPanel();
            content.add(panel, BorderLayout.SOUTH);
            panel.setPreferredSize(new Dimension(32, 68));
            panel.setMinimumSize(new Dimension(32, 68));
            panel.setMaximumSize(new Dimension(32, 68));

            red = new JButton("Red");
            green = new JButton("Green");
            blue = new JButton("Blue");
            clear = new JButton("Clear");

            red.setPreferredSize(new Dimension(50, 16));
            green.setPreferredSize(new Dimension(50,16));
            blue.setPreferredSize(new Dimension(50, 16));

            panel.add(red);
            panel.add(green);
            panel.add(blue);
            panel.add(clear);

            red.addActionListener(this);
            green.addActionListener(this);
            blue.addActionListener(this);
            clear.addActionListener(this);

            frame.setSize(500, 500);

            addMouseListener(new MouseAdapter(){
                    public void mousePressed(MouseEvent e){
                            prevX = e.getX();
                            prevY = e.getY();
                    }

            });

            addMouseMotionListener(new MouseMotionAdapter(){
                    public void mouseDragged(MouseEvent e){
                            x = e.getX();
                            y = e.getY();
                            draw.drawLine(prevX, prevY, x, y);
                            repaint();
                            prevX = x;
                            prevY = y;

                    }

            });

    }

    public void paintComponent(Graphics g){

           if(image==null){
                    image = createImage(getSize().width, getSize().height);

                    draw = (Graphics2D)image.getGraphics();

                    draw.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

                    draw.setPaint(Color.white);
                    draw.fillRect(0, 0, getSize().width, getSize().height);
                    draw.setPaint(Color.black);
                    repaint();
           }

            g.drawImage(image, 0, 0, null);

    }

    public void actionPerformed(ActionEvent e) {
        if( e.getSource()==red){
            draw.setPaint(Color.red);
            repaint();
        }
        if( e.getSource()==green){
            draw.setPaint(Color.green);
            repaint();
        }
        if( e.getSource()==blue){
            draw.setPaint(Color.blue);
            repaint();
        }
        if( e.getSource()==clear){
            draw.setPaint(Color.white);
            draw.fillRect(0, 0, getSize().width, getSize().height);
            draw.setPaint(Color.black);
            repaint();
        }

    }

 } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T06:34:58.183

您必须将可见性属性与框架和面板一起使用，例如

```
frame.setVisible(true); 
```

行`g.setVisible(true);` 不适用于您，因为您已经扩展了类 jcomponent 并且您正在使用框架并且未设置其属性以将其设置为可见。

您的面板也会出现同样的问题，因此您也必须设置其属性，即

```
panel.setVisible(true); 
```

这是添加这些属性后正在运行的完整代码

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.RenderingHints;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionAdapter;

import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Paint{

    public static void main(String[] args){
            gui g = new gui();
            g.setVisible(true);

    }

}

 class gui extends JComponent implements ActionListener{
    JButton red, green, blue, clear;
    Image image;
    Graphics2D draw;
    int x, y, prevX, prevY;

    gui(){
            JFrame frame = new JFrame("Paint");
            Container content = frame.getContentPane();
            content.setLayout(new BorderLayout());
            setDoubleBuffered(false);

            JPanel panel = new JPanel();
            content.add(panel, BorderLayout.SOUTH);
            panel.setPreferredSize(new Dimension(32, 68));
            panel.setMinimumSize(new Dimension(32, 68));
            panel.setMaximumSize(new Dimension(32, 68));

            red = new JButton("Red");
            green = new JButton("Green");
            blue = new JButton("Blue");
            clear = new JButton("Clear");

            red.setPreferredSize(new Dimension(50, 16));
            green.setPreferredSize(new Dimension(50,16));
            blue.setPreferredSize(new Dimension(50, 16));

            panel.add(red);
            panel.add(green);
            panel.add(blue);
            panel.add(clear);

            panel.setVisible(true);

            red.addActionListener(this);
            green.addActionListener(this);
            blue.addActionListener(this);
            clear.addActionListener(this);

            frame.setSize(500, 500);

            frame.setVisible(true)            ;

            addMouseListener(new MouseAdapter(){
                    public void mousePressed(MouseEvent e){
                            prevX = e.getX();
                            prevY = e.getY();
                    }

            });

            addMouseMotionListener(new MouseMotionAdapter(){
                    public void mouseDragged(MouseEvent e){
                            x = e.getX();
                            y = e.getY();
                            draw.drawLine(prevX, prevY, x, y);
                            repaint();
                            prevX = x;
                            prevY = y;

                    }

            });

    }

    public void paintComponent(Graphics g){

           if(image==null){
                    image = createImage(getSize().width, getSize().height);

                    draw = (Graphics2D)image.getGraphics();

                    draw.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

                    draw.setPaint(Color.white);
                    draw.fillRect(0, 0, getSize().width, getSize().height);
                    draw.setPaint(Color.black);
                    repaint();
           }

            g.drawImage(image, 0, 0, null);

    }

    public void actionPerformed(ActionEvent e) {
        if( e.getSource()==red){
            draw.setPaint(Color.red);
            repaint();
        }
        if( e.getSource()==green){
            draw.setPaint(Color.green);
            repaint();
        }
        if( e.getSource()==blue){
            draw.setPaint(Color.blue);
            repaint();
        }
        if( e.getSource()==clear){
            draw.setPaint(Color.white);
            draw.fillRect(0, 0, getSize().width, getSize().height);
            draw.setPaint(Color.black);
            repaint();
        }

    }

 } 
```

# c# - 无法将数字转换为月份的代码

> ID：13356366
> 
> 赞同：0
> 
> 时间：2012-11-13T06:22:58.837
> 
> 标签：c#, if-statement

这是我的源代码，一切都很好，直到我得到输出并且我无法让它工作。Visual Studio 不喜欢我在输出部分中的内容，标记为 //OUTPUT。

我需要添加或更改什么才能使其正常工作？

```
static void Main(string[] args)
{
    int monthNumber;
    string monthName;

    //INPUT
    Console.WriteLine("Please enter the number of the month");
    monthNumber = Convert.ToInt16(Console.ReadLine());

    //PROCCESSESS
    if (monthNumber == 1)
    {
        monthName = "January";
    }
    else if (monthNumber == 2)
    {
        monthName = "February";
    }
    else if (monthNumber == 3)
    {
        monthName = "March";
    }
    else if (monthNumber == 4)
    {
        monthName = "April";
    } 
    else if (monthNumber == 5)
    {
        monthName = "May";
    }
    else if (monthNumber == 6)
    {
        monthName = "June";
    }
    else if (monthNumber == 7)
    {
        monthName = "July";
    }
    else if (monthNumber == 8)
    {
        monthName = "August";
    }
    else if (monthNumber == 9)
    {
        monthName = "September";
    }
    else if (monthNumber == 10)
    {
        monthName = "October";
    } 
    else if (monthNumber == 11)
    {
        monthName = "November";
    }
    else if (monthNumber == 12)
    {
        monthName = "December";
    }

    //space to increase readability
    Console.WriteLine(Environment.NewLine);

    //OUTPUT
    Console.WriteLine("Month:" + monthName);
    Console.ReadLine();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T06:25:26.163

`monthName`必须在使用前进行初始化。因此，您可以将声明行更改为

```
string monthName = null; 
```

那是因为代码不能保证`monthName`被分配。例如，如果输入数字是 13 怎么办？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T07:09:40.013

你有很多`else if`，但最后，`else`没有一个`if`适用的情况。因此，编译器不能保证`monthName`曾经分配过。也许用户输入了`"28"`？

使用包含十二个部分和一个部分的`switch`语句会更好看。`case``default`

而且，月份名称内置在框架中。所以`using System.Globalization;`你可以简单地说

```
monthName = CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(monthNumber); 
```

或者

```
monthName = CultureInfo.InvariantCulture.DateTimeFormat.GetMonthName(monthNumber); 
```

您也可以`DateTime`直接从输入中获取：

```
DateTime dateTime = DateTime.ParseExact(Console.ReadLine(), "%M", null); 
```

然后

```
monthName = dateTime.ToString("MMMM"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T07:40:12.283

*   a) 声明一个变量
*   b）如果您使用月份名称，并且想要一些特定的名称，请尝试使用枚举。真的很容易和功能。

您可以按照自己对这些名称/标记进行编号的速度来设置自己的名称/标记。

例如。

> enum Days {Sat=1, Sun, Mon, Tue, Wed, Thu, Fri};

# google-maps - 检查一个点是否在路线中 - 谷歌地图

> ID：13356367
> 
> 赞同：3
> 
> 时间：2012-11-13T06:23:10.230
> 
> 标签：google-maps, google-maps-api-3

当用户请求路线时，我需要在谷歌地图中突出显示相关位置。我找到了几个步骤来实施。却一时间卡住了。

假设我们有大量点（几千个）的集合。我们需要找出它们中的哪些位于（动态）路线中。

Step1：首先根据路线过滤掉点。这意味着，找到路线的 max-lat、min-lat、max-lon、min-lon 并将此过滤器应用于我们的组。这样我们就可以找出较少数量的合格候选人。

Step2：我们仍然可以使用名为 RouteBoxer 的实用程序库过滤掉不必要的点。（http://google-maps-utility-library-v3.googlecode.com/svn/tags/routeboxer/1.0/examples/routeboxer-v3.html）

Step3：经过以上2个步骤，我们将点数从几千个减少到几百个。这些点将在该路线周围的某个地方，尽管不完全在其上。这就是我面临挑战的地方。如何检查这些点是否在该路线上？我不认为让所有点都成为一条路线并检查距离是一个好的解决方案（是的，它会起作用。但是..）因为路线可以是任何距离。有没有办法检查点和路线之间的最小距离？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:29:52.560

是的，有 dijkstra 或 kruskal 算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:40:22.273

RouteBoxer 将为您提供多边形或[LatLngBounds](https://developers.google.com/maps/documentation/javascript/reference#LatLngBounds)列表（如果提供多边形，则无论如何您都可以从中获得 LatLngBounds）。您可以循环遍历每个点，并使用 LatLngBounds 类的 contains 方法检查该点是否位于任何这些边界上。

# java - 如何封装一个集合？

> ID：13356368
> 
> 赞同：1
> 
> 时间：2012-11-13T06:23:25.903
> 
> 标签：java

```
import java.util.ArrayList;
import java.util.HashSet;
import java.util.Set;

public class A
{
    private Set<String> users = new HashSet<String>();

    public Set<String> getUsers()
    {
        return users;
    }

    public void setUsers( Set<String> users )
    {
        this.users.clear();
        if( users != null )
        {
            this.users.addAll( users );
        }
    }

    public static void main( String[] args )
    {
        A a = new A();
        Set<String> temp = new HashSet<String>();
        temp.add( "a1" );
        temp.add( "a2" );
        a.setUsers( temp );
        Set<String> previousUsers = a.getUsers();
        System.out.println( previousUsers.size() ); //output 2

        temp.add( "a3" );
        a.setUsers( temp );
        System.out.println( previousUsers.size() );//output 3, how to make it still 2?
    }
} 
```

问题：如果我想`previuosUsers`在调用新的 setUsers 后仍然保留旧值，我应该如何修改这个程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T06:28:12.190

尝试：

```
public Set<String> getUsers()
{
    return (Set<String>)users.clone();
} 
```

> 如果我希望 previuosUsers 在调用新 setUsers 后仍保留旧值。

这意味着在其中修改的集合`setUsers`不能与 所指向的集合相同`previousUsers`。因此，在`getUsers`返回集合的副本而不是对同一集合的引用。这就是[克隆](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#clone%28%29)所做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T06:30:01.580

您可以改用此构造函数[`public HashSet(Collection<? extends E> c)`](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html#HashSet%28java.util.Collection%29)，而不仅仅是直接将返回分配给`previousUsers`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T06:32:54.653

```
import java.util.ArrayList;
import java.util.HashSet;
import java.util.Set;

public class A
{
    private Set<String> users = new HashSet<String>(), prevUsers = new HashSet<String>();    
    public Set<String> getUsers()
    {
        return users;
    }

    public void setUsers( Set<String> users )
    {
        this.prevUsers = new HashSet<String>(users); // saves a copy of users in prevUsers
        this.users.clear();
        if( users != null )
        {
            this.users.addAll( users );
        }
    }
    public Set<String> getPrevUsers() { 
        return this.prevUsers; 

    }
    public static void main( String[] args )
    {
        Set<String> previousUsers = a.getPreviousUsers();
        System.out.println( previousUsers.size() ); //output 2

        temp.add( "a3" );
        a.setUsers( temp );
        System.out.println( a.getPreviousUsers.size() );//output 3, how to make it still 2?
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T06:33:04.937

这是你期待的吗

```
 public Set<String> getUsers()
{
    Set<String> users1 =  new HashSet<String>();
    users1.addAll(users);
    return users1;
}

public void setUsers( Set<String> users )
{
    this.users = users;

} 
```

# wordpress - 我应该安装一个新的 wordpress 来实现这一点吗？

> ID：13356382
> 
> 赞同：1
> 
> 时间：2012-11-13T06:25:14.023
> 
> 标签：wordpress

我有一个名为[http://mysite.com](http://mysite.com)的 wordpress 网站（仅作为示例），我想要一个链接[http://blog.mysite.com](http://blog.mysite.com)，我将如何仅使用一个 wordpress 安装来配置该链接（相同的 wordpress 安装在[http://mysite.com ）当然还有](http://mysite.com)[http://mysite.com](http://mysite.com)使用的同一个数据库。我应该只使用插件还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T11:36:50.583

添加一个类型为[http://blog.mysite.com](http://blog.mysite.com)的子域，指向类似于[http://mysite.com](http://mysite.com)的位置。这样，两个域都将指向同一个 wordpress 安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:00:06.470

如果您想为两个不同的站点使用 1 个 wordpress 安装，请尝试使用 [http://wordpress.org/support/forum/multisite](http://wordpress.org/support/forum/multisite)。否则，我会同意上面的答案，您只需要在您的主机控制面板中设置一个简单的重定向。

# c++ - 字符串的 C++ 逐字符比较

> ID：13356386
> 
> 赞同：1
> 
> 时间：2012-11-13T06:25:49.907
> 
> 标签：c++, string, comparison

我正在尝试对 C++ 入门课程进行字符串比较检查；这是一门在线课程，不幸的是，讲师反应不佳。对于当前的实验室，我需要对字符串数据执行一些操作。

目前，我正在检查一个字符串是否有任何重复字符，如果发现重复，则删除当前位置的重复字符并将该字母的一个副本移动到字符串的开头。这只是为了找到第一个双精度。

我已经设置了一个基本计数器来在字符串中移动以查找匹配项，检查存储的字符（在每次迭代时更新）到字符串中的当前位置。

我尝试了多个字符串函数（将当前字符串`inputString[i]`与以前的字符串函数进行比较，存储为第二个字符串 tempStore），但这些函数总是给出字符转换错误。我已经尝试了以下方法，但这现在给出了一个错误：“从'char'到' `const char*`'的无效转换。

`inputString`由用户给出，`testA`定义`testB`为 char 类型

有任何想法吗？

```
while (opComplete == false) {

    if (i == 0) {
        i++;
    }

    else if (i == inputString.size()) {
        //Not Found
        opComplete = true;
    }

    else if (i > 0) {

        testA = inputString[i-1];
        testB = inputString[i];

        if (strcmp(testA,testB) != 0) {
            i++;
        }

        else {
            inputString.insert(0,inputString[i]);
            inputString.erase(i,1);
            inputString.erase(i-1,1);
            opComplete = true;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T06:33:03.600

您的问题出在这一行：

```
inputString.insert(0,inputString[i]); 
```

`std::string.insert()`您在此处调用的函数具有以下签名：

```
string& insert ( size_t pos1, const char* s ); 
```

所以它需要一个`const char`指针。但是，您正在给它`inputString[i]`. 的返回值`std::string.operator[]`是一个引用（如此[处](http://en.cppreference.com/w/cpp/string/basic_string/operator_at)），因此是错误。但是，当您到达您的 时`else`，您的`testB`变量中已经有了所需的字符，因此您只需将行更改为

```
 inputString.insert(0, &testB); 
```

您也不能将普通`char`的 s 传递给`strcmp`. 你可以使用`operator==`, 或者，在你的情况下，`operator!=`虽然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T06:49:14.483

您使用的方法不正确，请在[此处](http://www.cplusplus.com/reference/string/string/insert/)`insert`查看其参考以获取可能的参数。

```
while (opComplete == false)
{
    if (i == 0)
    i++;

    else if (i == inputString.size())
    opComplete = true;

    else if (i > 0) {
    char testA = inputString[i-1];
    char testB = inputString[i];

    if(testA!=testB)
    i++;

    else {
        inputString.insert(0,&testB); //Problem Corrected here.
        inputString.erase(i,1);
        inputString.erase(i-1,1);
        opComplete = true;
    }
    }
} 
```

# java - 如何实例化地图 >?

> ID：13356388
> 
> 赞同：0
> 
> 时间：2012-11-13T06:26:02.293
> 
> 标签：java, map, constructor

我想知道如何使用 Java 实例化 Map < String, TreeMap < Integer, Integer >>。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T06:30:31.063

您需要使用`Map`接口的实现类之一，例如`HashMap`或`TreeMap`如下：

```
 Map < String, TreeMap < Integer, Integer > > myMap = 
                          new HashMap< String, TreeMap < Integer, Integer > >(); 
```

或者

```
 Map < String, TreeMap < Integer, Integer > > myMap = 
                          new TreeMap< String, TreeMap < Integer, Integer > >(); 
```

要添加值：

```
 //Instantiate TreeMap element as below  
    TreeMap< Integer, Integer > elemMap = new TreeMap<Integer, Integer>();

    //add elements to tree map
    elemMap.put(1, 100);

    //put the tree map in the map
    myMap.put("firstElem", elemMap); 
```

# php - 从ajax结果下的第二个事件返回值

> ID：13356390
> 
> 赞同：0
> 
> 时间：2012-11-13T06:26:11.417
> 
> 标签：php, jquery, ajax, json

这有可能实现吗？我已经从 ajax 结果中得到了我想要的值，但是在第二部分我希望那个值从另一个事件中返回。目前它返回“未定义”。请在下面查看我的代码。任何想法？提前致谢！:)

```
 $(document).ready(function() {   
      $.ajax({ 
      type: 'GET',
      url: 'myURL.php', 
      data: dataString,
      success: function (data) { 
           console.log(data);
           var obj = $.parseJSON(data);
           if(!$.isEmptyObject(obj))
           {
                $.each(obj, function(index, record) {
                    $('#updateRecord').append('<input type="text" id="regionDesc" value="' + record.firstValue + '"><button type="submit" id="submit" data-theme="b">Update</button>'); 
                });
           }

           $("#update").click(function() {
            var regionDesc= $("regionDesc").val();
            console.log(regionDesc);
       });
     });
 }); 
```

解决方案 ：

```
 $(document).ready(function() {   
      $.ajax({ 
      type: 'GET',
      url: 'myURL.php', 
      data: dataString,
      success: function (data) { 
           console.log(data);
           var obj = $.parseJSON(data);
           if(!$.isEmptyObject(obj))
           {
                $.each(obj, function(index, record) {
                    $('#updateRecord').append('<input type="text" id="myID" value="' + record.firstValue + '"><button type="submit" id="submit" data-theme="b">Update</button>'); 
                });
           }

           $("#update").click(function() {
            var myID= $("#myID").val();
            console.log(myID);
       });
     });
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T06:32:09.877

改变这个`var regionDesc = $("regionDesc").val();`

对此`var regionDesc = $("#regionDesc").val();`

如果您使用的是类属性，那么这个`var regionDesc = $(".regionDesc").val();`

# java - 如何在for循环中使用数组来计算最小值？

> ID：13356400
> 
> 赞同：1
> 
> 时间：2012-11-13T06:26:59.683
> 
> 标签：java, arrays, for-loop

我正在尝试使用数组，但我不确定这是否是正确的方法。

我希望第一个和第二个整数输入相互比较，然后如果有更多它们相互比较。

所以这里是一段代码。

```
for(int ii = 1, j = 0; j <= copySel ; ii++, j++) {     
             int x = 0;
             int[x] check;
                // Prompt as follows
                System.out.print("Enter value " + ii + ": ");
                try {
                    c = Get();
                }
                catch (InputMismatchException e) {
                    // Display the following text in the event of an invalid input
                    System.out.println("Invalid input!");
                    ii--; x--;
                } check = c; x++;    

                System.out.print(check + " "+ x);
        } 
```

我的实际格式还不错。我需要尝试根据用户输入的整数数找到最小值

```
static int Get()
    {
        Scanner intFind = new Scanner(System.in);
        int select;
        select = intFind.nextInt();
        return select;
    } 
```

这是获取（） ^

我不能连续使用 min(x, y) 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T06:34:15.633

```
int min=a[0];

for(int i=1;i<n;i++)
{
    if(a[i] < min) 
         min = a[i];
}

System.out.println("The min is "+min); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T07:36:59.047

```
 System.out.print("Enter value " + ii + ": ");
 int min = Get();
 int c = 0;
 for(int ii = 1, j = 0; j < copySel ; ii++, j++) { 

            // Prompt as follows
            System.out.print("Enter value " + ii + ": ");
            try {
                c = Get();
            }
            catch (InputMismatchException e) {
                // Display the following text in the event of an invalid input
                System.out.println("Invalid input!");
                ii--;
            } min = Math.min(min, c);   

            System.out.print("minimum is:"+ min);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T06:43:48.143

我没有得到你想要做什么，但这里有一些你可能会考虑修复的错误。如果 check 是一个数组，则必须将其初始化为：

```
int[] check; 
```

get() 是否会返回一个整数数组，如果无法使 check = c，则必须将 c 的内容复制或克隆到 check 中，如下所示：

```
check = (int[])c.clone(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T06:54:43.073

如果您有一个整数数组，您可以执行以下操作

```
 Integer [] arr = {5,2,3,4,5,6,7,8};
  List<Integer> list = new ArrayList<Integer>(Arrays.asList(arr));
  Collections.sort(list);
  System.out.println("Minimum "+list.get(0)); ; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T07:04:19.343

```
 Scanner in = new Scanner(System.in);
 System.out.println("Enter the integers: ");
 String s = in.nextLine();
 string[] str = s.plit(" ");
 int[] a = new a[str.length];
 for(int i =0; i< str.length; i++)
 {
     a[i] = Integer.parseInt(str[i]);
 }
 //Madar's code
 int min=a[0];

for(int i=0;i<a.length;i++)
{
    min = Math.min(a[i], min);
}

System.out.println("The min is "+min); 
```

# java - Shiro 和 Tomcat AccessLogValve

> ID：13356404
> 
> 赞同：1
> 
> 时间：2012-11-13T06:27:50.430
> 
> 标签：java, jakarta-ee, tomcat, shiro

我使用`Shiro`（v1.2.1）作为安全框架，它运行良好，但是在`Tomcat`（v7.0.32）的访问日志中，当经过身份验证的用户访问任何资源时，您无法让远程用户登录。`Shiro`对于我的示例 Web 应用程序，我使用了SVN 示例[repo](https://svn.apache.org/repos/asf/shiro/trunk/samples/web/)中提供的默认配置。

```
 127.0.0.1 - - [13/Nov/2012:08:22:55 +0200] "POST /pacs/login.jsp HTTP/1.1" 302 - // User here not logged
127.0.0.1 - - [13/Nov/2012:08:22:55 +0200] "GET /pacs/ HTTP/1.1" 200 821 // Here user is accessing protected page, so we got permission. 
```

有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:19:06.690

我不确定这是否是官方解决方案，但它是一个适合我的解决方案：

对于 AccessLogValve 模式，使用

```
%u - Remote user that was authenticated (if any), else '-' 
```

这将打印“猜测的用户名”。如果你问谷歌tomcat是如何猜测用户名的，你会发现这样的：

```
For the user name, the manager uses the Session.getPrincipal() if available; 
if not, it tries the following Session attribute names:
  Login
  User
  userName
  UserName
  Utilisateur
using the given case, lower case, and upper case.  Failing that, it searches for
attributes that are instances of java.security.Principal or
javax.security.auth.Subject. 
```

就我而言，我只是修改了登录代码以将用户对象写入会话。Tomcat 将在该对象上调用 .toString() 以打印“猜测的用户名”。

如果 .toString() 的结果不是你想要的，你也可以尝试使用

```
%{xxx}s xxx is an attribute in the HttpSession 
```

在您的 AccessLogValve 配置中，以便从您的会话中打印另一个属性。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:28:47.470

如果您使用 Shiro 的本机会话管理， session.getPrincipal() 将按预期工作。如果您希望在默认会话管理中看到此调用工作，请打开 Jira 问题，我们将查看是否可以尽快修复它。

# c++ - 十六进制到十进制，char 给出奇怪的结果？

> ID：13356405
> 
> 赞同：0
> 
> 时间：2012-11-13T06:27:54.093
> 
> 标签：c++, c

我遇到了一个非常奇怪的问题。我想我在这里遗漏了一些非常基本的东西。当我这样做时：

```
 char buffer[1] = {0xA0};
    int value=0;
    value = (int)buffer[0];
    printf("Array : %d\n",value); 
```

我得到的结果为-96，这不应该发生。它应该给我 160，因为十六进制数 0xA0 表示十进制的 160。当我将小值放入像 0x1F 这样的缓冲区时，它工作正常。谁能告诉我我在这里错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T06:29:08.197

`char`签名 -128 到 127

声明`buffer`为`unsigned char`或强制转换为`unsigned char`：

```
char buffer[1] = {0xA0};
int value=0;
value = (unsigned char)buffer[0];
printf("Array : %d\n",value); 
```

# wpf - 操作事件导致 UI 冻结或停止响应

> ID：13356410
> 
> 赞同：2
> 
> 时间：2012-11-13T06:28:11.917
> 
> 标签：wpf, touchscreen

我使用了两个滑块控件并使用 ManipulationDelta 事件来处理多点触控事件。并且根据滑块的移动会发生一些过程。现在的问题是当我通过触摸屏移动滑块时，对象的画布移动会冻结。

我在某处读到，优化外部代码将起作用。但就我而言，我无法在事件之外更改我的代码。

这是我的代码，

```
private void slider_ManipulationDelta(object sender, ManipulationDelataEventArgs e)
{
 slider.value += e.DeltaManipulation.Translation.X;
 Canvas.SetLeft(rectangle, slider.value *2);
} 
```

提前致谢。

# xcode - NSLog 给了我无法纠正的警告

> ID：13356413
> 
> 赞同：7
> 
> 时间：2012-11-13T06:28:39.713
> 
> 标签：xcode, cocoa, nslog, format-specifiers

我的 Mac OS X 应用程序中有以下代码行：

```
NSLog(@"number of items: %ld", [urlArray count]); 
```

我收到警告：“格式指定类型'long'，但参数的类型为'NSUInteger'（又名'unsigned int'）”

但是，如果我将代码更改为：

```
NSLog(@"number of items: %u", [urlArray count]); 
```

我收到警告：

格式指定类型“unsigned int”，但参数的类型为“NSUInteger”（又名“unsigned long”）

所以我把它改成

```
NSLog(@"number of items: %u", [urlArray count]); 
```

但我收到警告：格式指定类型“无符号长”但参数类型为“NSUInteger”（又名“无符号整数”）

如何设置我的 NSLog 使其不产生警告？如果我遵循 Xcode 的建议，我只会陷入更改格式说明符的无限循环，但警告永远不会消失。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-13T06:32:20.280

是的，这很烦人。我相信这是一个 32/64 位的东西。最简单的方法就是将其转换为 long：

```
NSLog(@"number of items: %lu", (unsigned long)[urlArray count]); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T06:32:26.223

通用应用程序的[可移植性指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Cocoa64BitGuide/Introduction/Introduction.html)建议在这种情况下进行转换。

```
NSLog(@"number of items: %ld", (unsigned long)[urlArray count]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-28T19:19:21.080

这里提到了另一个选项：[NSInteger and NSUInteger in a mixed 64bit / 32bit environment](https://stackoverflow.com/a/20362087/445215)

```
NSLog(@"Number is %@", @(number)); 
```

# oracle - XPATH 祖先或自我

> ID：13356415
> 
> 赞同：-1
> 
> 时间：2012-11-13T06:28:41.583
> 
> 标签：oracle, xpath

Oracle 数据库 10g 企业版 10.2.0.5 - 64bi

我正在尝试将我发现的元素的层次结构输出到使用**祖先或自我的**根，但它根本不起作用：只需打印所有元素（

好吧，我有什么：

1) 像这样的 XML 文件。

```
<Root>
  <Element1 id="UniqueId1">
    <SubElement1 id="UniqueId2"/>
    <SubElement2 id="UniqueId3">
      <LeafElement1 id="UniqueId4"/>
      <LeafElement1 id="UniqueId5"/>
    </SubElement2>
  </Element1>
  <Element2 id="UniqueId6" AttributeToCheck="true">
    <SubElement1 id="UniqueId7">
      <LeafElement1 id="UniqueId8"/>
      <LeafElement1 id="UniqueId9"/>
    </SubElement1>
  </Element2> 
</Root> 
```

2）我的 XPATH 字符串：

```
//*[@id and contains(@id, "UniqueId8")]/ancestor-or-self::* 
```

3）我想得到这样的结果（从找到的元素到根）：

```
<Root>
  <Element2 id="UniqueId6" AttributeToCheck="true">
    <SubElement1 id="UniqueId7">
      <LeafElement1 id="UniqueId8"/>
    </SubElement1>
  </Element2> 
</Root> 
```

顺便说一句， // *[@id and contains(@id, "UniqueId8")]/ancestor-or-self::* /@id 工作正常。

**有谁知道如何解决这个问题或只是使用另一个操作而不是祖先或自我？**

更新：

我只是执行这个：

```
DECLARE
  v_xml XMLTYPE;
BEGIN
    SELECT xmltype('<Root>
               <Element1 id="UniqueId1">
            <SubElement1 id="UniqueId2"/>                                           <SubElement2 id="UniqueId3">
                                            <LeafElement1 id="UniqueId4"/>
                                            <LeafElement1 id="UniqueId5"/>
                                        </SubElement2>
                                    </Element1>
                                    <Element2 id="UniqueId6" AttributeToCheck="true">
                                        <SubElement1 id="UniqueId7">
                                            <LeafElement1 id="UniqueId8"/>
                                            <LeafElement1 id="UniqueId9"/>
                                        </SubElement1>
                                    </Element2>
                                </Root>')
    into v_xml
    from dual;

    select extract(v_xml, '//*[@id="UniqueId9"]/ancestor-or-self::*')
    into v_xml
    from dual;

    dbms_output.put_line(v_xml.getStringVal());

END; 
```

但结果我得到了一些奇怪的东西：

```
<Root>
  <Element1 id="UniqueId1">
              <SubElement1 id="UniqueId2"/>
            <SubElement2 id="UniqueId3">
                                     <LeafElement1 id="UniqueId4"/>
                                                 <LeafElement1 id="UniqueId5"/>
     </SubElement2>
    </Element1>
    <Element2 id="UniqueId6" AttributeToCheck="true">
    <SubElement1 id="UniqueId7">
    <LeafElement1 id="UniqueId8"/>
    <LeafElement1 id="UniqueId9"/>
    </SubElement1></Element2>
</Root>
<Element2 id="UniqueId6" AttributeToCheck="true">
    <SubElement1 id="UniqueId7">
        <LeafElement1 id="UniqueId8"/>
        <LeafElement1 id="UniqueId9"/>
    </SubElement1>
</Element2>

<SubElement1 id="UniqueId7">
    <LeafElement1 id="UniqueId8"/>
    <LeafElement1 id="UniqueId9"/>
</SubElement1>

<LeafElement1 id="UniqueId9"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:15:09.187

XPath 只允许您选择输入文档中的节点，它不允许您更改文档的结构或创建一个新的文档，其中节点正在更改（添加、删除、操作）。因此，一旦您使用路径表达式选择根元素并输出结果，您当然会输出根元素及其包含的所有节点。

所以 XPath 不能做你想做的工作，因为你需要使用 XQuery 或 XSLT；这样，您将能够创建一个新文档，其中包含您不感兴趣的节点被删除。[片段输入 xhtml 以分离带有祖先节点的 xhtml 文件 deails](https://stackoverflow.com/questions/13040516/fragment-input-xhtml-to-seperate-xhtml-files-with-ancestor-nodes-deails/13046672#13046672)是一个示例，其中 XSLT 用于过滤掉那些不是某个节点的祖先或子节点的根元素的后代节点。它比您需要的更多，因为它对多个节点执行此操作并创建多个结果文档，但部分代码正在执行您想要的操作。但是，我不知道您是否可以在 Oracle 的上下文中使用 XSLT 或 XSLT 2.0，所以我不会尝试使该代码适应您的输入示例，除非您明确指出您可以使用 XSLT 以及您可以使用哪个版本的 XSLT在 Oracle 的上下文中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T10:27:56.513

正如 Martin 所说，您不能使用 XPath 来构造输入中不存在的树。

还有一点：注意 XPath 表达式选择节点。将其视为返回一组指向输入文档中节点的指针。对于运行 XPath 查询的客户端环境来说，通过显示以节点为根的子树来显示这些节点是很常见的。但是 XPath 表达式并没有选择整个树，它只选择了根，节点下方子树的显示可能会让您感到困惑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T10:52:11.423

试试这个 XSL 方法：

```
SQL> with xml as (select xmltype('<Root>
  2    <Element1 id="UniqueId1">
  3      <SubElement1 id="UniqueId2"/>
  4      <SubElement2 id="UniqueId3">
  5        <LeafElement1 id="UniqueId4"/>
  6        <LeafElement1 id="UniqueId5"/>
  7      </SubElement2>
  8    </Element1>
  9    <Element2 id="UniqueId6" AttributeToCheck="true">
 10      <SubElement1 id="UniqueId7">
 11        <LeafElement1 id="UniqueId8"/>
 12        <LeafElement1 id="UniqueId9"/>
 13      </SubElement1>
 14    </Element2>
 15  </Root>') xml from dual),
 16  xsl as (select xmltype('
 17  <xsl:stylesheet version="1.0"
 18   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 19   <xsl:template match="node()|@*">
 20    <xsl:copy>
 21     <xsl:apply-templates select="*[descendant-or-self::*[contains(@id,''UniqueId8'')]]|@*"/>
 22    </xsl:copy>
 23   </xsl:template>
 24  </xsl:stylesheet>') xsl from dual)
 25  select xm.xml.transform(xs.xsl)
 26    from xml xm, xsl xs;

XM.XML.TRANSFORM(XS.XSL)
--------------------------------------------------------------------------------

<Root>
 <Element2 id="UniqueId6" AttributeToCheck="true">
  <SubElement1 id="UniqueId7">
   <LeafElement1 id="UniqueId8">
   </LeafElement1>
  </SubElement1>
 </Element2>
</Root> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T12:41:12.943

nick **xtender**的家伙使用XPATH 找到了很好的解决方案，它确实有效：

```
 with t_xml as ( select xmltype('
    <Root>
      <Element1 id="UniqueId1">
        <SubElement1 id="UniqueId2"/>
        <SubElement2 id="UniqueId3">
          <LeafElement1 id="UniqueId4"/>
          <LeafElement1 id="UniqueId5"/>
        </SubElement2>
      </Element1>
      <Element2 id="UniqueId6" AttributeToCheck="true">
        <SubElement1 id="UniqueId7">
          <LeafElement1 id2="UniqueId8"/>
          <LeafElement1 id="UniqueId9"/>
        </SubElement1>
      </Element2> 
    </Root>') x from dual)
    select 
       t_xml.*
      ,updatexml(x,'//*[not (descendant-or-self::*[@id2="UniqueId8"])]',chr(10)) upd
    from t_xml 
```

# java - Java中的继承，如何设计没有自己属性的类

> ID：13356420
> 
> 赞同：3
> 
> 时间：2012-11-13T06:29:05.140
> 
> 标签：java, oop, uml

我不确定如何在 Java 中表示包含继承的模型。我有三个从超类继承的类，但其中一个没有与超类不同的属性，也没有方法，例如：

```
public class Animal{
  public int a;
  public int b;
  public int c;
}

public class Cat extends Animal (){
  public int d;
  public int e;
}

public class Dog extends Animal {
  public int f;
  public int g;
}

public class Cow extends Animal {
//it doesn't have different attributes or methods than Animal
} 
```

（上面的属性和类只是示例）我应该如何设计？拥有一个仅从超类扩展而没有自己的属性的类是否正确？还是我应该省略 Cow 类并从 Animal 实例化它？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T06:41:06.330

动物类最好是一个**抽象**类，具有所有动物共享的通用方法。然后您可以创建一个类 Cow 扩展抽象类，以便您可以调用那些常用方法（例如吃喝，并为奶牛指定方法，例如 moo()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T06:33:05.473

可以创建一个扩展 Animal 的 Cow 类，即使它不添加任何属性。即使 Cow 没有向 Animal 类添加任何特定于作为 Cow 的行为或数据，Cow 仍然是一种动物。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:45:05.110

不应在动物类中实现“牛”的三个原因：

1.  动物这个词本身就是一个抽象（类应该是抽象的，不可能创造一个新的）。
2.  当你定义一个类时，你定义了一个类型（cow 是一个具体的类型，即使没有属性或方法）。如有必要，您还可以使用“instance of”来消除歧义
3.  最后也是最重要的一点，当你使用继承时，你应该始终遵守替换原则（所有引用“Animal”的元素，都应该将“Animal”替换为“cat”、“dog”或“Cow”）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T06:36:28.637

我认为您应该创建一个代表`Cow`对象的新类。考虑几个月后你想添加一些新的行为......没有这个`Cow`类，你需要重写你的代码的某些部分......你很可能已经测试过的部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T06:42:23.503

正如@Chris 所说，创建一个 Cow 类是可以的，再加上想象一下，如果你有一种喂养动物的方法，你的方法看起来像这样：

```
public void feedAnimal(Animal animal); 
```

现在，如果您不将牛扩展到动物类，则必须创建第二种方法来喂牛：

```
public void feedCow(Cow cow); 
```

即使很难，它也是一种动物

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-13T07:00:05.943

如果您有除 Cat、Dog 和 Cow 之外的其他动物，并且您通过实例化 Animal 类为这些动物使用对象，那么另一个没有带来任何新东西的 Cow 类没有意义（不是新字段，没有新方法，没有被覆盖方法）。

另一方面，您只有 Cat、Dog 和 Cow 类型的 Animals，那么您应该使 Animal 类成为抽象类（或接口以获得更大的灵活性）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-13T09:39:06.653

恕我直言，如果您的`Cow`课程与`Animal`您的设计有问题相同。

我的意思是，只有在您真正需要添加功能时，您才`Animal`需要一个类和几个扩展类，而不是扩展一个类。`BasicAnimal`

或者另一种选择是将您`Animal`的类转换为接口（或抽象类）并实现/扩展它。

在抽象类中，您应该只实现常用方法。但是如果你发现 的行为`Cow`是相同的`Animal`可能会更好地走这`BasicAnimal`条路......

# asp.net - 无法从 asp.net 中的数据库中检索值

> ID：13356422
> 
> 赞同：0
> 
> 时间：2012-11-13T06:29:12.773
> 
> 标签：asp.net, web-config, dataset, connection-string

我正在做第一个 asp.net 应用程序，现在需要将其连接到 SQL（使用 MS SQL 2008），但我无法从表中获取任何值。

我的 web.config 是：

```
<add name="MainConnectString" connectionString="Data Source=LUCKYY-PC;initial catalog=testDbName;uid=sa;Password=123456;Integrated Security=True" providerName="System.Data.SqlClient" /> 
```

在后端代码中：

```
using (SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["MainConnectString"].ConnectionString))
            {
                string query = "select * from [testTableName]";
                SqlCommand cmd = new SqlCommand(query, conn);
                conn.Open();
                string numRows = cmd.ExecuteScalar().ToString();
                SqlDataAdapter da = new SqlDataAdapter(query, conn);
                DataSet ds = new DataSet();
                da.Fill(ds);
                dataGrid.DataSource = ds;
                conn.Close();                
            } 
```

dataGrid 是我在此代码的 ascx 页面上定义的数据网格名称。

但**'ds' 以 0**计数出现，因此数据网格为空白，我不知道我是否遗漏了代码或 web.config 中的任何内容...任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T06:57:37.417

dataGrid.DataBind() - 填充数据网格，感谢 Mohsen

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T09:15:57.647

检查您的连接字符串。我认为您在编写数据源时犯了错误，我认为您使用的是 SQL server 2005/2008/2008 R2，因此数据源必须设置为**.(DOT)**或**localhost**。试试这个可能对你有帮助......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T16:56:52.533

您的代码中有两个问题：

1.  正如@ethorn10 评论的那样，`ExecuteScalar()`当你使用它时，它不会给你你所期望的。将您的查询更改为：

    ```
    string query = "select count(*) from [testTableName]"; 
    ```

2.  您忘记调用*datagrid* `DataBind()`方法来显示从 中选择的记录`datasource`。

    ```
    dataGrid.DataSource = ds;
    dataGrid.DataBind(); 
    ```

如果您是 asp.net 的新手，我强烈建议您学习和使用[Entity 框架](http://www.asp.net/entity-framework)，而不是像您一样使用旧的 ADO.net 代码。

# css - css如何只为第一个制作粗体字体 放

> ID：13356423
> 
> 赞同：2
> 
> 时间：2012-11-13T06:29:20.927
> 
> 标签：css

我有 2 套或更多`<UL>`套，只想将第一个 UL`<a>`设置为粗体。其实这是一个有多个子菜单的菜单，我只想把父链接加粗。

我知道可以通过添加更多的 ID 或类来完成，但这不是一个选项，只想尝试 css 方法。

```
<ul class="menu">
    <li class="collapsed first">
        <a title="Mechanical products" href="1">Mechanical Products</a>
    </li>
  <li class="collapsed">
    <a title="Chemicals" href="2">Chemicals</a>
  </li>
  <li class="expanded active-trail">
    <a title="Instrumentation" href="3">Instrumentation</a>
    <ul class="menu">
        <li class="leaf first">
            <a title="Control valves FISHER" href="4">Control Valves</a>
        </li>
      <li class="expanded active-trail">
        <a class="active" title="Corrosion Monitoring System" href="5">Corrosion Monitoring</a>
        <ul class="menu">
            <li class="leaf first">
                <a title="Access Fitting Assemblies" href="6">Fitting Assemblies</a>
            </li>
          <li class="leaf last">
            <a title="Coupon Holders, Coupons &amp; Probes" href="7">Holders,Coupons</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
    <li class="collapsed">
        <a title="Mechanical products2" href="8">Mechanical Products2</a>
    </li>
</ul> 
```

在这个例子中，只有“机械产品”、“化学品”、“仪器”和“机械产品2”应该加粗。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T06:32:48.993

使用第一个子选择器：`>`

```
.menu > li {
    font-weight: bold;
} 
```

并不是说如果您需要支持 IE6，则必须手动执行，因为 IE6 不支持`>`选择器：

```
.menu li a {
    font-weight: bold;
}
.menu li ul li a {
    font-weight: normal;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T06:33:28.867

它可能会这样做......

```
ul.menu li a
{
    font-weight:bold;
}

ul.menu li ul li a
{
    font-weight:normal;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T06:35:26.623

您必须使用子选择器并通过给它一些类来使顶层`<ul>`唯一：

```
ul.top-level > li > a {
   font-weight: bold;
}​ 
```

**演示：http: [//jsfiddle.net/kJJw9/](http://jsfiddle.net/kJJw9/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T06:33:51.103

ul.menu li.collapsed a{font-weight:bold;}

# objective-c - iOS Instant Messaging App 服务器是否应该在前台发送 APNS（新消息）

> ID：13356425
> 
> 赞同：1
> 
> 时间：2012-11-13T06:29:25.167
> 
> 标签：objective-c, ios, push-notification, apple-push-notifications

我正在创建一个即时消息应用程序。想象像Skype或雅虎信使这样的东西。

现在我们的服务器仅在应用程序处于后台/多任务/最小化时发送推送通知（针对新消息）。但是有时服务器无法检测到我们的应用程序在后台，所以有时即使应用程序在后台它也不会发送推送通知。

现在我在想我们的服务器应该总是向设备发送推送通知，即使它在前台（所以所有消息都会有一个推送通知），但我们不会在前台显示它（apns）。这样，服务器就不需要检测应用程序是否在后台。

你觉得这样可以吗，还是总是发送apns会有副作用，你看，如果你在前台聊天一整天，客户端会收到apns但不显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:09:12.877

如果有效载荷不同，发送大量通知而不阅读它是没有问题的。

当在前台收到通知时，您不会被迫显示带有警报的通知。

# j - J 中数字列表的连续连续平均值

> ID：13356427
> 
> 赞同：1
> 
> 时间：2012-11-13T06:29:50.583
> 
> 标签：j

我正在尝试在 J 中生成谢尔宾斯基三角形（混沌游戏版本）。在给定 3 个顶点的情况下，生成它的一般迭代算法是：

```
point = (0, 0)
loop:
    v = randomly pick one of the 3 vertices
    point = (point + v) / 2
    draw point 
```

我正在尝试在 J 中创建惯用版本。到目前为止，这就是我所拥有的：

```
load 'plot'

numpoints =: 200000
verticesx =: 0         0.5     1
verticesy =: 0 , (2 o. 0.5) ,  0

rolls =: ?. numpoints$3

pointsx =: -:@+ /\. rolls { verticesx
pointsy =: -:@+ /\. rolls { verticesy

'point' plot pointsx ; pointsy 
```

这行得通，但我不确定我是否理解`-:@+ /\.`. 我认为它只是因为数学上的怪癖才起作用。我试图制作一个二元函数，它可以像in`average`一样通过点列表作为累积运行，但我无法得到类似的东西。我该怎么做？`+``+/ \ i. 10`

## 更新：

需要明确的是，我正在尝试创建一个`avg`可以以这种方式使用的二进制函数：

```
avg /\ randompoints 
```

`avg =: -:@+`由于某种原因，不适用于此。所以我认为我遇到的问题是正确定义具有`avg`适当可变性的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T12:02:09.680

为了尽可能接近算法，我可能会做这样的事情：

```
v =: 3 2$ 0 0 0.5, (2 o. 0.5), 1 0
ps =: 1 2 $ (?3) { v
next =: 4 :'y,((?x){v) -:@+ ({: y)'

ps =: (3&next)^:20000 ps
'point' plot ({.;{:) |: ps 
```

但你的版本效率更高*。*

# android - 我如何更改按钮 onClick 和 android 的位置？以及如何在java中添加计时器并控制时间？

> ID：13356430
> 
> 赞同：-1
> 
> 时间：2012-11-13T06:30:15.497
> 
> 标签：android, random, onclick, position, exchange-server

如果我只使用 int x = r.nextInt(480); 和 int y = r.nextInt(800); 按钮离开屏幕，但我尝试使用 int x = r.nextInt(480 - buttonHeight); 和 int y = r.nextInt(800 - buttonHeight); ，所以它给了我错误请任何人都可以帮助我吗？请详细定义每一件事，我是一个新的Android开发者！

```
Button btn;

@Override
protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tuchme);

        btn = (Button) findViewById(R.id.btn);

        btn.setOnClickListener(this);

}

public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()) {
        case (R.id.btn): {
              Random r = new Random();
   int x = r.nextInt(480 - buttonWidth); //btnWidth cannot be resolved to a varriable.
   int y = r.nextInt(800 - buttonHeight);

                btn.setX(x);      
                btn.setY(y);   

        }

        } 
```

如果我只使用 int x = r.nextInt(480); 和 int y = r.nextInt(800); 按钮离开屏幕，但我尝试使用 int x = r.nextInt(480 - buttonHeight); 和 int y = r.nextInt(800 - buttonHeight); ，所以它给了我错误请任何人都可以帮助我吗？请详细定义每一件事，我是一个新的Android开发者！如果你能定义我如何在屏幕上添加计时器以及如何控制它，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T06:39:42.243

在您的代码中 buttonHeight 和 buttonWidth 不是整数。您必须首先将它们声明为`int buttonHeight = 1`and `int buttonWidth = 1`。你必须这样做，否则 eclipse 不知道这个新的`buttonWidth`

要将变量 buttonHeight 和 buttonWidth 设置为按钮的实际高度和宽度，请在声明它们后执行以下操作（上图）

```
buttonHeigt = button.getHeight();
buttinWidth = button.getWidth(); 
```

你应该在这里阅读变量

*   [http://docs.oracle.com/javase/tutorial/java/javaOO/variables.html](http://docs.oracle.com/javase/tutorial/java/javaOO/variables.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T06:32:53.843

您尚未在代码中的任何地方`buttonWidth`声明。`buttonHeight`您试图引用不存在的变量。

要么使它们成为局部变量或类级别变量，并确保它们具有分配给它们的值。

# upgrade - 通过自制软件升级 postgresql 9.1.2 (9.1.3) -> 9.2.1

> ID：13356436
> 
> 赞同：0
> 
> 时间：2012-11-13T06:31:12.867
> 
> 标签：upgrade, uninstallation, homebrew, postgresql-9.1, postgresql-9.2

在一轮升级中，我最终（从字面上看，这是最后一次升级）通过自制软件更新了 postgresql。它安装了 PostgreSQL 9.2.1。

我无法让它运行：

```
Dart:~ Arta$ pg_ctl -D /usr/local/var/postgres -l /usr/local/var/postgres/server.log start
server starting
Dart:~ Arta$ psql -d postgres
psql: could not connect to server: No such file or directory
Is the server running locally and accepting
connections on Unix domain socket "/tmp/.s.PGSQL.5432"? 
```

不明白我到底在做什么，我尝试了警告中的“开始”、“停止”、“登录时加载”等命令行，但 postgresql 无法启动，所以我卸载了 9.2.1 版本。

现在，我无法运行我原来的 brew 安装（9.1.2、9.1.3）。建议我如何启动我原来的 postgres 会很棒。我被困住了。

还：

```
$ which psql 
/usr/bin/psql 
```

这不应该，而且在更新之前肯定不是这种情况——我通过自制软件在干净的 Mac 上安装了 postgres（它现在运行 OS X 10.7.5）。不知道如何摆脱这种情况。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:54:16.963

可能您无法在由 9.1 版创建的旧数据库（/usr/local/var/postgres）上运行 postgres 9.2

# javascript - JQuery 加载/获取执行脚本

> ID：13356437
> 
> 赞同：2
> 
> 时间：2012-11-13T06:31:13.587
> 
> 标签：javascript, jquery, userscripts

我正在尝试“劫持”网站的用户界面。

目标：我不想在选项卡或窗口中打开网页链接，而是想在主页的网格上打开它们。我可能会使用类似 gridster 的东西。基本上我会为每个网格元素放置一个网页。

以下代码演示了我正在尝试做的事情。对于stackoverflow，它将主页包装在一个可隐藏的div中，该div由角落中的一个小“按钮”控制。单击链接将在同一窗口中打开它。要返回“主页”，只需再次单击该按钮。

效果与标签非常相似，但目标是让标签保持更多标签自由，并允许更好的组织。一个可以有多个“按钮”以允许多个链接都在同一个“页面”上。（考虑它的一种方式是一种迷你标签功能，您可以通过非常小的按钮访问标签）。

我实际上希望每页显示多个元素。以下代码仅显示一个问题。

无论如何，真正的问题不是布局而是 jquery.load 不执行脚本。这是一个主要问题，因为某些网页根本无法工作。由于这些脚本被注入到域中，因此不存在跨域问题。问题是脚本要么没有执行，要么没有正确执行。在过去的 8 个小时里，我尝试了各种方法，但都没有奏效。

此代码的目标是采用 youtube（或堆栈交换）之类的东西并将链接合并到单个页面（如果需要）。想想通过在网格布局中的同一页面上拥有多个视频（没有可见的所有额外信息）来浏览 youtube 视频的能力。并不是说一个人一定想一次观看 10 个视频，但它比打开 10 个标签更有效。

另一种思考方式是，如果您必须在站点之间不断翻转，您可以轻松地将一个站点加载到一个网格元素中，并将另一个站点加载到同一屏幕上的另一个网格元素中。

人们甚至可以拥有一种非常简单的导航类型的界面来轻松“滚动”浏览网站。想想一个有很多帖子的论坛。不必阅读一长串列表，您可以设计一个界面，一次只显示一个帖子，并使用左右按钮在帖子中移动。（显然，这些方法需要对每个站点进行特定编码，但大部分代码会重叠。以下代码几乎可以在任何站点上使用（至少那些不使用绝对选择器的站点），并且可以轻松访问“主页”只需单击按钮）

如果它不能用于包含脚本的页面，那么至少对我而言，它的用处是极其有限的。我无法理解为什么它不起作用。沙盒 iframe 应该可以工作，但与 jquery.load/get 有相同的问题。在使用 getscript 加载 html 后，我尝试执行每个脚本，但无济于事。

```
// ==UserScript==
// @name        Stackanator
// @namespace   http://userscripts.org/
// @version     1.0
// @require     https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js
// @include     http://stackoverflow.com/
// ==/UserScript==
var $ = unsafeWindow.jQuery;

// Wrap main div with a div and style it to be floating
$('body').wrap('<div id="CBP" />');
$('<div id="CBPA"></div>').insertBefore($('#CBP'));
$('#CBP').css({'position': 'absolute', 'top': '0px', 'left': '0px', 'width' : '100%', 'height' : '100%', 'z-index': '9999', 'background-color': 'white'});

// Create a small toggle box to show and hide the main div 
$('#CBPA').attr('style', 'margin:0px;padding:0px;height:10px;width:10px;background-color:green;position:fixed;display:block;left:0px;right:0px;float:left;z-index:30000;');

// Setup toggle button
toggleCBPAs = false;
toggleCBPA = false;
$('#CBPA').click(function() {
    if (toggleCBPAs == false) return;
    if (toggleCBPA == true)
    {
        toggleCBPA = false;
        $(this).css('background-color', 'red');
        $('#CBP').css('visibility', 'visible');
    } else
    {
        toggleCBPA = true;
        $(this).css('background-color', 'green');
        $('#CBP').css('visibility', 'hidden');
    }
});

// Take over click's
$('body A').live('click', function() { 
        toggleCBPAs = true;
        var url = $(this).attr("href");         
        name = url.split("/"); 
        debugger;
        //var p = $('<iframe id="CBF" src="'+$(this).attr("href")+'" sandbox="allow-forms allow-same-origin allow-scripts"></iframe>').insertAfter($('#CBP'));

        $('<div id="CBG"></div>').insertAfter($('#CBP'));
        $("#CBG").load(url);

        toggleCBPA = true;
        $(this).css('background-color', 'green');
        $('#CBP').css('visibility', 'hidden');

        return false; 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:05:20.980

**首先，您不能将 stackoverflow.com（以及几乎所有大型网站）放入`<iframe>`.**

所有主要网站都旨在防止被陷害，以确保其页面不会被用于欺诈目的。所以会有一些脚本来检测页面是否显示在一个框架中，如果是，它会做一些自杀的工作，让页面消失。

**其次，您不能使用`$.load()`将整个页面放在另一个 div 中。**

尽管`$.load()`'s 方法可以显式地`eval()`在每个块上执行代码，但它可能会破坏事件处理程序和一些`$(selector)`引用。

有些事件（如 onload）永远不会被触发，有些`$(selector)`是错误的（例如，`$('#id')`当稍后加载的元素与页面上已经存在的元素共享相同的 id 时会失败。）

而且`eval()`使用与页面上运行的所有其他代码相同的代码上下文，它会同时相互冲突，因此不能将其视为任何方面的解决方案。

**第三，虽然 DOM 看起来不错，但您不能`innerHTML`用作 的替代品`$.load()`**

根据[div 的 innerHTML 创建的 script 标签不起作用](https://stackoverflow.com/questions/13390588/script-tag-create-with-innerhtml-of-a-div-doesnt-work)，`innerHTML`将不会执行该脚本。而我之前提供*的可能*解决方案被证明是不够的。

**所以最终的答案是，使用常用方法使用脚本是不可能完成的。**

一些想法：

1.  构建您自己的浏览器，`window.top === null`即使在`<iframe>`
2.  设法编写一个非常聪明的脚本，它会自动修改检索到的代码（html、js、css），使其与当前页面冲突，然后将页面嵌入到`<div>`.
3.  管理一种方法来检测防止被陷害的代码，并将其删除。然后将处理后的代码放入一个空的`<iframe>`.

# sql - 在 MS SQL 中比较两列数据并为每个场景定义一个名称

> ID：13356439
> 
> 赞同：2
> 
> 时间：2012-11-13T06:32:06.673
> 
> 标签：sql, sql-server, case

我有下表称为 CustomerDetails

```
*Status Div Code     CustomerName                    SalesQty2012   SalesQty2011*
ACTIVE  1   CA830   Assadi SuperMarket                      0   643.75
ACTIVE  1   CA825   Askanani SuperMarket                    517.25  0
ACTIVE  4   CA822   Ashraf SuperMarket                     0    127.2083
ACTIVE  4   CA739   Al Zaqazeeq Grocery                     50  211.9167
ACTIVE  1   CA736   Al Zahra SuperMarket                    0   178
ACTIVE  1   CA835   Atlas Al Khaleej Grocery                293 452.4583
ACTIVE  1   CA846   Al Jeel Al Saad Grocery                 51  0
ACTIVE  4   CA927   Al Fazeel SuperMarket - Khorfakkan      127.375 168.1667
ACTIVE  2   CS082   Sea Side Grocery                       28.5 105
ACTIVE  2   CS111   Shairal Firdous Grocery                0    125.25 
```

我正在尝试编写一个查询，该查询为具有以下条件的客户趋势提供一个额外的列

```
Case When *SalesQty2012* is higher than *SalesQty2011* THEN "Increasing"
Case When *SalesQty2011* is higher than *SalesQty2012* THEN "Decreasing"
Case When *SalesQty2011* is equal 0 (No Sales) AND  *SalesQty2012* grater than 0 THEN "NEW"
Case When *SalesQty2012* is equal 0 (No Sales) AND  *SalesQty2011* grater than 0 THEN "Lost" 
```

这是我写的最后两个条件没有正确应用的地方

```
 Select top 10 [Status],DivisionCode,CustomerCode,CustomerName,
SalesQty2012=ISNULL(SalesQty2012,0),
SalesQty2011=ISNULL(SalesQty2011,0),
CustomerTrend= ( CASE WHEN SalesQty2012>SalesQty2011 THEN 'Increasing'
WHEN SalesQty2012<=SalesQty2011 THEN 'Decreasing'
WHEN SalesQty2011=0 and SalesQty2012>0 THEN 'NEW'
WHEN (SalesQty2011>0 and SalesQty2012 =0) THEN 'Lost'  else 'Nothing' END)
from dbo.CustomerMasterSalesView

order by customerTrend 
```

我需要您的帮助来告诉我如何编写查询来处理 New and Lost 场景的案例。

非常感谢阿里

* * *

我在上面的查询中遇到了一个问题，我需要确保 salesQty2012 期间与 SalesQty2011 相同，因为 2012 年的销售仍未结束，我的比较将是错误的。我的问题是如何编写查询以根据当前时间段带来 salesqty 2011。我的原始查询以获取上述数据：

```
 Status,CustomerGroupCode,CustomerGroup,CustomerCode,CustomerName,DivisionCode,DivisionName,SalesLocation,RouteManagerCode,RouteManager,ChannelCode,Channel,CustomerCategoryCode,CustomerCategory,InvRoute,CustomerPeymentTermsCode,CustomerPeymentTerms,CreditDays,CreditLimit,LastInvoiceDate,SalesQty2012,SalesQty2011
ACTIVE,NULL,NO GROUP                           ,CA001  ,A L S Super Market                           ,1,DUBAI               ,Deria Dubai                        ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,36,CS,CASH,0,0,27/10/2012 0:00,160,187
ACTIVE,NULL,NO GROUP                           ,CA003  ,A.M.M Super Market.  0                       ,2,ABU DHABI           ,Abu Dhabi                          ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,4,CS,CASH,0,0,06/11/2012 0:00,69.625,96.4583333
ACTIVE,NULL,NO GROUP                           ,CA005  ,Aalian Super Market                          ,2,ABU DHABI           ,Abu Dhabi                          ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,12,CS,CASH,0,0,27/08/2012 0:00,118.125,259.25
ACTIVE,NULL,NO GROUP                           ,CA006  ,Aawan S/M.                                   ,2,ABU DHABI           ,Abu Dhabi                          ,SDD20,NULL,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,99,CS,CASH,0,0,NULL,NULL,NULL
ACTIVE,NULL,NO GROUP                           ,CA008  ,Abbas Bin Moideen Super Market               ,2,ABU DHABI           ,Abu Dhabi                          ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,4,CS,CASH,0,0,07/11/2012 0:00,185.625,188
ACTIVE,NULL,NO GROUP                           ,CA013  ,Abdu Grocery   0                             ,1,DUBAI               ,Bur Dubai                          ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,44,CS,CASH,0,0,24/04/2011 0:00,NULL,10
ACTIVE,NULL,NO GROUP                           ,CA016  ,Abdu Rahiman Al Haj                          ,1,DUBAI               ,Dubai                              ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,28,CS,CASH,0,0,29/10/2012 0:00,306.625,351.875
ACTIVE,NULL,NO GROUP                           ,CA017  ,Abdu Rahman  Khaleefa0                       ,1,DUBAI               ,Deria Dubai                        ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,36,CS,CASH,0,0,14/10/2012 0:00,60,133.2499999
ACTIVE,NULL,NO GROUP                           ,CA018  ,Abdul  Khalfan Mohd Grocery   0              ,1,DUBAI               ,Sharjah                            ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,37,CS,CASH,0,0,25/08/2011 0:00,NULL,21
ACTIVE,NULL,NO GROUP                           ,CA019  ,Abdul Aziz Super Market                      ,2,ABU DHABI           ,Abu Dhabi                          ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,4,CS,CASH,0,0,08/10/2012 0:00,179.25,134.875
ACTIVE,NULL,NO GROUP                           ,CA020  ,Abdul Aziz Mohd.Sadiq Food Stuff             ,1,DUBAI               ,Sharjah                            ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,41,CS,CASH,0,0,27/08/2012 0:00,10,2
ACTIVE,NULL,NO GROUP                           ,CA021  ,Abdul Gafoor Bava   0                        ,2,ABU DHABI           ,Abu Dhabi                          ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,12,CS,CASH,0,0,24/09/2012 0:00,40,87.1666666
ACTIVE,NULL,NO GROUP                           ,CA022  ,Happy Down  Gr                               ,1,DUBAI               ,Dubai                              ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,36,CS,CASH,0,0,31/10/2012 0:00,80,162.2083332
ACTIVE,NULL,NO GROUP                           ,CA025  ,Abdul Hamid Abdul Karim Grocery  0           ,1,DUBAI               ,Dubai                              ,SDD20,NULL,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,99,CS,CASH,0,0,12/10/2008 0:00,NULL,NULL
ACTIVE,NULL,NO GROUP                           ,CA027  ,Abdul Majid S/M - Baniyas                    ,2,ABU DHABI           ,Abu Dhabi                          ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,5,CS,CASH,0,0,30/10/2012 0:00,750,824.125
ACTIVE,NULL,NO GROUP                           ,CA029  ,Yasin Ali Reza                               ,1,DUBAI               ,Deria Dubai                        ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,22,CS,CASH,0,0,29/10/2012 0:00,264.125,373.9999999
ACTIVE,NULL,NO GROUP                           ,CA030  ,Abdul Rahman Abdulla Al Haj                  ,1,DUBAI               ,Dubai                              ,SDD20,NULL,SDD11,IMPULSE CUSTOMERS             ,GR   ,Group                              ,99,CS,CASH,0,0,NULL,NULL,NULL
ACTIVE,NULL,NO GROUP                           ,CA032  ,Al Zajal Gr#2                                ,3,Al Ain              ,Al Ain                             ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,10,CS,CASH,0,0,25/10/2012 0:00,98,112.2083333
ACTIVE,NULL,NO GROUP                           ,CA034  ,Abdul Rasool Waswasi Grocery                 ,1,DUBAI               ,Dubai                              ,SDD20,NULL,SDD11,IMPULSE CUSTOMERS             ,GR   ,Group                              ,99,CS,CASH,0,0,NULL,NULL,NULL
ACTIVE,NULL,NO GROUP                           ,CA036  ,Abdul Raza Ghanim Grocery0                   ,1,DUBAI               ,Deria Dubai                        ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,22,CS,CASH,0,0,04/03/2008 0:00,NULL,NULL 
```

这里是查询

```
 Select top 20 Status=(CASE WHEN a.LOCK=0 THEN 'ACTIVE'
WHEN a.LOCK=1 THEN 'INACTIVE' END), 
CustomerGroupCode=ISNULL((SELECT TOP 1 ITcode FROM BCGMAST WHERE ITTAG='U' AND ITCODE=a.CGPCODE),null), 
CustomerGroup=ISNULL((SELECT TOP 1 ITDESC FROM BCGMAST WHERE ITTAG='U' AND ITCODE=a.CGPCODE),'NO GROUP'),                               
a.accode as CustomerCode,
a.name as CustomerName,
DivisionCode=ISNULL((SELECT ccode FROM CCMAST WHERE CCMAST.CCODE=a.CCODE),NULL),    
DivisionName=ISNULL((SELECT TOP 1 CCDES FROM CCMAST WHERE CCMAST.CCODE=a.CCODE),'NO DIVISION'),    
SalesLocation=ISNULL((SELECT TOP 1 ITDESC FROM BCGMAST WHERE BCGMAST.ITTAG='L' AND BCGMAST.ITCODE=a.SLLOC),'NO SALES LOCATION'),                              
RouteManagerCode=ISNULL(a.ROUTEMANAGER,NULL),
RouteManager=(CASE WHEN a.ROUTEMANAGER='SDD11'  THEN 'SAJI M ABRAHAM'   
WHEN a.ROUTEMANAGER='SDD01' THEN 'EHSAAN JAMEEL' 
WHEN a.ROUTEMANAGER='SDD12' THEN 'DANISH KHAN'  END), 
ChannelCode=ISNULL((SELECT TOP 1 GRPCD FROM ACGROUP WHERE ACGROUP.GRPCD=a.GRPCD),NULL),
Channel=ISNULL((SELECT TOP 1 GPSNM FROM ACGROUP WHERE ACGROUP.GRPCD=a.GRPCD),'NO CHANNEL'),
CustomerCategoryCode=ISNULL((SELECT TOP 1 ITcode FROM BCGMAST WHERE BCGMAST.ITTAG='Z' AND BCGMAST.ITCODE=a.custcate),null), 
CustomerCategory=ISNULL((SELECT TOP 1 ITDESC FROM BCGMAST WHERE BCGMAST.ITTAG='Z' AND BCGMAST.ITCODE=a.custcate),'NO CATEGORY'), 
InvRoute=a.Route,
CustomerPeymentTermsCode=a.SEQ1,
CustomerPeymentTerms=(CASE WHEN a.SEQ1='CS' THEN 'CASH'    
WHEN a.SEQ1='CR' THEN 'CREDIT'    
WHEN a.SEQ1='CB' THEN 'BILL TO BILL' END),    
a.crdays as CreditDays,
a.crlimit as CreditLimit,
LastInvoiceDate=(SELECT max(S.InvoiceDate)from Sales_Data08 S where S.PartyCode= a.ACCODE),
SalesQty2012=(SELECT Sum(S.SALESQTY)from Sales_Data S where S.PartyCode = a.ACCODE and InvoiceDate BETWEEN '2012-01-01' AND '2012-12-31'),
SalesQty2011=(SELECT Sum(S.SALESQTY)from [GRP022011].[dbo].[Sales_Data]  S where S.PartyCode = a.ACCODE and InvoiceDate BETWEEN '2011-01-01' AND '2011-12-31')
--TotalSalesAMT= (SELECT max(STHEAD.BILLDATE)from sthead where STHEAD.CLSUP = a.ACCODE),

From ACCMST a full join accsub b on    a.accode=b.accode where  a.GRPCD LIKE 'SDD%' and a.LOCK=0 
```

从上面的视图我使用数据从下面的查询中显示客户销售趋势

```
SELECT
       [PartyCode]
      ,[PartyName]
      ,[DivisionName]
      ,[SalesLocation]
      ,[InvRoute]
      ,[RouteManager]
      ,[ChannelName]
      ,[CustomerGroupName]
      ,[CustomerCategory]
      ,[InvoiceDate]
      ,[BrandName]
      ,[CATEGORY]
      ,[ItemCode]
      ,[ItemName]
      ,[SALESQTY]
      ,[SALESAMT]
      ,[NetSales]
  CustomerTrend= 
    (
    CASE
      WHEN SQ.SalesQty2011 = 0 and SQ.SalesQty2012 > 0 THEN 'NEW'
      WHEN SQ.SalesQty2011 > 0 and SQ.SalesQty2012 <= 0 THEN 'Lost'
      WHEN SQ.SalesQty2011 = 0 and SQ.SalesQty2012 = 0 THEN 'Inactive'
      WHEN SQ.SalesQty2012 > SQ.SalesQty2011 THEN 'Increasing'
      WHEN SQ.SalesQty2012 <= SQ.SalesQty2011 THEN 'Decreasing'

      ELSE 'Nothing' 
    END
from [Sales_Data10] WHERE InvoiceDate BETWEEN '2011-01-01' AND '2012-12-31'

  CROSS APPLY (
              SELECT ISNULL(SV.SalesQty2011, 0) AS SalesQty2011, 
                     ISNULL(SV.SalesQty2012, 0) AS SalesQty2012
              ) SQ 
```

总结一下，我需要编写查询以确保 2012 年和 2011 年的销售数量在同一时间段内。

谢谢阿里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T06:38:51.200

该案例从左到右进行评估，当有匹配时，它会采用它并且不再查找。

尝试将最后两个`when`子句移到顶部。

```
Select top 10
  [Status],
  DivisionCode,
  CustomerCode,
  CustomerName,
  SalesQty2012=ISNULL(SalesQty2012,0),
  SalesQty2011=ISNULL(SalesQty2011,0),
  CustomerTrend= 
    (
     CASE
      WHEN SalesQty2011 = 0 and SalesQty2012 > 0 THEN 'NEW'
      WHEN SalesQty2011 > 0 and SalesQty2012 = 0 THEN 'Lost'
      WHEN SalesQty2012 > SalesQty2011 THEN 'Increasing'
      WHEN SalesQty2012 <= SalesQty2011 THEN 'Decreasing'
      ELSE 'Nothing' 
     END
    )
from dbo.CustomerMasterSalesView
order by customerTrend 
```

**更新**

对于列`NULL`中的值，您`SalesQty*`也需要`ISNULL`在`CASE`表达式中使用。
这是一个`CROSS APPLY`用于获取`0`而不是`NULL`.

```
SELECT TOP 10
  SV.[Status],
  SV.DivisionCode,
  SV.CustomerCode,
  SV.CustomerName,
  SQ.SalesQty2012,
  SQ.SalesQty2011,
  CustomerTrend= 
    (
    CASE
      WHEN SQ.SalesQty2011 = 0 and SQ.SalesQty2012 > 0 THEN 'NEW'
      WHEN SQ.SalesQty2011 > 0 and SQ.SalesQty2012 = 0 THEN 'Lost'
      WHEN SQ.SalesQty2012 > SQ.SalesQty2011 THEN 'Increasing'
      WHEN SQ.SalesQty2012 <= SQ.SalesQty2011 THEN 'Decreasing'
      ELSE 'Nothing' 
    END
    )
FROM CustomerMasterSalesView SV
  CROSS APPLY (
              SELECT ISNULL(SV.SalesQty2011, 0) AS SalesQty2011, 
                     ISNULL(SV.SalesQty2012, 0) AS SalesQty2012
              ) SQ
ORDER BY customerTrend 
```

# actionscript-3 - 在 Flash 列表控件中显示复选框？（类似于 Flex 中的 itemrendering）

> ID：13356445
> 
> 赞同：0
> 
> 时间：2012-11-13T06:32:22.350
> 
> 标签：actionscript-3, flash

如何在 Flash 列表控件中有一个复选框？

到目前为止我编码的内容：

CustomCellRenderer.as

```
package 
{ 
    import fl.controls.CheckBox; 
    import fl.controls.listClasses.ICellRenderer; 
    import fl.controls.listClasses.ListData; 
    public class CustomCellRenderer extends CheckBox implements ICellRenderer { 
        private var _listData:ListData; 
        private var _data:Object; 
        public function CustomCellRenderer() { 
        } 
        public function set data(d:Object):void { 
            _data = d; 
            label = d.label; 
        } 
        public function get data():Object { 
            return _data; 
        } 
        public function set listData(ld:ListData):void { 
            _listData = ld; 
        } 
        public function get listData():ListData { 
            return _listData; 
        } 
    } 
} 
```

Flash IDE 操作面板内部：

```
import fl.controls.List;

var myList:List 

myList.allowMultipleSelection =true;
myList.setStyle("cellRenderer", CustomCellRenderer); 
myList.addItem({label:"Burger", price:"$5.95"}); 
myList.addItem({label:"Fries", price:"$1.95"});
myList.addItem({label:"Burger", price:"$5.95"}); 
myList.addItem({label:"Fries", price:"$1.95"}); 
```

问题是显示的复选框，不能同时检查（除非单击 Ctrl 按钮）。

五。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:36:35.993

得到了解决方案：

使用 ctrlKey 属性可以完成这项工作。

感谢教程：[http ://active.tutsplus.com/tutorials/actionscript/as3-quick-tip-hacking-the-event-flow/](http://active.tutsplus.com/tutorials/actionscript/as3-quick-tip-hacking-the-event-flow/)

动作面板：

```
import flash.events.Event;

var myList:List 
//myList.setStyle("cellRenderer", MyCellRenderer);
myList.addEventListener(MouseEvent.CLICK, hackMouseListener, true);
myList.allowMultipleSelection =true;
myList.setStyle("cellRenderer", CustomCellRenderer); 
myList.addItem({label:"Burger", price:"$5.95"}); 
myList.addItem({label:"Fries", price:"$1.95"});
myList.addItem({label:"Burger", price:"$5.95"}); 
myList.addItem({label:"Fries", price:"$1.95"});

function hackMouseListener(e:MouseEvent):void{

    e.ctrlKey = true;
} 
```

CustomCellRenderer.as

```
package 
{ 
    import fl.controls.CheckBox; 
    import fl.controls.listClasses.ICellRenderer; 
    import fl.controls.listClasses.ListData; 
    import fl.controls.List ;

    public class CustomCellRenderer extends CheckBox implements ICellRenderer { 
        private var _listData:ListData; 
        private var _data:Object; 

        public function CustomCellRenderer() { 

        } 
        public function set data(d:Object):void { 
            _data = d; 
            label = d.label; 
        } 
        public function get data():Object { 
            return _data; 
        } 
        public function set listData(ld:ListData):void 
        {

            _listData = ld; 
        } 
        public function get listData():ListData { 
            return _listData; 
        } 

        public override function set selected(val_bool:Boolean):void 
        {

            _selected = val_bool
                super.selected = _selected ; 

        }

        public override function get  selected():Boolean
        {
            return _selected ; 

        }

    } 
} 
```

# objective-c - 如何组织 UIViewControllers & rootViewController 的正确使用

> ID：13356450
> 
> 赞同：1
> 
> 时间：2012-11-13T06:32:52.507
> 
> 标签：objective-c, uiviewcontroller

拥有一个根视图控制器来处理子视图控制器之间的转换，或者在必要时切换根视图控制器是更好的做法吗？

我们可以使用 presentViewController: 自定义动画吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T08:33:12.717

> 这意味着我不能使用 [presentViewController:animated:]

这是不正确的。您可以执行以下操作：

```
NewTestViewController *newTestController = [[NewTestViewController alloc] initForPhone];

newTestController.view.frame = CGRectMake(0, self.view.frame.size.height, self.view.frame.size.width, self.view.frame.size.height);
[self.view addSubview:newTestController.view];

[UIView animateWithDuration:0.3 animations:^(void){
    newTestController.view.frame = CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height);
} completion:^(BOOL worked) {
    [newTestController.view removeFromSuperview];
    [self presentViewController:newTestController animated:NO completion:nil];
}]; 
```

# .htaccess - htaccess RewriteRule - 斜线

> ID：13356454
> 
> 赞同：1
> 
> 时间：2012-11-13T06:32:57.760
> 
> 标签：.htaccess, mod-rewrite

我有这样的规则：

```
RewriteRule ^projects/(.*)/$ category.php?catgPLink=$1 [L] 
```

这个 404 结尾没有斜线，我想知道的是如何修改这条规则以使用或不使用斜线，而不会弄乱我在这个网站上的任何其他动态 url。

我发现使用多行 cond 和规则来解决此问题的其他一些链接会破坏网站上的其他一些 url。

当我尝试我发现的其他一些修复时，上面的规则示例会中断。

```
RewriteRule ^projects/(. *)/(. *)\.html$ taskDetails.php?catgPLinkParent=$1&catgPLink=$2 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T01:59:32.093

尝试这个：

```
RewriteRule ^projects/(.*)/?$ category.php?catgPLink=$1 [L] 
```

# mysql - 层次结构显示的mysql查询帮助

> ID：13356458
> 
> 赞同：0
> 
> 时间：2012-11-13T06:33:06.103
> 
> 标签：mysql

我有一张桌子：

```
id  type_name               type_reportToId 
1   Administrator               0   
2   Guest   GUEST               1   
3   Landlord                    1   
4   Property Manager            3   
13  Manager Manager             3   
14  Asst. Property Manager     13 
```

我需要 id 14 的“向层次结构报告”的结果。例如：id 14 必须报告 13,13 必须报告 3,3 必须报告 1 ...同样如此。我需要在 mysql 中进行查询。有谁能够帮助我 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T07:20:01.827

您最好在应用程序逻辑中而不是在查询中这样做。

伪代码

```
query=SELECT id, type_name, type_reportToId FROM table ORDER BY id ASC, report_toId ASC

// loop through rows
currentParent = 0
processed = 0
hierarachyLevel = 0
while ( processed < foundrows ) 
{
     while ( row = fetchrow( dbResult ) )
    {
         if ( row[type_reportToId] == currentParent )
         {
             resultHierarchy[hierarchyLevel] = row
             currentParent = row[id]
             processed++
             hierarchyLevel++
             dataseek( dbResult, 0 )
             break
         }
   } 
```

}

# asp.net-mvc-3 - LINQ 未返回所需数据

> ID：13356459
> 
> 赞同：0
> 
> 时间：2012-11-13T06:33:07.393
> 
> 标签：asp.net-mvc-3, linq, entity-framework

我正在尝试编写一个非常简单的方法，它将匹配 userId 并返回相应的图像路径字符串。我的代码是这样的：

```
public string GetImagePath(int _ID)
{
 var imagepath=from s in context.Userinfoes
               where s.UserID==_ID
               select s.UserImage;
 return imagepath.ToString();
} 
```

问题是 linq 没有加载数据，而是加载了像“system.data.object.objectquery1[system.string]”这样的字符串！我之前多次写过类似的方法，但第一次遇到这个问题。

仅供参考：

我正在使用 3 层架构并在执行此操作之前更新了我的 edmx。我删除了我的参考并再次添加它们以解决问题，但没有奏效。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T06:37:47.777

您的问题在于`return imagepath.ToString()`imagepath 不是数据。它是可查询的。所以 ToString() 返回“system.data.object.objectquery1[system.string]”。在此代码之前，您需要迭代您的查询。所以试试这个：

```
public string GetImagePath(int _ID)
{
    var imagepath=from s in context.Userinfoes
           where s.UserID==_ID
           select s.UserImage;

    return imagepath.FirstOrDefault().ToString();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T06:37:02.520

您需要使用 Single()/First() 从可枚举列表中返回一项

# android - 如何在 android 虚拟键盘上显示弹出键？

> ID：13356465
> 
> 赞同：2
> 
> 时间：2012-11-13T06:33:32.693
> 
> 标签：android, android-layout, android-keypad

我是android应用程序开发的新手。我目前正在开发一个带有 unicode 字符的虚拟键盘。由于字符数太多而无法在键盘上显示，因此其中一些字符被隐藏起来，只有在用户按下类似的键时才会显示出来。例如，在我的手机中，当我按下 A 时，字符“A”、“B”、“C”将显示为弹出键，让我选择其中一个。我只想实现类似于我手机键盘的虚拟键盘。我知道如何使用 KeyboardView 和 Keyboard 类以及键盘 xml 资源来实现虚拟键盘。

谁能给我一个关于如何显示弹出键的提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T08:14:02.167

您可以使用许多示例来帮助您，看看这个并选择一个来使用它。

[github项目](https://github.com/g1011999/Gingerbread-Keyboard/)

[好的博客文档](http://android-developers.blogspot.com/2009/04/creating-input-method.html)

[教程博客](http://tutorials-android.blogspot.com/2011/06/create-your-own-custom-keyboard-for.html)

[安卓文档](http://developer.android.com/reference/android/inputmethodservice/KeyboardView.html)

[自定义键盘](http://www.addictivetips.com/mobile/create-your-own-custom-keyboard-for-android-devices/)

# html - 带有空格检测的文本区域

> ID：13356471
> 
> 赞同：-2
> 
> 时间：2012-11-13T06:34:37.967
> 
> 标签：html

```
<textarea name="text"></textarea> 
```

我想当我提交textarea时，textarea的预览会自动检测空白。因此，如果我在带有空格的 textarea 中输入，它将显示带有空格的预览。

例子 ：

我想去
某个地方

就我而言，它总是这样：
我想去某个地方
（而我在文本“go”之后给出空白）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:08:05.237

HTML 本身不提供文本区域的“预览”。但是，如果您将其提交给 PHP 脚本，您可以使用它[`nl2br()`](http://php.net/nl2br)来将换行符转换为 html 换行符。

在这样做之前，您需要使用[`htmlspecialchars()`](http://php.net/htmlspecialchars)转义 HTML 标记，除非使用该表单的每个人都足够信任以输入任意 html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T06:41:57.017

要么您必须使用一些 RichTextbox 控件来获取可以在 HTML 中正确呈现的实际文本。当您按 Enter 时，这并不意味着您的文本将附加（HTML Break 元素）

在你的代码中。

在 HTML中，当用户按 Enter 时，您需要**HTML BR 。**类似的情况将适用于其他空白字符。

您可以修改 TextArea 以在输入空格时附加特殊的 HTML 标记。相反，我建议您使用 RichTextBox (WYSIWYG)

希望它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-26T02:49:17.923

你可以像这样检测新行和空格

```
$text = $_REQUEST['text_area_value'];
replace($text, " ", "&nbsp;"); // show blank spaces
replace($text, "\r\n", "<br/>") // show new lines 
```

# iphone - ios facebook 应用程序与 safari 共享会话

> ID：13356472
> 
> 赞同：4
> 
> 时间：2012-11-13T06:34:39.813
> 
> 标签：iphone, ios, facebook-graph-api, facebook-sdk-3.0

Hey guyz m new at iphone 有人可以详细说明为什么我的 facebook 应用程序在我注销时与 safari 浏览器共享会话

```
[FBSession.activeSession closeAndClearTokenInformation]; 
```

不会关闭我的会话，如果用户在注销应用程序与 safari 共享会话后再次登录，并且当我清除 safari 会话时，我的应用程序会要求提供凭据

# xcode - 有没有办法让 XCode 的“Show Invisibles”在排版上不那么引人注目？

> ID：13356473
> 
> 赞同：2
> 
> 时间：2012-11-13T06:34:46.917
> 
> 标签：xcode, settings, xcode4.5, user-experience, typography

我的意思是，它*似乎*提供了对此的控制——但是（至少根据我个人的相当详尽的调查）它是 Potemkin UX：

![看不见的东西应该被看到而不是被听到](../Images/2e1c6dce43b78a915c32bb3a78c2407a.png)

...“不可见”色域实际上并不影响不可见（这是个笑话？就像它控制其他实际上不可见的颜色？？）；如果不同时将您赋予它的色调赋予文档其余未突出显示的文本，则不会这样做的颜色字段。

我有足够的耐心和灵活性来处理文本编辑器的怪癖，当我的耐心和灵活性耗尽时，我足够书呆子来破解这些怪癖——我有一个闹鬼的博物馆，里面有 1990 年代的 elisp 片段和 X 配置点文件谈到这一点——但我发现这些功能失调的克莱因瓶式选项令人困惑。你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-06-03T05:47:41.233

它现在正在工作。您可以为浅色主题的 Invisibles 颜色设置较浅的颜色。

在我的 Xcode 11 中，我可以从`Preferences`-> `Fonts & Colors`->设置 Invisibles 颜色`Source Editor`。有一些可配置的项目。

[![在此处输入图像描述](../Images/34443476a99edd4d7759fa106902f621.png)](https://i.stack.imgur.com/Oz74A.png)

代码现在看起来很完美。

[![不可见的代码](../Images/cabed1a5381196e9b76d0fb5f5051d32.png)](https://i.stack.imgur.com/HFgX2.png)

# ios - 如果我从 wi-fi 切换到 3g，ios https 会失败

> ID：13356474
> 
> 赞同：1
> 
> 时间：2012-11-13T06:34:55.673
> 
> 标签：ios, networking, ssl, https

我的问题是从 wi-fi 切换到 3g 后无法访问 https 服务器。

我得到的错误是`Domain=NSURLErrorDomain Code=-1004 "Could not connect to the server.`

我使用 ASIHTTPRequest 和 AFNetworking 库尝试了同样的事情，两者都有同样的事情。

我猜这个问题是关于尝试使用相同的 ssl 凭据，即使我们的 ip 由于网络切换而改变。奇怪的是，如果您从 3g 切换到 wi-fi，则不会出现此问题。

一些注意事项：我使用的是 iphone 4 设备。设备已安装 ios 6.0。服务器端安装了 apache php。

以前有人遇到过吗？我可以以某种方式清除 ios 缓存上存储的任何 ssl 凭据吗？对这个问题有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T01:58:07.943

这个问题原来是一个dns问题。不知何故，工作 IP 地址被缓存在 wifi 网络中，但我认为不在 3G 网络中。

# java - 灰熊 - java.lang.NoSuchMethodError: javax.xml.ws.WebFault.messageName

> ID：13356479
> 
> 赞同：7
> 
> 时间：2012-11-13T06:35:25.583
> 
> 标签：java, web-services, soap, grizzly

我有一个用于 Web 服务的 wsdl 文件。我想测试客户端和服务器之间的交互。为此，我使用嵌入式 grizzly 运行模拟服务器。

关于实现模拟服务器的问题。我使用 wsimport 从 wsdl（和 xsd）生成了一个接口并编写了实现。在灰熊上运行时，出现以下错误：

```
com.sun.xml.ws.server.ServerRtException: [failed to localize] cannot.load.wsdl(META-INF/wsdl/test.wsdl) 
```

我使用以下代码运行 Web 服务：

```
 HttpHandler httpHandler = new JaxwsHandler(new TestImpl());
 server.getServerConfiguration().addHttpHandler(httpHandler, "/test"); 
```

问题是 Grizzly 找不到 wsdl 和 xsd 文件。在嵌入式 glassfish 中它的工作。

### 编辑1

我将 wsdlLocation 更改为“test.wsdl”及其工作。但现在灰熊说：

```
java.lang.NoSuchMethodError: javax.xml.ws.WebFault.messageName()Ljava/lang/String; 
```

### 编辑2

如果使用JDK1.7，它可以工作。但我需要一个 JDK 1.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T23:11:12.320

我不确定您为什么会看到该错误。我可以运行 Grizzly jaxws 示例并使用 1.6 或 1.7 获取 wsdl。

我建议查看示例的源代码[1](http://java.net/projects/grizzly/sources/git/content/samples/http-jaxws-samples/src/main/java/org/glassfish/grizzly/samples/jaxws/Server.java?rev=6f36787e9604965a29b1a95fd3421fae20166a76)并与您所拥有的进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T14:29:50.813

我将 jdk6 更改为 jdk7 并且工作正常！不要忘记更改此处相关的 JAVA_HOME 和 Netbeans 的默认 JDK：[如何设置 JDK Netbeans 运行？](https://stackoverflow.com/questions/6950960/how-to-point-netbeans-to-new-jdk)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-15T15:11:02.700

您的 Grizzly 版本需要 JAX-WS 2.2 API，而 JDK 1.6 附带 JAX-WS 2.1。正如其他人所提到的，其中一些文件需要安装到认可的目录中。[您可以在此处](https://jax-ws.java.net/2.2.10/)下载所需文件或从您的 Grizzly 安装中获取它们。下载包含一个 Ant 构建文件，该文件提供了一个构建目标，用于将文件安装到 JDK 认可的目录中。您可以使用`ant install-api`. 如果你不能运行 Ant，你可以手动安装它们：

```
cp lib/jaxb-api.jar $JAVA_HOME/lib/endorsed
cp lib/jaxws-api.jar $JAVA_HOME/lib/endorsed 
```

不要将 JAX-WS 发行版中的其他文件安装到 endorsed 目录中，除非您想为自己创建一些非常难以调试的错误。

我建议使用 $JAVA_HOME/lib/endorsed 中的背书目录，因为它适用于大多数工具和应用程序，无需任何额外更改。其他人已经提出了更有针对性的更改，例如在 Maven 构建期间设置背书目录或将文件复制到 Tomcat 背书目录中。只要您可以确保您的代码选择正确的认可目录，所有这些方法都可以。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T08:23:56.630

结果，我们不得不使用背书机制。[文档](http://jax-ws-commons.java.net/jaxws-maven-plugin/examples/using-jaxws22-on-jdk6.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-04T07:18:40.747

创建一个名为 endorsed 的文件夹并将这些 jar 文件放入其中 1.jaxb-api-2.2.jar 2.jaxws-api.jar 将文件夹作为 C:\tomcat-7.50\< created folder> 放在 tomcat 服务器中并运行它将作品

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-29T15:19:24.060

将 JDK 从 1.6 更改为 1.7 对我有用。

# vb.net - 将十六进制颜色字符串转换为 RGB 颜色

> ID：13356486
> 
> 赞同：8
> 
> 时间：2012-11-13T06:36:30.257
> 
> 标签：vb.net, winforms

我想将十六进制颜色转换为 RGB 颜色。

我使用了以下代码：

```
Me.BackColor = RGB("#000000") 
```

但随后它会引发以下异常：

```
Argument not specified for parameter 'Green' of 'Public Function RGB(Red As Integer, Green As Integer, Blue As Integer) As Integer' 
```

正确的方法是什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-13T06:39:30.440

通过颜色翻译：

```
ColorTranslator.FromHtml("#003399") 
```

其他方法：

```
Public Function ConvertToRbg(ByVal HexColor As String) As Color
    Dim Red As String
    Dim Green As String
    Dim Blue As String
    HexColor = Replace(HexColor, "#", "")
    Red = Val("&H" & Mid(HexColor, 1, 2))
    Green = Val("&H" & Mid(HexColor, 3, 2))
    Blue = Val("&H" & Mid(HexColor, 5, 2))
    Return Color.FromArgb(Red, Green, Blue)
End Function 
```

或者：

```
Public Shared Function HexToColor(ByVal hexColor As String) As Color
    If hexColor.IndexOf("#"c) <> -1 Then
        hexColor = hexColor.Replace("#", "")
    End If
    Dim red As Integer = 0
    Dim green As Integer = 0
    Dim blue As Integer = 0
    If hexColor.Length = 6 Then
        red = Integer.Parse(hexColor.Substring(0, 2), NumberStyles.AllowHexSpecifier)
        green = Integer.Parse(hexColor.Substring(2, 2), NumberStyles.AllowHexSpecifier)
        blue = Integer.Parse(hexColor.Substring(4, 2), NumberStyles.AllowHexSpecifier)
    ElseIf hexColor.Length = 3 Then
        red = Integer.Parse(hexColor(0).ToString() + hexColor(0).ToString(), NumberStyles.AllowHexSpecifier)
        green = Integer.Parse(hexColor(1).ToString() + hexColor(1).ToString(), NumberStyles.AllowHexSpecifier)
        blue = Integer.Parse(hexColor(2).ToString() + hexColor(2).ToString(), NumberStyles.AllowHexSpecifier)
    End If
    Return Color.FromArgb(red, green, blue)
End Function 
```

或者：

```
 Dim c As String = "#ffffff"
    c = Replace(c, "#", "")
    c = "&H" & c
    ColorTranslator.FromOle(c) 
```

或者：

```
Public Function hexToRbgNew(ByVal Hex As String) As Color
    Hex = Replace(Hex, "#", "")
    Dim red As String = "&H" & Hex.Substring(0, 2)
    Hex = Replace(Hex, red, "", , 1)
    Dim green As String = "&H" & Hex.Substring(0, 2)
    Hex = Replace(Hex, green, "", , 1)
    Dim blue As String = "&H" & Hex.Substring(0, 2)
    Hex = Replace(Hex, blue, "", , 1)
    Return Color.FromArgb(red, green, blue)
End Function 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-06T20:16:49.997

这对我有用：（vb.Net）

```
cell.BackColor = Drawing.Color.FromArgb(&H3399FF) 
```

# magento - 如何使用magento中的复选框同时将捆绑产品添加到购物车

> ID：13356487
> 
> 赞同：1
> 
> 时间：2012-11-13T06:36:41.223
> 
> 标签：magento

在 Magento 中，我创建了一个捆绑产品列表。在前端，与每个捆绑产品一起放置一个复选框，因此用户可以选择任意数量的带有复选框的捆绑产品，并将所有产品同时添加到购物车中。我想知道如何将所有选定的捆绑产品批量添加到购物车中。

请查看链接： [https ://dl.dropbox.com/u/53435938/bundled-product-list.png](https://dl.dropbox.com/u/53435938/bundled-product-list.png)

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T05:09:50.500

您是否使用开箱即用的捆绑产品类型？

有一种方法可以设置这样的捆绑包，以便在购买捆绑包时所有项目都是“必需的”。它应该是开箱即用的，除了整个捆绑包的 ID 之外，您不必将任何内容传递给添加到购物车功能。

您要做的是编辑捆绑产品，为每个捆绑选项提供一个可选产品。请务必将用户自定义数量设置为“否”。请参阅随附的屏幕截图。

![Magento 捆绑产品.png](../Images/a785f590e5d0f749f86365e53ccd3c0e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:28:05.440

您可以： 使用 ajax 将商品发布到购物车。使用自定义控制器将多个商品添加到购物车（magento 允许添加相关商品，但您不能指定数量）

也许看看[http://inhoo.net/ecommerce/magento/how-to-increase-magento-sales-with-one-simple-extension/](http://inchoo.net/ecommerce/magento/how-to-increase-magento-sales-with-one-simple-extension/)以获取有关模块的灵感

# c++ - 常量指针数组

> ID：13356488
> 
> 赞同：6
> 
> 时间：2012-11-13T06:36:47.227
> 
> 标签：c++

好的，我知道这是无效的

```
 char char_A = 'A';
    const char * myPtr = &char_A;
    *myPtr = 'J'; // error - can't change value of *myP 
```

[因为我们声明了一个指向常量字符的指针]

为什么这是有效的？

```
 const char  *linuxDistro[6]={ "Debian", "Ubuntu", "OpenSuse", "Fedora", "Linux Mint", "Mandriva"};

for ( int i=0; i < 6; i++) 
cout << *(linuxDistro+i)<< endl;

*linuxDistro="WhyCanIchangeThis";// should result in an error but doesnt ? 
for ( int i=0; i < 6; i++) 
cout << *(linuxDistro+i)<< endl; 
```

感谢您的关注！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-13T06:41:16.827

你写

```
*linuxDistro =  "WhyCanIchangeThis"; 
```

这是**完全有效**的，因为声明`linuxDistro`是

```
const char *linuxDistro[6]; 
```

即它是一个由 6 个指针组成的数组`const char`。也就是说，您**可以**更改指针*本身，*而不能更改这些指针指向的*字符*。即，你**不能编译**

```
*linuxDistro[0] = 'B'; 
```

获取字符串`"Bebian"`，因为字符串包含常量字符...

您可能想要的是一个指向常量字符的常量指针数组：

```
const char *const linuxDistro[6]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T06:44:19.753

*linuxDistro 仍然是一个指针，是 linuxDistro[0]，`*linuxDistro="WhyCanIchangeThis"`它只是改变指针指向一个新地址，而不是修改旧地址中的内容，这样就可以了。

如果你写`**linuxDistro='a'`，它应该是错误的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T06:40:31.897

因为`char`is not `char[]`，所以当你访问时你访问`*`它`char[]`的第一个元素（Debian）。

当您移动指针（例如 +1 它）时，您访问数组的下一个元素

这是更好理解的好例子

```
#include <iostream>
using namespace std;

int main ()
{
  int numbers[5];
  int * p;
  p = numbers;  *p = 10;
  p++;  *p = 20;
  p = &numbers[2];  *p = 30;
  p = numbers + 3;  *p = 40;
  p = numbers;  *(p+4) = 50;
  for (int n=0; n<5; n++)
    cout << numbers[n] << ", ";
  return 0;
} 
```

这将输出：

> 10, 20, 30, 40, 50,

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T06:45:10.147

因为指针是一个存储内存地址的变量，如果一个指针是`const`指针一直存储相同的内存地址，所以指针本身的值是不能改变的，但是你对指针所指向的值无话可说，根据您所拥有的，更改指向的值是允许的操作。

# windows-8 - 网络摄像头应用程序中的 UnauthorizedAccessException

> ID：13356489
> 
> 赞同：2
> 
> 时间：2012-11-13T06:36:53.823
> 
> 标签：windows-8, microsoft-metro

我正在尝试制作一个简单的网络摄像头应用程序：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using Windows.Foundation;
using Windows.Foundation.Collections;
using Windows.Media.MediaProperties;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Controls.Primitives;
using Windows.UI.Xaml.Data;
using Windows.UI.Xaml.Input;
using Windows.UI.Xaml.Media;
using Windows.UI.Xaml.Media.Imaging;
using Windows.UI.Xaml.Navigation;

namespace App1
{
public sealed partial class MainPage : Page
{
    private Windows.Media.Capture.MediaCapture m_mediaCaptureMgr;
    private Windows.Storage.StorageFile m_photoStorageFile;
    private readonly String PHOTO_FILE_NAME = "photo.jpg";

    public MainPage()
    {
        this.InitializeComponent();
    }

    internal async void initializeCamera()
    {
        m_mediaCaptureMgr = new Windows.Media.Capture.MediaCapture();
        await m_mediaCaptureMgr.InitializeAsync();
        statusBox.Text = "initialized";
    }
    /// <summary>
    /// Invoked when this page is about to be displayed in a Frame.
    /// </summary>
    /// <param name="e">Event data that describes how this page was reached.  The Parameter
    /// property is typically used to configure the page.</param>
    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
    }

    internal async void takePicture(object sender, RoutedEventArgs e)
    {

        m_photoStorageFile = await Windows.Storage.KnownFolders.PicturesLibrary.CreateFileAsync(PHOTO_FILE_NAME, Windows.Storage.CreationCollisionOption.GenerateUniqueName);
        ImageEncodingProperties imageProperties = ImageEncodingProperties.CreateJpeg();
        await m_mediaCaptureMgr.CapturePhotoToStorageFileAsync(imageProperties, m_photoStorageFile);
    }

    private void initializeButton(object sender, RoutedEventArgs e)
    {
        initializeCamera();
    }
} 
```

}

但是，当我单击 initializeButton 时，出现异常：

```
UnauthorizedAccessException (Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED))) 
```

这里可能是什么问题？

**编辑**：我发现了这个错误。基本上，如果网络摄像头已经初始化，再次尝试初始化它会触发异常。所以我不得不放一个标志，然后一些尝试/捕捉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:57:41.540

您是否在清单文件中设置了麦克风和网络摄像头的功能？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T09:29:11.147

`Package.Appmnifest`在文件中查看麦克风和网络摄像头功能

![在此处输入图像描述](../Images/d3787e0ca27aa490535074c178cf2895.png)

# javascript - 使用 Javascript 解码 UTF-8

> ID：13356493
> 
> 赞同：62
> 
> 时间：2012-11-13T06:37:33.247
> 
> 标签：javascript, unicode, utf8-decode, xhtml-transitional

我在传递 UTF-8 编码字符串的 XHTML 网页中有 Javascript。它需要继续通过 UTF-8 版本，并对其进行解码。如何解码 UTF-8 字符串以进行显示？

```
<script type="text/javascript">
// <![CDATA[
function updateUser(usernameSent){
    var usernameReceived = usernameSent; // Current value: GrÃƒÂ¶ÃƒÂŸe
    var usernameDecoded = usernameReceived;  // Decode to: Größe
    var html2id = '';
    html2id += 'Encoded: ' + usernameReceived + '<br />Decoded: ' + usernameDecoded;
    document.getElementById('userId').innerHTML = html2id;
}
// ]]>
</script> 
```

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2012-12-03T20:53:28.480

回答原始问题：这是您在 javascript 中解码 utf-8 的方式：

[http://ecmanaut.blogspot.ca/2006/07/encoding-decoding-utf8-in-javascript.html](http://ecmanaut.blogspot.ca/2006/07/encoding-decoding-utf8-in-javascript.html)

具体来说，

```
function encode_utf8(s) {
  return unescape(encodeURIComponent(s));
}

function decode_utf8(s) {
  return decodeURIComponent(escape(s));
} 
```

我们已经在我们的生产代码中使用它 6 年了，它运行得完美无缺。

但是请注意，**不推荐使用 escape() 和 unescape()。** [看到这个。](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/escape)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-03-13T08:34:51.907

这应该有效：

```
// http://www.onicos.com/staff/iz/amuse/javascript/expert/utf.txt

/* utf.js - UTF-8 <=> UTF-16 convertion
 *
 * Copyright (C) 1999 Masanao Izumo <iz@onicos.co.jp>
 * Version: 1.0
 * LastModified: Dec 25 1999
 * This library is free.  You can redistribute it and/or modify it.
 */

function Utf8ArrayToStr(array) {
    var out, i, len, c;
    var char2, char3;

    out = "";
    len = array.length;
    i = 0;
    while(i < len) {
    c = array[i++];
    switch(c >> 4)
    { 
      case 0: case 1: case 2: case 3: case 4: case 5: case 6: case 7:
        // 0xxxxxxx
        out += String.fromCharCode(c);
        break;
      case 12: case 13:
        // 110x xxxx   10xx xxxx
        char2 = array[i++];
        out += String.fromCharCode(((c & 0x1F) << 6) | (char2 & 0x3F));
        break;
      case 14:
        // 1110 xxxx  10xx xxxx  10xx xxxx
        char2 = array[i++];
        char3 = array[i++];
        out += String.fromCharCode(((c & 0x0F) << 12) |
                       ((char2 & 0x3F) << 6) |
                       ((char3 & 0x3F) << 0));
        break;
    }
    }

    return out;
} 
```

查看[JSFiddle 演示](http://jsfiddle.net/3VuLx/2/)。

另请参阅相关问题：[here](https://stackoverflow.com/questions/17191945/conversion-between-utf-8-arraybuffer-and-string/22373135)和[here](https://stackoverflow.com/questions/8936984/uint8array-to-string-in-javascript/22373197)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-11-17T09:53:34.810

也许使用[textDecoder](https://developer.mozilla.org/en-US/docs/Web/API/TextDecoder/TextDecoder)就足够了。

不过 IE 不支持。

```
var decoder = new TextDecoder('utf-8'),
    decodedMessage;

decodedMessage = decoder.decode(message.data); 
```

## 处理非 UTF8 文本

在这个例子中，我们解码俄语文本“Привет, мир!”，意思是“你好，世界”。在我们的 TextDecoder() 构造函数中，我们指定适用于西里尔文的 Windows-1251 字符编码。

```
 let win1251decoder = new TextDecoder('windows-1251');
    let bytes = new Uint8Array([207, 240, 232, 226, 229, 242, 44, 32, 236, 232, 240, 33]);
    console.log(win1251decoder.decode(bytes)); // Привет, мир!
```

[此处](https://developer.mozilla.org/en-US/docs/Web/API/TextDecoder)描述了 TextDecoder 的接口。

从字符串中检索字节数组同样简单：

```
const decoder = new TextDecoder();
const encoder = new TextEncoder();

const byteArray = encoder.encode('Größe');
// converted it to a byte array

// now we can decode it back to a string if desired
console.log(decoder.decode(byteArray));
```

如果你有不同的编码，那么你必须在编码时补偿它。TextEncoder 的构造函数中的参数是[此处](https://developer.mozilla.org/en-US/docs/Web/API/Encoding_API/Encodings)列出的任何一种有效编码。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-02-15T05:35:41.253

这是一个处理所有 Unicode 代码点的解决方案，包括高位（4 字节）值，并受到所有现代浏览器（IE 和其他 > 5.5）的支持。它使用 decodeURIComponent()，但不使用已弃用的转义/取消转义函数：

```
function utf8_to_str(a) {
    for(var i=0, s=''; i<a.length; i++) {
        var h = a[i].toString(16)
        if(h.length < 2) h = '0' + h
        s += '%' + h
    }
    return decodeURIComponent(s)
} 
```

经过测试并在[GitHub上可用](https://github.com/quicbit-js/qb-utf8-to-str-tiny)

从字符串创建 UTF-8：

```
function utf8_from_str(s) {
    for(var i=0, enc = encodeURIComponent(s), a = []; i < enc.length;) {
        if(enc[i] === '%') {
            a.push(parseInt(enc.substr(i+1, 2), 16))
            i += 3
        } else {
            a.push(enc.charCodeAt(i++))
        }
    }
    return a
} 
```

经过测试并在[GitHub上可用](https://github.com/quicbit-js/qb-utf8-from-str-tiny)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-02-25T07:27:19.137

更新@Albert 的答案，为表情符号添加条件。

```
function Utf8ArrayToStr(array) {
    var out, i, len, c;
    var char2, char3, char4;

    out = "";
    len = array.length;
    i = 0;
    while(i < len) {
    c = array[i++];
    switch(c >> 4)
    { 
      case 0: case 1: case 2: case 3: case 4: case 5: case 6: case 7:
        // 0xxxxxxx
        out += String.fromCharCode(c);
        break;
      case 12: case 13:
        // 110x xxxx   10xx xxxx
        char2 = array[i++];
        out += String.fromCharCode(((c & 0x1F) << 6) | (char2 & 0x3F));
        break;
      case 14:
        // 1110 xxxx  10xx xxxx  10xx xxxx
        char2 = array[i++];
        char3 = array[i++];
        out += String.fromCharCode(((c & 0x0F) << 12) |
                       ((char2 & 0x3F) << 6) |
                       ((char3 & 0x3F) << 0));
        break;
     case 15:
        // 1111 0xxx 10xx xxxx 10xx xxxx 10xx xxxx
        char2 = array[i++];
        char3 = array[i++];
        char4 = array[i++];
        out += String.fromCodePoint(((c & 0x07) << 18) | ((char2 & 0x3F) << 12) | ((char3 & 0x3F) << 6) | (char4 & 0x3F));

        break;
    }

    return out;
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-01-21T14:50:16.853

@albert 的解决方案是我认为最接近的，但它最多只能解析 3 个字节的 utf-8 字符

```
function utf8ArrayToStr(array) {
  var out, i, len, c;
  var char2, char3;

  out = "";
  len = array.length;
  i = 0;

  // XXX: Invalid bytes are ignored
  while(i < len) {
    c = array[i++];
    if (c >> 7 == 0) {
      // 0xxx xxxx
      out += String.fromCharCode(c);
      continue;
    }

    // Invalid starting byte
    if (c >> 6 == 0x02) {
      continue;
    }

    // #### MULTIBYTE ####
    // How many bytes left for thus character?
    var extraLength = null;
    if (c >> 5 == 0x06) {
      extraLength = 1;
    } else if (c >> 4 == 0x0e) {
      extraLength = 2;
    } else if (c >> 3 == 0x1e) {
      extraLength = 3;
    } else if (c >> 2 == 0x3e) {
      extraLength = 4;
    } else if (c >> 1 == 0x7e) {
      extraLength = 5;
    } else {
      continue;
    }

    // Do we have enough bytes in our data?
    if (i+extraLength > len) {
      var leftovers = array.slice(i-1);

      // If there is an invalid byte in the leftovers we might want to
      // continue from there.
      for (; i < len; i++) if (array[i] >> 6 != 0x02) break;
      if (i != len) continue;

      // All leftover bytes are valid.
      return {result: out, leftovers: leftovers};
    }
    // Remove the UTF-8 prefix from the char (res)
    var mask = (1 << (8 - extraLength - 1)) - 1,
        res = c & mask, nextChar, count;

    for (count = 0; count < extraLength; count++) {
      nextChar = array[i++];

      // Is the char valid multibyte part?
      if (nextChar >> 6 != 0x02) {break;};
      res = (res << 6) | (nextChar & 0x3f);
    }

    if (count != extraLength) {
      i--;
      continue;
    }

    if (res <= 0xffff) {
      out += String.fromCharCode(res);
      continue;
    }

    res -= 0x10000;
    var high = ((res >> 10) & 0x3ff) + 0xd800,
        low = (res & 0x3ff) + 0xdc00;
    out += String.fromCharCode(high, low);
  }

  return {result: out, leftovers: []};
} 
```

如果您以块的形式解析字符串，则会返回`{result: "parsed string", leftovers: [list of invalid bytes at the end]}`。

编辑：修复了@unhammer 发现的问题。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2018-04-13T16:39:56.507

// 字符串到 Utf8 ByteBuffer

```
function strToUTF8(str){
  return Uint8Array.from(encodeURIComponent(str).replace(/%(..)/g,(m,v)=>{return String.fromCodePoint(parseInt(v,16))}), c=>c.codePointAt(0))
} 
```

// Utf8 ByteArray 转字符串

```
function UTF8toStr(ba){
  return decodeURIComponent(ba.reduce((p,c)=>{return p+'%'+c.toString(16),''}))
} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-02-26T10:33:24.693

这是我在进行更具体的 Google 搜索后发现的，而不仅仅是 UTF-8 编码/解码。因此，对于那些正在寻找转换库以在编码之间进行转换的人来说，就可以了。

[https://github.com/inexorabletash/text-encoding](https://github.com/inexorabletash/text-encoding)

```
var uint8array = new TextEncoder().encode(str);
var str = new TextDecoder(encoding).decode(uint8array); 
```

**从 repo 自述文件粘贴**

支持编码规范中的所有编码：

utf-8 ibm866 iso-8859-2 iso-8859-3 iso-8859-4 iso-8859-5 iso-8859-6 iso-8859-7 iso-8859-8 iso-8859-8-i iso-8859- 10 iso-8859-13 iso-8859-14 iso-8859-15 iso-8859-16 koi8-r koi8-u macintosh windows-874 windows-1250 windows-1251 windows-1252 windows-1253 windows-1254 windows-1255 windows -1256 windows-1257 windows-1258 x-mac-cyrillic gb18030 hz-gb-2312 big5 euc-jp iso-2022-jp shift_jis euc-kr 替换 utf-16be utf-16le x-user-defined

（其他名称可能支持某些编码，例如 ascii、iso-8859-1 等。有关每种编码的附加标签，请参见编码。）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-01-24T13:45:55.390

使用我的 1.6KB[库](https://github.com/DesWurstes/utf.js)，你可以做到

```
ToString(FromUTF8(Array.from(usernameReceived))) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-03-02T16:26:27.480

我认为最简单的方法是使用内置的 js 函数 decodeURI() / encodeURI()。

```
function (usernameSent) {
  var usernameEncoded = usernameSent; // Current value: utf8
  var usernameDecoded = decodeURI(usernameReceived);  // Decoded
  // do stuff
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-09-24T02:11:43.687

你应该接受`decodeURI`它。

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/decodeURI](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/decodeURI)

就这么简单：

```
decodeURI('https://developer.mozilla.org/ru/docs/JavaScript_%D1%88%D0%B5%D0%BB%D0%BB%D1%8B');
// "https://developer.mozilla.org/ru/docs/JavaScript_шеллы" 
```

考虑在`try catch`块内使用它，以免丢失`URIError`.

它还具有完整的浏览器支持。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-03-27T19:27:29.083

这是一个具有大量错误报告的解决方案。

它需要一个 UTF-8 编码的字节数组（其中字节数组表示为数字数组，每个数字是 0 到 255 之间的整数），并将生成一个 Unicode 字符的 JavaScript 字符串。

```
function getNextByte(value, startByteIndex, startBitsStr, 
                     additional, index) 
{
    if (index >= value.length) {
        var startByte = value[startByteIndex];
        throw new Error("Invalid UTF-8 sequence. Byte " + startByteIndex 
            + " with value " + startByte + " (" + String.fromCharCode(startByte) 
            + "; binary: " + toBinary(startByte)
            + ") starts with " + startBitsStr + " in binary and thus requires " 
            + additional + " bytes after it, but we only have " 
            + (value.length - startByteIndex) + ".");
    }
    var byteValue = value[index];
    checkNextByteFormat(value, startByteIndex, startBitsStr, additional, index);
    return byteValue;
}

function checkNextByteFormat(value, startByteIndex, startBitsStr, 
                             additional, index) 
{
    if ((value[index] & 0xC0) != 0x80) {
        var startByte = value[startByteIndex];
        var wrongByte = value[index];
        throw new Error("Invalid UTF-8 byte sequence. Byte " + startByteIndex 
             + " with value " + startByte + " (" +String.fromCharCode(startByte) 
             + "; binary: " + toBinary(startByte) + ") starts with " 
             + startBitsStr + " in binary and thus requires " + additional 
             + " additional bytes, each of which shouls start with 10 in binary."
             + " However byte " + (index - startByteIndex) 
             + " after it with value " + wrongByte + " (" 
             + String.fromCharCode(wrongByte) + "; binary: " + toBinary(wrongByte)
             +") does not start with 10 in binary.");
    }
}

function fromUtf8 (str) {
        var value = [];
        var destIndex = 0;
        for (var index = 0; index < str.length; index++) {
            var code = str.charCodeAt(index);
            if (code <= 0x7F) {
                value[destIndex++] = code;
            } else if (code <= 0x7FF) {
                value[destIndex++] = ((code >> 6 ) & 0x1F) | 0xC0;
                value[destIndex++] = ((code >> 0 ) & 0x3F) | 0x80;
            } else if (code <= 0xFFFF) {
                value[destIndex++] = ((code >> 12) & 0x0F) | 0xE0;
                value[destIndex++] = ((code >> 6 ) & 0x3F) | 0x80;
                value[destIndex++] = ((code >> 0 ) & 0x3F) | 0x80;
            } else if (code <= 0x1FFFFF) {
                value[destIndex++] = ((code >> 18) & 0x07) | 0xF0;
                value[destIndex++] = ((code >> 12) & 0x3F) | 0x80;
                value[destIndex++] = ((code >> 6 ) & 0x3F) | 0x80;
                value[destIndex++] = ((code >> 0 ) & 0x3F) | 0x80;
            } else if (code <= 0x03FFFFFF) {
                value[destIndex++] = ((code >> 24) & 0x03) | 0xF0;
                value[destIndex++] = ((code >> 18) & 0x3F) | 0x80;
                value[destIndex++] = ((code >> 12) & 0x3F) | 0x80;
                value[destIndex++] = ((code >> 6 ) & 0x3F) | 0x80;
                value[destIndex++] = ((code >> 0 ) & 0x3F) | 0x80;
            } else if (code <= 0x7FFFFFFF) {
                value[destIndex++] = ((code >> 30) & 0x01) | 0xFC;
                value[destIndex++] = ((code >> 24) & 0x3F) | 0x80;
                value[destIndex++] = ((code >> 18) & 0x3F) | 0x80;
                value[destIndex++] = ((code >> 12) & 0x3F) | 0x80;
                value[destIndex++] = ((code >> 6 ) & 0x3F) | 0x80;
                value[destIndex++] = ((code >> 0 ) & 0x3F) | 0x80;
            } else {
                throw new Error("Unsupported Unicode character \"" 
                    + str.charAt(index) + "\" with code " + code + " (binary: " 
                    + toBinary(code) + ") at index " + index
                    + ". Cannot represent it as UTF-8 byte sequence.");
            }
        }
        return value;
    } 
```

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2015-08-12T13:41:37.407

我搜索了一个简单的解决方案，这对我很有效：

```
//input data
view = new Uint8Array(data);

//output string
serialString = ua2text(view);

//convert UTF8 to string
function ua2text(ua) {
    s = "";
    for (var i = 0; i < ua.length; i++) {
        s += String.fromCharCode(ua[i]);
    }
    return s;               
} 
```

我唯一的问题是有时我一次得到一个角色。这可能是我的数组缓冲区来源的设计。我正在使用[https://github.com/xseignard/cordovarduino](https://github.com/xseignard/cordovarduino)读取 android 设备上的串行数据。

* * *

## 回答 #14

> 赞同：-4
> 
> 时间：2021-05-05T20:02:00.367

正如其他人建议的那样，最好使用[Encoding API](https://developer.mozilla.org/en-US/docs/Web/API/Encoding_API)。但是如果你需要支持 IE（出于某种奇怪的原因） MDN 推荐这个 repo [FastestSmallestTextEncoderDecoder](https://github.com/anonyco/FastestSmallestTextEncoderDecoder)

如果你需要使用 polyfill 库：

```
 import {encode, decode} from "fastestsmallesttextencoderdecoder"; 
```

然后（不管 polyfill）进行编码和解码：

```
 // takes in USVString and returns a Uint8Array object
    const encoded = new TextEncoder().encode('€')
    console.log(encoded);

    // takes in an ArrayBuffer or an ArrayBufferView and returns a DOMString
    const decoded = new TextDecoder().decode(encoded);
    console.log(decoded); 
```

# sql-server-2008 - SELECT * FROM tblXXX 只返回一个结果

> ID：13356495
> 
> 赞同：0
> 
> 时间：2012-11-13T06:37:41.937
> 
> 标签：sql-server-2008

我有一个运行 ASP.NET MVC 2 应用程序的 SQL 2008 R2 Express 数据库。

当这个问题出现时，似乎总是早上第一件事 - 应用程序登录将失败。所以我对数据库运行一个查询`SELECT * FROM tblUser`，它只返回 1 个结果（总是一些随机用户，没有其他人），让我认为记录已被截断。

所以我尝试重新创建管理员用户，例如，失败了，突然所有用户都回到了数据库中（如`SELECT * FROM tblUser`查询所反映）

重新启动数据库服务可以解决问题，但我需要找出它发生的原因。有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:50:21.917

**解决了**

我有一个坏习惯，就是简单地复制我的用户实例数据库并在其他需要类似模式的项目中再次使用它们。

知道这一点后，我的一个朋友建议为我的整个数据库（包括数据，使用 SQL Management Studio）编写脚本并从中重新创建它。

另一位朋友建议将数据库附加到 SQL Server 2008 完整版，而不是 Express，所以我想我会结合这两个想法并将数据库和数据编写到 SQL Server 2008 上——这已经奏效了 :)

NB 这也让我想起了 SQL Server 完整版的速度有多**快**！

# c++ - 被信号中断的系统调用仍需完成

> ID：13356497
> 
> 赞同：12
> 
> 时间：2012-11-13T06:38:23.203
> 
> 标签：c++, c, unix, interrupt, eintr

很多系统调用，比如`close( fd )`可以被信号打断。在这种情况下，通常`-1`返回并`errno`设置`EINTR`。

问题是什么是正确的做法？说，我仍然希望`fd`关闭它。

我能想到的是：

```
while( close( fd ) == -1 )
  if( errno != EINTR ) {
    ReportError();
    break;
  } 
```

有人可以提出更好/更优雅/标准的方法来处理这种情况吗？

更新：正如 mux 所注意到的，`RESTART`安装信号处理程序时可以使用 SA_ 标志。有人可以告诉我哪些功能可以保证在所有`POSIX`系统上都可以重新启动（不仅`Linux`）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T07:06:00.950

一些系统调用是可重新启动的，这意味着如果中断内核将重新启动调用，如果`SA_RESTART`在安装信号处理程序时使用该标志，[signal(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/signal.7.html)手册页说：

> 如果对以下接口之一的阻塞调用被信号处理程序中断，**则如果使用了 SA_RESTART 标志，则在信号处理程序返回后将自动重新启动调用**；否则调用将失败并出现错误 EINTR：

它没有提到是否`close()`可以重新启动，但它们是：

> 读取（2），读取（2），写入（2），写入v（2），ioctl（2），打开（2），等待（2），等待3（2），等待4（2），等待ID（2），和 waitpid、accept(2)、connect(2)、recv(2)、recvfrom(2)、recvmsg(2)、send(2)、sendto(2) 和 sendmsg(2)flock(2) 和 fcntl( 2) mq_receive(3)、mq_timedreceive(3)、mq_send(3) 和 mq_timedsend(3) sem_wait(3) 和 sem_timedwait(3) futex(2)

*请注意，这些详细信息，特别是不可重新启动的调用列表，是特定于 Linux 的*

我发布了一个相关问题，关于哪些系统调用是可重新启动的，如果它是由 POSIX 指定的，它是由 POSIX 指定的，但它是可选的，所以你应该检查你的操作系统的不可重新启动调用列表，如果它不存在，它应该是可重启。这是我的问题： [如何知道 Linux 系统调用是否可重新启动？](https://stackoverflow.com/questions/13357019/how-to-know-if-a-linux-system-call-is-restartable-or-not/13357338#13357338)

更新：关闭是一种特殊情况，它不可重新启动，不应在 Linux 中重试，有关更多详细信息，请参阅此答案： [https ://stackoverflow.com/a/14431867/1157444](https://stackoverflow.com/a/14431867/1157444)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T06:43:57.367

假设您要使用较短的代码，您可以尝试以下操作：

```
while (((rc = close (fd)) == -1) && (errno == EINTR));
if (rc == -1)
    complainBitterly (errno); 
```

假设您除了更短之外还追求更*易读的代码，只需创建一个函数：*

```
int closeWithRetry (int fd); 
```

并将您的可读代码放在那里。那么它有多长并不重要，它仍然是你调用它的单行，但你可以使函数体本身非常可读：

```
int closeWithRetry (int fd) {
    // Initial close attempt.

    int rc = close (fd);

    // As long as you failed with EINTR, keep trying.
    // Possibly with a limit (count or time-based).

    while ((rc == -1) && (errno == EINTR))
        rc = close (fd);

    // Once either success or non-retry failure, return error code.

    return rc;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T15:12:36.777

记录一下：基本上在每个 UNIX 上，如果它返回 EINTR ，则`close()` *不能重试。***不要**`waitpid()`像 for或那样为 close 放置一个 EINTR 重试循环`read()`。有关详细信息，请参阅此页面：[http](http://austingroupbugs.net/view.php?id=529) ://austingroupbugs.net/view.php?id=529在 linux、Solaris、BSD 等上，重试`close()`不正确。HP-UX 是我能找到的唯一一个需要这个的通用（！）系统。

`read()`EINTR 对and`select()`等的含义`waitpid()`与对.的含义非常不同`close()`。对于大多数呼叫，您在 EINTR 上重试，因为您要求在哪些阻塞中完成某些事情，如果您被打断，则意味着它没有发生，所以您再试一次。对于`close()`，您请求的操作是从 fd 表中删除一个条目，这是瞬时的，没有错误，并且无论`close()`返回什么都将始终发生。[*]`close()`阻塞的唯一原因是有时，对于特殊语义（如TCP linger），它可以等到 I/O 完成后再返回。如果 close 返回 EINTR，这意味着您要求它等待但它不能。但是，*fd 仍然关闭*；你只是失去了等待的机会。

结论：除非你知道你不能接收信号，否则使用`close()`等待是一件非常愚蠢的事情。使用应用程序级 ACK (TCP) 或 fsync（文件 I/O）确保在关闭 fd 之前完成所有写入。

[*] 有一个警告：如果进程的另一个线程在同一个 fd 上的阻塞系统调用中，那么，...这取决于。

# php - php邮件中的html

> ID：13356499
> 
> 赞同：0
> 
> 时间：2012-11-13T06:38:55.570
> 
> 标签：php, html, email

我的电子邮件有以下 html 代码。

```
$headers = "From: jmedalla20@gmail.com \r\n" .
   "MIME-Version: 1.0\r\n" .
   "Content-Type: text/html; charset=ISO-8859-1 \r\n"; 
$message = <<<EOD
<!DOCTYPE html>
<head>
<meta http-equiv=Content-Type content=text/html; charset=utf-8 />
<link rel=stylesheet type=text/css href=logo.jpg/>
</head>
<body>

<img src=../../img/logo.jpg style=left: 0;position: absolute; width: 75px;/>
<body style=padding: 0 0 0 100px;position: relative;>
{date(F d, Y )}  <br><br>

<b> {$row_Recordset1['First Name']}&nbsp{$row_Recordset1['Middle Initial']}&nbsp{$row_Recordset1['Last Name']}</b><br>
{$row_Recordset1['Position']}<br>{$row_Recordset1['Company Name']}<br>{$row_Recordset1['Corporate Address']}<br><br>

<p>Dear {$row_Recordset1['Last Name']}:</p>
// the rest of the letters
</body>
</html>
EOD; 
```

我已经进行了几次测试运行，所有显示的是

```
{date(F d, Y )}

Dear : 
```

我认为这些代码没有被识别。有什么建议么？

编辑： html 正在工作。我猜这只是 php 代码不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T06:41:26.677

您是否尝试过发送带有一些基本 html 的电子邮件以查看它是否有效？您的其他代码可能在某种程度上搞砸了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T06:46:19.860

是的，你不能插入这样的函数调用。要插入日期，请​​在这段代码之前创建一个变量，即`$date = date()`. 然后您可以在字符串中使用该变量。

显然`$row_Recordset1['Last Name']`是空的，不存在，包含一个空字符串或空格或一段 HTML。很难说到底是什么，因为我们没有您的数据，也没有为 $row_Recordset1 赋值的代码。

然而，电子邮件被解释为 HTML，否则您将看到 HTML 块而不仅仅是此文本。所以这部分工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T06:47:08.713

```
$headers = "From: jmedalla20@gmail.com \r\n" .
   "MIME-Version: 1.0\r\n" .
   "Content-Type: text/html; charset=ISO-8859-1 \r\n";

$message = <<<EOD
<!DOCTYPE html>
<head>
<meta http-equiv=Content-Type content=text/html; charset=utf-8 />
<link rel=stylesheet type=text/css href=logo.jpg/>
</head>
<body>
<img src=../../img/logo.jpg style=left: 0;position: absolute; width: 75px;/>
<body style=padding: 0 0 0 100px;position: relative;>
EOD;

$message .= date("F d, Y ")."<br><br>";

    $message .= "<b>".$row_Recordset1['First Name']."&nbsp".$row_Recordset1['Middle Initial']."&nbsp".$row_Recordset1['Last Name']."</b><br>";
$message .= $row_Recordset1['Position']."<br>".$row_Recordset1['Company Name']."<br>".$row_Recordset1['Corporate Address']."<br><br>";
$message .= "<p>Dear ".$row_Recordset1['Last Name'].":</p>";
// the rest of the letters
$message .= "</body>
</html>"; 
```

# c# - 如何在 windowsforms 4 中获取数据键

> ID：13356502
> 
> 赞同：2
> 
> 时间：2012-11-13T06:39:24.020
> 
> 标签：c#, winforms

我有一个小问题，我正在使用 Windows 窗体

如何获取我选择的行的数据键，以便我可以将其从数据集/表中删除我见过很多人有同样的问题，他们得到了这个解决方案：

```
 int ID = Convert.ToInt32(gridview.DataKeys[gridview.SelectedIndex].Values.toString()); 
```

但这对我不起作用。我可以输入这个：

```
 int ID = Convert.ToInt32(gridview. 
```

那么智能不会给我数据键。所以这就是他爆发的地方。我错过了某事的参考吗

请给我一个解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T06:43:02.607

[**DataKeys**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.datakeys.aspx)用于`GridView`Web 控件，在窗口窗体中不可用。您需要在数据源中有所需的列来绑定`DataGridView`（对于窗口窗体），如果您不想显示它们，则隐藏它们。

**绑定所需列并隐藏列**

```
 dgv.DataSource = source; 
 dgv.Columns["YourColumnName"].Visible = false; 
```

**从隐藏列中获取价值**

```
string value dgvInHouseApp.Rows[rowIndex].Cells["YourColumnName"].Value.ToString() 
```

# java - 如何在 java 中使用 mockito 测试文件大小？

> ID：13356508
> 
> 赞同：0
> 
> 时间：2012-11-13T06:40:03.303
> 
> 标签：java, file, testing, junit, mockito

我有需要为其创建 JUnit 测试的方法：

```
public class MyClass {
  private String file1;
  private String file2;

  public void myMethodSpaceCheck(){
    if (new File(file1).size() > new File(file2).size() {
       throw new Exception .....  
    } 
  }
} 
```

是否可以使用 Mockito 创建该 JUnit 测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:35:38.563

在使用 Java 处理文件时，我首选的选择是使用 Apache VFS，因为我可以将它们视为任何其他 POJO。显然，当您已经被 File API 困住时，这需要做很多工作。

另一种选择是完全忘记 Mockito 并将这些文件写入系统。我通常会避免这种情况，因为它有时会使测试在某些系统上并行运行变得更加困难。

对于这种特定情况，我的解决方案通常是提供一个特殊的类，比如 FileBuilder，它可以实例化新的文件：

```
public class FileBuilder {
  public java.io.File newFile(String pathname) {
    return new java.io.File(pathname);
  }
} 
```

然后我在将它传递给 MyClass 之前模拟这个类，并根据需要对其进行检测：

```
@Test(expected = Exception.class)
public void should_fail_when_file1_is_bigger_than_file2() {
  FileBuilder mockFile1 = file(2L);
  FileBuilder mockFile2 = file(1L);
  FileBuilder mockFileBuilder = mock(FileBuilder.class);
  when(mockFileBuilder.newFile("file1").thenReturn(mockFile1);
  when(mockFileBuilder.newFile("file2").thenReturn(mockFile2);

  new MyClass(mockFileBuilder).myMethodSpaceCheck();
}

private static File file(long length) {
    File mockFile = mock(File.class);
    when(mockFile.length()).thenReturn(length);
    return mockFile;
} 
```

（您的示例提到 File.size()；我假设您的意思是 File.length()）

MyClass 的实际实现如下所示：

```
public class MyClass {
  private String file1;
  private String file2;
  private final FileBuilder fileBuilder;

  public MyClass() {
    this(new FileBuilder());
  }

  @VisibleForTesting
  MyClass(FileBuilder fileBuilder) {
    this.fileBuilder = fileBuilder;
  }

  public void myMethodSpaceCheck() //...
} 
```

# python - 需要用python在xml中找到principal-id

> ID：13356517
> 
> 赞同：-1
> 
> 时间：2012-11-13T06:41:18.357
> 
> 标签：python, xml, urllib2

使用 urllib2.Request(url) 和 BeautifulSoup 返回以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<results>
 <status code="ok">
 </status>
 <principal-list>
  <principal account-id="1013353221" has-children="false" is-hidden="false" is-primary="false" principal-id="1013353225" training-group-id="" type="user">
   <name>
    First Last
   </name>
   <login>
    first.last
   </login>
   <email>
    first.last@domain.com
   </email>
   <display-uid>
    first.last
   </display-uid>
  </principal>
  <principal account-id="1013353221" has-children="false" is-hidden="false" is-primary="false" principal-id="1115269931" training-group-id="" type="user">
   <name>
    First Last
   </name>
   <login>
    first.last
   </login>
   <email>
    first.last@domain.com
   </email>
   <display-uid>
    first.last
   </display-uid>
  </principal>
 </principal-list>
</results> 
```

这就是我要返回您在上面看到的列表的方法：

```
req = urllib2.Request(url)
response = urllib2.urlopen(req)
userlist = response.read()
soup = BeautifulSoup(userlist)
print(soup.prettify()) 
```

我想打电话`username = sys.argv[1]`并让它返回`principal-id`包含`username`在`<login> </login>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:08:17.010

嗯……听起来很有趣。

尝试这样的事情：

```
req = urllib2.Request(url)
response = urllib2.urlopen(req)
userlist = response.read()
soup = BeautifulSoup(userlist)

username = sys.argv[1]

def get_id(username_var):
    tags = soup.findAll('login')
    for data in tags:
        if str(data.contents[0]).strip() != username_var:
            continue
        print data.parent['account-id']

get_id(username) 
```

这应该返回与提供的用户名关联的帐户 ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T06:42:54.093

也许尝试查看解析 html 的[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)。

# python - Python 2.7 xpath？

> ID：13356526
> 
> 赞同：1
> 
> 时间：2012-11-13T06:42:07.593
> 
> 标签：python, xpath

我在 python 2.4 中使用 xpath，它工作正常。

但是当我切换到 python 2.7 并尝试导入 xpath 库时，它抱怨 xpath 不存在：

```
from xml import xpath 
```

有谁知道 xpath 是否存在于 python 2.7 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T07:00:57.887

如果你想在 python 2.7 中使用 xpath，[`xml.etree.elementTree`](http://docs.python.org/2/library/xml.etree.elementtree.html)它是 Python 2.5 以来标准库的一部分，它包含一个基本的 xpath findall 函数。[PyXML](http://sourceforge.net/projects/pyxml/files/)已过时，不应使用。

如果你需要更强大的东西，我会安装[lxml](http://lxml.de/)。

# eclipse - 如何为通用 Eclipse 编辑器添加文本悬停 - 所有文本编辑器的通用文本悬停

> ID：13356531
> 
> 赞同：1
> 
> 时间：2012-11-13T06:42:41.847
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, eclipse-cdt

我想在`Eclipse`不提供新编辑器的情况下在编辑器中显示文本悬停功能。这意味着我的悬停功能应适用于 CDT 编辑器、JDT 编辑器（Java 编辑器）和所有其他文本编辑器。为此目的是否存在它们的任何通用扩展点？我知道，那里有`java`编辑器`org.eclipse.jdt.ui.javaEdit`或 TextHovers 和 CDT 编辑器`org.eclipse.cdt.ui.textHovers`。但我希望悬停适用于所有类型的编辑器。有什么`extension point`礼物吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T21:45:03.737

我认为您正在寻找的是 org.eclipse.jface.text.ITextHover 扩展点，然后编写一个实现 ITextHover 的类，它允许您为应该显示悬停的区域指定一个 IRegion ，然后是另一种显示悬停的方法基于光标位置的文本。

# java - 如何在 java 中使用循环读取 XML 子节点值

> ID：13356534
> 
> 赞同：3
> 
> 时间：2012-11-13T06:42:57.570
> 
> 标签：java, xml

这是我的xml代码...

```
<flow>
    <TaskID>100</TaskID>
    <TaskID>101</TaskID>
    <TaskID>102</TaskID>
    <TaskID>103</TaskID>    
</flow> 
```

我想知道如何在 java 的 for 循环中获取 taskID 值。请帮我...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T06:51:06.190

DOM 解析器解决方案，相当简单，不需要额外的库。

```
public static void main(String[] args) throws SAXException, IOException,
        ParserConfigurationException {

    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = factory.newDocumentBuilder();

    String input = "<outer>";
    input += "<otherstuff><TaskID>123</TaskID></otherstuff>";
    input += "<flow>";
    input += "<TaskID>100</TaskID>";
    input += "<TaskID>101</TaskID>";
    input += "<TaskID>102</TaskID>";
    input += "<TaskID>103</TaskID>";
    input += "</flow>";
    input += "</outer>";
    Document document = builder.parse(new InputSource(new StringReader(
            input)));

    NodeList flowList = document.getElementsByTagName("flow");
    for (int i = 0; i < flowList.getLength(); i++) {
        NodeList childList = flowList.item(i).getChildNodes();
        for (int j = 0; j < childList.getLength(); j++) {
            Node childNode = childList.item(j);
            if ("TaskID".equals(childNode.getNodeName())) {
                System.out.println(childList.item(j).getTextContent()
                        .trim());
            }
        }
    }
} 
```

如果您的输入来自文件，则需要使用 FileReader。

```
Document document = builder.parse(new InputSource(new FileReader(
        new File("foo.xml")))); 
```

getElementsByTagName() 的替代方法是 XPath，一种用于 XML 的查询语言，如果您有一组复杂的条件要匹配，这将特别有用。

```
XPathFactory xPathfactory = XPathFactory.newInstance();
XPath xpath = xPathfactory.newXPath();
XPathExpression expr = xpath.compile("//flow/TaskID/text()");

Object result = expr.evaluate(document, XPathConstants.NODESET);
NodeList nodes = (NodeList) result;
for (int i = 0; i < nodes.getLength(); i++) {
    System.out.println(nodes.item(i).getTextContent());
} 
```

如果您的 XML 文件很大，例如 100 多 MB / GB，或者您在低内存平台上，那么请考虑使用 SAX 解析器。

```
String input = "<flow><TaskID>100</TaskID><TaskID>101</TaskID><TaskID>102</TaskID><TaskID>103</TaskID></flow>";
SAXParser sax = SAXParserFactory.newInstance().newSAXParser();
DefaultHandler handler = new DefaultHandler() {
    private StringBuilder buffer = new StringBuilder();
    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {
        if ("TaskID".equals(qName)) {
            System.out.println(buffer);
            buffer = new StringBuilder();
        }
    }
    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {
        buffer.append(ch, start, length);
    }
    @Override
    public void startElement(String uri, String localName,
            String qName, Attributes attributes) throws SAXException {
        buffer = new StringBuilder();
    }
};
sax.parse(new InputSource(new StringReader(input)), handler); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T06:58:05.507

这是一个使用[JDOM](http://jdom.org/)的示例，它提供了比现有 Java XML 解析器更令人愉悦的 API：

```
import java.io.File;
import org.jdom2.*;
import org.jdom2.input.*;

public class Test {
    // TODO: More appropriate exception handling :)
    public static void main (String[] args) throws Exception {
        SAXBuilder builder = new SAXBuilder();
        Document doc = builder.build(new File("test.xml"));
        Element root = doc.getRootElement();
        for (Element element : root.getChildren("TaskID")) {
            System.out.println(element.getText());
        }
    }
} 
```

当然，这假设 XML 文档足够小，可以加载到内存中。

（显然，您也可以使用内置库，如果您不做*太多*XML 工作，那很好 - 如果您正在做大量工作，我只是觉得它们有点原始。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T06:48:38.480

使用 xpath 这里有更多信息：

[http://www.vogella.com/articles/JavaXML/article.html](http://www.vogella.com/articles/JavaXML/article.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T07:10:25.880

我个人将[JDOM](https://github.com/downloads/hunterhacker/jdom/jdom-2.0.4.zip)库用于我所有的 XML 操作。下面是我的做法；

```
 String xml = "<flow> " +
                   "<TaskID>100</TaskID>" +
                   "<TaskID>101</TaskID>" +
                   "<TaskID>102</TaskID>" + 
                   "<TaskID>103</TaskID>" + 
              "</flow>";

org.jdom.Document doc = new SAXBuilder().build(new StringReader(xml));

org.jdom.Element rootElement = doc.getRootElement();

List<Element> eles = rootElement.getChildren("TaskID");

for(Element el : eles)
   System.out.println(el.getName()+" : "+el.getValue()); 
```

你可以在这里得到它的文档：http: [//www.jdom.org/](http://www.jdom.org/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-13T14:14:44.827

**使用 SAX 读取 Xml 子级**

```
<?xml version="1.0"?> 
<Patriarch>
   <name>Bill</name>
   <wife>
      <name>Vi</name>
   </wife>
   <son>
      <name>Bill</name>
   </son>
   <daughter>
      <name>Jeri</name>
      <husband>
         <name>Mark</name>
      </husband>
      <son>
         <name>Greg</name>
      </son>
      <son>
         <name>Tim</name>
      </son>
      <son>
         <name>Mark</name>
      </son>
      <son>
         <name>Josh</name>
         <wife>
            <name>Kristine</name>
         </wife>
         <son>
            <name>Blake</name>
         </son>
         <daughter>
            <name>Liah</name>
         </daughter>
      </son>
   </daughter>
</Patriarch> 
```

和Java代码：

```
public class ParseXmlSAX {

    public static void main(String[] args) {
        new ParseXmlSAX("file.xml");
    }

    public ParseXmlSAX(final String file) {
        try {

            SAXParserFactory factory = SAXParserFactory.newInstance();
            SAXParser saxParser = factory.newSAXParser();

            DefaultHandler handler = new DefaultHandler() {
                String key = null;

                public void startElement(String uri, String localName, String qName, Attributes attributes)
                        throws SAXException {

                    if (key == null)
                        key = "|";
                    else
                        key += qName + "|";

                }

                public void endElement(String uri, String localName, String qName) throws SAXException {

                    if (!key.equals("|"))
                        key = key.substring(0, key.lastIndexOf(qName));

                }

                public void characters(char ch[], int start, int length) throws SAXException {
                    String conteudo = new String(ch, start, length).trim();

                    if (!conteudo.isEmpty()) {
                        System.out.println(key + " = " + conteudo);
                    }

                }

            };

            saxParser.parse(this.getClass().getResourceAsStream(file), handler);

        } catch (Exception e) {
            e.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-05-23T05:58:25.793

```
public class Modifier {

    public void modifyXML() {
        String strSrcFile = "E:\\projects\\input\\sample.xml";
        String strOutputFile = "E:\\projects\\output\\sample.xml";
        try {
            DocumentBuilderFactory docFactory = DocumentBuilderFactory
                    .newInstance();
            DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
            Document doc = docBuilder.parse(strSrcFile);
            Node company = doc.getFirstChild();
            System.out.println(company.hasChildNodes());
            NodeList nl = company.getChildNodes();
            for (int i = 0; i < nl.getLength(); i++) {
                Node node = nl.item(i);
                // System.out.println("inner node::"+node.getNodeName());

                if (node.hasChildNodes()) {
                    System.out.println("outer node::" + node.getNodeName());
                    readChildNodes(node);
                } else {

                }
            }

            TransformerFactory transformerFactory = TransformerFactory
                    .newInstance();
            Transformer transformer = transformerFactory.newTransformer();
            DOMSource source = new DOMSource(doc);
            StreamResult result = new StreamResult(new File(strOutputFile));
            transformer.transform(source, result);

        } catch (Exception ee) {
            ee.printStackTrace();
        }
        // Get the root element

    }

    public void readChildNodes(Node node)
    {

        NodeList nl = node.getChildNodes();

        for (int i = 0; i < nl.getLength(); i++) {
            Node innernode = nl.item(i);
            //System.out.println("mediam stage  node::"+innernode.getNodeName());
            if (innernode.hasChildNodes()) {
                System.out.println("inner node::"+innernode.getNodeName());

                readChildNodes(innernode);
            }
            else{

                System.out.println("node dont have childs node::"+innernode.getNodeName());
            }

        }
    }

    public void replaceGraphicCode(Node innernode) {
        NamedNodeMap attr = innernode.getAttributes();
        Node nodeAttr = attr.getNamedItem("id");
        String IDvalue = nodeAttr.getTextContent();

        // nodeAttr.setTextContent("2");
    }

    public void replaceOriginator(Node innernode) {
        NamedNodeMap attr = innernode.getAttributes();
        Node nodeAttr = attr.getNamedItem("enterpriseCode");

    }

    public static void main(String[] args) {
        Modifier objModifier = new Modifier();
        objModifier.modifyXML();
    }
} 
```

# java - 在 JBoss-AS 7 上部署 geoserver.war

> ID：13356539
> 
> 赞同：1
> 
> 时间：2012-11-13T06:43:43.297
> 
> 标签：java, jboss7.x, geoserver

我正在尝试在 JBoss-AS 7.1.1-Final 上部署 geoserver.war (2.2.1)。

日志上传到[Pastebin](http://pastebin.com/JE0kQxdJ)，在那里可读性更好。

旁边两个CNFE

*   07:23:51 java.lang.NoClassDefFoundError: com/sun/imageio/spi/FileImageOutputStreamSpi
*   07:24:01 java.lang.NoClassDefFoundError: com/sun/imageio/spi/FileImageOutputStreamSpi

我认为失败的主要原因在这里

```
07:23:58,357 ERROR [org.apache.catalina.core.StandardContext]
                   (MSC service thread 1-6) Error listenerStart
07:23:58,357 ERROR [org.apache.catalina.core.StandardContext]
                   (MSC service thread 1-6) Context [/geoserver] startup failed due
                   to previous errors 
```

不幸的是，除了 CNFE 和`Error listenerStart`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T11:13:12.207

`jboss-deployment-structure.xml`另一种方法是使用以下内容创建文件geoserver.war/WEB-INF：

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.1">
  <deployment>
    <dependencies>
        <system>
            <paths>
                <path name="com/sun/imageio/spi"/>
                <path name="com/sun/imageio/plugins/common"/>
            </paths>
        </system>
    </dependencies>
  </deployment>
</jboss-deployment-structure> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T08:36:45.137

我不想只给出链接回复，但是 JBoss 论坛中的这个帖子似乎描述了完全相同的问题，并提供了解决方案：

[https://community.jboss.org/thread/177472](https://community.jboss.org/thread/177472)

我引用：

“我发现如果我添加

```
<path name="com/sun/imageio/spi"/> 
```

到 modules/sun/jdk/main 目录中的 module.xml 文件，然后 ClassNotFoundException 消失。”

谷歌：“classnotfound FileImageOutputStreamSpi”

# objective-c - 将 UIBarbuttonItem 定位到最左边

> ID：13356545
> 
> 赞同：0
> 
> 时间：2012-11-13T06:44:42.623
> 
> 标签：objective-c, ios, uibutton, uitoolbar, uitoolbaritem

我有一个`UIBarButtonItem`我想拥抱屏幕最左边的东西。我尝试在按钮和其他配置之前`barbutton`使用**width=0固定，但按钮和****x=0**之间总是有几个像素。

我也试过`imageInset`改变`UIButton`

```
UIButton *moreButton = [UIButton buttonWithType:UIButtonTypeCustom];
moreButton.frame = CGRectMake(0, 0, 60, 35);
[moreButton setImage:[UIImage imageNamed:@"Morebutton"] forState:UIControlStateNormal];
moreButton.imageEdgeInsets = UIEdgeInsetsMake(0, -8, 0, 8);
[moreButton addTarget:self action:@selector(pressedMoreButton:) forControlEvents:UIControlEventTouchUpInside];
UIBarButtonItem *moreBar = [[[UIBarButtonItem alloc] initWithCustomView:moreButton] autorelease]; 
```

但是在屏幕边缘附近点击不会触发`selector`（可能是因为只有图像被移动而不是按钮本身）并且增加`size`按钮的 不会**影响按钮和左侧之间的间隙**。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T06:51:37.863

尝试将您的按钮放到容器视图中并更改按钮在视图上的位置。

```
 UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button setBackgroundImage:buttonImage forState:UIControlStateNormal];   
    button.contentMode = UIViewContentModeScaleAspectFit;       
    button.frame= CGRectMake(-4.0, 0.0, 30, 30);
    [button addTarget:target action:action forControlEvents:UIControlEventTouchUpInside];

    UIView *v=[[[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, cellTextSize.width+10, buttonImage.size.height)] autorelease];
    v.backgroundColor = [UIColor clearColor];
    [v addSubview:button];

    return [[[UIBarButtonItem alloc] initWithCustomView:v] autorelease]; 
```

# c# - 如何识别某个值是否在 C++ 的枚举类型中定义？

> ID：13356546
> 
> 赞同：1
> 
> 时间：2012-11-13T06:44:53.433
> 
> 标签：c#, c++, enums

我需要检查是否在枚举类型中定义了某些值，或者在 C++ 的运行时没有定义。该要求可以通过 C# 轻松完成（参考以下代码）。但是 C++ 在运行时没有类型信息（据我所知）。**有没有办法解决？**

PS：在我的项目中，枚举类型定义了数百个值，所以我不想复制源代码中的值（例如，创建一个映射并将所有有效值推入其中）实现增加复杂性的逻辑可维护性。

```
enum BoFormObjectEnum
{
    fo_Items = 4,
    fo_SalesEmployee = 53,
    fo_TransactionTemplates = 55,
    fo_JournalPosting = 30,
    fo_CheckForPayment = 57,
    fo_PaymentTermsTypes = 40,
    ...
}

class Program
{
    static void Main(string[] args)
    {
        var array = Enumerable.Range(1, 60);
        foreach (var item in array)
        {
            if (Enum.IsDefined(typeof(BoFormObjectEnum), item))
                // do some logic
            else
                // do some other logic
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T06:51:39.567

您正在寻找它称为[反射](http://en.wikipedia.org/wiki/Reflection_%28computer_programming%29)，C++ 不提供此功能，但是有[几篇关于此](http://www.google.com/search?q=c%2b%2b%20enum%20reflection)的文章。

此外，新的 C++11 标准引入[了一些关于枚举的新内容](http://www.cprogramming.com/c++11/c++11-nullptr-strongly-typed-enum-class.html)，使它们更加类型安全，而不仅仅是一个带有值的随机变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:31:26.817

有解决方法，但它以[boost::fusion](http://www.boost.org/doc/libs/1_52_0/libs/fusion/doc/html/index.html)的形式出现。这个库的名字来源于它的目的是混合纯编译时模板元编程库[boost::mpl](http://www.boost.org/doc/libs/1_52_0/libs/mpl/doc/index.html)和运行时[标准模板库](http://www.cplusplus.com/reference/stl/)。

boost::fusion 允许在编译时初始化和使用向量或映射，也可以在运行时使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T08:03:08.300

C++ 没有提供你想要的。

大多数“正确”的解决方案是重新设计整个事物，而不是像这样使用 C++ 枚举。它与 C# enum 不同，它们的不同之处足以让您不应该将它们视为同一事物，就像您认为 union 和 enum 是同一事物一样。清除 C# 解决方案的头脑，设计 C++ 解决方案。

最简单的，特别是如果枚举值不经常改变（如果他们改变，为什么它们是硬编码的枚举？），就是“咬紧牙关”并创建一个具有有效值的集合或映射，当你想要的时候要知道某个数字是否被定义为枚举，测试它是否在集合中，或者您是否还想要名称，然后使用 map 以便您可以将值包含为 int 并将名称包含为字符串。

# java - 搜索但不需要按钮，JFrame

> ID：13356548
> 
> 赞同：2
> 
> 时间：2012-11-13T06:45:21.573
> 
> 标签：java, database, swing, autocomplete, jframe

我有一个 JFrame，其中有一个表，并且搜索已连接到数据库。我想搜索，但这样做不需要按钮。因此，当我开始在文本字段中填写名称时，搜索将立即完成。就像 html 中的 ajax 一样。这可以在java中完成吗？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T09:31:35.253

> 因此，当我开始在文本字段中填写名称时，搜索将立即完成

您可以通过将 a 附加`DocumentListener`到 的 来`Document`对所有输入做出反应`JTextField`。每次用户向文本字段提供输入时（无论是通过键入、拖放、复制粘贴等），都会通知该侦听器。

然而，关键是您想要对用户输入执行的操作。在`DocumentListener`事件调度线程上触发，该线程不应被长时间运行的操作阻塞，否则您的 UI 将冻结。执行数据库查询被认为是“长时间运行的操作”。这意味着您必须确保您的搜索是在后台线程上执行的。搜索完成后，您可以更新表，这必须在 Event Dispatch Thread 上完成。该类`SwingWorker`在这种情况下很有用。有关线程规则的更多信息，请参阅[本教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)。

第二个问题是您可能希望在提供新输入时取消先前的搜索。很可能用户可以更快地键入，然后您可以查询数据库并`JTable`使用结果填充 a（假设网络连接不是那么快）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T06:47:55.110

是的，这可以在 Java 中使用附加到文本字段的 actionListener 来完成。[有关actionListener](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/event/ActionListener.html) javadocs ，请参见此处。

这里有一个类似的stackoverflow问题：[link](https://stackoverflow.com/questions/8383975/let-actionlistener-listen-for-change-in-jtextfield-instead-of-only-enter)

# java - 使用 Spring 控制器处理错误 404

> ID：13356549
> 
> 赞同：19
> 
> 时间：2012-11-13T06:45:21.607
> 
> 标签：java, spring, spring-mvc

我`@ExceptionHandler`用来处理我的网络应用程序抛出的异常，在我的情况下，我的应用程序返回`JSON`响应，以`HTTP status`获取对客户端的错误响应。

但是，我试图弄清楚如何处理`error 404`以返回类似的 JSON 响应，就像由`@ExceptionHandler`

**更新：**

我的意思是，当访问一个不存在的 URL 时

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2014-12-01T08:07:51.303

我使用 spring 4.0 和 java 配置。我的工作代码是：

```
@ControllerAdvice
public class MyExceptionController {
    @ExceptionHandler(NoHandlerFoundException.class)
    public ModelAndView handleError404(HttpServletRequest request, Exception e)   {
            ModelAndView mav = new ModelAndView("/404");
            mav.addObject("exception", e);  
            //mav.addObject("errorcode", "404");
            return mav;
    }
} 
```

在 JSP 中：

```
 <div class="http-error-container">
        <h1>HTTP Status 404 - Page Not Found</h1>
        <p class="message-text">The page you requested is not available. You might try returning to the <a href="<c:url value="/"/>">home page</a>.</p>
    </div> 
```

对于初始化参数配置：

```
public class AppInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {
    @Override
    public void customizeRegistration(ServletRegistration.Dynamic registration) {
        registration.setInitParameter("throwExceptionIfNoHandlerFound", "true");
    }
} 
```

或通过xml：

```
<servlet>
    <servlet-name>rest-dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>throwExceptionIfNoHandlerFound</param-name>
        <param-value>true</param-value>
    </init-param>
</servlet> 
```

另请参阅： [Spring MVC Spring 安全性和错误处理](https://stackoverflow.com/questions/18322279/spring-mvc-spring-security-and-error-handling)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-13T06:52:02.557

使用 spring > 3.0 使用 @ResponseStatus

```
 @ResponseStatus(value = HttpStatus.NOT_FOUND)
  public class ResourceNotFoundException extends RuntimeException {
    ...
}

    @Controller
    public class MyController {
    @RequestMapping.....
    public void handleCall() {
        if (isFound()) {
        // do some stuff
        }
        else {
              throw new ResourceNotFoundException(); 
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-13T11:23:13.907

找出最简单的方法是使用以下方法：

```
@ExceptionHandler(Throwable.class)
  public String handleAnyException(Throwable ex, HttpServletRequest request) {
    return ClassUtils.getShortName(ex.getClass());
  } 
```

如果 URL 在 DispatcherServlet 的范围内，则此方法将捕获由错误输入或其他任何原因引起的任何 404，但如果输入的 URL 超出 DispatcherServlet 的 URL 映射，则您必须使用：

```
<error-page>
   <exception-type>404</exception-type>
   <location>/404error.html</location>
</error-page> 
```

或者

> 为您的 DispatcherServlet 映射 URL 提供“/”映射，以便处理特定服务器实例的所有映射。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-10-12T07:51:24.393

```
public final class ResourceNotFoundException extends RuntimeException {

}

@ControllerAdvice
public class AppExceptionHandler {
    @ExceptionHandler(ResourceNotFoundException.class)
    @ResponseStatus(HttpStatus.NOT_FOUND)
    public String handleNotFound() {
        return "404";
    }
} 
```

只需定义一个 Exception，一个 ExceptionHandler，从您的业务代码控制器中抛出 Exception。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-13T09:28:28.107

您可以使用 servlet 标准方式来处理 404 错误。在里面添加以下代码`web.xml`

```
<error-page>
   <exception-type>404</exception-type>
   <location>/404error.html</location>
</error-page> 
```

# c# - 获取列表视图中选定的子项

> ID：13356550
> 
> 赞同：1
> 
> 时间：2012-11-13T06:45:29.580
> 
> 标签：c#, winforms

我正在尝试查找 ListView 的选定子项。

我有一个具有以下属性的 ListView

```
View = Details
FullRowSelect = True
GridLines = True
ShowItemToolTips =  True
MultiSelect = False 
```

然后我添加 3 列和多行，每行有 2 个子项来填充每一列。我最终得到一个看起来像这样的 ListView

```
Header1   | Header2    | Header3
==========+============+===========
Item 1    | Sub1Item1  | Sub2Item1
Item 2    | Sub1Item2  | Sub2Item2
Item 3    | Sub1Item3  | Sub2Item3 
```

如果我将鼠标悬停在特定项目上，比如说 Sub2Item2，它将给我适当的工具提示“Sub2Item2”。但是，我想捕获鼠标单击或鼠标悬停事件并获取关联的 SubItem，以便我可以使用它的 Tag 属性进行进一步处理。

我已经检查了 ItemMouseHover() 事件的 args 并且找不到任何可以执行此操作的东西，在网上搜索后我也找不到。

[编辑澄清] 我正在尝试挂钩诸如 SelectedIndexChange 或 MouseUp 之类的事件（任何与鼠标单击相关的事件都可以）并**获取当前选定的 SubItem**。把它想象成一个电子表格，当我点击一个单元格（SubItem）时，我想获取单元格本身（SubItem）而不是整行（ListViewItem）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T07:04:27.503

我认为[ListView.HitTest](http://msdn.microsoft.com/en-us/library/w8ssfa8a.aspx)方法是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:15:26.117

在您的情况下[**`SelectedItems`**](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.selecteditems.aspx)，属性应该可以工作，直到考虑到 Hover。对于悬停事件，有一个名为[**`HoverSelection`**](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.hoverselection.aspx).

# matlab - Matlab，结构到矩阵形式，矩阵方向正确

> ID：13356554
> 
> 赞同：4
> 
> 时间：2012-11-13T06:45:37.877
> 
> 标签：matlab, matrix, struct

我有一个名为poseSets的结构，它包含两件事：

1.  姿势
2.  时间

所以我想要做的是将姿势（姿势是一个 4x4 矩阵）放入一个大的长`(4xN_Poses) x 4`矩阵中。

所以让我们想象一下我有一个 10 长的结构列表。通过这样做，我几乎可以得到我的清单：

```
[structList.Pose] 
```

但这给了我一个`(4xN) x 4`矩阵，即：

```
1 2 3 4 | 1 2 3 4 | 1 2 3 4 | ...
5 6 7 8 | 5 6 7 8 | 5 6 7 8 | ...
3 5 6 8 | 3 5 6 8 | 3 5 6 8 | ...
0 0 0 1 | 0 0 0 1 | 0 0 0 1 | ... 
```

但我真正想要的是：

```
1 2 3 4
5 6 7 8
3 5 6 8
0 0 0 1
_______ 
1 2 3 4
5 6 7 8
3 5 6 8
0 0 0 1
_______ 
1 2 3 4
5 6 7 8
3 5 6 8
0 0 0 1
_______ 
: : : : 
```

现在我不能转置它，因为每个矩阵都会被单独转置并且是错误的方式。

现在您可以使用 for 循环来解决这个问题：

```
poseList = [];

for i = 1:length(PoseSets);
    poseList = [poseList; PoseSets(i).Pose];
end 
```

注意：poseList 包含我想要的。

但我个人认为 matlab 很神奇，你应该能够用英语写出你想要的东西，matlab 会提供。有谁知道一个班轮或更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T07:20:06.710

是的，我也觉得这很烦人……Matlab 中的某些内容在行优先或列优先方面似乎不一致。这是一个例子，其中事物是按列连接的（= 行优先），而绝大多数算法都是列优先的。`linspace`或通用范围（例如，`x = 0:5:100`）是行优先矩阵生成的另一个主要例子，而`x(:)`然后又是列优先......¯\（°_°）/¯

无论如何，最简单的解决方法是强制列主连接：

```
cat(1, structList.Pose) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T09:57:23.757

试试这个：`vertcat(structList.Pose)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T07:47:42.717

可以做到，但肯定不是单行：

```
% generate some data
M = magic(4)
poseSets = struct('pose',M);
poseSets = repmat(poseSets,3,1)

poseList = cellfun(@transpose, {poseSets.pose}, 'UniformOutput', false);
poseList = [poseList{:}].' 
```

# php - ( sqlfiddle ) 不返回左表中的所有行

> ID：13356556
> 
> 赞同：1
> 
> 时间：2012-11-13T06:45:49.730
> 
> 标签：php, mysql, database

[http://sqlfiddle.com/#!2/41cf8/1](http://sqlfiddle.com/#!2/41cf8/1)

我实际上希望它返回这样的东西

```
firstname - chuck
lastname - null 
```

但它只返回我的名字行

我如何修改它以返回带有空值的姓氏？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T06:50:15.617

您需要将`AND users_meta.meta_user_id = 1`WHERE 子句移到 JOIN 子句中。

在 WHERE 子句中，它限制了返回的行。在 JOIN 中，它仅限制 JOINed 行，并且由于您使用的是 LEFT 连接，您仍然会得到姓氏。

# python - 从 python Django 的角度来看，机器人与爬虫有什么不同

> ID：13356558
> 
> 赞同：3
> 
> 时间：2012-11-13T06:45:56.223
> 
> 标签：python, django, web-crawler, scrapy, bots

实际上，我对术语感到困惑。我正在研究scrapy，我认为它用于抓取网站并提取一些数据。

但我想制作一些类似于实际用户的python程序。我的意思是自动化任务。

例如，访问 www.myblah.com，然后在某个类别中获得最便宜的产品，如果低于我的预设金额，请给我发送电子邮件。

现在我不知道这些类型的东西是爬行还是其他。

我可以在scrapy中做到这一点，或者我们有其他库来完成这些任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T06:59:11.980

[Scrapy](http://scrapy.org/)是可用于创建机器人或爬虫（又名蜘蛛）的框架。爬虫是特定类型的机器人，但机器人不一定是爬虫。爬虫的定义是旨在探索页面（节点）及其嵌入的 URL（边缘）的图形，尽管它们可能会被限制跟踪特定的 URL。

自动化任务是机器人的工作。Scrapy 是否会为此工作将取决于需要哪些信息以及如何采取行动。如今，许多网站都大量使用 javascript，因此如果机器人无法执行 javascript 并正确提供 cookie，它可能无法获取信息来完成任务。一些网络自动化任务可能需要浏览器插件，甚至可能需要 GUI 自动化工具。

# ios - 设备上的内存警告，而不是仪器

> ID：13356559
> 
> 赞同：5
> 
> 时间：2012-11-13T06:46:03.053
> 
> 标签：ios, restkit, instruments, didreceivememorywarning

我有一个巨大的同步过程，我在其中下载并解压缩 400-500 个`XML`文件，然后解析它。有了这些数据，我将在`RestKit API`. 一开始，我有一个内存警告，实时字节为 450mb+，因为我没有使用自动释放池，只尝试在最后保存核心数据。

我修复了这个问题，现在经常保存到核心数据并使用 `@autoreleasepool`块。当我现在使用仪器运行我的应用程序时，我可以看到实时字节如何只有 20mb-30mb，总是释放内存并且永远不会变大。这个过程是有效的。但是当我在没有工具的情况下启动应用程序时，在查看文件后我得到一个`Memory Warning`. 后来应用程序崩溃。

`instruments`使用和不使用该工具运行应用程序有什么区别？为什么会以不同的结果结束？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-14T23:32:01.247

我添加这个答案是因为我很高兴看到这个页面。

@borrrden*的*建议部分正确。您可以配置配置文件时将使用的构建设置。要配置它，转到 Xcode 并打开 Edit Scheme 对话框并在左侧菜单中选择*Profile XXX.app*。您将看到可以选择构建配置（调试或发布）。

![在此处输入图像描述](../Images/e15786cf1cf64475b4565ddc297880ab.png)

@hooleyhoop*的*评论对于找到解决方案更为关键。即使您的 Profile Build Configuration 设置为 Debug，Profiling 和 Xcode 中的默认 Run 之间仍然存在差异。您可以在*运行*部分中指定*诊断。*在那里，在*内存管理*下有一个名为*Enable Zombie Objects*的选项。确保**未选中**此选项。

 *****![在此处输入图像描述](../Images/51b1944e32f005f80d46de26621b8cdd.png)

分析时不使用这些诊断运行设置。这就是您正在经历的行为的解释。配置文件部分也没有诊断选项卡。

* * *

*结果是我的游戏（阿甘正传）在启用Zombie Objects*的主菜单中无操作 5 分钟后崩溃。一旦我禁用了*Zombie Objects*，我的游戏就可以无限运行。45 分钟后，仍然没有内存警告。*****

# iphone - 如何在 iPhone 的滚动视图上实现非矩形滚动内容？

> ID：13356560
> 
> 赞同：0
> 
> 时间：2012-11-13T06:46:06.110
> 
> 标签：iphone, objective-c, uiscrollview

通常，scrollView 的内容视图是一个矩形。但我想实现的不是矩形......例如...... ![在此处输入图像描述](../Images/74dfb14a9d42f1362f0e13c30a2a255d.png)

黄色的 Grid 6 是当前位置...这是示例流程：

1.  用户向左滑动。（无法向左滚动） 当前：6。
2.  用户向右滑动。（向右滚动）当前：7。
3.  用户向下滑动。（向下滚动）当前：8。
4.  用户向下滑动。（无法向下滚动） 当前：8。

如您所见，scrollView 的 Content 视图不是矩形。关于如何实施它的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:06:36.403

这是一个有趣的想法。我能想到一些可行的方法。我尝试了一个，你可以在[我的 github 存储库](https://github.com/mayoff/stackoverflow-13356560-nonrectangular-UIScrollView)中找到我的实现。下载并亲自试用。

我的方法是使用 normal `UIScrollView`，并将其限制`contentOffset`在委托的`scrollViewDidScroll:`方法（以及其他一些委托方法）中。

### 预赛

首先，我们需要一个页面大小的常量：

```
static const CGSize kPageSize = { 200, 300 }; 
```

我们需要一个数据结构来保存页面网格中的当前 x/y 位置：

```
typedef struct {
    int x;
    int y;
} MapPosition; 
```

我们需要声明我们的视图控制器符合`UIScrollViewDelegate`协议：

```
@interface ViewController () <UIScrollViewDelegate>

@end 
```

我们将需要实例变量来保存页面的网格（地图）、该网格中的当前位置和滚动视图：

```
@implementation ViewController {
    NSArray *map_;
    MapPosition mapPosition_;
    UIScrollView *scrollView_;
} 
```

### 初始化地图

我的地图只是一个数组数组，每个可访问页面和`[NSNull null]`不可访问的网格位置都有一个字符串名称。我将从视图控制器的 init 方法初始化地图：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    if (self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]) {
        [self initMap];
    }
    return self;
}

- (void)initMap {
    NSNull *null = [NSNull null];
    map_ = @[
    @[ @"1", null, @"2"],
    @[ @"3", @"4", @"5" ],
    @[ null, @"6", @"7" ],
    @[ null, null, @"8" ],
    ];
    mapPosition_ = (MapPosition){ 0, 0 };
} 
```

### 设置视图层次结构

我的视图层次结构将如下所示：

*   顶层视图（灰色背景）
    *   滚动视图（透明背景）
        *   内容视图（棕褐色背景）
            *   第 1 页视图（带阴影的白色）
            *   第 2 页视图（带阴影的白色）
            *   第 3 页视图（带阴影的白色）
            *   等等

通常我会在 xib 中设置我的一些视图，但由于很难在 stackoverflow 答案中显示 xib，所以我将在代码中完成所有操作。所以在我的`loadView`方法中，我首先设置了一个“内容视图”，它将存在于滚动视图中。内容视图将包含每个页面的子视图：

```
- (void)loadView {
    UIView *contentView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, [map_[0] count] * kPageSize.width, map_.count * kPageSize.height)];
    contentView.backgroundColor = [UIColor colorWithHue:0.1 saturation:0.1 brightness:0.9 alpha:1];
    [self addPageViewsToContentView:contentView]; 
```

然后我将创建我的滚动视图：

```
 scrollView_ = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, kPageSize.width, kPageSize.height)];
    scrollView_.delegate = self;
    scrollView_.bounces = NO;
    scrollView_.autoresizingMask = (UIViewAutoresizingFlexibleLeftMargin
                                    | UIViewAutoresizingFlexibleRightMargin
                                    | UIViewAutoresizingFlexibleTopMargin
                                    | UIViewAutoresizingFlexibleBottomMargin); 
```

我将内容视图添加为滚动视图的子视图，并设置滚动视图的内容大小和偏移量：

```
 scrollView_.contentSize = contentView.frame.size;
    [scrollView_ addSubview:contentView];
    scrollView_.contentOffset = [self contentOffsetForCurrentMapPosition]; 
```

最后，我创建了我的顶级视图并将滚动视图作为子视图提供给它：

```
 UIView *myView = [[UIView alloc] initWithFrame:scrollView_.frame];
    [myView addSubview:scrollView_];
    myView.backgroundColor = [UIColor colorWithWhite:0.95 alpha:1];
    self.view = myView;
} 
```

这是我为当前地图位置和任何地图位置计算滚动视图的内容偏移量的方法：

```
- (CGPoint)contentOffsetForCurrentMapPosition {
    return [self contentOffsetForMapPosition:mapPosition_];
}

- (CGPoint)contentOffsetForMapPosition:(MapPosition)position {
    return CGPointMake(position.x * kPageSize.width, position.y * kPageSize.height);
} 
```

要为每个可访问页面创建内容视图的子视图，我会遍历地图：

```
- (void)addPageViewsToContentView:(UIView *)contentView {
    for (int y = 0, yMax = map_.count; y < yMax; ++y) {
        NSArray *mapRow = map_[y];
        for (int x = 0, xMax = mapRow.count; x < xMax; ++x) {
            id page = mapRow[x];
            if (![page isKindOfClass:[NSNull class]]) {
                [self addPageViewForPage:page x:x y:y toContentView:contentView];
            }
        }
    }
} 
```

以下是我创建每个页面视图的方式：

```
- (void)addPageViewForPage:(NSString *)page x:(int)x y:(int)y toContentView:(UIView *)contentView {
    UILabel *label = [[UILabel alloc] initWithFrame:CGRectInset(CGRectMake(x * kPageSize.width, y * kPageSize.height, kPageSize.width, kPageSize.height), 10, 10)];
    label.text = page;
    label.textAlignment = NSTextAlignmentCenter;
    label.layer.shadowOffset = CGSizeMake(0, 2);
    label.layer.shadowRadius = 2;
    label.layer.shadowOpacity = 0.3;
    label.layer.shadowPath = [UIBezierPath bezierPathWithRect:label.bounds].CGPath;
    label.clipsToBounds = NO;
    [contentView addSubview:label];
} 
```

### 约束滚动视图的`contentOffset`

当用户四处移动手指时，我想防止滚动视图显示不包含页面的内容区域。每当滚动视图滚动（通过更新它的`contentOffset`），它发送`scrollViewDidScroll:`到它的委托，所以我可以实现`scrollViewDidScroll:`重置`contentOffset`如果它超出范围：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    CGPoint contentOffset = scrollView_.contentOffset; 
```

首先，我想限制`contentOffset`用户只能水平或垂直滚动​​，而不是对角滚动：

```
 CGPoint constrainedContentOffset = [self contentOffsetByConstrainingMovementToOneDimension:contentOffset]; 
```

接下来，我想限制`contentOffset`它只显示包含页面的滚动视图的一部分：

```
 constrainedContentOffset = [self contentOffsetByConstrainingToAccessiblePoint:constrainedContentOffset]; 
```

如果我的约束已修改`contentOffset`，我需要告诉滚动视图：

```
 if (!CGPointEqualToPoint(contentOffset, constrainedContentOffset)) {
        scrollView_.contentOffset = constrainedContentOffset;
    } 
```

最后，我根据 (constrained) 更新我对当前地图位置的想法`contentOffset`：

```
 mapPosition_ = [self mapPositionForContentOffset:constrainedContentOffset];
} 
```

这是我计算给定地图位置的方法`contentOffset`：

```
- (MapPosition)mapPositionForContentOffset:(CGPoint)contentOffset {
    return (MapPosition){ roundf(contentOffset.x / kPageSize.width),
        roundf(contentOffset.y / kPageSize.height) };
} 
```

以下是我如何将运动限制为水平或垂直并防止对角线运动：

```
- (CGPoint)contentOffsetByConstrainingMovementToOneDimension:(CGPoint)contentOffset {
    CGPoint baseContentOffset = [self contentOffsetForCurrentMapPosition];
    CGFloat dx = contentOffset.x - baseContentOffset.x;
    CGFloat dy = contentOffset.y - baseContentOffset.y;
    if (fabsf(dx) < fabsf(dy)) {
        contentOffset.x = baseContentOffset.x;
    } else {
        contentOffset.y = baseContentOffset.y;
    }
    return contentOffset;
} 
```

这是我如何限制`contentOffset`只去有页面的地方：

```
- (CGPoint)contentOffsetByConstrainingToAccessiblePoint:(CGPoint)contentOffset {
    return [self isAccessiblePoint:contentOffset]
        ? contentOffset
        : [self contentOffsetForCurrentMapPosition];
} 
```

决定一个点是否可访问是一个棘手的问题。仅将点的坐标四舍五入到最近的潜在页面中心并查看该四舍五入的点是否代表实际页面是不够的。例如，让用户从第 1 页向左/向右滚动，显示第 1 页和第 2 页之间的空白区域，直到第 1 页离开屏幕的一半。我们需要将该点向下**和**向上舍入到潜在的页面中心，并查看两个舍入点是否代表有效页面。就是这样：

```
- (BOOL)isAccessiblePoint:(CGPoint)point {
    CGFloat x = point.x / kPageSize.width;
    CGFloat y = point.y / kPageSize.height;
    return [self isAccessibleMapPosition:(MapPosition){ floorf(x), floorf(y) }]
        && [self isAccessibleMapPosition:(MapPosition){ ceilf(x), ceilf(y) }];
} 
```

检查地图位置是否可访问意味着检查它是否在网格的边界内，并且该位置实际上有一个页面：

```
- (BOOL)isAccessibleMapPosition:(MapPosition)p {
    if (p.y < 0 || p.y >= map_.count)
        return NO;
    NSArray *mapRow = map_[p.y];
    if (p.x < 0 || p.x >= mapRow.count)
        return NO;
    return ![mapRow[p.x] isKindOfClass:[NSNull class]];
} 
```

### 强制滚动视图停留在页面边界

如果您不需要强制滚动视图停留在页面边界处，则可以跳过其余部分。我上面描述的一切都将在没有其余部分的情况下工作。

我尝试设置`pagingEnabled`滚动视图以强制它在页面边界处停止，但它不能可靠地工作，所以我必须通过实现更多委托方法来强制它。

我们需要几个实用函数。第一个函数只接受 a `CGFloat`，如果它是正数则返回 1 ，否则返回 -1 ：

```
static int sign(CGFloat value) {
    return value > 0 ? 1 : -1;
} 
```

第二个函数采用速度。如果速度的绝对值低于阈值，则返回 0。否则，它返回速度的符号：

```
static int directionForVelocity(CGFloat velocity) {
    static const CGFloat kVelocityThreshold = 0.1;
    return fabsf(velocity) < kVelocityThreshold ? 0 : sign(velocity);
} 
```

现在我可以实现当用户停止拖动时滚动视图调用的委托方法之一。在这个方法中，我将`targetContentOffset`滚动视图设置为用户滚动方向上最近的页面边界：

```
- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset {
    if (fabsf(velocity.x) > fabsf(velocity.y)) {
        *targetContentOffset = [self contentOffsetForPageInHorizontalDirection:directionForVelocity(velocity.x)];
    } else {
        *targetContentOffset = [self contentOffsetForPageInVerticalDirection:directionForVelocity(velocity.y)];
    }
} 
```

这是我如何在水平方向上找到最近的页面边界。它依赖于`isAccessibleMapPosition:`我之前已经定义供以下用户使用的方法`scrollViewDidScroll:`：

```
- (CGPoint)contentOffsetForPageInHorizontalDirection:(int)direction {
    MapPosition newPosition = (MapPosition){ mapPosition_.x + direction, mapPosition_.y };
    return [self isAccessibleMapPosition:newPosition] ? [self contentOffsetForMapPosition:newPosition] : [self contentOffsetForCurrentMapPosition];
} 
```

以下是我如何在垂直方向上找到最近的页面边界：

```
- (CGPoint)contentOffsetForPageInVerticalDirection:(int)direction {
    MapPosition newPosition = (MapPosition){ mapPosition_.x, mapPosition_.y + direction };
    return [self isAccessibleMapPosition:newPosition] ? [self contentOffsetForMapPosition:newPosition] : [self contentOffsetForCurrentMapPosition];
} 
```

我在测试中发现该设置`targetContentOffset`并不能可靠地强制滚动视图停留在页面边界上。例如，在 iOS 5 模拟器中，我可以从第 5 页向右/向左拖动，在中途停止到第 4 页，即使我设置`targetContentOffset`到第 4 页的边界，滚动视图也会停止滚动到 4/5 边界在屏幕中间。

为了解决这个错误，我们必须实现另外两个`UIScrollViewDelegate`方法。当触摸结束时调用这个：

```
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate {
    if (!decelerate) {
        [scrollView_ setContentOffset:[self contentOffsetForCurrentMapPosition] animated:YES];
    }
} 
```

当滚动视图停止减速时调用这个：

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
    CGPoint goodContentOffset = [self contentOffsetForCurrentMapPosition];
    if (!CGPointEqualToPoint(scrollView_.contentOffset, goodContentOffset)) {
        [scrollView_ setContentOffset:goodContentOffset animated:YES];
    }
} 
```

### 结束

正如我一开始所说，您可以从[我的 github 存储库](https://github.com/mayoff/stackoverflow-13356560-nonrectangular-UIScrollView)下载我的测试实现并自己尝试一下。

就是这样，伙计们！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:59:39.460

我假设您在分页模式下使用 UIScrollView（滑动以显示整个新屏幕）。

稍微玩一下，你就可以达到你想要的效果。

诀窍是确保您当前正在查看的任何正方形都配置了 UIScrollView 以便只有可见的中央视图和您也可以滚动的周围视图被添加到滚动视图（并且在正确的偏移量） . 您还必须确保正确设置可滚动内容的大小（和当前偏移量），以防止滚动到没有内容的方向。

示例：假设您当前正在查看广场 6。那时，您的滚动视图将只添加 4 个视图：4、5、6 和 7，在正确的相对偏移量中。并且您将滚动视图的内容大小设置为 2 x 2 正方形大小。这将防止向下或向左滚动（没有图块），但允许以正确的方向滚动。

您需要您的委托来检测`scrollViewDidEndDecelerating:`. 在这种情况下，您必须如上所述为新位置设置视图、内容偏移量和内容大小。

# perl - 查找具有给定特征的所有属性

> ID：13356568
> 
> 赞同：0
> 
> 时间：2012-11-13T06:46:57.420
> 
> 标签：perl, moose, traits

我看了又看，但似乎找不到 Moose::Meta 函数来返回所有具有给定特征的属性。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T06:55:18.173

似乎我搜索的不够深入：

Moose::Meta::Role

*$metarole->消费者；返回使用此角色的类和角色的名称列表。*

# php - 将使用 jquery ajax 和 php 的动画表单提交到 mysql 数据库

> ID：13356571
> 
> 赞同：0
> 
> 时间：2012-11-13T06:47:25.330
> 
> 标签：php, jquery, mysql, ajax

在过去的两天里，我一直在尝试使用 jquery ajax、php 向 mysql 数据库提交表单时遇到问题。我重用了我在网上找到的动画表单的代码。html代码如下（文件名：“Slider.html”）：

```
<html>
<body>
<div id="form_wrapper" class="form_wrapper">
        <form class="register" style="right:-500px;backgroundcolor:grey;">
            <h3>Register</h3>
            <div class="column">
                <div>
                    <label>First Name:</label>
                    <input type="text" />
                    <span class="error">This is an error</span>
                </div>
                <div>
                    <label>Last Name:</label>
                    <input type="text" />
                    <span class="error">This is an error</span>
                </div>
            </div>
            <div class="column">
                <div>
                    <label>Username:</label>
                    <input type="text"/>
                    <span class="error">This is an error</span>
                </div>
                <div>
                    <label>Email:</label>
                    <input type="text" />
                    <span class="error">This is an error</span>
                </div>
                <div>
                    <label>Password:</label>
                    <input type="password" id="r_passwordField"/>
                    <span class="error">This is an error</span>
                </div>
            </div>
            <div class="bottom">
                <div class="remember">
                    <input type="checkbox" />
                    <span>Send me updates</span>
                    </div>
                    <input type="submit" id="registrationform" value="register"/>
                    <a href="index.html" rel="login" class="linkform">You have an account already? Log in 

here</a>
                    <div class="clear"></div>
                </div>      
        </form>

        <form class="login active">
            <h3>Login</h3>
            <div>
                <label>Username:</label>
                <input type="text" />
                <span class="error">This is an error</span>
            </div>
            <div>
                <label>Password: <a href="forgot_password.html" rel="forgot_password" class="forgot 

linkform">Forgot your password?</a></label>
                <input type="password" id="l_passwordField" size="10"/>
                <span class="error">This is an error </span>
            </div>
            <div class="bottom">
                <div class="remember"><input type="checkbox" /><span>Keep me logged in</span></div>
                <input type="submit" id="loginform" value="Login"></input>
                <a href="register.html" rel="register" class="linkform">You don't have an account yet? 

Register here</a>
                <div class="clear"></div>
            </div>
        </form>     <form class="forgot_password">
            <h3>Forgot Password</h3>
                <div>
                    <label>Username or Email:</label>
                    <input type="text" />
                    <span class="error">This is an error</span>
                </div>
                <div class="bottom">
                    <input type="submit" id="forgortform" value="Send reminder"></input>
                    <a href="index.html" rel="login" class="linkform">Suddenly remebered? Log in here</a>
                    <a href="register.html" rel="register" class="linkform">You don't have an account? 

Register here</a>
                    <div class="clear"></div>
                </div>
        </form>

</div>

    <div id="graph-wrapper" class="graph-container" style="display:none">
        <h3>Standard Diviation Bell Curve<h3>
        <div class="graph-info">
                     <a href="javascript:void(0)" class="visitors">Visitor</a>
             <a href="#" id="lines" class="active"><span></span></a>
        </div>

        <div class="graph-container">
                 <div id="graph-lines"></div>
             <div id="graph-bars"></div>
        </div>
    </div>
</div>
</body>
</html> 
```

jquery ajax代码如下（jquery脚本和html代码在同一个文件）：

```
<script> 
    $(document).ready(function(){

                                 //animated code and other codes omitted
          ("#registrationform").click(function(){
                    $.post("postdata.php",
    {fname:"Ibrahim",lname:"Ahmadu",email:"ibrostay@yahoo.com",uid:"ibro2stay",pwd:"ibro2stay",mean:"0.1",varience:"0.1",sdev:"0.

    1",duration:"0.1"},function(responce){

                        if(responce==0){
                                alert("There was an error updating the record");

                            }else{
                                alert("update successful");

                                }       
                            });
            });
            });
</script> 
```

下面是php代码（php代码文件名：“postdata.php”）：

```
<?php 
$fname=$_REQUEST["fname"];
$lname=$_REQUEST["lname"];
$email=$_REQUEST["email"];
$uid=$_REQUEST["uid"];
$pwd=$_REQUEST["pwd"];
$mean=$_REQUEST["mean"];
$varience=$_REQUEST["varience"];
$sdev=$_REQUEST["sdev"];
$duration=$_REQUEST["duration"];

$con=mysql_connect('localhost','root','');
if(!$con)
{
    die("Error Connecting to database;"+mysql_error()); 
}

$database=mysql_select_db('mydb');
if(!$database)
{

    die("Error Connecting to database;"+mysql_error());
}

$update = mysql_query("insert into users values('$fname','$lname','$email','$uid','$pwd','$mean','$varience','$sdev','$duration')");

if(!$update)
{
    die("Update wasn't Success full"+mysql_error());
}

echo "update successfull";  

mysql_close($con);

?> 
```

每当我单击注册按钮时，什么都没有发生。该页面仅刷新回登录表单，因为它具有类“活动”作为默认表单，并且浏览器地址栏从这个 url：“localhost/slider.html”更改为这个 url：“localhost/slider.html？” .

我希望我的问题足够明确，因为我需要一个紧急的答案，因为这是我的论文项目，我已经没有选择了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T06:58:43.850

> 并且浏览器地址栏从这个 url：“localhost/slider.html”变为这个 url：>“localhost/slider.html？”。

利用`e.preventDefault();`

```
$("#registrationform").click(function(e){
^
|
|_______________ you forgot the $ 
```

然后加，

```
`e.preventDefault(); 
```

*检查 javascript 控制台，您将看到所有错误。你必须一一消除。首先，检查上面。*

**建议**：*当您复制/粘贴代码时，至少尝试了解结构。有时它会与您的代码冲突，并可能停止运行您的代码。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:07:21.910

看起来您的 Javascript 有一些错误，因此没有执行。因此，表单提交诉诸其默认行为——即提交到标签的动作属性。由于您没有在标签中指定 action 属性，它会将参数发布到当前页面。

您正在获取 url *localhost/slider.html？*因为两个原因：

1.  您尚未在 . 因此，表单正在尝试以 GET 形式提交。这就是为什么附加的“？”
2.  您没有输入的名称。因此，查询字符串为空。您需要为每个输入指定名称属性。

你首先要做的是调试你的Javascript。使用 Firefox 中的 Firebug 或 Chrome 中的控制台或任何类似工具来捕获您的 JS 错误并检查您的 Ajax 请求和响应。

另外，请确保“click”函数中的最后一条语句是：

```
 return false; 
```

强制表单停留在页面上。

正如@steve 指出的那样，另一件重要的事情是向您的标签添加方法和操作属性。这将确保您的脚本不会在禁用 JS 的浏览器或任何此类情况下完全失败。

# sql - 一次执行更新三个表

> ID：13356572
> 
> 赞同：0
> 
> 时间：2012-11-13T06:47:36.810
> 
> 标签：sql, codeigniter, sql-update

我尝试通过一键执行更新三个表，但为什么只是 t_user 发生了变化？t_publisher 和 t_label 没有改变，也没有错误警告..

```
function update($id_user=null){

        if (($this->input->post('submit') == 'Update')){
            $user=$this->input->post('username');
            $pass=$this->input->post('userpassword');
            $ussta=$this->input->post('userstatus');
            $usty=$this->input->post('usertype');
            $id_label = $this->db->query("select ID_LABEL from t_label where LABEL = '$name->USER_NAME'")->row();
            $id_publisher = $this->db->query("select ID_PUBLISHER from t_publisher where PUBLISHER = '$name->USER_NAME'")->row();

        $data = array(
            'USER_NAME' => $user,
            'USER_PASS' => $pass,
            'USER_STATUS' => $ussta,
            'USER_TYPE' => $usty
            );

        $data2 = array(
            'LABEL' => $user,
            );

        $data3 = array(
            'PUBLISHER' => $user,
            );

        $this->db->where('USER_ID', $this->input->post('id'));
        $this->db->update('t_user', $data);
        $this->db->where('ID_LABEL', $this->input->post('$id_label'));
        $this->db->update('t_label', $data2);
        $this->db->where('ID_PUBLISHER', $this->input->post('$id_publisher'));
        $this->db->update('t_publisher', $data3);
        redirect("registrasi/reg");
        }
        $var['data'] = $this->db->query("select * from t_user where USER_ID= '$id_user'")->row_array();  
        $this->load->view('update', $var);
        } 
```

请帮忙 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:57:21.710

尝试

```
function update( $id_user = NULL ){
    if ( ( $this->input->post( 'submit' ) === 'Update' ) ) {
        $user = $this->input->post( 'username' );
        $pass = $this->input->post( 'userpassword' );
        $ussta = $this->input->post( 'userstatus' );
        $usty = $this->input->post( 'usertype' );

        $sql = "SELECT ID_LABEL FROM t_label WHERE LABEL = ?";
        $id_label = $this->db->query( $sql, array( $name->USER_NAME ) )->row();

        $sql = "SELECT ID_PUBLISHER FROM t_publisher WHERE PUBLISHER = ?";
        $id_publisher = $this->db->query( $sql, array( $name->USER_NAME ) )->row();

        $data = array(
            'USER_NAME' => $user,
            'USER_PASS' => $pass,
            'USER_STATUS' => $ussta,
            'USER_TYPE' => $usty
            );

        $data2 = array(
            'LABEL' => $user,
            );

        $data3 = array(
            'PUBLISHER' => $user,
            );

        $this->db->where('USER_ID', $this->input->post('id'));
        $this->db->update('t_user', $data);

        $this->db->where('ID_LABEL', $id_label);
        $this->db->update('t_label', $data2);

        $this->db->where('ID_PUBLISHER', $id_publisher);
        $this->db->update('t_publisher', $data3);

        redirect("registrasi/reg");
    }

    $var['data'] = $this->db->query( "SELECT * FROM t_user WHERE USER_ID= '$id_user'")->row_array();
    $this->load->view('update', $var);
} 
```

我有点困惑。是模型文件吗？如果是这样，为什么会有`redirect`命令？还有为什么有一个`$this->load->view()`？再一次，$name 是从哪里来的？您指定`$id_user`为默认参数，您在此文件中的何处使用它？

# x86 - IA32 机器 x86 上的对齐方式

> ID：13356575
> 
> 赞同：2
> 
> 时间：2012-11-13T06:47:42.540
> 
> 标签：x86, alignment

![在此处输入图像描述](../Images/bc7b5387e424b7072956ac8d77aaf031.png)

为什么偏移量是：0 4 8 16 和 24？int = 4 个字节，double = 8 个字节。为什么标记上有x？你怎么知道什么时候使用x？

其他 2 个结构和联合偏移如何工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T06:52:15.850

因为数据类型通常与其大小对齐。所以一个四字节整数通常以四字节的倍数开始。这并不总是必要的，但它通常是一种效率方法。在某些架构中，如果您尝试访问未对齐的数据，它们实际上会崩溃（引发某种错误），这*是必要的。*

您拥有这些`x`字符的原因是因为它们是对齐以下数据项所需的填充。

# mysql - 两个 SQL INSERTS 依赖于彼此的结果......最好的方法是什么？

> ID：13356581
> 
> 赞同：-1
> 
> 时间：2012-11-13T06:48:39.820
> 
> 标签：mysql

我有一个库存表（用于零售店的产品/库存）和一个序列表（为每个库存发行的条形码）。

基本上，当新股票被引入数据库时​​，系统会根据序列表的索引/pri 自动增量值为每只股票发出一个序列号。

问题是他们都互相依赖...

我会解释：

```
STOCKS TABLE
stock_id int(11) 
product_name varchar(50)
serial int(30) <--- relies on the serials generated by system, stored in the SERIALS TABLE 

SERIALS
sn_id int(11)
stock_id int(11) <-- relies on the new stocks inserted in the stocks table
serial int(30) <---- serial NO generated for specific stock. 
```

STOCKS 插入的位置需要存储为其生成的序列号，并且生成的序列号必须记录在表中，其中包含正在插入的股票的 stock_id (index/pri)。

这基本上意味着 3 个 SQL 语句/新库存：

1.  获取序列表的下一个 auto inc 值（用于正确生成序列号）
2.  将股票插入到表中，每个序列都有序列号
3.  获取所述股票的 insert_id 并将其插入序列表

这行得通，但我想知道是否有更好的方法？到目前为止，这是我运行的内容：

1.  在主目录上创建一个 serial_lock 文件（这可以防止其他脚本向其他股票发布新的序列号，=避免并发运行冲突..

2.  通过获取序列表的下一个 auto_increment 值来生成所需的序列号并将其存储在变量中，例如

    ```
     $assigned_serials_array[$index] = $prefix . $index; // results in BN-0001 ("BN-" is the prefix and the rest is padded auto inc value incremented per loop 
    ```

3.  INSERT INTO股票，每只股票，获取insert_ID

4.  INSERT INTO serials，发行给特定股票的序列号记录
5.  循环完成后，删除锁定文件

PS。
我原来的实际上已经对连续表进行了 INSERT，然后在生成 stock_id 后对该连续表进行了更新。我对此感到不舒服，因为发出了另一条 SQL 语句，尽管这是最安全的方式不过，我不需要担心锁定文件和冲突。

嗯..有什么想法吗？

编辑：
我决定改变我的方法..
对于每个 SERIAL GENERATED，是一个 STOCK (stock_id).. 我决定忘记序列号 00001 0002 0003 的增量排序

决定继续使用正在发行 SN 的特定股票的 stock_id..

所以..
获取下一个插入ID，根据它生成SN，
INSERT STOCK，w/生成的SN
INSERT SERIAL记录，将stock_id也引用到相同的下一个插入ID..

完毕！

我只是真的很想拥有一个完美排序的 SN ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:01:59.523

不要创建锁定文件——这是错误的。

相反，请使用事务。Perl 中的这个例子：

```
my $dbh = DBI->connect("dbi:mysql...", "user", "password");
$dbh->begin_work();  # start new transaction
$dbh->do("INSERT INTO serials ..."); # generate new serial
my $new_serial = $dbh->{mysql_insertid};
$dbh->do("INSERT INTO stocks (..., serialno) VALUES (..., $new_serial)");
# do some more work like inserting into other tables
$dbh->commit();  # finally, commit the transaction 
```

请注意，您需要使用 InnoDB 引擎才能使事务工作

# iphone - AudioQueue PropertyListener IsRunning 只回调一次

> ID：13356582
> 
> 赞同：1
> 
> 时间：2012-11-13T06:48:41.160
> 
> 标签：iphone, objective-c, ios, audioqueue

```
 OSStatus err = AudioQueueNewOutput(&audioDescription, AudioPlayerAQOutputCallback, ( void* )self, nil, nil, 0, &audioQueue);
    if( err != noErr )
        NSLog(@"Couldn't open AudioFile.");

    err = AudioQueueAddPropertyListener(audioQueue, kAudioQueueProperty_IsRunning, isRunningProc, self);
    if( err != noErr )
        NSLog(@"Couldn't register for playback state changes."); 
```

此回调函数仅在 AudioQueueStart(audioQueue, NULL) 之后调用一次；

我叫什么 AudioQueuePause(audioQueue);

或音频到达终点。

```
static void isRunningProc(void *              inUserData,
                      AudioQueueRef           inAQ,
                      AudioQueuePropertyID    inID) 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-01T15:24:44.687

我对此做了一个简短的测试：

当您恢复暂停时，它确实看起来像回调，它既不是为了暂停也不是为了开始而被调用。

但这不是你无法解决的。你以某种方式开始了这首歌。这将触发属性监听器。同样，如果歌曲停止。或者你阻止它。您可能必须在播放例程中以某种方式自己触发属性侦听器：

```
if (bytesRead == 0) {
    //This will trigger the property listener
    AudioQueueStop(inAQ, false);
}
else {
    AudioQueueEnqueueBuffer(inAQ, inBuffer, 0, NULL);
} 
```

就 AudioQueue 而言，只要您继续向它提供要播放的音频缓冲区，它就会继续播放。（我还测试了根本不提供任何缓冲区，这不会触发停止，因此您必须显式调用停止来触发属性侦听器。）

这意味着您已经知道您的歌曲是否正在播放。通过单击您的按钮请求暂停或取消暂停。如果歌曲没有播放，不要做任何事情。如果歌曲正在播放，请调用 AudioQueuePause 并设置一个您已暂停音乐的标志。记得检查错误代码。（见下文（1））。如果标志表明您已暂停音乐，请调用 AudioQueueStart，并清除表明您是否已暂停的标志。再次检查错误代码。

(1) 为什么要检查错误代码？

首先，虽然不太可能，但可能会发生错误，因为它是蓝月亮。

但是，我担心的是多个线程。AudioQueue 显然在与您的 GUI 不同的线程上运行。这意味着如果您测试一个标志是否正在播放音乐，则该状态不能完全可信，因为它可能在您测试状态后发生了变化。另一个线程可能已经潜入您的测试和基于该测试的操作之间。

假设您检查歌曲是否已经在播放。（是的。）然后您要求歌曲暂停，但歌曲实际上已停止，因为在您要求歌曲暂停之前它已到达结尾。然后你要求暂停这首歌。但它已经停止了。

那会发生什么？我真的不知道。在这种情况下，它甚至可能不是问题，但这样的事情值得考虑。它需要测试，或者至少需要查阅文档。

另一个场景怎么样？如果歌曲停止了，而您要求重新开始，该怎么办。我认为这是一个更糟糕的情况，但它可能不是问题。再次考虑这些情况并检查文档，甚至测试自己。

# ruby - 使用 Sinatra Reloader 的模块化 Sinatra 应用程序？

> ID：13356586
> 
> 赞同：2
> 
> 时间：2012-11-13T06:49:23.203
> 
> 标签：ruby, sinatra

嗨，如果我有一个包含以下代码的“主”sinatra 文件，

```
require 'sinatra'
require "sinatra/reloader"

class MyApp < Sinatra::Base
  configure do
    require "./rest/auth.rb"
    register Sinatra::Reloader
    also_reload '/rest/auth'
  end

  get '/' do
    erb :home
  end
end 
```

我想把我的身份验证逻辑放在 /rest/auth.rb 中，我怎样才能让 /rest/auth.rb 在开发模式下重新加载？我必须在我的每个控制器文件中放置配置块并要求 sinatra/reloader 吗？我想让我的控制器继承我的主类的设置。auth.rb 里面的代码如下：

```
class MyApp < Sinatra::Base
  set(:auth) do |*roles|  # <- notice the splat here
    condition do
      unless logged_in?
        session[:success_url] = request.path_info
        redirect '/'
      end
    end
  end

  def logged_in?
    current_user
  end

  def current_user
    if session[:user_id]
      u = User.find(:id=>"#{session[:user_id]}")
    else
      false
    end
  end
end 
```

我需要重新启动服务器才能进行更改，但我可以在 auth.rb 的配置块中抛出该重新加载代码，尽管我不想这样做。有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T14:36:25.163

尝试像这样重写

```
require 'sinatra/base'
require "sinatra/reloader"

class MyApp < Sinatra::Base

  configure :development do
    register Sinatra::Reloader
    also_reload './rest/auth'
  end

  require "./rest/auth.rb"

  get '/' do
    erb :home
  end

end 
```

# jquery - 如何使用 eventData 和命名函数附加事件处理程序？

> ID：13356589
> 
> 赞同：0
> 
> 时间：2012-11-13T06:49:54.590
> 
> 标签：jquery, jquery-ui, jquery-selectors

我有一个页面，其中包含 ID 为“rec-0”、“rec-1”和“rec-n”的元素，我试图弄清楚如何将事件附加到它们。它们是输入元素，是 td 元素的子元素。

```
<td><input type="checkbox" id="rec-0" /></td> 
```

我尝试使用以下方法将事件处理程序附加到所有元素：

```
$("td > input").change({ elem:this }, recipe_checkbox_clicked); 
```

但在`recipe_checkbox_clicked()`我得到的功能内`Uncaught TypeError: Object #<Object> has no method 'prop'`。这是 recipe_checkbox_clicked 函数：

```
function recipe_checkbox_clicked(elem) { 
    if (elem.prop('checked')) $("#modify-recipe").show(); 
    else $("#modify-recipe").hide(); 
} 
```

如果我将该函数的代码复制到一个匿名函数中，稍作修改，它就会按预期工作。这是修改后的代码：

```
$("td > input").change( function() { 
    if ($(this).prop('checked')) $("#modify-recipe").show(); 
    else $("#modify-recipe").hide(); 
}); 
```

我可以保持原样，但我更喜欢不使用匿名函数。有没有办法在不使用它们的情况下完成我正在尝试的事情？

* * *

在 Adil 和 Felix 的帮助和建议下，我通过以下代码获得了我想要的行为！

```
function recipe_checkbox_clicked() { 
    if ($(this).prop('checked')) $("#modify-recipe").show(); 

    var any_checked = false; 
    $("td > input").each(function() { 
        if($(this).prop('checked')) {
            any_checked = true; 
            return false; 
        }
    }); 
    if (!any_checked) $("#modify-recipe").hide(); 
} 
```

以及附加此功能的选择器：

```
$("td > input").change(recipe_checkbox_clicked); 
```

太感谢了！我花了好几个小时试图弄清楚如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T06:58:43.807

只需在命名函数中使用相同的代码：

```
function recipe_checkbox_clicked() { 
    if ($(this).prop('checked')) $("#modify-recipe").show(); 
    //  ^^^^^^^
    // or better: if (this.checked) ...
    else $("#modify-recipe").hide(); 
} 
```

* * *

我认为您的代码有两点错误：

> `$("td > input").change({ elem:this }, recipe_checkbox_clicked);`

即使您可以`elem`正确访问，我假设`this`这里实际上并没有引用 选择的任何元素`$("td > input")`，而是引用其他内容，因此`$(elem).prop(...)`可能无法按预期工作。

> `function recipe_checkbox_clicked(elem) {`

传递给事件处理程序的第一个参数始终是事件对象。如果要访问事件数据，则必须通过事件对象执行此操作：

```
function recipe_checkbox_clicked(event) {
  var elem = event.data.elem;
} 
```

[http://api.jquery.com/event.data/](http://api.jquery.com/event.data/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T06:52:46.593

您可以在更改中传递函数的名称，而不是传递匿名函数，您可以从 $(this) 访问 jquery 的事件源，以及函数中的 javascript 访问事件源。

**改变**

```
$("td > input").change( function() { 
    if (elem.prop('checked')) $("#modify-recipe").show(); 
    else $("#modify-recipe").hide(); 
}); 
```

**至**

```
$("td > input").change(yourFunction); 

function yourFunction() { 
    elem = $(this);
    if (elem.prop('checked')) $("#modify-recipe").show(); 
    else $("#modify-recipe").hide(); 
} 
```

*要与诸如 rec-0、rec-1、rec-2 之类的 id 绑定，您可以使用通配符*

```
 $("[id^=rec-").change(yourFunction); 
```

# java - 自定义容器登录页面

> ID：13356591
> 
> 赞同：0
> 
> 时间：2012-11-13T06:50:32.463
> 
> 标签：java, jsf-2

我在我的 JSF 应用程序中使用容器管理的安全性，所以我有一个默认设置以下的登录页面。

现在在登录页面中，我想在登录按钮旁边添加一个按钮以允许用户注册。

但是如何将它从我的注册按钮转发到我的 register.xhtml 页面？我用这段代码试了一下：

```
<form method="post" action="j_security_check">
    <div id="login-content">
        <p>Login to access secure pages:</p>
        <p:panelGrid columns="2">
            <h:outputLabel for="j_username" value="Username" />
            <input type="text" name="j_username" id="j_username" />

            <h:outputLabel for="j_password" value="Password" />
            <input type="password" name="j_password" id="j_password" />

            <f:facet name="footer">
                <input type="submit" name="submit" value="Login" />
                <input type="button" name="register" 
                    value="#{request.contextPath}/pages/public/register.xhtml" />
            </f:facet>
        </p:panelGrid>
    </div>
</form> 
```

我尝试将表单也更改为 h:form 以便我可以使用 p:commandButton 但正如我注意到的那样，我的登录页面无法正常工作，并且当我单击提交按钮时没有任何反应。

如何实现我想做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T12:28:24.987

只需使用`<h:button>`或`<p:button>`创建一个 GET 按钮。

```
<h:button value="register" outcome="/pages/public/register.xhtml" /> 
```

# php - PHP错误显示

> ID：13356592
> 
> 赞同：-1
> 
> 时间：2012-11-13T06:50:36.217
> 
> 标签：php

我是 php 新手，但我已经制作了一个可以正常工作的注册脚本。但问题是每次我按下提交按钮来检查我的错误时，我都会进入一个新页面。

我的问题是我如何使该错误出现在同一页面上？

我用于 html 表单的代码。

我想在我所做的错误 div 框中显示错误有什么想法吗？

```
<div id="RegistrationFormLayout">
 <h1>Registration Page</h1>
        <div id="ErrorMessage"></div>
          <form action="script/registration.php" method="post">
            <label for="Username">Username</label>
            <input type="text" name="Regi_username"> 

            <label for="FirstName">FirstName</label>
            <input type="text" name="Regi_Firstname"> 

            <label for="LastName">LastName</label>
            <input type="text" name="Regi_Lastname"> 

            <label for="EamilAddress">Regi_EmailAddres</label>
            <input type="text" name="Regi_EmailAddres"> 

            <label for="Password">Password</label>
            <input type="password" name="Regi_password"> 

            <button type="submit" value="Submit" class="Login_button">Login</button>
         </form>          
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T06:54:39.537

如果我理解正确，您希望那里出现表单验证错误。这是一种非常常见的模式，简单的解决方案是始终将表单的 action 属性设置为显示表单的同一页面。这允许您在尝试显示表单之前进行表单处理（如果有 $_POST 值）。如果验证成功，则将重定向标头发送到“下一步”页面（使用 header()）。

基本模式看起来像这样（在非常简化的 PHP 中）

```
<?php

if(count($_POST)) {
  $errors = array();
  $username = trim($_POST['Regi_username']);
  if(empty($username)) {
    $errors[] = 'username is required';
  }

  if(count($errors) == 0) {
    header('Location: success.php');
    die();
  }
}
<ul class="errors">
  <?php foreach($errors as $error) { ?>
    <li><?php echo $error;?></li>
  <?php } ?>
</ul> 
```

# c++ - atof 只返回整数？

> ID：13356593
> 
> 赞同：0
> 
> 时间：2012-11-13T06:50:37.580
> 
> 标签：c++, qt, atof

我有一个例程，它以指数格式（例如 2,5E-02 或 4E+06）作为 QString 获取数字。当我打印值时，我总是只得到整数，当它们小于 1 时，我总是得到 0。有谁知道我在这里做错了什么？（使用 cout 行我只想测试 QString::number() 是否为我毁了它）

这是一个代码片段：

```
QStringList valPair;
value = atof(valPair[0].replace(",",".").toAscii());
value1 =atof(valPair[1].replace(",",".").toAscii());
strValue = "[" + QString::number(value) + ", " + QString::number(value1) + "]";
//cout<<value<<" "<<value1; 
```

我会很感激任何帮助！

编辑：这是变量声明的问题......

```
double value, value1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:47:19.610

你为什么要做所有这些工作？[如果您使用QString::toDouble](http://qt-project.org/doc/qt-4.8/qstring.html#toDouble)和[QString::number()](http://qt-project.org/doc/qt-4.8/qstring.html#number-2)，Qt 已经拥有您正在寻找的东西。如果您在调用 toDouble() 之前手动设置您的语言环境，那么您可以使用逗号十进制表示法而无需替换任何内容。

您还可以创建一个字符串模板`QString("[%1,%2]")`，然后`double`使用`QString::arg`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T06:57:57.253

转换函数不支持您的*locale*，它使用逗号作为小数分隔符。改为使用`2.4e4`。

# android - 为什么 Eclipse 不能写资源

> ID：13356595
> 
> 赞同：-1
> 
> 时间：2012-11-13T06:50:51.823
> 
> 标签：android, eclipse, warnings

Eclipse CAN"T SIGN MY APP！但旧版本工作正常。它只是在下面显示警告，这是 Juno 版本中的错误吗？

无法写入资源 [META-INF/MANIFEST.MF]（重复的 zip 条目 [ARMPlugin.jar:META-INF/MANIFEST.MF]）...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T06:56:04.420

查看`src`文件夹，看看是否有不需要的`META-INF`文件夹。删除它，它应该可以工作。

有关这方面的更多信息，请参见下文

*   [http://jira.codehaus.org/browse/MNGECLIPSE-994](http://jira.codehaus.org/browse/MNGECLIPSE-994)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:33:30.520

*-injars android-support-v4.jar -injars library.jar(!META-INF/MANIFEST.MF) injars 是需要的，但我不明白为什么旧的 Eclipse 不需要这个。*

编辑：不，它与“injar@#!!@...”无关。我更新了 ADT，Eclipse。所有问题都消失了。（psEclipse Juno == 垃圾和丑陋 :)

编辑：最后，我发现：它与 Astrill（VPN）不兼容，我强制关闭了 astrill 进程并且问题消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T19:23:46.093

我对最新版本的 Eclipse ADT 和 android SDK（版本 23.07.2013）proguard 4.7 有同样的错误。

我的工作区有两个项目：我的应用程序和 Google Play 许可证。我注意到我的应用程序的文件夹“lib”包含导致重复错误的 JAR 文件。我不知道 Eclipse 将这个文件放在哪里或为什么放置，但理论上它不是必需的，作为标准 Android 运行时的一部分，并且需要运行 Google Play 许可证，直接引用另一个项目越容易。

通过执行以下操作设法解决：

*   我删除了导致错误 Lib 文件夹的 JAR。
*   我点击了 Project Clean 来清理出口。
*   在 Project Properties, References 中，我检查了 Google Project License 作为直接参考。
*   我确实重建了主要项目，我的应用程序
*   使用 proguard 导出时不再出现错误。

我只能假设文件夹 Lib 的引用与 Android 标准运行时的引用冲突，并且 proguard 按顺序解释这两者，而不是进行合并，从而导致加倍。

# web-applications - 在 Web 应用程序上选择即时赢家

> ID：13356596
> 
> 赞同：0
> 
> 时间：2012-11-13T06:50:59.410
> 
> 标签：web-applications, real-time, instant, gambling

我正在运行一个 Web 应用程序，其中使用实时数据来选择获胜者。我的应用程序应该选择即时获胜者，而不是整合一天的信息/条目并通过抽签选择获胜者。因此，当获胜者点击正确的组合时，他们可能是幸运的获胜者，也可能不是。目前，当获胜者点击正确的组合时，系统会检查条目数据库，并查找获胜者是否属于可被 5 整除的条目，如果不是则表示不走运，如果是，则为获胜者，并获得相应的在点击后重定向到的页面上回复。

每天都有特定数量的奖品，由前一天的点击次数计算得出。每天还有不同的奖品。

我想知道的是，是否有另一种方式（一种更简洁的方式）来随机选择这些获胜者的选择方式，而不是按照我的方式运行。我试过谷歌但找不到一个好的答案。我不是赌徒，所以这对我来说是新的。我基本上想要一种方法让我的应用程序为每个实时条目运行“pinky pinky ponky ...”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T06:55:49.543

你可以做很多事情。如何在 1 到 10 之间生成 5 个随机数，如果其中 3 个相同，则用户获胜。

# javascript - from = 在javascript函数中是什么意思？

> ID：13356605
> 
> 赞同：0
> 
> 时间：2012-11-13T06:51:32.997
> 
> 标签：javascript, jquery

我有以下电话：

```
 $.extend($.fn.dataTableExt.oSort, {
        "datetime-uk-pre": function (a) {
            from = a.split(' ');
            var ukDatea = from[0].split('/');
            var ukTimea = from[1].split(':');
            return (ukDatea[2] + ukDatea[1] + ukDatea[0] + ukTimea[1] + ukTimea[0]) * 1;
        } 
```

有人可以解释“from =”在这里做什么。我注意到，当我运行 JSHint 时，它告诉我“来自”没有定义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T06:57:45.463

> 有人可以解释“from =”在这里做什么。

它正在为一个名为的变量赋值`from`

> 我注意到，当我运行 JSHint 时，它告诉我“来自”没有定义。

看起来应该是`var from =`。（要么是这样，要么`from`是打算在更广泛的范围内使用，但在更广泛的范围内使用它看起来不像是一个有用的变量，如果是这样的话，`var from;`范围链上应该还有一个更高的变量）。

没有`var`你创建一个全局变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T06:52:54.410

看起来就像这里只是一个变量

```
from = a.split(' '); 
```

可以在当前函数范围之外访问，这是一个数组..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T06:57:47.120

这只是一个变量。`from`在 JavaScript 中没有什么特别之处。`var from`如果他们使用了正确的编码实践，它可能会在某个地方声明。尝试搜索该字符串。

如果 JSHint 抱怨它，它可能没有正确声明。`var from = a.split(' ');`作为最佳实践，您可能希望重写该行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T07:02:13.860

`from`只是一个变量的名称，就像上面代码中的`ukDatea`and一样`ukTimea`。在 JavaScript 中，如果您使用新变量名而不使用其前面的关键字`var`，则该变量将变为全局变量，这就是 JSHint 试图在它说`from`未定义时告诉您的内容。

它应该在代码中的其他地方定义（例如`var from`），或者您需要在`var`此处添加关键字，这将使该行看起来像这样：

```
var from = a.split(' '); 
```

# c# - 在本地机器上调试时排除方法执行

> ID：13356606
> 
> 赞同：1
> 
> 时间：2012-11-13T06:51:35.563
> 
> 标签：c#, asp.net, iis, azure

我正在使用以下代码来清理我的 Azure 应用程序的数据库。

```
protected void Application_End(object sender, EventArgs e)
{
     core.cleanUpDB();
} 
```

我可以在调试时阻止它在我的本地机器上执行吗？我只想在已部署的 Azure 应用程序上执行此操作。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T06:58:27.580

您可以使用[**HttpRequest.IsLocal**](http://msdn.microsoft.com/en-us/library/system.web.httprequest.islocal.aspx)来区分本地和服务器请求。

```
protected void Application_End(object sender, EventArgs e)
{
     if(!System.Web.HttpContext.Current.Request.IsLocal)
           core.cleanUpDB();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T07:07:47.340

虽然其他答案可能适用于特定场景，但它们与 Windows Azure 无关。检查您是否在 Windows Azure 中运行而不是在模拟器中运行（假设您有 Web 角色）的唯一方法是这样的：

```
protected void Application_End(object sender, EventArgs e)
{
    if (RoleEnvironment.IsAvailable && !RoleEnvironment.IsEmulated)
        core.cleanUpDB();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T06:55:16.930

您使用[条件编译](http://msdn.microsoft.com/en-us/library/aa288458%28v=vs.71%29.aspx)。MSDN 文章提供了一个更好的解释，我可以在这里的小空间里写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T06:55:00.773

在 VB.net 你会使用这样的东西：

```
'#If DEBUG Then
'only do this while debugging...
'#End If 
```

请删除 ' 标记 - 堆栈溢出使用“#”标记作为粗体......我认为它也应该在 C# 中编译。

# magento - 如何在magento的addfield中使用onchange函数更改评论数据

> ID：13356608
> 
> 赞同：2
> 
> 时间：2012-11-13T06:51:38.063
> 
> 标签：magento

我创建了自定义模块，现在在编辑表单上从管理员端添加了额外的字段选择类型。我想使用 onchange 函数更改此特定字段的注释。请参阅下面的代码。

```
$eventElem = $fieldset->addField('banner_type', 'select', array(
                'label'     => Mage::helper('multibanners')->__('Banner Style'),
                'required'  => false,
                'onchange' => 'checkSelectedItem(this.value)',
                'name'      => 'banner_type',
                'values'    => array(
                   array(
                        'value'     => 'Banner 1',
                        'label'     => 'AnySlider',      
                   ),
                   array(
                       'value'     => 'Banner 2',
                       'label'     => 'Content Slider',         
                 ),
              ));
$eventElem->setAfterElementHtml("<script type=\"text/javascript\">function checkSelectedItem(selectElement){}</script>"); 
```

这是我的代码，我提醒了价值，我得到了我的价值，但它无法在评论区显示。有人知道如何解决它吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T11:25:31.813

这将使用当前选择的选项更新评论（onchange）

```
$fieldset->addField('banner_type', 'select', array(
        'label'     => Mage::helper('multibanners')->__('Banner Style'),
        'required'  => false,
        'onchange' => 'checkSelectedItem(this.value)',
        'name'      => 'banner_type',
        'values'    => array(
           array(
                'value'     => 'Banner 1',
                'label'     => 'AnySlider',      
           ),
           array(
               'value'     => 'Banner 2',
               'label'     => 'Content Slider',         
           ),
        )
 ))->setAfterElementHtml("<small id='banner_type_comment'>Comments</small>
                         <script type=\"text/javascript\">
                            function checkSelectedItem(selectElement){ 
                               $('banner_type_comment').update($('banner_type')[$('banner_type').selectedIndex].text);
                            }
                         </script>"); 
```

# curl - 使用 PHP 做 CURL 帖子？

> ID：13356610
> 
> 赞同：1
> 
> 时间：2012-11-13T06:51:54.570
> 
> 标签：curl

我有以下 curl 命令可以在 Windows 命令行中完美运行：

```
curl -v -H "Accept: application/json" -H "Content-type: application/json" -X PUT -d   "{\"name\":\"Name\",\"password\":\"1234\",\"email\":\"somebuy@bla.com\"}"   http://localhost:8080/users 
```

所以这篇文章的json是：

```
{\"name\":\"Name\",\"password\":\"1234\",\"email\":\"somebuy@bla.com\"} 
```

我尝试使用以下 PHP 代码执行它：

```
$ch = curl_init(); // initialize curl handle
$user_agent = $_SERVER['HTTP_USER_AGENT']; 
curl_setopt($ch, CURLOPT_USERAGENT, $user_agent);
curl_setopt($ch, CURLOPT_URL, $url); // set url to post to
curl_setopt($ch, CURLOPT_FAILONERROR, 1); // Fail on errors
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); // allow redirects
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1); // return into a variable
curl_setopt($ch, CURLOPT_PORT, $port); //Set the port number
curl_setopt($ch, CURLOPT_TIMEOUT, 5); // times out after 5s
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
if (!empty($request)) {
  curl_setopt($ch, CURLOPT_POST, true);   
  curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
  curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($request)); // add POST fields
}

if($port==443) {
  curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
  curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
}

$data = curl_exec($ch); // if($data === false) echo 'Curl error: ' . curl_error($ch);
$error = curl_errno($ch);
curl_close($ch);

if ($error) {
  $error_codes = $this->_get_curl_error_codes();
  echo
    'Sorry, but we are currently not able to connect to the database. Error code '.$error.': '.$error_codes[$error];
  die();
} 
```

我使用此代码如下：

```
$url = 'http://localhost/users';
$port = 8080;
$request = array();
$request['name']        = 'Name';
$request['password']    = '1234';
$request['email']       = 'somebuy@bla.com'; 
```

Json 是这样创建的：

```
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($request)); // add POST fields 
```

我的问题是，如果我从命令行运行它，它可以工作，但如果我使用上面的代码运行它，它就不起作用。任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:04:30.973

来自控制台的 curl 命令正在使用 PUT，您正在使用 POST

尝试下一个选项

```
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "PUT"); 
curl_setopt($ch, CURLOPT_POSTFIELDS,$json); 
```

例如[http://www.lornajane.net/posts/2009/putting-data-fields-with-php-curl](http://www.lornajane.net/posts/2009/putting-data-fields-with-php-curl)

如果它不起作用，还要添加标题

```
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/json','Content-Length: ' . strlen($json))); 
```

还有一件事： `$this->_get_curl_error_codes();`在您的代码中有一个但我没有注意到这种方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T17:32:16.987

此代码可以帮助您

```
function get($url, $params=array()) {   

  $url = $url.'?'.http_build_query($params, '', '&');
  $ch = curl_init();

  curl_setopt($ch, CURLOPT_URL, $url);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
  curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 10);
  curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

  $response = curl_exec($ch);

  curl_close($ch);

  return $response;

} 
```

# android - 一些带有 android:inputType="textEmailAddress|textEmailSubject" 的设备上的红色下划线

> ID：13356615
> 
> 赞同：0
> 
> 时间：2012-11-13T06:52:42.783
> 
> 标签：android

我在某些字段上使用 android:inputType="textEmailAddress|textEmailSubject" 以防止根据 Stackoverflow 上的帖子中的建议包装长行。但是我刚刚注意到，在我的 Nexus-S（但不是三星 Tab-2 7）上，一些文本带有红色下划线。

例如，“18 BR”的 BR 未划线。但是“NAS2”没有下划线。“TI”有下划线。如果我删除 android:inputType="textEmailAddress|textEmailSubject" 那么下划线会消失，但这些行可以用长用户名换行。

```
<!-- Readout Waypoint Name -->
<TextView
    android:inputType="textEmailAddress|textEmailSubject"
    android:id="@+id/textWaypoint"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:text="--"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textSize="@dimen/menu" /> 
```

解决此问题的最佳方法是什么。我在 Google 或 Stackoverflow 上找不到任何东西，也不知道解决它的最佳方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T07:08:27.953

删除`android:inputType`属性并在 TextView 中使用以下行来解决您的问题

```
android:ellipsize="end"
android:singleLine="true" 
```

# asp.net - 我们是否可以编写一个 SQL 查询来首先按字母顺序对表进行排序并为其设置一个序列号，以便我们可以将该序列号用于其他事情

> ID：13356621
> 
> 赞同：1
> 
> 时间：2012-11-13T06:53:03.810
> 
> 标签：asp.net, sql, vb.net

我正在使用 VB ASP.NET 和 SQL 开发一个网站。我想在滚动上创建一个函数来加载更多用户名，但为此我需要一个序列号来在滚动上传递一个值来加载下一个用户。

但是按字母顺序排序会破坏序列号顺序。

所以我可以写一个查询，它可以首先创建有序表并有一个唯一的 id，这样我就可以用它来传递。

这是我的查询：

```
select top {0} 
   p.user_id, p.username, p.firstname, p.lastname, p.comp_name 
from 
   v_master_user p     
where 
   p.access_level < 6 
   and user_id > {1} 
order by 
   p.firstname ASC 
```

在这我必须通过最后一个值`user_id`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:04:10.483

```
select top {0} 
   p.user_id, p.username, p.firstname, p.lastname, p.comp_name 
from 
   v_master_user p     
where 
   p.access_level < 6 
   and user_id > {1} AND ROW BETWEEN (@StartRowIndex + 1) AND @EndRowIndex
order by 
   p.firstname ASC 
```

它会是这样的。您可以指定开始和结束索引。

# tcp - Netty Channel 的状态转换是什么？

> ID：13356622
> 
> 赞同：4
> 
> 时间：2012-11-13T06:53:08.930
> 
> 标签：tcp, udp, netty, datagram, socketchannel

Netty 通道有多种状态，但我无法找到有关实际状态转换的任何文档。我可以找到的最接近 Netty 3.2.x 系统的任何文档在 [这里](http://docs.jboss.org/netty/3.2/api/org/jboss/netty/channel/ChannelEvent.html)。

我能够在 [此处](http://docs.jboss.org/netty/3.2/api/org/jboss/netty/channel/ChannelState.html)找到通道可能处于的状态。

然而，没有任何东西可以描述通道从一种状态到另一种状态的正常转换。似乎并非所有通道都会进行所有可能的状态转换。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T06:53:08.930

不同的 Netty 通道确实有不同的状态转换。

一般来说，基于 TCP 的服务器通道可能的状态转换是：

```
OPEN -> ( BOUND -> UNBOUND )* -> CLOSE 
```

如果您在管道中使用**SimpleChannelHandler**子类，则在发生这些状态更改之一时处理上游事件的等效方法是：

```
channelOpen
channelBound
channelUnbound
channelClose 
```

服务器通道*永远不会*进入**CONNECTED**状态。

服务器通道一旦进入**UNBOUND状态，很少会回到****BOUND**状态，但这似乎取决于应用程序，因此 YMMV。

 **请注意，服务器通道可以在子通道打开或关闭时触发事件。这些事件只能在服务器通道处于**BOUND**状态后发生。当这些事件代表服务器通道向上游发送时，将调用**SimpleChannelHandler**子类上的以下方法：

```
childChannelOpen
childChannelClosed 
```

基于 TCP 的子通道和客户端通道的可能状态转换是：

```
OPEN -> ( BOUND -> ( CONNECTED -> DISCONNECTED )* -> UNBOUND )* -> CLOSE 
```

看起来首先进入**CONNECTED**状态*并不是* 在通道代码中强制执行的；然而，在 Netty 框架内的子通道和客户端通道进入**CONNECTED**状态之前，这个状态总是首先被触发。

如果您在管道中使用**SimpleChannelHandler**或其子类，则等效方法是：

```
channelOpen
channelBound
channelConnected
channelDisconnected
channelUnbound
channelClose 
```

基于 TCP 的通道必须处于**CONNECTED**状态，然后才能读取或写入通道。这包括服务器通道，它们永远不能被读取或写入，这并不奇怪，因为服务器通道总是仅用于代表服务器管理连接操作。

数据报套接字的运行方式与基于 TCP 的套接字不同，因为它们可用于在没有实际连接的情况下读取和写入数据（尽管连接数据报套接字会更快，因为您避免了安全检查）。使用上面描述的基于 TCP 的子通道和服务器通道列出的状态转换，可以有效地使用数据报套接字。**

# android - @ 在服务器端转换为 %40

> ID：13356623
> 
> 赞同：1
> 
> 时间：2012-11-13T06:53:09.837
> 
> 标签：android, encoding, urlencode, encode

我正在尝试将发布请求发送到具有电子邮件和密码的网络服务。当我在参数（即 qadir.suh@gmail.com）中添加特殊字符 @ 时，它会转换为 %40。我检查了服务器端，他们得到的是 %40 而不是 @。

这是我的代码：

```
 HttpClient httpclient = new DefaultHttpClient();
                            HttpPost httppost = new HttpPost(
                                    "http://www.myurl.com/requesthandler.ashx");
                            // from list to arraylist
                            ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(
                                    3);
                            nameValuePairs.add(new BasicNameValuePair("txtUserId",
                                    "qadir.suh@gmail.com"));
                            nameValuePairs.add(new BasicNameValuePair("txtPassword",
                                    "blahblah"));
                            nameValuePairs.add(new BasicNameValuePair("type", "login"));
try {
                        httppost.setEntity(new UrlEncodedFormEntity(
                                nameValuePairs));

                    } catch (UnsupportedEncodingException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                    }

                    // Execute HTTP Post Request
                    HttpResponse response = null;
                    try {
                        response = httpclient.execute(httppost);
                    } catch (ClientProtocolException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                        Log.i("Client Protocol Excption", e + "");
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                        Log.i("IO Exception", e + "");
                    }
                    String responseText = null;
                    try {
                        responseText = EntityUtils.toString(response
                                .getEntity());
                    } catch (ParseException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                        Log.i("Parse Exception", e + "");

                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                        Log.i("IO Exception 2", e + "");

                    }
                    String afterDecode = null;

                    try {
                        afterDecode = URLDecoder.decode(responseText, "UTF-8");
                    } catch (UnsupportedEncodingException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                    Toast.makeText(MainActivity.this, afterDecode,
                            Toast.LENGTH_LONG).show(); 
```

我知道

```
httppost.setEntity(new UrlEncodedFormEntity(
                            nameValuePairs)); 
```

这会将 URL 编码为 UTF-8。那么我怎样才能实现我的目标，以便服务器应该接收 @ 符号而不是 %40？或者有什么方法可以在不使用的情况下发布请求`setEntity(new UrlEncodedFormEntity(nameValuePairs))`？或者有什么方法可以让我们发送 POST 请求的解码版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:51:55.593

您正在发布 URL 编码的表单参数，但可能没有将 content-type 设置为**"x-www-form-urlencoded"**。这是必需的，以便服务器知道如何解释发布的参数。在调用之前尝试添加此行`httppost.setEntity()`：

```
httppost.addHeader("Content-Type","application/x-www-form-urlencoded"); 
```

**编辑：如果你不想使用 URL 编码，你可以简单地发布一个字符串**

如果您不想对 POST 正文进行 URL 编码，则可以改为：

```
// Create post body as name/value pairs in form format
String postBody = "txtUserId=qadir.suh@gmail.com&txtPassword=blahblah&type=login";
try {
    httppost.setEntity(new StringEntity(postBody));
} 
```

# sql - MS Access 中的 SQL 查询帮助？

> ID：13356627
> 
> 赞同：1
> 
> 时间：2012-11-13T06:53:43.147
> 
> 标签：sql, ms-access

完成 //我的尝试不起作用

```
SELECT *  
FROM Placement, Internship  
WHERE Placement.i_code=Internship.code   
WHERE Student.f_id <> Internship.f_id 
```

[不能使用 INNER JOIN 和 LEFT JOIN]

关系表：

![关系表][1]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T07:50:24.210

这是你需要的吗？

```
SELECT Student.*
FROM Student, Placement, InterShip
WHERE Placement.i_code=Internship.code   
AND Placement.s_code=Student.id
AND Student.f_id <> Internship.f_id 
```

顺便说一句：你为​​什么不想使用联接？

# linux - 如何将 time 命令的输出重定向到 Linux 中的文件？

> ID：13356628
> 
> 赞同：240
> 
> 时间：2012-11-13T06:54:12.880
> 
> 标签：linux, bash, time

只是一个关于 Linux 上计时程序的小问题： time 命令允许测量程序的执行时间：

```
[ed@lbox200 ~]$ time sleep 1

real    0m1.004s
user    0m0.000s
sys     0m0.004s 
```

哪个工作正常。但是如果我尝试将输出重定向到一个文件，它就会失败。

```
[ed@lbox200 ~]$ time sleep 1 > time.txt

real    0m1.004s
user    0m0.001s
sys     0m0.004s

[ed@lbox200 ~]$ cat time.txt 
[ed@lbox200 ~]$ 
```

我知道选项 -o 有其他时间实现来写入文件，但我的问题是关于没有这些选项的命令。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：322
> 
> 时间：2012-11-13T06:56:53.217

尝试

```
{ time sleep 1 ; } 2> time.txt 
```

它将“时间”的 STDERR 和您的命令组合到 time.txt

或使用

```
{ time sleep 1 2> sleep.stderr ; } 2> time.txt 
```

它将“睡眠”中的 STDERR 放入文件“sleep.stderr”中，并且只有“时间”中的 STDERR 进入“time.txt”

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2015-10-16T00:08:29.820

简单的。GNU`time`实用程序有一个选项。

但是您必须确保您*没有*使用 shell 的内置`time`命令，至少内置命令`bash`不提供该选项！这就是为什么您需要提供该`time`实用程序的完整路径：

```
/usr/bin/time -o time.txt sleep 1 
```

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2012-11-13T06:55:55.217

将您正在计时的命令包装`time`在一组括号中。

例如，下面的时间`ls`和时间的结果`ls`和计时的结果写入`outfile`：

```
$ (time ls) > outfile 2>&1 
```

或者，如果您想将命令的输出与捕获的输出分开`time`：

```
$ (time ls) > ls_results 2> time_results 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2015-04-06T00:08:50.330

如果您关心命令的错误输出，您可以像这样将它们分开，同时仍然使用内置的 time 命令。

```
{ time your_command 2> command.err ; } 2> time.log 
```

或者

```
{ time your_command 2>1 ; } 2> time.log 
```

如您所见，该命令的错误转到一个文件（因为`stderr`用于`time`）。

不幸的是，您不能将其发送到另一个句柄（例如`3>&2`），因为在`{...}`

也就是说，如果你可以使用 GNU 时间，就按照@Tim Ludwinski 所说的去做。

```
\time -o time.log command 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-07-06T18:35:28.407

由于 'time' 命令的输出是错误输出，将其重定向为标准输出会更直观地进行进一步处理。

```
{ time sleep 1; } 2>&1 |  cat > time.txt 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-10-03T20:36:47.097

如果您使用的是 GNU time 而不是内置的 bash，请尝试

```
time -o outfile command 
```

（注意：GNU 时间格式与内置的 bash 略有不同）。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-01-09T19:42:06.663

我最终使用：

```
/usr/bin/time -ao output_file.txt -f "Operation took: %E" echo lol 
```

*   其中“a”是附加的
*   其中“o”后面是要附加到的文件名
*   其中“f”是具有类似 printf 语法的格式
*   其中 "%E" 产生 0:00:00；时：分：秒
*   我不得不调用 /usr/bin/time 因为 bash“时间”正在践踏它并且没有相同的选项
*   我只是想将输出输出到文件，与 OP 不同

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-11-13T06:59:07.857

```
&>out time command >/dev/null 
```

在你的情况下

```
&>out time sleep 1 >/dev/null 
```

然后

```
cat out 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-01-21T18:03:00.767

```
#!/bin/bash

set -e

_onexit() {
    [[ $TMPD ]] && rm -rf "$TMPD"
}

TMPD="$(mktemp -d)"
trap _onexit EXIT

_time_2() {
    "$@" 2>&3
}

_time_1() {
    time _time_2 "$@"
}

_time() {
    declare time_label="$1"
    shift
    exec 3>&2
    _time_1 "$@" 2>"$TMPD/timing.$time_label"
    echo "time[$time_label]"
    cat "$TMPD/timing.$time_label"
}

_time a _do_something
_time b _do_another_thing
_time c _finish_up 
```

这样做的好处是不生成子 shell，并且最终管道将其 stderr 恢复为真正的 stderr。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-08-15T14:21:04.453

如果您不想接触原始进程的 stdout 和 stderr，可以将 stderr 重定向到文件描述符 3 并返回：

```
$ { time { perl -le "print 'foo'; warn 'bar';" 2>&3; }; } 3>&2 2> time.out
foo
bar at -e line 1.
$ cat time.out

real    0m0.009s
user    0m0.004s
sys     0m0.000s 
```

您可以将其用于包装器（例如用于 cronjobs）来监控运行时：

```
#!/bin/bash

echo "[$(date)]" "$@" >> /my/runtime.log

{ time { "$@" 2>&3; }; } 3>&2 2>> /my/runtime.log 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-01-19T18:46:18.323

如果您**只**想要shell 变量中的时间，那么这可以工作：

```
var=`{ time <command> ; } 2>&1 1>/dev/null` 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-05-17T15:16:16.673

如果您正在使用`csh`，您可以使用：

```
/usr/bin/time --output=outfile -p $SHELL  -c 'your command' 
```

例如：

```
/usr/bin/time --output=outtime.txt -p csh -c 'cat file' 
```

# php - PHP MySQL 尝试加载数据

> ID：13356629
> 
> 赞同：1
> 
> 时间：2012-11-13T06:54:25.180
> 
> 标签：php, mysql, database

我有一个包含游戏分数的多列表。格式是每个分数都附有一个 gameid 编号。然后我找到每个游戏 ID 的最高分并显示它。问题是如果一个游戏被删除，并且gameid号不再连续，它会显示该游戏相同高分的2个。例如，gameid 3 的得分为 5000，gameid 4 的得分为 6000，gameid 5 的得分为 3200。如果我删除 gameid 4，输出将是 5000-3、5000-3、3200-5。我显然没有希望它输出2个相同的分数。下面是我用来执行此操作的 PHP 代码：

```
<?php

echo '<table cellpadding="0" class="content" cellspacing="0" width="100%" >';
echo '<tr><th>Game</th><th>Initials</th><th>Score</th><th>Date</th></tr>';

include("includes/sqlconnect.inc");
include("includes/functions.php");
$idnum=1;

    $allscores = mysql_query("SELECT * FROM scores");
    $highid = array(
    );
    while($row = mysql_fetch_array( $allscores ))
    {
    $idnums=$row['gameid'];
    $highid[]=$idnums;      
    }
while($idnum<=max($highid))
{
    $allscores = mysql_query("SELECT * FROM scores WHERE gameid ='$idnum'");
    $array = array(
    );
    while($row = mysql_fetch_array( $allscores ))
    {
    $score=$row['score'];
    $scoreid=$row['scoreid'];
    $array[$scoreid]=$score;      
    }
    $high=doublemax($array);
    $nameid = mysql_query("SELECT scoreid,playerid,score FROM scores WHERE scoreid='$high[i]'");
    while($row = mysql_fetch_array($nameid))
    {
    $player=$row['playerid'];
    }
    $dateid = mysql_query("SELECT scoreid,date FROM scores WHERE scoreid='$high[i]'");
    while($row = mysql_fetch_array($dateid))
    {
    if($row['date']=="")
    {
            $date="Unknown";
    }
    else
    {
            $date=$row['date'];
    }
    }
    $name = mysql_query("SELECT playerid,player_initials FROM players WHERE playerid='$player'");
    while($row = mysql_fetch_array($name))
    {
    $initials=$row['player_initials'];
    }
    $gamename = mysql_query("SELECT gameid,gamename FROM games WHERE gameid='$idnum'");
    while($row = mysql_fetch_array($gamename))
    {
    $game=$row['gamename'];
    }

    $idnum++;

            echo "<tr>";
            echo '<td>'.$game.'</td>';
            echo '<td>'.$initials.'</td>';
            echo '<td>'.number_format($score).'</td>';
            echo '<td>'.$date.'</td>';      
    echo "</tr>";

    }

echo "</table>";

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:26:01.503

你这样做太难了。您的查询应如下所示：

```
SELECT
    game_id,
    MAX(score)
FROM
    scores 
```

然后，如果您想显示有关该游戏的更多信息并且不想重复，请这样做：

```
SELECT
    h.game_id,
    h.score,
    (
        SELECT 
            /*for example*/ date_played 
        FROM 
            scores 
        WHERE 
            game_id = h.game_id AND 
            score = h.score 
        LIMIT 1
    ) date_played
FROM
(
    SELECT
        game_id,
        MAX(score) score
    FROM
        scores
) hiscores h 
```

简而言之：mysql 是以您想要的形式获取数据的工具。不要在完全没有必要的地方过度使用 php。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:29:55.227

问题是您将输出数量基于 id 而不是返回的数据行数。

而不是稍后在您的初始查询中获得最高分数

```
 $allscores = mysql_query("SELECT field1, field2, MAX(score) FROM scores GROUP BY gameid"); // I don't know the field names you need obviously place those instead of field1 etc. 
```

然后将您的主循环基于 foreach 而不是 while。

# java - 在数组上使用 length()

> ID：13356630
> 
> 赞同：0
> 
> 时间：2012-11-13T06:54:26.300
> 
> 标签：java

需要创建一个`int length()`方法，其中数组在方法之外。正在考虑做一个for循环`for (int i = 0; i < array.length; i++)`......但我不确定请帮忙。在 API 上看起来很简单，但数组不在方法本身中，所以不知道该怎么做。

```
public class MyString
{

    private char[] array;
    private int size;
    private int max;

    public MyString()
    {
        array = new char[25];
        max = 25;
    }
    public void setString(String newString)
    {
     if(newString.length() > 25)
     {
         System.out.println("/nEnter a number equal or less than 25 " );

     }
     else
     {
      for(int i=0; i < newString.length(); i++)
      {
        array[i] = newString.charAt(i);
      }
     }
    }

    public String toString()
    {
        return new String(array);
    }

    public char charAt(int index)
    {
        return array[index];
    }

    public boolean contains(char ch)
    {
        for(char c: array)
        {
            if(c == ch) return true;
        }
        return false;
     }
     public int indexOf( char ch )
     {
        for (int i = 0; i < array.length; i++)
        {
           if (array[i] == ch)
           {
               return i;   // Character found, return current index
           }
         }
            return -1;    // Character not found. Return -1
      }
      public int length()
      { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:08:41.470

在您的示例`array.length`中，总是会返回 25。如果您想要带有值的数组长度，请使用：

```
 public int length(){
       int i = 0;
       for (char c : array) {               
           if (c == '\u0000')
               return i;  
           i++;         
       }
       return array.length;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T06:58:41.733

我不确定我是否完全正确地回答了您的问题，但是

```
public int length() {
   return array.length;
} 
```

应该这样做。java中的数组有一个`length`包含数组长度的成员。

请注意，这将返回`Array length`问题代码中的 which 始终为 25。

如果您想要字符串长度，请使用@Grisha 中的方法，或者使用代码中已经存在但尚未使用的 size 成员：

```
public MyString() {
   array = new char[25];
   max = 25;

   size = 0;
}

public void setString(String newString) {
   if(newString.length() > 25) {
      System.out.println("/nEnter a number equal or less than 25 " );
   } else {
      size = newString.length();

      for(int i = 0; i < size; i++) {
          array[i] = newString.charAt(i);
      }
   }
}

public int length() {
   return size;
} 
```

这将避免具有线性复杂度的循环（length() 将是 O(1) 而不是 O(n)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T07:05:49.810

请参阅以下代码可能对您有所帮助：

```
public int length()
{
    if (array != null) {
        return  array.length;
    }
    return 0; // any default value which you want
} 
```

# python - 将日期时间转换为字符串并再次返回

> ID：13356632
> 
> 赞同：16
> 
> 时间：2012-11-13T06:54:33.000
> 
> 标签：python, datetime, deserialization

我有一个`datetime`我保存到这样的文件的文件：

```
time1 = datetime.datetime.now()
f.write(str(time1)) 
```

现在当我读到它时，我意识到它`time`是一个字符串。我尝试了不同的方法来转换它，但到目前为止没有运气。

```
time = line[x:x+26] 
```

如何将 a `datetime`back 的字符串表示形式转换为`datetime`对象？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-13T07:00:14.890

首先，您需要弄清楚文件中日期的格式并使用[strptime](http://docs.python.org/2/library/datetime.html#strftime-strptime-behavior)方法，例如

```
# substitute your format
# the one below is likely to be what's saved by str(datetime)
previousTime = datetime.datetime.strptime(line[x:x+26], "%Y-%m-%d %H:%M:%S.%f") 
```

（你最好`dt.strftime(...)`使用`str(dt)`）

然后减去 datetime 对象以获得[timedelta](http://docs.python.org/2/library/datetime.html#timedelta-objects)

```
delta = datetime.datetime.now() - previousTime 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-13T07:01:16.363

尝试使用`dateutil`. 它有一个解析，会尝试将你的字符串转换回一个`datetime`对象。

```
>>> from dateutil import parser
>>> strtime = str(datetime.now())
>>> strtime
'2012-11-13 17:02:22.395000'
>>> parser.parse(strtime)
datetime.datetime(2012, 11, 13, 17, 2, 22, 395000) 
```

然后，您可以`datetime`从另一个中减去一个并获得一个`timedelta`详细说明时间差异的对象。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2021-02-13T19:41:45.537

## 在 python 3.7+ 中稍微简单一些

**要字符串：**

```
import datetime

my_date_string = datetime.datetime.utcnow().isoformat() 
```

**从字符串：**

```
my_date = datetime.datetime.fromisoformat(my_date_string) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-17T07:49:42.273

只需使用：

```
var x = DateTime.parse(time1); 
```

`x`您需要的 DateTime 对象在哪里

# ssl - JavaFX WebView 未加载 HTTPS 页面

> ID：13356633
> 
> 赞同：2
> 
> 时间：2012-11-13T06:54:36.153
> 
> 标签：ssl, webview, javafx-2

我使用 JavaFX WebView 控件编写了一个浏览器。一切都很好，直到我尝试加载加密页面。我尝试[https://www.gmail.com](https://www.gmail.com)并在负载工作程序的异常属性中收到“未知错误”。这只发生在我将应用程序打包为独立应用程序时；当我在 NetBeans 中运行项目时，一切都很好。我猜它与 SSL 证书有关，但我尝试了几乎所有我能想到的，包括使用“keytool”将每个证书导入信任库中，但没有任何效果。

有任何想法吗？非常感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T06:30:35.307

从 IDE（Eclipse、Netbean）启动时，您的浏览器是否支持 https 站点？如果是这样，差异可能是 JRE。您可能需要将文件 sunjce_provider.jar 复制到捆绑的 JRE。我使用的是 Mac，sunjce_provider.jar 位于 /Library/Java/JavaVirtualMachines/jdk1.7.0_06.jdk/Contents/Home/jre/lib/ext 中。

# java - java异步套接字通道/完成处理程序

> ID：13356636
> 
> 赞同：0
> 
> 时间：2012-11-13T06:54:53.113
> 
> 标签：java, nio

根据这篇文章：[https](https://stackoverflow.com/questions/6666659/threading-implications-of-asynchronousbytechannel) ://stackoverflow.com/questions/6666659/threading-impplications-of-asynchronousbytechannel异步套接字通道的java实现不保证完成处理程序在单独的线程中被调用。所以如果你正在读入一个字节缓冲区，你如何在 wait() 之后调用 notify()？

```
 class CH implements CompletionHandler<Integer,Integer>
       {            
            public volatile int i = 0;
            public void completed(Integer i, Integer o)
            {
               this.i = i;
               synchronized(this)
                {
                    this.notify();
             }
           }

        public void failed(Throwable t, Integer o)
        {
            this.i = -5;                
            synchronized(this)
            {
                this.notify();
            }
        }

    }

               CH x = new CH();
              synchronized (x) {            
                    while (!(x.i == -1 || x.i == -5)) {
                            aschannel.read(bytebuffer, 5, TimeUnit.SECONDS, null, x);
                             x.wait();                                           
                             if(x.i != -1 && x.i != -5){
                                  bytebuffer.flip();
                                   filechannel.write(bytebuffer.array,0,x.i);
                                   bytebuffer.clear();
                               }
               }     

              } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T08:33:59.867

您的程序可能会工作，因为`wait()`释放了监视器并允许执行回调。

然而，异步 I/O 的整个想法是让 I/O 交换发起者免于等待（从而保持线程）。如果您仍然想等待，那么只需使用良好的旧同步 API。或者在没有返回的 CompletionHandler 的情况下调用 read `Future`，然后等待该 Future。

# android - 为什么我在 Google Play 上的游戏不支持我的设备

> ID：13356641
> 
> 赞同：1
> 
> 时间：2012-11-13T06:55:20.210
> 
> 标签：android, google-play

我有一台 Android 2.1 (API-7) 的设备，它支持蓝牙、WiFi，但没有 GSM 和 3G。

我有一个游戏。Google play 说我的设备不支持该游戏。

但在我为 Admob 横幅添加权限之前，该游戏在 Google Play 上是可见的。神秘。

我玩过清单。如果我清除蓝牙权限，游戏就会在 Google Play 上显示。

清单如下：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="mypackage1..."
      android:versionCode="13"
      android:versionName="4.5">
<uses-sdk android:targetSdkVersion="13"  android:minSdkVersion="3"/>
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
<uses-permission android:name="android.permission.BLUETOOTH" />

<application android:label="@string/app_name" android:icon="@drawable/icon">
    <activity android:name=".MyActivity"
              android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name=".DeviceListActivity"
              android:label="@string/select_device"
              android:theme="@android:style/Theme.Dialog"
              android:configChanges="orientation|keyboardHidden" />
    <activity android:name=".MyActivity2"/>
    <activity android:name="com.google.ads.AdActivity"

  android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|
screenSize|smallestScreenSize"/>

    <service android:name=".BillingService" />
    <receiver android:name=".BillingReceiver">
        <intent-filter>
            <action android:name="com.android.vending.billing.IN_APP_NOTIFY" />
            <action android:name="com.android.vending.billing.RESPONSE_CODE" />
            <action android:name=
"com.android.vending.billing.PURCHASE_STATE_CHANGED"   />
        </intent-filter>
    </receiver>
</application>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="com.android.vending.BILLING" />
</manifest> 
```

那么我的第一场比赛有什么问题呢？我的设备是平板电脑“Inch U7s”。我的游戏 APK 在 Google 上的权限如下：

```
 android.permission.BLUETOOTH_ADMIN, 
android.permission.BLUETOOTH, 
android.permission.ACCESS_NETWORK_STATE, 
android.permission.INTERNET, 
com.android.vending.BILLING, 
Functions: android.hardware.bluetooth, android.hardware.touchscreen
API: 4-17+
Screens: small-xlarge
OpenGL: all
Platforms: armeabi-v7a, armeabi 
```

* * *

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:40:57.560

默认情况下，许多权限意味着硬件要求。例如，如果您请求摄像头权限，则应用默认需要摄像头。您必须专门将该功能设置为不需要。

蓝牙应该不是问题，因为您的 APK 针对 API 4+。也许它与应用内计费有关。

尝试运行“aapt dump badging myapp.apk”并查看它列出了哪些使用功能行。

# sql - 在 Sql 中的多对多查询中需要帮助

> ID：13356643
> 
> 赞同：1
> 
> 时间：2012-11-13T06:55:30.880
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sqlite

我有两个表`Coupon`，`Tags`它们有多对多的关系现在我想创建一些 sql 视图满足以下情况

1-需要用标签计算每个标签中有多少优惠券（完成）

2- 需要获取按热门标签排序的标签列表（热门标签是拥有最多优惠券的标签）

3- 需要计算过去 7 天内在每个标签上创建的所有优惠券

我为第一个条件编写的 sql 视图如下

**SQLVIEW**

```
Create VIEW [dbo].[TagsWithCount] AS

  SELECT Tag.Id as Id , Tag.Name as TagName ,Tag.description as Description,
   COUNT(*) AS CouponCount
   FROM Tags AS Tag
   inner JOIN couponsTotags c ON c.Tagid = Tag.id  
    GROUP BY Tag.Name , Tag.Id ,Tag.description
    GO 
```

它给了我以下结果

![在此处输入图像描述](../Images/6768b5efbbfe8ae36e321222dfa0e0be.png)

我怎么能得到，其余的事情谁能帮助我，告诉我如果你需要任何其他细节

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:09:53.200

```
 Create VIEW [dbo].[TagsWithCount] AS

    select * from  (SELECT Tag.Id as Id , Tag.Name as TagName ,Tag.description as Description,
       case when DATEDIFF(day, CreateDate, systemdate)<=7 then 'Its sevendays old'
else 'its more than 7 days old' end as SevendaysOldStatus,COUNT(*) AS CouponCount    
       FROM Tags AS Tag
       inner JOIN couponsTotags c ON c.Tagid = Tag.id  
        GROUP BY Tag.Name , Tag.Id ,Tag.description,CreateDate) temp
    order by CouponCount desc
        GO 
```

验证未在任何编辑器中尝试过的系统日期，但希望能满足您的要求

# java - 什么是更有效的 Java Hashmap 还是一个 mysql 临时表？

> ID：13356649
> 
> 赞同：2
> 
> 时间：2012-11-13T06:56:13.117
> 
> 标签：java, mysql, spring, hibernate, hashmap

我正在将数据从一个数据库迁移到另一个数据库。

我正在迁移的数据是产品版本的评论。

每个评论都有很多版本。有 23K 不同的评论，60k 版本有评论意味着大约每 3 个版本共享一个评论。

在我的 Java 应用程序中，主机数据库包含具有与评论数据库上的评论相关联的 reviewId 的版本。

我有一个`Hashmap<Integer, Integer>`，每次我从评论数据库中导入评论时，我都会使用`map.put(reviewId, hostId)`.

在我从评论数据库导入之前，我检查它是否在哈希图中，如果它是我使用已经导入的评论。一段时间后这开始变得非常慢，我想知道使用临时表是否更有效。或者，如果有另一种更有效的方法。

这是代码： [https ://gist.github.com/4064373](https://gist.github.com/4064373)

想法、建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T09:28:46.883

MySQL 临时表在最好的情况下也将实现为哈希映射。但与 Java 哈希映射相比，实现将准备处理更多的列。而且你有与 MySQL 通信的开销。因此，要回答您问题的标题，如果您从应用程序访问数据，我希望 Java HashMap 会更有效。对于 SQL 服务器内的数据关联，情况有所不同。

[但正如 Jon Skeet在他的评论中](https://stackoverflow.com/questions/13356649/whats-more-efficient-a-java-hashmapinteger-integer-or-a-mysql-temp-table#comment18231679_13356649)指出的那样，从整数到整数的简单哈希映射对于您所描述的那种应用程序来说不应该是严重的性能瓶颈。所以很有可能其他东西是以次优的方式编写的。乍一看，我没有看到任何明显的问题，但是，您调用的方法有很多，从理论上讲，其中任何一个都可能是罪魁祸首。

# javascript - 通过ajax获取json的类初始化总是失败

> ID：13356651
> 
> 赞同：2
> 
> 时间：2012-11-13T06:56:38.557
> 
> 标签：javascript, jquery

我是 JavaScript 的新手。我想创建一个在初始化时使用 Ajax 与 Flickr Web API 通信的类。

**Photo2.js**

```
 var Photo2;

  Photo2 = (function() {

    Photo2.prototype.json = null;

    function Photo2() {
      $.getJSON('http://www.flickr.com/services/rest/?jsoncallback=?', {
        format: 'json',
        method: 'flickr.photos.search',
        api_key: '7965a8bc5a2a88908e8321f3f56c80ea',
        user_id: '29242822@N00',
        per_page: '100'
      }, function(data) {
        this.json = data.photos.photo;
      });
    }

    return Photo2;

  })(); 
```

但是当初始化为`photo2 = new Photo2`this 时并没有`photo2.json`.

谢谢你的好意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:27:54.450

你真的应该重写你的代码。很难弄清楚你想要实现什么。

首先，从服务器获取数据是异步的，因此您无法确定在创建 Photo2`json`属性实例后是否会被定义。

接下来的事情是，在初始化对象时进行服务器调用是非常糟糕的主意。我建议您遵循以下解决方案：

```
(function() {
  var Photo2 = function(callback) {
    this.json = null;
  };

  Photo2.prototype.getData =  function(successCallback) {
    var self = this;

    $.getJSON('http://www.flickr.com/services/rest/?jsoncallback=?', {
        format: 'json',
        method: 'flickr.photos.search',
        api_key: '7965a8bc5a2a88908e8321f3f56c80ea',
        user_id: '29242822@N00',
        per_page: '100'
      }, function(data) {
        self.json = data.photos.photo;
        typeof successCallback == 'function' && successCallback();
      }); 
  };

  var photo = new Photo2();
  photo.getData(function successCallback() {
    console.log('Data loaded', photo.json);
  });
}).call(this); 
```

在这里工作演示：http: [//jsbin.com/ureyas/1/edit](http://jsbin.com/ureyas/1/edit)

# iphone - iphone如何将横向改为纵向？

> ID：13356653
> 
> 赞同：1
> 
> 时间：2012-11-13T06:56:44.637
> 
> 标签：iphone

我在 iPhone 中开发了一个简单的游戏。整个游戏为横向模式，但计分板页面只支持纵向模式。我已经检查了这里的问题，我只发现将纵向模式转换为横向模式，但我需要相反的答案。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T07:29:37.753

我在 AppDelegate 中使用了这两个调用。仅在横向中获取游戏中心（记分牌）。

```
// Supported orientations: Landscape. Customize it for your own needs
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
}

#if __IPHONE_OS_VERSION_MAX_ALLOWED >= __IPHONE_6_0
- (NSUInteger)application:(UIApplication*)application supportedInterfaceOrientationsForWindow:(UIWindow*)window
{
    return UIInterfaceOrientationMaskAllButUpsideDown; //Getting error here? then update ur xcode to 4.5+
}
#endif 
```

Xcode 设置：标记横向。![在此处输入图像描述](../Images/474be1b4fe8f2e4123e427bf1b9fd501.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:33:07.890

这很简单。首先，确保目标摘要中同时支持纵向和横向。然后：

在景观 ViewControllers 中，添加以下内容：

```
-(NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskLandscape;
} 
```

在纵向 ViewController 中，添加以下内容：

```
-(NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskPortrait;
} 
```

# jquery - jQuery Chosen 和 JSF2 f:ajax 渲染问题

> ID：13356655
> 
> 赞同：1
> 
> 时间：2012-11-13T06:57:14.290
> 
> 标签：jquery, jsf-2, jquery-chosen

我在页面中使用 Chosen jQuery 插件。

我有一个下拉列表，它在选择时调用 backbean 函数并使用 f:ajax 填充另一个下拉列表的值，例如：

```
<h:selectOneListbox id="drop1"
                   value="#{myBean.drop1Value}" 
                   styleClass="chzn-select">
      <f:ajax event="valueChange" listener="#{myBean.doSomething}"
                     render="drop2"/>
      <f:selectItems value="#{myBean.drop1Values}" />
</h:selectOneListbox>

<h:selectOneListbox id="drop2" 
                    value="#{myBean.drop2Value}" 
                    styleClass="chzn-select">
      <f:selectItems value="#{myBean.drop2Values}" />
</h:selectOneListbox> 
```

问题是在事件完成时 drop2 被重新渲染，我仍然有旧的空选择下拉列表出现在它旁边，如下所示： ![在此处输入图像描述](../Images/dafc48d0dcb90356a97c0d6ecd37101a.png)

我尝试添加：

```
 <f:ajax event="valueChange" listener="do something"
                     render="drop2" onevent="updateDropdown" />

   function updateDropdown(event) {
      if(event.status == 'success'){
          $('.chzn-select').chosen();
      }
   } 
```

但这只是附加到更新的 drop2 上。旧选择的下拉菜单仍然存在。有人可以告诉我如何处理这种情况吗？谢谢

**可能的解决方案？**

```
 <script>
            function updateDropDowns(event){
                if(event.status == 'success'){

                    //this line removes the previous Chosen dropdown 
                    //the problem was that when the drop2 was being updated by f:ajax render
                    // i would end up with two Chosen Divs so removing the old div before 
                    //reattaching Chosen to select component seems to do good and eliminate duplicated 
                    //chosen dropdowns!

                    $('div [id$="drop2_chzn"]').remove();
                    //this lines attaches Chosen to the updates plugin
                    $('.chzn-select').chosen();
                }
            }
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:33:16.430

试试这个：用给它一个 Id 包装 drop2`h:panelGroup`并渲染它

而不是`render="drop2"` 做`render="drop2_wrapper"`

这*应该*消除重复

# cryptography - 将数据拆分为更小的部分，然后使用 RSA 加密

> ID：13356656
> 
> 赞同：4
> 
> 时间：2012-11-13T06:57:25.447
> 
> 标签：cryptography, rsa, encryption

我正在研究需要加密大量数据的东西。

我知道这应该使用像 AES 这样的对称密钥加密系统而不是像 RSA 这样的公钥加密系统来完成，但我正在考虑使用 RSA 来完成，将数据分成更小的部分，然后用它们加密它们中的每一个相同的公钥。

除了性能考虑之外，这种方法是否安全？这种加密方式能轻易破解吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T09:14:42.813

不，它不安全。

您实际上是在使用 RSA 作为分组密码，正如您已经指出的那样，您可能应该在这个地方使用对称密码。

此外，正如@Jamey 所指出的，这种相互独立地加密明文块/块的方案本质上类似于分组密码的电子密码本 ( [ECB](https://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Electronic_codebook_.28ECB.29) ) 操作模式。

如果不使用其他任何东西，您提出的方案至少容易受到两种攻击：

*   [重放攻击](https://en.wikipedia.org/wiki/Replay_attack)，如果您没有在您的方案中包含任何其他信息以防止重用消息。例如，一个攻击者记录了 Alice 和一家银行之间的所有加密流，她从她的账户中提取了 100.00 美元。

    在这种情况下，通过多次重放流，攻击者可以通过多次将流发送到银行来使 Alice 破产，这样就可以了。

*   选择[明文攻击](https://en.wikipedia.org/wiki/Chosen-plaintext_attack)，因为块是独立的，在这种情况下攻击者的[优势](https://en.wikipedia.org/wiki/Advantage_%28cryptography%29)将是 1（尽可能高）。

确实，尝试想出自己的密码很有趣，但要获得正确的安全性却很困难。在没有完整性/身份验证的情况下更是如此。

* * *

**注意：**由于人们似乎错过了我原始帖子中“不使用其他任何东西”的部分，所以我的回答一直被否决。

我想我应该明确一点，以上是关于使用“纯 RSA”或“教科书 RSA”，其中不包括使用 RSA 密码的随机填充（“其他任何东西”）。

在实际应用中，*“其他任何东西”*是使用[OAEP （一种用随机位](https://en.wikipedia.org/wiki/Optimal_Asymmetric_Encryption_Padding)[简单填充](https://en.wikipedia.org/wiki/RSA_%28algorithm%29#Padding_schemes)原始消息的“更强大的形式” ），它包含在更新版本的[PKCS#1](https://en.wikipedia.org/wiki/PKCS_%E2%99%AF1)标准中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T08:39:26.667

只要您使用经过公开审查的 API，就应该没问题。但通常，您只想用 RSA 公钥加密一个对称密钥（如 AES），然后用该对称密钥对每个消息片段进行块加密。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T08:05:44.623

一般的建议是：如果你真的关心安全性，就不要发明新的密码系统；或者，如果必须，至少让严肃的密码学研究人员公开同行评审。

也就是说，我所拥有的最好的是，这听起来像是您将 RSA 视为一种分组密码，因此您可能想要使用标准分组密码模式。显而易见的事情是，仅使用相同的密钥分别加密每个块，这听起来等同于不安全的电子密码本 (ECB) 模式。也许您可以使用更好的模式之一，例如带有 RSA 的 CBC？

由于我们忽略了实际的性能问题，我将指出一个不同的实际考虑。RSA的输入`m`必须在 0<= `m`<范围内`n`，其中`n`是公钥参数之一。由于 的值`n`必须是两个不同素数的乘积，它永远不可能是 2 的幂，因此将较大的消息分成适合 RSA 输入的块有点令人困惑。

此外，不要忘记填充您使用 RSA 加密的每条消息。

简而言之：不要为真正的项目做这件事，但这是一个巧妙的思想实验。:-)

# android - Android NDK 和库层

> ID：13356657
> 
> 赞同：2
> 
> 时间：2012-11-13T06:57:28.983
> 
> 标签：android, android-ndk, java-native-interface

我对 Android 架构的 Android NDK 和库层感到困惑。我的意思是，在库层，您会获得 C 或 C++ 的 .so 文件。当我们使用 java 在 Android 中编写应用程序并在 NDK 中进行部分开发时，NDK 部分适合哪里？它位于应用程序层还是我们可以说它是库层的一部分？

我有这个困境，因为 NDK 的最终输出是一个 .so，我们将它作为库加载到 java 应用程序中。我正在为我们开发的应用程序编写报告，并且想知道将这些层中的 NDK 部分放在哪里。

![在此处输入图像描述](../Images/5f30d77da18e3652911676fb91fb640e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:23:35.380

我不太确定您的意思，但我会尝试撰写答案。

使用 NDK，您可以获得所有用于编码的内容，从内核头文件和程序集之类的真正低级内容到有关活动生命周期的真正高级调用。

使用您的话并将这张图片作为 NDK 的参考，您可以从下往上进行，反之亦然，您可以将所有层与 NDK 一起使用。

但这是理论上的，例如您甚至可以使用 NDK 编写一个 linux 内核模块（驱动程序），但实际上您可能无法这样做，因为所有商用手机都使用单片内核，所以如果您的应用程序需要一个司机上班，由于现实世界的场景限制，你不得不放弃你的想法。

# collections - 教义2选择使用集合的成员

> ID：13356659
> 
> 赞同：3
> 
> 时间：2012-11-13T06:57:40.843
> 
> 标签：collections, doctrine-orm, where

我有两个具有 oneToMany 和 manyToOne 关系的实体

文章有 oneToMany 标签

ArticleTag 有 manyToOne 文章

```
$articleTags = $em->getRepository('Model\ArticleTag')
    ->findBy(array('article' => $articleId));

$qb->select('a')
    ->from('\\Model\\Article', 'a')
    ->where(':tags MEMBER OF a.tags')
    ->setParameter('tags', $articleTags); 
```

该查询返回错误：

```
An exception occurred while executing
    SELECT .. FROM article a0_ WHERE EXISTS (SELECT 1 FROM article_tag a1_ WHERE a0_.id = a1_.article_id AND a1_.id = ?, ?, ?)' with params {"1":8,"2":9,"3":10}
SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ' 9, 10)' at line 1 
```

有什么方法可以**在**表达式 ' a1_.id **=** **?, ?, ?** '

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-31T12:19:20.020

这个问题很老，但这里有一个答案：

`IN`如果您使用数组作为输入，则可以使用，如下所示：

```
...  
->where( 'a.id IN (:tag_ids)' )  
->setParameter( 'tag_ids', $articleTags )  
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-08T13:47:28.177

正如 lordjansco 所说，老问题，但我想向发现它的其他人扩展一点。

为了扩展 lordjancso 的答案，因为`a.id`是指文章 ID 而不是标签 ID。您需要执行带有`IN`on的内部联接，`a.tags`以从相关标签中检索文章。

像这样。

```
$articleTags = $em->getRepository('Model\\ArticleTag')
   ->findBy(array('article' => $articleId));

$qb = $em->createQueryBuilder();
$query = $qb->select('a')
   ->from('\\Model\\Article', 'a')
   ->innerJoin('a.tags', 't', 'WITH', 't.id IN (:tags)')
   ->setParameter('tags', $articleTags)
   ->getQuery();
$result = $query->getResult(); 
```

* * *

但是，由于您已经知道文章 ID，因此无需创建另一个查询来从标签中检索文章。

如果您使用 Doctrine2 ORM 并且您的实体设置为 ManyToOne，那么您应该可以直接`getTags`从文章中调用。

```
$article = $em->getRepository('Model\\Article')->findOneById($articleId);
$articleTags = $article->getTags(); 
```

或者如果需要，您还可以遍历每个标签。

```
$articleTags = $em->getRepository('Model\\ArticleTag')
    ->findBy(array('article' => $articleId));

foreach ($articleTags as $articleTag) {
   $article = $articleTag->getArticle();
} 
```

确保您为实体配置了双向一对多关联。

[http://doctrine-orm.readthedocs.org/en/latest/reference/association-mapping.html#one-to-many-bidirectional](http://doctrine-orm.readthedocs.org/en/latest/reference/association-mapping.html#one-to-many-bidirectional)

像这样：

```
use \Doctrine\Common\Collections\ArrayCollection;

/** @Entity **/
class Article
{
    /**
     * @var ArrayCollection|ArticleTags[]
     * @ORM\OneToMany(targetEntity="ArticleTags", mappedBy="article")
     */
    private $tags;

    public function __construct()
    {
       $this->tags = new ArrayCollection;
    }

    /**
     * @return ArticleTags[]|ArrayCollection
     */
    public function getTags()
    {
        return $this->tags;
    }
} 
```

```
/** @Entity **/
class ArticleTags
{
    /**
     * @var Article
     * @ORM\ManyToOne(targetEntity="Article", inversedBy="tags")
     * @ORM\JoinColumn(name="article", referencedColumnName="id")
     */
    private $article;
} 
```

# java - 找不到符号“y”

> ID：13356660
> 
> 赞同：-1
> 
> 时间：2012-11-13T06:57:43.823
> 
> 标签：java

我在这里不断收到“找不到符号”错误：

```
 System.out.println ("Are there still more precincts to report? Please enter y or n");
    response = scan.next();
    while (response.equalsIgnoreCase(y))// Initializations
    {
    System.out.print("Enter votes for Polly: ");
   votesForPolly = scan.nextInt();
    System.out.print("Enter votes for Ernest: "); 
```

如果问题出在其他地方，这是完整的代码：

```
import java.util.Scanner;

public class Election
{
    public static void main (String[] args)
    {
    int votesForPolly;  // number of votes for Polly in each precinct
    int votesForErnest; // number of votes for Ernest in each precinct
    int totalPolly;     // running total of votes for Polly
    int totalErnest;    // running total of votes for Ernest
    String response;    // answer (y or n) to the "more precincts" question

    int pollyCarried = 0;
    int ernestCarried = 0;
    int tied = 0;

    Scanner scan = new Scanner(System.in);

    System.out.println ();
    System.out.println ("Election Day Vote Counting Program");
    System.out.println ();

    System.out.println ("Are there still more precincts to report? Please enter y or n");
    response = scan.next();
    while (response.equalsIgnoreCase(y))// Initializations
    {
    System.out.print("Enter votes for Polly: ");
   votesForPolly = scan.nextInt();
    System.out.print("Enter votes for Ernest: ");
    votesForErnest = scan.nextInt();

    totalPolly += votesForPolly;
    totalErnest += votesForErnest;

    if ( votesForPolly > votesForErnest )
    pollyCarried++;
   else if ( votesForErnest > votesForPolly )
      ernestCarried++;
   else
      tied++;

    System.out.println ("Are there still more precincts to report? Please enter y or n");
    response = scan.next();
    }// Loop to "process" the votes in each precinct
    int totalVotes = votesForPolly + votesForErnest;

    System.out.println("Polly got " + totalPolly + " votes carrying " + pollyCarried + " precincts.");// Print out the results
    System.out.println("Ernest got " + totalErnest + " votes carrying " + ernestCarried + " precincts.");
    System.out.println("Polly got " + ((totalPolly/totalVotes)*100));
    System.out.println("Ernest got " + ((totalErnest/totalVotes)*100));
    System.out.println("Polly carried " + pollyCarried + " precincts");
    System.out.println("Ernest carried " + ernestCarried + "precincts");
    System.out.println(tied + " precincts resulted in a tie");

    }
} 
```

我还尝试制作一个名为“肯定”的字符或字符串，并将其分配为字母 y，以便我可以在循环中使用它，但这并不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T06:59:17.047

你没有声明任何与`y`

在这一行，

`while (response.equalsIgnoreCase(y))`

编译器不知道是什么`y`。

我猜你是这个意思？

`while (response.equalsIgnoreCase("y"))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T07:00:09.467

在这一行：

```
while (response.equalsIgnoreCase(y)) 
```

`y`是一个未在任何地方定义的变量。显然，您想将其用作字符串（或字符）。该行应该是：

```
while (response.equalsIgnoreCase("y")) 
```

# .net - webservice 仍然返回 xml 而不是 json

> ID：13356665
> 
> 赞同：0
> 
> 时间：2012-11-13T06:58:00.453
> 
> 标签：.net, json, web-services

从我在[Consuming web service with RESTKIT](https://stackoverflow.com/questions/13355188/consuming-web-service-with-restkit)的主要问题中，我学到了一些东西，并且在学习如何使用 RestKit 时遇到了更多障碍。

现在的障碍之一是让我的 asmx 文件以 JSON 格式返回数据。（按照[http://williamsportwebdeveloper.com/cgi/wp/?p=494](http://williamsportwebdeveloper.com/cgi/wp/?p=494)的一些方法）

```
[WebMethod]
    [ScriptMethod( ResponseFormat = ResponseFormat.Json)]
    public string testText()
    {
        string name = "Herro World";
       // return name;
        JavaScriptSerializer js = new JavaScriptSerializer();
        string strJSON = js.Serialize(name);
        return strJSON;

    } 
```

但是，我在浏览器中调用时的返回仍然是`<string xmlns="http://tempuri.org/">"Herro World"</string>`

我目前正在使用.net 4.0。我尝试阅读 diff 文章和 SO 线程，并尝试调整它们的设置，但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:57:55.243

仔细查看中给出的示例`http://williamsportwebdeveloper.com/cgi/wp/?p=494`并阅读了一些资料和文章后，事实证明我们必须解析对象。含义字符串无法解析。这个问题通过添加一个对象来存储字符串来解决。

```
[WebMethod]
[ScriptMethod( ResponseFormat = ResponseFormat.Json)]
public string testText()
{
    string name = "Testing for Json!";
    List<string> arrayList = new List<string>();
    arrayList.Add(name); 
    JavaScriptSerializer js = new JavaScriptSerializer();
    string strJSON = js.Serialize(arrayList);
    return strJSON;   
} 
```

这将返回`<string xmlns="http://tempuri.org/">["Testing for Json!"]</string>`

希望它可以帮助像我这样尝试更改返回格式的新人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T08:14:53.380

最可能的原因：您在 http 服务器中运行错误的旧版本代码。尝试将其更改为`name`您以前未使用过的其他字符串值......这应该会告诉您您部署的代码是否已正确更新。

# c# - 如何创建只读注册表项？

> ID：13356666
> 
> 赞同：4
> 
> 时间：2012-11-13T06:58:02.687
> 
> 标签：c#, .net, security, permissions, registry

有没有办法在 C# 中创建**只读**注册表项？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T07:02:32.673

[创建子项](http://msdn.microsoft.com/en-us/library/448fee8t.aspx)时可以提供权限，之后也可以调用[`SetAccessControl`](http://msdn.microsoft.com/en-us/library/microsoft.win32.registrykey.setaccesscontrol.aspx)。这两个都使用[`RegistrySecurity`](http://msdn.microsoft.com/en-us/library/system.security.accesscontrol.registrysecurity.aspx)类来表示 ACL。

它不像“只读”那么简单，但它应该能够代表你想要的。

# sql-server - 查询在多列上搜索重复行

> ID：13356671
> 
> 赞同：1
> 
> 时间：2012-11-13T06:58:22.703
> 
> 标签：sql-server, database, duplicates

需要在多列中查找具有重复数据的行

```
hID     sid    lid    aid    did     shid    soid         date
------------------------------------------------------------------
0       123    jkn    rbr    tm      asd     hjk       10/11/2008
1       563    kjh    jkh    dfsd    we      hjk       11/12/2010
2       131    jklj   jkjk   adsd    vcv     asd       01/01/2012
3       656    hjkh   hjkh   dasda   fas     fads      03/26/2012
4       123    jkn    rbr    tm      asd     hjk       09/09/2012 
```

应该可以像dis一样返回..

```
hID     sid    lid    aid    did     shid    soid         date
------------------------------------------------------------------
0       123    jkn    rbr    tm      asd     hjk       10/11/2008
4       123    jkn    rbr    tm      asd     hjk       09/09/2012 
```

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T07:02:18.553

下面的查询比@TimSchmelter 的解决方案重复得多，但如果您碰巧在`sid, lid, aid, did, shid, soid`.

```
SELECT t.* FROM t INNER JOIN (
  SELECT sid, lid, aid, did, shid, soid, COUNT(1) AS count FROM t
  GROUP BY sid, lid, aid, did, shid, soid HAVING COUNT(1) > 1
) tt ON t.sid=tt.sid AND t.lid=tt.lid AND t.aid=tt.aid AND t.did=tt.did AND t.shid=tt.shid AND t.soid=tt.soid; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T07:04:56.957

你可以`GROUP BY`多列。但是由于您想查找所有重复项，因此可以使用`EXISTS`：

```
SELECT
   hID, sid, lid, aid, did, shid, soid, date
FROM TableName t1
WHERE EXISTS
(
   SELECT 1 FROM TableName t2
   WHERE t2.hid <> t1.hid
   AND  t2.sid  = t1.sid   
   AND  t2.lid  = t1.lid    
   AND  t2.aid  = t1.aid   
   AND  t2.did  = t2.did
   AND  t2.shid = t2.shid   
   AND  t2.soid = t2.soid
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T07:43:03.763

这适用于我尝试过的所有 SQL 服务器（[SQLFiddle](http://sqlfiddle.com/#!2/a098d/2)）：

```
SELECT * FROM t
WHERE (sid,lid,aid,did,shid,soid) IN (
    SELECT sid,lid,aid,did,shid,soid
    FROM t
    Group By 1,2,3,4,5,6
    HAVING count(1) > 1
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T17:02:20.353

```
;with tempTable as
(
select *, row_number() over(partition by sid, lid, aid, did, shid, soid order by hid asc )  as rowid
from #table)
select *
from tempTable
where rowid>1 
```

# weather-api - 获取天气预报数据

> ID：13356673
> 
> 赞同：1
> 
> 时间：2012-11-13T06:58:31.580
> 
> 标签：weather-api, google-weather-api, yahoo-weather-api

我想开发一个天气网络服务，我只想获取天气预报的信息。

比我创建自己的界面。但我找不到如何访问这些数据。

如何访问天气数据？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:06:03.023

我在 mashape 上提供了一个[Weather API ，他们有一个可以使用的简单 PHP SDK。](http://metwit.com/developers/)这个 api 使用起来非常简单，因为我们使用了当今可用的很酷的标准，比如 JSON 和 REST。

如果您喜欢它，请在[mashape上尝试一下](http://www.mashape.com/metwit/weather-and-forecast)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-28T21:01:27.920

您可能正在寻找的是直接来自源的数据。[我对这个其他 stackoverflow 问题](https://stackoverflow.com/questions/3200984/where-can-i-find-historical-raw-weather-data/22104133)提供了一个非常全面的概述，但以下是基础知识：

## 数据源

获取数据的最佳地点是国家气象局及其附属机构。他们不仅对美国，而且对整个世界都有预测。要获得您正在寻找的数据量，您需要务实地访问它......这些可能是您最好的选择：

[http://nomads.ncdc.noaa.gov/dods/](http://nomads.ncdc.noaa.gov/dods/) <- 适用于历史数据
[http://nomads.ncep.noaa.gov/dods/](http://nomads.ncep.noaa.gov/dods/) <- 适用于近期数据

## 将数据记录到数据库

随着您需要的数据量，您可能希望将所有内容存储在数据库中......这样可以快速访问和提供服务。一个不错的选择是使用 MySQL 或 PostGRES 以及 PyDAP 或 NetCDF。你可以选择这个 python 预测模块，它结合了 PyDAP 和 PostGRES：

[http://getforecasting.com](http://getforecasting.com)

下载一天内整个预测的主页示例：

```
from forecasting import Model

rap = Model('rap')
rap.connect(database='weather', user='chef')
fields = ['tmp2m']
rap.transfer(fields) 
```

## 使用数据

有了数据库中的数据，就可以轻松查询所需的任何内容。例如，从 Rapid Refresh 模型中获取最新预测：

```
select
ST_X(geom),
ST_Y(geom),
value
from data
inner join gridpoints gp on data.gridid = gp.gridpointid
inner join forecasts fcst on data.forecastid = fcst.forecastid
inner join fields fld on fcst.fieldid = fld.fieldid
inner join models m on fld.modelid = m.modelid
where 
m.name = 'rap'
and fld.name = 'tmp2m'
and fcst.datatime = (select max(datatime) from forecasts where forecasts.fieldid = fld.fieldid)
and fcst.datatimeforecast = (select min(datatimeforecast) from forecasts where forecasts.datatime = fcst.datatime)
order by gp.ord; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T18:01:37.993

您可以使用 yahoo API。以下是示例（在 PHP 中）：

```
 if(isset($_POST['zipcode']) && is_numeric($_POST['zipcode'])){
        $zipcode = $_POST['zipcode'];
    }else{
        $zipcode = '50644';
    }
    $result = file_get_contents('http://weather.yahooapis.com/forecastrss?p=' . $zipcode . '&u=f');
    $xml = simplexml_load_string($result);

    //echo htmlspecialchars($result, ENT_QUOTES, 'UTF-8');

    $xml->registerXPathNamespace('yweather', 'http://xml.weather.yahoo.com/ns/rss/1.0');
    $location = $xml->channel->xpath('yweather:location');

    if(!empty($location)){
        foreach($xml->channel->item as $item){
            $current = $item->xpath('yweather:condition');
            $forecast = $item->xpath('yweather:forecast');
            $current = $current[0];
            $output = <<<END
                <h1 style="margin-bottom: 0">Weather for {$location[0]['city']}, {$location[0]['region']}</h1>
                <small>{$current['date']}</small>
                <h2>Current Conditions</h2>
                <p>
                <span style="font-size:72px; font-weight:bold;">{$current['temp']}&deg;F</span>
                <br/>
                <img src="http://l.yimg.com/a/i/us/we/52/{$current['code']}.gif" style="vertical-align: middle;"/>&nbsp;
                {$current['text']}
                </p>
                <h2>Forecast</h2>
                {$forecast[0]['day']} - {$forecast[0]['text']}. High: {$forecast[0]['high']} Low: {$forecast[0]['low']}
                <br/>
                {$forecast[1]['day']} - {$forecast[1]['text']}. High: {$forecast[1]['high']} Low: {$forecast[1]['low']}
                </p>
    END;
        }
    }else{
        $output = '<h1>No results found, please try a different zip code.</h1>';
    }
    ?>
    <html>
    <head>
    <title>Weather</title>
    <style>
    body {
        font-family: Arial, Helvetica, sans-serif;
        font-size: 12px;
    }
    label {
        font-weight: bold;
    }
    </style>
    </head>
    <body>
    <form method="POST" action="">
    <label>Zip Code:</label> <input type="text" name="zipcode" size="8" value="" /><br /><input type="submit" name="submit" value="Lookup Weather" />
    </form>
    <hr />
    <?php echo $output; ?> 
```

# php - 通过内部数组的键对php中的多维数组进行排序

> ID：13356675
> 
> 赞同：1
> 
> 时间：2012-11-13T06:58:37.007
> 
> 标签：php, api, sorting, multidimensional-array, ksort

我想按时间戳“1357894278”对职位进行排序

```
<?php
foreach( $jobs as &$job )
{
    $cj_date[] =  array( strtotime($job->date) => array( $job->title ));
}

foreach ($results['results'] as $result)
{
    $in_date[] = array ( strtotime($result['date']) => array ($result['jobtitle']) );
}

$ans[] = array_merge($cj_date,$in_date);

foreach($ans as $a)  
{
    ksort($a);
    print_r($a);
}
?> 
```

通过运行这个脚本，我得到了如下输出：

```
Array( [0] => Array
              ( [1352796106] => Array 
                                ( [0] => JobTitle_1 )
              )
       [1] => Array
              ( [1352745201] => Array 
                                ( [0] => JobTitle_2 )
              )
       [2] => Array
              ( [1357894278] => Array 
                                ( [0] => JobTitle_3 )
              )
      ) 
```

那么如何按 1352796106、1352745201、1357894278 对 Job-Titles 进行排序 谢谢！等待帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:07:28.310

试试这个：

```
function compare($a, $b) {
    $ak = array_keys($a);
    $bk = array_keys($b);
    return ($ak[0] < $bk[0]) ? -1 : 1;
}

usort($ans, "compare");
var_dump($ans); 
```

[`usort`](http://www.php.net/manual/en/function.usort.php)按自定义比较函数排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T07:10:12.447

不久前我遇到了类似的问题。我的结构要复杂得多。我最终创建了另一个数组作为我的“地图”，并将其用于排序/索引。

新的地图数组是一个非常简单的结构，它只包含关于我的其他结构的必要信息，刚好足够快速索引和快速排序的信息。

我确信可能还有其他解决方案，但这对我有用，因为我有非常大的复杂结构，如果我没有额外的地图结构，迭代将更加昂贵。这一切都取决于您计算您的时间成本，并根据数据类型的复杂性和大小确定它对您来说是否会变得昂贵。

# python - Python 转换为日期并进行比较

> ID：13356680
> 
> 赞同：0
> 
> 时间：2012-11-13T06:58:57.223
> 
> 标签：python, python-3.x

我有两个字符串，例如 1352789792.757637 和 1352789919.235815。如何将它们转换回时间并进行比较？

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T07:03:03.233

这是假设这些秒是自纪元以来的秒数。如果是这样，这应该适用于转换为`struct_time`：

```
>>> import time
>>> time.gmtime(1352789792.757637)
time.struct_time(tm_year=2012, tm_mon=11, tm_mday=13, tm_hour=6, tm_min=56, tm_sec=32, tm_wday=1, tm_yday=318, tm_isdst=0) 
```

但是请注意，您从文件中返回的格式实际上代表秒，因此可以对这些数字进行差异等操作。根据您想要进行的分析类型，这可能会更容易一些（即，将它们视为`floats`而不是转换为时间）。虽然不确定您的用例，所以这可能会被误导:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T07:10:22.047

要进行比较，您可以直接使用时间戳。你只需要做这样的事情：

```
if float(timestamp1)<float(timestamp2): ... 
```

要将时间戳转换为有用的东西，您可以使用时间模块。

例如：

```
>> import time
>> time.strftime("%Y-%m-%d %H:%M:%S",time.localtime(float("1352789792.757637"))
'2012-11-13 07:56:32' 
```

您可以使用 time.strptime 将其转换回时间戳、预先格式化的日期字符串 - 请参阅此复杂示例的输出：

```
>> import time
>> time.mktime(time.strptime(time.strftime("%Y-%m-%d %H:%M:%S",time.localtime(float("1352789792.757637"))),"%Y-%m-%d %H:%M:%S"))
1352789792.0 
```

# r - 修改 R 包的源代码

> ID：13356681
> 
> 赞同：3
> 
> 时间：2012-11-13T06:58:58.007
> 
> 标签：r, bioconductor

我想删除一行：

```
if( nrow(mm) <= ncol(mm) ) 
```

从生物导体包“DEXSeq”怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T07:06:07.470

R 包只是一个包含多个目录和文件的存档。您可以随意修改它们。下载包——它的结尾是“.tar.gz”。打开包装；在许多系统中，以下（从命令行）将起作用：

```
tar xzf package.tar.gz 
```

或者，如果您有 zip Windows 版本的软件包 (package.zip)，只需解压缩即可。

输入创建的目录，输入目录“R”并找到包含您的函数的文件：

```
cd package
cd R
grep "if( nrow(mm) <= ncol(mm) )" *.R 
```

编辑它，然后重新打包：

```
cd ../..
tar czf package_mine.tar.gz 
```

或者，在 Windows 中，将目录压缩回`package.zip`表单。

您现在可以安装和使用 package_mine。

这不是唯一的方法，通常应该使用 R 重建包。但是，对于小的修改和快速尝试它会做的事情。

# javascript - 避免 ontextchange 事件中的回发

> ID：13356684
> 
> 赞同：3
> 
> 时间：2012-11-13T06:59:16.690
> 
> 标签：javascript, asp.net

我正在使用 a`asp:textbox`并且它正在触发 ontextchanged 事件，并且在该事件中我将值绑定到会话变量。我的问题是它每次都回发页面，所以我想避免在那个事件中回发。

请帮助我做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:06:14.350

`OnTextChanged`是一个服务器事件，如果您希望它被触发并且您的会话状态正确更新，那么页面需要进行回发。另一种方法是使用`onchange`哪个是客户端事件，并通过`javascript`对后端执行 ajax 调用来更新会话状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:14:13.577

如果您想在客户端 (JavaScript) 上处理事件，那么您应该使用`onchange`.

现在它在服务器端处理，因为 OnTextChange 是`asp:TextBox`服务器端事件的一部分。基本上服务器端事件=回发

# ios - 如何从 NSString 中提取数字？

> ID：13356687
> 
> 赞同：0
> 
> 时间：2012-11-13T06:59:24.773
> 
> 标签：ios, nsstring

我有一个具有以下和类似格式的 NSString 数据：

```
10mm x 1000mm  
4mm x 20mm  
50mm x 200mm  
250mm x 2000mm 
```

有人可以建议如何在每种情况下提取两个单独的数字吗？

> 10 和 1000
> 4 和 20
> 50 和 200
> 250 和 2000

等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T07:09:40.503

如果格式是**真的，总是**

```
number, "mm x ", number, "mm" 
```

那么你可以使用`NSScanner`：

```
- (void)parseString:(NSString *)str sizeX:(int *)x sizeY:(int *)y
{
    NSScanner *scn = [NSScanner scannerWithString:str];
    [scn scanInt:x];
    [scn scanString:@"mm x " intoString:NULL];
    [scn scanInt:y];
} 
```

并像这样使用它：

```
NSString *s = @"50mm x 200mm";
int x, y;
[self parseString:s sizeX:&x sizeY:&y];
NSLog(@"X size: %d, Y size: %d", x, y); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T07:24:23.573

有趣的是，如果你有一个像 10mm 这样的字符串，那么你可以使用 intValue 从中提取 10。所以另一种做你想做的事情是：

```
 NSString *s = @"10mm x 1000mm";
    NSArray *arr = [s componentsSeparatedByString:@"x"];
    int firstNum = [arr[0] intValue];
    int secondNum = [arr[1] intValue];
    NSLog(@"%d   %d",firstNum,secondNum); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T09:19:53.340

如果你想要更健壮的东西，你可以尝试正则表达式：

```
NSString * input = @"55 mm x 100mm" ;

NSRegularExpression * regex = [ NSRegularExpression regularExpressionWithPattern:@"([0-9]+).*x.*([0-9]+)" options:NSRegularExpressionCaseInsensitive error:NULL ] ;
NSArray * matches = [ regex matchesInString:input options:0 range:(NSRange){ .length = input.length } ] ;
NSTextCheckingResult * match = matches[0] ;

NSInteger width ;
{
    NSRange range = [ match rangeAtIndex:1 ] ;
    width = [[ input substringWithRange:range ] integerValue ] ;
}

NSInteger height ;
{
    NSRange range = [ match rangeAtIndex:2 ] ;
    height = [[ input substringWithRange:range ] integerValue ] ;
} 
```

# jquery - 我需要通过jquery自动触发颜色选择的ajax

> ID：13356689
> 
> 赞同：2
> 
> 时间：2012-11-13T06:59:45.050
> 
> 标签：jquery, jquery-plugins

我正在使用[jPicker](http://www.digitalmagicpro.com/jPicker/)，因为我需要一个支持“无颜色”或“透明”的颜色选择器。如果您有更好的选择器插件，请告诉我。

无论如何，问题是，一旦有人选择了一种颜色，我就需要关闭 jPicker 窗口并使用该颜色值触发一个 ajax 调用。

我试过：

```
$('#fColor').jPicker({window:{expandable:true,liveUpdate:false}});
$('#fColor').change(function(){
    $(".jPicker.Container").slideUp(200);
    buildImg();
}); 
```

但是 jPicker 不会关闭颜色选择，即使我将 liveUpdate 设置为 false，更新似乎也能正常工作。并且ajax函数也没有被触发。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T07:27:17.963

您可以使用以下代码来监听 jpicker 更改事件并获取它的值。此示例在[jpicker](http://www.digitalmagicpro.com/jPicker/)页面中给出。

```
 $('#Callbacks').jPicker(
    {},
    function(color, context)
    {
      var all = color.val('all');
      buildImg(all && '#' + all.hex || 'transparent'); //ajax call here
      $('#fColor').jPicker().hide(); // hide jpicker
    }
 ); 
```

[并使用jquery 手册页](http://api.jquery.com/jQuery.post/)定义您的 ajax 调用详细信息。这是一个示例：

```
function buildImg(_color) {
    $.post("test.php", { color: _color} );
} 
```

# django - 如何在 Django 模板中转义字符串文字中的换行符？

> ID：13356692
> 
> 赞同：1
> 
> 时间：2012-11-13T07:00:02.150
> 
> 标签：django, django-templates, escaping

在我的模板中，我想检查存储在变量中的字符串是否包含换行符。但是，我还没有找到一种方法来转义检查中使用的字符串文字中的换行符。显而易见的

```
{% if "\n" in description %}
...
{% endif %} 
```

不起作用，似乎自动转义“\”。

当然，我总是可以实现一个简单的自定义过滤器或模型方法，但我认为必须有一个更简单的方法。在网络上搜索这个很难，因为在 Django 模板的上下文中“转义”主要关注转义 HTML，而不是字符串字符......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:31:33.430

您可以在传递给模板的上下文字典中放置一个键，`newline`也许可以调用它，其值为`"\n"`. 然后你可以`{% if newline in description %}`在你的模板中做类似的事情。

编辑：我检查了 Django 源代码，确实没有内置的方法可以做到这一点。在模板字符串文字中处理的唯一转义序列是反斜杠引号和双反斜杠。

# iphone - 有没有合适的地图框架可以用来构建这个简单的地图应用程序？

> ID：13356699
> 
> 赞同：1
> 
> 时间：2012-11-13T07:00:36.297
> 
> 标签：iphone, ios, xcode, geolocation, maps

我已经看到发布了许多类似的主题，但我想更具体一些，因为我无法从其他帖子中确定哪种解决方案最适合我。

**应用详情**

我想创建一个显示市中心的简单地图应用程序（用于商业用途。我想避免任何地图许可问题）。

我设想所有信息都将直接绘制到单个地图图像上，这将是一个 png 文件（我不确定这么大的图像在缩小时会是什么样子 - 所以如果有人有这方面的经验并且可以建议我是否需要平铺地图并拥有一系列缩放图像，我将不胜感激。）

**我可能不需要的东西**

我认为我不需要平铺图像（见上文），也不需要图钉、弹出窗口或路线规划（弹出窗口很好但不是必需的）。

**我想要什么**

但是，如果用户可以按下按钮并大致放大他们当前的位置，我会喜欢它。我读过的大多数解决方案都认为声音过于夸张，无法满足我的需求。

任何人都可以提出一个好的框架或替代方法来解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T07:55:00.473

您可以使用开放的街道地图服务（请参阅此[链接](http://cloudmade.com/)）。您可以通过[Tile Mill](http://mapbox.com/tilemill/) Application 创建自定义地图。如果您需要在地图上动态添加图像，则需要更多技巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:26:59.297

[MapKit](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MapKit_Framework_Reference/_index.html)非常易于使用，涵盖了上面的所有点，除了自定义绘图。

# java - 如何确保一个方法只被多个线程调用一次？

> ID：13356702
> 
> 赞同：12
> 
> 时间：2012-11-13T07:00:52.353
> 
> 标签：java, multithreading, oop, concurrency

我有以下结构：

```
public void someMethod(){  
   //DO SOME STUFF
   try{  
    doSomeProcessing();  
   }  
   catch (Exception e){  
        loadSomeHeavyData();  
        doSomeProcessing();      
   }    
} 
```

该方法`someMethod` *可以*被多个线程同时调用。`doSomeProcessing` *可能会*抛出异常（它在后端使用了一些可能会过时的数据）。
如果抛出异常，则`loadSomeHeavyData();`执行一些耗时的任务，比如说“更新”所有当前数据，我可以调用`doSomeProcessing();`.
**问题：**如何确保`loadSomeHeavyData();`只调用**一次**？如果我在条目中放了一些原子标志，`loadSomeHeavyData();`那么我不能确定什么时候应该清除它。
我该如何解决这个问题？请注意：我无法修改`doSomeProcessing();`，因为它是一个外部 API，我正在使用装饰器模式来使用它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-13T07:18:56.157

您的`loadSomeHeavyData`方法可以使用阻塞机制让所有线程等待它完成更新，但只让其中一个线程实际执行更新：

```
private final AtomicBoolean updateStarted = new AtomicBoolean();
private final CountDownLatch updateFinished = new CountDownLatch(1);

public void loadSomeHeavyData() {
    if (updateStarted.compareAndSet(false, true)) {
        //do the loading
        updateFinished.countDown();
    } else {
        //update already running, wait
        updateFinished.await();
    }
} 
```

注意我的假设：

*   您希望所有线程等到加载完成，以便他们可以`doSomeProcessing`使用更新的数据再次调用
*   你只调用`loadSomeHeavyData`一次，如果没有，你将需要重置标志和 CountdownLatch （这可能不是最合适的机制）。

**编辑**

您的最新评论表明您实际上想要多次调用`loadSomeHeavyData`，但一次不超过*一次*。

```
private final Semaphore updatePermit = new Semaphore(1);

public void loadSomeHeavyData() {
    if (updatePermit.tryAcquire()) {
        //do the loading and release updatePermit when done
        updatePermit.release();
    } else {
        //update already running, wait
        updatePermit.acquire();
        //release the permit immediately
        updatePermit.release();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T07:02:49.023

使用`synchronized`关键字：

```
public synchronized void someMethod(){  
    //doStuff
} 
```

您保证一次只有一个线程进入。

确保该方法只被调用一次，没有特殊的语言特性；您可以创建一个布尔类型的静态变量，该变量由进入该方法的第一个线程设置为 true。调用该方法时，请始终检查该标志：

```
public class MyClass {
    private static boolean calledMyMethod;

    public synchronized void someMethod() {
        if(calledMyMethod) { 
            return;
        } else {
            calledMyMethod = true;
            //method logic
        }           
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T07:27:18.193

```
public void someMethod()
{  
    //DO SOME STUFF
    try
    {  
        doSomeProcessing();  
    }   
    catch (Exception e)
    {   
        loadSomeHeavyData();  // Don't call here but add a request to call in a queue.
                              // OR update a counter
        doSomeProcessing();      
    }
} 
```

一种解决方案可能是创建一个队列，每个线程将其请求放入其中以调用`loadSomeHeavyData`。当没有。的请求达到阈值，阻止执行`someMethod`并调用`loadSomeHeavyData`并清除队列。

伪代码可能如下所示：

```
int noOfrequests = 0;
public void someMethod()
{
    // block incoming threads here.  
    while(isRefreshHappening);

    //DO SOME STUFF
    try
    { 
        doSomeProcessing();  
    }   
    catch (Exception e)
    {
        // Log the exception
        noOfrequests++;   
    }
}

// Will be run by only one thread
public void RefreshData()
{
    if(noOfrequests >= THRESHOLD)
    {
        isRefreshHappening = true;
        // WAIT if any thread is present in try block of somemethod
        // ...
        loadSomeHeavyData();
        noOfrequests = 0;
        isRefreshHappening = false;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T07:21:10.190

据我了解您的问题，您需要在不可预测但有限的时间间隔内加载数据。有三种可能的方法来做到这一点： 1) 你可以在调用 loadSomeHeavyData 的时候加上一个 if 语句来控制对该方法的访问。2）您可以更改处理控制流的方法（决定是否更新） 3）编写更新线程并让它为您完成工作 前两种选择可以使用外部布尔值或通过使用生成布尔决策最后一次调用和当前调用时间之间的时间差。第三种选择是一个定时线程，它每 n 秒/分钟运行一次并加载大量数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T07:31:32.023

我们编写了一个库，其中包含一个延迟加载/调用方法的[实用程序。](https://bitbucket.org/atlassian/atlassian-util-concurrent/wiki/LazyReference%20and%20ResettableLazyReference)它保证单次使用语义并按照您的预期保留任何抛出的异常。

用法很简单：

```
LazyReference<Thing> heavyThing = new LazyReference<Thing>() {
  protected Thing create() {
    return loadSomeHeavyData();
  }
};

public void someMethod(){  
  //DO SOME STUFF
  try{  
    doSomeProcessing();  
  }  
  catch (Exception e){  
    heavyThing.get();  
    doSomeProcessing();      
  }    
} 
```

所有线程都阻塞`get()`并等待生产者线程（第一个调用者）完成。

# php - php 将两种不同的日期格式转换为单一日期格式

> ID：13356705
> 
> 赞同：2
> 
> 时间：2012-11-13T07:01:09.697
> 
> 标签：php, date

如何使用 php.ini 将以下字符串更改为特定的自定义格式。

更改
2012 年 11 月 16 日
2012年 11 月 16 日

至
2012-16-11

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:06:11.883

您可以使用类[`DateTime`](http://www.php.net/manual/en/book.datetime.php)来更轻松地处理日期。

这是您的输入/输出的示例代码：

```
<?php
$date = new DateTime('11/16/2012');
echo $date->format('Y-d-Y'); 
```

**编辑：**您可以使用以下正则表达式模式`\d+/\d+/\d+`从长字符串中提取日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:19:20.880

```
$date = strtodate(11-16-2012);
$ans = date('Y-d-Y',$date);
echo $ans; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T07:07:55.550

```
$oldDate = '11/16/2012';
$newDate = date('Y-d-m',strtotime($date1)); 
```

在此处使用组合以获得准确的输出格式： http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T07:10:51.357

不确定您是在问如何获取`Year-Month-Year`，或者如何处理连字符或斜杠，因此该`funkyDateString`函数同时执行以下操作：

```
function funkyDateString($date) {
    return date("Y-m-Y", strtotime(preg_replace('#-#', '/', $date)));
}

echo funkyDateString("11/16/2012");
echo funkyDateString("11-16-2012"); 
```

[如果您需要不同格式的日期，请在 php 的日期文档](http://php.net/manual/en/function.date.php)中查找格式选项

# android - 无法登录安卓应用程序

> ID：13356711
> 
> 赞同：0
> 
> 时间：2012-11-13T07:01:57.953
> 
> 标签：android, android-sqlite

我有 2 个 java 类，DatabaseAdapter.java 和 DBHelper.java。为用户登录编写的代码不正确，我不知道错误在哪里以及如何编写代码。有人可以帮忙吗。'new DBHelper(this)' 在程序中带有下划线。

```
public class DatabaseAdapter {

// Table attributes
public static final String TABLE_USER = "user_table";

//User Table
public static final String USER_ID = "_id";
public static final String UNAME = "name";
public static final String USURNAME = "surname";
public static final String USERNAME = "username";
public static final String UPASSWORD = "password";
public static final String UEMAILADDRESS = "emailadd";

     public boolean Login(String username, String password) throws SQLException  
        { 

        DBHelper dbhelper = new DBHelper(this); 
        SQLiteDatabase db = dbhelper.getReadableDatabase();
            Cursor mCursor = db.rawQuery("SELECT * FROM " + TABLE_USER + " WHERE username=? AND password=?", new String[]{username,password});  
            if (mCursor != null) {  
                if(mCursor.getCount() > 0)  
                {  
                    return true;  
                }  
            } 

            mCursor.close();
            db.close();
         return false;  
        } 
```

在创建表的 DBHelper 中。

```
 public class DBHelper extends SQLiteOpenHelper {
     public static final int DB_VERSION = 1;
      public static final String DB_NAME = "moneym.db";

public DBHelper(Context ctx) {
    super(ctx, DB_NAME, null, DB_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {
      createTables(db);
}

@Override
public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {

}

public void createTables(SQLiteDatabase database) {
     String UserTable = "create table if not exists " + DatabaseAdapter.TABLE_USER + " ( " +
            DatabaseAdapter.USER_ID + " integer primary key autoincrement, " 
            + DatabaseAdapter.UNAME + " text, "
            + DatabaseAdapter.USURNAME + " text, "
            + DatabaseAdapter.USERNAME + " text, "
            + DatabaseAdapter.UPASSWORD + " text, "
            + DatabaseAdapter.UEMAILADDRESS + " text);";
     try {
       database.execSQL(UserTable);

       Log.d("Users","Tables created!");

    }
    catch(Exception ex) {
        Log.d("Users", "Error in DBHelper.onCreate() : " + ex.getMessage());
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T07:08:07.417

您的 DbHelper 构造函数需要一个 Context 作为参数，但您正在给它一个 DatabaseAdapter 的实例。您应该阅读一些基本的 Java 和 Android 教程和文档。

# java - K-means 聚类算法运行时间和复杂度

> ID：13356720
> 
> 赞同：0
> 
> 时间：2012-11-13T07:02:48.057
> 
> 标签：java, dataset, cluster-analysis, k-means, sparse-matrix

我编写了一个 Java 代码来聚类一个巨大的数据集，该数据集大约有 100000rowsx100000columns（稀疏行）。但是数据集是用稀疏实例创建的，因此它具有稀疏矩阵的结构。

我可以在我的代码中使用 3 个聚类函数：

JavaML：[Kmeans](http://java-ml.sourceforge.net/api/0.1.7/net/sf/javaml/clustering/KMeans.html)，Weka：SimpleKmeans，Weka：[Xmeans](http://weka.sourceforge.net/doc.packages/XMeans/weka/clusterers/XMeans.html)

我已经运行了 Weka 的 SimpleKmeans 函数，但它工作了大约 9 个小时，集群过程还没有结束。这些函数的预计运行时间是多少，哪一个最适合这个数据集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:39:13.340

K-means**不适用于*稀疏*数据**。

原因是均值不会稀疏，因此，对于您的数据集而言，均值实际上是*异常的。*更糟糕的是：**均值之间的距离可能会小于实例到均值的距离**。

你会在某个时候得到一些结果——Weka 非常慢，你可能想寻找更快的东西；对于这个数据集大小，您可能想要使用分布式的 Mahout（但从这里的问题来看，还有其他问题）。IIRC 它还具有稀疏向量的加速技巧，通过预先计算欧几里得长度 - 但是，结果可能**没有意义**。

问题是 K-means 寻找最优的 Voronoi 单元划分。但是您的数据集在稀疏时可能没有自然的 Voronoi 单元结构。因此，您花费大量时间来寻找**您的数据无法拥有的最佳结构**。

# python - PDF 表单中的表单字段有哪些不同的字段（带文档）

> ID：13356725
> 
> 赞同：0
> 
> 时间：2012-11-13T07:03:21.687
> 
> 标签：python, pdf, adobe, acrobat

我正在寻找 PDF 表单的各种字段及其文档，就像我们为 HTML 一样的文本字段、选择框。

我找不到。就像我们有这些

```
"FieldType" = "Text"
"FieldType": "Button"
"FieldJustification": "Left" 
```

我想知道所有选项和属性都有哪些，以便我更好地了解它们。

像[这样](http://documentation.scribus.net/index.php/PDF_Forms)的东西，但来自官方来源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:36:24.803

有关 PDF 格式的信息，最好查看规范，即 Adob​​e[在此处](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)公开提供的当前 ISO 32000-1:2008 。第 12.7 章“交互式表单”解释了 AcroForm PDF 表单，第 12.7.4 节“字段类型”解释了可用的字段类型。

如果您还想根据 Adob​​e XML 体系结构考虑动态表单，您还应该在[此处](http://partners.adobe.com/public/developer/en/xml/xfa_spec_3_3.pdf)查找 Adob​​e 在 3.3 版中提供的 XML 表单体系结构 (XFA) 规范。

# php - 使用 ImageMagick（PHP 和 LINUX）将 PDF 转换为 JPG

> ID：13356726
> 
> 赞同：2
> 
> 时间：2012-11-13T07:03:50.343
> 
> 标签：php, linux, imagemagick, imagick

我正在尝试使用“转换”命令将 PDF 转换为 JPG：

```
convert "ABSOLUTE_PATH_TO_PDF" "ABSOLUTE_PATH_TO_JPG" 
```

它在终端上运行良好。但是浏览器在使用以下命令执行时会挂起：

```
exec( 'convert "ABSOLUTE_PATH_TO_PDF" "ABSOLUTE_PATH_TO_JPG"', $output ); 
```

我试图检查权限，同样的结果。

我什至尝试检查该命令在环境路径中是否可用：

```
which convert
/usr/bin/convert

which gs
/usr/bin/gs

and the server environment path is: 
"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin" 
```

有什么建议么？

# php - 弹性搜索查询 - 带空格的短语

> ID：13356731
> 
> 赞同：5
> 
> 时间：2012-11-13T07:04:34.307
> 
> 标签：php, elasticsearch

嗨，我正在尝试让查询工作，但我不明白如何让它工作

我想搜索所有这样的匹配词

$term = +短语 +短语 +短语

但是如果短语中有一个空格，我如何将短语作为一个整体进行匹配，而不是将单词分成单独的搜索项？

```
"query" : {
    "query_string" : {
        "query" : "' . $term . '"
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T07:59:08.337

您是否尝试过类似 +"this is my phrase" +"Another one" 之类的方法？

还请查看短语查询（在匹配查询文档中）：[http ://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-match-query.html](http://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-match-query.html)

# single-sign-on - 带有 SiteMinder 的 Oracle Apex

> ID：13356738
> 
> 赞同：1
> 
> 时间：2012-11-13T07:05:46.877
> 
> 标签：single-sign-on, oracle-apex, reverse-proxy, siteminder

我正在尝试将 Oracle Apex 与 CA Siteminder 提供的 SSO 集成。Apex 附带的 Apache 与我们组织中的 Siteminder 版本不兼容。我需要确保会话管理正常工作，还需要从环境变量中读取一些项目，这些项目在成功登录后由 SiteMinder 设置，例如员工编号。有没有办法通过 reverse_proxy 允许转发动态设置的环境变量？

TIA，索拉布

tl;dr 我们有一个 Apex 实例，我想在其中实施 Siteminder SSO。Apex 附带的 apache 与 Siteminder 二进制不兼容 :-( 。有没有办法通过 reverse_proxy (或任何其他) ，以便我可以在外部 apache 上进行身份验证，然后重定向到 Apex，并带有一些环境变量？

# objective-c - 多个 UIBarButton 项

> ID：13356748
> 
> 赞同：2
> 
> 时间：2012-11-13T07:06:38.497
> 
> 标签：objective-c, ios, xcode

我无法使用 Interface builder 设置几个 UIBarButton 项目。

这是我的界面构建器中的层次结构：

```
View controller:
    View:
         TableView
    Navigation Item:
         BarButtonItem:
              Button on left
         BarButtonItem:
              Button on right 
```

问题是我不能添加多个按钮`BarButtonItem`，试图拖动另一个按钮会覆盖第一个按钮..

为了获得更清晰的视图，我现在有两个按钮，一个在右边，一个在左边。他们俩都工作得很好。问题是要像右侧的另一个按钮一样。

我希望问题足够清楚，如果您有任何问题，请尽管提问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T07:51:25.767

不确定您是否可以在 Interface Builder 中执行此操作，但您绝对可以通过编程方式执行此操作。

对于 iOS 5.0 及更高版本，您可以将 UIBarButtonItems 添加到*rightBarButtonItems*（Interface Builder 不会公开）。

```
- (void)viewDidLoad 
{
    [super viewDidLoad];

    UIBarButtonItem *barButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemRefresh target:self action:@selector(refresh:)];
    UIBarButtonItem *barButtonItem2 = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(add:)];

    self.navigationItem.rightBarButtonItems = @[barButtonItem, barButtonItem2];
} 
```

对于 iOS 5 之前的版本，这有点困难。您首先必须将 barButtonItems 添加到 UIToolbar，然后将 rightBarButtonItem 设置为 barButtonItem，并将该 UIToolbar 作为其自定义视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:53:15.383

而不是将 Button 放在 BarButton 中。像这样试试。

```
Navigation Item:
     BarButtonItem:
          Button on left
     BarButtonItem:
          View: // Stuff on right
               Button one
               Button two 
```

这应该有效。

# c++ - 快速排序中相等值的比较

> ID：13356749
> 
> 赞同：1
> 
> 时间：2012-11-13T07:06:38.323
> 
> 标签：c++, algorithm, quicksort

我有一个对象，其中包含三个变量：源顶点、目标顶点和长度。我有一个快速排序算法，可以按对象的长度对对象进行排序。但是，我想要这样，如果我比较两个对象并且它们的长度相等，那么我的快速排序会将具有较小源顶点的对象排在具有较大源顶点的对象之前。如果它们也相等，我想比较目标顶点。我想用较小的源顶点对较大的目标顶点进行排序。这一切都将在一个数组中完成。下面是我的快速排序实现。请注意， e[i] 是我的对象，它包含我的顶点和长度。

```
void quickSort(edge *e, int left, int right)
{
  int i = left, j = right;
  int temp, temp1, temp2;
  while(i <= j)
  {
    while(e[i].getLength() < pivot)
      i++;
    while(e[j].getLength() > pivot)
      j--;
    if(i <= j)
    {
      temp = e[i].getLength();
      temp1 = e[i].getEdgeSrc();
      temp2 = e[i].getEdgeDes();
      e[i].setLength(e[j].getLength());
      e[i].setEdgeSrc(e[j].getEdgeSrc());
      e[i].setEdgeDes(e[j].getEdgeDes());
      e[j].setLength(temp);
      e[j].setEdgeSrc(temp1);
      e[j].setEdgeDes(temp2);
      i++;
      j--;
    } //if statement
  }///while loop
  if(left < j)
    quickSort(e, left, j);
  if(i < right)
    quickSort(e, i, right); 
```

}

如果长度相等，可能有人知道如何/在哪里执行顶点的排序？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T07:15:38.680

`edge`最好为执行您需要的对象定义一个比较运算符：

```
class edge
{
  /* ... */
public:

  bool operator<(const edge &other) const
  {
     /* Length is first criterion: */
     if (length < other.length)
        return true;
     /* Source vertex is second criterion: */
     else if ((length == other.length) && (src < other.src))
        return true;
     return false;
  }

  /* ... */
}; 
```

然后，在您的快速排序实现中，您使用此运算符来比较`edge`对象，而不是`getLength()`直接访问等：

```
while(e[i].getLength() < pivot)
  i++; 
```

变成

```
while(e[i] < pivot)
  i++; 
```

和

```
while(e[j].getLength() > pivot)
  j--; 
```

变成

```
while(pivot < e[j])
  j--; 
```

请注意，我只定义了`operator<`，而不是`operator>`，所以我建议只使用它。或者，您也可以定义`operator>`。

请注意，上面我假设这`pivot`是对当前枢轴元素的引用。如果它实际上是当前枢轴的整数索引，则需要将其替换为`e[pivot]`.

* * *

单独说明：您可能希望使用`std::swap(e[i],e[j]);`get 和 set 语句以及临时变量的长序列（且容易出错）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:16:12.083

您需要创建一个比较函数并调用它，而不是比较长度。您没有`pivot`在代码中定义任何地方，但我认为它与`getLength()`. 您将需要更改`pivot`以使其成为索引。然后，你写：

```
while (compareEdge(e[i], e[pivot]) < 0)
    i++;
while (compareEdge(e[j], e[pivot]) > 0)
    j--; 
```

您的`compareEdge`函数将比较长度。如果它们相等，那么它会按照您的描述比较顶点。

# android - 如何将绘图保存在画布和带背景的框架布局中

> ID：13356751
> 
> 赞同：2
> 
> 时间：2012-11-13T07:07:06.343
> 
> 标签：android, android-layout, bitmap

我正在尝试将我的绘图保存到带有背景的 Canvas 和 Framelayout 中，我能够保存 Canvas 并且它正在绘图，但问题是 FrameLayout。看来我的代码只是保存画布而不是 Framelayout（背景图像）。谁能帮我这个。

```
public class Draw extends Activity implements {

    public static String filex;

    private static final int SELECT_PICTURE = 1;

    public static String selectedImagePath;
    public static Bitmap cBitmap;

    public static Integer resize;
    public static Integer imageBackgroundEraser;
    // Instance variables

    public static Paint       mPaint;
    private MaskFilter  mEmboss;
    private MaskFilter  mBlur;
    private MyView      mView;
    private int mImageCount = 0;
    private int mLastBg = 0;

    public static Integer WW;
    public static Integer WH;

    private float BrushWidth; 
    private int  thickness;
    private int BrushColor;
    public static int backgroundColor; 
    float Mx1,My1;
    float x,y;

    @SuppressWarnings("deprecation")
    @Override

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_draw);

        Display display = getWindowManager().getDefaultDisplay(); //***

        final MyView myView = new MyView(this);
        FrameLayout frm_layout=(FrameLayout) findViewById(R.id.main_frame);
        frm_layout.addView(myView);
        Drawable x = Drawable.createFromPath(selectedImagePath)
        frm_layout.setBackgroundDrawable(x);
        frm_layout.addView(myView);

        setInitialPaint();

    }

    private void setInitialPaint() {
        //bgColor = 0xFFFFFFFF; // default bg color white
        BrushWidth = 3;
        BrushColor = 0xFF000000; //**
        mPaint = new Paint();
        mPaint.setAntiAlias(true);
        mPaint.setDither(true);
        mPaint.setColor(BrushColor);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(BrushWidth);
        mPaint.setPathEffect(new CornerPathEffect(30) );
        //mEmboss = new EmbossMaskFilter(new float[] { 1, 1, 1 },0.4f, 6, 3.5f);

        //mBlur = new BlurMaskFilter(8, BlurMaskFilter.Blur.NORMAL);
    }

    public void onClick(View view){
        switch (view.getId()){

        case R.id.saveBtn:
            File myDir=new File("/sdcard/Pictures/Draw");
            myDir.mkdirs();
            String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date(System.currentTimeMillis())); //***
            String fname = timeStamp + ".png";
            File file = new File (myDir, fname);
            System.out.println(file+"----> file");
            if (file.exists ()) file.delete ();
            saveAsPng(file);
        break;

        }
    }

    public void saveAsPng (File f)
    {
        String fname = f.getAbsolutePath ();

        FileOutputStream fos = null;
        try {
            fos = new FileOutputStream (f);
            mView.mBitmap.compress (CompressFormat.PNG, 100, fos);  
            sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://"+ Environment.getExternalStorageDirectory())));
            Toast.makeText (getApplicationContext(), "Saved " + fname, Toast.LENGTH_LONG).show ();
        } catch (Throwable ex) {
          Toast.makeText (getApplicationContext(), "Error: " + ex.getMessage (), Toast.LENGTH_LONG).show ();
          ex.printStackTrace ();
        }

    } // end saveAsPng

    } // end Main

    public class MyView extends View {

    // Constants and variables
        private static final float MINP = 0.25f;
        private static final float MAXP = 0.75f;

        public static Bitmap  mBitmap;
        public static Canvas  mCanvas;
        private Path    mPath;
        private Paint   mBitmapPaint;
        private  Bitmap cBitmap;
        private Canvas  xCanvas;
        private  Bitmap xBitmap;

        public MyView(Context c) 
        {
            super(c);

                // Figure out how this works. Seems odd that we set up a canvas and a bitmap. 
                // I don't see how it connects to what shows on screen.    
                mBitmap = Bitmap.createBitmap(Draw4FunMain.WW, Draw4FunMain.WH, Bitmap.Config.ARGB_8888);
                mCanvas = new Canvas(mBitmap);
                mPath = new Path();
                mBitmapPaint = new Paint(Paint.DITHER_FLAG);
                // mCanvas.setBackgroundResource(0xFFFFFFFF);
                if (Draw4FunMain.imageBackgroundEraser == null) {
                    mCanvas.drawColor (Color.WHITE);
                } else {

                    mCanvas.drawColor (Color.TRANSPARENT); 
                }

        }

        public MyView (Context c, int color)
        {
            super(c);

                mBitmap = Bitmap.createBitmap(Draw4FunMain.WW, Draw4FunMain.WH, Bitmap.Config.ARGB_8888);
                mCanvas = new Canvas(mBitmap);
                mPath = new Path();
                mBitmapPaint = new Paint(Paint.DITHER_FLAG);
                mCanvas.drawColor (color);
                //Draw4FunMain.backgroundColor  = color;
        }

    /**
     */
    // Methods

    /**
     */
    @Override protected void onSizeChanged(int w, int h, int oldw, int oldh) 
    {
        super.onSizeChanged(w, h, oldw, oldh);
    }

    /**
     */
    @Override protected void onDraw(Canvas canvas) 
    {

            //canvas.drawColor(Color.TRANSPARENT);

            canvas.drawBitmap(mBitmap, 0, 0, null);

            canvas.drawPath(mPath, Draw4FunMain.mPaint);

    }

    /**
     */
        private float mX, mY;
        private static final float TOUCH_TOLERANCE = 4;

    /**
     */
        private void touch_start(float x, float y) {
            mPath.reset();
            mPath.moveTo(x, y);
            mX = x;
            mY = y;
        }
    /**
     */
        private void touch_move(float x, float y) {
            float dx = Math.abs(x - mX);
            float dy = Math.abs(y - mY);
            if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
                mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
                mX = x;
                mY = y;
            }
        }
    /**
     */
        private void touch_up() {
            mPath.lineTo(mX, mY);
            // commit the path to our offscreen
            mCanvas.drawPath(mPath, Draw4FunMain.mPaint);
            // kill this so we don't double draw
            mPath.reset();
        }

    /**
     */

    @Override public boolean onTouchEvent(MotionEvent event) {
            float x = event.getX();
            float y = event.getY();

            switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    touch_start(x, y);
                    invalidate();
                    break;
                case MotionEvent.ACTION_MOVE:
                    touch_move(x, y);
                    invalidate();
                    break;
                case MotionEvent.ACTION_UP:
                    touch_up();
                    invalidate();
                    break;
            }
            return true;
        }

    } // end MyView 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T07:59:05.737

您为 FrameLayout 设置的背景图像未保存是因为您没有在要保存的位图上绘制它。

有一种简单的方法可以做您想做的事，您只需截取 FrameLayout 的屏幕截图，以便捕获 FrameLayout 内的任何内容，并将该屏幕截图作为原始字节保存到文件中。

```
frameLayout.buildDrawingCache();
Bitmap bitmap = frameLayout.getDrawingCache();
bitmap.compress (CompressFormat.PNG, 100, fos); 
```

# audio - PyGame 播放声音有很大的延迟

> ID：13356752
> 
> 赞同：5
> 
> 时间：2012-11-13T07:07:13.110
> 
> 标签：audio, pygame

我正在玩构建一个像鼓机一样播放节奏的 python 脚本。我使用 PyGame 来处理音频。但是，我在调用播放和听到实际音频之间遇到了显着/不可接受的延迟。

我将以下代码粘贴到交互式解释器中，然后一次又一次地执行最后一行：

```
import pygame
pygame.mixer.init(frequency=22050, size=-16, channels=2, buffer=4096)
s = pygame.mixer.Sound('snare.wav')
s.play(loops=0, maxtime=0, fade_ms=0) 
```

从按下回车键到听到音频之间的时间我最好猜测是 400 毫秒左右，而且确实很明显且无法接受。延迟与我单击 VLC 中的播放按钮并等待音频播放大致相同。

我在 Windows 和 Ubuntu 上都试过这个，结果相同。我的电脑有点旧，Intel Core i3，2.53GHz，但我认为这应该不是问题。

我能做些什么呢？

**在一个循环中：**

此代码演示了相同的延迟。

```
for i in range(10):
  print i
  s.play(loops=0, maxtime=0, fade_ms=0)
  sleep(2) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T13:51:53.863

一种可能的解决方案是减小缓冲区大小（示例 512）：

```
import pygame
pygame.mixer.init(frequency=22050, size=-16, channels=2, buffer=512)
s = pygame.mixer.Sound('snare.wav')
s.play(loops=0, maxtime=0, fade_ms=0) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-11T16:43:16.263

几分钟前我遇到了同样的问题，并且在[This other thread中有一个适合我的解决方案](https://stackoverflow.com/questions/18273722/pygame-sound-delay/38901856#38901856)

它看起来像一个初始化问题，如果你先初始化 pygame（或者 XD），pygame 不能很好地获得缓冲区。首先初始化混音器 init() 和 pre_init()，然后从那里进行实验：

```
pygame.mixer.pre_init(44100, -16, 2, 512)
pygame.mixer.init()
pygame.init() 
```

那应该工作:)祝你好运！

# c++ - 抽象基类和公共继承

> ID：13356756
> 
> 赞同：0
> 
> 时间：2012-11-13T07:07:32.313
> 
> 标签：c++, inheritance

我希望你们中的任何一位优秀的绅士可以帮助我澄清一些事情。

说我有以下代码：

```
class someABC{
  virtual void foo() = 0;
} 
```

以及从它继承的另一个类：

```
class inheritFromABS : public someABC
{
  inheritFromABS();
  void foo();
} 
```

和另一个也继承自 someABC 的类：

```
class alsoInheritFromABS : public someABC
{
  alsoInheritFromABS();
  void foo();
} 
```

现在我有一个 someABC 类型的对象列表，如下所示：

```
 list<someABC *> myList;
  inheritFromABS *first = new inheritFromABS();
  alsoInheritFromABS *second = new alsoInheritFromABS();
  myList.push_back(first);
  myList.push_back(second); 
```

我想遍历 myList 并在每个上调用 foo() 。这甚至可行吗？它编译时没有错误或警告，但是当我尝试调用 foo() 时出现分段错误。

我是否需要拥有类型为 inheritFromABS 和 alsoInheritFromABS 的对象列表才能调用 foo(); 每个？

编辑：这是我的实际代码，它因分段错误而失败：

```
llvm::Value *decafStmtList::Codegen() {
for(list<decafAST*>::iterator i = stmts.begin(); i != stmts.end(); i++)
{
    decafAST *tmp = *i;    
    tmp->Codegen();
}
return Constant::getNullValue(Type::getDoubleTy(getGlobalContext()));
} 
```

因此，stmts 包含 VariableExprAST 类型的对象之一，我希望它调用 VariableExprAST 的 codegen，代码如下：

```
llvm::Value *VariableExprAST::Codegen() {
    cout << "I am here" << endl;
    return 0;//FIXME: im broken
} 
```

一切都没有一个警告，但是一旦我提供了一个简单的输入，它就会在 tmp->Codegen(); 之前失败并出现段错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T07:12:37.990

您正在尝试的内容看起来是正确的，但您需要在列表中存储指针。目前尚不清楚您当前的代码将如何编译，但您可能打算这样做：

```
list<someABC *> myList;
inheritFromABS* first = new inheritFromABS();
alsoInheritFromABS* second = new alsoInheritFromABS();
myList.push_back(first);
myList.push_back(second); 
```

即`inheritFromABS* first = ...`代替`inheritFromABS first = ...`. 您还应该向基类添加一个**虚拟析构函数。**

这是一个简单的工作示例，遵循经典主题。请注意，在实际应用程序中，您将使用[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)而不是原始指针。此示例缺少内存解除分配。

```
#include <iostream>
#include <list>

struct Animal
{
  virtual void talk() const =0;
  virtual ~Animal() {}
};

struct Dog : Animal
{
  void talk() const { std::cout << "Woof woof!\n"; }
};

struct Cow : Animal
{
  void talk() const { std::cout << "Moooo!\n"; }
};

int main()
{
  std::list<Animal*> animals;
  animals.push_back(new Dog);
  animals.push_back(new Cow); 
  animals.push_back(new Dog);
  animals.push_back(new Cow);
  animals.push_back(new Dog);
  animals.push_back(new Cow);

  for (std::list<Animal*>::const_iterator it = animals.begin();
       it != animals.end();
       ++it)
  {
    (*it)->talk();
  }
} 
```

# .net - Winforms Crystal Report - “无法加载数据库信息”错误

> ID：13356765
> 
> 赞同：6
> 
> 时间：2012-11-13T07:08:20.800
> 
> 标签：.net, visual-studio-2010, ms-access, 64-bit, crystal-reports-2010

我开发了一个小型水晶报表赢表单应用程序，它连接到本地网络中的 Access DB 并显示一组基本报表。

我为此使用了 VS 2010。

我使用“DAO”连接方法访问 VS 2010 数据库专家选项中的数据库（是的，这一切都在 GUI 中完成）。它在我的 32 位开发机器和我测试过的 Win XP VM 机器上工作得很好。

但是，我在 Win 7 64 位 PC 上设置报告并收到此错误。 ![错误截图](../Images/3d48757207b50b5c1d50455f42964002.png)

这些是我在 64 位 Win 7 PC 上进行的安装：

*   适用于 .NET Fx 4（64 位）的 SAP Crystal Reports 运行时引擎
*   .NET Framework 4 客户端配置文件（x86 和 x64）

到目前为止，我所读到的是 64 位 CR 运行时引擎未附带 32 位版本的 dll (crdb_dao.dll)。

任何建议...任何解决方法？

感谢你的帮助 ：-）！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T08:59:00.997

### 一切都与比特有关

使用 Access 数据库，您必须注意应用程序的位数：

*   文件没有标准的 64 位驱动程序`.mdb`（Windows 中默认有一个 32 位驱动程序）。

*   为了能够从 64 位应用程序访问`.mdb`和`.accdb`数据库，您必须具有 MSOffice 64 位或 Access 64 位或 64 位的[Access 数据库引擎](http://www.microsoft.com/en-us/download/details.aspx?id=13255)驱动程序。
    如果您在该计算机上安装了 MSOffice 或 Access 2007/2010/2013 32 位，您将无法安装 64 位驱动程序，也无法混合搭配 32 位和 64 位 Office 组件。

### 解决您的问题

*   如果您使用`.mdb`Access 文件，只需显式编译 32 位（不是 AnyCPU，因为它会尝试在 64 位操作系统中以 64 位启动您的应用程序）。

*   如果您使用的是`.accdb`Access 文件，请匹配用户计算机上安装的 Office/Access 的位数，或者，如果没有 Office，请安装[Access 数据库引擎](http://www.microsoft.com/en-us/download/details.aspx?id=13255)驱动程序。

*   在任何情况下，如果您的应用程序要部署在 32 / 64 位混合环境中，您将需要为每个环境显式编译并根据安装在用户计算机上的[Access 数据库引擎](http://www.microsoft.com/en-us/download/details.aspx?id=13255)或 MSOffice 的位数安装正确的版本。

注意：澄清一下，如果用户机器上已经安装了 MSOffice 2007/2010/2013，则无需安装 Access Database Engine。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T12:53:50.210

我还必须为 32 位安装 CR 运行时引擎。现在它的工作顺利:-)！

非常感谢 ：）！

# php - 有swf的链接。如何打印这个 Flash 电影？

> ID：13356771
> 
> 赞同：0
> 
> 时间：2012-11-13T07:08:40.930
> 
> 标签：php, image, flash

我的问题是如何使用 php 打印 swf 到图像。但为了更好地理解，我会写介绍。

介绍。
我认为这是一个非常有趣的主题。在站点 XI 上发现使用 AES128 swf 加密。我需要这个 Flash 电影的截图。我试图下载它，当一切顺利时我很高兴。但是当我打开 swf 时，它不像在现场。
然后我回到现场。在这个 swf 元素上消失和出现。当我在页面上的 swf 上单击 RightMouseBtn 并在上下文菜单中选择“打印”（浏览器：Google Chrome 22）时，我得到了显示所有元素的图像！这就是我需要的！

问题：如何使用 PHP 执行相同的操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T07:31:55.833

使用键盘*打印屏幕*按钮怎么样？

# css - 获取任意网站的颜色代码和背景图片文件

> ID：13356772
> 
> 赞同：0
> 
> 时间：2012-11-13T07:08:47.400
> 
> 标签：css

要学习 CSS 和 jQuery，我想准备任何网站的精确布局。在查看任何网站时，我想要一个可以返回 Div 中使用的背景的十六进制颜色的工具。

如果背景是图像，当我在浏览器中单击查看源时，是否可以下载该图像文件？是否可以查看CSS？

我不想使用 Dreamweaver，我只想使用任何开源免费工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:12:55.310

在您的 Firefox 中添加 firebug 插件并尝试通过在键盘上按 F12 来检查您希望的页面 DOM。

# php - CodeIgniter 控制器中的用户函数

> ID：13356773
> 
> 赞同：0
> 
> 时间：2012-11-13T07:08:52.287
> 
> 标签：php, codeigniter, frameworks

我需要在 CI 控制器中使用一些功能。

例如：

```
class Main extends Controller
{
    function index()
    {
        function foo1(){}
        function foo2(){}
    }
} 
```

但我得到一个错误。如何确定这些功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:33:28.810

只要 foo1 和 foo2 在同一个控制器中，您就可以这样做：

```
class Main extends Controller
{
    function index()
    {
        $this->foo1();
        $this->foo2();
    }

    public function foo1()
    {
    }

    public function foo2()
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:35:17.357

如果您在另一个函数中使用函数声明语法，则内部函数将在当前命名空间中结束（如果没有声明命名空间，则为全局命名空间）

考虑这个例子：

```
Class Foo {
    public function bar() {
        function foo(){
            print 'in foo';
        }
    }
}

$f = new Foo();
$f->bar(); // you have to call this before invoking the foo() function, prior this point its nonexistent
foo(); // will print 'in foo' 
```

# sql-server - TSQL 事务在语句后同时检查 @@ERROR 和 @@ROWCOUNT

> ID：13356775
> 
> 赞同：9
> 
> 时间：2012-11-13T07:09:01.957
> 
> 标签：sql-server, tsql, stored-procedures, error-handling, transactions

如果发生错误，我可以回滚事务：

```
CREATE PROCEDURE [dbo].[MySproc]
(
   @Param1  [int] 
)
AS
BEGIN TRAN
SET NOCOUNT ON;

SELECT @Param1
UPDATE [dbo].[Table1]
SET    Col2 = 'something'
WHERE Col1 = @Param1

IF @@ERROR <> 0
BEGIN
    ROLLBACK TRAN
    RETURN -12
END
... 
```

`Table1`但是，如果事务中没有条目`Col1 = @Param1`成功提交，这对我不利。我想检查是否`Col2 = 'something'`真的完成了。如果不是，则使用特定的返回码回滚。
如果我尝试在`@@rowcount`检查后插入检查`@@error`，如下所示：

```
CREATE PROCEDURE [dbo].[MySproc]
(
   @Param1  [int] 
)
AS
BEGIN TRAN
SET NOCOUNT ON;

SELECT @Param1
UPDATE [dbo].[Table1]
SET    Col2 = 'something'
WHERE Col1 = @Param1

IF @@ERROR <> 0
BEGIN
    ROLLBACK TRAN
    RETURN -12
END

IF @@ROWCOUNT = 0
BEGIN
    ROLLBACK TRAN
    RETURN -27
END
... 
```

它总是在这一点回滚，因为`@@rowcount`评估最后一条语句，所以它总是等于`0`.

在这种情况下如何检查`@@error`受影响的行数和行数？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-13T07:13:49.150

在单个查询中将两者存储到您自己的变量中，然后检查：

```
DECLARE @rc int
DECLARE @err int
SELECT @Param1
UPDATE [dbo].[Table1]
SET    Col2 = 'something'
WHERE Col1 = @Param1
SELECT @rc = @@ROWCOUNT,@err = @@ERROR

IF @err <> 0
BEGIN
    ROLLBACK TRAN
    RETURN -12
END

IF @rc = 0
BEGIN
    ROLLBACK TRAN
    RETURN -27
END 
```

# html - 内容可编辑的实际使用

> ID：13356776
> 
> 赞同：3
> 
> 时间：2012-11-13T07:09:03.797
> 
> 标签：html, contenteditable

我刚刚发现了这个`contenteditable`属性，我正在考虑它的实际用途。

我认为快速更新页面会很棒，但是有一些问题，例如：

*   安全性：您显然不希望任何人更新您的页面，因此对内容的编辑应该受到相当严格的控制
*   登录后使页面内容可编辑。这不需要更改整个页面的标记吗？本身不是问题，但我应该想象一个相当大的工作
*   保存新内容。从理论上讲，这可以通过带有 json 的 ajax 来完成，以将新页面标记保存在数据库的字段中，不是吗？另外，您如何向网站确认“我已完成更改，您现在可以保存”

我喜欢在您将要看到的地方快速编辑页面内容的想法。我对在我的网站上实现这样的事情感到非常兴奋，但在尝试之前我可以使用一些指导。

任何人都可以解决上面列出的问题以及我认为可能不相关的任何问题吗？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T09:01:23.843

*   **安全** 是的，您不希望任何人更新您的页面，但这与`contenteditable`它本身无关。人们现在可以使用浏览器的开发工具更改互联网上任何页面的内容，但除了伪造有趣的屏幕截图外，如果服务器不接受更新，这对他们来说并没有多大用处。这里更重要的问题是通过确保用户添加到页面的内容是“安全的”来防止[跨站点脚本攻击等事情（例如，这就是为什么博客通常不允许评论中的大多数 HTML 标记）。](http://en.wikipedia.org/wiki/Cross-site_scripting)
*   **登录后使内容可编辑**只需`contenteditable`在用户登录后在服务器端逻辑中添加属性。或者，当用户单击“编辑”按钮时使用 JavaScript 添加它。我不希望它改变整个页面的标记，因为要使这种方法变得合理，页面将已经在服务器端从一个模板中生成，该模板填充了存储在数据库中的内容。如果您正在谈论使静态站点可编辑，那么，是的，您有很多工作要做，但是您必须完成这些工作，但是您计划让人们编辑页面。
*   **保存新内容**是的，使用 Ajax。JSON 不是必需的，它是您要发回的 HTML 内容，对吗？将其作为 HTML 发送回来，请记住上面关于跨站点脚本的评论并在服务器端进行安全检查（永远不要相信用户输入）。如何确认用户已完成编辑取决于您，就像您必须添加编程逻辑以使用 Ajax 将更改发送回并在服务器上处理这些更改一样，您将不得不必要时添加显示编辑工具（粗体、斜体等按钮）的逻辑 - 添加一个按钮以同时执行更新。

# jquery - 加载 Javascript 滑块的更好方法

> ID：13356789
> 
> 赞同：0
> 
> 时间：2012-11-13T07:10:35.893
> 
> 标签：jquery

好吧，也许我一直在用错误的方式处理这个问题。也许有人可以指出我应该在谷歌上搜索的正确方向，以便仅在页面完全加载后才在我的滑块中加载第二个和第三个图像。另一种选择是在页面完全加载并且该 div 中的图像完全加载之前，根本不加载包含滑块的 div 中的任何内容。我之前尝试过 LazyLoad 滑块图像，但它只与滑块的“左滑”效果[http://varmag.com/](http://varmag.com/)冲突。提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T07:38:43.413

我最近需要一种预加载图像的方法。我正要使用几行 javascript 代码，但遇到了一种很酷的方式，即使用 CSS :)。这是链接：[http](http://perishablepress.com/a-way-to-preload-images-without-javascript-that-is-so-much-better/) ://perishablepress.com/a-way-to-preload-images-without-javascript-that-is-so-much-better/ 不是很酷吗？很简单。

# sql-server - 通过 SSIS 导入带有不规则标题行的文本文件

> ID：13356791
> 
> 赞同：2
> 
> 时间：2012-11-13T07:10:43.997
> 
> 标签：sql-server, ssis, flat-file

我有一个如下所示的文件；请帮助如何通过 SSIS 导入它。问题在于如何跳过起始行，因为文件的其余部分将所有列选项卡分开。我还需要来自标题行的一些信息，例如 BSC 的名称，以用作另一列。

```
BSS release :   11                      
Name of BSC :   E344_JUB4                       
Type of measurement :   RT110_CELL/TRX related overview counters        
Measurement begin date and time :   5/21/2012 7:00      
Measurement end date and time   :   5/21/2012 8:00              
Input file name :   /alcatel/var/share/AFTR/APME/BSC/PMRES110.30A.16.E344_JUB4.2012-021.05:00:29.35.259                             
Output file name    :   /alcatel/var/share/AFTR/APME/OBSYNT/E344_JUB4/20120521/R11000008.142            
BTS_INDEX   BTS_SECTOR  CELL_NAME   CELL_CI CELL_LAC    BSC_MCC BSC_MNC MC01    MC02    MC02A   MC02B   MC02C   MC02D   MC02E   MC02F   MC02G   MC02H   MC02I   MC03    MC04    MC07    MC10    MC101   MC1040
1   1   JUB3227_4   32274   3719    420 F03 246 597 264 23  37  1   0   0   30  242 0   0   0   0   0   0   0
1   2   JUB3227_5   32275   3719    420 F03 331 6508    6118    25  51  3   0   0   40  271 0   0   0   0   0   0   0
1   3   JUB3227_6   32276   3719    420 F03 156 640 294 75  40  2   0   0   24  205 0   0   0   0   0   0   0
10  1   JUB3227_1   32271   3719    420 F03 151 1821    1584    17  36  3   0   0   8   173 0   0   0   0   0   0   0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:11:21.640

假设您的文件具有固定数量的标题行，那么以下应该可以工作；

将源的读取分成两个单独的数据流。第一个用于传递标头；第二个细节。

在第一个流中，将文件视为冒号分隔。添加源（Excel？）控件，将数据访问模式更改为“SQL命令模式”。添加一条 SQL 语句，如 SELECT top 2 f1 FROM [Sheet1$]。这将从第一个工作表中选择前 2 行并仅返回 f1 列。您将需要调整您的文件，以涵盖所需的标题行数。

添加派生列以将 Name : Value 对分成两部分。创建 3 个新的派生列。
- First = "Name"，表达式为 LEFT(f1,FINDSTRING(f1,":",1) - 1) - Second = "Value"，表达式为 RIGHT(f1,LEN(f1) - FINDSTRING(f1, ":",1) - 1) - 第三个 = 带有表达式 1 的“键”

添加一个 Pivot 控件以将多行（每个参数一个）切换到多列。输入“名称”作为枢轴键，“键”作为设置键，“值”作为枢轴值。在“从输出值生成数据透视表列”部分中，为每个标题名称输入一个值，即 [BSS 版本]、[BSC 名称]、[...] 这将产生一个包含所有标题值作为列的单行。然后，您可以将其与您的详细数据结合起来，或单独存储。

在详细信息源中，将连接设置为通过 x 跳过标题行以绕过标题信息。像对待没有标题信息的文件一样对待。使用派生列组件将文件名等变量添加到行中。

# java - 无法在 Eclipse EE Juno 中加载 Tomcat Server 7 配置

> ID：13356792
> 
> 赞同：0
> 
> 时间：2012-11-13T07:10:45.707
> 
> 标签：java, runtime, tomcat7, eclipse-juno

我的旧服务器出现一个错误，说它无法启动，所以我决定清理所有东西并重新安装它。在设置新服务器时，会出现这种情况。

![在此处输入图像描述](../Images/e7487e7d05553048696a8f68aa0976a4.png)

我将如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T08:32:19.283

改用 Tomcat 7.0.32。虽然我记得也使用过 27 次要版本，但没有任何问题。我只是使用了 zip 发行版，而不是安装程序。

该错误似乎表明安装不完整，或者您将其指向错误的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T03:17:46.067

我终于修好了。我下载了最新的 tomcat 并将其 conf/web.xml 复制到我的 Eclipse 中的配置路径中。看起来我只是错过了 tomcat 本身的 web.xml。

# php - 在mysql中插入大量数据

> ID：13356800
> 
> 赞同：1
> 
> 时间：2012-11-13T07:12:29.550
> 
> 标签：php, mysql

所以我试图将来自 facebook 的用户喜欢存储在数据库中

```
$likes_json=json_encode($user->likes->data);
echo($likes_json);
$query = "INSERT INTO users VALUES (' ','".$likes_json."', NOW())";
$mysqli->query($query); 
```

"echo" 打印出预期的字符串（长度为 56000 个字符）

```
[{"name":"The Next Web","category":"Website","id":"106976563522".... 
```

但是没有任何东西存储在数据库中。当我改变`$likes_json='some other string';`它工作正常（它被插入到数据库中）

喜欢的列的类型是“ `mediumtext`”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:14:22.150

您需要使用 mysql_real_escape_string 转义 $likes_json

您的查询最终看起来像这样

```
INSERT INTO users VALUES (' ','[{"name":"The Next Web","category":"Website","id":"106976563522"}]', NOW()) 
```

看看为什么那行不通？如果数据包含一个 ' 怎么办？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T07:16:25.340

错误可以转义，但唯一确定的方法是打印错误：

```
$mysqli->query($query) or die("Error: ":$mysqli->error); 
```

逃脱：

```
$likes_json=json_encode($user->likes->data);
$query = "INSERT INTO users VALUES (' ','%s', NOW())";
$query = sprintf($query,$mysqli->real_escape_string($likes_json); 
```

# facebook-graph-api - FQL 调用以获取位置超时的朋友照片

> ID：13356801
> 
> 赞同：1
> 
> 时间：2012-11-13T07:12:37.237
> 
> 标签：facebook-graph-api, timeout, facebook-fql

我有以下 FQL 查询来获取任何带有 Facebook 朋友附加位置信息的照片。

```
SELECT 
object_id, owner, album_object_id, place_id, src_big, src_small, caption 
FROM photo 
WHERE owner IN( SELECT uid2 FROM friend WHERE uid1 = me() ) AND place_id!='' 
```

如果登录的用户有少量朋友（30~50），则通话有效。

对于拥有更多活跃朋友（200+）的用户，我从 API 端点获得 500 并带有以下消息

```
{
    "error_code":1,
    "error_msg":"An unknown error occurred"
} 
```

我尝试了[Graph API 爆炸器](https://developers.facebook.com/tools/explorer/)中的调用，但它只是超时了。

# c# - 使用 C# 插件格式化 Outlook 中的传入电子邮件

> ID：13356803
> 
> 赞同：1
> 
> 时间：2012-11-13T07:12:38.453
> 
> 标签：c#, formatting, outlook-addin

我在 Outlook 2012 中有很多来自 Taskzilla 的电子邮件，它们的内容格式非常糟糕。我想在 C# 中为 Outlook 2010 编写一个加载项，它将：

1.  检查电子邮件是否来自 taskzilla@sender.com
2.  拿走它的身体
3.  删除不必要的空格，使一些文本加粗（按摩结构始终相同）
4.  显示格式化的消息

我是插件开发的新手。你建议开始读什么？非常感谢 ：）

*PS是否可以使用现有插件进行管理而不进行开发？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:05:20.547

你可以先阅读[VSTO 的书](https://rads.stackoverflow.com/amzn/click/com/0321533216)来学习 OOM（Outlook 对象模型）和“表单区域”的概念来改变 UI

# java - Java：javap错误：找不到.class

> ID：13356811
> 
> 赞同：17
> 
> 时间：2012-11-13T07:13:13.667
> 
> 标签：java, javap

在我的系统（Ubuntu 10.04）中，java 运行良好，但我无法运行**javap**命令
我有编译`Foo`类和*.class*文件路径位于
**/home/mahesh/java/opt**
当我执行
**javap -c Foo.class**
I收到以下错误消息：
**错误：找不到 Foo.class**
是否需要设置任何环境变量或其他任何东西来解决它。我的 $PATH 变量的目标是：
**/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/lib/jvm/斌/**
谢谢。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-13T07:15:49.367

您只需要删除`.class`扩展名。

使用以下命令：`javap -c Foo`

# vb.net - 需要帮助 Visual Basic IsDate()，欧洲日期（dd/mm/yyyy）格式函数

> ID：13356816
> 
> 赞同：0
> 
> 时间：2012-11-13T07:13:46.230
> 
> 标签：vb.net, date, datetime, vb.net-2010

我是 Visual Basic 的新手，我需要一些关于我正在开发的程序的帮助。

我有 3 个单独的文本框，分别代表日、月和年，并且没有接受任何其他字符，然后是数字。现在我想编写一个代码，以便程序每次检查当前日期并提醒您输入的日期是否已过期，例如输入 D: 11 M: 11 Y: 2012。

有人能帮我一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T13:58:00.340

航空代码。

```
Dim theYear As Integer, theMonth As Integer, theDay As Integer 
' get text from textboxes and convert to numbers 
If Not Int32.TryParse(txtYear.Text, theYear) Then 
  MsgBox "Please enter a valid year!"
  Exit Sub
End If
If Not Int32.TryParse(txtMonth.Text, theMonth) Then 
  MsgBox "Please enter a valid month!"
  Exit Sub
End If
If Not Int32.TryParse(txtDay.Text, theDay) Then 
  MsgBox "Please enter a valid day!"
  Exit Sub
End If  
' combine numbers into a Date 
Dim theDate As Date = Nothing 
Try
  theDate As New Date(theYear, theMonth, theDay) 
Catch e As Exception 
   'year is less than 1 or greater than 9999\. 
  '-or- 
  'month is less than 1 or greater than 12\. 
  '-or- 
  'day is less than 1 or greater than the number of days in month. 
  MsgBox "Please enter a valid date!"
  Exit Sub
End Try 
 ' check whether date is in the past 
Dim nowDate As Date = DateTime.Now
If DateTime.Compare(theDate, nowDate) < 0 Then
  MsgBox "That date has expired" 
End If 
```

文档链接：

*   [日期构造函数](http://msdn.microsoft.com/en-us/library/xcfzdy4x%28v=vs.100%29.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)
*   [日期时间.Now](http://msdn.microsoft.com/en-us/library/system.datetime.now.aspx)
*   [日期时间比较](http://msdn.microsoft.com/en-us/library/system.datetime.compare%28v=vs.100%29.aspx)
*   [Int32.TryParse](http://msdn.microsoft.com/en-us/library/f02979c7%28v=vs.100%29.aspx)

# extjs - 使用 Sencha Touch 时在 TabPanel 中使用 Carousel

> ID：13356818
> 
> 赞同：0
> 
> 时间：2012-11-13T07:13:49.073
> 
> 标签：extjs

我想问一下，在 sencha touch 开发应用程序时，可以在 TabPanel 中添加 Carousel 吗？我只想添加一个名为画廊的标签并将一些图像放在轮播中..请帮助..

代码如下...

```
Ext.application({
    name: 'Employee Form',
    launch: function () {
        Ext.create('Ext.TabPanel', {
            extend: 'Ext.Carousel',
            fullscreen: true,
            defaults: {
                styleHtmlContent: true
            },
            layout: {
                animation: {
                    type: 'slide'
                }
            },
            items: [
                {
                    title: 'Home',
                    html: 'You are on the Home Screen Now' + ['<center><img width="100%" height="350px" src="http://staging.sencha.com/img/sencha.png" /></center>'].join(""),
                    items: [
                        {
                            xtype: 'toolbar',
                            html: '<center>Muhammad Burhan</center>',
                            docked: 'bottom',
                        }
                    ]
                },
                {
                    title: 'Gallery',
                    items: [
                        {
                            xtype: 'carousel',
                            direction: 'vertical',
                            items: [
                                {
                                    html: 'Welcome' + ['<center><img width="60%" height="100%" src="lib/touch/img/welcome.gif"</center>'].join(),
                                },
                                {
                                    html: 'First Picture' + ['<center><img width="100%" height="100%" src="lib/touch/img/pic.jpg" /></center>'].join(""),
                                }
                            ]
                        }
                    ]
                }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:15:04.050

这是一个例子：[http ://www.senchafiddle.com/#DQ0wD](http://www.senchafiddle.com/#DQ0wD)

您实际上需要将您的第二个标签栏项目设置为轮播，而不是像您尝试做的那样将轮播项目添加到您的标签栏项目。

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T07:01:53.037

为什么不使用标签面板中的图像单独创建轮播，并将轮播作为标题为 Gallery 的项目？

# mysql - mysql - 为什么当我搜索“ñ”时包含“n”？

> ID：13356821
> 
> 赞同：10
> 
> 时间：2012-11-13T07:14:19.743
> 
> 标签：mysql, sql

我有个问题。当我有这段代码时，`SELECT FIRST_NAME FROM CONTACT WHERE FIRST_NAME LIKE '%ñ%'`为什么它会返回所有`FIRST_NAME`没有. 我只期待那些有。提前致谢。`n``ñ``ñ`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-13T07:17:22.437

```
SELECT FIRST_NAME 
FROM CONTACT 
WHERE FIRST_NAME LIKE '%ñ%' COLLATE utf8_spanish_ci 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/aa1a0/8)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-13T07:19:58.267

尝试使用[BINARY](http://dev.mysql.com/doc/refman/5.5/en/cast-functions.html#operator_binary)运算符以二进制方式比较字符串 -

```
SELECT FIRST_NAME FROM CONTACT WHERE FIRST_NAME LIKE BINARY '%ñ%' 
```

# wcf - WCFExtras - 无法跨服务获取或获取soapheader值

> ID：13356828
> 
> 赞同：3
> 
> 时间：2012-11-13T07:15:21.330
> 
> 标签：wcf, wcf-security

我打算将[WCFExtra](http://wcfextras.codeplex.com/)用于soapheader。我已经添加了

```
<extensions>
  <behaviorExtensions>
    <!-- Declare that we have an extension called WSDL Extras-->
    <add name="wsdlExtensions" type="WCFExtras.Wsdl.WsdlExtensionsConfig, WCFExtras, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"/>
  </behaviorExtensions>
</extensions> 
```

到我的服务配置文件中，我添加了 SoapHeaders 和 SoapHeader 属性...我在服务器端设置了与示例中完全相同的值 -

```
 [OperationContract]
    [SoapHeader("MyHeader", typeof(Header), Direction = SoapHeaderDirection.In)]
    string In();

        public string In()
    {
        Header soapHeader = SoapHeaderHelper<Header>.GetInputHeader("MyHeader");
        if (soapHeader != null)
        {
            return soapHeader.Value;
        }
        return null;
    } 
```

在客户端我有

```
 <metadata>
          <wsdlImporters>
            <extension type="WCFExtras.Soap.SoapHeaderImporter, WCFExtras" />
          </wsdlImporters>
        </metadata> 
```

和

命名空间 Client.MyService { public partial class MyService { public Header MyHeader { get { return InnerChannel.GetHeader("MyHeader"); } 设置 { InnerChannel.SetHeader("MyHeader", value); } } } }

```
 Console.WriteLine("Testing In()");
        serviceClient.MyHeader = new Header() {Value = "in"};
        string someValue = serviceClient.In();

        Console.WriteLine("The return is = " + someValue); 
```

我在调用中没有看到任何错误，但在服务端，我无法获取在客户端的 soapHeader 中传递的值。SoapHeader out 也会发生同样的事情。谁能帮我解决这个问题？我错过了什么？

# c# - Windows形成不同的类，试图改变textbox.text

> ID：13356832
> 
> 赞同：5
> 
> 时间：2012-11-13T07:15:35.340
> 
> 标签：c#, .net, arrays, forms, class

我试图创建一个从我的设置文件中获取数据的函数（HighscoreSaved 被放入 highscoreList 数组），然后加入字符串并将它们写入文本框（highScore.Text）

但是，当我调用该函数时，什么也没有发生

所以这是我的代码：Form1

```
private void button4_Click_1(object sender, EventArgs e)
    {
        Highscore.Fetch();
        Highscore.Set();
    }

    public void highscoreText (string value)
    {
            this.highScore.Text = value;
    } 
```

这是应该由 Highscore.Fetch() 和 Highscore.Set() 调用的类但是当我调用它们时，我的文本框中没有任何变化

```
public static class Highscore
    {
        public static void  Fetch()
        {
            Form1.highscoreList[0] = "\t\t\t" + HighscoreSaved.Default.highscoreKeeper1 + "\t\t" + HighscoreSaved.Default.highscoreScore1;
            Form1.highscoreList[1] = "\t\t\t" + HighscoreSaved.Default.highscoreKeeper2 + "\t\t" + HighscoreSaved.Default.highscoreScore2;
            Form1.highscoreList[2] = "\t\t\t" + HighscoreSaved.Default.highscoreKeeper3 + "\t\t" + HighscoreSaved.Default.highscoreScore3;
            Form1.highscoreList[3] = "\t\t\t" + HighscoreSaved.Default.highscoreKeeper4 + "\t\t" + HighscoreSaved.Default.highscoreScore4;
            Form1.highscoreList[4] = "\t\t\t" + HighscoreSaved.Default.highscoreKeeper5 + "\t\t" + HighscoreSaved.Default.highscoreScore5;
            Form1.highscoreList[5] = "\t\t\t" + HighscoreSaved.Default.highscoreKeeper6 + "\t\t" + HighscoreSaved.Default.highscoreScore6;
            Form1.highscoreList[6] = "\t\t\t" + HighscoreSaved.Default.highscoreKeeper7 + "\t\t" + HighscoreSaved.Default.highscoreScore7;
            Form1.highscoreList[7] = "\t\t\t" + HighscoreSaved.Default.highscoreKeeper8 + "\t\t" + HighscoreSaved.Default.highscoreScore8;
            Form1.highscoreList[8] = "\t\t\t" + HighscoreSaved.Default.highscoreKeeper9 + "\t\t" + HighscoreSaved.Default.highscoreScore9;
            Form1.highscoreList[9] = "\t\t\t" + HighscoreSaved.Default.highscoreKeeper10 + "\t\t" + HighscoreSaved.Default.highscoreScore10;

            Form1.highscoreInt[0] = HighscoreSaved.Default.highscoreScore1;
            Form1.highscoreInt[1] = HighscoreSaved.Default.highscoreScore2;
            Form1.highscoreInt[2] = HighscoreSaved.Default.highscoreScore3;
            Form1.highscoreInt[3] = HighscoreSaved.Default.highscoreScore4;
            Form1.highscoreInt[4] = HighscoreSaved.Default.highscoreScore5;
            Form1.highscoreInt[5] = HighscoreSaved.Default.highscoreScore6;
            Form1.highscoreInt[6] = HighscoreSaved.Default.highscoreScore7;
            Form1.highscoreInt[7] = HighscoreSaved.Default.highscoreScore8;
            Form1.highscoreInt[8] = HighscoreSaved.Default.highscoreScore9;
            Form1.highscoreInt[9] = HighscoreSaved.Default.highscoreScore10;

            Form1.highscoreKeeper[0] = HighscoreSaved.Default.highscoreKeeper1;
            Form1.highscoreKeeper[1] = HighscoreSaved.Default.highscoreKeeper2;
            Form1.highscoreKeeper[2] = HighscoreSaved.Default.highscoreKeeper3;
            Form1.highscoreKeeper[3] = HighscoreSaved.Default.highscoreKeeper4;
            Form1.highscoreKeeper[4] = HighscoreSaved.Default.highscoreKeeper5;
            Form1.highscoreKeeper[5] = HighscoreSaved.Default.highscoreKeeper6;
            Form1.highscoreKeeper[6] = HighscoreSaved.Default.highscoreKeeper7;
            Form1.highscoreKeeper[7] = HighscoreSaved.Default.highscoreKeeper8;
            Form1.highscoreKeeper[8] = HighscoreSaved.Default.highscoreKeeper9;
            Form1.highscoreKeeper[9] = HighscoreSaved.Default.highscoreKeeper10;                
        }
        public static void Set()
        {
            Form1 mainForm = new Form1();
            string[] highscoreImported = new string[10];
            Array.Copy(Form1.highscoreList, highscoreImported, 10);
            string highscores = string.Join("\n", highscoreImported);
            mainForm.highscoreText(highscores);
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T07:17:27.883

`Form1`您正在方法中创建一个新实例`Set`，这就是您没有看到变化的原因。您应该将 Form 的一个实例传递给该方法。

像（在你的课堂上`Highscore`）这样的东西：

```
public static void Set(Form mainForm)
{
    string[] highscoreImported = new string[10];
    Array.Copy(Form1.highscoreList, highscoreImported, 10);
    string highscores = string.Join("\n", highscoreImported);
    mainForm.highscoreText(highscores);
} 
```

以后你可以这样称呼它：

```
private void button4_Click_1(object sender, EventArgs e)
{
    Highscore.Fetch();
    Highscore.Set(this); //notice "this"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T07:46:24.653

更好的方法是一次性完成所有这些。

```
using System.Linq;

public static void  FetchAndSet()
{
    Form1.highscoreList[0] = "\t\t\t" + HighscoreSaved.Default.highscoreKeeper1;
    .
    .

    Form1.highscoreInt[0] = HighscoreSaved.Default.highscoreScore1;
    .
    .

    Form1.highscoreKeeper[0] = HighscoreSaved.Default.highscoreKeeper1;
    .
    .

    //Use LINQ's Take to Pull out the Top 10\.   
    string highscores = string.Join("\n", highscoreList.Take(10));
    this.highscoreText(highscores);     
} 
```

# amazon-s3 - 创建我的 AWS (Amazon) 网站的本地映像

> ID：13356844
> 
> 赞同：0
> 
> 时间：2012-11-13T07:16:33.790
> 
> 标签：amazon-s3, amazon-ec2, amazon-web-services, amazon, amazon-cloudfront

我有一个亚马逊托管网站，包括 EC2 和 RDS 服务。我想关闭它，但在此之前备份所有内容，以便将来我可以轻松恢复它。有没有一种简单的方法可以做到这一点并且在它不活跃时避免收费？

首选方法是将文件本地下载到我的 PC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T07:24:14.517

关闭服务器以便将来轻松恢复的最简单方法是使用 AWS 浏览器 UI 在 AWS 中创建服务器的快照。这样，您可以将服务器的完整状态保存在 Amazon 的 S3 存储系统中。虽然这仍然要花一点钱，但对于大多数系统来说，实际上每月只需几美分到几美元（成本取决于总存储量）。

如果您想完全关闭您的 AWS 账户（或至少不支付任何费用），您当然可以备份所有数据。您仍然需要按照该策略重建服务器。

有一项名为[Ravello](http://www.ravellosystems.com/)的新服务（现在处于公开测试阶段）可以轻松地在各种云平台之间移动图像，包括您自己 PC 上的 VMWare。我知道您可以在本地创建映像，然后将其移动到 AWS。另一个方向也可能奏效。

# android - Android View onHover 未触发

> ID：13356846
> 
> 赞同：0
> 
> 时间：2012-11-13T07:16:36.717
> 
> 标签：android, onhover

我有最简单的应用程序，我希望收到悬停事件，不幸的是，无论我尝试什么，我似乎都无法接收它们。我可以猜测其他地方正在接收它们并使用它们，但布局中只有两个视图，一个 RelativeLayout 容器和 TextView。将 RelativeLayout 更改为 LinearLayout 没有积极影响，在 TextView 实例上调用 setOnHoverListener 也没有。

我的应用程序针对 4.0.3 (API 15)。源代码与 SDK 源代码中提供的悬停示例几乎相同。它*应该*可以工作。我在过去见过它的工作。

如果有人能阐明我可能看不到的东西，或者对我能看到的东西有任何建议，我将不胜感激。

硬件：*索尼 Xperia Sola*

安卓版本：*4.0.4*

*活动来源：*

```
public class MainActivity extends Activity {
    private TextView mMessageTextView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mMessageTextView = (TextView) findViewById(R.id.message);
        View container = findViewById(R.id.container);
        container.setOnHoverListener(new View.OnHoverListener() {
            @Override
            public boolean onHover(View v, MotionEvent event) {
                switch (event.getAction()) {
                    case MotionEvent.ACTION_HOVER_ENTER:
                        mMessageTextView.setText("Entered: " + event.getX() + ":" + event.getY());
                        break;
                    case MotionEvent.ACTION_HOVER_MOVE:
                        mMessageTextView.setText("Move: " + event.getX() + ":" + event.getY());
                        break;
                    case MotionEvent.ACTION_HOVER_EXIT:
                        mMessageTextView.setText("Exit: " + event.getX() + ":" + event.getY());
                        break;
                }
                return false;
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T23:48:16.913

老问题，但无论如何。我相信这发生在你身上，因为一些子视图会拦截父级的悬停状态。

其他原因可能是您没有将容器声明为可聚焦的

# java - Maven，稳定性，使用 v3 还是使用 v2？

> ID：13356853
> 
> 赞同：0
> 
> 时间：2012-11-13T07:17:14.943
> 
> 标签：java, maven-2, build-automation, maven-3

我们正在启动项目，无法决定使用哪个版本的 Maven。Maven v3 提供了非常好的[特性](http://www.developer.com/java/article.php/3908561/Top-10-New-Features-in-Maven-3.htm)，但其他方面的 v3 似乎有更多[来自 codehaus jira 的](http://jira.codehaus.org/browse/MNG#selectedTab=com.atlassian.jira.plugin.system.project%3aissues-panel)未修复错误（请参阅未解决：按版本）。我们不能说 v2 已经过时了。

我们可以说 v2 更稳定，意味着更少的陷阱，我们会比 v3 浪费时间吗？

也许，个人经验的一些建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T07:37:28.573

从一年多来在几个大中型项目中广泛使用 maven 的情况来看，我可以说你最常遇到的一些问题是在 maven 插件中，而不是在 maven 本身中。

最初，我们一直在使用 2.2.1 版本（我们目前仍在使用它），但我已经使我们所有的项目都与 maven 3 兼容（因此可以同时使用 2-nd 和 3- 构建它们rd 版本的 Maven）。我应该说，迁移过程相当顺利，尽管有一些问题需要解决。

Maven 3 确实有更多未修复的错误，但我认为这主要是因为两个原因：a) 使用 maven 3 的人比使用 maven 2 的人多；b) maven 2 已经上市很久了。我还记得在某处读到过，随着时间的推移，maven 2 中不会引入任何新功能（只会有一个维护版本 2.2.2）。

总而言之，如果我开始新项目，我肯定会选择 maven 3。

# c++ - opencv最近邻

> ID：13356854
> 
> 赞同：4
> 
> 时间：2012-11-13T07:17:17.287
> 
> 标签：c++, opencv, nearest-neighbor, knn

我在 opencv 中使用 CVKnearest Class 对具有 10 个特征的 6 个类进行分类，如下所示：

```
 CvKNearest knn(trainData, trainClasses, Mat(), false, K ); 
```

然后我使用：

```
 response = knn.find_nearest(testData,K,Results,nearests,dists); 
```

但是结果总是 1，即使我给出了一个训练样本的特征，它应该给我一个零距离并被选为类！

当我这样打印 Mat 结果时：

```
FileStorage f;
f.open("result.xml", FileStorage::WRITE);
f << "t" << Results;
f.release(); 
```

它给了我一个浮点数，

所以我的问题是我做错了什么？或者我应该如何获得正确的班级标签？！

# iphone - 如何在收到一定数量的数据后调用 Web 服务并将其加载到表格视图中

> ID：13356856
> 
> 赞同：0
> 
> 时间：2012-11-13T07:17:21.750
> 
> 标签：iphone, objective-c, web-services, uitableview

我正在做一个项目，在第一次 web 服务调用中，我们得到了大约 20 个数据，我们正在将这些数据加载到表视图中，一旦我们开始向上滚动查看，当它达到 20 个数字时，我们需要为下一个 20 个调用服务，就像脸书一样。

我们需要为接下来的每 20 次执行此操作，直到数据结束并从上次调用的最后一个数据加载到 tableview，当我们向下滚动查看以前的数据时，我们可以看到所有数据。当我们在第 20 个单元格之后向上滚动表格时，需要显示“更多数据加载”。

请帮我 ！

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T08:19:27.213

只需创建私有偏移变量并在每次成功加载时增加它。
假设这是您获取 GET 参数的 Web 服务：

```
http://server.com/?offset=0&amount=20 
```

您的 Objective C 代码将如下所示：

在头文件中：

```
@interface YourClass
{
   uint _offset;
}
@end 
```

在实现文件中：

```
- (void)viewDidLoad {
    _offset = 0;
}

- (void)loadFromServer {
    NSString *stringURL = [NSString stringWithFormat:@"%@/%@", kServer, _offset];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:stringURL]];
    NSString *params = [NSString stringWithFormat:@"offset=%i&amount=20", _offset];
    NSData *postData = [params dataUsingEncoding:NSUTF8StringEncoding];

    request.HTTPMethod = @"GET";
    request.HTTPBody = postData;

    [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {

    if (error) {
        NSLog(@"Error: %@", error);
    }else {
        NSError *jsonError;
        NSDictionary *json = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableLeaves error:&jsonError];

        _offset += 20;
    }
}]; 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T06:40:17.043

添加**UITableViewDelegate**方法**willDisplayCell**

```
-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *) cell     forRowAtIndexPath:(NSIndexPath *)indexPath
{
    int count = [yourDataSource count];;

    if(indexPath.row == count - 1) // If going to display last row available in your source
    {
        //totalPageCount is the total pages available in the server. This needs to be stored on initial server call
        //currentIndex is the index of page last retreived from server. This needs to be incremented every time new page is retreived.
        if(currentIndex <= totalPageCount) 
        {
            [self getContentsForPage:currentIndex];
        }
        else
        {
            self.tableView.tableFooterView = nil; //You can add an activity indicator in tableview's footer in viewDidLoad to show a loading status to user.
        }

    }
} 
```

# websphere-7 - 消息引擎永久存储文件达到最大限制

> ID：13356859
> 
> 赞同：2
> 
> 时间：2012-11-13T07:17:30.433
> 
> 标签：websphere-7

我的 WAS 7.0 中有一个消息引擎集群。为我的应用程序的一项功能创建了一个队列，当我通过上传实用工具加载一些数据时正在使用该功能。在创建消息引擎时，创建了 3 个文件：1\. 日志文件最大大小 100MB 2\. TemporaryStore 最小大小 200MB 和最大大小 500MB 3\. PermanentStore 最小大小 200MB 和最大大小 500MB

现在，当我大量加载数据时，PermanentStore 的大小已达到其最大限制，此时我收到异常：“异常 com.ibm.ws.sib.msgstore.TransactionException: com.ibm.ws.sib。 msgstore.PersistenceException：无法回滚批处理，因为它的状态不正确！State=STATE_ROLLEDBACK "

当我将 PermanentStore 的最大限制增加到 Unlimited 大小时，一切正常，但在这种情况下，PermanentStore 的大小在每次事务中都在增加，这使得该文件超过 2-3 GB，然后它会再次增加，这不是正确的方法。

有人请建议我如何将 PermanentStore 文件的大小保持在某个有限的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:00:41.500

我目前在一个环境中工作，我们曾经有多个消息传递引擎，混合使用文件存储和数据库支持的消息存储。该设计最初由 IBM 顾问完成。但是，配置了文件存储的消息传递引擎引起了很多问题，我们最终得出结论，它们缺乏关键任务生产使用所需的可靠性。我们最终消除了所有文件存储（除了一些非关键业务用例）并改为数据库支持的消息存储。

IBM 3 级支持的以下声明（作为对文件存储意外报告为已满的 PMR 的响应）可能会阐明您遇到的问题：

> 我怀疑观察到的问题与没有碎片整理过程的文件存储碎片有关，只有限制。所描述的测试中的消息传递模式正是可以导致文件存储变满并且尽管
> PM10591 仍无法恢复的模式。
> 
> 本质上，问题是由于日志文件的整个大小需要能够连续地适合存储文件的要求。在正常情况下，这个连续的可用空间（从不使用但必须存在）位于存储文件的末尾，例如：
> 
> 0...消息数据...400Mb ....可用连续空间...500Mb
> 
> 当存储文件已满时，这意味着存储文件中没有足够的连续可用空间来容纳日志文件。想象一下，您已经用消息数据填充了 0 到 400Mb 的文件，然后消费了 0 到 200 Mb 的消息数据（耗尽了 MDB 输入队列，但系统异常目标仍然是满的）。因为存储文件本质上是一个文件系统本身，并且节点和目录元数据存储在文件中的可变位置，所以 0 到 200Mb 的存储区域并不是一个连续的空闲空间，因为您已经消费了消息数据。而是以随机间隔存在少量元数据。所以总共有 300Mb 的可用空间，但没有一个连续的 100Mb 块可以存放日志。这是目前没有碎片整理解决方案的问题。
> 
> 通常使用来自所有队列的消息数据将释放重要的几个字节以在存储文件的末尾重新创建空闲的连续空闲空间。即在异常目的地消费消息数据（这比消费第一个队列中的消息数据来填充更有用）
> 
> 这个问题的完整解决方案是不要遇到存储满的情况。了解所需最大值的唯一方法是使用消息的最大可能大小将所有队列填充到其配置的限制，然后查看需要什么大小的存储文件。或者您可以将文件存储配置为具有无限大小。
> 
> 在 v7 中进行了一些更改以尝试抵抗碎片，但再次没有碎片整理程序。这是因为在线碎片整理会非常昂贵，而这个问题的真正解决方案是确保有足够的可用空间来包含在最坏情况下预期的所有消息数据。

这在实践中意味着存在特定的使用模式，其中永久存储需要比基于实际存储的消息的数量和大小所期望的空间大得多的空间。显然，这使得规划文件存储的存储需求基本上是不可能的。

# iphone - iPhone SDK 中带有 UICollectionCells 的特殊弹出视图

> ID：13356861
> 
> 赞同：0
> 
> 时间：2012-11-13T07:18:13.320
> 
> 标签：iphone, ios, uiactionsheet, uiactivityviewcontroller

我已经彻底四处寻找`UIActionSheet`这是什么类型的名称。

![在此处输入图像描述](../Images/9cba021e583ea3ec037f71552d1f822d.png)

或者，如果它甚至是完全定制的。使用取消按钮，它看起来像是一个`UIActionSheet`，它上面的部分是一个`UICollectionView`。尽管构建所有这些自定义声音不费时且有益，但我想知道是否有一个库名称可以调用以默认这种面板弹出样式。谢谢。

如果它确实是需要定制的东西，我将如何去做这样的事情？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T07:21:50.583

这是一个[UIActivityViewController](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIActivityViewController_Class/Reference/Reference.html#//apple_ref/occ/cl/UIActivityViewController)，在 iOS6 中是新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T09:18:13.410

它是ios 6 中引入的[UIActivityViewController 。](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIActivityViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40011976)

您可以在此链接中找到更多新控件：[MobileHIG](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.html)

# jquery - jquery datatable columnfilter问题？

> ID：13356872
> 
> 赞同：3
> 
> 时间：2012-11-13T07:19:41.490
> 
> 标签：jquery, jquery-ui, jquery-plugins

我正在使用 jquery 数据表插件。这个数据表插件再次使用另一个名为数据表列过滤器的插件。

这是列过滤器的链接

[http://jquery-datatables-column-filter.googlecode.com/svn/trunk/index.html](http://jquery-datatables-column-filter.googlecode.com/svn/trunk/index.html)

**问题：**

这里在创建数据网格没有问题。但未创建列过滤器。

![在此处输入图像描述](../Images/3ee8b2c28d2b03222f6007867d910bee.png)

```
enter code here
<!doctype html>
<html>
<head>
    <title>jQuery datagrid</title>

    <script src="js/jquery.js"></script>
    <script src="js/jquery.dataTables.js"></script>
    <script src="js/jquery.dataTables.columnFilter.js"></script>

    <style type="text/css" title="currentStyle">
            @import "css/jquery.dataTables.css";
    </style>
</head>
<body>
<script>
// init code

    $(document).ready(function(){
    //create datatable
         $('#example2').dataTable({
                 bJQueryUI: true,
                 "sPaginationType": "full_numbers",
                  "aoColumns": [
                { "sTitle": "Engine" },
                { "sTitle": "Browser" },
                { "sTitle": "Platform" },
                { "sTitle": "Version", "sClass": "center" },
                { "sTitle": "Grade", "sClass": "center" },],
                "aaData": [
                /* Reduced data set */
                [ "Trident", "Internet Explorer 4.0", "Win 95+", 4, "X" ],
                [ "Trident", "Internet Explorer 5.0", "Win 95+", 5, "C" ],
                [ "Trident", "Internet Explorer 5.5", "Win 95+", 5.5, "A" ],
                [ "Trident", "Internet Explorer 6.0", "Win 98+", 6, "A" ],
                [ "Trident", "Internet Explorer 7.0", "Win XP SP2+", 7, "A" ],
                [ "Gecko", "Firefox 1.5", "Win 98+ / OSX.2+", 1.8, "A" ],
                [ "Gecko", "Firefox 2", "Win 98+ / OSX.2+", 1.8, "A" ],
                [ "Gecko", "Firefox 3", "Win 2k+ / OSX.3+", 1.9, "A" ],
                [ "Webkit", "Safari 1.2", "OSX.3", 125.5, "A" ],
                [ "Webkit", "Safari 1.3", "OSX.3", 312.8, "A" ],
                [ "Webkit", "Safari 2.0", "OSX.4+", 419.3, "A" ],
                [ "Webkit", "Safari 3.0", "OSX.4+", 522.1, "A" ]
            ],
    })
              .columnFilter({
                aoColumns: [ { type: "select", values: [ 'Gecko', 'Trident', 'KHTML', 'Misc', 'Presto', 'Webkit', 'Tasman']  },
                         { type: "text" },
                         null,
                         { type: "number" },
                         { type: "select", values: [ 'A', 'C', 'U', 'X']  }
                    ]

            });
    });//end of  ready

</script>

<table id="example2">
</table>
</body>
</html> 
```

对此有任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-20T02:11:03.080

我遇到了同样的问题，在 Jay Rizzi 的启发下，我添加了一个空页脚。这解决了问题：

```
<tfoot>
    <tr>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
    </tr>
</tfoot> 
```

显然，如果没有声明 tfoot 部分，则 columnFilter() 不会创建一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:12:07.520

尝试使用 columnFilter() 并手动设置 tfoot

```
<tfoot>
    <tr>
        <th>Rendering engine</th>
        <th>Browser</th>
        <th>Platform(s)</th>
        <th>Engine version</th>
        <th>CSS grade</th>
    </tr>
</tfoot> 
```

这将排除问题是否与 aocolumns 相关

# python - 使用 lxml，查找所有 td class='banana' 但前提是它们包含文本“Today”

> ID：13356877
> 
> 赞同：1
> 
> 时间：2012-11-13T07:20:09.970
> 
> 标签：python, lxml

因此，我想在所有 td class="banana" 中获取所有 a 标签，但前提是此 td 包含文本“Today”

```
import lxml.html
html = lxml.html.parse("http://www.sitetoscrape.com/")
a = html.xpath('//td[@class="banana"]//text[@text="Today"]//a')

print a 
```

这将返回一个空列表，如果我取出 "//text[@text="Today"]" 它可以工作，但我会取回所有 td class='banana' 中的所有链接

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T07:30:40.403

没有例子很难给出准确的答案，但应该这样做。

```
import lxml.html as lh

html="""\
<html>
<body>
<h1>My First Heading</h1>
<td class="banana">
<a>today</a>
<a></a>
<a></a>
</td>
<td class="banana">
<a>bar</a>
<a></a>
<a></a>
</td>
</body>
</html>"""

doc=lh.fromstring(html)

doc.xpath('.//td[contains(.,"today") and @class="banana"]/a')
Out[145]: [<Element a at 1c348b8>, <Element a at 1c34ae8>, <Element a at 1c34c00>] 
```

# android - 将 2 个真正的 android 设备连接到 PC

> ID：13356881
> 
> 赞同：0
> 
> 时间：2012-11-13T07:20:41.570
> 
> 标签：android

我已经使用套接字实现了两部手机之间的通信，并在模拟器中进行了测试。它工作正常。但是，当我尝试将 2 个真正的 android 设备连接到我的 PC 时（两者都从 USB 充电）。但是我无法从命令提示符/ DDMS 的角度在 adb 设备中查看它们。请让我知道，我该怎么做。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T07:24:17.813

可能是您缺少手机的 USB 驱动程序

# html - 具有变量值的视图中的 div 宽度

> ID：13356884
> 
> 赞同：2
> 
> 时间：2012-11-13T07:20:44.333
> 
> 标签：html, css, ruby-on-rails

我想`div`根据变量更改宽度的值。我在视图中做这样的事情：

```
<% @answers.each do |answer| %>
  <%= @poll.responses.find_all_by_answer_id(answer.id).count %></br>
  <% divwidth = @poll.responses.find_all_by_answer_id(answer.id).count.to_int * 10 %> 
  <div class="poll" width=<%= divwidth.to_s + 'px' %>></div> 
<% end %> 
```

但它不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:26:42.663

只需使用 style 属性添加宽度，

```
<div class="poll" style="<%="width:#{divwidth}px;"%>"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:28:01.867

尝试`<div>`使用`style`属性指定 a 的宽度。这是一个简单的例子：

```
<div style="width:400px;"> 
```

# javascript - 接受的函数：字符串或函数或两个对象

> ID：13356885
> 
> 赞同：1
> 
> 时间：2012-11-13T07:20:52.050
> 
> 标签：javascript, node.js

我正在 Node.js 中创建一个模块，它只公开一个名为 的函数`direct`，基本上是一个请求路由器（是的，我正在制作自己的，以努力学习）。但是，我想简化 API 以仅使用一个函数。其他所有内容都被链接起来，具体取决于`direct`-ed 的内容。

它现在将接受 3 种类型的输入：字符串（路由）或函数（回调）或两个对象 - 来自的请求和响应对象`http.createServer`：

```
direct('/');           //pass a route string
direct(function(){});  //pass callback
direct(req,res);       //pass the request and response 
```

这些的内部是我担心的。目前我正在做：

```
//if only one, 
if(arguments.length === 1) {
    if( typeof arguments[0] === 'string') {
        //add to routes
    } else if( typeof arguments[0] === 'function') {
        //add to callbacks
    } else {
        //return an error
    }
} else if(arguments.length === 2 && ...check if both are typeof object, not null, not instance of array...) {
    //extremely long check if both are objects
    //planning to extract the check as a function
} else {
    //return an error object
} 
```

如您所见，我似乎在对大部分内容进行硬编码。此外，检查效率低下且有点长。

*   根据给定标准过滤参数的有效方法是什么？
*   有没有办法检查发送的对象是否是`request`和`response`的对象`http.createServer`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:52:41.250

您可以使用基于以下内容的查找表`typeof`：

```
var handlers = {
    'string':   { n: 1, fn: function(route)     { ... } },
    'function': { n: 1, fn: function(callback)  { ... } },
    'object':   { n: 2, fn: function(req, resp) { ... } }
}; 
```

接着：

```
var handler = handlers[typeof arguments[0]];
if(!handler) {
    // throw a hissy fit and bail out
}
if(arguments.length != handler.n) {
    // throw a different hissy fit and bail out.
}
return handler.fn.apply(null, arguments); 
```

您还可以放弃`n`并使用`length`处理程序函数的属性：

```
var handlers = {
    'string':   function(route)     { ... },
    'function': function(callback)  { ... },
    'object':   function(req, resp) { ... }
};

var handler = handlers[typeof arguments[0]];
if(!handler) {
    // throw a hissy fit and bail out
}
if(arguments.length != handler.length) {
    // throw a different hissy fit and bail out.
}
return handler.apply(null, arguments); 
```

您可以进一步将`handler.n`检查抽象为一个函数，然后`'object'`检查器的版本可以`instanceof`用来确保`req`并且`resp`是正确的东西。这会让你`direct`看起来像这样：

```
var handlers = {
    'string': {
        good_args: function(arguments) { ... },
        fn: function(route) { ... }
    },
    //...
};

var handler = handlers[typeof arguments[0]];
if(!handler) {
    // throw a hissy fit and bail out
}
if(!handlers.check_args(arguments)) {
    // throw a different hissy fit and bail out.
}
return handler.fn.apply(null, arguments); 
```

如果您需要处理更多的复杂性和可变性，那么您可以将简单对象替换为`handlers`支持已知接口的“真实”对象。不过，这闻起来像是过度设计，我可能会停在这个`good_args`版本上。

您几乎正在构建一个微型命令解释器，不妨让它看起来像一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:27:02.693

> *   有没有办法检查发送的对象是否是 http.createServer 的请求和响应对象？

这部分很容易。

从[文档](http://nodejs.org/api/http.html#http_event_request)：

> `request`是一个实例`http.ServerRequest`并且`response`是一个实例`http.ServerResponse`

所以你的代码看起来像这样，假设你的`direct`函数采用命名的形式参数`a`和`b`（我认为这比`arguments[0]`and更具可读性`arguments[1]`）：

```
else if (arguments.length == 2
        && a instanceof http.ServerRequest
        && b instanceof http.ServerResponse) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T07:28:49.753

如果你像这样直接实现它可能会更容易：

```
direct = function(o){

  if(o['route'])
    DO SOMTHING
  }

  if(o['fn']){
    DO SOMETHING ELSE
  }
  ...
} 
```

总是得到一个配置对象来保存调用者的意图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T13:04:48.223

我想像你一样，如果你只是将数据传递给它们，就会有更优雅和更易于使用的功能。

你的代码是正确的，但你太严格了。Javascript 是一种弱类型语言。如果您开始检查每个参数的类型，您将永远不会结束，并且一行函数可能会变得过于复杂。如果您在文档中说该函数接收 2 个字符串，那么用户必须传递 2 个字符串，如果他决定传递一个布尔值和一个函数，这不是您的问题。

我会写以下内容：

```
var direct = function (param, res){
  var type = typeof param;
  if (type === "string"){
    //direct("/")
  }else if (type === "function"){
    //direct(function(){})
  }else{
    //direct(req, res)
  }
}; 
```

# visual-studio-2010 - 我可以使用 EF5 并暂时使用 Visual Studio 2010 吗？

> ID：13356888
> 
> 赞同：5
> 
> 时间：2012-11-13T07:21:37.927
> 
> 标签：visual-studio-2010, entity-framework-5

我想使用最新的实体框架 (EF5)，但还不想购买新版本的 Visual Studio。

**是否可以将 EF5 与 VS2010 一起使用？有什么限制，如果有的话？**

笔记：

*   我在[Brice 的博客](http://brice-lambson.blogspot.ch/2012/10/unicorn-myths-debunked-entity-framework.html)上读到EF5 可以与 .NET 4.0 一起使用。这是我要走的路吗？
*   [这个问题](https://stackoverflow.com/q/12254230/79485)有点相关，但我不需要 .NET 版本，而是 EF 版本（然而，这可能又需要特定的 .NET 版本）。
*   [这个问题非常相似](https://stackoverflow.com/q/12921194/79485)，如果更多地关注 .NET 版本，而不是 VS 版本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T07:26:25.547

您可以将 EF5 与 VS2010 一起使用。

EF5 可用于 .NET 4.0 和 .NET 4.5 应用程序。

根据 EF 团队博客上的这篇博文：

[http://blogs.msdn.com/b/adonet/archive/2012/08/15/ef5-released.aspx](http://blogs.msdn.com/b/adonet/archive/2012/08/15/ef5-released.aspx)

> 此版本的 NuGet 包与 Visual Studio 2010 和 Visual Studio 2012 完全兼容，可用于面向 .NET 4.0 和 4.5 的应用程序。
> 
> 某些功能仅在编写面向 .NET 4.5 的应用程序时可用。这包括枚举支持、空间数据类型、表值函数和性能改进。

这些限制围绕应用程序的目标 .NET 版本，而不是 Visual Studio 本身。

# java - Jenkins/Hudson 参数使用

> ID：13356893
> 
> 赞同：0
> 
> 时间：2012-11-13T07:22:19.900
> 
> 标签：java, jenkins

我有一个问题，是否可以定义一个字符串参数并在 url 存储库中使用它？当我使用像这样的参数时，它总是写红色表示存储库不存在 ${NAME}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:12:59.423

是的，您完全可以这样做。事实上，我每天都这样做，我的分支构建将分支编号（来自下拉参数）附加到 URL

`http://svn.repo.com/some_project/branch/${NAME}`是一个有效的 SVN 回购 URL

要避免出现红色警告消息，请执行以下操作：

*   转到**管理 Jenkins**（配置）
*   向下滚动直到看到**Subversion**部分
*   复选标记**Validate repository URLs to the first variable name**
*   点击**保存**

只有一个关于投票的说明。SVN 轮询将使用最后运行的完整（带有扩展变量）URL。换句话说，它会记住您的 ${NAME} 参数进行轮询，直到您使用不同的 {NAME} 值运行作业

# python - 使用递归查找所有索引

> ID：13356895
> 
> 赞同：1
> 
> 时间：2012-11-13T07:22:30.237
> 
> 标签：python, recursion

我必须编写一个程序来查找列表或字符串中特定元素的所有索引值。我*必须*使用递归，我的函数只能接受两个参数。

我的问题是我的程序只找到第一个索引然后停止。我怎样才能改变它以满足我的要求？

我的代码：

```
def find_all(L, v):
    return 0 if L[0] == v else 1 + find_all(L[1:], v) 
```

输入：

1.  `find_all( [1,2,3,4,2,4,5,2,1], 2)`
2.  `find_all("hello wonderful world", "w")`

期望的输出：

1.  `[1,4,7]`
2.  `[6,16]`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T07:27:53.500

您可以使用 Python 的能力在列表中倒退并抓取最后一个元素。然后将列表与 + 运算符放在一起。通过向后浏览列表，您可以在找到值时找到索引，而不是在从列表的开头移动到结尾时丢失它。

```
def find_all(L, v):
    if not L:
            return []

    result = []
    if L[-1] == v:
            result = [len(L)-1]

    return find_all(L[:-1], v) + result 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T07:34:13.073

You have to keep track of a counter somehow. The idea is to use `find_all(L, v)` as an interface to the "real" recursive function :

```
def find_all(L, v):
    return _find_all(L, v, 0)

def _find_all(L, v, position):
    # Your algorithm here 
```

Considering this is homework, I will not do the work for you but you should be able to keep going from here.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-14T21:12:20.717

Code in C++

```
 int allIndexes(int input[], int size, int x, int output[]){

 if(size==0)
      return 0;
    int ans=allIndexes(input, size-1, x , output );
    if(input[size-1]==x)
    {
        output[ans]=size-1;
       return ans+1; 
    }
    return ans;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-09T16:02:42.303

```
int AllIndexesRecursive(int input[], int size, 
                    int x, int output[]) 
{ 

    // If an empty array comes 
    // to the function, then 
    // return zero 
    if (size == 0) { 
        return 0; 
    } 

    // Getting the recursive answer 
    int smallAns = AllIndexesRecursive(input + 1, 
                                    size - 1, x, output); 

    // If the element at index 0 is equal 
    // to x then add 1 to the array values 
    // and shift them right by 1 step 
    if (input[0] == x) { 
        for (int i = smallAns - 1; i >= 0; i--) { 
            output[i + 1] = output[i] + 1; 
        } 

        // Put the start index in front 
        // of the array 
        output[0] = 0; 
        smallAns++; 
    } 
    else { 

        // If the element at index 0 is not equal 
        // to x then add 1 to the array values 
        for (int i = smallAns - 1; i >= 0; i--) { 
            output[i] = output[i] + 1; 
        } 
    } 
    return smallAns; 
} 

// Function to find all indices of a number 
void AllIndexes(int input[], int n, int x) 
{ 
    int output[n]; 
    int size = AllIndexesRecursive(input, n, 
                                x, output); 
    for (int i = 0; i < size; i++) { 
        cout << output[i] << " "; 
    } 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-21T20:42:06.583

```
Java code:
/ Java program to find all 
// indices of a number 
public class GFG { 

    public int[] AllIndexesRecursive(int input[], 
                                int x, int start) 
    { 
        // If the start index reaches the 
        // length of the array, then 
        // return empty array 
        if (start == input.length) { 
            int[] ans = new int[0]; // empty array 
            return ans; 
        } 

        // Getting the recursive answer in 
        // smallIndex array 
        int[] smallIndex = AllIndexesRecursive(input, x, 
                                              start + 1); 

        // If the element at start index is equal 
        // to x then 
        // (which is the answer of recursion) and then 
        // (which came through recursion) 
        if (input[start] == x) { 
            int[] myAns = new int[smallIndex.length + 1]; 

            // Put the start index in front 
            // of the array 
            myAns[0] = start; 
            for (int i = 0; i < smallIndex.length; i++) { 

                // Shift the elements of the array 
                // one step to the right 
                // and putting them in 
                // myAns array 
                myAns[i + 1] = smallIndex[i]; 
            } 
            return myAns; 
        } 
        else { 

            // If the element at start index is not 
            // equal to x then just simply return the 
            // answer which came from recursion. 
            return smallIndex; 
        } 
    } 
```

# android - 管理可重命名的 Android 应用程序

> ID：13356896
> 
> 赞同：1
> 
> 时间：2012-11-13T07:22:31.460
> 
> 标签：android, google-play

我有一个正在为几个不同的客户开发的应用程序。该应用程序对于每个客户来说都是完全相同的，只是公司名称、联系方式和徽标图形不同。将在 Google Play 上提供的所有应用程序。

有什么方法可以管理应用程序，以便我只需要更新一次代码即可在所有客户端上发布更改？即如果我对代码进行更改，我可以上传一次，所有的应用程序都可以从那里更新吗？

我认为 Play Store 上的应用程序本质上是一个骨架 apk，然后它可以下载并安装适当的 APK 并从 Web 服务检索适当的自定义数据，然后以编程方式处理检查应用程序 apk 的更新版本。我在这里看到的唯一问题是用户需要启用来自未知来源的安装，这不适合我们的客户。

有人对如何实现这一点有任何其他想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T07:31:03.713

1.) 通过在线下载自定义位并将其存储在私有存储中，制作一个容器应用程序并将其“提供”给适当的客户端。例如，您可以下载一个 XML 文件，其中包含定义 UI 的元素和对徽标图形的引用，然后在运行时应用这些资产。如果您想单机运行，您可以提供一个启动器小部件，该小部件将从下载的资产更新到选定的客户端。

2.) 在 Eclipse 中的库项目中编写核心功能，然后为每个客户端（具有不同的资产和 values.xml）包含该库的自定义应用程序。您的所有业务逻辑和 UI 的冲击都将在客户端之间共享，但前端部分将是自定义的。

是的，您必须维护几个包，并且发布将是一些额外的工作。另一方面，这是一种非常干净的方法，可以最大限度地重用代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T09:10:21.080

就我个人而言，我会根据可以与应用程序打包的配置文件来制作尽可能多的应用程序外观。图像、标签等都可以在运行时确定。您必须找到一种方法来发送或下载“配置”文件，但有一次（在安装期间）用户将被连接。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-13T07:29:27.393

当然，做到这一点的一种方法是将应用程序开发为网络应用程序。然后，容器应用程序需要包含的所有内容都是 web 视图和应用程序所属公司的详细信息。然后，Web 服务可以处理所有请求。

此方法的问题是您无法访问 android UI 小部件集。而且，据我所知，您无法从 webview 中的代码访问设备定位服务等功能？

# sql - 根据下拉列表中选择的数据在单选按钮列表上填充数据

> ID：13356901
> 
> 赞同：1
> 
> 时间：2012-11-13T07:23:01.857
> 
> 标签：sql, drop-down-menu, radiobuttonlist, populate

在过去的 2 天里，我一直遇到以下问题。

我希望创建一个民意调查，用户将从下拉列表中选择一个民意调查。选择后，所选投票将根据其 ID 从数据库中获取数据，并使用 3 个选项填充单选按钮列表：日期 1、日期 2、日期 3。

我有一个数据库表，用于存储创建的投票的 ID、到期数据、日期 1、日期 2、日期 3。

I am able to generate the drop down list of polls created, however i am unable to make the selected poll respond when selected to fill the radi button list with the different date options. 以下是我编写的代码片段：

```
protected void Page_Load(object sender, EventArgs e)
    { 
        fillPollOptions();

        if(pollDropDownList.SelectedIndex > 0){
            MultiView1.Visible = true;
            btnListPollOptions.Visible = true;
            pollDateCreated();
        }
    }

    public void fillPollOptions()
    {
        pollDropDownList.Items.Clear();

        string selectSQL = "SELECT id, dateExpired FROM tblPolls";

        SqlConnection con = new SqlConnection(strConnString);
        SqlCommand cmd = new SqlCommand(selectSQL, con);
        SqlDataReader reader;

        try
        {
            con.Open();
            reader = cmd.ExecuteReader();
            while (reader.Read())
            {
                ListItem newItem = new ListItem();
                newItem.Text = reader["id"].ToString();
                newItem.Value = reader["dateExpired"].ToString();
                pollDropDownList.Items.Add(newItem);
            }
            reader.Close();

        }
        catch (Exception err)
        {
            lblListError.Text = "Error reading list of names. ";
            lblListError.Text += err.Message;
        }
        finally
        {
            con.Close();
        }
    }

    public void pollDateCreated()
    {

        string selectSQL = "SELECT dateExpired, dateCreated FROM tblPolls";

        SqlConnection con = new SqlConnection(strConnString);
        SqlCommand cmd = new SqlCommand(selectSQL, con);
        SqlDataReader reader;

        try
        {
            con.Open();
            reader = cmd.ExecuteReader();
            reader.Read();
            lblQuestionDateCreated.Text = reader["dateCreated"].ToString();
            lblQuestionDateExpires.Text = reader["dateExpired"].ToString();
            reader.Close();

        }
        catch (Exception err)
        {
            lblListError.Text = "Error reading list of names. ";
            lblListError.Text += err.Message;
        }
        finally
        {
            con.Close();
        }
    }

    protected void btnPollList()
    {
        string selectSQL; 
        selectSQL = "SELECT firstDate,secondDate,thirdDate FROM tblPolls ";

        SqlConnection con = new SqlConnection(strConnString);
        SqlCommand cmd = new SqlCommand(selectSQL, con);
        SqlDataReader reader;

        try
        {
            con.Open();
            reader = cmd.ExecuteReader();
            reader.Read();

            btnListPollOptions.DataSource = reader;
            btnListPollOptions.DataBind();

            reader.Close();
        }
        catch(Exception ex){
            lblMessage.Text = "Error displaying poll";
        }

    } 
```

我不确定前端是否需要任何数据源绑定。我的 .asp 代码是：

```
<asp:DropDownList ID="pollDropDownList" runat="server" Height="16px" 
    Width="132px" >
</asp:DropDownList>

<asp:RadioButtonList ID="btnListPollOptions" runat="server" 
        DataTextField="firstDate, secondDate, thirdDate" DataValueField="id">
        <asp:ListItem>Not Available</asp:ListItem>
    </asp:RadioButtonList> 
```

如果能提供任何帮助，我将不胜感激！！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T07:59:07.217

更改您的 selectSQL = "SELECT firstDate,secondDate,thirdDate FROM tblPolls"; 查询 selectSQL = "SELECT firstDate opdate FROM tblPolls union all SELECT secondDate FROM tblPolls union all SELECT thirdDate FROM tblPolls" 并将此 DataTextField="firstDate, secondDate,thirdDate" DataValueField="id" 更改为 DataTextField="opdate" DataValueField="opdate "

我认为上面的 slectSQL 会有一些 where 条件。希望对你有帮助

# eclipse - tomcat 404错误，但它在eclipse中工作

> ID：13356905
> 
> 赞同：0
> 
> 时间：2012-11-13T07:23:32.283
> 
> 标签：eclipse, tomcat, http-status-code-404

我开始使用 Spring 框架进行编程。我在 eclipse 中做了一个动态的 web 项目，它在从 eclipse 启动的服务器上运行良好。成功后，我在eclipse中停止了服务器，并通过执行[Tomcat目录]/bin/Tomcat7.exe运行tomcat本身。然后，localhost:8080 页面运行良好，但我的项目页面无法使用 404 错误。当使用来自 eclipse 的服务器和使用服务器本身（基于 WINDOW）时，我输入的路径是相同的。我应该怎么做才能解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T07:40:06.387

尝试：
1\. 将您的应用程序战争复制到 /PATH_TO_TOMCAT_HOME/webapps。这应该将您的应用程序部署到您的 tomcat 目录。
或者
2\. 在您的服务器设置中设置“使用 Tomcat 安装（控制 Tomcat 安装）”。可能您选择了默认情况下的“使用工作区元数据...”。

![在此处输入图像描述](../Images/47a27374d13acb3cf666bc954fd238dc.png)

# javascript - JavaScript 标准委员会正文和标准文本的主页在哪里？

> ID：13356911
> 
> 赞同：1
> 
> 时间：2012-11-13T07:24:39.227
> 
> 标签：javascript

我完全沮丧。所以，维基百科和 MDN 没有告诉 JavaScript 标准委员会主页和标准文本在哪里。你可能会发现很多表：

*   [https://developer.mozilla.org/en-US/docs/JavaScript/Reference#JavaScript.2FBrowser_support_history](https://developer.mozilla.org/en-US/docs/JavaScript/Reference#JavaScript.2FBrowser_support_history)
*   [http://en.wikipedia.org/wiki/Javascript#Versions](http://en.wikipedia.org/wiki/Javascript#Versions)
*   [http://en.wikipedia.org/wiki/ECMAScript#Version_correspondence](http://en.wikipedia.org/wiki/ECMAScript#Version_correspondence)

它指的是 JavaScript 1.1/1.2/1.3/.../1.8。

这一页：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference#JavaScript.2FBrowser_support_history](https://developer.mozilla.org/en-US/docs/JavaScript/Reference#JavaScript.2FBrowser_support_history)

有标准变更日志的链接。但是我在哪里可以找到标准的身体来比较自己呢？

**PS。**据我了解 ECMAScript 标准与 JavaScript 标准（或协议）相关但不相同，所以请不要把链接放到**ECMA**！

**聚苯乙烯。**这些相关问题的链接（但它们与我的不一样！！）：

*   [一个很好的与浏览器和 DOM 相关的 Javascript API 参考文档](https://stackoverflow.com/questions/555726/a-good-javascript-api-reference-documentation-related-to-browsers-and-dom)
*   [用于离线浏览的 Javascript 参考](https://stackoverflow.com/questions/401969/javascript-reference-for-offline-browsing)
*   [我在哪里可以找到好的 Javascript/DOM 参考？](https://stackoverflow.com/questions/4003891/where-can-i-find-a-good-javascript-dom-reference)
*   [哪些是 HTML 和 JavaScript 编程的最佳参考站点](https://stackoverflow.com/questions/823718/what-are-some-of-the-best-reference-sites-for-html-and-javascript-programming)
*   [什么是最好的在线 javascript/css/html/xhtml/dom 参考？](https://stackoverflow.com/questions/63918/what-is-the-best-online-javascript-css-html-xhtml-dom-reference)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T07:29:54.557

Javascript 本身没有标准。标准是 ECMAScript，JavaScript 是它的一个（第一个）实现。

# r - 仅对一个 .R 文件进行 roxygenise 以将文件及其文档添加到包中

> ID：13356915
> 
> 赞同：6
> 
> 时间：2012-11-13T07:25:05.843
> 
> 标签：r, roxygen2

我创建了一个包并将其推送到github，以便`devtools`函数`install_github()`功能易于安装。即 github repo 文件结构使得`DESCRIPTION`和`NAMESPACE`位于顶部，而`/R`和`/man`文件夹分别包含每个函数的`*.R`文件和文件。`*.Rd`

我现在想通过添加新功能对其进行一些升级。

`#'`我在每个新文件的函数上方都有所有相关的 roxygen 类型 ( ) 文本`.R`，但找不到`roxygen2`有助于读取`.R`文件和编写相关`.Rd`文件的或其他相关的包函数，希望这不会太难......我想我要问的是，是否可以仅将一个文件添加到另一个现有包中？以便它也更新DESCRIPTION、NAMESPACE 文件。这样我就可以添加、提交并将所有这些更改推送到 github 上的远程仓库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T08:16:42.253

您在寻找`document`功能`devtools`吗？这将从 mylibrary/R 中的源代码创建 .Rd 文件。

它还更新`DESCRIPTION`和`NAMESPACE`.

# python - Python：从列表中的列表中获取项目

> ID：13356917
> 
> 赞同：0
> 
> 时间：2012-11-13T07:25:15.460
> 
> 标签：python, list, element

如果该列表在列表中，我如何从列表中获取项目？所以如果我有

```
mylist=[[range(4*(x-1)+1,4*(x-1)+5)]for x in range(1,5)] 
```

那么我怎样才能从中检索'1'呢？我一直认为它就像

```
print mylist[0][0] 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T07:27:42.413

这实际上是一个三重嵌套列表，因为`range()`返回一个列表，然后你将它包装在`[]`.

也许你真正想要的是...

```
mylist=[range(4*(x-1)+1,4*(x-1)+5) for x in range(1,5)] 
```

在这一点上`mylist[0][0]`应该做你所期望的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T09:09:23.177

讨厌成为明显的船长，但你需要做的只是更深一层:)

```
>>> mylist=[[range(4*(x-1)+1,4*(x-1)+5)]for x in range(1,5)]
>>> mylist
[[[1, 2, 3, 4]], [[5, 6, 7, 8]], [[9, 10, 11, 12]], [[13, 14, 15, 16]]]
>>> mylist[0][0][0]
1 
```

# iphone - 如何弄清楚模拟器中的“调用堆栈”含义？

> ID：13356918
> 
> 赞同：3
> 
> 时间：2012-11-13T07:25:38.717
> 
> 标签：iphone, ios, xcode, debugging, ios-simulator

当我尝试使用以下代码将 nil 对象放入 NSDictionary 时出现异常：

```
NSString * object = [self someMethod]; // the method return nil
NSDictionary * dict = @{ @"key": object }; 
```

这是我知道的一个简单的错误，我只是以它为例。模拟器中的应用程序崩溃和控制台中的错误消息如下：

```
 2012-11-13 14:40:00.528 Ape[44456:11303] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSPlaceholderDictionary initWithObjects:forKeys:count:]: attempt to insert nil object from objects[2]'

 *** First throw call stack:
 (0x208b012 0x1a68e7e 0x2051a95 0x207e4e9 0x93f72 0x939b4 0x8800f 0x85f4d 0x852a3 0x1ce853f 0x1cfa014 0x1ce9fd6 0x1cfa014 0x1cf18b7 0x1ced405 0x1cea768 0x2031af5 0x2030#
 libc++abi.dylib: terminate called throwing an exception 
```

我的问题是如何找出`call stack`控制台中的消息并找出导致问题的代码行？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T07:33:41.743

您需要添加一个异常断点。打开*Xcode* ->*导航器*->*断点*（快捷键 Cmd+6）。在左下角，有一个 + 号，单击它并选择“添加异常断点...”，然后选择“完成”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:44:05.333

通常会给您一个符号 stracktrace 以找出异常的来源。其他替代方法是设置您自己的异常处理并使用`backtrace`和朋友（[手册页](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/backtrace.3.html)）提供符号堆栈跟踪，当涉及到确定生产代码中发生崩溃的位置时，通常会剥离符号，有`atos`实用程序（[手册页](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/backtrace.3.html)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T07:48:00.293

在控制台中，您可以键入“bt”进行回溯，您将看到最后一次调用。但是对于某些错误，它不会显示，所以添加一个异常断点，因为 Grager 提到

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T08:36:43.653

打开xcode“隐藏或显示调试区域”

然后从该菜单中选择“仅显示控制台”按钮

现在当错误出现时找到符号**（lldb）** 并在它旁边输入**bt**

# r - 有没有使用 R 访问 Google Analytics v3 的方法？

> ID：13356919
> 
> 赞同：2
> 
> 时间：2012-11-13T07:25:42.357
> 
> 标签：r, google-analytics

我正在搜索一种新的 R 方法来访问 Google Analytics v3，因为以前的脚本不再起作用。

我找不到任何有用的信息，所以如果有人使用 R 访问 GA v3，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T10:03:10.400

我发现[Keplar](http://www.keplarllp.com/blog/2012/01/using-google-analytics-export-to-csv-a-step-by-step-guide)是解决类似问题的可行解决方案（利用 R 记录在 GA 中的数据）这对我来说至少是暂时的。实际上，Keplar 是一个用 Java 编写的查询工具，它很容易嵌入到我的流程中。直到这个解决方案，我已经检查了许多其他想法（来自 GA 的 Python API、其他 GA API 等）这个小工具对我帮助很大，希望你也一样。:)

# web - 如何获取图片/css风格，下载的WebEngine

> ID：13356920
> 
> 赞同：1
> 
> 时间：2012-11-13T07:25:59.607
> 
> 标签：web, resources, javafx

我正在使用以下代码下载和呈现网页。

```
public class SwingFXWe extends Application {
public final WebEngine webEngine=null;

@Override
public void start(Stage stage) {

    stage.setTitle("HTML");
    Scene scene = new Scene(new Group());

    VBox root = new VBox();

    final WebView browser = new WebView();
    final WebEngine webEngine = browser.getEngine();

    String text = null;
    BufferedReader reader = null;
    String html="";
    try {
         FileInputStream fis = new FileInputStream("C:\\D.htm");
         InputStreamReader isr = new InputStreamReader(fis, "windows-1251");
    reader = new BufferedReader(isr);
    while ((text = reader.readLine()) != null) {
        html+=text+"\n";
    }
    }
    catch (Exception e) {
        // TODO: handle exception
    }

    webEngine.loadContent(Jsoup.parse(html).html());
    root.getChildren().addAll(browser);
    scene.setRoot(root);
    stage.setScene(scene);
    stage.show();
}

public static void main(String[] args) {
    launch();
}
} 
```

我可以从 webEngine 容器中获取图像和样式来更改它们吗？

# c# - 使用 dispose/finalize 模式释放 socket/event/ummaged 代码的正确技术

> ID：13356924
> 
> 赞同：8
> 
> 时间：2012-11-13T07:26:30.090
> 
> 标签：c#, sockets, dispose, unmanaged, finalize

当我的类包含套接字和事件时如何实现 Dispose 模式？

应该是这样的吗？

```
class MyClass
{
   Socket m_ListenerSocket = new Socket();
   book m_Disposed=false;

   public void Dispose()
   {
      Dispose(true);
      GC.SuppressFinalize(this);
   }

   private void Dispose(bool isDisposing)
   {
      if (!m_Disposed)
      {
          if (isDisposing)
          {
              if (m_ListenerSocket != null)
              {
                   m_ListenerSocket.Dispose();
                   innerClass.Notify -= Notify;
              }
          }
        //finalized unmanged code here
        m_Disposed = true;
      }
  }

  ~MyClass()
  {
       Dispose(false);
  }
} 
```

我很困惑......套接字类是“托管代码c#版本的winSock”吗？所以它应该在用户调用 dispose 的情况下被释放（“isDisposing IS true”）事件处理程序呢？

所以在最终的评论部分应该只释放 Inptr 对象？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T07:43:15.660

我认为有很多方法可以处理一次性对象，无论它们是否有事件。

只是一个疯狂的猜测，但是如果你从 .net 框架中获取一个类并且这个类有一个 Dispose() 方法，你几乎可以说它是托管代码，所以你可以安全地调用 Dispose 方法而不是自己创建析构函数。这是相当普遍的，因为正如您在下面的示例中看到的那样，您还可以在自己的类中实现 IDisposable 接口，然后以适当的方式处理您的内部对象。

这对您有帮助吗？

```
public class MyClassWithSocket :IDisposable 
{

    Socket myInternalSocket = null;

    public void methodThatUsesSocket()
    {
        using (var mySocket = new Socket(AddressFamily.InterNetworkV6, SocketType.Stream , ProtocolType.Tcp))
        {
        //do something with socket 
        //this will be disposed automatically

        }
    }

    public void methodThatUsesInternalSocket() 
    {
        myInternalSocket = new Socket(AddressFamily.InterNetworkV6, SocketType.Stream, ProtocolType.Tcp);
        //do other things
    }

    public static Socket SomethingThatReturnsSocket()
    {

        Socket tempSocket =  new Socket(AddressFamily.InterNetworkV6, SocketType.Stream, ProtocolType.Tcp);

        return tempSocket;
    }

    public void Dispose()
    {
        myInternalSocket.Dispose();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T10:28:27.167

由于 Socket 是一个托管类，[因此实现指南`IDisposable`](https://stackoverflow.com/questions/11507632/net-object-events-and-dispose-gc)表明不需要终结器。事实上，拥有终结器实际上会导致对象的垃圾收集延迟，因为它会在第一次垃圾收集期间调用终结器，而在第二次运行垃圾收集时对对象进行垃圾收集。

关于事件，您可能希望从`Dispose`方法中的事件中注销，因为事件订阅将导致`innerClass`持有对 的实例的引用`MyClass`，除非 innerClass 对象是短暂的。有关事件和处置的更多信息，请参阅[此问题](https://stackoverflow.com/questions/11507632/net-object-events-and-dispose-gc)。

我认为以下实现足以满足您的场景：

```
class MyClass : IDisposable
{
   Socket m_listenerSocket = new Socket();

   public void Dispose()
   {
       m_listenerSocket.Dispose();
       innerClass.Notify -= Notify; 
   }
} 
```

你的代码中你用“finalized unmanged code here”注释的部分应该只释放非托管资源，例如形式的句柄`IntPtr`等。自从[`SafeHandle`](http://blogs.msdn.com/b/bclteam/archive/2005/03/16/396900.aspx)在.NET 2.0中引入以来，你很少需要这样做，因为你可以将您包装`IntPtr`在 a 中`SafeHandle`，然后将其视为托管资源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-17T09:52:42.737

## 你绝不能让任何事情不被肯定。

以我的经验，广泛使用的*“软错误”* `Dispose(disposing)`机制是错误的。我更喜欢*“硬错误”*。

当我编写实现的对象时，`Dispose()`我通常会扩展一个`MyDisposable`类，该类`#if DEBUG`执行以下操作：

1.  它的构造函数捕获当前堆栈跟踪并将其保存以备后用。（注意：这*非常*慢，微软只知道为什么。）
2.  该类包含一个`bool disposed`初始化为 的成员`false`。
3.  `Dispose()` ***断言***该对象尚未被处置，然后将该对象标记为已处置。
4.  对象的析构函数（在完成时调用）检查对象是否已被释放，如果没有，则转储创建期间记录的堆栈跟踪。这使我可以在我的源代码中找到分配了一次性对象但忘记处置它的确切位置。

***此外，从断言***派生的对象`MyDisposable`通常作为每个方法的前提条件，甚至是每个 getter。 *`!disposed`*

 *以上保证：

1.  只有一种方式可以处理对象。
2.  每个一次性物品将被处理一次且仅一次。
3.  一次性对象的任何方法都不会在对象被释放后被调用。
4.  如果我忘记处理一次性对象，我会找出来，并且我会确切知道它被分配到哪里。

不言而喻，如果不是，`#DEBUG`则`MyDisposable`编译几乎没有，以免影响性能。

因此，我尽量避免（在实际情况下）使用实现*“软错误”* `Dispose(disposing)`机制的类，而不首先将它们包装在实现我的*“硬错误”* `Dispose()`机制的类中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-17T10:16:52.833

现有的答案已经说了，但它们相当冗长。让我更清楚地说明这就是您所需要的：

```
public void Dispose(){
    m_ListenerSocket.Dispose();
} 
```

这不是删节的。您可以删除其他所有内容。

不需要终结器。不需要空测试。您可以安全地多次处理。

“处置模式”存在于可终结的对象（非常罕见）和继承（罕见）。这种模式几乎总是无济于事，反而会损害代码质量。*

# sql-server - T-SQL根据特定坐标计算1.0的经度值

> ID：13356929
> 
> 赞同：-1
> 
> 时间：2012-11-13T07:26:54.910
> 
> 标签：sql-server, algorithm, tsql, latitude-longitude, degrees

正如我[在这里](http://www.zodiacal.com/tools/lat_table.php)显示的那样，当我们移动到两极时，经度一度的值（多少公里）会减小。我需要一种算法来计算一个经度对于给定点（经度和纬度）的当前公里。

预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:57:58.913

这实际上比你想象的要难，但谷歌会帮助解决棘手的问题。

但是，基本上你可以使用这个的一些变体：

```
declare @radius as float;
declare @latitude as float;
declare @circumference float;

set @radius = 6378 -- in km
set @latitude = 0 -- 0 = equator : 90 = pole

set @circumference = 2 * pi() * @radius * cos(radians(@latitude))

select @circumference
select (@circumference / 360) as km
select (@circumference / 360) / 1.609344 as miles 
```

我提到的棘手部分是地球不是几何球体，也不是完全平坦的事实——但上述内容非常大致正确，例如，您可以使用更准确的半径。

**编辑：**

或者，如果您有 SQL 2008（或更高版本），则可以使用“geography”数据类型和 STDistance() 函数。

```
declare @p1 geography = geography::STPointFromText('POINT(1 ' + cast(@latitude as varchar(10))+')', 4326)
declare @p2 geography = geography::STPointFromText('POINT(2 ' + cast(@latitude as varchar(10))+')', 4326)

SELECT @p1.STDistance(@p2); -- this is in metres 
```

在上面的例子中，它找到了同一纬度的两点之间的距离，但在经度为 1° 和经度为 2° 时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T13:47:56.460

为了计算特定地理点的经纬度长度是多少米，我使用以下算法：

```
-- Geograpic Point Cordinates
DECLARE @LATTIDUDE REAL=45
DECLARE @LONGITUDE REAL=45
DECLARE @Distance REAL=10

-- Constants
DECLARE @ConvertionConstant AS FLOAT=2*PI()/360
DECLARE @MetersPerDegree AS FLOAT

DECLARE @LattidueInRadians AS FLOAT=@ConvertionConstant*@LATTIDUDE

DECLARE @LongitudeParameter1 AS FLOAT=111412.84
DECLARE @LongitudeParameter2 AS FLOAT=-93.5 
DECLARE @LongitudeParameter3 AS FLOAT=0.118

SET @MetersPerDegree=(@LongitudeParameter1*COS(@LattidueInRadians))+(@LongitudeParameter2*(COS(3*@LattidueInRadians)))+(@LongitudeParameter3*COS(5*@LattidueInRadians))
DECLARE @LongitudeRangeTemp AS FLOAT=@Distance/(@MetersPerDegree/1000)

-- Results for longitude
SELECT @LongitudeRangeTemp AS DegreesForGivenKM
SELECT @MetersPerDegree    AS MetersPerDegreeOfLongitude

-- Constants
DECLARE @LatitudeParameter1 AS FLOAT=111132.92
DECLARE @LatitudeParameter2 AS FLOAT=-559.82
DECLARE @LatitudeParameter3 AS FLOAT=1.175
DECLARE @LatitudeParameter4 AS FLOAT=-0.0023

-- Results for longitude
SET @MetersPerDegree=(@LatitudeParameter1+(@LatitudeParameter2*COS(2*@LattidueInRadians))+(@LatitudeParameter3*COS(4*@LattidueInRadians))+(@LatitudeParameter4*COS(6*@LattidueInRadians)))
DECLARE @LatitudeRangeTemp AS FLOAT=@Distance/(@MetersPerDegree/1000)
SELECT @LatitudeRangeTemp AS  DegreesForGivenKM
SELECT @MetersPerDegree   AS  MetersPerDegreeOfLatitude 
```

为公里添加了一个附加参数 - 代码将计算多少度等于给定的公里。

您可以自由地在函数中实现代码。

# javascript - Knockoutjs 映射 - 没有初始数据

> ID：13356939
> 
> 赞同：3
> 
> 时间：2012-11-13T07:27:47.540
> 
> 标签：javascript, asp.net-mvc, knockout.js, knockout-mapping-plugin

使用 knockoutjs，我正在尝试映射大量复杂的数据。我正在使用显示模块模式。

为了使对象的所有元素都可观察，我使用了映射插件。但是，我遇到了一个问题：我在任何地方都找不到使用 ko.mapping.fromJS() 的示例，其中一些初始数据*未*映射到 viewmodel 对象上，而是稍后映射 - 在我的情况下 -已进行 ajax 调用并检索了一些数据。也就是说，我没有任何初始数据，因此需要初始映射充满空值、空值或默认值。

这是任何地方唯一相关的信息

[Knockout JS映射插件没有初始数据/空表单](https://stackoverflow.com/questions/6735225/knockout-js-mapping-plugin-without-initial-data-empty-form)

但这并不能真正解决同样的问题——或者至少，我不能让它解决同样的问题。

这大概是我得到的代码。

```
var viewModel = function(){
    var farmyard = *** What?? ***;

    var refreshData = function(){
        var temp = null;
        $.ajax(
            // awesome server call etc
            success: function(data){
                temp = data;
            }
        );
        ko.mapping.fromJS(temp, farmyard);
    };

    return{
            farmyard: farmyard,
            refreshData: refreshData
        }
};

$(function(){
   var vm = new viewModel();
   ko.applybindings(vm);

   $('#something).on('click',function(){
       vm.refreshData();
   });
}); 
```

所以，我的问题是，这个对象的初始负载是什么农场？目前我不得不设置空对象来完成这项工作，手动编码每个对象的每个元素，并且如前所述，被映射的对象层次结构庞大而复杂，所以这并不理想。非常感谢任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T08:18:28.260

我通过将空数据模型作为 ViewBag 属性的一部分发送到视图（这是 .NET MVC）并使用名为 Ngon 的库（https://github.com/brooklynDev/NGon）解决了这个问题。

```
public ViewREsult Index()
{
    var massiveDataModel = new MassiveDataModel();

    ViewBag.NGon.Stuff = massiveDataModel;

    return View();
} 
```

在脚本中：

```
var viewModel = function(){
var farmyard = ko.mapping.fromJS(ngon.Stuff);

var refreshData = function(){
    var temp = null;
    $.ajax(
        // awesome server call etc
        success: function(data){
            temp = data;
        }
    );
    ko.mapping.fromJS(temp, farmyard);
};

return{
        farmyard: farmyard,
        refreshData: refreshData
    }
};

    $(function(){
       var vm = new viewModel();
       ko.applybindings(vm);

       $('#something).on('click',function(){
           vm.refreshData();
       });
    }); 
```

忙于尝试以某种方式解决问题，看不到明显的解决方案。感谢 Tyrsius 的不同观点。

# jquery - 我只是想在 photocrati wp 主题中将购物车发送到电子邮件

> ID：13356940
> 
> 赞同：0
> 
> 时间：2012-11-13T07:27:47.650
> 
> 标签：jquery, wordpress, wordpress-theming, shopping-cart, email

我正在使用一个 Photocrati WordPress 主题，它只有一个重定向到 PayPal 的结帐过程。我创建了一个新按钮，但我需要它来调用不同的操作，将购物车的内容发送到特定的电子邮件并将用户重定向到感谢页面，而无需支付网关，例如 PayPal。即使我成功创建了按钮，我也不知道如何完成这项工作，仅此而已。这似乎很简单，因为所有的价值都在那里，任何帮助或指导将不胜感激。Photocrati Themes 将 jQuery 和 php 组合用于购物车。购物车页面是一个 WordPress 模板页面文件，但这里是 sendcart.php（从模板页面文件调用的操作文件）：

```
define('ABSPATH', dirname(dirname(dirname(dirname(__FILE__)))).'/');
include_once(ABSPATH.'wp-config.php');
include_once(ABSPATH.'wp-load.php');
include_once(ABSPATH.'wp-includes/wp-db.php');
global $wpdb;

// read the post from PayPal system and add 'cmd'
$req = 'cmd=_notify-validate';

foreach ($_POST as $key => $value) {
$value = urlencode(stripslashes($value));
$req .= "&$key=$value";
}

// post back to PayPal system to validate
$header .= "POST /cgi-bin/webscr HTTP/1.0\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n\r\n";
$fp = fsockopen ('ssl://www.paypal.com', 443, $errno, $errstr, 30);

// assign posted variables to local variables
$firstName = $_POST['first_name'];
$lastName = $_POST['last_name'];
$email = $_POST['payer_email'];

if (!$fp) {
// HTTP ERROR
} else {
fputs ($fp, $header . $req);
while (!feof($fp)) {
$res = fgets ($fp, 1024);
if (strcmp ($res, "VERIFIED") == 0) {
// check the payment_status is Completed
// check that txn_id has not been previously processed
// check that receiver_email is your Primary PayPal email
// check that payment_amount/payment_currency are correct
// process payment
}
else if (strcmp ($res, "INVALID") == 0) {
// log for manual investigation
}
}
fclose ($fp);
}

$admin_info = get_userdata(1);
$admineaddr = get_option('admin_email');

if (isset($admin_info->user_email) && $admin_info->user_email != null)
{
    $admineaddr = $admin_info->user_email;
}

// Send thank you email/receipt
$p_date = date("M d, Y");
$subject = "Thank you for your purchase!";
$message = "Thank you for your purchase! A notification will be sent to you by PayPal with the transaction details.";
$headers = "From: ".$admineaddr."\r\n";
$headers .= "Return-Path: ".$admineaddr."\r\n";

mail($email, $subject, $message, $headers);

$subject2 = "New Sale";
$message2 = "A new sale has been made:
Name: ".$firstName." ".$lastName."
Email: ".$email."";                         
$headers2 = "From: ".$admineaddr."\r\n";
$headers2 .= "Return-Path: ".$admineaddr."\r\n";

mail($admineaddr, $subject2, $message2, $headers2);

/* IMPORTANT! This code empties the entire cart! */
unset($_SESSION['cart']);
unset($_SESSION['cart_qty']);
?> 
```

请帮忙！！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:39:08.830

我想我会加入，因为我在 Photocrati 工作 - 我们正在开发 NextGEN Gallery Pro，它将无缝集成到 Photocrati 5 中。未来的更新将包括一个具有更多功能的电子商务系统，包括多种支付选项。

# android - 应用暂停时的 onTouchEvent

> ID：13356941
> 
> 赞同：2
> 
> 时间：2012-11-13T07:27:52.777
> 
> 标签：android, touch-event

当我的应用程序处于“onPause”或“onStop”状态时，如何继续接收 onTouchEvent？
换句话说，我想知道我的应用程序在后台运行时是否做出了 ACTION_DOWN 或类似的手势。当然，当我退出应用程序时，它应该不起作用。有人可以帮我吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:34:52.720

我不知道是否有一个通用的系统机制可以用于此目的，但它不适用于正常的 onTouchEvent。此事件分配给一个视图 - 当您的应用暂停或停止时，此视图将不可见。因此，我想您必须寻找某种系统事件，而没有分配给 App-local 视图的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T07:37:24.907

创建一个[TYPE_SYSTEM_OVERLAY](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#TYPE_SYSTEM_OVERLAY)类型的窗口。为此，您需要额外的权限。此窗口将接收触摸事件。

**更新：**这似乎只在以前有效：[ICS中的TYPE_SYSTEM_OVERLAY](https://stackoverflow.com/questions/9656185/type-system-overlay-in-ics/9656233#9656233)

# sql - 将 sql 查询覆盖到 Arel

> ID：13356943
> 
> 赞同：0
> 
> 时间：2012-11-13T07:27:55.740
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, arel

如何将以下 sql 查询转换为 Arel？

```
SELECT 
  SUM(
    LEAST(
      SPONSORSHIPS.AMOUNT_PER_LAP * (
        SELECT 
          SUM(LAPS.POINTS) 
        FROM 
          LAPS 
        WHERE 
          LAPS.CAMPAIGN_ID = :j_id
      ),
      SPONSORSHIPS.MAX_AMOUNT
    )
  ) 
FROM 
  SPONSORSHIPS 
WHERE 
  SPONSORSHIPS.CAMPAIGN_ID = :j_id; 
```

有3个表/模型。`jogathons`, `sponsorships`, 和`laps`. `:j_id`是jogathon id。

# jquery - 在 Rails 应用程序中将 JQuery Themeroller 文件放在哪里？（观点不变）

> ID：13356946
> 
> 赞同：0
> 
> 时间：2012-11-13T07:28:12.277
> 
> 标签：jquery, html, ruby-on-rails, jquery-ui, jquery-mobile

我从 JQuery Mobile Themeroller 网站下载了包含自定义主题的 zip 文件。

压缩包包含：

* * *

**主题目录**（以下是此目录中的内容）

*   图片目录
    Example.css
    Example.min.css

**Index.html（我认为只是说明）**

* * *

我不知道在哪里放置 css 文件和图像目录以使主题工作。

我尝试将它们放在 app/assets/stylesheets 和 public/stylesheets 中，但我的页面没有更改以匹配主题。

也许我没有正确引用页面。

```
<head>
      <meta name="viewport" content="width=device-width, initial-scale=1">

      <link rel="stylesheet" href="themes/Example.css" />
      <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile.structure-1.2.0.min.css" />
      <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
      <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T07:33:39.233

[资产组织](http://guides.rubyonrails.org/asset_pipeline.html#asset-organization)

所以你需要把它放在里面`vendor/assets`并包含在里面`app/assets/stylesheets/application.css`

```
*= Example.min 
```

或者

```
*= Example 
```

# javascript - 按原始顺序解析 XML

> ID：13356953
> 
> 赞同：1
> 
> 时间：2012-11-13T07:29:07.147
> 
> 标签：javascript, jquery, xml, xml-parsing

我正在使用 jquery 解析 xml。我附上了一张图片，显示了我想要解析的那种 xml。如您所见，它有几个标签，但我需要按照图像中出现的顺序解析以下内容。

```
ROUTE
   LENGTH time dist
   WALK  time dist
   LINE  code
      STOP                   //<--- this stop means all stops in this line tag
         NAME val            //<--- val of every stop inside line tag
      STOP                   //<--- this stop means all stops in this line tag
         NAME val            //<--- val of every stop inside line tag
      STOP                   //<--- this stop means all stops in this line tag
         NAME val            //<--- val of every stop inside line tag
   LINE code
      STOP                   //<--- this stop means all stops in this line tag
         NAME val            //<--- val of every stop inside line tag
      STOP                   //<--- this stop means all stops in this line tag
         NAME val            //<--- val of every stop inside line tag
      STOP                   //<--- this stop means all stops in this line tag
         NAME val            //<--- val of every stop inside line tag
   WALK time dist 
```

注意：可能有 1、2 或多于 2 个 LINES 标签。

我当前的代码确实显示了数据，但只有一个，即第一行，并且只有该行内的第一个 STOP。那么如何解析这个 xml 以便可以在 XML 中显示它呢？

这是我的代码

```
 parseXMLForRoute = function (xmlObject) {
    var xmlObj = $(xmlObject).find('ROUTE');

    xmlObj.each(function () {
        var el          = $(this),
            startTime   = el.find('WALK').find('LENGTH').attr('time'),
            distance    = el.find('WALK').find('LENGTH').attr('dist'),
            routeTime   = el.find('LENGTH').attr('time'),
            routeDist   = el.find('LENGTH').attr('dist'),
            busNumber   = el.find('LINE').attr('code').slice(1, 4),
            busStops    = el.find('LINE').find('STOP').find('NAME').attr('val');

        container.append(createDOMElement('h4', '', '', 'Departure'))
                 .append(createDOMElement('p', '', '', from))
                 .append(createDOMElement('p', '', '', "Route Time: " + routeTime))
                 .append(createDOMElement('p', '', '', "Route Dist: " + routeDist))
                 .append(createDOMElement('section', '', '', 'WALK PIC'))
                 .append(createDOMElement('p', '', '', "Walk Time: " + startTime))
                 .append(createDOMElement('p', '', '', "Walk Dist: " + distance))
                 .append(createDOMElement('p', '', '', 'BUS PIC'))
                 .append(createDOMElement('p', '', '', "Bus Number: " + parseLineNumbers(xmlObj)))
                 .append(createDOMElement('p', '', '', "Bus Stops: " + busStops));

        //console.log($(this).find('WALK'));
    });
    console.log($(xmlObject));
},

parseLineNumbers = function (xmlObject) {
    console.log('len: ' + $(xmlObject).find('LINE').length);
    $(xmlObject).find('LINE').each(function () {
        console.log($(this).attr('code').slice(1, 4));
    });
    //console.log($(xmlObject).find('LINE').attr('code').slice(1, 4));
},

createDOMElement = function (tagName, classs, id, data) {
    return '<' + tagName + ' class="' + classs + '" id="' + id + '">' + data + '</' + tagName + '>';
} 
```

这是xml

![在此处输入图像描述](../Images/b5869bc388d05690f9803fa7b3eae93a.png)

**更新**

我想要输出类似于下面的内容

```
Starting street address
WALK this amount of distance(e.g. 1 meter) for some time(e.g. 1 min)
STOP name // after walking then user reached to this stop
code // code attribute inside LINE tag which is a bus number
then display the name and times of all stops in this LINE
code // code attribute inside SECOND LINE
then display all the stops name and times in this second LINE
then walk for some distance(e.g. 1 meter) and some time(e.g. 1 min)
Destination address 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:21:31.143

您需要遍历公交线路和公交车站内的每条公交线路。我希望这会引导您朝着正确的方向前进。

```
parseXMLForRoute = function (xmlObject) {    
    var route = $(xmlObject).find('ROUTE');
    route.each(function() {
        var el = $(this);
        var startTime = el.find('WALK').find('LENGTH').attr('time');
        var distance = el.find('WALK').find('LENGTH').attr('dist');
        var routeTime = el.find('LENGTH').attr('time');
        var routeDist = el.find('LENGTH').attr('dist');
        var lines = el.find('LINE');

        container.append(createDOMElement('h4', '', '', 'Departure'))
            .append(createDOMElement('p', '', '', from))
            .append(createDOMElement('p', '', '', "Route Time: " + routeTime))
            .append(createDOMElement('p', '', '', "Route Dist: " + routeDist))
            .append(createDOMElement('section', '', '', 'WALK PIC'))
            .append(createDOMElement('p', '', '', "Walk Time: " + startTime))
            .append(createDOMElement('p', '', '', "Walk Dist: " + distance))

        // now iterate over every bus line
        lines.each(function() {
           var el = $(this);
           var busCode = el.attr('code').slice(1,4);
           container.append(createDOMElement('p', '', '', 'BUS PIC'))
               .append(createDOMElement('p', '', '', 'Bus Number: ' + busCode));
           var stops = el.find('STOP');
           var stops_list = []; // this will hold bus stop names

           // now iterate over every bus stop 
            stops.each(function() {
               var el = $(this).find('NAME'); 
               stops_list.push(el.attr('val'));
            });
            container.append(createDOMElement('p', '', '', 'Bus Stops: ' + stops_list.join(',')));
        });
    });​
} 
```

**注意：**如果`.find()`匹配多个元素，则返回一组匹配的元素。例如`el.find('WALK')`在上面的例子中实际上包含两个元素：

```
el.find('WALK')[0].find('LENGTH').attr('time') == 3.540
el.find('WALK')[1].find('LENGTH').attr('time') == 1.743 
```

如果您不指定索引，您将处理第一个元素

```
el.find('WALK').find('LENGTH').attr('time') == 3.540 
```

# java - JPA：在加入之前过滤数据

> ID：13356963
> 
> 赞同：0
> 
> 时间：2012-11-13T07:30:31.967
> 
> 标签：java, jpa

我有一个经典的 User <-> Membership <-> Group 关系：

```
@Entity
public class User
{
    @Id
    private Long id;
    private String name;
    @OneToMany(mappedBy = "user")
    private List<Membership> memberships
}

@Entity
public class Group
{
    @Id
    private Long id;
    private String name;
    @OneToMany(mappedBy = "group")
    private List<Membership> members;
}

@Entity
public class Membership
{
    @Id private Long id;
    private String status;
    @ManyToOne private User user;
    @ManyToOne private Group group;
} 
```

现在我对所有现有组感兴趣，此外还想知道特定用户的会员状态（如果存在）。结果应该是 Group 和 Membership 对象的元组（或 Group 对象，如果特定用户不存在 Membership，则为 null）。在 SQL 中类似于

```
select g.*, m.* from `group` g left join membership m on g.id = m.group_id and m.user_id = 1 
```

请注意加入谓词中的附加限制`and m.user_id = 1`，该限制在加入之前为我感兴趣的会员状态的用户过滤数据。

我似乎找不到用 JPA 做到这一点的方法。据我所知，JPA 无法在连接中进行子选择，并且无法直接在 JPQL 中编写类似上述内容。

看来我在这里完全走错了路，如果有对此有新看法的人能给我指点，我将不胜感激。

**更新：**

[JSR 338](http://jcp.org/en/jsr/detail?id=338) (JPA 2.1)似乎会增加对 ON 条件的支持。在那之前，我该如何解决这个限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:14:42.193

如果您使用的是 EclipseLink，则 EclipseLink 2.4 支持 ON 子句，

[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#ON](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#ON)

否则，您可以使用本机 SQL 查询。

# sql - 选择条件下的月份范围

> ID：13356964
> 
> 赞同：0
> 
> 时间：2012-11-13T07:30:33.697
> 
> 标签：sql, sql-server-2008

我有三个表，我将这三个表加入一个列字段`Account_Number`。我在这三个表中有另一个字段，称为`Month`type `nvarchar(20)`，在该列中插入的月份名称为`(January, March , April,...)`。

我需要`Year-To-Date`通过选择月份范围（从一月）到当前月份（十一月）来获得 A 值。我试图将该月列转换为`Datetime`类型。但这没有用，即使我尝试将月份名称转换为月份编号，即使那样也无济于事。

知道如何编写此查询。

注意：我根本无法更改或使用月份列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:01:47.017

尝试

```
select month
    from months
    where CONVERT(datetime,'1-'+month+'-2012') <= GETDATE() 
```

# c# - SQL 密码策略过期

> ID：13356965
> 
> 赞同：0
> 
> 时间：2012-11-13T07:30:34.077
> 
> 标签：c#, asp.net, sql, sql-server-2008

我敢肯定，以前一定有人遇到过这个问题。我在一个组织工作，审计要求我们开发人员在我们的应用程序中强制执行密码策略。我们创建了 SQL 登录并强制执行密码策略。我们最近遇到的问题是密码过期时，SQL 管理员必须手动解锁每个登录。
用户抱怨他们没有得到任何提醒他们应该更改密码。
我们怎样才能实现这个目标？我们想要的是能够强制执行密码策略（密码长度、到期）并能够在密码到期前至少 15 天通知用户

编辑 1
我的应用程序是基于桌面的，也是基于网络的。基于桌面的应用程序使用 SQL 登录来验证自己，而 asp.net Intranet 网站使用由 ASP.NET 网站管理工具创建的用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T07:43:40.530

作为 SQL 代理作业或 SSIS 包的一部分（如果您需要更复杂的处理），您可以使用此脚本来获取用户密码何时到期：

```
USE [master]
GO
SELECT [name] AS [sa]
      ,LOGINPROPERTY([name], 'PasswordLastSetTime') AS [PasswordLastResetDT]
      ,DATEDIFF(DAY, CONVERT([datetime],LOGINPROPERTY([name],'PasswordLastSetTime')),GETDATE()) AS [DaysUntilExpiration]
      ,LOGINPROPERTY([name], 'BadPasswordCount') AS [BadPasswordCount]
      ,LOGINPROPERTY([name], 'BadPasswordTime') AS [BadPasswordDT]
      ,LOGINPROPERTY([name], 'HistoryLength') AS [HistoryLength]
      ,LOGINPROPERTY([name], 'IsExpired') AS [IsExpired]
      ,LOGINPROPERTY([name], 'IsLocked') AS [IsLocked]
      ,LOGINPROPERTY([name], 'IsMustChange') AS [IsMustChange]
      ,LOGINPROPERTY([name], 'LockoutTime') AS [LockoutTime]
FROM [sys].[sql_logins]
GROUP BY [name] 
```

之后，您需要以某种方式关联用户名和他们的密码，并在密码过期之前发送电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:37:02.627

好的，您可以通过此查询选择登录

```
select * from sys.sql_logins where is_expiration_checked=1 
```

然后检查[LOGINPROPERTY](http://msdn.microsoft.com/en-us/library/ms345412.aspx)以获取`DaysUntilExpiration`. 只需提供一项服务，该服务将每天检查密码并通过电子邮件通知用户。

# java - 具有可定制内容的 JSF 迭代复合组件

> ID：13356967
> 
> 赞同：3
> 
> 时间：2012-11-13T07:30:48.003
> 
> 标签：java, jsf, jsf-2, composite-component

我想创建一个复合组件，可以将迭代元素的实际布局传递给复合组件。这是一个简化的示例并且有效：

```
<composite:interface>
    <composite:attribute name="value"/>
</composite:interface>

<composite:implementation>
    <ul>
        <c:forEach var="i" items="#{cc.attrs.value}">
            <li>
                <h:outputText value="Test #{i.name}"/>
            </li>
        </c:forEach>
    </ul> 
```

但我不希望`h:outputText`在组件中硬编码。使用该组件时，我试图拥有这样的东西：

```
<my:list var="user" value="#{myBean.userList}">
  <h:outputText value="Test #{user.name}"/>
</my:list> 
```

假设我必须使用 a `var`，但我不知道如何在我的组件中处理它*并*正确访问孩子`<h:outputText value="Test #{user.name}"/>` 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T08:33:09.877

您可以使用`<composite:insertChildren />`能够将定义的子组件“传递”给您的复合组件定义。另外我推荐使用`<ui:repeat>`代替，`<c:forEach>`因为它是一个真正的迭代组件，更适合 JSF。这是一个如何实现组件的示例：

```
<composite:interface>
    <composite:attribute name="value"/>
</composite:interface>

<composite:implementation>
  <ul>
     <ui:repeat var="item" value="#{cc.attrs.value}">
       <li>
           <composite:insertChildren />
       </li>
     </ui:repeat>
  </ul>
</composite:implementation> 
```

用法：

```
<my:list value="#{myBean.userList}">
  <h:outputText value="Test #{item.name}"/>
</my:list> 
```

# c# - 为什么我得到这个异常？

> ID：13356969
> 
> 赞同：-1
> 
> 时间：2012-11-13T07:30:50.063
> 
> 标签：c#, winforms, exception

我正在尝试通过 Windows 表单反转字符串，但由于任何原因，`for`循环在我执行代码时给出异常。

> System.NullReferenceException：对象引用未设置为对象的实例

**Button_Click 事件**

```
string input=textBox1.Text;
input=Convert.ToString(Console.ReadLine());
string output="";

if(textBox1.Text=="")
{
    MessageBox.Show("Sorry! You have not given any input for perform action");
}
else
{
    try{

        for(int i=input.Length-1; i>=0; i--)
        {
            output= output+input[i];
        }

            textBox2.Text=output;
            }

        catch(Exception ex)
        {
            MessageBox.Show(""+ex);
        }
    }
 } 
```

虽然相同的逻辑与控制台应用程序完美配合。我知道我缺少非常基本的东西，但目前我没有想法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-13T07:32:41.107

在 winform 中，`Console.ReadLine()`返回`null`（因为*没有 console*）。同样，`Convert.ToString((string)null)`返回`null`. 而且您不能`.Length`在`for`. `null`关键代码片段：

```
input=Convert.ToString(Console.ReadLine());
...
for(int i=input.Length-1; i>=0; i--) 
```

另外，作为一个小问题：通过连接建立一个字符串是非常低效的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T07:41:53.583

马克正确地指出了你的错误。但我也将您的代码重构为（据我所知，您希望将反向输入放入 textBox2）：

```
string input = textBox1.Text;

if(String.IsNullOrWhiteSpace(input))
{
    MessageBox.Show("Sorry! You have not given any input for perform action");
    return;
}

textBox2.Text = new String(input.Reverse().ToArray()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T07:34:37.430

我认为应该是：

```
output += input[i]; 
```

一个简单的方法就是这个方法

```
public static string ReverseString(string s)
{
    char[] arr = s.ToCharArray();
    Array.Reverse(arr);
    return new string(arr);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T07:40:56.113

`input`可能没有值，或者可能只有一个元素，但您试图通过`input[1]`这意味着它的第二个元素会给您 NullPointer 异常。

```
output= output+input[1]; //I guess you did this by mistake 
```

应该是这样。

```
for(int i=input.Length-1; i>=0; i--)
    {
        output= output+input[i]; //Change '1' with 'i'
    } 
```

希望这能解决问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T07:46:05.507

`Console`为什么要在 WinForms中使用函数？您的问题出在这一行，这会导致其他即将发生的错误。

`input=Convert.ToString(Console.ReadLine());`

以这种方式更改它：

```
string input=textBox1.Text;
input=Convert.ToString(input); //However i don't think you even require this line 
```

# shopify - Shopify API 调用获得 401 错误未授权

> ID：13356973
> 
> 赞同：3
> 
> 时间：2012-11-13T07:31:28.217
> 
> 标签：shopify, http-status-code-401

我正在使用`ShopifyAPIAdapterLibrary.ShopifyAPIClient`类（来自 Shopify lib）来访问商店数据，将 Json API 扔到我的应用程序中。

我的应用程序在上个月运行良好，在发布到 Beta 版本后，我开始收到此错误：

> *远程服务器返回错误：(401) Unauthorized*

似乎 Shopify 已阻止我的应用程序密钥访问 Shopify 商店数据，因为我使用的 API 密钥没有更改，并且我的应用程序在将我的应用程序发布到测试版后立即停止工作......

Shopify 的某个人是否知道我为什么会收到此 (401) 未经授权的错误或如何解决此问题？

问候， 罗伊

# php - Codeigniter：提交ajax表单后如何向用户返回成功/失败消息

> ID：13356978
> 
> 赞同：0
> 
> 时间：2012-11-13T07:32:02.257
> 
> 标签：php, jquery, ajax, codeigniter

我开始掌握 Codeigniter 的窍门，但显然在这里遗漏了一些东西。

我不确定在提交 ajax 表单后如何将数据返回给用户。这是我的代码的相关部分，里面有问题：

**看法：**

```
if (confirm("Are you sure?"))
    {
        var form_data = $('form').serialize();

        $.post("<?php echo site_url();?>" + "/products/update_multiple", (form_data),
// this is what I don't understand: how to populate the variable result with data returned from the model/controller?
           function(result) {
                    $('#myDiv').html(result);
            }
            )
    } 
```

**控制器**：

```
function update_multiple()
{

 $this->load->model('products_model');
 $this->products_model->updateMultiple();
// What goes here, to grab data from the model and send it back to the ajax caller?
} 
```

**型号**：

```
function updateMultiple()
{
// I have a drop down list to select the field to update. The values of the drop down list look like this: "TableName-FieldName". Hence the explode.

    $table_field = explode("-",$this->input->post('field'));
    $table = $table_field[0];
    $field = $table_field[1];

    $data = $this->input->post('data');

    $rows = explode("\n", $data);

    foreach($rows as $key => $row)
    {
        $values = explode(" ", $row);
        $arr[$key]["code"] = $values[0];
        $arr[$key][$field] = $values[1];
    }

   if ($this->db->update_batch($table, $arr, 'code'))
   {
       // Here is the problem. What should I return here, so that it would be sent back to the calling ajax, to populate the result variable?
   }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T07:41:00.623

返回 json

```
 if ($this->db->update_batch($table, $arr, 'code'))
  {
   print json_encode(array("status"=>"success","message"=>"Your message here"));
  } 
```

确认函数中的 jQuery

```
$.ajax({
type: "POST",
url: "<?php echo site_url();?>" + "/products/update_multiple",
data:  $('form').serialize(),
    dataType: "json",
    success: function(content) {
    if (content.status == "success") {
       $('#myDiv').html(content.message);
    } 
        }
    }); 
```

# qt - Qt 中的 DataPtr 是做什么用的？

> ID：13356981
> 
> 赞同：1
> 
> 时间：2012-11-13T07:32:17.280
> 
> 标签：qt

`QVariant::DataPtr`是私人的，昨天我曾经`QBitArray`做过一些工作。有一个函数正在`data_ptr()`返回`DataPtr&`，但我不知道何时以及如何使用此函数。我将返回的数据写入文件并在 ST2 中打开它，显示`SOH`：

```
int main()
{
    QBitArray bit(8);
    bit[5] = true; //--> I tried bit[7] = true; result is `SOH` still
    QFile file("out");
    file.open(QIODevice::WriteOnly);
    QDataStream outs(&file);
    outs << bit.data_ptr();
    file.close();
    return 0;
} 
```

我知道`SOH`是 的意思`Start Of Header`，它被定义为`0x01`(1byte) 用于帧分隔。首先我写了`bit[7]=true;`，所以我认为`bit.data_ptr()`可能是原始数据（二进制中的 00000001），`bit`其中封装了`QBitArray`. 但是当我尝试`bit[5]=true;`在 ST2 中打开文件时，它仍然显示`SOH`. 所以我很困惑。
![在此处输入图像描述](../Images/cd22613d9495327eb21e4911a206efed.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:19:07.413

[DataPtr](http://qt.gitorious.org/qt/qt/blobs/4.8/src/corelib/tools/qbytearray.h#line396)只是一个指向[数据](http://qt.gitorious.org/qt/qt/blobs/4.8/src/corelib/tools/qbytearray.h#line137)结构的指针。该结构是私有的，所以你不应该将它用于任何事情。但是，您可以使用指向它的指针来区分两个字节数组。使用[QBitArray::operator<<()](http://qt-project.org/doc/qt-4.8/qbitarray.html#operator-lt-lt-82)将位数组写入数据流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-25T12:09:28.823

`data_ptr`是指向 的指针`Data`。例如，您可以`data_ptr`用于将 QbitArray 转换为 char*：

```
auto data = bit.data_ptr()->data(); 
```

`data[0]`的大小也是如此`bit`（这里是 8），其他的是 的值`bit`。例如：

```
QBitArray bit(16);
bit[5] = true;
bit[14] = true;
auto data = bit.data_ptr()->data(); 
```

位的值为 0x4020。因此`data[0]`是 16，`data[1]`是 0x20，`data[2]`是 0x40。

# java - 短到十六进制字符串

> ID：13356984
> 
> 赞同：15
> 
> 时间：2012-11-13T07:32:49.360
> 
> 标签：java

有方法`Integer.toHexString()`和`Long.toHexString()`。由于某种原因，他们没有实施`Short.toHexString()`.

将 Short 转换为十六进制字符串的规范方法是什么？

无法使用`Integer.toHexString()`，因为`Integer.toHexString(-33)`equals`ffffffdf`不是一个短值。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-13T07:56:03.970

如果在您的系统`short`中表示为 16Bit，您也可以简单地执行以下操作。

```
String hex = Integer.toHexString(-33 & 0xffff); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T07:50:38.400

**是的，您可以简单地取两个最不重要的字节。**

这是[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)表示的一个基本特征。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T07:45:19.763

您可以将`Integer.toHexString`in 转换为短值的十六进制字符串。

`Integer`属于`32 bit`,`Short`属于`16 bit`. 因此，您只需从`Hex String`for中删除 16 个最高有效位`short value`即可转换为`integer`, 以获得`Hex String`for `Short`。

```
Integer -> -33 = 11111111 11111111 11111111 11011111  == Hex = ffffffdf
Short   -> -33 =                   11111111 11011111  == Hex =     ffdf 
```

因此，只需使用的最后一个`4`字符`Hex String`即可获得所需的内容。

所以，你想要的是： -

```
Short sh = -33;
String intHexString = Integer.toHexString(sh.intValue());
String shortHexString = intHexString.substring(4); 
```

我认为那会奏效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-05T05:30:31.110

这也应该适用于短期

```
UnicodeFormatter.charToHex((char)c); 
```

您可以在此处下载 UniocdeFormatter.java：http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/i18n/text/examples/UnicodeFormatter [。爪哇](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/i18n/text/examples/UnicodeFormatter.java)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T07:42:37.880

这不是最简单的方法，但我可以通过转换为字节数组然后将其转换为十六进制字符串来完成。

```
 short a = 233;
 byte[] ret = new byte[2];

 ret[0] = (byte)(a & 0xff);
 ret[1] = (byte)((a >> 8) & 0xff);

 StringBuilder sb = new StringBuilder();
 for (byte b : ret) {
    sb.append(String.format("%02X ", b));
 } 
```

我认为这几乎可以做到。

# audio - python3音频信号处理

> ID：13356990
> 
> 赞同：4
> 
> 时间：2012-11-13T07:33:23.287
> 
> 标签：audio, module, python-3.x, signal-processing

我正在为我的一个课程做的一个项目是为使用 python3 的孩子构建一个简单的 GUI 声音编辑器（使用 python3 是一个严格的项目要求）。我不希望这个编辑器像 audacity 那样复杂，但我希望有一些有趣的内置效果，类似于 nintendo ds [http://nintendo.wikia.com/wiki/Nintendo_DSi_Sound](http://nintendo.wikia.com/wiki/Nintendo_DSi_Sound)上的声音编辑器。

我一直在研究与 python3 兼容的模块，这将有助于音频信号处理，因为我在这方面非常缺乏经验，但我在寻找可以与 python3 一起使用的东西时遇到了麻烦。我找到了这个伟大的 python 音乐模块列表：[http](http://wiki.python.org/moin/PythonInMusic) ://wiki.python.org/moin/PythonInMusic但似乎具有我认为我想要的功能的所有东西，比如 pyo 和小吃，都没有 python3 兼容性。

我认为此时我最好的选择是使用 NumPy 和 SciPy 进行信号处理，但我想知道是否有人有更好的建议或建议？或者，如果我能熟悉它们，那么使用 NumPy 和 SciPy 是不是一个理想的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T03:25:03.570

NumPy/SciPy 可以处理音频信号，但感觉不是“原生”，因为您必须编写大量接口代码才能将结果数据播放为声音或以某种标准格式（如 .wav）编写。

我建议移植这些模块；它通常非常简单直接，是一个很好的 Python 练习。

# mysql - 如何根据同一张表上另一个查询的结果集执行查询？

> ID：13356995
> 
> 赞同：3
> 
> 时间：2012-11-13T07:33:35.927
> 
> 标签：mysql

可以对多个项目进行请求，唯一的关键是代理 request_id

我有以下查询，它返回 9 位电话号码的结果集

```
SELECT phone_number FROM purchases
WHERE item_type = 'popcorn'
GROUP BY phone_number; 
```

然后，我想检索每个不是“爆米花”的`DISTINCT` `item_type`请求的列表，然后是. IE 我想知道客户倾向于购买哪些类似产品。`phone_number``GROUP BY``item_type`

所需的结果集可能看起来像这样

```
item        COUNT(*)
pretzels    200
chips       150
crackers    125
…           … 
```

在这种情况下`phone_number`，购买爆米花和椒盐脆饼的人数是 200（我对这个值感兴趣）。购买爆米花的人总共购买了 1,000 个椒盐脆饼，但这不是我感兴趣的值。

如何创建一个仅指定`item_type`并检索类似上述结果的单个查询，该结果显示客户还购买了商品？

另外-如果有人可以帮助我制作一个更具描述性的标题，我们将不胜感激。

**编辑**

这是桌子

```
CREATE TABLE purchases(
    request_id BIGINT NOT NULL auto_increment,
    phone_number INT(9) NOT NULL,
    item_type VARCHAR(256) NOT NULL,
    PRIMARY KEY(request_id)
); 
```

**编辑**

根据此数据请求所需的输出[http://www.sqlfiddle.com/#!2/23236/2](http://www.sqlfiddle.com/#!2/23236/2)

```
item        COUNT(*)
cc          1
notpopcorn  1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T07:45:28.513

 ~~~~> 然后，我想检索每个不是“爆米花”的电话号码请求的每个 DISTINCT item_type 的列表，然后按该 item_type 分组。IE 我想知道客户倾向于购买哪些类似产品。~~ 

试试这个：

```
SELECT item_type as item, COUNT(*)
FROM purchases 
WHERE phone_number NOT IN (SELECT DISTINCT phone_number 
                           FROM purchases
                           WHERE item_type = 'popcorn')
GROUP BY item_type; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/98466/1)

 ~~**更新：**试试这个：

```
SELECT item_type as item, COUNT(*)
FROM purchases 
GROUP BY item_type, phone_number
HAVING phone_number IN (SELECT DISTINCT phone_number 
                           FROM purchases
                           WHERE item_type = 'popcorn')
  AND item_type <> 'popcorn'; 
```

## [更新的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!2/23236/7)~~~~

# java - 如何在 for 循环中使用 min(x, y) 计算最小值？取决于用户输入

> ID：13356999
> 
> 赞同：0
> 
> 时间：2012-11-13T07:33:47.463
> 
> 标签：java, for-loop, min

所以我一直试图解决这个问题一段时间。我尝试过的很多事情都失败了。有没有办法添加到我已经拥有的东西上？

```
for(int ii = 1, j = 0; j <= copySel ; ii++, j++) {    
             int check;
             int x, y;
                // Prompt as follows
                System.out.print("Enter value " + ii + ": ");
                try {
                    c = Get();
                }
                catch (InputMismatchException e) {
                    input
                    System.out.println("Invalid input!");
                    ii--;
                }check = c;   
                 x = check; // I want to try to copy this 
                 y = check - 1; // and copy this
                min(x , y) // trying to acheive this

                System.out.println(check + " " + x + " " + y);

        } 
```

对不起格式。这是我的屏幕。

```
Basically let us say user puts in 25 for first input. I want x = 25.
Then user inputs -11\.                                 I want y = -11.
Compare minimum                                       z = -11.
then                                                  x = z = -11;
User input 33\.                                        y = 33
annd so on.. 
```

所以我最终得到了类似的东西

```
for(int ii = 1, j = 0; j <= copySel ; ii++, j++) {    
             int check;
             int x = 0, y = 0, z;
                // Prompt as follows
                System.out.print("Enter value " + ii + ": ");
                try {
                    c = Get();
                }
                catch (InputMismatchException e) {

                    System.out.println("Invalid input!");
                    ii--;
                }check = c;
               x = check;
               z = x;   
            if (j % 2 == 1)
            {
                y = check;
                Math.min(z, y);
            }

                System.out.println(check + " " + x + " " + y + " " + z);

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T07:59:05.253

我猜您正在尝试从当前输入和最后一个最小值中获取最小值。绝对是提供的所有数字中的最小值。然后，您只需要保存上一轮的最小值并将其与下一轮的输入进行比较。

```
for(int ii = 1, j = 0; j <= copySel ; ii++, j++) {  //btw, what is 'j' for? attempt count?
         boolean mode; //true = minimum, false = maximum
         boolean firstNumber = true;
         int check; //user input
         int lastValue; //will be the storage
            // Prompt as follows
            System.out.print("Enter value " + ii + ": ");
            try {
                c = Get();
            }
            catch (InputMismatchException e) {
                input
                System.out.println("Invalid input!");
                ii--;
            }
             check = c;
             if (firstNumber) { //first input has nothing to compare with
                 lastValue = check;
                 firstNumber = false;
                 continue;
             }
             lastValue = mode ? min(check, lastValue) : max(check, lastValue);
             /* you should also implement max() method if you want to be able to find maximum
             *  if you don't, just write lastValue = min(check, lastValue);
             *  and remove other 'mode' dependancies.
             */

             System.out.println((mode ? "minimum is: " : "maximum is: ") + String.valueOf(lastValue));

    } 
```

希望我已经正确理解了您的问题。