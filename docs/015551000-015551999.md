# StackOverflow 问答 15551000-15551999

# android - Android 和 LibGDX：在本地存储中创建 XML 文件

> ID：15551006
> 
> 赞同：1
> 
> 时间：2013-03-21T14:59:11.007
> 
> 标签：android, file, libgdx

我想检查我的`/assets/game/`目录中是否有一个文件`level.xml`，如果它不存在我想创建它。我使用这段代码：

```
private static void LoadXML() {
      ProgressFileHandle = Gdx.files.local("game/level.xml");
      if (!ProgressFileHandle.exists()) {
         try {
            ProgressFileHandle.file().createNewFile();
         } catch (IOException e) {
            e.printStackTrace();
         }
      } else ProgressFileHandle.file().readString();
} 
```

此代码不起作用，我收到错误：

> java.io.IOException：没有这样的文件或目录

如果我 `Gdx.files.local("assets/game/level.xml");` 改为 `Gdx.files.local("level.xml");`但我不明白为什么。如何在子目录 ( `assets/game`) 中创建此文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T16:11:20.063

我不清楚您是否希望从`assets`游戏随附的标准文件夹中读取。在这种情况下，您应该使用`Gdx.files.internal()`从那里读取，尽管该`assets`文件夹在 Android 上始终是只读的。

如果要`assets/`在 Libgdx“本地存储”（相当于 Android[内部存储](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)）中创建另一个目录，则需要先创建目录，然后才能在新目录中创建文件。只需调用[`.mkdirs()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#mkdirs%28%29) 文件句柄以确保创建了所有必需的父目录。

```
ProgressFileHandle.file().mkdirs();
ProgressFileHandle.file().createNewFile(); 
```

# java - JNLP SingleInstanceService 在命令行 JAR 应用程序中的使用

> ID：15551007
> 
> 赞同：1
> 
> 时间：2013-03-21T14:59:12.987
> 
> 标签：java, jnlp, single-instance

我有一个从命令行运行的桌面 Java 应用程序，它接受一些参数并根据这些参数执行一些操作。

目前，应用程序定期实例化，执行其功能，然后退出。

问题是用户对应用程序初始化所需的时间不满意。为了解决这个问题，我想到了在应用程序完成时简单地切换应用程序的可见性并设置某种 IDLE 状态。

我试图找出一种在应用程序需要工作时传递新参数的方法。我发现了 SingleInstanceService 并想知道是否可以在我的应用程序中使用它？我不清楚我需要做什么才能使单实例服务在客户端 PC 上运行。

或者，我的沟通问题是否有其他解决方案？我宁愿不依赖文件 I/O 来触发应用程序的逻辑。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:03:28.727

AFAIK JNLP API 仅在您使用 java web start (JWS) 技术启动应用程序时可用：在此处阅读更多信息：http: [//java.com/en/download/faq/java_webstart.xml](http://java.com/en/download/faq/java_webstart.xml)

如果这对您来说是一个选项，oracle 有一些关于如何使用 SingleInstanceService [here的示例](http://docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/examples.html#SingleInstanceService)

实现并注册 SingleInstanceListener。当您的应用程序的新实例启动时，它将使用 main-args 调用。

# sql - sql server 滚动 12 个月总和，日期间隔

> ID：15551008
> 
> 赞同：0
> 
> 时间：2013-03-21T14:59:15.467
> 
> 标签：sql, sql-server, join, aggregate-functions

假设我有一个表格，显示每个销售代表在特定月份销售的商品数量。但是，在没有销售的月份内，不会有针对特定人员的排行。例子

```
rep_id     month_yr     num_sales    
1          01/01/2012    3    
1          05/01/2012    1    
1          11/01/2012    1    
2          02/01/2012    2    
2          05/01/2012    1 
```

我希望能够创建一个查询，显示每个 rep_id 和所有可能的月份（01/01/2012、02/01/2012 等到当前）滚动 12 个月的销售额，如下所示：

```
rep_id     month_yr     R12_Sum    
1          11/01/2012   5    
1          12/01/2012   5    
1          01/01/2013   5    
1          02/01/2013   2 
```

我在网上找到了一些例子，但我遇到的问题是我错过了每个 rep_id 的一些日期。我需要交叉加入还是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:50:46.560

要解决这个问题，您需要一个包含所有年/月组合的驱动程序表。然后，您需要为每个代表创建这个。

然后解决方案是将实际数据左连接到此驱动程序并聚合您想要的时间段。这是查询：

```
with months as (
    select 1 as mon union all select 2 union all select 3 union all select 4 union all
    select 5 as mon union all select 6 union all select 7 union all select 8 union all
    select 9 as mon union all select 10 union all select 11 union all select 12
   ),
    years as (select 2010 as yr union all select 2011 union all select 2012 union all select 2013
   ),
    monthyears as (
     select yr, mon, yr*12+mon as yrmon
     from months cross join years
    ),
     rmy as (
     select *
     from monthyears my cross join
          (select distinct rep_id from t
          ) r
    )
select rmy.rep_id, rmy.yr, rmy.mon, SUM(t.num_sales) as r12_sum
from rmy join
     t
     on rmy.rep_id = t.rep_id and
        t.year(month_yr)*12 + month(month_yr) between rmy.yrmon - 11 and rmy.yrmon
group by rmy.rep_id, rmy.yr, rmy.mon
order by 1, 2, 3 
```

这还没有经过测试，所以它可能有语法错误。此外，它不会将年/月组合转换回日期，而是将值留在单独的列中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:24:59.707

下面演示了使用 CTE 生成日期表并使用 CTE 生成摘要报告。当销售代表没有适用的销售额时，他们会从结果中省略。

尝试调整报告参数，例如设置`@RollingMonths`为`1`，以获得更多乐趣。

```
-- Sample data.
declare @Sales as Table ( rep_id Int, month_yr Date, num_sales Int );
insert into @Sales ( rep_id, month_yr, num_sales ) values
  ( 1, '01/01/2012', 3 ),
  ( 1, '05/01/2012', 1 ),
  ( 1, '11/01/2012', 1 ),
  ( 2, '02/01/2012', 1 ),
  ( 2, '05/01/2012', 2 );
select * from @Sales;

-- Reporting parameters.
declare @ReportEnd as Date = DateAdd( day, 1 - Day( GetDate() ), GetDate() ); -- The first of the current month.
declare @ReportMonths as Int = 6; -- Number of months to report.
declare @RollingMonths as Int = 12; -- Number of months in rolling sums.

-- Report.
--   A CTE generates a table of month/year combinations covering the desired reporting time period.
with ReportingIntervals as (
  select DateAdd( month, 1 - @ReportMonths, @ReportEnd ) as ReportingInterval,
    DateAdd( month, 1 - @RollingMonths, DateAdd( month, 1 - @ReportMonths, @ReportEnd ) ) as FirstRollingMonth
  union all
  select DateAdd( month, 1, ReportingInterval ), DateAdd( month, 1, FirstRollingMonth )
    from ReportingIntervals
    where ReportingInterval < @ReportEnd )
  -- Join the CTE with the sample data and summarize.
  select RI.ReportingInterval, S.rep_id, Sum( S.num_sales ) as R12_Sum
    from ReportingIntervals as RI left outer join
      @Sales as S on RI.FirstRollingMonth <= S.month_yr and S.month_yr <= RI.ReportingInterval
    group by RI.ReportingInterval, S.rep_id
    order by RI.ReportingInterval, S.rep_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T16:14:10.750

它当然不漂亮，但比 CTE、数字表或自连接更简单：

```
DECLARE @startdt DATETIME

SET @startdt = '2012-01-01'

SELECT rep_id, YEAR(month_yr), MONTH(month_yr), SUM(num_sales)
FROM MyTable WHERE month_yr >= @startdt AND month_yr < DATEADD(MONTH,1,@startdt)

UNION ALL

SELECT rep_id, YEAR(month_yr), MONTH(month_yr), SUM(num_sales)
FROM MyTable WHERE month_yr >= DATEADD(MONTH,1,@startdt) AND month_yr < DATEADD(MONTH,2,@startdt)

UNION ALL

SELECT rep_id, YEAR(month_yr), MONTH(month_yr), SUM(num_sales)
FROM MyTable WHERE month_yr >= DATEADD(MONTH,2,@startdt) AND month_yr < DATEADD(MONTH,3,@startdt)

UNION ALL

SELECT rep_id, YEAR(month_yr), MONTH(month_yr), SUM(num_sales)
FROM MyTable WHERE month_yr >= DATEADD(MONTH,3,@startdt) AND month_yr < DATEADD(MONTH,4,@startdt)

UNION ALL

etc etc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T15:10:28.873

这是一种解决方案：

```
SELECT 
  a.rep_id
  ,a.month_yr
  ,SUM(b.R12_Sum) AS R12_TTM
FROM YourTable a
  LEFT OUTER JOIN YourTable b 
    ON a.rep_id = b.rep_id
    AND a.month_yr <= b.month_yr
    AND a.month_yr >= DATEADD(MONTH, -11, b.month_yr)
GROUP BY
  a.rep_id
  ,a.month_yr 
```

# php - 在 PHP 中返回一个值 - 它是什么，我的两个脚本有什么不同吗？

> ID：15551009
> 
> 赞同：1
> 
> 时间：2013-03-21T14:59:17.373
> 
> 标签：php, function, return

我是 php 的初学者，我很难理解返回值在 php 中的含义。到目前为止，我的理解是这样的：一旦你返回一个值，这就是函数将保存的最终值，并且在函数中返回一个值之后（以及函数结束之前）发生的所有脚本都将被终止。

我打印的第一个脚本是我从书中看到的。我认为我们可以将第一个脚本重写为第二个脚本，我看不出脚本之间有任何区别。

我对返回值的理解和我对以下两个脚本完全相同的想法是否错了？我试图尽可能多地阅读有关返回值的内容，但似乎没有什么能对我解释得足够清楚。我想真正了解必须返回一个值的意义何在，以及为什么我们不只使用脚本#2 而不是#1。我会很感激你的帮助。谢谢你。

脚本 1：

```
function addNums($firstnum, $secondnum){
    $result= $firstnum + $secondnum;
    return $result;
}
echo addNums(3,5); 
```

脚本 2：

```
function addNums($firstnum, $secondnum){
    return $result= $firstnum + $secondnum;
}
echo addNums(3,5); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T15:00:54.833

更好的方法是

```
function addNums($firstnum, $secondnum){
    return  $firstnum + $secondnum;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T15:01:58.500

我想我更喜欢这个

```
function addNums() {
    return array_sum(func_get_args());
} 
```

或更好仍在使用`bc_maths`

```
function addNums() {
    return array_reduce(func_get_args(), function ($a, $b) {
        return bcadd($a, $b);
    });
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T15:04:14.743

我建议您从最佳实践开始您的编码之旅：

**明确优先级。**

换句话说，请随意使用括号。它们可能有助于澄清您想要的操作顺序，并且不会受到伤害。

代替：

```
return $result= $firstnum + $secondnum; 
```

您可能想使用：

```
return ($firstnum + $secondnum); // The $result = is just unnecessary complication 
```

, 在返回行中输入复杂表达式时使用括号。在您在这里的情况下，这实际上不是必需的，但可以帮助您避免将来出现问题。

这是一个更好的例子，你**肯定**想依靠括号来澄清你的数学：

```
return (($firstnum + $secondnum) / (4 - $thirdnum)); // or more complicated 
```

所以本质上，你的 return 语句越复杂，你的括号就越多（直到你完全没有操作员的订单）。

但除此之外，将表达式放在返回行中都很好。这样做时您会遇到的一个问题是，您将无法像使用结果变量一样轻松地调试最终返回的值：

```
var_dump($result); // Can't echo out/var_dump the variable unless you've a temp variable to output
return $result; 
```

但另一方面，这就是测试驱动设计和编写测试以确保获得预期结果的目的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T15:00:56.843

第二个脚本应遵循以下内容：

```
function addNums($firstnum, $secondnum){
    return ($firstnum + $secondnum);
}
echo addNums(3,5); 
```

# java - 当我点击我的复选框时，我如何做到这一点，一个单独的和可编辑的框架打开？

> ID：15551011
> 
> 赞同：0
> 
> 时间：2013-03-21T14:59:19.123
> 
> 标签：java, arrays, checkbox, frames

我目前正在使用 Java。我已经制作了复选框，我想知道如何制作它，因此当单击复选框时，它会打开一个单独的框架，可以根据我的需要进行修改和编辑。我听说一组框架/组件会起作用。任何帮助/解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:12:11.300

如果我理解你的问题，你必须为你的复选框实现一个监听器。在那个听众的身体里，应该有这样的东西：

```
 //1\. Create the frame.
JFrame frame = new JFrame("FrameDemo");

//2\. Optional: What happens when the frame closes?
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

//3\. Create components and put them in the frame.
//...create emptyLabel...
frame.getContentPane().add(emptyLabel, BorderLayout.CENTER);

//4\. Size the frame.
frame.pack();

//5\. Show it.
frame.setVisible(true); 
```

第一点和第五点是**最重要的**。

如果您不知道如何为复选框创建和注册侦听器，请尝试访问以下站点： [http ://examples.javacodegeeks.com/desktop-java/awt/event/checkbox-listener-example/](http://examples.javacodegeeks.com/desktop-java/awt/event/checkbox-listener-example/) [http://docs.oracle .com/javase/tutorial/uiswing/components/button.html](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)

我希望这个建议对你有所帮助。

# jquery - jqGrid：cpcolModel[e].formoptions 未定义

> ID：15551014
> 
> 赞同：0
> 
> 时间：2013-03-21T14:59:27.810
> 
> 标签：jquery, jqgrid, undefined

我**正在**尝试**使用****包含**在. _ 当我尝试**添加**一些行时，会出现此错误：****`navGrid`****

 ******```
c.p.colModel[e].formoptions is undefined. 
```

当我尝试**编辑**或**删除**时，会出现类似的错误。

我正在尝试使用 navGrid 中“包含”的添加、编辑和删除功能。当我尝试添加一些行时，会出现此错误：cpcolModel[e].formoptions 未定义。当我尝试编辑或删除时，会出现类似的错误。有人可以帮我解决这个问题吗？

我的网格代码是：

```
function mypricecheck(value, colname) {
    if (value < 0 || value > 20)
        return [false, "Please enter value between 0 and 20"];
    else
        return [true, ""];
}

$(function () {
    var lastSel;
    $("#list").jqGrid({
        url: "php.php",
        datatype: "json",
        mtype: "POST",

        colNames: ['Index', 'ac_n_quad', 'ac_l_circ', 'ac_n_circ', 'ac_fin_g', 'ac_pot', 'ac_volt', 'ac_n_polos', 'ac_t_prot', 'ac_v_prot', 'ac_cabo', 'ac_fd', 'ac_fp', 'ac_ctr', 'ac_pot_a', 'ac_pot_b', 'ac_pot_c', 'ac_pos_1', 'ac_pos_2', 'ac_calc'],

        colModel: [
            { name: 'index', index: 'index', width: 65, key: true, hidden: true },
            { name: 'ac_n_quad', index: 'ac_n_quad', width: 110 },
            {
                name: 'ac_l_circ', index: 'ac_l_circ', width: 65, editable: true, editoptions: {
                    dataInit: function (elem) {
                        $(elem).autocomplete({
                            source: "autocomplete.php?extraparam=ac_l_circ",
                            select: function (event, ui) {
                                $(elem).val(ui.item.value);
                            }
                        });
                    }
                }
            },
            { name: 'ac_n_circ', index: 'ac_n_circ', width: 120, editable: true, editrules: { custom: true, custom_func: mypricecheck } },
            {
                name: 'ac_fin_g', index: 'ac_fin_g', width: 75, editable: true, editoptions: {
                    dataInit: function (elem) {
                        $(elem).autocomplete({
                            source: "autocomplete.php?extraparam=ac_fin_g",
                            select: function (event, ui) {
                                $(elem).val(ui.item.value);
                            }
                        });
                    }
                }
            },
            { name: 'ac_pot', index: 'ac_pot', width: 55, editable: true, formatter: 'number', formatoptions: { decimalPlaces: 0, thousandsSeparator: '.' } },
            { name: 'ac_volt', index: 'ac_volt', width: 60, editable: true, edittype: "select", formatter: "select", editoptions: { value: "110:110; 220:220" } },
            { name: 'ac_n_polos', index: 'ac_n_polos', width: 100, editable: true, edittype: "select", formatter: "select", editoptions: { value: "1:1; 2:2; 3:3" } },
            { name: 'ac_t_prot', index: 'ac_t_prot', width: 100, editable: true, edittype: "select", formatter: "select", editoptions: { value: "DISJUNTOR:DISJUNTOR; FUSÍVEL:FUSÍVEL" } },
            { name: 'ac_v_prot', index: 'ac_v_prot', width: 70, editable: true },
            {
                  name: 'ac_cabo', index: 'ac_cabo', width: 60, editable: true, editoptions: {
                      dataInit: function (elem) {
                          $(elem).autocomplete({
                              source: "autocomplete.php?extraparam=ac_cabo",
                              select: function (event, ui) {
                                  $(elem).val(ui.item.value);
                              }
                          });
                      }
                  }
            },
            { name: 'ac_fd', index: 'ac_fd', width: 55, editable: true, formatter: 'number', formatoptions: { decimalPlaces: 1 } },
            { name: 'ac_fp', index: 'ac_fp', width: 55, editable: true, formatter: 'number', formatoptions: { decimalPlaces: 1 } },
            { name: 'ac_ctr', index: 'ac_ctr', width: 60 },
            { name: 'ac_pot_a', index: 'ac_pot_a', width: 70 },
            { name: 'ac_pot_b', index: 'ac_pot_b', width: 70 },
            { name: 'ac_pot_c', index: 'ac_pot_c', width: 70 },
            { name: 'ac_pos_1', index: 'ac_pos_1', width: 70 },
            { name: 'ac_pos_2', index: 'ac_pos_2', width: 70 },
            { name: 'ac_calc', index: 'ac_calc', width: 65 }
        ],
        cmTemplate: { align: "center" },
        ondblClickRow: function (id, iRow, iCol, e) {
            if (id) {
                if (id !== lastSel) {
                    $("#list").restoreRow(lastSel);
                    var cm = $("#list").jqGrid('getColProp', 'ac_ctr');
                    cm.editable = false;
                    $("#list").editRow(id, true);
                    $("input, select", e.target).focus().select();
                    cm.editable = true;
                    lastSel = id;
                } else {
                    $("#list").restoreRow(lastSel);
                    lastSel = "";
                }
            }
        },
        editurl: "edit.php",
        autowidth: "true",
        height: "auto",
        rowNum: 10,
        rowList: [10, 20, 30, 40, 50, 60, 70, 80, 90, 100],
        sortname: "ac_n_quad, ac_n_circ",
        sortorder: "asc",
        pager: '#pager',
        viewrecords: true,
        gridview: true,
        caption: "Tabela circ_69"
    });

    $("#list").jqGrid('navGrid', '#pager', {
        add: true,
        addtext: "Adicionar",
        edit: true,
        edittext: "Editar",
        del: true,
        deltext: "Excluir",
        search: false,
        refresh: false
    },
    {
        reloadAfterSubmit: true
    }, // add options
    {
        reloadAfterSubmit: true
    }, // edit options
    {
        reloadAfterSubmit: true
    } // del options
    );

    $("#list").jqGrid('gridResize');
}); 
```

Firebug 显示错误在 6083 行：

```
try { nm = g.p.colModel[i].formoptions.label; } catch (e) {} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:29:17.010

我不确定在哪里可以看到错误“cpcolModel[e].formoptions is undefined.”。编码

```
try { nm = g.p.colModel[i].formoptions.label; } catch (e) {} 
```

在验证列“ac_n_circ”期间确实会产生异常，但会捕获异常（参见`catch (e) {}`部分）。所以不应该显示错误信息。

我同意这[行](https://github.com/tonytomov/jqGrid/blob/v4.4.4/js/grid.common.js#L590)代码并不完美，但它仍然不是错误。如果您确实想消除异常，您可以添加

```
formoptions: {} 
```

到您使用的列`editrules`。******

# iphone - iPhone IAP - Apple 验证服务器接受可疑收据

> ID：15551019
> 
> 赞同：0
> 
> 时间：2013-03-21T14:59:40.590
> 
> 标签：iphone, validation, in-app-purchase, receipt

我们有一个提供应用内购买 (IAP) 产品的 iPhone 应用。我们通过与 Apple IAP 收据验证服务器联系的服务器执行 IAP 验证。

我们使用完全相同的收据获得许多交易。我们怀疑是俄罗斯黑客使用的收据在 2012 年 7 月设法绕过了 Apple IAP 验证服务器。Apple 验证服务器批准了收据，因此我们目前执行自己的检查，如果收据与此收据相同，则拒绝购买。

有没有其他人遇到过同样的问题？我们的假设是真的吗？有没有其他方法可以防止使用此收据以及类似的其他收据进行交易？

The suspicious receipt starts with the following characters (total 3045 characters): ewoJInNpZ25hdHVyZSIgPSAiQXBkeEpkdE53UFUyckE1L2NuM2tJTzFPVGsyNWZlREthMGFhZ3l5UnZlV2xjRmxnbHY2UkY2em5raUJTM3VtOVVjN3BWb2IrUHFaUjJUOHd5VnJITnBsb2YzRFgzSXFET2xXcSs5MGE3WWwrcXJSN0E3ald3dml3NzA4UFMrNjdQeUhSbmhPL0c3YlZxZ1JwRXI2RXVGeWJpVTFGWEFpWEpjNmxzMVlBc3NReEFBQURWekNDQTFNd2dnSTdvQU1DQVFJQ0NHVVVrVTNaV0FTMU1BMEdDU3FHU0liM0RRRUJCUVVBTUg4eEN6QUpCZ05WQkFZVEFsVlRNUk13RVFZRFZRUUtEQXBCY0hCc1pTQkpibU11TVNZd0pBWURWUVFMREIxQmNIQnNaU0JEWlhKMGFXWnBZMkYwYVc5dUlFRjFkR2h2Y21s

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:13:31.507

一个人可能正在为他或她的朋友解锁应用内购买，或者有黑客，或任何事情。但是，如果您已阻止收据，则应该没问题，除非另一个收据弹出同样的问题。我目前在收据验证方面遇到了类似的问题。出于某种原因，正在根据我的服务器验证来自 Cut the Rope 的收据，但由于我的服务器无法识别产品标识符，它不会解锁任何东西。

由于黑客使用的收据是有效的，因此确实无法防止这种情况发生。您只能监控您的数据库并在出现问题时阻止它们。自动防止这种情况的唯一方法是，如果某个收据在短时间内被多次使用，则将其冻结。

![在此处输入图像描述](../Images/e32ca16c136f970cb8948c4eb9f6a759.png)

# java - 在JPA中一次使用两种策略的ORM映射继承？

> ID：15551020
> 
> 赞同：0
> 
> 时间：2013-03-21T14:59:41.180
> 
> 标签：java, hibernate, inheritance, jpa, orm

现在，据我所知，JPA 中有两种最常用的继承映射策略：

1.  **单表**- 所有类（子类和超类）都映射在一个表中，该表具有所有类的所有字段作为列；并且仅特定于某些子类的字段在其他相应条目中为 NULL。

.

```
@Entity
@Table(name="types")
@Inheritance(strategy=InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name="types", discriminatorType=DiscriminatorType.STRING, length=1)
public abstract class Base { //... }

@Entity
@DiscriminatorValue(value="A")
public class TypeA extends Base { //... }

@Entity
@DiscriminatorValue(value="B")
public class TypeB extends Base { //... } 
```

1.  **连接表策略**- 基类有一个表，其中所有基类的字段作为列，另一列用于类型；每个子类也有特定的表，每个子类只有相应的子类字段，这些字段与基表一对一（通过 PK）映射。

.

```
@Entity
@Table(name="USERS")
@Inheritance(strategy=InheritanceType.JOINED)
@DiscriminatorColumn(name="types",discriminatorType=STRING, length=1)
public abstract class Base { //... }

@Entity
@Table(name="SELLERS")
@DiscriminatorValue(value="A")
@PrimaryKeyJoinColumn(name="base_id")
public class TypeA extends User { //... }

@Entity
@Table(name="BIDDERS")
@DiscriminatorValue(value="B")
@PrimaryKeyJoinColumn(name="base_id")
public class TypeB extends User { //... } 
```

在我的域中，我有这些课程：

```
public abstract class Base {
//data
}

public class TypeA extends Base {
//only one field
}

public class TypeB extends Base {
// many more fields
} 
```

我想要一个 1\. TypeA 和 Base 之间的继承映射策略和 2\. TypeB 和 Base 之间的继承映射策略（这是一种过度简化；实际上有很多实体），因为我不希望另一个表用于另一个字段。这在 JPA 中是否可行，是否有意义？

编辑：我不知道代码格式有什么问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:10:33.943

不，这在 JPA 中是不可能的。需要`@Inheritance`在基类级别进行配置，不能在子类级别覆盖。

但是，您的选择确实包括您没有提到的另一种可能性，即[`InheritanceType.TABLE_PER_CLASS`](http://openjpa.apache.org/builds/1.0.0/apache-openjpa-1.0.0/docs/manual/jpa_overview_mapping_inher.html#jpa_overview_mapping_inher_tpc). 如果您使用它，您将拥有 N 个表（用于 N 个子类）而不是一个或 N+1。它在某些情况下效果很好，请参阅链接中的优点/缺点。

# iphone - 删除并重新安装应用程序后未询问访问联系人的权限

> ID：15551021
> 
> 赞同：1
> 
> 时间：2013-03-21T14:59:47.747
> 
> 标签：iphone, ios, objective-c, ios6

在 iOS 6 中，根据用户的联系人隐私，应用程序必须请求访问联系人的权限。我参考了此处提供的答案：[**如何本地化 iOS 6 新的 Info.plist 隐私目的字符串？**](https://stackoverflow.com/questions/12564347/how-to-localize-ios-6-new-info-plist-privacy-purpose-strings/14144989#14144989)本地化`infoPlist.strings`文件，我这样做是第一次要求联系人访问权限：

```
 "NSContactsUsageDescription" = "App would like to access your Contacts? Allow?"; 
```

但在测试过程中，我发现如果我删除应用程序并再次运行/安装，它不会再次请求访问联系人的权限。我什至在删除应用程序后重新启动设备并再次运行，但原因相同。在设置联系人权限时我在这里遗漏了什么吗？

# python - 在 Python 3.3 中绘图时出现 Matplotlib 1.2 错误

> ID：15551025
> 
> 赞同：0
> 
> 时间：2013-03-21T14:59:54.057
> 
> 标签：python, matplotlib

我试图在`python 3.3`using中绘制非常简单的东西`Matplotlib 1.3`。下面是我正在尝试的代码：

```
import matplotlib.pyplot as plt
x = [1, 2, 3, 4, 5]
y = [1, 4, 9, 16, 25]
plt.plot(x,y) 
```

我收到这条消息：

```
matplotlib.lines.Line2D object at 0x0000000006711860 
```

我刚开始使用 python 并且在`python`世界上很新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:00:52.360

`plt.plot`返回一个`lines.Line2D`对象（因为您正在绘制一条线）。我猜您正在交互式工作，否则您将看不到该“消息”。

如果您希望情节实际显示，您需要添加：

```
plt.show() 
```

# azure-diagnostics - Windows Azure 诊断栏说明

> ID：15551028
> 
> 赞同：1
> 
> 时间：2013-03-21T14:59:58.807
> 
> 标签：azure-diagnostics

Windows Azure 诊断记录的默认列是：

*   分区键 - ?????
*   行键 - ?????
*   时间戳 - 记录此日志的时间和日期
*   EventTickCount - ?????
*   部署 ID - ?????
*   角色 - 发出此日志调用的 Worker/Web 角色的名称
*   RoleInstance - 发出此日志调用的 Azure 应用程序实例的名称
*   级别 - 此日志的级别（调试、信息、错误）
*   事件 ID - ?????
*   PID - ?????
*   滴滴 - ?????
*   消息 - 日志调用的实际内容

我已经搜索了 MSDN，以了解这些列中记录了哪些信息。我可以根据列的名称和它包含的数据来推断其中一些的含义，但有些我无法弄清楚。

PartitionKey、RowKey、EventTickCount、DeploymentId、EventId、Pid、Tid记录了哪些数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-05T19:28:33.913

为了：

PartitionKey / RowKey - 表存储中的每个实体都需要三个属性：PartitionKey、RowKey、Timestamp。PartitionKey 用于跨存储节点对表进行分区。RowKey 是给定分区内的唯一标识符。在撰写本文时，Windows Azure 诊断似乎正在使用时间戳来生成这些值。参考文献：[1](http://msdn.microsoft.com/en-us/library/azure/dd179338.aspx) [2](http://blog.maartenballiauw.be/post/2012/10/08/What-PartitionKey-and-RowKey-are-for-in-Windows-Azure-Table-Storage.aspx)

EventTickCount - 事件生成时间的时间戳（以滴答为单位）。

DeploymentId - 分配给此特定部署的 guid。用于区分一种部署与另一种部署。

EventId - 被跟踪的事件的 ID。有关详细信息，请参阅有关[ETW](http://msdn.microsoft.com/en-us/library/windows/desktop/bb968803(v=vs.85).aspx)的详细信息。

Pid - 生成事件的进程的进程 ID。

Tid - 生成事件的线程的线程 ID。

# json - 来自 JSON 的淘汰赛映射不在 UI 上显示数据

> ID：15551029
> 
> 赞同：0
> 
> 时间：2013-03-21T14:59:59.997
> 
> 标签：json, knockout.js, knockout-mapping-plugin

```
<script language="javascript">
    var user = {"firstName":"Test","lastName":"Test Last"};
    var viewModel = ko.mapping.fromJS(user);  
    ko.applyBindings(viewModel);  
</script>

<input type="text" id="txtFName" data-bind="value: firstName" class="input-small" >
<input type="text" id="txtLName" data-bind="value: lastName" class="input-small"> 
```

但由于某种原因，淘汰赛没有在 UI 上显示结果。什么是可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:08:32.323

就像 nemesv 所说，您应该在脚本块中使用以下内容：

```
type="text/javascript" 
```

您确定您对淘汰赛和淘汰赛映射有正确的参考吗？我根据您的代码创建了一个运行良好的 jsfiddle：

[http://jsfiddle.net/CUNWn/](http://jsfiddle.net/CUNWn/)

# c# - 将存储在变量中的文本添加到要保存到文本文件的字符串中

> ID：15551032
> 
> 赞同：0
> 
> 时间：2013-03-21T15:00:08.027
> 
> 标签：c#, string, variables

嗨，我正在尝试将文本保存到带有一些字符串的文本文件中，例如添加了学生姓名，但我有点卡住了

```
string iName2 = iName;
string text = "The student named {0} needs more work with plurals";
System.IO.File.WriteAllText(@"C:\Users\user\documents\visual studio 2012\Projects\Artificial_Intelligence_Project_3\WindowsFormsApplication1\Info.txt", text);` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T15:01:32.237

我假设`iName`是名字。`String.Format`是您需要的方法：

```
string text = String.Format("The student named {0} needs more work with plurals", iName); 
```

除非您需要`iName2`其他地方，否则您不需要它。

除了更具可读性之外，`String.Format`与**使用**`+`. 它允许您**更改**替换文本片段的顺序或*省略*其中一些：

```
string text = String.Format("{0} {1}", a, b);

// changed order within text without changing argument order!
string text2 = String.Format("{1} {0}", a, b); 
```

如果您正在进行**本地化**，这尤其有用：不同的语言有不同的规则来构建短语，其中片段可能需要以不同的顺序替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:02:35.427

```
string text = "The student named " + iName2 + " needs more work with plurals"; 
```

# lisp - 是否可以使用 `eval` 在 Lisp 中实现`apply`？

> ID：15551033
> 
> 赞同：4
> 
> 时间：2013-03-21T14:29:30.793
> 
> 标签：lisp, racket

我正在学习 Racket（一种类似于 Scheme 的 Lisp），我试图做类似`(apply + '(1 2))`但不使用的事情，但`apply`我失败了。之前我几乎可以肯定`apply`可以使用 以某种方式模拟`eval`，但现在我有疑问。

所以，我的问题是：可以`apply`在 Racket（或其他 Lisp）中仅使用`eval`和其他基本操作来实现吗？也就是说，如何使这项工作：

```
{ define [my-apply f arg]
  ;; what does go here?
}
(my-apply + (list 1 2)) ; => 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:54:24.960

当然。

```
(defun my-apply (function arglist)
  (eval (cons function (mapcar (lambda (x) (list 'quote x)) arglist))))
(my-apply '+ '(1 2 3))
6
(my-apply '+ '(1 a 3))
*** - +: A is not a number 
```

1.  请注意，您不能这样做`(my-apply #'+ '(1 2 3))`，这将需要一个额外的步骤。

2.  请注意，您必须引用`arglist`元素以避免重复评估（感谢 Ryan 抓住这一点！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:18:54.400

我找到了这个（在球拍中）：

```
{ define [my-apply func args]
  { define ns-for-eval (make-base-namespace) }
  (eval (cons func args) ns-for-eval)
}

(my-apply + (list 1 2)) ; => 3 
```

有什么问题吗？

# java - Spring JavaConfig 没有捕获 PageNotFound？

> ID：15551036
> 
> 赞同：3
> 
> 时间：2013-03-21T15:00:10.037
> 
> 标签：java, spring, spring-mvc

我正在尝试在我的 Spring WebMVCConfig 位中设置一个找不到的页面，它不起作用..

这是我的配置：

```
@Configuration
@EnableWebMvc
@PropertySource("classpath:application.properties")
@Import(DatabaseConfig.class)
@ImportResource("/WEB-INF/spring/applicationContext.xml")
public class WebMVCConfig extends WebMvcConfigurerAdapter {

    private static final String MESSAGE_SOURCE = "/WEB-INF/classes/messages";
    private static final Logger logger = LoggerFactory.getLogger(WebMVCConfig.class);

    @Autowired
    Environment env;

    @Bean
    public ViewResolver resolver() {
        UrlBasedViewResolver url = new UrlBasedViewResolver();
        url.setPrefix("/WEB-INF/view/");
        url.setViewClass(JstlView.class);
        url.setSuffix(".jsp");
        return url;
    }

    @Bean(name = "messageSource")
    public MessageSource configureMessageSource() {
        logger.debug("setting up message source");
        ReloadableResourceBundleMessageSource messageSource = new ReloadableResourceBundleMessageSource();
        messageSource.setBasename(MESSAGE_SOURCE);
        messageSource.setCacheSeconds(5);
        messageSource.setDefaultEncoding("UTF-8");
        return messageSource;
    }

    @Bean
    public LocaleResolver localeResolver() {
        SessionLocaleResolver lr = new SessionLocaleResolver();
        lr.setDefaultLocale(Locale.ENGLISH);
        return lr;
    }

    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        logger.debug("setting up resource handlers");
        registry.addResourceHandler("/resources/").addResourceLocations("/resources/**");
    }

    @Override
    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {
        logger.debug("configureDefaultServletHandling");
        configurer.enable();
    }

    @Override
    public void addInterceptors(final InterceptorRegistry registry) {
        registry.addInterceptor(new LocaleChangeInterceptor());
    }

    public @Bean HandlerExceptionResolver exceptionResolver() {
        Properties mappings = new Properties();
        mappings.put("org.springframework.web.servlet.PageNotFound", "404");
        mappings.put(DataAccessException.class.getName(), "dataAccessFailure");
        mappings.put(TransactionException.class.getName(), "dataAccessFailure");

        SimpleMappingExceptionResolver resolver = new SimpleMappingExceptionResolver();
        resolver.setExceptionMappings(mappings);

        return resolver;
    }

    @Bean
    public DefaultAnnotationHandlerMapping mapping() {
        DefaultAnnotationHandlerMapping m = new DefaultAnnotationHandlerMapping();
        m.setDetectHandlersInAncestorContexts(true);
        return m;
    }
} 
```

现在，如果我输入一个未映射的 URL，我会认为它会转到我的 404.jsp 页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:37:31.217

配置自定义错误页面（对于 404 或任何其他错误代码）的方法是在 web.xml...

```
<error-page>
    <error-code>404</error-code>
    <location>/my-custom-page-not-found.html</location>
</error-page> 
```

url 可以是静态页面、自定义 jsp 甚至是 Spring 控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:01:27.440

您可以使用`@ExceptionHandler`带注释的方法或`@ControllerAdvice`类。

[论坛的这篇文章](https://stackoverflow.com/questions/3230358/spring-3-create-exceptionhandler-for-nosuchrequesthandlingmethodexception)中描述了几种方法。

或者，您也可以参考[Spring Docs - 处理异常](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-exceptionhandlers)部分。

# xquery - 非常复杂的 XQuery 转换

> ID：15551045
> 
> 赞同：1
> 
> 时间：2013-03-21T15:00:22.870
> 
> 标签：xquery

我要编写一个非常复杂的 XQuery（至少按照我的标准）。

这是我的输入xml：

```
<testRequest>
    <request1>
       <Line>1</Line>
       <action>addtoName</action>
    </request1>
    <request2>
        <Line>2</Line>
        <action>addtoSpace</action>
    </request2>
    <request3>
         <Line>3<Line>
         <action>addtospace</action>
    </request3>
</testRequest> 
```

在我的输出 xml 中，操作应作为属性附加到“request1”元素。因此，根据 request1 元素下的 action 元素，request1 元素的属性应该是以下之一：

```
if action = IgnoreCase(addtoName), the request1 element should be <request1 action=insertingname>
if action =  IgnoreCase(addtoSpace), the request1 element should be <request1 action=updatingspace> 
```

不仅如此，我还需要根据元素下面的操作值向元素添加一个属性。所以，我要遍历一个元素下的每一个元素，看看有没有一个元素等于“addtospace”，如果是，那么我需要获取元素的对应值，并为元素组成属性。从上面的 xml 中，我的元素属性应该是，

```
<testRequest lineFiller="Line Like 2_* AND Line Like 3_*>, where 2 and 3 are the respective line numbers. 
```

如果没有 element=addtoSpace 的元素，则该元素的属性应“更改”。

因此，总而言之，我转换后的 xml 应如下所示：

```
<testRequest lineFiller="Line Like 2_* AND Line Like 3_*>
    <request1 action=insertingname>
       <Line>1</Line>
       <action>addtoName</action>
    </request1>
    <request2 action=updatingspace>
        <Line>2</Line>
        <action>addtoSpace</action>
    </request2>
    <request3 action=updatingspace>
         <Line>3<Line>
         <action>addtospace</action>
    </request3>
</testRequest> 
```

任何帮助完成这项艰巨的任务将不胜感激。

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:38:36.913

您应该定义函数来生成需要添加到元素的属性。

为了添加到“请求”元素，这应该有效：

```
declare function local:getaction($x) {
  if (lower-case($x/action) = "addtoname") then attribute action {"insertingspace"} else
  if (lower-case($x/action) = "addtospace") then attribute action {"updatingspace"} else
  ()
}; 
```

linefiller 属性可以类似地创建：

```
declare function local:getfiller($x) {
  attribute lineFiller {
      if ($x/*[lower-case(action) = "addtospace"]) then
          string-join(
          for $r in $x/*[lower-case(action) = "addtospace"]
            return concat("Line Like ",$r/Line,"_*")
          , " AND ")
      else "change"
      }
}; 
```

然后把它们放在一起，在你的原始文档上进行一个简单的 for 循环，在需要的地方添加属性：

```
let $doc:=<<your original document>>

return
<testRequest>
{ local:getfiller($doc) }
{ for $r in $doc/* return 
   element { name($r) } { 
    local:getaction($r),
    $r/* 
   }
}
</testRequest> 
```

编辑：如果没有操作，增强的 getfiller 函数返回“更改”

# jquery - 从 ajax 获取数据时的 select2 插件问题

> ID：15551047
> 
> 赞同：0
> 
> 时间：2013-03-21T15:00:26.547
> 
> 标签：jquery, ajax, jquery-select2

我正在使用 select2 插件进行下拉，并在那里遇到了一些问题。

**需要的最终结果：**

*   当我点击下拉 ajax 应该通过请求。（这将获取所有数据）
*   下次当我在插件中搜索从响应数据中获取的数据时。

**原因：** - 这将防止每次出现不必要的 ajax 请求。

**我做了什么 ：**

```
minimumInputLength: 0,
multiple: multi,
ajax: {                
    url: url,
    dataType: 'json',
    type: 'post',                             
    data: function( request, response ) {
        db_fields = $('.select2-dropdown-open').prev().attr('sel');
        selected_val = $('.select2-dropdown-open').prev().val();
        return {                                
            sel : db_fields,
            term    : ( request).split( /,\s*/ ).pop(),                                
            ex  : selected_val
        };
    },
    results: function(data, page) {                    
        return {
            results: data
        };
    }                
}, 
```

**我面临的问题：**

我试过了

```
cache:true 
```

也，但它没有工作。因为我设置了 minimumInputLength: 0 （这样它就可以传递 ajax 并一次弹出选项，专注于下拉菜单）

单击，删除元素，每次通过ajax请求时添加元素。这很烦人。

# javascript - 为浏览器设置同时 TCP 连接的限制

> ID：15551049
> 
> 赞同：1
> 
> 时间：2013-03-21T15:00:28.980
> 
> 标签：javascript, ipad, http, tcp, safari

是否可以在 HTML 或 JavaScript 中限制到 Web 服务器的单个 TCP 连接的数量。许多浏览器每台服务器最多打开 8 个连接，以加快加载速度。是否可以从客户端以某种方式限制它？情况是我有一个不喜欢大量同时 TCP 连接的 Web 服务器。

*   是否有 Java Script/HTML5 解决方案参数或函数
*   有没有办法在 iPad Safari 浏览器上减少这种情况
*   他们只是在谈论使用内联代码的解决方案： [是否有 javascript 加载程序可以将套接字数量限制为 1 或 2](https://stackoverflow.com/questions/11906900/is-there-a-javascript-loader-which-can-limit-the-number-of-sockets-to-1-or-2) 是否有另一种方法？可以在 Safari 中运行的特定浏览器？

# jquery - 如何使用日期框同时显示日期和时间

> ID：15551053
> 
> 赞同：1
> 
> 时间：2013-03-21T15:00:43.423
> 
> 标签：jquery, jquery-mobile

我正在使用这个日期框：http: [//dev.jtsage.com/jQM-DateBox2/](http://dev.jtsage.com/jQM-DateBox2/)

```
<input name="txtHiddenCalendar" id="txtHiddenCalendar" type="date" data-role="datebox"  data-options='{ "themeHeader": "b", "zindex":1000, "mode": "calbox","themeDateToday" : "b", "themeDatePick" : "b"}' /> 
```

它仅将日期部分显示为：yyyy-mm-dd 我怎样才能将时间显示为：yyyy-mm-dd hh:mm:ss

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:28:56.157

您可以尝试 overrideDateFormat 元素。我认为并希望这种模式可以解决您的问题。

```
"overrideDateFormat" :"%Y/%m/%d %H:%M:%S", 
```

把代码放在适当的位置，注意字母的大小写。

# android - 为 Android 应用程序合并 RSS 提要？

> ID：15551054
> 
> 赞同：0
> 
> 时间：2013-03-21T15:00:45.293
> 
> 标签：android, rss

我目前正在开发一个移动应用程序，我希望能够获取 4 个 RSS 提要，然后将它们组合成一个提要，以便我可以将它们与 BuzzBox SDK 一起使用。我已经设置了 BuzzBox 并让它与一个提要一起工作，但我认为内置的 RSSTaskReader 一次只接受一个，所以我只能使用一个 RSS 提要。

如果有人能告诉我如何连接某种 API，让我从多个生成一个 RSS 提要，或者使用 BuzzBox 内置的带有多个 RSS 提要的 RssTaskReader，这会很棒，因为我现在被困在这个问题上：S

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:48:53.630

您可以使用[Rome](https://code.google.com/p/android-rome-feed-reader)阅读多个 RSS 提要。然后结合实体生成一个新的 RSS 提要。

# java - 从 .properties 在 xml 中调用路径

> ID：15551062
> 
> 赞同：-1
> 
> 时间：2013-03-21T15:00:57.327
> 
> 标签：java, xml

我有一个调用路径的 xml，并且位置是硬编码的。

```
<path=c:/... /> 
```

有谁知道如何使用 .properties 放入路径然后从那里调用它？我这样做是出于安全原因。

编辑

按照教程 [http://www.mulesoft.org/documentation/display/current/Basic+Studio+Tutorial](http://www.mulesoft.org/documentation/display/current/Basic+Studio+Tutorial)

入站的路径调用如下：

```
<file:inbound-endpoint  path="C: ../> 
```

它可以从属性文件中加载吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:09:39.063

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
  <comment>Application Configuration</comment>
  <entry key="data.folder">D:\App\Data</entry>
  <entry key="jdbc.url">jdbc:mysql://localhost/mydb</entry>
</properties> 
```

加载XmlProperties .java

```
import java.io.FileInputStream;
import java.util.Properties;

public class LoadXmlProperties {
    public static void main(String[] args) {
        LoadXmlProperties lxp = new LoadXmlProperties();
        try {
            Properties properties = lxp.readProperties();
            /*
             * Display all properties information
             */
            properties.list(System.out);

            /*
             * Read the value of data.folder and jdbc.url configuration
             */
            String dataFolder = properties.getProperty("data.folder");
            System.out.println("dataFolder = " + dataFolder);
            String jdbcUrl = properties.getProperty("jdbc.url");
            System.out.println("jdbcUrl = " + jdbcUrl);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public Properties readProperties() throws Exception {
        Properties properties = new Properties();
        FileInputStream fis = new FileInputStream("configuration.xml");
        properties.loadFromXML(fis);

        return properties;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:12:19.707

加载属性文件的代码是：

```
 Properties prop = new Properties();
    prop.load(new FileInputStream("C:\\prop.properties"));
    String path = prop.getProperty("pathname"); 
```

但是你有属性文件的硬编码路径：你可以将路径作为主要方法的 arg 传递：

```
public static void main(String Args[]){ 
    try {
        if(Args != null){
            if(Args[1] != null){//Load XML or prop File                 try{
                    properties.load(new FileInputStream(Args[1]));
                }catch(Exception e){
                    throw new Exception("Error loading PropertieFile: "+Args[1] + " :"+e.getMessage());
                }
            }else{
                throw new Exception("No File Found!");
            } 
```

# windows-8 - 用于 Dropbox、EverNote 和 Google Doc (WinRT) 的 SDK

> ID：15551065
> 
> 赞同：3
> 
> 时间：2013-03-21T15:01:02.263
> 
> 标签：windows-8, windows-runtime

是否有可用于 Dorpbox、EverNote 和 GoogleDoc 的官方 Winrt SDK。我在互联网上搜索了这个，但没有找到任何可行的解决方案。如果有人对此有更多了解（官方或 3rd 方 sdk），请与我分享您的想法。

提前致谢，

斯蒂芬

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:58:22.613

Dropbox 没有 WinRT api，可能在不久的将来不会改变，但你也可以使用 REST Api：

[https://www.dropbox.com/developers/core/api](https://www.dropbox.com/developers/core/api)

所以你可以简单地使用这个 REST api，因为 Windows 8/RT 支持 JavaScript 和 HTML 编程：

[http://msdn.microsoft.com/en-US/library/windows/apps/br229565](http://msdn.microsoft.com/en-US/library/windows/apps/br229565)

EverNote 和 GoogleDoc 也应该有一些 REST api。

# c++ - 如何在 C++ 中进行 XML 文本查询？

> ID：15551079
> 
> 赞同：1
> 
> 时间：2013-03-21T15:01:32.657
> 
> 标签：c++, xml, search, full-text-search

一整天我都在尝试找到一些方法在 C++ 中进行 XML 查询，但没有成功。我在 XML 方面没有太多经验，上一次我在 C++ 中做出更大的东西是大约 7 年前，所以我真的不知道现在发生了什么。

我想做的是能够在 XML 文件中搜索一些单词或字母，并作为回报获得具有该特定文本的特定元素或元素。例如，假设我们有一个这样的 XML：

```
<parent>
<node num="123" otherattrib="example"> This node has some text </node>
<node num="234" otherattrib=""> Something here as well </node>
</parent> 
```

我想在 xml 中查询字符串*“text”*，它会返回带有属性的节点`num="123"`。

在 C++ 中有没有好的方法来做到这一点？还有什么好的图书馆吗？

编辑：我正在使用的平台现在将是 Windows。

# javascript - 根据 JS 变量渲染 Grails 模板

> ID：15551082
> 
> 赞同：1
> 
> 时间：2013-03-21T15:01:37.367
> 
> 标签：javascript, jquery, ajax, grails

情况是：我有一个名为 status 的 javascript bool 变量。如果是真的，我想渲染一个 Grails 模板。如果它是假的，我想渲染另一个 Grails 模板。我的代码：

HTML/JS

```
<div id="content">
<g:javascript>
    $( function(){
        if( status==true ) {
            $.ajax({
                url: '/tool/home/renderSplash',
                type: 'POST',
                failure: function(){alert("Failed loading content frame"})
            }
        else{
            $.ajax({
                url: '/tool/home/renderContent',
                type: 'POST',
                failure: function(){alert("Failed loading content frame")}
            })
        }
    } )
</g:javascript>
</div> 
```

圣杯：

```
class HomeController {

  def index() {}

  def renderSplash() {
      render( template: "splash" )
  }

  def renderContent() {
      render( template: "content" )
  }
} 
```

我可以看到，POST 包含正确的模板数据，但它没有显示在屏幕上。

我做的正确吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T15:24:00.930

向呈现结果的 AJAX 调用添加成功处理程序。您需要一个占位符元素来呈现它。例子：

```
$.ajax({
       url: '/tool/home/renderContent',
       type: 'POST',
       failure: function(){alert("Failed loading content frame")},
       success: function(response) { $('#response').html(response); }
   })

...
<div id='response'></div> 
```

# python - 我可以使用 ModelForm 按范围过滤日期吗？

> ID：15551092
> 
> 赞同：0
> 
> 时间：2013-03-21T15:02:01.157
> 
> 标签：python, django

我想过滤列表中的一些模型。

我知道我可以`ModelForm`在我的视图中使用和过滤。

但我的问题是，如何利用 ModelForms 按范围过滤日期字段？

另外，我希望我的表单会为我的日期字段生成两个日期小部件，一个用于开始日期，另一个用于结束日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:13:33.980

您的表单将比简单的`ModelForm`. 也许您可以为模型中的每个子类化`ModelForm`并填充一个新的...`DateTimeField``DateTimeField`

至于查询的制作……这也将是一项工作。

`DateField`如果您只想过滤一个模型，请考虑硬编码

# c# - rdlc的动态填充

> ID：15551096
> 
> 赞同：-1
> 
> 时间：2013-03-21T15:02:07.727
> 
> 标签：c#, reportviewer

我写了这段代码：

```
namespace ImportarAlamo
{
    public partial class RelIndi : Form
    {
        public RelIndi()
        {
            InitializeComponent();
        }

        private void RelIndi_Load(object sender, EventArgs e)
        {
            reportViewer1.Visible = false;
        }

    private void button1_Click(object sender, EventArgs e)
    {
        reportViewer1.Visible = true;
        reportViewer1.Reset();
        fillrel();

        // Here is the part to populate the report :
        ReportDataSource DS = new ReportDataSource("individual2",fillrel());
        reportViewer1.LocalReport.DataSources.Clear();
        reportViewer1.LocalReport.ReportPath = @"C:\relatorios\Report8.rdlc";
        reportViewer1.LocalReport.DataSources.Add(DS); 
        reportViewer1.LocalReport.Refresh(); 

    }

    public DataSet fillrel()
    {
        DataSet uny = new DataSet();

        SqlConnection abre = Tconex.GetConnection();
        SqlDataAdapter da2 = new SqlDataAdapter();
        SqlCommand llena = new SqlCommand("rel_Noparam", abre);
        llena.CommandType = CommandType.StoredProcedure;
        da2.SelectCommand = llena;
        da2.Fill(uny,"rel");
        abre.Close();
        return uny;
    } 
```

report8.rdlc 什么都没有，现在代码没有错误，但是我可以在报告上放一个 tablix，我如何显示字段？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:05:36.717

您忘记将数据源添加到集合中：

```
ReportDataSource DS = new ReportDataSource("individual2",fillrel());
reportViewer1.LocalReport.DataSources.Clear();
reportViewer1.LocalReport.DataSources.Add(DS); 
```

# python - 使用 pandas 将 csv 文件中的数据读入时间序列

> ID：15551102
> 
> 赞同：3
> 
> 时间：2013-03-21T15:02:21.940
> 
> 标签：python, python-2.7, pandas, time-series

[**我的目标是（每天）将 EURUSD数据**](http://fxhistoricaldata.com/EURUSD/)读入一个时间序列对象，我可以在其中轻松地根据不规则的时间框架对信息进行切片、聚合和重新采样。这很可能是一个简单的答案。我正在使用 Python 进行数据分析，但似乎无法弥合差距。

下载并解压缩[**数据**](http://fxhistoricaldata.com/EURUSD/)后，我运行以下代码：

```
>>> import pandas as pd
>>> df = pd.read_csv('EURUSD_day.csv', parse_dates = {'Timestamp' : ['<DATE>', '<TIME>']}, index_col = 'Timestamp') 
```

到现在为止还挺好。我现在有一个以时间戳为索引的漂亮数据框。

但是，这本书暗示（第 295 页）我应该能够对数据进行子集化，如下所示，以查看 2001 年的所有数据。

```
>>> df['2001'] 
```

但是，这是行不通的。

阅读这个[问题和答案](https://stackoverflow.com/questions/13737992/indexing-timeseries-by-date-string)告诉我，我可以导入时间戳：

```
>>> from pandas.lib import Timestamp
>>> s = df['<CLOSE>'] 
```

这似乎适用于特定的一天：

```
>>> s[Timestamp('2001-01-04)]
0.9506999999 
```

然而，以下代码为我想要的 2001 年所有数据范围产生了一个值。

```
>>> s[Timestamp('2001')]
0.8959 
```

我知道我缺少一些简单的东西，一些基本的东西。任何人都可以帮忙吗？

谢谢你，布赖恩

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T15:08:53.570

pg上的例子。295 正在 Series 对象上执行，这就是使用年份进行索引的原因。使用 DataFrame，您可能希望`df.ix['2001']`获得相同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:23:25.760

如果要获取所有列，则`df.ix['2001']`.

如果您只对“CLOSE”感兴趣，因为您已经这样做了`s = df['<CLOSE>']`，您可以通过以下方式获得 2001 年的值`s['2001']`

# c# - 如何使用委托来获取对列表中项目的引用

> ID：15551103
> 
> 赞同：0
> 
> 时间：2013-03-21T15:02:30.667
> 
> 标签：c#

目前我有一个包含结构的列表，我使用委托在列表中查找结构，如下所示：

```
stTest item = myList.Find(delegate(stTest test) 
{
   return ( string.Compare(test.StringA, somestring, true) == 0 );
}); 
```

这对于获取项目非常有效，但似乎它返回的是它找到的项目的副本而不是实际项目，所以如果我修改项目中的字段（我这样做），更新不会生效在列表中的项目上。

有没有办法让委托返回对列表中项目的引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:44:26.007

如果您试图就地改变对象，您可以通过使用如下扩展方法以稍微更好的语法“伪造它”：

```
public delegate void Mutator<T>(ref T arg) where T : struct;

public static void FindAndMutate<T>(
    this IList<T> self,
    Predicate<T> predicate,
    Mutator<T> mutator) where T : struct
{
    if (self == null) { throw new ArgumentNullException("self"); }
    if (predicate == null) { throw new ArgumentNullException("predicate"); }
    if (mutator == null) { throw new ArgumentNullException("mutator"); }

    for (int i = 0; i < self.Count; ++i) {
        var value = self[i];

        if (predicate(value)) {
            mutator(ref value);

            self[i] = value;
        }
    }
} 
```

用法如下所示：

```
struct AStruct
{
    public string String;
    public int Int;
}

var list = new[] {
    new AStruct() { String = "hello", Int = 0},
    new AStruct() { String = "world", Int = 1}
};

list.FindAndMutate(i => i.Int == 0, (ref AStruct i) => i.String = "goodbye"); 
```

这显然不是一个完美的解决方案，并且确实涉及在扩展方法内部复制结构。

真的，如果您需要引用语义，您应该使用引用类型而不是值类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:16:18.830

`struct`如果您将列表成员从 更改为，它将起作用`class`，因为结构总是被复制的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:04:16.483

```
item=myList.FirstOrDefault(entry=> 
     string.Compare(entry.StringA, someString, true)==0); 
```

注意 struct 不是引用类型，你不能这样做，除非你想把它装箱成​​引用类型，但这会带来额外的开销。

如果您真的想使用引用，请考虑用类替换您的结构。

# php - 本文档注释在 PHP 中是什么或如何使用

> ID：15551112
> 
> 赞同：0
> 
> 时间：2013-03-21T15:02:47.893
> 
> 标签：php, comments

我经常看到这类有据可查的评论。

```
/*
* @author      some name
* @category    Core
* @package     /dir/name
* @version     1.6.4
*/

function ... (){}

*** code here *** 
```

我想知道因为有这么多人在使用它（大多数开源）

它们是什么以及我如何使用这种方法或了解更多关于这种东西的信息。

我不是在寻找一个快速的答案，这里做你的研究：

希望有一个有用的答案，解释它是什么，花时间编写额外代码有什么好处等等......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:05:36.017

它们是 PHP 文件注释中的文档标记。常用于生成文档的应用程序，例如[PHP Documentator](http://www.phpdoc.org/docs/latest/index.html)

从介绍：

> phpDocumentor 2 是一个可以从 PHP 源代码生成文档的工具。使用此文档，您可以为您的消费者提供有关源中嵌入的功能的更多信息，而不仅仅是您的用户界面中对他们可用的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:05:54.780

它们被称为*注释*，通常（但不仅）用于文档目的。尝试阅读：[http ://en.wikipedia.org/wiki/PHPDoc](http://en.wikipedia.org/wiki/PHPDoc)

# c# - 发送磁贴通知 - windows phone

> ID：15551115
> 
> 赞同：2
> 
> 时间：2013-03-21T15:02:54.207
> 
> 标签：c#, windows-phone-7

Helo，我想问你，我是否可以使用 WCF 服务将磁贴通知从一部手机发送到另一部手机，反之亦然？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:17:58.953

要将推送发送到其他手机，您必须拥有 ChannelURI。有关于它的好文章 [http://msdn.microsoft.com/en-us/library/hh221549.aspx](http://msdn.microsoft.com/en-us/library/hh221549.aspx)

当你有这个地址时，你必须发送特殊的 XML 数据

```
 string textTitle = tbxTitle.Text;
        string textSubtitle = tbxSubtitle.Text;

        string deviceUri = tbxUri.Text;

        string msg =
            "<?xml version=\"1.0\" encoding=\"utf-8\"?>" +
            "<wp:Notification xmlns:wp=\"WPNotification\">" +
                "<wp:Toast>" +
                "<wp:Text1>" + textTitle + "</wp:Text1>" +
                "<wp:Text2>" + textSubtitle + "</wp:Text2>" +
                "</wp:Toast>" +
            "</wp:Notification>";

        byte[] msgBytes = new UTF8Encoding().GetBytes(msg);

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(channelUri);
        request.Method = WebRequestMethods.Http.Post;
        request.ContentType = "text/xml";
        request.ContentLength = msg.Length;
        request.Headers["X-MessageID"] = Guid.NewGuid().ToString();
        request.Headers["X-WindowsPhone-Target"] = "toast";
        request.Headers["X-NotificationClass"] = "2";

        Stream requestStream = request.GetRequestStream();
        requestStream.Write(msgBytes, 0, msgBytes.Length);
        requestStream.Close(); 
```

# php - Laravel Fluent 中的条件连接

> ID：15551117
> 
> 赞同：5
> 
> 时间：2013-03-21T15:03:01.487
> 
> 标签：php, laravel

在 Laravel PHP 框架中，您可以在 where 子句中使用条件，如下所示（Fluent）：

```
...
->where(function($query) use ($var) {
    if(isset($var)) {
        $query->where('something', '=', $var);
    }
})
->... 
```

因此，如果您没有 $var 变量，则不会将 where 子句添加到查询中。

我想做同样的事情，但是使用连接子句，例如，仅当设置了 $var 时才与另一个表连接，但这不起作用，查询崩溃：

```
...
->join('tableB', function($query) use ($var) {
    if(isset($var)) {
        $query->on('tableA.id', '=', 'tableB.id'); 
    }
})
->... 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T16:04:19.243

您不需要在一次强制转换中链接所有方法。例如：

```
// Instantiates a Query object.
$query = Db::table('posts')->where('published', '=', '1');

// Adds conditional join and where
if (Input::has('category')) {
    $query->join('categories', 'categories.id', '=', 'post.category_id')
        ->where('categories.permalink', '=', Input::get('category'));
}

// Adds another clause
$query->order_by('created_at');

// Fecthes results
$results = $query->get() 
```

# gxt - 在 XTemplate 中获取数组的大小

> ID：15551122
> 
> 赞同：0
> 
> 时间：2013-03-21T15:03:26.650
> 
> 标签：gxt

首先，我正在使用 GXT 2.2.5 和 GWT 2.3。

我有一个 ListView 显示用户生成的项目。我希望它显示已经输入的项目，或者如果商店是空的，则显示“没有附加项目”的单行。

我想我可以在模板中使用“tpl if”标签，但是如何确定商店的大小以进行比较？

换句话说，我在下面的“大小”中使用什么值？

```
<tpl if="size == 0">
  <p>No Items attached</p>
</tpl>
<tpl if="size > 0">
  <tpl for =".">
    ...
  </tpl>
</tpl> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:37:09.763

GXT 2 XTemplates 是基于 JavaScript 的，所以不用键入`size`, 使用`length`, 保存 JavaScript 数组大小的属性名称。在 GXT 3 中，XTemplates 被重写以与任何 Java 对象一起使用，所以期望像您在此处编写的 size 方法。

[来自http://www.sencha.com/examples-2/#listview](http://www.sencha.com/examples-2/#listview)的修改模板：

```
private native String getTemplate() /*-{
  return ['<tpl if="length == 0">',
              'nothing to show',
          '</tpl>',
          '<tpl if="length != 0">',
              '<tpl for=".">',
                  '<div class="thumb-wrap" id="{name}">',
                      '<div class="thumb"><img src="{path}" title="{name}"></div>',
                      '<span class="x-editable">{shortName}</span>',
                  '</div>',
              '</tpl>',
              '<div class="x-clear"></div>',
          '</tpl>'
   ].join("");
 }-*/; 
```

# mysql - 以另一个变量的名称作为其值的变量 - MySQL

> ID：15551123
> 
> 赞同：0
> 
> 时间：2013-03-21T15:03:28.193
> 
> 标签：mysql, variables

```
SET @session = '1'; SET @session = '[@session]';
SELECT @session; 
```

这应该打印 -:`[1]`但它正在打印`[@session]`；

有什么问题？感谢帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:04:48.230

结果符合预期。`[@session]`是设置为 variable 的最后一个值`@session`。

```
SET @session = '1';           -- <<== first value
SET @session = '[@session]';  -- <<== second value (overrides the first value)
SELECT @session; 
```

我想你的意思是，

```
SET @session = '1';           
SET @session = CONCAT('[', @session, ']');  
SELECT @session; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d41d8/9369)

# hibernate - Hibernate：如何每次从数据库中读取实体，但从不更新到数据库？

> ID：15551125
> 
> 赞同：0
> 
> 时间：2013-03-21T15:03:36.220
> 
> 标签：hibernate

在我的 Spring-MVC（连同 Hibernate）项目中，我有一个名为“Division”的表，其中包含研究所中的所有部门。它在另一个名为“分配”的表中被引用。这是我想要实现的目标？1\. 总是使用 Hibernate 从数据库中获取分部数据。但切勿在保存“作业”或任何其他实体时更新部门数据。

我没有使用任何缓存。@Immutable 只从数据库中读取一次数据，但是，我每次访问时都想从数据库中获取“Division”数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:39:50.397

你应该使用这样的东西：

```
@ManyToOne
@JoinColumn(name = "column_name", referencedColumnName = "reference",
insertable =  false, updatable = false)
private aaa bbb; 
```

注意可插入和可更新的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T17:35:14.487

如果我理解正确，你有类似的东西：

```
@Entity
public class Division {
   ...
   @OneToMany
   Set<Assignment> getAssignments(){}
   ...
}

@Entity
public class Assignment{
   ...
   @ManyToOne
   Division getDivision(){}
   ...
} 
```

如果是这样的话；那么你只需要一个 FetchType.EAGER：

```
@Entity
public class Assignment{
   ...
   @ManyToOne(fetch = FetchType.EAGER)
   Division getDivision(){}
   ...
} 
```

# c - 与 LPC1786 的串行通信

> ID：15551126
> 
> 赞同：2
> 
> 时间：2013-03-21T15:03:39.553
> 
> 标签：c, linux, embedded, serial-port, lpc

我如何通过串行端口向 LPC 1786 微控制器发送一些命令。为了完成此任务，我使用此代码打开串行端口。

```
struct termios tio;
int tty_fd;

memset(&tio,0,sizeof(tio));
tio.c_iflag = 0;
tio.c_oflag = 0;
tio.c_cflag = CS8|CREAD|CLOCAL;           // 8n1, see termios.h for more information
tio.c_lflag = 0;
tio.c_cc[VMIN] = 1;
tio.c_cc[VTIME] = 5;

tty_fd = open(device, O_RDWR | O_NONBLOCK);
cfsetospeed(&tio, B9600);            // 115200 baud
cfsetispeed(&tio, B9600);            // 115200 baud
tcflush(tty_fd, TCIFLUSH); 
```

这适用于使用 (iMX53) 的嵌入式 linux 系统。当我在我的 PC 上编译代码并运行它时。我明白了：

```
sent:    ?
recieve: Sinchronized<CR><LF>
sent:    Sinchronized<CR><LF>
recieve: Synchronized<CR>OK<CR><LF>
sent:    16000<CR><LF>
recieve: 16000<CR>OK<CR><LF> 
```

女巫很好。当我交叉编译它并将其上传到系统时，我得到了这个。

```
Sent:  ?
HEX:   0x53 0x79 0x6E 0x63 0x68 0x72 0x6F 0x6E 0x69 0x7A 0x65 0x64 0xA 0xA 0x53 0x79 0x6E 0x63 0x68 0x72 0x6F 0x6E 0x69 0x7A 0x65 0xA
ASCII: SynchronizedSynchronizedOKOKnchronized1K024K024chronized1

Sent:  ?
HEX:   0xA 0xA 0xA 0xA 0xA 0xA 0xA 0x30 0xA 0xA 0x31 0xA 0xA 0xA 0xA 0xA 0xA 0x34 0xA 0xA 0x31 0xA 0xA 0xA 0xA 0xA 0xA 0xA 0xA 0xA 0A
ASCII: 014141hronized1111111ronized1 
```

女巫有点毁了我的一天。对于写作和阅读，我正在使用 write & read 功能。我敢打赌这与我打开串口的方式有关。但是有什么不对。我尝试了不同的设置，但收效甚微。在最好的情况下，我得到“?????1???”作为回应。而且大多数时候没有什么可读的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T19:06:12.987

根本问题是您的代码表明您没有（正确）初始化 tty 端口。本质上，初始化不会调用`tcsetattr()`来安装您尝试指定的更新配置。

初始化tty端口的正确方法是打开端口，获取当前属性，保存当前属性以在程序退出时恢复，修改属性，安装属性。并始终测试系统调用的返回码。

```
 tty_fd = open(device, O_RDWR | O_NONBLOCK);
    if (tty_fd< 0) {
        syslog(LOG_DEBUG, "failed to open: %d, %s", tty_fd, strerror(errno));
        exit (-1);
    }
    rc = tcgetattr(tty_fd, &tio);
    if (rc < 0) {
        syslog(LOG_DEBUG, "failed to get attr: %d, %s", rc, strerror(errno));
        exit (-2);
    }
    savetio = tio;    /* preserve original settings for restoration */

    spd = B9600;
    cfsetospeed(&tio, (speed_t)spd);
    cfsetispeed(&tio, (speed_t)spd);

    cfmakeraw(&tio);

    tio.c_cc[VMIN] = 1;
    tio.c_cc[VTIME] = 5;

    tio.c_cflag &= ~CSTOPB;
    tio.c_cflag &= ~CRTSCTS;    /* no HW flow control? */
    tio.c_cflag |= CLOCAL | CREAD;
    rc = tcsetattr(tty_fd, TCSANOW, &tio);
    if (rc < 0) {
        syslog(LOG_DEBUG, "failed to set attr: %d, %s", rc, strerror(errno));
        exit (-3);
    } 
```

当然，可能还有布线和硬件问题仍有待解决，但由于 tty 端口尚未初始化为您想要或需要的操作状态，因此没有什么可能按您预期的那样运行。

这是[对串行端口进行编程的](http://www.cmrr.umn.edu/~strupp/serial.html)指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T17:04:28.540

这个问题有很多很好的调试评论，但这里有一个总结的项目列表来检查串行链接：（添加一些我自己的并倾向于开发系统的启动）

这两个是某种初始设计级别检查。有时您最终会重新访问它们：

*   检查数据表：电压电平是否匹配？例如“真”RS232 vs TTL，12v vs 5v vs 3v
*   拔掉你的电缆或电路连接：接地，如果差分 TX+/TX- 等匹配，rx 会去 tx 吗？（特别是如果它是定制或手工制作的电缆）

这些更通用：

*   检查波特率是否匹配
*   检查两端的数据、停止位和流控设置是否匹配
*   较低的波特率是否有效？
*   可能尝试备用电缆？
*   可能尝试另一台 PC（笔记本电脑交流电源有一个奇怪的接地回路，曾经导致问题）
*   如果可能，将一端设为“已知良好”的数量。

这些是罕见的检查：

*   检查提供串行外设波特率的任何输入时钟设置。
*   打破示波器并查看信号是否损坏（您的电平变化如何“方正”，它们是否与您认为的硬件电压电平相匹配）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T07:21:54.533

除了其他答案中提到的问题外，一个可能的原因是馈入 MCU UART 的预分频器时钟错误。UART 需要 +- 3% 的时钟精度。如果您的预分频器不是那么准确，那么您将*遇到*问题中描述的那种问题：数据在大多数情况下看起来都很好，然后突然之间就会出现垃圾。

对此进行故障排除时，您需要检查接收器端的溢出、帧错误等。检查信号并用示波器测量波特率。没有示波器就*无法*开发嵌入式应用程序，它与调试器一样重要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T12:11:51.930

我本质上是一个硬件人，所以当这样的事情发生时，我倾向于从底层开始：

*   拿出示波器或逻辑分析仪，查看传输的位。检查波特率。检查字符。为您解释位的范围在这里有很大的帮助:)

*   如果它们正常，请检查字节是否正常进入嵌入式处理器。检查中断服务程序。在进入时设置一个位并在退出前清除它。检查进入的字符是否超出 ISR。

从那里开始工作 - 是否有一些低级驱动程序从 ISR 获取数据？

# list - 列表中的Itemtap在sencha touch2中不起作用

> ID：15551129
> 
> 赞同：0
> 
> 时间：2013-03-21T15:03:46.973
> 
> 标签：list, sencha-touch, sencha-touch-2, tap

我有根视图 Extends `Ext.navigation.View`。我正在推送一个名为 Add Item 的视图。

```
 this.push({
        title:'Add Item',
        xtype:'additempanel'
    }); 
```

从那个视图中，我再次推送一个名为 Select Category 的视图

```
button.up('itempanel').push({
        xtype: 'selectcategorypanel',
        title: 'Select Category'
    }); 
```

我在这个视图中有一个列表。但是点击这个列表上的一个项目正在调用根视图的 itemtap。

我的应用控制器

```
config: {
        refs: {
items :"itempanel",
SelectCategoryPanel : "selectcategorypanel"
}

'selectCategoryPanel list' : {
                itemtap: 'selectCategoryItemTap'
            }

  'itempanel list' : {
                itemtap: 'showPost'
            }, 
```

show post 方法总是被调用。selectCategoryPanel 的项目点击永远不会被调用，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:48:56.823

您的`selectCategoryItemTap`侦听器选择器似乎不正确。您可以通过使用`xtype`视图的 或通过设置另一个`ref`指向列表的方式来修复它。

作者`xtype`：

```
control: {
    'selectcategorypanel list': {
        itemtap: 'selectCategoryItemTap'
    }
} 
```

作者`ref`：

```
refs: {
    selectCategoryPanelList: 'selectcategorypanel list'
},
control: {
    selectCategoryPanelList: {
        itemtap: 'selectCategoryItemTap'
    }
} 
```

现在`'selectCategoryPanel list'`选择器实际上并没有指向 Sencha 可以找到的任何东西，因此它无法将侦听器附加到它。

# html - HTML联系表格格式电子邮件奇怪

> ID：15551132
> 
> 赞同：0
> 
> 时间：2013-03-21T15:03:52.133
> 
> 标签：html

我正在制作一个用户可以输入的联系表单，然后当他们单击提交时，它会打开带有他们输入的 Outlook。问题是输出真的很乱。它输出如下：

```
name=John+Smith&email=I+am+contacting+you&comment=example+text+here 
```

我想输出更像：

```
name=John Smith  email=I am contacting you comment=example text here 
```

使用此 HTML5 代码是否可行：

```
 <form method="post" name="contact" action="mailto:myemail@gmail.com">          
                <p>         
                <label>Name</label>
                <input name="name" value="Your Name" input type="text" size="50" />
                <label>Email</label>
                <input name="email" value="Your Email" input type="text" size="50" />
                <label>Your Comments</label>
                <textarea rows="5" cols="5" name="comment"></textarea>
                <br />  
                <input class="button" input type="submit" />        
                </p>        
            </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:10:25.170

由于您没有另外指定，因此您的表单使用默认的 enctype “发送” `application/x-www-form-urlencoded`。

将属性添加`enctype="text/plain"`到您的表单元素。

# html - 带有一个输入“文本”的 html 页面。焦点在哪里？

> ID：15551136
> 
> 赞同：3
> 
> 时间：2013-03-21T15:04:05.040
> 
> 标签：html, focus

因为我在使用 onblur/onkeydown（用于标签）等时遇到了一些问题。

我想问这个问题：

如果我有一个只有一个输入文本的页面，然后我去那里，然后单击“选项卡”，焦点在哪里？我想知道，因为我想强制输入文本不要失去焦点......

我的页面是这样的：

```
<!docType>
<html>
   <body>
      <div><input type='text' /></div>
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:06:42.207

如果您想特别关注该文本字段而不是使用`autofocus`属性

```
<input type="text" autofocus /> 
```

或者，如果您想以自定义方式映射选项卡，请使用`tabindex`属性

```
<a href="#" tabindex="2">Tab 2</a><br />
<a href="#" tabindex="1">Tab 1</a><br />
<a href="#" tabindex="3">Tab 3</a> 
```

当有 1 个输入文本字段并且之后没有任何内容时，甚至没有链接，焦点可能会转到浏览器的地址栏，或者如果用户正在添加任何浏览器，它可能会移动到添加栏，在附加栏上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:21:34.497

在 Chrome 中，当您离开输入标签并且页面上没有其他带有标签索引的元素时，焦点将更改为浏览器的 URL 栏。您可能无法采取任何措施来防止这种情况发生。

当您再次选项卡时，它将返回到该元素 - 再次提供它是页面上唯一具有选项卡索引的元素。

然后，当您*单击*返回页面（而不是输入）时，焦点不会自然地恢复到输入字段（再次在 Chrome 中进行测试），因此您可能需要使用 JavaScript 将焦点强制放在元素上。

# eclipse - 亚行：无法连接

> ID：15551137
> 
> 赞同：0
> 
> 时间：2013-03-21T15:04:07.363
> 
> 标签：eclipse, android-emulator, adb

我正在开发一个android应用程序，但是模拟器的测试速度很慢，所以我创建了一个带有虚拟框的虚拟模拟器。安卓虚拟机。我昨天终于让它工作了。我可以用 ecplise 运行我的 vrtual 模拟器。但是今天我再也无法与 adb 建立联系了。

我的虚拟模拟器给了我一个 IP 地址，deloper 选项 USB 调试已打开。我的虚拟机肯定有与互联网的连接。（适配器 1 设置为仅主机 - 适配器 2 为桥接适配器）

但是当我尝试 adb connect 192.168.56.102 时说 uable to connect to 192.168.56.102:5555 或守护进程成功启动无法将 192.168.56.102 解析为：

我试图杀死它并再次重新启动它。但是还是连接不上！！

我不知道该怎么办，有人可以告诉我如何解决吗？

# html - 重定向 URL 并显示通知

> ID：15551138
> 
> 赞同：0
> 
> 时间：2013-03-21T15:04:09.977
> 
> 标签：html, http-status-code-301, http-status-code-302

我的公司有一个子域，用于存放不再使用的资源库。有数百个链接看起来像**sub.domain.com/some-resource.pdf**。我们将重定向到**domain.com/new-library**。

我们想要做一个两部分的重定向，并通知正在发生的事情。用户首先应该会看到一条消息，上面写着“您要查找的页面不可用，您现在正在被重定向”。几秒钟后，它应该会反弹到 domain.com/new-library。

我在其他网站上看到过这个，但不知道如何实现它。我知道如何重定向域，但有人可以在再次更改页面之前给我有关如何显示消息的信息吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-21T22:45:58.553

我也只是在寻找这个，并在 php 手册的评论中找到了一些帮助。你可能想试试这个：

```
<?php 
 header( "refresh:5;url=domain.com/new-library" ); 
 echo 'The page you are looking for is not available and you will be redirected in about 5 secs. If not, click <a href="domain.com/new-library">here</a>.'; 
?> 
```

# c++ - 我应该为大文件使用哪个 libxml2 API？

> ID：15551141
> 
> 赞同：0
> 
> 时间：2013-03-21T15:04:21.217
> 
> 标签：c++, sax, xmlreader, libxml2

我们的程序目前使用 libxml2 DOM API ( `xmlReadFile`) 将整个文件加载到内存中。不幸的是，这在“大型”XML 文件上会失效，因为[libxml2 DOM 的基本内存消耗大约是基本文件大小的 4-5 倍](http://www.xmlsoft.org/xmlmem.html#General4)。

当我不想将整个树存储在内存中时，似乎 libxml2 提供了两个用于读取 XML 的 API：[SAX2](http://xmlsoft.org/html/libxml-SAX2.html)和[xmlReader](http://xmlsoft.org/xmlreader.html)。

我还没有深入研究 API，但我想知道在哪种情况下哪个更可取？

注意：我需要对 XML 文件做的就是用 XML 文件中的数据填充一些 C++ 数据结构。而这些又会比（非常冗长的）XML 定义小很多。目前，使用`xmlReadFile`DOM API 处理 20MB 的 XML 文件需要大约 100MB 的内存。这样一个文件在内存中的 C++ 数据更像是 5MB——所以我可以从 1:4 变为 4:1，这已经很有帮助了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:07:13.550

我遵循这种方法，如果处理是稀疏的（这里和那里只需要一个元素）xmlReader 更好，如果你需要处理所有元素，SAX 更好。虽然，关于您是要推送处理还是希望处理推送您的代码的意见可能会发挥作用......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-14T07:24:52.580

*   如果您需要处理大型 XML 文档，那么大小将成为首要考虑因素。正如您所看到的 20MB -> 100MB 用于 DOM 解析，如果您得到比这大得多的成本，那可能会非常昂贵，而 SAX 可能是处理它的唯一方法。对于嵌入式或内存受限的设备，即使是小文件也可能需要 SAX。

*   如果你想在文件完成之前开始解析，SAX 是要走的路。如果您正在编写浏览器、流式传输 XML 或需要响应能力，那么您将需要使用 SAX。

*   SAX 更痛苦，如果您可以摆脱通常会导致更少代码和更简单代码的 DOM 解析，例如，对于更简单的 DOM 查询，您可以避免使用状态机。如果您只关心文档中的少数字段，您甚至可以避免直接查询 DOM 解析器并改为查询 XSLT。

# templates - 如果 ArrayController 在 Ember 中不包含模型，则使用 bindAttr 禁用按钮

> ID：15551142
> 
> 赞同：2
> 
> 时间：2013-03-21T15:04:22.890
> 
> 标签：templates, binding, ember.js

我有一个包含按钮的模板：

```
<button {{action clearAll}} >Clear All</button> 
```

模板的 Controller 是一个`ArrayController`. 如果 ArrayController 的 content 属性包含零项，我希望禁用该按钮。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T15:06:20.937

答案是使用*[计算属性](http://emberjs.com/guides/object-model/computed-properties/)*。计算属性允许您基于控制器状态而不是原始布尔属性进行计算（本质上是创建由多个属性或不同类型的属性支持的 getter）。

为了使此函数正确触发绑定，您需要声明该函数所依赖的属性 - 如果修改了哪些属性应该导致更新。你可以使用：`.property('content.length')'。在这种情况下，函数依赖于单个属性，但它可能依赖于多个属性。

在模板中：

```
<button {{action clearAll}} {{bindAttr disabled="anyEntries"}}>Clear All</button> 
```

在控制器中：

```
 anyEntries: function() {
    return this.get('content.length') == 0;
  }.property('content.length') 
```

# android - 查找适当的 Google 支持的地点类型时出现问题

> ID：15551145
> 
> 赞同：0
> 
> 时间：2013-03-21T15:04:27.527
> 
> 标签：android, google-maps, google-places-api

当用户单击应用程序中的按钮时，我正在尝试在我的应用程序中实现 GPS。它带来了指定类型“宗教组织”的最近位置列表

所以我的问题是：

1-是否有类型但我没有得到请指出我的类型。

2-如果没有类型，有没有办法让类型使用它。

3-如果以上都不是，我该怎么办。

请与我分享任何对我的案例“有帮助”的东西，这样我就不能再谈论这个了——因为我是 Android 新手——

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T01:13:52.930

好的，我的第三个也是最后一个答案！

您可以在您的用户位置附近搜索“宗教组织”！

在我之前的答案中，我希望将搜索结果过滤到仅宗教组织，这是您无法做到的。但是你可以在一个地区搜索“宗教组织”！我不敢相信我错过了！

继承人演示：继承人演示：http: **[//jsfiddle.net/Homeliss/CZCLv/](http://jsfiddle.net/Homeliss/CZCLv/)**

它使用的代码：

```
function performSearch() {
    var request = {
        location: new google.maps.LatLng(-27.420538,153.028107),
        radius: '500',
        query: 'religious organization'
    };
    service.textSearch(request, textsearchcallback);

    return false;
}

function textsearchcallback(results, status) {
    if (status == google.maps.places.PlacesServiceStatus.OK) {
        for (p in results) {
            $('#placename').append(JSON.stringify(results[p].name) + '<br />');
            //For More Detail Use This:
            //$('#placename').append(JSON.stringify(results[p]) + '<br />');
        }
    } else {
        alert("ERROR");
    }
} 
```

在我的示例中，我使用了[Text Search](https://developers.google.com/maps/documentation/javascript/places#TextSearchRequests)，但 Nearby Search 或 Radar Search 可能更适合您的需求，只需阅读有关它们有何不同的文档即可。

例如：雷达搜索返回更多结果，但每个结果的细节都比附近搜索少。然后，如果用户单击结果，您可以执行 Place Details 请求以获取更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:20:46.763

您在搜索 Google 地图时在结果中看到的宗教组织来自该公司的 Google Plus 页面。Places API 看不到此信息。

您有 2 个选项：

## 1：搜索谷歌加

[Google Plus API](https://developers.google.com/+/api/)不允许您搜索类别，但您可以尝试使用这个[非官方的 API](https://github.com/mohamedmansour/google-plus-extension-jsapi#readme)。我对任何一个都不够熟悉，无法提供帮助。

## 2：使用另一个列表

尝试查找由其他人编制的组织列表。如果找不到，可以自己编译。不过，这可能很耗时。

*   [http://en.wikipedia.org/wiki/Category:Religious_organizations](http://en.wikipedia.org/wiki/Category:Religious_organizations)
*   [http://en.wikipedia.org/wiki/List_of_religious_organizations](http://en.wikipedia.org/wiki/List_of_religious_organizations)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T03:57:10.303

你是说[这个列表](https://developers.google.com/places/documentation/supported_types)吗？您需要将它与[Place Searches](https://developers.google.com/maps/documentation/javascript/places#place_searches)一起使用。

我没有看到宗教组织的类型，但我确实看到了`place_of_worship`, `church`, `cemetary`, `mosque`,`hindu_temple`和`synagogue`

# android - 实现 ActionBar 导航列表 + ListFragment

> ID：15551146
> 
> 赞同：0
> 
> 时间：2013-03-21T15:04:27.617
> 
> 标签：android, android-layout, android-fragments, android-actionbar

应用程序应下载数据并将其提供给 listFragment obj，但它仅针对 ActionBar 下拉列表中的第一项“今天”执行此操作。当我选择第二个项目“Soon”时，应用程序崩溃并出现错误。

```
03-21 14:53:05.272: E/AndroidRuntime(5289): FATAL EXCEPTION: main
03-21 14:53:05.272: E/AndroidRuntime(5289): java.lang.IllegalStateException: commit already called 
```

我知道`commit()`多次调用会产生该错误，但没有提交数据不会显示在屏幕上。请帮助我，我不知道如何解决它。任何帮助将不胜感激。

公共类 MainActivity 扩展 Activity {

```
 ParkFragment mFragment;
    ParkFragment mFragment2;
    FragmentTransaction transaction = getFragmentManager().beginTransaction();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main); 

        final String[] actions = new String[] {"Today","Soon"};
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(getBaseContext(), android.R.layout.simple_spinner_dropdown_item, actions);

        ActionBar actionBar = getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);

        ActionBar.OnNavigationListener navigationListener = new OnNavigationListener() {

            @Override
            public boolean onNavigationItemSelected(int itemPosition, long itemId) {
                if (actions[itemPosition] == "Today"){
                    if (mFragment2 != null){transaction.detach(mFragment2);}
                    if (mFragment == null){
                        mFragment = new ParkFragment("url1",MainActivity.this);
                        transaction.add(android.R.id.content, mFragment);
                        transaction.commit();
                    }else{
                        transaction.attach(mFragment);
                        transaction.commit();
                    }
                   }
                   if (actions[itemPosition]== "Soon"){
                       if (mFragment != null){transaction.detach(mFragment);
                       System.out.println("Detached");}
                    if (mFragment2 == null){
                        mFragment2 = new ParkFragment("url2",MainActivity.this);
                        transaction.add(android.R.id.content, mFragment2);
                        transaction.commit();
                    }else{
                        transaction.attach(mFragment2);
                        transaction.commit();
                    }       
                }
                return true;
            }
        };

        actionBar.setListNavigationCallbacks(adapter, navigationListener);

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:12:35.970

使您`FragmentTransaction`的局部变量而不是成员变量。

伪：

```
if (...) {
   FragmentTransaction transaction = getFragmentManager().beginTransaction(); 
   //add.. do stuff
   transaction.commit();
} else {
   FragmentTransaction transaction = getFragmentManager().beginTransaction(); 
   //add.. do stuff
   transaction.commit();
} 
```

# php - 在 2x4 表格中显示表单数据（50 个不同的下拉菜单）

> ID：15551147
> 
> 赞同：0
> 
> 时间：2013-03-21T15:04:28.420
> 
> 标签：php, forms, increment

我有一个包含 50 多个不同下拉菜单的表单。用户只能从 50 个中的 8 个中进行选择，因此我希望使用 2x4 表。现在，我有一个设置为0的变量$ selectCount，任何时候选择下拉菜单，我都会在变量中添加1（++ $ selectCount）。然后，我有以下代码：

```
if ($selectCount = 2) {
echo "</tr><tr>";}
if ($selectCount = 4) {
echo "</tr><tr>";}
if ($selectCount = 6) {
echo "</tr><tr>";} 
```

由于我不知道的原因，即使在 $selectCount 的值为奇数的情况下，表格行也会结束创建 1x8 表格。

这是代码的较大部分，以更好地详细说明问题：

```
<tr>
<?php if(!empty($_POST['one'])) {

echo "<td><img src='image folder/acct.jpg' style='display:inline; -moz-border-radius: 10px; -webkit-border-radius: 10px; -webkit-box-shadow:0 0 20px blue; -moz-box-shadow: 0 0 20px blue; box-shadow:0 0 20px;'/>";
echo "<p style='color:white; margin-left: 7px; font-size: 14px;'>" . $_POST['one'] . "</p></td>";

$selectCount = ++$selectCount;

if ($selectCount = 2) {
echo "</tr><tr>";}
if ($selectCount = 4) {
echo "</tr><tr>";}
if ($selectCount = 6) {
echo "</tr><tr>";}

}

?>

<?php if(!empty($_POST['two'])) {

echo "<td><img src='image folder/alyt.jpg' style='display:inline; -moz-border-radius: 10px; -webkit-border-radius: 10px; -webkit-box-shadow:0 0 20px blue; -moz-box-shadow: 0 0 20px blue; box-shadow:0 0 20px;'/>";
echo "<p style='color:white; margin-left: 7px; font-size: 14px;'>" . $_POST['two'] . "</p></td>";

$selectCount = ++$selectCount;

if ($selectCount = 2) {
echo "</tr><tr>";}
if ($selectCount = 4) {
echo "</tr><tr>";}
if ($selectCount = 6) {
echo "</tr><tr>";}

}

?>

<?php if(!empty($_POST['three'])) {

echo "<td><img src='image folder/ar.jpg' style='display:inline; -moz-border-radius: 10px; -webkit-border-radius: 10px; -webkit-box-shadow:0 0 20px blue; -moz-box-shadow: 0 0 20px blue; box-shadow:0 0 20px;'/>";
echo "<p style='color:white; margin-left: 7px; font-size: 14px;'>" . $_POST['three'] . "</p></td>";

$selectCount = ++$selectCount;

if ($selectCount = 2) {
echo "</tr><tr>";}
if ($selectCount = 4) {
echo "</tr><tr>";}
if ($selectCount = 6) {
echo "</tr><tr>";}

}

?>

<?php if(!empty($_POST['four'])) {

echo "<td><img src='image folder/blgs.jpg' style='display:inline; -moz-border-radius: 10px; -webkit-border-radius: 10px; -webkit-box-shadow:0 0 20px blue; -moz-box-shadow: 0 0 20px blue; box-shadow:0 0 20px;'/>";
echo "<p style='color:white; margin-left: 7px; font-size: 14px;'>" . $_POST['four'] . "</p></td>";

$selectCount = ++$selectCount;

if ($selectCount = 2) {
echo "</tr><tr>";}
if ($selectCount = 4) {
echo "</tr><tr>";}
if ($selectCount = 6) {
echo "</tr><tr>";}

}

?> 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:08:40.383

您不是在比较值，而是在分配它们：

```
if ($selectCount = 2) { 
```

应该：

```
if ($selectCount == 2) { 
```

或者：

```
if ($selectCount === 2) { 
```

第一条`if`语句分配`2`给您的变量并`true`始终评估为。

这适用于您的所有比较。

您还可以将 3 个`if`语句减少到 1 个：

```
if ( ($selectCount % 2) === 0 ) {
  echo "</tr><tr>";
} 
```

这基本上是说：如果你的变量的余数除以`2`是`0`.

# android - Android相机视图未打开

> ID：15551148
> 
> 赞同：1
> 
> 时间：2013-03-21T15:04:30.027
> 
> 标签：android, camera

我正在开发一个安卓应用程序。我在其中使用相机拍摄图像。我正在使用以下代码打开相机。**问题是，执行camera = Camera.open(cameraId)**后相机视图未打开。单击“制作照片”后，仅打开相机灯（仍然未打开相机视图）。如何显示相机视图？

在 MakePhotoActivity.java 中，

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // do we have a camera?
        if (!getPackageManager()
                .hasSystemFeature(PackageManager.FEATURE_CAMERA)) {
            Toast.makeText(this, "No camera on this device", Toast.LENGTH_LONG)
                    .show();
        } else {
            cameraId = findFrontFacingCamera();
            if (cameraId < 0) {
                Toast.makeText(this, "No front facing camera found.",
                        Toast.LENGTH_LONG).show();
            } else {
                camera = Camera.open(cameraId);
            }
        }
    }

 public void onClick(View view) {
        camera.takePicture(null, null,
                new PhotoHandler(getApplicationContext()));
    } 
```

在 main.xml 中，

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/captureFront"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:onClick="onClick"
        android:text="Make Photo" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:28:00.107

# 这段代码有帮助吗？

不过，这适用于前置摄像头。

```
import android.hardware.Camera;
import android.hardware.Camera.CameraInfo;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Toast;

public class VideoFragment extends Fragment {

private static final String TAG = "VideoFragment";
private SurfaceView preview;
private SurfaceHolder previewHolder;
private Camera camera = null;
private boolean cameraConfigured = false;
private boolean inPreview = false;
private int frontFacingCameraID;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    frontFacingCameraID = findFrontFacingCamera();
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    View view = inflater.inflate(R.layout.video, container, false);

    preview = (SurfaceView) view.findViewById(R.id.surfaceView1);
    previewHolder = preview.getHolder();
    previewHolder.addCallback(surfaceCallback);

    return view;
}

private int findFrontFacingCamera() {
    int cameraId = -1;
    // Search for the front facing camera
    int numberOfCameras = Camera.getNumberOfCameras();
    for (int i = 0; i < numberOfCameras; i++) {
        CameraInfo info = new CameraInfo();
        Camera.getCameraInfo(i, info);
        if (info.facing == CameraInfo.CAMERA_FACING_FRONT) {
            Log.d(TAG, "Camera found");
            cameraId = i;
            break;
        }
    }
    return cameraId;
}

@Override
public void onResume() {
    super.onResume();

    camera = Camera.open(frontFacingCameraID);
    startPreview();
}

@Override
public void onPause() {
    if (inPreview) {
        camera.stopPreview();
    }

    camera.release();
    camera = null;
    inPreview = false;

    super.onPause();
}

private SurfaceHolder.Callback surfaceCallback = new SurfaceHolder.Callback() {

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        // no-op
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        // no-op -- wait until surfaceChanged()
        // TODO understand why this has to be NO-OP

    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        // TODO understand why these methods have to be called in this
        // callback method
        initPreview(width, height);
        startPreview();
    }
};

private void initPreview(int width, int height) {
    if (camera != null && previewHolder.getSurface() != null) {
        try {
            camera.setPreviewDisplay(previewHolder);
        } catch (Throwable t) {
            Log.e("PreviewDemo-surfaceCallback",
                    "Exception in setPreviewDisplay()", t);
            Toast.makeText(getActivity(), t.getMessage(), Toast.LENGTH_LONG)
                    .show();
        }

        if (!cameraConfigured) {
            Camera.Parameters parameters = camera.getParameters();
            Camera.Size size = getBestPreviewSize(width, height, parameters);

            if (size != null) {
                parameters.setPreviewSize(size.width, size.height);
                camera.setParameters(parameters);
                cameraConfigured = true;
            }
        }
    }
}

private void startPreview() {
    if (cameraConfigured && camera != null) {
        camera.startPreview();
        inPreview = true;
    }
}

private Camera.Size getBestPreviewSize(int width, int height,
        Camera.Parameters parameters) {
    Camera.Size result = null;

    for (Camera.Size size : parameters.getSupportedPreviewSizes()) {
        if (size.width <= width && size.height <= height) {
            if (result == null) {
                result = size;
            } else {
                int resultArea = result.width * result.height;
                int newArea = size.width * size.height;

                if (newArea > resultArea) {
                    result = size;
                }
            }
        }
    }

    return (result);
}
} 
```

# android - 视图的有效“截图”？

> ID：15551150
> 
> 赞同：17
> 
> 时间：2013-03-21T15:04:30.257
> 
> 标签：android

TL; DR：由于`getDrawingCache()`似乎在`View`启用硬件加速时触发了 a 的完全重绘，是否有另一种方法`Bitmap`可以通过读取填充到（硬件、软件）中的数据来避免这种情况（或类似的东西）`View`上次绘制的图层？

* * *

一些背景：

自 Android 3.0 以来，Android 已经能够镜像屏幕，例如连接到 HDMI 显示器。这可以用于演示，但这意味着观众看到的东西与演示者相同，这并不总是理想的。

Android 4.2 添加了`Presentation`，允许应用程序在“第二个屏幕”（例如，HDMI 连接的显示器）上放置任意内容。在这种情况下，有时，第二个屏幕显示主平板电脑显示屏上的*部分内容会很有用。*如果您想到 Microsoft PowerPoint、LibreOffice Impress 等演示软件，在典型的双屏设置中，观众会看到当前的演示幻灯片，而演示者会看到当前的幻灯片、计时器和演讲者备注以及...

对于非交互式内容，例如表示幻灯片的 PNG，这只是在两个屏幕上显示相同的图像（以及主屏幕上的其他内容）。

但是，对于像 a 这样的交互式内容，`WebView`有时很难进行这种镜像。例如，我们没有很好的方法知道 a 的内容何时`WebView`会改变，因为它可能完全基于自身内部的东西`WebView`（例如，AJAX 调用的完成），而不是我们单独做的事情。而且，即使我们*确实*知道内容何时`WebView`发生变化，我们也没有好的方法让其他`WebView`人渲染相同的内容。

所以我想我会尝试设置一个`MirroringFrameLayout`，`getDrawingCache()`用于检索`Bitmap`容器的内容并将其传递给可以在屏幕上呈现它的人（例如，`ImageView`显示在 a 中`Presentation`）。

然而，在启用硬件加速的`setDrawingCacheEnabled(true)` [情况下，有点无操作](http://developer.android.com/reference/android/view/View.html#setDrawingCacheEnabled%28boolean%29)：

> 启用绘图缓存类似于关闭硬件加速时设置图层。打开硬件加速时，启用绘图缓存对渲染没有影响，因为系统使用不同的加速机制来忽略该标志。

在这些情况下调用`getDrawingCache()`会强制一个完整`draw()`的`View`位图支持`Canvas`，而不是实际使用缓存。由于`draw()`可能很昂贵，因此`draw()`经常（例如，通过触发`postOnAnimation()`）会导致卡顿。

因此，我试图确定是否还有其他一些“绘图缓存”，`getDrawingCache()`我们可以在启用硬件加速的情况下使用它，可以用来设置这个镜像，而且效率更高。据我所知，没有这样的缓存，因为从 SDK 应用程序的角度来看，层实际上是只写的。但是，我希望也许我错过了一些解决方案。

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-21T15:31:56.213

You can use `setLayerType(View.LAYER_TYPE_SOFTWARE, null)` but it will have the side effect of making that View slower to redraw every time it updates. It would be much more efficient to create a custom `ViewGroup` that draws your View on two Canvas (one for each screen.) You could also simply use a `ViewTreeObserver` and on every draw callback force your view to render on the second screen. I really recommend you don't try to abuse the drawing cache/layer type for such a use case.

# c# - 保存后如何删除对象？

> ID：15551151
> 
> 赞同：0
> 
> 时间：2013-03-21T15:04:34.023
> 
> 标签：c#, .net, ibatis

我有一个带有 GridView（绑定到 POCO 列表）、删除行按钮和保存按钮的表单。删除按钮仅从网格视图中删除项目（通过`gridview.DeleteRow()`），然后保存按钮将删除、更新或添加数据库中的实际行。问题是当从 gridView 中删除项目时，它们也会从底层数据源中删除。

鉴于我不是一个很好的程序员，我很想知道更聪明的程序员如何做到这一点？

我考虑过

a) 为每个 POCO 添加一个`RowStatus`标志，它会让我知道该行是要添加、更新还是删除？但是我将如何从 gridView 隐藏已删除的行？

b）为已删除项目创建列表，在从视图中删除项目之前，我可以将其复制到“已删除项目列表”吗？

注意：我正在使用 iBatis.NET 加载对象

任何想法都会非常感激。

# javascript - 在按钮单击时获取活动选项卡并将其传递给控制器

> ID：15551152
> 
> 赞同：0
> 
> 时间：2013-03-21T15:04:42.853
> 
> 标签：javascript, ajax, asp.net-mvc, twitter-bootstrap, jquery-ui-tabs

我目前正在使用 MVC3 和 Bootstrap。

我有几个 Bootstrap 选项卡的视图。我还有一个按钮 [Create]，它调用控制器中的 Create() 函数。

单击 [创建] 按钮时，我需要以下内容：

1.- 获取活动标签 ID 以便将其传递给控制器​​。

2.- 当用户发布数据并且页面重新加载时，保持在当前（活动）选项卡上

我知道我需要使用 Javascript 来获取活动选项卡和 AJAX 将 ID 传递给控制器​​。我试图以不同的方式混合它们，但没有成功。实际上我是 AJAX 的新手，但我注意到我缺少调用按钮单击事件的操作，但我不知道如何编码它:(

我的 JS：

```
$(function() { 
    var activeTab = null;
    $('a[data-toggle="tab"]').on('shown', function (e) {
      activeTab = e.target;
      //save the latest tab
      localStorage.setItem('lastTab', $(e.target).attr('id'));

      $.ajax({
                url: '@Url.Action("Create")',
                type: 'GET',
                data: postData,
                success: function(result) {

                }
            });

    });

      //go to the latest tab, if it exists:
      var lastTab = localStorage.getItem('lastTab');
      if (lastTab) {
        $('#'+lastTab).tab('show');
      }
}); 
```

[创建] 按钮...

```
<button type="submit" class = "btn btn-success">
    <i class="icon-plus icon-white"></i> Create
</button> 
```

任何帮助将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:09:27.667

有很多方法可以做到这一点，这取决于你想使用什么技术/框架。如果您想坚持使用 vanilla MVC，可以查看[AjaxHelpers](http://msdn.microsoft.com/en-us/library/dd493114%28v=vs.98%29.aspx)。这些提供标记助手`@Ajax.BeginForm(...)`，例如`@Ajax.ActionLink(...)`自动提交表单数据或通过 AJAX 调用从链接调用控制器操作。

如果您想更好地控制如何进行 AJAX 调用，可以查看[Backbone.js](http://backbonejs.org/)或[Knockout.js](http://knockoutjs.com/)等客户端框架。我实际上更喜欢 Knockout，因为它允许您在 MVC 中轻松采用 MVVM 设计模式。例如，这是一个简单的 Knockout 视图模型：

```
var ViewModel = function () {
    var self = this;

    self.tabs = ko.observableArray([
        { id: 1, name: 'Tab 1' },
        { id: 2, name: 'Tab 2' },
        { id: 3, name: 'Tab 3' }
    ]);

    self.saveChanges = function () {

        // Here's where you can get the id of the selected tab
        // and make your ajax call

        var tab = $('.tab-content > .active').get(0);        
        alert('Hello from Tab ' + $(tab).attr('id'));
    };
} 
```

和标记：

```
<ul class="nav nav-tabs" data-bind="foreach: tabs">
    <li data-bind="css: { 'active': $index() === 0 }">
        <a data-bind="attr: { href: '#' + $data.id }, text: $data.name" data-toggle="tab"></a>
    </li>
</ul>

<div class="tab-content">
    <!-- ko foreach: tabs -->
    <div class="tab-pane" data-bind="attr: { id: $data.id }, css: { 'active': $index() === 0 }">
        <p data-bind="text: $data.name + ' content...'"></p>

        <button class="btn" data-bind="click: $parent.saveChanges">Save</button>
    </div>
    <!-- /ko -->
</div> 
```

在此示例中，视图模型确定要显示哪些选项卡以及可以在客户端上调用哪些操作。要查看此实际工作，请参阅此小提琴：http: [//jsfiddle.net/5qx29/](http://jsfiddle.net/5qx29/)

# javascript - 下拉验证脚本

> ID：15551153
> 
> 赞同：0
> 
> 时间：2013-03-21T15:04:46.080
> 
> 标签：javascript, jquery

我正在尝试修复此功能以在下拉列表中显示警报。我哪里错了？不出现警报。

JS：

```
<script type="text/javascript">
$(document).ready(function(){
$("#submit").click(function () {
    $( "#species" ).change(function(){
    if ( $(this).children(":selected").val() == "" ) {
    alert("empty");
    }
    });
});
});
</script> 
```

形式：

```
<form>
<label for="species" id="species">*Species:</label><br />
<select id="species" name="species" size="1">
<option value="">Please choose a species</option>
<option value="21">Chicken</option>
<option value="28">Turkey</option>
</select>
<br />
<input type="submit" id="submit" value="Validate!" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:07:22.160

您有 2 个事件，第 2 个事件被绑定在 click 事件上。

也许你想要这样的东西：

```
<script type="text/javascript">
$(document).ready(function(){
    $("#submit").click(function () {
    if ( $("#species" ).children(":selected").val() == "" ) {
       alert("empty");
    }
    });
});
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:17:56.077

有几件事： 1\. 你的**标签**和你的**select**元素有相同的 id，这会让 jQuery 感到困惑。

1.  您将单击事件绑定到 selectBox 上的更改事件，这是不必要的。

尝试这个：

```
$(document).ready(function(){
   $("#submit").click(function (e) {
       if($('#species').find(":selected").val()===""){
         alert("empty");
       }    
       e.preventDefault()
    });
}); 
```

[http://jsfiddle.net/6SuvK/](http://jsfiddle.net/6SuvK/)

# asp.net - 在 IIS 7 上浏览新部署的 MVC 应用程序时出错：未设置 Http 500 和自定义错误

> ID：15551157
> 
> 赞同：2
> 
> 时间：2013-03-21T15:04:51.683
> 
> 标签：asp.net, asp.net-mvc, iis, iis-7, web-deployment

我的 MVC 项目根目录中的 web.config 文件中确实存在自定义错误。

```
<customErrors mode="On" defaultRedirect="~/Error">
  <error statusCode="403" redirect="~/Error/UnauthorizedAccess" />
  <error statusCode="404" redirect="~/Error/NotFound" />
</customErrors> 
```

但是，当我在 IIS 7 中部署项目时，任何浏览 Web 应用程序的尝试都会在浏览器中产生此错误：

```
Description: An application error occurred on the server. The current custom error 
settings for this application prevent the details of the application error from being 
viewed remotely (for security reasons). It could, however, be viewed by browsers 
running on the local server machine.

Details: To enable the details of this specific error message to be viewable on remote 
machines, please create a <customErrors> tag within a "web.config" configuration file 
located in the root directory of the current web application. This <customErrors> 
tag should then have its "mode" attribute set to "Off".

    <!-- Web.Config Configuration File -->

    <configuration>
        <system.web>
            <customErrors mode="Off"/>
        </system.web>
    </configuration>

Notes: The current error page you are seeing can be replaced by a custom error page by 
modifying the "defaultRedirect" attribute of the application's <customErrors> configuration 
tag to point to a custom error page URL.    

    <!-- Web.Config Configuration File -->

    <configuration>
        <system.web>
            <customErrors mode="RemoteOnly" defaultRedirect="mycustompage.htm"/>
        </system.web>
    </configuration> 
```

在我的应用程序中，我处理了错误并记录了它们，还给一些团队成员发了电子邮件。当我在 Visual Studio 或本地运行应用程序时，所有这些都有效。但是当我浏览这个新部署的应用程序时，没有创建日志，也没有发送任何电子邮件。

**更新**

有趣的是，它确实进入了我的应用程序的错误处理程序。我知道这是因为地址栏上写着：

```
http://10.1.17.43/MyApp/Error?aspxerrorpath=/MyApp 
```

我的应用程序中处理所有异常`Error`的控制器 ( ) 在哪里。`ErrorController`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:09:31.753

首先，我会尝试设置`<customErrors mode="Off" />`，只是为了看看潜在的错误信息是什么。这可能是某种配置错误。

由于正在调用应用程序的错误页面，因此错误页面本身很可能发生错误。设置`<customErrors mode="Off" />`将让您看到该错误是什么。

# java - 在没有无限强度 JCE 文件的情况下，Java 中是否可以进行 AES256 加密解密？

> ID：15551158
> 
> 赞同：11
> 
> 时间：2013-03-21T15:04:52.620
> 
> 标签：java, encryption, java-native-interface, aes

我正在处理的项目有一个需要 AES 加密和解密的部分。从我可以查找的所有可能的 Internet 资源中，很难找到任何对 AES256 加密的引用，而无需从 Sun（现在是 Oracle 的网站）下载和安装 Unlimited Strength JCE 文件。除了相同的分发存在的任何法律问题之外，当要求最终用户访问特定网站并下载一些文件，将它们放在目录中然后将内容添加到类路径时，它对我们没有多大帮助在 Windows 等上！

互联网上有一些对 BountyCastle 的轻量级 API 的参考，可能不需要 JCE 文件，但我找不到非常相关的参考或示例来演示它。

不确定，但这是所有其他编程语言的问题吗？

如果没有安装那些特定的 JCE 文件就不可能进行 AES 256 位加密，那么 JNI 方法可以提供帮助吗？

详细说明一下，可以在 C/C++ 中完成 AES 256 加密，然后我可以调用那些使用 JNI 来获得所需的结果吗？将软件打包（作为 jar 文件）会引起关注，还是会出现其他问题？

发挥作用的另一个重要因素是该项目将同时在 Mac 和 Windows 上运行，因此使用 C/C++（特定的编译器/解释器版本或任何东西）可能会受到限制吗？

有没有不同的方法来处理这个？还有其他方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T15:39:31.713

密钥大小限制在`Cipher`Java 类中实现。可以使用任何*其他*实现 AES 的类来获得 AES-256 功能。例如，可以使用[Bouncy Castle](http://www.bouncycastle.org/documentation.html)的“轻量级”API来使用任何强度的密钥大小。在这种情况下，您可以[`org.bouncycastle.crypto.engines.AESFastEngine`](https://www.bouncycastle.org/docs/docs1.5on/index.html)直接使用（以及您选择的[模式](https://www.bouncycastle.org/docs/docs1.5on/org/bouncycastle/crypto/modes/package-frame.html)和[填充](https://www.bouncycastle.org/docs/docs1.5on/org/bouncycastle/crypto/paddings/package-frame.html)。仍然可以使用`.jar`Bouncy Castle 的法线，但您不会使用 BouncyCastle 提供程序的 JCA 功能。

这有一些缺点和优点。轻量级的 Bouncy Castle API 比提供者添加到 Sun 类的 JCA 功能的级别要低一些`"BC"`。此外，许多组件（例如 Java 中的 SSL 层、JSSE 或 XML 加密库）使用 JCA 来提供所需的加密功能。需要 JCA 功能的库仍将受限于密钥大小。

请注意，使用其他*提供程序*将不起作用，因为`Cipher`该类本身会检查密钥大小。`CipherSpi`JCA 提供者中可能包含的实现类不能（积极地）影响允许的密钥大小。您只能直接使用实现类。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T15:24:34.820

首先，不，每个编程环境都不是问题。例如，用 C 编写的 OpenSSL 支持大密钥。然而，根据 JCE 和 JNI 的经验，我建议您找到一种使用纯 Java 的方法，而不是通过 JNI 加载本机库。这要容易得多。

**一个实用的解决方案：** 您的应用程序是否在安装过程中使用某种安装程序应用程序安装？如果是这样，那么一种解决方案可能是使用此安装程序来安装 JCE。

不幸的是，BouncyCastle 也使用 JCE，如他们的[FAQ](http://www.bouncycastle.org/wiki/display/JA1/Frequently+Asked+Questions)中所述。

**更新 1：** 我找到了这个库，这可能是您正在寻找的。然而，它似乎不再被维护：[http ://www.cryptix.org/](http://www.cryptix.org/)

**更新 2：** GNU 有一个实现 AES256 的库：[http](http://www.gnu.org/software/gnu-crypto/) ://www.gnu.org/software/gnu-crypto/ 。更多关于可用密码的信息：[http ://www.gnu.org/software/gnu-crypto/manual/Ciphers.html](http://www.gnu.org/software/gnu-crypto/manual/Ciphers.html)

使用 GNU-Crypto 的代码示例，假设您已经将密钥加载到`key_bytes`：

```
IBlockCipher cipher = CipherFactory.getInstance("AES");
Map attributes = new HashMap();
attributes.put(IBlockCipher.CIPHER_BLOCK_SIZE, new Integer(16));
attributes.put(IBlockCipher.KEY_MATERIAL, key_bytes);
cipher.init(attributes);
int bs = cipher.currentBlockSize();

for (int i = 0; i + bs < pt.length; i += bs)
{
    cipher.encryptBlock(pt, i, ct, i);
}

for (int i = 0; i + bs < cpt.length; i += bs)
{
    cipher.decryptBlock(ct, i, cpt, i);
} 
```

请确保您使用加密安全的随机数生成器（例如[SecureRandom](http://docs.oracle.com/javase/6/docs/api/java/security/SecureRandom.html)）为密钥创建 256 个字节：

```
byte[] seed = xxx; // Be sure to get a good new seed on every client machine.
SecureRandom random = new SecureRandom(seed);
byte[] key_bytes = new byte[256];
random.nextBytes(key_bytes); 
```

# android - ImageButton 出现错误

> ID：15551161
> 
> 赞同：0
> 
> 时间：2013-03-21T15:04:56.557
> 
> 标签：android, imagebutton

我正在尝试在我的应用程序上添加一个图像按钮，但是当我尝试运行它时，我收到了这个错误：

```
03-21 14:57:41.936: E/AndroidRuntime(794): java.lang.RuntimeException: Unable to start activity ComponentInfo{br.com.facilit.target.app.android/br.com.facilit.target.app.android.LoginActivity}: android.view.InflateException: Binary XML file line #78: Error inflating class android.widget.ImageButton 
```

我的 XML 代码：

```
<ImageButton
            android:id="@+id/btnEntrar"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignRight="@+id/txtFieldSenha"
            android:layout_below="@+id/txtFieldSenha"
            android:layout_marginTop="25dp"
            android:background="@style/AppTheme"
            android:contentDescription="@string/btn_entrar_desc"
            android:src="@drawable/login_btn_entrar" /> 
```

JAVA代码：

```
public class LoginActivity extends Activity {

    ImageButton btnEntrar;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.activity_login);

        addListenerOnButton();

    }

    private void addListenerOnButton() {

        btnEntrar = (ImageButton) findViewById(R.id.btnEntrar);

        final EditText email = (EditText) findViewById(R.id.txtFieldLogin);
        final EditText token = (EditText) findViewById(R.id.txtFieldSenha);

        btnEntrar.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                Log.d(Constants.LOGIN_ACTIVITY, email.getText().toString().trim());
                Log.d(Constants.LOGIN_ACTIVITY, token.getText().toString().trim());

            }
        });

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:08:32.247

你可能不想使用

```
 android:background="@style/AppTheme" 
```

但是您的编辑器应该准确地指出您在 XML 中的错误错误。如果没有，请尝试清理并构建。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T16:44:51.283

您正在使用**@+id**到**layout_alignRight**和**layout_below**。

尝试删除**+**。它应该看起来像这样

```
<ImageButton
            android:id="@+id/btnEntrar"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignRight="@id/txtFieldSenha"
            android:layout_below="@id/txtFieldSenha"
            android:layout_marginTop="25dp"
            android:background="@style/AppTheme"
            android:contentDescription="@string/btn_entrar_desc"
            android:src="@drawable/login_btn_entrar" /> 
```

# linux - 可以访问 phpmyadmin 但无法登录（未找到）

> ID：15551162
> 
> 赞同：-1
> 
> 时间：2013-03-21T15:04:59.923
> 
> 标签：linux, phpmyadmin

这是我的 phpmyadmin 虚拟主机：

```
<VirtualHost *:80>
    ServerName pma.myserver.com
    DocumentRoot /var/www/phpmyadmin

    <Directory "/var/www/phpmyadmin">
        DirectoryIndex index.php
        Options -Indexes FollowSymLinks SymLinksifOwnerMatch
        AllowOverride All
        Allow from All
    </Directory>
</VirtualHost> 
```

/var/www/phpmyadmin 是指向 /usr/share/phpmyadmin 的符号链接。

我可以在 pma.myserver.com 上访问我的 phpmyadmin 登录页面，但是当我尝试登录时，我的 url 栏上的 url 是[http://pma.myserver.com/index.php](http://pma.myserver.com/index.php)并且我得到一个 404 错误页面和 ：

在此服务器上未找到请求的 URL /index.php。

知道我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:18:00.040

验证您的目录/文件权限和所有权是否适合您的 Apache 部署。此外，如果您的系统使用 SELinux，您可能希望至少暂时禁用它以进行故障排除：

```
# setenforce 0 
```

确保符号链接也设置正确。

# jquery - 带有子按钮的按钮

> ID：15551166
> 
> 赞同：1
> 
> 时间：2013-03-21T15:05:11.777
> 
> 标签：jquery, css, menu, hover, suckerfish

我目前有 2 个按钮（输入提交）Save、Save & Go，我们正在寻找添加第三个按钮，Save & Close。由于房地产，这里没有第三个按钮的空间，所以想法是将它们组合成某种下拉菜单。

我知道使用 A 和隐藏 div 的 css 可能是更好的解决方案，但是，由于应用程序的方式是在它所在的接口中编码的，这些需要是 INPUTs 或 BUTTONs 才能用于后端（a node.js -like derivitive) 来获取它。

有没有办法制作这样的东西？

只显示

```
|"Save"| 
```

但如果存在选项（基于其他脚本参数），则显示向下箭头，例如

```
 |"Save *down*"| 
```

并在其下方的鼠标悬停上显示 2 个（或 1 个或更多）子选项：

```
| "and go" | "and close" | 
```

关键点是所有3个条件都必须提交（可能只想保存而不去或关闭）。

同样，所有 3 个都需要输入 type='submit' 所以我不确定在这种情况下如何使悬停状态等。通常会使用带有 a:hovers 和 Intent 的列表和子列表。

我运行 jquery 并设置了 html 5，所以标准前端的东西都可以使用，但后端是它变得棘手的地方。

关于“更好的方法”来解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:11:16.647

做一个这样的选择下拉列表：

```
<select onchange="this.form.submit()">
    <option value="save">Save</option>
    <option value="save&go">Save & Go</option>
    <option value="save&close">Save & Close</option>
</select> 
```

给它 3 个选项，保存、保存并开始、保存并关闭

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:46:02.933

对我来说，这似乎是一个设计问题。只需一个“保存”按钮。保存后，显示一个带有“开始”和“关闭”按钮的对话框。如果用户不想选择“开始”和“关闭”按钮中的任何一个，您可以在对话框的右上角显示“X（对话关闭）”。

# c# - 使用 async-await 时，Moq.Verify 中的 ThreadAborted

> ID：15551170
> 
> 赞同：0
> 
> 时间：2013-03-21T15:05:18.127
> 
> 标签：c#, unit-testing, async-await, xunit, threadabortexception

我的测试方法。我正在使用 xUnit

```
[Fact]
public async void AccountController_RegisterTest()
{
    const string testEmail = "test@test.com";
    const string testPassword = "test@test.com";

    var cacheMock = new Mock<ICacheProvider>();
    var languageResolverMock = new Mock<ILanguageResolver>();

    languageResolverMock.Setup(x => x.GetCorrectLanguage("en", "en")).Returns("en");
    languageResolverMock.Setup(x => x.GetDefaultLanguage()).Returns("en");

    var contextMock = new Mock<IContextFactory>();
    var localizationProvider = new Mock<ILocalizationProvider>();

    localizationProvider.Setup(x => x.GetString(It.IsAny<string>(), It.IsAny<string>())).Returns(String.Empty);

    var authenticationProvider = new Mock<IAuthenticationProvider>();

    authenticationProvider.Setup(x => x.CheckExistsUser(It.IsAny<string>())).Returns(async () => false);
    authenticationProvider.Setup(x => x.CreateUser(It.IsAny<RegisterModel>())).Returns(async () => true);

    var languagesRepository = new Mock<LanguagesRepository>(MockBehavior.Default, contextMock.Object, cacheMock.Object);

    languagesRepository.Setup(x => x.GetCorrectLanguage(It.IsAny<string>())).Returns(() => Task.Factory.StartNew(() => new Language { Code = "EN", Fullname = "English" }));
    languagesRepository.Setup(x => x.GetDefaultLanguageAsync()).Returns(async () => new Language { Code = "EN", Fullname = "English" });
    languagesRepository.Setup(x => x.AvailableLanguagesAsync()).Returns(async () =>  (new List<Language> { new Language { Code = "EN", Fullname = "English" } }).AsEnumerable());

    var controllerMock = new Mock<AccountController>(MockBehavior.Default, authenticationProvider.Object, languagesRepository.Object, localizationProvider.Object, languageResolverMock.Object, cacheMock.Object) { CallBase = true };

    controllerMock.Setup(x => x.CurrentAvailableLanguages()).Returns(() => Task.Factory.StartNew(() => (new List<SelectListItem> { new SelectListItem { Text = "English", Value = "En" } }).AsEnumerable()));
    controllerMock.Setup(x => x.InitAvailableLanguages());
    controllerMock.Setup(x => x.SetAuthenticateCookie(It.IsAny<RegisterModel>()));
    controllerMock.Setup(x => x.RedirectToHomePage()).Returns(() => Task.Factory.StartNew(() => new RedirectToRouteResult(new RouteValueDictionary())));

    await controllerMock.Object.Register(new RegisterModel { Email = testEmail, LanguageID = 0, Password = testPassword, RememberMe = true });

    authenticationProvider.Verify(x => x.CheckExistsUser(It.Is<string>(y => y == testEmail)), Times.Once());
    authenticationProvider.Verify(x => x.CreateUser(It.Is<RegisterModel>(y => y.Email == testEmail && y.Password == testPassword)), Times.Exactly(12));
} 
```

这一行总是抛出 ThreadAborted 异常。

```
authenticationProvider.Verify(x => x.CheckExistsUser(It.Is<string>(y => y == testEmail)), Times.Once()); 
```

但是当我调试测试时 - 它会正常运行。我的事情是线程没有完全完成返回结果，**但我使用等待！**

```
[AllowAnonymous]
[HttpPost]
public async Task<ActionResult> Register(RegisterModel model)
{
    InitAvailableLanguages();

    try
    {
        ValidationResult result;
        if ((result = new RegisterModelCustomValidator().Validate(model)).IsValid)
        {
            if (!(await this.AuthProvider.CheckExistsUser(model.Email)))
            {
                if (!(await this.AuthProvider.CreateUser(model)))
                {
                    ModelState.AddModelError(string.Empty, L("Server error. Please, try later..."));
                    return View(model);
                }

                SetAuthenticateCookie(model);

                return await RedirectToHomePage();
            }

            ModelState.AddModelError(string.Empty, L("User already exists"));

            return View(model);
        }

        foreach (var error in result.Errors)
            ModelState.AddModelError(error.PropertyName, this.LocalizationProvider.GetString(error.ErrorMessage, Thread.CurrentThread.CurrentUICulture.Name));

    }
    catch (Exception ex)
    {
        Logger.Error(ex);
    }

    return View(model);
} 
```

输出窗口：

```
Step into: Stepping over non-user code 'System.Linq.Expressions.Expression.Parameter'
The thread 'xUnit.net STA Test Execution Thread' (0x2ab8) has exited with code 0 (0x0).
A first chance exception of type 'System.Threading.ThreadAbortException' occurred in System.Core.dll
A first chance exception of type 'System.Threading.ThreadAbortException' occurred in Core.Test.dll
An exception of type 'System.Threading.ThreadAbortException' occurred in Core.Test.dll but was not handled in user code
Step into: Stepping over non-user code 'System.Threading.ExecutionContext.RunInternal'
Step into: Stepping over non-user code 'System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.Run'
Step into: Stepping over non-user code 'System.Threading.ThreadPoolWorkQueue.Dispatch'
Step into: Stepping over non-user code 'System.Threading.ThreadPoolWorkQueue.Dispatch'
The program '[124] JetBrains.ReSharper.TaskRunner.CLR4.MSIL.exe: Managed (v4.0.30319)' has exited with code 0 (0x0). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:31:45.937

xUnit does not support `async void` unit tests AFAIK. Try changing your unit test to return `Task`.

# sql - 当日期相同时，我的 SQL SELECT 语句没有拾取任何记录

> ID：15551176
> 
> 赞同：0
> 
> 时间：2013-03-21T15:05:31.873
> 
> 标签：sql

我有一个 SQL Select 语句（使用 C#），当“from”和“to”日期相同但适用于任何其他日期时，它不会拾取任何记录。

例如，我有两个文本框“从日期：”和“到日期：”，当我将两个日期相同（即 2013 年 3 月 21 日）时，即使记录确实存在，它也不会返回任何内容。

这是我的代码：

```
DateTime fromDt = Convert.ToDateTime(txtFromDate.Text);
DateTime toDt   = Convert.ToDateTime(txtToDate.Text);
string tp       = TpId.SelectedItem.Text.Trim(); 
```

 **```
string sql  = "SELECT * FROM EDI10000 WHERE Tp_Id = '" + tp + "' and Rec_Date >= '" +  fromDt + "' and Rec_Date <= '" + toDt + "'"; 
```

谁能看到可能导致这种情况的原因？

谢谢你

**更新：**

好的，我得到了它，谢谢你们指引我朝着正确的方向前进。

我最终将“.ToString(“MM-dd-yyyy”) 添加到我的两个变量“fromDt”和“toDt”中，并将“Rec_Date”字段更改为“CONVERT(varchar(10), Rec_Date, 110)” .

这剥夺了所有日期的时间。

谢谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:07:52.490

一种可能性是如果`Rec_Date`是包含时间和日期的时间戳（日期时间）字段。如果比较日期只是日期（基本上被视为午夜），那么对于所有不完全是午夜的值，比较都会失败。

例如，如果`Rec_Date = 2013-03-21 15:00:00`开始和结束比较日期为`2013-03-21`，则不包括在内，因为该`toDt`值不会被视为大于或等于该值。

```
2013-03-21 15:00:00  >=  2013-03-21  ==>  TRUE
2013-03-21 15:00:00  <=  2013-03-21  ==>  FALSE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:14:49.717

由于 sql 将日期时间字段与最接近的毫秒进行比较，因此字符串到 DateTime 的转换可能会出错。假设您只对比较日期感兴趣而不对时间部分感兴趣，您可以将查询更改为：

```
string sql  = "SELECT * FROM EDI10000 WHERE Tp_Id = '" + tp + "' and Rec_Date >= '" + fromDt.ToString("yyyy-MM-dd") + "' and Rec_Date <= '" + toDt.ToString("yyyy-MM-dd") + "'"; 
```**

# javascript - 如何将 XML 数据转换为表格以进行如下搜索？

> ID：15551179
> 
> 赞同：0
> 
> 时间：2013-03-21T15:05:37.407
> 
> 标签：javascript, jquery, xml, html, html-table

我需要弄清楚如何按照相同的结构将下面的 XML 数据添加到下表中，以便允许使用下面的代码在表中进行搜索。通过页面底部的 Jsfiddle 链接显示。

我想添加到表中的 XML 数据：

```
 var ShoesXML = "<All><Shoe><Name>All Stars</Name><BrandName>Converse</AlbumName><ReleaseDate>10/2/08</ReleaseDate><Picture>pic.jpg</Picture></Shoe><Shoe><Name>All Star1s</Name><BrandName>Converse1</AlbumName><ReleaseDate>11/2/08</ReleaseDate><Picture>pic.jpg</Picture></Shoe></All>"; 
```

这是我通常搜索的表格格式（我想使用 XMLdata 变量 ShoesXML 创建它：

```
 <input type="text" id="search">
<table>
<thead>
   <tr>
        <th>Name</th>
        <th>Brand Name</th>
        <th>Release Date</th>
        <th>Picture</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td><span>All Stars</span></td>
        <td>Converse</td>
        <td>10/2/08</td>
        <td><img src="pic.jpg"/></td>
    </tr>
    <tr>
        <td><span>All Stars1</span></td>
        <td>Converse1</td>
        <td>11/2/08</td>
        <td><img src="pic1.jpg"/></td>
    </tr>
</tbody>
</table> 
```

我通常使用文本框搜索上述表格结构的代码：

```
<script type='text/javascript'>
$("#search").on("keyup paste", function() {
    var value = $(this).val().toUpperCase();
    var $rows = $("table tr");

    $rows.each(function(index) {
        if (index !== 0) {
            $row = $(this);
            var column1 = $row.find("td:first span").html().toUpperCase();
            if (column1.indexOf(value) > -1) {
                $row.show();
            }
            else {
                $row.hide();
            }
        }
    });
});

</script> 
```

当前程序 Jsfiddle：http: [//jsfiddle.net/AYXG4/](http://jsfiddle.net/AYXG4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:32:27.103

您的 XML 已关闭，因为 BrandName 由标签 AlbumName 关闭。但是，一旦修复（如`ShoesXML`下面的字符串），这样的事情应该可以工作：

```
var ShoesXML = "<All><Shoe><Name>All Stars</Name><BrandName>Converse</BrandName><ReleaseDate>10/2/08</ReleaseDate><Picture>pic.jpg</Picture></Shoe><Shoe><Name>All Star1s</Name><BrandName>Converse1</BrandName><ReleaseDate>11/2/08</ReleaseDate><Picture>pic.jpg</Picture></Shoe></All>";

$(document).ready(function() {  
  xmlDoc=$.parseXML( ShoesXML );
  $(xmlDoc).find("Shoe").each(function(i, n) {
        var html = "<tr>\n" + 
            "<td><span>" + $(n).find("Name").text() + "</span></td>\n" +
            "<td>" +  $(n).find("BrandName").text() + "</td>\n" +
            "<td>" + $(n).find("ReleaseDate").text() + "</td>\n" + 
            "<td><img src='" + $(n).find("Picture").text() + "'></td>\n" +
            "</tr>";
        $("table.shoetable tbody").append(html);
    });
}); 
```

jsFiddle：http: [//jsfiddle.net/JhFhd/2/](http://jsfiddle.net/JhFhd/2/)

上面的代码所做的是使用 jQuery 解析您的 XML，然后在每个`Shoe`标签中找到适当的列并生成您的 HTML 表格行。从那里，它将其附加到`tbody`带有 class 的表部分`shoetable`。由于它已附加到您的表结构中，因此您的搜索功能应该可以正常工作。

您可以优化上述一些，但这应该足以让您入门。

# sinatra - Sinatra / HAML - 我如何使用 html_safe 功能？

> ID：15551181
> 
> 赞同：1
> 
> 时间：2013-03-21T15:05:44.217
> 
> 标签：sinatra, haml, html-entities

我收到这个错误。

# 

这是导致问题的线路；我正在尝试显示 html 实体。

%p= html_escape("✔")

我了解 html_safe 在 Sinatra 中不可用。我可以用什么来替换该功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:42:57.800

来自 Haml 文档 ( [http://haml.info/docs/yardoc/file.REFERENCE.html](http://haml.info/docs/yardoc/file.REFERENCE.html) )

你可以这样做：

```
&= "&#10004" 
```

# ios - 苹果会拒绝使用外部“www”文件夹的 phonegap/cordova 应用程序吗？

> ID：15551182
> 
> 赞同：1
> 
> 时间：2013-03-21T15:05:48.093
> 
> 标签：ios, iphone, cordova

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:33:25.300

Check out this [blogpost](http://www.tricedesigns.com/2012/10/03/phonegap-apple-rejections-uiux-guidelines/). The author has a lot of experience with PhoneGap apps in Apple Appstore and can help eliminating the obvious reject reasons.

I copy here just the main points from the blogpost that adds to whatever is already in iOS UI guidelines and and AppStore review guidelines:

> *   If your app is just a web site wrapped in PhoneGap, it will probably get rejected. There are exceptions to this case, but don’t expect that wrapping a web site in a web view will get you into the App Store.
>     
>     
> *   If your app requires the user to pinch/zoom/pan to view content (like a web site), it will probably get rejected. Your apps need to feel like apps.
>     
>     
> *   If your app just looks like text on a page with hyperlinks, and has no native-like styles, it will probably get rejected.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-21T20:37:09.387

Apple haven't rejected my app that uses PhoneGap, however they rejected because the app didn't have great functionalities!haha (however my client wanting something simple)

# html - 如何为锚标签链接分配高度和宽度

> ID：15551184
> 
> 赞同：2
> 
> 时间：2013-03-21T15:05:59.517
> 
> 标签：html, css

我试过如下

```
<div class="tag">
 <a href="#">Book Form</a>
</div> 
```

在 CSS 中

```
.tag a 
{ 
  background-color:#899898;
  height:125px;
  width:250px;
  color:#000;
  font-family:Arial;
  font-size:25px;
} 
```

问题是锚的高度和宽度不会改变。请帮我

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-21T15:07:17.463

`display: inline-block;`在css中添加。

```
<div class="tag">
 <a href="#">Book Form</a>
</div> 
```

在 CSS 中

```
.tag a 
  { 
  display: inline-block;      
  background-color:#899898;
  height:125px;
  width:250px;
  color:#000;
  font-family:Arial;
  font-size:25px;
  } 
```

* * *

锚 ( `<a>`) 是内联元素。（[这里](http://www.tutorialchip.com/tutorials/inline-elements-list-whats-new-in-html5/)是默认内联元素的完整列表）。内联元素不能有`width`和`height`。因此，如果您希望`inline`元素保持其本机属性，即处于正常的行流中，并且仍然具有*width*、*height*和*vertical-align*属性..那么`inline-block`就是您应该使用的属性。

### 相关链接

*   [https://developer.mozilla.org/en-US/docs/CSS/display](https://developer.mozilla.org/en-US/docs/CSS/display)

**编辑**：添加说明

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T15:07:14.083

使锚的样式`display:inline-block`为`display:block`

[https://developer.mozilla.org/en-US/docs/CSS/display](https://developer.mozilla.org/en-US/docs/CSS/display)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:08:00.093

为了使标签具有尺寸，它们必须是`display: block`

所以你的CSS应该是：

```
.tag a {
  display: block;
} 
```

我倾向于避免使用内联块，因为我个人在解决此类问题时发现它不一致。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-07T08:55:52.447

给锚点一个样式，`display:block`最大`max-width:30px !important;` 宽度大小可以是任何

`li a { display: block; height: 30px; max-width: 30px !important; }`

# google-apps-script - 如何在 Chrome 网上商店发布 Google 电子表格扩展程序？

> ID：15551187
> 
> 赞同：4
> 
> 时间：2013-03-21T15:06:04.280
> 
> 标签：google-apps-script, google-sheets, chrome-web-store

我有兴趣为 Google 电子表格编写一个扩展，该扩展利用电子表格的 UI 扩展功能。如果我没记错的话，创建这样一个程序的唯一可能方法是使其成为容器绑定脚本。这意味着它只能发布到电子表格脚本库。这是不幸的，因为我想发布并可能出售此脚本，并使其广泛提供给 Google 电子表格用户。我在想 Chrome 网上应用店将是这类事情的理想选择，但不可能在其上发布容器绑定脚本（只能在其上发布 Web 应用程序）。

所以，我正在寻找解决这个问题的方法。我自己想到了一个可行的解决方案：创建一个网络应用程序并将其发布到 Chrome 商店。Web 应用程序实际上是容器绑定脚本所依赖的库。这甚至可能吗？容器绑定脚本存储在库中。如果尚未安装 Web 应用程序，您能否禁止用户在库中使用您的脚本？

总结一下，我有几个问题：

*   容器绑定脚本是否可以将 Chrome Web Store 网络应用程序用作库，并且还要求用户安装/购买该应用程序？
*   创建和发布 Google 电子表格扩展的其他方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-25T13:35:03.260

已引入附加组件以允许您扩展 Google 文档和 Google 表格。这些可以在 Chrome 商店上发布。

看到这个快速开始写[https://developers.google.com/apps-script/quickstart/docs](https://developers.google.com/apps-script/quickstart/docs)

# php - zf2 表单：使用来自数据库的数据填充选择字段

> ID：15551188
> 
> 赞同：3
> 
> 时间：2013-03-21T15:06:08.323
> 
> 标签：php, zend-framework2, zend-form, zend-db-table

我正在学习 zf2，我面临一个涉及 2 个（最终更多）模块一起工作的问题。请注意，我已经仔细阅读[了这篇文章](https://stackoverflow.com/questions/12764080/zf2-how-to-use-the-hydrator-exchangearray-to-populate-a-nested-object)（以及相关的文章），这对我有很大帮助。我将解释一下这个问题：

*   使用第一个模块 (FrOption)，管理员可以管理网站表单选项。所有选项都存储在一个 db 表中，如下所示：

id|field_name|field_value
1|国家|德国|
2|国家|法国|
3|性别|男|
4|性别|女|
5|tipo|汽车|
6|提波|飞|
...

*   在我的模块（FrItem）中，我构建了一个需要一些“field_name”字段的表单。我的“项目”表如下：

id|名称|id_tipo|
1|菲亚特|5|
2|汉莎|6|
3|福特|5|
4|法航 6|
...

（id_tipo 是一个选项 FK）

还要考虑：

*   我的实体具有“tipo”属性，setter + getter
*   我已经构建了一个 ItemHydrator 以将 id_tipo db 字段“映射”到“tipo”实体属性
*   作为测试，我在表单类中添加了这个字段，并且在查看和编辑模式下一切正常：

    ```
    $this->add(
    'type' => 'Zend\Form\Element\Select',
    'name' => 'id_tipo',
    'options' => array (
        'label' => 'Tipo', 
        'empty_option' => 'Select',
        'value_options' => array ('5' => 'Car', '6' => 'Fly' ) ) 
    ```

    );

现在我想“链接”这两个模块： value_options 应该是来自 FrOption 的动态数组，所以我正在寻找实现这一要求的最佳方法。

我认为一种解决方案可能是这样的：

1.  将 getOptionByName($fieldName) 方法添加到我的 FrOption/src/FrOption/Service/FrOption.php 服务类
2.  在 FrItem/Module.php 中检索服务，然后使用 getOptionByName 将数据全部注入到表单中。

这可能是一个明智且可行的解决方案吗？你对它的性能有什么看法（选项表可能会增长）？如果有的话，你用什么样的解决方案来解决类似的问题？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-06T11:21:47.167

> 这可以通过 Zend Framework2 第 1 步中的以下 2 个步骤轻松完成。
> 
> 在控制器动作中实例化表单类的适配器的实例

```
$dbAdapter = $this->getServiceLocator()->get('Zend\Db\Adapter\Adapter');
$form = new TestForm ($dbAdapter); 
```

> 表格中的第 2 步

```
namespace Test\Form;

use Zend\Form\Form;
use Zend\Db\Adapter\AdapterInterface;
use Zend\Db\Adapter\Adapter;
class TestForm extends Form
{
    protected $adapter;
    public function __construct(AdapterInterface $dbAdapter)
    {
        $this->adapter =$dbAdapter;
                parent::__construct("Test Form");
        $this->setAttribute('method', 'post');
                //your select field
$this->add(array(
                'type' => 'Zend\Form\Element\Select',
                'name' => 'name',
                'tabindex' =>2,
                'options' => array(
                        'label' => 'Author',
                        'empty_option' => 'Please select an author',
                        'value_options' => $this->getOptionsForSelect(),
                )
        ));

                // another fields

}
       public function getOptionsForSelect()
    {
        $dbAdapter = $this->adapter;
        $sql       = 'SELECT id,name  FROM newsauthor where active=1 ORDER BY sortorder ASC';
        $statement = $dbAdapter->query($sql);
        $result    = $statement->execute();

        $selectData = array();

        foreach ($result as $res) {
            $selectData[$res['id']] = $res['name'];
        }
        return $selectData;
    }

} 
```

> 在这里，你准备好摇滚了。我希望它对你有帮助

# c# - 在枚举和列表之间混合

> ID：15551189
> 
> 赞同：-1
> 
> 时间：2013-03-21T15:06:09.013
> 
> 标签：c#

我的目标是在列表和枚举之间进行一些混合。

我创建列表时的示例：

```
List<string> toto= new List<string>;
toto.add("test1");
toto.add("test2"); 
```

==>但是不可能像这样调用“test1”：toto.test1

使用枚举可能是这样的：

```
public enum toto{
test,test2
} 
```

但不可能根据字符串创建动态枚举

我的问题的想法？

感谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T15:09:49.277

我不确定您要做什么。如果要动态扩展对象，则：

为什么不在`ExpandoObject`.NET 4.0 中尝试？

```
dynamic toto = new ExpandoObject();
toto.test1 = 10;
toto.test2 = 300;
toto.test3 = "Hello"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:10:17.543

~~您可以制作一个扩展功能，将字符串从您的列表转换为枚举成员。~~

 ~~```
 public static MyEnum ToMyEnum(this String myEnumMemberAsString, Boolean ignoreCase = true)
    {
        if (String.IsNullOrEmpty(myEnumMemberAsString))
            throw new ArgumentException("ToMyEnum: String null or empty!");
        return (MyEnum)Enum.Parse(typeof(MyEnum), myEnumMemberAsString, ignoreCase);
    } 
```~~  ~~假设您的问题列表：

```
public static String GetFromList(this List<String> list, MyEnum elemToGet)
{
    return list.SingleOrDefault(e => e == elemToGet.ToString());
} 
```

然后做例如`String found = list.GetFromList(MyEnum.test2);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:27:58.613

如果您只想在一个方法中使用这样的对象（而不将其传递给其他任何地方），您可以使用匿名类型（从 3.0 开始）：

```
var container = new 
                  {
                       test1,
                       test2,
                  };

var test1Again = container.test1; 
```

否则，您唯一能做的就是动态对象，因为编译器将无法验证此类用法。~~

# java - JSP各种jsp特性的执行顺序

> ID：15551191
> 
> 赞同：4
> 
> 时间：2013-03-21T15:06:15.000
> 
> 标签：java, jsp

我只是想知道jsp提供的各种功能的执行顺序是什么

*   脚本
*   标签库
*   表达语言

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:15:31.563

我认为除了它们出现在页面上的顺序（即您编写它们的顺序）之外，没有任何执行顺序。

样本：

```
<%-- page directive: This would go as the import of the generated class so executes first --%>
<%@ page import="my.foo" %>
<%@ page import="your.foo" %>

<% // this would be second & goes in _jspService method
out.println("This is a sample scriptlet");
%>

<%-- // JSTL Tag: this third (goes in _jspService method) --%>
<c:if test="<%= true %>">
    <%-- // this fourth --%>
    <%= "Sample expression. This will print only after the if is executed ... what! Ofcourse it is obvious :-)" %>
</c:if>

<!-- EL: this fourth (goes in _jspService method) -->
${requestScope}

<% // Scriptlet: this fifth (goes in _jspService method)
if (true) {
%>
This should be printed after the zero of expression language :-)
<!-- (goes in _jspService method) -->
<%
}
%>

// this sixth (goes in _jspService method)
<div>
Just some HTML element to make is more interesting.
I wonder I am even answering this question !!
Is it for points ... ssshhhhhh ...
</div>

<%! // Declaration: executes before everything (goes as an instance variable) may be placed before or after the _jspService method depends on the container
boolean declareME = true;
%> 
```

但是，如果您询问 JSP 的元素将以何种顺序编译到 java 类中，那么它取决于 servlet-container，我认为它不会增加任何理解这一点的价值。

让我知道这是否是您想知道的全部。

# python - 如何在 NLTK 中获取同义词集的 wordnet 感知频率？

> ID：15551195
> 
> 赞同：9
> 
> 时间：2013-03-21T15:06:27.953
> 
> 标签：python, nlp, nltk, wordnet, wsd

根据文档，我可以像这样在 nltk 中加载带有感觉标记的语料库：

```
>>> from nltk.corpus import wordnet_ic
>>> brown_ic = wordnet_ic.ic('ic-brown.dat')
>>> semcor_ic = wordnet_ic.ic('ic-semcor.dat') 
```

我也可以得到`definition`, `pos`, `offset`,`examples`像这样：

```
>>> wn.synset('dog.n.01').examples
>>> wn.synset('dog.n.01').definition 
```

**但是如何从语料库中获取同义词集的频率呢？**分解问题：

1.  首先如何计算一个同义词集是否出现了一个有义标记的语料库？
2.  然后下一步是除以计数除以给定特定引理的所有同义词集出现的计数总数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T15:21:29.083

我设法做到了这一点。

```
from nltk.corpus import wordnet as wn

word = "dog"
synsets = wn.synsets(word)

sense2freq = {}
for s in synsets:
  freq = 0  
  for lemma in s.lemmas:
    freq+=lemma.count()
  sense2freq[s.offset+"-"+s.pos] = freq

for s in sense2freq:
  print s, sense2freq[s] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-14T13:21:17.287

如果您只需要知道最常用的词是什么，您可以这样做，`wn.synsets(word)[0]`因为 WordNet 通常将它们从最频繁到最不频繁排列。

（来源：Daniel Jurafsky 的语音和语言处理第 2 版）

# c# - 在c#中将字符串转换为xml会出现空格错误

> ID：15551196
> 
> 赞同：3
> 
> 时间：2013-03-21T15:06:31.203
> 
> 标签：c#, asp.net, xml, linq-to-xml

我不是 .NET 开发人员，但有一个简单（或者应该很简单！）的任务要完成。我基本上需要从各种字符串值生成一大块 XML，并将其格式化为 C# 中的有效 XML 对象。我的代码是这样的：

```
private XDocument BuildPayload(string weight, string fromCountryCode, string fromZipCode, string toCountryCode, string toZipCode, string serviceTypeCode, string packageTypeCode, string pickupTypeCode)
    {

        string upsAccessLiscenseNumber = "xxxxxxxxxxxxxxxx";
        string upsUserID = "xxxxxxxxxx";
        string upsPassword = "xxxxxxxxx";
        string unitOfMeasurementWeight = "LBS";

        StringBuilder sb = new StringBuilder();
        sb.Clear();
        sb.Append("<?xml version='1.0'?>");
        sb.Append(" <AccessRequest xml:lang='en-US'>");
        sb.Append("     <AccessLicenseNumber>").Append(upsAccessLiscenseNumber).Append("</AccessLicenseNumber>");
        sb.Append("     <UserId>").Append(upsUserID).Append("</UserId>");
        sb.Append("     <Password>").Append(upsPassword).Append("</Password>");
        sb.Append(" </AccessRequest>");
        sb.Append("<?xml version='1.0'?>");
        sb.Append(" <RatingServiceSelectionRequest xml:lang='en-US'>");
        sb.Append("     <Request>");
        sb.Append("         <TransactionReference>");
        sb.Append("             <CustomerContext>Rating and Service</CustomerContext>");
        sb.Append("             <XpciVersion>1.0001</XpciVersion>");
        sb.Append("         </TransactionReference>");
        sb.Append("         <RequestAction>Rate</RequestAction>");
        sb.Append("         <RequestOption>Shop</RequestOption>");
        sb.Append("     </Request>");
        sb.Append("     <PickupType>");
        sb.Append("         <Code>").Append(pickupTypeCode).Append("</Code>");
        sb.Append("     </PickupType>");
        sb.Append("     <Shipment>");
        sb.Append("         <Shipper>");
        sb.Append("             <Address>");
        sb.Append("                 <PostalCode>").Append(fromZipCode).Append("</PostalCode>");
        sb.Append("          <CountryCode>").Append(fromCountryCode).Append("</CountryCode>");
        sb.Append("             </Address>");
        sb.Append("         </Shipper>");
        sb.Append("         <ShipTo>");
        sb.Append("             <Address>");
        sb.Append("                 <PostalCode>").Append(toZipCode).Append("</PostalCode>");
        sb.Append("                 <CountryCode>").Append(toCountryCode).Append("</CountryCode>");
        sb.Append("             </Address>");
        sb.Append("         </ShipTo>");
        sb.Append("         <Service>");
        sb.Append("             <Code>").Append(serviceTypeCode).Append("</Code>");
        sb.Append("         </Service>");
        sb.Append("         <Package>");
        sb.Append("             <PackagingType>");
        sb.Append("                 <Code>").Append(packageTypeCode).Append("</Code>");
        //sb.Append("                   <Description>Package</Description>");
        sb.Append("             </PackagingType>");
        sb.Append("             <Description>Rate Shopping</Description>");
        sb.Append("             <PackageWeight>");
        sb.Append("                 <UnitOfMeasurement>");
        sb.Append("                 <Code>").Append(unitOfMeasurementWeight).Append("</Code>");
        sb.Append("                 </UnitOfMeasurement>");
        sb.Append("                 <Weight>").Append(weight).Append("</Weight>");
        sb.Append("             </PackageWeight>");
        sb.Append("         </Package>");
        sb.Append("         <ShipmentServiceOptions/>");
        sb.Append("     </Shipment>");
        sb.Append("</RatingServiceSelectionRequest>");
        XDocument doc = XDocument.Parse(sb.ToString());
        return doc;
    } 
```

但是，当我调用它时，我得到一个错误：

```
Unexpected XML declaration. The XML declaration must be the first node in the document, and no white space characters are allowed to appear before it. 
```

我发现了几篇建议一些事情的帖子（比如把它`sb.Clear()`放在那里），但没有任何效果。似乎认为 XML 字符串的顶部有一些空间，但我看不到有。我能看到的唯一有点狡猾的是那里有两条`<?xml version='1.0'?>`线。不过，这来自 UPS 文档，而且我有一个旧的 Classic ASP 应用程序，它使用几乎完全相同的 XML，并且工作正常，所以我不确定这是否是问题所在。

谁能指出我正确的方向？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T15:10:38.423

那么，您生成的 XML 肯定**不是**有效的 XML*文档*。它实际上是 2 个 XML 文档，一个接一个。

作为旁注，您可能希望使用 .Net XmlWriter 类来构建 XML 文档，因为它更具表现力，并且可以帮助您查明在形成文档时所犯的任何错误。

但是，这应该只是**XML 的一部分，而**不是您真正想要的是将其解析为**文档片段**并完全删除`<?XML ... ?>`声明。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T15:10:39.200

据我所知，该行`<?xml version='1.0'?>`必须是 XML 文档中的第一行，并且必须恰好**有一个**根节点。您没有根节点/或两个根节点：AccessRequest 和 RatingServiceSelectionRequest。似乎您只是将一个 xml 文档附加到另一个。

您应该将两个节点 RatingServiceSelectionRequest 和 AccessRequest 放在一个根节点中

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-21T15:10:34.527

你用两个声明来调用它。文档中只能有一个声明和一个根元素。你有两个单独的文件。

任何成功读取的内容都不能检查有效的 XML 文档——可能是一次只读取一个元素而不是整个文档的简单读取器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-21T15:17:10.100

这是不正确的 XML。XML 应该只有一个根和一个 xml 声明。

# python - 在包含 àèìòù 等字符的目录中打开 Ipython notebook

> ID：15551198
> 
> 赞同：2
> 
> 时间：2013-03-21T15:06:34.270
> 
> 标签：python, directory, ipython

为什么我无法在此目录中打开 Ipython 笔记本？

```
~/Documenti/Università 
```

我认为这是由于字符“à”但我该如何解决这个问题？真的应该改变目录吗？这里的输出：

```
nunzio@nunzio-Lenovo-U310:~/Documenti/Università$ ipython notebook
[NotebookApp] Using existing profile dir: 
--------------------------------------------------
more output
---------------------------------------------------
    value.instance_init(inst)
  File "/usr/lib/python2.7/dist-packages/IPython/utils/traitlets.py", line 243, in instance_init
    self.set_default_value(obj)
  File "/usr/lib/python2.7/dist-packages/IPython/utils/traitlets.py", line 263, in set_default_value
    newdv = self._validate(obj, dv)
  File "/usr/lib/python2.7/dist-packages/IPython/utils/traitlets.py", line 311, in _validate
    return self.validate(obj, value)
  File "/usr/lib/python2.7/dist-packages/IPython/utils/traitlets.py", line 1012, in validate
    return unicode(value)
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 32: ordinal not in range(128)

If you suspect this is an IPython bug, please report it at:
    https://github.com/ipython/ipython/issues
or send an email to the mailing list at ipython-dev@scipy.org

You can print a more detailed traceback right now with "%tb", or use "%debug"
to interactively debug it.

Extra-detailed tracebacks for bug-reporting purposes can be enabled via:
    c.Application.verbose_crash=True 
```

Ipython的版本是0.12.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:14:10.730

我已将 Ipython 的版本更新为 0.13.1，现在一切正常。谢谢大家！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:01:55.897

这是一个环境问题；我可以通过发布`env -i ipython`(IPython 0.13.1) 来重现崩溃。防止这种情况发生的变量是`LANG`：

```
env -i LANG="$LANG" ipython 
```

作品。我对此的设置是`en_US.UTF-8`，所以你可以添加类似

```
export LANG=en_US.UTF-8 
```

到你的`.bashrc`.

# scala - ClassNotFoundException scala.runtime.AbstractFunction1$mcLI$sp

> ID：15551200
> 
> 赞同：0
> 
> 时间：2013-03-21T15:06:37.390
> 
> 标签：scala

使用 scala 2.10 & specs2 1.11 时出现以下错误，所有测试均失败：

```
 XXXTest.initializationError failed: scala/runtime/AbstractFunction1$mcLI$sp
 [...]
 Caused by: java.lang.ClassNotFoundException: scala.runtime.AbstractFunction1$mcLI$sp 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:06:37.390

通过将 specs2 升级到 1.14 解决：

```
 "org.specs2" %% "specs2" % "1.14" % "test" 
```

# objective-c - 将 id 添加到目标 c 中的 pin 注释以加载详细视图

> ID：15551202
> 
> 赞同：1
> 
> 时间：2013-03-21T15:06:39.470
> 
> 标签：objective-c, mapkit, mkannotation, detailview

我有一个 mapview 控制器，它显示来自我创建的一系列业务对象的引脚（每个业务都有一个获取引脚标题和副标题的方法）。

我为每个正常工作的 pin 注释添加了一个披露按钮，但我不确定如何将变量传递到要从披露按钮加载的详细视图，并显示该特定业务的所有详细信息。

我将我的业务添加到这样的数组中（在 viewWillAppear 中）......

```
// fetch model data for table view
SGTGAppDelegate *appDelegate = (SGTGAppDelegate *)[[UIApplication sharedApplication] delegate];

self.businesses = appDelegate.vaBusinesses;

// Add the business to the map
[self.mapView addAnnotations:self.businesses]; 
```

然后我像这样格式化注释......

```
-(MKAnnotationView *)mapView:(MKMapView *)amapView viewForAnnotation:(id<MKAnnotation>)annotation{
    static NSString *PinIdentifier = @"PinIdentifier";

    //Use default style for user location
    if([annotation isKindOfClass:[MKUserLocation class]])
        return nil;

    //Obtain a pin
    MKPinAnnotationView *pin = (MKPinAnnotationView *) [amapView dequeueReusableAnnotationViewWithIdentifier:PinIdentifier];

    if (pin == nil){
        pin = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:PinIdentifier] autorelease];
    }

    UIButton * detailView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

    // Configue the pin
    pin.annotation = annotation;
    pin.animatesDrop = NO;
    pin.pinColor = MKPinAnnotationColorRed;
    pin.rightCalloutAccessoryView = detailView;
    pin.canShowCallout = YES;

    return pin;
} 
```

然后我有这种方法来处理披露按钮，但不知道在这里做什么来获取业务的 id 以传递到详细视图...

```
-(void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{
    NSLog(@"annotation %@", view.annotation[0]);
    // Fetch the businesses for this row

    // not sure what to do here
    //SGTGVABusiness *business = [self.businesses objectAtIndex:[view.annotation]];

    // Show the detail view by pushing it onto the navigation stack
    SGTGVADetailViewController *dvc = [[SGTGVADetailViewController alloc] initWithStyle:UITableViewStyleGrouped];
    //dvc.business = business;
    [self.navigationController pushViewController:dvc animated:YES];
    [dvc release];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T17:33:15.200

这里真正需要定制的是注解。从注释视图到注释，您没有任何问题；问题是注释没有提供信息。您要做的是创建自己的注释类，一个实现 MKAnnotation 协议的 NSObject 子类，如下所示：

```
@interface MyAnnotation : NSObject <MKAnnotation>
@property (nonatomic) CLLocationCoordinate2D coordinate;
@property (nonatomic, copy) NSString *title, *subtitle;
- (id)initWithLocation:(CLLocationCoordinate2D)coord;
@end

@implementation MyAnnotation
- (id)initWithLocation: (CLLocationCoordinate2D) coord {
    self = [super init];
    if (self) {
        self->_coordinate = coord;
    }
    return self;
}
@end 
```

这是*最小的*，但现在你可以扩展它。特别是，您可以添加另一个属性来存储有关此注释的额外信息。当您创建注释并将其添加到地图时，您将创建此类的一个实例并为其分配您稍后需要获取的信息。

我的书深入讨论了这一点：

[http://www.aeth.com/iOSBook/ch34.html#_annotations](http://www.apeth.com/iOSBook/ch34.html#_annotations)

你可以下载一个开发这个概念的工作项目：

[https://github.com/mattneub/Programming-iOS-Book-Examples/tree/master/ch34p848map/p707p723map](https://github.com/mattneub/Programming-iOS-Book-Examples/tree/master/ch34p848map/p707p723map)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:17:45.163

您可以继承 MKAnnotationView 并创建一个将保存 ID 的属性。

# objective-c - UIImage渐变

> ID：15551207
> 
> 赞同：0
> 
> 时间：2013-03-21T15:06:55.343
> 
> 标签：objective-c, uitableview, uiimage, gradient

好吧，我有一个 UITableView，每个单元格上都有一个 UIImage。一切正常，但现在我想更改图像并使其像此链接的正确图片：

[http://www.cultofmac.com/wp-content/uploads/2012/06/Screen-Shot-2012-06-07-at-13.06.31.jpg](http://www.cultofmac.com/wp-content/uploads/2012/06/Screen-Shot-2012-06-07-at-13.06.31.jpg)

每个图像都有一种我非常想实现的渐变。有什么建议可以实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:32:04.613

与`ARC`：

```
UIImageView *_imageView = ...; // this will be masked
UIImage *_layerImage = [UIIMage imageNamed:@"maskImage.png"]; // mask image
CALayer *_layer = [CALayer layer];
_layer.frame = CGRectMake(0.f, 0.f, _layerImage.size.width, _layerImage.size.height);
_layer.contents = (__bridge id)([_layerImage CGImage]);
[_imageView.layer setMask:_layer]; 
```

* * *

不要忘记

*   包括**QuartzCore.framework**和
*   线`#import <QuartzCore/QuartzCore.h>`；

* * *

蒙版图像`alpha`仅适用于通道，因此在图像`alpha`上`1.f`的位置，原始视图的那部分将是完全可见的，而原始视图的`alpha`那`0.f`部分将是完全透明的。

# php - Jquery 显示变量名而不是值

> ID：15551208
> 
> 赞同：-1
> 
> 时间：2013-03-21T15:06:55.440
> 
> 标签：php, javascript, jquery

我有一个 ajax 删除函数，但变量`qid`没有在 url 中显示它的值。它只是显示它的名字。

编码：

```
$(function(){
    $(".delete_question").click(function(){
        var qid = 3;
        $.ajax({
            type: "GET",
            url: "<?php echo base_url(); ?>index.php/backend/questions/delete/"+qid,
            data: '',
            success: function(data){
                load_questions();
            }
        });
        return false;  //stop the actual form post !important!
    });
}); 
```

我的浏览器显示的内容：

```
url: "http://localhost/cit/index.php/backend/questions/delete/"+qid, 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T15:10:08.350

这对我来说似乎很好。您实际上应该提出一个请求，并看到它去正确的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:11:31.863

`qid`是一个 Javascript 变量，因此不应在 JavaScript 代码中换出。

它重定向到的 URL 将是`http://localhost/cit/index.php/backend/questions/delete/3`

如果您希望它`http://localhost/cit/index.php/backend/questions/delete/3`在 JavaScript 中显示，您必须制作这个 PHP。

像这样：

```
$(function(){
    $(".delete_question").click(function(){
        <?php $qid = 3; ?>
        $.ajax({
            type: "GET",
            url: "<?php echo base_url(); ?>index.php/backend/questions/delete/<?php echo $qid; ?>",
            data: '',
            success: function(data){
                load_questions();
            }
        });
        return false;  //stop the actual form post !important!
    });
}); 
```

# r - 在 R 中使用 ccf 进行互相关

> ID：15551209
> 
> 赞同：0
> 
> 时间：2013-03-21T15:07:00.877
> 
> 标签：r, time-series, confidence-interval, cross-correlation

我想在 R 中使用 ccf 来计算两组时间序列数据的互相关。我的问题是如何知道图中的任何相关系数是否落在蓝色虚线之外而无需手动查看？由于我有数万组时间序列数据要处理。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T15:26:46.113

下面是计算置信区间的方法：

```
res <- ccf(mdeaths, fdeaths, ylab = "cross-correlation")

upperCI <- qnorm((1 + 0.95)/2)/sqrt(res$n.used)
lowerCI <- -qnorm((1 + 0.95)/2)/sqrt(res$n.used) 
```

但是，`help(plot.acf)`警告：

> plot.acf 中绘制的置信区间基于不相关的系列，应谨慎处理。使用 ci.type = "ma" 可能不会产生误导。

查看`getAnywhere(plot.acf)`以了解如何计算“ma”类型的置信区间。

# winforms - 根据值 C# 对 SortedList 进行排序

> ID：15551217
> 
> 赞同：0
> 
> 时间：2013-03-21T15:07:25.610
> 
> 标签：winforms, c#-4.0, sortedlist

我有一个排序列表

```
private SortedList _slSorted = new SortedList(); 
```

`_slSorted`具有`Field`类类型的值（实际上有 2 个类交替转储到其中），其中包含所有属性。

例如：

> `key:0 value:class1 object(having properties property 1 , property 2)`
> 
> `key:1 value:class2 object(having properties property 3 , property 4)`
> 
> `key:2 value:class1 object(having properties property 1 , property 2)`
> 
> 等等..

我需要`sortedList`根据属性 1 或属性 3 进行排序。

诸如收集所有属性值并将它们排序并重新排列

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:48:42.253

您可以通过编写实现 的类`IComparer<object>`并将其传递给 LINQ`OrderBy`方法来创建一个排序的新列表。像这样：

```
SortedList theList = new SortedList();
// I assume you populate it here
// Then, to sort:
var sortedByValue = theList.Cast<object>().OrderBy(a => a, new ListComparer()).ToList(); 
```

这将对项目进行排序并创建一个新的`List<object>`名为`sortedByValue`. 如下图`ListComparer`所示。

尽管这回答了您的问题，但我怀疑这是否是您真正想要的。但我对您的应用程序、您如何使用 以及您想对上面的结果做什么了解不够，`SortedList`无法给出任何不同的建议。我强烈怀疑您需要重新考虑您的设计，因为您在这里所做的事情非常不寻常。

这是`ListComparer`.

```
public class ListComparer: IComparer<object>
{
    public int Compare(object x, object y)
    {
        if (x == null && y == null)
        {
            return 0;
        }
        if (x == null)
        {
            return -1;
        }
        if (y == null)
        {
            return 1;
        }
        if (x is Class1)
        {
            if (y is Class1)
            {
                return (x as Class1).Prop1.CompareTo((y as Class1).Prop1);
            }
            // Assume that all Class1 sort before Class2
            return 1;
        }
        if (x is Class2)
        {
            if (y is Class2)
            {
                return (x as Class2).Prop3.CompareTo((y as Class2).Prop3);
            }
            if (y is Class1)
            {
                // Class1 sorts before Class2
                return -1;
            }
            // y is not Class1 or Class2\. So sort it last.
            return 1;
        }
        // x is neither Class1 nor Class2 
        if ((y is Class1) || (y is Class2))
        {
            return -1;
        }
        // Don't know how to compare anything but Class1 and Class2
        return 0;
    }
} 
```

# javascript - 检索按键事件

> ID：15551219
> 
> 赞同：1
> 
> 时间：2013-03-21T15:07:36.427
> 
> 标签：javascript, jquery, keypress, enter

我正在实现 keypress 以在按下 enter 时提交。我做了一个 jquery 插件，我需要一些帮助：

```
jQuery.fn.enterPress = function(obj, button) {          
            if (e.which == 13) {
                jQuery(button).click();

            }           
    }; 
```

在此函数中，我检索 obj（html 表单）和按钮（将单击哪个按钮）。

我不确定，但我可能不需要这个“obj”。我的问题是我没有这个'e'。我尝试了很多方法，但我不知道我该如何找回它。

我做了这个：

```
jQuery('#' + obj.id).keypress(function(e) {} 
```

但是这个函数被触发了两次，有时是三次。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:21:31.203

jQuery 有一个内置的方法，称为 keypress。

```
$("#target").keypress(function(event) {
  if ( event.which == 13 ) {
     event.preventDefault();
     // do stuff here 
  }
} 
```

如果您想添加一个更通用的方法来将“输入”按键事件绑定到 jQuery 对象，然后单击按钮（正如您在问题和评论中提到的那样），您可以执行以下操作：

```
var $button = jQuery('#somebutton');

jQuery.fn.enterPress = function(callback) {
    jQuery(this).keypress(function(event) {
        if ( event.which == 13 ) {
            event.preventDefault();
            callback();
        }
    });
};

$button.click(function(){
    alert('button was clicked');
})

jQuery('#target').enterPress(function() {
    // what you want to happen after enter is pressed
    $button.click();
}); 
```

[工作示例](http://jsfiddle.net/XNKsq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:17:32.283

此代码在单击“13 keyCode”==“Enter”时发送一个表单

```
$(document).ready(function(e){
    $(document).keypress(function(e){
        if(e.keyCode == 13)
           $("#myFOrm").submit();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T16:48:04.237

密钥已经绑定到提交 HTML 表单，但这里`return`是您如何使用各种方法监听按键事件的方式：

**常规 JavaScript：**

```
document.getElementById('yourFormId').addEventListener('keypress', function(e) {
    if(e.keyCode === 13)
        document.getElementById('yourButtonId').click();
}, false); 
```

**还有常规的 JavaScript：**

```
document.getElementById('yourFormId').onkeypress = function(event) {
    if(event.keyCode === 13)
        document.getElementById('yourButtonId').click();
}; 
```

**或 jQuery：**

```
$('yourFormId').keypress(function(event) {
    if(event.which === 13)
        $('yourButtonId').trigger('click');
}); 
```

# ios - 无法在 iOS 上登录 FirebaseAuth

> ID：15551220
> 
> 赞同：0
> 
> 时间：2013-03-21T15:07:41.880
> 
> 标签：ios, facebook, authentication, firebase

我目前在使用 FirebaseAuth 时收到此错误：

Domain=com.apple.accounts Code=7 "Facebook 服务器无法完成此访问请求：remote_app_id 与存储的 id 不匹配" UserInfo=0x1f5cff20 {NSLocalizedDescription=Facebook 服务器无法完成此访问请求：remote_app_id 与存储的 id 不匹配}

我确实再次检查以确保我的 bundleid 与 facebook 中的配置完全匹配（甚至大小写匹配）。所以这不是关于 bundleid 的 facebook 应用程序设置问题。

我还尝试删除 facebook 应用程序/在 iOS 中注销 FB 并重新登录。但这不会改变结果。

这些是我正在使用的 API： Firebase.framework-1.0.0.zip FirebaseAuthClient.framework-1.0.0.zip

如果有什么我绝对应该尝试的，请告诉我。谢谢！

```
[self.authClient loginToFacebookAppWithId:@"12345" permissions:@[@"email"]
                 withCompletionBlock:^(NSError *error, FAUser *user) {

                     if (error != nil) {
                         // There was an error logging in
                         NSLog(@"There was an error logging in: code = %d", [error code]);

                             NSLog(@"%@", error);

                     } else {
                         // We have a logged in facebook user
                         NSLog(@"We have a logged in facebook user");

                     }
                 }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:03:14.567

您可以尝试从此处获取最新的 FirebaseAuthClient (v1.0.1)：[https](https://www.firebase.com/docs/downloads.html) ://www.firebase.com/docs/downloads.html 并重试吗？我们进行了一些更新，应该会有所帮助。

# string - 将 Java 字符串转换为日期格式

> ID：15551229
> 
> 赞同：0
> 
> 时间：2013-03-21T15:08:08.677
> 
> 标签：string, simpledateformat

我正在努力将 String 'Tue Jan 01 01:01:00 GMT 2013' 转换为日期格式。我尝试使用简单的日期类，但没有成功。

```
String st=list[1];
Date start = new SimpleDateFormat("EEE MM dd yyyy HH:mm:ss zzz yyyy").parse(list[1]); 
```

也许有人可以找到我的错误或推荐其他东西。提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:10:38.297

我想你想要

```
new SimpleDateFormat("EEE MMM dd HH:mm:ss zzz yyyy") 
```

我也许会检查[文档](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)。还要注意这`SimpleDateFormat`不是线程安全的，您可能更喜欢使用[Joda-Time](http://joda-time.sourceforge.net/)等价物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:18:55.433

我认为您需要替换`zzz`为`Z`

# jquery - Jquery DateTime Picker 不会自动设置时间

> ID：15551230
> 
> 赞同：1
> 
> 时间：2013-03-21T15:08:15.637
> 
> 标签：jquery, asp.net-mvc

我有一个名为编辑的视图，当控制器操作返回此视图时，日期选择器将在编辑器和日历中填充正确的日期和时间，但滑块中根本没有设置时间。

我正在使用 Trent Richardson 的插件。

看法：

```
@Html.EditorFor(model => model.RunDate) 
```

model.RunDate 是 DateTime 类型

JS：

```
$(document).ready(function () {
    //    $('.date').datetimepicker()({ dateFormat: "mm/dd/yy" }); 
    $('.date').datetimepicker({
        dateFormat: "mm/dd/yy",
        timeFormat: "hh:mm tt",
        stepMinute: 15,
        addSliderAccess: true,
        sliderAccessArgs: { touchonly: false }
    });
}); 
```

编辑器模板

```
@model Nullable<System.DateTime>
@Html.TextBox("", (Model.HasValue) ? string.Format("{0:MM/dd/yyyy hh:mm:ss tt}", Model.Value) : string.Empty, new { @class = "date" }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:15:46.683

它现在正在工作！编辑器模板中的时间格式包括秒，而 JS 文件中的日期时间选择器定义不包含秒。

# asynchronous - 在 Tornado 中创建循环请求

> ID：15551244
> 
> 赞同：0
> 
> 时间：2013-03-21T15:08:55.517
> 
> 标签：asynchronous, httprequest, tornado

大家好，我有这部分代码：

```
self.lock_tables("write", ['confcommands'])
self.db.execute("INSERT INTO confcommands (network_id, ntype, timestamp, command) \
                 VALUES (%s,%s,%s,%s)", nid, mynet_type, ts, cmdjson)
self.unlock_tables();

time.sleep(5)

como_url = "".join(['http://', options.como_address, ':', options.como_port, 
                            '/ztc_config?netid=0&opcode_group=0&opcode=0&start=-20s&end=-1s'])

http_client = AsyncHTTPClient()
#response = yield tornado.gen.Task(http_client.fetch, como_url)
request = tornado.httpclient.HTTPRequest(url=como_url, connect_timeout=5.0, request_timeout=5.0)
print request.request_timeout
response = yield tornado.gen.Task(http_client.fetch, request)
print response 
```

我写了一个命令发送到数据库中的传感器。然后，我向另一个数据库发出 http 请求以读取传感器的响应。在传感器读取命令与其对详细信息的响应之间有一段时间。

我认为使用异步装饰器和 yield gen.Task 我可以得到响应，就像服务器正在等待一样。但相反，我必须在代码中添加 time.sleep 来停止程序并等待响应。

相反，如果 http 请求正在循环中执行，则有一种方法可以这样做......就像请求等待响应然后停止继续执行程序一样。

谢谢，如果混淆了。但是我很难解释这个问题。

# c# - 从支持 WinForms 互操作的特定位置获取控制

> ID：15551246
> 
> 赞同：1
> 
> 时间：2013-03-21T15:08:59.790
> 
> 标签：c#, wpf, winforms-interop

我有一个 WPF 窗口，其中还包含包装在 WindowsFormsHost 中的 WinForms 控件（除了其他 WPF 控件）。我想确定在某个位置显示的控件（WPF 或 WinForms）。

要接收 WPF 控件的位置，我可以使用

```
VisualTreeHelper.HitTest(wpfWindow, position) 
```

当 WindowsFormsHost 显示在此位置时，这不起作用。对于这种情况，HitTest() 返回 WindowsFormsHost 后面的 WPF 控件。

任何想法如何让它也适用于互操作场景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:20:34.687

检查位置以查看它们是否在 winform 范围内。您可以通过在最高级别的 WPF 控件和 winform 之间创建一个转换来确定边界，然后使用坐标 0,0。结合托管窗口的宽度和高度，您现在有了窗口的边界。使用转换到最高级别的 WPF 控件来转换您的位置，现在您有一种方法可以检查该位置是否在 winform 范围内。

在您确定鼠标是否在 winform 内之后。[参考这个问题](https://stackoverflow.com/questions/8201286/get-cursor-position-with-respect-to-the-control-c-sharp)

如果它不在 winform 中，请使用 VisualTreeHelper。

```
 public Rect HostRect
    {
        get
        {
            var transform = _Host.TransformToVisual(this);
            return new Rect(transform.Transform(new Point(0, 0)), new Point(_Host.ActualWidth, _Host.ActualHeight));
        }
    } 
```

# perl - 如何在 Catalyst 应用程序中创建全局 var $schema 以连接到数据库？

> ID：15551257
> 
> 赞同：0
> 
> 时间：2013-03-21T15:09:43.677
> 
> 标签：perl, catalyst, dbix-class

我创建了一个模型 lib/MyApp/Model/Foo.pm。在里面：

```
...
sub bar {
  my $schema = MyApp::Schem->connect("dbi:SQLite:data.db");
}
... 
```

它工作正常，但是当我这样写时：

```
...
my $schema = MyApp::Schema->connect("dbi:SQLite:data.db");
sub bar {}
... 
```

它不起作用并写下这个：

> 无法通过包“MyApp::Schema”找到对象方法“connect”（也许您忘记加载“MyApp::Schema”？）...

我想创建全局 $schema var 以在不同的方法中使用它。我怎样才能达到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:57:52.277

[Catalyst::Model::DBIC::Schema](https://metacpan.org/module/Catalyst%3a%3aModel%3a%3aDBIC%3a%3aSchema)为每个可能启动的进程自动处理数据库连接。

如果您使用概要中所示的帮助程序创建 MyApp::Model::DBIC，它将开箱即用。对于 SQLite，数据库凭据或数据库文件名通常放在由[Catalyst::Plugin::ConfigLoader](https://metacpan.org/module/Catalyst%3a%3aPlugin%3a%3aConfigLoader)加载的 Catalyst 配置文件中。

请注意，您通常不会向 Catalyst 模型或 DBIx::Class 模式添加任何方法。

要访问模型，无论其类型如何（DBIC、LDAP、...），您都必须`$c->model($modelname)`在 Catalyst 中使用。因此，如果您将模型命名为 MyApp::Model::DBIC 这将是`$c->model('DBIC')`. 要访问 DBIC 结果集，您可以使用[Catalyst::Model::DBIC::Schema](https://metacpan.org/module/Catalyst%3a%3aModel%3a%3aDBIC%3a%3aSchema)支持`$c->model('DBIC')->resultset('Foo')`的`$c->model('DBIC::Foo')`特殊语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:33:55.107

你忘记加载了`MyApp::Schema`吗？

当您`MyApp::Schema->connect`在子例程中调用时，很可能某个其他 Catalyst 组件已经加载了该`MyApp::Schema`模块并使该`connect`方法可用。

`MyApp::Schema::connect`在子例程之外，您的应用程序将在您的模块加载时尝试调用`MyApp::Model::Foo`，它是否成功将取决于加载其他包的顺序。所以写`use MyApp::Schema;`在你的`MyApp::Model::Foo`包裹顶部可能会解决你的问题。

* * *

可能解决您的问题的另一件事是架构的延迟初始化。`$schema`用函数调用替换模型中的所有实例，例如`schema()`，并包含以下代码：

```
my $_schema;
sub schema {
    $_schema //= MyApp::Schem->connect("dbi:SQLite:data.db")
} 
```

现在，您的架构对象在需要时被初始化一次，并且可能在您的应用程序所依赖的所有其他相关模块都已加载之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T16:40:44.297

我在[Catalyst::Model::DBIC::Schema](http://search.cpan.org/~rkitover/Catalyst-Model-DBIC-Schema-0.60/lib/Catalyst/Model/DBIC/Schema.pm)中读到，我们可以使用 $self->schema 从任何地方访问数据库模式。所以这个变体工作正常：

```
sub bar {
  my ($self) = @_;
  my $schema = $self->schema;
} 
```

# azure - 我应该为英国选择哪个 azure 亲和力组？

> ID：15551258
> 
> 赞同：17
> 
> 时间：2013-03-21T15:09:47.577
> 
> 标签：azure

一个简单的问题 - 在选择 Microsoft Azure Affinity Group 时，英国应该考虑北欧还是西欧的一部分？

![在 Windows Azure 上创建存储](../Images/fd77117750b439ad297d027d21374ec4.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-21T15:11:07.783

Azure 在英国没有任何数据中心。

西欧将是阿姆斯特丹。

北欧将是爱尔兰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:36:50.823

[您还可以在Windows Azure 内容交付网络](http://www.windowsazure.com/en-us/develop/net/common-tasks/cdn/)(CDN)上托管您的静态内容。然后，这些物品将从伦敦提供给那些在地理上比都柏林更靠近伦敦的英国人。

以下是 CDN 位置列表：

[http://msdn.microsoft.com/en-gb/library/windowsazure/gg680302.aspx](http://msdn.microsoft.com/en-gb/library/windowsazure/gg680302.aspx)

# c - 如何将打印到 LOGFILE 的值存储在数组中

> ID：15551261
> 
> 赞同：0
> 
> 时间：2013-03-21T15:09:49.180
> 
> 标签：c, arrays, parsing, command-line

```
int parse_command_line (char commandLine[MAX_INPUT_LINE_LENGTH], char* cmds[MAX_CMDS_NUM]){
  char delims[] = "|";
  char *result = NULL;
  result = strtok( commandLine, delims );
 int count = 0;

  if((logfp=fopen("LOGFILE", "w"))==NULL)
    {
      perror("Error");
      exit(1);

  while( result != NULL ) {
    fprintf(logfp, "cmd[%d] will point to string \"%s\"\n", count, result);
    count=count+1;
    result = strtok( NULL, delims );
  }
  fclose(logfp);

  //exit(1);
} 
```

fprintf 语句放置由分隔符“|”终止的行 进入日志文件。我希望该值也存储在一个数组中，我可以在接下来的过程中访问该数组。每次将一行添加到 LOGFILE 时，我都需要数组中的该值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:25:41.420

要做，只需添加

```
cmds[count] = result; 
```

之后`fprintf()`和之前`count=count+1;`

# mysql - 重复键更新时的多次插入

> ID：15551277
> 
> 赞同：0
> 
> 时间：2013-03-21T15:10:48.077
> 
> 标签：mysql, syntax, insert, increment, on-duplicate-key

我想要实现的类似于这个例子

[键插入时单数](https://stackoverflow.com/questions/9590469/upon-duplicate-key-increment-multiple-columns)

然而，我的不同之处在于我试图同时进行多个插入。我更新了很多行。

如果插入重复，我希望插入增加会话数

以下（精简版）导致语法错误，但它应该解释我试图实现的目标

```
INSERT INTO
`pc_tech`.session_route_data (session_volume,country_origin, pu_date)

VALUES

('1','Switzerland','2012-01-01')
ON DUPLICATE KEY UPDATE  `session_volume` = `session_volume`+1,

('8','Ireland','2012-01-01') 
ON DUPLICATE KEY UPDATE `session_volume` = `session_volume`+8,  

('3','UK','2012-01-01')
ON DUPLICATE KEY UPDATE `session_volume` = `session_volume`+3 
```

**修改**了插入的值以匹配重复值，如下面的注释

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:13:47.953

您需要为每个 upsert 做一个声明。对于 RDBMS 来说，像安排连续插入那样安排连续的更新插入是没有意义的。在连续插入的示例中，RDBMS 可以通过执行一次批量插入来提高性能（分配一次空间，一次写入磁盘，而不是每条语句一次）。在 upsert 的示例中，这些收益并不能保证，事实上如果所有语句最终都是更新而不是插入，那么您将浪费时间，而不是获得它（您浪费时间分配不需要的空间，并且您无法像插入一样提前知道要拉出哪些块。）因此，大多数 RDBMS 不为此类操作提供单语句语法。

不幸的是，您的语法可能需要看起来像这样。

```
INSERT INTO
`pc_tech`.session_route_data (session_volume,country_origin, pu_date)
VALUES ('1','Switzerland','2012-01-01')
ON DUPLICATE KEY UPDATE  `session_volume` = `session_volume`+1;

INSERT INTO
`pc_tech`.session_route_data (session_volume,country_origin, pu_date)
('8','Ireland','2012-01-01') 
ON DUPLICATE KEY UPDATE `session_volume` = `session_volume`+8; 

INSERT INTO
`pc_tech`.session_route_data (session_volume,country_origin, pu_date)
('3','UK','2012-01-01')
ON DUPLICATE KEY UPDATE `session_volume` = `session_volume`+3; 
```

如果您担心并发性（如果您希望调度程序从时间和日志记录的角度将多个语句视为单个语句，则需要使用事务。）

# perl - Net::Telnet，试图读取输出

> ID：15551278
> 
> 赞同：0
> 
> 时间：2013-03-21T15:10:49.250
> 
> 标签：perl

我正在尝试从我的设备中读取此输出，我必须如何使用打印和等待，我没有成功。

这是输出....

```
zSH> get v52-interface-group 1
v52-interface-group  1
name-id: --------------------->  {CTAA-024}
local-interface-id: ---------->  {1024}
local-prov-variant: ---------->  {2}
prov-variant-request: -------->  {norequest}
admin-status: ---------------->  {inservice}
pstn-layer-3-start-address: -->  {1}
isdn-env-func-start-address: ->  {1}
port-alignment-request: ------>  {norequest}
national-pstn-region: -------->  {brazil}
switch-vendor: --------------->  {nortel}
protocol-spec: --------------->  {edition2}
startup-check-link-id: ------->  {false}
startup-unblock-user-ports: -->  {false}
link-oos-timer: -------------->  {2500}
link-is-timer: --------------->  {200}

v52-link has 16 elements. Display [a]ll, [n]one, a [s]ubset, or [q]uit? q 
```

这是我要阅读的代码的一部分....

```
$string = "Display [a]ll, [n]one, a [s]ubset, or [q]uit?";
$tel->print("get v52-interface-group 1");
$tel->waitfor(String => $string);
@out = $tel->cmd('q');
print @out; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:16:41.820

您应该尝试在`waitfor()`使用**regex**时保护方括号。

```
$string = "/Display\s+\[a\]ll,\s+\[n\]one,\s+a\s+\[s\]ubset,\s+or\s+\[q\]uit\?/";
$tel->waitfor($string); 
```

# html - 如何在没有实际 Retina 显示屏的情况下在 Windows 上测试 Retina 网站？

> ID：15551287
> 
> 赞同：90
> 
> 时间：2013-03-21T15:11:30.270
> 
> 标签：html, css, retina-display, retina.js

有没有办法在 Windows 上模拟 Retina 显示器来测试网站的 HiDPI 显示器，例如 Retina？

我在标准的 24" 1920x1080 显示器上运行 Windows。昨晚我在朋友全新的 15" Retina MacBook Pro 上查看了我的网站，图形看起来都很模糊（比普通的 15 英寸 MacBook 差得多），而字体是超级清晰锐利，由于直接比较，使徽标看起来更糟。

我已按照本教程使我的网站 Retina 准备就绪：

[http://line25.com/tutorials/how-to-create-retina-graphics-for-your-web-designs](http://line25.com/tutorials/how-to-create-retina-graphics-for-your-web-designs)

我使用了retina.js 方法，因为我没有任何背景图片。

我有什么方法可以测试这是否真的有效？显然，我可以让我的朋友使用他的 Retina Notebook，但这对我来说不是一个可行的工作流程。我希望能够在我自己的环境中至少粗略地测试网站的 Retina 兼容性。

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2013-06-21T05:17:11.317

**关于：Firefox 上的配置破解**

您实际上可以使用 Firefox：

1.  转到“关于：配置”
2.  找到“layout.css.devPixelsPerPx
3.  将其更改为您想要的比例（1 表示正常，2 表示视网膜等。-1 似乎是默认值。）

**截图：（**[来源：][[staticflickr.com](https://farm8.staticflickr.com/7512/26854390370_c7844dde05_z.jpg)][）]

[![](../Images/8b935be683d6ee80b91f86fdd2bb8e8c.png)](https://i.stack.imgur.com/bWXLy.jpg)

刷新您的页面 - 繁荣，您的媒体查询现在开始了！向 Firefox 致敬，因为它非常适合 Web 开发！注意，现在不仅网站的大小将扩大一倍，Firefox UI 也将翻倍。这种加倍或缩放是必要的，因为这是您能够检查标准像素比率屏幕上所有像素的唯一方法。

这在带有 Firefox 21.0 的 Windows 7 以及带有 Firefox 27.0.1 的 Mac OS X 上运行良好。

如果您不使用媒体查询和其他更高级的逻辑（即您正在向每个人提供 HiDPI 图像），您可以使用浏览器将其放大到 200%。Chrome 仿真是一个有用的工具，它可以启动媒体查询，但因为它可以防止缩放，所以您无法检查图像质量。

**放大 Firefox 和 Edge**

目前在 Firefox 和 Edge 上，如果你缩放它会触发基于 dppx 的媒体查询。因此，这种更简单的方法可能就足够了，但请注意，该功能被报告为 Firefox的“无法修复”[错误，因此这可能会改变。](https://bugzilla.mozilla.org/show_bug.cgi?id=809788)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-11-27T10:48:09.610

在 Google Chrome 版本“33.0.1720.0 Canary”中，您现在可以[使用“设备像素比”、“android 字体指标”和“视口仿真”等大量参数来模拟 iPhone5 等设备](http://i.stack.imgur.com/d4CD9.png)。

不再需要那个 Firefox hack —— 无论如何都很难使用。

感谢 Google 开发团队！！:)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-04-22T23:04:59.760

在 chrome 中，您可以通过以下方式完成：

1) 打开 Chrome 开发者工具并点击小“齿轮”图标。 ![在此处输入图像描述](../Images/a49883e4e4e8da48619a1ffbceefc090.png)

* * *

2) 然后选择“在控制台抽屉中显示‘仿真’视图”。 ![在此处输入图像描述](../Images/d632ecdf3eb6f52b1625b38bd46014be.png)

* * *

3) 最后，在 Developer Tools 中打开“控制台抽屉”，然后选择**Emulation**。设置**模拟屏幕**并将**设备像素比**设置为 2.5。

![在此处输入图像描述](../Images/69b3c0929d7321b12d7de198147523e9.png)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-03-21T16:59:34.743

据我所知，除了购买视网膜设备之外，这是不可能的。

**一些解决方法**

*   [这里建议：](http://themeforest.net/forums/thread/where-to-test-retina-displays/75129)

    *   > 如果您将图像大小翻倍并且比例仍然相同，那么您就非常安全了。如果您没有要测试的视网膜显示器，请从像素比媒体查询切换到基于宽度的媒体查询。

    *   高分辨率内容的测试和故障排除
        [http://developer.apple.com/library/mac/#documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Testing/Testing.html](http://developer.apple.com/library/mac/#documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Testing/Testing.html)

*   如何在没有 Retina MacBook Pro 的情况下为 HiDPI（“Retina”）开发
    [http://make.wordpress.org/ui/2012/08/01/dev-for-hidpi-without-retina-mbp/](http://make.wordpress.org/ui/2012/08/01/dev-for-hidpi-without-retina-mbp/)

*   WordPress 视网膜图像
    [http://wpmu.org/wordpress-retina/](http://wpmu.org/wordpress-retina/)

**不太相关**

*   [如何创建响应迅速、支持 Retina 的网站](http://johndyer.name/how-to-create-a-responsive-retina-ready-website/)

*   如何为 Apple 的 Retina 显示器设计
    [http://www.studiopress.com/design/retina-display-design.htm](http://www.studiopress.com/design/retina-display-design.htm)

*   为 Retina 显示器构建网站：与像素交朋友
    [http://www.slideshare.net/shoshizilla/building-websites-for-retina-displays-making-friends-with-pixels](http://www.slideshare.net/shoshizilla/building-websites-for-retina-displays-making-friends-with-pixels)

*   [如何开发一个用于视网膜显示的网站？](https://stackoverflow.com/questions/12000091/how-to-develop-a-website-for-retina-display)

*   [如何准备好视网膜？](https://stackoverflow.com/questions/9748252/how-to-get-retina-ready)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-03-10T11:06:17.697

**使用 Google Chrome 模拟 Retina (HiDPI) 显示的当前方法**

**1)**在网页上“**右键单击”然后选择“****检查**”打开 Chrome 的开发者工具

**2)**单击“**切换设备模式**”图标

[![单击切换设备模式图标](../Images/67b1656d12bff9258033df824741f1fd.png)](https://i.stack.imgur.com/RfNmu.png)

**3)**在屏幕顶部的设备下拉框中，选择“**带 HiDPI 屏幕的笔记本电脑**”

[![选择带有 HiDPI 屏幕的笔记本电脑](../Images/985207fd729019704e19a587f8fac97d.png)](https://i.stack.imgur.com/1T4vO.jpg)

**4)**您现在可以查看网站在 Retina aka HiDPI 屏幕上的外观

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-03-05T05:56:15.020

**谷歌浏览器版本 80**

1.  打开开发者工具`ctrl-shift j`
2.  通过点击左上角的**平板电脑/手机图标**来切换设备工具栏（点击它会变成蓝色）

[![在此处输入图像描述](../Images/37835f7c35e8e3a4618618ca91038bcc.png)](https://i.stack.imgur.com/0MHIO.png)

3.  现在视口上方应该有一个工具栏。单击右上角的选项图标（3 个点），然后选择**添加设备像素比**选项。

[![在此处输入图像描述](../Images/46230f8db5aa3dae9a9b3dc8b4c1ee82.png)](https://i.stack.imgur.com/Nv81I.png)

4.  您现在应该在工具栏上看到该选项。从这里您可以切换到 1x、2x 或 3x。

[![在此处输入图像描述](../Images/856756c5a3e796edd8215f553851d57c.png)](https://i.stack.imgur.com/ZECaD.png)

5.  当您进行测试时，请确保每次更改像素比率时都点击刷新按钮。如果您将比率设置为 2x，然后将其设置回较低，那么您将看不到任何更改，因为如果浏览器已经获取 2x 或更高，则浏览器将不会获取 1x 资产。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-11-21T23:18:45.063

我使用图像大小调整库来动态创建图像。对于 2x 版本，我在调试过程中添加了一个动态水印 - 这可以很容易地查看高分辨率图像是否实际显示。发现它很有帮助。

它的工作方式会有所不同，因此不包括示例代码。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-09-24T17:33:24.460

我不知道这是否太简单了，我按 ctrl 并滚动它会触发媒体查询。我已经在 bugzilla 中检查过了，它可以工作。我不确定 svg 缩放，因为它看起来很模糊，但它是 svg 图像。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2014-04-14T13:59:47.470

如果您有 mac（或 mac osx 虚拟机），则可以将 ios 模拟器与 xcode 一起使用。它确实把窗户炸了两倍大，所以它不是现实生活中的样子，但会清楚地告诉你你的图像是否模糊。

# windows - 批处理 如何重命名保存到变量中的文件？

> ID：15551289
> 
> 赞同：0
> 
> 时间：2013-03-21T15:11:37.567
> 
> 标签：windows, batch-file, file-rename

这是我的情况：

```
@echo off

Setlocal EnableDelayedExpansion
set file=C:\Users\test\Desktop\fscls.cfg 
```

如何重命名 %file% 变量以获取（使用 echo 命令）：

```
C:\Users\test\Desktop\TIMESTAMP_fscls.cfg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:19:45.997

`%time%`环境变量包含时间戳。

```
:: Remove colons from %time%
set ts=%time::=%

:: Remove centiseconds from %ts%
set ts=%ts:~0,-3%

:: file=HHMMSS_file
set file=%ts%_%file% 
```

如果您需要时间戳来包含日期，您可以通过`%date%`以类似方式抓取环境变量来获取它。有关更多信息，请参阅有关[DOS 字符串操作的此页面。](http://www.dostips.com/DtTipsStringManipulation.php)

如果您的`%file%`变量已经包含路径，并且您尝试在路径和文件名之间插入时间戳，那就有点棘手了。您要么需要使用`for /f`循环，要么需要使用`call`子例程来进行批量参数替换。

```
@echo off
setlocal

set file=C:\Users\test\Desktop\fscls.cfg

:: set ds=YYYYMMDDHHMMSS.etc (the result of wmic os get localdatetime)
for /f "tokens=2 delims==" %%I in ('wmic os get localdatetime /format:list') do set ds=%%I

:: set ds=YYYYMMDD
set ds=%ds:~0,8%

:: Insert %ds% into %file%
call :insert "%file%" "%ds%_" file

echo new filename: %file%

:: end main
goto :EOF

:insert <path> <str_to_insert> <varname_to_set>
set "%~3=%~dp1%~2%~nx1" 
```

有关更多信息，请参阅`help for`和的最后几页。`help call`

# ios - 哪种MagicalRecord保存方法

> ID：15551292
> 
> 赞同：9
> 
> 时间：2013-03-21T15:11:48.080
> 
> 标签：ios, objective-c, core-data, magicalrecord

我有一个 NSOperation 子类，它正在将数据下载并导入 CoreData。

完成此操作后，我想保存上下文并将其合并到默认上下文中。

保存不是在一个块中完成的，它只是同步进行，因为它已经在一个 BG 线程中。

完成更改后，我应该使用哪种 MR 保存方法？

他们有几十个，但不确定每个人的作用。

我应该使用...

```
- (void)save:
- (void)saveOnlySelfAndWait;
- (void)saveToPersistentStoreAndWait; 
```

或者我应该在...中进行所有更改

```
+ (void)saveUsingCurrentThreadContext... 
```

我希望它是同步的，以便我可以控制操作的结束。

至少有人可以解释不同保存之间的差异。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-21T15:25:07.923

我承认这些方法没有很好地记录。但是，它们很好地遵循了 Core Data 嵌套上下文模型。

1.  `MagicalRecord`不要`save:`在`NSManagedObjectContext`. _ `MagicalRecord`内置了所有这些额外的错误处理、日志记录和完成处理程序。你想使用它们。

2.  您似乎知道数据需要去哪里（从一个上下文到根）。这取决于您需要使用哪种保存方法的层次结构。如果您只有一层深度（即在*defaultContext*的子上下文中），`saveOnlySelfAndWait`将保存到`defaultContext`. 否则，`saveToPersistentStoreAndWait`将为您遍历层次结构，一直到数据存储。

3.  这些`andWait`方法是阻塞调用。处理程序完成的调用不是。这些在使用中是相当直接的。

# go - Go 中的 .a 文件是什么？

> ID：15551293
> 
> 赞同：30
> 
> 时间：2013-03-21T15:11:52.457
> 
> 标签：go

在 GO 标准库中，我的 Go 安装下有源文件：

```
C:\Go\src\pkg 
```

源文件夹下的包对应这里的 .a 文件：

```
C:\Go\pkg\windows_amd64 
```

.a 文件是什么？它们用于什么以及它们是如何生成的。我注意到，当我这样做时它们会自动生成`go get libraryhostedingithub`。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-21T15:22:20.970

它们是编译包。您在编写时引用的正是这些文件`import foo/bar`。它指的是`$GOROOT/pkg/$GOOS_$GOARCH/foo/bar.a`而不是`$GOROOT/src/foo/bar/*.go`。

这些文件包含已编译的软件包二进制代码，以及调试符号和源信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-21T15:31:28.290

Go `.a` package object archive files are created by the `go tool pack` command: [Command pack](http://golang.org/cmd/pack/).

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-21T15:16:16.320

根据[文档](http://godoc.org/go/build)：

> 如果 DIR 是 Go 路径中列出的目录，则可以将源位于 DIR/src/foo/bar 的包导入为“foo/bar”，并将其编译后的形式安装到“DIR/pkg/GOOS_GOARCH/foo/bar. a”（或者，对于 gccgo，“DIR/pkg/gccgo/foo/libbar.a”）。

所以它似乎只是编译/安装的包。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-11-18T05:47:44.233

正如@peterSO 所说，“Go `.a`package 对象存档文件是由`go tool pack`命令创建的：[Command pack](http://golang.org/cmd/pack/)。”。

但是，更清楚地说，您可以复制这些文件并将扩展名重命名为`.tar.gz`并在程序中将它们作为常规压缩 tar 映像打开，或者您可以使用相同`7zip`的`tar -xvf`命令。`Linux``go tool pack`

在里面你会看到包含架构编译代码和调试符号的编译目标文件“.o”，以及包含包元数据的包定义文件（__.PKGDEF）。

# cordova - phonegap - 如何在应用程序启动时禁用连接到网络？

> ID：15551296
> 
> 赞同：0
> 
> 时间：2013-03-21T15:12:08.723
> 
> 标签：cordova

我找到了启动画面显示时间过长的原因。

打开wifi时，启动变得很慢，关闭wifi时，启动非常快。然后我知道phonegap在应用程序启动时自动连接到网络，可能连接到phonegap网站。

因为我在中国，所以到phonegap网站的网络很慢，所以大约需要30秒。

任何人都知道如何在应用程序启动时禁用连接到网络？

非常感谢！

狮子座

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:46:52.587

如果你使用 Phonegap Build，你需要编辑 config.xml 文件，这里有关于它的[文档](https://build.phonegap.com/docs/config-xml)

如果您是通过 IDE 构建的，那么您必须编辑 manifest.xml 文件 - 这里有一个 Android 应用程序教程[-](http://iphonedevlog.wordpress.com/2012/11/11/cordova-2-2-android-app-creation-in-mountain-lion-with-eclipse-from-install-to-google-play/)大约一半的地方有一些 manifest.xml 的引用，它位于“更新”的选项“4”下Eclipse 文件

希望有帮助。

# git - 如何应用 git 补丁，就好像作者提交给我的仓库一样？

> ID：15551298
> 
> 赞同：12
> 
> 时间：2013-03-21T15:12:13.483
> 
> 标签：git, commit, patch

让我们假设有一个中央存储库，其中来自卫星的提交被推送了一段时间。开发人员 A 在他的 repo 上做了一些提交，而 B 也自己做了一些。

现在，A 想要将 B 的一个提交合并到他的 repo 中（他不能直接访问它来拉取）。

一种方法是让 B 创建一个补丁并将其发送给 A，但在这种情况下存在两个问题： 1\. 补丁将显示为 A 的本地修改，然后 A 必须提交它（使用它自己的名称） 2\. 一旦中央存储库已更新，更改将发生冲突（由两个不同的作者推送）。

有没有办法让补丁直接“作为提交”应用到本地 A 存储库上，这样在他看来就好像它是从中央存储库（即来源）中提取的？

PS：（这可能不适用：请参阅评论：有没有办法在验证之前删除文本？）经过更多调查和测试，看起来 git am < git-formatted-patch 也会使补丁看起来提交给本地master（然后我希望当B将它推送到中央仓库时它会被识别为相同的提交）。看起来是 git apply 使补丁未提交...

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-21T17:42:56.383

`git am`就是你要找的。要求他在本地提交并执行`git format-patch`。这将创建一个补丁。然后，您可以使用 git am 将其添加到您的存储库中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T15:38:40.380

B 可以创建和发送[捆绑包](http://git-scm.com/2010/03/10/bundles.html)而不是补丁。这允许在任何可用于推送或获取的传输都不起作用时发送提交。

# php - 分隔多个值

> ID：15551303
> 
> 赞同：-1
> 
> 时间：2013-03-21T15:12:23.040
> 
> 标签：php, mysql

我有两个 Table 'movies' 和 movie_embeds

在电影中

id 标题描述
1 Movie1 Desc1
2 Movie2 Desc2
3 Movie3 Desc3

In movie_embeds

id movie_id link
1 1 link1
2 1 link2
3 1 link3
4 2 link4
5 2 link5
6 3 link6

**代码：**

```
 $sql = "SELECT *
    FROM movies, movie_embeds
    WHERE movies.id = movie_embeds.movie_id
     GROUP BY movies.title "; 

    $result = mysql_query($sql) or die('A error occured: ' . mysql_error());
while ($row = mysql_fetch_assoc($result)) {
    echo '<p>';
        echo  $row['title'];

    echo '<p>';
        echo $row['link'];

    echo '<p>';
        echo $row['meta'];

    echo '<p>';

    } 
```

**结果：**

```
Movie1
link1
Desc1

movie2
link4
Desc2

movie3
link6
Desc3 
```

问题是我怎样才能在第一个和其他结果中拥有 link2 和 link3？

如果我删除 GROUP BY movies.title 电影标题并且全部重复 3 次。帮助？

我需要这样的结果

**我需要这样的结果：**

```
Movie1
link1
link2
link3
Desc1

movie2
link4
link5
Desc2

movie3
link6
Desc3 
```

我附上了sql和php代码
[测试php文件](http://bomaza.com/test.txt)
[测试sql](http://bomaza.com/test.sql)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:38:10.203

最好这样做：

```
 SELECT m.*,me.*
    FROM movies m
    JOIN movie_embeds me ON (me.movie_id=m.id)
    GROUP BY m.title; 
```

编辑：您可以尝试删除组并添加一个独特的，但我认为这可能是您的打印机代码有问题。您是否尝试过从第三方客户端运行查询？

# joomla - Joomla 2.5 JHTML 选择链接？

> ID：15551304
> 
> 赞同：0
> 
> 时间：2013-03-21T15:12:27.917
> 
> 标签：joomla, joomla2.5

在 Joomla 2.5 我有这个 mod_joomanager_search.php。您知道我在此参数中进行了哪些更改以从选择下拉列表到标准文本链接吗？我在 Joomla API 中找不到这个：

这是代码：

```
echo JHTML::_( 'select.genericlist', $resul, 'dropdownsearch['.$searchField->id.']' ,
'size="1" style="margin-top:2px;width:100%;" class="inputbox" ', 'value','text').'</div>'; 
```

此外，有谁知道这个 JHTML 的 API 在哪里获取所有可能选项的列表？我一直迷失在他们的 API 页面上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:20:29.133

JHtmlSelect 的文档在这里：[http](http://api.joomla.org/Joomla-Platform/HTML/JHtmlSelect.html) ://api.joomla.org/Joomla-Platform/HTML/JHtmlSelect.html 。通用列表是其中的一部分。

如果要创建列表标准文本链接，则不必使用 JHtmlSelect。顾名思义，此类旨在创建选择列表 :-) 您只需`foreach`自己使用和创建链接。

# node.js - 为 yepnope.js 安装 node.js 依赖项时出现“ERR！不是包”

> ID：15551307
> 
> 赞同：5
> 
> 时间：2013-03-21T15:12:33.573
> 
> 标签：node.js, npm, yepnope

很确定我在这里做了一些愚蠢的事情——我不相信它是[yepnope 特有](http://yepnopejs.com)的……我的节点知识并不那么热门。

只是试图抓住并构建 repo 来玩一些东西（我不想*在*这里的另一个项目中使用它），我这样做是这样的：

```
$ npm cache clean
$ git clone https://github.com/SlexAxton/yepnope.js.git
$ cd yepnope.js
$ git checkout v2.0     # this is the branch I want
$ npm install 
```

但是在这个过程的一半，我得到了这样的东西：

```
npm http GET https://registry.npmjs.org/nopt/-/nopt-2.1.1.tgz
npm http 200 https://registry.npmjs.org/wd/0.0.26
npm http GET https://registry.npmjs.org/wd/-/wd-0.0.26.tgz
npm ERR! not a package /var/folders/00/17q10000h01000cxqpysvccm004yw4/T/npm-13923/1363859875320-0.8848134819418192/tmp.tgz
npm http 304 https://registry.npmjs.org/uglify-js
npm ERR! Error: ENOENT, open '/var/folders/00/17q10000h01000cxqpysvccm004yw4/T/npm-13923/1363859875320-0.8848134819418192/package/package.json'
npm ERR! If you need help, you may report this log at:
npm ERR!     <http://github.com/isaacs/npm/issues>
npm ERR! or email it to:
npm ERR!     <npm-@googlegroups.com>

npm ERR! System Darwin 12.2.1
npm ERR! command "node" "/usr/local/bin/npm" "install"
npm ERR! cwd /Users/<username>/code/yepnope.js
npm ERR! node -v v0.8.12
npm ERR! npm -v 1.2.14
npm ERR! path /var/folders/00/17q10000h01000cxqpysvccm004yw4/T/npm-13923/1363859875320-0.8848134819418192/package/package.json
npm ERR! code ENOENT
npm ERR! errno 34 
```

它仍然持续到最后，但以：

```
Extracting zip contents
npm ERR!
npm ERR! Additional logging details can be found in:
npm ERR!     /Users/<username>/code/yepnope.js/npm-debug.log
npm ERR! not ok code 0 
```

奇怪的是，`npm ERR! not a package`每次我尝试它时，这条线都会出现在不同的地方（每次都是新的 repo 克隆）——也许这只是因为它异步获取东西？

我看了看，`npm-debug.log`在提到路径的地方找不到任何太能说明问题的地方，该路径被认为是“不是一个包”——我真的不想在这里发布完整的文件，但我很乐意分享如果有人可以建议要寻找什么。

任何想法是什么导致这失败？提前非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T16:00:17.917

你得到的一些原因`npm ERR! not a package`：

1.  包描述中的错误 -[示例](https://github.com/isaacs/npm/issues/3026)
2.  由于 github repo 链接 -[示例](https://github.com/isaacs/npm/issues/2349)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T19:26:58.843

关于@user568109 清单：如果您不确定您的 package.json 文件中是否有任何错误，只需将其粘贴到[http://jsonlint.com](http://jsonlint.com)即可。

# database - Postgis Postgres 客户端集成不起作用？

> ID：15551311
> 
> 赞同：0
> 
> 时间：2013-03-21T15:12:36.837
> 
> 标签：database, postgresql, gis, postgis

我正在尝试使用 Postgis。我已经设置了一个数据库，添加了一个带有几何列的表，其中包含点并索引了该列。

我觉得奇怪的一件事是，在许多情况下，列中的数据没有被转换为在客户端中显示。

例如，如果我将其粘贴到外壳中

```
SELECT ST_MakePolygon(ST_GeomFromText('LINESTRING(75.15 29.53 1,77 29 1,77.6 29.5 1, 75.15 29.53 1)')); 
```

我得到这个结果

```
 st_makepolygon                                                                                                       
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 010300008001000000040000009A99999999C9524048E17A14AE873D40000000000000F03F00000000004053400000000000003D40000000000000F03F66666666666653400000000000803D40000000000000F03F9A99999999C9524048E17A14AE873D40000000000000F03F
(1 row) 
```

我不应该得到这样的东西吗？

```
st_asewkt
-----------
POLYGON((75.15 29.53 1,77 29 1,77.6 29.5 1,75.15 29.53 1)) 
```

此外，当我从几何列中选择点时，我也会看到它们的原始数据。

如果这是正确的，我如何翻译数据以便我可以轻松地看到几何图形中的内容？

我希望能够在列中看到我的点显示为 POINT(x,y,z) 或类似的东西。

有趣的是，如果我运行类似这样的操作

```
SELECT ST_Extent(geom) FROM towns WHERE town = 'BOSTON'; 
```

客户向我展示了这个结果

```
 st_extent     
------------------
 BOX(10 10,10 10)
(1 row) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T23:14:58.517

[几何图形作为众所周知的二进制](http://en.wikipedia.org/wiki/Well-known_binary)对象存储在数据库中，因为它是一种紧凑且无损的格式。查询此数据类型时，将其解码为十六进制文本表示，如您的问题所示。我能想到的唯一改变默认输出行为的方法是重新定义演员表。

此 hack 需要从`postgis.sql`启动器脚本而不是`CREATE EXTENSION postgis;`方法安装 PostGIS。然后，重新定义演员表从`geometry`to `text`：

```
DROP CAST (geometry AS text);
CREATE CAST (geometry AS text) WITH FUNCTION ST_AsText(geometry) AS IMPLICIT; 
```

现在显示以下行为：

```
SELECT '010300008001000000040000009A99999999C9524048E17A14AE87'
'3D40000000000000F03F00000000004053400000000000003D40000000000'
'000F03F66666666666653400000000000803D40000000000000F03F9A9999'
'9999C9524048E17A14AE873D40000000000000F03F'::geometry::text;

                             text
---------------------------------------------------------------
 POLYGON Z ((75.15 29.53 1,77 29 1,77.6 29.5 1,75.15 29.53 1))
(1 row) 
```

但它只适用于`::text`演员表。没有它，它会转换`geometry`为`bytea`，它默认转换为十六进制格式的文本。

但是，我不推荐这种 hack。如果您需要人类可读的 WKT 字符串，请记住在 SQL 语句中使用 ST_AsText。另外，请记住，WKT 是几种文本格式之一；其他人请参阅[手册中的“几何输出”](http://www.postgis.org/docs/reference.html#Geometry_Outputs)。

# c++ - 我应该改变我的设计以防止动态转换吗？

> ID：15551313
> 
> 赞同：8
> 
> 时间：2013-03-21T15:12:39.943
> 
> 标签：c++, oop, dynamic-cast

我已经阅读了几个关于 C++ 中动态转换的主题，所有的人都声称它表明设计不好。在其他语言中，我在检查对象的类型时从未考虑过太多。我从不使用它作为多态性的替代品，并且只有在强耦合似乎完全可以接受时才使用它。我经常遇到的其中一种情况：拥有一个对象列表（我在 C++ 中使用 std::vector），所有对象都派生自一个公共基类。该列表由允许知道不同子类的对象管理（通常是管理对象类中私有类的小层次结构）。通过将它们保存在单个列表（数组、向量、..）中，我仍然可以从多态性中受益，但是当一个操作要作用于特定子类的对象时，我使用动态转换或类似的东西。

在没有动态转换或我缺少的类型检查的情况下，是否有不同的方法来解决此类问题？我真的很好奇不惜一切代价避免这些的程序员会如何处理它们。

如果我的描述太抽象，我可以用 C++ 写一个简单的例子（编辑：见下文）。

```
class EntityContacts {
private:
  class EntityContact {
  private:
    virtual void someVirtualFunction() { };            // Only there to make dynamic_cast work
  public:
      b2Contact* m_contactData;
  };

  class InternalEntityContact : public EntityContact {
  public:
    InternalEntityContact(b2Fixture* fixture1, b2Fixture* fixture2){
        m_internalFixture1 = fixture1;
        m_internalFixture2 = fixture2;
    };

    b2Fixture* m_internalFixture1;
    b2Fixture* m_internalFixture2;
  };

  class ExternalEntityContact : public EntityContact {
  public:
    ExternalEntityContact(b2Fixture* internalFixture, b2Fixture* externalFixture){
        m_internalFixture = internalFixture;
        m_externalFixture = externalFixture;
    };

    b2Fixture* m_internalFixture;
    b2Fixture* m_externalFixture;
  };

  PhysicsEntity* m_entity;
  std::vector<EntityContact*> m_contacts;
public:
  EntityContacts(PhysicsEntity* entity)
  {
    m_entity = entity;
  }

  void addContact(b2Contact* contactData)
  {
    // Create object for internal or external contact
    EntityContact* newContact;
    if (m_entity->isExternalContact(contactData)) {
        b2Fixture* iFixture;
        b2Fixture* eFixture;
        m_entity->getContactInExFixtures(contactData, iFixture, eFixture);
        newContact = new ExternalEntityContact(iFixture, eFixture);
    }
    else
        newContact = new InternalEntityContact(contactData->GetFixtureA(), contactData->GetFixtureB());

    // Add object to vector
    m_contacts.push_back(newContact);
  };

  int getExternalEntityContactCount(PhysicsEntity* entity)
  {
    // Return number of external contacts with the entity
    int result = 0;
    for (int i = 0; i < m_contacts.size(); ++i) {
        ExternalEntityContact* externalContact = dynamic_cast<ExternalEntityContact*>(m_contacts[i]);
        if (externalContact != NULL && getFixtureEntity(externalContact->m_externalFixture) == entity)
            result++;
    }
    return result;
  }
}; 
```

它是我在使用 box2d 物理的​​游戏中用于碰撞检测的类的简化版本。我希望 box2d 的细节不会过多地分散我想要展示的内容。我有一个非常相似的类“事件”，它创建不同类型的事件处理程序，其结构相同（使用基类 EventHandler 的子类而不是 EntityContact）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T15:22:25.663

至少从我的角度来看，`dynamic_cast`存在是有原因的，而且有时使用它是合理的。这可能是其中之一。

鉴于您描述的情况，一种*可能的*替代方法可能是在基类中定义更多您需要的操作，*但*如果您为基类或其他不支持这些的类调用它们，则将它们定义为（可能静默地）失败操作。

真正的问题是，以这种方式定义您的操作是否有意义。回到典型的基于动物的层次结构，如果你在使用 Birds，Bird 类定义一个`fly`成员通常是明智的，而对于少数不会飞的鸟，让它失败（理论上应该重命名）像这样的东西`attempt_to_fly`，但这很少能完成很多事情）。

如果你看到很多这样的东西，它往往表明你的类中缺乏抽象——例如，你可能真的想要一个成员，而不是一个`fly`or ，这取决于个体动物来决定是否这样做通过游泳、爬行、步行、飞行等。`attempt_to_fly``travel`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:19:06.223

这个问题非常广泛，因此需要考虑一些一般要点：

*   这是该语言的一个特性是有原因的，这意味着有有效的用例。
*   一般来说，它本身没有好坏之分。
*   检查它是否适合*您的*问题。
*   了解解决问题的*替代方案。*
*   将它与其他语言进行比较应该包括 C++/C++11 的替代方案是否也可以在其他语言中使用的问题。
*   `dynamic_cast`产生一定的成本。如果它与运行时性能有关，请对照替代方案的成本进行检查。
*   检查是在运行时执行的，如果没有正确测试，这会产生一定的风险，即您交付有缺陷的软件。通过静态类型检查，编译器可以帮助您，甚至*保证*不会发生某些问题/错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:20:15.200

通常在这种情况下，您将管理的不是派生对象列表，而是引用实际派生对象的接口指针（或基指针）列表。每当您想对特定对象执行操作时，您都可以通过其接口/基类访问它，该接口/基类应该公开所有必需的功能。派生类应该用特定的实现覆盖暴露的基本功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T15:23:08.753

使用 dynamic_cast 是想要实现像访问者或命令这样的设计模式的症状，所以我建议重构以使其明显

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T15:16:38.993

这个

> 但是当一个操作要作用于特定子类的对象时，我使用动态转换或类似的东西

听起来对象建模不正确。您有一个包含子类实例的列表，但它们并不是真正的子类，因为您不能以相同的方式对它们进行操作（Liskov 等）。

一种可能的解决方案是扩展您的基类，以便您拥有一组特定子类可以覆盖的无操作方法。但这听起来仍然不太对劲。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T15:25:19.580

与任何被认为是糟糕编程的方法一样，总会有一些例外。当程序员说“某某是邪恶的，你永远不应该这样做”时，他们的真正意思是“几乎没有理由使用某某，所以你最好自己解释一下”。我自己从来没有遇到过 a`dynamic_cast`是绝对必要且不能轻易重构的情况。但是，如果它完成了工作，那就这样吧。

由于我们不知道您的具体问题，我只能根据您告诉我们的内容提供建议。你说有一个多态基类型的容器。例如：

```
std::vector<Base*> bases; 
```

如果您打算以特定于派生的方式使用放置到此容器中的任何对象，那么它实际上并不是基础对象的容器，是吗？拥有一个指向`Base`对象的指针容器的全部意义在于您可以遍历它们并将它们全部视为`Base`对象。如果您必须使用`dynamic_cast`某种`Derived`类型，那么您已经滥用了`Base*`s 的多态行为。

如果`Derived`继承自`Base`，则`Derived` *is-a* `Base`。简而言之，如果您使用指向类型的多态`Base`指针`Derived`，那么您应该只使用`Derived`使其成为`Base`.

# mysql - sql join with where 和 1-n 连接

> ID：15551314
> 
> 赞同：0
> 
> 时间：2013-03-21T15:12:41.807
> 
> 标签：mysql, sql

我们有 2 张桌子：

```
UserTable

userid   username
1        test
2        test2
3        test3

UserStatus

statusid userid status
1        1      1
2        1      3
3        1      7
4        2      1 
```

现在我们需要一个用户列表，其中包含**没有**状态 3 的用户。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:15:58.203

您可以使用`NOT EXISTS`：

```
select u.userid,
  u.username
from usertable u
where not exists (select s.userid
                  from userstatus s
                  where s.status = 3
                    and u.userid = s.userid); 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/8be95/5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T15:14:44.623

您可以使用 NOT IN：

```
SELECT usertable.*
FROM usertable
WHERE userid NOT IN (SELECT userid from userstatus where status=3) 
```

请[在此处](http://sqlfiddle.com/#!2/75694/2)查看小提琴。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T15:15:54.273

```
SELECT * FROM UserTable
WHERE userid NOT IN
(SELECT userid FROM UserStatus WHERE status = 3) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T15:15:08.967

```
SELECT username from UserTable
WHERE userid NOT IN (SELECT userid FROM UserStatus WHERE status = 3) 
```

# eclipse - eclipse 删除活动的 Maven 配置文件

> ID：15551320
> 
> 赞同：0
> 
> 时间：2013-03-21T15:13:21.420
> 
> 标签：eclipse, maven

所以在 Eclipse Helios 中，我在 Active Maven Profile 中输入了一个有效值，在启动服务器后，我检查了活动的 maven 配置文件，似乎 Eclipse 已经删除了它。

我在特定项目的项目属性中设置了*活动 Maven 配置文件*，并在属性中搜索 Maven，然后我看到一个屏幕，我在其中输入*活动 Maven 配置文件的信息*

我以前从来没有遇到过这种情况，有解决办法吗？

# java - 为什么无论层次结构如何，GAE 实体名称都必须是唯一的？

> ID：15551321
> 
> 赞同：1
> 
> 时间：2013-03-21T15:13:23.757
> 
> 标签：java, google-app-engine, objectify

我在 Google App Engine 上，使用 Objectify。考虑以下简化设置：

```
@Entity
public class UserGroup
{
    @Id
    private String identifier;
}

@Entity
public class User
{
    @Id
    private String username;
    private String password;
    @Parent
    Ref<UserGroup> usergroup;
} 
```

现在我假设如果我有两个用户组（我们称它们为 A 和 B），我最多可以拥有三个用户名为“admin”的用户实体：一个以用户组 A 作为父级，一个以用户组 B 作为父级，一个没有用户组作为父级。

然而，事实并非如此。如果我在 A 组中创建管理员，然后在没有组的情况下创建管理员，然后在 B 组中创建管理员，则只有一个：B 中的一个，它覆盖了其他两个。

在我看来，这似乎是不一致的。如果不将 B 指定为父实体，并且只给出“admin”作为名称，我将无法在 B 中找到那个，因为这意味着在根目录中查找他。但是，如果我在任何地方创建一个具有该名称的用户，它会覆盖具有相同名称的用户，而不管他在对象层次结构中的位置如何。

我的问题是：为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:57:35.203

你在测试中犯了某种错误。{UserGroupA, "admin"} 和 {UserGroupB, "admin"} 确实是具有不同键的独立实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T08:37:46.630

If you create a "User" entity using a key name as an ID, there will only be one unique "User" in the datastore with that ID : if you write twice a user with the same Key name in the datastore, the first write will be an "insert" and the second will be considered an "update". In your use case maybe you should use an auto generated Key object for the ID, and have another field named "role" or something to put your "admin" value.

# d3.js - 使用您自己的数据而不是此处生成的随机数据的代码是什么？

> ID：15551322
> 
> 赞同：1
> 
> 时间：2013-03-21T15:13:24.540
> 
> 标签：d3.js, nvd3.js

我正在尝试在[http://nvd3.org/ghpages/scatter.html](http://nvd3.org/ghpages/scatter.html)此处构建示例， 但使用我自己的数据进行了自定义修改版本。我在构建使用真实数据的代码时遇到了麻烦，有人可以向我展示一个可能的代码是什么样子的示例代码吗？引用内联数据或 CSV 都可以。

我只是很难弄清楚如何退出 randomData 函数。

我的示例页面在这里[http://goo.gl/XHela](http://goo.gl/XHela)和我的代码是....

```
<div id="offsetDiv">
  <div id="test1" class="chartWrap">
    <svg></svg>
  </div>
</div>

<script>
//Format A
var chart;

nv.addGraph(function() {
  chart = nv.models.scatterChart()
                .showDistX(true)
                .showDistY(true)
                //.height(500)
                .useVoronoi(true)
                .color(d3.scale.category10().range());

  chart.xAxis.tickFormat(d3.format('.02f'))
  chart.yAxis.tickFormat(d3.format('.02f'))

  d3.select('#test1 svg')
      .datum(randomData(4,40))
    .transition().duration(500)
      .call(chart);

  nv.utils.windowResize(chart.update);

  chart.dispatch.on('stateChange', function(e) { nv.log('New State:', JSON.stringify(e)); });

  return chart;
});

function randomData(groups, points) { //# groups,# points per group
  var data = [],
      shapes = ['circle', 'cross', 'triangle-up', 'triangle-down', 'diamond', 'square'],
      random = d3.random.normal();

  for (i = 0; i < groups; i++) {
    data.push({
      key: 'Group ' + i,
      values: []
    });

    for (j = 0; j < points; j++) {
      data[i].values.push({
        x: random(), 
        y: random()
        , //size: Math.random()
   //     shape: shapes[j % 6]
      });
    }
  }

  return data;
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:37:54.897

该`randomData`函数返回如下结构：

```
var data = [{key: 'Group1', values: [{x: 1, y: 1}, {x: 2, y: 3}, {x: 4, y: 9}]},
            {key: 'Group2', values: [{x: 32, y: 0}, {x: 3, y: 54}, {x: 1, y: 8}]}]; 
```

所以基本上你有一个键和一个值列表，每个值都由一个对象`x`和`y`成员组成。您应该能够使用上面的代码作为调用的替代品，`randomData`并且您拥有的任何数据都可以通过将其转换为这种格式来使用。

# python - 如何确保在调试期间关闭 sqlite db 连接？

> ID：15551323
> 
> 赞同：1
> 
> 时间：2013-03-21T15:13:26.037
> 
> 标签：python, sqlite, try-catch, try-except

我正在处理一些连接到 sqlite 数据库的代码。在调试所述代码的过程中，我遇到了挂起与数据库的打开连接的问题，因为某些错误阻止了关闭命令的执行。因为 db 和 c 是在函数中定义的，所以我无法从命令行找到并关闭这些对象。它们就像孤立的连接或其他东西，但无论如何它们都会阻止我对数据库做任何其他事情，直到我关闭并重新打开我的交互式控制台。这是它的样子：

```
def something()
    db=sqlite3.connect('mydatabase')
    c=db.cursor()

    somecode
    lots of different things happening in here
    this may have errors
    thus stopping execution

    db.commit()
    c.close()
    db.close() 
```

我已经在“finally”块中尝试了一个带有最终关闭操作的 try/except 子句，但这可以防止在我调试时将异常引发回交互式输出，并且事情会“默默地”失败（也许我不是做那部分对吗？）。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T15:25:42.747

通常最好使用 with...as 语句：

```
with sqlite.connect(...) as db:
    with db.cursor() as c:
        ... 
```

**with**语句保证 close() 将在 with 语句结束或引发异常时在对象上调用。甚至当从内部调用 return 或 yield 时。

在这里阅读更多：http: [//docs.python.org/2/reference/compound_stmts.html#with](http://docs.python.org/2/reference/compound_stmts.html#with)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-03T10:30:49.457

正如 Piotr 所指出的，使用 with 语句可以提高代码的效率，尽管它不会显式关闭与数据库的连接，如果这是用户想要的。这是由一个类似的问题[在这里](https://stackoverflow.com/questions/9561832/what-if-i-dont-close-the-database-connection-in-python-sqlite)找到的。

如果 with 语句中的代码块执行没有错误，则使用 with 语句的作用是运行 con.commit() 方法；如果遇到异常，则使用 con.rollback() 方法。

[来自http://docs.python.org/2/library/sqlite3.html](http://docs.python.org/2/library/sqlite3.html)的示例

```
import sqlite3

con = sqlite3.connect(":memory:")
con.execute("create table person (id integer primary key, firstname varchar unique)")

with con:
    con.execute("insert into person(firstname) values (?)", ("Joe",))

# If Successful, con.commit() is called automatically afterwards
# else con.rollback() is called after the with block finishes with an exception, 
# the exception is still raised and must be caught

try:
    with con:
        con.execute("insert into person(firstname) values (?)", ("Joe",))
except sqlite3.IntegrityError:
    print "couldn't add Joe twice" 
```

注意快捷方法 con.execute() 的使用，它是数据库连接对象的一种方法。这隐式地为您创建游标对象并返回结果，因此需要编写的代码更少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:19:44.990

要清理资源，请*仅* `finally`使用：

```
db = sqlite.connect(...)
try:
    ...
    c = db.cursor()
    try:
        ...
    finally:
        c.close()
    ...
finally:
    db.close() 
```

# python - 有没有一种方法可以访问可变参数而不在 Python 中指定默认值参数

> ID：15551324
> 
> 赞同：2
> 
> 时间：2013-03-21T15:13:26.403
> 
> 标签：python, python-2.7, arguments, argument-passing

```
def foo(a=MyComplexObject(), b=Something(), *args):
    print a, b, args 
```

有没有办法在函数调用中`foo`指定 *args 而*不是*指定 a 或 b 来调用 - 从而使用默认值？

就像是

```
foo(*args=(1,2,3)) 
```

这纯粹是出于好奇。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:16:36.410

您还必须将关键字参数移动到变量关键字捕获中：

```
def foo(*args, **kw):
    a = kw.get('a', MyComplexObject())
    b = kw.get('b', b=Something())
    print a, b, args 
```

*否则 Python 将首先*填充两个关键字参数，因为在 Python 2 中无法指定这些关键字不能由位置参数填充。

Python 3[更改了位置 catchall 参数的解释，](http://www.python.org/dev/peps/pep-3102/)使这成为可能，而不会强制您使用`**`关键字参数 catch-all。

如果您不能自己更改函数定义或升级到 Python 3，那么您唯一的办法是再次指定默认值，或者从函数中检索它们（使用[`inspect.getargspec()`便捷函数](http://docs.python.org/2/library/inspect.html#inspect.getargspec)）：

```
import inspect

defaults = inspect.getargspec(foo).defaults
foo(*(defaults + (1,2,3))) 
```

`defaults`这是关键字参数默认值的元组。

示范：

```
>>> import inspect
>>> def foo(a='spam', b='foo', *args):
...     print a, b, args
... 
>>> defaults = inspect.getargspec(foo).defaults
>>> foo(*(defaults + (1,2,3)))
spam foo (1, 2, 3) 
```

# android - 如何让我的 RelativeLayout 出现在我的 LinearLayout 旁边？

> ID：15551327
> 
> 赞同：1
> 
> 时间：2013-03-21T15:13:36.947
> 
> 标签：android, android-layout, android-linearlayout, android-relativelayout

我正在努力实现以下目标：

![在此处输入图像描述](../Images/19d8615fc7622469e5dd948e17ac2696.png)

我正在尝试`LinearLayout`在`RelativLayout`.

我已经尝试将其包装`RelativeLayout`成 a `LinearLayout`，但这没有任何区别。我正在使用`RelativeLayout`来在图像缩略图前面显示文本。

但是，我仍然无法弄清楚，我尝试了一切。

这里是 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:adjustViewBounds="true"      
    android:gravity="left|center"
    android:layout_weight="1"  
    android:orientation="vertical"
    android:background="#313131" >     
    <LinearLayout
        android:layout_width="fill_parent"              
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="left" >       
        <ImageView
            android:id="@+id/otv2"         
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"         
            android:layout_marginRight="10dp"
            android:layout_marginTop="5dp"
            android:layout_marginBottom="5dp"          
            android:src="@drawable/otv_2"          
            android:gravity="left" />
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"         
            android:layout_marginRight="10dp"
            android:layout_marginTop="5dp"  
            android:layout_weight="1"       
            android:text="sehen was bewegt" 
            android:textColor="#FFFFFF"       
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:gravity="right" />
    </LinearLayout>    
    <View android:layout_width="fill_parent"
        android:layout_height="1dp"
        android:background="#007cc2"/> 
    <LinearLayout      
        android:layout_width="fill_parent"             
        android:layout_height="wrap_content"
        android:layout_marginBottom="25dip"
        android:orientation="vertical"  
        android:adjustViewBounds="true"  
        android:gravity="left|top" >     
        <RelativeLayout             
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"                 
            android:layout_gravity="left" >           
            <ImageView
                android:id="@+id/otv2_thumb"    
                android:adjustViewBounds="true"       
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"         
                android:layout_marginRight="10dp"
                android:layout_marginTop="10dp"                
                android:layout_marginBottom="3dp" />

            <TextView android:id="@+id/duration"
                android:layout_width="fill_parent"  
                android:layout_height="wrap_content" 
                android:textColor="#ffffff" 
                android:layout_alignLeft="@+id/otv2_thumb"
                android:layout_alignTop="@+id/otv2_thumb"
                android:layout_alignRight="@+id/otv2_thumb"
                android:layout_alignBottom="@+id/otv2_thumb"    
                android:layout_marginLeft="10dp"        
                android:text="00:45"
                android:textStyle="bold"
                android:gravity="left|bottom"                          
                android:textAppearance="?android:attr/textAppearanceMedium" />      
        </RelativeLayout>      
        <LinearLayout       
            android:orientation="vertical"
            android:layout_width="wrap_content"        
            android:layout_height="wrap_content"
            android:layout_weight="1"                 
            android:layout_marginTop="10dp"              
            android:background="#666666"
            android:gravity="right|top">       
            <TextView android:id="@+id/location"
                android:layout_width="fill_parent"   
                android:textColor="#3E3F41" 
                android:paddingLeft="0dp"                    
                android:layout_height="fill_parent"
                android:text="EICHENZELL - 03.03.1303"     
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:gravity="left|top"/>            
            <TextView 
                android:id="@+id/text"       
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:paddingLeft="0dp"                     
                android:textColor="#FFFFFF"
                android:text="asdaf asgsadg gadg "     
                android:textAppearance="?android:attr/textAppearanceSmall" 
                android:gravity="left|center" />    
        </LinearLayout>
    </LinearLayout>   
</LinearLayout> 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:16:08.100

尝试将`android:orientation="vertical"`相对和线性布局的父 LinearLayout 更改为水平。像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:adjustViewBounds="true"      
    android:gravity="left|center"
    android:layout_weight="1"  
    android:orientation="vertical"
    android:background="#313131" >     
    <LinearLayout
        android:layout_width="fill_parent"              
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="left" >       
        <ImageView
            android:id="@+id/otv2"         
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"         
            android:layout_marginRight="10dp"
            android:layout_marginTop="5dp"
            android:layout_marginBottom="5dp"          
            android:src="@drawable/otv_2"          
            android:gravity="left" />
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"         
            android:layout_marginRight="10dp"
            android:layout_marginTop="5dp"  
            android:layout_weight="1"       
            android:text="sehen was bewegt" 
            android:textColor="#FFFFFF"       
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:gravity="right" />
    </LinearLayout>    
    <View android:layout_width="fill_parent"
        android:layout_height="1dp"
        android:background="#007cc2"/> 
    <LinearLayout      
        android:layout_width="fill_parent"             
        android:layout_height="wrap_content"
        android:layout_marginBottom="25dip"
        android:orientation="horizontal"  
        android:adjustViewBounds="true"  
        android:gravity="left|top" >     
        <RelativeLayout             
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"                 
            android:layout_gravity="left" >           
            <ImageView
                android:id="@+id/otv2_thumb"    
                android:adjustViewBounds="true"       
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"         
                android:layout_marginRight="10dp"
                android:layout_marginTop="10dp"                
                android:layout_marginBottom="3dp" />

            <TextView android:id="@+id/duration"
                android:layout_width="fill_parent"  
                android:layout_height="wrap_content" 
                android:textColor="#ffffff" 
                android:layout_alignLeft="@+id/otv2_thumb"
                android:layout_alignTop="@+id/otv2_thumb"
                android:layout_alignRight="@+id/otv2_thumb"
                android:layout_alignBottom="@+id/otv2_thumb"    
                android:layout_marginLeft="10dp"        
                android:text="00:45"
                android:textStyle="bold"
                android:gravity="left|bottom"                          
                android:textAppearance="?android:attr/textAppearanceMedium" />      
        </RelativeLayout>      
        <LinearLayout       
            android:orientation="vertical"
            android:layout_width="wrap_content"        
            android:layout_height="wrap_content"
            android:layout_weight="1"                 
            android:layout_marginTop="10dp"              
            android:background="#666666"
            android:gravity="right|top">       
            <TextView android:id="@+id/location"
                android:layout_width="fill_parent"   
                android:textColor="#3E3F41" 
                android:paddingLeft="0dp"                    
                android:layout_height="fill_parent"
                android:text="EICHENZELL - 03.03.1303"     
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:gravity="left|top"/>            
            <TextView 
                android:id="@+id/text"       
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:paddingLeft="0dp"                     
                android:textColor="#FFFFFF"
                android:text="asdaf asgsadg gadg "     
                android:textAppearance="?android:attr/textAppearanceSmall" 
                android:gravity="left|center" />    
        </LinearLayout>
    </LinearLayout>   
</LinearLayout> 
```

# javascript - Javascript 弹出窗口 onclick 未关闭 [RGBA]

> ID：15551328
> 
> 赞同：1
> 
> 时间：2013-03-21T15:13:40.293
> 
> 标签：javascript, css

遮罩 CSS

```
#mask {
    background-color: rgba(0, 0, 0, 0.8);
    position: fixed; 
    left: 0; 
    top: 0; 
    z-index: 10;
    width: 100%; 
    height: 100%;
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#cc000000', endColorstr='#cc000000',GradientType=1 );
    z-index: 999;
} 
```

现在关闭我的面具的功能。

```
$('a.close, #mask').live('click', function() { 
      $('#mask , .afspraak-popup').fadeOut(300 , function() {
        $('#mask').remove();  
    });
    return false;
    }); 
```

当我单击包含 的 div 时`a href`，它会自动显示一个弹出窗口，在弹出窗口后面带有不透明蒙版。

现在，当我想关闭弹出窗口时，我必须点击面具让它消失。

我的问题是 Internet Explorer 不接受我的 rgba 不透明度，所以我无法点击我的面具让我的弹出窗口消失。但是没有 rgba，internet explorer 将不会显示任何不透明的 css。

任何提示都会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:39:20.707

在您的 CSS 中，删除：`background-color: rgba(0, 0, 0, 0.8);`和`filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#cc000000', endColorstr='#cc000000',GradientType=1 );`

将其更改为：

```
background-color: #000;
opacity:0.8;
filter:alpha(opacity=80); 
```

# javascript - 防止 coffeescript 将代码包装到立即调用的函数中

> ID：15551331
> 
> 赞同：1
> 
> 时间：2013-03-21T15:14:10.810
> 
> 标签：javascript, coffeescript

我一直在浏览coffeescript文档和stackoverflow来寻找我的问题的答案，但无济于事。

我有一个 javascript 文件，其中仅包含一个从 coffeescript 编译的文字对象。

```
products =
    1:
        name: 'foo'
        id: 1
        description: 'lorem ipsum dolor sit'
        youtube: 'path
    2:
        name: 'bar'
        id: 2
        description: 'lorem ipsum dolor sit'
        youtube: 'path 
```

但我得到的是：

```
(function() {
    return products = {
      1: {
        name: 'foo lama',
        id: 1,
        ... 
```

我正在通过 ajax 将该文件作为资源加载，但无法将其用作正确的 JSON。

有没有办法防止咖啡脚本将代码包装到立即调用的函数中，或者（这将是最好的解决方案）有没有办法只编译 JSON 对象而不命名它？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T15:17:18.670

使用选项编译`-b`或`--bare`

# python - 错误：未定义全局名称“oauth_token”

> ID：15551332
> 
> 赞同：1
> 
> 时间：2013-03-21T15:14:11.043
> 
> 标签：python, django, twitter

我在 Django 中使用**django-social-auth**和**tweepy**使用其 api 将推文发布到 Twitter。使用 Twitter 登录工作正常，但在发布推文时，我从 views.py 收到此错误：`global name 'oauth_token' is not defined.` 提前致谢。

```
from django.shortcuts import render
from django.contrib.auth import logout
from social_auth.models import UserSocialAuth
import tweepy
from twapp import settings

def index(request):
    if request.method == 'POST':

        instance = UserSocialAuth.objects.filter(user=request.user).get()
        oauth_access_token = (instance.tokens).get(oauth_token)

        oauth_access_secret = (instance.tokens).get(oauth_token_secret)
        print oauth_access_token
        auth = tweepy.OAuthHandler(settings.TWITTER_CONSUMER_KEY, settings.TWITTER_CONSUMER_SECRET)
        auth.set_access_token(oauth_access_token, 'oauth_access_secret')
        api = tweepy.API(auth)
        print api.me().name
        api.update_status('Updating using OAuth authentication via Tweepy!')
    return render(request, 'home.html')

def logout_view(request):
    logout(request)
    return render(request, 'home.html') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:44:40.007

忘记了双引号

```
oauth_access_token = (instance.tokens).get('oauth_token') 
```

# c# - 有没有办法压缩这段代码？

> ID：15551333
> 
> 赞同：-1
> 
> 时间：2013-03-21T15:14:11.590
> 
> 标签：c#, enums

我有所有这些都可以工作的代码块，但我想压缩它们只是为了看起来更好。有任何想法吗？

```
 public static AccountEnum Direct()
    {
        const AccountEnum direct = AccountEnum .DIRECT;
        return direct;
    }

    public static AccountEnum Partner()
    {
        const AccountEnum partner = AccountEnum .PARTNER;
        return partner;
    }

    public static AccountEnum Resold()
    {
        const AccountEnum resold = AccountEnum .RESOLD;
        return resold;
    }

    public static AccountEnum Referral()
    {
        const AccountEnum referral = AccountEnum .REFERRAL;
        return referral;
    } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-21T15:15:14.583

只允许人们直接访问枚举。根本没有理由在那里拥有这些方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:17:24.300

在这里使用 const 没有意义。你可以这样做：

```
public static AccountEnum Direct()
{
    return AccountEnum.DIRECT;
}

public static AccountEnum Partner()
{
    return AccountEnum.PARTNER;
}

public static AccountEnum Resold()
{
    return AccountEnum .RESOLD;
}

public static AccountEnum Referral()
{
    return AccountEnum .REFERRAL;
} 
```

尽管我怀疑拥有这些方法有很多意义。

# java - 使用 Java 在地图中自动创建缺失值的成语

> ID：15551335
> 
> 赞同：3
> 
> 时间：2013-03-21T15:14:18.713
> 
> 标签：java, collections, idioms

我经常使用映射将值存储在循环中，例如属于同一类/组的对象集/列表，或者我想要递增的 AtomicInteger。因此，我经常编写以下类型的代码（假设我没有在我的地图中存储 null）：

```
/* Example #1 -- aggregation */
Map<K, Set<O>> map = new HashMap<K, Set<O>>();
for (O o : oList) {
    K k = o.getK();
    Set<O> oSet = map.get(k);
    if (oSet == null) {
        oSet = new HashSet<O>(o);
        map.put(k, oSet);
    } else {
        oSet.add(o);
    }
}

/* Example #2 -- counting */
Map<K, AtomicInteger> map = new HashMap<K, AtomicInteger>();
for (O o : oList) {
    K k = o.getK();
    AtomicInteger i = map.get(k);
    if (i == null) {
        i = new AtomicInteger(1);
        map.put(k, i);
    } else {
        i.increment();
    }
} 
```

我知道 Apache Common 集合`DefaultedMap`可以在工厂/模型对象丢失时动态创建值；但是您依赖（另一个）外部库只是为了避免编写 2/3 行代码的（相当小的）烦恼。

有没有更简单的解决方案（特别是例如＃2）？在这种情况下，您的开发人员同事使用/推荐什么？是否有其他库提供这种“默认地图”？你自己写装饰地图吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-07-07T18:06:14.997

在 Java 8 中，该方法`computeIfAbsent()`被添加到`Map`接口中：

> `default V computeIfAbsent(K key, Function<? super K, ? extends V> mappingFunction)`
> 
> 如果指定的键尚未与值关联（或映射为 null），则尝试使用给定的映射函数计算其值并将其输入到此映射中，除非为 null。

根据[文档](https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#computeIfAbsent-K-java.util.function.Function-)，最常见的用法是创建一个新对象作为初始映射值或实现多值映射。例如：

```
map.computeIfAbsent(key, k -> new HashSet<V>()).add(v); 
```

所以你可以重写你的例子如下：

```
/* Example #1 -- aggregation */
Map<K, Set<O>> map = new HashMap<>();
oList.forEach(o -> map.computeIfAbsent(o.getK(), k -> new HashSet<>()).add(o));

/* Example #2 -- counting */
Map<K, AtomicInteger> map = new HashMap<>();
oList.forEach(o -> map.computeIfAbsent(o.getK(), k -> new AtomicInteger(0)).incrementAndGet()); 
```

另一种选择是将 Stream API 与[`Collectors.groupingBy`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#groupingBy-java.util.function.Function-)：

```
/* Example #1 -- aggregation */
Map<K, Set<O>> map = oList.stream()
                          .collect(Collectors.groupingBy(O::getK, Collectors.toSet()));

/* Example #2 -- counting using a Long instead of an AtomicInteger */
Map<K, Long> map = oList.stream()
                        .map(O::getK)
                        .collect(Collectors.groupingBy(k -> k, Collectors.counting())); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T15:23:33.680

Google 的[guava-libraries](https://code.google.com/p/guava-libraries/)也提供了这样的 Map 实现。但是我不会仅仅为了这么小的好处而使用图书馆。当您已经使用这样的库时，您可以考虑使用地图。但总的来说，这只是我的看法，我不喜欢将库用于琐碎的事情。

你问题中的例子对我来说似乎很好。我也在用这个成语。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T15:26:23.677

在我看来，它看起来像是作为 Java WS 一部分的 MultivaluedMap [。](http://docs.oracle.com/javaee/6/api/javax/ws/rs/core/MultivaluedMap.html)

[和Spring Framework](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/util/MultiValueMap.html)实现的一样

因此，要回答您的问题，对此没有默认实现，您必须自行推出或更好地使用其中一种实现。

# .htaccess - Flexi Auth Demo + Codeigniter 无法在 Xampp Localhost 上运行

> ID：15551336
> 
> 赞同：0
> 
> 时间：2013-03-21T15:14:19.620
> 
> 标签：.htaccess, codeigniter, authentication, xampp

我在我的在线网站上安装了 flexi auth demo，它运行良好。

但是我在本地主机上有问题。我想自定义它，为此我需要在本地主机上工作。我有以下设置：带有 CI + XAMPP + Windows 7 的本地主机

目录结构：

```
http://localhost/xampp/prj/pub    <- Here I have index.php & .htaccess file
http://localhost/xampp/prj/main/system      <- This is CI System folder
http://localhost/xampp/prj/main/application <- This is CI Application folder 
```

我的 .htaccess 文件是：

```
IndexIgnore *
RewriteEngine On
RewriteBase /prj/pub/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php [L,QSA] 
```

我使用 [http://localhost/xampp/prj/pub] 访问 flexi auth 演示并打开主页。但是当我点击“Try the Demo”时，它会将我带到 xampp 默认的 Web 根目录，即 [http://localhost/xampp] 并显示此文件夹的目录列表。

我一直在通过更改基本路径和不同的 .htaccess 参数进行检查，但没有成功。目前我已经在 auth_lite.php 文件中设置了我的基本网址：[http://localhost/xampp/prj/pub/]。

我认为问题出在 .htaccess 或需要更改 xampp 的设置。

有谁能够帮我 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T01:33:33.387

尝试将您的 prj 文件夹移出`xampp`目录，使其成为该文件夹的子目录`htdocs`。然后你可以通过`http://localhost/prj`

您可能还需要更改`base_url`配置文件中的：application/config/config.php

任何错误都可以在 xampp 根目录的 php/logs 目录中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T08:26:32.523

在 config.php 中

```
$config['uri_protocol'] = 'AUTO'; 
```

将其更改为

```
$config['uri_protocol'] = 'PATH_INFO'; 
```

在 cognater 框架中

# python - 使用python以非交互方式输入shell脚本变量值

> ID：15551337
> 
> 赞同：-2
> 
> 时间：2013-03-21T15:14:34.673
> 
> 标签：python, bash, shell, subprocess, stdin

外壳脚本：Hello.sh

```
#!/bin/bash
echo "Enter your name: "
read name
echo "Hello $name" 
```

我想从 python 中调用 Hello.sh 并以非交互方式填充变量“name”。怎么做到呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:20:21.127

您应该能够`Popen.communicate`使用子流程：

```
from subprocess import Popen,PIPE
p = Popen(['bash','./Hello.sh'],stdin=PIPE,stderr=PIPE,stdout=PIPE)
stdout_data,stderr_data = p.communicate("Hello World!\n") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:25:35.477

+1 在[管道](https://stackoverflow.com/a/15551493/1974792)上。一个更“shell-ish”的方法是：

```
import subprocess

the_name = 'the_name'
myproc = subprocess.Popen(['echo %s | bash Hello.sh' % the_name], stdin = subprocess.PIPE, stdout = subprocess.PIPE, shell=True)
out, err = myproc.communicate()

print out 
```

# java - 我怎样才能把这个while循环换成if？

> ID：15551342
> 
> 赞同：0
> 
> 时间：2013-03-21T15:14:46.753
> 
> 标签：java

有人可以看看我的代码。它是一个程序，可以为用户提供所请求艺术家的图表位置。它不太管用。此外，我使用了一个 while 循环，我告诉我应该使用 if 语句。有人可以向我解释一下，并告诉我如何改变它。我对此非常陌生，不太明白这是我的代码

 ````
import java.util.*;

public class chartPosition
{
public static void main (String [] args)
{

    System.out.println("Which artist would you like?");
    String [] chart = { "Rihanna", "Cheryl Cole", "Alexis Jordan", "Katy Perry", "Bruno Mars", "Cee Lo Green",
                                 "Mike Posner", "Nelly", "Duck Sauce", "The Saturdays"};

    String entry = "";
    Scanner kb = new Scanner (System.in);

    entry = kb.nextLine();
    find (entry, chart);
 }

public static void find (String entry,String [] chart) {

int location = -1 ;
for (int i=0;i<chart.length;)
{
    while (entry.equalsIgnoreCase( chart[i])) 

    {
        System.out.println( chart + "is at position " + (i+1) + ".");
        location = i;
        break;
    }
    }
if (location == -1);
{
    System.out.println("is not in the chart");
}

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:19:37.653

```
for (int i=0;i<chart.length;)
{
    if (entry.equalsIgnoreCase( chart[i])) 
    {
        System.out.println( chart + "is at position " + (i+1) + ".");
        location = i;
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:22:20.023

我将修复放在评论中，查看它们并更改您的代码 =)

```
import java.util.*;

    public class chartPosition
    {
    public static void main (String [] args)
    {

        System.out.println("Which artist would you like?");
        String [] chart = { "Rihanna", "Cheryl Cole", "Alexis Jordan", "Katy Perry", "Bruno Mars", "Cee Lo Green",
                                     "Mike Posner", "Nelly", "Duck Sauce", "The Saturdays"};

        String entry = "";
        Scanner kb = new Scanner (System.in);

        entry = kb.nextLine();
        find (entry, chart);
     }

    public static void find (String entry,String [] chart) {

    int location = -1 ;

// in for loop there should be defined step, in your case you must change for loop on for (int i=0;i<chart.length;i++), becouse your loop stands on same i value

    for (int i=0;i<chart.length;)
    {

//there should be WHILE changed for IF...the if is condition and while is loop...
        while (entry.equalsIgnoreCase( chart[i])) 

        {
            System.out.println( chart + "is at position " + (i+1) + ".");
            location = i;
            break;
        }
        }
    if (location == -1);
    {
        System.out.println("is not in the chart");
    }

    }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:22:25.760

您已经在 for 循环中，这就是为什么您应该将“while”更改为“if”。两个语句（for 和 while）都用于迭代，直到出现条件（在这种情况下，i < chart.length）；另外，我没有测试它，但我认为你的代码不起作用，因为你没有增加 i：

```
for (int i=0; i<chart.length; i++) 
{

    if (entry.equalsIgnoreCase( chart[i])) 
    {
        System.out.println( chart + "is at position " + (i+1) + ".");
        location = i;
        break;
    }
}` 
````

# c# - 将“MailItem”对象保存为 .msg 文件

> ID：15551347
> 
> 赞同：5
> 
> 时间：2013-03-21T15:14:54.440
> 
> 标签：c#, outlook

遵循[此处概述的代码](https://stackoverflow.com/questions/577904/can-i-read-an-outlook-2003-2007-pst-file-in-c/2521444#2521444)

如何将`MailItem`对象保存为`.msg`文件？

或者另一种说法是：如何`.msg`使用对象的属性（发件人、抄送、密件抄送、主题、正文等）创建文件`MailItem`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T15:26:37.767

```
mailItem.SaveAs(savepath); 
```

其中 mailItem 是 Outlook MailItem，保存路径例如：

```
String savepath = Environment.GetFolderPath(Environment.SpecialFolder.Desktop) + @"\" + filename + ".msg"; 
```

如果您希望使用 MailItem 主题作为文件名，您可能希望删除文件名的无效字符：

```
String filename = mailItem.Subject;
string invalid = new string(Path.GetInvalidFileNameChars()) + new string(Path.GetInvalidPathChars());

foreach (char c in invalid)
{
    filename = filename.Replace(c.ToString(), "");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T15:23:24.910

使用 MailItem.SaveAs(..., olMsg) - 请参阅[http://msdn.microsoft.com/en-us/library/office/bb175283(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/office/bb175283(v=office.12).aspx)。

或者您的意思是您想从头开始创建一个 MSG 文件，而没有实际的 MailItem 对象位于 Outlook 文件夹之一中？在这种情况下，您可以使用[Redemption](http://www.dimastr.com/redemption/)及其[RDOSession.CreateMessageFromMsgFile](http://www.dimastr.com/redemption/rdosession.htm)方法（返回[RDOMail](http://www.dimastr.com/redemption/RDOMail.htm)对象）。

# ios - 委托在 HudLayer 和 GameLayer 之间不起作用

> ID：15551349
> 
> 赞同：0
> 
> 时间：2013-03-21T15:14:55.240
> 
> 标签：ios, cocos2d-iphone

我创建了一个`HudLayer`类，它定义了按钮按下时的协议。

```
-(id) init
{
    if( (self=[super initWithColor:ccc4(255, 255, 0, 128)])) {
        self.position=ccp(0,0);
        self.contentSize=CGSizeMake(480, 40);

        scoreLabel=[CCLabelTTF labelWithString:@"0" fontName:@"Marker Felt" fontSize:24];
        scoreLabel.position=ccp(62,20);
        scoreLabel.anchorPoint=ccp(0,0.5);
        [self addChild:scoreLabel];

        CCLabelTTF *textLabel=[CCLabelTTF labelWithString:@"Score:" fontName:@"Marker Felt" fontSize:24];
        textLabel.position=ccp(5,20);
        textLabel.anchorPoint=ccp(0,0.5);
        [self addChild:textLabel];

        CCMenuItemImage * item = [CCMenuItemImage itemWithNormalImage:@"fire.png" selectedImage:@"fire.png" target:self selector:@selector(projectileButtonTapped:)];

        CCMenu *menu = [CCMenu menuWithItems:item, nil];
        menu.position = ccp(150, 20);
        [self addChild:menu];
    }
    return self;
}

- (void)projectileButtonTapped:(id)sender
{
    NSLog(@"projectileButtonTapped HudLayer");
    [self.delegate respondsToSelector:@selector(projectileButtonTapped:)];
} 
```

然后在我的`HelloWorldLayer`课堂上我实现了协议并将自己设置为代表。

```
+(CCScene *) scene
{
    // 'scene' is an autorelease object.
    CCScene *scene = [CCScene node];

    // 'layer' is an autorelease object.
    HelloWorldLayer *layer = [HelloWorldLayer node];

    // add layer as a child to scene
    [scene addChild: layer];

    //add another layer to the scene
//    HudLayer *anotherLayer = [HudLayer node];
//    anotherLayer.delegate = self;
//  [scene addChild: anotherLayer];
//    layer.hud=anotherLayer;

    // return the scene
    return scene;
}

-(id) init
{
    if( (self=[super init]) ) {

        _tileMap = [CCTMXTiledMap tiledMapWithTMXFile:@"GridWars@medium.tmx"];
        _background = [_tileMap layerNamed:@"Background"];
        _foreground = [_tileMap layerNamed:@"Foreground"];

        _meta = [_tileMap layerNamed:@"Meta"];
        _meta.visible = NO;

        CCTMXObjectGroup *objectGroup = [_tileMap objectGroupNamed:@"Objects"];
        NSAssert(objectGroup != nil, @"tile map has no objects object layer");

        NSDictionary *spawnPoint = [objectGroup objectNamed:@"SpawnPoint"];
        int x = [spawnPoint[@"x"] integerValue];
        int y = [spawnPoint[@"y"] integerValue];

        _wizardHero = [[WizardHero alloc]init];
        _redEnemy = [[RedEnemy alloc]init];
        _wizardHero.position = ccp(x,y);

        [self addChild:_wizardHero];
        [self setViewPointCenter:_wizardHero.position];

        [self addChild:_tileMap z:-1];

        self.touchEnabled = YES;

        self.enemies = [[NSMutableArray alloc] init];
        self.projectiles = [[NSMutableArray alloc] init];
        [self schedule:@selector(testCollisions:)];

        for (spawnPoint in [objectGroup objects]) {
            if ([[spawnPoint valueForKey:@"Enemy"] intValue] == 1){
                x = [[spawnPoint valueForKey:@"x"] intValue];
                y = [[spawnPoint valueForKey:@"y"] intValue];
                [self addEnemyAtX:x y:y];
            }
        }

        _hud = [HudLayer node];
        _hud.delegate = self;
        [self addChild:_hud];
    }
    return self;
}

- (void)projectileButtonTapped:(id)sender
{
    // Find where the touch is
    //    CGPoint touchLocation = [touch locationInView: [touch view]];
    //    touchLocation = [[CCDirector sharedDirector] convertToGL: touchLocation];
    //    touchLocation = [self convertToNodeSpace:touchLocation];

    if (self.wizardHero.selectedTargets.count > 0) {

        // Create a projectile and put it at the player's location
        CCSprite *projectile = [CCSprite spriteWithFile:@"Projectile.png"];
        projectile.position = _wizardHero.position;
        [self addChild:projectile];

        // Determine where we wish to shoot the projectile to
        int realX;

        // Are we shooting to the left or right?
        CGPoint diff = ccpSub(self.redEnemy.position, self.wizardHero.position);
        if (diff.x > 0)
        {
            realX = (_tileMap.mapSize.width * _tileMap.tileSize.width) +
            (projectile.contentSize.width/2);
        } else {
            realX = -(_tileMap.mapSize.width * _tileMap.tileSize.width) -
            (projectile.contentSize.width/2);
        }
        float ratio = (float) diff.y / (float) diff.x;
        int realY = ((realX - projectile.position.x) * ratio) + projectile.position.y;
        CGPoint realDest = ccp(realX, realY);

        // Determine the length of how far we're shooting
        int offRealX = realX - projectile.position.x;
        int offRealY = realY - projectile.position.y;
        float length = sqrtf((offRealX*offRealX) + (offRealY*offRealY));
        float velocity = 480/1; // 480pixels/1sec
        float realMoveDuration = length/velocity;

        // Move projectile to actual endpoint
        id actionMoveDone = [CCCallFuncN actionWithTarget:self
                                                 selector:@selector(projectileMoveFinished:)];
        [projectile runAction:
         [CCSequence actionOne:
          [CCMoveTo actionWithDuration: realMoveDuration
                              position: realDest]
                           two: actionMoveDone]];

        [self.projectiles addObject:projectile];
    }
} 
```

问题是只有`projectileButtonTapped:`in`HudLayer`被调用（即委托的方法永远不会被调用）。

PS 为了节省空间，我省略了两个 .h 文件。但我向你保证它们是正确的，`@protocol`使用 in`HudLayer`和相同的协议名称放在`HelloWorldLayer`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:50:37.727

我认为 ：

```
- (void)projectileButtonTapped:(id)sender
{
    NSLog(@"projectileButtonTapped HudLayer");
    if ([self.delegate respondsToSelector:@selector(projectileButtonTapped:)]) {
       [self.delegate performSelector:@selector(projectileButtonTapped:) withObject:sender];
    }
} 
```

# php - PHP用短语替换脏话

> ID：15551352
> 
> 赞同：0
> 
> 时间：2013-03-21T15:15:06.280
> 
> 标签：php, string, echo, words, phrases

所以我知道如何用其他单词替换某些单词。我想弄清楚的是如何取一个词并用一个短语替换它并消除所有其他输入。

例如：

坏词是“狗”

用户输入->“你闻起来像狗。”

而不是用“彩虹”或其他东西代替“狗”，我希望它回应类似的东西：“你是一个便盆”。

这是我的代码：

```
<?php

$find = array('dog', 'cat', 'bird');
$replace = 'You are a potty mouth.';

if (isset ($_POST['user_input'])&&!empty($_POST['user_input'])) {
    $user_input = $_POST['user_input']; 
    $user_input_new = str_ireplace($find, $replace, $user_input);

        echo $user_input_new;
}
?> 
```

有了这个代码，它就会回响：“你闻起来像你是个大嘴巴。”

我确定这是一个转发，我很抱歉。我能找到的所有内容都是关于如何仅替换部分字符串而不是整个字符串的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:23:45.497

好吧，在这种情况下，您只需检查用户输入字符串中是否存在“坏词”，如果返回 true，则回显“您是一个便盆”。

你会想使用 strpos()

例如

```
if( strpos($_POST['user_input'],'dog')!==FALSE ) {
    echo('You are a potty mouth');
} 
```

如果您有一系列“坏词”，您将需要遍历它们以检查用户输入中出现的任何情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:19:30.683

我最近一直在研究同样的问题，这是我正在处理的用于过滤某些单词的脚本。仍在进行中，但它能够输出用户消息或自定义消息。希望它对您有所帮助或指出正确的方向。

```
define("MIN_SAFE_WORD_LIMIT", 3);
$safe = true;
$whiteList = array();
$blackList = array();

$text = 'Test words fRom a piece of text.';

$blCount = count($blackList);

for($i=0; $i<$blCount; $i++) {
    if((strlen($blackList[$i]) >= MIN_SAFE_WORD_LIMIT) && strstr(strtolower($text), strtolower($blackList[$i])) && !strstr(strtolower($text), strtolower($whiteList[$i]))) {
        $safe = false;
    }
}

if(!$safe) {
    // Unsafe, flag for action
    echo 'Unsafe';
} else {
    echo $text;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:33:24.687

您不想替换坏词，而是替换整个字符串，因此您应该匹配，如果匹配，则将整个字符串设置为替换字符串。

此外，正如评论中所指出的，这些词可以是另一个有效词的一部分，所以如果你想考虑到这一点，你应该只匹配整个词。

这个简单的例子在正则表达式中使用单词边界来匹配你的单词（在这个例子中，这将是一个循环，循环你的坏单词数组）：

```
foreach ($find as $your_word)
{
  $search = '/\b' . preg_quote($your_word) . '\b/i';
  if (preg_match($search, $_POST['user_input']) === 1)
  {
    // a match is found, echo or set it to a variable, whatever you need
    echo $replace;
    // break out of the loop
    break;
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T15:55:57.830

这是另一种解决方案，匹配单词并用 str 的 * len 替换。这不会匹配像 Scunthorpe 这样的单词，因为它使用单词边界，您还可以添加第三个参数来显示单词的第一个字母，这样您就知道说了什么单词而不看它。

```
<?php
$badwords = array('*c word', '*f word','badword','stackoverflow');

function swear_filter($str,$badwords,$reveal=null) {
    //Alternatively load from file
    //$words = join("|", array_filter(array_map('preg_quote',array_map('trim', file('badwords.txt')))));

    $words = join("|", array_filter(array_map('preg_quote',array_map('trim', $badwords))));
    if($reveal !=null && is_numeric($reveal)){
        return preg_replace("/\b($words)\b/uie", '"".substr("$1",0,'.$reveal.').str_repeat("*",strlen("$1")-'.$reveal.').""', $str);
    }else{
        return preg_replace("/\b($words)\b/uie", '"".str_repeat("*",strlen("$1")).""', $str);
    }

}

$str="There was a naughty Peacock from Scunthorpe and it said a badword, on stackoverflow";

//There was a naughty Peacock from Scunthorpe and it said a b******, on s************
echo swear_filter($str,$badwords,1);

//There was a naughty Peacock from Scunthorpe and it said a *******, on *************
echo swear_filter($str,$badwords);
?> 
```

# c# - 获取图像C#的路径

> ID：15551353
> 
> 赞同：-1
> 
> 时间：2013-03-21T15:15:06.737
> 
> 标签：c#, wpf, path

我有一个必须插入以下代码的图像路径：

```
Uri uri = new Uri(@"C:\Users\user\Desktop\dir\private- name\Easy\Easy_v\Easy_v\Attempts\image.jpg");
BitmapImage img = new BitmapImage(uri); 
```

当我需要更改此路径时，我正在尝试使用我编写的函数获取路径，但是当我将完整路径插入 时`uri`，此字符：`\`已替换为`/`

有什么方法可以获得正确的图像路径，并将其替换为上面的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:21:20.143

Uri 类有一个属性叫做

```
uri.LocalPath 
```

这是根据本地系统偏好表示的完整路径名称
当然您可以将正常的 Path 方法应用于此属性

```
Console.WriteLine(Path.GetDirectoryName(uri.LocalPath)); 
```

[请参阅 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.uri.localpath%28v=VS.71%29.aspx)

# asp.net - sqlserver中oracle的number（2,0）的替代方法是什么？

> ID：15551357
> 
> 赞同：5
> 
> 时间：2013-03-21T15:15:14.610
> 
> 标签：asp.net, sql-server, c#-4.0

在我的 oracle 表中，有些列具有`number(2,0)`,`number(5,0)`数据类型，所以我想知道 sql server 中的替代数据类型是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T15:17:40.460

T-SQL 等效项是[`DECIMAL`或`NUMERIC`](http://msdn.microsoft.com/es-AR/library/ms187746.aspx)。

示例：`NUMERIC(2, 0)`和`DECIMAL(5, 0)`

它们在*功能上是等效*的。

以下是 **确切**数字类型的细分：

![在此处输入图像描述](../Images/5d6b74733de12062d8d43c65cd6030e2.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T15:19:31.547

以下是 sql server 中的一些替代方案

```
numeric(2,0)
decimal(2,0) 
```

而且因为它没有浮点数，所以你可以使用

```
int 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T15:18:36.127

您可以使用`DECIMAL`或`NUMERIC`

[http://msdn.microsoft.com/en-US/library/ms187746.aspx](http://msdn.microsoft.com/en-US/library/ms187746.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T15:19:05.420

您可能正在寻找[数值数据类型](http://msdn.microsoft.com/en-us/library/aa258832%28v=sql.80%29.aspx)。

```
NUMERIC(2, 0) 
```

第一个参数指定可以存储的小数位数的最大总数，包括小数点的左侧和右侧。

第二个参数指定小数点右侧可以存储的最大小数位数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T15:20:39.677

您需要使用[数字数据类型](http://msdn.microsoft.com/en-us/library/ff848794.aspx)

根据您可以使用的数据：

*   [十进制和数字](http://msdn.microsoft.com/en-us/library/ms187746.aspx)
*   [浮动和真实](http://msdn.microsoft.com/en-us/library/ms173773.aspx)
*   [int、bigint、smallint 和 tinyint](http://msdn.microsoft.com/en-us/library/ms187745.aspx)
*   [钱和小钱](http://msdn.microsoft.com/en-us/library/ms179882.aspx)

IIRC，Oracle 在数据类型中存储了几乎所有`number`类型的数字和浮点数，而 SQL Server 将它们拆分为单独的数据类型

# java - toString 方法是如何工作的？

> ID：15551358
> 
> 赞同：-1
> 
> 时间：2013-03-21T15:15:28.093
> 
> 标签：java

//我一直在尝试理解 to string 它是如何工作的以及它的主要功能是什么，但是我遇到了麻烦。就像下面的例子一样。toString 方法究竟是做什么的？

```
public class Item {

    private String name;
    private int price;
    private int qty;

    public Item() {

    }

    public Item(String n, int p, int q){
        this.name=n;
        this.price=p;
        this.qty=q;
    }

    public String getName() {
        return name;
    }

    public int getPrice() {
        return price;
    }

    public int getQty() {
        return qty;
    }

    public String toString() {
        return name +": $" + price+":" + qty;
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T15:17:42.803

[**toString**](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#toString%28%29)的目的在 API 中有明确记录：

> 返回对象的字符串表示形式。通常，toString 方法返回一个“以文本方式表示”该对象的字符串。结果应该是一个简洁但信息丰富的表示，易于人们阅读。建议所有子类重写此方法。

```
Object#toString() will produce: 
```

> Object 类的 toString 方法返回一个字符串，该字符串由对象作为实例的类的名称、at 符号字符“@”和对象的哈希码的无符号十六进制表示形式组成。换句话说，此方法返回一个等于以下值的字符串：

```
 getClass().getName() + '@' + Integer.toHexString(hashCode()) 
```

如果您在类调用中覆盖 toString，则默认 Object#toString() 将被 yourclass#toString() 替换。在您当前的代码中，如果您尝试打印 Item 实例，则输出将采用以下格式：

```
name +": $" + price+":" + qty; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:17:29.857

`toString`通常是对象的用户友好/可读字符串表示。您可以将其用于调试、记录或向最终用户/客户端显示信息。

这是一个简短的[教程](http://www.javapractices.com/topic/TopicAction.do?Id=55)，讨论如何以及何时使用 toString。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:17:30.263

toString 是当 java 需要类对象的字符串表示时调用的函数。例如，如果您调用`System.out.println(a);`where a is of type ，将显示`Item`返回的值。`toString`此方法是其中的一部分，`Object`因此每个 java 对象都有它的一些默认实现。仍然在许多情况下，它的信息量不足，最好覆盖它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T15:19:24.560

`toString`提供了一个`String`表示`Object`

```
public class Person {
    private String firstName;
    private String lastName;

    private Person(String firstName, String lastName) {
         this.firstName = firstName;
         this.lastName = lastName;
    }

    public String getName() {
        return this.firstName + " " + this.lastName;
    }

    public String toString() {
        return this.firstName + " " + this.lastName;
    }
} 
```

想象一下这个类和以下调用：

```
System.out.println(aPerson.getName()); 
```

我们的`toString`方法意味着我们可以简单地做：

```
System.out.println(aPerson); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T15:20:11.340

我想将其`toString()`视为一种便利功能。每当您执行以下操作时：

```
MyObject m = ...//
System.err.println(m); 
```

`println(m)`实际上是调用`m.toString()`以获取对象的人类可读表示。它是 each 固有的`Object`，因此您始终可以覆盖它以使其返回最能描述您自己的对象的字符串。

# utf-8 - 使用 Wireshark 的 UTF8 字符

> ID：15551359
> 
> 赞同：2
> 
> 时间：2013-03-21T15:15:29.830
> 
> 标签：utf-8, wireshark

我有一个 Wireshark 捕获文件，其中包含一些以 UTF8 编码的 XML。不幸的是，Wireshark 不能很好地使用 UTF8，所以我`×©×\231×\227×\225×ª`的文件中有类似的字符串。我怎样才能解码这些，或者更好的是，让 Wireshark 即时解码这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:59:31.297

当 Wireshark 将文件保存为文本时，某些东西会被破坏。我最终将字节保存到文件并编写了一个 ruby​​ 脚本将它们解释为 UTF8。我确定有更好的解决方案，但我不知道它是什么。

# javascript - 允许两个客户端在没有服务器的情况下交互

> ID：15551368
> 
> 赞同：7
> 
> 时间：2013-03-21T15:16:04.283
> 
> 标签：javascript, chat

是否可以允许两个客户端在没有服务器的情况下直接交互？

我指的是网站，例如，是否可以在同一网站上的两个客户端之间仅使用客户端创建聊天`javascript`。

**如果不是**，那么在网站上的活动客户端之间进行聊天的最低服务器端是什么？（例如：一个`PHP`文件，没有数据库）？

**我的想法：**在每个客户端上都 可以轻松地存储对话`localStorage`，问题是如何在不存储任何东西（或最多该消息）的情况下将一些数据发送`client1`到数据库中。`client2`另外，请注意“过去的”对话不应该可见，因此不需要存储。

请注意，我不想要任何 nodeJS 或 websocket 解决方案，我想要尽可能简单的东西。那么，在在线用户之间进行聊天`code`的最低要求是什么？`files`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:34:39.597

[WebRTC](http://www.webrtc.org/) API将允许 JavaScript 发起浏览器到浏览器的直接连接，但仍然需要服务器来提供页面并协调会话发起。

API 仍在快速发展，仅在最先进的浏览器中可用，因此尚未准备好用于实际生产用途。

然而——老实说——对于你想要做的事情，最简单的选择是 Node 和 socket.io：

```
var http=require('http'), express=require('express'), sio = require('socket.io')
    , app=express(), srv = http.createServer(app);

app.use(express.static(__dirname+'/static'));

sio.listen(srv);
srv.listen(80); 
```

...现在你有一个 5 行的工作 websockets 服务器。将所有客户端的东西放在静态文件夹中，你就可以开始了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:20:46.410

不，这是不可能的。如果你想要一个聊天框，你必须将数据存储在服务器中。连接客户端的东西，比如向每个客户端显示聊天文本和相同的东西，它们来自服务器。所以不可能那样做。好吧，即使是免费的聊天框也将每个站点的数据放在他们的服务器中。

至于您使用的想法`localStorage`，也许它是可能的（但仍然使用新的 WebSocket 协议），但它在时间维度上不起作用，对吧？如果另一个用户加入，他们将看不到之前发送的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:25:01.610

HTML5 有一个新的[Web Sockets 特性](http://www.html5rocks.com/en/tutorials/websockets/basics/)

这样，服务器干预几乎无效。服务器和客户端通过新协议进行通信

*   ws - Web 套接字协议
*   wss - Web Sockets 安全协议（类似于 https）

[现场演示](http://html5demos.com/web-socket)

# javascript - 骨干路由器初始化但不触发事件

> ID：15551370
> 
> 赞同：0
> 
> 时间：2013-03-21T15:16:08.747
> 
> 标签：javascript, backbone.js, routes

我有一个复杂的、多级继承的应用程序，我想使用 Backbone.Router 进行导航，但它没有按我预期的那样工作。

应用程序的地址不在根目录下

**像这样： http:** [//www.domain.com/App](http://www.domain.com/App)

我想用BB的路由

这是一些代码：

```
$(function () {
    var SayfaController = Backbone.Router.extend({
        routes: {
            "": "home", 
            "sayfa/:sayfaNo": "sayfa" 
        },
        initialize: function () {
          console.log('THIS WORKS');
        },
        home: function () {
           console.log('THIS DONT FIRE');
        },
        sayfa: function (sayfa) {
            console.log("NEITHER THIS FIRES");
            console.log(sayfa);
        }
    });

    var sayfaController = new SayfaController();

    Backbone.history.start({pushState: true});

    ....
}); 
```

初始化方法有效，但是当我单击这样的链接时，事件不会触发：

```
<a href="http://www.domain.com/App/#/sayfa/6">Click</a> 
```

或更改浏览器导航栏

我究竟做错了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:30:30.433

我不确定如何让它适用于类似的网址

```
http://www.domain.com/App/#/sayfa/6 
```

但是对于下面的种类，它可以工作。

```
http://www.domain.com/App#sayfa/6
http://www.domain.com/App 
```

利用

```
 Backbone.history.start({
            root : "/App"
        }); 
```

这是 jsfiddle [http://jsfiddle.net/nEmeL/4/](http://jsfiddle.net/nEmeL/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:34:07.137

乍一看，您似乎需要指定应用程序的根目录，因为它不是从您的域的根目录提供的。请参阅 Backbone 文档 RE：Backbone.history：

> 如果您的应用程序不是从您的域的根 url / 提供的，请务必告诉 History 根的真正位置，作为一个选项：Backbone.history.start({pushState: true, root: "/public/search/ "})

尝试`Backbone.history.start({pushState: true, root: "/App/"});`

# c++ - 指向结构成员变量的指针

> ID：15551371
> 
> 赞同：0
> 
> 时间：2013-03-21T15:16:11.803
> 
> 标签：c++, pointers, struct

```
class Main
{
  Struct BranchSub
  {
    Sub()
    {
      subName[0] = '\0';
    }
    char subName[20];
  };

  struct MainSub
  {
  Sub sub[20];
  };
}; 
```

我想要一个方法，`subName`当`subName`与给定文本匹配时将返回指针。例如：

```
MainSub test;
if(strcmp(test.BranchSub[5].subName, "Hello") == 0);//return pointer to `test.Branchsub[5].subName` 
```

可能吗？？还是有其他方法可以达到预期的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:26:01.447

是的，可以使用`test.BranchSub[5].subName`.

对于您问题的第二部分，您应该使用`std::string`：

```
class Main
{
  struct BranchSub
  {
    std::string subName;
  };

  struct MainSub
  {
    BranchSub sub[20];
  };
}; 
```

接着

```
MainSub test;
if(test.sub[5].subName == "Hello") 
```

更清楚。

您甚至可以使用`std::vector<BranchSub>`代替`BranchSub sub[20]`.

# maven - 从不同的项目访问托管 bean 类

> ID：15551372
> 
> 赞同：1
> 
> 时间：2013-03-21T15:16:12.120
> 
> 标签：maven, jsf-2

我想在不同的*Project 1*`@ManagedBean`中访问*Project 2*中的 a ，但它的值总是. 我尝试将文件添加到*Project 2*，但没有帮助。*`null``src/main/webapp/META-INF/faces-config.xml`*

 ***Project 2*添加为*Project 1*`.jar`中的 a 。我面临的问题是不包含该文件。*`.jar``META-INF/faces-config.xml`*

 *如何`.jar`在我的 Maven 项目构建期间将此文件正确添加到？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:20:22.650

你需要放置`faces-config.xml`在`src/main/resources/META-INF`. 如果您正在构建一个文件夹`.jar`，那么拥有一个`webapp`文件夹没有任何意义。

所以请确保你有它`src/main/resources/META-INF/faces-config.xml`。***

# c++ - 非变异操作本质上是线程安全的（C++）吗？

> ID：15551374
> 
> 赞同：4
> 
> 时间：2013-03-21T15:16:14.037
> 
> 标签：c++, multithreading, thread-safety

这可能是一个愚蠢的问题，但请考虑以下伪代码：

```
struct Person {
    std::string name;
};

class Registry {
public:
  const std::string& name(int id) const {return _people[id].name;}
  void name(int id, const std::string& name) { [[scoped mutex]]; _people[id].name = name;}

private:
  std::map<int, Person> _people;
}; 
```

在这个简单的例子中，假设 Registry 是一个可以被多个线程访问的单例。我在改变数据的操作期间锁定，但在非改变访问期间没有锁定。

这个线程是安全的，还是在读取操作期间我也应该锁定？我正在阻止多个线程同时尝试修改数据，但我不知道如果一个线程同时尝试读取另一个线程正在写入会发生什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T15:17:41.587

如果任何线程都可以修改数据，那么您需要锁定**所有**访问权限。

否则，您的“读取”线程之一可能会在数据处于*不确定状态*时访问数据。`map`例如，修改 a需要操作多个指针。您的阅读线程可以访问地图，而部分（但不是全部）`map`已调整。

如果您可以保证数据没有被修改，则不需要锁定来自多个线程的多次读取，但是这会引入一个您必须密切关注的脆弱场景。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T15:18:02.880

在修改数据时读取数据不是线程安全的。让多个线程同时读取数据是非常安全的。

这种差异就是读写锁的用途。它们将允许任意数量的读取器，但是当写入器尝试锁定资源时，将不再允许新读取器，写入器将阻塞，直到所有当前读取器完成。然后作者将继续，一旦完成，所有读者将被允许再次访问。

在修改期间读取数据不安全的原因是数据可能或可能看起来处于不一致状态（例如，对象可能暂时不满足不变量）。如果读者当时阅读它，那么就像程序中的错误无法保持数据一致一样。

```
// example
int array[10];
int size = 0;

int &top() {
    return array[size-1];
}

void insert(int value) {
    size++;
    top() = value;
} 
```

任意数量的线程可以同时调用`top()`，但是如果一个线程正在运行，`insert()`那么当这些行像这样交错时就会出现问题：

```
// thread calling insert         thread calling top
    size++;
                                   return array[size-1];
    array[size-1] = value 
```

阅读线程得到垃圾。

当然，这只是事情可能出错的一种可能方式。一般来说，您甚至不能假设程序的行为就像不同线程上的代码行会交错一样。为了使该假设有效，该语言仅告诉您不能进行数据竞争（即，我们一直在谈论的内容；多个线程访问（非原子）对象，并且至少有一个线程修改该对象） *。

^(*为了完整性；所有*原子访问*都使用*顺序一致*的内存排序。这对您来说无关紧要，因为您没有直接使用原子对象进行低级工作。)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T15:19:12.957

> 这个线程是安全的，还是在读取操作期间我也应该锁定？

它**不是**线程安全的。

根据 C++11 标准的第 1.10/4 段：

> 如果其中一个修改了内存位置 (1.7) 而另一个**访问或修改**了相同的内存位置，则两个表达式求值会*发生冲突。*

 **此外，根据第 1.10/21 段：

> 如果程序的执行包含不同线程中的两个冲突操作，则该程序的执行包含*数据竞争*，其中至少一个不是原子的，并且两者都不会在另一个之前发生。**任何此类数据竞争都会导致未定义的行为**。[...]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T15:19:33.833

它不是线程安全的。

读取操作可能正在遍历映射（它是一棵树）以查找请求的对象，而写入操作会突然从映射中添加或删除某些内容（或者更糟糕的是，迭代器所在的实际点）。

如果你很幸运，你会得到一个异常，否则当你的地图处于不一致状态时，它只是未定义的行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T15:19:34.037

> 我不知道如果一个线程试图读取另一个线程正在写入会发生什么。

没人知道。混乱就会随之而来。

多个线程可以共享一个只读资源，但是一旦有人想写它，在写完之前每个人都以任何方式访问它变得不安全。

# 为什么？

写入不是**原子**的。它们发生在多个时钟周期内。一个进程试图读取一个对象，因为它被写入可能会发现一个半修改版本，临时垃圾。

# 所以

如果预期它们与您的写入同时进行，请锁定您的读取。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T15:20:20.677

绝对不安全！

如果您`Person::Name`从“John Smith”更改为“James Watt”，您可能会读回“Jame Smith”或“James mith”的值。或者甚至可能是完全不同的东西，因为“为此更改此值”的方式可能不仅仅是将新数据复制到现有位置，而是将其完全替换为新分配的一块内存，其中包含一些完全未定义的内容 [包括不是有效的字符串]。**

# windows - 如何在 BATCH 文件中记录所有 ECHO 命令？

> ID：15551379
> 
> 赞同：11
> 
> 时间：2013-03-21T15:16:20.433
> 
> 标签：windows, batch-file, command-prompt

我正在尝试使用 BATCH 文件作为选择您自己的冒险故事，用户可以在其中创建一个角色并通过故事中的角色的名字等来调用。一个小时前我突然想到，如果在运行包含故事的 BATCH 文件时或之后它会记录所有 ECHO 命令，以便稍后玩家可以阅读他们在任何给定的游戏中所做的事情，那就太酷了。

我希望日志文件如下所示：

%date% %time%（文件运行时长的 echo 命令显示的所有文本）

不幸的是，我所能做的就是制作一个只有日期和时间的日志文件。放置“>> StoryLog.txt”可以制作.txt文件，我在那里得到日期和时间，但它只是在我希望批处理文件在回显的txt中显示之后显示文本“>> StoryLog.txt”在“你沿着小路往北走>> StoryLog.txt”中显示在屏幕上。这自然是行不通的。我该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T17:12:51.983

为此，我使用以下内容：

```
set LogFile=somepath\logfile.txt
set logg=^> _^&type _^&type _^>^>%LogFile%
echo this goes to screen AND file! %logg% 
```

这有点棘手。因此，让我们将该行拆解为四个部分：

```
set logg=      ^> _          ^&type _           ^&type _^>^>%LogFile% 
```

想法是将行打印到一个临时文件（名为`_`）（第二部分），然后将该文件的内容输入到屏幕（第三部分），然后将其输入到日志文件（第四部分）。

将所有内容放入一个变量（第一部分），这样您就不必在每一行都输入那个怪物字符串。（这就是`>`and`&`被转义的原因`^`）

所以每次使用

```
echo whatever %logg% 
```

它将出现在屏幕上并写入`%logfile%`

请注意，这也将起作用：

```
 %logg% echo whatever 
```

> **编辑**djangofan：另外，您可以使用以下功能：
> 
> ```
> @ECHO off
> :: do not enable delayed expansion since it will break this method
> SETLOCAL ENABLEEXTENSIONS
> SET LogFile=logfile.out
> SET Logg=^> tmp.out^&^& type tmp.out^&^&type tmp.out^>^>%LogFile%
> 
> CALL :logit "This is my message!"
> CALL :logit "Hear my thunder?"
> 
> GOTO :end
> :logit
> ECHO %~1 %Logg%
> DEL /Q tmp.out
> EXIT /B 0
> :end
> pause 
> ```

**编辑**斯蒂芬：如果你使用 CALL，那`%logg%`将是矫枉过正。在那种情况下，我只会使用：

```
:logit
echo %~1
echo %date%,%time% - %~1 >>logfile
exit /b 0 
```

这可能是原始问题的最佳解决方案，因为日期/时间将被写入日志文件，而不是在屏幕上。顺便说一句：您不必每次使用临时文件时都将其删除，只需在批处理结束之前将其删除一次即可。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T08:29:45.827

由于一些编辑，我的另一个答案变得很长，这是一个新建议（没有太大变化，但它使代码很容易阅读）：

```
@ECHO off
SET LogFile=logfile.out
set "say=call :logit "

%say% "This is my message!"
%say% "Hear my thunder?"

GOTO :end
:logit
ECHO %~1 
echo %date% %time% - %~1 >>%logfile%
EXIT /B 0
:end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:23:17.520

您不能在批处理脚本中按字面意思执行此操作，但如果您定义函数，则可以在函数块内输出数据，该数据也会在函数返回之前写入日志文件，如下所示：

```
@ECHO off
SETLOCAL ENABLEDELAYEDEXPANSION ENABLEEXTENSIONS
echo. 2>outfile.log

CALL :functionPerson "Jon Doe" jump
GOTO :END
:functionPerson fullname action
  ECHO fullname is ^"%~1^"
  ECHO action is %2
  ECHO %1 performs action %2>> outfile.log
EXIT /B 0
:END
pause 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T15:23:29.360

每次你`echo`让玩家知道发生了什么时，你也可以`echo`进入你的日志文件，在你的行的开头添加日期和时间:) 对我来说很简单。不知道你的脚本看起来如何。

# .net - smtp (gmail) 在经典 asp 中失败，但在 web 服务中工作

> ID：15551383
> 
> 赞同：0
> 
> 时间：2013-03-21T15:16:33.773
> 
> 标签：.net, asp-classic, smtp, com+

我在用于测试发送电子邮件的 Web 服务中使用 .Net 4 c#、Windows Server 2008 R2、IIS 7 和以下代码。有用。然后，我在通过 COM+ 调用 .net c# 的经典 asp 应用程序中使用相同的代码，但它失败了

“System.Net.Mail.SmtpException：发送邮件失败。---> System.Net.WebException：无法连接到远程服务器---> System.Net.Sockets.SocketException：无法建立连接，因为目标机器主动拒绝 xx.xxx.xxx.xxx:587"

我已经研究了几天，找不到任何有用的东西。任何帮助将不胜感激。谢谢你。

```
 public static class Mail
        {
        public static void SendEmail(string subject, string body)
        {
        var fromAddress = new MailAddress("user@gmail.com", "From Name");
        var toAddress = new MailAddress("user@email.com", "To Name"); 
        const string fromPassword = "password";

        var smtp = new SmtpClient
        {
            Host = "smtp.gmail.com",
            Port = 587,
            EnableSsl = true,
            DeliveryMethod = SmtpDeliveryMethod.Network,
            Credentials = new NetworkCredential(fromAddress.Address, fromPassword),
            Timeout = 20000
        };
        using (var message = new MailMessage(fromAddress, toAddress)
        {
            Subject = subject,
            Body = body
        })
        {
            smtp.Send(message);
        }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:24:21.600

如果您真的使用“user@gmail.com”，我猜服务器拒绝接受凭据，因为该用户未知。尝试使用服务器上实际存在的电子邮件地址或用户名。

# iphone - iOS - 使用 UIBezierPath appendPath 剪切两条路径的联合

> ID：15551384
> 
> 赞同：6
> 
> 时间：2013-03-21T15:16:35.783
> 
> 标签：iphone, ios, graphics, core-graphics, uibezierpath

我正在尝试创建一个加号形状的剪切路径，以便我在同一上下文中绘制的后续路径删除了这部分。我使用两个相互重叠的矩形路径创建剪切路径。

当我随后画一个圆时，这就是我希望最终绘图的样子：

> XX| |XXx
>    XXXX| |XXXX XXXX
>  | |XXXXX
>  ———  ———<br /> ———  ———<br />XXXXX| |XXXXX
>    XXXX| |XXXX
>       xXX| |XX

然而，它实际上是这样的：

> XX| |XXx
>    XXXX| |XXXX XXXX
>  | |XXXXX
>  ——— XX———<br />——— XX———<br />XXXXX| |XXXXX
>    XXXX| |XXXX
>       xXX| |XX

如果我正确阅读了此行为，则两条矩形路径的交点不会构成剪贴蒙版的一部分。

在这种情况下，appendPath 似乎（并不奇怪）不会从我的两个矩形路径创建一个统一的路径——我假设对此我无能为力。此外，Core Graphics 似乎没有任何与路径联合等相关的功能。

有谁知道我能做什么？我已经包含了相关的代码片段。

使用一条路径绘制加号不是解决方案，因为我想将其他重叠路径添加到我的剪贴蒙版中。

```
 CGContextSaveGState(context);

        // create clipping path
        UIBezierPath *clippingPath = [UIBezierPath bezierPath];
        clippingPath = [UIBezierPath bezierPathWithRect:CGRectMake(centrePoint.x - 2.0f, 0.0f, 4.0f, self.sizeY)];
        [clippingPath appendPath:[UIBezierPath bezierPathWithRect:CGRectMake(0.0f, centrePoint.y - 2.0f, self.sizeX, 4.0f)]];

        // use the clipping path to create a hole in the context
        CGContextAddPath(context, clippingPath.CGPath);
        CGRect boundingRect = CGContextGetClipBoundingBox(context);
        CGContextAddRect(context, boundingRect);
        CGContextEOClip(context);

        // draw the icon shape (clipped portion is removed)
        iconBezierPath = [UIBezierPath bezierPathWithOvalInRect:CGRectMake(self.sizeX / 3.0f, self.sizeY / 2.25f, self.sizeX / 3.0f, self.sizeX / 3.0f)];

        [highlightColor setFill];
        [iconBezierPath fill];
        CGContextRestoreGState(context); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T05:15:26.467

您可以使用`CGRectIntersection`

```
 CGContextSaveGState(context);

    CGRect rect1 = CGRectMake(centrePoint.x - 2.0f, 0.0f, 4.0f, self.sizeY);
    CGRect rect2 = CGRectMake(0.0f, centrePoint.y - 2.0f, self.sizeX, 4.0f);
    CGRect rect3 = CGRectIntersection(rect1, rect2);

    CGContextAddRect(context, rect1);
    CGContextAddRect(context, rect2);
    CGContextAddRect(context, rect3);

    CGRect boundingRect = CGContextGetClipBoundingBox(context);
    CGContextAddRect(context, boundingRect);
    CGContextEOClip(context);

        // draw the icon shape (clipped portion is removed)
    iconBezierPath = [UIBezierPath bezierPathWithOvalInRect:CGRectMake(self.sizeX / 3.0f, self.sizeY / 2.25f, self.sizeX / 3.0f, self.sizeX / 3.0f)];

    [highlightColor setFill];
    [iconBezierPath fill];

    CGContextRestoreGState(context); 
```

这满足了您的问题的要求，但是否完全满足您的需求取决于“其他重叠路径”的性质。

![在此处输入图像描述](../Images/e1e436d9fc191c3402cd368ce1068d60.png)

# jquery-ui - 标签 Jquery 1.9

> ID：15551389
> 
> 赞同：1
> 
> 时间：2013-03-21T15:16:45.190
> 
> 标签：jquery-ui, jquery, asp.net-mvc-4, tabs

我将 jquery 1.7 更新为 1.9 在我的旧代码中，我有一个构建选项卡的函数。在选择第一个选项卡并向我显示数据后，我使用了这个：

```
$("mytabs").tabs("select",0); 
```

现在，我已经更改了这段代码：

```
$("#mytabs").tabs("option", "activate", 0); 
```

但不要打开选项卡，我必须单击它并向我显示选项卡中的数据。我该如何解决这个问题？我需要在 jquery 1.9 活动选项卡 0 中向我展示数据。

我也试过：

```
$( "#mytabs" ).tabs( "option", "active", 0 ); 
```

同样的问题所以给我看标签 ![在此处输入图像描述](../Images/0925c9b2968efbb496f2156d175e9c8a.png)

然后我必须单击第一个选项卡并向我显示数据： ![在此处输入图像描述](../Images/b8d6b96e4f4a15659b29e625346826f4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:19:42.823

正确的选项是[active](http://api.jqueryui.com/tabs/#option-active)， not activate 。

例如：

```
$( "#mytabs" ).tabs( "option", "active", 0 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T18:07:20.227

jQuery UI 1.9 使用 jQuery 1.6。您可能会遇到麻烦，因为您使用了错误的版本。

# android - ADK 与谷歌 Nexus 4

> ID：15551394
> 
> 赞同：1
> 
> 时间：2013-03-21T15:16:59.637
> 
> 标签：android, arduino, adk, nexus-4

我正在尝试让我的大型 ADK 与 Google Nexus 4 设备（由 LG）一起使用，但几乎没有运气。甚至没有来自 Play 商店的演示应用程序。有没有人能够让这款手机与 ADK 一起使用？或者有谁知道这个设备是否支持附件模式？我只看到人们让 Nexus S 工作，但没有关于 Nexus 4。我发现的一些链接开始让我不以为然 [http://www.androidcentral.com/google-edits-nexus-4-online- help-manual-removes-reference-usb-gadget-support](http://www.androidcentral.com/google-edits-nexus-4-online-help-manual-removes-reference-usb-gadget-support) 但无法确认。任何帮助将不胜感激。

谢谢，阿伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T17:59:40.630

从 [http://source.android.com/tech/accessories/aoap/aoa2.html#detecting](http://source.android.com/tech/accessories/aoap/aoa2.html#detecting)，我必须：

1.  在 switchDevice 中将协议测试从 ==1 更改为 >=1

    如果（协议 >= 1）

2.  检查这些额外的设备模式：

    0x2D04 - 配件 + 音频

    0x2D05 - 附件 + 音频 + adb

而且我必须确保我有足够的电量（此处讨论 USB 电源问题：http: //productforums.google.com/forum/#!topic/mobile/ [xQhUljmWY5E](http://productforums.google.com/forum/#!topic/mobile/xQhUljmWY5E)）

# php - 以编程方式而非手动方式发布到 Facebook 页面

> ID：15551395
> 
> 赞同：0
> 
> 时间：2013-03-21T15:17:05.580
> 
> 标签：php, facebook, facebook-graph-api, cron

我需要知道如何在 facebook 页面上以编程方式发布状态。我的目标是将它与 cron 结合使用。我不知道该怎么做，因为没有关于登录用户的信息，而且 facebook API 不会让我在没有权限的情况下发布。

有什么办法可以做到这一点？

PS：我试图用谷歌搜索，但所有结果都是关于在管理员手动触发时发布到页面的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:38:04.420

是的，您可以通过请求扩展令牌并在您使用管理员帐户登录时将其保存在数据库中。

每次您访问您已经授予权限的应用程序时，都会生成一个令牌，如果您将该令牌与用户的 ID 一起存储在您的数据库中，您可以在接下来的 60 天内使用它（我不确定它是否真的是 60或 30 天），在令牌过期之后，为确保不会发生这种情况，您只需每月访问该应用程序一次以更新令牌。

如果您使用 php sdk，您可以通过执行以下操作获取该扩展令牌：

```
$facebook->setExtendedAccessToken();
$access_token = $facebook->getAccessToken(); 
```

您可以在这里阅读更多相关信息： [https ://developers.facebook.com/docs/howtos/login/extending-tokens/](https://developers.facebook.com/docs/howtos/login/extending-tokens/)

# jquery-mobile - 在 jQuery Mobile 中删除页面底部的空白

> ID：15551399
> 
> 赞同：0
> 
> 时间：2013-03-21T15:17:13.453
> 
> 标签：jquery-mobile

我有一个 jQueryMobile 页面，在内容之后添加了一些空白。如何删除它？我知道我在页面中没有页脚，是这个原因吗？非常感谢任何建议。

```
<div data-role="page" id="home">
        <div data-role="header">
            <h1></h1>
        </div>

        <div data-role="content">
            <div class="message"></div>
            <a data-role="none" href="" id="btn_loginEmail" class="button"></a>
            <a data-role="none" href="" id="btn_loginFacebook" class="button"></a>
        </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T11:38:12.517

如果您使用的是 jqm 1.2.0。在 min.css 中，将 ui-page{min-height:420px} 中的 min-height 更改为 400px。希望这对你有用！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:01:22.323

你说的空白是什么意思？？

我试过你的页面，它工作得很好

看看这个[小提琴](http://jsfiddle.net/w9KYy/)

你的意思是标题栏和内容内的第一个元素之间的空间（在上面的例子中是按钮）？

然后你可以做如下风格

```
.ui-content{
    margin-top: -23px;
} 
```

[看看这个小提琴](http://jsfiddle.net/w9KYy/1/)

# ios - 设备和模拟器上的阴影不同

> ID：15551402
> 
> 赞同：2
> 
> 时间：2013-03-21T15:17:18.700
> 
> 标签：ios, opengl-es, shader

我有一个嵌入在常规视图控制器中的 GLKViewController，显示我公司产品之一的旋转 3D 模型。我在不同的应用程序中使用相同的代码来显示另一个模型，我对那个没有问题。

出于某种原因，当我在模拟器上运行我当前的应用程序时，我得到了完美的平滑阴影，但是当我在设备上运行时（我已经在 iPad 3 和 iPad 4 上进行了测试），我得到了看起来像细胞的东西-shading，好像光照值更加离散。

真正令人困惑的是，这只发生在设备上运行时，并且只发生在这个特定的模型上，而不是我使用过的任何其他模型。

![在模拟器中运行](../Images/1c19dd531068d9fbda867f126ff8b2b4.png) ![在设备上运行](../Images/da51f46df2f8f5e5345cfa583534cc1b.png)

GLSL 中是否存在可能导致此行为的已知错误？

**编辑**

有趣的是，在我的调试过程中，如果我改变

```
gl_FragColor = vec4(ambientColor.rgb + diffuseReflection + specularReflection, 1.0); 
```

至

```
gl_FragColor = vec4(diffuseReflection, 1.0); 
```

我得到了我想要的输出，但是当我输出每个组件时，其余的组件都显示为黑色，这不应该导致那种奇怪的着色行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:44:06.067

你检查过你的顶点和片段着色器的文件名吗？

如果您有一个名为“vertexShader.vert”的文件并尝试使用“VertexShader.vert”（注意大写）引用它，这将在模拟器上工作，但在设备上不起作用。

# php - Kohana 3.3 Auth 模块因记住标志和创建用户令牌而失败

> ID：15551407
> 
> 赞同：0
> 
> 时间：2013-03-21T15:17:31.573
> 
> 标签：php, kohana, kohana-3, kohana-auth

我正在尝试使用以下方式登录用户：

`$login = Auth::instance()->login($this->request->post('username'), $this->request->post('password'), TRUE);`

但是，在尝试设置自动登录 cookie 时它会失败，`ErrorException [ Notice ]: Trying to get property of non-object`当它到达时：

```
// Token data
$data = array(
    'user_id'    => $user->pk(),
    'expires'    => time() + $this->_config['lifetime'],
    'user_agent' => sha1(Request::$user_agent),
);

// Create a new autologin token
$token = ORM::factory('User_Token')
            ->values($data)
            ->create();

// var_dump($token); // null

// Set the autologin cookie
Cookie::set('authautologin', $token->token, $this->_config['lifetime']); 
```

如果我`var_dump($token)`说它是`null`。我检查了数据库，它似乎已正确添加。我的配置有`driver => 'ORM'`. 如果记住我标志设置为 FALSE，则登录工作。为什么 $token 不是对象？有什么我错过的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:11:53.883

我通过覆盖然后调用的`create()`方法导致错误，但将 user_token 定向到错误的 create()。通过删除我添加的 create() 来修复。`class ORM_Base extends Kohana_ORM``parent::create()`

# git - 如何临时更改 git ssh 用户进行远程推送？

> ID：15551409
> 
> 赞同：37
> 
> 时间：2013-03-21T15:17:36.123
> 
> 标签：git, ssh, push

是否可以临时更改 ssh 用户为“git push remote master”而不弄乱 .git/config 或“git remote”，或者使用整个远程 url？

```
[root@host gitrepo]# git push otheruser@remote master # this does not work, but how great it would be
[root@host gitrepo]# USER=otheruser git push remote master # still asks password for root 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-10-10T14:17:30.837

您是否尝试过使用整个远程 URL？

```
git push ssh://<temp_user>@<host>/<repo_path> <local_branch>:<remote_branch> 
```

系统会提示您提供密码

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-03-12T15:54:21.043

完成提交后，您可以使用以下语法：

```
git push https://<username>@github.com/<github repository> <local branch name>:<remote branch name> 
```

系统会要求您提供 github 密码来处理推送。

例如，如果你的 github 用户名是“foobar”，仓库克隆 url 是“ [https://github.com/bar/ish.git](https://github.com/bar/ish.git) ”，本地和远程分支命名为“nonce”，可以使用如下：

```
git push https://foobar@github.com/bar/ish.git nonce:nonce 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-02-07T04:29:46.590

我用

```
git push https://github.com/${userName}/${repoName} 
```

它会提示您输入用户名和密码

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-21T15:20:45.310

使用 git remote 注册的 ssh 地址可能已经包含用户名，因此您需要使用完整的 ssh url，例如：

```
otheruser@remote:arepo 
```

那是行不通的，因为 ssh 将使用默认的公钥/私钥（当前由第一个用户用于身份验证）。

您可以在本地配置中注册一个新的遥控器：

```
# use the current ssh address registered for origin, changing just the user
# but you need a config file
git remote add originOtheruser otheruser:arepo 
```

**您必须有一个`$HOME/.ssh/config`文件**，才能定义 ssh 条目“其他用户”，因为 ssh 需要知道它需要使用什么公钥/私钥：它不能是默认的（`$HOME/.ssh/id_rsa`和`$HOME/.ssh/id_rsa.pub`）

参见例如“[如何在 github 上为 1 个用户添加 2 个 repo 的部署密钥](https://stackoverflow.com/a/10042145/6309)”

```
Host otheruser
HostName remote
User otheruser
IdentityFile ~/.ssh/otheruser 
```

假设您已将其他用户的公钥/私钥存储为：

```
$HOME/.ssh/otheruser
$HOME/.ssh/otheruser.pub 
```

现在，您可以使用该新遥控器进行推送：

```
git push originOtheruser master 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-12-08T07:46:02.207

对于 Windows 用户：按照说明进行操作：

**控制面板>>用户帐户>>凭据管理器>> Windows凭据>>通用凭据**

您可以更改 git 凭据：

点击**修改>>提供uname和密码**

或者您可以删除 git 凭据。下次你推送 repo 时，它会要求你提供凭证。

# actionscript-3 - 颈背物理将影片剪辑附加到多个颈背主体。隐式强制错误

> ID：15551410
> 
> 赞同：1
> 
> 时间：2013-03-21T15:17:39.357
> 
> 标签：actionscript-3, movieclip, flash-cs6, physics-engine

我正在尝试将影片剪辑附加到多个颈背主体，但出现以下错误。

```
Line 118    1067: 
Implicit coercion of a value of type flash.display:MovieClip 
to an unrelated type nape.shape:Shape. 
```

这是代码块：

```
for (var i:int = 0; i < 10; i++)
{
     var brick:Body= new Body(BodyType.DYNAMIC);
     var brickShape:Polygon = new Polygon(Polygon.box(10,30));
     brick.position.setxy(500, ((h ) - 32 * (i + 0.5)));
     var brickMovieClip:MovieClip = new Brick();
     brickMovieClip.width = 10;
     brickMovieClip.height = 30;
     addChild(brickMovieClip);
     brick.shapes.add(brickMovieClip);              
     brick.space = space;
    brick.shapes.at(0).material.elasticity = .1;            
} 
```

如果您知道如何解决此问题，我们将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T23:56:07.670

Body 的shapes 属性是一个nape.shape.Shape 的列表，而不是MovieClip 的列表，您应该将brickShape 添加到body 的形状列表中，而不是Movieclip。

Nape 本身与图形无关，它取决于您每一帧，以根据物理对象状态将与身体相关联的图形移动到正确的位置/旋转。

您可以做的是将影片剪辑存储在正文的 userData 字段中，以便以后可以在必要时轻松访问它，例如：

```
body.userData.graphic = brickMovieClip; 
```

然后每一帧你都可以像这样更新图形：

```
var mc:MovieClip = body.userData.graphic;
mc.x = body.position.x;
mc.y = body.position.y;
mc.rotation = body.rotation * 180 / Math.PI; 
```

# python - 铬警报硒

> ID：15551419
> 
> 赞同：0
> 
> 时间：2013-03-21T15:17:55.853
> 
> 标签：python, selenium-webdriver

我正在使用 selenium 来测试我的 python 模块。我的 Chrome 有问题，在我的测试中打开了一个警报。我的代码：

```
self.context.dojo.query( '#mybutton' ).click()                                                            
self.context.driver.switch_to_alert().accept() 
```

当我在 chrome 上启动测试时，在 click() 之后，出现错误：
WebDriverException: Message: u'Script execution failed。脚本：\n query( "#mybutton" )[0].click();\n ;\n 一个打开的模式对话框阻止了操作'并且测试失败。这个在 Firefox 上的测试是可以的。谢谢

# c++ - 如何获取归档在 tar 中的文件（和其他属性）的创建时间？

> ID：15551421
> 
> 赞同：2
> 
> 时间：2013-03-21T15:17:58.180
> 
> 标签：c++, windows, winapi, visual-c++, tar

## 我正在使用 VS 2010 和 Win32 在 C++ 中编写代码来简单地提取 TAR 文件。

我已经完全从头开始实现算法来进行提取。

我有一个像这样的 TAR 标头结构：

```
/* tar Header Block, from POSIX 1003.1-1990\.  */

/* POSIX header.  */

struct posix_header
{                              /* byte offset */
  char name[100];               /*   0 */
  char mode[8];                 /* 100 */
  char uid[8];                  /* 108 */
  char gid[8];                  /* 116 */
  char size[12];                /* 124 */
  char mtime[12];               /* 136 */
  char chksum[8];               /* 148 */
  char typeflag;                /* 156 */
  char linkname[100];           /* 157 */
  char magic[6];                /* 257 */
  char version[2];              /* 263 */
  char uname[32];               /* 265 */
  char gname[32];               /* 297 */
  char devmajor[8];             /* 329 */
  char devminor[8];             /* 337 */
  char prefix[155];             /* 345 */
                                /* 500 */
}; 
```

从结构中，我可以使用 mtime[12] 保留修改后的文件时间戳。然后我使用 Win32 ::SetFileTime() 函数来更新提取文件的时间戳属性。

**但问题在于访问创建的文件时间和上次访问时间。**

> 谁能帮我找出这些信息存储在 TAR 标头中的位置？？？
> 
> 还有我将如何解码文件权限，如只读、隐藏、系统.. for Windows？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:23:55.437

TAR 文件格式是 Unix 发明的，因此它存储的文件信息并不总是能很好地映射到 Windows 约定。

创建和访问时间不是以标准 TAR 格式存储的，因此您需要将它们保留为默认值，或者设置为与修改时间相同的值。但是，您可能实际上有一个[ustar 格式](http://en.wikipedia.org/wiki/Ustar#UStar_format)的文件，这确实增加了将此类信息存储在扩展文件条目中的可能性。有关更多详细信息，请参见[此处](http://www.gnu.org/software/tar/manual/html_chapter/Tar-Internals.html)。

Unix 权限[以八进制数](http://en.wikipedia.org/wiki/Unix_permissions#Numeric_notation)`mode`的形式存储在该字段中。没有直接等效于 Windows 文件属性的属性，因此您唯一能做的就是设置只读属性（如果它们不包含“w”权限）。

# charts - Highcharts - 饼图不显示切片

> ID：15551424
> 
> 赞同：1
> 
> 时间：2013-03-21T15:18:01.620
> 
> 标签：charts, highcharts, pie-chart

这个很奇怪。我正在调用我的饼图，当我做灰色背景时，数据管道连接器和悬停数据与数字都在背景上显示良好。但不会显示馅饼片。

但是，如果我打印出图表，它会在我保存图表并返回页面后显示切片。或者，如果我在 Chrome 中检查元素，它会在我调整检查器窗口大小后显示图表。如果我采取任何行动，几乎就像它正在重新绘制图表一样，但最初没有绘制它。

它在所有浏览器中的工作方式都相同。不会引发 javascript 错误。

有任何想法吗？

这是我的代码：

```
<script type="text/javascript">

        var chart;
        $(document).ready(function() {
            chart = new Highcharts.Chart({
                chart: {
                    renderTo: 'pie1',
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: false
                },
                title: {
                    text: 'application usage'
                },
                tooltip: {
                    formatter: function() {
                        return '<b>'+ this.point.name +'</b>: '+ this.y +'';
                    }
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: true,
                            color: '#FFFFFF',
                            connectorColor: '#FFFFFF',
                            formatter: function() {
                                return '<b>'+ this.point.name +'</b><br> '+ this.y +' ('+ Math.round(this.percentage) +'%)';
                            }
                        }
                    }
                },
                series: [{
                    type: 'pie',
                    name: 'percentage of application usage',
                    data: [{
                        name: 'Lessons', y: 25}, {name: 'Discussion', y: 65}, {name: 'Tests', y: 85}, {name: 'Dropbox', y: 92}, {name: 'Surveys', y: 105
                    }]
                }]
            });
        });

    </script>

    <div id='pie1' class='chart_container'></div> 
```

# javascript - 在 Dust.js 中渲染 2 个单独的数组

> ID：15551428
> 
> 赞同：3
> 
> 时间：2013-03-21T15:18:04.180
> 
> 标签：javascript, dust.js

所以我试图用两个单独的数组渲染一个灰尘模板。我的数据是这样的：

```
{
    array1: [5, 10, 20],
    array2: [10, 20, 40]
} 
```

我的灰尘模板看起来像：

```
{#array1}
<div class="span2">
  <input type="number" value={.}></div>
<div class="span2">
  <input type="number" value={array2[{$idx}]}></div>
</div>{~n}
{/array1} 
```

它可以很好地显示 array1 中的元素，但 array2 的所有输入都是空白的。我正在使用dust-full-1.2.2.js linkedIn fork。我应该怎么做才能显示 array2 的值​​？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T16:18:43.883

这样做的 Dust 方法是更改​​数据（如果可能的话）：

```
{
    numbers: [
        {val1: 5, val2: 10},
        {val1: 10, val2: 20},
        {val1: 20, val2: 40}
    ]
} 
```

然后您的模板将如下所示：

```
{#numbers}
  <div class="span2">
    <input type="number" value="{val1}"></div>
  <div class="span2">
    <input type="number" value="{val2}"></div>
  </div>
{/numbers} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T20:45:25.937

将上下文更改为 Array2。添加 {#array2[...]}

请参阅此处的显式上下文设置：[https ://github.com/linkedin/dustjs/wiki/Dust-Tutorial](https://github.com/linkedin/dustjs/wiki/Dust-Tutorial)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T19:08:37.413

请让我知道这是否对您有用。 [http://jsfiddle.net/yXx5L/3/](http://jsfiddle.net/yXx5L/3/)

我使用助手填充第二个文本框值而不更改数据格式。

```
value={#counterpart i=$idx}{ele}{/counterpart} 
```

# javascript - 如何在 n 行后截断 ContentPane 中的文本？

> ID：15551430
> 
> 赞同：0
> 
> 时间：2013-03-21T15:18:11.020
> 
> 标签：javascript, dojo

我有一个`ContentPane`其`contents`属性设置为一堆文本（没有额外的小部件）。我希望能够在 3 行之后截断文本并附加一个“阅读更多”链接，该链接将垂直扩展 ContentPane 以显示其余内容。

这是我所拥有的：

```
<div data-dojo-type="dijit/layout/ContentPane" 
     data-dojo-attach-point="truncateMe" 
     data-dojo-props="content: 'Way more than three lines of text'">
</div> 
```

有没有办法设置 ContentPane 中的最大行数并使用扩展窗格的选项相应地截断文本？

谢谢！

# visual-studio-2010 - 未解决的外部 SAP NetWeaver RFC SDK 7.1 客户端示例 Visual Studio 2010

> ID：15551432
> 
> 赞同：1
> 
> 时间：2013-03-21T15:18:17.650
> 
> 标签：visual-studio-2010, visual-c++, sap, unresolved-external, saprfc

我正在尝试在 Visual Studio 2010 项目中编译 companyClient.c，但即使我正确链接到 lib sapnwrfc.lib，我仍然会得到几个未解决的外部：

```
Error   1   error LNK2019: unresolved external symbol _RfcCloseConnection@8 referenced in function _errorHandling   C:\Users\Attila\Desktop\SAP_NWR_RFC\SAP_NWR_RFC\companyClient.obj   SAP_NWR_RFC
Error   2   error LNK2019: unresolved external symbol _RfcSAPUCToUTF8@24 referenced in function _nlsui_main C:\Users\Attila\Desktop\SAP_NWR_RFC\SAP_NWR_RFC\companyClient.obj   SAP_NWR_RFC
Error   3   error LNK2019: unresolved external symbol _RfcDestroyFunction@8 referenced in function _nlsui_main  C:\Users\Attila\Desktop\SAP_NWR_RFC\SAP_NWR_RFC\companyClient.obj   SAP_NWR_RFC
Error   4   error LNK2019: unresolved external symbol _RfcGetString@24 referenced in function _nlsui_main   C:\Users\Attila\Desktop\SAP_NWR_RFC\SAP_NWR_RFC\companyClient.obj   SAP_NWR_RFC
Error   5   error LNK2019: unresolved external symbol _RfcGetStructure@16 referenced in function _nlsui_main    C:\Users\Attila\Desktop\SAP_NWR_RFC\SAP_NWR_RFC\companyClient.obj   SAP_NWR_RFC
Error   6   error LNK2019: unresolved external symbol _RfcInvoke@12 referenced in function _nlsui_main  C:\Users\Attila\Desktop\SAP_NWR_RFC\SAP_NWR_RFC\companyClient.obj   SAP_NWR_RFC
Error   7   error LNK2019: unresolved external symbol _RfcSetChars@20 referenced in function _nlsui_main    C:\Users\Attila\Desktop\SAP_NWR_RFC\SAP_NWR_RFC\companyClient.obj   SAP_NWR_RFC
Error   8   error LNK2019: unresolved external symbol _RfcCreateFunction@8 referenced in function _nlsui_main   C:\Users\Attila\Desktop\SAP_NWR_RFC\SAP_NWR_RFC\companyClient.obj   SAP_NWR_RFC
Error   9   error LNK2019: unresolved external symbol _RfcGetFunctionDesc@12 referenced in function _nlsui_main C:\Users\Attila\Desktop\SAP_NWR_RFC\SAP_NWR_RFC\companyClient.obj   SAP_NWR_RFC
Error   10  error LNK2019: unresolved external symbol _RfcOpenConnection@12 referenced in function _nlsui_main  C:\Users\Attila\Desktop\SAP_NWR_RFC\SAP_NWR_RFC\companyClient.obj   SAP_NWR_RFC
Error   11  error LNK1120: 10 unresolved externals      C:\Users\Attila\Desktop\SAP_NWR_RFC\Debug\SAP_NWR_RFC.exe   SAP_NWR_RFC 
```

如果我在这里遗漏了什么，你能告诉我吗？我遵循了 pdf 文档中的指南，并且还阅读了：（[http://help.sap.com/saphelp_nwpi71/helpdata/en/22/0430ba488911d189490000e829fbbd/frameset.htm](http://help.sap.com/saphelp_nwpi71/helpdata/en/22/0430ba488911d189490000e829fbbd/frameset.htm)）/NetWeaver RFC SDK/Programming with the NW RFC API/使用 NW RFC SDK 文件

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:33:04.740

我遇到过同样的问题。确保您正在编译到操作系统，而不是芯片。如果操作系统是 32 位，请使用此处找到的 32 位编译/链接选项，如果芯片和操作系统是 64 位，请按照 64 位条目的说明进行操作：

[https://websmp230.sap-ag.de/sap(bD1lbiZjPTAwMQ==)/bc/bsp/spn/sapnotes/index2.htm?numm=1056696](https://websmp230.sap-ag.de/sap(bD1lbiZjPTAwMQ==)/bc/bsp/spn/sapnotes/index2.htm?numm=1056696)

# ios - 无输出的实时音频处理

> ID：15551439
> 
> 赞同：8
> 
> 时间：2013-03-21T15:18:37.603
> 
> 标签：ios, objective-c, core-audio

我在看这个例子[http://teragonaudio.com/article/How-to-do-realtime-recording-with-effect-processing-on-iOS.html](http://teragonaudio.com/article/How-to-do-realtime-recording-with-effect-processing-on-iOS.html)

我想关闭我的输出。我试图改变：`kAudioSessionCategory_PlayAndRecord`但这`kAudioSessionCategory_RecordAudio`不起作用。我也尝试摆脱：

```
 if(AudioUnitSetProperty(*audioUnit, kAudioUnitProperty_StreamFormat,
                            kAudioUnitScope_Output, 1, &streamDescription, sizeof(streamDescription)) != noErr) {
        return 1;
    } 
```

因为我想从麦克风中获取声音但不播放它。但无论我做什么，当我的声音到达 renderCallback 方法时，都会出现 -50 错误。当音频在输出上自动播放时，一切正常......

用代码更新：

```
using namespace std;

AudioUnit *audioUnit = NULL;

float *convertedSampleBuffer = NULL;

int initAudioSession() {
    audioUnit = (AudioUnit*)malloc(sizeof(AudioUnit));

    if(AudioSessionInitialize(NULL, NULL, NULL, NULL) != noErr) {
        return 1;
    }

    if(AudioSessionSetActive(true) != noErr) {
        return 1;
    }

    UInt32 sessionCategory = kAudioSessionCategory_PlayAndRecord;
    if(AudioSessionSetProperty(kAudioSessionProperty_AudioCategory,
                               sizeof(UInt32), &sessionCategory) != noErr) {
        return 1;
    }

    Float32 bufferSizeInSec = 0.02f;
    if(AudioSessionSetProperty(kAudioSessionProperty_PreferredHardwareIOBufferDuration,
                               sizeof(Float32), &bufferSizeInSec) != noErr) {
        return 1;
    }

    UInt32 overrideCategory = 1;
    if(AudioSessionSetProperty(kAudioSessionProperty_OverrideCategoryDefaultToSpeaker,
                               sizeof(UInt32), &overrideCategory) != noErr) {
        return 1;
    }

    // There are many properties you might want to provide callback functions for:
    // kAudioSessionProperty_AudioRouteChange
    // kAudioSessionProperty_OverrideCategoryEnableBluetoothInput
    // etc.

    return 0;
}

OSStatus renderCallback(void *userData, AudioUnitRenderActionFlags *actionFlags,
                        const AudioTimeStamp *audioTimeStamp, UInt32 busNumber,
                        UInt32 numFrames, AudioBufferList *buffers) {
    OSStatus status = AudioUnitRender(*audioUnit, actionFlags, audioTimeStamp,
                                      1, numFrames, buffers);

    int doOutput = 0;

    if(status != noErr) {
        return status;
    }

    if(convertedSampleBuffer == NULL) {
        // Lazy initialization of this buffer is necessary because we don't
        // know the frame count until the first callback
        convertedSampleBuffer = (float*)malloc(sizeof(float) * numFrames);
        baseTime = (float)QRealTimer::getUptimeInMilliseconds();
    }

    SInt16 *inputFrames = (SInt16*)(buffers->mBuffers->mData);

    // If your DSP code can use integers, then don't bother converting to
    // floats here, as it just wastes CPU. However, most DSP algorithms rely
    // on floating point, and this is especially true if you are porting a
    // VST/AU to iOS.

    int i;

    for( i = numFrames; i < fftlength; i++ )        // Shifting buffer
        x_inbuf[i - numFrames] = x_inbuf[i];

    for(  i = 0; i < numFrames; i++) {
        x_inbuf[i + x_phase] = (float)inputFrames[i] / (float)32768;
    }

    if( x_phase + numFrames == fftlength )
    {
        x_alignment.SigProc_frontend(x_inbuf);  // Signal processing front-end (FFT!)
        doOutput = x_alignment.Align();

        /// Output as text! In the real-time version,
        //      this is where we update visualisation callbacks and launch other services
        if ((doOutput) & (x_netscore.isEvent(x_alignment.Position()))
            &(x_alignment.lastAction()<x_alignment.Position()) )
        {
          //  here i want to do something with my input!
        }
    }
    else
        x_phase += numFrames;

   return noErr;
}

int initAudioStreams(AudioUnit *audioUnit) {
    UInt32 audioCategory = kAudioSessionCategory_PlayAndRecord;
    if(AudioSessionSetProperty(kAudioSessionProperty_AudioCategory,
                               sizeof(UInt32), &audioCategory) != noErr) {
        return 1;
    }

    UInt32 overrideCategory = 1;
    if(AudioSessionSetProperty(kAudioSessionProperty_OverrideCategoryDefaultToSpeaker,
                               sizeof(UInt32), &overrideCategory) != noErr) {
        // Less serious error, but you may want to handle it and bail here
    }

    AudioComponentDescription componentDescription;
    componentDescription.componentType = kAudioUnitType_Output;
    componentDescription.componentSubType = kAudioUnitSubType_RemoteIO;
    componentDescription.componentManufacturer = kAudioUnitManufacturer_Apple;
    componentDescription.componentFlags = 0;
    componentDescription.componentFlagsMask = 0;
    AudioComponent component = AudioComponentFindNext(NULL, &componentDescription);
    if(AudioComponentInstanceNew(component, audioUnit) != noErr) {
        return 1;
    }

    UInt32 enable = 1;
    if(AudioUnitSetProperty(*audioUnit, kAudioOutputUnitProperty_EnableIO,
                            kAudioUnitScope_Input, 1, &enable, sizeof(UInt32)) != noErr) {
        return 1;
    }

    AURenderCallbackStruct callbackStruct;
    callbackStruct.inputProc = renderCallback; // Render function
    callbackStruct.inputProcRefCon = NULL;
    if(AudioUnitSetProperty(*audioUnit, kAudioUnitProperty_SetRenderCallback,
                            kAudioUnitScope_Input, 0, &callbackStruct,
                            sizeof(AURenderCallbackStruct)) != noErr) {
        return 1;
    }

    AudioStreamBasicDescription streamDescription;
    // You might want to replace this with a different value, but keep in mind that the
    // iPhone does not support all sample rates. 8kHz, 22kHz, and 44.1kHz should all work.
    streamDescription.mSampleRate = 44100;
    // Yes, I know you probably want floating point samples, but the iPhone isn't going
    // to give you floating point data. You'll need to make the conversion by hand from
    // linear PCM <-> float.
    streamDescription.mFormatID = kAudioFormatLinearPCM;
    // This part is important!
    streamDescription.mFormatFlags = kAudioFormatFlagIsSignedInteger |
    kAudioFormatFlagsNativeEndian |
    kAudioFormatFlagIsPacked;
    streamDescription.mBitsPerChannel = 16;
    // 1 sample per frame, will always be 2 as long as 16-bit samples are being used
    streamDescription.mBytesPerFrame = 2;
    streamDescription.mChannelsPerFrame = 1;
    streamDescription.mBytesPerPacket = streamDescription.mBytesPerFrame *
    streamDescription.mChannelsPerFrame;
    // Always should be set to 1
    streamDescription.mFramesPerPacket = 1;
    // Always set to 0, just to be sure
    streamDescription.mReserved = 0;

    // Set up input stream with above properties
    if(AudioUnitSetProperty(*audioUnit, kAudioUnitProperty_StreamFormat,
                            kAudioUnitScope_Input, 0, &streamDescription, sizeof(streamDescription)) != noErr) {
        return 1;
    }

    // Ditto for the output stream, which we will be sending the processed audio to
    if(AudioUnitSetProperty(*audioUnit, kAudioUnitProperty_StreamFormat,
                            kAudioUnitScope_Output, 1, &streamDescription, sizeof(streamDescription)) != noErr) {
        return 1;
    }

    return 0;
}

int startAudioUnit(AudioUnit *audioUnit) {
    if(AudioUnitInitialize(*audioUnit) != noErr) {
        return 1;
    }

    if(AudioOutputUnitStart(*audioUnit) != noErr) {
        return 1;
    }

    return 0;
} 
```

并从我的 VC 打来电话：

```
 initAudioSession();
    initAudioStreams( audioUnit);
    startAudioUnit( audioUnit); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-25T08:46:48.320

如果您只想录制，不播放，只需注释掉设置 renderCallback 的行：

```
AURenderCallbackStruct callbackStruct;
callbackStruct.inputProc = renderCallback; // Render function
callbackStruct.inputProcRefCon = NULL;
if(AudioUnitSetProperty(*audioUnit, kAudioUnitProperty_SetRenderCallback,
   kAudioUnitScope_Input, 0, &callbackStruct,
   sizeof(AURenderCallbackStruct)) != noErr) {
  return 1;
} 
```

看到代码后更新：

正如我所怀疑的，您缺少输入回调。添加这些行：

```
// at top:
#define kInputBus 1

AURenderCallbackStruct callbackStruct;
/**/
callbackStruct.inputProc = &ALAudioUnit::recordingCallback;
callbackStruct.inputProcRefCon = this;
status = AudioUnitSetProperty(audioUnit,
                              kAudioOutputUnitProperty_SetInputCallback,
                              kAudioUnitScope_Global,
                              kInputBus,
                              &callbackStruct,
                              sizeof(callbackStruct)); 
```

现在在您的录音回调中：

```
OSStatus ALAudioUnit::recordingCallback(void *inRefCon,
                                        AudioUnitRenderActionFlags *ioActionFlags,
                                        const AudioTimeStamp *inTimeStamp,
                                        UInt32 inBusNumber,
                                        UInt32 inNumberFrames,
                                        AudioBufferList *ioData)
{
    // TODO: Use inRefCon to access our interface object to do stuff
    // Then, use inNumberFrames to figure out how much data is available, and make
    // that much space available in buffers in an AudioBufferList.

    // Then:
    // Obtain recorded samples

    OSStatus status;

    ALAudioUnit *pThis = reinterpret_cast<ALAudioUnit*>(inRefCon);
    if (!pThis)
        return noErr;

    //assert (pThis->m_nMaxSliceFrames >= inNumberFrames);

    pThis->recorderBufferList->GetBufferList().mBuffers[0].mDataByteSize = inNumberFrames * pThis->m_recorderSBD.mBytesPerFrame;

    status = AudioUnitRender(pThis->audioUnit,
                             ioActionFlags,
                             inTimeStamp,
                             inBusNumber,
                             inNumberFrames,
                             &pThis->recorderBufferList->GetBufferList());
    THROW_EXCEPTION_IF_ERROR(status, "error rendering audio unit");

    // If we're not playing, I don't care about the data, simply discard it
    if (!pThis->playbackState || pThis->isSeeking) return noErr;

    // Now, we have the samples we just read sitting in buffers in bufferList
    pThis->DoStuffWithTheRecordedAudio(inNumberFrames, pThis->recorderBufferList, inTimeStamp);

    return noErr;
} 
```

顺便说一句，我正在分配自己的缓冲区，而不是使用 AudioUnit 提供的缓冲区。如果您想使用 AudioUnit 分配的缓冲区，您可能需要更改这些部分。

更新：

如何分配自己的缓冲区：

```
recorderBufferList = new AUBufferList();
recorderBufferList->Allocate(m_recorderSBD, m_nMaxSliceFrames);
recorderBufferList->PrepareBuffer(m_recorderSBD, m_nMaxSliceFrames); 
```

此外，如果您这样做，请告诉 AudioUnit 不要分配缓冲区：

```
// Disable buffer allocation for the recorder (optional - do this if we want to pass in our own)
flag = 0;
status = AudioUnitSetProperty(audioUnit,
                              kAudioUnitProperty_ShouldAllocateBuffer,
                              kAudioUnitScope_Input,
                              kInputBus,
                              &flag,
                              sizeof(flag)); 
```

您需要包含[CoreAudio 实用程序类](http://developer.apple.com/library/ios/#samplecode/CoreAudioUtilityClasses/Introduction/Intro.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-03T19:52:58.447

感谢@Mar0ux 的回答。到这里来寻找完整示例代码的人可以在这里查看：

[https://code.google.com/p/ios-coreaudio-example/](https://code.google.com/p/ios-coreaudio-example/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-03T06:00:21.617

我正在做一个使用相同代码的类似应用程序，我发现您可以通过将枚举更改为来结束`kAudioSessionCategory_PlayAndRecord`播放`RecordAudio`

```
int initAudioStreams(AudioUnit *audioUnit) {
UInt32 audioCategory = kAudioSessionCategory_RecordAudio;
if(AudioSessionSetProperty(kAudioSessionProperty_AudioCategory,
                           sizeof(UInt32), &audioCategory) != noErr) {
    return 1;
} 
```

这停止了​​我硬件上麦克风和扬声器之间的反馈。

# list - 在 Salesforce 中将项目添加到没有 for 循环的列表

> ID：15551441
> 
> 赞同：0
> 
> 时间：2013-03-21T15:18:45.010
> 
> 标签：list, object, salesforce

例如，我有一个对象列表（obj1）。在 obj1 的每条记录中，都有一个字段值 (var1)。无论如何都可以将 obj1 列表中的所有 var1 值添加到另一个列表而不循环遍历 obj1 列表？

如果我不清楚我在上面的要求，请告诉我。

提前感谢任何帮助/澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:27:50.943

我认为您正在寻找的是[SOQL Aggregate Functions](http://www.salesforce.com/us/developer/docs/soql_sosl/Content/sforce_api_calls_soql_select_agg_functions.htm)，它可以让您执行以下操作：

```
SELECT SUM(Amount)
FROM Opportunity
WHERE IsClosed = false AND Probability > 60 
```

这样您就不必循环输入代码并将`SUM`操作推送到数据库。在相关说明中，您可能还想查看[汇总汇总字段](http://login.salesforce.com/help/doc/en/fields_about_roll_up_summary_fields.htm)，以防您希望在父对象上维护此汇总。

# ruby-on-rails-3 - 在 Rails 表单中更新数量

> ID：15551447
> 
> 赞同：0
> 
> 时间：2013-03-21T15:18:59.350
> 
> 标签：ruby-on-rails-3, forms, activerecord

我正在构建一个简单的库存应用程序来跟踪物品的数量。

在基本形式中，我将使用我输入的任意数字来更新 item_quantity。

但是我将如何创建一个表单/代码，允许我在现有项目数量之上标记 +20？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:28:05.073

你可以用 jquery/javascript 来做

就像是：

在您看来：

```
<%= f.text_field :item_quantity, :id => 'item_quanity' %>
<a href="#" id="increment_item_quantity">+20</a> 
```

在 JavaScript 中：

```
$(function() {
  $('#increment_item_quantity').on('click', function(e) {
    e.preventDefault();
    var currentVal = parseInt($('#item_quantity').val());
    $('#item_quantity').val(currentVal + 20);
  });
}); 
```

您可能想确保 currentVal 是一个数字（因为 parseInt('') => NaN）

然后照常提交

或者

如果您想通过表单执行此操作：

在您看来：

```
<%= form_for @item, incr_quantity_path(@item) do |f| %>
  <%= f.submit %>
<% end %> 
```

然后在你的控制器中：

```
def incr_quantity
  @item = Item.find(params[:id])
  # I'd probably move the increment logic into the model
  @item.quantity += 20
  @item.save
  # respond to it however you want
end 
```

或者，如果您想通过输入的内容增加值：

模型：

```
class Item < AR::Base
  ...
  attr_accessible :incr_quantity_by

  def increment_quantity_by
    quantity += incr_quantity_by
  end

  ...
end 
```

看法：

```
<%= form_for @item, incr_quantity_path(@item) do |f| %>
  <%= f.text_field :incr_quantity_by
  <%= f.submit %>
<% end %> 
```

控制器：

```
def incr_quantity
  @item = Item.find(params[:id])
  @item.increment_quantity_by
  @item.save
  # respond to how you want
end 
```

# google-chrome - 如何在 chrome 中获得嵌入框阴影的工作？

> ID：15551448
> 
> 赞同：1
> 
> 时间：2013-03-21T15:18:59.800
> 
> 标签：google-chrome, css

我创建了这个[非常简单的小提琴](http://jsfiddle.net/etrfu/3/)来重现这个问题。我在 Firefox 中做了预期的事情，但在 chrome 中没有。有没有实现相同目的的解决方法？

这是HTML代码：

```
<table  cellpadding="1">
    <thead>
        <tr>
            <th>Adskldj</th>
            <th>dfsdfd</th>
        </tr>
    </thead>
    <tbody>
        <tr><th>Adskldj</th><th>dfsdfd</th></tr>
        <tr><th>Adskldj</th><th>dfsdfd</th></tr>
        <tr><th>Adskldj</th><th>dfsdfd</th></tr>
        <tr><th>Adskldj</th><th>dfsdfd</th></tr>
    </tbody>
</table> 
```

和 CSS

```
table {
    border-collapse:collapse;
}
td, th {
    border-top: 1px solid #888;
    border-bottom: 1px solid #888;
    padding: 30px;
}
thead {
    background-color: #DDD;
    box-shadow:inset 0 0 10px #000000;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:25:27.270

我相信 box-shadow 需要在块级元素上。因此它不适用于thead。

我试图找到规范，但仍然如此。块级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:40:35.790

通过绕过表格标签并改用 css 显示属性，我已经成功地使用了 CSS3 幻想，为每个本机表格元素创建一个类并将其应用于 <div> 或其他元素。

CSS 如：

```
.row{
    display:table-row;
}
.cell{
    display:table-cell;
} 
```

等等

这允许使用常规表无法实现的一些很好的效果。

# excel - 根据开始日期和天数查找结束营业日期 - excel

> ID：15551449
> 
> 赞同：0
> 
> 时间：2013-03-21T15:19:01.107
> 
> 标签：excel, vba

这是我的第一个 vba 任务。事实上我第一次用Alt+F11打开VB编辑器！我需要做的是，根据开始日期和天数计算结束日期。我在A列中有开始日期的值和持续时间，即；B 列中的天数。到目前为止，计算工作日是我的第二个关注点。我首先需要知道的是，如何使用 Worksheet_Change 事件？

我想做的是，当用户在 A 列中的任何单元格中输入持续时间时，比如 A(n)，在 Worksheet_Change 事件代码中选择单元格 B(n)。并且当在 B2 中输入开始日期时，将调用计算结束日期的函数。请让我知道它是否正确。

另外给我带来麻烦的是，当我在单元格中输入值后按 Enter 键时，Worksheet 事件会突然出现。

请帮我解决这个简单而复杂的问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:34:41.927

试试下面的代码。请确保将此代码放入工作表中。此代码也适用于整列。

```
Private Sub Worksheet_Change(ByVal Target As Range)
    On Error Resume Next
    Application.EnableEvents = False

    If Target.Column < 2 And Target.Count < 1 And Target.Value = "" Then Exit Sub

    If Target.Column = 1 And Target.Offset(0, 1) <> "" Then
        Target.Offset(0, 2) = DateAdd("d", CDbl(Target.Value), CDbl(Target.Offset(0, 1)))
    ElseIf Target.Offset(0, -1) <> "" Then
        Target.Offset(0, 1) = DateAdd("d", CDbl(Target.Offset(0, -1)), CDbl(Target.Value))
    End If

    Application.EnableEvents = True
End Sub 
```

# ios - 如何提取文本中的电子邮件/邮箱字符串列表或测试字符串是否是正确的电子邮件地址？

> ID：15551457
> 
> 赞同：0
> 
> 时间：2013-03-21T15:19:20.280
> 
> 标签：ios, objective-c, macos, nsdatadetector

给定一些任意文本，我想提取所有电子邮件地址和“邮箱说明符”（例如`"Fred Smith" <fred@me.com>`）。我查看了 NSDataDetector，但它不处理电子邮件地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:19:20.280

解决这个问题的方法是获得一个非常好的算法，可以检测尽可能多的有效地址，并拒绝不正确的地址。最好的解决方案可能是使用 lex 和 yacc 构建的解析器，但使用正则表达式存在合理的解决方案。

有关经过测试的正则表达式列表以及对问题和可能解决方案的更深入讨论，请参阅此[站点。](http://fightingforalostcause.net/misc/2006/compare-email-regex.php)

上面网站上显示的正则表达式是为 PHP 格式化的，并且有前导和尾随的“/”标记，以及表示不区分大小写的“标志”等（有关更多信息，请参阅此[网站](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php)），因此需要去掉这些在 Objective-C 项目中使用表达式之前。此外，任何锚也需要剥离，因为我们需要多个地址而不仅仅是一个（即'^'和'$'）。

NSRegularExpression 是在这里使用的类。我发现有用的是将正则表达式存储在我项目的文件中，这样您就不必担心转义所有反斜杠和引号。然后代码将表达式读入字符串，并按如下方式创建对象：

```
NSString *fullPath = [[NSBundle mainBundle] pathForResource:self.regex ofType:@"txt"];
NSString *pattern = [NSString stringWithContentsOfFile:fullPath encoding:NSUTF8StringEncoding error:NULL];
__autoreleasing NSError *error = nil;
reg = [NSRegularExpression regularExpressionWithPattern:pattern options:NSRegularExpressionCaseInsensitive error:&error]; // some patterns may not need NSRegularExpressionCaseInsensitive
assert(reg && !error); 
```

一旦你有了一个初始化的表达式，你就可以用它来返回一个范围列表，每个范围都是一个地址：

```
NSArray *ret = [reg matchesInString:str options:0 range:NSMakeRange(0, [str length])]; 
```

但是，我们知道所有电子邮件地址都包含一个“@”，因此在处理它之前验证该字符串是否至少包含一个可能是值得的。此外，由于文本中可能包含换行符和/或回车符，您可能需要先删除它们。完全剥离它们可能会更好，因为某些邮件程序可能会在地址的某个内部点拆分一行。

一旦你有了地址范围的列表，那么大部分工作就完成了——如果你想要的只是地址。但是，地址通常以“邮箱说明符”格式显示，其中名称被添加到地址前面，地址用“<”和“>”包裹。这种格式在[RFC5322](https://www.rfc-editor.org/rfc/rfc5322)的第 3.4 节中进行了介绍。

要从“邮箱说明符”中恢复名称，请检查地址是否用“<”和“>”包裹，如果是，则查找“<”前面的字符串，忽略空格（直到找到第一个特点）。大多数名称将用双引号括起来（常见做法），但实际上可以是使用反斜杠转义以包含空格或其他特殊字符（如'"'）的裸字母数字字符串。

同样的技术可以用于实时验证——比如当文本字符串成为有效的电子邮件地址时启用提交按钮。在这种情况下，您评估每个用户更改的字符串，并启用/禁用提交按钮。

[如果这一切看起来需要大量的编码工作，您可以在github](https://github.com/dhoerl/EmailAddressFinder)上获取一个开源项目。

EDIT1：有关更快但不那么严格的方法，请参阅 CodaFi 的评论。

EDIT2：看起来“mailto：URL 的内容可能非常复杂，github 项目只处理最简单的，并且不会对地址进行反编码。这将在以后的更新中解决。

EDIT3：该项目已更新为完全处理“mailto：”对象，并返回到、抄送、密件抄送、主题和正文，所有 URL 解码。

# macos - 运行 perl cgi 脚本问题

> ID：15551470
> 
> 赞同：0
> 
> 时间：2013-03-21T15:19:38.710
> 
> 标签：macos, perl, apache, osx-lion, cgi

我正在尝试以 CGI 的形式运行一个简单的 hello world 脚本（来自Beginning Perl book）。我遇到以下问题：

1.  我在计算机（Mac OSX Lion）的任何地方都找不到文件夹`/cgi-bin/`。我确实尝试将模式更改为 755 以及我在网上找到的任何东西。

2.  当我尝试本地主机时，我得到“它有效！” （这意味着 apache 工作正常）

3.  我看到了一些关于更改 apache 文件配置的建议，而且我尝试过的次数越少，但一切都没有奏效，总是让人感到困惑。例如，在共享中选中和取消选中 web 按钮的建议在 mac osx lion 中不起作用，不再有那种按钮。

是否有可能获得关于如何从 Perl 脚本到在 Web 服务器上实际运行它的分步指南或帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:24:07.410

> 我在计算机（mac osx lion）的任何地方都找不到文件夹/cgi-bin/。

您可以创建一个。

Apache 手册[描述了如何配置它以执行 CGI](http://httpd.apache.org/docs/2.2/howto/cgi.html#configuring)。

> 当我尝试 localhost 时，我得到“它有效！” （这意味着 apache 工作正常）

您需要使用 CGI 脚本的 URI 而不是 Apache 根目录。

> 我提出了一些关于更改 apache 文件配置的建议，而且我尝试过的次数越少越让人困惑，但都没有奏效。例如，在共享中选中和取消选中 web 按钮的建议在 mac osx lion 中不起作用，不再有那种按钮。

苹果确实删除了 GUI 选项。不要使用它，而是回退到命令行：

```
apachectl restart 
```

首先检查您的配置文件编辑通常是一个好主意：

```
apachectl configtest 
```

# kendo-ui - 有没有办法允许在剑道移动列表视图上进行鼠标滚动？

> ID：15551476
> 
> 赞同：0
> 
> 时间：2013-03-21T15:19:50.153
> 
> 标签：kendo-ui, kendo-mobile

我注意到，在带有列表视图的移动页面上“滚动”的唯一方法是单击并拖动。

对于在桌面上使用移动网站的人，有没有办法允许使用鼠标滚轮进行正常滚动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:55:15.827

这是使用带有 jquery.mousewheel.js 的 kendo mobile 以在 Web 应用程序上使用鼠标滚轮进行移动视图滚动的解决方法。

风景：

```
<div data-role="view" id="tabstrip-editor" data-init="attachToScroller">
<ul data-role="listview" data-style="inset" data-type="group">
    <li>item 1</li>
    <li>item 2</li>
</ul></div> 
```

Javascript：

```
function matrixToArray(matrix) {
    return matrix.substr(7, matrix.length - 8).split(', ');
}

function attachToScroller(e) {
    var scroller = e.view.scroller;

    e.view.scroller.element.find('.km-scroll-container').mousewheel(function (event, delta, deltaX, deltaY) {
        event.preventDefault();
        var matrix = matrixToArray($(event.currentTarget).css("-webkit-transform"));
        var currentScroll = parseInt(matrix[5], 10);
        var scrollingamount = currentScroll + deltaY * 15;
        if (deltaY > 0) {            
            if (-currentScroll > 9)
                scroller.scrollTo(0, scrollingamount);
            else
                scroller.scrollTo(0, 0);
        }
        else {
            var maximum = scroller.scrollHeight() - $(scroller.element).height();
            if(maximum + currentScroll > 0)
                scroller.scrollTo(0, scrollingamount);
            else
                scroller.scrollTo(0, -maximum);
        }
    });
} 
```

[Fiddle Demo Here](http://jsfiddle.net/WGc2Y/11/) (for chrome)

和

[Modernizr 的小提琴演示](http://jsfiddle.net/4gd8x/1/)（也适用于其他浏览器）

在视图初始化期间，我们将滚动容器附加到 jquery.mousewheel 事件。当 jquery.mousewheel 事件到达时，我们必须获取滚动容器的 -transform css 属性来了解当前的 Y 变换是什么（kendo 移动滚动器使用 -transform 来定位自身）。之后，我们调用scroller的scrollTo方法根据鼠标滚轮的delta属性向上或向下滚动。

# ruby-on-rails - Rails：从用户提交的文件中提取文本会带来哪些安全问题？

> ID：15551478
> 
> 赞同：0
> 
> 时间：2013-03-21T15:19:53.437
> 
> 标签：ruby-on-rails, security, text-parsing

如果应用程序的用户能够提交纯文本文件，并且这些文件具有由程序使用正则表达式从其中提取的数据（然后将其返回给用户），那么如何滥用呢？

我知道在*保存*可执行文件或未清理的文件名时存在问题，但我不知道仅打开和解析临时在内存中持续存在的文件有什么风险。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:04:07.953

这在很大程度上取决于这个理论体系的实施。最大的两个漏洞是：

1.  [SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。如果您将此数据提交到数据库并且以不正确的方式这样做，您可能会将您的数据库暴露给用户上传的任何恶意格式的数据。

2.  [跨站脚本](http://en.wikipedia.org/wiki/Cross-site_scripting)。如果您将上传结果呈现为 HTML，如果结果未正确转义，则可能存在 XSS 漏洞。

正确处理用户输入可以减少这些问题。通常，尽管很大程度上取决于代码的实际实现细节。如果您正在`eval`输入用户输入，显然，这也是一个巨大的安全漏洞......但在这个细节级别上我们无法看到。

# python - 在 python 中使用 urllib2/mechanize 加载 html 源代码

> ID：15551480
> 
> 赞同：0
> 
> 时间：2013-03-21T15:19:56.637
> 
> 标签：python, html, string

我想下载一些带有 urllib2 或 mechanize（带有 .read()）的 html 源代码。不幸的是，我想要的来源非常大。我只得到一个长度不超过 65747 个字符的字符串（两个库）。不考虑剩余的尾巴。这真的让我很烦恼，我不知道如何处理这个问题。有人可以给我一个提示吗？

编辑：这是我使用的代码片段。

```
cj = cookielib.LWPCookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))

dataHTML = ""
fp = opener.open(url)

while 1:
    r = fp.read()
    if r == '':
        break
    dataHTML += r 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:23:47.363

您可以多次调用 read()：

```
b = ''
while 1:
    r = f.read()
    if r == '':break
    b += r 
```

效果更好？

# css - 具有巨大宽度的表格在 div 周围留下

> ID：15551483
> 
> 赞同：1
> 
> 时间：2013-03-21T15:20:01.660
> 
> 标签：css

我对以下代码有疑问：

```
<div style="background: #CCCCCC;">
    <table>
        <tr>
            <!-- many td's with a width of, say 40px -->
        </tr>
    </table>
</div> 
```

问题是：由于大量的 td 超过了浏览器宽度的 100%，所以周围的 div 应该增长到 100% 以上，但事实并非如此。事实上，灰色背景在 100% 处停止，看起来好像桌子离开了周围的 div。我尝试为表格使用所有可能的“显示”变体，但没有任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:24:11.263

你可以做的是使用`table-layout: fixed;`应该关联的，`word-wrap: break-word;`这样你的表就不会因为长而完整的`td`字符串而变得奇怪，或者`overflow: auto;`用于容器`div`

```
table {
   table-layout: fixed;
   width: /* Whatever you want */;
}

table td {
   width: /* Whatever you want */;
   word-wrap: break-word;
} 
```

或使用

```
div {
   width: /* Some fixed width here */;
   overflow: auto;
} 
```

# android - 低内存清理后的Android onActivityResult和onResume Lifecycle

> ID：15551484
> 
> 赞同：3
> 
> 时间：2013-03-21T15:20:11.043
> 
> 标签：android, android-activity, android-memory

我有两个活动：ActivityA 和 ActivityB。ActivityA 为结果启动 Activity B，并期望某个 resultCode。如果它没有得到它，则 ActivityA 完成。这个想法是关闭应用程序。

ActivityA 还有一个 onResume 方法可以做一些事情。如果 ActivityA 决定在 onActivityResult 方法中完成，我不希望完成这些事情。

这在大多数情况下都有效，除非在内存不足的情况下，android 从内存中删除 ActivityA 和 ActivityB 并重新加载它们。

例如：ActivityA 启动 ActivityB。背景应用程序。然后android会做它的内存清理。我们可以在 DDMS 中进行模拟。

*   将应用程序带到前台。
*   为 ActivityB 调用 onCreate()
*   后退按钮完成 ActivityB
*   为 ActivityA 调用 onCreate()
*   onActivityResult() 调用 ActivityA
*   结果是取消，调用finish()
*   onResume() 调用 ActivityA
*   在简历上做事

这最后两个步骤是不可取的。如果没有内存不足的问题，正常的工作流程如下所示：

*   将应用程序带到前台
*   后退按钮完成 ActivityB
*   onActivityResult() 调用 ActivityA
*   结果是取消，调用finish()

我在运行 Gingerbread 的手机和运行 Jellybean 的 Nexus 7 上都看到了这一点。

我的第一个问题：我是否在活动生命周期中遗漏了一些明显的东西？

如果做不到这一点，这是 Android 的预期行为吗？有没有一种优雅的方法来解决这个问题，还是我必须破解一些东西，或者我应该一起尝试不同的方法？

提前致谢。如果有人需要更多信息或代码，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:25:00.740

您可以声明一个类成员`private boolean mShouldFinished`。在调用时将其设置为**true**。在检查和如果为**真**调用。`onActivityResult``finish``onResume``mShouldFinished`**`finish`**

# javascript - 在按键上更改图像

> ID：15551490
> 
> 赞同：1
> 
> 时间：2013-03-21T15:20:20.330
> 
> 标签：javascript, image, html, canvas, keypress

我正在做一个学校作业，使用 HTML5 画布和 Javascript 制作一个小游戏。这个想法是基于太空入侵者，但有风筝（我知道真的很糟糕）。所以我让风筝通过按键移动，现在我希望它在按下左右键时显示​​不同的图像（风筝向左和向右弯曲）。

我在屏幕上看到了左边的风筝图像，但它也显示了正常的风筝。左右按键也没有区别。

我需要添加另一个函数来单独绘制左侧风筝吗？或者当 key 为 true 时添加 if 语句绘制图像？这可能都是错误的，但我有点卡在这里。

这是我的代码

```
 const FPS = 30;
 var canvas = null;
 var context = null;

 window.onload = init ;

 function init() {
canvas = document.getElementById('gameCanvas');
context = canvas.getContext('2d');

setInterval(loop, 1000 / FPS);

// register keyboard events
window.addEventListener("keydown", onKeyDown);
window.addEventListener("keyup", onKeyUp);

// Initialize the player object
player.vx = 0;
player.vy = 0;
player.image = new Image();
player.image.src = "./kite.png";
player.imgLeft = new Image();
player.imgLeft.src = "./kite-links.png";
player.x = canvas.width/2 - player.image.width/2;
player.y = canvas.height/1.3 - player.image.height/2;
player.speed = 10;
 }

 var player = Object(); // Initialize a player object

 // Things to do when keys are down
 function onKeyDown(event)
 {
if (event.keyCode >= 37 && event.keyCode<=39)
    event.preventDefault(); // prevent arrow keys from scrolling the page

switch (event.keyCode) {
    case 37: player.vx = -1; break; // left key pressed
    case 38: player.vy = -1; break; // up key pressed
    case 39: player.vx = 1; break;  // right key pressed
}
 }

 // Things to do when keys are up
 function onKeyUp(event)
 {
switch (event.keyCode) {
    case 37: case 39: player.vx = 0; break; // left or right key released
    case 38: player.vy = 0; break; // up or down key released
}
 }

 function update(){
// update all your objects here
player.x += player.vx * player.speed; // update player position
player.y += player.vy * player.speed;
 }

 function draw(){
// clear the screen
context.clearRect(0, 0, canvas.width, canvas.height);

// draw all your objects here
context.drawImage(player.image, player.x, player.y, player.image.width, player.image.height);
context.drawImage(player.imgLeft, player.x, player.y, player.image.width,      player.image.height);
 }

 function loop() {
update();
draw();
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:28:28.380

您可以将所需的每个图像（上、右和左）保存为播放器对象的属性，并在播放器改变方向时更改主图像（正在绘制的图像）。

在里面：

```
//default to straight in init()
player.image = new Image();
player.image.src = "./kite.png";
player.imgUp = new Image();
player.imgUp.src = "./kite.png";
player.imgLeft = new Image();
player.imgLeft.src = "./kite-links.png";
player.imgRight = new Image();
player.imgRight.src = "./kite-right.png"; 
```

onKeyDown：

```
switch (event.keyCode) {
    case 37: player.vx = -1; player.image = player.imgLeft; break; // left key
    case 38: player.vy = -1; player.image = player.imgUp; break; // up key
    case 39: player.vx = 1; player.image = player.imgRight; break; // right key
} 
```

您也不需要像现在一样在 draw() 中绘制所有图像。你只需要画`player.image`

# kdb - 如何在 Q 查询中嵌入返回字符串的函数？

> ID：15551496
> 
> 赞同：2
> 
> 时间：2013-03-21T15:20:28.023
> 
> 标签：kdb

我正在使用`Q.f`将列字段从整数格式化为具有 4 位精度的浮点数：

```
fmt_price:{[val] .Q.f[4;](val*0.0001)}
select fmt_price[price] from mytable 
```

在 q 提示符下`fmt_price`效果很好，但是如果我将函数嵌入到查询中，我会收到以下错误：

> 执行查询期间发生错误。服务器发送响应：`type

如果`fmt_price`我返回浮点或整数变量，而不是`Q.f`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:25:42.150

您需要在列表中执行每个。当前，当它需要一个原子时，您正在将值列表传递给 .Qf。您需要以下内容：

```
fmt_price:{[val] .Q.f[4;] each (val*0.0001)} 
```

# rest - 在 WADL 中定义 PUSH / COMET / LONG POLLING 的最具描述性的方式是什么

> ID：15551498
> 
> 赞同：1
> 
> 时间：2013-03-21T15:20:32.017
> 
> 标签：rest, wadl

我有一个 WADL，其中一些资源是静态请求，而其他资源利用 COMET / 长轮询。使用 WADL 标准，我如何区分静态资源和 COMET 资源？

出于持续集成的目的，客户端和服务器端代码是基于 WADL 自动生成的。静态 HTTP 请求和 COMET 请求具有不同的自动生成代码，因此需要在 WADL 中定义 COMET。

# python - 使用 Portable Python 时出现重复错误

> ID：15551502
> 
> 赞同：0
> 
> 时间：2013-03-21T15:20:39.663
> 
> 标签：python

注意：标记为原始问题的问题未回答此问题。这不仅仅是 Python v2 与 v3 的问题，我在下面的评论中对此进行了解释。

原帖：我正在尝试在工作中学习 Python，所以我目前使用的是 Portable Python 3.2.1.1（以下简称 PP）。（我之所以提到这一点，是因为当我使用我的 Mac 和常规 Python 时，这个问题不会发生在家里。）

我正在完成Learn Python the Hard Way ( [http://learnpythonthehardway.org/book/ex16.html](http://learnpythonthehardway.org/book/ex16.html) ) 的练习16。我听说这不是最好的学习工具，但我是一个完整的编程 n00b 并且我是一个动手学习者。如果你有更好的建议，我很乐意！

练习的前几行内容如下：

```
 from sys import argv
    script, filename = argv
    print "We're going to erase %r." % filename
    print "If you don't want that, hit CTRL-C (^C)." 
```

我的脚本名为 Ex16.py，我使用的文件是 Python.txt，它们都与 PP .exes 位于同一文件夹中。我认为这没有必要，但希望它可能会解决问题......消极。当我在 PP 中按“运行”时，它不起作用，因为 argv 要求您在启动脚本时提供一个参数：python Ex16.py Python.txt

当我启动 Python.exe（在 PP 中是 Portable-Python.exe）时，我得到标准的 Python 提示符 >>>，但无论我输入什么，我都会收到相同的错误消息：

```
 File "<stdin>", line 1
    with whatever I've just tried repeated back to me with the marker to 
    indicate where the problem is. (has not been helpful so far)

    SyntaxError: invalid syntax 
```

我尝试在 >>> 提示符下键入以下内容： `python Ex16.py Python.txt`,, `Ex16.py Python.txt`,, `"%PATH&\Ex16.py" "%PATH%\Python.txt" (with the actual filepaths)`,, `print 'hello world'`

我只是一遍又一遍地收到相同的无效语法错误。即使是基本的打印命令也返回了无效的语法错误。唯一触发不同错误的是我尝试了整个文件路径的错误。那个返回：

```
 File "<stdin>", line 1
    SyntaxError: (unicode error) 'unicodeescape' codec can't decode bytes in 
    position 2-3: truncated \UXXXXXXXX escape 
```

是的，我已经用谷歌搜索了这两个错误。我读到有时问题不是将退格键加倍，所以我也尝试了，将两个 \ 放在两个文件路径中之前只有一个的位置。我什至尝试`— # -*- coding: utf-8 -*-`在脚本的开头放置一些 unicode 错误。这与完整的文件路径一起导致了前面提到的相同的 unicode 错误。

是的，我已经检查了我的代码是否与练习中的代码相匹配。
是的，这适用于非 PP。

所有这一切让我相信问题可能出在我试图在 PP 中运行脚本的方式上（但为什么`print`不起作用？），但我不知道我做错了什么。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T15:22:33.183

`print`是 Python 3 中的一个函数：

```
print('my string with content and the like') 
```

它不再被支持为“声明”。您可能想查看[从 python2.x 更改为 python3.x 的内容列表](http://docs.python.org/3.0/whatsnew/3.0.html)（存在许多不兼容性）。此外，您最好找到使用 Python3 的教程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T15:26:47.690

您必须输入：

```
Portable-Python.exe Ex16.py Python.txt 
```

在您的命令提示符下。要获得命令提示符，请按 WindowsKey-R，然后键入“cmd”并按 Enter。您现在应该查看类似`c:\>`. `cd`使用命令导航到您的便携式 python 安装。

# c# - 如何从linq C#中的字符串中获取第一个数字

> ID：15551504
> 
> 赞同：0
> 
> 时间：2013-03-21T15:20:44.220
> 
> 标签：c#, linq, linq-to-entities

我需要从字符串中取第一个数字，例如

```
"12345 this is a number " => "12345"
"123 <br /> this is also numb 2" => "123" 
```

等等

为此，我使用 C# 代码：

```
 string number = "";
    foreach(char c in ebayOrderId)
    {
        if (char.IsDigit(c))
        {
            number += c;
        }
        else
        {
            break;
        }
    }
    return number; 
```

怎么可能通过 LINQ 做同样的事情？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T15:22:19.093

你可以试试[`Enumerable.TakeWhile`](http://msdn.microsoft.com/en-us/library/bb534804.aspx)：

```
ebayOrderId.TakeWhile(c => char.IsDigit(c)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T15:24:10.467

您可以使用 LINQ[`TakeWhile`](http://msdn.microsoft.com/en-us/library/bb534804.aspx)获取数字列表，然后`new string`获取字符串编号

```
var number = new string(ebayOrderId.TakeWhile(char.IsDigit).ToArray()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:22:32.917

使用正则表达式

```
Regex re=new Regex(@"\d+\w"); 
```

尝试在[http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx测试这是否有效](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx)

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T15:49:49.167

我会改进@David的回答。`(\d+)[^\d]*`: 一个数字后跟任何不是数字的东西。

您的号码将在第一组：

```
static void Main(string[] args)
{
    Regex re = new Regex(@"(\d+)[^\d]*", RegexOptions.Compiled);
    Match m = re.Match("123 <br /> this is also numb 2");

    if (m.Success)
    {
        Debug.WriteLine(m.Groups[1]);
    }
} 
```

# java - Java Swing 在单击我要删除的 jpanel 中存在的 Jbutton 时删除 Jpanel

> ID：15551515
> 
> 赞同：1
> 
> 时间：2013-03-21T15:21:29.090
> 
> 标签：java, swing

我正在使用 Netbeans 创建一个 GUI，我的问题是“如何删除 jpanel”... 存在的层次顺序 Jframe->Jscrollpane->Jpanel->Jbutton。通过单击 Jbutton 我想删除 jpanel 的所有组件，包括 Jbutton（我正在单击）和面板本身。请帮忙。紧急。谢谢提前

-Sayantan

```
private void b4ActionPerformed(java.awt.event.ActionEvent evt) {                                   
final JPanel jp;
JTextField tf,of1,of2,xf,yf;
int i=1;
int m=(int)sp3.getValue();
JButton jb;
jp=new JPanel();
//jp.setLayout(new GridBagLayout());
 DesignGridLayout layout = new DesignGridLayout(jp); 
  jsp2.getViewport().add(jp);  
   while(i<=m){
     tf=new JTextField(5);
     of1=new JTextField(5);
     of2=new JTextField(5);
    layout.row().grid(new JLabel("Type:")).indent(9).add(tf).grid(new     JLabel("Length:")).indent().add(of1).grid(new JLabel("Breadth:")).indent().add(of2).empty();
     fields1.add(tf);
     fields1.add(of1);
      fields1.add(of2);        
       xf=new JTextField(5);
     yf=new JTextField(5);
  layout.row().grid(new JLabel("X-axis:")).indent(9).add(xf).grid(new JLabel("Y-axis:")).indent().add(yf).empty(2);
      fields1.add(xf);
      fields1.add(yf);
      i++;
  }
  jb=new JButton("Submit");
  jb.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent e)
        {
        for(JTextField field: fields1){
        String s=field.getText();
        lbr.setText(lbr.getText()+s);
        }
         lb3.setVisible(false);
       sp3.setVisible(false);
        b4.setVisible(false);
       //jp.setVisible(false);
       //jp.removeAll();
      // jp.revalidate();

      //jp.repaint();

      // jsp2.remove(jp);
      //jsp2.revalidate();
      //jsp2.repaint();
      }
    });
    layout.emptyRow();
    layout.row().right().add(jb);
   jp.revalidate();
   jp.repaint();
   // jsp2.revalidate();
   //jsp2.repaint();
   } 
```

注意：我使用的是 DesignGridLayout 包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:29:33.860

这有效：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class ScratchSpace {

    public static void main(String[] args) {
        final JPanel panel = new JPanel();
        panel.setOpaque(true);
        panel.setBackground(Color.YELLOW);
        panel.add(new JButton(new AbstractAction("Kill me") {
            @Override
            public void actionPerformed(ActionEvent e) {
                panel.removeAll();
                panel.revalidate();
                panel.repaint();
            }
        }));

        final JFrame frame = new JFrame();
        frame.setContentPane(panel);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:39:13.310

> 我想删除 jpanel 的所有组件，包括 Jbutton（我在其上单击）和面板本身。

然后你需要类似的代码：

```
JButton button = (JButtton)event.getSource();
JPanel grandparent = button.getParent().getParent();
grandparent.removeAll();
grandparent.revalidate();
grandparent.repaint(); 
```

尽管我质疑任何我看到`removeAll()`. 您可能会考虑使用[Card Layout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)。

# jquery - 如何为 :not() 选择所有直系子级

> ID：15551519
> 
> 赞同：0
> 
> 时间：2013-03-21T15:21:37.070
> 
> 标签：jquery

如果我有以下 html，我如何使用 Jquery 仅选择第一级子级并应用 :not to them

```
<div id="top">
    <span>select me</span>
    <a>select me</a>
    <div>
        <span>not this</span>
        <a>not this</a>
    </div>
    <div class="not-this">not this</div>
</div> 
```

jQuery：

```
jQuery('#top>:not(.not-this)'); // errors due to the >
jQuery('#top:not(.not-this)');  // selects the second level children. 
```

它需要与用于孩子的标签无关。

编辑添加：也尝试过

```
jQuery('#top>*:not(.not-this)');  // selects the second level children. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:24:00.157

`jQuery('#top>:not(.not-this)')`实际上应该可以正常工作。 [http://jsfiddle.net/Entxc/](http://jsfiddle.net/Entxc/)

另一种选择是：

```
$("#top").children().not(".not-this") 
```

[http://jsfiddle.net/Entxc/1/](http://jsfiddle.net/Entxc/1/)

# ios - 如何在 Mobile-Safari 上以全屏模式隐藏后使 Safari-Bars 可见

> ID：15551521
> 
> 赞同：1
> 
> 时间：2013-03-21T15:21:39.583
> 
> 标签：ios, html, ipad, mobile-safari

我将在我的 ipad 上使用 MobileSafari 的内置查看器显示一些文档（.pdf .docx .xls ...）。

主页有这个`<meta name="apple-mobile-web-app-capable" content="yes">`以全屏模式隐藏 SafariBars。一切正常。

现在我将在新窗口中显示文档`window.open("test.pdf")`。问题是，我无法关闭窗口，因为状态栏是隐藏的。

是否有机会使酒吧可见或关闭/返回事件等？

# magento - 如果“使用平面目录类别”设置为“是”，为什么 Magento 目录/类别模型不保存类别的数据？

> ID：15551522
> 
> 赞同：2
> 
> 时间：2013-03-21T15:21:40.223
> 
> 标签：magento, magento-1.7

我正在编写一个 Magento 模块来管理具有超过 3.5K 类别的商店的主菜单中的目录类别。出于这个原因，我将“**使用平面目录类别**”设置为“**是**”。

即使我将“**使用平面目录类别**”设置为“**否**”，它也无法使用 magento 模型设置/更新类别的数据（未发现错误或异常）。

```
$category = Mage::getModel('catalog/category');
$category = $category->setStoreId($storeId);
$category->load($id);
$category->setData('include_in_menu', 1);
$category->save(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T02:33:06.220

出于某种原因，这似乎对我不起作用，除非我禁用平面目录类别

```
 System / Configuration / (CATALOG) Catalog / (Frontend) Use Flat Catalog Category 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-23T09:53:30.767

我找到了这个问题的解决方案：

当 Magento 配置为使用平面类别时（“**使用平面目录类别**”设置为“**是**”），它将需要重新索引类别上的任何更新。

如果保存的数据似乎没有出现在前端，那么很可能您需要这样做：

在后端，打开**System** -> **Index Management** 选择“ **Category Flat Data** ”并将索引模式更改为“ **Update on Save** ”。或单击该选择的“**重新索引数据**”链接。

# python - 在没有命令行的情况下使用 Py2Exe

> ID：15551527
> 
> 赞同：1
> 
> 时间：2013-03-21T15:21:51.420
> 
> 标签：python, executable, py2exe

是否可以在不从命令行调用 py2exe 的情况下使用 py2exe 编译 python 脚本？

```
>Python setup.py py2exe 
```

我想从脚本中运行它，但还没有找到这样做的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:53:58.673

在 setup.py 的开头

```
import sys

if len(sys.argv) == 1:
    sys.argv.append("py2exe") 
```

这样，如果 setup.py 在没有 args 或双击的情况下被调用，它将开始打包

# scala - 在元组中使用 FirstOption monoid 实例

> ID：15551529
> 
> 赞同：2
> 
> 时间：2013-03-21T15:21:52.780
> 
> 标签：scala, scalaz

是否可以转换`(Option[Int], Option[String])`为`(FirstOption[Int], FirstOption[String])`? 比`x=> (x._1.first, x._2.first)`?

在我看来，应该有办法做到这一点，但我找不到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T11:35:50.743

一种方法可能是使用 Bifunctor 实例：

```
scala> val t = (Option(1), Option("str"))
t: (Option[Int], Option[java.lang.String]) = (Some(1),Some(str))

scala> import scalaz._, Scalaz._, Tags._
import scalaz._
import Scalaz._
import Tags._

scala> t.bimap(First, First)
res0: (scalaz.package.@@[Option[Int],scalaz.Tags.First], scalaz.package.@@[Option[java.lang.String],scalaz.Tags.First]) = (Some(1),Some(str)) 
```

一种更惯用的方式（好吧，一种更通用的方式：适用于任何元组、三元组等）可能是使用 shapeless[将](https://github.com/milessabin/shapeless)您的元组转换为`HList`，然后应用自然转换`Option[A] ~> Option[A] @@ First`。这是一个粗略的实现：

```
scala> import scalaz._, Scalaz._, Tags._
import scalaz._
import Scalaz._
import Tags._

scala> import shapeless._, Tuples._, Nat._
import shapeless._
import Tuples._
import Nat._

scala> val t = (Option(1), Option("str"))
t: (Option[Int], Option[String]) = (Some(1),Some(str))

scala> object optionToFirstoption extends (Option ~> FirstOption) {
     |   def apply[A](fa: Option[A]): Option[A] @@ First = First(fa)
     | }
defined module optionToFirstoption

scala> t.hlisted.map(optionToFirstoption).tupled
res1: (Option[Int] with scalaz.Tagged[scalaz.Tags.First], Option[String] with scalaz.Tagged[scalaz.Tags.First]) = (Some(1),Some(str)) 
```

# c++ - 获取项目中每个文件包含的所有头文件列表

> ID：15551530
> 
> 赞同：0
> 
> 时间：2013-03-21T15:21:55.583
> 
> 标签：c++, gcc, header, include, g++

我需要查看每个文件中的所有包含，只是没有文件名的 -H 给了我标题名称，但我不明白什么文件包含它们，这就是想要的。

我也尝试了 -M 和 -MF，但在日志文件中我只有一个 .o 的信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:28:05.753

`gcc -H somefile.c`显示 包含的文件`somefile.c`，根据嵌套`#include`的 s 缩进。关于为什么每个文件都包含特定的标题，您必须询问程序员。

# javascript - IE js通过自定义函数排序数组不起作用

> ID：15551531
> 
> 赞同：3
> 
> 时间：2013-03-21T15:22:00.283
> 
> 标签：javascript, internet-explorer

我在 js 中有简单的自定义排序功能：

```
function compareDesc(a, b) {
    return a.value < b.value;
} 
```

然后我试图对字典数组进行排序：

```
var test = [];
test.push({value: 0, foo: "bar"});
test.push({value: 250, foo: "bar"});
test.push({value: 3, foo: "bar"});
test.sort(compareDesc);
alert(test[0].value);
alert(test[1].value);
alert(test[2].value); 
```

它适用于我得到的 Chrome 和 Firefox：

```
250
3
0 
```

但在所有版本的 IE 中，我得到：

```
0
250
3 
```

所以排序不起作用。任何想法为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T15:27:24.307

最好返回 1、0 和 -1 而不是只返回`true`and `false`：

```
function compareDesc(a, b) {
    if (a.value < b.value){
        return 1;
    }
    else if(a.value > b.value)
    {
        return -1;
    }
    return 0;
} 
```

这是一个例子：http: [//jsfiddle.net/2wwBF/2](http://jsfiddle.net/2wwBF/2)

PS JS 文档中的 sort 函数示例提出了以下方式：

```
function compareDesc(a, b) {
    return a.value - b.value
} 
```

# cron - cron 一次更高优先级的作业异常

> ID：15551532
> 
> 赞同：2
> 
> 时间：2013-03-21T15:22:08.207
> 
> 标签：cron, crontab, jobs, at-job

有没有办法告诉 cron 如果同时有更高优先级的作业，它应该只执行更高优先级的作业？

例如：

```
0 12 * * * ~/ring_a_bell.sh # mplayer bell.wav 
```

将是标准振铃。但是只有一次，例如在我生日那天，我不想让它响铃_a_bell.sh，而是玩_a_birthday_mellody.sh：

```
0 12 21 3 * ~/play_a_birthday_mellody.sh # mplayer birthday.wav
0 12 * * * ~/ring_a_bell.sh # mplayer bell.wav 
```

我读到 at-job 可以做这种工作，但问题是两者都会`cron`同时`at`执行这项工作。这听起来不太好。有没有办法告诉 cron 检查哪个优先级更高并且只执行其中一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:49:28.210

据我所知，cron 并不那么聪明。我可以想到一种在 cron 中编写逻辑代码的简单方法，但这并不是那么好。

```
59 11 21 3 * ln -s ~/play_a_birthday_mellody.sh ~/script_which_plays_stuff.sh
5  12 21 3 * ln -s ~/ring_a_bell.sh ~/script_which_plays_stuff.sh
0  12 * * * ~/script_which_plays_stuff.sh 
```

并作为一次性设置，创建`~/script_which_plays_stuff.sh`为符号链接`~/ring_a_bell.sh`

无论如何，使用 cron 的传统方式是运行另一个脚本，您可以在其中编写逻辑代码。

# algorithm - 矩阵乘法的最佳括号

> ID：15551533
> 
> 赞同：0
> 
> 时间：2013-03-21T15:22:08.380
> 
> 标签：algorithm, dynamic-programming, matrix-multiplication

语句是这样的（这种情况发生在选择所有矩阵对中的哪一个被括号括起来以获得最佳矩阵乘法时）

`p(n) = Summation of P(k)P(k-n)`是`Ω(2^n)`for`k = 1`和`n - 1`for `n> = 2`。

`p(n)`是交替括号的组合数。

说`p(3) = A1(A2*A3)`或`(A1*A2)A3`或`(A1*A2*A3)`。

`k`: 分割值。

`n`: 矩阵的数量。

我用递归解决了这个方程。

可以说我有四个矩阵`A1,A2,A3,A4`。

可以说`k = 2`，我们有`n = 4`。

`p(4) = p(1)p(3) + p(2)p(2)`

递归求解`p(3)`，`p(2)`我们得到：

`p(4) = p(1)p(3) + p(2)p(2) + p(1)p(1)p(2) + p(1)p(2)p(1) + p(1)p(1)p(1)p(1)`.

这意味着，我们可以`A1A2A3A4`用以下方式加括号：

`p(4) = A1(A2A3A4)`或`(A1A2)(A3A4)`或`(A1)(A2)(A3A4)`或`(A1)(A2A3)(A4)`或`(A1)(A2)(A3)(A4)`。

我的问题是：

如果为了`n = 3` `p(n) = 3`和为了`n = 4` `p(n) = 5`

那怎么来`p(n) = summation of p(k)p(n-k)`的 `Ω(2^n)`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:31:17.167

`p(n)`是加泰罗尼亚数 =`(2n choose n)/(n+1)`并且是`Theta(4^n/n sqrt(n))`（使用斯特林公式），所以是`Omega(2^n)`。

您无法仅`Omega(2^n)`通过检查两个值来确定函数是否存在！

由于与实际的 theta 值相比，您正在寻找的界限是如此微弱，因此可能有一个更简单的证明。

# java - 添加到 ArrayList 后的日期更改

> ID：15551541
> 
> 赞同：0
> 
> 时间：2013-03-21T15:22:26.197
> 
> 标签：java, object, for-loop

我有以下内容：

```
List<ArrayList<AvailablePeriodObj>> outputLists = new ArayList<ArrayList<AvailablePeriodObj>>();

ArrayList<AvailablePeriodObj> partOutputList = new ArrayList<AvailablePeriodObj>();    
DateTime beginCheck = periodsList.get(0).getStart();
DateTime endCheck = periodsList.get(0).getEnd();

for(int i= 0; i< periodsList.size(); i++) {
            AvailablePeriodObj apo = periodsList.get(i);

            if(apo.getStart().equals(beginCheck) && apo.getEnd().equals(endCheck)) { 
                partOutputList.add(apo);
            } else {
                outputLists.add(partOutputList);
                partOutputList.clear();
                beginCheck = apo.getStart();
                endCheck = apo.getEnd();
                partOutputList.add(apo);
            }
            if(i== (periodsList.size() - 1)){
                outputLists.add(partOutputList);
            }

        } 
```

有了这个，我正在为所有开始和日期对制作新列表，我的问题是，在该过程完成后，所有列表中的每个对象都会获得最后使用的开始和日期值。

我想要的结果是多个 ArraLists，具体取决于有多少不同的开始日期对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:28:58.730

不要调用`partOutputList.clear();` 创建新`partOutputList`实例 ( `partOutputList = new ArrayList<AvailablePeriodObj>()`)。

您现在所做的就是将相同的`partOutputList`实例添加到`outputLists`，清除它然后添加最后一个值。

# haskell - Haskell Diagrams：如何使文本更大？

> ID：15551545
> 
> 赞同：5
> 
> 时间：2013-03-21T15:22:29.820
> 
> 标签：haskell, svg, haskell-diagrams

我正在使用**图表**haskell绘图框架。下面的代码旨在生成一个橙色的六边形，上面叠加了文本“(0,0)”。不幸的是，文本很小。我试图通过修改 的大小来使其更大`rect`，但没有运气。

```
import Diagrams.Prelude
import Diagrams.Backend.SVG.CmdLine

diagram = mconcat [ text "(0,0)" <> rect 8 1,
                    hexagon 20 # lw 0.02 # fc orange # rotateBy (1/4) ]

main = defaultMain (pad 1.1 diagram) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T16:37:30.387

正如 hammar 建议的那样，您可以使用`scale`，如下所示：

`(text "(0,0)" <> rect 8 1) # scale 5`

您还可以更改字体大小，例如

`text "(0,0)" # fontSize 5 ...`

# xml - Scala 中的快速结构化数据到文本：JSON 还是 XML，哪个？

> ID：15551551
> 
> 赞同：3
> 
> 时间：2013-03-21T15:22:44.307
> 
> 标签：xml, json, scala, serialization

我有大量数据，一旦经过轻微处理，我想以勉强可读的 ASCII 格式存储。由于数据量大，输入和输出的速度对我来说极其重要。（其中大部分是`Float`数组中的数据，但也会有一些简单的数据结构和简短的描述性文本字符串。Unicode 支持并不重要。）

除了滚动我自己的特殊格式之外，我在 Scala 中的最佳选择似乎是某种 XML 或 JSON 格式。我的主要考虑是：

1.  速度——应该足够快，以免这不是处理中的瓶颈
2.  占用空间小——如果可能的话，我不想添加巨大的依赖项
3.  直截了当——我会要求简单的操作；我不想花很长时间配置或按摩数据或任何东西；只是数据输出，数据输入。（我很高兴将解析的数据打包到我自己的数据结构中；它不必担心。）

哪个库最符合这些标准？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:37:56.557

[Jackson](http://jackson.codehaus.org/)对我来说是一个快速且易于使用的库。您可以将文本解析为 JSON AST，也可以将数据映射到特定于模型的数据结构 -[请参阅此处](http://jackson.codehaus.org/)的更多示例。当然，它也支持将你的数据序列化为 JSON

您可以通过两种方式使 Jackson Scala 变得友好 AFAIK：

*   使用此处找到的 Scala 模块：[Jackson Scala 模块](https://github.com/FasterXML/jackson-module-scala)。这会将 JSON 数据映射到 Scala 特定的数据结构（自动处理案例类、将空值转换为选项等）

*   使用[Jerkson](https://github.com/codahale/jerkson/) - 这是 Jackson 的包装库。它还用于处理 Play Framework 中的 JSON

就个人而言，我使用 Jackson 和 Scala 模块将我的案例类序列化/反序列化为 JSON 并获得出色的结果 - 所以我绝对推荐它。

# windows - MSI 包的预安装脚本

> ID：15551552
> 
> 赞同：1
> 
> 时间：2013-03-21T15:22:48.113
> 
> 标签：windows, vbscript, windows-installer, installation

我创建了一个 .vbs 脚本，它执行一些操作（即关闭一些进程等），然后执行 msi 安装。我想找到一种方法将这个 .vbs 脚本合并到包中，以便用户何时运行 setup.exe 将首先执行该脚本。

这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:25:07.587

将这些操作放在 MSI 中会更好地为您服务，这样它们就可以成为 Windows Installer 事务的一部分。WiX 工具集提供了关闭或重新启动应用程序的自定义操作（请参阅`[CloseApplication][1]`和`[RestartResource][2]`元素），因此很容易解决这些要求。

# javascript - 更改类名时CSS不更改

> ID：15551560
> 
> 赞同：1
> 
> 时间：2013-03-21T15:23:20.607
> 
> 标签：javascript, css, html, media

我正在使用 HTML5 媒体 API 并坚持它的静音属性。我有这个静音按钮，每当我点击它时，我想用它来静音和取消静音特定视频的音频。问题是，只要我将其静音，它就可以工作，但我无法取消静音。类和标题值被正确设置为适当的值，但音量或图标图像没有变化。这是我的 jsfiddle 代码的链接[http://jsfiddle.net/7AS3C/1/](http://jsfiddle.net/7AS3C/1/) 当我将代码上传到 jsfiddle 时，不会发生 CSS 问题。如果有人帮助我使用 javascript，我将不胜感激。

```
<div id="mediaplayer">
    <video id="media-video" controls>
        <source src='http://video.webmfiles.org/big-buck-bunny_trailer.webm' type='video/webm' controls>
    </video>
    <div>
        <div id="media-controls">
            <progress id="progress-bar" min="0" max="100" value="0"></progress>
            <button id='replay-button' class='replay' title='replay' onclick='replayMedia();'>Replay</button>
            <button id='play-pause-button' class='play' title='play' onclick='togglePlayPause();'>Play</button>
            <button id='stop-button' class='stop' title='stop' onclick='stopPlayer();'>Stop</button>
            <button id='volume-inc-button' class='volume-plus' title='increase volume' onclick='changeVolume("+");'>Increase volume</button>
            <button id='volume-dec-button' class='volume-minus' title='decrease volume' onclick='changeVolume("-");'>Decrease volume</button>
            <button id='mute-btn' class='mute' title='mute' onclick='toggleMute();'>Mute</button>
        </div>
    </div>
</div> 
```

这是CSS

```
.unmute {
    width:45px;
    height:48px;
    background:url('mute.png');
    background-position: 0px 0px;
}
.mute {
    width:45px;
    height:48px;
    background:url('unmute.png');
    background-position: 0px 0px;
} 
```

这是我的 javascript

```
muteBtn = document.getElementById('mute-btn');

function toggleMute() {
    if (player.muted = false) {
        changeButtonType(muteBtn, 'mute');
        player.muted = "true";
    } else if (player.muted = true) {
        changeButtonType(muteBtn, 'unmute');
        player.muted = "false";

    } else player.muted = "false";
}

function changeButtonType(buttonType, value) {
    buttonType.title = value;
    buttonType.innerHTML = value;
    buttonType.className = value;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:36:38.120

条件逻辑是分配而不是比较

```
if (player.muted = false) { 
```

应该

```
if (player.muted === false) { 
```

和

```
player.muted = "true"; 
```

应该

```
player.muted = true; 
```

同样适用于错误块

# matplotlib - 图例中的误差线。

> ID：15551561
> 
> 赞同：1
> 
> 时间：2013-03-21T15:23:20.907
> 
> 标签：matplotlib, plot

我正在绘制带有 y 错误的几个数据点，并且我不希望图例中包含错误栏。

```
 p1=ax.errorbar(x,y, yerr=[ydown,yup], color='blue', fmt='s', ecolor='blue')
 p2=ax.errorbar(x1,y1, yerr=[y1down,y1up], color='black', fmt='.', ecolor='black')
 ax.legend([p1,p2],['data1','data2'], loc='upper left', numpoints=1) 
```

我的问题与上一个问题类似： [Matplotlib: Don't show errorbars in legend](https://stackoverflow.com/questions/14297714/matplotlib-dont-show-errorbars-in-legend) 但我还没有找到解决方案。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T15:43:36.410

您可以修改图例处理程序。请参阅[matplotlib 的图例指南](http://matplotlib.org/users/legend_guide.html)。调整你的例子，这可能是：

```
# get handles
handles, labels = ax.get_legend_handles_labels()
# remove the errorbars
handles = [h[0] for h in handles]
# use them in the legend
ax.legend(handles, labels, loc='upper left', numpoints=1) 
```

# c# - WP8 LongListSelector scrollTo() 和分组启用

> ID：15551563
> 
> 赞同：3
> 
> 时间：2013-03-21T15:23:21.747
> 
> 标签：c#, windows-phone-8

我正在使用 a`LongListSelector`来显示对话视图。消息按日期分隔，我没有使用 JumpLists。

`MessageCollection`是一个`ObservableCollection`，其中包含类型的项目`MessageCollectionDay`。每个都`MessageCollectionDay`包含类型的项目`Message`。

完整`MessageCollection`绑定到`LongListSelector`.

每个新项目都手动添加到其相应的`ObservableCollectionDay`.

现在我想`LongListSelector`向下滚动到最新添加的项目。

我试过

```
list.UpdateLayout();
list.ScrollTo(list.ItemsSource[list.ItemsSource.Count - 1]); 
```

但它只是跳到最后一组的顶部，而不是最后一个项目。

有什么方法可以跳转到分组列表中的最后一项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:32:13.103

尝试在列表末尾添加一个小的（高度 = 1）、不可见（不透明度 = 0）的空组并滚动到该组。

# asp.net-mvc - ASP MVC Facebook 应用程序模板 - 每个链接上的整个页面刷新

> ID：15551572
> 
> 赞同：0
> 
> 时间：2013-03-21T15:23:33.807
> 
> 标签：asp.net-mvc, facebook, facebook-c#-sdk

有[这个](http://blogs.msdn.com/b/webdev/archive/2012/12/13/the-new-facebook-application-template-and-library-for-asp.net-mvc.aspx)模板，

如果我去另一个 View ，它会移动到下一个 View ，但整个页面正在刷新......

menining facebook header & facebook right panel 也得到刷新，这使得这个模板

没用，没有应用感。

这是正常行为吗？如果是，我有什么选择？制作“纯”单页网站？

```
<a href="~/Home/Test" >test</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:26:59.137

要防止整个页面被刷新，您有两种选择：

`@Ajax.ActionLink`

或将您的页面放在 iframe 中。

# java - jsp/servlets 中的 Web 应用程序 - 使用 fmt:message 进行本地化

> ID：15551574
> 
> 赞同：1
> 
> 时间：2013-03-21T15:23:42.403
> 
> 标签：java, jsp, servlets, bundle

我正在 Tomcat 7.0 上使用 jsp 和 servlet 编写简单的 www 应用程序。它是多语言的，我想将所有消息外部化以便于翻译。我正在尝试使用 fmt:message 标签来实现这一点。这是我的测试页面：

简单页面.jsp

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>
<fmt:setLocale value="en_US" scope="application" />
<fmt:setBundle basename="localization.message" var="b" />
<html>
<body>
    <fmt:message key="key1" bundle="${b}" />
</body> 
```

message_en_US.properties

```
key1=test 
```

页面输出为：

```
???key1??? 
```

我已将 message_en_US.properties 放入名为“localization”的源文件夹中。我也尝试将它放入 WEB-INF、WebContent 和 src（更改包的基本名称） - 结果是一样的。我很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:40:15.483

如果您将它放在名为的源文件夹中`localization`，则不需要在其前面加上本地化。

```
<fmt:setBundle basename="message" var="b" /> 
```

# java - 为问卷类型的应用程序创建报告文件

> ID：15551577
> 
> 赞同：0
> 
> 时间：2013-03-21T15:23:50.483
> 
> 标签：java, jasper-reports, report, birt

我们有一个应用程序，用户可以在多个页面上回答多个问题。以保险申请为例。用户会被询问个人详细信息、健康状况等。这些问题会根据之前输入的详细信息随时变化。我们需要在最后创建一个包含用户输入的所有信息的 html 文件。现在，创建这个 html 文件的最佳策略是什么？我可以创建一个带有自定义标签的 jsp 文件，该文件可以显示从 db 中提取的数据。但是我们有两个很多条件问题，它变成了维护的噩梦。另外，如果我使用 eclipse BIRT 或 jasper 报告，它会变得更容易吗？

关于要求的一件好事是，最终页面上的界面应该看起来与问题页面上的界面完全相同。因此，我们可以使用的一种策略是捕获每个页面上输入问题和用户信息的 html，将其保存到数据库并在最后一页检索。我想知道是否有人使用这种策略。

我欢迎任何其他关于如何做到这一点的建议。谢谢！

ps - 我知道这真的不是一个编程问题，但我只是希望听到一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:06:08.320

XML 加 XSLT 是动态生成 HTML 的理想选择。您可以将问题和答案直接存储为 XML，或者从您的数据库生成 XML（我还没有这样做，但快速的 Google 显示了许多不同配置的选项）。

如果您的 XML 结构类似于

```
<questionList>
<question>
<identifier>1</identifier>
<questionText>What is your first name?</questionText>
<hasAnswer>true</hasAnswer>
<answer>Mary</answer>
</question>   
<question>
...
</question>
</questionList> 
```

然后你可以使用

```
<xsl:for-each select="questionList/question">
<xsl:if test="hasAnswer=='true'">
<span> <xsl:value-of select="questionText"/></span>
<span> <xsl:value-of select="answer"/></span>
</xsl:if>
</xsl:for-each> 
```

这将遍历您的所有问题，并且仅在有答案时才显示它们。您也可以跳过使用“hasAnswer”标签，只测试“answer”是否为空（通过测试“answer”是否不是 ' '，即空字符串），但我更喜欢上面的选项。您可以使用跨度添加您在问题页面中使用的相同 CSS，或者将所有内容放在一个表格中并使用 td 代替 - 它非常灵活。

在[关于 XSLT 的 w3schools 教程中](http://www.w3schools.com/xsl/xsl_transformation.asp)，您可以阅读如何将 XSLT 样式表附加到 XML 文件，这就像将 CSS 添加到 HTML 一样简单。

当然，我已经在使用 XSLT，如果你喜欢你的锤子，每个问题看起来都像钉子。但我真的认为这是一个简单而轻松的解决方案。

# c# - 带有模板字段的 Gridview

> ID：15551578
> 
> 赞同：-1
> 
> 时间：2013-03-21T15:23:57.850
> 
> 标签：c#, asp.net, gridview

我认为我以错误的方式处理这个问题。所以我决定在[http://msdn.microsoft.com/en-us/library/aa581796.aspx上实现 master details formview 示例](http://msdn.microsoft.com/en-us/library/aa581796.aspx)

所以现在当用户选择一条记录时，它会填充到表单视图中，我添加了一个更新按钮，将表单视图的模式更改为编辑，一切都很好。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:04:55.593

您可以直接在 rowdatabound 上从编辑模板操作控件。就像是...

```
protected void gv_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow && 
    (e.Row.RowState & DataControlRowState.Edit) == DataControlRowState.Edit)
    { 
        DropDownList ddl = (DropDownList)e.Row.FindControl("ddlHours");
        //Manipulate ddl here
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:56:26.707

您是否尝试过在填充下拉列表并通过将所选值与标签匹配来设置所选值时循环数据？

```
//Perform loop here
if (label.text == ddl.SelectedValue)
   ddl.Items.FindByValue(i.ToString()).Selected = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T18:37:48.370

我认为我以错误的方式处理这个问题。所以我决定在[http://msdn.microsoft.com/en-us/library/aa581796.aspx上实现 master details formview 示例](http://msdn.microsoft.com/en-us/library/aa581796.aspx)

# oop - 识别类及其职责的技术

> ID：15551584
> 
> 赞同：1
> 
> 时间：2013-03-21T15:24:05.743
> 
> 标签：oop, architecture, software-design

我正在寻找可以帮助我识别软件系统（项目）中的类（可能还有它们的职责）的方法（技术）。我知道有很多软件设计书籍，但我专门寻找如何知道这应该是系统中的一个类，这些是它的职责。

我想提高我在如何为软件项目列出课程列表方面的技能。阅读规范和需求文档后，是否有技术可以帮助我了解类列表？

请不要在寻找设计模式书籍。我宁愿寻找我可以用来为软件项目设计课程的技术。

我欢迎您的所有贡献、书籍建议、文章指针、教程等。

我用谷歌搜索但找不到任何有意义的东西。

感谢您的帮助。

**添加：：**

另一个同样重要的领域是如何确定类之间的协作。如何确定哪个类需要其他。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T15:26:24.610

通常名词最好从需求转移到类中，动词是方法，形容词是注释。

.ie 汽车启动它的引擎

类：汽车方法：startEngine()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:24:45.643

> **在阅读规范和需求文档后**，是否有技术可以帮助我了解类列表？

不，那太天真了。

每个软件解决方案都是具有两个目的的类的混合：满足“问题域”需求和满足“派生”需求。松散地说，派生需求是您必须执行的所有技术操作的结果，例如保存到数据库。这两者必须相遇/互动是我们拥有设计模式的一个重要原因。

对您而言，诀窍（也称为技术）是专注于您的业务需求并塑造将这些需求表达为属性和方法的类。远离电脑的东西。如果您需要“保存人员数据”，那很好。但不要担心你将*如何*做到这一点。设计以商业术语和概念表达您的“商业模式”。

正如@FridayChlis 所说，一个好的起点是名词== 类，动作动词== 方法。我会添加形容词（经常）==属性。

通过设计这些类如何交互的场景来优化您的设计，即：“a`Person`到`Bank`and `Withdraws` `Money`”。通过这种方式，您可以看到类如何交互，并且会发现设计和需求中的缺陷和不足。根据需要经常重复该过程，直到满足所有业务需求。

研究[UML 图表](http://en.wikipedia.org/wiki/Unified_Modeling_Language)。这是一套用于软件系统设计（和文档！）的标准化图表。警告。不要尝试使用所有可用的图表，甚至是大多数可用的图表。

# c# - 替换方法不起作用c#？这里有什么问题

> ID：15551593
> 
> 赞同：3
> 
> 时间：2013-03-21T15:24:37.973
> 
> 标签：c#, asp.net-mvc-3

我需要一个通过查找文件创建的 url，可以获取该文件的 url，我得到了这个：

```
"C:\\dev\\vsprojects\\MvcApplication4\\MvcApplication4\\hard.txt" 
```

一切都运行良好，当我更换`\\`by时问题就来了，`\`但它不起作用！这是代码：

```
string ruta = "";

foreach (var readText in
    Directory.GetFiles(@"C:\dev\vsprojects\MvcApplication4\MvcApplication4",
    "stringCon.txt", SearchOption.AllDirectories))
{
    ruta = readText;
}

ruta = ruta.Replace(@"\\", @"\");
//in debugger mode says ruta parameter still having
//the \\ and i cant get the content of the txt file
TextReader ReadTXT_file = new StreamReader(ruta);
//and here says that StringConexion is null, why??
string StringConexion = ReadTXT_file.ReadLine();

ReadTXT_file.Close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:27:08.687

好吧，不完全确定您要做什么，但是，您的“替换”代码在循环之外**。**你需要它，否则你只会替换最后一个文件的文本。

```
public class e{

        string ruta = "";

                foreach(var readText in Directory.GetFiles(@"C:\dev\vsprojects\MvcApplication4\MvcApplication4", "stringCon.txt", SearchOption.AllDirectories)) {

                    ruta = readText;
                    ruta = ruta.Replace(@"\\", @"\");
    //in debugger mode says ruta parameter still having the \\ and i cant get the content of the txt file
                TextReader ReadTXT_file = new StreamReader(ruta);
    //and here says that StringConexion is null, why??
                string StringConexion = ReadTXT_file.ReadLine();//

                ReadTXT_file.Close(); 

                }

} 
```

**编辑**

刚刚意识到这甚至不会编译。而你的班级被称为“e”。我对这一切有点害怕，但我还是建议用这种格式来创建类/方法......

```
public class MyProperClassName
{
    public void MyMethodName()
    {
        // do your file text operations here
    }
} 
```

# matlab - 将轴最小值和最大值设置为坚持

> ID：15551595
> 
> 赞同：3
> 
> 时间：2013-03-21T15:24:51.093
> 
> 标签：matlab, axes, subplot

我有一个 (3,4) 子图，每个子图都显示散点图。散点图的范围各不相同，所以我的一些图有轴 x(0-30) 和 y(0-8)，但有些有 x(18-22) 和 y(4-7)。我已将 xlim 设置为 [0 30]，将 ylim 设置为 [0 8]，但这会将我的轴设置为永远不会低于 0、高于 30 等。

如何将每个图的原点设置为“坚持”在（0,0），将 Y 设置为 8，X 设置为 30。

TIA 寻求帮助

* * *

**根据对答案的评论进行更新：**
以下代码仍然存在相同的问题

```
%% plot

for i = 1:num_bins;

h = zeros(ceil(num_bins),1);

h(i)=subplot(4,3,i);

plotmatrix(current_rpm,current_torque)

end

linkaxes(h,'xy');

axis([0 30 0 8]); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T15:38:51.097

要以编程方式设置轴边界，有一些有用的命令：

```
axis([0 30 0 8]);  %Sets all four axis bounds 
```

或者

```
xlim([0 30]);  %Sets x axis limits
ylim([0 8]);   %Sets y axis limits 
```

* * *

为了只设置两个 x 限制之一，我通常使用如下代码：

```
xlim([0 max(xlim)]);  %Leaves upper x limit unchanged, sets lower x limit to 0 
```

这利用了`xlim`s 零输入参数调用约定，它返回当前 x 限制的数组。同样适用于`ylim`.

请注意，所有这些命令都适用于当前轴，因此如果您正在创建子图，您需要在构建图形时对每个轴执行一次缩放调用。

* * *

另一个有用的特性是`linkaxes`命令。这会动态链接两个绘图的轴限制，包括用于编程调整大小命令`xlim`（如平移和缩放）和 UI 操作。例如：

```
a(1) = subplot(211),plot(rand(10,1), rand(10,1)); %Store axis handles in "a" vector
a(2) = subplot(212),plot(rand(10,1), rand(10,1)): %

linkaxes(a, 'xy');

axis([0 30 0 8]);  %Note that all axes are now adjusted together
%Also try some manual zoom, pan operations using the UI buttons. 
```

* * *

查看您的代码，发布编辑，您对该`plotmatrix`功能的使用使事情变得复杂。 `plotmatrix`似乎创建了自己的轴来工作，因此您需要捕获这些句柄并调整它们。（另外，将来`h = zeros(..)`退出循环）。

要获取`plotmatrix`创建轴的句柄，请使用第二个返回参数，如下所示`[~, hAxes]=plotmatrix(current_rpm,current_torque);`：然后收集这些以备将来使用。

最后，`axis`, `xlim`,`ylim`命令都作用于当前轴，（参见`gca`）。然而，`plotmatrix`轴永远不会是最新的，所以`axis`命令并没有影响它们。您可以指定要作用的轴，如下所示 `axis(hAxis, [0 30 0 8]);`：

把这一切放在一起（添加一些变量定义来让你的代码执行），这就是它的样子：

```
%Define some dummy variables
current_rpm = rand(20,1)*30;
current_torque = rand(20,1)*8;
num_bins = 12;

%Loop to plot, collecting generated axis handles into "hAllAxes"
hAllAxes = [];
for i = 1:num_bins;
    subplot(4,3,i);
    [~, hCurrentAxes]=plotmatrix(current_rpm,current_torque);
    hAllAxes = [hAllAxes hCurrentAxes];  %#ok
end
linkaxes(hAllAxes,'xy');    
axis(hAllAxes,[0 30 0 8]); 
```

# java - 如何将一个 ArrayList 拆分并显示为多个表列

> ID：15551599
> 
> 赞同：2
> 
> 时间：2013-03-21T15:24:59.823
> 
> 标签：java, jquery, jsp, servlets, displaytag

我有一个 servlet，它加载一个属性文件并将 100 个测试用例名称的列表包含到一个 ArrayList 对象中。加载 servlet 后转发到 JSP，该 JSP 在表格中显示列表。该列表很长，因此我想要一些优雅的方式将其显示在表格中，以便将其分解为 JSP 上的三或四列。

我现在要做的是将列表分解为 servlet 中的三个子列表：

```
//load properties
Properties props = new Properties();
        ArrayList<String> tests = new ArrayList<String>();
        props.load(getServletContext().getResourceAsStream("/WEB-INF/sailcertifier.properties"));
        Pattern pattern = Pattern.compile("[A-Z]{3}-[0-9]{2}");     
        for (Enumeration<Object> e = props.keys(); e.hasMoreElements();) {
            String key = (String) e.nextElement();
            Matcher m = pattern.matcher(key);
            if (m.find())
                tests.add(key);
        }
        Collections.sort(tests, new TestOrderComparator());
        confBean.setPossibleTests(tests.toArray(new String[tests.size()]));
        int third = tests.size() / 3;
        List<String> testSubset1 = tests.subList(0, third);
        List<String> testSubset2 = tests.subList(third, third * 2);
        List<String> testSubset3 = tests.subList(third * 2, tests.size());
        //store the bean as a request attribute
        request.setAttribute("testSet1", testSubset1.toArray(new String[testSubset1.size()]));
        request.setAttribute("testSet2", testSubset2.toArray(new String[testSubset2.size()]));
        request.setAttribute("testSet3", testSubset3.toArray(new String[testSubset3.size()]));
        request.setAttribute("testsConf", confBean);
        request.setAttribute("certProps", props);
        //forward to tests selection page
        String url = "/sailcertifier/jsp/testsSelection.jsp";
        RequestDispatcher dispatcher = getServletContext().getRequestDispatcher(url);
        response.setContentType("application/javascript");
        try {
            dispatcher.forward(request, response);
        } catch (ServletException e) {
            e.printStackTrace();
        } 
```

在 JSP 中，我像这样遍历子列表（为每种情况添加一些 html 元素）：

```
 <table>
        <tr>
            <td style="width: 33%">
                <table>
                    <tr>
                        <td>
                            <c:forEach var="testName" items="${testSet1}">
                                <tr>
                                    <td><label for="${testName}" id=${testName}Label>${testName}</label></td>
                                    <td><input id=${testName} type="checkbox" value=${testName} name="selTest"></input></td>
                                    <td><input id=${testName}Run type="button" value="Run Test" name="runButtons" /></td>
                                    <td><input id=${testName}ManPass type="button" value="Manual Pass" name="manPassButtons"/></td>
                                    <td><div id=${testName}Status style="width:100px"></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                            </c:forEach>
                            <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
                        </td>
                    </tr>
                </table>
            </td>
            <td style="width: 33%">
                <table>
                    <tr>
                        <td>
                            <c:forEach var="testName" items="${testSet2}">
                                <tr>
                                    <td><label for="${testName}" id=${testName}Label>${testName}</label></td>
                                    <td><input id=${testName} type="checkbox" value=${testName} name="selTest"></input></td>
                                    <td><input id=${testName}Run type="button" value="Run Test" name="runButtons" /></td>
                                    <td><input id=${testName}ManPass type="button" value="Manual Pass" name="manPassButtons"/></td>
                                    <td><div id=${testName}Status style="width:100px"></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                            </c:forEach>
                            <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
                        </td>
                    </tr>
                </table>
            </td>
            <td style="width: 33%">
                <table>
                    <tr>
                        <td>
                            <c:forEach var="testName" items="${testSet3}">
                                <tr>
                                    <td><label for="${testName}" id=${testName}Label>${testName}</label></td>
                                    <td><input id=${testName} type="checkbox" value=${testName} name="selTest"></input></td>
                                    <td><input id=${testName}Run type="button" value="Run Test" name="runButtons" /></td>
                                    <td><input id=${testName}ManPass type="button" value="Manual Pass" name="manPassButtons"/></td>
                                    <td><div id=${testName}Status style="width:100px"></td>
                                    <td></td>
                                </tr>
                            </c:forEach>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table> 
```

我承认使用三个 JSTL for 循环有点难看（还没有想出使用完整的原始列表）。有没有更简洁的方法来处理这个问题，通过使用一些 jquery 插件（如[jquery grid 插件](http://www.trirand.com/blog/)）或其他库（[displaytag](http://www.displaytag.org/1.2/)？）为我平均地处理分成行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T15:31:00.367

打印 a `<tr>`，然后循环遍历数组列表，然后打印 a 中的每个项目并每*n 个*`<td>`项目打印 a ，然后结束数组列表上的循环，最后打印 a 。`</tr><tr>`*`</tr>`*

 *例如，每 3 个项目一个新行：

```
<table>
    <tr>
        <c:forEach items="${items}" var="item" varStatus="loop">
            <c:if test="${not loop.first and loop.index % 3 == 0}">
                </tr><tr>
            </c:if>
            <td>${item}</td>
        </c:forEach>
    </tr>
</table> 
```

[`${loop.index}`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/api/javax/servlet/jsp/jstl/core/LoopTagStatus.html#getIndex%28%29)返回当前迭代轮次的索引。仅当它可被 3 整除且没有余数时`% 3`才会返回`0`（因此，当索引为 0、3、6、9、12 等时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:39:21.393

我不确定我是否理解您的要求，但假设您有 100 个元素的数组，并且您希望 3 列显示它们，因此您可以利用“float”属性来实现这一点：只需制作一个您想要的宽度的 div 和遍历数组制作宽度/ 3的内部div：

```
 <div style="width:600px;margin:auto;">
          <c:forEach var="testName" items="${testSet}">
              <div style="float:left;width:200px;">whatever you want to do with ${testName}</div>
          </c:forEach>
     </div> 
```*

# highcharts - 导入字体和 Highcharts JS 导出

> ID：15551602
> 
> 赞同：3
> 
> 时间：2013-03-21T15:25:06.377
> 
> 标签：highcharts, google-webfonts

是否可以使用 Highcharts 导出导入的字体
（如 Google webfonts 或自己的 .ttf fontface ）？

正如你在这个[小提琴中看到的](http://jsfiddle.net/764pP/)

如果您尝试导出它使用标准字体。

```
title: {
   style: { 
      color: '#000',
      fontFamily : 'Patrick Hand SC'
          }
       } 
```

我也尝试过使用本地 .ttf 字体，但我无法更改导出字体。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T13:59:10.293

首先你应该明白为什么它不起作用。

如果您在网站上使用字体，浏览器会尝试查找在您的计算机上安装或使用@font-face 导入的具有给定名称的字体。

但是，当您导出图表时，Highcharts 会获取 SVG 代码，将其发送到服务器，服务器将 SVG 图像光栅化为 jpg、png 或您要求的任何格式并将其发送回您。

现在的问题是服务器上缺少您的自定义字体，您不能在这里使用@font-face。唯一的方法是在服务器上安装字体，但是由于您使用的是默认的 Highcharts 导出服务器，因此您无法在那里安装任何东西。

您可以做的是设置自己的导出服务器并安装您需要的字体。

# ios - 在 iOS 中存储令牌 ID

> ID：15551604
> 
> 赞同：0
> 
> 时间：2013-03-21T15:25:09.793
> 
> 标签：ios, storage, token

在 ios 开发中，我在应用程序启动时获得令牌 ID。我正在使用 MVC，我必须在其他几个控制器上使用这个 token-id。访问令牌 ID 的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:26:14.303

[共享/单例](http://www.galloway.me.uk/tutorials/singleton-classes/)类将服务于您的目的。

[如何在目标 C 中创建单例类](https://stackoverflow.com/questions/5381085/how-to-create-singleton-class-in-objective-c)

[Objective-C 中的单例共享数据源](https://stackoverflow.com/questions/355449/singleton-shared-data-source-in-objective-c)

# assembly - EAX 最高 16 位

> ID：15551606
> 
> 赞同：1
> 
> 时间：2013-03-21T15:25:17.877
> 
> 标签：assembly, x86, cpu-registers, pci

我想形成一个PCI地址。如何用汇编语言将 16 位写入 EAX（而不是 AX）？示例：写入 0b1000000000000001

```
EAX before
|_____16-bit_____||_______AX_______|
EAX after:
|1000000000000001||_______AX_______| 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T18:24:05.053

有很多方法可以做到，这里有一些。

使用堆栈，不修改任何标志：

```
推入
mov [esp+2],word 0b1000000000000001 ; 一些汇编程序想要单词 ptr
流行音乐

```

向左或向右旋转，不需要堆栈，但修改标志：

```
角色 eax,16 ; 滚/滚
移动斧头，0b1000000000000001
角色 eax,16 ; 滚/滚

```

对于硬编码值（如问题中所示），您还可以使用`and`with `or`/ `xor`/ `add`。对于非硬编码值，您需要将值移到其他寄存器或内存中才能使用此方法：

```
和 eax,0x0000ffff
或 eax,0x80010000 ；或/异或/加

```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T15:38:58.610

无法访问更高的 16 位，但您可以使用一个小技巧：

```
push    ax
mov     ax, 1000000000000001b
shl     eax, 16
pop     ax 
```

这会将高 16 位设置为您想要的任何值，而不会破坏低 16 位。

# c - 在 C 中计算行数并显示结构数组

> ID：15551609
> 
> 赞同：-1
> 
> 时间：2013-03-21T15:25:27.627
> 
> 标签：c

这就是我到目前为止所拥有的。我需要读取文件day.txt，计算文件的行数

```
#include "stdio.h"
#include "stdlib.h" 

#define MAX_LINE_LENGTH 

struct earthquake_t{ 
    float lat;
float lng;
float dep;
float mag;
};
FILE* fid;
int main(void)
{
double lat,lng dep,mag;
double userminlat,userminlng,usermaxlat,usermaxlng,minlat,minlng,maxlat,maxlng,i, ch,line;
struct earthquake_t *earthquake;

fid=fopen("day.txt","r");

while (!feof(fid))
{        /*Need help counting lines*/
    count = fscanf(fid," %lf %lf %lf\n",&lng,&lat,&dep,&mag);
/* count tell you how many of the % fields were matched,
 and you need to make sure all three were found to avoid blank lines*/

    if (count ==3)
    {
        line ++;
    }
}

fseek(fid,1,SEEK_SET);
print("%d\n",sizeof(struct earthquake_t));        
earthquake = (struct earthquake_t *)malloc(sizeof(struct earthquake_t)*line);

for (i=0;i<line;i++)
{        
    fscanf("fid,%lf %lf %lf\n",&lng,&lati,&elevi)
    earthquake[i].lat=lat;
    earthquake[i].lng=lng;
    earthquake[i].dep=dep;
    earthquake[i].mag=mag;

    /*Setting the min and max values for latitude and longatidue*/
    if(earthquake[i].lng >maxlng) 
    {     
        maxlng = earthquake[i].lng;
    }
    if(earthquake[i].lng >minlng)
    {    
        minlng = earthquake[i].lng;
    }
    if(earthquake[i].lat >maxlat)
    {
        maxlat = earthquake[i].lat;
    }
    if(earthquake[i].lat >minlat)
    {
        minlat = earthquake[i].lat;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:13:18.103

I would use `fgets()` to get a whole line from the text file and put it into a string and use `sscanf()` to extract your values.

```
/* count tell you how many of the % fields were matched,
and you need to make sure all three were found to avoid blank lines*/ 
```

The [scanf man page](http://linux.die.net/man/3/scanf) states in part:

**Return Value**

These functions return the number of input items successfully matched and assigned, which can be fewer than provided for, or even zero in the event of an early matching failure.

The value EOF is returned if the end of input is reached before either the first successful conversion or a matching failure occurs. EOF is also returned if a read error occurs, in which case the error indicator for the stream (see ferror(3)) is set, and errno is set indicate the error.

You could check for `line[0] == '\n'` to avoid blank lines.

Hope that helps.

# c# - C# 和 Lotus Notes

> ID：15551612
> 
> 赞同：2
> 
> 时间：2013-03-21T15:25:37.873
> 
> 标签：c#, email, lotus-notes

我希望我能在这方面得到一些帮助。我在网上找到的关于使用 C# 通过 lotus notes 发送电子邮件的所有内容都是关于自动化整个过程，但我想做一些比这更简单的事情（我认为）。当用户点击一个按钮时，我想要程序做的就是在他们的计算机上打开 lotus notes（如果还没有的话），打开一个新的电子邮件窗口，其中电子邮件地址和标题已经填写。然后，用户可以填写正文、抄送和他们想要的任何其他内容，然后单击发送按钮。如果这是一个重复的问题，我很抱歉，但我似乎找不到任何东西。谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:42:39.860

您现在可以使用超链接的 mailto: 协议执行此操作，前提是在客户端上注册了 Lotus Notes 以处理它们。如果它是主要的邮件客户端，它可能是这样设置的。

```
<a href="mailto:email@domain.com?subject=Hello%20There"> 
```

或者从 winforms 按钮启动：

```
System.Diagnostics.Process.Start("mailto:email@domain.com?subject=Hello%20There"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:59:14.930

到目前为止，mailto 解决方案是最简单的，但是记录在案......

Lotus Notes 公开了一组 OLE 自动化类，您可以使用它们来做更多的事情，而不仅仅是设置主题。公开类集的根是 Notes.NotesUIWorkspace。您可以在此处找到有关 Notes OLE 自动化的一些文档，并在[此处](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=%2Fcom.ibm.designer.domino.main.doc%2FH_USING_NOTES_CLASSES_IN_VISUAL_BASIC.html)找到有关 NotesUIWorkspace 类的[文档](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=%2Fcom.ibm.designer.domino.main.doc%2FH_NOTESUIWORKSPACE_CLASS.html)。

# php - 维护任务 - 简单的 PHP 文件、微框架或 Symfony2

> ID：15551616
> 
> 赞同：2
> 
> 时间：2013-03-21T15:25:47.223
> 
> 标签：php, symfony, silex, maintainability

我有几个需要更新/重写的维护任务，我不确定要采取的最佳方法。

当前的维护任务是扁平的 PHP 或 Perl 脚本，我可以使用相同的方法，但如果感觉有点随意，并且结构不好，可能会出现大量重复和混乱。

我曾经使用过像 cilex / silex 这样的微框架，因为代码会更加结构化，从原地运行而不是文件系统中的任何地方，可能更容易让其他人接受（在最初的学习曲线之后），供应商可以使用 composer 包含在内，因此您可以访问大量预先存在的捆绑包，而不是重新发明轮子。这种方法感觉好多了，但是如果我曾经在 Symfony2 中重新编写网站，我在 cilex/silex 上编写的任务可以很容易地导入到完整的 Symfony2 项目中。

出于上述原因，我也只是使用完整的 symfony2 项目，但是对于应该相对简单的维护任务来说感觉有点矫枉过正，没有明确的迹象表明很快就会进行站点重建。

微框架感觉是正确的方法，但我不想仅仅因为它而使事情变得更加困难。

有没有其他人遇到过类似的情况和/或可以提供对最佳方法的见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:53:17.800

这完全取决于您想要完成的工作。正如您所提到的，您必须根据不同的参数来决定要做什么。

*   **学习曲线**——无论框架大小，都会有初步的学习曲线来理解结构。你必须让自己适应框架的行为。

*   **性能**——你应该决定你需要的特性，因为如果你真的不想要很多，像*Symphony2这样的重型框架肯定会是一种过度杀伤力。***你为什么要把你的资源浪费在你不想要的东西上？**因此，请选择重量轻但足以完成工作而不会影响性能的东西。

*   **计划**——为未来做计划。可能是像*cilex*这样的轻量级框架暂时就足够了，但将来支持该结构可能会变得困难。另外，如果某个功能不存在，您**可能不得不重新发明轮子**来创建一个。

    有了一个已经包含很多功能的更大的框架和一个很好的社区支持，您将避免浪费时间创建已经存在的东西。

所以请记住这些事情，然后明智地选择正确的步骤。希望有帮助。

# jquery - jQuery在悬停时滚动页面

> ID：15551617
> 
> 赞同：0
> 
> 时间：2013-03-21T15:25:54.977
> 
> 标签：jquery, scroll

[jsFiddle](http://jsfiddle.net/pBLAJ/6/)

**HTML**

```
<div class="next">Next</div>
<div class="prev">Prev</div> 
```

**jQuery**

```
 $(function() {
        $('ul.nav a').bind('click',function(event){
            var $anchor = $(this);
            $('html, body').stop().animate({
                scrollLeft: $($anchor.attr('href')).offset().left
            }, 1000);
            event.preventDefault();
        });
    }); 
```

这个想法听起来很简单，但我根本无法让它发挥作用。我希望能够在下一个或上一个悬停时滚动页面。我可以单击滚动以向下锚定，但这个添加的功能将是完美的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:31:25.740

Just a mockup you need to take care of the edge cases:

```
$(function() {
  $('ul.nav a').bind('click',function(event){
    var $anchor = $(this);
    $('html, body').stop().animate({
      scrollLeft: $($anchor.attr('href')).offset().left
    }, 1000);
    event.preventDefault();
  });
  $('.next').on('mouseenter', rscroll);
  $('.prev').on('mouseenter', lscroll);
  $('.next,.prev').on('mouseleave', function() {
    $('body').stop();
  });

  function rscroll() {
    $('body').animate({
      scrollLeft: '+=25'
    }, 10, rscroll);
  }

  function lscroll() {
    $('body').animate({
      scrollLeft: '-=25'
    }, 10, lscroll);
  }
});
```

```
*{
  margin:0;
  padding:0;
}
.prev, .next{
  color:#fff;
  position:fixed;
  top:200px;
  height:100%;
  text-shadow:1px 1px 1px #000;
}
.prev{
  left:0;
}
.next{
  right:0;
}
body{
  background:#000;
  font-family:Georgia;
  font-size: 34px;
  font-style: italic;
  letter-spacing:-1px;
  width:12000px;
  position:absolute;
  top:0px;
  left:0px;
  bottom:0px;
}
.section{
  margin:0px;
  bottom:0px;
  width:4000px;
  float:left;
  height:100%;
  text-shadow:1px 1px 2px #f0f0f0;
}
.section h2{
  margin:50px 0px 30px 50px;
}
.section p{
  margin:20px 0px 0px 50px;
  width:600px;
}
.black{
  color:#fff;

  background:#000 url(../images/black.jpg) no-repeat top right;
}
.white{
  color:#000;
  background:#fff url(../images/white.jpg) no-repeat top right;
}

.section ul{
  list-style:none;
  margin:20px 0px 0px 550px;
}
.black ul li{
  float:left;
  padding:5px;
  margin:5px;
  color:#aaa;
}
.black ul li a{
  display:block;
  color:#f0f0f0;
}
.black ul li a:hover{
  text-decoration:none;
  color:#fff;
}
.white ul li{
  float:left;
  padding:5px;
  margin:5px;
  color:#aaa;
}
.white ul li a{
  display:block;
  color:#222;
}
.white ul li a:hover{
  text-decoration:none;
  color:#000;
}
```

```
<script src="http://tympanus.net/Tutorials/WebsiteScrolling/jquery.easing.1.3.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="next">NExt</div>
<div class="prev">Prev</div>
<div class="section black" id="section1">
  <h2>Section 1</h2>
  <p>
    MY Spectre around me night and day
    Like a wild beast guards my way;
    My Emanation far within
    Weeps incessantly for my sin.
  </p>
  <ul class="nav">
    <li>1</li>
    <li><a href="#section2">2</a></li>
    <li><a href="#section3">3</a></li>
  </ul>
</div>
<div class="section white" id="section2">
  <h2>Section 2</h2>
  <p>
    ‘A fathomless and boundless deep,
    There we wander, there we weep;
    On the hungry craving wind
    My Spectre follows thee behind.

  </p>
  <ul class="nav">
    <li><a href="#section1">1</a></li>
    <li>2</li>
    <li><a href="#section3">3</a></li>
  </ul>
</div>
<div class="section black" id="section3">
  <h2>Section 3</h2>
  <p>
    ‘He scents thy footsteps in the snow
    Wheresoever thou dost go,
    Thro’ the wintry hail and rain.
    When wilt thou return again?

  </p>
  <ul class="nav">
    <li><a href="#section1">1</a></li>
    <li><a href="#section2">2</a></li>
    <li>3</li>
  </ul>
</div>
```

# git - 获取存储的创建日期

> ID：15551618
> 
> 赞同：290
> 
> 时间：2013-03-21T15:25:55.367
> 
> 标签：git, git-stash

有没有办法知道什么时候创建了一个存储？

`git stash list`仅列出存储，并`git stash show XXXXXX`显示所有文件和更改，但不显示存储创建的**日期**。

* * *

## 回答 #1

> 赞同：447
> 
> 时间：2013-03-21T15:29:06.777

尝试：

```
git stash list --date=local 
```

它应该打印如下内容：

```
stash@{Thu Mar 21 10:30:17 2013}: WIP on master: 2ffc05b Adding resource 
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2016-08-08T09:53:13.700

您可以使用[`--pretty=format`](https://git-scm.com/docs/pretty-formats)来实现这一点。例如，这会生成一个包含相对时间的存储列表：

```
git stash list --pretty=format:"%C(red)%h%C(reset) - %C(dim yellow)(%C(bold magenta)%gd%C(dim yellow))%C(reset) %<(70,trunc)%s %C(green)(%cr) %C(bold blue)<%an>%C(reset)" 
```

`[alias]`我在文件的部分中有这个设置`~/.gitconfig`，这样我就可以将它绑定到一个简单的`sl`命令：

```
[alias]
        co = checkout
        lg = log --graph --pretty=format:\"%Cred%h%Creset -%C(auto)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset\" --abbrev-commit
        rl = reflog --pretty=format:\"%Cred%h%Creset %C(auto)%gd%Creset %C(auto)%gs%C(reset) %C(green)(%cr)%C(reset) %C(bold blue)<%an>%Creset\" --abbrev-commit
        sl = stash list --pretty=format:\"%C(red)%h%C(reset) - %C(dim yellow)(%C(bold magenta)%gd%C(dim yellow))%C(reset) %<(70,trunc)%s %C(green)(%cr) %C(bold blue)<%an>%C(reset)\" 
```

（你可以看到我也有类似的标记`log`和`reflog`）

这是它的样子： [![git 存储列表](../Images/41cebcef000aa6540b8e4b0fbcb2fd2b.png)](https://i.stack.imgur.com/Hrmi6.png)

如果要显示实际日期，而不是相对时间，请替换`%(cr)`为`%(ci)`.

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-03-21T15:37:35.357

`git show stash@{0}`还会打印出日期以及其他信息。

# html - 链接到在 Firefox 中不起作用的 id - 在 Chrome/Safari 中工作

> ID：15551621
> 
> 赞同：1
> 
> 时间：2013-03-21T15:26:00.917
> 
> 标签：html, hyperlink, anchor

我正在尝试链接到 rails 应用程序中另一个页面上的特定 ID。我所针对的 html 标记是：

```
<h3 id="about">About</h3> 
```

当我手动将 localhost:3000/#about 放入浏览器地址栏中时，它会打开到 Chrome 和 Safari 页面中的正确位置。但是当我将该路径粘贴到 Firefox 中时，它似乎停止了——它在第一页的中途打开。然后，如果我在地址栏中再次按键盘上的 Enter 键，它会转到正确的位置。

有什么想法可能导致这种情况吗？好奇我是否遵循了正确的约定并且已经看过这篇出色的文章 - [HTML Anchors with 'name' or 'id'?](https://stackoverflow.com/questions/484719/html-anchors-with-name-or-id) .

任何建议或想法将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:43:53.697

试一试下面给出的锚点，告诉我它是否有效。

```
 <div class="one">   <a href="#details">Click Here To Go There</a> </div>

 <div class="two">   <a name="details">There</a> </div> 
```

您必须相应地定位 div 类。

# java - 在 tomcat 容器中运行 JUnit 测试用例

> ID：15551624
> 
> 赞同：1
> 
> 时间：2013-03-21T15:26:02.217
> 
> 标签：java, unit-testing, junit, junit4, cactus

`findBy`我正在编写一个测试HibernateEnity 方法的JUnit 测试用例。实体从 tomcat 管理的数据源获取它的数据库连接。
JUnit 测试用例：

```
MyHibernateEntity entity = new MyHibernateEntity();

expectedResult = entity.findByFK(dummyFK); 
```

如何在 tomcat 容器中运行测试用例？除了数据源之外，我们没有任何其他 Java EE 容器内组件。这就是为什么我需要一个占用空间最少的框架。到目前为止，我已经尝试过以下操作：

1.  Arquillian - 太复杂而无法实现。很多配置。
2.  Cactus - 它有 3 个类可以扩展。`ServletTestCase, JspTestCase and FilterTestCase`. 不确定哪一个适用于我的情况。
3.  DBUnit - 在`JUnit in Action`. 我不知道它是否适用于容器数据源。

    注意：我理解这个测试用例不是纯粹的单元测试。我在遗留系统中引入 JUnit，没有时间解决集成问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:34:27.747

你可以模拟你的数据源吗？

[https://code.google.com/p/mockito/](https://code.google.com/p/mockito/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-28T11:51:14.807

使用[TomcatJNDI](https://github.com/h-thurow/TomcatJNDI)，您可以从类内部访问所有 J​​NDI 资源，就好像它们将在 Tomcat 服务器中运行一样。要通过 JNDI 查找访问资源，您必须编写如下代码

```
TomcatJNDI tomcatJNDI = new TomcatJNDI();
tomcatJNDI.processContextXml(contextXmlFile);
tomcatJNDI.start(); 
```

# .net - 如何阻止 WPF 应用程序以非交互方式运行？

> ID：15551630
> 
> 赞同：0
> 
> 时间：2013-03-21T15:26:24.507
> 
> 标签：.net, wpf

在开发 WPF 应用程序时，我试图以非交互方式停止应用程序的执行。此应用程序用于用户向 Windows 集群提交作业的环境，有时他们会意外提交 UI 代码。这些实例最终会在服务器上运行，直到有人识别出它们的存在并终止该进程。

[根据多个问题（ #1](https://stackoverflow.com/questions/1188658/how-can-a-c-sharp-windows-console-application-tell-if-it-is-run-interactively)、[#2](https://stackoverflow.com/questions/7397092/is-there-a-programmatic-way-to-detect-if-the-process-can-interact-with-desktop)、[#3](https://stackoverflow.com/questions/1326096/how-to-determine-whether-code-is-getting-executed-in-a-console-app-or-in-a-windo) ）中答案的建议，我实现了以下代码，[`Environment.UserInteractive`](http://msdn.microsoft.com/en-us/library/system.environment.userinteractive.aspx)用于停止非交互式使用：

```
private void Application_Startup (object sender, StartupEventArgs e)
{
    if (Environment.UserInteractive)
    {
        var window = new MainWindow();
        window.Show();
    }
} 
```

使用 Windows 7 任务计划程序进行的快速测试显示该进程仍然处于活动状态！因为无论用户是否登录，任务都设置为运行，所以我在任何地方都看不到 Window 并且不确定是否`Environment.UserInteractive`返回`true`.

那么如何检测 WPF 应用程序是否以非交互方式运行呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:26:24.507

显然，该建议是正确的并且`Environment.UserInteractive` *正在*返回`false`。但是，最终发生的事情是 WPF 调度程序继续运行，而不管窗口是否存在。当您阅读以下注释时，这一点变得显而易见[`Application.ShutdownMode`](http://msdn.microsoft.com/en-us/library/system.windows.application.shutdownmode.aspx)：

> 应用程序仅在调用的`Shutdown`方法时才停止运行。`Application`关闭可以隐式或显式发生，由`ShutdownMode`属性值指定。

为了真正阻止 WPF 进程以非交互方式运行，您必须告诉它停止运行！

```
if (Environment.UserInteractive)
{
    var window = new MainWindow();
    window.Show();
}
else
{
    // This step is important, otherwise the application will continue running
    this.Shutdown(1);
} 
```

一旦你添加了对 的调用[`Application.Shutdown`](http://msdn.microsoft.com/en-us/library/ms597013.aspx)，当以非交互方式运行时，该过程将以一种很好的方式结束！

> 任务计划程序成功完成任务“\RunTest”，实例“{0d4e6506-b12b-4181-8a75-17754ddef81c}”，操作“\\networkshare\path\to\Executable.exe”，返回码为 1。

# javascript - Onclick 文件上传 DOM PHP Jquery

> ID：15551635
> 
> 赞同：0
> 
> 时间：2013-03-21T15:26:31.460
> 
> 标签：javascript, jquery, html, dom, onclick

我正在尝试将文件上传到单击按钮时创建的 PHP 脚本。我才刚开始接触 JavaScript 的前几个小时，我真的不明白 JS v Dynamically Loading HTML 的结构，所以我来了。

单击菜单链接时，它会很好地从另一个文件加载 HTML。加载的 HTML 有一个带有禁用提交按钮的文件上传表单。当该按钮被点击时，我正在尝试向服务器执行 XMLHttpRequest 并上传该文件。我的第一次尝试，它找不到具有该 ID 的 DOM 元素，因为它尚未加载。因此，我将该函数移到了在单击菜单时加载 HTML 的函数中。现在，我没有收到 null 错误，但是当我单击按钮时没有任何反应？为什么提交按钮 onclick 事件没有触发？

加载的 HTML

```
<div id="form-wrapper">
<p>
    Please upload a Material List.
</p>
</br>
</br>
<form id="form" method="post" action="#" enctype="multipart/form-data"> 
    <p>                 
        <label class="label" for="file">Material List</label>               
        <input class="file-input" type="file" name="file" id="file"/>                   
    </p>
</br>
</br>
    <p>
        <input id="submit" value="Upload File" disabled="disabled" type="submit"/>
    </p>
</form>
</div> 
```

这是加载该 HTML 并且应该设置 onclick 侦听器的 JavaScript...

```
$(document).on("click","#mrp-new",function(e){
    $("#container").load("../html/mrp_new_order.html");
    $(document).on("click","#submit",function(e)
    {
        var file = this.files[0];       
        var fd = new FormData();
        fd.append("file", file);        
        var xhr = new XMLHttpRequest();
        xhr.open('POST', '../php/mrp_upload.php', true);        

        xhr.upload.onprogress = function(e)
        {
            if (e.lengthComputable)
            {
                var percentComplete = (e.loaded / e.total) * 100;
                console.log(percentComplete + '% uploaded');
            }
        };

        xhr.onload = function()
        {
            if (this.status == 200)
            {
                var resp = JSON.parse(this.response);
                alert('Server got:', resp);
                /*var image = document.createElement('img');
                image.src = resp.dataUrl;
                document.body.appendChild(image);*/
            };
        };      
        xhr.send(fd);
    }, false);
}); 
```

提前感谢您的帮助！

弥敦道

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:32:28.837

[阅读有关文档就绪的信息](http://api.jquery.com/jQuery.ajax/)- $.ready和 Ajax call with jQuery [here](http://api.jquery.com/ready/)。

加载函数作为第二个参数可以使用加载完成后调用的函数。[关联](http://api.jquery.com/load/)

```
$("#container").load("../html/mrp_new_order.html", function() {
   alert('Load was performed.');
}); 
```

尝试收听表单的提交事件

```
$("#container").load("../html/mrp_new_order.html", function() {
    $('#form').submit(function() {
      alert('Submit button was pressed');
      return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:51:22.907

您不能将 onclick 或任何与此相关的侦听器设置为禁用按钮。我在谷歌搜索了一下之后才发现。

我变了

`<input id="submit" value="Upload File" disabled="disabled" type="submit"/>`

到

`<button id="submit" type="button"/>`

一切都按预期工作。

# php - 需要通过 WSDL 返回对大量数据进行排序

> ID：15551637
> 
> 赞同：0
> 
> 时间：2013-03-21T15:26:43.800
> 
> 标签：php, html, database, arrays, wsdl

我有一个复杂的问题需要一些指导。我们是一家非营利组织，负责认证世界各地的工厂是否符合道德规范。我们有一个 WSDL Web 服务，它返回全球各国认证工厂的名称和联系信息。它接受三个字母的字符串作为参数（即`BGD`孟加拉国、`CHN`中国、`COL`哥伦比亚）。

我设计了一个带有 HTML 选择的页面，以便用户可以选择一个国家并查看工厂列表。我希望能够编写某种过滤器，仅将具有认证工厂的国家/地区放在此列表中，而将那些没有的国家排除在外。

我已经编写了以下代码来完成这项工作，但是它非常缓慢并且确实使网站陷入困境。（为简洁起见，我只包括了前几个国家。整个数组包括大约 210 个国家。此外，该`factCountByCountryID()`函数返回给定国家当前的工厂数量。

```
<?php
ini_set("soap.wsdl_cache_enabled", "0");    
$client = new SoapClient("http://apollov-dev.worlddata.com:8080/WrapSystem/services/FactoriesWS?wsdl",array("trace" => 1,     "exceptions" => 0));

$countryList=array("AFG"=>"Afghanistan","ALA"=>"Aland Islands","ALB"=>"Albania","DZA"=>"Algeria","ASM"=>"American Samoa","AND"=>"Andorra","AGO"=>"Angola","AIA"=>"Anguilla","ATG"=>"Antigua and Barbuda","ARG"=>"Argentina","ARM"=>"Armenia","ABW"=>"Aruba","AUS"=>"Australia","AUT"=>"Austria","AZE"=>"Azerbaijan","BHS"=>"Bahamas","BHR"=>"Bahrain","BGD"=>"Bangladesh","BRB"=>"Barbados","BLR"=>"Belarus","BEL"=>"Belgium","BLZ"=>"Belize","BEN"=>"Benin","BMU"=>"Bermuda","BTN"=>"Bhutan","BOL"=>"Bolivia","BIH"=>"Bosnia and Herzegovina","BWA"=>"Botswana","BRA"=>"Brazil","VGB"=>"British Virgin Islands","BRN"=>"Brunei Darussalam","BGR"=>"Bulgaria","BFA"=>"Burkina Faso","BDI"=>"Burundi","KHM"=>"Cambodia","CMR"=>"Cameroon","CAN"=>"Canada","CPV"=>"Cape Verde","CYM"=>"Cayman Islands");

foreach($countryList as $code=>$country)
{
    $params->countryCd=$code;
    $number=$client->factCountByCountryID($params);
    $factval=$number->factCountByCountryIDReturn;
    if($factval!=0)
    {
        $countriesWithFactories["$code"]="$country";
    }
    else continue;
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T03:27:42.933

如果我们假设您可以修改 Web 服务，那么我认为解决方案非常明显？

您将创建一个名为“getCountriesWithFactories()”的新函数。您可以将此服务添加到 Web 服务并在数据库中运行查询，而不是尝试将其过滤掉客户端（在 PHP 中）。

该调用仅返回任何拥有工厂的国家/地区。编写一个 MySQL 查询（或您正在使用的任何东西）应该很容易做到这一点。

现在它变慢的原因是您正在遍历每个国家并在每个国家/地区进行一次 HTTP 调用。因此，对于每个页面加载，您都会对 Web 服务进行 210 次调用。

如果您可以改为实现 getCountriesWithFactories 方法，则每次加载页面只需调用 1 次。

希望这是有道理的。

# highcharts - 高图。网格线上的标记

> ID：15551642
> 
> 赞同：0
> 
> 时间：2013-03-21T15:26:49.343
> 
> 标签：highcharts, line, axis, marker

我试图在网格线上的 Highcharts 折线图上显示我的标记点。

这就是我所拥有的 ![在此处输入图像描述](../Images/ad38f06bf315f5553153de375eca7ee0.png)

正如您在图片上看到的那样，标记位于垂直网格线的中间，**而不是悬停在网格线中**

有什么办法可以改变这个吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T09:22:49.460

请看示例：http: [//jsfiddle.net/5h9dP/1/](http://jsfiddle.net/5h9dP/1/)

```
xAxis: {
        tickInterval:1,
        tickmarkPlacement: 'on',
        gridLineWidth: 1
    }, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T20:38:36.480

如果您使用类别，请检查您的 tickmarkPlacement 是否设置为“on”而不是“between”

[http://api.highcharts.com/highcharts#xAxis.tickmarkPlacement](http://api.highcharts.com/highcharts#xAxis.tickmarkPlacement)

如果您不使用类别...确保您的数据点和网格线落在相同的数据值上...

# jquery - jQueryUI 可排序 - 在 2 个列表视图之间添加和删除带有图标的项目

> ID：15551646
> 
> 赞同：3
> 
> 时间：2013-03-21T15:27:01.570
> 
> 标签：jquery, html, css, jquery-ui

我是 jQuery 的新手，并且在 jQueryUI 中的可排序选项上苦苦挣扎。

当您单击删除图标时，我希望将 dvd 添加到未选择的区域，并将图标更改为加号 (+)。

当您然后单击未选择区域中的加号图标时，我希望该项目移动到“添加区域”并且图标更改为“bin”

将项目从一个 div 拖放到另一个的原理相同。只需要根据它们所在的 div 来切换图标。

我在这里有一个演示：-

[http://jsfiddle.net/w3vvL/3/](http://jsfiddle.net/w3vvL/3/)

```
$("#gallery").sortable({
   connectWith: "#trash"
   });
   $("#trash").sortable({
   connectWith: "#gallery" 
```

});

任何帮助/指针都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T17:52:45.663

图标的第一个问题是通过使图标依赖于项目所在的容器来解决的。这也使得添加和删除功能更容易实现，因为您不必再​​关心图​​标了。

因此，我`.selected`在您选择的区域中添加了一个类，将链接中的 、 和 类替换了，并`.icon-trash`添加了以下样式（我刚刚从 jquery UI 复制了这些样式）：`.icon-plus``delete``add`

```
.dvdlist a { /* plus */
    background-position: -16px -128px;
}
.selected a { /* trash */
    background-position: -176px -96px;
} 
```

第二个问题由一个简单的点击处理程序解决：

```
$('.delete, .add').on('click', function() {
    item = $(this).parent();
    item.fadeOut(function() {
        if (item.parent().attr('id') == 'trash') {
            $('#gallery').append(item.fadeIn());
        } else {
            $('#trash').append(item.fadeIn());
        }
    });
}); 
```

我更新了你的小提琴：http: [//jsfiddle.net/w3vvL/11/](http://jsfiddle.net/w3vvL/11/)

# c# - 如何防止 DataGridTemplateColumn 基于某些条件进入编辑模式？

> ID：15551651
> 
> 赞同：2
> 
> 时间：2013-03-21T15:27:09.340
> 
> 标签：c#, wpf, wpfdatagrid, datagridtemplatecolumn, editmode

我有一个可编辑的 DataGridTemplateColumn。如果业务对象满足某些标准，我只希望用户能够编辑此列中单元格的内容。假设我的业务对象实现了 INotifyPropertyChanged 并具有三个属性：*Name*、*Department*和*Sales*。 *Name*和*Department*是字符串，*Sales*是双精度数。

我希望用户只有在*部门*等于“零售”时才能编辑*销售值。*这是我可能用来执行此操作的数据网格：

 *```
<DataGrid ItemsSource="{Binding Path=MyTypeCollection}" AutoGenerateColumns="False">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Name" Binding="{Binding Path=Name, Mode=OneTime}" IsReadOnly="True" />
        <DataGridTextColumn Header="Department" Binding="{Binding Path=Department, Mode=OneTime}" IsReadOnly="True" />
        <DataGridTemplateColumn Header="Sales">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <StackPanel>
                        <TextBlock Text="{Binding Path=Sales, Mode=TwoWay}" Visibility="{Binding Path={StaticResource ResourceKey=IsRetail}}" />
                        <TextBlock Text="{Binding Path=Sales, Mode=OneWay}" Visibility="{Binding Path={StaticResource ResourceKey=IsNotRetail}}" />
                    </StackPanel>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
            <DataGridTemplateColumn.CellEditingTemplate>
                <DataTemplate>
                    <StackPanel>
                        <TextBox Text="{Binding Path=Sales, Mode=TwoWay}" Visibility="{Binding Path={StaticResource ResourceKey=IsRetail}}" />
                        <TextBlock Text="{Binding Path=Sales, Mode=OneWay}" Visibility="{Binding Path={StaticResource ResourceKey=IsNotRetail}}" />
                    </StackPanel>
                </DataTemplate>
            </DataGridTemplateColumn.CellEditingTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

我正在使用带有两个 Text 元素的堆栈面板。我在 Text 元素的 Visibility 中使用绑定来切换 Text 元素。如果我有一行的*部门*值不是“零售”，则无论单元格处于显示模式还是编辑模式，我都会在*销售列中显示一个 TextBlock。*

这对我来说似乎是一个笨拙的解决方案。有什么方法可以阻止这些类型的单元格完全进入编辑模式？我只想在*部门*为“零售”的情况下允许编辑模式。这可能吗？

编辑：添加代码。

@雷切尔。感谢您的帮助。我想粘贴我所有的数据网格 XAML 代码，以确保一切正常。

```
<DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Path=Data}">

    <DataGrid.Resources>
        <DataTemplate x:Key="TextBoxTemplate">
            <TextBox Text="{Binding Path=Sales}" />
        </DataTemplate>
    </DataGrid.Resources>

    <DataGrid.Columns>
        <DataGridTextColumn Header="Department" Binding="{Binding Path=Department, Mode=OneTime}" />
        <DataGridTextColumn Header="Name" Binding="{Binding Path=Name, Mode=OneTime}" />

        <DataGridTemplateColumn>
            <DataGridTemplateColumn.CellEditingTemplate>
                <DataTemplate>
                    <ContentControl x:Name="salesControl">
                        <TextBlock Text="{Binding Sales}" />
                    </ContentControl>

                    <DataTemplate.Triggers>
                        <DataTrigger Binding="{Binding Department}" Value="Retail">
                            <Setter TargetName="salesControl" Property="ContentTemplate" Value="{StaticResource TextBoxTemplate}" />
                        </DataTrigger>
                    </DataTemplate.Triggers>
                </DataTemplate>
            </DataGridTemplateColumn.CellEditingTemplate>

            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Sales}" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>

    </DataGrid.Columns>
</DataGrid> 
```

我几乎得到了我想要的地方。当我单击一行`Sales`中的一个值时`Retail`，会出现一个 TextBox，但其中没有值（请参见[此处](http://i.imgur.com/92u3Tw9.png)）。我不确定为什么它没有值，因为 TextBoxTemplate 中的 TextBox 指定了一个绑定。你知道这是为什么吗？

编辑：我注意到此解决方案的另一个问题，我实际上无法编辑销售列中的值。如果我尝试，该值将恢复为原始的预编辑值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:48:52.223

我会使用 a`DataTrigger`来切换属性的值，例如`TextBox.IsReadOnly`根据 Department 是否等于“Retail”

```
<Style ...>
    <!-- Set Default -->
    <Setter Property="IsReadOnly" Value="True" />

    <Style.Triggers>
        <DataTrigger Binding="{Binding Department}" Value="Retail">
            <Setter Property="IsReadOnly" Value="False" />
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

如果您不需要在 DataGrid 中进行任何其他编辑，最简单的方法是`IsReadOnly="True"`在您`DataGrid`的上设置完全禁用编辑，然后`TextBox`在`DataGridTemplateColumn`. 这将摆脱很多额外的 XAML 代码，比如`IsReadOnly="True"`

```
<DataGrid ItemsSource="{Binding Path=MyTypeCollection}" 
          AutoGenerateColumns="False"
          IsReadOnly="True">

    <!-- This could also go in Window.Resources, UserControl.Resources, etc -->
    <DataGrid.Resources>
        <Style x:Key="SalesTextBoxStyle" TargetType="{x:Type TextBox}">
            <!-- Set Default -->
            <Setter Property="IsReadOnly" Value="True" />

            <Style.Triggers>
                <DataTrigger Binding="{Binding Department}" Value="Retail">
                    <Setter Property="IsReadOnly" Value="False" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </DataGrid.Resources>

    <DataGrid.Columns>
        <DataGridTextColumn Header="Name" Binding="{Binding Path=Name}"/>
        <DataGridTextColumn Header="Department" Binding="{Binding Path=Department}" />
        <DataGridTemplateColumn Header="Sales">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBox Text="{Binding Path=Sales}" 
                             Style="{StaticResource SalesTextBoxStyle}" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

如果您确实需要默认的 DataGrid 编辑功能，您仍然可以使用相同的东西，但您只需要一个`TextBox`/`TextBlock`而`DataTemplate`不是`StackPanel`多个对象。

如果您真的希望它在用户无法编辑时显示实际`TextBlock`而不是 a ，您可以使用 a并使用 a 切换它的属性`TextBox``ContentControl``ContentTemplate``DataTrigger`

```
<DataGrid.Resources>
    <DataTemplate x:Key="TextBoxTemplate">
        <TextBox Text="{Binding Path=.}" />
    </DataTemplate>
</DataGrid.Resources>

...

<DataGridTemplateColumn>
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <ContentControl x:Name="salesControl" Content="{Binding Sales}" />
            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding Department}" Value="Retail">
                    <Setter TargetName="salesControl" 
                            Property="ContentTemplate" 
                            Value="{StaticResource TextBoxTemplate}" />
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:01:35.647

您还可以订阅`BeginningEdit`DataGrid 的事件，然后在代码隐藏中添加一个简单的检查。

在 XAML 中：

```
<DataGrid BeginningEdit="DataGrid_BeginningEdit" /> 
```

示例代码：

```
private void DataGrid_BeginningEdit(object sender, DataGridBeginningEditEventArgs e)
{
    RowViewModel VM = (RowViewModel)((DataGrid)sender).SelectedItem;

    if (!VM.IsRetail) { e.Cancel = true; }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T20:36:50.330

我让它使用这个代码工作。我不完全理解它，但它可以按我的意愿工作。谢谢雷切尔！

```
<DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Path=Data}">

    <DataGrid.Resources>
        <DataTemplate x:Key="TextBoxTemplate">
            <TextBox Text="{Binding Path=Text, StringFormat=c0}" />
        </DataTemplate>
    </DataGrid.Resources>

    <DataGrid.Columns>
        <DataGridTextColumn Header="Department" Binding="{Binding Path=Department, Mode=OneTime}" />
        <DataGridTextColumn Header="Name" Binding="{Binding Path=Name, Mode=OneTime}" />

        <DataGridTemplateColumn Header="Sales">
            <DataGridTemplateColumn.CellEditingTemplate>
                <DataTemplate>
                    <ContentControl x:Name="salesControl" DataContext="{Binding Path=.}">
                        <TextBlock Text="{Binding Path=Sales, Mode=TwoWay, StringFormat=c0}" />
                    </ContentControl>

                    <DataTemplate.Triggers>
                        <DataTrigger Binding="{Binding Department}" Value="Retail">
                            <Setter TargetName="salesControl" Property="ContentTemplate" Value="{StaticResource TextBoxTemplate}" />
                        </DataTrigger>
                    </DataTemplate.Triggers>
                </DataTemplate>
            </DataGridTemplateColumn.CellEditingTemplate>

            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Sales, StringFormat=c0}" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>

    </DataGrid.Columns>
</DataGrid> 
```*

# javascript - JavaScript：枚举标志检查

> ID：15551652
> 
> 赞同：0
> 
> 时间：2013-03-21T15:27:14.707
> 
> 标签：javascript, enums

我想检查我的枚举值中是否设置了标志。我的代码有什么问题？

Javascript代码

```
var flags = {
  FOO: 1,
  BAR: 2,
  BAZ: 4,
  FUM: 8,
  ERROR: 65
}

var value = flags.FOO | flags.BAR;

if (value & flags.ERROR){
   alert("ERROR IS SET, but this is not true");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-03T11:04:07.760

首先你的值应该是 n^2：

```
var flags = {
  UNKNOWN: 0, 
  FOO: 1,
  BAR: 2,
  BAZ: 4,
  FUM: 8,
  ERROR: 16
} 
```

那么你的陈述应该是：

```
if ((value & flags.ERROR) == flags.ERROR){
   alert("ERROR IS SET");
} 
```

# java - eclipse：无法完成 GWT 安装

> ID：15551653
> 
> 赞同：0
> 
> 时间：2013-03-21T15:27:18.400
> 
> 标签：java, eclipse, gwt, plugins

(Eclipse Juno 4.2)

我正在使用向导，它在您尝试创建 GWT 用户界面时出现。我第一次运行它时，eclipse中途冻结了，我不得不杀死这个进程。

现在我到了这一点：

[截图](http://s14.directupload.net/images/130321/ndpzvrqj.jpg)。

问题是：Next 和 Finish 按钮都不可点击。只是什么都没有发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:13:08.080

屏幕截图中的向导是安装向导。我最近安装了 GWT，它工作正常。确保您从此处的 4.2 存储库安装：http: [//dl.google.com/eclipse/plugin/4.2](http://dl.google.com/eclipse/plugin/4.2)。在用户界面向导不提示的情况下单独安装它可能会更好。通过单击帮助 -> 安装新软件... -> 添加来安装 GWT，然后添加上面的存储库。

当我安装 GWT 时，我勾选了以下内容：

*   Eclipse 的谷歌插件
*   用于 GPE 的 GWT 设计
*   SDK

...而且这一切都应该在 Juno 4.2 下安装好

# javascript - jQuery 时间错误，12:00 显示为 12

> ID：15551654
> 
> 赞同：0
> 
> 时间：2013-03-21T15:27:19.173
> 
> 标签：javascript, jquery

我有一个自定义脚本，以 HH:MM AM/PM 格式显示几个城市的当前时间。出于某种原因，如果时间是 12:00-12:59 AM/PM，则显示为 12。我不明白它有什么问题，有人能弄清楚吗？

```
$(document).ready(function() {
    function calculateTime(offset) {
        var currentDate = new Date()
        utc = currentDate.getTime() + (currentDate.getTimezoneOffset() * 60000);
        newDate = new Date(utc + (3600000*offset));
        var minutes = newDate.getMinutes();
        if(minutes < 10) {
            minutes = "0" + minutes;
        }
        return (newDate.getHours() === 0) ? 12 : ((newDate.getHours() > 12) ? newDate.getHours() - 12 : newDate.getHours()) + ' : ' + minutes + ' ' + ((newDate.getHours() >  11) ? 'PM' : 'AM');
    }
    function displayTimes() {
        $(".chicago").html(calculateTime("-6"));
        $(".london").html(calculateTime("+0"));`
        $(".shanghai").html(calculateTime("+8"));
        $(".sydney").html(calculateTime("+9"));
    };
    displayTimes();
    window.setInterval(displayTimes, 5000);
}); 
```

我也在考虑调整夏令时，但我认为我应该能够自己解决这个问题（但如果有人知道如何轻松做到这一点，请告诉我！）。

我之前在 Stack Overflow 上得到了一些帮助，所以不管是什么原因导致它可能是我自己没有写的（因此不明白）。关于它为什么不起作用的解释将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:36:36.537

你错过了一些括号，试试这个：

```
return ((newDate.getHours() === 0) ? 12 : ((newDate.getHours() > 12) ? newDate.getHours() - 12 : newDate.getHours())) + ' : ' + minutes + ' ' + ((newDate.getHours() >  11) ? 'PM' : 'AM'); 
```

# android - 在 Cocos2d-x 中加载 Base64 编码的图像

> ID：15551657
> 
> 赞同：5
> 
> 时间：2013-03-21T15:27:23.243
> 
> 标签：android, c++, iphone, ios, cocos2d-x

在`Cocos2d-x`我试图加载一个 base64 编码的图像字符串来创建一个精灵。某处似乎有一个错误，因为 bool ok 总是返回 false。也许有人可以帮助我？

这是我正在使用的代码：

```
std::string source = "data:image/png;base64,iVBORw0K....."

int len = 0;
unsigned char *buffer;

len = base64Decode((unsigned char*)source.c_str(), (unsigned int)source.length(), &buffer);

CCImage* img = new CCImage(); 
bool ok = img->initWithImageData(buffer,len); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T21:05:51.217

@MarkRansom 回答了 OP 的问题：

> 我对 Cocos2DX 一无所知，但我猜你传递给 base64Decode 的字符串需要在前面去除元数据。

# java - Java递归问题迷宫

> ID：15551661
> 
> 赞同：0
> 
> 时间：2013-03-21T15:27:33.003
> 
> 标签：java

我对Java相当陌生，正在尝试用递归解决迷宫。我在下面添加了部分代码。我有一个包含“字段”的二维数组。墙为 1，给出起始坐标和结束坐标。

我有一个问题；

每当路径无法继续且未达到终点时，我想删除路径的位置。我该怎么做呢？

*   我已经尝试为它添加布尔值
*   在递归结束时添加一个 maze[x][y] = '0' (empty)

但我还想不通，也许我做错了。

PS：我在论坛上搜索过，阅读了很多关于递归以及其他人如何解决他们的问题的信息，但我不知道如何修复这一点代码。

-P 代表路径 - 宽度和高度来自 2D 数组，-我从开始 navigation(xstart,ystart) 开始（这就是为什么我需要在找到 B 时尝试新位置（开始）

`navigate(int x, int y) {`

 ````
 if (x < 0 || x > width - 1 || y < 0 || y > height - 1) {
        return;
    }
    if (maze[x][y] == '1') {
        return;
    }
    if (maze[x][y] == 'E') {
        maze[x][y] = 'P';
    }

    if (maze[x][y] == 'P') {
        return;
    }
    if (maze[x][y] == '0') {
        maze[x][y] = 'P';
        return;
    }
    if (maze[x][y] == 'B') {
        maze[x][y] = 'P';
        navigate(x + 1, y);
        navigate(x, y + 1);
        navigate(x - 1, y);
        navigate(x, y - 1);
        return;
    }
    maze[x][y] = 'P';
    navigate(x + 1, y);
    navigate(x, y + 1);
    navigate(x - 1, y);
    navigate(x, y - 1);
} 
````  `打算放下我为使它工作而做的事情。虽然已经有一段时间了，但任何阅读它的人可能会发现它很有帮助。

我刚刚创建了数组和这些数组的数组。在存储每个路径的位置，只需选择一个最大数量，但在理想情况下，您应该为其指定长度行 * 列（因为这是最大长度）。在找到结束后创建一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:39:45.573

尝试添加一个包含特定递归位置的 ArrayList，然后一旦你点击“O”，就通过 ArrayList 并将其上的每个位置设置为最终路径的“F”。然后，在方法结束时，清除所有“P”（可能通过遍历 2D 数组的每个元素）最后，您有一条或多条用 F 表示的路径将您带到终点。

我假设'O'是你的结束位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:03:55.930

您需要的唯一标记是：

```
1 - wall
0 - empty (can use for path)
P - path 
```

现在，让我们从起点开始导航：

```
navigate(xstart, ystart); 
```

我们如何导航？

```
navigate(int x, int y) {

    // Are we there yet?
    if (x == xend && y == yend) {
        // Yay! We're here! And our path is marked with P's
        // However, you're many levels inside the recursion. How to break out?
        // Easiest way - throw an exception, and catch in the original caller
    }

    // Don't step where you're not supposed to
    if (x < 0 || x > width - 1 || y < 0 || y > height - 1) {
        return;
    }
    if (maze[x][y] == '1' || maze[x][y] == 'p') {
        return;
    }

    // OK, we can step through here. Let's mark this place as path
    maze[x][y] = 'P';

    // Now, let's try continuing to neighboring squares
    navigate(x + 1, y);
    navigate(x, y + 1);
    navigate(x - 1, y);
    navigate(x, y - 1);

    // If we're still here, guess this square is not on the path - remove it
    maze[x][y] = '0';
} 
```

*（警告：尚未测试代码，我是 C# 程序员 - 但应该是一样的）*

有趣的测试：

*   如果你改变递归`navigate()`调用的顺序会发生什么？
*   如果只有几堵墙怎么办？这个算法将如何使用空间？

递归很有趣！你可以得到一个真正的 Sack Overflow！`

# jquery - 单击jquery垂直选项卡中的不同选项卡时如何使页面滚动到顶部

> ID：15551662
> 
> 赞同：2
> 
> 时间：2013-03-21T15:27:36.700
> 
> 标签：jquery, tabs, scroll

我是网页设计的初学者。我使用 Jquery 垂直选项卡 ( [http://jqueryui.com/tabs/#vertical](http://jqueryui.com/tabs/#vertical)codes) ) 代码在我的网站中创建了 6 个选项卡。但是，当单击选项卡时，它不会滚动到页面顶部。因此，人们很难阅读每个选项卡的描述和内容。他们必须一直滚动到顶部。

这些是我使用的默认代码。

```
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>

<script>
    $(function() {
        $("#tabs").tabs().addClass("ui-tabs-vertical ui-helper-clearfix");
        $("#tabs li").removeClass("ui-corner-top").addClass("ui-corner-left");
    });
</script> 
```

有人可以告诉我如何添加代码以在单击每个选项卡时使网页滚动回顶部。我将非常感谢您的帮助。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T15:30:46.000

[从源](http://www.w3schools.com/jsref/met_win_scrollto.asp)引用。`The scrollTo(x, y) method scrolls the content to the specified coordinates.`

`scrollTo(0,0)`应该可以完美地满足您的目的。

```
$( "#tabs li" ).click(function() {
   //user clicked on the li
   scrollTo(0,0);
}); 
```

如果需要滚动到元素的开头，首先需要计算该元素相对于文档的偏移量。为此，我们可以使用[.offset() 方法](http://www.w3schools.com/jquery/css_offset.asp)。

```
$("#tabs li").click( function(){
    var tabs_offset = $("#tabs").offset();
    scrollTo(tabs_offset.left, tabs_offset.top);
}); 
```

# sql - Rails：使用 AREL 进行批量属性查询

> ID：15551665
> 
> 赞同：8
> 
> 时间：2013-03-21T15:27:47.017
> 
> 标签：sql, ruby-on-rails, activerecord, arel

我想使用类似的东西`find_in_batches`，但不是对完全实例化的 AR 对象进行分组，而是对某个属性进行分组，比如 id。所以，基本上，混合使用`find_in_batches`and `pluck`：

```
Cars.where(:engine => "Turbo").pluck(:id).find_in_batches do |ids|
  puts ids
end

# [1, 2, 3....]
# ... 
```

有没有办法做到这一点（可能与 Arel），而不必自己编写 OFFSET/LIMIT 逻辑或重复分页宝石，如分页或 kaminari？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:14:32.937

这不是理想的解决方案，但这是一种仅复制粘贴大部分`find_in_batches`但产生关系而不是记录数组（未经测试）的方法 - 只需将其修补到`Relation`：

```
def in_batches( options = {} )
  relation = self

  unless arel.orders.blank? && arel.taken.blank?
    ActiveRecord::Base.logger.warn("Scoped order and limit are ignored, it's forced to be batch order and batch size")
  end

  if (finder_options = options.except(:start, :batch_size)).present?
    raise "You can't specify an order, it's forced to be #{batch_order}" if options[:order].present?
    raise "You can't specify a limit, it's forced to be the batch_size"  if options[:limit].present?

    relation = apply_finder_options(finder_options)
  end

  start = options.delete(:start)
  batch_size = options.delete(:batch_size) || 1000

  relation = relation.reorder(batch_order).limit(batch_size)
  relation = start ? relation.where(table[primary_key].gteq(start)) : relation

  while ( size = relation.size ) > 0    

    yield relation

    break if size < batch_size

    primary_key_offset = relation.last.id
    if primary_key_offset
      relation = relation.where(table[primary_key].gt(primary_key_offset))
    else
      raise "Primary key not included in the custom select clause"
    end
  end
end 
```

有了这个，你应该能够做到：

```
Cars.where(:engine => "Turbo").in_batches do |relation|
  relation.pluck(:id)
end 
```

这可能不是最好的实现（尤其是关于primary_key_offset 计算，它会实例化一条记录），但你得到了精神。

# .net - XMLArrayItem 的 XML 反序列化问题

> ID：15551666
> 
> 赞同：2
> 
> 时间：2013-03-21T15:27:53.197
> 
> 标签：.net, xml-serialization, c#-3.0

我必须反序列化以下 XML：

```
<section>
 <class_id>Cls101</class_id>
 <sect_no>1</sect_no>
 <class_section>class section</class_section>
 <meet_days>
   <day>M</day>
   <day>T</day>
   <day>W</day>
 </meet_days>
</section> 
```

我为此创建了如下类：

```
[Serializable]
[XmlRoot("section")]
public class Section
{
     [XmlElement("class_id")]
     public string ClassId { get; set; }

     [XmlElement("sect_no")]
     public string SectionNo { get; set; }

     [XmlElement("class_section")]
     public string ClassSection { get; set; }

     [XmlArray("meet_days")]
     [XmlArrayItem("day")]
     public List<Days> MeetDays { get; set; }
}

[Serializable]
public class Days
{
    [XmlElement("day")]
    public string Day { get; set; }
} 
```

在反序列化的对象中，我得到`Day`了`null`所有 3 行。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:39:24.090

您没有正确使用[XmlArrayItem](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlarrayitemattribute.aspx)。它指定在反序列化中允许作为项目的类型。

尝试：

```
[XmlArrayItem(typeof(Days))] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:49:55.323

因为`Day`只有一个属性是字符串，所以考虑删除`Day`类并将类更改`Section`为：

```
[XmlArray("meet_days")]
[XmlArrayItem("day")]
public List<string> MeetDays { get; set; } 
```

这样，M、T 和 W 值被映射到字符串而不是`Day`类中的字符串。

# android - Android - 带有 PreferenceFragment 的 PreferenceActivity 中的标题类别

> ID：15551673
> 
> 赞同：6
> 
> 时间：2013-03-21T15:28:08.717
> 
> 标签：android, header, fragment, categories, preferenceactivity

我想显示一个类似于 Android 设置应用程序中的首选项屏幕：使用标题、PreferenceActivity、PreferenceFragment 和标题类别。

我不想在平板电脑上得到这个结果：

![在此处输入图像描述](../Images/acabccb33113ba1f68d53a3d45043262.png)

而这个在智能手机上：

![在此处输入图像描述](../Images/1321a4ee1d2671e697bab51a6cd86deb.png)

如果我只使用基本标题，它可以工作，但如果我尝试添加类别，它可以在智能手机上工作，并在平板电脑上崩溃，我得到异常 "java.lang.NullPointerException: name == null" ：

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to start activity ComponentInfo{fr.ifremer.testandroid/fr.ifremer.testandroid.models.preferences.MainPreferenceActivity}: java.lang.NullPointerException: name == null
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2110)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2135)
    at android.app.ActivityThread.access$700(ActivityThread.java:140)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1237)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4921)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1038)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:805)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException: name == null
    at java.lang.VMClassLoader.findLoadedClass(Native Method)
    at java.lang.ClassLoader.findLoadedClass(ClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:491)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
    at android.app.Fragment.instantiate(Fragment.java:574)
    at android.preference.PreferenceActivity.switchToHeaderInner(PreferenceActivity.java:1222)
    at android.preference.PreferenceActivity.switchToHeader(PreferenceActivity.java:1255)
    at android.preference.PreferenceActivity.onCreate(PreferenceActivity.java:630)
    at fr.ifremer.testandroid.models.preferences.MainPreferenceActivity.onCreate(MainPreferenceActivity.java:19)
    at android.app.Activity.performCreate(Activity.java:5206)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2074)
    ... 11 more 
```

下面是涉及的代码片段。我主要从 Android 设置应用程序源获得它们。

任何的想法 ？

提前致谢

* * *

主要偏好活动：

```
public class MainPreferenceActivity extends PreferenceActivity {

    private static List<Header> _headers;

    @Override
    public void onBuildHeaders(List<Header> headers) {

        _headers = headers;
        loadHeadersFromResource(R.xml.preference_headers, headers);
    }

    @Override
    public void setListAdapter(ListAdapter adapter) {

        if (adapter == null) {
            super.setListAdapter(null);
        } else {
            super.setListAdapter(new HeaderAdapter(this, _headers));
        }
    }
} 
```

首选项片段：

```
public class PreferencesFragment extends PreferenceFragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        String settings = getArguments().getString("settings");

        if (settings.equals("DIVE")) {

            addPreferencesFromResource(R.xml.preference_dive_tile);
        }
        else if (settings.equals("MAP")) {

            addPreferencesFromResource(R.xml.preference_map_tile);
        }
    }
} 
```

首选项标题.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<preference-headers xmlns:android="http://schemas.android.com/apk/res/android" >

    <header
        android:id="@+id/header_section_1"
        android:title="Section 1" />

    <header
        android:fragment="fr.ifremer.testandroid.models.preferences.PreferencesFragment"
        android:summary="DIVE summary"
        android:title="DIVE title" >
        <extra
            android:name="settings"
            android:value="DIVE" />
    </header>
    <header
        android:fragment="fr.ifremer.testandroid.models.preferences.PreferencesFragment"
        android:summary="MAP summary"
        android:title="MAP title" >
        <extra
            android:name="settings"
            android:value="MAP" />
    </header>

</preference-headers> 
```

最后但并非最不重要的一点是 HeaderAdapter ：

```
public class HeaderAdapter extends ArrayAdapter<Header> {

    static final int HEADER_TYPE_CATEGORY = 0;
    static final int HEADER_TYPE_NORMAL = 1;
    private static final int HEADER_TYPE_COUNT = HEADER_TYPE_NORMAL + 1;

    private LayoutInflater mInflater;

    private static class HeaderViewHolder {
        ImageView icon;
        TextView title;
        TextView summary;
    }

    public HeaderAdapter(Context context, List<Header> objects) {

        super(context, 0, objects);

        mInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    static int getHeaderType(Header header) {

        if (header.fragment == null && header.intent == null) return HEADER_TYPE_CATEGORY;
        else return HEADER_TYPE_NORMAL;
    }

    @Override
    public int getItemViewType(int position) {
        Header header = getItem(position);
        return getHeaderType(header);
    }

    @Override
    public boolean areAllItemsEnabled() { return false; /* because of categories */ }

    @Override
    public boolean isEnabled(int position) { return getItemViewType(position) != HEADER_TYPE_CATEGORY; }

    @Override
    public int getViewTypeCount() { return HEADER_TYPE_COUNT; }

    @Override
    public boolean hasStableIds() { return true; }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        HeaderViewHolder holder;
        Header header = getItem(position);
        int headerType = getHeaderType(header);
        View view = null;

        if (convertView == null) {

            holder = new HeaderViewHolder();

            switch (headerType) {

                case HEADER_TYPE_CATEGORY:

                    view = new TextView(getContext(), null, android.R.attr.listSeparatorTextViewStyle);
                    holder.title = (TextView) view;
                    break;

                case HEADER_TYPE_NORMAL:

                    view = mInflater.inflate(R.layout.preference_header_item, parent, false);
                    holder.icon = (ImageView) view.findViewById(R.id.icon);
                    holder.title = (TextView) view.findViewById(R.id.title);
                    holder.summary = (TextView) view.findViewById(R.id.summary);
                    break;
            }

            view.setTag(holder);
        }
        else {

            view = convertView;
            holder = (HeaderViewHolder) view.getTag();
        }

        // All view fields must be updated every time, because the view may be recycled
        switch (headerType) {

            case HEADER_TYPE_CATEGORY :

                holder.title.setText(header.getTitle(getContext().getResources()));
                break;

            case HEADER_TYPE_NORMAL :

                holder.icon.setImageResource(header.iconRes);

                holder.title.setText(header.getTitle(getContext().getResources()));
                CharSequence summary = header.getSummary(getContext().getResources());

                if (!TextUtils.isEmpty(summary)) {

                    holder.summary.setVisibility(View.VISIBLE);
                    holder.summary.setText(summary);
                }
                else {
                    holder.summary.setVisibility(View.GONE);
                }
                break;
        }

        return view;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-28T13:51:10.213

正如bestofbest1所说，问题在于Android试图显示preferences_headers.xml中的第一个元素，该元素不包含片段。

为了解决这个问题，我在 MainPreferenceActivity 的 onCreate 中添加了下面的行（在 super.onCreate 之前）以在使用平板电脑时选择默认片段：

```
if(onIsMultiPane()) getIntent().putExtra(PreferenceActivity.EXTRA_SHOW_FRAGMENT, PreferencesFragment.class.getName()); 
```

我还在 PreferencesFragment 中设置了一个默认片段：

```
String settings = "DIVE";
if(getArguments() != null) settings = getArguments().getString("settings"); 
```

然后是最后一个问题，PreferenceActivity.EXTRA_SHOW_FRAGMENT 没有选择左侧的表头。要在 MainPreferencesActivity 中修复它，请保存对标题的引用（在 onBuildHeaders 中），然后添加：

```
@Override
protected void onResume() {

    // Call super :
    super.onResume();

    // Select the displayed fragment in the headers (when using a tablet) :
    // This should be done by Android, it is a bug fix
    if(_headers != null) {

        final String displayedFragment = getIntent().getStringExtra(EXTRA_SHOW_FRAGMENT);
        if (displayedFragment != null) {
            for (final Header header : _headers) {
                if (displayedFragment.equals(header.fragment)) {
                    switchToHeader(header);
                    break;
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-04T17:18:09.153

我在让 Tim 的解决方案为我工作时遇到了问题（程序仍然会崩溃）。我以不同的方式解决了这个问题，默认情况下只选择第一个非类别标题而不是列表中的第一个。为此，我覆盖了我的`onGetInitialHeader`方法`PreferenceActivity`

```
@Override
public Header onGetInitialHeader() {
    for (int i = 0; i < mHeaders.size(); i++) {
        Header h = mHeaders.get(i);
        if (!isCategory(h)) {
            return h;
        }
    }
}

protected static boolean isCategory(Header h) {
    return h.fragment == null;
} 
```

`mHeaders`只是对保存在调用中的标题列表的引用`onBuildHeaders`。还应该注意的是，这只是 4.3 之前的一个问题，它已经被修复了。希望这可以帮助某人

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T08:03:20.163

也许第一个标题是默认选择的菜单。如果是这样，它应该有片段属性来显示它的右侧。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-10T02:32:36.240

作为 Tim Autin 解决方案的一种更简单的形式，完全禁用多窗格以在平板电脑上生成类似手机的单窗格显示。

```
public class PreferencesActivity extends PreferenceActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        if(onIsMultiPane())
            getIntent().putExtra(PreferenceActivity.EXTRA_NO_HEADERS, true);
        super.onCreate(savedInstanceState);
    }
...
} 
```

# java - xml 文件图像覆盖图像

> ID：15551675
> 
> 赞同：0
> 
> 时间：2013-03-21T15:28:23.100
> 
> 标签：java, android

我想从这里创建一个带有滑动（正面和背景）的 listView：

[https://github.com/47deg/android-swipelistview](https://github.com/47deg/android-swipelistview)

[https://github.com/47deg/android-swipelistview-sample/](https://github.com/47deg/android-swipelistview-sample/)

我创建了一个定义行元素的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>

    <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
             android:layout_width="fill_parent"
             android:layout_height="fill_parent"
        >

    <RelativeLayout 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/front"
            android:tag="front" 
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:background="#ffffff">

            <ImageView
                android:id="@+id/ImageView01"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_centerInParent="true" />

            <TextView
                android:id="@+id/TextView01"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBottom="@+id/ImageView01"
                android:layout_centerHorizontal="true"
                android:textSize="18sp"

                android:textStyle="bold"
                android:inputType="textMultiLine" />

        </RelativeLayout>

    <LinearLayout 
                      android:layout_width="match_parent"
                      android:layout_height="wrap_content"
                      android:orientation="horizontal"
                      android:id="@+id/back"
                      android:background="#e3e3e3"  
                     android:tag="back"
                     android:layout_marginLeft="5dp"
                     android:layout_marginRight="5dp"

                      >

                      <Button
                          android:id="@+id/deleteBtn1"
                          android:layout_width="150dp"
                          android:layout_height="100dp"

                          android:text="Delete" />

                      <Button
                          android:id="@+id/UpdateBtn1"
                          android:layout_width="150dp"
                          android:layout_height="100dp"

                          android:text="Update" />

                  </LinearLayout>    

</FrameLayout> 
```

和列表视图 xml：

```
<?xml version="1.0" encoding="utf-8"?>

   <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/linearLayout1"
        android:orientation="vertical" >

                <EditText android:id="@+id/EditText01"
                                android:layout_height="wrap_content"
                                android:layout_width="fill_parent"
                                android:hint="Search">                               
                </EditText>

    <com.fortysevendeg.android.swipelistview.SwipeListView
        xmlns:swipe="http://schemas.android.com/apk/res-auto"
        android:id="@+id/example_lv_list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:background="@drawable/profile_listview_back"
        android:listSelector="#00000000"
        swipe:swipeActionLeft="dismiss"
        swipe:swipeActionRight="reveal"
        swipe:swipeBackView="@+id/back"
        swipe:swipeCloseAllItemsWhenMoveList="true"
        swipe:swipeFrontView="@+id/front"
        swipe:swipeMode="both" />

    </LinearLayout> 
```

但是，当我运行此列表视图时，它会向我显示前面的背景（我希望只有在我滑动前面时它才会向我显示背面）

我希望删除和更新按钮仅在滑动前面时显示..

我该如何解决？多谢

![在此处输入图像描述](../Images/80325f7791e9aba7f4ecb26c3a4960c1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T07:59:52.817

在您的行布局中，您应该在 RelativeLayout 之前有 LinearLayout

元素的顺序很重要

```
<LinearLayout>

  .... buttons ....

</LinearLayout>

<RelativeLayout>

  .... image and text ....

</RelativeLayout> 
```

# java - HttpUrlConnection addRequestProperty 方法不传递参数

> ID：15551676
> 
> 赞同：7
> 
> 时间：2013-03-21T15:28:23.927
> 
> 标签：java, post, parameters, httpurlconnection

我有一些工作的java代码，它执行以下操作：

```
URL myUrl = new URL("http://localhost:8080/webservice?user=" + username + "&password=" + password + "&request=x");

HttpURLConnection myConnection = (HttpURLConnection) myUrl.openConnection();
myConnection.setRequestMethod("POST");

// code continues to read the response stream 
```

但是，我注意到我的网络服务器访问日志包含所有连接用户的明文密码。我想从访问日志中删除它，但网络服务器管理员声称这需要在我的代码中进行更改，而不是通过网络服务器配置。

我尝试将代码更改为以下内容：

```
URL myUrl = new URL("http://localhost:8080/webservice");

HttpURLConnection myConnection = (HttpURLConnection) myUrl.openConnection();
myConnection.setRequestMethod("POST");
// start of new code
myConnection.setDoOutput(true);
myConnection.addRequestProperty("username", username);
myConnection.addRequestProperty("password", password);
myConnection.addRequestProperty("request", "x");

// code continues to read the response stream 
```

现在访问日志不包含用户名/密码/请求方法。但是，Web 服务现在抛出一个异常，表明它没有收到任何用户名/密码。

我在客户端代码中做错了什么？我还尝试使用“setRequestProperty”而不是“addRequestProperty”，它具有相同的损坏行为。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T15:49:37.753

我实际上[在stackoverflow的另一个问题中找到了答案。](https://stackoverflow.com/a/4206094/1535124)

正确的代码应该是：

```
URL myUrl = new URL("http://localhost:8080/webservice");

HttpURLConnection myConnection = (HttpURLConnection) myUrl.openConnection();
myConnection.setRequestMethod("POST");
myConnection.setDoOutput(true);

DataOutputStream wr = new DataOutputStream(myConnection.getOutputStream ());
wr.writeBytes("username=" + username + "&password="+password + "&request=x");

// code continues to read the response stream 
```

# java - 我可以将单元测试结果验证放在@After 方法中吗？

> ID：15551677
> 
> 赞同：3
> 
> 时间：2013-03-21T15:28:23.670
> 
> 标签：java, unit-testing, junit

我正在为方法的行为编写单元测试，并想**尝试减少我的代码重复**- 我即将再次将测试用例加倍，并且文件变得有点难以查看。

如果有人*真的*感兴趣，[代码就在这里](https://github.com/Bukkit/CraftBukkit-Bleeding/blob/riking/additem/src/test/java/org/bukkit/craftbukkit/inventory/InventoryAddTest.java)（警告未来 - 链接可能不是永久性的）。

现在，我执行以下操作，以略有不同的方式重复了几次：

```
@Test
public void testAdd64OfMax64() {
    // Set up container
    TileEntityChest nmsinv = new TileEntityChest();
    Inventory container = new CraftInventory(nmsinv);
    // Call method
    HashMap<Integer,ItemStack> leftover = container.addItem(new ItemStack(Foo, 64));
    // Set up expected result
    ItemStack[] expected = empty.clone();
    expected[0] = new ItemStack(Foo, 64);
    // Verify result
    assertThat(container.getContents(), is(expected));
    assertThat(leftover, is(Collections.EMPTY_MAP));
} 
```

（注：assertThat 来自`org.hamcrest.Matchers`。）

我知道我可以将“设置容器”并将空数组克隆到 @Before 方法中。

我的问题是，我可以将该`assertThat`方法放入 @After 方法**中并让测试仍然失败**（什么时候应该失败）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:36:07.243

不可以。该`After`方法应该用于在测试运行后释放外部资源。另外，请注意，即使您的`Test`方法引发了您的情况可能不希望出现的异常，它也可以保证运行。

另外，请考虑将来必须维护您的代码的人。通过在方法中验证测试结果，您违反了[PLA](http://en.wikipedia.org/wiki/Principle_of_Least_Astonishment)`After`。没有人预料到！

`checkResults`如果您创建了一个辅助方法，例如在每个方法的末尾`Test`调用以验证您的结果，那会更好。

# android - 如何知道点击的小部件 ID？

> ID：15551679
> 
> 赞同：2
> 
> 时间：2013-03-21T15:28:27.357
> 
> 标签：android, android-intent, android-widget

我已经实现了 a`widget`和`ImageButton`a `TextView`。单击时`ImageButton`启动。`activity`这`activity`将使用用户在活动上写的内容更新小部件文本`EditText`。现在的问题是我只知道如何获取这样的 id：

```
for (int widgetId : allWidgetIds) {
        // Create some random data
        int number = (new Random().nextInt(100));

        RemoteViews remoteViews = new RemoteViews(getApplicationContext()
                .getPackageName(), R.layout.widget_layout);
        Log.w("WidgetExample", String.valueOf(number));

        //Here I should set text from edit text, but I'm using a random for testing.

        remoteViews.setTextViewText(R.id.textView1,
                "Random: " + String.valueOf(number));

        appWidgetManager.updateAppWidget(widgetId, remoteViews);
    } 
```

这段代码显然会改变所有 id 的数据，因为它在一个`for`. 无论如何我可以通过我的意图通过点击的 widgetId ，所以我可以消除它`for`？这是我的widgetProvider：

```
@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {

    // Get all ids
    ComponentName thisWidget = new ComponentName(context, Widget.class);
    allWidgetIds = appWidgetManager.getAppWidgetIds(thisWidget);
    for (int widgetId : allWidgetIds) {

        Intent i = new Intent(context, WidgetSetup.class);
        i.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, allWidgetIds);
        i.setFlags(i.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(i);

        // Create some random data
        int number = (new Random().nextInt(100));

        RemoteViews remoteViews = new RemoteViews(context.getPackageName(),
                R.layout.widget_layout);
        // Set the text
        remoteViews.setTextViewText(R.id.textView1, String.valueOf(number));

        Intent active = new Intent(context, Widget.class);
        active.setAction(ACTION_WIDGET_REFRESH);
        PendingIntent actionPendingIntent = PendingIntent.getBroadcast(context, 0, active, 0);
        remoteViews.setOnClickPendingIntent(R.id.imageButton1, actionPendingIntent);

        active = new Intent(context, Widget.class);
        active.setAction(ACTION_WIDGET_SETTINGS);
        actionPendingIntent = PendingIntent.getBroadcast(context, 0, active, 0);
        remoteViews.setOnClickPendingIntent(R.id.imageButton2, actionPendingIntent);

        appWidgetManager.updateAppWidget(appWidgetIds, remoteViews);
    }
}

@Override
public void onReceive(Context context, Intent intent) {
    if (intent.getAction().equals(ACTION_WIDGET_REFRESH)) {
        //Log.i("onReceive", ACTION_WIDGET_REFRESH);

        Intent i = new Intent(context, MainActivity.class);
        i.setFlags(i.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(i);

    } else if (intent.getAction().equals(ACTION_WIDGET_SETTINGS)) {
        //Log.i("onReceive", AppWidgetManager.EXTRA_APPWIDGET_ID);

        Intent i = new Intent(context, WidgetSetup.class);
        i.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, allWidgetIds);

        //Here I tried to pass the widgetID with no luck.
        //i.putExtra(pass widget id?);

        i.setFlags(i.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(i);

    } else {
        super.onReceive(context, intent);
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T20:16:26.960

有关运行示例，请查看我的[MiniCallWidget](https://bitbucket.org/jholetzeck/minicallwidget-android/src/8e6c325f299775674ec530abb64ee39302cf89ff/src/de/holetzeck/minicallwidget/MiniCallWidget.java?at=default)第 97 行和第 169 行代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:35:19.097

将 Extra 添加到您启动 onClick 并在 for 循环中创建的意图中，以指定正在设置的当前小部件的 ID。

然后从接收活动中的附加项中检索 ID，并在完成后将其传回。然后使用返回的 ID 仅对一个小部件进行更改。

您可以通过使用 if-else 来执行此操作，该 if-else 还检查一个标志，该标志告诉您是否只更新一个小部件。

# html - HTML 和 CSS 中的表格

> ID：15551681
> 
> 赞同：-2
> 
> 时间：2013-03-21T15:28:33.210
> 
> 标签：html, css

我希望这张图片中的表格：[http://postimg.org/image/tlkfdlao3/](http://postimg.org/image/tlkfdlao3/) 像这样对齐：http: [//postimg.org/image/motp2rkit/](http://postimg.org/image/motp2rkit/) 这是我的 Html 代码：

```
<table>
<tr>
    <td width="132px">
            <span>iNotes è qui!</span>
            <br />
            <p id="inotesText">Una nuova app per prendere note in un modo completamente nuovo ed intuitivo!</p>
    </td>
    <td width="52px">
        <img src="images/pencil.png" alt="pencil" />
    </td>
 </tr>
 </table> 
```

和 CSS：

```
#pencil {
padding-left:0px;
width: 52px;
height: 204px;
}

#appStoreAvailable {
padding-top:50px;
width: 149px;
height: 101px;
}

#description1 {
}

#description1 span  {
color:#2d2d2d;
font-size:16px;
}

#inotesText {
text-align: left;
font-weight: 400;
font-size: 13px;
color: #616161;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:17:23.183

例如，您应该使用 li

```
<ul class="yourclass">
<li>
  Yourcontent
</li>
</ul> 
```

这是你能做的最好的布局！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:47:07.460

这是一个粗略的想法，您可以如何使用 CSS 进行布局。意识到这是不完整的，并且没有考虑浏览器的变化。

[http://jsfiddle.net/93TBf/2](http://jsfiddle.net/93TBf/2)

```
.wrapper {
    margin: 30px;
    padding: 15px;
    display: inline-block;
    overflow: hidden;
    background-color: #fff;
    border-radius: 10px;
    box-shadow: 2px 2px 15px #aaa;
    font-family: arial;
}
.header {
    border-bottom: 1px solid #bbb;
    padding: 8px 0;
    overflow: hidden;
}
.icon {
    float: left;
    margin-right: 10px;
}
.item {
    float: right;
    margin-left: 10px;
}

<div class="wrapper">
    <div class="header">
        <img class="icon" src="http://placehold.it/50x50" />
        <strong>iNotes HD</strong>
        <br />Utility
        <button>0,89 $</button>
    </div>
    <div class="body">
        <img class="item" src="http://placehold.it/50x150" />
         <h2>iNotes e qui!</h2>
        Una nuova app per prendere note in un
    </div>
</div> 
```

# python - 我可以使用python中的winsock api吗？

> ID：15551682
> 
> 赞同：1
> 
> 时间：2013-03-21T15:28:34.957
> 
> 标签：python, winsock

我想使用 Winsock`WSAEventSelect`函数等在 python 中使用异步套接字操作。但似乎没有办法从python调用winsock api函数。我错过了什么吗？

为什么它们不可用，即使作为一个模块（如[http://sourceforge.net/projects/pywin32/](http://sourceforge.net/projects/pywin32/)用于许多 windows api 功能）？除了“似乎没有人需要它来实现它”之外，还有其他原因吗？

# sql - 选择具有不同概率的随机行 - SQL

> ID：15551683
> 
> 赞同：4
> 
> 时间：2013-03-21T15:28:49.140
> 
> 标签：sql, sql-server, probability

我想选择具有不同概率列的随机行：

```
ID     Type
Bike   1
Moto   1
Asus   2
Car    1
Apple  2
John   3 
```

如果我这样做，我将有随机概率：

> 按 newid() 从 Items order 中选择 top 1 *

我希望约翰（类型 3）有 70% 的概率获得，类型 1 为 5%，类型 2 为 25%。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T15:35:40.847

我会使用[`RAND()`](http://msdn.microsoft.com/en-us/library/ms177610.aspx)函数而不是`NEWID()`.

使用`RAND()`，我们可以生成一个介于 1 到 100 之间的随机数，然后使用语句根据随机生成的数字`CASE`选择一个。`type`

根据 MSDN：

> `RAND()`返回一个从 0 到 1 的伪随机浮点值，不包含

这意味着乘以`RAND()`100 将得到一个从 0 到 99 的数字。加 1 会将范围更改为 1 到 100。

如果在选择`type`要返回的内容后，您想从中随机选择一条记录，`type`则可以添加一个`SELECT TOP 1`...`ORDER BY NEWID()`以获取该类型的随机记录：

```
DECLARE @Random INT
SET @Random = (RAND() * 100) + 1

SELECT TOP 1 ID, Type
FROM Items
WHERE Type = CASE
  WHEN @Random > 30 THEN 3
  WHEN @Random BETWEEN 6 AND 30 THEN 2
  ELSE 1
END
ORDER BY NEWID() 
```

[在此处查看](http://sqlfiddle.com/#!3/128d2/23)...运行几次以查看结果是否与概率匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:37:57.510

您的意思是整个 type=1 组的概率为 5%，或者您希望 type=1 的每条记录都有 5% 的概率被选中？如果是第二种选择，那么你有 70+15+50=135 = 你不可能做到这一点。如果它是第一个选项，那么您必须进行 2 次抽奖 - 首先是针对一种类型，然后是针对这种类型的一行。

# java - 在客户端逐部分读取文件并通过套接字发送并逐部分打印

> ID：15551687
> 
> 赞同：1
> 
> 时间：2013-03-21T15:28:56.547
> 
> 标签：java, java-io

我想将文件的一部分发送到服务器，它将在服务器屏幕上打印...但是 dos 读取整个输入...请建议我能做什么....有没有其他方法可以将流从套接字读取到零件并将这些零件复制到文件中或在屏幕上打印

**服务器端：**

```
/*Aim:to read file in parts...send part to server...write part in the file..*/
import java.io.*;
import java.net.*;
public class Tser {

    public static void main(String a[])throws IOException{

        ServerSocket sock=new ServerSocket(6000);
        Socket csock=sock.accept();
        DataInputStream dis=new DataInputStream(csock.getInputStream());
        FileWriter fw=new FileWriter("elephant");
        BufferedWriter bw=new BufferedWriter(fw);
        BufferedInputStream br=new BufferedInputStream(dis);
        String mess="";int c;
        byte b[]=new byte[20];
        while(br.read(b,0,20)!=-1)
        {
            for(int i=0;i<20;i++)
                mess+=(char)b[i];
            System.out.println(mess);
            System.out.println("XX");
        }

        //bw.write(mess);
        //System.out.print(mess);
        br.close();
        bw.close();
        dis.close();
        sock.close();
        csock.close();
    }

} 
```

**客户端：**

```
import java.io.*;
import java.net.*;
public class Tcle {

    public static void main(String a[])throws IOException{
        Socket soc=new Socket("localhost",6000);

        FileReader fr=new FileReader("samp1");
        BufferedReader br=new BufferedReader(fr);
        DataOutputStream dos=new DataOutputStream(soc.getOutputStream());
        String hi="";int c;
        char ch[]=new char[20];

        while(br.read(ch,0,20)!=-1)
        {
            hi=String.valueOf(ch);
            dos.writeBytes(hi);
            //System.out.println(ch);
        }

        //br.flush();
        fr.close();
        br.close();
        dos.close();
        soc.close();

    }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T20:00:28.380

正如@EJP 所说，一种简单的方法是使用[InputStream.skip()](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#skip%28long%29)

解决方案可能是创建一种新方法，

```
readBlock(int offset, byte[] buffer, BufferedInputStream bis) 
```

`offset`它从指定的位置读取 buffer.length 个字节`bis`

```
public static int readBlock(int offset, byte[] buffer,
            BufferedInputStream bis) throws IOException {

        bis.skip(offset);
        int numberOfBytesRead = bis.read(buffer);

        return numberOfBytesRead;
    } 
```

所以，你的新`Tser`课程看起来像

```
public class Tser {
    static int BLOCK_SIZE = 20; // only for this example

    public static void main(String a[]) throws IOException {

        ServerSocket sock = new ServerSocket(6000);
        Socket csock = sock.accept();
        DataInputStream dis = new DataInputStream(csock.getInputStream());
        FileWriter fw = new FileWriter("elephant");
        BufferedWriter bw = new BufferedWriter(fw);
        BufferedInputStream br = new BufferedInputStream(dis);
        String mess = "";
        int c;

        byte b[] = new byte[BLOCK_SIZE];
        // we want to read the part contained from byte 10 to 30\. (20 bytes)
        readBlock(10, b, br);
        // beware of the encoding!
        System.out.println(new String(b, "UTF-8"));
        System.out.println("XX");

        // bw.write(mess);
        // System.out.print(mess);
        br.close();
        bw.close();
        dis.close();
        sock.close();
        csock.close();
    }    
} 
```

而且，您可以在客户端中执行相同的操作：

```
public class Tcle {

    public static void main(String a[]) throws IOException {
        Socket soc = new Socket("localhost", 6000);

        FileInputStream fis = new FileInputStream("sample");
        BufferedInputStream bis = new BufferedInputStream(fis);
        DataOutputStream dos = new DataOutputStream(soc.getOutputStream());

        // 64 bytes, starting at 2nd byte, for example.
        byte[] b = new byte[64];
        readBlock(2, b, bis);
        dos.write(b);

        bis.close();
        dos.close();
        soc.close();

    }

} 
```

在此示例中，我们在双方（客户端和服务器）*中进行部分拆分。*

假设该文件`sample`包含以下字符：

* * *

```
12345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890 
```

* * *

**1.（客户端）：**我们从字节 2 开始占用 64 个字节。所以，我们发送：

* * *

```
3456789012345678901234567890123456789012345678901234567890123456 
```

* * *

**2.（服务器端）：**我们从第10个字节开始读取20个字节。（就是这样，它将是原始文件的第74个字节）。因此，输出将是：

```
34567890123456789012
XX 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T23:58:52.273

用于`InputStream.skip()`到达您要开始发送的位置。

如果你使用 an`InputStream`来阅读，你应该使用 an`OutputStream`而不是`Reader`. 相反，如果您使用的是 Writer，则应该使用 来阅读`Reader`，但前提是您知道数据是文本。

# java - 使用 JPA 映射多态列表？

> ID：15551689
> 
> 赞同：3
> 
> 时间：2013-03-21T15:29:01.890
> 
> 标签：java, hibernate, inheritance, jpa, orm

假设我有：

```
//inheritance annotations 
public abstract class Animal {
    private int noOfLegs;
    //...
}

//inheritance annotations 
public class Cat extends Animal {
    //cat stuff
}

//inheritance annotations 
public class Dog extends Animal {
    //dog stuff
}

@Entity
public class House {
    @OneToMany
    @JoinTable(//join stuff
    private List<Animal> animals;
    //hose stuff
} 
```

现在，如果我把猫和狗都放在我的房子里，并坚持我的房子，JPA 是否知道将狗和猫放在它们相应的表中（或使用任何继承映射策略）。查询时也知道如何取回吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:04:02.307

简短的回答是肯定的。但是原生 hibernate 对继承映射的支持比标准 JPA 更强大，并且“每个类层次结构一个表”或“每个子类一个表”映射策略比“每个具体类一个表”策略更适合多态查询和关联。

也可以看看：

*   带有 JPA 映射示例[的相关 SO 问题](https://stackoverflow.com/questions/4265454/hibernate-jpa-inheritance-mapping-of-abstract-super-classes)
*   [休眠继承映射文档](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch10.html)
*   [休眠继承策略文档](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch05.html#d5e3306)

# c# - 混合了xml中的属性和元素

> ID：15551692
> 
> 赞同：0
> 
> 时间：2013-03-21T15:29:10.047
> 
> 标签：c#, xml

我需要在下面的结构中创建一个 xml。

```
<ipaddress> "10.10.10.10" </ipaddress> 
<PipeId pid = "4598702C-691E">testvalue</PipeId> --how to display this?
<name> "testname" </name> 
```

但我真的对 xml 中的第二行感到困惑。怎么能显示出来？

我尝试了下面的代码..但不知道如何将第二行放入 xml..

```
new XElement("StartElement",
new XAttribute("TestAtt", "some & value"),
new XElement("ipaddress", "10.10.10.10"),
new XElement("name", "testname"))); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:33:48.880

如果您只是想构建该元素，则需要：

```
new XElement("PipeId",                       // Name of the element
    new XAttribute("pid", "4598702C-691E"),  // Attribute of the element
    "testvalue")                             // Text content of the element 
```

# ruby-on-rails-3 - 为计费目的设计审计跟踪

> ID：15551693
> 
> 赞同：2
> 
> 时间：2013-03-21T15:29:11.423
> 
> 标签：ruby-on-rails-3, data-modeling, audit, audit-logging

我们正在开发具有类似于 Amazon DynamoDB 定价模型的 Rails 应用程序（即，灵活地提供您需要的东西）。为了简单起见，假设您可以配置：

1.  用户数
2.  您可以创建的文档数量

# 要求

简而言之，您根据您的配置付费。我们的具体要求如下：

1.  您根据当月的最高金额支付月费。如果你3号升级到1000个用户，10号降级到500个，你就为1000个用户支付一整个月的费用。
2.  您可以随时升级。
3.  您可以每天降级一次。

（乍一看这可能听起来不公平，但我们在这里分配了一些重要的资源。）

我正在寻找一种方法来设计一个数据模型，它可以做我们想要的，而不会妨碍太多。

# 我考虑过的事情

## 审计宝石

据我所知，我不能使用像[simple_audit](https://github.com/gtarnovan/simple_audit)或[paper_trail](https://github.com/airblade/paper_trail)这样的宝石。

它们在数据库中存储序列化的模型更改。这对于撤消和版本控制非常有用，但不适用于要求 #1，因为**您无法在日期范围内获取更改然后找到 MAX 值**（无需在 Ruby 中计算大部分）。

## 自制解决方案

我可以想象以下自制的解决方案：一个存储类似记录的数据库表

```
(model, metric, value, time_of_change, user_who_made_the_change) 
```

这使得可以：

*   将所有更改集中在一个地方
*   查询一个日期范围内的最大值（需求#1）
*   查询何时允许下一次更改（要求 #3）

该表将在 ActiveRecord（假定`after_save`）回调中更新，该回调[包含在事务中`save`](http://apidock.com/rails/ActiveRecord/Callbacks/after_save)。

[由于NIH 综合症](http://c2.com/cgi/wiki?NotInventedHere)，我对自制解决方案感到担忧，也许我对审计宝石的担忧完全没有根据。

或者，只是也许，我忽略了一个方面或整个其他解决方案。你怎么看？

# ruby - 在 Nokogiri 对象上使用 ruby “发送”作为 page.send(a) where a="at('div.class-name')"

> ID：15551696
> 
> 赞同：1
> 
> 时间：2013-03-21T15:29:20.683
> 
> 标签：ruby, class, nokogiri, mechanize, send

现在，这是我的 HTML，

```
<div class = 'div-of-all-names'>
  <div class='best-first-name'>
    <span itemprop='name'> Alexander </span>
  </div>
</div> 
```

我的 Ruby 程序中有这个哈希，

```
URL = "http://www.xxx.com/xxxxxxxxxxxxxxxx/xxxxxxxxxxx/xxxxxxxx"
agent = Mechanize.new
page = agent.get(URL)

patterns = {1 => ['at("div.div-of-all-names")'],
            2 => ['at("div.best-first-name")'] ,
            3 => ['search("span[@itemprop='name']")']}

# Selecting those keys that is a number and sorting
p = patterns.keys.select{|i|  /[0-9]/ =~ i.to_s }.sort
# p = [1,2,3]

p.each do |i|
  p[i].each do |j|
    out = page.send(j)
    if !(out.blank?)  
      page = out
      p j
      break
    end
  end
end
name = page.inner_text
p name 
```

问题：

**1\. 我不能在 Nokogiri 对象上使用 ruby​​ 的“发送”吗？** 因为，我可以使用 ruby​​ 哈希并将实际的“search”或“at”与“class”、“id”、“itemprop”或哈希中的任何 html 属性存储为级别、1,2 和 3。一旦他们存储为级别，我将从它们中检索为“i”或“j”中的循环变量，并在 Nokogiri 对象上使用“.send(j)”。

我试过这个并得到这个错误，

```
1.9.3p385 :238 > a
 => "at(\"div.our_price\")" 
1.9.3p385 :239 > page.send(a)
NoMethodError: undefined method `at("div.our_price")' for #<Mechanize::Page:0xb2ba6dc>
    from (irb):239 
```

**2\. 如果我使用“at”，我可以只操作类吗？**喜欢，

> ```
> "page.at('span.humble')" 
> **means** 
> <-span-class ='humble'>
>      Humble
>   <-/-span>
> **then what about** 
> <-span-id='humble'>
>      Humble
>   <-/-span> 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:49:05.283

您需要分别给出方法名称和参数发送：

```
obj.send("methodname", "arg1", "arg2") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T19:28:11.287

> 如果我使用“at”，我只能操作类吗？

```
"page.at('span.humble')" 
**means** 
<-span-class ='humble'>
     Humble
  <-/-span>
**then what about** 
<-span-id='humble'>
     Humble
  <-/-span> 
```

好的，首先，不要编造突出 HTML 的方法。使用普通格式和普通 HTML，如有必要，将其放入单独的部分，否则您会混淆我们，有人会告诉您问题是无效的 HTML。在您的问题中，它至少应该看起来像这样：

```
 page.at('span.humble') 

means:

    <span class ='humble'>
         Humble
    </span>

then what about:

    <span id='humble'>
         Humble
    </span> 
```

有了*这个*...

为什么你会认为你不能使用 ID？您正在定义一个 CSS 访问器，因此使用一个作为 ID：

```
page.at('span#humble') 
```

[`at`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-at), 像[`search`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-search), 不限于类或 ID。如果您可以将其定义为 CSS（包括许多 jQuery 扩展），那么 Nokogiri 应该能够找到它。Nokogiri 还支持 XPath 访问器，因此您可以根据需要在两种样式之间跳转以查明您想要的节点。

我推荐 CSS，因为它通常更干净，噪音更小。您可以使用 with `at`and `search`，即使您经常会看到人们使用更明确的[`at_css`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-at_css)and [`at_xpath`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-at_xpath)or [`css`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-css)and[`xpath`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-xpath)来代替`search`。我很懒，只使用更通用的版本。

我强烈建议花一些时间[阅读 Nokogiri 的文档](http://nokogiri.org)。它非常强大，可以让您整天处理 HTML/XML。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T22:40:03.450

似乎您正在设置这些`instance_eval`而不是发送：

```
page.instance_eval 'at("div.div-of-all-names")' 
```

# jquery - 销毁可拖动的 JQuery

> ID：15551697
> 
> 赞同：11
> 
> 时间：2013-03-21T15:29:23.370
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

我有一组可拖动的元素。如何删除可拖动功能？

1.  `$('.draggable').draggable('disable')`在我的情况下不是一个选择

2.  `$('.draggable').draggable('destroy')`返回`Uncaught TypeError: Cannot read property 'options' of undefined`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-21T15:33:47.923

来自 jQuery UI API：

**破坏（）**

完全删除可拖动功能。这将使元素返回到它的预初始化状态。

```
This method does not accept any arguments. 
```

代码示例：

调用销毁方法：

```
$( ".selector" ).draggable( "destroy" ); 
```

**编辑**

由于这似乎对您不起作用 - 这是一个在 jQuery 论坛上到处可见的问题 - 这是一个建议的修复：

```
ui.draggable.draggable("option", "revert", false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-30T07:38:58.700

你需要在销毁之前检查

```
if ($el.data('ui-draggable')) { // error to call destroy if not there
  $el.draggable('destroy');
} 
```

在 jQuery >2.1.0 中它是“ui-draggable”

# java - 如何逐步将两个数组放入迭代器中？

> ID：15551700
> 
> 赞同：0
> 
> 时间：2013-03-21T15:29:41.440
> 
> 标签：java, list, methods, arraylist

我还是java新手，遇到了这个问题。

我有两个数据数组，每个数组都包含数字细节。

```
 static List<String> players1 = new ArrayList<String>(); 
    static List<String> players2 = new ArrayList<String>();
// Player 1 array plays player 2 array. List is always different on generation. 
```

我想要做的是在while循环中使用这两个字符串来遍历每个player1数组列表（[4]，[5]等）字符串，然后获取player2字符串（[0]，[1]等）然后返回回到**播放器 1 下一个字符串值。**我曾认为最好的方法是使用迭代器。

```
 Iterator it = players1.iterator();
   (it.hasNext()) {
   //get array string  
    // ++1?? 
    Iterator p2 = players2.iterator(); 
    (p2.hasNext()) {

       //get array string id.
       //return to next p1 string value.
    } 
```

因此，我从 player1 数组中获取一个 id，然后循环遍历 player2 数组并从那里获取一个 id，然后在 while 循环中返回 player1 迭代器的下一个值，并从 player2 数组中获取下一个 id，依此类推...

我的问题是，这是一个好方法吗？或者有没有一种简单的方法可以逐步循环遍历数组。如果您有任何关于如何改进或使用其他方法的示例，那就太好了。

感谢 Java 持有者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:50:16.940

您不需要在这里使用迭代器。相反，使用这样的[增强`for`循环](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)：

```
for (String player1 : players1) {
    for (String player2 : players2) {
        System.out.println("player1 is: " + player1 + ", player2 is: " + player2);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:33:46.827

```
Iterator<String> it1 = players1.iterator();
Iterator<String> it2 = players2.iterator();
while (it1.hasNext()&&it2.hasNext()) {
 String id1 = it1.next();
 String id2 = it2.next();
} 
```

循环结束后

*   如果`it1.hasNext()`，`players2`则更短。
*   如果`it2.hasNext()`，`players1`则更短。
*   如果`!it1.hasNext()&&!it2.hasNext()`，则两个列表的大小相同。

# c# - 使用 T-SQL 更改 filstream 目录权限？

> ID：15551701
> 
> 赞同：3
> 
> 时间：2013-03-21T15:29:42.910
> 
> 标签：c#, sql-server, unit-testing, filestream

`SQL Server 2012`与[文件流一起](http://msdn.microsoft.com/en-us/library/bb933993%28v=sql.105%29.aspx)使用。考虑这个`SQL`脚本：

```
CREATE DATABASE [Test]
GO

ALTER DATABASE [Test] ADD FILEGROUP [FileStream] CONTAINS FILESTREAM
GO

ALTER DATABASE [Test] ADD FILE (
    NAME = 'Test_FileStream',
    FILENAME = 'C:\Data')
    TO FILEGROUP [FileStream]
GO 
```

显然，该`C:\Data`文件夹是由`SQL Server`. 因此，此文件夹的所有者是 SQL Server 帐户（通常是`MSSQL$SQLEXPRESS`）。我的软件需要通过文件系统直接**读取**`NTFS`文件流，因此我将`FilestreamEffectiveLevel`值设置为 3。因此，`SQL Server`需要**写入**文件流数据的权限（显然），客户端需要**读取**文件流数据的权限。

客户端将使用[SqlFileStream](http://msdn.microsoft.com/en-us/library/system.data.sqltypes.sqlfilestream.aspx)读取数据：

```
using (var transaction = new TransactionScope())
{
    var fileStreamData = GetFileStreamData();
    using (var stream = new SqlFileStream(
        fileStreamData.FilePath,
        fileStreamData.TransactionContext,
        FileAccess.Read,
        FileOptions.SequentialScan,
        0))
    {
        var data = new byte[stream.Length];
        stream.Read(data, 0, data.Length);
    }
} 
```

由于我的普通用户需要对文件流数据的读取权限，因此`C:\Data`普通用户必须可以读取该文件夹。我可以通过右键单击文件夹、**提升**并添加必要的读取权限来手动解决此问题。

问题是我不想要这个手动步骤！当我`CreateDatabase()`在我的`C#`代码中运行时，我希望一切都正确配置。我尝试了这段代码，但它抛出了一个`UnauthorizedAccessException`：

```
var di = new DirectoryInfo(@"C:\Data");
var ds = di.GetAccessControl();
ds.AddAccessRule(new FileSystemAccessRule(
    @"Everyone",
    FileSystemRights.Read,
    AccessControlType.Allow));
di.SetAccessControl(ds); 
```

是的，如果我*运行我的软件提升*它工作。问题是上面的代码需要在单元测试中运行。在这种情况下，提升 Visual Studio 将使单元测试的结果变得毫无用处！我确实使用[impersonation](http://support.microsoft.com/?scid=306158)以管理员身份运行我的测试，但没有提升。

## 概括

*   `SQL Server`为文件流数据创建一个目录。
*   普通用户无法读取该目录。
*   普通用户需要对该目录的读取权限。
*   读取权限需要以编程方式从`Unit Test`.
*   单元测试以管理员身份运行，但出于明显的原因未提升。

## 问题

我怎么知道`SQL Server`授予某些组/用户对新创建的文件流目录的读取权限？

我能想到几个想法：

1.  使用某种`T-SQL`不需要提升的权限来更改权限。
2.  `xp_cmdshell`无需提升即可使用更改权限。
3.  运行`C#`代码`SQL Server`更改权限。再次，没有海拔。

我确定`SQL Server`有能力设置权限，因为它实际上拥有该对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:05:27.150

据我所知，SQL Server 没有公开使用 T-SQL 更改存储文件流数据的目录权限的能力。由于 SQL Server 拥有该目录，因此此功能是*可能*的，但它似乎不存在。

您的 C# 代码无法在没有提升的情况下更新文件权限的原因是您的用户帐户既不拥有该目录，也没有被授予对它的“更改权限”权限。Administrators 组确实可以更改权限，但您必须提升权限才能使用该组成员资格。同样，除非您想禁用 UAC（不推荐）或弄乱本地安全策略（*非常*不推荐），否则您无法解决此问题。

因此，选项 2 听起来是您的最佳选择。`xp_cmdshell`会将您的命令作为拥有该目录的 SQL Server 服务帐户运行，因此它应该能够更改 ACL。您可以使用该`cacls`命令更改文件夹的权限。你可能想要一个类似这样的命令：

```
cacls "C:\Data" /e /g Users:r

    cacls      -- Change ACLs
    "C:\Data"  -- Directory to change
    /e         -- Edit the current ACL instad of replacing it
    /g Users:r -- Grant the "Users" group read-only access 
```

另见：[`cacls`文档](http://technet.microsoft.com/en-us/library/bb490872.aspx)，[`xp_cmdshell`文档](http://msdn.microsoft.com/en-us/library/ms175046.aspx)

# sql - 如何更改此函数中返回值的格式？

> ID：15551702
> 
> 赞同：0
> 
> 时间：2013-03-21T15:29:44.157
> 
> 标签：sql, postgresql, plpgsql, set-returning-functions

我有一个这样创建的函数：

```
create or replace function core.nrt_summary_by_param_id(int) returns table (reason_type_id int, reason_id int, descr varchar(256), num int, pct numeric, cause_rank int) as $$
begin
    return query
        with r3 as (
            //A bunch of queries
        )
        select
            r3.reason_type_id,
            r3.reason_id, 
            r3.desc, 
            r3.num, 
            r3.pct,
            r3.cause_rank
        from r3;
        where
            r3.param_id = $1
    return;
end
$$ language plpgsql; 
```

当我这样调用函数时：

```
select nrt_summary_by_param_id(5); 
```

结果是这样的：

```
 nrt_summary_by_param_id  
----------------------------------------------------  
 (1,2001,"A",14,19.72,1)  
 (1,2006,"B",9,12.68,2)
 (1,2202,"C",8,11.27,3)
 (1,2002,"D",8,11.27,3)
 (1,2302,"E",7,9.86,5)
 (1,2201,"F",4,5.63,6)
 (1,2206,"G",4,5.63,6)
 (1,2301,"H",2,2.82,8)
 (1,2303,"I",2,2.82,8)
 (1,2005,"J",2,2.82,8)
 (1,2004,"K",2,2.82,8)
 (1,2204,"L",2,2.82,8)
 (,,"M",7,9.87,11)
 (13 rows) 
```

如何从我的函数中获得包含多列的表的返回？如何让每个单独的列显示？如果函数内部的整个查询是从命令行正常执行的，我希望返回是这样的。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:57:16.150

如果您的函数返回一个表格，那么您应该将其视为表格。我们通常如何查看 SQL 中的表？我们从他们中选择……。您正在寻找更像这样的东西：

```
select ...
from nrt_summary_by_param_id(5); 
```

# php - PHP createThumbnail 函数疑难解答

> ID：15551704
> 
> 赞同：1
> 
> 时间：2013-03-21T15:29:58.257
> 
> 标签：php, thumbnails, opendir

我正在使用这个函数来创建用户上传的图像的缩略图，我在这里找到了：[http](http://webcheatsheet.com/php/create_thumbnail_images.php) ://webcheatsheet.com/php/create_thumbnail_images.php ：

```
function createThumbs( $pathToImages, $pathToThumbs, $thumbWidth )
{
  // open the directory
  $dir = opendir( $pathToImages );

// loop through it, looking for any/all JPG files:
if (false !== ($fname = readdir( $dir ))) {
    // parse path for the extension
    $info = pathinfo($pathToImages . $fname);

// continue only if this is a JPEG image
if ( strtolower($info['extension']) == 'jpg' )
{
  echo "Creating thumbnail for {$fname} <br />";

  // load image and get image size
  $img = imagecreatefromjpeg( "{$pathToImages}{$fname}" );
  $width = imagesx( $img );
  $height = imagesy( $img );

  // calculate thumbnail size
  $new_width = $thumbWidth;
  $new_height = floor( $height * ( $thumbWidth / $width ) );

  // create a new temporary image
  $tmp_img = imagecreatetruecolor( $new_width, $new_height );

    // copy and resize old image into new image
imagecopyresampled( $tmp_img, $img, 0, 0, 0, 0, $new_width, $new_height, $width, $height );

  // save thumbnail into a file
  imagejpeg( $tmp_img, "{$pathToThumbs}{$fname}" );
}
}
// close the directory
closedir( $dir );
} 
```

这个函数工作正常，完全符合我的要求，但是，尽管如此，我仍然从中得到错误。请参阅以下错误：

`Warning: opendir(images/008/01/0000288988r.jpg,images/008/01/0000288988r.jpg) [<a href='function.opendir'>function.opendir</a>]: The directory name is invalid. (code: 267)`

`Warning: opendir(images/008/01/0000288988r.jpg) [<a href='function.opendir'>function.opendir</a>]: failed to open dir: No error`

`Warning: readdir() expects parameter 1 to be resource, boolean given`

我认为，问题在于我将一个实际文件，而不仅仅是一个目录，传递给函数的参数。这是 和 的`$pathtoimages`情况`$pathtothumbs`。该函数应该搜索传递给它的目录以查找所有带有`.jpg`扩展名的图像。但我想只对上传时上传的一张图片执行该功能。有没有办法编辑这个功能来允许这个？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:54:25.570

$pathToImage 必须指向图像文件
删除
`$dir = opendir( $pathToImages );`
`if (false !== ($fname = readdir( $dir ))) {`
`// parse path for the extension`
`$info = pathinfo($pathToImages . $fname);`

添加`$info = pathinfo($pathtoImages); // for the file name`
`$fname = $info['filename']`

仅替换`{$pathToImages}{$fname}`为`$pathToImages`，因为它是图像文件。

顺便说一句，这段代码并不冗长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:01:40.650

```
function createThumbs( $pathToImages, $pathToThumbs, $thumbWidth )
{

// load image and get image size
$img = imagecreatefromjpeg( "{$pathToImages}" );
$width = imagesx( $img );
$height = imagesy( $img );

// calculate thumbnail size
$new_width = $thumbWidth;
$new_height = floor( $height * ( $thumbWidth / $width ) );

// create a new temporary image
$tmp_img = imagecreatetruecolor( $new_width, $new_height );

// copy and resize old image into new image
imagecopyresampled( $tmp_img, $img, 0, 0, 0, 0, $new_width, $new_height, $width, $height );

// save thumbnail into a file
imagejpeg( $tmp_img, "{$pathToThumbs}" );

} 
```

认为我过早地发布了这个问题。感谢大家的帮助。

@csw 看起来您的解决方案可能有效，但我的解决方案也在工作，所以我没有对其进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:33:55.233

又快又脏：

```
function createThumb( $pathToImage, $pathToThumb, $thumbWidth )
{
  $fname = $pathToImage;
  echo "Creating thumbnail for {$fname} <br />";

  // load image and get image size
  $img = imagecreatefromjpeg( "{$pathToImage}{$fname}" );
  $width = imagesx( $img );
  $height = imagesy( $img );

  // calculate thumbnail size
  $new_width = $thumbWidth;
  $new_height = floor( $height * ( $thumbWidth / $width ) );

  // create a new temporary image
  $tmp_img = imagecreatetruecolor( $new_width, $new_height );

    // copy and resize old image into new image
imagecopyresampled( $tmp_img, $img, 0, 0, 0, 0, $new_width, $new_height, $width, $height );

  // save thumbnail into a file
  imagejpeg( $tmp_img, "{$pathToThumb}{$fname}" );
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-21T15:34:01.737

您必须像这样使用该功能：

```
createThumbs("path_to_image", "path_to_thumb", "thumb_width"); 
```

替换论据。请注意“路径”一词，它是一个目录，例如“../images/02”，您可能正在使用路径和图片名称，如下所示：

```
createThumbs("images/008/01/0000288988r.jpg", " ...... 
```

它应该是：

```
createThumbs("images/008/01/" ... 
```

# c# - mvc 客户端验证失败后的焦点元素似乎是任意的

> ID：15551706
> 
> 赞同：1
> 
> 时间：2013-03-21T15:30:00.127
> 
> 标签：c#, javascript, asp.net-mvc

我正在使用 mvc 不显眼的验证。当我按下提交按钮时，客户端验证失败，其中一个失败的文本框元素获得焦点。如果我然后再次按下按钮，另一个元素将获得焦点。

是什么决定了验证失败后哪个元素得到关注？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T07:49:16.197

好的，所以我这样解决了我的问题：请随时发表评论，如果您有更好的答案，请告诉。

对于 css 问题，我必须先选择所有无效的输入，然后再选择最上面的输入。（由于某种原因，如果我只是选择了第一个而没有先一个一个地选择它们，那么 css 的部分行为就像顶部的没有聚焦：/）

```
$('.input-validation-error').each(function () {
            this.focus();
        });

       var inp = $('.input-validation-error:first').get(0);

        if (inp) {
            inp.focus();
        } 
```

# scala - 在方法定义中重用 Scala 类型作为边界

> ID：15551714
> 
> 赞同：2
> 
> 时间：2013-03-21T15:30:22.447
> 
> 标签：scala, generics, types, existential-type, type-bounds

是否可以编写这样的内容并重用 HelperTest.AnyHelper 类型？

```
class HelperUtil 
{    
/* this is what I would like to write... reuse the AnyHelper type in the definition */
   def accept[HelperTest.AnyHelper](helper : HelperTest.AnyHelper) = 
   {
       // code here
   }
}

object HelperTest 
{
    type AnyHelper = T forSome { type T <: GenericHelper }
}

abstract class GenericHelper 
{
    val name = ""
} 
```

目前我被迫写这个，因为编译器不会让我：

```
class HelperUtil 
{
/* gets too verbose, if the generic type gets more complex and would be useful to reuse the type */
    def accept[T <: GenericHelper](helper : T) = 
    {
        // code here
    }
}

abstract class GenericHelper 
{
    val name = ""
} 
```

还是我完全走错了路？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:55:36.037

我猜你误解了签名中的类型参数是如何`def accept[T]`工作的。`T`此签名中的类型变量被*绑定*，即`T`作为新的类型变量引入。如果当前上下文中已经存在同名的类型变量，那么它将被新绑定的`T`. 考虑这个例子：

```
class Foo[T] {
  def id[T](t: T) = t
} 
```

类签名绑定一个`T`可以在类主体中引用的新的。但是，方法签名`T`也绑定了 a ，它隐藏了 class `T`。结果，您可以实例化具有某种类型的类`T`和具有某种其他类型`X`的方法：`T``Y`

```
val f = new Foo[String]
f.id(0) 
```

回到你的代码。你的签名

```
def accept[HelperTest.AnyHelper](helper : HelperTest.AnyHelper) 
```

因此尝试绑定一个新的类型变量`HelperTest.AnyHelper`- 编译器拒绝，因为类型变量可能不包含点 ( `.`)。

请改为执行以下操作：

```
import scala.language.existentials

trait A
class B1 extends A
class C1 extends B1
class B2 extends A

object HelperUtil {
  type MyA = T forSome { type T <: A }
}

class HelperUtil {
   /* Reuse type declaration */
   def foo(a: HelperUtil.MyA) = println(a.getClass.getName)
   def bar(a: HelperUtil.MyA) = println(a.getClass.getName)
   def baz(a: HelperUtil.MyA) = println(a.getClass.getName)
}

val hu = new HelperUtil

/* Instantiate with different types */
hu.foo(new B1) // B1
hu.foo(new B2) // B2
hu.bar(new C1) // C1 
```

# php - 为什么 symfony2 安全选民总是被召唤？

> ID：15551717
> 
> 赞同：7
> 
> 时间：2013-03-21T15:30:28.643
> 
> 标签：php, performance, security, symfony

我正在使用[安全选民](http://symfony.com/doc/2.0/cookbook/security/voters.html)作为 symfony 的 acl 系统的替代方案。

# 选民示例：

我的选民看起来很像下面的一个。

```
 class FoobarVoter implements VoterInterface
    {
        public function supportsClass($class)
        {
            return in_array($class, array(
                'Example\FoobarBundle\Entity\Foobar',
            ));
        }

        public function supportsAttribute($attribute)
        {
            return in_array(strtolower($attribute), array('foo', 'bar'));
        }

        public function vote(TokenInterface $token, $object, array $attributes)
        {
            $result = VoterInterface::ACCESS_ABSTAIN

            if (!$this->supportsClass(get_class($object))) {
                return VoterInterface::ACCESS_ABSTAIN;
            }

            foreach ($attributes as $attribute) {
                $attribute = strtolower($attribute);

                // skip not supported attributes
                if (!$this->supportsAttribute($attribute)) {
                    continue;
                }

                [... some logic ...]
            }

            return $result;
        }
    } 
```

# 问题：

## 减少对 Voter::vote() 的调用

我的选民被包括在内，并在每次页面加载时被调用。即使他们不支持给定班级的决定。 `FoobarVoter::vote()`总是被调用。即使`FoobarVoter::supportsClass()`或`FoobarVoter::supportsAttribute`返回false。因此我需要检查里面的类和属性`FoobarVoter::vote()`。这是行为标准吗？我怎样才能防止这个不必要的电话。

## 将选民限制为捆绑

一些选民只需要在特定的捆绑包中。有些只需要决定特定的类。因此，我的申请的所有部分都不需要一些选民。是否可以动态地包括每个捆绑/实体的选民？例如，仅在访问/使用特定捆绑包或特定实体时才将选民纳入决策管理器链？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-24T15:24:28.663

查看 Symfony 的源代码，似乎是因为它[`AccessDecisionManager`](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Security/Core/Authorization/AccessDecisionManager.php)使用这些方法（supportsClass 和 seupportsAttribute）来汇总对自身的支持。

这允许您的选民做的是延长申请经理的案件。因此，您不是在详细说明选民的能力，而是在说明*整个*投票过程。不管那是不是你想要的，都是另一回事……

至于减少不必要的调用，在一般情况下并不是不必要的。该系统是使用以下三种方法之一设计的：

1.  **允许基于**( `decideAffirmative`)。这使用“基于允许”的投票。这意味着如果一个插件说“允许”，那么你就被允许了。

2.  **基于共识**( `decideConsensus`)。这使用基于共识的许可，如果更多的选民同意允许而不是拒绝你被允许......

3.  **基于拒绝**( `decideUnanimous`)。这使用“基于拒绝”的投票。这意味着如果一个插件说“拒绝”，那么你就会被拒绝。否则，您至少需要一笔补助金。

因此，考虑到它们都依赖于明确的拒绝与允许，为每个请求运行所有插件实际上是有意义的。因为即使您不专门支持某个类，您也可能希望允许或拒绝该请求。

简而言之，通过支持属性限制选民并没有什么好处。

# c# - Math.Random 的算法

> ID：15551718
> 
> 赞同：8
> 
> 时间：2013-03-21T15:30:29.587
> 
> 标签：c#, java, c++, c, algorithm

这是一位面试官提出的问题。我无法回答。

问题是，假设您想从给定数组中选择一个随机数。

> 条件是您不应该按顺序选择任何东西，也不应该使用内置的 Random 函数。

我不知道。想知道这个 Math.Random 对我们有什么作用？

我用谷歌搜索并没有找到其背后的实现/逻辑。

有谁知道吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-21T15:47:28.530

到目前为止，三个人已经告诉你使用最后一位数字。**这行不通。**尝试在一个紧密的循环中这样做，您很快就会明白为什么这是一个坏主意。

这个问题不是很好提出的。我喜欢在面试中提出模棱两可的问题，因为你可以了解候选人如何处理模棱两可的情况。在这种情况下，我会立即反击并找出面试官所说的“随机”是什么意思。伪随机性是否足够好？是否有可用的高质量熵源？

一旦你有一个明确的问题，它应该更容易回答。

问题归结为管理熵。如果你有一个非常弱的熵源——比如 Ticks 的值（不是最后一个数字，它毫无价值，而是整个值），那么你可以使用它来播种伪随机数生成器。如果您有高质量的熵源，那么您可以直接使用它来生成随机位。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-21T16:10:40.483

保证随机。（舌头*紧贴*脸颊）：

```
void Main()
{
    Enumerable.Range(0, 10).Select(x => ComeOnItsKindaRandom(0, 10)).Dump();
}

public int ComeOnItsKindaRandom(int minValue, int maxValue)
{
    var query = "http://www.random.org/integers/?num=1&min={0}&max={1}&col=1&base=10&format=plain&rnd=new";
    var request = WebRequest.Create(string.Format(query, minValue, maxValue));
    var response = request.GetResponse();
    using(var sr = new StreamReader(response.GetResponseStream()))
    {
        var body = sr.ReadToEnd().Trim();
        return int.Parse(body);
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-21T15:35:41.673

如果您只想从数组中获取**一项**`Random`，而不使用类，则可以使用`modulo`具有未知值的函数，例如`DateTime.Now.Ticks`：

```
string[] items = new[] { "1", "2", "3", "4", "5" };

// Modulo items.Lenth returns a value from 0 to Length - 1
int index = (int)(DateTime.Now.Ticks % items.Length);

Console.WriteLine(items[index]); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-21T15:34:34.223

我会用

```
DateTime.Now.Tick 
```

然后为 Math.Random(10) 取足够的数字，我只取最后两个数字。

或者你可以像下面这样取这个刻度的模数：

```
public static class MyMath
{
    private static int counter = 1;

    public static int Random(int max)
    {
        counter++;
        long ticks = DateTime.Now.Ticks;
        int result = Math.Abs((int) (ticks/counter)%max);
        return result;
    }
} 
```

请参阅以下测试：

```
 [Test]
    public void test()
    {
        List<int> test = new List<int>();

        for (int i = 0; i < 10; i++)
        {
            test.Add(MyMath.Random(100));
        }

        Console.WriteLine("result:");
        foreach (int i in test)
        {
            Console.WriteLine();
        }
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T15:37:28.737

这是 C 中随机数的实现。您可以尝试用 C# 重写它。

**C 的随机数：终于结束了？** [http://www.cse.yorku.ca/~oz/marsaglia-rng.html](http://www.cse.yorku.ca/~oz/marsaglia-rng.html)

它似乎质量非常高。

但是在面试中编写这段代码并不容易，但你绝对可以告诉他使用的想法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T15:35:17.270

只是一个想法，您可以使用最后一位数字`DateTime.Now.Ticks`来获得选择索引的基础。或者也许是同一件事上的一些哈希函数。或者使用可以为您提供从辐射测量的随机数的网络服务。`Math.Random`只是从预定义的表中挑选（是的，它确实不是随机的）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-21T16:12:54.163

首先，它被称为伪随机而不仅仅是随机，因为随机序列不可能以计算形式生成，

大多数伪随机数生成器 PRNG 都采用这种形式：

在时间 0：R(0) = 随机（种子）

在时间 i：R(i) = Random(R(i-1))；

其次，随机并不意味着您不知道第 i 个结果会是什么，而是该系列是稳健的，并且很难猜测给定结果链的公式或种子

希望这可以帮助

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-21T15:39:37.897

我想他们只是想看看你是否了解[LCG（线性同余生成器）](http://en.wikipedia.org/wiki/Linear_congruential_generator)算法。

然而，他们背后的数学有点棘手，所以我怀疑他们是否能指望你能在脑海中写下一个。

但是如果做不到这一点，你就不能像这样作弊来生成一个随机索引吗？

`int index = Guid.NewGuid().GetHashCode() % array.Length;`

# c++ - Byte Array to Hex Digits (0 to 9 and A to F only)

> ID：15551724
> 
> 赞同：0
> 
> 时间：2013-03-21T15:30:42.757
> 
> 标签：c++, visual-studio-2010, std

I am trying to convert a "double" value (say 1.12345) to 8 byte hex string. I am using the following function to convert double value to hex string.

```
std::string double_to_hex_string(double d)
{
unsigned char *buffer = (unsigned char*)&d;
const int bufferSize = sizeof(double);

char converted[bufferSize * 2 + 1];
//char converted[bufferSize];

int j = 0;
for(int i = 0 ; i < bufferSize ; ++i)
{
    sprintf(&converted[j*2], "%02X", buffer[i]);
    ++j;
}
string hex_string(converted);
return hex_string;
} 
```

This function returns the 16 byte hex string. I then compress this string to fit into 8 bytes through this code

```
string hexStr = double_to_hex_string(TempD);

unsigned char sample[8];

for ( int i = 0; i < hexStr.length() / 2 ; i++) 
{
sscanf( (hexStr.substr(i*2,2)).c_str(), "%02X", &sample[i]);
} 
```

Now, how can I get the hex digits representing these 8 bytes in "sample" array. There should be only one hex digit per byte. I need to append this 8 byte hex string to a global string.

If there is any other solution which can convert a double value to 8 hex digits and vice versa, that would be highly appreciated.

Regards.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:45:54.197

A hexidecimal digit represents *half a byte*, so if you are limited to 8 hex digits you are also limited to storing 4 bytes.

This solution will encode the number from a `float`, which is commonly 4 bytes.

```
std::string double_to_hex_string(double d)
{
    // Create a stream that writes 2 digit hex values
    std::stringstream stream;
    stream << std::hex << std::setfill('0');

    float f = d;
    const unsigned char *buffer = reinterpret_cast<unsigned char*>( &f );
    const unsigned char *buffer_end = buffer + sizeof(f);

    // Write each byte as 2 character hex.
    while ( buffer != buffer_end )
    {
      stream << std::setw(2) << static_cast<int>( *buffer );
      ++buffer;
    }

    return stream.str();
} 
```

# perl - 为什么 Perl 可能允许使用 TOR 而不是 https 的 http 网站？

> ID：15551728
> 
> 赞同：6
> 
> 时间：2013-03-21T15:31:02.783
> 
> 标签：perl, https, tor

如果它是一个 https 站点，但如果它是一个 http 站点，我很难使用 perl 通过 TOR 访问一个网站。

```
#!/usr/bin/perl
use strict;

use WWW::Mechanize;
use LWP::Protocol::socks;
use LWP::Protocol::https;
use utf8;

my $mech = WWW::Mechanize->new(timeout => 60*5);
$mech->proxy(['http', 'https'], 'socks://localhost:9150');
$mech->get("https://www.google.com"); 
```

我收到错误消息：错误获取[https://www.google.com](https://www.google.com)：状态读取失败：第 10 行的文件描述符错误，“其中 i10 行是程序的最后一行。

在TOR浏览器中，我可以成功查看：“ [https://www.google.com](https://www.google.com) ”，端口为9150。我使用的是ActivePerl 5.16.2；瓦达利亚 0.2.21 和 Tor 0.2.3.25。我有一台 Windows 机器，我的主要互联网浏览器是 Mozilla。

我尝试使用以下命令安装软件包：

```
cpan LWP::UserAgent
ppm install LWP::Protocol::https
cpan LWP::Protocol::https
ppm install LWP::Protocol::socks
cpan LWP::Protocol::socks
ppm install Mozilla::CA
ppm install IO::Socket::SSL
ppm install Crypt::SSLeay
cpan Crypt::SSLeay 
```

感谢您的任何帮助！请让我知道是否有任何进一步的信息可以提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-24T13:22:59.567

前段时间，我找到了通过 Tor 使用 WWW::Curl::Easy 来获取这些网站的方法，因为使用 LWP 我发现了同样的问题。之后，我将所有 html 保存在文件中并使用 WWW::Mechanzie 或 HTML::TreeBuilder 解析它们。

如果您想与网站进行更多交互，例如发布表单等。此解决方案可能会更加乏味，因为您需要与 curl 进行交互。

```

`package Curl;

use warnings;
use WWW::Curl::Easy;
use WWW::UserAgent::Random;

my $curl = WWW::Curl::Easy->new;
my $useragent = rand_ua("browsers");
my $host = 'localhost';
my $port = '9070';

my $timeout = '20';
my $connectTimeOut= '20';

&init;

sub get
{
        my $url = shift;

        $curl->setopt(CURLOPT_URL, $url);
        my $response_body;
        $curl->setopt(CURLOPT_WRITEDATA,\$response_body);

        my $retcode = $curl->perform;

        if ($retcode == 0) {
                print("Transfer went ok Http::Code = ".$curl->strerror($retcode)."\n");
                my $response_code = $curl->getinfo(CURLINFO_HTTP_CODE);
                # judge result and next action based on $response_code

                return \$response_body;
        } else {
                # Error code, type of error, error message
                print("An error happened: $retcode ".$curl->strerror($retcode)." ".$curl->errbuf."\n");
                return 0;
        }

}

sub init
{
        #setejem el proxy
        $curl->setopt(CURLOPT_PROXY,"$host:".$port);
        $curl->setopt(CURLOPT_PROXYTYPE,CURLPROXY_SOCKS4);

        #posem les altres dades
        $curl->setopt(CURLOPT_USERAGENT, $useragent);
        $curl->setopt(CURLOPT_CONNECTTIMEOUT, $connectTimeOut);
        $curl->setopt(CURLOPT_TIMEOUT, $timeout);
        $curl->setopt(CURLOPT_SSL_VERIFYPEER,0);
        $curl->setopt(CURLOPT_HEADER,0);
}` 

希望对你有帮助！

            回答 #2

赞同：1

时间：2013-03-28T12:17:03.157

也许您正在使用的代理已经是 HTTPS 代理（即 CONNECT 代理）。在这种情况下，这应该有效（未经测试）：

```
#!/usr/bin/perl
use strict;

use WWW::Mechanize;
use LWP::Protocol::socks;
use LWP::Protocol::https;
use utf8;

my $mech = WWW::Mechanize->new(timeout => 60*5);
$mech->proxy(['http'], 'socks://localhost:9150');
$mech->proxy(['https'], 'https://localhost:9150'); ### <-- make https go over https-connect proxy

$mech->get("https://www.google.com"); 
```

            回答 #3

赞同：1

时间：2013-09-24T11:43:27.520

我找不到起源，但我很久以前就与它抗争过。基本上我遇到的问题是 LWP::UserAgent 用于 https 请求的实施。

可能这个问题可以帮助你：[我如何强制 LWP 使用 Crypt::SSLeay 进行 HTTPS 请求？](https://stackoverflow.com/questions/8026524/how-do-i-force-lwp-to-use-cryptssleay-for-https-requests)

```

# asp.net - CS0117：“System.Web.UI.HtmlControls.HtmlAnchor”不包含“文本”的定义

> ID：15551731
> 
> 赞同：-1
> 
> 时间：2013-03-21T15:31:08.007
> 
> 标签：asp.net, literals

我在尝试启用几个 C# 项目时收到此错误。这些网站在 VS 2010 中本地工作，但在现场他们抛出以下错误：

CS0117：“System.Web.UI.HtmlControls.HtmlAnchor”不包含“文本”的定义

这是母版页的代码文件中存在问题的代码：

```
litHome.Text = "active"; 
```

在源代码中，我有这个母版页：

```
<li><a href="Default.aspx" class="<asp:Literal ID="litHome" runat="server" />">home</a></li> 
```

抛出的错误似乎认为我正在设置 HTML Anchor 的 text 属性。

我自己刚刚解决了这个问题，但是在无法在这里（或谷歌）上找到解决方案之后，我想我会把它发布给其他有问题的人。请在下面查看我的评论，因为我还不能回答这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:39:40.813

问题归结为在锚标记（用于动态设置 CSS 类）中使用引号而不是撇号。这样做了很多次，但是直到今天才上线 2 个新站点时才出现这个问题（也许有人可以解释为什么它现在才出现，也许是 VS 服务包中的新验证？）无论如何，以下代码错误： `<li><a href="Default.aspx" class="<asp:Literal ID="litHome" runat="server" />">home</a></li>`需要： `<li><a href="Default.aspx" class="<asp:Literal ID='litHome' runat='server' />">home</a></li>`希望对某人有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:46:29.997

先生

html 控件在这种情况下没有 (.Text) 扩展名，您可以使用 (.Value) 来解决您的问题，它会返回与 .Text 相同的内容。如果您仍然面临蚂蚁问题，请让我知道你使用哪个控件

在后面的代码中

字符串 abc=htmlTextbox.Value;

# ios - 仅打开 UIWebView 并使用推送通知的 iOS 应用程序会被苹果拒绝吗？

> ID：15551733
> 
> 赞同：2
> 
> 时间：2013-03-21T15:31:10.160
> 
> 标签：ios, uiwebview, apple-push-notifications

我正在开发一个完全做两件事的应用程序。

1) 打开一个 UIWebView

2) 使用推送通知

我正在打开一个加载外部 URL 的 UIWebView，用户可以在那里订阅各种事件。订阅后，他可以获得有关它们的推送通知。

我之所以问，是因为有些人告诉我，他们的应用程序在加载外部 URL 时被拒绝，因为苹果说它最好是网页而不是 iOS 应用程序。

但在我使用推送通知的情况下？计算方式不同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:50:17.150

`WebView`只有应用程序被拒绝的原因是因为它们没有使用框架提供的任何功能。我进入了一个只有一个登录视图的应用程序，登录后，响应是来自我正在显示的服务器的 URL `WebView`。除非你尝试，否则你永远不会知道，但我认为它会进入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-07-07T04:06:39.883

我已经成功提交了 3 个应用程序，它们都是 WebViews 但具有推送通知功能。只要您的应用程序中有推送通知，您将满足在您的应用程序中具有框架相关功能的准则，而不仅仅是移动应用程序中的简单 WebView。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-26T10:35:58.340

> “您的应用程序不包含 iOS 功能。App Store 应用程序应使用原生 iOS 按钮并包含 iOS 功能，而不仅仅是 Web 视图、推送通知或共享。”

资料来源：[Apple 拒绝 Ionic 应用程序](https://forum.ionicframework.com/t/apple-rejecting-ionic-apps/153980)，日期：2019 年 1 月

> “您的应用程序提供有限的用户体验，因为它与移动浏览体验没有太大区别。具体来说，我们注意到大多数应用程序内容都链接到 Safari。因此，它提供的体验类似于使用 Safari 的一般体验。包括推送通知、核心位置和共享等 iOS 功能并不能提供适合 App Store 的足够强大的体验。...... App Store 不接受或分发网络应用程序。”</p>

来源：[App Store Rejection 4.2 - 设计：最低功能](https://forum.ionicframework.com/t/app-store-rejection-4-2-design-minimum-functionality-my-first-after-2-years-of-ionic/200908)，日期：2020 年 12 月，但似乎[已解决](https://forum.ionicframework.com/t/app-store-rejection-4-2-design-minimum-functionality-my-first-after-2-years-of-ionic/200908/9)。

结论：YMMV = 您的里程可能会有所不同。

# sql - Unexpected results from SQL query with BETWEEN timestamps

> ID：15551740
> 
> 赞同：0
> 
> 时间：2013-03-21T15:31:27.647
> 
> 标签：sql, ruby, postgresql, heroku, timestamp-with-timezone

I have created a little test app to track down a problem I experienced with Postgres on Heroku: [http://snippi.com/s/xd511rf](http://snippi.com/s/xd511rf)

As you can see in line **49**, I want to retrieve all entries created *today*. This would be the first two items of my test data with the Ruby Gem *DataMapper*.

When I run this app on my notebook (Ubuntu 12.10, HP, Ruby 1.9.3) everything I get this result, which is right:

```
[
{
    "id": 1,
    "text": "Working on some awsomenewss",
    "category": 0,
    "starttime": "2013-03-21T15:56:00+01:00",
    "endtime": "2013-03-21T18:26:00+01:00",
    "creation": "2013-03-21T16:15:21+01:00"
},
{
    "id": 2,
    "text": "facebooking",
    "category": 0,
    "starttime": "2013-03-21T20:48:00+01:00",
    "endtime": "2013-03-21T22:26:00+01:00",
    "creation": "2013-03-21T16:15:21+01:00"
}
] 
```

In my debug console this SQL query is logged:

```
SELECT "id", "text", "category", "starttime", "endtime", "creation" 
  FROM "entries" 
  WHERE "starttime" 
    BETWEEN '2013-03-21T00:00:00+00:00' 
      AND '2013-03-21T23:59:59+00:00' 
  ORDER BY "id" 
```

But after pushing the app to Heroku a very strange error occurrs. When I run it now ([http://afternoon-everglades-4239.herokuapp.com/](http://afternoon-everglades-4239.herokuapp.com/)) this is the response:

```
[] 
```

Why is it empty?

The data is definitely in the database which is proved by this Dataclip from Heroku: [https://dataclips.heroku.com/hygziosyxwperyctwfbhjzgbzhbj](https://dataclips.heroku.com/hygziosyxwperyctwfbhjzgbzhbj)

Also when I run the SQL command manually via ´heroku pg:psql´ it actually works with this output:

```
 id |            text             | category |      starttime      |       endtime       |      creation       
----+-----------------------------+----------+---------------------+---------------------+---------------------
  1 | Working on some awsomenewss |        0 | 2013-03-21 15:56:00 | 2013-03-21 18:26:00 | 2013-03-21 16:15:21
  2 | facebooking                 |        0 | 2013-03-21 20:48:00 | 2013-03-21 22:26:00 | 2013-03-21 16:15:21
(2 rows)

```

The logs do not contain any errors or further information. I have used a *Remote Heroku PostgreSQL Database* in both cases (Production and Local).

So why does this not work?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:41:52.693

检查列的**数据类型**和您的**时区**。您可能会感到困惑[**`timestamp with time zone`**并且**`timestamp`**](https://stackoverflow.com/questions/9571392/ignoring-timezones-altogether-in-rails-and-postgresql/9576170#9576170).

看起来`timestamp`您的表中有，但使用`timestamptz`. 这样，这一切都取决于会话的本地时区（如果未另行指定，则默认为服务器的时区。）

切换到`timestamptz`，或者`timestamp`如果时区与您完全无关。（如有疑问，请使用`timestamptz`。）

不是您的问题的原因，但您的查询可能应该是：

```
SELECT id, text, category, starttime, endtime, creation 
FROM   entries 
WHERE  starttime >= timestamp '2013-03-21' -- defaults to 00:00 time
AND    starttime <  timestamp '2013-03-22'
ORDER  BY id 
```

`a BETWEEN x AND y`由于小数，类型几乎**总是错误**的！`timestamp`您的查询会做`starttime = '2013-03-21T23:59:59.123+00'`什么？

# php - mysql_insert_id() suddenly stopped working

> ID：15551748
> 
> 赞同：0
> 
> 时间：2013-03-21T15:31:52.873
> 
> 标签：php, mysql

Don't know how to say this, but I have used `mysql_insert_id()` for many many years. Recently I included it in my web applications and worked well, I have successfully received 50 transactions and was happy. All of a sudden all my transactions are coming in with ids equal 0, I Google'd around and read something about persistent connection being set to true? I just want me to make sure I give the right info to my network server guy, God knows, whenever something changes, they don't let me know, I only find out when my code all of a sudden breaks.

is there another function to use other than `mysql_insert_id()` in my PHP/MySQL code? just for those who want to see code here is what i have: I am not including "id" as it is "auto increment not null primary key, etc"

```
 <?php
$db_host2 = 'localhost';
$db_user2 = 'different';
$db_pass2 = 'different';
$db_name2 = 'different';
$conn2 = &NewADOConnection('mysqlt');
$db2 = $conn2->Connect($db_host2,$db_user2,$db_pass2,$db_name2);
if($conn2->isConnected()==false)
   die("Could not connect to the database.  Please try again in the next few minutes.");   

    $db_host = 'localhost';
    $db_user = 'admin';
    $db_pass = 'pass';
    $db_name = 'name';
    include_once('adodb/adodb.inc.php');
    define('ADODB_FETCH_ASSOC',2);
    $ADODB_FETCH_MODE = ADODB_FETCH_ASSOC;
    $conn = NewADOConnection('mysqlt');
    $db = $conn->Connect($db_host,$db_user,$db_pass,$db_name);
    if($conn->isConnected()==false)
       die("Could not connect to the database.  Please try again in the next few minutes.");
        $q="insert into tableA(name,address,phone) values ('','','')"
        $rs=$conn->execute($q);
        $myid=mysql_insert_id();
        ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T01:47:42.043

您只需要 1 个配置示例：

```
// database config
$DB_TYPE        = "mysql";
$DB_HOST        = "xxxxx";
$DB_USER        = "xxxx";
$DB_PWD     = "xxxx";
$DB_NAME        = "xxx"; 
```

然后将最后一个插入 ID 用于：

```
$db->Insert_ID 
```

# javascript - JSON中的数组中的数组

> ID：15551750
> 
> 赞同：2
> 
> 时间：2013-03-21T15:32:01.123
> 
> 标签：javascript, jquery, html, json

我的javascript代码；

```
function callDist(sel)
{
   $.getJSON('Dist.json', function(data){
    var $container = $('#parameters').empty();

    $.each(data.distributions, function(i, distribution){
         $.each(distribution, function(key,value) 
         {
          if(distribution.type==sel.value) {
            alert(distribution.name);
            $.each(distribution.parameters, function(key, value) {
            $container.append(key + ':' + value + '<br />');
            $container.append('<hr />');
          });
         }
    });
 }
 );
 });
 } 
```

我的 Json 代码；

```
{
"distributions":[
  { 
     "name":"Uniform",
     "type":1,
     "parameters":[{ "minValue":2 , "maxValue":4 }]
  },
  {  "name":"Normal",
     "type":2,
     "parameters":[{ "mean":5 , "standartDeviation":3 }]
  },
  {
     "name":"Exponential",
     "type":3,
     "parameters":[{"lamda":2}]
  },
  {
     "name":"Geometric",
     "type":4,
     "parameters":[{"probability":0.2}]
  }
 ]
} 
```

html代码；

```
<select name="selectDistribution" class="span12"  id="Options"       

 onchange="callDist(this);" >
      <option value="0">Choose one distribution</option>
      <option value="1">Uniform</option>
      <option value="2">Normal</option>
      <option value="3">Exponential</option>
      <option value="4" >Geometric</option>
</select> 
```

在 Json 中有一个由一些分布创建的数组。当用户从选择选项中选择其中一些时，我正在触发 callDist(sel) 函数。当传递的值 sel 等于 distribution.type 时，我想将该分布的参数写入 div。我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:39:37.290

```
function callDist(sel) {
    $.getJSON('Dist.json', function(json){
        var $container = $('#parameters').empty();

        $.each(json.distributions, function(i, distribution) {
            if(distribution.type==sel.value) {
                $.each(distribution.parameters, function(j, parameters) {
                    $.each(parameters, function(parameter_key, parameter_value) {
                        $container.append(parameter_key + ':' + parameter_value + '<br />');
                        $container.append('<hr />');
                    });
                });
             }
        });
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:51:51.263

`distributions`设置为数组后，您必须遍历分布并检查`type`每个元素的值是否匹配`sel`，然后将该对象的参数附加到有问题的 div 中，除非位置始终转换为某种类型。如果是这样的话，就像

```
var distribution = data[(sel-1)] 
```

可用于设置分布。

由于可能存在数组中的位置与类型不对应的情况，因此可能更有意义的是重构 JSON，以便您拥有一个对象而不是数组，如下所示：

```
{"distributions":{
    "Uniform":{
        "name":"Uniform",
        "type":1,
         "parameters":[{ "minValue":2 , "maxValue":4 }]
    },
    "Normal":{
         "name":"Normal",
         "type":2,
         "parameters":[{ "mean":5 , "standartDeviation":3 }]
    }
  }
} 
```

在这种情况下，我使用该`name`字段作为`distributions`对象的属性名称，并且可以通过键入 来获取任何给定分布的参数`data[selName].parameters`，其中`selName`是与选择相对应的名称，但您可以轻松地使用类型属性名称。

这两种方法都不需要循环遍历数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:57:20.723

我在[这里](http://jsfiddle.net/jagzviruz/P75R8/1/)摆弄了一下。我能够看到具有正确值的警报。我用了

```
$('#Options').change() 
```

触发该功能和一些其他修改以在小提琴上工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-21T15:40:32.727

删除第二个逗号

```
$.each(data.distributions, function(i, distribution,) { 
```

# c++ - Reading a combination without confirming with enter?

> ID：15551756
> 
> 赞同：0
> 
> 时间：2013-03-21T15:32:22.280
> 
> 标签：c++

So basically I just want to read characters from the user and make my code know that when user types a defined combination (say, CTRL+F - but without confirming with Enter, for exmaple), it's the end of the input. How can I do that? I only know how to read characters with enter and comparing their ASCII's...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:48:33.413

编辑再次阅读您的问题，我意识到我误解了您的问题。我会留下这个，因为它可能对你或其他人仍然有用。

* * *

您所要求的与阅读字符无关。事实上，CTRL 根本不是一个字符。你基本上只是在检查按键。处理这种输入依赖于平台，即使在一个平台上，也会存在多种方法。对 Windows 执行此操作的一种方法是使用`GetAsyncKeyState`. 此功能将检查是否正在按下指定的键。请注意，它不会“记住”输入，因此您必须每秒多次检查此功能才能注册所有用户输入。

您为函数提供一个参数，指定要检查其状态的键。可以在[此处找到所有关键代码的列表](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx)

例子：

```
#include <iostream> //for output
#include <windows.h> //for GetAsyncKeyState

int main()
{
    while(true)
    {
        if( GetAsyncKeyState(VK_CONTROL) ) //CTRL-key is pressed
        {
            if( GetAsyncKeyState( 0x46 ) ) //F-key is pressed
                std::cout << "CTRL-F is pressed" << std::endl;
            if( GetAsyncKeyState( 0x58 ) ) //X-key is pressed
                break;
        }
    }
    std::cout << "CTRL-X was pressed, stopping.." << std::endl;
} 
```

这个例子将不断地检查是否`CTRL-F`正在被推送，如果是，则写入输出，直到`CTRL-X`被按下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:42:02.327

尝试

```
#include <conio.h>
#include <iostream>
using namespace std;

int main()
{
     bool keepGoing = true;
     char key = ' ';
     while (keepGoing){
       cout << "Enter a key" << endl;
       while(_kbhit()){
         key = _getch();
         cout << "You entered: " << key << endl;
       }
     }
} 
```

然后指定何时结束循环的分隔符。

如果在 linux curses 上可用。还有一个 getch 功能。如果你的目标是跨平台兼容性，你应该使用 curses。ncurses 库函数类似于 conio.h 中的函数。 [ncurses 教程](http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:47:57.827

Windows 系统调用[`ReadConsoleInput`](http://msdn.microsoft.com/en-us/library/ms684961%28VS.85%29.aspx)允许您直接读取控制台输入。您可能希望将该调用包装到一个函数中，该函数仅从函数的几个参数中提取基本数据`ReadConsoleInput`。您可以编写一个函数来检查是否有任何输入[`GetNumberOfConsoleInputEvents`](http://msdn.microsoft.com/en-us/library/ms683207%28v=vs.85%29.aspx)。

# php - Typehinting traversable objects

> ID：15551757
> 
> 赞同：0
> 
> 时间：2013-03-21T15:32:25.013
> 
> 标签：php, arrays, iterator, type-hinting

Let's say you are building an API that other people will work with. And you use typehinting a lot for functions, like `function foo(array $arg){...}`. This forces the argument to be an array, so passing traversable objects to this function won't work. But your function can work with such objects.

Do you think it's a good idea to remove the hint and handle traversable objects too? Or should I leave that to the user? (she can use `iterator_to_array` for example)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:50:45.777

您可能会删除我认为的类型提示并添加 PHPDoc 注释。说它需要一个数组，一个可遍历的甚至是数组访问。

用户在使用您的 API 时给予灵活性还不错，但是在处理不属于适当类型的参数时，您的 API 应该具有容错能力。因此，如果您删除类型提示，您应该将类​​型控件添加到您的方法中（当然您不必这样做，但它可能被认为是最佳实践）。但是进行检查会导致您的 API 变慢（它可能是疏忽的，并且可能被视为微优化，但是如果您的 API 需要快速工作，您也应该考虑这一点）。

# python - how to get all change numbers from sync - p4python

> ID：15551760
> 
> 赞同：1
> 
> 时间：2013-03-21T15:32:30.407
> 
> 标签：python, perforce, p4python

I periodically get a p4 sync and want to know what actually got synced. So I get the return from `p4.run_sync` which is a list of dicts per change (as far as I understood)

```
sync = p4.run_sync() 
```

when I print the keys it looks like that:

```
sync dict Nr: 0 --------------
* totalFileSize
* rev
* totalFileCount
* clientFile
* fileSize
* action
* depotFile
* change
sync dict Nr: 1 --------------
* action
* clientFile
* rev
* depotFile
* fileSize
sync dict Nr: 2 --------------
* action
* clientFile
* rev
* depotFile
* fileSize 
```

So only in the **first** dict there is a **change** number!

How do I get the others? I currently browse the `depotFiles` of the other dicts and get the headChange from `p4.fstat`.. but this seems quite hacky...

I'd actually like each change number that was synced to fetch a describe right away.

Or is there a more proper way todo this? Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T22:56:41.337

首先`p4.run_sync()`或任何`p4.run_COMMAND()`返回一个列表而不是一个字典。列表的每个元素都可以是字典或字符串，具体取决于 perforce 服务器支持以及您是否禁用标记。

从文档中[`p4.run`](http://www.perforce.com/perforce/doc.current/manuals/p4script/03_python.html#1122735)：

```
Whether the elements of the array are strings or dictionaries depends on
(a) server support for tagged output for the command, and
(b) whether tagged output was disabled by calling p4.tagged = False. 
```

*   当您运行 a `p4.run_sync()`（相当于`p4 sync ...`）时，您将获得该目录下所有文件的最新版本。
*   列表中的第一个文件包含 perforce 同步到的最新更改编号，它不必是修改该文件的更改。
*   更改编号仅对应于该目录下的最新更改。
*   列表中的其余文件省略了这些冗余信息。这就是原因，密钥`change`不是文件列表中其他字典的一部分。

对于每个文件，您都会在`rev`密钥中获得修订号，该修订号与完整的 perforce 路径相结合，`depotFile`对应于存储库中文件的唯一版本（例如`//depot/branch1/dir1/file1#4`）。

您可以将这些信息与`fstat`. （不，这不是一种 hacky 方式，这是获取与特定文件和修订相对应的更改号的正确方式）。

```
>>> result = p4.run_fstat("//depot/branch1/dir1/file1#4")
>>> print result[0]['headChange']
12345 
```

这表明修订版 4`//depot/branch1/dir1/file1`是变更的一部分`12345`。

# jquery - sending extra arguments along with ajax request result to the jsonp callback function

> ID：15551761
> 
> 赞同：2
> 
> 时间：2013-03-21T15:32:37.230
> 
> 标签：jquery, ajax, jsonp

here is my ajax request function

```
function get_from_rss(div_id , link_ ){
    jQuery.support.cors = true;
    $.ajax({
    url :  link_ ,  
        contentType: "application/json",
        dataType: 'jsonp',
        jsonp : "callback",
        jsonpCallback: 'callbackfunc'
    });
} 
```

here is my callback function

```
function callbackfunc (data)
{
   // parse data
   // put them in the right div 
} 
```

so the parsing part is similar for all of the links ( all links are json feeds from rss ) only thing different is that div , so i need to somehow send div id along with ajax result to callback function , otherwise i have to write separate callback function for each link

something like

```
 function callbackfunc (data , div_id)
    {
       // parse data
      $('#'+div_id).html(data);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:44:55.340

```
function get_from_rss(div_id , link_ ){

    $.ajax({
        ...,
        jsonpCallback: function(data){
            callbackfunc(data, div_id);
        }
    });
} 
```

你确定这是`jsonpCallback`你想要使用而不是`success`？

# php - 如何正确使用 DOMDocument->ReplaceChild 和 DOMDocument->getElementById？

> ID：15551762
> 
> 赞同：2
> 
> 时间：2013-03-21T15:32:42.747
> 
> 标签：php, domdocument

```
public function DOMChangeElementContent($Element,$NewContent)
{
    //Pull the original element from the currently loaded DOM document
    $OriginalElement = $this->DOM->getElementById($Element); 
    //Create a new element 
    $NewElement = $this->DOM->createElement($Element, $NewContent);

    //Replace the old element with the new element
    $this->DOM->DOMreplaceChild($NewElement, $OriginalElement);     
} 
```

出于某种原因，即使我将它从我试图替换它的同一个文档中拉出，我仍然不断得到“找不到原始元素”元素。我是否以某种错误的方式使用它？这里回答的问题都没有完全解释我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:51:46.060

`replaceChild`是 的方法`DOMNode`，而不是文档本身的方法。您必须在要替换的元素的父节点上调用它：

```
$OriginalElement->parentNode->DOMreplaceChild($NewElement, $OriginalElement); 
```

# iphone - arc 禁止显式消息发送保留

> ID：15551765
> 
> 赞同：0
> 
> 时间：2013-03-21T15:33:00.503
> 
> 标签：iphone, objective-c, xcode

Xcode 发现一个问题**ARC 禁止显式消息发送的**保留

```
_photo = [photo retain]; 
```

将其更改为

```
_photo = [photo]; 
```

不工作

而且我不想使用 -fno-objc-arc 来禁用它。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T15:34:57.193

如果您想保留 ARC，则`_photo = photo;`不需要括号。只要_photo不弱，（`__weak`声明前有a）ARC就会为你插入`retain`call！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T15:35:05.713

```
 _photo = [photo]; 
```

是无效的。

采用

```
 _photo = photo; 
```

*使用 ARC 的编译器非常智能，可以理解您想要做什么，保留或复制或释放。无需使用保留。你的陈述在语法上是错误的。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T15:35:40.377

ARC 会为您提供必要的保留和释放消息。你只做任务

```
_photo = photo; 
```

一切都会好起来的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T15:37:44.840

> xCode 发现一个问题 ARC 禁止显式消息发送保留...

`-retain`随着 ARC 的发布而被弃用。它现在是编译器需要插入的函数，并且不允许您调用。（但是，它仍然可以被覆盖）。

> _photo = [照片];

消息需要一个目标和一个选择器。您只提供了一个目标。取下大括号。分配将自动转换为类似的东西。

```
[self->_photo release];
self->_photo = [photo retain]; 
```

# batch-file - What does @ mean in Windows Batch scripts?

> ID：15551768
> 
> 赞同：2
> 
> 时间：2013-03-21T15:33:07.653
> 
> 标签：batch-file

Let me take `bundle.bat` file from [RubyInstaller](http://rubyinstaller.org/) to represent an example.

```
@ECHO OFF
IF NOT "%~f0" == "~f0" GOTO :WinNT
@"ruby.exe" "C:/Ruby200/bin/bundle" %1 %2 %3 %4 %5 %6 %7 %8 %9
GOTO :EOF
:WinNT
@"ruby.exe" "%~dpn0" %* 
```

I don't understand this:

1.  What does `@` mean here `@"ruby.exe"` and what for double quotes?

Here [in the manual](http://www.infionline.net/~wtnewton/batch/batguide.html#1a) I found some explanation:

> Explanation - the first line prevents the commands from being displayed, the @ in "@echo off" keeps *that* line from displaying.

And here are my two test scripts.

**The first one:**

```
@ECHO OFF
@ECHO "123"
ECHO "123"
PAUSE 
```

The output:

```
C:\win>batch.bat
"123"
"123" 
```

`@` does't keep line from displaying.

**The second:**

I want to call `gem environment` command from batch file. And here I'm guided by the code from `bundle.bat` file. My code:

```
@ECHO OFF
@"gem environment"
PAUSE 
```

The output is an error. Please notice two double quotes:

```
""gem environment"" is not a command or executable or package file. 
```

But in `bundle.bat` the line `@"ruby.exe" "%~dpn0" %*` works.

Now I change my script:

```
@ECHO OFF
REM Call like this...
@gem environment
REM or call like this.
gem environment
PAUSE 
```

Both work fine. The output:

```
RubyGems Environment:
  - RUBYGEMS VERSION: 2.0.3
  - RUBY VERSION: 2.0.0 (2013-02-24 patchlevel 0) [i386-mingw32]
  - INSTALLATION DIRECTORY: C:/Ruby200/lib/ruby/gems/2.0.0
  - RUBY EXECUTABLE: C:/Ruby200/bin/ruby.exe
  - EXECUTABLE DIRECTORY: C:/Ruby200/bin
  ... and so on 
```

So my questions are:

1.  What is the meaning of `@` character in Batch script?
2.  When do I have to double-quote the value after `@`?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T15:36:34.337

## 问题 1

Q1。批处理脚本中@字符的含义是什么？

该`@`字符确实会阻止显示该行。它不会阻止显示该行的*输出*（如果有）。

例如：

```
echo foo 
```

会显示这个：

```
echo foo
foo 
```

但是添加`@`这样的：

```
@echo foo 
```

你得到的只是输出：

```
foo 
```

一旦你转身`echo off`，`@`就没有用了，因为无论如何都没有显示任何线条。

* * *

## 问题2

Q2。我什么时候必须双引号 @ 之后的值？

示例代码中的双引号与`@`. 所有这些`@`都是导致该行不显示。

双引号可用于指向路径中包含空格的文件。例如，如果您尝试运行这样的程序：

```
C:\Program Files\foo.exe 
```

shell 只会解析到第一个空格，因此它会查找名为 的文件或命令`C:\Program`，并返回错误。

将其更改为：

```
"C:\Program Files\foo.exe" 
```

`C:\Program Files\foo.exe`如果存在，它将正确查找并运行它。

在您的情况下，如果您只是说`gem environment`，它可以找到命名的程序并作为参数`gem.exe`传入。`environment`但是，如果您引用它，`"gem environment"`，它正在寻找名为 的东西`gem environment.exe`。

# java - Update exception using JDBC on DB2

> ID：15551769
> 
> 赞同：4
> 
> 时间：2013-03-21T15:33:09.733
> 
> 标签：java, jdbc, db2

The code that causes the exception is the following:

```
 for (int i = 0; i < updateParams.size(); i++) {
        s = con.prepareStatement(sSQL);
        params = (String[][]) updateParams.get(i);
        setParamsPreparedStatement(s, params);
        log.debug("executeUpdates: " + sSQL + "[params:" + Arrays.deepToString(params) + "]");
        Date d = new Date();
        s.execute();
        log.info("STATEMENT EXECUTE TIME IN SECOND=" + (new Double(new Date().getTime() - d.getTime()) / 1000));
        rowcount += s.getUpdateCount();
        s.close();
    } 
```

The exact row of the exception is s.execute.

The stracktrace is:

```
com.ibm.db2.jcc.c.SqlException: The value of a host variable in the EXECUTE or OPEN statement is out of range for its corresponding use.
    at com.ibm.db2.jcc.c.fg.d(fg.java:1340)
    at com.ibm.db2.jcc.b.gb.k(gb.java:351)
    at com.ibm.db2.jcc.b.gb.a(gb.java:60)
    at com.ibm.db2.jcc.b.w.a(w.java:52)
    at com.ibm.db2.jcc.b.wb.c(wb.java:213)
    at com.ibm.db2.jcc.c.gg.ab(gg.java:1779)
    at com.ibm.db2.jcc.c.gg.d(gg.java:2324)
    at com.ibm.db2.jcc.c.gg.d(gg.java:2420)
    at com.ibm.db2.jcc.c.gg.X(gg.java:1332)
    at com.ibm.db2.jcc.c.gg.execute(gg.java:1316) 
```

The insert query is:

```
insert into CMP_RULES_ACTIONS (RULE_ID, ACTION_ID, CAMPAIGN_ID, creation_date, LAST_UPDATE_DATE, expiry_date, activation_date, enabled, priority, GROUP_ID, owner) values (?, ?, ?, sysdate, sysdate, to_date(?,'YYYY/MM/DD HH24:MI'), to_date(?,'YYYY/MM/DD HH24:MI'), 1, ?, ?, ?) 
```

Params are:

```
[params:[[freebuy_wv_scomm_bonus_perc_863, 12], [sendgenericbonuslist, 12], [863, 4], [2101/01/31 00:00, 12], [2013/03/21 16:14, 12], [0, 4], [null, 12], [null, 12]]] 
```

Googling the exception message gives nothing. I'm a newbie in DB2\. Can anybody help me?

**UPDATE**

An example of how I set parameters in the preparedstatement:

```
public void setParamsPreparedStatement(PreparedStatement s, String[][] params) throws Exception {
    log.debug("Params are: " + Arrays.deepToString(params));
    for (int i = 0; i < params.length; i++) {
        if (params[i][1].equals(ParamTypes.ORA_TYPE_INTEGER)) {
            if (params[i][0] != null && !params[i][0].trim().equals("")) {
                s.setInt(i + 1, Integer.parseInt(params[i][0]));
            } else {
                s.setNull(i + 1, Types.INTEGER);
            }
        }

 ...
} 
```

**SOLUTION**

I was trying to put a long string into a field that was too short. Now the field is longer and my code succeeds.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:12:34.393

问题是一个字段，即 RULE_ID，对于我试图插入的值（“freebuy_wv_scomm_bonus_perc_863”）来说太短了（VARCHAR(30)）。

# arrays - Index of largest element in an array

> ID：15551770
> 
> 赞同：5
> 
> 时间：2013-03-21T15:33:10.640
> 
> 标签：arrays, scala, for-loop

Does anyone know how to get the index of the largest element from this function:

The programming-language is scala

```
def indexOfLargestElement(arr: Array[Int]): Int = 
```

For example:

```
indexOfLargestElement(Array( 1, -6, 4, 5, 2, -1) ) == 3 
```

I don't get it -.-

Thanks for your help!

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T15:55:23.317

以下是单次遍历的方法：

```
def indexOfLargest(array: Seq[Int]): Int = {
    val result = array.foldLeft(-1,Int.MinValue,0) {
        case ((maxIndex, maxValue, currentIndex), currentValue) =>
            if(currentValue > maxValue) (currentIndex,currentValue,currentIndex+1)
            else (maxIndex,maxValue,currentIndex+1)
        }
    result._1
} 
```

这将使用（已知最大元素的索引；最大元素的值；当前索引）的元组来保存循环中的数据。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-21T15:38:48.133

```
// val l = Array(1, -6, 4, 5, 2, -1)
l.indexOf(l.max) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-21T16:12:18.960

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

@annotation.tailrec final def indexOfLargestElement(a: Array[Int], i: Int = -1, mi: Int = -1, ma: Int = Int.MinValue): Int = {
  val i1 = i + 1
  if (i1 < a.length) {
    val ai1 = a(i1)
    if (ai1 >= ma) indexOfLargestElement(a, i1, i1, ai1)
    else indexOfLargestElement(a, i1, mi, ma)
  } else mi
}

// Exiting paste mode, now interpreting.

indexOfLargestElement: (a: Array[Int], i: Int, mi: Int, ma: Int)Int

scala> indexOfLargestElement(Array(1, -6, 4, 5, 2, -1))
res0: Int = 3

scala> indexOfLargestElement(Array())
res1: Int = -1

scala> indexOfLargestElement(Array(Int.MinValue))
res2: Int = 0 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-21T16:54:31.900

我不确定性能如何，因为可能存在昂贵的隐式转换，而且我不知道实际使用了哪种排序算法。

还是这个

```
scala> val arr = Array( 1, -6, 4, 5, 2, -1)
arr: Array[Int] = Array(1, -6, 4, 5, 2, -1)

scala> arr.zipWithIndex.maxBy(_._1)._2
res1: Int = 3 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-11T04:12:42.757

我的解决方案非常基本，但很容易理解

```
/** 
 * Returns the max index or -1 if there is no max index
 */
def getMaxIndex(array: Array[Int]): Int = {
  var maxIndex = -1
  var max = Int.MinValue
  for {
    index <- 0 until array.length
    element <- array
  } {
    if (element > max) {
      max = element
      maxIndex = index
    }
  }
  maxIndex
} 
```

它几乎与

```
/** 
 * Returns the max index or -1 if there is no max index
 */
def getMaxIndex(array: Seq[Int]): Int = {
    val startIndex = 0
    val result = array.foldLeft(-1, Int.MinValue, startIndex) {
        case ((maxIndex, max, index), element) => {
            if(element > max) (index, element, index+1)
            else (maxIndex, max, index+1)
        }
    }
    result._1
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-21T01:51:21.990

相同的解决方案和上面的一些解决方案，但尾递归更多：

```
 def getMaxIndex(a: Array[Double]): Int = {
    val l = a.length

    def findMax(v: Double, k: Int, i: Int): Int = {
      if (i < l) {
        if (v < a(i)) findMax(a(i), i, i + 1) else findMax(v, k, i + 1)
      } else k
    }

    findMax(Double.NegativeInfinity, -1, 0)
  } 
```

真正的尾递归使过程更容易理解。它也更容易调用，只需获取矩阵本身，它不会以任何方式修改矩阵，使其快速。每个元素只访问一次。

基本上是 Alex Yarmula 和 Andriy Plokhotnyuk 解决方案的更简单版本。

# php - How to calculate time zone offset for a large application?

> ID：15551772
> 
> 赞同：2
> 
> 时间：2013-03-21T15:33:15.810
> 
> 标签：php, mysql, timezone, utc

As working on a large application I am trying to make the datetime stamps reconcile with the current user time. so If activity id done at 3:00PM then the every user see it at 3:00PM

So Here is solution steps to the problem. on this and please correct me or lead me to the right direction if I am not on the right direction.

1.  Store all datetime in MySql as UTC time.

2.  Store time zones in a table with the current offset. for example

    ```
    zone_id  zone_name  utc-offset
    1        Central    -6 
    ```

3.  In my users table I have a field for user_time_zone_id and in that field I will have the value "1" in the user setting so it will say that this user is using the system from "Central" location.

4.  In my php application configuration I set the default time zone to UTC like this

    ```
    date_default_timezone_set('UTC'); 
    ```

5.  Once I load this application I define the user offset and on each datetime out put I do the calculation of the time. for example `date('Y-m-d', strtotime($current_offset.' hour')) where $current_offset = -6` as it is define by the user profile upon the page load.

Here are my questions.

Is my approach to this problem correct? Is there a better way of doing this? How to calculate the daylight saving time? Please keep in mind that there are some parts of the country that does not have daylight saving.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:39:48.350

有一次我也遇到过类似的事情，最终尝试跟踪用户的时区和夏令时是一件很痛苦的事情，尤其是当你的一半客户在没有夏令时的 AZ 时。我不知道这对你来说是否可行，但我最终所做的只是将所有内容存储在 UTC 中，然后使用 JS 将其转换为带有`Date`对象的用户本地时间。它是通过 ajax 调用完成的，但如果需要，您也可以这样做`echo`。`document.write`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:59:58.393

您不需要使用`date_default_timezone_set`，使用对时区具有本机支持的[​​PHP`DateTime`类。](http://www.php.net/manual/en/class.datetime.php)或者，就像@romo 所说，您可以在客户端上使用 JavaScript 进行操作。

# ruby-on-rails - Rails rest-client put getting 400 bad request

> ID：15551773
> 
> 赞同：0
> 
> 时间：2013-03-21T15:33:18.467
> 
> 标签：ruby-on-rails, rest

In a Rails app, I need to read a seed number from another application and then update the seed by 1 using a REST interface. I'm using the gem 'rest-client'.

I can read the seed number OK using this:

```
 <% xml_data = RestClient.get "http://www.xxxxx.com/maxrest/rest/os/mxautokey?_lid=mxintadm&_lpwd=mxintadm&autokeyname=WORKORDERNUM&ORGID=AAAA" %>
      <% doc = Nokogiri::XML(xml_data)%>
      <% prefix = doc.at("PREFIX").text %>
      <% seed = doc.at("SEED").text %>
      <% wonum = prefix + seed %> 
```

But, I'm trying to put back a new seed using this (at first I'm just trying to use a hard coded number):

```
<% RestClient.put "http://www.xxxxx.com/maxrest/rest/os/mxautokey?_lid=mxintadm&_lpwd=mxintadm&autokeyname=WORKORDERNUM&ORGID=AAAA", {:seed => 38980} %> 
```

I get back - 400 Bad Request

I appreciate the help!

# algorithm - 如何在内存较少的矩阵中找到连续区域？

> ID：15551775
> 
> 赞同：0
> 
> 时间：2013-03-21T15:33:31.717
> 
> 标签：algorithm, memory, graph, language-agnostic, matrix

假设我有一个 0 和 1 的矩阵。现在我想计算矩阵中仅包含 1 的所有连续区域。

```
分配一个“已访问”的新矩阵来跟踪已访问的元素
计数 = 0
对于矩阵中的每个元素 E
  如果 E == 1 且 E 未被访问
    计数 = 计数 + 1
    运行 BFS/DFS 访问连接到 E 的所有未访问的矩阵元素
返回 COUNT

```

如果矩阵是 N x N，那么我们需要额外的 N x N“已访问”矩阵以及 BFS/DFS 的队列/堆栈。现在我想知道是否有一种算法可以解决这个问题并且需要更少的内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:45:27.623

如果内存如此关键，那么您可以使用以下方法：

另外只保留一个矩阵的一行长度的数组，然后从上到下扫描矩阵行，每次处理当前行时，其中有连续1的间隔，可以合并位于它们上面的不同块，对于例子

```
1110001110011
1111001110011
0011111000011 
```

如果您只考虑前 2 行，则存在三个不同的部分，但第 3 行合并了其中的前两个。所以你可以使用额外的数组来保存不同的部分直到最后一行，即最初它将用 0 填充，当你刚开始扫描矩阵的第 3 行时，该数组应该看起来像 1111002220033，即每个数字显示该单元格属于哪个部分。处理完第 3 行后，它们将被合并，额外的数组将变为 0011111000033。因此，在扫描每一行后，一些部分被合并，一些部分消失。每次零件消失时，您都可以增加计数器以最终得到答案。

但是，这比 BFS/DFS 更棘手和复杂，我认为您在实践中无论如何都不需要使用它。

# c# - fileupload C# 获取给定的确切路径

> ID：15551776
> 
> 赞同：0
> 
> 时间：2013-03-21T15:33:34.563
> 
> 标签：c#, jquery, asp.net, file-upload

我将 asp.net 与 c# 与 webforms 一起使用。

我有一个文件上传控件，我需要获取用户选择的确切路径。

我尝试了 Server.MapPath 和 Path.GetFullPath 以及所有内容，但这会给我完整的路径，如 c:\files\dbg.......

如果用户选择 \ServerT\files\nathan.txt 我需要这个确切的文本：“\ServerT\files\nathan.txt”...

到目前为止，从我所看到的情况来看，c# 似乎不允许这样做，但是有没有一种方法可以使用 jquery 捕获文本并将其放入具有 runat="server" 属性的隐藏字段中，然后从中检索值背后的代码？

底线：如果用户选择 \ServerT\files\nathan.txt 我需要确切的字符串“\ServerT\files\nathan.txt”...

# sql - 如何更新包含聚合函数或建议替代方式的派生表？

> ID：15551777
> 
> 赞同：1
> 
> 时间：2013-03-21T15:33:37.093
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我想更新一个表。但是查询返回错误

> 派生表“colIndex”不可更新，因为它包含聚合或 DISTINCT 或 GROUP BY 子句

我怎样才能做到这一点？如果没有直接的方式，也建议任何替代方式。

包括查询：

```
UPDATE COLINDEX
SET
    COLINDEX.QRESID = ROWINDEX.FRESID
FROM (SELECT QE.COLID,PS.ID SECID,PS.T_ID TEMPLATEID,QE.QUESTIONID,
    MIN(QE.SEQNUM) SEQNUM, Q.QRESID
    FROM SECTION PS
    JOIN SECTIONQUESTIONLINK SX ON PS.ID = SX.SECID
    JOIN QUESTION Q ON SX.QUESTIONID=Q.ID
    JOIN ELEMENT QE ON SX.QUESTIONID=QE.QUESTIONID
    WHERE QE.CONTROLID<>12 
    GROUP BY PS.ID,COLID,PS.T_ID,QE.QUESTIONID ,Q.QRESID)COLINDEX
JOIN (SELECT QE.SEQNUM FSEQNO,QE.ERESID FRESID,PS.ID SECID,PS.T_ID TEMPLATEID,QE.COLID FROM SECTION PS
    JOIN SECTIONQUESTIONLINK SX ON PS.ID = SX.SECID
    JOIN ELEMENT QE ON SX.QUESTIONID=QE.QUESTIONID
    WHERE QE.CONTROLID=12 AND QE.SEQNUM <= PS.COLUMNS + PS.ROWLABEL)ROWINDEX
ON COLINDEX.SECID=ROWINDEX.SECID AND COLINDEX.COLID=ROWINDEX.COLID
AND COLINDEX.TEMPLATEID=5000 
```

从这个查询的一部分正确地提取我想要更新的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:42:41.803

鉴于这`COLINDEX`是一个派生表——也就是说，它并不真正存在——你如何更新它？

看起来您真正想要的是更新`QUESTION`，即包含`QRESID`.

您需要重组更新语句。它应该类似于以下查询。明白我没有（因为我不能，没有你的桌子）以任何方式测试这个，它可以大大简化：

```
UPDATE QUESTION
SET QUESTION.QRESID = Source.FRESID
FROM QUESTION 
   JOIN ( SELECT QRESID, FRESID FROM
     (SELECT QE.COLID,PS.ID SECID,PS.T_ID TEMPLATEID,QE.QUESTIONID,
     MIN(QE.SEQNUM) SEQNUM, Q.QRESID
     FROM SECTION PS
    JOIN SECTIONQUESTIONLINK SX ON PS.ID = SX.SECID
    JOIN QUESTION Q ON SX.QUESTIONID=Q.ID
    JOIN ELEMENT QE ON SX.QUESTIONID=QE.QUESTIONID
    WHERE QE.CONTROLID<>12 
    GROUP BY PS.ID,COLID,PS.T_ID,QE.QUESTIONID ,Q.QRESID)COLINDEX
      JOIN (SELECT QE.SEQNUM FSEQNO,QE.ERESID FRESID,PS.ID SECID,PS.T_ID TEMPLATEID,QE.COLID     FROM SECTION PS
    JOIN SECTIONQUESTIONLINK SX ON PS.ID = SX.SECID
    JOIN ELEMENT QE ON SX.QUESTIONID=QE.QUESTIONID
    WHERE QE.CONTROLID=12 AND QE.SEQNUM <= PS.COLUMNS + PS.ROWLABEL)ROWINDEX
ON COLINDEX.SECID=ROWINDEX.SECID AND COLINDEX.COLID=ROWINDEX.COLID
AND COLINDEX.TEMPLATEID=5000) Source
ON Source.QRESID = QUESTION.QRESID 
```

# c# - C# 使用 System.Net.Mail 发送大量电子邮件

> ID：15551778
> 
> 赞同：0
> 
> 时间：2013-03-21T15:33:39.553
> 
> 标签：c#, asp.net-mvc, email, system.net.mail

我们有一个 ASP.NET MVC 应用程序，它每月通过电子邮件向客户发送大量报告。每封电子邮件都附有月结单。目前我们有大约 70 个客户，但随着时间的推移，这个数字有望增加。我们一直看到一些电子邮件没有被发送的问题。我们使用 System.Net.Mail API。

这是我们正在使用的代码，有更好的方法吗？

```
 foreach(string client in clients){

    SmtpClient client = new SmtpClient("server.com");

    BackgroundWorker emailInvoker = new BackgroundWorker();
    emailInvoker.DoWork += delegate
    {
      // Delay to prevent flow control, try later Relay error
      Thread.Sleep(TimeSpan.FromSeconds(2));
      client.Send(message);
    }

   emailInvoker.RunWorkerAsync();
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:39:59.270

> 我们一直看到一些电子邮件没有被发送的问题。

比其中一些没有被发送的更大（并且更有可能）的问题是其中许多没有被发送。

> ...有更好的方法吗？

在大多数情况下。Jeff Atwood 在[这篇博](http://www.codinghorror.com/blog/2010/04/so-youd-like-to-send-some-email-through-code.html)文中讨论了发送电子邮件的许多问题。那篇文章差不多是 3 年前的事了，即便如此，第一条评论还是建议使用邮戳。我使用了邮戳，它可靠地处理了通过代码以合理的价格发送电子邮件的问题。也就是说，现在市场上有更好的解决方案，我的公司目前非常想改用[mandrill](http://help.mandrill.com/home)。稍微好一点的定价，很棒的分析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:47:33.597

因为这是一个 ASP.NET MVC 应用程序，所以您需要了解您的应用程序池。创建多个线程会很快耗尽您的应用程序池，并且 IIS 可能会做一些时髦的事情来防止事情在发送电子邮件时完全停止。我会看看[我可以使用线程在 IIS 上执行长时间运行的作业吗？](https://stackoverflow.com/questions/536681/can-i-use-threads-to-carry-out-long-running-jobs-on-iis)如果您有兴趣了解更多信息。

如果我要重写它，我将创建一个用于`foreach`发送电子邮件的线程，而不是为每个客户创建一个线程。

```
 BackgroundWorker emailInvoker = new BackgroundWorker();

 emailInvoker.DoWork += delegate
 {
     // get your clients here somehow

     foreach(string client in clients){

         SmtpClient client = new SmtpClient("server.com");

         // Delay to prevent flow control, try later Relay error
         Thread.Sleep(TimeSpan.FromSeconds(2));
         client.Send(message);
     }
 }

 emailInvoker.RunWorkerAsync(); 
```

# html - 在新选项卡或窗口中打开链接

> ID：15551779
> 
> 赞同：1238
> 
> 时间：2013-03-21T15:33:40.960
> 
> 标签：html, tabs, hyperlink, window, href

`a href`是否可以在新选项卡而不是同一选项卡中打开链接？

```
<a href="http://your_url_here.html">Link</a> 
```

* * *

## 回答 #1

> 赞同：2226
> 
> 时间：2013-03-21T15:36:05.243

您应该在锚标记中添加`target="_blank"`and 。`rel="noopener noreferrer"`

例如：

```
<a target="_blank" rel="noopener noreferrer" href="http://your_url_here.html">Link</a> 
```

添加`rel="noopener noreferrer"`不是强制性的，但它是推荐的安全措施。更多信息可以在下面的链接中找到。

资源：

*   [MDN | HTML 元素`<a>`| 属性`target`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#attr-target)
*   [关于 rel=noopener](https://mathiasbynens.github.io/rel-noopener/)
*   [使用 rel="noopener" 打开外部锚点](https://developers.google.com/web/tools/lighthouse/audits/noopener)

* * *

## 回答 #2

> 赞同：218
> 
> 时间：2013-03-21T15:39:44.927

决定链接是在新选项卡还是新窗口中打开不应由您决定，因为最终该选择应由用户浏览器的设置来完成。有些人喜欢标签；有些喜欢新的窗户。

Using`_blank`将告诉浏览器使用新的选项卡/窗口，这取决于用户的浏览器配置以及他们单击链接的方式（例如，中键单击、`Ctrl`+单击或正常单击）。

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2013-03-21T15:36:26.627

将元素的`target`属性设置为`<a>``"_tab"`

编辑：它有效，但是 W3Schools 说没有这样的目标属性： [http ://www.w3schools.com/tags/att_a_target.asp](http://www.w3schools.com/tags/att_a_target.asp)

EDIT2：根据我从评论中得出的结论。将 target 设置为 _blank 会将您带到新的选项卡或窗口（取决于您的浏览器设置）。键入以下内容之一以外的任何内容都会创建一个新的选项卡组（我不确定它们是如何工作的）：

```
_blank  Opens the linked document in a new window or tab
_self   Opens the linked document in the same frame as it was clicked (this is default)
_parent Opens the linked document in the parent frame
_top    Opens the linked document in the full body of the window
framename   Opens the linked document in a named frame 
```

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2013-03-21T15:52:41.230

您可以通过设置简单地做到这一点`target="_blank"`，w3schools 有[一个示例](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_link_target)。

# xml - XSLT 1.0 - 删除重复字段

> ID：15551788
> 
> 赞同：1
> 
> 时间：2013-03-21T15:33:58.510
> 
> 标签：xml, xslt, xslt-1.0

我在删除重复节点时遇到了 XSLT V1.0 的问题。我有这个入口

```
 <?xml version="1.0" encoding="utf-8"?>
<myRoot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <Mappings>
        <Mapping fieldName="field1" >
        </Mapping>
        <Mapping fieldName="field1">
        </Mapping>
        <Mapping fieldName="field2" >
        </Mapping>
        <Mapping fieldName="field3" >
        </Mapping>
        <Mapping fieldName="field4">
        </Mapping>
    </Mappings>
</myRoot> 
```

## 我有这个 XSL 文件

```
 <?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"> 

    <xsl:output method="xml" encoding="utf-8" indent="yes"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="Mappings">
        <xsl:if test="not(following::Mappings[Mapping/@fieldName=current()/Mapping/@fieldName])">
            <xsl:copy>
                <xsl:apply-templates select="@*|node()"/>
            </xsl:copy>
        </xsl:if>       
    </xsl:template>

</xsl:stylesheet> 
```

我有与结果相同的条目 XML 文件！

我怎样才能摆脱重复的节点 () ？

我尝试了一切，但没有结果:(

我尝试 [使用 xslt](https://stackoverflow.com/questions/6768387/removing-duplicates-in-xml-with-xslt) [Transform 删除 xml 中的重复项以删除重复项并复制其余部分使用 XSLT](https://stackoverflow.com/questions/11001133/transform-to-remove-duplicate-and-copy-rest) [XSLT 1.0 文本列表将](https://stackoverflow.com/questions/11467010/xslt-1-0-textlist-to-individual-elements-and-duplicate-removal)[连续重复项删除到单个元素并删除重复项](https://stackoverflow.com/questions/8089240/removing-consecutive-duplicates-with-xslt)

……

我该怎么做才能得到这个结果？？

```
 <?xml version="1.0" encoding="utf-8"?>
    <myRoot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        <Mappings>
            <Mapping fieldName="field1">
            </Mapping>
            <Mapping fieldName="field2" >
            </Mapping>
            <Mapping fieldName="field3" >
            </Mapping>
            <Mapping fieldName="field4">
            </Mapping>
        </Mappings>
    </myRoot> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T04:04:14.057

**解决方案很简单（没有命名模板也没有使用`xsl:call-template`，只有两个模板，完全“推式”）**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kFieldNameByVal" match="@fieldName" use="."/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

  <xsl:template match=
   "Mapping[not(generate-id(@fieldName)
           = generate-id(key('kFieldNameByVal', @fieldName)[1]))]"/>

</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<myRoot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <Mappings>
        <Mapping fieldName="field1" >
        </Mapping>
        <Mapping fieldName="field1">
        </Mapping>
        <Mapping fieldName="field2" >
        </Mapping>
        <Mapping fieldName="field3" >
        </Mapping>
        <Mapping fieldName="field4">
        </Mapping>
    </Mappings>
</myRoot> 
```

**产生了想要的正确结果：**

```
<myRoot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <Mappings>
      <Mapping fieldName="field1"/>
      <Mapping fieldName="field2"/>
      <Mapping fieldName="field3"/>
      <Mapping fieldName="field4"/>
   </Mappings>
</myRoot> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:42:26.397

这里的问题是您的模板正在匹配`Mappings`并试图排除以下重复`Mappings`元素，但没有。

无论哪种情况，`following::`都不`preceding::`是在 XSLT 中选择不同值的好方法。相反，您应该使用[Muenchian 分组](http://www.jenitennison.com/xslt/grouping/muenchian.html)：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
  <xsl:strip-space elements="*" />

  <xsl:key name="kMapping" match="Mapping" use="@fieldName"/>

  <xsl:template match="@* | node()" name="Copy">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="Mapping[generate-id() = 
                               generate-id(key('kMapping', @fieldName)[1])]">
    <xsl:call-template name="Copy" />
  </xsl:template>
  <xsl:template match="Mapping" />
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生：

```
<myRoot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Mappings>
    <Mapping fieldName="field1" />
    <Mapping fieldName="field2" />
    <Mapping fieldName="field3" />
    <Mapping fieldName="field4" />
  </Mappings>
</myRoot> 
```

# google-app-engine - ndb.BlobProperty vs BlobStore：更私密、更安全

> ID：15551796
> 
> 赞同：7
> 
> 时间：2013-03-21T15:34:14.213
> 
> 标签：google-app-engine, python-2.7, google-cloud-datastore, blobstore, google-cloud-storage

我一直在阅读有关用于存储和检索图像文件的数据存储与 blobstore 的 stackoverflow。一切都指向 blobstore，除了一个：隐私和安全。

在数据存储中，我的用户的照片是私密的：我可以完全控制谁获得 blob。然而，在 blobstore 中，任何知道 url 的人都可以想象访问我的用户照片吗？真的吗？

这是一个应该让我安心的报价，但仍然不清楚。所以任何拥有 blob 密钥的人仍然可以访问照片吗？（来自[Blobstore 中的 Store Photos 或 Datastore 中的 Blob - 哪个更好/更高效/更便宜？](https://stackoverflow.com/questions/9362001/store-photos-in-blobstore-or-as-blobs-in-datastore-which-is-better-more-effici)）

> 从 Blobstore 中提供值的方式是接受对应用程序的请求，然后使用带有密钥的 X-AppEngine-BlobKey 标头进行响应。App Engine 拦截传出响应，并用直接从服务流式传输的 Blobstore 值替换正文。因为应用程序逻辑首先设置了标头，所以应用程序可以实现它想要的任何访问控制。没有默认 URL 可以直接从 Blobstore 中提供值而无需应用程序干预。

所有这一切都是为了问：对于传输图像，哪个更私密、更安全，为什么：数据存储区还是 blob 存储区？或者，嘿，google-cloud-storage（我目前对此一无所知）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:13:04.180

如果您使用 google.appengine.api.images.get_serving_url 那么是的，[返回的 url 是 public](https://developers.google.com/appengine/docs/python/images/functions#Image_get_serving_url "文档")。然而，返回的 url 不能从 blob 的键中猜测，甚至在调用 get_serving_url 之前该 url 也不存在。（或者在调用 delete_serving_url 之后）。

如果您需要对 blobstore 中的数据进行访问控制，[您可以编写自己的处理程序](https://developers.google.com/appengine/docs/python/blobstore/overview#Serving_a_Blob)并在那里添加访问控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:00:25.000

`BlobProperty`与 一样私密和安全`BlobStore`，一切都取决于您为请求提供服务的应用程序。您的应用程序可以在将内容发送给用户之前实施任何权限检查，因此只要您自己提供所有图像并且不故意创建公开可用的 URL，我看不出有任何区别。

实际上，我什至不会考虑`BlobProperty`在`BlobStore`. `BlobStore`，另一方面，便宜又方便。

# structuremap - NServiceBus 和引导程序结构图

> ID：15551801
> 
> 赞同：0
> 
> 时间：2013-03-21T15:34:24.097
> 
> 标签：structuremap, nservicebus, bootstrapper

通过在 .csdef 中进行配置和 azure Queue 详细信息，我使用`NServiceBus`的是通过约定的 azure worker 角色。`app.config`

我有一个通过这样做访问 IBus 的休息服务：

```
Configure.Instance.Builder.Build<IBus>() 
```

并且工作正常！

我有一个实现`IWantToRunAtStartup`配置引导程序的类，如下所示：

```
 Bootstrapper.With.StructureMap()
        .UsingAutoRegistration()
        .And.AutoMapper().Start(); 
```

如果我随后使用引导容器，我将丢失 IBus 参考：

```
Configure.Instance.StructureMapBuilder((IContainer) Bootstrapper.Container); 
```

如何使用`Bootsrtrapper.StructureMap`和`NServiceBus`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:14:45.137

告诉我们您要使用哪个容器需要从一个`IConfigureThisEndpoint`和`IWantCustomInitialization`类中完成，例如：

```
public class EndpointConfig : IConfigureThisEndpoint, AsA_Server, IWantCustomInitialization
{
    public void Init()
    {
        Configure.With()
            .StructureMapBuilder((IContainer) Bootstrapper.Container);
    }
} 
```

# c# - 将项目计数添加到 LINQ 选择

> ID：15551807
> 
> 赞同：4
> 
> 时间：2013-03-21T15:34:31.610
> 
> 标签：c#, linq, c#-4.0, sharepoint

我有一个问题，我无法解决问题。

我有一个 Sharepoint 项目列表，其中包含类别。我想阅读所有类别并计算它们出现的频率。

在另一种方法中，我想取 categoryCount，将它除以票的总数，然后乘以 100 得到一个百分比。

问题是伯爵。

到目前为止，这是我的查询：

```
public IEnumerable<KategorieVM> GetAllCategories()
{
int counter = 0;
var result = (from t in Tickets
where t.Kategorie != Kategorie.Invalid && t.Kategorie != Kategorie.None && t.Kategorie != null
select new KategorieVM() { _name = t.Kategorie.ToString(), _val = counter++ });

return result;
} 
```

问题是，我不能使用counter++。有干净的解决方法吗？为计算每个类别而构建查询的选项不是有效选项。该列表有 15000 个 Listitem 并且还在增长。最后，我需要遍历每个类别并调用查询来计算门票，这只需要大约 3 分钟。因此，必须在一个查询中计算类别。

非常感谢任何帮助。

/编辑：为了清楚起见：作为计数的计数器++只是一个脑残——我不知道我为什么要尝试它；这将产生一个索引。我需要一种方法来计算“类别”在这 15k 条目中出现的频率。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T15:37:29.543

您可以使用在查询本身内`GroupBy`执行：`Count`

```
return Tickets
           .Where(t =>  t.Kategorie != Kategorie.Invalid && t.Kategorie != Kategorie.None && t.Kategorie != null)
           .GroupBy(t => t.Kategorie.ToString())
           .Select(g => new KategorieVM() { _name = g.Key, _val = g.Count() }); 
```

# signalr - javascript中的SignalR回调

> ID：15551809
> 
> 赞同：3
> 
> 时间：2013-03-21T15:34:34.287
> 
> 标签：signalr, signalr.client

有没有办法为 SignalR 传递回调函数？现在我有我的`site.js`

```
messageHub.client.sendProgress = function (progress) {
        //doSomething with progress
} 
```

我想要的是

```
messageHub.client.sendProgress = function (progress,callback) {
        callback(progress);
} 
```

这将使我能够为同一个 signalR 方法定义来自网页的不同回调函数。现在我通过在我的网页上定义一个函数来以一种黑客的方式来做这件事

```
function fnSendProgress(progress) //define this for site.js.
    {
        //do something here
    } 
```

然后通过`site.js`调用它

```
messageHub.client.sendProgress = function (progress) {
        debugger;
        //have a definition of a function called fnSendProgress(progress)
        //if found it will call it else call default
        if (typeof fnSendProgress == 'function') {
            fnSendProgress(progress);
        }
        else {
                //do something at site.js level
        }

    }; 
```

它有效，但我想知道是否有更清洁的方法。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T08:10:45.893

使用闭包：

```
function createfunction(callback)
{
    return function(progress) { callback(progress); }
}

messageHub.client.sendProgress = createFunction(callback) 
```

首先，您定义一个函数“createFunction”，它给定一个回调返回另一个带有一个参数的函数，该函数调用指定的回调。

然后将调用该函数的结果分配给信号器的 sendProgress。

换句话说：对于您希望的每个回调，您动态生成一个带有一个参数的函数，该函数调用回调并将参数传递给它。

# regex - 在 Textpad 中使用 POSIX 非贪婪正则表达式

> ID：15551813
> 
> 赞同：1
> 
> 时间：2013-03-21T15:34:43.490
> 
> 标签：regex, textpad

我的 Textpad 配置为使用 POSIX 样式的 RegEx 进行搜索。我正在尝试对括号内的文本进行非贪婪搜索，包括括号，所以我正在做：

`\(.+?\)`

我希望这`?`会激活非贪婪搜索（例如，在 Java RegEx 中），但它没有。我不能进行非贪婪搜索，因为我有以下部分：

`(prnth_content_1) reg_textA (prnth_content_2) reg_textB (prnth_content_3) reg_textC`

我希望我的搜索一个接一个地停止每个带括号的匹配组，相反，它一直到返回的行上的最后一个闭合括号

`(prnth_content_1) reg_textA (prnth_content_2) reg_textB (prnth_content_3)`

我有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T15:38:12.293

使用字符类并搜索“非括号”。

例如

```
\([^)]+\) 
```

# asp.net - 数据库不存在

> ID：15551815
> 
> 赞同：1
> 
> 时间：2013-03-21T15:34:47.880
> 
> 标签：asp.net, database

这是我备份数据库的代码。
这些是我的数据库：
![在此处输入图像描述](../Images/cb6060c1029bc4016ea0c2c9b99d697b.png)

我得到了这个错误：

> 数据库“BakupDB”不存在。确保输入的名称正确。BACKUP DATABASE 异常终止。

我的网页的代码：

```
public partial class Default2 : System.Web.UI.Page
{
    string dbname = "BakupDB";
    SqlConnection sqlcon = new SqlConnection();
    SqlCommand sqlcmd = new SqlCommand();
    SqlDataAdapter da = new SqlDataAdapter();
    DataTable dt = new DataTable();

    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void Button1_Click1(object sender, EventArgs e)
    {
        //Mentioned Connection string make sure that user id and password sufficient previlages
        sqlcon.ConnectionString = @"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\BakupDB.mdf;Integrated Security=True;User Instance=True";

        //Enter destination directory where backup file stored
        string destdir = "D:\\backupdb";

        try
        {
            sqlcon.Open();
            sqlcmd = new SqlCommand("backup database "+dbname+" to disk='" + destdir + "\\" + DateTime.Now.ToString("ddMMyyyy_HHmmss") + ".Bak'", sqlcon);
            sqlcmd.ExecuteNonQuery();

            sqlcon.Close();
            Response.Write("Backup database successfully");
        }
        catch (Exception ex)
        {
            Response.Write("Error During backup database!");
        }
    }
} 
```

我错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:43:51.953

看起来您正在尝试使用[User Instance](http://msdn.microsoft.com/en-us/library/ms254504.aspx)。顺便说一句（与您的问题不是 100% 相关），我相信此功能在 SQL Server Express 2012 中已被弃用（并且自 SQL Server 2008 以来一直处于弃用路径）。

对不起旁边。关于您的问题，也许以下内容会对您有所帮助：

*   [堆栈溢出问题](https://stackoverflow.com/questions/4195721/why-is-it-such-a-mission-to-backup-a-sql-server-2008-express-database)
*   [使用SMO](http://blogs.msdn.com/b/sqlexpress/archive/2007/03/20/backup-and-restore-with-user-instances.aspx)完成任务

我会说 Stack Overflow 问题更接近您通过执行 SQL 命令尝试实现的用例，但如果您有兴趣或想尝试不同的方法，请参考 SMO 方式。根据 SO question，您的连接字符串似乎是：

```
sqlcon.ConnectionString = @"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\BakupDB.mdf;Integrated Security=True;User Instance=True"; 
```

缺少一个`Database=`部分，所以它可能应该如下所示：

```
sqlcon.ConnectionString = @"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\BakupDB.mdf;Integrated Security=True;User Instance=True;Database=BakupDB"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-15T16:00:23.833

这段代码对我有用：

```
private void button5_Click(object sender, EventArgs e)
{
    try
    {
        string dlink= @"DataSource=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\jsdb.mdf; Database=jsdb; User Instance=True; Integrated Security=True;Asynchronous Processing= True";
        SqlConnection dcc = new SqlConnection(dlink);
        dcc.Open();
            string database = "jsdb"; 
            string blc = textBox1.Text;  //(Its the location to save the file)
            string nm = "dbBackup";
            string dt =DateTime.Today.ToShortDateString();
            string sl = "BACKUP DATABASE "+database+" TO DISK = '"+blc+"\\"+nm+"-"+dt+".bak'" ;
            SqlCommand cql = new SqlCommand(sl,dcc);
            cql.ExecuteNonQuery();
            MessageBox.Show("Database backup completed successfully..");
            dcc.Close();
    } 
   catch (Exception ex)
    { MessageBox.Show(ex.Message); }
} 
```

# python - 从非 CB 服务器备份 Couchbase 2.0 集群

> ID：15551816
> 
> 赞同：1
> 
> 时间：2013-03-21T15:34:48.350
> 
> 标签：python, backup, couchbase

Couchbase 附带一个名为`cbbackup`（文档在[此处](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-backup-restore-backup-cbbackup.html)）的备份工具。

在我的设置中，我有一个由 4 个 Couchbase 节点组成的集群（我们称它们为 CB1、CB2、CB3、CB4）。

我想备份我的整个集群（包括设计文档和所有存储桶），但我想**从我的备份服务器**（我们称之为 B1）运行备份过程。

当我`cbbackup`（在 B1 上）运行并将其指向 CB1 时，我正确地下载并保存了来自所有节点的数据。但是，当尝试下载设计文档时，备份失败了。

查看代码，我注意到在执行节点过滤的两个地方有一个限制，它将返回的列表限制为以主机模式“localhost”或“127.0.0.1”开头的节点（这是在`pump.py`and中`pump_tap.py`）。

追溯这个逻辑，在我看来，不可能从 CB1 以外的节点备份 CB1 上的设计文档。

我错了吗？这可能吗？

如果不可能（后续问题），有人可以向我指出一个证明这一点的设计决策，或者解释决策背后的逻辑吗？

# c# - Visual Studio 包：设置自定义解决方案资源管理器上下文菜单项的可见性

> ID：15551817
> 
> 赞同：14
> 
> 时间：2013-03-21T15:34:53.943
> 
> 标签：c#, visual-studio-2012, visual-studio-package

我正在创建一个 Visual Studio 包（这是我的第一次），我的最终目标是为仅适用于某些文件类型的解决方案资源管理器创建一个上下文菜单项。（我认为这将是一个常见的事情，但没有找到任何像样的教程，所以如果你知道任何请告诉我）

我按照一个简单的 MSDN 指南首先在工具栏中创建了一个项目（我忘记了在哪里链接它），这很好。

然后我找到了一种将其移动到解决方案资源管理器上下文菜单的方法。这是通过操作`.vsct`文件并具有如下元素来实现的：

```
<Parent guid="guidSHLMainMenu" id="IDM_VS_CTXT_ITEMNODE"/> 
```

这可能无关紧要，但我正在尝试设置场景。

现在，因为我只想显示某些文件类型的项目，所以我需要找到一种方法来在按下右键单击按钮时检查文件。缩短了长时间的搜索，我[找到了这个](http://msdn.microsoft.com/en-us/library/bb165468%28v=vs.90%29.aspx)并最终得到以下代码：

```
protected override void Initialize()
{
    //stuff
    OleMenuCommandService mcs = GetService(typeof(IMenuCommandService)) as OleMenuCommandService;
    menuItem.BeforeQueryStatus += menuItem_BeforeQueryStatus;
    //more stuff
}

void menuItem_BeforeQueryStatus(object sender, EventArgs e)
{
    var myCommand = sender as OleMenuCommand;
    myCommand.Text = "NEW NAME";
} 
```

在上面的示例中，我只是尝试设置文本以尝试证明它有效，我知道有一个`Visible`属性，但我希望这一步首先起作用。该`BeforeQueryStatus`事件被触发，调试显示代码按预期执行。但是，上下文菜单项没有变化，它与原始文本保持一致。

我在这里想念什么？为什么不更新？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-22T10:21:18.703

好的，所以我终于找到了解决此问题的方法，您需要做几件事...

**第 1 步**：

我们需要指定 VSPackage 应该“自动加载”，我们这样做是为了在显示 ContextMenu 时执行代码，因为通常 VSPackage 在 UI 显示之前不会初始化（即菜单项已被单击）。为此，我们向 Package 类添加一个属性，如下所示：

```
[ProvideAutoLoad("{f1536ef8-92ec-443c-9ed7-fdadf150da82}")]
public sealed class MyFirstPackage : Package 
```

您可能想知道那个 GUID 值是什么，在这种情况下它代表`UICONTEXT_SolutionExists`常量，这意味着当存在解决方案时包将自动加载（所以当我们创建一个新的或加载一个时）。[我从这里得到了这些信息](http://msdn.microsoft.com/en-us/library/bb166762%28v=vs.80%29.aspx)，你可能会知道有[许多不同的 VSConstants](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.vsconstants_members%28v=vs.80%29.aspx)可以使用。

这里还有一些资源列出了可以使用的其他 GUID 值：

*   [GUID 列表 1](https://msdn.microsoft.com/en-us/library/Microsoft.VisualStudio.Shell.Interop.UIContextGuids%28v=vs.100%29.aspx?f=255&MSPPError=-2147217396)
*   [GUID 列表 2](http://www.mztools.com/articles/2013/MZ2013027.aspx)

**第 2 步**：

现在`BeforeQueryStatus`代码在正确的位置执行，为什么代码实际上没有改变任何东西仍然令人困惑（在我的问题中，我试图改变`Text`. 好吧，答案是，因为我们需要授予包这样做的权限（至少我认为它是这样的）。

为此，我们必须编辑`.vsct`文件。在里面我们可以找到一个`Buttons`元素，里面应该是我们的 ContextMenu `Button`。默认情况下，有一些评论提到了`CommandFlag`节点的使用——这就是我们想要的。

为了允许我们的包更改，`Text`我们必须添加以下节点：

```
<CommandFlag>TextChanges</CommandFlag> 
```

现在，如果我们运行 VSPackage，它应该会按预期工作！

如果您希望允许更改`Visibility`菜单项的权限（这是我最初的目标），那么您可以使用以下内容`CommandFlag`：

```
<CommandFlag>DynamicVisibility</CommandFlag> 
```

这里有一个[完整的命令标志列表](http://msdn.microsoft.com/en-gb/library/vstudio/bb491716.aspx)，并描述了它们的作用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-10-22T13:17:37.213

您可以使用以下命令，而不是直接使用 musefan 的答案中提到的 guid：

```
 [ProvideAutoLoad(Microsoft.VisualStudio.Shell.Interop.UIContextGuids.SolutionExists)] 
```

请参阅：[UIContextGuids 类](http://msdn.microsoft.com/en-us/library/Microsoft.VisualStudio.Shell.Interop.UIContextGuids(v=vs.100).aspx)以了解所有 guid 常量。

# javascript - 用java脚本隐藏表格行

> ID：15551819
> 
> 赞同：0
> 
> 时间：2013-03-21T15:34:59.013
> 
> 标签：javascript, jquery, html

我想使用 javascript 隐藏表格行。

这就是我现在的做法。但我知道有更好的方法来做到这一点。

我为每一行使用了表，每个表都有一个 id。

当根据选择在下拉列表中选择项目时，表格上应仅显示一行。

我桌子的一部分

```
<table width="100%" border="0" cellspacing="0" id="tableOneHDPT1">
          <tr>
            <td width="9%" align="center" bgcolor="#0471B2" height="30"><strong>Width</strong></td>
            <td width="10%" align="center" bgcolor="#0471B2"><strong>Length</strong></td>
            <td width="8%" align="center" bgcolor="#0471B2"><strong>Mil.</strong></td>
            <td width="15%" align="center" bgcolor="#0471B2"><strong>Rolls Per Case</strong></td>
            <td width="9%" align="center" bgcolor="#0471B2"><strong>1 Case</strong></td>
            <td width="10%" align="center" bgcolor="#0471B2"><strong>2 Case</strong></td>
            <td width="8%" align="center" bgcolor="#0471B2"><strong>5 Cases</strong></td>
            <td width="11%" align="center" bgcolor="#0471B2"><strong>10 Cases</strong></td>
            <td width="10%" align="center" bgcolor="#0471B2"><strong>25 Cases</strong></td>
            <td width="10%" align="center" bgcolor="#0471B2"><strong>60 Cases</strong></td>
            </tr>
          <tr>
            <td colspan="10" align="center"><table width="100%" border="0" cellspacing="0" cellpadding="0" id="PT1Row1">
              <tr>
                <td width="9%" align="center">2''</td>
                <td width="10%" align="center">55 yds.</td>
                <td width="8%" align="center">2</td>
                <td width="15%" align="center">72</td>
                <td width="9%" align="center">N/A</td>
                <td width="10%" align="center">N/A</td>
                <td width="8%" align="center">$4.12</td>
                <td width="11%" align="center">$3.64</td>
                <td width="10%" align="center">$3.04</td>
                <td width="10%" align="center">$2.54</td>
                </tr>
            </table></td>
            </tr></table> 
```

落下

```
<select name="TapeSizeHDPT" id="TapeSizeHDPT">
    <option selected="selected" value="-1">&lt;Select&gt;</option>
    <option value="HDPT1">2"x55 yds.</option>
    <option value="HDPT2">3"x55 yds.</option>
    <option value="HDPT3">2"x 110 yds.</option>
    <option value="HDPT4">3"x 110 yds.</option>
    <option value="HDPT5">2"x 1000 yds.</option>
    <option value="HDPT6">3"x 110 yds.</option>
</select> 
```

这是我的js：

```
$('#TapeSizeHDPT').change(function() {
    if ($('#TapeSizeHDPT option:selected').val() == "HDPT1") {
        $('#PT1Row1').show();
        $('#PT1Row2').hide();
        $('#PT1Row3').hide();
        $('#PT1Row4').hide();
        $('#PT1Row5').hide();
        $('#PT1Row6').hide();
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:41:27.357

您可以将其概括并写得更短，如下所示：

```
$('#TapeSizeHDPT').change(function () {        
   $('#PT1Row'+$(this).val().replace('HDPT')).show().siblings().hide();   
}); 
```

我们在这里所做的基本上是获取被选择的选项的数字部分并显示适当的`tr`，同时隐藏它的所有兄弟（即所有其他`tr`s）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:39:41.957

您可以隐藏 a 中的所有行`<TBODY>`：

```
$('#some_tbody').children().hide(); 
```

然后显示`<TR>`您要显示的 1：

```
$('#' + this.value).show(); // this.value is from the <select> onchange event 
```

为此，您需要一个`<TABLE>`with`<THEAD>`和`<TBODY>`：

```
<table>
  <thead>
    <tr>... THs here ...</tr>
  </thead>
  <tbody id="some_tbody">
    <tr id="HDPT1">...</tr>
    <tr id="HDPT2">...</tr>
    <tr id="HDPT3">...</tr>
    <tr id="HDPT4">...</tr>
  </tbody>
</table> 
```

而不是所有`<TR>`s 直接在`<TABLE>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:44:07.617

将下拉列表的值更改为数字 1,2...，然后

```
$('#TapeSizeHDPT').change(function () {
    var id = '#PT1Row' + $(this).val();
    $('#table').find(':visible').hide();     
    $(id).show();
}) 
```

# java - 会话在 30 分钟内注销，无论活动如何

> ID：15551823
> 
> 赞同：1
> 
> 时间：2013-03-21T15:35:06.670
> 
> 标签：java, web.xml, session-timeout

我在 web.xml 中将 <session-timeout> 设置为 30 分钟。如果我没记错的话，这个应该只有在会话处于非活动状态时才在 30 分钟内注销会话。但是在我的应用程序中，无论活动如何，用户都会在 30 分钟内注销。谁能帮我解决这个问题？我不是问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:00:54.047

可能有很多原因可能导致意外的会话超时，并且没有更多信息，我所能提供的只是一些指示和建议。

1.  你使用集群吗？如果这样做，请检查负载均衡器的算法和设置。用户请求是否在 30 分钟后转发到集群中的其他服务器？您是否在集群中配置了会话复制？确保负载均衡器不是罪魁祸首的另一种简单方法是关闭集群中除一个之外的所有其他服务器。因此，可以保证将请求发送到同一台服务器。然后，您可以检查 30 分钟超时是否仍然发生，无论用户活动如何。服务器访问日志还可以帮助您查看用户是否在服务器之间反弹。
2.  如果您安装了任何浏览器插件，例如 ieHTTPHeaders，请检查每个请求发送的会话 cookie，看看是否有任何变化。
3.  另一个问题是，如果您将 web.xml 中的 30 分钟超时更改为 15 分钟，无论用户活动如何，用户是否每 15 分钟超时一次？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:35:42.903

检查您是否没有收到每个请求的新会话。一个简单的方法是在会话中存储一个 Integer 并随着每个请求增加它。然后将整数的值（作为整数或字符串）添加到响应中并将其显示在页面上（如果需要，显示可能会将其作为隐藏字段添加到页面中）。

# javascript - Sencha Touch 2 - 将 javascript 添加到视图

> ID：15551824
> 
> 赞同：1
> 
> 时间：2013-03-21T15:35:12.863
> 
> 标签：javascript, view, sencha-touch

如何在 Sencha Touch 视图中使用 JS？

```
Ext.define('project.view.viewexample', {
extend: 'Ext.Panel',
xtype: 'asd',

config: {
    styleHtmlContent: true, 
    scrollabe: 'vertical',
    title: 'TITLE!',
    Html: '<html>code and also JS?'
}   
}); 
```

我有包含 jscode 的 htmlcode（在 Script-tags 中）。在这件事上使用它似乎不起作用，对吗？我也尝试过使用 tpl，但它并没有改变任何东西。

有人知道如何正确使用 JS 吗？一个更好的选择是在控制器中使用它，但在这种情况下，我不知道如何传递数据。

**编辑：** 我已经有点接近我认为的解决方案了。下面的代码显然是错误的，但也许有人可以看到我做错了什么：

```
Ext.define('projext.view.viewexample', {
extend: 'Ext.Panel',
xtype: 'gps',

config: {
    styleHtmlContent: true, 
    scrollabe: 'vertical',
    title: 'GPS',
    tpl: 'Här var det GPS'
},
constructor: function() {
    this.getPosition();
},
getPosition: function() {
    var geo = Ext.create('Ext.util.Geolocation', {
        autoUpdate: false,
        listeners: {
            locationupdate: function(geo) {
                alert('New latitude: ' + geo.getLatitude());
            },
            locationerror: function(geo, bTimeout, bPermissionDenied, bLocationUnavailable, message) {
                if(bTimeout){
                    alert('Timeout occurred.');
                } else {
                    alert('Error occurred.');
                }
            }
        }
    });
    geo.updateLocation();
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:45:16.667

配置`html`需要小写。

```
Ext.define('project.view.viewexample', {
    extend: 'Ext.Panel',

    styleHtmlContent: true, 
    scrollabe: 'vertical',
    title: 'TITLE!',
    html: 'define your html'
}); 
```

# ajax - 在 Ajax 调用中实现响应头

> ID：15551829
> 
> 赞同：0
> 
> 时间：2013-03-21T15:35:23.253
> 
> 标签：ajax, asp.net-mvc, jquery, cross-domain, crossdomain.xml

下面是我试图通过 Ajax 调用进行的跨域调用。我们使用的 Web 服务只返回 XML，所以我不能`jsonp`用作`dataType`. 正如我在下面写的，我在 Chrome 的调试器中收到以下错误：

`Uncaught ReferenceError: Request is not defined`

这是代码：

```
function GetProgramDetails() {
    var URL = "http://quahildy01/xRMDRMA02/xrmservices/2011/OrganizationData.svc/AccountSet?$select=AccountId,Name,neu_UniqueId&$filter=startswith(Name,\'" + $('.searchbox').val() + "\')";
    var sourceDomain = Request.Headers["Origin"];
    var request = $.ajax({
        type: 'POST',
        beforeSend: function(request){
            request.setRequestHeader("Access-Control-Allow-Origin", sourceDomain)
        },
        url: URL,
        contentType: "application/x-www-form-urlencoded",
        crossDomain: true,
        dataType: XMLHttpRequest,
        success: function (data) {
            console.log(data);
            alert(data);
        },
        error: function (data) {
            console.log(data);
            alert("Unable to process your resquest at this time.");
        }
    });
} 
```

编辑

我已经尝试了此代码的以下版本，并且在错误消息中没有看到任何不同。这是在企业环境中使用的，那么由于服务器上的安全功能，它是否可能无法正常工作？我是 Ajax 的新手，所以我不知道这是在 100% 的时间里有效还是在大多数情况下有效。

```
 beforeSend: function (request) {
            request.setRequestHeader("Access-Control-Allow-Origin: *")
        },

        beforeSend: function (request) {
            request.setRequestHeader("Access-Control-Allow-Origin: ", "http://localhost:55152")
        },

        beforeSend: function (request) {
            request.setRequestHeader("Access-Control-Allow-Origin", "http://localhost:55152")
        },

        beforeSend: function (request) {
            var sourceDomain = request.Headers["http://localhost:55152"];
            request.setRequestHeader("Access-Control-Allow-Origin: ", sourceDomain)
        },

        beforeSend: function (request) {
            var sourceDomain = location.protocol + '//' + location.host;
            request.setRequestHeader("Access-Control-Allow-Origin: ", sourceDomain)
        }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:35:55.147

这是你的问题：`var sourceDomain = Request.Headers["Origin"];`你没有`Request`用大写定义`R`。

您的问题的核心将在于跨域请求。这是可能的，并且您走在正确的轨道上，但`Access-Control-Allow-Origin`它是在服务器上设置为响应标头的东西，而不是客户端通过 XHR 作为请求标头发送的东西。请参阅[https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS#Access-Control-Allow-Origin](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS#Access-Control-Allow-Origin)

[请参阅 HTML5 Boilerplate .htaccess 作为如何在 Apache https://github.com/h5bp/html5-boilerplate/blob/master/.htaccess](https://github.com/h5bp/html5-boilerplate/blob/master/.htaccess)上进行设置的示例，并注意浏览器限制[https://www.bionicspirit。 com/blog/2011/03/24/cross-domain-requests.html](https://www.bionicspirit.com/blog/2011/03/24/cross-domain-requests.html) - 特别是这在 IE7 中不起作用并且 IE 不支持通配符`*`。

尝试模仿 jsonp（从服务器返回可执行的 JavaScript 代码）可以通过一些巧妙的编码来实现，但这会更加困难 -[在返回 XML 时使用 JSONP](https://stackoverflow.com/questions/3435454/using-jsonp-when-returning-xml)

此外，如果数据是敏感的，那么您可能不想在没有私钥方案的情况下执行任何类型的跨域请求，因为我不确定是否可以欺骗原始请求标头。另一种方法是为您的网站设置连接，以便在后端而不是前端共享数据。

此外，JavaScript 函数名称不大写，除非它们是构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:36:43.483

```
beforeSend: function(request){
    var sourceDomain = request.Headers["Origin"];
    request.setRequestHeader("Access-Control-Allow-Origin", sourceDomain)
}, 
```

您试图在创建请求*之前*访问它，从而引发未定义的错误。请求是传递给`beforeSend()`回调函数的 jqXHR 对象。

# cucumber-jvm - Cucumber-JVM 参数中的换行符

> ID：15551832
> 
> 赞同：0
> 
> 时间：2013-03-21T15:35:39.753
> 
> 标签：cucumber-jvm

有没有办法将包含换行符的参数传递到 Cucumber-JVM 场景中？

作为一种解决方法，我将“\n”字符串放入参数中，并在场景方法的开头用换行符替换它们，但感觉好像有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T06:58:20.443

您可以使用三引号来使用文档字符串。从官方 wiki [http://cukes.info/step-definitions.html窃取的示例](http://cukes.info/step-definitions.html)

```
Given a blog post named "Random" with Markdown body
  """
  Some Title, Eh?
  ==============
  Here is the first paragraph of my blog post. Lorem ipsum dolor sit amet,
  consectetur adipiscing elit.
  """ 
```

# c - 如何获取十进制数的前 x（最左边）数字

> ID：15551836
> 
> 赞同：2
> 
> 时间：2013-03-21T15:35:49.343
> 
> 标签：c, numbers

假设我有`n=1234`并且我想`x`获得`n`. 假设`x=2`，在 C 数学中我只是计算`1234/100`，我会得到`12`。但是我怎样才能以编程方式做到这一点？即，使用数学。我已经通过可怕的方式实现了它，转换为字符串并放置`0`在`x`位置。如果可能的话，我想避免使用内置的 C 函数，因为我的目标是稍后将算法转换为汇编语言。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T16:42:24.803

在不使用任何库函数的情况下，最好的方法是使用蛮力。整数可以取的最大值是 2147483648，所以我们不会处理任何超过它的事情。

```
int first_two(int value)
{
    assert(value >= 0);  // unspecified for negative numbers
    if (value >= 1000000000)
        return value / 100000000;
    if (value >= 100000000)
        return value / 10000000;
    if (value >= 10000000)
        return value / 1000000;
    if (value >= 1000000)
        return value / 100000;
    if (value >= 100000)
        return value / 10000;
    if (value >= 10000)
        return value / 1000;
    if (value >= 1000)
        return value / 100;
    if (value >= 100)
        return value / 10;
    return value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:33:33.160

您可以使用以下算法：保持分割`n`直到`10`你得到`n < 10^x`

在代码之后

```
int power10(int x) {
    int p = 1;
    while (x) {
        p *= 10;
        x--;
    }
    return p;
}

int main (void) {

    int x = 2;
    int n = 1234;
    int max = power10(x);

    int res = n;   
    while(res>=max)
        res = res/10;

   printf("%d\n",res);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T15:42:15.263

您可以通过获取您的数字的十进制对数的底数（如果是 1234，它是`floor(3.091315)`，即 3），加一，然后减去`n`- 所需的小数位数，以编程方式进行。这会给你`x`这样的整数除以原始值`10^x`给你想要的结果：

```
#include <math.h>
...
int num = 12345;
int n = 3;
int log10 = (log(num)/log(10))+1;
int divisor = pow(10, log10-n);
int res = num / divisor;
printf("%d\n", res); 
```

这是[关于 ideone 的演示](http://ideone.com/XrQPWx)。

由于涉及数学函数，将上述转换为汇编将是棘手的。您可以通过定义一个十的幂表来简化它，在其中搜索大于或等于所需数字的第一个项目（`log10`上面给出了你），然后抓住`log10-n`-th 条目，给你`pow(10, log10-n)`：

```
int pow10[] = {1, 10, 100, 1000, 10000, 100000, 1000000, 10000000, 100000000, 1000000000};

int main(void) {
    int num = 12345;
    int n = 3;
    int log10 = 0;
    while (pow10[log10] < num) {
        log10++;
    }
    int divisor = pow10[log10-n];
    int res = num / divisor;
    printf("log10(num)+1=%d, divisor=%d, result=%d\n", log10, divisor, res);
    return 0;
} 
```

这是[修改后的演示](http://ideone.com/h90Itk)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-29T07:40:48.703

```
int getLeftDigits(double num, double numOfDigits)
{
double divider = pow(10, numOfDigits);

if (num < divider)
    return num;

getLeftDigits(num/10, numOfDigits);
} 
```

如果你想避免使用 pow 函数，你可以自己实现它，如这里的其他评论之一所示。

# javascript - JavaScript (jquery) - 点击事件中的范围问题

> ID：15551838
> 
> 赞同：0
> 
> 时间：2013-03-21T15:35:54.933
> 
> 标签：javascript, jquery, class, scope

我知道这个主题已经在类似的主题中讨论过，但是我能找到的解决方案都不能帮助我理解我遇到的问题。

这是我的简化类，通常是我定义它们。

```
BottomNav = function() {
  this.init();
}

$.extend(BottomNav.prototype, {
  init: function(){

      this.insue = false;

     $(".up").click($.proxy(function () {
            var thisinuse = this.inuse;
            if(this.inuse===false) {
              this.inuse = true;
              this.moveSlider('up');
        }
     },this));
  },
  moveSlider: function(d){
    //some instructions
        alert('move slider');
  } 
 });

$(document).ready(function() {
    new BottomNav();
}); 
```

**在 FireBug 的点击事件里面的断点上 this.inuse 是未定义的！（这是我的问题），我的范围在手表上看起来不错（萤火虫的右侧面板），this.insue 应该是错误的**- 抱歉我还不能发布图片！

我会很感激有人可能会帮助识别这种非常奇怪的行为。

我尝试了一些工作人员，例如将单击事件定义放在另一个函数中，但它也不起作用。我尝试了不同的绑定方式，但它也不起作用。

但是，下面的示例正在处理我制作的许多其他类。我可以从事件、效果访问类范围。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:39:10.627

这只是一个错字：

```
 this.insue = false; 
```

更改`insue`为`inuse`，属性将在那里:-)

除此之外，这里的变量`thisinuse`是多余的。并将条件更改为`if(! this.inuse)`而不是与布尔值进行比较...</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:38:12.407

`this.inuse`可以分配给单击事件处理程序外部的变量，并在处理程序内部使用该变量。

# php - 在浏览器关闭时执行 MySQL 查询

> ID：15551841
> 
> 赞同：-1
> 
> 时间：2013-03-21T15:36:04.297
> 
> 标签：php, javascript, mysql

当用户关闭浏览器时，我正在尝试执行 MySQL 查询。我已经设法使用 onbeforeunload ，但它仅适用于 Chrome 和关闭选项卡时。

然后我尝试了这个 PHP 示例：

```
 <?php 
    include "db/dbc.php";
    ignore_user_abort(true);
    ob_end_clean();
    echo "Testing connection handling"; 

    if (connection_status() == 1){
    mysql_query("DELETE FROM online WHERE id='55'");

    }
    echo "test"; 
    flush(); 

?> 
```

但这也不起作用。有人有任何工作示例吗？当浏览器关闭时，我真的必须从数据库中删除帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:06:42.797

我们已经通过 cron 作业解决了这个问题，检查用户是否登录 5 分钟。谢谢你的所有想法=）

谁把这件事投了反对票？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:46:44.983

与您拥有的评论说明相关，通过拥有不断与用户浏览器和会话通信的代码，您可以识别某人何时“在线”。许多与此相关的旧方法，特别是对于 PHP，利用数据库表来更新用户打开会话的“上次看到”值。如果他们在 X 分钟内没有被“看到”，它会认为他们“离线”。这些天来，如前所述，使用 AJAX 等，您可以做得更好。

正如其他人所提到的，您正在使用的这种方法不可靠，不应该以这种方式进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:47:22.593

您可以尝试使用 Javascript 执行此操作并检查窗口关闭事件，但这取决于浏览器是否支持。

您可以做的是创建一个表来记录人们何时访问您的站点，然后运行一个 cron 作业来检查他们更改页面后的时间。如果超过 X 分钟，则将该用户的状态设置为离线。

> 来源 - K2xL

# java - 如何使用模型实现简单的 REST 和 ContentProvider 架构？

> ID：15551844
> 
> 赞同：10
> 
> 时间：2013-03-21T15:36:06.557
> 
> 标签：java, android, rest

我目前正在开发一个与 RESTful 网络服务交互的 android 应用程序。客户端能够在 Web 服务上执行完整的 CRUD。在搜索了最佳实践之后，我观看了**Google I/O 2010 关于 REST 客户端的主题演讲**，几乎所有文章都引用了该主题演讲。

为了尽可能多地使用 android 平台，我决定使用**选项 B**，使用 a`ContentProvider`和 a `SyncAdapter`。这为我提供了内置帐户系统、内容观察者和互联网可用时的定期同步。

因为我们应用程序的一项非常重要的功能是离线编辑和可用性（它用于接收不良的环境），我们希望尽可能多地在本地保存相关数据。

客户端使用**Json**中的**RESTful API**与服务器通信，来自服务器的数据使用**模型**上的**Gson**（POJO，普通旧 java 对象）进行反序列化。

 ******为了使代码清晰易读，我尝试构建自己的**对象映射器**，而不是直接使用 a `Cursor`。此映射器提供默认的 CRUD 操作，并在读取数据时将**光标**映射到**模型**，在写入数据时将**模型**映射到**ContentValues 。**

**但是，这种架构感觉非常臃肿。**

*   首先，不可能获得有关当前的可靠信息`SyncState`（以向用户提供反馈）。[（现在使用这个 SO 答案](https://stackoverflow.com/questions/12914941/syncadapter-running-animation-how-to-know-if-syncadapter-is-actively-synchroni)“被黑”了）

*   第二个问题是，对于我需要的每个资源：**模型、映射器、表定义和 ContentProvider URI**。仅针对一种资源就需要管理大量代码。

*   第三个问题是通过我的映射器需要模型，我阻止自己`CursorLoader`在活动中使用 a。

**底线**

我正在寻找一种可**维护**且**轻量级**的方式来获得**离线内容并使用****Json**与 RESTful 网络服务同步。此外，我希望能够在我的代码中使用**模型**`user.getName()`，因为它比开发人员更友好`cursor.getString(cursor.getColumnIndex(UserDataSource.COLUMN_NAME));`（目前隐藏在我的 Mapper 类中）。

映射的一个很好的例子是[Dapper](https://code.google.com/p/dapper-dot-net/)与为 .NET 编写的[Dapper Extensions](https://github.com/tmsmith/Dapper-Extensions)相结合，但与我的方法类似，但是我的方法需要在许多不同的文件中定义所有列和字段（见上文）。

另外，我正在考虑`ContentProvider`从我的代码中删除它，因为对于这样一个简单的任务，它感觉非常臃肿和过时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:49:52.453

您是否考虑过使用 ORM？过去，我使用[OrmLite](http://ormlite.com/)和[Jackson](http://jackson.codehaus.org/)的组合取得了成功。您将不得不编写自己的同步服务，但 OrmLite 会在您的数据模型方面负责繁重的工作。

尽管您不会获得 ContentProvider + SyncAdapter 组合提供的一些细节（使用 POJO 时仍然没有 CursorLoader），但这种设置可以减轻复杂模式和/或大量类型的负担。

这是 OrmLite 主页上的表定义示例：

```
@DatabaseTable(tableName = "accounts")
public class Account {
    @DatabaseField(id = true)
    private String name;

    @DatabaseField(canBeNull = false)
    private String password;   
} 
```

如您所见，模型 + 映射 + 表定义非常快速且轻松地结合在一起。******

# c# - CodedUI 在运行时声明 [TestMethod]

> ID：15551847
> 
> 赞同：0
> 
> 时间：2013-03-21T15:36:09.610
> 
> 标签：c#, visual-studio-2010, automation, coded-ui-tests, smoke-testing

我有一个相当大的编码 UI 测试，并在其自己的 .cs 类文件中设置了每个任务。测试的主要目的是检查对象是否已加载到浏览器的各个页面上。测试设置为循环通过一个 XML 配置文件，并在用户认为合适的时候调用 XML 中列出的每个方法。

因为我不希望每个测试方法每次都运行，所以我没有在每个类/方法的顶部声明 [TestMethod] 属性。不幸的是，这意味着调用的每个方法都不会单独显示在测试结果视图中，这是一个很大的缺点。

有没有一种方法可以在每次调用方法时应用 [TestMethod] 属性，但仅限于我想要的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T12:48:58.050

测试运行程序使用测试程序集上的反射来查找具有 [TestMethod] 属性的方法，然后一一调用这些方法来执行测试。要执行您想要的操作，您需要更改测试运行程序，即便如此，您也必须做一些事情来更改测试程序集的 IL 以动态添加属性、重新加载程序集，并且可能还有很多其他操作我在掩饰的事情。如果你能做到这一点，你基本上就是在编写自己的测试框架。

相反，您是否有不想使用[测试列表](http://msdn.microsoft.com/en-us/library/ms182462%28v=vs.100%29.aspx)的原因？他们做你似乎要求的事情。

# mysql - TeamSpeak3 服务器迁移

> ID：15551849
> 
> 赞同：0
> 
> 时间：2013-03-21T15:36:20.927
> 
> 标签：mysql, linux, migration

我正在寻找一种将所有 ts3 设置从一台 linux 机器复制到另一台机器的解决方案。这包括所有用户设置、频道、服务器设置等。实际上是一个完整的迁移。问题是，我使用 mysqlite 作为 ts3 的 db，现在使用 mysql。那么我现在该怎么做呢？

任何建议都有帮助！

先感谢您。

马可

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:42:13.560

这就是我前一阵子的做法：

1.  下载 SQLite 数据库
2.  下载 SQliteExplorer ( [http://sourceforge.net/projects/sqlitebrowser/](http://sourceforge.net/projects/sqlitebrowser/) )
3.  使用 SQliteExplorer 将数据库导出到 SQL 文件
4.  将 SQL 导入 MySQL 数据库
5.  创建一个在运行包含连接参数的teampeak服务器时触发的.ini文件

# wpf - 如何强制 Visual Studio 设计视图使用经典主题呈现？

> ID：15551854
> 
> 赞同：7
> 
> 时间：2013-03-21T15:36:34.047
> 
> 标签：wpf, visual-studio-2010, design-view

我的问题如下：

我在 Windows 8 上的 Visual Studio 2010 中设计了我的 WPF 应用程序。我知道该应用程序只会在 Windows XP 经典模式下使用。

我在 Visual Studio 的设计视图中看到的内容与我在 Windows XP 上的最终结果不符。字体有点不同，因此一些文本框最终会太小或太大。

有什么方法可以强制 Visual Studio 的设计视图使用 Windows XP 的经典主题，而不是我当前操作系统中的主题或它能够使用的最现代的主题？

我尝试了以下方法：

```
<ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="/PresentationFramework.Classic;component/themes/classic.xaml" />
</ResourceDictionary.MergedDictionaries> 
```

然而没有运气。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T10:38:05.573

我认为您需要使用 Expression Blend 来获得使用 Classic 主题呈现的设计时视图。它比 VS 2010 中可用的设计器更先进。VS 2012 中的 xaml 设计器已更新，具有来自 Blend 的更多高级功能，并且还支持在 Visual Studio 中设计时使用指定主题进行渲染。

因此，如果您需要具有经典主题的 WYSIWYG 设计器，您可以使用 Blend 和以下资源来完成：

```
<Application.Resources>
    <ResourceDictionary Source="/PresentationFramework.Classic;component/themes/classic.xaml" />
</Application.Resources> 
```

Blend 中的设计器结果如下所示（Blend for Visual Studio 2012）：

![Blend的截图](../Images/b4d7aaf0399d51116d48ff126ff6097d.png)

为了更清楚地了解 VS 2010 和 VS 2012 之间的区别：

*   VS 2010 WPF 设计器有限，如果继续使用 2010，您将需要使用 Expression Blend 才能在设计模式下获得真正的主题
*   VS 2012 有一个新的更好的 WPF 设计器，它基于 Blend
*   Blend for VS 2012 随 VS 2012 一起提供，但仅限于 RTM 版本中的 ModernUI 项目
*   Blend for VS 2012 需要更新 2（目前 CTP 4 可用）来处理桌面应用程序的 WPF 项目，正如 lordcheeto 在他的评论中所说

# angularjs - 如何在 AngularJS 中“急切加载”服务？（在需要之前自动实例化它）

> ID：15551855
> 
> 赞同：16
> 
> 时间：2013-03-21T15:36:35.510
> 
> 标签：angularjs, lazy-loading, lazy-initialization, angularjs-service

我正在尝试实现这样的程序结构：

![在此处输入图像描述](../Images/3f60740f14ff14d621ba9f0a67540ccc.png)

这里的问题是，当一开始没有明显的控制器使用 Features 时，它们没有被实例化，也没有在 中注册`FeatureRegistry`，因此它们不能显示在 View 中。但我想要实现的是它们显示在视图中，然后通过加载模板`ng-include`，然后在模板中为每个功能都有特定的控制器。这些控制器是使用功能的控制器。

这些功能基本上只是用来说明模板和图标的位置、使用哪个以及启动功能的开始。

但回到我最初的问题：
**即使目前不需要服务，如何实例化服务？**

或者是否有其他功能，我可以使用它来代替服务？我也想如果你指出我的话:)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-21T17:33:41.767

`run`您可以在应用程序的一部分中请求它，注入器将调用它。

```
angular.module("myApp", []).
    factory("EagerService", function () {
        console.log("I'm ready.");
    }).
    run(function (EagerService) {
        console.log("EagerService is ready.");
    }); 
```

然而，据我了解，您有需要 this 的子/子控制器`EagerService`。你为什么不在那里注射呢？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-09-01T19:48:54.683

（因为这是相对较旧的 - 这个答案是为未来的读者准备的 - 但我偶然发现了这个问题，所以也许其他人也会）如果你使用提供者/配置块 - 它们是急切地完成的，所以最好在那里做急切的初始化代码。您正在/可能正在考虑服务/运行块。

为了用代码进行演示，这个警报不会弹出（假设`myServiceModule`是您的应用程序依赖的模块并且`myService`没有在任何地方注入）：

```
angular.module('myServiceModule', []).service('myService', function () {
    alert("service");

    // service
    return {};
}); 
```

但是**，即使没有人依赖该`myProvider`服务**，也会弹出此警报：

```
angular.module('myProviderModule', []).provider('myProvider', function () {
    alert("provider");

    // Define your service here. Can be an array of inject-ables 
    // instead of a function.
    this.$get = function () {
        // service
        return {};
    };
}); 
```

[您可以在这个plunker](http://plnkr.co/edit/qjcNlMIefDb3kPfhrVqz?p=preview)中看到这一点。

[在此处](https://docs.angularjs.org/guide/providers)的官方文档中阅读有关提供程序的更多信息。

# python - numpy数组中数字的含义是什么？

> ID：15551861
> 
> 赞同：1
> 
> 时间：2013-03-21T15:36:45.760
> 
> 标签：python, image-processing, numpy, scipy

中`numpy`，该`array`方法可以将图像转换为一个大数组，问题是，这个数组中的数字是什么意思？（RGB值？灰度值？）

更重要的是，当我将图像转换为模式“1”时，尝试了

```
im = Image.open("test.jpg")
# Some processing ...
im = im.convert("1")
im_arr = array(im,dtype=uint8) 
```

我发现 im_arr 数组不仅显示 0 和 255：

```
array([[170, 170, 170, ..., 255, 255, 255],
       [255, 248, 255, ..., 175, 255, 222],
       [255, 255, 247, ..., 175, 170, 171],
       ..., 
       [ 32, 105, 110, ...,  32, 124,  32],
       [ 32,  32,  32, ..., 101, 115,  39],
       [ 41,  10,  32, ..., 109, 111, 115]], dtype=uint8) 
```

为什么？（我真的很想知道不同模式数组中数字的含义）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:31:32.370

通过运行`im.convert("1")`，您将加载的图像转换为仅*应*具有 0 或 255 像素值的双层图像。要正确执行此操作，

```
im_arr = np.array(im.getdata(), dtype = np.uint8).reshape(im.size[0], im.size[1]) 
```

这样，您将收到所需的双层图像，您可以使用 保存或查看`matplotlib.pyplot.imshow`。

您收到的奇数来自转换过程到一个 numpy 数组。如果您选择不同的数据类型（`np.int`, `np.int8`, `np.uint8`, ...），您会发现它们中的每一个都返回不同的数组。

在不了解 的对象结构的情况下`PIL.Image`，我无法说出这是为什么。但我认为可以肯定地说，没有`.getdata()`结果就是垃圾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:32:44.577

格式 jpeg 不支持模式 1。将其保存为不同的格式，png 或 bmp，然后查看该格式的数组。

[PIL Jpeg 的文档](http://www.pythonware.com/library/pil/handbook/format-jpeg.htm)

# vb.net - VBScript 类 类的私有数组在赋值后不断为空

> ID：15551863
> 
> 赞同：0
> 
> 时间：2013-03-21T15:36:51.370
> 
> 标签：vb.net, vbscript, wsh, windows-scripting

我有一个问题，我有一个属性是数组的类。Load 方法将数组的大小调整为文件中的条目数，为该文件条目创建一个新的条目类，并将其分配给属性数组中的一个新元素。但是，当我尝试在 Load 方法之外使用此数组时，数组保持正确的大小，但所有元素都是“空的”。下面基本上是我想要做的。我假设这是分配新 Entry 类的范围问题，但我不知道如何纠正这个对 VBScript 来说是新的。下面是一些快速代码，可让您了解我正在尝试的内容。

```
Class Entry
    Public Name
End Class

Class Config
    Private theArray()

    Public Sub Load()
        ...
        Do While Not configFile.AtEndOfStream

        if(UBound(theArray) < theCount) Then
            ReDim Preserve theArray(theCount)
        End If

        Set theArray(theCount) = new Entry

        theArray(theCount).Name = "Bobby Joe Sue"
        Wscript.Echo theArray(theCount).Name & " is working"
    End Sub

    Public Function GetList()
        GetList = theArray
    End Function
End Class 
```

现在，如果我创建 Config 类的一个实例，调用 load 方法，为 GetList 结果分配一个变量，我可以循环遍历数组，它将是正确的大小。但是，数组中的每个条目都是空的，而不是我可以访问 Entry.Name 的 Entry 类的实例。有人对如何解决此问题有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:59:20.340

也许你错过了什么。

```
Set oConfig = New Config
oConfig.Load
aList = oConfig.List
Wscript.Echo "Type: " & TypeName(aList(0))
Wscript.Echo "Name: " & aList(0).Name

'> Bobby Joe Sue is working
'> Type: Entry
'> Name: Bobby Joe Sue

Class Entry
    Public Name
End Class

Class Config
    Private theArray()
    Private theCount

    Public Property Get List()
        List = theArray
    End Property

    Public Sub Load()
        theCount = theCount + 1
        ReDim Preserve theArray(theCount)
        Set theArray(theCount) = new Entry
        theArray(theCount).Name = "Bobby Joe Sue"
        Wscript.Echo theArray(theCount).Name & " is working"
    End Sub

    Private Sub Class_Initialize
        theCount = -1
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:17:29.593

您的数组初始化不起作用。像这样改变你`Class Config`：

```
Class Config
  Private theArray

  Private Sub class_initialize()
    theArray = Array()
  End Sub

  '...
End Class 
```

# c# - 是否存在不与 .NET mono GC 交互的 C# 类列表数据结构？

> ID：15551865
> 
> 赞同：1
> 
> 时间：2013-03-21T15:36:59.247
> 
> 标签：c#, .net-3.5, unity3d

是否有不与 Unity 3.5/4 .NET mono GC 交互的 C# 类列表数据结构？

我知道 C# 结构的行为类似于 Unity 中的范围变量，并且不受 GC 控制。我想知道如果可能的话，是否有任何免费的 GC`IEnumerable`兼容的类似 List 的结构 - 能够过滤、添加元素并从中删除？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:39:49.973

使用 .NET 时，任何“可增长”的对象都将由 GC 控制，因为它需要动态分配。

如果您的大小总是很小，您可能会创建一个“集合”类型，包装来自[stackalloc](http://msdn.microsoft.com/en-us/library/cx9s2sy4%28v=vs.110%29.aspx)的指针来模拟这一点，但它不会像普通列表那样表现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T15:53:41.413

防止大量分配/解除分配并因此导致 GC 运行的一种方法是使用池。这是您分配一定数量的对象，然后保持分配它们的地方。

当您需要一个新对象时，您只需从池中取出一个未使用的对象。您不会删除对象，只需将它们标记为未使用。

另见这篇文章：[如果我每次创建粒子时都强制重新初始化每个粒子，我是否应该为粒子使用池](https://stackoverflow.com/questions/14387615/should-i-use-pools-for-particles-if-i-forced-to-re-init-every-particle-every-tim)

# ios - UITabBar 来到 uinavigation 控制器

> ID：15551866
> 
> 赞同：0
> 
> 时间：2013-03-21T15:37:03.313
> 
> 标签：ios, objective-c, uinavigationcontroller, uitabbarcontroller, uitabbar

我在视图控制器中有一个注销按钮，我有一个 tabbarmenu，当我按下注销时，我可以注销，但我的 tabbarMenu 来到了我的导航视图控制器，

你能帮我解决这个问题吗，在此先感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:42:35.643

我认为你的意思是你在一个标签栏控制器中，当你注销时，你想导航到你的 loginViewController。这种情况正在发生，但您的标签栏仍然可见，并且您希望标签栏在您注销时消失。

标签栏仍然可见的原因是因为您没有离开 tabBarController。您正在其中一个选项卡中导航*到*新的 loginController。

如果我对您问题的解释大致正确，您将在这里找到答案：

[如何处理 UINavigationControllers 和 UITabBarControllers iOS 6.1](https://stackoverflow.com/questions/15400827/how-to-handle-uinavigationcontrollers-and-uitabbarcontrollers-ios-6-1/15454094#15454094)

它显示了如何处理登录屏幕 - >选项卡栏控制器，每个屏幕上都有一个注销按钮，它将正确地返回您的登录屏幕（注意 - 它不会创建一个*新*的登录屏幕，就像您在这里所做的那样，它更多正确地将您导航回原始登录屏幕）。

# gtk - 如何最大化 GtkGrid 以填充整个 GtkWindow？

> ID：15551868
> 
> 赞同：1
> 
> 时间：2013-03-21T15:37:10.613
> 
> 标签：gtk, gtk3

我用简单的布局制作了一个基本`GtkGrid`应用程序，但我无法`GtkGrid`填充整个`GtkWindow`. 这是创建布局的代码：

```
GtkWidget *window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
gtk_window_set_default_size(GTK_WINDOW(window), 800, 600);

GtkWidget *grid = gtk_grid_new();
g_signal_connect(window,"destroy", G_CALLBACK(gtk_main_quit), NULL);

GtkWidget *vpaned = gtk_paned_new(GTK_ORIENTATION_HORIZONTAL);

gtk_paned_set_position (GTK_PANED (vpaned), 400);

GtkWidget *label = gtk_label_new("Label1111111111111111111111111111111");
GtkWidget *label2 = gtk_label_new("Label2");
GtkWidget *label3 = gtk_label_new("Label3");
GtkWidget *label4 = gtk_label_new("Label4");
gtk_paned_pack1 (GTK_PANED (vpaned), label, FALSE, TRUE);
gtk_paned_pack2 (GTK_PANED (vpaned), label2, FALSE, TRUE);

gtk_widget_show (label);
gtk_widget_show (label2);
gtk_widget_show (label3);
gtk_widget_show (label4);
gtk_widget_show (vpaned);

gtk_grid_attach(GTK_GRID(grid), label3, 0,0,1,1);
gtk_grid_attach(GTK_GRID(grid), vpaned, 0,1,1,1);
gtk_grid_attach(GTK_GRID(grid), label4, 0,2,1,1);

gtk_widget_show(grid);

gtk_container_add(GTK_CONTAINER(window), grid);

gtk_widget_show (window); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T20:22:48.460

您可以查看[`expand`](https://developer.gnome.org/gtk3/stable/GtkWidget.html#GtkWidget--expand)属性并确保将其设置为`TRUE`（如果您在 glade 设计器中执行 UI，则默认设置）

# sql-server - 在组的子集中查找“最大”n 行的 ID 的解决方案是什么？

> ID：15551869
> 
> 赞同：1
> 
> 时间：2013-03-21T15:37:15.477
> 
> 标签：sql-server, sql-server-2008, tsql

我们有具有以下数据和结构的表 T

```
__________________________
ID  |  Grp   |     Dt     |
____|________|____________|
1   |   A    |  2007-11-22|  
2   |   A    |  2008-01-03|  
3   |   A    |  2008-01-03|  
4   |   A    |  2011-04-13|  
5   |   B    |  2007-11-22|  
6   |   B    |  2010-04-28|  
7   |   B    |  2009-03-19|  
8   |   B    |  2007-11-22|  
9   |   C    |  2010-04-28|  
10  |   C    |  2009-03-19|  
11  |   C    |  2011-04-13|  
12  |   C    |  2012-02-22|  
13  |   D    |  2007-11-22|  
14  |   D    |  2010-04-28|  
15  |   D    |  2009-03-19|  
16  |   E    |  2007-11-22|  
17  |   E    |  2010-04-28|  
18  |   E    |  2011-04-13|  
19  |   F    |  2007-11-22|  
20  |   G    |  2007-11-22|  
21  |   H    |  2007-11-22|  
22  |   H    |  2010-04-28|  
23  |   H    |  2009-03-19|  
24  |   H    |  2008-03-15|
____|________|____________| 
```

给定`@date_from = '2007-01-01'`并`@date_to = '2008-06-01'` 编写一个查询，该查询返回 @date_from 到 @date_to 的过滤子集的最大记录。

结果应如下所示：

```
__________________________
ID  |  Grp   |     Dt     |
____|________|____________|
2   |   A    |  2008-01-03|  
3   |   A    |  2008-01-03|  
5   |   B    |  2007-11-22|  
8   |   B    |  2007-11-22|  
13  |   D    |  2007-11-22|  
16  |   E    |  2007-11-22|  
19  |   F    |  2007-11-22|  
20  |   G    |  2007-11-22|  
21  |   H    |  2008-03-05|  
____|________|____________| 
```

一种可能的解决方案是：

```
DECLARE @date_from AS DATE = '2007-01-01'
DECLARE @date_to   AS DATE = '2008-06-01'

WITH TFltr AS ( SELECT ID, Grp, Dt FROM T WHERE @date_from <= Dt AND Dt <= @date_to )
SELECT t1.ID, t1.Grp, t1.Dt 
FROM TFltr t1
LEFT OUTER JOIN TFltr t2 ON t1.Grp = t2.Grp AND t1.Dt < t2.Dt
WHERE t2.ID IS NULL 
```

所以你知道一个更好/更快的方法来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:39:38.550

另一种解决方案：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!3/008f4/12)**

```
SELECT t.*
FROM TFltr t
WHERE t.Dt >='2007-01-01'
AND t.Dt <= '2008-06-01'
AND t.Dt = (SELECT MAX(h.Dt)
            FROM TFltr h
            WHERE h.Dt >='2007-01-01'
            AND h.Dt <= '2008-06-01' 
            AND h.Grp = t.Grp)
ORDER BY t.ID 
```

结果：

```
| ID | GRP |                              DT |
----------------------------------------------
|  2 |   A |  January, 03 2008 00:00:00+0000 |
|  3 |   A |  January, 03 2008 00:00:00+0000 |
|  5 |   B | November, 22 2007 00:00:00+0000 |
|  8 |   B | November, 22 2007 00:00:00+0000 |
| 13 |   D | November, 22 2007 00:00:00+0000 |
| 16 |   E | November, 22 2007 00:00:00+0000 |
| 19 |   F | November, 22 2007 00:00:00+0000 |
| 20 |   G | November, 22 2007 00:00:00+0000 |
| 24 |   H |    March, 15 2008 00:00:00+0000 | 
```

您的查询：

```
DECLARE @date_from AS DATE = '2007-01-01'
DECLARE @date_to   AS DATE = '2008-06-01'

SELECT t.*
FROM TFltr t
WHERE t.Dt >=@date_from
AND t.Dt <= @date_to
AND t.Dt = (SELECT MAX(h.Dt)
            FROM TFltr h
            WHERE h.Dt >=@date_from
            AND h.Dt <= @date_to 
            AND h.Grp = t.Grp)
ORDER BY t.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:48:19.993

我推荐 RANK 分析函数：

```
DECLARE @date_from AS DATE = '2007-01-01'
DECLARE @date_to   AS DATE = '2008-06-01'

SELECT * FROM (
  SELECT ID, Grp, Dt,
    RANK() OVER (PARTITION BY Grp ORDER BY Dt DESC) AS DateRank
  FROM T
  WHERE Dt BETWEEN  @date_from AND @date_to) InnerT
WHERE DateRank = 1 
```

内部查询将每个 中的日期从高到低排列`Grp`。最高日期的 a`DateRank`为 1。然后，外部查询仅包含`DateRank = 1`. 我对您帖子中的数据尝试了此查询，并得到了您想要的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T16:02:01.273

```
select ID, Grp, Dt
from TFltr
where dt between @date_from  and @date_to
group by ID, Grp, Dt
having dt=max(dt) 
```

我将上面的查询更改为：

从 T 中选择 ID 作为 dt、Grp、Dt，其中 @date_from 和 @date_to 之间的 dt 按 ID、Grp、Dt 分组，其中 dt=max(dt) 和 ID=max(ID)

我得到了“更好”的结果，但它还不正确。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T15:47:49.330

```
select T1.*
from T T1
inner join
(
select max(dt) as max_dt, Grp
from T
where @date_from <= dt and dt <= @date_to
group by Grp
) X
on T1.Grp = X.Grp and T1.dt = X.max_dt 
```

# android - HoloEverywhere 布局文件夹充满资源错误？

> ID：15551872
> 
> 赞同：0
> 
> 时间：2013-03-21T15:37:29.687
> 
> 标签：android, android-holo-everywhere

我在我的项目中同时使用 ActionBarSherlock 和 HoloEverywhere 作为库，突然 HoloEverywhere 开始搞砸了。

我做了一个这样的 AlertDialog：

```
AlertDialog.Builder alert = new AlertDialog.Builder(DomaCareDetailViewActivity.this)
    .setTitle(R.string.edit_service)
    .setItems(R.array.edit_service_array, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
                //tested and working code
            });
alert.create();
alert.show(); 
```

但是“创建”行抛出异常：

```
03-21 17:05:35.167: E/AndroidRuntime(25499): FATAL EXCEPTION: main
03-21 17:05:35.167: E/AndroidRuntime(25499): android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
03-21 17:05:35.167: E/AndroidRuntime(25499):    at android.view.LayoutInflater.createView(LayoutInflater.java:613)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at org.holoeverywhere.LayoutInflater.tryCreateView(LayoutInflater.java:359)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at org.holoeverywhere.LayoutInflater.onCreateView(LayoutInflater.java:308)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at org.holoeverywhere.LayoutInflater.inflate(LayoutInflater.java:287)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at org.holoeverywhere.LayoutInflater.inflate(LayoutInflater.java:272)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at org.holoeverywhere.LayoutInflater.inflate(LayoutInflater.java:267)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at org.holoeverywhere.internal.AlertController$AlertParams.createListView(AlertController.java:143)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at org.holoeverywhere.internal.AlertController$AlertParams.apply(AlertController.java:129)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at org.holoeverywhere.app.AlertDialog$Builder.create(AlertDialog.java:60)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at com.invian.domacare.task.DomaCareDetailViewActivity$20.onClick(DomaCareDetailViewActivity.java:1004)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at android.view.View.performClick(View.java:4084)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at android.view.View$PerformClick.run(View.java:16966)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at android.os.Handler.handleCallback(Handler.java:615)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at android.os.Looper.loop(Looper.java:137)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at android.app.ActivityThread.main(ActivityThread.java:4931)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at java.lang.reflect.Method.invokeNative(Native Method)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at java.lang.reflect.Method.invoke(Method.java:511)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at dalvik.system.NativeStart.main(Native Method)
03-21 17:05:35.167: E/AndroidRuntime(25499): Caused by: java.lang.reflect.InvocationTargetException
03-21 17:05:35.167: E/AndroidRuntime(25499):    at java.lang.reflect.Constructor.constructNative(Native Method)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at android.view.LayoutInflater.createView(LayoutInflater.java:587)
03-21 17:05:35.167: E/AndroidRuntime(25499):    ... 24 more
03-21 17:05:35.167: E/AndroidRuntime(25499): Caused by: android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x2/d=0x7f01007a a=-1}
03-21 17:05:35.167: E/AndroidRuntime(25499):    at android.content.res.Resources.loadDrawable(Resources.java:1921)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at android.widget.ListView.<init>(ListView.java:153)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at org.holoeverywhere.widget.ListView.<init>(ListView.java:205)
03-21 17:05:35.167: E/AndroidRuntime(25499):    at org.holoeverywhere.widget.ListView.<init>(ListView.java:200)
03-21 17:05:35.167: E/AndroidRuntime(25499):    ... 27 more 
```

我在 HoloEverywhere 的 com.holoeverywhere.internal.AlertController 中找到了源代码，第 143 行有问题：

```
final ListView listView = (ListView) mInflater
    .inflate(dialog.mListLayout, null); 
```

检查 mListLayout 的初始化将我带到第 383 行：

```
mListLayout = a.getResourceId(R.styleable.AlertDialog_listLayout,
    R.layout.select_dialog_holo); 
```

这是据我所知。我找不到“R.styleable.AlertDialog”，但由于 AlertDialog.create() 在我的项目中引发了异常，我确信这就是问题所在。然而，select_dialog_holo.xml 文件确实有自己的错误：

```
Missing styles. Is the correct theme chosen for this layout?
Use the Theme combo box above the layout to choose a different layout, or fix the theme style references.

Failed to convert ?listDividerAlertDialog into a drawable
Couldn't find theme resource listDividerAlertDialog for the current theme 
```

有人对如何解决这个问题有任何想法吗？

**编辑：**浏览 HoloEverywhere 布局文件夹，我注意到有大量此类错误。例如，simple_list_item_1 给了我几个“找不到资源”错误以及一些“属性 paddingLeft 中的 listPreferredPaddingLeft/Right/etc 不是有效格式”错误。

# mysql - 复杂的 SQL 查询

> ID：15551874
> 
> 赞同：-4
> 
> 时间：2013-03-21T15:37:30.003
> 
> 标签：mysql, sql

我在编写 SQL 查询时遇到问题，有人可以帮我吗？

我有一张桌子`Day`，每天都有很多`Hour`行，

例子 ：

第 1 天有很多行：

```
Line1- hour = 3
Line2- hour = 2
Line3- hour = 6
Line4 ... 
```

第 2 天有很多行：

```
Line1- hour = 7
Line2- hour = 3
Line3- hour = 1
Line4 ... 
```

...

我想做一个查询，选择每天（第 1 天、第 2 天、... 第 300 天）的最大小时数，然后对所有这些最大值求和。

你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:53:57.077

```
SELECT SUM((SELECT MAX(hour) FROM days)), day FROM days GROUP BY day 
```

*可能*工作。如果您发布实际的数据库结构会有所帮助

# python - 具有日期时间约束的 django 中的聚合

> ID：15551877
> 
> 赞同：0
> 
> 时间：2013-03-21T15:37:33.400
> 
> 标签：python, django

我知道我是否有以下表格...

```
class Letter(models.Model):
    item = models.ForeignKey(Item)
    name = models.CharField(max_length=40)
    created = models.DateTimeField(default=datetime.now)

    def lastVersion(self):
        return self.letterversion_set.order_by('created').latest().created

class LetterVersion(models.Model):
    letter = models.ForeignKey(Letter)
    created = models.DateTimeField(default=datetime.now)
    text = models.TextField() 
```

...我可以通过执行以下操作获得最后 3 个带有最新字母版本的字母：

```
lettersAll = Letter.objects.filter(
                 item=i_iID,
                 deleted__isnull=True
             ).annotate(
                 last_created_version=Max('letterversion__created')
             ).order_by('-last_created_version')[:3] 
```

我的问题是上述查询适用于一组字母的所有字母版本。如果我只想查询所有字母版本的某个字母（如`letterversion__lt`），会发生什么情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:55:49.843

如果我明白你的要求，这应该使查询工作：

```
some_date = datetime.date(2012,8,12)
lettersBeforeSomeDate = Letter.objects.filter(
                 item=i_iID,
                 deleted__isnull=True,
                 letterversion__created__lt = some_date
             ).annotate(
                 last_created_version=Max('letterversion__created')
             ).order_by('-last_created_version')[:3] 
```

# codeigniter - 无法在 Code Igniter 中定位文件

> ID：15551884
> 
> 赞同：0
> 
> 时间：2013-03-21T15:37:56.993
> 
> 标签：codeigniter, codeigniter-url

您好，我已经为我的域创建了一个新的子域，并且正在构建一个代码点火器应用程序。一切正常，除了我无法定位样式表或应用程序中的任何其他文件。

我有这样的结构：

```
Root
/application
/css
/images
/js
/system
/userguide 
```

在 css 文件夹中，我有一个 style.css 文件。

我试图将此样式表添加到我的应用程序中，但这是不可能的。奇怪的是，即使我直接在浏览器中输入 url，它也说找不到文件。

我在Bluehost上，不确定这是否与服务器的配置或codeigniter的配置有关。

请帮忙，因为我已经尝试了所有可能的方法。

提前感谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:55:49.523

一开始最好把图片、css和js文件夹放在根目录下名为“public”的文件夹中。

然后你可以使用这个代码：

`<LINK href= "<?=site_url(); ?>public/css/style.css" rel="stylesheet" type="text/css">`

包含 css 文件的另一种方法是使用[模板库](http://williamsconcepts.com/ci/codeigniter/libraries/template/)。

如果问题仍然存在，那么您可以像这样更改您的根 .htaccess 文件：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$0 [PT,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:46:19.807

在阅读了 Jigar 指向我的链接后，我设法解决了自己的问题。

我的解决方案是在root的htaccess文件中添加：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T16:01:34.690

将您的 htaccess 文件更改为

```
DirectoryIndex index.php
RewriteEngine on
RewriteCond $1 !^(index\.php|(.*)\.swf|forums|images|css|downloads|js|robots\.txt|favicon \.ico)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ ./index.php?$1 [L,QSA] 
```

这是我在我的许多 CI 应用程序中一直使用的标准，它运行良好 :)

此外，此 htaccess 文件应与应用程序、系统文件夹（应用程序文件夹外）一起

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T16:04:38.033

在您的 html 文件中插入以下行：

```
 <link href="css/style.css" rel="stylesheet"> 
```

仔细检查您是否已在 css 文件夹中复制了具有正确名称的文件。

我假设您的其他设置是正确的。

# ruby - 模板路径中出现意外的 tIDENTIFIER

> ID：15551896
> 
> 赞同：0
> 
> 时间：2013-03-21T15:38:16.300
> 
> 标签：ruby, chef-infra, chef-recipe, chef-solo

我会先说我知道一点 Ruby 但不是很好，所以这很可能是一个常见的 Ruby 错误（但我似乎找不到答案！）

我有这个厨师食谱（使用 Vagrant 运行）：

```
package "php5-fpm" do
  action :install
end

template "/etc/php5-fpm/pool.d/site" do
  source "php-fpm.erb"
  owner "root"
  group "root"
  mode 0644
  action :create
  only_if "dpkg --get-selections | grep php5-fpm"
end

service "php5-fpm" do
  action :restart
end 
```

这失败并显示以下消息：

```
================================================================================
Recipe Compile Error in /tmp/.../cookbooks/site/recipes/php-fpm.rb
================================================================================

SyntaxError
-----------
compile error
/tmp/.../cookbooks/site/recipes/php-fpm.rb:1: syntax error, unexpected
tIDENTIFIER, expecting $end
    template "/etc/php5-fpm/pool.d/site" d...
                                  ^
Cookbook Trace:
---------------
  /tmp/.../cookbooks/dosos/recipes/php-fpm.rb:1:in `from_file'

Relevant File Content:
----------------------
    /tmp/.../cookbooks/dosos/recipes/php-fpm.rb:

end  2:  :restart" do-selections | grep php5-fpm" 
```

这对我来说没有多大意义，因为“相关文件内容”似乎是从文件的不同部分中删除的。

Ruby 是否有一些关于在字符串中添加斜杠的内容（如果是这样，为什么前面 3 个斜杠不会出错，除非它从右到左运行？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:08:54.063

我正在使用 Vagrant 使用 Chef 脚本来配置我的服务器。Chef 脚本是在 Windows 上编辑的，可通过共享文件夹在 Linux VM 上使用。

错误是我在 Windows 上的编辑器没有配置为使用 Unix 行尾，这让 Ruby 感到困惑。剥离回车符 ( `^M`) 允许脚本正常运行。

# c++ - CppCMS教程：静态链接模板错误：“致命错误：content.h：没有这样的文件或目录”

> ID：15551897
> 
> 赞同：0
> 
> 时间：2013-03-21T15:38:17.377
> 
> 标签：c++, cppcms

来自[http://cppcms.com/wikipp/en/page/cppcms_1x_tut_hello_templates](http://cppcms.com/wikipp/en/page/cppcms_1x_tut_hello_templates)

我正在按照教程进行操作，以下是我所做的。

在`content.h`：

```
#include <cppcms/view.h>
#include <string>

namespace content  {
    struct message : public cppcms::base_content {
        std::string text;
    };
} 
```

在`my_skin.tmpl`：

```
<% c++ #include "content.h" %>
<% skin my_skin %>
<% view message uses content::message %>
<% template render() %>
<html>
  <body>
    <h1><%= text %> World!</h1>
  </body>
<html>
<% end template %>
<% end view %>
<% end skin %> 
```

添加包含在`hello.cpp`：

```
#include <content.h> 
```

添加控制器`hello.cpp`：

```
virtual void main(std::string /*url*/)
{
    content::message c;
    c.text=">>>Hello<<<";
    render("message",c);
} 
```

当我静态链接`my_skin.cpp`到`hello.cpp`by run`g++ hello.cpp my_skin.cpp -o hello -lcppcms -lbooster`时，它会给出以下错误：

```
hello.cpp:1:21: fatal error: content.h: No such file or directory 
```

我不知道为什么会出错，因为`hello.cpp`并且`content.h`在同一个目录中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:40:56.597

你必须包括然后使用“content.h”

GCC include <> 标签在以下路径中搜索文件

> ```
> /usr/local/include
> libdir/gcc/target/version/include
> /usr/target/include
> /usr/include 
> ```
> 
> 参考[http://gcc.gnu.org/onlinedocs/cpp/Search-Path.html](http://gcc.gnu.org/onlinedocs/cpp/Search-Path.html)

如果文件位于同一目录中，则可以使用添加它们

> # 包括“文件名.h”
> 
> 在这种情况下，编译器将在当前目录中搜索

但是，您也可以使用 -L 标志将任何路径添加到搜索路径。例子

> gcc -L/路径/到/库文件名.cpp

# javascript - 如何使用 javascript 在浏览器中找出 websocket-protocol 版本？

> ID：15551898
> 
> 赞同：2
> 
> 时间：2013-03-21T15:38:19.817
> 
> 标签：javascript, browser, websocket, jetty-8

**仅当 websocket-version 为13** aka **RFC 6455**可用时，我才想将 websockets 与 Jetty-Server（版本 8.1.9）一起使用。如果它不可用，将使用 http-fallback-solution。

```
[random Browser Javascript]  <--websocket v13 only--> [Jetty Server Java] 
```

websocket-protocol-version 存储在 WebSocket 握手请求中：

```
GET /mychat HTTP/1.1
Host: server.example.com
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Key: x3JJHMbDL1EzLkh9GBhXDw==
Sec-WebSocket-Protocol: chat
Sec-WebSocket-Version: 13
Origin: http://example.com 
```

现在我想在javascript中有这样的东西：

```
if (window.WebSocket)
{
    // browser supports websockets
    if (bla.websocketversion != 13)
    {
        // wrong websocket version
        // use fallback connection
    }
    else
    {
        // use websockets
    }
}
else
{
    // use fallback connection
} 
```

如果我使用带有 Safari 5.0.2 的 iPad（它似乎使用较旧的 websocket 协议）连接到 Jetty-Server，我会收到警告： ***WARN:oejw.WebSocketFactory:Unsupported Websocket version:2147483647***

我找不到在 Javascript 中获取访问权限或更改握手请求的方法。这是不可能的吗？有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T07:37:10.657

这可能是一个建议，到目前为止，我们无法从 websocket 对象中获取任何属性。所以我们可以在特定的时间内测试一个 websocket 连接。这可能是一个临时的解决方法。

此解决方法仅在未建立连接时，websocket 就绪状态仍在连接

```
function init()
{

  _ws = new WebSocket("ws://example.com");

  _ws.onopen = onopen();

  _ws.onclose = onclose();

   setTimeout(function () {connectionCheck(_ws)}, 5000);

}

function connectionCheck(_ws)
{

   if(_ws.readyState == 0)
   {
      //call your fallback sollution
   }
   else
   {
      return;
   }
} 
```

# javascript - @Math 没有在dust.js 中渲染

> ID：15551899
> 
> 赞同：3
> 
> 时间：2013-03-21T15:38:21.640
> 
> 标签：javascript, dust.js

我正在尝试在灰尘模板中使用 @math 帮助器将值加 1。我的数据看起来像：

```
{
    array:[5,10,20]
} 
```

我的灰尘模板看起来像：

```
{#array}
<div class="span2">Amount {@math key="{$idx}" method="add" operand="1"/}:</div>
<div class="span2">{.}</div>{~n}
{/array} 
```

这会渲染除@math 之外的所有内容。我正在使用dust-full-1.2.2.js，所以包括数学助手。任何想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T16:12:21.350

`dust-full-1.2.2.js`不包括任何助手，所以这是您问题的一部分。帮助者可以在这里找到：[https ://github.com/linkedin/dustjs-helpers](https://github.com/linkedin/dustjs-helpers)

另一个问题只是一个小的语法错误。助手是自动关闭的`@math`，所以你的代码看起来像这样：

```
<div class="span2">Amount {@math key="{$idx}" method="add" operand="1"/}:</div> 
```

# bundler - 使用 Foreman 和 ruby 2.0.0 启动 Rails

> ID：15551900
> 
> 赞同：2
> 
> 时间：2013-03-21T15:38:37.837
> 
> 标签：bundler, foreman, ruby-2.0

我只是将 Rails 应用程序升级到 Ruby 2.0.0，部署到 Heroku 工作正常。`ruby "2.0.0"`在 Gemfile 中指定，但是当我尝试使用本地启动 Rails 时

```
bundle exec foreman start 
```

我得到...

```
Your Ruby version is 1.9.3, but your Gemfile specified 2.0.0 
```

我已经安装了最新的 Bundler，完成了捆绑安装，并且我已经运行 ruby​​ 2.0.0 的 gor rvm。

`ruby -v`在控制台返回`ruby 2.0.0p0`

我只是不确定这是在哪里掉下来的。

运行`foreman start`按预期工作。它只是不会开始`bundle exec`

谁能指出我正确的方向？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:35:31.473

我最终在应用程序的 Gemfile 中包含了工头 gem。这行得通，但由于 Gem 已被弃用，它实际上只是一种解决方法。

# php - $stmt-num_rows ( 返回 0 )

> ID：15551902
> 
> 赞同：0
> 
> 时间：2013-03-21T15:38:39.863
> 
> 标签：php

我只是想学习准备好的语句，我正在按照 PHP 手册指导我完成，我已经在 stackoverflow 上检查了有关此问题的答案，但是，我找不到任何解决方案，$stmt->num_rows 总是（返回 0 )

stackoverflow 上有一篇文章讨论了这个问题，他们建议在 $stmt-num_rows 之前使用 $stmt->store_result()，但 $stmt->num_rows 返回 0

有人可以告诉我我在这里做错了什么......我只是厌倦了程序风格的编码，我想通过准备好的陈述来提高我的技能

这是下面的功能

```
function get_all()
    {
        // ** Initializing  the Connection
        $mysqli = Connect();
        $sql = ( ' SELECT * FROM `users` ' );
        $stmt = $mysqli->prepare($sql);
        $stmt->execute();
        $res = $stmt->get_result();
        echo $num_count = $stmt->num_rows();
        $user = array();
        for ($counter = 0; $row = $res->fetch_assoc(); $counter++) 
        {
            $user[$counter] = $row;
        }   
        return $user;
    } 
```

// 这是第二次更新

```
function get_all()
    {
        // ** Initializing  the Connection
        $mysqli = Connect();

        $sql = ( ' SELECT * FROM `users` ' );

        $stmt = $mysqli->prepare($sql);

        $stmt->execute();

        $res = $stmt->get_result();

        echo $num_count = $stmt->num_rows;

        $user = array();

        while($row = $res->fetch_assoc()) 
        {
             $user[] = $row;
        }

         return $user;

    } 
```

// 第三次更新

```
function get_alll()
    {

        // ** Initializing  the Connection
        $mysqli = Connect();

        // no need to use * character, 
        // need to write query this way
        $sql = ( ' SELECT `id`,`fname`,`lname`,`uname`,`email` FROM `users` ' );

        $stmt = $mysqli->prepare($sql);
        // here need to use bind param
        $stmt->bind_result( $id, $fname, $lname, $uname, $email);
        $stmt->execute();
        // it's important to store the result 
        // before using num rows    
        $res = $stmt->store_result();

        echo $num_count = $stmt->num_rows;

            // 
        while($stmt->fetch())
        {
            echo $fname;
        }

     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:43:18.293

`num_rows`是一个属性，而不是一个方法，尝试`$stmt->num_rows`不带括号

# python - 什么是单例/博格模式？为什么他们不为我工作/我的概念哪里错了？

> ID：15551904
> 
> 赞同：1
> 
> 时间：2013-03-21T15:38:43.390
> 
> 标签：python, singleton, instance

类似的问题已经被问过很多次，但我在理解它时遇到了问题。我在想 Singleton 或 Borg 模式可以用来创建一个对象的一个​​实例，或者共享它的状态。我有一个（工作）测试示例，它没有按我的预期工作。要么代码不正确，要么我误解了单例/博格模式的概念。

我使用[单例](https://stackoverflow.com/questions/6760685/creating-a-singleton-in-python)和[博格](http://code.activestate.com/recipes/66531-singleton-we-dont-need-no-stinkin-singleton-the-bo/)模式在文件中创建以下代码`borg.py`：

```
class Singleton(object):
  _instance = None
  def __new__(class_, *args, **kwargs):
    if not isinstance(class_._instance, class_):
        class_._instance = object.__new__(class_, *args, **kwargs)
    return class_._instance

class MySingleton(Singleton):

    def __init__(self):
        self._list = []

    def add(self,x):
        self._list.append(x)

    def get(self):
        return self._list

class MyBorg(object):
    __shared_state = {}
    def __init__(self):
        self.__dict__ = self.__shared_state
        # and whatever else you want in your class -- that's all!
        self._list = []

    def add(self,x):
        self._list.append(x)

    def get(self):
        return self._list 
```

然后是一个文件`module.py`

```
from borg import MyBorg
myborg = MyBorg()
myborg.add(42)
print "just added something" 
```

最后是主要代码：

```
from borg import MyBorg
import module
myborg = MyBorg()
myborg.add(4711)
print myborg.get() 
```

应该在后两个类中替换`MyBorg`by`MySingleton`以使用 Singleton 而不是 borg。

现在，当我运行主代码时，我可以清楚地看到它`modules.py`首先被调用，向列表中添加了一个值。之后，Singleton/Borg 模式也在主代码中被实例化，并且（另一个）值被添加。我希望列表中有两个值（42 和 4711），而不是列表中只有后一个值。

可能是 in 中的实例`module.py`超出范围，因此所做的任何事情`module.py`都已被删除。但我需要的是让一个对象包含相同的内容，无论我在哪里使用它。

我怎样才能做到这一点？我怎样才能确保，当我创建对象 MyBorg（或其他）的实例时，它包含列表中的值 '42'，如添加`module.py`？我应该使用什么模式/机制来实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:43:07.053

您看到的行为的原因是，在这两种情况下`__init__`，每次您都调用它`instance = WhateverClass()`。

请注意，您正在传递**相同的实例**。但是，该实例正在`_list`清除它的属性`__init__`。

```
class Singleton(object):
    _instance = None
    def __new__(class_, *args, **kwargs):
        if not isinstance(class_._instance, class_):
            class_._instance = object.__new__(class_, *args, **kwargs)
            return class_._instance

class Foo(Singleton):
    def __init__(self):
        self.data = []
    pass

a = Foo()
a.data.append('Never see this')
b = Foo()
print a is b  #True
print a.data  # [] 
```

# mongodb - 在 Mongo 中返回空值

> ID：15551905
> 
> 赞同：0
> 
> 时间：2013-03-21T15:38:44.217
> 
> 标签：mongodb

给定一组产品：

```
{catalog_id: 1, product_id: 1, price: 1.0 }
{catalog_id: 1, product_id: 3, price: 3.0 } 
```

我想找到所有指定的产品，为不存在的产品返回空值。

例如：

```
db.products.find({"catalog_id": 1},{"product_id": [1,2,3]})

{ "_id" : ObjectId("514b211894562cfadbd93bc2"), "product_id" : 1, "price" : 1.0 }
{ "_id" : null, "product_id" : 2, "price" : null }
{ "_id" : ObjectId("514b212194562cfadbd93bc3"), "product_id" : 3, "price" : 3.0 } 
```

这可能吗？可能使用投影来添加缺失的行？

# java - 手机不休眠？

> ID：15551906
> 
> 赞同：0
> 
> 时间：2013-03-21T15:38:46.743
> 
> 标签：java, android

如果手机的屏幕完全关闭但手机没有进入睡眠状态，是否有可能？

我有一个应用程序可以在设备进入睡眠状态时执行一些操作。我注册了广播意图：Intent.ACTION_SCREEN_OFF

在我的设备应用程序上运行良好（HTC Desire, cyanogenmod）。当屏幕关闭时，我的应用程序被激活。

我在另一部手机（HTC Wildfire S，官方姜饼）上尝试了应用程序，这是奇怪的部分。当屏幕熄灭时，我的应用程序未激活（有时是 10%）。所以我将它与我的 LOGCAT 连接，我想看看当屏幕关闭时设备是否真的进入睡眠状态，问题是当与我的 PC 连接时，设备总是进入睡眠状态并且我的应用程序被激活。

在从 froyo 到果冻豆应用程序的模拟器上运行完美。我的应用程序有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:56:26.747

从我对屏幕状态广播的测试中，我了解到不同的制造商以不同的方式处理屏幕关闭意图。不能完全依赖手机。您可能希望使用 PowerManager 来检测设备的状态并在 onPause() 中采取适当的措施

```
public static boolean isDeviceScreenOn(Context argContext) {
    PowerManager pm = (PowerManager) argContext.getSystemService(Context.POWER_SERVICE);
    return pm.isScreenOn();
} 
```

# r - 是否可以使用 R 中的词法排序对字母数字值的向量进行排序？

> ID：15551914
> 
> 赞同：1
> 
> 时间：2013-03-21T15:39:00.537
> 
> 标签：r, sorting

说，我有一个向量，如下所示：

```
v1<- c("p 1", "p 2", "p 10", "p 11") 
```

使用排序它`sort(v1)`给了我

```
[1] "p 1"  "p 10" "p 11" "p 2" 
```

但是，我想要 sort(v1)

```
[1] "p 1"  "p 2" "p 10" "p 11" 
```

根据帮助文件，`sort`似乎不允许词法排序。我想知道是否可以在**不安装任何附加包**的情况下进行词法排序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T16:05:55.790

这是一种方法。制作一个向量，其中数字用零填充，然后按此向量排序。

```
v1.padded <- mapply(gsub, list('\\d+'), sprintf('%.4d', as.numeric(regmatches(v1, gregexpr('\\d+', v1)))), v1)
# "p 0001" "p 0002" "p 0010" "p 0011"
v1[order(v1.padded)]
# "p 1"  "p 2"  "p 10" "p 11" 
```

这是第二种方法，可以推广到字符串有多个数字的情况。

```
v1<- c("p 1 1", "p 11 1", "p 1 2", "p 2 3", "p 10 4")
parallel.split <- lapply(data.frame(do.call(rbind, strsplit(v1, ' ')), stringsAsFactors=FALSE), type.convert, as.is=TRUE)
inter <- do.call(interaction, c(parallel.split, list(lex.order=TRUE)))
v1[order(inter)]
# [1] "p 1 1"  "p 1 2"  "p 2 3"  "p 10 4" "p 11 1" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T19:35:45.053

您可以查看代码`mixedsort`并将其键入 R 自己。然后，您无需安装额外的软件包即可拥有该功能。

或者您可以`order`在将字符串拆分成片段后使用该函数：

```
1 <- c('p 1', 'q 2','p 2','p 11', 'p 10')
sort(v1)

tmp <- strsplit(v1, ' +')
tmp1 <- sapply(tmp, '[[', 1)
tmp2 <- as.numeric(sapply(tmp, '[[', 2))
v1[ order( tmp1, tmp2 ) ] 
```

或者您可以通过编写一个方法`xtfrm`并为您的向量提供适当的类来自动执行此操作：

```
xtfrm.mixed <- function(x) {
    tmp <- strsplit(x, ' +')
    tmp1 <- sapply(tmp, '[[', 1)
    tmp2 <- as.numeric(sapply(tmp, '[[', 2))
    tmp3 <- rank(tmp1, ties.method='min')
    tmp4 <- rank(tmp2, ties.method='min')
    tmp3+tmp4/(max(tmp4)+1)
}

class(v1) <- 'mixed'
sort(v1) 
```

如果您的所有数据都以“p”开头，那么您可以将其剥离并强制转换为数字并使用 in `order`。

# asp.net-mvc - LINQ to entity，错误的连接类型

> ID：15551915
> 
> 赞同：4
> 
> 时间：2013-03-21T15:39:03.050
> 
> 标签：asp.net-mvc, linq, entity-framework

我有一个看起来像这样的查询......

```
var q = Dal.TBLINVENTORies.Where(i => i.SHOWIT);
q = q.Where(i => i.dtStart < DateTime.Now || i.dtStart == null);
q = q.Where(i => i.dtEnd > DateTime.Now || i.dtEnd == null);
q = q.Where(i => i.sSystem.Contains("OE"));
q = q.Where(i => i.WS_ActiveList_ID == 0 || i.tblWS_ActiveList.WS_MasterList_ID == 16);
var test2 = q.ToList(); 
```

在“ToList()”之前，如果我检查查询，我会得到以下 sql（或多或少）

```
SELECT [Extent1].*
FROM  [dbo].[TBLINVENTORY] AS [Extent1]
INNER JOIN [dbo].[tblWS_ActiveList] AS [Extent2] ON [Extent1].[WS_ActiveList_ID] = [Extent2].[ID]
WHERE ([Extent1].[SHOWIT] = 1) 
AND (([Extent1].[dtStart] <  CAST( SysDateTime() AS datetime2)) OR ([Extent1].[dtStart] IS NULL)) 
AND (([Extent1].[dtEnd] >  CAST( SysDateTime() AS datetime2)) OR ([Extent1].[dtEnd] IS NULL)) 
AND ([Extent1].[sSystem] LIKE '%OE%') 
AND ([Extent1].[WS_ActiveList_ID] = 0  OR [Extent2].[WS_MasterList_ID] = 16) 
```

不幸的是，这不是我需要的，因为“Inventory”和“ActiveList”之间的关系并不是真正的一对多，而是零对多（我不确定我使用的术语是否正确）。基本上，库存项目可能有也可能没有相关的“ActiveList”。

如果我将原始 SQL 更改为使用 a`LEFT OUTER JOIN`而不是a `INNER JOIN`，则 SQL 返回我期望的值。

需要什么来强制 LEFT OUTER JOIN？

我已经尝试[过从 Linq 到实体的推荐解决方案 - 一对多关系 - 需要 left outer join 而不是 cross join](https://stackoverflow.com/questions/7483489)，但是，

`var q2 = from inv in Dal.TBLINVENTORies from al in inv.tblWS_ActiveList`

返回错误：

`Error 65 An expression of type 'xxxx.DAL.tblWS_ActiveList' is not allowed in a subsequent from clause in a query expression with source type 'System.Data.Entity.DbSet<xxxx.DAL.TBLINVENTORY>'. Type inference failed in the call to 'SelectMany'.`

我想知道我的链接/关系是否构造不正确？还有其他想法吗？

谢谢！

### 编辑 :: 附加数据

```
-- create foreign key, but don't enforce on existing values
ALTER TABLE [dbo].[tblInventory]  --the ONE Table
    WITH NOCHECK 
    ADD CONSTRAINT [FK__tblInventory.WS_ActiveList_ID__tblWS_ActiveList.ID] 
        FOREIGN KEY([WS_ActiveList_ID]) 
            REFERENCES [dbo].[tblWS_ActiveList] ([ID])    --the MANY Table
        NOT FOR REPLICATION
GO

-- disable enforcement of the foreign key, but leave it in place (virtual key)
ALTER TABLE [dbo].[tblInventory]  
    NOCHECK CONSTRAINT [FK__tblInventory.WS_ActiveList_ID__tblWS_ActiveList.ID] 
GO 
```

以及 WS_ActiveList_ID 的定义：

```
[WS_ActiveList_ID] [int] NOT NULL CONSTRAINT [DF_TBLINVENTORY_WS_ActiveList_ID] DEFAULT (0), 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:24:41.377

您的主要问题是您已关闭数据库中的引用完整性检查。

除了坏数据的明显问题外，这不适用于 EF。

到目前为止，最好的选择是使`WS_ActiveList_ID`可空，更新您的数据以将所有`0`s 更改为`NULL`s 并重新打开约束。

如果您不能这样做，我认为您必须将 SQL 语句生成为字符串并使用`dbContext.Database.SqlQuery<T>`( [`MSDN`](http://msdn.microsoft.com/en-us/library/gg696545%28v=vs.103%29.aspx))执行它

# nhibernate - NHibernate 查询失败，在聚合查询中出现“无法绑定多部分标识符”

> ID：15551918
> 
> 赞同：1
> 
> 时间：2013-03-21T15:39:08.283
> 
> 标签：nhibernate

我试图理解为什么这个简单的查询会在 NHibernate 3.3 上生成错误的 SQL：

```
var query = session.CreateQuery(@"select count(*) as C
                                  from Parent p
                                       inner join fetch p.Child c
                                  where c.Field = 'someValue'"); 
```

当我执行此查询时，生成的 SQL 不包含对子表的引用，这会导致可怕的“无法绑定多部分标识符 _child.FIELD”异常。

任何人都知道为什么会出现这个问题以及如何解决它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T11:33:20.160

仅供参考，如果其他人因此而被烧毁。

似乎 NHibernate 的内部在生成查询时过滤掉了连接。

因此，我们找到的唯一解决方案是以这种方式重新表述查询：

```
select count(*) as C
from Parent p
where p.Child.Field = 'someValue' 
```

这样，NHibernate 将生成连接语法（使用交叉连接运算符和 where 子句）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:41:01.633

为 分配一个不同的别名`count(*)`，因为您使用`c`and`C`作为别名，所以 nhibernate 可能会感到困惑。

例如，您可以像这样设置查询

```
var query = session.CreateQuery(@"select count(*) as co
                              from Parent p
                                   inner join fetch p.Child c
                              where c.Field = 'someValue'"); 
```

# java - 链接多个hadoop作业并无需等待即可提交

> ID：15551921
> 
> 赞同：2
> 
> 时间：2013-03-21T15:39:15.253
> 
> 标签：java, hadoop, mapreduce, hdfs

我试图弄清楚如何链接多个 hadoop 作业，将一个步骤的输出馈送到下一步的输入。我通过谷歌搜索发现的很多东西说我应该从单个线程一次调用它们并等待完成，或者我应该使用 Job.addDependingJob() 然后提交它们。我选择了后者，但在前一个工作完成后，我似乎无法执行后续工作。

这是我的代码：

```
List<Job> jobs = new ArrayList<Job>();

for(int i = 0; i < stepCount; i++) {
    JobConf jc = new JobConf(clusterConfig);

    ... set up mappers and reducers here ...

    ... set up input and output paths here ...

    Job j = new Job(jc);
    j.addDependingJob(jobs.get(jobs.size() - 1);
    jobs.add(j);
}

for(Job j : Jobs) {
    JobClient client = new JobClient();
    client.init(j.getJobConf());
    client.submit(j.getJobConf());
} 
```

所有作业同时运行，我得到如下输出：

*   没有设置作业 jar 文件。可能找不到用户类。请参阅 JobConf(Class) 或 JobConf#setJar(String)。
*   处理的总输入路径：1
*   使用 GenericOptionsParser 解析参数。应用程序应该实现同样的工具。
*   没有设置作业 jar 文件。可能找不到用户类。请参阅 JobConf(Class) 或 JobConf#setJar(String)。
*   处理的总输入路径：0
*   使用 GenericOptionsParser 解析参数。应用程序应该实现同样的工具。
*   没有设置作业 jar 文件。可能找不到用户类。请参阅 JobConf(Class) 或 JobConf#setJar(String)。
*   处理的总输入路径：0
*   使用 GenericOptionsParser 解析参数。应用程序应该实现同样的工具。
*   没有设置作业 jar 文件。可能找不到用户类。请参阅 JobConf(Class) 或 JobConf#setJar(String)。
*   处理的总输入路径：0

我究竟做错了什么？

注意：我使用的是 Hadoop 0.20.205

编辑澄清：我需要能够向集群提交作业链，然后立即返回，而无需等待作业链完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:20:39.690

JobControl 应该用于设置作业之间的依赖关系。给定代码中未设置依赖项，因此作业并行运行，而不是按顺序运行。如果有更复杂的工作流程，则可以使用 Oozie。

[这](http://cloudcelebrity.wordpress.com/2012/03/30/how-to-chain-multiple-mapreduce-jobs-in-hadoop/)是一篇有趣的文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T06:49:57.127

自从我处理这个问题以来已经有几年了，但我看到了一些事情：

1.  您的错误与作业之间的链接没有任何关系。在担心链接它们之前，请确保您可以运行单个作业。
2.  Jobcontrol 不会（或至少在 2010 年没有）将作业序列提交给作业跟踪器，它只是一个用于检查上游作业何时完成并自动将下一个作业提交给作业跟踪器的工具。您将无法仅运行它并退出。
3.  您不应该在作业上调用提交。这将提交他们运行。您应该将控制权转移到那里的某个地方的工作控制权。

[我认为这很令人困惑，并开始在https://github.com/kevinpet/jobcontrol](https://github.com/kevinpet/jobcontrol)中编写我自己的 DAG 助手，您可能会或可能不会觉得有用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T06:04:40.687

以下是链接 map reduce 作业的方式。在这里，我们在第一个作业的输出上运行第二个作业：

```
 Job job1 = new Job(conf, "job1");
    Job job2 = new Job(conf,"job2");
    job1.setJarByClass(driver.class);
    job1.setMapperClass(Map.class);
    job1.setCombinerClass(Reduce.class);
    job1.setReducerClass(Reduce.class);
    job1.setOutputKeyClass(Text.class);
    job1.setOutputValueClass(IntWritable.class);
    String outputpath="/user/hadoop/firstjoboutput";
    FileInputFormat.addInputPath(job, new Path(args[0]));
    FileOutputFormat.setOutputPath(job, new Path(outputpath));
    job1.waitForCompletion(true);

    job2.setJarByClass(driver.class);
    job2.setMapperClass(SecondMap.class);
    job2.setReducerClass(SecondReducer.class);
    job2.setMapOutputKeyClass(IntWritable.class);
    job2.setMapOutputValueClass(Text.class);
    job2.setOutputKeyClass(Text.class);
    job2.setOutputValueClass(IntWritable.class);
    FileInputFormat.addInputPath(job2, new Path(outputpath));
    String finaloutput="/user/hadoop/finaloutput";
    FileOutputFormat.setOutputPath(job2, new Path(finaloutput));

    System.exit(job2.waitForCompletion(true) ? 0 : 1); 
```

# haskell - Haskell 中的交错函数定义

> ID：15551927
> 
> 赞同：1
> 
> 时间：2013-03-21T15:39:28.910
> 
> 标签：haskell

我正在编写几个相互递归的模式匹配函数，我希望能够交错它们的定义，例如

```
recA [pattern ...] = [.. something that might call recB with the next pattern ..]
recB [pattern ...] = ...
recA [other ...]   = ...
...b 
```

等等这可能吗？有没有更惯用的替代方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T16:01:17.500

[Haskell 2010 报告，第 4.4.3.1 节](http://www.haskell.org/onlinereport/haskell2010/haskellch4.html#x10-800004.4)*函数[*绑定*](http://www.haskell.org/onlinereport/haskell2010/haskellch4.html#x10-800004.4)说*

 *> 请注意，定义函数的所有子句必须是连续的，并且每个子句中的模式数量必须相同。

所以你不能像你`recA`的`recB`例子那样交错。

没有理论上的原因（我可以看到）为什么编译器不能将各种子句组合在一起；我怀疑引入这条规则是为了防止人为错误和混乱。作为一个愚蠢的例子，以下有什么问题？

```
function1 [] = "a"
functionl (x:xs) = "b"
function1 (x:y:xs) = "c" 
```*

# jmeter - JMeter 中是否有图表/侦听器可以在同一图表中显示不同运行的数据？

> ID：15551928
> 
> 赞同：0
> 
> 时间：2013-03-21T15:39:33.797
> 
> 标签：jmeter

我用 5 个用户和 15 个用户分别测量了我们的应用服务器 CPU。两次运行都需要 5 分钟。我想在一张图中同时显示运行和 CPU。目前唯一的方法是将 CSV 导出到 Excel 并创建自定义图表。这很愚蠢，因为 JMeter 本身的图表非常好。

JMeter 插件扩展包含一个名为 Composite graph 的图，但用例似乎能够在同一次运行中将许多数据点添加到同一个图。它似乎无法合并来自两个单独线程运行的图形，因为两者的时间不同（两次运行已连续执行，因此图形一个接一个地显示，而不是同时显示） .

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:47:19.430

看起来可以使用[jmeter_wiki](http://wiki.apache.org/jmeter/JtlFiles)此处的信息来完成，但仍需要一些努力。

# python - 在 Python 中使用字符串日期计算天数

> ID：15551937
> 
> 赞同：1
> 
> 时间：2013-03-21T15:39:51.247
> 
> 标签：python, string, datetime, python-2.7

我有当前字符串格式的日期：'Tue Feb 19 00:09:28 +1100 2013'

我试图弄清楚字符串中的日期和当前日期之间已经过去了多少天。

我已经能够将字符串转换为日期。

```
import time
day = time.strptime('Tue Feb 19 00:09:28 +1100 2013', '%a %b %d %H:%M:%S +1100 %Y') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T15:43:08.057

请改用该`datetime`模块：

```
import datetime
day = datetime.datetime.strptime('Tue Feb 19 00:09:28 +1100 2013', '%a %b %d %H:%M:%S +1100 %Y')
delta = day - datetime.datetime.now()
print delta.days 
```

减去两个`datetime.datetime`值会返回一个`datetime.timedelta`对象，该对象具有一个`days`属性。

您的字符串确实包含时区偏移量，并且您对其进行了硬编码以匹配；如果值变化，您将不得不使用可以处理偏移量的解析器。该[`python-dateutil`软件包](http://labix.org/python-dateutil)包括一个出色的解析器和时区支持来处理这个问题：

```
>>> from dateutil import parser
>>> parser.parse('Tue Feb 19 00:09:28 +1100 2013')
datetime.datetime(2013, 2, 19, 0, 9, 28, tzinfo=tzoffset(None, 39600)) 
```

请注意，由于此结果*包括*时区，因此您现在需要`datetime`在使用日期算术时使用时区感知对象：

```
>>> from dateutil import tz
>>> import datetime
>>> utcnow = datetime.datetime.now(tz.tzutc())
>>> then = parser.parse('Tue Feb 19 00:09:28 +1100 2013')
>>> utcnow - then
datetime.timedelta(31, 12087, 617740)
>>> (utcnow - then).days
31 
```

我`utcnow`在上面的示例中基于 UTC 时区创建了一个变量，然后计算解析日期是多久以前。

# asp.net - 如何在 ASP.NET 超链接控件中绑定 alt 标记？

> ID：15551943
> 
> 赞同：-1
> 
> 时间：2013-03-21T15:40:07.553
> 
> 标签：asp.net, hyperlink, alt

我有这个标签：`alt='<%# Eval("ImageDesc") %>'` 在 DataList 控件中

当我在浏览器中查看页面时，alt 标记始终为空：`alt=""`

也许这是因为超链接控件不支持alt标签？如何对 alt 标签进行数据绑定？

--------这是确切的代码

```
<asp:HyperLink ID="linkQuoteImage" runat="server" EnableViewState="False" ImageUrl='<%# "/images/"+Eval("ImageFile").ToString().Replace("/","/tmb/") %>' NavigateUrl='<%# "~/Quotes/"+Eval("SlugText") %>' alt='<%# Eval("ImageDesc") %>' Font-Underline="False" ForeColor="#333333"></asp:HyperLink> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:48:00.737

真的，超链接没有这个`alt`属性。如果这是想要的，请改用 Tooltip：

```
<asp:HyperLink ID="lnkTest" runat="server" ToolTip='<%# Eval("Data") %>'>'<%# Eval("OtherData")%>'</asp:HyperLink> 
```

该`alt`属性用于`<img>`标签中，以在找不到图像时显示替换文本。此外，文本在某些浏览器中显示为工具提示。如果要显示工具提示，请使用 HTML`title`属性，该属性可以通过`Tooltip`ASP.Net 属性获得。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T15:59:39.317

当我们使用基本 html 时，在超链接中使用 alt 属性

但如果你使用 asp.net 超链接控件 alt 属性被 ToolTip 替换，请改用它

将 alt='<%# Eval("ImageDesc") %>' 替换为 ToolTip='<%# Eval("ImageDesc") %>'

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-13T02:56:12.820

如果在 aspx 页面中

```
<asp:HyperLink ID="linkQuoteImage" runat="server">Text for image alt</asp:HyperLink> 
```

如果在后面的代码中只做 linkQuoteImage.Text = "Text for image alt" -- 你在 alt 中需要的文本

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T15:59:06.410

您的`<asp:HyperLink>`控件是否在某些控件中，例如中继器？

这段代码对我有用。

前端：

```
<asp:Repeater ID="rptTest" runat="server">
    <ItemTemplate>
        <asp:HyperLink ID="testLink" runat="server" alt='<%# Eval("ImageDesc") %>'>This is a link</asp:HyperLink>
    </ItemTemplate>
</asp:Repeater> 
```

后端：

```
protected void Page_Load(object sender, EventArgs e)
{
    var images = new List<ImageData>
    {
        new ImageData { ImageDesc = "test" },
        new ImageData { ImageDesc = "test2" }
    };
    rptTest.DataSource = images;
    rptTest.DataBind();
} 
```

...

```
public class ImageData
{
    public string ImageDesc { get; set; }
} 
```

如果您没有使用具有`Eval`可用方法的控件，则需要以不同的方式添加属性。我建议只在代码隐藏中设置它。

前端：

```
<asp:HyperLink ID="testLink" runat="server">This is a link</asp:HyperLink> 
```

后端：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (testLink.Attributes["alt"] == null)
    {
        testLink.Attributes.Add("alt", "test");
    }
} 
```

# verilog - 指示生成块是否有名称的 vcs 警告

> ID：15551944
> 
> 赞同：-1
> 
> 时间：2013-03-21T15:40:13.897
> 
> 标签：verilog

我需要一种方法来确定在一组 verilog 文件中是否存在没有实例名称的生成块。我想知道我是否可以使用 vcs 进行编译并看到表明存在类似这样的块的警告。“坏”块的一个例子是：

```
generate
  for (i=0;i<N;i=i+1) begin 
       ….
 end
endgenerate 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:58:57.403

据我所知，这超出了 vcs 的用途。更简单的解决方案是为默认名称生成块实例合成和 grep。

您还可以编写一个脚本来扫描 RTL 并检查每个`for`块`if-else`中`generate`是否有`begin : [name]`.

如果真正需要从模拟器中检查 RTL，那么您将需要使用`cbEndOfCompile`. 在回调中，查找并扫描所有生成的语句，然后检查检查命名。

# android - 如何以编程方式显示应用程序屏幕

> ID：15551948
> 
> 赞同：0
> 
> 时间：2013-03-21T15:40:20.790
> 
> 标签：android

如何以编程方式在单击按钮时显示应用程序屏幕，我不想要主屏幕，我想要我们看到已安装应用程序的应用程序屏幕。

```
public void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    switch (position) {
        case Applications:
            break;
        case Camera:
        Intent cameraIntent = new Intent(
                 android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        startActivity(cameraIntent);
        break;
    }
} 
```

编辑：我看到每个人都在提供一种在设置中显示应用程序的方法..我想要正常的应用程序屏幕，我可以从中启动不同的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:45:03.533

使用操作[ACTION_MANAGE_ALL_APPLICATIONS_SETTINGS启动 Intent](http://developer.android.com/reference/android/provider/Settings.html#ACTION_MANAGE_ALL_APPLICATIONS_SETTINGS)

```
Intent intent = new Intent(android.provider.Settings. ACTION_MANAGE_ALL_APPLICATIONS_SETTINGS);
startActivity(intent); 
```

但是，这仅适用于 API 9 及更高版本。利用：

```
Intent intent = new Intent(android.provider.Settings. ACTION_APPLICATIONS_SETTINGS);
startActivity(intent); 
```

适用于 API 9 以下的设备。

编辑：

回答您的编辑：

> 我想要正常的应用程序屏幕，我可以从中启动不同的应用程序。

没有办法做到这一点。并非所有启动器都在列表中显示其应用程序，或者要求列表与启动器分开打开。没有记录在案的意图。充其量，您可以使用以下方式启动主屏幕：

```
Intent startMain = new Intent(Intent.ACTION_MAIN);
startMain.addCategory(Intent.CATEGORY_HOME);
startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(startMain); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:45:30.967

```
startActivity(new Intent(android.provider.Settings.ACTION_APPLICATION_SETTINGS), 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:50:49.683

尝试这个：`startActivityForResult(new Intent(android.provider.Settings.ACTION_APPLICATION_SETTINGS, 0));`

此链接可能会有所帮助：[android.provider.Settings](http://developer.android.com/reference/android/provider/Settings.html#ACTION_APPLICATION_SETTINGS)

# sql - SQL/Coldfusion - 获取并显示完整的层次树列表

> ID：15551951
> 
> 赞同：0
> 
> 时间：2013-03-21T15:40:27.133
> 
> 标签：sql, sql-server-2008, coldfusion, tree, hierarchical

作为一个例子，我有一个这样的表：

```
folder_id | parent_folder_id | folder_name
------------------------------------------
1         | null             | Main
2         | null             | Departments
3         | null             | Archived
4         | 2                | IT
5         | 2                | Sales
6         | 4                | Error Logs
7         | 6                | 2012 
```

ETC...

我需要运行一个查询（如果多个也可以），以便能够通过 Coldfusion 循环并正确显示它们。

我需要它显示如下：

*   主要的
*   部门
    *   它
        *   错误日志
            *   2012
    *   销售量
*   存档

...等等...深入到用户创建它们。

我只是很难理解这将如何工作的逻辑。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:44:07.833

使用 CF 特定的 Query-of-Queries 来执行此操作。因此，您首先查询所有文件夹，然后在 CF 中使用 Query-of-Query 对其进行迭代并处理树的每个子部分。

我认为这个答案可以为您指明方向：

[从数据库中的 ParentID 创建嵌套的 <ul> 树结构](https://stackoverflow.com/questions/6656859/creating-nested-ul-tree-structure-from-parentids-in-a-db)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:27:30.013

对于任何寻找答案的人，我从 Cody 的链接中获取了代码，并让它为我工作（因为它不能正常工作）。谢谢科迪和夏兰！这里是：

```
<cfquery name="get_folders" datasource="#application.dsn#">
    select folder_id, parent_folder_id, folder_name
    from folders
    order by folder_name
</cfquery>

<!--- Read all roots (no parent ID) --->
<cfquery name="get_parent_folders" dbtype="query">
    select folder_id, folder_name
    from get_folders
    where parent_folder_id is null
</cfquery>

<ul class="tree">
    <cfloop query="get_parent_folders">
        <cfset processTreeNode(folderId=get_parent_folders.folderId, folderName=get_parent_folders.folder_name) />
    </cfloop>
</ul>

<cffunction name="processTreeNode" output="true">
    <cfargument name="folderId" type="numeric" />
    <cfargument name="folderName" type="string" />
    <!--- Check for any nodes that have *this* node as a parent --->
    <cfquery name="LOCAL.qFindChildren" dbtype="query">
        select folder_id, folder_name
        from get_folders
        where parent_folder_id = <cfqueryparam value="#arguments.folderId#" cfsqltype="cf_sql_integer" />
    </cfquery>
    <li>#arguments.folderName#
        <cfif LOCAL.qFindChildren.recordcount>
            <!--- We have another list! --->
            <ul>
                <!--- We have children, so process these first --->
                <cfloop query="LOCAL.qFindChildren">
                    <!--- Recursively call function --->
                    <cfset processTreeNode(folderId=LOCAL.qFindChildren.folder_id, folderName=LOCAL.qFindChildren.folder_name) />
                </cfloop>
            </ul>
        </cfif>
    </li>
</cffunction> 
```

# c# - 如何使用 Microsoft.Bcl.Async 对吗？

> ID：15551953
> 
> 赞同：26
> 
> 时间：2013-03-21T15:40:33.167
> 
> 标签：c#, wpf, asynchronous, .net-4.0, async-await

我在一个项目中使用该`Microsoft.Bcl.Async` [包](https://nuget.org/packages/Microsoft.Bcl.Async/)，并且该项目被另一个不使用异步功能的项目引用。

现在我在编译解决方案（或仅第二个项目）时收到此错误警告：

> 无法解析主要引用“XYZ.dll”，因为它间接依赖于框架程序集“System.Runtime，Version=1.5.11.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a”，在当前目标中无法解析框架。“.NETFramework，版本=v4.0”。要解决此问题，请删除引用“XYZ.dll”或将您的应用程序重新定位到包含“System.Runtime, Version=1.5.11.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a”的框架版本。

我在两个项目中都使用了这个 app.config：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1" xmlns:bcl="urn:schemas-microsoft-com:bcl">
      <dependentAssembly bcl:name="System.Runtime">
        <assemblyIdentity name="System.Runtime" publicKeyToken="b03f5f7f11d50a3a" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.5.16.0" newVersion="2.5.16.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Threading.Tasks" publicKeyToken="b03f5f7f11d50a3a" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.5.16.0" newVersion="2.5.16.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

我做错了什么？

我不想引用异步包 dll。

我不能使用 .Net 4.5 目标。它必须是.Net 4。

所有项目的目标框架：.NET Framework 4

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-21T21:42:37.220

**摘要**：

有几种解决方法可供您使用：

1.  将*Microsoft.Bcl.Async*包安装到引用项目。

2.  将*Microsoft.Bcl.Build*包安装到引用项目。这包含实际的修复，并且仅仅是构建时的依赖。执行此操作时，您必须在项目的 App.Config 中具有适当的绑定重定向（例如上面列出的内容） - 无论它是类库、Web 项目还是可执行文件。

3.  如果您不希望依赖于任何包，请获取 Microsoft.Bcl.targets 文件（随 Microsoft.Bcl.Build 一起安装）中的 PropertyGroup 元素的内容，并将其插入到最后一次导入之后的引用项目的底部元素。

**注意：**无论您在上面选择哪个选项，当您交付依赖于 Microsoft.Bcl.Async 的库时（与旧的 Microsoft.CompilerServices.AsyncTargetingPack 一样），您必须交付这些二进制文件（System.Runtime、System.Threading。 Tasks, Microsoft.Threading.Tasks.*) 与使用您的库的应用程序/包。

**长篇大论**：

正如 Peter 指出的那样，这是一个已知问题，由于它们的设计方式，它只发生在 Microsoft.Bcl.Async 而不是 Microsoft.CompilerServices.AsyncTargetingPack。

Microsoft.Bcl.Async 的部分设计是向后移植（通过 NuGet 包）一些新的 .NET 4.5 程序集（System.Runtime、System.Threading.Tasks），以便它们可以在 4.0 上运行。MSBuild 不喜欢这样，它会导致它相信引用库已经依赖于来自较新框架版本的程序集。Microsoft.Bcl.Build 包中的解决方法解决了这个问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T16:32:28.263

请改用[适用于 Visual Studio 11 的 Async Targeting Pack](http://nuget.org/packages/Microsoft.CompilerServices.AsyncTargetingPack)。

`Install-Package Microsoft.CompilerServices.AsyncTargetingPack`

如果您更喜欢使用 Microsoft.Bcl.Async 预发行版，则必须将其添加到所有项目中。Bcl.Async 的下一个版本应该改进消息传递以更好地详细说明。

如果您使用的是 VS 2010，我所知道的唯一能提供 async/wait 的就是 AsyncCTP；因此，在 VS 2010 中使用 Microsoft.Bcl.Async 没有意义。

# 更新：

WRT 到 Microsoft.Bcl.Async：围绕 MSB 警告的问题（“无法解决......间接依赖......”已知并正在解决。在未来的某些更新（对 MSBuild 和 Microsoft.Bcl.Async）中，这将已修复，您*不必*在两个项目中都包含 Microsoft.Bcl.Async。

# opencv - 使用隐马尔可夫模型进行手形分析

> ID：15551955
> 
> 赞同：0
> 
> 时间：2013-03-21T15:40:36.150
> 
> 标签：opencv, machine-learning, classification, gesture-recognition, hidden-markov-models

我目前正在研究动态手势识别系统。我选择了手形的曲率特征。目前，我能够获得手部轮廓曲率的角度列表。

问题是我坚持下一步该怎么做。在我找到的众多文献中几乎找不到信息。在将处理后的输出传递给隐马尔可夫模型进行分类之前，每个手势/姿势的这组角度应该是“处理的”。

但是这个过程应该包括什么？我遇到过：傅里叶变换、B 样条和很多函数，但我不知道如何将一组角度（例如 -23、90、45、156，...）传递给这些函数。

感谢您的耐心等待。

下面是一张图片，显示了我到目前为止所达到的阶段：

![在此处输入图像描述](../Images/7df53e7a781da28d2fb807d2a791acbb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:47:39.873

你能解释一下你是如何获得这些角度的吗？您可以将连续的角度组合在一起，并可能以某种方式将它们关联起来：比如通过减去它们或以某种方式处理它们以查找哪些手指已打开/关闭或找到手的方向。例如，假设您手掌的质心在一帧中位于 (x,y) 处，而在另一帧中位于 (a,b) 处。然后你可以减去这些来找到你的手的方向。

现在既然你已经找到了手部轮廓曲率的角度，你就有了不同点的数量和角度的变化。通过配对连续的角度并找到轮廓上的点数，您可以尝试检测哪些手指是张开的，哪些是闭合的。如果您尝试进行指尖检测，请查看 Convex-Hull 算法。但是，既然你说你的手势是动态的，那一定意味着你的手在执行某个手势的同时不断地在空间中移动。请澄清这一点。处理后，结果将形成观察序列，作为 HMM 的输入。

# python - Python：微调几个拟合函数

> ID：15551956
> 
> 赞同：1
> 
> 时间：2013-03-21T15:40:37.787
> 
> 标签：python, numpy, matplotlib, scipy

我需要一只手来微调我的代码产生的情节。该代码确实很粗鲁，但基本上它用于拟合一些数据，这些数据在计数与时间的分布中有两个峰值。每个峰的上升部分用高斯拟合，衰减部分用指数拟合。我需要微调拟合，因为从图中可以清楚地看出，数据是拟合的，但不是以最佳方式拟合的。我需要避免不同函数之间的不连续性（因此函数必须相互“接触”），并且我想获得真正遵循数据并根据其定义运行的拟合（即，第一个高斯没有“钟形”在峰顶，第二个高斯停止“太快”）。该代码从网络获取数据，因此可以直接执行。希望，代码和图像会比我说的更清楚。提前谢谢了。

```
#!/usr/bin/env python

import pyfits, os, re, glob, sys
from scipy.optimize import leastsq
from numpy import *
from pylab import *
from scipy import *

# ---------------- Functions ---------------------------#
def right_exp(p, x, y, err1):
    yfit1 = p[0]*exp(-p[2]*(x - p[1]))
    dev_exp = (y - yfit1)/err1
    return dev_exp

def left_gauss(p, x, y, err2):
    yfit2 = p[0]*(1/sqrt(2*pi*(p[2]**2)))*exp(-(x - p[1])**2/(2*p[2]**2))
    dev_gauss = (y - yfit2)/err2
    return dev_gauss

# ------------------------------------------------------ #
tmin = 56200
tmax = 56249

data=pyfits.open('http://heasarc.gsfc.nasa.gov/docs/swift/results/transients/weak/GX304-1.orbit.lc.fits')

time  = data[1].data.field(0)/86400\. + data[1].header['MJDREFF'] + data[1].header['MJDREFI']
rate  = data[1].data.field(1)
error = data[1].data.field(2)
data.close()

cond1 = ((time > 56200) & (time < 56209)) #| ((time > 56225) & (time < 56234))
time1 = time[cond1]
rate1 = rate[cond1]
error1 = error[cond1]
cond2 = ((time > 56209) & (time < 56225)) #| ((time > 56234) & (time < 56249))
time2 = time[cond2]
rate2 = rate[cond2]
error2 = error[cond2]
cond3 = ((time > 56225) & (time < 56234))
time3 = time[cond3]
rate3 = rate[cond3]
error3 = error[cond3]
cond4 = ((time > 56234) & (time < 56249))
time4 = time[cond4]
rate4 = rate[cond4]
error4 = error[cond4]

totaltime = np.append(time1, time2)
totalrate = np.append(rate1, rate2)
v0= [0.23, 56209.0, 1] #inital guesses for Gaussian Fit, just do it around the peaks
v1= [0.40, 56233.0, 1]

# ------------------------ First peak -------------------------------------------------------------------#
out = leastsq(left_gauss, v0[:], args=(time1, rate1, error1), maxfev = 100000, full_output = 1)
p = out[0]
v = out[0]
xxx = arange(min(time1), max(time1), time1[1] - time1[0])
yfit1 = p[0]*(1/sqrt(2*pi*(p[2]**2)))*exp(-(xxx - p[1])**2/(2*p[2]**2))

out2 = leastsq(right_exp, v0[:], args = (time2, rate2, error2), maxfev = 100000, full_output = 1)
p2 = out2[0]
v2 = out2[0]
xxx2 = arange(min(time2), max(time2), time2[1] - time2[0])
yfit2 = p2[0]*exp(-p2[2]*(xxx2 - p2[1]))

# ------------------------ Second peak -------------------------------------------------------------------#
out3 = leastsq(left_gauss, v1[:], args=(time3, rate3, error3), maxfev = 100000, full_output = 1)
p3 = out3[0]
v3 = out3[0]
xxx3 = arange(min(time3), max(time3), time3[1] - time3[0])
yfit3 = p3[0]*(1/sqrt(2*pi*(p3[2]**2)))*exp(-(xxx3 - p3[1])**2/(2*p3[2]**2))

out4 = leastsq(right_exp, v1[:], args = (time4, rate4, error4), maxfev = 100000, full_output = 1)
p4 = out4[0]
v4 = out4[0]
xxx4 = arange(min(time4), max(time4), time4[1] - time4[0])
yfit4 = p4[0]*exp(-p4[2]*(xxx4 - p4[1]))
# ------------------------------------------------------------------------------------------------------- #

fig = figure(figsize = (9, 9)) #make a plot
ax1 = fig.add_subplot(111)
ax1.plot(time, rate, 'g.')
ax1.plot(xxx, yfit1, 'b-')
ax1.plot(xxx2, yfit2, 'b-')
ax1.plot(xxx3, yfit3, 'b-')
ax1.plot(xxx4, yfit4, 'b-')
axis([tmin, tmax, -0.00, 0.45])
savefig("first peak.png") 
```

![第一峰.png](../Images/9f8761700a4c9e6aed037b67d06faa23.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T23:08:49.400

使用三角级数可以很好地处理这个问题，以便创建一个连续函数。如果粘贴在您的代码之后，下面的示例将起作用。如果需要，您可以更改三角数列中的项数。

![在此处输入图像描述](../Images/5f5a31935b26e127b97d4a03e2602e6a.png)

```
import numpy as np
from scipy.optimize import curve_fit
x = np.concatenate((time1, time2, time3, time4))
y_points = np.concatenate((rate1, rate2, rate3, rate4))
den = x.max() - x.min()
def func(x, a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15):
    return  a1 *sin( 1*pi*x/den)+\
            a2 *sin( 2*pi*x/den)+\
            a3 *sin( 3*pi*x/den)+\
            a4 *sin( 4*pi*x/den)+\
            a5 *sin( 5*pi*x/den)+\
            a6 *sin( 6*pi*x/den)+\
            a7 *sin( 7*pi*x/den)+\
            a8 *sin( 8*pi*x/den)+\
            a9 *sin( 9*pi*x/den)+\
            a10*sin(10*pi*x/den)+\
            a11*sin(11*pi*x/den)+\
            a12*sin(12*pi*x/den)+\
            a13*sin(13*pi*x/den)+\
            a14*sin(14*pi*x/den)+\
            a15*sin(15*pi*x/den)
popt, pcov = curve_fit(func, x, y_points)
y = func(x, *popt)
plot(x,y, color='r', linewidth=2.)
show() 
```

* * *

## 编辑

正如@Alfe 所建议的，这个拟合函数可以写成一个紧凑的格式，比如：

```
def func(x, a):
    return sum(a_i * sin(i * pi * x / den) for i, a_i in enumerate(a, 1)) 
```

# c# - kendoui 图表带状线

> ID：15551957
> 
> 赞同：0
> 
> 时间：2013-03-21T15:40:40.557
> 
> 标签：c#, asp.net-mvc-4, charts, kendo-ui

我正在使用剑道用户界面。我有一个 mvc 4.0 网站。我有一张图表。我正在尝试找到一种将带状线放在 Kendo UI 带状图上的方法。我查看了文档，但无论如何我都没有找到在 mvc 中执行此操作。有人做过吗？如何在 kendo ui dataviz mvc 图表上放置一条带状线？

我有两张图片显示了我拥有的和想要的。如何将图像上传到 StackOverflow？

我有的。 ![我有的](../Images/a39a9070a3e7ce17bd9335a7621ce0ab.png)

我想要的是。 ![我想要的是](../Images/65136906c40996c87e5da30dbd60a5f0.png)

# jboss - JNDI：未找到 EJB

> ID：15551960
> 
> 赞同：0
> 
> 时间：2013-03-21T15:40:50.110
> 
> 标签：jboss, ejb, jndi

`SessionServiceBean`我在我的 Jboss As 7.1 服务器上部署了一个会话 bean 。在部署时，我在控制台中得到以下输出，监听该 bean 的正确 JNDI 标识符：

```
JNDI bindings for session bean named SessionServiceBean in deployment unit subdeployment "account-ejb.jar" of deployment "replay-ear.ear" are as follows:

java:global/replay-ear/account-ejb/SessionServiceBean!de.replay.account.SessionService
java:app/account-ejb/SessionServiceBean!de.replay.account.SessionService
java:module/SessionServiceBean!de.replay.account.SessionService
java:jboss/exported/replay-ear/account-ejb/SessionServiceBean!de.replay.account.SessionService
java:global/replay-ear/account-ejb/SessionServiceBean
java:app/account-ejb/SessionServiceBean
java:module/SessionServiceBean 
```

现在，如果我尝试在我的 JUnit 测试用例中查找 bean：

```
service = (SessionService) jndiCtx.lookup("java:global/replay-ear/account-ejb/SessionServiceBean!de.replay.account.SessionService"); 
```

我收到一个异常，告诉我服务器找不到 bean：

```
javax.naming.NameNotFoundException: global/replay-ear/account-ejb/SessionServiceBean!de.replay.account.SessionService -- service jboss.naming.context.java.jboss.exported.global.replay-ear.account-ejb."SessionServiceBean!de.replay.account.SessionService"
    at org.jboss.as.naming.ServiceBasedNamingStore.lookup(ServiceBasedNamingStore.java:97)
    at org.jboss.as.naming.NamingContext.lookup(NamingContext.java:178)
    at org.jboss.naming.remote.protocol.v1.Protocol$1.handleServerMessage(Protocol.java:127)
    at org.jboss.naming.remote.protocol.v1.RemoteNamingServerV1$MessageReciever$1.run(RemoteNamingServerV1.java:73)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

我不理解此错误，因为 jndi 标识符与日志中输出的标识符匹配，并且我的客户端肯定连接到正确的服务器。

可能是我用于身份验证的用户没有 jndi 查找所需的权限吗？我实际上不知道为什么这不起作用。那是我第一次使用远程 ejb。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:00:19.440

显然错误是保留`java:global`在 JNDI 标识符中。

工作查找现在如下所示：

```
service = (SessionService) jndiCtx.lookup("/replay-ear/account-ejb/SessionServiceBean!de.replay.account.SessionService"); 
```

# c++ - 是否可以分析查看程序集的 C/C++ 内联函数？

> ID：15551966
> 
> 赞同：2
> 
> 时间：2013-03-21T15:41:03.233
> 
> 标签：c++, c, profiling, inline, disassembly

我想测量我在项目中使用的一些内联函数的性能和一般行为（创建了多少程序集等）。除了分析时间之外，是否可以查看使用这些内联函数的函数的总体代码扩展？

我尝试在 Visual C++ 和 MingW 中（通过 NetBeans）在调试期间查看反汇编面板。通过调试构建每个内联函数，在程序集中使用**调用**，因此它们不是内联的。如果我激活优化，程序集会发生很大变化，以至于我什至无法在这些函数中放置断点。

您是否知道任何编译器设置（例如在 GCC 或 VC 中，仅优化内联函数）、书籍（我有关于内联测量时间的“高效 C++”）或其他任何可以更好地理解该主题的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:45:01.677

这是VS中编译器开关的[链接。](http://msdn.microsoft.com/en-us/library/vstudio/47238hez.aspx)如果您只想内联测试，请启用此优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-19T20:25:37.477

英特尔 VTune 等工具可以分析内联函数。他们使用二进制文件中的调试信息将指令指针映射回“从中派生代码”的函数，即使`call`程序集中不再存在实际代码。

您也可以在使用一些工具查看带注释的程序集时看到这种效果 - 几个函数的源代码将混合在一起，这反映了内联。

这个过程并不完美，因为对于某些类型的内联来说，“这个特定指令属于什么函数”几乎变成了一种哲学问题，而不是技术问题（实际上，指令可以有效地在多个函数之间“共享”）。

# python - 模拟 curl --data-binary 的 URL 请求

> ID：15551968
> 
> 赞同：1
> 
> 时间：2013-03-21T15:41:19.247
> 
> 标签：python, elasticsearch

我想发送一个 URL 请求，相当于使用 post 数据中的 json 对象，用换行符分隔。这是为了为 Elasticsearch 批量索引两个项目。

这工作正常：

```
curl -XPOST 'localhost:9200/myindex/mydoc?pretty=true' --data-binary @myfile.json 
```

myfile.json 在哪里：

```
{"index": {"_parent": "btaCovzjQhqrP4s3iPjZKQ"}}    
{"title": "hello"}
{"index": {"_parent": "btaCovzjQhqrP4s3iPjZKQ"}}
{"title": "world"} 
```

当我尝试使用时：

```
req = urllib2.Request(url,data=
json.dumps({"index": {"_parent": "btaCovzjQhqrP4s3iPjZKQ"}}) + "\n" +
json.dumps({"title":"hello"}) + "\n" + 
json.dumps({"index": {"_parent": "btaCovzjQhqrP4s3iPjZKQ"}}) + "\n" +
json.dumps({"title":"world"}) 
```

我得到：

```
HTTP Error 500: Internal Server Error 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T09:22:18.850

> 我的用例实际上是对 ElasticSearch 的 bulk_index 请求。

使用以下方法可以轻松得多[`rawes`](https://github.com/humangeo/rawes)：

```
import rawes
es = rawes.Elastic('localhost:9200')

with open('myfile.json') as f:
   lines = f.readlines()

es.post('someindex/sometype/_bulk', data=lines) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T22:09:47.940

“HTTP 错误 500”可能是由于忘记包含索引名称或索引类型。

另外：对于批量插入，elasticsearch 要求在最后一条记录之后有一个尾随“\n”字符，否则它不会插入该记录。

尝试：

```
import urllib2
import json

url = 'http://localhost:9200/myindex/mydoc/_bulk?pretty=true'

data = json.dumps({"index": {"_parent": "btaCovzjQhqrP4s3iPjZKQ"}}) + "\n" + json.dumps({"title":"hello"}) + "\n" + json.dumps({"index": {"_parent": "btaCovzjQhqrP4s3iPjZKQ"}}) + "\n" + json.dumps({"title":"world"})

req = urllib2.Request(url,data=data+"\n")

f = urllib2.urlopen(req)
print f.read() 
```

或者，通过一些重构：

```
import urllib2
import json

url = 'http://localhost:9200/myindex/mydoc/_bulk?pretty=true'

data = [
    {"index": {"_parent": "btaCovzjQhqrP4s3iPjZKQ"}},
    {"title":"hello"},
    {"index": {"_parent": "btaCovzjQhqrP4s3iPjZKQ"}},
    {"title":"world"}
]

encoded_data = "\n".join(map(json.dumps,data)) + "\n"

req = urllib2.Request(url,data=encoded_data)

f = urllib2.urlopen(req)
print f.read() 
```

# oracle - 使用 OR 和 IN 语句 Oracle 优化 where 子句

> ID：15551972
> 
> 赞同：0
> 
> 时间：2013-03-21T15:41:33.647
> 
> 标签：oracle, oracle11g

我的选择是：

```
SELECT *
FROM Table1 t1, Table2 t2
WHERE t1.ID=t2.ID
AND (t1.EmpDate IS NULL OR t1.TERMDT > SYSDATE)  -- Item1
AND t2.DIVISION IN ('D1','D2','D3','D4','D5','D6','D7','D8','D9','D10')  --Item2 
```

Item1 和 Item2 分别导致 Table1 和 Table2 上的 FULL TABLE 扫描。我已经索引了 t2.DIVISION。

我该如何优化呢？

我可以用 2 个选择的 UNION 替换 Item1 中的 OR 吗？任何建议表示赞赏。

# python - 无法理解 lambda 函数

> ID：15551974
> 
> 赞同：7
> 
> 时间：2013-03-21T15:41:39.143
> 
> 标签：python, lambda

函数中到底发生了什么：

```
lambda x: 10 if x == 6 else 1 
```

我知道一些 lambda 函数的作用，但我不习惯看到它们这样写。我是任何形式的代码的菜鸟。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-21T15:43:24.060

```
some_function = lambda x: 10 if x == 6 else 1 
```

是语法糖：

```
def some_function(x):
    return 10 if x == 6 else 1 
```

`x == 6`这意味着如果计算结果为 True，它将返回 10，否则返回 1。

就个人而言，`def`除了最简单的情况外，我更喜欢这种形式，因为它允许多行函数，更清楚调用可调用对象所涉及的开销类型，更简单地分析函数的闭包，并打开思路新的 Python 程序员可以轻松地在运行时构建其他更复杂的代码对象（例如类）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T15:43:19.287

由于 python 是一种具有功能特性的优秀语言，因此您可以使用 lambdas 使用函数做一些方便的事情。你的例子相当于

```
if x == 6:
    return 10
else:
    return 1 
```

`lambda`如果您需要将一个简单的函数作为参数传递给代码中某处的另一个函数，则函数很有用。

# vb.net - 如何在 EntityFramework 5 中获取表动态

> ID：15551975
> 
> 赞同：1
> 
> 时间：2013-03-21T15:41:44.510
> 
> 标签：vb.net, entity-framework-5

我正在将 LINQ to SQL 转换为 EntityFramework 5。在 LINQ to SQL 中，我使用了此函数，仅按其类型（VB-Code）获取表：

```
Dim type As Type = myObject.GetType()
Dim context As MyEntities = New MyEntities()
query = context.GetTable(type).AsQueryable() 
```

现在我正在 EF5 中寻找一种相等的方法。我在 SO 上找到[了这个](https://stackoverflow.com/questions/7263083/gettable-equivalent-for-objectcontext)答案，但我的上下文没有一个名为`CreateObjectSet`. 这是因为 EF4 和 EF5 之间的差异，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:34:21.020

基于[这个](https://stackoverflow.com/questions/7263083/gettable-equivalent-for-objectcontext)答案，我发现我可以使用`Set`而不是`CreateObjectSet`：

```
Public Function GetTable(Of T As Class)(entity As T) As IQueryable
    Return dbContext.Set(Of T)()
End Function 
```

# java - 如何在 Java 中同步并发 Web 服务调用

> ID：15551977
> 
> 赞同：2
> 
> 时间：2013-03-21T15:41:54.637
> 
> 标签：java, web-services, jpa, persistence

我目前正在开发一些由 SAP 系统触发的 Java （和带有 MySQL 连接的 JPA）的 Web 服务。为了简化我的问题，我将两个关键实体称为`BlogEntry`和`Comment`。一个`BlogEntry`可以有多个`Comments`。A`Comment`总是完全属于一个`BlogEntry`。

所以我有三个服务（我不能也不想重新定义它们，因为它们是由我从 SAP 导出并使用并行与其他系统通信的 WSDL 定义的）：`CreateBlogEntry`，，，`CreateComment``CreateCommentForUpcomingBlogEntry`

它们被正确触发，并且当它们被单独调用时绝对没有`CreateBlogEntry`问题`CreateComment`。

**但是：**服务`CreateCommentForUpcomingBlogEntry`会发送`Comment`一个“外键”来识别“即将到来的” `BlogEntry`。在内部，它还调用`CreateBlogEntry`创建实际的`BlogEntry`. **由于它们的异步特性，这两个服务是并发的。**

所以我有两个选择：

1.  创建一个虚拟对象`BlogEntry`并将其连接`Comment`到它并更新`BlogEntry`, 一旦`CreateBlogEntry`“到达”
2.  等待`CreateBlogEntry`并将`Comment`之后连接到新的`BlogEntry`

目前我正在尝试**前者**，但一旦两个服务都完全执行，我最终会得到**两个** `BlogEntries`. 其中一个只有`ID`交付，`CreateCommentForUpcomingBlogEntry`但它正确连接到`Comment`（更多相反）。other`BlogEntry`具有所有其他信息（例如`postDate`或`body`），但 与`Comment`它无关。

* * *

这是服务实现的代码片段`CreateCommentForUpcomingBlogEntry`：

```
@EJB
private BlogEntryFacade blogEntryFacade;
@EJB
private CommentFacade commentFacade;
...
List<BlogEntry> blogEntries = blogEntryFacade.findById(request.getComment().getBlogEntryId().getValue());
BlogEntry persistBlogEntry;
if (blogEntries.isEmpty()) {
    persistBlogEntry = new BlogEntry();
    persistBlogEntry.setId(request.getComment().getBlogEntryId().getValue());
    blogEntryFacade.create(persistBlogEntry);
} else {
    persistBlogEntry = blogEntries.get(0);
}

Comment persistComment = new Comment();
persistComment.setId(request.getComment().getID().getValue());
persistComment.setBody(request.getComment().getBody().getValue());
/*
    set other properties
*/
persistComment.setBlogEntry(persistBlogEntry);
commentFacade.create(persistComment);
... 
```

* * *

这是实现的代码片段`CreateBlogEntry`：

```
@EJB
private BlogEntryFacade blogEntryFacade;
...
List<BlogEntry> blogEntries = blogEntryFacade.findById(request.getBlogEntry().getId().getValue());
BlogEntry persistBlogEntry;
Boolean update = false;
if (blogEntries.isEmpty()) {
    persistBlogEntry = new BlogEntry();
} else {
    persistBlogEntry = blogEntries.get(0);
    update = true;
}
persistBlogEntry.setId(request.getBlogEntry().getId().getValue());
persistBlogEntry.setBody(request.getBlogEntry().getBody().getValue());
/*
    set other properties
*/
if (update) {
    blogEntryFacade.edit(persistBlogEntry);
} else {
    blogEntryFacade.create(persistBlogEntry);
}
... 
```

这是一些无法使事情按预期发生的摆弄。

遗憾的是，我还没有找到同步这些同时服务调用的方法。我可以让`CreateCommentForUpcomingBlogEntry` *睡眠*几秒钟，但我认为这不是正确的方法。

我可以强制我`facades`和他们各自的每个实例`EntityManagers`重新加载他们的数据集吗？我可以将我的请求放在某种队列中，该队列根据某些条件被清空吗？

***那么：让它等待`BlogEntry`存在的最佳做法是什么？***

在此先感谢，大卫

信息：

*   GlassFish 服务器 3.1.2
*   EclipseLink，版本：Eclipse Persistence Services - 2.3.2.v20111125-r10461

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:34:34.800

如果您确定自己`CreateBlogEntry`接到电话，请在接到电话后将电话排队`CreateCommentForUpcomingBlogEntry`并出列并处理它们`CreateBlogEntry`。

由于您在应用程序服务器上，因此对于队列，您可能可以使用自动刷新到存储的 JMS 队列或使用 DB 缓存引擎（Ehcache ？），以防您收到大量调用或想要提供跨重启的恢复机制。

# php - 如何让 Doctrine 在 Symfony2 的辅助函数中工作

> ID：15551983
> 
> 赞同：4
> 
> 时间：2013-03-21T15:42:06.623
> 
> 标签：php, symfony, dependency-injection, doctrine

我需要让教义在我的助手内部工作，我试图像我通常在控制器中那样使用：

```
$giftRepository = $this->getDoctrine( )->getRepository( 'DonePunctisBundle:Gift' ); 
```

但这给了我：

> 致命错误：在 /VAR/WWW/VHOSTS/PUNCTIS.COM/HTTPDOCS/SRC/DONE/PUNCTISBUNDLE/HELPER/UTILITYHELPER.PH 中调用未定义的方法 DONE\PUNCTISBUNDLE\HELPER\UTILITYHELPER::GETDOCTRIN()

我在这里缺少什么？

编辑：

**服务文件**

```
services:
    templating.helper.utility:
        class: Done\PunctisBundle\Helper\UtilityHelper
        arguments: [@service_container]
        tags:
            - { name: templating.helper, alias: utility } 
```

帮助文件的第一行

```
<?php
namespace Done\PunctisBundle\Helper;

use Symfony\Component\Templating\Helper\Helper;
use Symfony\Component\Templating\EngineInterface;

class UtilityHelper extends Helper {

    /*
     * Dependency injection
     */

    private $container;

    public function __construct( $container )
    {
        $this->container = $container;
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T15:58:35.177

这里的问题是您的 Helper 类不是容器感知的；也就是说，它不知道 Symfony 已加载的所有服务（独白、树枝……和教义）。

您可以通过将“教义”传递给它来解决此问题。这被称为依赖注入，它是使 Symfony 很棒的核心内容之一。以下是它的工作原理：

首先，为您的 Helper 类提供一个存放 Doctrine 服务的地方，并在 Helper 的构造函数中要求它：

```
class UtilityHelper
{
    private $doctrine;

    public function __construct($doctrine)
    {
        $this->doctrine = $doctrine;
    }

    public function doSomething()
    {
        // Do something here
    }
} 
```

然后，您使用 services.yml 来定义 Symfony 应该如何构造该 Helper 实例：

```
services:
    helper:
        class: Done\PunctisBundle\Helper\UtilityHelper
        arguments: [@doctrine] 
```

在这种情况下，`@doctrine`是一个占位符，表示“在此处插入 Doctrine 服务”。

因此，现在，在您的 Controller 或任何其他可感知容器的东西中，您可以通过 Helper 类访问 Doctrine，如下所示：

```
class SomeController()
{
    public function someAction()
    {
        $this->get("helper")->doctrine->getRepository(...);
    }
} 
```

*编辑*

查看您的编辑后，您似乎将整个服务容器注入到 Helper 类中。这不是最佳实践——你应该只注入你需要的东西。但是，您仍然可以这样做：

服务.yml

```
services:
    helper:
        class: Done\PunctisBundle\Helper\UtilityHelper
        arguments: [@service_container] 
```

UtilityHelper.php

```
class UtilityHelper
{
    private $container;

    public function __construct($container)
    {
        $this->container = $container;
    }

    public function doSomething()
    {
        // This won't work, because UtilityHelper doesn't have a getDoctrine() method:
        // $this->getDoctrine()->getRepository(...)

        // Instead, think about what you have access to...
        $container = $this->container;

        // Now, you need to get Doctrine

        // This won't work... getDoctrine() is a shortcut method, available only in a Controller
        // $container->getDoctrine()->getRepository(...)

        $container->get("doctrine")->getRepository(...)  
    }
} 
```

我在那里添加了一些评论，突出了一些常见的陷阱。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:51:47.547

在 Helper、Services 等中，您不能像在操作中那样使用它。您需要通过 conf 文件（services.yml 或 *.xml）中的服务描述将它作为参数传递给您的 Helper。

例子：

```
 services:
   %service_name%:
    class: %path_to_youre_helper_class%
    arguments: [@doctrine.orm.entity_manager]
    tags:
        - { name: %name% } 
```

并且不要忘记在你的 Helper 的 __construct 中捕获它。

例子：

```
use Doctrine\ORM\EntityManager;
....    

private $em;
public function __construct(EntityManager $em)
{
  $this->em = $em;
} 
```

你可以像这样使用它：

```
public function myMethod()
{
  $repo = $this->em->getRepository('DonePunctisBundle:Gift');
} 
```

# c - 释放由 C 中的 static 关键字定义的动态分配的内存

> ID：15551985
> 
> 赞同：0
> 
> 时间：2013-03-21T15:42:08.540
> 
> 标签：c, memory-management, static

我正在编写一个代码，其中有几个功能。在每个函数中，有几个变量应该动态分配内存。这些函数被重复调用，因此分配一次内存并在`main`.

该`main`函数如下所示：

```
//Some code here
while (err < tolerance){
        CalculateMismatch(M, err);
        //Update M and err and do other things
}
//Here is end of main, where I should free all the memories being allocated dynamically in other functions 
```

这段代码显示`CalculateMismatch`被调用了几次。所以，我只在这个函数中分配一次内存。像这样的东西：

```
function CalculateMismatch(Some arguments){
        //The following line is illegal in C, but I do not know how to allocate the memory just once and reuse it several times.
        static double *variable1 = malloc(lengthofVar1 * sizeof(variable1));
        //Rest of the code
} 
```

`CalculateMismatch`我的问题是我不知道如何访问`main`. 请让我知道我应该如何释放变量，或者是否有更有效的方法来分配和释放内存。提前感谢您的帮助。

提供有关我的代码的更多详细信息：到目前为止，我已经全局定义了所有变量，并在 main.js 中动态分配了内存。但是由于变量的数量很大，并且其中一些仅用于一个特定的函数，我决定将定义移到函数内部。但是，我不知道如何释放每个函数内部分配的内存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:55:14.697

这是不正确的：

```
 static double *variable1 = malloc(lengthofVar1 * sizeof(variable1)); 
```

你可能想要：

```
 static double *variable1 = malloc(lengthofVar1 * sizeof(*variable1)); 
```

不幸的是，您无法从函数外部释放此变量，除非您执行某些操作将其传回。

对此没有直接简单的解决方案。一种解决方案当然是将变量移出一步：

```
static double *variable1 = 0;

function CalculateMismatch(Some arguments){

    if (!variable1) variable1 = malloc(lengthofVar1 * sizeof(*variable1));

        //Rest of the code
}

...
int main(...)
{
    ... 

    free(variable1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:45:11.350

您不能从 main 访问在 CalculateMismatch 中声明的变量。如果需要，则必须将声明移出CalculateMismatch（例如移至main），然后将它们作为参数传递给CalculateMismatch。

但是由于您即将退出 main 我认为您不需要释放任何东西。无论如何，当您的程序退出时，所有内存都将被释放。

**编辑**

您应该将声明`variable1`移至 main。然后将其`CalculateMismatch`作为参数传递给。

```
int main()
{
    double *variable1 = malloc(...);
    ...
    while (...)
    {
        CalculateMismatch(..., variable1);
    }
    ...
    free(variable1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:56:24.407

如果您想从多个函数访问动态分配的内存，但不想将指针作为参数传递，则在文件范围（全局）声明指针。声明后，您可以在需要它之前对其进行初始化`malloc`，然后每个函数都可以访问内存。否则，只需将指针传递给需要访问内存的每个函数，直到你使用`free`它为止。

C 中函数内部的静态变量是在函数调用之间保持其值并在程序运行之前初始化的变量，因此您不能使用`malloc`.

# python - 从python re中的正则表达式拆分字符串

> ID：15551991
> 
> 赞同：-1
> 
> 时间：2013-03-21T15:42:22.950
> 
> 标签：python, regex

我有这样的模式：

```
" 1+2;\r\n\r(%o2) 3\r\n(%i3) " 
```

我想把它们分成：

```
[" 1+2;","(%o2) 3","(%i3)"] 
```

第一个模式的正则表达式很难构建，因为它可能是用户对代数系统的任何要求，第二个可能是：

```
'\(%o\d+\).' 
```

最后是这样的：

```
'\(%i\d+\) 
```

我并没有严格地被正则表达式部分难倒，但是一旦我知道正确的模式，如何实际拆分。我将如何拆分这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:50:47.793

分手了`(\r|\n)+`怎么办？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:01:55.267

这段代码对你有用吗？

```
patterns = [p.strip() for x in " 1+2;\r\n\r(%o2) 3\r\n(%i3) ".split("\r\n")] 
```

澄清：

```
>>> patterns = " 1+2;\r\n\r(%o2) 3\r\n(%i3) ".split("\r\n")
>>> patterns
[' 1+2;', '\r(%o2) 3', '(%i3) ']
>>> patterns = [p.strip() for p in patterns]
['1+2;', '(%o2) 3', '(%i3)'] 
```

通过这种方式，您可以拆分线条并摆脱不必要的白色字符。

编辑：还有：Python String 也有 splitlines() 方法：

```
splitlines(...)
    S.splitlines([keepends]) -> list of strings

    Return a list of the lines in S, breaking at line boundaries.
    Line breaks are not included in the resulting list unless keepends
    is given and true. 
```

所以这段代码可以改成：

```
patterns = [p.strip() for x in " 1+2;\r\n\r(%o2) 3\r\n(%i3) ".splitlines()] 
```

这可能会解决没有 CR 的 NL 和所有不同组合的问题。

# java - 如何使用自定义时间获取当前日期？

> ID：15551992
> 
> 赞同：0
> 
> 时间：2013-03-21T15:42:25.050
> 
> 标签：java

我需要使用自定义时间获取实际日期，因此我创建了以下代码：

```
Calendar calendar = Calendar.getInstance();
calendar.setTime(new Date());

Calendar output = Calendar.getInstance();
output.set(calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), calendar.get(Calendar.DATE), 1, 0);
output.getTime(); 
```

我希望它有效，但它似乎有点复杂。

有没有其他方法可以获取自定义时间的日期？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:44:26.557

> 还有其他方法可以使用自定义时间获取日期吗？

我个人会改用[Joda Time](http://joda-time.sf.net)：

```
// Ideally use an injectable clock...
LocalDate today = new LocalDate();
// If this is effectively constant, extract it to a final static field
LocalTime time = new LocalTime(1, 0);

// Or use toDateTime(...) depending on what you're trying to accomplish
LocalDateTime todayAtTime = today.toLocalDateTime(time); 
```

Joda Time 的API*比*`java.util.{Date, Calendar}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:47:49.970

```
Calendar cal = Calendar.getInstance();
cal.set(Calendar.HOUR_OF_DAY, 1);
cal.set(Calendar.MINUTE, 0);
cal.getTime() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:48:03.433

那这个呢 ：

```
Calendar calendar = Calendar.getInstance();
calendar.set(Calendar.HOUR_OF_DAY, your_custom_hour);
your_custom_hour : 0-23 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T15:51:39.937

除了使用 Joda 时间，我会稍微清洁一点：

```
 int hour = 1;
 Calendar cal = Calendar.getInstance();
 cal.set(Calendar.HOUR, hour);
 cal.set(Calendar.MINUTE, 0);
 cal.set(Calendar.SECOND, 0);
 cal.set(Calendar.MILLISECOND, 0); 
```

`Calendar.getInstance()`无论如何都返回当前日期和时间，所以`setTime(new Date())`没有必要。

# java - 如何将 jlabel 文本设置为循环迭代“i”的值？

> ID：15551994
> 
> 赞同：-1
> 
> 时间：2013-03-21T15:42:28.733
> 
> 标签：java, swing, jlabel

```
if (numFac == 2 || numFac ==3){
    jLabel3.setText("Prime!"); }

    for ( i=3; i <=numFac; i++ ){
        double n = numFac%i;
            if (n==1 || n!=0){
            jLabel3.setText("Prime!"); 
            break;  }

            else {
                jLabel2.setText("The Divisors of " +numFac +" are ");
                for( i = 1; i <= numFac; i++)
                    {
                    if(numFac%i == 0)
                        { jLabel3.setText(i+" "); }      
            }

} 
```

我`i`在`jlabel3`. 我希望它像这样显示： `System.out.print(i+" ");`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:53:20.597

只需获取当前文本并附加新数字即可。

```
jLabel3.setText(jLabel3.getText() + i + " "); 
```

或者，将文本存储在变量中：

```
String text = "";
...
text += i + " ";
jLabel3.setText(text); 
```

# windows - 跟踪和比较骨架与预定义的骨架

> ID：15551995
> 
> 赞同：1
> 
> 时间：2013-03-21T15:42:29.250
> 
> 标签：windows, kinect, xbox360

我目前正在为学校开展一个项目，该项目需要我使用 Kinect 硬件创建某个软件。该软件与有氧运动/锻炼“游戏”密切相关。

然而，由于我从来没有为 Kinect 工作过，所以我对从哪里开始有点无能为力。我已经下载了 SDK 和 Toolkit 浏览器，以及一些（非官方的？） Toolkit。

我有一些 Java 编程经验，但不知道如何使用 C/C++/C# 或 Visual Studio。

我基本上是在寻找可以帮助我更多地了解 Kinect 及其编程方式的教程。我试着找了一些，但它们要么已经过时，要么真的很混乱，以至于我跟不上它们。

我在该项目中的主要目标是弄清楚我如何能看到一个活生生的骷髅何时将双臂举过头顶以及何时靠近他的身体（跳千斤顶练习）。

任何人都可以通过一些链接或示例帮助我沿着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:33:38.947

C# 在概念上与 Java 并没有太大的不同。Microsoft 甚至提供了有关该主题的在线帮助：[Java 开发人员的 C# 编程语言](http://msdn.microsoft.com/en-US/library/ms228602%28v=vs.80%29.aspx)。虽然我建议找一本不将 C# 包装在另一种语言的上下文中的好书——学习 C#，而不是“与 Java 相关的 C#”。

学习 Kinect 开发应该通过 Toolkit 示例来完成。真的没有更好的办法了。 **当心**在线教程！许多是为不再兼容的旧版本 SDK 编写的。为 SDK < 1.5 编写的任何内容都将无法正常工作，无需努力进行移植。

可以通过手势识别来检测跳跃插孔。有一些库为官方的 Microsoft Kinect SDK 提供此功能——我通常指的是[Kinect Toolbox](http://kinecttoolbox.codeplex.com/)和[Fizbin Gesture Library](https://github.com/EvilClosetMonkey/Fizbin.Kinect.Gestures)。两者都提供手势识别，只是使用不同的方法。

对于 Fizbin 手势库，您声明了一系列定义手势构造方式的类。例如，以下是库定义左手向身体右侧滑动的方式：

```
namespace Fizbin.Kinect.Gestures.Segments
{
    /// <summary>
    /// The first part of the swipe right gesture
    /// </summary>
    public class SwipeRightSegment1 : IRelativeGestureSegment
    {
        /// <summary>
        /// Checks the gesture.
        /// </summary>
        /// <param name="skeleton">The skeleton.</param>
        /// <returns>GesturePartResult based on if the gesture part has been completed</returns>
        public GesturePartResult CheckGesture(Skeleton skeleton)
        {
            // left hand in front of left Shoulder
            if (skeleton.Joints[JointType.HandLeft].Position.Z < skeleton.Joints[JointType.ElbowLeft].Position.Z && skeleton.Joints[JointType.HandRight].Position.Y < skeleton.Joints[JointType.HipCenter].Position.Y)
            {
                // left hand below shoulder height but above hip height
                if (skeleton.Joints[JointType.HandLeft].Position.Y < skeleton.Joints[JointType.Head].Position.Y && skeleton.Joints[JointType.HandLeft].Position.Y > skeleton.Joints[JointType.HipCenter].Position.Y)
                {
                    // left hand left of left Shoulder
                    if (skeleton.Joints[JointType.HandLeft].Position.X < skeleton.Joints[JointType.ShoulderLeft].Position.X)
                    {
                        return GesturePartResult.Succeed;
                    }

                    return GesturePartResult.Pausing;
                }

                return GesturePartResult.Fail;
            }

            return GesturePartResult.Fail;
        }
    }

    /// <summary>
    /// The second part of the swipe right gesture
    /// </summary>
    public class SwipeRightSegment2 : IRelativeGestureSegment
    {
        /// <summary>
        /// Checks the gesture.
        /// </summary>
        /// <param name="skeleton">The skeleton.</param>
        /// <returns>GesturePartResult based on if the gesture part has been completed</returns>
        public GesturePartResult CheckGesture(Skeleton skeleton)
        {
            // left hand in front of left Shoulder
            if (skeleton.Joints[JointType.HandLeft].Position.Z < skeleton.Joints[JointType.ElbowLeft].Position.Z && skeleton.Joints[JointType.HandRight].Position.Y < skeleton.Joints[JointType.HipCenter].Position.Y)
            {
                // left hand below shoulder height but above hip height
                if (skeleton.Joints[JointType.HandLeft].Position.Y < skeleton.Joints[JointType.Head].Position.Y && skeleton.Joints[JointType.HandLeft].Position.Y > skeleton.Joints[JointType.HipCenter].Position.Y)
                {
                    // left hand left of left Shoulder
                    if (skeleton.Joints[JointType.HandLeft].Position.X < skeleton.Joints[JointType.ShoulderRight].Position.X && skeleton.Joints[JointType.HandLeft].Position.X > skeleton.Joints[JointType.ShoulderLeft].Position.X)
                    {
                        return GesturePartResult.Succeed;
                    }

                    return GesturePartResult.Pausing;
                }

                return GesturePartResult.Fail;
            }

            return GesturePartResult.Fail;
        }
    }

    /// <summary>
    /// The third part of the swipe right gesture
    /// </summary>
    public class SwipeRightSegment3 : IRelativeGestureSegment
    {
        /// <summary>
        /// Checks the gesture.
        /// </summary>
        /// <param name="skeleton">The skeleton.</param>
        /// <returns>GesturePartResult based on if the gesture part has been completed</returns>
        public GesturePartResult CheckGesture(Skeleton skeleton)
        {
            // //left hand in front of left Shoulder
            if (skeleton.Joints[JointType.HandLeft].Position.Z < skeleton.Joints[JointType.ElbowLeft].Position.Z && skeleton.Joints[JointType.HandRight].Position.Y < skeleton.Joints[JointType.HipCenter].Position.Y)
            {
                // left hand below shoulder height but above hip height
                if (skeleton.Joints[JointType.HandLeft].Position.Y < skeleton.Joints[JointType.Head].Position.Y && skeleton.Joints[JointType.HandLeft].Position.Y > skeleton.Joints[JointType.HipCenter].Position.Y)
                {
                    // left hand left of left Shoulder
                    if (skeleton.Joints[JointType.HandLeft].Position.X > skeleton.Joints[JointType.ShoulderRight].Position.X)
                    {
                        return GesturePartResult.Succeed;
                    }

                    return GesturePartResult.Pausing;
                }

                return GesturePartResult.Fail;
            }

            return GesturePartResult.Fail;
        }
    }
} 
```

您可以按照代码中的注释查看手如何在身体上移动。

在你的跳跃千斤顶的情况下，你可以定义相对于一系列关节的手，在上升的过程中，然后在下降的过程中。如果我要快速吐出一系列检查，它们将是：

1.  左/右手低于臀部中心
2.  左/右手在臀部中心上方和左/右手在左/右肘部之外
3.  左/右手在脊柱上方和左/右手在左/右肘外
4.  左/右手在左/右肩上方和左/右手在左/右肘外侧
5.  左/右手在头顶

...如果所有这些都匹配，那么您就有了半个跳跃式千斤顶。在相同的情况下反向进行所有检查，`Gesture`您就有了一个完整的上身跳跃千斤顶。您可以添加腿部位置以获得全身跳跃式千斤顶。

Kinect 工具箱也可用于定义手势。我只是没有亲自使用它，所以我无法谈论所涉及的步骤。

# powershell - Powershell -match -replace 在输出中产生重复的行

> ID：15551998
> 
> 赞同：1
> 
> 时间：2013-03-21T15:42:56.280
> 
> 标签：powershell

我是 Powershell 的新手。我正在尝试对文件中的文本进行多次替换，但我得到了重复的行。我的测试文件有以下几行：

```
This is a test.
There is a test. 
```

我运行以下脚本：

```
(Get-Content "C:\temp\test.txt") | 
    foreach-object {

            if ($_ -match "This"){
                $_ -replace "This" , "That"
            }

            if ($_ -match "test"){
                $_ -replace "test" , "toast"
            }

    } | Set-Content "C:\temp\test.txt" 
```

我的输出应该是：

```
That is a toast.
There is a toast. 
```

但它为输入中第一行的替换输出单独的行：

```
That is a test.
This is a toast.
There is a toast. 
```

如您所见，在两行之间，第二行仅满足“匹配”条件之一并被正确替换。但是，第一行输出两次——每次替换一个。如果该行同时满足两个条件，我需要脚本仅输出该行一次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T01:40:14.713

很容易为什么你得到 3 行输出。第一个对象是`'This is a test'`and 匹配第一个`if`，所以它将替换`'This'`为`'That'`and 输出`That is a test`。然后，第一个对象也匹配第二个，`if`因为有 a `'test'`，所以它也输出`'This is a toast'`。最后，第二个对象只匹配第二个`if`，所以它输出`'There is a toast'`。因此有 3 行输出。

当你键入`$_ -replace 'x','y'`它返回另一个对象时，它不会改变 $_。如果您正在编写脚本，请继续将其放在多行上并使其按照您的意愿进行。

```
$file = Get-Content $path
foreach($line in $file){
    if($line -match 'This'){
        $line = $line -replace 'This','That'
    }
    if($line -match 'test'){
        $line = $line -replace 'test','toast'
    }
    $line
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:50:12.277

我会这样做：

```
(Get-Content "C:\temp\test.txt") -replace 'This','That' -replace 'test','toast' | Set-Content "C:\temp\test.txt" 
```