# StackOverflow 问答 14843000-14843999

# amazon-web-services - 比较标准卷与临时 iops 卷的性能

> ID：14843004
> 
> 赞同：0
> 
> 时间：2013-02-12T22:25:39.193
> 
> 标签：amazon-web-services, amazon-ec2, provisioned-iops

这是一个困扰我的问题：

我正在尝试在性能方面将标准 AWS 卷与预置 IOPS 卷进行比较。在 AWS 文档中，它指出 IOPS 实例旨在在所需容量的 10% 范围内提供 IO 性能。

我想知道的是：假设我正在创建 2000 IOPS 卷。与标准 AWS 卷相比，这要快多少？

# orchardcms - 安装 Orchard CMS 的问题

> ID：14843005
> 
> 赞同：1
> 
> 时间：2013-02-12T22:25:41.190
> 
> 标签：orchardcms

为了建立一个在 Orchard CMS 上运行的网站，我提取了从[http://www.orchardproject.net](http://www.orchardproject.net)（1.6 版）下载的 zip 文件的内容并将它们上传到我的主机。但是，在尝试查看该站点后在浏览器上，我得到以下异常：

> 覆盖成员时违反了继承安全规则：'log4net.Util.ReadOnlyPropertiesDictionary.GetObjectData(System.Runtime.Serialization.Ser>ializationInfo, System.Runtime.Serialization.StreamingContext)'。>覆盖方法的安全可访问性必须与被覆盖的方法的安全可访问性相匹配。

在网上做了很多搜索，我意识到问题是由于 Orchard 网站需要在服务器上以完全信任模式运行。但问题是我的主机不允许这样的事情出于安全考虑。所以，我想知道是否有人知道我是否通过更改 Orchard 项目的源代码来解决问题，例如在程序集文件中设置安全属性或类似此处所述的任何内容： [覆盖成员时违反继承安全规则-安全规则集.Level2](https://stackoverflow.com/questions/3055792/inheritance-security-rules-violated-while-overriding-member-securityruleset-le)

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:54:07.940

团队有意识地决定不再支持部分信任。Microsoft 不再推荐部分信任。

# c++ - 错误 LNK2019：未解析的外部符号，C++

> ID：14843006
> 
> 赞同：3
> 
> 时间：2013-02-12T22:25:53.063
> 
> 标签：c++, visual-studio-2010, linker-errors, lnk2019

我已经为地图/字典数据结构编写了一个模板类，并且不断收到这个奇怪的错误（ERROR LNK2019:unresolved external symbol）

代码：

AssArray.h：

```
#pragma once   
template <class K,class D>   
class AssArray   
{   
    int _size;   
    int _position;   
    D* _data;   
    K* _key;  

public:    
     AssArray(int);
    ~AssArray(void);

    const D& operator [](K k) const;
    D& operator [](K k);
}; 
```

AssArray.cpp：

```
#include "StdAfx.h"
#include "AssArray.h"

template <class K,class D>
AssArray<K,D>::AssArray(int size)
{
    _size=size;
    _data = new D[size];
    _key = new K[size];
    _position=0;
}

template <class K,class D>
AssArray<K,D>::~AssArray(void)
{
        delete[] _data;
    delete[] _key;
}

template <class K,class D>
const D& AssArray<K,D>::operator [](K k) const
{
    //Get
    for(int i=0;i<_position;i++)
        if(_key[i]==d)
            return _data[i];
    return NULL;
}

template <class K,class D>
D& AssArray<K,D>::operator [](K k)
{
    //Set
    for(int i=0;i<_position;i++)
        if(_key[i]==d)
            return _data[i];

    if(_position<_size-1)
    {
        _key[position]=d;
        _position++;
        return _data[_position];
    }
    else
    {
        //Implement error handling
    }

} 
```

错误是：
1

```
"Error  4   error LNK1120: 3 unresolved externals   
C:\Users\*****\Documents\Visual Studio 2010\Projects\OOPLAB4NYARE\Debug
\OOPLAB4NYARE.exe   1   1   OOPLAB4NYARE" 
```

2

```
Error   1   error LNK2019: unresolved external symbol "public: __thiscall 
AssArray<char *,float>::~AssArray<char *,float>(void)" (??1?$AssArray@PADM@@QAE@XZ)
referenced in function _wmain   C:\Users\*****\Documents\Visual Studio
2010\Projects\OOPLAB4NYARE\OOPLAB4NYARE\OOPLAB4NYARE.obj    OOPLAB4NYARE 
```

3

```
Error   3   error LNK2019: unresolved external symbol "public: __thiscall
AssArray<char *,float>::AssArray<char *,float>(int)" (??0?$AssArray@PADM@@QAE@H@Z) 
referenced in function _wmain   C:\Users\*****\Documents\Visual Studio 
2010\Projects\OOPLAB4NYARE\OOPLAB4NYARE\OOPLAB4NYARE.obj    OOPLAB4NYARE 
```

4

```
Error   2   error LNK2019: unresolved external symbol "public: float & 
__thiscall AssArray<char *,float>::operator[](char *)" 
(??A?$AssArray@PADM@@QAEAAMPAD@Z) referenced in function _wmain C:\Users\Jonathan
\Documents\Visual Studio 2010\Projects\OOPLAB4NYARE\OOPLAB4NYARE\OOPLAB4NYARE.obj   
OOPLAB4NYARE 
```

我正在使用 Microsoft Visual Studio 2010 Ultimate。这很可能是我刚刚忽略的一些简单的事情。

我试图清理->重建，创建一个新项目并复制粘贴相关代码，以及试图找到一个解决方案，但我看到的那些非常多样化和模糊。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T22:29:52.393

您不能将类模板的成员函数定义放在`.cpp`文件中。

*编译器必须在调用*这些函数时看到类模板的成员函数的定义，同时处理`.cpp`包含该调用的翻译单元（即文件）。这允许编译器实际生成代码。除非调用这些函数，否则不会发生实例化。

现在通过将你的函数定义放在一个`.cpp`不包含这些函数调用的文件中，你基本上是：

1.  将它们密封在没有其他`.cpp`文件有机会看到它们的地方；
2.  `.cpp`避免在唯一可以查看其定义的文件中对这些函数进行任何实例化。

因此，编译器不会为它们生成任何目标代码，链接器最终会抱怨找不到相应的符号（这就是你得到的错误）。

要解决此问题，请将类模板的成员函数定义移动到类模板定义所在的同一标题中（`AssArray.h`在您的情况下），或者在`#include`调用这些函数的翻译单元的标题中（和调用点*之前*）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T22:29:44.630

模板类的方法需要在定义类的同一个头文件中实现（通常它们在类本身内部实现，作为内联方法）。

# python - 调用构造函数而不赋值；稍后实例化

> ID：14843011
> 
> 赞同：0
> 
> 时间：2013-02-12T22:26:25.807
> 
> 标签：python, class, reflection, instantiation

假设我有这个代码：

模型.py：

```
class Square:
  def __init__(self, name, value):
    self._name = name
    self._value = value 
```

mymodule.py ：

```
from models import Square
Square('hello', 'there') 
```

主文件

```
m = __import__('mymodule')
for i in dir(m):
  if i == 'Square':
     models.append(getattr(m, i)) 
```

我的问题是：我如何实例化我附加的 Square（当然是我在 mymodule.py 中给出的参数）？

这个想法是稍后实例化 Square。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:39:24.877

你的`mymodule.py`文件有缺陷；你从不*存储实例*。将其存储在变量中：

```
somevariable = Square('hello', 'there') 
```

您不能只调用构造函数并让它悬空。

循环`mymodule`查找命名的属性`Square`不会得到你想要的，你会找到类引用，而不是实例。

也许您应该寻找该`Square`类型的对象：

```
from models import Square

for value in vars(m).itervalues():
    if isinstance(value, Square):
         models.append(value) 
```

如果您想避免必须导入`Square`类，则必须测试类型名称，这更脆弱：

```
for value in vars(m).itervalues():
    if getattr(type(value), '__name__', None) == 'Square':
         models.append(value) 
```

如果您想真正推迟构建，请稍后使用一组预设值构建它，请使用[`functools.partial()`](http://docs.python.org/3/library/functools.html#functools.partial)：

```
from models import Square
from functools import partial

somevariable = partial(Square, 'hello', 'there') 
```

如果您现在导入`somevariable`并*调用*它，partial 将应用已经传入的参数并创建实例：

```
instance = somevariable()  # calls Square('hello', 'there') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:27:34.770

实际上你*是*在 mymodule.py 中实例化它，但它被丢弃了。为了阻止这种情况，您需要将`Square`创建的内容存储在具有名称的东西中，否则它将被垃圾收集，因为没有任何东西引用它。这就是我的意思：

mymodule.py ：

```
from models import Square
a_square = Square('hello', 'there') # name it 
```

然后，您可以在 main.py 中使用该名称直接更快地访问它，如下所示：

主文件

```
models = []
mod = __import__('mymodule')
models.append(vars(mod)['a_square'])  # access it by name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T00:15:03.870

**“这个想法是稍后实例化 Square。”**

您可以通过存储可调用对象及其参数来做到这一点。

```
import models
# save as (callable, args, keywords). This does not create a Square
my_model = (model.Squares, ('hello', 'there'), {})
# sometime later, create the square
my_square = my_model[0](*my_model[1], **my_model[2]) 
```

或者如果你想变得超级花哨并生成很多模型，你可以列出一个列表：

模型.py：

```
class Square(object):
  def __init__(self, name, value):
    self._name = name
    self._value = value

class Round(object):
  def __init__(self, name, value, otherstuff=None):
    self._name = name
    self._value = value
    self._otherstuff = otherstuff 
```

我的模块.py：

```
import models
my_models = (
  (models.Square, ('hello', 'there'), {}),
  (models.Round, ('goodbye', 'there'), {'otherstuff':'stuff'})
) 
```

主文件

```
m = __import__('mymodule')
models = [model[0](*model[1], **model[2]) for model in m.my_models] 
```

# css - 使外层div的宽度根据内层div的内容变化

> ID：14843016
> 
> 赞同：2
> 
> 时间：2013-02-12T22:26:38.973
> 
> 标签：css, css-float, responsive-design, fluid-layout

我试图在新行中显示缩略图类，以防它们不适合外部 1 div 的宽度，而不在外部 1 div 中显示任何空格。

```
<div class="outer-block">
    <div class="outer-1">
        <div class="thumbnail">box 1</div>
        <div class="thumbnail">box 2</div>
        ...
        <div class="thumbnail">box 7</div>
    </div>
</div> 
```

缩略图类的大小固定为宽、高160px、160px。我正在尝试使 outer-1 div 的宽度成为 160px 的倍数，以便带有缩略图类的其他 div 换行到下一行。

此外，我试图将 outer-1 div 的内容相对于外部块 div 居中。

这是我的 jsfiddle 的链接 - [http://jsfiddle.net/K2v3W/2/](http://jsfiddle.net/K2v3W/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T20:17:49.230

据我了解，您希望外部 1 自动全宽，因此仅使用 html/css 执行此操作的唯一方法是使用媒体查询将外部 1 的宽度设置为 160 像素的倍数。

[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

# tomcat - Tomcat vs Glassfish，两者都可能吗？

> ID：14843018
> 
> 赞同：2
> 
> 时间：2013-02-12T22:26:47.287
> 
> 标签：tomcat, glassfish

嗨，我经常阅读以下有关此主题的内容：

```
"Tomcat is a servlet container only, which simply means that it will not 
provide support for Java EE features." 
```

例如，JPA 是一种 Java EE 特性。这意味着它支持 Glassfish。但我也可以在 tomcat 上使用 JPA！

那我为什么可以这样做？我认为我可以只使用 tomcat 来坚持使用 Servlet/JSP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:30:21.743

JPA*是*Java EE 的一部分，这意味着每个 Java EE 容器都应该支持它。Tomcat 不支持开箱即用的 JPA。只有当这些应用程序嵌入了一些 JPA 实现时，您才能在部署在 Tomcat 上的应用程序中使用 JPA。

通常，您会发现嵌入了 Hibernate 或 EclipseLink 的 Spring 应用程序，它们都提供 JPA API。Tomcat 完全不知道这一点，就他而言，这是用户代码。

# 也可以看看

*   [Tom EE](http://tomee.apache.org/apache-tomee.html) -“ *Java EE 6 Web Profile 认证，其中 Tomcat 是顶级狗*”

# javascript - 节点 http.request 什么都不做

> ID：14843019
> 
> 赞同：6
> 
> 时间：2013-02-12T22:26:50.310
> 
> 标签：javascript, node.js, http

```
var http = require('http');

var options = {
    method: 'GET',
    host: 'www.google.com',
    port: 80,
    path: '/index.html'
};

http.request(
    options,
    function(err, resBody){
        console.log("hey");
        console.log(resBody);
        if (err) {
            console.log("YOYO");
            return;
        }
    }
); 
```

由于某种原因，这只是超时并且不会将任何内容记录到控制台。

我知道我可以，`require('request')`但我需要使用`http`与我正在使用的插件兼容。

另外，我的版本背景：Node is **v0.8.2**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:33:38.407

您准备了一个请求对象，但没有使用 .end() 触发它。（回调也不能那样工作。）

请参阅：[http ://nodejs.org/api/http.html#http_event_request](http://nodejs.org/api/http.html#http_event_request)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T22:35:02.050

在此处使用示例：[http ://nodejs.org/api/http.html#http_http_request_options_callback](http://nodejs.org/api/http.html#http_http_request_options_callback)

```
var options = {
  hostname: 'www.google.com',
  port: 80,
  path: '/upload',
  method: 'POST'
};

var req = http.request(options, function(res) {
  console.log('STATUS: ' + res.statusCode);
  console.log('HEADERS: ' + JSON.stringify(res.headers));
  res.setEncoding('utf8');
  res.on('data', function (chunk) {
    console.log('BODY: ' + chunk);
  });
});

req.on('error', function(e) {
  console.log('problem with request: ' + e.message);
});

// write data to request body
req.write('data\n');
req.write('data\n');
req.end(); 
```

回调没有错误参数，您应该使用 on("error", ...) 并且在您调用 end() 之前不会发送您的请求

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T22:40:30.590

这里有几件事：

*   使用`hostname`不`host`兼容`url.parse()`（[请参阅此处](http://nodejs.org/api/http.html#http_http_request_options_callback)）
*   request 的回调接受一个参数，它是[`http.ClientResponse`](http://nodejs.org/api/http.html#http_http_clientresponse)
*   要捕获错误，请使用`req.on('error', ...)`
*   使用时，`http.request`您需要在完成后结束请求，这样您就可以在结束请求之前 `req.end()`编写任何您需要的正文（使用）`req.write()`
    *   注意：`http.get()`会在后台为您执行此操作，这可能是您忘记的原因。

工作代码：

```
var http = require('http');

var options = {
    method: 'GET',
    hostname: 'www.google.com',
    port: 80,
    path: '/index.html'
};

var req = http.request(
    options,
    function(res){
        console.log("hey");
        console.log(res);
    }
);

req.on('error', function(err) {
  console.log('problem', err);
});

req.end(); 
```

# msbuild - MSBUILD 需要很长时间才能将文件传输到 FTP 站点

> ID：14843022
> 
> 赞同：0
> 
> 时间：2013-02-12T22:27:02.440
> 
> 标签：msbuild, ftp, automation

一直在尝试通过 CruiseControl 使用 MSBUILD 社区包自动进行 FTP 传输。数据刚刚结束。花了3个小时，仍然没有完成传输！我不得不杀死它，因为它需要很长时间。关于如何加快速度的任何想法？我知道它可以更快，因为 FileZilla 可以在 45 分钟内传输整个内容！

这是脚本：

```
<Target Name="FTPDeployTransfer">
    <FtpUploadDirectoryContent
  ServerHost="$(ftpHost)"
  Port="$(ftpPort)"
  Username="$(ftpUser)"
  Password="$(ftpPass)"
  LocalDirectory="Path to local"
  RemoteDirectory="path to remote directory"
  Recursive="true"
        />
  </Target> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:51:21.150

您曾写过您使用了 MSBuild 社区包：是[MSBuild Community Tasks](https://github.com/loresoft/msbuildtasks) 还是[MSBuild Extension Pack](http://msbuildextensionpack.codeplex.com/)。

在 MSBuild 扩展包中，您可以尝试处理将文件上传到 FTP 服务器的 FTP 任务。

如果这是您尝试过的任务，或者这对您没有帮助 - 可以通过 Exec Task 从 MSBuild 执行 FileZilla，以便它处理到 FTP 的传输。

[**编辑**]

是的，您也可以尝试使用 WinSCP 进行 FTP 传输，看看这篇文章：[MSBuild 和 WinSCP](http://www.diaryofaninja.com/blog/2010/09/21/continuous-integration-tip-1-ndash-ftp-deployment)。

您可以找到[有关如何加快传输速度的想法](http://winscp.net/eng/docs/faq_slow)。

# django - django-compressor, LESS, 相对 @import 和相对 url()

> ID：14843023
> 
> 赞同：5
> 
> 时间：2013-02-12T22:27:05.803
> 
> 标签：django, less, django-compressor

我正在使用 django-compressor + LESS。

我对`@import`.less 文件中的相对`url(../image.png)`和包含`.less`文件中的相对有问题。

我会解释。我有下一个文件夹结构：

```
common/  # Django app with some common stuff, e.g. common button styles
   static/
     common/
       less/buttons.less
       img/icon.png
blog/
  static/
    blog/
      less/blog_buttons.less 
```

在里面`buttons.less`我有按钮的mixin：

```
.button() {
    color: white;
    padding: 4px 10px;
    background: gray url(../img/icon.png) no-repeat 0 0;
} 
```

在里面`blog_buttons.less`我使用这个mixin：

```
@import "../../../../common/static/common/less/buttons";

.blog_button {
    .button;
    background-color: orange;
} 
```

这就是问题所在：

当 django-compress 预编译我的`blog_buttons.less`- 按钮背景指向`/static/blog/img/icon.png`（404 Not Found）时。但它应该指向`/static/common/img/icon.png`

难道我做错了什么？（我觉得应该是一种很常见的情况）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T21:33:36.793

如果您的静态路径配置正确，您应该能够将两者`common/static`视为`blog/static`同一个文件夹。您的导入语句应该如下所示：

```
@import "../../common/less/buttons"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T08:43:09.493

我对这个问题的回答可能是相关的。您可能还想将“--relative-url”参数添加到lessc [https://stackoverflow.com/a/25929152/559629](https://stackoverflow.com/a/25929152/559629)。

# node.js - 我在哪里可以找到节点 fs 包的 fs.Stats 对象中的每个变量是什么？

> ID：14843024
> 
> 赞同：1
> 
> 时间：2013-02-12T22:27:07.337
> 
> 标签：node.js

我试图弄清楚 fs.Stats 对象中包含哪些信息：[http ://nodejs.org/api/fs.html#fs_class_fs_stats](http://nodejs.org/api/fs.html#fs_class_fs_stats)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:00:06.477

该页面上列出的属性不是特定于节点的，这就是他们不费心记录它们的原因。您可以通过一般搜索找到有关它们的信息`fstat`。

这个[手册页](http://linux.die.net/man/2/fstat)很好地涵盖了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:33:40.173

当推送到了紧要关头时，您总是可以纠正一个将所有对象属性打印到控制台的循环。我以前从未在 node.js 中这样做过，但它应该看起来像......

```
for (var name in myObj)
  console.log(name + ": " + myObj[name]); 
```

这是我所知道的最确定的火法。

# mongodb - 如何在 mongoDB 中进行 LIKE？

> ID：14843029
> 
> 赞同：0
> 
> 时间：2013-02-12T22:27:52.377
> 
> 标签：mongodb, cakephp

db.courses.find({"course_number":"/^AFPRL/"}) 什么也不返回。

以下是我的数据库条目。请原谅我，因为我对 MongoDB 很陌生。我相信我正在尝试在 MySQL 中执行相当于 LIKE 操作的操作？

```
{
  _id: ObjectId("51072be2f046ed1c0e000000"),
  course_number: "AFPRL 100.00",
  room: "HW  215",
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:34:48.400

正则表达式不是字符串。它应该是

```
db.courses.find({"course_number": /^AFPRL/}) 
```

# awk - 在 awk 中匹配“/”一次

> ID：14843030
> 
> 赞同：2
> 
> 时间：2013-02-12T22:27:51.797
> 
> 标签：awk, terminal

我正在尝试使用 awk 在文件路径中提取特定的子字符串。鉴于我有一些东西进入 awk 命令 as `a/workspace/folder.fold/secondfolder/file.ext`，我如何让它结果为`folder.fold/secondfolder/file.ext`？

我试图做

```
| awk -F "/" '{ print $2 }' 
```

但这只会给我`folder`。任何帮助都是肯定的，因为我对 awk 很陌生。

编辑：它实际上是作为`a/workspace/folder.fold/secondfolder/file.ext`. 在我的尝试中，额外的`a/`部分被提取为 1 美元。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:31:47.920

`awk`不是最好的工具，但你可以这样做：

```
awk '{ sub( "/[^/]*/","")}1' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T03:37:48.073

你可以试试 sed

```
sed -re 's@([^/+]/)([^/]+/)@@' temp.txt 
```

输入

`a/workspace/folder.fold/secondfolder/file.ext`

输出

`folder.fold/secondfolder/file.ext`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T22:55:25.833

实现所需输出的一些方法是

```
echo '/workspace/folder.fold/secondfolder/file.ext' | awk -F/ '{for(i=3;i<=NF;i++) printf("%s" ,$i FS)}

echo '/workspace/folder.fold/secondfolder/file.ext' | cut -d / -f 3- 
```

# objective-c - 如何使属性在 InterfaceBuilder (Xcode) 中可见

> ID：14843038
> 
> 赞同：1
> 
> 时间：2013-02-12T22:28:26.107
> 
> 标签：objective-c, xcode, interface-builder

我创建了一个`CustomComponentDataSource`将数据传送到`CustomComponent`.

```
@protocol CustomComponentDataSource <NSObject>
- (NSUInteger)numberOfBlocksInView:(CustomComponent *)customComponent;
...
@end

@interface CustomComponent : NSView
...
@property id <CustomComponentDataSource> dataSource;
...
@end 
```

是否可以使该`dataSource`属性可见并准备好在 XCode Interface Bulder 中链接？

![在此处输入图像描述](../Images/d37cf22ff8bbeb0d14bf92aeef036603.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:33:25.383

将其声明为[`IBOutlet`](http://developer.apple.com/library/mac/#documentation/General/Conceptual/CocoaEncyclopedia/Outlets/Outlets.html)：

```
@property IBOutlet id <CustomComponentDataSource> dataSource; 
```

# android - Android 动画背景（旋转、翻译）

> ID：14843044
> 
> 赞同：0
> 
> 时间：2013-02-12T22:28:55.957
> 
> 标签：android, background, rotation, translate-animation

我制作了我的第一个小游戏。我使用 Android 提供的旋转动画。我在每个类文件中都写了这段代码：

```
this.overridePendingTransition(R.anim.rotate, R.anim.translate); 
```

这是最好的方法还是我可以在某个地方为我的整个应用程序设置它？而且，如果我使用这个动画，新的 Activity 会很好地“旋转”到屏幕上，但背景会变黑。（我想是因为翻译动画？！）如何设置自己的背景？

翻译动画的代码是：

```
<?xml version="1.0" encoding="utf-8"?>
<translate>

    xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromXDelta="200%"
    android:toXDelta="0%"
    android:fromYDelta="200%"
    android:toYDelta="0%"
    android:duration="1000"
    android:zAdjustment="top" /> 
```

和旋转动画：

```
<?xml version="1.0" encoding="utf-8"?>
<rotate
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromDegrees="90"
    android:toDegrees="0"
    android:pivotX="-5%"
    android:pivotY="5%p"
    android:duration="1000" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T01:11:58.590

## 抽象

你目前的方式：

```
overridePendingTransition(R.anim.rotate, R.anim.translate); 
```

设置它的最佳方法是通过抽象`Activity`或[组合](http://www.artima.com/designtechniques/compoinh.html)，这更多地与编程实践有关，而不是专门针对 Android。

短处是：

```
public abstract BaseActivity extends FragmentActivity{
  @Override
  protected onCreate(Bundle savedInstance){
    overridePendingTransition(R.anim.rotate, R.anim.translate);
  }
} 
```

然后你的混凝土`Activity`扩展了这个。

```
public class MyActivity extends BaseActivity{} 
```

## 动画

因此，当前设置意味着您的 New`Activity`将 Rotate **in**，而您的旧活动（应该）翻译**出来**。

看到您将旧活动翻译出（而不是）动画有点错误。用于翻译的正确翻译动画将类似于：

```
<translate
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:fromXDelta="0%"
  android:toXDelta="100%"
  android:fromYDelta="0%"
  android:toYDelta="0%"
  android:duration="1000" /> 
```

这会将退出的活动从中心屏幕转换为向右滑动。

也忽略`zAdjustment`，默认情况下，您的新活动从旧活动开始，您不想将旧活动留在上面。

# twitter-bootstrap - Twitter Bootstrap 弹出框与不同大小的内容不一致

> ID：14843046
> 
> 赞同：2
> 
> 时间：2013-02-12T22:29:09.507
> 
> 标签：twitter-bootstrap, knockout.js, popover

我为 twitter bootstrap popovers 创建了一个自定义绑定，用于在弹出窗口中显示具有两种方式绑定的数据，但如果每个弹出窗口之间的内容大小不同，则对齐关闭

[http://jsfiddle.net/billpull/g6vH2/1](http://jsfiddle.net/billpull/g6vH2/1)

我不确定要在此处发布的相关代码会如此糟糕，只需发布​​整个内容，请检查小提琴以进行演示。

HTML

```
<!doctype html>
<html>
    <body>
        <br><br><br>
        <div data-bind="foreach: items">
            <span data-bind="text: label"></span>
            <input type="checkbox" data-bind="checked: required" />
            <button data-bind="popover: {template: 'settingsPopover', trigger: 'click'}">settings</button><br>
        </div>
        <script type="text/html" id="settingsPopover">
            <h4><span class="icon-cog">&nbsp;</span> Attributes</h4>
            <label>Label</label>
            <input type="text" data-bind="value: label, valueUpdate:'afterkeydown'" />
            <label class="checkbox">
                <input type="checkbox" data-bind="checked: required" /> Required
            </label>
            <ul data-bind="foreach: options">
                <li data-bind="text: $data"></li>
            </ul>
        </script>
    </body>
</html> 
```

JS

```
function s4() {
  return Math.floor((1 + Math.random()) * 0x10000)
             .toString(16)
             .substring(1);
};
function guid() {
  return s4() + s4() + '-' + s4() + '-' + s4() + '-' +
         s4() + '-' + s4() + s4() + s4();
}

// Bind Twitter Popover
ko.bindingHandlers.popover = {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var $element = $(element);
        // read popover options 
        var popoverBindingValues = ko.utils.unwrapObservable(valueAccessor());

        // set popover title 
        var popoverTitle = popoverBindingValues.title;

        // set popover template id
        var tmplId = popoverBindingValues.template;

        // set popover trigger
        var trigger = popoverBindingValues.trigger;

        // get template html
        var tmplHtml = $('#' + tmplId).html();

        // create unique identifier to bind to
        var uuid = guid();
        var domId = "ko-bs-popover-" + uuid;

        // create correct binding context
        var childBindingContext = bindingContext.createChildContext(viewModel);

        // create DOM object to use for popover content
        var tmplDom = $('<div/>', {
            "class" : "ko-popover",
            "id" : domId
        }).html(tmplHtml);

        // set content options
        options = {
            content: tmplDom[0].outerHTML,
            title: popoverTitle
        };

        // Need to copy this, otherwise all the popups end up with the value of the last item
        var popoverOptions = $.extend({}, ko.bindingHandlers.popover.options, options);

        // bind popover to element click
        $element.bind(trigger, function (e) {
            $(this).popover(popoverOptions).popover('toggle');

            // if the popover is visible bind the view model to our dom ID
            if($('#' + domId).is(':visible')){
                ko.applyBindingsToDescendants(childBindingContext, $('#' + domId)[0]);
            }
        });

        // Also tell KO *not* to bind the descendants itself, otherwise they will be bound twice
        return { controlsDescendantBindings: true };
    },
    options: {
        placement: "right",
        title: "",
        html: true,
        content: "",
        trigger: "manual",
        container: 'body'
    }
};

var ItemModel = function (data) {
    var self = this;
    self.label = ko.observable(data.label);
    self.required = ko.observable(data.required);
    self.options = ko.observableArray(ko.utils.arrayMap(data.options, function(option) {
        return option;
    }));
}

var ViewModel = function () {
  var self = this;
  self.initItems = [
      {"label":"Item 1", "required": false, "options": [1,2,3,4,5,6]},
      {"label":"Item 2", "required": true, "options": [1,2,3]},
      {"label":"Item 3", "required": false, "options": []},
      {"label":"Item 4", "required": true, "options": [1,2,3,6]}
   ];

  self.items = ko.observableArray(ko.utils.arrayMap(self.initItems, function (item) {
      return new ItemModel(item);
  }));
};

$(function(){
    ko.applyBindings(new ViewModel);
 }); 
```

[http://billpull.github.com/knockout-bootstrap/](http://billpull.github.com/knockout-bootstrap/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:09:03.310

当您将单击绑定到您的弹出窗口绑定中的元素时，您初始化引导弹出窗口，然后将绑定应用到后代。这就是为什么 bootstrap popover 错误地计算它的位置（还没有嵌套的 li-s 所以它们的高度为零）。之后，淘汰赛会附加 li-s 元素和弹出框高度变化，您必须重新计算弹出框位置。

下一次单击后您重新初始化引导弹出框但不应用绑定，这种情况下弹出框位置计算正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:54:13.970

[演示](http://jsfiddle.net/gurkavcu/m9Axb/)

也许您可以为此使用 ko.applyBindingsToNode() 。首先渲染模板然后绑定弹出框。

```
$element.bind(trigger, function (e) {

    ko.applyBindingsToNode( tmplDom[0], {template : { name :'settingsPopover', data : viewModel}});            
    options = {
        content: tmplDom[0].outerHTML,
        title: popoverTitle
    };

    // Need to copy this, otherwise all the popups end up with the value of the last item
    var popoverOptions = $.extend({}, ko.bindingHandlers.popover.options, options);            
    $(this).popover(popoverOptions).popover('show');        
  //  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-17T21:20:15.030

```
$element.bind(trigger, function (e) {

ko.applyBindingsToNode( tmplDom[0], {template : { name :'settingsPopover', data : viewModel}});            
options = {
    content: tmplDom[0].outerHTML,
    title: popoverTitle
};

// Need to copy this, otherwise all the popups end up with the value of the last item
var popoverOptions = $.extend({}, ko.bindingHandlers.popover.options, options);            
$(this).popover(popoverOptions).popover('show');        
//  }
}); 
```

弹出窗口由于某种原因永远不会关闭！:(

# entity-framework - Entity Framework (5) LINQ 方法返回整个实体集合 THEN apply filter

> ID：14843050
> 
> 赞同：2
> 
> 时间：2013-02-12T22:29:25.787
> 
> 标签：entity-framework

我有这样的代码：

```
 User rValue = null;
        var userByID = new Func<User, bool>(x => x.UserId.Equals(userID, StringComparison.InvariantCultureIgnoreCase));

        if (this._context.Users.Any(userByID))
        {
            var user = this._context.Users
                .Include("nested.Associations")
                .Single(userByID);

            rValue = user;
        }

        return rValue; 
```

我开始分析查询，并注意到 EF 没有将 Func<> 应用于 SQL 查询，而是在返回整个 .Users 集后应用于内存中的集合。

有趣的是，下面会生成带有过滤 UserID 的正确 where 子句的查询：

```
 User rValue = null;
        //var userByID = new Func<User, bool>(x => x.UserId.Equals(userID, StringComparison.InvariantCultureIgnoreCase));

        if (this._context.Users.Any(x => x.UserId.Equals(userID, StringComparison.InvariantCultureIgnoreCase)))
        {
            var user = this._context.Users
                .Include("nested.Associations")
                .Single(x => x.UserId.Equals(userID, StringComparison.InvariantCultureIgnoreCase));

            rValue = user;
        }

        return rValue; 
```

1.  为什么 EF 不会将谓词 var 构建到生成的 SQL 中？
2.  是否有另一种方法可以重用谓词，以便我的代码可以保持干净和可读，并将 EF 填充到生成的 SQL 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T23:37:37.533

1.  EF 无法解释编译后的 IL 代码（您的 Func 本质上就是这样）。它需要像 Reflector 那样猜测原始代码。对于框架来说，这不是一个有吸引力的设计选择，所以它不能那样工作。当您内联 lambda 时，它不是 Func。这是一个*可*分析的表达式。搜索“C# 表达式树”以了解更多信息。

2.  是：`Expression<Func<User, bool>>`用于您的变量。

# java - 什么是排序算法的大哦符号

> ID：14843055
> 
> 赞同：0
> 
> 时间：2013-02-12T22:29:48.447
> 
> 标签：java, sorting, big-o

Big Oh 是如何计算排序算法的？我编写了一个程序来使用选择排序、合并排序和插入排序对一副纸牌 (n = 52) 进行排序。对于每种排序算法，我必须计算计算成本。我该怎么做？

现在我可以诚实地承认这是我家庭作业的一部分，但我只是在寻求一些帮助。我是 Big Oh 符号的新手，浏览了几个网站，但在排序算法方面无法弄清楚。

至少有人可以给我提示吗？

我刚刚参考了维基百科的选择排序、插入排序和合并排序。

插入排序：最佳情况：O(n)，最坏情况和平均情况：O(n^2)

选择排序：所有三种情况的 O(n^2)

合并排序：所有三种情况的 O(nlog n)

真的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:39:19.913

您正在寻找的东西称为复杂性，在您的情况下可能是在运行时方面。“大 O” 只代表上边界，而“小 o” 代表下边界，平均值是“Theta”。它们表示用于执行程序的时间步长的函数，与缩放和加法无关。

示例：如果您的排序算法对每个列表（大小为 n）的项目进行一次迭代（例如，使用 for 循环）并且在每一步上再次循环（在那里执行 l 步），那么您将需要大约 l*n*n 步再加上一些 k 步以进行准备等。这将导致复杂度为`O(l*n*n + k)`，等于`O(n*n) = O(n^2)`，因为 l 和 k 是常数。

更多更深入的信息：[http ://en.wikipedia.org/wiki/Time_complexity](http://en.wikipedia.org/wiki/Time_complexity)

# javascript - 带有 2 个条件的 JavaScript Acrobat 10 IF 语句

> ID：14843064
> 
> 赞同：0
> 
> 时间：2013-02-12T22:30:19.023
> 
> 标签：javascript, drop-down-menu, if-statement, acrobat

我正在使用 Adob​​e Acrobat 10 为照片打印业务创建一个订购表。概念是用户将分别输入每张照片的数据 - 文件名、纸张大小和纸张类型到表格中的单元格中，第四列将计算价格。

纸张尺寸和纸张类型是下拉菜单，纸张尺寸有 4 个选项，纸张类型有 3 个选项，所以 12 种组合都有不同的价格。

我希望每行第四列中的一个单元格根据用户选择的选项计算价格，但无法使用加法/乘法等来计算价格。

我有一个概念，我需要像在 Excel 中一样编写具有多个条件的 IF 语句，但不熟悉 JavaScript，因此需要一些帮助！

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:06:34.413

我自己不熟悉 excel 格式，但在 javascript 中你可能有这样的东西：

```
if(paperType==1 && paperSize==1) {
    price = 13;
} else if(paperType==1 && paperSize==2) {
    price = 16;
} else if(paperType==2 && paperSize==1){
    price = 12;
} else {
    price = 27;
} 
```

当然，有*很多*方法可以解决这个问题，从嵌套 if 语句到将所有内容存储在 map/hash/object 中，再到使用 switch 语句。比较自然不需要针对数字，也可以使用字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:15:13.347

使其成为一个对象并将其用作查找表以[防止过多的 if-else-statements](https://stackoverflow.com/questions/10029089/alternative-to-a-million-if-statements)：

```
var priceByPapersizeAndPapertype = {
    "A4": {
        "thick": 8.00,
        "medium": 13.50,
        "thin": …
    },
    "A5": {
         …
    },
    …
};

var size, type = …; // from form input
var price = priceByPapersizeAndPapertype[size][type]; 
```

如果用户可以输入无效输入，您可以检查密钥是否存在，`if (size in priceByPapersizeAndPapertype)`并在需要时输入错误消息。

# java - 将一个字符串拆分为多行

> ID：14843068
> 
> 赞同：1
> 
> 时间：2013-02-12T22:30:23.910
> 
> 标签：java, string, split, jsoup

我有一个程序，它使用 Jsoup 获取特定球队的曲棍球运动员的统计数据并将其放入单个字符串中。我想将线路分开，以便我可以在他们自己的字符串中获取每个玩家的统计数据。这是我拥有并解释的代码：

```
public static void main(String[] args) throws IOException {

    Document doc = Jsoup.connect("http://espn.go.com/nhl/team/stats/_/name/phi/philadelphia-flyers").get();

    for (Element table : doc.select("table.tablehead")) {
        for (Element row : table.select("tr")) {
            Elements tds = row.select("td");
             if (tds.size() > 6) {
                String a = tds.get(0).text() + ":" + tds.get(1).text() + " GOALS: " + tds.get(2).text() + " ASSISTS: " + tds.get(3).text() + " POINTS: " + tds.get(4).text() + " PLUS/MINUS: " + tds.get(5).text() + " PIM: " + tds.get(6).text();
                System.out.println(a);
            }
        }
    }
} 
```

输出给出了多行，为了让您了解这些是它给出的前三行：

```
PLAYER:GP GOALS: G ASSISTS: A POINTS: PTS PLUS/MINUS: +/- PIM: PIM
Matt Read, C:13 GOALS: 5 ASSISTS: 4 POINTS: 9 PLUS/MINUS: 2 PIM: 2
Brayden Schenn, C:12 GOALS: 2 ASSISTS: 6 POINTS: 8 PLUS/MINUS: 3 PIM: 5 
```

如果行的开头 = Matt Read 我想创建一个包含以下内容的字符串：

```
Matt Read, C:13 GOALS: 5 ASSISTS: 4 POINTS: 9 PLUS/MINUS: 2 PIM: 2 
```

如果行的开头 = Brayden Schenn 我想创建一个包含以下内容的字符串：

```
Brayden Schenn, C:12 GOALS: 2 ASSISTS: 6 POINTS: 8 PLUS/MINUS: 3 PIM: 5 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:33:13.133

除非我不理解代码，否则您似乎几乎已经这样做了 - 每一行都`String a`在每次循环迭代的变量中。您只需要向外保存`a`. `ArrayList<String>`在您的初始 for 循环之前实例化 a并`a`在您调用`System.out.println(a);`. 退出 for 循环后，您`ArrayList`应该包含每个适当的个人`String`.

```
public static void main(String[] args) throws IOException {

    List<String> list = new ArrayList<String>(); // THIS LINE IS NEW

    Document doc = Jsoup.connect("http://espn.go.com/nhl/team/stats/_/name/phi/philadelphia-flyers").get();

    for (Element table : doc.select("table.tablehead")) {
        for (Element row : table.select("tr")) {
            Elements tds = row.select("td");
             if (tds.size() > 6) {
                String a = tds.get(0).text() + ":" + tds.get(1).text() + " GOALS: " + tds.get(2).text() + " ASSISTS: " + tds.get(3).text() + " POINTS: " + tds.get(4).text() + " PLUS/MINUS: " + tds.get(5).text() + " PIM: " + tds.get(6).text();

                    list.add(a);  // THIS LINE IS NEW

                System.out.println(a);
            }
        }
    }

        // at this point, variable "list" contains each String assigned to "a" above.

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T22:35:35.403

您可以使用 Scanner 类通过调用scanner.nextLine() 方法从任何文本主体（或直接从文件）中提取单独的行。它只会扫描输入字符串，直到遇到换行符，然后将所有内容返回给它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T22:52:22.490

您可以使用扫描仪，或者更适合使用 List，甚至是 HashMap 来存储有关玩家的信息。

不要打印该行，而是声明您喜欢的类型并将字符串 a 存储在那里。

# asp.net-mvc - 在 3 层设计中使用 ASP.NET 的成员资格和身份验证

> ID：14843076
> 
> 赞同：1
> 
> 时间：2013-02-12T22:30:41.133
> 
> 标签：asp.net-mvc, asp.net-mvc-3, wcf

我最近获得了 Visual Studio 2012 专业版，并且正在设计一个 Web 应用程序。我打算使用 3 层设计，其中 MVC 4 作为顶层，WCF 作为中间层。我还想尽可能多地使用 Microsoft 提供的“开箱即用”功能（考虑到 $ 成本）。

查看 MVC 4 Internet Application 模板，我注意到它使用 LocalDB 和 WebSecurity 来创建和验证帐户。我计划通过中间层发送请求以创建和验证用户，但想要类似的功能。

Microsoft 希望我如何做到这一点？听起来除了 WCF 身份验证和角色服务之外，我还需要实现 ASP.NET 成员资格、角色和配置文件。这听起来对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:12:18.603

默认情况下，ASP.NET 成员资格系统不适用于三层设计。您可以实现自己的自定义成员资格提供程序，或者您可以跳过它并实现自己的 IIdentity 和 IPrincipal 接口。

您可能会发现这篇文章很有帮助：

[http://elysianonline.com/programming/wcf-wrapper-for-asp-net-membership/](http://elysianonline.com/programming/wcf-wrapper-for-asp-net-membership/)

# php - Divs 不在另一个中心

> ID：14843078
> 
> 赞同：2
> 
> 时间：2013-02-12T22:30:59.263
> 
> 标签：php, css, html

我在 PHP 中使用一段时间显示来自数据库的多个项目。

对于格式，我有以下 CSS：

```
.similarItemsFrame
{
    margin: 0px auto;
}

.similarItems { 
    float: left;
    margin: 0px auto;
    margin: 3px;
    text-align:center;
    padding: 1px;
 }

.similarImage {
     border: 3px solid white;
         margin: 0px auto;
     float: left;
 } 
```

要显示的代码如下：

```
echo "<div class='similarItemsFrame'>";
while ($row3 = $result3->fetch())
{
    echo "<div class='similarItems'>";
    echo "<a href='itemsDescr.php?itemId=".$row3[id_item]."'><img class='similarImage' src='http://www.tahara.es/images/{$row3[thumb1]}.jpg'></img>";
    echo "<div class='similarItemsText'>".$row3[name]."</a></div></div>";
} 
```

问题是 IMG 没有居中。正如我配置的那样，它们是 2 x 2 出来的，但它们被推到左边。当我删除的问题`float: left`是这些项目完全放错地方了。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:37:32.583

尝试使用`display: inline-display;`, as 与`float: left;`. 更多信息在这里...... [http://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/](http://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/)

# vbscript - 在VBScript中将两个字符的ASCII字符串转换为DOUBLE

> ID：14843081
> 
> 赞同：1
> 
> 时间：2013-02-12T22:31:12.150
> 
> 标签：vbscript

我想将字符串“ME”转换为 VBS 中的双 25933 我正在尝试以下方法但没有运气

```
value = AscB(ASCII("M")) *2^8
value = value + AscB(ASCII("E"))
value = CDbl(value) 
```

此转换适用于将双字显示为字符串的 HMI 显示。25933 给了我“我”。不要让我误导你，我不确定这是否应该是一个“双重”我只是想从“我”得到 25933，就像在一个理想的世界（伪代码）Cdouble（CByte（“M”）+字节（“E”））。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:49:29.610

如果我的逻辑正确，则您的示例不正确。

```
Asc("M") = 77  = 0x4D
Asc("E") = 69  = 0x45
Asc("e") = 101 = 0x65 
```

也就是说，“ME”的数字表示是17741（0x454D），而25933（0x654D）对应的是“Me”。

至于您的代码，它将第一个字符用于高字节，将第二个字符用于低字节，但似乎反之亦然：

```
WScript.Echo Str2Num("Me") ' 25933
WScript.Echo Str2Num("ME") ' 17741

Function Str2Num(Str)
  ch1 = Left(Str, 1)
  ch2 = Mid(Str, 2, 1)
  Str2Num = CDbl(Asc(ch2) * 256  + Asc(ch1))
End Function 
```

# assembly - 汇编语言 - LDI

> ID：14843084
> 
> 赞同：0
> 
> 时间：2013-02-12T22:31:18.687
> 
> 标签：assembly, computer-science, opcode, lc3

当我们执行 LDI 时，我无法确定天气以将寄存器中的数据内容加载到寄存器中，或者使用值的地址间接加载寄存器。

例子：

```
x3000 LDI R6, far
x3001 ...(some command)
x3002 ...(some command)
x3003 far x6000
...
x6000  xf000 
```

执行x3000后R6中的数据是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:55:45.727

以这个为例

```
.orig x3000
LDI R6, far
ADD R0,R0,#0
ADD R0,R0,#0
far .fill x6000
.end 
```

组装和倾倒

```
hexdump -C test.obj
00000000  30 00 ac 02 10 20 10 20  60 00                    |0.... . `.|
0000000a 
```

并手动拆卸

```
0x3000: 0xAC02  ldi r6,#+2 
0x3001: 0x1020  add r0,r0,#0
0x3002: 0x1020  add r0,r0,#0
0x3003: 0x6000 
```

LDI 指令执行此操作：

```
DR = mem[mem[PC† + SEXT(PCoffset9)]];
setcc(); 
```

指令的低 9 位是 0x002，其符号扩展为 0x0002。pc是修改后的pc，所以当在地址0x3000执行指令时，pc实际上是0x3001所以

```
DR = mem[mem[0x3001+0x0002]]
DR = mem[mem[0x3003]]
DR = mem[0x6000]
DR = 0xF000 using your definition for what lives at address x6000.
DR is r6 so 0xF000 is stored in r6\.  
0xF000 is considered a negative so the flags are N = 1, Z = 0, P = 0 if I understand the flags correctly. 
```

# ruby-on-rails - 没有路线匹配 [GET] "/user/1" 按照 Michael Hartls rails 教程

> ID：14843085
> 
> 赞同：0
> 
> 时间：2013-02-12T22:31:20.950
> 
> 标签：ruby-on-rails, railstutorial.org

我在清单[7.3](http://ruby.railstutorial.org/chapters/sign-up#top)上，并且收到了 no route 错误。我对 Rails 很陌生，所以我可以提供哪些其他文件来帮助调试。

这是我的路线文件

```
SampleApp::Application.routes.draw do
  resources :users

  root to: 'static_pages#home'

  match '/signup',  to: 'users#new'
  match '/signup', to: 'users#new'
  match '/help',    to: 'static_pages#help'
  match '/about',   to: 'static_pages#about'
  match '/contact', to: 'static_pages#contact'

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:38:37.037

您应该使用“/users/1”，而不是“/user/1”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-08T10:31:19.283

遇到同样的问题）

我的错误是`resource :users`在 routes.rb

但正确的是`resources :users`

在第一种情况下，您会获得`GET /users(.:format) users#show`rake 路由输出并可以访问您的用户 throo url`http://localhost:3000/users?id=1`

在第二种情况下，您将获得`user GET /users/:id(.:format) users#show`rake route 输出并可以访问您的用户 throo url`http://localhost:3000/users/1`

# jsrender - 嵌入不带 {{for}} 的 jsRender 模板或组合内联 + 块模板

> ID：14843086
> 
> 赞同：0
> 
> 时间：2013-02-12T22:31:23.973
> 
> 标签：jsrender

我正在使用当前最新的 jsRender（截至 2013 年 2 月 12 日），并且我正在尝试将模板组件化，以便渲染嵌套对象模型。

我希望能够；

**1\. 将参数传递给我的模板函数，以便我可以使用不同的参数递归调用它；**

```
 <script id="tmplQ" myParam="int?" type="text/x-jquery-tmpl">
        <div class="rgRow L{:*myParam*} e">  // wrap this in L2/L3/L4 etc depending on myParam
            <div class="td q">{{:q}}</div>
        </div>
        {{for cq templ="#tmlQ(myParam+1)"}}  // increment parameter for recursing
    <script> 
```

所以基本上，我想以 0 开头的 myParam 传递，然后模板在向下钻取嵌套的 json 对象模型时调用自身。

**[更新]**好的，所以再搜索几页，看起来你可以这样做：[JsRender：如何将变量传递到嵌套模板](https://stackoverflow.com/questions/11325085/jsrender-how-to-pass-variables-into-a-nested-template)中，但我仍然很想在可能的情况下看到这些其他选项；**[/更新]**

**2\. 或者失败了，我一直试图简单地将块模板的一部分包含在另一个内联模板中；**

```
 {{for cq tmpl="#tmplQ"}}         // renders inline template but nothing else
          <div class="rgRow L2 e">         // needed to wrap this in L2
          {{for cq tmpl="#tmplQ"}}     // can't mix inline/block templates
              <div class="rgRow L3 e"> // wanted to wrap this in L3
                  {{for cq tmpl="#tmplQ"/}}  // would work if it got here
              </div>
          {{/for}}
        </div>
    {{/for}} 
```

使用更简单的库模板；

```
<script id="tmplQ" type="text/x-jquery-tmpl">
    <div class="td q">{{:q}}</div>
</script> 
```

问题是，jsRender 似乎不支持混合内联和块样式。一旦你放入它`tmpl=`，`{{for}}`它就会忽略嵌套在它下面的所有其他内容。这是一种耻辱。我希望看到它支持两者的混合。它甚至不会引发错误。

**我也试图找到这样的语法来简单地调用模板内联。**它存在吗？

```
 {{for cq tmpl="#tmplQ"}}         // renders inline template but nothing else
          <div class="rgRow L2 e">   // wrap in L2
          {{for cq}}
              {{call tmpl="#tmplQ"}}         // call library template????
              <span>other content</span>
          {{/for}}
        </div>
    {{/for}} 
```

但它也不起作用。我也试过这些直接调用模板。

```
{{tmplQ()}}
{{tmpl("#tmplQ")}} 
```

任何人都有线索，或者（鲍里斯）可能会进入下一个修订版？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:56:04.580

随着最新的 JsRender 更新，现在有一个新的“包装模板”功能，用于提供模板和块内容，以便模板可以“包装”内容。 有关示例，请参见[http://borismoore.github.com/jsrender/demos/step-by-step/06_template-composition.html 。](http://borismoore.github.com/jsrender/demos/step-by-step/06_template-composition.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:52:02.473

所以这就是我如何使用递归模板解决问题的第一部分。这会根据传入的参数设置 L1、L2、L3 等；

```
<script id="tmplQ" type="text/x-jquery-tmpl">
    <div class="selected stmQ">
        {{for process.qs[0]}}
            {{for cq}}
                <a id="q-{{:stm.n}}">q-{{:stm.n}}</a>
                <div class="table">
                    {{for cq ~depth=1 tmpl="#tmplNestedQ"/}}
                </div>
            {{/for}}
        {{/for}}
    </div>
</script>

<script id="tmplNestedQ" type="text/x-jquery-tmpl">
    <div class="rgRow L{{:~depth}} e">
        <div class="td q">{{:q}}</div>
    </div>
    {{for cq ~depth=(~depth+1) tmpl="#tmplNestedQ"/}}
</script> 
```

# python - 如何在 Python 中将一个元组变成一个整数（里面的例子）？

> ID：14843088
> 
> 赞同：1
> 
> 时间：2013-02-12T22:31:37.283
> 
> 标签：python, integer, tuples

我有一个元组列表：

“（1,2,3），（2,3,1）......”

我想将其更改为整数列表：

“123、231……”

我该怎么做呢？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T22:38:07.020

更实用的方法：

```
[reduce(lambda a, x: a * 10 + x, t) for t in tuples] 
```

**编辑：**

只是为了好玩，对 JBernardo 的回答做一个小基准测试：

```
In [21]: %timeit [int(''.join(str(i) for i in t)) for t in tuples]
100000 loops, best of 3: 7.54 us per loop

In [22]: %timeit [reduce(lambda a, x: a * 10 + x, t) for t in tuples]
1000000 loops, best of 3: 1.55 us per loop 
```

**编辑2：**

Akavall 指出我的原始答案仅在元组仅具有单个数字整数时才有效。

如果这对您的用例来说是不可接受的，那么 JBernardo 的回答可能是一种更简单的方法。但只是为了好玩：

```
[reduce(lambda a, x: a * 10**(len(str(x))) + x, t) for t in tuples] 
```

或根本没有任何字符串转换：

```
from math import log10
[reduce(lambda a, x: a * 10**(int(log10(x))+1) + x, t) for t in tuples] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T22:33:42.670

怎么样：

```
[int(''.join(str(i) for i in t)) for t in tuples] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T22:58:37.660

比@Luke 的复杂

```
[sum(x * 10**i for i, x in enumerate(t[1][::-1])) for t in tuples] 
```

它就像 x1 + x2 * 10^2 + ... + xN * 10^n

`[::-1]`- 反转元组，枚举得到 (xN, N) 对。

# codeigniter - Codeigniter 文本电子邮件格式

> ID：14843091
> 
> 赞同：0
> 
> 时间：2013-02-12T22:31:46.397
> 
> 标签：codeigniter, email, text

我想发送类型的电子邮件：来自在 codeigniter 中制作的网络应用程序的文本。我不想使用 html 电子邮件，因为我已经阅读了很多反对它们的文章。

我的问题是，是否有任何方法可以使电子邮件正文中的字母变为粗体，以及是否可以以某种方式使用项目符号，即使我想发布文本类型的电子邮件。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:45:41.837

不，没有办法加粗纯文本（对我来说似乎很明显），但你可以使用任何你想解决它的格式，比如`*asterisks for important text*`. 对于项目符号，您可以使用破折号或点字符，例如`·`.

> · 项目 1
> · 项目 2

但是，您可以同时发送 HTML 和纯文本消息。可以查看 HTML 电子邮件的用户将获得格式化版本，而其他所有人将获得纯文本版本。

> [http://ellislab.com/codeigniter/user-guide/libraries/email.html](http://ellislab.com/codeigniter/user-guide/libraries/email.html)
> 
> `$this->email->set_alt_message()`
> 
> 设置备用电子邮件正文：
> 
> `$this->email->set_alt_message('This is the alternative message');`
> 
> 这是一个可选的消息字符串，如果您发送 HTML 格式的电子邮件，可以使用它。它允许您为不接受 HTML 电子邮件的人指定不带 HTML 格式的替代消息，该消息将添加到标题字符串中。如果您没有设置自己的消息，CodeIgniter 将从您的 HTML 电子邮件中提取消息并去除标签。

对于时事通讯之类的内容，提供指向电子邮件的托管 HTML 版本的链接也很常见。

> 我不想使用 html 电子邮件，因为我已经阅读了很多反对它们的文章。

我猜这些文章现在已经过时了，HTML 电子邮件很常见，应该可以安全使用，因为大多数电子邮件客户端都可以显示 HTML。

# sql-server - EF 使用 ExecuteStoreCommand 创建过程（运行批量脚本）

> ID：14843094
> 
> 赞同：0
> 
> 时间：2013-02-12T22:31:49.903
> 
> 标签：sql-server, entity-framework

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- USP_TEST_SELECT
-- =============================================
IF EXISTS (SELECT name FROM sysobjects WHERE name = 'usp_test_select' AND type = 'P')
    DROP PROCEDURE usp_test_select
GO
CREATE PROCEDURE usp_test_select
    @id         int 
AS
BEGIN
    SET NOCOUNT ON;
    SELECT * FROM MY_TABLE mt WHERE mt.id = @id
END
GO
-- ********************************************** 
```

我从文本文件中读取了这个脚本，并希望使用 EF `.ExecuteStoreCommand`（或 EF 中的任何其他执行方法）运行它。

抛出异常：

> *System.Data.SqlClient.SqlException (0x80131904)：“GO”附近的语法不正确。
> 'CREATE/ALTER PROCEDURE' 必须是查询批处理中的第一条语句。*

我正在运行的脚本（文本文件）由 SQL Server Management Studio 生成，如果在那里执行，则运行成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:48:30.053

`GO`不是有效的`T-SQL statement`，它仅供 SQL Management Studio 使用。更改您的代码以使用动态创建 sql 例如：

```
If exists (condition) then exec('create procedre..') 
```

# c# - C# 检索 MAC 地址、HHD 大小、内存、操作系统版本信息

> ID：14843096
> 
> 赞同：1
> 
> 时间：2013-02-12T22:31:56.160
> 
> 标签：c#

我一直在使用 Windows 的 Win32 类，并为基于 Windows 的机器（显然）编写了一个清单程序。

有没有办法通过程序收集系统信息并将信息转储到文本文件中？

我正在寻找检索硬件信息（MAC 地址、硬盘驱动器大小。安装的内存、操作系统版本等）

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:46:23.393

对于 Mac 地址，您可以使用 System.Net.NetworkInformation.NetworkInterface 类找到它。

```
static string GetMacAddress()
{
  string macAddresses = "";
  foreach (NetworkInterface nic in NetworkInterface.GetAllNetworkInterfaces())
  {
    // Find all ethernet MACs
    if (nic.NetworkInterfaceType == NetworkInterfaceType.Ethernet) 
    {
        macAddresses += nic.GetPhysicalAddress().ToString();
    }
  }
  return macAddresses;
} 
```

要以编程方式查找其他系统规范，您可以使用类似于以下代码的内容。如果您转到[Environment 类](http://msdn.microsoft.com/en-us/library/z8te35sa.aspx)的 MSDN 页面，您可以找到更多有用的系统信息。

```
public string SysInfo() 
{
    Stringbuilder systemInformation = new Stringbuilder(string.Empty);

    systemInformation.AppendFormat("Operation System:  {0}\n", Environment.OSVersion);
    systemInformation.AppendFormat("ProcessorCount:  {0}\n", Environment.ProcessorCount);
    systemInformation.AppendFormat("SystemDirectory:  {0}\n", Environment.SystemDirectory);
    systemInformation.AppendFormat("UserDomainName:  {0}\n", Environment.UserDomainName);
    systemInformation.AppendFormat("UserName: {0}\n", Environment.UserName);

    foreach (System.IO.DriveInfo drive in System.IO.DriveInfo.GetDrives())
    {
        // Get each drive
        systemInformation.AppendFormat("\t Drive: {0}" +
                  "\n\t\t VolumeLabel: {1}" + 
                  "\n\t\t DriveType: {2}" +
                  "\n\t\t DriveFormat: {3}" +
                  "\n\t\t TotalSize: {4}" +
                  "\n\t\t AvailableFreeSpace: {5}\n",
                  DriveInfo1.Name, DriveInfo1.VolumeLabel, DriveInfo1.DriveType, 
                  DriveInfo1.DriveFormat, DriveInfo1.TotalSize, DriveInfo1.AvailableFreeSpace);
    }

    return systemInformation.ToString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T15:55:42.257

非常感谢您提出这个问题。我正在做一个相同的项目，这非常有帮助。

答案正是我需要的。

我建议对 SysInfo() 函数的winglerw28 代码片段进行编辑：

```
 systemInformation.AppendFormat("\t Drive: {0}" +
              "\n\t\t VolumeLabel: {1}" + 
              "\n\t\t DriveType: {2}" +
              "\n\t\t DriveFormat: {3}" +
              "\n\t\t TotalSize: {4}" +
              "\n\t\t AvailableFreeSpace: {5}\n",
              DriveInfo1.Name, DriveInfo1.VolumeLabel, DriveInfo1.DriveType, 
              DriveInfo1.DriveFormat, DriveInfo1.TotalSize, DriveInfo1.AvailableFreeSpace); 
```

我很确定“DriveInfo1”引用应该全部更改为“驱动器”，如下所示：

```
 systemInformation.AppendFormat("\t Drive: {0}" +
                      "\n\t\t VolumeLabel: {1}" +
                      "\n\t\t DriveType: {2}" +
                      "\n\t\t DriveFormat: {3}" +
                      "\n\t\t TotalSize: {4}" +
                      "\n\t\t AvailableFreeSpace: {5}\n",
                      drive.Name, drive.VolumeLabel, drive.DriveType,
                      drive.DriveFormat, drive.TotalSize, drive.AvailableFreeSpace); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T22:38:05.067

您可以为此使用 SystemInfo。它是一个命令行工具，可提供有关所有内容的信息。 [http://technet.microsoft.com/en-us/library/bb491007.aspx](http://technet.microsoft.com/en-us/library/bb491007.aspx)

转储到文本文件

```
C:\systeminfo >>C:\a.txt 
```

这应该生成包含信息的文件。

如果您想从 C# 应用程序调用此命令，您可以使用 System.Diagnostic.Process 启动一个进程来运行相同的命令并生成文件。

# php - PHP 自动执行

> ID：14843098
> 
> 赞同：0
> 
> 时间：2013-02-12T22:31:58.867
> 
> 标签：php, cron

我正在尝试在预定义的时间执行 PHP 脚本。例如，我如何编写一个 php 脚本来强制该脚本在 2013 年 3 月 24 日上午 11:14 运行（即使浏览器已关闭）。我听说过 cron，但我不清楚。

感谢您阅读

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:36:55.413

确实`cron`可以回答您的问题。它是 Linux 系统中的一个特殊程序，在给定时间或定期运行定义的程序/命令。看这里：[http ://unixhelp.ed.ac.uk/CGI/man-cgi?crontab+5](http://unixhelp.ed.ac.uk/CGI/man-cgi?crontab+5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:40:44.217

您将不得不查看您的托管环境中可用的内容。具有命令行访问权限的 Linux/Unix？Cron 可能是您的答案（[http://kvz.io/blog/2007/07/29/schedule-tasks-on-linux-using-crontab/](http://kvz.io/blog/2007/07/29/schedule-tasks-on-linux-using-crontab/)）。如果您使用的是 Windows 服务器，Windows 计划任务将起作用 ( [http://support.microsoft.com/kb/308569](http://support.microsoft.com/kb/308569) )。如果您有 cPanel 或类似的东西（很多托管解决方案都使用它），那么您将不得不查看文档以了解如何安排任务。

我不同意 Racialz，PHP 命令行 (CLI) 非常适合这种工作，我之前什至在 php 中做过 svn 钩子。使用什么的最佳答案通常是您最熟悉的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T22:34:02.363

这在 PHP 中会很麻烦。我建议你使用像 Cron's Jobs 这样的东西来做到这一点。大多数 cPanel 上都有 CronsJob，但如果你不看这个教程：[http ://www.thesitewizard.com/general/set-cron-job.shtml](http://www.thesitewizard.com/general/set-cron-job.shtml)

# python - 无法将图像添加到 Tkinter 列表框

> ID：14843100
> 
> 赞同：2
> 
> 时间：2013-02-12T22:32:04.123
> 
> 标签：python, listbox, tkinter

我正在尝试将图像添加到列表框中，但我在列表框中看到了一个名为“pyimage1”的条目，而不是图像。我已经使用 Text 和 Label 小部件成功显示了图像，但我无法弄清楚 Listbox 小部件。

我检查了文档，但它没有说明如何使用图像正确更新列表框。

将图像添加为列表框条目的最佳方法是什么？

这是我迄今为止尝试过的：

```
#!/usr/bin/python
# test: lb_and_jpg.py

from Tkinter import *
from PIL import Image, ImageTk

import os

my_image_file = os.getcwd() + r'\logo.jpg'

class MainApp:
    def __init__(self, parent):
        self.myParent = parent
        self.main_container = Frame(parent)
        self.main_container.grid(row=0, rowspan=10, column=0, columnspan=20)

        # Defining frames
        self.left_frame = Frame(self.main_container)
        self.left_frame.grid(row=0, rowspan=10, column=0, columnspan=5)

        self.right_frame = Frame(self.main_container)
        self.right_frame.grid(row=0, rowspan=10, column=6, columnspan=14)

        self.left_listbox = Listbox(self.left_frame, height=10, width=5)
        self.left_listbox.grid(row=0, column=0)

        self.right_listbox = Listbox(self.right_frame, height=10, width=14)
        self.right_listbox.grid(row=0, column=0)

        my_img = Image.open(my_image_file)
        my_image = ImageTk.PhotoImage(my_img)

        self.right_listbox.insert(END, my_image)

root = Tk()
root.title("ListBox and JPG")
mainapp = MainApp(root)
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T02:10:37.837

您不能将图像添加到列表框。您将需要使用另一个小部件，例如 ttk.Treeview 小部件。

# sql - Sql数据按日历日期排序

> ID：14843104
> 
> 赞同：3
> 
> 时间：2013-02-12T22:32:16.223
> 
> 标签：sql, sql-server, sql-server-2008

SQL 数据仅按日历天排序。例如 2013 年 2 月 1 日是星期五，需要提取 2 月 1 日和 2 日的数据。现在它会将 2013 年 1 月 27 日整周的数据提取到2013 年 2 月 2 日。我的结果包含在周末结束日期的总账单中。EX( 1-5-13, 1-12-13) 对于 1 月底和 2 月初，我需要结果看起来像 1-27-13 到 1-31-13 = "total" 与一周结束日期为 31 日。对于 2 月 2-1-13 至 2-2-13 =“总计”

我已经能够在个别日子里做到这一点，但这不是“会计”想要的。

提前致谢。这是我的代码：

```
SELECT
    DATEADD(week, DATEdiff(WK, 0, bd.[Service Date 1]) ,5) AS month, 
    bd.Chart, 
    bd.[Transaction Code], 
    SUM(bd.Units) AS [Total Billed]

FROM dbo.[Billing Detail] AS bd 

INNER JOIN dbo.Patient AS p ON bd.Chart = p.[Chart Number]
WHERE

    (bd.[Transaction Code] = 'H2016') 
    AND (bd.[Service Date 1] >= '01/01/2013') 
    AND (bd.[Service Date 1] < '12/31/2013')

GROUP BY 
    DATEADD(week, DATEdiff(WK, 0, bd.[Service Date 1]) ,5), 
    bd.Chart, 
    bd.[Transaction Code]

ORDER BY bd.Chart 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:46:02.677

只需将两个字段添加到您的选择列表（并按列表分组）：

```
...
MONTH([Service Date 1]),
DATEPART(week,[Service Date 1])
... 
```

那应该这样做

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T22:57:35.770

我会编写一个将日期变量作为输入参数的存储过程。它会像这样开始：

```
declare @dateIn as date;
declare @EndOfWeek as date;
declare @StartOfWeek as date;
declare @WeekEndsOn as int;

set @WeekEndsOn = 6;  -- Friday
if datepart(dw, @dateIn) <= @WeekEndsOn
set @EndOfWeek = dateadd(day, @WeekEndsOn - datepart(dw, @dateIn), @dateIn);
else
set @EndOfWeek = dateadd(day, (7 + @WeekEndsOn) - datepart(dw, @dateIn), @dateIn) 
```

然后使用 @StartOfWeek 和 @EndOfWeek 变量运行查询。您可以使用 convert() 和 concatonation 的组合来获取像这样的字符串，“2-1-13 to 2-2-13”。

实际上，您可能还希望将 @WeekEndsOn 作为输入参数，以防万一它发生变化。

# javascript - 异步加载的脚本导致类型错误 - 坏事？

> ID：14843106
> 
> 赞同：1
> 
> 时间：2013-02-12T22:32:18.000
> 
> 标签：javascript, jquery, asynchronous, yepnope

我正在使用 YepNope 加载 JavaScript。就我而言，该脚本仅在 Safari 中加载，而不在 Firefox 中加载。尽管如此，Firebug 还是给了我那个类型错误：

```
TypeError: $(...).html5form is not a function 
```

`html5form`是我在脚本加载后执行的回调中调用的函数的名称。当然，Firefox 也会解析那段代码，但没有加载脚本，我相信这就是该错误的原因。
有没有办法解决这个错误？我*是否*必须修复它，因为这样的错误会导致其他问题？

这就是我正在使用的代码：

```
(function($){
  $( document ).ready( function() {
    yepnope({
      test: Modernizr.formvalidation,
      nope: wpurls.siteurl + "/wp-content/themes/" + wpurls.template + "/js/jquery.html5form-1.5-min.js",
      complete: function () {
        $("#form").html5form({
          async : false,
          method : $(this).attr('method'), 
          responseDiv : "#test",
          labels : "show",
          colorOn : '#000000', 
          colorOff : '#a1a1a1', 
          action : $(this).attr('action'),
          messages : "es",
          emptyMessage : false,
          emailMessage : false,
          allBrowsers : false
        });
      }
    });
  });
})(window.jQuery); 
```

因为Wordpress在无冲突模式下运行jQuery，所以不能`$`直接使用，必须重新映射。也许`s the problem? Because`jquery.html5form-1.5-min.js` 是用“普通” jQuery 编写的。

# c++ - 生成组合/排列（v 符号上的 t 集）

> ID：14843107
> 
> 赞同：0
> 
> 时间：2013-02-12T22:32:21.127
> 
> 标签：c++, algorithm, permutation, combinations, combinatorics

我正在处理覆盖数组，需要一些关于生成集（给定某些参数）的指导，以计算数组是否是覆盖数组。

我有两个输入来解析 -`t`和`v`整数。`v`包含数组中唯一符号（整数）的数量。可以假定这是一组任何整数。整数`t`代表我想从这个集合中抓取的符号的长度。

因此，例如，假设`v = 3`为`{0,1,2}`符号，并且`t = 2`。然后我将生成组合`{ (0,0), (0,1), (0,2), (1,0), (1,1), (1,2), ..., (2,2) }`。一般来说，我会生成`v^t`组合。我想知道是否有比我一直在使用的算法更好的算法，它的计算成本可能更低。

基本上我正在做的是在不同的基础上进行计数。因此，例如，在上面的示例中，我最初从一个`t`空间分配为 0 的数组开始。每次传递时，我都会递增最低有效位并将其转换为一个集合或其他一些数据结构来保存我的组合。一旦最低有效位溢出，我将其设置为 0 并递增下一个有效位。这一切都在不同的基础上计算。所以我最终会得到`t=2`and的以下输出`v=3`：

```
00
01
02
10
11
12
20
21
22 
```

我最大的问题是——这是一个排列还是组合问题？我对两者之间的细节有点模糊。我相信这是排列，因为重复发生了，因为顺序无关紧要。

同样，这个算法是否足够体面（可能）处理一个大的`v`？我得到的参数`t`是 2 或 3，但`v`未知。是否有一种众所周知的算法来计算符号的长度`t`集？`v`作为参考，我正在使用 C++ 来执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:05:00.487

你正在处理`variations with repetitions`。在 SO 和整个 Internet 上都有很多示例。至于你的算法，它的复杂性至少是输出的大小——你已经指出了——它将是 Ω(v^t)。如果按位操作对您有用（即适合其余的实现），那么是的，您可以这样做。

# ruby-on-rails-3 - rails jbuilder 为 nil 获取 Called id

> ID：14843113
> 
> 赞同：0
> 
> 时间：2013-02-12T22:32:53.777
> 
> 标签：ruby-on-rails-3, jbuilder

我正在尝试使用 jbuilder gem 来格式化 json 输出。

控制器

```
class LocationsController < ApplicationController
def tree
  @locations = Location.all
end 
```

tree.json.jbuilder

```
Jbuilder.encode do |json|
  json.id @location.id
  json.name @location.name
end 
```

使用 url 进行测试：

```
http://localhost:5000/locations/tree.json 
```

结果：

```
Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id
Extracted source (around line #2):

1: Jbuilder.encode do |json|
2:   json.id @location.id
3:   json.name @location.name
4: end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:39:13.107

您似乎没有`@location`在您发布的代码中定义。
您应该遍历您的位置，*jbuilder*可以让您这样做，例如：

```
Jbuilder.encode do |json|
  json.locations @locations do |location|
    json.id location.id
    json.name location.name
  end
end 
```

如果您想要一个平面数组，请参阅[文档。](https://github.com/rails/jbuilder#readme)

# asp.net-mvc-3 - 绑定到嵌套对象列表

> ID：14843132
> 
> 赞同：1
> 
> 时间：2013-02-12T22:34:24.140
> 
> 标签：asp.net-mvc-3, razor, model-binding

因为我不确定绑定到嵌套对象的工作原理，所以让我解释一下我的困境：

这是我的课：

```
public class DeliveryContactViewModel
    {        
        public List<DeliveryContact> Contacts;        
        public string Name { get; set; }
    }

    public class DeliveryContact
    {

        public string ContactType { get; set; }
        public string ContactAddress { get; set; }
        public List<bool> Reasons { get; set; }
    } 
```

好的，所以这里没有什么特别的......

现在让我们处理 View 部分：

我的想法是制作一个表格（伪代码如下）

```
<form action="/path/to/action" id="frm-contact" method="post">
    <input id="someID" name="Name" type="text" />
    <fieldset>
       <select name="i'm_not_sure_what_to_put_here">
           <option value="someValue1">someValue1</option>
           <option value="someValue2">someValue2</option>
       </select>
       <input id="someID" name="ContactAddress_but_i_want_it_in_the_First_DeliveryContact" type="text" />
      <input type="checkbox" value="Reason1"  name="again_not_sure"/>
      <input type="checkbox" value="Reason2"  name="again_not_sure"/>
      <input type="checkbox" value="Reason3"  name="again_not_sure"/>
  </fieldset>
</form> 
```

//并且想法是制作尽可能多的这些字段集，因为我需要“联系人”（进入“DeliveryContact”列表

正如您从伪代码中看到的那样，我不确定如何命名我的 HTML 元素才能成功地将其绑定到模型。

最后是控制器部分，我该如何签署它。这够了吗？View 中的命名约定是否足以将所有内容匹配到我的控制器中，看起来像这样。

```
public ActionResult DeliveryContact(DeliveryContactViewModel model)
{
     foreach(var item in model.Contacts)
     {    
        //something
      }
} 
```

干杯，T。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:32:09.533

就像 merekel 建议的那样，诀窍是为 html 元素名称添加索引：

例子：

```
<select name="Contacts[1].ContactType">
           <option value="someValue1">someValue1</option>
           <option value="someValue2">someValue2</option>
</select> 
```

或者像这样进行另一层嵌套

```
<input type="checkbox" value="true"  name="Contacts[1].Reasons[2]"/> 
```

当然索引是动态的。

我从 Scott Hanselman 那里得到了基本的想法......[这里](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)

干杯，T。

# sql - Postgres 9.1 - 获取下一个值

> ID：14843135
> 
> 赞同：2
> 
> 时间：2013-02-12T22:34:36.400
> 
> 标签：sql, postgresql, window-functions

我有一些看起来像这样的数据（按“时间戳”排序）：

```
 Key     |        TimeStamp        |   Column3   |   ColumnN
--------------+-------------------------+-------------+--------------
       1      |   2012-01-01 08:00:23   |     ...     |     ...
       2      |   2012-01-01 08:01:07   |     ...     |     ...
       3      |   2012-01-01 08:02:56   |     ...     |     ...
       6      |   2012-01-01 08:02:56   |     ...     |     ...
       4      |   2012-01-01 08:03:39   |     ...     |     ...
       5      |   2012-01-01 08:04:32   |     ...     |     ... 
```

我需要为每条记录选择“TimeStamp”的下一个**值**（*不仅仅是下一行*）。

例如，上面的数据如下所示：

```
 Key     |          Begin          |           End           |   Column3   |   ColumnN
--------------+-------------------------+-------------------------+-------------+--------------
       1      |   2012-01-01 08:00:23   |   2012-01-01 08:01:07   |     ...     |     ...
       2      |   2012-01-01 08:01:07   |   2012-01-01 08:02:56   |     ...     |     ...
       3      |   2012-01-01 08:02:56   |   2012-01-01 08:03:39   |     ...     |     ...
       6      |   2012-01-01 08:02:56   |   2012-01-01 08:03:39   |     ...     |     ...
       4      |   2012-01-01 08:03:39   |   2012-01-01 08:04:32   |     ...     |     ...
       5      |   2012-01-01 08:04:32   |   NULL                  |     ...     |     ... 
```

我一直在尝试为此使用窗口函数，但我无法得到这个结果。有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T23:38:59.937

甚至比 dense_rank 更酷，您可以使用[`lead`](http://www.postgresql.org/docs/9.1/static/functions-window.html)窗口函数：

```
SELECT Key, ts, lead(ts) OVER(ORDER BY ts ASC)
FROM tbl; 
```

从 Erwin 的回答中无耻地窃取[了 sqlfiddle链接。](http://sqlfiddle.com/#!12/3ed7a/2/0)

**编辑**：嗯，实际上它并不像你描述的那样工作*，*因为当两个值相等时它不会选择下一个更高的值。我不会删除答案，因为我认为它在这种情况下很有用，但我会将其标记为社区 wiki。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T23:25:04.623

这应该比相关子查询快得多*：*

```
WITH x AS (
   SELECT *, dense_rank() OVER (ORDER BY ts) AS rnk
   FROM   tbl
   )
SELECT x.key, x.ts AS ts_begin, y.ts As ts_end
FROM   x
LEFT   JOIN (SELECT DISTINCT ts, rnk FROM x) y ON y.rnk = (x.rnk + 1)
ORDER  BY x.ts 
```

[**-> sqlfiddle**](http://sqlfiddle.com/#!12/3ed7a/1)

*   使用[窗口函数`dense_rank()`](http://www.postgresql.org/docs/current/interactive/functions-window.html)在 CTE 中获得*没有差距*的排名。
*   然后通过偏移量`LEFT JOIN`将结果转换`DISTINCT`为自身的一个版本，`1`以获得“下一个”时间戳（并且只有一个）。
*   或者，您可以使用`GROUP BY 1,2`而不是`DISTINCT`for `y`。我希望`DISTINCT`在这里更快，因为排序顺序与`ORDER BY`窗口函数的一致。但是请`EXPLAIN ANALYZE`自己检查并查看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T23:00:55.617

您可以像这样使用 subselect 获得“下一个”值：

```
SELECT "Key", 
       t1.Timestamp as "Begin", 
       (SELECT min(t2."TimeStamp") 
        FROM the_table t2
        WHERE t2."TimeStamp" > t1."TimeStamp") as "End",
       column3, ...
FROM the_table t1 
```

但是这个查询可能很慢。如果您需要它更快 - 只需编写一个简单的 PL/SQL 函数。

# java - 无法将 void 转换为“类名”

> ID：14843140
> 
> 赞同：0
> 
> 时间：2013-02-12T22:35:01.197
> 
> 标签：java, networking, tcp

我试图创建一个可以存储在数组中的线程类，这将使我更容易处理从客户端到服务器的用户输入。

这是我的 PongPlayerThread

```
package Pong;

import java.net.*;
import java.io.*;

public class PongPlayerThread extends Thread 
{
private Socket socket = null;
private String pongData = "";

public PongPlayerThread() 
{
    //clear
}

public PongPlayerThread(Socket socket, int id, String data) 
{
    //super("PongPlayerThread");
    pongData = data;
    this.socket = socket;
}

public void passData(String data)
{
    pongData = data;
}

public void run()
{
    try
    {
        PrintWriter out = new PrintWriter(socket.getOutputStream(), true);
        while(true)
        {
            out.println(pongData);
        }
    }
    catch (IOException e) 
    {
        e.printStackTrace();
    }
}

} 
```

现在在我的服务器上的这一行中，客户端可以连接

```
players[0] = new PongPlayerThread(serverSocket.accept(), 0, rtnInfo()).start(); 
```

我收到此错误“无法从 void 转换为 PongPlayerThread”，这是为什么？我已经搜索过了，但是当您收到类名错误时，这很难。

我现在有这个代码

```
 players[idPlayer] = new PongPlayerThread(serverSocket.accept(), idPlayer, rtnInfo());
        players[idPlayer].start(); 
```

但是当客户端连接时，我收到此错误 Pong 400.0:301.0:60.0:300.0:740.0:300.0 服务器已启动服务器已设置，并将尝试在 Pong.PongServer.main 的线程“main”java.lang.NullPointerException 中创建套接字异常(PongServer.java:82)

它指向的行是 player[idPlayer] = new PongPlayerThread(serverSocket.accept(), idPlayer, rtnInfo()); ？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T22:36:59.167

```
players[0] = new PongPlayerThread(serverSocket.accept(), 0, rtnInfo());
players[0].start(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T22:38:31.710

问题是 Thread.start() 返回 void，而您正试图将结果分配给`new PPT(...).start()`to `players[0]`。

`new PPT(...).start()`返回 void，因此编译器抱怨它无法将此 void 转换为 PongPlayerThread 类型的对象。

# java - 无类型元素的 JAXB 自定义绑定？

> ID：14843146
> 
> 赞同：1
> 
> 时间：2013-02-12T22:35:11.313
> 
> 标签：java, xml, soap, xsd, jaxb

对于我无法控制的 SOAP 服务，我有一个非常大且复杂的 XSD。有几个元素总是包含未键入的字符串数据。通常，这些是非常深嵌套的元素。

例如

```
...
  <xs:complexType>
      <xs:sequence>
          <xs:element name="foo"/>
          <xs:element name="bar"/>
      </xs:sequence>
  </xs:complexType>
... 
```

有没有办法告诉 JAXB 始终将无类型元素（例如`foo`及`bar`以上）绑定到`java.lang.String`？

我知道我可以使用 XPath 查询字符串单独调用这些异常，但是是否有一个衬里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:07:10.397

在外部绑定文件中的 XPath 表达式，如

```
//xs:element[not(@type)][not(xs:simpleType)][not(xs:complexType)] 
```

将匹配任何此类元素（假设 XJC 具有完整的 XPath 支持，而不仅仅是语言的子集）。

# javascript - 用于 Node.js 在特定时间触发事件的类 Cron 库

> ID：14843167
> 
> 赞同：2
> 
> 时间：2013-02-12T22:37:21.730
> 
> 标签：javascript, node.js, settimeout, npm

我正在将 Node.js 用于 Web 应用程序。我想在给定的时间触发事件。我知道`setTimeout`并计算当前时间的偏移量。但是，这并没有考虑到时区等。

我的问题是，是否有一个 npm 模块可以使触发事件（或一般处理时钟/时间）的过程更容易？

例如，我可以这样做：`lib.fireEvent("1:00pm PST", event)`每天下午 1 点触发事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:02:57.677

您应该做的是每秒超时一次，以便检查时钟上的当前时间。那会准确得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T11:52:17.690

我正在尝试这个：[https](https://github.com/ncb000gt/node-cron) ://github.com/ncb000gt/node-cron 似乎工作正常，并且可以设置为在特定时间执行。

# intellij-idea - 如何在多个intellij IDE实例中同时打开“项目结构页面”

> ID：14843171
> 
> 赞同：2
> 
> 时间：2013-02-12T22:37:33.520
> 
> 标签：intellij-idea

我正在尝试比较 IntelliJ 中 2 个不同项目的项目结构。我可以在 2 个不同的 IntelliJ 窗口中正确打开 2 个项目。然后在一个模态对话框的 IntelliJ 窗口中打开项目结构。不幸的是，模态对话框阻止我访问在不同的 IntelliJ IDE 中打开的第二个项目。

有没有办法让我分离 2 个 intelliJ 实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:56:22.223

如果您在同一实例中运行多个帧，则不可能，请参阅相应的问题和链接的问题：

*   [IDEABKL-6069](http://youtrack.jetbrains.com/issue/IDEABKL-6069)每个项目/框架模式

`config`您可以通过更改//目录的位置在不同的JVM 中运行2 个实例，`system`如[FAQ 中所述](http://devnet.jetbrains.com/docs/DOC-181)。这样，您的磁盘上将有 2 个 IDEA 副本在不同的 JVM 中运行。`plugins`

# git - 可以嵌套git吗？

> ID：14843172
> 
> 赞同：0
> 
> 时间：2013-02-12T22:37:33.660
> 
> 标签：git, github

假设我有项目 proj1，它创建了 tool1。

假设我需要将 tool1 用于 proj2。

我想要做的是将 proj1 git 放在 proj2 中，这样我就可以独立管理 proj1 并在从 proj2 的目录中拉出它时让它在 proj2 中更新。

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:39:59.017

git sub modules 可以做你想要的： http: [//git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)

# linux - 用于 nginx 的 Perl CMS - 带有模板、样式表和导航

> ID：14843173
> 
> 赞同：0
> 
> 时间：2013-02-12T22:37:39.320
> 
> 标签：linux, perl, sqlite, nginx

我正在寻找一个基于 Perl 的 CMS，它具有：

*   用于编辑站点布局的模板文件。该模板将添加一些关键字：
    *   网站标题
    *   站点导航（具有选定当前页面的部分的垂直树视图列表）
*   用于编辑样式的样式表文件
*   可选的非守护程序后端（SQLite 或平面文件）
*   nginx 支持
*   集成页面类型：页面、联系表单、（可选错误跟踪器）

我查看了 WebGUI，但它需要 MySql 和 Apache，依赖于它的一些模块；它还有一个扩展的 GUI，而我只需要页面编辑、模板编辑和 CSS 编辑工具，以及一个设置面板。

在[http://www.cmsmatrix.org/matrix/cms-matrix?func=search](http://www.cmsmatrix.org/matrix/cms-matrix?func=search)搜索Perl 语言 + 开源许可证，但我没有想出任何结论。

我喜欢[http://www.cmsimple.org/archives/cmsimple_old/?CMSimple:Awards](http://www.cmsimple.org/archives/cmsimple_old/?CMSimple:Awards)但它不在 Perl 中。

我看着：

*   [轻量级 Perl CMS](http://www.perlmonks.org/?node_id=1013970 "轻量级 Perl CMS")：
    *   [这里](http://www.perlmonks.org/?node_id=1015200)的子线程表明 Galileo 没有 TOS/导航功能供我放入侧边栏。
    *   我没有找到[Contenticious](https://metacpan.org/module/Contenticious)的侧边栏导航功能。
*   [关于 Perl CMS](http://www.perlmonks.org/?node_id=498079)的建议 - 有一些建议。
    *   [Bricolage](http://bricolagecms.org) [依赖](http://bricolagecms.org/docs/current/api/Bric%3a%3aAdmin#Quick-Installation-Instructions)于 Apache 模块。
    *   [Krang](http://www.krangcms.com/)看起来不错，但需要 mysql。
    *   [Big Medium](http://bigmedium.com)不是免费的。
    *   [cyclone3](http://www.cyclone3.org)使用 XUL 管理界面，但我认为它必须是基于 Web 的。
    *   [WebAPP](http://www.web-app.net/)没有维护，我可以看到。我不喜欢 CGI（AFAIK 这意味着为每次用户访问编译整个应用程序；它很慢）。我什至没有找到安装或要求页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T01:00:21.680

不知道它是否会涵盖您需要的所有内容，但我认为[Galileo](https://metacpan.org/module/Galileo)可能是一个不错的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:57:03.187

似乎这个问题最近才在 Perl Monks 上提出，所以这可能是一个很好的起点：

[http://www.perlmonks.org/?node_id=1013970](http://www.perlmonks.org/?node_id=1013970)

# macos - 当用户调整窗口大小时，垂直调整 NSTextField 的大小

> ID：14843179
> 
> 赞同：3
> 
> 时间：2013-02-12T22:37:51.297
> 
> 标签：macos, cocoa, nstextfield

我在窗口的视图中有一个 NSTextField。

我已经尝试了所有 IB 选项，但似乎无法实现以下目标：

NSTextField 中有一个很长的句子——当窗口被调整为更窄的宽度时，NSTextField 也会变得更窄——这会将文本推到下一行。然而，任何被推到 NSTextField 底部下方的文本都会被简单地截断。我希望 NSTextField 垂直扩展其大小以适应更高的文本。

这可以自动完成还是应该观察 Window resize 事件并重新计算 NSTextField 的高度？

我需要支持 10.7 和 10.8，我尝试同时使用 Autolayout 和 Autoresizing 但无济于事。

编辑 - 这是基于 Jerry 的回答（以及他来自 Github 的类别）的代码：

```
-(void)setFrame:(NSRect)frameRect{

  NSRect myFrame = CGRectMake(frameRect.origin.x, frameRect.origin.y, frameRect.size.width, [self.stringValue heightForWidth:frameRect.size.width attributes:nil]);
  [super setFrame: myFrame];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:34:44.240

自动布局在更高级别上运行。我认为您需要调整文本字段的大小。

您可以尝试将 -sizeToFit 发送到文本字段，但这可能会水平扩展而不是垂直扩展。因此，如果这不起作用，请查看我的[NS(Attributed)String+Geometrics 类别](https://github.com/jerrykrinock/CategoriesObjC/blob/master/NS%28Attributed%29String+Geometrics/NS%28Attributed%29String+Geometrics.h)中的 -heightForWidth:: 方法。使用此方法，您可以继承 NSTextField 并覆盖 -sizeToFit 以垂直扩展。将调整大小合并到 setFrame: 和 setStringValue: 中可能会很酷，以便它始终保持适当的高度。

自动布局应该从那里接管，根据需要移动和调整同级子视图的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-27T13:34:44.427

使用此子类在宽度变化时扩展高度：

```
@interface MyTextField : NSTextField

@property (nonatomic, assign) BOOL insideDeepCall;

@end

@implementation MyTextField

- (void)layout
{
  [super layout];

  if (!self.insideDeepCall) {
    self.insideDeepCall = YES;
    self.preferredMaxLayoutWidth = self.frame.size.width-4;
    [self.superview layout];
    self.insideDeepCall = NO;
  }
}

@end 
```

# java - JBoss EAP6 连接到外部 HornetQ 实现不起作用，但在 JBoss 7.1.1 上起作用

> ID：14843180
> 
> 赞同：2
> 
> 时间：2013-02-12T22:37:55.873
> 
> 标签：java, spring, jboss, jms, hornetq

我正在试用 JBoss AS EAP6。

但是我有使用 JBoss AS 7.1.1 实现的系统解决方案。和外部 HornetQ 2.1.14 实现。这适用于 JBoss 7.1.1，但 EAP 6 无法连接到 HornetQ。

我以本地主机身份运行。是这种情况不起作用，还是我遗漏了什么并且配置错误？

**大黄蜂配置：**

**hornetq-beans.xml**

```
<?xml version="1.0" encoding="UTF-8"?>

<deployment xmlns="urn:jboss:bean-deployer:2.0">

   <bean name="Naming" class="org.jnp.server.NamingBeanImpl"/>

   <!-- JNDI server. Disable this if you don't want JNDI -->
   <bean name="JNDIServer" class="org.jnp.server.Main">
      <property name="namingInfo">
     <inject bean="Naming"/>
      </property>
      <property name="port">${jnp.port:1099}</property>
      <property name="bindAddress">${jnp.host:localhost}</property>
      <property name="rmiPort">${jnp.rmiPort:1098}</property>
      <property name="rmiBindAddress">${jnp.host:localhost}</property>
   </bean>

   <!-- MBean server -->
   <bean name="MBeanServer" class="javax.management.MBeanServer">
      <constructor factoryClass="java.lang.management.ManagementFactory"
           factoryMethod="getPlatformMBeanServer"/>
   </bean> 

   <!-- The core configuration -->
   <bean name="Configuration" class="org.hornetq.core.config.impl.FileConfiguration">
   </bean>

    <!-- The security manager -->
   <bean name="HornetQSecurityManager" class="org.hornetq.spi.core.security.HornetQSecurityManagerImpl">
      <start ignored="true"/>
      <stop ignored="true"/>
   </bean>

    <!-- The core server -->
   <bean name="HornetQServer" class="org.hornetq.core.server.impl.HornetQServerImpl">
      <constructor>
     <parameter>
        <inject bean="Configuration"/>
     </parameter>
     <parameter>
        <inject bean="MBeanServer"/>
     </parameter>
     <parameter>
        <inject bean="HornetQSecurityManager"/>
     </parameter>        
      </constructor>
      <start ignored="true"/>
      <stop ignored="true"/>
   </bean>

   <!-- The JMS server -->
   <bean name="JMSServerManager" class="org.hornetq.jms.server.impl.JMSServerManagerImpl">
      <constructor>         
     <parameter>
        <inject bean="HornetQServer"/>
     </parameter>         
      </constructor>
   </bean>

</deployment> 
```

**hornetq-configuration.xml**

```
<configuration xmlns="urn:hornetq"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="urn:hornetq /schema/hornetq-configuration.xsd">

   <clustered>true</clustered>

   <paging-directory>${data.dir:../data}/node-a/paging</paging-directory>

   <bindings-directory>${data.dir:../data}/node-a/bindings</bindings-directory>

   <journal-directory>${data.dir:../data}/node-a/journal</journal-directory>

   <journal-min-files>10</journal-min-files>

   <large-messages-directory>${data.dir:../data}/node-a/large-messages</large-messages-directory>

   <connectors>      
      <connector name="netty">
     <factory-class>org.hornetq.core.remoting.impl.netty.NettyConnectorFactory</factory-class>
     <param key="host"  value="${hornetq.remoting.netty.host:localhost}"/>
     <param key="port"  value="${hornetq.remoting.netty.port:5445}"/>
      </connector>

      <connector name="netty-throughput">
     <factory-class>org.hornetq.core.remoting.impl.netty.NettyConnectorFactory</factory-class>
     <param key="host"  value="${hornetq.remoting.netty.host:localhost}"/>
     <param key="port"  value="${hornetq.remoting.netty.batch.port:5455}"/>
     <param key="batch-delay" value="50"/>
      </connector>
   </connectors>

   <acceptors>
      <acceptor name="netty">
     <factory-class>org.hornetq.core.remoting.impl.netty.NettyAcceptorFactory</factory-class>
     <param key="host"  value="${hornetq.remoting.netty.host:localhost}"/>
     <param key="port"  value="${hornetq.remoting.netty.port:5445}"/>
      </acceptor>

      <acceptor name="netty-throughput">
     <factory-class>org.hornetq.core.remoting.impl.netty.NettyAcceptorFactory</factory-class>
     <param key="host"  value="${hornetq.remoting.netty.host:localhost}"/>
     <param key="port"  value="${hornetq.remoting.netty.batch.port:5455}"/>
     <param key="batch-delay" value="50"/>
     <param key="direct-deliver" value="false"/>
      </acceptor>
   </acceptors>

   <broadcast-groups>
      <broadcast-group name="bg-group1">
     <group-address>231.7.7.7</group-address>
     <group-port>9876</group-port>
     <broadcast-period>5000</broadcast-period>
     <connector-ref>netty</connector-ref>
      </broadcast-group>
   </broadcast-groups>

   <discovery-groups>
      <discovery-group name="dg-group1">
     <group-address>231.7.7.7</group-address>
     <group-port>9876</group-port>
     <refresh-timeout>10000</refresh-timeout>
      </discovery-group>
   </discovery-groups>

   <cluster-connections>
      <cluster-connection name="my-cluster">
     <address>jms</address>  
     <connector-ref>netty</connector-ref>
         <retry-interval>500</retry-interval>
         <forward-when-no-consumers>true</forward-when-no-consumers>
         <max-hops>1</max-hops>
         <discovery-group-ref discovery-group-name="dg-group1"/>
      </cluster-connection>
   </cluster-connections>

   <security-settings>
      <security-setting match="#">
     <permission type="createNonDurableQueue" roles="guest"/>
     <permission type="deleteNonDurableQueue" roles="guest"/>
     <permission type="consume" roles="guest"/>
     <permission type="send" roles="guest"/>
      </security-setting>
   </security-settings>

   <address-settings>
      <!--default for catch all-->
      <address-setting match="#">
     <dead-letter-address>jms.queue.DLQ</dead-letter-address>
     <expiry-address>jms.queue.ExpiryQueue</expiry-address>
     <redelivery-delay>0</redelivery-delay>
     <max-size-bytes>10485760</max-size-bytes>       
     <message-counter-history-day-limit>10</message-counter-history-day-limit>
     <address-full-policy>BLOCK</address-full-policy>
         <redistribution-delay>1000</redistribution-delay>
      </address-setting>
   </address-settings>

</configuration> 
```

**JBoss EAP 6 配置**

**独立-ha.xml**

该文件的关键部分如下：

```
<extensions>
    <extension module="org.jboss.as.clustering.infinispan"/>
    <extension module="org.jboss.as.clustering.jgroups"/>
    <extension module="org.jboss.as.configadmin"/>
    <extension module="org.jboss.as.connector"/>
    <extension module="org.jboss.as.deployment-scanner"/>
    <extension module="org.jboss.as.ee"/>
    <extension module="org.jboss.as.ejb3"/>
    <extension module="org.jboss.as.jaxrs"/>
    <extension module="org.jboss.as.jdr"/>
    <extension module="org.jboss.as.jmx"/>
    <extension module="org.jboss.as.jpa"/>
    <extension module="org.jboss.as.logging"/>
    <extension module="org.jboss.as.mail"/>
    <extension module="org.jboss.as.modcluster"/>
    <extension module="org.jboss.as.naming"/>
    <extension module="org.jboss.as.osgi"/>
    <extension module="org.jboss.as.pojo"/>
    <extension module="org.jboss.as.remoting"/>
    <extension module="org.jboss.as.sar"/>
    <extension module="org.jboss.as.security"/>
    <extension module="org.jboss.as.threads"/>
    <extension module="org.jboss.as.transactions"/>
    <extension module="org.jboss.as.web"/>
    <extension module="org.jboss.as.webservices"/>
    <extension module="org.jboss.as.weld"/>
    <extension module="org.jboss.snowdrop"/>
</extensions>

<interfaces>
    <interface name="management">
        <inet-address value="${jboss.bind.address.management:127.0.0.1}"/>
    </interface>
    <interface name="public">
        <inet-address value="${jboss.bind.address:127.0.0.1}"/>
    </interface>
    <interface name="unsecure">
        <inet-address value="${jboss.bind.address.unsecure:127.0.0.1}"/>
    </interface>
</interfaces>

<socket-binding-group name="standard-sockets" default-interface="public" port-offset="${jboss.socket.binding.port-offset:0}">
    <socket-binding name="management-native" interface="management" port="${jboss.management.native.port:9999}"/>
    <socket-binding name="management-http" interface="management" port="${jboss.management.http.port:9990}"/>
    <socket-binding name="management-https" interface="management" port="${jboss.management.https.port:9443}"/>
    <socket-binding name="ajp" port="8009"/>
    <socket-binding name="http" port="8080"/>
    <socket-binding name="https" port="8443"/>
    <socket-binding name="jgroups-diagnostics" port="0" multicast-address="224.0.75.75" multicast-port="7500"/>
    <socket-binding name="jgroups-mping" port="0" multicast-address="${jboss.default.multicast.address:230.0.0.4}" multicast-port="45700"/>
    <socket-binding name="jgroups-tcp" port="7600"/>
    <socket-binding name="jgroups-tcp-fd" port="57600"/>
    <socket-binding name="jgroups-udp" port="55200" multicast-address="${jboss.default.multicast.address:230.0.0.4}" multicast-port="45688"/>
    <socket-binding name="jgroups-udp-fd" port="54200"/>
    <socket-binding name="modcluster" port="0" multicast-address="224.0.1.105" multicast-port="23364"/>
    <socket-binding name="osgi-http" interface="management" port="8090"/>
    <socket-binding name="remoting" port="4447"/>
    <socket-binding name="txn-recovery-environment" port="4712"/>
    <socket-binding name="txn-status-manager" port="4713"/>
    <outbound-socket-binding name="mail-smtp">
        <remote-destination host="localhost" port="25"/>
    </outbound-socket-binding>
</socket-binding-group> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:45:04.460

那将不兼容..较新的库无法与较旧的服务器通信。

直到 HOrnetQ 2.2，我们在协议上根本不支持不同的版本，我们在 2.2 之后开始关注兼容性......所以你试图实现的目标是行不通的。

# set - MDX：交叉连接和集合评估

> ID：14843188
> 
> 赞同：0
> 
> 时间：2013-02-12T22:38:13.510
> 
> 标签：set, mdx, cross-join

我正在为这个 MDX 苦苦挣扎，它在行上应该返回按值排序的日期和国家/地区的交叉连接。显然，交叉连接期间 Order 函数中的“[Date].[Fiscal Year].CurrentMember”仍在返回默认成员，而不是来自交叉连接上下文的当前成员。也许我对交叉连接期间评估集合的方式和时间的理解不正确？

```
WITH 
  SET [DATE_main] AS 
    {
      [Date].[Fiscal Year].&[2002],
      [Date].[Fiscal Year].&[2003]
    } 
  SET [CUSTOMER_ordered] AS 
    {
      Order
      (
        [Customer].[Customer Geography].[Country].Members,
        (
          [Customer].[Customer Geography].CurrentMember,
          [Date].[Fiscal Year].CurrentMember,
          [Measures].[Internet Sales Amount]
        ),
        BDESC
      )
    } 
SELECT 
  {[Measures].[Internet Sales Amount]} ON COLUMNS,
  CrossJoin
  (
    [DATE_main],
    [CUSTOMER_ordered]
  ) ON ROWS
FROM [Adventure Works]; 
```

感谢您的任何建议，Endokr

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:54:12.507

要获得预期的结果，您必须将交叉连接放在订单中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:53:16.213

这解决了我的问题，但我仍然想知道为什么 [Date].[Fiscal Year].CurrentMember 在交叉连接中无法按预期工作：

```
WITH 
  SET [DATE_main] AS 
    {
      [Date].[Fiscal Year].&[2002],
      [Date].[Fiscal Year].&[2003]
    } 
  SET [CUSTOMER_ordered] AS 
    {
      Order
      (
        [Customer].[Customer Geography].[Country].MEMBERS,
        (
          [Customer].[Customer Geography].CurrentMember,
          [Date].[Fiscal Year].CurrentMember,
          [Measures].[Internet Sales Amount]
        ),
        BDESC
      )
    } 
SELECT 
  {[Measures].[Internet Sales Amount]} ON COLUMNS,
  Generate
  (
    [DATE_main],
    Order
    (
      CrossJoin
      (
        [Date].[Fiscal Year].CurrentMember,
        [Customer].[Customer Geography].[Country].MEMBERS
      ),
      (
        [Measures].[Internet Sales Amount]
      ),
      BDESC
    )
  ) ON ROWS
FROM [Adventure Works]; 
```

# ruby-on-rails - 设计 - 将经过身份验证的用户发送到 www.website.com/profile/1（那里的个人资料页面）

> ID：14843191
> 
> 赞同：0
> 
> 时间：2013-02-12T22:38:29.467
> 
> 标签：ruby-on-rails, devise

我正在使用设计，我需要经过身份验证的用户登陆该用户的个人资料页面。

url 路径如下所示...www.website.com/profile/1

目前经过身份验证的用户登陆这里

www.website.com/

这是我的 routes.rb 文件中的违规代码片段。

```
 authenticated :user do
    root :to => 'home#index' # TODO direct to profile page
  end 
```

如何更改上述内容，以便将用户定向到 ...www.website.com/profile/1

注意：这是配置文件的 rake 路由的输出

```
 profiles GET        /profiles(.:format)                           profiles#index
                            POST       /profiles(.:format)                           profiles#create
                new_profile GET        /profiles/new(.:format)                       profiles#new
               edit_profile GET        /profiles/:id/edit(.:format)                  profiles#edit
                    profile GET        /profiles/:id(.:format)                       profiles#show
                            PUT        /profiles/:id(.:format)                       profiles#update
                            DELETE     /profiles/:id(.:format)                       profiles#destroy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:45:39.567

您可以覆盖设计方法`after_sign_in_path_for`：

```
def after_sign_in_path_for(resource)
  profile_path(resource.profile)
end 
```

# c# - 如何将我的数组加载到多个文本框中？

> ID：14843192
> 
> 赞同：-3
> 
> 时间：2013-02-12T22:38:29.430
> 
> 标签：c#

我是一名学生，目前正在为班级进行强力球计划。我用随机数制作了一个数组，需要将每个数字加载到它自己的文本字段中。这似乎很简单，但我只是卡住了。希望对此有所帮助！

好的，对不起！这个地方有点新，我没有做很多事情。

```
 private void btnQuickPlayNumbers_Click(object sender, EventArgs e)
    {
        int randCheck = 0;

        Random rand = new Random();

        int[] powerball5 = new int[5];

        for (int i = 0; i < powerball5.Length; )
        {
            randCheck = rand.Next(0, 60);

            while (!(powerball5.Contains(randCheck)))
            {
                powerball5[i] = randCheck;
                i++;
            }

        }
    } 
```

这就是我迄今为止所做的一切。我在想可能有一种方法可以使用 for 循环来增加文本框，但我不确定这一点。我的老师告诉我不要使用一堆 if 语句来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:44:29.727

我不确定你想要什么，但这有帮助吗？

```
txtNum1.Text = numArray[0].ToString(); 
```

有了它，您可以为数组的每个索引重复它。

```
txtNum2.Text = . . .
txtNum3.Text = . . . 
```

等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:45:45.447

假设您在该数组中有*四个数字。*如果您有确定数量的索引，其中 4 个，则必须有四个 TextBox 对象。

```
 List<String> = new List<String>();
    foreach (int myInt in myArray)
    {
        List.add(myInt.ToString());
    } 
```

然后在主类或运行时：

```
TextBox1.Text = List.get(0);
TextBox2.Text = List.get(1);
TextBox3.Text = List.get(2);
TextBox4.Text = List.get(3); 
```

如果需要，修改更多数字；）

编辑：

```
 int randCheck = 0;

    Random rand = new Random();

    int[] powerball5 = new int[5];

    for (int i = 0; i < powerball5.Length; )
    {
        randCheck = rand.Next(0, 60);

        while (!(powerball5.Contains(randCheck)))
        {
            powerball5[i] = randCheck;
            var textBox = this.Controls.Find("textBOX" + i, true) as TextBox;
            textBox.Text = powerball5[i].ToString();
            i++;
        }

    } 
```

确保你有 textBOX(1-5)！

# ios - 隐藏视图而不留空隙

> ID：14843195
> 
> 赞同：1
> 
> 时间：2013-02-12T22:38:32.663
> 
> 标签：ios, objective-c, ios6, uiscrollview, interface-builder

我正在尝试在滚动视图（由段控件触发）内的两个部分（视图）之间切换可见性，问题是我不想要隐藏元素所在的间隙。

目前我正在做的是`ViewDidAppear`我正在存储两个视图框架，然后当我需要切换视图的可见性时，我正在设置我想要隐藏的框架的视图`CGRecZero`并将另一个视图*移动*到“顶部” 位置，方法是将其框架设置为其初始框架并修改其 origin.y 属性。问题是，一旦我滚动视图的框架似乎被重置，我就留下了一个空白。

这是我的代码示例

```
if (control.selectedSegmentIndex == 0) {
    [self.firstView setHidden:YES];
    [self.firstView setFrame:CGRectZero];
    [self.secondView setHidden:NO];
    CGRect frmTmp = secondViewRec;
    frmTmp.origin.y = orgPoint.y;
    [self.secondView setFrame:frmTmp];

} else {
    [self.secondView setHidden:YES];
    self.secondView.frame = CGRectZero;
    [self.firstView setHidden:NO];
    CGRect frmTmp = firstViewRec;
    firstViewRec.origin.y = orgPoint.y;

    self.firstView.frame = frmTmp;
} 
```

我没有直接使用滚动视图，我也尝试过使用静态`UITableView`并隐藏单元格，但我再次在界面中留下了空白，这就是我尝试这种方法的原因。有什么建议么？是否有更简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:49:37.160

我解决这个问题的方法是从父视图中附加和删除视图。我的父视图是滚动视图。这是我的代码的一些黑客复制粘贴：

```
#define LIST_BUTTON_INDEX      0
#define LOCATION_BUTTON_INDEX  1
#define ACTIVITIES_DETAIL_MODE_DETAILS   0
#define ACTIVITIES_DETAIL_MODE_MAP       1

-(void)detailsButtonPressed:(id)sender
{
    [self selectButton:LIST_BUTTON_INDEX];   // change the segment control
    [self displayView:ACTIVITIES_DETAIL_MODE_DETAILS];
}
-(void)mapButtonPressed:(id)sender
{
    [self selectButton:LOCATION_BUTTON_INDEX];  // change the segment control
    [self displayView:ACTIVITIES_DETAIL_MODE_MAP];
}

-(void) displayView:(int)displayMode
{
    self.mode = displayMode;

    switch (self.mode)
    {
        case ACTIVITIES_DETAIL_MODE_DETAILS:
        {
            [self clearScrollViewSubviews];

            self.detailsController = [[ActivityDetailsView alloc] initWithNibName:@"ActivityDetailsView" bundle:[NSBundle mainBundle]];
            [self.scrollView addSubview:self.detailsController.view];
            CGRect f = self.detailsController.view.frame;
            f.size.height  -= 20;
            self.scrollView.contentSize = f.size;
        }
        break;

        case ACTIVITIES_DETAIL_MODE_MAP:
        {
            [self clearScrollViewSubviews];
            self.mapController = [[ActivityMap alloc] initWithNibName:@"ActivityDetailsLocationView" bundle:[NSBundle mainBundle]];
            [self.scrollView addSubview:self.mapController.view];
            CGRect f = self.mapController.view.frame;
            f.size.height  -= 20;
            self.scrollView.contentSize = f.size;
        }
        break;
    }

}
-(void)clearScrollViewSubviews
{
    if(self.detailsController != nil)
    {
        [self.detailsController.view removeFromSuperview];
    }
    if(self.mapController != nil)
    {
        [self.mapController.view removeFromSuperview];
    }
} 
```

# php - Jquery翻转脚本未在翻转背面显示唯一内容

> ID：14843197
> 
> 赞同：0
> 
> 时间：2013-02-12T22:38:44.567
> 
> 标签：php, javascript, jquery, html, css

我正在尝试实现Rotate3Di，在这里找到：[http ://www.zachstronaut.com/projects/rotate3di/](http://www.zachstronaut.com/projects/rotate3di/)

我可以让我的图像翻转，但背面只显示正面的镜像，而不是我从数据库中提取的唯一内容。感谢您提前提供任何帮助。

```
<script type="text/javascript" language="javascript" charset="utf-8">
$(document).ready(function () {
    $('#movienav li div.back').hide().css('left', 0);

    function mySideChange(front) {
        if (front) {
            $(this).parent().find('div.front').show();
            $(this).parent().find('div.back').hide();

        } else {
            $(this).parent().find('div.front').hide();
            $(this).parent().find('div.back').show();
        }
    }

    $('#movienav li').hover(
        function () {
            $(this).find('div').stop().rotate3Di('flip', 180, 1000, {direction: 'clockwise', sideChange: mySideChange});
        },
        function () {
            $(this).find('div').stop().rotate3Di('unflip', 1000, {sideChange: mySideChange});
        }
    );
});
</script> 
```

***HTML***

```
<div id="movienav">
<ul>
<li><div class="front"><img src="<?php echo $imglink; ?>" width="340" height="450" class="dvdcover" /></div>
<div class="back">
<?php echo $description; ?>
</div>
</li>
</ul>
</div> 
```

***CSS***

```
#movienav {
    height: 450px;
    width:75%; 
    float:left;
    margin-top:25px; 
    clear:left;
    padding-bottom: 45px;
}

#movienav li {
    width: 340px;
    height: 450px;
    float: left;
    margin-right: 10px;
    position: relative;
    display:inline;
    list-style:none;
}

#movienav li div {
    width: 340px;
    height: 450px;
    overflow: hidden;
    background: #161616;
    position: absolute;
    top: 0;
    left: 0;
}

#movienav li div.back {
    left: -999em;
    padding-bottom: 15px;  
    background-color:#161616; /*max-height:450px; overflow:auto;*/
    margin-top: 0;

} 
```

***解决了***

将以上行更改为：

```
$('#movienav li').hover(
    function () {
        $(this).find('div').stop().rotate3Di('180', 400, {direction: 'clockwise', sideChange: mySideChange});
    },
    function () {
        $(this).find('div').stop().rotate3Di('unflip', 400, {sideChange: mySideChange});
    }
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:40:51.097

[http://davidwalsh.name/css-flip](http://davidwalsh.name/css-flip)

我想你想要`backface-visibility: hidden;`

老实说，我只通过 CSS 而不是 javascript 完成了这项工作，但一开始我也遇到了同样的问题，直到我设置了`backface-visibility`. 通过 javascript 做所有事情可能需要一些额外的魔法。

# javascript - JQuery - 列表中的项目编号

> ID：14843199
> 
> 赞同：1
> 
> 时间：2013-02-12T22:39:03.917
> 
> 标签：javascript, jquery, dust.js

我希望列表中的项目数从 10 --> 0 开始编号

我有以下代码：

```
<ul class="StoryBoard" id="StoryBoard"> 
{#storylines}
<li>{text|bl|s}</li>    
{/storylines}
</ul> 
```

这将如何在浏览器中呈现的一个示例是：

```
<ul class="StoryBoard" id="StoryBoard">
<li>Test</li>
<li>Test</li>
<li>Test</li>
<li>Test</li>
</ul> 
```

但是我希望它像这样呈现：

```
<ul class="StoryBoard" id="StoryBoard">
<li>Test (10)</li>
<li>Test (9)</li>
<li>Test (8)</li>
<li>Test (7)</li>
</ul> 
```

始终最多有 10 个项目

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:50:02.313

由于您使用的是dustjs，因此您可以`@idx`在迭代时访问帮助程序：

```
{#storylines}
<li>{text|bl|s} ({@idx}{.}{/idx})</li>    
{/storylines} 
```

从dustjs [docs](http://akdubya.github.com/dustjs/)：

> idx 标签将当前元素的数字索引传递给封闭的块。

编辑：我没有仔细阅读您的问题 - 看起来您正在寻找递减计数。帮手会`idx`数。

再次编辑：在评论中，有人问你是否可以这样做`{@idx}{10 - .}{/idx}`。

答案是否定的，因为灰尘不会评估任意表达式。但是，如果您查看`dust.helpers.idx`标签的来源，那就是：

```
function (chunk, context, bodies) { 
  return bodies.block(chunk, context.push(context.stack.index)) 
} 
```

它使用迭代的当前索引的值推送一个新的上下文。事实证明，该`context.stack`对象有一个属性`of`可以为您提供堆栈中的项目数，因此您可以编写自己的`negidx`帮助程序：

```
dust.helpers.negidx = function(chunk, context, bodies) {
  return bodies.block(chunk, context.push(context.stack.of - context.stack.index));
}; 
```

此时，以下将完成原始问题的要求：

```
{#storylines}
<li>{text|bl|s} ({@negidx}{.}{/negidx})</li>    
{/storylines} 
```

[这是一个小提琴。](http://jsfiddle.net/eg2Mg/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T22:49:36.443

我建议：

```
$('#StoryBoard li').text(function(i,t) { return t + ' (' + (10 -  i )+ ')'}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/cEkkt/2/)。

该`text()`方法中的匿名函数有两个参数`i`（当前元素的索引（因为它遍历选择器匹配的*所有*元素））和`t`，它是当前元素的文本。

然后，这会在附加一个左括号、索引和一个右括号后返回当前文本。

参考：

*   [`text()`](http://api.jquery.com/text/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T22:46:21.723

```
$('#StoryBoard').find('li').each(function(i){
    $(this).append(' ' + (10 - i ));
}); 
```

测试？：http: [//jsbin.com/aduqix/1/edit](http://jsbin.com/aduqix/1/edit)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T22:55:42.187

这是一个演示[http://jsfiddle.net/GPEth/](http://jsfiddle.net/GPEth/) - 在 jQuery 中我不确定您是否希望在dust.js 或 jQuery 中进行此修复

```
$(function () {
   var $li   = $('ul#StoryBoard li'),
       count = $li.size();
    $li.each(function (index) {
        $(this).text($(this).text() + (count - index));
    })
}); 
```

# ios - iOS 将设置与 UITableView 项关联

> ID：14843201
> 
> 赞同：0
> 
> 时间：2013-02-12T22:39:12.917
> 
> 标签：ios, objective-c, uitableview, settings, save

我有一个`UITableViewController`能够将每一行保存到`plist`文件的能力。目前，当您按下行上的详细信息披露指示器时，它会打开一个单独`UITableViewController`的包含两个组中的四个静态单元格。

目前这些单元格中的数据只是保存在 中`NSUserDefaults`，但我希望能够以更健壮的方式（即`plist`）保存它们，并使每组设置与第一个表视图控制器中的自己的行相关联.

任何帮助将不胜感激。

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:07:35.940

您的每个组都可以保存为属性列表中的字典数组。在每个字典（或组）中，您可以包含各种元素，其中最少可以是一个表示您的“相关”项目的数组。如果您正在处理更复杂的数据集，则该数组可以是简单值的集合，甚至可以是字典本身。

您甚至可以更进一步，使用 CoreData 创建一个不错的关系对象模型。

资源：

[属性列表编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PropertyLists/Introduction/Introduction.html)

[核心数据编程指南](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)

# android - 安卓 GPS 服务

> ID：14843207
> 
> 赞同：0
> 
> 时间：2013-02-12T22:39:42.603
> 
> 标签：android, sqlite, gps

我有一个在活动中工作的应用程序 - 它从电话接收器调用 GPS 数据并将其发送到我的 php 站点，从 sqlite 过滤线程中的最后一个位置，它看起来像这样

```
final Handler handler = new Handler();
        final Runnable runnable = new Runnable() {
            public void run() {

                if(indikator != 0)
                {
                    Cursor c=db.rawQuery("select * from lokacije", null);
                c.moveToLast();

                try{
                    w.loadUrl(c.getString(c.getColumnIndex("lokacija")));
                    db.execSQL("delete from lokacije where id <"+c.getString(c.getColumnIndex("id")));
                    }
                    catch (Exception e) {
                        // TODO: handle exception
                    }

                }
                indikator=1;
                handler.postDelayed(this, 90000);

            }
        };

    //b.setBackgroundColor(Color.RED);

    b.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

             if(b.getText().equals("SLOBODAN"))
             {

                 b.setText("ZAUZET");
                 b.setTextColor(Color.GREEN);
             }
             else
             {

                 b.setText("SLOBODAN");
                 b.setTextColor(Color.RED);

             }
        }
    });
    //deo koji naknadno ubacujem za kriterijum
    Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    criteria.setPowerRequirement(Criteria.POWER_LOW);

    //kraj dela koji sam naknadno ubacio

final   LocationManager m=(LocationManager) MainActivity.this.getSystemService(Context.LOCATION_SERVICE);
    //deo koji sam takodje ubacio naknadno
String locationprovider =m.getBestProvider(criteria,true);
//deo koji sam takodje ubacio naknadno kraj

        LocationListener l=new LocationListener() {

                @Override
                public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onProviderEnabled(String arg0) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onProviderDisabled(String arg0) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onLocationChanged(Location arg0) {

                    String url=new String();
                    String zauzetost=new String();
                    zauzetost=b.getText().toString();

                    String format="MM/dd/yyyy";
                    SimpleDateFormat sdf = new SimpleDateFormat(format,Locale.US);
                    String date= sdf.format(new Date());

                t.setToNow();   

                ed1.setText("");
                ed2.setText("");
                String longitude=new String();
                String latitude=new String();
                String speed=new String();

                if((int)arg0.getSpeed()==0)
                {
                    speed="0";
                }
                else
                {
                speed=""+(((int)arg0.getSpeed()*3600)/1000);
                }
                longitude=""+  arg0.getLongitude();
                latitude=""+ arg0.getLatitude();
                ed1.setText(longitude);
                ed2.setText(latitude);
                ed3.setText(speed);
                Calendar cal=Calendar.getInstance();

                url="http://www.compensatemeonline.com/truckmeonline/TruckMeOnline/UnosLokacijaSaTelefona.php?id="+mojsadrzaj+"&longitude="+longitude+"&latitude="+latitude+"&brzina="+speed+"&vreme="+cal.getTime()+"&datum="+date+"&zauzetost="+zauzetost;    

                db.execSQL("insert into lokacije (lokacija) values ('"+url+"');");

                    // TODO Auto-generated method stub

                }

            };

            // TODO Auto-generated method stub
            //pozivanje threada
             runnable.run();
            //pozivanje threada
            m.requestLocationUpdates(locationprovider, 60000, 0, l);

    //      zamenio sam m.requestLocationUpdates(LocationManager.GPS_PROVIDER, 120000, 0, l); sa m.requestLocationUpdates(locationprovider, 120000, 0, l);
        } 
```

现在我想做的就是把它全部放在一个服务中，这样它就可以在后台运行。我应该将代码放入`onCreate()`还是放入`onStart()`方法中，`Service`因为我还使用了处理程序和另一个线程。当我现在使用 URL 或 HttpClient 调用网站时，因为我无法使用它`WebView`，`Activity`所以我的 logcat 中出现了如下错误：

```
 02-12 22:24:32.569: E/AndroidRuntime(1204): java.lang.IllegalStateException: Target host must not be null, or set in parameters. scheme=null, host=null, path=2
02-12 22:24:32.569: E/AndroidRuntime(1204):     at org.apache.http.impl.client.DefaultRequestDirector.determineRoute(DefaultRequestDirector.java:591)
02-12 22:24:32.569: E/AndroidRuntime(1204):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:293)
02-12 22:24:32.569: E/AndroidRuntime(1204):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
02-12 22:24:32.569: E/AndroidRuntime(1204):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
02-12 22:24:32.569: E/AndroidRuntime(1204):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
02-12 22:24:32.569: E/AndroidRuntime(1204):     at com.example.serviceswithactivity.MyService$1.run(MyService.java:127)
02-12 22:24:32.569: E/AndroidRuntime(1204):     at android.os.Handler.handleCallback(Handler.java:725)
02-12 22:24:32.569: E/AndroidRuntime(1204):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-12 22:24:32.569: E/AndroidRuntime(1204):     at android.os.Looper.loop(Looper.java:137)
02-12 22:24:32.569: E/AndroidRuntime(1204):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-12 22:24:32.569: E/AndroidRuntime(1204):     at java.lang.reflect.Method.invokeNative(Native Method)
02-12 22:24:32.569: E/AndroidRuntime(1204):     at java.lang.reflect.Method.invoke(Method.java:511)
02-12 22:24:32.569: E/AndroidRuntime(1204):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-12 22:24:32.569: E/AndroidRuntime(1204):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-12 22:24:32.569: E/AndroidRuntime(1204):     at dalvik.system.NativeStart.main(Native Method) 
```

如何从服务中调用 gps 位置，这样我就不会得到 10-15 分，而只能得到一个？我在 Activity 中通过将数据放入 sqlite 数据库中，然后在线程中获取最后一行并删除其他行，以此类推。有没有更好的方法来调用 gps 位置并将其在后台发送到网站？

这是我的全部`Service`：

```
public class MyService extends Service {

public int indikator=0;
public String mojsadrzaj=new String();
public String pib=new String();
public String username=new String();
public String password=new String();
public Cursor c;
public Cursor d;
 URL myURL;
@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onCreate() {
super.onCreate();

Toast.makeText(this,"Service created ...",Toast.LENGTH_LONG).show();

final SQLiteDatabase db=openOrCreateDatabase("TruckMe", MODE_PRIVATE, null);
db.execSQL("create table if not exists lokacije (id INTEGER  PRIMARY KEY AUTOINCREMENT NOT NULL, lokacija VARCHAR(600));");

//regulisanje podataka za logovanje samo prvi put

String idvozaca=new String();
db.execSQL("create table if not exists vozac (id INTEGER  PRIMARY KEY AUTOINCREMENT NOT NULL, idvozaca VARCHAR(15));");
d=db.rawQuery("select idvozaca from vozac", null);

//db.execSQL("delete from vozac;");

if(d.getCount() > 0)
{
    d.moveToLast();
    idvozaca=d.getString(d.getColumnIndex("idvozaca"));
    mojsadrzaj=idvozaca;
    Toast t=Toast.makeText(this, "Id vozaca je : " + mojsadrzaj, Toast.LENGTH_LONG);
    t.setGravity(Gravity.CENTER, 0, 0);
    t.show();

}
else
{
    //ubacivanje forme za dijalog

            //unos vozacid u bazu 
            db.execSQL("insert into vozac (idvozaca) values ('"+mojsadrzaj+"');");
            //unos vozacid u bazu

            //String resString = sb.toString(); // Result is here
            Toast t=Toast.makeText(this, "Aplikacija je aktivirana sa kodom : "+mojsadrzaj, Toast.LENGTH_LONG);
            t.setGravity(Gravity.CENTER, 0, 0);
            t.show();

        }

//regulisanje podataka za logovanje samo prvi put

final Time t=new Time();

 //deo za thread

 final Handler handler = new Handler();

    final Runnable runnable = new Runnable() {
        public void run() {

            if(indikator != 0)
            {

               //w.loadUrl(c.getString(c.getColumnIndex("lokacija")));

                    final SQLiteDatabase db=openOrCreateDatabase("TruckMe", MODE_PRIVATE, null);
                    c=db.rawQuery("select * from lokacije", null);
                    c.moveToLast();

                    try {
                        HttpClient client=new DefaultHttpClient();
                        URI website=new URI(c.getString(c.getColumnIndex("id")));
                        Log.e("Message", website.toString());
                        HttpGet request=new HttpGet();
                        request.setURI(website);
                        try {
                            client.execute(request);
                        } catch (ClientProtocolException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }

                    } catch (URISyntaxException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                    /*
                    URL url = null;
                    try {
                        url = new URL(c.getString(c.getColumnIndex("id")));
                    } catch (MalformedURLException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    URLConnection urlConnection = null;
                    try {
                        urlConnection = url.openConnection();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    try {
                        urlConnection.connect();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    */
                    /*
                    try {
                        myURL = new URL(c.getString(c.getColumnIndex("id")));
                    } catch (MalformedURLException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                    URLConnection myURLConnection = null;
                    try {
                        myURLConnection = myURL.openConnection();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    try {
                        myURLConnection.connect();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                  */

                db.execSQL("delete from lokacije where id <"+c.getString(c.getColumnIndex("id")));

                    // TODO: handle exception
                  }
            indikator=1;

            handler.postDelayed(this, 15000);

        }
    };

//deo koji naknadno ubacujem za kriterijum
Criteria criteria = new Criteria();
criteria.setAccuracy(Criteria.ACCURACY_FINE);
criteria.setPowerRequirement(Criteria.POWER_LOW);

//kraj dela koji sam naknadno ubacio

final   LocationManager m=(LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
    //deo koji sam takodje ubacio naknadno
String locationprovider =m.getBestProvider(criteria,true);
//deo koji sam takodje ubacio naknadno kraj

    LocationListener l=new LocationListener() {

            @Override
            public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onProviderEnabled(String arg0) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onProviderDisabled(String arg0) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onLocationChanged(Location arg0) {

                String url=new String();
                String zauzetost=new String();
                zauzetost="ZAUZET";

                String format="MM/dd/yyyy";
                SimpleDateFormat sdf = new SimpleDateFormat(format,Locale.US);
                String date= sdf.format(new Date());

            t.setToNow();   

            String longitude=new String();
            String latitude=new String();
            String speed=new String();

            if((int)arg0.getSpeed()==0)
            {
                speed="0";
            }
            else
            {
            speed=""+(((int)arg0.getSpeed()*3600)/1000);
            }
            longitude=""+  arg0.getLongitude();
            latitude=""+ arg0.getLatitude();

            Calendar cal=Calendar.getInstance();

            url="http://www.compensatemeonline.com/truckmeonline/TruckMeOnline/UnosLokacijaSaTelefona.php?id="+mojsadrzaj+"&longitude="+longitude+"&latitude="+latitude+"&brzina="+speed+"&vreme="+cal.getTime()+"&datum="+date+"&zauzetost="+zauzetost;    
            Toast.makeText(MyService.this, url,Toast.LENGTH_LONG).show();
            db.execSQL("insert into lokacije (lokacija) values ('"+url+"');");

                // TODO Auto-generated method stub

            }

        };

        // TODO Auto-generated method stub
        //pozivanje threada
         runnable.run();
        //pozivanje threada
        m.requestLocationUpdates(locationprovider, 10000, 0, l);

//      zamenio sam m.requestLocationUpdates(LocationManager.GPS_PROVIDER, 120000, 0, l); sa m.requestLocationUpdates(locationprovider, 120000, 0, l);

}
@Override
public int onStartCommand(Intent intent, int flags, int startId) {

    Toast.makeText(this, "Service started onstartcommand ...",Toast.LENGTH_LONG).show();

   return START_STICKY;

}

@Override
public void onStart(Intent intent, int startId) {
    Toast.makeText(this, "Service started onstart...",Toast.LENGTH_LONG).show();

}

@Override
public void onDestroy() {
super.onDestroy();

Toast.makeText(this, "Service destroyed ...",Toast.LENGTH_LONG).show();

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:26:34.240

问题不在于您的 GPS 代码，问题在于您尝试从光标中加载的 URL 不正确。

我会重新检查 的论点`w.loadUrl`是否正确。

# c# - xml序列化和反序列化（隐藏一个节点头）

> ID：14843208
> 
> 赞同：1
> 
> 时间：2013-02-12T22:39:55.767
> 
> 标签：c#, xml, serialization

我有一个 XML 文件，我需要反序列化它。无需绕过所有节点，只需将 XML 文件反序列化为对象。

是否可以从结果 ActionGetSiteResultData 中隐藏，或者只有一种方式使用自定义序列化/反序列化？

课程：

```
// root
public Result Result { get; set; }
// rows
public class Result 
{
  public List<ResultData> Data { get; set; }
}
//item
public class ResultData
{
  [XmlElement(ElementName = "gen_info")]
  public GenInfo GenInfo { get; set; }

  [XmlElement(ElementName = "hosting")]
   public Hosting Hosting { get; set; }
} 
```

结果：

```
 <Result>
    <Id>1</Id>
    <Data>
          <ResultData> <--- REMOVE THIS
             <gen_info>
                <ascii-name>sadsad</ascii-name>
              </gen_info>
              <hosting/>
          </ResultData> <--- REMOVE THIS
    </Data>
  </Result> 
```

需要：

```
<Result>
    <Id>1</Id>
    <Data>
        <gen_info>
            <ascii-name>sadsad</ascii-name>
         </gen_info>
         <hosting/>
    </Data>
  </Result>
<Result>
 <Id>2</Id>
 <Data>
   <gen_info>
      <ascii-name>sadsad2</ascii-name>
    </gen_info>
    <hosting/>
  </Data>
 </Result> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:01:28.330

这应该可以，但是很冗长。如果不起作用，请先在 ResultData 属性上尝试 [XmlElement(ElementName = "gen_info")]：

```
public class Result 
{
  [XmlIgnore]
  public List<ResultData> Data { get; set; }

  [XmlElement(ElementName = "gen_info")]
  public ResultData[] __XmlSerializedData{
    get{ return Data.ToArray();}
    set{ Data = new List<ResultData>(value);}
  }
} 
```

# perl - 用于家庭作业的基本 Perl

> ID：14843211
> 
> 赞同：-2
> 
> 时间：2013-02-12T22:40:01.337
> 
> 标签：perl

我在学校和网络编程课上。我根本没有 Perl 经验。我们的任务如下。

编写一个短程序，使用反引号 `` 函数运行外部命令 ps -aux 以列出用户拥有的所有当前正在运行的进程，其用户名作为命令行参数给出。

暗示：

```
$ARGV[0] or die "without a username given\n";
my $.... = $ARGV[0];
my @ps = `ps -axu`;
foreach my $..... (@ps) {
print $line if …../;
} 
```

我已将代码更改为：

```
#!/usr/local/bin/perl -w
use strict;
use warnings;
my $line;

$ARGV[0] or die "without a username given\n";
my $test = $ARGV[0];
my @ps = `ps -axu`;
foreach my $test (@ps) {
print $line if ...../;
} 
```

但是，我不断收到此错误：

C:\Perl\W4A2new.pl 第 10 行的语法错误，靠近“if ...”搜索模式未在 C:\Perl\W4A2new.pl 第 10 行终止。

谁能帮我吗？？？请。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:02:55.240

1.  该`ps`命令通常以类似的方式调用`ps aux`（不带前导减号）。
2.  在 ps 参数中指定用户名没有效果我可以看到
3.  使用反引号很方便，但可能被认为是不好的风格。
4.  输出的第一列`ps aux`可以包含数字用户 ID。
5.  我们可以使用`/etc/passwd`在用户 ID 和用户名之间进行转换。

这是打印出所有`ps`以给定字符串开头的行的代码：

```
#!/usr/bin/perl
use strict; use warnings;

print grep /^\Q$ARGV[0]\E/, `ps aux`; 
```

最后一行可以写得很详细：

```
my @temp;
for (`ps aux`) {
  push @temp, $_ if /^\Q$ARGV[0]\E/;
}
print @temp; 
```

该脚本将像`perl script.pl root`or一样被调用`perl script.pl 1000`。

现在正如我所说，我们可以在用户名和用户 ID 之间进行转换。此外，我们可以将`ps`输出视为列数据。列是

```
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND 
```

我们可以通过`my @cols = split ' ', $line, 11`. 我们必须指定最大列数，因为命令可能包含空格。如果用户只包含数字字符，我们将转换为相应的名称`/etc/passwd`：

```
#!/usr/bin/perl
use strict; use warnings;

my $username = $ARGV[0] or die <<"END_USAGE";
USAGE: perl $0 USERNAME
    USERNAME -- the full username you want ps output for.
END_USAGE

my %id_2_name = do {
  open my $passwd, "<", "/etc/passwd" or die "Can't open passwords: $!";
  map { (split /:/)[2,0] } <$passwd>;
};

open my $ps, "-|", "ps", "aux" or die "Can't open ps command: $!";

while(<$ps>) {
  my @cols = split ' ', $_, 11;
  $cols[0] = $id_2_name{$cols[0]} unless $cols[0] =~ /[^0-9]/;
  print join " ", @cols if $cols[0] eq $username;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:48:00.907

```
#!/usr/local/bin/perl -w
use strict;
use warnings;

my $username = $ARGV[0] or die "without a username given\n";
my @ps = `ps -axu $username`;
foreach my $line (@ps) {
   print $line, "\n";
} 
```

您必须以这种方式执行此脚本（假设脚本名称为 myscript.pl）：

```
perl myscript.pl your_operating_system_user_name 
```

# php - 通过 cURL 提交表单并将浏览器重定向到 PayPal

> ID：14843212
> 
> 赞同：17
> 
> 时间：2013-02-12T22:40:04.600
> 
> 标签：php, curl, paypal

我正在开发一个网站，客户有多种付款方式，包括 PayPal 付款标准。由于我正在收集有关客户的大量数据，因此我想在将用户发送到 PayPal 的服务器之前在我的服务器上处理表单。一种选择是将数据连接成单个字符串，将字符串分配给`custom`字段，然后在 IPN 响应中对其进行处理，但我发现这是一个非常不雅的解决方案。相反，在收集用户数据后，我尝试使用 cURL 提交标准的 HTML PayPal 表单。如何将用户重定向到 PayPal 以完成结帐流程？

```
 // Process PayPal payment
  if ($method == 'PayPal') {

    // Prepare POST data
    $query = array();
    $query['notify_url'] = 'http://example.com/ipn';
    $query['cmd'] = '_cart';
    $query['upload'] = '1';
    $query['business'] = 'email@example.com';
    $query['address_override'] = '1';
    $query['first_name'] = $first_name;
    $query['last_name'] = $last_name;
    $query['email'] = $email;
    $query['address1'] = $ship_to_address;
    $query['city'] = $ship_to_city;
    $query['state'] = $ship_to_state;
    $query['zip'] = $ship_to_zip;
    $query['item_name_'.$i] = $item['description'];
    $query['quantity_'.$i] = $item['quantity'];
    $query['amount_'.$i] = $item['info']['price'];

    // Prepare query string
    $query_string = '';
    foreach ($query as $key=>$value) {
      $query_string .= $key.'='.urlencode($value).'&';
    }
    $query_string = rtrim($query_string, '&');

    // Open connection
    $ch = curl_init();

    //set the url, number of POST vars, POST data
    curl_setopt($ch,CURLOPT_URL, 'https://www.paypal.com/cgi-bin/webscr');
    curl_setopt($ch,CURLOPT_POST, count($query));
    curl_setopt($ch,CURLOPT_POSTFIELDS, $query_string);

    // Execute post
    $result = curl_exec($ch);

    // Close connection
    curl_close($ch);
  } 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-12T23:24:28.107

> **警告：此答案存在安全缺陷。**通过客户端传递敏感数据（例如商品和价格）允许客户端修改交易。IE。更改项目或更改价格。[请参阅有关如何实施 IPN](https://developer.paypal.com/docs/classic/products/instant-payment-notification/)的 PayPal 文档。

您应该使用 php`header`函数重定向用户并将变量作为 GET 而不是 POST 发送。

```
// Process PayPal payment
if ($method == 'PayPal') {

    // Prepare GET data
    $query = array();
    $query['notify_url'] = 'http://jackeyes.com/ipn';
    $query['cmd'] = '_cart';
    $query['upload'] = '1';
    $query['business'] = 'social@jackeyes.com';
    $query['address_override'] = '1';
    $query['first_name'] = $first_name;
    $query['last_name'] = $last_name;
    $query['email'] = $email;
    $query['address1'] = $ship_to_address;
    $query['city'] = $ship_to_city;
    $query['state'] = $ship_to_state;
    $query['zip'] = $ship_to_zip;
    $query['item_name_'.$i] = $item['description'];
    $query['quantity_'.$i] = $item['quantity'];
    $query['amount_'.$i] = $item['info']['price'];

    // Prepare query string
    $query_string = http_build_query($query);

    header('Location: https://www.paypal.com/cgi-bin/webscr?' . $query_string);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T22:46:29.133

与其尝试将所有数据发布到 PayPal 并返回，不如将数据保存在您的服务器上并仅发送一个识别令牌。您发送到 PayPal（通过用户的浏览器）的任何数据都可能被拦截和修改。这是一个严重的安全隐患。

如果您只发送令牌，则没有篡改的机会。

阅读 PayPal 规范，它有关于如何实现这些东西的指南。

您*必须*使用 IPN 或一些类似的后处理，因为 PayPal 是唯一知道是否实际付款的人。不要**相信**您从用户那里获得的任何数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T22:45:28.530

做 curl 它将在后端进行端到端调用，它不会反映前端行为。

您必须制作一个带有隐藏字段和 javascript 的表单，以便在页面加载后自动提交表单。

# google-maps - Google Maps API v3 - 在域上禁用（Hello World 示例）

> ID：14843214
> 
> 赞同：0
> 
> 时间：2013-02-12T22:40:16.173
> 
> 标签：google-maps, google-maps-api-3

我正在尝试使用 google maps api 做一些事情，但它总是说它已被禁用，尽管我只是尝试了这里网站上的 Hello World 示例：

[https://developers.google.com/maps/documentation/javascript/tutorial?hl=de#HelloWorld](https://developers.google.com/maps/documentation/javascript/tutorial?hl=de#HelloWorld)

有人出主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:53:21.187

看起来是他们的谷歌错误......

[http://www.google.com.au/about/jobs/locations/sydney/](http://www.google.com.au/about/jobs/locations/sydney/)

# asp.net - c# MailMessage 依赖于主题的内容？

> ID：14843215
> 
> 赞同：0
> 
> 时间：2013-02-12T22:40:17.587
> 
> 标签：asp.net, sql-server-2008, c#-4.0, mailmessage

这很奇怪！我正在尝试通过 SmtpClient 使用 MailMessage 发送电子邮件，但我得到了一些奇怪的结果！这是发生了什么：1）这适用于某些电子邮件，但不适用于其他电子邮件。2) 我已将其范围缩小到某些主题（工作）而不是其他主题（不工作）的一些问题。例如 - “土地已批准租约”的主题。作品。它的长度正好是 36 个字符。- “房东批准的租约”的主题。' 不起作用，即使它的长度正好是 36 个字符。- “房东批准的租约……”的主题确实有效。它的长度正好是 36 个字符。

**为什么主题如此挑剔？**

我从数据库表中提取主题行。这些列被格式化为 nchar(100) 可为空的。在将每个字符串分配给主题行之前，我会修剪（），因此宽度不会有所不同。任何线索任何人？！

谢谢

# psexec - 在新的命令行窗口中启动每次出现的 PSEXEC

> ID：14843218
> 
> 赞同：1
> 
> 时间：2013-02-12T22:40:21.603
> 
> 标签：psexec

我有一项任务，我需要从 IBM 的 Tivoli (TSM) 启动多个手动备份，并且需要在单独的窗口中启动每个备份，这样我就不必等待每个备份完成。

我正在从 txt 文件中提取服务器列表，并且只需要每个实例都在它自己的窗口中。

命令行是：

```
PSEXEC @servers.txt -s -w "C:\Program Files\Tivoli\TSM\baclient" "C:\Program Files\Tivoli\TSM\baclient\dsmc.exe" "Incremental" 
```

好的，我修复了它 - 使用 -d 选项继续下一项工作 - 像这样： PSEXEC @servers.txt -s -w "C:\Program Files\Tivoli\TSM\baclient" -d "C:\ Program Files\Tivoli\TSM\baclient\dsmc.exe" "增量"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T20:46:23.083

If you just don't want to wait for the completion of each single issued command, you can use psexec's `-d` option:

> -d Don't wait for process to terminate (non-interactive).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T22:42:09.033

您可以使用 Windows 的[`start`](http://technet.microsoft.com/en-us/library/bb491005.aspx)命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T22:34:09.043

感谢 Michael 发帖 - 我添加了 -d 选项让它继续运行，而无需等待它不需要的响应。PSEXEC @servers.txt -s -w "C:\Program Files\Tivoli\TSM\baclient" -d "C:\Program Files\Tivoli\TSM\baclient\dsmc.exe" "增量"

# java - 将值放入 M ap 的 Map

> ID：14843222
> 
> 赞同：0
> 
> 时间：2013-02-12T22:40:39.580
> 
> 标签：java, concurrenthashmap

我正在尝试从 java 中的命令行读取。

假设如果我从命令行传递这些参数 -

```
TABLE1 TABLE2 TABLE3 
```

然后从命令提示符读取后，`tableNames`列表将包含上述三个表名。

```
private static List<String> tableNames= new ArrayList<String>(); 
```

现在我需要遍历它并通过从属性文件中加载相应的值`tableNames`将所有内容放入 a 中。`ConcurrentHashMap`

所以我这样做的方式是这样的。

```
private static ConcurrentHashMap< String,
   ConcurrentHashMap< String, String >> tableList = new ConcurrentHashMap<>();
private static ConcurrentHashMap<String,
   String >                       databaseDetails = new ConcurrentHashMap<>();
prop.load(MainTest.class.getClassLoader().getResourceAsStream("config.properties"));
for (String arg : tableNames) {
   String url = (String) prop.get(arg + ".url");
   String user = (String) prop.get(arg + ".user");
   String password = (String) prop.get(arg + ".password");
   String driver = (String) prop.get(arg + ".driver");
   String suffix = (String) prop.get(arg + ".suffix");
   String sql = (String) prop.get(arg + ".sql");
   databaseDetails.put("URL",url);
   databaseDetails.put("USER",user);
   databaseDetails.put("PASSWORD",password);
   databaseDetails.put("DRIVER",driver);
   databaseDetails.put("SUFFIX",suffix);
   databaseDetails.put("SQL",sql);
   tableList.put(arg,databaseDetails);
} 
```

我不确定这是否是将值放入 M​​ap 的正确方法？或者我可以稍微改进一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:45:00.460

您需要做的主要事情是在 for 循环中移动 databaseDetails 映射的创建。目前，每次通过循环时，您都会覆盖您在上一次迭代中提取的详细信息。每次循环时，您都会收集一组新的 databaseDetails，因此需要一个新的 databaseDetails 映射来将它们放入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T22:45:18.320

这样，您将在表格列表中只有一张地图。您应该在每次迭代中创建一个新的 databaseDetails 映射。所以删除databaseDetails成员变量，而不是在循环中使用局部变量。

# mongodb - MongoDB Replica Set：主备节点磁盘大小差异

> ID：14843229
> 
> 赞同：7
> 
> 时间：2013-02-12T22:40:57.423
> 
> 标签：mongodb, replication

我刚刚做了mongodb副本集配置，一切看起来都不错。所有数据都正确移动到辅助节点。但是当我查看数据目录时，我可以看到 Primary 有 ~140G 的数据，而 Secondary 只有 ~110G。

有没有人在设置副本集时遇到过这种问题。这是正常的行为吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T22:57:38.740

当您在辅助服务器上从头开始进行初始同步时，它会重新写入所有数据。这将删除填充、空白空间（已删除的数据）等。因此，在这方面它类似于运行修复。

如果您在主节点上运行修复（阻塞操作，仅在绝对必要时进行），那么两者总体上会更接近。

如果您检查输出，`db.stats()`您应该会看到各种数据库具有相同的对象计数，数据目录大小差异无需担心。

# meteor - 如何在 Meteor 服务器中获取用户 IP 地址？

> ID：14843232
> 
> 赞同：27
> 
> 时间：2013-02-12T22:41:16.140
> 
> 标签：meteor

我想在服务器端获取我的流星应用程序中的用户 IP 地址，以便我可以用一堆东西记录 IP 地址（例如：订阅邮件列表的非注册用户，或者只是做任何事情*重要*）。

我知道当涉及反向代理时，服务器“看到”的 IP 地址可能与真实源地址不同。在这种情况下，`X-Forwarded-For`应该解析 header 以获取用户的真实公共 IP 地址。请注意，解析`X-Forwarded-For`不应是自动的（有关潜在安全问题的讨论，请参见[http://www.openinfo.co.uk/apache/index.html](http://www.openinfo.co.uk/apache/index.html)）。

外部参考：这个问题出现[在 2012 年 8 月的流星谈话邮件列表中](https://groups.google.com/forum/?fromgroups=#!msg/meteor-talk/ebv8U3par_c/)（没有提供解决方案）。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-03-26T10:02:35.123

**1 - 没有 http 请求，在函数中你应该能够获得 clientIP：**

```
clientIP = this.connection.clientAddress;
//EX: you declare a submitForm function with Meteor.methods and 
//you call it from the client with Meteor.call().
//In submitForm function you will have access to the client address as above 
```

**2 - 使用 http 请求并使用 iron-router 及其 Router.map 功能：**

在目标路由的动作函数中使用：

```
clientIp = this.request.connection.remoteAddress; 
```

**3 - 使用 Meteor.onConnection 功能：**

```
Meteor.onConnection(function(conn) {
    console.log(conn.clientAddress);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-13T03:07:03.240

类似于 TimDog 的答案，但适用于较新版本的 Meteor：

```
var Fiber = Npm.require('fibers');

__meteor_bootstrap__.app
  .use(function(req, res, next) {
    Fiber(function () {
      console.info(req.connection.remoteAddress);
      next();
    }).run();
  }); 
```

这需要在您的顶级服务器代码中（而不是在 Meteor.startup 中）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-04T03:07:26.717

这个答案[https://stackoverflow.com/a/22657421/2845061](https://stackoverflow.com/a/22657421/2845061)已经很好地展示了如何获取客户端 IP 地址。

我只想指出，**如果您的应用程序在代理服务器后面提供**（通常发生），您需要将**`HTTP_FORWARDED_COUNT`**环境变量设置为您正在使用的代理数量。

参考：[https ://docs.meteor.com/api/connections.html#Meteor-onConnection](https://docs.meteor.com/api/connections.html#Meteor-onConnection)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T01:02:22.733

您可以在服务器代码中执行此操作：

```
Meteor.userIPMap = [];
__meteor_bootstrap__.app.on("request", function(req, res) {
    var uid = Meteor.userId();
    if (!uid) uid = "anonymous";
    if (!_.any(Meteor.userIPMap, function(m) { m.userid === uid; })) {
        Meteor.userIPMap.push({userid: uid, ip: req.connection.remoteAddress });
    }
}); 
```

然后，您将拥有一个 Meteor.userIPMap，其中包含用户 ID 到 IP 地址的映射（为了容纳 x-forwarded-for 标头，请在上面[使用此函数](https://gist.github.com/qiao/1626318)）。

三个注意事项：（1）每当您的应用程序中有请求时，它都会触发，所以我不确定这会导致什么样的性能损失；(2)`__meteor_bootstrap__`我认为随着即将改进的包装系统，该对象很快就会消失；(3)`anonymous`用户需要在这里更好地处理..您需要一种方法，通过其请求对象中的唯一、持久约束将匿名用户附加到 IP。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-19T13:17:50.390

您必须连接到服务器会话并获取当前用户的 ip：

```
Meteor.userIP = function(uid) {
      var k, ret, s, ss, _ref, _ref1, _ref2, _ref3;
      ret = {};
      if (uid != null) {
            _ref = Meteor.default_server.sessions;
            for (k in _ref) {
                  ss = _ref[k];
                  if (ss.userId === uid) {
                        s = ss;
                  }
            }
            if (s) {
                  ret.forwardedFor = ( _ref1 = s.socket) != null ? 
                        ( _ref2 = _ref1.headers) != null ? 
                        _ref2['x-forwarded-for'] : void 0 : void 0;
                  ret.remoteAddress = ( _ref3 = s.socket) != null ? 
                        _ref3.remoteAddress : void 0;
            }
      }
      return ret.forwardedFor ? ret.forwardedFor : ret.remoteAddress;
}; 
```

当然，您需要当前用户登录。如果您需要匿名用户，请按照我写[的这篇文章。](http://ciokan.com/programming/meteor/javascript/2013/08/18/getting-user-ip-address-in-meteorjs.html)

PS 我知道这是一个旧线程，但它缺乏完整的答案或代码不再有效。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-03T18:50:16.723

这是一种对我有用的方法，可以从服务器上的任何位置获取客户端的 IP 地址，而无需使用其他软件包。在 Meteor 0.7 中工作，也应该在早期版本中工作。

在客户端，获取套接字 URL（唯一）并将其发送到服务器。您可以在 Web 控制台中查看套接字 URL（在 Chrome 和 Safari 中的网络下）。

```
socket_url = Meteor.default_connection._stream.socket._transport.url
Meteor.call('clientIP', socket_url) 
```

然后，在服务器上，使用客户端的套接字 URL 在`Meteor.server.sessions`.

```
sr = socket_url.split('/')
socket_path = "/"+sr[sr.length-4]+"/"+sr[sr.length-3]+"/"+sr[sr.length-2]+"/"+sr[sr.length-1]
_.each(_.values(Meteor.server.sessions), (session) ->
    if session.socket.url == socket_path
        user_ip = session.socket.remoteAddress
) 
```

`user_ip`现在包含已连接客户端的 IP 地址。

# algorithm - 在我的递归方法中不断超出范围来导航和查找 4X4 矩阵中的所有字母组合

> ID：14843233
> 
> 赞同：0
> 
> 时间：2013-02-12T22:41:16.223
> 
> 标签：algorithm, recursion, boolean, solver, boggle

这是 Boggle 求解器的一部分。我做了一个递归方法来遍历一个字符串矩阵。`MyLetteres`已存储所有字符（例如 a、b、c...），`MyLetteres1`初始化为空，并且`tracker`为`false`. 这些变量标记了我已经访问过的矩阵中的哪些坐标（我无法重新访问坐标）。我只能移动到相邻的坐标（不能跳过）。该参数`String word`使用单个字母（起点）进行初始化。`int x`并且`int y`是我的 (x,y) 坐标。忽略`int p`和`int n`。

我遇到的问题是我似乎无法正确标记该方法已经结束的坐标，然后我似乎无法将`tracker`（最后一行）重置`false`为下一个`getPaths()`运行。

这是我的代码，请帮忙！

```
public void getPaths(int p, int n,int x, int y,String word, boolean tracker[][],boolean MyLetteres1[][],String MyLetteres[][],boolean checker)throws IOException{
    if(word.length()>1)
        checker=Check(word);//Check() just checks to see if its a word.
    tracker[x][y]=true;//makes sure that the checkers never goes back over starting letter
    if(x+1<MyLetteres.length&&tracker[x+1][y]==false){//up{
        //checker=Check(word);//checks to see if its word 
        //reverse(word);
        System.out.print("1 ("+x+","+y+"), ");//for debugging purposes
        getPaths(n,p,x+1, y,word+MyLetteres[x+1][y], tracker,MyLetteres1,MyLetteres,true);//recursive part
    }
    if(x-1>0&&tracker[x-1][y]==false){//down
        //checker=Check(word);
        //reverse(word);
        System.out.print("2 ("+x+","+y+"), ");
        getPaths(n,p,x-1, y ,word+MyLetteres[x-1][y], tracker,MyLetteres1,MyLetteres,true);
    }
    if(y+1<MyLetteres.length&&tracker[x][y+1]==false){//right
        //checker=Check(word);
        //reverse(word);
        System.out.print("3 ("+x+","+y+"), ");
        getPaths(n, p,x , y+1,word+MyLetteres[x][y+1], tracker,MyLetteres1,MyLetteres,true);
    }
    if(y-1>0&&tracker[x][y-1]==false){//left
        //checker=Check(word);
        //reverse(word);
        System.out.print("4 ("+x+","+y+"), ");
        getPaths(n,p,x , y-1,word+MyLetteres[x][y-1], tracker,MyLetteres1,MyLetteres,true);
    }
    if(x+1<MyLetteres.length&&y+1<MyLetteres.length&&tracker[x+1][y+1]==false){//right, up
        //checker=Check(word);
        //reverse(word);
        System.out.print("5 ("+x+","+y+"), ");
        getPaths(n,p,x+1, y+1,word+MyLetteres[x+1][y+1], tracker,MyLetteres1,MyLetteres,true);
    }
    if(x-1>0&&y-1>0&&tracker[x-1][y-1]==false){//down, left
        //checker=Check(word);
        //reverse(word);
        System.out.print("6 ("+x+","+y+"), ");
        getPaths(n,p,x-1, y-1,word+MyLetteres[x-1][y-1], tracker,MyLetteres1,MyLetteres,true);
    }
    if(x-1>0&&y+1<MyLetteres.length&&tracker[x-1][y+1]==false){//down, right
        //checker=Check(word);
        //reverse(word);
        System.out.print("7 ("+x+","+y+"), ");
        getPaths(n,p,x+1, y-1, word+MyLetteres[x-1][y+1],tracker,MyLetteres1,MyLetteres,true);
    }
    if(x+1<MyLetteres.length&&y-1>0&&tracker[x+1][y-1]==false){//up, left
        //checker=Check(word);
        //reverse(word);
        System.out.print("8 ("+x+","+y+"), ");
        getPaths(n, p,x-1 , y+1, word+MyLetteres[x+1][y-1],tracker,MyLetteres1,MyLetteres,true);
    }
    tracker=deepCopyBoolean(MyLetteres1);//MyLetteres1 never changes so this is my attempt at resetting tracker (which does change) back to all false so that when the program starts a new path, nothing has been "visited".
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:07:00.907

您可以做很多事情来帮助我们或您自己。最重要的是，如果你要出界，你应该知道它发生在哪条线上。您的调试器可以告诉您这一点，告诉我们这将有很大帮助。告诉我们您正在使用哪种语言进行编码也将有所帮助。对我来说它看起来像 Java。

在这种情况下，看起来在您的最后两个`if`语句中，您将错误的值`x`和`y`值传递给 getPaths。你有

`if(x-1>0&&y+1`...`getPaths(n,p,x+1,y-1`

和

`if(x+1<MyLetteres.length&&y-1>0`...`getPaths(n, p, x-1, y+1`

修复这些，您可能会修复超出范围的异常。

顺便说一句，当您检查您的范围时，您可能想要检查`x >= 0`and`y >= 0`而不是`x > 0`and `y > 0`。数组索引等于 0 是有效的。

此外，检查 if`x + 1 < MyLetteres.length`和 if在技术上是不准确的`y + 1 < MyLetteres.length`，因为那是说“x + 1 小于板的'高度'”和“y + 1 小于板的'高度'”。由于你的棋盘是正方形的，所以效果还可以，但准确地说，你应该有`x + 1 < MyLetteres[0].length`，这就是说“x + 1 小于棋盘的‘宽度’。

最后，至于重置跟踪器，我建议允许它为 null，并在顶级调用中将其作为 null 传递。如果它为空，你就知道你在一个新词的开头，你可以创建你自己的并将它传递给所有后续的递归调用。

祝你好运！

# python - python/django：如何将 json 字符串转换为 html 格式？

> ID：14843235
> 
> 赞同：0
> 
> 时间：2013-02-12T22:41:29.310
> 
> 标签：python, html, django, json

我不确定这是否可能，但如果有这样的事情，我真的很感激。

我有一个 json 对象，其中包含另一个程序返回的 json 字符串，它是一个 html 代码。但是，当我将它渲染到 django 模板时，它只是一大串字符串。我想知道python/django中是否有这样的工具可以将字符串转换为“html格式”文本。谢谢。

编辑：我`json.loads()`用来加载其他程序的输出，提取有用信息，然后将其返回到模板。在模板中，我只是使用 django 模板语法`{{ v.response }}`来展示它。之后页面如下所示：

![在此处输入图像描述](../Images/fcc8d0dc7a0d3a5591c4776feb66e89b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:52:45.553

假设你知道字符串是安全的，你可以这样标记，这样模板引擎就不会自动转义它：try `{{ v.response|safe }}`。

# testing - 使用不同的用户和指标来解决和关闭 Jira 中的问题

> ID：14843239
> 
> 赞同：1
> 
> 时间：2013-02-12T22:41:45.903
> 
> 标签：testing, jira, project-planning

在 Jira，我们目前正在尝试对我们公司进行软件开发与软件测试的方式进行建模。我们一般有 QA 开票，Software Dev 取票（分配给自己），然后在 Dev 团队解决后 QA 验证票。我们担心的是能够同时跟踪解决方案和关闭。

例如，假设两个 Jira 用户 A（软件开发）和 B（QA）

B：打开工单
A：修复问题并解决工单
B：关闭工单。

在一天结束时，我们希望能够看到
A：已解决的问题：10
B：已关闭/测试的问题：10

有没有办法在 Jira 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:32:26.627

使用以下 JQL：

```
# resolved from the beginning of the day
resolution = Done and resolutiondate > startOfDay()
# closed from the beginning of the day, assuming that closed issues can't be edited (default)
status = Closed and updatedDate > startOfDay() 
```

* * *

话虽如此，我们最终做了一些完全不同的事情。这是工作流程：

1.  QA 在查看支持问题后打开工单（在 QA 项目中）。
2.  QA 在他们的工作流程中有一个特殊的过渡 - `pass to developers`. 执行此操作时，原始问题会变为`waiting for dev`无法手动修改的状态，并且会在 DEV 项目中创建重复问题。正在复制所有问题字段。如果此问题已分配，`DEV`则重新打开原始问题。
3.  开发人员选择此问题并解决它。一旦问题得到解决，来自 QA 的原始问题就会解冻 - 移动到`QA after dev`可以再次编辑的状态。
4.  QA 团队发现了这个问题，检查它们是否在哪里解决并关闭它们，或者在`waiting for dev`需要时将它们移回。

通过这种方式，我们可以报告有多少问题已关闭、打开、解决、由开发团队处理、等待开发团队等等。

为了实现此功能，我们使用自定义字段来保存从两种类型的问题传递的字段、两个问题之间的链接，并使用[Jira Scripting Suite](https://marketplace.atlassian.com/plugins/com.quisapps.jira.jss)进行问题和链接创建，以及使用[行为插件](https://marketplace.atlassian.com/plugins/com.onresolve.jira.plugin.Behaviours)进行文件验证。

如果您需要支持 Jira > 5.2 而不是 Jira Scripting Suite，请使用[Script Runner](https://marketplace.atlassian.com/plugins/com.onresolve.jira.groovy.groovyrunner)

# html - 如何在单击时更改无序列表宽度

> ID：14843241
> 
> 赞同：0
> 
> 时间：2013-02-12T22:42:01.070
> 
> 标签：html, css, navigation

我正在建立响应式网站。我有固定的导航。我的内容正在改变。我想将 HOME 列表更改为单击它时的宽度为 180 像素。有人可以帮忙吗？

这是我的导航代码

HTML

```
<div class="aside">
<ul>
    <li><a class="po" href="index.html">HOME</a></li>
    <li><a class="fo" href="galerija.html">GALERY</a></li>
    <li><a class="ra" href="program.html">PROGRAM</a></li>
    <li><a class="ko" href="ulaznice.html">TICKETS</a></li>
<li><a class="ko" href="kontakt.html">CONTACT</a></li>
</ul> 
```

CSS

```
.aside ul
{
float:left;
font-size:0.8em;
display:block;
margin-top:10%;
padding: 0px;
max-width:180px:
width:100%;
min-width:140px;

}

.aside li 
{
height:40px;    
list-style:none;
width:100%;
display:block;
text-align:center;
line-height:45px;
padding-top:2px;

}

.aside a
{
background-color:white;
display:block;
height:40px;
width:70%;  
text-align: center;
text-decoration:none;
font-size:1.375em;
font-weight:600;
font-weight:600;
color:#4ea3d9;
-moz-transition: all 600ms ease;
-webkit-transition:all 600ms ease;
-o-transition: all 600ms ease;

}

.aside a:hover
{
width:100%;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:52:00.147

您是说您希望单个`<li>`元素在单击时更改其宽度吗？

如果您使用的是 Jquery，您可以这样做：

```
$('.aside ul li').click(function() {
    $(this).css('width', 180);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:47:35.813

您可以通过在点击事件上添加一个带有 javascript 的类来实现。

# php - 使用 PHP 从地址栏中获取页面 ID

> ID：14843242
> 
> 赞同：1
> 
> 时间：2013-02-12T22:42:04.443
> 
> 标签：php

我有一个照片库，我正在尝试从 php 文件和数据库中获取并显示一些照片信息。问题是，我必须从地址栏中获取照片 ID，这是地址：

```
http://localhost/fa/index.php?do=photo&a=showphoto&photoid=155 
```

在此链接中，照片 ID 为**155**

然后，在 PHP 文件中我尝试了这个：

```
$photo_id = $_REQUEST["photoid"]; 
```

但它不起作用。

我如何从页面地址获取照片 ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:48:41.093

您不应该使用`$_REQUEST`它，因为它会在 POST、GET 和 COOKIE 数据之间查找您请求的值。它可能会破坏您的网站安全性。

要从 url 获取数据，请使用 GET 数据，在本例中为`$_GET['photoid']`. 要在屏幕上显示它，请使用`echo $_GET['photoid']`.

您还可以使用它转储所有 GET 数据`print_r($_GET)`，您将获得转储的 GET 数据数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:43:52.770

尝试`$_GET['photoid']`使用更具体的超全局。

# asp.net-web-api - 在控制器上使用 Xml 注释的 ASP.NET Web API 帮助页面文档

> ID：14843243
> 
> 赞同：27
> 
> 时间：2013-02-12T22:42:05.150
> 
> 标签：asp.net-web-api

我安装了[ASP.NET Web API 帮助页面](http://nuget.org/packages/Microsoft.AspNet.WebApi.HelpPage/)包，并希望使用它为我的 API 控制器操作生成文档，并使用它们上已有的 Xml 注释。

我[在 Yao 的 MSDN 博客上看到了一篇文章](http://blogs.msdn.com/b/yaohuang1/archive/2012/09/30/asp-net-web-api-help-page-part-1-basic-help-page-customizations.aspx)，他讨论了如何根据 XML 注释生成文档。

但是，在 的 Register 方法中`HelpPageConfig`，该方法需要使用 Xml 文档文件的物理路径构造`SetDocumentationProvider`的实例。`XmlDocumentationProvider`

还有另一种方法可以做到这一点吗？我不清楚为什么我需要指向一个 Xml 文档文件。

谢谢

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2015-09-24T06:43:23.710

如果您仍然有问题，请参阅以下步骤。

**第 1 步 - 在控制器级别添加注释**

```
// GET api/documentation
/// <summary>
/// This is how we create a documentation
/// </summary>
/// <returns></returns>
public IEnumerable<string> Get() 
```

**第 2 步 - 构建属性** 项目属性页面并设置文档的 xml 输出

[![在此处输入图像描述](../Images/e68712de7e1b3e94ae0a5ce89985b616.png)](https://i.stack.imgur.com/aP4av.png)

**第 3 步 - 帮助页面配置**

要设置 HelpPageConfig 以使用我们的文档 xml 文件，请转到`~\Areas\HelpPage\HelpPageConfig.cs`.

默认情况下，config.SetDocumentationProvider 语句被注释掉。使用该语句，并将 DocumentationProvider 的位置指向我们的 xml 文件：

```
public static void Register(HttpConfiguration config)
{
   // Uncomment the following to use the documentation from XML documentation file.
   config.SetDocumentationProvider(
            new XmlDocumentationProvider(
                HttpContext.Current.Server.MapPath("~/App_Data/Documentation.xml")));
} 
```

**编辑：**

VS2013新建的Web API 2.2项目中HelpPageConfig的位置是`~\Areas\HelpPage\App_Start\HelpPageConfig.cs`

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-02-12T23:17:32.730

XmlDocumentationProvider 正在寻找在您编译项目时生成的 xml 文件（具有您的 xml 代码注释）。您可以通过转到项目属性 -> 构建 -> 输出来启用生成它。在这里选中 XML 文档文件的复选框。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-23T18:35:35.477

我知道这个问题已经得到解答，但如果它对我找到这个页面的人有所帮助，因为我正在寻找 IHttpActionResult 文档的解决方案

[如何将 IHttpActionResult 添加到文档中](http://web.archive.org/web/20190414032629/http://www.cpodesign.com/blog/webapi-helppage-does-not-display-ihttpactionresult-method/)

# jquery - json Ajax 请求返回页面的每个 html 元素

> ID：14843245
> 
> 赞同：0
> 
> 时间：2013-02-12T22:42:12.913
> 
> 标签：jquery, ajax, json, perl, mason

```
<script language="JavaScript">  
 var result = {};  
 var data;  
 function load_metadata (id) {
$.ajax({
    url: "/video/metadata",
    type: "POST",
    data: id,
    cache: false,
    //dataType: "json",
    //contentType: 'application/json',
    success: function(data) {
        result = data;  
    },
    error: function(e, xhr){ 
        alert('slideshow data load error: ');
    }
});         
 alert(result.toSource());  //({})
}   
</script> 
```

**/video/metadata**（梅森组件）

```
<%class>   
use JSON;   
has 'data';      
</%class>   
<%init>

use Data::Dumper;
print STDERR  Dumper($.data); # $VAR1 = '"815"'

my $item_hash->{'item'} = "test";   # Valid JSON in JSONLint.com

my $json = to_json($item_hash, { ascii => 1 });

print  STDERR  Dumper($json); # $VAR1 = '{"item":"test"}';
</%init>
<% $json %> 
```

它返回页面的每个 html 元素，而不是来自组件调用的 json！
指定数据类型/内容类型给出解析器错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:27:01.410

以防万一有人有相同的铅

忘记添加

`<%flags>
extends => undef
</%flags>`

`inherit => undef`标志为了缩短组件继承，
取消注释 dataType 并
添加`'async': false,`

所以最终的工作代码是：

```
<script language="JavaScript">  
 var result = {};  

 function load_metadata (id) {
$.ajax({
    url: "/video/metadata",
    type: "POST",
    data: id,
    cache: false,
    dataType: "json",
    'async': false,
    success: function(data) {
        result = data;  
    },
    error: function(e, xhr){ 
        alert('slideshow data load error: ');
    }
});         
 alert(result.toSource());  //({"item":"test"})
}   
</script> 
```

**/video/metadata**（梅森组件）

```
<%flags>   
    extends => undef   
</%flags>   

<%class>   
use JSON;   
has 'data';      
</%class>  

<%init>

use Data::Dumper;
print STDERR  Dumper($.data); # $VAR1 = '"815"'

my $item_hash->{'item'} = "test";   # Valid JSON in JSONLint.com

my $json = to_json($item_hash, { ascii => 1 });

print  STDERR  Dumper($json); # $VAR1 = '{"item":"test"}';
</%init>
<% $json %> 
```

希望它能为您节省几个小时

# footer - 当键盘打开输入文本时如何将html5页脚保持在底部（输入按钮下方）

> ID：14843246
> 
> 赞同：0
> 
> 时间：2013-02-12T22:42:12.070
> 
> 标签：footer

我正在用 HTML5、CSS3 和 Javascript 开发智能手机应用程序。我正在使用 phoneGap 和 PhoneGap Build 创建本机代码。问题是页面看起来不错，直到用户需要输入文本。键盘打开并将页脚向上推到覆盖文本框下方输入按钮的文本框中。

```
<footer>
<ul class="flink">
<li><a href="link1.html" class="first active"><img src="images/link1.png"/><span    class="ftext">Link 1</span></a></li>
<li><a href="Link2.html" class="first active"><img src="images/link2.png"/><span class="ftext">Link 2</span></a></li>
<li><a href="Link3.html" class="first active"><img src="images/link3.png"/><span class="ftext">Link 3</span></a></li>
<li><a href="Link4.html" class="first active"><img src="images/link4.png"/><span class="ftext">Link 4</span></a></li>
<li><a href="Link5.html" class="first active"><img src="images/link5.png"/><span class="ftext">Link 5</span></a></li>
</footer> 
```

CSS：

```
footer { position:fixed; bottom:0; width:100%; display:inline-block;background:#000; }
footer ul { margin:0px; width:100%; float:left;}
footer ul li { margin:0px; width:20%; .width:auto;display:inline; float:left; text-align:center; height:auto;}
footer ul li a { margin:0px; width:100%; float:left; height:auto; font:normal 11px Verdana, Geneva, sans-serif; padding:10px 1px; background:#000; color:#fff; text-decoration:none;}
footer ul li a.first { margin-right:1%; width:99%;}
footer ul li a img { width:30px; height:30px;}
footer ul li a .ftext { display:block; margin-top:1px;}
footer ul li a:hover {background: rgb(75,75,75); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:47:49.707

为什么不将页脚放在页面末尾而不是将其粘贴到设备底部？

# rally - Lookback API：已删除的项目

> ID：14843249
> 
> 赞同：2
> 
> 时间：2013-02-12T22:42:33.957
> 
> 标签：rally, lookbackapi

我想使用回溯 API 来查看已删除对象的历史记录，如果我知道格式化的 id，我认为这应该很简单。我只需要查询：

{ FormattedID: 'DEXXXX' }

但是，当对象被删除时，Lookback API 是否会记录任何特殊的内容（比如我可以准确地知道它何时被删除或被谁删除）？它可以帮助我指向回收站中的正确位置，以便我可以尝试取消删除它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:42:38.640

如果您知道具体的 FormattedID，您可以查询其历史记录，如上所述。快照表示删除之前的最后一个有效状态并没有一个特殊的指示符，但 _ValidTo 日期将从 apoc (9999-01-01) 更改为它被删除的日期和时间。不幸的是，最后一个快照的 _User 字段将属于导致对象最后一次更改（删除之前）的人，因为我们没有记录删除时的快照。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T19:58:36.823

有趣的。我刚刚使用 fetch=true 在回收站上运行了一个 REST 查询，结果集上的数据比我习惯的要多得多：

获取[https://rally1.rallydev.com/slm/webservice/1.40/recyclebinentry/12345678914.js](https://rally1.rallydev.com/slm/webservice/1.40/recyclebinentry/12345678914.js)

```
{ "RecycleBinEntry" : { "DeletedBy" : { "_rallyAPIMajor" : "1",
          "_rallyAPIMinor" : "40",
          "_ref" : "https://rally1.rallydev.com/slm/webservice/1.40/user/12345678910.js",
          "_refObjectName" : "User One",
          "_type" : "User"
        },
      "DeletionDate" : "2012-05-15T02:53:10.087Z",
      "Errors" : [  ],
      "ID" : "DE32",
      "Name" : "Error found in TC43: TC07-011",
      "ObjectID" : 12345678911,
      "Subscription" : { "_rallyAPIMajor" : "1",
          "_rallyAPIMinor" : "40",
          "_ref" : "https://rally1.rallydev.com/slm/webservice/1.40/subscription/12345678912.js",
          "_refObjectName" : "My Subscription",
          "_type" : "Subscription"
        },
      "Type" : "Defect",
      "Warnings" : [  ],
      "Workspace" : { "_rallyAPIMajor" : "1",
          "_rallyAPIMinor" : "40",
          "_ref" : "https://rally1.rallydev.com/slm/webservice/1.40/workspace/12345678913.js",
          "_refObjectName" : "My Workspace",
          "_type" : "Workspace"
        },
      "_CreatedAt" : "May 14, 2012",
      "_objectVersion" : "1",
      "_rallyAPIMajor" : "1",
      "_rallyAPIMinor" : "40",
      "_ref" : "https://rally1.rallydev.com/slm/webservice/1.40/recyclebinentry/12345678914.js",
      "_refObjectName" : "Error found in TC43: TC07-011"
    }
} 
```

我没有意识到 Rally 发布了对此信息的增强，但此数据包括删除对象的用户的名称和引用。

您可以使用此 REST URL 遍历当前工作区/项目的回收站：

[https://rally1.rallydev.com/slm/webservice/1.40/recyclebin.js?workspace=/workspace/12345678919&project=/project/12345678920&fetch=true](https://rally1.rallydev.com/slm/webservice/1.40/recyclebin.js?workspace=/workspace/12345678919&project=/project/12345678920&fetch=true)

其中 12345678919 和 12345678920 分别是工作区和项目 OID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T15:12:56.383

不幸的是，Lookback API 没有提供与跟踪回收站中的删除或条目类似的任何内容。重点肯定是分析并为敏捷指标提供强大的报告引擎。

这并不排除在某些时候 LBAPI 或 Rally 服务的其他方面可以通过可跟踪性和跟踪/责任类型的功能得到增强的可能性。Rally 中增强的可追溯性是客户表达的需求，并且绝对是 Rally 的产品管理团队意识到的客户需求。

# iphone - CFBundleURLTypes 不会改变

> ID：14843250
> 
> 赞同：0
> 
> 时间：2013-02-12T22:42:38.477
> 
> 标签：iphone, ios, objective-c, url, plist

我目前正在尝试将 .plist 文件中 CFBundleURLTypes 的值更改为新值，但似乎没有任何效果，如果我调用旧值仍然存在

```
NSLog(@"%@", [[NSBundle mainBundle] objectForInfoDictionaryKey:@"CFBundleURLTypes"]); 
```

我在整个项目中搜索旧值，但旧值不存在。我清理了两次项目，但没有效果。被支持的 URL 方案是否被缓存在某处？谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:53:22.593

它没有被缓存；主包在 iOS 上是只读的，因为更改它会使签名无效。可能除非越狱，我认为没有办法在部署后更改信息 plist。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:48:22.257

解决了。问题是我向应用程序添加了一个额外的目标，并且该目标的额外 .plist 未包含在项目中，因此更改没有效果。

# javascript - PaperJS：当我在画布外时，事件被捕获

> ID：14843253
> 
> 赞同：1
> 
> 时间：2013-02-12T22:43:00.520
> 
> 标签：javascript, paperjs

我正在使用框架 Paper.js 在画布中绘制工具

我在使用 iPad 时遇到问题。当我用一根手指绘图时，这很有效。当我用两个手指绘制时，一个在画布中，一个在画布外，第二个手指事件被 onMouseDrag 事件捕获，并且从第一根手指到第二根手指有一些笔触，这对我来说不是一个好行为.

例子：

![在此处输入图像描述](../Images/d91461ba2a078a7ca7260a276fa84998.png)

一开始，我开始用一根手指画。在我把第二根手指放在画布外面之后，我继续移动我的第一根手指。这就是发生的事情。

当我在画布外时，你有什么想法可以避免事件吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-05T22:14:46.387

如果您不希望检测到外面的手指，请将目标限制在画布上。

```
 var canvasElement = document.getElementById('canvasId') //or element
    tool.onMouseDrag = function(event) {
           if (event.event.target === canvasElement) { //my target canvas was nested like this
               path.add(event.point);
               path.smooth();
           }
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T23:53:48.843

好吧，你可以测试 event.point.isInside(view.bounds)。如果您在绘图时对其进行测试，这可能会影响您的表现，但您可以在完成后剔除分数。

# lex - 词法分析器规则，“除”用于多字符串

> ID：14843256
> 
> 赞同：0
> 
> 时间：2013-02-12T22:43:17.610
> 
> 标签：lex

在 flex 中，我如何定义一个词法分析器规则，例如除了`$$`. 对于单个字符，定义为：

```
[^\$] 
```

对于`$$`, 是否等于`[^\$\$]`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:50:37.303

您有正确的单个字符，现在只需将其加倍：`[^\$][^\$]`. 这将接受任何两个不是“$”的字符。如果您想允许单个“$”，那么您需要提供它作为替代：`[^\$][^\$]|\$[^\$]|[^\$]\$`.

无论如何，这最终将成为 DFA，因此没有效率问题。如果您需要多次执行此操作，请为模式命名，以便您只需要使用一次。

# c++ - 我的向量交集函数有什么问题？

> ID：14843257
> 
> 赞同：0
> 
> 时间：2013-02-12T22:43:18.433
> 
> 标签：c++

我有一个接受两个向量 v1 和 v2 的函数。比较它们中的元素，并且应该从两者中返回公共元素。两个向量中都有 5 个字符串。

但是，它没有按预期工作。例如，我为 v1 输入：

```
dog cat lizard snake pig 
```

v2 有：

```
cat sheep cow snake fish 
```

结果是：

```
snake 
```

我怎样才能修复它，使输出看起来像下面这样？

```
cat snake 
```

我的代码

```
#include <iostream>
#include <vector>
#include <string>
using namespace std;
const int CAPACITY = 5;

template <typename t>
vector <t> inter(const vector <t> & v1, const vector <t> & v2)
{
    vector <t> v3;
    for(int i = 0; v1.size(); i++ )
    {
       for(int j= 0; v2.size(); j++)
       {
            if (v1[i] == v2[j])
            {
                v3.push_back(v1[i]);
            }
       }
    }
    return v3;

}

int main()
{
    vector<string> vec1;
    string a;
    cout << "Enter five stings for vector 1 \n"<< endl;
    for(int i = 0; i< CAPACITY; i++ )
    {
        cin >> a;
        vec1.push_back(a);
    }
    vector<string> vec2;
    string b;
    cout << "Enter five stings for vector 2 \n"<< endl;
    for(int i = 0; i< CAPACITY; i++ )
    {
        cin >> b;
        vec2.push_back(b);
    }

    cout<<inter(vec1, vec2);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T22:45:26.483

一种选择是对两个向量进行排序，然后使用[`std::set_intersection`](http://en.cppreference.com/w/cpp/algorithm/set_intersection).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T22:54:24.490

使用[std::set_intersection](http://en.cppreference.com/w/cpp/algorithm/set_intersection)算法要容易得多，它需要两个排序向量：

```
template <typename T>
std::vector<T> inter(const std::vector<T> & v1, const std::vector<T> & v2)
{
    std::vector<T> v3;   
    std::set_intersection(v1.begin(), v1.end(), v2.begin(), v2.end(), std::back_inserter(v3));
    return v3;
}

std::sort(vec1.begin(), vec1.end());   // sort vec1
std::sort(vec2.begin(), vec2.end());   // sort vec2
std::vector<std::string> v3 = inter(vec1, vec2); 
```

查看[示例](http://ideone.com/0IxFPE)代码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T22:45:32.913

好吧，你的`inter`函数有几个问题：

*   返回类型是单个元素
*   两个未使用的局部变量
*   仅针对另一组中相同位置的元素测试每个元素

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T22:49:26.357

对于 inter 函数，首先将返回类型更改为向量，然后使用您当前未使用的 v3 向量进行以下操作。

```
vector<t> inter(const vector <t> & v1, const vector <t> & v2)
{
    vector<t> v3;

    for(int i=0; i<v1.size(); i++)
    {
         for(int j=0; j<v2.size(); j++)
         {  
              if(v1[i] == v2[j])
              {
                    v3.push_back(v1[i])
              }
         }
    }
    return v3;
} 
```

要打印出内容，您必须将返回的向量分配给一个变量，然后循环遍历它......

```
vector<t> vec3 = inter(vec1, vec2);
for(int i=0; i<vec3.size(); i++)
{
    cout<<vec3.at(i)<<" ";
} 
```

这将返回一个包含所有答案的向量，请确保对循环进行更改，因为您的循环只检查它们是否在同一个地方，而不是它们是否都在向量中

请注意，这将在 {x, x, y} 和 {x, z , a} 的情况下产生重复的结果

# python - 在 Django URL 中，什么是正则表达式，以便“foo.com/Bar”与“foo.com/bar”相同

> ID：14843259
> 
> 赞同：1
> 
> 时间：2013-02-12T22:43:48.527
> 
> 标签：python, regex, django, case-sensitive

我的问题是人们一直链接到 example.com/FooBar，但实际链接是 example.com/foobar。

我目前的正则表达式是...

```
SLUG = '(?P<slug>[\w\d-]+)' 
```

我希望这是有道理的。我很惊讶我找不到这个问题已经问过了。也许我今天的谷歌 fu 很弱。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T22:45:52.907

正则表达式匹配两者。困难在于您可能会收到如下查询：

```
obj = MyModel.objects.get(slug=slug) 
```

哪个不匹配。

要解决此问题，请将查询更改为：

```
obj = MyModel.objects.get(slug=slug.lower()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T02:52:40.427

您的查询也可能像

```
obj = MyModel.objects.get(slug__icontains=slug) 
```

[icontains](https://docs.djangoproject.com/en/1.5/ref/models/querysets/#icontains)字段查找将进行不区分大小写的匹配

# ruby-on-rails - 简单 Rails 博客 - 发表评论忽略发表 ID [参数中的外部评论数组]

> ID：14843262
> 
> 赞同：0
> 
> 时间：2013-02-12T22:43:57.017
> 
> 标签：ruby-on-rails, ajax, rails-activerecord

我正在使用 Rails 构建一个简单的博客，并且正在遵循普通的 Rails 入门指南 ( [http://guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html) )。我在我的帖子的 show 方法中设置了一个评论表单，但是当我保存时，它没有将 page_id 保存在评论记录中。

```
= form_for [@post, @post.comments.build], :remote => true do |f|

  .field
    = f.label :name
    = f.text_field :name
  .field
    = f.label :extra_field, @page.rsvp_extra_field
    = f.text_area :extra_field
  .actions
    = f.submit 'Save' 
```

post.rb

```
class Post < ActiveRecord::Base

  has_many :comments, dependent: :destroy

  attr_accessible :comments_attributes, :comment_attributes

  accepts_nested_attributes_for :comments, :allow_destroy => true

end 
```

评论.rb

```
class Comment < ActiveRecord::Base

  belongs_to :post
  attr_accessible :extra_field, :name, :post_id, :phone

end 
```

我在 Rails 控制台中看到它正在发布它，但是`NULL`为 post_id 放置。有什么想法吗？

**编辑**

我根本没有改变我的创建方法：

```
 def create
    @comment = Comment.new(params[:comment])

    respond_to do |format|
      if @comment.save
        format.html { redirect_to post_url, notice: 'Comment was successfully created.' }
        format.json { render json: @comment, status: :created, location: @comment }
      else
        format.html { render action: "new" }
        format.json { render json: @comment.errors, status: :unprocessable_entity }
      end
    end
  end 
```

**编辑 2**

我认为我的参数是嵌套的，当我不希望它们成为......任何想法如何在“comment”数组中获取这个“post_id”？

```
Parameters: {"utf8"=>"✓", "authenticity_token"=>"eqe6C7/ND35TDwtJ95w0fJVk4PSvznCR01T4OzuA49g=",
"comment"=>{"name"=>"test", "extra_field"=>""}, "commit"=>"Save", "post_id"=>"8"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T14:20:54.393

因为在你的方法`create`中`CommentsController`，创建了与对象`Comment`无关的对象`Post`。`has_many`关系为相关对象提供了 3 种方法：

```
post.comments.create
post.comments.create!
post.comments.build(eq new method) 
```

添加你的`CommentsController`这个：

```
 ...
  def create
    @post = Post.find(params[:post_id])
    @comment = @post.comments.build(params[:comment])
  end
  ... 
```

# javascript - Sencha Touch 2-子元素在父元素中引用函数的正确方法？

> ID：14843265
> 
> 赞同：2
> 
> 时间：2013-02-12T22:44:21.840
> 
> 标签：javascript, reference, sencha-touch, sencha-touch-2, parent-child

我要问另一个新手问题。我遇到过多种方式让孩子引用在父类级别定义的函数和数据，但我不确定推荐的方式是什么。下面是我正在处理的一个例子，但这个话题对我来说通常很重要，因为我对父母和孩子的参考和范围没有很好的理解。如何从子元素的子元素引用父元素的函数和数据？

像往常一样，任何帮助将不胜感激。

穆罕默德

加利福尼亚州圣何塞

```
/******
This is a floating panel with a formpanel inside it, that has an email field and a button to process the email. 
When the button is tapped, I want to call the processEmails() function from the button.
******/
Ext.define('myapp.view.ForwardPanel', {
    extend  : 'Ext.Panel',
    xtype   : 'forwardPanel',
    initialize: function() {
        this.callParent(arguments);
        var btn = {
            xtype: 'button',
            ui: 'action',
            text: 'Send',
            listeners: {
                tap: function(){
                    processEmails(); //<- **How can I reference and call this function?**
                                 // This function is defined at the parent class level 
                                 // (indicated at the bottom of the code listing)
             }}
        };
        var form = {
            items: [{
                    xtype: 'fieldset',
                    instructions: 'Enter multiple emails separated by commas',
                    title: 'Forward this message.',
                    items: [ {
                            xtype: 'emailfield',
                            name: 'email',
                            label: 'Email(s)'
                    },btn]             // The button is added to the form here
                }]
        };
        this.add(form);
    },

    // this is the parent level function I want to call upon button tap.
    processEmails: function(){
        console.log('Processing email...');
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:32:05.197

我不确定“正确”的做法，但这是我会做的，也是我大部分时间在 Sencha 论坛和他们自己的代码中看到的：

```
Ext.define('myapp.view.ForwardPanel', {
  ...
  initialize: function() {
    this.callParent(arguments);
    var me = this;     // <---- reference to the "ForwardPanel" instance
    var btn = {
        xtype: 'button',
        ui: 'action',
        text: 'Send',
        listeners: {
          tap: function(){
            me.processEmails(); // <-- notice the "me" in front
          }
        }
    };
    ...
  },

  // this is the parent level function I want to call upon button tap.
  processEmails: function(){
    console.log('Processing email...');
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T03:56:48.667

您可以使用[**原型**](https://stackoverflow.com/questions/572897/how-does-javascript-prototype-work)来实现它：

```
myapp.view.MyView.prototype.processEmails.call(this); 
```

这是一个工作小提琴：[http ://www.senchafiddle.com/#MvABI](http://www.senchafiddle.com/#MvABI)

# node.js - lessc：找不到命令

> ID：14843266
> 
> 赞同：5
> 
> 时间：2013-02-12T22:44:29.840
> 
> 标签：node.js, less

我在 OS X.8 和 Node & LESS 的新手。我以为我之前安装了lessc，当我转到/usr/local/bin 时，我看到了lessc

但是对于我的生活，我无法运行它。每当我运行它时，我都会看到 -bash: lessc: command not found

所以我在[这里](https://stackoverflow.com/questions/9069104/lessc-binary-not-available-after-installing-less-via-npm)尝试了以下提示：

```
ln -s ~/.npm/less/1.3.3/package/bin/lessc my/local/dir 
```

我的本地目录恰好位于笔记本电脑的第二个驱动器上，路径如下：/Volumes/Mac17/Users/denis2/Sites/staging/assets/less

尽管如此，我尝试运行：

```
lessc boostrap.less 
```

仍然得到

```
-bash: lessc: command not found 
```

**我在这里完全迷失了，任何帮助都将是巨大的。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T06:37:10.467

只需按照以下步骤操作：

1.  使您的用户可以执行lessc（权限被拒绝意味着您无权运行），例如`chmod 755 lessc`
2.  将lessc的位置导出到PATH`export PATH=$PATH:/home/user/folder/path/less/bin`中（如存在lessc）
3.  使用较少`lessc boostrap.less`

您应该将 PATH 导出放在环境中，这样您每次登录时都不必这样做 请参见此处： [在 OS X 中设置环境变量？](https://stackoverflow.com/questions/135688/setting-environment-variables-in-os-x)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T22:47:39.757

如果输入just `lessc`，则在中搜索`$PATH`。出于安全原因，当前目录不在`$PATH`. 尝试

```
./lessc bootstrap.less 
```

或者，如果这不起作用，只需

```
~/.npm/less/1.3.3/package/bin/lessc bootstrap.less 
```

如果出现`Permission Denied`错误，您可能需要将该文件标记为可执行文件。采用

```
chmod a+x ~/.npm/less/1.3.3/package/bin/lessc 
```

要做到这一点。如果 node 不在您的`$PATH`.

# javascript - 如何从 URL 读取数据？

> ID：14843277
> 
> 赞同：0
> 
> 时间：2013-02-12T22:45:03.967
> 
> 标签：javascript

我在 javascript 中有一个函数，到目前为止我已经对其进行了硬编码：

```
function getCarData() 
{
    return 
    [
        {car: "Nissan", year: 2009, chassis: "black", bumper: "black"},
        {car: "Nissan", year: 2006, chassis: "blue", bumper: "blue"},
        {car: "Chrysler", year: 2004, chassis: "yellow", bumper: "black"},
        {car: "Volvo", year: 2012, chassis: "white", bumper: "gray"}
    ];
} 
```

现在..这只是对代码是否可以工作进行单元测试..但现在它正在工作..

我在后端生成这些数据并将其映射到服务器上的目录（目前是 localhost）

所以如果我去 localhost:5000/cardata 我有完全相同的数据，即

```
[
    {car: "Nissan", year: 2009, chassis: "black", bumper: "black"},
    {car: "Nissan", year: 2006, chassis: "blue", bumper: "blue"},
    {car: "Chrysler", year: 2004, chassis: "yellow", bumper: "black"},
    {car: "Volvo", year: 2012, chassis: "white", bumper: "gray"}
]; 
```

为了使这项工作，我应该对我的 javascript 文件进行哪些更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:52:27.983

```
$(document).ready(function()
{
    $.get('/cardata', function(data)
    {
        alert(data[0].car) //alerts "Nissan"
    });
}) 
```

不要忘记包含 jQuery 库

# perl - Postgres / SQL::Abstract“不在范围内”操作

> ID：14843291
> 
> 赞同：2
> 
> 时间：2013-02-12T22:45:48.530
> 
> 标签：perl, postgresql

Postgres 有一些很酷的范围运算符来处理范围： [http ://www.postgresql.org/docs/devel/static/functions-range.html](http://www.postgresql.org/docs/devel/static/functions-range.html)

...但似乎没有任何东西可以处理“不在”范围内。例如，**@>**运算符表示“包含元素”或“包含范围”。但同样有用的是**!@>**运算符，它似乎不存在。

如果我想说“查询日期不在范围内”，除了使用条件表达式之外还有其他解决方案吗？我正在使用 SQL::Abstract，它不支持不使用文字 SQL 的表达式，我想避免这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T02:49:36.247

我建议使用 NOT BETWEEN date AND date。

抱歉，您最终可能仍会使用 SQL 文字。

# sql-server - 使用 PHP 在数据库中存储图像时的安全/消毒

> ID：14843296
> 
> 赞同：0
> 
> 时间：2013-02-12T22:46:07.320
> 
> 标签：sql-server, database, image, codeigniter, sanitization

我正在寻找将应用程序的图像存储在 MSSQL 数据库中。（我知道关于这个或文件系统存储是否更好存在一些争论；不过那是另一个线程。）我正在考虑做类似于[http://forum.codecall.net/topic/40286-tutorial-storing的事情-images-in-mysql-with-php/](http://forum.codecall.net/topic/40286-tutorial-storing-images-in-mysql-with-php/)但在 CodeIgniter 中，类似以下内容：

```
foreach ($_FILES as $upload_name => $info) {
    if ($info['name']) {
        // Temporary file name stored on the server
        $tmpName  = $info['tmp_name'];  

        // Read the file 
        $fp      = fopen($tmpName, 'r');
        $data = fread($fp, filesize($tmpName));
        fclose($fp);

        //model code consolidated here for ease of question-asking
        $db = $this->load->database();
        $stmt = $db->insert('my_table', array('image' => $data));
    }
} 
```

我的问题主要是关于安全的。基本上，对于清理图像二进制数据插入与其他类型的字符串数据，我应该有什么特别的担忧吗？我从上面链接的站点中取出了代码中的 addlashes()，因为我知道 CI 的活动记录会自行进行一些清理，但我不知道拥有它是否更好（或完全做一些其他准备工作）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:14:22.817

如果我正确理解了您的问题，您不必担心它，只要您将 file_type（文件的 Mime 类型）与它一起存储，并将 Mime 类型与二进制数据一起存储。然后，每当您处理数据时，请确保将其与正确的 Mime 类型一起使用，这样即使他们上传了病毒脚本，您也可以确保它仅呈现为图像，而不是让您的服务器或浏览器处理它。

除此之外，我认为您不需要将上传文件拉入内存并尝试清理它。

# c - 通过 GDB 加载模块

> ID：14843301
> 
> 赞同：0
> 
> 时间：2013-02-12T22:46:23.340
> 
> 标签：c, linux, debugging, gdb, kernel-module

我在 linux 中使用 GDB 在用户空间中轻松调试 C 程序。现在，我正在研究内核空间模块，我认为 GDB 会以同样的方式工作。但是，运行命令不适用于 .ko 文件，我认为它不应该。话虽如此，如何将 GDB 用于内核模块？我尝试了在其他网站上找到的几个示例：

```
(gdb) set solib-search-path my_module.ko 
```

据说，这应该从模块代码中加载符号，但什么也没发生。谁能提供一些见解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:14:03.577

我不认为您可以轻松地使用 GDB 来调试内核模块

改用 KGDB：

[http://kgdb.linsyssoft.com/intro.htm](http://kgdb.linsyssoft.com/intro.htm)

# php - if语句语法和逻辑问题

> ID：14843306
> 
> 赞同：0
> 
> 时间：2013-02-12T22:46:36.470
> 
> 标签：php, datetime

我试图在平民黄昏时关闭我们的冲浪网络摄像头，但在这段代码底部的 if 语句中遇到了一些困难。我很确定这是一个语法问题，但看不到。

```
//Sunrise
//Set Zenneth to 96 which is Civilian Twilight start. Normally set to 90 for "normal" sunrise
$sunrise = date_sunrise(time(), SUNFUNCS_RET_STRING, 51.575363, -4.037476, 96, 0);
$sunrise = (integer) str_replace(":", "", $sunrise);
// echo "Sunrise: ".$sunrise."</br>";

//Sunset
//Set Zenneth to 96 which is Civilian Twilight start. Normally set to 90 for "normal" sunrise
$sunset = date_sunset(time(), SUNFUNCS_RET_STRING, 51.575363, -4.037476, 96, 0);
$sunset = (integer) str_replace(":", "", $sunset);
// echo "Sunset: ".$sunset."</br>";

// get the current date using a 24 digit hour without leading zeros, as an int

$current_time = (Integer) date('Gi');

if ((($current_time >= 0000 && $current_time <= $sunrise) && ($current_time >= $sunset
&& $current_time <= 2359)) && ($_SERVER["REQUEST_URI"] == "/webcams/langland-webcam" 
| $_SERVER["REQUEST_URI"] == "/webcams/caswell-webcam" || $_SERVER["REQUEST_URI"] ==
"/webcams/llangennith-webcam" || $_SERVER["REQUEST_URI"] == "/webcams/swansea-webcam"))
{
   // Cameras are offline

   return true;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:50:59.863

哎呀。这是一个巨大的`if`声明。我已经分解了一点：

```
if (
    (
           ($current_time >= 0000 && $current_time <= $sunrise)
        && ($current_time >= $sunset && $current_time <= 2359)
    //  ^^ Should be `||`
    ) && (
           $_SERVER["REQUEST_URI"] == "/webcams/langland-webcam"
        |  $_SERVER["REQUEST_URI"] == "/webcams/caswell-webcam"
    //  ^ Should be `||`
        || $_SERVER["REQUEST_URI"] == "/webcams/llangennith-webcam"
        || $_SERVER["REQUEST_URI"] == "/webcams/swansea-webcam"
    )
) { 
```

正如评论的那样，我注意到的第一件事是：您应该`||`在第一次比较时使用。此外，您稍后会使用单个管道`|`而不是`||`.

总的来说，我建议您稍微重构一下这段代码。也许将允许的 URI 移动到一个数组中，然后使用[`in_array()`](http://php.net/manual/en/function.in-array.php)它来检查它。像这样繁琐`if`的 s 可能会导致问题——正如您刚刚发现的那样。像这样的东西：

```
$validUris = array("/webcams/langland-webcam", "/webcams/caswell-webcam", "/webcams/llangennith-webcam", "/webcams/swansea-webcam");
if (in_array($_SERVER["REQUEST_URI"], $validUris)) {
    if (($current_time >= 0000 && $current_time <= $sunrise) || ($current_time >= $sunset && $current_time <= 2359)) {
        // Cameras
        return true;
    }
} 
```

# python - 如何为堆栈上溢/下溢创建错误消息

> ID：14843307
> 
> 赞同：0
> 
> 时间：2013-02-12T22:46:39.820
> 
> 标签：python

我是编程新手，我不确定如何解决这个问题。

我想在整数超过最大整数时引发错误......所以我导入了`sys`......最大整数是`2147483647`，最小值是`-2147483648`。我正在使用斐波那契数列创建一个列表，因此我尝试编写一些代码：

```
if i > 2147483647:
    print "Overflow Error" 
```

...同样适用于最小值。但是，它什么也没做，我仍然可以列出过去的数字`2147483647`。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:53:21.687

Python 长整数没有上限，它们仅限于您可以放入 RAM 中的内容：

```
>>> import sys
>>> sys.maxint * 2
18446744073709551614L 
```

该`sys.maxint`值告诉您 python 将在哪里开始使用该`long`类型而不是`int`表示整数；过渡是自动的。

在计算斐波那契数列时，您不太可能达到该内存限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T00:12:35.660

正如 Martijn 所说，您不会遇到任何错误（除非您正在处理非常大的数字或非常大的列表）。但是，Python 不允许您实际使用所有内存。如果使用太多内存（`MemoryError`），它将引发错误。

但是，如果您想对输入设置限制：

```
from sys import maxint
if i > maxint: raise ValueError('i cannot exceed 2147483647')
elif i < -1 * maxint: raise ValueError('i must be greater than -2147483647'). 
```

我不建议你提高`OverflowError`,`ValueError`更合适。

我不清楚这个问题，所以如果你试图检查列表大小是否大于`maxint`：

```
from sys import maxint
if len(i) > maxint: raise ValueError('i cannot exceed 2147483647 elements')
# you don't need a minimum value, as the length cannot be negative 
```

如果您尝试检查列表的最大值是否大于`maxint`：

```
from sys import maxint
if max(i) > maxint: raise ValueError('i cannot exceed 2147483647') 
```

# regex - 如何在非 ASCII 字符串中使用正则表达式？

> ID：14843308
> 
> 赞同：-2
> 
> 时间：2013-02-12T22:46:47.950
> 
> 标签：regex, perl, unicode

我有这个代码：

```
opendir(DIR, ".");
while (readdir DIR) {
  print $1, "\n" if $_ =~ /(\w+)/i;
} 
```

它当然只得到 ASCII 字符串。如何使用正则表达式在输出中获取另一个非 ASCII 字符串？

**UPD**

例如，如果在“。” 目录有两个文件`file`和`другойфайл`. 所以当我运行这个脚本时，我只得到`file`输出，但我想得到另一个非英文名称的文件`другойфайл`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:33:52.033

以下代码似乎有效：

```
use warnings;
use strict;
use Encode qw(decode);

my $dir = $ARGV[0] || '.';
opendir my $dh, $dir  or die "$0: $dir: $!\n";
while (readdir $dh) {
    $_ = decode 'UTF-8', $_;
    print $1, "\n" if /(\w+)/;
} 
```

当然，这假定您的文件系统以 UTF-8 存储名称。

输出：

```
file
другойфайл 
```

# php - 自动从表中选择随机行

> ID：14843309
> 
> 赞同：1
> 
> 时间：2013-02-12T22:46:54.790
> 
> 标签：php, mysql, random

我正在做一个需要后端服务的项目。我正在使用 MySQL 和 php 脚本来实现与服务器端的通信。我想在后端添加一个新功能，那就是能够每天从 table_members 自动生成一个包含 3 个“幸运”成员的表。换句话说，我希望 MySQL 从一个表中选择 3 个随机行并将这些行添加到另一个表中（如果可能的话）。我明白，如果在该表上手动调用 RAND() 函数，我可以实现这一点，但是......会很痛苦！

有什么办法可以实现上述吗？

更新：

在其他用户的评论/建议之后，这是我的解决方案

```
CREATE EVENT `draw` ON SCHEDULE EVERY 1 DAY STARTS '2013-02-13 10:00:00' ON COMPLETION NOT PRESERVE ENABLE DO 
INSERT INTO tbl_lucky(`field_1`) 
SELECT u_name 
FROM tbl_members 
ORDER BY RAND() 
LIMIT 3 
```

我希望这对其他人有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:24:24.357

您可以使用`INSERT ... SELECT`并选择 3`ORDER BY RAND()`行`LIMIT 3`

有关 INSERT ... SELECT 语句的更多信息 -[请参阅](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)

也可以使用 MySQL[事件](http://dev.mysql.com/doc/refman/5.1-olh/de/create-event.html)（从 5.1.6 开始提供）自动执行这项日常工作

# ruby - 延迟加载：当外键的名称与模型不同时，如何执行 Model.include(:name)？

> ID：14843312
> 
> 赞同：0
> 
> 时间：2013-02-12T22:47:21.250
> 
> 标签：ruby, ruby-on-rails-3

我想将用户延迟加载到 Active Record 中的目标对象中，如下所示：

目标.include(:user)

但问题是 user_id 外键被命名为“targeted_user_id”，而不是“user_id”。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:59:22.967

```
class Target < ActiveRecord::Base
    belongs_to :user, foreign_key: 'targeted_user_id'
end

Target.includes(:user) 
```

[这里](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)很好的解释

# java - 使用 GSON 反序列化多个内部类

> ID：14843322
> 
> 赞同：4
> 
> 时间：2013-02-12T22:47:55.030
> 
> 标签：java, json, serialization, gson

我正在尝试使用 gson 反序列化来自 JSON 对象的数据。我在 1) 设计课程时遇到了麻烦。2) 从内部列表对象中获取一个空对象。

这是 JSON 对象的示例

```
{
  "spatialReference" : {
    "wkid" : 102113
  },
  "candidates" : [
    {
      "address" : "202 S Van Ness Ave, San Francisco, CA, 94110",
      "location" : {
        "x" : -13627444.2697,
        "y" : 4546249.2471000031
      },
      "score" : 85.969999999999999,
      "attributes" : {
        "Loc_name" : "US_RoofTop",
        "Score" : 85.969999999999999,
        "Match_addr" : "505 S Van Ness Ave, San Francisco, CA, 94110",
        "House" : "505",
        "Side" : "R",
        "PreDir" : "S",
        "PreType" : "",
        "StreetName" : "Van Ness",
        "SufType" : "Ave",
        "SufDir" : "",
        "City" : "San Francisco",
        "State" : "CA",
        "ZIP" : "94110",
        "X" : -122.417416,
        "Y" : 37.764772999999998,
        "Disp_Lon" : -122.416991,
        "Disp_Lat" : 37.764809999999997,
        "Addr_type" : "StreetAddress",
        "Province" : "",
        "Postal" : "",
        "FromAddr" : "",
        "ToAddr" : "",
        "ZIP4" : "",
        "ZIP4_TYPE" : "",
        "User_fld" : "",
        "Ldu" : "",
        "xmin" : 0,
        "xmax" : 0,
        "ymin" : 0,
        "ymax" : 0
      }
    },
    {
      "address" : "505 Van Ness Ave, San Francisco, CA, 94102",
      "location" : {
        "x" : -13627778.172800001,
        "y" : 4548412.0926000029
      },
      "score" : 100,
      "attributes" : {
        "Loc_name" : "US_Streets",
        "Score" : 100,
        "Match_addr" : "505 Van Ness Ave, San Francisco, CA, 94102",
        "House" : "",
        "Side" : "L",
        "PreDir" : "",
        "PreType" : "",
        "StreetName" : "Van Ness",
        "SufType" : "Ave",
        "SufDir" : "",
        "City" : "San Francisco",
        "State" : "CA",
        "ZIP" : "94102",
        "X" : -122.42041500000001,
        "Y" : 37.780130999999997,
        "Disp_Lon" : 0,
        "Disp_Lat" : 0,
        "Addr_type" : "StreetAddress",
        "Province" : "",
        "Postal" : "",
        "FromAddr" : "501",
        "ToAddr" : "525",
        "ZIP4" : "",
        "ZIP4_TYPE" : "",
        "User_fld" : "",
        "Ldu" : "",
        "xmin" : 0,
        "xmax" : 0,
        "ymin" : 0,
        "ymax" : 0
      }
    }] 
```

这是我使用 java 为 json 对象与 gson 一起使用的类的示例

```
 public class Response {

    public Response()
    {}

    SpatialReference spatial;

    public List<Candidates> candidate;

    public class Candidates
    {
        public Candidates()
        {}

        @SerializedName("address")
        public String address;

        Location location;

        @SerializedName("score")
        public double score;

        Attribute attributes;

        Double getScore()
        {
            return score;
        }

    }

    public class Attribute {

        public Attribute()
        {}

        @SerializedName("Disp_Lon")
        public double dispLong;

        @SerializedName("Disp_Lat")
        public double dispLat;

    }

    public class Location {

        public Location()
        {}

        @SerializedName("x")
        public double x;

        @SerializedName("y")
        public double y;

    }

    public class SpatialReference {

        SpatialReference()
        {}

        @SerializedName("wkid")
        public String wkid;

    }

} 
```

这是使用 gson 的示例代码

```
 Gson gson= new Gson()

        response1= gson.fromJson(reader, Response.class);

        return response1; 
```

任何帮助将不胜感激，我对 GSON 和检索 JSON 对象非常陌生。非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T23:26:59.147

我会摆脱内部类定义，除非有一些非常令人信服的理由来拥有它们。如果命名空间是目标，那么至少使它们成为静态嵌套类定义。这也将使它们更容易反序列化。

[我在http://programmerbruce.blogspot.com/2011/06/gson-v-jackson.html#TOC-Nested-Classes-including-Inner-Clas](http://programmerbruce.blogspot.com/2011/06/gson-v-jackson.html#TOC-Nested-Classes-including-Inner-Clas)上发布了反序列化为静态嵌套类和内部类的示例

# c# - 如何在课堂上调用复选框

> ID：14843325
> 
> 赞同：0
> 
> 时间：2013-02-12T22:48:03.377
> 
> 标签：c#, c#-4.0

我尝试按照以下过程设置一些条件

```
public float GetSimilarity(int doc_i, int doc_j)
    {
        float[] vector1 = GetTermVector(doc_i);
        float[] vector2 = GetTermVector(doc_j);

      if (checkbox1.checked == true )

         return Similarties.ComputeDiceSimilarity(vector1, vector2);

      else if (checkbox2.checked == true )

        return Similarties.ComputeCosineSimilarity(vector1, vector2);

      else 

         return Similarties.ComputeJaccardSimilarity(vector1, vector2);
    } 
```

，但问题是在类中无法识别复选框。请问如何克服这个问题？. 抱歉编程不佳，并在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:53:59.247

为什么你需要直接访问不同类的方法中的控件来计算一些东西？将 UI 与您的业务逻辑硬链接将避免可重用代码。

您可以将变量作为参数传递：

```
public float GetSimilarity(int doc_i, int doc_j, 
    bool compDiceSimilarity, bool compCosineSimilarity)
{
    float[] vector1 = GetTermVector(doc_i);
    float[] vector2 = GetTermVector(doc_j);

    if (compDiceSimilarity)
        return Similarties.ComputeDiceSimilarity(vector1, vector2);
    else if (compCosineSimilarity)
        return Similarties.ComputeCosineSimilarity(vector1, vector2);
    else
        return Similarties.ComputeJaccardSimilarity(vector1, vector2);
} 
```

顺便说一句，您应该为控件和变量使用更有意义的名称。

# macros - 如何在我的 elisp 宏中解构不同长度的 &rest 参数？

> ID：14843326
> 
> 赞同：2
> 
> 时间：2013-02-12T22:48:07.957
> 
> 标签：macros, lisp, elisp

我有一个程序，它将一块数据和一个规则列表作为输入，同时应用一组标准规则和作为数据块输入的规则。两个输入的大小可能会有所不同。

我希望能够编写这样的规则列表：

```
(rule-generating-macro
  (rule-1-name rule-1-target
    (rule-action-macro (progn actions more-actions)))
  (rule-2-name rule-2-target
    (rule-action-macro (or (action-2) (default-action))))
  ;; more rules
 ) 
```

现在，规则更加冗长——它们看起来更像

```
(defvar rule-list
  `((rule-1-name rule-1-target
      ,@(rule-action-macro (progn actions more-actions)))
    (rule-2-name rule-2-target
      ,@(rule-action-macro (or (action-2) (default-action))))
  ;; more rules
 ) 
```

后一种形式对我来说看起来更丑，但我不知道如何编写一个可以处理可变长度`&rest`参数、迭代它并返回转换后的结构的宏。使用 a`defun`而不是 a`defmacro`并不是真的在桌面上，因为（希望示例显示）我试图控制规则列表的评估，而不是在我的程序第一次看到它时评估列表，并且一旦你需要控制评估，你在`defmacro`领域。在这种情况下，棘手的问题是`rule-action-macro`部分 - 让解释器阅读并使用其扩展值是有问题的。

如何创建一个处理可变长度参数的宏，以便以简洁的方式编写规则列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T23:32:57.197

`defmacro`将很乐意接受一个`&rest`参数（请参阅为 Emacs Lisp[定义宏](http://www.gnu.org/software/emacs/manual/html_node/elisp/Defining-Macros.html)和为 Common Lisp定义[宏 Lambda 列表）。](http://www.lispworks.com/documentation/HyperSpec/Body/03_dd.htm)

然后你可以在宏体中用它做几乎任何你想做的事情——例如，迭代它。请记住，宏不仅仅是反引号！

例如：

```
(defmacro multidefvar (&rest vars)
  (let ((forms (mapcar (lambda (var) `(defvar ,var)) vars)))
    `(progn ,@forms)))

(macroexpand '(multidefvar a b c d))
==> (PROGN (DEFVAR A) (DEFVAR B) (DEFVAR C) (DEFVAR D)) 
```

# jquery - 带有前缀覆盖对象的 jQuery 数据属性

> ID：14843327
> 
> 赞同：1
> 
> 时间：2013-02-12T22:48:10.180
> 
> 标签：jquery, jquery-data

我已经构建了自己的自定义 jQuery 插件，并且正在尝试使用 HTML 数据属性覆盖默认选项。我为每个添加了一个前缀（寻呼机），所以我的最终标记是：

```
<div class="pager" data-pager-page="1"></div> 
```

现在说我有一个对象：

```
var options = { page: 0 }; 
```

我想通过这样说来覆盖这些选项：

```
var o = $.extend({}, options, $('.pager').data('pager')); 
```

但是，这不起作用。在做了一点调试后，我发现 $('.pager').data('pager') 返回未定义。如果我说：

```
$('.pager').data(); 
```

这将返回以下对象：

```
{ pagerPage: 1 } 
```

我想我需要一些方法来将此对象转换为我需要的对象。请注意，我想添加许多选项，代码应该可以处理这个，而无需我处理每个单独的选项。

我相信其他人也遇到了这个问题，我会很感激任何帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:45:51.943

万一有人感兴趣，下面的代码就成功了：

```
var data = $('.pager').data();

for (var p in data) {
    if (data.hasOwnProperty(p) && /^pager[A-Z]+/.test(p)) {
        var shortName = p[5].toLowerCase() + p.substr(6);
        data[shortName] = data[p];
    }
}

var o = $.extend({}, options, data); 
```

注意：将 5 替换为前缀的长度，将 6 替换为长度 + 1。希望这会有所帮助。

感谢凯文为我指明了正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-28T18:01:55.933

```
<div id="test" data-key="xyz">helloooooo</div>

<script type="text/javascript">
var value = $("#test").data("key");
alert(value); //This will show you "xyz"
</script> 
```

我认为它在 HTML4 和 HTML5 中是正确的；

# c# - 自定义活页夹工作正常，但模型未更新

> ID：14843328
> 
> 赞同：0
> 
> 时间：2013-02-12T22:48:11.663
> 
> 标签：c#, model-view-controller, model-binding

我有一个模型，它看起来像这样：

```
public class MyModel {
   public List<SomeBaseClass> list {get; set;}
   public string SomeProperty {get; set;}
} 
```

where`SomeBaseClass`实际上是一个基类，列表可以包含不同类型的项目，但所有这些类型都继承自`SomeBaseClass`.

为了确保我的模型正确绑定，我必须实现一个自定义绑定器，它根据表单数据填充模型。

```
public class MyModelBinder: DefaultModelBinder
{
   public override object BindModel(ControllerContext cntxt, ModelBindingContext bindingContext)
   {
        var model = new MyModel {
            list = new List<SomeBaseClass>(),
            SomeProperty = ...
        };

        ... // some data mangling and type twisting here

        return model; // here the debugger shows that the model's list is populated properly based on the form data.
    }
} 
```

但是当一个视图调用一个动作时，我的模型是不完整的：

```
public string SomeAction(MyModel model) { // <~~ It calls the custom binder before coming to here, which is correct
   // As the result, the model variable is an instance of MyModel, but the list is null
   return "somethhing";
} 
```

在 action 方法中，我收到了`list`属性设置为**null**的模型对象。这很奇怪，因为绑定器被正确调用并且它正确地填充了模型及其所有属性。

我无法弄清楚我做错了什么。

**PS**当我尝试调用`UpdateModel<MyModel>(model);`action 方法时，它会抛出“无法更新 MyModel 类型的模型”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:51:22.787

好，我知道了。我必须在模型类声明旁边添加 binder 属性，以确保在将模型传递给 action 方法时调用 binder。

```
[ModelBinder(typeof(MyModelBinder))]
public class MyModel
{
...
} 
```

这并不明显，因为即使此属性不存在，仍会调用自定义活页夹，但由于某种原因其输出未发送到操作，而是使用默认活页夹的输出。

# android - 提高我的最低 API 级别的更好方法？

> ID：14843341
> 
> 赞同：3
> 
> 时间：2013-02-12T22:49:03.967
> 
> 标签：android, api, sdk, android-fragments, android-preferences

因此，我只需要将 Preference 的最低 API 级别提高到 11（addpreferenceresource 已折旧）——结果 9-10 占据了 50% 的市场份额。所以我的问题是，最好只是抑制警告以迎合姜饼市场，还是有其他方法可以在不使用偏好片段的情况下做出我的偏好参考？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T22:58:37.023

我将实现这两​​种类型（一种适用于 11+ 和一种适用于 10-），然后对它们使用条件检查。[这在这个答案](https://stackoverflow.com/a/10258323/1438733)中写得很详细。

基本上，您最终会`OtherPreferencesActivity`使用. *（您的 APK 不会因包含此已弃用的代码而中断，只要您使用版本检查，以便将来如果/当它被删除时，它不会尝试找到它。）*`PreferenceFragment``PreferencesActivity``PreferenceActivity`

 *```
if (Build.VERSION.SDK_INT < 11) {
    startActivity(new Intent(this, PreferencesActivity.class);
} else {
    startActivity(new Intent(this, OtherPreferencesActivity.class);
} 
```

请记住，您将希望他们尽可能地使用彼此的方法，这样您就不会最终重复代码。

最后提示：在`@TargetApi(11)`这里`@SuppressWarnings("deprecation")`会派上用场。请**注意**，这样做不会忽略其他弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:56:42.800

“折旧”并不意味着你不能使用它，如果你运行代码会破坏你的系统。意思是官方不推荐使用，这个方法可能会从api中删除。未来，但我们不知道什么时候。所以我会说现在在这种情况下使用它是节省的。*

# django - Django：当我需要远程访问 ORM 时该怎么办

> ID：14843342
> 
> 赞同：0
> 
> 时间：2013-02-12T22:49:22.767
> 
> 标签：django

基本上，我有两个 django 服务器（django v 1.2）：

服务器 1 有一堆模型，本地数据库，远程数据库访问服务器 2 中的 ModelA。服务器 2 有 ModelA

我想在服务器 1 中为 ModelA 使用 ModelA.objects.get() 和 django ORM API。我是否应该将模型.py 从服务器 2 复制到服务器 1？通过复制models.py，我可以使用ORM方法并信任我设置的数据库路由器在同步数据库时不会做奇怪的事情。

这似乎足够好，对吧？我看不出有任何理由使用 django-piston 或那些其他的 API 包，因为在这些情况下，我仍然必须添加所有额外的代码来识别模型。我什至深入研究 API 包的主要原因是因为我想知道是否有一种干净的方法可以在不复制代码的情况下提供 ORM 访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:25:49.850

复制代码很常见。您可以将设置配置为指向您想要的任何数据库服务器。

随着应用程序的增长，必须添加网络服务器是很常见的。可以做到这一点的一种方法是将您的代码库复制到另一台机器并在反向代理后面运行它。

这意味着完全相同的代码在不止一台机器上运行，共享一个数据库后端。

Django 提供了一个您可能想要查看的“应用程序”结构。您可以打包应用程序并将其分发到另一个项目。

# asp.net - 如何针对 WebPartBase 类编写单元测试并模拟控件？

> ID：14843347
> 
> 赞同：0
> 
> 时间：2013-02-12T22:49:39.797
> 
> 标签：asp.net, unit-testing, tdd, web-parts

我有一堆**WebPartBase**类，我试图在其上调用一个方法。一些方法调用 UI 上的控件。我想以某种方式存根这些控件，以便在尝试对其设置值时不会引发异常。有谁知道这样做的好方法？如果它们被初始化也很好，但我不确定如何在不运行 Web 服务器的情况下初始化它们。

我的测试代码如下所示。**IntializeOnAdd()是****KPIWebPartBase**上的一个方法，KPIWebPartBase**继承**自**WebPartBase**。

 ****```
 [TestMethod]
        public void InvokeAllWidgets()
        {
            var user = new User("adminqaphi");
            user.CustomerID = TestConfig.ClientID;

            var classes = typeof(KPIWebPartBase)
                .Assembly
                .GetTypes()
                .Where(t => t.IsSubclassOf(typeof(KPIWebPartBase)) && !t.IsAbstract );
            foreach (var c in classes)
            {
                Console.WriteLine(c.Name);
                var instance = (KPIWebPartBase)Activator.CreateInstance(c);
                foreach (var billingMetric in Enum.GetValues(typeof(BillingMetric)))
                {
                    instance.CurrentUser = user;
                    instance.BillingMetric = (BillingMetric)billingMetric;

                    if (instance is StartEndKPIWebPartBase)
                    {
                        var startEndKPI = (StartEndKPIWebPartBase)instance;
                        startEndKPI.StartDate = new DateTime(2007, 1, 1);
                        startEndKPI.EndDate = new DateTime(2008, 1, 1);
                    }

                    instance.InitializeOnAdd();
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:15:01.210

我会为它们创建接口（如果可能的话）并使用[moq](http://code.google.com/p/moq/)为外部依赖项创建 Mocks 或存根。

InvokeAllWidgets() 测试什么行为？

对评论的回应：我认为您也应该模拟数据库，以便您只测试代码（单元）的“内部”逻辑。否则，您将最终测试数据库，我想这不是您想要的。如果您确实调用了数据库，如果其中的某些数据发生变化会发生什么？这会让你的测试失败吗？如果是这样，我认为您正在进行集成测试而不是单元测试。在单元测试中尝试模拟所有外部依赖项并测试您自己的逻辑（会出现什么问题？）。如果您的代码不允许您像这样测试它，请更改它！****

# configuration - ZF2 配置注入与否？

> ID：14843351
> 
> 赞同：0
> 
> 时间：2013-02-12T22:50:20.290
> 
> 标签：configuration, dependency-injection, zend-framework2

我在谷歌上搜索了很多，并尽可能多地阅读了这个主题，但我在包括这里在内的任何地方都找不到我的问题的直接答案。我的 ZF2 应用程序包含大约 7 个不同的模块。其中 5 个模块需要访问相同的数据库配置。应用程序本身有一个包含大约 124 个不同表的数据库。所以这里的想法是找到合适的解决方案，考虑到设置，编写最少的代码。

我想要做的是创建一个特定的类来与数据库交互。业务逻辑保存在模块中的位置，并注意控制器以使所有内容更加抽象且易于维护。我的意思是控制器 X 应该能够创建例如 (Application\Model\DBInterface) 的新实例并使用模型函数来执行插入删除更新连接选择等等。我想这样做的原因是，所有安装的模块都可以使用相同的接口，而不必到处编写无休止的 DI 语句。因此，我需要一个示例，说明如何将数据库的配置（当前在 module.config.php + local.php(username / pw) 内部）传递给 Application\Model\DBInterface dbConfig 变量，

或者，如果存在这种方式，我可能会从 Application\Model\DBInterface 获取配置。

如果以上都不可能，那么我总是可以通过读取数据库详细信息的 ini 文件并以这种方式实例化我的数据库适配器来回到旧的做事方式。

请记住，我不会在控制器中注入任何东西，因为控制器只是*使用*$db = new \Application\Model\DBInterface() 所以注入控制器根本没有多大意义。

有没有更好的方法来做到这一点/优化/我做错了吗？任何人都可以分享一些细节。我已经在这方面花费了太多时间，并且肯定需要帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T07:56:20.817

好的，所以@Ocramius 只是让我知道我对它的误解是什么，`initializers`并帮助我理解它。因此，这是您的问题的一个可能有效的解决方案。我对您的问题的理解是：

**“如何为所有实现 DbInterface 的模型设置 DbAdapter”**。这就是你的做法：

* * *

**第 1 步：**为`invokables`所有实现`DbInterface`. `factory`为默认创建`Zend\Db\Adapter\Adapter`一个，然后`initializer`为您的`DbInterface`

**模块.php`getServiceConfig()`**

```
return array(
    'invokables' => array(
        'application-model-one' => 'Application\Model\One',
        'application-model-two' => 'Application\Model\Two'
    ),
    'factories' => array(
        'Zend\Db\Adapter\Adapter' => 'Zend\Db\Adapter\AdapterServiceFactory'
    ),
    'initializers' => array( 
        'DbInterfaceInitializer' => function($instance, $sm) {
            if ($instance instanceof \Application\Model\DBInterface) {
                $instance->setDbAdapter($sm->get('Zend\Db\Adapter\Adapter'));
            }
        },
    )
) 
```

**Zend\Db\Adapter\Adapter**使用顶级配置数组键`'db'`自动注入 dbParams

* * *

**第 2 步：**创建实现接口的类

**应用\模型（一|二|N）.php**

```
namespace Application\Model;

class One implements DbInterface, \Zend\Db\Adapter\AdapterAwareInterface
{
    /**
     * @var \Zend\Db\Adapter\Adapter $dbAdapter
     */
    protected $dbAdapter;

    public function setDbAdapter(\Zend\Db\Adapter\Adapter $dbAdapter) {
        $this->dbAdapter = $dbAdapter;
    }

    public function getDbAdapter() {
        return $this->dbAdapter;
    }

    // More of your business logic or data here
} 
```

* * *

**第 3 步：**使用 Controller 中的 ServiceLocator 访问这些类

**SomeController.php`someAction()`**

```
$dbOne = $this->getServiceLocator()->get('application-model-one');
$dbTwo = $this->getServiceLocator()->get('application-model-two');
// Adapter will automatically be injected 
```

当`invokable`从 ServiceManager访问时，`initializer`将被调用。然后初始化程序将自动调用`Zend\Db\Adapter\Adapter`，然后从配置键中获取参数`'db'`

* * *

您可以从[教程 Application](http://framework.zend.com/manual/2.0/en/user-guide/database-and-models.html#using-servicemanager-to-configure-the-table-gateway-and-inject-into-the-albumtable)以及 [samsonasik 的博客中获得更多信息：ServiceManager Cheat-Sheet](http://samsonasik.wordpress.com/2013/01/02/zend-framework-2-cheat-sheet-service-manager/)

# java - 如何从数字字符串结果中删除逗号？

> ID：14843353
> 
> 赞同：0
> 
> 时间：2013-02-12T22:50:29.863
> 
> 标签：java, string

我有`result`，它是文本或数值，例如：

```
String result;
result = "avsds";
result = "123";
result = "345.45"; 
```

有时结果还包含逗号，例如：

```
result = "abc,def";
result = "1,234"; 
```

`result`我只想在它是数值时删除逗号，而不是在它是简单文本时。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:55:12.507

这是你的答案：

```
 String regex = "(?<=[\\d])(,)(?=[\\d])";
    Pattern p = Pattern.compile(regex);
    String str = "Your input";
    Matcher m = p.matcher(str);
    str = m.replaceAll("");
    System.out.println(str); 
```

正如您所要求的，这只会影响数字，而不是字符串。

尝试在您的主要方法中添加它。或者试试这个，它接收输入：

```
 String regex = "(?<=[\\d])(,)(?=[\\d])";
        Pattern p = Pattern.compile(regex);
        System.out.println("Value?: ");
            Scanner scanIn = new Scanner(System.in);
            String str = scanIn.next();
        Matcher m = p.matcher(str);
        str = m.replaceAll("");
        System.out.println(str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T22:53:47.110

最简单的方法是使用两个正则表达式。第一个确保它是数字的（类似于`[0-9.,]*`），第二个是清理它（`result.replaceAll("/,//")`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T01:22:43.817

在删除不需要的字符后，您可以尝试首先使用任何数字类（Integer、Double 等）解析字符串，如果解析成功，则它是一个数字，您可以从原始字符串中删除不需要的字符。

在这里，我使用了 BigInteger，因为我不确定您要求的精度。

```
 public static String removeIfNumeric(final String s, final String toRemove) {
     final String result;
     if (isNumeric(s, toRemove)) {
         result = s.replaceAll(toRemove, "");
     } else {
         result = s;
     }
     return result;
  } 

  public static boolean isNumeric(final String s, final String toRemoveRegex) {
      try {
          new BigInteger(s.replaceAll(toRemoveRegex, ""));
          return true;
      } catch (NumberFormatException e) {
          return false;
      }
  } 
```

# map - 如何使用文本文件中的矩阵在 xna 4 中制作地图

> ID：14843357
> 
> 赞同：0
> 
> 时间：2013-02-12T22:50:44.950
> 
> 标签：map, matrix, xna, 2d, tile

我正在尝试通过逐行读取文本文件来制作地图（因为我无法找到如何逐字执行该操作）。所以我制作了一个看起来像“33000000111”的map00.txt（每个数字都是一行，前两行是列数和行数，所以我加载它的矩阵看起来像 000 000 111 ）。现在我应该在底部绘制 3 个图块（1 = 绘制图块）。我通过在矩阵 * 窗口高度（宽度）/矩阵行数（列）中的位置绘制瓷砖来做到这一点。 **问题：**我无法获得当前窗口宽度和高度的正确参数。

加载瓷砖的代码：

```
 public int[,] LoadMatrix(string path) 
    {
        StreamReader sr = new StreamReader(path);
        int[,] a = new int[int.Parse(sr.ReadLine().ToString()), 
                           int.Parse(sr.ReadLine().ToString())];

        for(int i = 0; i < a.GetLength(0); i++)
            for (int j = 0; j < a.GetLength(1); j++)
            { a[i, j] =int.Parse(sr.ReadLine().ToString()); }

        sr.Close();
        return a;
    } 
```

绘制瓷砖的代码：

```
 public void DrawTiles(SpriteBatch sp, GraphicsDeviceManager gdm)
    {
        for(int i = 0; i < matrix.GetLength(0); i++)
            for(int j = 0; j < matrix.GetLength(1); j++)
            {
                if (i == 1)
                {
                    sp.Draw(tile, 
                            new Rectangle(j * (gdm.PreferredBackBufferWidth / 3),//matrix.GetLength(1),
                                          i * (gdm.PreferredBackBufferWidth / 3),//matrix.GetLength(0),
                                          gdm.PreferredBackBufferWidth / matrix.GetLength(1),
                                          gdm.PreferredBackBufferHeight / matrix.GetLength(0)),
                            Color.White);
                }
            }
    } 
```

但结果是它们被绘制在屏幕底部上方约 40 像素处！

我尝试使用 GraphicsAdapter.DefaultAdapter.CurrentDisplayMode.Height(Width) 但我得到了相同的结果。当我输入应该（理论上）宽度/列和高度/行的计算数字时，我得到了我想要的。所以任何建议都会非常受欢迎，因为我在谷歌和 Stack Overflow 上停留了很长时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:58:15.343

这是您的 Draw 代码的重新设计版本，它应该可以工作：

```
public void DrawTiles(SpriteBatch sp, GraphicsDeviceManager gdm)
{ 
    //You would typically pre-compute these in a load function
    int tileWidth = gdm.PreferredBackBufferWidth / matrix.GetLength(0);
    int tileHeight = gdm.PreferredBackBufferWidth / matrix.GetLength(1);

    //Loop through all tiles
    for(int i = 0; i < matrix.GetLength(0); i++)
    {
        for(int j = 0; j < matrix.GetLength(1); j++)
        {
            //If tile value is not 0
            if (matrix[i,j] != 0)
            {
                 sp.Draw(tile, new Rectangle(i * tileWidth, j * tileHeight, tileWidth, tileHeight), Color.White);
            }
        }
  }
} 
```

# oracle - 如何使用 Sqoop 将表从 RDBMS 导入 Zebra 格式的 HDFS？

> ID：14843359
> 
> 赞同：0
> 
> 时间：2013-02-12T22:50:54.060
> 
> 标签：oracle, formatting, rdbms, hdfs, sqoop

Sqoop 有助于在关系数据库（例如 Oracle DB）和 Hadoop 之间复制数据。

但是我怎样才能让它以 Zebra 格式存储数据呢？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:59:27.370

Sqoop 目前不支持 Zebra 格式。我鼓励您提交新的[jira](https://issues.apache.org/jira/browse/SQOOP)请求此类支持。

# bash - 如何在 Bash 中将变量放入字符串

> ID：14843362
> 
> 赞同：0
> 
> 时间：2013-02-12T22:50:59.427
> 
> 标签：bash, variables, expression

我正在编写一个 Bash 脚本，并且试图找出一种方法让 FFmpeg 识别`-force_key_frames`选项中的全局变量。该`-force_key_frames`选项可以将正则表达式作为参数，允许每 5 秒强制一个关键帧等功能：

```
-force_key_frames 'expr:gte(t,n_forced*5)' 
```

这适用于每 5 秒强制一个关键帧，但我不知道如何每 x 秒强制一个关键帧，x 是用户从脚本的其余部分获得的输入变量。我正在尝试的确切 FFmpeg 命令是：

```
ffmpeg -i "video.mp4" -vcodec: libx264 -b:v 500k \
-force_key_frames 'expr:gte(t,n_forced*${SEG_TIME})' -s:v 640x480 \
-r 29.97 -pix_fmt yuv420p -map 0 -f segment -segment_time ${SEG_TIME} \
-reset_timestamps 1 -y "output%01d.mp4" 
```

该变量`$SEG_TIME`由脚本设置为 5，但`-force_key_frames`选项中的正则表达式似乎不喜欢该`$SEG_TIME`变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T01:26:53.183

这部分

```
'expr:gte(t,n_forced*${SEG_TIME})' 
```

您的单引号导致字符串`${SEG_TIME}`按字面意思传递而不是解释为变量，试试这个

```
"expr:gte(t,n_forced*${SEG_TIME})" 
```

# jqgrid - jQWidget - jqxGrid 多个标题行，例如 jqGrid

> ID：14843364
> 
> 赞同：1
> 
> 时间：2013-02-12T22:51:00.800
> 
> 标签：jqgrid, jqxgrid, jqwidget

我想显示多个标题行，这样我的顶部标题行组将跨越一组较低的标题行列名。我知道你可以在 jqGrid 中做到这一点。它的一个例子是：

```
jQuery("#samples").jqGrid('setGroupHeaders', { 
 useColSpanStyle: true, 
 groupHeaders:[ 
    {startColumnName: 'totalweight', numberOfColumns: 6, titleText: 'Count'}, 
    {startColumnName: 'bellyburst', numberOfColumns: 3, titleText: 'Damaged'}, 
    {startColumnName: 'a', numberOfColumns: 6, titleText: 'Weight'}, 
    {startColumnName: 'fish', numberOfColumns: 2, titleText: 'Quality'}, 
 ] 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T15:28:13.280

在 jqxGrid 中从未见过这样的功能。如果您的网格非常静态，您可以尝试手动添加该行，但这可能会成为一个麻烦的解决方案。如果您尝试这样做，请务必将您的 html 放在 jqxGrid div 之外，因为太多东西在该 div 内移动。他们为您的 html 蒙皮，因此它看起来像是网格的一部分。

另一种解决方案可能是使用副标题。您可以在定义列时将其归档。您可以添加一个渲染器，它是一个返回标头的函数。我没有尝试，但我很确定您可以在标题中返回 HTML，并构建字幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-09T06:58:03.870

我想您可以使用 jQWidget JQX 网格中引入的列层次结构选项。请看下面的例子。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title id='Description'>This sample illustrates the Columns Hierarchy feature of jqxGrid.
    </title>
    <link rel="stylesheet" href="../../jqwidgets/styles/jqx.base.css" type="text/css" />
    <script type="text/javascript" src="../../scripts/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxcore.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxdata.js"></script> 
    <script type="text/javascript" src="../../jqwidgets/jqxbuttons.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxscrollbar.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxmenu.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxgrid.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxgrid.sort.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxgrid.filter.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxgrid.columnsresize.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxgrid.columnsreorder.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxgrid.pager.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxgrid.edit.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxgrid.selection.js"></script> 
    <script type="text/javascript" src="../../jqwidgets/jqxpanel.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxcheckbox.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxlistbox.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxdropdownlist.js"></script>
    <script type="text/javascript" src="../../scripts/demos.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {

            // prepare the data
            var source =
            {
                datatype: "xml",
                datafields: [
                     { name: 'SupplierName', type: 'string' },
                     { name: 'Quantity', type: 'number' },
                     { name: 'OrderDate', type: 'date' },
                     { name: 'OrderAddress', type: 'string' },
                     { name: 'Freight', type: 'number' },
                     { name: 'Price', type: 'number' },
                     { name: 'City', type: 'string' },
                     { name: 'ProductName', type: 'string' },
                     { name: 'Address', type: 'string' }
                ], 
                url: '../sampledata/orderdetailsextended.xml',
                root: 'DATA',
                record: 'ROW'
            };
            var dataAdapter = new $.jqx.dataAdapter(source, {
                loadComplete: function () {
                }
            });
            // create jqxgrid.
            $("#jqxgrid").jqxGrid(
            {
                width: 850,
                source: dataAdapter,
                pageable: true,
                autorowheight: true,
                altrows: true,
                columnsresize: true,
                columns: [
                  { text: 'Supplier Name', cellsalign: 'center', align: 'center', datafield: 'SupplierName', width: 110 },
                  { text: 'Name', columngroup: 'ProductDetails', cellsalign: 'center', align: 'center', datafield: 'ProductName', width: 120 },
                  { text: 'Quantity', columngroup: 'ProductDetails', datafield: 'Quantity', cellsformat: 'd', cellsalign: 'center', align: 'center', width: 80 },
                  { text: 'Freight', columngroup: 'OrderDetails', datafield: 'Freight', cellsformat: 'd', cellsalign: 'center', align: 'center', width: 100 },
                  { text: 'Order Date', columngroup: 'OrderDetails', cellsalign: 'center', align: 'center', cellsformat: 'd', datafield: 'OrderDate', width: 100 },
                  { text: 'Order Address', columngroup: 'OrderDetails', cellsalign: 'center', align: 'center', datafield: 'OrderAddress', width: 100 },
                  { text: 'Price', columngroup: 'ProductDetails', datafield: 'Price', cellsformat: 'c2', align: 'center', cellsalign: 'center', width: 70 },
                  { text: 'Address', columngroup: 'Location', cellsalign: 'center', align: 'center', datafield: 'Address', width: 120 },
                  { text: 'City', columngroup: 'Location', cellsalign: 'center', align: 'center', datafield: 'City', width: 80 }
                ],
                columngroups: 
                [
                  { text: 'Product Details', align: 'center', name: 'ProductDetails' },
                  { text: 'Order Details', parentgroup: 'ProductDetails', align: 'center', name: 'OrderDetails' },
                  { text: 'Location', align: 'center', name: 'Location' }
                ]
            });
        });
    </script>
</head>
<body class='default'>
    <div id="jqxgrid">
    </div>
</body>
</html> 
```

# java - 使用 Play Framework 获取请求参数？

> ID：14843365
> 
> 赞同：27
> 
> 时间：2013-02-12T22:51:05.103
> 
> 标签：java, playframework-2.0

我正在学习游戏框架并了解我可以映射一个请求，例如`/manager/user`：

```
 GET      /manage/:user    Controllers.Application.some(user:String) 
```

我将如何映射请求`/play/video?video_id=1sh1`？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-28T18:28:54.783

You have at least two possibilities, let's call them `approach1` and `approach2`.

1.  In the first approach you can declare a routes param with some default value. `0` is good candidate, as it will be easiest to build some condition on top of it. Also it's `typesafe`, and pre-validates itself. I would **recommend** this solution at the beginning.
2.  Second approach reads params directly from request as a `String` so you need to parse it to integer and additionally validate if required.

`routes`:

```
GET     /approach1      controllers.Application.approach1(video_id: Int ?=0)
GET     /approach2      controllers.Application.approach2 
```

actions:

```
public static Result approach1(int video_id) {
    if (video_id == 0) return badRequest("Wrong video ID");
    return ok("1: Display video no. " + video_id);
}

public static Result approach2() {
    int video_id = 0;

    if (form().bindFromRequest().get("video_id") != null) {
        try {
            video_id = Integer.parseInt(form().bindFromRequest().get("video_id"));
        } catch (Exception e) {
            Logger.error("int not parsed...");
        }
    }

    if (video_id == 0) return badRequest("Wrong video ID");
    return ok("2: Display video no. " + video_id);
} 
```

**PS:** LOL I just realized that you want to use String identifier... anyway both approaches will be similar :)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-14T23:42:42.120

我会简单地使用：

```
GET /play/video      Controllers.Application.video(video_id:String) 
```

在控制器上，你当然会有，比如：

```
public static Result video(String video_id) {

     return ok("We got video id of: " + video_id);

} 
```

或者，您不必添加，`video_id:String`因为默认情况下 play 似乎将参数视为字符串，因此它也可以这样工作（至少在最新的播放中）：

```
GET /play/video      Controllers.Application.video(video_id) 
```

现在输入`localhost:9000/play/video?video_id=1sh1`地址栏应该可以查看打印的内容：

> 我们得到的视频 ID 为：1sh1

**添加更多参数**很简单，如下所示：

```
GET     /play/video                      controllers.Application.video(video_id:String, site:String, page:Integer) 
```

控制器：

```
public static Result video(String video_id, String site, Integer page) {

    return ok("We got video id of: " + video_id + " site: " + site + " page: " + page);

} 
```

现在输入`localhost:9000/play/video?video_id=1as1&site=www.google.com&page=3`地址栏应该可以查看打印的内容：

> 我们的视频 ID 为：1as1 站点：www.google.com 页面：3

不客气^^。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-27T00:08:40.120

我不太确定我是否明白你的意思，如果你只是想映射一个 url 在控制器中运行，biesior 的答案是完美的，但如果你的意思是提交一个带有 get 方法的表单，比如

```
@helper.form(action = routes.YourController.page1()) {

 } 
```

并在 url 中以 url 重写格式包含表单的参数，例如

```
page1/foo/bar instead of page1?param1=foo&param2=bar 
```

没有办法做到这一点，因为那是 http 规范

我经常通过在控制器的第一个函数中获取参数来规避这个限制，然后将它们重定向到另一个视图，如下所示

```
public static Result page1(){
   String param1 = Form.form().bindFromRequest().get("param1");
   String param2= Form.form().bindFromRequest().get("param2");

   return ( redirect( routes.YourController.page2(param1,param2)));
} 
```

然后在page2中有任何内容

```
public static Result page2(String param1,String param2){

        ...............
 } 
```

并在路由文件中有这个：

```
GET  page2/:param1/:param2        controllers.YourControllers.page2(param1 : String, param2 : String ) 
```

我希望它会有所帮助，但我不确定这是最佳做法

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-12T23:12:48.523

好的，所以我只是阅读了文档，我的理解是您需要

```
GET /play/video         Controllers.Application.video() 
```

然后在控制器中调用HttpRequest对象的getQueryString

[http://www.playframework.com/documentation/api/2.1.0/java/index.html](http://www.playframework.com/documentation/api/2.1.0/java/index.html)

# javascript - Flot - 绘制时间不工作的图表

> ID：14843367
> 
> 赞同：0
> 
> 时间：2013-02-12T22:51:24.513
> 
> 标签：javascript, charts, flot

下面的代码没有用 Flot 绘制图表——它只是变成了一个空图表，x 轴在 00:00，y 轴从 -1 到 1：

```
<div id='chart' style='height:200px; width: 300px'></div>
<script>
drawChart();
function drawChart() {
    var d1 = [[1360652400000, 22.5],[1360662400000, 24.4]];
    $.plot($('#chart'), d1, {xaxis: {mode: 'time'}});
}
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T23:18:34.190

您缺少一组表示它是数据系列 1 的数组括号。

改用这个：

```
function drawChart() {
  var d1 = [[1360652400000, 22.5],[1360662400000, 24.4]];
  $.plot($('#chart'), [d1], {xaxis: {mode: 'time'}});
} 
```

它应该可以正常工作。

[JSFiddle 这里](http://jsfiddle.net/dmcdw/1/)

忽略 JavaScript 示例顶部的代码，它只是我找不到 CDN 的 jquery.flot.time.js（但需要使用模式：'time'）

# git - 如何强制 Git 获取整页

> ID：14843369
> 
> 赞同：0
> 
> 时间：2013-02-12T22:51:39.197
> 
> 标签：git

我在某个时候在 Git 中搞砸了一些东西，现在我们`devserver`分支上的东西是错误的。我的`cptools`分支中的内容是正确的。但是当我这样做时：

```
git checkout devserver
git merge cptools 
```

它没有记录这两个文件是不同的。`devserver`显然，我毫无意义地承诺了他们。有什么方法可以取消提交它们，`devserver`以便我可以将它们合并回来？我需要 Git 从`cptools`. 我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:00:39.567

## 看着树枝

看一眼

*   “ **`git branch -v`**”查看分支列表，
*   " **`git checkout branch_name`**" 切换到一个分支。

## 查看提交

看**`git log branch_name_here`**：

```
$ git log
commit 65471553a1f67650e1e3511463ffc881ce9724b8
Author: The Wookie <thewookied@SO.com>
Date:   Sun Feb 10 23:12:21 2013 -0500

    Test commit 3

commit d0fc7ffb0bc3276c6bbc20b2c8ad1e1a4e46ff3b
Author: The Wookie <thewookied@SO.com>
Date:   Sun Feb 10 21:59:56 2013 +1030

    Test commit 2

commit b720fdc15f2b47e8e169a5ea9372de4814ae0724
Author: The Wookie <thewookied@SO.com>
Date:   Sun Feb 10 21:59:07 2013 +1030

    Test commit 1 
```

要查看提交的具体内容，请执行以下操作**`git diff ref1 ref2`**：

```
$ git diff d0fc7ffb0bc3276c6bbc20b2c8ad1e1a4e46ff3b 65471553a1f67650e1e3511463ffc881ce9724b8

diff --git a/file.py b/file.py
index 14017fc..31e30f0 100644
--- a/file.py
+++ b/file.py
@@ -42,23 +42,29 @@ class Foo(object):
         self.cursor  = self.connection.cursor()
         if (not self.db_exists):
             # create the db
-            self.cursor.execute('''DROP TABLE foo''')
-            self.connection.commit()
... 
```

## 撤消提交

执行**`git reset --hard old_ref`**从日志中删除提交并重置它所做的文件更改。

即**`git reset --hard d0fc7ffb0bc3276c6bbc20b2c8ad1e1a4e46ff3b`**撤消最新的更改并将其从提交日志中删除，只留下提交 1 和 2。

## 不要忘记

1.  保留备份。
2.  在你确信一切都是正确的之前不要推动。

# javascript - PhysiJS：如何在旋转物体的给定点获得线速度

> ID：14843372
> 
> 赞同：1
> 
> 时间：2013-02-12T22:52:01.103
> 
> 标签：javascript, 3d, three.js, webgl, physijs

给定对象的线速度和角速度，如何在 PhysiJS 中查询对象点的线速度（相对于世界空间）？

为此，我正在考虑在对象上创建一个不可见的顶点，但我认为 API 甚至没有提供这种功能。我需要根据物体的平移和旋转速度自己计算吗？（如果是这样，THREE.js 或 PhysiJS 是否提供了一种直接的方式来做到这一点？）

从第一原则：

*   给定`object.position`(1)
*   给定点在世界空间中的位置`object.localToWorld(point)`(2)
*   给定`object.getLinearVelocity()`(3)
*   给定`object.getAngularVelocity()`(4)

所以我需要：

*   从 (2) 中减去 (1) 以给出点在世界空间 (5) 中的偏移量
*   使用 (4) 和 (5) 获得点相对于对象 (6) 的线速度
*   将（6）和（3）相加得到点的总线速度

对于第一步和第三步，我可以使用 Three.js 的 Vector3`.sub(Vector3)`和`.add(Vector3)`方法，但是中间操作让我望而却步，尽管我猜想是一种乘法。鉴于 (4) 可以是欧拉角或四元数，我应该使用哪种操作？

我对矩阵的了解非常有限（而且生疏！）并且不存在四元数。

Three.js 的 API 文档在[这里](http://mrdoob.github.com/three.js/docs/55/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:16:09.510

最后！解决了。下面是更通用的版本，它避免了 PhysiJS。只需将三个向量替换为 PhysiJS 的向量即可。

```
scene.add(point2);
scene.add(pointAxis);
pointAxis.add(point);

angularVelocity = new THREE.Vector3( 0, 0, 0.01);

function animate(){

    // rotate point around pointAxis
    pointAxis.rotation = pointAxis.rotation.add(angularVelocity);

    // calculate position of point in world space
    var pointPosWorld = pointAxis.localToWorld(point.position.clone());

    // calculate position of point in world with respect to fulcrum
    var pointOffsetPos = new THREE.Vector3();
    pointOffsetPos = pointPosWorld.sub(pointAxis.position.clone());

    // Calculate tangential velocity
    tangentialVelocity = rotate.clone().cross(pointOffsetPos);

} 
```

感谢物理堆栈交换站点中的[回答，](https://physics.stackexchange.com/questions/53843/3d-get-linear-velocity-from-position-and-angular-velocity)我得到了上述答案。

# mongodb - MongoDB中具有字段值的简单算术运算（sum、sub等）

> ID：14843390
> 
> 赞同：0
> 
> 时间：2013-02-12T22:53:49.327
> 
> 标签：mongodb, nosql

假设我有一些文档的集合，其结构类似于

```
{
   _id: 111, 
   begin: 10/10/12 21:12:34, 
   end: 30/10/12 22:10:35
} 
```

我需要计算每个集合的平均事件持续时间。为此，我需要在计算过程中从结尾开始减去。可以在 MongoDB 中做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:59:34.473

你看过聚合框架吗？

[http://docs.mongodb.org/manual/reference/aggregation/](http://docs.mongodb.org/manual/reference/aggregation/)

# php - SSL 问题，登录网站

> ID：14843393
> 
> 赞同：1
> 
> 时间：2013-02-12T22:54:11.937
> 
> 标签：php, ssl, curl

我有这段代码可以登录到一个名为 Pinger TextFree 的服务器，用于我正在开发的机器人：

```
<?php
function sendRequest($url, $postorget, $fields = array(), $proxy)
{
    $cookie_file = "cookies.txt";

    //Initiate connection
    $ch = curl_init();

    curl_setopt($ch, CURLOPT_HTTPHEADER, $header); // set url
    curl_setopt($ch, CURLOPT_HEADER, false);
    curl_setopt($ch, CURLOPT_URL, $url); // set url
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); // return the transfer
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); // allow https
    curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; .NET CLR 1.1.4322)'); // random agent
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); // automatically follow Location: headers (ie redirects)
    curl_setopt($ch, CURLOPT_AUTOREFERER, 1); // auto set the referer in the event of a redirect
    curl_setopt($ch, CURLOPT_MAXREDIRS, 5); // ibm likes to redirect a lot, make sure we dont get stuck in a loop
    curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file); // file to save cookies in
    curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file); // file to read cookies from
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 40); //timeout time for curl
    curl_setopt($ch, CURLOPT_PORT, 80); //port to connect to (default 80 obviously)

    //Check to see if a proxy is being used
    if(isset($proxy)){
        //Tell cURL you're using a proxy
        curl_setopt($ch, CURLOPT_PROXYTYPE, CURLPROXY_SOCKS5);
        //Set the proxy
        curl_setopt($ch, CURLOPT_PROXY, $proxy); 
    }

    //Check if request is POST or GET
    if ($postorget == "post" OR $postorget == "POST")
    {
        curl_setopt($ch, CURLOPT_POST, true); // use POST
        if (is_array($fields)){
            curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($fields)); // key => name gets turned into &key=name
        } else {
            curl_setopt($ch, CURLOPT_POSTFIELDS, $fields); // &key=name passed in
        }
    } else { 
        curl_setopt($ch, CURLOPT_POST, false); // use GET
    }

    $content = curl_exec($ch); // return html content
    $info = curl_getinfo($ch); // return transfer info
    $error = curl_error($ch);  // return any errors

    curl_close($ch);

    $request = array('content' => $content,
             'error' => $error,
         'info' => $info);

    return $request;            
}

//Login details
$username = "usernamehere";
$password = "passwordhere";

//GET the initial login page
$initFields = "";
$initOutput = sendRequest("http://www.pinger.com/tfw/?t=1360619019053", "GET", $initFields);

echo "<textarea cols='100' rows='400'>";
print_r($initOutput);
echo "</textarea>";

//Login to pinger
$loginFields = "{\"username\":\"".$username."\",\"password\":\"".$password."\",\"clientId\":\"textfree-in-flash-web-free-1360619009-8CA1C5C1-38ED-2E31-3248-CB367450A20F\"}";
$loginOutput = sendRequest("https://api.pinger.com/1.0/web/login", "POST", $loginFields);

echo "<textarea cols='100' rows='400'>";
print_r($loginOutput);
echo "</textarea>";

?> 
```

出于某种原因，每次我尝试运行此脚本时，我得到的只是“与 api.pinger.com:80 连接的未知 SSL 协议错误”

我在这里做错了什么？我什至会在 setop 中指定 SSL2，但它会永远挂起——我就是无法让它工作！

这是我试图自动化的应用程序：[http ://www.pinger.com/tfw/](http://www.pinger.com/tfw/)

它在闪存中，但我正在使用 Fiddler 来嗅探 HTTP/HTTPS 请求以使用 cURL 自动化它们。

你们有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:56:51.733

错误*显然*在行

```
curl_setopt($ch, CURLOPT_PORT, 80); //port to connect to (default 80 obviously) 
```

HTTPS 服务器默认侦听端口 443。只需删除这一行就足够了；curl 然后会从 URL 中的协议中找出端口。

# wpf - Prism Delegate 命令未启用按钮

> ID：14843401
> 
> 赞同：4
> 
> 时间：2013-02-12T22:54:38.773
> 
> 标签：wpf, prism

我正在尝试根据用户输入的数据启用和禁用 WPF (PRISM) 用户控件中的按钮。

```
In the constructor I do
SubmitCommand = new DelegateCommand<object>(OnSubmit, CanSubmit);

public ICommand SubmitCommand { get; private set; }

private void OnSubmit(object arg)   
{
     _logger.Log(arg.ToString());
}

private bool CanSubmit(object arg) 
{
    return Title.Length > 0; 
}

private string _title="";

public string Title
{
get { return _title; }
set 
{
    if (_title != value)
    {
           _title = value;
       this.RaisePropertyChanged();
    }
}
} 
```

我在 Xaml 中绑定了 SubmitCommand，如下所示

```
<Button Content="Submit" Width="100" Command="{Binding Path=SubmitCommand}" CommandParameter="{Binding ElementName=TitleText, Path=Text}" /> 
```

问题是当标题值更改时，按钮没有启用。可能是我错过了一些东西。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T23:02:51.267

听起来您需要`CanExecuteChanged`根据自己的命令引发事件。有关详细信息，请参阅[http://wpftutorial.net/DelegateCommand.html](http://wpftutorial.net/DelegateCommand.html)和 [http://msdn.microsoft.com/en-us/library/system.windows.input.icommand.canexecutechanged.aspx](http://msdn.microsoft.com/en-us/library/system.windows.input.icommand.canexecutechanged.aspx)

请注意，第一个链接指向 DelegateCommand 的实现，可能不是您实际使用的。对于 prism DelegateCommand，您只需`RaiseCanExecuteChanged()`在要确定是否应重新启用按钮时调用该方法。

祝你好运！

内特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:13:14.197

添加：

```
 SubmitCommand.RaiseCanExecuteChanged(); 
```

后：

```
 this.RaisePropertyChanged(); 
```

# ruby-on-rails - RSpec 控制器规范中的 CanCan

> ID：14843404
> 
> 赞同：0
> 
> 时间：2013-02-12T22:54:52.447
> 
> 标签：ruby-on-rails, rspec, devise, cancan

我花了大部分时间试图根除控制器规范的问题，而当前的解决方法对我来说似乎是不可接受的。任何关于为什么这有效？...以及我应该做什么。

给定一个简单的层次结构如下，以及下面的能力.rb，properties_controller_spec.rb 不允许下面的规范在没有以下行的情况下通过：

```
ability = Ability.new(subject.current_user) 
```

你能告诉我为什么会这样吗？

谢谢！

楷模：

```
class Account < ActiveRecord::Base
  has_many :properties, :dependent => :nullify
end

class Property < ActiveRecord::Base
  belongs_to :account
end

class User < Refinery::Core::BaseModel #for RefineryCMS integration
  belongs_to :account
end 
```

能力.rb：

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new
    if user.has_role? :user
      can [:read, :create, :update, :destroy], Property, account_id: user.account_id
    else
      can [:show], Property
    end
  end
end 
```

properties_contoller_spec.rb：

```
require 'spec_helper'

describe PropertiesController do
  def valid_attributes
  describe "Authenticated as Property user" do
    describe "PUT update" do
      describe "with invalid params" do
        it "re-renders the 'edit' template" do
          property = FactoryGirl.create(:property, account: property_user.account)
          # Trigger the behavior that occurs when invalid params are submitted
          Property.any_instance.stub(:save).and_return(false)
          ability = Ability.new(subject.current_user) # seriously?
          put :update, {:id => property.to_param, :property => {  }}, {}
          response.should render_template("edit")
        end
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-23T20:16:09.353

精氨酸！自己找到的。

这里是：

`config.include Devise::TestHelpers, :type => :controller`

以下是按照设计文档的指示登录 property_user 的代码。（有问题的本地人是在包含的 global_variables.rb 中创建的。这些地方到处都在使用。）

```
def signed_in_as_a_property_user
  property_user.add_role "User" 
  sign_in property_user 
end

def sign_in_as_a_property_user 
  property_user.add_role 'User' 
  post_via_redirect user_session_path, 
    'user[email]' => property_user.email,
    'user[password]' => property_user.password
end 
```

# ruby-on-rails-3 - Rails 3 使用 ransack 搜索和排序并尝试限制排序选择中的选项

> ID：14843405
> 
> 赞同：2
> 
> 时间：2013-02-12T22:54:54.087
> 
> 标签：ruby-on-rails-3, sorting, search, ransack

我的 Rails 应用程序中有一个页面，显示列表列表（使用 will_paginate 分页）。我正在尝试找到一个好的 gem 来实现使用此页面上的列表进行搜索和排序。Ransack gem 看起来像我需要的，但我遇到了问题。这就是我的代码现在使用 Ransack gem 的样子。

我的模型（不包括整个模型，不希望验证和额外代码妨碍）：

```
UNRANSACKABLE_ATTRIBUTES = ["id", "state", "show_email", "email", "show_phones", "primary_phone", "secondary_phone", "updated_at", "user_id"]

def self.ransackable_attributes auth_object = nil
  (column_names - UNRANSACKABLE_ATTRIBUTES) + _ransackers.keys
end 
```

我的控制器动作：

```
def index
  @search = Listing.search(params[:q])
  @listings = @search.result.paginate(page: params[:page], per_page: 20, joins: "LEFT OUTER JOIN attachments ON listings.id = attachments.attachable_id", select: "listings.*, COUNT(attachments.id) AS photos", group: "listings.id", order: "listings.created_at DESC, listings.title ASC, listings.id DESC")
  @search.build_sort if @search.sorts.empty?
end 
```

我在页面上的搜索表单：

```
 <div class="advanced-search">
        <%= search_form_for @search do |f| %>
            <div class="search-by">
                <div class="search-field">
                    <%= f.label :title_cont, "Title Contains" %>
                    <%= f.text_field :title_cont %>
                </div>
                <div class="search-field">
                    <%= f.label :description_cont, "Description Contains" %>
                    <%= f.text_field :description_cont %>
                </div>
                <div class="search-field">
                    <%= f.label :price_gteq, "Price Between" %>
                    <%= f.text_field :price_gteq %>
                    <%= f.label :price_lteq, "and" %>
                    <%= f.text_field :price_lteq %>
                </div>
            </div>
            <div class="sort-by">
                <%= f.sort_fields do |s| %>
                    <%= s.sort_select %>
                <% end %>
            </div>
            <div class="search-actions">
                <%= f.submit "Search" %>
            </div>
        <% end %>
    </div> 
```

我的路线：

```
resources :listings do
  collection do
    match 'search' => 'listings#index', via: [:get], as: :search
  end
end 
```

有了我现在所拥有的一切，我已经能够让应用程序成功搜索和排序列表。

**我的问题：**该`sort_select`字段显示“可洗劫”的所有选项。有没有办法让一个属性可用于搜索，但*不能*用于排序？例如，我希望能够搜索`description`属性，但在排序中包含该属性没有任何意义。我如何在一个而不是另一个中使用一个属性？感谢您的帮助，如果我的问题不够清楚，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:07:35.313

无法弄清楚如何将我想要的值放入下拉列表中，所以我只使用了链接。这就是我最终得到的排序。

```
Sort by <%= sort_link @search, :title %> | <%= sort_link @search, :price %> | <%= sort_link @search, :created_at, "Date Listed" %> 
```

# c# - 如何跟踪 mvc4 web api 休息调用的性能？

> ID：14843406
> 
> 赞同：0
> 
> 时间：2013-02-12T22:54:56.957
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我有一个被众多客户端调用的 asp.net mvc4 web api (rest) 接口。基本上，我根据某些参数提供内容：

[http://myserv.x.com/api/123/getstuff?whatstuff=thisstuff](http://myserv.x.com/api/123/getstuff?whatstuff=thisstuff)

我的问题是，它每天会受到大约 50K 的影响，而且我时不时地注意到超时和缓慢的响应时间。

问：我如何包含处理请求所花费的时间（在我的代码内部）以及在 IIS 队列中获得服务所花费的时间的指标。我不确定延迟是在我的代码中还是在 IIS 中。

我想以某种方式将它们添加回响应中：

```
<StuffPayload>
  <Stuff id=1 url=http://myserv.x.com/img/1/>
  <Response time=100ms IIStime=10ms MyServerCodeTime=90ms/>
</StuffPayload> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:10:55.203

首先检查您的方法在做什么：如果有任何 sql/file 操作，请确保您正确创建/处置所有资源。您可以为日志编写[自定义操作过滤器](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs)，这样您就可以为所有跟踪提供可重用的代码和平。[然后，您可以在OnActionExecuted](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.onactionexecuted%28v=vs.90%29.aspx)方法中向响应中添加其他内容。

# python - Python - C 嵌入式分段错误

> ID：14843408
> 
> 赞同：11
> 
> 时间：2013-02-12T22:55:21.310
> 
> 标签：python, numpy, segmentation-fault, embed

我面临一个类似于[Py_initialize / Py_Finalize not working两次的问题 numpy](https://stackoverflow.com/questions/7676314/py-initialize-py-finalize-not-working-twice-with-numpy) .. C中的基本编码：

```
Py_Initialize();
import_array();
//Call a python function which imports numpy as a module
//Py_Finalize() 
```

该程序处于一个循环中，如果 python 代码将 numpy 作为导入的模块之一，它会给出一个段错误。如果我删除 numpy，它工作正常。

作为临时解决方法，我尝试不使用 Py_Finalize()，但这会导致巨大的内存泄漏 [随着 TOP 的内存使用量不断增加而观察到]。我试过但不明白我发布的那个链接中的建议。有人可以建议在导入诸如 numpy 的同时完成通话的最佳方法。

谢谢桑托什。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-04-02T09:10:59.417

我最近遇到了一个非常相似的问题，并开发了一种适用于我的目的的解决方法，所以我想我会在这里写它，希望它可以帮助其他人。

# 问题

我使用一些后处理管道，我可以为此编写一个自己的函子来处理通过管道传递的一些数据，并且我希望能够使用 Python 脚本进行一些操作。

问题是我唯一能控制的是仿函数本身，它有时会被实例化和破坏，而这有时超出了我的控制。此外，我还有一个问题，即使我不调用`Py_Finalize`管道，一旦我通过管道传递另一个数据集，有时也会崩溃。

# 简而言之的解决方案

对于那些不想阅读整个故事并直截了当的人，这是我的解决方案的要点：

我的解决方法背后的主要思想*不是*链接到 Python 库，而是使用动态加载它`dlopen`，然后使用`dlsym`. 完成后，您可以调用`Py_Initialize()`Python 函数，然后调用您想要执行的任何操作，然后`Py_Finalize()`在完成后调用 to。然后，可以简单地卸载 Python 库。下次您需要使用 Python 函数时，只需重复上述步骤，Bob 就是您的叔叔。

`Py_Initialize`但是，如果您在和之间的任何时间点导入 NumPy `Py_Finalize`，您还需要在程序中查找所有当前加载的库，并使用`dlclose`.

# 详细的解决方法

## 加载而不是链接 Python

我上面提到的主要思想是*不*链接 Python 库。相反，我们要做的是使用 dlopen() 动态加载 Python 库：

#include ... void* pHandle = dlopen("/path/to/library/libpython2.7.so", RTLD_NOW | RTLD_GLOBAL);

上面的代码加载 Python 共享库并返回它的句柄（返回类型是一个晦涩的指针类型，因此是`void*`. 第二个参数 ( `RTLD_NOW | RTLD_GLOBAL`) 用于确保将符号正确导入当前应用程序的范围。

一旦我们有了一个指向已加载库句柄的指针，我们就可以使用该函数在该库中搜索它导出的`dlsym`函数：

```
#include <dlfcn.h>
...
// Typedef named 'void_func_t' which holds a pointer to a function with
// no arguments with no return type
typedef void (*void_func_t)(void);
void_func_t MyPy_Initialize = dlsym(pHandle, "Py_Initialize"); 
```

该`dlsym`函数有两个参数：一个指向我们之前获得的库句柄的指针和我们正在寻找的函数的名称（在本例中为`Py_Initialize`）。一旦我们有了我们想要的函数的地址，我们就可以创建一个函数指针并将其初始化为该地址。要实际调用该`Py_Initialize`函数，只需编写：

```
MyPy_Initialize(); 
```

对于 Python C-API 提供的所有其他函数，只需添加对函数指针的调用`dlsym`并将函数指针初始化为其返回值，然后使用这些函数指针代替 Python 函数。只需知道 Python 函数的参数和返回值，就可以创建正确类型的函数指针。

一旦我们完成了 Python 函数并`Py_Finalize`使用类似于一对一的过程进行调用，`Py_Initialize`就可以通过以下方式卸载 Python 动态库：

```
dlclose(pHandle);
pHandle = NULL; 
```

## 手动卸载 NumPy 库

不幸的是，这并不能解决导入 NumPy 时出现的分段错误问题。问题来自这样一个事实，即 NumPy 还使用`dlopen`（或等效的东西）加载一些库，而当您调用`Py_Finalize`. 实际上，如果您列出程序中所有已加载的库，您会注意到在使用 关闭 Python 环境`Py_Finalize`，然后调用 之后`dlclose`，一些 NumPy 库将保持加载在内存中。

解决方案的第二部分需要列出调用后保留在内存中的所有 Python 库`dlclose(pHandle);`。然后，对于每个库，抓住它们的句柄，然后调用`dlclose`它们。之后，它们应该被操作系统自动卸载。

幸运的是，Windows 和 Linux 下都有一些功能（抱歉 MacOS，找不到任何适合您的情况......）： - Linux：`dl_iterate_phdr` - Windows：`EnumProcessModules`与`OpenProcess`and结合使用`GetModuleFileNameEx`

## Linux

一旦您阅读了有关以下内容的文档，这是相当直接的`dl_iterate_phdr`：

```
#include <link.h>
#include <string>
#include <vector>

// global variables are evil!!! but this is just for demonstration purposes...
std::vector<std::string> loaded_libraries;

// callback function that gets called for every loaded libraries that
// dl_iterate_phdr finds
int dl_list_callback(struct dl_phdr_info *info, size_t, void *)
{
    loaded_libraries.push_back(info->dlpi_name);
    return 0;
}

int main()
{
    ...
    loaded_libraries.clear();
    dl_iterate_phdr(dl_list_callback, NULL);
    // loaded_libraries now contains a list of all dynamic libraries loaded
    // in your program
    ....
} 
```

基本上，该函数`dl_iterate_phdr`循环遍历所有加载的库（以它们加载的*相反*`0`顺序），直到回调返回其他内容或到达列表末尾。为了保存列表，回调只是将每个元素添加到一个全局变量中`std::vector`（显然应该避免使用全局变量并使用一个类）。

## 视窗

在 Windows 下，事情变得有点复杂，但仍然易于管理：

```
#include <windows.h>
#include <psapi.h>

std::vector<std::string> list_loaded_libraries()
{
     std::vector<std::string> m_asDllList;
     HANDLE hProcess(OpenProcess(PROCESS_QUERY_INFORMATION 
                                 | PROCESS_VM_READ,
                                 FALSE, GetCurrentProcessId()));
     if (hProcess) {
         HMODULE hMods[1024];
         DWORD cbNeeded;

         if (EnumProcessModules(hProcess, hMods, sizeof(hMods), &cbNeeded)) {
             const DWORD SIZE(cbNeeded / sizeof(HMODULE));
             for (DWORD i(0); i < SIZE; ++i) {
                TCHAR szModName[MAX_PATH];

                // Get the full path to the module file.
                if (GetModuleFileNameEx(hProcess,
                                        hMods[i],
                                        szModName,
                                        sizeof(szModName) / sizeof(TCHAR))) {
#ifdef UNICODE
                    std::wstring wStr(szModName);
                    std::string tModuleName(wStr.begin(), wStr.end());
#else
                    std::string tModuleName(szModName);
#endif /* UNICODE */
                    if (tModuleName.substr(tModuleName.size()-3) == "dll") {
                        m_asDllList.push_back(tModuleName);
                    }
                 }
             }
         }
         CloseHandle(hProcess);
     }
     return m_asDllList;
} 
```

这种情况下的代码比 Linux 情况下的代码稍长，但主要思想是相同的：列出所有加载的库并将它们保存到`std::vector`. 不要忘记还将您的程序链接到`Psapi.lib`！

## 手动卸载

现在我们可以列出所有已加载的库，您需要做的就是在那些来自加载 NumPy 的库中查找，获取它们的句柄，然后调用`dlclose`该句柄。如果您使用 dlfcn-win32 库，下面的代码将在 Windows 和 Linux 上运行。

```
#ifdef WIN32
#  include <windows.h>
#  include <psapi.h>
#  include "dlfcn_win32.h"
#else
#  include <dlfcn.h>
#  include <link.h> // for dl_iterate_phdr
#endif /* WIN32 */

#include <string>
#include <vector>

// Function that list all loaded libraries (not implemented here)
std::vector<std::string> list_loaded_libraries();

int main()
{
    // do some preprocessing stuff...

    // store the list of loaded libraries now
    // any libraries that get added to the list from now on must be Python
    // libraries
    std::vector<std::string> loaded_libraries(list_loaded_libraries());
    std::size_t start_idx(loaded_libraries.size());

    void* pHandle = dlopen("/path/to/library/libpython2.7.so", RTLD_NOW | RTLD_GLOBAL);

    // Not implemented here: get the addresses of the Python function you need

    MyPy_Initialize(); // Needs to be defined somewhere above!

    MyPyRun_SimpleString("import numpy"); // Needs to be defined somewhere above!

    // ...

    MyPyFinalize(); // Needs to be defined somewhere above!

    // Now list the loaded libraries again and start manually unloading them
    // starting from the end
    loaded_libraries = list_loaded_libraries();

    // NB: this below assumes that start_idx != 0, which should always hold true
    for(std::size_t i(loaded_libraries.size()-1) ; i >= start_idx ; --i) {
        void* pHandle = dlopen(loaded_libraries[i].c_str(),
#ifdef WIN32
                               RTLD_NOW // no support for RTLD_NOLOAD
#else
                               RTLD_NOW|RTLD_NOLOAD                   
#endif /* WIN32 */
                    );
        if (pHandle) {
            const unsigned int Nmax(50); // Avoid getting stuck in an infinite loop
            for (unsigned int j(0) ; j < Nmax && !dlclose(pHandle) ; ++j);
        }
    }
} 
```

# 最后的话

此处显示的示例捕获了我的解决方案背后的基本思想，但当然可以改进以避免全局变量并促进易用性（例如，我编写了一个单例类，该类在加载 Python 库后处理所有函数指针的自动初始化）。

我希望这对将来的某人有用。

# 参考

*   `dl_iterate_phdr`：[https ://linux.die.net/man/3/dl_iterate_phdr](https://linux.die.net/man/3/dl_iterate_phdr)
*   PsAPI 库：[https ://msdn.microsoft.com/en-us/library/windows/desktop/ms684894(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/ms684894(v=vs.85).aspx)
*   `OpenProcess`：[https ://msdn.microsoft.com/en-us/library/windows/desktop/ms684320(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/ms684320(v=vs.85).aspx)
*   `EnumProcess`：[https ://msdn.microsoft.com/en-us/library/windows/desktop/ms682629(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/ms682629(v=vs.85).aspx)
*   `GetModuleFileNameEx`：[https ://msdn.microsoft.com/en-us/library/windows/desktop/ms683198(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/ms683198(v=vs.85).aspx)
*   dlfcn-win32库：库：[https ://github.com/dlfcn-win32/dlfcn-win32](https://github.com/dlfcn-win32/dlfcn-win32)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T04:13:25.170

我不太确定您似乎不理解[Py_initialize / Py_Finalize 中发布的解决方案不能与 numpy 一起工作两次](https://stackoverflow.com/questions/7676314/py-initialize-py-finalize-not-working-twice-with-numpy)。发布的解决方案非常简单：每次程序执行时只调用 Py_Initialize 和 Py_Finalize 一次。不要在每次运行循环时调用它们。

我假设您的程序在启动时会运行一些初始化命令（仅运行一次）。在那里调用 Py_Initialize。永远不要再调用它。另外，我假设当你的程序终止时，它有一些代码可以删除东西、转储日志文件等。在那里调用 Py_Finalize。Py_Initialize 和 Py_Finalize 并非旨在帮助您管理 Python 解释器中的内存。不要为此使用它们，因为它们会导致您的程序崩溃。相反，请使用 Python 自己的函数来删除您不想保留的对象。

如果您真的必须在每次运行代码时创建一个新环境，您可以使用 Py_NewInterpreter 并创建一个子解释器，然后 Py_EndInterpreter 稍后销毁该子解释器。它们记录在[Python C API](http://docs.python.org/2/c-api/init.html)页面底部附近。这类似于拥有一个新的解释器，除了每次启动子解释器时不会重新初始化模块。

# c++ - Gamedev：我应该如何使用 lua 脚本管理 AI？

> ID：14843410
> 
> 赞同：3
> 
> 时间：2013-02-12T22:55:32.357
> 
> 标签：c++, scripting, lua, game-ai

我的游戏是用 C++ 编写的，我想让 AI 由 lua 脚本管理，但我不知道脚本应该如何以及在 C++ 中的集成。

剧本应该是这样的

```
 if (whatever_happening) do_something
   if (....) .....
   etc 
```

在 C++ 的每一帧中，我都应该召唤每一个敌人：

```
 foreach(enemy)
   enemy.handleAi(luascript.file) 
```

或者它是错误的，我应该以不同的方式处理它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:03:40.083

要回答关于 AI 脚本应该是什么样子的其他问题，这更适合[gamedev.stackexchange](https://gamedev.stackexchange.com/questions/tagged/ai)。看看这个问题和答案：[https ://gamedev.stackexchange.com/questions/2194/new-to-creating-ai-where-to-start](https://gamedev.stackexchange.com/questions/2194/new-to-creating-ai-where-to-start)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:57:19.440

看看[LuaBind](http://www.rasterbar.com/products/luabind.html)。

> Luabind 是一个库，可帮助您在 C++ 和 Lua 之间创建绑定。它能够向 Lua 公开用 C++ 编写的函数和类。它还将提供在 lua 中定义类并让它们从其他 lua 类或 C++ 类派生的功能。Lua 类可以覆盖其 C++ 基类中的虚函数。

# ruby-on-rails-3 - Bootstrap 导航栏折叠时最简单的更改方法（使用 bootstrap gem）

> ID：14843416
> 
> 赞同：2
> 
> 时间：2013-02-12T22:55:57.517
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, bootstrap-sass

我有一个使用 bootstrap-sass gem 的 rails 应用程序。我想将导航栏折叠的宽度从平板电脑（979px）更改为手机（769px）。覆盖媒体查询不是一个整洁的解决方案。

我`@navbarCollapseWidth`在 variables.less 中进行了编辑并构建了引导程序，然后将内容 bootstrap-responsive.css 复制到 gems...vendor/assets/stylesheets/bootstrap 中的 responsive.scss 中。然而现在，我失去了更新 gem 而不丢失我的更改的能力。

这里最好的方法是什么？我想做一个我认为简单的改变，但让我的 gem 可以更新。也许`@import "bootstrap-responsive-mine";`在 application.css.scss 中使用，然后在需要时手动更新该文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T00:59:31.337

[您是否阅读了有关配置此 gem](https://github.com/thomas-mcdonald/bootstrap-sass)的一些信息？

> 在您选择的 SCSS 文件中导入“bootstrap”以获取 Bootstrap 的所有样式、mixin 和变量！

```
@import "bootstrap"; 
```

> 需要配置一个或两个变量？只需在导入 Bootstrap 之前定义要更改的变量的值。Sass 将尊重您现有的定义，而不是用 Bootstrap 默认值覆盖它。

```
$navbarCollapseWidth: 769px;
@import "bootstrap"; 
```

或者那不是你需要的？

# mysql - Joomla。MySQL 错误“注意：无法连接到 MySQL：用户的访问被拒绝”

> ID：14843417
> 
> 赞同：-1
> 
> 时间：2013-02-12T22:56:20.957
> 
> 标签：mysql, database, logging, joomla, passwords

我正在使用 Joomla 1.5 并希望进行自定义分页。为此，我需要连接到数据库。

数据库连接.php：

```
<?php

/*Define constant to connect to database */
DEFINE('DATABASE_USER', 'padekime_db'); //this is my user's name
DEFINE('DATABASE_PASSWORD', 'myPassword');
DEFINE('DATABASE_HOST', 'hostingas.in');
DEFINE('DATABASE_NAME', 'padekime_db');

// Make the connection:
$dbc = @mysqli_connect(DATABASE_HOST, DATABASE_USER, DATABASE_PASSWORD,
    DATABASE_NAME);

if (!$dbc) {
    trigger_error('Could not connect to MySQL: ' . mysqli_connect_error());
}

?> 
```

这是我收到的错误：

```
Notice: Could not connect to MySQL: Access denied for user 'padekime_db'@'neva.hostingas.in' (using password: YES) in /home/padekime/domains/juokoera.lt/public_html/components/com_allvideoshare/views/videos/tmpl/database_connection.php on line 16 
```

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:00:01.983

啊。服务器很可能拒绝远程主机访问。如果它们在同一台服务器上，请将 localhost 作为您的主机。此外，该主机可能不是为您的 MySQL 数据库提供服务的主机。希望这可以帮助！

# .net - 您可以在 Ektron v8.6 中使用 JS.RegisterJSInclude() 设置加载顺序吗？

> ID：14843418
> 
> 赞同：0
> 
> 时间：2013-02-12T22:56:21.007
> 
> 标签：.net, ektron

我想使用 Ektron 的 JS.RegisterJSInclude 来加载我的 JavaScript 文件，但我想设置 JavaScript 的加载顺序。

```
 Ektron.Cms.CommonApi _api = new Ektron.Cms.CommonApi();

    // I'd like this to be called first every time
    JS.RegisterJSInclude(this, _api.SitePath + "/js/first.js", "FirstJS");

    JS.RegisterJSInclude(this, _api.SitePath + "/js/atk.js", "AdobeTypeKitJS");
    JS.RegisterJSInclude(this, _api.SitePath + "/js/file2.js", "File2JS");

    // I'd like this to be called last every time
    JS.RegisterJSInclude(this, _api.SitePath + "/js/last.js", "LastJS"); 
```

这些文件将按调用顺序加载。我想做的是控制它们被调用的顺序，无论是从 MasterPage、WebForm 还是小部件调用。例如，如果我打电话给

```
 Ektron.Cms.CommonApi _api = new Ektron.Cms.CommonApi();
    JS.RegisterJSInclude(this, _api.SitePath + "/js/widget.js", "WidgetJS"); 
```

在小部件中，我希望它始终位于“LastJS”之前。

Ektron v8.6 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:11:20.177

*您没有指定版本，所以我假设 8.5+ 具有完整的框架 API*

它归结为页面事件执行顺序 - 无法手动指定优先顺序。

但是，如果您在小部件 Init 事件中加载 /js/widget.js 并在页面 Load 事件中加载其他内容，则应首先加载 widget.js。我不确定这是否适合您上面描述的内容 - 您可能要求在上面的代码中的其他两个*之间*加载小部件 JS ，这是不可能的。至少，不是开箱即用。

但是您可以使用自定义解决方案做一些事情。例如，这样的东西*应该可以*工作，虽然我没有测试过。我正在使用 HTTPContext 将对象从一个事件传递到下一个事件——这将跨小部件、页面、主控等工作。

```
// adding javascript objects to http context in init function on page/widget
protected void Page_Init(object sender, EventArgs e)
{
    List<JSObject> AddOns;
    object StoredAddOns = HttpContext.Current.Items["JSAddOns"];
    if (StoredAddOns == null)
    {
        AddOns = new List<JSObject>();
    }
    else
    {
        AddOns = (List<JSObject>)StoredAddOns;
    }
    // javascript being added to the list in the wrong order intentionally
    AddOns.Add(new JSObject() { name = "LastJS", path = "/js/last.js", priority = 10 });
    AddOns.Add(new JSObject() { name = "WidgetJS", path = "/js/widget.js", priority = 5 });
    HttpContext.Current.Items["JSAddOns"] = AddOns;
}

// reading js objects from httpcontext and adding them to the page using framework ui api
// this could just as easily be prerender - as long as the event that reads the objects is after the event that writes them
protected void Page_Load(object sender, EventArgs e)
{
    object StoredAddOns = HttpContext.Current.Items["JSAddOns"];
    if (StoredAddOns != null)
    {
        var AddOns = (List<JSObject>)StoredAddOns;
        // using LINQ to order the JS objects by custom-defined priority setting
        var SortedAddOns = AddOns.OrderBy(j => j.priority);
        // looping through items in priority order to add to the page
        foreach (var js in SortedAddOns)
        {
            Ektron.Cms.Framework.UI.JavaScript.Register(this, js.path, true);
        }
    }
}

// the custom js object
public class JSObject
{
    public int priority { get; set; }
    public string path { get; set; }
    public string name { get; set; }
    public JSObject()
    {
        priority = 0;
        path = string.Empty;
        name = string.Empty;
    }
} 
```

**旁注：**如果您要使用 SitePath，请不要以 / 开始下一个字符串。否则，路径将出现 //js/widget.js，假设您的 Ektron 应用程序位于站点的根目录中，或者 /path//js/widget.js 如果它位于子文件夹或子应用程序中。

# css - LI 中的 CSS Sprite 对齐方式，其中图像应位于右侧

> ID：14843421
> 
> 赞同：0
> 
> 时间：2013-02-12T22:56:31.637
> 
> 标签：css, alignment, background-image, sprite

我似乎无法让精灵在 LI 元素的右侧对齐

```
<li class="menuItems">
      <div style="background: #ffffff url('pixmaps/glyphicons.png') no-repeat 
-553px -56px; height:27px;width:29px;background-position: -30px 0px;">
        <a href="#"  >Streams</a>
    </div>
</li> 
```

![奇怪的对齐](../Images/ac5caa323184b35b50674300aff2518a.png)

我尝试使用和不使用 div - 将精灵背景放在 li 或 a 元素上，但行为几乎相同。更改 li 的填充（一个经常阅读的解决方案）会弄乱我的 -Link，它应该保持在这个位置。

那么解决这个问题的正确方法是什么？当然，我可以修改精灵并添加一个巨大的透明空间，但这并不是真正的方法，因为我的精灵包括整个字形图标集（400 多个图标 + 以及所有颜色较深的图标以进行翻转）。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:01:53.370

我本来打算将此作为评论，但实际上它更像是一个答案。

如果您想使用额外的元素，我通常使用跨度。将其设置为`display: block`，同时设置`height`和`width`（设置为图标的确切大小）。如果您不希望它影响布局，请将其设置为`position: absolute`，并将其定位，执行类似的操作`right: 10px; top: 10px`。如果您使用`position: absolute`，您还需要确保父级也设置了定位，例如`position: relative`.

完整示例：

```
.icon {
  position: absolute;
  display: block;
  width: 32px;
  height: 32px;
  top: 4px;
  right: 4px;
  background: url('pixmaps/glyphicons.png') no-repeat -553px -56px; /* set the offset to the exact position of your icon */
}

.menuItems {
  position: relative;
} 
```

# java - 从 Facebook 页面获取所有帖子和评论

> ID：14843429
> 
> 赞同：1
> 
> 时间：2013-02-12T22:57:33.017
> 
> 标签：java, facebook, facebook-graph-api, facebook-fql, restfb

我正在尝试从 Facebook 页面获取所有帖子和评论。到目前为止，使用以下 FQL 效果很好：

```
{'all_posts':
'SELECT created_time, post_id, actor_id, message, description, comments FROM stream 
   WHERE source_id=PAGE_ID ORDER BY created_time', 
'comments':
   'SELECT id, fromid, post_fbid, text, time, post_id FROM comment WHERE post_id   
    IN (SELECT post_id FROM #all_posts) ORDER BY post_id'
} 
```

我正在尝试使用 RestFB 库，但我得到了

```
com.restfb.exception.FacebookResponseStatusException: Received Facebook error response 
(code 601): Parser error: unexpected '{' at position 0. 
```

当我尝试执行查询时：

```
List<JsonObject> queryResults = facebookClient.executeQuery(query, JsonObject.class); 
```

我该如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:53:22.820

我认为这是 RestFB 方面的错误，解析结果 json，因为我得到了几个异常并且有点困惑。

正确的方法是使用 RestFB 的 Multiquery Support ( [Executing Multiqueries with RestFb](http://restfb.com/#executing-multiple-fql-queries) )

```
Map<String, String> queries = new HashMap<String, String>();
queries.put("all_posts", "select created_time, post_id, actor_id, message, description, comments from stream where source_id=279947942083512 ORDER BY created_time");
queries.put("comments", "SELECT fromid, username, text, time, post_id FROM comment WHERE post_id in (SELECT post_id FROM #all_posts) ORDER BY post_id");

MultiqueryResults queryResults = facebookClient.executeMultiquery(queries, MultiqueryResults.class); 
```

您必须提供 MultiqueryResults Bean，如[1中所述](http://restfb.com/#executing-multiple-fql-queries)

# java - java.sql.Connection 对象在垃圾收集时会自动关闭吗？

> ID：14843432
> 
> 赞同：3
> 
> 时间：2013-02-12T22:57:45.077
> 
> 标签：java, mysql, sql, garbage-collection

我遵循将 a`close()`放在最后一个块中的做法：

```
void foo() {
    Connection conn;
    try {
        conn = getConnection();
        // ..
    } final {
        try {
            conn.close()
        } catch(Exception e) {
        }
    }
} 
```

是否真的需要调用`close()`连接，或者垃圾收集器会自动执行此操作？

我可以接受垃圾收集会引起的额外延迟，我只是不希望连接永远保持打开状态。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T23:17:59.797

> 真的有必要在连接上调用 Close()

是的。

> 还是垃圾收集器会自动执行此操作？

未指定。也许一些实现会这样做。你不能依赖它。

> 我可以接受 GC 会引起的额外延迟。

GC 可能永远不会发生。你真的对无穷大好吗？

> 我只是不希望连接永远保持打开状态。

您不希望它们保持打开的时间超过必要的时间。它们是稀缺资源。不要浪费它们。[“建议程序员在不再需要时立即显式关闭所有连接（使用 Connection.close 方法）和语句（使用 Statement.close 方法），从而尽早释放 DBMS 资源。”](http://docs.oracle.com/javase/1.4.2/docs/guide/jdbc/getstart/connection.html#1008452)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T04:20:01.017

由于数据库连接不应保持打开状态并且垃圾收集可能不会关闭它，因此使用 Try with Resources 的 Java 7“项目硬币”语法很有帮助。任何实现[AutoCloseable](http://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html)的东西都可以使用，如下所示。

```
void foo() {
   try( Connection conn = getConnection() ) {
      // Do your Database code
   } catch(SQLException e) {
      //Handle the exception
   }
}  //conn is closed now since it implements AutoCloseable. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T23:20:27.937

一些 JDBC 连接实现会`close()`在它们被垃圾回收时。一个例子是 Postgres JDBC 驱动程序的 finalize() 方法（[此处](http://grepcode.com/file/repo1.maven.org/maven2/postgresql/postgresql/9.0-801.jdbc4/org/postgresql/jdbc2/AbstractJdbc2Connection.java#AbstractJdbc2Connection.finalize%28%29)的代码）。但是，不能保证会出现这种情况。

但...

无法知道连接对象的垃圾收集何时会发生。垃圾收集器不了解 JDBC 资源，只了解内存。这意味着只有在需要释放内存时才会发生 GC。如果您有 60 个连接，但仍有可用内存，则 GC 不会运行，您最终会用完连接。

也有可能发生某种 JDBC 连接池。这意味着`Connection`您获得的对象不是*真正的*连接，而是包含在池逻辑中的对象。如果您不使用`close()`这些连接，池将不会知道您已完成它们并且无法将它们重用于其他请求，并且连接池将被耗尽。

因此`close()`，如果您创建它们，请始终明确地显示您的连接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T23:13:11.337

是的，有必要打电话`close()`。有一些 JDBC 包装器可以自动执行这种类型的事情（例如 Tomcat 连接池），但总的来说，在涉及资源的地方自行整理是一个非常好的主意。

# c++ - 从 QThread 影响 QDialog

> ID：14843436
> 
> 赞同：0
> 
> 时间：2013-02-12T22:57:51.077
> 
> 标签：c++, multithreading, qt, qthread

我想从一个单独的线程影响一个 QDialog，我必须做两件事：

```
dialog->show();
dialog->raise();
dialog->activateWindow(); 
```

据我了解，这些是事件，因此必须在主线程事件循环中完成。我想我`QApplication::postEvent`在`QThread::run()`. 有人可以确认吗？

其次，我想显示在该单独线程中处理的图像。我想我需要子类化我的对话框类并编写一个线程安全`setImage()`函数，然后由`paintEvent()`......调用它但是，这似乎是不可能的。我不能用`QMutex::unlock()`? 有人可以提供一些建议吗？

* * *

`QApplication::postEvent(dialog, new QShowEvent());`不工作。

这是从单独的线程调用插槽（作为函数）的解决方案：

```
QMetaObject::invokeMethod(dialog, "show", Qt::QueuedConnection);
QMetaObject::invokeMethod(dialog, "raise", Qt::QueuedConnection); 
```

...仍在工作`activateWindow()`和`QThread`安全的功能。

所以对于`QImage`，它是一个 QPaintDevice。据说它是线程安全的。我的方法`QImage`是在线程中设置一个类成员。后来画了。

请注意，以下方法同样好，即使不是更好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T06:32:13.910

我认为这是一种更清晰的方式来做你想做的事：

```
class Dialog : public QDialog
{
    ...
public slots:
    void showImage(QImage img);
    ...
}

void Dialog::showImage(QImage img);
{
    setImage(img);
    show();
    raise();
    activateWindow();
}

class Thread : public QThread
{
    ...
signals:
    void imageReady(QImage);
}

void Thread::run()
{
    QImage img;
    /// image processing stuff

    emit imageReady(img);
    ...
}

Thread *thread = new Thread;
Dialog *dialog = new Dialog;
connect(thread, SIGNAL(imageReady(QImage)), dialog, SLOT(showImage(QImage)));

thread->start(); 
```

# c++ - Visual Studio 未创建 .exe

> ID：14843437
> 
> 赞同：0
> 
> 时间：2013-02-12T22:57:55.370
> 
> 标签：c++, visual-studio, file, directx, executable

实际上，我刚刚发现另一个与我自己相同的线程已解决，抱歉重复。

链接到已解决的线程：[DirectX 未解决的外部错误](https://stackoverflow.com/questions/11659157/directx-unresolved-external-error)

所以我开始在初学者书的帮助下尝试一些 DirectX 11，尽管在我第一次调试时我遇到了错误：S

我什至从书中逐字复制了代码，以确保我没有犯任何愚蠢的语法错误，尽管我仍然遇到错误：

> 无法启动程序“C:.....\DXBlankWindow.exe”。该系统找不到指定的文件。

错误一：

> 错误 LNK2019：函数 _wWinMain@16 C:\Users\Tim\Documents 中引用的未解析外部符号“long *stdcall WndProc(struct HWND* *,unsigned int,unsigned int,long)”(?WndProc@@YGJPAUHWND__@@IIJ@Z) \Visual Studio 2010\Projects\DirectXTuts\DXBlankWindow\DXBlankWindow\main.obj

错误2：

> 错误 LNK1120：1 未解决的外部 C:\Users\Tim\Documents\Visual Studio 2010\Projects\DirectXTuts\DXBlankWindow\Debug\DXBlankWindow.exe 1

在检查项目调试文件夹后，没有创建 .exe 文件。

我还运行了一个简单的程序来检查项目是否会运行，它运行良好并创建了 .exe 文件，并且我已将运行时库更改为“多线程调试 (/MTd)”。

我可能在做一些非常基本和非常简单的错误，但我无法为我的生活找出什么。任何帮助将不胜感激。我想除了这里的代码之外没有什么可说的了：

```
#include<Windows.h>

// Define WndProc
LRESULT CALLBACK WndProc( HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam );

// Program Entry Point
int WINAPI wWinMain( HINSTANCE hInstance, HINSTANCE prevInstance, LPWSTR cmdLine, int cmdShow )
{

// Define unused parameters
UNREFERENCED_PARAMETER( prevInstance );
UNREFERENCED_PARAMETER( cmdLine );

// Define Window variables
WNDCLASSEX wndClass = { 0 };
wndClass.cbSize = sizeof( WNDCLASSEX ) ;
wndClass.style = CS_HREDRAW | CS_VREDRAW;
wndClass.lpfnWndProc = WndProc;
wndClass.hInstance = hInstance;
wndClass.hCursor = LoadCursor( NULL, IDC_ARROW );
wndClass.hbrBackground = ( HBRUSH )( COLOR_WINDOW + 1 );
wndClass.lpszMenuName = NULL;
wndClass.lpszClassName = "DX11BookWindowClass";

// Check if wndClass is being registered, if not error.
if( !RegisterClassEx( &wndClass ) )
return -1;

// Create a RECT to hold the screen positions
RECT rc = { 0, 0, 640, 480 };
AdjustWindowRect( &rc, WS_OVERLAPPEDWINDOW, FALSE );

// Create The Window through ANSI
HWND hwnd = CreateWindowA( "DX11BookWindowClass", "Blank Win32 Window",
WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT, rc.right - rc. left,
rc.bottom - rc.top, NULL, NULL, hInstance, NULL );

if( !hwnd )
return -1;

ShowWindow( hwnd, cmdShow );

// Demo Initialize

MSG msg = { 0 };

while( msg.message != WM_QUIT )
{
if( PeekMessage( &msg, 0, 0, 0, PM_REMOVE ) )
{
TranslateMessage( &msg );
DispatchMessage( &msg );
}

// Update
// Draw
}

// Demo Shutdown

return static_cast<int>( msg.wParam );
}

Thanks again. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:05:09.407

> ```
> // Define WndProc
> LRESULT CALLBACK WndProc( HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam ); 
> ```

不，那不定义`WndProc`，那*声明* `WndProc`。换句话说，这告诉你的其余代码有一个`WndProc`地方，所以这`wndClass.lpfnWndProc = WndProc;`不会导致编译错误。确保您确实拥有一个`WndProc`. 这就是链接器错误消息试图告诉您的内容。

或者，更简单地说，如果您告诉系统使用`WndProc`不存在的 a，系统除了告诉您之外什么也做不了。

编辑：查看副本，您似乎使用的是一本样本不完整的书。我对这本书不熟悉，但如果这给你带来麻烦，你可能想再找一本书。

# r - 在 R 中使用 POSIXlt 向 X 添加一个月的问题 - 需要使用 as.Date(X) 重置值

> ID：14843439
> 
> 赞同：0
> 
> 时间：2013-02-12T22:58:01.390
> 
> 标签：r, datetime, posixct

这在 R 中对我有用：

```
# Setting up the first inner while-loop controller, the start of the next water year
  NextH2OYear <- as.POSIXlt(firstDate)
  NextH2OYear$year <- NextH2OYear$year + 1
  NextH2OYear<-as.Date(NextH2OYear) 
```

但这不会：

```
# Setting up the first inner while-loop controller, the start of the next water month
  NextH2OMonth <- as.POSIXlt(firstDate)
  NextH2OMonth$mon <- NextH2OMonth$mon + 1
  NextH2OMonth <- as.Date(NextH2OMonth) 
```

我收到此错误：

as.Date.POSIXlt(NextH2OMonth) 中的错误：非空 POSIXlt 结构中的零长度分量

任何想法为什么？我需要系统地添加一年（对于一个循环）和一个月（对于另一个循环），并将生成的更改变量与 Date 类的值进行比较，这就是使用 as.Date() 将它们转换回的原因。

谢谢，汤姆

编辑：

下面是整个代码部分。我正在使用 RStudio（版本 0.97.306）。下面的代码表示一个函数，它传递了一个包含两列（日期（CLass=Date）和排放数据（Class=Numeric））的数组，用于计算每月平均值。因此，firstDate 和 lastDate 是类 Date 并由传递的数组。此代码改编自计算年度平均值的成功代码 - 可能还有一两件事我仍然需要更改，但由于我在使用 POSIXlt 时遇到的早期错误，我无法检查后面的部分. 这里是代码：

```
MonthlyAvgDischarge<-function(values){  

  #determining the number of values - i.e. the number of rows
  dataCount <- nrow(values)

  # Determining first and last dates
  firstDate <- (values[1,1])
  lastDate <- (values[dataCount,1])

  # Setting up vectors for results
  WaterMonths <- numeric(0)
  class(WaterMonths) <- "Date"
  numDays <- numeric(0)
  MonthlyAvg <- numeric(0)

  # while loop variables
  loopDate1 <- firstDate
  loopDate2 <- firstDate

  # Setting up the first inner while-loop controller, the start of the next water month
  NextH2OMonth <- as.POSIXlt(firstDate)
  NextH2OMonth$mon <- NextH2OMonth$mon + 1
  NextH2OMonth <- as.Date(NextH2OMonth)

  # Variables used in the loops
  dayCounter <- 0
  dischargeTotal <- 0
  dischargeCounter <- 1
  resultsCounter <- 1
  loopCounter <- 0
  skipcount <- 0

  # Outer while-loop, controls the progression from one year to another
  while(loopDate1 <= lastDate)
  {
    # Inner while-loop controls adding up the discharge for each water year
    # and keeps track of day count
    while(loopDate2 < NextH2OMonth)
    {
      if(is.na(values[resultsCounter,2]))
      {
        # Skip this date
        loopDate2  <- loopDate2 + 1
        # Skip this value
        resultsCounter <- resultsCounter + 1
        #Skipped counter
        skipcount<-skipcount+1
      } else{
        # Adding up discharge
        dischargeTotal <- dischargeTotal + values[resultsCounter,2]
      }

      # Adding a day
      loopDate2  <- loopDate2 + 1
      #Keeping track of days
      dayCounter <- dayCounter + 1
      # Keeping track of Dicharge position
      resultsCounter <- resultsCounter + 1
    }

    # Adding the results/water years/number of days into the vectors
    WaterMonths <- c(WaterMonths, as.Date(loopDate2, format="%mm/%Y"))
    numDays <- c(numDays, dayCounter)
    MonthlyAvg <- c(MonthlyAvg, round((dischargeTotal/dayCounter), digits=0))

    # Resetting the left hand side variables of the while-loops 
    loopDate1 <- NextH2OMonth
    loopDate2 <- NextH2OMonth

    # Resetting the right hand side variable of the inner while-loop
    # moving it one year forward in time to the next water year
    NextH2OMonth <- as.POSIXlt(NextH2OMonth)
    NextH2OMonth$year <- NextH2OMonth$Month + 1
    NextH2OMonth<-as.Date(NextH2OMonth)

    # Resettting vraiables that need to be reset
    dayCounter <- 0 
    dischargeTotal <- 0
    loopCounter <- loopCounter + 1
  } 

  WaterMonths <- format(WaterMonthss, format="%mm/%Y")
  # Uncomment the line below and return AvgAnnualDailyAvg if you want the water years also 
  # AvgAnnDailyAvg <- data.frame(WaterYears, numDays, YearlyDailyAvg) 
  return((MonthlyAvg))
} 
```

常规 R 中也会出现同样的错误。当逐行执行时，它不是问题，当它作为脚本运行时，它就是它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:06:18.633

**纯R**

```
seq(Sys.Date(), length = 2, by = "month")[2]
seq(Sys.Date(), length = 2, by = "year")[2] 
```

请注意，这也适用于 POSIXlt，例如

```
seq(as.POSIXlt(Sys.Date()), length = 2, by = "month")[2] 
```

**星期一**。

```
library(mondate)
now <- mondate(Sys.Date())
now + 1  # date in one month
now + 12  # date in 12 months 
```

Mondate 对诸如`mondate("2013-01-31")+ 1`给出 2 月的最后一天而`seq(as.Date("2013-01-31"), length = 2, by = "month")[2]`给出 3 月 3 日之类的事情要聪明一些。

**yearmon** 如果您真的不需要白天部分，那么`yearmon`可能更可取：

```
library(zoo)
now.ym <- yearmon(Sys.Date())
now.ym + 1/12 # add one month
now.ym + 1 # add one year 
```

添加评论`POSIXlt`和部分`yearmon`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T03:51:29.453

这是您可以使用 package 将 1 个月添加到 R 中的日期`lubridate`：

```
library(lubridate)
x <- as.POSIXlt("2010-01-31 01:00:00")
month(x) <- month(x) + 1

>x
[1] "2010-03-03 01:00:00 PST" 
```

（请注意，它正确处理了添加，因为 2 月 31 日不存在）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T06:56:37.777

您能否提供一个可重现的示例？里面有什么`firstDate`，你使用的是什么版本的 R？我经常对 POSIXlt 日期进行这种操作，它似乎有效：

```
Sys.Date()
# [1] "2013-02-13"
date = as.POSIXlt(Sys.Date())
date$mon = date$mon + 1
as.Date(date)
# [1] "2013-03-13" 
```

# mysql - 错误代码 1062 sql

> ID：14843444
> 
> 赞同：0
> 
> 时间：2013-02-12T22:58:31.217
> 
> 标签：mysql

我收到错误

> 下面的 INSERT 代码中的代码 1062（用于表“技术”）。

任何帮助将不胜感激！

```
CREATE TABLE IF NOT EXISTS `Tech` (
  `id` int(10) unsigned NOT NULL auto_increment,
  `name` varchar(255) NOT NULL,
  PRIMARY KEY  (`id`),
  FOREIGN KEY (id) REFERENCES AppliedTech(id_questions)
) ENGINE=InnoDB   DEFAULT CHARSET=utf8 AUTO_INCREMENT=1;

INSERT INTO `Tech` (`id`, `name`) VALUES
(1, 'Applied Tech'),
(2, 'Communications Equipment'),
(3, 'Computer Systems'),
(4, 'Internet/Digital Media'),
(5, 'Semiconductors'),
(6, 'IT Services'),
(7, 'Payments Processing'),
(8, 'Software'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:30:28.567

该表`Tech`已经存在并且有数据。`CREATE TABLE IF NOT EXISTS`不要重新创建表，并且在插入时您有重复的键违规。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:03:45.260

看来您在另一张表 AppliedTech 中面临重复键

# ember.js - 用例的 emberjs 方式是什么：一条路由（路由器 v2）但应该显示两个模型？

> ID：14843445
> 
> 赞同：0
> 
> 时间：2013-02-12T22:58:34.213
> 
> 标签：ember.js, routes, ember-data

我在某些用例中使用了带有路由器 v2 的 emberjs，它的效果非常好。对于通过单击 {{linkto ..}} 构造（具有相关的嵌套资源）来增加页面复杂性的用例，我没有任何问题。

但有时可能需要同时显示两个（或更多）不同的模型。

例如：

我有模型人物和模型宠物。

就像是：

```
 DS.RESTAdapter.configure("plurals",{"person" : "people"})

 App.Store = DS.Store.extend({
revision: 11,
  adapter: DS.RESTAdapter.create({namespace: 'restservice'})
 });

 var attr = DS.attr;

 App.Person = DS.Model.extend({
firstName: attr('string'),
lastName: attr('string'),
birthDay: attr('string'),
    pets: DS.hasMany('App.Pet')
 });

App.Pet = DS.Model.extend({
  name: attr('string'),
  species: attr('string'),
  person: DS.belongsTo('App.Person')
}); 
```

出于某种原因，模型 Person 和 Pet 的实例存在，但尚未定义这两个模型之间的关系。

在通过 {{linkto ..}} 构造调用的页面中，我想实现一个人 - 宠物分配编辑器。在这种情况下，我想显示两个列表：

*   人员名单
*   宠物清单

通常，此页面的路线只对应一个模型，但对于人 - 宠物分配编辑器来说，两个模型应该同时显示是完全自然的（无需额外的用户干预）。

实现它的最佳方法是什么。我应该在没有路由概念的情况下加载模型吗？

确实存在这样的方式：

```
 (represent the person - pet assigment editor 'page')
                         |
                         | 
```

{{linkto ..}} -------> 资源路由 -----> '拆分重定向'

```
 - ----------------> resource-route  person

                                          - ----------------> resource-route  pet

   (like a url to a frame set which bear two (or more) 'parallel' requests) 
```

拆分重定向后，我有 3 条活动路线：

*   人的资源路线 - 宠物分配编辑器
*   资源路线人
*   资源路线宠物

之后，可以进行正常的增量钻取（更深的嵌套路线：选择一个人，选择一个宠物..）动作。

我可以在没有这样一个概念的情况下实现我的用例，但我喜欢路由概念，并且有兴趣在更复杂的场景中使用它。

是否存在这样的概念？处理这种情况的 emberjs 方法是什么？

此致

安德烈亚斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T21:29:26.170

我不认为*拆分重定向*是正确的想法。你把路由器走得太远了——这会使事情变得比他们需要的更复杂。我建议你*为人宠物*分配路线，并在那里显示宠物和人。这条路线的模型将是所有相关的宠物和人 - 仍然是 2 种模型。我不知道在方法中指定 2 个模型的正确`model`方法，因此我建议将它们加载到`setupController`：

```
App.PetsToPersonRoute = Em.Route.extend({
    setupController: function (controller) {
        controller.setProperties({
            pets: App.Pet.find(),
            persons: App.Person.find()
        });
    }
}); 
```

# c - C 编程：如何返回 main 并调用另一个函数？

> ID：14843452
> 
> 赞同：1
> 
> 时间：2013-02-12T22:59:15.397
> 
> 标签：c, return, return-value

```
#include <stdio.h>
#include <stdlib.h>

int get_num(int num);
void read_num(int num);

int main()
{
  int num;
  do
  {
    get_num(num);
    if(num == 1)
      read_num(num);

   }while(num != 0);
 }

 int get_num(int num)
 {
   printf("Please enter an integer from 0 and 2\n");
   scanf("%d", &num);
   if (num == 1)
     return num;
 }

 void read_num(int num);
 {
   printf("Hello.\n");
 } 
```

当用户输入 1 时，read_num 函数永远不会被调用？我不明白为什么？我以为 return num; 返回什么 num 返回主。如果 num == 0，程序终止，如果 num == 1，则应该调用 read_num 函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T23:17:31.933

您的代码有很多错误： `main()`并且`getNum()`都被声明为返回一个 int，但从`main()`不返回任何内容，并且`getNum()`只有在用户输入时才返回`1`。如果您有一个函数返回除 之外的任何内容`void`，请确保每个可能的控制流都有适当的`return`语句。

然后是按值调用与按引用调用的问题。你真的应该查一下，因为这不是解释的正确地方，而且很多人写得比我好。

`read_num(num);` num 在这里是未定义的，一旦你知道 C 如何传递参数，你可能会更好地理解这一点。

返回值也是如此。C 中的函数返回值（由返回类型声明为`int get_num()`。当您调用这样的函数时，您可以将`return`值分配给变量。在 main 中您可以编写`int number = get_num()`

您的代码可能看起来有点像，但我不确定这是否是您真正想要的：

```
int main()
{
    int num;
    do {
        num = get_num();
        if(num == 1) {
            printf("%d\n", num);
        }   
    } while(num != 0);
    return 0;
}

int get_num(int num)
{
    printf("Please enter an integer from 0 and 2\n");
    scanf("%d", &num);
    if (num == 1)
        return num;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T23:08:18.470

C 使用按值传递而不是按引用传递，因此当您输入 get_num 时，您只是在使用存储在主函数的变量“num”中的值的副本。在 get_num 中操作变量“num”的值不会对主函数中的变量“num”的值进行任何更改。

要在主函数中使用“计算”​​值，您必须将 get_num 函数的返回值分配给主函数中的变量“num”。只需更换线路

```
get_num(num); 
```

和

```
num = get_num(num); 
```

一切都应该没问题。

编辑：要返回多个值，您必须将指向返回值的所需存储位置的指针传递给函数。作为示例，您的程序变体使用指针代替。

```
#include <stdio.h>
#include <stdlib.h>

int get_num(int num);
void read_num(int num);

int main()
{
  int num = 0; /* better give it a defined value here */
  int n_args_read;
  do
  {
    n_args_read = get_num(&num);
    if(n_args_read == 1)
      read_num(num);

   }while(num != 0);
 }

 int get_num(int *num)
 {
   printf("Please enter an integer from 0 and 2\n");
   return scanf("%d", num);
 }

 void read_num(int num);
 {
   printf("Hello.\n");
 } 
```

# onbeforeunload - “你确定要离开这个页面吗？” 取消和确定功能

> ID：14843454
> 
> 赞同：0
> 
> 时间：2013-02-12T22:59:23.687
> 
> 标签：onbeforeunload, dismiss

我正在尝试做一些类似于您离开的某些网站的事情，它会显示一个弹出窗口，上面写着“您确定要离开此页面”，并带有两个选项，即“取消”和“确定”。

我将如何做到这一点并做到这一点，当您单击“取消”时，它只会取消该框，而当他们单击“确定”时，它将执行“leaveChat();” 功能并离开网站？

我试过使用 onbeforeunload ，但我不确定功能部分。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T01:04:48.960

要在用户离开页面时弹出消息以确认离开，您只需执行以下操作：

```
<script>
    window.onbeforeunload = function(e) {
      return 'Are you sure you want to leave this page?  You will lose any unsaved data.';
    };
</script> 
```

调用函数：

```
<script>
    window.onbeforeunload = function(e) {
       callSomeFunction();
       return null;
    };
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-19T08:25:26.367

这是我的html

```
<!DOCTYPE HMTL>
<meta charset="UTF-8">
<html>
<head>
<title>Home</title>
<script type="text/javascript" src="script.js"></script>
</head>

 <body onload="myFunction()">
    <h1 id="belong">
        Welcome To My Home
    </h1>
    <p>
        <a id="replaceME" onclick="myFunction2(event)" href="https://www.ccis.edu">I am a student at Columbia College of Missouri.</a>
    </p>
</body> 
```

这就是我在 javaScript 中做类似事情的方式

```
var myGlobalNameHolder ="";

function myFunction(){
var myString = prompt("Enter a name", "Name Goes Here");
    myGlobalNameHolder = myString;
    if (myString != null) {
        document.getElementById("replaceME").innerHTML =
        "Hello " + myString + ". Welcome to my site";

        document.getElementById("belong").innerHTML =
        "A place you belong";
    }   
}

// create a function to pass our event too
function myFunction2(event) {   
// variable to make our event short and sweet
var x=window.onbeforeunload;
// logic to make the confirm and alert boxes
if (confirm("Are you sure you want to leave my page?") == true) {
    x = alert("Thank you " + myGlobalNameHolder + " for visiting!");
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T23:02:44.247

没有办法做到这一点。

您可以尝试在 中发送 AJAX 请求`onunload`，但我认为这不会可靠地工作。

# iphone - 视图在 iPad 上不占用全屏

> ID：14843455
> 
> 赞同：3
> 
> 时间：2013-02-12T22:59:26.923
> 
> 标签：iphone, ios, objective-c, ipad

就是这样。我正在开发一个不使用 .xib 文件加载的 iPhone (iOS) 游戏。窗口和视图以编程方式创建。它会自动检测分辨率和视网膜显示并进行相应调整。

然而，当在 iPad 上运行时（只有 iPad 模拟器），它会显示在一个与 iPhone 分辨率相同大小的迷你窗口中，右下角有一个小 2x 按钮。我希望它以全分辨率（比手机更大的分辨率）加载全屏。一切都会相应地缩放，因此它看起来与手机上的一样，并且看起来一样清晰。

为什么会这样？为什么窗口不像在 iPhone 上那样自动占据全屏？

经过大量搜索，我找到了这个模板：[https ://github.com/ryanscott/rcloudlib/blob/master/Samples/clean_universal_app_template.zip](https://github.com/ryanscott/rcloudlib/blob/master/Samples/clean_universal_app_template.zip)

它可以在 iPhone 和 iPad 上为我正确加载。

但是，查看代码，它与我所做的没有什么不同。它所做的只是检查正在使用哪个设备，并加载适当的应用程序委托，在这种情况下，它包含完全相同的代码，尽管是背景颜色。这显然是针对那些希望在 iPhone 和 iPad 上拥有不同视图负载，同时避免使用笔尖的人。我想要所有设备上的相同视图，所以我不需要使用多个委托等。

无论设备如何，如何强制应用程序委托使用全屏？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T23:05:24.503

在您的 Xcode 项目文件中，找到您的目标，转到`Summary`选项卡并确保将`Devices`其设置为 Universal 下`iOS Application Target`

![通用 iOS 应用程序设置](../Images/1414a36fc2b6de9bea02c19fa91252f2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-23T07:21:09.643

是的！在 Xcode 6 中，“设备”选项现在称为“部署目标”，位于此处：

[![在此处输入图像描述](../Images/0fb0fb4e13def9ad80b9d042012a5d20.png)](https://i.stack.imgur.com/HGdA5.png)

# php - 如何使用正则表达式找到包含所有单词的句子？

> ID：14843456
> 
> 赞同：0
> 
> 时间：2013-02-12T22:59:30.043
> 
> 标签：php, regex

我的句子： **你好，世界。我是一只狗。**

我正在使用搜索框，我想复制 Google 的自动完成功能。当用户输入单词时，匹配的字符被选择。我想匹配包含所有单词的所有句子，无论顺序如何。所以例如..

**这些关键字将匹配“Hello world。我是一条狗”。**

```
hello
dog
hello dog
i dog world hello
world dog am 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:27:00.380

如果我正确理解您的问题，您可以使用前瞻断言。

“你好狗”的一个例子：

```
^(?=.*dog)(?=.*hello).*$ 
```

对于“我狗世界你好”：

```
^(?=.*i)(?=.*dog)(?=.*world)(?=.*hello).*$ 
```

等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:01:47.207

您不需要为此使用正则表达式。实际上，我不明白您如何为此使用正则表达式。

标记该行`explode(" ", $line);`，然后查看是否所有单词都匹配。

# drupal - 从 url 路径中删除 /drupal

> ID：14843457
> 
> 赞同：0
> 
> 时间：2013-02-12T22:59:31.280
> 
> 标签：drupal, url-rewriting

我正在开发一个 Drupal 网站，我想将我的网站显示为 www.ex.com 而不是 ex.com/drupal

我试过使用这段代码：

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond %{HTTP_HOST} ^202.158.43.33$ [NC]

RewriteRule .* 202.158.43.33 [L,R=301]
RewriteRule ^$ drupal/index.php [L]
RewriteCond %{DOCUMENT_ROOT}/drupal%{REQUEST_URI} -f
RewriteRule .* drupal/$0 [L]
RewriteCond %{REQUEST_FILENAME} ! -f
RewriteCond %{REQUEST_FILENAME} ! -d
RewriteRule .* drupal/index.php?q=$0 [QSA]
</IfModule> 
```

它保存在根文件夹中，我更改了 $base_url = ' [http://www.ex.com](http://www.ex.com) '; 在 drupal/sites/default/settings.php

当我运行我的网站时，我看到的网址是：202.158.43.33/202.158.43.33/202.158.43.33/202.158.43.33......

有人可以告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:18:40.467

不要编写自己的代码，而是使用 Drupal 的默认 .htaccess 文件。然后取消注释这段代码的最后两行。

```
 # To redirect all users to access the site WITH the 'www.' prefix,
  # (http://example.com/... will be redirected to http://www.example.com/...)
  # uncomment the following:
  # RewriteCond %{HTTP_HOST} !^www\. [NC]
  # RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

虚拟主机文件配置：

```
<VirtualHost *:80>
    ServerAdmin me@mysite.com
    DocumentRoot "/var/www/http/mysite.com"
    ServerName mysite.com
    ServerAlias www.mysite.com
</VirtualHost> 
```

文档根目录应该指向您在当前站点下导航到的 Drupal，即“/drupal”子目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-11T21:05:31.590

您是否需要将 drupal 文件放在此域中的单独文件夹中？我只是在问，因为有一个明显的答案可以让一个人的 drupal 站点在根目录中运行：只需将所有文件从 drupal 文件夹（位于“drupal”文件夹中的所有文件）移动到父（根）目录和您的站点将显示在 www.yourdomain.com，而不是 www.yourdomain.com/drupal

# android - 后退按钮卡在无限循环中？

> ID：14843458
> 
> 赞同：4
> 
> 时间：2013-02-12T22:59:31.940
> 
> 标签：android

我的应用程序当前卡在带有物理后退按钮的无限循环中。该程序设置为加载启动屏幕，然后转换到主菜单。一旦进入主菜单，用户就可以切换到他们选择的另一个活动。例如：新的游戏活动。一旦用户处于新的游戏活动中，我希望他们能够点击后退按钮并将其带到主菜单。一旦回到主菜单，如果他们再次点击后退按钮，我希望它退出游戏。

这是我用于每个活动的内容：

```
public boolean onKeyDown(int keyCode, KeyEvent event) {

    if ((keyCode == KeyEvent.KEYCODE_BACK)) { 
        startActivity(new Intent(NewGameActivity.this, MenuActivity.class));
    }
    return super.onKeyDown(keyCode, event); 
} 
```

它可以正常工作，并且可以毫无问题地将用户带回主菜单。但是，如果用户在主菜单上再次点击后退按钮，它会将他们带到他们刚刚逃离的屏幕。所以它每次只是循环回到前一个屏幕。

这是主菜单的设置方式：

```
public boolean onKeyDown(int keyCode, KeyEvent event) {

    if ((keyCode == KeyEvent.KEYCODE_BACK)) { 
        stopService(new Intent(MenuActivity.this, BGMusicService.class));
        MenuActivity.this.finish();
    }
    return super.onKeyDown(keyCode, event); 
} 
```

如果我在第一次加载主菜单时按下后退按钮，它将正常工作并关闭游戏。如果我之前点击后退按钮从一个屏幕进入主菜单，它只会搞砸。

更新：

好吧，那种工作。当我在主屏幕上按下后退按钮时，音乐停止，它就像试图关闭应用程序一样，但又闪回主屏幕。我每次都要打两次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:10:36.467

您应该在活动[`finish()`](http://developer.android.com/reference/android/app/Activity.html#finish%28%29)的方法内部调用`onKeyDown`，以便实际从堆栈中删除当前活动。

像这样的东西应该工作：

```
public boolean onKeyDown(int keyCode, KeyEvent event)
{
  if (keyCode == KeyEvent.KEYCODE_BACK)
  { 
    startActivity(new Intent(NewGameActivity.this, MenuActivity.class));
    finish();
  }

  return super.onKeyDown(keyCode, event); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:39:47.887

首先（来自评论）`return true;`在`if`语句中添加（表示您已经处理了事件），如下所示：

```
// Main menu code
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) { 
        stopService(new Intent(MenuActivity.this, BGMusicService.class));
        MenuActivity.this.finish();
        return true; // Add me!
    }
    return super.onKeyDown(keyCode, event); 
} 
```

此外，我相信因为您再次“启动”菜单活动，您必须在打开它之前清除后台堆栈（到目前为止使用的活动顺序）。您*应该*能够使用[`Intent.FLAG_ACTIVITY_CLEAR_TOP`](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)（或也许`Intent.FLAG_ACTIVITY_CLEAR_TASK`）来实现这一点。像这样的东西：

```
// Other activity code
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        Intent menuIntent = new Intent(NewGameActivity.this, MenuActivity.class);
        menuIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); // Add me!
        startActivity(menuIntent);
        return true; // Add me, too!
    }
    return super.onKeyDown(keyCode, event); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T00:11:06.060

您还没有调用`finish()`其他活动，因此当您调用`finish()`菜单时，它只会自行关闭，而其他活动会暴露出来

# ios - 不安地使用 RestKit

> ID：14843459
> 
> 赞同：1
> 
> 时间：2013-02-12T22:59:32.950
> 
> 标签：ios, api, restkit

有没有办法以不安的方式使用 RestKit？

例如，如果我这样设置对象映射：

```
[manager.router routeClass:[BBMediaResourceCreate class] 
            toResourcePath:@"/mediaresources" 
                 forMethod:RKRequestMethodPOST]; 
```

RestKit 会期望我发布一个 BBMediaResourceCreate 对象并收到一个回复​​。

然而，我的 API，由于我不会讨论的原因，在某些情况下不符合 RESTful。而不是接收新创建的资源，我会得到类似的东西：

```
{ Model: { Success:true} } 
```

或类似的东西

有没有办法将 RestKit 帖子映射为发布一种类型的资源但期望得到另一种类型的响应？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:17:01.093

使用 v0.10 时，您可以简单地设置`resourcePath:@"/"`和响应

`- (void)objectLoaderDidLoadUnexpectedResponse:(RKObjectLoader *)objectLoader`

或者

`- (void)objectLoader:(RKObjectLoader *)objectLoader didLoadObject:(id)object`

`[objectLoader response]`并按照您的意愿处理响应。请记住，发布到该资源需要明确的手动设置路径。

# asp.net-mvc - 通过一次调用在 MVC 中渲染图像以获取聚合的最佳实践是什么

> ID：14843461
> 
> 赞同：2
> 
> 时间：2013-02-12T22:59:43.943
> 
> 标签：asp.net-mvc, image, viewmodel

我有一个问题想发表一些意见。我完全明白我不能直接从我的视图模型渲染图像（字节 []）。我知道我需要一个 id 来代表我的视图模型中的图像。

一旦我将我的视图模型绑定到我的视图，我就可以执行以下操作：

```
<img src="@Url.Action("GetPhoto", new { photoId = Model.PhotoId })" /> 
```

然后这个：

```
public ActionResult GetPhoto(int photoId)
{
    byte[] photo = GetPhotoFromDb(photoId);
    return File(photo, "image/jpeg"); 
} 
```

但是，我调用了第 3 方 Web 服务（我不控制它），我调用它来获取填充我的视图模型的聚合。像这样的一些事情：

```
-Vehicle
  -VehicleId
  -VehicleName
  -VehicleImage byte[] <=======
  -VehicleServiceHistory
    -ServiceHistoryId
    -SericeType
    -ServiceTitle 
```

所以理论上我可以打电话给第 3 方网络服务人员说，我知道你已经给了我的 VehicleImage 汇总（上图），但我可以单独调用一个名为 GetImageById(int imageId) 的新服务方法吗.

所以让我们假设他们**说不**。所以我所拥有的只是已经拥有我的图像的数据聚合，但我知道我必须像上面所说的那样将图像单独加载到视图中：

```
<img src="@Url.Action("GetPhoto", new { photoId = Model.PhotoId })" /> 
```

我可以做一些讨厌的事情，比如当聚合从 Web 服务下来时将图像添加到会话中并询问会话以使用 photoId 获取图像， **但我没有办法这样做。**

任何人都可以给我任何想法，让我了解如何使用已经可用的图像，而无需再打另一个电话。

注意：我完全可以调用单独的操作：

```
public ActionResult GetPhoto(int photoId)
{
    byte[] photo = GetPhotoFromDb(photoId);
    return File(photo, "image/jpeg"); 
} 
```

但我想在此操作中使用已在聚合中提供的图像，而不必再次调用该服务。

期待听到您的建议。

谢谢RuSs

注意：这篇文章已经在这里发布了几个星期，肯定有人有意见！！:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:01:49.493

> 我完全明白我不能直接从我的视图模型渲染图像（字节 []）

实际上，如果浏览器支持[`data URI scheme`](http://en.wikipedia.org/wiki/Data_URI_scheme)：

```
<img src="data:image/jpeg;base64,@Html.Raw(Convert.ToBase64String(Model.VehicleImage))" /> 
```

除此之外没有太多选择。您必须在 2 个 HTTP 调用之间将图像保存在服务器上的某个位置。我祝贺你不希望为此使用 Session。这不是正确的存储方式。一种可能性是将图像保存在服务器上的某个文件夹（如果您在网络农场上运行，则为共享文件夹），然后仅通过 id 引用图像。所以基本上你将在你的基础设施上缓存远程图像。您可能有一些计划的脚本正在删除早于您可以定义的某个日期的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T06:34:00.693

答案是您必须填充包含您要渲染的图像的 id 的视图模型。

一旦 viewmodel 被渲染，你必须像这样调用另一个控制器动作：

```
public ActionResult GetPhoto(int photoId()
{
    byte[] photo = GetPhotoFromDb(photoId);
    return File(photo, "image/jpeg"); 
} 
```

经过大量调查，除非所有浏览器都支持数据 URI 方案，否则似乎就是这样。

```
<img src="data:image/jpeg;base64,@Html.Raw(Convert.ToBase64String(Model.VehicleImage))" /> 
```

希望这可以帮助。

# c# - 如何使用反射来调用 DbModelBuilder.Entity .忽略（x => x.Property）？

> ID：14843462
> 
> 赞同：2
> 
> 时间：2013-02-12T22:59:51.777
> 
> 标签：c#, reflection, entity-framework-5

我正在根据我的 poco 类上的属性动态执行流利的映射，并且我的 .Property 案例工作正常，但是尝试运行 .Ignore() 方法时失败了：

```
private void AddEntities(DbModelBuilder modelBuilder)
{
    var entityMethod = typeof(DbModelBuilder).GetMethod("Entity");
    foreach (var entityType in EntityBaseTypes)
    {
        dynamic entityConfiguration = entityMethod.MakeGenericMethod(entityType).Invoke(modelBuilder, new object[] { });
        foreach (PropertyInfo propertyInfo in entityType.GetProperties().Where(x => x.CanWrite))
        {

            foreach (var attribute in propertyInfo.GetCustomAttributes())
            {
                LambdaExpression propertyLambda = PropertyGetLambda(entityType, propertyInfo.Name, typeof(string));
                string attributeName = attribute.GetType().Name;
                if (attributeName == "NotMappedAttribute")
                {
                    MethodInfo ignoreMethod = (MethodInfo)entityConfiguration.GetType().GetMethod("Ignore");                            
//BLOWS UP HERE: Late bound operations cannot be performed on types or methods for which ContainsGenericParameters is true
                    ignoreMethod.Invoke(entityConfiguration, new[] { propertyLambda });

                }
                else if (attributeName == "ColumnAttribute")
                {
                    dynamic column = attribute;
                    var propertyMethod = entityConfiguration.GetType().GetMethod("Property", new Type[] { propertyLambda.GetType() });
                    var entityProperty = (PrimitivePropertyConfiguration)propertyMethod.Invoke(entityConfiguration, new[] { propertyLambda });
//WORKS FINE:
                    entityProperty.HasColumnName(column.Name);
                }
            }
        }

    }
} 
```

我认为 .Ignore() 方法参数所需的类型不同。这是我试图调用的方法：[.Ignore()](http://msdn.microsoft.com/en-us/library/gg671225%28v=vs.103%29.aspx)

```
public void Ignore<TProperty>(
    Expression<Func<TStructuralType, TProperty>> propertyExpression
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:20:44.160

我认为您需要使用以下方法获取`MemberInfo`方法`Ignore`：

```
MethodInfo ignoreMethod = typeof(StructuralTypeConfiguration<>)
    .MakeGenericType(entityType)
    .GetMethod("Ignore")
    .MakeGenericMethod(propertyInfo.PropertyType); 
```

`Ignore`是一个具有与 的属性类型相对应的泛型参数的方法`Expression`，因此您需要在尝试调用它之前提供属性类型。

# sencha-touch-2 - Sencha Touch：能够在列表中的未读项目旁边有一个点

> ID：14843463
> 
> 赞同：1
> 
> 时间：2013-02-12T22:59:51.853
> 
> 标签：sencha-touch-2

我只是想知道是否有办法在列表中的未读项目旁边放一个点，然后跟踪哪些项目已读，哪些未读？（就像 iOS 上的邮件应用程序）

我知道我可以手动执行此操作，但我想知道框架是否已经满足了这一要求。我广泛的狩猎一无所获，所以我想在自己写东西之前先在这里问一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:53:59.157

默认情况下，将点作为 css 类添加到列表项中。在 itemtap 事件中删除类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T21:01:37.263

虽然这可以手动完成，但似乎不存在作为列表模块的一部分的插件或功能。

# php - .htaccess URL 参数重写为 NGINX

> ID：14843465
> 
> 赞同：0
> 
> 时间：2013-02-12T22:59:56.330
> 
> 标签：php, apache, .htaccess, nginx

我们正在将一个 PHP 站点从 Apache 迁移到 NGINX，并在尝试让 NGINX 识别从站点 URL 传递到 index.php 的参数时遇到了问题。

我们在 Apache 上的 .htaccess 命令看起来像这样

```
RewriteEngine on 

RewriteBase /

RewriteRule ^([^/.]+)/([^/.]+)/([^/.]+)[/]?$   /index.php?market=$1&area=$2&id=$3 [L] 
```

这个规则让 index.php 明白 $market 来自第一个 URL 参数，$area 来自第二个，$id 来自第三个。

因此，www.domain.com/miami/profiles/100 为 index.php 提供了 $market = miami、$area = profiles 和 $id = 100。

我们尝试了各种失败的解决方案，希望在站点的 NGINX conf 文件中实现相同的目标。以下是我们尝试过的一些不起作用的方法：

```
location /sitename {
    root /www/sitename;
    try_files $uri /sitename/index.php?market=$args&area=$args&id=$args;
}

location /sitename {
    root /www/sitename;
    try_files $uri /sitename/index.php/?market=$args?area=$args?id=$args;
}

location /sitename {
    rewrite "^/index.php/([a-zA-Z]+)/([a-zA-Z]+)/([a-zA-Z]{3})$"
    /index.php?market=$1&area=$2&id=$3 last;    
} 
```

任何人都可以在这里发现我们做错了什么并向我们展示解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:22:44.827

您尝试像这样访问该站点：“www.domain.com/miami/profiles/100”，但在您的重写规则中，您指定请求 URL 必须包含“index.php”，因此您应该像这样访问它：“ www.domain.com/index.php/miami/profiles/100”。或者稍微修改一下你的正则表达式，让它看起来更干净：

```
location /sitename {
    rewrite "^/([a-zA-Z]+)/([a-zA-Z]+)/([a-zA-Z]{3})$"
    /index.php?market=$1&area=$2&id=$3 last;    
} 
```

现在您可以按照您想要的方式访问该网站：www.domain.com/miami/profiles/100

# algorithm - 解决没有可变性的迷宫的最简单方法

> ID：14843466
> 
> 赞同：1
> 
> 时间：2013-02-12T23:00:00.190
> 
> 标签：algorithm, functional-programming, maze

在学习了一些 Scala 和 FP 的好处之后，我正在重新实现我之前的一些 CS 作业，以更好地理解 FP。然而，我得到了一项似乎用 FP 实现的任务（或至少是微不足道的翻译）。

在解决简单的 2D 迷宫时，有必要记住访问过哪些节点。但是，如果没有共享状态，每个递归调用如何知道其他递归调用检查了哪些节点？我可以将迷宫作为参数传递给每个递归调用，并返回一个包含访问过的地方的新迷宫，但这似乎计算量太大，无法在每个递归调用中复制整个迷宫。是否需要更高级的方法来实现不可变迷宫求解器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T23:04:16.813

您可以传递包含访问节点的集合（如果节点本身在您的设置中具有可比性，则可以传递它们的 ID/名称）。将项目添加到不可变集合通常需要`O(log n)`，因此检查元素是否包含在集合中。所以这比复制迷宫要便宜得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T01:53:14.517

也许您注意到我之前的答案已被删除。虽然我是在开玩笑，但同时也只是暗示“计算机显示所有死角为红色，连接入口和出口的路径为绿色”，同时也隐喻了我所理解的功能范式 - 一种包含预先计算的确定性。鉴于我的理解和知识有限，我在 Haskell 中研究了一个避免递归深度搜索的示例，计算 4x5 迷宫的路径，给定一个数组，其中迷宫中的每个单元（即每个数组元素）仅包含它可以连接到的单元格；-1 表示入口，-2 表示出口。（您可以在代码部分的顶部看到迷宫的轮廓。）我知道，更有经验的程序员可以做得更多更好。

```
 {-M A Z E-}
[E]=[ ]=[ ]=[ ] 
     |
[ ]=[ ]=[ ]=[ ]
     |       |
[ ] [ ]=[ ] [ ]
 |   |       |
[ ] [ ]=[ ]=[ ]
 |   |
[ ]=[ ]=[ ]=[E]

import Data.List
import Data.Maybe

--Each element in the maze lists the indexes of connected cells, '-1' for entrance, '-2' for exit
maze = [[-1,1],  [0,2,5],     [1,3],   [2],
        [5],     [4,6,1,9],   [5,7],   [6,11],
        [12],    [5,13,10],   [9],     [7,15],
        [8,16],  [14,9,17],   [13,15], [14,11],
        [12,17], [13,16,18],  [17,19], [18,-2]]

maze' = [[-1,1],  [0,2],    [1,3],   [2,7],
         [8,5],   [4,6],    [5,7],   [3,6],
         [4,9],   [8,10],   [9,11],  [10,15],
         [16,13], [12,14],  [13,15], [11,14],
         [12,17], [16,18],  [17,19], [18,-2]]

index a = fromJust $ elemIndex a maze
indexes a = map (index) a
areConnected index_a index_b = elem index_a (maze !! index_b)

isStart a  --(a :: cell)
  | elem (-1) a = True
  | otherwise   = False

isEnd a  --(a :: cell)
  | elem (-2) a = True
  | otherwise   = False

hasStart a   --(a :: [cell])
  | isStart (head a) = True
  | otherwise    = False

hasEnd a   --(a :: [cell])
  | isEnd (last a) = True
  | otherwise    = False

isSequenced (w:x:xs) (y:z:zs) --includes possibility of overlap since we do not know how many cells comprise the solution
  | areConnected (index $ last xs) (index y)
    || last xs == y
    || let (b:c:cs) = reverse (w:x:xs) in [c,b] == [y,z] = True
  | otherwise                                            = False

removeBacktracks (x:xs)
  | (x:xs) == []                                     = []
  | xs == []                                         = [x]
  | x == head xs                                     = removeBacktracks xs
  | length xs > 1 && x == let (y:ys) = xs in head ys = removeBacktracks (tail xs)
  | otherwise                                        = x : removeBacktracks xs

--list dead ends
dead_ends = filter (\x -> length x==1 && find (==(-1)) x == Nothing) maze
dead_ends_indexes = map (index) dead_ends

connectedToDeadEnd (x:xs)
  | x `elem` dead_ends_indexes                   = True
  | not (x `elem` dead_ends_indexes) && xs == [] = False
  | otherwise                                    = connectedToDeadEnd xs

--list first from dead ends
first_from_dead_ends = filter (\x -> length x==2 && find (==(-1)) x == Nothing && connectedToDeadEnd x) maze

--create sequences
filtered = [l | l <- maze, not (elem l dead_ends) && not (elem l first_from_dead_ends)]
sequences_3 = [[a,b,c] | a <- filtered, not (isEnd a),
                         b <- filtered, not (isEnd b || isStart b), areConnected (index a) (index b),
                         c <- filtered, not (isStart c), a /= c, areConnected (index b) (index c)]

sequences_4 = [a ++ [b] | a <- sequences_3, not (hasEnd a), b <- filtered,
                          last a /= b, areConnected (index $last a) (index b)]

paths = take 1 [indexes $ concat [a, b, c, d, e] | a <- sequences, hasStart a,
                                                   b <- sequences, not (hasStart b || hasEnd b),
                                                   isSequenced a b,
                                                   c <- sequences, b /= c, not (hasStart c || hasEnd c),
                                                   isSequenced b c,
                                                   d <- sequences, c /= d, not (hasStart d || hasEnd d),
                                                   isSequenced c d,
                                                   e <- sequences, hasEnd e,
                                                   isSequenced d e]
                                                 where sequences 
                                                         | length filtered < 16 = sequences_3
                                                         | otherwise            = sequences_4

path = removeBacktracks $ head paths
main = print path
--outputs: [0,1,5,9,13,17,18,19] 
```

# networking - TCP/IP 网络数据传输的字节序

> ID：14843470
> 
> 赞同：0
> 
> 时间：2013-02-12T23:00:17.367
> 
> 标签：networking, language-agnostic, tcp, ip, endianness

这是我很久以前一直试图解决的一个问题。这并没有达到特定的语言，尽管它对于某些具有指定字节顺序的 VM 的人来说并不是真正有益的。我知道，就像 99.9999% 使用套接字使用 TCP/IP 发送数据的人一样，该协议为传输元素指定了字节序，例如目标地址、端口等。我不知道的是**它是否要求有效负载采用特定格式以防止不兼容**。

例如，假设我开发了一个不是[表示层](http://en.wikipedia.org/wiki/Presentation_Layer)的协议，并且由于现在小端设备的巨大优势，我决定使其成为小端（例如玩家的位置等被传输以小端序）。例如，用于游戏引擎的网络模块，其中延迟很重要，字节转换将花费大量时间。当然，地址、端口和所有与协议相关的数据将在大端中指定，这是强制性的，我说的是有效负载，仅此而已。

该协议是否可以在大端机器上开箱即用（根据需要翻译内容，当然，一旦接收到传输）？或者，由于数据的顺序不同，IP 协议或类似的校验和是否会计算错误，如果不使用 raw_sockets，程序员就无法控制它们？

由于整个解释可能会产生误导，请随时要求澄清。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T23:07:02.430

> 我不知道的是它是否需要有效负载采用特定格式以防止不兼容。

它没有，也没有办法说出来。对于 TCP，它只是一个字节流。由应用程序协议决定字节顺序，并由每一端的实现者来正确实现它。有使用大端的*约定，但没有强制要求。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T23:13:49.897

应用层协议规定了它们自己的字节顺序。但是，按照惯例，多字节整数值应按[网络字节顺序（大端）](http://en.wikipedia.org/wiki/Network_byte_order#Endianness_in_networking)发送，以实现跨平台的一致性，例如通过使用平台提供的`hton...()`（主机到网络）和`ntoh...()`（网络到主机）函数您的代码中的实现。在 little-endian 系统上，它们会进行必要的字节交换。在大端系统上，它们是无操作的。这些函数提供了一个抽象层，因此代码不必担心这一点。

# javascript - 具有添加和删除功能的动态搜索过滤器

> ID：14843475
> 
> 赞同：0
> 
> 时间：2013-02-12T23:01:08.007
> 
> 标签：javascript, ajax, drupal, search, solr

我想知道是否有框架或一些示例代码来为搜索结果创建动态过滤器以允许用户构建结果。我想向用户展示他们选择的过滤器，并有一个小 x 按钮供他们删除过滤器，就像这个网站 [http://www.soap.com/buy/Type=Acne+Treatments%7CBar+Soaps?s =玉兰油](http://www.soap.com/buy/Type=Acne+Treatments%7CBar+Soaps?s=Olay)

![在此处输入图像描述](../Images/f9a63a01de2ab932f944bc8ee3567aa9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T03:18:19.923

由于您使用 JavaScript、HTML 和 AJAX 标记了这个问题，请查看[ajax-solr 项目](https://github.com/evolvingweb/ajax-solr)。ajax-solr的[Reuters 演示站点](http://evolvingweb.github.com/ajax-solr/examples/reuters/index.html)实现了这种类型的搜索过滤器行为，他们还通过[教程的第 5](https://github.com/evolvingweb/ajax-solr/wiki/Reuters-tutorial%3a-step-5)步向您介绍了如何构建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T02:28:00.393

您应该查看 Solr 方面查询。此页面应该可以帮助您入门：[http ://searchhub.org/2009/09/02/faceted-search-with-solr/](http://searchhub.org/2009/09/02/faceted-search-with-solr/)

# javascript - JavaScript array.length 返回正确的数字，但 console.log(array) 为空

> ID：14843476
> 
> 赞同：1
> 
> 时间：2013-02-12T23:01:17.563
> 
> 标签：javascript, arrays, forms

我在这里获取 HTML 复选框的表单数据：

```
host1 = document.getElementById("host1").checked;
host2 = document.getElementById("host2").checked;
host3 = document.getElementById("host3").checked;
host4 = document.getElementById("host4").checked;
host1Value = document.getElementById("host1").value;
host2Value = document.getElementById("host2").value;
host3Value = document.getElementById("host3").value;
host4Value = document.getElementById("host4").value; 
```

将已检查的内容附加到空数组并将变量设置为数组长度：

```
if (host1) {hostsArray.push(host1Value); };
if (host2) {hostsArray.push(host2Value); };
if (host3) {hostsArray.push(host3Value); };
if (host4) {hostsArray.push(host4Value); };
hostsNum = hostsArray.length; 
```

当我将 hostNum 和 hostsArray 记录到控制台时，hostNum 正确识别了复选框的数量，因此数组报告了正确的长度，但数组记录为空。我不知所措。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-25T17:16:41.623

这段代码在 Chrome 中运行良好，你也可以在这个 JSbin 上看到它：http: [//jsbin.com/eSuwAri/2](http://jsbin.com/eSuwAri/2)

我用一个简单的 for 循环对其进行了重构，但它与您的示例几乎相同。我认为问题出在您的 js 或 html 代码的其他地方。

HTML：

```
<input id="host1" type="checkbox" name="host1name" value="host1value">host1 text<br>
<input id="host2" type="checkbox" name="host2name" value="host2value">host2 text<br>
<input id="host3" type="checkbox" name="host3name" value="host3value">host3 text<br> 
<input id="host4" type="checkbox" name="host4name" value="host4value">host4 text<br>               
<button onclick="test()">Click me</button> 
```

Javascript：

```
 function test(){
        var hostsArray = new Array();
        for (var i=1;i<=4;i++){ 
            var id = "host" + i;
            var checked = document.getElementById(id).checked;
            var value = document.getElementById(id).value;

            if (checked) {
                hostsArray.push(value) 
            };
        }
        hostsNum = hostsArray.length;

        console.log("Array : ")
        console.log(hostsArray);
        console.log("number of value : " +  hostsNum);
    } 
```

控制台输出：

```
"Array : "
["host1value", "host2value", "host3value", "host4value"]
"number of value : 4" 
```

# c++ - 为什么`std::string`有`find`成员函数？

> ID：14843477
> 
> 赞同：10
> 
> 时间：2013-02-12T23:01:18.703
> 
> 标签：c++, string, stl, stdstring

为什么`std::string`有`find`会员功能而`std::vector`朋友没有呢？

`std::find`在字符串上使用有什么问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-12T23:10:20.323

这主要是出于历史原因，但不仅如此。

字符串库和 STL（由 A. Stepanov 开发的容器/算法库，最终成为 C++ 标准库的一部分）是独立开发的，它们采用了不同的约定。

然而，由于它们最终都融合到 C++ 标准库中，C++ 标准确实努力统一这些语法约定并允许将s与`string`STL 算法一起使用，这就是为什么类`string`具有成员函数，例如.`begin()``end()``substr()`

无论如何，除了向后兼容性之外，提供成员函数还有另一个原因，`string`例如`find()`：与容器不同，容器旨在与访问或操作其*元素*的通用算法一起工作，字符串通常被认为是值本身，而不是值的*集合*（即`char`s 的序列）。`string`因此，将操作值的算法封装到类的成员函数中是有意义的`string`。

因此，在其设计中，C++ 标准库支持`string`s 的这两种视图：作为值的集合和作为值本身。

**更新：**

您的第一句话“虽然`std::vector` *和朋友*没有”并不完全正确。至少，如果您将`std::vector`' 的朋友范围扩展到`std::set`, `std::multiset`, `std::map`, `std::multimap`, `std::unordered_set`, 和`std::unordered_map`（换句话说，几乎扩展到 C++ 标准库中的所有关联容器），则不会。

某些数据结构确实在其接口上具有某些通用 STL 算法的成员函数版本：这要么表明这些算法比那些特定数据结构（例如`find()`）的通用对应物具有更有效的实现，要么表明一个专门的实现是必要的，因为通用算法根本不能应用于那些数据结构（例如`std::remove()`，它*修改*容器中的值）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T23:22:09.637

`std::string::find` ^((*))的语义与 的语义完全不同`std::find`。在该算法的情况下，它将在容器内找到一个元素，如果您将其应用于某个`std::string`装置，则可以*找到字符为 X 的位置*。

成员函数`std::string::find`（除了接受单个 的一个变体`charT`）有不同的目的，它们查找*子字符串*（即一系列值而不是单个值）。

下一个问题是为什么存在一个需要 a 的重载，`charT`而它可能只是对`std::find`. 正如安迪在他的回答中提到的，STL 和字符串库的实现是分开发生的。然后将迭代器添加到`std::string`组件中。当迭代器被添加到 时`std::string`，这个重载已经存在，即使它不存在，语义仍然`std::find`与其余部分有所不同`std::string::find`，而不是迭代器，它们采用并返回*位置*。这并不意味着一个不能根据另一个来实现，只是那个代码会更复杂。

^((*))忍受我...读起来`std::string`好像它是拼写的`std::basic_string<>`

# sql-server - 如何在 Visual Studio 2012 Web Express 中提交数据库表更改？

> ID：14843481
> 
> 赞同：6
> 
> 时间：2013-02-12T23:01:37.303
> 
> 标签：sql-server, visual-studio, tsql, visual-studio-2012

这可能很明显，但我看不到。

我正在使用 Visual Studio 2012 Web Express。我使用内部编辑器打开一个现有的数据库表，转到表定义并添加几个额外的列。

我可以看到创建表的 T-SQL，如果我保存表，我会收到保存 SQL 文件的提示，如果我运行 SQL，它是一个创建表...

如何更改现有表？我真的必须手动执行此操作吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T01:38:10.427

在左上角会有一个按钮，上面写着“更新”。这会将更改推送到您的数据库。然后它将创建一个您将运行的更改脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-13T22:25:54.463

{要解决 MS SQL Server 2012 中的问题 - 此单元格已更改，更改尚未提交到数据库}

找到第三行左侧的“**更改类型”下拉菜单，您可以在其中找到****更新**选项，该选项将更新表中的记录。

[![查看屏幕截图](../Images/8095d7235e2447ae51f8c85258d24031.png)](https://i.stack.imgur.com/UoQMb.jpg).

# excel - 打印命名范围的宏

> ID：14843484
> 
> 赞同：0
> 
> 时间：2013-02-12T23:01:50.513
> 
> 标签：excel, excel-2010, vba

我正在尝试组装一个宏来弹出一个对话框来选择您的打印机，然后打印具有特定属性的特定命名范围。我从一个可以正常工作的小测试语句开始。

```
Sub test()
' test Macro

    Application.Dialogs(xlDialogPrinterSetup).Show
    ActiveSheet.PageSetup.PrintArea = "Print_20_Year"
    ActiveWindow.SelectedSheets.PrintOut Copies:=1, Collate:=True, IgnorePrintAreas:=False

End Sub 
```

然后我搬进了更大的枪，我无法让它正常工作。我将 包含`MsgBox`在宏中以查看是否有任何项目正在触发。

没有错误，没有`MsgBox`弹出窗口。有什么想法吗？

*编辑*这是我的新代码和当前代码。它工作正常，一旦我取消对 printrowtiles 的注释，它就会中断。这是它直接从录制宏中给出的代码。

```
Sub Print_20_Year()
'
' Print_20_Year Macro
'
'
'
'    Range("Print_20_Year").Select
    MsgBox "Step .4"
    Application.Dialogs(xlDialogPrinterSetup).Show
    MsgBox "Step .6"
    Application.PrintCommunication = False
   MsgBox "Step .7"
'    With ActiveSheet.PageSetup
'        .PrintTitleRows = "$4:$13"
    MsgBox "Step .8"
'        .PrintTitleColumns = ""
'    End With
    MsgBox "Step .9"
    Application.PrintCommunication = True
    MsgBox "Step 1"
    Application.PrintCommunication = False
    With ActiveSheet.PageSetup
        .LeftHeader = ""
        .CenterHeader = ""
        .RightHeader = ""
        .LeftFooter = ""
        .CenterFooter = ""
        .RightFooter = ""
        .LeftMargin = Application.InchesToPoints(0.5)
        .RightMargin = Application.InchesToPoints(0.5)
        .TopMargin = Application.InchesToPoints(0.5)
        .BottomMargin = Application.InchesToPoints(0.5)
        .HeaderMargin = Application.InchesToPoints(0)
        .FooterMargin = Application.InchesToPoints(0)
        .PrintHeadings = False
        .PrintGridlines = False
        .PrintComments = xlPrintNoComments
        .PrintQuality = 600
        .CenterHorizontally = False
        .CenterVertically = False
        .Orientation = xlLandscape
        .Draft = False
        .PaperSize = xlPaperTabloid
        .FirstPageNumber = xlAutomatic
        .Order = xlDownThenOver
        .BlackAndWhite = False
        .Zoom = False
        .FitToPagesWide = 1
        .FitToPagesTall = False
        .PrintErrors = xlPrintErrorsDisplayed
        .OddAndEvenPagesHeaderFooter = False
        .DifferentFirstPageHeaderFooter = False
        .ScaleWithDocHeaderFooter = True
        .AlignMarginsHeaderFooter = False
        .EvenPage.LeftHeader.Text = ""
        .EvenPage.CenterHeader.Text = ""
        .EvenPage.RightHeader.Text = ""
        .EvenPage.LeftFooter.Text = ""
        .EvenPage.CenterFooter.Text = ""
        .EvenPage.RightFooter.Text = ""
        .FirstPage.LeftHeader.Text = ""
        .FirstPage.CenterHeader.Text = ""
        .FirstPage.RightHeader.Text = ""
        .FirstPage.LeftFooter.Text = ""
        .FirstPage.CenterFooter.Text = ""
        .FirstPage.RightFooter.Text = ""
    End With
    Application.PrintCommunication = True
    MsgBox "Step 2"
    ActiveSheet.PageSetup.PrintArea = "Print_20_Year"
    MsgBox "Step 3"
    ActiveWindow.SelectedSheets.PrintOut Copies:=1, Collate:=True, IgnorePrintAreas:=False
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T03:53:33.370

如果您没有收到任何 MsgBox 弹出窗口，那么您甚至无法通过前几行。我的怀疑是一开始就出了问题：

```
Application.Dialogs(xlDialogPrinterSetup).Show
    ActiveSheet.PageSetup.PrintArea = "Print_20_Year"
    With ActiveSheet.PageSetup
        .PrintTitleRows = "$4:$13"
        .PrintTitleColumns = ""    <<<< this worries me. What are you trying to do?
    End With
    MsgBox "Step 1"     <<<<< if you don't get here, one of the lines before this causes a silent error... 
```

我建议`On Error GoTo ErrorHandler`在您的 sub 中添加一条语句作为第一行；然后添加（通常在子结束之前）

```
ErrorHandler:
    MsgBox "Oops - an error occurred. " & Err.Description 
```

这可能需要您进行更多调查才能解决...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:03:26.617

经过一番摸索，我意识到不知何故它`printtitlerows`正在与我在下面写的一个单独的 UDF 交互：

```
Function IsFormula(c)
IsFormula = c.HasFormula
End Function 
```

此 UDF 与一种条件格式相关联，该格式突出显示其中包含公式的单元格。我们使用它来轻松识别我们必须手动更改/输入的信息。我无法解释为什么 UDF 会造成问题，但是当我删除它时，我的宏运行良好。再次添加我的公式宏后，我只是在代码的开头和结尾添加了`Application.ScreenUpdating = False`和。`Application.ScreenUpdating = True`这解决了这个问题。

# complexity-theory - 为什么冒泡排序复杂度为 O(n^2)？

> ID：14843486
> 
> 赞同：2
> 
> 时间：2013-02-12T23:02:08.397
> 
> 标签：complexity-theory, sorting, bubble-sort

据我了解，算法的复杂性是排序时执行的最大操作数。因此，冒泡排序的复杂度应该是算术级数的总和（从 1 到 n-1），而不是 n^2。以下实现计算比较次数：

```
public int[] sort(int[] a) {
    int operationsCount = 0;
    for (int i = 0; i < a.length; i++) {
        for(int j = i + 1; j < a.length; j++) {
            operationsCount++;
            if (a[i] > a[j]) {
                int temp = a[i];
                a[i] = a[j];
                a[j] = temp;
            }
        }
    }
    System.out.println(operationsCount);
    return a;
} 
```

具有 10 个元素的数组的输出为 45，因此它是从 1 到 9 的算术级数之和。

那么为什么冒泡排序的复杂度是 n^2，而不是 S(n-1) 呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T23:08:22.607

这是因为大 O 表示法描述了算法的性质。扩展中的主要术语`(n-1) * (n-2) / 2`是`n^2`. 因此，随着`n`增加，所有其他项都变得微不足道。

欢迎您更准确地描述它，但出于所有意图和目的，该算法表现出的*行为*是有序的`n^2`。这意味着，如果您针对 绘制时间复杂度`n`，您将看到一条抛物线增长曲线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:43:11.193

让我们做一个最坏的情况分析。

在最坏的情况下，`if (a[i] > a[j])`测试将始终为真，因此接下来的 3 行代码将在每个循环步骤中执行。内部循环从 j=i+1 到 n-1，因此它将执行`Sum_{j=i+1}^{n-1}{k}`基本操作（其中 k 是涉及创建`temp`变量、数组索引和值复制的操作的恒定数量）。如果你解决求和，它会给出一些等于 的基本运算`k(n-i-1)`。外部循环将重复`k(n-i-1)`从 i=0 到 i=n-1（即`Sum_{i=0}^{n-1}{k(n-i-1)}`）的基本操作。所以，再一次，如果你解决求和，你会看到基本操作的最终数量与 n^2 成正比。该算法在最坏的情况下是二次的。

当您`operationsCount`在内循环中运行任何代码之前递增变量时，我们可以说我们之前分析中的 k（在内循环内执行的基本操作的数量）为 1。因此，求解`Sum_{i=0}^{n-1}{n-i-1}`给出`n^2/2 - n/2`，并将 n 替换为 10 给出最终结果为 45，与运行代码得到的结果相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-05T15:09:41.587

最坏情况：表示给定任何大小为 n 的输入，算法执行的最长运行时间

所以我们将考虑这个最坏情况的完全倒退列表

```
int[] arr= new int[]{9,6,5,3,2};

Number of iteration or for loops required to completely sort it  = n-1 //n - number of elements in the list

1st iteration requires (n-1) swapping + 2nd iteration requires (n-2) swapping + ……….. + (n-1)th iteration requires (n-(n-1)) swapping

i.e. (n-1) + (n-2) + ……….. +1 = n/2(a+l) //sum of AP
=n/2((n-1)+1)=n^2/2 
```

这么大的 O 表示法 = O(n^2)

# android - 我的 android 应用程序使用大量内存

> ID：14843488
> 
> 赞同：1
> 
> 时间：2013-02-12T23:02:17.333
> 
> 标签：android, memory

我有简单的安卓应用程序。应用程序包含大约 50 张图片，主要是 PNG 格式，但其中大部分是图标大小。大约有 5 种布局，并使用 Google 地图和 WebView。应用程序本身的重量低于 6MB。

然后我运行所有应用程序选项，然后查看应用程序设置 -> 缓存进程，我看到我的应用程序使用了 70 MB 的 RAM ！！！

我可以调用`finish()`方法，但这无济于事。什么可以帮助减少内存使用？

就连愤怒的小鸟也少用了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:20:51.497

创建一个可绘制文件夹并将所有这 9 个补丁图像放在那里。部署 onDestroy() 以填充活动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T06:17:31.423

最好的方法是为您的应用程序使用 9 个补丁[PNG 图像](http://developer.android.com/tools/help/draw9patch.html)。这肯定会帮助您减少缓存大小以及应用程序大小。根据android生命周期过度部署应用程序代码，过度使用finish（）会使活动进入onpause（）状态，所以在你想杀死那个活动的地方使用onDestroy（）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T06:28:01.800

请在不影响图像质量的情况下压缩每张图像，然后处理泄漏的内存。每个活动动作完成，然后完成该活动。一旦您退出应用程序。销毁所有正在运行的方法。如果您需要手动清除内存，请调用位图对象的 .recycle() 方法。我认为它可以帮助您减少内存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T23:44:22.797

可能是您使用[创建不可变位图的方法](http://developer.android.com/reference/android/graphics/Bitmap.html#createBitmap%28android.util.DisplayMetrics,%20int%5B%5D,%20int,%20int,%20android.graphics.Bitmap.Config%29)加载位图并且没有充分释放它们（您必须小心处理它们的所有引用，否则垃圾收集器将永远不会释放它们正在使用的空间。

如果是这种情况，[此参考](http://developer.android.com/training/displaying-bitmaps/index.html)可能会帮助您了解您正在使用的位图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T05:41:50.863

尝试这样的事情，它可能会帮助我猜：

```
@Override
protected void onDestroy() {
super.onDestroy();

unbindDrawables(findViewById(R.id.LayoutId));
System.gc();
} 
```

# ruby-on-rails - Routes.rb - 从 Rails 2.x 到 Rails 3.x “如何使用 Ruby on Rails 从头开始 创建博客”教程

> ID：14843489
> 
> 赞同：0
> 
> 时间：2013-02-12T23:02:18.203
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-2

[我正在研究http://sixrevisions.com](http://sixrevisions.com)上的“如何使用 Ruby on Rails 从头开始​​创建博客” 。本教程是为 Rails 2.x 创建的。我试图让它在 Rails 3.x 上运行。. 当我运行服务器并运行 localhost:3000 时，会出现一些严重的路由错误：

```
 Called from: C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.6/lib/ac
    tion_dispatch/middleware/session/abstract_store.rb:28:in `initialize'.

    Exiting
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/routing
    /mapper.rb:185:in `default_controller_and_action': missing :action (ArgumentError)
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.6/lib/action_dis
    patch/routing/mapper.rb:78:in `normalize_options!'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.6/lib/action_dis
    patch/routing/mapper.rb:61:in `initialize'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.6/lib/action_dis
    patch/routing/mapper.rb:1304:in `new'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.6/lib/action_dis
    patch/routing/mapper.rb:1304:in `add_route'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.6/lib/action_dis
    patch/routing/mapper.rb:1284:in `decomposed_match'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.6/lib/action_dis
    patch/routing/mapper.rb:1270:in `block in match'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.6/lib/action_dis
    patch/routing/mapper.rb:1270:in `each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.6/lib/action_dis
    patch/routing/mapper.rb:1270:in `match'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.6/lib/action_dis
    patch/routing/mapper.rb:260:in `root'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.6/lib/action_dis
    patch/routing/mapper.rb:1317:in `root'
    from D:/myblog/config/routes.rb:5:in `block in <top (required)>'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.6/lib/action_dis
    patch/routing/route_set.rb:282:in `instance_exec'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.6/lib/action_dis
    patch/routing/route_set.rb:282:in `eval_block'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.6/lib/action_dis
    patch/routing/route_set.rb:260:in `draw'
    from D:/myblog/config/routes.rb:1:in `<top (required)>'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_
    support/dependencies.rb:245:in `load'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_
    support/dependencies.rb:245:in `block in load'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_
    support/dependencies.rb:236:in `load_dependency'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_
    support/dependencies.rb:245:in `load'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/applic
    ation/routes_reloader.rb:40:in `block in load_paths'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/applic
    ation/routes_reloader.rb:40:in `each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/applic
    ation/routes_reloader.rb:40:in `load_paths'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/applic
    ation/routes_reloader.rb:16:in `reload!'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/applic
    ation/routes_reloader.rb:26:in `block in updater'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_
    support/file_update_checker.rb:78:in `call'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_
    support/file_update_checker.rb:78:in `execute'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/applic
    ation/routes_reloader.rb:27:in `updater'
    from C:in `execute_if_updated'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/applic
    ation/finisher.rb:66:in `block in <module:Finisher>'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/initia
    lizable.rb:30:in `instance_exec'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/initia
    lizable.rb:30:in `run'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/initia
    lizable.rb:55:in `block in run_initializers'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/initia
    lizable.rb:54:in `each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/initia
    lizable.rb:54:in `run_initializers'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/applic
    ation.rb:136:in `initialize!'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/railti
    e/configurable.rb:30:in `method_missing'
    from D:/myblog/config/environment.rb:5:in `<top (required)>'
    from D:/myblog/config.ru:3:in `require'
    from D:/myblog/config.ru:3:in `block in <main>'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.4/lib/rack/builder.rb:
    51:in `instance_eval'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.4/lib/rack/builder.rb:
    51:in `initialize'
    from D:/myblog/config.ru:in `new'
    from D:/myblog/config.ru:in `<main>'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.4/lib/rack/builder.rb:
    40:in `eval'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.4/lib/rack/builder.rb:
    40:in `parse_file'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.4/lib/rack/server.rb:2
    00:in `app'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/comman
    ds/server.rb:46:in `app'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.4/lib/rack/server.rb:3
    04:in `wrapped_app'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.4/lib/rack/server.rb:2
    54:in `start'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/comman
    ds/server.rb:70:in `start'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/comman
    ds.rb:55:in `block in <top (required)>'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/comman
    ds.rb:50:in `tap'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/comman
    ds.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

当我运行 rake routes 时，它向我展示了这一点：

```
 rake aborted!
    missing :action
    D:/myblog/config/routes.rb:5:in `block in <top (required)>'
    D:/myblog/config/routes.rb:1:in `<top (required)>'
    C:in `execute_if_updated'
    D:/myblog/config/environment.rb:5:in `<top (required)>'
    Tasks: TOP => routes => environment
    (See full trace by running task with --trace) 
```

我的 Routes.rb 文件：

```
 Myblog::Application.routes.draw do

        resources :posts, :has_many => :comments
        match ':controller/:action/:id'
        match ':controller/:action/:id.:format'
        root :to => "post"

    end 
```

我知道它相当模糊，但我不知道如何更简单地显示它。感谢您的帮助和兴趣！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:03:38.717

您在根 url 中缺少一个操作，例如 root :to => "posts#index"

#index 是控制器动作

# ruby - 您可以添加到名称取决于变量的 Ruby 中的数组吗？

> ID：14843496
> 
> 赞同：1
> 
> 时间：2013-02-12T23:02:42.963
> 
> 标签：ruby, arrays, string, variables

假设一个店主想知道他的产品在世界各地的销售情况，以及哪些产品在哪里卖得最好。

他有以下数据：|ID、货币、数量、位置|

不是遍历每种货币的数据（数据集> 10,000），有没有办法将数据放入特定于货币的数组中而无需明确指定......即，有没有办法避免

```
if curr == "USD"; USDid << ID; USDquan << Quantity
elsif... 
```

...等等？出于本问题的目的，假设 *id 和 *quan 数组存在于所观察的货币中。

是否有某种正则表达式技巧可以查看货币并将数据放入适当的数组中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:19:03.003

是的。使用数组的哈希而不是多个数组：

```
sale_data = {}
sale_data.default = {"ID" => [], "Quantity" => [], "Location" => []}
# Later...
sale_data[curr]["ID"] << ID; sale_data[curr]["Quantity"] << quan; #Etc.. 
```

该`default=`调用使您可以根据需要分配任意数量的货币，而无需预先定义它们。因此，在您的代码中的任何地方，如果没有先前的条目，例如 USD，当您添加数据时，就会创建一个。

# iphone - 从另一个类设置 UITextField.text

> ID：14843500
> 
> 赞同：0
> 
> 时间：2013-02-12T23:02:50.560
> 
> 标签：iphone, ios, objective-c, xcode

我有两个视图，我正在尝试显示我从`UITextField`另一个视图的第一个视图中获得的文本。- ( [source](https://github.com/rnystrom/RNBlurModalView) ) 显示的第二个视图，因此方法 ViewWillAppear 和 ViewDidLoad 将不起作用。第二个视图的 viewDidLoad 方法在应用程序启动时运行。

我试图制作第二类的方法

第二类.h：

```
@property (strong, nonatomic) IBOutlet UITextField *itemName;//all hooked up in storyboard
-(void)SetName:(NSString *)name; 
```

第二类.m：

```
-(void)SetName:(NSString *)name{
    NSLog(@"%@",name);
    itemName.text = name;//itemName - textField
} 
```

并在第一个中使用它：

```
secondViewConroller *secondView = [[secondViewConroller alloc]init];
[secondView SetName:@"Bill"]; 
```

`NSlog`显示“Bill”，但`textField.text`不会改变任何东西。

我猜该应用程序显示 UITextField 没有更改，因为它显示了从 viewDidLoad 方法获取的第二个视图，我需要以某种方式更新它

**我的问题**：从不同类更改 UI 元素属性的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:53:55.547

最简单的方法：

secondViewConroller.h：

```
@property NSString * conversationName; 
```

secondViewConroller.m ：

```
@synthesize conversationName;

-(void)SetName:(NSString *)name{
    NSLog(@"%@",name);
    itemName.text = conversationName
} 
```

在分配上：

```
secondViewConroller *secondView = [[secondViewConroller alloc]init];
conversationName = @"Set this text";
[secondView SetName:@"Bill"]; 
```

我建议你在那之后阅读协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:16:54.237

如果您的 itemName 变量似乎进入 nslog，则猜测它有问题。您是否在界面构建器中为文本字段创建了一个引用出口？否则，您可以通过标签获得正确的文本字段，在 IB 中将例如标签 1 放在文本字段上并在代码中执行：

```
UITextField *tf=(UITextField*)[self.view viewWithTag:1];
tf.text=name; 
```

（如果不是直接在主视图中，请将 self.view 替换为保存文本字段的视图）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T08:02:33.933

最简单的方法：在 secondViewConroller.h 中：

```
@property (nonatomic, retain) NSString *stringName; 
```

secondViewConroller.m ：

```
@synthesize stringName; 
```

在 viewDidLoad 方法中你写了这一行

```
itemName.text = stringName 
```

在分配上：

```
secondViewConroller *secondView = [[secondViewConroller alloc]init];
secondView.stringName = @"Set this text"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T17:29:05.040

所以我找到了一个解决方案：调用方法 SetName 有问题：使用我从 first 获取的参数`UIViewController`。

基本上解决方案是：`NSObject`首先创建并输入价值`UIViewConroller`，然后再使用它。

这个[教程](http://iphonedevsdk.com/forum/iphone-sdk-development/54859-sharing-data-between-view-controllers-and-other-objects-link-fixed.html)帮助我解决了这个问题。

# php - PHP未定义索引与xammp但不与主机

> ID：14843502
> 
> 赞同：0
> 
> 时间：2013-02-12T23:02:55.997
> 
> 标签：php, post, xampp

我制作了这个 php 文件并将其上传到我的免费主机。它工作正常。当我不提交表单时，它什么也不显示。（在这里你可以看到它：[http](http://tuku.net63.net/test.php) ://tuku.net63.net/test.php ）

```
<form method="post">
    <input name="name"></input>
    <input type="submit"></input>
</form>

<?php
    echo $_POST['name'];
?> 
```

但是现在我已经将完全相同的文件上传到我的 xammp 服务器，当我不提交表单时，它会显示此错误：

```
Notice: Undefined index: name in C:\xampp\htdocs\test.php on line 7 
```

它与PHP设置有关吗？我不知道？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:06:13.887

您的开发服务器已关闭警告，这非常糟糕！

您的生产服务器已打开警告，这*可能*很糟糕。

在开发中使用：`error_reporting(E_ALL);`获取所有错误和警告。还要确保您已将“display_errors”设置为 true。`ini_set("display_errors", 1);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:05:53.640

如果您不提交任何内容，`$_POST['name']`则未定义。您应该检查它是否已设置：

```
if (isset($_POST['name'])) {
   echo $_POST['name'];
} 
```

您的免费主机可能设置为不显示错误，这就是您看不到它的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T23:06:02.977

通知是正确的。您还没有提交表格，也没有`$_POST`；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-13T17:00:14.690

@Heroking 在 PHP 中有一个高度可定制的错误报告系统。使用它，您可以设置要显示的所有错误，例如通知、警告、错误、致命错误、启动错误等...在生产服务器配置中（主机配置）出于安全原因，所有类型的错误报告都将被关闭，因为它使公众很容易看到错误并制作代码大纲。而且在中间看到错误（也是未格式化的纯文本）非常烦人美丽的网页...

但是在开发服务器配置中，例如 xamp、wamp 和其他大多数错误报告选项将默认启用。这有助于调试 PHP 代码。这就是您在家庭开发服务器中看到错误但在主机上看不到错误的原因服务器。

# javascript - jCarousel 在最后不断添加新项目

> ID：14843505
> 
> 赞同：0
> 
> 时间：2013-02-12T23:03:05.510
> 
> 标签：javascript, jquery, jcarousel

我已经设置了垂直自动滚动条。

[由neuroflux编辑]当我处于“循环”模式时出现问题 - 到达轮播的结束或开始，它只是一遍又一遍地重复相同的幻灯片。[/编辑]

```
.jcarousel-skin-tango .jcarousel-container {

        }

        .jcarousel-skin-tango .jcarousel-direction-rtl {
            direction: rtl;
        }

        .jcarousel-skin-tango .jcarousel-container-horizontal {
            width: 245px;
            padding: 20px 40px;
        }

        .jcarousel-skin-tango .jcarousel-container-vertical {
            width: 75px;
            height: 245px;
            padding: 40px 20px;
        }
        .jcarousel-skin-tango .jcarousel-clip {
            overflow: hidden;
        }

        .jcarousel-skin-tango .jcarousel-clip-horizontal {
            width:  245px;
            height: 75px;
        }

        .jcarousel-skin-tango .jcarousel-clip-vertical {
            width:  75px;
            height: 245px;
        }

        .jcarousel-skin-tango .jcarousel-item {
            width: 75px;
            height: 75px;
        }

        .jcarousel-skin-tango .jcarousel-item-horizontal {
            margin-left: 0;
            margin-right: 10px;
        }

        .jcarousel-skin-tango .jcarousel-direction-rtl .jcarousel-item-horizontal {
            margin-left: 10px;
            margin-right: 0;
        }

        .jcarousel-skin-tango .jcarousel-item-vertical {
            margin-bottom: 10px;
        }

        .jcarousel-skin-tango .jcarousel-item-placeholder {
            background: #fff;
            color: #000;
        } 
```

javascript

```
function mycarousel_initCallback(carousel)
            {
                // Disable autoscrolling if the user clicks the prev or next button.
                carousel.buttonNext.bind('click', function() {
                    carousel.startAuto(0);
                });

                carousel.buttonPrev.bind('click', function() {
                    carousel.startAuto(0);
                });

                // Pause autoscrolling if the user moves with the cursor over the clip.
                carousel.clip.hover(function() {
                    carousel.stopAuto();
                }, function() {
                    carousel.startAuto();
                });
            };
            jQuery('#carousel').jcarousel({
                auto: 2,
                wrap: 'circular',
                vertical: true,
                initCallback: mycarousel_initCallback
            }); 
```

这样做有什么原因吗？我在`li`项目中添加了宽度和高度，但我不知道为什么它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-23T02:08:43.650

试试这个代码

```
$('ul#carousel').jcarousel({
    auto:true,
    scroll:1,  //this number must less than the number of list item you have
    visible:2, //this number must less than the number of list item you have
    vertical: true,
    wrap: 'last',
    initCallback: mycarousel_initCallback
    }); 
```

# c# - 按名称访问 c# 代码的资源字典的元素

> ID：14843506
> 
> 赞同：2
> 
> 时间：2013-02-12T23:03:14.680
> 
> 标签：c#, wpf, dictionary, resourcedictionary

如何在 c# 中编码以访问资源中的图像**my_image_name**？正如我给资源字典名称**mydic_name 一样**。我可以按名称参考字典吗？

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" x:Name="mydic_name">
                    <Image x:Name="my_image_name" x:Key="my_image_key" Source="Properties/images/device1.png"/>
</ResourceDictionary> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:28:29.783

假设您`ResourceDictionary`已加载，您可以执行以下操作：

```
 var image = (Image)Application.Current.Resources.FindName("my_image_name"); 
```

# opencv - OpenCV 错误：“无法加载图像！”

> ID：14843507
> 
> 赞同：1
> 
> 时间：2013-02-12T23:03:26.170
> 
> 标签：opencv

在编译 OpenCV 的源代码并配置 Windows 7 和 VS2010 以正确链接库后，我能够编译以下代码：

```
#include <opencv2/highgui/highgui.hpp>
#include <iostream>

using namespace cv;
using namespace std;
int main()
{
    Mat im = imread("C:\projects\cvtest3\lena.jpg"); // this *is* the proper path, I'm sure

    if (im.empty()) 
    {

        cout << "Cannot load image!" << endl;
                while (true){}
        return -1;
    }
    imshow("Image", im);
    waitKey(0);
} 
```

即使正确指定了路径，我也无法获取此代码来显示 lena 图像。这里的代码有什么问题吗？

虽然代码可以编译，但这是构建时的完整输出：

```
'cvtest3.exe': Loaded 'C:\projects\cvtest3\Debug\cvtest3.exe', Symbols loaded.
'cvtest3.exe': Loaded 'C:\Windows\SysWOW64\ntdll.dll', Cannot find or open the PDB file
'cvtest3.exe': Loaded 'C:\Windows\SysWOW64\kernel32.dll', Cannot find or open the PDB file
'cvtest3.exe': Loaded 'C:\Windows\SysWOW64\KernelBase.dll', Cannot find or open the PDB file
'cvtest3.exe': Loaded 'C:\Users\antonio\Documents\opencv_build_32bits\install\bin\opencv_core249d.dll', Symbols loaded.
'cvtest3.exe': Loaded 'C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\bin\cudart32_50_35.dll', Binary was not built with debug information.
'cvtest3.exe': Loaded 'C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\bin\npp32_50_35.dll', Binary was not built with debug information.
'cvtest3.exe': Loaded 'C:\Windows\SysWOW64\msvcp100d.dll', Cannot find or open the PDB file
'cvtest3.exe': Loaded 'C:\Windows\SysWOW64\msvcr100d.dll', Cannot find or open the PDB file
'cvtest3.exe': Loaded 'C:\Users\antonio\Documents\opencv_build_32bits\install\bin\opencv_highgui249d.dll', Symbols loaded.
'cvtest3.exe': Loaded 'C:\Windows\SysWOW64\user32.dll', Cannot find or open the PDB file
'cvtest3.exe': Loaded 'C:\Windows\SysWOW64\gdi32.dll', Cannot find or open the PDB file
'cvtest3.exe': Loaded 'C:\Windows\SysWOW64\lpk.dll', Cannot find or open the PDB file
'cvtest3.exe': Loaded 'C:\Windows\SysWOW64\usp10.dll', Cannot find or open the PDB file
'cvtest3.exe': Loaded 'C:\Windows\SysWOW64\msvcrt.dll', Cannot find or open the PDB file
'cvtest3.exe': Loaded 'C:\Windows\SysWOW64\advapi32.dll', Cannot find or open the PDB file
'cvtest3.exe': Loaded 'C:\Windows\SysWOW64\sechost.dll', Cannot find or open the PDB file
'cvtest3.exe': Loaded 'C:\Windows\SysWOW64\rpcrt4.dll', Cannot find or open the PDB file
'cvtest3.exe': Loaded 'C:\Windows\SysWOW64\sspicli.dll', Cannot find or open the PDB file
'cvtest3.exe': Loaded 'C:\Windows\SysWOW64\cryptbase.dll', Cannot find or open the PDB file
'cvtest3.exe': Loaded 'C:\Windows\SysWOW64\ole32.dll', Cannot find or open the PDB file
'cvtest3.exe': Loaded 'C:\Windows\SysWOW64\oleaut32.dll', Cannot find or open the PDB file
'cvtest3.exe': Loaded 'C:\Windows\winsxs\x86_microsoft.windows.common-controls_6595b64144ccf1df_5.82.7601.17514_none_ec83dffa859149af\comctl32.dll', Cannot find or open the PDB file
'cvtest3.exe': Loaded 'C:\Windows\SysWOW64\avifil32.dll', Cannot find or open the PDB file
'cvtest3.exe': Loaded 'C:\Windows\SysWOW64\winmm.dll', Cannot find or open the PDB file
'cvtest3.exe': Loaded 'C:\Windows\SysWOW64\msacm32.dll', Cannot find or open the PDB file
'cvtest3.exe': Loaded 'C:\Windows\SysWOW64\msvfw32.dll', Cannot find or open the PDB file
'cvtest3.exe': Loaded 'C:\Windows\SysWOW64\shell32.dll', Cannot find or open the PDB file
'cvtest3.exe': Loaded 'C:\Windows\SysWOW64\shlwapi.dll', Cannot find or open the PDB file
'cvtest3.exe': Loaded 'C:\Windows\SysWOW64\avicap32.dll', Cannot find or open the PDB file
'cvtest3.exe': Loaded 'C:\Windows\SysWOW64\version.dll', Cannot find or open the PDB file
'cvtest3.exe': Loaded 'C:\Windows\SysWOW64\imm32.dll', Cannot find or open the PDB file
'cvtest3.exe': Loaded 'C:\Windows\SysWOW64\msctf.dll', Cannot find or open the PDB file
The thread 'Win32 Thread' (0x2028) has exited with code -1073741510 (0xc000013a). 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T00:28:28.127

试试这个代码：

```
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/core/core.hpp>
#include <opencv2/imgproc/imgproc.hpp>

using namespace std;
using namespace cv;

int main()
{
  Mat image = imread("C:\\projects\\cvtest3\\lena.jpg");
  if(image.empty())
    return -1;
  imshow("TEST",image);
  waitKey();

  return 0;
} 
```

1.  尝试使用 2.4.3 的最新 opencv
2.  链接适当的库
3.  正确添加包含路径
4.  将bin文件夹的路径添加到环境变量路径中

# c# - 带选项的反序列化

> ID：14843511
> 
> 赞同：0
> 
> 时间：2013-02-12T23:03:50.850
> 
> 标签：c#, deserialization

我目前正在实现将集合序列化到文件中。结果和我预期的一样

```
<Persons>
  <Person>
    <Identity>1234</Identity>
    <Name>asd</Name>
  </Person>
  <Person>
    <Identity>12345</Identity>
    <Name>asdd</Name>
  </Person>
</Persons> 
```

现在，我不想反序列化整个集合，但我想用一些特定的选项从文件中反序列化一个对象。例如，

```
object GetPersonWithIdentity(int identity )
{
  // what to do here
}

object asd = GetPersonWithIdentity(1234); 
// expected Person with Identity "1234" and Name "asd" 
```

反序列化整个集合并找到特定对象并将其返回是否合理，或者是否有其他解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:08:36.113

XML 不可搜索，因此您至少必须向前阅读，直到找到第一个匹配项。该框架不自动支持该功能，因此您必须使用`XmlReader`费力的手动操作。

如果文件很小和/或性能不是问题，只需反序列化所有内容并完成它。

如果您的数据集很大，我会考虑转向一些更具可扩展性的格式，例如嵌入式 SQL 数据库。SQL 数据库天生就有这种能力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:33:21.907

您将不得不序列化整个 XML 文件，因为正如 usr 所提到的，XML 只是转发的。XmlReader/Writer 本质上是一个 TextReader (Stream) 对象，并且正在执行文件 i/o 以读取 XML 文件。

我单独回答的原因是我会使用 XDocument 对象执行以下操作：

```
object GetPersonWithIdentity(int identity )
{
  return myXDocumentVaraible.Descendants("Person")
                     .First(person => person.Element("Identity").Value == identity.ToString());
} 
```

# triggers - Salesforce- 触发器 - 删除对象

> ID：14843513
> 
> 赞同：0
> 
> 时间：2013-02-12T23:04:01.743
> 
> 标签：triggers, salesforce, apex-code

你好，代码爱好者，我正在尝试学习 apex 代码并遇到一个问题。由于这里的大多数人都是狂热的代码爱好者并且对解决问题感到兴奋，我想我可以解决问题。

我正在尝试在一个名为 Book 的对象上创建一个触发器，该触发器执行以下操作：删除时，所有关联的章节也被删除 还有一个名为 Chapter 的对象，它具有对 book 的查找。

这是我的尝试。这是我第一次尝试顶点，所以请耐心等待。有人愿意涉足这段代码吗？

```
 trigger DeleteChaptersTrigger on Book__c (before delete) {
 List<Book__c> book = Trigger.old;
 List<Chapter__c> chapters = new List<Chapter__c>();
 Set set = new Set();

  for (Book__c b :books){
  if ()
   }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T23:49:12.170

您需要编写所有触发器，考虑到触发器可能在任何时候处理许多记录，因此您需要[批量处理触发器代码。](http://wiki.developerforce.com/page/Best_Practice%3a_Bulkify_Your_Code)

[以下是触发器对象上可用的变量。](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_triggers_context_variables.htm)

您想要获取所有将被删除的记录 ID。使用 上的`keyset`方法`oldmap`来获取此信息，而无需循环和创建您自己的集合。然后您可以删除从查询返回的记录。

```
trigger DeleteChaptersTrigger on Book__c (before delete) {
    Set<string> bookids = Trigger.oldMap.keyset();
    delete [SELECT Id FROM Chapter__c WHERE Book__c IN :bookids];     
} 
```

Apex 代码与其他语言不同，它与重复使用的单词混淆，比如设置为变量名。Apex 也不区分大小写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T23:28:35.277

由于您拥有完全控制权，我建议您更改自定义对象相互关联的方式。

没有一本书，一章就没有意义/价值，所以我们想改变两者之间的关系。

移除对章节对象的查找并将其替换为主从细节。当主记录被删除时，Salesforce 会自动删除与详细信息相关的记录。这就是您想要的，并且无需编码。

# .net - 在 Ektron 中使用 JS.RegisterJSInclude() 调用外部 URL？

> ID：14843514
> 
> 赞同：0
> 
> 时间：2013-02-12T23:04:07.053
> 
> 标签：.net, ektron

看来这是使用 JS.RegisterJSInclude 的有效方法，但我发现的所有示例都使用本地路径。我还没有看到任何关于引用外部 URL 的文档。除了要移动的文件之外，还有什么理由不应该这样做吗？

```
JS.RegisterJSInclude(this,"http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/jquery-ui.min.js","GoogleJQueryUI"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:33:54.110

不，这样做没有问题。在更高版本（v8.5+）中，我们聚合和缩小（即时）所有已注册的 CSS/JS。当您注册外部资源（“http://”或“https://”）时，它只是跳过聚合和缩小部分。由于大多数人会这样做以访问 CDN 上的资源（就像您正在做的那样），所以这也不是问题。

简而言之，这很好。

# c# - WP7.1 项目在 WP8 设备上无法正常工作

> ID：14843516
> 
> 赞同：0
> 
> 时间：2013-02-12T23:04:15.450
> 
> 标签：c#, visual-studio-2010, windows-phone-7

我正在开发 VOIP 应用程序并为 Windows Phone 7.1 操作系统构建 sip 库。当我在任何 Windows 7.5 设备上运行该项目时，IT 工作正常。但是当我尝试在 WP8 设备上运行相同的项目时，它无法正常工作。它开始给我各种异常，例如 System.Windows.ni.dll 中的 Null Pontere Reference Exception 。我的理解是，如果在 WINdows 7.5 设备中运行良好的任何东西在 Windows 8 设备中运行良好。任何人都可以帮助可能的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:08:57.670

这是您可能感兴趣的 MSDN 页面：[Windows Phone 的应用程序平台兼容性](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206947%28v=vs.105%29.aspx)。

> **通常**，Windows Phone 应用程序平台使面向 Windows Phone OS 7.1 的应用程序无需修改或重新编译即可在 Windows Phone 8 上运行。
> [...]
> Windows Phone OS 7.1 应用程序在运行时**可能表现不同**的其他情况在 Windows Phone 8 上。

# wordpress - 以编程方式将小部件添加到自定义 Wordpress 侧边栏

> ID：14843521
> 
> 赞同：1
> 
> 时间：2013-02-12T23:04:27.327
> 
> 标签：wordpress

我正在开发一个 Wordpress 插件。我可以将我的三个自定义小部件和一个动态侧边栏添加到界面中。如果用户没有设置任何小部件，我正在尝试将其设置为将一些默认小部件加载到侧边栏中。

```
function rs_sidebar_setup() {
    // register sidebar
    $rs_sidebar_opts = array(
        'name' => __('Social Media Updates'),
        'id' => 'social-updates',
        'description' => __('Displays recent posts from social media sites'),
        'before_widget' => '',
        'after_widget' => ''
    );
    register_sidebar($rs_sidebar_opts);
}
add_action('widgets_init', 'rs_sidebar_setup');

if ( !function_exists('rs_default_widgets') ) :
function rs_default_widgets() {
    // get active widgets from database
    $widgets = get_option('sidebars_widgets');

    //if(empty($widgets['social-updates'])) {
        // add new widgets to our sidebar if the sidebar is empty
        //$widgets['sidebar-social-updates'] = array('calendar-3', 'rapidsocialfacebookwidget-1', 'rapidsocialfwitterwidget-1', 'rapidsociallinkedinwidget-1');
        $widgets['social-updates'] = array('calendar-3');
        update_option('sidebars_widgets', $widgets);

    //}

    print_r(get_option('sidebars_widgets'));
}
add_action('widgets_init', 'rs_default_widgets', 11);
endif; 
```

如果我的自定义小部件有问题，我尝试使用内置小部件 - 仍然不好。该`print_r`声明确认数据库已更改，但我的社交媒体更新侧边栏中仍然没有看到日历小部件。

我尝试将相同的`get_option`/`update-option`技术与内置在 21 主题中的侧边栏一起使用，并且它起作用了，所以我认为这可能是加载顺序的问题，但我不知道。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T15:19:15.813

对于任何偶然发现这一点的人，这里有一个解决方案和非常详细的关于程序员 SE 的文章： [https ://wordpress.stackexchange.com/questions/26557/programmatically-add-widgets-to-sidebars](https://wordpress.stackexchange.com/questions/26557/programmatically-add-widgets-to-sidebars)

# graph - 图中的层次结构

> ID：14843522
> 
> 赞同：0
> 
> 时间：2013-02-12T23:04:28.003
> 
> 标签：graph, hierarchy

如果该图中存在层次结构，如何计算或量化给定图的层次结构？更具体地说，我想知道人工神经网络中是否存在某种层次结构（具有一定数量的隐藏层）。并且还想衡量这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:13:53.060

这是一个有趣的开放式问题，所以我会随意回答。所以你想知道这个图在逻辑上是否像一棵树？图中没有向上或向下之分，因此您真正要寻找的可能是一种方法来找到图中与其他高度连接的节点连接度最高的一个或多个节点，然后采取一定的视角假设和使用该节点作为树的主干或根来确定类似“树”的图形是否有意义。您可以做的另一件事是选择任何随机节点，假设它是树的根，然后看看会发生什么。如果节点连接导致您想要基于一定数量的连接或遍历来重新平衡树，您可以重新平衡树，并且您可以尝试找到“真正的根” - 如果有这样的事情。如果你重新平衡了一定次数，或者检测到一个循环路径已经被遍历，你可能会认为这个图根本不是很分层。如果您确实找到了“真正的根”，那么您可能会决定寻找深度，平均。分支编号，余额统计等。如果您改进问题，我会改进我的答案。

# c# - 尝试获取类型数据库实例时发生激活错误，键“ConnString”

> ID：14843525
> 
> 赞同：1
> 
> 时间：2013-02-12T23:04:50.917
> 
> 标签：c#, sharepoint-2010, enterprise-library-5

我正在尝试使用 Enterprise Library 5.0 从 Microsoft Project Server 数据库连接到数据库。我包含了所有的 DLL 引用，并且能够毫无问题地部署应用程序。但是，当我尝试创建项目时，它失败并显示以下错误消息：

“尝试获取数据库类型的实例时发生激活错误，键为“ConnString””

Web.config 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>  
  <configSections>
    <section name="dataConfiguration" 
             type="Microsoft.Practices.EnterpriseLibrary.Data.Configuration.DatabaseSettings, Microsoft.Practices.EnterpriseLibrary.Data,
              Version = 5.0.414.0, Culture = neutral, PublicKeyToken = 31bf3856ad364e35"
             requirePermission="true"/>  
  </configSections>    
  <dataConfiguration defaultDatabase="ConnString" />  
  <connectionStrings>
    <add name="ConnString" 
         connectionString="Data Source=(localhost);Initial Catalog=MyDB;User ID=XYZ;Password=XYZ;" 
         providerName="System.Data.SqlClient" />
  </connectionStrings>
</configuration> 
```

我错过了什么？

# javascript - 如何在单击可拖动图层顶部时获得准确的指针位置？

> ID：14843527
> 
> 赞同：1
> 
> 时间：2013-02-12T23:05:00.890
> 
> 标签：javascript, html, canvas, kineticjs

我刚刚学习 Kinetic.js，我真的很享受使用 HTML5`<canvas>`元素的轻松程度。

我有一个比“舞台”（使用动力学术语）更大的大图层，但可以拖动。拖动功能似乎以两种不同的方式干扰点击处理程序：一些单击不注册；并且在那些这样做的情况下，只有当图层处于其原始位置时，位置才是准确的。

这是一个显示我遇到的问题[的小提琴。](http://jsfiddle.net/EKaAv/)在我的实际代码中，底层实际上是一个图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:25:09.150

[http://jsfiddle.net/EKaAv/1/](http://jsfiddle.net/EKaAv/1/)

```
layer.on ('click', function(e) {
    console.log(e);
    var mousePos = stage.getMousePosition(); // mouse position relative to stage
    var xclick = mousePos.x;
    var yclick = mousePos.y;
    var circle = new Kinetic.Circle({
        x: xclick - layer.getX(), // since position is relative to stage, adjust by layer X
        y: yclick - layer.getY(), // same as above
        radius: 25,
        fill: 'red',
        opacity: 0.5
    });
    layer.add(circle);
    stage.draw();       // redraw the stage immediately
}); 
```

任何似乎未注册的点击都是由于触发了可拖动事件，它覆盖了点击事件。

# c# - 为聊天程序编写自己的 WPF 框架 - 如何保持窗口打开？

> ID：14843534
> 
> 赞同：0
> 
> 时间：2013-02-12T23:05:13.837
> 
> 标签：c#, wpf, multithreading

我不想在启动程序时直接运行表单，也不想在表单构造函数中执行所有代码：

```
network
threading
computation 
```

里面：

```
LoginWindows() { /* Constructor */ } 
```

因此，我将条目从 LoginWindow.xaml 切换到 Main 函数，但是当我将其归类为 STAThread 并从 main 函数运行 LoginWindow 和其他一些线程时，登录窗口由于某种原因关闭，但线程正常继续，程序不会退出. 相关图片如下。

[http://i.stack.imgur.com/O3gVo.png](http://i.stack.imgur.com/O3gVo.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:53:47.063

将您的初始化逻辑放在`override OnStartup()`app.xaml.cs 文件中的方法中。如果您的代码需要太多时间才能完成，您可能还想提供某种启动画面。

# javascript - getElementById 返回 null

> ID：14843535
> 
> 赞同：-1
> 
> 时间：2013-02-12T23:05:14.150
> 
> 标签：javascript, html

我在 getElementById 返回 null 时遇到问题。我尝试将 id 直接放入其中，效果很好。

该函数由提交按钮调用，它检索上传文件的名称并将它们写入隐藏字段。

```
function onSubmitting() {
     try {
          var AU = $('#uploader').data('AU');
          var file_list = AU.files; 
          var i = 0;
          while (i < 10) {
              var tempName = "image" + i.toString();
              if (!(typeof file_list[i] === "undefined")) {
                  document.getElementById(tempName).value = "test";
               }  
              i++;
           }                     
       }
       catch (err) {
           alert(err.message);
       }
 } 
```

相关的html在这里：

```
 <input type="hidden" name="image1" id="image1" />
 <input type="hidden" name="image2" id="image2" />
 <input type="hidden" name="image3" id="image3" />
 <input type="hidden" name="image4" id="image4" />
 <input type="hidden" name="image5" id="image5" />
 <input type="hidden" name="image6" id="image6" />
 <input type="hidden" name="image7" id="image7" />
 <input type="hidden" name="image8" id="image8" />
 <input type="hidden" name="image9" id="image9" />
 <input type="hidden" name="image10" id="image10" /> 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:08:10.670

第一次通过循环时，ID 将`image0`不会出现在您的 HTML 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:08:24.433

您的循环从 0 运行到 9，但您的元素的名称从 1 到 10。更改

```
for (var i=0; i<10; i++) 
```

到

```
for (var i=1; i<=10; i++) 
```

或`(i+1)`在循环体中的任何地方使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T23:13:02.663

正如 Bergi 和 Justin 所说，您正在使用`i=0`. 我已将其更新为使用`i=1`, 和`i <= 10`, 它按预期工作:)

见：http: [//jsfiddle.net/sAKJd/](http://jsfiddle.net/sAKJd/)

# xaml - 如何在 XAML 中将小部件与 pointerMoved 事件函数连接？

> ID：14843539
> 
> 赞同：0
> 
> 时间：2013-02-12T23:05:32.037
> 
> 标签：xaml, windows-8

在 MAXL 中，我可以像这样实现为 TextBlock 添加指针移动事件：

```
<TextBlock Text="Drag and Drop" 
AllowDrop="True" 
PointerMoved="TextBlock_PointerMoved"
/> 
```

然后我只需要实现函数来完成pointermoved的工作：

```
TextBlock_PointerMoved(Platform::Object^ sender, Windows::UI::Xaml::Input::PointerRoutedEventArgs^ e); 
```

但是现在，我需要使用 C++ 在代码区域中执行此操作，我将新建一个文本块，并在代码中创建所有内容。例如：

```
TextBlock^ my_textblock = ref new TextBlock();
my_textblock->SetValue(TextBlock::TextProperty, "My Text Block");
my_textblock->SetValue(TextBlock::WidthProperty, 100); 
```

我应该怎么做才能将指针移动事件函数与小部件连接起来？希望是这样的：

```
my_textblock->SetValue(TextBlock::PointerMovedEvent, myPointerMovedFunction); 
```

但它不起作用。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:30:12.307

我找到了这样的方法：

```
panelitem->PointerMoved += ref new PointerEventHandler(this, &MainPage::StackPanel_PointerMoved_A); 
```

`StackPanel_PointerMoved_A`是您的 PointerEventHandler 函数。

# google-maps - 谷歌地图 API 禁令？

> ID：14843540
> 
> 赞同：-4
> 
> 时间：2013-02-12T23:05:39.633
> 
> 标签：google-maps, google-maps-api-3

我的网站 ( [http://foomap.de/](http://foomap.de/) )，通过 Google Maps API v3 提供全屏地图，今天突然停止工作。相反，它会显示错误消息“Google 已禁用此应用程序使用 Maps API。有关更多信息，请参阅服务条款：[http](http://www.google.com/help/terms_maps.html) ://www.google.com/help/terms_maps.html ”

我既不知道有任何违反谷歌服务条款的行为，也没有发现网站达到任何使用限制（根据谷歌的 API 控制台）。

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:09:10.470

假设没有其他问题，您有每天和每秒的限制。您可能超出配额。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:14:30.943

看起来是他们的谷歌错误......

[http://www.google.com.au/about/jobs/locations/sydney/](http://www.google.com.au/about/jobs/locations/sydney/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T23:53:05.810

现在，删除 key 参数，因为它不是强制性的：

```
<script type="text/javascript"
  src="https://maps.googleapis.com/maps/api/js?sensor=SET_TO_TRUE_OR_FALSE">
</script> 
```

它对我有用，但我仍然不知道为什么会出现问题......我相信谷歌正在做一些改变......

# javascript - Backbone 的新手，但是当我遍历 Collection 时，我的所有属性都丢失了

> ID：14843544
> 
> 赞同：2
> 
> 时间：2013-02-12T23:06:04.370
> 
> 标签：javascript, backbone.js

开始吧

```
devices = new SmartLink.Collections.DeviceMap
view = new SmartLink.Views.DeviceMap({collection: devices}) 
```

我的收藏

```
parse: function (response) {
    console.log(response.sites);
    return response.sites;
} 
```

我的观点

```
initialize: function (options) {
    this.collection.on('add',this.addOne,this);
    this.collection.on('reset',this.addAll,this);
    this.collection.fetch();
},

addAll: function() {
    console.log("addall");
    this.collection.forEach(this.addOne,this);
},

addOne: function(site) {
    console.log("addone");
    console.log(site);
}, 
```

发生了什么？ [![安慰](../Images/ae124f10da4e9aee27ac42aee834ac87.png)](https://i.stack.imgur.com/9OzQL.png)

1.  解析时，它会打印出您从对象数组中看到的响应
2.  开始 addAll
3.  然后分别添加一个

## 我的问题

当我遍历每个项目时，数组中每个项目的所有属性在哪里？我看到的只有身份证。如果我尝试 console.log(site.name)，它会显示未定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:08:57.587

用于`site.get('name')`获取名称属性。您必须使用该函数`get`从模型中获取属性。

# c++ - 函数声明中的方程

> ID：14843545
> 
> 赞同：1
> 
> 时间：2013-02-12T23:06:09.310
> 
> 标签：c++, function, function-declaration

在 C++ (Microsoft Visual Studio) 中，我在 mystring.h 中有： main_savitch_4::string::string(const char str[ ] = "") 并添加到 mystring.cpp 中：

```
main_savitch_4::string::string(const char str[ ] = ""){
    allocated = 0;  
    current_length = 0;
    start = new char[0];
}, which defines the private variables. 
```

我收到以下错误：

```
c:\users\erice\documents\c++_2\lab04\rice_lab04_2\rice_lab04_2\mystring.cpp(13): error C2572: 'main_savitch_4::string::string' : redefinition of default parameter : parameter 1
1>          c:\users\erice\documents\c++_2\lab04\rice_lab04_2\rice_lab04_2\mystring.h(88) : see declaration of 'main_savitch_4::string::string'
1>. 
```

究竟出了什么问题？？？我不明白 = 在函数描述中的含义

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T23:07:45.490

编译器告诉您在函数的声明和定义中有默认参数。从定义中删除它：

```
main_savitch_4::string::string(const char str[ ]) { ... } 
```

> 我不明白 = 在函数描述中的含义

这意味着您正在为函数提供 derfault 参数。例如，

```
void foo(int i = 42); // declaration 
```

以上意味着您可以`foo`在没有参数的情况下调用：

```
....
void foo(int i) { return i+100; } // definition

// call the function
foo(); // calls it as foo(42);
foo(123); 
```

# ios - 使用 AVURLAssets 的 AVPlayer 和渐进式视频下载

> ID：14843546
> 
> 赞同：11
> 
> 时间：2013-02-12T23:06:10.243
> 
> 标签：ios, avplayer, progressive-download, avurlasset, avcomposition

我们正在开发一个需要通过[AVPlayer](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVPlayer_Class/Reference/Reference.html)播放视频文件的应用程序。文件需要存储在用户的设备上，还必须在下载的同时播放。

目前我们已经构建了一个下载模块，它使用[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)库通过 PHP 获取视频文件（我们不希望媒体可以通过公共 URL 链接）并将它们异步写入磁盘。

然后，我们根据[AV Foundation Programming Guide](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/02_Playback.html#//apple_ref/doc/uid/TP40010188-CH3-SW1)设置了一个 AVPlayer ，使用 AVURLAsset 获取文件，使用资产创建 AVPlayerItem，使用项目构建 AVPlayer，然后将播放器设置为 AVPlayerLayer。*播放器在完全下载的视频文件下运行良好，并且在模拟器中*也能很好地运行逐步下载的文件。

不幸的是，在实际设备上，播放器的行为发生了变化，相反，它似乎只加载了一次视频，并没有尝试从磁盘中获取新的数据包。结果是播放器将播放视频和音频，直到视频中标记*资源加载时下载进度的位置*（例如，如果缓冲 2MB 的数据然后创建播放器，播放器将只播放高达 2MB 的数据）。因为它有视频的标题，播放器会很高兴地继续认为它正在播放整个视频，但没有其他视频被渲染到屏幕上。

最后一个问题是，如果将视频插入 AVComposition 并使用它创建 AVPlayer，则渐进式视频将可以正常播放。这将是一个很好的解决方案（有时对于我们的应用程序来说是必需的），除了我们应用程序的客户端要求视频可以通过 AirPlay 在 Apple TV 上播放，而 AVCompositions 无法做到这一点。

**有谁知道是否有一种方法可以使用从 AVURLAssets 构建的 AVPlayer 逐步下载视频文件？**有没有办法强制 player/playerItem 使用 AVURLAsset 从磁盘读取它似乎与 AVComposition 一样，而不是看似将视频缓存在内存中？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T12:46:30.490

我没有一个解决方案来让它与 AVURLAssets 一起工作，但我使用了一种稍微不同的方法。我们将我们的应用程序与[CocoaHTTPServer](https://github.com/robbiehanson/CocoaHTTPServer)捆绑在一起，并通过对本地服务器的 HTTP 请求播放未完全下载的视频文件。

服务器知道文件的总长度，然后可以通过查看 HTTP-Headers 来决定文件的哪一部分是请求的，然后从磁盘或远程源加载它。

在那里开发时，总是有 3 个初始请求，一个用于文件的前两个字节，一个来自文件开头的较大块，一个直接来自文件末尾的块。这就是为什么总是需要直接从远程服务器加载至少最后一部分，因为玩家从一开始就需要它。我猜本地文件也会发生同样的情况，因此播放器从文件中加载最后一个字节（不是正确的最后一个字节）并且不会播放该长度。

您必须通过查看提供的“HTTPAsyncFileResponse”来继承 HTTPConnection 并创建自己的 HTTPResponse 类。

我希望这能让您了解如何使用不同的方法来完成此任务。

# xml - 是否可以在一个 XML 文档中列出多个可能的样式表路径？

> ID：14843548
> 
> 赞同：1
> 
> 时间：2013-02-12T23:06:34.160
> 
> 标签：xml, xslt

我猜这是不可能的，但我想我会问。

我有一个 XML 样式表 (XSLT)，用于在 Word/IE/Chrome 中查看 XMl 文件。这些 XML 文件可以位于用户计算机上的任何位置，但我希望能够在程序的 Program Files 目录中拥有 XSLT 文件。不幸的是，这现在可以是 /Program Files/Test Software/ 或 /Program Files (x86)/Test Software/。同一个 XML 文档中是否可以有多个样式表路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T02:41:08.253

我认为您的意思是“如果我在我的 XML 文档中包含多个 xml-stylesheet 处理指令，它会对 Web 浏览器产生影响吗？”

自从我进行任何测试以来已经有一段时间了，但我记得多个 xml-stylesheet 指令工作不会导致浏览器出现错误，并且一些浏览器会使用列出的第一个，而其他浏览器会使用列出的最后一个。在支持备用样式表的浏览器中，您可以使用适当的伪属性来获取用户界面中列出的备用样式表。

所以：“可能”，是的，但不是你想要的意思。

# r - 生成每月摘要和单个箱线图

> ID：14843549
> 
> 赞同：-3
> 
> 时间：2013-02-12T23:06:34.163
> 
> 标签：r

我将数据保存在以空格分隔的文本文件中；每条线代表给定月份中包含的一个数据点：

```
2012 年 1 月 1000
2012 年 1 月 1500
2012 年 1 月 1200
2012年2月 1300
2012 年 2 月 1400
2012 年 2 月 1000
...
2012 年 12 月 1300
2012 年 12 月 1400
2012 年 12 月 1000

```

我想为每个月生成最小值、最大值、中位数、平均值、标准差和第 95 个分位数。我还想为全年生成一个箱线图。我怎样才能在 R 中做到这一点？我可以使用 加载数据`mydata = read.table(file="mydata.txt", sep=" ")`，但 summary 会产生如下输出：

```
      月时间          
 2012 年 8 月：229357 分钟。: 31100  
 2012 年 10 月：223158 第一区：91267  
 2012 年 3 月：221986 中位数：124048  
 2012 年 4 月：215368 平均值：199639  
 2012 年 7 月：213956 第三季度：176766  
 2012 年 5 月：最大 200920 :150018802  
 （其他）：1146616                      

```

我没有任何生成箱线图的经验；欢迎指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:36:25.760

```
tapply(dfrm$time, substr(dfrm$month, 1,3), summary)
library(Hmisc)
tapply(dfrm$time, substr(dfrm$month, 1,3), describe)
boxplot(time~month, data=dfrm) 
```

# delphi - 使用 Delphi 和 SQL Server 的 ADO 无法识别数据库更改

> ID：14843551
> 
> 赞同：-1
> 
> 时间：2013-02-12T23:06:37.427
> 
> 标签：delphi, ado

`TADOConnection`我在我的 SQL Server 上运行一个带有 2 的小型数据库应用程序。第一个连接仅用于查看目的，使用`ADOTable`,`Datasource`和`DBNavigator`。第二个连接是在运行时使用以下代码创建的

```
aConnection:=TADOConnection.create(nil);

aTable:= TADOTable.create(nil);
aConnection.LoginPrompt := false;

.....
aTable.Edit;

aTable.Insert;

aTable.FieldByName(' ... ').AsInteger :=  .... ;

aTable.FieldByName(' .... ').AsString :=  ... ;

aTable.FieldByName(' .... ').AsString :=  ..... ;

aTable.Post;

aTable.active := false;

aConnection.connected :=false;

aTable.free;

aConnection.free; 
```

如果我使用此代码插入记录，则按下 Update Navigator 按钮时将看不到更改的数据。我需要重新启动我的应用程序才能看到我所有新插入的数据。为什么第一个 dbconnection 无法识别我的第二个连接所做的更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T23:10:34.617

你有一个`Edit`, 紧接着是一个`Insert`. 这意味着您的编辑没有改变任何东西（因此没有看到任何更改），并且您的所有代码实际上都在更新新创建的行。换句话说，您告诉数据库您要使用 更改数据`Edit`，立即告诉它“我想添加一个新行”（这意味着没有数据被 更改`Edit`），然后修改新添加的行中的值。您还应该使用单个`TADOConnection`.

```
 aTable.Edit;

 aTable.Insert; 
```

只需删除`aTable.Insert;`，你应该没问题。

```
// Change a row that already exists.
aTable.Edit;
aTable.FieldByName(' ... ').AsInteger :=  .... ;
aTable.FieldByName(' .... ').AsString :=  ... ;
aTable.FieldByName(' .... ').AsString :=  ..... ;
aTable.Post; 
```

根据您对我的回答的评论，您似乎想要实际添加一个新行。在这种情况下，只需使用`Insert`不带 the 的`Edit`（插入新行会自动使您进入更改数据的模式；您不需要单独`Edit`调用）。

```
aTable.Insert;
aTable.FieldByName(' ... ').AsInteger :=  .... ;
aTable.FieldByName(' .... ').AsString :=  ... ;
aTable.FieldByName(' .... ').AsString :=  ..... ;
aTable.Post; 
```

`Edit`更改当前行，同时`Insert`在当前位置添加新行（之后可能会根据使用的索引更改）并`Append`在数据集的末尾添加新行（同样，这可能会根据使用的索引而更改） .

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T00:22:53.417

试试这个，如果我记得正确的话，旧的 Delphi/Adoverions 中存在一个问题，刷新没有按预期工作，而 requery 很好。

```
procedure TForm2.DBNavigator1Click(Sender: TObject; Button: TNavigateBtn);
begin
  if Button = nbRefresh then
  BEGIN
    if Assigned(TDBNavigator(Sender).DataSource) then
      if Assigned(TDBNavigator(Sender).DataSource.DataSet) then
        if TDBNavigator(Sender).DataSource.DataSet is TCustomAdoDataset then
          TADODataSet(TDBNavigator(Sender).DataSource.DataSet).Requery;
  END;
end; 
```

# excel - 从多个来源进行 Vlookup

> ID：14843552
> 
> 赞同：0
> 
> 时间：2013-02-12T23:06:41.170
> 
> 标签：excel, excel-formula, vlookup

这不会出错，它只是给了我“错误”的结果。我在想我无法从两个不同的来源进行 vlookup，但想要验证？如果没有，是否有替代方案的建议？谢谢！

```
=IF(ISBLANK(A69),"",IF(ISNA(VLOOKUP(A69,sheets!J:J,1,FALSE)),IF(ISNA(VLOOKUP(A69,Lines!B:B,1,FALSE)),"No Match",IF(VLOOKUP(A69,sheets!J:J,1,FALSE),"Matches sheet",IF(VLOOKUP(A69,Lines!B:B,1,FALSE),"Line","No Match"))))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:20:36.313

你想先检查哪个？也许尝试 MATCH 因为您似乎只想验证匹配的存在，即

`=IF(A69="","",IF(ISNA(MATCH(A69,sheets!J:J,0)),IF(ISNA(MATCH(A69,Lines!B:B,0)),"No Match","Line"),"Matches sheet"))`

**如果在两张**表中都找到 A69，则将显示“匹配表” ，如果您不希望这样，则颠倒 MATCHES/文本的顺序。

...或使用 COUNTIF

`=IF(A69="","",IF(COUNTIF(sheets!J:J,A69),"Matches Sheet",IF(COUNTIF(Lines!B:B,A69),"Line","No Match")))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:20:26.597

您最好在行中的单独单元格中进行每次查找。您也可以使用 MATCH 而不是 VLOOKUP。除了不正确的嵌套之外，您正在做的事情不应该有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T23:38:09.900

您可能想要放弃 ISNA 测试，而是尝试将所有 VLOOKUPS 包装在 NOT(ISERROR(...)) 中。我得到的公式是：

```
 =IF(ISBLANK(A69),"",IF(NOT(ISERROR(VLOOKUP(A69,sheets!J:J,1,FALSE))),IF(NOT(ISERROR(VLOOKUP(A69,Lines!B:B,1,FALSE))),"No Match",IF(NOT(ISERROR(VLOOKUP(A69,sheets!J:J,1,FALSE))),"Matches sheet",IF(NOT(ISERROR(VLOOKUP(A69,Lines!B:B,1,FALSE))),"Line","No Match"))))) 
```

在我非常有限的测试中，这个公式产生了“匹配表”的结果。您应该检查它是否会产生您正在使用数据集寻找的结果。

# matlab - 图函数在一个窗口中创建的绘图

> ID：14843553
> 
> 赞同：1
> 
> 时间：2013-02-12T23:06:43.343
> 
> 标签：matlab

我有这 3 个由 figure 函数生成的图和 1 个由 rlocus 生成的图，我想要做的是把这 4 个图放在同一个窗口中，就像 subplot 函数一样。我尝试使用它，但它没有用，而且由于默认属性，我更喜欢使用图形函数而不是绘图函数，所以现在我正在寻找一些替代方案。提前致谢。

```
num1=1;
den1=[1,3,3,1];
G=tf(num1,den1);
for Kp=[0.1:0.1:1]
    G_c=feedback(Kp*G,1);
    step(G_c);
    hold on
end
figure

Kp=1; 
s=tf('s');
for Ti=[0.7:0.1:1.5]
    Gc=Kp*(1+1/Ti/s); 
    G_c=feedback(G*Gc,1); 
    step(G_c); 
    hold on
end
figure

Ti=1; 
s=tf('s');
for Td=[0.1:0.2:2]
    Gc=Kp*(1+1/Ti/s+Td*s); 
    G_c=feedback(G*Gc,1); 
    step(G_c); 
    hold on
end
figure
rlocus(G,[0,15]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:09:33.663

我不确定您喜欢图形功能而不是绘图功能是什么意思。我的理解是情节使用活动或引用的数字。如果你想在一个窗口中有多个图表，这就是`subplot`它的作用。

这不是你想要的： ![用子图显示的图形](../Images/7cfa741354864370f124a78df7f808fe.png)

使用子图：

```
subplot(2,2,1)
num1=1;
den1=[1,3,3,1];
G=tf(num1,den1);
for Kp=[0.1:0.1:1]
    G_c=feedback(Kp*G,1);
    step(G_c);
    hold on
end

subplot(2,2,2)
Kp=1; 
s=tf('s');
for Ti=[0.7:0.1:1.5]
    Gc=Kp*(1+1/Ti/s); 
    G_c=feedback(G*Gc,1); 
    step(G_c); 
    hold on
end

subplot(2,2,3)
Ti=1; 
s=tf('s');
for Td=[0.1:0.2:2]
    Gc=Kp*(1+1/Ti/s+Td*s); 
    G_c=feedback(G*Gc,1); 
    step(G_c); 
    hold on
end

subplot(2,2,4)
rlocus(G,[0,15]) 
```

# javascript - jQuery ajax 在 asp.net mvc2 上发布

> ID：14843557
> 
> 赞同：3
> 
> 时间：2013-02-12T23:06:58.550
> 
> 标签：javascript, jquery, asp.net-mvc, json, asp.net-mvc-2

我有一个在单击“提交”按钮时调用的 jQuery 函数：

```
function SubmitForm() {
    var idList = [];
    var list = $('#TableAdminPortfolio .CheckBoxProjects');
    list.each(function () {
        var id = $(this).closest('td').children('.hiddenId').val(); // parseInt()
        idList.push(id);
    });

    $.ajax({
        url: $(this).href,
        type: 'POST',
        data: idList,
        success: function (result) {alert('Successful');},
        error: function (result)  {alert('Error');}

    });
} 
```

我的控制器看起来像：

```
[Transaction]
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Index(IEnumerable<int> projects)
{
    ...
} 
```

参数（项目）始终为空。我已经逐步检查了我的 jQuery 代码，每一步都检查它，并且 idList 肯定是填充的。我也尝试过这样的 $ajax：

```
$.ajax({
        url: $(this).href,
        type: 'POST',
        data: { projects : idList },
        success: function (result) {alert('Successful');},
        error: function (result)  {alert('Error');}

    }); 
```

仍然是相同的结果。有什么想法吗？是的，我有理由做 Ajax Post 而不是 Form Post。

TIA

注意：我使用的是 jQuery v1.6.4 和 ASP.NET MVC 2.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:13:24.640

尝试使用 JSON.stringify 将您的数组转换为 json

```
$.ajax({
    url: $(this).href,
    type: 'POST',
    dataType: "json",
    data: JSON.stringify(idList),
    traditional: true,
    success: function (result) {alert('Successful');},
    error: function (result)  {alert('Error');}

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T00:38:26.570

尝试：

```
 var mylist='{"projects":'+ JSON.stringify(idList)+'}'; 
```

然后

```
data:mylist, 
```

# mysql - 使用来自其他列的数据（MySQL 中的 UPDATE）

> ID：14843561
> 
> 赞同：2
> 
> 时间：2013-02-12T23:07:23.500
> 
> 标签：mysql, sql, database, sql-update

对于任何擅长使用 MySQL 的人来说，这基本上是免费赠品，正如我在我是菜鸟之前所说的那样，我的搜索还没有找到我需要的东西。

因此，表 salesrule 中的“description”列包含一个唯一的客户编号，例如：description = 100099，我想将“name”列设置为：客户代码：100099。

```
 UPDATE salesrule
    SET name = 'Code for customer:' "description"
    WHERE description LIKE '1000%' 
```

如何将“描述”中包含的数字放入我的“姓名”中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T23:08:30.390

尝试[`CONCAT()`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_concat)

```
UPDATE salesrule
SET name = CONCAT('Code for customer:', description)
WHERE name LIKE '1000%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T23:13:59.903

```
Update salesrule
SET name = 'Code for customer:' + description
WHERE description LIKE '1000%' 
```

# lex - TeX 方程的起始条件

> ID：14843564
> 
> 赞同：1
> 
> 时间：2013-02-12T23:07:53.670
> 
> 标签：lex

在 lex 中，我可以为 . 之间定义的方程定义以下起始条件`$...$`。

```
%x EQN1

\$ { BEGIN(EQN1); }
<EQN1>{
    \$ { BEGIN(INITIAL); }
    [^\$]* {} 
} 
```

对于 之间的方程式`$$...$$`，我如何定义除`$$`规则之外的任何内容，例如在`[^\$]*`. 估计`[^\$\$]*`行不通

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T01:57:39.577

我认为您不了解模式的匹配方式，请参阅 flex[手册](http://westes.github.io/flex/manual/Patterns.html)

Flex 总是尽量匹配最长的输入。您可以这样理解，更长的规则具有更高的优先级。

因为“\$\$”匹配两个字符和“.” 只有一个，下面的例子就可以了。

```
%x EQN2

\$\$ { BEGIN(EQN2); }
<EQN2>{
    \$\$ { BEGIN(INITIAL); }
    . {} 
} 
```

您也可以在您的示例中替换`[^\$]* {}`为`. {}`，因为当规则匹配相同大小的输入时，lex.l 中的第一个具有更高的优先级。

# ruby-on-rails - 如何优化和组合这些低效的数据库查询？

> ID：14843566
> 
> 赞同：2
> 
> 时间：2013-02-12T23:08:08.303
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

这是我的数据库查询：

User has_many UserFollow（UserFollow 是 User 模型之间的关系）。用户 has_many 照片。Photo has_many PhotoFollow 关系（PhotoFollow 是 User 和 Photo 模型之间的关系）。

```
@user_list = Array.new
user_followers = UserFollow.where("user_1_id = ?", current_user.id).includes(:follower)
user_followers.each do |f|
  @user_list << f.user
end

photos = Photo.where("user_id = ?", current_user.id).includes(:follow_relationships => [:photo])
photos.each do |p|
  p.follow_relationships.each do |f|
    @user_list << f.user if !@user_list.include? f.user
  end
end

if @user_list.size < 150
  users = User.where("verified = ? and first_name IS NOT NULL and last_name IS NOT NULL", true).includes(:solutions).limit(150 - @user_list.size)
  users.each do |u|
    @user_list << u if !@user_list.include? u
  end
end 
```

显然，所有这些都需要大量的时间。使用包含有帮助，但我想知道是否有一些方法可以更有效地执行这组操作。

谢谢，林戈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:27:36.033

首先附加您的关联。

```
class User < ActiveRecord::Base
  has_many :follows_to_user, :class_name => 'UserFollow', :foreign_key => 'follower_id'
  has_many :follows_to_photo, :class_name => 'PhotoFollow', :foreign_key => 'user_id' # if you don't have it now
end 
```

现在，前两个查询可以在**一个 SQL 查询**中变得更加优雅，返回**AR::Relation**范围。

```
@user_list = User.includes(:follows_to_user => {}, :follows_to_photo => {:photo => {}}).where(["user_follows.user_1_id = :user_id OR photos.user_id = :user_id", :user_id => current_user.id]) 
```

大约 150... [更新]

当然，您最好实现该逻辑，在前面的 SQL 语句中附加条件和**UNION**语句（仅使用**SQL 语法**），这应该返回 AR::Relation 并且会快一点。但是您可以保持懒惰并将其留在 ruby​​ 中，尽管它会返回**Array**：

```
if (count = @user_list.count) && count < 150 # run COUNT just once and store value into local variable
  @user_list |= User.where("verified = ? and first_name IS NOT NULL and last_name IS NOT NULL", true).includes(:solutions).limit(150 - count)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T01:48:27.897

查看您的代码，您计划将用户列表添加到您的`@user_list`. 您可以先建立用户 ID 列表，这样我们就不会创建不必要的 AR 对象

**第一个代码**

```
@user_list = Array.new
user_followers = UserFollow.where("user_1_id = ?", current_user.id).includes(:follower)
user_followers.each do |f|
  @user_list << f.user
end 
```

可以改为

```
# assuming you have a user_id column on user_follows table
user_ids = User.joins(:user_follows).where(user_follows: { user_1_id: current_user.id })
  .uniq.pluck('user_follows.user_id') 
```

**第二个代码**

```
photos = Photo.where("user_id = ?", current_user.id).includes(:follow_relationships =>[:photo])
photos.each do |p|
  p.follow_relationships.each do |f|
    @user_list << f.user if !@user_list.include? f.user
  end
end 
```

可以改为

```
user_ids += Photo.where(user_id: current_user.id).joins(follow_relationships: :photo)
  .uniq.pluck('follow_relationships.user_id') 
```

**第三个代码**

```
if @user_list.size < 150
  users = User.where("verified = ? and first_name IS NOT NULL and last_name IS NOT NULL", true).includes(:solutions).limit(150 - @user_list.size)
  users.each do |u|
    @user_list << u if !@user_list.include? u
  end
end 
```

可以改为

```
user_ids += users = User.where(verified: true)
  .where('first_name IS NOT NULL AND last_name IS NOT NULL')
  .where('id NOT IN (?)', user_ids)
  .limit(150 - user_ids.size).pluck(:id) 
```

然后你可以使用获取所有用户`user_ids`

```
@user_list = User.where(id: user_ids) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T03:48:41.477

必须有比我的答案更好的方法，但是为什么不包括在内`:user`，因为您在迭代查询时正在加载它们？

```
@user_list = Array.new
user_followers = UserFollow.includes(:user).where("user_1_id = ?", current_user.id)
# why did you include followers?
user_followers.each do |f|
  @user_list << f.user
end

photos = Photo.includes(follow_relationships: { photo: :user }).where("user_id = ?", current_user.id)
photos.each do |p|
  p.follow_relationships.each do |f|
    @user_list << f.user unless @user_list.include? f.user
  end
end

if @user_list.size < 150
  users = User.where("verified = ? and first_name IS NOT NULL and last_name IS NOT NULL", true).limit(150 - @user_list.size)
  # why did you include solutions?
  users.each do |u|
    @user_list << u unless @user_list.include? u
  end
end 
```

也许这更快，我不确定：

```
@follower_ids = UserFollow.where("user_1_id = ?", current_user.id).pluck(:user_1_id).uniq

@photo_ids = Photo.joins(follow_relationships: :photo)
@photo_ids = @photo_ids.where("user_id = ? and user_id not in (?)", current_user.id, @follower_ids)
@photo_ids = @photo_ids.pluck(:user_id).uniq

@followers = User.where("id in (?)", @follower_ids)
@photo_users = User.where("id in (?) and not in (?)", @photo_ids, @follower_ids) 

@array_size = (@follower_ids + @photo_ids).size
if @array_size < 150
  @users = User.where("verified = ? and first_name is not null and last_name is not null", true)
  @users = @users.where("id not in (?)", @photo_ids + @follower_ids).limit(150 - @array_size)
else
  @users = []
end

@final_array = @followers + @photo_users + @users 
```

我还没有测试这是否有效，或者它是否更快。它有更多的数据库查询，但迭代次数更少。

### 更新

如果您向用户模型添加另一列，该列将更新为 1 到 3 的值，这取决于他们是否有关注者、照片或什么都没有。

那么你需要做的就是：

```
# in User model
def self.valid_users
  where("verified = ? and first_name is not null and last_name is not null", true)
end

@users = User.valid_users.order("sortable ASC").limit(150) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T09:32:38.200

您是否为您的表设置了表索引？

如果您还没有，请为您的所有外键和您需要包含在条件中的列设置它们。在您的数据库迁移脚本中（当然，使用正确的表名和列名）。它们将加快您的查询速度，尤其是在您拥有大型数据集的情况下：

```
add_index :user_follows, :follower_id
add_index :user_follows, :followed_id

add_index :photos, :user_id

add_index :photo_follow_relationships, :photo_id
add_index :photo_follow_relationships, :follower_id

add_index :users, :verified
add_index :users, :first_name
add_index :users, :last_name 
```

另外，一些评论和建议：

```
# ... [SNIP] Query and add to user list.
user_followers = []  # You are not actually using the UserFollow records. Unload
                     # them from memory. Otherwise, they will be stored until we
                     # leave the block.

# There is no need to fetch other Photo data here, and there is no need to load
# :photo for FollowRelationship. But there is a need to load :user.
photos = Photo.where(:user_id => current_user.id).select('photos.id').
    includes(:follow_relationships => [:user])
# ... [SNIP] Add to user list.
photos = []  # Unload photos.

# ... [SNIP] Your condition.
# There is no need to load :solutions for the users here.
users = User.where("verified = ? and first_name IS NOT NULL and last_name IS NOT NULL", true).limit(150 - @user_list.size)
# ... [SNIP] Add to user list. 
```

当然，如果你也重构代码会更好，就像在一些[mind blank](https://stackoverflow.com/users/1211372/mind-blank)的建议中那样。你也可以使用[has_many :through](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)关联来清理你的控制器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T11:40:33.107

将以下关系添加到您的模型中

```
class User  
  has_many :user_follows
  has_many :inverse_user_follows, :class_name=>'UserFollow', :foreign_key=>:follower_id

  # followers for user
  has_many :followers, :through => :user_follows
  # users followed by user
  has_many :followed_users, :through => :inverse_user_follows, :source => :user

  # photos created by user
  has_many :photos

  has_many :photo_user_follows, :through => :photos, :source => :user_follows

  # followers for user's photo

  has_many :photo_followers, :through => :photo_user_follows, :source => :follower

  has_many :photo_follows
  # photos followed by user
  has_many :followed_photos, :source => :photo, :through => :photo_follows

end  

class UserFollow
  # index user_id and follower_id columns
  belongs_to :user
  belongs_to :follower, :class_name => "User"
end 
```

照片相关模型

```
class Photo
  # index user_id column
  belongs_to :user
  has_many   :photo_follows
  has_many   :followers, :through => :photo_follows
end

class PhotoFollow
  # index photo_id and follower_id columns
  belongs_to :photo
  belongs_to :follower, :class_name => "User"
end 
```

现在您可以获得当前用户关注者或当前用户的照片关注者或活跃用户的用户..

```
user_ids = current_user.follower_ids | current_user.photo_follower_ids

User.where("ids IN (?) OR 
   ( verified = ? and first_name IS NOT NULL and last_name IS NOT NULL )", 
  user_ids, true).limit(150) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T03:40:08.890

这只是一个猜测。

```
@user_list = current_user.followers.where("verified = ? and first_name IS NOT NULL and last_name IS NOT NULL", true).includes(:solutions, :photos => {:follow_relationships}).limit(150) 
```

总的来说，我认为这一切都是错误的，因为它本身就很复杂。如果你不能清楚地阅读它在做什么，那么你应该重新开始。

# php - 让身份验证在包中工作

> ID：14843571
> 
> 赞同：0
> 
> 时间：2013-02-12T23:08:29.100
> 
> 标签：php, laravel

我正在尝试按照此处的指南：http: [//fideloper.com/post/41750468389/laravel-4-uber-quick-start-with-auth-guide](http://fideloper.com/post/41750468389/laravel-4-uber-quick-start-with-auth-guide)为进入“admin/”的用户设置授权。但是，我试图在一个被证明很棘手的包中做到这一点。

在 workbench/vendor/user/src/Vendor/User/routes.php 我有：

```
Route::filter('adminAuth', function()    {
    if (Auth::guest()) return Redirect::to('user::login');
});

Route::get('/login', function()    {
    return View::make('user::login');
});

Route::post('/login', function()    {
    Auth::attempt( ['email' => Input::get('email'), 'password' =>       Input::get('password')] );
    return Redirect::to('/');
});

Route::get('admin', array('before' => 'adminAuth', function()    {
    return 'Hello, '.Auth::user()->email.'!';
})); 
```

登录页面按预期显示，当输入用户信息时，我在数据库中植入了以下错误：

```
FatalErrorException: Error: Class '\User' not found in E:\cms_root\vendor\laravel\framework\src\Illuminate\Auth\EloquentUserProvider.php line 89 
```

在应用程序的 auth.php 文件中，我有：

```
 'model' => 'User', 
```

我猜这是不正确的，但我不知道如何解决我在中创建的用户模型：`workbench/vendor/user/src/Vendor/User/models/User.php`. 我已经尝试过`User::User`，`Vendor\User\User`但都没有工作。

添加：

User.php 文件`<?php namespace Vendor\User;`位于顶部，我在应用程序根目录和工作台/供应商/用户文件夹中都做了一个 composer dumpautoload。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:31:48.490

您可以尝试使用 \Vendor\User\User 吗？前面的反斜杠就像命名空间的绝对路径等价物。

# ios - Air iOS Flash、StageQuality.LOW 似乎不起作用

> ID：14843576
> 
> 赞同：0
> 
> 时间：2013-02-12T23:08:37.783
> 
> 标签：ios, performance, flash, optimization, air

我读过几篇关于在 Air for iOS 上优化 Flash 性能的文章，其中许多建议使用 StageQuality.LOW 模式。但似乎 Air（我使用的是 3.6）不允许您使用 StageQuality.LOW，它必须是 HIGH 或 BEST 质量。

我错过了什么吗？有没有办法把它变成低质量模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:57:47.687

事实上，性能上是有区别的。StageQuality 渲染性能的差异，例如位图或文本字段。StageQuality Lower 不应用抗锯齿矢量图形，不应用位图图形绘制不流畅。更高质量的设置会产生更好的缩放位图渲染。此外，更高质量的设置计算成本更高。特别是在渲染缩放视频时，使用更高质量的设置会降低帧速率。

你在做什么工作？如果使用 BitmapData，推荐如下。

AIR 3.3 后来添加了一个新的特色绘图方法，称为[drawWithQuality](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#drawWithQuality%28%29)，它允许您以独立于应用程序中使用的舞台质量设置的质量绘制资产。

过去，必须修改舞台质量才能更改 BitmapData.draw 的质量。位图数据。drawWithQuality 是 BitmapData.draw 的扩展，它添加了一个可选参数来指定矢量渲染的质量。

```
function drawWithQuality(source: IBitmapDrawable, matrix:Matrix=null, colorTransform: ColorTransform =null, blendMode:String=null, clipRect:Rectangle=null, smoothing:Boolean=false, quality:String=null): void 
```

以下是支持的质量值：

> *   舞台质量.LOW
> *   StageQuality.MEDIUM
> *   StageQuality.BEST
> *   StageQuality.HIGH_8X8_LINEAR
> *   StageQuality.HIGH_16X16
> *   StageQuality.HIGH_16X16_LINEAR

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:10:20.907

它确实有效，只是在 AIR 模拟器中总是显示为 HIGH。将在实际设备上更改。即使在 GPU 模式下的低质量下，位图也会变得平滑。

# haskell - 在 Haskell 的 case 语句中使用默认值

> ID：14843578
> 
> 赞同：7
> 
> 时间：2013-02-12T23:09:00.660
> 
> 标签：haskell

我正在尝试创建一个名为 place 的新数据声明。

它看起来像这样：

`data place = United States | France | England | Germany | Mexico | Canada`

我希望然后使用一个名为 cap 的函数将这个位置带到它的首都，如下所示：

```
cap :: place -> String
cap a = case a of

            Spain           -> "Madrid"
            France          -> "Paris"
            England         -> "London"
            Germany         -> "Berlin"
            Mexico          -> "Mexico City"
            Canada          -> "Ottawa"
            _               -> undefined 
```

但是，在最后一种情况下，我试图捕获数据声明中可能不存在的所有其他条目不起作用。例如，如果我`capital Wales`在 GHCI 中输入，我不会得到未定义的响应。相反，我得到一个不在范围内的错误。有人可以帮助我解决我的困惑，也许可以提供一种合法的方式来尝试捕捉其他案件吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T23:12:21.243

问题不在于你如何处理丢失的案例——你做得很好。问题是`Wales`构造函数根本不存在。因此，就像您尝试使用尚未定义的变量或函数一样，您会收到编译错误。您的`cap`函数甚至永远不会被调用，因此您无法对其进行任何更改都会影响此行为。您无法对使用不存在的构造函数的代码进行编译。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T23:10:17.447

当您输入`capital Wales`时，范围内没有`Wales`。您不可能构造一个不存在的值。如果您已经涵盖了所有可能的情况，那么您不需要默认情况。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-13T01:30:48.863

为了重复 sepp2k 和 singpolyma 的答案，这里的重点是 Haskell 的联合类型是**详尽**的。*当你用n 个*case定义联合类型时，你是在告诉 Haskell 这*n 个*case 是你的类型存在的唯一 case。正如 singpolyma 指出的那样，您已经告诉 Haskell 其他情况甚至不*存在*。

这有好处也有坏处。详尽无遗意味着您和编译器可以保证您的函数正在处理它们将被给出的所有可能的输入。缺点是案例集在编译时是固定的。

这里最简单的选择是两部分：

1.  使用“开放”类型（您可以在运行时为其创建任意多个不同实例）来表示国家和首都。字符串在这里是一个很好的选择。您可以在运行时构造无数种不同的字符串。但是您也可以使用带有字符串成员的记录类型。
2.  使用键/值分配数据结构来表示国家和首都之间的关联。

所以你可以像这样代表国家和城市：

```
-- Since there are infinitely many different strings you could construct at runtime,
-- there are also infinitely many different Cities and Nations...
data City = City String deriving (Eq, Ord, Show)
data Nation = Nation String deriving (Eq, Ord, Show 
```

最简单的键/值映射类型是`[(k, v)]`，通常称为*关联列表*。它当然有一个 O(n) 的查找时间。更好的方法是使用[`Data.Map`](http://lambda.haskell.org/platform/doc/current/ghc-doc/libraries/containers-0.4.2.1/Data-Map.html)Haskell 平台附带的 .

# ruby-on-rails-3 - 修改关系关联

> ID：14843584
> 
> 赞同：0
> 
> 时间：2013-02-12T23:09:44.587
> 
> 标签：ruby-on-rails-3

我正在开发一个微型社交网络，我有两种不同的帐户类型，用户可以是个人资料或页面。

```
class User < ActiveRecord::Base

  has_one :profile
  has_one :page

end 
```

现在，当我想显示用户名时，我会执行 current_user.profile.name，但如果用户是“页面”，显然会出现错误。

所以我尝试了这个

```
private
  def current_user
    if session[:user_id]
      @current_user = User.find(session[:user_id])

      if @current_user.account_type == 'profile'
        @current_user.profile = @current_user.page
      end

    end
  end 
```

但它不起作用。

非常感谢任何帮助。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:13:12.973

我不太确定你在问什么，但你可以添加一个`User`模型来处理这个问题：

```
class User < ActiveRecord::Base

  has_one :profile
  has_one :page

  def name
     if self.account_type == 'profile'
        return self.profile.name

     return <whatever for page>
  end
end 
```

**编辑：**

对于多个字段，为什么不使用以下方法`User`：

```
class User < ActiveRecord::Base

  # other code removed

  def get_info(method, *args)
      if self.account_type == 'profile'
          return self.profile.send(method, *args)
      end
      self.page.send(method, *args)
  end 
end 
```

所以要使用它，假设我们有`a = User.find(:id)`any `id`。然后，您可以这样做，假设`a`'s`account_type`是`profile`：

`a.get_info(:name) # => a.profile.name`

# ios - 创建 iOS 项目以包含在其他项目中

> ID：14843586
> 
> 赞同：0
> 
> 时间：2013-02-12T23:10:11.220
> 
> 标签：ios

我有很多用于多个应用程序的代码。目前，我有一些类文件只包含在每个项目中。他们通过 API 进行 JSON/XML 处理。

但是，我想更好地构建我的代码。

例如，SDWebimage 是一个您包含的项目，并且有点与您自己的父项目相关联，以处理图像处理的东西，如延迟/线程图像加载等。

我想这样做，以便我可以更新我的核心项目（执行繁重的工作，例如从 CMS 的 API 发送/接收/解析 JSON/XML），而不必更新我在其他项目中的所有代码.

我知道我可以包含中央文件夹中的 .m/.h 文件，然后取消选中“复制到项目”，这样很多项目就可以引用一对 .m/.h 文件

但是.. 我想扩展我的知识，并为每种特定形式的工作负载创建一个单独的项目，就像一个好的 MVC 风格的程序一样。还是对于这么少的代码来说太多了？

谢谢

# ruby-on-rails - Ember 中的全局变量

> ID：14843593
> 
> 赞同：6
> 
> 时间：2013-02-12T23:10:35.913
> 
> 标签：ruby-on-rails, ember.js, ember-data

在 Ember 中存储全局变量的合适方法是什么？例如，我在 Ember 中有一个用户模型，但我总是想知道该模型的哪个特定实例（包括它的 id、名称、电子邮件等）对应于当前登录的用户。

我应该以某种方式将其存储在 Ember 中吗？还是将 JS 变量附加到`window`对象（例如`window.currentUserId = 1;`）并使用它更好？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T04:24:37.547

免责声明：下面显示的所有技术都是我过去几个月使用 EmberJS 的经验，以及与同事的一些讨论。如有不妥，请提高声音。我们都处于学习阶段（并且 ember.js 文档很烂，所以请善待；）

目前我的工作场所有两个开发人员正在使用 Ember.js。我们得出一个结论，将全局变量存储在 global`ApplicationController`中比存储在应用程序命名空间中要好得多。这是因为如果该值存储在应用程序命名空间中，检索该值可能会非常混乱。这在闭包中也很有效，因此使全局命名空间干净（并且相对无破解）。您不希望您的用户`App.set`弄乱变量对吗？

这是基于 1.0.0 pre-4。

考虑到你有这个`currentUserId`全局变量

1.  存储在命名空间中。[jsFiddle 演示](http://jsfiddle.net/fpuvS/2/)

    ```
    (function() {

        function r() {
            return Math.round(Math.random()*999);
        }

        var MyApp = Ember.Application.create({
            currentUserId: null,
            ready: function() {
                //demo purpose.
                this.set('currentUserId', r());
            },
            rootElement: '#demo'
        });
        MyApp.ApplicationView = Ember.View.extend({
            templateName: 'application-view',

            //Direct child view
            innerView: Ember.View.extend({
                templateName: 'inner-view',
                setValue: function() {
                    this.set('controller.namespace.currentUserId', r());
                }
            }),

            //Direct child view, but with a controller attached
            innerViewWithController: Ember.View.extend({
                controller: Ember.Controller.create(),
                templateName: 'inner-view-with-controller',
                setValue: function() {
                    this.set('parentView.controller.namespace.currentUserId', r());
                }
            }),
            getValue: function() {
                alert(this.get('controller.namespace.currentUserId'));
            },
            setValue: function() {
                this.set('controller.namespace.currentUserId', r());
            }
        });
    })(); 
    ```

2.  vs 存储在全局`ApplicationController` [jsFiddle 演示中](http://jsfiddle.net/2z8ER/5/)

    ```
    (function() {

        function r() {
            return Math.round(Math.random()*999);
        }

        var MyApp = Ember.Application.create({
            ApplicationController: Ember.Controller.extend({
                currentUserId: null,
                init: function() {
                    //demo purpose
                    this.set('currentUserId', r());
                }
            }),
            rootElement: '#demo'
        });
        MyApp.ApplicationView = Ember.View.extend({
            templateName: 'application-view',

            //Direct child view
            innerView: Ember.View.extend({
                templateName: 'inner-view',
                setValue: function() {
                    this.set('controller.currentUserId', r());
                }
            }),

            //Direct child view, but with a controller attached
            innerViewWithController: Ember.View.extend({
                controller: Ember.Controller.create(),
                templateName: 'inner-view-with-controller',
                setValue: function() {
                    this.set('parentView.controller.currentUserId', r());
                }
            }),
            getValue: function() {
                alert(this.get('controller.currentUserId'));
            },
            setValue: function() {
                this.set('controller.currentUserId', r());
            }
        });
    })(); 
    ```

注意：

1.  如果您选择存储在命名空间中，您将需要一直通过根控制器访问它，因此它实际上与使用额外`namespace`关键字存储在 applicationController 中相同。

2.  如果您选择将其存储在 root`applicationController`中，那么对于从 中继承的任何视图`applicationView`，您都可以轻松访问模板中的变量，`{{variableName}}`而无需任何点遍历。默认情况下，Ember.Js 通过控制器查找变量。

3.  在最坏的情况下，如果您的内部视图需要有自己的控制器，通过根控制器（或命名空间）访问全局变量会稍微痛苦一些，因为控制器没有链接，您需要遍历视图直到看到根控制器。在 Ember.JS 中，默认情况下，所有视图都会有一个控制器集，并且默认情况下是父级的控制器。这意味着如果您从不指定任何控制器，所有后代视图实际上都链接到根控制器。为了克服这个问题，可以在控制器中做*变量绑定*，轻松解决遍历的丑陋。

我不建议您将如此重要的变量放在全局`window`对象中，因为它很容易被用户修改（并引发任何潜在问题）。将其放在 ember 应用程序命名空间中的全局命名空间中可以减少潜在问题，但如果将其设为全局则不会

我的 2 美分 ;)

# ruby-on-rails - PaperClip：一个用于多个文件上传的数据库条目

> ID：14843600
> 
> 赞同：0
> 
> 时间：2013-02-12T23:11:21.823
> 
> 标签：ruby-on-rails, paperclip, jquery-file-upload

例如，我以相同的形式上传了两个文件 A 和 B，回形针会在数据库中插入两个条目。

有没有办法强制回形针只创建一个数据库条目并插入两个不同的字段（例如 file_name_A、file_name_B、file_size_A、file_size_B ......）？

**更新**：

在我的**submit.rb 中：**

```
attr_accessible :id, :email, :uploads_attributes
has_many :uploads, :dependent => :destroy
accepts_nested_attributes_for :uploads, :allow_destroy => true 
```

在我的**upload.rb 中**：

```
belongs_to :submission
attr_accessible :id, :user_id, :package_a_file_name, :package_a_file_size, :package_b_file_name, :package_b_file_size, :updated_at
has_attached_file :package 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T19:15:28.470

您的模型设置方式没有任何问题。如果您希望更改要求，将多个上传存储在单独的模型中可以更轻松地保持跟踪。

您只在upload.rb 中指定*了一个*附加文件，这就是它为每次上传插入一个单独条目的原因。指定 random`attr_accessibles`不会做任何事情，这些字段甚至不存在。

您*可以*完全删除上传模型，并将上传内容直接存储在提交中：

**提交.rb**

```
has_attached_file :package_a
has_attached_file :packabe_b 
```

这会将上传存储在与提交相关联的单行中。这是不可扩展的。

我不会以上述不可扩展的方式在您的上传模型中存储多个上传，从 OOP 的角度来看，这没有逻辑意义。

总而言之，我认为您现在设置它的方式是最好的方法。

# java - 有没有一种简单的方法可以强制 String.split() 返回带有空字符串元素的数组？

> ID：14843604
> 
> 赞同：1
> 
> 时间：2013-02-12T23:11:44.420
> 
> 标签：java, regex, arrays, string, split

在 C# 中，我可以使用 StringSplitOption.None 枚举元素来指定我希望将空字符串包含在结果数组中：

```
String[] s = text.Split(new String[] { "\r\n" }, StringSplitOptions.None); 
```

在java中，我可以执行以下操作：

```
 String[] s= text.split("\r\n"); 
```

但是，split 方法不返回空字符串。（所以如果 text = "a\r\nb\r\n"，我想得到 {a, b, ""}，而不是 {a, b}）。

有没有一种简单的方法可以通过正则表达式或使用其他方法来完成此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T23:13:25.590

您可以`-1`用作您的[String#split](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)限制：

```
System.out.println(Arrays.toString("a\r\nb\r\n".split("\\r\\n", -1))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T23:15:18.603

使用番石榴的`Splitter`. 通常就其工作方式而言更合乎逻辑。

```
import com.google.common.base.Splitter;
...
System.err.println(Splitter.on("\r\n").split("a\r\nb\r\n")); 
```

# css - 如何删除 TBODY 元素之间的额外边框间距？

> ID：14843606
> 
> 赞同：8
> 
> 时间：2013-02-12T23:11:55.200
> 
> 标签：css

**重要提示：这个问题不再有效。此错误已在最新版本的 Chrome 中修复。**

我使用`border-spacing: 1px`CSS 规则让我的所有单元格之间`TABLE`有一个`1px`间距。但是，我必须`TBODY`在表中使用多个元素。我`2px`介于`THEAD`,`TBODY`和`TFOOT`元素之间（Chrome）。

用 替换这些`2px`差距的最简单方法是什么`1px`？

![缺口](../Images/8a3a022cd5eb2bdca546cfe8119967b1.png)

准确的 HTML 和 CSS 代码：http: [//jsfiddle.net/qQA3Z/](http://jsfiddle.net/qQA3Z/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T23:25:31.907

注意：这是一个特定于 Webkit 的错误。（在 Firefox 中不存在，并且像往常一样，IE 甚至不会加载 jsFiddle 来测试它。）

不幸的是，没有办法*正确*解决这个问题。关于这个话题已经有[一个悬而未决的问题。](https://stackoverflow.com/questions/3892231/double-border-spacing-with-thead-in-chrome-and-safari)此外，[自 Chrome 8 以来有一个未解决的错误报告](https://code.google.com/p/chromium/issues/detail?id=29502)已通过 Chrome 20 确认存在（我可以在 Chrome 25 中确认）。关于这件事还有一个[开放的 Webkit bug thread](https://bugs.webkit.org/show_bug.cgi?id=20040)，它仍然是“ [NEW](https://bugs.webkit.org/page.cgi?id=fields.html#status) ”。

老实说，我什至找不到解决方法。玩`border-spacing`, `margin`，甚至`position`似乎对此没有影响。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-12T23:25:56.697

看起来`border-collapse`at`table`级别和孩子`thead`, `tbody`,之间存在冲突`tfoot`。一种可能的解决方法：

[http://jsfiddle.net/qQA3Z/3/](http://jsfiddle.net/qQA3Z/3/)

```
body { margin: 10px; }
div {border: 1px solid #aaa; display:inline-block}
table {
    background: #fff;
    border-collapse: collapse;
}
td {
    font-family: Tahoma;
    background: #ddd;
    padding: 5px 8px;
    border:1px solid #fff
}

<div>
<table>
    <thead>
        <tr><td colspan='2'>Header</td></tr>
        <tr><td>Column 1</td><td>Column 2</td></tr>
    </thead>
    <tbody>
        <tr><td>Element</td><td>Element</td></tr>
        <tr><td>Element</td><td>Element</td></tr>
    </tbody>
    <tfoot>
        <tr><td colspan='2'>Footer</td></tr>
    </tfoot>
</table>
</div> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-09-18T13:57:18.580

这为我解决了这个问题：

```
table { border-collapse: collapse!important;} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-10-16T13:03:41.700

个人为我解决的问题是将 line-height 更改为 0

行高：0；边框间距：0

# java - EJB 3.1 从独立 Java 程序中查找

> ID：14843608
> 
> 赞同：-2
> 
> 时间：2013-02-12T23:12:00.587
> 
> 标签：java, ejb

我有一个使用 EJB 3.1 Specs 定义并部署在 WAS 8.5 服务器上的无状态会话 Bean。

有一个需要进行 EJB 查找和调用业务方法的独立 Java 应用程序

如何编写代码以从独立 Java 程序中进行 EJB 查找。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:58:56.110

您想使用远程上下文。有很多文档涵盖了这一点

[http://docs.oracle.com/cd/B15904_01/web.1012/b15505/access.htm](http://docs.oracle.com/cd/B15904_01/web.1012/b15505/access.htm) [http://openejb.codehaus.org/hello-world.html](http://openejb.codehaus.org/hello-world.html) EJB3/UseInitialContextToLookupEJB.htm">http://www .java2s.com/Tutorial/Java/0415_EJB3/UseInitialContextToLookupEJB.htm [https://docs.jboss.org/author/display/AS71/Remote+EJB+invocations+via+JNDI+-+EJB+client+API+or+remote -命名+项目](https://docs.jboss.org/author/display/AS71/Remote+EJB+invocations+via+JNDI+-+EJB+client+API+or+remote-naming+project)

# ruby - 在 XML 响应中添加周围的 XML 标记？

> ID：14843613
> 
> 赞同：1
> 
> 时间：2013-02-12T23:12:43.680
> 
> 标签：ruby, ruby-on-rails-3.2

有没有一种简单的方法可以将控制器操作的 XML 响应包装成类似的东西`<response>@model.to_xml</response>`而无需创建额外的`response`模型？

`respond_with`看起来像：

```
respond_with(@model, :status => :accepted, :location => nil) do |format|
  format.xml { render :xml => @model.to_xml(:dasherize => false) }
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:49:09.613

```
respond_with(@model, :status => :accepted, :location => nil) do |format|
  format.xml { 
    render :xml => {:response => @model}.to_xml(:dasherize => false) 
  }
end 
```

# php - 致命错误：调用未定义的方法 PDOStatement::fetch_row()

> ID：14843614
> 
> 赞同：-5
> 
> 时间：2013-02-12T23:12:46.090
> 
> 标签：php, mysql

我可以做些什么来修复我的代码？我在运行程序时收到以下错误消息：

> 致命错误：在第 12 行的 C:\apache2\Apache2\htdocs\ch\ch32\listing32_2(1).php 中调用未定义的方法 PDOStatement::fetch_row()

```
<?php

    // Instantiate the mysqli class
    $db = new PDO("mysql:host=localhost;dbname=coorporate", "root", "xxxxxxxx");

    // Assign the employeeID
    $eid = htmlentities($_POST['id']);

    // Execute the stored procedure 
    $result = $db->query("SELECT calculate_bonus('$eid')");

    $row = $result->fetch_row();

    printf("Your bonus is \$%01.2f",$row[0]);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:18:48.323

在 PDOStatement 中不存在 fetch_row 方法 - 您必须使用`PDOStatement::fetch(PDO::FETCH_NUM)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:19:39.357

你需要[`PDOStatement::fetch`](http://php.net/manual/en/pdostatement.fetch.php)，没有`fetch_row()`。

`$row = $result->fetch_row();`应该`$row = $result->fetch();`

# servlets - 通过 getRealPath() 将上传的文件写入磁盘时出现 java.io.FileNotFoundException

> ID：14843615
> 
> 赞同：2
> 
> 时间：2013-02-12T23:12:48.043
> 
> 标签：servlets, file-upload, filenotfoundexception, realpath

Glassfish 似乎也为我想保存图像文件的路径添加了额外的内容，有没有办法只使用我的 servlet 获得的绝对路径

`String appPath = request.getServletContext().getRealPath("");`?

我花了几天时间尝试不同的方法来上传图像文件并让 servlet 将其保存到磁盘。

我用了这个例子： http: [//www.codejava.net/java-ee/servlet/how-to-write-upload-file-servlet-with-servlet-30-api](http://www.codejava.net/java-ee/servlet/how-to-write-upload-file-servlet-with-servlet-30-api)

使用调试我可以看到正确收集了文件名和路径信息，但代码在 `part.write(savePath + File.separator + fileName);` 处失败

glassfish的异常报告是：

```
exception

java.io.FileNotFoundException: C:\Program Files\glassfish-3.1.2.2\glassfish\domains\domain1\generated\jsp\com.onemore_onemore-web_war_1.0-SNAPSHOT\D:\Dropbox\Git\Brian_JEE\onemore\onemore\onemore-web\target\onemore-web-1.0-SNAPSHOT\image\screengrab_all_products.jpg (The filename, directory name, or volume label syntax is incorrect) 
```

作为此异常的一部分，我可以看到正确的路径`D:\Dropbox\Git\Brian_JEE\onemore\onemore\onemore-web\target\onemore-web-1.0-SNAPSHOT\image\screengrab_all_products.jpg`

JSP

```
<form action="${pageContext.request.contextPath}/imageupload" method="post" enctype="multipart/form-data" name="productForm" id="productForm">
<input type="file" name="file" id="file">
<input type="submit" name="Submit" value="Submit"></td>
</form> 
```

小服务程序

```
@WebServlet(name = "UploadImageServlet", urlPatterns = {"/imageupload"})
@MultipartConfig(fileSizeThreshold = 1024 * 1024 * 2, // 2MB 
maxFileSize = 1024 * 1024 * 10, // 10MB
maxRequestSize = 1024 * 1024 * 50)   // 50MB
public class UploadImageServlet extends HttpServlet {

    /**
     * Name of the directory where uploaded files will be saved, relative to the
     * web application directory.
     */
    private static final String SAVE_DIR = "image";

    /**
     * handles file upload
     */
    @Override
    protected void doPost(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
      // gets absolute path of the web application
        String appPath = request.getServletContext().getRealPath("");
        // constructs path of the directory to save uploaded file
        String savePath = appPath + File.separator + SAVE_DIR;

        // creates the save directory if it does not exists
        File fileSaveDir = new File(savePath);
        if (!fileSaveDir.exists()) {
            fileSaveDir.mkdir();
        }

        for (Part part : request.getParts()) {
            String fileName = extractFileName(part);
            part.write(savePath + File.separator + fileName);
        }

        request.setAttribute("message", "Upload has been done successfully!");
        getServletContext().getRequestDispatcher("/WEB-INF/jsp/newproduct.jsp").forward(
                request, response);
    }

    /**
     * Extracts file name from HTTP header content-disposition
     */
    private String extractFileName(Part part) {
        String contentDisp = part.getHeader("content-disposition");
        String[] items = contentDisp.split(";");
        for (String s : items) {
            if (s.trim().startsWith("filename")) {
                return s.substring(s.indexOf("=") + 2, s.length() - 1);
            }
        }
        return "";
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T03:15:30.097

# 永远不要使用 getRealPath()

您不应将上传的文件保存在部署文件夹中。我之前已经解释过很多次了。这些解释之一可以在这个答案中找到：[Uploaded image only available after refresh the page](https://stackoverflow.com/questions/8885201/uploaded-image-only-available-after-refreshing-the-page/8889096#8889096)。

在使用该方法的一些博客/文章中找到的任何 JSP/Servlet 代码片段都`getRealPath()`应该用一大袋盐来处理。它的质量和作者的知识应该受到强烈质疑。[即该方法没有明智的现实世界用例](https://stackoverflow.com/questions/12160639/what-does-mean-in-the-function-servletcontext-getrealpath/12160863#12160863)。

将上传的文件保存在部署文件夹外的固定路径中。另请参阅[如何使用 Commons FileUpload 设置用于存储文件上传的文件夹](https://stackoverflow.com/questions/13528081/how-do-i-set-the-folder-for-storing-file-uploads-using-commons-fileupload/13532453#13532453)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-29T16:39:19.370

使用以下代码。我使用这些代码解决了这个错误。将它写入您的 doPost 方法。

```
Part filePart = request.getPart("file");
String fileName = 
Paths.get(filePart.getSubmittedFileName()).getFileName().toString(); 
InputStream inputStream = filePart.getInputStream();
String uploadPath = getServletContext().getRealPath("") + File.separator + "uploaded_file";
File uploadDir = new File(uploadPath);
if (!uploadDir.exists()) {
            uploadDir.mkdir();
        }
FileOutputStream outputStream = new FileOutputStream(uploadPath + 
File.separator + fileName);
        int read = 0;
        final byte[] bytes = new byte[1024];
        while ((read = inputStream.read(bytes)) != -1) {
            outputStream.write(bytes, 0, read);
        } 
```

\\

# javascript - JavaScript 倒数计时器未启动 [包括 Firebug 错误]

> ID：14843618
> 
> 赞同：0
> 
> 时间：2013-02-12T23:12:58.773
> 
> 标签：javascript, jquery, html, timer

我的页面上有这个倒数计时器：[http](http://www.dirtycookie.co) ://www.dirtycookie.co 。

除非您刷新页面，否则它不会倒计时。

我有相同的脚本，工作方式略有不同@ [m.dirtycookie.co](http://m.dirtycookie.co)供参考。

我的 index.php 上有这个脚本`<head>`

```
 <script>
        $(document).ready(function () {

        function countdown() {
        // input new date here
        var newdate = new Date("Mar 01, 2013 20:00:00");
        // input new date here

        //DO NOT TOUCH THE REST UNLESS YOU KNOW JQUERY WELL
        var now = new Date();
        var timeDifference = newdate.getTime() - now.getTime();
        var d = Math.floor(timeDifference / 1000);
        var l = Math.floor(d / 60);
        var b = Math.floor(l / 60);
        var u = Math.floor(b / 24);
        b %= 24; l %= 60; d %= 60;

        if(d < 0){ var d = 0}
        if(l < 0){ var l = 0}
        if(b < 0){ var b = 0}
        if(u < 0){ var u = 0}

        $(".days").html(u);
        $(".hours").html(b);
        $(".minutes").html(l);
        $(".seconds").html(d);

        var timer = setTimeout('countdown()',1000);
        //DO NOT TOUCH THE REST UNLESS YOU KNOW JQUERY WELL
    }
window.onload=countdown ; 
});
</script> 
```

萤火虫错误：ReferenceError：倒计时未定义 [http://www.dirtycookie.co/](http://www.dirtycookie.co/) 第 106 行 第 106 行实际上是：`var timer = setTimeout('countdown()',1000);`

用于此的 HTML 在这里：

```
 <div class="counter_wrap">

    <!-- Counter Title -->
        <h1>Countdown to Grand-Opening!</h1>

    <!-- Counter Title -->

    <!-- Counter Section -->
        <div class="numbers"><p class="days">23</p><p class="smallfont">Days</p></div>
        <div class="numbers"><p class="hours">19</p><p class="smallfont">Hours</p></div>
        <div class="numbers"><p class="minutes">7</p><p class="smallfont">Minutes</p></div>
        <div class="numbers"><p class="seconds">23</p><p class="smallfont">Seconds</p>

</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T23:14:58.270

这可能是一个问题：

```
var timer = setTimeout('countdown()', 1000); 
```

为什么只是这样称呼它：

```
var timer = setTimeout(countdown, 1000); 
```

字符串和`eval`真的是不必要的。还。

```
var timer = setTimeout(countdown(), 1000);
// is not the same as:
var timer = setTimeout(countdown, 1000); 
```

在第一个中，您将`countdown()`被调用的输出安排为函数。在第二个中，您实际上是`countdown`（这就是您想要的）。

# java - 与不同的数据库建立不同的连接并将其放入列表中

> ID：14843620
> 
> 赞同：1
> 
> 时间：2013-02-12T23:13:05.487
> 
> 标签：java, multithreading, concurrency, thread-safety, concurrenthashmap

我试图为每个数据库建立一个单独的连接，因为`JDBC URL's`它们不同，并将这些不同的连接存储在一个数组中。

在我下面的代码中，`tableList`是包含表名称和属性的地图，应该看起来像这样。

```
 ConcurrentHashMap<String, ConcurrentHashMap<String, String>> tableList 
```

示例示例-

`{table1={DRIVER=oracle.jdbc.driver.OracleDriver, PASSWORD=stage_cs_user, URL=jdbc_url, SUFFIX=xt1, SQL=sql, USER=user}, table2={DRIVER=driver_name, PASSWORD=pass, URL=jdbc_url2, SUFFIX=xt2, SQL=sql2, USER=user}}`

现在这意味着我需要`each thread`在运行方法中建立两个数据库连接，因为每个表的 JDBC url 都不同。所以我在我的代码中将 Connection 设置为 list 和 callableStatement ，并且根据 tableList 的大小，它将建立连接。

就像如果我们只有一张表，那么它只会建立一个连接，如果我们有两个表，那么它将建立两个连接。

`dbConnection[0]`之类的东西`dbConnection[1]` 。

对于每张桌子，我都在打电话`getRequiredMethods(suffix)`。所以我也需要把它作为清单。因为如果我们有两个表，那么列表中就会有两个表的方法。

下面是我的代码，我不确定如何`tableList`在 run 方法中循环该映射并建立新连接并将其分配为`dbConenction[0]`并`dbConnection[1]`取决于`tableList size`并确保此处的所有线程安全问题。

```
class Task implements Runnable {

    private Connection[] dbConnection = null;
    private CallableStatement[] callableStatement = null;

    public Task(ConcurrentHashMap<String, ConcurrentHashMap<String, String>> tableList) {
        this.tableLists = tableList;
    }

    @Override
    public void run() {

        try {

            for(loop around lableList map) {

 /* Make a connection to database and assign it as dbConnection[0], 
   dbConnection[1] and callableStatement[0] etc.
  */        
            dbConnection = getDBConnection(url, username, password, driver);
            callableStatement = dbConnection.prepareCall(sql);

            ArrayList<Method> methods = getRequiredMethods(suffix);
            }

        }   

    }

    private ArrayList<Method> getRequiredMethods(String suffix) {

        Class<ConstantsTest> consClass = ConstantsTest.class;
        Method[] methods = consClass.getDeclaredMethods();
        ArrayList<Method> requiredMethods = new ArrayList<Method>();
        for (int i = 0; i < methods.length; i++) {
            String sName = methods[i].getName();
            if (sName.endsWith(suffix)) {
                requiredMethods.add(methods[i]);
            }
        }
        return requiredMethods;
    } 
```

有谁可以帮我离开这里吗？

**更新代码：-**

我在这里取得了一些进展-我在运行方法中编写了以下代码-

```
public void run() {

        ArrayList<Method> methods[];

        for( int i=0; i<tableLists.size(); i++) {

            dbConnection[i] = getDBConnection(tableLists.get(i).get("URL"), tableLists.get(i).get("USERNAME"), tableLists.get(i).get("PASSWORD"), tableLists.get(i).get("DRIVER"));
            callableStatement[i] = dbConnection[i].prepareCall(tableLists.get(i).get("SQL"));

            methods[i] = getRequiredMethods(tableLists.get(i).get("SUFFIX"));
        }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:01:06.223

听起来您正在使用多个线程，并且每个线程必须能够访问两个单独的数据库连接。

处理这个问题的常用方法不是编写自己的代码，而是使用连接池：一组底层的实际数据库套接字由一些代码管理，您只需获得对它们的轻量级引用，这些引用可以关闭并返回到池中. 我为此推荐的两个 java 包是[BoneCP](http://jolbox.com/)和[C3P0](http://sourceforge.net/projects/c3p0/)。然后，您将为数据库 1 和数据库 2 创建一个连接池。

这样，每个线程只需要从池 1 或池 2 请求一个连接（取决于它需要的数据库），做它想做的任何事情，然后`close()`在完成时连接。该池将根据负载自动创建许多实际套接字，并为您管理线程之间的所有同步。

# jquery - 使用复选框显示/隐藏最近的 div

> ID：14843622
> 
> 赞同：0
> 
> 时间：2013-02-12T23:13:12.097
> 
> 标签：jquery

我有多组复选框，它们根据选中的复选框显示/隐藏一个 div。这可以通过 ID 来完成，但我将在同一页面上有多组这些，并且需要更通用的选择器，例如类或选择最接近复选框的元素。

也许有人知道为什么这不能正确选择或知道更好的方法？ [http://jsfiddle.net/infatti/h3rh7/](http://jsfiddle.net/infatti/h3rh7/)

```
$('.check-hide-show-content').hide(); // hide all content divs

// begin show/hide
$('.check-hide-show input:checkbox').click(function () {

    $(this).parent().next('.check-hide-show-content').show();

    $(".check-hide-show input[type='checkbox']").not(this).prop("checked", false); // uncheck the other checkbox when this is checked
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:31:53.777

很简单：

```
$('.check-hide-show-content').hide(); // hide all content divs

// begin show/hide
$('.check-hide-show input:checkbox').change(function () {
    $('.check-hide-show-content').hide().eq($(this).index('.check-hide-show input:checkbox')).show();
    $(".check-hide-show input[type='checkbox']").not(this).prop("checked", false); // uncheck the other checkbox when this is checked
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T23:27:51.463

在输入上使用 html`data attributes`并通过 id 定位 div 怎么样？我在这里整理了一个简单的例子：http: [//jsfiddle.net/mRZYf/](http://jsfiddle.net/mRZYf/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T23:20:11.383

如果您希望客户端只能检查一个元素，您可以使用输入类型单选。

```
<form>
<input type="radio" name="check" id="radio1"></input>
<input type="radio" name="check" id="radio2"></input>
</form> 
```

确保你给属于一起的收音机有相同的名字！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T23:20:53.183

也许这就是你想要的 - [http://jsfiddle.net/FloydPink/VL7Vx/1/](http://jsfiddle.net/FloydPink/VL7Vx/1/)

```
$('.check-hide-show-content').hide(); // hide all content divs

// begin show/hide
$('.check-hide-show input:checkbox').click(function () {
   $('.check-hide-show-content').hide(); // hide all content divs
    $('.' + $(this).val()).show();
    $(".check-hide-show input[type='checkbox']").not(this).prop("checked", false); // uncheck the other checkbox when this is checked
}); 
```

请注意，我也对您的标记进行了更改，方法是添加到内容 div、复选框中的值之后的新 css 类（`option1`和）。`option2`这是将复选框绑定到其相应 div 的一种方式。

在您的代码中，您试图使用 '$(this).parent().next('.check-hide-show-content')' 从复选框进入 div，因为内容 div 不是在该选择器指定的级别。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-23T11:12:21.487

如果您的复选框是最接近的兄弟，另一种选择可能是使用 CSS。

示例小提琴[在这里](http://jsfiddle.net/ks7anbef/)

示例 HTML

```
<label>Show Div A? : </label>
<input type="checkbox">
<div>I'm Div A</div><br>

<label>Show Div B? : </label>
<input type="checkbox">
<div>I'm Div B</div><br>

<label>Show Div C? : </label>
<input type="checkbox">
<div>I'm Div C</div><br> 
```

示例 CSS

```
div {
  display: none;
}

input:checked + div {
  display: block;
} 
```

# macos - 为什么“编辑”找不到 emacs？

> ID：14843628
> 
> 赞同：0
> 
> 时间：2013-02-12T23:13:31.923
> 
> 标签：macos, emacs, terminal, edit

我正在尝试使“编辑”命令在 OS X 终端中使用 emacs（自制安装）。

每当我尝试时，我都会得到：

```
> edit
-bash: edit: command not found 
```

我试过了，在我的 .bashrc 文件中

```
export EDITOR="/usr/local/bin/emacs" 
```

并且只是

```
export EDITOR=emacs 
```

在我的 .bashrc 中。

没运气。

试图解决这个问题，我试过：

```
> which emacs
/usr/local/bin/emacs

> type -a emacs
emacs is /usr/local/bin/emacs
emacs is /usr/local/bin/emacs
emacs is /usr/bin/emacs
emacs is /usr/local/bin/emacs 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T23:21:24.783

你的问题问为什么`edit`没有找到`emacs`，但这实际上不是你的问题。您的问题是您没有`edit`命令开始。

您可以使用以下别名来创建`edit`：

```
alias edit="eval \$EDITOR" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T23:28:20.067

`edit`不是 bash `builtin`：

```
anew@Wintermute:~$ man builtin | grep edit
anew@Wintermute:~$ 
```

某些 *nix 程序会查找`$EDITOR`并调用它（cvs、svn、git 等），但您的 shell 正在查找`edit`您的`$PATH`.

# java - 使用`的区别？参数和变量中的 super`

> ID：14843634
> 
> 赞同：0
> 
> 时间：2013-02-12T23:13:56.007
> 
> 标签：java, generics, super, bounded-wildcard

我以为我已经用`super`. 但我一定是完全错误的：

用这个简单的例子：

```
class Animal{}
class Dog extends Animal{} 
```

这段代码运行良好，因为我们传入了一个 Dog 的超类：

```
static void addThis(ArrayList<? super Dog> a) {
    a.add(new Dog());
}
...
ArrayList<Animal> dogs=new ArrayList();
addThis(dogs); 
```

但是，我不明白的是我认为这是同一件事：

```
ArrayList<? super Dog> dogs2=new ArrayList();
dogs2.add(new Animal()); 
```

但它无法编译。两者有什么区别？

* * *

顺便说一句，我想偷偷问另一个问题。有没有区别

```
// This...
ArrayList<Animal> dogs=new ArrayList();
// ... and this?
ArrayList<Animal> dogs=new ArrayList<Animal>(); 
```

鉴于类型擦除在编译时将其删除，我认为这与编译器检查引用类型是一样的。它是否正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T23:15:33.293

这根本不是一回事。在一种情况下，您要添加一个`Dog`，在另一种情况下，您要添加一个`Animal`.

在这两种情况下，您只*知道*`Dog`s 是允许的，因此第二种情况失败。

要回答您的第二个问题，这*是*有区别的，您应该始终使用第二个版本。（然而，在 Java 7+ 中，您可以通过编写 . 请求编译器为您推断泛型类型`new ArrayList<>()`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:16:45.710

Dog 是 Animal，因此您可以将 to 施法`ArrayList<? extends Dog>`，`ArrayList<Animal>`但您不能反其道而行，因为 Animal 不一定是 Dog。

例如：

```
public class Cat extends Animal{} 
```

因为这没有意义：

```
ArrayList<Dog> dogList = new ArrayList<Dog>();
dogList.add(new Cat()); 
```

您不能将动物添加到“狗”列表中，因为该动物可以是猫。

这是 Java 类型安全的一个示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T23:27:24.457

简而言之，`List<? super Dog>`是具有`super`（父）作为`Dog`的对象列表，而不是属于的对象`super`列表`Dog`

# go - 优雅重启以保持连接打开

> ID：14843638
> 
> 赞同：8
> 
> 时间：2013-02-12T23:14:02.343
> 
> 标签：go, restart

我确信我看到了一些用 Go 编写的开源服务器，它能够重新启动并保持连接打开。

我找不到它来学习这种技术。

我知道 apache.httpd 已经`apachectl graceful`重新启动并保持连接打开。

它在一般情况下和 Go 中是如何完成的？

我认为它必须分叉和 1 退出，2 exec（新的 go 应用程序）并通过 Fd 链接连接。

但是在 Go 中我只能找到`ForkExec`函数。我认为`Fork`是必需的。包也`syscall`没有很好的记录。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T02:40:59.760

CloseOnExec 可能会有所帮助，

[FileListener、CloseOnExec 和正常重启服务器](https://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/B98plzvQQN8 "FileListener、CloseOnExec 和正常重启服务器")

[Go 中 TCP 服务器的零停机升级](http://blog.nella.org/?p=879 "Go 中 TCP 服务器的零停机升级")

# ruby-on-rails - bundle install 似乎使用了错误的 postgres

> ID：14843642
> 
> 赞同：2
> 
> 时间：2013-02-12T23:14:06.503
> 
> 标签：ruby-on-rails, ruby, gem, rbenv, pg

所以这是我尝试运行捆绑安装时的样子：

```
 Installing pg (0.14.1) with native extensions 
    Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /Users/kory/.rbenv/versions/1.9.3-p194/bin/ruby extconf.rb --with-pg-config=/usr/pgsql-9.1/bin/pg_config
    Using config values from /usr/pgsql-9.1/bin/pg_config
    sh: /usr/pgsql-9.1/bin/pg_config: No such file or directory
    sh: /usr/pgsql-9.1/bin/pg_config: No such file or directory
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for pg_config_manual.h... yes
checking for PQconnectdb() in -lpq... yes
checking for PQconnectionUsedPassword()... yes
checking for PQisthreadsafe()... yes
checking for PQprepare()... yes
checking for PQexecParams()... yes
checking for PQescapeString()... yes
checking for PQescapeStringConn()... yes
checking for PQescapeLiteral()... yes
checking for PQescapeIdentifier()... yes
checking for PQgetCancel()... yes
checking for lo_create()... yes
checking for pg_encoding_to_char()... yes
checking for pg_char_to_encoding()... yes
checking for PQsetClientEncoding()... yes
checking for PQlibVersion()... yes
checking for PQping()... yes
checking for rb_encdb_alias()... yes
checking for rb_enc_alias()... yes
checking for PGRES_COPY_BOTH in libpq-fe.h... yes
checking for PGRES_SINGLE_TUPLE in libpq-fe.h... yes
checking for struct pgNotify.extra in libpq-fe.h... yes
checking for unistd.h... yes
checking for ruby/st.h... yes
creating extconf.h
creating Makefile

make
compiling pg.c
compiling pg_connection.c
pg_connection.c: In function ‘pgconn_wait_for_notify’:
pg_connection.c:2064: warning: ‘rb_thread_select’ is deprecated (declared at /Users/kory/.rbenv/versions/1.9.3-p194/include/ruby-1.9.1/ruby/intern.h:379)
pg_connection.c: In function ‘pgconn_block’:
pg_connection.c:2594: warning: ‘rb_thread_select’ is deprecated (declared at /Users/kory/.rbenv/versions/1.9.3-p194/include/ruby-1.9.1/ruby/intern.h:379)
compiling pg_result.c
linking shared-object pg_ext.bundle
ld: warning: directory not found for option '-L-Wl,-undefined,dynamic_lookup'
Undefined symbols for architecture x86_64:
  "_rb_define_module", referenced from:
      _Init_pg_ext in pg.o
  "_rb_eStandardError", referenced from:
      _Init_pg_ext in pg.o
  "_rb_define_class_under", referenced from:
      _Init_pg_ext in pg.o
      _init_pg_connection in pg_connection.o
      _init_pg_result in pg_result.o
  "_rb_define_module_under", referenced from:
      _Init_pg_ext in pg.o
  "_rb_define_singleton_method", referenced from:
      _Init_pg_ext in pg.o
      _init_pg_connection in pg_connection.o
  "_rb_singleton_class", referenced from:
      _Init_pg_ext in pg.o
      _init_pg_connection in pg_connection.o
  "_rb_define_alias", referenced from:
      _Init_pg_ext in pg.o
      _init_pg_connection in pg_connection.o
      _init_pg_result in pg_result.o
  "_rb_define_attr", referenced from: 
```

我想简短一点。但从它看起来它正在尝试使用错误的postgres。我不知道为什么，我似乎无法动摇这个东西。

我 brew 安装了 postgres 并且它是 9.2.3 版本，这就是为什么我认为捆绑器试图从我的机器上不存在的版本（9.1）中使用我们的配置文件有点奇怪，我认为它是 extconf .rb。因为它是指向它的那个。但我不知道如何重置它，以便我的宝石安装正确。

```
which postgres
/usr/local/bin/postgres 
```

# orm - 使用 Propel ORM，如何删除一个对象的所有相关记录？

> ID：14843645
> 
> 赞同：5
> 
> 时间：2013-02-12T23:14:17.900
> 
> 标签：orm, propel

我有一个非常简单的 Propel 问题。我将潜在客户存储在数据库中。这些线索有一个或多个社区利益。我使用的表被命名为“lead”、“community”和一个“lead_communities”连接表。删除所有潜在客户的社区兴趣的最佳方法是什么？

这里有更多细节。Propel 架构如下所示：

```
 <table name="community">
      <column name="id" type="INTEGER" required="true" primaryKey="true" autoIncrement="true" />
      <column name="name" type="VARCHAR" size="255" />
      <column name="address" type="VARCHAR" size="255" />
      etc...

    <table name="lead_communities">
      <column name="id" type="INTEGER" required="true" primaryKey="true" autoIncrement="true"/>
      <column name="lead_id" type="INTEGER" />
      <column name="community_id" type="INTEGER" />
      <column name="created_date" type="DATE" size="4" />
      <foreign-key foreignTable="community" refPhpName="Lead_Communities">
        <reference local="community_id" foreign="id"/>
      </foreign-key>
      <foreign-key foreignTable="lead" refPhpName="Lead_Communities">
        <reference local="lead_id" foreign="id"/>
      </foreign-key>      
    </table>  

    <table name="lead">
      <column name="id" type="INTEGER" required="true" primaryKey="true" autoIncrement="true"/>
      <column name="salutation" type="VARCHAR" size="20" />
      <column name="first_name" type="VARCHAR" size="255" defaultValue="" />
      <column name="last_name" type="VARCHAR" size="255" defaultValue="" />
      <column name="email" type="VARCHAR" size="255" defaultValue="" />
      etc.. 
```

以下是我从数据库中选择潜在客户的方法：

```
$lead = LeadQuery::create()->filterByEmail($enauk)->findOne(); 
```

所以，我希望做的是：

```
$lead->deleteLeadCommunities(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T23:46:33.687

好吧，在没有任何其他上下文的情况下，我能想到的最简单的方法就是通过[`delete()`调用](http://propelorm.org/reference/model-criteria.html#deleting_objects)对连接表进行查询：

```
$numDeleted = LeadCommunitiesQuery::create()
                ->filterByLead($lead)
                ->delete(); 
```

为了清楚起见，没有像您想要的那样生成方法 ( `deleteLeadCommunities`)，但您总是可以为了方便而编写它，并`$lead`在我的示例代码中替换为`$this`. 所以里面`Lead.php`：

```
public function deleteLeadCommunities() {
  return LeadCommunitiesQuery::create()
           ->filterByLead($this)
           ->delete();
} 
```

# c# - 由于另一个事件背后的代码，控件不会触发 DoubleClick 事件

> ID：14843649
> 
> 赞同：0
> 
> 时间：2013-02-12T23:14:31.153
> 
> 标签：c#, datagrid, double-click

我在任何地方都没有找到答案，所以我会提出新问题。我有数据网格，SelectionChanged 事件之后的一些代码在哪里。还有一些关于 DoubleClick 的代码（尝试过 MouseDoubleClick、CellDoubleClick 和 DoubleClick）。在快速的 PC 上没有问题，但在我的带有 Intel Atom 的 Windows 8 平板电脑上，应用程序速度较慢，由于 SelectionChange，DoubleClick 不会被触发。

如果我在 SelectionChange 上评论代码，则会触发 DoubleClick。但是当我离开代码时，它似乎太慢了，以至于它无法识别 DoubleClick。我必须快速点击（7-8 次）才能触发它。

我以为有某种队列。所以至少应该在 SelectionChange 之后触发 DoubleClick。

在 SelectionChange 被触发后，我迫不及待地想看看它是否不是 DoubleClick。即使在快速的电脑上，应用程序也会看起来很慢。

这个事件怎么会丢失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:20:10.090

听起来您可能正在主线程上工作，尝试使用不同的线程进行处理，释放您的 UI 线程以接收双击。

您将需要进行一些同步，但如果操作正确，它应该可以缓解竞争状况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T23:21:16.407

您不应该在事件处理程序中进行任何长时间的计算。我建议启动一个新[线程（或从线程](http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx)[池](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx)借用一个，或启动一个新[任务](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)），并在后台线程上执行更长的运行代码。

# cordova - 为 Phonegap 构建创建自定义 AdMob 插件（适用于 iOS 和 Android）

> ID：14843662
> 
> 赞同：46
> 
> 时间：2013-02-12T23:15:31.047
> 
> 标签：cordova, admob, phonegap-plugins, phonegap-build, phonegap-admob

我的 Phonegap Build 应用程序中的所有内容都可以正常工作，包括 Analytics 和 FacebookConnect 插件。但是，现在我想添加 AdMob 广告。

Phonegap Build 没有为 AdMob 提供内置插件，但是根据[Phonegap Build Plugins 页面](https://build.phonegap.com/docs/plugins)，您现在可以添加自己的自定义插件（请参阅页面底部的 Contributing Plugins）。

> 可以使用 plugin.xml 文件使 PhoneGap 插件与 PhoneGap Build 兼容...

Phonegap Build Plugins 页面引用了[GitHub 上的 Child Browser plugins.xml](https://github.com/alunny/ChildBrowser/blob/master/plugin.xml)作为如何设置自定义 plugin.xml 的示例。下面是子浏览器 plugin.xml 的内容。

**我不确定我需要修改该文件的哪些方面以及将它们修改为什么。[我想我已经为iOS](https://github.com/rajpara11/phonegap-plugins/tree/master/iOS/AdMobPlugin)和[Android](https://github.com/rajpara11/phonegap-plugins/tree/master/Android/AdMobPlugin)正确设置了 Phonegap AdMob 插件的文件结构（请参阅下面的文件结构），但我不确定如何在 plugin.xml 文件中正确引用这些文件。**

```
<?xml version="1.0" encoding="UTF-8"?>
<plugin xmlns="http://www.phonegap.com/ns/plugins/1.0"
    xmlns:android="http://schemas.android.com/apk/res/android"
    id="com.phonegap.plugins.childbrowser"
    version="3.0.4">

    <name>Child Browser</name>

    <asset src="www/childbrowser.js" target="childbrowser.js" />
    <asset src="www/childbrowser" target="childbrowser" />

    <!-- android -->
    <platform name="android">
        <config-file target="AndroidManifest.xml" parent="/manifest/application">
            <activity android:name="com.phonegap.plugins.childBrowser.ChildBrowser"
                      android:label="@string/app_name">
                <intent-filter>
                </intent-filter>
            </activity>
        </config-file>

        <!-- Cordova 1.5 - 1.9 -->
        <config-file target="res/xml/plugins.xml" parent="/plugins">
            <plugin name="ChildBrowser"
                value="com.phonegap.plugins.childBrowser.ChildBrowser"/>
        </config-file>

        <!-- Cordova 2.0.0 -->
        <config-file target="res/xml/config.xml" parent="/cordova/plugins">
            <plugin name="ChildBrowser"
                value="com.phonegap.plugins.childBrowser.ChildBrowser"/>
        </config-file>

        <source-file src="src/android/ChildBrowser.java"
                target-dir="src/com/phonegap/plugins/childBrowser" />
    </platform>
    <!-- ios -->
    <platform name="ios">
        <plugins-plist key="ChildBrowser"
                    string="ChildBrowserCommand" />

        <resource-file src="ChildBrowser.bundle" />
        <resource-file src="ChildBrowserViewController.xib" />

        <header-file src="ChildBrowserCommand.h" />
        <header-file src="ChildBrowserViewController.h" />

        <source-file src="ChildBrowserCommand.m" />
        <source-file src="ChildBrowserViewController.m" />
    </platform>
</plugin> 
```

**应用程序文件结构**

```
/index.html 
/config.xml 
  /adMob 
    /plugin.xml 
    /src
      /iOS 
        /GADAdMobExtras.h (from AdMob iOS SDK)
        /GADAdNetworkExtras.h (from AdMob iOS SDK)
        /GADAdSize.h (from AdMob iOS SDK)
        /GADBannerView.h (from AdMob iOS SDK)
        /GADBannerViewDelegate.h (from AdMob iOS SDK)
        /GADInterstitial.h (from AdMob iOS SDK)
        /GADInterstitialDelegate.h (from AdMob iOS SDK)
        /GADRequest.h (from AdMob iOS SDK)
        /GADRequestError.h (from AdMob iOS SDK)
        /libGoogleAdMobAds.a (from AdMob iOS SDK)
        /AdMobPlugin.h (from Phonegap Plugin for iOS)
        /AdMobPlugin.js (from Phonegap Plugin for iOS)
        /AdMobPlugin.m (from Phonegap Plugin for iOS)
      /android
        /AdMobPlugin.java (from Phonegap Plugin for Android)
        /AdMobPlugin.js (from Phonegap Plugin for Android)
        /GoogleAdMobAdsSdk-6.2.1.jar (from AdMob Android SDK) 
```

[适用于 iOS 的 Phonegap 插件](https://github.com/rajpara11/phonegap-plugins/tree/master/iOS/AdMobPlugin)
[AdMob iOS SDK](https://developers.google.com/mobile-ads-sdk/download#downloadios)
[适用于 Android 的 Phonegap 插件](https://github.com/rajpara11/phonegap-plugins/tree/master/Android/AdMobPlugin)
[AdMob Android SDK](https://developers.google.com/mobile-ads-sdk/download#downloadandroid)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-18T09:46:03.280

我做[插件](https://github.com/aliokan/cordova-plugin-admob)

但它在“PhoneGap Build”上被拒绝了，因为它包含 Google 二进制文件……<br> 今天，您没有在“PhoneGap Build”项目上使用 Admob 的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-11T14:01:24.163

这是一个古老的悬而未决的问题，因为从今天起这是不可能的。但是 Phonegap 已经宣布改变他们的规则：[看这里](http://phonegap.com/blog/2014/12/09/phonegap-build-new-features/)，所以现在可以使用外部插件了。要将 Admob 广告添加到您的 Phonegap Build 应用程序，请编辑您的`config.html`文件并放置以下代码：

```
<gap:plugin name="phonegap-admob" source="npm" /> 
```

我是插件的作者，你可以[在这里看到一个现场演示应用程序（仅适用于 Android）](https://github.com/appfeel/admob-phonegap-build-demo)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-06T20:55:03.100

[本文](http://www.icenium.com/blog/icenium-team-blog/2013/10/14/how-to-make-your-apache-cordova-plugins-plugman-compatible)包含您正在寻找的关于为您的插件设置 plugman 的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-18T19:26:47.483

PhoneGap Build 现在允许任何用户贡献一个所有用户都可以使用的插件（经过审查和测试后）。
他们有一个新页面，描述了有抱负的贡献者查看 Facebook 插件回购的过程和建议。

因此，也许您可​​以根据[此文档](https://build.phonegap.com/docs/plugins-contributing)创建一个不错的 Admob 插件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-06T16:09:18.693

对于 admob：关于它们的阅读有点令人困惑，因为过去他们过去常常通过 JavaScript 方法为移动网站提供广告，但在谷歌收购该公司后，他们删除了这个，admob 不再为移动网站和移动网站提供服务他们建议您使用adsense 的网站。令人困惑的是，仍然存在安装 admob JavaScript 的说明，但它不再存在。
我看到了你的链接，我猜你在哪里尝试为 iOS 应用安装 admob。我是为 Android 应用程序做的，这很简单，很[容易](https://github.com/phonegap/phonegap/wiki/In-App-Advertisements)，但问题是我尝试过它在底部显示的内容。

# java - 集成 Spring 3 和 Tiles 3 - NoClassDefFoundError

> ID：14843670
> 
> 赞同：0
> 
> 时间：2013-02-12T23:16:21.803
> 
> 标签：java, spring, integration, tiles

我正在 NetBeans 7.2.1 中开发一个项目。我已经下载了 Spring 的最新[版本 3.2.1](http://www.springsource.org/download/community)和 Apache Tiles 的 newset[版本 3.0.1](http://tiles.apache.org/download.html)，因为我想用比 JSP 包含的更好的东西来模板化我的视图。

我有一个定义了以下bean的spring servlet配置文件：

```
<bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles3.TilesConfigurer">
    <property name="definitions">
        <list>
            <value>/WEB-INF/tiles-defs.xml</value>
        </list>
    </property>
</bean> 
```

在本`Libraries`节中，我包括了整个 spring-3.2.1（一切可能）和 4 个来自瓷砖的 jar 文件：

*   瓷砖-api-3.0.1.jar
*   瓷砖核心3.0.1.jar
*   瓷砖-jsp-3.0.1.jar
*   瓷砖请求-api-3.0.1.jar

`spring-webmvc-3.2.1`jar 包括在那里拥有类的`org.springframework.web.servlet.view.tiles3`包`SpringWildcardServletTilesApplicationContext`。

Tomcat 设法部署了这个项目，但它不断抛出以下异常，指的是 NetBeans 项目库中包含的类：

例外

```
javax.servlet.ServletException: Servlet.init() for servlet lyricsBaseApp threw exception
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    java.lang.Thread.run(Thread.java:679)
root cause

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'tilesConfigurer' defined in ServletContext resource [/WEB-INF/lyricsBaseApp-servlet.xml]: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: org/springframework/web/servlet/view/tiles3/SpringWildcardServletTilesApplicationContext
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1486)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:626)
    org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:652)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:600)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:666)
    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:519)
    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:460)
    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:136)
    javax.servlet.GenericServlet.init(GenericServlet.java:160)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    java.lang.Thread.run(Thread.java:679)
root cause

java.lang.NoClassDefFoundError: org/springframework/web/servlet/view/tiles3/SpringWildcardServletTilesApplicationContext
    org.springframework.web.servlet.view.tiles3.TilesConfigurer.afterPropertiesSet(TilesConfigurer.java:248)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1545)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1483)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:626)
    org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:652)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:600)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:666)
    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:519)
    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:460)
    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:136)
    javax.servlet.GenericServlet.init(GenericServlet.java:160)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    java.lang.Thread.run(Thread.java:679) 
```

有什么问题，我应该看什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:08:13.883

NoClassDefFoundError 表示在编译时找到了类，但在运行时没有找到，所以它是由 JRE 抛出的。

在您的情况下，问题是关于**tilesConfigurer** bean 而不是**SpringWildcardServletTilesApplicationContext**类。确保包含 bean 的所有超类和这些超类的依赖 jar。

您也可以使用[SystemClassLoader](http://www.mkyong.com/java/how-to-print-out-the-current-project-classpath/)检查类路径。

关于[tilesConfigurer](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/view/tiles2/TilesConfigurer.html)。

# android - 从活动控制返回位置

> ID：14843671
> 
> 赞同：0
> 
> 时间：2013-02-12T23:16:23.673
> 
> 标签：android, android-activity, back-stack

我有一个包含三个活动的应用程序。

*   `Activity1`收集数据（来自体育比赛玩家的数字）
*   `Activity2``TextViews`根据来自的数据可点击的显示`Activity1`（`Activity2`查找输入的数字`Activity1`并显示与球员姓名的链接）。
*   `Activity3`当用户单击其中一个链接时，显示`WebView`来自数据的`Activity1`（它从体育网站加载玩家的网页）。

我想控制活动标签中“返回”链接的操作，以一直返回`Activity1`from`Activity3`而不是 go to `Activity2`。我假设有它的方法，但我无法在网上或提示中找到它。

```
 Intent intent = getIntent();
    String message = intent.getStringExtra(DisplayNamesActivity.EXTRA_MESSAGE2);

    WebView playerWebView = (WebView) findViewById(R.id.webview);
    playerWebView.loadUrl(message); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:37:10.537

实际上，它与后退按钮的行为的关系比与`Activity2`配置方式的关系要小。在您的`Android.Manifest`中，将此标志放入`Activity2`的定义中：

```
android:noHistory="true" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:53:53.493

您是否从 Activity2 调用 Activity3？如果是这样，您可以在从 Activity2 调用 Activity3 后使用 finish() 方法。

# javascript - 如何让 log4js 像 console.log 一样打印对象

> ID：14843672
> 
> 赞同：3
> 
> 时间：2013-02-12T23:16:27.600
> 
> 标签：javascript, logging, log4js-node

我有一个在 2 个地方有 JavaScript 的项目。一种是在服务器端使用 node.js，而另一种显然是浏览器 JavaScript。我需要支持任何浏览器，并且我希望为所有浏览器提供一个单一的日志记录框架。我选择了 log4js，它非常适合记录字符串，但对于对象来说有点困难。

在节点中，当我这样做时，`Logger.debug(someObject);`我会得到一个漂亮的对象打印输出。当我尝试使用我的浏览器 JavaScript 执行此操作时，我得到 [object Object] 这是无用的。

有人知道怎么做吗？

（节点使用终端作为输出控制台，浏览器 JavaScript 使用浏览器的（Chrome）控制台）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T00:29:45.063

log4js 在开发方面还很年轻。我会在“doAppend”中修改第 1795 行附近的源代码

```
if(typeof(loggingEvent.message) === 'object')
    return window.console.log(loggingEvent.level.levelStr + " - %o", loggingEvent.message); 
```

# python - Python itertools groupby 没有按我的预期分组

> ID：14843673
> 
> 赞同：0
> 
> 时间：2013-02-12T23:16:41.217
> 
> 标签：python, list, itertools

假设我有一个这样的字符串：

```
st='''Line 1
Line 2
Line 3
Line 4

Line 5
Line 6

Line 7
Line 8 
Line 9

Line 10
Line 11
Line 12
Line 13
Line 14'''
# may be really big... 
```

现在假设我想要一个按空行分组的 LoL：

```
[['Line 1', 'Line 2', 'Line 3', 'Line 4'],
 ['Line 5', 'Line 6'],
 ['Line 7', 'Line 8 ', 'Line 9'],
 ['Line 10', 'Line 11', 'Line 12', 'Line 13', 'Line 14']] 
```

我知道我可以使用正则表达式拆分创建该 LoL：

```
[[x] for x in re.split(r'^\s*\n',st,flags=re.MULTILINE)] 
```

但是，我正在尝试使用非正则表达式 Python 生成器来创建它。我得到的最接近的是这个可怕的东西（包括空白，我知道根本没有效率......）：

```
result=[]        
for sub in (group for key, group in itertools.groupby(st.splitlines(), lambda x: not x.rstrip())):
    result.append(list(sub))

print result 
```

关于前进方向的任何提示？

我在某种程度上关闭了[这个 SO 问题](https://stackoverflow.com/a/10748431/455276)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:20:30.383

有什么原因这对你不起作用吗？

```
>>> lol = [group.split("\n") for group in st.split("\n\n")]
>>> pprint(lol)
[['Line 1', 'Line 2', 'Line 3', 'Line 4'],
 ['Line 5', 'Line 6'],
 ['Line 7', 'Line 8 ', 'Line 9'],
 ['Line 10', 'Line 11', 'Line 12', 'Line 13', 'Line 14']] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T23:30:03.490

我可能会写

```
>>> grouped = itertools.groupby(map(str.strip, st.splitlines()), bool)
>>> [list(g) for k,g in grouped if k]
[['Line 1', 'Line 2', 'Line 3', 'Line 4'], ['Line 5', 'Line 6'], 
['Line 7', 'Line 8', 'Line 9'], ['Line 10', 'Line 11', 'Line 12', 'Line 13', 'Line 14']] 
```

这也将处理带有空格的空白行，而`\n\n`基于 - 的拆分不会。另一方面，它不保留前导和尾随空格，这来自`'Line 8 '`您可能想要的示例。如果这很重要，你可以这样做：

```
grouped = itertools.groupby(st.splitlines(), lambda x: bool(x.strip())) 
```

（看起来，这与您已经在做的非常接近。）

# gradle - 从 Gradle 中的任务添加多个工件

> ID：14843676
> 
> 赞同：0
> 
> 时间：2013-02-12T23:16:53.587
> 
> 标签：gradle

我正在尝试从应该发布到 maven 存储库的单个项目中创建多个 jar，但我似乎无法正确获取工件详细信息。

从我见过的处理sources-jar的示例中，我尝试（动态地）创建几个应该创建每个jar的任务。

```
def environments = ['local', 'dev', 'test', 'acc', 'prod']

environments.each { e ->
    task "create${e}jar"(type: Jar, dependsOn: classes) << {
       def dir = filterPropertiesForEnv(e)

       from (dir)
       classifier = e
    }

    artifacts.add('archives', tasks["create${e}jar"])
}

File filterPropertiesForEnv(envName) {
    println "filter for $envName"
    def destDir = new File(project.buildDir, envName)

    destDir.mkdir()

    // Do filter stuff based on each envName

    destDir
} 
```

当我运行“安装”任务时，我动态创建的任务“create[name]jar”会运行，但它不会创建任何 jar 文件。如果我删除 doLast-"<<"，则构建会生成几个 jar 文件，但 jar 文件是在执行其他所有操作之前构建的（在配置阶段），因此它只包含一个清单文件。

有没有更好的方法来创建多个罐子并将它们附加为工件？我还需要基于相同的模式创建几个 ear-files，其中包含这个 jar，所以找到一个可重用的解决方案会很好。我精通 Maven，但 Gradle 是一个新朋友，我还没有真正掌握如何构造这些问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:05:13.637

在对此事进行更多调查后，我发现如果您向 from-method 添加闭包，则评估将在运行时而不是配置时完成。

一个可行的解决方案是：

```
def environments = ['local', 'dev', 'test', 'acc', 'prod']

environments.each { e ->
    task "create${e}jar"(type: Jar, dependsOn: classes) << {

       from {
           filterPropertiesForEnv(e)
       }
       classifier = e
    }

    artifacts.add('archives', tasks["create${e}jar"])
}

File filterPropertiesForEnv(envName) {
    println "filter for $envName"
    def destDir = new File(project.buildDir, envName)

    destDir.mkdir()

    // Do filter stuff based on each envName

    destDir
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:46:14.420

所以你想为每个环境发布一个不同的jar？并使用 uploadArchives 任务发布那些？

最好的方法可能是为每个环境创建一个子项目。这样您就可以为每个子项目设置一个上传任务。从您发布的代码中，您似乎已经在不同目录中拥有不同环境的代码。

如果您正在做一些疯狂的事情，即从一个大型代码库中过滤出不同的文件以尝试为不同的环境创建 Jar 文件，那可能永远不会奏效。

# ruby-on-rails - Ruby on Rails 视图名称依赖

> ID：14843678
> 
> 赞同：0
> 
> 时间：2013-02-12T23:17:01.903
> 
> 标签：ruby-on-rails, ruby, controller, views

可能是我的问题，这对 RoR 开发人员来说有点奇怪，但我是 Ruby on Rails 的新手，我现在才发现这个世界 - 视图名称和控制器中的定义有一些依赖关系？

例如，如果我有一个名为 "parse-public-profile.html.erb" 的视图，我是否应该使用该名称添加控制器定义？我的意思是“ `def parse-public-profile ... end`”

我知道，这是基本的，但我只是试图了解控制器是如何知道的，我现在有什么视图；我应该改变什么，如果我要添加/更改视图名称，或者如何定义视图，如果在我的“视图”文件夹中，我有另一个文件夹，例如。“客户”

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:39:57.463

Rails 遵循[REST](http://en.wikipedia.org/wiki/Representational_state_transfer)，这意味着索引、显示、编辑、更新、销毁等方法在 Rails 控制器中非常常见。但是，当您在控制器上有自定义操作（方法）时，Rails 会查找相应的视图文件，例如：

```
class UsersController < ApplicationController
  def another_action
  end
end 
```

将尝试渲染：app/views/users/another_action.html.erb

还有通常在 users/index.html.erb 中的视图文件 fe 中调用的 partials 的概念

```
<% render :partial => 'form' %> 
```

将尝试渲染：app/views/users/_form.html.erb（注意 _）可以在[Rails 指南中找到深入的解释](http://guides.rubyonrails.org/layouts_and_rendering.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T05:27:48.210

您还可以使用：

```
def index
  render :template => "users/parse-public-profile"
end 
```

:template 覆盖 Rails 将呈现的默认文件。

有关更多信息，请参阅位于[http://guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)的 Rails 布局和渲染指南。

# javascript - Ember.js 问题将数组控制器的内容绑定到不同数组控制器的内容

> ID：14843679
> 
> 赞同：1
> 
> 时间：2013-02-12T23:17:06.950
> 
> 标签：javascript, model-view-controller, controller, ember.js, controllers

我们无法在 Ember.js 中将一个数组控制器的内容与另一个数组控制器的内容链接起来。我们已经搜索了 Stackoverflow，但似乎没有任何解决方案适合我们。

场景很简单。我们有一个名为“Campaign”的模型。该模型非常基本，看起来像这样......

**竞选模式：**

```
App.Campaign = DS.Model.extend({

    name: DS.attr('string'),
    description: DS.attr('string'),
    opts: DS.attr('string'),
    starred: DS.attr('boolean'),
    keywords: DS.hasMany('App.Keyword')

});

// Create dummy campaign array

App.Campaign.FIXTURES = new Array();

// Populate dummy campaign array

... 
```

Campaign 控制器也是基本的。这是一个简单的 ArrayController，里面什么也没发生……

**活动索引控制器：**

```
App.CampaignsIndexController = Em.ArrayController.extend({

}); 
```

为了这个问题，我们已经将我们的应用程序模板剥离到了基本要素。如下所示，应用程序模板有一个侧边栏。侧边栏中有两个视图。一个视图用于网站导航，另一个视图用于“已加星标的广告系列”。此视图将包含整个活动集合的一个子集。

**申请模板：**

```
<!-- ================================================== -->
<!-- ======================= APP ====================== -->
<!-- ================================================== -->

<div id="app" class="">

    <!-- ================================================== -->
    <!-- ==================== SIDEBAR ===================== -->
    <!-- ================================================== -->

    <div id="sidebar">

        {{ view App.NavigationView }}

        {{ view App.StarredCampaignsView controller="App.StarredCampaignsController" }}

    </div>

    <!-- ================================================== -->
    <!-- ====================== PAGE ====================== -->
    <!-- ================================================== -->

    <div id="page" class="">

        {{ outlet page }}

    </div>

</div> 
```

我们有一个用于 Starred Campaigns 的控制器。这就是事情开始变得混乱的地方。在我们的控制器中，我们将 ArrayController 的内容绑定到 CampaignsIndexController 的内容，其中包含所有 Campaign 模型的数组。

**加星标的活动控制器：**

```
App.StarredCampaignsController = Em.ArrayController.extend({

    content: [],

    contentBinding: Ember.Binding.oneWay('App.CampaignsIndexController.content')

}); 
```

对于 Starred Campaigns 的视图也很简单...

**已加星标的广告系列视图：**

```
App.StarredCampaignsView = Em.View.extend({

    templateName: 'templates/layout/starred-campaigns',

}); 
```

这就是 Starred Campaigns 的模板。它试图遍历 controller.content 中的项目并将它们传递给另一个视图。

**已加星标的广告系列模板：**

```
<h5 class="sidebar-title">Starred Campaigns</h5>

<ul class="starred-campaigns clearfix">

    {{# each item in controller.content }}

        {{ view App.StarredCampaignItemView itemBinding="item" }}

    {{/ each }}

</ul> 
```

然而，尽管如此，StarredCampaignsController 中的内容仍然是空的，即使我们填充了由 App.CampaignsIndexController 表示的 App.Campaign 数组。看到我们的方法有什么问题吗？我觉得我们在这里遗漏了一些非常简单的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T02:08:45.433

在 Ember 中，对于需要其他控制器的控制器，您需要使用该`needs`属性。这在 Ember 中总是在变化：在以前的版本中，它是路由器的责任，`this.controllerFor`甚至在更旧的版本中，这种方法更类似于您似乎试图采用的方法。然而，最终方法早已被弃用，控制器/模型/视图的实例不再`App`直接保留，只有它们的**对象**表示。

要直接使用`need`s，你需要告诉你的`App.StarredCampaignsController`控制器它需要`App.CampaignsIndexController`这样的东西：

```
App.StarredCampaignsController = Em.ArrayController.extend({
    content: [],
    needs: ['campaigns_index']
}); 
```

您现在可以访问已加`App.CampaignsIndexController`星标的广告系列视图中的控制器：`{{controllers.campaigns_index}}`。

*参见简单的 JSFiddle：http: [//jsfiddle.net/AGJfB/](http://jsfiddle.net/AGJfB/)*

你的不工作的原因是因为你引用了控制器的对象，而不是它的实例：

```
Ember.Binding.oneWay('App.CampaignsIndexController.content') 
```

虽然你有一个`App.CampaignsIndexController`on `App`，但这就是它的对象。`this.controllerFor`当您通过任何 Ember 方式（ 、、、`needs`通过 URL 导航到它等...）访问它时，Ember 将为您创建实例。

在过去的日子里，我们可以使用：

```
Ember.Binding.oneWay('App.campaignsIndexController.content') 
```

但是，这是一种糟糕的做事方式，因为您引用的是控制器的绝对路径。自从 Ember pre 1 以来，我从来没有使用过`Ember.Binding.oneWay`，但仍然会有你需要它的情况。但是，当您发现自己在使用它时，最好问问自己是否有必要，以及是否有更好的方法来做到这一点。

我希望我已经很好地解释了自己。请随时提出任何问题！

# ide - Chrome DevTools Workspaces：是否可以更改背景颜色？

> ID：14843683
> 
> 赞同：0
> 
> 时间：2013-02-12T23:17:37.520
> 
> 标签：ide, google-chrome-devtools

我刚刚阅读了这篇关于 Chrome DevTools Workspaces 的非常酷的文章：

[https://plus.google.com/u/0/+GoogleChromeDevelopers/posts/644qQuBKZeL](https://plus.google.com/u/0/+GoogleChromeDevelopers/posts/644qQuBKZeL)

我在所有编码中都使用黑色主题，并相信这对我来说绝对更容易。是否有可能——即使是彻底的破解——改变 DevTools UI 的背景颜色？

即使更改打开文件的 bg 颜色（仅此而已）就足够了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:24:25.473

当然在这里寻找教程和主题：

[https://plus.google.com/115133653231679625609/posts/UZF34wPJXsL](https://plus.google.com/115133653231679625609/posts/UZF34wPJXsL)

基本上你必须找到目录并用给定的主题`User Stylesheets`覆盖：`Custom.css`

**苹果电脑：** `~/Library/Application Support/Google/Chrome/Default/User StyleSheets/Custom.css`

**个人电脑：** `C:\Users\YourUsername\AppData\Local\Google\Chrome\User Data\Default\User StyleSheets\Custom.css`

**Ubuntu（铬）：** `~/.config/chromium/Default/User StyleSheets/Custom.css`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T16:00:57.120

从 Chrome 的 v.33 开始，[注入样式表的用户样式表方法不再有效](https://code.google.com/p/chromium/issues/detail?id=318566)。

您仍然可以使用 devtools 扩展方法[创建自己的主题。](https://stackoverflow.com/a/21210882/1876861)

但是，如果您只想下载其他主题，[Chrome 网上应用店提供了一些主题](https://chrome.google.com/webstore/search-extensions/devtools%20theme)。

# jquery - Jquery UI：从选项卡上的按钮启动的对话框简要显示对话框，然后将其关闭并打开第一个选项卡

> ID：14843684
> 
> 赞同：0
> 
> 时间：2013-02-12T23:17:44.157
> 
> 标签：jquery, jquery-ui, tabs, dialog, modal-dialog

我对 jquery 很陌生，我遇到了一个我似乎无法解决的问题。

所以，我有一些[Jquery UI 选项卡](http://jqueryui.com/tabs/#default)。在第二个选项卡上，我有一个按钮，单击该按钮应该会启动一个[对话框](http://jqueryui.com/dialog/)。我以前有一些使用相同代码的手风琴，它运行良好。

在 IE、Chrome 和 FF 上的行为如下：单击第二个选项卡 (#create-file) 上的按钮时，对话框会短暂出现，然后立即关闭。然后第一个选项卡而不是第二个选项卡变为活动状态。当试图找到解决方案时，我将 autoOpen 从 false 变为 true - 然后当我单击按钮时显示对话框，但当然，它显示在页面首次加载时 - 不是解决方案。这是我的代码。

JS：

```
$("#tabs").tabs();
$("#fileform").dialog(
{
      show: 'fade',
      hide: 'fade',
      autoOpen : false,
  height : 300,
  width : 350,
  modal : true,
  buttons : {
    "Save" : function() {
        $(this).dialog("close");
         }
    },
Cancel : function() {
    $(this).dialog("close");
        }
    },
close : function() {
    $(this).dialog("close");
        }
    });
$("#create-file").button().click(function() {
    $("#fileform").dialog("open");
}); 
```

HTML：（实际显示）

```
<div class="tabs" id="tabs">
        <ul>
            <li><a href="#TAB1">TAB 1</a></li>
            <li><a href="#TAB2">TAB 2</a></li>
        </ul>
        <div id="TAB1">
        <p>LOREM IPSUM KLJLKJLKJKLJKLJHGHGFHGJHLKJH</p>
        </div>
        <div id="TAB2">
                    <div class="scrollable">
                                <ol class="selectable" id="supportfiles">
                                        </ol>
                                    </div>
                <button id="create-file">Save File</button>
        </div> 
```

对话框代码：

```
 <div id="fileform" title="New File">
        <p class="validateTips">Please enter data.</p>
        <form>
            <fieldset>
                <label for="filepath">File</label> <input type="file"
                    name="filepath" id="filepath"
                    class="text ui-widget-content ui-corner-all" /> <label
                    for="description">Description</label> <input type="text"
                    name="description" id="description" value=""
                    class="text ui-widget-content ui-corner-all" />
            </fieldset>
        </form>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:25:37.243

[这是一切](http://jsbin.com/eyeveb/1/edit)正常的。在定义取消按钮之前，您已经关闭了太多大括号。Cancel 不是像`open`and那样的事件`close`。

```
buttons: {
    "Save": function () {
        $(this).dialog("close");
    },
    "Cancel": function () {
        $(this).dialog("close");
} 
```

# maven - 扩展maven插件

> ID：14843692
> 
> 赞同：1
> 
> 时间：2013-02-12T23:18:42.337
> 
> 标签：maven, maven-plugin, maven-assembly-plugin

我正在尝试使用 maven-assembly-plugin 生成一个 zip 文件程序集。我只剩下两个问题，我想知道是否可以仅使用配置来解决，但作为最后的手段，我也在考虑编写自己的 maven 插件来扩展 maven-assembly-plugin

两个缺失的部分是

1.  **将与包含模式匹配的每个依赖项放入其自己的`outputDirectory`.**
    这是我组装的相关部分

    ```
    <moduleSet>
        <binaries>
            <dependencySets>
                <dependencySet>
                    <outputDirectory>module</outputDirectory>
                    <useTransitiveDependencies>false</useTransitiveDependencies>
                    <includes>
                        <include>com.test.feature.*:*:jar</include>
                    </includes>
                </dependencySet>
            </dependencySets>
            <unpack>false</unpack>
        </binaries>
    </moduleSet> 
    ```

    这会将具有 groupId 的模块的所有依赖项放在`com.test.feature.*`名为 module 的文件夹中。这对我有用，就像这样

    ```
    module/
       com.test.feature.firstModule.jar
       com.test.feature.secondModule.jar 
    ```

    我需要的是一种将每个匹配的依赖项移动到自己的文件夹的方法，希望文件夹名称是依赖项的 artifactId（虽然不是强制性的）

    ```
    firstModule/
       com.test.feature.firstModule.jar
    secondModule/
       com.test.feature.secondModule.jar 
    ```

    我知道我可以`dependencySet`为每个依赖项创建一个，但我的想法是尽可能面向未来。如果我为每个创建一个，我需要记住在未来为 com.test.feature 下的每个新工件创建一个新集。我最大（但盲目）的希望是某种属性 ${dependencyName} 将被每个依赖项替换，然后我可以在`outputDirectory`

2.  **生成一个 xml 文件，其中包含有关依赖项及其文件夹的信息，**
    例如

    ```
    <module dir="firstModule" version="1.0-SNAPSHOT />
    <module dir="secondModule" version="2.1-SNAPSHOT /> 
    ```

    生成的 xml 将成为 zip 程序集的一部分

这两件事，或者其中之一，可以用香草组装插件完成吗？如果没有，是否可以创建一个扩展另一个插件？我刚刚看到了[从头开始](http://maven.apache.org/guides/plugin/guide-java-plugin-development.html)创建插件的教程，而不是仅仅向标准插件之一添加功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T13:24:37.977

**Q1：**用作 parf `artifactId`ot`outputDirectory`的值：

```
<outputDirectory>module/${artifact.artifactId}</outputDirectory> 
```

**Q2：** 我认为没有现成的解决方案。编写自己的插件；）

# git - 将多个 git 存储库签出到同一个 Jenkins 工作区

> ID：14843696
> 
> 赞同：142
> 
> 时间：2013-02-12T23:19:16.707
> 
> 标签：git, jenkins

使用 Jenkins 1.501 和 Jenkins Git 插件 1.1.26

我有 3 个不同的 git repos，每个都有多个项目。

现在我需要将 3 个 git 存储库中的所有项目检出到 Jenkins 从站上的同一个工作区中。我在以下位置定义了每个 git repo：**源代码管理：多个 SCM**。但是每次签出一个 repo 时，都会删除以前的 repo（及其相关项目）。

我读过这个：

[http://jenkins.361315.n4.nabble.com/multiple-git-repos-in-one-job-td4633300.html](http://jenkins.361315.n4.nabble.com/multiple-git-repos-in-one-job-td4633300.html)

但它并没有真正帮助。我试图在**本地子目录**下为所有回购指定相同的文件夹（可选），但它给出了相同的结果。

如果使用 Jenkins 根本不可能做到这一点，我猜想可以使用一些预构建步骤/脚本将项目移动到正确的位置。它不是修改项目的构建配置的选项。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-06-28T13:20:43.987

使用多个 SCM 插件：

*   为您需要签出的每个存储库（主项目或依赖项目）创建不同的存储库条目。

*   对于每个项目，在“高级”菜单中（第二个“高级”菜单，每个存储库都有两个标记为“高级”的按钮），找到“本地子目录 for repo（可选）”文本字段。您可以在“工作区”目录中指定要将项目复制到的子目录。您可以映射我的开发计算机的文件系统。

“第二个高级菜单”不再存在，需要做的是使用“添加”按钮（在“其他行为”部分），然后选择“签出到子目录”

*   如果您使用的是 ant，就像现在带有构建目标的 build.xml 文件不在工作区的根目录中而是在子目录中，您必须在“Invoke Ant”配置中反映这一点。为此，在“Invoke ant”中，按“高级”并填写“构建文件”输入文本，包括 build.xml 所在的子目录的名称。

希望有帮助。

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2013-02-13T00:14:01.417

使用 Jenkins + Git 插件无法在单个工作区中一次签出多个 repo。

作为一种解决方法，您可以拥有多个上游作业，每个作业签出一个存储库，然后复制到您的最终项目工作区（在多个级别上存在问题），或者您可以设置一个 shell 脚本步骤来签出每个需要的存储库到构建时的作业工作区。

以前，Multiple SCM 插件可以帮助解决此问题，但现在已弃用。从多 SCM 插件页面：“用户应该迁移到[https://wiki.jenkins-ci.org/display/JENKINS/Pipeline+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Pipeline+Plugin)。管道提供了一种更好的方式来检出多个 SCM，并得到 Jenkins 的支持核心开发团队。”

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2017-04-07T08:39:29.023

由于不推荐使用[多个 SCM 插件](https://wiki.jenkins.io/display/JENKINS/Multiple+SCMs+Plugin)。

使用[Jenkins Pipeline](https://jenkins.io/doc/book/pipeline/getting-started/)可以检查多个 git repos 并在使用 gradle 构建它之后

```
node {   
def gradleHome

stage('Prepare/Checkout') { // for display purposes
    git branch: 'develop', url: 'https://github.com/WtfJoke/Any.git'

    dir('a-child-repo') {
       git branch: 'develop', url: 'https://github.com/WtfJoke/AnyChild.git'
    }

    env.JAVA_HOME="${tool 'JDK8'}"
    env.PATH="${env.JAVA_HOME}/bin:${env.PATH}" // set java home in jdk environment
    gradleHome = tool '3.4.1' 
}

stage('Build') {
  // Run the gradle build
  if (isUnix()) {
     sh "'${gradleHome}/bin/gradle' clean build"
  } else {
     bat(/"${gradleHome}\bin\gradle" clean build/)
  }
}
} 
```

您可能需要考虑使用[git 子模块](https://git-scm.com/book/en/v2/Git-Tools-Submodules)而不是像这样的自定义管道。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-05-23T00:15:41.740

我成功地将[Multiple SCMs Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Multiple+SCMs+Plugin)与 Git Plugin 与 Jenkins 结合使用。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-08-30T18:03:47.023

**Jenkins：** 多个 SCM - 已弃用。GIT 插件 - 不适用于多个存储库。

脚本/管道即代码 - 是要走的路。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-08-30T15:25:37.007

根据存储库的关系，另一种方法是将另一个存储库（存储库）作为[git 子模块](https://git-scm.com/docs/git-submodule)添加到其中一个存储库。一个 git 子模块创建对其他 repos 的引用。*除非您在克隆“超级项目”*（官方术语）`--recursive`时指定标志，否则不会克隆这些子模块存储库。

 *这是将子模块添加到当前项目的命令：

`git submodule add <repository URI path to clone>`

我们正在使用 Jenkins v1.645，git SCM 将开箱即用地为超级项目进行递归克隆。瞧，您在同一个 Jenkins 作业工作区中各自的目录中获得了超级项目文件和所有依赖（子模块）repo 文件。

不保证这是*正确*的方法，而是一种方法。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-02-08T14:52:51.340

我也有这个问题。我在其他项目上使用触发器/调用构建解决了它。对于每个存储库，我使用参数调用下游项目。

主要项目：

```
This project is parameterized
String Parameters: PREFIX, MARKETNAME, BRANCH, TAG
Use Custom workspace: ${PREFIX}/${MARKETNAME}
Source code management: None 
```

然后对于每个存储库，我调用一个下游项目，如下所示：

```
Trigger/call builds on other projects: 
Projects to build: Linux-Tag-Checkout
Current Build Parameters
Predefined Parameters: REPOSITORY=<name> 
```

下游项目：Linux-Tag-Checkout：

```
This project is parameterized
String Parameters: PREFIX, MARKETNAME, REPOSITORY, BRANCH, TAG
Use Custom workspace:${PREFIX}/${MARKETNAME}/${REPOSITORY}-${BRANCH}
Source code management: Git
git@<host>:${REPOSITORY}
refspec: +refs/tags/${TAG}:refs/remotes/origin/tags/${TAG}
Branch Specifier: */tags/${TAG} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-11-13T21:25:12.030

我们正在使用[git-repo](https://code.google.com/p/git-repo/)来管理我们的多个 GIT 存储库。还有一个[Jenkins Repo 插件](https://wiki.jenkins-ci.org/display/JENKINS/Repo+Plugin)，允许将 git-repo 管理的全部或部分存储库检出到同一个 Jenkins 作业工作区。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-09-09T11:10:56.170

*使用 Jenkins + Git 插件可以在一个工作区中*一次检查多个 repo （可能仅在较新的版本中？）。

在“Source-Code-Management”部分，不要选择“Git”，而是选择“Multiple SCMs”并添加几个git repositories。

确保除了一个作为“附加行为”之外的所有操作都添加了“签出到子目录”并指定一个单独的子目录。*

# android - How to use Factories injected by Guice in android?

> ID：14843697
> 
> 赞同：0
> 
> 时间：2013-02-12T23:19:19.240
> 
> 标签：android, guice, factory

I have problem using Factory injected by Guice.

I've read this nice article [http://google-guice.googlecode.com/svn/trunk/javadoc/com/google/inject/assistedinject/FactoryModuleBuilder.html](http://google-guice.googlecode.com/svn/trunk/javadoc/com/google/inject/assistedinject/FactoryModuleBuilder.html) but still don't understand something. I.e. why does Module never used? Like in *Guice.createInjector()* method.

I tried this simple application and I have *NullPointerException*, because Guice couldn't resolve Factory I need.

```
public interface FooInterface
{
    String getString();
}

public class Foo implements FooInterface {
    String bar;

    @Inject
    Foo(@Assisted String bar)
    {
        Log.i("main", "Foo constructor");
        this.bar = bar;
    }

    public String getString(){
        Log.i("main", "getString");
        return this.bar;
    }
}

public interface FooFactory
{
    FooInterface create(String bar);
} 
```

Here is configuration Module

```
public class ConfigurationModule extends AbstractModule
{
    @Override
    protected void configure()
    {
        Log.i("main", "Configuration module");
        install(new FactoryModuleBuilder().implement(FooInterface.class, Foo.class).build(FooFactory.class));
    }
} 
```

And my Activity

```
public class MyActivity extends Activity implements View.OnClickListener
{
    @Inject private FooFactory fooFactory;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Log.i("main", "onCreate");

        Button btn = (Button) findViewById(R.id.btn);
        btn.setOnClickListener(this);
    }

    @Override
    public void onClick(View view)
    {
        Log.i("main", "onClick");
        FooInterface foo = this.fooFactory.create("foo name");
        String str = foo.getString();
        Toast.makeText(getApplicationContext(), "String is: "+ str, Toast.LENGTH_SHORT);
    }
} 
```

As I can see from logs, *Foo* constructor is never called. The same with *ConfigurationModule*. I can't see where this module is used. Any ideas? Maybe I'm missing something?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T06:36:57.960

从我读过的所有内容来看，我开始认为将纯 Guice 用于 Android 应用程序没有任何优势。[Roboguice](https://github.com/roboguice/roboguice/wiki)是正确的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:30:39.820

如果您还需要使用 ActionBarSherlock，请查看[roboguice-sherlock](https://github.com/rtyley/roboguice-sherlock)。

# ios - 蓝牙低功耗广告包和拓扑

> ID：14843698
> 
> 赞同：4
> 
> 时间：2013-02-12T23:19:20.643
> 
> 标签：ios, bluetooth, core-bluetooth, bluetooth-lowenergy

我想在 ble 设备上宣传一个 ID，让我们说“stackoverflow1”。因此，靠近传感器的人可以在 iPhone 上以弹出窗口的形式收到此消息（欢迎来到 wwdc2012）。就是这样！这意味着没有更新值或其他任何内容，换句话说，我只想知道我进入了哪个房间。在另一个房间里有另一个传感器反对“stackoverflow2”。

现在的问题是，我应该将房间的传感器（广告商）作为外围设备，将访客的 iPhone 作为中央设备吗？

如果您的回答是肯定的，我可以在广告包中发送此 ID 吗？即我可以跳过与房间外围设备的连接吗？请指导我一点，但在这个

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T00:10:42.290

是的，iPhone 应该是中央设备，而室内设备应该是外围设备。将足够的数据放入广告中是完全可以的，这样 iOS 应用程序可以在只看到广告的外围设备而不实际连接到它之后做一些有用的事情。这样，多个中央/电话可以一次检测接近度，而无需单个电话与设备建立专有连接。您应该能够将其放入设备的广告数据中，而不是在服务名称中指定房间，并为它们提供相同的服务名称。这样，iOS 应用程序不需要提前知道完整的房间列表（即服务），并且可以在不更改应用程序的情况下添加它们。

简而言之，您所描述的要点应该可以正常工作，并且对我来说似乎是一种合理的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-06T05:09:48.467

您可以将来自外围设备的信息作为“制造商特定”数据包含在广告中。然后 iOS 应用程序可以使用 CBAdvertisementDataManufacturerDataKey 从广告数据字典中获取它。

# html - 使 DIV 与内联阻止的 div 具有相同的宽度？

> ID：14843699
> 
> 赞同：0
> 
> 时间：2013-02-12T23:19:29.247
> 
> 标签：html, css

我有以下示例：http: [//jsfiddle.net/sSqxn/2/](http://jsfiddle.net/sSqxn/2/)

月`divs`用`inline-block`为并排。它们都可以是不同的宽度。浏览器将自动水平滚动以适应它们的总宽度。

现在，蓝色 div 只是浏览器窗口的宽度。是否可以使蓝色 div 成为所有 div 的全宽`month`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:16:10.317

`width: 100%`从您的`.months`规则中删除。

```
.months {
  float: left;
  white-space: nowrap;
} 
```

# iphone - Change a tableview entry

> ID：14843701
> 
> 赞同：0
> 
> 时间：2013-02-12T23:19:41.667
> 
> 标签：iphone, objective-c, xcode, tableview

Say I have an iPhone app using a tableview. As shown below, if I click the edit button I go into edit mode. Then I have the option to delete or add. So far so good, and all of my code is working. However, what about modifying one the the cells?

The first cell, for example, is Chevy. Say I want to change it to Ford. **How can I edit a cell's value while in edit mode?**

Is there another button I can add called "Change"? If so what would the code be for this?

Having looked around Google I can't find any results for this type of question. **Does anyone know any good tutorials?** Or at the very least, can someone provide some ideas and perhaps code samples to get started?

[![Screen Shot 2013-02-12 at 3.02.51 PM](../Images/d4ce458c6049b5c4cfbb0d76766aab04.png)](http://www.flickr.com/photos/93162002@N03/8469603470/ "Screen Shot 2013-02-12 at 3.02.51 PM by BobOB31, on Flickr")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:30:02.803

Depends how you want the user experience to be. One option would be to use the TableView delegate method didSelectRowAtIndexPath to take the user to another page with a text field and a save button.

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
UIViewController* myEditCarDetailsViewController = [[UIViewController alloc] init]

[self.navigationController pushViewController:myEditCarDetailsViewController animated:YES];
} 
```

Once the user clicked save, you just need to update the datasource and call reloadData on the tableView.

Another option would be to make a custom tableView cell that has a textField in it that you set to editable when the table is in edit mode.

I'm guessing you were hoping for an in built apple way. I don't know of one, but it may exist

# java - 生成 3000 字节的随机字符串

> ID：14843704
> 
> 赞同：2
> 
> 时间：2013-02-12T23:19:52.723
> 
> 标签：java, string, random

我正在做一个人们要求我做的项目`generate random String of 3000 bytes`。

有可能吗？我很困惑我们如何生成 3000 字节的随机字符串？

我知道这样的事情-

```
SecureRandom srandom = new SecureRandom();
String rand = new BigInteger(176, srandom).toString(32); 
```

但它不会`3000 bytes`

有什么办法可以得到随机字符串`3000 bytes`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T23:21:08.193

您可以使用 SecureRandom 的`nextBytes()`方法：

```
final SecureRandom srandom = new SecureRandom();
final byte []data = new byte[3000];
srandom.nextBytes(data); 
```

如果您需要随机字符串包含可打印字符，那么您可以执行以下操作：

```
public enum StringUtils
{
  INSTANCE;

  private static final String CANDIDATES = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
  private static final int CANDIDATESLEN;

  static
  {
    CANDIDATESLEN = CANDIDATES.length();
  }

  public static String generateRandomString(int length)
  {
    final StringBuffer sb = new StringBuffer(length);
    for (int i = 0; i < length; i++)
    {
      sb.append(CANDIDATES.charAt(RANDOMSOURCE.nextInt(CANDIDATESLEN)));
    }
    return sb.toString();
  }
} 
```

您可以将 CANDIDATES 字符串更改为您需要的任何内容。请注意，3000 个字符并不一定意味着 3000 个字节，因为这取决于您的候选选择和字符编码，但如果您坚持使用上述候选和 UTF-8 编码，您应该没问题。

# ruby - 根据 Ruby 中的键是否为空，对哈希数组进行排序的一种雄辩的方法是什么？

> ID：14843707
> 
> 赞同：0
> 
> 时间：2013-02-12T23:20:11.603
> 
> 标签：ruby, ruby-1.9.3

```
array = [{ name:'Joe', foo:'bar' },
         { name:'Bob', foo:''    },
         { name:'Hal', foo:'baz' }
        ] 
```

什么是一种雄辩的排序方式，以便如果 foo 为空，则将其放在末尾，而不改变其他元素的顺序？

红宝石 1.9.3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T23:35:12.383

```
array.partition { |h| !h[:foo].empty? }.flatten 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T06:09:02.220

可以将键生成为元组，其中第一部分表示 null/not-null，第二部分是原始索引，然后是 sort_by [nulls_last, original_index]。

```
def sort_nulls_last_preserving_original_order array 
  array.map.with_index.
    sort_by { |h,i| [ (h[:foo].empty? ? 1 : 0), i ] }.
    map(&:first)
end 
```

请注意，这避免了其他一些答案的所有粗略数组突变，并且是由纯函数转换构造的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T23:28:10.223

```
array = [
  { name:'Joe', foo:'bar' },
  { name:'Bob', foo:''    },
  { name:'Hal', foo:'baz' }
]

arraydup = array.dup
array.delete_if{ |h| h[:foo].empty? }
array += (arraydup - array) 
```

结果是：

```
[
    [0] {
        :name => "Joe",
        :foo => "bar"
    },
    [1] {
        :name => "Hal",
        :foo => "baz"
    },
    [2] {
        :name => "Bob",
        :foo => ""
    }
] 
```

通过一点重构：

```
array += ((array.dup) - array.delete_if{ |h| h[:foo].empty? }) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T23:29:58.393

```
array.find_all{|elem| !elem[:foo].empty?} + array.find_all{|elem| elem[:foo].empty?} 
```

返回

```
[{:name=>"Joe", :foo=>"bar"}, {:name=>"Hal", :foo=>"baz"}, {:name=>"Bob", :foo=>""}] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T23:28:59.907

```
array.each_with_index do |item, index|
  array << (array.delete_at(index)) if item[:foo].blank?
end 
```

使用任何你有的东西来代替`blank?`.

# python - JSON Python获取字段作为数组

> ID：14843710
> 
> 赞同：0
> 
> 时间：2013-02-12T23:20:14.910
> 
> 标签：python, json, python-2.7

这是我对获取一些 json 优点的请求的回应。我在 Python 中得到了这个，一切正常。我一直在搜索 json 文档并阅读了很多内容，但无法找到我的答案。

我如何获得所有的电子邮件地址？

```
{u'-InFSLzYdyg-OcTosYYs': {u'email': u'hello@gmail.com', u'time': 1360707022892}, u'-    InFYJya4K6tZa8YSzme': {u'email': u'me@gmail.com', u'time': 1360708587511}} 
```

我想要的是这样的列表：

```
email = ['hello@gmail.com', 'me@gmail.com'] 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:27:06.503

就像 wRAR 所说，一旦你将它作为一个 python `dict`，它应该很简单：

```
[x['email'] for x in l.itervalues()] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T23:27:45.527

假设您已将 JSON 字符串转换为 python 字典（请参阅[loading()）](http://docs.python.org/2/library/json.html)：

```
>>> from json import loads
>>> myJSON = loads(somejsonstring)
>>> emails = [a[x]['email'] for x in a]
>>> emails
['hello@gmail.com', 'me@gmail.com'] 
```

或者更好的是，`itervalues()`像卢克提到的那样使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T23:23:41.600

像往常一样做`json.loads`和处理结果。`dict`这里没有特定于 JSON 的内容。

# javascript - 如果语句未触发警报 - 表单/测验

> ID：14843712
> 
> 赞同：1
> 
> 时间：2013-02-12T23:20:20.227
> 
> 标签：javascript, forms, if-statement, alert

该脚本应该带来正确或不正确答案的 Javascript 警报，警报不会弹出。可能是什么问题呢？我有一种感觉，这很容易解决，但我似乎无法找到它。我已经验证了整个页面（这只是一个片段）并且它通过了验证。

```
 <script type="text/javascript">
    /* <![CDATA[ */
    /* ]]> */

    function scoreQuestion1(answer){
    if (answer == "a")
       window.alert("Correct Answer");
    if (answer == "b")
       window.alert("Incorrect Answer");
    if (answer == "c")
       window.alert("Incorrect Answer");
    if (answer == "d")
       window.alert("Incorrect Answer");
    }
    function scoreQuestion2(answer){
    if (answer == "a")
       window.alert("InCorrect Answer");
    if (answer == "b")
       window.alert("Incorrect Answer");
    if (answer == "c")
       window.alert("Correct Answer");
    if (answer == "d")
       window.alert("Incorrect Answer");
    }
    function scoreQuestion3(answer){
    if (answer == "a")
       window.alert("Incorrect Answer");
    if (answer == "b")
       window.alert("Correct Answer");
    if (answer == "c")
       window.alert("Incorrect Answer");
    if (answer == "d")
       window.alert("Incorrect Answer");

    function scoreQuestion4(answer){
    if (answer == "a")
       window.alert("Incorrect Answer");
    if (answer == "b")
       window.alert("Incorrect Answer");
    if (answer == "c")
       window.alert("Correct Answer");
    if (answer == "d")
       window.alert("Incorrect Answer");
     }  
    function scoreQuestion5(answer){
    if (answer == "a")
       window.alert("Incorrect Answer");
    if (answer == "b")
       window.alert("Incorrect Answer");
    if (answer == "c")
       window.alert("Incorrect Answer");
    if (answer == "d")
       window.alert("Correct Answer");
      } 

    </script>

</head>
<body>
                           <form action="" name="quiz">
                           <p><strong>1\. How many natural elements are there?</strong></p><p>
                           <input type="radio" name="question1" value="a" onclick="scoreQuestion1('a')" />92<br />   <!-- correct answer-->
                           <input type="radio" name="question1" value="b" onclick="scoreQuestion1('b')" />113<br />
                           <input type="radio" name="question1" value="c" onclick="scoreQuestion1('c')" />103<br />
                           <input type="radio" name="question1" value="d" onclick="scoreQuestion1('d')" />88<br /></p>
                           <p><strong>2\. If one kg of air is compressed from 1m3 to 0.5 m3, which of the following statements is true?</strong></p><p>
                           <input type="radio" name="question2" value="a" onclick="scoreQuestion2('a')" />The density is halved.<br />
                           <input type="radio" name="question2" value="b" onclick="scoreQuestion2('b')" />The mass is halved.<br />
                           <input type="radio" name="question2" value="c" onclick="scoreQuestion2('c')" />The density is doubled.<br />    <!--correct answer-->
                           <input type="radio" name="question2" value="d" onclick="scoreQuestion2('d')" />The mass is doubled.<br /></p>
                           <p><strong>3\.  What is the acceleration due to gravity?</strong></p><p>
                           <input type="radio" name="question3" value="a" onclick="scoreQuestion3('a')" />980 m/s2<br />
                           <input type="radio" name="question3" value="b" onclick="scoreQuestion3('b')" />9.8 m/s2<br />   <!--correct answer-->
                           <input type="radio" name="question3" value="c" onclick="scoreQuestion3('c')" />98 m/s2<br />
                           <input type="radio" name="question3" value="d" onclick="scoreQuestion3('d')" />0.98 m/s2<br /></p>
                           <p><strong>4\.  What is the SI unit of density?</strong></p><p>
                           <input type="radio" name="question4" value="a" onclick="scoreQuestion4('a')" />cm3/g<br />
                           <input type="radio" name="question4" value="b" onclick="scoreQuestion4('b')" />m3/kg<br />
                           <input type="radio" name="question4" value="c" onclick="scoreQuestion4('c')" />kg/m3<br />      <!--correct answer-->
                           <input type="radio" name="question4" value="d" onclick="scoreQuestion4('d')" />g/cm3<br /></p>
                           <p><strong>5\.  Which of these has the highest density?</strong></p><p>
                           <input type="radio" name="question5" value="a" onclick="scoreQuestion5('a')" />Lead<br />
                           <input type="radio" name="question5" value="b" onclick="scoreQuestion5('b')" />Water<br />
                           <input type="radio" name="question5" value="c" onclick="scoreQuestion5('c')" />Mercury<br />
                           <input type="radio" name="question5" value="d" onclick="scoreQuestion5('d')" />Tungsten<br /></p>   <!--correct answer-->
                           </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:29:03.803

您永远不会关闭 scoreQuestion3 的函数，这会导致解析错误。如果你解决了这个问题，它应该可以工作。

```
function scoreQuestion3(answer){
if (answer == "a")
   window.alert("Incorrect Answer");
if (answer == "b")
   window.alert("Correct Answer");
if (answer == "c")
   window.alert("Incorrect Answer");
if (answer == "d")
   window.alert("Incorrect Answer");
} 
```

[jsFiddle 的工作版本](http://jsfiddle.net/6DFEf/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T23:29:13.107

您的 scoreQuestion3 缺少一个结束 }。

不过，您应该学习以下几件事：

1) 适当的缩进

如果您在下降层时缩进（实际上），那么当这些错误发生时会变得更加明显。

```
function scoreQuestion3(answer){
  if (answer == "a")
    window.alert("Incorrect Answer");
  if (answer == "b")
    window.alert("Correct Answer");
  if (answer == "c")
    window.alert("Incorrect Answer");
  if (answer == "d")
    window.alert("Incorrect Answer");

  function scoreQuestion4()... 
```

您可以立即看到它不正常并相应地进行调整。

在这种情况下，直接从那开始：

2) 使用 { 括号

```
if(answer=="a"){
  alert("Incorrect Answer");
} 
```

尽管您可以省略它们并且 if 语句将只使用下一行，但它变得不太清楚。

3) 其他

我想这是在您的下一课中，但代码可以大大简化为：

```
function scoreQuestion3(answer){
  if(answer=="a"){
    alert("Correct Answer!");
  }else{
    alert("Incorrect answer I'm afraid!");
  }
} 
```

# javascript - 检测用户代理 Firefox

> ID：14843713
> 
> 赞同：6
> 
> 时间：2013-02-12T23:20:22.703
> 
> 标签：javascript, html, user-agent

我对 Javascript 很陌生。我学到的只是玩代码。

我无法加载它。基本上，我需要一个特定的 div 才能仅在 Firefox 中显示。这就是我所拥有的。

```
<div id="parent" class="control-group"></div>

<script type="text/javascript">
        $(document).ready(function() {
        switch ( BrowserDetect.browser )
        {
        case 'Firefox':
            $("button[name='btn']").click(function() {
                $("#parent").html("<div></div>");
            });
        });
        break;
        }
</script> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T23:29:04.033

您可能不应该这样做，但如果您绝对确定您只想针对 Firefox：

```
var browser = navigator.userAgent.toLowerCase();
if (browser.indexOf('firefox') > -1) {
    alert('Firefox');
} 
```

[小提琴](http://jsfiddle.net/PJLcr/)

# php - Swiftmailer 中 SMTP 传输的 IP 地址

> ID：14843714
> 
> 赞同：1
> 
> 时间：2013-02-12T23:20:23.333
> 
> 标签：php, email, smtp, ip

我有一台带有两个 IP 的网络接口的服务器。如何设置一个 IP 用于 SMTP 传输？我正在使用 php 库 Swiftmailer。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:23:36.557

尝试这个：

```
$transport->setLocalDomain('[127.0.0.1]'); 
```

# java - ClickListener 和 TouchListener 不适用于子视图

> ID：14843718
> 
> 赞同：0
> 
> 时间：2013-02-12T23:20:30.163
> 
> 标签：java, android, ondraw

我有 2 个自定义视图：1\. BoardView 2\. BallView。我将 BallView 添加到 BoardView 并将 BoardView 添加到我的布局中。

当我使用 ClickListener 和 TouchListener 单击 BallView 时，没有任何反应。好像 BoardView 与 BallView 区域重叠。

***代码：***

```
 board = new BoardView(this);        
    ball = new BallModel(100, 200,50,screenWidth, screenHeight);               
    ballView = new BallView(this, ball);

    ballView.setOnTouchListener(new OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) 
        {
            System.out.println("Hey");

            return true;
        }
    });

    ballView.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            System.out.println("Hey");

        }
    });

    board.addView(ballView); 
```

**更新：**

```
public class BoardView extends View
{
private List<View> mShapes = new ArrayList<View>();

public BoardView(Context context)
{
    super(context);     
}

public void addView(View view) 
{
    mShapes.add(view);
}

@Override
public void onDraw(Canvas canvas)
{
    super.onDraw(canvas);
    for(int i=0; i<mShapes.size(); i++)
    {
        View view = mShapes.get(i);
        view.draw(canvas);
    }

}       
}

public class BallView extends View
{
BallModel mBall;
Paint mBallPaint;

public BallView(Context context, BallModel ball) 
{
    super(context);
    mBall = ball;
}

private Paint getPaint()
{
    if(mBallPaint == null)
    {
        mBallPaint = new Paint();
        mBallPaint.setColor(mBall.getColor());
    }
    return mBallPaint;
}

@Override
protected void onDraw(Canvas canvas) 
{
    super.onDraw(canvas);
    Paint paint = getPaint();
    paint.setColor(mBall.getColor());
    canvas.drawCircle(mBall.getX(), mBall.getY(), mBall.getRadius(), paint);    
}

} 
```

有任何想法吗？

# perl - Selenium + Perl：检查警报是否存在？

> ID：14843724
> 
> 赞同：1
> 
> 时间：2013-02-12T23:20:48.910
> 
> 标签：perl, selenium, alert

Selenium 2.* 在以 Firefox 作为浏览器的 Linux 上运行。

我正在使用 perl 和 Selenium::Remote::Driver 模块与服务器交互。

是否有任何东西可以检查是否存在警报？perl 模块提供了几个功能来单击警报上的确定，或者从中获取文本，但是如果没有警报，这将引发错误 - 如何避免错误并仍然摆脱任何警报？

基本上，我想在页面完成加载（如果有）时删除所有警报，但不确定如何？

我尝试的另一个选项是通过在 firefox 配置文件中设置一个变量来禁用所有警报（当您自己使用浏览器时有效），但是当 Selenium 使用浏览器时，警报仍然存在，因为我认为 Selenium 自己处理警报因为“handlesAlerts”功能，它总是设置为真，我不知道如何禁用它。如果无法检查警报是否存在，这可能是解决方案。

有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:42:17.643

您可以尝试关闭警报，使用 eval 块来处理异常

```
eval {
   $driver->accept_alert;
};
if ($@){
 warn "Maybe no alert?":
 warn $@;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-27T16:14:48.853

我创建了几个函数来检查警报，然后根据需要取消或与之交互。

```
use Try::Tiny qw( try catch );

# checks if there is a javascript alert/confirm/input on the screen
sub alert_is_present
{
    my $d = shift;
    my $alertPresent = 0;
    try{
        my $alertTxt = $d->get_alert_text();

        logIt( "alert open: $alertTxt", 'DEBUG' ) if $alertTxt;
        $alertPresent++;

    }catch{
        my $err = $_;
        if( $err =~ 'modal dialog when one was not open' ){
            logIt( 'no alert open', 'DEBUG2' );
        }else{
            logIt( "ERROR: getting alert_text: $_", 'ERROR' );
        }
    };

    return $alertPresent;
}

# Assumes caller confirmed an alert is present!! Either cancels the alert or
  types any passed in data and accepts it.
sub handle_alert
{
    my ( $d, $action, $data ) = @_;

    logIt( "handle_alert called with: $action, $data", 'DEBUG' );

    if( $action eq 'CANCEL' ){
        $d->dismiss_alert();
    }else{
        $d->send_keys_to_alert( $data )
            if $data;
        $d->accept_alert();
    }

    $d->pause( 500 );
} 
```

# c# - 如何在没有facebook页面的情况下使用c#登录facebook

> ID：14843731
> 
> 赞同：1
> 
> 时间：2013-02-12T23:21:39.573
> 
> 标签：c#

我对编程很陌生。我看到了很多关于如何 C# 登录 facebook 的示例，所有这些示例都使用 facebook 登录页面登录。我的问题是如何通过我自己创建的文本框和我自己的登录按钮传递用户名和密码。可能吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:16:50.793

很确定你不能这样做。

使用 Facebook 进行身份验证的唯一方法是通过 Facebook 登录页面。

如果 Facebook 允许通过 3rd 方表单登录，则没有什么可以阻止恶意网站收集 Facebook 登录详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T00:31:39.880

这实际上取决于您要完成的工作。如果您有一个想要与 Facebook 集成的网站，那么有一些 Facebook 集成 API。

我发现直接从桌面应用程序登录的唯一方法是使用 WebBrowser 类，请求 facebook 登录页面，然后以编程方式填充用户名/密码字段： `webBrowser1.Document.GetElementById("textName").SetAttribute("value") = "ddddd" ;`

登录的结果将生成几个标识会话的 cookie，您可以将它们传输到 HttpWebRequest 中，以便您的请求将被视为已登录。

就像 Rik 所说，这是一种**非常糟糕的做法**，因为您必须通过自己的表单收集用户详细信息，（尽管您始终可以直接向用户显示 WebBrowser 窗口，但您仍然要求他们做一些非常冒险的事情，因为托管 WebBrowser 类的应用程序可以拦截登录信息）。

# c# - Expression Blend + Sketchflow - 插件？

> ID：14843732
> 
> 赞同：2
> 
> 时间：2013-02-12T23:21:44.703
> 
> 标签：c#, xaml, expression-blend, expression-blend-5

有没有人能够获得扩展并运行[Expression Blend + Sketchflow 预览](http://www.microsoft.com/en-us/download/details.aspx?id=30702)？我正在寻找一个示例项目。

我一直在关注[这篇文章](http://www.codeproject.com/Articles/75961/Building-extensions-for-Expression-Blend-4-using-M)，但它有点过时了。

到目前为止我：

*   创建了一个 .Net 4.5 类库项目
*   `Microsoft.Expression.Extensibility.dll`在新的 Blend Preview 目录中添加了对 的引用
*   将我的项目设置为部署到适当的`Addins`目录
*   设置 Visual Studio 以运行新的 Blend.exe 进行调试
*   `IPlugin`如示例所示连接 MEF 并继承

但是我的插件似乎没有加载，也没有命中断点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:05:48.690

[按照这里](http://geekswithblogs.net/cskardon/archive/2012/10/24/extending-expression-blend-4-amp-blend-for-visual-studio-2012.aspx)的演示让它工作。

我使用了上面的一些修改，并将东西放在`Blend Preview`目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T22:12:20.533

阅读您的问题后，我决定开始编写该教程的新版本。

一些事情可以让你马上开始。

我已经创建了这样的基本插件：

```
using System.ComponentModel.Composition;
using Microsoft.Expression.Extensibility;

namespace Demo.Extension
{
    [Export(typeof (IPackage))]
    public class Demo : IPackage
    {
        public void Load(IServices services)
        {
        }

        public void Unload()
        {
        }
    }
} 
```

确保你：

*   将插件放在**...\Blend Preview\extensions**
*   以管理员身份运行 Visual Studio，以便能够在调试期间部署到该文件夹
*   实现 IPackage 而不是 IPlugin

# ruby-on-rails - 在 Ruby on Rails 中访问虚拟属性的正确方法是什么？

> ID：14843733
> 
> 赞同：0
> 
> 时间：2013-02-12T23:21:50.103
> 
> 标签：ruby-on-rails, rails-activerecord

我有一个带有虚拟属性的模型：

```
class Campaign < ActiveRecord::Base  
  def status
     if deactivated
       return "paused"
     else
       return "live"
     end
  end
end 
```

现在，在我看来，当我使用 访问属性时`campaign.status`，我得到了正确的结果。但是，当我尝试像这样访问它时`campaign[:status]`，我什么也得不到。

这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:32:08.807

[:status] 使用 Ruby 中的 [] 方法。'def status' 定义了一个不应与 ActiveRecord 属性或虚拟属性（例如 attr_reader 或 attr_accessor）混淆的方法。ActiveRecord 将 [] 方法添加到您的类中，并使所有（数据库）属性可由 object[:attr_name] AND object.attr_name（甚至 object.attributes[:attr_name]）访问。

这与 fe Javascript 的工作方式不同，其中 obj[:method] 与 obj.method 几乎相同。

编辑：如果您以任何形式使用 attr_accessor，您应该能够使用它们：

```
<%= form.input :status %> 
```

然后提交表单将设置实例变量@status。如果你想在保存之前或之后对此做任何事情，你可以调用 before_save 或 after_save 钩子：

```
class Campaign < ActiveRecord::Base  
  attr_accessible :status
  attr_accessor :status
  before_save :raise_status

  def raise_status
    raise @status
  end
end 
```

这将与状态的提交值一起引发错误。

希望这可以帮助。

# c# - Windows 工作流 4 版本控制

> ID：14843740
> 
> 赞同：1
> 
> 时间：2013-02-12T23:22:40.947
> 
> 标签：c#, workflow

我为我们的组织开发了一个以使用 Windows Workflow 4 为中心的框架，并且在将补丁部署到工作流时发现了问题，因为如果我们部署工作流的更新版本，任何现有的持久化工作流都无法再次关联用过的。即使我们只是调整 ReceiveAndReply 消息之间的内部结构而不调整合同，它仍然会孤立持久的 WF。有时，如果所有新案例的政策发生变化，但现有的政策遵循以前的版本，我们会希望拥有单个工作流程的多个版本。

因此，从我读到的内容来看，Workflow 4.5 直接开箱即用，但我是这个系统在经过认证的网络上运行，.NET 4.5 目前没有经过使用认证，因此在我的情况下不是一个选项。我知道 K2 Blackpearl 对 WF 有自己的版本控制支持，虽然 K2 不是我们可以引入的东西，所以有人知道实现准并行版本控制工作流的任何其他选项吗？最好使用开箱即用的 .NET 4 组件，因为要获得许可并最大限度地减少对进一步认证的需求。

谢谢，

史蒂夫

# ruby-on-rails - 从 rails 2.x 转换为 3.x 的教程应用程序中的路由错误

> ID：14843741
> 
> 赞同：0
> 
> 时间：2013-02-12T23:22:42.007
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-2

我正在编写 Sixrevision.com 教程“如何使用 Ruby on Rails 从头开始​​创建博客”。我尝试将它从 rails 2.x 转换为 3.x。当我运行 localhost:3000 我得到这个：

```
Routing Error

uninitialized constant PostController

Try running rake routes for more information on available routes. 
```

Rake Routes 向我展示了这一点：

```
 posts GET  /posts(.:format)               posts#index {:has_many=>:comments}
          POST /posts(.:format)               posts#create {:has_many=>:comments}
 new_post GET  /posts/new(.:format)           posts#new {:has_many=>:comments}
edit_post GET  /posts/:id/edit(.:format)      posts#edit {:has_many=>:comments}
     post GET  /posts/:id(.:format)           posts#show {:has_many=>:comments}
          PUT  /posts/:id(.:format)           posts#update {:has_many=>:comments}
       DELETE  /posts/:id(.:format)           posts#destroy {:has_many=>:comments}
               /:controller/:action/:id(.:format) :controller#:action
               /:controller/:action/:id.:format   :controller#:action
   root        /                                  post#index 
```

我的 routes.rb 文件：

```
 Myblog::Application.routes.draw do

       resources :posts, :has_many => :comments
       match ':controller/:action/:id'
       match ':controller/:action/:id.:format'
       root :to => "post#index"

    end 
```

有人知道吗？感谢您的关注和帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:28:49.357

在`routes.rb`文件中：

```
resources :posts do
  resources :comments
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:27:43.890

在您的 routes.rb 中，您应该有：

```
root :to => 'posts#index' 
```

因为你没有（可能） PostController 但 PostsController

# r - 我似乎无法用 ggplot 舍入值

> ID：14843746
> 
> 赞同：1
> 
> 时间：2013-02-12T23:23:07.410
> 
> 标签：r, ggplot2

当我使用这样的命令对某些东西进行 ggplot 时，我在 y 轴上的值得到了大量的小数位：

```
x <- c(39.029998779296875000, 39.080001831054687500, 38.990001678466796875, 39.000000000000000000, 38.990001678466796875)
example <- data.frame(i=1:5, X=x)
ggplot(example, aes(i, y=foo, color=variable)) + geom_line(aes(y=X, color='X')) 
```

告诉 ggplot 将值调整为没有那么多小数位的适当方法是什么？

这是此命令的输出：

![这张图就是输出！](../Images/45182c4dbe1b4e0107c58ee7ee5626b2.png)

这是输出`sessionInfo()`- 在我看来，这里没有什么可疑的：

```
> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
[1] C

attached base packages:
[1] grid      grDevices graphics  stats     datasets  utils     methods   base

other attached packages:
[1] ggplot2_0.9.0

loaded via a namespace (and not attached):
 [1] MASS_7.3-17        RColorBrewer_1.0-5 colorspace_1.1-1   dichromat_1.2-4    digest_0.5.2       memoise_0.1        munsell_0.3        plyr_1.7.1     \

 [9] proto_0.3-9.2      reshape2_1.2.1     scales_0.2.0       stringr_0.6        tools_2.15.0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T00:54:45.650

我认为这是您的`digits`选择的问题。如果我设置`options(digits=22)`，我可以重现，而不是使用出厂默认设置`7`，它只给出小数点后 2 位的数据：

```
print(x,digits=7)
[1] 39.03 39.08 38.99 39.00 38.99 
```

因此，尝试使用以下方法恢复它：

```
options(digits=7) 
```

# sql - 查询连接问题

> ID：14843747
> 
> 赞同：0
> 
> 时间：2013-02-12T23:23:19.523
> 
> 标签：sql, sql-server-2005, inner-join

我在下面的查询中遇到错误。我不确定为什么。

下面的查询是动态sql，设置成变量并打印出来。

错误消息：

消息 156，级别 15，状态 1，第 60 行关键字“AS”附近的语法不正确。消息 156，级别 15，状态 1，第 77 行关键字“AS”附近的语法不正确。消息 156，级别 15，状态 1，第 86 行关键字“AS”附近的语法不正确。

询问：

```
 SELECT * FROM(SELECT * FROM (
        SELECT  vwGetMySDDocsLatest.Document_ID,
                vwGetMySDDocsLatest.ViewPrintFlag AS ViewPrint,
                vwGetMySDDocsLatest.ViewOnly,
                vwGetMySDDocsLatest.DownloadFlag AS Download,
                vwGetMySDDocsLatest.DocBookFlag AS DocBook,
                vwGetMySDDocsLatest.Name_ID, 
                vwGetMySDDocsLatest.SheetNo, 
                vwGetMySDDocsLatest.SheetNoTotal, 
                vwGetMySDDocsLatest.Title, 
                vwGetMySDDocsLatest.Rev, 
                vwGetMySDDocsLatest.Rev_Date,
                vwGetMySDDocsLatest.Rev_Purpose_Code, 
                vwGetMySDDocsLatest.[Filename], 
                vwGetMySDDocsLatest.Extension,
                vwGetMySDDocsLatest.DocumentNo,
                vwGetMySDDocsLatest.ClientDocument_No,
                vwGetMySDDocsLatest.DEL_DOCSTRING,
                vwGetMySDDocsLatest.RE_Init,
                vwGetMySDDocsLatest.Project_ID  

            , 1 AS NumberOfRows , 1 AS NumberOfPages 
        ,ROW_NUMBER() OVER(ORDER BY DocumentNo) As RN 
        FROM    vwGetMySDDocsLatest INNER JOIN (SELECT DISTINCT tblSDDocuments_REV.Document_ID FROM tblSDDocuments_REV  WHERE 1 = 1  ) AS DR2 ON vwGetMySDDocsLatest.Document_ID = DR2.Document_ID 
        WHERE vwGetMySDDocsLatest.Name_ID = 4362 AND
        vwGetMySDDocsLatest.Project_ID = 349 AND
        vwGetMySDDocsLatest.DocumentNo Like '%lp-0887-p01%' 
        ) AS newTBL 
                WHERE newTBL.RN BETWEEN 1 AND 25 ) AS onePage 
        INNER JOIN (SELECT tblSDDocuments_Rev.DocumentRev_ID AS R_DocumentRev_ID , 
                        tblSDDocuments_Rev.Document_ID AS R_Document_ID, 
                        tblSDDocuments_Rev.Rev AS R_Rev, 
                        tblSDDocuments_Rev.Rev_Create_Date AS R_Rev_Create_Date, 
                        tblSDDocuments_Rev.Rev_Due_Date AS R_Rev_Due_Date, 
                        dbo.udfNameForward(tblSDDocuments_Rev.Rev_Due_From) AS  R_NameFrom, 
                        tblSDDocuments_Rev.Rev_Date AS R_Rev_Date, 
                        dbo.tblRev_Purpose.Rev_Purpose_Code AS R_Rev_Purpose_Code, 
                        tblSDDocuments_Rev.Flag AS R_Flag,
                        tblSDDocuments_Rev.Filename AS R_Filename, 
                        tblFileExtensions.Extension AS R_Extension,
                        tblSDDocuments_Rev.Client_Filename AS R_Client_Filename,
                        dbo.tblRev_Purpose.Allow_Matrix_View AS R_Allow_Matrix_View,
                        tblSDDocuments_Rev.Filename_Available AS R_Filename_Available,
                        tblSDDocuments_Rev.Filename_Available_Other AS R_Filename_Available_Other,
                        tblRev_Purpose.Rev_Purpose_ID AS R_Rev_Purpose_ID

                        FROM    tblSDDocuments_Rev 
                        LEFT OUTER JOIN tblFileExtensions 
                        ON tblSDDocuments_Rev.Extension_id = tblFileExtensions.Extension_ID 
                        LEFT OUTER JOIN tbl_Name 
                        ON tblSDDocuments_Rev.Rev_Due_From = tbl_Name.Name_Id 
                        LEFT OUTER JOIN dbo.tblRev_Purpose
                        ON tblSDDocuments_Rev.Rev_Purpose_ID = dbo.tblRev_Purpose.Rev_Purpose_ID  WHERE 1 = 1  ) AS TBLRevs

                    ON onePage.Document_ID = TBLRevs.R_Document_ID 
                    INNER JOIN (SELECT Document_ID AS MDID, MAX(DocumentREV_ID) AS MAXREV 
                                FROM tblSDDocuments_REV
                                --WHERE REV_Date IS NOT NULL
                                GROUP BY Document_ID) AS MAXTBL
                    ON MAXTBL.MDID = TBLRevs.R_Document_ID 

                     INNER JOIN ((SELECT Document_ID AS MDID2, MAX(REV_DATE) AS MAXREVDATE
                                FROM tblSDDocuments_REV
                                GROUP BY Document_ID) AS MAX1
                            INNER JOIN tblSDDocuments_REV R1 
                                ON MAX1.MAXREVDATE = R1.Rev_Date AND MAX1.MDID2 = R1.Document_ID)  AS MAXDATETBL
                    ON MAXDATETBL.MDID2 = TBLRevs.R_Document_ID

                    LEFT OUTER JOIN(SELECT DISTINCT td.document_Rev_ID, a.Approval_Abbr
                                    FROM tblsdtransmittal_documents td
                                        inner join tblsdtransmittal t
                                            on td.transmittal_id = t.transmittal_id
                                        inner join tblDocuments_ApprovalType a
                                            ON td.Approval_ID = a.Approval_ID
                                        inner join (
                                            SELECT MAX(t.created_date) AS LatestDate, td.Document_Rev_ID
                                            FROM tblsdtransmittal t
                                                INNER JOIN tblsdtransmittal_documents td
                                                    ON t.transmittal_id = td.transmittal_id
                                            WHERE t.to_supplier = 1
                                            GROUP by  td.Document_Rev_ID ) MAXDATE
                                        ON td.document_Rev_ID = maxdate.document_Rev_ID AND t.created_date = MAXDATE.LatestDate) AS APPRTBL
                    ON tblrevs.r_documentrev_id = APPRTBL.document_Rev_ID

                    LEFT OUTER JOIN(SELECT  SDRevComments_ID AS ETRevComments_ID, 
                            SDRevComments_RevID AS ETRevComments_RevID, 
                            SDRevComments_New_Filename AS ETRevComments_New_Filename, 
                            SDRevComments_Orig_Filename AS ETRevComments_Orig_Filename,
                            SDRevComments_Description AS ETRevComments_Description
                    FROM    tblSDDocuments_Rev_Comments) AS COMTBL
                    ON TBLRevs.R_DocumentREV_ID = COMTBL.ETRevComments_RevID
                     WHERE MAXTBL.MAXREV = TBLRevs.R_DocumentRev_ID   ---check for latest/all revs  

                    ORDER BY    DocumentNo ,TBLRevs.R_Document_ID, TBLRevs.R_DocumentRev_ID DESC 
```

如果我删除这部分查询：

```
 INNER JOIN ((SELECT Document_ID AS MDID2, MAX(REV_DATE) AS MAXREVDATE
                        FROM tblSDDocuments_REV
                        GROUP BY Document_ID) AS MAX1
                    INNER JOIN tblSDDocuments_REV R1 
                        ON MAX1.MAXREVDATE = R1.Rev_Date AND MAX1.MDID2 = R1.Document_ID)  AS MAXDATETBL
            ON MAXDATETBL.MDID2 = TBLRevs.R_Document_ID 
```

它运行良好。知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T00:54:00.130

问题*在于*这个片段：

```
 INNER JOIN ((SELECT Document_ID AS MDID2, MAX(REV_DATE) AS MAXREVDATE
            FROM tblSDDocuments_REV
            GROUP BY Document_ID) AS MAX1
        INNER JOIN tblSDDocuments_REV R1 
            ON MAX1.MAXREVDATE = R1.Rev_Date AND MAX1.MDID2 = R1.Document_ID)  AS MAXDATETBL
ON MAXDATETBL.MDID2 = TBLRevs.R_Document_ID 
```

问题是将别名 ( `MAXDATETBL`) 分配给连接的结果。显然 SQL Server 不喜欢这样，实际上你也不需要那个别名。该内部内部联接的结果集中的列应该使用有助于联接的表的别名来引用。也就是说，`MAXDATETBL.MDID2`您应该指定`MAX1.MDID2`：

```
 INNER JOIN ((SELECT Document_ID AS MDID2, MAX(REV_DATE) AS MAXREVDATE
            FROM tblSDDocuments_REV
            GROUP BY Document_ID) AS MAX1
        INNER JOIN tblSDDocuments_REV R1 
            ON MAX1.MAXREVDATE = R1.Rev_Date AND MAX1.MDID2 = R1.Document_ID)  ~~AS MAXDATETBL~~
ON **MAX1**.MDID2 = TBLRevs.R_Document_ID 
```

您甚至可以省略内部连接周围的括号。它们是允许的，但是是多余的，因为语法清楚地表明，片段开头的 INNER JOIN 的右侧实际上是一个连接`MAX1`，`R1`而不是`MAX`单独连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:29:35.060

你有一个额外的支架（就在 INNER JOIN 之后，松开它并尝试

```
INNER JOIN 
    (SELECT Document_ID AS MDID2, MAX(REV_DATE) AS MAXREVDATE
    FROM tblSDDocuments_REV
    GROUP BY Document_ID) AS MAX1
    INNER JOIN tblSDDocuments_REV R1 ON MAX1.MAXREVDATE = R1.Rev_Date AND MAX1.MDID2 = R1.Document_ID)  AS MAXDATETBL
ON MAXDATETBL.MDID2 = TBLRevs.R_Document_ID 
```

# python - Pyramid：如何对某个绝对路径进行静态视图，然后让用户将文件上传到该路径？

> ID：14843748
> 
> 赞同：2
> 
> 时间：2013-02-12T23:23:33.830
> 
> 标签：python, pyramid

在我看来可调用的，我希望用户能够创建一个名为 filename 的新文件，如下所示：

```
@view_config(route_name='home_page', renderer='templates/edit.pt')
def home_page(request):
    if 'form.submitted' in request.params:
        name= request.params['name']

        input_file=request.POST['stl'].filename
        vertices, normals = [],[]
        for line in input_file:
            parts = line.split()
            if parts[0] == 'vertex':
                vertices.append(map(float, parts[1:4]))
            elif parts[0] == 'facet':
                normals.append(map(float, parts[2:5]))

        ordering=[]
        N=len(normals)

        ...parsing data...

        data=[vertices,ordering]
        jsdata=json.dumps(data)
        renderer_dict = dict(name=name,data=jsdata)
        app_dir = request.registry.settings['upload_dir']
        filename =  "%s/%s" % ( app_dir , name )
        html_string = render('tutorial:templates/view.pt', renderer_dict, request=request)
        with open(filename,'w') as file:
                file.write(new_comment)
        return HTTPFound(location=request.static_url('tutorial:pages/%(pagename)s.html' % {'pagename': name}))

    return {} 
```

现在，当我尝试上传文件时，我收到此错误消息：（`IOError: [Errno 2] No such file or directory: u'/path/pages/one'`一个是名称变量）我相信这是因为我错误地定义了 app_dir 变量。我希望 filename 是使用上面定义的 name 变量创建的新文件的 url（以便可以在 www.domain.com/pages/name 访问它）。这是我的应用程序的文件结构：

```
 env
    tutorial
        tutorial
            templates
                home.pt
            static
                pages
                    (name1)
                    (name2)
                    (name3)
                     ....
            views.py
            __init__.py 
```

在我的**init** .py 中，我有：

```
config.add_static_view(name='path/pages/', path=config.registry.settings['upload_dir']) 
```

在我的 development.ini 文件中，我有

```
[app:main]
use = egg:tutorial

upload_dir = /path/pages 
```

编辑：如果有人知道为什么这个问题没有得到太多关注，我很想听听。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T05:11:22.090

虽然我觉得您可能对如何提供用户生成的内容存在误解，但我将向您展示一种方法来满足您的要求。通常用户生成的内容不会上传到您的源中，您将在外部提供一些可配置的位置来放置它，如下所示。

通过您的 INI 文件使路径可配置：

```
[app:main]
use = egg:tutorial

upload_dir = /path/to/writable/upload/directory 
```

添加一个静态视图，可以提供该目录下的文件。

```
config.add_static_view(name='/url/to/user_uploads', path=config.registry.settings['upload_dir']) 
```

在您的上传视图中，您可以`app_dir`通过

```
app_dir = request.registry.settings['upload_dir'] 
```

在那里复制数据，从那时起，它将在`/url/to/user_uploads/filename`.

# wordpress - 试图将 Wordpress 从子目录移动到域，站点损坏

> ID：14843749
> 
> 赞同：0
> 
> 时间：2013-02-12T23:23:36.260
> 
> 标签：wordpress, installation, wordpress-theming, move, subdirectory

我试图将我的测试版 Wordpress 网站移动到我的实时域，但现在一切都坏了。我不知道如何解决这个问题。这是我所做的：

1.  我在 mydomain.com 上运行了一个站点，但我想重建它。所以我在 mydomain.com/test 下载了一个新安装的 WordPress 并建立了一个新主题。
2.  我完成了新主题并准备将其移至 mydomain.com。我决定将所有内容都留在子域中以进行迁移，因此我遵循了[这些说明](http://codex.wordpress.org/Giving_WordPress_Its_Own_Directory)。
3.  它工作得很好。Mydomain.com 正在显示新站点。
4.  然后，我愚蠢地决定将子目录从 /test 重命名为 /v2（因为我想要一个更简洁的名称，并且我想让 /test 保持打开状态以进行测试，而不是将其用于我的新站点）。
5.  一切都崩溃了。
6.  我试图将子目录更改回 /test，因为该站点正在使用它，但一切仍然损坏。主题似乎没有加载。我的网站没有显示任何样式。我的照片显示不正确。我的插件不见了。

有没有什么办法解决这一问题？请告诉我，我不只是失去了 3 个月的工作......

[这是我的网站](http://mcography.com/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:31:06.113

听起来您需要更新Wordpress 数据库中的`siteurl`和`home`值。登录到您的 cPanel 并转到 phpMyAdmin。从那里您应该能够打开您的 WordPress MySQL 数据库。

转到您的`wp-options`表并确保您的`siteurl`(option_id 1) 和`home`(option_id 37) 值使用正确的路径，即`http://mcography.com/test`

您可能还需要更新您的永久链接。即使您不必更改任何选项，再次保存永久链接应该会刷新您的 .htaccess 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:27:26.150

数据库，将 url 设置为 mydomain.com/test 您需要更新 db 条目，请参见下面的脚本 [http://dan.doezema.com/2010/04/wordpress-domain-change/](http://dan.doezema.com/2010/04/wordpress-domain-change/)

# ruby-on-rails - 是否有任何理由不在生产数据库上使用 Rails 迁移？

> ID：14843757
> 
> 赞同：0
> 
> 时间：2013-02-12T23:24:24.660
> 
> 标签：ruby-on-rails, database, migration, rails-migrations

我能想到的唯一危险是开发人员使用 Capistrano 回滚生产数据库上的迁移。您是否可以想到任何其他风险以及避免意外迁移/数据库重置等的最佳方法是什么？

**编辑：**我们确实有每日备份。我会这样改写我的问题：根本不使用迁移有什么好处（仅限手动模式更改）？你知道有哪些 Rails 团队在做这件事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:51:09.213

可能存在数据损坏/不一致的情况，尤其是在您修改现有表时。

我建议在进行任何迁移或回滚之前，确保您拥有最新的备份，并在可能的情况下在暂存环境中运行迁移，然后再将其推广到生产环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:49:21.927

这可能是一个更普遍的问题，即产品数据库回滚的风险是什么。我会说您需要确保如果架构会更改，请确保现有代码不会中断。避免意外更改的最佳方法可能是备份现有的 prod 数据库。这样，您可以确保不会因为回滚而丢失所有内容。

# php - Preg_replace 除数字和 . 和 ，

> ID：14843760
> 
> 赞同：8
> 
> 时间：2013-02-12T23:24:35.420
> 
> 标签：php, preg-replace

我正在尝试 preg_replace 除了 Digits 和 . 和 , 符号。从一个字符串，

可

```
nksdfojsdfjdsfojdsjofsojdfjo213-9sdfknmcfsjozx -xdcv-cv,1239103 
```

使用 preg_replace 或任何其他解决方案的输出将只返回数字并允许使用逗号和点号。

以 a1,322.44 结束为 1,322.44

这是我尝试过的

```
$carPrice=preg_replace('/\D/', '', $carPrice); 
```

如果有必要会再写三段，似乎找不到答案。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-12T23:26:28.423

用作`[^0-9\.,]`您的匹配表达式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-10-23T06:45:11.760

你可以使用这个：

```
preg_replace('#[^0-9\.,]#', '', 'your value'); 
```

# r - 如果文件或模型存在于循环中，则跳过

> ID：14843763
> 
> 赞同：0
> 
> 时间：2013-02-12T23:24:46.540
> 
> 标签：r, loops, if-statement, skip

我正在制作一个循环，在一个相对较大的矩阵`R`中为多个物种创建物种分布模型。`R`为了避免分析冗余，如果文件输出已经存在，我想在循环开始时有一个命令跳过分析。有人对如何添加这行代码有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:40:39.730

```
if(file.exists(filename)) {
   next
} 
```

在循环的开始？只要您真的希望不仅在 R 中使用循环，而且还希望在其中使用下一个 :)

# silverlight - Windows Phone 图像绑定

> ID：14843765
> 
> 赞同：1
> 
> 时间：2013-02-12T23:24:53.720
> 
> 标签：silverlight, binding, windows-phone-7.1, windows-phone

我想使用 Binding 将图像放入我的 ListBox 中。

下面是包含 URI 的对象：

```
_roomView.Room = new Room
        {
            Items = new List<Item> {
            new Item {ItemType = ItemType.BlueKey, ImageUri = "/Escape;component/Images/Items/a.jpg"},
            new Item {ItemType = ItemType.Bracelet, ImageUri = "/Escape;component/Images/Items/b.png"},
            new Item {ItemType = ItemType.Money, ImageUri = "/Escape;component/Images/Items/b.png"}}
        };
        DataContext = _roomView; 
```

下面是 XML：

```
 <ListBox x:Name="Mylist">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Margin="5">
                        <Image Source="{Binding Room.Items.ImageUri}" Stretch="None" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

图像不显示。

谁能看到我哪里出错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T07:03:17.400

如果图像未显示 - 检查路径；例如我的绑定代码

```
 public class Country
{       
    public String name
    {
        get;
        set;
    }       
    public String Flag
    {
        get
        {
            return "/Image/Countries/" + name + ".png";
        }
    }
}

<Image Width="100" Height="140" HorizontalAlignment="Left" Stretch="UniformToFill">
    <Image.Source>
       <BitmapImage UriSource="{Binding Flag}" CreateOptions="BackgroundCreation" />
    </Image.Source>
</Image> 
```

如果您使用项目中的图像，请确保构建到内容并始终复制到输出目录。（图像的属性）

顺便说一句，如果你想显示来自互联网的图像你需要使用 LowProfileImageLoader 你可以阅读更多关于它 [http://blogs.msdn.com/b/delay/archive/2010/09/02/keep-a-low -profile-lowprofileimageloader-helps-the-windows-phone-7-ui-thread-stay-responsive-by-loading-images-in-the-background.aspx](http://blogs.msdn.com/b/delay/archive/2010/09/02/keep-a-low-profile-lowprofileimageloader-helps-the-windows-phone-7-ui-thread-stay-responsive-by-loading-images-in-the-background.aspx)

```
 <Image  delay:LowProfileImageLoader.UriSource= "{Binding Flag}" HorizontalAlignment="Left" Stretch="Fill"   VerticalAlignment="Center" Width="24" Height="16" Margin="0,0,10,0"  /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:40:01.577

而不是做

```
DataContext = _roomView; 
```

我做了：

```
Mylist.ItemsSource = _roomView.Room.Items; 
```

在 XML 中：

```
<Image Source="{Binding ImageUri}" Stretch="None" /> 
```

上面显示的是“ImageUri”而不是 Room.Items.ImageUri，因为我已经传入了 Rooom.Items。

# xml - 结束标记上的 XML DTD 错误 - 验证错误

> ID：14843766
> 
> 赞同：0
> 
> 时间：2013-02-12T23:24:58.853
> 
> 标签：xml, dtd

我`http://www.xmlvalidation.com/index.php`用来验证我的 DTD，但它在 XML 结束标记上产生错误。

XML:

```
1   <?xml version="1.0" encoding="utf-8" ?>
2   <!DOCTYPE books SYSTEM "books.dtd">
3   <books>
4     <book title="Le Mans 24 Hours: The Official History of the World's Greatest Motor Race 1960-69" imageurl="images/1960-89.jpg">
5       <description>
6         <author>Quentin Spurring.</author>
7         <publisher>J H Haynes and Co Ltd.</publisher>
8         <publishDate>15 August 2010</publishDate>
9         <ISBN10>1844255840</ISBN10>
10        <ISBN13>9781844255849</ISBN13>
11        <blurb>Covers different races since 1923\. This title also includes photographs, a race account, results data and a glorious rendering of the official race poster.</blurb>
12      </description>
13    </book>
14    <book title="Le Mans 24 Hours: The Official History of the World's Greatest Motor Race 1970-79" imageurl="images/1970-79.jpg">
15      <description>
16        <author>Quentin Spurring.</author>
17        <publisher>J H Haynes and Co Ltd.</publisher>
18        <publishDate>15 March 2011</publishDate>
19        <ISBN10>1844255395</ISBN10>
20        <ISBN13>9781844255399</ISBN13>
21        <blurb>Officially licensed with the ACO, the organisers of the annual Le Mans 24 Hours sports car race, this book covers various races since 1923.</blurb>
22      </description>
23    </book>
24  </books> 
```

DTD：

```
<?xml version="1.0" encoding="UTF-8"?>
<!ELEMENT books (book+)>
<!ELEMENT book (title, imageurl, description, author, publisher, publishDate, ISBN10, ISBN13, blurb)>
<!ELEMENT description (#PCDATA)>
<!ELEMENT author (#PCDATA)>
<!ELEMENT publisher (#PCDATA)>
<!ELEMENT publishDate (#PCDATA)>
<!ELEMENT ISBN10 (#PCDATA)>
<!ELEMENT ISBN13 (#PCDATA)>
<!ELEMENT blurb (#PCDATA)> 
```

错误列表：

```
 4:  129 Attribute "imageurl" must be declared for element type "book".
    4:  129 Attribute "title" must be declared for element type "book".
    12: 19  The content of element type "description" must match "null".
    13: 10  The content of element type "book" must match "(title,imageurl,description,author,publisher,publishDate,ISBN10,ISBN13,blurb)".
    14: 129 Attribute "imageurl" must be declared for element type "book".
    14: 129 Attribute "title" must be declared for element type "book".
    22: 19  The content of element type "description" must match "null".
    23: 10  The content of element type "book" must match "(title,imageurl,description,author,publisher,publishDate,ISBN10,ISBN13,blurb)". 
```

您如何处理 DTD 中的结束标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:58:09.507

这与结束标签无关。你需要声明你的属性`book`并且你需要修复你的模型`book`和`description`元素。

**新的 DTD**

```
<!ELEMENT books (book+)>
<!ELEMENT book (description)>
<!ATTLIST book
          title CDATA #REQUIRED
          imageurl CDATA #REQUIRED>
<!ELEMENT description (author, publisher, publishDate, ISBN10, ISBN13, blurb)>
<!ELEMENT author (#PCDATA)>
<!ELEMENT publisher (#PCDATA)>
<!ELEMENT publishDate (#PCDATA)>
<!ELEMENT ISBN10 (#PCDATA)>
<!ELEMENT ISBN13 (#PCDATA)>
<!ELEMENT blurb (#PCDATA)> 
```

注意：我将`title`and`imageurl`属性设为必需。您可能希望根据您的数据隐含它们。

# c# - 针对 WPF 和更高版本 Mac 的 C# 项目的最佳模式或建议

> ID：14843768
> 
> 赞同：0
> 
> 时间：2013-02-12T23:25:07.683
> 
> 标签：c#, wpf

我目前正在说明 C# 应用程序的开发将主要集中在 Windows 平台上，但我们可以稍后将其移植到 Mac 上。我们与 C# 有联系，因为一些核心逻辑已经用 C# 编写。

你能推荐我什么，我真的没有那种选择的经验？是否可以在 C# 中构建应用程序并针对 Windows（使用 WPF）以及使用 Mono 到 mac 的端口？

我应该使用女巫图案吗？MVVM，经典的 MVC 还是别的什么？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:44:01.167

Mono 不支持 WPF。让 WPF 在 MAC OSX 上运行将非常困难。据我所知，唯一的方法是通过[XWT](https://github.com/mono/xwt/tree/master/Xwt.WPF)。但我对它并不十分熟悉。

# scheme - 数据定义 DrRacket？

> ID：14843770
> 
> 赞同：2
> 
> 时间：2013-02-12T23:25:10.520
> 
> 标签：scheme, racket

我有这个问题。它很长。

首先，这是这个的数据定义

```
(define-struct ball (x y color))    
;; Ball = (make-ball Number Number Color)    
;; Color is one of 'red, 'yellow, 'blue, etc. 
```

这是我的程序

```
(require 2htdp/image)
(require 2htdp/universe)

;;An LoB is one of
;;--empty
;;--(cons ball LoB)

;;(define (ball-template lob)
;;  (cond
;;    [(empty? lob) ...]
;;   [else
;;     (first lob)...
;;    (ball-template (rest lob))]))

;;lob-length : LoB -> number
;;Counts the balls in the list
(define (lob-length lob)
  (cond
    [(empty? lob) 0]
    [else
     (add1 (lob-length (rest lob)))]))
;;Examples
(check-expect (lob-length empty) 0)
(check-expect (lob-length(cons (make-ball 1 2 "red")
                               (cons(make-ball 3 3 "blue")
                                    (cons(make-ball 5 86 "white")empty))))3)

;;lob-draw : LoB -> Scene
;;Adds the balls to an empty scene in the form of circles
(define (lob-draw lob)
  (cond
    [(empty? lob) (empty-scene 300 300)]
    [else
     (place-image (circle 3 "solid" (ball-color (first lob)))
                  (ball-x (first lob))
                  (ball-y (first lob))
                  (lob-draw (rest lob)))]))

;;Examples
(lob-draw empty)
(lob-draw (cons (make-ball 50 60 "red")
                (cons(make-ball 20 15 "blue")
                     (cons(make-ball 5 200 "black")empty))))

;;lob-member? LoB, ball -> boolean
;;Checks to see if the ball is in the list
(define (lob-member? lob b)
  (cond
    [(empty? lob) false]
    [(same-ball? b (first lob)) true]
    [else (lob-member? (rest lob) b)]))

;;Examples
(check-expect (lob-member? empty (make-ball 300 70 "blue"))
              false)
(check-expect (lob-member? (cons (make-ball 30 70 "blue")
                                 (cons (make-ball 310 500 "black")
                                   (cons (make-ball 30 340 "yellow") empty)))
                           (make-ball 310 500 "black")) true)

;;same-ball? ball ball -> boolean
;;Compares two balls
(define (same-ball? b1 b2)
  (and (= (ball-x b1) (ball-x b2))
       (= (ball-y b1) (ball-y b2))
       (string=? (ball-color b1) (ball-color b2))))
;;Example
(check-expect (same-ball? (make-ball 30 30 "white")(make-ball 30 30 "white"))
              true)
(check-expect (same-ball? (make-ball 30 30 "white")(make-ball 23 40 "black"))
              false) 
```

只是一个简单的程序，其中使用球列表，将它们添加到空场景，计算给定列表中有多少球，等等......

除了一件事，我什么都做了。我必须设计一个函数`lob-yellow`，它将列表中所有球的颜色更改`Balls`为黄色。我猜我需要 cond，但我不知道该怎么做。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:01:03.330

假设结构是不可变的，这里有一些提示可以帮助您入门，请填写空白：

```
(define (lob-yellow lob)
  (cond [<???>                        ; if the list is empty
         <???>]                       ; return the empty list
        [else                         ; otherwise,
         (cons (make-ball             ; cons a new ball, build it with:
                (<???> (first lob))   ; the x coordinate of the first ball
                (ball-y <???>)        ; the y coordinate of the first ball
                <???>)                ; and always the yellow color
               (lob-yellow <???>))])) ; recur over the rest of the list 
```

但是如果结构是这样定义的：

```
(define-struct ball (x y color) #:mutable) ; now the struct is mutable 
```

...我们可以实现一个解决方案，就地修改列表中的每个球：

```
(define (lob-yellow lob)
  (cond [<???>                           ; if the list is empty
         <???>]                          ; return the empty list
        [else                            ; otherwise,
         (set-ball-color! <???> 'yellow) ; set the color of the first ball
         (lob-yellow <???>)]))           ; recur over the rest of the list 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T23:35:41.530

我已经填写了你的一些模板。

```
(define (yellow-to-blue lob)
  (cond
    [(empty? lob) ...]
    [else
     (cond
        [(symbol=? (first lob) 'yellow) 
         (cons ... (yellow-to-blue (rest lob)))]
        [else (cons ... (yellow-to-blue (rest lob)))])])) 
```

请记住在填写点之前编写一些测试用例。

# python - 我误解了 fabtools.service.is_running 的作用吗？

> ID：14843771
> 
> 赞同：1
> 
> 时间：2013-02-12T23:25:16.480
> 
> 标签：python, fabric, upstart

我误解了fabtools吗？

当我运行时：

```
status some-service 
```

它回复

```
some-service stop/waiting 
```

但是当我运行时：

```
def blah():
    if fabtools.service.is_running('some-service'):
        print "some-service is running!" 
```

它说它正在运行，当我清楚地知道它不是时。我是否误解了函数“is_running”的作用？

编辑：

查看源代码：

```
def is_running(service):
    """
    Check if a service is running.

    ::

        import fabtools

        if fabtools.service.is_running('foo'):
            print "Service foo is running!"
    """
    with settings(hide('running', 'stdout', 'stderr', 'warnings'), warn_only=True):
        res = sudo('service %(service)s status' % locals())
        return res.succeeded 
```

它仍然让我感到困惑，因为它似乎检查服务是否存在而不是它是否正在运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T11:21:19.677

你说的对。实现只检查服务是否存在而不是状态。
我将这一行修改为：

```
res = sudo('service {} status|grep "running"'.format(service)) 
```

...现在它可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-23T05:04:55.260

`fabtools.service.is_running`现在确实有效。

当我停止`kibana`服务并在 python 命令行模式下运行它时，请参见以下内容：

```
>>> fabtools.service.is_running('kibana')
False 
```

当我启动`kibana`服务时，它返回 true

```
>>> fabtools.service.is_running('kibana')
True 
```

# jquery - 模型项的angularjs更新

> ID：14843772
> 
> 赞同：0
> 
> 时间：2013-02-12T23:25:20.457
> 
> 标签：jquery, ajax, angularjs, angularjs-directive, angular-ui

我正在转向 angularjs，但学习曲线似乎有点难:((

看下面的小提琴：

[http://jsfiddle.net/ereallstaff/QgEx9/](http://jsfiddle.net/ereallstaff/QgEx9/)

我有 2 个问题：1-该类不反映 if 语句 ng 类

```
 ng-class="{'selectedRow': p.is_active} 
```

2 - 我需要制作一个流程以保存最终用户仅选择的数据库项目。通常使用 jquery 我做一个复选框应用一个类，如果找到该类，我将数据发送到服务器。

在这种情况下，使用 2 路绑定，我只是想像我需要从 $scope.data 模型中删除元素以发送到服务器，它应该没问题。

但是当元素被正确删除时，模型的长度保持在 5，而它应该减少！

谢谢*强调文字*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:06:32.203

1.  您的情况应如下所示：

    ```
    ng-class="{'selectedRow': p.is_active == '1' } 
    ```

    否则即使`p.is_active`是“0”，也会添加“selectedRow”类。

2.  在将信息发送到服务器之前，过滤选择的项目（通过检查`is_active`值）：

    ```
    $scope.selectedOnes = function() {
        var result = [];
        angular.forEach($scope.personnel, function(entry) {
            if (entry.is_active == '1') {
                result.push(entry);
            }                
        });
        return result;
    }; 
    ```

还要注意'1'！= 1（字符串！=数字）。

**jsfiddle**：http: [//jsfiddle.net/bmleite/Yjcgh/](http://jsfiddle.net/bmleite/Yjcgh/)

# python - 在 Python 中将时间戳转换为经过的分钟数

> ID：14843775
> 
> 赞同：1
> 
> 时间：2013-02-12T23:25:42.687
> 
> 标签：python, datetime

我正在为我的项目制作一个新闻博客，其中我必须在新闻标题下显示 x 分钟前的时间等。

从新闻的 RSS 提要中，我有字符串形式的时间戳。例如：

时间戳 = '2013 年 2 月 12 日星期二 07:43:09 GMT'

我正在尝试使用 python 中的 datetime 模块来查找此时间戳和当前时间之间的差异。但由于某种原因，它给出了错误：

ValueError: astimezone() 不能应用于天真的日期时间

如果有人能指出我正确的方向，我将不胜感激。以下是我在 Python 中的尝试：

```
from datetime import datetime
from pytz import timezone
timestamp = 'Tue, 12 Feb 2013 07:43:09 GMT'  
t = datetime.strptime(timestamp, '%a, %d %b %Y %I:%M:%S %Z')
now_time = datetime.now(timezone('US/Pacific'))
# converting the timestamp to Pacific time
t_pacific = t.astimezone(timezone('US/Pacific'))   # get error here
diff = t_pacific - t 
```

谢谢！普拉哈尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T23:40:25.493

您的示例有一些问题（我看到您现在已经修复了它们）：

*   第一行应该是：

    ```
    from datetime import datetime 
    ```

*   看起来好像您在第 4 行缺少右括号：

    ```
    now_time = datetime.now(timezone('US/Pacific') 
    ```

*   是什么`timezone()`？那是从哪里来的？

你真的不需要弄乱时区，我不认为 - 只需使用 GMT (UTC)。更像这样的东西怎么样：

```
from datetime import datetime
timestamp = 'Tue, 12 Feb 2013 07:43:09 GMT'  
t = datetime.strptime(timestamp, '%a, %d %b %Y %I:%M:%S %Z')
t_now = datetime.utcnow()
diff = t_now - t 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T23:53:46.443

这里的问题是`t`没有时区——这就是错误消息中“naive datetime”的含义。从[文档](http://docs.python.org/2/library/datetime.html)：

> 有两种日期和时间对象：“naive”和“aware”……有意识的对象对……时区和夏令时信息有足够的了解……naive 对象没有……</p>

您可以通过执行以下操作来验证它是否幼稚：

```
print(t.tzinfo) 
```

答案将是`None`。

正如[`astimezone`文档](http://docs.python.org/2/library/datetime.html#datetime.datetime.astimezone)所说：

> `self`必须知道（`self.tzinfo`不得`None`，`self.utcoffset()`不得返回`None`）。

该`strptime`函数*总是*生成一个简单的日期时间。

您可以通过多种方式解决此问题：

*   首先转换`t`为 GMT 日期时间而不是简单的日期时间，然后您的转换`'US/Pacific'`将起作用。

正如文档所说，“如果您只想将时区对象 tz 附加到日期时间 dt 而不调整日期和时间数据，请使用`dt.replace(tzinfo=tz)`.” 既然您知道时间是 UTC，那么只有`replace`带有 UTC 的空 tz，您就知道时间了。

*   使用与 不同的机制转换为 PST `astimezone`，在该机制上将假定 UTC 或允许您指定源。

那里有各种替代方案，但您已经在使用`pytz`，因此请参阅[其文档](http://pytz.sourceforge.net)。

*   转换`now_time`为 UTC 而不是转换`t`为 PST。

对于大多数用例来说，最后一个可能是最简单和最好的。由于您只是`now_time`因为您以这种方式明确要求而获得了 PST，因此您所要做的就是不这样做（或明确要求`'GMT'`而不是`'US/Pacific'`）。然后你可以在 UTC 时间上做你的日期算术。

如果您需要在 PST 中显示最终结果，通常最好在 UTC 中进行算术，并在最后进行转换。（例如，您可以有两次相隔一小时的时间，但在太平洋地区具有相同的值，因为 DST 当天的凌晨 1 点会重复两次；如果您一直停留在 UTC，那将不是问题。）

# java - Eclipse 在调试时无法识别 Galaxy S 2，即使它会识别我的触摸

> ID：14843776
> 
> 赞同：-2
> 
> 时间：2013-02-12T23:25:47.073
> 
> 标签：java, android, eclipse

我是一个java初学者。我现在正在阅读 Rogers Cadenhead 所著的《Java in 24 Hours 第六版》，学习 Java 和 android 编程。无论如何，对于我的问题。我正在使用 eclipse 制作一个简单的应用程序，我想将它转移到我的 Galaxy s 2。我准备调试它并选择我的设备....除了它不存在。我已经安装了驱动程序 Kies，确保它处于 USB 调试模式，但它无法识别它。有什么建议么？这不是重复的！这是不同的，因为即使它处于调试模式，即使我已经重新安装了两次 kies，即使我确保 USB 端口或电源线没有问题，它仍然无法工作！但奇怪的是我的 My Touch 可以与该应用完美配合。我在这里想念什么？请帮忙。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-13T00:03:30.710

您的平台工具文件夹中的 adb 很可能有问题。它是android设备桥。转到 android-sdk 文件夹，然后转到平台工具，在里面你会看到 adb。按 shift + 右键单击​​该文件夹空白处的任意位置，然后单击“在此处打开命令行”。类型：`adb devices`. 它应该向您显示可用设备的列表。如果那不显示您的星系（它将是一个大数字/字母序列，例如：3ANIWRN42408）或其他任何东西，而不是尝试`adb kill-server`then `adb start-server`。然后看看是否`adb devices`显示您的设备。

如果这很难理解，请查看：[adb/usb 教程](http://theunlockr.com/2009/10/06/how-to-set-up-adb-usb-drivers-for-android-devices/)

# python - 如何用多行编写python lambda？

> ID：14843777
> 
> 赞同：36
> 
> 时间：2013-02-12T23:25:48.290
> 
> 标签：python, lambda

在 python 中，如何编写一个多行的 lambda 函数。我试过

```
d = lambda x: if x:
                 return 1
              else 
                 return 2 
```

但我收到错误...

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-12T23:26:34.177

改为使用`def`。

```
def d(x):
    if x:
        return 1
    else:
        return 2 
```

所有 python 函数都是一阶对象（它们可以作为参数传递），`lambda`只是制作短函数的一种方便方法。一般来说，如果一个普通的函数定义超出了一行简单的代码，你最好使用它。

即使那样，事实上，如果你将它分配给一个名字，我总是会使用`def`over `lambda`。在定义短函数`lambda`时确实是一个好主意，例如，用于与 一起使用，因为它们可以内嵌到函数调用中。`key``sorted()`

请注意，在您的情况下，三元运算符会完成这项工作（`lambda x: 1 if x else 2`），但我假设这是一个简化的情况。

（作为代码高尔夫球笔记，这也可以用更少的代码来完成`lambda x: bool(x)+1`- 当然，这是非常不可读的，也是一个坏主意。）

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-12T23:45:06.537

`lambda`Python中的构造[仅限于表达式](http://docs.python.org/2/reference/expressions.html#lambda)，不允许使用任何语句

在保持上述约束的同时，您当然可以使用反斜杠 char 编写包含多行的表达式：

```
>>> fn = lambda x: 1 if x \
                     else 2
>>> fn(True)
>>> 1
>>> fn(False)
>>> 2 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-12T23:28:22.227

这是您尝试执行的正确版本：

```
d = lambda x: 1 if x else 2 
```

但我不确定你为什么要这样做。

# android - Holo.Light.DarkActionBar ActionBar 的默认十六进制颜色是什么

> ID：14843780
> 
> 赞同：11
> 
> 时间：2013-02-12T23:26:01.193
> 
> 标签：android, android-actionbar, android-theme

我的布局底部有一个工具栏，我希望它与操作栏的颜色相同。我正在使用带有深色操作栏主题的 Holo Light，这种颜色的十六进制代码是什么？谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-13T18:14:49.217

主题中操作栏的背景十六进制值`Theme.Holo.Light.DarkActionBar`是**#222222**。我从用作操作栏背景的图像中选择它：

> ![图片](../Images/696dcf02df96996a4088978a8a46dc87.png)
> 
> <sdk>/platforms/android-17/data/res/drawable-xhdpi/ab_solid_dark_holo.9.png

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T23:32:17.427

深色操作栏本身是#030304，它下面的边框是#33b5e5。

还值得注意的是，如果您想要底部操作栏的副本，可以[通过](http://developer.android.com/guide/topics/ui/actionbar.html#SplitBar)使用`uiOptions="splitActionBarWhenNarrow"`.

# c# - 调试器在 VS 2012 中跳过最新签入代码 - 适用于 VS 2010

> ID：14843782
> 
> 赞同：7
> 
> 时间：2013-02-12T23:26:13.907
> 
> 标签：c#, debugging, visual-studio-2012, mstest

编辑：我刚刚在 VS 2010 上试过这个，问题没有发生。这个问题只发生在 VS 2012 上。这真的是一个错误吗？这也发生在我的两台单独的笔记本电脑上，甚至在朋友的笔记本电脑上（刚刚获得最新代码）。

首先，问题的截图。这个方法是*全新的*代码。

![在此处输入图像描述](../Images/db42a6633aad96478a0a8715e60cb8b9.png)

调试器正在跳过我最近签到的代码。下面代码中的注释解释了我调试此方法时发生的情况。所以真的没有必要去尝试理解代码；请注意，正在跳过代码行。如果您认为代码与正在调试的程序集不匹配，请多多包涵。您将看到调试器在哪里识别新代码，但不识别现有代码。这种行为发生在两台不同的笔记本电脑上，在删除磁盘上的代码并再次获取最新版本之后。每条注释都会告诉您调试器是否命中了一行。

```
[TestMethod()]
[DeploymentItem("PrestoCommon.dll")]
public void ApplicationShouldBeInstalledTest_UseCase9()
{
    // Debugger hits this line
    ApplicationServer appServerAccessor = new ApplicationServer();

    // Debugger does not hit these next two lines
    PrivateObject privateObject = new PrivateObject(appServerAccessor);
    ApplicationServer appServer = ApplicationServerLogic.GetByName("server10");

    // Debugger hits this line. Weirdness: both objects are null, and after this line runs,
    // appServerAccessor is no longer null.
    appServerAccessor.Id = appServer.Id;

    // Skips this line
    ApplicationWithOverrideVariableGroup appWithValidGroup = appServer.ApplicationsWithOverrideGroup[0];

    // Debugger hits this line, but F11 doesn't take me into the method.
    appWithValidGroup.CustomVariableGroup = CustomVariableGroupLogic.GetById("CustomVariableGroups/4");

    // Skips this line
    Assert.AreEqual(true, true);
} 
```

反汇编只显示实际受到影响的代码行。

![在此处输入图像描述](../Images/30454284b4a9e96a2aeca140a698f1f8.png)

现在，检查一下。如果我添加新的代码行，调试器会识别它，并且其他代码行会更改，只要被调试器识别。只是方法中的第二行代码是新的。

```
[TestMethod()]
[DeploymentItem("PrestoCommon.dll")]
public void ApplicationShouldBeInstalledTest_UseCase9()
{
    // Debugger hits this line
    ApplicationServer appServerAccessor = new ApplicationServer();

    // New line. It's recognized by the debugger, and it shows up in the disassembly.
    if (DateTime.Now > DateTime.Now.AddHours(1)) { return; }

    // Debugger does not hit these next two lines
    PrivateObject privateObject = new PrivateObject(appServerAccessor);
    ApplicationServer appServer = ApplicationServerLogic.GetByName("server10");  // Gets hit now.

    // Debugger hits this line. Weirdness: both objects are null, and after this line runs,
    // appServerAccessor is no longer null.
    appServerAccessor.Id = appServer.Id;  // No longer gets hit.

    // Skips this line (now it's getting hit)
    ApplicationWithOverrideVariableGroup appWithValidGroup = appServer.ApplicationsWithOverrideGroup[0];

    // Debugger hits this line, but F11 doesn't take me into the method. Now this gets skipped.
    appWithValidGroup.CustomVariableGroup = CustomVariableGroupLogic.GetById("CustomVariableGroups/4");

    // Skips this line. Still skipped.
    Assert.AreEqual(true, true);
} 
```

这是反汇编的部分快照，显示了新的代码行：

![在此处输入图像描述](../Images/4ae48caa6aaf6d3cfa45b5e21db23877.png)

这怎么可能发生？

更奇怪的是，在某一时刻，这甚至返回了：

```
if (DateTime.Now > DateTime.Now.AddDays(1)) { return; } 
```

我尝试过的事情：
- 从硬盘驱动器中删除源代码并强制获取最新版本
- 修复 VS 2012
- 进行一些 VS[清理](http://weblogs.asp.net/psheriff/archive/2011/11/08/clean-up-after-visual-studio.aspx)
- 使用 VS 2010，更改代码，签入，使用 VS 2012 获取最新版本
- 重新启动
- 其他（不记得全部）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T18:17:43.190

这似乎是特定于单元测试的。在 VS 2012 中：

*   测试 > 测试设置
*   打开选定的测试设置文件
*   数据和诊断 > 取消选择代码覆盖率 (Visual Studio 2010)
*   申请

注意，我有访问源代码的优势，我下载了 Presto ( [http://presto.codeplex.com/](http://presto.codeplex.com/) )。

# django - Django - 仅使用 GET 参数实现无需登录的用户操作

> ID：14843783
> 
> 赞同：1
> 
> 时间：2013-02-12T23:26:15.140
> 
> 标签：django

我正在编写一个分类广告网站，我需要用户只点击我将通过电子邮件发送的 URL 来更新广告。实施这样的系统应该注意什么？我在网上搜索过，但没有找到这样的实现示例。

有人可以提供一些关于正确路径的线索吗？

最好的祝福，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:29:00.207

首先，[SQL 注入](http://www.codeproject.com/Articles/9378/SQL-Injection-Attacks-and-Some-Tips-on-How-to-Prev)将是一个需要担心的主要问题，尤其是在使用明显的 get 参数时。

其次，您将需要 GET 参数中的非个人识别信息。你**不会**想要像 123456 这样的短 ID，因为这些很容易被猜到。GUID（例如 412dc535-03dd-4887-b702-02c8b85e8891，您当然会删除 - 当然）对此非常有用。

第三，您将需要某种基本验证，以确认它实际上是发起请求的用户。让每封电子邮件都有自己的一键操作 ID，可能是一个 GUID（一长串随机字符），并让它们在一段时间（几天）后过期。分别跟踪每个电子邮件链接以及它们应该做什么，这样人们就不能只找出某人广告的 ID 并一遍又一遍地运行它。

〜基督徒

# sql - 带 TOP 的 SQL Server 视图

> ID：14843784
> 
> 赞同：0
> 
> 时间：2013-02-12T23:26:18.913
> 
> 标签：sql, sql-server

我有一个观点让我非常疯狂..

表`AlarmMsg`如下所示：

```
[TypeID] [smallint] NULL,
[SEFNum] [int] NULL,
[ServerName] [nvarchar](20) NOT NULL,
[DBName] [varchar](20) NOT NULL,
[PointName] [varchar](50) NOT NULL,
[AppName] [varchar](50) NOT NULL,
[Description] [varchar](100) NOT NULL,
[Priority] [tinyint] NOT NULL,
[Value] [float] NOT NULL,
[Limit] [float] NOT NULL,
[Msg] [nvarchar](255) NULL,
[DateStamp] [datetime2](7) NULL,
[UID] [uniqueidentifier] NOT NULL 
```

在该`AlarmMsg`表的顶部是一个应用的视图，如下所示：

```
CREATE VIEW AlarmMsgView 
AS
SELECT     TOP (2000) WITH TIES 
    SEFNum, ServerName, DBName, 
    PointName, AppName, Description, 
    Priority, Value, Limit, Msg, 
    DateStamp, UID
FROM      dbo.AlarmMsg WITH (NOLOCK)
ORDER BY DateStamp DESC 
```

此查询直接针对表返回预期的十 (10) 行：

```
SELECT TOP(10) [SEFNum]
FROM [RTIME_Logs].[dbo].[AlarmMsg] 
where [Priority] = 1 
```

对视图的相同查询返回......没有（！）：

```
SELECT TOP(10) [SEFNum]
FROM [RTIME_Logs].[dbo].[AlarmMsgView] 
where [Priority] = 1 
```

该表`AlarmMsg`包含大约 11M+ 行，并在 column 上声明了一个 FT 索引`Msg`。

有人可以告诉我这里发生了什么，我想我正在失去理智。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-13T01:44:26.873

NOLOCK 会导致此问题。

阅读[这个](http://sqlblogcasts.com/blogs/tonyrogerson/archive/2006/11/10/1280.aspx)和[这个](http://www.sqlmag.com/Article/ArticleID/92888/sql_server_92888.html)。

基本上，NOLOCK 来自 SQL Server 2000 时代。它需要被遗忘。你已经升级了你的 SQL Server（我希望如此），所以你需要升级你的查询。考虑切换到[READ_COMMITTED_SNAPSHOT](http://msdn.microsoft.com/en-au/library/ms173763.aspx)以“无阻塞”方式读取数据。阅读[此处](http://blogs.msdn.com/b/sqlcat/archive/2011/02/20/concurrency-series-basics-of-transaction-isolation-levels.aspx)以确定哪种隔离级别最适合您的情况

编辑：阅读作者的评论后，我认为这是原因：

SQL Server 没有做错任何事情。将您的视图视为主查询的子查询，如下所示：

```
SELECT * FROM (SELECT TOP(2000) col1, col2 FROM aTable ORDER BY Date1 DESC) WHERE priority = 1\. 
```

在这种情况下，将首先执行括号中的查询，并将 WHERE 子句应用于结果集

# java - Java Stack - 修改堆栈中的最后一个元素

> ID：14843789
> 
> 赞同：1
> 
> 时间：2013-02-12T23:26:47.957
> 
> 标签：java, stack

我在Java中有一堆整数，我想知道是否有其他方法可以将“最后一个推送的项目”增加一个而不先弹出它。

我目前的解决方案是

```
Stack<Integer> stack = new Stack<Integer>();
stack.push(1);
stack.push(2);   // Increment 2 to 3
Integer last = stack.pop();
stack.push(last+1); 
```

我尝试了以下但不工作

```
Integer last = stack.peek();
last+=1; 
```

我认为它会起作用，因为 last 是对堆栈中最后一个元素的引用，并且它增加了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T23:30:22.623

在 Java 中，`Integer`类是*不可变*的，这意味着`Integer`永远不能修改对象。这个：

```
last += 1; 
```

真的只是这个的简写：

```
last = Integer.valueOf(last.intValue() + 1); 
```

也就是说，它实际上创建（或检索）一个*不同* `Integer`的实例，其值比前一个`Integer`实例的值大一。

如果您希望能够修改堆栈顶部的对象，则需要将可变对象放在堆栈上。您可以为此创建自己的`IntWrapper`or `IntHolder`or`MutableInteger`类。（但我不特别推荐这个。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T23:29:05.027

与`last+=1;`您将另一个对象分配给`last`. 因此，堆栈没有被操纵。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T23:43:12.400

为此，您需要可变长对象，例如`org.apache.commons.lang3.mutable.MutableLong`or `java.util.concurrent.atomic.AtomicLong`。然后你可以修改它

```
stack.peek().increment(); 
```

# java - JAX-RS：即使传递了一些不正确的数据类型，是否也传递了@DefaultValue？

> ID：14843793
> 
> 赞同：1
> 
> 时间：2013-02-12T23:27:14.867
> 
> 标签：java, rest, jax-rs

我的端点看起来像

```
 @GET
    @Produces(MediaType.APPLICATION_JSON)
    public Response getVariables(@QueryParam("_activeonly") @DefaultValue("no") @Nonnull final Active active) {
        switch (active) {
            case yes:
                return Response.ok(VariablePresentation.getPresentationVariables(variableManager.getActiveVariables())).build();
            case no:
                return Response.ok(VariablePresentation.getPresentationVariables(variableManager.getVariables())).build();
        }
        throw new WebApplicationException(Response.Status.BAD_REQUEST);
    } 
```

`Active`在哪里

```
 public enum Active {
        yes,
        no;
    } 
```

我将其测试为

```
 @Test
    public void testGetAllVariablesUnknownActionFail() throws Exception {
        final ClientRequest clientRequest = new ClientRequest("http://localhost:9090/market/rest/variables?_activeonly=unknown");
        final ClientResponse<String> clientResponse = clientRequest.get(String.class);
        assertEquals(400, clientResponse.getStatus());
    } 
```

当我期待`HTTP 400`时，我收到`HTTP 200`

```
: expected:<400> but was:<200> 
```

这是否意味着如果我传入了一些未映射到枚举的不正确的值`@DefaultValue`？

# ios - CALayer 的实体阴影

> ID：14843794
> 
> 赞同：8
> 
> 时间：2013-02-12T23:27:16.450
> 
> 标签：ios, calayer, shadow

我有一个动画 CALayer，它正在投下阴影。这就是我打算做的，但我正在寻找一种没有模糊的实体阴影的方法。更改模糊半径并不能解决我的问题。有任何想法吗？

非常感谢。

```
 myLayer.shadowRadius = 3;
    //shadowBlurRadius
    myLayer.shadowColor = [[UIColor greenColor] CGColor];
    //intended is to get a green solid shadow without blur 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-13T02:42:51.513

如果你不想模糊，你可以：

```
myLayer.shadowColor = [[UIColor greenColor] CGColor];
myLayer.shadowOffset = CGSizeMake(5.0, 5.0);
myLayer.shadowOpacity = 1.0;
myLayer.shadowRadius = 0.0; 
```

`shadowRadius`指示模糊量。`shadowOffset`指示影子去哪里。

# matlab - 在Matlab中找到每个网格的权重？

> ID：14843797
> 
> 赞同：2
> 
> 时间：2013-02-12T23:27:24.200
> 
> 标签：matlab, grid, statistics

所以我有两个带有 x 和 y 坐标数据点的向量* **(x & y)* 。**我想把这些点放在网格上，有点像散点图，并计算每个网格内的点数，比如使用 Matlab 的每个网格的权重。

你们会建议什么是最好的方法来做到这一点？任何建议表示赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T23:39:48.033

我假设您的意思是您想要执行 xy 数据的 2D 直方图。您可以使用文件交换中的多种工具：

[http://www.mathworks.com/matlabcentral/fileexchange/9896-2d-histogram-calculation](http://www.mathworks.com/matlabcentral/fileexchange/9896-2d-histogram-calculation)

[http://www.mathworks.com/matlabcentral/fileexchange/1487](http://www.mathworks.com/matlabcentral/fileexchange/1487)

[http://www.mathworks.com/matlabcentral/fileexchange/14205-2d-histogram](http://www.mathworks.com/matlabcentral/fileexchange/14205-2d-histogram)

# iphone - 存储和管理简单应用程序的数据

> ID：14843801
> 
> 赞同：1
> 
> 时间：2013-02-12T23:27:39.393
> 
> 标签：iphone, objective-c, core-data, plist, nsdata

我将制作一个简单的游戏应用程序，它会随着用户的关卡进度存储一些数据。例如：每个级别都有多个子级别，子级别根据用户的进度存储3-4个属性（字符串和数组）。

该应用程序很简单，存储量不大（最多大约 150 个级别和子级别，每个级别的数据量很少），我不想让它变得复杂，多个类代表级别和子级别以及 SQLLite 数据库. 我想到了一种更简单的方法，但足以通过我的 GameManager 单例来管理数据。

推荐哪些方法可以满足我存储和管理此类应用程序数据的需求。也许其中之一或其他东西：

1.  **NSUserDefaults** + **NSDictionary**
2.  ****核心数据**+ **SQLLite****
*****   ETC...****

 ****只是想确保我没有遗漏任何东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:13:40.863

看看核心数据。一旦你开始，它似乎非常困难。但是一旦你进入它，它就会变得非常简单。看看这个[教程](http://www.youtube.com/watch?v=QBrkavVJsw0)，他帮助我开始。Hth

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T00:33:20.837

使用核心数据对您来说要好得多，也不会那么痛苦。为什么说sqlite？？Core Data 只是将您的对象保存在 iOs 设备上的 sqlite 文件和 Cocoa 应用程序中的 xml 中。我认为使用 plist 文件有点奇怪。你可以只放入一个简单的数组，如果你想在你的简单数组之外显示照片怎么办？首选方式是核心数据——正如苹果所说，代码减少了 50%。使用 NSFetchedResultsController 你会很好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T23:30:26.903

另一种广泛使用的做法是将您的信息存储在属性列表 (.plist) 中。 [NSDictionary](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html)和[NSArray](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)配备了从属性列表加载和写入的能力。

这是一个可能对您有帮助的资源：[Property List Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PropertyLists/Introduction/Introduction.html)****

# javascript - 在 open.window 之后禁用父窗口

> ID：14843802
> 
> 赞同：1
> 
> 时间：2013-02-12T23:27:38.897
> 
> 标签：javascript, popup, onclick, window, parent

我想链接到亚马逊音乐预览播放器作为我网站的弹出窗口。我有这个代码：

```
<a href="http://www.amazon.de/gp/recsradio/radio/B000002OK3/" target="_blank" onclick="window.open(this.href,'popper','scrollbars=1,width=900,height=600'); return false;" onkeypress="window.open(this.href,'popper','scrollbars=1,width=900,height=600'); return false;">Link</a> 
```

我的问题是，当我单击 Amazon Popup 中的专辑封面时，带有链接的父站点会使用目标 Amazon url 刷新。当我通过在地址栏中键入 url 打开弹出 URL 然后单击封面时，会打开一个带有目标 url 的新窗口（这是我想要强制的）。

是否可以不通过链接弹出窗口传递父关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:35:00.850

我用这样的方法解决了我的问题：

使用 JS 从我的站点打开本地 popup.php，同时将 amazonurl 作为 var 传递。

```
<a onkeypress="window.open(this.href,'popup','scrollbars=1,width=900,height=600'); return false;" onclick="window.open(this.href,'popper','scrollbars=1,width=900,height=600'); return false;" rel="nofollow" target="_blank" href="http://domain.com/popup.php?amazonurl=http://[...]">Link</a> 
```

在 popup.php 我使用

```
<script language="javascript" type="text/javascript">  
window.opener = null; window.location.href = "<?php echo $_GET['amazonurl']; ?>;</script> 
```

使 windpw.opener = null 然后使用亚马逊 URL 刷新弹出窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:54:39.743

确保您没有使用“popper”作为 winow.open 的两个实例的标识符。打开初始弹出窗口的主窗口应该与弹出窗口本身的主窗口不同，除非您希望它更改已经打开的弹出窗口（在这种情况下，onclick 属性中的 window.open 基本上是不必要的） .

我的意思是：假设您正在使用有问题的代码启动原始弹出窗口，如下所示：

```
<a href="popup.html" onclick="window.open(this.href, 'popper'); return false;">Popup</a> 
```

带有相关代码的弹出窗口是这样的（popup.html）：

```
<a href="http://www.amazon.de/gp/recsradio/radio/B000002OK3/" target="_blank" onclick="window.open(this.href,'popper','scrollbars=1,width=900,height=600'); return false;" onkeypress="window.open(this.href,'popper','scrollbars=1,width=900,height=600'); return false;">Link</a> 
```

您需要确保原始弹出窗口标识符与弹出窗口中的标识符不同。所以，原来的弹出应该是这样的：

```
<a href="popup.html" onclick="window.open(this.href, 'original-popper'); return false;">Popup</a> 
```

# java - 如何将表单的值从jsp发送到java

> ID：14843807
> 
> 赞同：1
> 
> 时间：2013-02-12T23:27:53.430
> 
> 标签：java, jsp, struts2, javabeans

我有一个包含 30 个不同字段的表单。将它们全部传递给控制器​​需要为每个具有一个属性以及一对 getter、setter。

我要将表单字段作为对象并将对象发送到控制器。

我正在使用以下代码****但有些人建议从 jsp 调用 java 方法并改用 JSTL 是一种不好的做法，但不知道如何使用 JSTL 来实现它。有没有其他方法可以做到这一点？****

我的 JSP

```
 <s:form>
 code to implement form goes here
 </s:form> 

<jsp:useBean id="obj" class="com.User"/>

    <jsp:setProperty property="*" name="obj"/>

      <%
         String myoutput = myController.Xclass(obj);
         out.print(myoutput);
         if(myController.Xclass(obj).equals("output"))
            {
               out.print("The form is successfully submitted.");
            }
      %> 
```

控制器

```
 public String Xclass(User obj){
           return "output";
        } 
```

为了澄清我的类图如下：

```
User Class {
 all the attributes and getters setters
}

myController class extends User {

    public String XClass(User obj){
       ... work on the inputes ...
      return "output";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:22:18.030

如果操作属性的数量是问题，请手动公开 POJO，或使用[ModelDriven](http://struts.apache.org/release/2.2.x/docs/model-driven.html)。

手动操作很简单，例如：

```
public class UserController {
    private User user; // Plus public getter and setter
} 
```

然后在 JSP 中可以`User`按名称引用属性：

```
<s:form ...>
  <s:textfield key="user.firstName"/>
  ... 
```

理论上使用`ModelDriven`更容易，因为它是自动放入堆栈的。确保仅在需要时才实例化新模型可能很棘手，但基本上（从内存中）：

```
public class UserController implements ModelDriven<User> {
    private User user;
    public User getModel() { return user; }
} 
```

由于被压入堆栈`User`，因此直接在 JSP 中使用属性：`User`

```
<s:form ...>
  <s:textfield key="firstName"/>
  ... 
```

同样，在提交表单时，会创建一个模型并将其用作方法的第一个目标。

请记住，您永远不会将对象发送到 Java 端：您总是且仅发送字符串（来自正常的 HTTP 表单提交）。服务器端可能有将这些字符串转换为对象的魔法，但这就是：魔法。魔法和希望。

# unix - 使用 grep 指定模式的 Unix 命令

> ID：14843809
> 
> 赞同：-1
> 
> 时间：2013-02-12T23:28:12.430
> 
> 标签：unix, grep, command

我有一个名为的文件`LastNames.txt`，其中列出了 100 个姓氏，流行度百分比从 0 到 100。问题是如何使用`grep`创建新文件，其中包含仅流行度百分比的姓氏`0.000`。注意：我使用 Unix 命令，这是我使用的代码：

```
grep '0.000' LastNames.tab > unpopularNames.tab 
```

当我使用这个命令时，我得到一些百分比大于 0.000 的姓氏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:29:54.107

尝试这样做：

```
 grep '\b0\.000\b' LastNames 
```

*   点`.`表示[正则表达式](/questions/tagged/regex "show questions tagged 'regex'")中的*任何字符*
*   `\.`*字面*意思 *`.`*
**   `\b`表示*单词边界**

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:44:08.787

当您真正想要的是算术比较时，没有理由尝试让 grep 进行 RE 比较：

```
$ cat file
PEACE 0.003
GAGLIARDI 0.001
ZUPAN 0.000
ZUCHOWSKI 0.000

$ awk '$NF == 0' file
ZUPAN 0.000
ZUCHOWSKI 0.000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T13:48:59.437

我建议使用`-F`and`-w`标志对整个单词进行固定的字符串匹配：

```
grep -Fw 0.000 file 
```

来自男人`grep`：

> -F，--固定字符串
> 
> 将 PATTERN 解释为固定字符串的列表，由换行符分隔，其中任何一个都将被匹配。（-F 由 POSIX 指定。）
> 
> -w, --word-正则表达式
> 
> 仅选择那些包含构成整个单词的匹配项的行。测试是匹配的子字符串必须在行首，或者前面有一个非单词组成字符。同样，它必须位于行尾或后跟非单词组成字符。构成单词的字符是字母、数字和下划线。

演示：

```
$ cat file
error      0E000
top      100.000
middle    50.000
lower     25.000
bottom     0.000

# Orignal over matching grep 
$ grep 0.000 file
error      0E000
top      100.000
middle    50.000
bottom     0.000

# With correct flags only right lines are matched
$ grep -Fw 0.000 file
bottom     0.000 
```

注意：您可以使用`fgrep`代替`grep -F`：

```
fgrep -w 0.000 file 
```*

# sql - SQL的查询添加值

> ID：14843810
> 
> 赞同：0
> 
> 时间：2013-02-12T23:28:16.197
> 
> 标签：sql, sql-server

我希望你能帮助我，在这个 sql 查询中。(SQL SERVER) 我有这些表

```
TABLE1
COLUMN0 COLUMN1 COLUMN2 COLUMN3
A        DOLAR    2.5   18/02/2013
A        DOLAR    1.5   18/02/2013
B        EURO     22    19/02/2013
B        DOLAR    4.5   19/02/2013
B        DOLAR    1.3   18/02/2013
C        EURO     0.5   19/02/2013

TAB_RATES
COLUMN0    COLUMN1
18/02/2013 1.35
19/02/2013 1.36 
```

我想以美元添加所有“B”值（COLUMN2）但我有一些以欧元为单位 TABLE1 中的第 3 列显示了该日期的美元值（FK_TAB_RATES）

什么是 sql 查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:38:11.457

我的猜测是您的 Tab_Rates 表是当天的货币乘数。如果是这样，这样的事情可能会起作用：

```
SELECT SUM (T.Column2 *
    CASE 
        WHEN T.Column1 = 'Euro'
        THEN TR.Column1
        ELSE 1.0
    END) SummedAmt
FROM Table1 T
    JOIN Tab_Rates TR ON T.Column3 = TR.Column0
WHERE T.Column0 = 'B' 
```

这是一个[SQL Fiddle](http://sqlfiddle.com/#!3/8d192/1)来演示它。

这产生 35.72。手动执行，4.5 + 1.3 + 22(1.36) = 35.72

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T23:39:43.273

尝试这样的事情（未经测试）

```
select t1.col0,
    sum (case when t1.col1 = 'euro' then t1.col1 * rate.r
              else t1.col1 end) as s
from t1
inner join rate on rate.r = t1.col3
group by col0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T05:45:58.403

尝试这个：

```
SELECT SUM (T.Column2 *
    CASE 
        WHEN T.Column1 = 'Euro'
        THEN TR.Column1
        ELSE 1.0
    END) SummedAmt
FROM Table1 T
    JOIN Tab_Rates TR ON T.Column3 = TR.Column0
WHERE T.Column0 = 'B' 
```

# javascript - Underscore.js 中的递归/深度扩展/分配？

> ID：14843815
> 
> 赞同：35
> 
> 时间：2013-02-12T23:28:28.623
> 
> 标签：javascript, underscore.js

有没有办法获得 Underscore.js[`extend`](http://underscorejs.org/#extend)功能：

> 将源对象中的所有属性复制到目标对象，然后返回目标对象。它是有序的，因此最后一个源将覆盖先前参数中的同名属性。

...递归工作？

实际上，`query`属性 in`creditOperation`将完全覆盖`query`定义的属性`baseOperation`：

```
var url = require('url')
  , _ = require('underscore'),
  , baseOperation = {
        host: 'gateway.skebby.it',
        pathname: 'api/send/smseasy/advanced/http.php',
        protocol: 'https',
        query: {
            'username': 'foo',
            'password': 'bar',
        }
    };

var creditOperation = _.extend(baseOperation, {
    query: {
        'method': 'baz'
    }
});

console.log(url.format(creditOperation)); 
```

我想得到这个`creditOperation`：

```
{
    host: 'gateway.skebby.it',
    pathname: 'api/send/smseasy/advanced/http.php',
    protocol: 'https',
    query: {
        'username': 'foo',
        'password': 'bar',
        'method': 'baz'
    }
} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-09-03T15:17:10.627

使用[Lodash](http://lodash.com/)（下划线的分叉）你可以。Lodash 的**_.extend**方法接受第三个（或更高）参数作为函数，它接收值（旧的和新的）；所以你可以做这样的事情：

```
var deep = function(a, b) {
    return _.isObject(a) && _.isObject(b) ? _.extend(a, b, deep) : b;
};

var a = {a:{b:{c:1}}},
    b = {a:{b:{z:1}}};

_.extend(a,b,deep); 
```

**更新。** 正如[Paolo Moretti在评论中所说，](https://stackoverflow.com/users/63011/paolo-moretti) [**lodash**](https://lodash.com/docs#merge)中有一个相同的函数，称为*_.merge*：[](https://lodash.com/docs#merge)

 **```
_.merge(a,b); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-07-02T23:27:26.957

jQuery 有一个[extend()](http://api.jquery.com/jquery.extend/)函数，它和它的 Underscore 对应物做同样的事情，但也有一个**深层**参数，允许它按照你的需要递归地合并：

```
var creditOperation = $.extend(true, baseOperation, {
    query: {
        'method': 'baz'
    }
}); 
```

或者，如果您不想覆盖*baseOperation*：

```
var creditOperation = $.extend(true, {}, baseOperation, {
    query: {
        'method': 'baz'
    }
}); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-02-12T23:43:58.697

[Underscore 没有计划添加深度扩展](https://github.com/documentcloud/underscore/issues/162)，因为它被认为太复杂而无法处理不同类型的对象。相反，鼓励用户实施他们自己的解决方案，并支持他们需要的东西。

在您的情况下，它只是普通对象，因此实现非常简单：

```
_.deepObjectExtend = function(target, source) {
    for (var prop in source)
        if (prop in target)
            _.deepObjectExtend(target[prop], source[prop]);
        else
            target[prop] = source[prop];
    return target;
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-04-10T13:56:37.570

Bergi 深度扩展的独立版本，包括当值是字符串而不是对象时的修复。也修补得更严格。

```
function deepObjectExtend (target, source) {
    for (var prop in source) {
        if (source.hasOwnProperty(prop)) {
            if (target[prop] && typeof source[prop] === 'object') {
                deepObjectExtend(target[prop], source[prop]);
            }
            else {
                target[prop] = source[prop];
            }
        }
    }
    return target;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-26T16:07:48.060

Kurt Milam 发布了一个[mixin，它`deepExtend`为 underscore.js 添加了一个方法](https://gist.github.com/kurtmilam/1868955)。它甚至处理正则表达式（如果你愿意的话）。文档摘录：

> 将其与 underscore.js 混合： `_.mixin({deepExtend: deepExtend});`
> 
> 像这样称呼它：`var myObj = _.deepExtend(grandparent, child, grandchild, greatgrandchild)`
> 
> 注意：保持干燥。
> 
> 如果您使用 JSON 配置文档，此功能特别有用。它允许您使用最常见的设置创建默认配置文档，然后针对特定情况覆盖这些设置。它接受任意数量的对象作为参数，让您对配置文档层次结构进行细粒度控制。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-08-12T00:04:52.803

underscore 的 extend() 不做深度扩展；事实上，下划线并没有可以深度扩展的功能。

您可以为此使用 lodash 的[合并](https://lodash.com/docs#merge)。**

# playframework-2.0 - 使用securesocial & play 2 查看自定义

> ID：14843818
> 
> 赞同：3
> 
> 时间：2013-02-12T23:28:42.390
> 
> 标签：playframework-2.0, securesocial

我想自定义安全社交视图。我找不到如何为我的表单指定操作 URL。

当我尝试：

```
<form action="@routes.securesocial.controllers.Registration.handleSignUp(token)"
      class="form-horizontal" autocomplete="off" method="POST"> 
```

在路由文件中，我配置了路由：

```
POST    /signup/:token     securesocial.controllers.Registration.handleSignUp(token) 
```

我有错误：

```
value securesocial is not a member of object controllers.routes 
```

我没有找到任何样品。

如何配置我的表单操作？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:01:59.327

鉴于 SecureSocial 项目视图，您应该使用

```
@securesocial.core.providers.utils.RoutesHelper.handleSignUp(token) 
```

在你自己的看法。

我没试过，但至少项目编译成功了。

# android - Android - 上传到 Dropbox

> ID：14843820
> 
> 赞同：2
> 
> 时间：2013-02-12T23:28:51.890
> 
> 标签：android, dropbox-api

我在这里错过了什么吗？我的代码基于此代码启动 NullPointerException 以上传到 Dropbox。

```
File file = new File(mFileMag.getCurrentDir() +"/"+ mSelectedListItem);
System.out.println(file);
inputStream = new FileInputStream(file);
System.out.println(inputStream);
Entry newEntry = mDBApi.putFile("/" + mSelectedListItem, inputStream,
        file.length(), null, null); 
System.out.println(newEntry); 
```

system.out 命令的结果看起来没问题。inputStream 变量输出“java.io.FileInputStream@44ecd668”，我对此有点困惑，但文件变量的系统输出显示正确的路径和文件名。nullPointerException 似乎来自对我来说零意义的 newEntry 变量的设置。Eclipse 将代码显示为语法正确。这个dropbox废话让我死了。

@BenHolland——如果我将路径硬编码如下——

```
 case D_MENU_SEND:

            // Uploading content.
            FileInputStream inputStream = null;
            try {
                //File file = new File(mFileMag.getCurrentDir() +"/"+ mSelectedListItem);
                File file = new File("/sdcard0/DCIM/100ANDRO/deploy.json");
                System.out.println(file);
                inputStream = new FileInputStream(file);
                System.out.println(inputStream);
                Entry newEntry = mDBApi.putFile("/Dropbox/", inputStream,
                        file.length(), null, null); 
                System.out.println(newEntry);

                Log.i("DbExampleLog", "The uploaded file's rev is: " + newEntry.rev);
            } catch (DropboxUnlinkedException e) {
                // User has unlinked, ask them to link again here.
                Log.e("DbExampleLog", "User has unlinked.");
            } catch (DropboxException e) {
                Log.e("DbExampleLog", "Something went wrong while uploading.");
            } catch (FileNotFoundException e) {
                Log.e("DbExampleLog", "File not found.");
            } finally {
                if (inputStream != null) {
                    try {
                        inputStream.close();
                    } catch (IOException e) {}
                }
            } 
```

这只是在 logcat 中生成一个“找不到文件”，这当然来自 catch (FileNotFoundException)。但是我没有收到 NullPointerException。如果您在代码顶部看到 - case 语句 - 此代码在上下文菜单单击后运行。

_____________________________________更新代码________________________________________

```
 // Uploading content.
        FileInputStream inputStream = null;

        File upfile = new File(mFileMag.getCurrentDir() + "/" + mSelectedListItem);
        try {
            inputStream = new FileInputStream(upfile);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
        System.out.println(upfile);
        System.out.println(inputStream);

        try {
            Entry upEntry = mDBApi.putFile("/test.rar", inputStream,upfile.length(), null, null);
            System.out.println(upEntry);
        } catch (DropboxException e) {
            e.printStackTrace();
        } 
```

因此，我已将代码更新为此。我是否对路径进行硬编码似乎无关紧要。即使我这样做了，Entry upEntry 行也会导致 NullPointerException。我不知所措。我根本看不到任何会导致这种情况的东西。

________________________________来自 nullPointerException 的堆栈跟踪_____________

```
02-14 13:28:07.370: W/dalvikvm(311): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
02-14 13:28:07.380: E/AndroidRuntime(311): FATAL EXCEPTION: main
02-14 13:28:07.380: E/AndroidRuntime(311): java.lang.NullPointerException
02-14 13:28:07.380: E/AndroidRuntime(311):  at com.stavox.zircon.Main.onContextItemSelected(Main.java:722)
02-14 13:28:07.380: E/AndroidRuntime(311):  at android.app.Activity.onMenuItemSelected(Activity.java:2199)
02-14 13:28:07.380: E/AndroidRuntime(311):  at com.android.internal.policy.impl.PhoneWindow$ContextMenuCallback.onMenuItemSelected(PhoneWindow.java:2744)
02-14 13:28:07.380: E/AndroidRuntime(311):  at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:143)
02-14 13:28:07.380: E/AndroidRuntime(311):  at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:855)
02-14 13:28:07.380: E/AndroidRuntime(311):  at com.android.internal.view.menu.MenuDialogHelper.onClick(MenuDialogHelper.java:137)
02-14 13:28:07.380: E/AndroidRuntime(311):  at com.android.internal.app.AlertController$AlertParams$3.onItemClick(AlertController.java:874)
02-14 13:28:07.380: E/AndroidRuntime(311):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
02-14 13:28:07.380: E/AndroidRuntime(311):  at android.widget.ListView.performItemClick(ListView.java:3382)
02-14 13:28:07.380: E/AndroidRuntime(311):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
02-14 13:28:07.380: E/AndroidRuntime(311):  at android.os.Handler.handleCallback(Handler.java:587)
02-14 13:28:07.380: E/AndroidRuntime(311):  at android.os.Handler.dispatchMessage(Handler.java:92)
02-14 13:28:07.380: E/AndroidRuntime(311):  at android.os.Looper.loop(Looper.java:123)
02-14 13:28:07.380: E/AndroidRuntime(311):  at android.app.ActivityThread.main(ActivityThread.java:4627)
02-14 13:28:07.380: E/AndroidRuntime(311):  at java.lang.reflect.Method.invokeNative(Native Method)
02-14 13:28:07.380: E/AndroidRuntime(311):  at java.lang.reflect.Method.invoke(Method.java:521)
02-14 13:28:07.380: E/AndroidRuntime(311):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-14 13:28:07.380: E/AndroidRuntime(311):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-14 13:28:07.380: E/AndroidRuntime(311):  at dalvik.system.NativeStart.main(Native Method) 
```

当我单击“发送到 Dropbox”时，会出现堆栈跟踪。我认为如果我分解整个过程，它可能会让别人更容易提供帮助。

1.  应用程序启动到列表视图 - 它是一个文件管理器应用程序 - main.java
2.  用户单击启动保管箱授权的菜单上的按钮 - 该按钮加载 DropboxfileuploadActivity.java - 这就是完成身份验证的地方 - 这在身份验证后将它们返回到 main.java。
3.  用户导航到他们想要上传的文件
4.  用户长按所述文件并出现上下文菜单 - 这也由 Main.java 处理。
5.  上下文菜单包含“发送到 Dropbox”项。单击时，它指向包含我们在此处查看的代码的 case 语句。这就是产生 NullPointerException 的原因。如您所见，第 722 行是违规行。那条线是

    ```
     Entry upEntry = mDBApi.putFile("/test.rar", inputStream,upfile.length(), null, null); 
    ```

    _____________________________________________解决方案_______________________________________

所以这就是我最终解决这个问题的方法：

以前我在两个文件之间工作。我在 Main.java 中有 Dropbox authcode，在 Dropboxfileuploadactivity.java 中有实际的上传代码。无论我尝试什么，我都无法以这种方式上传。我每次都收到 NullPointerException。我最初将其归咎于变量，然后无法与 Dropbox 方法一起使用。经过几天的尝试，最后，将身份验证代码和上传代码一起移动到 Main.java 解决了我的问题。不再有 NullPointerExceptions。奇怪，但它奏效了。变量工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T21:11:15.400

所以这就是我最终为解决这个问题所做的事情：

以前我在两个文件之间工作。我在 Main.java 中有 Dropbox authcode，在 Dropboxfileuploadactivity.java 中有实际的上传代码。无论我尝试什么，我都无法以这种方式上传。我每次都收到 NullPointerException。我最初将其归咎于变量，然后无法与 Dropbox 方法一起使用。经过几天的尝试，最后，将身份验证代码和上传代码一起移动到 Main.java 解决了我的问题。不再有 NullPointerExceptions。奇怪，但它奏效了。变量工作正常。

# php - 我如何获取 .phtml 中的值并将它们传递给 Block

> ID：14843821
> 
> 赞同：2
> 
> 时间：2013-02-12T23:28:53.277
> 
> 标签：php, magento, magento-1.7

我正在尝试在文本框之间传递值，`template/report/grid.phtml`并且`Mage_Adminhtml_Block_Report_Grid` 我知道如何查看 .phtml 文件中的值，但是我如何从小`phtml`部件中获取用户输入的值并将其用于`Mage_Adminhtml_Block_Report_Grid`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:05:14.327

正如你所描述的那样，这是不可能的。

例如，当用户在 *.phtml 页面上以表单形式输入内容时，通常您会将他提交给某个控制器操作。然后您重新加载页面并将用户传送到其他（或相同）页面。

如果您想将他发送到同一页面并将新参数传递给您的块，请阅读此答案，它很好地解释了

[https://stackoverflow.com/a/4006908/1831858](https://stackoverflow.com/a/4006908/1831858)

# jquery - 为什么 .click 不起作用

> ID：14843822
> 
> 赞同：-1
> 
> 时间：2013-02-12T23:28:55.053
> 
> 标签：jquery

为什么这不起作用？

我以前用过这个数百万次。我错过了什么？

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $('span.link').click(function(){
                alert('lasdkfj');
            }); 
        });

        function moo() {
            alert('moo');
        }
    </script> 
```

有多个

```
 <span class="link">moo</span> 
```

已解决：我是个白痴，错误地输入了 src //ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js 应该是[http://ajax.googleapis.com/ajax/libs/ jquery/1.9.1/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-13T10:21:49.617

由于未正确加载 Jquery 插件而发生错误。试试这个链接

```
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

# java - 并发下的 JPA

> ID：14843825
> 
> 赞同：1
> 
> 时间：2013-02-12T23:29:03.870
> 
> 标签：java, multithreading, hibernate, jpa, thread-safety

我的应用程序使用休眠 JPA 连接 postgres DB，如果我只有 1 个线程将数据写入 DB，则需要永远完成写入，然后我使用 10 个线程，这会导致 DB 出现死锁问题。JPA 不应该自动处理线程控制吗？

这是我的休眠配置：

应用程序上下文.xml：

```
 <bean id="entityManagerFactory" class="javax.persistence.Persistence"
    factory-method="createEntityManagerFactory" destroy-method="close" scope="singleton">
    <constructor-arg value="${persistence_unit}" />
    <constructor-arg>
      <util:map>
        <entry key="javax.persistence.jdbc.url" value="${db_url}" />
        <entry key="javax.persistence.jdbc.user" value="${db_user}" />
        <entry key="javax.persistence.jdbc.password" value="${db_password}" />      

        <!-- Connection provider properties.-->
        <entry key="hibernate.c3p0.max_size" value="${hibernate_c3p0_max_size}" />
        <entry key="hibernate.c3p0.min_size" value="${hibernate_c3p0_min_size}" />
        <entry key="hibernate.c3p0.acquire_increment" value="${hibernate_c3p0_acquire_increment}" />
        <entry key="hibernate.c3p0.idle_test_period" value="${hibernate_c3p0_idle_test_period}" />
        <entry key="hibernate.c3p0.max_statements" value="${hibernate_c3p0_max_statements}" />
        <entry key="hibernate.c3p0.timeout" value="${hibernate_c3p0_timeout}" />

      </util:map>
    </constructor-arg>
  </bean> 
```

操作-config.properties：

```
hibernate_c3p0_max_size=100
hibernate_c3p0_min_size=1
hibernate_c3p0_acquire_increment=1
hibernate_c3p0_idle_test_period=60
hibernate_c3p0_max_statements=0
hibernate_c3p0_timeout=30
hibernate_max_fetch_depth=3
hibernate_generate_statistics=false 
```

使用多线程写入，出现以下错误：

```
2013-Feb-12 14:04:26.621    ERROR   o.h.u.JDBCExceptionReporter o.h.u.JDBCExceptionReporter,101 Batch entry 0 insert into TAGS (name, tagtype, id) values ('2135daa6-6d88-43aa-9a7d-cc5ee5735893', '1', '10004') was aborted.  Call getNextException to see the cause.
2013-Feb-12 14:04:26.621    WARN    o.h.u.JDBCExceptionReporter o.h.u.JDBCExceptionReporter,100 SQL Error: 0, SQLState: 23505
2013-Feb-12 14:04:26.622    ERROR   o.h.u.JDBCExceptionReporter o.h.u.JDBCExceptionReporter,101 ERROR: duplicate key value violates unique constraint "tags_name_key"
2013-Feb-12 14:04:26.627    ERROR   o.h.e.d.AbstractFlushingEventListener   o.h.e.d.AbstractFlushingEventListener,324   Could not synchronize database state with session
org.hibernate.exception.ConstraintViolationException: Could not execute JDBC batch update

...
Caused by: java.sql.BatchUpdateException: Batch entry 0 insert into TAGS (name, tagtype, id) values ('2135daa6-6d88-43aa-9a7d-cc5ee5735893', '1', '10004') was aborted.  Call getNextException to see the cause.

WARNING: com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector@412ad7b3 -- APPARENT DEADLOCK!!! Creating emergency threads for unassigned pending tasks!
Feb 12, 2013 2:05:13 PM com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector run
WARNING: com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector@412ad7b3 -- APPARENT DEADLOCK!!! Complete Status: 
    Managed Threads: 3
    Active Threads: 3
    Active Tasks: 
        com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@86fbfc2 (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#2)
        com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@60965de1 (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0)
        com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@2fed9051 (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#1)
    Pending Tasks: 
        com.mchange.v2.resourcepool.BasicResourcePool$1RefurbishCheckinResourceTask@159dce6c 
```

# .net - .Net 实例函数指针

> ID：14843833
> 
> 赞同：2
> 
> 时间：2013-02-12T23:29:44.463
> 
> 标签：.net, vb.net, reflection, delegates

当我还没有声明实例时，我可以创建一个指向实例函数的指针吗？现在我正在使用反射来调用我的方法，但似乎使用某种委托可能会更容易。我就是想不通。我将调用的方法将始终返回相同的类型并且没有参数。

这是一些示例代码来说明我正在尝试做的事情：

```
Private Shared Function A() As Object

    Return Lauch(????) ' should call FunctionA of the instance (undeclared here)

End Function

Private Shared Function B() As Object

    Return Lauch(????) ' should call FunctionB of the instance (undeclared here)

End Function

Private Shared Function Lauch(Of T)(ByVal instanceFunc As Func(Of T)) As Object

    ' long and repetitive operations that I don't want to repeat in function A and B

    Dim myInstance As New MyClass()

    Return myInstance.instanceFunc()

End Function 
```

现在我正在做类似以下的事情并且它有效，但我觉得应该有更好的方法：

```
Private Shared Function A() As Object

    Return Lauch("FunctionA")

End Function

Private Shared Function B() As Object

    Return Lauch("FunctionB")

End Function

Private Shared Function Lauch(ByVal instanceFunc As String) As Object

    ' long and repetitive operations that I don't want to repeat in function A and B

    Dim myInstance As New MyClass()

    Return myInstance.GetType().GetMethod(instanceFunc).Invoke(myInstance, Nothing))

End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:50:17.030

那这个呢？

```
Private Shared Function A() As Object
    Return Lauch(Function(x) x.A())
End Function

Private Shared Function Lauch(ByVal instanceFunc As Func(Of CustomClass, Object)) As Object
    ' long and repetitive operations
    Dim myInstance As New CustomClass()
    Return instanceFunc(myInstance)
End Function 
```

基本上，您定义确定函数结果的`Lauch`函数。这是一个接受 a`CustomClass`并返回a 的函数`Object`。在`A`方法中定义此函数以返回实例`A`函数的结果。

# php - 使用 PDO 将行插入 PGSQL

> ID：14843844
> 
> 赞同：1
> 
> 时间：2013-02-12T23:30:35.660
> 
> 标签：php, postgresql, pdo, prepared-statement

我无法让 php postgre`new_address`使用以下代码从 php 数组中插入一行：

```
 $customer_id = '2319';
    $use_frequency = 1;

    $sth = $dbh->prepare("
    INSERT INTO address 
            ('storeid', 
             'classtypeid', 
             'modifiedbyuser', 
             'modifiedbycomputer', 
             'modifieddate', 
             'seqid', 
             'issystem', 
             'isactive', 
             'streetaddress1', 
             'streetaddress2', 
             'city', 
             'state', 
             'county', 
             'postalcode', 
             'country', 
             'formattedtext', 
             'taxclassid', 
             'isvalidated', 
             'validatedaddress', 
             'hasvalidationerror', 
             'validationerror', 
             'customer_id', 
             'use_frequency') 
   VALUES   ( NULL, 
              NULL, 
              NULL, 
              NULL, 
              NULL, 
              NULL, 
              NULL, 
              NULL, 
             :address_1, 
             :address_2, 
             :city, 
             :state, 
              NULL, 
             :zip, 
             :country, 
             :formatted_text, 
              NULL, 
              NULL, 
              NULL, 
              NULL, 
              NULL, 
             :customer_id, 
             :use_frequency");

$sth->execute(array(
    ':address_1' => $new_address['address_1'],
    ':address_2' => $new_address['address_2'],
    ':city' => $new_address['city'],
    ':state' => $new_address['state'],
    ':zip' => $new_address['zip'],
    ':country' =>$new_address['country'],
    ':formatted_text' => $formatted_text,
    ':customer_id' => $customer_id, 
    ':use_frequency' => $use_frequency
    );           

$sth->execute(); 
```

表中的最后一列是`id`，`serial`所以我省略了它，认为它会自动递增，但如果我错了，请告诉我。

我收到错误消息：

> 致命错误：未捕获的异常 'PDOException' 带有消息 'SQLSTATE[42601]：语法错误：7 错误：在“'storeid'”或附近出现语法错误 LINE 3: ('storeid', ^' in

`print_r($new_address);`向我展示：

```
Array (
[0] => stdClass Object (
[customer_id] => 9319
)
[1] => stdClass Object (
[address_1] => 1515 example st
)
[2] => stdClass Object (
[address_2] => box 1
)
[3] => stdClass Object (
[city] => town
)
[4] => stdClass Object (
[state] => ST
)
[5] => stdClass Object (
[zip] => 12345
)
[6] => stdClass Object (
[country] => US
)
) 
```

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:37:45.980

根据[4.1。词法结构](http://www.postgresql.org/docs/9.0/static/sql-syntax-lexical.html)，必须用双引号转义列名`"`

> 还有第二种标识符：分隔标识符或引用标识符。它是通过用双引号 (") 将任意字符序列括起来而形成的。分隔标识符始终是标识符，而不是关键字。因此“select”可以用于引用名为“select”的列或表，而未加引号的选择将被视为关键字，因此在需要表或列名的地方使用时会引发解析错误。

```
INSERT INTO address 
        ("storeid", 
         "classtypeid", 
         ... 
```

此外，如果您将列的默认值设置为`NULL`，则可以从列列表中省略它们并仅使用您真正需要的那些

```
insert into address
    ("streetaddress1", 
     "streetaddress2", 
     "city", 
     "state", 
     ...)
values (:address_1, 
       :address_2, 
       :city, 
       :state, 
       ...) 
```

根据您的评论，您必须修改`$new_address`数组。它是按数字而*不是*按名称索引的。

如果您可以将 JSON 更改为

```
{ "customer_id": 9319,
  "address_1": "1515 example trail",
  "address_2": "box 1",
  "city": "town city",
  "state": "MI",
  "zip": "12345",
  "country": "US" } 
```

您可以使用

```
$new_address = json_decode($json, true); 
```

得到一个关联数组。

如果无法更改 JSON，则必须将其映射到关联数组

```
$json = json_decode('[ { "customer_id": 9319 }, { "address_1": "1515 example trail" }, { "address_2": "box 1" }, { "city": "town city" }, { "state": "MI" }, { "zip": "12345" }, { "country": "US" } ]');

foreach ($json as $element) {
    foreach ($element as $key => $val) {
        $new_address[$key] = $val;
    }
} 
```

# ios - （目标C）如果只在自己的类中使用，是否需要在头文件（.h）中声明方法和变量？

> ID：14843845
> 
> 赞同：4
> 
> 时间：2013-02-12T23:30:34.763
> 
> 标签：ios, objective-c

我查看了许多代码示例，发现人们通常在头文件 (.h) 中声明所有方法和全局变量。有必要吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T23:45:46.500

公开使用的方法（即由实现该方法的类以外的类）和（真正的）全局变量确实应该在头文件中声明。重点是您可以在另一个源代码文件中导入头文件，以访问那里声明的功能。

本来是私有的方法——仅作为类的内部实现的一部分被调用——可以在[类扩展](http://www.friday.com/bbum/2009/09/11/class-extensions-explained/)中声明。使用最新版本的 LLVM/Xcode，您实际上甚至不需要为非 @property 方法执行此操作。您可以简单地实现它们，编译器将足够聪明，可以在从同一类实现中的其他方法调用它们时看到它们在那里。

如果您需要显式定义私有 ivar（现在很少见），您可以在紧接在`@implementation`or之后的大括号括起来的部分中执行此操作`@interface ClassName ()`。

简而言之：声明需要从 .h 文件中的其他类访问的方法、函数和变量。私有方法和变量应该通过仅在 .m 文件中声明来保持私有。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T23:49:31.430

在最新版本的 SDK 中，您不必为类声明仅在内部使用的方法，这样可以减少 .h 文件中的混乱情况。通常，我放入 .h 中的唯一方法、属性和 ivars 是我知道其他类需要访问的那些。这样一来，我就不会犯错误，即从外部访问应该仅限于内部的属性。其余的，我在 .m 文件中添加了一个类扩展，如下所示：

```
#import "MyClass.h"

@interface MyClass ()
{
    int _myIvar; // I rarely use these anymore,
                 // but if you want to use them, they go here.
}

@property (strong, nonatomic) NSArray *someArray;
@property (strong, nonatomic) NSDictionary *anotherProperty

@end

@implementation MyClass

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T23:32:07.880

头文件对编译器根本没有特殊意义。当您编写#import 时，预处理器只是将它们复制粘贴到实现文件中。

# three.js - 可视化 Raycaster

> ID：14843846
> 
> 赞同：8
> 
> 时间：2013-02-12T23:30:39.727
> 
> 标签：three.js, raycasting

我正在尝试通过使用光线投射来检测交叉点。我目前的问题是我不确定我的光线投射是否瞄准了所需的方向。所以我的一般问题是：有没有办法让光线投射可见？如果是这样：它是如何完成的？这对我有很大帮助。

迈克尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-06-06T09:52:29.820

这是另一种显示光线的方法：

```
scene.add(new THREE.ArrowHelper(raycaster.ray.direction, raycaster.ray.origin, 300, 0xff0000) ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T23:50:35.570

你为什么不从你的原点画一条线到射线的方向。

更具体地说（使用 r83）：

```
 // Draw a line from pointA in the given direction at distance 100
    var pointA = new THREE.Vector3( 0, 0, 0 );
    var direction = new THREE.Vector3( 10, 0, 0 );
    direction.normalize();

    var distance = 100; // at what distance to determine pointB

    var pointB = new THREE.Vector3();
    pointB.addVectors ( pointA, direction.multiplyScalar( distance ) );

    var geometry = new THREE.Geometry();
    geometry.vertices.push( pointA );
    geometry.vertices.push( pointB );
    var material = new THREE.LineBasicMaterial( { color : 0xff0000 } );
    var line = new THREE.Line( geometry, material );
    scene.add( line ); 
```

[代码笔在： https](https://codepen.io/anon/pen/evNqGy) ://codepen.io/anon/pen/evNqGy

# xcode - 在 iOS 6 上发布但在 iOS 5 中未发布的对象

> ID：14843847
> 
> 赞同：1
> 
> 时间：2013-02-12T23:30:50.513
> 
> 标签：xcode, ios5, memory-management, ios6

在我的第一代测试时，我遇到了一个非常奇怪的问题。iPad（运行 iOS 5）。

我有一个 UIView 用作属性（保留）。我 nil 父视图的 dealloc 方法中的属性。很基本的东西。它在我运行 iOS 6 的 iPad 3 上完美运行，但没有在我的第一代发布。

任何想法可能会发生什么？

我没有使用ARC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T02:51:21.043

如果你保留它，你必须释放它。你不能只 nil 实例变量。

因此，如果您的财产如下所示：

```
@property (nonatomic, retain) UIView *myView; 
```

你是 dealloc 要么看起来像这样：

```
- (void)dealloc
{
    [myView release], myView = nil;
    [super dealloc];
} 
```

或这个：

```
- (void)dealloc
{
    [self setMyView:nil];
    [super dealloc];
} 
```

或这个：

```
- (void)dealloc
{
    self.myView = nil;
    [super dealloc];
} 
```

并且您的财产将适当地被释放 - 除非有其他东西保留它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T19:56:36.813

所以我想通了。这似乎是 iOS 6 SDK 中的一个错误，或者我只是不明白。我有一个 UIViewController，它通过*presentViewController:animated:completion:*呈现另一个 vc：-如果我关闭呈现的 vc，它就会释放，随后所有子视图都被删除，一切都很好。

但是，如果在呈现的 vc 显示时，我删除/销毁父 vc，呈现的 vc 被释放，但是它的子视图没有被告知 removeFromSuperview；这不会显示为仪器中的泄漏，**但**它确实阻止了子视图的释放。

这在 iOS 6 上不会发生，因此我怀疑这是 iOS 5 中的一个错误。一切都像在 iOS 6 上所期望的那样释放/解除分配。

如果有人对此有解释或更好的理解，我很乐意将答案奖励给他们而不是我自己。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T07:05:08.277

当视图控制器被解除分配时，视图控制器不负责从父视图中删除其视图。视图控制器只负责释放它自己对它的引用。

例如：您可以创建一个视图控制器，请求它的视图，然后将该视图添加到另一个视图并丢弃该视图控制器。在这种情况下，您只是将视图控制器用作视图构建器。

我不确定为什么 iOS 6 中的行为不同，但很想知道。

# matplotlib - FuncAnimation 不刷新

> ID：14843848
> 
> 赞同：1
> 
> 时间：2013-02-12T23:30:53.183
> 
> 标签：matplotlib

我在使用 FuncAnimation 时遇到问题，我使用的是稍微修改过的示例[http://matplotlib.org/examples/animation/basic_example.html](http://matplotlib.org/examples/animation/basic_example.html)

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.animation as animation

def update_line(num, data, line):
    data.pop(0)
    data.append(np.random.random())
    line.set_ydata(data)

    return line,

fig1 = plt.figure()
data = [0.0 for i in xrange(100)]
l, = plt.plot(data, 'r-')

plt.ylim(-1, 1)
line_ani = animation.FuncAnimation(fig1, update_line, 25, fargs=(data, l), interval=50, blit=True)

plt.show() 
```

问题是第一行（由 update_line 更新）停留在后台。如果我调整窗口大小（单击窗口的一角并移动鼠标）。第一行消失了，但现在调整大小后的第一行保留在后台。

这是正常的，还是我做错了什么。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:12:33.063

如果您不太担心速度，请删除`blit=True`它，它应该可以工作。

Blitting 是一种通过仅重新绘制已更改的图形位（而不是所有内容）来节省时间的方法，但很容易弄乱。如果您不包括`blit=True`所有艺术家，则每次都会重新绘制。

我建议阅读[python matplotlib blit 到图形的轴或边？](https://stackoverflow.com/questions/14844223/python-matplotlib-blit-to-axes-or-sides-of-the-figure)和[动画 Matplotlib 面板 - blit 留下旧帧](https://stackoverflow.com/questions/6286731/animating-matplotlib-panel-blit-leaves-old-frames-behind)。

# c# - C# 中 OAuth 随机数的线程安全随机数/字符串生成器

> ID：14843849
> 
> 赞同：2
> 
> 时间：2013-02-12T23:30:57.960
> 
> 标签：c#, .net-3.5, ssis, script-component

我一直在使用在我的 SSIS 2008 C# 脚本组件 (.NET 3.5) 中找到的[OAuthBase类。](http://oauth.googlecode.com/svn/code/csharp/OAuthBase.cs)

它一直工作正常，但最近我遇到了一个问题，如果我在同一个数据流任务中执行多个脚本组件，使用上述 OAuthBase 类中的 GenerateNonce 方法，我最终会得到相同的随机数（随机数）。

这是生成随机数的 OAuthBase 类的摘录：

```
using System;
using System.Security.Cryptography;
using System.Collections.Generic;
using System.Text;
using System.Web;

namespace OAuth {
 public class OAuthBase {

    ....snip......

    protected Random random = new Random();

    public virtual string GenerateNonce() {
        // Just a simple implementation of a random number between 123400 and 9999999
        return random.Next(123400, 9999999).ToString();
    }
  }
} 
```

在每个脚本组件中，我使用这个 C# 代码来启动类并生成一个随机数：

```
 OAuthBase oAuth = new OAuthBase();
        string nonce = oAuth.GenerateNonce(); 
```

根据我的搜索，我认为这与它不是线程安全的有关吗？我不完全确定。

我只能在 SSIS 2008 中运行 .NET 3.5，所以我知道 .NET 4.0 中引入的一些更新的东西我不能使用。

关于如何修改 OAuthBase 类和/或我的 C# 脚本组件代码的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T23:49:54.207

如果您`OAuthBase`同时创建多个实例，则单个实例完全有可能具有具有`Random`相同种子的实例，默认情况下，种子是当前滴答计数。所以这意味着可能的各个实例`Random`是用相同的种子创建的。尝试使`Random`实例静态。但由于[`Random`不是线程安全](https://stackoverflow.com/questions/3049467/is-c-sharp-random-number-generator-thread-safe)的。您需要保护对它的访问。

```
private static readonly Random random = new Random();
private static readonly object randLock = new object();

public virtual string GenerateNonce()
{
    lock (randLock)
    {
        // Just a simple implementation of a random number between 123400 and 9999999
        return random.Next(123400, 9999999).ToString();
    }
}

// since you had protected access on random, I'm assuming sub classes want to use it
// so you'll need to provide them with access to it
protected int NextRandom(...)
{
    lock (randLock)
    {
         random.Next(...);
    }
} 
```

但正如其他人所建议的那样，由于您没有强大的加密随机源，您可能希望寻找其他方法来产生您的价值。

```
// RNGCryptoServiceProvider is thread safe in .NET 3.5 and above
// .NET 3.0 and below will need locking to protect access
private static readonly RNGCryptoServiceProvider random =
    new RNGCryptoServiceProvider();

public /*virtual*/ byte[] GenerateNonce(int length)
{
    // a default length could be specified instead of being parameterized
    var data = new byte[length];
    random.GetNonZeroBytes(data);
    return data;
}
// or
public /*virtual*/ string GenerateNonce(int length)
{
    var data = new byte[length];
    random.GetNonZeroBytes(data);        
    return Convert.ToBase64String(data);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T23:45:00.480

这个随机数的可能值非常少。即使是线程错误，它也不是唯一的。使用加密的强随机源 ( [http://msdn.microsoft.com/en-us/library/system.security.cryptography.rngcryptoserviceprovider.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rngcryptoserviceprovider.aspx) )，输出 16 个字节和 base64 它们。这可以解决所有这些问题。

# android - 如何将异步任务的结果返回到android中的活动？

> ID：14843850
> 
> 赞同：1
> 
> 时间：2013-02-12T23:30:59.430
> 
> 标签：android, android-asynctask

我创建了一个登录活动，它使用另一个类 - LoginService，它是用于网络通信的 AsyncTask。

```
 public void onClick(View view) {

            if (editTextPassword.getText().toString() != null & editTextUsername.getText().toString() != null){

                new LoginService(editTextUsername.getText().toString(), editTextPassword.getText().toString()).execute();

                if(loginSuccess!=false){
                //Used to move to the Cases Activity
                Intent casesActivity = new Intent(getApplicationContext(), CasesActivity.class);
                startActivity(casesActivity);
                }else{
                    Toast.makeText(getApplicationContext(),"Incorrect Details", Toast.LENGTH_LONG).show();
                }
             }
            else{
                //Display Toaster for error
                Toast.makeText(getApplicationContext(),"Please enter your details", Toast.LENGTH_LONG).show();
            }
        } 
```

在 LoginService 完成执行之前，活动已经通过 Intent 变量移动到另一个活动。我不懂为什么。LoginService 的想法是验证用户的凭据。如果它返回 true，那么它可以切换到其他活动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T23:34:59.673

您不想以这种方式执行此操作。`.execute()`它将尽快开始，但不能保证（也许不保证）*它*会及时将您的`loginSuccess`价值归还给您。

之后的所有内容`new LoginService(...).execute();`都应移至`onPostExecute()`：

```
private Context mContext = null;
public void setContext(Context context) {
    mContext = context;
}
@Override
protected void onPostExecute(Void result) {
    if(loginSuccess!=false){
        //Used to move to the Cases Activity
        Intent casesActivity = new Intent(mContext, CasesActivity.class);
        startActivity(casesActivity);
    }else{
        Toast.makeText(mContext,"Incorrect Details", Toast.LENGTH_LONG).show();
    }
} 
```

然后，您必须`setContext()`像这样调用：

```
LoginService service = new LoginService(editTextUsername.getText().toString(), editTextPassword.getText().toString());
service.setContext(getApplicationContext());
service.execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T23:33:14.537

你应该搬家

```
Intent casesActivity = new Intent(getApplicationContext(), CasesActivity.class);
            startActivity(casesActivity);
            }else{
                Toast.makeText(getApplicationContext(),"Incorrect Details",     Toast.LENGTH_LONG).show();
            } 
```

进入 LoginService 的 onPostExecute。

这样你就可以确定 asynctask 已经完成了它的工作。

在任何情况下，其他活动开始都很奇怪，这可能是因为 loginSuccess 的旧分配为 true

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T23:36:40.033

> 如何从异步任务返回结果？

捕获`AsyncTask`from的结果`onPostExecute()`。

```
@Override
public void onPostExecute(Boolean result)
{
    boolean loginSuccess = result;

    if(loginSuccess!=false) { 

         Intent casesActivity = new Intent(getApplicationContext(), CasesActivity.class);
         startActivity(casesActivity);
    }
    else {

        Toast.makeText(getApplicationContext(),"Incorrect Details", Toast.LENGTH_LONG).show();
    }

} 
```

AsyncTask 中结果的数据类型取决于第三个 Type 参数。

有时我们认为`execute()`方法`AsyncTask`会返回一个错误的结果。它将返回一个`AsyncTask`自身

# javascript - 正则表达式交换注释的 HTML 进出

> ID：14843854
> 
> 赞同：1
> 
> 时间：2013-02-12T23:31:23.397
> 
> 标签：javascript, html, regex

我对几个我几乎早点开始工作的正则表达式有点麻烦。我基本上需要从特定`<span>`标签的任一侧删除 HTML 注释。

这是我到目前为止所拥有的：

```
.replace(/<!--<span aria-hidden=\"true\" data-icon=\"e\"/,
         '<span aria-hidden="true" data-icon="e"')

.replace(/onclick=\"deletetodo(this)\"><\/span>-->/, 
         'onclick="deletetodo(this)"></span>'); 
```

也许我已经盯着这个太久了，我无法发现一个明显的错误，但如果有人知道为什么这不会摆脱`<!--`和`-->`标签，你会让我头疼！

谢谢。

[编辑] 多行仅用于 SO，在代码中它们位于单行上。[/编辑]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:41:15.683

当括号是字符串的一部分时，括号应在正则表达式中转义；你应该试试：

```
.replace(/onclick=\"deletetodo\(this\)\"><\/span>-->/, ... 
```

代替

```
.replace(/onclick=\"deletetodo(this)\"><\/span>-->/, ... 
```

# java - 如何将结果集从 MSSQL 复制到 MySQL？也许是开放查询？

> ID：14843855
> 
> 赞同：1
> 
> 时间：2013-02-12T23:31:28.907
> 
> 标签：java, mysql, sql, sql-server

我需要经常将 MSSQL 中单个表的最后一行复制到 MySQL 表中。我创建了一个 java 脚本并且一切正常，但我认为它可以提高性能。我已经使用 MySQL ODBC 5.1 Driver 连接器复制表架构并导入数据，将其添加到 MSSQL 中并使用 Openquery。可以直接在java上使用吗？这是处理此任务的最佳方法是什么？提前致谢。卢卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:33:18.473

[MySQL Workbench](http://dev.mysql.com/downloads/workbench/)有一个实用程序来执行此操作。

在程序中，连接到您的 MySQL 数据库，然后选择数据库 -> 迁移。

〜基督徒

# php - 如何修复 Heroku imagecreatefromjpeg()

> ID：14843862
> 
> 赞同：5
> 
> 时间：2013-02-12T23:31:59.353
> 
> 标签：php, javascript, function, heroku, undefined

heroku 向我报告一个错误：调用未定义函数 imagecreatefromjpeg() ..在第 177 行，其中第 177 行是： case 'jpg': case 'jpeg': $image_data = imagecreatefromjpeg($src_image); 休息;

我认为heroku不支持jpeg之类的，在这种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-11-20T17:08:06.573

在 Heroku 上，GD 是一个“共享”扩展，您可以在 composer.json 中启用它。不需要自定义 buildpack，只需在您的 ext-gd 行中添加`composer.json`：

```
{
  "require": {
    "ext-gd": "*"
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T10:05:21.763

您需要使用带有 imagick 或 gd 编译的自定义 buildpack。

我不相信 Heroku 的官方 PHP buildpack 的最新版本对此有支持，但我也为此创建了自己的 buildpack。

请参阅[https://github.com/winglian/heroku-buildpack-php](https://github.com/winglian/heroku-buildpack-php)（此版本使用 PHP-FPM 在 5.4.11 上构建，但您可以使用 mod_php 选择较旧的标记分支以支持 5.3。）

# quartz.net - 从 Quartz.Net 1.x 迁移到 2.x 时，我是否必须更改调度程序的配置和启动方式？

> ID：14843863
> 
> 赞同：2
> 
> 时间：2013-02-12T23:32:05.120
> 
> 标签：quartz.net, quartz.net-2.0

以下是我在 1.x 中配置和启动 Quartz.Net 调度程序的方法：

```
properties["quartz.scheduler.instanceName"] = instanceName;
properties["quartz.scheduler.instanceId"] = "AUTO";
properties["quartz.threadPool.type"] = "Quartz.Simpl.SimpleThreadPool, Quartz";
properties["quartz.threadPool.threadCount"] = threadCount;
properties["quartz.threadPool.threadPriority"] = "Normal";
properties["quartz.jobStore.misfireThreshold"] = "60000";
properties["quartz.jobStore.type"] = "Quartz.Impl.AdoJobStore.JobStoreTX, Quartz";
properties["quartz.jobStore.useProperties"] = "true";
properties["quartz.jobStore.dataSource"] = "default";
properties["quartz.jobStore.tablePrefix"] = tablePrefix;
properties["quartz.jobStore.clustered"] = "false";
properties["quartz.jobStore.lockHandler.type"] = "Quartz.Impl.AdoJobStore.UpdateLockRowSemaphore, Quartz";
properties["quartz.dataSource.default.connectionString"] = connectionString;
properties["quartz.dataSource.default.provider"] = "SqlServer-20";
schedFact = new StdSchedulerFactory(properties);
svcScheduler = schedFact.GetScheduler();
svcScheduler.Start(); 
```

迁移到 2.x 后，我是否必须在这里更改一些内容？

最重要的是仍然是`quartz.dataSource.default.provider`SQL Server 还是`SqlServer-20`那里有什么改变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:42:47.487

Quartz.net 2.x 的配置并没有真正改变。[您可以在这里](http://jvilalta.blogspot.co.uk/2011/03/how-does-quartznet-configuration-work.html)
找到一些有用的信息。

`SqlServer-20`是的，如果你想使用 MS Sql Server ，你仍然必须使用。

有关 db 提供程序的完整列表，请查看[此处](https://github.com/quartznet/quartznet/blob/master/src/Quartz/Impl/AdoJobStore/Common/dbproviders.properties)。

# silverlight - Caliburn.Micro HelloScreens 示例构建错误

> ID：14843868
> 
> 赞同：2
> 
> 时间：2013-02-12T23:32:25.197
> 
> 标签：silverlight, caliburn.micro

[当我尝试从http://caliburnmicro.codeplex.com](http://caliburnmicro.codeplex.com)构建 Caliburn.Micro 示例项目“Caliburn.Micro.HelloScreens”时出现此错误

错误：类型“TDocument”必须是引用类型才能将其用作泛型类型或方法“Caliburn.Micro.Conductor”中的参数“T”

TDocument 在类 DocumentWorkspace 中定义为

```
public abstract class DocumentWorkspace<TDocument> : Conductor<TDocument>.Collection.OneActive, IDocumentWorkspace where TDocument : INotifyPropertyChanged, IDeactivate, IHaveDisplayName 
{ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-09T22:10:52.607

抽象中缺少**class**关键字，以告诉 DocumentWorkspace TDocument 是派生对象类。尝试

```
public abstract class DocumentWorkspace<TDocument> : Conductor<TDocument>.Collection.OneActive, IDocumentWorkspace where TDocument : class, INotifyPropertyChanged, IDeactivate, IHaveDisplayName { } 
```

# java - 需要递归处理数组，传递数据时遇到问题，java

> ID：14843869
> 
> 赞同：0
> 
> 时间：2013-02-12T23:32:27.957
> 
> 标签：java, arrays, methods, recursion

好的，我在这里遇到了一个真正的初学者错误，但我想不出我需要做什么。我有一个数组 permArray，我正在递归地填充可能的排列。我有一个公共方法可以准备好参数，然后我在私有方法中处理数组，该方法调用自身来处理越来越小的部分。

我遇到的问题是如何将完成的数组传递回公共方法。我是否会在每次完成递归时返回数组（在我将最后一个元素放置在每个部分中，其中部分大小为 1 之后）。

哦，还有，这是练习，不是作业。

```
//todo:
//need to determine what is wrong with my array of linked lists
package wordchains;

import java.util.ArrayList;
import java.util.LinkedList;
import java.util.List;
import java.util.Scanner;
import java.util.StringTokenizer;
import javax.xml.soap.Node;

/**
 *
 * @author Samuel French
 */
public class WordChains {

public static void main(String[] args) {
    //variables
    int numWords = -1; //This will hold the number of words the user is inputting
    String userInput; //holds the user input to be broken up into a string array

    //Get the user's input, 0 is the quit value
    Scanner sc = new Scanner(System.in);
    System.out.print("Enter number of words: ");
    numWords = sc.nextInt();
    System.out.println(">");
    sc.nextLine();
    userInput = sc.nextLine();
    String[] inputWords = userInput.split("\\s+");
    int numElements = inputWords.length;
    int numOfPerms = numOfPerms(numElements);

    //We will start by checking the last letter of the first word
    char cTest;
    int wordChecking = 0;

    int[][] permArray = genPerms(numElements, numOfPerms);

    for (int col = 0; col < numOfPerms; col++) {
        System.out.println();
        for (int row = 0; row < numElements; row++) {
            System.out.print(permArray[col][row] + " ");
        }

    }

}

public static int numOfPerms(int numElements) {
    int numOfPerms = numElements;
    numElements--;
    while (numElements > 0) {
        numOfPerms = numOfPerms * numElements;
        System.out.println(numOfPerms);
        numElements--;
    }
    return numOfPerms;
}

public static int[][] genPerms(int numElements, int totPerms) {
    int permArray[][] = new int[totPerms][numElements];
    //either do it like this or create an array of head nodes
    List<LinkedList<Integer>> elementsLeftList = new ArrayList<LinkedList<Integer>>();
    LinkedList tempList = new LinkedList();
    for (int x = 0; x < numElements; x++) {
        tempList.addLast(x);
    }

    for (int x = 0; x < totPerms; x++) {
        elementsLeftList.add((LinkedList<Integer>) tempList.clone());
    }

    return privateGenPerms(permArray,elementsLeftList,totPerms,0,0,totPerms);
}

private static void privateGenPerms(int[][] permArray, List<LinkedList<Integer>> elementsLeftList, int totalPermutations, int elementPlacing, int sectionBegin, int sectionSize) {
    //variables-

//totalPermutations - the total number of permutations in the whole problem

//elementPlacing - the element currently being placed's position, corresponds to the rows of permArray
//elementPlacingIndex - the number of times the element currently being placed has been placed
//sectionSize - the size of the total working section. First time this is the # of permutations

//permCounter - this counter counts the permutation working with within the section
//sectionBegin - counts the beginning of the section working with

//2 Data structures:

//permArray - 2d the array of permutations
//elementsLeftList - list of lists of elements left, corresponds to each permutation

    int totalNumberOfElements = permArray[0].length;
    //
    int numberOfElementsLeftToPlace = totalNumberOfElements - elementPlacing;
    //

    int permCounter = sectionBegin;
    //Base case
    if (numberOfElementsLeftToPlace == 1) {
        for (int x = 0; x < totalPermutations; x++) {
            permArray[x][totalNumberOfElements - 1] = (int) elementsLeftList.get(permCounter).remove(0); //may need to be a remove 1, not sure
        }
        return; //need to decide what I am going to do here
    }

    //
    int elementPlacingIndex = 0;
    int elementCurrentlyPlacing = 0; //could be a 1, don't remember
    //
    int numberOfTimesToPlaceWithinCol = (sectionSize / numberOfElementsLeftToPlace);
    //
    //
    for (; permCounter < (sectionBegin + sectionSize); permCounter++) {
        //when we need to switch to a different partition of the section
        if (elementPlacingIndex == numberOfTimesToPlaceWithinCol) {
            elementPlacingIndex = 0;
            elementCurrentlyPlacing++;
        }
        permArray[permCounter][elementPlacing] = (int) elementsLeftList.get(permCounter).remove(elementCurrentlyPlacing);
        elementPlacingIndex++;
    }
    for (int newSectionBegin = sectionBegin; newSectionBegin < (sectionBegin + sectionSize); newSectionBegin = newSectionBegin + numberOfTimesToPlaceWithinCol) {
        privateGenPerms(permArray, elementsLeftList, totalPermutations, (elementPlacing + 1), newSectionBegin, (sectionSize / numberOfElementsLeftToPlace));
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:39:21.987

该数组是通过引用传递的，因此您在私有函数中所做的任何更改都将是永久性的，您无需再次返回修​​改后的数组。

不过，我还没有查看您的逻辑，看看这是否是您的正确方法。

# php - 无法通过 jQuery 和 AJAX 从 PHP 文件接收回显

> ID：14843871
> 
> 赞同：0
> 
> 时间：2013-02-12T23:32:53.833
> 
> 标签：php, jquery, ajax

我想首先对提出这个问题表示抱歉，因为我知道这里已经有很多人问过这个问题了。我已经搜索了该站点并使用了 Google，并查看了其他示例，但我无法弄清楚出了什么问题。在 FireBug 运行的情况下运行脚本显示 POST 已发送，但没有收到任何内容。我已经发布了下面的代码。

jQuery代码：

```
$('#studio').submit(function (event) {
  $('#formLaunch').click();

  $.ajax({
    url: 'test.php',
    type: 'POST',
    data: {
      search_var: 'test'
    },
    dataType: 'html',
    success: function (data) {
      //$('#result').html(data);
      alert(data);
    }
  });

  event.preventDefault();
}); 
```

PHP代码：

```
<?php
$term = $_POST['search_var'];

echo $term;
?> 
```

代码的最终结果（一旦 AJAX 请求开始工作）将处理发送的变量并回显我希望在页面上的 DIV 框中显示的图像。对于初学者来说，尽管只是试图让这个基本的“外壳”正常工作。

提前感谢您的任何帮助或指导。

杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:54:13.433

始终提供错误功能，尤其是在开发时。我怀疑您的响应有错误（404、500 等）。为调试目的提供错误函数将帮助您更快地看到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T11:33:04.500

试试这个

```
$.post('test.php',{'search_var': 'test'},function(data){
   alert(data);
}); 
```

# jenkins - 从 Jenkins，我如何获取 JSON 中当前正在运行的作业的列表？

> ID：14843874
> 
> 赞同：34
> 
> 时间：2013-02-12T23:33:05.213
> 
> 标签：jenkins

我可以通过远程 API 找到关于我的 Jenkins 服务器的所有信息，但不能找到当前正在运行的作业列表。

这，

```
http://my-jenkins/computer/api/json 
```

或者

```
http://my-jenkins/computer/(master)/api/json 
```

似乎是最合乎逻辑的选择，但他们没有说明哪些作业正在实际运行（除了作业数）。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2014-03-14T11:20:51.647

**在 Jenkins 中，工作**和**构建**之间经常存在混淆，特别是因为工作通常被称为“构建工作”。

*   **作业**（或“构建作业”或“项目”）包含描述要运行什么以及如何运行它的配置。
*   **构建**是作业的执行。构建包含有关开始和结束时间、状态、日志记录等的信息。

有关更多信息，请参阅[https://wiki.jenkins-ci.org/display/JENKINS/Building+a+software+project](https://wiki.jenkins-ci.org/display/JENKINS/Building+a+software+project "詹金斯文档")。

如果您想要当前正在构建的**作业**（即有一个或多个正在运行的**构建**），最快的方法是使用带有 XPath 的 REST API 来过滤以 结尾的颜色`_anime`，如下所示：

```
http://jenkins.example.com/api/xml?tree=jobs[name,url,color]&xpath=/hudson/job[ends-with(color/text(),%22_anime%22)]&wrapper=jobs 
```

会给你类似的东西：

```
<jobs>
  <job>
    <name>PRE_DB</name>
    <url>http://jenkins.example.com/job/my_first_job/</url>
    <color>blue_anime</color>
  </job>
  <job>
    <name>SDD_Seller_Dashboard</name>
    <url>http://jenkins.example.com/job/my_second_job/</url>
    <color>blue_anime</color>
  </job>
</jobs> 
```

Jenkins 使用该`color`字段来指示作业的状态，其中`_anime`后缀表示作业当前正在构建中。

不幸的是，这不会为您提供有关实际运行**构建**的任何信息。作业的多个实例可能同时运行，并且运行的构建并不总是最后一个启动。

如果要列出所有正在运行的**构建**，还可以使用 REST API 快速获得答案，如下所示：

```
http://jenkins.example.com/computer/api/xml?tree=computer[executors[currentExecutable[url]],oneOffExecutors[currentExecutable[url]]]&xpath=//url&wrapper=builds 
```

会给你类似的东西：

```
<builds>
  <url>http://jenkins.example.com/job/my_first_job/1412/</url>
  <url>http://jenkins.example.com/job/my_first_job/1414/</url>
  <url>http://jenkins.example.com/job/my_second_job/13126/</url>
</builds> 
```

在这里，您可以看到所有当前正在运行的构建的列表。您将需要解析 URL 以将作业名称与内部版本号分开。请注意`my_first_job`当前正在运行的两个构建。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-13T02:39:10.757

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-02-13T01:53:46.163

`GET`有点技巧，但我认为您可以通过在执行at时查看作业对象中的颜色键来推断当前正在运行的作业`/jenkins/api/json?pretty=true`。如果 Jenkins 中给定作业的“球”图标是动画的，我们就知道它正在运行。

查看 JSON 响应中的作业对象数组：

```
{
 ...
  "jobs" : [
    {
      "name" : "Test Job 1",
      "url" : "http://localhost:8000/jenkins/job/Test%20Job%201/",
      "color" : "blue"
    },
    {
      "name" : "Test Job 2",
      "url" : "http://localhost:8000/jenkins/job/Test%20Job%202/",
      "color" : "blue_anime"
    }
  ...
} 
```

在这种情况下`"color" : "blue_anime"`表示作业当前正在运行，并`"color" : "blue"`表示该作业没有运行。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-05-07T22:43:27.873

从以下对 json api 的调用中编组输出并过滤“building: true”，以过滤掉无关的东西（希望这会有所帮助）：

```
http://jenkins.<myCompany>.com/job/<myJob>/api/json?pretty=true&depth=2&tree=builds[builtOn,changeSet,duration,timestamp,id,building,actions[causes[userId]]] 
```

会给你类似的东西：

```
{
  "builds" : [
{
  "actions" : [
    {

    },
    {
      "causes" : [
        {
          "userId" : "cheeseinvert"
        }
      ]
    },
    {

    },
    {

    },
    {

    },
    {

    }
  ],
  "building" : true,
  "duration" : 0,
  "id" : "2013-05-07_13-20-49",
  "timestamp" : 1367958049745,
  "builtOn" : "serverA",
  "changeSet" : {

  }
}, ... 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-09-01T09:05:50.983

您可以使用 jenkins tree api 执行此操作，使用如下端点：

```
http://<host>/api/json?tree=jobs[name,lastBuild[building,timestamp]] 
```

`lastBuild`如果您访问，您可以查看可以使用的属性`<job-endpoint>/lastBuild/api/json`。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-01-18T18:16:44.460

我有一个类似的问题，在我重新启动 jenkins 后，一些管道构建卡在构建状态（管道作业应该是持久的并且可以恢复，但大多数情况下它们会无限期地卡住）。

这些构建不使用执行器，因此找到它们的唯一方法是打开每个作业。

当考虑构建项目时，所有其他答案似乎都有效，即：最后一个构建正在构建。但他们忽略了过去仍在建造的建筑。

以下查询对我有用，并为我提供了所有当前正在运行的构建，即：它们没有结果。

[http://localhost:8080/api/xml?tree=jobs[name,builds[fullDisplayName,id,number,timestamp,duration,result]]&xpath=/hudson/job/build[count(result)=0]&wrapper =构建](http://localhost:8080/api/xml?tree=jobs[name,builds[fullDisplayName,id,number,timestamp,duration,result]]&xpath=/hudson/job/build[count(result)=0]&wrapper=builds)

# php - Objective-C 休息反应

> ID：14843875
> 
> 赞同：0
> 
> 时间：2013-02-12T23:33:07.443
> 
> 标签：php, objective-c, xcode, rest

我正在使用用 PHP 编写的 Web 服务来检查我的 iPhone 应用程序发送的 HTTP 请求，然后 PHP 脚本根据凭据是否正确返回是或否，目前我正在对它们进行硬编码，但它们没有t 似乎按预期运行，即使 PHP 脚本返回是，条件失败，我尝试将结果更改为硬编码字符串，这有效......

这是代码

```
NSString *varyingString1 = @"username=";
    NSString *varyingString2 = @"username";

    NSString *varyingString3 = @"&password=";
    NSString *varyingString4 = @"password";
    NSString *post = [NSString stringWithFormat: @"%@%@%@%@", varyingString1, varyingString2, varyingString3, varyingString4];

    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
    [request setURL:[NSURL URLWithString:@"http://url.com/api/login.php"]];
    [request setHTTPMethod:@"POST"];
    [request setHTTPBody:postData];
    NSData *returnData = [NSURLConnection sendSynchronousRequest: request returningResponse: nil error: nil];
    NSString *strResult = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

    NSString *result = strResult;
    result = [post stringByReplacingOccurrencesOfString:@" " withString:@""];

    if(result == @"yes"){
        NSLog(@"%@",strResult);
        [self performSegueWithIdentifier:@"picker" sender:self];
    }else{
        NSLog(@"No");
    } 
```

我用 PHP 编写的 Web 服务看起来像这样

```
<?php if($_POST['password'] == 'password' && $_POST['username'] == 'username') echo "yes";
else echo "no"; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T02:58:27.473

`result == @"yes"`不比较两个字符串。

要比较您的字符串，请使用`[result isEqualToString:@"yes"]`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-12T23:46:12.633

对于休息服务，如果用户登录返回 200 OK，则首选通过 http 响应代码处理响应，

如果凭证失败返回 401 Unauthorized 那么您可以获取响应正文并进行处理

```
 <?php 
   if($_POST['password'] == 'password' && $_POST['username'] == 'username') 
   {
    header('HTTP/1.0 200 OK');
   } else {
    header('HTTP/1.0 401 Unauthorized');
   } 
```

# facebook-fql - Facebook FQL 返回不一致/冲突的结果

> ID：14843877
> 
> 赞同：1
> 
> 时间：2013-02-12T23:33:14.247
> 
> 标签：facebook-fql

我正在使用 Facebook 的 FQL 进行查询：

`Fql.execute({ "query1" => "select object_id from photo_tag where subject=me()", "query2" => "select object_id, subject from photo_tag where object_id in (select object_id from #query1)", options_dict_with_my_access_token)`

query1 获取所有将我标记为主题的照片 query2 转到同一张表并尝试加载所有主题的照片

但是查询 2 无法为许多作为查询 1 结果的照片加载行，这是不可能的，因为我知道至少我是 1 个这样的结果。

这是如何运作的？

# c++ - 具有动态设施的系统日志守护程序或每个软件都有自己的记录器？

> ID：14843882
> 
> 赞同：1
> 
> 时间：2013-02-12T23:33:24.607
> 
> 标签：c++, linux, syslog

目前我正在编写一些产生输出的守护程序应用程序，这应该被记录下来。所以现在我有两个选择：使用 syslog 或提供自己的函数来写入我的日志文件。

但是我发现了一个小问题，我想我不是第一个：我不喜欢提供自己的函数来打开文件、写入文件、关闭文件等。对于一个应用程序来说可能没问题，但是在我认为开发人员不应该两次编写源代码。因此，如果您编写两个守护程序 - 使用相同的日志功能，但我们有：

您可以使用 Linux 的系统日志，但我认为如果所有守护程序都写入设施“守护程序”可能没有用 - 我认为这现在已经过时了！所以我想提供自己的设施，但我还没有找到这个实现。那么有什么理由吗？

我认为以前没有人这样做可能是有原因的？那么现在应该有什么更好的方法呢？为我的软件编写一个“新”记录系统还是只编写一个记录器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-29T00:01:58.280

local0 到 local7 系统日志设施是要走的路。请务必将 APPNAME 设置为 syslog 字段，以便能够进一步过滤写入的日志。

# javascript - 在信息窗口中嵌入街景图片 - Googlemaps v3

> ID：14843883
> 
> 赞同：2
> 
> 时间：2013-02-12T23:33:31.070
> 
> 标签：javascript, google-maps-api-3, knockout.js

我正在使用 googlemaps v3/ASP.net MVC/Knockout 作为位置选择屏幕。我无法在信息窗口中获取街景图片。我尝试了几个不同的例子。我可以看到图像正在被拉下（在浏览器资源中可见），但它不会显示。

有人看到我缺少的东西吗？看起来它真的应该工作。我确实收到关于“资源解释为图像但使用 MIME 类型应用程序/八位字节流传输”的警告，但就像我说的那样，我可以看到图像进入浏览器。

```
 // Function for creating a marker and adding to myMarkers array
  function addMarker(location, id) {
    var selector = "#hiddenBranch" + id;
    var html = $(selector)[0].innerHTML;

    var panSelector = "PanId" + id;

    var marker = new google.maps.Marker({
      position: location,
      distance: google.maps.geometry.spherical.computeDistanceBetween(location, centerCoords),
    });

    marker.setValues({id: id})

    google.maps.event.addListener(marker, "click", function () {
      if (infowindow) infowindow.close();
      infowindow = new google.maps.InfoWindow({
        content: ''
      });
      infowindow.setContent(html);
      infowindow.open(map, marker);

      var panoramaOptions = {
        position: location,
        pov: {
          heading: 34,
          pitch: 10,
          zoom: 1
        }
      };

      var pano = null;
      google.maps.event.addListener(infowindow,'domready', function() {
        pano = new google.maps.StreetViewPanorama(document.getElementById(panSelector), panoramaOptions);
        pano.bindTo("position", marker);
        pano.setVisible(true);
      });

    });

    myMarkers.push(marker);
  } 
```

部分html。与淘汰赛重复。

```
 @*The content of this div will be displayed in infowindow*@ 
    <div style="display:none">
      <div data-bind="attr: {'id': HiddenDivId}"> 
        <div style="width:100px; height:100px" data-bind="attr: {'id': HiddenPanDivId}">

        </div>
        <input data-bind="value: Id" class="hiddenBranchId" type="hidden" value="">
        <input data-bind="value: DirectionLink" class="hiddenDirectionLink" type="hidden" value="">
        <ul>
          <li><h2></h2></li>
          <li data-bind="text: BranchName"></li>
          <li data-bind="text: StreetAddress"></li>
          <li><span data-bind="text: City"></span>, <span data-bind="text: Zip"></span>  <span data-bind="text: State"></span></li>
          <li><a href='#' class="branchSelectLink" onclick=selectBranch(this)>Select</a> | <a href="#" onclick=openDirectionWindow(this)>Directions here</a></li>
        </ul>
      </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:15:52.263

我看到2个问题。

1.  在添加 domready-event 之前打开 infoWindow
2.  **（更成问题）**您将 infoWindow 的内容设置为 DOM 中已经存在的元素的 innerHTML，结果将是元素的 ID 不再唯一。我猜全景图将应用于 DOM 中已经存在的隐藏元素，而不是应用于 infoWindow 内容的“克隆”。

2的可能解决方案。

1.  不要使用 ID，classNames 或其他属性足以选择元素并且不需要唯一
2.  创建一个真正的克隆而不是使用 innerHTML

    ```
         var html = $(选择器).clone(true);
    ```

3.  使用上下文参数访问克隆内部的节点（而不是原始元素内部）

    ```
         pano = new google.maps.StreetViewPanorama($(panSelector,html)[0],
                                                      全景选项）；
    ```

# r - 在R中，合并两个数据框，填空

> ID：14843887
> 
> 赞同：8
> 
> 时间：2013-02-12T23:33:51.673
> 
> 标签：r, merge

假设我有这两个数据框：

```
big.table <- data.frame("idx" = 1:100)

small.table <- data.frame("idx" = sample(1:100, 10), "color" = sample(colors(),10)) 
```

我想像这样将它们合并在一起：

```
merge(small.table, big.table, by = "idx", all.y=TRUE)

idx           color
1     1            <NA>
2     2            <NA>
3     3         salmon2
4     4            <NA>
5     5            <NA>
6     6            <NA>
...
20   20            <NA>
21   21            <NA>
22   22           blue4
23   23          grey99
24   24            <NA>
25   25            <NA>
26   26            <NA>
... 
```

现在我需要填写表格下方“颜色”列中的值，以便将所有 NA 设置为表格中之前的值。

注意：问题涉及从计算机程序生成的日志文件，而不是任何标准日志格式。此日志文件中的行块属于在块的第一行中标识的“进程”。我已经在日志文件的相关行中提取了信息，其中大部分属于一个进程，并创建了一个包含该信息（行号、时间戳等）的数据表。现在我需要在此表中填写与 small.table 中的每一行对应的“进程”名称，该表具有行号。

big.table 顶部的行可能没有“进程”（上例中的颜色）。这些行应保持为 NA。

一旦第一个“进程”开始，该进程开始行和下一个进程之间的每一行都属于第一个进程。当第二个进程启动时，该进程启动行和下一个进程启动行之间的每一行都属于第二个进程。等等。进程行与我收集到日志文件数据框中的其他行的行号永远不会相同。

我的计划是将 big.table 创建为所有日志行号的序列，并将小表合并到其中。然后我可以“填写”进程名称并将大表合并到日志文件中，只保留日志文件以及与之相连的所有内容。

我对其他方法持开放态度。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-12T23:39:17.437

听起来你需要`na.locf`从包**zoo**中（代表最后的观察结转）：

```
library(zoo)
tbl <- merge(small.table, big.table, by = "idx", all.y=TRUE)
tbl$color2 <- na.locf(tbl$color,na.rm = FALSE) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-12T23:50:09.683

一个`data.table`解决方案：

```
require(data.table)
b <- data.table(big.table, key="idx")
s <- data.table(small.table, key="idx")
s[b, roll=T]

#      idx          color
#   1:   1             NA
#   2:   2             NA
#   3:   3             NA
#   4:   4          blue3
#   5:   5          blue3
#   6:   6          blue3
#   7:   7          blue3
#   8:   8          blue3
#   9:   9          blue3
#  10:  10          blue3
#  11:  11   navajowhite1
#  12:  12   navajowhite1
#  . . . . 
```

# javascript - 仅使用应用程序缓存缓存图像

> ID：14843890
> 
> 赞同：1
> 
> 时间：2013-02-12T23:34:09.637
> 
> 标签：javascript, html, html5-appcache

是否可能仅在 html5 应用程序缓存中缓存图像？

我的清单几乎可以工作！

```
CACHE MANIFEST
#Version: 4

CACHE:
Public/Images/about.png
Public/Images/android.png
Public/Images/back-hover.png
Public/Images/back.png
Public/Images/contact.png
Public/Images/HTML5.png
Public/Images/info.png
Public/Images/linkedin.png
Public/Images/mail.png
Public/Images/message.png
Public/Images/portfolio.png
Public/Images/profession.png
Public/Images/ram.png
Public/Images/stack.png
Public/Images/tile.png
Public/Images/vs.png
Public/Images/About/me.jpg

NETWORK:
*

FALLBACK: 
```

问题是我网站的登录页面也被缓存了，这意味着当我更新内容时，用户没有收到内容。

我可以通过增加缓存中的版本号来强制手动更新所有缓存文件，但这并不理想，因为我的主页内容是动态的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:29:54.350

使用 an`iframe`加载引用清单的静态 HTML 文件。

# maven - Jacoco Maven 插件 - 生命周期配置未涵盖插件执行

> ID：14843892
> 
> 赞同：19
> 
> 时间：2013-02-12T23:34:29.677
> 
> 标签：maven, m2eclipse, m2e, jacoco

我是 Maven 新手，想使用 Jacoco Maven 插件来构建我的项目。

我已经建立了一个示例项目，其中 TestNG 是唯一的依赖项。

这是 pom.xml 的一部分：

```
<dependencies>
    <dependency>
        <groupId>org.testng</groupId>
        <artifactId>testng</artifactId>
        <version>6.8</version>
    </dependency>
</dependencies>
<build>
    <plugins>
        <plugin>
            <groupId>org.jacoco</groupId>
            <artifactId>jacoco-maven-plugin</artifactId>
            <version>0.6.2.201302030002</version>
            <executions>
                <execution>
                    <goals>
                        <goal>prepare-agent</goal>
                    </goals>
                </execution>
                <execution>
                    <id>report</id>
                    <phase>prepare-package</phase>
                    <goals>
                        <goal>report</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

我得到这个错误：

生命周期配置未涵盖插件执行：org.jacoco:jacoco-maven-plugin:0.6.2.201302030002:prepare-agent（执行：默认，阶段：初始化）

我究竟做错了什么 ？干杯

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-04-17T13:29:00.497

您可以忽略插件目标，将这样的内容添加到您的 pom.xml

```
<pluginManagement>
        <plugins>
            <!--This plugin's configuration is used to store Eclipse m2e settings only.
                It has no influence on the Maven build itself.-->
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>org.jacoco</groupId>
                                    <artifactId>jacoco-maven-plugin</artifactId>
                                    <versionRange>[0.5,)
                                    </versionRange>
                                    <goals>
                                        <goal>prepare-agent</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <!-- m2e doesn't know what to do with jacoco,
                                        let's ignore it or annoying error markers appear
                                        see http://wiki.eclipse.org/M2E_plugin_execution_not_covered
                                     -->
                                    <ignore></ignore>
                                </action>
                            </pluginExecution>
                        </pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-01-07T22:41:29.420

由于这与 Eclipse Maven 插件有关，因此也可以在 Eclipse 的首选项中进行本地设置。将配置移出项目的 pom 文件有助于代码简单、干净，没有 IDE 细节。

转到 Eclipse --> 首选项 --> Maven --> 生命周期映射。添加`lifecycle-mapping-metadata.xml`如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<lifecycleMappingMetadata>
  <pluginExecutions>
    <pluginExecution>
      <pluginExecutionFilter>
        <groupId>org.jacoco</groupId>
        <artifactId>jacoco-maven-plugin</artifactId>
        <versionRange>[0.5,)</versionRange>
        <goals>
          <goal>prepare-agent</goal>
        </goals>
      </pluginExecutionFilter>
      <action>
        <ignore />
      </action>
    </pluginExecution>
  </pluginExecutions>
</lifecycleMappingMetadata> 
```

重新加载生命周期映射文件，然后`Maven`-->`Update Project`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-04T15:12:45.337

Eclipse 现在提供了一个快速修复来禁用警告并将其保存在用户首选项中（在 Eclipse --> Preferences --> Maven --> Lifecycle Mappings lifecycle-mapping-metadata.xml 中，如 @iker-aguayo 所述）所以你不要不必手动创建或编辑文件。这在您无法更新 pom 的情况下很有用（例如使用无法提交的开源项目。）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-02-08T20:38:28.420

我最终选择忽略插件并使用 CLI mvn 命令代替代码覆盖率的测试。

在 Eclipse IDE 中，右键单击 jacoco-maven-plugin 的红色警告。您应该在弹出窗口中使用三个选项来修复警告，选择忽略警告，这将导致您的 pom.xml 中自动生成一个以一行注释开头的部分，

```
<!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.--> 
```

在命令行中，在每次签入之前运行 mvn 命令，这应该会触发覆盖率的测试目标，

```
$mvn clean package 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-13T03:18:45.673

[如M2E wiki 中所述，](http://wiki.eclipse.org/M2E_plugin_execution_not_covered)此问题是 Eclipse 特有的。抱歉，我无能为力，因为我不使用 Eclipse。

# c++ - 有条件 (SFINAE) 覆盖

> ID：14843900
> 
> 赞同：9
> 
> 时间：2013-02-12T23:35:25.490
> 
> 标签：c++, templates, c++11, sfinae

我正在尝试这样做：

```
struct A
{
  virtual int f() const { return 0; }
};

template <typename T>
struct B : A
{
  template <typename U = T,
    typename std::enable_if<...some condition involving U...>::type>
  int f() const { return 1; }
}; 
```

警告，我不能继承类模板（使用静态覆盖）。这种结构是否允许，模板成员 B::f() 是否可以覆盖成员 A::f()？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T23:43:38.083

试试这个：

```
template <typename T, typename=void>
struct B : A
{
  ...
};

temlate <typename T>
struct B<T, typename std::enable_if<...some condition...>::type>:
  A
{
  virtual int f() const override { return 1; }
}; 
```

我们有两个版本`B<T>`，一个条件为真（`enable_if`一个），一个条件为假（默认）。

如果您希望能够重用默认`B`实现，您甚至可以这样做：

```
template <typename T, typename=void>
struct B : A
{
  ...
};

template <typename T>
struct B<T,  typename std::enable_if<...some condition...>::type>:
  B<T, bool>
{
  virtual int f() const override { return 1; }
}; 
```

我们从“真”案例中的“假”案例继承。但这对我来说有点脏——我宁愿把通用实现放在第三个位置（`B_impl`）而不是那个 hack。（这也让你静态断言第二个参数是`void`第一种情况`B`）。

# c#-4.0 - Dapper 不会因丢失数据而发出警告或失败

> ID：14843902
> 
> 赞同：6
> 
> 时间：2013-02-12T23:35:44.683
> 
> 标签：c#-4.0, orm, dapper

假设我有一个类（例如简单化），并且我想确保始终填充 PersonId 和 Name 字段。

```
public class Person
{
    int PersonId { get; set; }
    string Name { get; set; }
    string Address { get; set; }
} 
```

目前，我的查询是：

```
Person p = conn.Query<Person>("SELECT * FROM People"); 
```

但是，我可能已经将我的数据库架构从 PersonId 更改为 PID，现在代码可以正常运行了。

我想做的是以下之一：

1.  用诸如Required（dapper可以验证）之类的属性装饰属性PersonId

2.  告诉 dapper 弄清楚映射没有被完全填写（即当类中的所有属性都没有被查询数据填写时抛出异常）。

**目前这可能吗？**如果没有，有人可以指出我如何在不严重影响性能的情况下做到这一点吗？

**恕我直言**，第二个选项将是最好的，因为它不会破坏用户的现有代码，并且不需要对我们可能无法访问的类进行更多的属性修饰。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T09:25:34.950

目前，不，这是不可能的。事实上，在很多情况下填充部分模型非常有用，所以我不想添加任何*隐含*的东西。在许多情况下，域模型是数据模型的扩展视图，因此我认为选项 2 行不通——而且我*知道*它会在我的代码中出现无数个问题；p 如果我们将自己限制在更明确的范围内选项...

到目前为止，我们故意避免了属性之类的东西；我们的想法是尽可能保持简洁和直接。我并不是病态地*反对*属性——只是：必须探究它们可能会有问题。但也许是时候了......我们也许也可以同时允许简单的列映射，即

```
[Map(Name = "Person Id", Required = true)]
int PersonId { get; set; } 
```

其中`Name`和`Required`都是可选的。想法？不过，这在某些方面存在问题 - 特别是目前我们只探测*我们可以看到的列*，特别是在可扩展性 API 中。

另一种可能性是我们检查的接口，允许您在加载后手动验证数据；例如：

```
public class Person : IMapCallback {
    void IMapCallback.BeforePopulate() {}
    void IMapCallback.AfterPopulate() {
        if(PersonId == 0)
            throw new InvalidOperationException("PersonId not populated");
    }
} 
```

界面选项在很多方面让我更快乐：

*   它避免了很多额外的反射探测（只需要做一项检查）
*   它更灵活——你可以选择对你来说重要的东西
*   它不会影响可扩展性 API

但是：它更手动。

我愿意提供意见，但我想确保我们做*对*了，而不是急于火上浇油。

# pointers - inout-parameter - 用另一个替换一个 const 句柄

> ID：14843905
> 
> 赞同：4
> 
> 时间：2013-02-12T23:36:04.730
> 
> 标签：pointers, casting, d, const-correctness, const-cast

在一个对象中，我有一个常量句柄数组，指向另一个特定类的某个对象。在一种方法中，我可能希望将其中一个句柄作为 -`inout`参数返回。这里作为一个简化的例子：

```
class A {}

class B {
    const(A) a[];
    this() { 
        a = [new A(), new A(), new A()];
    }

    void assign_const(const(A)* value) const {
        // *value = a[0]; // fails with: Error: cannot modify const expression *value
    }
}
void main() {
    const(A) a;
    B b = new B();
    b.assign_const(&a);
    assert(a == b.a[0]); // fails .. obviously
} 
```

我不想删除原始数组中的 const 。类`B`意味着对集合常量项的某种视图`A`。我是来自 C++ 的 D 新手。我是否搞砸了 D-way 中的 const 正确性？我已经尝试了几种方法来让它工作，但不知道如何让它正确。

如何在没有“邪恶”铸造的情况下执行此查找的正确方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T01:52:03.777

抛弃`const`和修改元素是 D 中未定义的行为。不要这样做。一旦某事存在`const`，它就是`const`。如果数组的元素是`const`，则不能更改。所以，如果你有`const(A)[]`，那么你可以将元素附加到数组中（因为它是元素，而`const`不是数组本身），但你不能改变数组中的任何元素。与 相同`immutable`。例如，`string`is 的别名`immutable(char)[]`，这就是为什么您可以附加到 a `string`，但不能更改其任何元素的原因。

如果您想要一个`const`可以更改数组中元素的对象数组，则需要另一个级别的间接。对于结构，您可以使用指针：

```
const(S)*[] arr; 
```

但这不适用于类，因为 if`C`是一个类，则`C*`指向对类对象的引用，而不是指向对象本身。对于课程，你需要做

```
Rebindable!(const C) arr; 
```

[可重新绑定在std.typecons](http://dlang.org/phobos/std_typecons.html#Rebindable)中。

# android - 使用自定义库

> ID：14843906
> 
> 赞同：0
> 
> 时间：2013-02-12T23:36:10.717
> 
> 标签：android, debugging, libraries, android-preferences

所以我对 Android 开发还很陌生，我很好奇在将库导入到我的 android 项目时是否遗漏了任何东西。我在 android 网站上遵循[了这个指南](http://developer.android.com/tools/projects/projects-eclipse.html)，并从现有代码中创建了一个新项目，然后将其作为库添加到我自己的项目中。问题是一切都出错了，`R`无法作为变量解决，所以我试图清理我的项目，但它什么也没做。我导入`R`然后它找不到我的任何活动。所以这是我的第一个问题。

我正在使用的库是 This [Color Picker](https://github.com/attenzione/android-ColorPickerPreference)，实际上在主页上它只是说使用 xml 并将其添加到我的偏好中，但我的偏好似乎无法识别它。

我显然做错了什么，但似乎找不到像样的教程来指导我将自定义库添加到我的项目中。我希望有更多经验的人可以帮助我找到错误的根源或为我提供教程，以便我可以从头开始导入过程。

我的设置文件的[图像](http://i.imgur.com/wytv5D5.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T00:15:35.687

> 我正在使用的库是 This Color Picker

恕我直言，任何未发布使用该库的完整示例应用程序的库都应被忽略。

> 我显然做错了什么

`pumpkin_orange`据推测，您的项目中没有命名颜色资源。图书馆里肯定没有这样的资源。定义此颜色资源，或替换`@color/pumpkin_orange`为文字颜色或您定义的某些颜色资源。

您的`R`课程不存在，因为您的资源（如那个`settings.xml`）和/或清单中有错误。一旦清除了这些错误，您的`R`类应该会正确生成。

# windows - 如何让显示器处于待机状态而不让它醒来

> ID：14843908
> 
> 赞同：0
> 
> 时间：2013-02-12T23:36:22.613
> 
> 标签：windows, winapi, windows-7, multiple-monitors, standby

我有 3 台显示器，但我不需要一直打开它们。我可以用电源按钮关闭它们，但我想使用它们的待机模式，就像我们让 PC 闲置一段时间时 Windows 所做的那样——它会关闭显示器、硬盘等。

但当然，我想继续使用 PC，让那台显示器处于待机状态。其他人必须保持开启，即使我使用 PC 也不会唤醒。

有可能这样做吗？最好有一个像`Winkey`+ `1`、`2`等这样的快捷方式`3`来关闭和唤醒每台显示器。

具有此功能的现有应用程序不太可能存在，但是否有可以控制 MultiMonitor 系统中每个监视器的监视器状态的 Windows API 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:31:04.410

你会想试试[Display Fusion](http://www.displayfusion.com/)。您应该能够使用 Monitor 配置完成您所要求的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T01:02:13.700

[显示控制面板小程序调用 SetDisplayConfig 来启动或停止在特定目标上的强制投影](http://msdn.microsoft.com/en-us/library/windows/hardware/ff569534%28v=vs.85%29.aspx)

您可能可以使用[MS Detours](http://research.microsoft.com/en-us/projects/detours/)或其他一些 API 挂钩工具来检查 API 的使用模式，同时使用小程序调整显示设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-01T00:34:40.997

我知道我迟到了，但使用 DDC 来控制你的显示器。您可以轻松创建通过 DDC 向显示器发送命令以关闭的热键。这相当于使用按钮关闭显示器。对我来说就像一个魅力。唯一的技巧是 DDC 命令规格因显示器制造商而异，但在 google 的帮助下不难找到要发送的正确代码。

为此也有现成的工具；搜索与 DDC 或 EDID 相关的任何内容，您应该会找到。

请注意，虽然这不会从 Windows 中删除显示器，这意味着应用程序可能会在关闭的显示器上找到自己的方式，而您将寻找它们。

# cassandra - 有什么不同：在本地 tomcat 中运行与在 Cloud Foundry 中运行

> ID：14843910
> 
> 赞同：3
> 
> 时间：2013-02-12T23:36:26.250
> 
> 标签：cassandra, cloud-foundry, hector

我有一个在本地 tomcat 实例中运行良好的应用程序 - 它是一个 cassandra 客户端应用程序，它使用 Hector 作为 Cassandra 的客户端库。应用程序使用如下代码创建一个键空间和列族（如果它不存在）：

```
final ColumnFamilyDefinition cfDef = HFactory.createColumnFamilyDefinition(keySpaceName,
    columnFamilyName, ComparatorType.BYTESTYPE);
    cfDef.setKeyValidationClass(ComparatorType.LONGTYPE.getClassName());
    cfDef.setComparatorType(ComparatorType.UTF8TYPE);

cfDef.addColumnDefinition(new BasicColumnDefinition() {{
    setName(StringSerializer.get().toByteBuffer("id"));
    setValidationClass(ComparatorType.LONGTYPE.getClassName());
}}); 
```

当我将这个完全相同的应用程序推送到 Cloud Foundry（我们自己的内部云，我们有一个简单的 cassandra 服务）时，上面带有“addColumnDefinition”的行会导致异常 - 这是堆栈跟踪：

```
java.lang.UnsupportedOperationException
java.util.AbstractList.add(Unknown Source)
java.util.AbstractList.add(Unknown Source)
me.prettyprint.cassandra.service.ThriftCfDef.addColumnDefinition(ThriftCfDef.java:311)
org.pvtl.cassandra.HectorSample.createColumnFamily(HectorSample.java:94)
org.pvtl.cassandra.HectorSample.<init>(HectorSample.java:37)
org.apache.jsp.index_jsp._jspService(index_jsp.java:61)
org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

一堆谷歌搜索，看起来麻烦在于 Hector 代码正试图添加到一个不可变列表 - java.util.AbstractList。但同样，该代码在我的本地 tomcat 实例上运行良好，所以我在考虑 jdk 的不同之处？也许？我在本地运行 java 7 (sun) 并推动选择 java 7。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T00:03:31.773

很可能您`Hector`在本地 tomcat 中使用的版本与服务器中的版本不同（即服务器具有较旧的库），因为不可变列表约束已从较新`Hector`版本中删除

[请参阅此拉取请求讨论](https://github.com/hector-client/hector/pull/161)

**编辑**

您可能需要检查您的服务器配置并确保它具有最新的`hector`库和/或检查您的 tomcat/jetty 库文件夹下不存在的库，因为它可能会导致依赖性`hector-cor-xxx.jar`问题**。**

# javascript - JavaScript - 使用对象原型来扩展方法的使用？

> ID：14843914
> 
> 赞同：0
> 
> 时间：2013-02-12T23:36:49.987
> 
> 标签：javascript, object, constructor, prototype

我对 JavaScript 很陌生，在使用对象的原型时，我尝试调用当前对象来扩展方法，但它不起作用。所以我用谷歌搜索了我的问题，但并没有真正得到任何地方，因为它实际上是不可能的。但是，我找到了`this`我认为应该起作用但没有起作用的关键字。这是我所拥有的：

```
(function( window, document, undefined ) {
    var myObj = function ( ) { }; // not a noop
    var ua = function() { return navigator.userAgent.toLowerCase(); }
    function noop() { }; // empty noop function

    myObj.prototype = {
        constructor: myObj,
        renderizr: {
            presto: ua().match(/(opera|presto)/i),
            trident: ua().match(/trident/i), // don't parse "msie" as opera uses this sometimes
            webkit: ua().match(/(chrome|safari|webkit)/i),
            gecko: ua().match(/(firefox|gecko)/i), // don't parse "netscape" as a lot of strings use this
            val: '' // keep empty for now
        }
    };

    // renderizr.val extension
    // use this so the user can print the value of
    // the rendering engine instead of using multiple
    // conditional statements.
        if(this.renderizr.presto) { this.renderizr.val = "Presto" }
        else if(this.renderizr.trident) { this.renderizr.val = "Trident") }
        else if(this.renderizr.webkit) { this.renderizr.val = "Webkit") }
        else if(this.renderizr.gecko) { this.renderizr.val = "Gecko") }

    window.myObj = new myObj();
}( window, document )); 
```

这样，您可以做`alert(myObj.renderizr.val);`而不是做单调的条件语句。

我不想进行通用浏览器名称检测，因为您只应该测试您需要的功能，而不是浏览器。但是，一些渲染引擎对渲染网页有不同的习惯，所以我确实想在我的脚本中包含**引擎检测。**（但是，我不建议使用它，就像我说的那样，我只是想了解 javascript 以及它是如何工作的，但它不起作用！）。

所以我的问题是，我在这里做错了什么，我该如何解决？为什么`this`关键字不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T23:40:27.160

您`this`在不在`myObj`对象实例中的上下文中使用。`this`将是全局范围（即窗口）。

此外，您的所有代码都立即运行，您没有在`prototype`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T00:04:27.483

我相信您希望在构造函数中进行这些检查：

```
var myObj = function () {
    // renderizr.val extension
    // use this so the user can print the value of
    // the rendering engine instead of using multiple
    // conditional statements.
    if(this.renderizr.presto) { this.renderizr.val = "Presto" }
    else if(this.renderizr.trident) { this.renderizr.val = "Trident" }
    else if(this.renderizr.webkit) { this.renderizr.val = "Webkit" }
    else if(this.renderizr.gecko) { this.renderizr.val = "Gecko" }
}; 
```

此外，您的语句中有一些额外`)`内容`else if`，导致语法错误。在此处检查工作版本：http: [//jsfiddle.net/SnKSB/](http://jsfiddle.net/SnKSB/)。

# android - 在 Android 上进行 oauth 登录后管理后台堆栈

> ID：14843915
> 
> 赞同：2
> 
> 时间：2013-02-12T23:36:50.720
> 
> 标签：android, oauth, back-stack

我正在 Android 中实现 oauth 登录，但我被困在一个点上。我需要重定向到本机浏览器以启动登录（而不是使用我自己的嵌入式 WebView），但这会导致后台堆栈出现问题。我的目标很简单：在重定向后返回我的活动，在后台堆栈中没有本机浏览器的痕迹。这是迄今为止我最接近的：

要从我的活动中启动登录，我使用：

```
 Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
    intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY
        | Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);
    context.startActivity(intent); 
```

我有一个单独的活动来接收返回重定向并处理其余的登录过程。我真的不在乎它是否是一个单独的活动，这只是我目前的解决方案。在它的清单中我设置了`android:noHistory="true"`. 完成登录过程后，我*尝试*使用如下代码返回第一个活动：

```
 Intent intent = new Intent(context, OrigActivity.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    context.startActivity(intent); 
```

但是，这最终会创建原始活动的第二个副本，当我按下它时，它会返回到第一个副本。换句话说，它似乎并不尊重`FLAG_ACTIVITY_CLEAR_TOP`。尽管我进行了所有的搜索，但我是否错过了一些简单的让它工作的东西？或者我还有其他方法可以解决所有这些问题吗？

**编辑：**事实证明，问题源于浏览器是在单独的任务中启动的。来自一些 Android 文档：

> ...如果您的应用程序发出打开 Android 浏览器的意图，则其活动不会与您的应用程序放在同一任务中。相反，要么为浏览器启动一个新任务，要么，如果浏览器已经有一个任务在后台运行，则该任务被提出来处理新的意图。

如果我将原始活动的启动模式设置为`singleTask`正确地将其带到前台而不是创建新副本，但会出现新问题。浏览器现在位于我所有活动的后台，所以现在它似乎`FLAG_ACTIVITY_NO_HISTORY`没有受到尊重。我不确定这是否让我更接近正确的解决方案......

**编辑 2：**更正：如果浏览器在我启动之前没有运行，那么一切正常。但是，如果它已经在运行`FLAG_ACTIVITY_NO_HISTORY`似乎对它没有影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-16T06:21:38.080

您所看到的内容是有道理的，因为使用 FLAG_ACTIVITY_NO_HISTORY 调用浏览器不会从 PRIOR 到您的应用程序开始删除返回堆栈。

# mysql - SQL MIN 函数选择行

> ID：14843918
> 
> 赞同：0
> 
> 时间：2013-02-12T23:37:31.837
> 
> 标签：mysql, sql, min

所以，我有一张桌子，我希望显示价格最低的行......

```
sellers - saleid, productsid[fk for products table], cid[fk for customers table], quantity
price. 
```

以下是一些记录：

```
sellers =1,2,2,200,5.00
sellers=2,3,4,100,1.00 
```

我做这个查询：

```
select ProductID, Quantity, MIN(Price) FROM sellers 
```

我得到这个输出

```
2,200,1.00 
```

为什么它显示最低价格但是第一个记录列？它应该显示即相应的行...

```
3,4,1.00 
```

知道这是为什么吗？

=========EDIT======= 感谢您的建议。我现在有另一个小问题。我希望为每种产品选择最低价格。有没有我可以用来执行此操作的查询？因此，例如，如果这是新的 Sellers 表：

```
sellers =1,2,2,200,5.00
sellers=2,3,4,100,1.00
seller=3,2,3,250,3.00 
```

那么产品 2,3 的最低价格为

```
sellers=2,3,4,100,1.00
seller=3,2,3,250,3.00 
```

我怎样才能使用 min 函数做这样的事情？我努力了

```
select c.Fname p.ProductName, s.ProductID, s.Quantity, s.Price 
FROM sellers s, products p, customer c
WHERE s.Price = (select MIN(Price) FROM sellers WHERE p.ID=s.ProductID AND c.ID=s.cid); 
```

然而，这似乎并没有输出每个独特产品的最低价格。关于如何纠正这个问题的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:46:04.317

如果没有`GROUP BY`聚合函数`MIN()`，则会将其应用于所有行。为了将价格与整个表中的最小值进行比较，您需要一个子查询：

```
select ProductID, Quantity, Price 
FROM sellers
WHERE Price = (select MIN(Price) FROM sellers); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:40:42.727

这是因为您在（隐式）聚合查询中选择了非聚合列，而没有聚合。事实上，我很惊讶这个查询是有效的。

我的意思是，如果您在返回的值（例如`min(Price)`或）中进行了聚合，那么如果对于其他非聚合值（例如）应该返回`avg(Price)`的内容存在任何歧义，则该查询不应被视为有效。`ProductID`您可能会想，哦，但只有一行具有最低价格，因此它可以从中返回值。但是其他像`avg`这样的聚合可以产生一个包含在 no now 中的值呢？或者如果两行的最低价格相同怎么办？您希望`select ProductID, Quantity, AVG(Price) FROM sellers`返回什么行的值？

你想要这样的东西：

`select ProductID, Quantity, Price from sellers s1 where Price <= all (select price from sellers s2)`

或者

`select ProductID, Quantity, Price from sellers s1 order by price asc limit 1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T23:47:25.593

问题是您没有使用 a`GROUP BY`并且您想要不在聚合函数中的列。

如果您不在`GROUP BY`其他列上使用 a，那么 MySQL 会选择 、 等的值，`ProductId`结果`Quantity`将不一致。

最好的办法是使用子查询：

```
select *
from sellers s1
inner join
(
  select min(price) MinPrice
  from sellers
) s2
  on s1.price = s2.minprice; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/dd932/7)

# html - 指向类别页面的链接是否有适当的 rel 属性？

> ID：14843929
> 
> 赞同：0
> 
> 时间：2013-02-12T23:38:44.153
> 
> 标签：html, web-standards

`the_category()`WordPress 中的函数通过创建一个带有看起来像“类别标签”的 rel 属性的锚标签来生成一些无效的标记（请参阅[此处](http://example.wordpress.com)的“未分类”链接的标记）。

看来问题是类别不是有效值，而且应该是一个词。

大多数人都将其完全删除，但我正在查看[有效值列表，](http://microformats.org/wiki/existing-rel-values)并想知道它们中的任何一个是否适合指向类别页面的链接（例如[这个](http://example.wordpress.com/category/uncategorized/)）？

特别是`tag`, `section`，并`subsection`引起了我的注意，但我不清楚它们的预期用途。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:25:54.060

`category`并且`tag` *是*有效值。一些验证器不是最新的。

`tag`在 HTML5 规范中[定义。](http://www.w3.org/TR/html5/links.html#link-type-tag)

`category`在[http://microformats.org/wiki/existing-rel-values#HTML5_link_type_extensions](http://microformats.org/wiki/existing-rel-values#HTML5_link_type_extensions)中列出，这是链接类型扩展的[规范](http://www.w3.org/TR/html5/links.html#other-link-types)注册表。

如果两种链接类型都适用，则用空格分隔它们是正确的。

注意：不要在*任何*指向类别/标签页面的链接上使用这些链接类型；仅在使用相应类别/标签对链接页面进行分类/标记的情况下使用它。因此，列出所有类别的页面不应使用`rel`值“ `category`”作为链接。

# c++ - 从 c++ DLL 调用过程有什么问题

> ID：14843930
> 
> 赞同：1
> 
> 时间：2013-02-12T23:38:52.657
> 
> 标签：c++, delphi, dll

我在 c++ builder 中有一个简单的 DLL。

```
//---------------------------------------------------------------------------

#include <vcl.h>
#include <windows.h>
#pragma hdrstop

#pragma hdrstop
#pragma argsused

BOOL WINAPI DllMain(HINSTANCE hinstDLL, DWORD fwdreason, LPVOID lpvReserved)
{

    return TRUE;
}
//---------------------------------------------------------------------------

 extern "C" __declspec(dllexport)  void show_m(void)
{
 MessageBox(NULL, "MSG", "COTI DLL", MB_OK |MB_ICONINFORMATION);
} 
```

当我在 delphi 中调用它时，我得到错误，即 dll 中没有过程：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  DLL : THandle;
  show_m1 : procedure; cdecl;

begin
    DLL := LoadLibrary('mylib.dll');
    @show_m1:= GetProcAddress(DLL, 'show_m');
    show_m1;
    FreeLibrary(DLL);
end; 
```

有什么问题，它应该可以正常工作，但事实并非如此？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T00:56:53.380

您已经找到了解决方案：添加`__stdcall`调用约定。它起作用的原因是因为原始代码没有指定调用约定，所以`__cdecl`被使用了。使用`extern "C"`时，`__cdecl`调用约定将函数名称导出为`"_show_m"`（除非您使用 .def 文件来更改它），这就是`GetProcAddress()`找不到它的原因。改为使用时`__stdcall`，导出的函数名称`"show_m"`符合预期。不要忘记更改您的 Delphi 代码以使用`stdcall`而不是`cdecl`您的`show_m1`变量：

```
#include <vcl.h>
#include <windows.h>
#pragma hdrstop

#pragma hdrstop
#pragma argsused

BOOL WINAPI DllMain(HINSTANCE hinstDLL, DWORD fwdreason, LPVOID lpvReserved)
{

    return TRUE;
}
//---------------------------------------------------------------------------

extern "C" __declspec(dllexport) void __stdcall show_m(void)
{
    MessageBox(NULL, "MSG", "COTI DLL", MB_OK | MB_ICONINFORMATION);
} 
```

.

```
procedure TForm1.Button1Click(Sender: TObject);
var
  DLL : THandle;
  show_m1 : procedure; stdcall;
begin
  DLL := LoadLibrary('mylib.dll');
  if DLL <> 0 then
  try
    @show_m1 := GetProcAddress(DLL, 'show_m');
    if Assigned(show_m1) then
      show_m1;
  finally
    FreeLibrary(DLL);
  end;
end; 
```

# java - 我的答案在第一次输入后一直返回错误并且不会跟踪分数？

> ID：14843932
> 
> 赞同：0
> 
> 时间：2013-02-12T23:39:06.600
> 
> 标签：java, swing, user-interface, jframe, awt

我试图制作一个数学问答游戏，它会生成随机问题并跟踪哪些问题是错误的并写出来。

让动作监听器工作，但是当我输入答案时，它说我的答案是错误的，即使它是正确的。出现的第一个问题很好，但在那之后，它说我所有的答案都是错误的，即使它们是正确的并跟踪分数。

```
 import java.util.Scanner;
        import javax.swing.*;
        import javax.swing.border.TitledBorder;

        import java.util.Random;
        import java.util.Scanner;
        import java.awt.*;
        import java.awt.event.ActionEvent;
        import java.awt.event.ActionListener;

        public class PracticeMath extends JFrame implements ActionListener {
            Scanner k = new Scanner(System.in);
            Random generator = new Random();
            protected JButton excerciseButton = new JButton( "New Excerices" ); // start new quiz session
            protected JButton answerButton = new JButton( "Answer" ); // set new question, check if the answer correct or wrong
            protected JLabel titlelabel = new JLabel( "How much is: " ); 
            protected int correctcounter = 0; // keep track of correct answer
            protected int wrongcounter = 0; // keep track of wrong answer
            protected int one = generator.nextInt(10);//generate ranodm first number of question
            protected int two = generator.nextInt(10); // generate random second number of question
            protected int i = generator.nextInt(4); // generate random operator
            protected char[] ops = { '+', '-', '/', '*' }; // the math operator
            protected JLabel correctlabel = new JLabel(" Number of Correct Answer: ");
            protected JLabel wronglabel = new JLabel( " Number of  Wrong answers:  " );
            protected JLabel firstnum = new JLabel("" + one); // display first number
            protected JLabel secondnum = new JLabel("" + two); //  display second number
            protected JLabel randomOP = new JLabel("" + ops[i]); // display operator
            protected JLabel equalOP = new JLabel("=");
            protected JTextField answerText = new JTextField(); //text area for writing you answer
            protected JLabel questionmark = new JLabel("?");
            protected JLabel correct = new JLabel(""+ correctcounter); // display correct answer
            protected JLabel wrong = new JLabel(""+ wrongcounter); // display wrong answer
            protected JLabel commentlabel = new JLabel(""); // set a comment for how good you doing. optionial

            public PracticeMath(){

                answerText.setColumns(5);

                JPanel Panel1 = new JPanel();// add a panel
                FlowLayout flowLayout = (FlowLayout) Panel1.getLayout();// layout for panel
                getContentPane().setLayout( new FlowLayout( FlowLayout.LEFT, 5, 5)); // set layout
                getContentPane().add(Panel1); // set panel
                titlelabel.setForeground(Color.ORANGE); 
                titlelabel.setFont(new Font("Tahoma", Font.PLAIN, 25));

                Panel1.add(titlelabel);
                firstnum.setFont(new Font("Tahoma", Font.PLAIN, 20));
                Panel1.add(firstnum);

                randomOP.setFont(new Font("Tahoma", Font.PLAIN, 25));
                Panel1.add(randomOP);

                secondnum.setFont(new Font("Tahoma", Font.PLAIN, 20));

                Panel1.add(secondnum);

                equalOP.setFont(new Font("Tahoma", Font.PLAIN, 20));
                Panel1.add(equalOP);

                Panel1.add(answerText);

                questionmark.setFont(new Font("Tahoma", Font.PLAIN, 20));
                Panel1.add(questionmark);

                Panel1.add(commentlabel);

                JPanel Panel3 = new JPanel();
                FlowLayout flowLayout3 = (FlowLayout) Panel3.getLayout();
                flowLayout3.setHgap(15);
                getContentPane().setLayout( new FlowLayout( FlowLayout.LEFT, 5, 5));
                getContentPane().add(Panel3);
                Panel3.add(excerciseButton);
                Panel3.add(answerButton);

                    JPanel panel2 = new JPanel();
                panel2.setBorder(new TitledBorder("Statistic"));
                getContentPane().add(panel2);
                panel2.setLayout(new GridLayout(0, 2, 0, 0));
                panel2.add(correctlabel);
                panel2.add(wronglabel);
                correct.setForeground(Color.GREEN);
                correct.setFont(new Font("Tahoma", Font.PLAIN, 25));
                panel2.add(correct);

                wrong.setForeground(Color.RED);
                wrong.setFont(new Font("Tahoma", Font.PLAIN, 25));
                panel2.add(wrong);

            answerButton.addActionListener( this );

            }

           public static void main(String[] args) {

                PracticeMath frame = new PracticeMath();
                frame.pack();
                frame.setLocationRelativeTo(null);  
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setSize(400,400);
                frame.setTitle( "Math Practice");
                frame.setVisible(true);

            }

         public void actionPerformed( ActionEvent ae )
   {
       String answer = answerText.getText();
       int answerint = Integer.parseInt(answer);
       if(one + two == answerint){
            correctcounter++;
            System.out.println("correct");
            firstnum.setText("" + generator.nextInt(11));
               randomOP.setText("" + ops[generator.nextInt(4)]);
               secondnum.setText("" + generator.nextInt(11));

        }
       else if(one-two == answerint){
            correctcounter++;
            System.out.println("correct");
            firstnum.setText("" + generator.nextInt(11));
               randomOP.setText("" + ops[generator.nextInt(4)]);
               secondnum.setText("" + generator.nextInt(11));
        }
        else if(one * two ==answerint){
            correctcounter++;
            System.out.println("correct");
            firstnum.setText("" + generator.nextInt(11));
               randomOP.setText("" + ops[generator.nextInt(4)]);
               secondnum.setText("" + generator.nextInt(11));
        }else if(one/two == answerint){
            correctcounter++;
            System.out.println("correct");
            firstnum.setText("" + generator.nextInt(11));
               randomOP.setText("" + ops[generator.nextInt(4)]);
               secondnum.setText("" + generator.nextInt(11));
        }
        else{
            wrongcounter++;
            System.out.println("wrong");
            firstnum.setText("" + generator.nextInt(11));
               randomOP.setText("" + ops[generator.nextInt(4)]);
               secondnum.setText("" + generator.nextInt(11));
        }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:58:24.573

您永远不会重新分配变量`one`and `two`，因此它们仍然使用与它们开始时相同的值...

尝试重新构建您的`actionPerformed`方法以减少代码重复并将新方程值分配给`one`和`two`变量....

```
public void actionPerformed(ActionEvent ae) {
    String answer = answerText.getText();
    int answerint = Integer.parseInt(answer);
    if (one + two == answerint) {
        correctcounter++;
        System.out.println("correct");
    } else if (one - two == answerint) {
        correctcounter++;
        System.out.println("correct");
    } else if (one * two == answerint) {
        correctcounter++;
        System.out.println("correct");
    } else if (one / two == answerint) {
        correctcounter++;
        System.out.println("correct");
    } else {
        wrongcounter++;
        System.out.println("wrong");
    }
    one = generator.nextInt(11);
    two = generator.nextInt(11);
    firstnum.setText("" + one);
    randomOP.setText("" + ops[generator.nextInt(4)]);
    secondnum.setText("" + two);
} 
```

**更新**

当您维护正确和错误答案的计数器时，您没有在任何地方显示它们（第一次运行程序时吓坏了我）。

在`actionPerformed`方法的底部，您需要更新显示正确和错误答案数量的标签。

```
public void actionPerformed(ActionEvent ae) {
    // ... Previous content... //

    correct.setText(Integer.toString(correctcounter));
    wrong.setText(Integer.toString(wrongcounter));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T23:50:52.747

在`actionPerformed`中，您似乎在回答每个问题后使用新的随机值更新文本字段 (`firstnum`和`secondnum`)，但您正在使用变量`one`和检查答案`two`。由于显示的随机值`one`并`two`没有更新，它们与您回答第一个问题后显示的内容不同步。

# git - 更新引用 GitHub 存储库的外部引用时，如何停止 SVN 创建“分支”文件夹？

> ID：14843941
> 
> 赞同：1
> 
> 时间：2013-02-12T23:39:56.577
> 
> 标签：git, svn, github, tortoisesvn, svn-externals

我在 GitHub 上托管了一个简单的 git 存储库，我希望将其拉入一个在 SVN 存储库中维护的项目中。Git 存储库中有 2 个分支（目前，还会有更多分支），但我只想并且需要拉入 Git 存储库的当前“主”分支。

我正在使用一个简单的**svn:external**来实现这一点，使用附加到 Github repo URL 的“/trunk”路径，这基本上运行良好。

唯一的问题是，当我更新我的 SVN 工作副本时，除了更新外部（基本上正确）之外，我还得到了一个“分支”文件夹，它**根本不**属于我在 Git 存储库中的项目文件的一部分（并且从来没有）。

因此，使用如下所示的 git repo master：

```
 repo-root
      folder a
      folder b
      file a
      file b 
```

我最终得到一个从 SVN 外部更新的文件夹，如下所示：

```
 external-root
      branches
      folder a
      folder b
      file a
      file b 
```

即莫名其妙地出现了一个无关的“分支”文件夹。如果我删除该文件夹，它只是在下次更新外部时重新创建。创建的**分支**文件夹是空的 - 它不包含**任何**文件或数据，更不用说与 GitHub 方面的实际分支相关的任何内容。

我正在使用 TortoiseSVN，如果我使用 repo 浏览器查看外部引用的 git repo，我看不到任何暗示这个无关的“分支”文件夹来自哪里，只是预期的分支/主干结构：

```
 repo-url
      branches
         develop
      trunk
         folder a
         folder b
         file a
         file b 
```

如果我使用 Tortoise SVN 的“显示日志”工具来尝试查看此**分支**文件夹的历史记录，github 会以“修订版 NN 中不存在”作为响应。

这个分支文件夹来自哪里，我该如何阻止它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T00:24:38.470

与非常乐于助人的 GitHub 支持人员一起对该问题进行的详细调查使我们得出结论，这是我在执行外部初始“更新”时使用的旧版本 TortoiseSVN 中的一个错误。

我们认为这会导致 SVN 存储库中的一些错误配置的元数据，这些元数据被后来更新的 SVN 客户端不恰当地应用（分支文件夹在删除后将被“恢复”，即使是由备用的命令行客户端，如 SlikSVN ）。

但是，在完全删除 externals 配置、重新提交“external-less”SVN 存储库，然后重新创建外部引用后，不再出现分支文件夹，因此我们得出结论，无论错误是什么，在哪-曾经它驻留的组件（TortoiseSVN 或 github SVN API 层）现在已修复。

**如果您在svn:externals**引用 GitHub（或者通常是**git** ）repo时遇到此问题或类似问题，请使用完全最新的 SVN 工具链：

1.  删除外部文件的所有工作副本
2.  删除/移除SVN 属性中的**svn:externals配置**
3.  在此状态下提交 SVN 存储库
4.  然后重新创建你的**svn:externals**

这应该可以解决问题。

# sql - SQL INSERT 缺少从表 A 到表 B 的行

> ID：14843944
> 
> 赞同：9
> 
> 时间：2013-02-12T23:40:16.997
> 
> 标签：sql, sql-server, tsql

如果它们尚不存在，我正在尝试将行插入到表“数据”中。

对于 Export$ 中的每一行，我需要代码来检查与 Period（日期）和 ID（int）匹配的行的“数据” - 如果这些行尚不存在，则应创建它们。

我很确定我的“不存在”部分是错误的——最好的方法是什么？感谢你的帮助

```
 IF NOT EXISTS (SELECT * FROM Data, Export$ WHERE Data.ID = Export$.ID AND Data.Period = Export$.Period)
    INSERT INTO Data (Period, Performance, ID)
    SELECT Period, [Return], [ID] FROM Export$ 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-12T23:47:34.293

试试这个：

```
INSERT INTO Data (Period, Performance, ID)
SELECT Period, [Return], [ID] 
FROM Export$ e
where not exists (
select *
from Data
where  ID = e.ID and Period = e.Period) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-12T23:46:56.363

尝试类似的东西，需要调整以适合您的桌子

```
insert into data
select * from export
left join data on data.id = export.id
                     and data.period = export.period
where data.id is null 
```

# c# - ZeroMQ 创建上下文和创建套接字有多贵？

> ID：14843945
> 
> 赞同：3
> 
> 时间：2013-02-12T23:40:18.793
> 
> 标签：c#, using, zeromq

在 C# 中使用 ZeroMQ 时，ZmqContext.Create() 和 zmqContext.CreateSocket(SocketType.PUB) 调用有多贵 - 我在 .NET 4.0 中使用 ZeroMQ 3.2.x？

我需要在表单加载时正确设置和绑定 ZeroMQ 套接字，因为我将始终连接至少一个 ZeroMQ 订阅服务器。几乎所有 ZeroMQ 示例都将 Context Create 和 Socket Create 包装在我见过的“使用”语句中。

如果我在进程终止时不使用“使用”方法，我是否需要担心拆除（关闭和处置）？我不知道我可以保证我的 _FormClosing 或 _FormClosed 会被击中，因为这个 Win Form App 上没有 Close 框，如果需要，它会被另一个应用程序终止。此 Win Form 应用程序发布器通常 24x7 运行，并带有一个 24x7 运行的监听应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T03:52:40.540

一般来说，当你想知道某个操作的成本时，只需编写一个小程序，执行 1000、10K、100K、1M 次，并测量运行所需的时间。

您的具体问题有点特别，因为即使这些操作没有成本，如果您过于频繁地打开和关闭它们，您可能会用完文件句柄。

您的用例很可能会正常工作，但您需要强调它以确定它是否以及在哪里中断。

# ios - 设备是否需要在配置门户中注册才能在其上安装企业应用程序？

> ID：14843946
> 
> 赞同：1
> 
> 时间：2013-02-12T23:40:21.267
> 
> 标签：ios, ios-provisioning

我有一个企业帐户，并已在 Apple 配置门户中注册了一台设备并将其包含在分发门户中，并且可以按预期将应用程序安装到该设备上。

我正在尝试将应用程序安装到尚未在门户网站注册且无法注册的设备上。然而，我的印象是可以将企业应用程序安装到设备上，而无需像标准的临时构建那样将它们添加到门户和配置文件中。

因此我错了吗？如果我弄错了，那么当我登录 Apple 帐户时，它说有 100 台设备的限制，尽管它是企业帐户而不是常规开发人员帐户。那为什么呢？

如果可以将企业应用程序安装到尚未添加到供应门户的设备上，那么这是如何完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:47:21.527

确保您使用分发证书而不是开发证书对应用程序进行签名。

# c# - 使用带有 Windows 安全弹出窗口的 Active Directory Membership Provider 提示，然后是我的 login.aspx，所以我必须登录两次

> ID：14843947
> 
> 赞同：2
> 
> 时间：2013-02-12T23:40:21.733
> 
> 标签：c#, asp.net

我有一个部署的应用程序，它使用 Active Directory 成员资格提供程序，以便在外联网上对我们域的用户进行身份验证。该应用程序正在使用该`.NET 3.5`框架。如果您在本地运行应用程序，它会直接进入登录页面。但是，如果您从其在服务器上的部署位置运行该应用程序，它首先会提示 Windows 安全登录提示，并且在登录后，您将被带到必须再次登录的登录页面。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T01:31:21.363

您的 Web 应用程序似乎配置为使用 Active Directory 身份验证（并且不允许匿名访问）。您的用户在内部已经登录到域，因此 IIS 只是让他们过去。

您的 login.aspx 页面受 IIS 保护，因此您必须是域的成员才能看到 login.aspx 页面。这是 IIS 中的配置问题，与 asp.net 或 C# 几乎没有关系。

如果您使用表单身份验证，您应该能够在 IIS 中允许匿名身份验证并仅使用表单处理身份验证。但是，这完全取决于 Web 应用程序，启用匿名访问可能会无意中暴露您不打算公开访问的信息。

如果不了解您的应用程序的更多信息，就很难提供更多建议。祝你好运。

# java - JOGL 中 glDrawPixels() 的数据格式

> ID：14843955
> 
> 赞同：1
> 
> 时间：2013-02-12T23:41:42.830
> 
> 标签：java, opengl, glut, jogl

我现在对 glDrawPixels() 函数感到困惑。我知道函数签名是这样的： gl.glDrawPixels(int width, int height, format, type, data);

我不确定如何使格式类型数据保持一致。例如，我必须使用格式为 GL2.GL_RGB，我分别要求 type=GL2.GL_DOUBLE、GL2.GL_FLOAT、GL2.GL_BYTE，数据是什么样的？在调用 glDrawPixels() 函数之前，我应该如何在 Java 中包装和格式化我的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:07:58.240

首先，您不应该真正使用 glDrawPixels。这是一个非常慢的函数，并且在大多数 OpenGL 实现中没有得到很好的优化。您应该改用带纹理的四边形。*但是*您的问题也适用于 glTexImage2D 的参数。

那么这些参数是什么意思。我们来看看 glTexImage2D 的签名

```
C SPECIFICATION
   void glTexImage2D( GLenum target,
                      GLint level,
                      GLint internalformat,
                      GLsizei width,
                      GLsizei height,
                      GLint border,
                      GLenum format,
                      GLenum type,
                      const GLvoid *pixels ) 
```

*   `internalformat`指定数据在 OpenGL 内部的格式。

*   `format`是数据所在的格式，`pixels`与glDrawPixels中的同名参数含义完全相同*。*本质上`format`告诉 OpenGL 中的一个像素数据有多少个元素`pixels`

*   `type`告诉 OpenGL 包含单个像素的类型。现在这很有趣，因为它不平凡。

让我们看一些组合：

### 格式 = GL_BGRA，类型 = GL_UNSIGNED_INT_8_8_8_8

这告诉 OpenGL 一个像素由 4 个元素组成，依次为蓝色、绿色、红色和 alpha，并且所有四个元素都包含在一个 32 位的无符号整数中，分为 4 组，每组 8 位。您可能知道 HTML 的颜色表示法，例如`#ffffffff`用于写入。嗯，这本质上是一个 32 位 unsigned int 十六进制表示法。

你可以有一个 32 位无符号整数数组

```
uint32_t pixels[] = {
 0xffffffff, 0x0000ffff, 0xffffffff,
 0x0000ffff, 0xffffffff, 0x0000ffff,
 0xffffffff, 0x0000ffff, 0xffffffff,
}; 
```

那将是一个 3×3 大小的白色地面上的红色钻石图像。

### 格式 = GL_RGB，类型 = GL_UNSIGNED_BYTE

在这种情况下，我们告诉 OpenGL 一个像素有 3 个元素，红色、绿色和蓝色，并且因为该类型没有明确指示子大小，所以这种类型的每个元素都包含该像素的一个颜色元素

我们的红色钻石看起来像这样

```
uint8_t pixels[] = {
    0xff, 0xff, 0xff, /**/ 0xff, 0x00, 0x00, /**/ 0xff, 0xff, 0xff,
    0xff, 0x00, 0x00, /**/ 0xff, 0xff, 0xff, /**/ 0xff, 0x00, 0x00,
    0xff, 0xff, 0xff, /**/ 0xff, 0x00, 0x00, /**/ 0xff, 0xff, 0xff
}; 
```

### 格式 = GL_RGBA，类型 = GL_FLOAT（或 GL_DOUBLE）

在这种情况下，像素的每个元素都是一个单独的浮点数，范围为 [0; 1]。钻石看起来像

```
float pixels[] = {
    0., 1., 0.,
    1., 0., 1.,
    0., 1., 0.
}; 
```

对于 GL_DOUBLE 它看起来完全一样，但用`double`而不是`float`.

* * *

我希望你现在了解基本要点

# reporting-services - 导出为word时，部分页码重复

> ID：14843956
> 
> 赞同：1
> 
> 时间：2013-02-12T23:41:45.317
> 
> 标签：reporting-services, reportingservices-2005

我有一份 50 页的报告。我有一个列表控件，这个列表控件包含一个表格控件。我在列表中使用分组，最后有一个分页符。我希望每个组在一页上。例如，如果某些页面的数据大小更大，则它会移动到第二页。

问题是我得到了一些相同数量的页面，其中一组数据超过一页。我在页脚中使用了这个表达式：

```
format(Globals!PageNumber & "of" & Globals!TotalPages) 
```

当我有 50 页时，导出到 Word 后我会得到 45 页，因为将重复 5 或 6 页，给出“1 of 45”而不是“1 of 50”。

请注意，我使用的是 SSRS 2005。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-07T19:07:09.923

这是一个较老的问题，但最近我自己遇到了这个问题，所以它可能对其他人有帮助。

有很多示例在示例中使用强制转换来显示页码（CStr 或 ToString()）。每当我调用这些方法时，在导出到 Word（doc 或 docx）时计数都会关闭。

我可以让它工作的唯一方法是在页脚中使用三个单独的文本框和这些表达式：

```
=Globals!PageNumber
"of"
=Globals!TotalPages 
```

避免使用那些其他方法（包括包装 Format 函数——我认为这没有任何作用）。三个单独的文本框是我可以让它工作的唯一方法。

# quartz-scheduler - 如何在 Grails 2 中使用 Quartz 2.x 插件设置序列化（非并发）InvokeMethodJob

> ID：14843957
> 
> 赞同：1
> 
> 时间：2013-02-12T23:41:55.427
> 
> 标签：quartz-scheduler, grails-2.0

Quartz 2 文档清楚地设置了 SimpleJobDetail，以便通过设置 concurrent = false 来执行序列化（即下一个作业在当前作业完成*后运行）。*Quartz 2 文档也清楚地说明了如何设置作业以使用 InvokeMethodJob 调用 spring bean 方法。但不清楚的是如何将 InvokeMethodJob 设置为仅运行序列化 (concurrent=false)。我在 conf/Config.groovy 中像这样设置 InvokeMethodJob：

```
import static org.quartz.JobBuilder.*
import static org.quartz.SimpleScheduleBuilder.*
import static org.quartz.TriggerBuilder.*
import org.quartz.impl.triggers.*
import org.quartz.JobDataMap
import org.quartz.JobDetail
import org.quartz.Trigger
import grails.plugin.quartz2.InvokeMethodJob
//Begin quartz configuration
grails.plugin.quartz2.autoStartup = true
    org{
        quartz{
            scheduler.instanceName = 'MyScheduler'
    threadPool.class = 'org.quartz.simpl.SimpleThreadPool'
    threadPool.threadCount = 20
    threadPool.threadsInheritContextClassLoaderOfInitializingThread = true
            jobStore.class = 'org.quartz.simpl.RAMJobStore'
        }
    }
grails.plugin.quartz2.jobSetup.mySchedule = { quartzScheduler, ctx  ->
    def props = new JobDataMap([concurrent:false,targetObject:ctx.myActionService,targetMethod:'myaction',arguments:[true]])
    JobDetail jobDetail = newJob(InvokeMethodJob.class)
        .withIdentity("perform my action")
        .usingJobData(props)
        .build()
    Trigger trigger = newTrigger().withIdentity("every 90 seconds trigger")
        .withSchedule(
            simpleSchedule().withIntervalInSeconds(90).repeatForever()
        )
        .startNow().build()
    quartzScheduler.scheduleJob(jobDetail, trigger)
} 
```

但是，这将允许多个线程同时执行 myActionService.myaction() 调用。我希望调度程序停止对它的进一步调用，直到第一个调用返回。

我阅读了有关@DisallowConcurrentExecution 的信息，但没有办法在conf/Config.groovy 的定义中应用它（或如何应用它的示例）。

我可以设计的最佳解决方案是创建一个新的 Groovy 类扩展 InvokeMethodJob 并使用 @DisallowConcurrentExecution 进行注释，如下所示：

```
package com.fourgablesguy.quartz2

import grails.plugin.quartz2.InvokeMethodJob
import org.quartz.DisallowConcurrentExecution

/**
 * InvokeMethodJob that is not concurrently executed, serial execution
 * this has the DisallowConcurrentExecution annotation
 */
@DisallowConcurrentExecution
class SerializedInvokeMethodJob extends InvokeMethodJob { } 
```

然后更改 conf/Config.groovy 以使用这个新的 Job 类类型：

```
import com.fourgablesguy.quartz2.SerializedInvokeMethodJob
...
JobDetail jobDetail = newJob(SerializedInvokeMethodJob.class) 
```

但是我可能错过了一些不太复杂的事情，可以使用石英 2 来完成相同的任务，所以如果有人有不同的解决方案，我会发布这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-22T22:23:51.640

问题中描述了我找到的最佳解决方案，使用 @DisallowConcurrentExecution 注释自定义 InvokeMethodJob 类

如果您的系统只执行一项任务，则 threadCount = 1 可能是一个选项。如果您有多个不同的作业，则需要更高的线程数，以便它们可以并行运行（您可能希望某些作业是非并发的。）一旦线程数高于 1，则不能保证非并发执行对于任何工作。

# node.js - Connect 的会话中间件的签名 cookie 是如何工作的？

> ID：14843960
> 
> 赞同：4
> 
> 时间：2013-02-12T23:42:29.190
> 
> 标签：node.js, session, cookies, connect, middleware

我想解释一下 connect.sid cookie 如何在 Connect Node.js 框架中工作。我注意到它们的格式如下，

```
s:hash.signature 
```

我不明白当哈希能够用于从内存存储或 redis 存储访问会话数据时如何使用签名。

另外，我不明白为什么`s:`甚至在cookie中；它的目的是什么。

我听说签名用于“签名”哈希。“签名”或“签名”到底是什么意思？我也需要对这个过程进行解释。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T23:46:41.707

签名在那里，因此服务器可以验证它是否生成了 cookie，而不是一些随机的攻击者。

只有知道用于签名的秘密的人才能用相同的值对其进行签名。

“s:” 在那里所以很容易知道它是一个签名的cookie，而不是其他格式（如未签名）。

这是一种从签名 cookie 中检索数据的方法，如果签名不正确，则失败。仅从实际应用程序中提取部分代码，但您应该明白这一点。

```
var cookie = require('cookie');
var connect = require('connect');
var secret = "same secret used to sign cookies";

socketio.set('authorization', function(data, cb) {
  if (data.headers.cookie) {
    var sessionCookie = cookie.parse(data.headers.cookie);
    var sessionID = connect.utils.parseSignedCookie(sessionCookie['connect.sid'], secret);
    // do something here with decoded value
  }
}); 
```

您需要使用 socket.io 中的“授权”功能，以便您可以访问标头。该代码在使用 xhr-polling 传输时有效，例如，我不确定这是否适用于 websocket。

# mysql - mySQL VARCHAR(256) + mySQL INT = 多少字节？

> ID：14843961
> 
> 赞同：0
> 
> 时间：2013-02-12T23:42:45.200
> 
> 标签：mysql, database, int, varchar, utf-16

```
CREATE SCHEMA IF NOT EXISTS `utftest`  DEFAULT CHARACTER SET utf16;
CREATE  TABLE IF NOT EXISTS `metadata_labels` (`metadata_id` INT NOT NULL , `label` VARCHAR(256) NOT NULL ,  PRIMARY KEY (`metadata_id`, `label`)); 
```

但是我收到以下错误消息：

```
Specified key was too long; max key length is 767 bytes 
```

请指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:51:05.103

在 UTF8 中，它需要`3 x 256 + 4 = 772`字节。UTF16 将再多占用 25%。

你不应该使用这么宽的主键；为了使索引有效，每个索引的存储空间应保持在最低限度。

如果您需要防止重复，我建议添加一个包含内容哈希的计算字段（例如 sha1），并在其上创建一个唯一约束。

或者，`latin1`用作字段的字符编码以将`label`字节数减少到`256 + 4 = 300`.

如果 Unicode 是必须的并且散列不在图片中，您应该将该列减少为 UTF8（250 个字符）或 UTF16（190 个字符）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T23:46:13.833

UTF 16 在 MySQL 中使用[每个字符 32 位](http://dev.mysql.com/doc/refman/5.5/en/charset-unicode-utf16.html)（4 个字节）。*4 x 256 > 767*。

如果可能，我建议您使用 UTF16 以外的其他`VARCHAR`方式作为您的密钥。

# cocoa - 在 MonoMac/Cocoa 中打印文本

> ID：14843969
> 
> 赞同：1
> 
> 时间：2013-02-12T23:43:19.373
> 
> 标签：cocoa, printing, monomac

我有一个希望从中打印的 MonoMac 应用程序。目前我有以下代码：

```
private void PrintText(text)
{
    NSTextView nsTextView = new NSTextView();
    nsTextView.Font = NSFont.LabelFontOfSize(12);
    nsTextView.TextColor = NSColor.Black;
    nsTextView.TextStorage.Append(new NSAttributedString(text));

    NSPrintOperation nsPrintOperation = GetPrintOperation(nsTextView); // Creates a NSPrintOperation and NSPrintInfo as well as set my default settings
    nsTextView.Bounds.Width = nsPrintOperation.PrintInfo.PaperSize.Width;
    nsTextView.Bounds.Height = float.MaxValue;
    nsPrintOperation.RunOperation();
} 
```

可悲的是，当我得到一个打印对话框时，它会打印一个空白页。有什么想法我错了吗？

# c - 用于嵌入式系统的 C 事件驱动 (GUI) 编程

> ID：14843970
> 
> 赞同：3
> 
> 时间：2013-02-12T23:43:23.900
> 
> 标签：c, user-interface, embedded, event-driven

我正在嵌入式系统中制作事件驱动的 GUI。我刚刚完成了小部件图形和触摸屏功能的实现。

我的问题是如何/提示在 C 和嵌入式系统上实现这一点。

这就是我在非常一般的“伪”代码中的想法：

```
mainloop()
{
    <All initializations etc.>

    eventloop();
}

eventloop()
{
    eventhandler();
    sleep_low_power_uc_mode();
}

touchscreen_interrupt_service_routine()
{
    int * x, *y;
    eventtype event = TOUCHSCREEN_CLICK;
    get_XY_coordinate(x, y);
    post_event(*x, *y, event);
}

eventhandler()
{
    int * x, *y;
    eventtype * event;
    static int current_state;
    get_event(x, y, event);
    if(event != NO_EVENT)
    {
        handle_events(*x, *y, *event, current_state);
    }
}

handle_events(int x, int y, eventtype event, int * current_state)
{
    int buttonID, i=0;
    buttonID = check_if_button_pressed(x, y, current_state);
    while(buttons[i].enabled != FALSE)
    {
        if(buttonID == buttons[i].ID)
        {
            call_buttons_respective_handler();
        }
    }
} 
```

在这里，我假设我有一个触摸屏，它将通过硬件中断唤醒我的微控制器控制设备。eventloop() 是一个永无止境的事件循环，它将处理任何事件然后进入睡眠状态，直到下一次触摸屏中断。触摸屏中断服务程序将从触摸屏获取 X 和 Y 坐标，并使用 post_event() 函数发布事件。event_handler() 函数是 eventloop() 函数中的一个函数，它将获取事件（如果有）并调用 handle_events() 函数。handle_events() 函数检查是否已使用给定事件、X 和 Y 坐标按下按钮（例如），如果已按下按钮，则返回非零按钮 ID。然后接下来是遍历按钮数组并检查相同的按钮ID并调用该按钮处理程序。

我试图描述的内容在事件驱动的编程方式中是否有意义？任何想法都非常受欢迎（请耐心等待，因为我是新手）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:29:26.483

答案实际上取决于您正在开发的平台。用于 Microchip 控制器的嵌入式 RTOS 将具有一组约束，而用于 ARM 解决方案的 RTOS 将完全不同。您应该澄清您正在设计什么硬件，或者至少是什么微控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-09T10:06:43.080

您可以根据定时器在中断上编程大部分事件，然后您可以在 2 或 5 毫秒后调用每个中断，这意味着可以同时监视所有事件（伪 RTOS）。

# python - Python SocketServer 通过 Thread 本地存储向主线程传递数据

> ID：14843974
> 
> 赞同：1
> 
> 时间：2013-02-12T23:43:42.943
> 
> 标签：python, python-multithreading, python-sockets

对不起，如果这个问题太基本了——这是我第一次尝试在 Python 中使用多线程套接字。

基本上，我正在尝试编写代码来获取 UDPServer 套接字接收的数据；套接字本身在线程内部运行。~~为了使主线程可以访问数据，我正在使用线程本地存储（根据我阅读的所有内容，这似乎是正确的方法）~~. 下面的代码是我第一次尝试使它工作，但变量似乎没有正确更新。对可能发生的事情有任何想法吗？

编辑：请参阅下面的工作示例

服务器：

```
import socket
import threading
import SocketServer

data = threading.local()

class UDPHandler(SocketServer.BaseRequestHandler):

    def handle(self):
        data.outputString = self.request[0].strip()

class ThreadedUDPServer(SocketServer.ThreadingMixIn, SocketServer.UDPServer):

    def __init__(self, serverAddress, handlerClass):
        SocketServer.UDPServer.__init__(self, serverAddress, handlerClass)
        data.outputString = ""

if __name__ == "__main__":

    ReceiverSocket = ThreadedUDPServer(("localhost",11111), UDPHandler)
    ServerThread = threading.Thread(target=ReceiverSocket.serve_forever)
    ServerThread.daemon = True
    ServerThread.start()

    while 1:
        if data.outputString:
            print data.outputString
            data.outputString = "" 
```

客户：

```
import socket
import sys

HOST, PORT = "localhost", 11111
data = " ".join(sys.argv[1:])

sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

sock.sendto(data + "\n", (HOST, PORT)) 
```

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T05:16:55.367

让它工作。是的 - 本地线程与此无关...... :)

我已经设置了一个全局变量，并在每个修改它的函数中将其定义为全局变量（根据[这个非常有用的答案](https://stackoverflow.com/a/423596/514062)）

```
import socket
import threading
import SocketServer

data = ""

class UDPHandler(SocketServer.BaseRequestHandler):

    def handle(self):
        global data
        data = self.request[0].strip()

class ThreadedUDPServer(SocketServer.ThreadingMixIn, SocketServer.UDPServer):
    pass

if __name__ == "__main__":

    ReceiverSocket = ThreadedUDPServer(("localhost",11111), UDPHandler)
    ServerThread = threading.Thread(target=ReceiverSocket.serve_forever)
    ServerThread.start()

    while 1:
        if data:
            print data
            data = "" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-10T23:32:42.447

尝试使用全局变量，但确保在每个线程和函数中将其定义为全局变量

# c# - 我应该从 NuGet 下载哪个 TinyMCE？

> ID：14843978
> 
> 赞同：0
> 
> 时间：2013-02-12T23:44:02.527
> 
> 标签：c#, jquery, asp.net-mvc-4, tinymce

我希望将 WYSIWYG 编辑器集成到我的 MVC 应用程序中。我正在考虑 TinyMCE，但 NuGet 上有很多包，我很困惑哪个包适合我。

有人有建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T18:00:36.003

我找到了一篇解释了我需要的一切以及更多内容的帖子。如果其他人需要有关如何将 MVC 与 TinyMCE 集成的帮助，请阅读[Tugberk 的博文](http://www.tugberkugurlu.com/archive/tinymce-html-text-editior-and-asp-net-mvc-setting-it-up-has-become-easy-with-nuget)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:46:52.793

我建议安装最新的软件包，因为最新版本的 tinymce 更有可能处理新的浏览器。包应该命名`TinyMCE 3.5.8`或类似。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-12T23:48:35.420

我发现[WYSIHTML5](http://xing.github.com/wysihtml5/)非常灵活和强大。

# sql - SQL Server 2005：测试表变量为标量

> ID：14843982
> 
> 赞同：0
> 
> 时间：2013-02-12T23:44:25.257
> 
> 标签：sql, stored-procedures

我想在 SQL Server 2005 中编写一个查看表中最新条目的过程。如果该条目发生在一个多星期前，我想创建一个新条目。如果没有，我想更新最新的。

```
DECLARE @MaxVal TABLE (Date DATETIME)

INSERT INTO @MaxVal (Date) 
(SELECT MAX(Date)
FROM schema.TABLE_TO_UPDATE)

IF [@MaxVal].Date > '2013-01-01'
    PRINT 'New entry'
ELSE
    PRINT 'Update the entry' 
```

我不断收到以下错误消息：

> *消息 4104，级别 16，状态 1，第 9 行
> 无法绑定多部分标识符“@MaxVal.Date”。*

我查过那条消息，但大多数人似乎是在参考 JOINS 时得到它的。知道为什么会在这里发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:03:53.243

您的 IF 语句正在引用表中的列，如果没有关联的查询，这是无法完成的。你可以试试这个

```
IF (select [@MaxVal].Date from @MaxVal) > '2013-01-01' 
```

这将返回列的值并将其与日期常量进行比较。

# windows - 如何使用 Qt 绘制自定义形状的窗口并将当前的 Windows 主题颜色/效果应用于它？

> ID：14843983
> 
> 赞同：0
> 
> 时间：2013-02-12T23:44:31.807
> 
> 标签：windows, qt, user-interface, themes, aero-glass

是否可以在 Qt 中绘制一个自定义形状的窗口，该窗口继承了当前系统主题的颜色和透明度（玻璃）效果。最终我需要它看起来和感觉就像用户的任务栏适应他的主题。喜欢在这个[概念](http://img824.imageshack.us/img824/22/16gnyo.png)。我意识到可能无法实现如此完美的集成，但至少制作一个看起来与任务栏相同的自定义形状的背景（玻璃外观和感觉）我相信是可以实现的。

部分答案在类似的问题中 -[使用 Qt 显示半透明/不规则形状的窗口](https://stackoverflow.com/questions/1333610/displaying-translucent-irregular-shaped-windows-with-qt)。但仍然不确定如何读取系统主题信息并将其应用于 QPainter。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:29:38.360

棘手的部分是左边的斜坡。我敢打赌，您可以让窗口上的标题栏更高，并使窗口的其余部分高度为 0，因此该窗口完全是一个标题栏，但该斜率需要在 Windows 上不存在的渲染功能。

此外，您希望窗口将任务栏的斜角隐藏在窗口出现的位置下方。这可能也不可能，因为您的窗口将是半透明的，因此它无法阻止正常任务栏的渲染斜面。

对不起。可能必须回到设计的绘图板上。

# ios - 使用 UIKit/Coregraphics 渲染为 PDF 时图像模糊

> ID：14843992
> 
> 赞同：3
> 
> 时间：2013-02-12T23:45:12.647
> 
> 标签：ios, pdf, uikit, core-graphics, pdf-generation

一切看起来都很标准我下载了[PDF GENERATION SAMPLE](http://www.ioslearner.com/generate-pdf-programmatically-iphoneipad/)并以正常分辨率使用了我自己的资产，我的图像看起来有点不对劲。

这是资产![来源](../Images/758745cfaee424af1257a622a569befc.png)

这是它在应用程序中的样子![在此处输入图像描述](../Images/07f8828702cc9ea57da704111b8b6881.png)

这就是它在 100% 缩放的 PDF 中的样子![在此处输入图像描述](../Images/823cc5b24e0b057906a66528edd1d5e8.png)

drawImage 函数中的代码非常简单

```
UIImage * demoImage = [UIImage imageNamed:@"icon_map_project.png"];
[demoImage drawInRect:CGRectMake( (pageSize.width - demoImage.size.width)/2,
                                 350,
                                 demoImage.size.width,
                                 demoImage.size.height)]; 
```

一点都不花哨。我确实承认，目前我对 PDF 工作原理、DPI 等细节的熟悉程度超出了我的范围。

我看过 LibHaru 并认为它是一个很棒的系统，但我宁愿将其保留在 UIKit/CoreGraphics 的范围内。

您会注意到右侧出现奇怪的锯齿状，即使将图像缩小 50% 似乎也无济于事。

这是使用数字色度计的放大图像，PDF 为 100%，然后是应用程序![在此处输入图像描述](../Images/857bfd8a79d0370d9c8a19b9aae3d704.png)

正如您所看到的，图像根本无法正确呈现到 PDF 中，我正在努力寻找解决方案。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:36:11.817

您将 PDF 中的图像绘制在与图像大小匹配的矩形中。这导致图像的 72dpi。因为查看器应用程序使用 96dpi 或更高的值作为 100% 缩放的参考，所以当文件以 100% 显示时，您的图像将呈现 100% * 96/72 比例。如果您使用成像工具以该比例放大位图，您会看到类似的锯齿状。解决方案是使用在 37x36pt 矩形中绘制的较大图像，以便生成的图像 dpi 更高。
如果将 PDF 文件缩放到 75%，则页面上显示的图像大小应与应用程序中的图像大小匹配（此假设基于 96 dpi 屏幕）。